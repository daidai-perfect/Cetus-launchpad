import{m as z,C as j,af as q}from"./entry.7dcfbd3d.js";import{c as i,C as $,F as G,u as H,a6 as c,k as f,a7 as C}from"./index.33b6d0c7.js";import{D as g}from"./decimal.0bdeb344.js";const J=q(),Q=J.public.appEnv;function oe(a){const y={launchpad:i[a||"Sui"].launchpad,ido:i[a||"Sui"].ido,xcetus:i[a||"Sui"].xcetus,xcetus_dividends:i[a||"Sui"].xcetus_dividends,cetus_faucet:i[a||"Sui"].cetus_faucet,xtoken:i[a||"Sui"].xtoken,xtoken_dividends:i[a||"Sui"].xtoken_dividends,token_faucet:i[a||"Sui"].token_faucet,booster:i[a||"Sui"].booster,maker_bonus:i[a||"Sui"].maker_bonus},x={fullRpcUrl:localStorage.getItem(`${a}-currentRpclocal6`)||i[a||"Sui"].fullRpcUrl,simulationAccount:i[a||"Sui"].simulationAccount,cetus_config:i[a||"Sui"].cetus_config,clmm_pool:i[a||"Sui"].clmm_pool,integrate:i[a||"Sui"].integrate,deepbook:i[a||"Sui"].deepbook,deepbook_endpoint_v2:i[a||"Sui"].deepbook_endpoint_v2,aggregatorUrl:i[a||"Sui"].aggregatorUrl},M=new $(x),s=new G(y,M),S=H(),m=z(()=>S);j(()=>{m.value.address&&(s.ClmmSDK.senderAddress=m.value.address)});const _=async e=>{const t=await s.XCetusModule.getOwnerLockCetuss(e);return console.log(t,"===>lockWhales"),t},D=async(e,t)=>{const o=c.getAvailableXCetus(e,t);return console.log(o,"==>availableXwhale"),o},b=async e=>{const t=await s.XCetusModule.getOwnerCetusCoins(e);return console.log(t,"===>coins"),t},k=async e=>await s.XCetusModule.getOwnerVeNFT(e),P=async(e,t)=>{const o={amount:e};t&&(o.venft_id=t);const n=await s.XCetusModule.convertPayload(o),d={action:"xCETUSConvert",txbParams:o};return{txb:r(n),payloadParams:d}},h=async()=>{const e=await s.XCetusModule.mintVeNFTPayload();return r(e)},T=async(e,t)=>{const o=await s.XCetusModule.redeemNum(e,t);return console.log(o,"result===>"),{amountOut:o.amountOut,percent:f(new g(o.percent).mul(new g(100)).toString(),2)}},X=async(e,t)=>{const o=await s.XCetusModule.reverseRedeemNum(e,t);return{amountOut:o.amountOut,percent:f(new g(o.percent).mul(new g(100)).toString(),2)}},I=async(e,t,o)=>{const n={venft_id:t,amount:e,lock_day:o},d=await s.XCetusModule.redeemLockPayload(n),u={action:"xCETUSRedeemLock",txbParams:n};return{txb:r(d),payloadParams:u}},R=e=>c.getLockingCetuss(e),F=async(e,t)=>{const o=await s.XCetusModule.getLockCetus(e);if(o&&c.isLocked(o)){const n={venft_id:t,lock_id:e},d=s.XCetusModule.cancelRedeemPayload(n),u={action:"xCETUSCancelRedeem",txbParams:n};return{txb:r(d),payloadParams:u}}},O=async(e,t)=>{const o=await s.XCetusModule.getLockCetus(e);if(o&&!c.isLocked(o)){const n={venft_id:t,lock_id:e},d=await s.XCetusModule.redeemPayload(n),u={action:"xCETUSRedeem",txbParams:n};return{txb:r(d),payloadParams:u}}},V=async()=>{const e=await s.XCetusModule.getDividendManager();console.log("dividendManager:",e);const t=Number(c.getNextStartTime(e).toString());return console.log(t,"===>nextStartTime"),{nextStartTime:t,...e}},W=async(e,t)=>{console.log("ğŸš€ğŸš€ğŸš€ ~ file: useWhale.ts:211 ~ getVeNFTDividendInfo ~ dividendManager:",t);try{const{venft_dividends_id_v2:o}=C(s.sdkOptions.xcetus_dividends),n=await s.XCetusModule.getVeNFTDividendInfo(t.venft_dividends.id,o,e);return console.log("ğŸš€ğŸš€ğŸš€ ~ file: useWhale.ts:213 ~ getVeNFTDividendInfo ~ veNFTDividendInfo:",n),{rewards:n&&n.rewards||[]}}catch(o){console.log("ğŸš€ğŸš€ğŸš€ ~ file: useWhale.ts:220 ~ getVeNFTDividendInfo ~ error:",o)}},L=async e=>{const t=await s.XCetusModule.getDividendManager();if(console.log("dividendManager: ",t),t.bonus_types.length>0){const o=await s.XCetusModule.redeemDividendPayload(e,t.bonus_types);return r(o)}},E=e=>{const t=new Set;return e.forEach(o=>{o.rewards.forEach(n=>{n.amount>0&&t.add(n.coin_type)})}),Array.from(t)},U=async e=>{const t=await s.XCetusModule.getDividendManager(),{venft_dividends_id_v2:o}=C(s.sdkOptions.xcetus_dividends),n=await s.XCetusModule.getVeNFTDividendInfo(t.venft_dividends.id,o,e);console.log("veNFTDividendInfo: ",n);const d=E(n.rewards),u=c.buildDividendRewardTypeListV2(n.rewards);console.log("ğŸš€ğŸš€ğŸš€ ~ file: useWhale.ts:245 ~ getRedeemDividendV2Payload ~ bonus_types:",d);const l={venft_id:e,bonus_types:d,bonus_types_v2:u,xTokenType:[s.XCetusModule.buileXTokenCoinType()]},v=[];n.rewards.forEach(w=>{w.vesrion=="v2"&&v.push(w.period)}),console.log("ğŸš€ğŸš€ğŸš€ ~ file: useWhale.ts:253 ~ phases ~ phases:",v.sort());const B=await s.XCetusModule.redeemDividendV3Payload(v.sort(),l.venft_id,l.bonus_types,l.bonus_types_v2,l.xTokenType),K={action:"xCETUSClaimStakingRwewards",txbParams:l};return{txb:r(B),payloadParams:K}},A=async e=>{console.log(e,"==>accountAddress");try{const t=await s.XCetusModule.getOwnerVeNFT(e);if(console.log("nfts: ",t),t){const o=await s.XCetusModule.getXcetusManager();console.log("xcetusManager: ",o);const n=new g(t.xcetus_balance).div(o.treasury).mul(100).toString();return console.log("rate: ",n),Number(n)>0&&Number(n)<.001?"<0.001":f(n,3)}else return 0}catch{return"--"}},N=async()=>{const e=await s.XCetusModule.getXcetusManager();return console.log("xcetusManager: ",e),e},r=e=>({transactionBlock:e,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),p=e=>{const t=Date.now()/1e3,{start_time:o,interval_day:n}=e;console.log(e,"#dividendManager");const d=Q=="test"?Math.ceil((t-o)/(n*60)):Math.ceil((t-o)/(n*24*3600));return console.log(t,"===>currentTime"),console.log(o,"===>start_time"),console.log(t-o,"===>currentTime-start_time"),console.log((t-o)/(n*60),"(currentTime - start_time) / (interval_day * 60)"),d};return{getOwnerLockCetuss:_,getOwnerCetusCoins:b,getOwnerVeNFT:k,depositCetus:P,getMintVeNFTPayload:h,redeemNum:T,getRedeemLockPayload:I,getAvailableXCetus:D,getLockingCetuss:R,getCancelRedeemPayload:F,getVeNFTDividendInfo:W,reverseRedeemNum:X,getRedeemPayload:O,getRedeemDividendPayload:L,getMyShare:A,getDividendManager:V,getPeriod:p,getRedeemDividendV2Payload:U,getPhaseDividendInfo:async e=>{const t=p(e);console.log("ğŸš€ğŸš€ğŸš€ ~ file: useWhale.ts:320 ~ getPhaseDividendInfo ~ dividendManager:",e),console.log(t,"getPhaseDividendInfo period");let o=await s.XCetusModule.getPhaseDividendInfo(String(t));console.log(!o,"==>phaseDividendInfo");let n;if(!o){if(n=await s.XCetusModule.getPhaseDividendInfo(e.dividends.size),n)o=n;else for(let d=e.dividends.size;d>1;d--)if(n=await s.XCetusModule.getPhaseDividendInfo(String(d)),console.log("ğŸš€ğŸš€ğŸš€ ~ file: useWhale.ts:327 ~ getPhaseDividendInfo ~ lastPhaseDividendInfo:",n),n){o=n;break}}return console.log("ğŸš€ğŸš€ğŸš€ ~ file: useWhale.ts:336 ~ getPhaseDividendInfo ~ phaseDividendInfo:",o),o},getXcetusManager:N}}export{oe as u};
