import{_ as se}from"./pool-position-tab.ca718f6c.js";import{P as ae}from"./pool-filter-block.4f53223f.js";import{R as B,a as ie,A as ne,T as re,b as ue,P as ce}from"./to-add.d172b49b.js";import{u as de}from"./useToken.c1048249.js";import{u as Q}from"./pool.ab57e0b5.js";import{u as pe}from"./stats.4750f85c.js";import{c as D,s as ve}from"./common.58ad47a8.js";import{H as me,T as fe,N as _e}from"./h5-table-card.c7486f1a.js";import{u as X}from"./token.83b51f61.js";import{a as he,r as C,m as c,A as M,q as Y,l as ge,o as S,f as F,h as a,i,c as J,w as K,x as I,G as be,p as Pe,k as Se,e as Z,t as ye,s as Ae}from"./entry.a85dcc8c.js";import"./index.d5fbf89e.js";import"./decimal.765d8738.js";import{u as Le}from"./usePoolList.d77dc348.js";import{u as ke}from"./useStatsData.f6b41276.js";import"./select-tab.100f6460.js";import"./index.a6e74e8d.js";import"./decimal.a2826370.js";import"./filter-pool-by-coin.17731764.js";import"./coin-select.ef88db8f.js";import"./import-icon.de3e6c66.js";/* empty css              *//* empty css              */import"./icon-tooltip.c403b367.js";import"./token-warning_2x.013dcc2d.js";import"./img-no-Positions_2x.eced461a.js";import"./img-no-Positions_2x.02902d06.js";import"./coin-img.dcc30dfb.js";import"./token-warning-new.57f28b5e.js";import"./is-all-pool.12cc7079.js";/* empty css              */import"./icon-selected_3x.873560ed.js";import"./nuxt-link.7f8bb110.js";import"./icon_farms_2x.d5277acc.js";import"./farms.a4bc0bb7.js";import"./icon_autopools_2x.9deaf2c2.js";import"./icon_autopools_2x.5faebbdb.js";import"./icon_fee_2x.165517a8.js";import"./icon_rewards_2x.83ce9103.js";import"./fetchFun.db8bd709.js";import"./index.de9b153c.js";import"./formatter.4a9e568a.js";const E=y=>(Pe("data-v-3457de70"),y=y(),Se(),y),Te={class:"h5-table"},we={class:"pc-table"},xe={key:1,class:"virtual-table"},Ne=E(()=>a("th",null,"Pool",-1)),Be=E(()=>a("th",null,"Mining Rewards",-1)),Ce=E(()=>a("th",null,"Actions",-1)),Fe={class:"action"},He=he({__name:"pool-list-table",setup(y){const d=C([]),A=c(()=>d.value.map(r=>Object.assign({},{random:Math.random()},r)));M(()=>A.value,n=>{console.log("pool-list-table è™šæ‹Ÿdom list: ",n)});const{getTokenList:V,getToken:w}=de(),L=Q(),p=c(()=>L),f=c(()=>(console.log("ðŸš€ ~ poolList ~ suiPool.value.poolList:",p.value.poolList),p.value.poolList)),x=c(()=>p.value.isAllPool),_=c(()=>p.value.incentiveTypeList),k=c(()=>p.value.selectLabel),s=c(()=>p.value.filterPoolCoinList),ee=pe(),W=c(()=>ee),$=c(()=>W.value.poolsStatsObj),oe=c(()=>W.value.isStatsApiError),q=async(n,r)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:181 ~ buildPoolList ~ statsInfo, list:",n,r);let h=[];for(let e=0;e<r.length;e++){const o=r[e],g=n[o.address],b=await w(r[e].displayTokenAAddress),P=await w(r[e].displayTokenBAddress),R=[];b!=null&&b.labels&&R.push(...b.labels),P!=null&&P.labels&&R.push(...P.labels);let z=!1,G=!1;g&&g.stableFarming&&g.stableFarming.length>0&&(z=!0),g&&g.autoPool&&g.autoPool.clmm_pool&&(G=!0);const U={...o,tvl:0,fees24:0,totalApr:0,volume24:0,...g,tokenA:b,tokenB:P,labels:[...new Set(R)],isFarming:z,isVaults:G};(!x.value&&b.is_trusted&&P.is_trusted||x.value)&&h.push(U)}let u=[];_.value.length>0?h.forEach(e=>{(_.value.includes("Mining")&&e.haveMining||_.value.includes("Farming")&&e.isFarming||_.value.includes("No incentives")&&!e.haveMining&&!e.isFarming)&&u.push(e)}):u=[],console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:259 ~ buildPoolList ~ incentivePool:",u);let l=[];k.value!=="All"?u.forEach(e=>{e.labels.includes(k.value)&&l.push(e)}):l=u;let N=[];s.value&&s.value.length>0?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:282 ~ buildPoolList ~ filterPoolCoinList.value.length:",s.value.length),l.forEach(e=>{s.value.length==2&&(s.value[0]==e.displayTokenAAddress||s.value[0]==e.displayTokenBAddress)&&(s.value[1]==e.displayTokenAAddress||s.value[1]==e.displayTokenBAddress)&&N.push(e),s.value.length==1&&(s.value[0]==e.displayTokenAAddress||s.value[0]==e.displayTokenBAddress)&&N.push(e)})):N=l;let v=N,m=[];t.value.label=="Volume (24H)"&&(m=t.value.sort=="desc"?v.sort((e,o)=>o.volume24-e.volume24):v.sort((e,o)=>e.volume24-o.volume24)),t.value.label=="Liquidity"&&(m=t.value.sort=="desc"?v.sort((e,o)=>o.tvl-e.tvl):v.sort((e,o)=>e.tvl-o.tvl)),t.value.label=="Fees (24H)"&&(m=t.value.sort=="desc"?v.sort((e,o)=>o.fees24-e.fees24):v.sort((e,o)=>e.fees24-o.fees24)),t.value.label=="APR (24H)"&&(m=t.value.sort=="desc"?v.sort((e,o)=>o.totalApr-e.totalApr):v.sort((e,o)=>e.totalApr-o.totalApr)),L.setPoolListNum(m&&m.length),d.value=m,L.setPoolListLoading(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:194 ~ buildPoolList ~ pageList.value:",m)},t=C({label:"Volume (24H)",sort:"desc"}),T=n=>{t.value=n,q($.value,f.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:234 ~ changeSort ~ sortInfo.value:",t.value)},H=c(()=>p.value.isPoolLoading),te=X(),le=c(()=>te.allTokensObj);M(()=>[$.value,f.value,oe.value,le.value,x.value,_.value,k.value,s.value],([n,r,h,u])=>{console.log("ðŸš€ ~ watch ~ poolsStatsObj:",r,n),(n&&!D(n)||h)&&r&&r.length>0&&u&&!D(u)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-table.vue:276 ~ buildPoolList:",u),q(n,r))},{immediate:!0});const j=C(null);Y(()=>{console.log("ðŸš€ ~ file: pools.vue:20 ~ onMounted ~ onMounted start"),window.scroller=j.value});const O=[{title:"Pools",hasSort:!1,tdWidth:"370px",isNotShowTitle:!0,component:"pool-name-block"},{title:"Liquidity",hasSort:!0,tdWidth:"150px",value:"tvlDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"150px",value:"volume24Display"},{title:"Fees (24H)",hasSort:!0,tdWidth:"150px",value:"fees24Display"},{title:"Mining Rewards",hasSort:!1,tdWidth:"150px",component:"reward-coin"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"130px",component:"apr-tips"},{title:"Actions",hasSort:!1,tdWidth:"180px",isNotShowTitle:!0,component:"swap-add"}];return(n,r)=>{const h=ce,u=ge("RecycleScroller");return S(),F("div",null,[a("div",Te,[i(me,{"h5-title":"Pools","page-name":"pools","key-field":"poolAddress","sort-info":t.value,"item-size":325,"data-source-length":10,loading:H.value,columns:O,"data-source":d.value,"card-action":"swap-add",onChangeSort:T},null,8,["sort-info","loading","data-source"])]),a("div",we,[H.value?(S(),J(fe,{key:0,columns:O,"data-source-length":10})):(S(),F("table",xe,[i(u,{ref_key:"scroller",ref:j,class:"scroller",items:A.value,"item-size":86,"key-field":"address","page-mode":"",full:"",page:"",prerender:20,buffer:500},{before:K(()=>[a("thead",null,[Ne,i(B,{label:"Liquidity","sort-info":t.value,onSort:T},null,8,["sort-info"]),i(B,{label:"Volume (24H)","sort-info":t.value,onSort:T},null,8,["sort-info"]),i(B,{label:"Fees (24H)","sort-info":t.value,onSort:T},null,8,["sort-info"]),Be,i(B,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":t.value,onSort:T},null,8,["sort-info"]),Ce])]),default:K(({item:l})=>[(S(),F("tr",{key:l.address},[a("td",null,[i(h,{"pool-info":l},null,8,["pool-info"])]),a("td",null,I(l.tvlDisplay||"$0"),1),a("td",null,I(l.volume24Display||"$0"),1),a("td",null,I(l.fees24Display||"$0"),1),a("td",null,[i(ie,{"reward-list":l.miningRewardList||[]},null,8,["reward-list"])]),a("td",null,[i(ne,{"pool-info":l},null,8,["pool-info"])]),a("td",null,[a("div",Fe,[i(re,{"from-coin-address":l.tokenAAddress,"to-coin-address":l.tokenBAddress},null,8,["from-coin-address","to-coin-address"]),i(ue,{"pool-address":l.address},null,8,["pool-address"])])])]))]),_:1},8,["items"])]))]),!H.value&&d.value&&d.value.length==0?(S(),J(_e,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):be("",!0)])}}});const Re=Z(He,[["__scopeId","data-v-3457de70"]]);const Ie={class:"pools-list-container"},De={__name:"list",setup(y){const d=Q(),A=C(!1),{getPoolList:V}=Le(),{getStatusData:w}=ke(),L=X(),p=c(()=>L.allTokensObj);return Y(async()=>{await ve(1e3),A.value=!0}),ye(()=>{A.value&&w()}),M(()=>p.value,f=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: list.vue:47 ~ watch ~ allTokensObj:",f),f&&!D(f)&&V()}),Ae(()=>{d.setIncentiveTypeList(""),d.setPoolListNum(""),d.setIsAllPool(!0),d.setLabel("All"),d.setFilterPoolCoinList([])}),(f,x)=>{const _=se,k=ae,s=Re;return S(),F("div",Ie,[i(_,{"current-tab":"Pools"}),i(k),i(s)])}}},ko=Z(De,[["__scopeId","data-v-c6ac7178"]]);export{ko as default};
