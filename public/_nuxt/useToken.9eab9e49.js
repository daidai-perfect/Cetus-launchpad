import{u as m}from"./token.1916166b.js";import{q as h,c as d}from"./index.eee0c4a2.js";import{u as p,f}from"./fetchFun.bc39c99c.js";import{a1 as F,m as S}from"./entry.602fc024.js";function w(){const{$localforage:s}=F();return{setLocalForage:(e,n)=>{s.setItem(e,n).then(()=>{console.log(`${e} saved to localforage.`)}).catch(u=>{console.error(`Failed to save ${e}:`,u)})},getLocalForage:e=>s.getItem(e).then(n=>n).catch(n=>{console.error(`Failed to load ${e}:`,n)})}}const $="POOL_LIST",c="TOKEN_LIST";function j(){const{setLocalForage:s,getLocalForage:l}=w(),i=p(),e=m(),{setAllTokensList:n,allTokensList:u}=e,a=S(()=>e.allTokensObj),g=async()=>{const o=await f("/data/coins_info.json");return(o==null?void 0:o.list)||[]},L=async()=>{try{const o=await f(`${d.Sui.api}/v2/sui/coins_info`);if(!(o!=null&&o.list))throw Error("fetchTokenList list is null");return o==null?void 0:o.list}catch{try{const t=await l(c);if((t==null?void 0:t.length)>0)return t;throw new Error(`LocalForage have not ${c} data`)}catch(t){return console.log("ðŸš€ ~ file: useToken.ts:43 ~ fetchTokenList ~ err:",t),await g()}}},k=async()=>{const o=await L();o&&(n(o),s(c,o))},T=async o=>{const t=await i.clmmSdk.CetusConfig.getTokenListByCoinTypes([o]);if(t)return Object.values(t)[0]};return{getTokenList:k,getToken:async o=>{var r;const t=(r=h(o))==null?void 0:r.full_address;return a.value[t]?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useToken.ts:71 ~ getToken ~ allTokensObj:",a.value),a.value[t]):await T(t)},getTokenBySdk:T}}export{$ as P,w as a,j as u};
