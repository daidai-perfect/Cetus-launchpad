import{_ as Po}from"./pool-position-tab.ade5b200.js";import{a as W,e as J,o as s,f as t,h as o,F as H,E as V,c as X,G as p,i as c,a4 as To,S as go,p as oo,k as eo,x as i,w as O,y as Z,P as ho,b as ko,m as k,C as bo,u as v,D as U,I as G,z as $o,r as Q,A as ao,B as Ao,j as _o}from"./entry.acdca605.js";import"./index.8f6ad64c.js";import{_ as wo}from"./icon_farms_2x.f6af6cd9.js";import{_ as Co}from"./img-no-Positions_2x.908b2c24.js";import{_ as Lo}from"./img-connect-wallet_2x.13cc9a4d.js";import{u as xo}from"./token.5621c078.js";import{u as Do,c as Oo}from"./index.be8ffb7b.js";import{u as Io}from"./pool.1f45c568.js";import{o as vo,a as uo,d as co,c as ro,h as Ro}from"./common.f371ec22.js";import{b as No}from"./usePositionList.fc58f0d0.js";import{u as Bo}from"./usePoolList.fa3bba6e.js";import{C as mo}from"./coin-img-warning.a4f6c2fb.js";import{N as jo,P as Fo}from"./new-position-range.0b29c765.js";/* empty css              */import{_ as Uo}from"./icon_rewards_2x.a7a94aaa.js";import{u as yo,a as Go}from"./index.694816b3.js";import{s as F}from"./formatter.c1da724b.js";import{T as Ho}from"./total-position.35d2b97d.js";import{u as qo}from"./usePendingYeild.865a5da9.js";import{u as Eo}from"./notifi.4c97ad81.js";import{_ as Yo}from"./coin-select.94faa9f1.js";import{i as fo}from"./import-icon.de3e6c66.js";import"./select-tab.cbf036ac.js";import"./decimal.765d8738.js";import"./decimal.a2826370.js";import"./useSDK.d022c694.js";import"./useToken.497c00bc.js";import"./fetchFun.ff4aae28.js";import"./useRate.064c5e06.js";import"./coin-img.3e1f734a.js";import"./coin-pair-name.08d109dd.js";import"./token-warning.4623ef64.js";import"./no-data.a322371e.js";/* empty css              *//* empty css              */import"./useWhale.a7105bed.js";/* empty css              */import"./icon-tooltip.b455067c.js";import"./token-warning_2x.3177c444.js";import"./img-no-Positions_2x.a78979a7.js";const zo=W({props:{loading:{type:Boolean,required:!0},source:{type:String,default:""}},setup(e){return{positionList:[{},{},{}]}}});const Vo=e=>(oo("data-v-ef7f0692"),e=e(),eo(),e),Wo={class:"new-pool-position-list"},Jo={class:"position-list"},Ko={class:"name-price"},Mo={class:"symbol-name"},Qo={class:"avatar-box"},Xo={class:"name-box"},Zo={class:"price-other-info"},oe={class:"new-my-position-item"},ee={class:"card-content"},se={class:"pos-name"},te={class:"bottom-info"},ne={class:"pos-valid-range"},ie={class:"info-block"},le={class:"info-block"},ae={class:"info-block"},ce=Vo(()=>o("div",{class:"info-block"},null,-1));function re(e,d,x,C,T,w){const a=To,n=go;return s(),t("div",Wo,[o("div",Jo,[(s(!0),t(H,null,V(e.positionList,(b,_)=>(s(),t("div",{key:_,class:"item-box"},[o("div",Ko,[o("div",Mo,[o("div",Qo,[e.loading?(s(),X(a,{key:0,active:"",size:"large",paragraph:!1,class:"upgrade-avatar-skeleton"})):p("",!0),e.loading?(s(),X(a,{key:1,active:"",size:"large",paragraph:!1,class:"upgrade-avatar-skeleton"})):p("",!0)]),o("div",Xo,[c(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),c(n,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])])]),o("div",Zo,[o("span",null,[c(n,{class:"upgrade-long-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])])])]),o("div",oe,[o("div",ee,[o("div",se,[c(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",te,[o("div",ne,[c(n,{class:"upgrade-long-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",ie,[c(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),c(n,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",le,[c(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),c(n,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",ae,[c(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),c(n,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),ce])])])]))),128))])])}const de=J(zo,[["render",re],["__scopeId","data-v-ef7f0692"]]),ue={class:"pool-symbol-name-block"},pe={class:"coin-info-fee"},_e={class:"coin-logo"},ve={class:"symbol-label"},me={class:"pool-name"},fe={class:"pool-fee"},ge={class:"name"},he=W({__name:"pool-symbol-name-block",props:{poolInfo:{type:Object,default:()=>({})}},setup(e){return(d,x)=>{var C,T,w,a,n,b,_,f,g,r;return s(),t("div",ue,[o("div",pe,[o("div",_e,[c(mo,{"token-info":(C=e.poolInfo)==null?void 0:C.coinA},null,8,["token-info"]),c(mo,{"token-info":(T=e.poolInfo)==null?void 0:T.coinB},null,8,["token-info"]),o("div",ve,[o("div",me,[o("span",null,i((a=(w=e.poolInfo)==null?void 0:w.coinA)==null?void 0:a.symbol)+"Â -Â ",1),o("span",null,i((b=(n=e.poolInfo)==null?void 0:n.coinB)==null?void 0:b.symbol),1),o("div",fe,i(e.poolInfo.feeRate),1)]),o("div",ge,[o("span",null,i((f=(_=e.poolInfo)==null?void 0:_.coinA)==null?void 0:f.name)+"Â -Â ",1),o("span",null,i((r=(g=e.poolInfo)==null?void 0:g.coinB)==null?void 0:r.name),1)])])])])])}}});const ke=J(he,[["__scopeId","data-v-c9c97b5d"]]),be=e=>(oo("data-v-4cf02b23"),e=e(),eo(),e),$e={class:"status-box"},we=["src"],Ie={class:"status-text"},ye={class:"right"},Se=be(()=>o("div",{class:"title"},"Price Range",-1)),Pe=W({__name:"pos-valid-range",props:{positionInfo:{type:Object,default:()=>({})}},setup(e){return(d,x)=>{var T;const C=ho;return s(),t("div",{class:Z(["pos-valid-range",((T=e.positionInfo)==null?void 0:T.positionStatus)=="Active"?"active-pos-valid-range":"inactive-pos-valid-range"])},[c(C,{placement:"top","arrow-point-at-center":"","overlay-class-name":"ant-tooltip-text-color"},{title:O(()=>{var w;return[o("span",null,i(d.$t("tips.statusblocktips",{word:((w=e.positionInfo)==null?void 0:w.positionStatus)==="Active"?"within":"out of"})),1)]}),default:O(()=>{var w,a,n;return[o("div",$e,[(w=e.positionInfo)!=null&&w.positionStatus?(s(),t("img",{key:0,src:((a=e.positionInfo)==null?void 0:a.positionStatus)=="Active"?"/sui-image/icon_pos_active@2x.png":"/sui-image/img_inactive@2x.png",alt:""},null,8,we)):p("",!0),o("span",Ie,i((n=e.positionInfo)==null?void 0:n.positionStatus),1)])]}),_:1}),o("div",ye,[Se,c(jo,{"position-info":e.positionInfo},null,8,["position-info"])])],2)}}});const Te=J(Pe,[["__scopeId","data-v-4cf02b23"]]),q=e=>(oo("data-v-8b891f40"),e=e(),eo(),e),Ae={class:"card-content"},Ce={class:"pos-name"},Le={class:"pos"},xe=q(()=>o("span",{class:"tit"},"NFT ID",-1)),De={class:"val"},Oe={class:"address"},Re={key:0,class:"tit"},Ne=["href"],Be=q(()=>o("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),je=[Be],Fe=["href"],Ue=q(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_link"})],-1)),Ge=[Ue],He={class:"bottom-info"},qe={class:"info-block-container"},Ee={class:"range-box"},Ye={class:"label"},ze={class:"text"},Ve={key:0,class:"hover-rewarder"},We={class:"rewarder-info"},Je={class:"left-rewarder"},Ke={alt:""},Me={class:"right-rewarder"},Qe={class:"amount"},Xe={class:"amount-usd"},Ze={class:"rewarder-info"},os={class:"left-rewarder"},es={alt:""},ss={class:"right-rewarder"},ts={class:"amount"},ns={class:"amount-usd"},is={class:"label"},ls={key:0,class:"text"},as={class:"hover-rewarder"},cs={class:"left-rewarder"},rs={alt:""},ds={class:"right-rewarder"},us={class:"amount"},ps={class:"amount-usd"},_s={key:1,class:"text"},vs={key:0,class:"info-block cursor-block"},ms={class:"label-box"},fs={class:"text"},gs={class:"img-text"},hs={key:0,class:"label"},ks=q(()=>o("img",{class:"img-default",src:wo,alt:""},null,-1)),bs=[ks],$s={key:1,class:"label"},ws=q(()=>o("img",{class:"img-default",src:Uo,alt:""},null,-1)),Is=[ws],ys={class:"hover-rewarder"},Ss={key:0,class:"title"},Ps={class:"left-rewarder"},Ts={alt:""},As={class:"right-rewarder"},Cs={class:"amount"},Ls={class:"amount-usd"},xs=q(()=>o("div",{class:"title"},"Farming Rewards",-1)),Ds={class:"left-rewarder"},Os={alt:""},Rs={class:"right-rewarder"},Ns={class:"amount"},Bs={class:"amount-usd"},js=q(()=>o("div",{class:"more-box"},[o("div",{class:"more"},[o("span",null,"Manage"),o("svg",{class:"arrow-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_arrow"})])])],-1)),Fs=W({__name:"new-my-position-item",props:{pItem:{type:Object,required:!0}},setup(e){const d=e,x=ko(),C=()=>{const f=a.positionsObj[d.pItem.positionId];console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-my-position-item.vue:252 ~ clickDetails ~ currentPoolInfo:",f),a.setCurrentPositionInfo(f),d.pItem.positionSource=="clmm"?x.push(`/new-position-detail?id=${d.pItem.positionId}&positionSource=clmm`):x.push(`/new-position-detail?id=${d.pItem.farmPositionId}&positionSource=farm`)},T=yo(),w=k(()=>T.currentExplorer),a=Io(),n=k(()=>a.positionPendingFees[d.pItem.positionId]),b=k(()=>a.positionPendingRewards[d.pItem.positionId]),_=k(()=>a.positionPendingFarmRewards[d.pItem.positionId]);return(f,g)=>{var N,B,j,so,E,Y,to;const r=ho,R=go,I=bo("image");return s(),t("div",{class:"new-my-position-item",onClick:C},[o("div",Ae,[o("div",Ce,[o("div",Le,[xe,o("span",De,i(e.pItem.positionName),1)]),o("div",Oe,[e.pItem.positionId?(s(),t("span",Re,"Address")):p("",!0),e.pItem.nftHash?(s(),t("a",{key:1,class:"val",target:"_blank",href:v(vo)(w.value,"nftAddress",e.pItem.nftHash),onClick:g[0]||(g[0]=U(()=>{},["stop"]))}," Â "+i((N=e.pItem.nftHash)==null?void 0:N.substr(0,4))+" ... "+i((j=e.pItem.nftHash)==null?void 0:j.substr(((B=e.pItem.nftHash)==null?void 0:B.length)-4,4))+"Â  ",9,Ne)):p("",!0),e.pItem.nftHash?(s(),t("svg",{key:2,class:"icon","aria-hidden":"true",onClick:g[1]||(g[1]=U(y=>v(T).copy(e.pItem.nftHash),["stop"]))},je)):p("",!0),o("a",{class:"h5-link-icon",href:v(vo)(w.value,"nftAddress",e.pItem.nftHash),target:"_blank",onClick:g[2]||(g[2]=U(()=>{},["stop"]))},Ge,8,Fe)])]),o("div",He,[o("div",qe,[o("div",{class:"info-block",onClick:g[3]||(g[3]=U(()=>{},["stop"]))},[o("div",Ee,[c(Te,{"position-info":{...e.pItem,minPrice:e.pItem.minPrice,maxPrice:e.pItem.maxPrice,minPriceResever:e.pItem.minPriceResever,maxPriceResever:e.pItem.maxPriceResever}},null,8,["position-info"])])]),o("div",{class:Z(["info-block cursor-block",e.pItem.positionAmountUSD=="--"||Number(e.pItem.positionAmountUSD)==0?"block-none":""]),onClick:g[4]||(g[4]=U(()=>{},["stop"]))},[o("div",Ye,i(f.$t("common.liquidity")),1),o("div",ze,[c(r,{"overlay-class-name":"position-tooltip"},{title:O(()=>{var y,h,S,m,no,z,io,l;return[e.pItem.positionAmountUSD>0?(s(),t("div",Ve,[o("div",We,[o("div",Je,[G(o("img",Ke,null,512),[[I,(h=(y=e.pItem)==null?void 0:y.coinA)==null?void 0:h.logo_url]]),o("span",null,i((m=(S=e.pItem)==null?void 0:S.coinA)==null?void 0:m.symbol),1)]),o("div",Me,[o("div",Qe,i(v(uo)(v(co)(e.pItem.coinaAmount,(z=(no=e.pItem)==null?void 0:no.coinA)==null?void 0:z.decimals))),1),o("div",Xe,i(v(F)(e.pItem.coinaAmountUSD)),1)])]),o("div",Ze,[o("div",os,[G(o("img",es,null,512),[[I,e.pItem.coinB.logo_url]]),o("span",null,i(e.pItem.coinB.symbol),1)]),o("div",ss,[o("div",ts,i(v(uo)(v(co)(e.pItem.coinbAmount,(l=(io=e.pItem)==null?void 0:io.coinB)==null?void 0:l.decimals))),1),o("div",ns,i(v(F)(e.pItem.coinbAmountUSD)),1)])])])):p("",!0)]}),default:O(()=>[o("span",null,i(v(F)(e.pItem.positionAmountUSD)),1)]),_:1})])],2),o("div",{class:Z(["info-block cursor-block",((so=n.value)==null?void 0:so.feesAmountUSD)==0?"block-none":""])},[o("div",is,i(f.$t("newAdd.pendingFees")),1),(E=n.value)!=null&&E.feesAmountUSD?(s(),t("div",ls,[c(r,{"overlay-class-name":"position-tooltip"},{title:O(()=>{var y;return[o("div",as,[(s(!0),t(H,null,V((y=n.value)==null?void 0:y.feesList,h=>(s(),t("div",{key:h,class:"rewarder-info"},[o("div",cs,[G(o("img",rs,null,512),[[I,h.tokenInfo.logo_url]]),o("span",null,i(h.tokenInfo.symbol),1)]),o("div",ds,[o("div",us,i(h.amount),1),o("div",ps,i(v(F)(h.amountUSD)),1)])]))),128))])]}),default:O(()=>{var y;return[o("span",null,i(v(F)((y=n.value)==null?void 0:y.feesAmountUSD)),1)]}),_:1})])):(s(),t("div",_s,[c(R,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})]))],2),((Y=b.value)==null?void 0:Y.rewardsAmount)>0||((to=_.value)==null?void 0:to.rewardsAmount)>0?(s(),t("div",vs,[o("div",ms,[o("span",null,i(f.$t("newAdd.pendingRewards")),1)]),o("div",fs,[c(r,{"overlay-class-name":"position-tooltip"},{title:O(()=>{var y,h,S;return[o("div",ys,[((y=b.value)==null?void 0:y.rewardsAmount)>0?(s(),t("div",Ss,"Mining Rewards")):p("",!0),(s(!0),t(H,null,V((h=b.value)==null?void 0:h.rewarderAmountOwed,m=>(s(),t("div",{key:m,class:"rewarder-info"},[o("div",Ps,[G(o("img",Ts,null,512),[[I,m.tokenInfo.logo_url]]),o("span",null,i(m.tokenInfo.symbol),1)]),o("div",As,[o("div",Cs,i(v(uo)(v(co)(m.amount,m.decimals))),1),o("div",Ls,i(v(F)(m.amountUSD)),1)])]))),128)),((S=_.value)==null?void 0:S.rewardsAmount)>0?(s(),t(H,{key:1},[xs,(s(!0),t(H,null,V(_.value.rewardList,m=>(s(),t("div",{key:m,class:"rewarder-info"},[o("div",Ds,[G(o("img",Os,null,512),[[I,m.tokenInfo.logo_url]]),o("span",null,i(m.tokenInfo.symbol),1)]),o("div",Rs,[o("div",Ns,i(v(co)(m.amount,m.decimals)),1),o("div",Bs,i(v(F)(m.amountUSD)),1)])]))),128))],64)):p("",!0)])]}),default:O(()=>{var y,h,S,m;return[o("div",gs,[((y=_.value)==null?void 0:y.rewardsAmount)>0?(s(),t("div",hs,bs)):p("",!0),((h=b.value)==null?void 0:h.rewardsAmount)>0?(s(),t("div",$s,Is)):p("",!0),o("span",null,i(v(F)((((S=b.value)==null?void 0:S.rewardsAmount)||0)+(((m=_.value)==null?void 0:m.rewardsAmount)||0))),1)])]}),_:1})])])):p("",!0)])])]),js])}}});const Us=J(Fs,[["__scopeId","data-v-8b891f40"]]),Gs=W({setup(){const{t:e,locale:d}=$o(),x=yo(),C=k(()=>x),T=Go(),w=k(()=>T),a=r=>{var R;return(r==null?void 0:r.logoURI)||(r==null?void 0:r.logo_url)||((R=w.value.tokensObj[r==null?void 0:r.address])==null?void 0:R.logo_url)||(C.value.theme==="default"?fo("/image/coins/unknown.png"):fo("/image/coins/sui-unknown.png"))},n=Q(!1),b=Q(null),_=Q(null);return{pools:w,getCoinIcon:a,isOpenTokenSelect:n,toDelectToken:r=>{n.value=!1,r=="first"&&(b.value=_.value),_.value=null},toSelectToken:r=>{b.value?_.value=r:b.value=r,n.value=!1},firstToken:b,lastToken:_,t:e,addCommom:uo}}});const po=e=>(oo("data-v-9235e3bc"),e=e(),eo(),e),Hs={class:"token-select-input-box"},qs=po(()=>o("div",{class:"icon-box"},[o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_search"})])],-1)),Es=po(()=>o("span",null,"Filter by token",-1)),Ys=[qs,Es],zs={key:0,class:"item"},Vs={alt:""},Ws={key:0,class:"pool-warning"},Js=po(()=>o("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Ks=[Js],Ms={key:1,class:"item"},Qs={alt:""},Xs={key:0,class:"pool-warning"},Zs=po(()=>o("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),ot=[Zs];function et(e,d,x,C,T,w){var b,_,f,g,r,R;const a=Yo,n=bo("image");return s(),t("div",Hs,[o("div",{class:"search-input",onClick:d[2]||(d[2]=I=>e.firstToken&&e.lastToken?"":e.isOpenTokenSelect=!e.isOpenTokenSelect)},[o("div",null,[o("div",{class:Z(["placeholder",e.firstCoin&&e.lastCoin?"notAllowed":""])},Ys,2),e.firstToken?(s(),t("div",zs,[G(o("img",Vs,null,512),[[n,e.getCoinIcon(e.firstToken)]]),(_=(b=e.pools)==null?void 0:b.tokensObj[e.firstToken.address])!=null&&_.isSelfBuilt?(s(),t("div",Ws)):p("",!0),o("span",null,i((f=e.firstToken)==null?void 0:f.symbol),1),(s(),t("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:d[0]||(d[0]=U(I=>e.toDelectToken("first"),["stop"]))},Ks))])):p("",!0),e.lastToken?(s(),t("div",Ms,[G(o("img",Qs,null,512),[[n,e.getCoinIcon(e.lastToken)]]),(r=(g=e.pools)==null?void 0:g.tokensObj[e.lastToken.address])!=null&&r.isSelfBuilt?(s(),t("div",Xs)):p("",!0),o("span",null,i((R=e.lastToken)==null?void 0:R.symbol),1),(s(),t("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=U(I=>e.toDelectToken("last"),["stop"]))},ot))])):p("",!0)])]),e.isOpenTokenSelect?(s(),X(a,{key:0,"existing-coins":"","last-select-coin":e.firstToken&&e.firstToken.address||"","is-allow-ban":!0,onOnSelect:e.toSelectToken,onOnClose:d[3]||(d[3]=I=>e.isOpenTokenSelect=!1)},null,8,["last-select-coin","onOnSelect"])):p("",!0)])}const st=J(Gs,[["render",et],["__scopeId","data-v-9235e3bc"]]),K=e=>(oo("data-v-4ac59a98"),e=e(),eo(),e),tt={class:"new-position-list-container"},nt={class:"filter-refresh"},it={class:"icon-box"},lt=K(()=>o("use",{"xlink:href":"#icon-icon_refresh"},null,-1)),at=[lt],ct={class:"position-card-top"},rt={key:0,class:"upgrade-loading"},dt={key:1,class:"position-list"},ut={class:"name-price"},pt={class:"price-other-info"},_t={class:"farm-create"},vt=K(()=>o("img",{class:"img-default",src:wo,alt:""},null,-1)),mt=K(()=>o("span",null,"Farm",-1)),ft=K(()=>o("svg",{class:"arrow-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_arrow"})],-1)),gt=[vt,mt,ft],ht={key:2,class:"no-data"},kt=K(()=>o("img",{src:Co,alt:""},null,-1)),bt={key:3,class:"no-data"},$t=K(()=>o("img",{src:Lo,alt:""},null,-1)),wt=W({__name:"position",setup(e){const{t:d}=$o(),{router:x}=ko(),C=xo(),T=k(()=>C.allTokensObj),w=Do(),a=k(()=>w),n=Io(),b=k(()=>n),_=k(()=>n.poolsObj),f=k(()=>n.isPositionLoading),{getPositionList:g}=No();ao(()=>[a.value.address,_.value,T.value],([l,u,L])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:451 ~ watch ~ allTokensObj:",L),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:451 ~ watch ~ poolsObj:",u),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:451 ~ watch ~ walletAddress:",l),l&&u&&!ro(u)&&!ro(L)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:453 ~ watch ~ getPositionList:"),g(l))},{immediate:!0});const{getPoolList:r}=Bo();ao(()=>_.value,l=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:462 ~ watch ~ newVal:",l,ro(l)),ro(l)&&r()},{immediate:!0});const R=k(()=>n.poolPositionsObj),I=Q(null),N=k(()=>I.value&&I.value.firstToken?I.value.firstToken:null),B=k(()=>I.value&&I.value.lastToken?I.value.lastToken:null),j=k(()=>{let l=Object.values(R.value);const u=l.filter(($,A)=>N.value&&B.value?$.poolInfo.coinA.address==N.value.address&&$.poolInfo.coinB.address==B.value.address||$.poolInfo.coinA.address==B.value.address&&$.poolInfo.coinB.address==N.value.address:N.value?$.poolInfo.coinA.address.toLowerCase()==N.value.address.toLowerCase()||$.poolInfo.coinB.address.toLowerCase()==N.value.address.toLowerCase():B.value?$.poolInfo.coinA.address.toLowerCase()==B.value.address.toLowerCase()||$.poolInfo.coinB.address.toLowerCase()==B.value.address.toLowerCase():l);if(!f.value){const $=u.map(A=>A==null?void 0:A.positionList).flat();n.setPositionListNum($.length)}return u.filter(($,A)=>{var P;return((P=$.positionList)==null?void 0:P.length)>0})}),{getPendingYieldList:so}=qo(),E=k(()=>n.positionTotalPendingFees),Y=k(()=>n.positionTotalPendingRewards),to=k(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:64 ~ pendingYield ~ positionTotalPendingFees.value:",E.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:65 ~ pendingYield ~ positionTotalPendingRewards.value:",Y.value),E.value==="--"||Y.value==="--"?"--":Ro(E.value||0).add(Y.value||0).toString()));ao(()=>to.value,l=>{l&&l!=="--"&&so()});const y=k(()=>b.value.positionList),h=Eo(),S=k(()=>h),m=async l=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:569 ~ getNftTransfer ~ getNftTransfer:"),await h.getSourceGroups();const u=S.value.sourceGroups&&S.value.sourceGroups.length>0&&S.value.sourceGroups[0]&&S.value.sourceGroups[0].sources||[];console.log(u,"####source"),console.log(l,"###myPositions");for(let L=0;L<u.length;L++){const{pool_address:$,position_index:A}=JSON.parse(u[L].blockchainAddress);console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:604 ~ getNftTransfer ~ source[j]:",u[L]);let P=!1,M;for(let D=0;D<l.length;D++){const{pool:lo,positionIndex:So}=l[D];$==lo&&So==A&&(P=!0),M={pool_address:$,position_index:A}}P||await h.subscribePosition(M,"",!1,!1)}},no=async()=>{await h.getSourceGroups();const l=S.value.sourceGroups&&S.value.sourceGroups.length>0&&S.value.sourceGroups[0]&&S.value.sourceGroups[0].sources||[];for(let u=0;u<l.length;u++){const{pool_address:L,position_index:$}=JSON.parse(l[u].blockchainAddress),{name:A}=l[u],P={pool_address:L,position_index:$};await h.subscribePosition(P,A,!1,!1)}};ao(()=>y.value,(l,u)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:628 ~ newMyPositions:",l),Oo.Sui.hasNotifi&&(l&&l.length>0&&u&&u.length!==l.length?m(l):l&&l.length==0&&!f.value&&no())},{immediate:!0});const z=Q(!1),io=()=>{z.value=!0,a.value.address&&g(a.value.address),setTimeout(()=>{z.value=!1},1e3)};return(l,u)=>{const L=Po,$=de,A=Ao;return s(),t("div",tt,[c(L,{"current-tab":"Positions"}),o("div",nt,[c(st,{ref_key:"childTokenSelectRef",ref:I},null,512),o("div",{class:"refresh-icon",onClick:io},[o("div",it,[(s(),t("svg",{class:Z(["icon",{refresh:z.value}]),"aria-hidden":"true"},at,2))])])]),o("div",ct,[a.value&&a.value.address?(s(),X(Ho,{key:0})):p("",!0)]),f.value&&a.value.connected?(s(),t("div",rt,[c($,{loading:f.value,type:"position"},null,8,["loading"])])):p("",!0),j.value&&j.value.length>0&&a.value.connected&&!f.value?(s(),t("div",dt,[(s(!0),t(H,null,V(j.value,P=>{var M;return s(),t("div",{key:(M=P.poolInfo)==null?void 0:M.address,class:"item-box"},[o("div",ut,[c(ke,{"pool-info":P.poolInfo},null,8,["pool-info"]),o("div",pt,[c(Fo,{"pool-info":P.poolInfo},null,8,["pool-info"]),o("div",_t,[P.poolInfo.isFarmingPool?(s(),t("div",{key:0,class:"farming-logo",onClick:u[0]||(u[0]=U(D=>v(x).push("/farms"),["stop"]))},gt)):p("",!0),c(A,{class:"ghost-btn create",onClick:D=>{var lo;return v(x).push(`/liquidity/deposit?poolAddress=${(lo=P.poolInfo)==null?void 0:lo.poolAddress}`)}},{default:O(()=>[_o("Create new position")]),_:2},1032,["onClick"])])])]),(s(!0),t(H,null,V(P.positionList,D=>(s(),X(Us,{key:D==null?void 0:D.name,"p-item":D},null,8,["p-item"]))),128))])}),128))])):p("",!0),j.value&&j.value.length<=0&&!f.value&&a.value.connected?(s(),t("div",ht,[kt,o("span",null,i(v(d)("common.noLiquidityPositions")),1)])):p("",!0),a.value.connected?p("",!0):(s(),t("div",bt,[$t,c(A,{class:"connect-wallet",onClick:u[1]||(u[1]=P=>a.value.setIsShowWalletModal(!0))},{default:O(()=>[_o(i(v(d)("button.connectWallet")),1)]),_:1})]))])}}});const un=J(wt,[["__scopeId","data-v-4ac59a98"]]);export{un as default};
