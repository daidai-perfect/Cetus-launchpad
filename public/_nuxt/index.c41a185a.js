var Ld=Object.defineProperty;var Ud=(e,t,i)=>t in e?Ld(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var L=(e,t,i)=>(Ud(e,typeof t!="symbol"?t+"":t,i),i);import{D as Kd,ab as Vd,ae as zd,af as Gd,W as Wd}from"./entry.1afe32c4.js";import{D as K}from"./decimal.0bdeb344.js";const Hs=5,M_=Kd("wallet",{state:()=>({loading:!1,autoRefreshTime:Hs,countdown:0,connected:!1,aptosConnected:!1,suiConnected:!1,address:"",aptosAddress:"",suiAddress:"",platform:"",isShowWalletModal:!1,walletName:"",aptosWalletName:"",suiWalletName:"",currentWallet:null,aptosCurrentWallet:null,suiCurrentWallet:null,walletIcon:"",aptosWalletIcon:"",suiWalletIcon:"",switchWallet:!1,assets:{},walletIconName:"",aptosWalletIconName:"",suiWalletIconName:"",walletNetwork:"",isShowWalletCard:"",accountObj:null,firstGetAssetLoading:!1}),actions:{setLoading(e){e&&(this.countdown=Hs),this.loading=e,e||(this.countdown=0)},setCountdown(e){this.countdown=e},setWalletStatus(){this.connected=!0},setSwitchWallet(e){this.switchWallet=e},setIsShowWalletModal(e){this.isShowWalletModal=e},setWalletInfo(e,t){this.connected=e,this.platform=t},setCurrentWallet(e){e.wallet?(this.currentWallet=e.wallet,this.connected=e.isConnected,this.address=e.account,this.walletIcon=e.icon,this.walletName=e.wallet.name,e.platform==="Sui"?(this.suiCurrentWallet=e.wallet,this.suiConnected=e.isConnected,this.suiAddress=e.account,this.suiWalletIcon=e.icon,this.suiWalletName=e.wallet.name,this.walletName=e.walletName,this.accountObj=e.accountObj):(this.aptosCurrentWallet=e.wallet,this.aptosConnected=e.isConnected,this.aptosAddress=e.account,this.aptosWalletIcon=e.icon,this.aptosWalletName=e.wallet.name)):(this.currentWallet=null,this.connected=!1,this.address="",this.walletIcon="",this.walletName="",e.platform==="Sui"?(this.suiCurrentWallet=null,this.suiConnected=!1,this.suiAddress="",this.suiWalletIcon="",this.suiWalletName="",this.accountObj=null):(this.aptosCurrentWallet=null,this.aptosConnected=!1,this.aptosAddress="",this.aptosWalletIcon="",this.aptosWalletName=""))},setAssets(e){this.assets=e},setWalletIconName(e){this.walletIconName=e,localStorage.setItem("walletIconName",e)},setNetwork(e){this.walletNetwork=e,console.log(this.walletNetwork,"====>this.walletNetwork")},setIsShowWalletCard(e){this.isShowWalletCard=e},setFirstGetAssetLoading(e){this.firstGetAssetLoading=e}}}),Hd={},Xd=Object.freeze(Object.defineProperty({__proto__:null,default:Hd},Symbol.toStringTag,{value:"Module"})),Jd=Vd(Xd);var b={},Zd={get exports(){return b},set exports(e){b=e}};(function(e){(function(t,i){function n(x,u){if(!x)throw new Error(u||"Assertion failed")}function r(x,u){x.super_=u;var p=function(){};p.prototype=u.prototype,x.prototype=new p,x.prototype.constructor=x}function o(x,u,p){if(o.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(x||0,u||10,p||"be"))}typeof t=="object"?t.exports=o:i.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Jd.Buffer}catch{}o.isBN=function(u){return u instanceof o?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===o.wordSize&&Array.isArray(u.words)},o.max=function(u,p){return u.cmp(p)>0?u:p},o.min=function(u,p){return u.cmp(p)<0?u:p},o.prototype._init=function(u,p,m){if(typeof u=="number")return this._initNumber(u,p,m);if(typeof u=="object")return this._initArray(u,p,m);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var v=0;u[0]==="-"&&(v++,this.negative=1),v<u.length&&(p===16?this._parseHex(u,v,m):(this._parseBase(u,p,v),m==="le"&&this._initArray(this.toArray(),p,m)))},o.prototype._initNumber=function(u,p,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),p,m)},o.prototype._initArray=function(u,p,m){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var A,I,E=0;if(m==="be")for(v=u.length-1,A=0;v>=0;v-=3)I=u[v]|u[v-1]<<8|u[v-2]<<16,this.words[A]|=I<<E&67108863,this.words[A+1]=I>>>26-E&67108863,E+=24,E>=26&&(E-=26,A++);else if(m==="le")for(v=0,A=0;v<u.length;v+=3)I=u[v]|u[v+1]<<8|u[v+2]<<16,this.words[A]|=I<<E&67108863,this.words[A+1]=I>>>26-E&67108863,E+=24,E>=26&&(E-=26,A++);return this._strip()};function a(x,u){var p=x.charCodeAt(u);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+x)}function c(x,u,p){var m=a(x,p);return p-1>=u&&(m|=a(x,p-1)<<4),m}o.prototype._parseHex=function(u,p,m){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var A=0,I=0,E;if(m==="be")for(v=u.length-1;v>=p;v-=2)E=c(u,p,v)<<A,this.words[I]|=E&67108863,A>=18?(A-=18,I+=1,this.words[I]|=E>>>26):A+=8;else{var w=u.length-p;for(v=w%2===0?p+1:p;v<u.length;v+=2)E=c(u,p,v)<<A,this.words[I]|=E&67108863,A>=18?(A-=18,I+=1,this.words[I]|=E>>>26):A+=8}this._strip()};function d(x,u,p,m){for(var v=0,A=0,I=Math.min(x.length,p),E=u;E<I;E++){var w=x.charCodeAt(E)-48;v*=m,w>=49?A=w-49+10:w>=17?A=w-17+10:A=w,n(w>=0&&A<m,"Invalid character"),v+=A}return v}o.prototype._parseBase=function(u,p,m){this.words=[0],this.length=1;for(var v=0,A=1;A<=67108863;A*=p)v++;v--,A=A/p|0;for(var I=u.length-m,E=I%v,w=Math.min(I,I-E)+m,f=0,C=m;C<w;C+=v)f=d(u,C,C+v,p),this.imuln(A),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(E!==0){var re=1;for(f=d(u,C,u.length,p),C=0;C<E;C++)re*=p;this.imuln(re),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},o.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red};function l(x,u){x.words=u.words,x.length=u.length,x.negative=u.negative,x.red=u.red}if(o.prototype._move=function(u){l(u,this)},o.prototype.clone=function(){var u=new o(null);return this.copy(u),u},o.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],k=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(u,p){u=u||10,p=p|0||1;var m;if(u===16||u==="hex"){m="";for(var v=0,A=0,I=0;I<this.length;I++){var E=this.words[I],w=((E<<v|A)&16777215).toString(16);A=E>>>24-v&16777215,v+=2,v>=26&&(v-=26,I--),A!==0||I!==this.length-1?m=_[6-w.length]+w+m:m=w+m}for(A!==0&&(m=A.toString(16)+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var f=y[u],C=k[u];m="";var re=this.clone();for(re.negative=0;!re.isZero();){var ie=re.modrn(C).toString(u);re=re.idivn(C),re.isZero()?m=ie+m:m=_[f-ie.length]+ie+m}for(this.isZero()&&(m="0"+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(u,p){return this.toArrayLike(s,u,p)}),o.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)};var O=function(u,p){return u.allocUnsafe?u.allocUnsafe(p):new u(p)};o.prototype.toArrayLike=function(u,p,m){this._strip();var v=this.byteLength(),A=m||Math.max(1,v);n(v<=A,"byte array longer than desired length"),n(A>0,"Requested array length <= 0");var I=O(u,A),E=p==="le"?"LE":"BE";return this["_toArrayLike"+E](I,v),I},o.prototype._toArrayLikeLE=function(u,p){for(var m=0,v=0,A=0,I=0;A<this.length;A++){var E=this.words[A]<<I|v;u[m++]=E&255,m<u.length&&(u[m++]=E>>8&255),m<u.length&&(u[m++]=E>>16&255),I===6?(m<u.length&&(u[m++]=E>>24&255),v=0,I=0):(v=E>>>24,I+=2)}if(m<u.length)for(u[m++]=v;m<u.length;)u[m++]=0},o.prototype._toArrayLikeBE=function(u,p){for(var m=u.length-1,v=0,A=0,I=0;A<this.length;A++){var E=this.words[A]<<I|v;u[m--]=E&255,m>=0&&(u[m--]=E>>8&255),m>=0&&(u[m--]=E>>16&255),I===6?(m>=0&&(u[m--]=E>>24&255),v=0,I=0):(v=E>>>24,I+=2)}if(m>=0)for(u[m--]=v;m>=0;)u[m--]=0},Math.clz32?o.prototype._countBits=function(u){return 32-Math.clz32(u)}:o.prototype._countBits=function(u){var p=u,m=0;return p>=4096&&(m+=13,p>>>=13),p>=64&&(m+=7,p>>>=7),p>=8&&(m+=4,p>>>=4),p>=2&&(m+=2,p>>>=2),m+p},o.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,m=0;return p&8191||(m+=13,p>>>=13),p&127||(m+=7,p>>>=7),p&15||(m+=4,p>>>=4),p&3||(m+=2,p>>>=2),p&1||m++,m},o.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(x){for(var u=new Array(x.bitLength()),p=0;p<u.length;p++){var m=p/26|0,v=p%26;u[p]=x.words[m]>>>v&1}return u}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var m=this._zeroBits(this.words[p]);if(u+=m,m!==26)break}return u},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},o.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this._strip()},o.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},o.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},o.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},o.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var m=0;m<p.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=p.length,this._strip()},o.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},o.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},o.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},o.prototype.iuxor=function(u){var p,m;this.length>u.length?(p=this,m=u):(p=u,m=this);for(var v=0;v<m.length;v++)this.words[v]=p.words[v]^m.words[v];if(this!==p)for(;v<p.length;v++)this.words[v]=p.words[v];return this.length=p.length,this._strip()},o.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},o.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},o.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},o.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,m=u%26;this._expand(p),m>0&&p--;for(var v=0;v<p;v++)this.words[v]=~this.words[v]&67108863;return m>0&&(this.words[v]=~this.words[v]&67108863>>26-m),this._strip()},o.prototype.notn=function(u){return this.clone().inotn(u)},o.prototype.setn=function(u,p){n(typeof u=="number"&&u>=0);var m=u/26|0,v=u%26;return this._expand(m+1),p?this.words[m]=this.words[m]|1<<v:this.words[m]=this.words[m]&~(1<<v),this._strip()},o.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var m,v;this.length>u.length?(m=this,v=u):(m=u,v=this);for(var A=0,I=0;I<v.length;I++)p=(m.words[I]|0)+(v.words[I]|0)+A,this.words[I]=p&67108863,A=p>>>26;for(;A!==0&&I<m.length;I++)p=(m.words[I]|0)+A,this.words[I]=p&67108863,A=p>>>26;if(this.length=m.length,A!==0)this.words[this.length]=A,this.length++;else if(m!==this)for(;I<m.length;I++)this.words[I]=m.words[I];return this},o.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},o.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,A;m>0?(v=this,A=u):(v=u,A=this);for(var I=0,E=0;E<A.length;E++)p=(v.words[E]|0)-(A.words[E]|0)+I,I=p>>26,this.words[E]=p&67108863;for(;I!==0&&E<v.length;E++)p=(v.words[E]|0)+I,I=p>>26,this.words[E]=p&67108863;if(I===0&&E<v.length&&v!==this)for(;E<v.length;E++)this.words[E]=v.words[E];return this.length=Math.max(this.length,E),v!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(u){return this.clone().isub(u)};function M(x,u,p){p.negative=u.negative^x.negative;var m=x.length+u.length|0;p.length=m,m=m-1|0;var v=x.words[0]|0,A=u.words[0]|0,I=v*A,E=I&67108863,w=I/67108864|0;p.words[0]=E;for(var f=1;f<m;f++){for(var C=w>>>26,re=w&67108863,ie=Math.min(f,u.length-1),se=Math.max(0,f-x.length+1);se<=ie;se++){var St=f-se|0;v=x.words[St]|0,A=u.words[se]|0,I=v*A+re,C+=I/67108864|0,re=I&67108863}p.words[f]=re|0,w=C|0}return w!==0?p.words[f]=w|0:p.length--,p._strip()}var j=function(u,p,m){var v=u.words,A=p.words,I=m.words,E=0,w,f,C,re=v[0]|0,ie=re&8191,se=re>>>13,St=v[1]|0,ke=St&8191,xe=St>>>13,Ps=v[2]|0,je=Ps&8191,Me=Ps>>>13,js=v[3]|0,Ee=js&8191,Be=js>>>13,Ms=v[4]|0,De=Ms&8191,Ne=Ms>>>13,Es=v[5]|0,Re=Es&8191,$e=Es>>>13,Bs=v[6]|0,qe=Bs&8191,Fe=Bs>>>13,Ds=v[7]|0,Le=Ds&8191,Ue=Ds>>>13,Ns=v[8]|0,Ke=Ns&8191,Ve=Ns>>>13,Rs=v[9]|0,ze=Rs&8191,Ge=Rs>>>13,$s=A[0]|0,We=$s&8191,He=$s>>>13,qs=A[1]|0,Xe=qs&8191,Je=qs>>>13,Fs=A[2]|0,Ze=Fs&8191,Qe=Fs>>>13,Ls=A[3]|0,Ye=Ls&8191,et=Ls>>>13,Us=A[4]|0,tt=Us&8191,it=Us>>>13,Ks=A[5]|0,nt=Ks&8191,rt=Ks>>>13,Vs=A[6]|0,ot=Vs&8191,st=Vs>>>13,zs=A[7]|0,at=zs&8191,ct=zs>>>13,Gs=A[8]|0,dt=Gs&8191,lt=Gs>>>13,Ws=A[9]|0,ut=Ws&8191,ft=Ws>>>13;m.negative=u.negative^p.negative,m.length=19,w=Math.imul(ie,We),f=Math.imul(ie,He),f=f+Math.imul(se,We)|0,C=Math.imul(se,He);var Ur=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,w=Math.imul(ke,We),f=Math.imul(ke,He),f=f+Math.imul(xe,We)|0,C=Math.imul(xe,He),w=w+Math.imul(ie,Xe)|0,f=f+Math.imul(ie,Je)|0,f=f+Math.imul(se,Xe)|0,C=C+Math.imul(se,Je)|0;var Kr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,w=Math.imul(je,We),f=Math.imul(je,He),f=f+Math.imul(Me,We)|0,C=Math.imul(Me,He),w=w+Math.imul(ke,Xe)|0,f=f+Math.imul(ke,Je)|0,f=f+Math.imul(xe,Xe)|0,C=C+Math.imul(xe,Je)|0,w=w+Math.imul(ie,Ze)|0,f=f+Math.imul(ie,Qe)|0,f=f+Math.imul(se,Ze)|0,C=C+Math.imul(se,Qe)|0;var Vr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(Ee,We),f=Math.imul(Ee,He),f=f+Math.imul(Be,We)|0,C=Math.imul(Be,He),w=w+Math.imul(je,Xe)|0,f=f+Math.imul(je,Je)|0,f=f+Math.imul(Me,Xe)|0,C=C+Math.imul(Me,Je)|0,w=w+Math.imul(ke,Ze)|0,f=f+Math.imul(ke,Qe)|0,f=f+Math.imul(xe,Ze)|0,C=C+Math.imul(xe,Qe)|0,w=w+Math.imul(ie,Ye)|0,f=f+Math.imul(ie,et)|0,f=f+Math.imul(se,Ye)|0,C=C+Math.imul(se,et)|0;var zr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(De,We),f=Math.imul(De,He),f=f+Math.imul(Ne,We)|0,C=Math.imul(Ne,He),w=w+Math.imul(Ee,Xe)|0,f=f+Math.imul(Ee,Je)|0,f=f+Math.imul(Be,Xe)|0,C=C+Math.imul(Be,Je)|0,w=w+Math.imul(je,Ze)|0,f=f+Math.imul(je,Qe)|0,f=f+Math.imul(Me,Ze)|0,C=C+Math.imul(Me,Qe)|0,w=w+Math.imul(ke,Ye)|0,f=f+Math.imul(ke,et)|0,f=f+Math.imul(xe,Ye)|0,C=C+Math.imul(xe,et)|0,w=w+Math.imul(ie,tt)|0,f=f+Math.imul(ie,it)|0,f=f+Math.imul(se,tt)|0,C=C+Math.imul(se,it)|0;var Gr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(Re,We),f=Math.imul(Re,He),f=f+Math.imul($e,We)|0,C=Math.imul($e,He),w=w+Math.imul(De,Xe)|0,f=f+Math.imul(De,Je)|0,f=f+Math.imul(Ne,Xe)|0,C=C+Math.imul(Ne,Je)|0,w=w+Math.imul(Ee,Ze)|0,f=f+Math.imul(Ee,Qe)|0,f=f+Math.imul(Be,Ze)|0,C=C+Math.imul(Be,Qe)|0,w=w+Math.imul(je,Ye)|0,f=f+Math.imul(je,et)|0,f=f+Math.imul(Me,Ye)|0,C=C+Math.imul(Me,et)|0,w=w+Math.imul(ke,tt)|0,f=f+Math.imul(ke,it)|0,f=f+Math.imul(xe,tt)|0,C=C+Math.imul(xe,it)|0,w=w+Math.imul(ie,nt)|0,f=f+Math.imul(ie,rt)|0,f=f+Math.imul(se,nt)|0,C=C+Math.imul(se,rt)|0;var Wr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(qe,We),f=Math.imul(qe,He),f=f+Math.imul(Fe,We)|0,C=Math.imul(Fe,He),w=w+Math.imul(Re,Xe)|0,f=f+Math.imul(Re,Je)|0,f=f+Math.imul($e,Xe)|0,C=C+Math.imul($e,Je)|0,w=w+Math.imul(De,Ze)|0,f=f+Math.imul(De,Qe)|0,f=f+Math.imul(Ne,Ze)|0,C=C+Math.imul(Ne,Qe)|0,w=w+Math.imul(Ee,Ye)|0,f=f+Math.imul(Ee,et)|0,f=f+Math.imul(Be,Ye)|0,C=C+Math.imul(Be,et)|0,w=w+Math.imul(je,tt)|0,f=f+Math.imul(je,it)|0,f=f+Math.imul(Me,tt)|0,C=C+Math.imul(Me,it)|0,w=w+Math.imul(ke,nt)|0,f=f+Math.imul(ke,rt)|0,f=f+Math.imul(xe,nt)|0,C=C+Math.imul(xe,rt)|0,w=w+Math.imul(ie,ot)|0,f=f+Math.imul(ie,st)|0,f=f+Math.imul(se,ot)|0,C=C+Math.imul(se,st)|0;var Hr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(Le,We),f=Math.imul(Le,He),f=f+Math.imul(Ue,We)|0,C=Math.imul(Ue,He),w=w+Math.imul(qe,Xe)|0,f=f+Math.imul(qe,Je)|0,f=f+Math.imul(Fe,Xe)|0,C=C+Math.imul(Fe,Je)|0,w=w+Math.imul(Re,Ze)|0,f=f+Math.imul(Re,Qe)|0,f=f+Math.imul($e,Ze)|0,C=C+Math.imul($e,Qe)|0,w=w+Math.imul(De,Ye)|0,f=f+Math.imul(De,et)|0,f=f+Math.imul(Ne,Ye)|0,C=C+Math.imul(Ne,et)|0,w=w+Math.imul(Ee,tt)|0,f=f+Math.imul(Ee,it)|0,f=f+Math.imul(Be,tt)|0,C=C+Math.imul(Be,it)|0,w=w+Math.imul(je,nt)|0,f=f+Math.imul(je,rt)|0,f=f+Math.imul(Me,nt)|0,C=C+Math.imul(Me,rt)|0,w=w+Math.imul(ke,ot)|0,f=f+Math.imul(ke,st)|0,f=f+Math.imul(xe,ot)|0,C=C+Math.imul(xe,st)|0,w=w+Math.imul(ie,at)|0,f=f+Math.imul(ie,ct)|0,f=f+Math.imul(se,at)|0,C=C+Math.imul(se,ct)|0;var Xr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,w=Math.imul(Ke,We),f=Math.imul(Ke,He),f=f+Math.imul(Ve,We)|0,C=Math.imul(Ve,He),w=w+Math.imul(Le,Xe)|0,f=f+Math.imul(Le,Je)|0,f=f+Math.imul(Ue,Xe)|0,C=C+Math.imul(Ue,Je)|0,w=w+Math.imul(qe,Ze)|0,f=f+Math.imul(qe,Qe)|0,f=f+Math.imul(Fe,Ze)|0,C=C+Math.imul(Fe,Qe)|0,w=w+Math.imul(Re,Ye)|0,f=f+Math.imul(Re,et)|0,f=f+Math.imul($e,Ye)|0,C=C+Math.imul($e,et)|0,w=w+Math.imul(De,tt)|0,f=f+Math.imul(De,it)|0,f=f+Math.imul(Ne,tt)|0,C=C+Math.imul(Ne,it)|0,w=w+Math.imul(Ee,nt)|0,f=f+Math.imul(Ee,rt)|0,f=f+Math.imul(Be,nt)|0,C=C+Math.imul(Be,rt)|0,w=w+Math.imul(je,ot)|0,f=f+Math.imul(je,st)|0,f=f+Math.imul(Me,ot)|0,C=C+Math.imul(Me,st)|0,w=w+Math.imul(ke,at)|0,f=f+Math.imul(ke,ct)|0,f=f+Math.imul(xe,at)|0,C=C+Math.imul(xe,ct)|0,w=w+Math.imul(ie,dt)|0,f=f+Math.imul(ie,lt)|0,f=f+Math.imul(se,dt)|0,C=C+Math.imul(se,lt)|0;var Jr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(ze,We),f=Math.imul(ze,He),f=f+Math.imul(Ge,We)|0,C=Math.imul(Ge,He),w=w+Math.imul(Ke,Xe)|0,f=f+Math.imul(Ke,Je)|0,f=f+Math.imul(Ve,Xe)|0,C=C+Math.imul(Ve,Je)|0,w=w+Math.imul(Le,Ze)|0,f=f+Math.imul(Le,Qe)|0,f=f+Math.imul(Ue,Ze)|0,C=C+Math.imul(Ue,Qe)|0,w=w+Math.imul(qe,Ye)|0,f=f+Math.imul(qe,et)|0,f=f+Math.imul(Fe,Ye)|0,C=C+Math.imul(Fe,et)|0,w=w+Math.imul(Re,tt)|0,f=f+Math.imul(Re,it)|0,f=f+Math.imul($e,tt)|0,C=C+Math.imul($e,it)|0,w=w+Math.imul(De,nt)|0,f=f+Math.imul(De,rt)|0,f=f+Math.imul(Ne,nt)|0,C=C+Math.imul(Ne,rt)|0,w=w+Math.imul(Ee,ot)|0,f=f+Math.imul(Ee,st)|0,f=f+Math.imul(Be,ot)|0,C=C+Math.imul(Be,st)|0,w=w+Math.imul(je,at)|0,f=f+Math.imul(je,ct)|0,f=f+Math.imul(Me,at)|0,C=C+Math.imul(Me,ct)|0,w=w+Math.imul(ke,dt)|0,f=f+Math.imul(ke,lt)|0,f=f+Math.imul(xe,dt)|0,C=C+Math.imul(xe,lt)|0,w=w+Math.imul(ie,ut)|0,f=f+Math.imul(ie,ft)|0,f=f+Math.imul(se,ut)|0,C=C+Math.imul(se,ft)|0;var Zr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(ze,Xe),f=Math.imul(ze,Je),f=f+Math.imul(Ge,Xe)|0,C=Math.imul(Ge,Je),w=w+Math.imul(Ke,Ze)|0,f=f+Math.imul(Ke,Qe)|0,f=f+Math.imul(Ve,Ze)|0,C=C+Math.imul(Ve,Qe)|0,w=w+Math.imul(Le,Ye)|0,f=f+Math.imul(Le,et)|0,f=f+Math.imul(Ue,Ye)|0,C=C+Math.imul(Ue,et)|0,w=w+Math.imul(qe,tt)|0,f=f+Math.imul(qe,it)|0,f=f+Math.imul(Fe,tt)|0,C=C+Math.imul(Fe,it)|0,w=w+Math.imul(Re,nt)|0,f=f+Math.imul(Re,rt)|0,f=f+Math.imul($e,nt)|0,C=C+Math.imul($e,rt)|0,w=w+Math.imul(De,ot)|0,f=f+Math.imul(De,st)|0,f=f+Math.imul(Ne,ot)|0,C=C+Math.imul(Ne,st)|0,w=w+Math.imul(Ee,at)|0,f=f+Math.imul(Ee,ct)|0,f=f+Math.imul(Be,at)|0,C=C+Math.imul(Be,ct)|0,w=w+Math.imul(je,dt)|0,f=f+Math.imul(je,lt)|0,f=f+Math.imul(Me,dt)|0,C=C+Math.imul(Me,lt)|0,w=w+Math.imul(ke,ut)|0,f=f+Math.imul(ke,ft)|0,f=f+Math.imul(xe,ut)|0,C=C+Math.imul(xe,ft)|0;var Qr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,w=Math.imul(ze,Ze),f=Math.imul(ze,Qe),f=f+Math.imul(Ge,Ze)|0,C=Math.imul(Ge,Qe),w=w+Math.imul(Ke,Ye)|0,f=f+Math.imul(Ke,et)|0,f=f+Math.imul(Ve,Ye)|0,C=C+Math.imul(Ve,et)|0,w=w+Math.imul(Le,tt)|0,f=f+Math.imul(Le,it)|0,f=f+Math.imul(Ue,tt)|0,C=C+Math.imul(Ue,it)|0,w=w+Math.imul(qe,nt)|0,f=f+Math.imul(qe,rt)|0,f=f+Math.imul(Fe,nt)|0,C=C+Math.imul(Fe,rt)|0,w=w+Math.imul(Re,ot)|0,f=f+Math.imul(Re,st)|0,f=f+Math.imul($e,ot)|0,C=C+Math.imul($e,st)|0,w=w+Math.imul(De,at)|0,f=f+Math.imul(De,ct)|0,f=f+Math.imul(Ne,at)|0,C=C+Math.imul(Ne,ct)|0,w=w+Math.imul(Ee,dt)|0,f=f+Math.imul(Ee,lt)|0,f=f+Math.imul(Be,dt)|0,C=C+Math.imul(Be,lt)|0,w=w+Math.imul(je,ut)|0,f=f+Math.imul(je,ft)|0,f=f+Math.imul(Me,ut)|0,C=C+Math.imul(Me,ft)|0;var Yr=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,w=Math.imul(ze,Ye),f=Math.imul(ze,et),f=f+Math.imul(Ge,Ye)|0,C=Math.imul(Ge,et),w=w+Math.imul(Ke,tt)|0,f=f+Math.imul(Ke,it)|0,f=f+Math.imul(Ve,tt)|0,C=C+Math.imul(Ve,it)|0,w=w+Math.imul(Le,nt)|0,f=f+Math.imul(Le,rt)|0,f=f+Math.imul(Ue,nt)|0,C=C+Math.imul(Ue,rt)|0,w=w+Math.imul(qe,ot)|0,f=f+Math.imul(qe,st)|0,f=f+Math.imul(Fe,ot)|0,C=C+Math.imul(Fe,st)|0,w=w+Math.imul(Re,at)|0,f=f+Math.imul(Re,ct)|0,f=f+Math.imul($e,at)|0,C=C+Math.imul($e,ct)|0,w=w+Math.imul(De,dt)|0,f=f+Math.imul(De,lt)|0,f=f+Math.imul(Ne,dt)|0,C=C+Math.imul(Ne,lt)|0,w=w+Math.imul(Ee,ut)|0,f=f+Math.imul(Ee,ft)|0,f=f+Math.imul(Be,ut)|0,C=C+Math.imul(Be,ft)|0;var eo=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(eo>>>26)|0,eo&=67108863,w=Math.imul(ze,tt),f=Math.imul(ze,it),f=f+Math.imul(Ge,tt)|0,C=Math.imul(Ge,it),w=w+Math.imul(Ke,nt)|0,f=f+Math.imul(Ke,rt)|0,f=f+Math.imul(Ve,nt)|0,C=C+Math.imul(Ve,rt)|0,w=w+Math.imul(Le,ot)|0,f=f+Math.imul(Le,st)|0,f=f+Math.imul(Ue,ot)|0,C=C+Math.imul(Ue,st)|0,w=w+Math.imul(qe,at)|0,f=f+Math.imul(qe,ct)|0,f=f+Math.imul(Fe,at)|0,C=C+Math.imul(Fe,ct)|0,w=w+Math.imul(Re,dt)|0,f=f+Math.imul(Re,lt)|0,f=f+Math.imul($e,dt)|0,C=C+Math.imul($e,lt)|0,w=w+Math.imul(De,ut)|0,f=f+Math.imul(De,ft)|0,f=f+Math.imul(Ne,ut)|0,C=C+Math.imul(Ne,ft)|0;var to=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(to>>>26)|0,to&=67108863,w=Math.imul(ze,nt),f=Math.imul(ze,rt),f=f+Math.imul(Ge,nt)|0,C=Math.imul(Ge,rt),w=w+Math.imul(Ke,ot)|0,f=f+Math.imul(Ke,st)|0,f=f+Math.imul(Ve,ot)|0,C=C+Math.imul(Ve,st)|0,w=w+Math.imul(Le,at)|0,f=f+Math.imul(Le,ct)|0,f=f+Math.imul(Ue,at)|0,C=C+Math.imul(Ue,ct)|0,w=w+Math.imul(qe,dt)|0,f=f+Math.imul(qe,lt)|0,f=f+Math.imul(Fe,dt)|0,C=C+Math.imul(Fe,lt)|0,w=w+Math.imul(Re,ut)|0,f=f+Math.imul(Re,ft)|0,f=f+Math.imul($e,ut)|0,C=C+Math.imul($e,ft)|0;var io=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(io>>>26)|0,io&=67108863,w=Math.imul(ze,ot),f=Math.imul(ze,st),f=f+Math.imul(Ge,ot)|0,C=Math.imul(Ge,st),w=w+Math.imul(Ke,at)|0,f=f+Math.imul(Ke,ct)|0,f=f+Math.imul(Ve,at)|0,C=C+Math.imul(Ve,ct)|0,w=w+Math.imul(Le,dt)|0,f=f+Math.imul(Le,lt)|0,f=f+Math.imul(Ue,dt)|0,C=C+Math.imul(Ue,lt)|0,w=w+Math.imul(qe,ut)|0,f=f+Math.imul(qe,ft)|0,f=f+Math.imul(Fe,ut)|0,C=C+Math.imul(Fe,ft)|0;var no=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(no>>>26)|0,no&=67108863,w=Math.imul(ze,at),f=Math.imul(ze,ct),f=f+Math.imul(Ge,at)|0,C=Math.imul(Ge,ct),w=w+Math.imul(Ke,dt)|0,f=f+Math.imul(Ke,lt)|0,f=f+Math.imul(Ve,dt)|0,C=C+Math.imul(Ve,lt)|0,w=w+Math.imul(Le,ut)|0,f=f+Math.imul(Le,ft)|0,f=f+Math.imul(Ue,ut)|0,C=C+Math.imul(Ue,ft)|0;var ro=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(ro>>>26)|0,ro&=67108863,w=Math.imul(ze,dt),f=Math.imul(ze,lt),f=f+Math.imul(Ge,dt)|0,C=Math.imul(Ge,lt),w=w+Math.imul(Ke,ut)|0,f=f+Math.imul(Ke,ft)|0,f=f+Math.imul(Ve,ut)|0,C=C+Math.imul(Ve,ft)|0;var oo=(E+w|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(oo>>>26)|0,oo&=67108863,w=Math.imul(ze,ut),f=Math.imul(ze,ft),f=f+Math.imul(Ge,ut)|0,C=Math.imul(Ge,ft);var so=(E+w|0)+((f&8191)<<13)|0;return E=(C+(f>>>13)|0)+(so>>>26)|0,so&=67108863,I[0]=Ur,I[1]=Kr,I[2]=Vr,I[3]=zr,I[4]=Gr,I[5]=Wr,I[6]=Hr,I[7]=Xr,I[8]=Jr,I[9]=Zr,I[10]=Qr,I[11]=Yr,I[12]=eo,I[13]=to,I[14]=io,I[15]=no,I[16]=ro,I[17]=oo,I[18]=so,E!==0&&(I[19]=E,m.length++),m};Math.imul||(j=M);function B(x,u,p){p.negative=u.negative^x.negative,p.length=x.length+u.length;for(var m=0,v=0,A=0;A<p.length-1;A++){var I=v;v=0;for(var E=m&67108863,w=Math.min(A,u.length-1),f=Math.max(0,A-x.length+1);f<=w;f++){var C=A-f,re=x.words[C]|0,ie=u.words[f]|0,se=re*ie,St=se&67108863;I=I+(se/67108864|0)|0,St=St+E|0,E=St&67108863,I=I+(St>>>26)|0,v+=I>>>26,I&=67108863}p.words[A]=E,m=I,I=v}return m!==0?p.words[A]=m:p.length--,p._strip()}function q(x,u,p){return B(x,u,p)}o.prototype.mulTo=function(u,p){var m,v=this.length+u.length;return this.length===10&&u.length===10?m=j(this,u,p):v<63?m=M(this,u,p):v<1024?m=B(this,u,p):m=q(this,u,p),m},o.prototype.mul=function(u){var p=new o(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},o.prototype.mulf=function(u){var p=new o(null);return p.words=new Array(this.length+u.length),q(this,u,p)},o.prototype.imul=function(u){return this.clone().mulTo(u,this)},o.prototype.imuln=function(u){var p=u<0;p&&(u=-u),n(typeof u=="number"),n(u<67108864);for(var m=0,v=0;v<this.length;v++){var A=(this.words[v]|0)*u,I=(A&67108863)+(m&67108863);m>>=26,m+=A/67108864|0,m+=I>>>26,this.words[v]=I&67108863}return m!==0&&(this.words[v]=m,this.length++),p?this.ineg():this},o.prototype.muln=function(u){return this.clone().imuln(u)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(u){var p=P(u);if(p.length===0)return new o(1);for(var m=this,v=0;v<p.length&&p[v]===0;v++,m=m.sqr());if(++v<p.length)for(var A=m.sqr();v<p.length;v++,A=A.sqr())p[v]!==0&&(m=m.mul(A));return m},o.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,v=67108863>>>26-p<<26-p,A;if(p!==0){var I=0;for(A=0;A<this.length;A++){var E=this.words[A]&v,w=(this.words[A]|0)-E<<p;this.words[A]=w|I,I=E>>>26-p}I&&(this.words[A]=I,this.length++)}if(m!==0){for(A=this.length-1;A>=0;A--)this.words[A+m]=this.words[A];for(A=0;A<m;A++)this.words[A]=0;this.length+=m}return this._strip()},o.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},o.prototype.iushrn=function(u,p,m){n(typeof u=="number"&&u>=0);var v;p?v=(p-p%26)/26:v=0;var A=u%26,I=Math.min((u-A)/26,this.length),E=67108863^67108863>>>A<<A,w=m;if(v-=I,v=Math.max(0,v),w){for(var f=0;f<I;f++)w.words[f]=this.words[f];w.length=I}if(I!==0)if(this.length>I)for(this.length-=I,f=0;f<this.length;f++)this.words[f]=this.words[f+I];else this.words[0]=0,this.length=1;var C=0;for(f=this.length-1;f>=0&&(C!==0||f>=v);f--){var re=this.words[f]|0;this.words[f]=C<<26-A|re>>>A,C=re&E}return w&&C!==0&&(w.words[w.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(u,p,m){return n(this.negative===0),this.iushrn(u,p,m)},o.prototype.shln=function(u){return this.clone().ishln(u)},o.prototype.ushln=function(u){return this.clone().iushln(u)},o.prototype.shrn=function(u){return this.clone().ishrn(u)},o.prototype.ushrn=function(u){return this.clone().iushrn(u)},o.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,v=1<<p;if(this.length<=m)return!1;var A=this.words[m];return!!(A&v)},o.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(p!==0&&m++,this.length=Math.min(m,this.length),p!==0){var v=67108863^67108863>>>p<<p;this.words[this.length-1]&=v}return this._strip()},o.prototype.maskn=function(u){return this.clone().imaskn(u)},o.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},o.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},o.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},o.prototype.addn=function(u){return this.clone().iaddn(u)},o.prototype.subn=function(u){return this.clone().isubn(u)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(u,p,m){var v=u.length+m,A;this._expand(v);var I,E=0;for(A=0;A<u.length;A++){I=(this.words[A+m]|0)+E;var w=(u.words[A]|0)*p;I-=w&67108863,E=(I>>26)-(w/67108864|0),this.words[A+m]=I&67108863}for(;A<this.length-m;A++)I=(this.words[A+m]|0)+E,E=I>>26,this.words[A+m]=I&67108863;if(E===0)return this._strip();for(n(E===-1),E=0,A=0;A<this.length;A++)I=-(this.words[A]|0)+E,E=I>>26,this.words[A]=I&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(u,p){var m=this.length-u.length,v=this.clone(),A=u,I=A.words[A.length-1]|0,E=this._countBits(I);m=26-E,m!==0&&(A=A.ushln(m),v.iushln(m),I=A.words[A.length-1]|0);var w=v.length-A.length,f;if(p!=="mod"){f=new o(null),f.length=w+1,f.words=new Array(f.length);for(var C=0;C<f.length;C++)f.words[C]=0}var re=v.clone()._ishlnsubmul(A,1,w);re.negative===0&&(v=re,f&&(f.words[w]=1));for(var ie=w-1;ie>=0;ie--){var se=(v.words[A.length+ie]|0)*67108864+(v.words[A.length+ie-1]|0);for(se=Math.min(se/I|0,67108863),v._ishlnsubmul(A,se,ie);v.negative!==0;)se--,v.negative=0,v._ishlnsubmul(A,1,ie),v.isZero()||(v.negative^=1);f&&(f.words[ie]=se)}return f&&f._strip(),v._strip(),p!=="div"&&m!==0&&v.iushrn(m),{div:f||null,mod:v}},o.prototype.divmod=function(u,p,m){if(n(!u.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var v,A,I;return this.negative!==0&&u.negative===0?(I=this.neg().divmod(u,p),p!=="mod"&&(v=I.div.neg()),p!=="div"&&(A=I.mod.neg(),m&&A.negative!==0&&A.iadd(u)),{div:v,mod:A}):this.negative===0&&u.negative!==0?(I=this.divmod(u.neg(),p),p!=="mod"&&(v=I.div.neg()),{div:v,mod:I.mod}):this.negative&u.negative?(I=this.neg().divmod(u.neg(),p),p!=="div"&&(A=I.mod.neg(),m&&A.negative!==0&&A.isub(u)),{div:I.div,mod:A}):u.length>this.length||this.cmp(u)<0?{div:new o(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new o(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new o(this.modrn(u.words[0]))}:this._wordDiv(u,p)},o.prototype.div=function(u){return this.divmod(u,"div",!1).div},o.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},o.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},o.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var m=p.div.negative!==0?p.mod.isub(u):p.mod,v=u.ushrn(1),A=u.andln(1),I=m.cmp(v);return I<0||A===1&&I===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},o.prototype.modrn=function(u){var p=u<0;p&&(u=-u),n(u<=67108863);for(var m=(1<<26)%u,v=0,A=this.length-1;A>=0;A--)v=(m*v+(this.words[A]|0))%u;return p?-v:v},o.prototype.modn=function(u){return this.modrn(u)},o.prototype.idivn=function(u){var p=u<0;p&&(u=-u),n(u<=67108863);for(var m=0,v=this.length-1;v>=0;v--){var A=(this.words[v]|0)+m*67108864;this.words[v]=A/u|0,m=A%u}return this._strip(),p?this.ineg():this},o.prototype.divn=function(u){return this.clone().idivn(u)},o.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var v=new o(1),A=new o(0),I=new o(0),E=new o(1),w=0;p.isEven()&&m.isEven();)p.iushrn(1),m.iushrn(1),++w;for(var f=m.clone(),C=p.clone();!p.isZero();){for(var re=0,ie=1;!(p.words[0]&ie)&&re<26;++re,ie<<=1);if(re>0)for(p.iushrn(re);re-- >0;)(v.isOdd()||A.isOdd())&&(v.iadd(f),A.isub(C)),v.iushrn(1),A.iushrn(1);for(var se=0,St=1;!(m.words[0]&St)&&se<26;++se,St<<=1);if(se>0)for(m.iushrn(se);se-- >0;)(I.isOdd()||E.isOdd())&&(I.iadd(f),E.isub(C)),I.iushrn(1),E.iushrn(1);p.cmp(m)>=0?(p.isub(m),v.isub(I),A.isub(E)):(m.isub(p),I.isub(v),E.isub(A))}return{a:I,b:E,gcd:m.iushln(w)}},o.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var v=new o(1),A=new o(0),I=m.clone();p.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,w=1;!(p.words[0]&w)&&E<26;++E,w<<=1);if(E>0)for(p.iushrn(E);E-- >0;)v.isOdd()&&v.iadd(I),v.iushrn(1);for(var f=0,C=1;!(m.words[0]&C)&&f<26;++f,C<<=1);if(f>0)for(m.iushrn(f);f-- >0;)A.isOdd()&&A.iadd(I),A.iushrn(1);p.cmp(m)>=0?(p.isub(m),v.isub(A)):(m.isub(p),A.isub(v))}var re;return p.cmpn(1)===0?re=v:re=A,re.cmpn(0)<0&&re.iadd(u),re},o.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),m=u.clone();p.negative=0,m.negative=0;for(var v=0;p.isEven()&&m.isEven();v++)p.iushrn(1),m.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;m.isEven();)m.iushrn(1);var A=p.cmp(m);if(A<0){var I=p;p=m,m=I}else if(A===0||m.cmpn(1)===0)break;p.isub(m)}while(!0);return m.iushln(v)},o.prototype.invm=function(u){return this.egcd(u).a.umod(u)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(u){return this.words[0]&u},o.prototype.bincn=function(u){n(typeof u=="number");var p=u%26,m=(u-p)/26,v=1<<p;if(this.length<=m)return this._expand(m+1),this.words[m]|=v,this;for(var A=v,I=m;A!==0&&I<this.length;I++){var E=this.words[I]|0;E+=A,A=E>>>26,E&=67108863,this.words[I]=E}return A!==0&&(this.words[I]=A,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var m;if(this.length>1)m=1;else{p&&(u=-u),n(u<=67108863,"Number is too big");var v=this.words[0]|0;m=v===u?0:v<u?-1:1}return this.negative!==0?-m|0:m},o.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},o.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,m=this.length-1;m>=0;m--){var v=this.words[m]|0,A=u.words[m]|0;if(v!==A){v<A?p=-1:v>A&&(p=1);break}}return p},o.prototype.gtn=function(u){return this.cmpn(u)===1},o.prototype.gt=function(u){return this.cmp(u)===1},o.prototype.gten=function(u){return this.cmpn(u)>=0},o.prototype.gte=function(u){return this.cmp(u)>=0},o.prototype.ltn=function(u){return this.cmpn(u)===-1},o.prototype.lt=function(u){return this.cmp(u)===-1},o.prototype.lten=function(u){return this.cmpn(u)<=0},o.prototype.lte=function(u){return this.cmp(u)<=0},o.prototype.eqn=function(u){return this.cmpn(u)===0},o.prototype.eq=function(u){return this.cmp(u)===0},o.red=function(u){return new H(u)},o.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(u){return this.red=u,this},o.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},o.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},o.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},o.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},o.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},o.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},o.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},o.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var X={k256:null,p224:null,p192:null,p25519:null};function Z(x,u){this.name=x,this.p=new o(u,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Z.prototype._tmp=function(){var u=new o(null);return u.words=new Array(Math.ceil(this.n/13)),u},Z.prototype.ireduce=function(u){var p=u,m;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),m=p.bitLength();while(m>this.n);var v=m<this.n?-1:p.ucmp(this.p);return v===0?(p.words[0]=0,p.length=1):v>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},Z.prototype.split=function(u,p){u.iushrn(this.n,0,p)},Z.prototype.imulK=function(u){return u.imul(this.k)};function fe(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(fe,Z),fe.prototype.split=function(u,p){for(var m=4194303,v=Math.min(u.length,9),A=0;A<v;A++)p.words[A]=u.words[A];if(p.length=v,u.length<=9){u.words[0]=0,u.length=1;return}var I=u.words[9];for(p.words[p.length++]=I&m,A=10;A<u.length;A++){var E=u.words[A]|0;u.words[A-10]=(E&m)<<4|I>>>22,I=E}I>>>=22,u.words[A-10]=I,I===0&&u.length>10?u.length-=10:u.length-=9},fe.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,m=0;m<u.length;m++){var v=u.words[m]|0;p+=v*977,u.words[m]=p&67108863,p=v*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ve(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(ve,Z);function _t(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(_t,Z);function Y(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(Y,Z),Y.prototype.imulK=function(u){for(var p=0,m=0;m<u.length;m++){var v=(u.words[m]|0)*19+p,A=v&67108863;v>>>=26,u.words[m]=A,p=v}return p!==0&&(u.words[u.length++]=p),u},o._prime=function(u){if(X[u])return X[u];var p;if(u==="k256")p=new fe;else if(u==="p224")p=new ve;else if(u==="p192")p=new _t;else if(u==="p25519")p=new Y;else throw new Error("Unknown prime "+u);return X[u]=p,p};function H(x){if(typeof x=="string"){var u=o._prime(x);this.m=u.p,this.prime=u}else n(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}H.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},H.prototype._verify2=function(u,p){n((u.negative|p.negative)===0,"red works only with positives"),n(u.red&&u.red===p.red,"red works only with red numbers")},H.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(l(u,u.umod(this.m)._forceRed(this)),u)},H.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},H.prototype.add=function(u,p){this._verify2(u,p);var m=u.add(p);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},H.prototype.iadd=function(u,p){this._verify2(u,p);var m=u.iadd(p);return m.cmp(this.m)>=0&&m.isub(this.m),m},H.prototype.sub=function(u,p){this._verify2(u,p);var m=u.sub(p);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},H.prototype.isub=function(u,p){this._verify2(u,p);var m=u.isub(p);return m.cmpn(0)<0&&m.iadd(this.m),m},H.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},H.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},H.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},H.prototype.isqr=function(u){return this.imul(u,u.clone())},H.prototype.sqr=function(u){return this.mul(u,u)},H.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(u,m)}for(var v=this.m.subn(1),A=0;!v.isZero()&&v.andln(1)===0;)A++,v.iushrn(1);n(!v.isZero());var I=new o(1).toRed(this),E=I.redNeg(),w=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new o(2*f*f).toRed(this);this.pow(f,w).cmp(E)!==0;)f.redIAdd(E);for(var C=this.pow(f,v),re=this.pow(u,v.addn(1).iushrn(1)),ie=this.pow(u,v),se=A;ie.cmp(I)!==0;){for(var St=ie,ke=0;St.cmp(I)!==0;ke++)St=St.redSqr();n(ke<se);var xe=this.pow(C,new o(1).iushln(se-ke-1));re=re.redMul(xe),C=xe.redSqr(),ie=ie.redMul(C),se=ke}return re},H.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},H.prototype.pow=function(u,p){if(p.isZero())return new o(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var m=4,v=new Array(1<<m);v[0]=new o(1).toRed(this),v[1]=u;for(var A=2;A<v.length;A++)v[A]=this.mul(v[A-1],u);var I=v[0],E=0,w=0,f=p.bitLength()%26;for(f===0&&(f=26),A=p.length-1;A>=0;A--){for(var C=p.words[A],re=f-1;re>=0;re--){var ie=C>>re&1;if(I!==v[0]&&(I=this.sqr(I)),ie===0&&E===0){w=0;continue}E<<=1,E|=ie,w++,!(w!==m&&(A!==0||re!==0))&&(I=this.mul(I,v[E]),w=0,E=0)}f=26}return I},H.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},H.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},o.mont=function(u){return new ye(u)};function ye(x){H.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(ye,H),ye.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},ye.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},ye.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(p),v=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=m.isub(v).iushrn(this.shift),I=A;return A.cmp(this.m)>=0?I=A.isub(this.m):A.cmpn(0)<0&&(I=A.iadd(this.m)),I._forceRed(this)},ye.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new o(0)._forceRed(this);var m=u.mul(p),v=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=m.isub(v).iushrn(this.shift),I=A;return A.cmp(this.m)>=0?I=A.isub(this.m):A.cmpn(0)<0&&(I=A.iadd(this.m)),I._forceRed(this)},ye.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(e,zd)})(Zd);const za="3.7.7",Qd=za,ln=typeof Buffer=="function",Xs=typeof TextDecoder=="function"?new TextDecoder:void 0,Js=typeof TextEncoder=="function"?new TextEncoder:void 0,Yd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",yn=Array.prototype.slice.call(Yd),Wn=(e=>{let t={};return e.forEach((i,n)=>t[i]=n),t})(yn),el=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,kt=String.fromCharCode.bind(String),Zs=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Ga=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Wa=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Ha=e=>{let t,i,n,r,o="";const s=e.length%3;for(let a=0;a<e.length;){if((i=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=i<<16|n<<8|r,o+=yn[t>>18&63]+yn[t>>12&63]+yn[t>>6&63]+yn[t&63]}return s?o.slice(0,s-3)+"===".substring(s):o},os=typeof btoa=="function"?e=>btoa(e):ln?e=>Buffer.from(e,"binary").toString("base64"):Ha,Bo=ln?e=>Buffer.from(e).toString("base64"):e=>{let i=[];for(let n=0,r=e.length;n<r;n+=4096)i.push(kt.apply(null,e.subarray(n,n+4096)));return os(i.join(""))},rr=(e,t=!1)=>t?Ga(Bo(e)):Bo(e),tl=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?kt(192|t>>>6)+kt(128|t&63):kt(224|t>>>12&15)+kt(128|t>>>6&63)+kt(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return kt(240|t>>>18&7)+kt(128|t>>>12&63)+kt(128|t>>>6&63)+kt(128|t&63)}},il=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Xa=e=>e.replace(il,tl),Qs=ln?e=>Buffer.from(e,"utf8").toString("base64"):Js?e=>Bo(Js.encode(e)):e=>os(Xa(e)),tn=(e,t=!1)=>t?Ga(Qs(e)):Qs(e),Ys=e=>tn(e,!0),nl=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,rl=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return kt((i>>>10)+55296)+kt((i&1023)+56320);case 3:return kt((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return kt((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Ja=e=>e.replace(nl,rl),Za=e=>{if(e=e.replace(/\s+/g,""),!el.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",n,r;for(let o=0;o<e.length;)t=Wn[e.charAt(o++)]<<18|Wn[e.charAt(o++)]<<12|(n=Wn[e.charAt(o++)])<<6|(r=Wn[e.charAt(o++)]),i+=n===64?kt(t>>16&255):r===64?kt(t>>16&255,t>>8&255):kt(t>>16&255,t>>8&255,t&255);return i},ss=typeof atob=="function"?e=>atob(Wa(e)):ln?e=>Buffer.from(e,"base64").toString("binary"):Za,Qa=ln?e=>Zs(Buffer.from(e,"base64")):e=>Zs(ss(e).split("").map(t=>t.charCodeAt(0))),Ya=e=>Qa(ec(e)),ol=ln?e=>Buffer.from(e,"base64").toString("utf8"):Xs?e=>Xs.decode(Qa(e)):e=>Ja(ss(e)),ec=e=>Wa(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Do=e=>ol(ec(e)),sl=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},tc=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),ic=function(){const e=(t,i)=>Object.defineProperty(String.prototype,t,tc(i));e("fromBase64",function(){return Do(this)}),e("toBase64",function(t){return tn(this,t)}),e("toBase64URI",function(){return tn(this,!0)}),e("toBase64URL",function(){return tn(this,!0)}),e("toUint8Array",function(){return Ya(this)})},nc=function(){const e=(t,i)=>Object.defineProperty(Uint8Array.prototype,t,tc(i));e("toBase64",function(t){return rr(this,t)}),e("toBase64URI",function(){return rr(this,!0)}),e("toBase64URL",function(){return rr(this,!0)})},al=()=>{ic(),nc()},or={version:za,VERSION:Qd,atob:ss,atobPolyfill:Za,btoa:os,btoaPolyfill:Ha,fromBase64:Do,toBase64:tn,encode:tn,encodeURI:Ys,encodeURL:Ys,utob:Xa,btou:Ja,decode:Do,isValid:sl,fromUint8Array:rr,toUint8Array:Ya,extendString:ic,extendUint8Array:nc,extendBuiltins:al};function ao(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(i=0)),i;)try{if(n=1,r&&(o=d[0]&2?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(l){d=[6,l],r=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Ti;(function(e){e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS"})(Ti||(Ti={}));var cl=function(){function e(t){this.compare=t||e.defaultCompareFunction}return e.defaultCompareFunction=function(t,i){return t===i?Ti.EQUAL:t<i?Ti.LESS:Ti.GREATER},e.prototype.equal=function(t,i){return this.compare(t,i)===Ti.EQUAL},e.prototype.lessThan=function(t,i){return this.compare(t,i)===Ti.LESS},e.prototype.greaterThan=function(t,i){return this.compare(t,i)===Ti.GREATER},e.prototype.lessThanOrEqual=function(t,i){return this.lessThan(t,i)||this.equal(t,i)},e.prototype.greaterThanOrEqual=function(t,i){return this.greaterThan(t,i)||this.equal(t,i)},e.prototype.reverse=function(){var t=this.compare;this.compare=function(i,n){return t(n,i)}},e}(),ea=function(){function e(t){this.value=t,this.next=null}return e}(),ta=function(){function e(t){this.value=t,this.next=null,this.prev=null}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var No=function(e,t){return No=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},No(e,t)};function un(e,t){No(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function En(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=d[0]&2?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(l){d=[6,l],r=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function dl(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function Qt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(dl(arguments[t]));return e}var ll="obfuse error occur";function fr(e,t){if(!e)throw new Error("[linked-list] "+(t||ll))}var ul=-1,rc=function(){function e(){for(var t=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];this._head=null,this._tail=null,this._length=0,this.compare=new cl,i.length>0&&i.forEach(function(r){t.append(r)})}return Object.defineProperty(e.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopLength",{get:function(){var t=!1,i=1;if(!this._head)return 0;for(var n=this._head,r=this._head;r.next&&r.next.next;)if(r=r.next.next,n=n.next,n===r){t=!0;break}if(t){for(r=r.next;n!==r;)i++,r=r.next;return i}else return 0},enumerable:!0,configurable:!0}),e.prototype.getNode=function(t){var i=this._length;fr(i>0&&t>=0&&t<i,"[linked-list] index "+t+" out of scope of list, which length is "+i);for(var n=this._head,r=0;r<t;)n=n.next,r++;return n},e.prototype.get=function(t){var i=this.getNode(t);return i?i.value:null},e.prototype.find=function(t){var i=t.value,n=t.callback;if(!this._head)return null;for(var r=this._head;r;){if(n&&n(r.value)||i!==void 0&&this.compare.equal(r.value,i))return r;r=r.next}return null},e.prototype.indexOf=function(t){if(!this._head)return ul;for(var i=this._head,n=-1;i.next;){if(n++,this.compare.equal(i.value,t))return n;i=i.next}return i===this._tail&&this.compare.equal(i.value,t)&&(n+=1),n},e.prototype.first=function(t){fr(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var i=this.iterator(),n=[],r=Math.min(t,this.length),o=0;o<r;o++){var s=i.next();n.push(s.value)}return n},e.prototype.toArray=function(){return Qt(this)},e.prototype.isEmpty=function(){return this._head===null},e.prototype.iterator=function(){var t;return En(this,function(i){switch(i.label){case 0:t=this._head,i.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return i.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e}(),Bn=function(e){un(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.apply(this,Qt(i))||this}return t.prototype.append=function(i){var n=new ea(i);return this._tail?(this._tail.next=n,this._tail=n):this._head=this._tail=n,this._length++,!0},t.prototype.prepend=function(i){var n=new ea(i);return this._head?(n.next=this._head,this._head=n):this._head=this._tail=n,this._length++,!0},t.prototype.remove=function(i){var n=this._head;if(n){if(this.compare.equal(n.value,i))return n.next?(this._head=n.next,n.next=null):this._head=this._tail=null,this._length--,i;for(var r=n;;){if(this.compare.equal(n.value,i))return n.next?r.next=n.next:(this._tail=r,this._tail.next=null),n.next=null,this._length--,i;if(n.next)r=n,n=n.next;else return}}},t.prototype.removeHead=function(){var i=this._head;if(i)return this._head.next?(this._head=i.next,i.next=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.removeTail=function(){var i=this._tail;if(i){if(!this._head.next)this._head=null,this._tail=null;else{for(var n=this._head;n.next!==i;)n=n.next;n.next=null,this._tail=n}return this._length--,i.value}},t.prototype.reverse=function(){if(this._head){var i=this._head,n=null,r;for(this._tail=this._head;i!==null;)r=i.next,i.next=n,n=i,i=r;this._head=n}},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Qt([void 0],i)))},t}(rc),fl=function(e){un(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Qt(i))||this;return r.cyclization(),r}return t.prototype.iterator=function(){var i;return En(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,i===this._head&&(i=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var i;return En(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.breakCircle();var o=e.prototype[i].apply(this,n);return this.cyclization(),o},t.prototype.getNode=function(i){return this.mapToNormalListFn("getNode",i)},t.prototype.append=function(i){return this.mapToNormalListFn("append",i)},t.prototype.prepend=function(i){return this.mapToNormalListFn("prepend",i)},t.prototype.find=function(i){return this.mapToNormalListFn("find",i)},t.prototype.indexOf=function(i){return this.mapToNormalListFn("indexOf",i)},t.prototype.remove=function(i){return this.mapToNormalListFn("remove",i)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(i){fr(i>=0,"[linked-list] param 'num' ("+i+") should not less than 0");for(var n=this.circleIterator(),r=[],o=0;o<i;o++){var s=n.next();r.push(s.value)}return r},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(Bn);(function(e){un(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Qt(i))||this;return r.cyclization(),r}return t.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},t.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Qt([void 0],i)))},t})(fl);var hl=function(e){un(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.apply(this,Qt(i))||this}return t.prototype.append=function(i){var n=new ta(i);return this._tail?(this._tail.next=n,n.prev=this._tail,this._tail=n):this._head=this._tail=n,this._length++,!0},t.prototype.prepend=function(i){var n=new ta(i);return this._head?(n.next=this._head,this._head.prev=n,this._head=n):this._head=this._tail=n,this._length++,!0},t.prototype.remove=function(i){var n=this._head;if(n){if(this.compare.equal(n.value,i))return n.next?(this._head=n.next,this._head.prev=null,n.next=n.prev=null):this._head=this._tail=null,this._length--,i;for(;;){if(this.compare.equal(n.value,i))return n.next?(n.prev.next=n.next,n.next.prev=n.prev,n.next=n.prev=null):(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null),this._length--,n.value;if(n.next)n=n.next;else return}}},t.prototype.removeHead=function(){var i=this._head;if(i)return this._head.next?(i.next.prev=null,this._head=i.next,i.next=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.removeTail=function(){var i=this._tail;if(i)return this._head.next?(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.reverse=function(){if(this._head){var i=this._head,n=null,r;for(this._tail=this._head;i!==null;)r=i.next,i.next=n,i.prev=r,n=i,i=r;this._head=n}},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Qt([void 0],i)))},t}(rc),pl=function(e){un(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Qt(i))||this;return r.cyclization(),r}return t.prototype.iterator=function(){var i;return En(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,i===this._head&&(i=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var i;return En(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.breakCircle();var o=e.prototype[i].apply(this,n);return this.cyclization(),o},t.prototype.getNode=function(i){return this.mapToNormalListFn("getNode",i)},t.prototype.append=function(i){return this.mapToNormalListFn("append",i)},t.prototype.prepend=function(i){return this.mapToNormalListFn("prepend",i)},t.prototype.find=function(i){return this.mapToNormalListFn("find",i)},t.prototype.indexOf=function(i){return this.mapToNormalListFn("indexOf",i)},t.prototype.remove=function(i){return this.mapToNormalListFn("remove",i)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(i){fr(i>=0,"[linked-list] param 'num' ("+i+") should not less than 0");for(var n=this.circleIterator(),r=[],o=0;o<i;o++){var s=n.next();r.push(s.value)}return r},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(hl);(function(e){un(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Qt(i))||this;return r.cyclization(),r}return t.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},t.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Qt([void 0],i)))},t})(pl);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function _l(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function ml(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_l(arguments[t]));return e}var bl=function(){function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.queue=new(Bn.bind.apply(Bn,ml([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.queue.isEmpty()},e.prototype.enqueue=function(t){return this.queue.append(t)},e.prototype.dequeue=function(){var t=this.queue.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.queue.toArray()},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function gl(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function yl(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gl(arguments[t]));return e}var co=function(){function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.stack=new(Bn.bind.apply(Bn,yl([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.stack.isEmpty()},e.prototype.push=function(t){return this.stack.append(t)},e.prototype.pop=function(){var t=this.stack.removeTail();return typeof t<"u"?t:void 0},e.prototype.popBottom=function(){var t=this.stack.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.stack.toArray()},e}(),wl=function(){function e(t,i,n){n===void 0&&(n=0),this.startVertex=t,this.endVertex=i,this.weight=n}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),i=this.endVertex.getKey();return t+"_"+i},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function Ro(e,t,i){if(i===void 0&&(i="cc-graph"),!e)throw new Error((i?"["+i+"]":"")+" Invariant failed: "+t)}function vl(e,t){t===void 0&&(t=!0);var i=typeof e<"u"&&e!==null;return t?i&&e!=="undefined"&&e!=="null":i}var ia=function(){function e(t){Ro(vl(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,i=this.getEdges(),n=function(r){return r.startVertex===t?r.endVertex:r.startVertex};return i.map(n)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var i=this.getEdges().find(function(n){return n===t});return!!i},e.prototype.hasNeighbor=function(t){var i=this.getEdges().find(function(n){return n.startVertex===t||n.endVertex===t});return!!i},e.prototype.findEdge=function(t){var i=function(r){return r.startVertex===t||r.endVertex===t},n=this.getEdges().find(i);return n||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(i){return t.deleteEdge(i)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();function na(e,t,i,n){if(e){t.push(e),n.set(e.getKey(),!0);var r=e.getNeighbors().filter(function(o){return!n.get(o.getKey())});i.push(r)}}function ra(e,t,i){var n=e.pop();n&&i.set(n.getKey(),!1),t.pop()}var kl=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,i){if(i===void 0&&(i=!1),this.edges[t.getKey()]){if(i)return this;Ro(!1,"Edge has already been added before")}var n=this.getVertexByKey(t.startVertex.getKey()),r=this.getVertexByKey(t.endVertex.getKey());if(n||(this.addVertex(t.startVertex),n=this.getVertexByKey(t.startVertex.getKey())),r||(this.addVertex(t.endVertex),r=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)n.addEdge(t);else{n.addEdge(t);var o=t.clone();r.addEdge(o.reverse())}return this},e.prototype.deleteEdge=function(t,i){if(i===void 0&&(i=!1),!this.edges[t.getKey()]){if(i)return this;Ro(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var n=this.getVertexByKey(t.startVertex.getKey()),r=this.getVertexByKey(t.endVertex.getKey());return n.deleteEdge(t),r.deleteEdge(t),this},e.prototype.findEdge=function(t,i){var n=this.getVertexByKey(t.getKey());return n?n.findEdge(i):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,i){return t+i.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(i){t.deleteEdge(i),i.reverse(),t.addEdge(i)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(i,n){t[i.getKey()]=n}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,i=this.getAllVertices(),n=this.getVerticesIndices(),r=Array(i.length).fill(null).map(function(){return Array(i.length).fill(1/0)});return i.forEach(function(o,s){o.getNeighbors().forEach(function(a){var c=n[a.getKey()],d=t.findEdge(o,a);d&&(r[s][c]=d.weight)})}),r},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var i,n,r;return ao(this,function(o){switch(o.label){case 0:i=new Map,n=new bl,n.enqueue(t),o.label=1;case 1:return n.isEmpty()?[3,4]:(r=n.dequeue(),r&&!i.has(r.getKey())?[4,r]:[3,3]);case 2:o.sent(),i.set(r.getKey(),r),r.getNeighbors().forEach(function(s){return n.enqueue(s)}),o.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var i,n,r;return ao(this,function(o){switch(o.label){case 0:i=new Map,n=new co,n.push(t),o.label=1;case 1:return n.isEmpty()?[3,4]:(r=n.pop(),r&&!i.has(r.getKey())?[4,r]:[3,3]);case 2:o.sent(),i.set(r.getKey(),r),r.getNeighbors().forEach(function(s){return n.push(s)}),o.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,i){var n,r,o,s,a,c,d;return ao(this,function(l){switch(l.label){case 0:return n=[],t!==i?[3,2]:(n.push(t),[4,n]);case 1:return l.sent(),[2];case 2:r=new Map,o=new co,s=new co,na(t,o,s,r),l.label=3;case 3:if(o.isEmpty())return[3,6];if(a=s.pop(),a&&a.length)c=a.shift(),s.push(a),c&&na(c,o,s,r);else return s.push(a),ra(o,s,r),[3,3];return d=o.peek,d!==i?[3,5]:[4,o.toArray()];case 4:l.sent(),ra(o,s,r),l.label=5;case 5:return[3,3];case 6:return[2]}})},e}();const Cl=Gd(),oc=Cl.public.appEnv;console.log("config env: ",oc);const xl={pro:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0x4fb259302630bf727f1b489e0597131fe4d8ccba12074bb7fedba3886c008945",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://alpha.cetus.zone",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://cetus-mainnet-endpoint.blockvision.org",queryTxsBlocksRpcUrl:"https://cetus-mainnet-endpoint.blockvision.org",rpcName:"BlockVision 2",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui.cetus.zone/router_v2/find_routes",aggregatorV2:{package_id:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302",published_at:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"},dca:{package_id:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",published_at:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",config:{admin_cap_id:"0xbcdd7391245dd8d6118a39bc83e6d9a7cfca899d06cc283c1a4cae41b2508574",global_config_id:"0x5db218756f8486fa2ac26fab590c4be4e439be54e6d932c9a30b20573a5b706a",indexer_id:"0x713f0968d042b48f4ec57e4e21bd7e346d06355f59776faedc9497ca990a9f77",user_indexer_id:"0x0ae365f60f2fa692831f9496c9e49b2440c74f14e8eab6f88dbb418c443b5020",in_coin_whitelist_id:"0x845643253afdfef9c4202e7af5e2de374b7f4766f78694903e8b2c0f83dab3ce",out_coin_whitelist_id:"0xe398b24a2b28f1ffd18394eaa78538d6ec8111dcb5fd919424bd3d42764c19f7"}},burn:{package_id:"0x12d73de9a6bc3cb658ec9dc0fe7de2662be1cea5c76c092fcc3606048cdbac27",published_at:"0x12d73de9a6bc3cb658ec9dc0fe7de2662be1cea5c76c092fcc3606048cdbac27",manager_id:"0x1d94aa32518d0cb00f9de6ed60d450c9a2090761f326752ffad06b2e9404f845",clmm_global_config:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",clmm_global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b",burn_pool_handle:"0xc9aacf74bd7cc8da8820ae28ca4473b7e01c87be19bc35bf81c9c7311e1b299e"}}},pre:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://cetus-mainnet-endpoint.blockvision.org",queryTxsBlocksRpcUrl:"https://cetus-mainnet-endpoint.blockvision.org",rpcName:"BlockVision 2",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui-cloudfront.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui-cloudfront.cetus.zone/router_v2/find_routes",aggregatorV2:{package_id:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302",published_at:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!1,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"},dca:{package_id:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",published_at:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",config:{admin_cap_id:"0xbcdd7391245dd8d6118a39bc83e6d9a7cfca899d06cc283c1a4cae41b2508574",global_config_id:"0x5db218756f8486fa2ac26fab590c4be4e439be54e6d932c9a30b20573a5b706a",indexer_id:"0x713f0968d042b48f4ec57e4e21bd7e346d06355f59776faedc9497ca990a9f77",user_indexer_id:"0x0ae365f60f2fa692831f9496c9e49b2440c74f14e8eab6f88dbb418c443b5020",in_coin_whitelist_id:"0x845643253afdfef9c4202e7af5e2de374b7f4766f78694903e8b2c0f83dab3ce",out_coin_whitelist_id:"0xe398b24a2b28f1ffd18394eaa78538d6ec8111dcb5fd919424bd3d42764c19f7"}},burn:{package_id:"0x12d73de9a6bc3cb658ec9dc0fe7de2662be1cea5c76c092fcc3606048cdbac27",published_at:"0x12d73de9a6bc3cb658ec9dc0fe7de2662be1cea5c76c092fcc3606048cdbac27",manager_id:"0x1d94aa32518d0cb00f9de6ed60d450c9a2090761f326752ffad06b2e9404f845",clmm_global_config:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",clmm_global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b",burn_pool_handle:"0xc9aacf74bd7cc8da8820ae28ca4473b7e01c87be19bc35bf81c9c7311e1b299e"}}},preRoute:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xfa36bcb799278bddaf295991b2d3ce039013b1dd60dfd7183dee135fdadbc4be",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7",published_at:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7"},aggregatorUrl:"https://api-sui.cetus.zone/router1",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x7cc8461d20ad82d3851123a64bed22883199b465763ee53b1b529fba1f4e15cc",published_at:"0x9f63e8926719bcb45df55fb60b4444f4d50309bff2e85cccc1fdb91c3e4653a2",config:{pools_id:"0x68b4b6bd15aa086df8f8d94f62fb5b38817a02cc288802d1637e1febae46f545",admin_cap_id:"0x5a304d63a5421a3fbc190b3d124f7ea3cdf56b1cb8fd3e0bf4855d129075caef",package_version_id:"0xceab2289e0968f0e7172ce702af8f28a678570afa6b139e97bc344f0290672d6"}},xcetus:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"}}},test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.testnet.sui.io",fullRpcUrl:"https://fullnode.testnet.sui.io",queryTxsBlocksRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",explorerUrl1:"https://testnet.suivision.xyz",network:"testnet",networkTip:"Testnet",api:"https://api-sui.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count/v3",faucet:{faucet_display:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",faucet_router:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc"},simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x084dbc14f8f6b50e4e1d6828ebf1f93fd1b1d2502b121bc787937893793417b0",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699"}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xe26cb89a7c3bb9a00b396e278f4f1f90aae02d0da37cd4b0c4b4977ca95568ef"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",aggregatorv2Url:"https://api-sui.devcetus.com/router_v2/find_routes",aggregatorV2:{package_id:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0",published_at:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0"},launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetusTokenAddress:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7::cetus::CETUS",xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x4061e279415a3c45cfd31554d38c5b3bb0e06c65833811a98a66f469e04c69c3",published_at:"0xfeda040996e722ba532ab2203d13333484024456ca38bf4adeb526ce1457332d",config:{dividend_manager_id:"0x9d1be1a6b1146b30448a266bc87127466c0bae1585750c42adffce3e25e1ab6d",dividend_admin_id:"0x36d63c1a588bd93775aff8f47538a0063960564f0a171d100a9f49526a872b92",dividend_settle_id:"0x9eb78595419560b1dcaa9fb0ca307921ab1664a5f63c877c6887ab696344b400",venft_dividends_id:"0xc31a85fa5a77fc1def0dc5b2aadc5317a9d744ffda24b472e56a646711770676",venft_dividends_id_v2:"0x53b24031120730f6e4a733526147917650b1ecd3c56b43164b69eaa74f9b9ff7"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"0xb58a7b66d3d007d9977940598187104084951bd8fdabb74f03f68151a3e27710",published_at:"0x72eefdfad9c79ef4c69748f9fcaf47874779704475d9ce35a29cc0ff1b9ce29f",config:{xtoken_manager_id:"0x51c6f72ecbc819aeee851b5e2d79cf6100e8e2b44e7ca55b06bd81bd163f677f",lock_manager_id:"0x92cb9f128ae2f823401c2104136a96cde6c201d6a133a1c7b5c67f4400711a10",lock_handle_id:"0x5cc82e84cf911a2d904997c7ef3e2e98eb3fea0bc43308f7b8c52bf0aff478b9"}},xtoken_dividends:{package_id:"0xdc899c0b05327036990f08cd70b99ef92c4288b784cbb82088c099d109a30226",published_at:"0x4677c8990eab6036d7059be96ad82173efd88775be36e277f4543155da4cbb9e",config:{dividend_manager_id:"0xaf17350657fb26a972d088bfb9db4491d11bf5533b7a5272ab6aa4a1badee749",dividend_admin_id:"0x8c0993c6ea9574cf6a3743698a0d6a46c7bbc4bab668d28b51aa947ad34edfc2",dividend_settle_id:"0xd938930b4ad7ef0cd85d8ae640d6ed7fd5cfcb64101994b69b88aa240dba1cb0"}},token_faucet:{package_id:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5",published_at:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5"},booster:{package_id:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",published_at:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",config:{booster_config_id:"0xeba41bf99086b0140713d7dd102e1374281a608bf524cc38f62c1d2bd792715c",booster_pool_handle:"0x01f9ba86234f661157366b8393eaeba82c8b78bf40fd9728604c3cc142811629"}},liquidity_stratefy:{package_id:"0x9b894cff0422a6acc41dadab3c8e2f52da7b5f0b366821a80d62eaf650565c3f",published_at:"0xc76c30d0a7b3e0a4372b6e7f24d73ef4d7740eaf920789e658795502c2fd252a",config:{master_manger_id:"0x562f2c9a90ffc3cdbe492b8cedb2e911954c81e8d20b47c4d2b0b2782bd7cad2",master_liquidity_handle:"0x323179fcd8fc2c01f146a902aaec56221e791fb0f1965907c97b25cba5eac515"}},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0xe1fb9fc8542a9e7768b0a701bf0c11b595201fb2492791a03eb9c0bb319297f3",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a",haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",version:1,config:{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:"::cert::CERT"}},aftermath:{package_id:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",published_at:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",version:1,config:{staked_sui_vault:"0xe498a8c07ec62200c519a0092eda233abdab879e8f332c11bdc1819eb7b12fbb",referral_vault:"0x8d357115058f22976cd01c5415116d9aca806d1ded37eecd75d87978f404e927",safe:"0x38710a6e0bd885c158e52ec7a42c8a9a1826c6696b626b4a5e2d1dcb15cfd9b7",validator_address:"0x9336c4c9d891e263cfac99adc397853a7392e5cf84cbd5df92207a57c7fbdadc",coin_type:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4::afsui::AFSUI"}}}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC",toCoin:"0x2::sui::SUI"},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xc4c250fa155fb27668650fd96aeaade6a3e7c669395f147b05747a5d9eb35795",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",config:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"}},cetus_integrate2:{package_id:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c",published_at:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c"},dca:{package_id:"0x484d2be08b58b8dc00a08c0ff8a2a9cd0542c4249ea2d5934ef9b15a10585d88",published_at:"0x484d2be08b58b8dc00a08c0ff8a2a9cd0542c4249ea2d5934ef9b15a10585d88",config:{admin_cap_id:"0xf54334a5cf41874d151cc610f7575f2b9ca8aab32103be3ed87f07f73388dcf2",global_config_id:"0xdac150723df0b51c1407ea942036d7f9d4e3b064ff35a4136dd31ffb397497e0",indexer_id:"0xacd0ab94883a8785c5258388618b6252f0c2e9384b23f91fc23f6c8ef44d445c",user_indexer_id:"0xc4ca05342746468383922650a3137bd3efc49d4c7a37431ed11a94c08dbfb677",in_coin_whitelist_id:"0xe72cdb8a0777bbcb5105b7045b90f5fdc8c7b946d48fd4cec0607d201a45a9b7",out_coin_whitelist_id:"0xbe67538ca0e4683fef704b374d034f5a4f79cdc756ea47cec82df55b37d4ff0a"}},burn:{package_id:"0xa30fd3413b56173930bc1c66defb0f9a0a6af407ac31dc6f27afae800d9a7cf9",published_at:"0xa30fd3413b56173930bc1c66defb0f9a0a6af407ac31dc6f27afae800d9a7cf9",manager_id:"0xd1214ad679070438292b78537cf7965202fd67afa26a73caac6a429b7e58c3b4",clmm_global_config:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",clmm_global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699"}}},pre_test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},token:{token_display:"0x481fb627bf18bc93c02c41ada3cc8b574744ef23c9d5e3136637ae3076e71562",config:{coin_registry_id:"0xe0b8cb7e56d465965cac5c5fe26cba558de35d88b9ec712c40f131f72c600151",pool_registry_id:"0xab40481f926e686455edf819b4c6485fbbf147a42cf3b95f72ed88c94577e67a",coin_list_owner:"0x1f6510ee7d8e2b39261bad012f0be0adbecfd75199450b7cbf28efab42dad083",pool_list_owner:"0x6de133b609ea815e1f6a4d50785b798b134f567ec1f4ee113ae73f6900b4012d"}},clmm:{clmm_display:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",clmm_router:"0x780e590a9354f5bcb429af4578c742aaa0ee20ab942bb2bbd161fbde4b64b08c",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},launchpad:{ido_display:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",ido_router:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",config_display:"0xc9b958492e4be73e0af4daa48101bc7ab2a7ab7c67585938ea3535929fc193fa",config:{pools_id:"0x7b96aea4d695996635265e2cc41d5c5f5c4cd70f36763e41b2abf2fa1eff866f",admin_cap_id:"0x342f4b272ff5abcaacc770a5972728b154a5e74835fa36b2340ad94895184acb",config_cap_id:"0xef2a813b8c1bbaf9470fff7df0fd0febebdc6e2bbd3d7bf9a917734af7893428",config_pools_id:"0x04b6e8de80f325bdf5963dc54f324c3319b471f2f93163ebc982bee0d9b38336"}},xcetus:{xcetus_display:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",xcetus_router:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",dividends_display:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",dividends_router:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",cetus_faucet:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49",dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5"}},hasCreatePool:!1,hasNotifi:!1}},testnet_external:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0xc7c40602f81eee198f472e14c87cb9c7186496064adba06cef1768c8b1785512",config:{coin_registry_id:"0xde9a5123749136ca9fe05b88777e322f2161fe4aa71e9c575d5e27a31b815d40",pool_registry_id:"0x7b7b399344838363ec96611f133c77b98042404559e326fd289885b88848a3c5",coin_list_owner:"0xc93e168a9361b5443fef27dbbb95a023337c6bfd082fdd920d658f4f9147d801",pool_list_owner:"0x36d796de9529007373fd2e34311511a8ca4eaef2bf7ea65f65ab68a1bc1de092"}},clmm:{clmm_display:"0x837dddad95c6741474cde3e414a2eebccbeae81d0b378f193d00381bdaf0da62",clmm_router:"0x32ba8c0298964e26161b3b44375ac39eeab6b29207e00c5f44368426096eb902",config:{pools_id:"0xc8407fc5dfec8d7b7014ee4d244dbe4eb456bfa6a7878e88c9d4bc947b2c2d87",global_config_id:"0x43e2925f7c5bed04b612cc66c53a850e280a46704ce12cd2f25420b537e23f9d",global_vault_id:"0x435c9725c4026206002a5a4004762316a53891f21a10c695311074482e52757e"}},launchpad:{ido_display:"",ido_router:"",lock_display:"",lock_router:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:"",lock_manager_id:""}},xcetus:{xcetus_display:"",xcetus_router:"",dividends_display:"",dividends_router:"",cetus_faucet:"",config:{xcetus_manager_id:"",lock_manager_id:"",dividend_manager_id:""}},hasCreatePool:!0,hasNotifi:!1}},local:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"http://192.168.1.41:9000",faucetURL:"http://192.168.1.41:9123/gas",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x61353a797a3d7f9c5522641bf824d730272260bcf66c7fcaf36a50243418caca",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"",config:{coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""}},clmm:{clmm_display:"0x33e0056fdbd9444c20302ce4141eaf5ec66fe864b62d8c0e3ee3bb1d138ee445",clmm_router:"0x306efa18b1a70af5007aaccd3b228e4f97f5596bf20c3a2d7b6321dfe8e30765",config:{pools_id:"0xae24565ffac1eb9f2fcb03b1dc21c21d1ce2a992d13a1a58e51d28293249d21c",global_config_id:"0xb8bd0870a43a75c55690a8ffbc13682ae7e0a8254348524963657474342c20b4",global_vault_id:"0x639c2d2d068df99602a9ef014b000df26b0312c07cb06065992cac911e1c376d"}},launchpad:{ido_display:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",ido_router:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",lock_display:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",lock_router:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",config:{pools_id:"0x1b3a62d143ac08dee37670eea58e714ab7cd501a396060bd2caf7a77fee88dfa",admin_cap_id:"0x0cb7daf2484c38e4a183813b8ad51b6ed664d135b7897e72be095768c90df911",config_cap_id:"0x40f0cee72c6e86d5a7b0e013a18cad8bf567bb70075b4a0f1c63eab8953a3dfd",lock_manager_id:"0x23954bf7d5c7880b50a369ee439a11ab771b7e0079a042645c4920d5e618b898"}},xwhale:{xwhale_display:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",xwhale_router:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",dividends_display:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",dividends_router:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",booster_display:"",booster_router:"",whale_faucet:"0xb0845bcf2f985e6ea5b401218598212e11f915a0c4d7afd1ed6e04b83e7d6310",config:{xwhale_manager_id:"0x46b2a60ee784180534ea2a6568ca510b488ea190f822cab8a9d38fb01b8e6421",lock_manager_id:"0x253e34da0542134e39b3c5dade1f5437d1b6ef6e90adfaa014186b456b6d7ffd",dividend_manager_id:"0xced885ada26d894f30efc236303caa500c994a25db5b18ee01e7664729cb983c"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},dev:{Aptos:{liquidswapDeployer:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37",faucetObjectId:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29",fetcher:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",clmmIntegrate:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",TokenDeployer:"0xc50b243a7180dfad9afd7dff8451c7b16cf27a92b6816f521b1f3c6d0c5397e3",IntegerMate:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.devnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"devnet",networkTip:"Devnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{liquidswapDeployer:"0x2b8f54bf724fa62789299569210d6c94758dd636",globalPauseStatusObjectId:"0x877cd08c02a2faa110a020f4f203304b114d76d2",faucetObjectId:"0x61df0e8caaf7b241d137fdc97906e3ca6bd68cca",rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",ammSite:"https://cetus-pre.netlify.app",api:"https://api.devcetus.zone",currentChainTokenAddress:"0x2::sui::SUI",hasCreatePool:!0,hasNotifi:!1}}},E_={...xl[oc]},ii=e=>K.isDecimal(e)?e:new K(e===void 0?0:e),Al=(e,t,i=!0)=>{if(`${e}`=="0")return!parseFloat(t)||!i?0:"0.".padEnd(t+2,"0");if(!e)return"--";const n=parseFloat(e),r=e.toString(),o=n<0;let s=r;if(r.toLowerCase().includes("e")){const a=r.match(/(\d+?)(?:\.(\d*))?e([+-])(\d+)/),c=a[1],d=a[2],l=a[3],h=a[4];let _="",y=d?d.substr(h):"";if(y&&(y=`.${y}`),l!=="-"){for(let k=0;k<h;k+=1){const O=d[k]||"0";_+=O}s=c+_+y}else{let k="0";for(let O=0;O<h;O+=1)_=(c[c.length-O-1]||"0")+_;c.length>h&&(k=c.substr(0,c.length-h)),s=`${k}.${_}${d}`}}if(t&&i){let a=`${s.split(".")[0]}.`;const c=s.split(".")[1]||"";for(let d=0;d<t;d+=1)a+=c[d]||"0";s=a}if(s.length>14){const a=s.split(".");a[0].length>14?s=`${a[0].slice(0,14)}+`:(s=s.slice(0,13),s.indexOf(".")===12&&(s=s.slice(0,12)))}return`${o?"-":""}${s}`};function B_(e,t){if(t=t>-1?t:0,`${e}`=="0")return parseFloat(t)?"0.".padEnd(t+2,"0"):"0";if(!e)return"--";let i=!1;parseFloat(e)<0&&(i=!0);const n=`${Math.abs(parseFloat(e))}`;if(n==="NaN")return"--";let r=n;if(n.toLowerCase().includes("e")){if(n.toLowerCase().includes("+"))return Al(n,t);const s=n.toLowerCase().split("e");let a=s[0];const c=Math.abs(parseFloat(s[1]));let d="",l=a.length,h;for(s[0].split(".")[1]&&(a=s[0].split(".")[0]+s[0].split(".")[1],l=s[0].split(".")[0].length),h=0;h<c-l;h+=1)d+="0";r=`0.${d}${a}`}if(`${t}`!="0"&&!t||`${parseFloat(e)}`=="NaN")return(i?"-":"")+r;const o=r.split(".");if(t===0)r=parseInt(r,10);else if(t>0&&o[1])if(o[1].length>t)if(o[1].includes("999999999")){const s=parseFloat(r).toFixed(t+1);r=s.slice(0,s.length-1)}else r=`${o[0]}.${o[1].slice(0,t)}`;else r=parseFloat(r).toFixed(t);else r=parseFloat(r).toFixed(t);if(r.length>=14&&r.includes(".")){const s=r.split(".");s[0].length>14?r=`${s[0].slice(0,14)}+`:(r=r.slice(0,13),r.indexOf(".")===12&&(r=r.slice(0,12)))}return(i?"-":"")+r}function Sl(e,t){const i=String(e);if(!i.includes("."))return i;const n=i.split("."),r=n[0],o=n[1].slice(0,t);return $i(o)?`${r}.${$i(o)}`:`${r}`}function $i(e){return e.replace(/(\s|0|\.)+$/g,"")}function sc(e,t){if(typeof e=="number"&&isNaN(e)||!Number(e))return 0;if(!String(e).includes("."))return e;const i=String(e).split(".");if(i[1]&&i[1].length<=t&&Number(i[1]))return e;const n=Math.pow(10,-t);if(Number(e)<n)return i[1]&&$i(i[1])?i[0]+"."+$i(i[1]):i[0];const r=Sl(e,t),o=String(r).split(".");return r==="--"?"--":o[1]&&$i(String(o[1]))?o[0]+"."+$i(String(o[1])):o[0]}const hr=(e,t=0)=>isNaN(e)||!e?e:(e=String(e),Number(e)==0?0:!isNaN(t)&&t?(t===0&&(e=e.split(".")[0]),e.replace(/(\d+)(\.\d+)?/,(i,n,r)=>n.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+(r?r.slice(0,t+1):""))):e.replace(/^\d+/,i=>i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")));function Tl(e,t){const n=String(e).split(".");let r=!0;if(!n[1]||n[1]&&n[1].length<=t||n[0]!=="0")return!1;if(n&&n[1]&&n[0]==="0"&&n[1][n[1].length-1]==="1")for(let o=0;o<n[1].length-1;o++)n[1]!=="0"&&(r=!1);else r=!1;return r}function Ol(e){const t=String(e);if(!t.includes("."))return e;const i=t.split("."),n=i[0],r=$i(i[1]);return r&&`${n}.${r}`}const pr=(e,t,i=2)=>{if(e==""||typeof e=="string"&&e.indexOf("+")>-1)return e;if(isNaN(e)||Number(e)==0)return"0";const n=sc(e,t),r=Math.pow(10,-t);return Number(n)&&Math.abs(Number(n))<=r||Tl(n,t)?pr(e,t+i):Ol(n)};function D_(e){if(e){const t=e.toString(),i=t.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return t.replace(i,"$1,")}}function N_(e){return!e||Object.keys(e).length===0}function yt(e){return e.toString().length===1?"0"+e:e}function oa(e){const t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return t+"-"+yt(i)+"-"+yt(n)}function Il(e){const t=e.getMonth()+1,i=e.getDate();return yt(t)+"/"+yt(i)}function sa(e){const t=e.getHours(),i=e.getMinutes(),n=e.getSeconds();return yt(t)+":"+yt(i)+":"+yt(n)}function Pl(e){const t=e.getHours(),i=e.getMinutes();return yt(t)+":"+yt(i)}const R_=(e,t)=>{if(e){const i=new Date(Number(e));if(!t)return oa(i)+" "+sa(i);switch(t){case"HMS":return sa(i);case"YMD":return oa(i);case"MD":return Il(i);case"HM":return Pl(i)}}},$_=(e,t)=>isNaN(e)||!e?e:Number(e)<1e-6&&Number(e)!==0?"<0.000001":hr(sc(String(e),t),t);function q_(e){const t=e.replace("%","");return Number(t)}function F_(e,t=1){return!e||isNaN(Number(e))?e:Math.abs(String(e))<1e3?pr(e,t):pr(Number(e)/1e3,t)+"k"}const L_=async e=>new Promise(t=>{setTimeout(()=>{t(1)},e)}),U_=e=>e>=1e9?(e/1e9).toFixed(1)+"b":e>=1e6?(e/1e6).toFixed(1)+"m":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();function K_(e){const t=Number(pr(e,2));return t>=1e9?(t/1e9).toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"b":t>=1e6?(t/1e6).toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"m":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const V_=(e,t)=>e>=1e9?(e/1e9).toFixed(t)+"b":e>=1e6?(e/1e6).toFixed(t)+"m":e>=1e3?(e/1e3).toFixed(t)+"k":e.toString(),z_=e=>{const t=Math.floor(e/1e3),i=Math.floor(new Date().getTime()/1e3),n=60,r=60*n,o=24*r,s=30*o,a=365*o,c=i-t;if(c<n)return"recently";if(c<r){const d=Math.floor(c/n);return d==1?`${d} minute ago`:`${d} minutes ago`}else if(c<o){const d=Math.floor(c/r);return d==1?`${d} hour ago`:`${d} hours ago`}else if(c<s){const d=Math.floor(c/o);return d==1?`${d} day ago`:`${d} days ago`}else if(c<a){const d=Math.floor(c/s);return d==1?`${d} mouth ago`:`${d} mouths ago`}else{const d=Math.floor(c/a);return d==1?`${d} year ago`:`${d} years ago`}},G_=(e,t)=>{if(e){const i=new Date(e);if(!t)return lo(i)+" "+aa(i);switch(t){case"HMS":return aa(i);case"YMD":return lo(i);case"MD":return jl(i);case"HM":return ca(i);case"YMDHM":return lo(i)+" "+ca(i);default:return"--"}}};function lo(e){const t=e.getUTCFullYear(),i=e.getUTCMonth()+1,n=e.getUTCDate();return t+"-"+yt(i)+"-"+yt(n)}function jl(e){const t=e.getUTCMonth()+1,i=e.getUTCDate();return yt(t)+"/"+yt(i)}function aa(e){const t=e.getUTCHours(),i=e.getUTCMinutes(),n=e.getUTCSeconds();return yt(t)+":"+yt(i)+":"+yt(n)}function ca(e){const t=e.getUTCHours(),i=e.getUTCMinutes();return yt(t)+":"+yt(i)}const Ai=(e,t)=>{try{return ii(e).toDP(t,K.ROUND_DOWN).toString()}catch{return e}},W_=(e,t)=>ii(e).toDP(t,K.ROUND_HALF_DOWN).toString(),H_=(e,t,i,n,r=!0)=>{if(e===void 0||e==="--")return"--";const o=Ai(e,t);return!i&&Number(e)>0&&Number(o)<.01?`<${r?"$":""}0.01`:n?`${r?"$":""}${o}`:`${r?"$":""}${hr(o)}`};function X_(e){var r;const t=Wd();console.log(" ~ file: index.ts:587 ~ getUrlParam ~ route:",t);const i=(r=t==null?void 0:t.params)==null?void 0:r.id,n=i==null?void 0:i.split("-");return n&&n.length>0?decodeURI(e=="from"?n[0]?n[0]:"":n[1]?n[1]:""):null}function J_(e){return e=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":e}function Z_(e){return e=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e}function Ml(e){let t=0;for(;t<e.length;){if(ii(e[t]).gt(0))return t+1;t++}return 0}const Q_=(e,t,i=!0)=>{if(e==="")return"";if(e!=="0"&&!e||ii(e).equals(0))return"0";if(t!==void 0){const c=Ai(e,t);if(!ii(c).equals(0))return i?c:hr(c)}const n=ii(e).toString(),r=n.split("."),o=r[0],s=r[1];let a;if(ii(o).gt(0))!s||ii(o.length).gte(9)?a=Ai(n,0):ii(o.length).gte(4)?a=Ai(n,2):a=Ai(n,4);else{Ai(n,6);const c=Ml(s);if(c<6)a=Ai(n,c+6);else{if(c>20)return"0";a=Ai(n,9+(c-6))}}return i||ii(o).lt(1)?a:hr(a)},Y_=(e,t)=>e?e.substring(0,t||6)+"..."+e.substring(e.length-(t||4)):"";function em(e){const s=Math.floor(e/2592e3);e%=2592e3;const a=Math.floor(e/604800);e%=604800;const c=Math.floor(e/86400);e%=86400;const d=Math.floor(e/3600);e%=3600;const l=Math.floor(e/60);e%=60;const h=[];return s>0&&h.push(`${s} Month${s>1?"s":""}`),a>0&&h.push(`${a} Week${a>1?"s":""}`),c>0&&h.push(`${c} Day${c>1?"s":""}`),d>0&&h.push(`${d} Hour${d>1?"s":""}`),l>0&&h.push(`${l} Minute${l>1?"s":""}`),h.join(" ")}function xn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function El(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Or(e,...t){if(!El(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function tm(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");xn(e.outputLen),xn(e.blockLen)}function da(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Bl(e,t){Or(e);const i=t.outputLen;if(e.length<i)throw new Error(`digestInto() expects output buffer of length at least ${i}`)}const uo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _r=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),im=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),nm=(e,t)=>e<<32-t|e>>>t,Ei=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,ac=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,hi=Ei?e=>e:e=>ac(e);function Gi(e){for(let t=0;t<e.length;t++)e[t]=ac(e[t])}const Dl=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function rm(e){Or(e);let t="";for(let i=0;i<e.length;i++)t+=Dl[e[i]];return t}const di={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function la(e){if(e>=di._0&&e<=di._9)return e-di._0;if(e>=di._A&&e<=di._F)return e-(di._A-10);if(e>=di._a&&e<=di._f)return e-(di._a-10)}function om(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,i=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(i);for(let r=0,o=0;r<i;r++,o+=2){const s=la(e.charCodeAt(o)),a=la(e.charCodeAt(o+1));if(s===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[r]=s*16+a}return n}function Nl(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function nn(e){return typeof e=="string"&&(e=Nl(e)),Or(e),e}function sm(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Or(r),t+=r.length}const i=new Uint8Array(t);for(let n=0,r=0;n<e.length;n++){const o=e[n];i.set(o,r),r+=o.length}return i}class Rl{clone(){return this._cloneInto()}}const $l={}.toString;function am(e,t){if(t!==void 0&&$l.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function cm(e){const t=n=>e().update(nn(n)).digest(),i=e();return t.outputLen=i.outputLen,t.blockLen=i.blockLen,t.create=()=>e(),t}function ql(e){const t=(n,r)=>e(r).update(nn(n)).digest(),i=e({});return t.outputLen=i.outputLen,t.blockLen=i.blockLen,t.create=n=>e(n),t}function dm(e=32){if(uo&&typeof uo.getRandomValues=="function")return uo.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Fl=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class Ll extends Rl{constructor(t,i,n={},r,o,s){if(super(),this.blockLen=t,this.outputLen=i,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,xn(t),xn(i),xn(r),i<0||i>r)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>r))throw new Error(`key must be up 1..${r} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==s)throw new Error(`personalization must be ${s} byte long or undefined`);this.buffer32=_r(this.buffer=new Uint8Array(t))}update(t){da(this);const{blockLen:i,buffer:n,buffer32:r}=this;t=nn(t);const o=t.length,s=t.byteOffset,a=t.buffer;for(let c=0;c<o;){this.pos===i&&(Ei||Gi(r),this.compress(r,0,!1),Ei||Gi(r),this.pos=0);const d=Math.min(i-this.pos,o-c),l=s+c;if(d===i&&!(l%4)&&c+d<o){const h=new Uint32Array(a,l,Math.floor((o-c)/4));Ei||Gi(h);for(let _=0;c+i<o;_+=r.length,c+=i)this.length+=i,this.compress(h,_,!1);Ei||Gi(h);continue}n.set(t.subarray(c,c+d),this.pos),this.pos+=d,this.length+=d,c+=d}return this}digestInto(t){da(this),Bl(t,this);const{pos:i,buffer32:n}=this;this.finished=!0,this.buffer.subarray(i).fill(0),Ei||Gi(n),this.compress(n,0,!0),Ei||Gi(n);const r=_r(t);this.get().forEach((o,s)=>r[s]=hi(o))}digest(){const{buffer:t,outputLen:i}=this;this.digestInto(t);const n=t.slice(0,i);return this.destroy(),n}_cloneInto(t){const{buffer:i,length:n,finished:r,destroyed:o,outputLen:s,pos:a}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=n,t.finished=r,t.destroyed=o,t.outputLen=s,t.buffer.set(i),t.pos=a,t}}const Hn=BigInt(2**32-1),$o=BigInt(32);function cc(e,t=!1){return t?{h:Number(e&Hn),l:Number(e>>$o&Hn)}:{h:Number(e>>$o&Hn)|0,l:Number(e&Hn)|0}}function Ul(e,t=!1){let i=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:o,l:s}=cc(e[r],t);[i[r],n[r]]=[o,s]}return[i,n]}const Kl=(e,t)=>BigInt(e>>>0)<<$o|BigInt(t>>>0),Vl=(e,t,i)=>e>>>i,zl=(e,t,i)=>e<<32-i|t>>>i,Gl=(e,t,i)=>e>>>i|t<<32-i,Wl=(e,t,i)=>e<<32-i|t>>>i,Hl=(e,t,i)=>e<<64-i|t>>>i-32,Xl=(e,t,i)=>e>>>i-32|t<<64-i,Jl=(e,t)=>t,Zl=(e,t)=>e,Ql=(e,t,i)=>e<<i|t>>>32-i,Yl=(e,t,i)=>t<<i|e>>>32-i,eu=(e,t,i)=>t<<i-32|e>>>64-i,tu=(e,t,i)=>e<<i-32|t>>>64-i;function iu(e,t,i,n){const r=(t>>>0)+(n>>>0);return{h:e+i+(r/2**32|0)|0,l:r|0}}const nu=(e,t,i)=>(e>>>0)+(t>>>0)+(i>>>0),ru=(e,t,i,n)=>t+i+n+(e/2**32|0)|0,ou=(e,t,i,n)=>(e>>>0)+(t>>>0)+(i>>>0)+(n>>>0),su=(e,t,i,n,r)=>t+i+n+r+(e/2**32|0)|0,au=(e,t,i,n,r)=>(e>>>0)+(t>>>0)+(i>>>0)+(n>>>0)+(r>>>0),cu=(e,t,i,n,r,o)=>t+i+n+r+o+(e/2**32|0)|0,du={fromBig:cc,split:Ul,toBig:Kl,shrSH:Vl,shrSL:zl,rotrSH:Gl,rotrSL:Wl,rotrBH:Hl,rotrBL:Xl,rotr32H:Jl,rotr32L:Zl,rotlSH:Ql,rotlSL:Yl,rotlBH:eu,rotlBL:tu,add:iu,add3L:nu,add3H:ru,add4L:ou,add4H:su,add5H:cu,add5L:au},Pt=du,mt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),V=new Uint32Array(32);function wi(e,t,i,n,r,o){const s=r[o],a=r[o+1];let c=V[2*e],d=V[2*e+1],l=V[2*t],h=V[2*t+1],_=V[2*i],y=V[2*i+1],k=V[2*n],O=V[2*n+1],P=Pt.add3L(c,l,s);d=Pt.add3H(P,d,h,a),c=P|0,{Dh:O,Dl:k}={Dh:O^d,Dl:k^c},{Dh:O,Dl:k}={Dh:Pt.rotr32H(O,k),Dl:Pt.rotr32L(O,k)},{h:y,l:_}=Pt.add(y,_,O,k),{Bh:h,Bl:l}={Bh:h^y,Bl:l^_},{Bh:h,Bl:l}={Bh:Pt.rotrSH(h,l,24),Bl:Pt.rotrSL(h,l,24)},V[2*e]=c,V[2*e+1]=d,V[2*t]=l,V[2*t+1]=h,V[2*i]=_,V[2*i+1]=y,V[2*n]=k,V[2*n+1]=O}function vi(e,t,i,n,r,o){const s=r[o],a=r[o+1];let c=V[2*e],d=V[2*e+1],l=V[2*t],h=V[2*t+1],_=V[2*i],y=V[2*i+1],k=V[2*n],O=V[2*n+1],P=Pt.add3L(c,l,s);d=Pt.add3H(P,d,h,a),c=P|0,{Dh:O,Dl:k}={Dh:O^d,Dl:k^c},{Dh:O,Dl:k}={Dh:Pt.rotrSH(O,k,16),Dl:Pt.rotrSL(O,k,16)},{h:y,l:_}=Pt.add(y,_,O,k),{Bh:h,Bl:l}={Bh:h^y,Bl:l^_},{Bh:h,Bl:l}={Bh:Pt.rotrBH(h,l,63),Bl:Pt.rotrBL(h,l,63)},V[2*e]=c,V[2*e+1]=d,V[2*t]=l,V[2*t+1]=h,V[2*i]=_,V[2*i+1]=y,V[2*n]=k,V[2*n+1]=O}class lu extends Ll{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=mt[0]|0,this.v0h=mt[1]|0,this.v1l=mt[2]|0,this.v1h=mt[3]|0,this.v2l=mt[4]|0,this.v2h=mt[5]|0,this.v3l=mt[6]|0,this.v3h=mt[7]|0,this.v4l=mt[8]|0,this.v4h=mt[9]|0,this.v5l=mt[10]|0,this.v5h=mt[11]|0,this.v6l=mt[12]|0,this.v6h=mt[13]|0,this.v7l=mt[14]|0,this.v7h=mt[15]|0;const i=t.key?t.key.length:0;if(this.v0l^=this.outputLen|i<<8|65536|1<<24,t.salt){const n=_r(nn(t.salt));this.v4l^=hi(n[0]),this.v4h^=hi(n[1]),this.v5l^=hi(n[2]),this.v5h^=hi(n[3])}if(t.personalization){const n=_r(nn(t.personalization));this.v6l^=hi(n[0]),this.v6h^=hi(n[1]),this.v7l^=hi(n[2]),this.v7h^=hi(n[3])}if(t.key){const n=new Uint8Array(this.blockLen);n.set(nn(t.key)),this.update(n)}}get(){let{v0l:t,v0h:i,v1l:n,v1h:r,v2l:o,v2h:s,v3l:a,v3h:c,v4l:d,v4h:l,v5l:h,v5h:_,v6l:y,v6h:k,v7l:O,v7h:P}=this;return[t,i,n,r,o,s,a,c,d,l,h,_,y,k,O,P]}set(t,i,n,r,o,s,a,c,d,l,h,_,y,k,O,P){this.v0l=t|0,this.v0h=i|0,this.v1l=n|0,this.v1h=r|0,this.v2l=o|0,this.v2h=s|0,this.v3l=a|0,this.v3h=c|0,this.v4l=d|0,this.v4h=l|0,this.v5l=h|0,this.v5h=_|0,this.v6l=y|0,this.v6h=k|0,this.v7l=O|0,this.v7h=P|0}compress(t,i,n){this.get().forEach((c,d)=>V[d]=c),V.set(mt,16);let{h:r,l:o}=Pt.fromBig(BigInt(this.length));V[24]=mt[8]^o,V[25]=mt[9]^r,n&&(V[28]=~V[28],V[29]=~V[29]);let s=0;const a=Fl;for(let c=0;c<12;c++)wi(0,4,8,12,t,i+2*a[s++]),vi(0,4,8,12,t,i+2*a[s++]),wi(1,5,9,13,t,i+2*a[s++]),vi(1,5,9,13,t,i+2*a[s++]),wi(2,6,10,14,t,i+2*a[s++]),vi(2,6,10,14,t,i+2*a[s++]),wi(3,7,11,15,t,i+2*a[s++]),vi(3,7,11,15,t,i+2*a[s++]),wi(0,5,10,15,t,i+2*a[s++]),vi(0,5,10,15,t,i+2*a[s++]),wi(1,6,11,12,t,i+2*a[s++]),vi(1,6,11,12,t,i+2*a[s++]),wi(2,7,8,13,t,i+2*a[s++]),vi(2,7,8,13,t,i+2*a[s++]),wi(3,4,9,14,t,i+2*a[s++]),vi(3,4,9,14,t,i+2*a[s++]);this.v0l^=V[0]^V[16],this.v0h^=V[1]^V[17],this.v1l^=V[2]^V[18],this.v1h^=V[3]^V[19],this.v2l^=V[4]^V[20],this.v2h^=V[5]^V[21],this.v3l^=V[6]^V[22],this.v3h^=V[7]^V[23],this.v4l^=V[8]^V[24],this.v4h^=V[9]^V[25],this.v5l^=V[10]^V[26],this.v5h^=V[11]^V[27],this.v6l^=V[12]^V[28],this.v6h^=V[13]^V[29],this.v7l^=V[14]^V[30],this.v7h^=V[15]^V[31],V.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const uu=ql(e=>new lu(e));function fu(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let d=0;d<t.length;d++)t[d]=255;for(let d=0;d<e.length;d++){const l=e.charAt(d),h=l.charCodeAt(0);if(t[h]!==255)throw new TypeError(l+" is ambiguous");t[h]=d}const i=e.length,n=e.charAt(0),r=Math.log(i)/Math.log(256),o=Math.log(256)/Math.log(i);function s(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let l=0,h=0,_=0;const y=d.length;for(;_!==y&&d[_]===0;)_++,l++;const k=(y-_)*o+1>>>0,O=new Uint8Array(k);for(;_!==y;){let j=d[_],B=0;for(let q=k-1;(j!==0||B<h)&&q!==-1;q--,B++)j+=256*O[q]>>>0,O[q]=j%i>>>0,j=j/i>>>0;if(j!==0)throw new Error("Non-zero carry");h=B,_++}let P=k-h;for(;P!==k&&O[P]===0;)P++;let M=n.repeat(l);for(;P<k;++P)M+=e.charAt(O[P]);return M}function a(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let l=0,h=0,_=0;for(;d[l]===n;)h++,l++;const y=(d.length-l)*r+1>>>0,k=new Uint8Array(y);for(;d[l];){let j=t[d.charCodeAt(l)];if(j===255)return;let B=0;for(let q=y-1;(j!==0||B<_)&&q!==-1;q--,B++)j+=i*k[q]>>>0,k[q]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");_=B,l++}let O=y-_;for(;O!==y&&k[O]===0;)O++;const P=new Uint8Array(h+(y-O));let M=h;for(;O!==y;)P[M++]=k[O++];return P}function c(d){const l=a(d);if(l)return l;throw new Error("Non-base"+i+" character")}return{encode:s,decodeUnsafe:a,decode:c}}var hu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const dc=fu(hu),Ir=e=>dc.encode(e),Dn=e=>dc.decode(e);function ai(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const fo=8192;function Tt(e){if(e.length<fo)return btoa(String.fromCharCode(...e));let t="";for(var i=0;i<e.length;i+=fo){const n=e.slice(i,i+fo);t+=String.fromCharCode(...n)}return btoa(t)}function lc(e){var r;const t=e.startsWith("0x")?e.slice(2):e,n=((r=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:r.map(o=>parseInt(o,16)))??[];return Uint8Array.from(n)}function Nn(e){return e.reduce((t,i)=>t+i.toString(16).padStart(2,"0"),"")}function as(e){let t=[],i=0;if(e===0)return[0];for(;e>0;)t[i]=e&127,(e>>=7)&&(t[i]|=128),i+=1;return t}function pu(e){let t=0,i=0,n=0;for(;;){let r=e[n];if(n+=1,t|=(r&127)<<i,!(r&128))break;i+=7}return{value:t,length:n}}class _u{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),n=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let t=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let t=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(t){let i=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,i,t);return this.shift(t),n}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,t),{value:n,length:r}=pu(i);return this.shift(r),n}readVec(t){let i=this.readULEB(),n=[];for(let r=0;r<i;r++)n.push(t(this,r,i));return n}}function mu(e,t){switch(t){case"base58":return Ir(e);case"base64":return Tt(e);case"hex":return Nn(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function uc(e,t=["<",">"]){const[i,n]=t,r=[];let o="",s=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===i&&s++,c===n&&s--,s===0&&c===","){r.push(o.trim()),o="";continue}o+=c}return r.push(o.trim()),r}class bu{constructor({initialSize:t=1024,maxSize:i=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=i,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const i=this.bytePosition+t;if(i>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(i>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${i}`);this.size=n;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return ho(BigInt(t),8).forEach(i=>this.write8(i)),this}write128(t){return ho(BigInt(t),16).forEach(i=>this.write8(i)),this}write256(t){return ho(BigInt(t),32).forEach(i=>this.write8(i)),this}writeULEB(t){return as(t).forEach(i=>this.write8(i)),this}writeVec(t,i){return this.writeULEB(t.length),Array.from(t).forEach((n,r)=>i(this,n,r,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return mu(this.toBytes(),t)}}function ho(e,t){let i=new Uint8Array(t),n=0;for(;e>0;)i[n]=Number(e%BigInt(256)),e=e/BigInt(256),n+=1;return i}var fc=e=>{throw TypeError(e)},hc=(e,t,i)=>t.has(e)||fc("Cannot "+i),Gt=(e,t,i)=>(hc(e,t,"read from private field"),i?i.call(e):t.get(e)),mr=(e,t,i)=>t.has(e)?fc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),br=(e,t,i,n)=>(hc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Ji,wn,sr,Si;const gu=class pc{constructor(t){mr(this,Ji),mr(this,wn),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),br(this,Ji,t.write),br(this,wn,t.serialize??((i,n)=>{const r=new bu({initialSize:this.serializedSize(i)??void 0,...n});return Gt(this,Ji).call(this,i,r),r.toBytes()})),this.validate=t.validate??(()=>{})}write(t,i){this.validate(t),Gt(this,Ji).call(this,t,i)}serialize(t,i){return this.validate(t),new yu(this,Gt(this,wn).call(this,t,i))}parse(t){const i=new _u(t);return this.read(i)}fromHex(t){return this.parse(lc(t))}fromBase58(t){return this.parse(Dn(t))}fromBase64(t){return this.parse(ai(t))}transform({name:t,input:i,output:n,validate:r}){return new pc({name:t??this.name,read:o=>n(this.read(o)),write:(o,s)=>Gt(this,Ji).call(this,i(o),s),serializedSize:o=>this.serializedSize(i(o)),serialize:(o,s)=>Gt(this,wn).call(this,i(o),s),validate:o=>{r==null||r(o),this.validate(i(o))}})}};Ji=new WeakMap;wn=new WeakMap;let bi=gu;const _c=Symbol.for("@mysten/serialized-bcs");function cs(e){return!!e&&typeof e=="object"&&e[_c]===!0}class yu{constructor(t,i){mr(this,sr),mr(this,Si),br(this,sr,t),br(this,Si,i)}get[_c](){return!0}toBytes(){return Gt(this,Si)}toHex(){return Nn(Gt(this,Si))}toBase64(){return Tt(Gt(this,Si))}toBase58(){return Ir(Gt(this,Si))}parse(){return Gt(this,sr).parse(Gt(this,Si))}}sr=new WeakMap;Si=new WeakMap;function gr({size:e,...t}){return new bi({...t,serializedSize:()=>e})}function po({readMethod:e,writeMethod:t,...i}){return gr({...i,read:n=>n[e](),write:(n,r)=>r[t](n),validate:n=>{var r;if(n<0||n>i.maxValue)throw new TypeError(`Invalid ${i.name} value: ${n}. Expected value in range 0-${i.maxValue}`);(r=i.validate)==null||r.call(i,n)}})}function _o({readMethod:e,writeMethod:t,...i}){return gr({...i,read:n=>n[e](),write:(n,r)=>r[t](BigInt(n)),validate:n=>{var o;const r=BigInt(n);if(r<0||r>i.maxValue)throw new TypeError(`Invalid ${i.name} value: ${r}. Expected value in range 0-${i.maxValue}`);(o=i.validate)==null||o.call(i,r)}})}function wu({serialize:e,...t}){const i=new bi({...t,serialize:e,write:(n,r)=>{for(const o of i.serialize(n).toBytes())r.write8(o)}});return i}function vu({toBytes:e,fromBytes:t,...i}){return new bi({...i,read:n=>{const r=n.readULEB(),o=n.readBytes(r);return t(o)},write:(n,r)=>{const o=e(n);r.writeULEB(o.length);for(let s=0;s<o.length;s++)r.write8(o[s])},serialize:n=>{const r=e(n),o=as(r.length),s=new Uint8Array(o.length+r.length);return s.set(o,0),s.set(r,o.length),s},validate:n=>{var r;if(typeof n!="string")throw new TypeError(`Invalid ${i.name} value: ${n}. Expected string`);(r=i.validate)==null||r.call(i,n)}})}function ku(e){let t=null;function i(){return t||(t=e()),t}return new bi({name:"lazy",read:n=>i().read(n),serializedSize:n=>i().serializedSize(n),write:(n,r)=>i().write(n,r),serialize:(n,r)=>i().serialize(n,r).toBytes()})}const S={u8(e){return po({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return po({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return po({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return _o({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return _o({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return _o({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return gr({name:"bool",size:1,read:t=>t.read8()===1,write:(t,i)=>i.write8(t?1:0),...e,validate:t=>{var i;if((i=e==null?void 0:e.validate)==null||i.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return wu({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(as(t)),...e})},bytes(e,t){return gr({name:`bytes[${e}]`,size:e,read:i=>i.readBytes(e),write:(i,n)=>{for(let r=0;r<e;r++)n.write8(i[r]??0)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e)throw new TypeError(`Expected array of length ${e}, found ${i.length}`)}})},string(e){return vu({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,i){return new bi({name:`${t.name}[${e}]`,read:n=>{const r=new Array(e);for(let o=0;o<e;o++)r[o]=t.read(n);return r},write:(n,r)=>{for(const o of n)t.write(o,r)},...i,validate:n=>{var r;if((r=i==null?void 0:i.validate)==null||r.call(i,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},option(e){return S.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>t.$kind==="Some"?t.Some:null})},vector(e,t){return new bi({name:`vector<${e.name}>`,read:i=>{const n=i.readULEB(),r=new Array(n);for(let o=0;o<n;o++)r[o]=e.read(i);return r},write:(i,n)=>{n.writeULEB(i.length);for(const r of i)e.write(r,n)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`)}})},tuple(e,t){return new bi({name:`(${e.map(i=>i.name).join(", ")})`,serializedSize:i=>{let n=0;for(let r=0;r<e.length;r++){const o=e[r].serializedSize(i[r]);if(o==null)return null;n+=o}return n},read:i=>{const n=[];for(const r of e)n.push(r.read(i));return n},write:(i,n)=>{for(let r=0;r<e.length;r++)e[r].write(i[r],n)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!Array.isArray(i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${i.length}`)}})},struct(e,t,i){const n=Object.entries(t);return new bi({name:e,serializedSize:r=>{let o=0;for(const[s,a]of n){const c=a.serializedSize(r[s]);if(c==null)return null;o+=c}return o},read:r=>{const o={};for(const[s,a]of n)o[s]=a.read(r);return o},write:(r,o)=>{for(const[s,a]of n)a.write(r[s],o)},...i,validate:r=>{var o;if((o=i==null?void 0:i.validate)==null||o.call(i,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`)}})},enum(e,t,i){const n=Object.entries(t);return new bi({name:e,read:r=>{const o=r.readULEB(),s=n[o];if(!s)throw new TypeError(`Unknown value ${o} for enum ${e}`);const[a,c]=s;return{[a]:(c==null?void 0:c.read(r))??!0,$kind:a}},write:(r,o)=>{const[s,a]=Object.entries(r).filter(([c])=>Object.hasOwn(t,c))[0];for(let c=0;c<n.length;c++){const[d,l]=n[c];if(d===s){o.writeULEB(c),l==null||l.write(a,o);return}}},...i,validate:r=>{var a;if((a=i==null?void 0:i.validate)==null||a.call(i,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`);const o=Object.keys(r).filter(c=>r[c]!==void 0&&Object.hasOwn(t,c));if(o.length!==1)throw new TypeError(`Expected object with one key, but found ${o.length} for type ${e}}`);const[s]=o;if(!Object.hasOwn(t,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map(e,t){return S.vector(S.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:i=>[...i.entries()],output:i=>{const n=new Map;for(const[r,o]of i)n.set(r,o);return n}})},lazy(e){return ku(e)}},Cu=32;function ua(e){try{return Dn(e).length===Cu}catch{return!1}}const ds=32;function ni(e){return Su(e)&&Tu(e)===ds}function vn(e){return ni(e)}function xu(e){return e.includes("::")?mc(e):e}function mc(e){const[t,i]=e.split("::"),n=e.slice(t.length+i.length+4),r=n.includes("<")?n.slice(0,n.indexOf("<")):n,o=n.includes("<")?uc(n.slice(n.indexOf("<")+1,n.lastIndexOf(">"))).map(s=>xu(s.trim())):[];return{address:de(t),module:i,name:r,typeParams:o}}function Au(e){const{address:t,module:i,name:n,typeParams:r}=typeof e=="string"?mc(e):e,o=(r==null?void 0:r.length)>0?`<${r.map(s=>typeof s=="string"?s:Au(s)).join(",")}>`:"";return`${t}::${i}::${n}${o}`}function de(e,t=!1){let i=e.toLowerCase();return!t&&i.startsWith("0x")&&(i=i.slice(2)),`0x${i.padStart(ds*2,"0")}`}function be(e,t=!1){return de(e,t)}function Su(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function Tu(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const bc=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,gc=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,Ou=235;function lm(e){return e.length>Ou?!1:e.includes("@")?bc.test(e):gc.test(e)}function Iu(e,t="at"){const i=e.toLowerCase();let n;if(i.includes("@")){if(!bc.test(i))throw new Error(`Invalid SuiNS name ${e}`);const[r,o]=i.split("@");n=[...r?r.split("."):[],o]}else{if(!gc.test(i))throw new Error(`Invalid SuiNS name ${e}`);n=i.split(".").slice(0,-1)}return t==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}const um=9,fm=BigInt(1e9),Pu="0x1",yc="0x2",hm="0x3",pm=be("0x6"),_m="sui_system",ju=`${yc}::sui::SUI`,mm=be("0x5"),Mu=/^vector<(.+)>$/,Eu=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class si{static parseFromStr(t,i=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const n=t.match(Mu);if(n)return{vector:si.parseFromStr(n[1],i)};const r=t.match(Eu);if(r)return{struct:{address:i?de(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:si.parseStructTypeArgs(r[5],i)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,i=!1){return uc(t).map(n=>si.parseFromStr(n,i))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${si.tagToString(t.vector)}>`;if("struct"in t){const i=t.struct,n=i.typeParams.map(si.tagToString).join(", ");return`${i.address}::${i.module}::${i.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}function Bu(e){return S.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function Du(e){return S.enum("Option",{None:null,Some:e})}const Pe=S.bytes(ds).transform({validate:e=>{const t=typeof e=="string"?e:Nn(e);if(!t||!ni(de(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?lc(de(e)):e,output:e=>de(Nn(e))}),Xt=S.vector(S.u8()).transform({name:"ObjectDigest",input:e=>Dn(e),output:e=>Ir(new Uint8Array(e)),validate:e=>{if(Dn(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ft=S.struct("SuiObjectRef",{objectId:Pe,version:S.u64(),digest:Xt}),wc=S.struct("SharedObjectRef",{objectId:Pe,initialSharedVersion:S.u64(),mutable:S.bool()}),vc=S.enum("ObjectArg",{ImmOrOwnedObject:Ft,SharedObject:wc,Receiving:Ft}),kc=S.enum("CallArg",{Pure:S.struct("Pure",{bytes:S.vector(S.u8()).transform({input:e=>typeof e=="string"?ai(e):e,output:e=>Tt(new Uint8Array(e))})}),Object:vc}),ls=S.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:S.lazy(()=>ls),struct:S.lazy(()=>Oc),u16:null,u32:null,u256:null}),us=ls.transform({input:e=>typeof e=="string"?si.parseFromStr(e,!0):e,output:e=>si.tagToString(e)}),ti=S.enum("Argument",{GasCoin:null,Input:S.u16(),Result:S.u16(),NestedResult:S.tuple([S.u16(),S.u16()])}),Cc=S.struct("ProgrammableMoveCall",{package:Pe,module:S.string(),function:S.string(),typeArguments:S.vector(us),arguments:S.vector(ti)}),xc=S.enum("Command",{MoveCall:Cc,TransferObjects:S.struct("TransferObjects",{objects:S.vector(ti),address:ti}),SplitCoins:S.struct("SplitCoins",{coin:ti,amounts:S.vector(ti)}),MergeCoins:S.struct("MergeCoins",{destination:ti,sources:S.vector(ti)}),Publish:S.struct("Publish",{modules:S.vector(S.vector(S.u8()).transform({input:e=>typeof e=="string"?ai(e):e,output:e=>Tt(new Uint8Array(e))})),dependencies:S.vector(Pe)}),MakeMoveVec:S.struct("MakeMoveVec",{type:Du(us).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:S.vector(ti)}),Upgrade:S.struct("Upgrade",{modules:S.vector(S.vector(S.u8()).transform({input:e=>typeof e=="string"?ai(e):e,output:e=>Tt(new Uint8Array(e))})),dependencies:S.vector(Pe),package:Pe,ticket:ti})}),Ac=S.struct("ProgrammableTransaction",{inputs:S.vector(kc),commands:S.vector(xc)}),Sc=S.enum("TransactionKind",{ProgrammableTransaction:Ac,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Tc=S.enum("TransactionExpiration",{None:null,Epoch:Bu()}),Oc=S.struct("StructTag",{address:Pe,module:S.string(),name:S.string(),typeParams:S.vector(ls)}),Ic=S.struct("GasData",{payment:S.vector(Ft),owner:Pe,price:S.u64(),budget:S.u64()}),Pc=S.struct("TransactionDataV1",{kind:Sc,sender:Pe,gasData:Ic,expiration:Tc}),jc=S.enum("TransactionData",{V1:Pc}),Mc=S.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ec=S.enum("IntentVersion",{V0:null}),Bc=S.enum("AppId",{Sui:null}),Dc=S.struct("Intent",{scope:Mc,version:Ec,appId:Bc});function Nc(e){return S.struct(`IntentMessage<${e.name}>`,{intent:Dc,value:e})}const Rc=S.enum("CompressedSignature",{ED25519:S.fixedArray(64,S.u8()),Secp256k1:S.fixedArray(64,S.u8()),Secp256r1:S.fixedArray(64,S.u8()),ZkLogin:S.vector(S.u8())}),$c=S.enum("PublicKey",{ED25519:S.fixedArray(32,S.u8()),Secp256k1:S.fixedArray(33,S.u8()),Secp256r1:S.fixedArray(33,S.u8()),ZkLogin:S.vector(S.u8())}),qc=S.struct("MultiSigPkMap",{pubKey:$c,weight:S.u8()}),Fc=S.struct("MultiSigPublicKey",{pk_map:S.vector(qc),threshold:S.u16()}),Nu=S.struct("MultiSig",{sigs:S.vector(Rc),bitmap:S.u16(),multisig_pk:Fc}),Ru=S.vector(S.u8()).transform({input:e=>typeof e=="string"?ai(e):e,output:e=>Tt(new Uint8Array(e))}),Lc=S.struct("SenderSignedTransaction",{intentMessage:Nc(jc),txSignatures:S.vector(Ru)}),$u=S.vector(Lc,{name:"SenderSignedData"}),qu=S.enum("PackageUpgradeError",{UnableToFetchPackage:S.struct("UnableToFetchPackage",{packageId:Pe}),NotAPackage:S.struct("NotAPackage",{objectId:Pe}),IncompatibleUpgrade:null,DigestDoesNotMatch:S.struct("DigestDoesNotMatch",{digest:S.vector(S.u8())}),UnknownUpgradePolicy:S.struct("UnknownUpgradePolicy",{policy:S.u8()}),PackageIDDoesNotMatch:S.struct("PackageIDDoesNotMatch",{packageId:Pe,ticketId:Pe})}),Fu=S.struct("ModuleId",{address:Pe,name:S.string()}),fa=S.struct("MoveLocation",{module:Fu,function:S.u16(),instruction:S.u16(),functionName:S.option(S.string())}),Lu=S.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:S.struct("IndexOutOfBounds",{idx:S.u16()}),SecondaryIndexOutOfBounds:S.struct("SecondaryIndexOutOfBounds",{resultIdx:S.u16(),secondaryIdx:S.u16()}),InvalidResultArity:S.struct("InvalidResultArity",{resultIdx:S.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Uu=S.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Ku=S.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:S.struct("MoveObjectTooBig",{objectSize:S.u64(),maxObjectSize:S.u64()}),MovePackageTooBig:S.struct("MovePackageTooBig",{objectSize:S.u64(),maxObjectSize:S.u64()}),CircularObjectOwnership:S.struct("CircularObjectOwnership",{object:Pe}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:S.option(fa),MoveAbort:S.tuple([fa,S.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:S.struct("CommandArgumentError",{argIdx:S.u16(),kind:Lu}),TypeArgumentError:S.struct("TypeArgumentError",{argumentIdx:S.u16(),kind:Uu}),UnusedValueWithoutDrop:S.struct("UnusedValueWithoutDrop",{resultIdx:S.u16(),secondaryIdx:S.u16()}),InvalidPublicFunctionReturnType:S.struct("InvalidPublicFunctionReturnType",{idx:S.u16()}),InvalidTransferObject:null,EffectsTooLarge:S.struct("EffectsTooLarge",{currentSize:S.u64(),maxSize:S.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:S.struct("PackageUpgradeError",{upgradeError:qu}),WrittenObjectsTooLarge:S.struct("WrittenObjectsTooLarge",{currentSize:S.u64(),maxSize:S.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),Uc=S.enum("ExecutionStatus",{Success:null,Failed:S.struct("ExecutionFailed",{error:Ku,command:S.option(S.u64())})}),Kc=S.struct("GasCostSummary",{computationCost:S.u64(),storageCost:S.u64(),storageRebate:S.u64(),nonRefundableStorageFee:S.u64()}),Qi=S.enum("Owner",{AddressOwner:Pe,ObjectOwner:Pe,Shared:S.struct("Shared",{initialSharedVersion:S.u64()}),Immutable:null}),Vu=S.struct("TransactionEffectsV1",{status:Uc,executedEpoch:S.u64(),gasUsed:Kc,modifiedAtVersions:S.vector(S.tuple([Pe,S.u64()])),sharedObjects:S.vector(Ft),transactionDigest:Xt,created:S.vector(S.tuple([Ft,Qi])),mutated:S.vector(S.tuple([Ft,Qi])),unwrapped:S.vector(S.tuple([Ft,Qi])),deleted:S.vector(Ft),unwrappedThenDeleted:S.vector(Ft),wrapped:S.vector(Ft),gasObject:S.tuple([Ft,Qi]),eventsDigest:S.option(Xt),dependencies:S.vector(Xt)}),fs=S.tuple([S.u64(),Xt]),zu=S.enum("ObjectIn",{NotExist:null,Exist:S.tuple([fs,Qi])}),Gu=S.enum("ObjectOut",{NotExist:null,ObjectWrite:S.tuple([Xt,Qi]),PackageWrite:fs}),Wu=S.enum("IDOperation",{None:null,Created:null,Deleted:null}),Hu=S.struct("EffectsObjectChange",{inputState:zu,outputState:Gu,idOperation:Wu}),Xu=S.enum("UnchangedSharedKind",{ReadOnlyRoot:fs,MutateDeleted:S.u64(),ReadDeleted:S.u64(),Cancelled:S.u64(),PerEpochConfig:null}),Ju=S.struct("TransactionEffectsV2",{status:Uc,executedEpoch:S.u64(),gasUsed:Kc,transactionDigest:Xt,gasObjectIndex:S.option(S.u32()),eventsDigest:S.option(Xt),dependencies:S.vector(Xt),lamportVersion:S.u64(),changedObjects:S.vector(S.tuple([Pe,Hu])),unchangedSharedObjects:S.vector(S.tuple([Pe,Xu])),auxDataDigest:S.option(Xt)}),Zu=S.enum("TransactionEffects",{V1:Vu,V2:Ju}),ne={...S,U8:S.u8(),U16:S.u16(),U32:S.u32(),U64:S.u64(),U128:S.u128(),U256:S.u256(),ULEB128:S.uleb128(),Bool:S.bool(),String:S.string(),Address:Pe,AppId:Bc,Argument:ti,CallArg:kc,CompressedSignature:Rc,GasData:Ic,Intent:Dc,IntentMessage:Nc,IntentScope:Mc,IntentVersion:Ec,MultiSig:Nu,MultiSigPkMap:qc,MultiSigPublicKey:Fc,ObjectArg:vc,ObjectDigest:Xt,ProgrammableMoveCall:Cc,ProgrammableTransaction:Ac,PublicKey:$c,SenderSignedData:$u,SenderSignedTransaction:Lc,SharedObjectRef:wc,StructTag:Oc,SuiObjectRef:Ft,Command:xc,TransactionData:jc,TransactionDataV1:Pc,TransactionExpiration:Tc,TransactionKind:Sc,TypeTag:us,TransactionEffects:Zu},Qu="object",Yu="ID",ef="ascii",tf="String",nf="string",rf="String",of="option",sf="Option";function af(e){const t=typeof e.body=="object"&&"datatype"in e.body?e.body.datatype:null;return!!t&&de(t.package)===de("0x2")&&t.module==="tx_context"&&t.type==="TxContext"}function qo(e){if(typeof e=="string")switch(e){case"address":return ne.Address;case"bool":return ne.Bool;case"u8":return ne.U8;case"u16":return ne.U16;case"u32":return ne.U32;case"u64":return ne.U64;case"u128":return ne.U128;case"u256":return ne.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if(e.vector==="u8")return ne.vector(ne.U8).transform({input:i=>typeof i=="string"?new TextEncoder().encode(i):i,output:i=>i});const t=qo(e.vector);return t?ne.vector(t):null}if("datatype"in e){const t=de(e.datatype.package);if(t===de(Pu)){if(e.datatype.module===ef&&e.datatype.type===tf||e.datatype.module===nf&&e.datatype.type===rf)return ne.String;if(e.datatype.module===of&&e.datatype.type===sf){const i=qo(e.datatype.typeParameters[0]);return i?ne.vector(i):null}}if(t===de(yc)&&e.datatype.module===Qu&&e.datatype.type===Yu)return ne.Address}return null}function cf(e){return typeof e=="object"&&"Reference"in e?{ref:"&",body:An(e.Reference)}:typeof e=="object"&&"MutableReference"in e?{ref:"&mut",body:An(e.MutableReference)}:{ref:null,body:An(e)}}function An(e){if(typeof e=="string")switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:An(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(An)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}function df(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?Tt(e):e.toBase64()}}}const gi={Pure:df,ObjectRef({objectId:e,digest:t,version:i}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:i,objectId:de(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:i}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:i,objectId:de(e)}}}},ReceivingRef({objectId:e,digest:t,version:i}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:i,objectId:de(e)}}}}};var li;function lf(e){return{lang:(e==null?void 0:e.lang)??(li==null?void 0:li.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(li==null?void 0:li.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(li==null?void 0:li.abortPipeEarly)}}var mo;function uf(e){return mo==null?void 0:mo.get(e)}var bo;function ff(e){return bo==null?void 0:bo.get(e)}var go;function hf(e,t){var i;return(i=go==null?void 0:go.get(e))==null?void 0:i.get(t)}function Vc(e){var i,n;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((n=(i=Object.getPrototypeOf(e))==null?void 0:i.constructor)==null?void 0:n.name))??"null":t}function Rt(e,t,i,n,r){const o=r&&"input"in r?r.input:i.value,s=(r==null?void 0:r.expected)??e.expects??null,a=(r==null?void 0:r.received)??Vc(o),c={kind:e.kind,type:e.type,input:o,expected:s,received:a,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:r==null?void 0:r.path,issues:r==null?void 0:r.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},d=e.kind==="schema",l=(r==null?void 0:r.message)??e.message??hf(e.reference,c.lang)??(d?ff(c.lang):null)??n.message??uf(c.lang);l&&(c.message=typeof l=="function"?l(c):l),d&&(i.typed=!1),i.issues?i.issues.push(c):i.issues=[c]}function pf(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var _f=class extends Error{constructor(t){super(t[0].message);L(this,"issues");this.name="ValiError",this.issues=t}};function Ln(e,t){return{kind:"validation",type:"check",reference:Ln,async:!1,expects:null,requirement:e,message:t,_run(i,n){return i.typed&&!this.requirement(i.value)&&Rt(this,"input",i,n),i}}}function Ie(e){return{kind:"validation",type:"integer",reference:Ie,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(t,i){return t.typed&&!this.requirement(t.value)&&Rt(this,"integer",t,i),t}}}function Pr(e){return{kind:"transformation",type:"transform",reference:Pr,async:!1,operation:e,_run(t){return t.value=this.operation(t.value),t}}}function hs(e,t,i){return typeof e.default=="function"?e.default(t,i):e.default}function Fo(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function te(e,t){return{kind:"schema",type:"array",reference:te,expects:"Array",async:!1,item:e,message:t,_run(i,n){var o;const r=i.value;if(Array.isArray(r)){i.typed=!0,i.value=[];for(let s=0;s<r.length;s++){const a=r[s],c=this.item._run({typed:!1,value:a},n);if(c.issues){const d={type:"array",origin:"value",input:r,key:s,value:a};for(const l of c.issues)l.path?l.path.unshift(d):l.path=[d],(o=i.issues)==null||o.push(l);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),i.value.push(c.value)}}else Rt(this,"type",i,n);return i}}}function ps(e){return{kind:"schema",type:"bigint",reference:ps,expects:"bigint",async:!1,message:e,_run(t,i){return typeof t.value=="bigint"?t.typed=!0:Rt(this,"type",t,i),t}}}function jr(e){return{kind:"schema",type:"boolean",reference:jr,expects:"boolean",async:!1,message:e,_run(t,i){return typeof t.value=="boolean"?t.typed=!0:Rt(this,"type",t,i),t}}}function Rn(e){return{kind:"schema",type:"lazy",reference:Rn,expects:"unknown",async:!1,getter:e,_run(t,i){return this.getter(t.value)._run(t,i)}}}function oe(e,t){return{kind:"schema",type:"literal",reference:oe,expects:Vc(e),async:!1,literal:e,message:t,_run(i,n){return i.value===this.literal?i.typed=!0:Rt(this,"type",i,n),i}}}function ge(e,...t){const i={kind:"schema",type:"nullable",reference:ge,expects:`${e.expects} | null`,async:!1,wrapped:e,_run(n,r){return n.value===null&&("default"in this&&(n.value=hs(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function an(e,...t){const i={kind:"schema",type:"nullish",reference:an,expects:`${e.expects} | null | undefined`,async:!1,wrapped:e,_run(n,r){return(n.value===null||n.value===void 0)&&("default"in this&&(n.value=hs(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function Se(e){return{kind:"schema",type:"number",reference:Se,expects:"number",async:!1,message:e,_run(t,i){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Rt(this,"type",t,i),t}}}function U(e,t){return{kind:"schema",type:"object",reference:U,expects:"Object",async:!1,entries:e,message:t,_run(i,n){var o;const r=i.value;if(r&&typeof r=="object"){i.typed=!0,i.value={};for(const s in this.entries){const a=r[s],c=this.entries[s]._run({typed:!1,value:a},n);if(c.issues){const d={type:"object",origin:"value",input:r,key:s,value:a};for(const l of c.issues)l.path?l.path.unshift(d):l.path=[d],(o=i.issues)==null||o.push(l);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),(c.value!==void 0||s in r)&&(i.value[s]=c.value)}}else Rt(this,"type",i,n);return i}}}function Ot(e,...t){const i={kind:"schema",type:"optional",reference:Ot,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(n,r){return n.value===void 0&&("default"in this&&(n.value=hs(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function $n(e,t,i){return{kind:"schema",type:"record",reference:$n,expects:"Object",async:!1,key:e,value:t,message:i,_run(n,r){var s,a;const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const c in o)if(pf(o,c)){const d=o[c],l=this.key._run({typed:!1,value:c},r);if(l.issues){const _={type:"object",origin:"key",input:o,key:c,value:d};for(const y of l.issues)y.path=[_],(s=n.issues)==null||s.push(y);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}const h=this.value._run({typed:!1,value:d},r);if(h.issues){const _={type:"object",origin:"value",input:o,key:c,value:d};for(const y of h.issues)y.path?y.path.unshift(_):y.path=[_],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=h.issues),r.abortEarly){n.typed=!1;break}}(!l.typed||!h.typed)&&(n.typed=!1),l.typed&&(n.value[l.value]=h.value)}}else Rt(this,"type",n,r);return n}}}function ue(e){return{kind:"schema",type:"string",reference:ue,expects:"string",async:!1,message:e,_run(t,i){return typeof t.value=="string"?t.typed=!0:Rt(this,"type",t,i),t}}}function _s(e,t){return{kind:"schema",type:"tuple",reference:_s,expects:"Array",async:!1,items:e,message:t,_run(i,n){var o;const r=i.value;if(Array.isArray(r)){i.typed=!0,i.value=[];for(let s=0;s<this.items.length;s++){const a=r[s],c=this.items[s]._run({typed:!1,value:a},n);if(c.issues){const d={type:"array",origin:"value",input:r,key:s,value:a};for(const l of c.issues)l.path?l.path.unshift(d):l.path=[d],(o=i.issues)==null||o.push(l);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),i.value.push(c.value)}}else Rt(this,"type",i,n);return i}}}function ha(e){let t;if(e)for(const i of e)t?t.push(...i.issues):t=i.issues;return t}function xt(e,t){return{kind:"schema",type:"union",reference:xt,expects:[...new Set(e.map(i=>i.expects))].join(" | ")||"never",async:!1,options:e,message:t,_run(i,n){let r,o,s;for(const a of this.options){const c=a._run({typed:!1,value:i.value},n);if(c.typed)if(c.issues)o?o.push(c):o=[c];else{r=c;break}else s?s.push(c):s=[c]}if(r)return r;if(o){if(o.length===1)return o[0];Rt(this,"type",i,n,{issues:ha(o)}),i.typed=!0}else{if((s==null?void 0:s.length)===1)return s[0];Rt(this,"type",i,n,{issues:ha(s)})}return i}}}function Ui(){return{kind:"schema",type:"unknown",reference:Ui,expects:"unknown",async:!1,_run(e){return e.typed=!0,e}}}function Oe(e,t,i){const n=e._run({typed:!1,value:t},lf(i));if(n.issues)throw new _f(n.issues);return n.value}function we(...e){return{...e[0],pipe:e,_run(t,i){for(let n=0;n<e.length;n++){if(t.issues&&(e[n].kind==="schema"||e[n].kind==="transformation")){t.typed=!1;break}(!t.issues||!i.abortEarly&&!i.abortPipeEarly)&&(t=e[n]._run(t,i))}return t}}}function zi(e){const t=Object.entries(e).map(([i,n])=>U({[i]:n}));return we(xt(t),Pr(i=>({...i,$kind:Object.keys(i)[0]})))}const fn=we(ue(),Pr(e=>de(e)),Ln(ni)),Bt=fn,Ki=ue(),Mt=we(xt([ue(),we(Se(),Ie())]),Ln(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Ii=U({objectId:fn,version:Mt,digest:ue()}),Ce=we(xt([U({GasCoin:oe(!0)}),U({Input:we(Se(),Ie()),type:Ot(oe("pure"))}),U({Input:we(Se(),Ie()),type:Ot(oe("object"))}),U({Result:we(Se(),Ie())}),U({NestedResult:_s([we(Se(),Ie()),we(Se(),Ie())])})]),Pr(e=>({...e,$kind:Object.keys(e)[0]}))),mf=U({budget:ge(Mt),price:ge(Mt),owner:ge(fn),payment:ge(te(Ii))}),Lo=xt([oe("address"),oe("bool"),oe("u8"),oe("u16"),oe("u32"),oe("u64"),oe("u128"),oe("u256"),U({vector:Rn(()=>Lo)}),U({datatype:U({package:ue(),module:ue(),type:ue(),typeParameters:te(Rn(()=>Lo))})}),U({typeParameter:we(Se(),Ie())})]),bf=U({ref:ge(xt([oe("&"),oe("&mut")])),body:Lo}),gf=U({package:Bt,module:ue(),function:ue(),typeArguments:te(ue()),arguments:te(Ce),_argumentTypes:Ot(ge(te(bf)))}),yf=U({name:ue(),inputs:$n(ue(),xt([Ce,te(Ce)])),data:$n(ue(),Ui())}),wf=zi({MoveCall:gf,TransferObjects:U({objects:te(Ce),address:Ce}),SplitCoins:U({coin:Ce,amounts:te(Ce)}),MergeCoins:U({destination:Ce,sources:te(Ce)}),Publish:U({modules:te(Ki),dependencies:te(Bt)}),MakeMoveVec:U({type:ge(ue()),elements:te(Ce)}),Upgrade:U({modules:te(Ki),dependencies:te(Bt),package:Bt,ticket:Ce}),$Intent:yf}),zc=zi({ImmOrOwnedObject:Ii,SharedObject:U({objectId:Bt,initialSharedVersion:Mt,mutable:jr()}),Receiving:Ii}),vf=zi({Object:zc,Pure:U({bytes:Ki}),UnresolvedPure:U({value:Ui()}),UnresolvedObject:U({objectId:Bt,version:Ot(ge(Mt)),digest:Ot(ge(ue())),initialSharedVersion:Ot(ge(Mt))})}),pa=zi({Object:zc,Pure:U({bytes:Ki})}),Gc=zi({None:oe(!0),Epoch:Mt}),ar=U({version:oe(2),sender:an(fn),expiration:an(Gc),gasData:mf,inputs:te(vf),commands:te(wf)});var kf=(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(kf||{});const Pi={MoveCall(e){const[t,i="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:i,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects(e,t){return{$kind:"TransferObjects",TransferObjects:{objects:e.map(i=>Oe(Ce,i)),address:Oe(Ce,t)}}},SplitCoins(e,t){return{$kind:"SplitCoins",SplitCoins:{coin:Oe(Ce,e),amounts:t.map(i=>Oe(Ce,i))}}},MergeCoins(e,t){return{$kind:"MergeCoins",MergeCoins:{destination:Oe(Ce,e),sources:t.map(i=>Oe(Ce,i))}}},Publish({modules:e,dependencies:t}){return{$kind:"Publish",Publish:{modules:e.map(i=>typeof i=="string"?i:Tt(new Uint8Array(i))),dependencies:t.map(i=>be(i))}}},Upgrade({modules:e,dependencies:t,package:i,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:e.map(r=>typeof r=="string"?r:Tt(new Uint8Array(r))),dependencies:t.map(r=>be(r)),package:i,ticket:Oe(Ce,n)}}},MakeMoveVec({type:e,elements:t}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(i=>Oe(Ce,i))}}},Intent({name:e,inputs:t={},data:i={}}){return{$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Array.isArray(r)?r.map(o=>Oe(Ce,o)):Oe(Ce,r)])),data:i}}}},Uo=U({digest:ue(),objectId:ue(),version:xt([we(Se(),Ie()),ue(),ps()])}),Cf=zi({ImmOrOwned:Uo,Shared:U({objectId:Bt,initialSharedVersion:Mt,mutable:jr()}),Receiving:Uo}),_a=zi({Object:Cf,Pure:te(we(Se(),Ie()))}),Wc=xt([U({kind:oe("Input"),index:we(Se(),Ie()),value:Ui(),type:Ot(oe("object"))}),U({kind:oe("Input"),index:we(Se(),Ie()),value:Ui(),type:oe("pure")})]),xf=xt([U({Epoch:we(Se(),Ie())}),U({None:ge(oe(!0))})]),ma=we(xt([Se(),ue(),ps()]),Ln(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),ms=xt([U({bool:ge(oe(!0))}),U({u8:ge(oe(!0))}),U({u64:ge(oe(!0))}),U({u128:ge(oe(!0))}),U({address:ge(oe(!0))}),U({signer:ge(oe(!0))}),U({vector:Rn(()=>ms)}),U({struct:Rn(()=>Af)}),U({u16:ge(oe(!0))}),U({u32:ge(oe(!0))}),U({u256:ge(oe(!0))})]),Af=U({address:ue(),module:ue(),name:ue(),typeParams:te(ms)}),Sf=U({budget:Ot(ma),price:Ot(ma),payment:Ot(te(Uo)),owner:Ot(ue())}),Tf=[Wc,U({kind:oe("GasCoin")}),U({kind:oe("Result"),index:we(Se(),Ie())}),U({kind:oe("NestedResult"),index:we(Se(),Ie()),resultIndex:we(Se(),Ie())})],yi=xt([...Tf]),Of=U({kind:oe("MoveCall"),target:we(ue(),Ln(e=>e.split("::").length===3)),typeArguments:te(ue()),arguments:te(yi)}),If=U({kind:oe("TransferObjects"),objects:te(yi),address:yi}),Pf=U({kind:oe("SplitCoins"),coin:yi,amounts:te(yi)}),jf=U({kind:oe("MergeCoins"),destination:yi,sources:te(yi)}),Mf=U({kind:oe("MakeMoveVec"),type:xt([U({Some:ms}),U({None:ge(oe(!0))})]),objects:te(yi)}),Ef=U({kind:oe("Publish"),modules:te(te(we(Se(),Ie()))),dependencies:te(ue())}),Bf=U({kind:oe("Upgrade"),modules:te(te(we(Se(),Ie()))),dependencies:te(ue()),packageId:ue(),ticket:yi}),Df=[Of,If,Pf,jf,Ef,Bf,Mf],Nf=xt([...Df]);U({version:oe(1),sender:Ot(ue()),expiration:an(xf),gasConfig:Sf,inputs:te(Wc),transactions:te(Nf)});function ba(e){var i;const t=e.inputs.map((n,r)=>{if(n.Object)return{kind:"Input",index:r,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:r,value:{Pure:Array.from(ai(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:r,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:r,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:((i=e.expiration)==null?void 0:i.$kind)==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:si.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(r=>ui(r,t))};if(n.MergeCoins)return{kind:"MergeCoins",destination:ui(n.MergeCoins.destination,t),sources:n.MergeCoins.sources.map(r=>ui(r,t))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(r=>ui(r,t))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(r=>Array.from(ai(r))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:ui(n.SplitCoins.coin,t),amounts:n.SplitCoins.amounts.map(r=>ui(r,t))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(r=>ui(r,t)),address:ui(n.TransferObjects.address,t)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(r=>Array.from(ai(r))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:ui(n.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function ui(e,t){if(e.$kind==="GasCoin")return{kind:"GasCoin"};if(e.$kind==="Result")return{kind:"Result",index:e.Result};if(e.$kind==="NestedResult")return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if(e.$kind==="Input")return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function Rf(e){var t,i,n;return Oe(ar,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:((t=e.gasConfig.budget)==null?void 0:t.toString())??null,price:((i=e.gasConfig.price)==null?void 0:i.toString())??null,payment:((n=e.gasConfig.payment)==null?void 0:n.map(r=>({digest:r.digest,objectId:r.objectId,version:r.version.toString()})))??null},inputs:e.inputs.map(r=>{if(r.kind==="Input"){if(Fo(_a,r.value)){const o=Oe(_a,r.value);if(o.Object){if(o.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:o.Object.ImmOrOwned.objectId,version:String(o.Object.ImmOrOwned.version),digest:o.Object.ImmOrOwned.digest}}};if(o.Object.Shared)return{Object:{SharedObject:{mutable:o.Object.Shared.mutable??null,initialSharedVersion:o.Object.Shared.initialSharedVersion,objectId:o.Object.Shared.objectId}}};if(o.Object.Receiving)return{Object:{Receiving:{digest:o.Object.Receiving.digest,version:String(o.Object.Receiving.version),objectId:o.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Tt(new Uint8Array(o.Pure))}}}return r.type==="object"?{UnresolvedObject:{objectId:r.value}}:{UnresolvedPure:{value:r.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(r=>{switch(r.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in r.type?si.tagToString(r.type.Some):null,elements:r.objects.map(o=>fi(o))}};case"MergeCoins":return{MergeCoins:{destination:fi(r.destination),sources:r.sources.map(o=>fi(o))}};case"MoveCall":{const[o,s,a]=r.target.split("::");return{MoveCall:{package:o,module:s,function:a,typeArguments:r.typeArguments,arguments:r.arguments.map(c=>fi(c))}}}case"Publish":return{Publish:{modules:r.modules.map(o=>Tt(Uint8Array.from(o))),dependencies:r.dependencies}};case"SplitCoins":return{SplitCoins:{coin:fi(r.coin),amounts:r.amounts.map(o=>fi(o))}};case"TransferObjects":return{TransferObjects:{objects:r.objects.map(o=>fi(o)),address:fi(r.address)}};case"Upgrade":return{Upgrade:{modules:r.modules.map(o=>Tt(Uint8Array.from(o))),dependencies:r.dependencies,package:r.packageId,ticket:fi(r.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(r)}`)})})}function fi(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function Un(e){return xt(Object.entries(e).map(([t,i])=>U({[t]:i})))}const Vt=Un({GasCoin:oe(!0),Input:we(Se(),Ie()),Result:we(Se(),Ie()),NestedResult:_s([we(Se(),Ie()),we(Se(),Ie())])}),$f=U({budget:ge(Mt),price:ge(Mt),owner:ge(fn),payment:ge(te(Ii))}),qf=U({package:Bt,module:ue(),function:ue(),typeArguments:te(ue()),arguments:te(Vt)}),Ff=U({name:ue(),inputs:$n(ue(),xt([Vt,te(Vt)])),data:$n(ue(),Ui())}),Lf=Un({MoveCall:qf,TransferObjects:U({objects:te(Vt),address:Vt}),SplitCoins:U({coin:Vt,amounts:te(Vt)}),MergeCoins:U({destination:Vt,sources:te(Vt)}),Publish:U({modules:te(Ki),dependencies:te(Bt)}),MakeMoveVec:U({type:ge(ue()),elements:te(Vt)}),Upgrade:U({modules:te(Ki),dependencies:te(Bt),package:Bt,ticket:Vt}),$Intent:Ff}),Uf=Un({ImmOrOwnedObject:Ii,SharedObject:U({objectId:Bt,initialSharedVersion:Mt,mutable:jr()}),Receiving:Ii}),Kf=Un({Object:Uf,Pure:U({bytes:Ki}),UnresolvedPure:U({value:Ui()}),UnresolvedObject:U({objectId:Bt,version:Ot(ge(Mt)),digest:Ot(ge(ue())),initialSharedVersion:Ot(ge(Mt))})}),Vf=Un({None:oe(!0),Epoch:Mt}),zf=U({version:oe(2),sender:an(fn),expiration:an(Vf),gasData:$f,inputs:te(Kf),commands:te(Lf)}),Gf=50,Wf=1000n,Hf=5e10;async function Xf(e,t,i){return await eh(e,t),await Yf(e,t),t.onlyTransactionKind||(await Jf(e,t),await Zf(e,t),await Qf(e,t)),await th(e),await i()}async function Jf(e,t){e.gasConfig.price||(e.gasConfig.price=String(await Kn(t).getReferenceGasPrice()))}async function Zf(e,t){if(e.gasConfig.budget)return;const i=await Kn(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(Hf),payment:[]}}})});if(i.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${i.effects.status.error}`,{cause:i});const n=Wf*BigInt(e.gasConfig.price||1n),r=BigInt(i.effects.gasUsed.computationCost)+n,o=r+BigInt(i.effects.gasUsed.storageCost)-BigInt(i.effects.gasUsed.storageRebate);e.gasConfig.budget=String(o>r?o:r)}async function Qf(e,t){if(!e.gasConfig.payment){const n=(await Kn(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:ju})).data.filter(r=>!e.inputs.find(s=>{var a;return(a=s.Object)!=null&&a.ImmOrOwnedObject?r.coinObjectId===s.Object.ImmOrOwnedObject.objectId:!1})).map(r=>({objectId:r.coinObjectId,digest:r.digest,version:r.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=n.map(r=>Oe(Ii,r))}}async function Yf(e,t){const i=e.inputs.filter(l=>{var h;return l.UnresolvedObject&&!(l.UnresolvedObject.version||(h=l.UnresolvedObject)!=null&&h.initialSharedVersion)}),n=[...new Set(i.map(l=>be(l.UnresolvedObject.objectId)))],r=n.length?oh(n,Gf):[],o=(await Promise.all(r.map(l=>Kn(t).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat(),s=new Map(n.map((l,h)=>[l,o[h]])),a=Array.from(s).filter(([l,h])=>h.error).map(([l,h])=>JSON.stringify(h.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=o.map(l=>{if(l.error||!l.data)throw new Error(`Failed to fetch object: ${l.error}`);const h=l.data.owner,_=h&&typeof h=="object"&&"Shared"in h?h.Shared.initial_shared_version:null;return{objectId:l.data.objectId,digest:l.data.digest,version:l.data.version,initialSharedVersion:_}}),d=new Map(n.map((l,h)=>[l,c[h]]));for(const[l,h]of e.inputs.entries()){if(!h.UnresolvedObject)continue;let _;const y=de(h.UnresolvedObject.objectId),k=d.get(y);h.UnresolvedObject.initialSharedVersion??(k==null?void 0:k.initialSharedVersion)?_=gi.SharedObjectRef({objectId:y,initialSharedVersion:h.UnresolvedObject.initialSharedVersion||(k==null?void 0:k.initialSharedVersion),mutable:ih(e,l)}):nh(e,l)&&(_=gi.ReceivingRef({objectId:y,digest:h.UnresolvedObject.digest??(k==null?void 0:k.digest),version:h.UnresolvedObject.version??(k==null?void 0:k.version)})),e.inputs[e.inputs.indexOf(h)]=_??gi.ObjectRef({objectId:y,digest:h.UnresolvedObject.digest??(k==null?void 0:k.digest),version:h.UnresolvedObject.version??(k==null?void 0:k.version)})}}async function eh(e,t){const{inputs:i,commands:n}=e,r=[],o=new Set;n.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(l=>l.$kind==="Input"?e.inputs[l.Input]:null).some(l=>(l==null?void 0:l.UnresolvedPure)||(l==null?void 0:l.UnresolvedObject))){const l=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;o.add(l),r.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(c=>{ga(c,ne.U64,e)});break;case"TransferObjects":ga(a.TransferObjects.address,ne.Address,e);break}});const s=new Map;if(o.size>0){const a=Kn(t);await Promise.all([...o].map(async c=>{const[d,l,h]=c.split("::"),_=await a.getNormalizedMoveFunction({package:d,module:l,function:h});s.set(c,_.parameters.map(y=>cf(y)))}))}r.length&&await Promise.all(r.map(async a=>{const c=s.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const l=c.length>0&&af(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=l})),n.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,d=`${c.package}::${c.module}::${c.function}`,l=c._argumentTypes;if(l){if(l.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${d}`);l.forEach((h,_)=>{var j,B;const y=c.arguments[_];if(y.$kind!=="Input")return;const k=i[y.Input];if(!k.UnresolvedPure&&!k.UnresolvedObject)return;const O=((j=k.UnresolvedPure)==null?void 0:j.value)??((B=k.UnresolvedObject)==null?void 0:B.objectId),P=qo(h.body);if(P){y.type="pure",i[i.indexOf(k)]=gi.Pure(P.serialize(O));return}if(typeof O!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(O,null,2)}`);y.type="object";const M=k.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:O}}:k;i[y.Input]=M})}})}function th(e){e.inputs.forEach((t,i)=>{if(t.$kind!=="Object"&&t.$kind!=="Pure")throw new Error(`Input at index ${i} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(t)}`)})}function ga(e,t,i){if(e.$kind!=="Input")return;const n=i.inputs[e.Input];n.$kind==="UnresolvedPure"&&(i.inputs[e.Input]=gi.Pure(t.serialize(n.UnresolvedPure.value)))}function ih(e,t){let i=!1;return e.getInputUses(t,(n,r)=>{if(r.MoveCall&&r.MoveCall._argumentTypes){const o=r.MoveCall.arguments.indexOf(n);i=r.MoveCall._argumentTypes[o].ref!=="&"||i}(r.$kind==="MakeMoveVec"||r.$kind==="MergeCoins"||r.$kind==="SplitCoins")&&(i=!0)}),i}function nh(e,t){let i=!1;return e.getInputUses(t,(n,r)=>{if(r.MoveCall&&r.MoveCall._argumentTypes){const o=r.MoveCall.arguments.indexOf(n);i=rh(r.MoveCall._argumentTypes[o])||i}}),i}function rh(e){return typeof e.body!="object"||!("datatype"in e.body)?!1:e.body.datatype.package==="0x2"&&e.body.datatype.module==="transfer"&&e.body.datatype.type==="Receiving"}function Kn(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function oh(e,t){return Array.from({length:Math.ceil(e.length/t)},(i,n)=>e.slice(n*t,n*t+t))}function sh(e){function t(i){return e(i)}return t.system=()=>t("0x5"),t.clock=()=>t("0x6"),t.random=()=>t("0x8"),t.denyList=()=>t("0x403"),t}function ah(e){function t(i,n){if(typeof i=="string")return e(Sn(i).serialize(n));if(i instanceof Uint8Array||cs(i))return e(i);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=i=>e(ne.U8.serialize(i)),t.u16=i=>e(ne.U16.serialize(i)),t.u32=i=>e(ne.U32.serialize(i)),t.u64=i=>e(ne.U64.serialize(i)),t.u128=i=>e(ne.U128.serialize(i)),t.u256=i=>e(ne.U256.serialize(i)),t.bool=i=>e(ne.Bool.serialize(i)),t.string=i=>e(ne.String.serialize(i)),t.address=i=>e(ne.Address.serialize(i)),t.id=t.address,t.vector=(i,n)=>e(ne.vector(Sn(i)).serialize(n)),t.option=(i,n)=>e(ne.option(Sn(i)).serialize(n)),t}function Sn(e){switch(e){case"u8":return ne.u8();case"u16":return ne.u16();case"u32":return ne.u32();case"u64":return ne.u64();case"u128":return ne.u128();case"u256":return ne.u256();case"bool":return ne.bool();case"string":return ne.string();case"id":case"address":return ne.Address}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[i,n]=t.slice(1);return i==="vector"?ne.vector(Sn(n)):ne.option(Sn(n))}throw new Error(`Invalid Pure type name: ${e}`)}function ch(e,t){const i=Array.from(`${e}::`).map(r=>r.charCodeAt(0)),n=new Uint8Array(i.length+t.length);return n.set(i),n.set(t,i.length),uu(n,{dkLen:32})}function ya(e){return de(e).replace("0x","")}class Ht{constructor(t){this.version=2,this.sender=(t==null?void 0:t.sender)??null,this.expiration=(t==null?void 0:t.expiration)??null,this.inputs=(t==null?void 0:t.inputs)??[],this.commands=(t==null?void 0:t.commands)??[],this.gasData=(t==null?void 0:t.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(t){const n=ne.TransactionKind.parse(t).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return Ht.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(t){const i=ne.TransactionData.parse(t),n=i==null?void 0:i.V1,r=n.kind.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");return Ht.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:r.inputs,commands:r.commands})}static restore(t){return t.version===2?new Ht(Oe(ar,t)):new Ht(Oe(ar,Rf(t)))}static getDigestFromBytes(t){const i=ch("TransactionData",t);return Ir(i)}get gasConfig(){return this.gasData}set gasConfig(t){this.gasData=t}build({maxSizeBytes:t=1/0,overrides:i,onlyTransactionKind:n}={}){const r=this.inputs,o=this.commands,s={ProgrammableTransaction:{inputs:r,commands:o}};if(n)return ne.TransactionKind.serialize(s,{maxSize:t}).toBytes();const a=(i==null?void 0:i.expiration)??this.expiration,c=(i==null?void 0:i.sender)??this.sender,d={...this.gasData,...i==null?void 0:i.gasConfig,...i==null?void 0:i.gasData};if(!c)throw new Error("Missing transaction sender");if(!d.budget)throw new Error("Missing gas budget");if(!d.payment)throw new Error("Missing gas payment");if(!d.price)throw new Error("Missing gas price");const l={sender:ya(c),expiration:a||{None:!0},gasData:{payment:d.payment,owner:ya(this.gasData.owner??c),price:BigInt(d.price),budget:BigInt(d.budget)},kind:{ProgrammableTransaction:{inputs:r,commands:o}}};return ne.TransactionData.serialize({V1:l},{maxSize:t}).toBytes()}addInput(t,i){const n=this.inputs.length;return this.inputs.push(i),{Input:n,type:t,$kind:"Input"}}getInputUses(t,i){this.mapArguments((n,r)=>(n.$kind==="Input"&&n.Input===t&&i(n,r),n))}mapArguments(t){for(const i of this.commands)switch(i.$kind){case"MoveCall":i.MoveCall.arguments=i.MoveCall.arguments.map(r=>t(r,i));break;case"TransferObjects":i.TransferObjects.objects=i.TransferObjects.objects.map(r=>t(r,i)),i.TransferObjects.address=t(i.TransferObjects.address,i);break;case"SplitCoins":i.SplitCoins.coin=t(i.SplitCoins.coin,i),i.SplitCoins.amounts=i.SplitCoins.amounts.map(r=>t(r,i));break;case"MergeCoins":i.MergeCoins.destination=t(i.MergeCoins.destination,i),i.MergeCoins.sources=i.MergeCoins.sources.map(r=>t(r,i));break;case"MakeMoveVec":i.MakeMoveVec.elements=i.MakeMoveVec.elements.map(r=>t(r,i));break;case"Upgrade":i.Upgrade.ticket=t(i.Upgrade.ticket,i);break;case"$Intent":const n=i.$Intent.inputs;i.$Intent.inputs={};for(const[r,o]of Object.entries(n))i.$Intent.inputs[r]=Array.isArray(o)?o.map(s=>t(s,i)):t(o,i);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${i.$kind}`)}}replaceCommand(t,i){if(!Array.isArray(i)){this.commands[t]=i;return}const n=i.length-1;this.commands.splice(t,1,...i),n!==0&&this.mapArguments(r=>{switch(r.$kind){case"Result":r.Result>t&&(r.Result+=n);break;case"NestedResult":r.NestedResult[0]>t&&(r.NestedResult[0]+=n);break}return r})}getDigest(){const t=this.build({onlyTransactionKind:!1});return Ht.getDigestFromBytes(t)}snapshot(){return Oe(ar,this)}}function wa(e){if(typeof e=="string")return de(e);if(e.Object)return e.Object.ImmOrOwnedObject?de(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?de(e.Object.Receiving.objectId):de(e.Object.SharedObject.objectId);if(e.UnresolvedObject)return de(e.UnresolvedObject.objectId)}var Hc=e=>{throw TypeError(e)},bs=(e,t,i)=>t.has(e)||Hc("Cannot "+i),pe=(e,t,i)=>(bs(e,t,"read from private field"),i?i.call(e):t.get(e)),_n=(e,t,i)=>t.has(e)?Hc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ji=(e,t,i,n)=>(bs(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),pi=(e,t,i)=>(bs(e,t,"access private method"),i),kn,Tn,Bi,me,zt,cr,gs,Ko,ys;function dh(e){const t={$kind:"Result",Result:e},i=[],n=r=>i[r]??(i[r]={$kind:"NestedResult",NestedResult:[e,r]});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(r,o){if(o in r)return Reflect.get(r,o);if(o===Symbol.iterator)return function*(){let a=0;for(;;)yield n(a),a++};if(typeof o=="symbol")return;const s=parseInt(o,10);if(!(Number.isNaN(s)||s<0))return n(s)}})}const Xc=Symbol.for("@mysten/transaction");function Jc(e){return!!e&&typeof e=="object"&&e[Xc]===!0}const va={buildPlugins:new Map,serializationPlugins:new Map},yo=Symbol.for("@mysten/transaction/registry");function mn(){try{const e=globalThis;return e[yo]||(e[yo]=va),e[yo]}catch{return va}}const lh=class Vo{constructor(){_n(this,zt),_n(this,kn),_n(this,Tn),_n(this,Bi,new Map),_n(this,me),this.object=sh(i=>{var o,s;if(typeof i=="function")return this.object(i(this));if(typeof i=="object"&&Fo(Ce,i))return i;const n=wa(i),r=pe(this,me).inputs.find(a=>n===wa(a));return(o=r==null?void 0:r.Object)!=null&&o.SharedObject&&typeof i=="object"&&((s=i.Object)!=null&&s.SharedObject)&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||i.Object.SharedObject.mutable),r?{$kind:"Input",Input:pe(this,me).inputs.indexOf(r),type:"object"}:pe(this,me).addInput("object",typeof i=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:de(i)}}:i)});const t=mn();ji(this,me,new Ht),ji(this,Tn,[...t.buildPlugins.values()]),ji(this,kn,[...t.serializationPlugins.values()])}static fromKind(t){const i=new Vo;return ji(i,me,Ht.fromKindBytes(typeof t=="string"?ai(t):t)),i}static from(t){const i=new Vo;return Jc(t)?ji(i,me,new Ht(t.getData())):typeof t!="string"||!t.startsWith("{")?ji(i,me,Ht.fromBytes(typeof t=="string"?ai(t):t)):ji(i,me,Ht.restore(JSON.parse(t))),i}static registerGlobalSerializationPlugin(t,i){mn().serializationPlugins.set(t,i??t)}static unregisterGlobalSerializationPlugin(t){mn().serializationPlugins.delete(t)}static registerGlobalBuildPlugin(t,i){mn().buildPlugins.set(t,i??t)}static unregisterGlobalBuildPlugin(t){mn().buildPlugins.delete(t)}addSerializationPlugin(t){pe(this,kn).push(t)}addBuildPlugin(t){pe(this,Tn).push(t)}addIntentResolver(t,i){if(pe(this,Bi).has(t)&&pe(this,Bi).get(t)!==i)throw new Error(`Intent resolver for ${t} already exists`);pe(this,Bi).set(t,i)}setSender(t){pe(this,me).sender=t}setSenderIfNotSet(t){pe(this,me).sender||(pe(this,me).sender=t)}setExpiration(t){pe(this,me).expiration=t?Oe(Gc,t):null}setGasPrice(t){pe(this,me).gasConfig.price=String(t)}setGasBudget(t){pe(this,me).gasConfig.budget=String(t)}setGasBudgetIfNotSet(t){pe(this,me).gasData.budget==null&&(pe(this,me).gasConfig.budget=String(t))}setGasOwner(t){pe(this,me).gasConfig.owner=t}setGasPayment(t){pe(this,me).gasConfig.payment=t.map(i=>Oe(Ii,i))}get blockData(){return ba(pe(this,me).snapshot())}getData(){return pe(this,me).snapshot()}get[Xc](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:ah(t=>cs(t)?pe(this,me).addInput("pure",{$kind:"Pure",Pure:{bytes:t.toBase64()}}):pe(this,me).addInput("pure",Fo(pa,t)?Oe(pa,t):t instanceof Uint8Array?gi.Pure(t):{$kind:"UnresolvedPure",UnresolvedPure:{value:t}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...t){return this.object(gi.ObjectRef(...t))}receivingRef(...t){return this.object(gi.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(gi.SharedObjectRef(...t))}add(t){if(typeof t=="function")return t(this);const i=pe(this,me).commands.push(t);return dh(i-1)}splitCoins(t,i){return this.add(Pi.SplitCoins(typeof t=="string"?this.object(t):pi(this,zt,gs).call(this,t),i.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):pi(this,zt,cr).call(this,n))))}mergeCoins(t,i){return this.add(Pi.MergeCoins(this.object(t),i.map(n=>this.object(n))))}publish({modules:t,dependencies:i}){return this.add(Pi.Publish({modules:t,dependencies:i}))}upgrade({modules:t,dependencies:i,package:n,ticket:r}){return this.add(Pi.Upgrade({modules:t,dependencies:i,package:n,ticket:this.object(r)}))}moveCall({arguments:t,...i}){return this.add(Pi.MoveCall({...i,arguments:t==null?void 0:t.map(n=>pi(this,zt,cr).call(this,n))}))}transferObjects(t,i){return this.add(Pi.TransferObjects(t.map(n=>this.object(n)),typeof i=="string"?this.pure.address(i):pi(this,zt,cr).call(this,i)))}makeMoveVec({type:t,elements:i}){return this.add(Pi.MakeMoveVec({type:t,elements:i.map(n=>this.object(n))}))}serialize(){return JSON.stringify(ba(pe(this,me).snapshot()))}async toJSON(t={}){return await this.prepareForSerialization(t),JSON.stringify(Oe(zf,pe(this,me).snapshot()),(i,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(t){const{signer:i,...n}=t,r=await this.build(n);return i.signTransaction(r)}async build(t={}){return await this.prepareForSerialization(t),await pi(this,zt,Ko).call(this,t),pe(this,me).build({onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await pi(this,zt,Ko).call(this,t),pe(this,me).getDigest()}async prepareForSerialization(t){var r;const i=new Set;for(const o of pe(this,me).commands)o.$Intent&&i.add(o.$Intent.name);const n=[...pe(this,kn)];for(const o of i)if(!((r=t.supportedIntents)!=null&&r.includes(o))){if(!pe(this,Bi).has(o))throw new Error(`Missing intent resolver for ${o}`);n.push(pe(this,Bi).get(o))}await pi(this,zt,ys).call(this,n,t)}};kn=new WeakMap;Tn=new WeakMap;Bi=new WeakMap;me=new WeakMap;zt=new WeakSet;cr=function(e){return cs(e)?this.pure(e):pi(this,zt,gs).call(this,e)};gs=function(e){return typeof e=="function"?Oe(Ce,e(this)):Oe(Ce,e)};Ko=async function(e){if(!e.onlyTransactionKind&&!pe(this,me).sender)throw new Error("Missing transaction sender");await pi(this,zt,ys).call(this,[...pe(this,Tn),Xf],e)};ys=async function(e,t){const i=n=>{if(n>=e.length)return()=>{};const r=e[n];return async()=>{const o=i(n+1);let s=!1,a=!1;if(await r(pe(this,me),t,async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await o(),a=!0}),!s)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await i(0)()};let R=lh,Xn;const uh=new Uint8Array(16);function fh(){if(!Xn&&(Xn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xn(uh)}const wt=[];for(let e=0;e<256;++e)wt.push((e+256).toString(16).slice(1));function hh(e,t=0){return wt[e[t+0]]+wt[e[t+1]]+wt[e[t+2]]+wt[e[t+3]]+"-"+wt[e[t+4]]+wt[e[t+5]]+"-"+wt[e[t+6]]+wt[e[t+7]]+"-"+wt[e[t+8]]+wt[e[t+9]]+"-"+wt[e[t+10]]+wt[e[t+11]]+wt[e[t+12]]+wt[e[t+13]]+wt[e[t+14]]+wt[e[t+15]]}const ph=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ka={randomUUID:ph};function Jn(e,t,i){if(ka.randomUUID&&!t&&!e)return ka.randomUUID();e=e||{};const n=e.random||(e.rng||fh)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){i=i||0;for(let r=0;r<16;++r)t[i+r]=n[r];return t}return hh(n)}function Zc(e,t){return function(){return e.apply(t,arguments)}}const{toString:_h}=Object.prototype,{getPrototypeOf:ws}=Object,Mr=(e=>t=>{const i=_h.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ei=e=>(e=e.toLowerCase(),t=>Mr(t)===e),Er=e=>t=>typeof t===e,{isArray:hn}=Array,qn=Er("undefined");function mh(e){return e!==null&&!qn(e)&&e.constructor!==null&&!qn(e.constructor)&&Dt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qc=ei("ArrayBuffer");function bh(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Qc(e.buffer),t}const gh=Er("string"),Dt=Er("function"),Yc=Er("number"),Br=e=>e!==null&&typeof e=="object",yh=e=>e===!0||e===!1,dr=e=>{if(Mr(e)!=="object")return!1;const t=ws(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wh=ei("Date"),vh=ei("File"),kh=ei("Blob"),Ch=ei("FileList"),xh=e=>Br(e)&&Dt(e.pipe),Ah=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Dt(e.append)&&((t=Mr(e))==="formdata"||t==="object"&&Dt(e.toString)&&e.toString()==="[object FormData]"))},Sh=ei("URLSearchParams"),[Th,Oh,Ih,Ph]=["ReadableStream","Request","Response","Headers"].map(ei),jh=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vn(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let n,r;if(typeof e!="object"&&(e=[e]),hn(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const o=i?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let a;for(n=0;n<s;n++)a=o[n],t.call(null,e[a],a,e)}}function ed(e,t){t=t.toLowerCase();const i=Object.keys(e);let n=i.length,r;for(;n-- >0;)if(r=i[n],t===r.toLowerCase())return r;return null}const qi=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),td=e=>!qn(e)&&e!==qi;function zo(){const{caseless:e}=td(this)&&this||{},t={},i=(n,r)=>{const o=e&&ed(t,r)||r;dr(t[o])&&dr(n)?t[o]=zo(t[o],n):dr(n)?t[o]=zo({},n):hn(n)?t[o]=n.slice():t[o]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Vn(arguments[n],i);return t}const Mh=(e,t,i,{allOwnKeys:n}={})=>(Vn(t,(r,o)=>{i&&Dt(r)?e[o]=Zc(r,i):e[o]=r},{allOwnKeys:n}),e),Eh=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Bh=(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},Dh=(e,t,i,n)=>{let r,o,s;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)s=r[o],(!n||n(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=i!==!1&&ws(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},Nh=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return n!==-1&&n===i},Rh=e=>{if(!e)return null;if(hn(e))return e;let t=e.length;if(!Yc(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},$h=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ws(Uint8Array)),qh=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},Fh=(e,t)=>{let i;const n=[];for(;(i=e.exec(t))!==null;)n.push(i);return n},Lh=ei("HTMLFormElement"),Uh=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,r){return n.toUpperCase()+r}),Ca=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),Kh=ei("RegExp"),id=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};Vn(i,(r,o)=>{let s;(s=t(r,o,e))!==!1&&(n[o]=s||r)}),Object.defineProperties(e,n)},Vh=e=>{id(e,(t,i)=>{if(Dt(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=e[i];if(Dt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},zh=(e,t)=>{const i={},n=r=>{r.forEach(o=>{i[o]=!0})};return hn(e)?n(e):n(String(e).split(t)),i},Gh=()=>{},Wh=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,wo="abcdefghijklmnopqrstuvwxyz",xa="0123456789",nd={DIGIT:xa,ALPHA:wo,ALPHA_DIGIT:wo+wo.toUpperCase()+xa},Hh=(e=16,t=nd.ALPHA_DIGIT)=>{let i="";const{length:n}=t;for(;e--;)i+=t[Math.random()*n|0];return i};function Xh(e){return!!(e&&Dt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Jh=e=>{const t=new Array(10),i=(n,r)=>{if(Br(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;const o=hn(n)?[]:{};return Vn(n,(s,a)=>{const c=i(s,r+1);!qn(c)&&(o[a]=c)}),t[r]=void 0,o}}return n};return i(e,0)},Zh=ei("AsyncFunction"),Qh=e=>e&&(Br(e)||Dt(e))&&Dt(e.then)&&Dt(e.catch),rd=((e,t)=>e?setImmediate:t?((i,n)=>(qi.addEventListener("message",({source:r,data:o})=>{r===qi&&o===i&&n.length&&n.shift()()},!1),r=>{n.push(r),qi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Dt(qi.postMessage)),Yh=typeof queueMicrotask<"u"?queueMicrotask.bind(qi):typeof process<"u"&&process.nextTick||rd,D={isArray:hn,isArrayBuffer:Qc,isBuffer:mh,isFormData:Ah,isArrayBufferView:bh,isString:gh,isNumber:Yc,isBoolean:yh,isObject:Br,isPlainObject:dr,isReadableStream:Th,isRequest:Oh,isResponse:Ih,isHeaders:Ph,isUndefined:qn,isDate:wh,isFile:vh,isBlob:kh,isRegExp:Kh,isFunction:Dt,isStream:xh,isURLSearchParams:Sh,isTypedArray:$h,isFileList:Ch,forEach:Vn,merge:zo,extend:Mh,trim:jh,stripBOM:Eh,inherits:Bh,toFlatObject:Dh,kindOf:Mr,kindOfTest:ei,endsWith:Nh,toArray:Rh,forEachEntry:qh,matchAll:Fh,isHTMLForm:Lh,hasOwnProperty:Ca,hasOwnProp:Ca,reduceDescriptors:id,freezeMethods:Vh,toObjectSet:zh,toCamelCase:Uh,noop:Gh,toFiniteNumber:Wh,findKey:ed,global:qi,isContextDefined:td,ALPHABET:nd,generateString:Hh,isSpecCompliantForm:Xh,toJSONObject:Jh,isAsyncFn:Zh,isThenable:Qh,setImmediate:rd,asap:Yh};function ae(e,t,i,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}D.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const od=ae.prototype,sd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sd[e]={value:e}});Object.defineProperties(ae,sd);Object.defineProperty(od,"isAxiosError",{value:!0});ae.from=(e,t,i,n,r,o)=>{const s=Object.create(od);return D.toFlatObject(e,s,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ae.call(s,e.message,t,i,n,r),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const ep=null;function Go(e){return D.isPlainObject(e)||D.isArray(e)}function ad(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function Aa(e,t,i){return e?e.concat(t).map(function(r,o){return r=ad(r),!i&&o?"["+r+"]":r}).join(i?".":""):t}function tp(e){return D.isArray(e)&&!e.some(Go)}const ip=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function Dr(e,t,i){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=D.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,P){return!D.isUndefined(P[O])});const n=i.metaTokens,r=i.visitor||l,o=i.dots,s=i.indexes,c=(i.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(r))throw new TypeError("visitor must be a function");function d(k){if(k===null)return"";if(D.isDate(k))return k.toISOString();if(!c&&D.isBlob(k))throw new ae("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(k)||D.isTypedArray(k)?c&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function l(k,O,P){let M=k;if(k&&!P&&typeof k=="object"){if(D.endsWith(O,"{}"))O=n?O:O.slice(0,-2),k=JSON.stringify(k);else if(D.isArray(k)&&tp(k)||(D.isFileList(k)||D.endsWith(O,"[]"))&&(M=D.toArray(k)))return O=ad(O),M.forEach(function(B,q){!(D.isUndefined(B)||B===null)&&t.append(s===!0?Aa([O],q,o):s===null?O:O+"[]",d(B))}),!1}return Go(k)?!0:(t.append(Aa(P,O,o),d(k)),!1)}const h=[],_=Object.assign(ip,{defaultVisitor:l,convertValue:d,isVisitable:Go});function y(k,O){if(!D.isUndefined(k)){if(h.indexOf(k)!==-1)throw Error("Circular reference detected in "+O.join("."));h.push(k),D.forEach(k,function(M,j){(!(D.isUndefined(M)||M===null)&&r.call(t,M,D.isString(j)?j.trim():j,O,_))===!0&&y(M,O?O.concat(j):[j])}),h.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return y(e),t}function Sa(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function vs(e,t){this._pairs=[],e&&Dr(e,this,t)}const cd=vs.prototype;cd.append=function(t,i){this._pairs.push([t,i])};cd.toString=function(t){const i=t?function(n){return t.call(this,n,Sa)}:Sa;return this._pairs.map(function(r){return i(r[0])+"="+i(r[1])},"").join("&")};function np(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dd(e,t,i){if(!t)return e;const n=i&&i.encode||np,r=i&&i.serialize;let o;if(r?o=r(t,i):o=D.isURLSearchParams(t)?t.toString():new vs(t,i).toString(n),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class rp{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Ta=rp,ld={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},op=typeof URLSearchParams<"u"?URLSearchParams:vs,sp=typeof FormData<"u"?FormData:null,ap=typeof Blob<"u"?Blob:null,cp={isBrowser:!0,classes:{URLSearchParams:op,FormData:sp,Blob:ap},protocols:["http","https","file","blob","url","data"]},ks=typeof window<"u"&&typeof document<"u",Wo=typeof navigator=="object"&&navigator||void 0,dp=ks&&(!Wo||["ReactNative","NativeScript","NS"].indexOf(Wo.product)<0),lp=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),up=ks&&window.location.href||"http://localhost",fp=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ks,hasStandardBrowserEnv:dp,hasStandardBrowserWebWorkerEnv:lp,navigator:Wo,origin:up},Symbol.toStringTag,{value:"Module"})),Nt={...fp,...cp};function hp(e,t){return Dr(e,new Nt.classes.URLSearchParams,Object.assign({visitor:function(i,n,r,o){return Nt.isNode&&D.isBuffer(i)?(this.append(n,i.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function pp(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _p(e){const t={},i=Object.keys(e);let n;const r=i.length;let o;for(n=0;n<r;n++)o=i[n],t[o]=e[o];return t}function ud(e){function t(i,n,r,o){let s=i[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),c=o>=i.length;return s=!s&&D.isArray(r)?r.length:s,c?(D.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!a):((!r[s]||!D.isObject(r[s]))&&(r[s]=[]),t(i,n,r[s],o)&&D.isArray(r[s])&&(r[s]=_p(r[s])),!a)}if(D.isFormData(e)&&D.isFunction(e.entries)){const i={};return D.forEachEntry(e,(n,r)=>{t(pp(n),r,i,0)}),i}return null}function mp(e,t,i){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(e)}const Cs={transitional:ld,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const n=i.getContentType()||"",r=n.indexOf("application/json")>-1,o=D.isObject(t);if(o&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return r?JSON.stringify(ud(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return hp(t,this.formSerializer).toString();if((a=D.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Dr(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||r?(i.setContentType("application/json",!1),mp(t)):t}],transformResponse:[function(t){const i=this.transitional||Cs.transitional,n=i&&i.forcedJSONParsing,r=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(n&&!this.responseType||r)){const s=!(i&&i.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?ae.from(a,ae.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nt.classes.FormData,Blob:Nt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{Cs.headers[e]={}});const xs=Cs,bp=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gp=e=>{const t={};let i,n,r;return e&&e.split(`
`).forEach(function(s){r=s.indexOf(":"),i=s.substring(0,r).trim().toLowerCase(),n=s.substring(r+1).trim(),!(!i||t[i]&&bp[i])&&(i==="set-cookie"?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)}),t},Oa=Symbol("internals");function bn(e){return e&&String(e).trim().toLowerCase()}function lr(e){return e===!1||e==null?e:D.isArray(e)?e.map(lr):String(e)}function yp(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}const wp=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function vo(e,t,i,n,r){if(D.isFunction(n))return n.call(this,t,i);if(r&&(t=i),!!D.isString(t)){if(D.isString(n))return t.indexOf(n)!==-1;if(D.isRegExp(n))return n.test(t)}}function vp(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n)}function kp(e,t){const i=D.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+i,{value:function(r,o,s){return this[n].call(this,t,r,o,s)},configurable:!0})})}class Nr{constructor(t){t&&this.set(t)}set(t,i,n){const r=this;function o(a,c,d){const l=bn(c);if(!l)throw new Error("header name must be a non-empty string");const h=D.findKey(r,l);(!h||r[h]===void 0||d===!0||d===void 0&&r[h]!==!1)&&(r[h||c]=lr(a))}const s=(a,c)=>D.forEach(a,(d,l)=>o(d,l,c));if(D.isPlainObject(t)||t instanceof this.constructor)s(t,i);else if(D.isString(t)&&(t=t.trim())&&!wp(t))s(gp(t),i);else if(D.isHeaders(t))for(const[a,c]of t.entries())o(c,a,n);else t!=null&&o(i,t,n);return this}get(t,i){if(t=bn(t),t){const n=D.findKey(this,t);if(n){const r=this[n];if(!i)return r;if(i===!0)return yp(r);if(D.isFunction(i))return i.call(this,r,n);if(D.isRegExp(i))return i.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=bn(t),t){const n=D.findKey(this,t);return!!(n&&this[n]!==void 0&&(!i||vo(this,this[n],n,i)))}return!1}delete(t,i){const n=this;let r=!1;function o(s){if(s=bn(s),s){const a=D.findKey(n,s);a&&(!i||vo(n,n[a],a,i))&&(delete n[a],r=!0)}}return D.isArray(t)?t.forEach(o):o(t),r}clear(t){const i=Object.keys(this);let n=i.length,r=!1;for(;n--;){const o=i[n];(!t||vo(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const i=this,n={};return D.forEach(this,(r,o)=>{const s=D.findKey(n,o);if(s){i[s]=lr(r),delete i[o];return}const a=t?vp(o):String(o).trim();a!==o&&delete i[o],i[a]=lr(r),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return D.forEach(this,(n,r)=>{n!=null&&n!==!1&&(i[r]=t&&D.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const n=new this(t);return i.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[Oa]=this[Oa]={accessors:{}}).accessors,r=this.prototype;function o(s){const a=bn(s);n[a]||(kp(r,s),n[a]=!0)}return D.isArray(t)?t.forEach(o):o(t),this}}Nr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(Nr.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[i]=n}}});D.freezeMethods(Nr);const Jt=Nr;function ko(e,t){const i=this||xs,n=t||i,r=Jt.from(n.headers);let o=n.data;return D.forEach(e,function(a){o=a.call(i,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function fd(e){return!!(e&&e.__CANCEL__)}function pn(e,t,i){ae.call(this,e??"canceled",ae.ERR_CANCELED,t,i),this.name="CanceledError"}D.inherits(pn,ae,{__CANCEL__:!0});function hd(e,t,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(new ae("Request failed with status code "+i.status,[ae.ERR_BAD_REQUEST,ae.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function Cp(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function xp(e,t){e=e||10;const i=new Array(e),n=new Array(e);let r=0,o=0,s;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),l=n[o];s||(s=d),i[r]=c,n[r]=d;let h=o,_=0;for(;h!==r;)_+=i[h++],h=h%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),d-s<t)return;const y=l&&d-l;return y?Math.round(_*1e3/y):void 0}}function Ap(e,t){let i=0,n=1e3/t,r,o;const s=(d,l=Date.now())=>{i=l,r=null,o&&(clearTimeout(o),o=null),e.apply(null,d)};return[(...d)=>{const l=Date.now(),h=l-i;h>=n?s(d,l):(r=d,o||(o=setTimeout(()=>{o=null,s(r)},n-h)))},()=>r&&s(r)]}const yr=(e,t,i=3)=>{let n=0;const r=xp(50,250);return Ap(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,c=s-n,d=r(c),l=s<=a;n=s;const h={loaded:s,total:a,progress:a?s/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&l?(a-s)/d:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(h)},i)},Ia=(e,t)=>{const i=e!=null;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},Pa=e=>(...t)=>D.asap(()=>e(...t)),Sp=Nt.hasStandardBrowserEnv?function(){const t=Nt.navigator&&/(msie|trident)/i.test(Nt.navigator.userAgent),i=document.createElement("a");let n;function r(o){let s=o;return t&&(i.setAttribute("href",s),s=i.href),i.setAttribute("href",s),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=r(window.location.href),function(s){const a=D.isString(s)?r(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}(),Tp=Nt.hasStandardBrowserEnv?{write(e,t,i,n,r,o){const s=[e+"="+encodeURIComponent(t)];D.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),D.isString(n)&&s.push("path="+n),D.isString(r)&&s.push("domain="+r),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Op(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ip(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function pd(e,t){return e&&!Op(t)?Ip(e,t):t}const ja=e=>e instanceof Jt?{...e}:e;function Vi(e,t){t=t||{};const i={};function n(d,l,h){return D.isPlainObject(d)&&D.isPlainObject(l)?D.merge.call({caseless:h},d,l):D.isPlainObject(l)?D.merge({},l):D.isArray(l)?l.slice():l}function r(d,l,h){if(D.isUndefined(l)){if(!D.isUndefined(d))return n(void 0,d,h)}else return n(d,l,h)}function o(d,l){if(!D.isUndefined(l))return n(void 0,l)}function s(d,l){if(D.isUndefined(l)){if(!D.isUndefined(d))return n(void 0,d)}else return n(void 0,l)}function a(d,l,h){if(h in t)return n(d,l);if(h in e)return n(void 0,d)}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(d,l)=>r(ja(d),ja(l),!0)};return D.forEach(Object.keys(Object.assign({},e,t)),function(l){const h=c[l]||r,_=h(e[l],t[l],l);D.isUndefined(_)&&h!==a||(i[l]=_)}),i}const _d=e=>{const t=Vi({},e);let{data:i,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:o,headers:s,auth:a}=t;t.headers=s=Jt.from(s),t.url=dd(pd(t.baseURL,t.url),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(D.isFormData(i)){if(Nt.hasStandardBrowserEnv||Nt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[d,...l]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...l].join("; "))}}if(Nt.hasStandardBrowserEnv&&(n&&D.isFunction(n)&&(n=n(t)),n||n!==!1&&Sp(t.url))){const d=r&&o&&Tp.read(o);d&&s.set(r,d)}return t},Pp=typeof XMLHttpRequest<"u",jp=Pp&&function(e){return new Promise(function(i,n){const r=_d(e);let o=r.data;const s=Jt.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=r,l,h,_,y,k;function O(){y&&y(),k&&k(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let P=new XMLHttpRequest;P.open(r.method.toUpperCase(),r.url,!0),P.timeout=r.timeout;function M(){if(!P)return;const B=Jt.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),X={data:!a||a==="text"||a==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:B,config:e,request:P};hd(function(fe){i(fe),O()},function(fe){n(fe),O()},X),P=null}"onloadend"in P?P.onloadend=M:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(M)},P.onabort=function(){P&&(n(new ae("Request aborted",ae.ECONNABORTED,e,P)),P=null)},P.onerror=function(){n(new ae("Network Error",ae.ERR_NETWORK,e,P)),P=null},P.ontimeout=function(){let q=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const X=r.transitional||ld;r.timeoutErrorMessage&&(q=r.timeoutErrorMessage),n(new ae(q,X.clarifyTimeoutError?ae.ETIMEDOUT:ae.ECONNABORTED,e,P)),P=null},o===void 0&&s.setContentType(null),"setRequestHeader"in P&&D.forEach(s.toJSON(),function(q,X){P.setRequestHeader(X,q)}),D.isUndefined(r.withCredentials)||(P.withCredentials=!!r.withCredentials),a&&a!=="json"&&(P.responseType=r.responseType),d&&([_,k]=yr(d,!0),P.addEventListener("progress",_)),c&&P.upload&&([h,y]=yr(c),P.upload.addEventListener("progress",h),P.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(l=B=>{P&&(n(!B||B.type?new pn(null,e,P):B),P.abort(),P=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const j=Cp(r.url);if(j&&Nt.protocols.indexOf(j)===-1){n(new ae("Unsupported protocol "+j+":",ae.ERR_BAD_REQUEST,e));return}P.send(o||null)})},Mp=(e,t)=>{let i=new AbortController,n;const r=function(c){if(!n){n=!0,s();const d=c instanceof Error?c:this.reason;i.abort(d instanceof ae?d:new pn(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{r(new ae(`timeout ${t} of ms exceeded`,ae.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",r):c.unsubscribe(r))}),e=null)};e.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",r));const{signal:a}=i;return a.unsubscribe=s,[a,()=>{o&&clearTimeout(o),o=null}]},Ep=Mp,Bp=function*(e,t){let i=e.byteLength;if(!t||i<t){yield e;return}let n=0,r;for(;n<i;)r=n+t,yield e.slice(n,r),n=r},Dp=async function*(e,t,i){for await(const n of e)yield*Bp(ArrayBuffer.isView(n)?n:await i(String(n)),t)},Ma=(e,t,i,n,r)=>{const o=Dp(e,t,r);let s=0,a,c=d=>{a||(a=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:l,value:h}=await o.next();if(l){c(),d.close();return}let _=h.byteLength;if(i){let y=s+=_;i(y)}d.enqueue(new Uint8Array(h))}catch(l){throw c(l),l}},cancel(d){return c(d),o.return()}},{highWaterMark:2})},Rr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",md=Rr&&typeof ReadableStream=="function",Ho=Rr&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),bd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Np=md&&bd(()=>{let e=!1;const t=new Request(Nt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ea=64*1024,Xo=md&&bd(()=>D.isReadableStream(new Response("").body)),wr={stream:Xo&&(e=>e.body)};Rr&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!wr[t]&&(wr[t]=D.isFunction(e[t])?i=>i[t]():(i,n)=>{throw new ae(`Response type '${t}' is not supported`,ae.ERR_NOT_SUPPORT,n)})})})(new Response);const Rp=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await Ho(e)).byteLength},$p=async(e,t)=>{const i=D.toFiniteNumber(e.getContentLength());return i??Rp(t)},qp=Rr&&(async e=>{let{url:t,method:i,data:n,signal:r,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:d,headers:l,withCredentials:h="same-origin",fetchOptions:_}=_d(e);d=d?(d+"").toLowerCase():"text";let[y,k]=r||o||s?Ep([r,o],s):[],O,P;const M=()=>{!O&&setTimeout(()=>{y&&y.unsubscribe()}),O=!0};let j;try{if(c&&Np&&i!=="get"&&i!=="head"&&(j=await $p(l,n))!==0){let fe=new Request(t,{method:"POST",body:n,duplex:"half"}),ve;if(D.isFormData(n)&&(ve=fe.headers.get("content-type"))&&l.setContentType(ve),fe.body){const[_t,Y]=Ia(j,yr(Pa(c)));n=Ma(fe.body,Ea,_t,Y,Ho)}}D.isString(h)||(h=h?"include":"omit");const B="credentials"in Request.prototype;P=new Request(t,{..._,signal:y,method:i.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:B?h:void 0});let q=await fetch(P);const X=Xo&&(d==="stream"||d==="response");if(Xo&&(a||X)){const fe={};["status","statusText","headers"].forEach(H=>{fe[H]=q[H]});const ve=D.toFiniteNumber(q.headers.get("content-length")),[_t,Y]=a&&Ia(ve,yr(Pa(a),!0))||[];q=new Response(Ma(q.body,Ea,_t,()=>{Y&&Y(),X&&M()},Ho),fe)}d=d||"text";let Z=await wr[D.findKey(wr,d)||"text"](q,e);return!X&&M(),k&&k(),await new Promise((fe,ve)=>{hd(fe,ve,{data:Z,headers:Jt.from(q.headers),status:q.status,statusText:q.statusText,config:e,request:P})})}catch(B){throw M(),B&&B.name==="TypeError"&&/fetch/i.test(B.message)?Object.assign(new ae("Network Error",ae.ERR_NETWORK,e,P),{cause:B.cause||B}):ae.from(B,B&&B.code,e,P)}}),Jo={http:ep,xhr:jp,fetch:qp};D.forEach(Jo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ba=e=>`- ${e}`,Fp=e=>D.isFunction(e)||e===null||e===!1,gd={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let i,n;const r={};for(let o=0;o<t;o++){i=e[o];let s;if(n=i,!Fp(i)&&(n=Jo[(s=String(i)).toLowerCase()],n===void 0))throw new ae(`Unknown adapter '${s}'`);if(n)break;r[s||"#"+o]=n}if(!n){const o=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?`since :
`+o.map(Ba).join(`
`):" "+Ba(o[0]):"as no adapter specified";throw new ae("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:Jo};function Co(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pn(null,e)}function Da(e){return Co(e),e.headers=Jt.from(e.headers),e.data=ko.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),gd.getAdapter(e.adapter||xs.adapter)(e).then(function(n){return Co(e),n.data=ko.call(e,e.transformResponse,n),n.headers=Jt.from(n.headers),n},function(n){return fd(n)||(Co(e),n&&n.response&&(n.response.data=ko.call(e,e.transformResponse,n.response),n.response.headers=Jt.from(n.response.headers))),Promise.reject(n)})}const yd="1.7.5",As={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{As[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Na={};As.transitional=function(t,i,n){function r(o,s){return"[Axios v"+yd+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return(o,s,a)=>{if(t===!1)throw new ae(r(s," has been removed"+(i?" in "+i:"")),ae.ERR_DEPRECATED);return i&&!Na[s]&&(Na[s]=!0,console.warn(r(s," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(o,s,a):!0}};function Lp(e,t,i){if(typeof e!="object")throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const o=n[r],s=t[o];if(s){const a=e[o],c=a===void 0||s(a,o,e);if(c!==!0)throw new ae("option "+o+" must be "+c,ae.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ae("Unknown option "+o,ae.ERR_BAD_OPTION)}}const Zo={assertOptions:Lp,validators:As},ki=Zo.validators;class vr{constructor(t){this.defaults=t,this.interceptors={request:new Ta,response:new Ta}}async request(t,i){try{return await this._request(t,i)}catch(n){if(n instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=Vi(this.defaults,i);const{transitional:n,paramsSerializer:r,headers:o}=i;n!==void 0&&Zo.assertOptions(n,{silentJSONParsing:ki.transitional(ki.boolean),forcedJSONParsing:ki.transitional(ki.boolean),clarifyTimeoutError:ki.transitional(ki.boolean)},!1),r!=null&&(D.isFunction(r)?i.paramsSerializer={serialize:r}:Zo.assertOptions(r,{encode:ki.function,serialize:ki.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let s=o&&D.merge(o.common,o[i.method]);o&&D.forEach(["delete","get","head","post","put","patch","common"],k=>{delete o[k]}),i.headers=Jt.concat(s,o);const a=[];let c=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(i)===!1||(c=c&&O.synchronous,a.unshift(O.fulfilled,O.rejected))});const d=[];this.interceptors.response.forEach(function(O){d.push(O.fulfilled,O.rejected)});let l,h=0,_;if(!c){const k=[Da.bind(this),void 0];for(k.unshift.apply(k,a),k.push.apply(k,d),_=k.length,l=Promise.resolve(i);h<_;)l=l.then(k[h++],k[h++]);return l}_=a.length;let y=i;for(h=0;h<_;){const k=a[h++],O=a[h++];try{y=k(y)}catch(P){O.call(this,P);break}}try{l=Da.call(this,y)}catch(k){return Promise.reject(k)}for(h=0,_=d.length;h<_;)l=l.then(d[h++],d[h++]);return l}getUri(t){t=Vi(this.defaults,t);const i=pd(t.baseURL,t.url);return dd(i,t.params,t.paramsSerializer)}}D.forEach(["delete","get","head","options"],function(t){vr.prototype[t]=function(i,n){return this.request(Vi(n||{},{method:t,url:i,data:(n||{}).data}))}});D.forEach(["post","put","patch"],function(t){function i(n){return function(o,s,a){return this.request(Vi(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}vr.prototype[t]=i(),vr.prototype[t+"Form"]=i(!0)});const ur=vr;class Ss{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(o){i=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const s=new Promise(a=>{n.subscribe(a),o=a}).then(r);return s.cancel=function(){n.unsubscribe(o)},s},t(function(o,s,a){n.reason||(n.reason=new pn(o,s,a),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new Ss(function(r){t=r}),cancel:t}}}const Up=Ss;function Kp(e){return function(i){return e.apply(null,i)}}function Vp(e){return D.isObject(e)&&e.isAxiosError===!0}const Qo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qo).forEach(([e,t])=>{Qo[t]=e});const zp=Qo;function wd(e){const t=new ur(e),i=Zc(ur.prototype.request,t);return D.extend(i,ur.prototype,t,{allOwnKeys:!0}),D.extend(i,t,null,{allOwnKeys:!0}),i.create=function(r){return wd(Vi(e,r))},i}const pt=wd(xs);pt.Axios=ur;pt.CanceledError=pn;pt.CancelToken=Up;pt.isCancel=fd;pt.VERSION=yd;pt.toFormData=Dr;pt.AxiosError=ae;pt.Cancel=pt.CanceledError;pt.all=function(t){return Promise.all(t)};pt.spread=Kp;pt.isAxiosError=Vp;pt.mergeConfig=Vi;pt.AxiosHeaders=Jt;pt.formToJSON=e=>ud(D.isHTMLForm(e)?new FormData(e):e);pt.getAdapter=gd.getAdapter;pt.HttpStatusCode=zp;pt.default=pt;const Gp=pt,Wp="1.9.0",Hp="1.34.0",Xp={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class vd extends Error{}class kd extends vd{constructor(t,i){super(t),this.code=i,this.type=Xp[i]??"ServerError"}}class Jp extends vd{constructor(t,i,n){super(t),this.status=i,this.statusText=n}}var Cd=e=>{throw TypeError(e)},Ts=(e,t,i)=>t.has(e)||Cd("Cannot "+i),Te=(e,t,i)=>(Ts(e,t,"read from private field"),i?i.call(e):t.get(e)),Mi=(e,t,i)=>t.has(e)?Cd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),rn=(e,t,i,n)=>(Ts(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),xd=(e,t,i)=>(Ts(e,t,"access private method"),i),Zp=(e,t,i,n)=>({set _(r){rn(e,t,r,i)},get _(){return Te(e,t,n)}}),Di,On,mi,Fi,Fn,on,kr,Ad,Sd;function Qp(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const Yp={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class e0{constructor(t,i={}){if(Mi(this,kr),Mi(this,Di,0),Mi(this,On,0),Mi(this,mi,null),Mi(this,Fi,null),Mi(this,Fn,new Set),Mi(this,on,new Map),this.endpoint=t,this.options={...Yp,...i},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Qp(this.endpoint))}async makeRequest(t,i){const n=await xd(this,kr,Ad).call(this);return new Promise((r,o)=>{rn(this,Di,Te(this,Di)+1),Te(this,on).set(Te(this,Di),{resolve:r,reject:o,timeout:setTimeout(()=>{Te(this,on).delete(Te(this,Di)),o(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:Te(this,Di),method:t,params:i}))}).then(({error:r,result:o})=>{if(r)throw new kd(r.message,r.code);return o})}async subscribe(t){const i=new t0(t);return Te(this,Fn).add(i),await i.subscribe(this),()=>i.unsubscribe(this)}}Di=new WeakMap;On=new WeakMap;mi=new WeakMap;Fi=new WeakMap;Fn=new WeakMap;on=new WeakMap;kr=new WeakSet;Ad=function(){return Te(this,Fi)?Te(this,Fi):(rn(this,Fi,new Promise(e=>{var t;(t=Te(this,mi))==null||t.close(),rn(this,mi,new this.options.WebSocketConstructor(this.endpoint)),Te(this,mi).addEventListener("open",()=>{rn(this,On,0),e(Te(this,mi))}),Te(this,mi).addEventListener("close",()=>{Zp(this,On)._++,Te(this,On)<=this.options.maxReconnects&&setTimeout(()=>{xd(this,kr,Sd).call(this)},this.options.reconnectTimeout)}),Te(this,mi).addEventListener("message",({data:i})=>{let n;try{n=JSON.parse(i)}catch(r){console.error(new Error(`Failed to parse RPC message: ${i}`,{cause:r}));return}if("id"in n&&n.id!=null&&Te(this,on).has(n.id)){const{resolve:r,timeout:o}=Te(this,on).get(n.id);clearTimeout(o),r(n)}else if("params"in n){const{params:r}=n;Te(this,Fn).forEach(o=>{o.subscriptionId===r.subscription&&r.subscription===o.subscriptionId&&o.onMessage(r.result)})}})})),Te(this,Fi))};Sd=async function(){var e;return(e=Te(this,mi))==null||e.close(),rn(this,Fi,null),Promise.allSettled([...Te(this,Fn)].map(t=>t.subscribe(this)))};class t0{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:i}=this;return this.subscribed=!1,i==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[i]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const i=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=i)}}var Td=e=>{throw TypeError(e)},Os=(e,t,i)=>t.has(e)||Td("Cannot "+i),Lt=(e,t,i)=>(Os(e,t,"read from private field"),i?i.call(e):t.get(e)),Zn=(e,t,i)=>t.has(e)?Td("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Yo=(e,t,i,n)=>(Os(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),i0=(e,t,i)=>(Os(e,t,"access private method"),i),Cn,Wt,In,es,Od;class n0{constructor(t){Zn(this,es),Zn(this,Cn,0),Zn(this,Wt),Zn(this,In),Yo(this,Wt,t)}fetch(t,i){const n=Lt(this,Wt).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(t,i)}async request(t){var r,o;Yo(this,Cn,Lt(this,Cn)+1);const i=await this.fetch(((r=Lt(this,Wt).rpc)==null?void 0:r.url)??Lt(this,Wt).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Wp,"Client-Target-Api-Version":Hp,...(o=Lt(this,Wt).rpc)==null?void 0:o.headers},body:JSON.stringify({jsonrpc:"2.0",id:Lt(this,Cn),method:t.method,params:t.params})});if(!i.ok)throw new Jp(`Unexpected status code: ${i.status}`,i.status,i.statusText);const n=await i.json();if("error"in n&&n.error!=null)throw new kd(n.error.message,n.error.code);return n.result}async subscribe(t){const i=await i0(this,es,Od).call(this).subscribe(t);return async()=>!!await i()}}Cn=new WeakMap;Wt=new WeakMap;In=new WeakMap;es=new WeakSet;Od=function(){var e;if(!Lt(this,In)){const t=Lt(this,Wt).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Yo(this,In,new e0(((e=Lt(this,Wt).websocket)==null?void 0:e.url)??Lt(this,Wt).url,{WebSocketConstructor:t,...Lt(this,Wt).websocket}))}return Lt(this,In)};const r0=Symbol.for("@mysten/SuiClient");class o0{get[r0](){return!0}constructor(t){this.transport=t.transport??new n0({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!ni(de(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!ni(de(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!ni(de(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!ni(de(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,i){return await this.transport.request({method:t,params:i})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!ni(de(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!vn(be(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(n=>{if(!n||!vn(be(n)))throw new Error(`Invalid Sui Object id ${n}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!ua(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(n=>{if(!ua(n))throw new Error(`Invalid Transaction digest ${n}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock({transactionBlock:t,signature:i,options:n,requestType:r}){const o=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t=="string"?t:Tt(t),Array.isArray(i)?i:[i],n]});if(r==="WaitForLocalExecution")try{await this.waitForTransaction({digest:o.digest})}catch{}return o}async signAndExecuteTransaction({transaction:t,signer:i,...n}){let r;t instanceof Uint8Array?r=t:(t.setSenderIfNotSet(i.toSuiAddress()),r=await t.build({client:this}));const{signature:o,bytes:s}=await i.signTransaction(r);return this.executeTransactionBlock({transactionBlock:s,signature:o,...n})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!ni(de(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(i=>{if(!i||!vn(be(i)))throw new Error(`Invalid Sui Stake id ${i}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var n;let i;if(Jc(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),i=Tt(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")i=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)i=Tt(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,i,(n=t.gasPrice)==null?void 0:n.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Tt(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!vn(be(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),i=Dn(t.digest);return Nn(i.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...i}){const{nextCursor:n,hasNextPage:r,data:o}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[i.address,i.cursor,i.limit]});return{hasNextPage:r,nextCursor:n,data:o.map(s=>Iu(s,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransaction({signal:t,timeout:i=60*1e3,pollInterval:n=2*1e3,...r}){const o=AbortSignal.timeout(i),s=new Promise((a,c)=>{o.addEventListener("abort",()=>c(o.reason))});for(s.catch(()=>{});!o.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(r)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),s])}}throw o.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}var s0=Object.defineProperty,a0=(e,t,i)=>t in e?s0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,c0=(e,t,i)=>(a0(e,typeof t!="symbol"?t+"":t,i),i),$t=5*60*1e3,z=24*60*60*1e3;function _e(e){return Date.parse(new Date().toString())+e}var At=class{constructor(e,t=0){L(this,"overdueTime");L(this,"value");this.overdueTime=t,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};K.config({precision:64,rounding:K.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var vt=K,F=class extends Error{constructor(t,i){super(t);L(this,"message");L(this,"errorCode");this.message=t,this.errorCode=i}static isClmmpoolsErrorCode(t,i){return t instanceof F&&t.errorCode===i}},J=new b(0),ci=new b(1),$r=new b(2);$r.pow(new b(128));var cn=$r.pow(new b(64)).sub(ci),d0=$r.pow(new b(128)).sub(ci),ce=class{static toX64_BN(e){return e.mul(new b(2).pow(new b(64)))}static toX64_Decimal(e){return e.mul(vt.pow(2,64))}static toX64(e){return new b(e.mul(vt.pow(2,64)).floor().toFixed())}static fromX64(e){return new vt(e.toString()).mul(vt.pow(2,-64))}static fromX64_Decimal(e){return e.mul(vt.pow(2,-64))}static fromX64_BN(e){return e.div(new b(2).pow(new b(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(cn).gt(J)&&(t=t.add(ci)),t}static divRoundUp(e,t){return e.mod(t).eq(J)?e.div(t):e.div(t).add(new b(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(d0):e.sub(t)}static checkUnsignedSub(e,t){const i=e.sub(t);if(i.isNeg())throw new F("Unsigned integer sub overflow","UnsignedIntegerOverflow");return i}static checkMul(e,t,i){const n=e.mul(t);if(this.isOverflow(n,i))throw new F("Multiplication overflow","MultiplicationOverflow");return n}static checkMulDivFloor(e,t,i,n){if(i.eq(J))throw new F("Devide by zero","DivideByZero");const r=e.mul(t).div(i);if(this.isOverflow(r,n))throw new F("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivCeil(e,t,i,n){if(i.eq(J))throw new F("Devide by zero","DivideByZero");const r=e.mul(t).add(i.sub(ci)).div(i);if(this.isOverflow(r,n))throw new F("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivRound(e,t,i,n){if(i.eq(J))throw new F("Devide by zero","DivideByZero");const r=e.mul(t.add(i.shrn(1))).div(i);if(this.isOverflow(r,n))throw new F("Multiplication div overflow","MulDivOverflow");return r}static checkMulShiftRight(e,t,i,n){const r=e.mul(t).div(new b(2).pow(new b(i)));if(this.isOverflow(r,n))throw new F("Multiplication shift right overflow","MulShiftRightOverflow");return r}static checkMulShiftRight64RoundUpIf(e,t,i,n){const r=e.mul(t),s=n&&r.and(cn).gt(J)?r.shrn(64).add(ci):r.shrn(64);if(this.isOverflow(s,i))throw new F("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftLeft(e,t,i,n){const r=e.mul(t).shln(i);if(this.isOverflow(r,n))throw new F("Multiplication shift left overflow","MulShiftLeftOverflow");return r}static checkDivRoundUpIf(e,t,i){if(t.eq(J))throw new F("Devide by zero","DivideByZero");return i?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte($r.pow(new b(t)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(J)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new b("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new b(1)))}static neg_from(e){return e.eq(J)?e:this.u128_neg(e).add(new b(1)).or(new b(1).shln(127))}};function l0(e){return{coinA:e.coinTypeA,coinB:e.coinTypeB,currentSqrtPrice:new b(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new b(e.fee_growth_global_a),feeGrowthGlobalB:new b(e.fee_growth_global_b),feeProtocolCoinA:new b(e.fee_protocol_coin_a),feeProtocolCoinB:new b(e.fee_protocol_coin_b),feeRate:new b(e.fee_rate),liquidity:new b(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:""}}var ts=443636,is=-443636,qr="79226673515401279992447579055",Fr="4295048016",Yi=new b(1e6),$="0x0000000000000000000000000000000000000000000000000000000000000006",u0="partner",Pn="pool_script",Oi="pool_script_v2",Id="pool_script_v3",Li="router",xo="router_with_partner",Kt="fetcher_script",f0="expect_swap",Ra="utils",Ao="custodian_v2",h0="clob_v2",p0="endpoints_v2",Pd=(e=>(e.Deleted="Deleted",e.Exists="Exists",e.NotExists="NotExists",e))(Pd||{});function T(e){if(e.config===void 0)throw new F(`package: ${e.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return e.config}var _0=14,m0="59543866431248",b0="184467440737095516",g0="15793534762490258745",y0=443636;function w0(e,t,i){const n=e.toTwos(i).shln(t);return n.imaskn(i+1),n.fromTwos(i)}function le(e,t,i){const n=e.toTwos(i).shrn(t);return n.imaskn(i-t+1),n.fromTwos(i-t)}function v0(e){let t;return e&1?t=new b("79232123823359799118286999567"):t=new b("79228162514264337593543950336"),e&2&&(t=le(t.mul(new b("79236085330515764027303304731")),96,256)),e&4&&(t=le(t.mul(new b("79244008939048815603706035061")),96,256)),e&8&&(t=le(t.mul(new b("79259858533276714757314932305")),96,256)),e&16&&(t=le(t.mul(new b("79291567232598584799939703904")),96,256)),e&32&&(t=le(t.mul(new b("79355022692464371645785046466")),96,256)),e&64&&(t=le(t.mul(new b("79482085999252804386437311141")),96,256)),e&128&&(t=le(t.mul(new b("79736823300114093921829183326")),96,256)),e&256&&(t=le(t.mul(new b("80248749790819932309965073892")),96,256)),e&512&&(t=le(t.mul(new b("81282483887344747381513967011")),96,256)),e&1024&&(t=le(t.mul(new b("83390072131320151908154831281")),96,256)),e&2048&&(t=le(t.mul(new b("87770609709833776024991924138")),96,256)),e&4096&&(t=le(t.mul(new b("97234110755111693312479820773")),96,256)),e&8192&&(t=le(t.mul(new b("119332217159966728226237229890")),96,256)),e&16384&&(t=le(t.mul(new b("179736315981702064433883588727")),96,256)),e&32768&&(t=le(t.mul(new b("407748233172238350107850275304")),96,256)),e&65536&&(t=le(t.mul(new b("2098478828474011932436660412517")),96,256)),e&131072&&(t=le(t.mul(new b("55581415166113811149459800483533")),96,256)),e&262144&&(t=le(t.mul(new b("38992368544603139932233054999993551")),96,256)),le(t,32,256)}function k0(e){const t=Math.abs(e);let i;return t&1?i=new b("18445821805675392311"):i=new b("18446744073709551616"),t&2&&(i=le(i.mul(new b("18444899583751176498")),64,256)),t&4&&(i=le(i.mul(new b("18443055278223354162")),64,256)),t&8&&(i=le(i.mul(new b("18439367220385604838")),64,256)),t&16&&(i=le(i.mul(new b("18431993317065449817")),64,256)),t&32&&(i=le(i.mul(new b("18417254355718160513")),64,256)),t&64&&(i=le(i.mul(new b("18387811781193591352")),64,256)),t&128&&(i=le(i.mul(new b("18329067761203520168")),64,256)),t&256&&(i=le(i.mul(new b("18212142134806087854")),64,256)),t&512&&(i=le(i.mul(new b("17980523815641551639")),64,256)),t&1024&&(i=le(i.mul(new b("17526086738831147013")),64,256)),t&2048&&(i=le(i.mul(new b("16651378430235024244")),64,256)),t&4096&&(i=le(i.mul(new b("15030750278693429944")),64,256)),t&8192&&(i=le(i.mul(new b("12247334978882834399")),64,256)),t&16384&&(i=le(i.mul(new b("8131365268884726200")),64,256)),t&32768&&(i=le(i.mul(new b("3584323654723342297")),64,256)),t&65536&&(i=le(i.mul(new b("696457651847595233")),64,256)),t&131072&&(i=le(i.mul(new b("26294789957452057")),64,256)),t&262144&&(i=le(i.mul(new b("37481735321082")),64,256)),i}var G=class{static priceToSqrtPriceX64(e,t,i){return ce.toX64(e.mul(vt.pow(10,i-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,i){return ce.fromX64(e).pow(2).mul(vt.pow(10,t-i))}static tickIndexToSqrtPriceX64(e){return e>0?new b(v0(e)):new b(k0(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new b(qr))||e.lt(new b(Fr)))throw new F("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const t=e.bitLength()-1,i=new b(t-64),n=w0(i,32,128);let r=new b("8000000000000000","hex"),o=0,s=new b(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;r.gt(new b(0))&&o<_0;){a=a.mul(a);const k=a.shrn(127);a=a.shrn(63+k.toNumber()),s=s.add(r.mul(k)),r=r.shrn(1),o+=1}const c=s.shrn(32),l=n.add(c).mul(new b(m0)),h=le(l.sub(new b(b0)),64,128).toNumber(),_=le(l.add(new b(g0)),64,128).toNumber();return h===_?h:G.tickIndexToSqrtPriceX64(_).lte(e)?_:h}static tickIndexToPrice(e,t,i){return G.sqrtPriceX64ToPrice(G.tickIndexToSqrtPriceX64(e),t,i)}static priceToTickIndex(e,t,i){return G.sqrtPriceX64ToTickIndex(G.priceToSqrtPriceX64(e,t,i))}static priceToInitializableTickIndex(e,t,i,n){return G.getInitializableTickIndex(G.priceToTickIndex(e,t,i),n)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return G.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return G.getInitializableTickIndex(e,t)-t}};function bm(e){const t=[];for(const i of e){const n={objectId:i.objectId,index:Number(ht(BigInt(i.index)).toString()),sqrtPrice:i.sqrtPrice,liquidityNet:new b(BigInt.asIntN(128,BigInt(BigInt(i.liquidityNet.toString()))).toString()),liquidityGross:i.liquidityGross,feeGrowthOutsideA:i.feeGrowthOutsideA,feeGrowthOutsideB:i.feeGrowthOutsideB,rewardersGrowthOutside:[new b(i.rewardersGrowthOutside[0]),new b(i.rewardersGrowthOutside[1]),new b(i.rewardersGrowthOutside[2])]};t.push(n)}return t}function C0(e){return g(e).add(g(y0))}new b(365);new b(24);new b(3600);new b(.5);function gm(e,t,i,n){const r=Math.max(e,i),s=Math.min(t,n)-r,a=t-e,c=n-i,d=new K(a.toString()),l=new K(c.toString()),h=new K(s.toString());let _=new K("0");return s<0?_=new K("0"):a===s?_=l.div(h):c===s?_=h.div(d):_=h.mul(h).div(l).div(d),_}var ri=class{static getDefaultSqrtPriceLimit(e){return new b(e?Fr:qr)}static getDefaultOtherAmountThreshold(e){return e?J:cn}};function jd(e,t,i,n){if(i.eq(J))return e;const r=ce.checkMulShiftLeft(e,t,64,256),o=t.shln(64),s=ce.checkMul(e,i,256);if(!n&&o.lte(s))throw new F("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=n?ce.checkDivRoundUpIf(r,o.add(s),!0):ce.checkDivRoundUpIf(r,o.sub(s),!0);if(a.lt(new b(Fr)))throw new F("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new b(qr)))throw new F("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function Md(e,t,i,n){const r=ce.checkDivRoundUpIf(i.shln(64),t,!n),o=n?e.add(r):e.sub(r);if(o.lt(new b(Fr))||o.gt(new b(qr)))throw new F("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return o}function x0(e,t,i,n){return n?jd(e,t,i,!0):Md(e,t,i,!0)}function A0(e,t,i,n){return n?Md(e,t,i,!1):jd(e,t,i,!1)}function $a(e,t,i,n){const r=e.gt(t)?e.sub(t):t.sub(e);if(i.lte(J)||r.eq(J))return J;let o;if(n){const s=new b(i).mul(new b(r)).shln(64),a=t.mul(e),c=s.div(a);o=s.mod(a).eq(J)?c:c.add(ci)}else{const s=new b(i).mul(new b(r));o=s.and(cn).gt(J)?s.shrn(64).add(ci):s.shrn(64)}return o}function qa(e,t,i,n){const r=e.gt(t)?e.sub(t):t.sub(e);if(i.lte(J)||r.eq(J))return J;let o;if(n)o=i.mul(r).shrn(64);else{const s=i.mul(r).shln(64),a=t.mul(e);o=s.div(a)}return o}function S0(e,t,i,n,r,o){if(i===J)return{amountIn:J,amountOut:J,nextSqrtPrice:t,feeAmount:J};const s=e.gte(t);let a,c,d,l;if(o){const h=ce.checkMulDivFloor(n,ce.checkUnsignedSub(Yi,r),Yi,64),_=$a(e,t,i,s);_.gt(h)?(a=h,l=ce.checkUnsignedSub(n,h),d=x0(e,i,h,s)):(a=_,l=ce.checkMulDivCeil(a,r,Yi.sub(r),64),d=t),c=qa(e,d,i,s)}else{const h=qa(e,t,i,s);h.gt(n)?(c=n,d=A0(e,i,n,s)):(c=h,d=t),a=$a(e,d,i,s),l=ce.checkMulDivCeil(a,r,Yi.sub(r),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:d,feeAmount:l}}function T0(e,t,i,n,r){let o=i,s=n.liquidity,{currentSqrtPrice:a}=n;const c={amountIn:J,amountOut:J,feeAmount:J,refAmount:J,nextSqrtPrice:J,crossTickNum:0};let d,l;const h=ri.getDefaultSqrtPriceLimit(e);for(const _ of r){if(e&&n.currentTickIndex<_.index||!e&&n.currentTickIndex>=_.index||_===null)continue;e&&h.gt(_.sqrtPrice)||!e&&h.lt(_.sqrtPrice)?d=h:d=_.sqrtPrice;const y=S0(a,d,s,o,n.feeRate,t);if(y.amountIn.eq(J)||(o=t?o.sub(y.amountIn.add(y.feeAmount)):o.sub(y.amountOut)),c.amountIn=c.amountIn.add(y.amountIn),c.amountOut=c.amountOut.add(y.amountOut),c.feeAmount=c.feeAmount.add(y.feeAmount),y.nextSqrtPrice.eq(_.sqrtPrice)?(l=_.liquidityNet.mul(new b(-1)),e?ce.is_neg(l)?s=s.add(new b(Ct(BigInt(l.toString()),128))):s=s.add(l):ce.is_neg(l)?s=s.sub(new b(Ct(BigInt(l.toString()),128))):s=s.sub(l),a=_.sqrtPrice):a=y.nextSqrtPrice,c.crossTickNum+=1,o.eq(J))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function Qn(e,t,i){const n=b.min(e,t),r=b.max(e,t),o=ce.fromX64_BN(i.mul(r).mul(n)),s=r.sub(n);return o.div(s)}function Yn(e,t,i){const n=b.min(e,t),o=b.max(e,t).sub(n);return i.shln(64).div(o)}var gt=class{static updateFeeRate(e,t,i,n,r){const o=ce.checkMulDivCeil(t,new b(n),Yi,64),s=i===0?J:ce.checkMulDivFloor(t,new b(i),Yi,64),a=t.mul(o).mul(s);if(r?e.feeProtocolCoinA=e.feeProtocolCoinA.add(o):e.feeProtocolCoinB=e.feeProtocolCoinB.add(o),a.eq(J)||e.liquidity.eq(J))return{refFee:s,clmm:e};const c=a.shln(64).div(e.liquidity);return r?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:s,clmm:e}}static getCoinAmountFromLiquidity(e,t,i,n,r){const o=new vt(e.toString()),s=new vt(t.toString()),a=new vt(i.toString()),c=new vt(n.toString());let d,l;return t.lt(i)?(d=ce.toX64_Decimal(o).mul(c.sub(a)).div(a.mul(c)),l=new vt(0)):t.lt(n)?(d=ce.toX64_Decimal(o).mul(c.sub(s)).div(s.mul(c)),l=ce.fromX64_Decimal(o.mul(s.sub(a)))):(d=new vt(0),l=ce.fromX64_Decimal(o.mul(c.sub(a)))),r?{coinA:new b(d.ceil().toString()),coinB:new b(l.ceil().toString())}:{coinA:new b(d.floor().toString()),coinB:new b(l.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,t,i,n,r,o,s){const a=G.sqrtPriceX64ToTickIndex(s),c=G.tickIndexToSqrtPriceX64(e),d=G.tickIndexToSqrtPriceX64(t);let l;if(a<e){if(!n)throw new F("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");l=Qn(c,d,i)}else if(a>t){if(n)throw new F("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");l=Yn(d,c,i)}else n?l=Qn(s,d,i):l=Yn(s,c,i);const h=gt.getCoinAmountFromLiquidity(l,s,c,d,r),_=r?g(h.coinA.toString()).mul(1+o).toString():g(h.coinA.toString()).mul(1-o).toString(),y=r?g(h.coinB.toString()).mul(1+o).toString():g(h.coinB.toString()).mul(1-o).toString();return{coinAmountA:h.coinA,coinAmountB:h.coinB,tokenMaxA:r?new b(vt.ceil(_).toString()):new b(vt.floor(_).toString()),tokenMaxB:r?new b(vt.ceil(y).toString()):new b(vt.floor(y).toString()),liquidityAmount:l,fix_amount_a:n}}static estimateLiquidityFromcoinAmounts(e,t,i,n){if(t>i)throw new F("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const r=G.sqrtPriceX64ToTickIndex(e),o=G.tickIndexToSqrtPriceX64(t),s=G.tickIndexToSqrtPriceX64(i);if(r<t)return Qn(o,s,n.coinA);if(r>=i)return Yn(s,o,n.coinB);const a=Qn(e,s,n.coinA),c=Yn(e,o,n.coinB);return b.min(a,c)}static estCoinAmountsFromTotalAmount(e,t,i,n,r,o){const{ratioA:s,ratioB:a}=gt.calculateDepositRatioFixTokenA(e,t,i),c=g(n).mul(s).div(r),d=g(n).mul(a).div(o);return{amountA:c,amountB:d}}static calculateDepositRatioFixTokenA(e,t,i){const n=new b(1e8),{coinAmountB:r}=gt.estLiquidityAndcoinAmountFromOneAmounts(e,t,n,!0,!0,0,i),o=G.sqrtPriceX64ToPrice(i,0,0),s=g(n.toString()).mul(o),a=s.add(r.toString()),c=s.div(a),d=g(r.toString()).div(a);return{ratioA:c,ratioB:d}}};function Ed(e){return e.startsWith("0x")?`${e.slice(2)}`:e}var O0=0,Bd=1,I0=2;function Fa(e,t){return e===t?O0:e<t?Bd:I0}function P0(e,t){let i=0;const n=e.length<=t.length?e.length:t.length,r=Fa(e.length,t.length);for(;i<n;){const o=Fa(e.charCodeAt(i),t.charCodeAt(i));if(i+=1,o!==0)return o}return r}function ns(e,t){return P0(e,t)===Bd}function Cr(e,...t){const i=Array.isArray(t[t.length-1])?t.pop():[];let r=[e,...t].filter(Boolean).join("::");return i&&i.length&&(r+=`<${i.join(", ")}>`),r}function N(e){var t;try{let i=e.replace(/\s/g,"");const n=i.match(/(<.+>)$/),r=(t=n==null?void 0:n[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r){i=i.slice(0,i.indexOf("<"));const d={...N(i),type_arguments:r.map(l=>N(l).source_address)};return d.type_arguments=d.type_arguments.map(l=>he.isSuiCoin(l)?l:N(l).source_address),d.source_address=Cr(d.full_address,d.type_arguments),d}const o=i.split("::"),a={full_address:i,address:i===xr||i===D0?"0x2":be(o[0]),module:o[1],name:o[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=Cr(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function Ae(e){return N(e).source_address}function j0(e){return e.toLowerCase().startsWith("0x")?be(e):e}var M0=(e,t=!0)=>{const i=e.split("::"),n=i.shift();let r=be(n);return t&&(r=Ed(r)),`${r}::${i.join("::")}`};function Is(e){for(const t in e){const i=typeof e[t];if(i==="object")Is(e[t]);else if(i==="string"){const n=e[t];n&&!n.includes("::")&&(e[t]=j0(n))}}}var E0="0x2::coin::Coin",B0=/^0x2::coin::Coin<(.+)>$/,xr="0x2::sui::SUI",D0="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",he=class{static getCoinTypeArg(e){const t=e.type.match(B0);return t?t[1]:null}static isSUI(e){const t=he.getCoinTypeArg(e);return t?he.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let i=BigInt(0);return e.forEach(n=>{t===n.coinAddress&&(i+=BigInt(n.balance))}),i}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${E0}<${e}>`}static getFaucetCoins(e){const{events:t}=e,i=[];return t==null||t.forEach(n=>{const{type:r}=n;if(N(r).name==="InitEvent"){const o=n.parsedJson;i.push({transactionModule:n.transactionModule,suplyID:o.suplyID,decimals:o.decimals})}}),i}static getCoinAssets(e,t){const i=[];return t.forEach(n=>{Ae(n.coinAddress)===Ae(e)&&i.push(n)}),i}static isSuiCoin(e){return N(e).full_address===xr}static selectCoinObjectIdGreaterThanOrEqual(e,t,i=[]){const n=he.selectCoinAssetGreaterThanOrEqual(e,t,i),r=n.selectedCoins.map(a=>a.coinObjectId),o=n.remainingCoins,s=n.selectedCoins.map(a=>a.balance.toString());return{objectArray:r,remainCoins:o,amountArray:s}}static selectCoinAssetGreaterThanOrEqual(e,t,i=[]){const n=he.sortByBalance(e.filter(c=>!i.includes(c.coinObjectId))),r=he.calculateTotalBalance(n);if(r<t)return{selectedCoins:[],remainingCoins:n};if(r===t)return{selectedCoins:n,remainingCoins:[]};let o=BigInt(0);const s=[],a=[...n];for(;o<r;){const c=t-o,d=a.findIndex(h=>h.balance>=c);if(d!==-1){s.push(a[d]),a.splice(d,1);break}const l=a.pop();l.balance>0&&(s.push(l),o+=l.balance)}return{selectedCoins:he.sortByBalance(s),remainingCoins:he.sortByBalance(a)}}static sortByBalance(e){return e.sort((t,i)=>t.balance<i.balance?-1:t.balance>i.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,i)=>t.balance>i.balance?-1:t.balance<i.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,i)=>t+i.balance,BigInt(0))}};function N0(e,t,i){let n=new b(0),r=new b(0);e.current_tick_index<t.index?(n=ce.subUnderflowU128(new b(e.fee_growth_global_a),new b(t.feeGrowthOutsideA)),r=ce.subUnderflowU128(new b(e.fee_growth_global_b),new b(t.feeGrowthOutsideB))):(n=new b(t.feeGrowthOutsideA),r=new b(t.feeGrowthOutsideB));let o=new b(0),s=new b(0);e.current_tick_index<i.index?(o=new b(i.feeGrowthOutsideA),s=new b(i.feeGrowthOutsideB)):(o=ce.subUnderflowU128(new b(e.fee_growth_global_a),new b(i.feeGrowthOutsideA)),s=ce.subUnderflowU128(new b(e.fee_growth_global_b),new b(i.feeGrowthOutsideB)));const a=ce.subUnderflowU128(ce.subUnderflowU128(new b(e.fee_growth_global_a),n),o),c=ce.subUnderflowU128(ce.subUnderflowU128(new b(e.fee_growth_global_b),r),s);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function R0(e,t,i){const n=ce.subUnderflowU128(t,new b(e.fee_growth_inside_a)),r=new b(e.liquidity).mul(n).shrn(64),o=ce.subUnderflowU128(i,new b(e.fee_growth_inside_b)),s=new b(e.liquidity).mul(o).shrn(64),a=new b(e.fee_owed_a).add(r),c=new b(e.fee_owed_b).add(s);return{position_id:e.pos_object_id,feeOwedA:a,feeOwedB:c}}function ym(e){const{fee_growth_inside_a:t,fee_growth_inside_b:i}=N0(e.clmmpool,e.tickLower,e.tickUpper);return R0(e.position,t,i)}var jn=class{constructor(e,t){L(this,"numerator");L(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return jn.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const i=typeof e=="number"?new b(e.toString()):e,n=typeof t=="number"?new b(t.toString()):t;return new jn(i,n)}};function rs(e,{numerator:t,denominator:i},n){return n?e.mul(i.add(t)).div(i):e.mul(i).div(i.add(t))}function So(e,t,i){return{tokenMaxA:rs(e.coinA,t,i),tokenMaxB:rs(e.coinB,t,i)}}function g(e){return K.isDecimal(e)?e:new K(e===void 0?0:e)}function $0(e){return g(10).pow(g(e).abs())}function zn(e){return e.data}function Dd(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const{error:t}=e;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function Nd(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function q0(e){if("reference"in e)return e.reference;const t=zn(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:Dd(e)}function Zt(e){var t;return"objectId"in e?e.objectId:((t=q0(e))==null?void 0:t.objectId)??Nd(e)}function F0(e){return e.data!==void 0}function L0(e){return e.content!==void 0}function Rd(e){const t="data"in e?zn(e):e;if(!(!t||!L0(t)||t.content.dataType!=="moveObject"))return t.content}function Yt(e){var t;return(t=Rd(e))==null?void 0:t.type}function dn(e){var i;const t=F0(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((i=t==null?void 0:t.content)==null?void 0:i.dataType)==="package"?"package":Yt(e):t==null?void 0:t.type}function Gn(e){var t;return(t=zn(e))==null?void 0:t.previousTransaction}function Ar(e){var t;return(t=zn(e))==null?void 0:t.owner}function U0(e){var i;const t=(i=zn(e))==null?void 0:i.display;return t||{data:null,error:null}}function ee(e){var i;const t=(i=Rd(e))==null?void 0:i.fields;if(t)return"fields"in t?t.fields:t}function K0(e,t){const i=$0(g(t));return Number(g(e).mul(i))}function Ct(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function ht(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function V0(e,t,i){const n=N(e).name,r=N(t).name;return`${n}-${r}[${i}]`}function To(e){const t=Yt(e),i=N(t),n=ee(e);if(n==null)throw new F(`Pool id ${Zt(e)} not exists.`,"InvalidPoolObject");const r=[];n.rewarder_manager.fields.rewarders.forEach(s=>{const{emissions_per_second:a}=s.fields,c=ce.fromX64(new b(a)),d=Math.floor(c.toNumber()*60*60*24);r.push({emissions_per_second:a,coinAddress:N(s.fields.reward_coin.fields.name).source_address,growth_global:s.fields.growth_global,emissionsEveryDay:d})});const o={poolAddress:Zt(e),poolType:t,coinTypeA:i.type_arguments[0],coinTypeB:i.type_arguments[1],coinAmountA:n.coin_a,coinAmountB:n.coin_b,current_sqrt_price:n.current_sqrt_price,current_tick_index:ht(BigInt(n.current_tick_index.fields.bits)),fee_growth_global_a:n.fee_growth_global_a,fee_growth_global_b:n.fee_growth_global_b,fee_protocol_coin_a:n.fee_protocol_coin_a,fee_protocol_coin_b:n.fee_protocol_coin_b,fee_rate:n.fee_rate,is_pause:n.is_pause,liquidity:n.liquidity,position_manager:{positions_handle:n.position_manager.fields.positions.fields.id.id,size:n.position_manager.fields.positions.fields.size},rewarder_infos:r,rewarder_last_updated_time:n.rewarder_manager.fields.last_updated_time,tickSpacing:n.tick_spacing,ticks_handle:n.tick_manager.fields.ticks.fields.id.id,uri:n.url,index:Number(n.index),name:""};return o.name=V0(o.coinTypeA,o.coinTypeB,o.tickSpacing),o}function Lr(e){const t=U0(e).data,i={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(i.creator=t.creator,i.description=t.description,i.image_url=t.image_url,i.link=t.link,i.name=t.name,i.project_url=t.project_url),i}function sn(e){var s,a;if(e.error!=null||((a=(s=e.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`Position not exists. Get Position error:${e.error}`,"InvalidPositionObject");let t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},i={...t,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},n=ee(e);if(n){const c=Yt(e),d=Ar(e);"nft"in n?(n=n.nft.fields,t.description=n.description,t.name=n.name,t.link=n.url):t=Lr(e),i={...t,pos_object_id:n.id.id,owner:d.AddressOwner,type:c,liquidity:n.liquidity,coin_type_a:n.coin_type_a.fields.name,coin_type_b:n.coin_type_b.fields.name,tick_lower_index:ht(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:ht(BigInt(n.tick_upper_index.fields.bits)),index:n.index,pool:n.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const r=Dd(e);r&&(i.pos_object_id=r.objectId,i.position_status="Deleted");const o=Nd(e);return o&&(i.pos_object_id=o,i.position_status="NotExists"),i}function $d(e){const t={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};e="fields"in e?e.fields:e,e.rewards.forEach((o,s)=>{const{amount_owned:a,growth_inside:c}="fields"in o?o.fields:o;s===0?(t.reward_amount_owed_0=a,t.reward_growth_inside_0=c):s===1?(t.reward_amount_owed_1=a,t.reward_growth_inside_1=c):s===2&&(t.reward_amount_owed_2=a,t.reward_growth_inside_2=c)});const i="fields"in e.tick_lower_index?e.tick_lower_index.fields.bits:e.tick_lower_index.bits,n="fields"in e.tick_upper_index?e.tick_upper_index.fields.bits:e.tick_upper_index.bits;return{liquidity:e.liquidity,tick_lower_index:ht(BigInt(i)),tick_upper_index:ht(BigInt(n)),...t,fee_growth_inside_a:e.fee_growth_inside_a,fee_owed_a:e.fee_owned_a,fee_growth_inside_b:e.fee_growth_inside_b,fee_owed_b:e.fee_owned_b,pos_object_id:e.position_id}}function Oo(e){var r,o;if(e.error!=null||((o=(r=e.data)==null?void 0:r.content)==null?void 0:o.dataType)!=="moveObject")throw new F(`Tick not exists. Get tick data error:${e.error}`,"InvalidTickObject");const i=ee(e).value.fields.value.fields;return{objectId:Zt(e),index:ht(BigInt(i.index.fields.bits)),sqrtPrice:new b(i.sqrt_price),liquidityNet:new b(i.liquidity_net.fields.bits),liquidityGross:new b(i.liquidity_gross),feeGrowthOutsideA:new b(i.fee_growth_outside_a),feeGrowthOutsideB:new b(i.fee_growth_outside_b),rewardersGrowthOutside:i.rewards_growth_outside}}function z0(e){if(!e||!e.index||!e.sqrt_price||!e.liquidity_net||!e.liquidity_gross||!e.fee_growth_outside_a||!e.fee_growth_outside_b)throw new F("Invalid tick fields.","InvalidTickFields");const t=ht(BigInt(e.index.bits)),i=new b(e.sqrt_price),n=new b(e.liquidity_net.bits),r=new b(e.liquidity_gross),o=new b(e.fee_growth_outside_a),s=new b(e.fee_growth_outside_b),a=e.rewards_growth_outside||[];return{objectId:"",index:t,sqrtPrice:i,liquidityNet:n,liquidityGross:r,feeGrowthOutsideA:o,feeGrowthOutsideB:s,rewardersGrowthOutside:a}}var wm=class{static getMinIndex(e){return is+Math.abs(is)%e}static getMaxIndex(e){return ts-ts%e}};function vm(e,t){const i=Math.abs(e)%t;return e>0?i>t/2?e+t-i:e-i:i>t/2?e-t+i:e+i}function G0(e,t,i,n,r,o){const s=e.rewarder_infos,a=[];for(let c=0;c<s.length;c+=1){let d=o[c];t!==null&&(e.current_tick_index<n?d=o[c].sub(new b(t.rewardersGrowthOutside[c])):d=t.rewardersGrowthOutside[c]);let l=new b(0);i!==null&&(e.current_tick_index>=r?l=o[c].sub(new b(i.rewardersGrowthOutside[c])):l=i.rewardersGrowthOutside[c]);const h=ce.subUnderflowU128(ce.subUnderflowU128(new b(o[c]),new b(d)),new b(l));a.push(h)}return a}function Sr(e){const t=he.isSuiCoin(e.coinTypeA),i=he.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:i}}function W0(e,t){return K.ceil(g(e).div(1+t)).toString()}var Q=class{static createCollectRewarderAndFeeParams(e,t,i,n,r,o){r===void 0&&(r=[...n]),o===void 0&&(o=[...n]);const s=Ae(i.coinTypeA),a=Ae(i.coinTypeB);if(i.collect_fee){const d=Q.buildCoinForAmount(t,r,BigInt(0),s,!1);r=d.remainCoins;const l=Q.buildCoinForAmount(t,o,BigInt(0),a,!1);o=l.remainCoins,t=e.Position.createCollectFeePaylod({pool_id:i.pool_id,pos_id:i.pos_id,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB},t,d.targetCoin,l.targetCoin)}const c=[];return i.rewarder_coin_types.forEach(d=>{switch(Ae(d)){case s:c.push(Q.buildCoinForAmount(t,r,BigInt(0),d,!1).targetCoin);break;case a:c.push(Q.buildCoinForAmount(t,o,BigInt(0),d,!1).targetCoin);break;default:c.push(Q.buildCoinForAmount(t,n,BigInt(0),d,!1).targetCoin);break}}),t=e.Rewarder.createCollectRewarderPaylod(i,t,c),t}static async adjustTransactionForGas(e,t,i,n){n.setSender(e.senderAddress);const r=he.selectCoinAssetGreaterThanOrEqual(t,i).selectedCoins;if(r.length===0)throw new F("Insufficient balance","InsufficientBalance");const o=he.calculateTotalBalance(t);if(o-i>1e9)return{fixAmount:i};const s=await e.fullClient.calculationTxGas(n);if(he.selectCoinAssetGreaterThanOrEqual(t,BigInt(s),r.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(s)+BigInt(500);if(o-i<c){if(i-=c,i<0)throw new F("gas Insufficient balance","InsufficientBalance");const d=new R;return{fixAmount:i,newTx:d}}}return{fixAmount:i}}static async buildAddLiquidityFixTokenForGas(e,t,i,n,r,o,s){r=await Q.buildAddLiquidityFixToken(e,t,i,r,o,s);const{isAdjustCoinA:a}=Sr(i),c=a?i.amount_a:i.amount_b,d=await Q.adjustTransactionForGas(e,he.getCoinAssets(a?i.coinTypeA:i.coinTypeB,t),BigInt(c),r),{fixAmount:l}=d,{newTx:h}=d;if(h!=null){let _,y;if(a)i.amount_a=Number(l),_=Q.buildAddLiquidityFixTokenCoinInput(h,!i.fix_amount_a,l.toString(),i.slippage,i.coinTypeA,t,!1),y=Q.buildAddLiquidityFixTokenCoinInput(h,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,t,!1);else return i.amount_b=Number(l),_=Q.buildAddLiquidityFixTokenCoinInput(h,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,t,!1),y=Q.buildAddLiquidityFixTokenCoinInput(h,i.fix_amount_a,l.toString(),i.slippage,i.coinTypeB,t,!1),i=Q.fixAddLiquidityFixTokenParams(i,n.slippage,n.curSqrtPrice),r=await Q.buildAddLiquidityFixTokenArgs(h,e,t,i,_,y),r}return r}static async buildAddLiquidityFixToken(e,t,i,n,r,o){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");n=n||new R;let s,a;return r==null||o==null?(s=Q.buildAddLiquidityFixTokenCoinInput(n,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,t,!1),a=Q.buildAddLiquidityFixTokenCoinInput(n,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,t,!1)):(s={targetCoin:r,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a={targetCoin:o,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),n=Q.buildAddLiquidityFixTokenArgs(n,e,t,i,s,a),n}static buildAddLiquidityFixTokenCoinInput(e,t,i,n,r,o,s=!0){return t?Q.buildCoinForAmountInterval(e,o,{amountSecond:BigInt(W0(i,n)),amountFirst:BigInt(i)},r,s):Q.buildCoinForAmount(e,o,BigInt(i),r,s)}static fixAddLiquidityFixTokenParams(e,t,i){const n=e.fix_amount_a?e.amount_a:e.amount_b,r=gt.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new b(n),e.fix_amount_a,!0,t,i);return e.amount_a=e.fix_amount_a?e.amount_a:r.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?r.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,i,n,r,o){const s=[n.coinTypeA,n.coinTypeB],a=n.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:d}=t.sdkOptions;n.is_open||(e=Q.createCollectRewarderAndFeeParams(t,e,n,i,r.remainCoins,o.remainCoins));const l=T(c),h=n.is_open?[e.object(l.global_config_id),e.object(n.pool_id),e.pure.u32(Number(Ct(BigInt(n.tick_lower)).toString())),e.pure.u32(Number(Ct(BigInt(n.tick_upper)).toString())),r.targetCoin,o.targetCoin,e.pure.u64(n.amount_a),e.pure.u64(n.amount_b),e.pure.bool(n.fix_amount_a),e.object($)]:[e.object(l.global_config_id),e.object(n.pool_id),e.object(n.pos_id),r.targetCoin,o.targetCoin,e.pure.u64(n.amount_a),e.pure.u64(n.amount_b),e.pure.bool(n.fix_amount_a),e.object($)];return e.moveCall({target:`${d.published_at}::${Oi}::${a}`,typeArguments:s,arguments:h}),e}static async buildSwapTransactionForGas(e,t,i,n){let r=Q.buildSwapTransaction(e,t,i);r.setSender(e.senderAddress);const o=await Q.adjustTransactionForGas(e,he.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,i),BigInt(t.by_amount_in?t.amount:t.amount_limit),r),{fixAmount:s,newTx:a}=o;if(a!==void 0){a.setSender(e.senderAddress),t.by_amount_in?t.amount=s.toString():t.amount_limit=s.toString(),t=await Q.fixSwapParams(e,t,n);const c=Q.buildCoinForAmount(r,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA),d=Q.buildCoinForAmount(r,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB);r=Q.buildSwapTransactionArgs(a,t,e.sdkOptions,c,d)}return r}static buildSwapTransaction(e,t,i){let n=new R;n.setSender(e.senderAddress);const r=Q.buildCoinForAmount(n,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1),o=Q.buildCoinForAmount(n,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1);return n=Q.buildSwapTransactionArgs(n,t,e.sdkOptions,r,o),n}static buildSwapTransactionArgs(e,t,i,n,r){const{clmm_pool:o,integrate:s}=i,a=ri.getDefaultSqrtPriceLimit(t.a2b),c=[t.coinTypeA,t.coinTypeB],{global_config_id:d}=T(o);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const l=t.swap_partner!==void 0,h=l?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",_=l?[e.object(d),e.object(t.pool_id),e.object(t.swap_partner),n.targetCoin,r.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object($)]:[e.object(d),e.object(t.pool_id),n.targetCoin,r.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object($)];return e.moveCall({target:`${s.published_at}::${Oi}::${h}`,typeArguments:c,arguments:_}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,t,i,n){let{tx:r,coinABs:o}=Q.buildSwapTransactionWithoutTransferCoins(e,t,i);r.setSender(e.senderAddress);const s=await Q.adjustTransactionForGas(e,he.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,i),BigInt(t.by_amount_in?t.amount:t.amount_limit),r),{fixAmount:a,newTx:c}=s;if(c!==void 0){c.setSender(e.senderAddress),t.by_amount_in?t.amount=a.toString():t.amount_limit=a.toString(),t=await Q.fixSwapParams(e,t,n);const d=Q.buildCoinForAmount(r,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),l=Q.buildCoinForAmount(r,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),h=Q.buildSwapTransactionWithoutTransferCoinArgs(e,c,t,e.sdkOptions,d,l);r=h.tx,o=h.txRes}return{tx:r,coinABs:o}}static buildSwapTransactionWithoutTransferCoins(e,t,i){const n=new R;n.setSender(e.senderAddress);const r=Q.buildCoinForAmount(n,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),o=Q.buildCoinForAmount(n,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),s=Q.buildSwapTransactionWithoutTransferCoinArgs(e,n,t,e.sdkOptions,r,o);return{tx:s.tx,coinABs:s.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,t,i,n,r,o){const{clmm_pool:s,integrate:a}=n,c=ri.getDefaultSqrtPriceLimit(i.a2b),{global_config_id:d}=T(s);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const l=i.swap_partner!==void 0,h=l?"swap_with_partner":"swap",_=l?xo:Li,y=l?[t.object(d),t.object(i.pool_id),t.object(i.swap_partner),r.targetCoin,o.targetCoin,t.pure.bool(i.a2b),t.pure.bool(i.by_amount_in),t.pure.u64(i.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object($)]:[t.object(d),t.object(i.pool_id),r.targetCoin,o.targetCoin,t.pure.bool(i.a2b),t.pure.bool(i.by_amount_in),t.pure.u64(i.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object($)],k=[i.coinTypeA,i.coinTypeB],O=t.moveCall({target:`${a.published_at}::${_}::${h}`,typeArguments:k,arguments:y});if(i.by_amount_in){const P=i.a2b?i.coinTypeB:i.coinTypeA,M=i.a2b?O[1]:O[0],j=Number(i.amount_limit);this.checkCoinThreshold(e,i.by_amount_in,t,M,j,P)}return{tx:t,txRes:O}}static async fixSwapParams(e,t,i){const{currentPool:n}=i;try{const r=await e.Swap.preswap({decimalsA:i.decimalsA,decimalsB:i.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:t.amount,pool:n,currentSqrtPrice:n.current_sqrt_price,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB}),o=i.byAmountIn?r.estimatedAmountOut:r.estimatedAmountIn,s=rs(o,i.slippage,!i.byAmountIn);t.amount_limit=s.toString()}catch(r){console.log("fixSwapParams",r)}return t}static async syncBuildCoinInputForAmount(e,t,i,n,r=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const o=await e.getOwnerCoinAssets(e.senderAddress,n);return Q.buildCoinForAmount(t,o,i,n,r).targetCoin}static buildCoinForAmount(e,t,i,n,r=!0,o=!1){const s=he.getCoinAssets(n,t);if(i===BigInt(0)&&s.length===0)return Q.buildZeroValueCoin(t,e,n,r);const a=he.calculateTotalBalance(s);if(a<i)throw new F(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `,"InsufficientBalance");return Q.buildCoin(e,t,s,i,n,r,o)}static buildCoin(e,t,i,n,r,o=!0,s=!1){if(he.isSuiCoin(r)){if(o){const j=e.splitCoins(e.gas,[e.pure.u64(n)]);return{targetCoin:e.makeMoveVec({elements:[j]}),remainCoins:t,tragetCoinAmount:n.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}if(n===0n&&i.length>1){const j=he.selectCoinObjectIdGreaterThanOrEqual(i,n);return{targetCoin:e.object(j.objectArray[0]),remainCoins:j.remainCoins,tragetCoinAmount:j.amountArray[0],isMintZeroCoin:!1}}const P=he.selectCoinObjectIdGreaterThanOrEqual(i,n);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(n)]),remainCoins:P.remainCoins,tragetCoinAmount:n.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const a=he.selectCoinObjectIdGreaterThanOrEqual(i,n),c=a.amountArray.reduce((P,M)=>Number(P)+Number(M),0).toString(),d=a.objectArray;if(o)return{targetCoin:e.makeMoveVec({elements:d.map(P=>e.object(P))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((P,M)=>Number(P)+Number(M),0).toString(),isMintZeroCoin:!1};const[l,...h]=d,_=e.object(l);let y=_;const k=a.amountArray.reduce((P,M)=>Number(P)+Number(M),0).toString();let O;return h.length>0&&e.mergeCoins(_,h.map(P=>e.object(P))),s&&Number(c)>Number(n)&&(y=e.splitCoins(_,[e.pure.u64(n)]),O=_),{targetCoin:y,remainCoins:a.remainCoins,originalSplitedCoin:O,tragetCoinAmount:k,isMintZeroCoin:!1}}static buildZeroValueCoin(e,t,i,n=!0){const r=Q.callMintZeroValueCoin(t,i);let o;return n?o=t.makeMoveVec({elements:[r]}):o=r,{targetCoin:o,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,t,i,n,r=!0){const o=he.getCoinAssets(n,t);if(i.amountFirst===BigInt(0))return o.length>0?Q.buildCoin(e,[...t],[...o],i.amountFirst,n,r):Q.buildZeroValueCoin(t,e,n,r);const s=he.calculateTotalBalance(o);if(s>=i.amountFirst)return Q.buildCoin(e,[...t],[...o],i.amountFirst,n,r);if(s<i.amountSecond)throw new F(`The amount(${s}) is Insufficient balance for ${n} , expect ${i.amountSecond} `,"InsufficientBalance");return Q.buildCoin(e,[...t],[...o],i.amountSecond,n,r)}static async buildRouterSwapTransaction(e,t,i,n,r){let o=new R;return t.paths.length>1&&(t.partner=""),o=await this.buildRouterBasePathTx(e,t,i,n,o,r),o}static async buildRouterBasePathTx(e,t,i,n,r,o){const s=t.paths.filter(B=>B&&B.poolAddress),a=Number(s.reduce((B,q)=>B.add(q.amountIn),J).toString()),c=Number(s.reduce((B,q)=>B.add(q.amountOut),J).toString()),d=Math.round(i?Number(c.toString())*(1-t.priceSlippagePoint):Number(a.toString())*(1+t.priceSlippagePoint)),l=t.paths[0].coinType[0],h=t.paths[0].coinType[t.paths[0].coinType.length-1],_=Q.buildCoinForAmount(r,n,BigInt(i?a:d),l,!1,!0),y=_.originalSplitedCoin!==void 0,k=Q.buildCoinForAmount(r,n,0n,h,!1),O=await this.buildRouterBasePathReturnCoins(e,t,i,_,k,r),P=[],{toCoin:M,fromCoin:j}=O;if(r=O.tx,k.isMintZeroCoin?P.push({coinType:h,coin:M}):k.originalSplitedCoin!==void 0?r.mergeCoins(k.originalSplitedCoin,[M]):r.mergeCoins(k.targetCoin,[M]),y){const B=_==null?void 0:_.originalSplitedCoin;r.mergeCoins(B,[j])}else P.push({coinType:l,coin:j});for(let B=0;B<P.length;B++)this.buildTransferCoin(e,r,P[B].coin,P[B].coinType,o);return r}static async buildRouterBasePathReturnCoins(e,t,i,n,r,o){const{clmm_pool:s,integrate:a}=e.sdkOptions,c=T(s).global_config_id,d=t.paths.filter(B=>B&&B.poolAddress),l=Number(d.reduce((B,q)=>B.add(q.amountIn),J).toString()),h=Number(d.reduce((B,q)=>B.add(q.amountOut),J).toString()),_=Math.round(i?Number(h.toString())*(1-t.priceSlippagePoint):Number(l.toString())*(1+t.priceSlippagePoint)),y=t.paths[0].coinType[0],k=t.paths[0].coinType[t.paths[0].coinType.length-1];let O=n.targetCoin,P;r.isMintZeroCoin||r.originalSplitedCoin!==void 0?P=r.targetCoin:P=Q.callMintZeroValueCoin(o,k);const M=t.partner==="",j=M?Li:xo;for(const B of d)if(B.poolAddress.length===1){const q=B.a2b[0],X={amount:Number(B.amountIn.toString()),amountLimit:_,poolCoinA:B.a2b[0]?y:k,poolCoinB:B.a2b[0]?k:y},Z=M?"swap":"swap_with_partner",fe=q?O:P,ve=q?P:O,_t=i?B.amountIn.toString():B.amountOut.toString(),Y=ri.getDefaultSqrtPriceLimit(q).toString(),H=M?[o.object(c),o.object(B.poolAddress[0]),fe,ve,o.pure.bool(q),o.pure.bool(i),o.pure.u64(_t),o.pure.u128(Y),o.pure.bool(!1),o.object($)]:[o.object(c),o.object(B.poolAddress[0]),o.object(t.partner),fe,ve,o.pure.bool(q),o.pure.bool(i),o.pure.u64(_t),o.pure.u128(Y),o.pure.bool(!1),o.object($)],ye=[X.poolCoinA,X.poolCoinB],x=o.moveCall({target:`${e.sdkOptions.integrate.published_at}::${j}::${Z}`,typeArguments:ye,arguments:H});O=q?x[0]:x[1],P=q?x[1]:x[0]}else{const q=i?B.amountIn:B.rawAmountLimit[0],X=i?0:B.amountOut;let Z="";B.a2b[0]?B.a2b[1]?Z="swap_ab_bc":Z="swap_ab_cb":B.a2b[1]?Z="swap_ba_bc":Z="swap_ba_cb",M||(Z=`${Z}_with_partner`);const fe=ri.getDefaultSqrtPriceLimit(B.a2b[0]),ve=ri.getDefaultSqrtPriceLimit(B.a2b[1]),_t=M?[o.object(c),o.object(B.poolAddress[0]),o.object(B.poolAddress[1]),O,P,o.pure.bool(i),o.pure.u64(q.toString()),o.pure.u64(X.toString()),o.pure.u128(fe.toString()),o.pure.u128(ve.toString()),o.object($)]:[o.object(c),o.object(B.poolAddress[0]),o.object(B.poolAddress[1]),o.object(t.partner),O,P,o.pure.bool(i),o.pure.u64(q.toString()),o.pure.u64(X.toString()),o.pure.u128(fe.toString()),o.pure.u128(ve.toString()),o.object($)],Y=[B.coinType[0],B.coinType[1],B.coinType[2]],H=o.moveCall({target:`${a.published_at}::${j}::${Z}`,typeArguments:Y,arguments:_t});O=H[0],P=H[1]}return this.checkCoinThreshold(e,i,o,P,_,k),{fromCoin:O,toCoin:P,tx:o}}static async buildAggregatorSwapReturnCoins(e,t,i,n,r,o,s,a){if(a==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=e.senderAddress}t.splitPaths.length>1&&(r="");let c,d;const l=t.splitPaths.some(h=>h.basePaths.some(_=>_.label==="Deepbook"));if((!t.byAmountIn||t.splitPaths.length===1)&&!l){const h=[];for(const k of t.splitPaths){const O=[],P=[],M=[],j=[];for(let q=0;q<k.basePaths.length;q+=1){const X=k.basePaths[q];O.push(X.direction),P.push(X.poolAddress),M.push(new b(X.inputAmount.toString())),q===0?j.push(X.fromCoin,X.toCoin):j.push(X.toCoin)}const B={amountIn:new b(k.inputAmount.toString()),amountOut:new b(k.outputAmount.toString()),poolAddress:P,a2b:O,rawAmountLimit:M,isExceed:!1,coinType:j};h.push(B)}const _={paths:h,partner:r,priceSlippagePoint:o},y=await this.buildRouterBasePathReturnCoins(e,_,t.byAmountIn,i,n,s);c=y.fromCoin,d=y.toCoin,s=y.tx}else{const h=Math.round(t.outputAmount*(1-o));c=i.targetCoin,n.isMintZeroCoin||n.originalSplitedCoin!==void 0?d=n.targetCoin:d=Q.callMintZeroValueCoin(s,t.toCoin);let _=!1,y;if(l){const[k,O]=La.createAccountCap(a,e.sdkOptions,s);s=O,y=k,_=!0}for(let k=0;k<t.splitPaths.length;k+=1){const O=t.splitPaths[k];let P;for(let M=0;M<O.basePaths.length;M+=1){const j=O.basePaths[M];if(j.label==="Deepbook")if(M===0)if(O.basePaths.length===1){const B=this.buildDeepbookBasePathTx(e,j,s,y,c,d,!1);c=B.from,d=B.to}else{P=Q.callMintZeroValueCoin(s,j.toCoin);const B=this.buildDeepbookBasePathTx(e,j,s,y,c,P,!1);c=B.from,P=B.to}else{const B=this.buildDeepbookBasePathTx(e,j,s,y,P,d,!0);P=B.from,d=B.to}if(j.label==="Cetus")if(M===0)if(O.basePaths.length===1){const B=this.buildClmmBasePathTx(e,j,s,t.byAmountIn,c,d,!1,r);c=B.from,d=B.to}else{P=Q.callMintZeroValueCoin(s,j.toCoin);const B=this.buildClmmBasePathTx(e,j,s,t.byAmountIn,c,P,!1,r);c=B.from,P=B.to}else{const B=this.buildClmmBasePathTx(e,j,s,t.byAmountIn,P,d,!0,r);P=B.from,d=B.to,s.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Ra}::send_coin`,typeArguments:[j.fromCoin],arguments:[P,s.pure.address(a)]})}}}this.checkCoinThreshold(e,t.byAmountIn,s,d,h,t.toCoin),_&&(s=La.deleteAccountCapByObject(y,e.sdkOptions,s))}return{fromCoin:c,toCoin:d,tx:s}}static async buildAggregatorSwapTransaction(e,t,i,n,r,o){let s=new R;const a=t.byAmountIn?Math.round(t.outputAmount*(1-r)):Math.round(t.inputAmount*(1+r)),c=Q.buildCoinForAmount(s,i,t.byAmountIn?BigInt(t.inputAmount):BigInt(a),t.fromCoin,!1,!0),d=c.originalSplitedCoin!=null,l=Q.buildCoinForAmount(s,i,0n,t.toCoin,!1),h=await this.buildAggregatorSwapReturnCoins(e,t,c,l,n,r,s,o),{fromCoin:_,toCoin:y}=h;s=h.tx;const k=[];if(l.isMintZeroCoin?k.push({coinType:t.toCoin,coin:y}):l.originalSplitedCoin!=null?s.mergeCoins(l.originalSplitedCoin,[y]):s.mergeCoins(l.targetCoin,[y]),d){const O=c.originalSplitedCoin;s.mergeCoins(O,[_])}else k.push({coinType:t.fromCoin,coin:_});for(let O=0;O<k.length;O++)this.buildTransferCoin(e,s,k[O].coin,k[O].coinType,o);return s}static checkCoinThreshold(e,t,i,n,r,o){t&&i.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Li}::check_coin_threshold`,typeArguments:[o],arguments:[n,i.pure.u64(r)]})}static buildDeepbookBasePathTx(e,t,i,n,r,o,s){const a=t.direction?r:o,c=t.direction?o:r,d=[i.object(t.poolAddress),n,i.pure.u64(t.inputAmount),i.pure.u64(0),i.pure.bool(t.direction),a,c,i.pure.bool(s),i.object($)],l=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],h=i.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:l,arguments:d});return r=t.direction?h[0]:h[1],o=t.direction?h[1]:h[0],{from:r,to:o,tx:i}}static buildClmmBasePathTx(e,t,i,n,r,o,s,a){const{clmm_pool:c,integrate:d}=e.sdkOptions,l=T(c).global_config_id;let h=t.direction?r:o,_=t.direction?o:r;const y=a==="",k=y?Li:xo,O=y?"swap":"swap_with_partner",P=n?t.inputAmount.toString():t.outputAmount.toString(),M=ri.getDefaultSqrtPriceLimit(t.direction),j=y?[i.object(l),i.object(t.poolAddress),h,_,i.pure.bool(t.direction),i.pure.bool(n),i.pure.u64(P),i.pure.u128(M.toString()),i.pure.bool(s),i.object($)]:[i.object(l),i.object(t.poolAddress),i.object(a),h,_,i.pure.bool(t.direction),i.pure.bool(n),i.pure.u64(P),i.pure.u128(M.toString()),i.pure.bool(s),i.object($)],B=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],q=i.moveCall({target:`${d.published_at}::${k}::${O}`,typeArguments:B,arguments:j});return h=q[0],_=q[1],r=t.direction?h:_,o=t.direction?_:h,{from:r,to:o,tx:i}}static buildCoinTypePair(e,t){const i=[];if(e.length===2){const n=[];n.push(e[0],e[1]),i.push(n)}else{const n=[];n.push(e[0],e[e.length-1]),i.push(n);for(let r=1;r<e.length-1;r+=1){if(t[r-1]===0)continue;const o=[];o.push(e[0],e[r],e[e.length-1]),i.push(o)}}return i}static buildTransferCoinToSender(e,t,i,n){t.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Ra}::transfer_coin_to_sender`,typeArguments:[n],arguments:[i]})}static buildTransferCoin(e,t,i,n,r){r!=null?t.transferObjects([i],t.pure.address(r)):Q.buildTransferCoinToSender(e,t,i,n)}},W=Q;c0(W,"callMintZeroValueCoin",(e,t)=>e.moveCall({target:"0x2::coin::zero",typeArguments:[t]}));function bt(e){return!(!e.startsWith("0x")||e.length!==66)}var Wi=new b(1e9),La=class{static createAccountCap(e,t,i,n=!1){if(e.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:r}=t,[o]=i.moveCall({target:`${r.published_at}::${h0}::create_account`,typeArguments:[],arguments:[]});return n&&i.transferObjects([o],i.pure.address(e)),[o,i]}static deleteAccountCap(e,t,i){const{deepbook:n}=t,r=[i.object(e)];return i.moveCall({target:`${n.published_at}::${Ao}::delete_account_cap`,typeArguments:[],arguments:r}),i}static deleteAccountCapByObject(e,t,i){const{deepbook:n}=t,r=[e];return i.moveCall({target:`${n.published_at}::${Ao}::delete_account_cap`,typeArguments:[],arguments:r}),i}static async getAccountCap(e,t=!0){const i=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:t,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:Ao}}});return i.data.length===0?"":i.data[0].data.objectId}static async getPools(e){const t=e.sdkOptions.deepbook.package_id,i=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${t}::clob_v2::PoolCreated`})).data.forEach(r=>{const o=r.parsedJson;o&&i.push({poolID:o.pool_id,tickSize:Number(o.tick_size),lotSize:Number(o.lot_size),takerFeeRate:Number(o.taker_fee_rate),makerRebateRate:Number(o.maker_rebate_rate),baseAsset:o.base_asset.name,quoteAsset:o.quote_asset.name})})}catch(n){console.log("getPoolImmutables",n)}return i}static async getPoolAsks(e,t,i,n){var _;const{simulationAccount:r}=e.sdkOptions,{deepbook_endpoint_v2:o}=e.sdkOptions,s=new R,a=[],c=[i,n],d=[s.object(t),s.pure.u64("0"),s.pure.u64("999999999999"),s.object($)];s.moveCall({target:`${o.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:d,typeArguments:c});const h=(_=(await e.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:r.address})).events)==null?void 0:_.filter(y=>N(y.type).name==="BookStatus");if(h.length===0)return a;for(let y=0;y<h[0].parsedJson.depths.length;y++){const k=h[0].parsedJson.price[y],O=h[0].parsedJson.depths[y],P={price:parseInt(k,10),quantity:parseInt(O,10)};a.push(P)}return a}static async getPoolBids(e,t,i,n){var _;const{simulationAccount:r}=e.sdkOptions,{deepbook_endpoint_v2:o}=e.sdkOptions,s=new R,a=[],c=[i,n],d=[s.object(t),s.pure.u64("0"),s.pure.u64("999999999999"),s.object($)];s.moveCall({target:`${o.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:d,typeArguments:c});const h=(_=(await e.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:r.address})).events)==null?void 0:_.filter(y=>N(y.type).name==="BookStatus");if(h.length===0)return a;for(let y=0;y<h[0].parsedJson.depths.length;y++){const k=h[0].parsedJson.price[y],O=h[0].parsedJson.depths[y],P={price:parseInt(k,10),quantity:parseInt(O,10)};a.push(P)}return a}static async preSwap(e,t,i,n){let r=!1,o=J,s=new b(n),a=J;const c=new b(n);if(i){let d=await this.getPoolBids(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(r=!0),d=d.sort((l,h)=>h.price-l.price);for(let l=0;l<d.length;l+=1){const h=new b(d[l].quantity),_=new b(d[l].price),y=h.mul(new b(_)).mul(new b(t.takerFeeRate)).div(Wi).div(Wi);if(s.gt(h))s=s.sub(h),o=o.add(h.mul(_).div(Wi).sub(y)),a=a.add(y);else{const k=s.mul(new b(d[l].price)).div(Wi),O=k.mul(new b(t.takerFeeRate)).div(Wi);o=o.add(k.sub(O)),s=s.sub(s),a=a.add(O)}if(s.eq(J))break}}else{const d=await this.getPoolAsks(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(r=!0);for(let l=0;l<d.length;l+=1){const h=new b(d[l].price).mul(new b(d[l].quantity)).div(new b(1e9)),_=h.mul(new b(t.takerFeeRate)).div(Wi),y=h.add(_);if(s.gt(h))o=o.add(new b(d[l].quantity)),s=s.sub(y),a=a.add(_);else{const k=new b(d[l].quantity).div(new b(t.lotSize)),O=y.div(k),P=s.div(O);o=o.add(P.muln(t.lotSize)),s=s.sub(P.mul(O)),a=a.add(P.div(k).mul(_))}if(s.eq(J))break}}return{poolAddress:t.poolID,estimatedAmountIn:c.sub(s).toNumber(),estimatedAmountOut:o.toNumber(),estimatedFeeAmount:a,isExceed:r,amount:Number(n),aToB:i,byAmountIn:!0}}static async simulateSwap(e,t,i,n,r,o){var X;const{deepbook_endpoint_v2:s}=e.sdkOptions;let a=new R;const c=await this.getAccountCap(e);let d;if(c===""){const Z=this.createAccountCap(e.senderAddress,e.sdkOptions,a),fe=Z[0];a=Z[1],d=fe}else d=a.object(c);const l=await e.getOwnerCoinAssets(e.senderAddress),h=W.buildCoinForAmount(a,l,BigInt(o),i,!1),_=h==null?void 0:h.targetCoin,y=W.buildCoinForAmount(a,l,BigInt(o),n,!1),k=y==null?void 0:y.targetCoin,O=[i,n],P=[a.object(t),d,a.pure.u64(o),a.pure.u64(0),a.pure.bool(r),_,k,a.object($)];a.moveCall({target:`${s.published_at}::${p0}::swap`,arguments:P,typeArguments:O});const{simulationAccount:M}=e.sdkOptions,B=(X=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:M.address})).events)==null?void 0:X.filter(Z=>N(Z.type).name==="DeepbookSwapEvent");if(B.length===0)return null;const q=B[0].parsedJson;return{poolAddress:q.pool,estimatedAmountIn:q.amount_in,estimatedAmountOut:q.amount_out,aToB:q.atob}}},H0=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPositionList(e,t="all"){const i={data:[],hasNextPage:!0},n=await this._sdk.fullClient.getDynamicFieldsByPage(e,t);i.hasNextPage=n.hasNextPage,i.nextCursor=n.nextCursor;const r=n.data.map(s=>{if(s.error!=null)throw new F(`when getPositionList get position objects error: ${s.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return s.name.value}),o=await this._sdk.Position.getSipmlePositionList(r);return i.data=o,i}async getPoolImmutables(e=[],t=0,i=100,n=!1){const{package_id:r}=this._sdk.sdkOptions.clmm_pool,o=`${r}_getInitPoolEvent`,s=this.getCache(o,n),a=[],c=[];if(s!==void 0&&a.push(...s),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`})).data.forEach(h=>{const _=h.parsedJson;_&&a.push({poolAddress:_.pool_id,tickSpacing:_.tick_spacing,coinTypeA:N(_.coin_type_a).full_address,coinTypeB:N(_.coin_type_b).full_address})}),this.updateCache(o,a,z)}catch(l){console.log("getPoolImmutables",l)}const d=e.length>0;for(let l=0;l<a.length;l+=1){const h=a[l];d&&!e.includes(h.poolAddress)||!d&&(l<t||l>=t+i)||c.push(h)}return c}async getPools(e=[],t=0,i=100){var s,a,c;const n=[];let r=[];e.length>0?r=[...e]:(await this.getPoolImmutables([],t,i,!1)).forEach(l=>r.push(l.poolAddress));const o=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0,showType:!0});for(const d of o){if(d.error!=null||((a=(s=d.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPools error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const l=To(d);n.push(l);const h=`${l.poolAddress}_getPoolObject`;this.updateCache(h,l,z)}return n}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:i}=this._sdk.sdkOptions.clmm_pool,n=[],r={data:[],hasNextPage:!1},o=e==="all",s=`${i}_getPoolImmutables`;if(o){const a=this.getCache(s,t);a&&n.push(...a)}if(n.length===0)try{const a=`${i}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},e);r.hasNextPage=c.hasNextPage,r.nextCursor=c.nextCursor,c.data.forEach(d=>{const l=d.parsedJson;if(l){const h={poolAddress:l.pool_id,tickSpacing:l.tick_spacing,coinTypeA:N(l.coin_type_a).full_address,coinTypeB:N(l.coin_type_b).full_address};n.push(h)}})}catch(a){console.log("getPoolImmutables",a)}return r.data=n,o&&this.updateCache(`${i}_getPoolImmutables`,n,z),r}async getPoolsWithPage(e=[],t="all",i=!1){var s,a,c;const n=[];let r=[];e.length>0?r=[...e]:(await this.getPoolImmutablesWithPage(t,i)).data.forEach(l=>r.push(l.poolAddress));const o=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0,showType:!0});for(const d of o){if(d.error!=null||((a=(s=d.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPoolWithPages error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const l=To(d);n.push(l);const h=`${l.poolAddress}_getPoolObject`;this.updateCache(h,l,z)}return n}async getPool(e,t=!0){var s,a,c;const i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if(r.error!=null||((a=(s=r.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPool error code: ${((c=r.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const o=To(r);return this.updateCache(i,o),o}async getPoolByCoins(e,t){if(e.length===0)return[];const i=this._sdk.sdkOptions.swapCountUrl,n=await fetch(i);let r;try{r=await n.json()}catch{throw new F(`Failed tp [arse response from ${i}].`,"InvalidSwapCountUrl")}const o=r.data.lp_list;if(!o||o.length===0)throw new F(`Failed tp [arse response from ${i}].`,"PoolsNotFound");const s=[];for(const a of o)e.includes(a.coin_a_address)&&e.includes(a.coin_b_address)&&(t!=null?a.object.feeRate===t&&s.push(a.address):s.push(a.address));return s.length>0?await this.getPools(s):[]}async creatPoolsTransactionPayload(e){for(const i of e)if(ns(de(i.coinTypeA),de(i.coinTypeB))){const n=i.coinTypeB;i.coinTypeB=i.coinTypeA,i.coinTypeA=n}return await this.creatPool(e)}async creatPoolTransactionPayload(e){if(ns(de(e.coinTypeA),de(e.coinTypeB))){const t=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=t}return"fix_amount_a"in e?await this.creatPoolAndAddLiquidity(e):await this.creatPool([e])}async getClmmConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.clmm_pool,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=Gn(r),s=(await this._sdk.fullClient.queryEventsByPage({Transaction:o})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return s.length>0&&(s.forEach(c=>{const d=c.parsedJson;if(c.type)switch(N(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=d.global_config_id,a.admin_cap_id=d.admin_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=d.pools_id;break;case`${t}::rewarder::RewarderInitEvent`:a.global_vault_id=d.global_vault_id;break;case`${t}::partner::InitPartnerEvent`:a.partners_id=d.partners_id;break}}),this.updateCache(i,a,z)),a}async getSuiTransactionResponse(e,t=!1){const i=`${e}_getSuiTransactionResponse`,n=this.getCache(i,t);if(n!==void 0)return n;let r;try{r=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{r=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(i,r,z),r}async creatPool(e){const t=new R,{integrate:i,clmm_pool:n}=this.sdk.sdkOptions,r=T(n),o=r.global_config_id,s=r.pools_id;return e.forEach(a=>{const c=[t.object(o),t.object(s),t.pure.u32(a.tick_spacing),t.pure.u128(a.initialize_sqrt_price),t.pure.string(a.uri),t.object($)];t.moveCall({target:`${i.published_at}::${Pn}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),t}async creatPoolAndAddLiquidity(e){if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const t=new R,{integrate:i,clmm_pool:n}=this.sdk.sdkOptions,r=T(n),o=r.global_config_id,s=r.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=W.buildAddLiquidityFixTokenCoinInput(t,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,a,!1),d=W.buildAddLiquidityFixTokenCoinInput(t,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,a,!1),l=[t.object(o),t.object(s),t.pure.u32(e.tick_spacing),t.pure.u128(e.initialize_sqrt_price),t.pure.string(e.uri),c.targetCoin,d.targetCoin,t.pure.u32(Number(Ct(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(Ct(BigInt(e.tick_upper)).toString())),t.pure.u64(e.amount_a),t.pure.u64(e.amount_b),t.pure.bool(e.fix_amount_a),t.object($)];return t.moveCall({target:`${i.published_at}::${Oi}::create_pool_with_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:l}),t}async fetchTicks(e){let t=[],i=[];for(;;){const r=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:i,limit:512});if(t=[...t,...r],r.length<512)break;i=[r[r.length-1].index]}return t}async getTicks(e){var d;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=[],r=[e.coinTypeA,e.coinTypeB],o=new R,s=o.makeMoveVec({elements:e.start.map(l=>o.pure.u32(l)),type:"u32"}),a=[o.object(e.pool_id),s,o.pure.u64(e.limit.toString())];if(o.moveCall({target:`${t.published_at}::${Kt}::fetch_ticks`,arguments:a,typeArguments:r}),!bt(i.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const c=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(c.error!=null)throw new F(`getTicks error code: ${c.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(d=c.events)==null||d.forEach(l=>{N(l.type).name==="FetchTicksResultEvent"&&l.parsedJson.ticks.forEach(h=>{n.push(z0(h))})}),n}async fetchPositionRewardList(e){var s;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=[];let r=[];const o=512;for(;;){const a=[e.coinTypeA,e.coinTypeB],c=new R,d=c.makeMoveVec({elements:r.map(y=>c.pure.address(y)),type:void 0}),l=[c.object(e.pool_id),d,c.pure.u64(o)];if(c.moveCall({target:`${t.published_at}::${Kt}::fetch_positions`,arguments:l,typeArguments:a}),!bt(i.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const h=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:i.address});if(h.error!=null)throw new F(`fetch position reward error code: ${h.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const _=[];if((s=h==null?void 0:h.events)==null||s.forEach(y=>{N(y.type).name==="FetchPositionsEvent"&&y.parsedJson.positions.forEach(k=>{const O=$d(k);_.push(O)})}),n.push(..._),_.length<o)break;r=[_[_.length-1].pos_object_id]}return n}async fetchTicksByRpc(e){let t=[],i=null;const n=512;for(;;){const r=[],o=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:i,limit:n});if(i=o.nextCursor,o.data.forEach(s=>{N(s.objectType).module==="skip_list"&&r.push(s.objectId)}),t=[...t,...await this.getTicksByRpc(r)],i===null||o.data.length<n)break}return t}async getTicksByRpc(e){var n,r,o;const t=[],i=await this.sdk.fullClient.batchGetObjects(e,{showContent:!0,showType:!0});for(const s of i){if(s.error!=null||((r=(n=s.data)==null?void 0:n.content)==null?void 0:r.dataType)!=="moveObject")throw new F(`getTicksByRpc error code: ${((o=s.error)==null?void 0:o.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=Oo(s);a!=null&&t.push(a)}return t}async getTickDataByIndex(e,t){var r,o;const i={type:"u64",value:Ct(BigInt(C0(t).toString())).toString()},n=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:i});if(n.error!=null||((o=(r=n.data)==null?void 0:r.content)==null?void 0:o.dataType)!=="moveObject")throw new F(`get tick by index: ${t} error: ${n.error}`,"InvalidTickIndex");return Oo(n)}async getTickDataByObjectId(e){var i,n,r;const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});if(t.error!=null||((n=(i=t.data)==null?void 0:i.content)==null?void 0:n.dataType)!=="moveObject")throw new F(`getTicksByRpc error code: ${((r=t.error)==null?void 0:r.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return Oo(t)}async getPartnerRefFeeAmount(e,t=!0){var c,d;const i=await this._sdk.fullClient.batchGetObjects([e],{showOwner:!0,showContent:!0,showDisplay:t,showType:!0});if(console.log("objectDataResponses:",JSON.stringify(i,null,2)),((d=(c=i[0].data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new F(`get partner by object id: ${e} error: ${i[0].error}`,"NotFoundPartnerObject");const n=i[0].data.content.fields.balances,r=await this._sdk.fullClient.getDynamicFieldsByPage(n.fields.id.id),o=[];r.data.forEach(l=>{l.objectId!=null&&o.push(l.objectId)});const s=[];return(await this._sdk.fullClient.batchGetObjects(o,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(l=>{var _,y;if(l.error!=null||((y=(_=l.data)==null?void 0:_.content)==null?void 0:y.dataType)!=="moveObject")throw new F(`get coin by object id: ${l.data.objectId} error: ${l.error}`,"InvalidParnterRefFeeFields");const h={coinAddress:l.data.content.fields.name,coinObjectId:l.data.objectId,balance:BigInt(l.data.content.fields.value)};s.push(h)}),s}async claimPartnerRefFeePayload(e,t,i){const n=new R,{clmm_pool:r}=this.sdk.sdkOptions,{global_config_id:o}=T(r),s=[i],a=[n.object(o),n.object(e),n.object(t)];return n.moveCall({target:`${r.published_at}::${u0}::claim_ref_fee`,arguments:a,typeArguments:s}),n}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},X0=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(e,t=[],i=!0){const n=[],r=await this._sdk.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:i,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),o=t.length>0;for(const s of r.data)if(N(s.data.type).full_address===this.buildPositionType()){const c=sn(s),d=`${c.pos_object_id}_getPositionList`;this.updateCache(d,c,z),o?t.includes(c.pool)&&n.push(c):n.push(c)}return n}async getPosition(e,t,i=!0,n=!0){let r=await this.getSimplePosition(t,n);return i&&(r=await this.updatePositionRewarders(e,r)),r}async getPositionById(e,t=!0,i=!0){const n=await this.getSimplePosition(e,i);if(t){const r=await this._sdk.Pool.getPool(n.pool,!1);return await this.updatePositionRewarders(r.position_manager.positions_handle,n)}return n}async getSimplePosition(e,t=!0){const i=`${e}_getPositionList`;let n=this.getSimplePositionByCache(e);if(n===void 0){const r=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0,showDisplay:t,showOwner:!0}});n=sn(r),this.updateCache(i,n,z)}return n}getSimplePositionByCache(e){const t=`${e}_getPositionList`;return this.getCache(t)}async getSipmlePositionList(e,t=!0){const i=[],n=[];return e.forEach(r=>{const o=this.getSimplePositionByCache(r);o?i.push(o):n.push(r)}),n.length>0&&(await this._sdk.fullClient.batchGetObjects(n,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(o=>{if(o.error==null){const s=sn(o);i.push(s);const a=`${s.pos_object_id}_getPositionList`;this.updateCache(a,s,z)}}),i}async updatePositionRewarders(e,t){const i=await this.getPositionRewarders(e,t.pos_object_id);return{...t,...i}}async getPositionRewarders(e,t){try{const i=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),r=ee(i.data).value.fields.value;return $d(r)}catch(i){console.log(i);return}}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new R;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[r.object(T(t).global_config_id),r.object(d.poolAddress),r.pure.address(d.positionId)];r.moveCall({target:`${i.published_at}::${Kt}::fetch_position_fees`,arguments:h,typeArguments:l})}if(!bt(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address});if(o.error!=null)throw new F(`fetch position fee error code: ${o.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const s=(c=o.events)==null?void 0:c.filter(d=>N(d.type).name==="FetchPositionFeesEvent");if(s.length===0)return[];const a=[];for(let d=0;d<s.length;d+=1){const{parsedJson:l}=s[d],h={feeOwedA:new b(l.fee_owned_a),feeOwedB:new b(l.fee_owned_b),position_id:l.position_id};a.push(h)}return a}async batchFetchPositionFees(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB})}const i={};if(t.length>0){const n=await this.fetchPosFeeAmount(t);for(const r of n)i[r.position_id]=r;return i}return i}async createAddLiquidityFixTokenPayload(e,t,i,n,r){if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:s,isAdjustCoinB:a}=Sr(e);if(e=e,e.fix_amount_a&&s||!e.fix_amount_a&&a)return i=await W.buildAddLiquidityFixTokenForGas(this._sdk,o,e,t,i,n,r),i}return W.buildAddLiquidityFixToken(this._sdk,o,e,i,n,r)}async createAddLiquidityPayload(e,t,i,n){const{integrate:r,clmm_pool:o}=this._sdk.sdkOptions;if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const s=Ct(BigInt(e.tick_lower)).toString(),a=Ct(BigInt(e.tick_upper)).toString(),c=[e.coinTypeA,e.coinTypeB];t=t||new R;const d=!vn(e.pos_id),l=BigInt(e.max_amount_a),h=BigInt(e.max_amount_b);let _,y;if(i==null||n==null){const k=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);_=W.buildCoinForAmount(t,k,l,e.coinTypeA,!1),y=W.buildCoinForAmount(t,k,h,e.coinTypeB,!1)}else _={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},y={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"};if(d)t.moveCall({target:`${r.published_at}::${Oi}::open_position_with_liquidity`,typeArguments:c,arguments:[t.object(T(o).global_config_id),t.object(e.pool_id),t.pure.u32(Number(s)),t.pure.u32(Number(a)),_.targetCoin,y.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object($)]});else{const k=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=W.createCollectRewarderAndFeeParams(this._sdk,t,e,k,_.remainCoins,y.remainCoins),t.moveCall({target:`${r.published_at}::${Oi}::add_liquidity`,typeArguments:c,arguments:[t.object(T(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),_.targetCoin,y.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object($)]})}return t}async removeLiquidityTransactionPayload(e,t){if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions,r="remove_liquidity";t=t||new R;const o=[e.coinTypeA,e.coinTypeB],s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=W.createCollectRewarderAndFeeParams(this._sdk,t,e,s);const a=[t.object(T(i).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object($)];return t.moveCall({target:`${n.published_at}::${Pn}::${r}`,typeArguments:o,arguments:a}),t}async closePositionTransactionPayload(e,t){if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions;t=t||new R;const r=[e.coinTypeA,e.coinTypeB],o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return t=W.createCollectRewarderAndFeeParams(this._sdk,t,e,o),t.moveCall({target:`${n.published_at}::${Pn}::close_position`,typeArguments:r,arguments:[t.object(T(i).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object($)]}),t}openPositionTransactionPayload(e,t){const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions;t=t||new R;const r=[e.coinTypeA,e.coinTypeB],o=Ct(BigInt(e.tick_lower)).toString(),s=Ct(BigInt(e.tick_upper)).toString(),a=[t.object(T(i).global_config_id),t.object(e.pool_id),t.pure.u32(Number(o)),t.pure.u32(Number(s))];return t.moveCall({target:`${n.published_at}::${Pn}::open_position`,typeArguments:r,arguments:a}),t}async collectFeeTransactionPayload(e,t,i,n){if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0);t=t||new R;const o=W.buildCoinForAmount(t,r,BigInt(0),e.coinTypeA,!1),s=W.buildCoinForAmount(t,r,BigInt(0),e.coinTypeB,!1),a=i??o.targetCoin,c=n??s.targetCoin;return this.createCollectFeePaylod(e,t,a,c),t}createCollectFeePaylod(e,t,i,n){const{clmm_pool:r,integrate:o}=this.sdk.sdkOptions,s=[e.coinTypeA,e.coinTypeB],a=[t.object(T(r).global_config_id),t.object(e.pool_id),t.object(e.pos_id),i,n];return t.moveCall({target:`${o.published_at}::${Oi}::collect_fee`,typeArguments:s,arguments:a}),t}createCollectFeeNoSendPaylod(e,t,i,n){const{clmm_pool:r,integrate:o}=this.sdk.sdkOptions,s=[e.coinTypeA,e.coinTypeB],a=[t.object(T(r).global_config_id),t.object(e.pool_id),t.object(e.pos_id),i,n];return t.moveCall({target:`${o.published_at}::${Id}::collect_fee`,typeArguments:s,arguments:a}),t}async calculateFee(e){const t=await this.collectFeeTransactionPayload(e);if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const i=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:t,sender:this._sdk.senderAddress});for(const n of i.events)if(N(n.type).name==="CollectFeeEvent"){const r=n.parsedJson;return{feeOwedA:r.amount_a,feeOwedB:r.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},J0=class{constructor(e){L(this,"_sdk");L(this,"growthGlobal");this._sdk=e,this.growthGlobal=[J,J,J]}get sdk(){return this._sdk}async emissionsEveryDay(e){const i=(await this.sdk.Pool.getPool(e)).rewarder_infos;if(!i)return null;const n=[];for(const r of i){const o=ce.fromX64(new b(r.emissions_per_second));n.push({emissions:Math.floor(o.toNumber()*60*60*24),coin_address:r.coinAddress})}return n}async updatePoolRewarder(e,t){const i=await this.sdk.Pool.getPool(e),n=i.rewarder_last_updated_time;if(i.rewarder_last_updated_time=t.toString(),Number(i.liquidity)===0||t.eq(new b(n)))return i;const r=t.div(new b(1e3)).sub(new b(n)).add(new b(15)),o=i.rewarder_infos;for(let s=0;s<o.length;s+=1){const a=o[s],c=ce.checkMulDivFloor(r,new b(a.emissions_per_second),new b(i.liquidity),128);this.growthGlobal[s]=new b(a.growth_global).add(new b(c))}return i}async posRewardersAmount(e,t,i){const n=Date.parse(new Date().toString()),r=await this.updatePoolRewarder(e,new b(n)),o=await this.sdk.Position.getPositionRewarders(t,i);if(o===void 0)return[];const s=r.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(s,o.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(s,o.tick_upper_index);return this.posRewardersAmountInternal(r,o,a,c)}async poolRewardersAmount(e,t){const i=Date.parse(new Date().toString()),n=await this.updatePoolRewarder(t,new b(i)),r=await this.sdk.Position.getPositionList(e,[t]),o=await this.getPoolLowerAndUpperTicks(n.ticks_handle,r),s=[J,J,J];for(let a=0;a<r.length;a+=1){const c=await this.posRewardersAmountInternal(n,r[a],o[0][a],o[1][a]);for(let d=0;d<3;d+=1)s[d]=s[d].add(c[d].amount_owed)}return s}posRewardersAmountInternal(e,t,i,n){const r=t.tick_lower_index,o=t.tick_upper_index,s=G0(e,i,n,r,o,this.growthGlobal),a=[],c=[];if(s.length>0){let d=ce.subUnderflowU128(s[0],new b(t.reward_growth_inside_0));d.gt(new b("3402823669209384634633745948738404"))&&(d=ci);const l=ce.checkMulShiftRight(new b(t.liquidity),d,64,128);a.push(s[0]),c.push({amount_owed:new b(t.reward_amount_owed_0).add(l),coin_address:e.rewarder_infos[0].coinAddress})}if(s.length>1){let d=ce.subUnderflowU128(s[1],new b(t.reward_growth_inside_1));d.gt(new b("3402823669209384634633745948738404"))&&(d=ci);const l=ce.checkMulShiftRight(new b(t.liquidity),d,64,128);a.push(s[1]),c.push({amount_owed:new b(t.reward_amount_owed_1).add(l),coin_address:e.rewarder_infos[1].coinAddress})}if(s.length>2){let d=ce.subUnderflowU128(s[2],new b(t.reward_growth_inside_2));d.gt(new b("3402823669209384634633745948738404"))&&(d=ci);const l=ce.checkMulShiftRight(new b(t.liquidity),d,64,128);a.push(s[2]),c.push({amount_owed:new b(t.reward_amount_owed_2).add(l),coin_address:e.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB,rewarderInfo:o.rewarder_infos})}const i={};if(t.length>0){const n=await this.fetchPosRewardersAmount(t);for(const r of n)i[r.positionId]=r.rewarderAmountOwed;return i}return i}async fetchPositionRewarders(e,t){const i={poolAddress:e.poolAddress,positionId:t,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,rewarderInfo:e.rewarder_infos};return(await this.fetchPosRewardersAmount([i]))[0].rewarderAmountOwed}async batchFetchPositionFees(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB})}const i={};if(t.length>0){const n=await this.fetchPosFeeAmount(t);for(const r of n)i[r.position_id]=r;return i}return i}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new R;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[r.object(T(t).global_config_id),r.object(d.poolAddress),r.pure.address(d.positionId)];r.moveCall({target:`${i.published_at}::${Kt}::fetch_position_fees`,arguments:h,typeArguments:l})}const s=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address})).events)==null?void 0:c.filter(d=>N(d.type).name==="FetchPositionFeesEvent");if(s.length===0)return[];const a=[];for(let d=0;d<s.length;d+=1){const{parsedJson:l}=s[d],h={feeOwedA:new b(l.fee_owned_a),feeOwedB:new b(l.fee_owned_b),position_id:l.position_id};a.push(h)}return a}async fetchPosRewardersAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new R;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[r.object(T(t).global_config_id),r.object(d.poolAddress),r.pure.address(d.positionId),r.object($)];r.moveCall({target:`${i.published_at}::${Kt}::fetch_position_rewards`,arguments:h,typeArguments:l})}if(!bt(n.address))throw new F(`this config simulationAccount: ${n.address} is not set right`,"InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address});if(o.error!=null)throw new F(`fetch position rewards error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const s=(c=o.events)==null?void 0:c.filter(d=>N(d.type).name==="FetchPositionRewardsEvent");if(s.length===0)return[];if(s.length!==e.length)throw new F("valueData.length !== params.pools.length");const a=[];for(let d=0;d<s.length;d+=1){const l={poolAddress:e[d].poolAddress,positionId:e[d].positionId,rewarderAmountOwed:[]};for(let h=0;h<e[d].rewarderInfo.length;h+=1)l.rewarderAmountOwed.push({amount_owed:new b(s[d].parsedJson.data[h]),coin_address:e[d].rewarderInfo[h].coinAddress});a.push(l)}return a}async fetchPoolRewardersAmount(e,t){const i=await this.sdk.Pool.getPool(t),n=await this.sdk.Position.getPositionList(e,[t]),r=[];for(const a of n)r.push({poolAddress:i.poolAddress,positionId:a.pos_object_id,rewarderInfo:i.rewarder_infos,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB});const o=await this.fetchPosRewardersAmount(r),s=[J,J,J];if(o!=null)for(const a of o)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)s[c]=s[c].add(a.rewarderAmountOwed[c].amount_owed);return s}async getPoolLowerAndUpperTicks(e,t){const i=[],n=[];for(const r of t){const o=await this.sdk.Pool.getTickDataByIndex(e,r.tick_lower_index),s=await this.sdk.Pool.getTickDataByIndex(e,r.tick_upper_index);i.push(o),n.push(s)}return[i,n]}async collectRewarderTransactionPayload(e){if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let i=new R;return i=W.createCollectRewarderAndFeeParams(this._sdk,i,e,t),i}async batchCollectRewardePayload(e,t,i,n){if(!bt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);t=t||new R;const o={};return e.forEach(s=>{const a=Ae(s.coinTypeA),c=Ae(s.coinTypeB);if(s.collect_fee){let l=o[a];l==null&&(i==null?l=W.buildCoinForAmount(t,r,BigInt(0),a,!1):l={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},o[a]=l);let h=o[c];h==null&&(n==null?h=W.buildCoinForAmount(t,r,BigInt(0),c,!1):h={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},o[c]=h),t=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:s.pool_id,pos_id:s.pos_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB},t,l.targetCoin,h.targetCoin)}const d=[];s.rewarder_coin_types.forEach(l=>{const h=Ae(l);let _=o[l];_===void 0&&(_=W.buildCoinForAmount(t,r,BigInt(0),h,!1),o[h]=_),d.push(_.targetCoin)}),t=this.createCollectRewarderNoSendPaylod(s,t,d)}),Object.keys(o).forEach(s=>{const a=o[s];a.isMintZeroCoin&&W.buildTransferCoin(this._sdk,t,a.targetCoin,s,this._sdk.senderAddress)}),t}createCollectRewarderPaylod(e,t,i){const{clmm_pool:n,integrate:r}=this.sdk.sdkOptions,o=T(n),s=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${r.published_at}::${Oi}::collect_reward`,typeArguments:[...s,a],arguments:[t.object(o.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(o.global_vault_id),i[c],t.object($)]})}),t}createCollectRewarderNoSendPaylod(e,t,i){const{clmm_pool:n,integrate:r}=this.sdk.sdkOptions,o=T(n),s=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${r.published_at}::${Id}::collect_reward`,typeArguments:[...s,a],arguments:[t.object(o.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(o.global_vault_id),i[c],t.object($)]})}),t}};function er(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}var Z0=class{constructor(e){L(this,"graph");L(this,"pathProviders");L(this,"coinProviders");L(this,"_coinAddressMap");L(this,"poolAddressMap");L(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new kl(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=e,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:i,reversePair:n}=er(e,t);let r=this.poolAddressMap.get(i);if(r!=null)return{addressMap:r,direction:!0};if(r=this.poolAddressMap.get(n),r!=null)return{addressMap:r,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinAddressMap.set(e.address,e)})}loadGraph(e,t){this.addCoinProvider(e),this.addPathProvider(t),this.setCoinList(),this.pathProviders.forEach(i=>{const{paths:n}=i;n.forEach(r=>{const o=this.graph.getVertexByKey(r.base)??new ia(r.base),s=this.graph.getVertexByKey(r.quote)??new ia(r.quote);this.graph.addEdge(new wl(o,s));const a=this._coinAddressMap.get(r.base),c=this._coinAddressMap.get(r.quote);if(a!=null&&c!=null){const d=er(r.base,r.quote).pair;this.poolAddressMap.set(d,r.addressMap)}})})}addPathProvider(e){for(let t=0;t<e.paths.length;t+=1){const{base:i,quote:n}=e.paths[t];i.localeCompare(n)<0&&(e.paths[t].base=n,e.paths[t].quote=i),i==="0x2::sui::SUI"&&(e.paths[t].base=n,e.paths[t].quote=i),n==="0x2::sui::SUI"&&(e.paths[t].base=i,e.paths[t].quote=n)}return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.get(e)}getFeeRate(e,t,i){const n=er(e,t).pair,r=this.poolAddressMap.get(n);if(r!=null){for(const[a,c]of r.entries())if(c===i)return a*100}const o=er(e,t).reversePair,s=this.poolAddressMap.get(o);if(s!=null){for(const[a,c]of s.entries())if(c===i)return a*100}return 0}async price(e,t,i,n,r,o,s){const a=this.tokenInfo(e),c=this.tokenInfo(t);if(a===void 0||c===void 0)throw new F("From/To coin is undefined","InvalidCoin");const d=this.graph.getVertexByKey(a.address),l=this.graph.getVertexByKey(c.address),h=this.graph.findAllPath(d,l),_=Array.from(h);if(_.length===0)throw new F("No find valid path in coin graph","NotFoundPath");let y=[];for(let Y=0;Y<_.length;Y+=1){const H=_[Y];if(H.length>3)continue;const ye=[],x=[],u=[],p=[];for(let m=0;m<H.length-1;m+=1){const v=H[m].value.toString(),A=H[m+1].value.toString(),I=this.getPoolAddressMapAndDirection(v,A),E=I==null?void 0:I.addressMap,w=I==null?void 0:I.direction;E!=null&&w!=null&&(x.push(w),ye.push(v),ye.push(A),E.forEach(f=>{m===0?u.push(f):p.push(f)}))}for(const m of u)if(p.length>0)for(const v of p){const A={stepNums:2,poolAB:m,poolBC:v,a2b:x[0],b2c:x[1],amount:i,byAmountIn:n,coinTypeA:ye[0],coinTypeB:ye[1],coinTypeC:ye[3]};y.push(A)}else{const v={stepNums:1,poolAB:m,poolBC:void 0,a2b:x[0],b2c:void 0,amount:i,byAmountIn:n,coinTypeA:ye[0],coinTypeB:ye[1],coinTypeC:void 0};y.push(v)}}const k=y.filter(Y=>Y.stepNums===1),O=y.filter(Y=>Y.stepNums!==1);let P=[];try{P=await this.getPoolWithTVL()}catch{P=[]}if(P.length>0){const Y=new Map(P.map(H=>[H.poolAddress,H]));O.sort((H,ye)=>{let x=0,u=0;if(Y.has(H.poolAB)&&Y.has(H.poolBC)){const p=Y.get(H.poolAB),m=Y.get(H.poolBC);x=Math.min(p.tvl,m.tvl)}if(Y.has(ye.poolAB)&&Y.has(ye.poolBC)){const p=Y.get(ye.poolAB),m=Y.get(ye.poolBC);u=Math.min(p.tvl,m.tvl)}return u-x})}if(y=[...k,...O],y.length===0){if(s!=null){const Y=await this.sdk.Swap.preSwapWithMultiPool(s),H={amountIn:new b(Y.estimatedAmountIn),amountOut:new b(Y.estimatedAmountOut),poolAddress:[Y.poolAddress],a2b:[Y.aToB],rawAmountLimit:n?[Y.estimatedAmountOut]:[Y.estimatedAmountIn],isExceed:Y.isExceed,coinType:[e,t]},ye={paths:[H],partner:o,priceSlippagePoint:r};return{amountIn:new b(Y.estimatedAmountIn),amountOut:new b(Y.estimatedAmountOut),paths:[H],a2b:Y.aToB,b2c:void 0,byAmountIn:n,isExceed:Y.isExceed,targetSqrtPrice:[Y.estimatedEndSqrtPrice],currentSqrtPrice:[Y.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:ye}}throw new F("No parameters available for service downgrade","NoDowngradeNeedParams")}const M=await this.preRouterSwapA2B2C(y.slice(0,16));if(M==null){if(s!=null){const H=await this.sdk.Swap.preSwapWithMultiPool(s),ye={amountIn:new b(H.estimatedAmountIn),amountOut:new b(H.estimatedAmountOut),poolAddress:[H.poolAddress],a2b:[H.aToB],rawAmountLimit:n?[H.estimatedAmountOut]:[H.estimatedAmountIn],isExceed:H.isExceed,coinType:[e,t]},x={paths:[ye],partner:o,priceSlippagePoint:r};return{amountIn:new b(H.estimatedAmountIn),amountOut:new b(H.estimatedAmountOut),paths:[ye],a2b:H.aToB,b2c:void 0,byAmountIn:n,isExceed:H.isExceed,targetSqrtPrice:[H.estimatedEndSqrtPrice],currentSqrtPrice:[H.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:x}}return{amountIn:J,amountOut:J,paths:[],a2b:!1,b2c:!1,byAmountIn:n,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const j=M.index,B=y[j].poolBC!=null?[y[j].poolAB,y[j].poolBC]:[y[j].poolAB],q=n?[M.amountMedium,M.amountOut]:[M.amountIn,M.amountMedium],X=[];X.push(y[j].a2b),M.stepNum>1&&X.push(y[j].b2c);const Z=[];Z.push(y[j].coinTypeA),Z.push(y[j].coinTypeB),M.stepNum>1&&Z.push(y[j].coinTypeC);const fe={amountIn:M.amountIn,amountOut:M.amountOut,poolAddress:B,a2b:X,rawAmountLimit:q,isExceed:M.isExceed,coinType:Z},ve={paths:[fe],partner:o,priceSlippagePoint:r};return{amountIn:M.amountIn,amountOut:M.amountOut,paths:[fe],a2b:y[j].a2b,b2c:M.stepNum>1?y[j].b2c:void 0,byAmountIn:n,isExceed:M.isExceed,targetSqrtPrice:M.targetSqrtPrice,currentSqrtPrice:M.currentSqrtPrice,coinTypeA:y[j].coinTypeA,coinTypeB:y[j].coinTypeB,coinTypeC:M.stepNum>1?y[j].coinTypeC:void 0,createTxParams:ve}}async priceUseV1(e,t,i,n,r,o,s){if(s!=null){const a=await this.sdk.Swap.preSwapWithMultiPool(s),c={amountIn:new b(a.estimatedAmountIn),amountOut:new b(a.estimatedAmountOut),poolAddress:[a.poolAddress],a2b:[a.aToB],rawAmountLimit:n?[a.estimatedAmountOut]:[a.estimatedAmountIn],isExceed:a.isExceed,coinType:[e,t]},d={paths:[c],partner:o,priceSlippagePoint:r};return{amountIn:new b(a.estimatedAmountIn),amountOut:new b(a.estimatedAmountOut),paths:[c],a2b:a.aToB,b2c:void 0,byAmountIn:n,isExceed:a.isExceed,targetSqrtPrice:[a.estimatedEndSqrtPrice],currentSqrtPrice:[a.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:d}}throw new F("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(e){var h;if(e.length===0)return null;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new R;for(const _ of e)if(_.stepNums>1){const y=[n.object(_.poolAB),n.object(_.poolBC),n.pure.bool(_.a2b),n.pure.bool(_.b2c),n.pure.bool(_.byAmountIn),n.pure.u64(_.amount.toString())],k=[];_.a2b?k.push(_.coinTypeA,_.coinTypeB):k.push(_.coinTypeB,_.coinTypeA),_.b2c?k.push(_.coinTypeB,_.coinTypeC):k.push(_.coinTypeC,_.coinTypeB),n.moveCall({target:`${t.published_at}::${Li}::calculate_router_swap_result`,typeArguments:k,arguments:y})}else{const y=[n.object(_.poolAB),n.pure.bool(_.a2b),n.pure.bool(_.byAmountIn),n.pure.u64(_.amount.toString())],k=_.a2b?[_.coinTypeA,_.coinTypeB]:[_.coinTypeB,_.coinTypeA];n.moveCall({target:`${t.published_at}::${f0}::get_expect_swap_result`,arguments:y,typeArguments:k})}if(!bt(i.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const o=(h=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address})).events)==null?void 0:h.filter(_=>N(_.type).name==="CalculatedRouterSwapResultEvent"||N(_.type).name==="ExpectSwapResultEvent");if(o.length===0)return null;let s=e[0].byAmountIn?J:cn,a=0;for(let _=0;_<o.length;_+=1)if(!o[_].parsedJson.data.is_exceed)if(e[0].byAmountIn){const y=new b(o[_].parsedJson.data.amount_out);y.gt(s)&&(a=_,s=y)}else{const y=e[_].stepNums>1?new b(o[_].parsedJson.data.amount_in):new b(o[_].parsedJson.data.amount_in).add(new b(o[_].parsedJson.data.fee_amount));y.lt(s)&&(a=_,s=y)}const c=[],d=[];return e[a].stepNums>1?(d.push(o[a].parsedJson.data.target_sqrt_price_ab,o[a].parsedJson.data.target_sqrt_price_cd),c.push(o[a].parsedJson.data.current_sqrt_price_ab,o[a].parsedJson.data.current_sqrt_price_cd)):(d.push(o[a].parsedJson.data.after_sqrt_price),c.push(o[a].parsedJson.current_sqrt_price)),{index:a,amountIn:e[0].byAmountIn?e[a].amount:s,amountMedium:o[a].parsedJson.data.amount_medium,amountOut:e[0].byAmountIn?s:e[a].amount,targetSqrtPrice:d,currentSqrtPrice:c,isExceed:o[a].parsedJson.data.is_exceed,stepNum:e[a].stepNums}}async getPoolWithTVL(){const e=[],{swapCountUrl:t}=this._sdk.sdkOptions;if(!t)return e;let i;try{i=await fetch(t)}catch{throw new F(`Failed to get pool list with liquidity from ${t}.`,"InvalidSwapCountUrl")}let n;try{n=await i.json()}catch{throw new F(`Failed tp [arse response from ${t}].`,"InvalidSwapCountUrl")}if(n.code!==200)throw new F(`Failed to get pool list from ${t}. Statu code is ${n.code}.`,"InvalidSwapCountUrl");const{pools:r}=n.data;for(const o of r)e.push({poolAddress:o.swap_account,tvl:Number(o.tvl_in_usd)});return e}},Q0=class{constructor(e){L(this,"_sdk");L(this,"calculateSingleImpact",(e,t)=>t.minus(e).div(t).mul(100));this._sdk=e}get sdk(){return this._sdk}calculateSwapFee(e){let t=g(0);return e.forEach(i=>{const n=i.basePaths.length;if(n>0){const r=i.basePaths[0],o=r.label==="Cetus"?new K(r.feeRate).div(10**6):new K(r.feeRate).div(10**9),s=g(r.inputAmount).div(10**r.fromDecimal).mul(o);if(t=t.add(s),n>1){const a=i.basePaths[1],c=r.direction?r.currentPrice:new K(1).div(r.currentPrice),d=a.direction?a.currentPrice:new K(1).div(a.currentPrice),l=a.label==="Cetus"?new K(a.feeRate).div(10**6):new K(a.feeRate).div(10**9),_=g(a.outputAmount).div(10**a.toDecimal).mul(l).div(c.mul(d));t=t.add(_)}}}),t.toString()}calculateSwapPriceImpact(e){let t=g(0);return e.forEach(i=>{const n=i.basePaths.length;if(n===1){const r=i.basePaths[0],o=g(r.outputAmount).div(10**r.toDecimal),s=g(r.inputAmount).div(10**r.fromDecimal),a=o.div(s),c=r.direction?new K(r.currentPrice):new K(1).div(r.currentPrice);t=t.add(this.calculateSingleImpact(a,c))}if(n===2){const r=i.basePaths[0],o=i.basePaths[1],s=r.direction?new K(r.currentPrice):new K(1).div(r.currentPrice),a=o.direction?new K(o.currentPrice):new K(1).div(o.currentPrice),c=s.mul(a),d=new K(o.outputAmount).div(10**o.toDecimal),l=new K(r.inputAmount).div(10**r.fromDecimal),h=d.div(l);t=t.add(this.calculateSingleImpact(h,c))}}),t.toString()}async preSwapWithMultiPool(e){var d;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new R,r=[e.coinTypeA,e.coinTypeB];for(let l=0;l<e.poolAddresses.length;l+=1){const h=[n.object(e.poolAddresses[l]),n.pure.bool(e.a2b),n.pure.bool(e.byAmountIn),n.pure.u64(e.amount)];n.moveCall({target:`${t.published_at}::${Kt}::calculate_swap_result`,arguments:h,typeArguments:r})}if(!bt(i.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address});if(o.error!=null)throw new F(`pre swap with multi pools error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const s=(d=o.events)==null?void 0:d.filter(l=>N(l.type).name==="CalculatedSwapResultEvent");if(s.length===0)return null;if(s.length!==e.poolAddresses.length)throw new F("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=e.byAmountIn?J:cn,c=0;for(let l=0;l<s.length;l+=1)if(!s[l].parsedJson.data.is_exceed)if(e.byAmountIn){const h=new b(s[l].parsedJson.data.amount_out);h.gt(a)&&(c=l,a=h)}else{const h=new b(s[l].parsedJson.data.amount_out);h.lt(a)&&(c=l,a=h)}return this.transformSwapWithMultiPoolData({poolAddress:e.poolAddresses[c],a2b:e.a2b,byAmountIn:e.byAmountIn,amount:e.amount,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},s[c].parsedJson)}async preswap(e){var c;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new R,r=[e.coinTypeA,e.coinTypeB],o=[n.object(e.pool.poolAddress),n.pure.bool(e.a2b),n.pure.bool(e.byAmountIn),n.pure.u64(e.amount)];if(n.moveCall({target:`${t.published_at}::${Kt}::calculate_swap_result`,arguments:o,typeArguments:r}),!bt(i.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address});if(s.error!=null)throw new F(`preswap error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=s.events)==null?void 0:c.filter(d=>N(d.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const i=t.amount_in&&t.fee_amount?new b(t.amount_in).add(new b(t.fee_amount)).toString():"";return{poolAddress:e.pool.poolAddress,currentSqrtPrice:e.currentSqrtPrice,estimatedAmountIn:i,estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}transformSwapWithMultiPoolData(e,t){const{data:i}=t;console.log("json data. ",i);const n=i.amount_in&&i.fee_amount?new b(i.amount_in).add(new b(i.fee_amount)).toString():"";return{poolAddress:e.poolAddress,estimatedAmountIn:n,estimatedAmountOut:i.amount_out,estimatedEndSqrtPrice:i.after_sqrt_price,estimatedStartSqrtPrice:i.step_results[0].current_sqrt_price,estimatedFeeAmount:i.fee_amount,isExceed:i.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}calculateRates(e){const{currentPool:t}=e,i=l0(t);let n;e.a2b?n=e.swapTicks.sort((h,_)=>_.index-h.index):n=e.swapTicks.sort((h,_)=>h.index-_.index);const r=T0(e.a2b,e.byAmountIn,e.amount,i,n);let o=!1;e.byAmountIn?o=r.amountIn.lt(e.amount):o=r.amountOut.lt(e.amount);const s=ri.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&r.nextSqrtPrice.lt(s)&&(o=!0),!e.a2b&&r.nextSqrtPrice.gt(s)&&(o=!0);let a=0;r.crossTickNum>6&&r.crossTickNum<40&&(a=22e3*(r.crossTickNum-6)),r.crossTickNum>40&&(o=!0);const c=G.sqrtPriceX64ToPrice(i.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),d=G.sqrtPriceX64ToPrice(r.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),l=Math.abs(c-d)/c*100;return{estimatedAmountIn:r.amountIn,estimatedAmountOut:r.amountOut,estimatedEndSqrtPrice:r.nextSqrtPrice,estimatedFeeAmount:r.feeAmount,isExceed:o,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:l}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:n,isAdjustCoinB:r}=Sr(e);if(e.a2b&&n||!e.a2b&&r)return await W.buildSwapTransactionForGas(this._sdk,e,i,t)}return W.buildSwapTransaction(this.sdk,e,i)}async createSwapTransactionWithoutTransferCoinsPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:n,isAdjustCoinB:r}=Sr(e);if(e.a2b&&n||!e.a2b&&r)return await W.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,e,i,t)}return W.buildSwapTransactionWithoutTransferCoins(this.sdk,e,i)}},Y0=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",i=!1){return await this.factchWarpPoolList(e,t,i)}async getTokenListByCoinTypes(e){const t={},i="getAllRegisteredTokenList",n=this.getCache(i);if(n!==void 0){const o=n;for(const s of e)for(const a of o)if(Ae(s)===Ae(a.address)){t[s]=a;continue}}const r=e.filter(o=>t[o]===void 0);for(const o of r){const s=`${o}_metadata`,a=this.getCache(s);if(a!==void 0)t[o]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:o});if(c){const d={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:o};t[o]=d,this.updateCache(s,d,z)}}}return t}async factchTokenList(e="",t=!1){var h;const{simulationAccount:i,token:n}=this.sdk.sdkOptions,r="getAllRegisteredTokenList",o=this.getCache(r,t);if(o!==void 0)return o;const s=e.length>0,a=512;let c=0,d=[];if(n===void 0)throw Error("please config token ofsdkOptions");const l=T(n);for(;;){const _=new R;_.moveCall({target:`${n.published_at}::coin_list::${s?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:s?[_.pure.address(l.coin_registry_id),_.pure.address(e),_.pure.u64(c),_.pure.u64(a)]:[_.pure.address(l.coin_registry_id),_.pure.u64(c),_.pure.u64(a)]});const y=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:i.address}),k=[];if((h=y.events)==null||h.forEach(O=>{N(O.type).full_address===`${n.published_at}::coin_list::FetchCoinListEvent`&&O.parsedJson.full_list.value_list.forEach(M=>{k.push(this.transformData(M,!1))})}),d=[...d,...k],k.length<a)break;c=d.length}return d}async factchPoolList(e="",t=!1){var h;const{simulationAccount:i,token:n}=this.sdk.sdkOptions,r="getAllRegisteredPoolList",o=this.getCache(r,t);if(o!==void 0)return o;let s=[];const a=512;let c=0;const d=e.length>0;if(n===void 0)throw Error("please config token ofsdkOptions");const l=T(n);for(;;){const _=new R;if(_.moveCall({target:`${n.published_at}::lp_list::${d?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:d?[_.pure.address(l.pool_registry_id),_.pure.address(e),_.pure.u64(c),_.pure.u64(a)]:[_.pure.address(l.pool_registry_id),_.pure.u64(c),_.pure.u64(a)]}),!bt(i.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const y=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:i.address}),k=[];if((h=y.events)==null||h.forEach(O=>{N(O.type).full_address===`${n.published_at}::lp_list::FetchPoolListEvent`&&O.parsedJson.full_list.value_list.forEach(M=>{k.push(this.transformData(M,!0))})}),s=[...s,...k],k.length<a)break;c=s.length}return s}async factchWarpPoolList(e="",t="",i=!1){const n=await this.factchPoolList(e,i);if(n.length===0)return[];const r=await this.factchTokenList(t,i),o=[];for(const s of n){for(const a of r)a.address===s.coin_a_address&&(s.coinA=a),a.address===s.coin_b_address&&(s.coinB=a);o.push(s)}return o}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.token.package_id,i=`${t}_getTokenConfigEvent`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=Gn(r),s=await this._sdk.fullClient.queryEventsByPage({Transaction:o}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return s.data.length>0&&s.data.forEach(c=>{const d=N(c.type);if(c.transactionModule==="coin_list")switch(d.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(d.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(i,a,z),a}transformData(e,t){const i={...e};if(t)try{i.coin_a_address=N(i.coin_a_address).full_address,i.coin_b_address=N(i.coin_b_address).full_address}catch{}else i.address=N(i.address).full_address;if(e.extensions){const n=e.extensions.contents;for(const r of n){const{key:o}=r;let{value:s}=r;if(o==="labels")try{s=JSON.parse(decodeURIComponent(or.decode(s)))}catch{}o==="pyth_id"&&(s=be(s)),i[o]=s}delete i.extensions}return i}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},e_=class{constructor(e){L(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}calculatePrice(e,t,i,n,r){const o=n?t:i,s=n?i:t;return r==="Cetus"?G.sqrtPriceX64ToPrice(e,o,s):new K(e.toString()).div(new K(10).pow(new K(s+9-o)))}parseJsonResult(e){return{isExceed:e.is_exceed,isTimeout:e.is_timeout,inputAmount:e.input_amount,outputAmount:e.output_amount,fromCoin:e.from_coin,toCoin:e.to_coin,byAmountIn:e.by_amount_in,splitPaths:e.split_paths.map(i=>({pathIndex:i.path_index,lastQuoteOutput:i.last_quote_output,percent:i.percent,basePaths:i.best_path.map(r=>({direction:r.direction,label:r.label,poolAddress:r.provider,fromCoin:r.from_coin,toCoin:r.to_coin,outputAmount:r.output_amount,inputAmount:r.input_amount,feeRate:r.fee_rate,currentSqrtPrice:new b(r.current_sqrt_price.toString()),afterSqrtPrice:r.label==="Cetus"?new b(r.after_sqrt_price.toString()):J,fromDecimal:r.from_decimal,toDecimal:r.to_decimal,currentPrice:this.calculatePrice(new b(r.current_sqrt_price.toString()),r.from_decimal,r.to_decimal,r.direction,r.label)})),inputAmount:i.input_amount,outputAmount:i.output_amount}))}}async fetchDataWithAxios(e,t,i){try{const n={...t,timeout:i},r=await Gp(e,n);return r.status===200?this.parseJsonResult(r.data):null}catch(n){return console.error(n),null}}async getBestRouter(e,t,i,n,r,o,s,a,c=!1,d=!1,l=[]){let h=null,_="v2",y={},k=this.sdk.sdkOptions.aggregatorUrl;if(l.length>0){const O=new URL(k);k=`${O.protocol}//${O.hostname}/router_with_lp_changes`,y={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:i,by_amount_in:n,order_split:c,external_router:d,sender_address:"None",request_id:encodeURIComponent(Jn()),lp_changes:l})}}else k=`
      ${k}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(i)}&by_amount_in=${encodeURIComponent(n)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(d)}&sender_address=''&request_id=${encodeURIComponent(Jn())}
      `;if(h=await this.fetchDataWithAxios(k,y,6e3),h==null){const O=await this.sdk.Router.priceUseV1(e,t,new b(i),n,r,o,a),P=[];for(const j of O.paths){const B=[];if(j.poolAddress.length>1){const X=this.sdk.Router.tokenInfo(j.coinType[0]).decimals,Z=this.sdk.Router.tokenInfo(j.coinType[1]).decimals,fe=j.a2b[0]?G.sqrtPriceX64ToPrice(new b(O.currentSqrtPrice[0]),X,Z):G.sqrtPriceX64ToPrice(new b(O.currentSqrtPrice[0]),Z,X),ve={direction:j.a2b[0],label:"Cetus",poolAddress:j.poolAddress[0],fromCoin:j.coinType[0],toCoin:j.coinType[1],feeRate:this.sdk.Router.getFeeRate(j.coinType[0],j.coinType[1],j.poolAddress[0]),outputAmount:O.byAmountIn?j.rawAmountLimit[0].toString():j.rawAmountLimit[1].toString(),inputAmount:j.amountIn.toString(),currentSqrtPrice:O.currentSqrtPrice[0],currentPrice:fe,fromDecimal:X,toDecimal:Z},_t=this.sdk.Router.tokenInfo(j.coinType[1]).decimals,Y=this.sdk.Router.tokenInfo(j.coinType[2]).decimals,H=j.a2b[1]?G.sqrtPriceX64ToPrice(new b(O.currentSqrtPrice[1]),_t,Y):G.sqrtPriceX64ToPrice(new b(O.currentSqrtPrice[1]),Y,_t),ye={direction:j.a2b[1],label:"Cetus",poolAddress:j.poolAddress[1],fromCoin:j.coinType[1],toCoin:j.coinType[2],feeRate:this.sdk.Router.getFeeRate(j.coinType[1],j.coinType[2],j.poolAddress[1]),outputAmount:j.amountOut.toString(),inputAmount:O.byAmountIn?j.rawAmountLimit[0].toString():j.rawAmountLimit[1].toString(),currentSqrtPrice:O.currentSqrtPrice[1],currentPrice:H,fromDecimal:_t,toDecimal:Y};B.push(ve,ye)}else{const X=this.sdk.Router.tokenInfo(j.coinType[0]).decimals,Z=this.sdk.Router.tokenInfo(j.coinType[1]).decimals,fe=j.a2b[0]?G.sqrtPriceX64ToPrice(new b(O.currentSqrtPrice[0]),X,Z):G.sqrtPriceX64ToPrice(new b(O.currentSqrtPrice[0]),Z,X),ve={direction:j.a2b[0],label:"Cetus",poolAddress:j.poolAddress[0],fromCoin:j.coinType[0],toCoin:j.coinType[1],feeRate:this.sdk.Router.getFeeRate(j.coinType[0],j.coinType[1],j.poolAddress[0]),outputAmount:j.amountOut.toString(),inputAmount:j.amountIn.toString(),currentSqrtPrice:O.currentSqrtPrice[0],currentPrice:fe,fromDecimal:X,toDecimal:Z};B.push(ve)}const q={percent:Number(j.amountIn)/Number(O.amountIn)*100,inputAmount:Number(j.amountIn.toString()),outputAmount:Number(j.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:B};P.push(q)}const M={isExceed:O.isExceed,isTimeout:!0,inputAmount:Number(O.amountIn.toString()),outputAmount:Number(O.amountOut.toString()),fromCoin:O.coinTypeA,toCoin:O.coinTypeC!=null?O.coinTypeC:O.coinTypeB,byAmountIn:O.byAmountIn,splitPaths:P};_="v1",h=M}return{result:h,version:_}}async getBestRouterByServer(e,t,i,n,r,o=!1,s=!1,a=[]){let c=null,d={},l=this.sdk.sdkOptions.aggregatorUrl;if(a.length>0){const h=new URL(l);l=`${h.protocol}//${h.hostname}/router_with_lp_changes`,d={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:i,by_amount_in:n,order_split:o,external_router:s,sender_address:"None",request_id:encodeURIComponent(Jn()),lp_changes:a})}}else l=`
      ${l}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(i)}&by_amount_in=${encodeURIComponent(n)}&order_split=${encodeURIComponent(o)}&external_router=${encodeURIComponent(s)}&sender_address=''&request_id=${encodeURIComponent(Jn())}
      `;if(c=await this.fetchDataWithAxios(l,d,6e3),c==null)throw new F("Invalid server response","InvalidServerResponse");return c}async getBestRouterByRpc(e,t,i,n,r,o,s){const a=await this.sdk.Router.priceUseV1(e,t,new b(i),n,r,o,s),c=[];for(const l of a.paths){const h=[];if(l.poolAddress.length>1){const y=this.sdk.Router.tokenInfo(l.coinType[0]).decimals,k=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,O=l.a2b[0]?G.sqrtPriceX64ToPrice(new b(a.currentSqrtPrice[0]),y,k):G.sqrtPriceX64ToPrice(new b(a.currentSqrtPrice[0]),k,y),P={direction:l.a2b[0],label:"Cetus",poolAddress:l.poolAddress[0],fromCoin:l.coinType[0],toCoin:l.coinType[1],feeRate:this.sdk.Router.getFeeRate(l.coinType[0],l.coinType[1],l.poolAddress[0]),outputAmount:a.byAmountIn?l.rawAmountLimit[0].toString():l.rawAmountLimit[1].toString(),inputAmount:l.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:O,fromDecimal:y,toDecimal:k},M=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,j=this.sdk.Router.tokenInfo(l.coinType[2]).decimals,B=l.a2b[1]?G.sqrtPriceX64ToPrice(new b(a.currentSqrtPrice[1]),M,j):G.sqrtPriceX64ToPrice(new b(a.currentSqrtPrice[1]),j,M),q={direction:l.a2b[1],label:"Cetus",poolAddress:l.poolAddress[1],fromCoin:l.coinType[1],toCoin:l.coinType[2],feeRate:this.sdk.Router.getFeeRate(l.coinType[1],l.coinType[2],l.poolAddress[1]),outputAmount:l.amountOut.toString(),inputAmount:a.byAmountIn?l.rawAmountLimit[0].toString():l.rawAmountLimit[1].toString(),currentSqrtPrice:a.currentSqrtPrice[1],currentPrice:B,fromDecimal:M,toDecimal:j};h.push(P,q)}else{const y=this.sdk.Router.tokenInfo(l.coinType[0]).decimals,k=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,O=l.a2b[0]?G.sqrtPriceX64ToPrice(new b(a.currentSqrtPrice[0]),y,k):G.sqrtPriceX64ToPrice(new b(a.currentSqrtPrice[0]),k,y),P={direction:l.a2b[0],label:"Cetus",poolAddress:l.poolAddress[0],fromCoin:l.coinType[0],toCoin:l.coinType[1],feeRate:this.sdk.Router.getFeeRate(l.coinType[0],l.coinType[1],l.poolAddress[0]),outputAmount:l.amountOut.toString(),inputAmount:l.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:O,fromDecimal:y,toDecimal:k};h.push(P)}const _={percent:Number(l.amountIn)/Number(a.amountIn)*100,inputAmount:Number(l.amountIn.toString()),outputAmount:Number(l.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:h};c.push(_)}return{isExceed:a.isExceed,isTimeout:!0,inputAmount:Number(a.amountIn.toString()),outputAmount:Number(a.amountOut.toString()),fromCoin:a.coinTypeA,toCoin:a.coinTypeC!=null?a.coinTypeC:a.coinTypeB,byAmountIn:a.byAmountIn,splitPaths:c}}},t_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}setTokenListCache(e){const{coin_list_handle:t}=T(this.sdk.sdkOptions.cetus_config),i=`${t}_getCoinConfigs`,n=this.getCache(i),r=n?[...n,...e]:e;this.updateCache(i,r,z)}async getTokenListByCoinTypes(e){const t={},{coin_list_handle:i}=T(this.sdk.sdkOptions.cetus_config),n=`${i}_getCoinConfigs`,r=this.getCache(n);if(r!==void 0){const s=r;for(const a of e)for(const c of s)if(Ae(a)===Ae(c.address)){t[a]=c;continue}}const o=e.filter(s=>t[s]===void 0);for(const s of o){const a=`${s}_metadata`,c=this.getCache(a);if(c!==void 0)t[s]=c;else{const d=await this._sdk.fullClient.getCoinMetadata({coinType:s});if(d){const l={id:d.id,pyth_id:"",name:d.name,symbol:d.symbol,official_symbol:d.symbol,coingecko_id:"",decimals:d.decimals,project_url:"",logo_url:d.iconUrl,address:s};t[s]=l,this.updateCache(a,l,z)}else console.log(`not found ${s}`)}}return t}async getCoinConfigs(e=!1,t=!0){const{coin_list_handle:i}=T(this.sdk.sdkOptions.cetus_config),n=`${i}_getCoinConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildCoinConfig(d,t);this.updateCache(`${i}_${l.address}_getCoinConfig`,l,z),c.push({...l})}),this.updateCache(n,c,z),c}async getCoinConfig(e,t=!1,i=!0){var c,d;const{coin_list_handle:n}=T(this.sdk.sdkOptions.cetus_config),r=`${n}_${e}_getCoinConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x1::type_name::TypeName",value:{name:M0(e)}}});if(s.error!=null||((d=(c=s.data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new F(`when getCoinConfig get object error: ${s.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(s,i);return this.updateCache(r,a,z),a}buildCoinConfig(e,t=!0){let i=ee(e);i=i.value.fields;const n={...i};return n.id=Zt(e),n.address=N(i.coin_type.fields.name).full_address,i.pyth_id&&(n.pyth_id=be(i.pyth_id)),this.transformExtensions(n,i.extension_fields.fields.contents,t),delete n.coin_type,n}async getClmmPoolConfigs(e=!1,t=!0){const{clmm_pools_handle:i}=T(this.sdk.sdkOptions.cetus_config),n=`${i}_getClmmPoolConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getClmmPoolsConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildClmmPoolConfig(d,t);this.updateCache(`${l.pool_address}_getClmmPoolConfig`,l,z),c.push({...l})}),this.updateCache(n,c,z),c}async getClmmPoolConfig(e,t=!1,i=!0){const{clmm_pools_handle:n}=T(this.sdk.sdkOptions.cetus_config),r=`${e}_getClmmPoolConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}}),a=this.buildClmmPoolConfig(s,i);return this.updateCache(r,a,z),a}buildClmmPoolConfig(e,t=!0){let i=ee(e);i=i.value.fields;const n={...i};return n.id=Zt(e),n.pool_address=be(i.pool_address),this.transformExtensions(n,i.extension_fields.fields.contents,t),n}async getLaunchpadPoolConfigs(e=!1,t=!0){const{launchpad_pools_handle:i}=T(this.sdk.sdkOptions.cetus_config),n=`${i}_getLaunchpadPoolConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildLaunchpadPoolConfig(d,t);this.updateCache(`${l.pool_address}_getLaunchpadPoolConfig`,l,z),c.push({...l})}),this.updateCache(n,c,z),c}async getLaunchpadPoolConfig(e,t=!1,i=!0){const{launchpad_pools_handle:n}=T(this.sdk.sdkOptions.cetus_config),r=`${e}_getLaunchpadPoolConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}}),a=this.buildLaunchpadPoolConfig(s,i);return this.updateCache(r,a,z),a}buildLaunchpadPoolConfig(e,t=!0){let i=ee(e);i=i.value.fields;const n={...i};n.id=Zt(e),n.pool_address=be(i.pool_address),this.transformExtensions(n,i.extension_fields.fields.contents,t);const r=[];i.social_media.fields.contents.forEach(o=>{r.push({name:o.fields.value.fields.name,link:o.fields.value.fields.link})}),n.social_media=r;try{n.regulation=decodeURIComponent(or.decode(n.regulation).replace(/%/g,"%25"))}catch{n.regulation=or.decode(n.regulation)}return n}transformExtensions(e,t,i=!0){const n=[];for(const r of t){const{key:o}=r.fields;let{value:s}=r.fields;if(o==="labels")try{const a=decodeURIComponent(or.decode(s));try{s=JSON.parse(a)}catch{s=a}}catch{}i&&(e[o]=s),n.push({key:o,value:s})}delete e.extension_fields,i||(e.extensions=n)}async getCetusConfig(e=!1){const t=this._sdk.sdkOptions.cetus_config.package_id,i=`${t}_getCetusConfig`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=Gn(r),s=await this._sdk.fullClient.queryEventsByPage({Transaction:o});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(s.data.length>0)for(const c of s.data)switch(N(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(i,a,z),a}async getCetusConfigHandle(e){const t=[e.clmm_pools_id,e.coin_list_id,e.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:t,options:{showContent:!0}})).forEach(n=>{var s,a;if(n.error!=null||((a=(s=n.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`when getCetusConfigHandle get objects error: ${n.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const r=ee(n),o=dn(n);switch(N(o).name){case"ClmmPools":e.clmm_pools_handle=r.pools.fields.id.id;break;case"CoinList":e.coin_list_handle=r.coins.fields.id.id;break;case"LaunchpadPools":e.launchpad_pools_handle=r.pools.fields.id.id;break}}),e}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){try{const i=this._cache[e];if(!i)return;if(t||!i.isValid()){delete this._cache[e];return}return i.value}catch(i){console.error(`Error accessing cache for key ${e}:`,i);return}}},i_=class extends o0{async queryEventsByPage(e,t="all"){let i=[],n=!0;const r=t==="all";let o=r?null:t.cursor;do{const s=await this.queryEvents({query:e,cursor:o,limit:r?null:t.limit});s.data?(i=[...i,...s.data],n=s.hasNextPage,o=s.nextCursor):n=!1}while(r&&n);return{data:i,nextCursor:o,hasNextPage:n}}async getOwnedObjectsByPage(e,t,i="all"){let n=[],r=!0;const o=i==="all";let s=o?null:i.cursor;do{const a=await this.getOwnedObjects({owner:e,...t,cursor:s,limit:o?null:i.limit});a.data?(n=[...n,...a.data],r=a.hasNextPage,s=a.nextCursor):r=!1}while(o&&r);return{data:n,nextCursor:s,hasNextPage:r}}async getDynamicFieldsByPage(e,t="all"){let i=[],n=!0;const r=t==="all";let o=r?null:t.cursor;do{const s=await this.getDynamicFields({parentId:e,cursor:o,limit:r?null:t.limit});s.data?(i=[...i,...s.data],n=s.hasNextPage,o=s.nextCursor):n=!1}while(r&&n);return{data:i,nextCursor:o,hasNextPage:n}}async batchGetObjects(e,t,i=50){let n=[];try{for(let r=0;r<Math.ceil(e.length/i);r++){const o=await this.multiGetObjects({ids:e.slice(r*i,i*(r+1)),options:t});n=[...n,...o]}}catch(r){console.log(r)}return n}async calculationTxGas(e){const{sender:t}=e.blockData;if(t===void 0)throw Error("sdk sender is empty");const i=await this.devInspectTransactionBlock({transactionBlock:e,sender:t}),{gasUsed:n}=i.effects;return Number(n.computationCost)+Number(n.storageCost)-Number(n.storageRebate)}async sendTransaction(e,t){try{return await this.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(i){console.log("error: ",i)}}async sendSimulationTransaction(e,t,i=!0){try{if(i)return await this.devInspectTransactionBlock({transactionBlock:e,sender:t})}catch(n){console.log("devInspectTransactionBlock error",n)}}},n_=class{constructor(e){L(this,"_cache",{});L(this,"_rpcModule");L(this,"_pool");L(this,"_position");L(this,"_swap");L(this,"_rewarder");L(this,"_router");L(this,"_router_v2");L(this,"_token");L(this,"_config");L(this,"_sdkOptions");L(this,"_senderAddress","");this._sdkOptions=e,this._rpcModule=new i_({url:e.fullRpcUrl}),this._swap=new Q0(this),this._pool=new H0(this),this._position=new X0(this),this._rewarder=new J0(this),this._router=new Z0(this),this._router_v2=new e_(this),this._token=new Y0(this),this._config=new t_(this),Is(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(e,t,i=!0){const n=[];let r=null;const o=`${this.sdkOptions.fullRpcUrl}_${e}_${t}_getOwnerCoinAssets`,s=this.getCache(o,i);if(s)return s;for(;;){const a=await(t?this.fullClient.getCoins({owner:e,coinType:t,cursor:r}):this.fullClient.getAllCoins({owner:e,cursor:r}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&n.push({coinAddress:N(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),r=a.nextCursor,!a.hasNextPage)break}return this.updateCache(o,n,30*1e3),n}async getOwnerCoinBalances(e,t){let i=[];return t?i=[await this.fullClient.getBalance({owner:e,coinType:t})]:i=[...await this.fullClient.getAllBalances({owner:e})],i}updateCache(e,t,i=z){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},km=n_,Io="router",en=1e4,Ci=class{static buildPoolImmutables(e){let{fields:t}=e.value.fields.value;return{clmm_pool_id:N(t.clmm_pool_id).address,booster_type:N(t.booster_type.fields.name).source_address,pool_id:N(t.pool_id).address,coinTypeA:N(t.coin_type_a.fields.name).source_address,coinTypeB:N(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){let t=ee(e),i=[];return t.config.fields.contents.forEach(n=>{i.push({lock_day:Number(n.fields.key),multiplier:Number(g(n.fields.value).div(en))})}),{basic_percent:Number(g(t.basic_percent).div(en)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:i,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:Zt(e)}}static buildLockNFT(e){let t=N(Zt(e)).address;return{lock_clmm_position:sn(e),locked_nft_id:t}}static buildLockPositionInfo(e){let t=ee(e),{value:i}=t.value.fields;return{type:i.type,position_id:i.fields.position_id,start_time:Number(i.fields.start_time),lock_period:Number(i.fields.lock_period),end_time:Number(i.fields.end_time),growth_rewarder:i.fields.growth_rewarder,rewarder_owned:i.fields.rewarder_owned,is_settled:i.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},r_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;let{booster:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i,e),r=[];if(n!==void 0)r.push(...n);else{let s=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(T(t).booster_pool_handle)).data)==null||o.forEach(c=>{s.push(c.objectId)});let a=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showContent:!0});for(let c of a){let d=ee(c);if(d){let l=Ci.buildPoolImmutables(d);this.updateCache(`${l.pool_id}_getPoolImmutable`,l,z),r.push(l)}}}return this.updateCache(i,r,z),r}async getPoolImmutable(e){let{booster:t}=this._sdk.sdkOptions,i=`${e}_getPoolImmutable`,n=this.getCache(i);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:T(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=ee(r),s=Ci.buildPoolImmutables(o);return this.updateCache(i,s,z),s}async getPools(){let e=[],t=(await this.getPoolImmutables()).map(n=>n.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(t,{showType:!0,showContent:!0});for(let n of i){let r=Ci.buildPoolState(n);if(r){let o={...await this.getPoolImmutable(r.pool_id),...r};e.push(o);let s=`${o.pool_id}_getPoolObject`;this.updateCache(s,o,z)}}return e}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t),r=await this.getPoolImmutable(e);if(n!==void 0)return{...r,...n};let o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=Ci.buildPoolState(o),a={...r,...s};return this.updateCache(i,a,z),a}async getPoolHandleId(e){let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=ee(t);return i?i.list.fields.id.id:""}async getBoosterInitConfigs(){var n;let{package_id:e}=this.sdk.sdkOptions.booster,t=(n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:n.data,i={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(r=>{let o=r.parsedJson;o&&(i.booster_config_id=o.config_id)}),i.booster_pool_handle=await this.getPoolHandleId(i.booster_config_id),i}async getOwnerBoosterPositions(e,t,i){let{booster:n}=this.sdk.sdkOptions,r=[],o=[],s=`${n.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:s}});for(let d of a.data)if(N(Yt(d)).source_address===s&&d.data){let l=Ci.buildLockNFT(d);this.updateCache(`${l.locked_nft_id}_getBoosterPositionById`,l,z),l&&(t===void 0||t===l.lock_clmm_position.pool)&&r.push(l)}let c=await this.getLockPositionInfos(i,r.map(d=>d.locked_nft_id));for(let d of r)for(let l of c)if(d.lock_clmm_position.pos_object_id===l.position_id){o.push({...d,...l});break}return o}async getBoosterPosition(e,t){let i=`${t}_getBoosterPositionById`,n=this.getCache(i),r;if(n!==void 0)r=n;else{let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});r=Ci.buildLockNFT(s),this.updateCache(i,r,z)}let o=await this.getLockPositionInfo(e,t);return{...r,...o}}async getLockPositionInfos(e,t=[]){var o;let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),n=[],r=[];return(o=i.data)==null||o.forEach(s=>{t.length>0?t.includes(s.name.value)&&n.push(s.objectId):n.push(s.objectId)}),n.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showContent:!0})).forEach(s=>{let a=Ci.buildLockPositionInfo(s);a&&r.push(a)}),r}async getLockPositionInfo(e,t){let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return Ci.buildLockPositionInfo(i)}calculateXCetusRewarder(e,t,i){let n=t.basic_percent,r="0";e.forEach(s=>{s.coin_address===t.booster_type&&(r=s.amount_owed.toString())}),i.is_settled||t.config.forEach(s=>{s.lock_day===i.lock_period&&(n=s.multiplier)});let o=g(r).sub(i.growth_rewarder).mul(n);return g(i.rewarder_owned).add(o).toString()}lockPositionPayload(e){let{booster:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${Io}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[n.object(T(t).booster_config_id),n.object(T(i).global_config_id),n.object(e.booster_pool_id),n.object(e.clmm_pool_id),n.object(e.clmm_position_id),n.pure.u16(e.lock_day),n.object($)]}),n}canceLockPositionPayload(e){let{booster:t}=this.sdk.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${Io}::cancel_lock`,typeArguments:[e.booster_type],arguments:[i.object(T(t).booster_config_id),i.object(e.booster_pool_id),i.object(e.lock_nft_id),i.object($)]}),i}redeemPayload(e){let{booster:t,xcetus:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,r=new R,o=T(i);return r.moveCall({target:`${t.published_at}::${Io}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[r.object(T(t).booster_config_id),r.object(T(n).global_config_id),r.object(e.booster_pool_id),r.object(e.lock_nft_id),r.object(e.clmm_pool_id),r.object(o.lock_manager_id),r.object(o.xcetus_manager_id),r.object(e.ve_nft_id),r.object($)]}),r}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},jt="router",qd=1e9,o_=(e=>(e.Upcoming="Upcoming",e.Live="Live",e.Settle="Settle",e.Ended="Ended",e.Failed="Failed",e.Canceled="Canceled",e))(o_||{}),oi=class{static priceRealToFix(e,t,i){let n=g(t-i).toNumber();return Number(g(e).div(g(10).pow(g(n))).toString())}static priceFixToReal(e,t,i){let n=g(t-i).toNumber();return Number(g(e).mul(g(10).pow(g(n))).toString())}static raiseTotalAmount(e,t,i){let n=g(t-i).abs().toNumber();return t>i?Number(g(e.total_supply).mul(e.current_price).div(g(10).pow(g(n))).toString()):Number(g(e.total_supply).mul(e.current_price).mul(g(10).pow(g(n))).toString())}static buildLaunchPadPool(e){let t=Yt(e),i=N(t),n=ee(e),r={coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],pool_address:be(Zt(e)),is_settle:n.is_settle,current_price:g(n.initialize_price).div(g(qd)).toString(),price:n.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:n.sale_coin,raise_coin_amount:n.raise_coin,total_purchase_amount:n.reality_raise_total,total_supply:n.sale_total,min_purchase:n.min_purchase,max_purchase:n.max_purchase,complete_raise_limit:n.least_raise_amount,softcap:n.softcap,max_raise_amount:n.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(n.liquidity_rate)/1e4,is_cancel:n.is_cancel,duration_summary:{start_time:Number(n.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(n.duration_manager.fields.activity_duration),settle_duration:Number(n.duration_manager.fields.settle_duration),lock_up_duration:Number(n.duration_manager.fields.locked_duration)},white_summary:{white_handle:n.white_list.fields.users.fields.id.id,protection_hard_cap:n.white_list.fields.hard_cap_total,protection_limit_used:n.white_list.fields.purchase_total,size:Number(n.white_list.fields.users.fields.size)},unused_sale:n.unused_sale,harvest_raise:n.harvest_raise,tick_spacing:Number(n.tick_spacing),owner:n.recipient,purchase_summary:{purchase_handle:n.purchase_list.fields.id.id,size:Number(n.purchase_list.fields.size)},pool_status:"Failed"};return oi.updatePoolStatus(r),r}static updatePoolStatus(e){let t=Number(g(Date.now()/1e3).toFixed(0)),{duration_summary:i}=e,n=i.start_time+i.purchase_duration,r=n+i.settle_duration;if(i.end_time=n,i.settle_end_time=r,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<i.start_time)e.pool_status="Upcoming";else if(t>i.start_time&&t<n)e.pool_status="Live";else if(t>n&&t<r){let o=e.raise_coin_amount;Number(o)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,t){let i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),n=i[t.coin_type_sale].decimals,r=i[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(g(t.softcap).div(g(t.total_supply))),n,r).toString(),t.max_price=this.priceFixToReal(Number(g(t.max_raise_amount).div(g(t.total_supply))),n,r).toString(),t.current_price=this.priceFixToReal(Number(t.current_price),n,r).toString(),t.sale_decimals=n,t.raise_decimals=r}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(g(t.harvest_raise).equals(g(0))){let n=await e.Launchpad.getSettleEvent(t.pool_address);n&&(t.harvest_raise=n.unused_raise)}let i=b.min(new b(t.total_purchase_amount),new b(t.max_raise_amount));return g(i.toString()).mul(1-t.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){let i=await e.Launchpad.getSettleEvent(t.pool_address);return i&&(t.unused_sale=i.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){let i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(i.length>0){let n=i[0].purchased_raise_amount,r=(await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:o}=t.white_summary;return g(n).sub(r).div(g(t.total_purchase_amount).sub(o)).mul(g(t.total_purchase_amount).sub(t.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,t){let i=await oi.getOverrecruitReverseAmount(e,t),n=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(n){let r=n[0].purchased_raise_amount;g(r).sub(i).div(t.current_price)}return"0"}},s_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,i=100,n=!1){var l;let{package_id:r}=this._sdk.sdkOptions.launchpad;if(r===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");let o=`${r}_getPoolImmutables`,s=this.getCache(o,n),a=[],c=[];if(s!==void 0&&a.push(...s),a.length===0)try{((l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`}))==null?void 0:l.data).forEach(h=>{let _=h.parsedJson;_&&a.push({pool_address:_.pool_id,coin_type_sale:N(_.sale_coin.name).full_address,coin_type_raise:N(_.raise_coin.name).full_address})}),this.updateCache(o,a,z)}catch(h){console.log("getPoolImmutables",h)}let d=e.length>0;for(let h=0;h<a.length;h+=1){let _=a[h];if(!(d&&!e.includes(_.pool_address))){if(!d){let y=h;if(y<t||y>=t+i)continue}c.push(_)}}return c}async getPoolImmutablesWithPage(e="all",t=!1){let{package_id:i}=this._sdk.sdkOptions.launchpad,n=`${i}_getPoolImmutables`,r=[],o={data:[],hasNextPage:!1},s=e==="all";if(s){let a=this.getCache(n,t);a&&r.push(...a)}if(r.length===0)try{let a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::factory::CreatePoolEvent`},e);o.hasNextPage=a.hasNextPage,o.nextCursor=a.nextCursor,a.data.forEach(c=>{let d=c.parsedJson;d&&r.push({pool_address:d.pool_id,coin_type_sale:N(d.sale_coin.name).full_address,coin_type_raise:N(d.raise_coin.name).full_address})})}catch(a){console.log("getPoolImmutables",a)}return o.data=r,s&&this.updateCache(n,r,z),o}async getPools(e=[],t=0,i=100){let n=[],r=[];e.length>0?r=[...e]:(await this.getPoolImmutables([],t,i,!1)).forEach(s=>{r.push(s.pool_address)});let o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0});for(let s of o){let a=oi.buildLaunchPadPool(s);await oi.calculatePoolPrice(this._sdk,a),n.push(a);let c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,z)}return n}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0){let s=n;return oi.updatePoolStatus(s),s}let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=oi.buildLaunchPadPool(r);return await oi.calculatePoolPrice(this._sdk,o),this.updateCache(i,o),o}async getInitConfig(e=!1){var c;let t=this._sdk.sdkOptions.launchpad.package_id,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=Gn(r),s=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return s.length>0&&(s.forEach(d=>{let l=d.parsedJson;if(l)switch(N(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=l.admin_cap_id,a.config_cap_id=l.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break}}),this.updateCache(i,a,z)),a}async getLockNFT(e,t=!1){let i=`${e}_getLockNFT`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!r.error)return sn(r)}async getLockNFTList(e){var r;let{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:i}=this._sdk,n=[];try{let o=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:r.data;for(let s of o){let a=s.parsedJson;if(a){let c={locked_time:Number(a.locked_time),end_lock_time:Number(a.end_lock_time),nft_type:a.nft_type_name.name,lock_nft_id:a.lock_nft_id,recipient:a.recipient};if(e===c.recipient&&`${t}`===N(c.nft_type).address){let d=await this.getLockNFT(c.lock_nft_id);if(d){let l=N(d.coin_type_a).full_address,h=N(d.coin_type_b).full_address;n.push({...d,coin_type_a:l,coin_type_b:h,...c})}}}}return n}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPoolTransactionPayload(e){let{launchpad:t}=this.sdk.sdkOptions,i=T(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let n=oi.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),r=new R,o=g(e.total_supply).add(g(e.total_supply).mul(g(e.liquidity_rate))).toNumber(),s=await W.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,r,BigInt(o),e.coin_type_sale),a=[r.object(i.admin_cap_id),r.object(i.config_cap_id),r.object(i.pools_id),r.object(de(e.recipient)),r.pure.u128((n*qd).toString()),s,r.pure.u64(e.total_supply.toString()),r.pure.u64(e.min_purchase.toString()),r.pure.u64(e.max_purchase.toString()),r.pure.u64(e.least_raise_amount.toString()),r.pure.u64(e.hardcap.toString()),r.pure.u64((e.liquidity_rate*1e3).toString()),r.pure.u64(e.start_time.toString()),r.pure.u64(e.activity_duration.toString()),r.pure.u64(e.settle_duration.toString()),r.pure.u64(e.locked_duration.toString()),r.pure.u32(e.tick_spacing),r.object($)],c=[e.coin_type_sale,e.coin_type_raise];return r.moveCall({target:`${t.published_at}::${jt}::create_launch_pool`,typeArguments:c,arguments:a}),r}async creatPurchasePayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=new R,n=await W.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.purchase_amount),e.coin_type_raise),r=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],o=[e.coin_type_sale,e.coin_type_raise],s;return r?s=[i.object(e.pool_address),i.object(T(t).config_cap_id),i.object(r.id),n,i.pure.u64(e.purchase_amount.toString()),i.object($)]:s=[i.object(e.pool_address),i.object(T(t).config_cap_id),n,i.pure.u64(e.purchase_amount.toString()),i.object($)],i.moveCall({target:`${t.published_at}::${jt}::${r===void 0?"create_and_purchase":"purchase"}`,typeArguments:o,arguments:s}),i}async creatClaimPayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],n=new R,r=[e.coin_type_sale,e.coin_type_raise],o=[n.object(e.pool_address),n.object(T(t).config_cap_id),n.object(i==null?void 0:i.id),n.object($)];return n.moveCall({target:`${t.published_at}::${jt}::claim`,typeArguments:r,arguments:o}),n}async creatSettlePayload(e){let{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();let n=T(i),{clmm_args:r}=e,o=new R;o.setSender(this.sdk.ClmmSDK.senderAddress);let s=[e.coin_type_sale,e.coin_type_raise];if(r){let a=r.opposite?G.priceToSqrtPriceX64(g(1).div(r.current_price),r.raise_decimals,r.sale_decimals).toString():G.priceToSqrtPriceX64(g(r.current_price),r.sale_decimals,r.raise_decimals).toString(),c=BigInt(a)<BigInt(r.clmm_sqrt_price),d=r.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,d),h=he.calculateTotalBalance(l);he.isSuiCoin(d)&&(h-=BigInt(2e8));let _=W.buildCoinForAmount(o,l,h,d).targetCoin,y=r.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",k=[o.object(e.pool_address),o.object(T(t).config_cap_id),o.object(r.clmm_pool_address),o.object(n.global_config_id),o.pure.u128(a),_,o.object($)];o.moveCall({target:`${t.published_at}::${jt}::${y}`,typeArguments:s,arguments:k})}else o.moveCall({target:`${t.published_at}::${jt}::settle`,typeArguments:s,arguments:[o.object(e.pool_address),o.object(T(t).config_cap_id),o.object($)]});return o}creatWithdrawPayload(e){let{launchpad:t}=this.sdk.sdkOptions,i=new R,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(e.pool_address),i.object(T(t).config_cap_id),i.object($)];return e.sale_amount>BigInt(0)&&i.moveCall({target:`${t.published_at}::${jt}::withdraw_sale`,typeArguments:n,arguments:r}),e.raise_amount>BigInt(0)&&i.moveCall({target:`${t.published_at}::${jt}::withdraw_raise`,typeArguments:n,arguments:r}),i}addUserToWhitelisPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new R,n=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(r=>{let o=[i.object(T(t).admin_cap_id),i.object(T(t).config_cap_id),i.object(e.pool_address),i.object(r),i.pure.u64(e.safe_limit_amount),i.object($)];i.moveCall({target:`${t.published_at}::${jt}::add_user_to_whitelist`,typeArguments:n,arguments:o})}),i}updateWhitelistCapPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new R,n=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&i.moveCall({target:`${t.published_at}::${jt}::update_whitelist_member_safe_limit_amount`,typeArguments:n,arguments:[i.object(T(t).admin_cap_id),i.object(T(t).config_cap_id),i.object(e.pool_address),i.pure.address(e.white_list_member),i.pure.u64(e.safe_limit_amount),i.object($)]}),e.hard_cap_total>0&&i.moveCall({target:`${t.published_at}::${jt}::update_whitelist_hard_cap_total`,typeArguments:n,arguments:[i.object(T(t).admin_cap_id),i.object(T(t).config_cap_id),i.object(e.pool_address),i.pure.u64(e.hard_cap_total),i.object($)]}),i}creatRemoveWhitelistPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new R,n=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(r=>{let o=[i.object(T(t).admin_cap_id),i.object(T(t).config_cap_id),i.object(e.pool_address),i.object(r),i.object($)];i.moveCall({target:`${t.published_at}::${jt}::remove_user_from_whitelist`,typeArguments:n,arguments:o})}),i}creatCancelPoolPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new R,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(T(t).admin_cap_id),i.object(T(t).config_cap_id),i.object(e.pool_address),i.object($)];return i.moveCall({target:`${t.published_at}::${jt}::cancel`,typeArguments:n,arguments:r}),i}updateRecipientPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new R,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(T(t).admin_cap_id),i.object(T(t).config_cap_id),i.object(e.pool_address),i.object(e.new_recipient),i.object($)];return i.moveCall({target:`${t.published_at}::${jt}::update_recipient_address`,typeArguments:n,arguments:r}),i}updatePoolDuractionPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new R,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(T(t).admin_cap_id),i.object(T(t).config_cap_id),i.object(e.pool_address),i.pure.u64(e.activity_duration),i.pure.u64(e.settle_duration),i.pure.u64(e.lock_duration),i.object($)];return i.moveCall({target:`${t.published_at}::${jt}::update_pool_duration`,typeArguments:n,arguments:r}),i}creatUnlockNftPayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(T(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");let i=new R,n=[e.nft_type],r=[i.object(e.lock_nft),i.object($)];return i.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:n,arguments:r}),i}async isAdminCap(e){let{launchpad:t}=this._sdk.sdkOptions;if(T(t)===void 0)throw Error("launchpad config is empty");let i=`${e}_isAdminCap`,n=this.getCache(i);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:T(t).admin_cap_id,options:{showType:!0,showOwner:!0}}),o=dn(r),s=Ar(r),a=!1;return s&&o&&N(o).source_address===`${t.package_id}::config::AdminCap`&&(a=de(s.AddressOwner)===de(e)),this.updateCache(i,a,z),a}async isWhiteListUser(e,t){let i={type:"address",value:t};try{let n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i});return!!(n&&n.data)}catch{return!1}}async getPurchaseAmount(e,t){var n;let i={type:"address",value:t};try{let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),o=ee(r);if(o)return(n=o==null?void 0:o.value)==null?void 0:n.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],i=!0){let{launchpad:n}=this._sdk.sdkOptions,r=`${t}_getPurchaseMark`,o=this.getCache(r,i);if(!i&&o!==void 0)return o;let s=null,a=[];for(;;){let c=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:s});for(let d of c.data){let{fields:l}=d.data.content;if(N(Yt(d)).source_address===`${n.package_id}::pool::PurchaseMark`){console.log("fields: ",l);let h={id:l.id.id,pool_id:N(l.pool_id).address,purchased_raise_amount:l.purchase_total,obtain_sale_amount:l.obtain_sale_amount,used_raise_amount:l.used_raise_amount};t.length>0?t.includes(h.pool_id)&&a.push(h):a.push(h)}}if(c.hasNextPage)s=c.nextCursor;else break}return this.updateCache(r,a,z),a}async getSettleEvent(e){let{launchpad:t}=this._sdk.sdkOptions,i=`${e}_getPurchaseMark`,n=this.getCache(i);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(let o of r.data){let s=o.parsedJson;if(e===be(s.pool_id)){let a={pool_id:s.pool_id,settle_price:s.settle_price,unused_sale:s.unused_sale,unused_raise:s.unused_raise,white_purchase_total:s.white_purchase_total};return this.updateCache(i,a,z),a}}}buildLaunchpadCoinType(e,t){return Cr(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,t])}assertLuanchpadConfig(){let{launchpad:e}=this.sdk.sdkOptions;if(T(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},xi=class{static buildPoolImmutables(e){let{fields:t}=e.value.fields.value;return{clmm_pool_id:N(t.clmm_pool_id).address,bonus_type:N(t.bonus_type.fields.name).source_address,pool_id:N(t.pool_id).address,coinTypeA:N(t.coin_type_a.fields.name).source_address,coinTypeB:N(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){let t=ee(e),i=[];return t.config.fields.contents.forEach(n=>{i.push({rate:Number(g(n.fields.key).div(en)),multiplier:Number(g(n.fields.value).div(en))})}),{balance:t.balance,config:i,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(g(t.minimum_percent_to_reward).div(en)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){let{contents:t}=e.value.fields.value.fields,i=[],n=e.id.id;return t.forEach(r=>{let{key:o,value:s}=r.fields,a={id:o,period_id:n,bonus_num:s.fields.bonus_num,point:s.fields.point,is_burn:s.fields.is_burn,point_after_multiplier:s.fields.point_after_multiplier,percent:Number(g(s.fields.percent).div(en)),fee_share_rate:0,is_redeemed:s.fields.is_redeemed};i.push(a)}),i}static buildPoolBonusInfo(e){let{fields:t,type:i}=e.value.fields.value;return{type:i,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let i=0;for(let n of e)t>=n.rate&&n.rate>i&&(i=n.multiplier);return i}},Ua="router",a_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;let{maker_bonus:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i,e),r=[];if(n!==void 0)r.push(...n);else{let s=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(T(t).maker_pool_handle)).data)==null||o.forEach(c=>{s.push(c.objectId)});let a=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showContent:!0});for(let c of a){let d=ee(c);d&&r.push(xi.buildPoolImmutables(d))}}return r}async getPoolImmutable(e){let{maker_bonus:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i);if(n!==void 0){let s=n.filter(a=>e===a.pool_id);if(s.length>0)return s[0]}let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:T(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=ee(r);return xi.buildPoolImmutables(o)}async getPools(){let e=[],t=await this.getPoolImmutables(),i=t.map(o=>o.pool_id),n=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0}),r=0;for(let o of n){let s=xi.buildPoolState(o);if(s){let a={...t[r],...s};e.push(a);let c=`${a.pool_id}_getPoolObject`;this.updateCache(c,a,z)}r+=1}return e}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t),r=await this.getPoolImmutable(e);if(n!==void 0)return n;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=xi.buildPoolState(o),a={...r,...s};return this.updateCache(i,a,z),a}async getPoolHandleId(e){let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=ee(t);return i?i.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){let i=[],n=`${e.pool_id}_getMakerPoolPeriods`,r=this.getCache(n,t);return r!==void 0?r:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(o=>{let s={id:o.objectId,start_time:0,end_time:0,period:Number(o.name.value)};s.start_time=Number(g(e.start_time).add(g(e.interval_day).mul(24*3600).mul(s.period)).toFixed(0,K.ROUND_DOWN)),s.end_time=Number(g(s.start_time).add(g(e.interval_day).mul(24*3600)).toFixed(0,K.ROUND_DOWN)),i.push(s)}),this.updateCache(n,i,z),i)}async getMakerBonusInitConfigs(){var n;let{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:n.data,i={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(r=>{let o=r.parsedJson;o&&(i.maker_config_id=o.config_id)}),i.maker_pool_handle=await this.getPoolHandleId(i.maker_config_id),i}async getPoolMarkerPositionList(e,t,i=!1){let n={},r=[];i||t.forEach(o=>{let s=`${e}_${o.period}_getPoolMarkerPositionList`,a=this.getCache(s);a!==void 0?n[o.period]=a:(n[o.period]=[],r.push(o))});try{r.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(r.map(s=>s.id),{showContent:!0})).forEach(s=>{let a=ee(s),c=xi.buildMarkerPositions(a);if(c.length>0){let{period_id:d}=c[0],l=t.filter(h=>h.id===d)[0];n[l.period]=c}});let o=[];for(let s in n)n[s].forEach(a=>{o.push(a)});if(o.length>0){let s=await this._sdk.ClmmSDK.Position.getSipmlePositionList(o.map(a=>a.id));for(let a of o)for(let c of s)if(a.id===c.pos_object_id){a.clmm_position=c;break}}}catch(o){console.log(o)}for(let o in n){let s=`${e}_${o}_getPoolMarkerPositionList`;this.updateCache(s,n[o],z)}return n}async updateXCetusRewarderAndFee(e,t,i){let n=await this.calculateTotalPointsAfterMultiper(e,i);for(let r of t)await this.calculateXCetusRewarder(e,r,i.period,n);return t}async calculateXCetusRewarder(e,t,i,n){let r=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,i),{fee_share_rate:o}=this.calculateFeeShareRate(e,t,n),s=g(o).mul(r.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=s.toString(),t.bonus_num}calculateFeeShareRate(e,t,i){let n=xi.getBonusPercent(e.config,t.percent),r=g(t.point).mul(n),o=g(r).div(i);return t.point_after_multiplier=r.toString(),t.fee_share_rate=Number(o),{fee_share_rate:Number(o),points_after_multiper:r.toString()}}async calculateTotalPointsAfterMultiper(e,t){let i=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]),n=g(0),r=i[t.period];for(let o of r){let s=xi.getBonusPercent(e.config,o.percent),a=g(o.point).mul(s);n=n.add(a)}return n.toString()}async calculateAllXCetusRewarder(e){let t=this._sdk.ClmmSDK.senderAddress,i=g(0),n=[];for(let r of e){let o=await this._sdk.MakerModule.getMakerPoolPeriods(r),s=await this._sdk.MakerModule.getPoolMarkerPositionList(r.whale_nfts.whale_nfts_handle,o),a=[];for(let c of o){let d=s[c.period].filter(l=>{var h;return t.length===0?!1:((h=l.clmm_position)==null?void 0:h.owner)===t});d.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(r,d,c),d.forEach(l=>{var h;((h=l.clmm_position)==null?void 0:h.position_status)===Pd.Exists&&g(l.bonus_num).greaterThan(0)&&(i=i.add(l.bonus_num),a.includes(l.clmm_position.pos_object_id)||a.push(l.clmm_position.pos_object_id))}))}n.push({bonus_type:r.bonus_type,pool_id:r.pool_id,nft_ids:a})}return{claimtotal:i,claimRecord:n}}async getPoolBonusInfo(e,t,i=!1){let n=`${e}_${t}_getPoolBonusInfo`,r=this.getCache(n,i);if(r!==void 0)return r;let o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),s=ee(o),a=xi.buildPoolBonusInfo(s);return this.updateCache(n,a,$t),a}claimPayload(e){let{maker_bonus:t,xcetus:i}=this.sdk.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${Ua}::claim`,typeArguments:[e.bonus_type],arguments:[n.object(T(t).maker_config_id),n.object(e.market_pool_id),n.object(e.position_nft_id),n.pure.u8(e.phase),n.object(T(i).lock_manager_id),n.object(T(i).xcetus_manager_id),n.object(e.ve_nft_id)]}),n}claimAllPayload(e){let{maker_bonus:t,xcetus:i}=this.sdk.sdkOptions,n=new R;return e.whale_nfts.forEach(r=>{r.nft_ids.forEach(o=>{n.moveCall({target:`${t.published_at}::${Ua}::claim_all`,typeArguments:[r.bonus_type],arguments:[n.object(T(t).maker_config_id),n.object(r.pool_id),n.object(o),n.object(T(i).lock_manager_id),n.object(T(i).xcetus_manager_id),n.object(e.ve_nft_id)]})})}),n}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Hi="router",tr="router",Mn=24*3600,Tr=1e3,Ut=1e11,Ni=class{static buildVeNFTDividendInfo(e){let t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{let n=[];i.fields.value.fields.contents.forEach(r=>{n.push({coin_type:N(r.fields.key.fields.name).source_address,amount:r.fields.value})}),t.rewards.push({period:Number(i.fields.key),rewards:n,vesrion:"v1"})}),t}static buildDividendManager(e){let t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{t.bonus_types.push(N(i.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:Ae(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){let t=e.fields,i={id:t.id.id,type:N(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/Mn,i}static getAvailableXCetus(e,t){let i=g(0);return t.forEach(n=>{i=i.add(n.xcetus_amount)}),g(e.xcetus_balance).sub(i).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!Ni.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>Ni.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e,t){let i=new Set;return e==null||e.forEach(n=>{n.rewards.forEach(r=>{i.add(r.coin_type)})}),t==null||t.forEach(n=>{n.rewards.forEach(r=>{i.add(r.coin_type)})}),Array.from(i)}static buildDividendRewardTypeListV2(e){let t={};return e==null||e.forEach(i=>{i.vesrion==="v2"&&i.rewards.forEach(n=>{t[n.coin_type]||(t[n.coin_type]=[]),t[n.coin_type].push(i.period)})}),t}static getNextStartTime(e){let t=Date.now()/1e3,{start_time:i,interval_day:n}=e,r=Math.ceil((t-i)/(n*Mn));return i+r*n*Mn}},c_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){let{xcetus:i}=this.sdk.sdkOptions,n=`${e}_getLockUpManagerEvent`,r=this.getCache(n,t);if(r!==void 0)return r;let o,s=`${i.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:s}})).data.forEach(a=>{let c=N(Yt(a)).source_address;if(c===s&&a.data&&a.data.content){let{fields:d}=a.data.content;o={...Lr(a),id:d.id.id,index:d.index,type:c,xcetus_balance:d.xcetus_balance},this.updateCache(n,o,z)}}),o}async getOwnerLockCetuss(e){let{xcetus:t}=this.sdk.sdkOptions,i=[],n=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:n}});for(let o of r.data)if(N(Yt(o)).source_address===n&&o.data){let s=Ni.buildLockCetus(o.data.content);s.xcetus_amount=await this.getXCetusAmount(s.id),i.push(s)}return i}async getLockCetus(e){var i;let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=t.data)!=null&&i.content){let n=Ni.buildLockCetus(t.data.content);return n.xcetus_amount=await this.getXCetusAmount(n.id),n}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){let{xcetus:e}=this.sdk.sdkOptions,t=new R;return t.moveCall({target:`${e.published_at}::${Hi}::mint_venft`,typeArguments:[],arguments:[t.object(T(e).xcetus_manager_id)]}),t}async convertPayload(e,t){let{xcetus:i}=this.sdk.sdkOptions;t=t||new R;let n=this.buileCetusCoinType(),r=await W.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,t,BigInt(e.amount),n);return e.venft_id===void 0?t.moveCall({target:`${i.published_at}::${Hi}::mint_and_convert`,typeArguments:[],arguments:[t.object(T(i).lock_manager_id),t.object(T(i).xcetus_manager_id),r,t.pure.u64(e.amount)]}):t.moveCall({target:`${i.published_at}::${Hi}::convert`,typeArguments:[],arguments:[t.object(T(i).lock_manager_id),t.object(T(i).xcetus_manager_id),r,t.pure.u64(e.amount),t.object(e.venft_id)]}),t}redeemLockPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${Hi}::redeem_lock`,typeArguments:[],arguments:[i.object(T(t).lock_manager_id),i.object(T(t).xcetus_manager_id),i.object(e.venft_id),i.pure.u64(e.amount),i.pure.u64(e.lock_day),i.object($)]}),i}redeemPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${Hi}::redeem`,typeArguments:[],arguments:[i.object(T(t).lock_manager_id),i.object(T(t).xcetus_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object($)]}),i}redeemDividendPayload(e,t){let{xcetus:i,xcetus_dividends:n}=this.sdk.sdkOptions,r=new R;return t.forEach(o=>{r.moveCall({target:`${i.published_at}::${tr}::redeem`,typeArguments:[o],arguments:[r.object(T(n).dividend_manager_id),r.object(e)]})}),r}redeemDividendV2Payload(e,t,i){let{xcetus_dividends:n}=this.sdk.sdkOptions,r=new R;return t.filter(o=>i.includes(o)).length>0&&(r=this.redeemDividendXTokenPayload(e,r)),t.forEach(o=>{i.includes(o)||r.moveCall({target:`${n.published_at}::${tr}::redeem_v2`,typeArguments:[o],arguments:[r.object(T(n).dividend_manager_id),r.object(e),r.object($)]})}),r}redeemDividendV3Payload(e,t,i,n,r){let{xcetus_dividends:o}=this.sdk.sdkOptions,s=new R;return i.filter(a=>r.includes(a)).length>0&&(s=this.redeemDividendXTokenPayload(t,s)),i.forEach(a=>{s.moveCall({target:`${o.published_at}::${tr}::redeem_v3`,typeArguments:[a],arguments:[s.object(T(o).dividend_manager_id),s.object(T(o).venft_dividends_id),s.makeMoveVec({elements:n[a].map(c=>s.pure.u64(c)),type:"u64"}),s.object(t),s.object($)]})}),s}redeemDividendXTokenPayload(e,t){let{xcetus_dividends:i,xcetus:n}=this.sdk.sdkOptions,{xcetus_manager_id:r,lock_manager_id:o}=T(n),{dividend_manager_id:s}=T(i);return t=t===void 0?new R:t,t.moveCall({target:`${i.published_at}::${tr}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(r),t.object(s),t.object(e),t.object($)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",i="XCETUS"){return`${e}::${t}::${i}`}cancelRedeemPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${Hi}::cancel_redeem_lock`,typeArguments:[],arguments:[i.object(T(t).lock_manager_id),i.object(T(t).xcetus_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object($)]}),i}async getInitConfigs(){var s,a;let{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:s.data,r={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};n.length>0&&n.forEach(c=>{let d=c.parsedJson;d&&(r.xcetus_manager_id=d.xcetus_manager)});let o=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return o.length>0&&o.forEach(c=>{let d=c.parsedJson;d&&(r.lock_manager_id=d.lock_manager)}),r.lock_manager_id.length>0&&(r.lock_handle_id=(await this.getLockUpManager(r.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(t,r,z),r}async getLockUpManager(e=T(this.sdk.sdkOptions.xcetus).lock_manager_id,t=!1){let i=`${e}_getLockUpManager`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=Ni.buildLockUpManager(ee(r));return this.updateCache(i,o,z),o}async getDividendConfigs(){var d,l,h;let{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,{dividend_manager_id:t,venft_dividends_id:i}=T(this._sdk.sdkOptions.xcetus_dividends),n=`${e}_getDividendManagerEvent`,r=this.getCache(n);if(r!==void 0)return r;let o=(d=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:d.data,s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x1::string::String",value:"VeNFTDividends"}}),a={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:"",venft_dividends_id:"",venft_dividends_id_v2:""};o.length>0&&o.forEach(_=>{let y=_.parsedJson;y&&(a.dividend_manager_id=y.manager_id,a.dividend_admin_id=y.admin_id,a.dividend_settle_id=y.settle_id,this.updateCache(n,a,z))}),s&&s.data&&s.data.content&&(a.venft_dividends_id=(h=(l=s.data.content)==null?void 0:l.fields)==null?void 0:h.value,this.updateCache(n,a,z));let c=await this._sdk.ClmmSDK.fullClient.getObject({id:i,options:{showContent:!0}});return a.venft_dividends_id_v2=c.data.content.fields.venft_dividends.fields.id.id,a}async getDividendManager(e=!1){let{dividend_manager_id:t}=T(this._sdk.sdkOptions.xcetus_dividends),i=`${t}_getDividendManager`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=ee(r),s=Ni.buildDividendManager(o);return this.updateCache(i,s,z),s}async getXcetusManager(e=!0){let{xcetus_manager_id:t}=T(this._sdk.sdkOptions.xcetus),i=`${t}_getXcetusManager`,n=this.getCache(i,e);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=ee(r),s={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(i,s),s}async getVeNFTDividendInfo(e,t,i){let n,r={id:"",ve_nft_id:i,rewards:[]};try{n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:i}});let s=ee(n);r=Ni.buildVeNFTDividendInfo(s)}catch{n=void 0}let o=[];try{let s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:i}}),a=ee(s).value.fields.value.fields.dividends.fields.id.id,c=null,d=50,l=[];for(;;){let h=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:a,cursor:c,limit:d});if(h.data.forEach(_=>{l.push(_.objectId)}),c=h.nextCursor,c===null||h.data.length<d)break}console.log(" ~ file: xcetusModule.ts:662 ~ XCetusModule ~ tableIdList:",l),(await this._sdk.ClmmSDK.fullClient.batchGetObjects(l,{showType:!0,showContent:!0})).forEach(h=>{o.push({period:Number(h.data.content.fields.name),vesrion:"v2",rewards:h.data.content.fields.value.fields.contents.map(_=>({coin_type:N(_.fields.key.fields.name).source_address,amount:_.fields.value}))})}),console.log(" ~ file: xcetusModule.ts:680 ~ XCetusModule ~ objects.forEach ~ rewards:",o)}catch(s){console.log(" ~ file: xcetusModule.ts:637 ~ XCetusModule ~ error:",s)}return{...r,rewards:[...r.rewards,...o]}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(T(this._sdk.sdkOptions.xcetus).lock_manager_id),n=g(Ut).mul(g(i.max_lock_day).sub(g(t))).mul(g(i.max_percent_numerator).sub(g(i.min_percent_numerator))).div(g(i.max_lock_day).sub(g(i.min_lock_day))),r=g(Ut).mul(g(i.max_percent_numerator)).sub(n).div(g(Tr)).div(Ut);return{amountOut:g(r).mul(g(e)).round().toString(),percent:r.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(T(this._sdk.sdkOptions.xcetus).lock_manager_id),n=g(Ut).mul(g(i.max_lock_day).sub(g(t))).mul(g(i.max_percent_numerator).sub(g(i.min_percent_numerator))).div(g(i.max_lock_day).sub(g(i.min_lock_day))),r=g(Ut).mul(g(i.max_percent_numerator)).sub(n).div(g(Tr)).div(Ut);return{amountOut:g(e).div(r).toFixed(0,K.ROUND_UP),percent:r.toString()}}async getXCetusAmount(e){let{lock_handle_id:t}=T(this._sdk.sdkOptions.xcetus),i=`${e}_getXCetusAmount`,n=this.getCache(i);if(n!==void 0)return n;try{let r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=ee(r);if(o){let{xcetus_amount:s}=o.value.fields.value.fields;return this.updateCache(i,s,z),s}}catch{}return"0"}async getVeNftAmount(e,t){try{let i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=ee(i);if(n){let{lock_amount:r,xcetus_amount:o}=n.value.fields.value.fields;return{lock_amount:r,xcetus_amount:o}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){let i=(await this.getDividendManager()).dividends.id,n=`${i}_${e}_getPhaseDividendInfo`,r=this._sdk.getCache(n,t);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),s=ee(o),a=s.value.fields.value.fields,c=a.redeemed_num.fields.contents.map(_=>({name:_.fields.key.fields.name,value:_.fields.value})),d=a.bonus_types.map(_=>_.fields.name),l=a.bonus.fields.contents.map(_=>({name:_.fields.key.fields.name,value:_.fields.value})),h={id:Zt(o),phase:s.name,settled_num:a.settled_num,register_time:a.register_time,redeemed_num:c,is_settled:a.is_settled,bonus_types:d,bonus:l,phase_end_time:""};return this.updateCache(n,h),h}catch{}}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},d_="factory",qt="oversubscribe_pool",Fd=1e6,Zi=1e18,l_=(e=>(e.Upcoming="Upcoming",e.Live="Live",e.Ended="Ended",e.Failed="Failed",e.Canceled="Canceled",e))(l_||{}),Xi="router",Po="router",ir="router",u_=(e=>(e.BOTH="both",e.LEFT="left",e.Right="right",e))(u_||{}),f_=(e=>(e[e.CURVE=3]="CURVE",e[e.BID_ASK=4]="BID_ASK",e))(f_||{}),Ka={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function h_(e){return"master_address"in e}var p_="router",__="vaults",m_=1e4,b_=(e=>(e.STATUS_RUNNING="STATUS_RUNNING",e.STATUS_REBALANCING="STATUS_REBALANCING",e))(b_||{}),g_=(e=>(e.Haedal="Haedal",e.Volo="Volo",e.Aftermath="aftermath",e))(g_||{}),y_=(e=>(e.Running="Running",e.PartialCompleted="PartialCompleted",e.Completed="Completed",e.Cancelled="Cancelled",e))(y_||{}),It=class{static buildIdoPoolImmutables(e){return{pool_address:be(e.pool_id),coin_type_sale:N(e.sale_coin_type.name).full_address,coin_type_raise:N(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){let t=Yt(e),i=N(t),n=ee(e),r={pool_address:be(n.id.id),coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],tick_spacing:Number(n.tick_spacing),total_supply:n.total_supply,min_purchase:n.min_purchase_amount,max_purchase:n.max_purchase_amount},o={start_time:Number(n.duration_manager.fields.start_time),lock_up_duration:Number(n.duration_manager.fields.lock_up_duration),purchase_duration:Number(n.duration_manager.fields.purchase_duration),end_time:0};o.end_time=o.start_time+o.purchase_duration;let s={complete_raise_limit:n.complete_raise_limit,liquidity_injection_ratio:g(n.liquidity_injection_ratio).div(Fd).toNumber(),current_sqrt_price_min:n.current_sqrt_price_min,current_sqrt_price_max:n.current_sqrt_price_max,owner:n.owner,sale_coin_amount:n.sale_coin,raise_coin_amount:n.raise_coin,price:n.price,current_price:n.price,duration_summary:o,is_cancelled:n.is_cancelled,is_liquidity_injected:n.is_liquidity_injected,liquidity_used_raise_amount:n.liquidity_used_raise_amount,liquidity_used_sale_amount:n.liquidity_used_sale_amount,purchase_summary:{size:Number(n.purchase_manager.fields.purchases.fields.size),purchase_handle:n.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:n.total_purchase_amount,white_summary:{white_list_id:n.white_list.fields.id.id,protection_limit_used:n.white_list.fields.protection_limit_used,protection_hard_cap:n.white_list.fields.protection_hard_cap,white_handle:n.white_list.fields.addresses.fields.id.id,size:Number(n.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:n.is_withdrawn};return It.updatePoolStatus(s),{...r,...s}}static is_init_period(e){return Number(g(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){let t=Number(g(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){let t=Number(g(Date.now()/1e3).toFixed(0)),i=e.start_time+e.purchase_duration;return t>i}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&It.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:It.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&It.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||It.is_claim_period(e.duration_summary)&&g(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let i,n;if(It.is_sale_failed(e))i="0",n="0";else if(t.is_redeemed)i=t.obtained_sale_amount,n=t.used_raise_amount;else if(g(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))i=g(t.purchased_raise_amount).mul(Zi).div(e.price).toString(),n=t.purchased_raise_amount;else{let o=It.redeemForSaleOversubcribeV2(e,t);i=o.user_obtained_sale_amount,n=o.user_used_raise_amount_ceil}i=K.floor(i);let r=K.floor(g(t.purchased_raise_amount).sub(n).toString());return{obtained_sale_amount:i,refunded_raise_amount:r}}static calculateWithdrawAmount(e){let t,i,n=g(e.total_supply).mul(e.liquidity_injection_ratio);if(It.is_sale_failed(e))t="0",i=g(n).add(e.total_supply);else{let{max_raise_amount:r}=e;g(e.total_purchase_amount).greaterThanOrEqualTo(r)?(t=g(r).sub(e.liquidity_used_raise_amount).toString(),i="0"):(t=g(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),i=g(e.total_supply).add(n).sub(e.liquidity_used_sale_amount).sub(It.get_sold_amount(e)))}return{obtained_raise_amount:K.floor(t).toString(),refunded_sale_amount:K.ceil(i).toString()}}static get_sold_amount(e){return g(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:g(e.total_purchase_amount).mul(Zi).div(e.price)}static redeemForSaleOversubcribe(e,t){let i=t.protection_raise_amount,n=g(t.purchased_raise_amount).sub(i),r=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,s=g(r).sub(o),a=g(e.total_purchase_amount).sub(o),c=K.ceil(n.mul(s).div(a).add(i)),d=K.floor(n.mul(s).div(a).add(i));return{user_obtained_sale_amount:K.floor(g(e.total_supply).mul(d).div(r)),user_used_raise_amount_ceil:c}}static redeemForSaleOversubcribeV2(e,t){let i=t.protection_raise_amount,n=g(t.purchased_raise_amount).sub(i),r=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,s=g(r).sub(o),a=g(e.total_purchase_amount).sub(o),c=g(i).mul(a).add(g(n).mul(s)).mul(Zi).div(g(a).mul(e.price)),d=K.ceil(c.mul(e.price).div(Zi));return{user_obtained_sale_amount:c,user_used_raise_amount_ceil:d}}static raiseTotalAmount(e){let t=g(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?g(e.total_supply).mul(e.current_price).div(g(10).pow(g(t))).toString():g(e.total_supply).mul(e.current_price).mul(g(10).pow(g(t))).toString()}static updatePoolStatus(e){let t=Number(g(Date.now()/1e3).toFixed(0)),i=e.duration_summary,n=i.start_time+i.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<i.start_time?e.pool_status="Upcoming":t>i.start_time&&t<n?e.pool_status="Live":g(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){let i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),n=i[t.coin_type_sale].decimals,r=i[t.coin_type_raise].decimals;t.current_price=oi.priceFixToReal(Number(g(t.price).div(g(Zi)).toString()),n,r).toString(),t.sale_decimals=n,t.raise_decimals=r,t.max_raise_amount=this.raiseTotalAmount(t)}},w_=(e=>(e.V1="1",e.V2="2",e))(w_||{}),Ri=class{static buildVeNFTDividendInfo(e){let t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{let n=[];i.fields.value.fields.contents.forEach(r=>{n.push({coin_type:N(r.fields.key.fields.name).source_address,amount:r.fields.value})}),t.rewards.push({period:Number(i.fields.key),rewards:n})}),t}static buildDividendManager(e){let t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{t.bonus_types.push(N(i.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:Ae(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){let t=e.fields,i={id:t.id.id,type:N(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/Mn,i}static getAvailableXToken(e,t){let i=g(0);return t.forEach(n=>{i=i.add(n.xtoken_amount)}),g(e.xtoken_balance).sub(i).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!Ri.isLocked(t))}static getLockingTokens(e){return e.filter(t=>Ri.isLocked(t))}static buildDividendRewardTypeList(e){let t=new Set;return e.forEach(i=>{i.rewards.forEach(n=>{t.add(n.coin_type)})}),Array.from(t)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=Mn){let i=Date.now()/1e3,{start_time:n,interval_day:r}=e,o=Math.ceil((i-n)/(r*t));return n+o*r*t}},_i=class{static getDefaultStrategyConfig(e){let t;switch(e){case 4:t=Ka.bidAsk;break;default:t=Ka.curve;break}return t}static geTickIndexRange(e,t,i,n){let r,o;switch(e=G.getInitializableTickIndex(e,t),n){case"left":e>0?(o=g(e).sub(t).toNumber(),r=g(e).mul(g(1).add(i)).toDecimalPlaces(0).toNumber()):(o=g(e).sub(t).toNumber(),r=g(e).mul(g(1).sub(i)).toDecimalPlaces(0).toNumber());break;case"right":e>0?(o=g(e).mul(g(1).add(i)).toDecimalPlaces(0).toNumber(),r=g(e).add(t).toNumber()):(o=g(e).mul(g(1).sub(i)).toDecimalPlaces(0).toNumber(),r=g(e).add(t).toNumber());break;default:e>0?(r=g(e).mul(g(1).sub(i)).toDecimalPlaces(0).toNumber(),o=g(e).mul(g(1).add(i)).toDecimalPlaces(0).toNumber()):(r=g(e).mul(g(1).add(i)).toDecimalPlaces(0).toNumber(),o=g(e).mul(g(1).sub(i)).toDecimalPlaces(0).toNumber());break}if(r=G.getInitializableTickIndex(r,t),o=G.getInitializableTickIndex(o,t),r<is)throw Error("Tick lower value is below the minimum allowed value.");if(o>ts)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:r,tick_upper:o}}static getCreateLiquidityBins(e,t){let i=[];switch(t){case 4:i=_i.getCreateBidAskLiquidityBins(e);break;default:i=_i.getCreateCurveLiquidityBins(e);break}return i}static getCreateBidAskLiquidityBins(e){let t=g(Math.floor(g(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),i=[],n=e.ratios,r,o;for(let s=0;s<n.length;s++){let a,c;e.tick_upper<=e.curr_tick?(c=g(e.tick_upper).sub(t.mul(s)).toNumber(),a=g(c).sub(t).toNumber()):e.tick_lower>=e.curr_tick?(a=g(e.tick_lower).add(t.mul(s)).toNumber(),c=g(e.tick_lower).add(t.mul(s+1)).toNumber()):s===4?(a=g(e.tick_lower).add(t.mul(s)).toNumber(),c=g(a).add(t.mul(2)).toNumber()):s>4?(a=g(e.tick_lower).add(t.mul(s+1)).toNumber(),c=g(a).add(t).toNumber()):(a=g(e.tick_lower).add(t.mul(s)).toNumber(),c=g(a).add(t).toNumber()),r=G.getInitializableTickIndex(a,e.tick_spacing),o=G.getInitializableTickIndex(c,e.tick_spacing),i.push({tick_lower:r,tick_upper:o,ratio:n[s],liquidity:"0"})}return i}static getCreateCurveLiquidityBins(e){let t=g(Math.floor(g(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),i=[],n=e.ratios;for(let r=0;r<n.length;r++){let o,s;e.tick_upper<=e.curr_tick?(s=e.tick_upper,o=g(e.tick_upper).sub(t.mul(r+1)).toNumber()):e.tick_lower>=e.curr_tick?(o=e.tick_lower,s=g(o).add(t.mul(r+1)).toNumber()):(o=g(e.curr_tick).sub(t.mul(r+1)).toNumber(),s=g(e.curr_tick).add(t.mul(r+1)).toNumber()),i.push({tick_lower:G.getInitializableTickIndex(o,e.tick_spacing),tick_upper:G.getInitializableTickIndex(s,e.tick_spacing),ratio:n[r],liquidity:"0"})}return i}static calculateAddLiquidityInputs(e){let t=new b(G.tickIndexToSqrtPriceX64(e.curr_tick)),i=_i.calculateCoinRatios(e.curr_tick,e.liquidity_bins),n=e.liquidity_bins.map((r,o)=>{let s=i[o],a=g(e.coin_amount).mul(e.fix_amount_a?s.coinRatioA:s.coinRatioB).toFixed(0).toString();try{return{...gt.estLiquidityAndcoinAmountFromOneAmounts(r.tick_lower,r.tick_upper,new b(a),e.fix_amount_a,!0,e.slippage,t),...r}}catch{return{coinAmountA:new b(0),coinAmountB:new b(0),tokenMaxA:new b(0),tokenMaxB:new b(0),liquidityAmount:new b(0),fix_amount_a:!e.fix_amount_a,...r}}});return _i.fixLiquidityInputs(t,e.slippage,n,!0)}static fixLiquidityInputs(e,t,i,n){let r=i.filter(s=>s.liquidityAmount.gt(J));if(r.length===0)return[];let o=r[0];return i.map(s=>{if(s.liquidityAmount.eq(J)){let a=g(o.liquidityAmount.toString()).mul(s.ratio).div(o.ratio).toFixed(0),c=G.tickIndexToSqrtPriceX64(s.tick_lower),d=G.tickIndexToSqrtPriceX64(s.tick_upper),l=gt.getCoinAmountFromLiquidity(new b(a.toString()),e,c,d,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,liquidityAmount:new b(a.toString()),fix_amount_a:s.fix_amount_a,...So(l,jn.fromDecimal(g(t).mul(100)),n)}}return s})}static calculateCoinRatios(e,t){let i=new b(G.tickIndexToSqrtPriceX64(e)),n=[],r=g(0),o=g(0),s=t.map(d=>{let l=g(K0(100,6).toString()).mul(d.ratio).toFixed(0).toString(),h=G.tickIndexToSqrtPriceX64(d.tick_lower),_=G.tickIndexToSqrtPriceX64(d.tick_upper),y=gt.getCoinAmountFromLiquidity(new b(l),i,h,_,!0);return r=r.add(y.coinA.toString()),o=o.add(y.coinB.toString()),{...y,liquidity:l}}),a=[],c=[];return s.forEach((d,l)=>{let h={coinRatioA:r.eq(g(0))?0:g(d.coinA.toString()).div(r).toNumber(),coinRatioB:o.eq(g(0))?0:g(d.coinB.toString()).div(o).toNumber(),liquiditys:d.liquidity,tick_lower:t[l].tick_lower,tick_upper:t[l].tick_upper};n.push(h),a.push(r.eq(g(0))?0:g(d.coinA.toString()).div(r).toNumber()),c.push(o.eq(g(0))?0:g(d.coinB.toString()).div(o).toNumber())}),n}static calculateCloseMasterLiquidityInputs(e){let t=new b(G.tickIndexToSqrtPriceX64(e.curr_tick));return e.positions.map(i=>{let n=new b(i.liquidity),r=G.tickIndexToSqrtPriceX64(i.tick_lower_index),o=G.tickIndexToSqrtPriceX64(i.tick_upper_index),s=gt.getCoinAmountFromLiquidity(n,t,r,o,!1),a=jn.fromDecimal(g(e.slippage).mul(100)),{tokenMaxA:c,tokenMaxB:d}=So(s,a,!1);return{coinAmountA:s.coinA,coinAmountB:s.coinB,tokenMaxA:c,tokenMaxB:d,liquidityAmount:n,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(e){let t=new b(G.tickIndexToSqrtPriceX64(e.curr_tick)),{fix_token:i}=e;if(i){let n=e.positions.map((s,a)=>({tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,ratio:e.ratios[a]})),r=_i.calculateCoinRatios(e.curr_tick,n),o=e.positions.map((s,a)=>{let c=r[a],d=g(i.coin_amount).mul(i.fix_amount_a?c.coinRatioA:c.coinRatioB).toFixed(0).toString();try{let l=gt.estLiquidityAndcoinAmountFromOneAmounts(s.tick_lower_index,s.tick_upper_index,new b(d),i.fix_amount_a,!1,e.slippage,t);return{...l,tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,liquidity:l.liquidityAmount.toString(),ratio:e.ratios[a]}}catch{return{coinAmountA:new b(0),coinAmountB:new b(0),tokenMaxA:new b(0),tokenMaxB:new b(0),liquidityAmount:new b(0),fix_amount_a:!i.fix_amount_a,tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,liquidity:"0",ratio:e.ratios[a]}}});return _i.fixLiquidityInputs(t,e.slippage,o,!1)}return e.positions.map((n,r)=>{let o=e.ratios[r],s=g(e.liquidity).mul(o).toFixed(0);g(s).greaterThan(n.liquidity)&&(s=n.liquidity);let a=G.tickIndexToSqrtPriceX64(n.tick_lower_index),c=G.tickIndexToSqrtPriceX64(n.tick_upper_index),d=gt.getCoinAmountFromLiquidity(new b(s),t,a,c,!1),l=jn.fromDecimal(g(e.slippage).mul(100)),{tokenMaxA:h,tokenMaxB:_}=So(d,l,!1);return{coinAmountA:d.coinA,coinAmountB:d.coinB,tokenMaxA:h,tokenMaxB:_,liquidityAmount:new b(s),fix_amount_a:!1}})}static buildMasterPosition(e){return{coin_type_a:N(e.coin_type_a.fields.name).full_address,coin_type_b:N(e.coin_type_b.fields.name).full_address,description:e.description,id:e.id.id,index:e.index,liquidity:e.liquidity,name:e.name,pool:e.pool,tick_lower_index:ht(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:ht(BigInt(e.tick_upper_index.fields.bits)),url:e.url}}static buildMasterNFT(e){let t=ee(e);if(t){let i={id:t.id.id,pool_id:t.pool_id,index:Number(t.index),strategy:Number(t.strategy),tick_lower_index:ht(BigInt(t.tick_lower_index)),tick_upper_index:ht(BigInt(t.tick_upper_index)),positions:[],...Lr(e)};return i.positions=t.positions.map(n=>_i.buildMasterPosition(n.fields)),i}}},Et=class{static generateNextTickRange(e,t,i){let n=e-t/2,r=e+t/2;return{new_tick_lower:Et.getValidTickIndex(n,i),new_tick_upper:Et.getValidTickIndex(r,i)}}static calculateDepositRatio(e,t,i){let n=G.sqrtPriceX64ToTickIndex(i);if(n<e)return{ratioA:new K(1),ratioB:new K(0)};if(n>t)return{ratioA:new K(0),ratioB:new K(1)};let r=new b(1e8),{coinAmountB:o}=gt.estLiquidityAndcoinAmountFromOneAmounts(e,t,r,!0,!0,0,i),s=G.sqrtPriceX64ToPrice(i,0,0),a=g(r.toString()).mul(s),c=a.add(o.toString()),d=a.div(c),l=g(o.toString()).div(c);return{ratioA:d,ratioB:l}}static getValidTickIndex(e,t){if(e%t===0)return e;let i;if(e>0?i=e-e%t+t:e<0?i=e+Math.abs(e)%t-t:i=e,i%t!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(i)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return i}static get_lp_amount_by_liquidity(e,t){return e.total_supply==="0"?"0":g(e.total_supply).mul(t).div(e.liquidity).toFixed(0,K.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,t){return e.total_supply==="0"?"0":g(t).mul(e.liquidity).div(e.total_supply).toFixed(0,K.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,t){return g(t).mul(e.protocol_fee_rate).div(m_).toFixed(0,K.ROUND_CEIL)}static buildFramsPositionNFT(e){let t=e.clmm_postion.fields;return{id:e.id.id,url:t.url,pool_id:e.pool_id,coinTypeA:N(t.coin_type_a.fields.name).full_address,coinTypeB:N(t.coin_type_b.fields.name).full_address,description:t.description,name:t.name,liquidity:t.liquidity,clmm_position_id:t.id.id,clmm_pool_id:t.pool,tick_lower_index:ht(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:ht(BigInt(t.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){let t=ee(e),i=dn(e),{positions:n}=t;if(t&&n.length>0){let r=Et.buildFramsPositionNFT(n[0].fields);return{id:t.id.id,pool_id:t.pool,protocol_fee_rate:t.protocol_fee_rate,is_pause:t.is_pause,harvest_assets:{harvest_assets_handle:t.harvest_assets.fields.id.id,size:Number(t.harvest_assets.fields.size)},lp_token_type:N(i).type_arguments[0],total_supply:t.lp_token_treasury.fields.total_supply.fields.value,liquidity:t.liquidity,max_quota:t.max_quota,status:t.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:t.quota_based_type.fields.name,position:r}}}static async getSuiCoin(e,t,i){let n=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),xr);i=i||new R;let r;if(t>95e10){let[o,...s]=n;s.length>0&&i.mergeCoins(i.object(o.coinObjectId),s.map(a=>i.object(a.coinObjectId))),r=i.splitCoins(i.object(o.coinObjectId),[t])}else r=W.buildCoinForAmount(i,n,BigInt(t),xr,!1,!0).targetCoin;return r}},nr=class{static calculatePositionShare(e,t,i,n,r,o,s){if(t<=r||e>=o)return"0";let a=0;e<r?a=r:a=e;let c=0;t<o?c=t:c=o;let d=G.tickIndexToSqrtPriceX64(a),l=G.tickIndexToSqrtPriceX64(c),{coinA:h,coinB:_}=gt.getCoinAmountFromLiquidity(new b(i),new b(s),d,l,!0);return g(h.toString()).mul(n).div(1e12).add(_.toString()).toString()}static buildFramsPool(e){let t=ee(e);if(t)try{let i=[];return t.rewarders.forEach(n=>{i.push({reward_coin:N(n.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:t.id.id,clmm_pool_id:t.clmm_pool_id,effective_tick_lower:ht(BigInt(t.effective_tick_lower.fields.bits)),effective_tick_upper:ht(BigInt(t.effective_tick_upper.fields.bits)),total_share:t.total_share,rewarders:i,positions:{positions_handle:t.positions.fields.id.id,size:t.positions.fields.size},sqrt_price:t.sqrt_price}}catch(i){console.log(i)}}static buildFramsPositionNFT(e){let t=ee(e);if(t){let i=t.clmm_postion.fields;return{id:t.id.id,url:i.url,pool_id:t.pool_id,coinTypeA:N(i.coin_type_a.fields.name).full_address,coinTypeB:N(i.coin_type_b.fields.name).full_address,description:i.description,name:i.name,liquidity:i.liquidity,clmm_position_id:i.id.id,clmm_pool_id:i.pool,tick_lower_index:ht(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:ht(BigInt(i.tick_upper_index.fields.bits)),rewards:[]}}}},gn=class{static buildOrderLimitEvent(e,t){let{events:i}=e,n=[];return i&&i.forEach(r=>{let o=N(r.type).name;if(t.includes(o)){let s={digest:e.digest,type:o,timestampMs:e.timestampMs,parsedJson:r.parsedJson};n.push(s)}}),n}static buildLimitOrderInfo(e){let t=ee(e),i=dn(e);if(t&&i)try{let n=N(i),r={pay_coin_type:n.type_arguments[0],target_coin_type:n.type_arguments[1],canceled_ts:t.canceled_ts==="18446744073709551615"?0:Number(t.canceled_ts),id:t.id.id,obtained_amount:t.obtained_amount,owner:t.owner,rate:t.rate,rate_order_indexer_id:t.rate_order_indexer_id,expire_ts:Number(t.expire_ts),total_pay_amount:t.total_pay_amount,pay_balance:t.pay_balance,target_balance:t.target_balance,claimed_amount:t.claimed_amount,status:"Running",created_ts:Number(t.created_ts)};return r.canceled_ts===0?(r.status="Running",g(r.pay_balance).eq(0)?r.status="Completed":g(r.pay_balance).lessThan(r.total_pay_amount)&&(r.status="PartialCompleted")):r.status="Cancelled",r}catch(n){console.log(n)}}static rateToPrice(e,t,i){let n=18+t-i;return g(10**n).div(e).toString()}static priceToRate(e,t,i){let n=18+t-i;return g(10).pow(n).div(g(e)).toFixed(0).toString()}},jo=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{haedal:r}=T(n);if(r===void 0)throw Error("the haedal config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{staking_id:s}=T(r);try{let a=new R;t?await this.requestStake(e,i||1e9,a):a.moveCall({target:`${r.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[a.object(s)]});let c=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let l=c.events.find(y=>y.type.includes("UserStaked")),{sui_amount:h,st_amount:_}=l.parsedJson;return g(h).div(_).toString()}let d=c.results[0].returnValues[0][0];return g(ne.u64().parse(Uint8Array.from(d))).div(1e6).toString()}catch(a){console.log("getExchangeRateForHaedal",a)}return"0"}static async requestStake(e,t,i){var o,s;let{vaults:n}=e.sdkOptions;i=i||new R;let r=await Et.getSuiCoin(e,t,i);return i.moveCall({target:`${(s=(o=n.config)==null?void 0:o.haedal)==null?void 0:s.published_at}::interface::request_stake`,typeArguments:[],arguments:[i.object(be("0x5")),i.object(n.config.haedal.config.staking_id),r,i.pure.address(be("0x0"))]}),i}static requestStakeCoin(e,t,i){let{haedal:n}=e.sdkOptions.vaults.config;return t.moveCall({target:`${n.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[t.object(be("0x5")),t.object(n.config.staking_id),i,t.pure.address(be("0x0"))]})}},Mo=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=T(n);if(r===void 0)throw Error("the volo config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{native_pool:s,vsui_metadata:a}=T(r);try{let c=new R;t?await this.requestStake(e,i||1e9,c):c.moveCall({target:`${r.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[c.object(s),c.object(a)]});let d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let _=d.events.find(O=>O.type.includes("StakedEvent")),{cert_amount:y,sui_amount:k}=_.parsedJson;return g(k).div(y).toString()}let l=d.results[0].returnValues[0][0],h=g(ne.u256().parse(Uint8Array.from(l))).div("1000000000000000000").toNumber();return g(1).div(h).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=T(n);if(r===void 0)throw Error("the volo config is undefined");i=i||new R;let{native_pool:o,vsui_metadata:s}=T(r),a=await Et.getSuiCoin(e,t,i);return i.moveCall({target:`${r.published_at}::native_pool::stake`,typeArguments:[],arguments:[i.object(o),i.object(s),i.object(be("0x5")),a]}),i}static requestStakeCoin(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=T(n);if(r===void 0)throw Error("the volo config is undefined");t=t||new R;let{native_pool:o,vsui_metadata:s}=T(r);return t.moveCall({target:`${r.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[t.object(o),t.object(s),t.object(be("0x5")),i]})}},Eo=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=T(n);if(r===void 0)throw Error("the aftermath config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{staked_sui_vault:s,safe:a}=T(r);try{let c=new R;t?await this.requestStake(e,i||1e9,c):c.moveCall({target:`${r.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[c.object(s),c.object(a)]});let d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let h=d.events.find(k=>k.type.includes("StakedEvent")),{afsui_amount:_,sui_amount:y}=h.parsedJson;return g(y).div(_).toString()}let l=d.results[0].returnValues[0][0];return g(ne.u128().parse(Uint8Array.from(l))).div(1e18).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=T(n);if(r===void 0)throw Error("the aftermath config is undefined");i=i||new R;let{staked_sui_vault:o,referral_vault:s,safe:a,validator_address:c}=T(r),d=await Et.getSuiCoin(e,t,i);return i.moveCall({target:`${r.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[i.object(o),i.object(a),i.object(be("0x5")),i.object(s),d,i.pure.address(be(c))]}),i}static requestStakeCoin(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=T(n);if(r===void 0)throw Error("the aftermath config is undefined");t=t||new R;let{staked_sui_vault:o,referral_vault:s,safe:a,validator_address:c}=T(r);return t.moveCall({target:`${r.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[t.object(o),t.object(a),t.object(be("0x5")),t.object(s),i,t.pure.address(be(c))]})}},v_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){let{package_id:i}=this._sdk.sdkOptions.ido,n=`${i}_getPoolImmutables`,r=this.getCache(n,t),o={data:[],hasNextPage:!1},s=[];if(r!==void 0&&s.push(...r),s.length===0)try{let a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::oversubscribe_pool::CreatePoolEvent`},e);a.data.forEach(c=>{let d=c.parsedJson;if(d){let l=It.buildIdoPoolImmutables(d);s.push(l)}}),o.hasNextPage=a.hasNextPage,o.nextCursor=a.nextCursor,this.updateCache(n,s,z)}catch(a){console.log("getPoolImmutables",a)}return o.data=s,o}async getPools(e=[],t=!1){let i=[],n=[];e.length>0?n=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(o=>{n.push(o.pool_address)});let r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(let o of r){let s=It.buildIdoPool(o);await It.calculatePoolUiPrice(this._sdk,s),i.push(s);let a=`${s.pool_address}_getPoolObject`;this.updateCache(a,s,z)}return i}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=It.buildIdoPool(r);return await It.calculatePoolUiPrice(this._sdk,o),this.updateCache(i,o),o}async getIdoConfigs(e=!1){var c;let{package_id:t}=this._sdk.sdkOptions.ido,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=Gn(r),s=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",package_version_id:""};return s.length>0&&(s.forEach(d=>{let l=d.parsedJson;if(l)switch(N(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=l.admin_cap_id,a.package_version_id=l.package_version_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break}}),this.updateCache(i,a,z)),a}async getPurchaseInfo(e,t,i=!0){let n=`${e}_${t}_getPurchaseInfo`,r=this.getCache(n,i);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),s=It.buildPurchaseInfo(ee(o));return this.updateCache(n,s,$t),s}catch{return}}async getLockNFT(e,t=!1){let i=`${e}_getLockNFT`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!r.error)return sn(r)}async getLockNFTList(e){var r;let{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:i}=this._sdk.sdkOptions,n=[];try{let o=(r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${i.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:r.data;for(let s of o){let a=ee(s);if(a){let c=a.nft.fields,d={locked_at:Number(a.locked_at),lock_duration:Number(a.lock_duration),lock_nft_id:a.id.id,type:a.nft.type,...c};d.end_lock_time=d.locked_at+d.lock_duration,d.coin_type_a=N(c.coin_type_a.fields.name).full_address,d.coin_type_b=N(c.coin_type_b.fields.name).full_address,d.id=c.id.id,d.tick_lower_index=ht(BigInt(c.tick_lower_index.fields.bits)),d.tick_upper_index=ht(BigInt(c.tick_upper_index.fields.bits)),n.push(d)}}return n}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPool(e){let{ido:t}=this.sdk.sdkOptions;ns(de(e.coin_type_sale),de(e.coin_type_raise))&&(e.price_min=g(1).div(e.price_max).toNumber(),e.price_max=g(1).div(e.price_min).toNumber());let i=oi.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),n=G.priceToSqrtPriceX64(g(e.price_min),e.sale_decimals,e.raise_decimals).toString(),r=G.priceToSqrtPriceX64(g(e.price_max),e.sale_decimals,e.raise_decimals).toString(),o=new R,s=g(e.total_supply).add(g(e.total_supply).mul(g(e.liquidity_injection_ratio))).toNumber(),a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),c=W.buildCoinForAmount(o,a,BigInt(s),e.coin_type_sale,!1),d=[o.object(T(t).admin_cap_id),o.object(T(t).package_version_id),o.object(T(t).pools_id),o.object(de(e.owner)),o.pure.u128(g(i).mul(Zi).toString()),o.pure.u64(e.total_supply),o.pure.u64(e.complete_raise_limit),o.pure.u64(e.min_purchase_amount),o.pure.u64(e.max_purchase_amount),o.pure.u64(e.start_time),o.pure.u64(e.purchase_duration),o.pure.u64(e.lock_up_duration),o.pure.u64((e.liquidity_injection_ratio*Fd).toString()),o.pure.u128(n),o.pure.u128(r),o.pure.u32(e.tick_spacing),c.targetCoin,o.pure.u64(e.protection_hard_cap.toString()),o.object($)],l=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.published_at}::${d_}::create_oversubscribe_pool`,typeArguments:l,arguments:d}),o}async creatPurchasePayload(e){let{ido:t}=this.sdk.sdkOptions,i=new R,n=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),o=W.buildCoinForAmount(i,r,BigInt(e.raise_amount),e.coin_type_raise,!1),s=[e.coin_type_sale,e.coin_type_raise],a,c;return n?(c="purchase",a=[i.object(T(t).package_version_id),i.object(e.pool_address),i.object(n.purchase_certificate_id),i.pure.u64(e.raise_amount.toString()),o.targetCoin,i.object($)]):(c="create_certificate_and_purchase",a=[i.object(T(t).package_version_id),i.object(e.pool_address),i.pure.u64(e.raise_amount.toString()),o.targetCoin,i.object($)]),i.moveCall({target:`${t.published_at}::${qt}::${c}`,typeArguments:s,arguments:a}),i}async redeemPayload(e){let{ido:t}=this.sdk.sdkOptions,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(i===void 0)throw Error("get purchase certificate fail");let n=new R,r=[e.coin_type_sale,e.coin_type_raise],o=[n.object(T(t).package_version_id),n.object(e.pool_address),n.object(i.purchase_certificate_id),n.object($)];return n.moveCall({target:`${t.published_at}::${qt}::redeem`,typeArguments:r,arguments:o}),n}injectLiquidityPayload(e){let{ido:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,n=new R,r=[e.coin_type_sale,e.coin_type_raise],o=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",s=[n.object(T(t).package_version_id),n.object(e.pool_address),n.object(T(i).global_config_id),n.object(e.clmm_pool_address),n.object($)];return n.moveCall({target:`${t.published_at}::${qt}::${o}`,typeArguments:r,arguments:s}),n}unPauseInjectLiquidity(e){let{ido:t}=this.sdk.sdkOptions,{integrate:i,clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,r=new R;r.moveCall({target:`${i.published_at}::${Pn}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[r.object(T(n).global_config_id),r.object(e.clmm_pool_address)]});let o=[e.coin_type_sale,e.coin_type_raise],s=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[r.object(T(t).package_version_id),r.object(e.pool_address),r.object(T(n).global_config_id),r.object(e.clmm_pool_address),r.object($)];return r.moveCall({target:`${t.published_at}::${qt}::${s}`,typeArguments:o,arguments:a}),r}async findClmmPoolForLiquidity(e){let t=null,i=!1,n=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(let r of n){if(r.coinTypeA===e.coin_type_sale&&r.coinTypeB===e.coin_type_raise&&Number(r.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(r.poolAddress);break}if(r.coinTypeA===e.coin_type_raise&&r.coinTypeB===e.coin_type_sale&&Number(r.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(r.poolAddress),i=!0;break}}return t&&(g(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||g(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?{is_reverse:i,clmmPool:null}:{is_reverse:i,clmmPool:t}}withdrawPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new R,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(T(t).package_version_id),i.object(e.pool_address),i.object($)];return i.moveCall({target:`${t.published_at}::${qt}::withdraw`,typeArguments:n,arguments:r}),i}updateWhitelistCapPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new R,n=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&i.moveCall({target:`${t.published_at}::${qt}::add_white_listed_addresses`,typeArguments:n,arguments:[i.object(T(t).admin_cap_id),i.object(T(t).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(r=>i.pure.address(be(r)))}),i.pure.u64(e.add_whites.protection_limit),i.object($)]}),e.remove_whites&&e.remove_whites.length>0&&i.moveCall({target:`${t.published_at}::${qt}::remove_white_listed_addresses`,typeArguments:n,arguments:[i.object(T(t).admin_cap_id),i.object(T(t).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",elements:e.remove_whites.map(r=>i.pure.address(be(r)))}),i.object($)]}),e.update_whites&&e.update_whites.forEach(r=>{i.moveCall({target:`${t.published_at}::${qt}::update_white_listed_address`,typeArguments:n,arguments:[i.object(T(t).admin_cap_id),i.object(T(t).package_version_id),i.object(e.pool_address),i.object(r.address),i.pure.u64(r.protection_limit),i.object($)]})}),i}creatCancelPoolPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new R,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(T(t).admin_cap_id),i.object(T(t).package_version_id),i.object(e.pool_address),i.object($)];return i.moveCall({target:`${t.published_at}::${qt}::cancel`,typeArguments:n,arguments:r}),i}updatePoolOwnerPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new R:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(T(i).admin_cap_id),t.object(T(i).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object($)];return t.moveCall({target:`${i.published_at}::${qt}::update_pool_owner`,typeArguments:n,arguments:r}),t}updatePoolDuractionPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new R:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(T(i).admin_cap_id),t.object(T(i).package_version_id),t.object(e.pool_address),t.pure.u64(e.start_time),t.pure.u64(e.purchase_duration),t.pure.u64(e.lock_duration),t.object($)];return t.moveCall({target:`${i.published_at}::${qt}::update_pool_duration`,typeArguments:n,arguments:r}),t}updateProtectionHardCapPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new R:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(T(i).admin_cap_id),t.object(T(i).package_version_id),t.object(e.pool_address),t.pure.u64(e.protection_hard_cap),t.object($)];return t.moveCall({target:`${i.published_at}::${qt}::update_protection_hard_cap`,typeArguments:n,arguments:r}),t}unlockNftPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new R,n=[e.nft_type],r=[i.object(e.lock_nft_id),i.object($)];return i.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:n,arguments:r}),i}async isAdminCap(e){let{ido:t}=this._sdk.sdkOptions,i=`${t.package_id}_${e}_isAdminCap`,n=this.getCache(i);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:T(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(r);let o=dn(r),s=Ar(r),a=!1;return s&&o&&N(o).source_address===`${t.package_id}::config::AdminCap`&&(a=de(s.AddressOwner)===de(e)),this.updateCache(i,a,z),a}async getWhiteProtectionLimit(e,t,i=!0){let n=`${e}_${t}_getWhiteProtectionLimit`,r=this._sdk.getCache(n,i);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(o&&o.data){let s=ee(o);return this._sdk.updateCache(n,s.value),s.value}return}catch{return}}async getWhiteList(e,t){var n;let i={type:"address",value:t};try{let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),o=ee(r);if(console.log(o),o)return(n=o==null?void 0:o.value)==null?void 0:n.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){let{ido:e}=this._sdk.sdkOptions,t=`${T(e).admin_cap_id}_getAdminAddress`,i=this.getCache(t);if(i)return i;let n=await this._sdk.ClmmSDK.fullClient.getObject({id:T(e).admin_cap_id,options:{showType:!0,showOwner:!0}}),r=dn(n),o=Ar(n);if(o&&r&&N(r).source_address===`${e.package_id}::config::AdminCap`){let s=de(o.AddressOwner);return this.updateCache(t,s,z),s}return""}updateCache(e,t,i=z){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},k_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){let{xtoken:i}=this.sdk.sdkOptions,n=`${e}_getLockUpManagerEvent`,r=this.getCache(n,t);if(r!==void 0)return r;let o,s=`${i.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:s}})).data.forEach(a=>{let c=N(Yt(a)).source_address;if(c===s&&a.data&&a.data.content){let{fields:d}=a.data.content;o={...Lr(a),id:d.id.id,index:d.index,type:c,xtoken_balance:d.xtoken_balance},this.updateCache(n,o,z)}}),o}async getOwnerLockTokens(e){let{xtoken:t}=this.sdk.sdkOptions,i=[],n=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:n}});for(let o of r.data)if(N(Yt(o)).source_address===n&&o.data){let s=Ri.buildLockToken(o.data.content),a=await this.getLockXToken(s.id);a&&(s.xtoken_amount=a.xtoken_amount),i.push(s)}return i}async getLockToken(e){var i;let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=t.data)!=null&&i.content){let n=Ri.buildLockToken(t.data.content),r=await this.getLockXToken(n.id);return r&&(n.xtoken_amount=r.xtoken_amount),n}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){let{xtoken:e}=this.sdk.sdkOptions,t=new R;return t.moveCall({target:`${e.published_at}::${Xi}::mint_venft`,typeArguments:[],arguments:[t.object(T(e).xtoken_manager_id)]}),t}async convertPayload(e,t){let{xtoken:i}=this.sdk.sdkOptions;t=t||new R;let n=this.buileTokenCoinType(),r=await W.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,t,BigInt(e.amount),n);return e.venft_id===void 0?t.moveCall({target:`${i.published_at}::${Xi}::mint_and_convert`,typeArguments:[],arguments:[t.object(T(i).lock_manager_id),t.object(T(i).xtoken_manager_id),r,t.pure.u64(e.amount)]}):t.moveCall({target:`${i.published_at}::${Xi}::convert`,typeArguments:[],arguments:[t.object(T(i).lock_manager_id),t.object(T(i).xtoken_manager_id),r,t.pure.u64(e.amount),t.object(e.venft_id)]}),t}redeemLockPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${Xi}::redeem_lock`,typeArguments:[],arguments:[i.object(T(t).lock_manager_id),i.object(T(t).xtoken_manager_id),i.object(e.venft_id),i.pure.u64(e.amount),i.pure.u64(e.lock_day),i.object($)]}),i}redeemPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${Xi}::redeem`,typeArguments:[],arguments:[i.object(T(t).lock_manager_id),i.object(T(t).xtoken_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object($)]}),i}redeemDividendPayload(e,t){let{xtoken_dividends:i}=this.sdk.sdkOptions,n=new R;return t.forEach(r=>{n.moveCall({target:`${i.published_at}::${Po}::redeem`,typeArguments:[r],arguments:[n.object(T(i).dividend_manager_id),n.object(e)]})}),n}redeemDividendV2Payload(e,t,i){let{xtoken_dividends:n}=this.sdk.sdkOptions,r=new R;return t.filter(o=>i.includes(o)).length>0&&(r=this.redeemDividendXTokenPayload(e,r)),t.forEach(o=>{i.includes(o)||r.moveCall({target:`${n.published_at}::${Po}::redeem_v2`,typeArguments:[o],arguments:[r.object(T(n).dividend_manager_id),r.object(e),r.object($)]})}),r}redeemDividendXTokenPayload(e,t){let{xtoken_dividends:i,xtoken:n}=this.sdk.sdkOptions,{xtoken_manager_id:r,lock_manager_id:o}=T(n),{dividend_manager_id:s}=T(i);return t=t===void 0?new R:t,t.moveCall({target:`${i.published_at}::${Po}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(r),t.object(s),t.object(e),t.object($)]}),t}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,t="xtoken",i="XTOKEN"){return`${e}::${t}::${i}`}cancelRedeemPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${Xi}::cancel_redeem_lock`,typeArguments:[],arguments:[i.object(T(t).lock_manager_id),i.object(T(t).xtoken_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object($)]}),i}async getInitConfigs(){var s,a;let{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:s.data,r={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};n.length>0&&n.forEach(c=>{let d=c.parsedJson;d&&(r.xtoken_manager_id=d.xtoken_manager)});let o=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return o.length>0&&o.forEach(c=>{let d=c.parsedJson;d&&(r.lock_manager_id=d.lock_manager)}),r.lock_handle_id=(await this.getLockUpManager(r.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(t,r,z),r}async getLockUpManager(e=T(this.sdk.sdkOptions.xtoken).lock_manager_id,t=!1){let i=`${e}_getLockUpManagerEvent`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=Ri.buildLockUpManager(ee(r));return this.updateCache(i,o,z),o}async getLockInfoHandle(e){let t=`${e}_getLockInfoHandle`,i=this.getCache(t);if(i!==void 0)return i;let n="",r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=ee(r);return o&&(n=o.lock_infos.fields.id.id,this.updateCache(t,n,z)),n}async getDividendConfigs(){var o;let{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:o.data,r={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return n.length>0&&n.forEach(s=>{let a=s.parsedJson;a&&(r.dividend_manager_id=a.manager_id,r.dividend_admin_id=a.admin_id,r.dividend_settle_id=a.settle_id,this.updateCache(t,r,z))}),r}async getDividendManager(e=!1){let{dividend_manager_id:t}=T(this.sdk.sdkOptions.xtoken_dividends),i=`${t}_getDividendManager`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=ee(r),s=Ri.buildDividendManager(o);return this.updateCache(i,s,z),s}async getXcetusManager(e=!0){let{xtoken_manager_id:t}=T(this.sdk.sdkOptions.xtoken),i=`${t}_getXcetusManager`,n=this.getCache(i,e);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=ee(r),s={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(i,s),s}async getVeNFTDividendInfo(e,t){try{let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=ee(i);return Ri.buildVeNFTDividendInfo(n)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(),n=g(Ut).mul(g(i.max_lock_day).sub(g(t))).mul(g(i.max_percent_numerator).sub(g(i.min_percent_numerator))).div(g(i.max_lock_day).sub(g(i.min_lock_day))),r=g(Ut).mul(g(i.max_percent_numerator)).sub(n).div(g(Tr)).div(Ut);return{amountOut:g(r).mul(g(e)).round().toString(),percent:r.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(),n=g(Ut).mul(g(i.max_lock_day).sub(g(t))).mul(g(i.max_percent_numerator).sub(g(i.min_percent_numerator))).div(g(i.max_lock_day).sub(g(i.min_lock_day))),r=g(Ut).mul(g(i.max_percent_numerator)).sub(n).div(g(Tr)).div(Ut);return{amountOut:g(e).div(r).toFixed(0,K.ROUND_UP),percent:r.toString()}}async getLockXToken(e){let{lock_handle_id:t}=T(this._sdk.sdkOptions.xtoken),i=`${e}_getXTokenAmount`,n=this.getCache(i);if(n)return n;try{let r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=ee(r);if(o){let s=o.value.fields.value.fields;return this.updateCache(i,s,z),s}}catch{}}async getVeNftAmount(e,t){try{let i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=ee(i);if(n){let{lock_amount:r,xtoken_amount:o}=n.value.fields.value.fields;return{lock_amount:r,xtoken_amount:o}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){let i=(await this.getDividendManager()).dividends.id,n=`${i}_${e}_getPhaseDividendInfo`,r=this._sdk.getCache(n,t);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),s=ee(o),a=s.value.fields.value.fields,c=a.redeemed_num.fields.contents.map(_=>({name:_.fields.key.fields.name,value:_.fields.value})),d=a.bonus_types.map(_=>_.fields.name),l=a.bonus.fields.contents.map(_=>({name:_.fields.key.fields.name,value:_.fields.value})),h={id:Zt(o),phase:s.name,settled_num:a.settled_num,register_time:a.register_time,redeemed_num:c,is_settled:a.is_settled,bonus_types:d,bonus:l,phase_end_time:""};return this.updateCache(n,h),h}catch{}}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},C_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async addMasterLiquidity(e){var O,P;let{liquidity_stratefy:t}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,n=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),r=g(0),o=g(0),s=[],a=[],c=[],d=[],l=[];e.liquidity_bins.forEach((M,j)=>{let B=e.amounts_a[j],q=e.amounts_b[j],X=e.bins_fix_amount_a[j];r=r.add(B),o=o.add(q),s.push(B),a.push(q),c.push(Ct(BigInt(M.tick_lower)).toString()),d.push(Ct(BigInt(M.tick_upper)).toString()),l.push(X)});let h=[e.coinTypeA,e.coinTypeB],_=new R,y=(O=W.buildAddLiquidityFixTokenCoinInput(_,!e.fix_amount_a,r.toString(),e.slippage,e.coinTypeA,n,!1))==null?void 0:O.targetCoin,k=(P=W.buildAddLiquidityFixTokenCoinInput(_,e.fix_amount_a,o.toString(),e.slippage,e.coinTypeB,n,!1))==null?void 0:P.targetCoin;return h_(e)?_.moveCall({target:`${t.published_at}::router::increase_liquidity`,typeArguments:h,arguments:[_.object(T(t).master_manger_id),_.object(e.master_address),_.object(T(i).global_config_id),_.object(e.pool_address),y,k,_.makeMoveVec({elements:s.map(M=>_.pure.u64(M))}),_.makeMoveVec({elements:a.map(M=>_.pure.u64(M))}),_.makeMoveVec({elements:l.map(M=>_.pure.bool(M))}),_.object($)]}):_.moveCall({target:`${t.published_at}::router::create_master_liquidity`,typeArguments:h,arguments:[_.object(T(t).master_manger_id),_.object(T(i).global_config_id),_.object(e.pool_address),y,k,_.makeMoveVec({elements:c.map(M=>_.pure.u32(Number(M)))}),_.makeMoveVec({elements:d.map(M=>_.pure.u32(Number(M)))}),_.makeMoveVec({elements:s.map(M=>_.pure.u64(M))}),_.makeMoveVec({elements:a.map(M=>_.pure.u64(M))}),_.makeMoveVec({elements:l.map(M=>_.pure.bool(M))}),_.pure.u8(e.strategy),_.pure.u32(Number(Ct(BigInt(e.tick_lower)).toString())),_.pure.u32(Number(Ct(BigInt(e.tick_upper)).toString())),_.object($)]}),_}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(e,t=[]){let i=[],n=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),r=t.length>0;for(let o of n.data)if(N(o.data.type).full_address===this.buildMasterNFTType()){let s=_i.buildMasterNFT(o);if(s){let a=`${s.id}_masterNFT`;this.updateCache(a,s,z),r?t.includes(s.pool_id)&&i.push(s):i.push(s)}}return i}async getMasterNFT(e,t=!1){let i="$masterId}_masterNFT",n=this.getCache(i,t);if(n)return n;try{let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(N(r.data.type).full_address===this.buildMasterNFTType()){let o=_i.buildMasterNFT(r);return o&&this.updateCache(i,o,z),o}}catch(r){console.log(r)}}async fetchMasterPositionInfos(e){var s;let t={},{clmm_pool:i,integrate:n,simulationAccount:r}=this.sdk.ClmmSDK.sdkOptions,o=new R;return e.forEach(a=>{a.position_ids.forEach(c=>{let d=[a.coinTypeA,a.coinTypeB],l=[o.object(T(i).global_config_id),o.object(a.pool_id),o.object(c)];o.moveCall({target:`${n.published_at}::${Kt}::fetch_position_fees`,arguments:l,typeArguments:d}),o.moveCall({target:`${n.published_at}::${Kt}::fetch_position_rewards`,arguments:[...l,o.object($)],typeArguments:d})})}),(s=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:r.address})).events)==null||s.forEach(a=>{let{parsedJson:c}=a,{position_id:d}=c,l=t[d];switch(l===void 0&&(l={position_id:d,feeOwedA:"0",feeOwedB:"0",rewarders:[]},t[d]=l),N(a.type).name){case"FetchPositionFeesEvent":l.feeOwedA=c.fee_owned_a,l.feeOwedB=c.fee_owned_b;break;case"FetchPositionRewardsEvent":l.rewarders=c.data;break}}),t}async getLiquidityStrategyConfigs(e=!1){let{package_id:t}=this._sdk.sdkOptions.liquidity_stratefy,i=`${t}_getLiquidityStrategyConfigst`,n=this.getCache(i,e);if(n!==void 0)return n;let r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,o={master_manger_id:"",master_liquidity_handle:""};if(r.length>0){for(let s of r){let a=s.parsedJson;o.master_manger_id=a.id;let c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),d=ee(c);o.master_liquidity_handle=d.position_maps.fields.id.id;break}this.updateCache(i,o,z)}return o}removeMasterLiquidity(e){let{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions,n=new R,r=[e.coinTypeA,e.coinTypeB];this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},n);let o=[n.object(T(i).master_manger_id),n.object(e.pool_address),n.object(e.master_address),n.object(T(t).global_config_id),n.makeMoveVec({elements:e.delta_liquidities.map(s=>n.pure.u128(s))}),n.makeMoveVec({elements:e.min_amounts_a.map(s=>n.pure.u64(s))}),n.makeMoveVec({elements:e.min_amounts_a.map(s=>n.pure.u64(s))}),n.object($)];return n.moveCall({target:`${i.published_at}::${ir}::remove_liquidity`,typeArguments:r,arguments:o}),n}closeMasterLiquidity(e){let{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions,n=new R,r=[e.coinTypeA,e.coinTypeB];return this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},n),n.moveCall({target:`${i.published_at}::${ir}::close_master_liquidity`,typeArguments:r,arguments:[n.object(T(i).master_manger_id),n.object(e.master_address),n.object(T(t).global_config_id),n.object(e.pool_address),n.makeMoveVec({elements:e.min_amounts_a.map(o=>n.pure.u64(o))}),n.makeMoveVec({elements:e.min_amounts_a.map(o=>n.pure.u64(o))}),n.object($)]}),n}collectFee(e,t){let{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions;t=t===void 0?new R:t;let r=[e.coinTypeA,e.coinTypeB],o=[t.object(T(n).master_manger_id),t.object(e.master_address),t.object(T(i).global_config_id),t.object(e.pool_address)];return t.moveCall({target:`${n.published_at}::${ir}::collect_fee`,typeArguments:r,arguments:o}),t}collectReward(e,t){let{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions;return t=t===void 0?new R:t,e.collect_fee&&this.collectFee({...e},t),e.rewarder_coin_types.forEach(r=>{let o=[e.coinTypeA,e.coinTypeB,r];if(t){let s=[t.object(T(n).master_manger_id),t.object(e.master_address),t.object(T(i).global_config_id),t.object(e.pool_address),t.object(T(i).global_vault_id),t.object($)];t.moveCall({target:`${n.published_at}::${ir}::collect_reward`,typeArguments:o,arguments:s})}}),t}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},x_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildCoinInput(e,t,i,n,r){let{selectedCoins:o,remainingCoins:s}=he.selectCoinAssetGreaterThanOrEqual(t,BigInt(n)),a=he.calculateTotalBalance(o);if(a<BigInt(n))throw new Error(`The amount(${a}) is Insufficient balance for ${i} , expect ${n} `);let c=a-BigInt(n),d;if(he.isSuiCoin(i))d=e.splitCoins(e.gas,[e.pure.u64(n)]);else{let[l,...h]=o.map(_=>_.coinObjectId);d=e.object(l),h.length>0?r?e.mergeCoins(d,[...h.map(_=>e.object(_)),r]):e.mergeCoins(d,[...h.map(_=>e.object(_))]):r&&e.mergeCoins(d,[r])}return{selectedUnusedAmount:c,coinInput:d,remainingCoins:s}}async deposit(e){var h,_;let{vaults:t,frams:i}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),o=new R,s,a;if(e.swapParams){let y=await this.handleDepositSwap(e,o,r);s=y.primaryCoinAInputs,a=y.primaryCoinBInputs}else s=(h=W.buildAddLiquidityFixTokenCoinInput(o,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,r,!1))==null?void 0:h.targetCoin,a=(_=W.buildAddLiquidityFixTokenCoinInput(o,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,r,!1))==null?void 0:_.targetCoin;let c=T(t),d=T(i),l=T(n);return o.moveCall({target:`${t.published_at}::${p_}::deposit`,typeArguments:[e.coinTypeA,e.coinTypeB,e.lp_token_type],arguments:[o.object(c.vaults_manager_id),o.object(e.vault_id),o.object(d.rewarder_manager_id),o.object(d.global_config_id),o.object(e.farming_pool),o.object(l.global_config_id),o.object(e.clmm_pool),s,a,o.pure.u64(e.amount_a),o.pure.u64(e.amount_b),o.pure.bool(e.fix_amount_a),o.object($)]}),o}async handleDepositSwap(e,t,i){let{clmm_pool:n,integrate:r}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:o,a2b:s,route_obj:a,stakeProtocol:c}=e.swapParams,d=s?e.coinTypeA:e.coinTypeB,l=W.buildCoinForAmount(t,i,BigInt(o),d,!1),h=BigInt(l.tragetCoinAmount)-BigInt(o),_=[];if(c){let M=this.requestStakeCoin(c,t,l.targetCoin),j=W.buildCoinForAmount(t,l.remainCoins,BigInt(0),d,!1).targetCoin;_=s?[j,M]:[M,j]}else if(a){let M=W.buildCoinForAmount(t,i,0n,s?e.coinTypeB:e.coinTypeA,!1),j=await W.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,a,l,M,"",e.slippage,t);_=s?[j.fromCoin,j.toCoin]:[j.toCoin,j.fromCoin],!M.isMintZeroCoin&&M.originalSplitedCoin===void 0&&t.transferObjects([M.targetCoin],t.pure.address(this._sdk.getVerifySenderAddress()))}else{let M=W.buildCoinForAmount(t,i,0n,s?e.coinTypeB:e.coinTypeA,!1),j=ri.getDefaultSqrtPriceLimit(s).toString();_=t.moveCall({target:`${r.published_at}::${Li}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(T(n).global_config_id),t.object(e.clmm_pool),s?l.targetCoin:M.targetCoin,s?M.targetCoin:l.targetCoin,t.pure.bool(s),t.pure.bool(!0),t.pure.u64(o),t.pure.u128(j),t.pure.bool(!1),t.object($)]})}let y,k,O=_[0],P=_[1];if(s){let M=BigInt(e.amount_a)-h;he.isSuiCoin(d)?(t.transferObjects([O],t.pure.address(this._sdk.getVerifySenderAddress())),y=t.splitCoins(t.gas,[t.pure.u64(e.amount_a)])):M>0n?y=this.buildCoinInput(t,l.remainCoins,d,M,O).coinInput:y=O,k=P}else{y=O;let M=BigInt(e.amount_b)-h;he.isSuiCoin(d)?(t.transferObjects([P],t.pure.address(this._sdk.getVerifySenderAddress())),k=t.splitCoins(t.gas,[t.pure.u64(e.amount_b)])):M>0n?k=this.buildCoinInput(t,l.remainCoins,d,M,P).coinInput:k=P}return{primaryCoinAInputs:y,primaryCoinBInputs:k}}async remove(e){let{vaults:t,frams:i}=this.sdk.sdkOptions,{clmm_pool:n,integrate:r}=this._sdk.ClmmSDK.sdkOptions,o=new R,s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),e.lp_token_type),a=W.buildCoinForAmount(o,s,BigInt(e.lp_token_amount),e.lp_token_type,!1).targetCoin,c=T(t),d=T(i),l=T(n),h=[e.coinTypeA,e.coinTypeB,e.lp_token_type],_=o.moveCall({target:`${t.published_at}::${__}::remove`,typeArguments:h,arguments:[o.object(c.vaults_manager_id),o.object(e.vault_id),o.object(d.rewarder_manager_id),o.object(d.global_config_id),o.object(e.farming_pool),o.object(l.global_config_id),o.object(e.clmm_pool),a,o.pure.u64(e.lp_token_amount),o.pure.u64(e.min_amount_a),o.pure.u64(e.min_amount_b),o.object($)]}),y=_[0],k=_[1];if(e.swapParams){let{a2b:O,swap_amount:P,route_obj:M}=e.swapParams;if(M){let j={targetCoin:O?y:k,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},B={targetCoin:O?k:y,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},q=await W.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,M,j,B,"",e.slippage,o),X=O?[q.fromCoin,q.toCoin]:[q.toCoin,q.fromCoin];O?o.mergeCoins(X[1],[k]):o.mergeCoins(X[0],[y]),o.transferObjects([...X],o.pure.address(this._sdk.getVerifySenderAddress()))}else{let j=ri.getDefaultSqrtPriceLimit(O).toString(),B=o.moveCall({target:`${r.published_at}::${Li}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[o.object(T(n).global_config_id),o.object(e.clmm_pool),y,k,o.pure.bool(O),o.pure.bool(!0),o.pure.u64(P),o.pure.u128(j),o.pure.bool(!0),o.object($)]});o.transferObjects([B[0],B[1]],o.pure.address(this._sdk.getVerifySenderAddress()))}}else o.transferObjects([y,k],o.pure.address(this._sdk.getVerifySenderAddress()));return o}async getVaultList(e="all"){let{vaults:t}=this._sdk.sdkOptions,i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::vaults::CreateEvent`},e),n=i.data.map(s=>s.parsedJson.id),r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),o=[];return r.forEach(s=>{let a=Et.buildPool(s);a&&(a.stake_protocol=this.findStakeProtocol(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),o.push(a))}),i.data=o,i}findStakeProtocol(e,t){let{haedal:i,volo:n,aftermath:r}=T(this._sdk.sdkOptions.vaults),o=N(e).full_address,s=N(t).full_address;if(he.isSuiCoin(o)||he.isSuiCoin(s)){if(i){let a=N(T(i).coin_type).full_address;if(o===a||s===a)return"Haedal"}if(n){let a=N(T(n).coin_type).full_address;if(o===a||s===a)return"Volo"}if(r){let a=N(T(r).coin_type).full_address;if(o===a||s===a)return"aftermath"}}}savePoolToCache(e){let t=`${e.id}_mirrorPool`;this.updateCache(t,e,z)}readPoolFromCache(e,t=!1){let i=`${e}_mirrorPool`;return this.getCache(i,t)}async calculateMaxAvailable(e){var k;let{integrate:t,simulationAccount:i}=this.sdk.ClmmSDK.sdkOptions,n=new R,r=G.tickIndexToSqrtPriceX64(e.lowerTick),o=G.tickIndexToSqrtPriceX64(e.upperTick),s=new b(e.curSqrtPrice),a=gt.getCoinAmountFromLiquidity(new b(e.input_amount),s,r,o,!1),c=[e.coinTypeA,e.coinTypeB];n.moveCall({target:`${t.published_at}::${Kt}::calculate_swap_result`,arguments:[n.object(e.clmm_pool),n.pure.bool(!0),n.pure.bool(!0),n.pure.u64(a.coinA.toString())],typeArguments:c}),n.moveCall({target:`${t.published_at}::${Kt}::calculate_swap_result`,arguments:[n.object(e.clmm_pool),n.pure.bool(!1),n.pure.bool(!0),n.pure.u64(a.coinB.toString())],typeArguments:c});let d=(k=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address})).events)==null?void 0:k.filter(O=>N(O.type).name==="CalculatedSwapResultEvent");if(d.length===0)return null;let l=d[0].parsedJson.data,h=d[1].parsedJson.data,_=g(a.coinB.toString()).add(l.amount_out),y=g(a.coinA.toString()).add(h.amount_out);return{maxAmountB:_,maxAmountA:y}}async calculateRemoveSwapAmount(e,t){let i=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new b(e.curSqrtPrice)),n=e.fix_amount_a?i.ratioA:i.ratioB,r=g(e.receive_amount).mul(n),o,s;if(e.removeLiquidity){let O=G.tickIndexToSqrtPriceX64(e.lowerTick),P=G.tickIndexToSqrtPriceX64(e.upperTick),M=gt.getCoinAmountFromLiquidity(new b(e.removeLiquidity),new b(e.curSqrtPrice),O,P,!1);s=e.removeLiquidity,o=e.fix_amount_a?M.coinB.toString():M.coinA.toString(),r=e.fix_amount_a?g(M.coinA.toString()):g(M.coinB.toString())}else{let O=gt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new b(r.toFixed(0)),e.fix_amount_a,!1,.2,new b(e.curSqrtPrice));s=O.liquidityAmount.toString(),o=e.fix_amount_a?O.coinAmountB.toString():O.coinAmountA.toString()}let a=!e.fix_amount_a,c=await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,g(o),e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route,[{pool_id:e.clmm_pool,tick_lower:e.lowerTick,tick_upper:e.upperTick,delta_liquidity:Number(s),is_increase:!1}]),d=r.add(c.amount_out),l=g(e.receive_amount),h=l.sub(d);if((!e.removeLiquidity||e.removeLiquidity&&t)&&h.abs().greaterThan(l.mul(.01))){let O=d.lessThan(l),P,M;t?O?(P=g(s),M=t.right):(P=t.left,M=g(s)):(P=g(O?s:0),M=g(O?e.maxLiquidity:s));let j=g(P).add(M).div(2).toFixed(0);if(!t||t&&t.count<15&&P<M)return await this.calculateRemoveSwapAmount({...e,removeLiquidity:j},{left:P,right:M,count:t?t.count+1:0})}let _=c.amount_in&&c.fee_amount?new b(c.amount_in).add(new b(c.fee_amount)).toString():c.amount_in,y=c.amount_out,{is_exceed:k}=c;return{swapInAmount:_,swapOutAmount:y,liquidity:s,is_exceed:k,routeObj:c.route_obj,request_id:e.request_id}}async calculateStakeDepositFixSui(e){let t=e.inputSuiAmount.mul(e.remainRate),i=e.inputSuiAmount.sub(e.swapSuiAmount),n=e.exchangeRate?e.exchangeRate:await this.getExchangeRateForStake(e.stakeProtocol,e.shouldRequestStake,Number(e.swapSuiAmount.toFixed(0))),r=e.swapSuiAmount.div(n).toFixed(0),o=gt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new b(r.toString()),!e.fixCoinA,!0,0,new b(e.curSqrtPrice)),s=e.fixCoinA?o.coinAmountA.toString():o.coinAmountB.toString(),a=g(i).sub(s);return a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(t)||e.rebalanceCount>12||e.leftSuiAmount.greaterThanOrEqualTo(e.rightSuiAmount)?{swapInAmount:e.swapSuiAmount.toFixed(0),swapOutAmount:r,afterSqrtPrice:e.curSqrtPrice,fixAmountA:!e.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:e.stakeProtocol}:a.lessThan(0)?await this.calculateStakeDepositFixSui({...e,rightSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.leftSuiAmount).div(2),exchangeRate:n,rebalanceCount:e.rebalanceCount+1}):a.greaterThan(t)?await this.calculateStakeDepositFixSui({...e,leftSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.rightSuiAmount).div(2),exchangeRate:n,rebalanceCount:e.rebalanceCount+1}):null}async calculateDepositSwapAmount(e,t=!1){let i=G.sqrtPriceX64ToTickIndex(new b(e.curSqrtPrice)),{ratioA:n,ratioB:r}=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new b(e.curSqrtPrice)),o=g(e.input_amount).mul(e.fix_amount_a?n:r),s=g(e.input_amount).sub(o),a=e.fix_amount_a;if(s.toFixed(0)==="0")return null;if(e.stakeProtocol){if(he.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||he.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){let X=await this.calculateStakeDepositFixSui({inputSuiAmount:g(e.input_amount),swapSuiAmount:s,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:a?new K(s.toFixed(0)):new K(0),rightSuiAmount:a?new K(e.input_amount):new K(s.toFixed(0)),stakeProtocol:e.stakeProtocol});return X?{...X,request_id:e.request_id}:null}throw Error("Only support fix sui")}let c=i<e.lowerTick||i>e.upperTick,d={clmm_pool:e.clmm_pool,curSqrtPrice:e.curSqrtPrice,a2b:a,amount_a:a?new K(e.input_amount):new K(0),amount_b:a?new K(0):new K(e.input_amount),amount_left:a?new K(s.toFixed(0)):new K(0),amount_right:a?new K(e.input_amount):new K(s.toFixed(0)),lowerTick:e.lowerTick,upperTick:e.upperTick,tick_spacing:2,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,useRoute:e.use_route,remainRate:e.remainRate?e.remainRate:.01,priceSplitPoint:e.priceSplitPoint},l=t&&i<=e.upperTick,h=l?await this.calculateRebalance(d):await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,s,e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route),_=h.after_sqrt_price,y=G.sqrtPriceX64ToTickIndex(new b(_)),k=y<e.lowerTick||y>e.upperTick;if(c!==k&&!l&&y<=e.upperTick){let{ratioA:X,ratioB:Z}=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new b(_));s=g(e.input_amount).sub(g(e.input_amount).mul(e.fix_amount_a?X:Z)),d.amount_left=a?new K(s.toFixed(0)):new K(0),d.amount_right=a?new K(e.input_amount):new K(s.toFixed(0)),h=await this.calculateRebalance(d),_=h.after_sqrt_price,G.sqrtPriceX64ToTickIndex(new b(_))}let{ratioA:O,ratioB:P}=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new b(_)),M=P.div(O).sub(r.div(n)).greaterThan("0"),j=h.amount_in&&h.fee_amount?new b(h.amount_in).add(new b(h.fee_amount)).toString():h.amount_in,B=h.amount_out,{is_exceed:q}=h;if(y<e.lowerTick)M=!0;else if(y>e.upperTick)M=!1;else{let X=M===a?new b(g(e.input_amount).sub(j).toString()):new b(B),Z=gt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,X,M,!0,0,new b(_)),fe=Z.coinAmountA,ve=Z.coinAmountB;g(e.fix_amount_a?fe.toString():ve.toString()).add(j).greaterThanOrEqualTo(e.input_amount)&&(M=!M)}return{swapInAmount:j,swapOutAmount:B,afterSqrtPrice:_,is_exceed:q,fixAmountA:M,routeObj:h.route_obj,request_id:e.request_id,use_Haedal_stake:!1}}async calculateHaedalDepositSwapAmount(e){G.sqrtPriceX64ToTickIndex(new b(e.curSqrtPrice));let{ratioA:t,ratioB:i}=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new b(e.curSqrtPrice)),n=g(e.input_amount).mul(e.fix_amount_a?t:i),r=g(e.input_amount).sub(n),o=e.fix_amount_a;if(r.toFixed(0)==="0")return null;if(e.stakeProtocol){if(he.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||he.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){let s=await this.calculateStakeDepositFixSui({inputSuiAmount:g(e.input_amount),swapSuiAmount:r,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:o?new K(r.toFixed(0)):new K(0),rightSuiAmount:o?new K(e.input_amount):new K(r.toFixed(0)),stakeProtocol:e.stakeProtocol});return s?{...s,request_id:e.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(e){let{clmm_pool:t,a2b:i,curSqrtPrice:n,amount_a:r,amount_b:o,lowerTick:s,upperTick:a,amount_left:c,amount_right:d,coinTypeA:l,coinTypeB:h,useRoute:_,priceSplitPoint:y,remainRate:k}=e,O=async(P,M,j)=>{let B=P.plus(M).div(2),q=await this.clmmPreSwap(t,n,i,B,l,h,!0,y,_);if(q.amount_out==="0")return q;if(q.after_sqrt_price||(q.after_sqrt_price=e.curSqrtPrice),q.is_exceed)return M=B,O(P,M);let X=i?r.sub(q.amount_in):r.add(q.amount_out),Z=i?o.add(q.amount_out):o.sub(q.amount_in);G.sqrtPriceX64ToTickIndex(new b(q.after_sqrt_price));let fe=gt.estLiquidityAndcoinAmountFromOneAmounts(s,a,new b(X.toString()),!0,!0,1,new b(q.after_sqrt_price)),ve=new K(fe.coinAmountA.toString()),_t=new K(fe.coinAmountB.toString());if(ve.toString()!==X.toString())throw new Error("usedA does not match afterA");if(Z.lessThan(_t))i?P=B:M=B;else{i?M=B:P=B;let Y=Z.sub(_t);if(Z.mul(k).sub(Y).greaterThanOrEqualTo(0))return{...q,remainingB:Y}}return P.greaterThan(M)||M.sub(P).lessThan(10)?q:O(P,M)};return c.greaterThanOrEqualTo(d)?O(new K(0),c):O(c,d)}async clmmPreSwap(e,t,i,n,r,o,s,a,c,d){var P;if(c)try{let M=await this._sdk.ClmmSDK.RouterV2.getBestRouter(i?r:o,i?o:r,Number(n.toFixed(0)),s,a,"",void 0,void 0,!0,!1,d);if(!M.result)throw new Error("route unavailable");let{result:j}=M,B=t;return j.splitPaths.forEach(q=>{let X=q.basePaths.find(Z=>Z.poolAddress.toLowerCase()===e.toLowerCase());X&&(B=X.afterSqrtPrice.toString())}),{amount_in:j.inputAmount.toString(),amount_out:j.outputAmount.toString(),after_sqrt_price:B,is_exceed:j.isExceed,route_obj:j}}catch{throw new Error("route unavailable")}let{integrate:l,simulationAccount:h}=this.sdk.ClmmSDK.sdkOptions,_=new R,y=[r,o],k=[_.object(e),_.pure.bool(i),_.pure.bool(s),_.pure.u64(n.toFixed(0))];_.moveCall({target:`${l.published_at}::${Kt}::calculate_swap_result`,arguments:k,typeArguments:y});let O=(P=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:h.address})).events)==null?void 0:P.filter(M=>N(M.type).name==="CalculatedSwapResultEvent");return O.length===0?null:O[0].parsedJson.data}async getVault(e,t=!1){let i=this.readPoolFromCache(e,t);if(i)return i;try{let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),r=Et.buildPool(n);if(r)return r.stake_protocol=this.findStakeProtocol(r.position.coinTypeA,r.position.coinTypeB),this.savePoolToCache(r),r}catch(n){console.log(n)}}async getVaultsConfigs(e=!1){let{package_id:t}=this._sdk.sdkOptions.vaults,i=`${t}_getMirrorPoolConfigs`,n=this.getCache(i,e);if(n!==void 0)return n;let r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::vaults::InitEvent`})).data,o={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(r.length>0){for(let s of r){let a=s.parsedJson;o.admin_cap_id=a.admin_cap_id,o.vaults_manager_id=a.manager_id;let c=await this._sdk.ClmmSDK.fullClient.getObject({id:o.vaults_manager_id,options:{showContent:!0}}),d=ee(c);o.vaults_pool_handle=d.vault_to_pool_maps.fields.id.id;break}this.updateCache(i,o,z)}return o}async getExchangeRateForStake(e,t,i){return e==="Haedal"?await jo.getExchangeRateForStake(this._sdk,t,i):e==="Volo"?await Mo.getExchangeRateForStake(this._sdk,t,i):e==="aftermath"?await Eo.getExchangeRateForStake(this._sdk,t,i):"0"}requestStakeCoin(e,t,i){if(e==="Haedal")return jo.requestStakeCoin(this._sdk,t,i);if(e==="Volo")return Mo.requestStakeCoin(this._sdk,t,i);if(e==="aftermath")return Eo.requestStakeCoin(this._sdk,t,i)}async requestStake(e,t,i){if(e==="Haedal")return await jo.requestStake(this._sdk,t,i);if(e==="Volo")return await Mo.requestStake(this._sdk,t,i);if(e==="aftermath")return await Eo.requestStake(this._sdk,t,i)}updateCache(e,t,i=$t){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},A_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getLimitOrderTokenList(){let{limit_order:e}=this._sdk.sdkOptions,{token_list_handle:t}=T(e),{fullClient:i}=this._sdk.ClmmSDK,n=(await i.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await i.batchGetObjects(n,{showContent:!0})).map(r=>{let{fields:o}=r.data.content;return{coin_type:N(o.name.fields.name).full_address,min_trade_amount:Number(o.value)}})}async getLimitOrderPoolList(){let{limit_order:e}=this._sdk.sdkOptions,{rate_orders_indexer_handle:t}=T(e),{fullClient:i}=this._sdk.ClmmSDK,n=(await i.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await i.batchGetObjects(n,{showContent:!0})).map(r=>{let{fields:o}=r.data.content.fields.value,s={pay_coin_type:N(o.pay_coin.fields.name).full_address,target_coin_type:N(o.target_coin.fields.name).full_address,indexer_id:o.indexer_id};return this._sdk.updateCache(`${s.pay_coin_type}_${s.target_coin_type}`,s.indexer_id),s})}async getPoolIndexerId(e,t){let i=this._sdk.getCache(`${e}_${t}`);try{if(i===void 0){let n=(await this.getLimitOrderPoolList()).filter(r=>N(r.pay_coin_type).full_address===N(e).full_address&&N(r.target_coin_type).full_address===N(t).full_address);if(n.length>0)return n[0].indexer_id}}catch{}return i}async getOwnerLimitOrderList(e,t){let{fullClient:i}=this._sdk.ClmmSDK,n={data:[],hasNextPage:!1};try{let r=await this.getUserIndexerHandle(e);if(!r)return n;let o=await i.getDynamicFieldsByPage(r,t);n.hasNextPage=o.hasNextPage,n.nextCursor=o.nextCursor;let s=o.data.map(c=>c.name.value),a=(await i.batchGetObjects(s,{showContent:!0})).map(c=>gn.buildLimitOrderInfo(c)).filter(c=>c!==void 0);n.data=a}catch(r){console.log("Error in getOwnerLimitOrderList:",r)}return n}async getLimitOrderConfigs(){let{package_id:e}=this._sdk.sdkOptions.limit_order,t={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::limit_order::InitEvent`})).data;if(i.length>0){let r=i[0].parsedJson;t.rate_orders_indexer_id=r.rate_orders_indexer_id,t.user_orders_indexer_id=r.user_orders_indexer_id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rate_orders_indexer_id,options:{showContent:!0}});t.rate_orders_indexer_handle=ee(o).list.fields.id.id;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.user_orders_indexer_id,options:{showContent:!0}});t.user_orders_indexer_handle=ee(s).indexer.fields.id.id}let n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitFactoryEvent`})).data;if(n.length>0){let r=n[0].parsedJson;t.global_config_id=r.global_config_id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showContent:!0}}),s=ee(o);t.token_list_handle=s.token_white_list.fields.id.id}return t}async getLimitOrder(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.getObject({id:e,options:{showContent:!0}});return gn.buildLimitOrderInfo(i)}catch(i){console.log("Error in getLimitOrder:",i);return}}async getLimitOrderLogs(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),n=[];return i.data.forEach(r=>{n.push(...gn.buildOrderLimitEvent(r,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),n}catch(i){return console.log("Error in getLimitOrderLogs:",i),[]}}async getLimitOrderClaimLogs(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),n=[];return i.data.forEach(r=>{n.push(...gn.buildOrderLimitEvent(r,["ClaimTargetCoinEvent"]))}),n}catch(i){return console.log("Error in getLimitOrderLogs:",i),[]}}buildRateOrdersIndexerType(e){let{limit_order:t}=this._sdk.sdkOptions;return Cr(`${t.package_id}::limit_order::RateOrdersIndexer`,[e.pay_coin_type,e.target_coin_type])}async placeLimitOrder(e){let{limit_order:t}=this._sdk.sdkOptions,{user_orders_indexer_id:i,global_config_id:n,rate_orders_indexer_id:r}=T(t),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.pay_coin_type),s=new R,a=await this.getPoolIndexerId(e.pay_coin_type,e.target_coin_type),c=W.buildCoinForAmount(s,o,BigInt(e.pay_coin_amount),e.pay_coin_type,!1,!0);return s.moveCall({target:`${t.published_at}::limit_order::${a===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[s.object(n),a===void 0?s.object(r):s.object(a),s.object(i),c.targetCoin,s.pure.u128(gn.priceToRate(e.price,e.pay_decimal,e.target_decimal)),s.pure.u64(e.expired_ts),s.object($)]}),s}async claimTargetCoin(e){let{limit_order:t}=this._sdk.sdkOptions,{global_config_id:i}=T(t),n=new R;return n.moveCall({target:`${t.published_at}::limit_order::claim_target_coin`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[n.object(i),n.object(e.order_id)]}),n}async cancelOrdersByOwner(e){let{limit_order:t}=this._sdk.sdkOptions,{global_config_id:i}=T(t),n=new R,r={};for(let o=0;o<e.length;o++){let s=e[o],a=await this.getPoolIndexerId(s.pay_coin_type,s.target_coin_type);if(a===void 0)throw Error("not found indexerId");r[s.order_id]=a}return e.forEach(o=>{n.moveCall({target:`${t.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[o.pay_coin_type,o.target_coin_type],arguments:[n.object(i),n.object(r[o.order_id]),n.object(o.order_id),n.object($)]})}),n}async getUserIndexerHandle(e){let{fullClient:t}=this._sdk.ClmmSDK,{limit_order:i}=this._sdk.sdkOptions,n=this.getUserIndexerHandleByCache(e);if(n===void 0){let r=new R;r.moveCall({target:`${i.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[r.pure.address(e),r.object(T(i).user_orders_indexer_id)]}),n=(await t.devInspectTransactionBlock({transactionBlock:r,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,n&&this.saveUserIndexerHandleByCache(e,n)}return n}getUserIndexerHandleByCache(e){let t=`getUserIndexerHandleByCache_${e}`;return this.getCache(t)}saveUserIndexerHandleByCache(e,t){let i=`getUserIndexerHandleByCache_${e}`;return this.updateCache(i,t)}updateCache(e,t,i=z){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},S_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){let{package_id:t}=this._sdk.sdkOptions.frams,i={data:[],hasNextPage:!1};try{let n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::pool::CreatePoolEvent`},e),r=n.data.map(o=>o.parsedJson.pool_id);if(i.hasNextPage=n.hasNextPage,i.nextCursor=n.nextCursor,r.length>0){let o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0});for(let s of o){let a=nr.buildFramsPool(s);a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(c=>c.reward_coin)),i.data.push(a),this.updateCache(a.id,a))}}}catch(n){console.log("getFramsPoolList error ",n)}return i}async getFramsPool(e,t=!1){let i=this.getCache(e,t);if(i)return i;let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),r=nr.buildFramsPool(n.data);return r&&(r.rewarders=await this.getFramsRewarderConfig(r.clmm_pool_id,r.rewarders.map(o=>o.reward_coin)),this.updateCache(r.id,r)),r}async getFramsRewarderConfig(e,t,i=!1){let{frams:n}=this._sdk.sdkOptions,r=[];for(let o of t){let s=`getFramsRewarderConfig_${o}_${e}`,a=this.getCache(s,i);if(a)r.push(a);else try{let c=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:T(n).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:Ed(o)}}),{fields:d}=c.data.content.fields.value.fields.value,l={reward_coin:o,last_reward_time:d.last_reward_time,emission_per_second:d.emission_per_second,total_allocate_point:d.total_allocate_point,allocate_point:""},h=d.pools.fields.id.id,_=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:h,name:{type:"0x2::object::ID",value:e}}),{allocate_point:y}=_.data.content.fields.value.fields.value.fields;l.allocate_point=y,this.updateCache(s,l),r.push(l)}catch(c){console.log(c)}}return r}async getOwnedFramsPositionNFTList(e,t=[],i=!1,n="all"){let{package_id:r}=this._sdk.sdkOptions.frams,o={data:[],hasNextPage:!1},s={},a=[],c=t.length>0,d=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${r}::pool::WrappedPositionNFT`},options:{showContent:!0}},n);o.hasNextPage=d.hasNextPage,o.nextCursor=d.nextCursor;for(let l of d.data){let h=nr.buildFramsPositionNFT(l);if(h)if(c){if(t.includes(h.pool_id)){a.push(h);let _=s[h.pool_id];_?_.push(h):_=[h],s[h.pool_id]=_}}else a.push(h)}if(i&&a.length>0){let l=await this.calculateFarmingRewards(a.map(h=>({pool_id:h.pool_id,position_nft_id:h.id,clmm_pool_id:h.clmm_pool_id})));c?(s={},a.forEach(h=>{l[h.id]&&(h.rewards=l[h.id]);let _=s[h.pool_id];_?_.push(h):_=[h],s[h.pool_id]=_})):a.forEach(h=>{l[h.id]&&(h.rewards=l[h.id])})}return c?s:(o.data=a,o)}async getFramsPositionNFT(e,t=!0){let i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),n=nr.buildFramsPositionNFT(i);if(t&&n){let r=await this.calculateFarmingRewards([{pool_id:n.pool_id,position_nft_id:n.id}]);r[n.id]&&(n.rewards=r[n.id])}return n}async calculateFarmingRewards(e){var s,a;let{frams:t}=this._sdk.sdkOptions,i=new R,{rewarder_manager_id:n,global_config_id:r}=T(t);e.forEach(c=>{i.moveCall({target:`${t.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[i.object(r),i.object(n),i.object(c.pool_id),i.pure.address(c.position_nft_id),i.object($)]})});let o={};try{let c=(a=(s=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:this.sdk.ClmmSDK.senderAddress}))==null?void 0:s.events)==null?void 0:a.filter(d=>N(d.type).name==="AccumulatedPositionRewardsEvent");if(c&&c.length>0)for(let d=0;d<c.length;d+=1){let{parsedJson:l}=c[d],h=[];l.rewards.contents.forEach(_=>{h.push({rewarder_type:N(_.key.name).full_address,rewarder_amount:_.value})}),o[l.wrapped_position_id]=h}}catch(c){console.log(c)}return o}depositPayload(e,t){let{frams:i}=this.sdk.sdkOptions;t=t||new R;let{global_config_id:n,rewarder_manager_id:r}=T(i);return t.moveCall({target:`${i.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(n),t.object(r),t.object(e.pool_id),t.object(e.clmm_position_id),t.object($)]}),t}async withdrawPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{global_config_id:n,rewarder_manager_id:r}=T(i);return t=t||new R,t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},t),t.moveCall({target:`${i.published_at}::router::withdraw`,typeArguments:[],arguments:[t.object(n),t.object(r),t.object(e.pool_id),t.object(e.position_nft_id),t.object($)]}),t}async batchHarvestPayload(e,t){t=t||new R;for(let i of e)await this.harvestPayload(i,t);return t}async batchHarvestAndClmmFeePayload(e,t){if(!bt(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");let i=new R,n={},r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(let c of t)this.collectClmmFeeInternal(c,n,i,r),this.collectClmmRewardInternal(c,n,i,r);let{frams:o}=this.sdk.sdkOptions,{global_config_id:s,rewarder_manager_id:a}=T(o);for(let c of e){let d=await this.getFramsPool(c.pool_id,!1);if(d===void 0)throw Error(`not found ${c.pool_id}`);c.collect_fee&&this.collectFeeInternal(c,n,i,r),c.clmm_rewarder_types.length>0&&await this.collectRewardInternal(c,n,i,r),c.collect_frams_rewarder&&d.rewarders.forEach(l=>{i&&i.moveCall({target:`${o.published_at}::router::harvest`,typeArguments:[l.reward_coin],arguments:[i.object(s),i.object(a),i.object(c.pool_id),i.object(c.position_nft_id),i.object($)]})})}return Object.keys(n).forEach(c=>{let d=n[c],{originalSplitedCoin:l}=d;(d.isMintZeroCoin||l&&(l==null?void 0:l.$kind)==="GasCoin")&&W.buildTransferCoin(this._sdk.ClmmSDK,i,d.targetCoin,c,this._sdk.ClmmSDK.senderAddress)}),i}async collectRewardInternal(e,t,i,n){let r=[];e.clmm_rewarder_types.forEach(o=>{let s=Ae(o),a=t[o];a===void 0&&(a=W.buildCoinForAmount(i,n,BigInt(0),s,!1),t[s]=a),r.push(a.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,i)}collectFeeInternal(e,t,i,n){let{frams:r}=this.sdk.sdkOptions,{global_config_id:o}=T(r),{clmm_pool:s,integrate:a}=this.sdk.ClmmSDK.sdkOptions,c=T(s),d=Ae(e.coinTypeA),l=Ae(e.coinTypeB),h=t[d];h===void 0&&(h=W.buildCoinForAmount(i,n,BigInt(0),d,!1),t[d]=h);let _=t[l];_===void 0&&(_=W.buildCoinForAmount(i,n,BigInt(0),l,!1),t[l]=_),i.moveCall({target:`${a.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[i.object(o),i.object(c.global_config_id),i.object(e.clmm_pool_id),i.object(e.position_nft_id),h.targetCoin,_.targetCoin]})}collectClmmRewardInternal(e,t,i,n){let r=[];e.rewarder_coin_types.forEach(o=>{let s=Ae(o),a=t[o];a===void 0&&(a=W.buildCoinForAmount(i,n,BigInt(0),s,!1),t[s]=a),r.push(a.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,i,r)}collectClmmFeeInternal(e,t,i,n){if(e.collect_fee){let r=Ae(e.coinTypeA),o=Ae(e.coinTypeB),s=t[r];s===void 0&&(s=W.buildCoinForAmount(i,n,BigInt(0),r,!1),t[r]=s);let a=t[o];a===void 0&&(a=W.buildCoinForAmount(i,n,BigInt(0),o,!1),t[o]=a),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},i,s.targetCoin,a.targetCoin)}}async harvestPayload(e,t){let{frams:i}=this.sdk.sdkOptions;t=t||new R;let n=await this.getFramsPool(e.pool_id,!1);if(n===void 0)throw Error(`not found ${e.pool_id}`);let{global_config_id:r,rewarder_manager_id:o}=T(i);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){let s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,s)}return n.rewarders.forEach(s=>{t&&t.moveCall({target:`${i.published_at}::router::harvest`,typeArguments:[s.reward_coin],arguments:[t.object(r),t.object(o),t.object(e.pool_id),t.object(e.position_nft_id),t.object($)]})}),t}async claimFeeAndClmmReward(e){let t=new R,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,i),t}async openPositionAddLiquidityStakePaylod(e){let t=new R,{clmm_pool:i,integrate:n}=this._sdk.ClmmSDK.sdkOptions,r=T(i),o=t.moveCall({target:`${i.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(e.clmm_pool_id),t.pure.u32(Number(Ct(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(Ct(BigInt(e.tick_upper)).toString()))]}),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=W.buildCoinForAmount(t,s,BigInt(e.amount_a),e.coinTypeA,!1),c=W.buildCoinForAmount(t,s,BigInt(e.amount_b),e.coinTypeB,!1);t.moveCall({target:`${n.published_at}::${Oi}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(e.clmm_pool_id),o,a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object($)]});let{frams:d}=this.sdk.sdkOptions,{global_config_id:l,rewarder_manager_id:h}=T(d);return t.moveCall({target:`${d.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(l),t.object(h),t.object(e.pool_id),o,t.object($)]}),t}async addLiquidityPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;let r=T(i),o=T(n),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=W.buildCoinForAmount(t,s,BigInt(e.amount_limit_a),e.coinTypeA,!1),c=W.buildCoinForAmount(t,s,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){let d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${i.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_limit_a),t.pure.u64(e.amount_limit_b),t.pure.u128(e.delta_liquidity),t.object($)]}),t}async addLiquidityFixCoinPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;let r=T(i),o=T(n),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=W.buildCoinForAmount(t,s,BigInt(e.amount_a),e.coinTypeA,!1),c=W.buildCoinForAmount(t,s,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){let d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${i.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object($)]}),t}async removeLiquidityPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;let r=T(i),o=T(n);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.clmm_rewarder_types.length>0){let s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},t,s)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");t.moveCall({target:`${i.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object($)]})}else t.moveCall({target:`${i.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object($)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return t}async buildCollectRewarderAndFeeParams(e,t,i,n,r){n===void 0&&(n=[...i]),r===void 0&&(r=[...i]);let o=Ae(e.coinTypeA),s=Ae(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},t);let a=[];return e.clmm_rewarder_types.forEach(c=>{switch(Ae(c)){case o:a.push(W.buildCoinForAmount(t,n,BigInt(0),c,!1).targetCoin);break;case s:a.push(W.buildCoinForAmount(t,r,BigInt(0),c,!1).targetCoin);break;default:a.push(W.buildCoinForAmount(t,i,BigInt(0),c,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:a},t),t}collectFeePayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;let r=T(i),o=T(n);return t.moveCall({target:`${i.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id)]}),t}async collectClmmRewardPayload(e,t){var a;let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;let r=e.reward_coins;if(e.clmm_rewarder_types.length>0&&r===void 0){r=[];let c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(d=>{r.push(W.buildCoinForAmount(t,c,BigInt(0),d,!1).targetCoin)})}let o=T(i),s=T(n);return(a=e.clmm_rewarder_types)==null||a.forEach((c,d)=>{t&&t.moveCall({target:`${i.published_at}::router::collect_clmm_reward`,typeArguments:[c,e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(s.global_vault_id),r[d],t.object($)]})}),t}async collectClmmRewardNoSendPayload(e,t){var c;let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n,integrate:r}=this.sdk.ClmmSDK.sdkOptions,o=e.reward_coins;if(e.clmm_rewarder_types.length>0&&o===void 0){o=[];let d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(l=>{o.push(W.buildCoinForAmount(t,d,BigInt(0),l,!1).targetCoin)})}let s=T(i),a=T(n);return(c=e.clmm_rewarder_types)==null||c.forEach((d,l)=>{t&&t.moveCall({target:`${r.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[d,e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(a.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(a.global_vault_id),o[l],t.object($)]})}),t}async getFrarmsConfigs(){let{package_id:e}=this._sdk.sdkOptions.frams,t={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(i.length>0){let r=i[0].parsedJson;t.global_config_id=r.global_config_id,t.admin_cap_id=r.admin_cap_id}let n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(n.length>0){let r=n[0].parsedJson;t.rewarder_manager_id=r.id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rewarder_manager_id,options:{showContent:!0}});t.rewarder_manager_handle=o.data.content.fields.rewarders.fields.id.id}return t}updateCache(e,t,i=z){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Va=class{static buildDcaOrderList(e){let{parsedJson:t}=e;if(t&&t.order_id)return{created_at:t.created_at,cycle_count:t.cycle_count,cycle_frequency:t.cycle_frequency,in_coin:N(t.in_coin.name).full_address,in_deposited:t.in_deposited,order_id:t.order_id,out_coin:N(t.out_coin.name).full_address,per_cycle_in_amount_limit:t.per_cycle_in_amount_limit,per_cycle_max_out_amount:t.per_cycle_max_out_amount,per_cycle_min_out_amount:t.per_cycle_min_out_amount}}static buildDcaGlobalConfig(e){if(e&&e.id.id)return{min_cycle_count:e.min_cycle_count,min_cycle_frequency:e.min_cycle_frequency,whitelist_mode:e.whitelist_mode}}static buildOrderHistoryList(e,t){let{events:i}=e,n=[];return i&&i.forEach(r=>{let o=N(r.type).name;if(t.includes(o)){let s={digest:e.digest,type:o,timestampMs:e.timestampMs,parsedJson:r.parsedJson};n.push(s)}}),n}},T_=class{constructor(e){L(this,"_sdk");L(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async dcaOpenOrderPayload(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i,indexer_id:n}=T(t),r=new R,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.in_coin_type),s=W.buildCoinForAmount(r,o,BigInt(e.in_coin_amount),e.in_coin_type,!1,!0);return r.moveCall({target:`${t.published_at}::order::open_order`,typeArguments:[e.in_coin_type,e.out_coin_type],arguments:[r.object(i),s.targetCoin,r.pure.u64(e.cycle_frequency),r.pure.u64(e.cycle_count),r.pure.u64(e.per_cycle_min_out_amount),r.pure.u64(e.per_cycle_max_out_amount),r.pure.u64(e.per_cycle_in_amount_limit),r.pure.u64(e.fee_rate),r.pure.u64(e.timestamp),r.pure.string(e.signature),r.object($),r.object(n)]}),r}dcaCloseOrderPayload(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i,indexer_id:n}=T(t),r=new R;return e.forEach(o=>{let s=r.moveCall({target:`${t.published_at}::order::cancle_order`,typeArguments:[o.in_coin_type,o.out_coin_type],arguments:[r.object(i),r.object(o.order_id),r.object(n),r.object($)]});r.transferObjects([s[0],s[1]],r.pure.address(this._sdk.getVerifySenderAddress()))}),r}async getDcaOrders(e){let t={data:[],hasNextPage:!1},{dca:i}=this._sdk.sdkOptions,{user_indexer_id:n}=T(i);try{let r,o=this.getCache(`${e}_dca_table_id`);if(o)r=o;else{let l=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}});r=ee(l).value.fields.id.id,this.updateCache(`${e}_dca_table_id`,r)}let s=null,a=50,c=[];for(;;){let l=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:r,cursor:s,limit:a});if(l.data.forEach(h=>{c.push(h.name.value)}),s=l.nextCursor,s===null||l.data.length<a)break}let d=[];for(let l=0;l<c.length;l++){let h=await this._sdk.ClmmSDK.fullClient.getObject({id:c[l],options:{showType:!0,showContent:!0}}),_=N(h.data.type),y=_.type_arguments[0],k=_.type_arguments[1];d.push({in_coin_type:y,out_coin_type:k,...h.data.content.fields,id:h.data.content.fields.id.id,version:h.data.version})}return t.data=d,t}catch{return t}}async withdraw(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i}=T(t),n=new R,r=n.moveCall({target:`${t.published_at}::order::withdraw`,typeArguments:[e.in_coin_type,e.out_coin_type],arguments:[n.object(i),n.object(e.order_id),n.object($)]});return n.transferObjects([r[0]],n.pure.address(this._sdk.getVerifySenderAddress())),n}async getDcaOrdersMakeDeal(e){let t=this.getCache(`${e}_tx`),i=[],n=null,r=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.queryTransactionBlocks({filter:{ChangedObject:e},limit:r});if(a.data.forEach(c=>{i.push(c.digest)}),n=a.nextCursor,n===null||a.data.length<r)break}if(this.updateCache(`${e}_tx`,i),t&&t.length===i.length)return this.getCache(`${e}_history_list`);let o=await this._sdk.ClmmSDK.fullClient.multiGetTransactionBlocks({digests:i,options:{showInput:!0,showEffects:!0,showEvents:!0}}),s=[];return o.forEach(a=>{s.push(...Va.buildOrderHistoryList(a,["MakeDealEvent"]))}),this.updateCache(`${e}_history_list`,s),s}async getDcaCoinWhiteList(e){let{in_coin_whitelist_id:t,out_coin_whitelist_id:i}=T(this._sdk.sdkOptions.dca),n=[],r=[];if(e===1||e===3){let o=null,s=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:t,cursor:o,limit:s});if(a.data.forEach(c=>{n.push(N(c.name.value.name).full_address)}),o=a.nextCursor,o===null||a.data.length<s)break}}if(e===2||e===3){let o=null,s=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:i,cursor:o,limit:s});if(a.data.forEach(c=>{r.push(N(c.name.value.name).full_address)}),o=a.nextCursor,o===null||a.data.length<s)break}}return{inCoinList:n,outCoinList:r}}async getDcaGlobalConfig(){let{global_config_id:e}=T(this._sdk.sdkOptions.dca),t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});return Va.buildDcaGlobalConfig(t.data.content.fields)}async getDcaConfigs(){var r;let{package_id:e}=this._sdk.sdkOptions.dca,t={admin_cap_id:"",global_config_id:"",indexer_id:"",user_indexer_id:"",in_coin_whitelist_id:"",out_coin_whitelist_id:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`})).data,n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::order::InitEvent`})).data;if(i&&i.length>0){let{parsedJson:o}=i[0];t.admin_cap_id=o.admin_cap_id,t.global_config_id=o.global_config_id}if(n&&n.length>0){let{parsedJson:o}=n[0];t.indexer_id=o.indexer_id;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:o.indexer_id,options:{showType:!0,showContent:!0}});t.user_indexer_id=(r=s.data)==null?void 0:r.content.fields.user_orders.fields.id.id}if(t.global_config_id){let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showType:!0,showContent:!0}});t.in_coin_whitelist_id=o.data.content.fields.in_coin_whitelist.fields.id.id,t.out_coin_whitelist_id=o.data.content.fields.out_coin_whitelist.fields.id.id}return t}updateCache(e,t,i=z){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},O_=class{constructor(e,t){L(this,"_cache",{});L(this,"_sdkOptions");L(this,"_launchpad");L(this,"_ido");L(this,"_xcetusModule");L(this,"_xtokenModule");L(this,"_boosterModule");L(this,"_makerModule");L(this,"_clmmSDK");L(this,"_liquidityStrategy");L(this,"_vaults");L(this,"_limitOrder");L(this,"_farmsModule");L(this,"_dcaModule");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new s_(this),this._ido=new v_(this),this._xcetusModule=new c_(this),this._xtokenModule=new k_(this),this._boosterModule=new r_(this),this._makerModule=new a_(this),this._vaults=new x_(this),this._limitOrder=new A_(this),this._farmsModule=new S_(this),this._dcaModule=new T_(this),this._liquidityStrategy=new C_(this),Is(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}get Dca(){return this._dcaModule}getVerifySenderAddress(){let{senderAddress:e}=this.ClmmSDK;if(e.length===0||!ni(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,t,i=z){let n=this._cache[e];n?(n.overdueTime=_e(i),n.value=t):n=new At(t,_e(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Cm=O_;export{gm as $,wm as A,Et as B,n_ as C,$_ as D,Yn as E,O_ as F,Qn as G,gt as H,K_ as I,H_ as J,D_ as K,Ai as L,ns as M,Jd as N,or as O,kl as P,ia as Q,wl as R,oc as S,G as T,uu as U,ni as V,be as W,R as X,o0 as Y,bm as Z,Y_ as _,Cm as a,da as a$,ym as a0,W as a1,sn as a2,nr as a3,Ae as a4,fm as a5,Pu as a6,ds as a7,pm as a8,um as a9,ah as aA,sh as aB,kf as aC,qo as aD,cf as aE,W_ as aF,Ni as aG,T as aH,gn as aI,Q_ as aJ,Z_ as aK,M0 as aL,Is as aM,_e as aN,At as aO,z as aP,ri as aQ,he as aR,To as aS,$t as aT,ht as aU,ee as aV,dn as aW,xr as aX,Rl as aY,tm as aZ,nn as a_,yc as aa,hm as ab,_m as ac,mm as ad,ju as ae,ai as af,lc as ag,lm as ah,vn as ai,ua as aj,Au as ak,de as al,Iu as am,mc as an,Tt as ao,Nn as ap,Jc as aq,ne as ar,Ht as as,Pi as at,Oe as au,Kn as av,gi as aw,U as ax,ue as ay,ps as az,J_ as b,Or as b0,im as b1,am as b2,xn as b3,Bl as b4,cm as b5,nm as b6,Pt as b7,dm as b8,sm as b9,rm as ba,om as bb,E_ as c,ii as d,N as e,pr as f,em as g,hr as h,N_ as i,X_ as j,Sl as k,U_ as l,b as m,B_ as n,q_ as o,g as p,V_ as q,z_ as r,km as s,G_ as t,M_ as u,R_ as v,sc as w,F_ as x,vm as y,L_ as z};
