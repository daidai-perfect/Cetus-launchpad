import{_ as an,a as sn}from"./token-warning-modal.07c3e5e1.js";import{_ as tn}from"./assets-card.2ac90db9.js";import{u as Be,a as So,c as Ae,D as c,s as le,e as q,k as Se,v as wo,p as be,f as ln,b as un,d as ye,h as Me}from"./pool.ee2bac0f.js";import{e as Oe,a as We,a3 as ko,a4 as Io,r as f,m as I,D as Y,q as _e,o as r,f as C,h as o,c as E,x as j,t as z,j as x,v as u,z as pe,u as X,J as $o,S as No,p as Fe,k as Re,a5 as rn,M as To,K as Po,w as ce,F as eo,s as yo,i as we,B as Bo,b as Ao,l as dn,y as cn,C as mn,a8 as Ee,L as vn}from"./entry.cf617c8c.js";/* empty css              *//* empty css              */import{u as Xe,_ as qe}from"./index.e9028859.js";import"./decimal.08948704.js";import{i as fe}from"./import-icon.de3e6c66.js";import{a as pn,_ as fn}from"./network-tips.e2de34e5.js";import{_ as gn}from"./coin-select.e23c373c.js";/* empty css              */import{u as Cn}from"./swapRouter.ad76104e.js";import{_ as hn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./icon-selected_3x.09e9a6f0.js";import"./token-warning.9c1826f7.js";/* empty css              */import"./img-no-Positions_2x.53df3115.js";const bn=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const wn=We({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const v=ko(Io,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),y=f(!1),A=Xe(),N=I(()=>A),U=I(()=>N.value.slippage),p=I(()=>N.isShowRouterModal);Y(()=>e,k=>{console.log(k,"==>newValue")},{immediate:!0,deep:!0});const L=Be(),T=I(()=>L),R=So("Sui"),P=f({}),H=f({}),Q=f({});Y(()=>[e.suiPreSwapdata,T.value.tokensObj],async([k,m])=>{k&&!Ae(k)&&m&&!Ae(m)&&(k.coinTypeA&&(P.value=m[k.coinTypeA]||(await R.getTokenListByCoinType([k.coinTypeA]))[0]),k.coinTypeB&&(H.value=m[k.coinTypeB]||(await R.getTokenListByCoinType([k.coinTypeB]))[0]),k.coinTypeC&&(Q.value=m[k.coinTypeC]||(await R.getTokenListByCoinType([k.coinTypeC]))[0]))},{immediate:!0});const J=f(0),Z=f(0);return Y(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,U.value],([k,m,ie,M,K,s])=>{if(k&&m&&ie&&M&&s)if(K){const l=new c(m).mul(new c(s/100));Z.value=new c(m).sub(l).toString()}else{const l=new c(k).mul(new c(s/100));J.value=new c(k).sub(l).toString()}},{immediate:!0}),{sFixD:le,getCoinIcon:k=>{var m;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((m=T.value.tokensObj[k==null?void 0:k.address])==null?void 0:m.logo_url)||(N.theme==="default"?fe("/image/coins/unknown.png"):fe("/image/coins/sui-unknown.png"))},indicator:v,rateChange:y,slippage:U,isShowRouterModal:p,indexStore:A,coinTypeA:P,coinTypeB:H,coinTypeC:Q,maximumSold:J,minimumReceived:Z,addCommom:q}}}),ke=e=>(Fe("data-v-fd74e509"),e=e(),Re(),e),yn={key:0,class:"swap-info"},An={class:"loading-swap"},Sn={key:1,class:"swap-rate"},kn={key:0},In={key:0},$n={key:1},Nn={key:0},Tn=ke(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Pn=ke(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Bn=[Tn,Pn],On={key:2},_n={class:"trade-info"},Fn={class:"trade-block"},Rn=ke(()=>o("div",{class:"lebal"},"Price Impact",-1)),Un={key:0,class:"icon","aria-hidden":"true"},Ln=ke(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),jn=[Ln],Dn={class:"trade-block"},Mn={class:"lebal"},En={key:0,class:"text"},qn={class:"trade-block"},Wn=ke(()=>o("div",{class:"lebal"},"Fee",-1)),Xn={key:0,class:"text"},Qn={key:0,class:"trade-block"},Jn=ke(()=>o("div",{class:"lebal"},"Route",-1)),Zn={key:0,class:"text"},zn={key:0},Hn={key:1},Kn={key:2},Yn=ke(()=>o("img",{src:bn,alt:""},null,-1));function Gn(e,v,y,A,N,U){const p=$o,L=No,T=_e("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(r(),C("div",yn,[o("div",An,[e.swapLoading||e.swapRouterLoading?(r(),E(p,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):j("",!0),e.swapLoading?e.swapLoading?(r(),C("span",On,"Best route and price")):j("",!0):(r(),C("div",Sn,[e.rateChange?(r(),C("span",$n,[e.fromCoinAmount&&e.toCoinAmount?(r(),C("span",Nn,[z(o("img",null,null,512),[[T,e.getCoinIcon(e.toCoin)]]),x(" 1 "+u(e.toCoin.symbol)+" ≈ ",1),z(o("img",null,null,512),[[T,e.getCoinIcon(e.fromCoin)]]),x(u(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+u(e.fromCoin.symbol),1)])):(r(),E(p,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(r(),C("span",kn,[z(o("img",null,null,512),[[T,e.getCoinIcon(e.fromCoin)]]),x(" 1 "+u(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(r(),C("span",In,[z(o("img",null,null,512),[[T,e.getCoinIcon(e.toCoin)]]),x(u(e.oneToAmount==1/0?0:e.oneToAmount)+" "+u(e.toCoin.symbol),1)])):(r(),E(p,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:v[0]||(v[0]=R=>e.rateChange=!e.rateChange)},Bn)]))]),o("div",_n,[o("div",Fn,[Rn,e.swapRouterLoading?(r(),E(L,{key:1,paragraph:!1,active:""})):(r(),C("div",{key:0,class:pe(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[x(u(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),C("svg",Un,jn)):j("",!0)],2))]),o("div",Dn,[o("div",Mn,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(r(),E(L,{key:1,paragraph:!1,active:""})):(r(),C("div",En,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:X(q))(("sFixD"in e?e.sFixD:X(le))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:X(q))(("sFixD"in e?e.sFixD:X(le))(e.maximumSold,e.fromCoin.decimals)))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",qn,[Wn,e.swapRouterLoading?(r(),E(L,{key:1,paragraph:!1,active:""})):(r(),C("div",Xn,u(e.suiSwapFee),1))]),e.insufficientLiquidity?j("",!0):(r(),C("div",Qn,[Jn,e.swapRouterLoading?(r(),E(L,{key:1,paragraph:!1,active:""})):(r(),C("div",{key:0,class:"text",onClick:v[1]||(v[1]=R=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[e.swapRouterLoading?j("",!0):(r(),C("div",Zn,[e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeA?(r(),C("span",zn,u(e.coinTypeA.symbol)+" "+u(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?"> ":""),1)):j("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?(r(),C("span",Hn,u(e.coinTypeB.symbol)+" "+u(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?"> ":""),1)):j("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?(r(),C("span",Kn,u(e.coinTypeC.symbol),1)):j("",!0)])),Yn]))]))])])):j("",!0)}const Vn=Oe(wn,[["render",Gn],["__scopeId","data-v-fd74e509"]]);async function xn(e){const{prices:v}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}});return v}const ea={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""}},setup(e,v){const{$echarts:y}=rn();let A=null,N;const U=f(!0),p=(s,l,O)=>{N={xAxis:{type:"category",boundaryGap:!1,show:!1,data:l},yAxis:{type:"value",show:!1,min:function($){return $.min-$.min*.1},max:function($){return $.max+$.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:J.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function($){return`<div class="chart-tip">
              <div>${$&&$[0]&&$[0].name}</div>
              <div>$${Se($&&$[0]&&$[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:J.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:J.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:s,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:J.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},N&&A.clear(),N&&A.setOption(N,!0),A.resize(),U.value=!1},L=Be(),T=I(()=>L),R=f(""),P=f(""),H=async s=>{var V,he;const l=[],O=[],$=await xn(s);R.value=$&&$.length>1&&($[$.length-1][1]-$[0][1])/$[0][1]*100,P.value=$&&$.length>1&&$[$.length-1][1],$.forEach(B=>{l.push(B[1]);const W=wo(B[0],"MD"),t=wo(B[0],"HM");O.push(W+" "+t)});let Ie=document.getElementById(`main${(V=e.coin)==null?void 0:V.name}`);A=y.init(Ie),p(l,O,(he=e.coin)==null?void 0:he.name)},Q=Xe(),J=I(()=>Q),Z=I(()=>J.value.chainName),ee=I(()=>qe[Z.value]);Y(()=>e.id,(s,l)=>{console.log(s,l,"===>oldValue"),console.log(!U.value,"!isFirst.value"),s&&(R.value="",P.value="",setTimeout(()=>{H(s)},1e3))},{immediate:!0});const k=f(""),m=f(""),ie=f(""),M=f("");Y(()=>[T.value.tokensObj,e.coin],([s,l])=>{var O,$;s&&l&&s[l.address]&&(console.log(s[l.address],"===>newValue[coin.address]"),m.value=((O=s[l.address])==null?void 0:O.labels)&&(($=s[l.address])==null?void 0:$.labels[0]),k.value=s[l.address].name,ie.value=s[l.address].symbol,M.value=s[l.address].address)},{immediate:!0,deep:!0}),Y(()=>e.refresh,s=>{s&&H(e.id)});const K=I(()=>J.value.theme);return console.log(e.coin.address=="0x2::sui::SUI","0x2::sui::SUI"),{theme:K,store:Q,importIcon:fe,fixD:Se,config:ee,price_rate_24h:R,nowPrice:P,coinName:k,coinLabels:m,coinSymbol:ie,address:M}}};const oa=e=>(Fe("data-v-2d274d28"),e=e(),Re(),e),na={class:"token-info"},aa={class:"token-info-padding"},sa={class:"token-info-header"},ta={class:"left"},la=["onerror"],ia={class:"name"},ua={class:"desc"},ra={class:"right"},da={class:"price"},ca={class:"token-info-footer"},ma={class:"left"},va={class:"address"},pa={key:0,class:"pc-address"},fa={key:1,class:"pc-address"},ga={class:"h5-address"},Ca=oa(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),ha=[Ca],ba={class:"right"},wa=["id"];function ya(e,v,y,A,N,U){var L;const p=_e("image");return r(),C("div",na,[o("div",aa,[o("div",sa,[o("div",ta,[z(o("img",{onerror:A.theme=="default"?A.importIcon("/image/coins/unknown.png"):A.importIcon("/image/coins/sui-unknown.png")},null,8,la),[[p,y.coin.logoURI||A.importIcon(`/image/coins/${y.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",ia,u(A.coinSymbol),1),o("div",ua,[o("span",null,u(A.coinName)+" "+u(A.coinLabels?`(${A.coinLabels})`:""),1)])])]),o("div",ra,[o("div",da,"$"+u(A.fixD(A.nowPrice,2)),1),A.price_rate_24h?(r(),C("div",{key:0,class:pe(A.price_rate_24h>0?"increase up":A.price_rate_24h<0?"increase down":"increase up")},u(A.price_rate_24h>0?`+ ${A.fixD(A.price_rate_24h,2)}`:A.price_rate_24h<0?+`${A.fixD(A.price_rate_24h,2)}`:`+${A.fixD(A.price_rate_24h,2)}`)+"% ",3)):j("",!0)])]),o("div",ca,[o("div",ma,[o("div",va,[y.coin&&A.address!=="0x2::sui::SUI"?(r(),C("span",pa,u(y.coin&&y.coin.address.substr(0,13))+" ... "+u(y.coin&&y.coin.address.substr(y.coin.address.length-13,13)),1)):(r(),C("span",fa,u(y.coin&&y.coin.address),1)),o("span",ga,u(y.coin&&y.coin.address.substr(0,4))+" ... "+u(y.coin&&y.coin.address.substr(y.coin.address.length-4,4)),1),(r(),C("svg",{class:"icon","aria-hidden":"true",onClick:v[0]||(v[0]=T=>A.store.copy(y.coin&&y.coin.address))},ha))])]),o("div",ba,[o("div",{id:`main${(L=y.coin)==null?void 0:L.name}`,class:"main"},null,8,wa)])])])])}const Aa=Oe(ea,[["render",ya],["__scopeId","data-v-2d274d28"]]);const Sa=We({components:{Modal:To},props:{routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},routerTotalAmounts:{type:String,default:""}},setup(e){const v=Be(),y=I(()=>v),A=f([]);return Y(()=>[e.routerPool,y.value.routerPoolConfigObj,e.routerTotalAmounts,e.fromCoin,e.toCoin],([N,U,p,L,T])=>{if(console.log(e,"props=====>100"),N&&N.length>0&&U&&!Ae(U)&&p){const R=[];N.forEach(P=>{console.log(p,"===>routerTotalAmounts"),console.log(P,"ele.amountIn===>");const H="100",Q=P.amountIn.toString(),J=be(P.amountOut.toString(),T.decimals),Z=P.poolAddress.map((ee,k)=>{const m=U&&U[ee];return console.log(P,"ele===>118"),{...m}});R.push({percent:H,...P,amountIn:Q,amountOut:J,poolAddress:Z})}),console.log(R,"result===>"),A.value=R}},{immediate:!0}),I(()=>{var N,U;return(U=(N=y.value)==null?void 0:N.poolInfo)==null?void 0:U.needReverse}),{addCommom:q,routerStep:A}}}),Qe=e=>(Fe("data-v-0c1c23b0"),e=e(),Re(),e),ka=Qe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ia={class:"route-top"},$a={class:"token-a"},Na={alt:""},Ta={class:"token-num"},Pa={class:"token-symbol"},Ba={class:"token-b"},Oa={class:"token-num"},_a={class:"token-symbol"},Fa={alt:""},Ra={class:"route-bottom"},Ua=Qe(()=>o("div",{class:"left-round"},null,-1)),La=Qe(()=>o("div",{class:"right-round"},null,-1)),ja={class:"percent"},Da={class:"pool-info"},Ma={class:"token-a-img",alt:""},Ea={class:"token-b-img",alt:""},qa={key:0,class:"icon","aria-hidden":"true"},Wa=Qe(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Xa=[Wa];function Qa(e,v,y,A,N,U){const p=Po("Modal"),L=_e("image");return r(),E(p,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:v[0]||(v[0]=T=>e.$emit("onClose"))},{closeIcon:ce(()=>[ka]),default:ce(()=>{var T,R,P,H;return[o("div",Ia,[o("div",$a,[z(o("img",Na,null,512),[[L,(T=e.fromCoin)==null?void 0:T.logo_url]]),o("span",Ta,u(("addCommom"in e?e.addCommom:X(q))(e.fromCoinAmount)),1),o("span",Pa,u((R=e.fromCoin)==null?void 0:R.symbol),1)]),o("div",Ba,[o("span",Oa,u(("addCommom"in e?e.addCommom:X(q))(e.toCoinAmount)),1),o("span",_a,u((P=e.toCoin)==null?void 0:P.symbol),1),z(o("img",Fa,null,512),[[L,(H=e.toCoin)==null?void 0:H.logo_url]])])]),o("div",Ra,[Ua,La,(r(!0),C(eo,null,yo(e.routerStep,(Q,J)=>(r(),C("div",{key:Q,class:pe(["route-path",J!==0?"route-path-active":""])},[o("div",ja,[o("span",null,u(Q.percent)+"%",1),o("span",null,u(("addCommom"in e?e.addCommom:X(q))(Q.amountOut))+" "+u(e.toCoin.symbol),1)]),(r(!0),C(eo,null,yo(Q.poolAddress,(Z,ee)=>(r(),C("div",{key:ee,class:"pool-info-box"},[o("div",Da,[z(o("img",Ma,null,512),[[L,Z.needReverse?Z.coinB.logo_url:Z.coinA.logo_url]]),z(o("img",Ea,null,512),[[L,Z.needReverse?Z.coinA.logo_url:Z.coinB.logo_url]]),o("span",null,u(Z.fee*100)+"%",1)]),ee!==Q.poolAddress.length-1?(r(),C("svg",qa,Xa)):j("",!0)]))),128))],2))),128))])]}),_:1})}const Ja=Oe(Sa,[["render",Qa],["__scopeId","data-v-0c1c23b0"]]),Za=We({components:{Modal:To},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"998041.711793"},slippage:{type:String,default:""},impact:{type:Number,required:!0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!0},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!0},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""}},setup(e,v){const y=Be(),A=I(()=>y),N=Xe(),U=I(()=>N),p=P=>{var H;return(P==null?void 0:P.logoURI)||(P==null?void 0:P.logo_url)||((H=A.value.tokensObj[P==null?void 0:P.address])==null?void 0:H.logo_url)||(U.value.theme==="default"?fe("/image/coins/unknown.png"):fe("/image/coins/sui-unknown.png"))},L=f(!1),T=I(()=>U.value.chainName),R=async()=>{v.emit("to-swap")};return console.log(e,"swapLoading===>"),{getCoinIcon:p,addCommom:q,sFixD:le,rateChange:L,chainName:T,clickNextBtn:R}}});const ge=e=>(Fe("data-v-a8ec2ef8"),e=e(),Re(),e),za=ge(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ha={class:"new-swap-contnet"},Ka={class:"coin-info"},Ya={class:"from-coin-info"},Ga={class:"left"},Va={class:"coin-amount"},xa={class:"coin-symbol"},es={class:"right"},os={class:"to-coin-info"},ns={class:"left"},as={class:"coin-amount"},ss={class:"coin-symbol"},ts={class:"right"},ls=ge(()=>o("div",{class:"to-swap-logo"},null,-1)),is={class:"coin-rate"},us={key:0},rs={class:"left"},ds=ge(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),cs=ge(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ms=[ds,cs],vs={key:1},ps={class:"left"},fs=ge(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),gs=ge(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Cs=[fs,gs],hs={class:"bottom"},bs={class:"induction"},ws={class:"item"},ys={class:"induction-text"},As={class:"induction-value"},Ss={class:"item"},ks={class:"induction-text"},Is={class:"induction-value"},$s={class:"item"},Ns={class:"induction-text"},Ts={key:0,class:"icon","aria-hidden":"true"},Ps=ge(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Bs=[Ps],Os={class:"item"},_s={class:"induction-text"},Fs={key:0,class:"induction-value"},Rs={key:1,class:"induction-value"},Us={key:0,class:"price-updated"},Ls=ge(()=>o("span",null,"Price updated",-1));function js(e,v,y,A,N,U){const p=Bo,L=Po("Modal"),T=_e("image");return r(),E(L,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:v[4]||(v[4]=R=>e.$emit("on-close"))},{closeIcon:ce(()=>[za]),default:ce(()=>[o("div",Ha,[o("div",Ka,[o("div",Ya,[o("div",Ga,[o("div",Va,u(e.fromCoinAmount&&("addCommom"in e?e.addCommom:X(q))(e.fromCoinAmount)),1),o("div",xa,u(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",es,[z(o("img",null,null,512),[[T,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",os,[o("div",ns,[o("div",as,u(e.toCoinAmount&&("addCommom"in e?e.addCommom:X(q))(e.toCoinAmount)),1),o("div",ss,u(e.toCoin&&e.toCoin.symbol),1)]),o("div",ts,[z(o("img",null,null,512),[[T,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),ls]),o("div",is,[e.rateChange?(r(),C("div",vs,[o("div",ps,[z(o("img",null,null,512),[[T,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+u(e.toCoin&&e.toCoin.symbol)+" ≈",1),z(o("img",null,null,512),[[T,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,u(e.oneFromAmount)+" "+u(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:v[1]||(v[1]=R=>e.rateChange=!e.rateChange)},Cs)])):(r(),C("div",us,[o("div",rs,[z(o("img",null,null,512),[[T,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+u(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),z(o("img",null,null,512),[[T,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,u(e.oneToAmount)+" "+u(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:v[0]||(v[0]=R=>e.rateChange=!e.rateChange)},ms)]))])]),o("div",hs,[o("div",bs,[o("div",ws,[o("div",ys,u(e.$t("modal.slippageTolerance")),1),o("div",As,u(e.slippage)+"%",1)]),o("div",Ss,[o("div",ks,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",Is,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:X(q))(("sFixD"in e?e.sFixD:X(le))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:X(q))(("sFixD"in e?e.sFixD:X(le))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",$s,[o("div",Ns,u(e.$t("common.priceImpact")),1),o("div",{class:pe(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[x(u(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),C("svg",Ts,Bs)):j("",!0)],2)]),o("div",Os,[o("div",_s,u(e.$t("common.fee")),1),e.chainName=="Aptos"?(r(),C("div",Fs,u(e.formatFee)+" "+u(e.fromCoin.symbol)+" ("+u(e.fee*100)+"%) ",1)):(r(),C("div",Rs,u(e.fee),1))])])])]),e.isShowAccept?(r(),C("div",Us,[Ls,we(p,{class:"accept-btn",loading:e.swapLoading,onClick:v[2]||(v[2]=R=>e.$emit("accept"))},{default:ce(()=>[x("Accept")]),_:1},8,["loading"])])):(r(),E(p,{key:1,class:"big-btn swap-confirm-btn",onClick:v[3]||(v[3]=R=>e.clickNextBtn())},{default:ce(()=>[x(u(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const Ds=Oe(Za,[["render",js],["__scopeId","data-v-a8ec2ef8"]]),Ms=We({setup(){const e=Ao(),v=ko(Io,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:y,locale:A}=dn(),N=Xe(),U=Be(),p=I(()=>U);let L=f(!1),T=f(!1),R=f(!1),P=f(!1),H=f(!1),Q=f(!1);const J=f("fromCoin"),Z=f(""),ee=f(""),k=f(!1),m=f(!0),ie=f(!1),M=f(!1),K=f(!1),s=f(""),l=f(""),O=f(20),$=f(0),Ie=f(null),V=f(!1),he=I(()=>N.slippage),B=I(()=>N.chainName),W=I(()=>B.value?So(B.value):{}),t=f(),d=f(),Je=I(()=>qe&&qe[B.value]&&qe[B.value].hasRouter),oo=I(()=>U.getPoolInfoSuccess),Oo=I(()=>{var n;return h.value&&((n=h.value)!=null&&n.is_pause)?"Pool Closed":!t.value||!d.value?y("modal.selectTokenModalTitle"):!Number(s.value)&&!Number(l.value)?y("button.enterAmount"):!Je.value&&!h.value&&oo.value?"Pool Not Found":Je.value&&Te.value?"No Available Route":(console.log(V.value,"===>insufficientLiquidity.value"),V.value?y("button.insufficientLiquidity"):Number(s.value)>Number(se.value)?y("button.insufficientBalance",{name:t.value.symbol}):y("button.swap"))}),_o=n=>{var i,a,g,b;J.value=n,n==="fromCoin"?(Z.value=((i=d.value)==null?void 0:i.address)||"",ee.value=((a=t.value)==null?void 0:a.address)||""):(Z.value=((g=t.value)==null?void 0:g.address)||"",ee.value=((b=d.value)==null?void 0:b.address)||""),k.value=!0},Ze=f({}),ze=f({}),Fo=n=>{J.value==="fromCoin"?(Ze.value=n,Ke(n)):(ze.value=n,Ke(n))},Ro=n=>{n==="fromCoin"?(m.value=!0,B.value==="Aptos"?s.value=se.value>0?t.value.symbol=="APT"?new c(Number(se.value)).sub(new c(.1)).lt(new c(0))?"0":new c(Number(se.value)).sub(new c(.1)).toString():String(se.value):"":s.value=se.value>0?t.value.symbol=="SUI"?new c(Number(se.value)).sub(new c(.05)).lt(new c(0))?"0":new c(Number(se.value)).sub(new c(.05)).toString():String(se.value):""):(m.value=!1,B.value==="Aptos"?l.value=te.value>0?d.value.symbol=="APT"?new c(Number(te.value)).sub(new c(.1)).lt(new c(0))?"0":new c(Number(te.value)).sub(new c(.1)).toString():String(te.value):"":l.value=te.value>0?d.value.symbol=="SUI"?new c(Number(te.value)).sub(new c(.05)).lt(new c(0))?"0":new c(Number(te.value)).sub(new c(.05)).toString():String(te.value):"")},Uo=n=>{n==="fromCoin"?(m.value=!0,s.value=se.value>0?le(new c(Number(se.value)).div(2).toString(),t.value.decimals).toString():""):(m.value=!1,l.value=te.value>0?le(new c(Number(te.value)).div(2).toString(),d.value.decimals).toString():"")};cn(()=>{ao()}),mn(()=>{clearInterval(Ie.value)});const He=I(()=>N),no=()=>{!h.value&&!Je.value||(clearInterval(Ie.value),U.setPoolConfigList(He.value.chainName,He.value.filterCoinsObj),$.value=0,T.value=!0,h.value&&U.updateCurrentPools(h.value.poolAddress,B.value),Ne(m.value?s.value:l.value),ae.value.address&&W.value.getAccount(ae.value.address),N.getStatsData(B.value,He.value.filterCoinsObj),setTimeout(()=>{T.value=!1,ao()},1e3))},ao=()=>{Ie.value=setInterval(()=>{T.value=!1,ie.value||$.value<O.value&&($.value+=1,$.value===O.value&&(B.value=="Aptos"?h.value&&h.value.poolAddress&&U.updateCurrentPools(h.value.poolAddress,B.value):Q.value||no(),$.value=0,T.value=!0))},1e3)};Y(m,Ee((n,i)=>{m.value=n},500));const $e=f(!1);Y(s,Ee((n,i)=>{n&&n!==0&&m.value&&Ne(n),n==""&&m.value&&(l.value="")},500)),Y(l,Ee((n,i)=>{n&&n!==0&&!m.value&&Ne(n),n==""&&!m.value&&(s.value="")},500));const ue=f(1e-4),Ue=async n=>{let i=n;if(console.log(i,"poolInfo====>"),B.value==="Aptos"&&!i.current_sqrt_price&&s.value&&l.value){const a=await W.value.getPools([i.address]);a&&a[0]&&(i={...n,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(i.current_sqrt_price&&s.value&&l.value){const g=(t.value.address===i.coinA.address&&d.value.address===i.coinB.address?0:1)==0,b=new c(s.value),w=new c(l.value),_=b.sub(b.mul(new c(i.fee)));console.log("getImpact###poolInfo.fee####",i.fee),console.log("getImpact###fAmount####",b.toString()),console.log("getImpact###tAmount####",w.toString()),console.log("getImpact###f####",_.toString());const D=w.div(_);console.log("getImpact####rates####",D.toString());const S=W.value.getPriceImpactPct(i,D.toString(),g);return console.log(S,"t===>"),S}return"--"},so=f(0),to=f(0),lo=f(),ne=f({}),Lo=async n=>{if(h.value&&(console.log(Number(s.value)==0,"===>Number(fromCoinAmount.value)==0"),!(m.value&&Number(s.value)==0)&&!(!m.value&&Number(l.value)==0)))if(t.value&&d.value&&(s.value||l.value)){M.value=!0,K.value=!0,V.value=!1;const i=t.value.address===h.value.coinA.address&&d.value.address===h.value.coinB.address?0:1;console.log(h.value,"poolInfo=====>451"),console.log(m.value?s.value:l.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(i,"===>direct");try{let a=await W.value.preSwap({pool:h.value,a2b:i==0,byAmountIn:m.value,amount:m.value?s.value:l.value});console.log(a,"preSwapRespreSwapRes"),V.value=a==null?void 0:a.isExceed,lo.value=a==null?void 0:a.estimatedFeeAmount,m.value?(l.value=a.estimatedAmountOut,de.value=(Number(a.estimatedAmountOut)/n).toString(),re.value=(n/Number(a.estimatedAmountOut)).toString()):(s.value=a.estimatedAmountIn,de.value=(n/Number(a.estimatedAmountIn)).toString(),re.value=(Number(a.estimatedAmountIn)/n).toString()),console.log(re.value,de.value,"===>831"),so.value=new c(l.value).div(s.value).toString(),to.value=new c(s.value).div(l.value).toString(),console.log("0524###getAmount###toAddLiquidiPoolInfo.value ###",ne.value),console.log("0524###getAmount###poolInfo.value ###",h.value),ue.value=B.value=="Aptos"?await Ue(h.value):await Ue(ne.value||h.value),M.value=!1,K.value=!1}catch(a){console.log("pre swap error",a),M.value=!1,K.value=!1}}else m.value?l.value="":s.value="",M.value=!1,K.value=!1},jo=ln(),ae=I(()=>jo),Do=f({}),re=f(""),de=f(""),se=I(()=>ae.value.assets&&t.value&&ae.value.assets[t.value.address]?be(ae.value.assets[t.value.address].balance,t.value.decimals):0),te=I(()=>ae.value.assets&&d.value&&ae.value.assets[d.value.address]?be(ae.value.assets[d.value.address].balance,d.value.decimals):0),Mo=Ao();Y(()=>p.value.tokensObj,async n=>{if(!Ae(n)){console.log(n,"===>newValue626"),console.log(Mo,"===>route625");const i=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?t.value=await W.value.getTokenBySymbol(n,a):!a&&!t.value&&(t.value=await W.value.getTokenBySymbol(n,N.chainName==="Aptos"?"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC"),console.log(t.value,"===>fromCoin.value")),i?d.value=await W.value.getTokenBySymbol(n,i):!i&&!d.value&&(d.value=await W.value.getTokenBySymbol(n,N.chainName==="Aptos"?"0x1::aptos_coin::AptosCoin":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdt::USDT")),!a&&i&&(t.value="",console.log("我清空了fromCoin"))}},{immediate:!0});const h=I(()=>{var n,i,a,g,b;if(t.value&&d.value){let w=null,_={};if(console.log(d.value.address,"===>toCoin.value.address930"),Object.values(p.value.poolConfigList).forEach(S=>{var F,G,oe,ve;(S.coinA.address.toUpperCase()===((F=t.value.address)==null?void 0:F.toUpperCase())&&S.coinB.address.toUpperCase()===((G=d.value.address)==null?void 0:G.toUpperCase())||S.coinB.address.toUpperCase()===((oe=t.value.address)==null?void 0:oe.toUpperCase())&&S.coinA.address.toUpperCase()===((ve=d.value.address)==null?void 0:ve.toUpperCase()))&&(console.log(S,"p===>"),_[S.address]={...S})}),B.value=="Aptos"&&p.value.poolsObj&&!Ae(p.value.poolsObj))for(const S in p.value.poolsObj){const F=p.value.poolsObj[S];(F.token_a.address.toUpperCase()===((n=t.value.address)==null?void 0:n.toUpperCase())&&F.token_b.address.toUpperCase()===((i=d.value.address)==null?void 0:i.toUpperCase())||F.token_b.address.toUpperCase()===((a=t.value.address)==null?void 0:a.toUpperCase())&&F.token_a.address.toUpperCase()===((g=d.value.address)==null?void 0:g.toUpperCase()))&&(_[F.address]={...F})}console.log(_,"===>currentPoolsObj");const D=Object.values(_).sort((S,F)=>S.fee-F.fee);console.log("0507####swap###poolInfo###poolSortList###",D);for(let S=0;S<D.length;S++)if(!((b=D[S])!=null&&b.is_pause)){w=D[S];break}return w=Object.values(_).sort((S,F)=>S.fee-F.fee)[0],console.log(_,"currentPoolsObj===>"),console.log("0507####swap###poolInfo###info###",w),w&&!Ae(w)?w:null}return null}),io=f(!0),uo=f(!1),Eo=async n=>{n&&B.value=="Aptos"&&(Ne(m.value?s.value:l.value),uo.value=!0,n.coinA.symbol.toLowerCase()===t.value.symbol.toLowerCase()&&n.coinB.symbol.toLowerCase()===d.value.symbol.toLowerCase()?io.value=!0:io.value=!1,V.value=!1)};Y(()=>h.value,(n,i)=>{n&&(!i||n.address!==i.address||n.current_sqrt_price!==i.current_sqrt_price)&&Eo(n)},{immediate:!0,deep:!0});const qo=I(()=>p.value.tokensObj&&t.value&&t.value.address&&p.value.tokensObj[t.value.address]&&p.value.tokensObj[t.value.address].logoURI),Wo=I(()=>(console.log(p.value.tokensObj,"===>pools.value.tokensObj"),p.value.tokensObj&&d.value&&d.value.address&&p.value.tokensObj[d.value.address]&&p.value.tokensObj[d.value.address].logoURI)),Xo=I(()=>p.value.tokensObj&&t.value&&t.value.address&&p.value.tokensObj[t.value.address]&&p.value.tokensObj[t.value.address].coingecko_id||null),Qo=I(()=>p.value.tokensObj&&d.value&&d.value.address&&p.value.tokensObj[d.value.address]&&p.value.tokensObj[d.value.address].coingecko_id||null),Jo=I(()=>{var g,b,w;const n=new c(s.value);console.log(ne.value,"===>toAddLiquidiPoolInfo"),console.log((g=ne==null?void 0:ne.value)==null?void 0:g.fee,"toAddLiquidiPoolInfo?.value?.fee");const i=new c(B.value=="Aptos"?(b=h==null?void 0:h.value)==null?void 0:b.fee:(w=ne==null?void 0:ne.value)==null?void 0:w.fee),a=n.mul(i).toString();return console.log(a,"===>fee"),Number(a)<1/Math.pow(10,t.value.decimals)?`<${new c(1).div(new c(Math.pow(10,t.value.decimals))).toString()}`:le(a,t.value.decimals)}),{setIsShowSuccess:Zo,setIsShowRejected:ro,setIsShowWaiting:Le,setTransactionDesc:zo,setTransactionTxid:co}=N,Ho=async()=>{var i,a,g,b,w,_,D,S;Q.value=!1,M.value=!0,clearInterval(Pe),window.clearInterval(Pe),co(""),zo(y("tips.swapping",{from:`${s.value} ${(i=t.value)==null?void 0:i.symbol}`,to:`${l.value} ${(a=d.value)==null?void 0:a.symbol}`})),Le(!0);let n;B.value=="Aptos"&&(n=t.value.address===h.value.token_a.address&&d.value.address===h.value.token_b.address?0:1);try{console.log("0221####swap start####",B.value,"###",W),console.log("0412###toSwap###poolInfo.value###",h.value);let F;B.value=="Aptos"?F=await W.value.getSwapTransactionPayload({pool:h.value,a2b:n==0,byAmountIn:m.value,amount:m.value?s.value:l.value,slippage:Number(he.value)/100}):(console.log(ne.value,"===>toAddLiquidiPoolInfo.value"),F=await je.value.swapRouterContract.getSwapRouterPayload(m.value,De.value.createTxParams)),console.log("0221####swap###swapPayload###",F);let G;if(B.value==="Aptos")G=await ae.value.currentWallet.signAndSubmitTransaction(F);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",B.value,"###swapPayload###",F);const oe=await ae.value.currentWallet.signAndExecuteTransactionBlock(F);console.log("0221###sui swap res###",oe),G=W.value.handleTx(oe),console.log("0221###swap###sui##tx###",G)}if(G&&G.hash){co(G.hash),Le(!1),Zo(!0);const oe={title:y("tips.swap"),desc:y("tips.swapSuccessText",{from:`${s.value} ${(g=t.value)==null?void 0:g.symbol}`,to:`${l.value} ${(b=d.value)==null?void 0:b.symbol}`}),hash:G.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(w=t.value)==null?void 0:w.address}`,numa:`- ${s.value}`,logoa:p.value.tokensObj&&t.value&&t.value.address&&p.value.tokensObj[t.value.address]&&p.value.tokensObj[t.value.address].logoURI,tokenb:`${(_=d.value)==null?void 0:_.address}`,numb:`+ ${l.value}`,logob:p.value.tokensObj&&d.value&&d.value.address&&p.value.tokensObj[d.value.address]&&p.value.tokensObj[d.value.address].logoURI},text:`Pay ${s.value} ${(D=t.value)==null?void 0:D.symbol} to receive ${l.value} ${(S=d.value)==null?void 0:S.symbol}`};B.value!=="Aptos"&&(oe.res=G.res),W.value.showTransitionPending(oe);const ve=await W.value.watchTransaction(oe);console.log("0221###swap###transitionStatus####",ve),ve&&setTimeout(()=>{B.value=="Aptos"&&U.updateCurrentPools(h.value.poolAddress,B.value),W.value.getAccount(ae.value.address)},1e3)}else Le(!1),ro(!0);s.value="",l.value="",M.value=!1}catch(F){s.value="",l.value="",console.log("Swap Error###",F),M.value=!1,Le(!1),ro(!0)}},Ko=n=>{var i;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((i=p.value.tokensObj[n==null?void 0:n.address])==null?void 0:i.logo_url)||(N.theme==="default"?fe("/image/coins/unknown.png"):fe("/image/coins/sui-unknown.png"))},mo=f([]);Y(()=>[t.value,d.value,p.value.poolConfigList],([n,i,a])=>{if(a&&a.length>0&&n&&i){const g=[];a.forEach(b=>{var w,_,D,S;(b.coinA.address.toUpperCase()===((w=n.address)==null?void 0:w.toUpperCase())&&b.coinB.address.toUpperCase()===((_=i.address)==null?void 0:_.toUpperCase())||b.coinB.address.toUpperCase()===((D=n.address)==null?void 0:D.toUpperCase())&&b.coinA.address.toUpperCase()===((S=i.address)==null?void 0:S.toUpperCase()))&&(b!=null&&b.is_pause||g.push(b.address))}),console.log(g,"result===>"),mo.value=g}},{immediate:!0});const Ke=n=>{console.log(J.value,"===>currentCoinKey.value"),console.log(n);const i=localStorage.getItem(n.address);console.log(p.value.tokensObj,"===>pools.value.tokensObj"),console.log(i,"===>coinLocak"),p.value.tokensObj&&p.value.tokensObj[n.address]&&p.value.tokensObj[n.address].isSelfBuilt&&!i?Ye.value=!0:(J.value==="fromCoin"?(s.value="",d.value&&n.address.toLowerCase()===(d==null?void 0:d.value.address.toLowerCase())&&(d.value=null),t.value=n):(t.value&&(l.value="",n.address.toLowerCase()===(t==null?void 0:t.value.address.toLowerCase())&&(t.value=null)),d.value=n),vo())},Ye=f(!1),vo=()=>{ze.value={},Ze.value={},Ye.value=!1},Yo=I(()=>N.isShowRouterModal),Ge=f([]),Ve=f(""),Go=f(!1),po=Cn(),je=I(()=>po),Te=f(!1),De=f({}),xe=f(""),fo=n=>{if(n&&n.paths&&n.paths.length>0){const i=n.paths[0];if(n.coinTypeA&&n.coinTypeB&&n.coinTypeC){console.log(p.value.routerPoolConfigObj,"===>pools.value.poolConfigObj");const a=p.value.routerPoolConfigObj[i.poolAddress[0]],g=p.value.routerPoolConfigObj[i.poolAddress[1]],b=be(n.paths[0].amountIn.toString(),t.value.decimals)*a.fee;let w,_=g.token_a.address==d.value.address?g.token_b.decimals:g.token_a.decimals;m.value?w=be(i.rawAmountLimit[0].toString(),_)*g.fee:w=be(i.rawAmountLimit[1].toString(),_)*g.fee;let D;console.log(g.token_a.address,d.value.address,"===>toCoin.value.address"),a.token_a.address==t.value.address?D=!1:D=!0;let S;D?S=W.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.token_a.decimals,a.token_b.decimals).toString():S=1/W.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.token_a.decimals,a.token_b.decimals).toString(),console.log(a,"===>1398 poolA"),console.log(_,"===>1398feeBDecimals"),console.log(D,"a2b1398"),console.log(S,1/S,w,"===>1398");const F=b+w*S;a.fee*100+"",xe.value=F>0&&F<1e-6?`<0.000001 ${t.value.symbol}`:q(le(F,t.value.decimals))+` ${t.value.symbol}`}else{const a=p.value.routerPoolConfigObj[i.poolAddress[0]];console.log(p.value.routerPoolConfigObj,"===>pools.value.poolConfigObj");const g=be(n.paths[0].amountIn.toString(),t.value.decimals)*a.fee;xe.value=g>0&&g<1e-6?`<0.000001 ${t.value.symbol} (${a.fee*100}%)`:q(le(g,t.value.decimals))+` ${t.value.symbol} (${a.fee*100}%)`}}},go=async n=>{if(console.log(n,"==>swapRouter"),ue.value=1e-5,n&&n.paths&&n.paths.length>0){console.log("这里执行了吗1");const i=n.paths[0];if(console.log(n.coinTypeA,"===>swapRouter.coinTypeA"),console.log(t.value.address,"===>fromCoin.value.address"),console.log(n.coinTypeC,"====>toCoin.value.address"),console.log(d.value.address,"===>toCoin.value.address"),n.coinTypeA&&n.coinTypeB&&n.coinTypeC&&n.coinTypeA==t.value.address&&n.coinTypeC==d.value.address){const a=p.value.routerPoolConfigObj[i.poolAddress[0]],g=W.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.coinA.decimals,a.coinB.decimals).toNumber(),b=p.value.routerPoolConfigObj[i.poolAddress[1]],w=W.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[1],b.coinA.decimals,b.coinB.decimals).toNumber();console.log(a,"poolA"),console.log(t.value.address,d.value.address,"===>1343"),console.log(a.token_a.address,a.token_b.address,"poolA1465"),console.log(b.token_a.address,b.token_b.address,"poolB1465");let _,D;a.token_a.address==t.value.address?_=!0:_=!1,b.token_b.address==d.value.address?D=!0:D=!1,console.log(_,D,"a2bb2c"),new c(s.value).div(l.value).toNumber();const S=new c(l.value).div(s.value).toNumber();console.log(g,w,"池子A当前价格 池子A交易后价格 池子B当前价格 池子B交易后价格");let F;const G=_?new c(g):new c(1).div(new c(g)),oe=D?new c(w):new c(1).div(new c(w));console.log(G.toString(),oe.toString(),S,"==>currentPriceDirectA");const ve=new c(G.mul(oe)).sub(S).div(new c(G.mul(oe))).mul(new c(100)).toNumber();F=ve,console.log(ve,"==>priceImpact"),F>100&&(console.log("我大于100了"),ue.value=100),ue.value=Number(Se(Math.abs(F),2))}else if(n&&n.currentSqrtPrice&&n.currentSqrtPrice.length==1&&i&&!Ae(i)){const a=p.value.routerPoolConfigObj[i.poolAddress[0]],g=W.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.coinA.decimals,a.coinB.decimals).toNumber();let b;a.token_a.address==t.value.address?b=!0:b=!1;const w=b?new c(g):new c(1).div(new c(g)),_=new c(l.value).div(s.value).toNumber(),D=new c(w).sub(_).div(new c(w)).mul(new c(100)).toNumber(),S=D;console.log(D,"==>priceImpact"),S>100&&(console.log("我大于100了"),ue.value=100),ue.value=Number(Se(Math.abs(S),2)),console.log(D,"这里执行了吗"),console.log(a,"pool===>"),console.log(ue.value,"==>impact.value")}}},Co=async n=>{if(t.value&&d.value&&(Number(s.value)>0||Number(l.value)>0)){console.log(new Date().getTime(),"开始计算时间戳"),console.log("执行吧"),(!s.value&&l.value||s.value&&!l.value)&&(M.value=!0),$e.value=!0,Te.value=!1,console.log(h.value,"==>poolInfo.value.");let i;h.value&&(i=t.value.address===h.value.coinA.address&&d.value.address===h.value.coinB.address?0:1);try{let a;if(m.value){const _=new c(s.value).mul(Math.pow(10,t.value.decimals)).toString();a=new Me(_)}else{const _=new c(l.value).mul(Math.pow(10,d.value.decimals)).toString();a=new Me(_)}console.log(a.toString(),"====>1498");const g=Number(he.value)/100;console.log(je.value,"===>swapRouterContract.value");const b=h.value?{poolAddresses:mo.value,coinTypeA:h.value.coin_a_address,coinTypeB:h.value.coin_b_address,decimalsA:h.value.coinA.decimals,decimalsB:h.value.coinB.decimals,a2b:i==0,byAmountIn:m.value,amount:m.value?s.value:l.value}:"",w=await je.value.swapRouterContract.getSwapRouter(t,d,a,m.value,g,"",h.value?b:"");console.log(new Date().getTime(),"计算完成时间戳"),console.log(w,"===> swapRouter1454"),w?(De.value=w,Ge.value=w.paths,V.value=w.isExceed,console.log(w.isExceed,V.value,"===>swapRouter.isExceed"),Ve.value=w.amountIn,fo(w),m.value?s.value&&(l.value=w.amountOut):l.value&&(s.value=w.amountIn),re.value=q(ye(new c(s.value).div(new c(l.value).toString()),t.value.decimals)),de.value=q(ye(new c(l.value).div(s.value).toString(),d.value.decimals)),go(w),M.value=!1,Te.value=!1,$e.value=!1):(M.value=!1,Te.value=!0,$e.value=!1)}catch(a){console.log("pre swap error",a),M.value=!1,$e.value=!1}}else m.value?l.value="":s.value="",M.value=!1,$e.value=!1;console.log(M.value,"====>routerSwaping")},me=f(!1),ho=async n=>{console.log("3s执行一次");try{let i;if(m.value){const b=new c(s.value).mul(Math.pow(10,t.value.decimals)).toString();i=new Me(b)}else{const b=new c(l.value).mul(Math.pow(10,d.value.decimals)).toString();i=new Me(b)}const a=Number(he.value)/100,g=await je.value.swapRouterContract.getSwapRouter(t,d,i,m.value,a,"");g&&(De.value=g,Ge.value=g.paths,V.value=g.isExceed,console.log(g.isExceed,V.value,"===>swapRouter.isExceed"),Ve.value=g.amountIn,fo(g),re.value=q(ye(new c(s.value).div(new c(l.value).toString()),t.value.decimals)),de.value=q(ye(new c(l.value).div(s.value).toString(),d.value.decimals)),go(g),m.value?l.value!==g.amountOut&&(me.value=!0,l.value=g.amountOut):s.value!==g.amountIn&&(me.value=!0,s.value=g.amountIn))}catch(i){console.log("pre swap error",i)}},Vo=async n=>{if(t.value&&d.value&&(s.value||l.value)){const i=t.value.address===h.value.coinA.address&&d.value.address===h.value.coinB.address?0:1;try{let a=await W.value.preSwap({pool:h.value,a2b:i==0,byAmountIn:m.value,amount:m.value?s.value:l.value});console.log(a,"preSwapRespreSwapRes"),V.value=a==null?void 0:a.isExceed,lo.value=a==null?void 0:a.estimatedFeeAmount,m.value?(de.value=(Number(a.estimatedAmountOut)/n).toString(),re.value=(n/Number(a.estimatedAmountOut)).toString()):(de.value=(n/Number(a.estimatedAmountIn)).toString(),re.value=(Number(a.estimatedAmountIn)/n).toString()),m.value?l.value!==a.estimatedAmountOut&&(me.value=!0,l.value=a.estimatedAmountOut):s.value!==a.estimatedAmountIn&&(me.value=!0,s.value=a.estimatedAmountIn),console.log(re.value,de.value,"===>831"),console.log(me.value,"==>isShowAccept.value"),ue.value=B.value=="Aptos"?await Ue(h.value):await Ue(ne.value||h.value),M.value=!1,K.value=!1}catch(a){console.log("pre swap error",a),M.value=!1,K.value=!1}}else M.value=!1,K.value=!1};let Pe=f(null);Y(()=>Q.value,n=>{n?(console.log("我开启了"),Pe.value=setInterval(()=>{B.value=="Aptos"?Vo(m.value):ho(m.value)},3e3)):(console.log("我关闭了"),clearInterval(Pe.value),window.clearInterval(Pe.value))},{immediate:!0});const Ne=async n=>{B.value=="Aptos"?Lo(n):(console.log("调用sui"),Co())},xo=I(()=>po),en=I(()=>xo.value.isInitRouter);Y(()=>en.value,n=>{n||Ne(m.value?s.value:l.value)},{immediate:!0}),Y(()=>[t.value,d.value],([n,i])=>{if(n&&i&&Ne(m.value?s.value:l.value),n||i){const a=`/swap?from=${n==null?void 0:n.address}&to=${i==null?void 0:i.address}`;e.push(a)}},{immediate:!0});function on(n,i=500){let a=null;return function(...g){clearTimeout(a),a=setTimeout(()=>{n.call(this,...g)},i)}}const nn=on(bo);function bo(){console.log("====>调用了几次");const n=t.value;t.value=d.value,d.value=n,L.value=!0,m.value=!m.value,m.value?(s.value=l.value,l.value=""):(l.value=s.value,s.value=""),setTimeout(()=>{L.value=!1},300)}return{closeSwapConfirmModal:()=>{Q.value=!1,me.value=!1},updateAccept:()=>{me.value=!1},clickExchange:bo,debounceClickExchange:nn,closeTokenWarning:vo,isShowTokenWarning:Ye,getTokenSource:Ke,hasPool:uo,getPoolInfoSuccess:oo,halfBtnSelect:Uo,formCoinId:Xo,toCoinId:Qo,fromCoinUrl:qo,toCoinUrl:Wo,t:y,indicator:v,wallet:ae,currentLpInfo:Do,fixD:Se,decimalFormat:un,impact:ue,oneFromAmount:re,oneToAmount:de,importIcon:fe,clickRefresh:no,refresh:T,change:L,isShowAddress:R,isShowSwapSetting:P,fromCoin:t,toCoin:d,slippage:he,openCoinSelect:_o,onCoinSelect:Fo,existingCoins:Z,lastSelectCoin:ee,currentCoinKey:J,showCoinSelect:k,fromCoinAmount:s,toCoinAmount:l,maxBtnSelect:Ro,fixedFromCoin:m,swapBtnText:Oo,toSwap:Ho,loading:ie,swaping:M,autoRefreshTime:O,countdown:$,marketTimer:Ie,rateChange:H,isSwapConfirmMpdal:Q,fromCoinBlance:se,toCoinBlance:te,poolInfo:h,chainName:B,swapRouterLoading:$e,formatFee:Jo,calculating:K,currentRate:so,currentRateReverse:to,getCoinIcon:Ko,toAddLiquidiPoolInfo:ne,decimalUi:ye,warningToCoin:ze,warningFromCoin:Ze,isShowRouterModal:Yo,toSwapLoading:Go,insufficientLiquidity:V,routerPool:Ge,routerTotalAmounts:Ve,store:N,suiPreSwapdata:De,suiSwapFee:xe,addCommom:q,debounce:Ee,notFoundRouter:Te,getSuiAmountAccept:ho,isShowAccept:me,getSuiAmount:Co}}}),Es="data:image/png;base64,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";const Ce=e=>(Fe("data-v-5cb1bed0"),e=e(),Re(),e),qs={class:"swap-container"},Ws={class:"title"},Xs={class:"left"},Qs={class:"right title-right"},Js=Ce(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Zs={class:"swap-card"},zs={class:"card-container"},Hs={class:"card-item"},Ks={class:"card-item"},Ys=Ce(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Gs=[Ys],Vs={key:1,class:"induction"},xs={key:0,class:"exchange-rate-btn"},et={key:0},ot={key:0},nt={key:0},at={key:1},st={key:0},tt=Ce(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),lt=[tt],it={class:"item"},ut={class:"induction-text"},rt={key:0,class:"icon","aria-hidden":"true"},dt=Ce(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),ct=[dt],mt={class:"item"},vt={class:"induction-text"},pt={key:0,class:"induction-value"},ft={class:"item"},gt={class:"induction-text"},Ct={key:0,class:"induction-value"},ht={key:0,class:"icon","aria-hidden":"true"},bt=Ce(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),wt=[bt],yt={key:2,class:"token-info-container"},At={class:"token-info-title"},St=Ce(()=>o("span",{class:"coingecko"},"Ref. CoinGecko",-1)),kt=Ce(()=>o("img",{src:Es,alt:""},null,-1)),It=Ce(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function $t(e,v,y,A,N,U){var s,l;const p=an,L=tn,T=Vn,R=$o,P=No,H=Bo,Q=pn,J=gn,Z=fn,ee=vn,k=Aa,m=sn,ie=Ja,M=Ds,K=_e("image");return r(),C("div",qs,[o("div",Ws,[o("div",Xs,u(e.$t("menu.swap")),1),o("div",Qs,[o("div",{class:"slippage-icon",onClick:v[0]||(v[0]=O=>e.isShowSwapSetting=!0)},[Js,o("span",null,u(e.slippage)+"%",1)]),we(p,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Zs,[o("div",zs,[o("div",Hs,[we(L,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":v[1]||(v[1]=O=>e.fromCoinAmount=O),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:v[2]||(v[2]=O=>e.maxBtnSelect("fromCoin")),onOnHalf:v[3]||(v[3]=O=>e.halfBtnSelect("fromCoin")),onOnInput:v[4]||(v[4]=O=>{e.fromCoinAmount=O,e.fixedFromCoin=!0}),onOnSelect:v[5]||(v[5]=O=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",Ks,[we(L,{modelValue:e.toCoinAmount,"onUpdate:modelValue":v[6]||(v[6]=O=>e.toCoinAmount=O),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:v[7]||(v[7]=O=>{e.toCoinAmount=O,e.fixedFromCoin=!1}),onOnSelect:v[8]||(v[8]=O=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:pe(e.change?"gang animationex":"gang"),src:hn,alt:""},null,2),o("div",{class:pe(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:v[9]||(v[9]=(...O)=>e.debounceClickExchange&&e.debounceClickExchange(...O))},[(r(),C("svg",{class:pe(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Gs,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(r(),E(T,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(r(),C("div",Vs,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(r(),C("div",xs,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(r(),C("span",at,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(r(),C("span",st,[z(o("img",null,null,512),[[K,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),x(" 1 "+u(e.toCoin.symbol)+" ≈ ",1),z(o("img",null,null,512),[[K,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,u(("addCommom"in e?e.addCommom:X(q))(("decimalUi"in e?e.decimalUi:X(ye))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),x("  "+u(e.fromCoin.symbol),1)])):(r(),E(R,{key:1,indicator:e.indicator},null,8,["indicator"]))])):j("",!0):(r(),C("span",et,[z(o("img",null,null,512),[[K,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),x(" 1 "+u(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(r(),C("span",ot,[z(o("img",null,null,512),[[K,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?j("",!0):(r(),C("span",nt,u(("addCommom"in e?e.addCommom:X(q))(("decimalUi"in e?e.decimalUi:X(ye))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(r(),E(R,{key:1,indicator:e.indicator},null,8,["indicator"])):j("",!0),x("  "+u(e.toCoin.symbol),1)])):(r(),E(R,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(r(),C("svg",{class:"icon-change","aria-hidden":"true",onClick:v[10]||(v[10]=O=>e.rateChange=!e.rateChange)},lt))])):j("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(r(),C(eo,{key:1},[o("div",it,[o("div",ut,u(e.$t("common.priceImpact")),1),e.swaping?(r(),E(P,{key:1,paragraph:!1,active:""})):(r(),C("div",{key:0,class:pe(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[x(u(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),C("svg",rt,ct)):j("",!0)],2))]),o("div",mt,[o("div",vt,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(r(),E(P,{key:1,paragraph:!1,active:""})):(r(),C("div",pt,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:X(q))(("fixD"in e?e.fixD:X(Se))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:X(q))(("fixD"in e?e.fixD:X(Se))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",ft,[o("div",gt,u(e.$t("common.fee")),1),e.swaping?(r(),E(P,{key:1,paragraph:!1,active:""})):(r(),C("div",Ct,u(("addCommom"in e?e.addCommom:X(q))(e.formatFee,e.fromCoin.decimals))+" "+u(e.fromCoin.symbol)+" ("+u(e.chainName=="Aptos"?e.poolInfo.fee*100:((s=e.toAddLiquidiPoolInfo)==null?void 0:s.fee)*100)+"%) ",1))])],64)):j("",!0)])):j("",!0)]),we(H,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((l=e.poolInfo)==null?void 0:l.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:v[11]||(v[11]=O=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ce(()=>[e.wallet.connected?(r(),C("svg",ht,wt)):j("",!0),o("span",null,u(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),we(Q),e.showCoinSelect?(r(),E(J,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:v[12]||(v[12]=O=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):j("",!0),e.isShowSwapSetting?(r(),E(Z,{key:1,onOnClose:v[13]||(v[13]=O=>e.isShowSwapSetting=!1)})):j("",!0),e.chainName&&(e.formCoinId||e.toCoinId)?(r(),C("div",yt,[o("div",At,[St,kt,we(ee,{placement:"top","arrow-point-at-center":""},{title:ce(()=>[x(" The following price is only an external reference from CoinGecko, which may not reflect actual data on Cetus. ")]),default:ce(()=>[It]),_:1})]),e.fromCoin&&e.formCoinId?(r(),E(k,{key:0,id:e.formCoinId,coin:e.fromCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):j("",!0),e.toCoin&&e.toCoinId?(r(),E(k,{key:1,id:e.toCoinId,coin:e.toCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):j("",!0)])):j("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(r(),E(m,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):j("",!0),e.isShowRouterModal?(r(),E(ie,{key:4,"router-pool":e.routerPool,"routertotal-percents":e.routertotalPercents,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"router-total-amounts":e.routerTotalAmounts,onOnClose:v[14]||(v[14]=O=>e.store.setIsShowRouterModal(!1))},null,8,["router-pool","routertotal-percents","from-coin","to-coin","from-coin-amount","to-coin-amount","router-total-amounts"])):j("",!0),e.isSwapConfirmMpdal?(r(),E(M,{key:5,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFee:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFee:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):j("",!0)])}const Ht=Oe(Ms,[["render",$t],["__scopeId","data-v-5cb1bed0"]]);export{Ht as default};
