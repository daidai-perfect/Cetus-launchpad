import{_ as se}from"./pool-position-tab.0a913dc7.js";import{P as ae}from"./pool-filter-block.c5ef14b3.js";import{R as C,a as ie,A as ne,T as re,b as ue,P as ce}from"./to-add.4a35c125.js";import{u as de}from"./useToken.16161822.js";import{u as Q}from"./pool.17ac4ff1.js";import{u as pe}from"./stats.90110f4f.js";import{c as I,e as ve}from"./index.dbdd6761.js";import{H as me,T as fe,N as _e}from"./h5-table-card.780fb5db.js";import{u as X}from"./token.bea39901.js";import{a as he,r as B,m as c,D as M,y as Y,M as ge,o as S,f as F,h as a,i,c as J,w as K,v as D,x as be,p as Pe,k as Se,e as Z,N as ye,C as Ae}from"./entry.2580d766.js";import"./index.75f6af80.js";import"./decimal.765d8738.js";import{u as Le}from"./usePoolList.2ebd082c.js";import{u as ke}from"./useStatsData.69167a53.js";import"./select-tab.f2e01c6e.js";import"./pool.37bda3ae.js";import"./decimal.a2826370.js";import"./filter-pool-by-coin.9a9e4955.js";import"./coin-select.62691c3b.js";import"./import-icon.de3e6c66.js";/* empty css              *//* empty css              */import"./icon-tooltip.bf685fd5.js";import"./token-warning_2x.be0b9191.js";import"./img-no-Positions_2x.348ab173.js";import"./img-no-Positions_2x.ecbddd18.js";import"./coin-img.0a4a2a3c.js";import"./token-warning-new.6d98ce3f.js";import"./is-all-pool.e9337511.js";/* empty css              */import"./icon-selected_3x.873560ed.js";import"./nuxt-link.4f360631.js";import"./icon_farms_2x.5a96c9b0.js";import"./farms.79668e00.js";import"./icon_autopools_2x.5ff1fa3d.js";import"./icon_autopools_2x.dc256b14.js";import"./icon_fee_2x.ceefbd01.js";import"./icon_rewards_2x.13e70029.js";import"./fetchFun.9795cfdd.js";import"./index.48d67763.js";import"./formatter.49f08223.js";const E=y=>(Pe("data-v-3457de70"),y=y(),Se(),y),Te={class:"h5-table"},we={class:"pc-table"},xe={key:1,class:"virtual-table"},Ne=E(()=>a("th",null,"Pool",-1)),Ce=E(()=>a("th",null,"Mining Rewards",-1)),Be=E(()=>a("th",null,"Actions",-1)),Fe={class:"action"},He=he({__name:"pool-list-table",setup(y){const d=B([]),A=c(()=>d.value.map(r=>Object.assign({},{random:Math.random()},r)));M(()=>A.value,n=>{console.log("pool-list-table è™šæ‹Ÿdom list: ",n)});const{getTokenList:V,getToken:w}=de(),L=Q(),p=c(()=>L),f=c(()=>(console.log("ðŸš€ ~ poolList ~ suiPool.value.poolList:",p.value.poolList),p.value.poolList)),x=c(()=>p.value.isAllPool),_=c(()=>p.value.incentiveTypeList),k=c(()=>p.value.selectLabel),s=c(()=>p.value.filterPoolCoinList),ee=pe(),W=c(()=>ee),$=c(()=>W.value.poolsStatsObj),oe=c(()=>W.value.isStatsApiError),j=async(n,r)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:181 ~ buildPoolList ~ statsInfo, list:",n,r);let h=[];for(let e=0;e<r.length;e++){const o=r[e],g=n[o.address],b=await w(r[e].displayTokenAAddress),P=await w(r[e].displayTokenBAddress),R=[];b!=null&&b.labels&&R.push(...b.labels),P!=null&&P.labels&&R.push(...P.labels);let z=!1,U=!1;g&&g.stableFarming&&g.stableFarming.length>0&&(z=!0),g&&g.autoPool&&g.autoPool.clmm_pool&&(U=!0);const G={...o,tvl:0,fees24:0,totalApr:0,volume24:0,...g,tokenA:b,tokenB:P,labels:[...new Set(R)],isFarming:z,isVaults:U};(!x.value&&b.is_trusted&&P.is_trusted||x.value)&&h.push(G)}let u=[];_.value.length>0?h.forEach(e=>{(_.value.includes("Mining")&&e.haveMining||_.value.includes("Farming")&&e.isFarming||_.value.includes("No incentives")&&!e.haveMining&&!e.isFarming)&&u.push(e)}):u=[],console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:259 ~ buildPoolList ~ incentivePool:",u);let l=[];k.value!=="All"?u.forEach(e=>{e.labels.includes(k.value)&&l.push(e)}):l=u;let N=[];s.value&&s.value.length>0?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:282 ~ buildPoolList ~ filterPoolCoinList.value.length:",s.value.length),l.forEach(e=>{s.value.length==2&&(s.value[0]==e.displayTokenAAddress||s.value[0]==e.displayTokenBAddress)&&(s.value[1]==e.displayTokenAAddress||s.value[1]==e.displayTokenBAddress)&&N.push(e),s.value.length==1&&(s.value[0]==e.displayTokenAAddress||s.value[0]==e.displayTokenBAddress)&&N.push(e)})):N=l;let v=N,m=[];t.value.label=="Volume (24H)"&&(m=t.value.sort=="desc"?v.sort((e,o)=>o.volume24-e.volume24):v.sort((e,o)=>e.volume24-o.volume24)),t.value.label=="Liquidity"&&(m=t.value.sort=="desc"?v.sort((e,o)=>o.tvl-e.tvl):v.sort((e,o)=>e.tvl-o.tvl)),t.value.label=="Fees (24H)"&&(m=t.value.sort=="desc"?v.sort((e,o)=>o.fees24-e.fees24):v.sort((e,o)=>e.fees24-o.fees24)),t.value.label=="APR (24H)"&&(m=t.value.sort=="desc"?v.sort((e,o)=>o.totalApr-e.totalApr):v.sort((e,o)=>e.totalApr-o.totalApr)),L.setPoolListNum(m&&m.length),d.value=m,L.setPoolListLoading(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:194 ~ buildPoolList ~ pageList.value:",m)},t=B({label:"Volume (24H)",sort:"desc"}),T=n=>{t.value=n,j($.value,f.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pools.vue:234 ~ changeSort ~ sortInfo.value:",t.value)},H=c(()=>p.value.isPoolLoading),te=X(),le=c(()=>te.allTokensObj);M(()=>[$.value,f.value,oe.value,le.value,x.value,_.value,k.value,s.value],([n,r,h,u])=>{console.log("ðŸš€ ~ watch ~ poolsStatsObj:",r,n),(n&&!I(n)||h)&&r&&r.length>0&&u&&!I(u)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-table.vue:276 ~ buildPoolList:",u),j(n,r))},{immediate:!0});const q=B(null);Y(()=>{console.log("ðŸš€ ~ file: pools.vue:20 ~ onMounted ~ onMounted start"),window.scroller=q.value});const O=[{title:"Pools",hasSort:!1,tdWidth:"370px",isNotShowTitle:!0,component:"pool-name-block"},{title:"Liquidity",hasSort:!0,tdWidth:"150px",value:"tvlDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"150px",value:"volume24Display"},{title:"Fees (24H)",hasSort:!0,tdWidth:"150px",value:"fees24Display"},{title:"Mining Rewards",hasSort:!1,tdWidth:"150px",component:"reward-coin"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"130px",component:"apr-tips"},{title:"Actions",hasSort:!1,tdWidth:"180px",isNotShowTitle:!0,component:"swap-add"}];return(n,r)=>{const h=ce,u=ge("RecycleScroller");return S(),F("div",null,[a("div",Te,[i(me,{"h5-title":"Pools","page-name":"pools","key-field":"poolAddress","sort-info":t.value,"item-size":325,"data-source-length":10,loading:H.value,columns:O,"data-source":d.value,"card-action":"swap-add",onChangeSort:T},null,8,["sort-info","loading","data-source"])]),a("div",we,[H.value?(S(),J(fe,{key:0,columns:O,"data-source-length":10})):(S(),F("table",xe,[i(u,{ref_key:"scroller",ref:q,class:"scroller",items:A.value,"item-size":86,"key-field":"address","page-mode":"",full:"",page:"",prerender:20,buffer:500},{before:K(()=>[a("thead",null,[Ne,i(C,{label:"Liquidity","sort-info":t.value,onSort:T},null,8,["sort-info"]),i(C,{label:"Volume (24H)","sort-info":t.value,onSort:T},null,8,["sort-info"]),i(C,{label:"Fees (24H)","sort-info":t.value,onSort:T},null,8,["sort-info"]),Ce,i(C,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":t.value,onSort:T},null,8,["sort-info"]),Be])]),default:K(({item:l})=>[(S(),F("tr",{key:l.address},[a("td",null,[i(h,{"pool-info":l},null,8,["pool-info"])]),a("td",null,D(l.tvlDisplay||"$0"),1),a("td",null,D(l.volume24Display||"$0"),1),a("td",null,D(l.fees24Display||"$0"),1),a("td",null,[i(ie,{"reward-list":l.miningRewardList||[]},null,8,["reward-list"])]),a("td",null,[i(ne,{"pool-info":l},null,8,["pool-info"])]),a("td",null,[a("div",Fe,[i(re,{"from-coin-address":l.tokenAAddress,"to-coin-address":l.tokenBAddress},null,8,["from-coin-address","to-coin-address"]),i(ue,{"pool-address":l.address},null,8,["pool-address"])])])]))]),_:1},8,["items"])]))]),!H.value&&d.value&&d.value.length==0?(S(),J(_e,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):be("",!0)])}}});const Re=Z(He,[["__scopeId","data-v-3457de70"]]);const De={class:"pools-list-container"},Ie={__name:"list",setup(y){const d=Q(),A=B(!1),{getPoolList:V}=Le(),{getStatusData:w}=ke(),L=X(),p=c(()=>L.allTokensObj);return Y(async()=>{await ve(1e3),A.value=!0}),ye(()=>{A.value&&w()}),M(()=>p.value,f=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: list.vue:47 ~ watch ~ allTokensObj:",f),f&&!I(f)&&V()}),Ae(()=>{d.setIncentiveTypeList(""),d.setPoolListNum(""),d.setIsAllPool(!0),d.setLabel("All"),d.setFilterPoolCoinList([])}),(f,x)=>{const _=se,k=ae,s=Re;return S(),F("div",De,[i(_,{"current-tab":"Pools"}),i(k),i(s)])}}},ko=Z(Ie,[["__scopeId","data-v-c6ac7178"]]);export{ko as default};
