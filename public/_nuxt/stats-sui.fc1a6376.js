import{a as B,r as S,m as k,D as G,y as O,C as Ae,o as c,f as g,h as s,v as V,F as ae,s as ne,x as M,a0 as He,d8 as Re,z as le,e as Y,u as xe,c as E,S as Ue,M as N,i as d,w as K,p as re,k as ie,b as We}from"./entry.e26a72a9.js";import"./index.ace204fb.js";import{a as ce}from"./pool.7d99f86d.js";import{c as se}from"./index.88b8bf28.js";import{l as ze}from"./lodash.be11b5ab.js";import{o as z,c as j}from"./index.b055e222.js";import{u as Q}from"./stats.471e6490.js";import{f as Be}from"./formatter.d90dd5be.js";import"./index.fb206cae.js";import{i as Ye}from"./import-icon.de3e6c66.js";import{R as ue,A as Fe,P as Me}from"./to-add.51607143.js";import{u as ee}from"./useToken.e1acb786.js";import{T as pe,N as de,H as me,a as Ee}from"./h5-table-card.b4579682.js";import{u as ve}from"./token.cc6c5dab.js";import{S as Oe}from"./select-tab.3f8b44fd.js";import{u as je}from"./useStatsData.aa9b1e40.js";import"./install.e369e686.js";import"./decimal.a2826370.js";import"./decimal.765d8738.js";/* empty css              */import"./coin-img.03aab08e.js";import"./token-warning_2x.41f1001e.js";import"./token-warning-new.e2c4e232.js";import"./nuxt-link.ebdb67b5.js";import"./icon_farms_2x.3d2d56d7.js";import"./farms.7a03be70.js";import"./icon_autopools_2x.8c38f2c8.js";import"./icon_autopools_2x.c9641d5c.js";import"./icon-tooltip.2b423703.js";import"./icon_fee_2x.08c672f5.js";import"./icon_rewards_2x.22edae31.js";import"./pool.2cb3d8a2.js";import"./fetchFun.a5bb970a.js";const Je=""+globalThis.__publicAssetsURL("sui-image/img_totalvaluelocked@2x.png"),qe=""+globalThis.__publicAssetsURL("sui-image/img_tradingvolume@2x.png"),Ge={class:"stats-chart-container"},Ke={class:"chart-top"},Qe={class:"trading-vol"},Xe={class:"title"},Ze={class:"text"},et=["innerHTML"],tt={class:"time-list"},ot=["onClick"],st={key:0,class:"loading-box"},at={key:0,src:Je,alt:""},nt={key:1,src:qe,alt:""},lt={class:"chart-content"},rt=["id"];var Z=(e=>(e.D="day",e.W="wek",e.M="mon",e))(Z||{}),_e=(e=>(e[e.D=40]="D",e[e.W=30]="W",e[e.M=20]="M",e))(_e||{}),U=(e=>(e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec",e))(U||{}),he=(e=>(e[e.D=1]="D",e[e.W=4]="W",e[e.M=12]="M",e))(he||{}),ge=(e=>(e[e.D=1]="D",e[e.W=2]="W",e[e.M=4]="M",e))(ge||{});const it=B({__name:"stats-sui-chart",props:{chartType:{type:String,default:"tvl"}},setup(e){const r=e,a=S("D"),C=["D","W","M"],y=S(""),D=S("24H"),_=ce();k(()=>_);const m=S(),n=S(),$=S(""),u=S(!1),H=Q(),f=k(()=>H),L=k(()=>f.value.overallStatistics);G(()=>[L.value,r.chartType],([l,p])=>{j(l)||($.value=p=="tvl"?l.totalValueLockedDisplay:l.volInUsd24h)},{immediate:!0});const i=async()=>{u.value=!0;try{const l=_e[a.value],{data:p}=r.chartType=="tvl"?await fetch(`${se.Sui.api}/v2/sui/histogram/all?date_type=${Z[a.value]}&typ=pure_tvl`).then(b=>b.json()):await fetch(`${se.Sui.api}/v2/sui/histogram/all?date_type=${Z[a.value]}&typ=vol`).then(b=>b.json());console.log("ðŸš€ ~ getHistogram ~ data:",p);const w=p.list.map(b=>b.num),P=p.list.map(b=>b.date);m.value=w,n.value=P,v(w,P,l),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:70 ~ getHistogram ~ data:",p)}catch(l){console.info("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:50 ~ getHistogram ~ error:",l)}},h=S(),v=(l,p,w)=>{const P=document.getElementById(`stats-chart-${r.chartType}`),b=He(P);h.value=b;let R={animation:!1,tooltip:{trigger:"axis",position:function(A,F,x,W,J){return[A[0]-50,"10%"]},backgroundColor:"#28353F",borderColor:"transparent",formatter:function(A){I(A)},padding:0,axisPointer:{type:"line",lineStyle:{width:a.value=="D"?1:a.value=="W"?2:4,type:"solid",color:"#456D89"}}},xAxis:{type:"category",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},splitArea:{show:!1},data:p.reverse(),inverse:!0,axisLabel:{interval:parseInt(Number(l.length)/6),formatter:(A,F)=>{const x=z(Date.parse(A)-288e5,"YMD")||"";let W,J=x.slice(5,7),X=U[Number(J)];return a.value=="M"?W=X:W=x.slice(8,10),`${W}`}}},yAxis:{show:!1,max:function(A){return A.max}},series:[{data:l.reverse(),inverse:!0,type:r.chartType=="tvl"?"line":"bar",symbol:"none",itemStyle:{normal:{barBorderRadius:1,color:"#72C1F7"}},areaStyle:{color:new Re(0,0,0,1,[{offset:0,color:"rgba(0, 128, 255, 0.3)"},{offset:1,color:"rgba(0, 128, 255, 0)"}])},barWidth:T.value?he[a.value]:ge[a.value]}],grid:{left:20,top:0,bottom:24,right:20}};u.value=!1,R&&b.setOption(R),b&&b.resize(),b.on("globalout",A=>{$.value=r.chartType=="tvl"?L.value.totalValueLockedDisplay:L.value.volInUsd24h,D.value="24H",o()})};G(()=>a.value,(l,p)=>{(!p||l!==p)&&i()},{immediate:!0});const T=S(!0),t=ze.debounce(()=>{document.body.clientWidth>750?T.value=!0:T.value=!1,!m.value&&!n.value?i():h.value&&h.value.resize()},300);O(()=>{window.addEventListener("resize",t),o()}),Ae(()=>{window.removeEventListener("resize",t)});const o=()=>{const l=z(Date.parse(new Date().toUTCString()),"YMD")||"";let p=l.slice(5,7),w=U[Number(p)];const P=l.slice(8,10),b=w,R=l.slice(0,4);y.value=b+"&nbsp;"+P+",&nbsp;"+R+"&nbsp;(UTC)"},I=l=>{$.value=Be(l[0].value,2),D.value=a.value=="D"?"24H":a.value=="W"?"7D":"30D";const p=Date.parse(l[0].axisValue),w=new Date(p);w.setDate(w.getDate()+7);const P=new Date(p);P.setDate(P.getDate()+31);const b=w.toUTCString(),R=P.toUTCString(),A=z(Date.parse(R),"YMD")||"",F=z(Date.parse(new Date().toUTCString()),"YMD")||"",x=Date.parse(b)>Date.parse(new Date().toUTCString())?z(Date.parse(new Date().toUTCString()),"YMD")||"":z(Date.parse(b),"YMD")||"";let W=F.slice(5,7),J=U[Number(W)];const X=F.slice(8,10),Te=J,ke=F.slice(0,4);let te=l[0].axisValue.slice(5,7),De=U[Number(te)];const oe=l[0].axisValue.slice(8,10),q=De,$e=l[0].axisValue.slice(0,4);let we=x.slice(5,7),Ce=U[Number(we)];const Le=x.slice(8,10),Ie=Ce,Ve=x.slice(0,4),Ne=U[Number(te)+1],Pe=A.slice(0,4);a.value=="D"?y.value=q+"&nbsp;"+oe+",&nbsp;"+$e+"&nbsp;(UTC)":a.value=="W"?y.value=oe+"&nbsp;"+q+"-"+Le+"&nbsp;"+Ie+"&nbsp;,&nbsp;"+Ve+"&nbsp;(UTC)":y.value=Date.parse(R)>=Date.parse(new Date().toUTCString())?q+"&nbsp;01-"+Te+"&nbsp;"+X+",&nbsp;"+ke+"&nbsp;(UTC)":q+"&nbsp;01-"+Ne+"&nbsp;01,&nbsp;"+Pe+"&nbsp;(UTC)"};return(l,p)=>(c(),g("div",Ge,[s("div",Ke,[s("div",Qe,[s("div",Xe,V(e.chartType=="tvl"?"Total Value Locked":`Trading Volume  (${D.value})`),1),s("div",Ze," $"+V($.value===""?"--":Number($.value)==0?0:$.value),1),s("span",{innerHTML:y.value},null,8,et)]),s("div",tt,[(c(),g(ae,null,ne(C,w=>s("div",{key:w,class:le(["time-item",w==a.value?"time-item-active":""]),onClick:P=>a.value=w},V(w),11,ot)),64))])]),u.value?(c(),g("div",st,[e.chartType=="tvl"?(c(),g("img",at)):(c(),g("img",nt))])):M("",!0),s("div",lt,[s("div",{id:`stats-chart-${e.chartType}`,class:"stats-chart"},null,8,rt)])]))}});const fe=Y(it,[["__scopeId","data-v-9ae57b2e"]]),ct=B({setup(){const e=Q(),r=k(()=>e),a=k(()=>r.value.overallStatistics),C=k(()=>[{img_url:"/sui-image/icon_cumulativevolume@2x.png",label:"Cumulative Volume",symbol:"$",value:a.value.cumulativeVolumeDisplay},{img_url:"/sui-image/icon_totalvaluelocked@2x.png",label:"Total Value Locked",symbol:"$",value:a.value.totalValueLockedDisplay},{img_url:"/sui-image/icon_cumulativetransactions@2x.png",label:"Cumulative Transactions",symbol:"",value:a.value.cumulativeTransactionsDisplay},{img_url:"/sui-image/icon_accounts@2x.png",label:"Total Accounts",symbol:"",value:a.value.totalAccountsDisplay}]);return{checkNullObj:j,overallStatistics:a,statisticsList:C}}});const ut={class:"stats-sui-statistics"},pt={class:"img-label"},dt=["src"],mt={class:"label"},vt={key:1,class:"value"};function _t(e,r,a,C,y,D){const _=Ue;return c(),g("div",ut,[(c(!0),g(ae,null,ne(e.statisticsList,m=>(c(),g("div",{key:m.label,class:"item"},[s("div",pt,[s("img",{src:m.img_url},null,8,dt),s("div",mt,V(m.label),1)]),("checkNullObj"in e?e.checkNullObj:xe(j))(e.overallStatistics)?(c(),E(_,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(c(),g("div",vt,V(m.symbol)+V(m.value),1))]))),128))])}const be=Y(ct,[["render",_t],["__scopeId","data-v-a6a15f4f"]]),ht=B({components:{RankIcon:ue,StatsAprTips:Fe,TableLoading:pe,StatsNoData:de,H5TableCard:me},setup(){const{getToken:e}=ee(),r=Q(),a=k(()=>r),C=ve(),y=k(()=>C.allTokensObj),D=k(()=>a.value.poolsStatsList),_=S(!0),m=S(null);O(()=>{window.scroller=m.value});const n=S([]),$=k(()=>n.value.map(h=>Object.assign({},{random:Math.random()},h))),u=S({label:"Volume (24H)",sort:"desc"}),H=i=>{u.value=i,f(D.value)},f=async i=>{let h=[];for(let t=0;t<i.length;t++){const o=i[t],I=await e(i[t].displayTokenAAddress),l=await e(i[t].displayTokenBAddress),p=[];I!=null&&I.labels&&p.push(...I.labels),l!=null&&l.labels&&p.push(...l.labels);const w={...o,tokenA:I,tokenB:l,labels:[...new Set(p)]};h.push(w)}let v=h,T=[];u.value.label=="Volume (24H)"&&(T=u.value.sort=="desc"?v.sort((t,o)=>o.volume24-t.volume24):v.sort((t,o)=>t.volume24-o.volume24)),u.value.label=="Volume (7D)"&&(T=u.value.sort=="desc"?v.sort((t,o)=>o.volume7d-t.volume7d):v.sort((t,o)=>t.volume7d-o.volume7d)),u.value.label=="Liquidity"&&(T=u.value.sort=="desc"?v.sort((t,o)=>o.tvl-t.tvl):v.sort((t,o)=>t.tvl-o.tvl)),u.value.label=="Fees (24H)"&&(T=u.value.sort=="desc"?v.sort((t,o)=>o.fees24-t.fees24):v.sort((t,o)=>t.fees24-o.fees24)),u.value.label=="APR (24H)"&&(T=u.value.sort=="desc"?v.sort((t,o)=>o.totalApr-t.totalApr):v.sort((t,o)=>t.totalApr-o.totalApr)),n.value=T,console.log("ðŸš€ ~ buildPoolList ~ pageList:",n.value,T),_.value=!1};return G(()=>[D.value,y.value],([i,h])=>{i&&i.length>0&&h&&!j(h)&&f(i)},{immediate:!0}),{pageList:n,tableColumns:[{title:"Pools",hasSort:!1,tdWidth:"330px",isNotShowTitle:!0,component:"pool-name-block"},{title:"Liquidity",hasSort:!0,tdWidth:"200px",value:"tvlDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"200px",value:"volume24Display"},{title:"Volume (7D)",hasSort:!0,tdWidth:"200px",value:"volume7dDisplay"},{title:"Fees (24H)",hasSort:!0,tdWidth:"175px",value:"fees24Display"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"175px",component:"apr-tips"}],scroller:m,list:$,isPoolLoading:_,sortInfo:u,changeSort:H}}});const gt=e=>(re("data-v-b1d82ea6"),e=e(),ie(),e),ft={class:"stats-sui-pools-table"},bt={class:"h5-table"},St={class:"pc-table"},yt={key:1,class:"virtual-table"},Tt=gt(()=>s("th",null,"Pool",-1));function kt(e,r,a,C,y,D){const _=N("H5TableCard"),m=N("TableLoading"),n=N("RankIcon"),$=Me,u=N("StatsAprTips"),H=N("RecycleScroller"),f=N("StatsNoData");return c(),g("div",ft,[s("div",bt,[d(_,{"h5-title":"Pools","key-field":"poolAddress","sort-info":e.sortInfo,"item-size":258,"data-source-length":10,loading:e.isPoolLoading,columns:e.tableColumns,"data-source":e.pageList,onChangeSort:e.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),s("div",St,[e.isPoolLoading?(c(),E(m,{key:0,columns:e.tableColumns,"data-source-length":10},null,8,["columns"])):(c(),g("table",yt,[d(H,{ref:"scroller",class:"scroller",items:e.list,"item-size":86,"key-field":"poolAddress","page-mode":"",full:"",page:"",prerender:20,buffer:500},{before:K(()=>[s("thead",null,[Tt,d(n,{label:"Liquidity","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),d(n,{label:"Volume (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),d(n,{label:"Volume (7D)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),d(n,{label:"Fees (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),d(n,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"])])]),default:K(({item:L})=>[(c(),g("tr",{key:L==null?void 0:L.poolAddress},[s("td",null,[d($,{"pool-info":L},null,8,["pool-info"])]),s("td",null,V(L.tvlDisplay||"--"),1),s("td",null,V(L.volume24Display||"--"),1),s("td",null,V(L.volume7dDisplay||"--"),1),s("td",null,V(L.fees24Display||"--"),1),s("td",null,[d(u,{"pool-info":L},null,8,["pool-info"])])]))]),_:1},8,["items"])]))]),!e.isPoolLoading&&e.pageList&&e.pageList.length==0?(c(),E(f,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):M("",!0)])}const Se=Y(ht,[["render",kt],["__scopeId","data-v-b1d82ea6"]]),Dt=B({components:{TokenBlock:Ee,RankIcon:ue,TableLoading:pe,NoDataStats:de,H5TableCard:me},setup(){const{getToken:e}=ee(),r=Q(),a=k(()=>r),C=k(()=>a.value.tokensStatsList),y=S(!0),D=S(null);O(()=>{window.scroller=D.value});const _=S([]),m=k(()=>_.value.map(h=>Object.assign({},{random:Math.random()},h))),n=S({label:"Volume (24H)",sort:"desc"}),$=i=>{n.value=i,u(C.value)},u=async i=>{let h=[];for(let t=0;t<i.length;t++){const o=i[t],I=await e(o==null?void 0:o.address),l=[];I!=null&&I.labels&&l.push(...I.labels);const p={...o,logoURI:I==null?void 0:I.logo_url,labels:[...new Set(l)]};h.push(p)}let v=h,T=[];n.value.label=="Price"&&(T=n.value.sort=="desc"?v.sort((t,o)=>o.price-t.price):v.sort((t,o)=>t.price-o.price)),n.value.label=="Price Change"&&(T=n.value.sort=="desc"?v.sort((t,o)=>o.priceChange-t.priceChange):v.sort((t,o)=>t.priceChange-o.priceChange)),n.value.label=="Volume (24H)"&&(T=n.value.sort=="desc"?v.sort((t,o)=>o.volume24-t.volume24):v.sort((t,o)=>t.volume24-o.volume24)),n.value.label=="TVL"&&(T=n.value.sort=="desc"?v.sort((t,o)=>o.tvl-t.tvl):v.sort((t,o)=>t.tvl-o.tvl)),_.value=T,y.value=!1},H=ve(),f=k(()=>H.allTokensObj);return G(()=>[C.value,f.value],([i,h])=>{i&&i.length>0&&h&&!j(h)&&u(i)},{immediate:!0}),{pageList:_,tableColumns:[{title:"Token",hasSort:!1,tdWidth:"370px",isNotShowTitle:!0,component:"token-block"},{title:"Price",hasSort:!0,tdWidth:"240px",value:"priceDisplay"},{title:"Price Change",hasSort:!0,tdWidth:"215px",value:"priceChangeDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"240px",value:"volume24Display"},{title:"TVL",hasSort:!0,tdWidth:"215px",value:"tvlDisplay"}],scroller:D,list:m,isTokenLoading:y,sortInfo:n,changeSort:$}}});const $t=e=>(re("data-v-5b2739ad"),e=e(),ie(),e),wt={class:"aptos-stats-sui-tokens-table"},Ct={class:"h5-table"},Lt={class:"pc-table"},It={key:1,class:"virtual-table"},Vt=$t(()=>s("th",null,"Token",-1));function Nt(e,r,a,C,y,D){const _=N("H5TableCard"),m=N("TableLoading"),n=N("RankIcon"),$=N("TokenBlock"),u=N("RecycleScroller"),H=N("NoDataStats");return c(),g("div",wt,[s("div",Ct,[d(_,{"h5-title":"Tokens","key-field":"address","sort-info":e.sortInfo,"item-size":218,"data-source-length":10,loading:e.isTokenLoading,columns:e.tableColumns,"data-source":e.pageList,onChangeSort:e.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),s("div",Lt,[e.isTokenLoading?(c(),E(m,{key:0,columns:e.tableColumns,"data-source-length":10},null,8,["columns"])):(c(),g("table",It,[d(u,{ref:"scroller",class:"scroller",items:e.list,"item-size":86,"key-field":"address","page-mode":"",full:"",page:"",prerender:20,buffer:500},{before:K(()=>[s("thead",null,[Vt,d(n,{label:"Price","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),d(n,{label:"Price Change","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),d(n,{label:"Volume (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),d(n,{label:"TVL","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"])])]),default:K(({item:f})=>[(c(),g("tr",{key:f==null?void 0:f.address},[s("td",null,[d($,{"token-info":f,"justify-content":"flex-start","is-have-label":!0},null,8,["token-info"])]),s("td",null,"$"+V(f.priceDisplay||"--"),1),s("td",null,[s("span",{class:le(f.priceChangeDisplay.includes("-")?"redecue-change-price":"add-change-price")},V(f.priceChangeDisplay||"--"),3)]),s("td",null,V(f.volume24Display||"--"),1),s("td",null,V(f.tvlDisplay||"--"),1)]))]),_:1},8,["items"])]))]),!e.isTokenLoading&&e.pageList&&e.pageList.length==0?(c(),E(H,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No tokens found"})):M("",!0)])}const ye=Y(Dt,[["render",Nt],["__scopeId","data-v-5b2739ad"]]),Pt=B({components:{StatsTab:Oe,StatsPoolsTable:Se,StatsTokensTable:ye},setup(){const{getTokenList:e}=ee(),r=[{name:"Pools",logo:"/sui-image/icon_pools@2x.png"},{name:"Tokens",logo:"/sui-image/icon_tokens@2x.png"}],a=S("Pools");return O(()=>{e()}),{currentTab:a,tabList:r}}});const At={class:"pools-tokens-transitions"},Ht={class:"tab-box"},Rt={key:0,class:"table-box"},xt={key:1,class:"table-box"};function Ut(e,r,a,C,y,D){const _=N("StatsTab"),m=Se,n=ye;return c(),g("div",At,[s("div",Ht,[d(_,{"tab-list":e.tabList,"current-tab":e.currentTab,onOnClick:r[0]||(r[0]=$=>{e.currentTab=$.name})},null,8,["tab-list","current-tab"])]),e.currentTab=="Pools"?(c(),g("div",Rt,[d(m)])):M("",!0),e.currentTab=="Tokens"?(c(),g("div",xt,[d(n)])):M("",!0)])}const Wt=Y(Pt,[["render",Ut],["__scopeId","data-v-496d4079"]]),zt=B({components:{StatsSuiChart:fe,StatsSuiStatistics:be,PoolsTokensTransitions:Wt},setup(){const e=ce(),r=k(()=>e),a=We(),C=k(()=>r.value.chainName),{getStatusData:y}=je();O(async()=>{y()});const D=k(()=>r.value.theme);return{chainName:C,theme:D,store:r,importIcon:Ye,router:a}}});const Bt={class:"stats-sui-container"},Yt={class:"title"},Ft={class:"chart-box"};function Mt(e,r,a,C,y,D){const _=fe,m=be,n=N("PoolsTokensTransitions");return c(),g("div",Bt,[s("div",Yt,V(e.$t("menu.stats")),1),s("div",Ft,[d(_,{"chart-type":"tvl"}),d(_,{"chart-type":"vol"})]),d(m),d(n)])}const $o=Y(zt,[["render",Mt],["__scopeId","data-v-03e3c28a"]]);export{$o as default};
