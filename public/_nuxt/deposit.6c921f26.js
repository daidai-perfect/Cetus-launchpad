import{_ as Jr}from"./back.028c7b32.js";import{_ as jr}from"./refresh-icon.56132ea2.js";import{a as ht,i as rn,b as mt,o as x,e as R,f as p,h as ie,t as M,p as on,j as an,D as Z,r as A,w as re,k as Ze,l as ae,m as de,q as Ye,I as Ji,S as ji,s as _t,v as le,x as Vn,y as Ne,B as Xn,z as Dt,A as Zr,C as eo,M as to,E as Zi,F as er,G as no,H as io,c as Xe,J as ro,K as oo,L as ao,N as so,O as lo,P as je,Q as ci,R as fi,T as di,U as rt,V as hi,W as mi,X as Bt,Y as pi,Z as wn,$ as gi,a0 as uo,a1 as tr,a2 as co,a3 as fo}from"./entry.22130561.js";import{_ as ho,a as mo}from"./coin-select.937dadc5.js";/* empty css              */import"./index.75c56e02.js";import{_ as po}from"./swap-setting.dc4bad8c.js";import{_ as nr,a as go}from"./img-lock_2x.4eeebbfb.js";import{_ as vo}from"./status-block.5b017e67.js";import{_ as ir,a as rr}from"./icon-arrow_2x.db44c7c5.js";import"./img-no-Positions_2x.3a4bda32.js";import"./coin-pair-name.c1df6494.js";import"./precision.ce0280e5.js";const yo=ht({props:{coinName:{type:String,default:""},coinIcon:{type:String,default:""}},setup(){return{importIcon:rn}}}),wo=e=>(on("data-v-28114255"),e=e(),an(),e),bo={class:"coin-block"},ko=["src"],_o=wo(()=>p("div",null,[p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon_on"})])],-1));function Co(e,t,n,i,r,o){return x(),R("div",bo,[p("div",null,[e.coinIcon?(x(),R("img",{key:0,src:e.coinIcon||e.importIcon(`/image/coins/${e.coinName.toLowerCase()}.png`)},null,8,ko)):ie("",!0),p("span",null,M(e.coinName?e.coinName:e.$t("modal.selectTokenModalTitle")),1)]),_o])}const Ao=mt(yo,[["render",Co],["__scopeId","data-v-28114255"]]),So=-443630;function vi(e,t){const n=Io(e),i=(n-So)%t;return i>t/2?n-i+t:n-i}const or=new Z("1.0001");function Io(e){return e.log(or).toDP(0,Z.ROUND_HALF_UP).toNumber()}function yi(e){return or.pow(e)}const Mo=ht({props:{inputValue:{type:String,required:!0},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object},currentPriceTab:{type:String},loading:{type:Boolean,default:!1}},emits:["onInput"],setup(e,t){const n=A(""),i=A("");let r=A(""),o=A("");const a=()=>{console.log(n.value.toString(),"===>pValue.value add ");const f=vi(new Z(n.value.toString()),u.value.tickSpacing),d=yi(f+u.value.tickSpacing);if(e.pType=="Min"&&Number(d)>=Number(o.value))return;const h=d;t.emit("onInput",h)},s=()=>{console.log(n.value,"===>pValue.value minus");const f=vi(new Z(n.value.toString()),u.value.tickSpacing),d=yi(f-u.value.tickSpacing),h=d;e.pType=="Max"&&Number(d)<=Number(r.value)||(t.emit("onInput",h),console.log(d.toString(),"price2222"))},l=f=>{console.log(f,"value===>"),t.emit("onInput",String(f))};re(()=>e.defaultMinPrice,(f,d)=>{f!==d&&(r.value=e.defaultMinPrice)},{immediate:!0}),re(()=>e.defaultMaxPrice,(f,d)=>{f!==d&&(o.value=e.defaultMaxPrice)},{immediate:!0}),re(()=>e.inputValue,f=>{f&&(n.value=f,i.value=f!=="0"&&f!=="\u221E"?Ze(f,6):f)},{immediate:!0});const u=A({});re(()=>e.poolInfo,(f,d)=>{f&&(u.value=f)},{immediate:!0});const c=A("");return re(()=>e.currentPriceTab,f=>{c.value=f},{immediate:!0}),{addPrice:a,minusPrice:s,oValue:i,changeValue:l,isDisabled:c}}});const $o={class:"set-price-item"},To={class:"title"},xo={class:"input-box"},No={key:0,class:"minus-btn"},Po=["disabled"],Eo={key:1,class:"plus-btn"};function Ro(e,t,n,i,r,o){const a=Ji,s=ji;return x(),R("div",$o,[p("div",To,M(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ae(s,{loading:e.loading,active:"",paragraph:!1},{default:de(()=>[p("div",xo,[e.isDisabled=="Custom"?(x(),R("a",No,[p("div",{class:Ye(!e.fromCoin&&!e.toCoin?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:t[0]||(t[0]=(...l)=>e.minusPrice&&e.minusPrice(...l))},null,10,Po)])):ie("",!0),ae(a,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=l=>e.oValue=l),disabled:e.isDisabled!=="Custom",autocomplete:"off",oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",onChange:t[2]||(t[2]=l=>e.changeValue(l.target.value))},null,8,["value","disabled"]),e.isDisabled=="Custom"?(x(),R("a",Eo,[p("div",{class:Ye(!e.fromCoin&&!e.toCoin?"addDis":"add"),onClick:t[3]||(t[3]=(...l)=>e.addPrice&&e.addPrice(...l))},null,2)])):ie("",!0)])]),_:1},8,["loading"]),p("p",{class:Ye(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},M(e.toCoin&&e.toCoin.symbol)+" per "+M(e.fromCoin&&e.fromCoin.symbol),3)])}const wi=mt(Mo,[["render",Ro],["__scopeId","data-v-98380299"]]),Lo=ht({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object},currentPriceTab:{type:String},loading:{type:Boolean,default:!1}},setup(e,t){let n=A(""),i=A(""),r=A(),o=A(!1),a=A(!1);const s=A({}),l=_t(),u=le(()=>l);Vn(()=>{n.value=e.min,i.value=e.max}),re(()=>e.currentPriceTab,(h,b)=>{h!==b&&(r.value=e.currentPriceTab)},{immediate:!0}),re(()=>e.min,(h,b)=>{h!==b&&(n.value=e.min)},{immediate:!0}),re(()=>e.max,(h,b)=>{h!==b&&(i.value=e.max)},{immediate:!0}),re(()=>e.poolInfo,(h,b)=>{h&&(s.value=h)},{immediate:!0}),re(n,(h,b)=>{h!==b&&t.emit("onChangeMinPrice",h)}),re(i,(h,b)=>{h!==b&&t.emit("onChangeMaxPrice",h)}),re(o,(h,b)=>{h!==b&&t.emit("onChangeFullRange",h)});const c=()=>{n.value=e.defaultMinPrice,i.value=e.defaultMaxPrice,a.value=!1,o.value=!1},f=()=>{a.value=!1,n.value="0",i.value="\u221E"};return re(o,(h,b)=>{h!==b&&t.emit("onChangeFullRange",h)}),{store:u,importIcon:rn,resetPrice:c,changeShowUnderStand:()=>{o.value=!o.value,o.value?a.value=!0:c(),a.value||(n.value=e.defaultMinPrice,i.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:n,maxPrice:i,understand:f,isRadio:o,poolInfo:s,currentPriceTab:r}}});const Bo={class:"set-price"},Fo={class:"card-container"},Oo={key:0,class:"card"},qo=["src"],Uo={key:1,class:"understand"},Do={class:"left"},Vo={class:"right"};function Xo(e,t,n,i,r,o){const a=wi,s=wi,l=Xn;return x(),R("div",Bo,[p("div",Fo,[e.showUnderStand?(x(),R("div",Uo,[p("div",Do,[p("p",null,M(e.$t("common.lowerEfficiency")),1),p("p",null,M(e.$t("common.lowerEfficiencyTips")),1)]),p("div",Vo,[ae(l,{onClick:e.understand},{default:de(()=>[Ne(M(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(x(),R("div",Oo,[ae(a,{modelValue:e.minPrice,"onUpdate:modelValue":t[0]||(t[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:t[1]||(t[1]=u=>e.minPrice=u),onAddValue:t[2]||(t[2]=u=>e.minPrice=u),onDelValue:t[3]||(t[3]=u=>e.minPrice=u)},null,8,["modelValue","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab"]),ae(s,{modelValue:e.maxPrice,"onUpdate:modelValue":t[4]||(t[4]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:t[5]||(t[5]=u=>e.maxPrice=u),onAddValue:t[6]||(t[6]=u=>e.maxPrice=u),onDelValue:t[7]||(t[7]=u=>e.maxPrice=u)},null,8,["modelValue","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab"]),p("img",{src:e.importIcon("/image/lmg-line@2x.png"),alt:""},null,8,qo)]))])])}const zo=mt(Lo,[["render",Xo],["__scopeId","data-v-5d6a94c7"]]);function Vt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ho(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ar(e){let t,n,i;e.length!==2?(t=Vt,n=(s,l)=>Vt(e(s),l),i=(s,l)=>e(s)-l):(t=e===Vt||e===Ho?e:Ko,n=e,i=e);function r(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){const f=r(s,l,u,c-1);return f>u&&i(s[f-1],l)>-i(s[f],l)?f-1:f}return{left:r,center:a,right:o}}function Ko(){return 0}function Yo(e){return e===null?NaN:+e}const Wo=ar(Vt),Go=Wo.right;ar(Yo).center;const Qo=Go;class bi extends Map{constructor(t,n=Zo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(ki(this,t))}has(t){return super.has(ki(this,t))}set(t,n){return super.set(Jo(this,t),n)}delete(t){return super.delete(jo(this,t))}}function ki({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Jo({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function jo({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function Zo(e){return e!==null&&typeof e=="object"?e.valueOf():e}var $n=Math.sqrt(50),Tn=Math.sqrt(10),xn=Math.sqrt(2);function ea(e,t,n){var i,r=-1,o,a,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(o=e,e=t,t=o),(s=sr(e,t,n))===0||!isFinite(s))return[];if(s>0){let l=Math.round(e/s),u=Math.round(t/s);for(l*s<e&&++l,u*s>t&&--u,a=new Array(o=u-l+1);++r<o;)a[r]=(l+r)*s}else{s=-s;let l=Math.round(e*s),u=Math.round(t*s);for(l/s<e&&++l,u/s>t&&--u,a=new Array(o=u-l+1);++r<o;)a[r]=(l+r)/s}return i&&a.reverse(),a}function sr(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=$n?10:o>=Tn?5:o>=xn?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=$n?10:o>=Tn?5:o>=xn?2:1)}function ta(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=$n?r*=10:o>=Tn?r*=5:o>=xn&&(r*=2),t<e?-r:r}function na(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function ia(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(r);++i<r;)o[i]=e+i*n;return o}var ra={value:()=>{}};function zn(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Xt(n)}function Xt(e){this._=e}function oa(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Xt.prototype=zn.prototype={constructor:Xt,on:function(e,t){var n=this._,i=oa(e+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(e=i[o]).type)&&(r=aa(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(e=i[o]).type)n[r]=_i(n[r],e.name,t);else if(t==null)for(r in n)n[r]=_i(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Xt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function aa(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function _i(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=ra,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Nn="http://www.w3.org/1999/xhtml";const Ci={svg:"http://www.w3.org/2000/svg",xhtml:Nn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ci.hasOwnProperty(t)?{space:Ci[t],local:e}:e}function sa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Nn&&t.documentElement.namespaceURI===Nn?t.createElement(e):t.createElementNS(n,e)}}function la(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lr(e){var t=sn(e);return(t.local?la:sa)(t)}function ua(){}function Hn(e){return e==null?ua:function(){return this.querySelector(e)}}function ca(e){typeof e!="function"&&(e=Hn(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=new Array(a),l,u,c=0;c<a;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new $e(i,this._parents)}function fa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function da(){return[]}function ur(e){return e==null?da:function(){return this.querySelectorAll(e)}}function ha(e){return function(){return fa(e.apply(this,arguments))}}function ma(e){typeof e=="function"?e=ha(e):e=ur(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var a=t[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(i.push(e.call(l,l.__data__,u,a)),r.push(l));return new $e(i,r)}function cr(e){return function(){return this.matches(e)}}function fr(e){return function(t){return t.matches(e)}}var pa=Array.prototype.find;function ga(e){return function(){return pa.call(this.children,e)}}function va(){return this.firstElementChild}function ya(e){return this.select(e==null?va:ga(typeof e=="function"?e:fr(e)))}var wa=Array.prototype.filter;function ba(){return Array.from(this.children)}function ka(e){return function(){return wa.call(this.children,e)}}function _a(e){return this.selectAll(e==null?ba:ka(typeof e=="function"?e:fr(e)))}function Ca(e){typeof e!="function"&&(e=cr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new $e(i,this._parents)}function dr(e){return new Array(e.length)}function Aa(){return new $e(this._enter||this._groups.map(dr),this._parents)}function Yt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Yt.prototype={constructor:Yt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Sa(e){return function(){return e}}function Ia(e,t,n,i,r,o){for(var a=0,s,l=t.length,u=o.length;a<u;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):n[a]=new Yt(e,o[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function Ma(e,t,n,i,r,o,a){var s,l,u=new Map,c=t.length,f=o.length,d=new Array(c),h;for(s=0;s<c;++s)(l=t[s])&&(d[s]=h=a.call(l,l.__data__,s,t)+"",u.has(h)?r[s]=l:u.set(h,l));for(s=0;s<f;++s)h=a.call(e,o[s],s,o)+"",(l=u.get(h))?(i[s]=l,l.__data__=o[s],u.delete(h)):n[s]=new Yt(e,o[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(d[s])===l&&(r[s]=l)}function $a(e){return e.__data__}function Ta(e,t){if(!arguments.length)return Array.from(this,$a);var n=t?Ma:Ia,i=this._parents,r=this._groups;typeof e!="function"&&(e=Sa(e));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],f=r[u],d=f.length,h=xa(e.call(c,c&&c.__data__,u,i)),b=h.length,P=s[u]=new Array(b),m=a[u]=new Array(b),w=l[u]=new Array(d);n(c,f,P,m,w,h,t);for(var S=0,g=0,T,v;S<b;++S)if(T=P[S]){for(S>=g&&(g=S+1);!(v=m[g])&&++g<b;);T._next=v||null}}return a=new $e(a,i),a._enter=s,a._exit=l,a}function xa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Na(){return new $e(this._exit||this._groups.map(dr),this._parents)}function Pa(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Ea(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var u=n[l],c=i[l],f=u.length,d=s[l]=new Array(f),h,b=0;b<f;++b)(h=u[b]||c[b])&&(d[b]=h);for(;l<r;++l)s[l]=n[l];return new $e(s,this._parents)}function Ra(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function La(e){e||(e=Ba);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],s=a.length,l=r[o]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new $e(r,this._parents).order()}function Ba(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Fa(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Oa(){return Array.from(this)}function qa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function Ua(){let e=0;for(const t of this)++e;return e}function Da(){return!this.node()}function Va(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,a=r.length,s;o<a;++o)(s=r[o])&&e.call(s,s.__data__,o,r);return this}function Xa(e){return function(){this.removeAttribute(e)}}function za(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ha(e,t){return function(){this.setAttribute(e,t)}}function Ka(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ya(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Wa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ga(e,t){var n=sn(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?za:Xa:typeof t=="function"?n.local?Wa:Ya:n.local?Ka:Ha)(n,t))}function hr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Qa(e){return function(){this.style.removeProperty(e)}}function Ja(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ja(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Za(e,t,n){return arguments.length>1?this.each((t==null?Qa:typeof t=="function"?ja:Ja)(e,t,n==null?"":n)):ct(this.node(),e)}function ct(e,t){return e.style.getPropertyValue(t)||hr(e).getComputedStyle(e,null).getPropertyValue(t)}function es(e){return function(){delete this[e]}}function ts(e,t){return function(){this[e]=t}}function ns(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function is(e,t){return arguments.length>1?this.each((t==null?es:typeof t=="function"?ns:ts)(e,t)):this.node()[e]}function mr(e){return e.trim().split(/^|\s+/)}function Kn(e){return e.classList||new pr(e)}function pr(e){this._node=e,this._names=mr(e.getAttribute("class")||"")}pr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function gr(e,t){for(var n=Kn(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function vr(e,t){for(var n=Kn(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function rs(e){return function(){gr(this,e)}}function os(e){return function(){vr(this,e)}}function as(e,t){return function(){(t.apply(this,arguments)?gr:vr)(this,e)}}function ss(e,t){var n=mr(e+"");if(arguments.length<2){for(var i=Kn(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?as:t?rs:os)(n,t))}function ls(){this.textContent=""}function us(e){return function(){this.textContent=e}}function cs(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function fs(e){return arguments.length?this.each(e==null?ls:(typeof e=="function"?cs:us)(e)):this.node().textContent}function ds(){this.innerHTML=""}function hs(e){return function(){this.innerHTML=e}}function ms(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function ps(e){return arguments.length?this.each(e==null?ds:(typeof e=="function"?ms:hs)(e)):this.node().innerHTML}function gs(){this.nextSibling&&this.parentNode.appendChild(this)}function vs(){return this.each(gs)}function ys(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ws(){return this.each(ys)}function bs(e){var t=typeof e=="function"?e:lr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ks(){return null}function _s(e,t){var n=typeof e=="function"?e:lr(e),i=t==null?ks:typeof t=="function"?t:Hn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Cs(){var e=this.parentNode;e&&e.removeChild(this)}function As(){return this.each(Cs)}function Ss(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Is(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ms(e){return this.select(e?Is:Ss)}function $s(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ts(e){return function(t){e.call(this,t,this.__data__)}}function xs(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Ns(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function Ps(e,t,n){return function(){var i=this.__on,r,o=Ts(t);if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Es(e,t,n){var i=xs(e+""),r,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(r=0,c=s[l];r<o;++r)if((a=i[r]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?Ps:Ns,r=0;r<o;++r)this.each(s(i[r],t,n));return this}function yr(e,t,n){var i=hr(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Rs(e,t){return function(){return yr(this,e,t)}}function Ls(e,t){return function(){return yr(this,e,t.apply(this,arguments))}}function Bs(e,t){return this.each((typeof t=="function"?Ls:Rs)(e,t))}function*Fs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var wr=[null];function $e(e,t){this._groups=e,this._parents=t}function It(){return new $e([[document.documentElement]],wr)}function Os(){return this}$e.prototype=It.prototype={constructor:$e,select:ca,selectAll:ma,selectChild:ya,selectChildren:_a,filter:Ca,data:Ta,enter:Aa,exit:Na,join:Pa,merge:Ea,selection:Os,order:Ra,sort:La,call:Fa,nodes:Oa,node:qa,size:Ua,empty:Da,each:Va,attr:Ga,style:Za,property:is,classed:ss,text:fs,html:ps,raise:vs,lower:ws,append:bs,insert:_s,remove:As,clone:Ms,datum:$s,on:Es,dispatch:Bs,[Symbol.iterator]:Fs};function Be(e){return typeof e=="string"?new $e([[document.querySelector(e)]],[document.documentElement]):new $e([[e]],wr)}function qs(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ai(e,t){if(e=qs(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Pn={capture:!0,passive:!1};function En(e){e.preventDefault(),e.stopImmediatePropagation()}function Us(e){var t=e.document.documentElement,n=Be(e).on("dragstart.drag",En,Pn);"onselectstart"in t?n.on("selectstart.drag",En,Pn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ds(e,t){var n=e.document.documentElement,i=Be(e).on("dragstart.drag",null);t&&(i.on("click.drag",En,Pn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Yn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function br(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Mt(){}var Ct=.7,Wt=1/Ct,ut="\\s*([+-]?\\d+)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vs=/^#([0-9a-f]{3,8})$/,Xs=new RegExp(`^rgb\\(${ut},${ut},${ut}\\)$`),zs=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),Hs=new RegExp(`^rgba\\(${ut},${ut},${ut},${At}\\)$`),Ks=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${At}\\)$`),Ys=new RegExp(`^hsl\\(${At},${Fe},${Fe}\\)$`),Ws=new RegExp(`^hsla\\(${At},${Fe},${Fe},${At}\\)$`),Si={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yn(Mt,nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ii,formatHex:Ii,formatHex8:Gs,formatHsl:Qs,formatRgb:Mi,toString:Mi});function Ii(){return this.rgb().formatHex()}function Gs(){return this.rgb().formatHex8()}function Qs(){return kr(this).formatHsl()}function Mi(){return this.rgb().formatRgb()}function nt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vs.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$i(t):n===3?new Ie(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ft(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ft(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xs.exec(e))?new Ie(t[1],t[2],t[3],1):(t=zs.exec(e))?new Ie(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hs.exec(e))?Ft(t[1],t[2],t[3],t[4]):(t=Ks.exec(e))?Ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ys.exec(e))?Ni(t[1],t[2]/100,t[3]/100,1):(t=Ws.exec(e))?Ni(t[1],t[2]/100,t[3]/100,t[4]):Si.hasOwnProperty(e)?$i(Si[e]):e==="transparent"?new Ie(NaN,NaN,NaN,0):null}function $i(e){return new Ie(e>>16&255,e>>8&255,e&255,1)}function Ft(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ie(e,t,n,i)}function Js(e){return e instanceof Mt||(e=nt(e)),e?(e=e.rgb(),new Ie(e.r,e.g,e.b,e.opacity)):new Ie}function Rn(e,t,n,i){return arguments.length===1?Js(e):new Ie(e,t,n,i==null?1:i)}function Ie(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Yn(Ie,Rn,br(Mt,{brighter(e){return e=e==null?Wt:Math.pow(Wt,e),new Ie(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ct:Math.pow(Ct,e),new Ie(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ie(tt(this.r),tt(this.g),tt(this.b),Gt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ti,formatHex:Ti,formatHex8:js,formatRgb:xi,toString:xi}));function Ti(){return`#${et(this.r)}${et(this.g)}${et(this.b)}`}function js(){return`#${et(this.r)}${et(this.g)}${et(this.b)}${et((isNaN(this.opacity)?1:this.opacity)*255)}`}function xi(){const e=Gt(this.opacity);return`${e===1?"rgb(":"rgba("}${tt(this.r)}, ${tt(this.g)}, ${tt(this.b)}${e===1?")":`, ${e})`}`}function Gt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function et(e){return e=tt(e),(e<16?"0":"")+e.toString(16)}function Ni(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ee(e,t,n,i)}function kr(e){if(e instanceof Ee)return new Ee(e.h,e.s,e.l,e.opacity);if(e instanceof Mt||(e=nt(e)),!e)return new Ee;if(e instanceof Ee)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(t===o?a=(n-i)/s+(n<i)*6:n===o?a=(i-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Ee(a,s,l,e.opacity)}function Zs(e,t,n,i){return arguments.length===1?kr(e):new Ee(e,t,n,i==null?1:i)}function Ee(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Yn(Ee,Zs,br(Mt,{brighter(e){return e=e==null?Wt:Math.pow(Wt,e),new Ee(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ct:Math.pow(Ct,e),new Ee(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ie(bn(e>=240?e-240:e+120,r,i),bn(e,r,i),bn(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Ee(Pi(this.h),Ot(this.s),Ot(this.l),Gt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gt(this.opacity);return`${e===1?"hsl(":"hsla("}${Pi(this.h)}, ${Ot(this.s)*100}%, ${Ot(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pi(e){return e=(e||0)%360,e<0?e+360:e}function Ot(e){return Math.max(0,Math.min(1,e||0))}function bn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Wn=e=>()=>e;function el(e,t){return function(n){return e+n*t}}function tl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function nl(e){return(e=+e)==1?_r:function(t,n){return n-t?tl(t,n,e):Wn(isNaN(t)?n:t)}}function _r(e,t){var n=t-e;return n?el(e,n):Wn(isNaN(e)?t:e)}const Qt=function e(t){var n=nl(t);function i(r,o){var a=n((r=Rn(r)).r,(o=Rn(o)).r),s=n(r.g,o.g),l=n(r.b,o.b),u=_r(r.opacity,o.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function il(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function rl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ol(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=ln(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<i;++a)o[a]=r[a](s);return o}}function al(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Pe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function sl(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=ln(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kn=new RegExp(Ln.source,"g");function ll(e){return function(){return e}}function ul(e){return function(t){return e(t)+""}}function Cr(e,t){var n=Ln.lastIndex=kn.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(i=Ln.exec(e))&&(r=kn.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Pe(i,r)})),n=kn.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?ul(l[0].x):ll(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function ln(e,t){var n=typeof t,i;return t==null||n==="boolean"?Wn(t):(n==="number"?Pe:n==="string"?(i=nt(t))?(t=i,Qt):Cr:t instanceof nt?Qt:t instanceof Date?al:rl(t)?il:Array.isArray(t)?ol:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?sl:Pe)(e,t)}function cl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Ei=180/Math.PI,Bn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ar(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*Ei,skewX:Math.atan(l)*Ei,scaleX:a,scaleY:s}}var qt;function fl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Bn:Ar(t.a,t.b,t.c,t.d,t.e,t.f)}function dl(e){return e==null||(qt||(qt=document.createElementNS("http://www.w3.org/2000/svg","g")),qt.setAttribute("transform",e),!(e=qt.transform.baseVal.consolidate()))?Bn:(e=e.matrix,Ar(e.a,e.b,e.c,e.d,e.e,e.f))}function Sr(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,b){if(u!==f||c!==d){var P=h.push("translate(",null,t,null,n);b.push({i:P-4,x:Pe(u,f)},{i:P-2,x:Pe(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function a(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Pe(u,c)})):c&&f.push(r(f)+"rotate("+c+i)}function s(u,c,f,d){u!==c?d.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Pe(u,c)}):c&&f.push(r(f)+"skewX("+c+i)}function l(u,c,f,d,h,b){if(u!==f||c!==d){var P=h.push(r(h)+"scale(",null,",",null,")");b.push({i:P-4,x:Pe(u,f)},{i:P-2,x:Pe(c,d)})}else(f!==1||d!==1)&&h.push(r(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),a(u.rotate,c.rotate,f,d),s(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var b=-1,P=d.length,m;++b<P;)f[(m=d[b]).i]=m.x(h);return f.join("")}}}var hl=Sr(fl,"px, ","px)","deg)"),ml=Sr(dl,", ",")",")"),ft=0,bt=0,wt=0,Ir=1e3,Jt,kt,jt=0,it=0,un=0,St=typeof performance=="object"&&performance.now?performance:Date,Mr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Gn(){return it||(Mr(pl),it=St.now()+un)}function pl(){it=0}function Zt(){this._call=this._time=this._next=null}Zt.prototype=$r.prototype={constructor:Zt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Gn():+n)+(t==null?0:+t),!this._next&&kt!==this&&(kt?kt._next=this:Jt=this,kt=this),this._call=e,this._time=n,Fn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fn())}};function $r(e,t,n){var i=new Zt;return i.restart(e,t,n),i}function gl(){Gn(),++ft;for(var e=Jt,t;e;)(t=it-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ft}function Ri(){it=(jt=St.now())+un,ft=bt=0;try{gl()}finally{ft=0,yl(),it=0}}function vl(){var e=St.now(),t=e-jt;t>Ir&&(un-=t,jt=e)}function yl(){for(var e,t=Jt,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Jt=n);kt=e,Fn(i)}function Fn(e){if(!ft){bt&&(bt=clearTimeout(bt));var t=e-it;t>24?(e<1/0&&(bt=setTimeout(Ri,e-St.now()-un)),wt&&(wt=clearInterval(wt))):(wt||(jt=St.now(),wt=setInterval(vl,Ir)),ft=1,Mr(Ri))}}function Li(e,t,n){var i=new Zt;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var wl=zn("start","end","cancel","interrupt"),bl=[],Tr=0,Bi=1,On=2,zt=3,Fi=4,qn=5,Ht=6;function cn(e,t,n,i,r,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;kl(e,n,{name:t,index:i,group:r,on:wl,tween:bl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Tr})}function Qn(e,t){var n=Re(e,t);if(n.state>Tr)throw new Error("too late; already scheduled");return n}function Oe(e,t){var n=Re(e,t);if(n.state>zt)throw new Error("too late; already running");return n}function Re(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kl(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=$r(o,0,n.time);function o(u){n.state=Bi,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,f,d,h;if(n.state!==Bi)return l();for(c in i)if(h=i[c],h.name===n.name){if(h.state===zt)return Li(a);h.state===Fi?(h.state=Ht,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=Ht,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(Li(function(){n.state===zt&&(n.state=Fi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=On,n.on.call("start",e,e.__data__,n.index,n.group),n.state===On){for(n.state=zt,r=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=qn,1),f=-1,d=r.length;++f<d;)r[f].call(e,c);n.state===qn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ht,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function Un(e,t){var n=e.__transition,i,r,o=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){o=!1;continue}r=i.state>On&&i.state<qn,i.state=Ht,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}o&&delete e.__transition}}function _l(e){return this.each(function(){Un(this,e)})}function Cl(e,t){var n,i;return function(){var r=Oe(this,e),o=r.tween;if(o!==n){i=n=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Al(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Oe(this,e),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}o.tween=r}}function Sl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Re(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?Cl:Al)(n,e,t))}function Jn(e,t,n){var i=e._id;return e.each(function(){var r=Oe(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Re(r,i).value[t]}}function xr(e,t){var n;return(typeof t=="number"?Pe:t instanceof nt?Qt:(n=nt(t))?(t=n,Qt):Cr)(e,t)}function Il(e){return function(){this.removeAttribute(e)}}function Ml(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $l(e,t,n){var i,r=n+"",o;return function(){var a=this.getAttribute(e);return a===r?null:a===i?o:o=t(i=a,n)}}function Tl(e,t,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?o:o=t(i=a,n)}}function xl(e,t,n){var i,r,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function Nl(e,t,n){var i,r,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function Pl(e,t){var n=sn(e),i=n==="transform"?ml:xr;return this.attrTween(e,typeof t=="function"?(n.local?Nl:xl)(n,i,Jn(this,"attr."+e,t)):t==null?(n.local?Ml:Il)(n):(n.local?Tl:$l)(n,i,t))}function El(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Rl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ll(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Rl(e,o)),n}return r._value=t,r}function Bl(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&El(e,o)),n}return r._value=t,r}function Fl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=sn(e);return this.tween(n,(i.local?Ll:Bl)(i,t))}function Ol(e,t){return function(){Qn(this,e).delay=+t.apply(this,arguments)}}function ql(e,t){return t=+t,function(){Qn(this,e).delay=t}}function Ul(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ol:ql)(t,e)):Re(this.node(),t).delay}function Dl(e,t){return function(){Oe(this,e).duration=+t.apply(this,arguments)}}function Vl(e,t){return t=+t,function(){Oe(this,e).duration=t}}function Xl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Dl:Vl)(t,e)):Re(this.node(),t).duration}function zl(e,t){if(typeof t!="function")throw new Error;return function(){Oe(this,e).ease=t}}function Hl(e){var t=this._id;return arguments.length?this.each(zl(t,e)):Re(this.node(),t).ease}function Kl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Oe(this,e).ease=n}}function Yl(e){if(typeof e!="function")throw new Error;return this.each(Kl(this._id,e))}function Wl(e){typeof e!="function"&&(e=cr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new ze(i,this._parents,this._name,this._id)}function Gl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l=t[s],u=n[s],c=l.length,f=a[s]=new Array(c),d,h=0;h<c;++h)(d=l[h]||u[h])&&(f[h]=d);for(;s<i;++s)a[s]=t[s];return new ze(a,this._parents,this._name,this._id)}function Ql(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Jl(e,t,n){var i,r,o=Ql(t)?Qn:Oe;return function(){var a=o(this,e),s=a.on;s!==i&&(r=(i=s).copy()).on(t,n),a.on=r}}function jl(e,t){var n=this._id;return arguments.length<2?Re(this.node(),n).on.on(e):this.each(Jl(n,e,t))}function Zl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function eu(){return this.on("end.remove",Zl(this._id))}function tu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hn(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s=i[a],l=s.length,u=o[a]=new Array(l),c,f,d=0;d<l;++d)(c=s[d])&&(f=e.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,cn(u[d],t,n,d,u,Re(c,n)));return new ze(o,this._parents,t,n)}function nu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ur(e));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l=i[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=e.call(c,c.__data__,f,l),h,b=Re(c,n),P=0,m=d.length;P<m;++P)(h=d[P])&&cn(h,t,n,P,d,b);o.push(d),a.push(c)}return new ze(o,a,t,n)}var iu=It.prototype.constructor;function ru(){return new iu(this._groups,this._parents)}function ou(e,t){var n,i,r;return function(){var o=ct(this,e),a=(this.style.removeProperty(e),ct(this,e));return o===a?null:o===n&&a===i?r:r=t(n=o,i=a)}}function Nr(e){return function(){this.style.removeProperty(e)}}function au(e,t,n){var i,r=n+"",o;return function(){var a=ct(this,e);return a===r?null:a===i?o:o=t(i=a,n)}}function su(e,t,n){var i,r,o;return function(){var a=ct(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),ct(this,e))),a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s))}}function lu(e,t){var n,i,r,o="style."+t,a="end."+o,s;return function(){var l=Oe(this,e),u=l.on,c=l.value[o]==null?s||(s=Nr(t)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(a,r=c),l.on=i}}function uu(e,t,n){var i=(e+="")=="transform"?hl:xr;return t==null?this.styleTween(e,ou(e,i)).on("end.style."+e,Nr(e)):typeof t=="function"?this.styleTween(e,su(e,i,Jn(this,"style."+e,t))).each(lu(this._id,e)):this.styleTween(e,au(e,i,t),n).on("end.style."+e,null)}function cu(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function fu(e,t,n){var i,r;function o(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&cu(e,a,n)),i}return o._value=t,o}function du(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,fu(e,t,n==null?"":n))}function hu(e){return function(){this.textContent=e}}function mu(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function pu(e){return this.tween("text",typeof e=="function"?mu(Jn(this,"text",e)):hu(e==null?"":e+""))}function gu(e){return function(t){this.textContent=e.call(this,t)}}function vu(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&gu(r)),t}return i._value=e,i}function yu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vu(e))}function wu(){for(var e=this._name,t=this._id,n=Pr(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=Re(l,t);cn(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ze(i,this._parents,e,n)}function bu(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--r===0&&o()}};n.each(function(){var u=Oe(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),r===0&&o()})}var ku=0;function ze(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Pr(){return++ku}var De=It.prototype;ze.prototype={constructor:ze,select:tu,selectAll:nu,selectChild:De.selectChild,selectChildren:De.selectChildren,filter:Wl,merge:Gl,selection:ru,transition:wu,call:De.call,nodes:De.nodes,node:De.node,size:De.size,empty:De.empty,each:De.each,on:jl,attr:Pl,attrTween:Fl,style:uu,styleTween:du,text:pu,textTween:yu,remove:eu,tween:Sl,delay:Ul,duration:Xl,ease:Hl,easeVarying:Yl,end:bu,[Symbol.iterator]:De[Symbol.iterator]};function _u(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Cu={time:null,delay:0,duration:250,ease:_u};function Au(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Su(e){var t,n;e instanceof ze?(t=e._id,e=e._name):(t=Pr(),(n=Cu).time=Gn(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&cn(l,e,t,u,a,n||Au(l,t));return new ze(i,this._parents,e,t)}It.prototype.interrupt=_l;It.prototype.transition=Su;const _n=e=>()=>e;function Iu(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Mu(e){e.stopImmediatePropagation()}function Cn(e){e.preventDefault(),e.stopImmediatePropagation()}var Oi={name:"drag"},An={name:"space"},ot={name:"handle"},at={name:"center"};const{abs:qi,max:be,min:ke}=Math;function Ui(e){return[+e[0],+e[1]]}function Di(e){return[Ui(e[0]),Ui(e[1])]}var Kt={name:"x",handles:["w","e"].map(en),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Sn={name:"y",handles:["n","s"].map(en),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ve={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Xi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},$u={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Tu={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function en(e){return{type:e}}function xu(e){return!e.ctrlKey&&!e.button}function Nu(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Pu(){return navigator.maxTouchPoints||"ontouchstart"in this}function In(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Eu(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Ru(){return Lu(Kt)}function Lu(e){var t=Nu,n=xu,i=Pu,r=!0,o=zn("start","brush","end"),a=6,s;function l(m){var w=m.property("__brush",P).selectAll(".overlay").data([en("overlay")]);w.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ve.overlay).merge(w).each(function(){var g=In(this).extent;Be(this).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1])}),m.selectAll(".selection").data([en("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ve.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=m.selectAll(".handle").data(e.handles,function(g){return g.type});S.exit().remove(),S.enter().append("rect").attr("class",function(g){return"handle handle--"+g.type}).attr("cursor",function(g){return Ve[g.type]}),m.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,w,S){m.tween?m.on("start.brush",function(g){c(this,arguments).beforestart().start(g)}).on("interrupt.brush end.brush",function(g){c(this,arguments).end(g)}).tween("brush",function(){var g=this,T=g.__brush,v=c(g,arguments),_=T.selection,$=e.input(typeof w=="function"?w.apply(this,arguments):w,T.extent),C=ln(_,$);function O(F){T.selection=F===1&&$===null?null:C(F),u.call(g),v.brush()}return _!==null&&$!==null?O:O(1)}):m.each(function(){var g=this,T=arguments,v=g.__brush,_=e.input(typeof w=="function"?w.apply(g,T):w,v.extent),$=c(g,T).beforestart();Un(g),v.selection=_===null?null:_,u.call(g),$.start(S).brush(S).end(S)})},l.clear=function(m,w){l.move(m,null,w)};function u(){var m=Be(this),w=In(this).selection;w?(m.selectAll(".selection").style("display",null).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?w[1][0]-a/2:w[0][0]-a/2}).attr("y",function(S){return S.type[0]==="s"?w[1][1]-a/2:w[0][1]-a/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?w[1][0]-w[0][0]+a:a}).attr("height",function(S){return S.type==="e"||S.type==="w"?w[1][1]-w[0][1]+a:a})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(m,w,S){var g=m.__brush.emitter;return g&&(!S||!g.clean)?g:new f(m,w,S)}function f(m,w,S){this.that=m,this.args=w,this.state=m.__brush,this.active=0,this.clean=S}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,w){return this.starting?(this.starting=!1,this.emit("start",m,w)):this.emit("brush",m),this},brush:function(m,w){return this.emit("brush",m,w),this},end:function(m,w){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,w)),this},emit:function(m,w,S){var g=Be(this.that).datum();o.call(m,this.that,new Iu(m,{sourceEvent:w,target:l,selection:e.output(this.state.selection),mode:S,dispatch:o}),g)}};function d(m){if(s&&!m.touches||!n.apply(this,arguments))return;var w=this,S=m.target.__data__.type,g=(r&&m.metaKey?S="overlay":S)==="selection"?Oi:r&&m.altKey?at:ot,T=e===Sn?null:$u[S],v=e===Kt?null:Tu[S],_=In(w),$=_.extent,C=_.selection,O=$[0][0],F,I,k=$[0][1],V,W,ve=$[1][0],K,q,G=$[1][1],N,ee,Q=0,oe=0,X,z=T&&v&&r&&m.shiftKey,he,ce,J=Array.from(m.touches||[m],L=>{const se=L.identifier;return L=Ai(L,w),L.point0=L.slice(),L.identifier=se,L});Un(w);var We=c(w,arguments,!0).beforestart();if(S==="overlay"){C&&(X=!0);const L=[J[0],J[1]||J[0]];_.selection=C=[[F=e===Sn?O:ke(L[0][0],L[1][0]),V=e===Kt?k:ke(L[0][1],L[1][1])],[K=e===Sn?ve:be(L[0][0],L[1][0]),N=e===Kt?G:be(L[0][1],L[1][1])]],J.length>1&&qe(m)}else F=C[0][0],V=C[0][1],K=C[1][0],N=C[1][1];I=F,W=V,q=K,ee=N;var Tt=Be(w).attr("pointer-events","none"),Ge=Tt.selectAll(".overlay").attr("cursor",Ve[S]);if(m.touches)We.moved=D,We.ended=xt;else{var U=Be(m.view).on("mousemove.brush",D,!0).on("mouseup.brush",xt,!0);r&&U.on("keydown.brush",dn,!0).on("keyup.brush",hn,!0),Us(m.view)}u.call(w),We.start(m,g.name);function D(L){for(const se of L.changedTouches||[L])for(const He of J)He.identifier===se.identifier&&(He.cur=Ai(se,w));if(z&&!he&&!ce&&J.length===1){const se=J[0];qi(se.cur[0]-se[0])>qi(se.cur[1]-se[1])?ce=!0:he=!0}for(const se of J)se.cur&&(se[0]=se.cur[0],se[1]=se.cur[1]);X=!0,Cn(L),qe(L)}function qe(L){const se=J[0],He=se.point0;var Le;switch(Q=se[0]-He[0],oe=se[1]-He[1],g){case An:case Oi:{T&&(Q=be(O-F,ke(ve-K,Q)),I=F+Q,q=K+Q),v&&(oe=be(k-V,ke(G-N,oe)),W=V+oe,ee=N+oe);break}case ot:{J[1]?(T&&(I=be(O,ke(ve,J[0][0])),q=be(O,ke(ve,J[1][0])),T=1),v&&(W=be(k,ke(G,J[0][1])),ee=be(k,ke(G,J[1][1])),v=1)):(T<0?(Q=be(O-F,ke(ve-F,Q)),I=F+Q,q=K):T>0&&(Q=be(O-K,ke(ve-K,Q)),I=F,q=K+Q),v<0?(oe=be(k-V,ke(G-V,oe)),W=V+oe,ee=N):v>0&&(oe=be(k-N,ke(G-N,oe)),W=V,ee=N+oe));break}case at:{T&&(I=be(O,ke(ve,F-Q*T)),q=be(O,ke(ve,K+Q*T))),v&&(W=be(k,ke(G,V-oe*v)),ee=be(k,ke(G,N+oe*v)));break}}q<I&&(T*=-1,Le=F,F=K,K=Le,Le=I,I=q,q=Le,S in Vi&&Ge.attr("cursor",Ve[S=Vi[S]])),ee<W&&(v*=-1,Le=V,V=N,N=Le,Le=W,W=ee,ee=Le,S in Xi&&Ge.attr("cursor",Ve[S=Xi[S]])),_.selection&&(C=_.selection),he&&(I=C[0][0],q=C[1][0]),ce&&(W=C[0][1],ee=C[1][1]),(C[0][0]!==I||C[0][1]!==W||C[1][0]!==q||C[1][1]!==ee)&&(_.selection=[[I,W],[q,ee]],u.call(w),We.brush(L,g.name))}function xt(L){if(Mu(L),L.touches){if(L.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Ds(L.view,X),U.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Tt.attr("pointer-events","all"),Ge.attr("cursor",Ve.overlay),_.selection&&(C=_.selection),Eu(C)&&(_.selection=null,u.call(w)),We.end(L,g.name)}function dn(L){switch(L.keyCode){case 16:{z=T&&v;break}case 18:{g===ot&&(T&&(K=q-Q*T,F=I+Q*T),v&&(N=ee-oe*v,V=W+oe*v),g=at,qe(L));break}case 32:{(g===ot||g===at)&&(T<0?K=q-Q:T>0&&(F=I-Q),v<0?N=ee-oe:v>0&&(V=W-oe),g=An,Ge.attr("cursor",Ve.selection),qe(L));break}default:return}Cn(L)}function hn(L){switch(L.keyCode){case 16:{z&&(he=ce=z=!1,qe(L));break}case 18:{g===at&&(T<0?K=q:T>0&&(F=I),v<0?N=ee:v>0&&(V=W),g=ot,qe(L));break}case 32:{g===An&&(L.altKey?(T&&(K=q-Q*T,F=I+Q*T),v&&(N=ee-oe*v,V=W+oe*v),g=at):(T<0?K=q:T>0&&(F=I),v<0?N=ee:v>0&&(V=W),g=ot),Ge.attr("cursor",Ve[S]),qe(L));break}default:return}Cn(L)}}function h(m){c(this,arguments).moved(m)}function b(m){c(this,arguments).ended(m)}function P(){var m=this.__brush||{selection:null};return m.extent=Di(t.apply(this,arguments)),m.dim=e,m}return l.extent=function(m){return arguments.length?(t=typeof m=="function"?m:_n(Di(m)),l):t},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:_n(!!m),l):n},l.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:_n(!!m),l):i},l.handleSize=function(m){return arguments.length?(a=+m,l):a},l.keyModifiers=function(m){return arguments.length?(r=!!m,l):r},l.on=function(){var m=o.on.apply(o,arguments);return m===o?l:m},l}function Bu(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function dt(e){return e=tn(Math.abs(e)),e?e[1]:NaN}function Fu(e,t){return function(n,i){for(var r=n.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(n.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function Ou(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var qu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nn(e){if(!(t=qu.exec(e)))throw new Error("invalid format: "+e);var t;return new jn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nn.prototype=jn.prototype;function jn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Uu(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var Er;function Du(e,t){var n=tn(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(Er=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+tn(e,Math.max(0,t+o-1))[0]}function zi(e,t){var n=tn(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Hi={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Bu,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zi(e*100,t),r:zi,s:Du,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ki(e){return e}var Yi=Array.prototype.map,Wi=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Vu(e){var t=e.grouping===void 0||e.thousands===void 0?Ki:Fu(Yi.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Ki:Ou(Yi.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=nn(f);var d=f.fill,h=f.align,b=f.sign,P=f.symbol,m=f.zero,w=f.width,S=f.comma,g=f.precision,T=f.trim,v=f.type;v==="n"?(S=!0,v="g"):Hi[v]||(g===void 0&&(g=12),T=!0,v="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var _=P==="$"?n:P==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",$=P==="$"?i:/[%p]/.test(v)?a:"",C=Hi[v],O=/[defgprs%]/.test(v);g=g===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function F(I){var k=_,V=$,W,ve,K;if(v==="c")V=C(I)+V,I="";else{I=+I;var q=I<0||1/I<0;if(I=isNaN(I)?l:C(Math.abs(I),g),T&&(I=Uu(I)),q&&+I==0&&b!=="+"&&(q=!1),k=(q?b==="("?b:s:b==="-"||b==="("?"":b)+k,V=(v==="s"?Wi[8+Er/3]:"")+V+(q&&b==="("?")":""),O){for(W=-1,ve=I.length;++W<ve;)if(K=I.charCodeAt(W),48>K||K>57){V=(K===46?r+I.slice(W+1):I.slice(W))+V,I=I.slice(0,W);break}}}S&&!m&&(I=t(I,1/0));var G=k.length+I.length+V.length,N=G<w?new Array(w-G+1).join(d):"";switch(S&&m&&(I=t(N+I,N.length?w-V.length:1/0),N=""),h){case"<":I=k+I+V+N;break;case"=":I=k+N+I+V;break;case"^":I=N.slice(0,G=N.length>>1)+k+I+V+N.slice(G);break;default:I=N+k+I+V;break}return o(I)}return F.toString=function(){return f+""},F}function c(f,d){var h=u((f=nn(f),f.type="f",f)),b=Math.max(-8,Math.min(8,Math.floor(dt(d)/3)))*3,P=Math.pow(10,-b),m=Wi[8+b/3];return function(w){return h(P*w)+m}}return{format:u,formatPrefix:c}}var Ut,Rr,Lr;Xu({thousands:",",grouping:[3],currency:["$",""]});function Xu(e){return Ut=Vu(e),Rr=Ut.format,Lr=Ut.formatPrefix,Ut}function zu(e){return Math.max(0,-dt(Math.abs(e)))}function Hu(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dt(t)/3)))*3-dt(Math.abs(e)))}function Ku(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,dt(t)-dt(e))+1}function Zn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Gi=Symbol("implicit");function Br(){var e=new bi,t=[],n=[],i=Gi;function r(o){let a=e.get(o);if(a===void 0){if(i!==Gi)return i;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new bi;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Br(t,n).unknown(i)},Zn.apply(r,arguments),r}function Fr(){var e=Br().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,o,a,s=!1,l=0,u=0,c=.5;delete e.unknown;function f(){var d=t().length,h=r<i,b=h?r:i,P=h?i:r;o=(P-b)/Math.max(1,d-l+u*2),s&&(o=Math.floor(o)),b+=(P-b-o*(d-l))*c,a=o*(1-l),s&&(b=Math.round(b),a=Math.round(a));var m=ia(d).map(function(w){return b+o*w});return n(h?m.reverse():m)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([i,r]=d,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(d){return[i,r]=d,i=+i,r=+r,s=!0,f()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(d){return arguments.length?(s=!!d,f()):s},e.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return Fr(t(),[i,r]).round(s).paddingInner(l).paddingOuter(u).align(c)},Zn.apply(f(),arguments)}function Yu(e){return function(){return e}}function Wu(e){return+e}var Qi=[0,1];function st(e){return e}function Dn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Yu(isNaN(t)?NaN:.5)}function Gu(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Qu(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1];return r<i?(i=Dn(r,i),o=n(a,o)):(i=Dn(i,r),o=n(o,a)),function(s){return o(i(s))}}function Ju(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=Dn(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=Qo(e,s,1,i)-1;return o[l](r[l](s))}}function ju(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zu(){var e=Qi,t=Qi,n=ln,i,r,o,a=st,s,l,u;function c(){var d=Math.min(e.length,t.length);return a!==st&&(a=Gu(e[0],e[d-1])),s=d>2?Ju:Qu,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=s(e.map(i),t,n)))(i(a(d)))}return f.invert=function(d){return a(r((u||(u=s(t,e.map(i),Pe)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Wu),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=cl,c()},f.clamp=function(d){return arguments.length?(a=d?!0:st,c()):a!==st},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return i=d,r=h,c()}}function ec(){return Zu()(st,st)}function tc(e,t,n,i){var r=ta(e,t,n),o;switch(i=nn(i==null?",f":i),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(o=Hu(r,a))&&(i.precision=o),Lr(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=Ku(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=zu(r))&&(i.precision=o-(i.type==="%")*2);break}}return Rr(i)}function nc(e){var t=e.domain;return e.ticks=function(n){var i=t();return ea(i[0],i[i.length-1],n==null?10:n)},e.tickFormat=function(n,i){var r=t();return tc(r[0],r[r.length-1],n==null?10:n,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,o=i.length-1,a=i[r],s=i[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=r,r=o,o=u);c-- >0;){if(u=sr(a,s,n),u===l)return i[r]=a,i[o]=s,t(i);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function Or(){var e=ec();return e.copy=function(){return ju(e,Or())},Zn.apply(e,arguments),nc(e)}function lt(e,t,n){this.k=e,this.x=t,this.y=n}lt.prototype={constructor:lt,scale:function(e){return e===1?this:new lt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new lt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new lt(1,0,0);lt.prototype;function Mn(e,t,n){const i=new Z(10).pow(t-n);return new Z(1.0001).pow(e).mul(i)}const ic=ht({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String}},setup(e,t){const n=A(1),i=_t(),r=le(()=>i),o=Dt(),{TickMath:a}=o,s=()=>{if(n.value<.015625)return;const h=n.value/2;n.value=h,u(e.poolInfo,h)},l=()=>{if(n.value>32)return;const h=n.value*2;n.value=h,u(e.poolInfo,h)},u=(h,b=1)=>{if(h&&h.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const P=Number(e.poolInfo.current_tick_index);let m=P+100*b,w=P-100*b,S,g;e.maxPrice==="\u221E"?g=0:e.direction?g=a.priceToTickIndex(new Z(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):g=a.priceToTickIndex(new Z(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?S=0:e.direction?S=a.priceToTickIndex(new Z(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):S=a.priceToTickIndex(new Z(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);const T=Number(h.liquidity)/Math.pow(10,6),v=e.tickList,_=[],$=[];let C={};for(let k=0;k<v.length;k++)C=v[k],C.index<=P&&C.index>=w?_.unshift(C):C.index>P&&C.index<=m&&$.push(C);let O=Number(T);for(let k=0;k<_.length;k++)_[k].liquityAmount=O-Number(_[k].liquidityGross.toString()/Math.pow(10,6));let F=Number(T);for(let k=0;k<$.length;k++)$[k].liquityAmount=F-Number($[k].liquidityGross.toString()/Math.pow(10,6));let I=[];I=[..._.reverse(),{index:P,liquityAmount:Number(T)},...$],e.direction||(I=I.reverse()),f(I,w,m,S,g,P)}};let c=A(!1);Vn(()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,window.onresize=()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,u(e.poolInfo,n.value)}});const f=(h,b,P,m,w,S)=>{console.log("1021####drawChart####chartData####",h),console.log("1021####drawChart####tickMin####",b),console.log("1021####drawChart####tickMax####",P),console.log("1021####drawChart####minPriceTick####",m),console.log("1021####drawChart####maxPriceTick####",w),console.log("1021####drawChart####currentTick####",S);const g={top:30,right:35,bottom:20,left:55};let T,v;c.value?(T=460-g.left-g.right,v=205-g.top-g.bottom):(T=340-g.left-g.right,v=205-g.top-g.bottom);let _=[b,S-(S-b)/2,S,S+(P-S)/2,P];const $=_[0]-(_[1]-_[0]),C=_[4]+(_[4]-_[3]),O=T/(C-$);Be("#chart").selectAll("*").remove();const F=Be("#chart").attr("width",T+g.left+g.right).attr("height",v+g.top+g.bottom).append("g").attr("transform",`translate(${g.left},${g.right})`),I=na(h,function(X){return Number(X.liquityAmount)})||0,k=Or().range([0,v]).domain([I,0]);Fr().rangeRound([0,T]).padding(.1),F.append("g").attr("id","barsBox").selectAll("rect").data(h).enter().append("rect").attr("x",function(X,z){return z===0?0:e.direction?Math.abs(h[z-1].index-$)*O:Math.abs(C-h[z-1].index)*O}).attr("y",function(X,z){return z===0?0:e.direction?k(h[z-1].liquityAmount):k(X.liquityAmount)}).attr("width",function(X,z){return z===0?0:e.direction?Math.abs(X.index-h[z-1].index)*O:Math.abs(h[z-1].index-X.index)*O}).attr("height",function(X,z){return z===0?0:e.direction?v-k(h[z-1].liquityAmount):v-k(X.liquityAmount)}).attr("fill","#213F37").attr("class","bars");const ve=F.append("g");ve.append("line").attr("x1",0).attr("y1",155).attr("x2",420).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const K=ve.append("g");if(e.direction)for(let X=0;X<_.length;X++){const z=Ze(String(Mn(_[X],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),Mn(_[X],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()>1e3?4:6)||"0",he=Math.abs(_[X]-$)*O;let ce=0;for(let J=0;J<z.length;J++)z[J]==="1"?ce+=4.02:z[J]==="."?ce+=2.64:z[J]==="7"?ce+=5.48:ce+=6;console.log(he,"x=>>>"),K.append("text").text(z).attr("x",he-ce/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}else for(let X=_.length-1;X>=0;X--){const z=Ze(String(1/Mn(_[X],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),6)||"0",he=Math.abs(_[X]-C)*O;let ce=0;for(let J=0;J<z.length;J++)z[J]==="1"?ce+=4.02:z[J]==="."?ce+=2.64:z[J]==="7"?ce+=5.48:ce+=6;K.append("text").text(z).attr("x",he-ce/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}const q=F.append("g").attr("id","left-handle"),G=F.append("g").attr("id","right-handle");r.value.theme=="default"?(q.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),q.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),q.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),q.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#68FFD8"),q.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#68FFD8"),G.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),G.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),G.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),G.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#68FFD8"),G.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#68FFD8")):(q.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),q.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),q.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),q.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#76C8FF"),q.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#76C8FF"),G.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),G.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),G.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),G.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#76C8FF"),G.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#76C8FF"));const N=Ru().extent([[0,0],[T,v]]).handleSize(30).on("end",oe);let ee,Q;e.direction?(ee=m<$?-100:Math.abs(m-$)*O,Q=w<$?-100:Math.abs(w-$)*O):(Q=m<$?-100:Math.abs(C-m)*O,ee=w<$?-100:Math.abs(C-w)*O),e.minPrice==="0"&&(ee=0),e.maxPrice==="\u221E"&&(Q=T),F.append("g").attr("class","brush").call(N).call(N.move,[ee,Q]),console.log(Q,"====>maxPriceTickX"),console.log(ee,"====>minPriceTickX"),q.attr("transform","translate("+ee+", 0)"),G.attr("transform","translate("+Q+", 0)");function oe(X){if(!X.sourceEvent||!X.selection||e.currentPriceTab!=="Custom")return;q.attr("transform","translate("+X.selection[0]+", 0)"),G.attr("transform","translate("+X.selection[1]+", 0)");let z,he;e.direction?(z=a.tickIndexToPrice(X.selection[0]/O+$,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),he=a.tickIndexToPrice(X.selection[1]/O+$,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(z=1/a.tickIndexToPrice(C-X.selection[0]/O,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),he=1/a.tickIndexToPrice(C-X.selection[1]/O,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(Ze(String(z),6))),t.emit("onChangeMaxPrice",String(Ze(String(he),6)))}Be(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#333")};A(""),re(()=>[e.poolInfo,e.tickList,e.minPrice,e.maxPrice,e.currentPriceTab],([h,b,P,m,w])=>{h&&b&&b.length>0&&P&&m&&(w!=="Custom"?(n.value=32,u(h,32)):u(h,n.value))},{immediate:!0});const d=A(!0);return re(()=>e.chartLoading,(h,b)=>{h!==b&&(d.value=h)},{immediate:!0,deep:!0}),{store:r,loading:d,zoomOut:s,zoomIn:l}}});const rc=e=>(on("data-v-51508ec7"),e=e(),an(),e),oc={class:"chart-box"},ac={class:"chart"},sc={class:"zoom"},lc=rc(()=>p("svg",{id:"chart"},null,-1));function uc(e,t,n,i,r,o){return x(),R("div",oc,[Zr(p("div",ac,[p("div",sc,[p("div",{class:"amplification",onClick:t[0]||(t[0]=(...a)=>e.zoomOut&&e.zoomOut(...a))}),p("div",{class:"narrow",onClick:t[1]||(t[1]=(...a)=>e.zoomIn&&e.zoomIn(...a))})]),lc],512),[[eo,!e.loading]])])}const cc=mt(ic,[["render",uc],["__scopeId","data-v-51508ec7"]]),fc=ht({components:{Modal:to},props:{},setup(){const e=A({}),t=_t(),n=le(()=>t),i=le(()=>n.value.chainName),r=le(()=>no[i.value]);let o=A(!0);const a=Zi(),s=le(()=>a),l=er();return re(()=>s.value.currentPositionInfo,u=>{u&&(e.value=u)}),{router:l,pools:s,positionInfo:e,decimalFormat:Ze,rateChange:o,config:r,importIcon:rn,store:n}}});const fn=e=>(on("data-v-861c9f0c"),e=e(),an(),e),dc=fn(()=>p("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),hc={class:"rejected-container"},mc={class:"coin-pair"},pc=fn(()=>p("use",{"xlink:href":"#icon-icon-copy"},null,-1)),gc=[pc],vc=["href"],yc=fn(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-jump"})],-1)),wc=[yc],bc={class:"coin-pair"},kc=["src"],_c=["src"],Cc={class:"fee"},Ac={class:"status"},Sc={class:"min-and-max"},Ic={key:0},Mc={class:"text"},$c={key:0,src:ir,alt:""},Tc={key:1,src:rr,alt:""},xc={class:"text"},Nc={key:1},Pc={class:"text"},Ec={key:0,src:ir,alt:""},Rc={key:1,src:rr,alt:""},Lc={class:"text"},Bc=fn(()=>p("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Fc=[Bc];function Oc(e,t,n,i,r,o){const a=ji,s=vo,l=Xn,u=io("Modal");return x(),Xe(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=c=>e.$emit("onClose"))},{closeIcon:de(()=>[dc]),default:de(()=>[p("div",hc,[ae(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:de(()=>[p("div",mc,[Ne(M(e.positionInfo.tokenName)+" ",1),(x(),R("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=c=>e.store.copy(e.positionInfo.nftHash))},gc)),p("a",{href:`https://explorer.aptoslabs.com/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},wc,8,vc)])]),_:1},8,["loading"]),p("div",{class:Ye(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[ae(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:de(()=>[p("div",bc,[p("div",null,[p("img",{src:e.fromCoinUrl||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,kc),p("img",{src:e.toCoinUrl||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,_c)]),p("span",null,M(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+M(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),p("div",Cc,M(e.$t("common.fee"))+" "+M(e.positionInfo.fee)+"% ",1)]),_:1},8,["loading"])],2),p("div",Ac,[ae(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),ae(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:de(()=>[p("div",Sc,[e.rateChange?(x(),R("div",Ic,[p("div",Mc,M(e.decimalFormat(String(e.positionInfo&&e.positionInfo.minPrice),6)),1),e.store.theme=="default"?(x(),R("img",$c)):(x(),R("img",Tc)),p("div",xc,M(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.decimalFormat(String(e.positionInfo&&e.positionInfo.maxPrice),6))+" "+M(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+M(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):(x(),R("div",Nc,[p("div",Pc,M(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6)),1),e.store.theme=="default"?(x(),R("img",Ec)):(x(),R("img",Rc)),p("div",Lc,M(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6))+" "+M(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+M(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),(x(),R("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=c=>e.rateChange=!e.rateChange)},Fc))])]),_:1},8,["loading"])]),ae(l,{onClick:t[2]||(t[2]=c=>e.router.push(`/position-detail/1?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}`))},{default:de(()=>[Ne(M(e.$t("newAdd.viewDetail")),1)]),_:1})]),_:1},8,["title"])}const qc=mt(fc,[["render",Oc],["__scopeId","data-v-861c9f0c"]]),Uc=ht({setup(){const{t:e,locale:t}=ro(),n=oo(),i=le(()=>n),r=_t(),o=A(20),a=A(0),s=A(null),l=A(!1),u=A(!1),c=A(!1),f=A(!1),d=A("fromCoin"),h=A(""),b=A(""),P=A(!1),m=A(!0),w=A(!1),S=A(!1),g=A(!0),T=A(!1),v=A(""),_=A(""),$=A(""),C=A(""),O=A(""),F=A(""),I=A(!1),k=A(!1),V=A(!1);A(!1);const W=A("0.01% "+e("common.feeTier")),ve=A(0),K=A(!0),q=A(!1),G=A([]),N=A(""),ee=A([]),Q=()=>{a.value=0,S.value=!0,setTimeout(()=>{S.value=!1},1e3),gt()},oe=le(()=>Number($.value)>Number(C.value)),X=y=>{w.value=y,$.value="0",C.value="\u221E"},z=le(()=>[{label:"0.01% "+e("common.feeTier"),title:"0.01% fee",text:"Best for extremely stable pairs."},{label:"0.05% "+e("common.feeTier"),title:"0.05% fee",text:"Best for stable pairs."},{label:"0.2% "+e("common.feeTier"),title:"0.2% fee",text:"Best for most pairs."},{label:"0.6% "+e("common.feeTier"),title:"0.6% fee",text:"Best for exotic pairs."}]),he=le(()=>r.slippage),ce=le(()=>!U.value||!D.value),J=le(()=>B.value&&B.value.is_pause?"Pool Closed":ce.value?e("newAdd.invalidPair"):B.value?Number(v.value)>Number(vt.value)?e("button.insufficientBalance",{name:U.value.symbol}):Number(_.value)>Number(yt.value)?e("button.insufficientBalance",{name:D.value.symbol}):T.value?e("modal.selectTokenModalTitle"):C.value!=="\u221E"&&Number($.value)>=Number(C.value)?e("newAdd.invalidRange"):!Number(v.value)&&!Number(_.value)?e("button.enterAmount"):e("button.addLiquidity"):e("button.poolNotFound")),We=_t(),Tt=le(()=>We),Ge=er(),U=A(),D=A();Vn(()=>{He()});const qe=y=>{$.value=y},xt=y=>{C.value=y},dn=()=>{K.value=!0;const y=U.value;if(U.value=D.value,D.value=y,m.value=!m.value,v.value=_.value,K.value=!1,$.value!==""&&C.value!==""&&$.value!=="0"&&C.value!=="\u221E"){const E=$.value,j=C.value;(!q.value||!m.value)&&($.value=String(1/Number(j)),C.value=String(1/Number(E)));const H=O.value,Y=F.value;O.value=String(1/Number(Y)),F.value=String(1/Number(H)),vn({key:N.value,...oi.value[N.value]}),q.value=!1}};re([$,C],([y],[E])=>{gt(),B.value&&C.value!=="\u221E"&&Number($.value)>=Number(C.value)?V.value=!0:V.value=!1});const hn=y=>{var E,j,H,Y;d.value=y,y==="fromCoin"?(h.value=((E=D.value)==null?void 0:E.address)||"",b.value=((j=U.value)==null?void 0:j.address)||""):(h.value=((H=U.value)==null?void 0:H.address)||"",b.value=((Y=D.value)==null?void 0:Y.address)||""),P.value=!0},L=y=>{T.value=!1,d.value==="fromCoin"?(D.value&&y.address.toLowerCase()===(D==null?void 0:D.value.address.toLowerCase())&&(D.value=null),U.value=y):(U.value&&y.address.toLowerCase()===(U==null?void 0:U.value.address.toLowerCase())&&(U.value=null),D.value=y),P.value=!1},se=y=>{y==="fromCoin"?(g.value=!0,v.value=vt.value>0?U.value.symbol=="APT"?new Z(Number(vt.value)).sub(new Z(.2)).toString():String(vt.value):""):(g.value=!1,_.value=yt.value>0?D.value.symbol=="APT"?new Z(Number(yt.value)).sub(new Z(.2)).toString():String(yt.value):"")},He=()=>{s.value=setInterval(()=>{u.value||a.value<o.value&&(a.value+=1,a.value===o.value&&(a.value=0))},1e3)};re(v,(y,E)=>{y&&gt()}),re(_,(y,E)=>{y&&gt()});const Le=()=>{U.value=null,D.value=null,$.value="0",C.value="0",v.value="",_.value="",T.value=!0,W.value="",I.value=!1,_e.value=!0,Ce.value=!0,K.value=!1},ei=A(!1);ao();const{setIsShowSuccess:ti,setIsShowRejected:ni,setIsShowWaiting:Nt,setTransactionDesc:qr,setTransactionTxid:ii,setPositiomNum:Ur}=r,Ke=so(),Dr=Zi(),Me=le(()=>Dr);re(()=>Me.value.newTokenObj,y=>{mi(y)||(Ke&&Ke.query&&Ke.query.from?U.value=Bt(y,Ke.query.from):U.value=Bt(y,"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDT"),Ke&&Ke.query&&Ke.query.from?D.value=Bt(y,Ke.query.to):D.value=Bt(y,"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC"))},{immediate:!0});const pt=A({}),_e=A(!1),Ce=A(!1),Pt=A(),Et=A(),Qe=Dt(),mn=A(),ri=A(),pn=A(),gn=A(),gt=async()=>{var Je,Ue;if(!B.value||(console.log("\u6DFB\u52A0\u6D41\u52A8\u6027\u9884\u8BA1\u7B97=====>"),!v.value&&!_.value&&!$.value&&!C.value))return;const{TickUtil:y,TickMath:E,getNearestTickByTick:j}=Dt(),H=B.value.token_a.decimals,Y=B.value.token_b.decimals;let ne,fe,te,ue,ye,me,Ae,xe;const Se=B.value.current_tick_index,Te=B.value.priceConfigObj;console.log(B.value,"====>poolInfo.value.current_tick_index;");let pe;if(B.value.token_a.address.toLowerCase()===U.value.address.toLowerCase()&&B.value.token_b.address.toLowerCase()===D.value.address.toLowerCase()?pe=!0:pe=!1,$.value==="0"&&C.value==="\u221E"?(te=y.getMinIndex(B.value.tickSpacing),ue=y.getMaxIndex(B.value.tickSpacing),ye=E.tickIndexToSqrtPriceX64(te),me=E.tickIndexToSqrtPriceX64(ue)):N.value=="Custom"?(pe?(ne=Number($.value),fe=Number(C.value)):(ne=1/Number(C.value),fe=1/Number($.value)),Ae=E.priceToTickIndex(new Z(ne),H,Y),xe=E.priceToTickIndex(new Z(fe),H,Y),te=j(Ae,B.value.tickSpacing),ue=j(xe,B.value.tickSpacing),console.log(te,"===>tick_lower"),console.log(ue,"===>tick_upper"),ye=E.priceToSqrtPriceX64(new Z(ne),H,Y),me=E.priceToSqrtPriceX64(new Z(fe),H,Y)):(console.log(Te[N.value],"===>priceConfigObj[currentPriceTab.value]"),te=Te[N.value].lower,ue=Te[N.value].upper,ye=E.tickIndexToSqrtPriceX64(te),me=E.tickIndexToSqrtPriceX64(ue)),C.value!=="\u221E"&&te>=ue){_e.value=!0,v.value="",Ce.value=!0,_.value="";return}if(console.log(Se,te,ue,"===>currentTickIndex"),C.value==="\u221E"||Se>te&&Se<ue){_e.value=!1,Ce.value=!1;let we;if(v.value||_.value){if(g.value){const yn=new Z(v.value).mul(Math.pow(10,U.value.decimals)).toString();we=new je(yn)}else{const yn=new Z(_.value).mul(Math.pow(10,D.value.decimals)).toString();we=new je(yn)}console.log(pe,"======>directs");const{liquidityAmount:ge,tokenMaxA:Rt,tokenMaxB:Lt,tokenMaxAOrigin:Gr,tokenMaxBOrigin:Qr}=Qe.estLiquidityAndcoinAmountFromOneAmounts({tokenA:B.value.token_a,tokenB:B.value.token_b,lowerTick:te,upperTick:ue,coinAmount:we,iscoinA:pe?g.value:!g.value,roundUp:!0,slippage:Number(he.value)/100,curSqrtPrice:new je(B.value.current_sqrt_price)});pt.value={liquidityAmount:ge,tokenMaxA:Rt,tokenMaxB:Lt,tokenMaxAOrigin:Gr,tokenMaxBOrigin:Qr},pe?g.value?_.value=Number(Lt)>0?Lt:"":v.value=Number(Rt)>0?Rt:"":g.value?_.value=Rt:v.value=Lt}}else if(Se>=ue){if(pe?v.value="":_.value="",_e.value=pe,Ce.value=!pe,v.value||_.value){let we;if(pe){const ge=new Z(_.value).mul(Math.pow(10,(Je=D.value)==null?void 0:Je.decimals)).toString();we=new je(ge),pt.value={liquidityAmount:ci(ye,me,we),tokenMaxA:0,tokenMaxB:_.value}}else{const ge=new Z(v.value).mul(Math.pow(10,(Ue=U.value)==null?void 0:Ue.decimals)).toString();we=new je(ge),pt.value={liquidityAmount:ci(ye,me,we),tokenMaxA:0,tokenMaxB:v.value}}}}else if(Se<=te){if(_e.value=!pe,Ce.value=pe,pe?_.value="":v.value="",v.value||_.value){let we;if(pe){const ge=new Z(v.value).mul(Math.pow(10,U.value.decimals)).toString();we=new je(ge),console.log(ye,"minPriceX64===>"),console.log(me,"maxPriceX64===>maxPriceX64"),console.log(ge,"===>amount"),pt.value={liquidityAmount:fi(ye,me,we),tokenMaxA:v.value,tokenMaxB:0}}else{const ge=new Z(_.value).mul(Math.pow(10,D.value.decimals)).toString();we=new je(ge),pt.value={liquidityAmount:fi(ye,me,we),tokenMaxA:_.value,tokenMaxB:0}}}}else _e.value=!0,v.value="",Ce.value=!0,_.value=""},B=le(()=>{if(Me.value.newTokenObj&&U.value&&D.value){const y=Object.values(Me.value.pools).find(E=>{var j,H,Y,ne;return E.token_a.address.toUpperCase()===((j=U.value.address)==null?void 0:j.toUpperCase())&&E.token_b.address.toUpperCase()===((H=D.value.address)==null?void 0:H.toUpperCase())||E.token_b.address.toUpperCase()===((Y=U.value.address)==null?void 0:Y.toUpperCase())&&E.token_a.address.toUpperCase()===((ne=D.value.address)==null?void 0:ne.toUpperCase())});return y&&!mi(y)?y:null}return null}),oi=A({}),Vr=async y=>{if(y){console.log(y,"poolInfo======>");const{TickMath:E,getNearestTickByTick:j}=Dt();K.value=!0,y.token_a.address.toLowerCase()===U.value.address.toLowerCase()&&y.token_b.address.toLowerCase()===D.value.address.toLowerCase()?m.value=!0:m.value=!1,console.log(m.value,"direct.value===>direct.value"),q.value=!0;const H=y.token_a.decimals,Y=y.token_b.decimals;_e.value=!1,Ce.value=!1,W.value=y.fee+"% "+e("common.feeTier");const ne=y.current_tick_index;mn.value=wn(E.sqrtPriceX64ToPrice(y.current_sqrt_price,H,Y).toString(),6),ri.value=Ze(String(1/mn.value),6);const fe=await Qe.getTicks(y);G.value=Qe.getTickDataFromUrlData(fe);let te=y.priceConfigObj;const ue=ne-Number(B.value=="unstable"?B.value.tickSpacing*2:B.value.tickSpacing*3),ye=ne+Number(B.value=="unstable"?B.value.tickSpacing*2:B.value.tickSpacing*3);te["Full Range"]={lower:-443630,upper:443630},te.Custom={lower:ue,upper:ye};const me=[];for(let Ae in te)me.push({...te[Ae],key:Ae});if(ee.value=me,y.type=="stable"?N.value="suggested":N.value="active",oi.value=te,vn({key:N.value,...te[N.value]}),m.value){const Ae=te[N.value].lower,xe=te[N.value].upper,Se=E.tickIndexToPrice(Ae,H,Y).toString(),Te=E.tickIndexToPrice(xe,H,Y).toString();O.value=String(Se),$.value=String(Se),F.value=String(Te),C.value=String(Te)}else{const Ae=te[N.value].lower,xe=te[N.value].upper,Se=E.tickIndexToPrice(Ae,H,Y).toString(),Te=E.tickIndexToPrice(xe,H,Y).toString();O.value=String(1/Number(Te)),$.value=String(1/Number(Te)),F.value=String(1/Number(Se)),C.value=String(1/Number(Se))}K.value=!1}},ai=A();re(()=>Me.value.RATES,y=>{y&&(ai.value=y)},{immediate:!0}),re(()=>[B.value,v.value,_.value,ai.value,N.value],([y,E,j,H])=>{var Y,ne;if(y&&(j||E)&&H&&H[y.token_a.name.toUpperCase()]&&H[y.token_b.name.toUpperCase()]){const fe=E?Number(E):0,te=j?Number(j):0,ue=fe*((Y=H[y.token_a.name.toUpperCase()])==null?void 0:Y.price),ye=te*((ne=H[y.token_b.name.toUpperCase()])==null?void 0:ne.price),me=ue+ye,Ae=(ue/me*100).toFixed(0),xe=(ye/me*100).toFixed(0);pn.value=Ae,gn.value=xe}else y&&H&&(pn.value="--",gn.value="--")}),re(()=>B.value,y=>{y?Vr(y):($.value="0",C.value="0",v.value="",_.value="",W.value="",I.value=!1,_e.value=!1,Ce.value=!1)},{immediate:!0});const vt=le(()=>i.value.assets&&U.value&&i.value.assets[U.value.address]?pi(i.value.assets[U.value.address].balance,U.value.decimals):0),yt=le(()=>i.value.assets&&D.value&&i.value.assets[D.value.address]?pi(i.value.assets[D.value.address].balance,D.value.decimals):0),Xr=async()=>{var me,Ae,xe,Se,Te,pe;ei.value=!1,Me.value.currentPositionInfo={},ii(""),qr(e("tips.increaseLiquiditySuccess",{from:_e.value?"":`${v.value} ${(me=U.value)==null?void 0:me.symbol}`,and:!_e.value&&!Ce.value?"and":"",to:Ce.value?"":`${_.value} ${(Ae=D.value)==null?void 0:Ae.symbol}`})),Nt(!0);const y=m.value?g.value:!g.value;console.log(Pt.value,"tickLower.value1397"),console.log(Et.value,"tickLower.value1397");const E=B.value.priceConfigObj;let j,H,Y,ne,fe,te;const ue=B.value.token_a.decimals,ye=B.value.token_b.decimals;$.value==="0"&&C.value==="\u221E"?(Y=di.getMinIndex(B.value.tickSpacing),ne=di.getMaxIndex(B.value.tickSpacing)):N.value=="Custom"?(m.value?(j=Number($.value),H=Number(C.value)):(j=1/Number(C.value),H=1/Number($.value)),fe=rt.priceToTickIndex(new Z(j),ue,ye),te=rt.priceToTickIndex(new Z(H),ue,ye),Y=hi(fe,B.value.tickSpacing),ne=hi(te,B.value.tickSpacing)):(Y=E[N.value].lower,ne=E[N.value].upper),console.log(Y,"===>tick_lower"),console.log(ne,"===>tick_upper"),console.log(B.value.current_tick_index,"===>currentTick1429");try{const Je=await Qe.getAddLiquidityTransactionPayload({pool:{poolAddress:B.value.poolAddress,token_a:B.value.token_a,token_b:B.value.token_b},amount:g.value?v.value:_.value,fix_amount_a:y,tick_lower:Y,tick_upper:ne,index:0,slippage:Number(he.value)/100,roundUp:!0});console.log(Je,"===>payload");let Ue;if(Ue=await i.value.currentWallet.signAndSubmitTransaction(Je),Ue&&Ue.hash){ii(Ue.hash),Nt(!1),ti(!0),console.log(Ue,"tx====>");const we={title:e("button.addLiquidity"),desc:e("tips.addLiquiditySuccessText",{from:_e.value?"":`${v.value} ${(xe=U.value)==null?void 0:xe.symbol}`,and:!_e.value&&!Ce.value?"and":"",to:Ce.value?"":`${_.value} ${(Se=D.value)==null?void 0:Se.symbol}`}),hash:Ue.hash,tit:`Opened Position: ${B.value.symbol}`,text:`Deopsit ${_e.value?"":`${v.value} ${(Te=U.value)==null?void 0:Te.symbol}`} ${!_e.value&&!Ce.value?"and":""} ${Ce.value?"":`${_.value} ${(pe=D.value)==null?void 0:pe.symbol}`}`};Qe.showTransitionPending(we);const ge=await Qe.watchTransaction(we,!0);console.log("1219###watchInfo####",ge,ge.nftInfo[0].data),ge.status&&(ti(!1),Me.value.setCurrentPositionLoading(!0),Me.value.setCurrentPositionInfo(ge.nftInfo[0].data.id.creator,ge.nftInfo[0].data.id.collection,ge.nftInfo[0].data.name),l.value=!0,setTimeout(()=>{Qe.getAccount(i.value.address)},1e3)),Ur()}else Nt(!1),ni(!0);v.value="",_.value=""}catch(Je){v.value="",_.value="",console.log("Swap Error###",Je),Nt(!1),ni(!0)}},zr=y=>{switch(y){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"Full Range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"Custom":return e("newAdd.customTips")}},Hr=y=>{switch(y){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"Full Range":return e("newAdd.fullRange");case"Custom":return e("newAdd.custom")}},vn=y=>{N.value=y.key;const E=B.value.token_a.decimals,j=B.value.token_b.decimals,{lower:H,upper:Y}=y;console.log(y,"===>item");const ne=rt.tickIndexToPrice(H,E,j).toString(),fe=rt.tickIndexToPrice(Y,E,j).toString();if(console.log(ne,fe,"min=====>max"),y.key=="Full Range"){Pt.value=H,Et.value=Y,X(!0);return}m.value?(O.value=String(ne),$.value=String(ne),F.value=String(fe),C.value=String(fe),Pt.value=H,Et.value=Y):(O.value=String(1/Number(fe)),$.value=String(1/Number(fe)),F.value=String(1/Number(ne)),C.value=String(1/Number(ne)),Pt.value=rt.priceToTickIndex(new Z(1/Number(fe)),E,j),Et.value=rt.priceToTickIndex(new Z(1/Number(ne)),E,j)),gt()},si=A(""),li=A(""),ui=A(""),Kr=le(()=>r);re(()=>[Kr.value.newTopPoolsObj,B.value],([y,E])=>{if(console.log(E,"===>poolInfo"),console.log(y,"newValue========>"),y&&E&&y[E.poolAddress]){const j=y[E.poolAddress];si.value=j.apr_7day,li.value=wn(j.tvl_in_usd,2),ui.value=wn(j.vol_in_usd_24h,2)}},{immediate:!0,deep:!0});const Yr=le(()=>Me.value.newTokenObj&&U.value.address&&Me.value.newTokenObj[U.value.address]&&Me.value.newTokenObj[U.value.address].logoURI),Wr=le(()=>Me.value.newTokenObj&&D.value.address&&Me.value.newTokenObj[D.value.address]&&Me.value.newTokenObj[D.value.address].logoURI);return{isViewDetail:l,addCommom:lo,fromCoinUrl:Yr,toCoinUrl:Wr,t:e,wallet:i,toAdd:Xr,chartLoading:K,currentTick:ve,tickList:G,poolInfo:B,storeIndex:Tt,importIcon:rn,refresh:S,addLiquidityBtnText:J,slippage:he,isShowSwapSetting:c,autoRefreshTime:o,countdown:a,setMarketTimer:He,marketTimer:s,loading:u,fromCoin:U,toCoin:D,openCoinSelect:hn,onCoinSelect:L,existingCoins:h,lastSelectCoin:b,currentCoinKey:d,showCoinSelect:P,fromCoinAmount:v,toCoinAmount:_,maxBtnSelect:se,fixedFromCoin:g,isShowLiquidityModal:ei,direct:m,toggle:dn,edit:I,inputValue:W,feeTierList:z,minPrice:$,maxPrice:C,invalidPriceRange:oe,defaultMinPrice:O,defaultMaxPrice:F,priceRangeChangeMin:qe,priceRangeChangeMax:xt,toFullRange:X,unilateral:f,clearAll:Le,clickClear:T,positionError:V,positionTips:k,router:Ge,clickRefresh:Q,fromCoinBlance:vt,toCoinBlance:yt,showToCoinLock:Ce,showFromCoinLock:_e,currentPriceReverse:ri,currentPrice:mn,getPirceText:zr,currentPriceTab:N,currentPriceTabList:ee,getPirceKey:Hr,priceTab:vn,apr:si,liquidityTvl:li,vol24:ui,fromCoinRatio:pn,toCoinRatio:gn}}}),Dc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",Vc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",Xc=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,zc=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const $t=e=>(on("data-v-8d62e0fb"),e=e(),an(),e),Hc={class:"pools-container"},Kc={class:"title"},Yc={class:"left"},Wc={class:"right title-right"},Gc=$t(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Qc={class:"content"},Jc={class:"content-left"},jc={class:"content-left-bg"},Zc={class:"content-left-title"},ef={class:"coin-select"},tf={class:"deposit-title"},nf={class:"card-container"},rf={class:"card-item"},of={key:0,class:"unilateral"},af={key:0,src:tr,alt:""},sf={key:1,src:nr,alt:""},lf={key:2},uf={class:"card-item"},cf={key:0,class:"unilateral"},ff={key:0,src:tr,alt:""},df={key:1,src:nr,alt:""},hf={key:2},mf={key:0,class:"deposit-ratio"},pf={class:"lebal"},gf=$t(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-information"})],-1)),vf={class:"text"},yf=$t(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-add"})],-1)),wf={class:"content-right"},bf={class:"content-right-title"},kf=$t(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-information"})],-1)),_f={key:0,class:"price-tab"},Cf=["onClick"],Af={key:1,class:"current-price"},Sf={key:0,class:"coin"},If={key:1,class:"coin"},Mf={key:2,class:"toggle"},$f=["src"],Tf=["src"],xf={key:3,class:"position-tips"},Nf=["src"],Pf={class:"tips"},Ef={key:4,class:"position-tips"},Rf=["src"],Lf={class:"error"},Bf={class:"d3-chart-box"},Ff={key:0},Of={key:0,class:"noDataImg",src:Xc},qf={key:1,class:"noDataImg",src:zc},Uf={key:2,class:"not-select-mask"},Df={key:0,class:"pool-info"},Vf={class:"pool-info-title"},Xf={class:"info-block-container"},zf={class:"info-block"},Hf={class:"leabl"},Kf={class:"text"},Yf={class:"info-block"},Wf={class:"leabl"},Gf={class:"text"},Qf={class:"info-block"},Jf={class:"leabl"},jf={class:"text"},Zf={class:"info-block"},ed={class:"leabl"},td={class:"text"},nd=$t(()=>p("svg",{class:"icon","aria-hidden":"true"},[p("use",{"xlink:href":"#icon-icon-add"})],-1));function id(e,t,n,i,r,o){var T,v,_,$,C,O,F,I;const a=Jr,s=jr,l=Ao,u=Ji,c=ho,f=co,d=Xn,h=zo,b=cc,P=fo,m=mo,w=po,S=go,g=qc;return x(),R("div",Hc,[ae(a),p("div",Kc,[p("div",Yc,[p("span",null,M(e.$t("common.concentratedLiquidity")),1)]),p("div",Wc,[p("span",{class:"clear",onClick:t[0]||(t[0]=(...k)=>e.clearAll&&e.clearAll(...k))},M(e.$t("common.clearAll")),1),p("div",{class:"slippage-icon",onClick:t[1]||(t[1]=k=>e.isShowSwapSetting=!0)},[Gc,p("span",null,M(e.slippage)+"%",1)]),ae(s,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:t[2]||(t[2]=k=>e.clickRefresh())},null,8,["loading","auto-refresh-time","countdown"])])]),p("div",Qc,[p("div",Jc,[p("div",jc,[p("div",Zc,M(e.$t("common.selectPool")),1),p("div",ef,[ae(l,{"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","coin-name":e.fromCoin&&e.fromCoin.symbol,onClick:t[3]||(t[3]=k=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name"]),ae(l,{"coin-icon":e.toCoin?e.toCoin.logoURI:"","coin-name":e.toCoin&&e.toCoin.symbol,onClick:t[4]||(t[4]=k=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name"])]),ae(u,{placeholder:e.$t("common.feeTier"),value:e.inputValue,disabled:""},null,8,["placeholder","value"]),p("div",tf,M(e.$t("newAdd.depositAmounts")),1),p("div",nf,[p("div",rf,[ae(c,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=k=>e.fromCoinAmount=k),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[6]||(t[6]=k=>e.maxBtnSelect("fromCoin")),onOnInput:t[7]||(t[7]=k=>{e.fromCoinAmount=k,e.fixedFromCoin=!0}),onOnSelect:t[8]||(t[8]=k=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon"]),e.showFromCoinLock?(x(),R("div",of,[p("div",null,[e.storeIndex.theme=="default"?(x(),R("img",af)):(x(),R("img",sf)),e.fromCoin&&e.toCoin?(x(),R("p",lf,M(e.$t("tips.marketprice")),1)):ie("",!0)])])):ie("",!0)]),p("div",uf,[ae(c,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[9]||(t[9]=k=>e.toCoinAmount=k),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"","import-page":"deposit","has-arrow":!1,onOnMax:t[10]||(t[10]=k=>e.maxBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=k=>{e.toCoinAmount=k,e.fixedFromCoin=!1}),onOnSelect:t[12]||(t[12]=k=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon"]),e.showToCoinLock?(x(),R("div",cf,[p("div",null,[e.storeIndex.theme=="default"?(x(),R("img",ff)):(x(),R("img",df)),e.fromCoin&&e.toCoin?(x(),R("p",hf,M(e.$t("tips.marketprice")),1)):ie("",!0)])])):ie("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(x(),R("img",{key:0,class:"add",src:Dc,alt:"",onClick:t[13]||(t[13]=(...k)=>e.toggle&&e.toggle(...k))})):ie("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(x(),R("img",{key:1,class:"add",src:Vc,alt:"",onClick:t[14]||(t[14]=(...k)=>e.toggle&&e.toggle(...k))})):ie("",!0)]),e.poolInfo?(x(),R("div",mf,[p("div",pf,[Ne(M(e.$t("newAdd.depositRatio"))+" ",1),ae(f,{placement:"bottom","arrow-point-at-center":""},{title:de(()=>[p("span",null,M(e.$t("newAdd.depositRatioTips")),1)]),default:de(()=>[gf]),_:1})]),p("div",vf,M(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+M(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+M(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+M(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)])):ie("",!0)]),ae(d,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.addLiquidityBtnText!==e.$t("button.addLiquidity")||e.poolInfo.is_pause:!1,class:"big-btn",onClick:t[15]||(t[15]=k=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:de(()=>[yf,p("span",null,M(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"])]),p("div",wf,[p("div",bf,[Ne(M(e.$t("newAdd.selectRange"))+" ",1),ae(f,{placement:"bottom","arrow-point-at-center":""},{title:de(()=>[p("span",null,M(e.$t("newAdd.selectRangeTips")),1)]),default:de(()=>[kf]),_:1})]),p("div",{class:Ye(e.clickClear||!e.fromCoin||!e.toCoin||!e.poolInfo?"content-right-bg content-right-bg-height":"content-right-bg")},[e.poolInfo&&e.minPrice&&e.maxPrice?(x(),R("div",_f,[(x(!0),R(gi,null,uo(e.currentPriceTabList,k=>(x(),R("div",{key:k,class:Ye(["price-item",{"price-item-active":k.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:V=>e.priceTab(k)},[ae(f,{placement:"bottom","arrow-point-at-center":""},{title:de(()=>[p("span",null,M(e.getPirceText(k.key)),1)]),default:de(()=>[Ne(" "+M(e.getPirceKey(k.key)),1)]),_:2},1024)],10,Cf))),128))])):ie("",!0),e.poolInfo?(x(),R("div",Af,[e.fromCoin&&e.toCoin&&e.direct?(x(),R("div",Sf,[p("span",null,M(e.$t("common.currentPrice")),1),Ne(" "+M(e.addCommom(e.currentPrice))+" "+M((T=e.toCoin)==null?void 0:T.symbol)+" per "+M((v=e.fromCoin)==null?void 0:v.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(x(),R("div",If,[p("span",null,M(e.$t("common.currentPrice")),1),Ne(" "+M(e.addCommom(e.currentPriceReverse))+" "+M((_=e.toCoin)==null?void 0:_.symbol)+" per "+M(($=e.fromCoin)==null?void 0:$.symbol),1)])):ie("",!0),e.fromCoin&&e.toCoin?(x(),R("div",Mf,[p("div",{class:Ye(e.direct?"item active-item":"item"),onClick:t[16]||(t[16]=k=>e.direct?"":e.toggle())},[p("img",{src:e.direct?e.fromCoin.logoURI:e.toCoin.logoURI,alt:""},null,8,$f),Ne(" "+M(e.direct?(C=e.fromCoin)==null?void 0:C.symbol:(O=e.toCoin)==null?void 0:O.symbol),1)],2),p("div",{class:Ye(e.direct?"item ":"item active-item"),onClick:t[17]||(t[17]=k=>e.direct?e.toggle():"")},[p("img",{src:e.direct?e.toCoin.logoURI:e.fromCoin.logoURI,alt:""},null,8,Tf),Ne(" "+M(e.direct?(F=e.toCoin)==null?void 0:F.symbol:(I=e.fromCoin)==null?void 0:I.symbol),1)],2)])):ie("",!0)])):ie("",!0),e.poolInfo?(x(),Xe(h,{key:2,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):ie("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(x(),R("div",xf,[p("img",{src:e.importIcon("/image/icon-tips@2x.png"),alt:""},null,8,Nf),p("p",Pf,M(e.$t("tips.positionTips")),1)])):ie("",!0),e.positionError&&!e.clickClear&&e.poolInfo?(x(),R("div",Ef,[p("img",{src:e.importIcon("/image/icon-tips-error@2x.png"),alt:""},null,8,Rf),p("p",Lf,M(e.$t("tips.positionError")),1)])):ie("",!0),p("div",Bf,[(e.clickClear||!e.poolInfo)&&!e.chartLoading?(x(),R("div",Ff,[e.storeIndex.theme=="default"?(x(),R("img",Of)):(x(),R("img",qf)),p("p",null,M(e.$t("newAdd.positionAppear")),1)])):ie("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(x(),Xe(b,{key:1,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","onOnChangeMinPrice","onOnChangeMaxPrice"])):ie("",!0),e.currentPriceTab!=="Custom"?(x(),R("div",Uf)):ie("",!0),e.chartLoading?(x(),Xe(P,{key:3})):ie("",!0)])],2),e.poolInfo?(x(),R("div",Df,[e.apr&&e.liquidityTvl&&e.vol24?(x(),R(gi,{key:0},[p("div",Vf,M(e.$t("newAdd.poolInfo")),1),p("div",Xf,[p("div",zf,[p("div",Hf,M(e.$t("common.apr")),1),p("div",Kf,[ae(f,{placement:"bottom","arrow-point-at-center":""},{title:de(()=>[p("span",null,M(e.$t("tips.aprTipsTest")),1)]),default:de(()=>[Ne(" "+M(e.apr),1)]),_:1})])]),p("div",Yf,[p("div",Wf,M(e.$t("common.liquidity")),1),p("div",Gf,"$ "+M(e.liquidityTvl),1)]),p("div",Qf,[p("div",Jf,M(e.$t("common.volume24h")),1),p("div",jf,"$ "+M(e.vol24),1)]),p("div",Zf,[p("div",ed,M(e.$t("newAdd.tickSpacing")),1),p("div",td,M(e.poolInfo&&e.poolInfo.tick_spacing),1)])])],64)):(x(),Xe(P,{key:1}))])):ie("",!0)])]),ae(d,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.poolInfo.is_pause:!1,class:"big-btn h5-btn",onClick:t[18]||(t[18]=k=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:de(()=>[nd,p("span",null,M(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(x(),Xe(m,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[19]||(t[19]=k=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):ie("",!0),e.isShowSwapSetting?(x(),Xe(w,{key:1,onOnClose:t[20]||(t[20]=k=>e.isShowSwapSetting=!1)})):ie("",!0),e.isShowLiquidityModal?(x(),Xe(S,{key:2,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,onToAdd:e.toAdd,onOnClose:t[21]||(t[21]=k=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","onToAdd"])):ie("",!0),e.isViewDetail?(x(),Xe(g,{key:3,onOnClose:t[22]||(t[22]=k=>e.isViewDetail=!1)})):ie("",!0)])}const vd=mt(Uc,[["render",id],["__scopeId","data-v-8d62e0fb"]]);export{vd as default};
