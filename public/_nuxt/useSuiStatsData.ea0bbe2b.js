import{b as U}from"./pool.83f6439f.js";import{c as i}from"./index.c41a185a.js";import{f as _}from"./fetchFun.ff4aae28.js";function q(){const{setOverallStatistics:m,setStatsData:f,setGetStatsError:d,setTopPoolsList:y,setTopPoolsObj:v,setNewTopPoolsObj:D,setAddressLpTokens:O,setTopTokensList:j,setTopTokenObj:$,setNewTopTokenObj:P,setAddressHistTokens:A}=U(),b=async()=>{try{const o=await _(`${i.Sui.api}/v2/sui/statistics`);return o?(console.log("ðŸš€ ~ fetchStatsStatisticsData ~ res:",o),m(o),o):null}catch(o){return console.log("ðŸš€ ~ fetchStatsStatisticsData ~ error:",o),null}},h=async(o,n,c)=>{try{const r=n?await _(`${i.Sui.api}/v2/sui/statistics_pools?order_by=${o}&limit=${n}&offset=${c}`):await _(`${i.Sui.api}/v2/sui/statistics_pools?order_by=-vol&offset=0`);return r?(console.log("ðŸš€ ~ fetchStatsPoolsData ~ res:",r),r):null}catch(r){return console.log("ðŸš€ ~ fetchStatsPoolsData ~ error:",r),null}},S=async(o,n,c)=>{try{const r=n?await _(`${i.Sui.api}/v2/sui/statistics_coins?order_by=${o}&limit=${n}&offset=${c}`):await _(`${i.Sui.api}/v2/sui/statistics_coins?order_by=-vol&offset=0`);return r?(console.log("ðŸš€ ~ fetchStatsTokensData ~ res:",r),r):null}catch(r){return console.log("ðŸš€ ~ fetchStatsTokensData ~ error:",r),null}};return{fetchAllStatsData:async o=>{try{const n=await b(),c=await h(),r=await S(),E=await fetch(`${i.Sui.api}/v2/sui/contract/price`).then(l=>l.json()),e={...n};e.pools=c==null?void 0:c.pools,e.tokens=r==null?void 0:r.tokens,console.log("ðŸš€ ~ fetchAllStatsData ~ statisticsData:",e,r,c,n),f(e);let w=[],g=[];const k=[];let u=!1,T;if(g=Object.fromEntries(E.data.list.map(l=>[l.swap_account,l])),A(g),e&&e.pools){for(let s=0;s<e.pools.length;s++){u=!1;const t=e.pools[s],a=t.rewarder_apr[0]?Number(t.rewarder_apr[0].substring(0,t.rewarder_apr[0].length-1)):0,L=t.rewarder_apr[1]?Number(t.rewarder_apr[1].substring(0,t.rewarder_apr[1].length-1)):0,N=t.rewarder_apr[2]?Number(t.rewarder_apr[2].substring(0,t.rewarder_apr[2].length-1)):0,I=a+L+N;t.stable_farming&&t.stable_farming.stable_rewarder.map(x=>{x.amount_second>0&&(u=!0)}),T=t.stable_farming&&t.stable_farming.apr*100,k.push({...t,pure_tvl_in_usd:t==null?void 0:t.pure_tvl_in_usd,aprNum:t?String(Number(t.apr_24h.substring(0,t.apr_24h.length-1))+I):"0",token_a_address:t.token_a_reserves=="SUI"?"0x2::sui::SUI":t.token_a_address,token_b_address:t.token_b_reserves=="SUI"?"0x2::sui::SUI":t.token_b_address,apr_7day:t.apr_24h,fee_24_h:t.fee_24_h?t.fee_24_h:"",isStableFarming:u,stableFarmingApr:T})}y(k),w=Object.fromEntries(e.pools.map(s=>[s.swap_account,{...s,apr_7day:s.apr_24h}])),O(w);const l=Object.fromEntries(e.pools.map(s=>[s.name,{...s,apr_7day:s.apr_24h}]));v(l);const p=Object.fromEntries(e.pools.map(s=>[s.swap_account,{...s,apr_7day:s.apr_24h}]));D(p)}if(e&&e.tokens){const p=e.tokens.filter(a=>!o||!o[a.address]).map(a=>({...a,pure_tvl_in_usd:a==null?void 0:a.pure_tvl_in_usd}));j(p);const s=Object.fromEntries(p.map(a=>[a.name,a]));$(s);const t=Object.fromEntries(p.map(a=>[a.address,a]));P(t)}d(!1)}catch(n){console.log("ðŸš€ ~ fetchAllStatsData ~ error:",n),f({}),d(!0)}},fetchStatsStatisticsData:b,fetchStatsPoolsData:h,fetchStatsTokensData:S}}export{q as u};
