import{_ as Fe}from"./upgrade-select-input.3325e82d.js";import{_ as He}from"./upgrade-loading.fd3caa51.js";import{_ as Ve}from"./status-block.ff7b452e.js";import{g as ue,a as Ge,u as $e,s as qe,j as pe,e as u,i as Me,b as We,c as ce,d as c,D as ze}from"./pool.3b6c39ad.js";import{a as be,l as Ie,m as g,e as we,o as t,f as r,h as s,i as H,u as a,v as n,c as Ue,w as ke,x as b,j as K,z as x,N as Je,p as fe,k as ye,b as Ne,r as _,D as Y,y as Ce,q as Ke,t as E,F as z,s as J,S as Ze,C as Qe,O as Xe,U as Ye,L as Re,B as xe}from"./entry.0541b11c.js";/* empty css              */import{u as _e,c as Pe,a as es}from"./sha256.0934ce98.js";/* empty css              */import{i as te}from"./import-icon.de3e6c66.js";import{_ as Ae}from"./icon-arrow_2x.948aedb2.js";import{_ as Se}from"./icon-arrow_2x.4ffddb8e.js";import{u as ss}from"./notifi.230618a1.js";import{_ as Oe}from"./icon_on_2x.5e96733d.js";import{_ as os,a as as}from"./img-no-Positions_2x.49ee80f8.js";import{_ as ns,a as ts}from"./img-connect-wallet_2x.8720f45b.js";import"./coin-select.8733f536.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./useWhale.cc0470fa.js";import"./index.5fd539ec.js";const rs=be({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(e){const{t:k}=Ie(),D=_e(),C=g(()=>D),w=g(()=>C.value.chainName);console.log(e.pItem,"pItempItem121221");const T=g(()=>Pe[w.value]);return{getExplorerUrl:ue,store:C,config:T,t:k}}});const je=e=>(fe("data-v-4530e4e6"),e=e(),ye(),e),is={class:"status-block-box"},ds={key:0,class:"owner-addres"},ls=["href"],ms=["href"],us={class:"copy-link"},ps=je(()=>s("use",{"xlink:href":"#icon-icon-copy"},null,-1)),cs=["href"],vs=je(()=>s("svg",{class:"icon","aria-hidden":"true"},[K(" > "),s("use",{"xlink:href":"#icon-icon-link"})],-1)),hs=[vs];function gs(e,k,D,C,w,T){const y=Ve,p=Je;return t(),r("div",{class:x(["upgrade-position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[s("div",is,[H(y,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"])]),e.pItem.tokenName?(t(),r("div",ds,[e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:a(ue))("nftAddress",e.pItem.nftHash),target:"_blank"},n(e.pItem.tokenName.split("|")[1]),9,ls)):(t(),Ue(p,{key:1,placement:"bottom","arrow-point-at-center":""},{title:ke(()=>[s("span",null,n(e.pItem.tokenName),1)]),default:ke(()=>[s("a",{target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:a(ue))("nftAddress",e.pItem.nftHash)},n(e.pItem.tokenName.substr(0,4))+" ... "+n(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,ms)]),_:1}))])):b("",!0),s("div",us,[(t(),r("svg",{class:"icon","aria-hidden":"true",onClick:k[0]||(k[0]=h=>e.store.copy(e.pItem.nftHash))},[K(" > "),ps])),e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:a(ue))("nftAddress",e.pItem.nftHash),target:"_blank"},hs,8,cs)):b("",!0)])],2)}const ks=we(rs,[["render",gs],["__scopeId","data-v-4530e4e6"]]),bs=be({props:{pItem:{type:Object,required:!0}},setup(e){const{t:k}=Ie(),D=Ne(),C=_e(),w=g(()=>C),T=g(()=>w.value.chainName?Ge(w.value.chainName):{}),y=$e(),p=g(()=>y),h=()=>{y.setPositionDetailCurrentTab("increase"),w.value.chainName==="Aptos"?D.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):D.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},P=g(()=>p.value.allTokenObj&&e.pItem.token_a.address&&p.value.allTokenObj[e.pItem.token_a.address]&&p.value.allTokenObj[e.pItem.token_a.address].logo_url),o=g(()=>p.value.allTokenObj&&e.pItem.token_b.address&&p.value.allTokenObj[e.pItem.token_b.address]&&p.value.allTokenObj[e.pItem.token_b.address].logo_url),F=g(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feeOwed),L=g(()=>(console.log(p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feesResult,"772"),p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feesResult)),ee=g(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarder),q=g(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),se=g(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),Z=_(0),ve=_();Y(()=>p.value.RATES,m=>{m&&(ve.value=m)},{immediate:!0});const re=m=>{var A;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((A=p.value.tokensObj[m==null?void 0:m.address])==null?void 0:A.logo_url)||(w.value.theme==="default"?te("/image/coins/unknown.png"):te("/image/coins/sui-unknown.png"))},he=g(()=>p.value.tokensObj);Ce(()=>{B(e.pItem),ie(e.pItem.minPrice,e.pItem.maxPrice)});const oe=_("--"),ie=(m,A)=>{m!=="0"&&A!=="∞"?oe.value=qe(1/(1-Number((m/A)**.25)),2)+"x":oe.value=1},V=_(30),I=_(null),B=async m=>{var R,$,S;console.log("0607###list###aprPercentageObj###poolInfo###",m),console.log("0607###list###aprPercentageObj###props.pItem###",e.pItem),console.log("0607###list###aprPercentageObj###directs###",!0);const M=Number(e.pItem.minPrice),W=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:Number(e.pItem.maxPrice);let f=[];f=w.value&&w.value.addressHistTokens&&w.value.addressHistTokens[m.poolAddress]&&w.value.addressHistTokens[m.poolAddress].data&&w.value.addressHistTokens[m.poolAddress].data.length>0&&Object.fromEntries(w.value.addressHistTokens[m.poolAddress].data.map(O=>[O.key,O.value]));const U=Number(Number(V.value==7?f.before_7_d_contract_price_lowest:V.value==24?f.before_24_h_contract_price_lowest:f.before_30_d_contract_price_lowest)),N=Number(Number(V.value==7?f.before_7_d_contract_price_highest:V.value==24?f.before_24_h_contract_price_highest:f.before_30_d_contract_price_highest));console.log("0607###list###aprPercentageObj###lowerUserPrice###",M),console.log("0607###list###aprPercentageObj###upperUserPrice###",W),console.log("0607###list###aprPercentageObj###lowerHistPrice###",U),console.log("0607###list###aprPercentageObj###upperHistPrice###",N);const G=p.value.tokensObj,l=await T.value.getEstPositionAPRWithMulti(M,W,U,N);console.log("0607###lis###resMulti####",l.toString());const i=Number(l.toString()),d=w.value.newTopPoolsObj[m.poolAddress];let v;if(d){V.value==7?v=d.apr_7day?Number(d.apr_7day.substring(0,d.apr_7day.length-1)):0:V.value==24?v=d.apr_24h?Number(d.apr_24h.substring(0,d.apr_24h.length-1)):0:v=d.apr_30day?Number(d.apr_30day.substring(0,d.apr_30day.length-1)):0;const O=d.rewarder_apr[0]?Number(d.rewarder_apr[0].substring(0,d.rewarder_apr[0].length-1)):0,Q=d.rewarder_apr[1]?Number(d.rewarder_apr[1].substring(0,d.rewarder_apr[1].length-1)):0,X=d.rewarder_apr[2]?Number(d.rewarder_apr[2].substring(0,d.rewarder_apr[2].length-1)):0,ae=Number(i*v),de=Number(i*O),le=Number(i*Q),me=Number(i*X),ne=ae+(m.rewarder_display1?de:0)+(m.rewarder_display2?le:0)+(m.rewarder_display3?me:0),Te=m.rewarder_infos[0]?(R=G[m.rewarder_infos[0].coinAddress])==null?void 0:R.symbol:"--",Le=m.rewarder_infos[1]?($=G[m.rewarder_infos[1].coinAddress])==null?void 0:$.symbol:"--",Be=m.rewarder_infos[2]?(S=G[m.rewarder_infos[2].coinAddress])==null?void 0:S.symbol:"--",Ee={aprFee:ae==1/0||isNaN(ae)?0:ae,rewardAprList:[{rewarder_name:Te,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"one",rewarder_display:m.rewarder_display1},{rewarder_name:Le,rewarder_apr:le==1/0||isNaN(le)?0:le,styleName:"two",rewarder_display:m.rewarder_display2},{rewarder_name:Be,rewarder_apr:me==1/0||isNaN(me)?0:me,styleName:"three",rewarder_display:m.rewarder_display2}],aprPercentageTotal:ne==1/0||isNaN(ne)||ne===0?0:ne,aprPercentage:pe(ae/ne,2),is_display_rewarder:m.is_display_rewarder};I.value=Ee}};return{aprNum:g(()=>{var m,A,M,W,f,U,N,G,l,i,d,v;return I.value?I.value.is_display_rewarder?(m=I.value)!=null&&m.aprPercentageTotal?((A=I.value)==null?void 0:A.aprPercentageTotal)>1e4?">10,000":((M=I.value)==null?void 0:M.aprPercentageTotal)<.01&&((W=I.value)==null?void 0:W.aprPercentageTotal)>0?"<0.01":u((f=I.value)==null?void 0:f.aprPercentageTotal,2):(U=I.value)!=null&&U.rewardAprList?"0":"--":(N=I.value)!=null&&N.aprFee?((G=I.value)==null?void 0:G.aprFee)>1e4?">10,000":((l=I.value)==null?void 0:l.aprFee)<.01&&((i=I.value)==null?void 0:i.aprFee)>0?"<0.01":u((d=I.value)==null?void 0:d.aprFee,2):(v=I.value)!=null&&v.rewardAprList?"0":"--":"--"}),lever:oe,tokensObj:he,showNum:Me,fromCoinUrl:P,toCoinUrl:o,decimalFormat:We,clickDetails:h,t:k,addCommom:u,importIcon:te,router:D,store:w,pendingRewarder:ee,pendingFees:F,pendingRewarderArr:se,pendingFeesArr:L,checkNullObj:ce,fixD:pe,decimalUi:c,pendingRewarderView:q,aprAmount:Z,getCoinIcon:re,Decimal:ze}}});const j=e=>(fe("data-v-3b1002c8"),e=e(),ye(),e),Is={class:"upgrade-position-item"},ws={class:"card-content"},fs={class:"left"},ys={class:"top card-header"},_s={class:"token-item"},Rs={class:"item"},$s={key:0,class:"token-warning"},Us={key:0},Ns={class:"item"},Cs={key:0,class:"token-warning"},Ps={key:0},As={class:"card-header-right"},Ss={key:0,class:"item"},Os=j(()=>s("span",null,"Leverage",-1)),js={class:"item"},Ds=j(()=>s("span",null,"Estimated APR",-1)),Ts=j(()=>s("div",{class:"more-img"},null,-1)),Ls={class:"bottom"},Bs={class:"info-block-container"},Es={class:"info-block"},Fs=j(()=>s("div",{class:"leabl"},"Fee Tier",-1)),Hs={class:"text"},Vs={class:"info-block"},Gs=j(()=>s("div",{class:"leabl"},"Price Range",-1)),qs={class:"text"},Ms={class:"min-and-max"},Ws={class:"left-text"},zs={class:"text"},Js={class:"hover-text"},Ks={key:0,src:Ae,alt:""},Zs={key:1,src:Se,alt:""},Qs={class:"right-text"},Xs={class:"text"},Ys={class:"hover-text"},xs={class:"leabl"},eo={class:"text"},so={key:0,class:"hover-rewarder"},oo={class:"rewarder-info"},ao={class:"left-rewarder"},no={alt:""},to={class:"right-rewarder"},ro={class:"amount"},io={key:0,class:"amount-usd"},lo={key:1,class:"amount-usd"},mo={class:"rewarder-info"},uo={class:"left-rewarder"},po={alt:""},co={class:"right-rewarder"},vo={class:"amount"},ho={key:0,class:"amount-usd"},go={key:1,class:"amount-usd"},ko={class:"leabl"},bo={key:0,class:"text"},Io={key:1,class:"text"},wo={key:2,class:"text"},fo={key:3,class:"hover-rewarder"},yo={class:"left-rewarder"},_o={alt:""},Ro={class:"right-rewarder"},$o={class:"amount"},Uo={class:"amount-usd"},No={class:"leabl"},Co={key:0,class:"text"},Po={key:1,class:"text"},Ao={key:2,class:"hover-rewarder"},So={class:"left-rewarder"},Oo={alt:""},jo={class:"right-rewarder"},Do={class:"amount"},To={class:"amount-usd"},Lo={class:"h5-bottom"},Bo={class:"item"},Eo=j(()=>s("span",null,"Leverage",-1)),Fo={class:"item"},Ho=j(()=>s("span",null,"Estimated APR",-1)),Vo=j(()=>s("div",{class:"more-img"},null,-1)),Go={class:"info"},qo={class:"info-item"},Mo=j(()=>s("div",{class:"left"},"Fee Tier",-1)),Wo={class:"right"},zo={class:"info-item range-item"},Jo={class:"left"},Ko={class:"right"},Zo={class:"min-and-max"},Qo={class:"text"},Xo={key:0,src:Ae,alt:""},Yo={key:1,src:Se,alt:""},xo={class:"text"},ea={class:"info-item"},sa=j(()=>s("div",{class:"left"},"Liquidity",-1)),oa={class:"right"},aa={key:0,class:"hover-rewarder"},na={class:"rewarder-info"},ta={class:"left-rewarder"},ra={alt:""},ia={class:"right-rewarder"},da={class:"amount"},la={key:0,class:"amount-usd"},ma={key:1,class:"amount-usd"},ua={class:"rewarder-info"},pa={class:"left-rewarder"},ca={alt:""},va={class:"right-rewarder"},ha={class:"amount"},ga={key:0,class:"amount-usd"},ka={key:1,class:"amount-usd"},ba={class:"info-item"},Ia=j(()=>s("div",{class:"left"},"Pending Fees",-1)),wa={key:0,class:"right"},fa={key:1,class:"right"},ya={key:2,class:"right"},_a={key:3,class:"hover-rewarder"},Ra={class:"left-rewarder"},$a={alt:""},Ua={class:"right-rewarder"},Na={class:"amount"},Ca={class:"amount-usd"},Pa={key:0,class:"info-item"},Aa={class:"left"},Sa={key:0,class:"right"},Oa={key:1,class:"right"},ja={key:2,class:"hover-rewarder"},Da={class:"left-rewarder"},Ta={alt:""},La={class:"right-rewarder"},Ba={class:"amount"},Ea={class:"amount-usd"};function Fa(e,k,D,C,w,T){var P;const y=ks,p=Ze,h=Ke("image");return t(),r("div",Is,[s("div",ws,[s("div",fs,[H(y,{"p-item":e.pItem,"current-status":((P=e.pItem)==null?void 0:P.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:k[0]||(k[0]=(...o)=>e.clickDetails&&e.clickDetails(...o))},[s("div",ys,[s("div",_s,[s("div",Rs,[s("div",null,[E(s("img",null,null,512),[[h,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(t(),r("div",$s)):b("",!0),s("span",null,n(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,[K(n(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" ",1),e.store.theme=="default"?(t(),r("span",Us,n(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)):b("",!0)])]),s("div",Ns,[s("div",null,[E(s("img",null,null,512),[[h,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(t(),r("div",Cs)):b("",!0),s("span",null,n(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,[K(n(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" ",1),e.store.theme=="default"?(t(),r("span",Ps,n(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)):b("",!0)])])]),s("div",As,[e.pItem.minPrice!=="0"&&e.pItem.maxPrice!=="∞"?(t(),r("div",Ss,[s("p",null,n(e.lever),1),Os])):b("",!0),s("div",js,[s("p",null,n(e.aprNum)+"%",1),Ds]),Ts])]),s("div",Ls,[s("div",Bs,[s("div",Es,[Fs,s("div",Hs,n(e.pItem.fee*100)+"%",1)]),s("div",Vs,[Gs,s("div",qs,[s("div",Ms,[s("div",Ws,[s("div",zs,n(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.minPrice,6))),1),s("div",Js,n(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.minPrice,6))),1)]),e.store.theme=="default"?(t(),r("img",Ks)):(t(),r("img",Zs)),s("div",Qs,[s("div",Xs,n((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.maxPrice,6))),1),s("div",Ys,n((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.maxPrice,6))),1)]),s("span",null,n(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+n(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])]),s("div",{class:x(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",xs,n(e.$t("common.liquidity")),1),s("div",eo," $"+n(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:a(u))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",so,[s("div",oo,[s("div",ao,[E(s("img",no,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,n(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",to,[s("div",ro,n(e.pItem.needReverse?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",lo,n(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:a(pe))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",io,n(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:a(pe))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",mo,[s("div",uo,[E(s("img",po,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,n(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",co,[s("div",vo,n(e.pItem.needReverse?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",go,n(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",ho,n(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):b("",!0)],2),s("div",{class:x(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",ko,n(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(t(),r("div",bo,"$ --")):isNaN(e.pendingFees)?(t(),r("div",wo,[H(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",Io,n(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:a(u))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",fo,[(t(!0),r(z,null,J(e.pendingFeesArr,o=>(t(),r("div",{key:o,class:"rewarder-info"},[s("div",yo,[E(s("img",_o,null,512),[[h,e.getCoinIcon(o)]]),s("span",null,n(o.symbol),1)]),s("div",Ro,[s("div",$o,n(Number(o.amount)==0?0:Number(o.amount)>1e-6?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(o.amount,o.decimals),o.decimals):"<0.000001"),1),s("div",Uo,n(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:a(u))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:a(ce))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",{key:0,class:x(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",No,n(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",Co," $"+n(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Po,[H(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",Ao,[(t(!0),r(z,null,J(e.pendingRewarderArr,o=>(t(),r("div",{key:o,class:"rewarder-info"},[s("div",So,[E(s("img",Oo,null,512),[[h,o.logoURI]]),s("span",null,n(o.symbol),1)]),s("div",jo,[s("div",Do,n(("decimalUi"in e?e.decimalUi:a(c))(o.amount,o.decimals)),1),s("div",To,n(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:a(u))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)],2)):b("",!0)])])])]),s("div",Lo,[s("div",{class:"card-header-right",onClick:k[1]||(k[1]=(...o)=>e.clickDetails&&e.clickDetails(...o))},[s("div",Bo,[s("p",null,n(e.lever),1),Eo]),s("div",Fo,[s("p",null,n(e.aprNum)+"%",1),Ho]),Vo]),s("div",Go,[s("div",qo,[Mo,s("div",Wo,n(e.pItem.fee*100)+"%",1)]),s("div",zo,[s("div",Jo,[K("Price Range ("),s("span",null,n(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+n(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",Ko,[s("div",Zo,[s("div",Qo,n(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(t(),r("img",Xo)):(t(),r("img",Yo)),s("div",xo,n((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.maxPrice,6))),1)])])]),s("div",ea,[sa,s("div",oa," $"+n(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:a(u))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",aa,[s("div",na,[s("div",ta,[E(s("img",ra,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,n(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ia,[s("div",da,n(e.pItem.needReverse?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",ma,n(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:a(u))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",la,n(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:a(u))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",ua,[s("div",pa,[E(s("img",ca,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,n(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",va,[s("div",ha,n(e.pItem.needReverse?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",ka,n(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",ga,n(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):b("",!0)]),s("div",ba,[Ia,e.pendingFees==="--"?(t(),r("div",wa,"$ --")):isNaN(e.pendingFees)?(t(),r("div",ya,[H(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",fa,n(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:a(u))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",_a,[(t(!0),r(z,null,J(e.pendingFeesArr,o=>(t(),r("div",{key:o,class:"rewarder-info"},[s("div",Ra,[E(s("img",$a,null,512),[[h,e.getCoinIcon(o)]]),s("span",null,n(o.symbol),1)]),s("div",Ua,[s("div",Na,n(Number(o.amount)==0?0:Number(o.amount)>1e-6?("addCommom"in e?e.addCommom:a(u))(("decimalUi"in e?e.decimalUi:a(c))(o.amount,o.decimals),o.decimals):"<0.000001"),1),s("div",Ca,n(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:a(u))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:a(ce))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",Pa,[s("div",Aa,n(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",Sa," $"+n(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Oa,[H(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",ja,[(t(!0),r(z,null,J(e.pendingRewarderArr,o=>(t(),r("div",{key:o,class:"rewarder-info"},[s("div",Da,[E(s("img",Ta,null,512),[[h,o.logoURI]]),s("span",null,n(o.symbol),1)]),s("div",La,[s("div",Ba,n(("decimalUi"in e?e.decimalUi:a(c))(o.amount,o.decimals)),1),s("div",Ea,n(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:a(u))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)])):b("",!0)])])])}const Ha=we(bs,[["render",Fa],["__scopeId","data-v-3b1002c8"]]),Va=be({setup(){const e=_(!1),{t:k}=Ie(),D=_(["position"]),C=Ne(),w=_(""),T=_e(),y=g(()=>T),p=g(()=>y.value.chainName?Pe[y.value.chainName]:{});let h=_([]);const P=$e(),o=g(()=>P),F=es(),L=g(()=>F),ee=_(!1),q=_(k("tab.all")),se=_([k("tab.layerZero"),k("tab.wormhole"),k("tab.celer")]),Z=_(!0),ve=_("TVL"),re=()=>{e.value=!0,h.value=[],L.value.address&&P.getMyPositons(L.value.address,o.value.poolsObj,y.value.chainName),setTimeout(()=>{e.value=!1},1e3)},he=g(()=>{const l=Array.from(new Set(o.value.poolConfigList.flatMap(i=>!i.category||i.category==""?"All":i.category)));return console.log(l,"newArr"),l.length<=1?[]:l}),oe=l=>{o.value.setCurrentPoolTab(l)};Y(()=>y.value.isRefresh,l=>{var i;l&&((i=C==null?void 0:C.currentRoute)==null?void 0:i.value.name.split("-")[1])=="position"&&re()}),Ce(()=>{h.value=[],document.addEventListener("click",()=>{ee.value=!1}),P.setMyPositionsLoading(!0)}),Qe(()=>{document.addEventListener("click",()=>{ee.value=!1})}),Xe(()=>{L.value.connected||(h.value=[])});const ie=()=>{e.value=!0;let l=[];o.value.myPositions.forEach(i=>{var S,O,Q,X;let d,v;const R=i.amountA*((S=o.value.RATES[i.token_a.address])==null?void 0:S.price),$=i.amountB*((O=o.value.RATES[i.token_b.address])==null?void 0:O.price);(Q=o.value.RATES[i.token_a.address])!=null&&Q.price&&((X=o.value.RATES[i.token_b.address])!=null&&X.price)?(d=R+$,v=R+$):(d=" --",v=0),(o.value.currentPoolTab=="All"&&(i.category==""||!i.category)||o.value.currentPoolTab!=="All"&&i.category==o.value.currentPoolTab)&&l.push({...i,amountUSD:d,amountUSDOrigin:v,tokenARates:R,tokenBRates:$})}),q.value!="All"?Z.value?(h.value=l.sort((i,d)=>Number(d.amountUSDOrigin)-Number(i.amountUSDOrigin)),e.value=!1):(h.value=l.sort((i,d)=>Number(i.amountUSDOrigin)-Number(d.amountUSDOrigin)),e.value=!1):Z.value?(h.value=l.sort((i,d)=>d.amountUSDOrigin-i.amountUSDOrigin),e.value=!1):(h.value=l.sort((i,d)=>i.amountUSDOrigin-d.amountUSDOrigin),e.value=!1),console.log(h.value,"list.value========>")};Y(()=>[o.value.myPositions,o.value.RATES],([l,i])=>{l&&i&&(console.log("0605==>updateLpList9099999"),ie())},{immediate:!0}),Y(()=>[L.value.address,o.value.poolConfigList,o.value.poolsObj,y.value.chainName],([l,i,d,v])=>{var R,$,S;l&&i&&i.length>0&&v&&(v!=null&&v.toLowerCase().includes((R=i[0])==null?void 0:R.chain))&&!ce(d)&&(v==="Aptos"?i.length===Object.values(d).length:(S=($=Object.values(d)[0])==null?void 0:$.chain)!=null&&S.includes("sui"))&&(console.log(d,i,"0605==>getMyPositons9099999"),P.getMyPositons(L.value.address,d,v))},{immediate:!0,deep:!0}),Y(()=>[q.value,Z.value,o.value.currentPoolTab],([l])=>{ie()});const V=l=>{const i=[];se.value.forEach((d,v)=>{d==l?i[v]=q.value:i[v]=d}),se.value=i,q.value=l},I=ss(),B=g(()=>I),ge=g(()=>P),m=async l=>{await I.getSourceGroups();const i=B.value.sourceGroups&&B.value.sourceGroups.length>0&&B.value.sourceGroups[0]&&B.value.sourceGroups[0].sources||[];for(let d=0;d<i.length;d++){const{pool_address:v,position_index:R}=JSON.parse(i[d].blockchainAddress);let $=!1,S;for(let O=0;O<l.length;O++){const{poolAddress:Q,index:X}=l[O];v==Q&&Number(X)==Number(R)&&($=!0),S={pool_address:v,position_index:R}}$||await I.subscribePosition(S,"",!1,!1)}},A=async()=>{await I.getSourceGroups();const l=B.value.sourceGroups&&B.value.sourceGroups.length>0&&B.value.sourceGroups[0]&&B.value.sourceGroups[0].sources||[];for(let i=0;i<l.length;i++){const{pool_address:d,position_index:v}=JSON.parse(l[i].blockchainAddress),{name:R}=l[i],$={pool_address:d,position_index:v};await I.subscribePosition($,R,!1,!1)}},M=g(()=>ge.value.myPositionsLoading);Y(()=>ge.value.myPositions,(l,i)=>{p.value.hasNotifi&&(l&&l.length>0&&i&&i.length!==l.length?m(l):l&&l.length==0&&!M.value&&A())},{immediate:!0});const W=l=>{var i;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((i=o.value.tokensObj[l==null?void 0:l.address])==null?void 0:i.logo_url)||(y.value.theme==="default"?te("/image/coins/unknown.png"):te("/image/coins/sui-unknown.png"))},f=_(null),U=g(()=>f.value&&f.value.firstToken?f.value.firstToken:null),N=g(()=>f.value&&f.value.lastToken?f.value.lastToken:null),G=g(()=>{let l=[];l=h.value;const i=l.filter((d,v)=>U.value&&N.value?d.coinA.symbol==U.value.symbol&&d.coinB.symbol==N.value.symbol||d.coinA.symbol==N.value.symbol&&d.coinB.symbol==U.value.symbol:U.value?d.coinA.symbol.toLowerCase().includes(U.value.symbol.toLowerCase())||d.coinB.symbol.toLowerCase().includes(U.value.symbol.toLowerCase()):N.value?d.coinA.symbol.toLowerCase().includes(N.value.symbol.toLowerCase())||d.coinB.symbol.toLowerCase().includes(N.value.symbol.toLowerCase()):l);return o.value.myPositionsLoading||T.setPositiomAmount(i.length),i});return Ye(()=>{T.setPositiomAmount("--")}),{tabArr:he,changeTab:oe,showList:G,childTokenSelectRef:f,firstToken:U,lastToken:N,getCoinIcon:W,changeSortLabel:V,label:ee,labelList:se,labelValue:q,select:Z,selectValue:ve,t:k,pools:o,store:y,wallet:L,list:h,clickRefresh:re,refresh:e,current:D,router:C,searchKey:w}}});const De=e=>(fe("data-v-d82af439"),e=e(),ye(),e),Ga={class:"upgrade-position-list-container"},qa={class:"content-top"},Ma={class:"content-top-left"},Wa={key:0,class:"tag-list"},za=["onClick"],Ja={class:"content-top-right"},Ka={class:"value"},Za=De(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Qa=[Za],Xa={key:0,class:"select-item"},Ya=["onClick"],xa={class:"search-select-box"},en=De(()=>s("span",null,"TVL",-1)),sn={key:0,src:Oe,alt:""},on={key:1,class:"fan-img",src:Oe,alt:""},an={key:0,class:"upgrade-loading"},nn={key:1,class:"position-list"},tn={key:2,class:"no-data"},rn={key:0,src:os,alt:""},dn={key:1,src:as,alt:""},ln={key:3,class:"no-data"},mn={key:0,src:ns,alt:""},un={key:1,src:ts,alt:""};function pn(e,k,D,C,w,T){const y=Fe,p=He,h=Ha,P=xe;return t(),r("div",Ga,[s("div",qa,[s("div",Ma,[e.tabArr.length>1?(t(),r("div",Wa,[(t(!0),r(z,null,J(e.tabArr,(o,F)=>(t(),r("div",{key:F,class:x(["tag-item",o==e.pools.currentPoolTab?`tag-active tab-num-${e.tabArr.length}`:`tab-num-${e.tabArr.length}`]),onClick:L=>e.changeTab(o)},n(o),11,za))),128))])):b("",!0),H(y,{ref:"childTokenSelectRef"},null,512)]),s("div",Ja,[e.store.theme=="default"?(t(),r("div",{key:0,class:"search-label",onClick:k[0]||(k[0]=Re(o=>e.label=!e.label,["stop"]))},[s("span",null,n(e.$t("newAdd.label")),1),s("div",Ka,n(e.labelValue),1),(t(),r("svg",{"aria-hidden":"true",class:x(e.label?"show-icon icon":"icon")},Qa,2)),e.label?(t(),r("div",Xa,[(t(!0),r(z,null,J(e.labelList,(o,F)=>(t(),r("div",{key:F,class:"select-menu-item",onClick:L=>e.changeSortLabel(o)},n(o),9,Ya))),128))])):b("",!0)])):b("",!0),s("div",xa,[s("div",{class:"search-select",onClick:k[1]||(k[1]=Re(o=>e.select=!e.select,["stop"]))},[K(n(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[en,e.select?(t(),r("img",sn)):(t(),r("img",on))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",an,[H(p,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):b("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(t(),r("div",nn,[(t(!0),r(z,null,J(e.showList,(o,F)=>(t(),Ue(h,{key:F,"p-item":o},null,8,["p-item"]))),128))])):b("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",tn,[e.store.theme=="default"?(t(),r("img",rn)):(t(),r("img",dn)),s("span",null,n(e.$t("common.noLiquidityPositions")),1)])):b("",!0),e.wallet.connected?b("",!0):(t(),r("div",ln,[e.store.theme=="default"?(t(),r("img",mn)):(t(),r("img",un)),H(P,{class:"connect-wallet",onClick:k[2]||(k[2]=o=>e.wallet.setIsShowWalletModal(!0))},{default:ke(()=>[K(n(e.$t("button.connectWallet")),1)]),_:1})]))])}const Dn=we(Va,[["render",pn],["__scopeId","data-v-d82af439"]]);export{Dn as default};
