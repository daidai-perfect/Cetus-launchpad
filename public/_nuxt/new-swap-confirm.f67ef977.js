import{c as he,b as Y,d as se,s as te,i as Ne,g as Le,k as Ce}from"./index.8618889b.js";import{a as Ie,r as f,m as I,D as H,q as pe,o as i,c as ne,w as ee,h as o,f as s,F as oe,t as W,v as a,s as ye,x as D,L as Re,p as _e,k as be,e as we,a2 as Be,a3 as je,M as ke,i as fe,z as K,j as q,u as X,J as De,S as Te,a1 as Me,Y as Pe,B as Ee}from"./entry.cdbcbba2.js";import"./index.2a9e6cc4.js";/* empty css              */import{C as Ue,u as qe,g as We,a as ze,_ as Ge,b as He,d as Ke,e as Ye}from"./confetti.module.f004af0a.js";import{u as Ae,a as Se,q as Xe,b as Je,A as Qe,o as Ze,j as Ve}from"./pool.7ae7ea5c.js";import{D as C}from"./decimal.0bdeb344.js";import{i as re}from"./import-icon.de3e6c66.js";/* empty css              */import{i as xe}from"./install.a935ca3f.js";const ve=e=>(_e("data-v-753a11ca"),e=e(),be(),e),eo={class:"price-impact-tips"},oo=ve(()=>o("div",{class:"text"}," The difference between the market price and estimated price due to trade size. ",-1)),no={class:"market-price-rate"},to=ve(()=>o("div",null,"Market Price Rate",-1)),io={key:0},ao=ve(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),so=[ao],ro={key:1,class:"price-unknown"},lo={key:0,class:"market-price-sources"},co=ve(()=>o("span",null,"Market price sources:",-1)),mo=ve(()=>o("svg",{class:"icon tips-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_tips"})],-1)),uo=Ie({__name:"price-impact-tooltip",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},impact:{type:String,defualt:"",requires:!0}},setup(e){const r=e,c=f([]),n=f(),B=f(),N=f(!0),T=Ae(),A=I(()=>T),p=m=>{switch(m){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},b=m=>{var z,E,U,l,v,$,u,h,_,d;const R=((E=m[(z=r==null?void 0:r.fromCoin)==null?void 0:z.address])==null?void 0:E.price)||0,g=((l=m[(U=r==null?void 0:r.toCoin)==null?void 0:U.address])==null?void 0:l.price)||0,F=($=m[(v=r==null?void 0:r.fromCoin)==null?void 0:v.address])==null?void 0:$.market,P=(h=m[(u=r==null?void 0:r.toCoin)==null?void 0:u.address])==null?void 0:h.market;n.value=Y(se(new C(R).div(new C(g)).toString(),(_=r.toCoin)==null?void 0:_.decimals)),B.value=Y(se(new C(g).div(new C(R)).toString(),(d=r.fromCoin)==null?void 0:d.decimals)),c.value=F==P?[p(F)]:[p(F),p(P)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",n.value,B.value,c.value)};H(()=>[A.value.RATES,r.fromCoinAmount,r.toCoinAmount,r.fromCoin,r.toCoin],([m])=>{m&&!he(m)&&b(m)},{immediate:!0});const M=Se(),S=m=>{var R;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((R=A.value.tokensObj[m==null?void 0:m.address])==null?void 0:R.logo_url)||(M.theme==="default"?re("/image/coins/unknown.png"):re("/image/coins/sui-unknown.png"))};return(m,R)=>{const g=Re,F=pe("image");return i(),ne(g,{"overlay-class-name":"price-impact-tooltip"},{title:ee(()=>{var P,z,E,U;return[o("div",eo,[oo,o("div",no,[to,e.impact!=="Incalculable"?(i(),s("div",io,[N.value?(i(),s(oe,{key:0},[W(o("img",null,null,512),[[F,S(e.fromCoin)]]),o("span",null,"1 "+a((P=e.fromCoin)==null?void 0:P.symbol)+" = "+a(n.value)+" "+a((z=e.toCoin)==null?void 0:z.symbol),1),W(o("img",null,null,512),[[F,S(e.toCoin)]])],64)):(i(),s(oe,{key:1},[W(o("img",null,null,512),[[F,S(e.toCoin)]]),o("span",null,"1 "+a((E=e.toCoin)==null?void 0:E.symbol)+" = "+a(B.value)+" "+a((U=e.fromCoin)==null?void 0:U.symbol),1),W(o("img",null,null,512),[[F,S(e.fromCoin)]])],64)),o("div",{class:"right",onClick:R[0]||(R[0]=l=>N.value=!N.value)},so)])):(i(),s("div",ro,"Price is unknown"))]),c.value&&c.value.length>0&&e.impact!=="Incalculable"?(i(),s("div",lo,[co,(i(!0),s(oe,null,ye(c.value,l=>(i(),s("span",{key:l==null?void 0:l.name},a(l==null?void 0:l.name),1))),128))])):D("",!0)])]}),default:ee(()=>[mo]),_:1})}}});const Fe=we(uo,[["__scopeId","data-v-753a11ca"]]);const go=Ie({components:{PriceImpactTooltip:Fe,CurrentPrice:Ue},props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1},formCoinMarket:{type:String,default:""},toCoinMarket:{type:String,default:""}},setup(e){const{getTokenInfo:r}=qe(),c=Xe(),n=I(()=>c==null?void 0:c.tokensObj),B=Be(je,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),N=f(!1),T=Se(),A=I(()=>T),p=I(()=>{var t;return(t=A==null?void 0:A.value)==null?void 0:t.liquiditySourceObj}),b=I(()=>A.value.slippage),M=I(()=>A.isShowRouterModal),S=Ae(),m=I(()=>S);Je("Sui");const R=f(0),g=f([]),F=f({}),P=f(""),z=async t=>{var y,k,w,O,L,j,de,me,ue,ge;if(((y=t==null?void 0:t.routes)==null?void 0:y.length)===1)if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:462 ~ getOnlyOneRouteText ~ suiPreSwapdata?.routes:",t==null?void 0:t.routes),((O=(w=(k=t==null?void 0:t.routes)==null?void 0:k[0])==null?void 0:w.path)==null?void 0:O.length)>1){const ie=[(L=e==null?void 0:e.fromCoin)==null?void 0:L.symbol],le=(de=(j=t==null?void 0:t.routes)==null?void 0:j[0])==null?void 0:de.path;for(let ae=0;ae<le.length;ae++){const x=le[ae];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:467 ~ getOnlyOneRouteText ~ path[i]:",le[ae]);const $e=((me=n==null?void 0:n.value)==null?void 0:me[x==null?void 0:x.target])||await r(x==null?void 0:x.target);ie.push($e==null?void 0:$e.symbol)}P.value=ie==null?void 0:ie.join(" > ")}else P.value=`${(ue=e==null?void 0:e.fromCoin)==null?void 0:ue.symbol} > ${(ge=e==null?void 0:e.toCoin)==null?void 0:ge.symbol}`};H(()=>e.suiPreSwapdata,async t=>{var y;if(t&&!he(t)){let k=[];(y=t==null?void 0:t.routes)==null||y.forEach(L=>{L==null||L.path.forEach(async j=>{j.provider.indexOf("KRIYA")>-1?k.push("KRIYA"):j.provider==="AFTERMATH"||j.provider==="AFSUI"?k.push("AFTERMATH"):j.provider.indexOf("FLOWX")>-1?k.push("FLOWX"):k.push(j.provider)})});const{routes:w}=t,O=w&&w[0]&&w[0].path;if(w&&w.length==1&&O&&O.length==2){const L=O[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":O[0].target;F.value=m.value.tokensObj[L]||await r(L)}else F.value="";g.value=Array.from(new Set(k)),R.value=g.value.length,z(t)}},{immediate:!0}),H(()=>g.value,t=>{console.log("sourcesArr newValue: ",t)});const E=f(0),U=f(0);H(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,b.value],([t,y,k,w,O,L])=>{if(t&&y&&k&&w&&L)if(O){const j=new C(y).mul(new C(L/100));U.value=new C(y).sub(j).toString()}else{const j=new C(t).mul(new C(L/100));E.value=new C(t).add(j).toString()}},{immediate:!0});const l=t=>{var y;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((y=m.value.tokensObj[t==null?void 0:t.address])==null?void 0:y.logo_url)||(A.theme==="default"?re("/image/coins/unknown.png"):re("/image/coins/sui-unknown.png"))},v=f(""),$=async()=>{const t=m.value.tokenExternalPriceObj[e.fromCoin.address],y=m.value.tokenExternalPriceObj[e.toCoin.address];if(t&&y){const k=new C(t).div(new C(y)),w=new C(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(k).div(k).mul(100);let O=Math.abs(te(w,2));k.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?v.value="":(v.value=w>0&&w<=.01?"0.01":O,console.log(t,y,w.toString(),"##367"))}else v.value=""},u=t=>{if(t<5)return"color-s";if(t>=5&&t<10)return"color-w";if(t>=10)return"color-e"};H(()=>[e.oneToAmount,m.value.tokenExternalPriceObj],([t,y])=>{t&&y&&!he(y)&&$()},{immediate:!0,deep:!0});const h=f([]),_=f(),d=f(),Q=f(!0),G=t=>{switch(t){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},Z=t=>{var L,j,de,me,ue,ge,ie,le,ae,x;const y=((j=t[(L=e==null?void 0:e.fromCoin)==null?void 0:L.address])==null?void 0:j.price)||0,k=((me=t[(de=e==null?void 0:e.toCoin)==null?void 0:de.address])==null?void 0:me.price)||0,w=(ge=t[(ue=e==null?void 0:e.fromCoin)==null?void 0:ue.address])==null?void 0:ge.market,O=(le=t[(ie=e==null?void 0:e.toCoin)==null?void 0:ie.address])==null?void 0:le.market;_.value=se(new C(y).div(new C(k)).toString(),(ae=e.toCoin)==null?void 0:ae.decimals),d.value=se(new C(k).div(new C(y)).toString(),(x=e.fromCoin)==null?void 0:x.decimals),h.value=w==O?[G(w)]:[G(w),G(O)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",_.value,d.value,h.value)};return H(()=>[m.value.RATES,e.fromCoinAmount,e.toCoinAmount],([t])=>{t&&!he(t)&&Z(t)},{immediate:!0}),{isOpen:f(!0),sFixD:te,getCoinIcon:l,indicator:B,rateChange:N,slippage:b,isShowRouterModal:M,indexStore:T,maximumSold:E,minimumReceived:U,addCommom:Y,pathLength:R,sourcesArr:g,coinTypeB:F,priceExangeRate:v,getTextColor:u,liquiditySourceObj:p,onlyOneRouteText:P,marketPriceA2B:_,marketPriceA2BResever:d,marketPriceSource:h,isA2B:Q,AggregatorDexLogo:Qe}}}),ce=e=>(_e("data-v-da34e7d3"),e=e(),be(),e),ho={key:0,class:"swap-info"},fo={class:"loading-swap"},vo={class:"loading-swap-content"},Co={key:1,class:"price"},yo={key:2,class:"best-route"},ko={key:0,class:"price-impact"},po=ce(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),_o=[po],bo=ce(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),wo=[bo],Ao=ce(()=>o("div",null,"Be cautious before submitting your order.",-1)),So={key:1,class:"price-impact-info"},$o={class:"label"},Io=ce(()=>o("span",null,"Price Impact",-1)),Ro={key:0,class:"text impact-w"},Fo=["src"],Oo={class:"trade-info"},No={class:"trade-block"},Lo={class:"label"},Bo={key:0,class:"text"},jo={key:0,class:"trade-block"},Do=ce(()=>o("div",{class:"label"},"Route",-1)),To={key:0,class:"text text-box"},Mo=["alt"],Po={key:1,class:"text text-box"},Eo=["alt"],Uo=ce(()=>o("svg",{class:"icon route-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_expand"})],-1));function qo(e,r,c,n,B,N){var S,m,R;const T=De,A=ke("CurrentPrice"),p=ke("PriceImpactTooltip"),b=Te,M=pe("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(i(),s("div",ho,[o("div",fo,[o("div",vo,[e.swapLoading||e.swapRouterLoading?(i(),ne(T,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):D("",!0),!e.swapRouterLoading&&e.fromCoinAmount&&e.toCoinAmount&&e.oneToAmount&&e.fromCoinAmount?(i(),s("div",Co,[fe(A,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"])])):e.swapLoading||e.swapRouterLoading?(i(),s("span",yo,"Best route and price")):D("",!0)]),e.isOpen&&e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading&&!e.swapRouterLoading?(i(),s("div",ko,[(i(),s("svg",{class:K(["icon warning-icon pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},_o,2)),o("span",{class:K(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),o("span",{class:K(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[o("div",null,[(i(),s("svg",{class:K(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},wo,2)),q(" Price Impact Alert. ")]),Ao],2)])):D("",!0),e.isOpen?(i(),s("div",So,[o("div",$o,[Io,fe(p,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),!e.swapRouterLoading&&e.impact==="Incalculable"?(i(),s("div",Ro,a(e.impact),1)):e.swapRouterLoading?(i(),ne(b,{key:2,paragraph:!1,active:""})):(i(),s("div",{key:1,class:K(["text",e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[q(a(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(S=e.impact)==null?void 0:S.replace("-","")}`)+"% ",1),(i(!0),s(oe,null,ye(e.marketPriceSource,g=>(i(),s("img",{key:g,src:g==null?void 0:g.logo},null,8,Fo))),128))],2))])):D("",!0)]),o("div",Oo,[o("div",No,[o("div",Lo,a(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(i(),ne(b,{key:1,paragraph:!1,active:""})):(i(),s("div",Bo,a(e.fixedFromCoin?("addCommom"in e?e.addCommom:X(Y))(("sFixD"in e?e.sFixD:X(te))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:X(Y))(("sFixD"in e?e.sFixD:X(te))(e.maximumSold,e.fromCoin.decimals)))+" "+a(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),e.insufficientLiquidity?D("",!0):(i(),s("div",jo,[Do,e.swapRouterLoading?(i(),ne(b,{key:1,paragraph:!1,active:""})):(i(),s("div",{key:0,class:"text text-bg",onClick:r[0]||(r[0]=g=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.routes&&e.suiPreSwapdata.routes.length==1?(i(),s("div",To,[o("span",null,a(e.onlyOneRouteText),1),(i(!0),s(oe,null,ye(e.sourcesArr,g=>W((i(),s("img",{key:g,alt:g},null,8,Mo)),[[M,e.AggregatorDexLogo[g]]])),128))])):e.swapRouterLoading?D("",!0):(i(),s("div",Po,[q(a((R=(m=e.suiPreSwapdata)==null?void 0:m.routes)==null?void 0:R.length)+" Streams ",1),(i(!0),s(oe,null,ye(e.sourcesArr,g=>W((i(),s("img",{key:g,alt:g},null,8,Eo)),[[M,e.AggregatorDexLogo[g]]])),128))])),Uo]))]))])])):D("",!0)}const At=we(go,[["render",qo],["__scopeId","data-v-da34e7d3"]]),Wo={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,r){const{$echarts:c}=Me(),n=Ze();let B=null,N;const T=f(!0),A=Se(),p=I(()=>A),b=I(()=>p.value.chainName),M=I(()=>Le[b.value]),S=Ae(),m=I(()=>S),R=(u,h,_)=>{N={xAxis:{type:"category",boundaryGap:!1,show:!1,data:h},yAxis:{type:"value",show:!1,min:function(d){return d.min-d.min*.1},max:function(d){return d.max+d.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:p.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(d){return`<div class="chart-tip">
              <div>${d&&d[0]&&d[0].name}</div>
              <div>$${se(d&&d[0]&&d[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:p.value.chainName=="Aptos"?"#0C4535":"transparent"},{offset:1,color:p.value.chainName=="Aptos"?"#151817":"transparent"}]},series:[{data:u,type:"line",smooth:p.value.chainName!="Aptos",showSymbol:!1,areaStyle:{},lineStyle:p.value.chainName=="Aptos"?"#68FFD8":{color:{type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:"#75C8FF"},{offset:1,color:"#68FFD8"}]},width:2,type:"solid"}}]},N&&B.clear(),N&&B.setOption(N,!0),B.resize(),T.value=!1},g=f(""),F=f(""),P=async u=>{var V,t,y;const h=[],_=[],{price:d,daily_rate:Q}=b.value==="Aptos"?await We(u):await ze(u,e.market);b.value=="Sui"&&S.setTokenExternalPrice(e.coin.address,(V=d[d.length-1])==null?void 0:V.price),g.value=Q;const G=d&&d.length>=1&&d[d.length-1].price;F.value=G,n.setCurrentCoinPairRate({[u]:G}),b.value==="Aptos"?d.forEach(k=>{h.push(k.price);const w=Ce(Number(k.timestamp),"MD"),O=Ce(Number(k.timestamp),"HM");_.push(w+" "+O)}):d.forEach(k=>{h.push(k.price);const w=Ce(new C(k.timestamp).mul(1e3).toNumber(),"MD"),O=Ce(new C(k.timestamp).mul(1e3).toNumber(),"HM");_.push(w+" "+O)});let Z=document.getElementById(`main${(t=e.coin)==null?void 0:t.name}`);B=c.init(Z),c.use([xe]),R(h,_,(y=e.coin)==null?void 0:y.name)};H(()=>e.id,(u,h)=>{u&&(g.value="",F.value="",setTimeout(()=>{P(u)},1e3))},{immediate:!0});const z=f(""),E=f(""),U=f(""),l=f("");H(()=>[m.value.tokensObj,e.coin],([u,h])=>{var _,d;u&&h&&u[h.address]&&(E.value=((_=u[h.address])==null?void 0:_.labels)&&((d=u[h.address])==null?void 0:d.labels[0]),z.value=u[h.address].name,U.value=u[h.address].symbol,l.value=u[h.address].address)},{immediate:!0,deep:!0}),H(()=>e.refresh,u=>{u&&P(e.id)});const v=I(()=>p.value.theme),$=I(()=>p.value.currentExplorer);return{getExplorerUrl:Ve,currentExplorer:$,theme:v,store:A,importIcon:re,fixD:Ne,config:M,price_rate_24h:g,nowPrice:F,coinName:z,coinLabels:E,coinSymbol:U,address:l,decimalUi:se,addCommom:Y}}};const Oe=e=>(_e("data-v-646282e9"),e=e(),be(),e),zo={class:"token-info"},Go={class:"token-info-padding"},Ho={class:"token-info-header"},Ko={class:"left"},Yo=["onerror"],Xo={class:"name"},Jo={class:"desc"},Qo={key:0},Zo={class:"right"},Vo={class:"new-style-tooltip-text"},xo={class:"price-info"},en={key:0,src:Ge,alt:""},on={key:1,src:He,alt:""},nn={key:2,src:Ke,alt:""},tn={class:"token-info-footer"},an={class:"left"},sn={class:"address"},rn={key:0,class:"pc-address"},ln={key:1,class:"pc-address"},cn={class:"h5-address"},dn=Oe(()=>o("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),mn=[dn],un=["href"],gn=Oe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_link"})],-1)),hn=[gn],fn={class:"right"},vn=["id"];function Cn(e,r,c,n,B,N){var p;const T=Re,A=pe("image");return i(),s("div",zo,[o("div",Go,[o("div",Ho,[o("div",Ko,[W(o("img",{onerror:n.theme=="default"?n.importIcon("/image/coins/unknown.png"):n.importIcon("/image/coins/sui-unknown.png")},null,8,Yo),[[A,c.coin.logoURI||n.importIcon(`/image/coins/${c.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",Xo,a(n.coinSymbol),1),o("div",Jo,[o("span",null,[q(a(n.coinName)+" ",1),n.theme!=="sui"?(i(),s("span",Qo,a(n.coinLabels?`(${n.coinLabels})`:""),1)):D("",!0)])])])]),o("div",Zo,[fe(T,{"overlay-class-name":"new-style-tooltip",placement:"top","arrow-point-at-center":""},{title:ee(()=>[o("div",Vo,a(c.market==="pyth"?"Data source: Pyth Network":c.market==="coingecko"?"Data source: CoinGecko":"Data source: Birdeye"),1)]),default:ee(()=>[o("div",xo,[c.market==="pyth"?(i(),s("img",en)):c.market==="coingecko"?(i(),s("img",on)):c.market==="birdeye"?(i(),s("img",nn)):D("",!0),o("span",null,"$"+a(n.nowPrice?Number(n.nowPrice)<1?n.decimalUi(n.nowPrice,4):n.addCommom(n.fixD(n.nowPrice,2)):"--"),1),n.price_rate_24h?(i(),s("i",{key:3,class:K(n.price_rate_24h>0?"up":n.price_rate_24h<0?"down":"up")},a(n.price_rate_24h>0?`+ ${n.fixD(n.price_rate_24h,2)}`:n.price_rate_24h<0?+`${n.fixD(n.price_rate_24h,2)}`:`+${n.fixD(n.price_rate_24h,2)}`)+"%",3)):D("",!0)])]),_:1})])]),o("div",tn,[o("div",an,[o("div",sn,[c.coin&&n.address!=="0x2::sui::SUI"?(i(),s("span",rn,a(c.coin&&c.coin.address.substr(0,8))+" ... "+a(c.coin&&c.coin.address.substr(c.coin.address.length-8,8)),1)):(i(),s("span",ln,a(c.coin&&c.coin.address),1)),o("span",cn,a(c.coin&&c.coin.address.substr(0,4))+" ... "+a(c.coin&&c.coin.address.substr(c.coin.address.length-4,4)),1),(i(),s("svg",{class:"icon","aria-hidden":"true",onClick:r[0]||(r[0]=b=>n.store.copy(c.coin&&c.coin.address))},mn)),o("a",{href:n.getExplorerUrl(n.currentExplorer,"coin",c.coin&&c.coin.address),target:"_blank"},hn,8,un)])]),o("div",fn,[o("div",{id:`main${(p=c.coin)==null?void 0:p.name}`,class:"main"},null,8,vn)])])])])}const St=we(Wo,[["render",Cn],["__scopeId","data-v-646282e9"]]),yn=Ie({components:{Modal:Pe,PriceImpactTooltip:Fe},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,default:0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,r){const c=Ae(),n=I(()=>c),B=Se(),N=I(()=>B),T=l=>{var v;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((v=n.value.tokensObj[l==null?void 0:l.address])==null?void 0:v.logo_url)||(N.value.theme==="default"?re("/image/coins/unknown.png"):re("/image/coins/sui-unknown.png"))},A=f(!1),p=I(()=>N.value.chainName),b=async()=>{r.emit("to-swap")};f([]);const M=f(0),S=f(""),m=f(""),R=I(()=>N.value.slippage);H(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,R.value],([l,v,$,u,h,_])=>{if(l&&v&&$&&u&&_)if(h){const d=new C(v).mul(new C(_/100));m.value=new C(v).sub(d).toString()}else{const d=new C(l).mul(new C(_/100));S.value=new C(l).add(d).toString()}},{immediate:!0});const g=f(""),F=I(()=>{var l,v,$,u,h,_,d,Q,G,Z,V,t;return($=(v=n==null?void 0:n.value)==null?void 0:v.tokensObj[(l=e==null?void 0:e.fromCoin)==null?void 0:l.address])!=null&&$.pyth_id&&((_=(h=n==null?void 0:n.value)==null?void 0:h.tokensObj[(u=e==null?void 0:e.fromCoin)==null?void 0:u.address])==null?void 0:_.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(G=(Q=n==null?void 0:n.value)==null?void 0:Q.tokensObj[(d=e==null?void 0:e.fromCoin)==null?void 0:d.address])!=null&&G.coingecko_id?"coingecko":(t=(V=n==null?void 0:n.value)==null?void 0:V.tokensObj[(Z=e==null?void 0:e.fromCoin)==null?void 0:Z.address])!=null&&t.birdeyeid?"birdeye":null}),P=I(()=>{var l,v,$,u,h,_,d,Q,G,Z,V,t;return($=(v=n==null?void 0:n.value)==null?void 0:v.tokensObj[(l=e==null?void 0:e.toCoin)==null?void 0:l.address])!=null&&$.pyth_id&&((_=(h=n==null?void 0:n.value)==null?void 0:h.tokensObj[(u=e==null?void 0:e.toCoin)==null?void 0:u.address])==null?void 0:_.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(G=(Q=n==null?void 0:n.value)==null?void 0:Q.tokensObj[(d=e==null?void 0:e.toCoin)==null?void 0:d.address])!=null&&G.coingecko_id?"coingecko":(t=(V=n==null?void 0:n.value)==null?void 0:V.tokensObj[(Z=e==null?void 0:e.toCoin)==null?void 0:Z.address])!=null&&t.birdeyeid?"birdeye":null}),z=async()=>{const l=n.value.tokenExternalPriceObj[e.fromCoin.address],v=n.value.tokenExternalPriceObj[e.toCoin.address];if(l&&v){const $=new C(l).div(new C(v)),u=new C(e.oneToAmount.replace(new RegExp(/,/g),"")).sub($).div($).mul(100);let h=Math.abs(te(u,2));$.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?g.value="":g.value=u>0&&u<=.01?"0.01":h}else g.value=""},E=l=>{if(l<5)return"color-s";if(l>=5&&l<10)return"color-w";if(l>=10)return"color-e"};H(()=>[e.oneToAmount,n.value.tokenExternalPriceObj,p.value],([l,v,$])=>{l&&v&&!he(v)&&$!=="Aptos"&&z()},{immediate:!0,deep:!0});const U=f(!1);return{getCoinIcon:T,addCommom:Y,sFixD:te,rateChange:A,chainName:p,clickNextBtn:b,pathLength:M,maximumSold:S,minimumReceived:m,decimalUi:se,getTextColor:E,priceExangeRate:g,formCoinMarket:F,toCoinMarket:P,readWithin:U}}});const J=e=>(_e("data-v-5042772b"),e=e(),be(),e),kn=J(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),pn={class:"new-swap-contnet"},_n={class:"coin-info"},bn={class:"from-coin-info"},wn={class:"left"},An={class:"coin-amount"},Sn={class:"coin-symbol"},$n={class:"right"},In={class:"to-coin-info"},Rn={class:"left"},Fn={class:"coin-amount"},On={class:"coin-symbol"},Nn={class:"right"},Ln=J(()=>o("div",{class:"to-swap-logo"},null,-1)),Bn={class:"coin-rate"},jn={key:0,class:"coin-rate-box"},Dn={class:"left"},Tn=J(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Mn=J(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Pn=[Tn,Mn],En={key:1,class:"coin-rate-box"},Un={class:"left"},qn=J(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Wn=J(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),zn=[qn,Wn],Gn={key:2,class:"price-impact"},Hn=J(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Kn=[Hn],Yn=J(()=>o("br",null,null,-1)),Xn={class:"bottom"},Jn={class:"induction"},Qn={class:"item"},Zn={class:"induction-text"},Vn={class:"induction-value"},xn={class:"item"},et={class:"induction-text"},ot={class:"induction-value"},nt={class:"item"},tt={class:"induction-text"},it={key:0,class:"item"},at={class:"induction-text"},st={key:0,class:"induction-value"},rt={key:1,class:"induction-value"},lt={key:0,class:"within-desc"},ct=J(()=>o("div",{class:"within-top"},[o("img",{src:Ye,alt:""}),o("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),dt={class:"within-bottom"},mt={key:0,class:"price-updated"},ut=J(()=>o("span",null,"Price updated",-1));function gt(e,r,c,n,B,N){const T=ke("PriceImpactTooltip"),A=Ee,p=ke("Modal"),b=pe("image");return i(),ne(p,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:r[7]||(r[7]=M=>e.$emit("on-close"))},{closeIcon:ee(()=>[kn]),default:ee(()=>{var M;return[o("div",pn,[o("div",_n,[o("div",bn,[o("div",wn,[o("div",An,a(e.fromCoinAmount&&("addCommom"in e?e.addCommom:X(Y))(e.fromCoinAmount)),1),o("div",Sn,a(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",$n,[W(o("img",null,null,512),[[b,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",In,[o("div",Rn,[o("div",Fn,a(e.toCoinAmount&&("addCommom"in e?e.addCommom:X(Y))(e.toCoinAmount)),1),o("div",On,a(e.toCoin&&e.toCoin.symbol),1)]),o("div",Nn,[W(o("img",null,null,512),[[b,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),Ln]),o("div",Bn,[e.rateChange?(i(),s("div",En,[o("div",Un,[W(o("img",null,null,512),[[b,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+a(e.toCoin&&e.toCoin.symbol)+" â‰ˆ",1),W(o("img",null,null,512),[[b,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,a(e.oneFromAmount)+" "+a(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:r[1]||(r[1]=S=>e.rateChange=!e.rateChange)},zn)])):(i(),s("div",jn,[o("div",Dn,[W(o("img",null,null,512),[[b,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+a(e.fromCoin&&e.fromCoin.symbol)+" â‰ˆ",1),W(o("img",null,null,512),[[b,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,a(e.oneToAmount)+" "+a(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:r[0]||(r[0]=S=>e.rateChange=!e.rateChange)},Pn)])),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(i(),s("div",Gn,[(i(),s("svg",{class:K(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},Kn,2)),o("span",{class:K(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),o("span",{class:K(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[q("Price Impact Alert."),Yn,q(" Be cautious before submitting your order.")],2)])):D("",!0)])]),o("div",Xn,[o("div",Jn,[o("div",Qn,[o("div",Zn,a(e.$t("modal.slippageTolerance")),1),o("div",Vn,a(e.slippage)+"%",1)]),o("div",xn,[o("div",et,a(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",ot,a(e.fixedFromCoin?("addCommom"in e?e.addCommom:X(Y))(("sFixD"in e?e.sFixD:X(te))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:X(Y))(("sFixD"in e?e.sFixD:X(te))(e.maximumSold,e.fromCoin.decimals)))+" "+a(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",nt,[o("div",tt,[q(" Price Impact "),fe(T,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),o("div",{class:K(["induction-value",String(e.impact)==="Incalculable"?"impact-w":e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[e.chainName=="Aptos"?(i(),s(oe,{key:0},[q(a(e.impact<.01?"<0.01":e.impact>100?">100":e.impact)+"% ",1)],64)):String(e.impact)=="Incalculable"?(i(),s(oe,{key:1},[q(" Incalculable ")],64)):(i(),s(oe,{key:2},[q(a(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(M=String(e.impact))==null?void 0:M.replace("-","")}`)+"% ",1)],64))],2)]),e.chainName=="Aptos"?(i(),s("div",it,[o("div",at,a(e.$t("common.fee")),1),e.chainName=="Aptos"?(i(),s("div",st,a(e.formatFee)+" "+a(e.fromCoin.symbol)+" ("+a(e.fee*100)+"%) ",1)):(i(),s("div",rt,a(e.fee)+" "+a(e.fromCoin.symbol),1))])):D("",!0)])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),s("div",lt,[ct,o("div",dt,[o("div",{class:K(["within-btn",e.readWithin?"within-btn-active":""]),onClick:r[2]||(r[2]=S=>e.readWithin=!0)}," Yes, please continue. ",2),o("div",{class:"within-btn",onClick:r[3]||(r[3]=S=>e.$emit("on-close"))},"No, cancel it.")])])):D("",!0)]),e.isShowAccept?(i(),s("div",mt,[ut,fe(A,{class:"accept-btn",loading:e.swapLoading,onClick:r[4]||(r[4]=S=>e.$emit("accept"))},{default:ee(()=>[q("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(i(),ne(A,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:r[5]||(r[5]=S=>e.clickNextBtn())},{default:ee(()=>[q(a(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):e.chainName=="Aptos"?(i(),ne(A,{key:2,class:"big-btn swap-confirm-btn",onClick:r[6]||(r[6]=S=>e.clickNextBtn())},{default:ee(()=>[q(a(e.$t("button.confirmSwap")),1)]),_:1})):D("",!0)]}),_:1},8,["title"])}const $t=we(yn,[["render",gt],["__scopeId","data-v-5042772b"]]);export{At as _,St as a,$t as b};
