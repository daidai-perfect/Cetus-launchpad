import{C as ci}from"./coin-img.7227b549.js";import{a as dr,r as ut,e as gr,M as rr,o as de,f as ze,h as j,c as Pt,x as At,j as Br,v as Ae,p as pr,k as vr,ab as hi,aa as Ft,m as Se,af as es,D as Zt,q as ts,w as Nt,u as ir,i as be,F as sr,s as or,t as Vn,Y as fi,L as rs,W as ns,B as is,l as ss,a1 as os,a2 as br,y as as,z as $n}from"./entry.8daddd9b.js";import{_ as ls,$ as us,a0 as cs,a1 as hs,a2 as fs,a3 as ds,a4 as gs,a5 as ps,a6 as vs,a7 as ms,a8 as ws,a9 as ys,aa as Ms,ab as _s,ac as bs,ad as As,ae as An,af as Sr,ag as Cs,ah as Ss,ai as Is,aj as Cn,ak as Os,al as Sn,am as mr,an as Dr,ao as di,ap as Rr,aq as Es,ar as ks,as as fn,at as Ts,au as Bs,av as Rs,aw as Ns,ax as Ps,ay as js,az as Ls,g as yt,u as Fs,aA as qs,e as Zn,h as ot,s as Ds,aB as zn,b as dn,aC as gi,aD as Us}from"./index.972d2d7e.js";import{D as pi}from"./decimal.0bdeb344.js";/* empty css              *//* empty css              */import{q as vi,a as Ur,o as xs,b as Ws,j as mi,A as Ar}from"./pool.029ead56.js";const wi="…";function Vs(e){if(e.length<=6)return e;const t=e.startsWith("0x")?2:0;return`0x${e.slice(t,t+4)}${wi}${e.slice(-4)}`}function $s(e){return`${e.slice(0,10)}${wi}`}const Zs=Object.freeze(Object.defineProperty({__proto__:null,MIST_PER_SUI:ls,MOVE_STDLIB_ADDRESS:us,SUI_ADDRESS_LENGTH:cs,SUI_CLOCK_OBJECT_ID:hs,SUI_DECIMALS:fs,SUI_FRAMEWORK_ADDRESS:ds,SUI_SYSTEM_ADDRESS:gs,SUI_SYSTEM_MODULE_NAME:ps,SUI_SYSTEM_STATE_OBJECT_ID:vs,SUI_TYPE_ARG:ms,formatAddress:Vs,formatDigest:$s,fromB64:ws,fromHEX:ys,isValidSuiAddress:Ms,isValidSuiNSName:_s,isValidSuiObjectId:bs,isValidTransactionDigest:As,normalizeStructTag:An,normalizeSuiAddress:Sr,normalizeSuiNSName:Cs,normalizeSuiObjectId:Ss,parseStructTag:Is,toB64:Cn,toHEX:Os},Symbol.toStringTag,{value:"Module"}));var yi=e=>{throw TypeError(e)},Mi=(e,t,r)=>t.has(e)||yi("Cannot "+r),Xe=(e,t,r)=>(Mi(e,t,"read from private field"),r?r.call(e):t.get(e)),_i=(e,t,r)=>t.has(e)?yi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),zs=(e,t,r,i)=>(Mi(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Tt,He;class bi{async getObject(t){const[r,i]=await Promise.all([this.get("OwnedObject",t),this.get("SharedOrImmutableObject",t)]);return r??i??null}async getObjects(t){return Promise.all([...t.map(r=>this.getObject(r))])}async addObject(t){return t.owner?await this.set("OwnedObject",t.objectId,t):await this.set("SharedOrImmutableObject",t.objectId,t),t}async addObjects(t){await Promise.all(t.map(async r=>this.addObject(r)))}async deleteObject(t){await Promise.all([this.delete("OwnedObject",t),this.delete("SharedOrImmutableObject",t)])}async deleteObjects(t){await Promise.all(t.map(r=>this.deleteObject(r)))}async getMoveFunctionDefinition(t){const r=`${Sr(t.package)}::${t.module}::${t.function}`;return this.get("MoveFunction",r)}async addMoveFunctionDefinition(t){const r=Sr(t.package),i=`${r}::${t.module}::${t.function}`,s={...t,package:r};return await this.set("MoveFunction",i,s),s}async deleteMoveFunctionDefinition(t){const r=`${Sr(t.package)}::${t.module}::${t.function}`;await this.delete("MoveFunction",r)}async getCustom(t){return this.get("Custom",t)}async setCustom(t,r){return this.set("Custom",t,r)}async deleteCustom(t){return this.delete("Custom",t)}}class Ks extends bi{constructor(){super(...arguments),_i(this,Tt,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(t,r){return Xe(this,Tt)[t].get(r)??null}async set(t,r,i){Xe(this,Tt)[t].set(r,i)}async delete(t,r){Xe(this,Tt)[t].delete(r)}async clear(t){if(t)Xe(this,Tt)[t].clear();else for(const r of Object.values(Xe(this,Tt)))r.clear()}}Tt=new WeakMap;class Ai{constructor({cache:t=new Ks}){_i(this,He),zs(this,He,t)}asPlugin(){return async(t,r,i)=>{const s=t.inputs.filter(c=>c.UnresolvedObject).map(c=>c.UnresolvedObject.objectId),l=(await Xe(this,He).getObjects(s)).filter(c=>c!==null),a=new Map(l.map(c=>[c.objectId,c]));for(const c of t.inputs){if(!c.UnresolvedObject)continue;const p=a.get(c.UnresolvedObject.objectId);p&&(p.initialSharedVersion&&!c.UnresolvedObject.initialSharedVersion?c.UnresolvedObject.initialSharedVersion=p.initialSharedVersion:(p.version&&!c.UnresolvedObject.version&&(c.UnresolvedObject.version=p.version),p.digest&&!c.UnresolvedObject.digest&&(c.UnresolvedObject.digest=p.digest)))}await Promise.all(t.commands.map(async c=>{if(c.MoveCall){const p=await this.getMoveFunctionDefinition({package:c.MoveCall.package,module:c.MoveCall.module,function:c.MoveCall.function});p&&(c.MoveCall._argumentTypes=p.parameters)}})),await i(),await Promise.all(t.commands.map(async c=>{var p;(p=c.MoveCall)!=null&&p._argumentTypes&&await Xe(this,He).addMoveFunctionDefinition({package:c.MoveCall.package,module:c.MoveCall.module,function:c.MoveCall.function,parameters:c.MoveCall._argumentTypes})}))}}async clear(){await Xe(this,He).clear()}async getMoveFunctionDefinition(t){return Xe(this,He).getMoveFunctionDefinition(t)}async getObjects(t){return Xe(this,He).getObjects(t)}async deleteObjects(t){return Xe(this,He).deleteObjects(t)}async clearOwnedObjects(){await Xe(this,He).clear("OwnedObject")}async clearCustom(){await Xe(this,He).clear("Custom")}async getCustom(t){return Xe(this,He).getCustom(t)}async setCustom(t,r){return Xe(this,He).setCustom(t,r)}async deleteCustom(t){return Xe(this,He).deleteCustom(t)}async applyEffects(t){if(!t.V2)throw new Error(`Unsupported transaction effects version ${t.$kind}`);const{lamportVersion:r,changedObjects:i}=t.V2,s=[],l=[];i.map(async([a,c])=>{var p;if(c.outputState.NotExist)await Xe(this,He).deleteObject(a);else if(c.outputState.ObjectWrite){const[v,M]=c.outputState.ObjectWrite;l.push({objectId:a,digest:v,version:r,owner:M.AddressOwner??M.ObjectOwner??null,initialSharedVersion:((p=M.Shared)==null?void 0:p.initialSharedVersion)??null})}}),await Promise.all([Xe(this,He).addObjects(l),Xe(this,He).deleteObjects(s)])}}He=new WeakMap;var Ci=e=>{throw TypeError(e)},Si=(e,t,r)=>t.has(e)||Ci("Cannot "+r),Qt=(e,t,r)=>(Si(e,t,"read from private field"),r?r.call(e):t.get(e)),Kn=(e,t,r)=>t.has(e)?Ci("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),cn=(e,t,r,i)=>(Si(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Ut,xt;class Ii{constructor({client:t,...r}){Kn(this,Ut),Kn(this,xt,null),cn(this,Ut,t),this.cache=new Ai(r)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:t,...r}){return t.addBuildPlugin(this.cache.asPlugin()),t.build({client:Qt(this,Ut),...r})}async executeTransaction({transaction:t,options:r,...i}){const s=Sn(t)?await this.buildTransaction({transaction:t}):t,l=await Qt(this,Ut).executeTransactionBlock({...i,transactionBlock:s,options:{...r,showRawEffects:!0}});if(l.rawEffects){const a=mr.TransactionEffects.parse(Uint8Array.from(l.rawEffects));await this.applyEffects(a)}return l}async signAndExecuteTransaction({options:t,transaction:r,...i}){r.setSenderIfNotSet(i.signer.toSuiAddress());const s=await this.buildTransaction({transaction:r}),{signature:l}=await i.signer.signTransaction(s);return await this.executeTransaction({transaction:s,signature:l,options:t})}async applyEffects(t){var r;cn(this,xt,((r=t.V2)==null?void 0:r.transactionDigest)??null),await this.cache.applyEffects(t)}async waitForLastTransaction(){Qt(this,xt)&&(await Qt(this,Ut).waitForTransaction({digest:Qt(this,xt)}),cn(this,xt,null))}}Ut=new WeakMap;xt=new WeakMap;var Oi=e=>{throw TypeError(e)},Xs=(e,t,r)=>t.has(e)||Oi("Cannot "+r),ct=(e,t,r)=>(Xs(e,t,"read from private field"),r?r.call(e):t.get(e)),Ei=(e,t,r)=>t.has(e)?Oi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Mt,Bt;class ki{constructor(){Ei(this,Mt,[])}async runTask(t){return new Promise((r,i)=>{ct(this,Mt).push(()=>{t().finally(()=>{ct(this,Mt).shift(),ct(this,Mt).length>0&&ct(this,Mt)[0]()}).then(r,i)}),ct(this,Mt).length===1&&ct(this,Mt)[0]()})}}Mt=new WeakMap;class Ys{constructor(t){Ei(this,Bt,[]),this.activeTasks=0,this.maxTasks=t}runTask(t){return new Promise((r,i)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,t().finally(()=>{ct(this,Bt).length>0?ct(this,Bt).shift()():this.activeTasks--}).then(r,i)):ct(this,Bt).push(()=>{t().finally(()=>{ct(this,Bt).length>0?ct(this,Bt).shift()():this.activeTasks--}).then(r,i)})})}}Bt=new WeakMap;var Ti=e=>{throw TypeError(e)},Bi=(e,t,r)=>t.has(e)||Ti("Cannot "+r),tt=(e,t,r)=>(Bi(e,t,"read from private field"),r?r.call(e):t.get(e)),er=(e,t,r)=>t.has(e)?Ti("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Xn=(e,t,r,i)=>(Bi(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Ir,nr,lt,gn,Or;class Js{constructor({signer:t,...r}){er(this,Ir,new ki),er(this,nr),er(this,lt),er(this,gn,async i=>{if(!i.V2)return;const s=In(i).ref;s?tt(this,lt).cache.setCustom("gasCoin",s):tt(this,lt).cache.deleteCustom("gasCoin")}),er(this,Or,async i=>{const s=await tt(this,lt).cache.getCustom("gasCoin"),l=Dr.from(i);return s&&l.setGasPayment([s]),l.setSenderIfNotSet(tt(this,nr).toSuiAddress()),tt(this,lt).buildTransaction({transaction:l})}),Xn(this,nr,t),Xn(this,lt,new Ii({client:r.client,cache:r.cache}))}async applyEffects(t){return Promise.all([tt(this,gn).call(this,t),tt(this,lt).cache.applyEffects(t)])}async buildTransaction(t){return tt(this,Ir).runTask(()=>tt(this,Or).call(this,t))}resetCache(){return tt(this,lt).reset()}waitForLastTransaction(){return tt(this,lt).waitForLastTransaction()}executeTransaction(t){return tt(this,Ir).runTask(async()=>{const r=Sn(t)?await tt(this,Or).call(this,t):t,{signature:i}=await tt(this,nr).signTransaction(r),s=await tt(this,lt).executeTransaction({signature:i,transaction:r}).catch(async c=>{throw await this.resetCache(),c}),l=Uint8Array.from(s.rawEffects),a=mr.TransactionEffects.parse(l);return await this.applyEffects(a),{digest:s.digest,effects:Cn(l)}})}}Ir=new WeakMap;nr=new WeakMap;lt=new WeakMap;gn=new WeakMap;Or=new WeakMap;function In(e){if(!e.V2)throw new Error("Unexpected effects version");const t=e.V2.changedObjects[e.V2.gasObjectIndex];if(!t)throw new Error("Gas object not found in effects");const[r,{outputState:i}]=t;if(!i.ObjectWrite)throw new Error("Unexpected gas object state");const[s,l]=i.ObjectWrite;return{ref:{objectId:r,digest:s,version:e.V2.lamportVersion},owner:l.AddressOwner||l.ObjectOwner}}var Ri=e=>{throw TypeError(e)},On=(e,t,r)=>t.has(e)||Ri("Cannot "+r),W=(e,t,r)=>(On(e,t,"read from private field"),r?r.call(e):t.get(e)),Ke=(e,t,r)=>t.has(e)?Ri("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ce=(e,t,r,i)=>(On(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),at=(e,t,r)=>(On(e,t,"access private method"),r),Yn=(e,t,r,i)=>({set _(s){Ce(e,t,s,r)},get _(){return W(e,t,i)}}),St,dt,Nr,lr,ar,ur,Pr,zt,rt,It,Lt,jt,En,Er,cr,Wt,Xt,vt,nt,Ni,Pi,hr,kn,ji,pn,Li;const tr={coinBatchSize:20,initialCoinBalance:200000000n,minimumCoinBalance:50000000n,maxPoolSize:50,epochBoundaryWindow:1e3};class Hs{constructor(t){Ke(this,nt),Ke(this,St),Ke(this,dt),Ke(this,Nr),Ke(this,lr),Ke(this,ar),Ke(this,ur),Ke(this,Pr),Ke(this,zt),Ke(this,rt),Ke(this,It,[]),Ke(this,Lt),Ke(this,jt,new Map),Ke(this,En,new ki),Ke(this,Er),Ke(this,cr,null),Ke(this,Wt,null),Ke(this,Xt,0),Ke(this,vt,null),Ce(this,St,t.signer),Ce(this,dt,t.client),Ce(this,Nr,t.coinBatchSize??tr.coinBatchSize),Ce(this,lr,t.initialCoinBalance??tr.initialCoinBalance),Ce(this,ar,t.minimumCoinBalance??tr.minimumCoinBalance),Ce(this,Pr,t.defaultGasBudget??W(this,ar)),Ce(this,ur,t.epochBoundaryWindow??tr.epochBoundaryWindow),Ce(this,zt,t.maxPoolSize??tr.maxPoolSize),Ce(this,Lt,new Ii({client:t.client,cache:t.cache})),Ce(this,Er,new Ys(W(this,zt))),Ce(this,rt,t.sourceCoins?new Map(t.sourceCoins.map(r=>[r,null])):null)}resetCache(){return Ce(this,vt,null),at(this,nt,hr).call(this,()=>W(this,Lt).reset())}async waitForLastTransaction(){await at(this,nt,hr).call(this,()=>at(this,nt,kn).call(this))}async executeTransaction(t){const{promise:r,resolve:i,reject:s}=Gs(),l=await at(this,nt,Ni).call(this,t),a=()=>{W(this,Er).runTask(()=>at(this,nt,Pi).call(this,t,l).then(i,s))},c=new Set;return l.forEach(p=>{W(this,jt).get(p)?(c.add(p),W(this,jt).get(p).push(()=>{c.delete(p),c.size===0&&a()})):W(this,jt).set(p,[])}),c.size===0&&a(),r}}St=new WeakMap;dt=new WeakMap;Nr=new WeakMap;lr=new WeakMap;ar=new WeakMap;ur=new WeakMap;Pr=new WeakMap;zt=new WeakMap;rt=new WeakMap;It=new WeakMap;Lt=new WeakMap;jt=new WeakMap;En=new WeakMap;Er=new WeakMap;cr=new WeakMap;Wt=new WeakMap;Xt=new WeakMap;vt=new WeakMap;nt=new WeakSet;Ni=async function(e){const t=new Set;let r=!1;return e.addSerializationPlugin(async(i,s,l)=>{await l(),!r&&(r=!0,i.inputs.forEach(a=>{var c,p,v,M,b;(p=(c=a.Object)==null?void 0:c.ImmOrOwnedObject)!=null&&p.objectId?t.add(a.Object.ImmOrOwnedObject.objectId):(M=(v=a.Object)==null?void 0:v.Receiving)!=null&&M.objectId?t.add(a.Object.Receiving.objectId):(b=a.UnresolvedObject)!=null&&b.objectId&&!a.UnresolvedObject.initialSharedVersion&&t.add(a.UnresolvedObject.objectId)}))}),await e.prepareForSerialization({client:W(this,dt)}),t};Pi=async function(e,t){var i;let r;try{e.setSenderIfNotSet(W(this,St).toSuiAddress()),await W(this,En).runTask(async()=>{const b=e.getData();b.gasData.price||e.setGasPrice(await at(this,nt,pn).call(this)),b.gasData.budget||e.setGasBudget(W(this,Pr)),await at(this,nt,hr).call(this),r=await at(this,nt,ji).call(this),Yn(this,Xt)._++,e.setGasPayment([{objectId:r.id,version:r.version,digest:r.digest}]),await W(this,Lt).buildTransaction({transaction:e,onlyTransactionKind:!0})});const s=await e.build({client:W(this,dt)}),{signature:l}=await W(this,St).signTransaction(s),a=await W(this,Lt).executeTransaction({transaction:s,signature:l,options:{showEffects:!0}}),c=Uint8Array.from(a.rawEffects),p=mr.TransactionEffects.parse(c),v=In(p),M=(i=p.V2)==null?void 0:i.gasUsed;if(r&&M&&v.owner===W(this,St).toSuiAddress()){const b=BigInt(M.computationCost)+BigInt(M.storageCost)+BigInt(M.storageCost)-BigInt(M.storageRebate);let A=!1;new di(e.getData()).mapArguments(S=>(S.$kind==="GasCoin"&&(A=!0),S)),!A&&r.balance>=W(this,ar)?W(this,It).push({id:v.ref.objectId,version:v.ref.version,digest:v.ref.digest,balance:r.balance-b}):(W(this,rt)||Ce(this,rt,new Map),W(this,rt).set(v.ref.objectId,v.ref))}return Ce(this,cr,a.digest),{digest:a.digest,effects:Cn(c)}}catch(s){throw r&&(W(this,rt)||Ce(this,rt,new Map),W(this,rt).set(r.id,null)),await at(this,nt,hr).call(this,async()=>{await Promise.all([W(this,Lt).cache.deleteObjects([...t]),at(this,nt,kn).call(this)])}),s}finally{t.forEach(s=>{const l=W(this,jt).get(s);l&&l.length>0?l.shift()():l&&W(this,jt).delete(s)}),Yn(this,Xt)._--}};hr=async function(e){W(this,Wt)&&await W(this,Wt),Ce(this,Wt,(e==null?void 0:e().then(()=>{Ce(this,Wt,null)},()=>{}))??null)};kn=async function(){const e=W(this,cr);e&&(Ce(this,cr,null),await W(this,dt).waitForTransaction({digest:e}))};ji=async function(){if(W(this,It).length===0&&W(this,Xt)<=W(this,zt)&&await at(this,nt,Li).call(this),W(this,It).length===0)throw new Error("No coins available");return W(this,It).shift()};pn=async function(){if((W(this,vt)?W(this,vt).expiration-W(this,ur)-Date.now():0)>0)return W(this,vt).price;if(W(this,vt)){const r=Math.max(W(this,vt).expiration+W(this,ur)-Date.now(),1e3);await new Promise(i=>setTimeout(i,r))}const t=await W(this,dt).getLatestSuiSystemState();return Ce(this,vt,{price:BigInt(t.referenceGasPrice),expiration:Number.parseInt(t.epochStartTimestampMs,10)+Number.parseInt(t.epochDurationMs,10)}),at(this,nt,pn).call(this)};Li=async function(){var v;const e=Math.min(W(this,Nr),W(this,zt)-(W(this,It).length+W(this,Xt))+1);if(e===0)return;const t=new Dr,r=W(this,St).toSuiAddress();if(t.setSender(r),W(this,rt)){const M=[],b=[];for(const[A,S]of W(this,rt))S?M.push(S):b.push(A);if(b.length>0){const A=await W(this,dt).multiGetObjects({ids:b});M.push(...A.filter(S=>S.data!==null).map(({data:S})=>({objectId:S.objectId,version:S.version,digest:S.digest})))}t.setGasPayment(M),Ce(this,rt,new Map)}const i=new Array(e).fill(W(this,lr)),s=t.splitCoins(t.gas,i),l=[];for(let M=0;M<i.length;M++)l.push(s[M]);t.transferObjects(l,r),await this.waitForLastTransaction();const a=await W(this,dt).signAndExecuteTransaction({transaction:t,signer:W(this,St),options:{showRawEffects:!0}}),c=mr.TransactionEffects.parse(Uint8Array.from(a.rawEffects));(v=c.V2)==null||v.changedObjects.forEach(([M,{outputState:b}],A)=>{var S;A===((S=c.V2)==null?void 0:S.gasObjectIndex)||!b.ObjectWrite||W(this,It).push({id:M,version:c.V2.lamportVersion,digest:b.ObjectWrite[0],balance:BigInt(W(this,lr))})}),W(this,rt)||Ce(this,rt,new Map);const p=In(c).ref;W(this,rt).set(p.objectId,p),await W(this,dt).waitForTransaction({digest:a.digest})};function Gs(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}const jr="CoinWithBalance",Jn=An("0x2::sui::SUI");function Qs({type:e=Jn,balance:t,useGasCoin:r=!0}){return i=>{i.addIntentResolver(jr,to);const s=e==="gas"?e:An(e);return i.add(Rr.Intent({name:jr,inputs:{},data:{type:s===Jn&&r?"gas":s,balance:BigInt(t)}}))}}const eo=Ts({type:Bs(),balance:Rs()});async function to(e,t,r){var v,M;const i=new Set,s=new Map;if(!e.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const b of e.commands)if(b.$kind==="$Intent"&&b.$Intent.name===jr){const{type:A,balance:S}=Es(eo,b.$Intent.data);A!=="gas"&&i.add(A),s.set(A,(s.get(A)??0n)+S)}const l=new Set;for(const b of e.inputs)(v=b.Object)!=null&&v.ImmOrOwnedObject&&l.add(b.Object.ImmOrOwnedObject.objectId),(M=b.UnresolvedObject)!=null&&M.objectId&&l.add(b.UnresolvedObject.objectId);const a=new Map,c=ks(t);await Promise.all([...i].map(async b=>{a.set(b,await ro({coinType:b,balance:s.get(b),client:c,owner:e.sender,usedIds:l}))}));const p=new Map;p.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[b,A]of e.commands.entries()){if(A.$kind!=="$Intent"||A.$Intent.name!==jr)continue;const{type:S,balance:D}=A.$Intent.data,L=[];if(!p.has(S)){const[N,...X]=a.get(S).map(F=>e.addInput("object",fn.ObjectRef({objectId:F.coinObjectId,digest:F.digest,version:F.version})));X.length>0&&L.push(Rr.MergeCoins(N,X)),p.set(S,N)}L.push(Rr.SplitCoins(p.get(S),[e.addInput("pure",fn.Pure(mr.u64().serialize(D)))])),e.replaceCommand(b,L),e.mapArguments(N=>N.$kind==="Result"&&N.Result===b?{$kind:"NestedResult",NestedResult:[b+L.length-1,0]}:N)}return r()}async function ro({coinType:e,balance:t,client:r,owner:i,usedIds:s}){let l=t;const a=[];return c();async function c(p=null){const{data:v,hasNextPage:M,nextCursor:b}=await r.getCoins({owner:i,coinType:e,cursor:p}),A=v.sort((S,D)=>Number(BigInt(D.balance)-BigInt(S.balance)));for(const S of A){if(s.has(S.coinObjectId))continue;const D=BigInt(S.balance);if(a.push(S),l-=D,l<=0)return a}if(M)return c(b);throw new Error(`Not enough coins of type ${e} to satisfy requested balance`)}}const no={pure:Ns(e=>t=>t.pure(e)),object:e=>t=>t.object(e),sharedObjectRef:(...e)=>t=>t.sharedObjectRef(...e),objectRef:(...e)=>t=>t.objectRef(...e),receivingRef:(...e)=>t=>t.receivingRef(...e)},io=Object.freeze(Object.defineProperty({__proto__:null,Arguments:no,AsyncCache:bi,Commands:Rr,Inputs:fn,ObjectCache:Ai,ParallelTransactionExecutor:Hs,SerialTransactionExecutor:Js,Transaction:Dr,TransactionDataBuilder:di,UpgradePolicy:Ps,coinWithBalance:Qs,getPureBcsSchema:js,isTransaction:Sn,normalizedTypeToMoveTypeSignature:Ls},Symbol.toStringTag,{value:"Module"})),so=dr({components:{CoinImg:ci},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},oneToAmount:{type:String,default:()=>""},oneFromAmount:{type:String,default:()=>""}},setup(e){return{rateChange:ut(!1)}}});const oo=e=>(pr("data-v-bab4e257"),e=e(),vr(),e),ao={class:"swap-rate"},lo={key:0},uo={class:"after-amount"},co={key:1},ho={class:"after-amount"},fo=oo(()=>j("svg",{class:"icon","aria-hidden":"true"},[j("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),go=[fo];function po(e,t,r,i,s,l){var c,p,v,M,b,A,S,D,L,N,X,F;const a=rr("CoinImg");return de(),ze("div",ao,[e.rateChange?(de(),ze("span",co,[j("span",ho,[(S=e.toCoin)!=null&&S.address?(de(),Pt(a,{key:0,url:(D=e.toCoin)==null?void 0:D.logoURI,size:"16px"},null,8,["url"])):At("",!0),Br(" 1 "+Ae((L=e.toCoin)==null?void 0:L.symbol)+" ≈ "+Ae(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+Ae((N=e.fromCoin)==null?void 0:N.symbol)+"  ",1),(X=e.fromCoin)!=null&&X.address?(de(),Pt(a,{key:1,url:(F=e.fromCoin)==null?void 0:F.logoURI,size:"16px"},null,8,["url"])):At("",!0)])])):(de(),ze("span",lo,[j("span",uo,[(c=e.fromCoin)!=null&&c.address?(de(),Pt(a,{key:0,url:(p=e.fromCoin)==null?void 0:p.logoURI,size:"16px"},null,8,["url"])):At("",!0),Br(" 1 "+Ae((v=e.fromCoin)==null?void 0:v.symbol)+" ≈ "+Ae(e.oneToAmount==1/0?0:e.oneToAmount)+" "+Ae((M=e.toCoin)==null?void 0:M.symbol)+"  ",1),(b=e.toCoin)!=null&&b.address?(de(),Pt(a,{key:1,url:(A=e.toCoin)==null?void 0:A.logoURI,size:"16px"},null,8,["url"])):At("",!0)])])),j("div",{class:"right",onClick:t[0]||(t[0]=q=>e.rateChange=!e.rateChange)},go)])}const $u=gr(so,[["render",po],["__scopeId","data-v-bab4e257"]]);async function Zu(e,t){var s,l,a;const r=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,i=`${yt.Sui.api}/v2/sui/coin/kline?coin_address=${r}&interval=day&market=${t}`;try{const c=await $fetch(i);return{price:((l=(s=c==null?void 0:c.data)==null?void 0:s.list)==null?void 0:l.reverse())||[],daily_rate:(a=c==null?void 0:c.data)==null?void 0:a.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function zu(e){try{const{prices:t}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),i=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,s=[];return t.forEach(l=>{s.push({price:new pi(l[1]).toString(),timestamp:l[0]})}),{price:s,daily_rate:i}}catch{return{price:[],daily_rate:""}}}const vo=hi(Zs),mo=hi(io);var vn=vo,wo=mo,yo=Object.create,Tn=Object.defineProperty,Mo=Object.defineProperties,_o=Object.getOwnPropertyDescriptor,bo=Object.getOwnPropertyDescriptors,Fi=Object.getOwnPropertyNames,Hn=Object.getOwnPropertySymbols,Ao=Object.getPrototypeOf,qi=Object.prototype.hasOwnProperty,Co=Object.prototype.propertyIsEnumerable,Gn=(e,t,r)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,So=(e,t)=>{for(var r in t||(t={}))qi.call(t,r)&&Gn(e,r,t[r]);if(Hn)for(var r of Hn(t))Co.call(t,r)&&Gn(e,r,t[r]);return e},Io=(e,t)=>Mo(e,bo(t)),Oo=(e=>typeof Ft<"u"?Ft:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof Ft<"u"?Ft:t)[r]}):e)(function(e){if(typeof Ft<"u")return Ft.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Eo=(e,t)=>function(){return t||(0,e[Fi(e)[0]])((t={exports:{}}).exports,t),t.exports},ko=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Fi(t))!qi.call(e,s)&&s!==r&&Tn(e,s,{get:()=>t[s],enumerable:!(i=_o(t,s))||i.enumerable});return e},wr=(e,t,r)=>(r=e!=null?yo(Ao(e)):{},ko(!e||!e.__esModule?Tn(r,"default",{value:e,enumerable:!0}):r,e)),Me=(e,t,r)=>new Promise((i,s)=>{var l=p=>{try{c(r.next(p))}catch(v){s(v)}},a=p=>{try{c(r.throw(p))}catch(v){s(v)}},c=p=>p.done?i(p.value):Promise.resolve(p.value).then(l,a);c((r=r.apply(e,t)).next())}),yr=Eo({"node_modules/bn.js/lib/bn.js"(e,t){(function(r,i){function s(m,n){if(!m)throw new Error(n||"Assertion failed")}function l(m,n){m.super_=n;var u=function(){};u.prototype=n.prototype,m.prototype=new u,m.prototype.constructor=m}function a(m,n,u){if(a.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((n==="le"||n==="be")&&(u=n,n=10),this._init(m||0,n||10,u||"be"))}typeof r=="object"?r.exports=a:i.BN=a,a.BN=a,a.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=Oo("buffer").Buffer}catch{}a.isBN=function(n){return n instanceof a?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===a.wordSize&&Array.isArray(n.words)},a.max=function(n,u){return n.cmp(u)>0?n:u},a.min=function(n,u){return n.cmp(u)<0?n:u},a.prototype._init=function(n,u,d){if(typeof n=="number")return this._initNumber(n,u,d);if(typeof n=="object")return this._initArray(n,u,d);u==="hex"&&(u=16),s(u===(u|0)&&u>=2&&u<=36),n=n.toString().replace(/\s+/g,"");var y=0;n[0]==="-"&&(y++,this.negative=1),y<n.length&&(u===16?this._parseHex(n,y,d):(this._parseBase(n,u,y),d==="le"&&this._initArray(this.toArray(),u,d)))},a.prototype._initNumber=function(n,u,d){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(s(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),u,d)},a.prototype._initArray=function(n,u,d){if(s(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var _,f,h=0;if(d==="be")for(y=n.length-1,_=0;y>=0;y-=3)f=n[y]|n[y-1]<<8|n[y-2]<<16,this.words[_]|=f<<h&67108863,this.words[_+1]=f>>>26-h&67108863,h+=24,h>=26&&(h-=26,_++);else if(d==="le")for(y=0,_=0;y<n.length;y+=3)f=n[y]|n[y+1]<<8|n[y+2]<<16,this.words[_]|=f<<h&67108863,this.words[_+1]=f>>>26-h&67108863,h+=24,h>=26&&(h-=26,_++);return this._strip()};function p(m,n){var u=m.charCodeAt(n);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;s(!1,"Invalid character in "+m)}function v(m,n,u){var d=p(m,u);return u-1>=n&&(d|=p(m,u-1)<<4),d}a.prototype._parseHex=function(n,u,d){this.length=Math.ceil((n.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var _=0,f=0,h;if(d==="be")for(y=n.length-1;y>=u;y-=2)h=v(n,u,y)<<_,this.words[f]|=h&67108863,_>=18?(_-=18,f+=1,this.words[f]|=h>>>26):_+=8;else{var g=n.length-u;for(y=g%2===0?u+1:u;y<n.length;y+=2)h=v(n,u,y)<<_,this.words[f]|=h&67108863,_>=18?(_-=18,f+=1,this.words[f]|=h>>>26):_+=8}this._strip()};function M(m,n,u,d){for(var y=0,_=0,f=Math.min(m.length,u),h=n;h<f;h++){var g=m.charCodeAt(h)-48;y*=d,g>=49?_=g-49+10:g>=17?_=g-17+10:_=g,s(g>=0&&_<d,"Invalid character"),y+=_}return y}a.prototype._parseBase=function(n,u,d){this.words=[0],this.length=1;for(var y=0,_=1;_<=67108863;_*=u)y++;y--,_=_/u|0;for(var f=n.length-d,h=f%y,g=Math.min(f,f-h)+d,o=0,w=d;w<g;w+=y)o=M(n,w,w+y,u),this.imuln(_),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(h!==0){var B=1;for(o=M(n,w,n.length,u),w=0;w<h;w++)B*=u;this.imuln(B),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},a.prototype.copy=function(n){n.words=new Array(this.length);for(var u=0;u<this.length;u++)n.words[u]=this.words[u];n.length=this.length,n.negative=this.negative,n.red=this.red};function b(m,n){m.words=n.words,m.length=n.length,m.negative=n.negative,m.red=n.red}if(a.prototype._move=function(n){b(n,this)},a.prototype.clone=function(){var n=new a(null);return this.copy(n),n},a.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{a.prototype.inspect=A}else a.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(n,u){n=n||10,u=u|0||1;var d;if(n===16||n==="hex"){d="";for(var y=0,_=0,f=0;f<this.length;f++){var h=this.words[f],g=((h<<y|_)&16777215).toString(16);_=h>>>24-y&16777215,y+=2,y>=26&&(y-=26,f--),_!==0||f!==this.length-1?d=S[6-g.length]+g+d:d=g+d}for(_!==0&&(d=_.toString(16)+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(n===(n|0)&&n>=2&&n<=36){var o=D[n],w=L[n];d="";var B=this.clone();for(B.negative=0;!B.isZero();){var R=B.modrn(w).toString(n);B=B.idivn(w),B.isZero()?d=R+d:d=S[o-R.length]+R+d}for(this.isZero()&&(d="0"+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},a.prototype.toJSON=function(){return this.toString(16,2)},c&&(a.prototype.toBuffer=function(n,u){return this.toArrayLike(c,n,u)}),a.prototype.toArray=function(n,u){return this.toArrayLike(Array,n,u)};var N=function(n,u){return n.allocUnsafe?n.allocUnsafe(u):new n(u)};a.prototype.toArrayLike=function(n,u,d){this._strip();var y=this.byteLength(),_=d||Math.max(1,y);s(y<=_,"byte array longer than desired length"),s(_>0,"Requested array length <= 0");var f=N(n,_),h=u==="le"?"LE":"BE";return this["_toArrayLike"+h](f,y),f},a.prototype._toArrayLikeLE=function(n,u){for(var d=0,y=0,_=0,f=0;_<this.length;_++){var h=this.words[_]<<f|y;n[d++]=h&255,d<n.length&&(n[d++]=h>>8&255),d<n.length&&(n[d++]=h>>16&255),f===6?(d<n.length&&(n[d++]=h>>24&255),y=0,f=0):(y=h>>>24,f+=2)}if(d<n.length)for(n[d++]=y;d<n.length;)n[d++]=0},a.prototype._toArrayLikeBE=function(n,u){for(var d=n.length-1,y=0,_=0,f=0;_<this.length;_++){var h=this.words[_]<<f|y;n[d--]=h&255,d>=0&&(n[d--]=h>>8&255),d>=0&&(n[d--]=h>>16&255),f===6?(d>=0&&(n[d--]=h>>24&255),y=0,f=0):(y=h>>>24,f+=2)}if(d>=0)for(n[d--]=y;d>=0;)n[d--]=0},Math.clz32?a.prototype._countBits=function(n){return 32-Math.clz32(n)}:a.prototype._countBits=function(n){var u=n,d=0;return u>=4096&&(d+=13,u>>>=13),u>=64&&(d+=7,u>>>=7),u>=8&&(d+=4,u>>>=4),u>=2&&(d+=2,u>>>=2),d+u},a.prototype._zeroBits=function(n){if(n===0)return 26;var u=n,d=0;return u&8191||(d+=13,u>>>=13),u&127||(d+=7,u>>>=7),u&15||(d+=4,u>>>=4),u&3||(d+=2,u>>>=2),u&1||d++,d},a.prototype.bitLength=function(){var n=this.words[this.length-1],u=this._countBits(n);return(this.length-1)*26+u};function X(m){for(var n=new Array(m.bitLength()),u=0;u<n.length;u++){var d=u/26|0,y=u%26;n[u]=m.words[d]>>>y&1}return n}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,u=0;u<this.length;u++){var d=this._zeroBits(this.words[u]);if(n+=d,d!==26)break}return n},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},a.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var u=0;u<n.length;u++)this.words[u]=this.words[u]|n.words[u];return this._strip()},a.prototype.ior=function(n){return s((this.negative|n.negative)===0),this.iuor(n)},a.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},a.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},a.prototype.iuand=function(n){var u;this.length>n.length?u=n:u=this;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]&n.words[d];return this.length=u.length,this._strip()},a.prototype.iand=function(n){return s((this.negative|n.negative)===0),this.iuand(n)},a.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},a.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},a.prototype.iuxor=function(n){var u,d;this.length>n.length?(u=this,d=n):(u=n,d=this);for(var y=0;y<d.length;y++)this.words[y]=u.words[y]^d.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this._strip()},a.prototype.ixor=function(n){return s((this.negative|n.negative)===0),this.iuxor(n)},a.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},a.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},a.prototype.inotn=function(n){s(typeof n=="number"&&n>=0);var u=Math.ceil(n/26)|0,d=n%26;this._expand(u),d>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return d>0&&(this.words[y]=~this.words[y]&67108863>>26-d),this._strip()},a.prototype.notn=function(n){return this.clone().inotn(n)},a.prototype.setn=function(n,u){s(typeof n=="number"&&n>=0);var d=n/26|0,y=n%26;return this._expand(d+1),u?this.words[d]=this.words[d]|1<<y:this.words[d]=this.words[d]&~(1<<y),this._strip()},a.prototype.iadd=function(n){var u;if(this.negative!==0&&n.negative===0)return this.negative=0,u=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,u=this.isub(n),n.negative=1,u._normSign();var d,y;this.length>n.length?(d=this,y=n):(d=n,y=this);for(var _=0,f=0;f<y.length;f++)u=(d.words[f]|0)+(y.words[f]|0)+_,this.words[f]=u&67108863,_=u>>>26;for(;_!==0&&f<d.length;f++)u=(d.words[f]|0)+_,this.words[f]=u&67108863,_=u>>>26;if(this.length=d.length,_!==0)this.words[this.length]=_,this.length++;else if(d!==this)for(;f<d.length;f++)this.words[f]=d.words[f];return this},a.prototype.add=function(n){var u;return n.negative!==0&&this.negative===0?(n.negative=0,u=this.sub(n),n.negative^=1,u):n.negative===0&&this.negative!==0?(this.negative=0,u=n.sub(this),this.negative=1,u):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},a.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var u=this.iadd(n);return n.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var d=this.cmp(n);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,_;d>0?(y=this,_=n):(y=n,_=this);for(var f=0,h=0;h<_.length;h++)u=(y.words[h]|0)-(_.words[h]|0)+f,f=u>>26,this.words[h]=u&67108863;for(;f!==0&&h<y.length;h++)u=(y.words[h]|0)+f,f=u>>26,this.words[h]=u&67108863;if(f===0&&h<y.length&&y!==this)for(;h<y.length;h++)this.words[h]=y.words[h];return this.length=Math.max(this.length,h),y!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(n){return this.clone().isub(n)};function F(m,n,u){u.negative=n.negative^m.negative;var d=m.length+n.length|0;u.length=d,d=d-1|0;var y=m.words[0]|0,_=n.words[0]|0,f=y*_,h=f&67108863,g=f/67108864|0;u.words[0]=h;for(var o=1;o<d;o++){for(var w=g>>>26,B=g&67108863,R=Math.min(o,n.length-1),k=Math.max(0,o-m.length+1);k<=R;k++){var V=o-k|0;y=m.words[V]|0,_=n.words[k]|0,f=y*_+B,w+=f/67108864|0,B=f&67108863}u.words[o]=B|0,g=w|0}return g!==0?u.words[o]=g|0:u.length--,u._strip()}var q=function(n,u,d){var y=n.words,_=u.words,f=d.words,h=0,g,o,w,B=y[0]|0,R=B&8191,k=B>>>13,V=y[1]|0,Z=V&8191,J=V>>>13,ue=y[2]|0,H=ue&8191,te=ue>>>13,re=y[3]|0,ne=re&8191,se=re>>>13,Je=y[4]|0,oe=Je&8191,ce=Je>>>13,Qe=y[5]|0,ve=Qe&8191,me=Qe>>>13,kt=y[6]|0,pe=kt&8191,we=kt>>>13,st=y[7]|0,le=st&8191,Q=st>>>13,ie=y[8]|0,he=ie&8191,fe=ie>>>13,ae=y[9]|0,ye=ae&8191,_e=ae>>>13,Gt=_[0]|0,Ie=Gt&8191,Oe=Gt>>>13,Pn=_[1]|0,Ee=Pn&8191,ke=Pn>>>13,jn=_[2]|0,Te=jn&8191,Be=jn>>>13,Ln=_[3]|0,Re=Ln&8191,Ne=Ln>>>13,Fn=_[4]|0,Pe=Fn&8191,je=Fn>>>13,qn=_[5]|0,Le=qn&8191,Fe=qn>>>13,Dn=_[6]|0,qe=Dn&8191,De=Dn>>>13,Un=_[7]|0,Ue=Un&8191,xe=Un>>>13,xn=_[8]|0,We=xn&8191,Ve=xn>>>13,Wn=_[9]|0,$e=Wn&8191,Ze=Wn>>>13;d.negative=n.negative^u.negative,d.length=19,g=Math.imul(R,Ie),o=Math.imul(R,Oe),o=o+Math.imul(k,Ie)|0,w=Math.imul(k,Oe);var $r=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+($r>>>26)|0,$r&=67108863,g=Math.imul(Z,Ie),o=Math.imul(Z,Oe),o=o+Math.imul(J,Ie)|0,w=Math.imul(J,Oe),g=g+Math.imul(R,Ee)|0,o=o+Math.imul(R,ke)|0,o=o+Math.imul(k,Ee)|0,w=w+Math.imul(k,ke)|0;var Zr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,g=Math.imul(H,Ie),o=Math.imul(H,Oe),o=o+Math.imul(te,Ie)|0,w=Math.imul(te,Oe),g=g+Math.imul(Z,Ee)|0,o=o+Math.imul(Z,ke)|0,o=o+Math.imul(J,Ee)|0,w=w+Math.imul(J,ke)|0,g=g+Math.imul(R,Te)|0,o=o+Math.imul(R,Be)|0,o=o+Math.imul(k,Te)|0,w=w+Math.imul(k,Be)|0;var zr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(ne,Ie),o=Math.imul(ne,Oe),o=o+Math.imul(se,Ie)|0,w=Math.imul(se,Oe),g=g+Math.imul(H,Ee)|0,o=o+Math.imul(H,ke)|0,o=o+Math.imul(te,Ee)|0,w=w+Math.imul(te,ke)|0,g=g+Math.imul(Z,Te)|0,o=o+Math.imul(Z,Be)|0,o=o+Math.imul(J,Te)|0,w=w+Math.imul(J,Be)|0,g=g+Math.imul(R,Re)|0,o=o+Math.imul(R,Ne)|0,o=o+Math.imul(k,Re)|0,w=w+Math.imul(k,Ne)|0;var Kr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(oe,Ie),o=Math.imul(oe,Oe),o=o+Math.imul(ce,Ie)|0,w=Math.imul(ce,Oe),g=g+Math.imul(ne,Ee)|0,o=o+Math.imul(ne,ke)|0,o=o+Math.imul(se,Ee)|0,w=w+Math.imul(se,ke)|0,g=g+Math.imul(H,Te)|0,o=o+Math.imul(H,Be)|0,o=o+Math.imul(te,Te)|0,w=w+Math.imul(te,Be)|0,g=g+Math.imul(Z,Re)|0,o=o+Math.imul(Z,Ne)|0,o=o+Math.imul(J,Re)|0,w=w+Math.imul(J,Ne)|0,g=g+Math.imul(R,Pe)|0,o=o+Math.imul(R,je)|0,o=o+Math.imul(k,Pe)|0,w=w+Math.imul(k,je)|0;var Xr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,g=Math.imul(ve,Ie),o=Math.imul(ve,Oe),o=o+Math.imul(me,Ie)|0,w=Math.imul(me,Oe),g=g+Math.imul(oe,Ee)|0,o=o+Math.imul(oe,ke)|0,o=o+Math.imul(ce,Ee)|0,w=w+Math.imul(ce,ke)|0,g=g+Math.imul(ne,Te)|0,o=o+Math.imul(ne,Be)|0,o=o+Math.imul(se,Te)|0,w=w+Math.imul(se,Be)|0,g=g+Math.imul(H,Re)|0,o=o+Math.imul(H,Ne)|0,o=o+Math.imul(te,Re)|0,w=w+Math.imul(te,Ne)|0,g=g+Math.imul(Z,Pe)|0,o=o+Math.imul(Z,je)|0,o=o+Math.imul(J,Pe)|0,w=w+Math.imul(J,je)|0,g=g+Math.imul(R,Le)|0,o=o+Math.imul(R,Fe)|0,o=o+Math.imul(k,Le)|0,w=w+Math.imul(k,Fe)|0;var Yr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,g=Math.imul(pe,Ie),o=Math.imul(pe,Oe),o=o+Math.imul(we,Ie)|0,w=Math.imul(we,Oe),g=g+Math.imul(ve,Ee)|0,o=o+Math.imul(ve,ke)|0,o=o+Math.imul(me,Ee)|0,w=w+Math.imul(me,ke)|0,g=g+Math.imul(oe,Te)|0,o=o+Math.imul(oe,Be)|0,o=o+Math.imul(ce,Te)|0,w=w+Math.imul(ce,Be)|0,g=g+Math.imul(ne,Re)|0,o=o+Math.imul(ne,Ne)|0,o=o+Math.imul(se,Re)|0,w=w+Math.imul(se,Ne)|0,g=g+Math.imul(H,Pe)|0,o=o+Math.imul(H,je)|0,o=o+Math.imul(te,Pe)|0,w=w+Math.imul(te,je)|0,g=g+Math.imul(Z,Le)|0,o=o+Math.imul(Z,Fe)|0,o=o+Math.imul(J,Le)|0,w=w+Math.imul(J,Fe)|0,g=g+Math.imul(R,qe)|0,o=o+Math.imul(R,De)|0,o=o+Math.imul(k,qe)|0,w=w+Math.imul(k,De)|0;var Jr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,g=Math.imul(le,Ie),o=Math.imul(le,Oe),o=o+Math.imul(Q,Ie)|0,w=Math.imul(Q,Oe),g=g+Math.imul(pe,Ee)|0,o=o+Math.imul(pe,ke)|0,o=o+Math.imul(we,Ee)|0,w=w+Math.imul(we,ke)|0,g=g+Math.imul(ve,Te)|0,o=o+Math.imul(ve,Be)|0,o=o+Math.imul(me,Te)|0,w=w+Math.imul(me,Be)|0,g=g+Math.imul(oe,Re)|0,o=o+Math.imul(oe,Ne)|0,o=o+Math.imul(ce,Re)|0,w=w+Math.imul(ce,Ne)|0,g=g+Math.imul(ne,Pe)|0,o=o+Math.imul(ne,je)|0,o=o+Math.imul(se,Pe)|0,w=w+Math.imul(se,je)|0,g=g+Math.imul(H,Le)|0,o=o+Math.imul(H,Fe)|0,o=o+Math.imul(te,Le)|0,w=w+Math.imul(te,Fe)|0,g=g+Math.imul(Z,qe)|0,o=o+Math.imul(Z,De)|0,o=o+Math.imul(J,qe)|0,w=w+Math.imul(J,De)|0,g=g+Math.imul(R,Ue)|0,o=o+Math.imul(R,xe)|0,o=o+Math.imul(k,Ue)|0,w=w+Math.imul(k,xe)|0;var Hr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,g=Math.imul(he,Ie),o=Math.imul(he,Oe),o=o+Math.imul(fe,Ie)|0,w=Math.imul(fe,Oe),g=g+Math.imul(le,Ee)|0,o=o+Math.imul(le,ke)|0,o=o+Math.imul(Q,Ee)|0,w=w+Math.imul(Q,ke)|0,g=g+Math.imul(pe,Te)|0,o=o+Math.imul(pe,Be)|0,o=o+Math.imul(we,Te)|0,w=w+Math.imul(we,Be)|0,g=g+Math.imul(ve,Re)|0,o=o+Math.imul(ve,Ne)|0,o=o+Math.imul(me,Re)|0,w=w+Math.imul(me,Ne)|0,g=g+Math.imul(oe,Pe)|0,o=o+Math.imul(oe,je)|0,o=o+Math.imul(ce,Pe)|0,w=w+Math.imul(ce,je)|0,g=g+Math.imul(ne,Le)|0,o=o+Math.imul(ne,Fe)|0,o=o+Math.imul(se,Le)|0,w=w+Math.imul(se,Fe)|0,g=g+Math.imul(H,qe)|0,o=o+Math.imul(H,De)|0,o=o+Math.imul(te,qe)|0,w=w+Math.imul(te,De)|0,g=g+Math.imul(Z,Ue)|0,o=o+Math.imul(Z,xe)|0,o=o+Math.imul(J,Ue)|0,w=w+Math.imul(J,xe)|0,g=g+Math.imul(R,We)|0,o=o+Math.imul(R,Ve)|0,o=o+Math.imul(k,We)|0,w=w+Math.imul(k,Ve)|0;var Gr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,g=Math.imul(ye,Ie),o=Math.imul(ye,Oe),o=o+Math.imul(_e,Ie)|0,w=Math.imul(_e,Oe),g=g+Math.imul(he,Ee)|0,o=o+Math.imul(he,ke)|0,o=o+Math.imul(fe,Ee)|0,w=w+Math.imul(fe,ke)|0,g=g+Math.imul(le,Te)|0,o=o+Math.imul(le,Be)|0,o=o+Math.imul(Q,Te)|0,w=w+Math.imul(Q,Be)|0,g=g+Math.imul(pe,Re)|0,o=o+Math.imul(pe,Ne)|0,o=o+Math.imul(we,Re)|0,w=w+Math.imul(we,Ne)|0,g=g+Math.imul(ve,Pe)|0,o=o+Math.imul(ve,je)|0,o=o+Math.imul(me,Pe)|0,w=w+Math.imul(me,je)|0,g=g+Math.imul(oe,Le)|0,o=o+Math.imul(oe,Fe)|0,o=o+Math.imul(ce,Le)|0,w=w+Math.imul(ce,Fe)|0,g=g+Math.imul(ne,qe)|0,o=o+Math.imul(ne,De)|0,o=o+Math.imul(se,qe)|0,w=w+Math.imul(se,De)|0,g=g+Math.imul(H,Ue)|0,o=o+Math.imul(H,xe)|0,o=o+Math.imul(te,Ue)|0,w=w+Math.imul(te,xe)|0,g=g+Math.imul(Z,We)|0,o=o+Math.imul(Z,Ve)|0,o=o+Math.imul(J,We)|0,w=w+Math.imul(J,Ve)|0,g=g+Math.imul(R,$e)|0,o=o+Math.imul(R,Ze)|0,o=o+Math.imul(k,$e)|0,w=w+Math.imul(k,Ze)|0;var Qr=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,g=Math.imul(ye,Ee),o=Math.imul(ye,ke),o=o+Math.imul(_e,Ee)|0,w=Math.imul(_e,ke),g=g+Math.imul(he,Te)|0,o=o+Math.imul(he,Be)|0,o=o+Math.imul(fe,Te)|0,w=w+Math.imul(fe,Be)|0,g=g+Math.imul(le,Re)|0,o=o+Math.imul(le,Ne)|0,o=o+Math.imul(Q,Re)|0,w=w+Math.imul(Q,Ne)|0,g=g+Math.imul(pe,Pe)|0,o=o+Math.imul(pe,je)|0,o=o+Math.imul(we,Pe)|0,w=w+Math.imul(we,je)|0,g=g+Math.imul(ve,Le)|0,o=o+Math.imul(ve,Fe)|0,o=o+Math.imul(me,Le)|0,w=w+Math.imul(me,Fe)|0,g=g+Math.imul(oe,qe)|0,o=o+Math.imul(oe,De)|0,o=o+Math.imul(ce,qe)|0,w=w+Math.imul(ce,De)|0,g=g+Math.imul(ne,Ue)|0,o=o+Math.imul(ne,xe)|0,o=o+Math.imul(se,Ue)|0,w=w+Math.imul(se,xe)|0,g=g+Math.imul(H,We)|0,o=o+Math.imul(H,Ve)|0,o=o+Math.imul(te,We)|0,w=w+Math.imul(te,Ve)|0,g=g+Math.imul(Z,$e)|0,o=o+Math.imul(Z,Ze)|0,o=o+Math.imul(J,$e)|0,w=w+Math.imul(J,Ze)|0;var en=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(en>>>26)|0,en&=67108863,g=Math.imul(ye,Te),o=Math.imul(ye,Be),o=o+Math.imul(_e,Te)|0,w=Math.imul(_e,Be),g=g+Math.imul(he,Re)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(fe,Re)|0,w=w+Math.imul(fe,Ne)|0,g=g+Math.imul(le,Pe)|0,o=o+Math.imul(le,je)|0,o=o+Math.imul(Q,Pe)|0,w=w+Math.imul(Q,je)|0,g=g+Math.imul(pe,Le)|0,o=o+Math.imul(pe,Fe)|0,o=o+Math.imul(we,Le)|0,w=w+Math.imul(we,Fe)|0,g=g+Math.imul(ve,qe)|0,o=o+Math.imul(ve,De)|0,o=o+Math.imul(me,qe)|0,w=w+Math.imul(me,De)|0,g=g+Math.imul(oe,Ue)|0,o=o+Math.imul(oe,xe)|0,o=o+Math.imul(ce,Ue)|0,w=w+Math.imul(ce,xe)|0,g=g+Math.imul(ne,We)|0,o=o+Math.imul(ne,Ve)|0,o=o+Math.imul(se,We)|0,w=w+Math.imul(se,Ve)|0,g=g+Math.imul(H,$e)|0,o=o+Math.imul(H,Ze)|0,o=o+Math.imul(te,$e)|0,w=w+Math.imul(te,Ze)|0;var tn=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(tn>>>26)|0,tn&=67108863,g=Math.imul(ye,Re),o=Math.imul(ye,Ne),o=o+Math.imul(_e,Re)|0,w=Math.imul(_e,Ne),g=g+Math.imul(he,Pe)|0,o=o+Math.imul(he,je)|0,o=o+Math.imul(fe,Pe)|0,w=w+Math.imul(fe,je)|0,g=g+Math.imul(le,Le)|0,o=o+Math.imul(le,Fe)|0,o=o+Math.imul(Q,Le)|0,w=w+Math.imul(Q,Fe)|0,g=g+Math.imul(pe,qe)|0,o=o+Math.imul(pe,De)|0,o=o+Math.imul(we,qe)|0,w=w+Math.imul(we,De)|0,g=g+Math.imul(ve,Ue)|0,o=o+Math.imul(ve,xe)|0,o=o+Math.imul(me,Ue)|0,w=w+Math.imul(me,xe)|0,g=g+Math.imul(oe,We)|0,o=o+Math.imul(oe,Ve)|0,o=o+Math.imul(ce,We)|0,w=w+Math.imul(ce,Ve)|0,g=g+Math.imul(ne,$e)|0,o=o+Math.imul(ne,Ze)|0,o=o+Math.imul(se,$e)|0,w=w+Math.imul(se,Ze)|0;var rn=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(rn>>>26)|0,rn&=67108863,g=Math.imul(ye,Pe),o=Math.imul(ye,je),o=o+Math.imul(_e,Pe)|0,w=Math.imul(_e,je),g=g+Math.imul(he,Le)|0,o=o+Math.imul(he,Fe)|0,o=o+Math.imul(fe,Le)|0,w=w+Math.imul(fe,Fe)|0,g=g+Math.imul(le,qe)|0,o=o+Math.imul(le,De)|0,o=o+Math.imul(Q,qe)|0,w=w+Math.imul(Q,De)|0,g=g+Math.imul(pe,Ue)|0,o=o+Math.imul(pe,xe)|0,o=o+Math.imul(we,Ue)|0,w=w+Math.imul(we,xe)|0,g=g+Math.imul(ve,We)|0,o=o+Math.imul(ve,Ve)|0,o=o+Math.imul(me,We)|0,w=w+Math.imul(me,Ve)|0,g=g+Math.imul(oe,$e)|0,o=o+Math.imul(oe,Ze)|0,o=o+Math.imul(ce,$e)|0,w=w+Math.imul(ce,Ze)|0;var nn=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(nn>>>26)|0,nn&=67108863,g=Math.imul(ye,Le),o=Math.imul(ye,Fe),o=o+Math.imul(_e,Le)|0,w=Math.imul(_e,Fe),g=g+Math.imul(he,qe)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(fe,qe)|0,w=w+Math.imul(fe,De)|0,g=g+Math.imul(le,Ue)|0,o=o+Math.imul(le,xe)|0,o=o+Math.imul(Q,Ue)|0,w=w+Math.imul(Q,xe)|0,g=g+Math.imul(pe,We)|0,o=o+Math.imul(pe,Ve)|0,o=o+Math.imul(we,We)|0,w=w+Math.imul(we,Ve)|0,g=g+Math.imul(ve,$e)|0,o=o+Math.imul(ve,Ze)|0,o=o+Math.imul(me,$e)|0,w=w+Math.imul(me,Ze)|0;var sn=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(sn>>>26)|0,sn&=67108863,g=Math.imul(ye,qe),o=Math.imul(ye,De),o=o+Math.imul(_e,qe)|0,w=Math.imul(_e,De),g=g+Math.imul(he,Ue)|0,o=o+Math.imul(he,xe)|0,o=o+Math.imul(fe,Ue)|0,w=w+Math.imul(fe,xe)|0,g=g+Math.imul(le,We)|0,o=o+Math.imul(le,Ve)|0,o=o+Math.imul(Q,We)|0,w=w+Math.imul(Q,Ve)|0,g=g+Math.imul(pe,$e)|0,o=o+Math.imul(pe,Ze)|0,o=o+Math.imul(we,$e)|0,w=w+Math.imul(we,Ze)|0;var on=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(on>>>26)|0,on&=67108863,g=Math.imul(ye,Ue),o=Math.imul(ye,xe),o=o+Math.imul(_e,Ue)|0,w=Math.imul(_e,xe),g=g+Math.imul(he,We)|0,o=o+Math.imul(he,Ve)|0,o=o+Math.imul(fe,We)|0,w=w+Math.imul(fe,Ve)|0,g=g+Math.imul(le,$e)|0,o=o+Math.imul(le,Ze)|0,o=o+Math.imul(Q,$e)|0,w=w+Math.imul(Q,Ze)|0;var an=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(an>>>26)|0,an&=67108863,g=Math.imul(ye,We),o=Math.imul(ye,Ve),o=o+Math.imul(_e,We)|0,w=Math.imul(_e,Ve),g=g+Math.imul(he,$e)|0,o=o+Math.imul(he,Ze)|0,o=o+Math.imul(fe,$e)|0,w=w+Math.imul(fe,Ze)|0;var ln=(h+g|0)+((o&8191)<<13)|0;h=(w+(o>>>13)|0)+(ln>>>26)|0,ln&=67108863,g=Math.imul(ye,$e),o=Math.imul(ye,Ze),o=o+Math.imul(_e,$e)|0,w=Math.imul(_e,Ze);var un=(h+g|0)+((o&8191)<<13)|0;return h=(w+(o>>>13)|0)+(un>>>26)|0,un&=67108863,f[0]=$r,f[1]=Zr,f[2]=zr,f[3]=Kr,f[4]=Xr,f[5]=Yr,f[6]=Jr,f[7]=Hr,f[8]=Gr,f[9]=Qr,f[10]=en,f[11]=tn,f[12]=rn,f[13]=nn,f[14]=sn,f[15]=on,f[16]=an,f[17]=ln,f[18]=un,h!==0&&(f[19]=h,d.length++),d};Math.imul||(q=F);function T(m,n,u){u.negative=n.negative^m.negative,u.length=m.length+n.length;for(var d=0,y=0,_=0;_<u.length-1;_++){var f=y;y=0;for(var h=d&67108863,g=Math.min(_,n.length-1),o=Math.max(0,_-m.length+1);o<=g;o++){var w=_-o,B=m.words[w]|0,R=n.words[o]|0,k=B*R,V=k&67108863;f=f+(k/67108864|0)|0,V=V+h|0,h=V&67108863,f=f+(V>>>26)|0,y+=f>>>26,f&=67108863}u.words[_]=h,d=f,f=y}return d!==0?u.words[_]=d:u.length--,u._strip()}function ee(m,n,u){return T(m,n,u)}a.prototype.mulTo=function(n,u){var d,y=this.length+n.length;return this.length===10&&n.length===10?d=q(this,n,u):y<63?d=F(this,n,u):y<1024?d=T(this,n,u):d=ee(this,n,u),d},a.prototype.mul=function(n){var u=new a(null);return u.words=new Array(this.length+n.length),this.mulTo(n,u)},a.prototype.mulf=function(n){var u=new a(null);return u.words=new Array(this.length+n.length),ee(this,n,u)},a.prototype.imul=function(n){return this.clone().mulTo(n,this)},a.prototype.imuln=function(n){var u=n<0;u&&(n=-n),s(typeof n=="number"),s(n<67108864);for(var d=0,y=0;y<this.length;y++){var _=(this.words[y]|0)*n,f=(_&67108863)+(d&67108863);d>>=26,d+=_/67108864|0,d+=f>>>26,this.words[y]=f&67108863}return d!==0&&(this.words[y]=d,this.length++),u?this.ineg():this},a.prototype.muln=function(n){return this.clone().imuln(n)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(n){var u=X(n);if(u.length===0)return new a(1);for(var d=this,y=0;y<u.length&&u[y]===0;y++,d=d.sqr());if(++y<u.length)for(var _=d.sqr();y<u.length;y++,_=_.sqr())u[y]!==0&&(d=d.mul(_));return d},a.prototype.iushln=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26,y=67108863>>>26-u<<26-u,_;if(u!==0){var f=0;for(_=0;_<this.length;_++){var h=this.words[_]&y,g=(this.words[_]|0)-h<<u;this.words[_]=g|f,f=h>>>26-u}f&&(this.words[_]=f,this.length++)}if(d!==0){for(_=this.length-1;_>=0;_--)this.words[_+d]=this.words[_];for(_=0;_<d;_++)this.words[_]=0;this.length+=d}return this._strip()},a.prototype.ishln=function(n){return s(this.negative===0),this.iushln(n)},a.prototype.iushrn=function(n,u,d){s(typeof n=="number"&&n>=0);var y;u?y=(u-u%26)/26:y=0;var _=n%26,f=Math.min((n-_)/26,this.length),h=67108863^67108863>>>_<<_,g=d;if(y-=f,y=Math.max(0,y),g){for(var o=0;o<f;o++)g.words[o]=this.words[o];g.length=f}if(f!==0)if(this.length>f)for(this.length-=f,o=0;o<this.length;o++)this.words[o]=this.words[o+f];else this.words[0]=0,this.length=1;var w=0;for(o=this.length-1;o>=0&&(w!==0||o>=y);o--){var B=this.words[o]|0;this.words[o]=w<<26-_|B>>>_,w=B&h}return g&&w!==0&&(g.words[g.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(n,u,d){return s(this.negative===0),this.iushrn(n,u,d)},a.prototype.shln=function(n){return this.clone().ishln(n)},a.prototype.ushln=function(n){return this.clone().iushln(n)},a.prototype.shrn=function(n){return this.clone().ishrn(n)},a.prototype.ushrn=function(n){return this.clone().iushrn(n)},a.prototype.testn=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26,y=1<<u;if(this.length<=d)return!1;var _=this.words[d];return!!(_&y)},a.prototype.imaskn=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(u!==0&&d++,this.length=Math.min(d,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this._strip()},a.prototype.maskn=function(n){return this.clone().imaskn(n)},a.prototype.iaddn=function(n){return s(typeof n=="number"),s(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},a.prototype._iaddn=function(n){this.words[0]+=n;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},a.prototype.isubn=function(n){if(s(typeof n=="number"),s(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},a.prototype.addn=function(n){return this.clone().iaddn(n)},a.prototype.subn=function(n){return this.clone().isubn(n)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(n,u,d){var y=n.length+d,_;this._expand(y);var f,h=0;for(_=0;_<n.length;_++){f=(this.words[_+d]|0)+h;var g=(n.words[_]|0)*u;f-=g&67108863,h=(f>>26)-(g/67108864|0),this.words[_+d]=f&67108863}for(;_<this.length-d;_++)f=(this.words[_+d]|0)+h,h=f>>26,this.words[_+d]=f&67108863;if(h===0)return this._strip();for(s(h===-1),h=0,_=0;_<this.length;_++)f=-(this.words[_]|0)+h,h=f>>26,this.words[_]=f&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(n,u){var d=this.length-n.length,y=this.clone(),_=n,f=_.words[_.length-1]|0,h=this._countBits(f);d=26-h,d!==0&&(_=_.ushln(d),y.iushln(d),f=_.words[_.length-1]|0);var g=y.length-_.length,o;if(u!=="mod"){o=new a(null),o.length=g+1,o.words=new Array(o.length);for(var w=0;w<o.length;w++)o.words[w]=0}var B=y.clone()._ishlnsubmul(_,1,g);B.negative===0&&(y=B,o&&(o.words[g]=1));for(var R=g-1;R>=0;R--){var k=(y.words[_.length+R]|0)*67108864+(y.words[_.length+R-1]|0);for(k=Math.min(k/f|0,67108863),y._ishlnsubmul(_,k,R);y.negative!==0;)k--,y.negative=0,y._ishlnsubmul(_,1,R),y.isZero()||(y.negative^=1);o&&(o.words[R]=k)}return o&&o._strip(),y._strip(),u!=="div"&&d!==0&&y.iushrn(d),{div:o||null,mod:y}},a.prototype.divmod=function(n,u,d){if(s(!n.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,_,f;return this.negative!==0&&n.negative===0?(f=this.neg().divmod(n,u),u!=="mod"&&(y=f.div.neg()),u!=="div"&&(_=f.mod.neg(),d&&_.negative!==0&&_.iadd(n)),{div:y,mod:_}):this.negative===0&&n.negative!==0?(f=this.divmod(n.neg(),u),u!=="mod"&&(y=f.div.neg()),{div:y,mod:f.mod}):this.negative&n.negative?(f=this.neg().divmod(n.neg(),u),u!=="div"&&(_=f.mod.neg(),d&&_.negative!==0&&_.isub(n)),{div:f.div,mod:_}):n.length>this.length||this.cmp(n)<0?{div:new a(0),mod:this}:n.length===1?u==="div"?{div:this.divn(n.words[0]),mod:null}:u==="mod"?{div:null,mod:new a(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new a(this.modrn(n.words[0]))}:this._wordDiv(n,u)},a.prototype.div=function(n){return this.divmod(n,"div",!1).div},a.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},a.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},a.prototype.divRound=function(n){var u=this.divmod(n);if(u.mod.isZero())return u.div;var d=u.div.negative!==0?u.mod.isub(n):u.mod,y=n.ushrn(1),_=n.andln(1),f=d.cmp(y);return f<0||_===1&&f===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},a.prototype.modrn=function(n){var u=n<0;u&&(n=-n),s(n<=67108863);for(var d=(1<<26)%n,y=0,_=this.length-1;_>=0;_--)y=(d*y+(this.words[_]|0))%n;return u?-y:y},a.prototype.modn=function(n){return this.modrn(n)},a.prototype.idivn=function(n){var u=n<0;u&&(n=-n),s(n<=67108863);for(var d=0,y=this.length-1;y>=0;y--){var _=(this.words[y]|0)+d*67108864;this.words[y]=_/n|0,d=_%n}return this._strip(),u?this.ineg():this},a.prototype.divn=function(n){return this.clone().idivn(n)},a.prototype.egcd=function(n){s(n.negative===0),s(!n.isZero());var u=this,d=n.clone();u.negative!==0?u=u.umod(n):u=u.clone();for(var y=new a(1),_=new a(0),f=new a(0),h=new a(1),g=0;u.isEven()&&d.isEven();)u.iushrn(1),d.iushrn(1),++g;for(var o=d.clone(),w=u.clone();!u.isZero();){for(var B=0,R=1;!(u.words[0]&R)&&B<26;++B,R<<=1);if(B>0)for(u.iushrn(B);B-- >0;)(y.isOdd()||_.isOdd())&&(y.iadd(o),_.isub(w)),y.iushrn(1),_.iushrn(1);for(var k=0,V=1;!(d.words[0]&V)&&k<26;++k,V<<=1);if(k>0)for(d.iushrn(k);k-- >0;)(f.isOdd()||h.isOdd())&&(f.iadd(o),h.isub(w)),f.iushrn(1),h.iushrn(1);u.cmp(d)>=0?(u.isub(d),y.isub(f),_.isub(h)):(d.isub(u),f.isub(y),h.isub(_))}return{a:f,b:h,gcd:d.iushln(g)}},a.prototype._invmp=function(n){s(n.negative===0),s(!n.isZero());var u=this,d=n.clone();u.negative!==0?u=u.umod(n):u=u.clone();for(var y=new a(1),_=new a(0),f=d.clone();u.cmpn(1)>0&&d.cmpn(1)>0;){for(var h=0,g=1;!(u.words[0]&g)&&h<26;++h,g<<=1);if(h>0)for(u.iushrn(h);h-- >0;)y.isOdd()&&y.iadd(f),y.iushrn(1);for(var o=0,w=1;!(d.words[0]&w)&&o<26;++o,w<<=1);if(o>0)for(d.iushrn(o);o-- >0;)_.isOdd()&&_.iadd(f),_.iushrn(1);u.cmp(d)>=0?(u.isub(d),y.isub(_)):(d.isub(u),_.isub(y))}var B;return u.cmpn(1)===0?B=y:B=_,B.cmpn(0)<0&&B.iadd(n),B},a.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var u=this.clone(),d=n.clone();u.negative=0,d.negative=0;for(var y=0;u.isEven()&&d.isEven();y++)u.iushrn(1),d.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;d.isEven();)d.iushrn(1);var _=u.cmp(d);if(_<0){var f=u;u=d,d=f}else if(_===0||d.cmpn(1)===0)break;u.isub(d)}while(!0);return d.iushln(y)},a.prototype.invm=function(n){return this.egcd(n).a.umod(n)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(n){return this.words[0]&n},a.prototype.bincn=function(n){s(typeof n=="number");var u=n%26,d=(n-u)/26,y=1<<u;if(this.length<=d)return this._expand(d+1),this.words[d]|=y,this;for(var _=y,f=d;_!==0&&f<this.length;f++){var h=this.words[f]|0;h+=_,_=h>>>26,h&=67108863,this.words[f]=h}return _!==0&&(this.words[f]=_,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(n){var u=n<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var d;if(this.length>1)d=1;else{u&&(n=-n),s(n<=67108863,"Number is too big");var y=this.words[0]|0;d=y===n?0:y<n?-1:1}return this.negative!==0?-d|0:d},a.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var u=this.ucmp(n);return this.negative!==0?-u|0:u},a.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var u=0,d=this.length-1;d>=0;d--){var y=this.words[d]|0,_=n.words[d]|0;if(y!==_){y<_?u=-1:y>_&&(u=1);break}}return u},a.prototype.gtn=function(n){return this.cmpn(n)===1},a.prototype.gt=function(n){return this.cmp(n)===1},a.prototype.gten=function(n){return this.cmpn(n)>=0},a.prototype.gte=function(n){return this.cmp(n)>=0},a.prototype.ltn=function(n){return this.cmpn(n)===-1},a.prototype.lt=function(n){return this.cmp(n)===-1},a.prototype.lten=function(n){return this.cmpn(n)<=0},a.prototype.lte=function(n){return this.cmp(n)<=0},a.prototype.eqn=function(n){return this.cmpn(n)===0},a.prototype.eq=function(n){return this.cmp(n)===0},a.red=function(n){return new U(n)},a.prototype.toRed=function(n){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(n){return this.red=n,this},a.prototype.forceRed=function(n){return s(!this.red,"Already a number in reduction context"),this._forceRed(n)},a.prototype.redAdd=function(n){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},a.prototype.redIAdd=function(n){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},a.prototype.redSub=function(n){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},a.prototype.redISub=function(n){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},a.prototype.redShl=function(n){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},a.prototype.redMul=function(n){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},a.prototype.redIMul=function(n){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(n){return s(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var x={k256:null,p224:null,p192:null,p25519:null};function E(m,n){this.name=m,this.p=new a(n,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var n=new a(null);return n.words=new Array(Math.ceil(this.n/13)),n},E.prototype.ireduce=function(n){var u=n,d;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),d=u.bitLength();while(d>this.n);var y=d<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},E.prototype.split=function(n,u){n.iushrn(this.n,0,u)},E.prototype.imulK=function(n){return n.imul(this.k)};function C(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(C,E),C.prototype.split=function(n,u){for(var d=4194303,y=Math.min(n.length,9),_=0;_<y;_++)u.words[_]=n.words[_];if(u.length=y,n.length<=9){n.words[0]=0,n.length=1;return}var f=n.words[9];for(u.words[u.length++]=f&d,_=10;_<n.length;_++){var h=n.words[_]|0;n.words[_-10]=(h&d)<<4|f>>>22,f=h}f>>>=22,n.words[_-10]=f,f===0&&n.length>10?n.length-=10:n.length-=9},C.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var u=0,d=0;d<n.length;d++){var y=n.words[d]|0;u+=y*977,n.words[d]=u&67108863,u=y*64+(u/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function I(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(I,E);function P(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(P,E);function z(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(z,E),z.prototype.imulK=function(n){for(var u=0,d=0;d<n.length;d++){var y=(n.words[d]|0)*19+u,_=y&67108863;y>>>=26,n.words[d]=_,u=y}return u!==0&&(n.words[n.length++]=u),n},a._prime=function(n){if(x[n])return x[n];var u;if(n==="k256")u=new C;else if(n==="p224")u=new I;else if(n==="p192")u=new P;else if(n==="p25519")u=new z;else throw new Error("Unknown prime "+n);return x[n]=u,u};function U(m){if(typeof m=="string"){var n=a._prime(m);this.m=n.p,this.prime=n}else s(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}U.prototype._verify1=function(n){s(n.negative===0,"red works only with positives"),s(n.red,"red works only with red numbers")},U.prototype._verify2=function(n,u){s((n.negative|u.negative)===0,"red works only with positives"),s(n.red&&n.red===u.red,"red works only with red numbers")},U.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(b(n,n.umod(this.m)._forceRed(this)),n)},U.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},U.prototype.add=function(n,u){this._verify2(n,u);var d=n.add(u);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},U.prototype.iadd=function(n,u){this._verify2(n,u);var d=n.iadd(u);return d.cmp(this.m)>=0&&d.isub(this.m),d},U.prototype.sub=function(n,u){this._verify2(n,u);var d=n.sub(u);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},U.prototype.isub=function(n,u){this._verify2(n,u);var d=n.isub(u);return d.cmpn(0)<0&&d.iadd(this.m),d},U.prototype.shl=function(n,u){return this._verify1(n),this.imod(n.ushln(u))},U.prototype.imul=function(n,u){return this._verify2(n,u),this.imod(n.imul(u))},U.prototype.mul=function(n,u){return this._verify2(n,u),this.imod(n.mul(u))},U.prototype.isqr=function(n){return this.imul(n,n.clone())},U.prototype.sqr=function(n){return this.mul(n,n)},U.prototype.sqrt=function(n){if(n.isZero())return n.clone();var u=this.m.andln(3);if(s(u%2===1),u===3){var d=this.m.add(new a(1)).iushrn(2);return this.pow(n,d)}for(var y=this.m.subn(1),_=0;!y.isZero()&&y.andln(1)===0;)_++,y.iushrn(1);s(!y.isZero());var f=new a(1).toRed(this),h=f.redNeg(),g=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new a(2*o*o).toRed(this);this.pow(o,g).cmp(h)!==0;)o.redIAdd(h);for(var w=this.pow(o,y),B=this.pow(n,y.addn(1).iushrn(1)),R=this.pow(n,y),k=_;R.cmp(f)!==0;){for(var V=R,Z=0;V.cmp(f)!==0;Z++)V=V.redSqr();s(Z<k);var J=this.pow(w,new a(1).iushln(k-Z-1));B=B.redMul(J),w=J.redSqr(),R=R.redMul(w),k=Z}return B},U.prototype.invm=function(n){var u=n._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},U.prototype.pow=function(n,u){if(u.isZero())return new a(1).toRed(this);if(u.cmpn(1)===0)return n.clone();var d=4,y=new Array(1<<d);y[0]=new a(1).toRed(this),y[1]=n;for(var _=2;_<y.length;_++)y[_]=this.mul(y[_-1],n);var f=y[0],h=0,g=0,o=u.bitLength()%26;for(o===0&&(o=26),_=u.length-1;_>=0;_--){for(var w=u.words[_],B=o-1;B>=0;B--){var R=w>>B&1;if(f!==y[0]&&(f=this.sqr(f)),R===0&&h===0){g=0;continue}h<<=1,h|=R,g++,!(g!==d&&(_!==0||B!==0))&&(f=this.mul(f,y[h]),g=0,h=0)}o=26}return f},U.prototype.convertTo=function(n){var u=n.umod(this.m);return u===n?u.clone():u},U.prototype.convertFrom=function(n){var u=n.clone();return u.red=null,u},a.mont=function(n){return new Y(n)};function Y(m){U.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(Y,U),Y.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Y.prototype.convertFrom=function(n){var u=this.imod(n.mul(this.rinv));return u.red=null,u},Y.prototype.imul=function(n,u){if(n.isZero()||u.isZero())return n.words[0]=0,n.length=1,n;var d=n.imul(u),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=d.isub(y).iushrn(this.shift),f=_;return _.cmp(this.m)>=0?f=_.isub(this.m):_.cmpn(0)<0&&(f=_.iadd(this.m)),f._forceRed(this)},Y.prototype.mul=function(n,u){if(n.isZero()||u.isZero())return new a(0)._forceRed(this);var d=n.mul(u),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=d.isub(y).iushrn(this.shift),f=_;return _.cmp(this.m)>=0?f=_.isub(this.m):_.cmpn(0)<0&&(f=_.iadd(this.m)),f._forceRed(this)},Y.prototype.invm=function(n){var u=this.imod(n._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof t>"u"||t,e)}}),Vt=9e15,Et=1e9,mn="0123456789abcdef",Lr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Fr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",wn={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Vt,maxE:Vt,crypto:!1},Di,wt,G=!0,xr="[DecimalError] ",Ot=xr+"Invalid argument: ",Ui=xr+"Precision limit exceeded",xi=xr+"crypto unavailable",Wi="[object Decimal]",et=Math.floor,Ye=Math.pow,To=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Bo=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Ro=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Vi=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ft=1e7,K=7,No=9007199254740991,Po=Lr.length-1,yn=Fr.length-1,O={toStringTag:Wi};O.absoluteValue=O.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),$(e)};O.ceil=function(){return $(new this.constructor(this),this.e+1,2)};O.clampedTo=O.clamp=function(e,t){var r,i=this,s=i.constructor;if(e=new s(e),t=new s(t),!e.s||!t.s)return new s(NaN);if(e.gt(t))throw Error(Ot+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new s(i)};O.comparedTo=O.cmp=function(e){var t,r,i,s,l=this,a=l.d,c=(e=new l.constructor(e)).d,p=l.s,v=e.s;if(!a||!c)return!p||!v?NaN:p!==v?p:a===c?0:!a^p<0?1:-1;if(!a[0]||!c[0])return a[0]?p:c[0]?-v:0;if(p!==v)return p;if(l.e!==e.e)return l.e>e.e^p<0?1:-1;for(i=a.length,s=c.length,t=0,r=i<s?i:s;t<r;++t)if(a[t]!==c[t])return a[t]>c[t]^p<0?1:-1;return i===s?0:i>s^p<0?1:-1};O.cosine=O.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+K,i.rounding=1,r=jo(i,Xi(i,r)),i.precision=e,i.rounding=t,$(wt==2||wt==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};O.cubeRoot=O.cbrt=function(){var e,t,r,i,s,l,a,c,p,v,M=this,b=M.constructor;if(!M.isFinite()||M.isZero())return new b(M);for(G=!1,l=M.s*Ye(M.s*M,1/3),!l||Math.abs(l)==1/0?(r=Ge(M.d),e=M.e,(l=(e-r.length+1)%3)&&(r+=l==1||l==-2?"0":"00"),l=Ye(r,1/3),e=et((e+1)/3)-(e%3==(e<0?-1:2)),l==1/0?r="5e"+e:(r=l.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new b(r),i.s=M.s):i=new b(l.toString()),a=(e=b.precision)+3;;)if(c=i,p=c.times(c).times(c),v=p.plus(M),i=ge(v.plus(M).times(c),v.plus(p),a+2,1),Ge(c.d).slice(0,a)===(r=Ge(i.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!s&&r=="4999"){if(!s&&($(c,e+1,0),c.times(c).times(c).eq(M))){i=c;break}a+=4,s=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&($(i,e+1,1),t=!i.times(i).times(i).eq(M));break}return G=!0,$(i,e,b.rounding,t)};O.decimalPlaces=O.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-et(this.e/K))*K,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};O.dividedBy=O.div=function(e){return ge(this,new this.constructor(e))};O.dividedToIntegerBy=O.divToInt=function(e){var t=this,r=t.constructor;return $(ge(t,new r(e),0,1,1),r.precision,r.rounding)};O.equals=O.eq=function(e){return this.cmp(e)===0};O.floor=function(){return $(new this.constructor(this),this.e+1,3)};O.greaterThan=O.gt=function(e){return this.cmp(e)>0};O.greaterThanOrEqualTo=O.gte=function(e){var t=this.cmp(e);return t==1||t===0};O.hyperbolicCosine=O.cosh=function(){var e,t,r,i,s,l=this,a=l.constructor,c=new a(1);if(!l.isFinite())return new a(l.s?1/0:NaN);if(l.isZero())return c;r=a.precision,i=a.rounding,a.precision=r+Math.max(l.e,l.sd())+4,a.rounding=1,s=l.d.length,s<32?(e=Math.ceil(s/3),t=(1/Vr(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),l=Yt(a,1,l.times(t),new a(1),!0);for(var p,v=e,M=new a(8);v--;)p=l.times(l),l=c.minus(p.times(M.minus(p.times(M))));return $(l,a.precision=r,a.rounding=i,!0)};O.hyperbolicSine=O.sinh=function(){var e,t,r,i,s=this,l=s.constructor;if(!s.isFinite()||s.isZero())return new l(s);if(t=l.precision,r=l.rounding,l.precision=t+Math.max(s.e,s.sd())+4,l.rounding=1,i=s.d.length,i<3)s=Yt(l,2,s,s,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,s=s.times(1/Vr(5,e)),s=Yt(l,2,s,s,!0);for(var a,c=new l(5),p=new l(16),v=new l(20);e--;)a=s.times(s),s=s.times(c.plus(a.times(p.times(a).plus(v))))}return l.precision=t,l.rounding=r,$(s,t,r,!0)};O.hyperbolicTangent=O.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,ge(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};O.inverseCosine=O.acos=function(){var e,t=this,r=t.constructor,i=t.abs().cmp(1),s=r.precision,l=r.rounding;return i!==-1?i===0?t.isNeg()?ht(r,s,l):new r(0):new r(NaN):t.isZero()?ht(r,s+4,l).times(.5):(r.precision=s+6,r.rounding=1,t=t.asin(),e=ht(r,s+4,l).times(.5),r.precision=s,r.rounding=l,e.minus(t))};O.inverseHyperbolicCosine=O.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,G=!1,r=r.times(r).minus(1).sqrt().plus(r),G=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};O.inverseHyperbolicSine=O.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,G=!1,r=r.times(r).plus(1).sqrt().plus(r),G=!0,i.precision=e,i.rounding=t,r.ln())};O.inverseHyperbolicTangent=O.atanh=function(){var e,t,r,i,s=this,l=s.constructor;return s.isFinite()?s.e>=0?new l(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=l.precision,t=l.rounding,i=s.sd(),Math.max(i,e)<2*-s.e-1?$(new l(s),e,t,!0):(l.precision=r=i-s.e,s=ge(s.plus(1),new l(1).minus(s),r+e,1),l.precision=e+4,l.rounding=1,s=s.ln(),l.precision=e,l.rounding=t,s.times(.5))):new l(NaN)};O.inverseSine=O.asin=function(){var e,t,r,i,s=this,l=s.constructor;return s.isZero()?new l(s):(t=s.abs().cmp(1),r=l.precision,i=l.rounding,t!==-1?t===0?(e=ht(l,r+4,i).times(.5),e.s=s.s,e):new l(NaN):(l.precision=r+6,l.rounding=1,s=s.div(new l(1).minus(s.times(s)).sqrt().plus(1)).atan(),l.precision=r,l.rounding=i,s.times(2)))};O.inverseTangent=O.atan=function(){var e,t,r,i,s,l,a,c,p,v=this,M=v.constructor,b=M.precision,A=M.rounding;if(v.isFinite()){if(v.isZero())return new M(v);if(v.abs().eq(1)&&b+4<=yn)return a=ht(M,b+4,A).times(.25),a.s=v.s,a}else{if(!v.s)return new M(NaN);if(b+4<=yn)return a=ht(M,b+4,A).times(.5),a.s=v.s,a}for(M.precision=c=b+10,M.rounding=1,r=Math.min(28,c/K+2|0),e=r;e;--e)v=v.div(v.times(v).plus(1).sqrt().plus(1));for(G=!1,t=Math.ceil(c/K),i=1,p=v.times(v),a=new M(v),s=v;e!==-1;)if(s=s.times(p),l=a.minus(s.div(i+=2)),s=s.times(p),a=l.plus(s.div(i+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===l.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),G=!0,$(a,M.precision=b,M.rounding=A,!0)};O.isFinite=function(){return!!this.d};O.isInteger=O.isInt=function(){return!!this.d&&et(this.e/K)>this.d.length-2};O.isNaN=function(){return!this.s};O.isNegative=O.isNeg=function(){return this.s<0};O.isPositive=O.isPos=function(){return this.s>0};O.isZero=function(){return!!this.d&&this.d[0]===0};O.lessThan=O.lt=function(e){return this.cmp(e)<0};O.lessThanOrEqualTo=O.lte=function(e){return this.cmp(e)<1};O.logarithm=O.log=function(e){var t,r,i,s,l,a,c,p,v=this,M=v.constructor,b=M.precision,A=M.rounding,S=5;if(e==null)e=new M(10),t=!0;else{if(e=new M(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new M(NaN);t=e.eq(10)}if(r=v.d,v.s<0||!r||!r[0]||v.eq(1))return new M(r&&!r[0]?-1/0:v.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)l=!0;else{for(s=r[0];s%10===0;)s/=10;l=s!==1}if(G=!1,c=b+S,a=Ct(v,c),i=t?qr(M,c+10):Ct(e,c),p=ge(a,i,c,1),fr(p.d,s=b,A))do if(c+=10,a=Ct(v,c),i=t?qr(M,c+10):Ct(e,c),p=ge(a,i,c,1),!l){+Ge(p.d).slice(s+1,s+15)+1==1e14&&(p=$(p,b+1,0));break}while(fr(p.d,s+=10,A));return G=!0,$(p,b,A)};O.minus=O.sub=function(e){var t,r,i,s,l,a,c,p,v,M,b,A,S=this,D=S.constructor;if(e=new D(e),!S.d||!e.d)return!S.s||!e.s?e=new D(NaN):S.d?e.s=-e.s:e=new D(e.d||S.s!==e.s?S:NaN),e;if(S.s!=e.s)return e.s=-e.s,S.plus(e);if(v=S.d,A=e.d,c=D.precision,p=D.rounding,!v[0]||!A[0]){if(A[0])e.s=-e.s;else if(v[0])e=new D(S);else return new D(p===3?-0:0);return G?$(e,c,p):e}if(r=et(e.e/K),M=et(S.e/K),v=v.slice(),l=M-r,l){for(b=l<0,b?(t=v,l=-l,a=A.length):(t=A,r=M,a=v.length),i=Math.max(Math.ceil(c/K),a)+2,l>i&&(l=i,t.length=1),t.reverse(),i=l;i--;)t.push(0);t.reverse()}else{for(i=v.length,a=A.length,b=i<a,b&&(a=i),i=0;i<a;i++)if(v[i]!=A[i]){b=v[i]<A[i];break}l=0}for(b&&(t=v,v=A,A=t,e.s=-e.s),a=v.length,i=A.length-a;i>0;--i)v[a++]=0;for(i=A.length;i>l;){if(v[--i]<A[i]){for(s=i;s&&v[--s]===0;)v[s]=ft-1;--v[s],v[i]+=ft}v[i]-=A[i]}for(;v[--a]===0;)v.pop();for(;v[0]===0;v.shift())--r;return v[0]?(e.d=v,e.e=Wr(v,r),G?$(e,c,p):e):new D(p===3?-0:0)};O.modulo=O.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?$(new i(r),i.precision,i.rounding):(G=!1,i.modulo==9?(t=ge(r,e.abs(),0,3,1),t.s*=e.s):t=ge(r,e,0,i.modulo,1),t=t.times(e),G=!0,r.minus(t))};O.naturalExponential=O.exp=function(){return Mn(this)};O.naturalLogarithm=O.ln=function(){return Ct(this)};O.negated=O.neg=function(){var e=new this.constructor(this);return e.s=-e.s,$(e)};O.plus=O.add=function(e){var t,r,i,s,l,a,c,p,v,M,b=this,A=b.constructor;if(e=new A(e),!b.d||!e.d)return!b.s||!e.s?e=new A(NaN):b.d||(e=new A(e.d||b.s===e.s?b:NaN)),e;if(b.s!=e.s)return e.s=-e.s,b.minus(e);if(v=b.d,M=e.d,c=A.precision,p=A.rounding,!v[0]||!M[0])return M[0]||(e=new A(b)),G?$(e,c,p):e;if(l=et(b.e/K),i=et(e.e/K),v=v.slice(),s=l-i,s){for(s<0?(r=v,s=-s,a=M.length):(r=M,i=l,a=v.length),l=Math.ceil(c/K),a=l>a?l+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=v.length,s=M.length,a-s<0&&(s=a,r=M,M=v,v=r),t=0;s;)t=(v[--s]=v[s]+M[s]+t)/ft|0,v[s]%=ft;for(t&&(v.unshift(t),++i),a=v.length;v[--a]==0;)v.pop();return e.d=v,e.e=Wr(v,i),G?$(e,c,p):e};O.precision=O.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ot+e);return r.d?(t=$i(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};O.round=function(){var e=this,t=e.constructor;return $(new t(e),e.e+1,t.rounding)};O.sine=O.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+K,i.rounding=1,r=Fo(i,Xi(i,r)),i.precision=e,i.rounding=t,$(wt>2?r.neg():r,e,t,!0)):new i(NaN)};O.squareRoot=O.sqrt=function(){var e,t,r,i,s,l,a=this,c=a.d,p=a.e,v=a.s,M=a.constructor;if(v!==1||!c||!c[0])return new M(!v||v<0&&(!c||c[0])?NaN:c?a:1/0);for(G=!1,v=Math.sqrt(+a),v==0||v==1/0?(t=Ge(c),(t.length+p)%2==0&&(t+="0"),v=Math.sqrt(t),p=et((p+1)/2)-(p<0||p%2),v==1/0?t="5e"+p:(t=v.toExponential(),t=t.slice(0,t.indexOf("e")+1)+p),i=new M(t)):i=new M(v.toString()),r=(p=M.precision)+3;;)if(l=i,i=l.plus(ge(a,l,r+2,1)).times(.5),Ge(l.d).slice(0,r)===(t=Ge(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!s&&t=="4999"){if(!s&&($(l,p+1,0),l.times(l).eq(a))){i=l;break}r+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&($(i,p+1,1),e=!i.times(i).eq(a));break}return G=!0,$(i,p,M.rounding,e)};O.tangent=O.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=ge(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,$(wt==2||wt==4?r.neg():r,e,t,!0)):new i(NaN)};O.times=O.mul=function(e){var t,r,i,s,l,a,c,p,v,M=this,b=M.constructor,A=M.d,S=(e=new b(e)).d;if(e.s*=M.s,!A||!A[0]||!S||!S[0])return new b(!e.s||A&&!A[0]&&!S||S&&!S[0]&&!A?NaN:!A||!S?e.s/0:e.s*0);for(r=et(M.e/K)+et(e.e/K),p=A.length,v=S.length,p<v&&(l=A,A=S,S=l,a=p,p=v,v=a),l=[],a=p+v,i=a;i--;)l.push(0);for(i=v;--i>=0;){for(t=0,s=p+i;s>i;)c=l[s]+S[i]*A[s-i-1]+t,l[s--]=c%ft|0,t=c/ft|0;l[s]=(l[s]+t)%ft|0}for(;!l[--a];)l.pop();return t?++r:l.shift(),e.d=l,e.e=Wr(l,r),G?$(e,b.precision,b.rounding):e};O.toBinary=function(e,t){return Bn(this,2,e,t)};O.toDecimalPlaces=O.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(it(e,0,Et),t===void 0?t=i.rounding:it(t,0,8),$(r,e+r.e+1,t))};O.toExponential=function(e,t){var r,i=this,s=i.constructor;return e===void 0?r=gt(i,!0):(it(e,0,Et),t===void 0?t=s.rounding:it(t,0,8),i=$(new s(i),e+1,t),r=gt(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};O.toFixed=function(e,t){var r,i,s=this,l=s.constructor;return e===void 0?r=gt(s):(it(e,0,Et),t===void 0?t=l.rounding:it(t,0,8),i=$(new l(s),e+s.e+1,t),r=gt(i,!1,e+i.e+1)),s.isNeg()&&!s.isZero()?"-"+r:r};O.toFraction=function(e){var t,r,i,s,l,a,c,p,v,M,b,A,S=this,D=S.d,L=S.constructor;if(!D)return new L(S);if(v=r=new L(1),i=p=new L(0),t=new L(i),l=t.e=$i(D)-S.e-1,a=l%K,t.d[0]=Ye(10,a<0?K+a:a),e==null)e=l>0?t:v;else{if(c=new L(e),!c.isInt()||c.lt(v))throw Error(Ot+c);e=c.gt(t)?l>0?t:v:c}for(G=!1,c=new L(Ge(D)),M=L.precision,L.precision=l=D.length*K*2;b=ge(c,t,0,1,1),s=r.plus(b.times(i)),s.cmp(e)!=1;)r=i,i=s,s=v,v=p.plus(b.times(s)),p=s,s=t,t=c.minus(b.times(s)),c=s;return s=ge(e.minus(r),i,0,1,1),p=p.plus(s.times(v)),r=r.plus(s.times(i)),p.s=v.s=S.s,A=ge(v,i,l,1).minus(S).abs().cmp(ge(p,r,l,1).minus(S).abs())<1?[v,i]:[p,r],L.precision=M,G=!0,A};O.toHexadecimal=O.toHex=function(e,t){return Bn(this,16,e,t)};O.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:it(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(G=!1,r=ge(r,e,0,t,1).times(e),G=!0,$(r)):(e.s=r.s,r=e),r};O.toNumber=function(){return+this};O.toOctal=function(e,t){return Bn(this,8,e,t)};O.toPower=O.pow=function(e){var t,r,i,s,l,a,c=this,p=c.constructor,v=+(e=new p(e));if(!c.d||!e.d||!c.d[0]||!e.d[0])return new p(Ye(+c,v));if(c=new p(c),c.eq(1))return c;if(i=p.precision,l=p.rounding,e.eq(1))return $(c,i,l);if(t=et(e.e/K),t>=e.d.length-1&&(r=v<0?-v:v)<=No)return s=Zi(p,c,r,i),e.s<0?new p(1).div(s):$(s,i,l);if(a=c.s,a<0){if(t<e.d.length-1)return new p(NaN);if(e.d[t]&1||(a=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=a,c}return r=Ye(+c,v),t=r==0||!isFinite(r)?et(v*(Math.log("0."+Ge(c.d))/Math.LN10+c.e+1)):new p(r+"").e,t>p.maxE+1||t<p.minE-1?new p(t>0?a/0:0):(G=!1,p.rounding=c.s=1,r=Math.min(12,(t+"").length),s=Mn(e.times(Ct(c,i+r)),i),s.d&&(s=$(s,i+5,1),fr(s.d,i,l)&&(t=i+10,s=$(Mn(e.times(Ct(c,t+r)),t),t+5,1),+Ge(s.d).slice(i+1,i+15)+1==1e14&&(s=$(s,i+1,0)))),s.s=a,G=!0,p.rounding=l,$(s,i,l))};O.toPrecision=function(e,t){var r,i=this,s=i.constructor;return e===void 0?r=gt(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(it(e,1,Et),t===void 0?t=s.rounding:it(t,0,8),i=$(new s(i),e,t),r=gt(i,e<=i.e||i.e<=s.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};O.toSignificantDigits=O.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(it(e,1,Et),t===void 0?t=i.rounding:it(t,0,8)),$(new i(r),e,t)};O.toString=function(){var e=this,t=e.constructor,r=gt(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};O.truncated=O.trunc=function(){return $(new this.constructor(this),this.e+1,1)};O.valueOf=O.toJSON=function(){var e=this,t=e.constructor,r=gt(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function Ge(e){var t,r,i,s=e.length-1,l="",a=e[0];if(s>0){for(l+=a,t=1;t<s;t++)i=e[t]+"",r=K-i.length,r&&(l+=bt(r)),l+=i;a=e[t],i=a+"",r=K-i.length,r&&(l+=bt(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return l+a}function it(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ot+e)}function fr(e,t,r,i){var s,l,a,c;for(l=e[0];l>=10;l/=10)--t;return--t<0?(t+=K,s=0):(s=Math.ceil((t+1)/K),t%=K),l=Ye(10,K-t),c=e[s]%l|0,i==null?t<3?(t==0?c=c/100|0:t==1&&(c=c/10|0),a=r<4&&c==99999||r>3&&c==49999||c==5e4||c==0):a=(r<4&&c+1==l||r>3&&c+1==l/2)&&(e[s+1]/l/100|0)==Ye(10,t-2)-1||(c==l/2||c==0)&&(e[s+1]/l/100|0)==0:t<4?(t==0?c=c/1e3|0:t==1?c=c/100|0:t==2&&(c=c/10|0),a=(i||r<4)&&c==9999||!i&&r>3&&c==4999):a=((i||r<4)&&c+1==l||!i&&r>3&&c+1==l/2)&&(e[s+1]/l/1e3|0)==Ye(10,t-3)-1,a}function kr(e,t,r){for(var i,s=[0],l,a=0,c=e.length;a<c;){for(l=s.length;l--;)s[l]*=t;for(s[0]+=mn.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}function jo(e,t){var r,i,s;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),s=(1/Vr(4,r)).toString()):(r=16,s="2.3283064365386962890625e-10"),e.precision+=r,t=Yt(e,1,t.times(s),new e(1));for(var l=r;l--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var ge=function(){function e(i,s,l){var a,c=0,p=i.length;for(i=i.slice();p--;)a=i[p]*s+c,i[p]=a%l|0,c=a/l|0;return c&&i.unshift(c),i}function t(i,s,l,a){var c,p;if(l!=a)p=l>a?1:-1;else for(c=p=0;c<l;c++)if(i[c]!=s[c]){p=i[c]>s[c]?1:-1;break}return p}function r(i,s,l,a){for(var c=0;l--;)i[l]-=c,c=i[l]<s[l]?1:0,i[l]=c*a+i[l]-s[l];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,l,a,c,p){var v,M,b,A,S,D,L,N,X,F,q,T,ee,x,E,C,I,P,z,U,Y=i.constructor,m=i.s==s.s?1:-1,n=i.d,u=s.d;if(!n||!n[0]||!u||!u[0])return new Y(!i.s||!s.s||(n?u&&n[0]==u[0]:!u)?NaN:n&&n[0]==0||!u?m*0:m/0);for(p?(S=1,M=i.e-s.e):(p=ft,S=K,M=et(i.e/S)-et(s.e/S)),z=u.length,I=n.length,X=new Y(m),F=X.d=[],b=0;u[b]==(n[b]||0);b++);if(u[b]>(n[b]||0)&&M--,l==null?(x=l=Y.precision,a=Y.rounding):c?x=l+(i.e-s.e)+1:x=l,x<0)F.push(1),D=!0;else{if(x=x/S+2|0,b=0,z==1){for(A=0,u=u[0],x++;(b<I||A)&&x--;b++)E=A*p+(n[b]||0),F[b]=E/u|0,A=E%u|0;D=A||b<I}else{for(A=p/(u[0]+1)|0,A>1&&(u=e(u,A,p),n=e(n,A,p),z=u.length,I=n.length),C=z,q=n.slice(0,z),T=q.length;T<z;)q[T++]=0;U=u.slice(),U.unshift(0),P=u[0],u[1]>=p/2&&++P;do A=0,v=t(u,q,z,T),v<0?(ee=q[0],z!=T&&(ee=ee*p+(q[1]||0)),A=ee/P|0,A>1?(A>=p&&(A=p-1),L=e(u,A,p),N=L.length,T=q.length,v=t(L,q,N,T),v==1&&(A--,r(L,z<N?U:u,N,p))):(A==0&&(v=A=1),L=u.slice()),N=L.length,N<T&&L.unshift(0),r(q,L,T,p),v==-1&&(T=q.length,v=t(u,q,z,T),v<1&&(A++,r(q,z<T?U:u,T,p))),T=q.length):v===0&&(A++,q=[0]),F[b++]=A,v&&q[0]?q[T++]=n[C]||0:(q=[n[C]],T=1);while((C++<I||q[0]!==void 0)&&x--);D=q[0]!==void 0}F[0]||F.shift()}if(S==1)X.e=M,Di=D;else{for(b=1,A=F[0];A>=10;A/=10)b++;X.e=b+M*S-1,$(X,c?l+X.e+1:l,a,D)}return X}}();function $(e,t,r,i){var s,l,a,c,p,v,M,b,A,S=e.constructor;e:if(t!=null){if(b=e.d,!b)return e;for(s=1,c=b[0];c>=10;c/=10)s++;if(l=t-s,l<0)l+=K,a=t,M=b[A=0],p=M/Ye(10,s-a-1)%10|0;else if(A=Math.ceil((l+1)/K),c=b.length,A>=c)if(i){for(;c++<=A;)b.push(0);M=p=0,s=1,l%=K,a=l-K+1}else break e;else{for(M=c=b[A],s=1;c>=10;c/=10)s++;l%=K,a=l-K+s,p=a<0?0:M/Ye(10,s-a-1)%10|0}if(i=i||t<0||b[A+1]!==void 0||(a<0?M:M%Ye(10,s-a-1)),v=r<4?(p||i)&&(r==0||r==(e.s<0?3:2)):p>5||p==5&&(r==4||i||r==6&&(l>0?a>0?M/Ye(10,s-a):0:b[A-1])%10&1||r==(e.s<0?8:7)),t<1||!b[0])return b.length=0,v?(t-=e.e+1,b[0]=Ye(10,(K-t%K)%K),e.e=-t||0):b[0]=e.e=0,e;if(l==0?(b.length=A,c=1,A--):(b.length=A+1,c=Ye(10,K-l),b[A]=a>0?(M/Ye(10,s-a)%Ye(10,a)|0)*c:0),v)for(;;)if(A==0){for(l=1,a=b[0];a>=10;a/=10)l++;for(a=b[0]+=c,c=1;a>=10;a/=10)c++;l!=c&&(e.e++,b[0]==ft&&(b[0]=1));break}else{if(b[A]+=c,b[A]!=ft)break;b[A--]=0,c=1}for(l=b.length;b[--l]===0;)b.pop()}return G&&(e.e>S.maxE?(e.d=null,e.e=NaN):e.e<S.minE&&(e.e=0,e.d=[0])),e}function gt(e,t,r){if(!e.isFinite())return Ki(e);var i,s=e.e,l=Ge(e.d),a=l.length;return t?(r&&(i=r-a)>0?l=l.charAt(0)+"."+l.slice(1)+bt(i):a>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(e.e<0?"e":"e+")+e.e):s<0?(l="0."+bt(-s-1)+l,r&&(i=r-a)>0&&(l+=bt(i))):s>=a?(l+=bt(s+1-a),r&&(i=r-s-1)>0&&(l=l+"."+bt(i))):((i=s+1)<a&&(l=l.slice(0,i)+"."+l.slice(i)),r&&(i=r-a)>0&&(s+1===a&&(l+="."),l+=bt(i))),l}function Wr(e,t){var r=e[0];for(t*=K;r>=10;r/=10)t++;return t}function qr(e,t,r){if(t>Po)throw G=!0,r&&(e.precision=r),Error(Ui);return $(new e(Lr),t,1,!0)}function ht(e,t,r){if(t>yn)throw Error(Ui);return $(new e(Fr),t,r,!0)}function $i(e){var t=e.length-1,r=t*K+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function bt(e){for(var t="";e--;)t+="0";return t}function Zi(e,t,r,i){var s,l=new e(1),a=Math.ceil(i/K+4);for(G=!1;;){if(r%2&&(l=l.times(t),ei(l.d,a)&&(s=!0)),r=et(r/2),r===0){r=l.d.length-1,s&&l.d[r]===0&&++l.d[r];break}t=t.times(t),ei(t.d,a)}return G=!0,l}function Qn(e){return e.d[e.d.length-1]&1}function zi(e,t,r){for(var i,s=new e(t[0]),l=0;++l<t.length;)if(i=new e(t[l]),i.s)s[r](i)&&(s=i);else{s=i;break}return s}function Mn(e,t){var r,i,s,l,a,c,p,v=0,M=0,b=0,A=e.constructor,S=A.rounding,D=A.precision;if(!e.d||!e.d[0]||e.e>17)return new A(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(G=!1,p=D):p=t,c=new A(.03125);e.e>-2;)e=e.times(c),b+=5;for(i=Math.log(Ye(2,b))/Math.LN10*2+5|0,p+=i,r=l=a=new A(1),A.precision=p;;){if(l=$(l.times(e),p,1),r=r.times(++M),c=a.plus(ge(l,r,p,1)),Ge(c.d).slice(0,p)===Ge(a.d).slice(0,p)){for(s=b;s--;)a=$(a.times(a),p,1);if(t==null)if(v<3&&fr(a.d,p-i,S,v))A.precision=p+=10,r=l=c=new A(1),M=0,v++;else return $(a,A.precision=D,S,G=!0);else return A.precision=D,a}a=c}}function Ct(e,t){var r,i,s,l,a,c,p,v,M,b,A,S=1,D=10,L=e,N=L.d,X=L.constructor,F=X.rounding,q=X.precision;if(L.s<0||!N||!N[0]||!L.e&&N[0]==1&&N.length==1)return new X(N&&!N[0]?-1/0:L.s!=1?NaN:N?0:L);if(t==null?(G=!1,M=q):M=t,X.precision=M+=D,r=Ge(N),i=r.charAt(0),Math.abs(l=L.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)L=L.times(e),r=Ge(L.d),i=r.charAt(0),S++;l=L.e,i>1?(L=new X("0."+r),l++):L=new X(i+"."+r.slice(1))}else return v=qr(X,M+2,q).times(l+""),L=Ct(new X(i+"."+r.slice(1)),M-D).plus(v),X.precision=q,t==null?$(L,q,F,G=!0):L;for(b=L,p=a=L=ge(L.minus(1),L.plus(1),M,1),A=$(L.times(L),M,1),s=3;;){if(a=$(a.times(A),M,1),v=p.plus(ge(a,new X(s),M,1)),Ge(v.d).slice(0,M)===Ge(p.d).slice(0,M))if(p=p.times(2),l!==0&&(p=p.plus(qr(X,M+2,q).times(l+""))),p=ge(p,new X(S),M,1),t==null)if(fr(p.d,M-D,F,c))X.precision=M+=D,v=a=L=ge(b.minus(1),b.plus(1),M,1),A=$(L.times(L),M,1),s=c=1;else return $(p,X.precision=q,F,G=!0);else return X.precision=q,p;p=v,s+=2}}function Ki(e){return String(e.s*e.s/0)}function _n(e,t){var r,i,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(s=t.length;t.charCodeAt(s-1)===48;--s);if(t=t.slice(i,s),t){if(s-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%K,r<0&&(i+=K),i<s){for(i&&e.d.push(+t.slice(0,i)),s-=K;i<s;)e.d.push(+t.slice(i,i+=K));t=t.slice(i),i=K-t.length}else i-=s;for(;i--;)t+="0";e.d.push(+t),G&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Lo(e,t){var r,i,s,l,a,c,p,v,M;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Vi.test(t))return _n(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Bo.test(t))r=16,t=t.toLowerCase();else if(To.test(t))r=2;else if(Ro.test(t))r=8;else throw Error(Ot+t);for(l=t.search(/p/i),l>0?(p=+t.slice(l+1),t=t.substring(2,l)):t=t.slice(2),l=t.indexOf("."),a=l>=0,i=e.constructor,a&&(t=t.replace(".",""),c=t.length,l=c-l,s=Zi(i,new i(r),l,l*2)),v=kr(t,r,ft),M=v.length-1,l=M;v[l]===0;--l)v.pop();return l<0?new i(e.s*0):(e.e=Wr(v,M),e.d=v,G=!1,a&&(e=ge(e,s,c*4)),p&&(e=e.times(Math.abs(p)<54?Ye(2,p):Mr.pow(2,p))),G=!0,e)}function Fo(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:Yt(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/Vr(5,r)),t=Yt(e,2,t,t);for(var s,l=new e(5),a=new e(16),c=new e(20);r--;)s=t.times(t),t=t.times(l.plus(s.times(a.times(s).minus(c))));return t}function Yt(e,t,r,i,s){var l,a,c,p,v=e.precision,M=Math.ceil(v/K);for(G=!1,p=r.times(r),c=new e(i);;){if(a=ge(c.times(p),new e(t++*t++),v,1),c=s?i.plus(a):i.minus(a),i=ge(a.times(p),new e(t++*t++),v,1),a=c.plus(i),a.d[M]!==void 0){for(l=M;a.d[l]===c.d[l]&&l--;);if(l==-1)break}l=c,c=i,i=a,a=l}return G=!0,a.d.length=M+1,a}function Vr(e,t){for(var r=e;--t;)r*=e;return r}function Xi(e,t){var r,i=t.s<0,s=ht(e,e.precision,1),l=s.times(.5);if(t=t.abs(),t.lte(l))return wt=i?4:1,t;if(r=t.divToInt(s),r.isZero())wt=i?3:2;else{if(t=t.minus(r.times(s)),t.lte(l))return wt=Qn(r)?i?2:3:i?4:1,t;wt=Qn(r)?i?1:4:i?3:2}return t.minus(s).abs()}function Bn(e,t,r,i){var s,l,a,c,p,v,M,b,A,S=e.constructor,D=r!==void 0;if(D?(it(r,1,Et),i===void 0?i=S.rounding:it(i,0,8)):(r=S.precision,i=S.rounding),!e.isFinite())M=Ki(e);else{for(M=gt(e),a=M.indexOf("."),D?(s=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):s=t,a>=0&&(M=M.replace(".",""),A=new S(1),A.e=M.length-a,A.d=kr(gt(A),10,s),A.e=A.d.length),b=kr(M,10,s),l=p=b.length;b[--p]==0;)b.pop();if(!b[0])M=D?"0p+0":"0";else{if(a<0?l--:(e=new S(e),e.d=b,e.e=l,e=ge(e,A,r,i,0,s),b=e.d,l=e.e,v=Di),a=b[r],c=s/2,v=v||b[r+1]!==void 0,v=i<4?(a!==void 0||v)&&(i===0||i===(e.s<0?3:2)):a>c||a===c&&(i===4||v||i===6&&b[r-1]&1||i===(e.s<0?8:7)),b.length=r,v)for(;++b[--r]>s-1;)b[r]=0,r||(++l,b.unshift(1));for(p=b.length;!b[p-1];--p);for(a=0,M="";a<p;a++)M+=mn.charAt(b[a]);if(D){if(p>1)if(t==16||t==8){for(a=t==16?4:3,--p;p%a;p++)M+="0";for(b=kr(M,s,t),p=b.length;!b[p-1];--p);for(a=1,M="1.";a<p;a++)M+=mn.charAt(b[a])}else M=M.charAt(0)+"."+M.slice(1);M=M+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)M="0"+M;M="0."+M}else if(++l>p)for(l-=p;l--;)M+="0";else l<p&&(M=M.slice(0,l)+"."+M.slice(l))}M=(t==16?"0x":t==2?"0b":t==8?"0o":"")+M}return e.s<0?"-"+M:M}function ei(e,t){if(e.length>t)return e.length=t,!0}function qo(e){return new this(e).abs()}function Do(e){return new this(e).acos()}function Uo(e){return new this(e).acosh()}function xo(e,t){return new this(e).plus(t)}function Wo(e){return new this(e).asin()}function Vo(e){return new this(e).asinh()}function $o(e){return new this(e).atan()}function Zo(e){return new this(e).atanh()}function zo(e,t){e=new this(e),t=new this(t);var r,i=this.precision,s=this.rounding,l=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=ht(this,l,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?ht(this,i,s):new this(0),r.s=e.s):!e.d||t.isZero()?(r=ht(this,l,1).times(.5),r.s=e.s):t.s<0?(this.precision=l,this.rounding=1,r=this.atan(ge(e,t,l,1)),t=ht(this,l,1),this.precision=i,this.rounding=s,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(ge(e,t,l,1)),r}function Ko(e){return new this(e).cbrt()}function Xo(e){return $(e=new this(e),e.e+1,2)}function Yo(e,t,r){return new this(e).clamp(t,r)}function Jo(e){if(!e||typeof e!="object")throw Error(xr+"Object expected");var t,r,i,s=e.defaults===!0,l=["precision",1,Et,"rounding",0,8,"toExpNeg",-Vt,0,"toExpPos",0,Vt,"maxE",0,Vt,"minE",-Vt,0,"modulo",0,9];for(t=0;t<l.length;t+=3)if(r=l[t],s&&(this[r]=wn[r]),(i=e[r])!==void 0)if(et(i)===i&&i>=l[t+1]&&i<=l[t+2])this[r]=i;else throw Error(Ot+r+": "+i);if(r="crypto",s&&(this[r]=wn[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(xi);else this[r]=!1;else throw Error(Ot+r+": "+i);return this}function Ho(e){return new this(e).cos()}function Go(e){return new this(e).cosh()}function Yi(e){var t,r,i;function s(l){var a,c,p,v=this;if(!(v instanceof s))return new s(l);if(v.constructor=s,ti(l)){v.s=l.s,G?!l.d||l.e>s.maxE?(v.e=NaN,v.d=null):l.e<s.minE?(v.e=0,v.d=[0]):(v.e=l.e,v.d=l.d.slice()):(v.e=l.e,v.d=l.d?l.d.slice():l.d);return}if(p=typeof l,p==="number"){if(l===0){v.s=1/l<0?-1:1,v.e=0,v.d=[0];return}if(l<0?(l=-l,v.s=-1):v.s=1,l===~~l&&l<1e7){for(a=0,c=l;c>=10;c/=10)a++;G?a>s.maxE?(v.e=NaN,v.d=null):a<s.minE?(v.e=0,v.d=[0]):(v.e=a,v.d=[l]):(v.e=a,v.d=[l]);return}else if(l*0!==0){l||(v.s=NaN),v.e=NaN,v.d=null;return}return _n(v,l.toString())}else if(p!=="string")throw Error(Ot+l);return(c=l.charCodeAt(0))===45?(l=l.slice(1),v.s=-1):(c===43&&(l=l.slice(1)),v.s=1),Vi.test(l)?_n(v,l):Lo(v,l)}if(s.prototype=O,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Jo,s.clone=Yi,s.isDecimal=ti,s.abs=qo,s.acos=Do,s.acosh=Uo,s.add=xo,s.asin=Wo,s.asinh=Vo,s.atan=$o,s.atanh=Zo,s.atan2=zo,s.cbrt=Ko,s.ceil=Xo,s.clamp=Yo,s.cos=Ho,s.cosh=Go,s.div=Qo,s.exp=ea,s.floor=ta,s.hypot=ra,s.ln=na,s.log=ia,s.log10=oa,s.log2=sa,s.max=aa,s.min=la,s.mod=ua,s.mul=ca,s.pow=ha,s.random=fa,s.round=da,s.sign=ga,s.sin=pa,s.sinh=va,s.sqrt=ma,s.sub=wa,s.sum=ya,s.tan=Ma,s.tanh=_a,s.trunc=ba,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return s.config(e),s}function Qo(e,t){return new this(e).div(t)}function ea(e){return new this(e).exp()}function ta(e){return $(e=new this(e),e.e+1,3)}function ra(){var e,t,r=new this(0);for(G=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return G=!0,new this(1/0);r=t}return G=!0,r.sqrt()}function ti(e){return e instanceof Mr||e&&e.toStringTag===Wi||!1}function na(e){return new this(e).ln()}function ia(e,t){return new this(e).log(t)}function sa(e){return new this(e).log(2)}function oa(e){return new this(e).log(10)}function aa(){return zi(this,arguments,"lt")}function la(){return zi(this,arguments,"gt")}function ua(e,t){return new this(e).mod(t)}function ca(e,t){return new this(e).mul(t)}function ha(e,t){return new this(e).pow(t)}function fa(e){var t,r,i,s,l=0,a=new this(1),c=[];if(e===void 0?e=this.precision:it(e,1,Et),i=Math.ceil(e/K),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));l<i;)s=t[l],s>=429e7?t[l]=crypto.getRandomValues(new Uint32Array(1))[0]:c[l++]=s%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);l<i;)s=t[l]+(t[l+1]<<8)+(t[l+2]<<16)+((t[l+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(t,l):(c.push(s%1e7),l+=4);l=i/4}else throw Error(xi);else for(;l<i;)c[l++]=Math.random()*1e7|0;for(i=c[--l],e%=K,i&&e&&(s=Ye(10,K-e),c[l]=(i/s|0)*s);c[l]===0;l--)c.pop();if(l<0)r=0,c=[0];else{for(r=-1;c[0]===0;r-=K)c.shift();for(i=1,s=c[0];s>=10;s/=10)i++;i<K&&(r-=K-i)}return a.e=r,a.d=c,a}function da(e){return $(e=new this(e),e.e+1,this.rounding)}function ga(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function pa(e){return new this(e).sin()}function va(e){return new this(e).sinh()}function ma(e){return new this(e).sqrt()}function wa(e,t){return new this(e).sub(t)}function ya(){var e=0,t=arguments,r=new this(t[e]);for(G=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return G=!0,$(r,this.precision,this.rounding)}function Ma(e){return new this(e).tan()}function _a(e){return new this(e).tanh()}function ba(e){return $(e=new this(e),e.e+1,1)}O[Symbol.for("nodejs.util.inspect.custom")]=O.toString;O[Symbol.toStringTag]="Decimal";var Mr=O.constructor=Yi(wn);Lr=new Mr(Lr);Fr=new Mr(Fr);var Tr=Mr,mt=wr(yr()),hn=wr(yr()),Aa=class{constructor(e){if(e!==0)throw new Error("Aftermath only supported on mainnet");this.slippage="900000000000000000",this.poolRegistry="0xfcc774493db2c45c79f688f88d28023a3e7d98e4ee9f48bbf5c7990f651577ae",this.protocolFeeVault="0xf194d9b1bcad972e45a7dd67dd49b3ee1e3357a00a50850c52cd51bb450e13b4",this.treasury="0x28e499dff5e864a2eafe476269a4f5035f1c16f338da7be18b103499abf271ce",this.insuranceFund="0xf0c40d67b078000e18032334c3325c47b9ec9f3d9ae4128be820d54663d14e3b",this.referrealVault="0x35d35b0e5b177593d8c3a801462485572fc30861e6ce96a55af6dc4730709278"}amountLimit(e){return Number(new hn.default(e).mul(new hn.default(this.slippage)).div(new hn.default("1000000000000000000")).toString())}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l];if(r.extendedDetails==null)throw new Error("Extended details not supported");if(r.extendedDetails.aftermathLpSupplyType==null)throw new Error("LP supply type not supported");const M=[t.object(r.id),t.object(this.poolRegistry),t.object(this.protocolFeeVault),t.object(this.treasury),t.object(this.insuranceFund),t.object(this.referrealVault),t.pure.u64(this.amountLimit(r.amountOut)),t.pure.u64(this.slippage),i];return t.moveCall({target:`${e.publishedAt()}::aftermath::${c}`,typeArguments:[p,v,r.extendedDetails.aftermathLpSupplyType],arguments:M})})}},ri="0x000000000000000000000000000000000000000000000000000000000000dee9",Ca=class{constructor(e){if(e!==0)throw new Error("Aftermath only supported on mainnet")}getAccountCap(e,t){return Me(this,null,function*(){let r=50,i=null;for(;;){const s=e.getOwnedObjects({owner:t,cursor:i,limit:r,filter:{MoveModule:{package:ri,module:"custodian_v2"}}});if(s!=null&&s.data!=null){if(s.data.length!==0)return s.data[0].data.objectId;if(s.data.length<50)break}else break}return null})}getOrCreateAccountCap(e,t,r){return Me(this,null,function*(){let i=yield this.getAccountCap(t,r);return i!==null?{accountCap:e.object(i),isCreate:!1}:{accountCap:e.moveCall({target:`${ri}::clob_v2::create_account`,typeArguments:[],arguments:[]}),isCreate:!0}})}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=yield this.getOrCreateAccountCap(t,e.client,e.signer),b=[t.object(r.id),i,M.accountCap,t.object(Ht)],A=t.moveCall({target:`${e.publishedAt()}::deepbook::${c}`,typeArguments:[p,v],arguments:b});return M.isCreate&&t.transferObjects([M.accountCap],e.signer),A})}},Sa=class{constructor(e){if(e!==0)throw new Error("Kriya amm only supported on mainnet")}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(r.id),i];return t.moveCall({target:`${e.publishedAt()}::kriya_amm::${c}`,typeArguments:[p,v],arguments:M})})}},Ia=class{constructor(e){if(e!==0)throw new Error("Flowx only supported on mainnet");this.container="0xb65dcbf63fd3ad5d0ebfbf334780dc9f785eff38a4459e37ab08fa79576ee511"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(this.container),i];return t.moveCall({target:`${e.publishedAt()}::flowx_amm::${c}`,typeArguments:[p,v],arguments:M})})}},Oa=class{constructor(e){if(e!==0)throw new Error("Turbos only supported on mainnet");this.versioned="0xf1cf0e81048df168ebeb1b8030fad24b3e0b53ae827c25053fff0779c1445b6f"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l];if(r.extendedDetails==null)throw new Error("Extended details not supported");if(r.extendedDetails.turbosFeeType==null)throw new Error("Turbos fee type not supported");const M=[t.object(r.id),i,t.object(Ht),t.object(this.versioned)];return t.moveCall({target:`${e.publishedAt()}::turbos::${c}`,typeArguments:[p,v,r.extendedDetails.turbosFeeType],arguments:M})})}},ni=class{constructor(e,t){this.globalConfig=e===0?"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f":"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",this.partner=t??"0x639b5e433da31739e800cd085f356e64cae222966d0f1b11bd9dc76b322ff58b"}flash_swap(e,t,r,i){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["flash_swap_a2b",l,a]:["flash_swap_b2a",a,l];let M=i?r.amountIn:r.amountOut;const b=[t.object(this.globalConfig),t.object(r.id),t.object(this.partner),t.pure.u64(M),t.pure.bool(i),t.object(Ht)],A=t.moveCall({target:`${e.publishedAt()}::cetus::${c}`,typeArguments:[p,v],arguments:b});return{targetCoin:A[0],flashReceipt:A[1],payAmount:A[2]}}repay_flash_swap(e,t,r,i,s){const{direction:l,from:a,target:c}=r,[p,v,M]=l?["repay_flash_swap_a2b",a,c]:["repay_flash_swap_b2a",c,a],b=[t.object(this.globalConfig),t.object(r.id),t.object(this.partner),i,s];return t.moveCall({target:`${e.publishedAt()}::cetus::${p}`,typeArguments:[v,M],arguments:b})[0]}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(this.globalConfig),t.object(r.id),t.object(this.partner),i,t.object(Ht)];return t.moveCall({target:`${e.publishedAt()}::cetus::${c}`,typeArguments:[p,v],arguments:M})})}};function ii(e,...t){const r=Array.isArray(t[t.length-1])?t.pop():[];let s=[e,...t].filter(Boolean).join("::");return r&&r.length&&(s+=`<${r.join(", ")}>`),s}function Kt(e){var t;try{let r=e.replace(/\s/g,"");const i=r.match(/(<.+>)$/),s=(t=i==null?void 0:i[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){r=r.slice(0,r.indexOf("<"));const p=Kt(r),v=Io(So({},p),{type_arguments:s.map(M=>Kt(M).source_address)});return v.type_arguments=v.type_arguments.map(M=>Rt.isSuiCoin(M)?M:Kt(M).source_address),v.source_address=ii(v.full_address,v.type_arguments),v}const l=r.split("::"),c={full_address:r,address:r===Ji||r===Ta?"0x2":vn.normalizeSuiObjectId(l[0]),module:l[1],name:l[2],type_arguments:[],source_address:""};return c.full_address=`${c.address}::${c.module}::${c.name}`,c.source_address=ii(c.full_address,c.type_arguments),c}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function si(e){return Kt(e).source_address}var Ea="0x2::coin::Coin",ka=/^0x2::coin::Coin<(.+)>$/,Ji="0x2::sui::SUI",Ta="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Rt=class _t{static getCoinTypeArg(t){const r=t.type.match(ka);return r?r[1]:null}static isSUI(t){const r=_t.getCoinTypeArg(t);return r?_t.getCoinSymbol(r)==="SUI":!1}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getBalance(t){return BigInt(t.fields.balance)}static totalBalance(t,r){let i=BigInt(0);return t.forEach(s=>{r===s.coinAddress&&(i+=BigInt(s.balance))}),i}static getID(t){return t.fields.id.id}static getCoinTypeFromArg(t){return`${Ea}<${t}>`}static getCoinAssets(t,r){const i=[];return r.forEach(s=>{si(s.coinAddress)===si(t)&&i.push(s)}),i}static isSuiCoin(t){return Kt(t).full_address===Ji}static selectCoinObjectIdGreaterThanOrEqual(t,r,i=[]){const s=_t.selectCoinAssetGreaterThanOrEqual(t,r,i),l=s.selectedCoins.map(p=>p.coinObjectId),a=s.remainingCoins,c=s.selectedCoins.map(p=>p.balance.toString());return{objectArray:l,remainCoins:a,amountArray:c}}static selectCoinAssetGreaterThanOrEqual(t,r,i=[]){const s=_t.sortByBalance(t.filter(v=>!i.includes(v.coinObjectId))),l=_t.calculateTotalBalance(s);if(l<r)return{selectedCoins:[],remainingCoins:s};if(l===r)return{selectedCoins:s,remainingCoins:[]};let a=BigInt(0);const c=[],p=[...s];for(;a<l;){const v=r-a,M=p.findIndex(A=>A.balance>=v);if(M!==-1){c.push(p[M]),p.splice(M,1);break}const b=p.pop();b.balance>0&&(c.push(b),a+=b.balance)}return{selectedCoins:_t.sortByBalance(c),remainingCoins:_t.sortByBalance(p)}}static sortByBalance(t){return t.sort((r,i)=>r.balance<i.balance?-1:r.balance>i.balance?1:0)}static sortByBalanceDes(t){return t.sort((r,i)=>r.balance>i.balance?-1:r.balance<i.balance?0:1)}static calculateTotalBalance(t){return t.reduce((r,i)=>r+i.balance,BigInt(0))}};function oi(e){switch(e){case 1e4:return"Calculate error";case 10001:return"Input number too large can not fit in target type";case 10002:return"No router";case 10003:return"Insufficient Liquidity";default:return"Unknown error"}}function Jt(e){const t=e.indexOf("::");if(t===-1)return e;const r=e.substring(0,t),i=e.substring(t);if(!r.startsWith("0x"))return e;const s=r.substring(2);return s.length>64?e:`0x${s.padStart(64,"0")}${i}`}function Ba(e,t){e=Jt(e),t=Jt(t);const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){if(e[i]>t[i])return!0;if(e[i]<t[i])return!1}return!0}function Ra(e,t){return e.moveCall({target:"0x2::coin::zero",typeArguments:[t]})}function ai(e,t,r,i){const s=Rt.getCoinAssets(i,t);if(r===BigInt(0)&&s.length===0)return{targetCoin:Ra(e,i),isMintZeroCoin:!0,targetCoinAmount:0};if(Rt.calculateTotalBalance(s)<r)throw new AggregateError("Insufficient balance when build merge coin","InsufficientBalance");if(Rt.isSuiCoin(i))return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(r.toString())]),isMintZeroCoin:!0,targetCoinAmount:Number(r.toString())};let a=Rt.sortByBalance(s);a.slice(0,3).reduce((b,A)=>b+A.balance,BigInt(0))<BigInt(r)&&(a=Rt.sortByBalanceDes(s));let p=Rt.selectCoinObjectIdGreaterThanOrEqual(a,r);const[v,...M]=p.objectArray;return M.length>0&&e.mergeCoins(v,M.map(b=>e.object(b))),{targetCoin:e.object(v),isMintZeroCoin:!1,targetCoinAmount:Number(r.toString())}}function Na(e){return!(!e.startsWith("0x")||e.length!==66)}var qt=wr(yr()),Cr=wr(yr()),_r=wr(yr()),$t=new _r.default(0);new _r.default(1);var Pa=new _r.default(2);Pa.pow(new _r.default(128));var ja=new _r.default("18446744073709551615"),Dt=1e9;function li(e,t,r){let i=$t;return t?i=e.mul(new Cr.default(Dt-r*Dt)).div(new Cr.default(Dt)):i=e.mul(new Cr.default(Dt+r*Dt)).div(new Cr.default(Dt)),Number(i.toString())}function La(e,t,r){return new Tr(e).mul(Tr.pow(2,-64)).pow(2).mul(Tr.pow(10,t-r))}function Fa(e,t,r){return Me(this,null,function*(){var i,s,l,a,c;const{from:p,target:v,amount:M,byAmountIn:b,pools:A}=t,S=Jt(p),D=Jt(v),L=new wo.Transaction,N=Ba(S,D),X="0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee",F=N?S:D,q=N?D:S,T=[F,q];for(let u=0;u<A.length;u++){const d=[L.object(A[u]),L.pure.bool(N),L.pure.bool(b),L.pure.u64(M.toString())];L.moveCall({target:`${X}::fetcher_script::calculate_swap_result`,arguments:d,typeArguments:T})}if(!Na(r))throw new AggregateError("Aggregator package not set","InvalidWallet");const ee=yield e.devInspectTransactionBlock({transactionBlock:L,sender:r});if(ee.error!=null)throw new AggregateError("Aggregator package not set","SimulateError");const x=(i=ee.events)==null?void 0:i.filter(u=>u.type.includes("CalculatedSwapResultEvent"));if(x.length===0||x.length!==A.length)throw new AggregateError("Simulate event result error","simulateEventError");let E=b?$t:ja,C=0;for(let u=0;u<x.length;u+=1)if(!x[u].parsedJson.data.is_exceed)if(t.byAmountIn){const d=new qt.BN(x[u].parsedJson.data.amount_out);d.gt(E)&&(C=u,E=d)}else{const d=new qt.BN(x[u].parsedJson.data.amount_out);d.lt(E)&&(C=u,E=d)}const I=x[C].parsedJson.data;console.log("event",JSON.stringify(I,null,2));const P=I.step_results[0].current_sqrt_price,[z,U]=yield Promise.all([e.getCoinMetadata({coinType:F}).then(u=>u==null?void 0:u.decimals),e.getCoinMetadata({coinType:q}).then(u=>u==null?void 0:u.decimals)]);if(z==null||U==null)throw new AggregateError("Simulate event result error","CannotGetDecimals");const Y=La(P,z,U),m={amountIn:new qt.BN((s=I.amount_in)!=null?s:0),amountOut:new qt.BN((l=I.amount_out)!=null?l:0),routes:[{path:[{id:A[C],direction:N,provider:"CETUS",from:S,target:D,feeRate:I.fee_rate,amountIn:I.amount_in,amountOut:I.amount_out}],amountIn:new qt.BN((a=I.amount_in)!=null?a:0),amountOut:new qt.BN((c=I.amount_out)!=null?c:0),initialPrice:Y}],insufficientLiquidity:!1};return{isExceed:I.is_exceed,routeData:m}})}var qa=class{constructor(e){if(e!==0)throw new Error("Kriya clmm only supported on mainnet");this.version="0xf5145a7ac345ca8736cf8c76047d00d6d378f30e81be6f6eb557184d9de93c78"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(r.id),i,t.object(this.version),t.object(Ht)];return t.moveCall({target:`${e.publishedAt()}::kriya_clmm::${c}`,typeArguments:[p,v],arguments:M})})}},Da=class{constructor(e){if(e!==0)throw new Error("Haedal only supported on mainnet")}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Haedal not support b2a swap");const l="swap_a2b",a=[t.object(r.id),t.object("0x5"),i];return t.moveCall({target:`${e.publishedAt()}::haedal::${l}`,typeArguments:[],arguments:a})})}},Ua=class{constructor(e){if(e!==0)throw new Error("Afsui only supported on mainnet");this.stakedSuiVault="0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",this.safe="0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",this.referVault="0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",this.validator="0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Afsui not support b2a swap");const l="swap_a2b",a=[t.object(this.stakedSuiVault),t.object(this.safe),t.object("0x5"),t.object(this.referVault),t.object(this.validator),i];return t.moveCall({target:`${e.publishedAt()}::afsui::${l}`,typeArguments:[],arguments:a})})}},xa=class{constructor(e){if(e!==0)throw new Error("Volo only supported on mainnet");this.nativePool="0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",this.metadata="0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Volo not support b2a swap");const l="swap_a2b",a=[t.object(this.nativePool),t.object(this.metadata),t.object("0x5"),i];return t.moveCall({target:`${e.publishedAt()}::volo::${l}`,typeArguments:[],arguments:a})})}},Wa=class{constructor(e){if(e!==0)throw new Error("Flowx clmm only supported on mainnet");this.versioned="0x67624a1533b5aff5d0dfcf5e598684350efd38134d2d245f475524c03a64e656",this.poolRegistry="0x27565d24a4cd51127ac90e4074a841bbe356cca7bf5759ddc14a975be1632abc"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(this.poolRegistry),t.pure.u64(r.feeRate*1e6),i,t.object(this.versioned),t.object(Ht)];return t.moveCall({target:`${e.publishedAt()}::flowx_clmm::${c}`,typeArguments:[p,v],arguments:M})})}},Va="CETUS",$a="DEEPBOOK",Za="KRIYA",za="FLOWX",Ka="FLOWXV3",Xa="KRIYAV3",Hi="TURBOS",bn="AFTERMATH",Ya="HAEDAL",Ja="VOLO",Ha="AFSUI",Ga=class{constructor(e,t,r,i){this.endpoint=e,this.client=r,this.signer=t,this.env=i,this.allCoins=[]}getAllCoins(){return Me(this,null,function*(){let e=null,t=50;const r=[];for(;;){const i=yield this.client.getAllCoins({owner:this.signer,cursor:e,limit:t});for(const s of i.data)r.push({coinAddress:Kt(s.coinType).source_address,coinObjectId:s.coinObjectId,balance:BigInt(s.balance)});if(i.data.length<t)break;e=i.data[t-1].coinObjectId}return r})}findRouters(e){return Me(this,null,function*(){return el(this.endpoint,e)})}expectInputSwap(e,t,r,i,s){return Me(this,null,function*(){if(r.length===0)throw new Error("No router found");const l=r.map(b=>b.amountIn.toString()),a=r[0].path[0].from,c=r[0].path[r[0].path.length-1].target,p=e.splitCoins(t,l),v=[];for(let b=0;b<r.length;b++){if(r[b].path.length===0)throw new Error("Empty path");let A=p[b];for(const S of r[b].path)A=yield this.newDex(S.provider,s).swap(this,e,S,A);v.push(A)}return this.transferOrDestoryCoin(e,t,a),this.checkCoinThresholdAndMergeCoin(e,v,c,i)})}expectOutputSwap(e,t,r,i){return Me(this,null,function*(){const s=[],l=[],a=[],c=new ni(this.env,i);for(let v=0;v<r.length;v++){const M=r[v];for(let A=M.path.length-1;A>=0;A--){const S=M.path[A],D=c.flash_swap(this,e,S,!1);s.unshift(D.targetCoin),l.unshift(D.flashReceipt)}let b=t;for(let A=0;A<M.path.length;A++){const S=M.path[A],D=c.repay_flash_swap(this,e,S,b,l[A]);b=s[A],A===0?t=D:this.transferOrDestoryCoin(e,D,S.from),A===M.path.length-1&&a.push(b)}}const p=r[0].path[0].from;if(this.transferOrDestoryCoin(e,t,p),a.length>1){const v=e.makeMoveVec({elements:a.slice(1)});e.moveCall({target:`${vn.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[r[0].path[r[0].path.length-1].target],arguments:[a[0],v]})}return a[0]})}swapInPools(e){return Me(this,null,function*(){let t;try{t=yield Fa(this.client,e,this.signer)}catch(r){return console.error("swapInPools error:",r),null}return t})}routerSwap(e){return Me(this,null,function*(){const{routers:t,inputCoin:r,slippage:i,byAmountIn:s,txb:l,partner:a}=e,c=t.reduce((A,S)=>A.add(S.amountIn),new mt.default(0)),p=t.reduce((A,S)=>A.add(S.amountOut),new mt.default(0)),v=li(s?p:c,s,i);if(s)return yield this.expectInputSwap(l,r,t,new mt.default(v),a);const M=l.splitCoins(r,[v.toString()]);return this.transferOrDestoryCoin(l,r,t[0].path[0].from),yield this.expectOutputSwap(l,M[0],t,a)})}fastRouterSwap(e){return Me(this,null,function*(){const{routers:t,byAmountIn:r,slippage:i,txb:s,partner:l,isMergeTragetCoin:a,refreshAllCoins:c}=e;(c||this.allCoins.length===0)&&(this.allCoins=yield this.getAllCoins());const p=t[0].path[0].from,v=t[0].path[t[0].path.length-1].target,M=t.reduce((N,X)=>N.add(X.amountIn),new mt.default(0)),b=t.reduce((N,X)=>N.add(X.amountOut),new mt.default(0)),A=li(r?b:M,r,i),S=r?M:A,D=ai(s,this.allCoins,BigInt(S.toString()),p),L=yield this.routerSwap({routers:t,inputCoin:D.targetCoin,slippage:i,byAmountIn:r,txb:s,partner:l});if(a){const N=ai(s,this.allCoins,BigInt(0),v);s.mergeCoins(N.targetCoin,[L]),N.isMintZeroCoin&&this.transferOrDestoryCoin(s,N.targetCoin,v)}else this.transferOrDestoryCoin(s,L,v)})}publishedAt(){return this.env===0?"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302":"0x0"}transferOrDestoryCoin(e,t,r){e.moveCall({target:`${this.publishedAt()}::utils::transfer_or_destroy_coin`,typeArguments:[r],arguments:[t]})}checkCoinThresholdAndMergeCoin(e,t,r,i){let s=t[0];if(t.length>1){let l=e.makeMoveVec({elements:t.slice(1)});e.moveCall({target:`${vn.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[r],arguments:[t[0],l]}),s=t[0]}return e.moveCall({target:`${this.publishedAt()}::utils::check_coin_threshold`,typeArguments:[r],arguments:[s,e.pure.u64(i.toString())]}),s}newDex(e,t){switch(e){case Va:return new ni(this.env,t);case $a:return new Ca(this.env);case Za:return new Sa(this.env);case Xa:return new qa(this.env);case za:return new Ia(this.env);case Ka:return new Wa(this.env);case Hi:return new Oa(this.env);case bn:return new Aa(this.env);case Ya:return new Da(this.env);case Ha:return new Ua(this.env);case Ja:return new xa(this.env);default:throw new Error(`Unsupported dex ${e}`)}}signAndExecuteTransaction(e,t){return Me(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:t,options:{showEffects:!0,showEvents:!0,showInput:!0,showBalanceChanges:!0}})})}devInspectTransactionBlock(e){return Me(this,null,function*(){return yield this.client.devInspectTransactionBlock({transactionBlock:e,sender:this.signer})})}sendTransaction(e,t){return Me(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:t})})}};function Qa(e){return{amountIn:new mt.default(e.amount_in.toString()),amountOut:new mt.default(e.amount_out.toString()),insufficientLiquidity:!1,routes:e.routes.map(t=>({path:t.path.map(r=>{var i,s;let l;r.provider===bn&&(l=r.extended_details.aftermath_pool_flatness===0?"v2":"v3");let a;return(r.provider===Hi||r.provider===bn)&&(a={aftermathLpSupplyType:(i=r.extended_details)==null?void 0:i.aftermath_lp_supply_type,turbosFeeType:(s=r.extended_details)==null?void 0:s.turbos_fee_type}),{id:r.id,direction:r.direction,provider:r.provider,from:r.from,target:r.target,feeRate:r.fee_rate,amountIn:r.amount_in,amountOut:r.amount_out,extendedDetails:a,version:l}}),amountIn:new mt.default(t.amount_in.toString()),amountOut:new mt.default(t.amount_out.toString()),initialPrice:new Tr(t.initial_price.toString())}))}}var Ht="0x0000000000000000000000000000000000000000000000000000000000000006";function el(e,t){return Me(this,null,function*(){const{from:r,target:i,amount:s,byAmountIn:l,depth:a,splitAlgorithm:c,splitFactor:p,splitCount:v,providers:M}=t,b=Jt(r),A=Jt(i);let S=`${e}?from=${b}&target=${A}&amount=${s.toString()}&by_amount_in=${l}`;a&&(S+=`&depth=${a}`),c&&(S+=`&split_algorithm=${c}`),p&&(S+=`&split_factor=${p}`),v&&(S+=`&split_count=${v}`),M&&M.length>0&&(S+=`&providers=${M.join(",")}`);const D=yield fetch(S);if(!D.ok)return{amountIn:$t,amountOut:$t,routes:[],insufficientLiquidity:!1,error:{code:10001,msg:oi(10001)}};const L=yield D.json();if(L.data!=null)return Qa(L.data);const N=L.msg==="liquidity is not enough";return{amountIn:$t,amountOut:$t,routes:[],insufficientLiquidity:N,error:{code:10003,msg:oi(10003)}}})}var Gi=(e=>(e[e.Mainnet=0]="Mainnet",e[e.Testnet=1]="Testnet",e))(Gi||{}),tl=Ga,ui=Gi;const rl=es(),Qi=rl.public.appEnv;console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:14 ~ env:",Qi);function nl(){const{tokensObj:e,setTokensObj:t}=vi(),r=Fs(),i=Se(()=>r),s=Ur(),l=Se(()=>s),a=yt.Sui.aggregatorv2Url,c=localStorage.getItem("Sui-currentRpclocal4")||yt.Sui.fullRpcUrl,p=yt.Sui.simulationAccount;yt.Sui.aggregatorV2.package_id,yt.Sui.aggregatorV2.published_at,yt.Sui.integrate.package_id,yt.Sui.integrate.published_at;const v=new qs({url:c}),M=Se(()=>new tl(a,i.value.address||p,v,Qi=="test"?ui.Testnet:ui.Mainnet)),b=xs(),A=Se(()=>b),S=E=>({transactionBlock:E,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),D=(E,C)=>C.minus(E).div(C).mul(100),L=(E,C,I)=>{console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:71 ~ getPriceImpact ~ routerData:",E);const{routes:P}=E;let z=ot(0);return P==null||P.forEach(U=>{const Y=ot(U.amountOut).div(Math.pow(10,I)),m=ot(U.amountIn).div(Math.pow(10,C)),n=Y.div(m),u=ot(U==null?void 0:U.amountIn).div(E==null?void 0:E.amountIn),d=D(n,ot(U.initialPrice.toString())).mul(new pi(u));z=z.add(d)}),Number(Ds(z.toNumber(),2))},N=E=>zn(E)==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":zn(E),X=(E,C,I)=>{var z,U,Y;const P=E.filter(m=>{const n=N(C),u=N(I),d=N(m==null?void 0:m.base),y=N(m==null?void 0:m.quote);return n===d&&u===y||u===d&&n===y});return(P==null?void 0:P.length)>0?(Object.values((z=P==null?void 0:P[0])==null?void 0:z.addressMap),Array.from((Y=(U=P==null?void 0:P[0])==null?void 0:U.addressMap)==null?void 0:Y.values())):null},F=E=>E==null?void 0:E.map(C=>{var I,P;return{...C,amountIn:(I=C==null?void 0:C.amountIn)==null?void 0:I.toString(),amountOut:(P=C==null?void 0:C.amountOut)==null?void 0:P.toString(),initialPrice:(C==null?void 0:C.initial_price)||(C==null?void 0:C.initialPrice)}}),q=async(E,C,I,P,z,U,Y)=>{var m,n,u,d,y,_,f,h,g,o,w,B,R,k,V,Z,J,ue,H,te,re,ne,se,Je,oe,ce,Qe,ve,me,kt,pe,we;console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:131 ~ getFindRouter ~ index?.value?.liquiditySourceList:",(m=l==null?void 0:l.value)==null?void 0:m.liquiditySourceList),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:131 ~ getFindRouter ~ index?.value?.includeRoutes:",(n=l==null?void 0:l.value)==null?void 0:n.includeRoutes);try{const st=(d=(u=l==null?void 0:l.value)==null?void 0:u.liquiditySourceList)==null?void 0:d.filter(ae=>(ae==null?void 0:ae.status)==="open");console.log("🚀 ~ file: useSuiAggregator.ts:154 ~ function ~ liquiditySources:",st);const le=st==null?void 0:st.map(ae=>{var ye,_e,Gt;if(((ye=ae==null?void 0:ae.name)==null?void 0:ye.indexOf("Kriya"))>-1){if((ae==null?void 0:ae.name)==="Kriya V2")return"KRIYA";if((ae==null?void 0:ae.name)==="Kriya V3")return"KRIYAV3"}else{if((ae==null?void 0:ae.name)==="Aftermath LSD")return"AFSUI";if(((_e=ae==null?void 0:ae.name)==null?void 0:_e.indexOf("FlowX"))>-1){if((ae==null?void 0:ae.name)==="FlowX V2")return"FLOWX";if((ae==null?void 0:ae.name)==="FlowX V3")return"FLOWXV3"}else return(Gt=ae==null?void 0:ae.name)==null?void 0:Gt.toUpperCase()}});console.log("🚀 ~ file: useSuiAggregator.ts:155 ~ providers ~ providers:",le);const Q={from:N((y=E==null?void 0:E.value)==null?void 0:y.address),target:N((_=C==null?void 0:C.value)==null?void 0:_.address),amount:new Zn(I),byAmountIn:P,depth:3,providers:[...le]};((f=l==null?void 0:l.value)==null?void 0:f.includeRoutes)!=="open"&&(Q.splitCount=1),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:145 ~ getFindRouter ~ findRouterParams:",Q);const ie=await M.value.findRouters(Q);if(console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:163 ~ function ~ res:",ie),((h=ie==null?void 0:ie.error)==null?void 0:h.code)==10001)return{...ie,id:Y};if(ie!=null&&ie.insufficientLiquidity)return{...ie,id:Y};if(!(ie!=null&&ie.routes)||((g=ie==null?void 0:ie.routes)==null?void 0:g.length)===0)throw Error("Aggregator no router");console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:156 ~ getFindRouter ~ findRouter res Before formatting:",JSON.stringify(ie,null,2));const he={...ie,amountIn:(o=ie==null?void 0:ie.amountIn)==null?void 0:o.toString(),amountOut:(w=ie==null?void 0:ie.amountOut)==null?void 0:w.toString(),routes:F(ie==null?void 0:ie.routes),originRes:ie};console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:159 ~ getFindRouter ~ findRouter formatRes:",JSON.stringify(he,null,2));const fe=L(he,(B=E==null?void 0:E.value)==null?void 0:B.decimals,(R=C==null?void 0:C.value)==null?void 0:R.decimals);return console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:170 ~ getFindRouter ~ priceImpact:",fe),{...he,priceImpact:fe,fromCoinAddress:(k=E==null?void 0:E.value)==null?void 0:k.address,toCoinAddress:(V=C==null?void 0:C.value)==null?void 0:V.address,id:Y}}catch(st){try{console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ error:",st),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ swapRouterStore?.value?.poolListGroupByTokenAB:",(Z=A==null?void 0:A.value)==null?void 0:Z.poolListGroupByTokenAB);const le=X((J=A==null?void 0:A.value)==null?void 0:J.poolListGroupByTokenAB,(ue=E==null?void 0:E.value)==null?void 0:ue.address,(H=C==null?void 0:C.value)==null?void 0:H.address);if(console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ pools:",le),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ params:",{from:N((te=E==null?void 0:E.value)==null?void 0:te.address),target:N((re=C==null?void 0:C.value)==null?void 0:re.address),amount:I,byAmountIn:P,pools:le}),le){const Q=await M.value.swapInPools({from:N((ne=E==null?void 0:E.value)==null?void 0:ne.address),target:N((se=C==null?void 0:C.value)==null?void 0:se.address),amount:new Zn(I),byAmountIn:P,pools:le});if(console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ res:",Q),Q){const ie={isExceed:Q==null?void 0:Q.isExceed,amountIn:(oe=(Je=Q==null?void 0:Q.routeData)==null?void 0:Je.amountIn)==null?void 0:oe.toString(),amountOut:(Qe=(ce=Q==null?void 0:Q.routeData)==null?void 0:ce.amountOut)==null?void 0:Qe.toString(),routes:F((ve=Q==null?void 0:Q.routeData)==null?void 0:ve.routes)};console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ forMatRes:",ie);const he=L(ie,(me=E==null?void 0:E.value)==null?void 0:me.decimals,(kt=C==null?void 0:C.value)==null?void 0:kt.decimals);return console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ priceImpact:",he),{...ie,priceImpact:he,fromCoinAddress:(pe=E==null?void 0:E.value)==null?void 0:pe.address,toCoinAddress:(we=C==null?void 0:C.value)==null?void 0:we.address,id:Y,originRes:Q==null?void 0:Q.routeData}}return null}return null}catch(le){return console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ e:",le),null}}},T=async(E,C,I,P,z)=>{try{console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:246 ~ getRouterSwapPayload ~ router:",E),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:246 ~ getRouterSwapPayload ~ router.originRes:",E.originRes);const U=new Dr,Y={routers:E.originRes.routes,byAmountIn:C,txb:U,slippage:I,isMergeTragetCoin:!0,refreshAllCoins:!0};console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:258 ~ getRouterSwapPayload ~ routerParams:",JSON.stringify(Y,null,2));const m=await M.value.fastRouterSwap(Y);return console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:122 ~ function ~ res:",U),S(U)}catch(U){console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:49 ~ function ~ error:",U)}},{getTokenBySymbol:ee}=Ws("Sui");return{getFindRouter:q,getRouterSwapPayload:T,getTokenInfo:async E=>{if(console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:288 ~ getTokenInfo ~ address:",E),e[E])return e[E];{const C=await ee(e,E),I={[E]:C},P={...e,...I};t(P);try{localStorage.setItem("SuiTokenObj",JSON.stringify(P))}catch(z){console.log("🚀 ~ file: useSuiAggregator.ts:295 ~ getTokenInfo ~ err:",z)}return C}}}}const Ku="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",Xu="data:image/png;base64,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",Yu="data:image/png;base64,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",Ju=""+globalThis.__publicAssetsURL("sui-image/within-error.png"),pt=e=>(pr("data-v-c887d43a"),e=e(),vr(),e),il={class:"aggregator-setting-content"},sl={key:0,class:"liquidity-source"},ol={class:"liquidity-source-title"},al={class:"title-left"},ll=pt(()=>j("svg",{"aria-hidden":"true",class:"icon"},[j("use",{"xlink:href":"#icon-icon_liquiditysources2"})],-1)),ul=pt(()=>j("span",null,"Liquidity Sources",-1)),cl=pt(()=>j("div",{class:"price-reference-text"}," Your trade is routed through one or more of these liquidity sources. ",-1)),hl=pt(()=>j("svg",{"aria-hidden":"true",class:"icon"},[j("use",{"xlink:href":"#icon-icon_tips"})],-1)),fl={class:"title-right plus-switch plus-liquidity-switch"},dl=pt(()=>j("span",null,"Select all",-1)),gl={class:"liquidity-source-content"},pl=pt(()=>j("div",{class:"liquidity-source-text"},"Disable/Enable Liquidity Sources",-1)),vl={class:"liquidity-source-list-box"},ml={class:"dex-source-box"},wl={class:"group-source-switch plus-switch plus-liquidity-switch"},yl=pt(()=>j("span",null,"DEX",-1)),Ml={class:"liquidity-source-list"},_l={class:"left"},bl={alt:""},Al={class:"right plus-switch plus-liquidity-switch"},Cl={class:"other-source-box"},Sl={class:"group-source-switch plus-switch plus-liquidity-switch"},Il=pt(()=>j("span",null,"Other",-1)),Ol={class:"liquidity-source-list"},El={class:"left"},kl={alt:""},Tl={class:"right plus-switch plus-liquidity-switch"},Bl={class:"routing-preference"},Rl=pt(()=>j("div",{class:"routing-preference-title"},[j("svg",{"aria-hidden":"true",class:"icon"},[j("use",{"xlink:href":"#icon-icon_routingpreference"})]),j("span",null,"Routing Preference")],-1)),Nl={class:"routing-preference-content"},Pl={class:"routing-preference-list"},jl={class:"routing-preference-item plus-switch plus-liquidity-switch"},Ll=pt(()=>j("span",null,"Support order split",-1)),Fl={class:"action-btn"},ql=dr({__name:"aggregator-setting-modal",emits:["close","modalConfirm"],setup(e,{emit:t}){const r=t,i=Ur(),s=Se(()=>i),l=Se(()=>(console.log("🚀🚀🚀 ~ file: aggregator-setting-modal.vue:121 ~ constliquiditySourceList:any=computed ~ store.value.liquiditySourceList:",s.value.liquiditySourceList),s.value.liquiditySourceList)),a=Se(()=>s.value.includeRoutes),c=Se(()=>s.value.supportDepth3),p=ut([]),v=ut(),M=ut(),b=ut(),A=C=>{const I={};C.forEach(P=>{I[P.name]=P.status}),b.value=I};Zt(()=>[l.value,a.value],([C,I])=>{C&&C.length>0&&(p.value=C,console.log("🚀 ~ file: aggregator-setting-modal.vue:144 ~ liquiditySourceList:",C),A(C)),I&&(v.value=I)},{immediate:!0,deep:!0});const S=Se(()=>{var C;return(C=p.value)==null?void 0:C.filter(I=>(I==null?void 0:I.type)==="dex")}),D=Se(()=>{var C;return(C=p.value)==null?void 0:C.filter(I=>(I==null?void 0:I.type)==="other")});Zt(()=>c.value,C=>{C&&(M.value=C)},{immediate:!0});const L=C=>{v.value=C},N=C=>{const I=b.value[C.name]=="open"?"close":"open";b.value[C.name]=I},X=()=>{const C=p.value.map(z=>({...z,status:b.value[z.name]}));console.log("🚀🚀🚀 ~ file: aggregator-setting-modal.vue:192 ~ result ~ result:",C);const I=C.filter(z=>z.status=="open"||z.status=="Open");I&&I.length>1?localStorage.setItem("plusChecked1","open"):localStorage.setItem("plusChecked1","close"),i.setAggregatorSetting(C,v.value,M.value),console.log("🚀🚀🚀 ~ file: aggregator-setting-modal.vue:195 ~ confirm ~ result:",C);const P=new Event("updateSwapParams");window.dispatchEvent(P),r("modalConfirm",C)},F=ut(!0),q=C=>{F.value=!F.value,p.value.forEach(I=>{const P=(I==null?void 0:I.name)=="Cetus"||C?"open":"close";b.value[I==null?void 0:I.name]=P})},T=ut(!0),ee=ut(!0),x=C=>{T.value=!T.value,S.value.forEach(I=>{const P=(I==null?void 0:I.name)=="Cetus"||C?"open":"close";b.value[I==null?void 0:I.name]=P})},E=C=>{ee.value=!ee.value,D.value.forEach(I=>{const P=C?"open":"close";b.value[I==null?void 0:I.name]=P})};return Zt(b.value,C=>{var I,P;if(C)if(console.log("🚀 ~ watch ~ newValue:",C),console.log("🚀 ~ watch ~ sourceList:",p.value),console.log("🚀 ~ watch ~ dexSourceList:",S.value),Object.keys(C).filter(U=>U!=="Cetus").every(U=>C[U]==="open"))F.value=!0,T.value=!0,ee.value=!0;else{F.value=!1;const U=S.value.filter(m=>(C==null?void 0:C[m==null?void 0:m.name])==="open"),Y=D.value.filter(m=>(C==null?void 0:C[m==null?void 0:m.name])==="open");(U==null?void 0:U.length)>0&&(U==null?void 0:U.length)===((I=S==null?void 0:S.value)==null?void 0:I.length)?T.value=!0:T.value=!1,(Y==null?void 0:Y.length)>0&&(Y==null?void 0:Y.length)===((P=D==null?void 0:D.value)==null?void 0:P.length)?ee.value=!0:ee.value=!1}},{immediate:!0}),(C,I)=>{const P=rs,z=ns,U=is,Y=ts("image");return de(),Pt(ir(fi),{title:"Customize Routing",class:"new-modal-have-radius",footer:null,visible:!0,width:"460px",onCancel:I[5]||(I[5]=m=>C.$emit("close"))},{default:Nt(()=>[j("div",il,[p.value&&p.value.length>0?(de(),ze("div",sl,[j("div",ol,[j("div",al,[ll,ul,be(P,{"overlay-class-name":"price-impact-tooltip"},{title:Nt(()=>[cl]),default:Nt(()=>[hl]),_:1})]),j("div",fl,[dl,be(z,{class:"liquidity-switch",checked:F.value,onClick:I[0]||(I[0]=m=>{q(m)})},null,8,["checked"])])]),j("div",gl,[pl,j("div",vl,[j("div",ml,[j("div",wl,[yl,be(z,{class:"liquidity-switch",checked:T.value,onClick:I[1]||(I[1]=m=>{x(m)})},null,8,["checked"])]),j("div",Ml,[(de(!0),ze(sr,null,or(S.value,m=>(de(),ze("div",{key:m.name,class:"liquidity-source-item"},[j("div",_l,[Vn(j("img",bl,null,512),[[Y,m.logo]]),j("span",null,Ae(m.name),1)]),j("div",Al,[be(z,{class:"liquidity-switch",checked:b.value[m.name]=="open",onClick:n=>N(m)},null,8,["checked","onClick"])])]))),128))])]),j("div",Cl,[j("div",Sl,[Il,be(z,{class:"liquidity-switch",checked:ee.value,onClick:I[2]||(I[2]=m=>{E(m)})},null,8,["checked"])]),j("div",Ol,[(de(!0),ze(sr,null,or(D.value,m=>(de(),ze("div",{key:m.name,class:"liquidity-source-item"},[j("div",El,[Vn(j("img",kl,null,512),[[Y,m.logo]]),j("span",null,Ae(m.name),1)]),j("div",Tl,[be(z,{class:"liquidity-switch",checked:b.value[m.name]=="open",onClick:n=>N(m)},null,8,["checked","onClick"])])]))),128))])])])])])):At("",!0),j("div",Bl,[Rl,j("div",Nl,[j("div",Pl,[j("div",jl,[Ll,be(z,{checked:v.value=="open",onChange:I[3]||(I[3]=m=>L(v.value=="open"?"close":"open"))},null,8,["checked"])])])])]),j("div",Fl,[be(U,{class:"max-btn cancels-btn",onClick:I[4]||(I[4]=m=>C.$emit("close"))},{default:Nt(()=>[Br("Cancel")]),_:1}),be(U,{class:"confirm-btn",onClick:X},{default:Nt(()=>[Br("Confirm")]),_:1})])])]),_:1})}}});const Hu=gr(ql,[["__scopeId","data-v-c887d43a"]]),Dl=dr({props:{text:{type:String,default:""}},setup(e){const{t}=ss(),{$notify:r}=os();return{handleCopy:s=>{if(navigator.clipboard)navigator.clipboard.writeText(s);else{const l=document.createElement("input");l.readOnly=!0,document.body.appendChild(l),l.value=s,l.select(),document.execCommand("Copy"),document.body.removeChild(l)}r.success({icon:br("svg",{class:{icon:!0},"aria-hidden":!0},[br("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:br("div",{class:"notification-title"},[br("span",{innerHTML:t("tips.copySuccess")},null)]),class:"ant-notification-copy"})}}}});const Ul=e=>(pr("data-v-58075ffa"),e=e(),vr(),e),xl=Ul(()=>j("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),Wl=[xl];function Vl(e,t,r,i,s,l){return de(),ze("svg",{class:"copy-icon","aria-hidden":"true",onClick:t[0]||(t[0]=a=>e.handleCopy(e.text))},Wl)}const $l=gr(Dl,[["render",Vl],["__scopeId","data-v-58075ffa"]]),Zl=dr({props:{type:{type:String,default:""},value:{type:String,default:""}},setup(e){const t=Ur(),r=Se(()=>t),i=Se(()=>r.value.currentExplorer);return{getExplorerUrl:mi,currentExplorer:i}}});const zl=e=>(pr("data-v-9f3037f6"),e=e(),vr(),e),Kl=["href"],Xl=zl(()=>j("svg",{class:"icon icon-up","aria-hidden":"true"},[j("use",{"xlink:href":"#icon-icon_link"})],-1)),Yl=[Xl];function Jl(e,t,r,i,s,l){return de(),ze("a",{target:"_blank",class:"jump-icon",href:("getExplorerUrl"in e?e.getExplorerUrl:ir(mi))(e.currentExplorer,e.type,e.value)},Yl,8,Kl)}const Hl=gr(Zl,[["render",Jl],["__scopeId","data-v-9f3037f6"]]),Gl={CETUS:"Cetus",DEEPBOOK:"DeepBook",KRIYA:"Kriya V2",KRIYAV3:"Kriya V3",FLOWX:"FlowX V2",FLOWXV3:"FlowX V3",TURBOS:"Turbos",AFTERMATH:"Aftermath",HAEDAL:"Haedal",VOLO:"Volo",AFSUI:"Aftermath LSD"},Ql=dr({components:{Modal:fi,CoinImg:ci,CopyBtn:$l,ExplorerLink:Hl},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const{getTokenInfo:t}=nl(),r=vi(),i=Se(()=>r==null?void 0:r.tokensObj),s=Ur(),l=Se(()=>s==null?void 0:s.liquiditySourceObj),a=ut(!1);as(()=>{a.value=!0});const c=ut([]),p=ut({}),v=async F=>{for(let q=0;q<(F==null?void 0:F.length);q++){const T=F[q].path;for(let ee=0;ee<(T==null?void 0:T.length);ee++){const x=T[ee];console.log(x,"path##");const E=await t(x==null?void 0:x.from),C=await t(x==null?void 0:x.target),I=(E==null?void 0:E.logoURI)||(E==null?void 0:E.logo_url)||"",P=(C==null?void 0:C.logoURI)||(C==null?void 0:C.logo_url)||"";p.value[x==null?void 0:x.from]={...E,coinImg:I},p.value[x==null?void 0:x.target]={...C,coinImg:P},console.log(p.value,"##routerTokenMap.value")}}console.log("🚀🚀🚀 ~ file: router-modal.vue:189 ~ setup ~ routerTokenMap:",p)};Zt(()=>{var F;return[a.value,(F=e==null?void 0:e.suiPreSwapdata)==null?void 0:F.routes]},([F,q])=>{F&&(M(q),v(q))},{immediate:!0,deep:!0});const M=async F=>{var T,ee,x,E,C;const q=[];for(let I=0;I<(F==null?void 0:F.length);I++){const P=F[I],z=[];for(let Y=0;Y<((T=P==null?void 0:P.path)==null?void 0:T.length);Y++){const m=P==null?void 0:P.path[Y];console.log("🚀 ~ file: router-modal.vue:241 ~ path ~ p:",m);const n=(m==null?void 0:m.feeRate)&&Number(m==null?void 0:m.feeRate)&&ot(m==null?void 0:m.feeRate).mul(100).toString()+"%"||void 0,u=n;z.push({poolAddress:m==null?void 0:m.id,fee:n,provider:Gl[m==null?void 0:m.provider],providerImg:(E=(x=l==null?void 0:l.value)==null?void 0:x[(ee=m==null?void 0:m.provider)==null?void 0:ee.toUpperCase()])==null?void 0:E.logo,from:m==null?void 0:m.from,to:m==null?void 0:m.target,displayFeeOrVersion:u})}const U=Us(ot(P==null?void 0:P.amountIn).div((C=e==null?void 0:e.suiPreSwapdata)==null?void 0:C.amountIn).mul(100).toString(),1);q.push({path:z,proportion:U,amountOut:P==null?void 0:P.amountOut})}if(console.log("🚀🚀🚀 ~ file: router-modal.vue:182 ~ routerList ~ result:",q),(q==null?void 0:q.length)<2){c.value=q;return}c.value=q==null?void 0:q.sort((I,P)=>ot(I==null?void 0:I.amountOut).minus(P==null?void 0:P.amountOut).lt(0))};Zt(()=>[c.value],([F])=>{console.log("🚀 ~ file: router-modal.vue:284 ~ watch ~ routerList:",F)});const b=Se(()=>{var F,q;return((F=e==null?void 0:e.fromCoin)==null?void 0:F.logoURI)||((q=e==null?void 0:e.fromCoin)==null?void 0:q.logo_url)||""}),A=Se(()=>{var F,q;return((F=e==null?void 0:e.toCoin)==null?void 0:F.logoURI)||((q=e==null?void 0:e.toCoin)==null?void 0:q.logo_url)||""}),S=Se(()=>{var E;const F=[];let q=ot(0);(E=c==null?void 0:c.value)==null||E.forEach((C,I)=>{q=q.plus(C.proportion);const P=C.proportion.split(".");F.push({value:C.proportion,int:P[0],decimal:P[1],pathIndex:I})});let T=ot(100).minus(q).toNumber();const ee=F.sort((C,I)=>Number(I.decimal)-Number(C.decimal));if(T)for(let C=0;C<ee.length&&T;C++)ee[C].value=ot(ee[C].value).plus(.1).toString(),T=ot(T).minus(.1).toNumber();return console.log("🚀🚀🚀 ~ file: router-modal.vue:182 ~ routerList ~ sortByDecimalPart:",ee),Object.fromEntries(ee.map(C=>[C.pathIndex,C]))}),D=Se(()=>{var F;return((F=c==null?void 0:c.value)==null?void 0:F.length)===1}),L=Se(()=>{var q;const F={};return(q=c==null?void 0:c.value)==null||q.forEach(T=>{var ee;(ee=T==null?void 0:T.path)==null||ee.forEach(x=>{var E,C,I,P;console.log("🚀 ~ file: router-modal.vue:343 ~ route?.path?.forEach ~ p:",x),((E=x==null?void 0:x.provider)==null?void 0:E.indexOf("Kriya"))>-1?F.Kriya=Ar.KRIYA:((C=x==null?void 0:x.provider)==null?void 0:C.indexOf("Aftermath"))>-1?F.Aftermath=Ar.Aftermath:((I=x==null?void 0:x.provider)==null?void 0:I.indexOf("FlowX"))>-1?F.FlowX=Ar.FLOWX:F[x==null?void 0:x.provider]=Ar[(P=x==null?void 0:x.provider)==null?void 0:P.toUpperCase()]})}),Object.values(F)});Zt(()=>L.value,F=>{console.log("providerList newValue: ",F)});const N=Se(()=>{var F,q,T,ee,x,E,C,I,P,z,U,Y,m;if(((q=(F=e==null?void 0:e.suiPreSwapdata)==null?void 0:F.routes)==null?void 0:q.length)===1)if(((E=(x=(ee=(T=e==null?void 0:e.suiPreSwapdata)==null?void 0:T.routes)==null?void 0:ee[0])==null?void 0:x.path)==null?void 0:E.length)>1){const n=[(C=e==null?void 0:e.fromCoin)==null?void 0:C.symbol];return(U=(z=(P=(I=e==null?void 0:e.suiPreSwapdata)==null?void 0:I.routes)==null?void 0:P[0])==null?void 0:z.path)==null||U.forEach((u,d)=>{var y,_;n.push((_=(y=i==null?void 0:i.value)==null?void 0:y[u==null?void 0:u.target])==null?void 0:_.symbol)}),n==null?void 0:n.join(" > ")}else return`${(Y=e==null?void 0:e.fromCoin)==null?void 0:Y.symbol} > ${(m=e==null?void 0:e.toCoin)==null?void 0:m.symbol}`;return""}),X=Se(()=>{var F;return(F=c==null?void 0:c.value)==null?void 0:F.length});return{fromCoinImg:b,toCoinImg:A,routerList:c,proportionObj:S,isSingleRoute:D,onlyOneRouteText:N,routeNum:X,providerList:L,addCommom:dn,addressAbridge:gi,routerTokenMap:p}}});const Rn=e=>(pr("data-v-55b7d398"),e=e(),vr(),e),eu=Rn(()=>j("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[j("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),tu={class:"swap-router-modal-content"},ru={class:"simple-path"},nu={key:0},iu={key:1},su={class:"provider-img-list"},ou=Rn(()=>j("div",null,null,-1)),au={class:"top"},lu={class:"from-token"},uu={class:"num"},cu={class:"symbol"},hu={class:"to-token"},fu={class:"num"},du={class:"symbol"},gu={class:"from-coin-img"},pu={class:"to-coin-img"},vu={class:"router-box"},mu={class:"proportion"},wu={class:"pools"},yu={class:"coin-pair"},Mu={class:"name"},_u={key:0,class:"fee"},bu={key:0,class:"pool-info"},Au=Rn(()=>j("div",{class:"title"},"Pool Address",-1)),Cu={class:"right"},Su={class:"pool-address"},Iu={class:"coin-info"},Ou={class:"symbol-and-name"},Eu={class:"symbol"},ku={class:"name"},Tu={class:"right"},Bu={class:"coin-info"},Ru={class:"symbol-and-name"},Nu={class:"symbol"},Pu={class:"name"},ju={class:"right"};function Lu(e,t,r,i,s,l){const a=rr("CoinImg"),c=rr("CopyBtn"),p=rr("ExplorerLink"),v=rr("Modal");return de(),Pt(v,{class:"swap-route-modal",title:"Route",width:"880px",visible:!0,footer:null,onCancel:t[0]||(t[0]=M=>e.$emit("onClose"))},{closeIcon:Nt(()=>[eu]),default:Nt(()=>{var M,b,A,S,D,L;return[j("div",tu,[j("div",ru,[e.routeNum===1?(de(),ze("span",nu,Ae(e.onlyOneRouteText),1)):(de(),ze("span",iu,Ae(e.routeNum)+" Steams",1)),j("div",su,[(de(!0),ze(sr,null,or(e.providerList,N=>(de(),Pt(a,{key:N,url:N},null,8,["url"]))),128))]),ou]),j("div",au,[j("div",lu,[be(a,{url:(M=e.fromCoin)==null?void 0:M.logo_url},null,8,["url"]),j("span",uu,Ae(("addCommom"in e?e.addCommom:ir(dn))(e.fromCoinAmount)),1),j("span",cu,Ae((b=e.fromCoin)==null?void 0:b.symbol),1)]),j("div",hu,[j("span",fu,Ae(("addCommom"in e?e.addCommom:ir(dn))(e.toCoinAmount)),1),j("span",du,Ae((A=e.toCoin)==null?void 0:A.symbol),1),be(a,{url:(S=e.toCoin)==null?void 0:S.logo_url},null,8,["url"])])]),j("div",{class:$n(e.isSingleRoute?"router-content is-single":"router-content")},[j("div",gu,[be(a,{url:(D=e.fromCoin)==null?void 0:D.logo_url},null,8,["url"])]),j("div",pu,[be(a,{url:(L=e.toCoin)==null?void 0:L.logo_url},null,8,["url"])]),j("div",vu,[(de(!0),ze(sr,null,or(e.routerList,(N,X)=>{var F,q;return de(),ze("div",{key:`route-${X}`,class:"router"},[j("div",mu,Ae((q=(F=e.proportionObj)==null?void 0:F[X])==null?void 0:q.value)+"%",1),j("div",wu,[(de(!0),ze(sr,null,or(N.path,(T,ee)=>{var x,E,C,I,P,z,U,Y,m,n,u,d;return de(),ze("div",{key:`route-pool-${ee}`,class:"pool-item"},[j("div",yu,[be(a,{url:e.routerTokenMap&&((x=e.routerTokenMap[T.from])==null?void 0:x.coinImg)},null,8,["url"]),be(a,{url:e.routerTokenMap&&((E=e.routerTokenMap[T.to])==null?void 0:E.coinImg)},null,8,["url"])]),j("span",Mu,Ae(T==null?void 0:T.provider),1),T!=null&&T.displayFeeOrVersion?(de(),ze("span",_u,Ae(T==null?void 0:T.displayFeeOrVersion),1)):At("",!0),e.routerTokenMap&&e.routerTokenMap[T.from]&&e.routerTokenMap&&e.routerTokenMap[T.to]?(de(),ze("div",{key:1,class:$n((T==null?void 0:T.provider)==="FlowX V2"?"pool-detail-box no-pool":"pool-detail-box")},[(T==null?void 0:T.provider)!=="FlowX V2"?(de(),ze("div",bu,[Au,j("div",Cu,[j("span",Su,Ae(("addressAbridge"in e?e.addressAbridge:ir(gi))(T==null?void 0:T.poolAddress)),1),be(c,{text:T==null?void 0:T.poolAddress},null,8,["text"]),be(p,{type:"poolAddress",value:T==null?void 0:T.poolAddress},null,8,["value"])])])):At("",!0),j("div",Iu,[be(a,{url:e.routerTokenMap&&((C=e.routerTokenMap[T.from])==null?void 0:C.coinImg)},null,8,["url"]),j("div",Ou,[j("div",Eu,Ae(e.routerTokenMap&&((I=e.routerTokenMap[T.from])==null?void 0:I.symbol)),1),j("div",ku,Ae(e.routerTokenMap&&((P=e.routerTokenMap[T.from])==null?void 0:P.name)),1)]),j("div",Tu,[be(c,{text:e.routerTokenMap&&((z=e.routerTokenMap[T.from])==null?void 0:z.address)},null,8,["text"]),be(p,{type:"coin",value:e.routerTokenMap&&((U=e.routerTokenMap[T.from])==null?void 0:U.address)},null,8,["value"])])]),j("div",Bu,[be(a,{url:e.routerTokenMap&&((Y=e.routerTokenMap[T.to])==null?void 0:Y.coinImg)},null,8,["url"]),j("div",Ru,[j("div",Nu,Ae(e.routerTokenMap&&((m=e.routerTokenMap[T.to])==null?void 0:m.symbol)),1),j("div",Pu,Ae(e.routerTokenMap&&((n=e.routerTokenMap[T.to])==null?void 0:n.name)),1)]),j("div",ju,[be(c,{text:e.routerTokenMap&&((u=e.routerTokenMap[T.to])==null?void 0:u.address)},null,8,["text"]),be(p,{type:"coin",value:e.routerTokenMap&&((d=e.routerTokenMap[T.to])==null?void 0:d.address)},null,8,["value"])])])],2)):At("",!0)])}),128))])])}),128))])],2)])]}),_:1})}const Gu=gr(Ql,[["render",Lu],["__scopeId","data-v-55b7d398"]]);var Nn={};(function e(t,r,i,s){var l=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!t.OffscreenCanvas)return!1;var f=new OffscreenCanvas(1,1),h=f.getContext("2d");h.fillRect(0,0,1,1);var g=f.transferToImageBitmap();try{h.createPattern(g,"no-repeat")}catch{return!1}return!0}();function p(){}function v(f){var h=r.exports.Promise,g=h!==void 0?h:t.Promise;return typeof g=="function"?new g(f):(f(p,p),null)}var M=function(f,h){return{transform:function(g){if(f)return g;if(h.has(g))return h.get(g);var o=new OffscreenCanvas(g.width,g.height),w=o.getContext("2d");return w.drawImage(g,0,0),h.set(g,o),o},clear:function(){h.clear()}}}(c,new Map),b=function(){var f=Math.floor(16.666666666666668),h,g,o={},w=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(B){var R=Math.random();return o[R]=requestAnimationFrame(function k(V){w===V||w+f-1<V?(w=V,delete o[R],B()):o[R]=requestAnimationFrame(k)}),R},g=function(B){o[B]&&cancelAnimationFrame(o[B])}):(h=function(B){return setTimeout(B,f)},g=function(B){return clearTimeout(B)}),{frame:h,cancel:g}}(),A=function(){var f,h,g={};function o(w){function B(R,k){w.postMessage({options:R||{},callback:k})}w.init=function(k){var V=k.transferControlToOffscreen();w.postMessage({canvas:V},[V])},w.fire=function(k,V,Z){if(h)return B(k,null),h;var J=Math.random().toString(36).slice(2);return h=v(function(ue){function H(te){te.data.callback===J&&(delete g[J],w.removeEventListener("message",H),h=null,M.clear(),Z(),ue())}w.addEventListener("message",H),B(k,J),g[J]=H.bind(null,{data:{callback:J}})}),h},w.reset=function(){w.postMessage({reset:!0});for(var k in g)g[k](),delete g[k]}}return function(){if(f)return f;if(!i&&l){var w=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{f=new Worker(URL.createObjectURL(new Blob([w])))}catch(B){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",B),null}o(f)}return f}}(),S={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function D(f,h){return h?h(f):f}function L(f){return f!=null}function N(f,h,g){return D(f&&L(f[h])?f[h]:S[h],g)}function X(f){return f<0?0:Math.floor(f)}function F(f,h){return Math.floor(Math.random()*(h-f))+f}function q(f){return parseInt(f,16)}function T(f){return f.map(ee)}function ee(f){var h=String(f).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:q(h.substring(0,2)),g:q(h.substring(2,4)),b:q(h.substring(4,6))}}function x(f){var h=N(f,"origin",Object);return h.x=N(h,"x",Number),h.y=N(h,"y",Number),h}function E(f){f.width=document.documentElement.clientWidth,f.height=document.documentElement.clientHeight}function C(f){var h=f.getBoundingClientRect();f.width=h.width,f.height=h.height}function I(f){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=f,h}function P(f,h,g,o,w,B,R,k,V){f.save(),f.translate(h,g),f.rotate(B),f.scale(o,w),f.arc(0,0,1,R,k,V),f.restore()}function z(f){var h=f.angle*(Math.PI/180),g=f.spread*(Math.PI/180);return{x:f.x,y:f.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:f.startVelocity*.5+Math.random()*f.startVelocity,angle2D:-h+(.5*g-Math.random()*g),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:f.color,shape:f.shape,tick:0,totalTicks:f.ticks,decay:f.decay,drift:f.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:f.gravity*3,ovalScalar:.6,scalar:f.scalar,flat:f.flat}}function U(f,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var g=h.tick++/h.totalTicks,o=h.x+h.random*h.tiltCos,w=h.y+h.random*h.tiltSin,B=h.wobbleX+h.random*h.tiltCos,R=h.wobbleY+h.random*h.tiltSin;if(f.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-g)+")",f.beginPath(),a&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))f.fill(d(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(B-o)*.1,Math.abs(R-w)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var k=Math.PI/10*h.wobble,V=Math.abs(B-o)*.1,Z=Math.abs(R-w)*.1,J=h.shape.bitmap.width*h.scalar,ue=h.shape.bitmap.height*h.scalar,H=new DOMMatrix([Math.cos(k)*V,Math.sin(k)*V,-Math.sin(k)*Z,Math.cos(k)*Z,h.x,h.y]);H.multiplySelf(new DOMMatrix(h.shape.matrix));var te=f.createPattern(M.transform(h.shape.bitmap),"no-repeat");te.setTransform(H),f.globalAlpha=1-g,f.fillStyle=te,f.fillRect(h.x-J/2,h.y-ue/2,J,ue),f.globalAlpha=1}else if(h.shape==="circle")f.ellipse?f.ellipse(h.x,h.y,Math.abs(B-o)*h.ovalScalar,Math.abs(R-w)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):P(f,h.x,h.y,Math.abs(B-o)*h.ovalScalar,Math.abs(R-w)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var re=Math.PI/2*3,ne=4*h.scalar,se=8*h.scalar,Je=h.x,oe=h.y,ce=5,Qe=Math.PI/ce;ce--;)Je=h.x+Math.cos(re)*se,oe=h.y+Math.sin(re)*se,f.lineTo(Je,oe),re+=Qe,Je=h.x+Math.cos(re)*ne,oe=h.y+Math.sin(re)*ne,f.lineTo(Je,oe),re+=Qe;else f.moveTo(Math.floor(h.x),Math.floor(h.y)),f.lineTo(Math.floor(h.wobbleX),Math.floor(w)),f.lineTo(Math.floor(B),Math.floor(R)),f.lineTo(Math.floor(o),Math.floor(h.wobbleY));return f.closePath(),f.fill(),h.tick<h.totalTicks}function Y(f,h,g,o,w){var B=h.slice(),R=f.getContext("2d"),k,V,Z=v(function(J){function ue(){k=V=null,R.clearRect(0,0,o.width,o.height),M.clear(),w(),J()}function H(){i&&!(o.width===s.width&&o.height===s.height)&&(o.width=f.width=s.width,o.height=f.height=s.height),!o.width&&!o.height&&(g(f),o.width=f.width,o.height=f.height),R.clearRect(0,0,o.width,o.height),B=B.filter(function(te){return U(R,te)}),B.length?k=b.frame(H):ue()}k=b.frame(H),V=ue});return{addFettis:function(J){return B=B.concat(J),Z},canvas:f,promise:Z,reset:function(){k&&b.cancel(k),V&&V()}}}function m(f,h){var g=!f,o=!!N(h||{},"resize"),w=!1,B=N(h,"disableForReducedMotion",Boolean),R=l&&!!N(h||{},"useWorker"),k=R?A():null,V=g?E:C,Z=f&&k?!!f.__confetti_initialized:!1,J=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ue;function H(re,ne,se){for(var Je=N(re,"particleCount",X),oe=N(re,"angle",Number),ce=N(re,"spread",Number),Qe=N(re,"startVelocity",Number),ve=N(re,"decay",Number),me=N(re,"gravity",Number),kt=N(re,"drift",Number),pe=N(re,"colors",T),we=N(re,"ticks",Number),st=N(re,"shapes"),le=N(re,"scalar"),Q=!!N(re,"flat"),ie=x(re),he=Je,fe=[],ae=f.width*ie.x,ye=f.height*ie.y;he--;)fe.push(z({x:ae,y:ye,angle:oe,spread:ce,startVelocity:Qe,color:pe[he%pe.length],shape:st[F(0,st.length)],ticks:we,decay:ve,gravity:me,drift:kt,scalar:le,flat:Q}));return ue?ue.addFettis(fe):(ue=Y(f,fe,V,ne,se),ue.promise)}function te(re){var ne=B||N(re,"disableForReducedMotion",Boolean),se=N(re,"zIndex",Number);if(ne&&J)return v(function(Qe){Qe()});g&&ue?f=ue.canvas:g&&!f&&(f=I(se),document.body.appendChild(f)),o&&!Z&&V(f);var Je={width:f.width,height:f.height};k&&!Z&&k.init(f),Z=!0,k&&(f.__confetti_initialized=!0);function oe(){if(k){var Qe={getBoundingClientRect:function(){if(!g)return f.getBoundingClientRect()}};V(Qe),k.postMessage({resize:{width:Qe.width,height:Qe.height}});return}Je.width=Je.height=null}function ce(){ue=null,o&&(w=!1,t.removeEventListener("resize",oe)),g&&f&&(document.body.contains(f)&&document.body.removeChild(f),f=null,Z=!1)}return o&&!w&&(w=!0,t.addEventListener("resize",oe,!1)),k?k.fire(re,Je,ce):H(re,Je,ce)}return te.reset=function(){k&&k.reset(),ue&&ue.reset()},te}var n;function u(){return n||(n=m(null,{useWorker:!0,resize:!0})),n}function d(f,h,g,o,w,B,R){var k=new Path2D(f),V=new Path2D;V.addPath(k,new DOMMatrix(h));var Z=new Path2D;return Z.addPath(V,new DOMMatrix([Math.cos(R)*w,Math.sin(R)*w,-Math.sin(R)*B,Math.cos(R)*B,g,o])),Z}function y(f){if(!a)throw new Error("path confetti are not supported in this browser");var h,g;typeof f=="string"?h=f:(h=f.path,g=f.matrix);var o=new Path2D(h),w=document.createElement("canvas"),B=w.getContext("2d");if(!g){for(var R=1e3,k=R,V=R,Z=0,J=0,ue,H,te=0;te<R;te+=2)for(var re=0;re<R;re+=2)B.isPointInPath(o,te,re,"nonzero")&&(k=Math.min(k,te),V=Math.min(V,re),Z=Math.max(Z,te),J=Math.max(J,re));ue=Z-k,H=J-V;var ne=10,se=Math.min(ne/ue,ne/H);g=[se,0,0,se,-Math.round(ue/2+k)*se,-Math.round(H/2+V)*se]}return{type:"path",path:h,matrix:g}}function _(f){var h,g=1,o="#000000",w='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof f=="string"?h=f:(h=f.text,g="scalar"in f?f.scalar:g,w="fontFamily"in f?f.fontFamily:w,o="color"in f?f.color:o);var B=10*g,R=""+B+"px "+w,k=new OffscreenCanvas(B,B),V=k.getContext("2d");V.font=R;var Z=V.measureText(h),J=Math.ceil(Z.actualBoundingBoxRight+Z.actualBoundingBoxLeft),ue=Math.ceil(Z.actualBoundingBoxAscent+Z.actualBoundingBoxDescent),H=2,te=Z.actualBoundingBoxLeft+H,re=Z.actualBoundingBoxAscent+H;J+=H+H,ue+=H+H,k=new OffscreenCanvas(J,ue),V=k.getContext("2d"),V.font=R,V.fillStyle=o,V.fillText(h,te,re);var ne=1/g;return{type:"bitmap",bitmap:k.transferToImageBitmap(),matrix:[ne,0,0,ne,-J*ne/2,-ue*ne/2]}}r.exports=function(){return u().apply(this,arguments)},r.exports.reset=function(){u().reset()},r.exports.create=m,r.exports.shapeFromPath=y,r.exports.shapeFromText=_})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Nn,!1);const Qu=Nn.exports;Nn.exports.create;export{Hu as A,$u as C,Gu as R,Ku as _,Zu as a,Xu as b,Qu as c,Yu as d,Ju as e,zu as g,nl as u};
