var u2=Object.defineProperty;var d2=(t,e,n)=>e in t?u2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var v=(t,e,n)=>(d2(t,typeof e!="symbol"?e+"":e,n),n),Xh=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var M=(t,e,n)=>(Xh(t,e,"read from private field"),n?n.call(t):e.get(t)),Ge=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ue=(t,e,n,i)=>(Xh(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),su=(t,e,n,i)=>({set _(r){Ue(t,e,r,n)},get _(){return M(t,e,i)}}),Le=(t,e,n)=>(Xh(t,e,"access private method"),n);import{e as yn,o as P,f as U,J as x0,a as Sn,l as Ie,r as _e,R as M0,h as S,u as et,c as xt,v as fe,i as Ft,M as h2,p as di,k as hi,a1 as vr,y as Ko,a4 as gl,C as je,Q as kr,s as Kp,w as ft,F as tn,E as ln,t as jr,j as ai,B as eo,x as ae,ac as Zp,ad as At,ff as ch,fg as f2,_ as p2,a7 as g2,fh as Ff,q as Jt,A as He,K as ml,z as St,I as Hp,b as lh,H as Hc,O as Uf,S as m2,N as w2,m as N0,X as y2,fi as _2}from"./entry.a6654d09.js";import{a as b2,_ as v2}from"./img-no-Positions_2x.a5949082.js";import{a5 as O0,a6 as D0,a7 as gd,a8 as md,a9 as k2,aa as Bu,ab as S2,ac as Jh,ad as T2,ae as j0,af as Ar,ag as ct,ah as R0,ai as Qp,aj as B0,u as on,h as en,c as ls,a as zo,b as Ni,ak as A2,B as C2,C as I2,D as E2,E as G,F as Gp,G as Yp,z as x2,H as M2,I as uh,J as Zo,al as P0,L as I,M as bt,K as q,_ as it,T as Pe,W as wl,X as Yi,Q as _t,N as tt,R as pe,am as us,V as yl,Y as F0,U as be,an as Fn,$ as ou,P as fs,l as Qc,ao as Ws,x as Pa,ap as U0,aq as L0,p as Hm,ar as N2,a3 as lt,as as $0,Z as wd,at as z0,au as li,a2 as X,av as mn,aw as Mn,ax as O2,ay as zc,az as D2,aA as j2,aB as is,aC as yd,aD as Qm,aE as R2}from"./sha256.91c60824.js";import"./index.43c7dce9.js";import{i as Et}from"./import-icon.de3e6c66.js";import{H as au,u as dh,S as B2,a as qc,g as ps,J as P2,b as A,K as F2,p as Gm,L as bo,M as U2,N as Ym,O as L2,P as Pu,B as $2}from"./pool.58e56ed3.js";import{r as z2,s as Xp,v as Jp,a as q2,u as q0}from"./notifi.4fdf219a.js";import{_ as eg}from"./img-no-Positions_2x.ea7d491d.js";import{_ as V2}from"./term-and-conditions.61cdc1be.js";/* empty css              */import{c as Cc,g as W2}from"./index.b44865e4.js";import{_ as K2}from"./icon-selected_3x.09e9a6f0.js";import{u as tg}from"./useTheme.571a52eb.js";import{_ as Z2}from"./nuxt-link.8fab1246.js";import{u as V0}from"./launchpad.a30ba268.js";/* empty css              */import{D as ne}from"./decimal.0bdeb344.js";import"./xcetus.9c261554.js";import{u as H2}from"./autoPool.4b886bcb.js";import{u as Q2}from"./farms.0602fe26.js";import"./index.5c0d0060.js";import"./lodash.11b86f70.js";import"./useWhale.bbbe018d.js";function Xm(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.bech32m=Lf=Gc.bech32=void 0;const _d="qpzry9x8gf2tvdw0s3jn54khce6mua7l",W0={};for(let t=0;t<_d.length;t++){const e=_d.charAt(t);W0[e]=t}function Fa(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function Jm(t){let e=1;for(let n=0;n<t.length;++n){const i=t.charCodeAt(n);if(i<33||i>126)return"Invalid prefix ("+t+")";e=Fa(e)^i>>5}e=Fa(e);for(let n=0;n<t.length;++n){const i=t.charCodeAt(n);e=Fa(e)^i&31}return e}function ng(t,e,n,i){let r=0,s=0;const o=(1<<n)-1,a=[];for(let c=0;c<t.length;++c)for(r=r<<e|t[c],s+=e;s>=n;)s-=n,a.push(r>>s&o);if(i)s>0&&a.push(r<<n-s&o);else{if(s>=e)return"Excess padding";if(r<<n-s&o)return"Non-zero padding"}return a}function G2(t){return ng(t,8,5,!0)}function Y2(t){const e=ng(t,5,8,!1);if(Array.isArray(e))return e}function X2(t){const e=ng(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function K0(t){let e;t==="bech32"?e=1:e=734539939;function n(o,a,c){if(c=c||90,o.length+7+a.length>c)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let l=Jm(o);if(typeof l=="string")throw new Error(l);let u=o+"1";for(let d=0;d<a.length;++d){const h=a[d];if(h>>5)throw new Error("Non 5-bit word");l=Fa(l)^h,u+=_d.charAt(h)}for(let d=0;d<6;++d)l=Fa(l);l^=e;for(let d=0;d<6;++d){const h=l>>(5-d)*5&31;u+=_d.charAt(h)}return u}function i(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";const c=o.toLowerCase(),l=o.toUpperCase();if(o!==c&&o!==l)return"Mixed-case string "+o;o=c;const u=o.lastIndexOf("1");if(u===-1)return"No separator character for "+o;if(u===0)return"Missing prefix for "+o;const d=o.slice(0,u),h=o.slice(u+1);if(h.length<6)return"Data too short";let f=Jm(d);if(typeof f=="string")return f;const g=[];for(let p=0;p<h.length;++p){const w=h.charAt(p),_=W0[w];if(_===void 0)return"Unknown character "+w;f=Fa(f)^_,!(p+6>=h.length)&&g.push(_)}return f!==e?"Invalid checksum for "+o:{prefix:d,words:g}}function r(o,a){const c=i(o,a);if(typeof c=="object")return c}function s(o,a){const c=i(o,a);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:r,decode:s,encode:n,toWords:G2,fromWordsUnsafe:Y2,fromWords:X2}}var Lf=Gc.bech32=K0("bech32");Gc.bech32m=K0("bech32m");class Z0 extends O0{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,D0(e);const i=gd(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(i.length>r?e.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return md(this),this.iHash.update(e),this}digestInto(e){md(this),k2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:i,finished:r,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const _l=(t,e,n)=>new Z0(t,e).update(n).digest();_l.create=(t,e)=>new Z0(t,e);function J2(t,e,n,i){D0(t);const r=S2({dkLen:32,asyncTick:10},i),{c:s,dkLen:o,asyncTick:a}=r;if(Jh(s),Jh(o),Jh(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=gd(e),l=gd(n),u=new Uint8Array(o),d=_l.create(t,c),h=d._cloneInto().update(l);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:h}}function eT(t,e,n,i,r){return t.destroy(),e.destroy(),i&&i.destroy(),r.fill(0),n}function tT(t,e,n,i){const{c:r,dkLen:s,DK:o,PRF:a,PRFSalt:c}=J2(t,e,n,i);let l;const u=new Uint8Array(4),d=Bu(u),h=new Uint8Array(a.outputLen);for(let f=1,g=0;g<s;f++,g+=a.outputLen){const p=o.subarray(g,g+a.outputLen);d.setInt32(0,f,!1),(l=c._cloneInto(l)).update(u).digestInto(h),p.set(h.subarray(0,p.length));for(let w=1;w<r;w++){a._cloneInto(l).update(h).digestInto(h);for(let _=0;_<p.length;_++)p[_]^=h[_]}}return eT(a,c,o,l,h)}function nT(t,e,n,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,i);const r=BigInt(32),s=BigInt(4294967295),o=Number(n>>r&s),a=Number(n&s),c=i?4:0,l=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+l,a,i)}class H0 extends O0{constructor(e,n,i,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=i,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Bu(this.buffer)}update(e){md(this);const{view:n,buffer:i,blockLen:r}=this;e=gd(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);if(a===r){const c=Bu(e);for(;r<=s-o;o+=r)this.process(c,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){md(this),T2(e,this),this.finished=!0;const{buffer:n,view:i,blockLen:r,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(i,0),o=0);for(let d=o;d<r;d++)n[d]=0;nT(i,r-8,BigInt(this.length*8),s),this.process(i,0);const a=Bu(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const i=e.slice(0,n);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:i,length:r,finished:s,destroyed:o,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=o,r%n&&e.buffer.set(i),e}}const iT=(t,e,n)=>t&e^~t&n,rT=(t,e,n)=>t&e^t&n^e&n,sT=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vs=new Uint32Array(64);class oT extends H0{constructor(){super(64,32,8,!1),this.A=bs[0]|0,this.B=bs[1]|0,this.C=bs[2]|0,this.D=bs[3]|0,this.E=bs[4]|0,this.F=bs[5]|0,this.G=bs[6]|0,this.H=bs[7]|0}get(){const{A:e,B:n,C:i,D:r,E:s,F:o,G:a,H:c}=this;return[e,n,i,r,s,o,a,c]}set(e,n,i,r,s,o,a,c){this.A=e|0,this.B=n|0,this.C=i|0,this.D=r|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)vs[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=vs[d-15],f=vs[d-2],g=Ar(h,7)^Ar(h,18)^h>>>3,p=Ar(f,17)^Ar(f,19)^f>>>10;vs[d]=p+vs[d-7]+g+vs[d-16]|0}let{A:i,B:r,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ar(a,6)^Ar(a,11)^Ar(a,25),f=u+h+iT(a,c,l)+sT[d]+vs[d]|0,p=(Ar(i,2)^Ar(i,13)^Ar(i,22))+rT(i,r,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=r,r=i,i=f+p|0}i=i+this.A|0,r=r+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(i,r,s,o,a,c,l,u)}roundClean(){vs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const bd=j0(()=>new oT),[aT,cT]=(()=>ct.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),ks=new Uint32Array(80),Ss=new Uint32Array(80);class lT extends H0{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:i,Bl:r,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:g,Hh:p,Hl:w}=this;return[e,n,i,r,s,o,a,c,l,u,d,h,f,g,p,w]}set(e,n,i,r,s,o,a,c,l,u,d,h,f,g,p,w){this.Ah=e|0,this.Al=n|0,this.Bh=i|0,this.Bl=r|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=g|0,this.Hh=p|0,this.Hl=w|0}process(e,n){for(let T=0;T<16;T++,n+=4)ks[T]=e.getUint32(n),Ss[T]=e.getUint32(n+=4);for(let T=16;T<80;T++){const R=ks[T-15]|0,E=Ss[T-15]|0,D=ct.rotrSH(R,E,1)^ct.rotrSH(R,E,8)^ct.shrSH(R,E,7),B=ct.rotrSL(R,E,1)^ct.rotrSL(R,E,8)^ct.shrSL(R,E,7),$=ks[T-2]|0,Y=Ss[T-2]|0,z=ct.rotrSH($,Y,19)^ct.rotrBH($,Y,61)^ct.shrSH($,Y,6),H=ct.rotrSL($,Y,19)^ct.rotrBL($,Y,61)^ct.shrSL($,Y,6),ie=ct.add4L(B,H,Ss[T-7],Ss[T-16]),ke=ct.add4H(ie,D,z,ks[T-7],ks[T-16]);ks[T]=ke|0,Ss[T]=ie|0}let{Ah:i,Al:r,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:g,Gh:p,Gl:w,Hh:_,Hl:k}=this;for(let T=0;T<80;T++){const R=ct.rotrSH(d,h,14)^ct.rotrSH(d,h,18)^ct.rotrBH(d,h,41),E=ct.rotrSL(d,h,14)^ct.rotrSL(d,h,18)^ct.rotrBL(d,h,41),D=d&f^~d&p,B=h&g^~h&w,$=ct.add5L(k,E,B,cT[T],Ss[T]),Y=ct.add5H($,_,R,D,aT[T],ks[T]),z=$|0,H=ct.rotrSH(i,r,28)^ct.rotrBH(i,r,34)^ct.rotrBH(i,r,39),ie=ct.rotrSL(i,r,28)^ct.rotrBL(i,r,34)^ct.rotrBL(i,r,39),ke=i&s^i&a^s&a,ze=r&o^r&c^o&c;_=p|0,k=w|0,p=f|0,w=g|0,f=d|0,g=h|0,{h:d,l:h}=ct.add(l|0,u|0,Y|0,z|0),l=a|0,u=c|0,a=s|0,c=o|0,s=i|0,o=r|0;const se=ct.add3L(z,ie,ze);i=ct.add3H(se,Y,H,ke),r=se|0}({h:i,l:r}=ct.add(this.Ah|0,this.Al|0,i|0,r|0)),{h:s,l:o}=ct.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=ct.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ct.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ct.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:g}=ct.add(this.Fh|0,this.Fl|0,f|0,g|0),{h:p,l:w}=ct.add(this.Gh|0,this.Gl|0,p|0,w|0),{h:_,l:k}=ct.add(this.Hh|0,this.Hl|0,_|0,k|0),this.set(i,r,s,o,a,c,l,u,d,h,f,g,p,w,_,k)}roundClean(){ks.fill(0),Ss.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const bl=j0(()=>new lT),uT=t=>t[0]==="あいこくしん";function Q0(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function dT(t){const e=Q0(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}function hT(t){R0.bytes(t,16,20,24,28,32)}function fT(t,e=128){if(R0.number(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return mT(Qp(e/8),t)}const pT=t=>{const e=8-t.length/4;return new Uint8Array([bd(t)[0]>>e<<e])};function gT(t){if(!Array.isArray(t)||t.length!==2048||typeof t[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),au.utils.chain(au.utils.checksum(1,pT),au.utils.radix2(11,!0),au.utils.alphabet(t))}function mT(t,e){return hT(t),gT(e).encode(t).join(uT(e)?"　":" ")}const wT=t=>Q0(`mnemonic${t}`);function yT(t,e=""){return tT(bl,dT(t).nfkd,wT(e),{c:2048,dkLen:64})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const G0=BigInt(0),hh=BigInt(1),_T=BigInt(2),fh=t=>t instanceof Uint8Array,bT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ho(t){if(!fh(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=bT[t[n]];return e}function Y0(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function ig(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function nc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let i=0;i<n.length;i++){const r=i*2,s=t.slice(r,r+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[i]=o}return n}function qo(t){return ig(Ho(t))}function Ua(t){if(!fh(t))throw new Error("Uint8Array expected");return ig(Ho(Uint8Array.from(t).reverse()))}function ic(t,e){return nc(t.toString(16).padStart(e*2,"0"))}function Yc(t,e){return ic(t,e).reverse()}function vT(t){return nc(Y0(t))}function pn(t,e,n){let i;if(typeof e=="string")try{i=nc(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(fh(e))i=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const r=i.length;if(typeof n=="number"&&r!==n)throw new Error(`${t} expected ${n} bytes, got ${r}`);return i}function Qo(...t){const e=new Uint8Array(t.reduce((i,r)=>i+r.length,0));let n=0;return t.forEach(i=>{if(!fh(i))throw new Error("Uint8Array expected");e.set(i,n),n+=i.length}),e}function kT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ST(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function TT(t){let e;for(e=0;t>G0;t>>=hh,e+=1);return e}function AT(t,e){return t>>BigInt(e)&hh}const CT=(t,e,n)=>t|(n?hh:G0)<<BigInt(e),rg=t=>(_T<<BigInt(t-1))-hh,ef=t=>new Uint8Array(t),ew=t=>Uint8Array.from(t);function X0(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let i=ef(t),r=ef(t),s=0;const o=()=>{i.fill(1),r.fill(0),s=0},a=(...d)=>n(r,i,...d),c=(d=ef())=>{r=a(ew([0]),d),i=a(),d.length!==0&&(r=a(ew([1]),d),i=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){i=a();const f=i.slice();h.push(f),d+=i.length}return Qo(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const IT={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function pc(t,e,n={}){const i=(r,s,o)=>{const a=IT[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[r];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(r)}=${c} (${typeof c}), expected ${s}`)};for(const[r,s]of Object.entries(e))i(r,s,!1);for(const[r,s]of Object.entries(n))i(r,s,!0);return t}const ET=Object.freeze(Object.defineProperty({__proto__:null,bitGet:AT,bitLen:TT,bitMask:rg,bitSet:CT,bytesToHex:Ho,bytesToNumberBE:qo,bytesToNumberLE:Ua,concatBytes:Qo,createHmacDrbg:X0,ensureBytes:pn,equalBytes:kT,hexToBytes:nc,hexToNumber:ig,numberToBytesBE:ic,numberToBytesLE:Yc,numberToHexUnpadded:Y0,numberToVarBytesBE:vT,utf8ToBytes:ST,validateObject:pc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vn=BigInt(0),Ht=BigInt(1),Co=BigInt(2),xT=BigInt(3),$f=BigInt(4),tw=BigInt(5),nw=BigInt(8);BigInt(9);BigInt(16);function Wt(t,e){const n=t%e;return n>=vn?n:e+n}function MT(t,e,n){if(n<=vn||e<vn)throw new Error("Expected power/modulo > 0");if(n===Ht)return vn;let i=Ht;for(;e>vn;)e&Ht&&(i=i*t%n),t=t*t%n,e>>=Ht;return i}function Xt(t,e,n){let i=t;for(;e-- >vn;)i*=i,i%=n;return i}function zf(t,e){if(t===vn||e<=vn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Wt(t,e),i=e,r=vn,s=Ht;for(;n!==vn;){const a=i/n,c=i%n,l=r-s*a;i=n,n=c,r=s,s=l}if(i!==Ht)throw new Error("invert: does not exist");return Wt(r,e)}function NT(t){const e=(t-Ht)/Co;let n,i,r;for(n=t-Ht,i=0;n%Co===vn;n/=Co,i++);for(r=Co;r<t&&MT(r,e,t)!==t-Ht;r++);if(i===1){const o=(t+Ht)/$f;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+Ht)/Co;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=i,u=a.pow(a.mul(a.ONE,r),n),d=a.pow(c,s),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let p=a.sqr(h);f<l&&!a.eql(p,a.ONE);f++)p=a.sqr(p);const g=a.pow(u,Ht<<BigInt(l-f-1));u=a.sqr(g),d=a.mul(d,g),h=a.mul(h,u),l=f}return d}}function OT(t){if(t%$f===xT){const e=(t+Ht)/$f;return function(i,r){const s=i.pow(r,e);if(!i.eql(i.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%nw===tw){const e=(t-tw)/nw;return function(i,r){const s=i.mul(r,Co),o=i.pow(s,e),a=i.mul(r,o),c=i.mul(i.mul(a,Co),o),l=i.mul(a,i.sub(c,i.ONE));if(!i.eql(i.sqr(l),r))throw new Error("Cannot find square root");return l}}return NT(t)}const DT=(t,e)=>(Wt(t,e)&Ht)===Ht,jT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function RT(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=jT.reduce((i,r)=>(i[r]="function",i),e);return pc(t,n)}function BT(t,e,n){if(n<vn)throw new Error("Expected power > 0");if(n===vn)return t.ONE;if(n===Ht)return e;let i=t.ONE,r=e;for(;n>vn;)n&Ht&&(i=t.mul(i,r)),r=t.sqr(r),n>>=Ht;return i}function PT(t,e){const n=new Array(e.length),i=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),r=t.inv(i);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),r),n}function J0(t,e){const n=e!==void 0?e:t.toString(2).length,i=Math.ceil(n/8);return{nBitLength:n,nByteLength:i}}function e_(t,e,n=!1,i={}){if(t<=vn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:r,nByteLength:s}=J0(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=OT(t),a=Object.freeze({ORDER:t,BITS:r,BYTES:s,MASK:rg(r),ZERO:vn,ONE:Ht,create:c=>Wt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return vn<=c&&c<t},is0:c=>c===vn,isOdd:c=>(c&Ht)===Ht,neg:c=>Wt(-c,t),eql:(c,l)=>c===l,sqr:c=>Wt(c*c,t),add:(c,l)=>Wt(c+l,t),sub:(c,l)=>Wt(c-l,t),mul:(c,l)=>Wt(c*l,t),pow:(c,l)=>BT(a,c,l),div:(c,l)=>Wt(c*zf(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>zf(c,t),sqrt:i.sqrt||(c=>o(a,c)),invertBatch:c=>PT(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?Yc(c,s):ic(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?Ua(c):qo(c)}});return Object.freeze(a)}function FT(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n}function t_(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function n_(t){const e=t_(t);return e+Math.ceil(e/2)}function UT(t,e,n=!1){const i=t.length,r=t_(e),s=n_(e);if(i<16||i<s||i>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${i}`);const o=n?qo(t):Ua(t),a=Wt(o,e-Ht)+Ht;return n?Yc(a,r):ic(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const LT=BigInt(0),tf=BigInt(1);function i_(t,e){const n=(r,s)=>{const o=s.negate();return r?o:s},i=r=>{const s=Math.ceil(e/r)+1,o=2**(r-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(r,s){let o=t.ZERO,a=r;for(;s>LT;)s&tf&&(o=o.add(a)),a=a.double(),s>>=tf;return o},precomputeWindow(r,s){const{windows:o,windowSize:a}=i(s),c=[];let l=r,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(r,s,o){const{windows:a,windowSize:c}=i(r);let l=t.ZERO,u=t.BASE;const d=BigInt(2**r-1),h=2**r,f=BigInt(r);for(let g=0;g<a;g++){const p=g*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=tf);const _=p,k=p+Math.abs(w)-1,T=g%2!==0,R=w<0;w===0?u=u.add(n(T,s[_])):l=l.add(n(R,s[k]))}return{p:l,f:u}},wNAFCached(r,s,o,a){const c=r._WINDOW_SIZE||1;let l=s.get(r);return l||(l=this.precomputeWindow(r,c),c!==1&&s.set(r,a(l))),this.wNAF(c,l,o)}}}function sg(t){return RT(t.Fp),pc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...J0(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $T(t){const e=sg(t);pc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:i,a:r}=e;if(n){if(!i.eql(r,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:zT,hexToBytes:qT}=ET,Oo={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Oo;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],i=t.subarray(2,n+2);if(!n||i.length!==n)throw new e("Invalid signature integer: wrong length");if(i[0]&128)throw new e("Invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:zT(i),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Oo,n=typeof t=="string"?qT(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let i=n.length;if(i<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==i-2)throw new e("Invalid signature: incorrect length");const{d:r,l:s}=Oo._parseInt(n.subarray(2)),{d:o,l:a}=Oo._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},i=e(n(t.s)),r=e(n(t.r)),s=i.length/2,o=r.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${r}02${a}${i}`}},as=BigInt(0),zi=BigInt(1);BigInt(2);const iw=BigInt(3);BigInt(4);function VT(t){const e=$T(t),{Fp:n}=e,i=e.toBytes||((g,p,w)=>{const _=p.toAffine();return Qo(Uint8Array.from([4]),n.toBytes(_.x),n.toBytes(_.y))}),r=e.fromBytes||(g=>{const p=g.subarray(1),w=n.fromBytes(p.subarray(0,n.BYTES)),_=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:w,y:_}});function s(g){const{a:p,b:w}=e,_=n.sqr(g),k=n.mul(_,g);return n.add(n.add(k,n.mul(g,p)),w)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&as<g&&g<e.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){const{allowedPrivateKeyLengths:p,nByteLength:w,wrapPrivateKey:_,n:k}=e;if(p&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=Ho(g)),typeof g!="string"||!p.includes(g.length))throw new Error("Invalid key");g=g.padStart(w*2,"0")}let T;try{T=typeof g=="bigint"?g:qo(pn("private key",g,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof g}`)}return _&&(T=Wt(T,k)),a(T),T}const l=new Map;function u(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(p,w,_){if(this.px=p,this.py=w,this.pz=_,p==null||!n.isValid(p))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(_==null||!n.isValid(_))throw new Error("z required")}static fromAffine(p){const{x:w,y:_}=p||{};if(!p||!n.isValid(w)||!n.isValid(_))throw new Error("invalid affine point");if(p instanceof d)throw new Error("projective point not allowed");const k=T=>n.eql(T,n.ZERO);return k(w)&&k(_)?d.ZERO:new d(w,_,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const w=n.invertBatch(p.map(_=>_.pz));return p.map((_,k)=>_.toAffine(w[k])).map(d.fromAffine)}static fromHex(p){const w=d.fromAffine(r(pn("pointHex",p)));return w.assertValidity(),w}static fromPrivateKey(p){return d.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:p,y:w}=this.toAffine();if(!n.isValid(p)||!n.isValid(w))throw new Error("bad point: x or y not FE");const _=n.sqr(w),k=s(p);if(!n.eql(_,k))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:w,py:_,pz:k}=this,{px:T,py:R,pz:E}=p,D=n.eql(n.mul(w,E),n.mul(T,k)),B=n.eql(n.mul(_,E),n.mul(R,k));return D&&B}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:w}=e,_=n.mul(w,iw),{px:k,py:T,pz:R}=this;let E=n.ZERO,D=n.ZERO,B=n.ZERO,$=n.mul(k,k),Y=n.mul(T,T),z=n.mul(R,R),H=n.mul(k,T);return H=n.add(H,H),B=n.mul(k,R),B=n.add(B,B),E=n.mul(p,B),D=n.mul(_,z),D=n.add(E,D),E=n.sub(Y,D),D=n.add(Y,D),D=n.mul(E,D),E=n.mul(H,E),B=n.mul(_,B),z=n.mul(p,z),H=n.sub($,z),H=n.mul(p,H),H=n.add(H,B),B=n.add($,$),$=n.add(B,$),$=n.add($,z),$=n.mul($,H),D=n.add(D,$),z=n.mul(T,R),z=n.add(z,z),$=n.mul(z,H),E=n.sub(E,$),B=n.mul(z,Y),B=n.add(B,B),B=n.add(B,B),new d(E,D,B)}add(p){u(p);const{px:w,py:_,pz:k}=this,{px:T,py:R,pz:E}=p;let D=n.ZERO,B=n.ZERO,$=n.ZERO;const Y=e.a,z=n.mul(e.b,iw);let H=n.mul(w,T),ie=n.mul(_,R),ke=n.mul(k,E),ze=n.add(w,_),se=n.add(T,R);ze=n.mul(ze,se),se=n.add(H,ie),ze=n.sub(ze,se),se=n.add(w,k);let le=n.add(T,E);return se=n.mul(se,le),le=n.add(H,ke),se=n.sub(se,le),le=n.add(_,k),D=n.add(R,E),le=n.mul(le,D),D=n.add(ie,ke),le=n.sub(le,D),$=n.mul(Y,se),D=n.mul(z,ke),$=n.add(D,$),D=n.sub(ie,$),$=n.add(ie,$),B=n.mul(D,$),ie=n.add(H,H),ie=n.add(ie,H),ke=n.mul(Y,ke),se=n.mul(z,se),ie=n.add(ie,ke),ke=n.sub(H,ke),ke=n.mul(Y,ke),se=n.add(se,ke),H=n.mul(ie,se),B=n.add(B,H),H=n.mul(le,se),D=n.mul(ze,D),D=n.sub(D,H),H=n.mul(ze,ie),$=n.mul(le,$),$=n.add($,H),new d(D,B,$)}subtract(p){return this.add(p.negate())}is0(){return this.equals(d.ZERO)}wNAF(p){return f.wNAFCached(this,l,p,w=>{const _=n.invertBatch(w.map(k=>k.pz));return w.map((k,T)=>k.toAffine(_[T])).map(d.fromAffine)})}multiplyUnsafe(p){const w=d.ZERO;if(p===as)return w;if(a(p),p===zi)return this;const{endo:_}=e;if(!_)return f.unsafeLadder(this,p);let{k1neg:k,k1:T,k2neg:R,k2:E}=_.splitScalar(p),D=w,B=w,$=this;for(;T>as||E>as;)T&zi&&(D=D.add($)),E&zi&&(B=B.add($)),$=$.double(),T>>=zi,E>>=zi;return k&&(D=D.negate()),R&&(B=B.negate()),B=new d(n.mul(B.px,_.beta),B.py,B.pz),D.add(B)}multiply(p){a(p);let w=p,_,k;const{endo:T}=e;if(T){const{k1neg:R,k1:E,k2neg:D,k2:B}=T.splitScalar(w);let{p:$,f:Y}=this.wNAF(E),{p:z,f:H}=this.wNAF(B);$=f.constTimeNegate(R,$),z=f.constTimeNegate(D,z),z=new d(n.mul(z.px,T.beta),z.py,z.pz),_=$.add(z),k=Y.add(H)}else{const{p:R,f:E}=this.wNAF(w);_=R,k=E}return d.normalizeZ([_,k])[0]}multiplyAndAddUnsafe(p,w,_){const k=d.BASE,T=(E,D)=>D===as||D===zi||!E.equals(k)?E.multiplyUnsafe(D):E.multiply(D),R=T(this,w).add(T(p,_));return R.is0()?void 0:R}toAffine(p){const{px:w,py:_,pz:k}=this,T=this.is0();p==null&&(p=T?n.ONE:n.inv(k));const R=n.mul(w,p),E=n.mul(_,p),D=n.mul(k,p);if(T)return{x:n.ZERO,y:n.ZERO};if(!n.eql(D,n.ONE))throw new Error("invZ was invalid");return{x:R,y:E}}isTorsionFree(){const{h:p,isTorsionFree:w}=e;if(p===zi)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:w}=e;return p===zi?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),i(d,this,p)}toHex(p=!0){return Ho(this.toRawBytes(p))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=i_(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function WT(t){const e=sg(t);return pc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function KT(t){const e=WT(t),{Fp:n,n:i}=e,r=n.BYTES+1,s=2*n.BYTES+1;function o(se){return as<se&&se<n.ORDER}function a(se){return Wt(se,i)}function c(se){return zf(se,i)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=VT({...e,toBytes(se,le,Ne){const he=le.toAffine(),J=n.toBytes(he.x),ve=Qo;return Ne?ve(Uint8Array.from([le.hasEvenY()?2:3]),J):ve(Uint8Array.from([4]),J,n.toBytes(he.y))},fromBytes(se){const le=se.length,Ne=se[0],he=se.subarray(1);if(le===r&&(Ne===2||Ne===3)){const J=qo(he);if(!o(J))throw new Error("Point is not on curve");const ve=d(J);let ye=n.sqrt(ve);const ge=(ye&zi)===zi;return(Ne&1)===1!==ge&&(ye=n.neg(ye)),{x:J,y:ye}}else if(le===s&&Ne===4){const J=n.fromBytes(he.subarray(0,n.BYTES)),ve=n.fromBytes(he.subarray(n.BYTES,2*n.BYTES));return{x:J,y:ve}}else throw new Error(`Point of length ${le} was invalid. Expected ${r} compressed bytes or ${s} uncompressed bytes`)}}),f=se=>Ho(ic(se,e.nByteLength));function g(se){const le=i>>zi;return se>le}function p(se){return g(se)?a(-se):se}const w=(se,le,Ne)=>qo(se.slice(le,Ne));class _{constructor(le,Ne,he){this.r=le,this.s=Ne,this.recovery=he,this.assertValidity()}static fromCompact(le){const Ne=e.nByteLength;return le=pn("compactSignature",le,Ne*2),new _(w(le,0,Ne),w(le,Ne,2*Ne))}static fromDER(le){const{r:Ne,s:he}=Oo.toSig(pn("DER",le));return new _(Ne,he)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(le){return new _(this.r,this.s,le)}recoverPublicKey(le){const{r:Ne,s:he,recovery:J}=this,ve=B(pn("msgHash",le));if(J==null||![0,1,2,3].includes(J))throw new Error("recovery id invalid");const ye=J===2||J===3?Ne+e.n:Ne;if(ye>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ge=J&1?"03":"02",qe=l.fromHex(ge+f(ye)),ee=c(ye),b=a(-ve*ee),j=a(he*ee),V=l.BASE.multiplyAndAddUnsafe(qe,b,j);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return nc(this.toDERHex())}toDERHex(){return Oo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return nc(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const k={isValidPrivateKey(se){try{return u(se),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const se=n_(e.n);return UT(e.randomBytes(se),e.n)},precompute(se=8,le=l.BASE){return le._setWindowSize(se),le.multiply(BigInt(3)),le}};function T(se,le=!0){return l.fromPrivateKey(se).toRawBytes(le)}function R(se){const le=se instanceof Uint8Array,Ne=typeof se=="string",he=(le||Ne)&&se.length;return le?he===r||he===s:Ne?he===2*r||he===2*s:se instanceof l}function E(se,le,Ne=!0){if(R(se))throw new Error("first arg must be private key");if(!R(le))throw new Error("second arg must be public key");return l.fromHex(le).multiply(u(se)).toRawBytes(Ne)}const D=e.bits2int||function(se){const le=qo(se),Ne=se.length*8-e.nBitLength;return Ne>0?le>>BigInt(Ne):le},B=e.bits2int_modN||function(se){return a(D(se))},$=rg(e.nBitLength);function Y(se){if(typeof se!="bigint")throw new Error("bigint expected");if(!(as<=se&&se<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ic(se,e.nByteLength)}function z(se,le,Ne=H){if(["recovered","canonical"].some(re=>re in Ne))throw new Error("sign() legacy options not supported");const{hash:he,randomBytes:J}=e;let{lowS:ve,prehash:ye,extraEntropy:ge}=Ne;ve==null&&(ve=!0),se=pn("msgHash",se),ye&&(se=pn("prehashed msgHash",he(se)));const qe=B(se),ee=u(le),b=[Y(ee),Y(qe)];if(ge!=null){const re=ge===!0?J(n.BYTES):ge;b.push(pn("extraEntropy",re))}const j=Qo(...b),V=qe;function Q(re){const Se=D(re);if(!h(Se))return;const Me=c(Se),Ce=l.BASE.multiply(Se).toAffine(),Ve=a(Ce.x);if(Ve===as)return;const De=a(Me*a(V+Ve*ee));if(De===as)return;let mt=(Ce.x===Ve?0:2)|Number(Ce.y&zi),qn=De;return ve&&g(De)&&(qn=p(De),mt^=1),new _(Ve,qn,mt)}return{seed:j,k2sig:Q}}const H={lowS:e.lowS,prehash:!1},ie={lowS:e.lowS,prehash:!1};function ke(se,le,Ne=H){const{seed:he,k2sig:J}=z(se,le,Ne),ve=e;return X0(ve.hash.outputLen,ve.nByteLength,ve.hmac)(he,J)}l.BASE._setWindowSize(8);function ze(se,le,Ne,he=ie){var Ce;const J=se;if(le=pn("msgHash",le),Ne=pn("publicKey",Ne),"strict"in he)throw new Error("options.strict was renamed to lowS");const{lowS:ve,prehash:ye}=he;let ge,qe;try{if(typeof J=="string"||J instanceof Uint8Array)try{ge=_.fromDER(J)}catch(Ve){if(!(Ve instanceof Oo.Err))throw Ve;ge=_.fromCompact(J)}else if(typeof J=="object"&&typeof J.r=="bigint"&&typeof J.s=="bigint"){const{r:Ve,s:De}=J;ge=new _(Ve,De)}else throw new Error("PARSE");qe=l.fromHex(Ne)}catch(Ve){if(Ve.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ve&&ge.hasHighS())return!1;ye&&(le=e.hash(le));const{r:ee,s:b}=ge,j=B(le),V=c(b),Q=a(j*V),re=a(ee*V),Se=(Ce=l.BASE.multiplyAndAddUnsafe(qe,Q,re))==null?void 0:Ce.toAffine();return Se?a(Se.x)===ee:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:E,sign:ke,verify:ze,ProjectivePoint:l,Signature:_,utils:k}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ZT(t){return{hash:t,hmac:(e,...n)=>_l(t,e,B0(...n)),randomBytes:Qp}}function HT(t,e){const n=i=>KT({...t,...ZT(i)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const r_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),rw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),QT=BigInt(1),qf=BigInt(2),sw=(t,e)=>(t+e/qf)/e;function GT(t){const e=r_,n=BigInt(3),i=BigInt(6),r=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Xt(u,n,e)*u%e,h=Xt(d,n,e)*u%e,f=Xt(h,qf,e)*l%e,g=Xt(f,r,e)*f%e,p=Xt(g,s,e)*g%e,w=Xt(p,a,e)*p%e,_=Xt(w,c,e)*w%e,k=Xt(_,a,e)*p%e,T=Xt(k,n,e)*u%e,R=Xt(T,o,e)*g%e,E=Xt(R,i,e)*l%e,D=Xt(E,qf,e);if(!Vf.eql(Vf.sqr(D),t))throw new Error("Cannot find square root");return D}const Vf=e_(r_,void 0,void 0,{sqrt:GT}),og=HT({a:BigInt(0),b:BigInt(7),Fp:Vf,n:rw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=rw,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-QT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=sw(s*t,e),c=sw(-i*t,e);let l=Wt(t-a*n-c*r,e),u=Wt(-a*i-c*s,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},bd);BigInt(0);og.ProjectivePoint;var ow,nf,rf=0,sf=0;function YT(t,e,n){var i=e&&n||0,r=e||new Array(16);t=t||{};var s=t.node||ow,o=t.clockseq!==void 0?t.clockseq:nf;if(s==null||o==null){var a=t.random||(t.rng||z2)();s==null&&(s=ow=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=nf=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:sf+1,u=c-rf+(l-sf)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>rf)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");rf=c,sf=l,nf=o,c+=122192928e5;var d=((c&268435455)*1e4+l)%4294967296;r[i++]=d>>>24&255,r[i++]=d>>>16&255,r[i++]=d>>>8&255,r[i++]=d&255;var h=c/4294967296*1e4&268435455;r[i++]=h>>>8&255,r[i++]=h&255,r[i++]=h>>>24&15|16,r[i++]=h>>>16&255,r[i++]=o>>>8|128,r[i++]=o&255;for(var f=0;f<6;++f)r[i+f]=s[f];return e||Xp(r)}function s_(t){if(!Jp(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function XT(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var JT="6ba7b810-9dad-11d1-80b4-00c04fd430c8",eA="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function o_(t,e,n){function i(r,s,o,a){if(typeof r=="string"&&(r=XT(r)),typeof s=="string"&&(s=s_(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+r.length);if(c.set(s),c.set(r,s.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return Xp(c)}try{i.name=t}catch{}return i.DNS=JT,i.URL=eA,i}function tA(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return nA(iA(rA(t),t.length*8))}function nA(t){for(var e=[],n=t.length*32,i="0123456789abcdef",r=0;r<n;r+=8){var s=t[r>>5]>>>r%32&255,o=parseInt(i.charAt(s>>>4&15)+i.charAt(s&15),16);e.push(o)}return e}function a_(t){return(t+64>>>9<<4)+14+1}function iA(t,e){t[e>>5]|=128<<e%32,t[a_(e)-1]=e;for(var n=1732584193,i=-271733879,r=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,c=i,l=r,u=s;n=On(n,i,r,s,t[o],7,-680876936),s=On(s,n,i,r,t[o+1],12,-389564586),r=On(r,s,n,i,t[o+2],17,606105819),i=On(i,r,s,n,t[o+3],22,-1044525330),n=On(n,i,r,s,t[o+4],7,-176418897),s=On(s,n,i,r,t[o+5],12,1200080426),r=On(r,s,n,i,t[o+6],17,-1473231341),i=On(i,r,s,n,t[o+7],22,-45705983),n=On(n,i,r,s,t[o+8],7,1770035416),s=On(s,n,i,r,t[o+9],12,-1958414417),r=On(r,s,n,i,t[o+10],17,-42063),i=On(i,r,s,n,t[o+11],22,-1990404162),n=On(n,i,r,s,t[o+12],7,1804603682),s=On(s,n,i,r,t[o+13],12,-40341101),r=On(r,s,n,i,t[o+14],17,-1502002290),i=On(i,r,s,n,t[o+15],22,1236535329),n=Dn(n,i,r,s,t[o+1],5,-165796510),s=Dn(s,n,i,r,t[o+6],9,-1069501632),r=Dn(r,s,n,i,t[o+11],14,643717713),i=Dn(i,r,s,n,t[o],20,-373897302),n=Dn(n,i,r,s,t[o+5],5,-701558691),s=Dn(s,n,i,r,t[o+10],9,38016083),r=Dn(r,s,n,i,t[o+15],14,-660478335),i=Dn(i,r,s,n,t[o+4],20,-405537848),n=Dn(n,i,r,s,t[o+9],5,568446438),s=Dn(s,n,i,r,t[o+14],9,-1019803690),r=Dn(r,s,n,i,t[o+3],14,-187363961),i=Dn(i,r,s,n,t[o+8],20,1163531501),n=Dn(n,i,r,s,t[o+13],5,-1444681467),s=Dn(s,n,i,r,t[o+2],9,-51403784),r=Dn(r,s,n,i,t[o+7],14,1735328473),i=Dn(i,r,s,n,t[o+12],20,-1926607734),n=jn(n,i,r,s,t[o+5],4,-378558),s=jn(s,n,i,r,t[o+8],11,-2022574463),r=jn(r,s,n,i,t[o+11],16,1839030562),i=jn(i,r,s,n,t[o+14],23,-35309556),n=jn(n,i,r,s,t[o+1],4,-1530992060),s=jn(s,n,i,r,t[o+4],11,1272893353),r=jn(r,s,n,i,t[o+7],16,-155497632),i=jn(i,r,s,n,t[o+10],23,-1094730640),n=jn(n,i,r,s,t[o+13],4,681279174),s=jn(s,n,i,r,t[o],11,-358537222),r=jn(r,s,n,i,t[o+3],16,-722521979),i=jn(i,r,s,n,t[o+6],23,76029189),n=jn(n,i,r,s,t[o+9],4,-640364487),s=jn(s,n,i,r,t[o+12],11,-421815835),r=jn(r,s,n,i,t[o+15],16,530742520),i=jn(i,r,s,n,t[o+2],23,-995338651),n=Rn(n,i,r,s,t[o],6,-198630844),s=Rn(s,n,i,r,t[o+7],10,1126891415),r=Rn(r,s,n,i,t[o+14],15,-1416354905),i=Rn(i,r,s,n,t[o+5],21,-57434055),n=Rn(n,i,r,s,t[o+12],6,1700485571),s=Rn(s,n,i,r,t[o+3],10,-1894986606),r=Rn(r,s,n,i,t[o+10],15,-1051523),i=Rn(i,r,s,n,t[o+1],21,-2054922799),n=Rn(n,i,r,s,t[o+8],6,1873313359),s=Rn(s,n,i,r,t[o+15],10,-30611744),r=Rn(r,s,n,i,t[o+6],15,-1560198380),i=Rn(i,r,s,n,t[o+13],21,1309151649),n=Rn(n,i,r,s,t[o+4],6,-145523070),s=Rn(s,n,i,r,t[o+11],10,-1120210379),r=Rn(r,s,n,i,t[o+2],15,718787259),i=Rn(i,r,s,n,t[o+9],21,-343485551),n=Ks(n,a),i=Ks(i,c),r=Ks(r,l),s=Ks(s,u)}return[n,i,r,s]}function rA(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(a_(e)),i=0;i<e;i+=8)n[i>>5]|=(t[i/8]&255)<<i%32;return n}function Ks(t,e){var n=(t&65535)+(e&65535),i=(t>>16)+(e>>16)+(n>>16);return i<<16|n&65535}function sA(t,e){return t<<e|t>>>32-e}function ph(t,e,n,i,r,s){return Ks(sA(Ks(Ks(e,t),Ks(i,s)),r),n)}function On(t,e,n,i,r,s,o){return ph(e&n|~e&i,t,e,r,s,o)}function Dn(t,e,n,i,r,s,o){return ph(e&i|n&~i,t,e,r,s,o)}function jn(t,e,n,i,r,s,o){return ph(e^n^i,t,e,r,s,o)}function Rn(t,e,n,i,r,s,o){return ph(n^(e|~i),t,e,r,s,o)}var oA=o_("v3",48,tA);const aA=oA;function cA(t,e,n,i){switch(t){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function of(t,e){return t<<e|t>>>32-e}function lA(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var i=unescape(encodeURIComponent(t));t=[];for(var r=0;r<i.length;++r)t.push(i.charCodeAt(r))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[c*64+u*4]<<24|t[c*64+u*4+1]<<16|t[c*64+u*4+2]<<8|t[c*64+u*4+3];a[c]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var g=16;g<80;++g)h[g]=of(h[g-3]^h[g-8]^h[g-14]^h[g-16],1);for(var p=n[0],w=n[1],_=n[2],k=n[3],T=n[4],R=0;R<80;++R){var E=Math.floor(R/20),D=of(p,5)+cA(E,w,_,k)+T+e[E]+h[R]>>>0;T=k,k=_,_=of(w,30)>>>0,w=p,p=D}n[0]=n[0]+p>>>0,n[1]=n[1]+w>>>0,n[2]=n[2]+_>>>0,n[3]=n[3]+k>>>0,n[4]=n[4]+T>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var uA=o_("v5",80,lA);const dA=uA,hA="00000000-0000-0000-0000-000000000000";function fA(t){if(!Jp(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const pA=Object.freeze(Object.defineProperty({__proto__:null,NIL:hA,parse:s_,stringify:Xp,v1:YT,v3:aA,v4:q2,v5:dA,validate:Jp,version:fA},Symbol.toStringTag,{value:"Module"})),gA={setup(){return{}}};const mA={class:"webLoading-container"},wA=x0('<div class="spot" style="--index:0;" data-v-cb831a29></div><div class="spot" style="--index:1;" data-v-cb831a29></div><div class="spot" style="--index:2;" data-v-cb831a29></div><div class="spot" style="--index:3;" data-v-cb831a29></div><div class="spot" style="--index:4;" data-v-cb831a29></div>',5),yA=[wA];function _A(t,e,n,i,r,s){return P(),U("div",mA,yA)}const bA=yn(gA,[["render",_A],["__scopeId","data-v-cb831a29"]]),vA=Sn({setup(){const t=on(),e=Ie(()=>t);Ie(()=>en[e.value.chainName]);const n=_e(0),i=_e(0),r=_e(0),s=_e(0),o=_e(""),a=_e("--");M0(()=>{if(!ls(e.value.statsData||{})&&e.value.chainName){const l=e.value.chainName=="Sui"?e.value.statsData.vol_in_usd_24h:e.value.statsData.vol_in_usd_24h_sum_v1;e.value.chainName=="Sui"?e.value.statsData.tvl_in_usd:e.value.statsData.tvl_in_usd_sum_v1,n.value=l,o.value=zo(l,2),i.value=e.value.statsData.vol_in_usd,r.value=e.value.statsData.pure_tvl_in_usd,s.value=e.value.statsData.tx_num}});const c=_e({day:"",month:"",year:"",current:""});return{checkNullObj:ls,idoPurchaseSummary:a,store:e,addCommom:zo,vol_in_usd_24h:n,vol_in_usd:i,tvl_in_usd:r,tx_num:s,volTime:c,TradingVolume:o}}}),kA=""+globalThis.__publicAssetsURL("sui-image/img-Total-Value-Locked@2x.png"),SA=""+globalThis.__publicAssetsURL("sui-image/img-Cumulative-Volume@2x.png");const gh=t=>(di("data-v-22e8edf1"),t=t(),hi(),t),TA={class:"upgrade-echarts-container"},AA={class:"echarts-data"},CA=gh(()=>S("div",{class:"title"},"Concentrated Pools",-1)),IA={class:"item-container"},EA={class:"item totalValueLocked-item"},xA=gh(()=>S("img",{src:kA,alt:""},null,-1)),MA={class:"left"},NA={key:1},OA={class:"item cumulativeVolume-item"},DA=gh(()=>S("img",{src:SA,alt:""},null,-1)),jA={class:"left"},RA={key:1},BA=gh(()=>S("div",{class:"h5-title"},"Concentrated Pools",-1));function PA(t,e,n,i,r,s){const o=h2,a=b2;return P(),U("div",TA,[S("div",AA,[CA,S("div",IA,[S("div",EA,[xA,S("div",MA,[("checkNullObj"in t?t.checkNullObj:et(ls))(t.store.statsData||{})?(P(),xt(o,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(P(),U("p",NA,"$"+fe(("addCommom"in t?t.addCommom:et(zo))(t.tvl_in_usd,2)),1)),S("span",null,fe(t.$t("common.totalValueLocked")),1)])]),S("div",OA,[DA,S("div",jA,[("checkNullObj"in t?t.checkNullObj:et(ls))(t.store.statsData||{})?(P(),xt(o,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(P(),U("p",RA,"$"+fe(("addCommom"in t?t.addCommom:et(zo))(t.vol_in_usd,2)),1)),S("span",null,fe(t.$t("common.cumulativeVolume")),1)])])])]),Ft(a),BA])}const FA=yn(vA,[["render",PA],["__scopeId","data-v-22e8edf1"]]),UA=Sn({components:{Modal:vr},setup(){const{t,locale:e}=Ko(),n=_e(!1),i=dh(),r=on(),s=on(),o=Ie(()=>s),a=z=>{const H=z.address||`${en.Aptos.faucetObjectId}::coin::${z.name}`;return i.tokensObj&&i.tokensObj[H]?i.tokensObj[H].logoURI:""},c=Ie(()=>o.value.chainName!=="Aptos"?B2:[{symbol:"USDT",name:"CetusUSDT",num:"200",amount:"200000000"},{symbol:"USDC",name:"CetusUSDC",num:"200",amount:"200000000"},{symbol:"ETH",name:"CetusETH",num:"0.1",amount:"100000000"},{symbol:"BTC",name:"CetusBTC",num:"0.01",amount:"10000000"}]),l=Ie(()=>Object.fromEntries(c.value.map(z=>[z.symbol,z]))),{$notify:u}=gl(),d=Ni(),h=Ie(()=>d),{setIsShowSuccess:f,setIsShowRejected:g,setIsShowWaiting:p,setTransactionDesc:w,setTransactionTxid:_}=r,k=_e(!1),T=_e(!1),R=_e(""),E=async z=>{const H=qc(o.value.chainName);if(!h.value.connected)h.value.setIsShowWalletModal(!0);else{T.value=!0,_(""),w(""),p(!0),R.value=z.symbol;try{const ie=H.mintCoin(z);let ke;if(o.value.chainName==="Aptos")ke=await h.value.currentWallet.signAndSubmitTransaction(ie);else{const ze=await H.signAndExecuteTransactionBlock(h.value.currentWallet,ie);ke=H.handleTx(ze)}if(ke){k.value=!1,_(ke.hash),p(!1),f(!0);const ze={title:"Request Coins",desc:"",hash:ke.hash,icon:"icon-icon-Increased",tit:"Request Coins",tokenInfo:{tokena:R.value,numa:`+ ${l.value[R.value].num}`,logoa:i.tokensObj&&i.tokensObj[z.address].logoURI},text:""};o.value.chainName!=="Aptos"&&(ze.res=ke.res),H.showTransitionPending(ze),await H.watchTransaction(ze)&&setTimeout(()=>{H.getAccount(h.value.address)},1e3)}else p(!1),u.error({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),duration:4.5,message:je("div",{class:"notification-title"},[je("span",{innerHTML:"Request Coins Failed"},null)]),description:t("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"});T.value=!1}catch(ie){T.value=!1,p(!1),console.log("mint coin error###",ie),u.error({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:je("div",{class:"notification-title"},[je("span",{innerHTML:"Request Coins Failed"},null)]),duration:4.5,description:t("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"})}}};_e(0),_e(0);const D=_e("--"),B=_e("--"),$=_e("--");M0(async()=>{h.value.address&&o.value.chainName!=="Aptos"&&(k.value=!0)});const Y=_e("0");return{t,storeCounter:o,wallet:h,importIcon:Et,list:c,requestError:n,start:k,hour:D,min:B,sec:$,loading:T,aptosBalance:Y,toMintCoin:E,currentCoin:R,getCoinIcon:a}}}),LA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAFVBMVEVHcEz///////////////////////+3ygHaAAAABnRSTlMAR23aI5H0hshDAAAAIElEQVQoz2NggII0AQZUMCpAsUCoAwP1gTFBa5WoaC0ASoUK6Z2VFk8AAAAASUVORK5CYII=",c_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABVFJREFUWEft11tsFFUYB/D/N7u0UNqZqQaDISGiFCgQUgOCoFx2Zw0mQgwk4gMmQCIaeLCztmirgaxALMhlZ02EKCRg1AcxgRgwAd3pUhAQhVgJWKV4CQkRg9iZaS3tdvd8ZhZKEHrZWwMP7tPs7jnf95t/Zk7OIdzjH7rHfcgbsDrWOrFLiI0EkFRA+taZ8vl83HxegKEYD7aE3cSMh1wUEX5XJaU85KOOXJF5Aer1Vi0LvA3g+xugR0nCG4ZfrbvrwNojrcPa48kLAGQij+aCmJMmAKeowDO6blbJlVyQOSeom/Y2Zl4B0IFIQJnvYiqj9n6A5xHRdkNTVt41oN7QWo6EOJMCeKVJxuySJveyt9+zgeaUoB61DzD4mZ6S6k6WQF8YAWVeNrjUC5ftRN1s9ff1rN3+bBpaSX02vbIChpgly7RPM1AhEWrDmrqhp+ZB06oRjDoCGlVNmRwiEpkiswLqprOUWewCcLHUo4x117vqY60PdHWIGoD/jGjqRhfiro8tSftnACOJpGWGJu8ecGDoFBdZtn2eGSPIQy8YPuUTt2lVzBmXSIomAjUZAWV8N0SP2Ys5yR8T4ZKqKGNCU6g9E2TGCer19moWvJZAp8KaPJWIuC8gM1PQdL5l8BSSaI3hV9YNGHBVrG14XCSawSgGeWZHtJIj3c16SzC1Lpqts8DJBhDaCiRv2SZf8eV0kRklqJvWDma8CMK+iKYuvLVJX8DrSGsvGAuIsNPQ1OV5B6Z2K0nRCIIo8GLCptlKcybAVQ12WTyBc2BIgzxSxWZfydl0kGknqEftgwyeK4HeDQeUytuL95egOz4YtSMC/AqBDhkB5em8ASvr7bkQfJAI1pBiaXTdNPlqNsDak87919rEBWaokOjpiF851B+y3wT3MHuO1duNYEyUIFWHA/KWnoqmk+D1FJ0qAbEZhLNP+JWKRUTJvpD9AitNZzlYfADgt9IHlXGhCRTPBRg6xwUtf9g/ARgFkl6KaPKOrIGhGBe3CKcZzMMlCc+H/eqe3oqlm2AqxXprkRD4FESXSyW5LOSjtt7q9pmgHrXXMng1gU4YAWVGX3eaCdCto0ft4wyeTqB1RkBZkzEwaLaPEBx3Dz5F5JVmGHPkE3kFHnamc0IcB9AuUcGYsFZ0qaf6vSaoR+3dDF4CwmcRTV3U39uWaYI3Fu89YDxHoA+NgLI0baAea6tAMnkaQIIKuTw8U/11IIDBo9bD3EnuLtwLj2ey4StuvL1PjwnqpmUyww/CloimVveHc//PJsEbKW4Go4oI9Yampg5dt37uAL4ac+Ylk2I/gf6GR37E8JGVDrDmqFXaEaclAK4amvJROnNSL0uMVSSdXxh8n8cjzd/qkw/0CgzF2GslnTMMLpdAejigRNJtlMu4YNSuFGDD3UuqHnlSyEeJ7nr/SVA3rRXM2AZQ83hVnvDyFOpKt3HQtKcy4z13/K37xHTmv3+KB/1oOecALiPCSkNTt98BDH3Dcss/zgUwD5NIWhjW5H3pFO8eUxW1nkoAX7rfSzXFk+n5I2g6CwSLvSC6UjpUHh16nBy31s0EK02nDixqiOiooSmzMsG5Y6sbro3qSsQXu9cRTVmf6fzU82jaR5h5JkjaENHk2pvA17++NrKjM+4ebgq9HkzbMkf5LpsGuc6pOmw/lkjiJIDOwYUFYzc+OeRiKkHdtN5kxnoCfT64kJfl2iiX+R2dtIvBzxJRyNCUt1LAynpnFYR4J5fCeZ8rSa9F/PKmFLD6Bx7a9ZezE4AGsDfvzTIqmNrOfVUqySvcXU6/+8GMag/A4P+BuYZ6zyf4L5scmkdyk0/jAAAAAElFTkSuQmCC";const $A=S("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1),zA={class:"request-title"},qA={class:"top"},VA={class:"left"},WA={key:0,src:LA,alt:""},KA={key:1,src:c_,alt:""},ZA={class:"right"},HA={class:"bottom"},QA={class:"img-name"},GA={alt:""};function YA(t,e,n,i,r,s){const o=eo,a=kr("Modal"),c=Kp("image");return P(),xt(a,{width:440,visible:!0,class:"request-modal",title:t.$t("common.requestCoins"),footer:null,centered:"",onCancel:e[0]||(e[0]=l=>t.$emit("onClose"))},{closeIcon:ft(()=>[$A]),default:ft(()=>[S("div",zA,fe(t.t("newAdd.youNeedSuiFaucetCoinsToReceiveOurTestCoins",{theme:t.storeCounter.theme=="default"?"Aptos":"Sui"})),1),S("div",qA,[S("div",VA,[t.storeCounter.theme=="default"?(P(),U("img",WA)):(P(),U("img",KA))]),S("div",ZA,fe(t.t("newAdd.toGetSuiFaucetCoinsToReceiveOurTestCoins",{theme:t.storeCounter.theme=="default"?"Aptos":"SUI"})),1)]),S("div",HA,[(P(!0),U(tn,null,ln(t.list,l=>(P(),U("div",{key:l.symbol,class:"item"},[S("div",QA,[jr(S("img",GA,null,512),[[c,t.getCoinIcon(l)||("importIcon"in t?t.importIcon:et(Et))(`/image/coins/${l.symbol.toLowerCase()}.png`)]]),S("span",null,"  "+fe(l.symbol)+" ",1)]),Ft(o,{class:"mint-coin-btn",loading:t.loading&&l.symbol===t.currentCoin,onClick:u=>t.toMintCoin(l)},{default:ft(()=>[ai(fe(t.$t("button.request")),1)]),_:2},1032,["loading","onClick"])]))),128))])]),_:1},8,["title"])}const XA=yn(UA,[["render",YA]]),JA=Sn({components:{Modal:vr},setup(){const t=on(),e=Ie(()=>t),n=Ie(()=>t.chainName),i=Ie(()=>e.value.chainName?en[e.value.chainName]:{}),r=Ie(()=>e.value.currentExplorer);return{getExplorerUrl:ps,importIcon:Et,store:e,chainName:n,config:i,currentExplorer:r}}}),eC=""+globalThis.__publicAssetsURL("image/img-Transaction-Submitted@2x.png"),tC=""+globalThis.__publicAssetsURL("sui-image/img-Transaction-Submitted@2x.png");const l_=t=>(di("data-v-1cdc2d08"),t=t(),hi(),t),nC=l_(()=>S("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),iC={class:"success-container"},rC={key:0,src:eC,alt:""},sC={key:1,src:tC,alt:""},oC={class:"waiting-title"},aC={class:"waiting-text"},cC=["href"],lC=l_(()=>S("svg",{class:"icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon-jump"})],-1));function uC(t,e,n,i,r,s){const o=eo,a=kr("Modal");return P(),xt(a,{visible:!0,class:"transaction-success",centered:"",title:"",width:"400px",footer:null,onCancel:e[1]||(e[1]=c=>t.$emit("onClose"))},{closeIcon:ft(()=>[nC]),default:ft(()=>[S("div",iC,[t.store.theme=="default"?(P(),U("img",rC)):(P(),U("img",sC)),S("p",oC,fe(t.$t("common.transactionSubmitted")),1),S("p",aC,[S("a",{href:("getExplorerUrl"in t?t.getExplorerUrl:et(ps))(t.currentExplorer,"tx",t.store.currentTransactionTxid),target:"_blank"},[S("span",null,fe(t.$t("common.viewExplorer")),1),lC],8,cC)]),Ft(o,{onClick:e[0]||(e[0]=c=>t.$emit("onClose"))},{default:ft(()=>[ai(fe(t.$t("button.ok")),1)]),_:1})])]),_:1})}const dC=yn(JA,[["render",uC],["__scopeId","data-v-1cdc2d08"]]),hC=Sn({components:{Modal:vr},setup(){const t=on(),e=Ie(()=>t);return{importIcon:Et,store:e}}}),fC=""+globalThis.__publicAssetsURL("image/img-transaction-rejected@2x.png"),pC=""+globalThis.__publicAssetsURL("sui-image/img-Transaction-rejected@2x.png");const gC=t=>(di("data-v-ace0f971"),t=t(),hi(),t),mC=gC(()=>S("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),wC={class:"rejected-container"},yC={key:0,src:fC,alt:""},_C={key:1,src:pC,alt:""},bC={class:"waiting-title"};function vC(t,e,n,i,r,s){const o=eo,a=kr("Modal");return P(),xt(a,{visible:!0,class:"transiaction-rejected",centered:"",title:"",width:"400px",footer:null,onCancel:e[1]||(e[1]=c=>t.$emit("onClose"))},{closeIcon:ft(()=>[mC]),default:ft(()=>[S("div",wC,[t.store.theme=="default"?(P(),U("img",yC)):(P(),U("img",_C)),S("p",bC,fe(t.store.isNotSupportMsafeError?"MSafe Wallet is not supported by this operation.":t.$t("modal.rejectedModalText")),1),Ft(o,{onClick:e[0]||(e[0]=c=>t.$emit("onClose"))},{default:ft(()=>[ai(fe(t.$t("button.ok")),1)]),_:1})])]),_:1})}const kC=yn(hC,[["render",vC],["__scopeId","data-v-ace0f971"]]),SC=Sn({components:{Modal:vr},setup(){const t=on();return{store:Ie(()=>t),importIcon:Et}}}),TC=""+globalThis.__publicAssetsURL("image/img-loading@2x.png"),AC=""+globalThis.__publicAssetsURL("sui-image/img-loading.png");const CC=t=>(di("data-v-4f3bccb2"),t=t(),hi(),t),IC=CC(()=>S("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),EC={class:"waiting-container"},xC={class:"loading-pic"},MC={key:0,src:TC,alt:""},NC={key:1,src:AC,alt:""},OC={class:"waiting-title"},DC={key:0,class:"waiting-title waiting-title1"},jC={class:"waiting-desc"};function RC(t,e,n,i,r,s){const o=kr("Modal");return P(),xt(o,{visible:!0,class:"transaction-waiting",centered:"",title:t.$t("modal.waitingModalTitle"),width:"400px",footer:null,"mask-closable":!1,onCancel:e[0]||(e[0]=a=>t.$emit("onClose"))},{closeIcon:ft(()=>[IC]),default:ft(()=>[S("div",EC,[S("div",xC,[t.store.theme=="default"?(P(),U("img",MC)):(P(),U("img",NC))]),S("p",OC,fe(t.store.currentTransactionDesc),1),t.$route.name==="remove-liquidity"?(P(),U("p",DC,fe(t.store.currentTransactionDescText),1)):ae("",!0),S("p",jC,fe(t.$t("modal.waitingModalText")),1)])]),_:1},8,["title"])}const BC=yn(SC,[["render",RC],["__scopeId","data-v-4f3bccb2"]]);var sa="TrustWallet",PC=class{constructor(){this.name=sa,this.url="https://trustwallet.com/",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgdmlld0JveD0iMCAwIDQwMiA0MDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8cmVjdCB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgZmlsbD0idXJsKCNwYXR0ZXJuMCkiLz4KPGRlZnM+CjxwYXR0ZXJuIGlkPSJwYXR0ZXJuMCIgcGF0dGVybkNvbnRlbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHdpZHRoPSIxIiBoZWlnaHQ9IjEiPgo8dXNlIHhsaW5rOmhyZWY9IiNpbWFnZTBfMTY5NF8xODk2NyIgdHJhbnNmb3JtPSJzY2FsZSgwLjAwMjQ4NzU2KSIvPgo8L3BhdHRlcm4+CjxpbWFnZSBpZD0iaW1hZ2UwXzE2OTRfMTg5NjciIHdpZHRoPSI0MDIiIGhlaWdodD0iNDAyIiB4bGluazpocmVmPSJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRC8yd0JEQUFjRkJRWUZCQWNHQmdZSUJ3Y0lDeElMQ3dvS0N4WVBFQTBTR2hZYkdoa1dHUmdjSUNnaUhCNG1IaGdaSXpBa0ppb3JMUzR0R3lJeU5URXNOU2dzTFN6LzJ3QkRBUWNJQ0FzSkN4VUxDeFVzSFJrZExDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3ovd2dBUkNBR1NBWklEQVNJQUFoRUJBeEVCLzhRQUd3QUJBQUlEQVFFQUFBQUFBQUFBQUFBQUFBRUdCQVVIQXdML3hBQVpBUUVBQXdFQkFBQUFBQUFBQUFBQUFBQUFBUU1FQlFMLzJnQU1Bd0VBQWhBREVBQUFBZWtBQUFFRXhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaElJRWdBQUFBQVFrQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBQUFRa0FBQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBRUVnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWlZa0FJa0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBUk1FZ2lZa0FBQUFBQUFBQUFQT29XVjduWFZWdXg5TXllWTNYTG8zSXo2QUFBQUFBQUFBRVNENUV6RWdBQUFBQUFCR0xNWmJSNmUydTVWK3BlT25QazR4cXpCTUFicTE4NlVYOVZjNzNlVFRhV3J6NmJmVWVmUUFBQUFBQUdPSmozbUppUUFBQUFOTlVQckE2Zk95Zm53WFZ6Qk1BZ0EyOXFvdXJtNjNyRnI1cGk5U3JlbWlvc2pIMVpnbUFQdjF4MFRrN0RUUFBycUhyWGJGeStpSGoyQUFBQmppWTk1aVlrQUFBQURtMkhuWVBZNVFzTVRYbCt5cUx1YzdMb0UxV1ZiZTVpaTRLN0FBSTArNWV2TksxWFNtaWpsVHArSGJYenhlNlpkVmppMnE0V1d1V1BsZElLclFBQUFNY1RIdk1URWdBQUFBYzYxK3kxdlg1YTMxQzIxMldnY3pvQUFBQUFBQUFPYTlLNW5yeTR3MzRycFlkRHZ1VjB3cXNBQUFBeHhNZTh4TVNBQUFBQnovVmJuVGRibUxWVmJONTlXOGN2b2dBQUFBQUFBT1lkUDVac3lmSTNZNzF1OVB1T1Qwd3JzQUFBQXh4TWU4eE1TQUFBQUJSOUZZcTcxZWFzVmQzaGVSeXVrQUFBQUFBQUI4OHM2ZHpIZGpEWms2RnM4SE80L1ZEejZBQUFBeHhNZTh4TVNBQUFBQlVxdmNLZjArYzIycHo3UEhSaHlPb0FBQUFBQUFCaGMzNkJ6L29ZUTFaK201RVR4dXFFU0FBQUJqaVk5NWlZa0FBQUFEUlVmb1hQZWpnZTNpMDBkVmVYcnhlcUNRQUFBQUFBTkRTTFpVK2x6M3Y0Ykc2cm9nNC9WQUFBQUF4eE1lOHhNU0FBQUFCNDh3NnJ6TGJreHh0eDlDMmRic25KNllWMkFBQUFBQUFValE1bUgxK1czMmh0dmoxYUJ5K2tBQUFBQmppWTk1aVlrQUFBQUJSYjFYYjZhWU9uenQzZXVXZE53YmZZWk5RQUFBQUFERnlxdlpYVWgxdVk2QlErbjQ5WDBNTzBBQUFBREhFeDd6RXhJQUFBQUR3OXlPV2ZOaHIzWDVpeTFvZFZWeXg4cm9oNTlnQUFBRHhRNXZtNnZwWUEwVWIrN1lHZnl1a0ZWb0FBQUFHT0pqM21KaVFBQUFBQU1mbkhUOVhvbzU4Ky9qcFlHOTBUelBUTW5sdG13N0xZOC9UTG9CSUJyYWpkVFphZGpOK01MYWxrd2I3azFmUXdiUUFBQUFBTWNUSHZNVEVnQUFBQUFBYTZqZEs4NzZlWExQV3VoaCtSNzhlOXRwYXF6cXJudTZ4Yk4vVWRMNTZzNGFNNHpZbkNzTzgzR0xYOC9SajFnQUFBQUFBWTRtUGVZbUpBQUFBQUFBQVl1VW1LUm9lcTYzWGw1NDJXdDI1UW55UHBQemtiKzFaZEdoc01zT3NQUHNBQUFBQUFBUWZEMElpWWxJQUFBQUFBQUFBRVZ1eXZmamxuejB2QjJaYWxkczM2elhoVGNBQUFBQUFBQUFpWUpBaVlKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFSSUFCRW9KQUFBQUFBQUFBQUFBQUFBQUFBQUFBaVlKQUFBQkVvSkFBQUFBQUFBQUFBQUFBQUFBQUFRRWdBQUFBQkNRUUpSSUFBQUFBQUFBQUFBQUFJSlFKaVFBQUFBQUFBQUErUkhpSkFBQUFBQUFBQUFBQWVub1FCSUFBQUFILzhRQUx4QUFBQVVFQWdFQ0JBVUZBQUFBQUFBQUFBRUNBd1FGRVRBeEVFQVNJRFFURkNGQklpUXpOV0FqTWxCd2dQL2FBQWdCQVFBQkJRTEhZV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVc1di9OTi81TGYrbC92L0FDVDcvd0FLazFOcGhTYTE5V0pEY2h2ckhvRjFsdUpiUk1xaW5PV1hsc09SS2kzSTY5d1d1bXBTVUprVmR0QWVrT3lGZW1OVTNXQXhPWWtkVTlsclBld1ZLWVFIS3RIU0hhdzZvT1BPUEhoWm55R1EzV2lDS2xGV0V1dHI2SjdMV09mUCtWSmN5UXMvbVh3YnpwZ3pNOEVXbHVQQitsTXVOdnhuWTZ2V1Mxa1BtSGg4eStJOVRmYVUyNGwxdkdleTFqbktOYzdDeFRYM2hHZ014dVZJU3RNaWpwTU94M1dEdzBaUm5HeG5zdFk1ZnZmU2xLbEczVHBMZ2FveEJtSXd4NnpJbEU5UzQ3Z2NvN3lRdUsrMTY2TCtqalBaYXh6ZmZjVTZFMUpiS2x4U0NZY2RBSWlJc3FtVzNBcW54VkE2VEZNU0VFMUk0bzN0OFo3TFdPZjcvaWkvcGRPWDd6aWplMHhuc3RZNmorNGNVWCszcHlQZGNVZjJXTTlsckhVLzNIaWlkUjM2dmNVbjJPTTlsckhWZmY4QUZGL1Y2YXZxcmlsL3QrTTlsckhWeS9POFVZL3pQU1VkazgwNHJVL0dleTFqckpmbWVLUWRwdlNmTzBmbUVWb09NOWxySFdpL0Z4VER0VU9sTk8wTG1PVm8yTTlsckhXaS9wY1FUOFozU3FSMnAvSkZaT005bHJIVnl2QzRhVjR2ZEtzS3RENFlUNVNNaDdMV09vcDhvSExTdk5ubzFwWDA0cDZmS2ZrUFpheHZKODJPYWN2emdkR3JyOHBuRklUZVprUFpheVNFZkRrOFVaeTdIUmxyK0pNNG9xUHdaRDJXc2xXYjhKdkZLZCtITTZFbDM0TWJtbXQvRGdaRDJXc2xZYThtT0VxTkMyWENlWnoxaC84QUR3MmczSEVwSktjaDdMV1I1c25tRkpOS3VLVEs4RlpublVzTlBPcWZlNHBEUG5KeW5zdFphdEg4SHVZRlNKd3NqcnFHVVRacXBhK1lVZjVhTmxQWmF5dnNwZlplYVV3N3pGcWJqSVprTnlFNFpWVGFZRDhoeVF2bWxSUE5lWTlsck5OaEpsTnJRcHRmS0ZxYlZHcTRRNGgxUHBrem1Zd2sxQjZSNllNRlVwYVVraE9ZOWxyUExoTnlreUl6a1pmb2FmY1lWRnF5SE9YcERjZEVtcU9PK3FIVEZPaEtTUW5PZXkxMEZvUzRpVlNESUtTYUZlaUxPZGpCK3NGNExjVTZ2MFI0ajBrNHRPYWo5STlscnBQeG1wQlNhVTYxaFpZY2ZWR3BLRUFpSWk2VnV0SmdzeVJKZ3V4dlNTVFVjV2tHWVEybHRQVCt3Ky9WTXJsTHBSS0NrcVFvUllUc280ME5xS25ybjJIb3pNZ0pwY1ZKa1JKTHJmZi9BSnd2M2I5Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN3bkwvQVAvRUFDY1JBQUlCQWdVRkFBSURBQUFBQUFBQUFBRUNBd0FSQkJBd01USVNJQ0ZBUVJSd0lsRlMvOW9BQ0FFREFRRS9BZjBhN2hONk03VkhNRzhIMWIyb3lxS2FjbmF0ODFtWmFXZFRRWUhiMEpKQ1RWejJKQ3pVSWxBdFR3RWNhMnp2UVlpa1BVTDZyYjBxbGpZVitPMUREajdTeHF1M1lWQjNvNGRmbEhEbis2ZU1wdmxGd0dxL0kxRHowc1JzTW8rQTFYNUdvZVkwc1I4eWo0alZsNW1vK1kwc1I4eVhpTldiblNjaHBZamxrTlhFY3RPZm5TK1RyWWdiSEtNM1VhTG03RTFFTHVOYVlYWExEdDR0b08zU3Q4c09QTjlkbDZUYWxicE42Vmd3dU8rV1RxOERLSmVsZGVXUHE4akpXSzdVazRQTHNlVlZwNUMrVU1kLzVIMFpJZzlNaFhmSkpDbTFDZFNQTlBNVzJ5QXZ0U1FmVzlNaTlQQi9taUNOODBnSjNwVkM3ZXN5aHQ2T0hQeWtpQ2ZvL3dEL3hBQWtFUUFDQVFNRUFnTUJBUUFBQUFBQUFBQUJBZ01BQkJFUU1ERXlFaUVnUUVFaWNQL2FBQWdCQWdFQlB3SC9BQTFJeS9GQzNURlNRRmZZK3FBVFN3dWFTMkE3VUJqVjRGYW10M0hGRlNPZm9SUmhWckErRHpxdE5NNU9hUzRCN1VEblhBb29wNUZPdmkyTjFlQlRNRUdUUnVWbzNSL0JUU00zSitDc1Y0b1hMRG1oZEQ5RkpLSDQwbTduZFRxS242YlZyeWRKZTUzWStncWZvZHExL2RKTzUzWXVncVhvZHExL2RIN0hkZzZDbjZuYXR1dWgzYlkveHQyNC9pbU9CbmV0VHlOSlJoenN4akNnVk1jSWQ2QnNQcGNyNzh0aU5mSnNhWFRlZ043aWtieUdhZGZNWU5NaFE0UHpoaThCazZTdjV0bmZobDhEZzhhTW9iMGFlM0k2L0JJV2VraVZOSjVjZnlQb3h6RlBWSTRmalI0bGZtbXQyQndLamdDODZFZ2MxSmNmaWZUQnh4U1hQNDFBZyt4ckpjQWVscG5MYy9XVnluc1VMbGNlNmttTC93Q0gvd0QveEFBM0VBQUJBUVFHQndZR0FnTUFBQUFBQUFBQkFnQURFUklRSUNFaVFGRXhRVkpoY1hLQkV5TXdVR0toQkRJemtaS3hRb0tBa1BELzJnQUlBUUVBQmo4Qy93QkMwcVIyaXR6WG5ObTR0TTdNZkw1bHFDUXhRNXVvejFtbWQyWUZwVlhIbVdmbGtWRUFiMmc1RTV6MU5GNHFOYVZmZUkzNld1cmdySStUM255UHUxMlpmQU4zYVFqM2FMeFpWeDhLeGNSa3ExdTlkZFV0OVNYaTExYVZjRGpwVTJ2RDdORXZsOURCdnJQUHlhMTR2N3RhZkFtZTkyajNMQU8rN1VHZzhURGZxUGdXS0k2dDlWZjVOOVo1K1RYMWRvbmV3V2d4QnhMMG5haDRVU096VG1wb3dtWHRHbVZRQkJ6YUxoVXZwTFFlSUtmQ1duSldKZmN4clFTQ2VEZlRsNXJHNzE1MFMxeDJBYzY4Q0lockIyWjlMWEZKWDdOZmRLSFN1ODVzUzk1cVZLZVJzT3B2a2oxYXh5ajdOWUllTmZkcFZ4RGZSSFJ0Q2gxWjRoT2hKaFN2bXhMM2pTOTQ0Ujl6bWxmUGlYdEwzcGhIdk1hVHo0bDUwL1ZMN3BoRjh4cC9zY1NyZ0tYdkRDRTBvNjRrY3RLeDZjR1RVZGY5cnhLRDZhZUtjRzhQcE5SMXk0bHllTktOOGYxZzMzTFVkREpJeExzNzZYWE5nM25UOTFBTXNUSEpWS0ZaS0J3WUdhcVhhYzFERlBmdlVRck1Sd1RwUEUwdWh2amlscHpTUlVkN3JNRkxzcHBKMlU0dDRqSlZLMFpHT0NlcTMwdlY5TVhOdGlOTXVwWWhnVnZNaFVSNnJjV2w1c0drS0drV3NsNG5Rb1lCTGtjVFNsQTBxTUdDUm9GbUxXN1A4Z3hTZElwN0Jac1Y4dmpsNHMyQmxQRmFUU1hoMEkvZU43WWZLdlR4cUIwK01GNmpuNHBXdFVBMlRzYUJVU2orV2s0MVR0V2dzWGE5SXFCTHkrajNEVE8xUjhLVkhlTDltbWVLalU3ZFl1ajVjZms4R2dzVUxFQ0treUZGSjNNRS9FRCt3YVpDZ29icTBDWmxiSWFFWkVaQ3JFMk9ocExCS1JBRHlDMnhlcFRRZUo2MVpuYWlscFgxeFdlcW1aNHFEU3V1N1Q3MWd0OWRSbHJMQktSQUR5S1ZhUW9NVmZEMmpaTFFVQ0R2cXdqTWpaTGR5bThkclUweTFGUnEzRTJablEweHZyelBrMEhpWTcybWRkNG4zOEdWMmtxYVo4WnpscWFBRUI1VEVpQzlvTkVpS05vVllKRVMwM3hGbnBEU29TRWpkNVpBdFA4QUQzVHN0S29RSW91aUNkb3RkRVZiUjh3N3hFZDdSbEo0bG9KRUIvbkovOFFBS2hBQUFRSUVCQVlEQVFFQkFBQUFBQUFBQVFBUklURmhjUkF3UVZFZ1FJR1JvYkZRNGZEQjhkSC8yZ0FJQVFFQUFUOGh5Q1FFNTI3cGp1bUtnRlFDb0JVQXFBVkFLZ0ZRQ29CVUFxQVZBS2dGUUNvQlVBcUFWQUtnRlFDb0JVQXFBVkFLZ0ZRQ1ltcVZHNlpia0NXVVRPQ0FiNEpta24zaG11OHBib0J2aG9pb1U4cncrSmJVSUY4ancrTEkxRTBJOFJpVzcvR21CZnZ3a3NnR0h4d2hEZ203YjQ4K3NTV0NBWWZJQ0RqQXlmSW1Zd0V6ekI4WUdZSmdPcSsvbFFGV28xRitaSk9XTmhEcVZHWElQNk5pSE1ieW1kamNTczVjQUFGSjVRb0hjeVRCT0Zab2ZaUEg3Um9PbkVPRmlLQ3hUUUJFcG5sWmlrMjVBZ0RrZ0NxbDRwR1U3eE5nZVU1Z2Z1WWs4UjFaVE9Eam9FWkFncVA0SzBtV3drTHduQjVHYmRTYlpnQkRBcnhrRzY4UFFlRi9wRk5GYzBSY2h2a05EMngrR1FnV0xBemU2Y2MyQjREa2VGNUFHUStwZjZSQVFKcWlNOUNtbmpjWmsyNmsyek5FUXV5R1RNcHY3a095WmcvWmh0aVp6YkFFOHZuUjdxOFdhSHJsRkJLRjFHWk51cE5zeUg4VWVKMUYyQjFxME4wQk1YNkg5SzZqQkU5K001Q0pNRUozSnV5N0o2SW51VW9MZUlkK01JOUhyTW0zVW0yWURYV01ieTJITXAwZDVyMzJkN1RLRUd3R2Q0b2txYkJ1STlLUVdpdTFQUWZIOTlNeWJkU2JaZ05peWhVK3VVSi8weHhDSlY2R1pOdXBOc3dHdUQwTVRoMS9ybERjbS91eEJxcGVobVRicVRiTUJxdjhNU2lQN1BsRGQ3K3pFV0d1WVRicVRiTUZxM294S0J1SEtGVkRpTFZEN1prMjZrMnpHaWJpZkp4dlova2NuUVFQd05LaFBsbVRicVRiTXZKdms0d0hjSHJrNkhFOGNEUm9PWk51cE5zeThRSHJHMHdlWEp1YXNjRkRWNHpKdDFKdG1PN2N4NCtzWFRRTzhPVHZ4bmhpQTVZS2xCc3liZFNiWmpmc2o3R1A2NkR5ZEJNZURqUWdlYzJiZFNiWmpHMkE3RHdVWi9Ea3V2eWVNYUVlQVBtemJxVGJNL053T0J5Nmg0bHVTYWRnUDdqWDBQOEFNMmJkU2Jac0FHZUFzK01ZNCtkL25KYThnbUJZUXhZM0pBL3V1Yk51cE5zMXgwQi9qK1l0SkdLNjVqa2Q3b1Y5T0NNSnVQcjlObXpicVRiTmFlYkJzY1Rqc2NBYXJWMEZ1UWFMeFAxNHlDUUNsT0lETm0zVW0yYkxRWXNnSXNSaU1RbGFFY2pvZHM5bVFQdlJUd0Y3WXN5Z3d1L0hPbTNVbTJjY1lmU3hTSzBNUVdYM3pRRWg2bFFDL3dEdHppQVNXRVNuRW03dWROdXBOczZRaXoyTzZEWXhlOWVBYTZHaHFzZFJxTGpLY0dOZ0dDNVZqQU5CYmdza1IxTytmTnVwTnM5NUJoZnFLT2hoaUR3QW9CMUprVVJFZnR3aGtvNmx4T25kcjEyVHZHUDJUcndnSXlSY29FT2dFd0EwejV0MUp0eUdnOUkwVUdRYUJJOEwxWlNSVEdJZDUvNGdRUTRMZzROUmpvTlRaUDdubGY4QUZNOEo0TXpoK2pJZEFaZ0JweUUyNmsyNUUrTU13VTRyVWVqMEtMQlhNQXg0UzREOFNHeVp3ZGlKL0RvME9PcDRlcXJDQk05bklDdzVLYmZsQm5zdEpDT3FlYkNKZW1xSUlMR0J5SE96WFlKbm92Si8xQVFBSkFjbkhIZENaNVVTZTZqN1J1aXBIMXdpNWhwQUJ5VXdtWjF1cFF1QWRBNVF6S1FYdHl3Q0FCQjBLZjJOWFNiYkk3TG5nY0pCT2NqN1U0Uk9ZZVdPZ3drNWdaQ01Ta0k2cDBxV0NoOFFVZ0F3SExpSkhFUWg4ZVN3UURERTc3Zkh6TnVHUnA4YWRoTlNIRE5EWS9Ga3NnTy9HUTZCME0vaVNXUUdwbmtrT25hZmY0ZDlCTkFkOHhtbDJUN3crRGRsRTBVczl0aW5PbzdKbS9PczNUN0JNVE05a0EzS0FBSktvVlVLcUZWQ3FoVlFxb1ZVS3FGVkNxaFZRcW9WVUtxRlZDcWhWUXFvVlVLcUZWQ3FoVlFxb1ZVS2luSE4vOW9BREFNQkFBSUFBd0FBQUJEenp6UlR6enp6enp6enp6enp6enp6VHp6enp6eVJ6enp6enp6enp6enp6enp6enp3elR6enlUenp6enp6enp6enp6enp6enp6enp5anp5aHp6enp6enp6enp6enp6enp6enp6enp4end6enp6enp6enp6enp6enp6enp6enp6enl6enp6enp6enp6enp6OVBmenp6enp6enp6enpEenp6enp6enp6UW9NTU9EN0h6enp6enp6ekx6enp6enl1QUFNTTkrNHNNUE9MM3p6enp3THp6enp6eUVJV1kzenp3MjAwd1A4QTg4ODg4Qzg4ODg4OEtRODg4ODg4ODg4NkQwODg4ODhDODg4ODg4cUU4ODg4ODg4ODhyRGQ4ODg4OEM4ODg4ODhxRzg4ODg4ODg4OGdEVzg4ODg4Qzg4ODg4OGpTODg4ODg4ODg4SkdWODg4ODhDODg4ODg4cEEvODg4ODg4ODhDSDg4ODg4OEM4ODg4ODhNRDE4ODg4ODg4OEpIODg4ODg4Qzg4ODg4OG9EYjg4ODg4ODg1REQ4ODg4ODhDODg4ODg4L0NDLzhBUFBQUFB3UjkvUFBQUFBBdlBQUFBQUE9DQWZ0L1BPOEF5dlBQUFBQUEF2UFBQUFBQUERqUTQwcUF4VDNQUFBQUFBQQXZQUFBQUFBQUExmUUF3RGovQUR6enp6enp6elB6enp6enp6enp6eTJLL3dBODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODhFODhVODg4ODg4ODg4ODg4ODg4ODg4ODg4MGM4OHN3ODg4ODg4ODg4ODg4ODg4ODg4OHM4ODg4ODhjODg4ODg4ODg4ODg4ODg4ODhFODg4ODg4ODg4akJCQkJCQkJCQkJCQkIvOEFQUFBQUFAvRUFDWVJBUUFDQVFNRUFnSURBUUFBQUFBQUFBRUFFU0VRTURGQVFXRnhJS0ZSY0lHUnNmRC8yZ0FJQVFNQkFUOFEvUm8xd2xzYW5ZQjZWSEpuZjc5VEdHb3FyZGNRNUp5V0p5UytnYmw0SjV2aGtPQ1k0dVpUSWlLcDFFY01Xc1pTL251OHZ2U1FkeElMbE9BZkF1aGNaeXFkbkExNzZmWVp4ZFRKajdtZjhQVzF4L2xwOUxkRlFkYlE4ajNvYUR3YnBwUlVuazJuZ2VOQlFHNktMNGcwM0JzdlpWcnhCU2VlZ2l4YlB1amZoZjhBak9saS9IWXVORjYzcUNVeGxVY3g4OUNnV3k3MkRTbUhuZnI5d2lWaGlGcVlUQitvSTVOY0x5emx1UHhvNjdIUTVRd3h1aG9sbGlYREJtT3dORVZDVmY0empvZ0ZNRnovQUVqdEN0Y2ppZmNIbzdWYmg5Q1djc1ROY3Y2UC84UUFKaEVCQUFJQUJRUURBQU1CQUFBQUFBQUFBUUFSRUNFd01WRkJZWEdoSUVDeFlIQ0I4UC9hQUFnQkFnRUJQeEQralg2MmN3bEV1ZFpUNnV3RnpvdGVabVN1QUtESE16Sm5LcHM1UG9ER3JXZHI0WkdOc3BScVpabGZVQVdPS201Q2FoZGNkWDFpZE1VSHNNYjB2aTR0YnFiVUdkU1I5TmZ2V0p2L0FPZnVsNldIdmFydndrRi85ZGRJNXJ4Zzc4anF1L0ZEZmkwaGt2R0N0TzdxdS84QWI5aHN1enBITTk4RmF1cmNqaGlXVkVwclJvTHpMbmdmUUNtZDlIdzVyeXF1K1dGWUhYUXI4RkhKMWhWWkJNOVlLeXFEOGdWb25NRGhjamJwcjh3SU41a0hwdVovbVBjUkduSFBOam1iVHZ6Z1o2N3Y5SFAyWkJyZUJPVFBtYmtEbVp2bmNBYlZFdjhBMG0vMGtWcW1NZnJEYkxNZXJqNmpkdTlLOVJxMk95RzVrZXh4L09qV2ZuLy94QUFxRUFFQUFRSUNDUVVCQVFFQUFBQUFBQUFCRVFBaE1hRVFNRUZSWVhHQmtmRWdRTEhCOEZEUjRmL2FBQWdCQVFBQlB4RFVXUmI3akdwY0ljMVNZdm9SVzhsNXJYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4Vlc0STVNVk13NjE2azRoeVdva2hsYm4yQXFNWGNWR0lodVA5b0JZaitDZ2tKSlU4V09EY292Z1N5ZGJMZGZpMUJnUDRxQ1FralVZTTdqYVVJSkdUVXFCS3dGUTNOdHpmei9rcUhBZHB2b0JicWJ0UVhTNE1PUEgrV2srUlNCSjZ1U0g0ZnpjRndmeDlNUzJMWXF3ZnpyeTlsemw2QzVzV0gzL0FEemFURzRvUkJMam9tVXgyYzZnRGQvUXZibTV5MFhCdXY4QTBiRzMyZEZ6OVAzZjNDUERpWWU1dXZ5R2tTUU51ekE1SmZ1VUV2MkVJWGNObnQ4UjJsKzJqYTcxYy9iWTJvM2c1Y1hoUXEzWE5nNGJtZkxEU2tXeWRvTnliU2pIcXRKZTR2cHZ6OXVSTGNJcktudE1KS2lCMWFMZkd3YUw4NU9kVHFSd2VXTEhxa2dDeFlQNHN6MG9NQlByelk5RjlyTEQydFpWN0JxTllxZ281a1RFRHNGNkhFWmg4aEJ5bzVXNFd2dkJrMWNsTWtxSEl3T21xSi94d2k5em9sRkN2YkRaSHpRUkRPNXZXSXpvc3VtSDBqN0hPcXlyV1JXNkRxVGZ3T0hkS1V1eFE2UUsvYi9kRHdMeFgzVW9EdlUrc0ZZTHRQRmJjUkJjQndjWHRRVVlReU9YdDU0MHpPTEY5eFBveDFHelgzeDhWa3JIOTErMys2ZHgwblFtL0VubkpWMll6OVBFYmF6T3F5cldNVEtUd0xHUnFRUUFWYkFWZkNkZ2lPR042d2NhTWhyWVNqd1lmTGpwTGUwU2cxdkhHUlh5eEhXZVpVMkU0SW5rQ3ozMVN0ek80UUpPNVBYV1oxV1Zhd29IZjV2VURXOXBYWXBzUlBhRU9qZktuRmQrRWZqaFJBbE5sUDFYN2VzSW13TWljUnBGZWJWaTVyZG9wM1laRmw2TnM2ZVlWak4yRW5yNWtEV002ckt0WVFUZjU2UmZaQ2hSQTdxL08zNEpTUXlEQk5uV1ZGaVhBUVphNmF1TzFqTXFSbUg4S0tZZXJuM05PUXBKU3dPM1NTZmF3eTZ6T3F5cldRQ0l2ZTRhWnQwWDg2ZTBCWnVzK21MZkEvZlBXWjFXVmF5RzhidTJtYmQzN24rUGFZM1hkK2ZUTU41eWZyV1oxV1ZheTJON3B1YlJlMDdkWkdNN1dtVWJ4OEgxck02ckt0WktONitIMXBqM3Q5bC8zMmwwcGxjOU1vakhaejYxbWRWbFdzL1djSDFwZzN4N1A5dlo3S3ArdzlIR0R1ays5Wm5WWlZySWZISCsybWQ4bVgxN1B4ano5SEZydkwvZXN6cXNxMWtjVDZaWDNwanV4RHVmWHM3cVJQZEVmZm90NUdUSFdaMVdWYXkwKzJlY3RLNjhUK0p6OW54M0Y2L1JPbERDVllDakp3QWREV1oxV1ZhenlnNTltbTlrWERrSDJkeTd3WEFUNk5OaUp0dk1HdHpxc3Exa0tsek9nL0I2TGd6ZnQ4aCsvWlFCY1F1VUQ1ZE5ucGw3ajZhM09xeXJXUitTa2RVZWlWMlVyaElNZzlsRVRaZzRxL0JOTStscGJpcDhGMXVkVmxXdGUzQVRtUmxHa0c3RVRnSStWMzlrWmpJamZZWkJwbkV4NXlGZmhyYzZyS3RiQVJFejJTWGZCNjZUaHJnQ0grQ2RmWWhKUW5yMnpKU3F5M2RMUVVkOUxaTmF6cXNxMXJuWit6dmNPK25oWXJJTWxZSlFKdmJUb3lkUFlIYzFpTmdXSGVYb2FjMVlCWW9HNENOd0VHdHpxc3ExcmhRc3U5c2VqRDBwTGJ6c1JHRTAzOENCYmE5V3pqejE5eTFFYlZzSEZwRDlqVFlZQWNBZzAzVU1lMnlCMkpkdGRuVlpWcnRpMW9iRSt3bm1Pa1VFVVM0bEFaSFlYQVhaOHVldHhlejRpN2cydkNqb0VMbUw5bnhtNkFRS01BWFZvekppNXY0blFnNmE3T3F5clhCMWdBRjlrT0kxWkVwT3diQndmUWFka0ZiWEJjVGc5eW9LTkd3ZmRpR3FscU8yS2Z4WXlwUzVtSFk5dzJmUG9jcnZzTVA0SHp5MStkVmxXdkpZb0hCUGkrTzhwWU9HdWZ0L293UWdzUjJwelloQmM0N1RtZHF3c3VURGs3bmg2aDRaTFhPcGgxWDRVWTJCVFluYytIRDA3cUZybVptOTJVR2RRMEFOZm5WWlY3QzBrV0RTOENiVGgycVRSSGJ1Vy9XUHBCYlNSZEJNSHJTRFJzSE1tL1ZialFNQUpFWkUwVFlEaXZ1R0xVZmxrS052aS9BNzBxaXFyZFgwOEZCUVAweithZ3ppZUFld3pxc3E5amdxamNsU1EzbFlPRzA1TitMVFRsaFFPWStsMnhOMnNjMjFsd3JFZXdWbnVBeFpjNnhwaHZMeTRIRDB4RjRNWm9iWGdTMDRBSzVlT1J6dSt5MzNhcXdHNjNzNENjUUhaaS9UQ3BTSlhnc2NmbzdVaUJCaEVoSFVRd25FRWN4YkZObURmQWJqdHlIQ2piREFZQTRIc3drNTFXanVaOXJaUjFyZlZzSFB1VS9GTkYzMUdLNTkzMHNkdUZrY0FvcGw3aVhmQnlMOFNzRE9FUS82OGZhT0VNWXRRUUJnV3BzWGNqOW43WU1MUWhJbERHdVZHT2UydUdIS2xHWkE0UjBTT1pRYXpnYjNBNnhVTWpVRW5oRzQ0R2Z0cjNlTTl2eG9HSXhMME1rbUQ3Y1dERUJQSkMvU2pjSFpGUFlSUFdqTzNBd09BZTM0QUxIMys0YWJ6dTRjdjU5NEx1QnpxQU5KYkRITVVJZ2x4L25HUHNzT2ZwTUxhdzRPNythM0V1eU45QUFHQjZVQkRoU1IybXgzL3dBdUJoSzRHK29MdDFpK3NCR0c1M1VrNEh5L2toeExnYjZTY1JaYWtCRFV0K2ZsL3dDTzN3VGtLZ3VzcmJySjduaXcvd0NVR1lFdHp0L2hvc2NkMjJveGJOeGpRQWdJTmNna0pKVXpFT0RjcURhOFZXOWh6dDcxRmhFN3FtNHJ6dFc0QnUvMVFZQ1BhS1VBN3dwdmZOWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxVjQrYWdHUjFYb0FJQURXZi9aIi8+CjwvZGVmcz4KPC9zdmc+Cg==",this.provider=typeof window<"u"?window.trustwallet:void 0}async connect(){var t,e;try{const n=await((e=(t=this.provider)==null?void 0:t.aptos)==null?void 0:e.connect());if(!n)throw`${sa} Address Info Error`;return n}catch(n){throw n}}async account(){var t,e;const n=await((e=(t=this.provider)==null?void 0:t.aptos)==null?void 0:e.account());if(!n)throw`${sa} Account Error`;return n}async disconnect(){var t,e;try{await((e=(t=this.provider)==null?void 0:t.aptos)==null?void 0:e.disconnect())}catch(n){throw n}}async signAndSubmitTransaction(t,e){var n,i;try{const r=await((i=(n=this.provider)==null?void 0:n.aptos)==null?void 0:i.signAndSubmitTransaction(t,e));if(r.code)throw new Error(r.message);return r}catch(r){throw r.message}}async signMessage(t){var e,n;try{(typeof t!="object"||!t.nonce)&&`${sa}`;const i=await((n=(e=this.provider)==null?void 0:e.aptos)==null?void 0:n.signMessage(t));if(i)return i;throw`${sa} Sign Message failed`}catch(i){throw i.message}}async network(){var t,e;try{const n=await((e=(t=this.provider)==null?void 0:t.aptos)==null?void 0:e.network());if(!n)throw`${sa} Network Error`;return{name:n}}catch(n){throw n}}async onNetworkChange(t){var e,n;try{const i=async r=>{t({name:r.networkName,chainId:void 0,api:void 0})};await((n=(e=this.provider)==null?void 0:e.aptos)==null?void 0:n.onNetworkChange(i))}catch(i){throw i.message}}async onAccountChange(t){var e,n;try{const i=async r=>{if(r!=null&&r.publicKey)t({publicKey:r.publicKey,address:r.address});else{const s=await this.connect();t({address:s==null?void 0:s.address,publicKey:s==null?void 0:s.publicKey})}};await((n=(e=this.provider)==null?void 0:e.aptos)==null?void 0:n.onAccountChange(i))}catch(i){throw console.log(i),i.message}}};class Hr extends Error{constructor(n,i){super(n);v(this,"error");this.error=i}}class Gn extends Hr{constructor(){super(...arguments);v(this,"name","WalletNotReadyError")}}class af extends Hr{constructor(){super(...arguments);v(this,"name","WalletConnectionError")}}class Yn extends Hr{constructor(){super(...arguments);v(this,"name","WalletDisconnectionError")}}class Sr extends Hr{constructor(){super(...arguments);v(this,"name","WalletGetNetworkError")}}class fi extends Hr{constructor(){super(...arguments);v(this,"name","WalletAccountChangeError")}}class pi extends Hr{constructor(){super(...arguments);v(this,"name","WalletNetworkChangeError")}}class Ae extends Hr{constructor(){super(...arguments);v(this,"name","WalletNotConnectedError")}}class Kt extends Hr{constructor(){super(...arguments);v(this,"name","WalletSignMessageError")}}class Oi extends Hr{constructor(){super(...arguments);v(this,"name","WalletSignAndSubmitMessageError")}}class kn extends Hr{constructor(){super(...arguments);v(this,"name","WalletSignTransactionError")}}var Xc={},FC={get exports(){return Xc},set exports(t){Xc=t}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,d||c,h),g=n?n+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],f]:c._events[g].push(f):(c._events[g]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new i:delete c._events[l]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,g=new Array(f);h<f;h++)g[h]=d[h].fn;return g},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,g){var p=n?n+l:l;if(!this._events[p])return!1;var w=this._events[p],_=arguments.length,k,T;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,g),!0}for(T=1,k=new Array(_-1);T<_;T++)k[T-1]=arguments[T];w.fn.apply(w.context,k)}else{var R=w.length,E;for(T=0;T<R;T++)switch(w[T].once&&this.removeListener(l,w[T].fn,void 0,!0),_){case 1:w[T].fn.call(w[T].context);break;case 2:w[T].fn.call(w[T].context,u);break;case 3:w[T].fn.call(w[T].context,u,d);break;case 4:w[T].fn.call(w[T].context,u,d,h);break;default:if(!k)for(E=1,k=new Array(_-1);E<_;E++)k[E-1]=arguments[E];w[T].fn.apply(w[T].context,k)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===u&&(!h||g.once)&&(!d||g.context===d)&&o(this,f);else{for(var p=0,w=[],_=g.length;p<_;p++)(g[p].fn!==u||h&&!g[p].once||d&&g[p].context!==d)&&w.push(g[p]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(FC);var me=(t=>(t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported",t))(me||{}),vd=(t=>(t.Mainnet="mainnet",t.Testnet="testnet",t.Devnet="devnet",t))(vd||{});class Xn extends Xc{get connected(){return!!this.publicAccount.publicKey}}function gi(t){if(typeof window>"u"||typeof document>"u")return;const e=[];function n(){if(t())for(const s of e)s()}const i=setInterval(n,1e3);e.push(()=>clearInterval(i)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",n))),document.readyState!=="complete"&&(window.addEventListener("load",n,{once:!0}),e.push(()=>window.removeEventListener("load",n))),n()}const UC="Petra";class LC extends Xn{constructor({timeout:n=1e4}={}){super();v(this,"name",UC);v(this,"url","https://chrome.google.com/webstore/detail/petra-aptos-wallet/ejjladinnckdgjemekebdpeokbikhfci");v(this,"icon","https://raw.githubusercontent.com/hippospace/aptos-wallet-adapter/main/logos/petra.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.aptos:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>window.aptos?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const n=this._provider||window.aptos,i=await(n==null?void 0:n.connect());this._wallet={address:i==null?void 0:i.address,publicKey:i==null?void 0:i.publicKey,isConnected:!0};try{const r=await(n==null?void 0:n.network()),s=null,o=null;this._network=r,this._chainId=s,this._api=o}catch(r){const s=r.message;throw this.emit("error",new Sr(s)),r}this.emit("connect",this._wallet.publicKey)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}}async disconnect(){const n=this._wallet,i=this._provider||window.aptos;if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(r){this.emit("error",new Yn(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(n,i){try{const r=this._wallet,s=this._provider||window.aptos;if(!r||!s)throw new Ae;const o=await s.signTransaction(n,i);if(o.code)throw new Error(o.message);return o}catch(r){const s=r.message;throw this.emit("error",new kn(s)),r}}async signAndSubmitTransaction(n,i){try{const r=this._wallet,s=this._provider||window.aptos;if(!r||!s)throw new Ae;const o=await s.signAndSubmitTransaction(n,i);if(o.code)throw new Error(o.message);return o}catch(r){const s=r.message;throw this.emit("error",new Oi(s)),r}}async signMessage(n){try{const i=this._wallet,r=this._provider||window.aptos;if(!i||!r)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const s=await(r==null?void 0:r.signMessage(n));if(s)return s;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider||window.aptos;if(!n||!i)throw new Ae;const r=async s=>{var o,a,c,l,u,d;if(s!=null&&s.publicKey)this._wallet={...this._wallet,publicKey:s.publicKey||((o=this._wallet)==null?void 0:o.publicKey),authKey:s.authKey||((a=this._wallet)==null?void 0:a.authKey),address:s.address||((c=this._wallet)==null?void 0:c.address)};else{const h=await(i==null?void 0:i.connect());this._wallet={...this._wallet,authKey:(h==null?void 0:h.authKey)||((l=this._wallet)==null?void 0:l.authKey),address:(h==null?void 0:h.address)||((u=this._wallet)==null?void 0:u.address),publicKey:(h==null?void 0:h.publicKey)||((d=this._wallet)==null?void 0:d.publicKey)}}this.emit("accountChange",s.publicKey)};await(i==null?void 0:i.onAccountChange(r))}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider||window.aptos;if(!n||!i)throw new Ae;const r=async s=>{this._network=s.networkName,this.emit("networkChange",this._network)};await(i==null?void 0:i.onNetworkChange(r))}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}const $C="Martian";class zC extends Xn{constructor({timeout:n=1e4}={}){super();v(this,"name",$C);v(this,"url","https://chrome.google.com/webstore/detail/martian-wallet/efbglgofoippbgcjepnhiblaibcnclgk");v(this,"icon","https://raw.githubusercontent.com/hippospace/aptos-wallet-adapter/main/logos/martian.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.martian:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>window.martian?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||window.martian;if(await(i==null?void 0:i.isConnected())&&await(i==null?void 0:i.disconnect()),!await(i==null?void 0:i.connect()))throw new Ae("No connect response");const o=await(i==null?void 0:i.account());if(o){this._wallet={...o,isConnected:!0};try{const a=await(i==null?void 0:i.network()),{chainId:c}=await(i==null?void 0:i.getChainId())||{chainId:""},l=null;this._network=a,this._chainId=c.toString(),this._api=l}catch(a){const c=a.message;throw this.emit("error",new Sr(c)),a}}this.emit("connect",((n=this._wallet)==null?void 0:n.address)||"")}catch(i){throw this.emit("error",new Error(i)),i}finally{this._connecting=!1}}async disconnect(){const n=this._wallet,i=this._provider||window.martian;if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(r){this.emit("error",new Yn(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(n,i){try{const r=this._wallet,s=this._provider||window.martian;if(!r||!s)throw new Ae;const o=await s.generateTransaction(r.address||"",n,i);if(!o)throw new Error("Cannot generate transaction");const a=await(s==null?void 0:s.signTransaction(o));if(!a)throw new Error("No response");return a}catch(r){throw this.emit("error",new kn(r)),r}}async signAndSubmitTransaction(n,i){try{const r=this._wallet,s=this._provider||window.martian;if(!r||!s)throw new Ae;const o=await s.generateTransaction(r.address||"",n,i);if(!o)throw new Error("Cannot generate transaction");const a=await(s==null?void 0:s.signAndSubmitTransaction(o));if(!a)throw new Error("No response");return{hash:a}}catch(r){throw this.emit("error",new Oi(r)),r}}async signMessage(n){try{const i=this._wallet,r=this._provider||window.martian;if(!i||!r)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const s=await(r==null?void 0:r.signMessage(n));if(s)return s;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider||window.martian;if(!n||!i)throw new Ae;const r=async s=>{const{publicKey:o}=await(i==null?void 0:i.account());this._wallet={...this._wallet,address:s,publicKey:o},this.emit("accountChange",s)};await(i==null?void 0:i.onAccountChange(r))}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider||window.martian;if(!n||!i)throw new Ae;const r=async s=>{this._network=s,this.emit("networkChange",this._network)};await(i==null?void 0:i.onNetworkChange(r))}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}var Hs={};const qC=Zp(P2);var u_={},rc={};Object.defineProperty(rc,"__esModule",{value:!0});rc.toDecimal=rc.toHuman=void 0;const VC=(t,e,n=3,i=",")=>{if(t.length<e)return t.length+n<e?"0":`0${i}${t.slice(0,Math.min(n,e))}`;{const r=t.length-e,s=`${t.slice(r,Math.min(n,e))}`;return s!==""?`${t.slice(0,r)}${i}${s}`:`${t.slice(0,r)}`}};rc.toHuman=VC;const WC=(t,e,n=".")=>{var i=t.split(n);if(i.length!==2)throw new Error("Invalid number");const r=i[0]==="0"?"":i[0],s=i[1].length<=e?`${i[1]}${"0".repeat(e-i[1].length)}`:`${i[1].slice(0,e)}`;return r+s};rc.toDecimal=WC;var mh={};Object.defineProperty(mh,"__esModule",{value:!0});mh.isUrl=void 0;const KC=t=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t);mh.isUrl=KC;(function(t){var e=At&&At.__createBinding||(Object.create?function(i,r,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(r,s);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(i,o,a)}:function(i,r,s,o){o===void 0&&(o=s),i[o]=r[s]}),n=At&&At.__exportStar||function(i,r){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(rc,t),n(mh,t)})(u_);var ag={};Object.defineProperty(ag,"__esModule",{value:!0});class ZC{constructor(e){v(this,"provider");return this.provider=e,this}}ag.default=ZC;var Qs={},vl={};Object.defineProperty(vl,"__esModule",{value:!0});vl.createReponse=void 0;const HC=(t,e,n)=>({method:t,status:e,data:n});vl.createReponse=HC;Object.defineProperty(Qs,"__esModule",{value:!0});Qs.MartianMask=Qs.MartianMaskToken=Qs.MartianMaskSDK=void 0;const $t=vl;class d_{constructor(e){v(this,"provider");this.provider=e}async getAccountResources(e,n){const i=await this.provider.getAccountResources(e);return(0,$t.createReponse)("getAccountResources",200,i)}async getAccount(e){const n=await this.provider.getAccount(e);return(0,$t.createReponse)("getAccount",200,n)}async getTransactions(e){let n=null;return e?n=await this.provider.getTransactions(e):n=await this.provider.getTransactions(),(0,$t.createReponse)("getTransactions",200,n)}async getAccountTransactions(e,n){const i=await this.provider.getAccountTransactions(e);return(0,$t.createReponse)("getAccountTransactions",200,i)}async getTransactionByHash(e){const n=await this.provider.getTransaction(e);return(0,$t.createReponse)("getTransactionByHash",200,n)}async getChainId(){const e=await this.provider.getChainId();return(0,$t.createReponse)("getChainId",200,e)}}Qs.MartianMaskSDK=d_;class h_{constructor(e){v(this,"provider");this.provider=e}async createCollection(e,n,i,r){const s=await this.provider.createCollection(e,n,i);return(0,$t.createReponse)("createCollection",200,s)}async createToken(e,n,i,r,s,o,a,c,l,u,d,h){const f=await this.provider.createToken(e,n,i,r,s,1);return(0,$t.createReponse)("createToken",200,f)}}Qs.MartianMaskToken=h_;class QC{constructor(e){v(this,"provider");v(this,"user");v(this,"sdk");v(this,"token");this.provider=e,this.sdk=new d_(e),this.token=new h_(e)}setUser(e){this.user=e}async reConnect(){const e=await this.provider.connect();if(e){const n={address:e.address,publicKey:e.publicKey};this.setUser(n)}}async connect(){const e=await this.provider.connect();if(e){const n={address:e.address,publicKey:e.publicKey};this.setUser(n)}return(0,$t.createReponse)("connect",200,e)}async disconnect(){const e=await this.provider.disconnect();return this.setUser(null),(0,$t.createReponse)("disconnect",200,e)}async isConnected(){return this.user.address&&this.user.publicKey?(0,$t.createReponse)("isConnected",200,!0):(0,$t.createReponse)("isConnected",200,!1)}async account(){return this.user||await this.reConnect(),(0,$t.createReponse)("account",200,this.user)}async getNetwork(){const e=await this.provider.network();return console.log("7s62::getNetwork:",e),(0,$t.createReponse)("getNetwork",200,e)}async getNetworkURL(){const e=await this.provider.network();return console.log("7s62::getNetworkURL:",e),(0,$t.createReponse)("getNetworkURL",200,e)}async getBalance(){console.log("7s62::getBalance");const e=await this.provider.legacy.getAccountBalance();return console.log("7s62::getBalance:",e),(0,$t.createReponse)("getAccountBalance",200,e)}async generateTransaction(e,n){console.log("7s62::generateTransaction"),this.user||await this.reConnect();const i=await this.provider.generateTransaction(this.user.address,e);return(0,$t.createReponse)("generateTransaction",200,i)}async signTransaction(e){const n=await this.provider.signTransaction(e);return(0,$t.createReponse)("signTransaction",200,n)}async submitTransaction(e){const n=await this.provider.submitTransaction(e);return(0,$t.createReponse)("submitTransaction",200,n)}async generateSignSubmitTransaction(e,n){console.log("7s62::generateSignSubmitTransaction"),this.user||await this.reConnect();const i=await this.provider.generateTransaction(this.user.address,e),r=await this.provider.signTransaction(i),s=await this.provider.submitTransaction(r);return(0,$t.createReponse)("generateSignSubmitTransaction",200,s)}async signAndSubmitTransaction(e){const n=await this.provider.signAndSubmitTransaction(e);return(0,$t.createReponse)("signAndSubmit",200,n)}async signMessage(e){const n=await this.provider.signMessage(e);return(0,$t.createReponse)("signMessage",200,n)}async createCollection(e,n,i,r){const s=await this.provider.createCollection(e,n,i,r);return(0,$t.createReponse)("createCollection",200,s)}async createToken(e,n,i,r,s,o,a,c,l,u,d,h){const f=await this.provider.createToken(e,n,i,r,s,o,a,c,l,u,d,h);return(0,$t.createReponse)("createToken",200,f)}async getTransactionByHash(e){const n=await this.provider.getTransaction(e);return(0,$t.createReponse)("getTransactionByHash",200,n)}async getLedgerInfo(){const e=await this.provider.getLedgerInfo();return(0,$t.createReponse)("getLedgerInfo",200,e)}}Qs.MartianMask=QC;var wh={};Object.defineProperty(wh,"__esModule",{value:!0});wh.PetraMask=void 0;const tr=vl;class GC{constructor(e){v(this,"provider");this.provider=e}async connect(){if(await this.provider.connect()){const n=await this.provider.account();return(0,tr.createReponse)("connect",200,n)}return(0,tr.createReponse)("connect",400,null)}async account(){if(await this.provider.isConnected()){const n=await this.provider.account();return(0,tr.createReponse)("isConnected",200,n)}return(0,tr.createReponse)("isConnected",400,null)}async isConnected(){const e=await this.provider.isConnected();return(0,tr.createReponse)("isConnected",200,e)}async disconnect(){return await this.provider.disconnect()?(0,tr.createReponse)("disconnect",200,!0):(0,tr.createReponse)("disconnect",400,!1)}async getNetwork(){const e=await this.provider.network();return(0,tr.createReponse)("network",200,e)}async signAndSubmitTransaction(e){const n=await this.provider.signAndSubmitTransaction(e);return(0,tr.createReponse)("signAndSubmitTransaction",200,n)}async signTransaction(e){const n=await this.provider.signTransaction(e);return(0,tr.createReponse)("signTransaction",200,n)}async signMessage(e){const n=await this.provider.signMessage(e);return(0,tr.createReponse)("signMessage",200,n)}}wh.PetraMask=GC;var YC=At&&At.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),XC=At&&At.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),f_=At&&At.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&YC(e,t,n);return XC(e,t),e},JC=At&&At.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Web3Provider=Hs.utils=Hs.Aptos=void 0;const eI=f_(qC);Hs.Aptos=eI;const tI=f_(u_);Hs.utils=tI;const Oc=JC(ag);Hs.Web3Provider=Oc.default;const nI=Qs,iI=wh;class rI{constructor(e){v(this,"action");return e?e.isFewcha?this.action=new Oc.default(e).provider:e._isConnected!==void 0?this.action=new nI.MartianMask(e):this.action=new iI.PetraMask(e):(this.action=new Oc.default(window.fewcha).provider,window.addEventListener("fewcha#initialized",()=>{this.action=new Oc.default(window.fewcha).provider}),window.addEventListener("martian#initialized",()=>{this.action=new Oc.default(window.martian).provider})),this}setProvider(e){return this.action=e.provider,this}}var sI=Hs.default=rI;const oI="Fewcha";class aI extends Xn{constructor({timeout:n=1e4}={}){super();v(this,"name",oI);v(this,"url","https://fewcha.app/");v(this,"icon","https://miro.medium.com/fit/c/176/176/1*a0WaY-q7gjCRiuryRG6TkQ.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._network=void 0,this._provider=typeof window<"u"?new sI().action:void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>{var i;return(i=window==null?void 0:window.fewcha)!=null&&i.aptos?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.connected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||((n=window==null?void 0:window.fewcha)==null?void 0:n.aptos),r=await i.isConnected();(r==null?void 0:r.data)===!0&&await i.disconnect();const s=await i.connect();if(s.status===401)throw new af("User has rejected the connection");if(s.status!==200)throw new af("Wallet connect issue");let o={...s.data};if(!o.publicKey){const a=await i.account();if(!a.data.publicKey)throw new af("Wallet connect issue",s.data);o={...a.data}}this._wallet={connected:!0,...o};try{const{data:a}=await(i==null?void 0:i.getNetwork()),c=null,l=null;this._network=a,this._chainId=c,this._api=l}catch(a){const c=a.message;throw this.emit("error",new Sr(c)),a}this.emit("connect",this._wallet.publicKey)}catch(i){throw this.emit("error",i),i}finally{this._connecting=!1}}async disconnect(){var i;const n=this._provider||((i=window==null?void 0:window.fewcha)==null?void 0:i.aptos);if(n)try{if((await n.disconnect()).data===!0)this._provider=void 0,this._wallet=null;else throw new Error("Disconnect failed")}catch(r){throw this.emit("error",new Yn(r==null?void 0:r.message,r)),r}this.emit("disconnect")}async signTransaction(n,i){var r;try{if(!this._wallet)throw new Ae;const o=this._provider||((r=window==null?void 0:window.fewcha)==null?void 0:r.aptos),a=await o.generateTransaction(n,i);if(!a)throw new Error("Cannot generate transaction");const c=await(o==null?void 0:o.signTransaction(a.data));if(!c||c.status!==200)throw new Error("No response");return c.data}catch(s){const o=s instanceof Error?s.message:s.response.data.message;throw this.emit("error",new kn(o)),s}}async signAndSubmitTransaction(n,i){var r;try{if(!this._wallet)throw new Ae;const o=this._provider||((r=window==null?void 0:window.fewcha)==null?void 0:r.aptos),a=await o.generateTransaction(n,i);if(!a)throw new Error("Cannot generate transaction");const c=await(o==null?void 0:o.signAndSubmitTransaction(a.data));if(c.status===401)throw new Error("User has rejected the transaction");if(c.status!==200)throw new Error("Transaction issue");return{hash:c.data}}catch(s){const o=s instanceof Error?s.message:s.response.data.message;throw this.emit("error",new Oi(o)),s}}async signMessage(n){var i;try{const r=this._wallet,s=this._provider||((i=window==null?void 0:window.fewcha)==null?void 0:i.aptos);if(!r||!s)throw new Ae;const o=await(s==null?void 0:s.signMessage(n));if(o)return o.data;throw new Error("Sign Message failed")}catch(r){const s=r.message;throw this.emit("error",new Kt(s)),r}}async onAccountChange(){var n;try{const i=this._wallet,r=this._provider||((n=window==null?void 0:window.fewcha)==null?void 0:n.aptos);if(!i||!r)throw new Ae}catch(i){const r=i.message;throw this.emit("error",new fi(r)),i}}async onNetworkChange(){var n;try{const i=this._wallet,r=this._provider||((n=window==null?void 0:window.fewcha)==null?void 0:n.aptos);if(!i||!r)throw new Ae}catch(i){const r=i.message;throw this.emit("error",new pi(r)),i}}}const cI="Pontem";class lI extends Xn{constructor({timeout:n=1e4}={}){super();v(this,"name",cI);v(this,"url","https://chrome.google.com/webstore/detail/pontem-wallet/phkbamefinggmakgklpkljjmgibohnba");v(this,"icon","https://www.gitbook.com/cdn-cgi/image/width=20,height=20,fit=contain,dpr=2,format=auto/https%3A%2F%2F736486047-files.gitbook.io%2F~%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-MVVJKmKQGx983dZy_jr%252Favatar-1619180126965.png%3Fgeneration%3D1619180127194239%26alt%3Dmedia");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.pontem:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>window.pontem?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||window.pontem;await(i==null?void 0:i.isConnected())&&await(i==null?void 0:i.disconnect());const s=await(i==null?void 0:i.connect());if(!s)throw new Ae("No connect response");const o=s.address,a=s.publicKey;if(o){this._wallet={address:o,publicKey:a,isConnected:!0};try{const c=await(i==null?void 0:i.network());this._network=c.name,this._chainId=c.chainId,this._api=c.api}catch(c){const l=c.message;throw this.emit("error",new Sr(l)),c}}this.emit("connect",((n=this._wallet)==null?void 0:n.address)||"")}catch(i){throw this.emit("error",new Error("User has rejected the connection")),i}finally{this._connecting=!1}}async disconnect(){const n=this._wallet,i=this._provider||window.pontem;if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(r){this.emit("error",new Yn(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(n,i){try{const r=this._wallet,s=this._provider||window.pontem;if(!r||!s)throw new Ae;return await(s==null?void 0:s.signTransaction(n,i))}catch(r){throw this.emit("error",new kn(r)),r}}async signAndSubmitTransaction(n,i){try{const r=this._wallet,s=this._provider||window.pontem;if(!r||!s)throw new Ae;const o=await(s==null?void 0:s.signAndSubmit(n,i));if(!o||!o.success)throw new Error("No response");return{hash:o.result.hash}}catch(r){throw this.emit("error",new Oi(r.message)),r}}async signMessage(n){try{const i=this._wallet,r=this._provider||window.pontem;if(!i||!r)throw new Ae;const s=await(r==null?void 0:r.signMessage(n));if(s.success)return s.result;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider||window.pontem;if(!n||!i)throw new Ae;const r=async s=>{if(s===void 0){this.connected&&await(i==null?void 0:i.disconnect());return}const o=await(i==null?void 0:i.publicKey());this._wallet={...this._wallet,address:s,publicKey:o},this.emit("accountChange",s)};await(i==null?void 0:i.onAccountChange(r))}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider||window.pontem;if(!n||!i)throw new Ae;const r=s=>{this._network=s.name,this._api=s.api,this._chainId=s.chainId,this._network&&this.emit("networkChange",this._network)};await(i==null?void 0:i.onNetworkChange(r))}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}var aw={},uI={get exports(){return aw},set exports(t){aw=t}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",n="finalize already called",i=typeof window=="object",r=i?window:{};r.JS_SHA3_NO_WINDOW&&(i=!1);var s=!i&&typeof self=="object",o=!r.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?r=At:s&&(r=self);var a=!r.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!r.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],h=[1,256,65536,16777216],f=[6,1536,393216,100663296],g=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],w=[224,256,384,512],_=[128,256],k=["hex","buffer","arrayBuffer","array","digest"],T={128:168,256:136};(r.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(b){return Object.prototype.toString.call(b)==="[object Array]"}),c&&(r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(b){return typeof b=="object"&&b.buffer&&b.buffer.constructor===ArrayBuffer});for(var R=function(b,j,V){return function(Q){return new ge(b,j,b).update(Q)[V]()}},E=function(b,j,V){return function(Q,re){return new ge(b,j,re).update(Q)[V]()}},D=function(b,j,V){return function(Q,re,Se,Me){return ze["cshake"+b].update(Q,re,Se,Me)[V]()}},B=function(b,j,V){return function(Q,re,Se,Me){return ze["kmac"+b].update(Q,re,Se,Me)[V]()}},$=function(b,j,V,Q){for(var re=0;re<k.length;++re){var Se=k[re];b[Se]=j(V,Q,Se)}return b},Y=function(b,j){var V=R(b,j,"hex");return V.create=function(){return new ge(b,j,b)},V.update=function(Q){return V.create().update(Q)},$(V,R,b,j)},z=function(b,j){var V=E(b,j,"hex");return V.create=function(Q){return new ge(b,j,Q)},V.update=function(Q,re){return V.create(re).update(Q)},$(V,E,b,j)},H=function(b,j){var V=T[b],Q=D(b,j,"hex");return Q.create=function(re,Se,Me){return!Se&&!Me?ze["shake"+b].create(re):new ge(b,j,re).bytepad([Se,Me],V)},Q.update=function(re,Se,Me,Ce){return Q.create(Se,Me,Ce).update(re)},$(Q,D,b,j)},ie=function(b,j){var V=T[b],Q=B(b,j,"hex");return Q.create=function(re,Se,Me){return new qe(b,j,Se).bytepad(["KMAC",Me],V).bytepad([re],V)},Q.update=function(re,Se,Me,Ce){return Q.create(re,Me,Ce).update(Se)},$(Q,B,b,j)},ke=[{name:"keccak",padding:h,bits:w,createMethod:Y},{name:"sha3",padding:f,bits:w,createMethod:Y},{name:"shake",padding:u,bits:_,createMethod:z},{name:"cshake",padding:d,bits:_,createMethod:H},{name:"kmac",padding:d,bits:_,createMethod:ie}],ze={},se=[],le=0;le<ke.length;++le)for(var Ne=ke[le],he=Ne.bits,J=0;J<he.length;++J){var ve=Ne.name+"_"+he[J];if(se.push(ve),ze[ve]=Ne.createMethod(he[J],Ne.padding),Ne.name!=="sha3"){var ye=Ne.name+he[J];se.push(ye),ze[ye]=ze[ve]}}function ge(b,j,V){this.blocks=[],this.s=[],this.padding=j,this.outputBits=V,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(b<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=V>>5,this.extraBytes=(V&31)>>3;for(var Q=0;Q<50;++Q)this.s[Q]=0}ge.prototype.update=function(b){if(this.finalized)throw new Error(n);var j,V=typeof b;if(V!=="string"){if(V==="object"){if(b===null)throw new Error(e);if(c&&b.constructor===ArrayBuffer)b=new Uint8Array(b);else if(!Array.isArray(b)&&(!c||!ArrayBuffer.isView(b)))throw new Error(e)}else throw new Error(e);j=!0}for(var Q=this.blocks,re=this.byteCount,Se=b.length,Me=this.blockCount,Ce=0,Ve=this.s,De,mt;Ce<Se;){if(this.reset)for(this.reset=!1,Q[0]=this.block,De=1;De<Me+1;++De)Q[De]=0;if(j)for(De=this.start;Ce<Se&&De<re;++Ce)Q[De>>2]|=b[Ce]<<g[De++&3];else for(De=this.start;Ce<Se&&De<re;++Ce)mt=b.charCodeAt(Ce),mt<128?Q[De>>2]|=mt<<g[De++&3]:mt<2048?(Q[De>>2]|=(192|mt>>6)<<g[De++&3],Q[De>>2]|=(128|mt&63)<<g[De++&3]):mt<55296||mt>=57344?(Q[De>>2]|=(224|mt>>12)<<g[De++&3],Q[De>>2]|=(128|mt>>6&63)<<g[De++&3],Q[De>>2]|=(128|mt&63)<<g[De++&3]):(mt=65536+((mt&1023)<<10|b.charCodeAt(++Ce)&1023),Q[De>>2]|=(240|mt>>18)<<g[De++&3],Q[De>>2]|=(128|mt>>12&63)<<g[De++&3],Q[De>>2]|=(128|mt>>6&63)<<g[De++&3],Q[De>>2]|=(128|mt&63)<<g[De++&3]);if(this.lastByteIndex=De,De>=re){for(this.start=De-re,this.block=Q[Me],De=0;De<Me;++De)Ve[De]^=Q[De];ee(Ve),this.reset=!0}else this.start=De}return this},ge.prototype.encode=function(b,j){var V=b&255,Q=1,re=[V];for(b=b>>8,V=b&255;V>0;)re.unshift(V),b=b>>8,V=b&255,++Q;return j?re.push(Q):re.unshift(Q),this.update(re),re.length},ge.prototype.encodeString=function(b){var j,V=typeof b;if(V!=="string"){if(V==="object"){if(b===null)throw new Error(e);if(c&&b.constructor===ArrayBuffer)b=new Uint8Array(b);else if(!Array.isArray(b)&&(!c||!ArrayBuffer.isView(b)))throw new Error(e)}else throw new Error(e);j=!0}var Q=0,re=b.length;if(j)Q=re;else for(var Se=0;Se<b.length;++Se){var Me=b.charCodeAt(Se);Me<128?Q+=1:Me<2048?Q+=2:Me<55296||Me>=57344?Q+=3:(Me=65536+((Me&1023)<<10|b.charCodeAt(++Se)&1023),Q+=4)}return Q+=this.encode(Q*8),this.update(b),Q},ge.prototype.bytepad=function(b,j){for(var V=this.encode(j),Q=0;Q<b.length;++Q)V+=this.encodeString(b[Q]);var re=j-V%j,Se=[];return Se.length=re,this.update(Se),this},ge.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var b=this.blocks,j=this.lastByteIndex,V=this.blockCount,Q=this.s;if(b[j>>2]|=this.padding[j&3],this.lastByteIndex===this.byteCount)for(b[0]=b[V],j=1;j<V+1;++j)b[j]=0;for(b[V-1]|=2147483648,j=0;j<V;++j)Q[j]^=b[j];ee(Q)}},ge.prototype.toString=ge.prototype.hex=function(){this.finalize();for(var b=this.blockCount,j=this.s,V=this.outputBlocks,Q=this.extraBytes,re=0,Se=0,Me="",Ce;Se<V;){for(re=0;re<b&&Se<V;++re,++Se)Ce=j[re],Me+=l[Ce>>4&15]+l[Ce&15]+l[Ce>>12&15]+l[Ce>>8&15]+l[Ce>>20&15]+l[Ce>>16&15]+l[Ce>>28&15]+l[Ce>>24&15];Se%b===0&&(ee(j),re=0)}return Q&&(Ce=j[re],Me+=l[Ce>>4&15]+l[Ce&15],Q>1&&(Me+=l[Ce>>12&15]+l[Ce>>8&15]),Q>2&&(Me+=l[Ce>>20&15]+l[Ce>>16&15])),Me},ge.prototype.arrayBuffer=function(){this.finalize();var b=this.blockCount,j=this.s,V=this.outputBlocks,Q=this.extraBytes,re=0,Se=0,Me=this.outputBits>>3,Ce;Q?Ce=new ArrayBuffer(V+1<<2):Ce=new ArrayBuffer(Me);for(var Ve=new Uint32Array(Ce);Se<V;){for(re=0;re<b&&Se<V;++re,++Se)Ve[Se]=j[re];Se%b===0&&ee(j)}return Q&&(Ve[re]=j[re],Ce=Ce.slice(0,Me)),Ce},ge.prototype.buffer=ge.prototype.arrayBuffer,ge.prototype.digest=ge.prototype.array=function(){this.finalize();for(var b=this.blockCount,j=this.s,V=this.outputBlocks,Q=this.extraBytes,re=0,Se=0,Me=[],Ce,Ve;Se<V;){for(re=0;re<b&&Se<V;++re,++Se)Ce=Se<<2,Ve=j[re],Me[Ce]=Ve&255,Me[Ce+1]=Ve>>8&255,Me[Ce+2]=Ve>>16&255,Me[Ce+3]=Ve>>24&255;Se%b===0&&ee(j)}return Q&&(Ce=Se<<2,Ve=j[re],Me[Ce]=Ve&255,Q>1&&(Me[Ce+1]=Ve>>8&255),Q>2&&(Me[Ce+2]=Ve>>16&255)),Me};function qe(b,j,V){ge.call(this,b,j,V)}qe.prototype=new ge,qe.prototype.finalize=function(){return this.encode(this.outputBits,!0),ge.prototype.finalize.call(this)};var ee=function(b){var j,V,Q,re,Se,Me,Ce,Ve,De,mt,qn,Jn,Ji,er,Ri,ei,nn,ti,_i,dn,Bi,C,m,y,x,F,W,te,nt,jt,It,Rt,wt,io,ro,so,oo,ao,co,lo,uo,ho,fo,po,go,$l,zl,ql,Vl,Wl,Kl,Zl,Hl,Ql,Gl,Yl,Xl,Jl,eu,tu,nu,iu,ru;for(Q=0;Q<48;Q+=2)re=b[0]^b[10]^b[20]^b[30]^b[40],Se=b[1]^b[11]^b[21]^b[31]^b[41],Me=b[2]^b[12]^b[22]^b[32]^b[42],Ce=b[3]^b[13]^b[23]^b[33]^b[43],Ve=b[4]^b[14]^b[24]^b[34]^b[44],De=b[5]^b[15]^b[25]^b[35]^b[45],mt=b[6]^b[16]^b[26]^b[36]^b[46],qn=b[7]^b[17]^b[27]^b[37]^b[47],Jn=b[8]^b[18]^b[28]^b[38]^b[48],Ji=b[9]^b[19]^b[29]^b[39]^b[49],j=Jn^(Me<<1|Ce>>>31),V=Ji^(Ce<<1|Me>>>31),b[0]^=j,b[1]^=V,b[10]^=j,b[11]^=V,b[20]^=j,b[21]^=V,b[30]^=j,b[31]^=V,b[40]^=j,b[41]^=V,j=re^(Ve<<1|De>>>31),V=Se^(De<<1|Ve>>>31),b[2]^=j,b[3]^=V,b[12]^=j,b[13]^=V,b[22]^=j,b[23]^=V,b[32]^=j,b[33]^=V,b[42]^=j,b[43]^=V,j=Me^(mt<<1|qn>>>31),V=Ce^(qn<<1|mt>>>31),b[4]^=j,b[5]^=V,b[14]^=j,b[15]^=V,b[24]^=j,b[25]^=V,b[34]^=j,b[35]^=V,b[44]^=j,b[45]^=V,j=Ve^(Jn<<1|Ji>>>31),V=De^(Ji<<1|Jn>>>31),b[6]^=j,b[7]^=V,b[16]^=j,b[17]^=V,b[26]^=j,b[27]^=V,b[36]^=j,b[37]^=V,b[46]^=j,b[47]^=V,j=mt^(re<<1|Se>>>31),V=qn^(Se<<1|re>>>31),b[8]^=j,b[9]^=V,b[18]^=j,b[19]^=V,b[28]^=j,b[29]^=V,b[38]^=j,b[39]^=V,b[48]^=j,b[49]^=V,er=b[0],Ri=b[1],$l=b[11]<<4|b[10]>>>28,zl=b[10]<<4|b[11]>>>28,te=b[20]<<3|b[21]>>>29,nt=b[21]<<3|b[20]>>>29,tu=b[31]<<9|b[30]>>>23,nu=b[30]<<9|b[31]>>>23,ho=b[40]<<18|b[41]>>>14,fo=b[41]<<18|b[40]>>>14,io=b[2]<<1|b[3]>>>31,ro=b[3]<<1|b[2]>>>31,ei=b[13]<<12|b[12]>>>20,nn=b[12]<<12|b[13]>>>20,ql=b[22]<<10|b[23]>>>22,Vl=b[23]<<10|b[22]>>>22,jt=b[33]<<13|b[32]>>>19,It=b[32]<<13|b[33]>>>19,iu=b[42]<<2|b[43]>>>30,ru=b[43]<<2|b[42]>>>30,Ql=b[5]<<30|b[4]>>>2,Gl=b[4]<<30|b[5]>>>2,so=b[14]<<6|b[15]>>>26,oo=b[15]<<6|b[14]>>>26,ti=b[25]<<11|b[24]>>>21,_i=b[24]<<11|b[25]>>>21,Wl=b[34]<<15|b[35]>>>17,Kl=b[35]<<15|b[34]>>>17,Rt=b[45]<<29|b[44]>>>3,wt=b[44]<<29|b[45]>>>3,y=b[6]<<28|b[7]>>>4,x=b[7]<<28|b[6]>>>4,Yl=b[17]<<23|b[16]>>>9,Xl=b[16]<<23|b[17]>>>9,ao=b[26]<<25|b[27]>>>7,co=b[27]<<25|b[26]>>>7,dn=b[36]<<21|b[37]>>>11,Bi=b[37]<<21|b[36]>>>11,Zl=b[47]<<24|b[46]>>>8,Hl=b[46]<<24|b[47]>>>8,po=b[8]<<27|b[9]>>>5,go=b[9]<<27|b[8]>>>5,F=b[18]<<20|b[19]>>>12,W=b[19]<<20|b[18]>>>12,Jl=b[29]<<7|b[28]>>>25,eu=b[28]<<7|b[29]>>>25,lo=b[38]<<8|b[39]>>>24,uo=b[39]<<8|b[38]>>>24,C=b[48]<<14|b[49]>>>18,m=b[49]<<14|b[48]>>>18,b[0]=er^~ei&ti,b[1]=Ri^~nn&_i,b[10]=y^~F&te,b[11]=x^~W&nt,b[20]=io^~so&ao,b[21]=ro^~oo&co,b[30]=po^~$l&ql,b[31]=go^~zl&Vl,b[40]=Ql^~Yl&Jl,b[41]=Gl^~Xl&eu,b[2]=ei^~ti&dn,b[3]=nn^~_i&Bi,b[12]=F^~te&jt,b[13]=W^~nt&It,b[22]=so^~ao&lo,b[23]=oo^~co&uo,b[32]=$l^~ql&Wl,b[33]=zl^~Vl&Kl,b[42]=Yl^~Jl&tu,b[43]=Xl^~eu&nu,b[4]=ti^~dn&C,b[5]=_i^~Bi&m,b[14]=te^~jt&Rt,b[15]=nt^~It&wt,b[24]=ao^~lo&ho,b[25]=co^~uo&fo,b[34]=ql^~Wl&Zl,b[35]=Vl^~Kl&Hl,b[44]=Jl^~tu&iu,b[45]=eu^~nu&ru,b[6]=dn^~C&er,b[7]=Bi^~m&Ri,b[16]=jt^~Rt&y,b[17]=It^~wt&x,b[26]=lo^~ho&io,b[27]=uo^~fo&ro,b[36]=Wl^~Zl&po,b[37]=Kl^~Hl&go,b[46]=tu^~iu&Ql,b[47]=nu^~ru&Gl,b[8]=C^~er&ei,b[9]=m^~Ri&nn,b[18]=Rt^~y&F,b[19]=wt^~x&W,b[28]=ho^~io&so,b[29]=fo^~ro&oo,b[38]=Zl^~po&$l,b[39]=Hl^~go&zl,b[48]=iu^~Ql&Yl,b[49]=ru^~Gl&Xl,b[0]^=p[Q],b[1]^=p[Q+1]};if(a)t.exports=ze;else for(le=0;le<se.length;++le)r[se[le]]=ze[se[le]]})()})(uI);const dI="Nightly";class hI extends Xn{constructor({timeout:n=1e4}={}){var i;super();v(this,"name",dI);v(this,"url","https://chrome.google.com/webstore/detail/nightly/fiikommddbeccaoicoejoniammnalkfa/related?hl=en&authuser=0");v(this,"icon","https://lh3.googleusercontent.com/_feXM9qulMM5w9BYMLzMpZrxW2WlBmdyg3SbETIoRsHdAD9PANnLCEPabC7lzEK0N8fOyyvFkY3746jk8l73zUErxhU=w128-h128-e365-rj-sc0x00ffffff");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(i=window.nightly)==null?void 0:i.aptos:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>{var r;return(r=window.nightly)!=null&&r.aptos?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||((n=window.nightly)==null?void 0:n.aptos),r=await(i==null?void 0:i.connect(()=>{this._wallet=null,this.emit("disconnect")}));this._wallet={publicKey:r==null?void 0:r.asString(),address:r==null?void 0:r.address(),isConnected:!0},this.emit("connect",this._wallet.publicKey||"");const s=await(i==null?void 0:i.network());this._chainId=s==null?void 0:s.chainId.toString(),this._api=s==null?void 0:s.api,this._network=s==null?void 0:s.network.toLocaleLowerCase()}catch(i){throw this.emit("error",i),i}finally{this._connecting=!1}}async disconnect(){var i;if(this._wallet){this._wallet=null;try{const r=this._provider||((i=window.nightly)==null?void 0:i.aptos);await(r==null?void 0:r.disconnect())}catch(r){this.emit("error",new Yn(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(n){var i;try{if(!this._wallet)throw new Ae;try{const s=this._provider||((i=window.nightly)==null?void 0:i.aptos),o=await(s==null?void 0:s.signTransaction(n,!1));if(o)return o;throw new Error("Transaction failed")}catch(s){throw new kn(s==null?void 0:s.message,s)}}catch(r){throw this.emit("error",r),r}}async signAllTransaction(n){var i;try{if(!this._wallet)throw new Ae;try{const s=this._provider||((i=window.nightly)==null?void 0:i.aptos),o=await(s==null?void 0:s.signAllTransactions(n));if(o)return o;throw new Error("Transaction failed")}catch(s){throw new kn(s==null?void 0:s.message,s)}}catch(r){throw this.emit("error",r),r}}async signAndSubmitTransaction(n){var i;try{if(!this._wallet)throw new Ae;try{const s=this._provider||((i=window.nightly)==null?void 0:i.aptos),o=await(s==null?void 0:s.signTransaction(n,!0));if(o)return o;throw new Error("Transaction failed")}catch(s){const o=s instanceof Error?s.message:s.response.data.message;throw new kn(o)}}catch(r){throw this.emit("error",r),r}}async signMessage(n){try{const i=this._wallet,r=this._provider||window.nightly.aptos;if(!i||!r)throw new Ae;const s=await(r==null?void 0:r.signMessage(n));if(s)return Buffer.from(s).toString("hex");throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider||window.nightly.aptos;if(!n||!i)throw new Ae}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider||window.nightly.aptos;if(!n||!i)throw new Ae}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}const fI="Spika";class pI extends Xn{constructor({timeout:n=1e4}={}){super();v(this,"name",fI);v(this,"url","https://chrome.google.com/webstore/detail/spika/fadkojdgchhfkdkklllhcphknohbmjmb");v(this,"icon","https://spika.app/assets/logo_400_nb.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.spika:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>window.spika?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const n=this._provider||window.spika;await(n==null?void 0:n.isConnected());const i=await(n==null?void 0:n.connect());(i==null?void 0:i.publicKey)!==void 0?this._wallet={publicKey:i==null?void 0:i.publicKey,address:i==null?void 0:i.account,authKey:i==null?void 0:i.authKey,isConnected:!0}:this._wallet={isConnected:!1},this.emit("connect",this._wallet.publicKey)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}}async disconnect(){if(this._wallet){this._wallet=null;try{const i=this._provider||window.spika;await(i==null?void 0:i.disconnect())}catch(i){this.emit("error",new Yn(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(n,i){try{const r=this._wallet,s=this._provider||window.spika;if(!r||!s)throw new Ae;const o=await(s==null?void 0:s.signTransaction(n,i));if(o)return o;throw new Error("Sign Transaction failed")}catch(r){const s=r.message;throw this.emit("error",new kn(s)),r}}async signAndSubmitTransaction(n,i){try{const r=this._wallet,s=this._provider||window.spika;if(!r||!s)throw new Ae;const o=await(s==null?void 0:s.signAndSubmitTransaction(n,i));if(o)return o;throw new Error("Transaction failed")}catch(r){const s=r.message;throw this.emit("error",new Oi(s)),r}}async signMessage(n){try{const i=this._wallet,r=this._provider||window.spika;if(!i||!r)throw new Ae;const s=await(r==null?void 0:r.signMessage(n));if(s)return s;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider||window.spika;if(!n||!i)throw new Ae}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider||window.spika;if(!n||!i)throw new Ae}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}const gI="Coin98";class mI extends Xn{constructor({timeout:n=1e4}={}){var i;super();v(this,"name",gI);v(this,"url","https://chrome.google.com/webstore/detail/coin98-wallet/aeachknmefphepccionboohckonoeemg");v(this,"icon","https://coin98.s3.ap-southeast-1.amazonaws.com/Coin/c98wallet.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(i=window.coin98)==null?void 0:i.aptos:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>{var r;return(r=window.coin98)!=null&&r.aptos?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||((n=window.coin98)==null?void 0:n.aptos);let r=await(i==null?void 0:i.connect());typeof r=="boolean"&&(r=await(i==null?void 0:i.account())),this._wallet={address:r==null?void 0:r.address,publicKey:r==null?void 0:r.publicKey,isConnected:!0};try{this._chainId=null,this._api=null}catch(s){const o=s.message;throw this.emit("error",new Sr(o)),s}this.emit("connect",this._wallet.publicKey)}catch(i){throw this.emit("error",i),i}finally{this._connecting=!1}}async disconnect(){var r;const n=this._wallet,i=this._provider||((r=window.coin98)==null?void 0:r.aptos);if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(s){this.emit("error",new Yn(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(n,i){var r;try{const s=this._wallet,o=this._provider||((r=window.coin98)==null?void 0:r.aptos);if(!s||!o)throw new Ae;const a=await o.signTransaction(n,i);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new kn(o)),s}}async signAndSubmitTransaction(n,i){var r;try{const s=this._wallet,o=this._provider||((r=window.coin98)==null?void 0:r.aptos);if(!s||!o)throw new Ae;const a=await o.signAndSubmitTransaction(n,i);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new Oi(o)),s}}async signMessage(n){var i;try{const r=this._wallet,s=this._provider||((i=window.coin98)==null?void 0:i.aptos);if(!r||!s)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(n));if(o)return o;throw new Error("Sign Message failed")}catch(r){const s=r.message;throw this.emit("error",new Kt(s)),r}}async onAccountChange(){var n;try{const i=this._wallet,r=this._provider||((n=window.coin98)==null?void 0:n.aptos);if(!i||!r)throw new Ae;const s=async o=>{var a,c,l,u;if(o!=null&&o.publicKey)this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),address:o.address||((c=this._wallet)==null?void 0:c.address)};else{const d=await(r==null?void 0:r.connect());this._wallet={...this._wallet,address:(d==null?void 0:d.address)||((l=this._wallet)==null?void 0:l.address),publicKey:(d==null?void 0:d.publicKey)||((u=this._wallet)==null?void 0:u.publicKey)}}this.emit("accountChange",o.publicKey)};r.on("accountChange",s)}catch(i){const r=i.message;throw this.emit("error",new fi(r)),i}}async onNetworkChange(){var n;try{const i=this._wallet,r=this._provider||((n=window.coin98)==null?void 0:n.aptos);if(!i||!r)throw new Ae}catch(i){const r=i.message;throw this.emit("error",new pi(r)),i}}}var Je={},yh={};yh.byteLength=_I;yh.toByteArray=vI;yh.fromByteArray=TI;var Pr=[],Li=[],wI=typeof Uint8Array<"u"?Uint8Array:Array,cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var oa=0,yI=cf.length;oa<yI;++oa)Pr[oa]=cf[oa],Li[cf.charCodeAt(oa)]=oa;Li["-".charCodeAt(0)]=62;Li["_".charCodeAt(0)]=63;function p_(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var i=n===e?0:4-n%4;return[n,i]}function _I(t){var e=p_(t),n=e[0],i=e[1];return(n+i)*3/4-i}function bI(t,e,n){return(e+n)*3/4-n}function vI(t){var e,n=p_(t),i=n[0],r=n[1],s=new wI(bI(t,i,r)),o=0,a=r>0?i-4:i,c;for(c=0;c<a;c+=4)e=Li[t.charCodeAt(c)]<<18|Li[t.charCodeAt(c+1)]<<12|Li[t.charCodeAt(c+2)]<<6|Li[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return r===2&&(e=Li[t.charCodeAt(c)]<<2|Li[t.charCodeAt(c+1)]>>4,s[o++]=e&255),r===1&&(e=Li[t.charCodeAt(c)]<<10|Li[t.charCodeAt(c+1)]<<4|Li[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function kI(t){return Pr[t>>18&63]+Pr[t>>12&63]+Pr[t>>6&63]+Pr[t&63]}function SI(t,e,n){for(var i,r=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),r.push(kI(i));return r.join("")}function TI(t){for(var e,n=t.length,i=n%3,r=[],s=16383,o=0,a=n-i;o<a;o+=s)r.push(SI(t,o,o+s>a?a:o+s));return i===1?(e=t[n-1],r.push(Pr[e>>2]+Pr[e<<4&63]+"==")):i===2&&(e=(t[n-2]<<8)+t[n-1],r.push(Pr[e>>10]+Pr[e>>4&63]+Pr[e<<2&63]+"=")),r.join("")}var cg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */cg.read=function(t,e,n,i,r){var s,o,a=r*8-i-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?r-1:0,h=n?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=s*256+t[e+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=o*256+t[e+d],d+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-l}return(f?-1:1)*o*Math.pow(2,s-i)};cg.write=function(t,e,n,i,r,s){var o,a,c,l=s*8-r-1,u=(1<<l)-1,d=u>>1,h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,g=i?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,r),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;t[n+f]=a&255,f+=g,a/=256,r-=8);for(o=o<<r|a,l+=r;l>0;t[n+f]=o&255,f+=g,o/=256,l-=8);t[n+f-g]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=yh,n=cg,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=k,t.INSPECT_MAX_BYTES=50;const r=2147483647;t.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const C=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(C,m),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(C){if(C>r)throw new RangeError('The value "'+C+'" is invalid for option "size"');const m=new Uint8Array(C);return Object.setPrototypeOf(m,a.prototype),m}function a(C,m,y){if(typeof C=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(C)}return c(C,m,y)}a.poolSize=8192;function c(C,m,y){if(typeof C=="string")return h(C,m);if(ArrayBuffer.isView(C))return g(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(nn(C,ArrayBuffer)||C&&nn(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nn(C,SharedArrayBuffer)||C&&nn(C.buffer,SharedArrayBuffer)))return p(C,m,y);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=C.valueOf&&C.valueOf();if(x!=null&&x!==C)return a.from(x,m,y);const F=w(C);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),m,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,m,y){return c(C,m,y)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function u(C,m,y){return l(C),C<=0?o(C):m!==void 0?typeof y=="string"?o(C).fill(m,y):o(C).fill(m):o(C)}a.alloc=function(C,m,y){return u(C,m,y)};function d(C){return l(C),o(C<0?0:_(C)|0)}a.allocUnsafe=function(C){return d(C)},a.allocUnsafeSlow=function(C){return d(C)};function h(C,m){if((typeof m!="string"||m==="")&&(m="utf8"),!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const y=T(C,m)|0;let x=o(y);const F=x.write(C,m);return F!==y&&(x=x.slice(0,F)),x}function f(C){const m=C.length<0?0:_(C.length)|0,y=o(m);for(let x=0;x<m;x+=1)y[x]=C[x]&255;return y}function g(C){if(nn(C,Uint8Array)){const m=new Uint8Array(C);return p(m.buffer,m.byteOffset,m.byteLength)}return f(C)}function p(C,m,y){if(m<0||C.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<m+(y||0))throw new RangeError('"length" is outside of buffer bounds');let x;return m===void 0&&y===void 0?x=new Uint8Array(C):y===void 0?x=new Uint8Array(C,m):x=new Uint8Array(C,m,y),Object.setPrototypeOf(x,a.prototype),x}function w(C){if(a.isBuffer(C)){const m=_(C.length)|0,y=o(m);return y.length===0||C.copy(y,0,0,m),y}if(C.length!==void 0)return typeof C.length!="number"||ti(C.length)?o(0):f(C);if(C.type==="Buffer"&&Array.isArray(C.data))return f(C.data)}function _(C){if(C>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return C|0}function k(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==a.prototype},a.compare=function(m,y){if(nn(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),nn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(m)||!a.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===y)return 0;let x=m.length,F=y.length;for(let W=0,te=Math.min(x,F);W<te;++W)if(m[W]!==y[W]){x=m[W],F=y[W];break}return x<F?-1:F<x?1:0},a.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(m,y){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return a.alloc(0);let x;if(y===void 0)for(y=0,x=0;x<m.length;++x)y+=m[x].length;const F=a.allocUnsafe(y);let W=0;for(x=0;x<m.length;++x){let te=m[x];if(nn(te,Uint8Array))W+te.length>F.length?(a.isBuffer(te)||(te=a.from(te)),te.copy(F,W)):Uint8Array.prototype.set.call(F,te,W);else if(a.isBuffer(te))te.copy(F,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=te.length}return F};function T(C,m){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||nn(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const y=C.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&y===0)return 0;let F=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Jn(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Ri(C).length;default:if(F)return x?-1:Jn(C).length;m=(""+m).toLowerCase(),F=!0}}a.byteLength=T;function R(C,m,y){let x=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,m>>>=0,y<=m))return"";for(C||(C="utf8");;)switch(C){case"hex":return J(this,m,y);case"utf8":case"utf-8":return ze(this,m,y);case"ascii":return Ne(this,m,y);case"latin1":case"binary":return he(this,m,y);case"base64":return ke(this,m,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,m,y);default:if(x)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),x=!0}}a.prototype._isBuffer=!0;function E(C,m,y){const x=C[m];C[m]=C[y],C[y]=x}a.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<m;y+=2)E(this,y,y+1);return this},a.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<m;y+=4)E(this,y,y+3),E(this,y+1,y+2);return this},a.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<m;y+=8)E(this,y,y+7),E(this,y+1,y+6),E(this,y+2,y+5),E(this,y+3,y+4);return this},a.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?ze(this,0,m):R.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(m){if(!a.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:a.compare(this,m)===0},a.prototype.inspect=function(){let m="";const y=t.INSPECT_MAX_BYTES;return m=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(m+=" ... "),"<Buffer "+m+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(m,y,x,F,W){if(nn(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(y===void 0&&(y=0),x===void 0&&(x=m?m.length:0),F===void 0&&(F=0),W===void 0&&(W=this.length),y<0||x>m.length||F<0||W>this.length)throw new RangeError("out of range index");if(F>=W&&y>=x)return 0;if(F>=W)return-1;if(y>=x)return 1;if(y>>>=0,x>>>=0,F>>>=0,W>>>=0,this===m)return 0;let te=W-F,nt=x-y;const jt=Math.min(te,nt),It=this.slice(F,W),Rt=m.slice(y,x);for(let wt=0;wt<jt;++wt)if(It[wt]!==Rt[wt]){te=It[wt],nt=Rt[wt];break}return te<nt?-1:nt<te?1:0};function D(C,m,y,x,F){if(C.length===0)return-1;if(typeof y=="string"?(x=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,ti(y)&&(y=F?0:C.length-1),y<0&&(y=C.length+y),y>=C.length){if(F)return-1;y=C.length-1}else if(y<0)if(F)y=0;else return-1;if(typeof m=="string"&&(m=a.from(m,x)),a.isBuffer(m))return m.length===0?-1:B(C,m,y,x,F);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(C,m,y):Uint8Array.prototype.lastIndexOf.call(C,m,y):B(C,[m],y,x,F);throw new TypeError("val must be string, number or Buffer")}function B(C,m,y,x,F){let W=1,te=C.length,nt=m.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(C.length<2||m.length<2)return-1;W=2,te/=2,nt/=2,y/=2}function jt(Rt,wt){return W===1?Rt[wt]:Rt.readUInt16BE(wt*W)}let It;if(F){let Rt=-1;for(It=y;It<te;It++)if(jt(C,It)===jt(m,Rt===-1?0:It-Rt)){if(Rt===-1&&(Rt=It),It-Rt+1===nt)return Rt*W}else Rt!==-1&&(It-=It-Rt),Rt=-1}else for(y+nt>te&&(y=te-nt),It=y;It>=0;It--){let Rt=!0;for(let wt=0;wt<nt;wt++)if(jt(C,It+wt)!==jt(m,wt)){Rt=!1;break}if(Rt)return It}return-1}a.prototype.includes=function(m,y,x){return this.indexOf(m,y,x)!==-1},a.prototype.indexOf=function(m,y,x){return D(this,m,y,x,!0)},a.prototype.lastIndexOf=function(m,y,x){return D(this,m,y,x,!1)};function $(C,m,y,x){y=Number(y)||0;const F=C.length-y;x?(x=Number(x),x>F&&(x=F)):x=F;const W=m.length;x>W/2&&(x=W/2);let te;for(te=0;te<x;++te){const nt=parseInt(m.substr(te*2,2),16);if(ti(nt))return te;C[y+te]=nt}return te}function Y(C,m,y,x){return ei(Jn(m,C.length-y),C,y,x)}function z(C,m,y,x){return ei(Ji(m),C,y,x)}function H(C,m,y,x){return ei(Ri(m),C,y,x)}function ie(C,m,y,x){return ei(er(m,C.length-y),C,y,x)}a.prototype.write=function(m,y,x,F){if(y===void 0)F="utf8",x=this.length,y=0;else if(x===void 0&&typeof y=="string")F=y,x=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(x)?(x=x>>>0,F===void 0&&(F="utf8")):(F=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-y;if((x===void 0||x>W)&&(x=W),m.length>0&&(x<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");let te=!1;for(;;)switch(F){case"hex":return $(this,m,y,x);case"utf8":case"utf-8":return Y(this,m,y,x);case"ascii":case"latin1":case"binary":return z(this,m,y,x);case"base64":return H(this,m,y,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,m,y,x);default:if(te)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ke(C,m,y){return m===0&&y===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(m,y))}function ze(C,m,y){y=Math.min(C.length,y);const x=[];let F=m;for(;F<y;){const W=C[F];let te=null,nt=W>239?4:W>223?3:W>191?2:1;if(F+nt<=y){let jt,It,Rt,wt;switch(nt){case 1:W<128&&(te=W);break;case 2:jt=C[F+1],(jt&192)===128&&(wt=(W&31)<<6|jt&63,wt>127&&(te=wt));break;case 3:jt=C[F+1],It=C[F+2],(jt&192)===128&&(It&192)===128&&(wt=(W&15)<<12|(jt&63)<<6|It&63,wt>2047&&(wt<55296||wt>57343)&&(te=wt));break;case 4:jt=C[F+1],It=C[F+2],Rt=C[F+3],(jt&192)===128&&(It&192)===128&&(Rt&192)===128&&(wt=(W&15)<<18|(jt&63)<<12|(It&63)<<6|Rt&63,wt>65535&&wt<1114112&&(te=wt))}}te===null?(te=65533,nt=1):te>65535&&(te-=65536,x.push(te>>>10&1023|55296),te=56320|te&1023),x.push(te),F+=nt}return le(x)}const se=4096;function le(C){const m=C.length;if(m<=se)return String.fromCharCode.apply(String,C);let y="",x=0;for(;x<m;)y+=String.fromCharCode.apply(String,C.slice(x,x+=se));return y}function Ne(C,m,y){let x="";y=Math.min(C.length,y);for(let F=m;F<y;++F)x+=String.fromCharCode(C[F]&127);return x}function he(C,m,y){let x="";y=Math.min(C.length,y);for(let F=m;F<y;++F)x+=String.fromCharCode(C[F]);return x}function J(C,m,y){const x=C.length;(!m||m<0)&&(m=0),(!y||y<0||y>x)&&(y=x);let F="";for(let W=m;W<y;++W)F+=_i[C[W]];return F}function ve(C,m,y){const x=C.slice(m,y);let F="";for(let W=0;W<x.length-1;W+=2)F+=String.fromCharCode(x[W]+x[W+1]*256);return F}a.prototype.slice=function(m,y){const x=this.length;m=~~m,y=y===void 0?x:~~y,m<0?(m+=x,m<0&&(m=0)):m>x&&(m=x),y<0?(y+=x,y<0&&(y=0)):y>x&&(y=x),y<m&&(y=m);const F=this.subarray(m,y);return Object.setPrototypeOf(F,a.prototype),F};function ye(C,m,y){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+m>y)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(m,y,x){m=m>>>0,y=y>>>0,x||ye(m,y,this.length);let F=this[m],W=1,te=0;for(;++te<y&&(W*=256);)F+=this[m+te]*W;return F},a.prototype.readUintBE=a.prototype.readUIntBE=function(m,y,x){m=m>>>0,y=y>>>0,x||ye(m,y,this.length);let F=this[m+--y],W=1;for(;y>0&&(W*=256);)F+=this[m+--y]*W;return F},a.prototype.readUint8=a.prototype.readUInt8=function(m,y){return m=m>>>0,y||ye(m,1,this.length),this[m]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(m,y){return m=m>>>0,y||ye(m,2,this.length),this[m]|this[m+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(m,y){return m=m>>>0,y||ye(m,2,this.length),this[m]<<8|this[m+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(m,y){return m=m>>>0,y||ye(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(m,y){return m=m>>>0,y||ye(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},a.prototype.readBigUInt64LE=dn(function(m){m=m>>>0,Ve(m,"offset");const y=this[m],x=this[m+7];(y===void 0||x===void 0)&&De(m,this.length-8);const F=y+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,W=this[++m]+this[++m]*2**8+this[++m]*2**16+x*2**24;return BigInt(F)+(BigInt(W)<<BigInt(32))}),a.prototype.readBigUInt64BE=dn(function(m){m=m>>>0,Ve(m,"offset");const y=this[m],x=this[m+7];(y===void 0||x===void 0)&&De(m,this.length-8);const F=y*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],W=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+x;return(BigInt(F)<<BigInt(32))+BigInt(W)}),a.prototype.readIntLE=function(m,y,x){m=m>>>0,y=y>>>0,x||ye(m,y,this.length);let F=this[m],W=1,te=0;for(;++te<y&&(W*=256);)F+=this[m+te]*W;return W*=128,F>=W&&(F-=Math.pow(2,8*y)),F},a.prototype.readIntBE=function(m,y,x){m=m>>>0,y=y>>>0,x||ye(m,y,this.length);let F=y,W=1,te=this[m+--F];for(;F>0&&(W*=256);)te+=this[m+--F]*W;return W*=128,te>=W&&(te-=Math.pow(2,8*y)),te},a.prototype.readInt8=function(m,y){return m=m>>>0,y||ye(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},a.prototype.readInt16LE=function(m,y){m=m>>>0,y||ye(m,2,this.length);const x=this[m]|this[m+1]<<8;return x&32768?x|4294901760:x},a.prototype.readInt16BE=function(m,y){m=m>>>0,y||ye(m,2,this.length);const x=this[m+1]|this[m]<<8;return x&32768?x|4294901760:x},a.prototype.readInt32LE=function(m,y){return m=m>>>0,y||ye(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},a.prototype.readInt32BE=function(m,y){return m=m>>>0,y||ye(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},a.prototype.readBigInt64LE=dn(function(m){m=m>>>0,Ve(m,"offset");const y=this[m],x=this[m+7];(y===void 0||x===void 0)&&De(m,this.length-8);const F=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(x<<24);return(BigInt(F)<<BigInt(32))+BigInt(y+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),a.prototype.readBigInt64BE=dn(function(m){m=m>>>0,Ve(m,"offset");const y=this[m],x=this[m+7];(y===void 0||x===void 0)&&De(m,this.length-8);const F=(y<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(F)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+x)}),a.prototype.readFloatLE=function(m,y){return m=m>>>0,y||ye(m,4,this.length),n.read(this,m,!0,23,4)},a.prototype.readFloatBE=function(m,y){return m=m>>>0,y||ye(m,4,this.length),n.read(this,m,!1,23,4)},a.prototype.readDoubleLE=function(m,y){return m=m>>>0,y||ye(m,8,this.length),n.read(this,m,!0,52,8)},a.prototype.readDoubleBE=function(m,y){return m=m>>>0,y||ye(m,8,this.length),n.read(this,m,!1,52,8)};function ge(C,m,y,x,F,W){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>F||m<W)throw new RangeError('"value" argument is out of bounds');if(y+x>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(m,y,x,F){if(m=+m,y=y>>>0,x=x>>>0,!F){const nt=Math.pow(2,8*x)-1;ge(this,m,y,x,nt,0)}let W=1,te=0;for(this[y]=m&255;++te<x&&(W*=256);)this[y+te]=m/W&255;return y+x},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(m,y,x,F){if(m=+m,y=y>>>0,x=x>>>0,!F){const nt=Math.pow(2,8*x)-1;ge(this,m,y,x,nt,0)}let W=x-1,te=1;for(this[y+W]=m&255;--W>=0&&(te*=256);)this[y+W]=m/te&255;return y+x},a.prototype.writeUint8=a.prototype.writeUInt8=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,1,255,0),this[y]=m&255,y+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,2,65535,0),this[y]=m&255,this[y+1]=m>>>8,y+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,2,65535,0),this[y]=m>>>8,this[y+1]=m&255,y+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,4,4294967295,0),this[y+3]=m>>>24,this[y+2]=m>>>16,this[y+1]=m>>>8,this[y]=m&255,y+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,4,4294967295,0),this[y]=m>>>24,this[y+1]=m>>>16,this[y+2]=m>>>8,this[y+3]=m&255,y+4};function qe(C,m,y,x,F){Ce(m,x,F,C,y,7);let W=Number(m&BigInt(4294967295));C[y++]=W,W=W>>8,C[y++]=W,W=W>>8,C[y++]=W,W=W>>8,C[y++]=W;let te=Number(m>>BigInt(32)&BigInt(4294967295));return C[y++]=te,te=te>>8,C[y++]=te,te=te>>8,C[y++]=te,te=te>>8,C[y++]=te,y}function ee(C,m,y,x,F){Ce(m,x,F,C,y,7);let W=Number(m&BigInt(4294967295));C[y+7]=W,W=W>>8,C[y+6]=W,W=W>>8,C[y+5]=W,W=W>>8,C[y+4]=W;let te=Number(m>>BigInt(32)&BigInt(4294967295));return C[y+3]=te,te=te>>8,C[y+2]=te,te=te>>8,C[y+1]=te,te=te>>8,C[y]=te,y+8}a.prototype.writeBigUInt64LE=dn(function(m,y=0){return qe(this,m,y,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=dn(function(m,y=0){return ee(this,m,y,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(m,y,x,F){if(m=+m,y=y>>>0,!F){const jt=Math.pow(2,8*x-1);ge(this,m,y,x,jt-1,-jt)}let W=0,te=1,nt=0;for(this[y]=m&255;++W<x&&(te*=256);)m<0&&nt===0&&this[y+W-1]!==0&&(nt=1),this[y+W]=(m/te>>0)-nt&255;return y+x},a.prototype.writeIntBE=function(m,y,x,F){if(m=+m,y=y>>>0,!F){const jt=Math.pow(2,8*x-1);ge(this,m,y,x,jt-1,-jt)}let W=x-1,te=1,nt=0;for(this[y+W]=m&255;--W>=0&&(te*=256);)m<0&&nt===0&&this[y+W+1]!==0&&(nt=1),this[y+W]=(m/te>>0)-nt&255;return y+x},a.prototype.writeInt8=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,1,127,-128),m<0&&(m=255+m+1),this[y]=m&255,y+1},a.prototype.writeInt16LE=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,2,32767,-32768),this[y]=m&255,this[y+1]=m>>>8,y+2},a.prototype.writeInt16BE=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,2,32767,-32768),this[y]=m>>>8,this[y+1]=m&255,y+2},a.prototype.writeInt32LE=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,4,2147483647,-2147483648),this[y]=m&255,this[y+1]=m>>>8,this[y+2]=m>>>16,this[y+3]=m>>>24,y+4},a.prototype.writeInt32BE=function(m,y,x){return m=+m,y=y>>>0,x||ge(this,m,y,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[y]=m>>>24,this[y+1]=m>>>16,this[y+2]=m>>>8,this[y+3]=m&255,y+4},a.prototype.writeBigInt64LE=dn(function(m,y=0){return qe(this,m,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=dn(function(m,y=0){return ee(this,m,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function b(C,m,y,x,F,W){if(y+x>C.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function j(C,m,y,x,F){return m=+m,y=y>>>0,F||b(C,m,y,4),n.write(C,m,y,x,23,4),y+4}a.prototype.writeFloatLE=function(m,y,x){return j(this,m,y,!0,x)},a.prototype.writeFloatBE=function(m,y,x){return j(this,m,y,!1,x)};function V(C,m,y,x,F){return m=+m,y=y>>>0,F||b(C,m,y,8),n.write(C,m,y,x,52,8),y+8}a.prototype.writeDoubleLE=function(m,y,x){return V(this,m,y,!0,x)},a.prototype.writeDoubleBE=function(m,y,x){return V(this,m,y,!1,x)},a.prototype.copy=function(m,y,x,F){if(!a.isBuffer(m))throw new TypeError("argument should be a Buffer");if(x||(x=0),!F&&F!==0&&(F=this.length),y>=m.length&&(y=m.length),y||(y=0),F>0&&F<x&&(F=x),F===x||m.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),m.length-y<F-x&&(F=m.length-y+x);const W=F-x;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,x,F):Uint8Array.prototype.set.call(m,this.subarray(x,F),y),W},a.prototype.fill=function(m,y,x,F){if(typeof m=="string"){if(typeof y=="string"?(F=y,y=0,x=this.length):typeof x=="string"&&(F=x,x=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!a.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(m.length===1){const te=m.charCodeAt(0);(F==="utf8"&&te<128||F==="latin1")&&(m=te)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(y<0||this.length<y||this.length<x)throw new RangeError("Out of range index");if(x<=y)return this;y=y>>>0,x=x===void 0?this.length:x>>>0,m||(m=0);let W;if(typeof m=="number")for(W=y;W<x;++W)this[W]=m;else{const te=a.isBuffer(m)?m:a.from(m,F),nt=te.length;if(nt===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(W=0;W<x-y;++W)this[W+y]=te[W%nt]}return this};const Q={};function re(C,m,y){Q[C]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(C,m){return`The "${C}" argument must be of type number. Received type ${typeof m}`},TypeError),re("ERR_OUT_OF_RANGE",function(C,m,y){let x=`The value of "${C}" is out of range.`,F=y;return Number.isInteger(y)&&Math.abs(y)>2**32?F=Se(String(y)):typeof y=="bigint"&&(F=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(F=Se(F)),F+="n"),x+=` It must be ${m}. Received ${F}`,x},RangeError);function Se(C){let m="",y=C.length;const x=C[0]==="-"?1:0;for(;y>=x+4;y-=3)m=`_${C.slice(y-3,y)}${m}`;return`${C.slice(0,y)}${m}`}function Me(C,m,y){Ve(m,"offset"),(C[m]===void 0||C[m+y]===void 0)&&De(m,C.length-(y+1))}function Ce(C,m,y,x,F,W){if(C>y||C<m){const te=typeof m=="bigint"?"n":"";let nt;throw W>3?m===0||m===BigInt(0)?nt=`>= 0${te} and < 2${te} ** ${(W+1)*8}${te}`:nt=`>= -(2${te} ** ${(W+1)*8-1}${te}) and < 2 ** ${(W+1)*8-1}${te}`:nt=`>= ${m}${te} and <= ${y}${te}`,new Q.ERR_OUT_OF_RANGE("value",nt,C)}Me(x,F,W)}function Ve(C,m){if(typeof C!="number")throw new Q.ERR_INVALID_ARG_TYPE(m,"number",C)}function De(C,m,y){throw Math.floor(C)!==C?(Ve(C,y),new Q.ERR_OUT_OF_RANGE(y||"offset","an integer",C)):m<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${m}`,C)}const mt=/[^+/0-9A-Za-z-_]/g;function qn(C){if(C=C.split("=")[0],C=C.trim().replace(mt,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function Jn(C,m){m=m||1/0;let y;const x=C.length;let F=null;const W=[];for(let te=0;te<x;++te){if(y=C.charCodeAt(te),y>55295&&y<57344){if(!F){if(y>56319){(m-=3)>-1&&W.push(239,191,189);continue}else if(te+1===x){(m-=3)>-1&&W.push(239,191,189);continue}F=y;continue}if(y<56320){(m-=3)>-1&&W.push(239,191,189),F=y;continue}y=(F-55296<<10|y-56320)+65536}else F&&(m-=3)>-1&&W.push(239,191,189);if(F=null,y<128){if((m-=1)<0)break;W.push(y)}else if(y<2048){if((m-=2)<0)break;W.push(y>>6|192,y&63|128)}else if(y<65536){if((m-=3)<0)break;W.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((m-=4)<0)break;W.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return W}function Ji(C){const m=[];for(let y=0;y<C.length;++y)m.push(C.charCodeAt(y)&255);return m}function er(C,m){let y,x,F;const W=[];for(let te=0;te<C.length&&!((m-=2)<0);++te)y=C.charCodeAt(te),x=y>>8,F=y%256,W.push(F),W.push(x);return W}function Ri(C){return e.toByteArray(qn(C))}function ei(C,m,y,x){let F;for(F=0;F<x&&!(F+y>=m.length||F>=C.length);++F)m[F+y]=C[F];return F}function nn(C,m){return C instanceof m||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===m.name}function ti(C){return C!==C}const _i=function(){const C="0123456789abcdef",m=new Array(256);for(let y=0;y<16;++y){const x=y*16;for(let F=0;F<16;++F)m[x+F]=C[y]+C[F]}return m}();function dn(C){return typeof BigInt>"u"?Bi:C}function Bi(){throw new Error("BigInt not supported")}})(Je);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nr=BigInt(0),bi=BigInt(1),cu=BigInt(2),AI=BigInt(8),CI={zip215:!0};function II(t){const e=sg(t);return pc(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function lg(t){const e=II(t),{Fp:n,n:i,prehash:r,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=cu<<BigInt(a*8)-bi,u=n.create,d=e.uvRatio||((he,J)=>{try{return{isValid:!0,value:n.sqrt(he*n.inv(J))}}catch{return{isValid:!1,value:nr}}}),h=e.adjustScalarBytes||(he=>he),f=e.domain||((he,J,ve)=>{if(J.length||ve)throw new Error("Contexts/pre-hash are not supported");return he}),g=he=>typeof he=="bigint"&&nr<he,p=(he,J)=>g(he)&&g(J)&&he<J,w=he=>he===nr||p(he,l);function _(he,J){if(p(he,J))return he;throw new Error(`Expected valid scalar < ${J}, got ${typeof he} ${he}`)}function k(he){return he===nr?he:_(he,i)}const T=new Map;function R(he){if(!(he instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(J,ve,ye,ge){if(this.ex=J,this.ey=ve,this.ez=ye,this.et=ge,!w(J))throw new Error("x required");if(!w(ve))throw new Error("y required");if(!w(ye))throw new Error("z required");if(!w(ge))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(J){if(J instanceof E)throw new Error("extended point not allowed");const{x:ve,y:ye}=J||{};if(!w(ve)||!w(ye))throw new Error("invalid affine point");return new E(ve,ye,bi,u(ve*ye))}static normalizeZ(J){const ve=n.invertBatch(J.map(ye=>ye.ez));return J.map((ye,ge)=>ye.toAffine(ve[ge])).map(E.fromAffine)}_setWindowSize(J){this._WINDOW_SIZE=J,T.delete(this)}assertValidity(){const{a:J,d:ve}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:ye,ey:ge,ez:qe,et:ee}=this,b=u(ye*ye),j=u(ge*ge),V=u(qe*qe),Q=u(V*V),re=u(b*J),Se=u(V*u(re+j)),Me=u(Q+u(ve*u(b*j)));if(Se!==Me)throw new Error("bad point: equation left != right (1)");const Ce=u(ye*ge),Ve=u(qe*ee);if(Ce!==Ve)throw new Error("bad point: equation left != right (2)")}equals(J){R(J);const{ex:ve,ey:ye,ez:ge}=this,{ex:qe,ey:ee,ez:b}=J,j=u(ve*b),V=u(qe*ge),Q=u(ye*b),re=u(ee*ge);return j===V&&Q===re}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:J}=e,{ex:ve,ey:ye,ez:ge}=this,qe=u(ve*ve),ee=u(ye*ye),b=u(cu*u(ge*ge)),j=u(J*qe),V=ve+ye,Q=u(u(V*V)-qe-ee),re=j+ee,Se=re-b,Me=j-ee,Ce=u(Q*Se),Ve=u(re*Me),De=u(Q*Me),mt=u(Se*re);return new E(Ce,Ve,mt,De)}add(J){R(J);const{a:ve,d:ye}=e,{ex:ge,ey:qe,ez:ee,et:b}=this,{ex:j,ey:V,ez:Q,et:re}=J;if(ve===BigInt(-1)){const nn=u((qe-ge)*(V+j)),ti=u((qe+ge)*(V-j)),_i=u(ti-nn);if(_i===nr)return this.double();const dn=u(ee*cu*re),Bi=u(b*cu*Q),C=Bi+dn,m=ti+nn,y=Bi-dn,x=u(C*_i),F=u(m*y),W=u(C*y),te=u(_i*m);return new E(x,F,te,W)}const Se=u(ge*j),Me=u(qe*V),Ce=u(b*ye*re),Ve=u(ee*Q),De=u((ge+qe)*(j+V)-Se-Me),mt=Ve-Ce,qn=Ve+Ce,Jn=u(Me-ve*Se),Ji=u(De*mt),er=u(qn*Jn),Ri=u(De*Jn),ei=u(mt*qn);return new E(Ji,er,ei,Ri)}subtract(J){return this.add(J.negate())}wNAF(J){return $.wNAFCached(this,T,J,E.normalizeZ)}multiply(J){const{p:ve,f:ye}=this.wNAF(_(J,i));return E.normalizeZ([ve,ye])[0]}multiplyUnsafe(J){let ve=k(J);return ve===nr?B:this.equals(B)||ve===bi?this:this.equals(D)?this.wNAF(ve).p:$.unsafeLadder(this,ve)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return $.unsafeLadder(this,i).is0()}toAffine(J){const{ex:ve,ey:ye,ez:ge}=this,qe=this.is0();J==null&&(J=qe?AI:n.inv(ge));const ee=u(ve*J),b=u(ye*J),j=u(ge*J);if(qe)return{x:nr,y:bi};if(j!==bi)throw new Error("invZ was invalid");return{x:ee,y:b}}clearCofactor(){const{h:J}=e;return J===bi?this:this.multiplyUnsafe(J)}static fromHex(J,ve=!1){const{d:ye,a:ge}=e,qe=n.BYTES;J=pn("pointHex",J,qe);const ee=J.slice(),b=J[qe-1];ee[qe-1]=b&-129;const j=Ua(ee);j===nr||(ve?_(j,l):_(j,n.ORDER));const V=u(j*j),Q=u(V-bi),re=u(ye*V-ge);let{isValid:Se,value:Me}=d(Q,re);if(!Se)throw new Error("Point.fromHex: invalid y coordinate");const Ce=(Me&bi)===bi,Ve=(b&128)!==0;if(!ve&&Me===nr&&Ve)throw new Error("Point.fromHex: x=0 and x_0=1");return Ve!==Ce&&(Me=u(-Me)),E.fromAffine({x:Me,y:j})}static fromPrivateKey(J){return H(J).point}toRawBytes(){const{x:J,y:ve}=this.toAffine(),ye=Yc(ve,n.BYTES);return ye[ye.length-1]|=J&bi?128:0,ye}toHex(){return Ho(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,bi,u(e.Gx*e.Gy)),E.ZERO=new E(nr,bi,bi,nr);const{BASE:D,ZERO:B}=E,$=i_(E,a*8);function Y(he){return Wt(he,i)}function z(he){return Y(Ua(he))}function H(he){const J=a;he=pn("private key",he,J);const ve=pn("hashed private key",s(he),2*J),ye=h(ve.slice(0,J)),ge=ve.slice(J,2*J),qe=z(ye),ee=D.multiply(qe),b=ee.toRawBytes();return{head:ye,prefix:ge,scalar:qe,point:ee,pointBytes:b}}function ie(he){return H(he).pointBytes}function ke(he=new Uint8Array,...J){const ve=Qo(...J);return z(s(f(ve,pn("context",he),!!r)))}function ze(he,J,ve={}){he=pn("message",he),r&&(he=r(he));const{prefix:ye,scalar:ge,pointBytes:qe}=H(J),ee=ke(ve.context,ye,he),b=D.multiply(ee).toRawBytes(),j=ke(ve.context,b,qe,he),V=Y(ee+j*ge);k(V);const Q=Qo(b,Yc(V,n.BYTES));return pn("result",Q,a*2)}const se=CI;function le(he,J,ve,ye=se){const{context:ge,zip215:qe}=ye,ee=n.BYTES;he=pn("signature",he,2*ee),J=pn("message",J),r&&(J=r(J));const b=Ua(he.slice(ee,2*ee));let j,V,Q;try{j=E.fromHex(ve,qe),V=E.fromHex(he.slice(0,ee),qe),Q=D.multiplyUnsafe(b)}catch{return!1}if(!qe&&j.isSmallOrder())return!1;const re=ke(ge,V.toRawBytes(),j.toRawBytes(),J);return V.add(j.multiplyUnsafe(re)).subtract(Q).clearCofactor().equals(E.ZERO)}return D._setWindowSize(8),{CURVE:e,getPublicKey:ie,sign:ze,verify:le,ExtendedPoint:E,utils:{getExtendedPublicKey:H,randomPrivateKey:()=>o(n.BYTES),precompute(he=8,J=E.BASE){return J._setWindowSize(he),J.multiply(BigInt(3)),J}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ug=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),cw=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const EI=BigInt(1),Wf=BigInt(2),xI=BigInt(5),lw=BigInt(10),MI=BigInt(20),NI=BigInt(40),uw=BigInt(80);function OI(t){const e=ug,i=t*t%e*t%e,r=Xt(i,Wf,e)*i%e,s=Xt(r,EI,e)*t%e,o=Xt(s,xI,e)*s%e,a=Xt(o,lw,e)*o%e,c=Xt(a,MI,e)*a%e,l=Xt(c,NI,e)*c%e,u=Xt(l,uw,e)*l%e,d=Xt(u,uw,e)*l%e,h=Xt(d,lw,e)*o%e;return{pow_p_5_8:Xt(h,Wf,e)*t%e,b2:i}}function DI(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function jI(t,e){const n=ug,i=Wt(e*e*e,n),r=Wt(i*i*e,n),s=OI(t*r).pow_p_5_8;let o=Wt(t*i*s,n);const a=Wt(e*o*o,n),c=o,l=Wt(o*cw,n),u=a===t,d=a===Wt(-t,n),h=a===Wt(-t*cw,n);return u&&(o=c),(d||h)&&(o=l),DT(o,n)&&(o=Wt(-o,n)),{isValid:u||d,value:o}}const gs=e_(ug,void 0,!0),dg={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:gs,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:bl,randomBytes:Qp,adjustScalarBytes:DI,uvRatio:jI},_h=lg(dg);function g_(t,e,n){if(e.length>255)throw new Error("Context is too big");return B0(A2("SigEd25519 no Ed25519 collisions"),new Uint8Array([n?1:0,e.length]),e,t)}({...dg});({...dg});const RI=(gs.ORDER+BigInt(3))/BigInt(8);gs.pow(Wf,RI);gs.sqrt(gs.neg(gs.ONE));(gs.ORDER-BigInt(5))/BigInt(8);BigInt(486662);FT(gs,gs.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Jc={},BI={get exports(){return Jc},set exports(t){Jc=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=Je,i=n.Buffer;function r(o,a){for(var c in o)a[c]=o[c]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(r(n,e),e.Buffer=s);function s(o,a,c){return i(o,a,c)}s.prototype=Object.create(i.prototype),r(i,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=i(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(BI,Jc);var lu=Jc.Buffer;function PI(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),s=r.charCodeAt(0);if(e[s]!==255)throw new TypeError(r+" is ambiguous");e[s]=i}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=lu.from(f)),!lu.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var g=0,p=0,w=0,_=f.length;w!==_&&f[w]===0;)w++,g++;for(var k=(_-w)*l+1>>>0,T=new Uint8Array(k);w!==_;){for(var R=f[w],E=0,D=k-1;(R!==0||E<p)&&D!==-1;D--,E++)R+=256*T[D]>>>0,T[D]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");p=E,w++}for(var B=k-p;B!==k&&T[B]===0;)B++;for(var $=a.repeat(g);B<k;++B)$+=t.charAt(T[B]);return $}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return lu.alloc(0);for(var g=0,p=0,w=0;f[g]===a;)p++,g++;for(var _=(f.length-g)*c+1>>>0,k=new Uint8Array(_);f[g];){var T=e[f.charCodeAt(g)];if(T===255)return;for(var R=0,E=_-1;(T!==0||R<w)&&E!==-1;E--,R++)T+=o*k[E]>>>0,k[E]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");w=R,g++}for(var D=_-w;D!==_&&k[D]===0;)D++;var B=lu.allocUnsafe(p+(_-D));B.fill(0,0,p);for(var $=p;D!==_;)B[$++]=k[D++];return B}function h(f){var g=d(f);if(g)return g;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var FI=PI,UI=FI,LI="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ii=UI(LI),xn={},uu=Jc.Buffer;function $I(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),s=r.charCodeAt(0);if(e[s]!==255)throw new TypeError(r+" is ambiguous");e[s]=i}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=uu.from(f)),!uu.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var g=0,p=0,w=0,_=f.length;w!==_&&f[w]===0;)w++,g++;for(var k=(_-w)*l+1>>>0,T=new Uint8Array(k);w!==_;){for(var R=f[w],E=0,D=k-1;(R!==0||E<p)&&D!==-1;D--,E++)R+=256*T[D]>>>0,T[D]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");p=E,w++}for(var B=k-p;B!==k&&T[B]===0;)B++;for(var $=a.repeat(g);B<k;++B)$+=t.charAt(T[B]);return $}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return uu.alloc(0);for(var g=0,p=0,w=0;f[g]===a;)p++,g++;for(var _=(f.length-g)*c+1>>>0,k=new Uint8Array(_);f[g];){var T=e[f.charCodeAt(g)];if(T===255)return;for(var R=0,E=_-1;(T!==0||R<w)&&E!==-1;E--,R++)T+=o*k[E]>>>0,k[E]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");w=R,g++}for(var D=_-w;D!==_&&k[D]===0;)D++;var B=uu.allocUnsafe(p+(_-D));B.fill(0,0,p);for(var $=p;D!==_;)B[$++]=k[D++];return B}function h(f){var g=d(f);if(g)return g;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var zI=$I,qI=zI,VI="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",WI=qI(VI);function cs(t,e,n){return e<=t&&t<=n}function bh(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function KI(t){for(var e=String(t),n=e.length,i=0,r=[];i<n;){var s=e.charCodeAt(i);if(s<55296||s>57343)r.push(s);else if(56320<=s&&s<=57343)r.push(65533);else if(55296<=s&&s<=56319)if(i===n-1)r.push(65533);else{var o=t.charCodeAt(i+1);if(56320<=o&&o<=57343){var a=s&1023,c=o&1023;r.push(65536+(a<<10)+c),i+=1}else r.push(65533)}i+=1}return r}function ZI(t){for(var e="",n=0;n<t.length;++n){var i=t[n];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode((i>>10)+55296,(i&1023)+56320))}return e}var kd=-1;function hg(t){this.tokens=[].slice.call(t)}hg.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():kd},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var sc=-1;function lf(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Sd="utf-8";function Td(t,e){if(!(this instanceof Td))return new Td(t,e);if(t=t!==void 0?String(t).toLowerCase():Sd,t!==Sd)throw new Error("Encoding not supported. Only utf-8 is supported");e=bh(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Td.prototype={decode:function(e,n){var i;typeof e=="object"&&e instanceof ArrayBuffer?i=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):i=new Uint8Array(0),n=bh(n),this._streaming||(this._decoder=new HI({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var r=new hg(i),s=[],o;!r.endOfStream()&&(o=this._decoder.handler(r,r.read()),o!==sc);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(r,r.read()),o===sc)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!r.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),ZI(s)}};function Ad(t,e){if(!(this instanceof Ad))return new Ad(t,e);if(t=t!==void 0?String(t).toLowerCase():Sd,t!==Sd)throw new Error("Encoding not supported. Only utf-8 is supported");e=bh(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ad.prototype={encode:function(e,n){e=e?String(e):"",n=bh(n),this._streaming||(this._encoder=new QI(this._options)),this._streaming=!!n.stream;for(var i=[],r=new hg(KI(e)),s;!r.endOfStream()&&(s=this._encoder.handler(r,r.read()),s!==sc);)Array.isArray(s)?i.push.apply(i,s):i.push(s);if(!this._streaming){for(;s=this._encoder.handler(r,r.read()),s!==sc;)Array.isArray(s)?i.push.apply(i,s):i.push(s);this._encoder=null}return new Uint8Array(i)}};function HI(t){var e=t.fatal,n=0,i=0,r=0,s=128,o=191;this.handler=function(a,c){if(c===kd&&r!==0)return r=0,lf(e);if(c===kd)return sc;if(r===0){if(cs(c,0,127))return c;if(cs(c,194,223))r=1,n=c-192;else if(cs(c,224,239))c===224&&(s=160),c===237&&(o=159),r=2,n=c-224;else if(cs(c,240,244))c===240&&(s=144),c===244&&(o=143),r=3,n=c-240;else return lf(e);return n=n<<6*r,null}if(!cs(c,s,o))return n=r=i=0,s=128,o=191,a.prepend(c),lf(e);if(s=128,o=191,i+=1,n+=c-128<<6*(r-i),i!==r)return null;var l=n;return n=r=i=0,l}}function QI(t){t.fatal,this.handler=function(e,n){if(n===kd)return sc;if(cs(n,0,127))return n;var i,r;cs(n,128,2047)?(i=1,r=192):cs(n,2048,65535)?(i=2,r=224):cs(n,65536,1114111)&&(i=3,r=240);for(var s=[(n>>6*i)+r];i>0;){var o=n>>6*(i-1);s.push(128|o&63),i-=1}return s}}const GI=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Td,TextEncoder:Ad},Symbol.toStringTag,{value:"Module"})),YI=Zp(GI);var XI=At&&At.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),JI=At&&At.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qr=At&&At.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},eE=At&&At.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&XI(e,t,n);return JI(e,t),e},m_=At&&At.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xn,"__esModule",{value:!0});var w_=xn.deserializeUnchecked=S_=xn.deserialize=k_=xn.serialize=xn.BinaryReader=xn.BinaryWriter=xn.BorshError=xn.baseDecode=xn.baseEncode=void 0;const Zs=m_(A),y_=m_(WI),tE=eE(YI),nE=typeof TextDecoder!="function"?tE.TextDecoder:TextDecoder,iE=new nE("utf-8",{fatal:!0});function rE(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),y_.default.encode(Buffer.from(t))}xn.baseEncode=rE;function sE(t){return Buffer.from(y_.default.decode(t))}xn.baseDecode=sE;const uf=1024;class Hn extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}xn.BorshError=Hn;class __{constructor(){this.buf=Buffer.alloc(uf),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(uf)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Zs.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Zs.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Zs.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Zs.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(uf)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const i of e)this.maybeResize(),n(i)}toArray(){return this.buf.subarray(0,this.length)}}xn.BinaryWriter=__;function Gr(t,e,n){const i=n.value;n.value=function(...r){try{return i.apply(this,r)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Hn("Reached the end of buffer when deserializing")}throw s}}}class Di{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Zs.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Zs.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Zs.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Zs.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Hn(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return iE.decode(n)}catch(i){throw new Hn(`Error decoding UTF-8 string: ${i}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),i=Array();for(let r=0;r<n;++r)i.push(e());return i}}Qr([Gr],Di.prototype,"readU8",null);Qr([Gr],Di.prototype,"readU16",null);Qr([Gr],Di.prototype,"readU32",null);Qr([Gr],Di.prototype,"readU64",null);Qr([Gr],Di.prototype,"readU128",null);Qr([Gr],Di.prototype,"readU256",null);Qr([Gr],Di.prototype,"readU512",null);Qr([Gr],Di.prototype,"readString",null);Qr([Gr],Di.prototype,"readFixedArray",null);Qr([Gr],Di.prototype,"readArray",null);xn.BinaryReader=Di;function b_(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Io(t,e,n,i,r){try{if(typeof i=="string")r[`write${b_(i)}`](n);else if(i instanceof Array)if(typeof i[0]=="number"){if(n.length!==i[0])throw new Hn(`Expecting byte array of length ${i[0]}, but got ${n.length} bytes`);r.writeFixedArray(n)}else if(i.length===2&&typeof i[1]=="number"){if(n.length!==i[1])throw new Hn(`Expecting byte array of length ${i[1]}, but got ${n.length} bytes`);for(let s=0;s<i[1];s++)Io(t,null,n[s],i[0],r)}else r.writeArray(n,s=>{Io(t,e,s,i[0],r)});else if(i.kind!==void 0)switch(i.kind){case"option":{n==null?r.writeU8(0):(r.writeU8(1),Io(t,e,n,i.type,r));break}case"map":{r.writeU32(n.size),n.forEach((s,o)=>{Io(t,e,o,i.key,r),Io(t,e,s,i.value,r)});break}default:throw new Hn(`FieldType ${i} unrecognized`)}else v_(t,n,r)}catch(s){throw s instanceof Hn&&s.addToFieldPath(e),s}}function v_(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const i=t.get(e.constructor);if(!i)throw new Hn(`Class ${e.constructor.name} is missing in schema`);if(i.kind==="struct")i.fields.map(([r,s])=>{Io(t,r,e[r],s,n)});else if(i.kind==="enum"){const r=e[i.field];for(let s=0;s<i.values.length;++s){const[o,a]=i.values[s];if(o===r){n.writeU8(s),Io(t,o,e[o],a,n);break}}}else throw new Hn(`Unexpected schema kind: ${i.kind} for ${e.constructor.name}`)}function oE(t,e,n=__){const i=new n;return v_(t,e,i),i.toArray()}var k_=xn.serialize=oE;function Eo(t,e,n,i){try{if(typeof n=="string")return i[`read${b_(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return i.readFixedArray(n[0]);if(typeof n[1]=="number"){const r=[];for(let s=0;s<n[1];s++)r.push(Eo(t,null,n[0],i));return r}else return i.readArray(()=>Eo(t,e,n[0],i))}if(n.kind==="option")return i.readU8()?Eo(t,e,n.type,i):void 0;if(n.kind==="map"){let r=new Map;const s=i.readU32();for(let o=0;o<s;o++){const a=Eo(t,e,n.key,i),c=Eo(t,e,n.value,i);r.set(a,c)}return r}return fg(t,n,i)}catch(r){throw r instanceof Hn&&r.addToFieldPath(e),r}}function fg(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const i=t.get(e);if(!i)throw new Hn(`Class ${e.name} is missing in schema`);if(i.kind==="struct"){const r={};for(const[s,o]of t.get(e).fields)r[s]=Eo(t,s,o,n);return new e(r)}if(i.kind==="enum"){const r=n.readU8();if(r>=i.values.length)throw new Hn(`Enum index: ${r} is out of range`);const[s,o]=i.values[r],a=Eo(t,s,o,n);return new e({[s]:a})}throw new Hn(`Unexpected schema kind: ${i.kind} for ${e.constructor.name}`)}function aE(t,e,n,i=Di){const r=new i(n),s=fg(t,e,r);if(r.offset<n.length)throw new Hn(`Unexpected ${n.length-r.offset} bytes after deserialized data`);return s}var S_=xn.deserialize=aE;function cE(t,e,n,i=Di){const r=new i(n);return fg(t,e,r)}w_=xn.deserializeUnchecked=cE;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.s16=Z.s8=Z.nu64be=Z.u48be=Z.u40be=Z.u32be=Z.u24be=Z.u16be=Cn=Z.nu64=Z.u48=Z.u40=Ze=Z.u32=Z.u24=qi=Z.u16=Qt=Z.u8=Vo=Z.offset=Z.greedy=Z.Constant=Z.UTF8=Z.CString=Z.Blob=Z.Boolean=Z.BitField=Z.BitStructure=Z.VariantLayout=Z.Union=Z.UnionLayoutDiscriminator=Z.UnionDiscriminator=Z.Structure=Z.Sequence=Z.DoubleBE=Z.Double=Z.FloatBE=Z.Float=Z.NearInt64BE=Z.NearInt64=Z.NearUInt64BE=Z.NearUInt64=Z.IntBE=Z.Int=Z.UIntBE=Z.UInt=Z.OffsetLayout=Z.GreedyCount=Z.ExternalLayout=Z.bindConstructorLayout=Z.nameWithProperty=Z.Layout=Z.uint8ArrayToBuffer=Z.checkUint8Array=void 0;Z.constant=Z.utf8=Z.cstr=Vi=Z.blob=Z.unionLayoutDiscriminator=Z.union=Ur=Z.seq=Z.bits=Ke=Z.struct=Z.f64be=Z.f64=Z.f32be=Z.f32=Z.ns64be=Z.s48be=Z.s40be=Z.s32be=Z.s24be=Z.s16be=Ai=Z.ns64=Z.s48=Z.s40=Z.s32=Z.s24=void 0;const pg=Je;function gc(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Z.checkUint8Array=gc;function Nt(t){return gc(t),pg.Buffer.from(t.buffer,t.byteOffset,t.length)}Z.uint8ArrayToBuffer=Nt;class Bt{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}Z.Layout=Bt;function gg(t,e){return e.property?t+"["+e.property+"]":t}Z.nameWithProperty=gg;function lE(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Bt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,i){return e.encode(this,n,i)},writable:!0}),Object.defineProperty(t,"decode",{value(n,i){return e.decode(n,i)},writable:!0})}Z.bindConstructorLayout=lE;class si extends Bt{isCount(){throw new Error("ExternalLayout is abstract")}}Z.ExternalLayout=si;class T_ extends si{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){gc(e);const i=e.length-n;return Math.floor(i/this.elementSpan)}encode(e,n,i){return 0}}Z.GreedyCount=T_;class mg extends si{constructor(e,n=0,i){if(!(e instanceof Bt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,i||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Hi||this.layout instanceof pr}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,i=0){return this.layout.encode(e,n,i+this.offset)}}Z.OffsetLayout=mg;class Hi extends Bt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Nt(e).readUIntLE(n,this.span)}encode(e,n,i=0){return Nt(n).writeUIntLE(e,i,this.span),this.span}}Z.UInt=Hi;class pr extends Bt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Nt(e).readUIntBE(n,this.span)}encode(e,n,i=0){return Nt(n).writeUIntBE(e,i,this.span),this.span}}Z.UIntBE=pr;class Xo extends Bt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Nt(e).readIntLE(n,this.span)}encode(e,n,i=0){return Nt(n).writeIntLE(e,i,this.span),this.span}}Z.Int=Xo;class mc extends Bt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Nt(e).readIntBE(n,this.span)}encode(e,n,i=0){return Nt(n).writeIntBE(e,i,this.span),this.span}}Z.IntBE=mc;const Kf=Math.pow(2,32);function vh(t){const e=Math.floor(t/Kf),n=t-e*Kf;return{hi32:e,lo32:n}}function kh(t,e){return t*Kf+e}class A_ extends Bt{constructor(e){super(8,e)}decode(e,n=0){const i=Nt(e),r=i.readUInt32LE(n),s=i.readUInt32LE(n+4);return kh(s,r)}encode(e,n,i=0){const r=vh(e),s=Nt(n);return s.writeUInt32LE(r.lo32,i),s.writeUInt32LE(r.hi32,i+4),8}}Z.NearUInt64=A_;class C_ extends Bt{constructor(e){super(8,e)}decode(e,n=0){const i=Nt(e),r=i.readUInt32BE(n),s=i.readUInt32BE(n+4);return kh(r,s)}encode(e,n,i=0){const r=vh(e),s=Nt(n);return s.writeUInt32BE(r.hi32,i),s.writeUInt32BE(r.lo32,i+4),8}}Z.NearUInt64BE=C_;class I_ extends Bt{constructor(e){super(8,e)}decode(e,n=0){const i=Nt(e),r=i.readUInt32LE(n),s=i.readInt32LE(n+4);return kh(s,r)}encode(e,n,i=0){const r=vh(e),s=Nt(n);return s.writeUInt32LE(r.lo32,i),s.writeInt32LE(r.hi32,i+4),8}}Z.NearInt64=I_;class E_ extends Bt{constructor(e){super(8,e)}decode(e,n=0){const i=Nt(e),r=i.readInt32BE(n),s=i.readUInt32BE(n+4);return kh(r,s)}encode(e,n,i=0){const r=vh(e),s=Nt(n);return s.writeInt32BE(r.hi32,i),s.writeUInt32BE(r.lo32,i+4),8}}Z.NearInt64BE=E_;class x_ extends Bt{constructor(e){super(4,e)}decode(e,n=0){return Nt(e).readFloatLE(n)}encode(e,n,i=0){return Nt(n).writeFloatLE(e,i),4}}Z.Float=x_;class M_ extends Bt{constructor(e){super(4,e)}decode(e,n=0){return Nt(e).readFloatBE(n)}encode(e,n,i=0){return Nt(n).writeFloatBE(e,i),4}}Z.FloatBE=M_;class N_ extends Bt{constructor(e){super(8,e)}decode(e,n=0){return Nt(e).readDoubleLE(n)}encode(e,n,i=0){return Nt(n).writeDoubleLE(e,i),8}}Z.Double=N_;class O_ extends Bt{constructor(e){super(8,e)}decode(e,n=0){return Nt(e).readDoubleBE(n)}encode(e,n,i=0){return Nt(n).writeDoubleBE(e,i),8}}Z.DoubleBE=O_;class D_ extends Bt{constructor(e,n,i){if(!(e instanceof Bt))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof si&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(n instanceof si)&&0<e.span&&(r=n*e.span),super(r,i),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let i=0,r=this.count;if(r instanceof si&&(r=r.decode(e,n)),0<this.elementLayout.span)i=r*this.elementLayout.span;else{let s=0;for(;s<r;)i+=this.elementLayout.getSpan(e,n+i),++s}return i}decode(e,n=0){const i=[];let r=0,s=this.count;for(s instanceof si&&(s=s.decode(e,n));r<s;)i.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),r+=1;return i}encode(e,n,i=0){const r=this.elementLayout,s=e.reduce((o,a)=>o+r.encode(a,n,i+o),0);return this.count instanceof si&&this.count.encode(e.length,n,i),s}}Z.Sequence=D_;class j_ extends Bt{constructor(e,n,i){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof Bt,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&i===void 0&&(i=n,n=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(r,n),this.fields=e,this.decodePrefixes=!!i}getSpan(e,n=0){if(0<=this.span)return this.span;let i=0;try{i=this.fields.reduce((r,s)=>{const o=s.getSpan(e,n);return n+=o,r+o},0)}catch{throw new RangeError("indeterminate span")}return i}decode(e,n=0){gc(e);const i=this.makeDestinationObject();for(const r of this.fields)if(r.property!==void 0&&(i[r.property]=r.decode(e,n)),n+=r.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return i}encode(e,n,i=0){const r=i;let s=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,n,i),0>c&&(c=a.getSpan(n,i)))}s=i,i+=c}return s+o-r}fromArray(e){const n=this.makeDestinationObject();for(const i of this.fields)i.property!==void 0&&0<e.length&&(n[i.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const i of this.fields){if(i.property===e)return n;0>i.span?n=-1:0<=n&&(n+=i.span)}}}Z.Structure=j_;class wg{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,i){throw new Error("UnionDiscriminator is abstract")}}Z.UnionDiscriminator=wg;class Cd extends wg{constructor(e,n){if(!(e instanceof si&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,i){return this.layout.encode(e,n,i)}}Z.UnionLayoutDiscriminator=Cd;class yg extends Bt{constructor(e,n,i){let r;if(e instanceof Hi||e instanceof pr)r=new Cd(new mg(e));else if(e instanceof si&&e.isCount())r=new Cd(e);else if(e instanceof wg)r=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof Bt))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let s=-1;n&&(s=n.span,0<=s&&(e instanceof Hi||e instanceof pr)&&(s+=r.layout.span)),super(s,i),this.discriminator=r,this.usesPrefixDiscriminator=e instanceof Hi||e instanceof pr,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const i=this.getVariant(e,n);if(!i)throw new Error("unable to determine span for unrecognized variant");return i.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const i=this.registry[n];if(i.property&&Object.prototype.hasOwnProperty.call(e,i.property))return i}throw new Error("unable to infer src variant")}decode(e,n=0){let i;const r=this.discriminator,s=r.decode(e,n),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=r.layout.span),i=this.makeDestinationObject(),i[r.property]=s,i[a.property]=a.decode(e,n+c)}else i=o.decode(e,n);return i}encode(e,n,i=0){const r=this.getSourceVariant(e);if(r===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],n,i),a+o.encode(e[o.property],n,i+a)}return r.encode(e,n,i)}addVariant(e,n,i){const r=new R_(this,e,n,i);return this.registry[e]=r,r}getVariant(e,n=0){let i;return e instanceof Uint8Array?i=this.discriminator.decode(e,n):i=e,this.registry[i]}}Z.Union=yg;class R_ extends Bt{constructor(e,n,i,r){if(!(e instanceof yg))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof i=="string"&&r===void 0&&(r=i,i=null),i){if(!(i instanceof Bt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=i.span&&i.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof r!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=i?i.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,r),this.union=e,this.variant=n,this.layout=i||null}getSpan(e,n=0){if(0<=this.span)return this.span;let i=0;this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(e,n+i)),i+r}decode(e,n=0){const i=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?i[this.property]=this.layout.decode(e,n+r):this.property?i[this.property]=!0:this.union.usesPrefixDiscriminator&&(i[this.union.discriminator.property]=this.variant),i}encode(e,n,i=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,i);let s=r;if(this.layout&&(this.layout.encode(e[this.property],n,i+r),s+=this.layout.getSpan(n,i+r),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}Z.VariantLayout=R_;function wa(t){return 0>t&&(t+=4294967296),t}class _g extends Bt{constructor(e,n,i){if(!(e instanceof Hi||e instanceof pr))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&i===void 0&&(i=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,i),this.word=e,this.msb=!!n,this.fields=[];let r=0;this._packedSetValue=function(s){return r=wa(s),this},this._packedGetValue=function(){return r}}decode(e,n=0){const i=this.makeDestinationObject(),r=this.word.decode(e,n);this._packedSetValue(r);for(const s of this.fields)s.property!==void 0&&(i[s.property]=s.decode(e));return i}encode(e,n,i=0){const r=this.word.decode(n,i);this._packedSetValue(r);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),n,i)}addField(e,n){const i=new bg(this,e,n);return this.fields.push(i),i}addBoolean(e){const n=new B_(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}Z.BitStructure=_g;class bg{constructor(e,n,i){if(!(e instanceof _g))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const r=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(n+s>r)throw new Error("bits too long for span remainder ("+(r-s)+" of "+r+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=r-s-n),this.wordMask=wa(this.valueMask<<this.start),this.property=i}decode(e,n){const i=this.container._packedGetValue();return wa(i&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==wa(e&this.valueMask))throw new TypeError(gg("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),i=wa(e<<this.start);this.container._packedSetValue(wa(n&~this.wordMask)|i)}}Z.BitField=bg;let B_=class extends bg{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};Z.Boolean=B_;let P_=class extends Bt{constructor(e,n){if(!(e instanceof si&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let i=-1;e instanceof si||(i=e),super(i,n),this.length=e}getSpan(e,n){let i=this.span;return 0>i&&(i=this.length.decode(e,n)),i}decode(e,n=0){let i=this.span;return 0>i&&(i=this.length.decode(e,n)),Nt(e).slice(n,n+i)}encode(e,n,i){let r=this.length;if(this.length instanceof si&&(r=e.length),!(e instanceof Uint8Array&&r===e.length))throw new TypeError(gg("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(i+r>n.length)throw new RangeError("encoding overruns Uint8Array");const s=Nt(e);return Nt(n).write(s.toString("hex"),i,r,"hex"),this.length instanceof si&&this.length.encode(r,n,i),r}};Z.Blob=P_;class F_ extends Bt{constructor(e){super(-1,e)}getSpan(e,n=0){gc(e);let i=n;for(;i<e.length&&e[i]!==0;)i+=1;return 1+i-n}decode(e,n=0){const i=this.getSpan(e,n);return Nt(e).slice(n,n+i-1).toString("utf-8")}encode(e,n,i=0){typeof e!="string"&&(e=String(e));const r=pg.Buffer.from(e,"utf8"),s=r.length;if(i+s>n.length)throw new RangeError("encoding overruns Buffer");const o=Nt(n);return r.copy(o,i),o[i+s]=0,s+1}}Z.CString=F_;class U_ extends Bt{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return gc(e),e.length-n}decode(e,n=0){const i=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");return Nt(e).slice(n,n+i).toString("utf-8")}encode(e,n,i=0){typeof e!="string"&&(e=String(e));const r=pg.Buffer.from(e,"utf8"),s=r.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(i+s>n.length)throw new RangeError("encoding overruns Buffer");return r.copy(Nt(n),i),s}}Z.UTF8=U_;class L_ extends Bt{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,i){return 0}}Z.Constant=L_;Z.greedy=(t,e)=>new T_(t,e);var Vo=Z.offset=(t,e,n)=>new mg(t,e,n),Qt=Z.u8=t=>new Hi(1,t),qi=Z.u16=t=>new Hi(2,t);Z.u24=t=>new Hi(3,t);var Ze=Z.u32=t=>new Hi(4,t);Z.u40=t=>new Hi(5,t);Z.u48=t=>new Hi(6,t);var Cn=Z.nu64=t=>new A_(t);Z.u16be=t=>new pr(2,t);Z.u24be=t=>new pr(3,t);Z.u32be=t=>new pr(4,t);Z.u40be=t=>new pr(5,t);Z.u48be=t=>new pr(6,t);Z.nu64be=t=>new C_(t);Z.s8=t=>new Xo(1,t);Z.s16=t=>new Xo(2,t);Z.s24=t=>new Xo(3,t);Z.s32=t=>new Xo(4,t);Z.s40=t=>new Xo(5,t);Z.s48=t=>new Xo(6,t);var Ai=Z.ns64=t=>new I_(t);Z.s16be=t=>new mc(2,t);Z.s24be=t=>new mc(3,t);Z.s32be=t=>new mc(4,t);Z.s40be=t=>new mc(5,t);Z.s48be=t=>new mc(6,t);Z.ns64be=t=>new E_(t);Z.f32=t=>new x_(t);Z.f32be=t=>new M_(t);Z.f64=t=>new N_(t);Z.f64be=t=>new O_(t);var Ke=Z.struct=(t,e,n)=>new j_(t,e,n);Z.bits=(t,e,n)=>new _g(t,e,n);var Ur=Z.seq=(t,e,n)=>new D_(t,e,n);Z.union=(t,e,n)=>new yg(t,e,n);Z.unionLayoutDiscriminator=(t,e)=>new Cd(t,e);var Vi=Z.blob=(t,e)=>new P_(t,e);Z.cstr=t=>new F_(t);Z.utf8=(t,e)=>new U_(t,e);Z.constant=(t,e)=>new L_(t,e);var kl={};Object.defineProperty(kl,"__esModule",{value:!0});function uE(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var dE=kl.toBigIntLE=uE;function hE(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}kl.toBigIntBE=hE;function fE(t,e){{const n=t.toString(16),i=Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return i.reverse(),i}}var pE=kl.toBufferLE=fE;function gE(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}kl.toBufferBE=gE;class mE extends TypeError{constructor(e,n){let i;const{message:r,...s}=e,{path:o}=e,a=o.length===0?r:"At path: "+o.join(".")+" -- "+r;super(a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var c;return(c=i)!=null?c:i=[e,...n()]}}}function wE(t){return Gs(t)&&typeof t[Symbol.iterator]=="function"}function Gs(t){return typeof t=="object"&&t!=null}function yr(t){return typeof t=="string"?JSON.stringify(t):""+t}function yE(t){const{done:e,value:n}=t.next();return e?void 0:n}function _E(t,e,n,i){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:r,branch:s}=e,{type:o}=n,{refinement:a,message:c="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+yr(i)+"`"}=t;return{value:i,type:o,refinement:a,key:r[r.length-1],path:r,branch:s,...t,message:c}}function*dw(t,e,n,i){wE(t)||(t=[t]);for(const r of t){const s=_E(r,e,n,i);s&&(yield s)}}function*vg(t,e,n={}){const{path:i=[],branch:r=[t],coerce:s=!1,mask:o=!1}=n,a={path:i,branch:r};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&Gs(e.schema)&&Gs(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let c=!0;for(const l of e.validator(t,a))c=!1,yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const h=vg(u,d,{path:l===void 0?i:[...i,l],branch:l===void 0?r:[...r,u],coerce:s,mask:o});for(const f of h)f[0]?(c=!1,yield[f[0],void 0]):s&&(u=f[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):Gs(t)&&(t[l]=u))}if(c)for(const l of e.refiner(t,a))c=!1,yield[l,void 0];c&&(yield[void 0,t])}let Yr=class{constructor(e){const{type:n,schema:i,validator:r,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=i,this.entries=a,this.coercer=o,r?this.validator=(c,l)=>{const u=r(c,l);return dw(u,l,this,c)}:this.validator=()=>[],s?this.refiner=(c,l)=>{const u=s(c,l);return dw(u,l,this,c)}:this.refiner=()=>[]}assert(e){return bE(e,this)}create(e){return el(e,this)}is(e){return $_(e,this)}mask(e){return vE(e,this)}validate(e,n={}){return Sl(e,this,n)}};function bE(t,e){const n=Sl(t,e);if(n[0])throw n[0]}function el(t,e){const n=Sl(t,e,{coerce:!0});if(n[0])throw n[0];return n[1]}function vE(t,e){const n=Sl(t,e,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}function $_(t,e){return!Sl(t,e)[0]}function Sl(t,e,n={}){const i=vg(t,e,n),r=yE(i);return r[0]?[new mE(r[0],function*(){for(const o of i)o[0]&&(yield o[0])}),void 0]:[void 0,r[1]]}function Jo(t,e){return new Yr({type:t,schema:null,validator:e})}function kE(){return Jo("any",()=>!0)}function Be(t){return new Yr({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,i]of e.entries())yield[n,i,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+yr(e)}})}function Kr(){return Jo("boolean",t=>typeof t=="boolean")}function kg(t){return Jo("instance",e=>e instanceof t||"Expected a `"+t.name+"` instance, but received: "+yr(e))}function Zt(t){const e=yr(t),n=typeof t;return new Yr({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(i){return i===t||"Expected the literal `"+e+"`, but received: "+yr(i)}})}function SE(){return Jo("never",()=>!1)}function Re(t){return new Yr({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function K(){return Jo("number",t=>typeof t=="number"&&!isNaN(t)||"Expected a number, but received: "+yr(t))}function Xe(t){return new Yr({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function z_(t,e){return new Yr({type:"record",schema:null,*entries(n){if(Gs(n))for(const i in n){const r=n[i];yield[i,i,t],yield[i,r,e]}},validator(n){return Gs(n)||"Expected an object, but received: "+yr(n)}})}function Te(){return Jo("string",t=>typeof t=="string"||"Expected a string, but received: "+yr(t))}function Sg(t){const e=SE();return new Yr({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const i=Math.max(t.length,n.length);for(let r=0;r<i;r++)yield[r,n[r],t[r]||e]}},validator(n){return Array.isArray(n)||"Expected an array, but received: "+yr(n)}})}function de(t){const e=Object.keys(t);return new Yr({type:"type",schema:t,*entries(n){if(Gs(n))for(const i of e)yield[i,n[i],t[i]]},validator(n){return Gs(n)||"Expected an object, but received: "+yr(n)}})}function ui(t){const e=t.map(n=>n.type).join(" | ");return new Yr({type:"union",schema:null,validator(n,i){const r=[];for(const s of t){const[...o]=vg(n,s,i),[a]=o;if(a[0])for(const[c]of o)c&&r.push(c);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+yr(n),...r]}})}function Tl(){return Jo("unknown",()=>!0)}function Al(t,e,n){return new Yr({...t,coercer:(i,r)=>$_(i,e)?t.coercer(n(i,r),r):t.coercer(i,r)})}const q_=Zp(pA);q_.v4;q_.v4;var TE={},Id={},AE={get exports(){return Id},set exports(t){Id=t}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(AE);var Ed={},CE={get exports(){return Ed},set exports(t){Ed=t}},hw;function IE(){return hw||(hw=1,function(t){function e(i,r,s,o,a,c,l){try{var u=i[c](l),d=u.value}catch(h){s(h);return}u.done?r(d):Promise.resolve(d).then(o,a)}function n(i){return function(){var r=this,s=arguments;return new Promise(function(o,a){var c=i.apply(r,s);function l(d){e(c,o,a,l,u,"next",d)}function u(d){e(c,o,a,l,u,"throw",d)}l(void 0)})}}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(CE)),Ed}var xd={},EE={get exports(){return xd},set exports(t){xd=t}},fw;function V_(){return fw||(fw=1,function(t){function e(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(EE)),xd}var Md={},xE={get exports(){return Md},set exports(t){Md=t}},Nd={},ME={get exports(){return Nd},set exports(t){Nd=t}},Od={},NE={get exports(){return Od},set exports(t){Od=t}},pw;function OE(){return pw||(pw=1,function(t){var e=ch.default;function n(i,r){if(e(i)!=="object"||i===null)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var o=s.call(i,r||"default");if(e(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(NE)),Od}var gw;function DE(){return gw||(gw=1,function(t){var e=ch.default,n=OE();function i(r){var s=n(r,"string");return e(s)==="symbol"?s:String(s)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(ME)),Nd}var mw;function W_(){return mw||(mw=1,function(t){var e=DE();function n(r,s){for(var o=0;o<s.length;o++){var a=s[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,e(a.key),a)}}function i(r,s,o){return s&&n(r.prototype,s),o&&n(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(xE)),Md}var Dd={},jE={get exports(){return Dd},set exports(t){Dd=t}},jd={},RE={get exports(){return jd},set exports(t){jd=t}},ww;function BE(){return ww||(ww=1,function(t){function e(n,i){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(RE)),jd}var yw;function K_(){return yw||(yw=1,function(t){var e=BE();function n(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),r&&e(i,r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(jE)),Dd}var Rd={},PE={get exports(){return Rd},set exports(t){Rd=t}},Bd={},FE={get exports(){return Bd},set exports(t){Bd=t}},_w;function UE(){return _w||(_w=1,function(t){function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(FE)),Bd}var bw;function Z_(){return bw||(bw=1,function(t){var e=ch.default,n=UE();function i(r,s){if(s&&(e(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(r)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(PE)),Rd}var Pd={},LE={get exports(){return Pd},set exports(t){Pd=t}},vw;function H_(){return vw||(vw=1,function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(LE)),Pd}(function(t){var e=Id;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=e(f2),i=e(IE()),r=e(ch),s=e(V_()),o=e(W_()),a=e(K_()),c=e(Z_()),l=e(H_()),u=Xc;function d(p){var w=h();return function(){var k=(0,l.default)(p),T;if(w){var R=(0,l.default)(this).constructor;T=Reflect.construct(k,arguments,R)}else T=k.apply(this,arguments);return(0,c.default)(this,T)}}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var f=function(p,w){var _={};for(var k in p)Object.prototype.hasOwnProperty.call(p,k)&&w.indexOf(k)<0&&(_[k]=p[k]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,k=Object.getOwnPropertySymbols(p);T<k.length;T++)w.indexOf(k[T])<0&&Object.prototype.propertyIsEnumerable.call(p,k[T])&&(_[k[T]]=p[k[T]]);return _},g=function(p){(0,a.default)(_,p);var w=d(_);function _(k){var T,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},D=arguments.length>3?arguments[3]:void 0;(0,s.default)(this,_);var B=E.autoconnect,$=B===void 0?!0:B,Y=E.reconnect,z=Y===void 0?!0:Y,H=E.reconnect_interval,ie=H===void 0?1e3:H,ke=E.max_reconnects,ze=ke===void 0?5:ke,se=f(E,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return T=w.call(this),T.webSocketFactory=k,T.queue={},T.rpc_id=0,T.address=R,T.autoconnect=$,T.ready=!1,T.reconnect=z,T.reconnect_timer_id=void 0,T.reconnect_interval=ie,T.max_reconnects=ze,T.rest_options=se,T.current_reconnects=0,T.generate_request_id=D||function(){return++T.rpc_id},T.autoconnect&&T._connect(T.address,Object.assign({autoconnect:T.autoconnect,reconnect:T.reconnect,reconnect_interval:T.reconnect_interval,max_reconnects:T.max_reconnects},T.rest_options)),T}return(0,o.default)(_,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(T,R,E,D){var B=this;return!D&&(0,r.default)(E)==="object"&&(D=E,E=null),new Promise(function($,Y){if(!B.ready)return Y(new Error("socket not ready"));var z=B.generate_request_id(T,R),H={jsonrpc:"2.0",method:T,params:R||null,id:z};B.socket.send(JSON.stringify(H),D,function(ie){if(ie)return Y(ie);B.queue[z]={promise:[$,Y]},E&&(B.queue[z].timeout=setTimeout(function(){delete B.queue[z],Y(new Error("reply timeout"))},E))})})}},{key:"login",value:function(){var k=(0,i.default)(n.default.mark(function R(E){var D;return n.default.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,this.call("rpc.login",E);case 2:if(D=$.sent,D){$.next=5;break}throw new Error("authentication failed");case 5:return $.abrupt("return",D);case 6:case"end":return $.stop()}},R,this)}));function T(R){return k.apply(this,arguments)}return T}()},{key:"listMethods",value:function(){var k=(0,i.default)(n.default.mark(function R(){return n.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.call("__listMethods");case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},R,this)}));function T(){return k.apply(this,arguments)}return T}()},{key:"notify",value:function(T,R){var E=this;return new Promise(function(D,B){if(!E.ready)return B(new Error("socket not ready"));var $={jsonrpc:"2.0",method:T,params:R||null};E.socket.send(JSON.stringify($),function(Y){if(Y)return B(Y);D()})})}},{key:"subscribe",value:function(){var k=(0,i.default)(n.default.mark(function R(E){var D;return n.default.wrap(function($){for(;;)switch($.prev=$.next){case 0:return typeof E=="string"&&(E=[E]),$.next=3,this.call("rpc.on",E);case 3:if(D=$.sent,!(typeof E=="string"&&D[E]!=="ok")){$.next=6;break}throw new Error("Failed subscribing to an event '"+E+"' with: "+D[E]);case 6:return $.abrupt("return",D);case 7:case"end":return $.stop()}},R,this)}));function T(R){return k.apply(this,arguments)}return T}()},{key:"unsubscribe",value:function(){var k=(0,i.default)(n.default.mark(function R(E){var D;return n.default.wrap(function($){for(;;)switch($.prev=$.next){case 0:return typeof E=="string"&&(E=[E]),$.next=3,this.call("rpc.off",E);case 3:if(D=$.sent,!(typeof E=="string"&&D[E]!=="ok")){$.next=6;break}throw new Error("Failed unsubscribing from an event with: "+D);case 6:return $.abrupt("return",D);case 7:case"end":return $.stop()}},R,this)}));function T(R){return k.apply(this,arguments)}return T}()},{key:"close",value:function(T,R){this.socket.close(T||1e3,R)}},{key:"_connect",value:function(T,R){var E=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(T,R),this.socket.addEventListener("open",function(){E.ready=!0,E.emit("open"),E.current_reconnects=0}),this.socket.addEventListener("message",function(D){var B=D.data;B instanceof ArrayBuffer&&(B=Buffer.from(B).toString());try{B=JSON.parse(B)}catch{return}if(B.notification&&E.listeners(B.notification).length){if(!Object.keys(B.params).length)return E.emit(B.notification);var $=[B.notification];if(B.params.constructor===Object)$.push(B.params);else for(var Y=0;Y<B.params.length;Y++)$.push(B.params[Y]);return Promise.resolve().then(function(){E.emit.apply(E,$)})}if(!E.queue[B.id])return B.method&&B.params?Promise.resolve().then(function(){E.emit(B.method,B.params)}):void 0;"error"in B=="result"in B&&E.queue[B.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),E.queue[B.id].timeout&&clearTimeout(E.queue[B.id].timeout),B.error?E.queue[B.id].promise[1](B.error):E.queue[B.id].promise[0](B.result),delete E.queue[B.id]}),this.socket.addEventListener("error",function(D){return E.emit("error",D)}),this.socket.addEventListener("close",function(D){var B=D.code,$=D.reason;E.ready&&setTimeout(function(){return E.emit("close",B,$)},0),E.ready=!1,E.socket=void 0,B!==1e3&&(E.current_reconnects++,E.reconnect&&(E.max_reconnects>E.current_reconnects||E.max_reconnects===0)&&(E.reconnect_timer_id=setTimeout(function(){return E._connect(T,R)},E.reconnect_interval)))})}}]),_}(u.EventEmitter);t.default=g})(TE);var $E={};(function(t){var e=Id;Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var n=e(V_()),i=e(W_()),r=e(K_()),s=e(Z_()),o=e(H_()),a=Xc;function c(h){var f=l();return function(){var p=(0,o.default)(h),w;if(f){var _=(0,o.default)(this).constructor;w=Reflect.construct(p,arguments,_)}else w=p.apply(this,arguments);return(0,s.default)(this,w)}}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var u=function(h){(0,r.default)(g,h);var f=c(g);function g(p,w,_){var k;return(0,n.default)(this,g),k=f.call(this),k.socket=new window.WebSocket(p,_),k.socket.onopen=function(){return k.emit("open")},k.socket.onmessage=function(T){return k.emit("message",T.data)},k.socket.onerror=function(T){return k.emit("error",T)},k.socket.onclose=function(T){k.emit("close",T.code,T.reason)},k}return(0,i.default)(g,[{key:"send",value:function(w,_,k){var T=k||_;try{this.socket.send(w),T()}catch(R){T(R)}}},{key:"close",value:function(w,_){this.socket.close(w,_)}},{key:"addEventListener",value:function(w,_,k){this.socket.addEventListener(w,_,k)}}]),g}(a.EventEmitter);function d(h,f){return new u(h,f)}})($E);_h.utils.randomPrivateKey;function kw(t){try{return _h.ExtendedPoint.fromHex(t),!0}catch{return!1}}const zE=(t,e)=>_h.sign(t,e.slice(0,32)),qE=_h.verify,Tg=t=>Je.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Je.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Je.Buffer.from(t);class VE{constructor(e){Object.assign(this,e)}encode(){return Je.Buffer.from(k_(Fu,this))}static decode(e){return S_(Fu,this,e)}static decodeUnchecked(e){return w_(Fu,this,e)}}const Fu=new Map;var Q_;let G_;const WE=32,Do=32;function KE(t){return t._bn!==void 0}let Sw=1;G_=Symbol.toStringTag;let pt=class ya extends VE{constructor(e){if(super({}),this._bn=void 0,KE(e))this._bn=e._bn;else{if(typeof e=="string"){const n=Ii.decode(e);if(n.length!=Do)throw new Error("Invalid public key input");this._bn=new A(n)}else this._bn=new A(e);if(this._bn.byteLength()>Do)throw new Error("Invalid public key input")}}static unique(){const e=new ya(Sw);return Sw+=1,new ya(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ii.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Je.Buffer);if(e.length===Do)return e;const n=Je.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[G_](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,i){const r=Je.Buffer.concat([e.toBuffer(),Je.Buffer.from(n),i.toBuffer()]),s=bd(r);return new ya(s)}static createProgramAddressSync(e,n){let i=Je.Buffer.alloc(0);e.forEach(function(s){if(s.length>WE)throw new TypeError("Max seed length exceeded");i=Je.Buffer.concat([i,Tg(s)])}),i=Je.Buffer.concat([i,n.toBuffer(),Je.Buffer.from("ProgramDerivedAddress")]);const r=bd(i);if(kw(r))throw new Error("Invalid seeds, address must fall off the curve");return new ya(r)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let i=255,r;for(;i!=0;){try{const s=e.concat(Je.Buffer.from([i]));r=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new ya(e);return kw(n.toBytes())}};Q_=pt;pt.default=new Q_("11111111111111111111111111111111");Fu.set(pt,{kind:"struct",fields:[["_bn","u256"]]});new pt("BPFLoader1111111111111111111111111111111111");const Zf=1280-40-8,ZE=127,Hf=64;class Tw{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const i=new Map;this.keySegments().flat().forEach((s,o)=>{i.set(s.toBase58(),o)});const r=s=>{const o=i.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:r(s.programId),accountKeyIndexes:s.keys.map(o=>r(o.pubkey)),data:s.data}))}}const Tt=(t="publicKey")=>Vi(32,t),Ea=(t="string")=>{const e=Ke([Ze("length"),Ze("lengthPadding"),Vi(Vo(Ze(),-8),"chars")],t),n=e.decode.bind(e),i=e.encode.bind(e),r=e;return r.decode=(s,o)=>n(s,o).chars.toString(),r.encode=(s,o,a)=>{const c={chars:Je.Buffer.from(s,"utf8")};return i(c,o,a)},r.alloc=s=>Ze().span+Ze().span+Je.Buffer.from(s,"utf8").length,r},HE=(t="authorized")=>Ke([Tt("staker"),Tt("withdrawer")],t),QE=(t="lockup")=>Ke([Ai("unixTimestamp"),Ai("epoch"),Tt("custodian")],t),GE=(t="voteInit")=>Ke([Tt("nodePubkey"),Tt("authorizedVoter"),Tt("authorizedWithdrawer"),Qt("commission")],t),YE=(t="voteAuthorizeWithSeedArgs")=>Ke([Ze("voteAuthorizationType"),Tt("currentAuthorityDerivedKeyOwnerPubkey"),Ea("currentAuthorityDerivedKeySeed"),Tt("newAuthorized")],t);function Dc(t){let e=0,n=0;for(;;){let i=t.shift();if(e|=(i&127)<<n*7,n+=1,!(i&128))break}return e}function jc(t,e){let n=e;for(;;){let i=n&127;if(n>>=7,n==0){t.push(i);break}else i|=128,t.push(i)}}function Ti(t,e){if(!t)throw new Error(e||"Assertion failed")}class Ag{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const i=new Map,r=o=>{const a=o.toBase58();let c=i.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},i.set(a,c)),c},s=r(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){r(o.programId).isInvoked=!0;for(const a of o.keys){const c=r(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new Ag(n,i)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ti(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,c])=>c.isSigner&&c.isWritable),i=e.filter(([,c])=>c.isSigner&&!c.isWritable),r=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+i.length,numReadonlySignedAccounts:i.length,numReadonlyUnsignedAccounts:s.length};{Ti(n.length>0,"Expected at least one writable signer key");const[c]=n[0];Ti(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new pt(c)),...i.map(([c])=>new pt(c)),...r.map(([c])=>new pt(c)),...s.map(([c])=>new pt(c))];return[o,a]}extractTableLookup(e){const[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[r,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&r.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:r},{writable:i,readonly:s}]}drainKeysFoundInLookupTable(e,n){const i=new Array,r=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new pt(s),c=e.findIndex(l=>l.equals(a));c>=0&&(Ti(c<256,"Max lookup table index exceeded"),i.push(c),r.push(a),this.keyMetaMap.delete(s))}return[i,r]}}class oc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new pt(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ii.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Tw(this.staticAccountKeys)}static compile(e){const n=Ag.compile(e.instructions,e.payerKey),[i,r]=n.getMessageComponents(),o=new Tw(r).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Ii.encode(a.data)}));return new oc({header:i,accountKeys:r,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const i=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return i<s}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];jc(n,e);const i=this.instructions.map(d=>{const{accounts:h,programIdIndex:f}=d,g=Array.from(Ii.decode(d.data));let p=[];jc(p,h.length);let w=[];return jc(w,g.length),{programIdIndex:f,keyIndicesCount:Je.Buffer.from(p),keyIndices:h,dataLength:Je.Buffer.from(w),data:g}});let r=[];jc(r,i.length);let s=Je.Buffer.alloc(Zf);Je.Buffer.from(r).copy(s);let o=r.length;i.forEach(d=>{const f=Ke([Qt("programIdIndex"),Vi(d.keyIndicesCount.length,"keyIndicesCount"),Ur(Qt("keyIndex"),d.keyIndices.length,"keyIndices"),Vi(d.dataLength.length,"dataLength"),Ur(Qt("userdatum"),d.data.length,"data")]).encode(d,s,o);o+=f}),s=s.slice(0,o);const a=Ke([Vi(1,"numRequiredSignatures"),Vi(1,"numReadonlySignedAccounts"),Vi(1,"numReadonlyUnsignedAccounts"),Vi(n.length,"keyCount"),Ur(Tt("key"),e,"keys"),Tt("recentBlockhash")]),c={numRequiredSignatures:Je.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Je.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Je.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Je.Buffer.from(n),keys:this.accountKeys.map(d=>Tg(d.toBytes())),recentBlockhash:Ii.decode(this.recentBlockhash)};let l=Je.Buffer.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let n=[...e];const i=n.shift();if(i!==(i&ZE))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const r=n.shift(),s=n.shift(),o=Dc(n);let a=[];for(let h=0;h<o;h++){const f=n.slice(0,Do);n=n.slice(Do),a.push(new pt(Je.Buffer.from(f)))}const c=n.slice(0,Do);n=n.slice(Do);const l=Dc(n);let u=[];for(let h=0;h<l;h++){const f=n.shift(),g=Dc(n),p=n.slice(0,g);n=n.slice(g);const w=Dc(n),_=n.slice(0,w),k=Ii.encode(Je.Buffer.from(_));n=n.slice(w),u.push({programIdIndex:f,accounts:p,data:k})}const d={header:{numRequiredSignatures:i,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:s},recentBlockhash:Ii.encode(Je.Buffer.from(c)),accountKeys:a,instructions:u};return new oc(d)}}const XE=Je.Buffer.alloc(Hf).fill(0);class Qf{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Je.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:i})=>({pubkey:e.toJSON(),isSigner:n,isWritable:i})),programId:this.programId.toJSON(),data:[...this.data]}}}let JE=class Gf{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:i}=e;this.minNonceContextSlot=n,this.nonceInfo=i}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:i}=e;this.recentBlockhash=n,this.lastValidBlockHeight=i}else{const{recentBlockhash:n,nonceInfo:i}=e;i&&(this.nonceInfo=i),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Qf(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let i;if(this.feePayer)i=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)i=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let p=0;p<n.length;p++)if(n[p].programId===void 0)throw new Error(`Transaction instruction index ${p} has undefined program id`);const r=[],s=[];n.forEach(p=>{p.keys.forEach(_=>{s.push({..._})});const w=p.programId.toString();r.includes(w)||r.push(w)}),r.forEach(p=>{s.push({pubkey:new pt(p),isSigner:!1,isWritable:!1})});const o=[];s.forEach(p=>{const w=p.pubkey.toString(),_=o.findIndex(k=>k.pubkey.toString()===w);_>-1?(o[_].isWritable=o[_].isWritable||p.isWritable,o[_].isSigner=o[_].isSigner||p.isSigner):o.push(p)}),o.sort(function(p,w){if(p.isSigner!==w.isSigner)return p.isSigner?-1:1;if(p.isWritable!==w.isWritable)return p.isWritable?-1:1;const _={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return p.pubkey.toBase58().localeCompare(w.pubkey.toBase58(),"en",_)});const a=o.findIndex(p=>p.pubkey.equals(i));if(a>-1){const[p]=o.splice(a,1);p.isSigner=!0,p.isWritable=!0,o.unshift(p)}else o.unshift({pubkey:i,isSigner:!0,isWritable:!0});for(const p of this.signatures){const w=o.findIndex(_=>_.pubkey.equals(p.publicKey));if(w>-1)o[w].isSigner||(o[w].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${p.publicKey.toString()}`)}let c=0,l=0,u=0;const d=[],h=[];o.forEach(({pubkey:p,isSigner:w,isWritable:_})=>{w?(d.push(p.toString()),c+=1,_||(l+=1)):(h.push(p.toString()),_||(u+=1))});const f=d.concat(h),g=n.map(p=>{const{data:w,programId:_}=p;return{programIdIndex:f.indexOf(_.toString()),accounts:p.keys.map(k=>f.indexOf(k.pubkey.toString())),data:Ii.encode(w)}});return g.forEach(p=>{Ti(p.programIdIndex>=0),p.accounts.forEach(w=>Ti(w>=0))}),new oc({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:g})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((r,s)=>n[s].equals(r.publicKey))||(this.signatures=n.map(i=>({signature:null,publicKey:i}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(i=>{const r=i.toString();return n.has(r)?!1:(n.add(r),!0)}).map(i=>({signature:null,publicKey:i}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,i=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),i.push(s))}this.signatures=i.map(s=>({signature:null,publicKey:s.publicKey}));const r=this._compile();this._partialSign(r,...i)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,i=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),i.push(s))}const r=this._compile();this._partialSign(r,...i)}_partialSign(e,...n){const i=e.serialize();n.forEach(r=>{const s=zE(i,r.secretKey);this._addSignature(r.publicKey,Tg(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Ti(n.length===64);const i=this.signatures.findIndex(r=>e.equals(r.publicKey));if(i<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[i].signature=Je.Buffer.from(n)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,n){for(const{signature:i,publicKey:r}of this.signatures)if(i===null){if(n)return!1}else if(!qE(i,e,r.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:n,verifySignatures:i}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=this.serializeMessage();if(i&&!this._verifySignatures(r,n))throw new Error("Signature verification failed");return this._serialize(r)}_serialize(e){const{signatures:n}=this,i=[];jc(i,n.length);const r=i.length+n.length*64+e.length,s=Je.Buffer.alloc(r);return Ti(n.length<256),Je.Buffer.from(i).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Ti(o.length===64,"signature has invalid length"),Je.Buffer.from(o).copy(s,i.length+a*64))}),e.copy(s,i.length+n.length*64),Ti(s.length<=Zf,`Transaction too large: ${s.length} > ${Zf}`),s}get keys(){return Ti(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ti(this.instructions.length===1),this.instructions[0].programId}get data(){return Ti(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const i=Dc(n);let r=[];for(let s=0;s<i;s++){const o=n.slice(0,Hf);n=n.slice(Hf),r.push(Ii.encode(Je.Buffer.from(o)))}return Gf.populate(oc.from(n),r)}static populate(e,n=[]){const i=new Gf;return i.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(i.feePayer=e.accountKeys[0]),n.forEach((r,s)=>{const o={signature:r==Ii.encode(XE)?null:Ii.decode(r),publicKey:e.accountKeys[s]};i.signatures.push(o)}),e.instructions.forEach(r=>{const s=r.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:i.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});i.instructions.push(new Qf({keys:s,programId:e.accountKeys[r.programIdIndex],data:Ii.decode(r.data)}))}),i._message=e,i._json=i.toJSON(),i}};new pt("SysvarC1ock11111111111111111111111111111111");new pt("SysvarEpochSchedu1e111111111111111111111111");new pt("Sysvar1nstructions1111111111111111111111111");new pt("SysvarRecentB1ockHashes11111111111111111111");new pt("SysvarRent111111111111111111111111111111111");new pt("SysvarRewards111111111111111111111111111111");new pt("SysvarS1otHashes111111111111111111111111111");new pt("SysvarS1otHistory11111111111111111111111111");new pt("SysvarStakeHistory1111111111111111111111111");const e4=Cn("lamportsPerSignature"),t4=Ke([Ze("version"),Ze("state"),Tt("authorizedPubkey"),Tt("nonce"),Ke([e4],"feeCalculator")]);t4.span;const n4=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}},i4=t=>e=>{const n=Vi(t,e),{encode:i,decode:r}=n4(n),s=n;return s.decode=(o,a)=>{const c=r(o,a);return dE(Je.Buffer.from(c))},s.encode=(o,a,c)=>{const l=pE(o,t);return i(l,a,c)},s},ac=i4(8);Object.freeze({Create:{index:0,layout:Ke([Ze("instruction"),Ai("lamports"),Ai("space"),Tt("programId")])},Assign:{index:1,layout:Ke([Ze("instruction"),Tt("programId")])},Transfer:{index:2,layout:Ke([Ze("instruction"),ac("lamports")])},CreateWithSeed:{index:3,layout:Ke([Ze("instruction"),Tt("base"),Ea("seed"),Ai("lamports"),Ai("space"),Tt("programId")])},AdvanceNonceAccount:{index:4,layout:Ke([Ze("instruction")])},WithdrawNonceAccount:{index:5,layout:Ke([Ze("instruction"),Ai("lamports")])},InitializeNonceAccount:{index:6,layout:Ke([Ze("instruction"),Tt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Ke([Ze("instruction"),Tt("authorized")])},Allocate:{index:8,layout:Ke([Ze("instruction"),Ai("space")])},AllocateWithSeed:{index:9,layout:Ke([Ze("instruction"),Tt("base"),Ea("seed"),Ai("space"),Tt("programId")])},AssignWithSeed:{index:10,layout:Ke([Ze("instruction"),Tt("base"),Ea("seed"),Tt("programId")])},TransferWithSeed:{index:11,layout:Ke([Ze("instruction"),ac("lamports"),Ea("seed"),Tt("programId")])},UpgradeNonceAccount:{index:12,layout:Ke([Ze("instruction")])}});new pt("11111111111111111111111111111111");new pt("BPFLoader2111111111111111111111111111111111");Ke([Ze("typeIndex"),ac("deactivationSlot"),Cn("lastExtendedSlot"),Qt("lastExtendedStartIndex"),Qt(),Ur(Tt(),Vo(Qt(),-1),"authority")]);const wn=Al(kg(pt),Te(),t=>new pt(t)),Y_=Sg([Te(),Zt("base64")]),Cg=Al(kg(Je.Buffer),Y_,t=>Je.Buffer.from(t[0],"base64"));function X_(t){return ui([de({jsonrpc:Zt("2.0"),id:Te(),result:t}),de({jsonrpc:Zt("2.0"),id:Te(),error:de({code:Tl(),message:Te(),data:Xe(kE())})})])}const r4=X_(Tl());function zt(t){return Al(X_(t),r4,e=>"error"in e?e:{...e,result:el(e.result,t)})}function Xi(t){return zt(de({context:de({slot:K()}),value:t}))}function Sh(t){return de({context:de({slot:K()}),value:t})}const s4=de({foundation:K(),foundationTerm:K(),initial:K(),taper:K(),terminal:K()});zt(Be(Re(de({epoch:K(),effectiveSlot:K(),amount:K(),postBalance:K(),commission:Xe(Re(K()))}))));const o4=Be(de({slot:K(),prioritizationFee:K()})),a4=de({total:K(),validator:K(),foundation:K(),epoch:K()}),c4=de({epoch:K(),slotIndex:K(),slotsInEpoch:K(),absoluteSlot:K(),blockHeight:Xe(K()),transactionCount:Xe(K())}),l4=de({slotsPerEpoch:K(),leaderScheduleSlotOffset:K(),warmup:Kr(),firstNormalEpoch:K(),firstNormalSlot:K()}),u4=z_(Te(),Be(K())),ea=Re(ui([de({}),Te()])),d4=de({err:ea}),h4=Zt("receivedSignature");de({"solana-core":Te(),"feature-set":Xe(K())});Xi(de({err:Re(ui([de({}),Te()])),logs:Re(Be(Te())),accounts:Xe(Re(Be(Re(de({executable:Kr(),owner:Te(),lamports:K(),data:Be(Te()),rentEpoch:Xe(K())}))))),unitsConsumed:Xe(K()),returnData:Xe(Re(de({programId:Te(),data:Sg([Te(),Zt("base64")])})))}));Xi(de({byIdentity:z_(Te(),Be(K())),range:de({firstSlot:K(),lastSlot:K()})}));zt(s4);zt(a4);zt(o4);zt(c4);zt(l4);zt(u4);zt(K());Xi(de({total:K(),circulating:K(),nonCirculating:K(),nonCirculatingAccounts:Be(wn)}));const f4=de({amount:Te(),uiAmount:Re(K()),decimals:K(),uiAmountString:Xe(Te())});Xi(Be(de({address:wn,amount:Te(),uiAmount:Re(K()),decimals:K(),uiAmountString:Xe(Te())})));Xi(Be(de({pubkey:wn,account:de({executable:Kr(),owner:wn,lamports:K(),data:Cg,rentEpoch:K()})})));const Yf=de({program:Te(),parsed:Tl(),space:K()});Xi(Be(de({pubkey:wn,account:de({executable:Kr(),owner:wn,lamports:K(),data:Yf,rentEpoch:K()})})));Xi(Be(de({lamports:K(),address:wn})));const Ig=de({executable:Kr(),owner:wn,lamports:K(),data:Cg,rentEpoch:K()});de({pubkey:wn,account:Ig});const p4=Al(ui([kg(Je.Buffer),Yf]),ui([Y_,Yf]),t=>Array.isArray(t)?el(t,Cg):t),g4=de({executable:Kr(),owner:wn,lamports:K(),data:p4,rentEpoch:K()});de({pubkey:wn,account:g4});de({state:ui([Zt("active"),Zt("inactive"),Zt("activating"),Zt("deactivating")]),active:K(),inactive:K()});zt(Be(de({signature:Te(),slot:K(),err:ea,memo:Re(Te()),blockTime:Xe(Re(K()))})));zt(Be(de({signature:Te(),slot:K(),err:ea,memo:Re(Te()),blockTime:Xe(Re(K()))})));de({subscription:K(),result:Sh(Ig)});const m4=de({pubkey:wn,account:Ig});de({subscription:K(),result:Sh(m4)});const w4=de({parent:K(),slot:K(),root:K()});de({subscription:K(),result:w4});const y4=ui([de({type:ui([Zt("firstShredReceived"),Zt("completed"),Zt("optimisticConfirmation"),Zt("root")]),slot:K(),timestamp:K()}),de({type:Zt("createdBank"),parent:K(),slot:K(),timestamp:K()}),de({type:Zt("frozen"),slot:K(),timestamp:K(),stats:de({numTransactionEntries:K(),numSuccessfulTransactions:K(),numFailedTransactions:K(),maxTransactionsPerEntry:K()})}),de({type:Zt("dead"),slot:K(),timestamp:K(),err:Te()})]);de({subscription:K(),result:y4});de({subscription:K(),result:Sh(ui([d4,h4]))});de({subscription:K(),result:K()});de({pubkey:Te(),gossip:Re(Te()),tpu:Re(Te()),rpc:Re(Te()),version:Re(Te())});const Aw=de({votePubkey:Te(),nodePubkey:Te(),activatedStake:K(),epochVoteAccount:Kr(),epochCredits:Be(Sg([K(),K(),K()])),commission:K(),lastVote:K(),rootSlot:Re(K())});zt(de({current:Be(Aw),delinquent:Be(Aw)}));const _4=ui([Zt("processed"),Zt("confirmed"),Zt("finalized")]),b4=de({slot:K(),confirmations:Re(K()),err:ea,confirmationStatus:Xe(_4)});Xi(Be(Re(b4)));zt(K());const J_=de({accountKey:wn,writableIndexes:Be(K()),readonlyIndexes:Be(K())}),Eg=de({signatures:Be(Te()),message:de({accountKeys:Be(Te()),header:de({numRequiredSignatures:K(),numReadonlySignedAccounts:K(),numReadonlyUnsignedAccounts:K()}),instructions:Be(de({accounts:Be(K()),data:Te(),programIdIndex:K()})),recentBlockhash:Te(),addressTableLookups:Xe(Be(J_))})}),eb=de({pubkey:wn,signer:Kr(),writable:Kr(),source:Xe(ui([Zt("transaction"),Zt("lookupTable")]))}),tb=de({accountKeys:Be(eb),signatures:Be(Te())}),nb=de({parsed:Tl(),program:Te(),programId:wn}),ib=de({accounts:Be(wn),data:Te(),programId:wn}),v4=ui([ib,nb]),k4=ui([de({parsed:Tl(),program:Te(),programId:Te()}),de({accounts:Be(Te()),data:Te(),programId:Te()})]),rb=Al(v4,k4,t=>"accounts"in t?el(t,ib):el(t,nb)),sb=de({signatures:Be(Te()),message:de({accountKeys:Be(eb),instructions:Be(rb),recentBlockhash:Te(),addressTableLookups:Xe(Re(Be(J_)))})}),Fd=de({accountIndex:K(),mint:Te(),owner:Xe(Te()),uiTokenAmount:f4}),ob=de({writable:Be(wn),readonly:Be(wn)}),Th=de({err:ea,fee:K(),innerInstructions:Xe(Re(Be(de({index:K(),instructions:Be(de({accounts:Be(K()),data:Te(),programIdIndex:K()}))})))),preBalances:Be(K()),postBalances:Be(K()),logMessages:Xe(Re(Be(Te()))),preTokenBalances:Xe(Re(Be(Fd))),postTokenBalances:Xe(Re(Be(Fd))),loadedAddresses:Xe(ob),computeUnitsConsumed:Xe(K())}),xg=de({err:ea,fee:K(),innerInstructions:Xe(Re(Be(de({index:K(),instructions:Be(rb)})))),preBalances:Be(K()),postBalances:Be(K()),logMessages:Xe(Re(Be(Te()))),preTokenBalances:Xe(Re(Be(Fd))),postTokenBalances:Xe(Re(Be(Fd))),loadedAddresses:Xe(ob),computeUnitsConsumed:Xe(K())}),wc=ui([Zt(0),Zt("legacy")]),ta=de({pubkey:Te(),lamports:K(),postBalance:Re(K()),rewardType:Re(Te()),commission:Xe(Re(K()))});zt(Re(de({blockhash:Te(),previousBlockhash:Te(),parentSlot:K(),transactions:Be(de({transaction:Eg,meta:Re(Th),version:Xe(wc)})),rewards:Xe(Be(ta)),blockTime:Re(K()),blockHeight:Re(K())})));zt(Re(de({blockhash:Te(),previousBlockhash:Te(),parentSlot:K(),rewards:Xe(Be(ta)),blockTime:Re(K()),blockHeight:Re(K())})));zt(Re(de({blockhash:Te(),previousBlockhash:Te(),parentSlot:K(),transactions:Be(de({transaction:tb,meta:Re(Th),version:Xe(wc)})),rewards:Xe(Be(ta)),blockTime:Re(K()),blockHeight:Re(K())})));zt(Re(de({blockhash:Te(),previousBlockhash:Te(),parentSlot:K(),transactions:Be(de({transaction:sb,meta:Re(xg),version:Xe(wc)})),rewards:Xe(Be(ta)),blockTime:Re(K()),blockHeight:Re(K())})));zt(Re(de({blockhash:Te(),previousBlockhash:Te(),parentSlot:K(),transactions:Be(de({transaction:tb,meta:Re(xg),version:Xe(wc)})),rewards:Xe(Be(ta)),blockTime:Re(K()),blockHeight:Re(K())})));zt(Re(de({blockhash:Te(),previousBlockhash:Te(),parentSlot:K(),rewards:Xe(Be(ta)),blockTime:Re(K()),blockHeight:Re(K())})));zt(Re(de({blockhash:Te(),previousBlockhash:Te(),parentSlot:K(),transactions:Be(de({transaction:Eg,meta:Re(Th)})),rewards:Xe(Be(ta)),blockTime:Re(K())})));zt(Re(de({blockhash:Te(),previousBlockhash:Te(),parentSlot:K(),signatures:Be(Te()),blockTime:Re(K())})));zt(Re(de({slot:K(),meta:Re(Th),blockTime:Xe(Re(K())),transaction:Eg,version:Xe(wc)})));zt(Re(de({slot:K(),transaction:sb,meta:Re(xg),blockTime:Xe(Re(K())),version:Xe(wc)})));Xi(de({blockhash:Te(),feeCalculator:de({lamportsPerSignature:K()})}));Xi(de({blockhash:Te(),lastValidBlockHeight:K()}));Xi(Kr());const S4=de({slot:K(),numTransactions:K(),numSlots:K(),samplePeriodSecs:K()});zt(Be(S4));Xi(Re(de({feeCalculator:de({lamportsPerSignature:K()})})));zt(Te());zt(Te());const T4=de({err:ea,logs:Be(Te()),signature:Te()});de({result:Sh(T4),subscription:K()});Object.freeze({CreateLookupTable:{index:0,layout:Ke([Ze("instruction"),ac("recentSlot"),Qt("bumpSeed")])},FreezeLookupTable:{index:1,layout:Ke([Ze("instruction")])},ExtendLookupTable:{index:2,layout:Ke([Ze("instruction"),ac(),Ur(Tt(),Vo(Ze(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Ke([Ze("instruction")])},CloseLookupTable:{index:4,layout:Ke([Ze("instruction")])}});new pt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Ke([Qt("instruction"),Ze("units"),Ze("additionalFee")])},RequestHeapFrame:{index:1,layout:Ke([Qt("instruction"),Ze("bytes")])},SetComputeUnitLimit:{index:2,layout:Ke([Qt("instruction"),Ze("units")])},SetComputeUnitPrice:{index:3,layout:Ke([Qt("instruction"),ac("microLamports")])}});new pt("ComputeBudget111111111111111111111111111111");Ke([Qt("numSignatures"),Qt("padding"),qi("signatureOffset"),qi("signatureInstructionIndex"),qi("publicKeyOffset"),qi("publicKeyInstructionIndex"),qi("messageDataOffset"),qi("messageDataSize"),qi("messageInstructionIndex")]);new pt("Ed25519SigVerify111111111111111111111111111");og.utils.isValidPrivateKey;og.getPublicKey;Ke([Qt("numSignatures"),qi("signatureOffset"),Qt("signatureInstructionIndex"),qi("ethAddressOffset"),Qt("ethAddressInstructionIndex"),qi("messageDataOffset"),qi("messageDataSize"),Qt("messageInstructionIndex"),Vi(20,"ethAddress"),Vi(64,"signature"),Qt("recoveryId")]);new pt("KeccakSecp256k11111111111111111111111111111");var ab;new pt("StakeConfig11111111111111111111111111111111");class cb{constructor(e,n,i){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=i}}ab=cb;cb.default=new ab(0,0,pt.default);Object.freeze({Initialize:{index:0,layout:Ke([Ze("instruction"),HE(),QE()])},Authorize:{index:1,layout:Ke([Ze("instruction"),Tt("newAuthorized"),Ze("stakeAuthorizationType")])},Delegate:{index:2,layout:Ke([Ze("instruction")])},Split:{index:3,layout:Ke([Ze("instruction"),Ai("lamports")])},Withdraw:{index:4,layout:Ke([Ze("instruction"),Ai("lamports")])},Deactivate:{index:5,layout:Ke([Ze("instruction")])},Merge:{index:7,layout:Ke([Ze("instruction")])},AuthorizeWithSeed:{index:8,layout:Ke([Ze("instruction"),Tt("newAuthorized"),Ze("stakeAuthorizationType"),Ea("authoritySeed"),Tt("authorityOwner")])}});new pt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Ke([Ze("instruction"),GE()])},Authorize:{index:1,layout:Ke([Ze("instruction"),Tt("newAuthorized"),Ze("voteAuthorizationType")])},Withdraw:{index:3,layout:Ke([Ze("instruction"),Ai("lamports")])},AuthorizeWithSeed:{index:10,layout:Ke([Ze("instruction"),YE()])}});new pt("Vote111111111111111111111111111111111111111");new pt("Va1idator1nfo111111111111111111111111111111");de({name:Te(),website:Xe(Te()),details:Xe(Te()),keybaseUsername:Xe(Te())});new pt("Vote111111111111111111111111111111111111111");Ke([Tt("nodePubkey"),Tt("authorizedWithdrawer"),Qt("commission"),Cn(),Ur(Ke([Cn("slot"),Ze("confirmationCount")]),Vo(Ze(),-8),"votes"),Qt("rootSlotValid"),Cn("rootSlot"),Cn(),Ur(Ke([Cn("epoch"),Tt("authorizedVoter")]),Vo(Ze(),-8),"authorizedVoters"),Ke([Ur(Ke([Tt("authorizedPubkey"),Cn("epochOfLastAuthorizedSwitch"),Cn("targetEpoch")]),32,"buf"),Cn("idx"),Qt("isEmpty")],"priorVoters"),Cn(),Ur(Ke([Cn("epoch"),Cn("credits"),Cn("prevCredits")]),Vo(Ze(),-8),"epochCredits"),Ke([Cn("slot"),Cn("timestamp")],"lastTimestamp")]);var ws=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function lb(){throw new Error("setTimeout has not been defined")}function ub(){throw new Error("clearTimeout has not been defined")}var xs=lb,Ms=ub;typeof ws.setTimeout=="function"&&(xs=setTimeout);typeof ws.clearTimeout=="function"&&(Ms=clearTimeout);function db(t){if(xs===setTimeout)return setTimeout(t,0);if((xs===lb||!xs)&&setTimeout)return xs=setTimeout,setTimeout(t,0);try{return xs(t,0)}catch{try{return xs.call(null,t,0)}catch{return xs.call(this,t,0)}}}function A4(t){if(Ms===clearTimeout)return clearTimeout(t);if((Ms===ub||!Ms)&&clearTimeout)return Ms=clearTimeout,clearTimeout(t);try{return Ms(t)}catch{try{return Ms.call(null,t)}catch{return Ms.call(this,t)}}}var ds=[],La=!1,jo,Uu=-1;function C4(){!La||!jo||(La=!1,jo.length?ds=jo.concat(ds):Uu=-1,ds.length&&hb())}function hb(){if(!La){var t=db(C4);La=!0;for(var e=ds.length;e;){for(jo=ds,ds=[];++Uu<e;)jo&&jo[Uu].run();Uu=-1,e=ds.length}jo=null,La=!1,A4(t)}}function I4(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ds.push(new fb(t,e)),ds.length===1&&!La&&db(hb)}function fb(t,e){this.fun=t,this.array=e}fb.prototype.run=function(){this.fun.apply(null,this.array)};var E4="browser",x4="browser",M4=!0,N4={},O4=[],D4="",j4={},R4={},B4={};function na(){}var P4=na,F4=na,U4=na,L4=na,$4=na,z4=na,q4=na;function V4(t){throw new Error("process.binding is not supported")}function W4(){return"/"}function K4(t){throw new Error("process.chdir is not supported")}function Z4(){return 0}var _a=ws.performance||{},H4=_a.now||_a.mozNow||_a.msNow||_a.oNow||_a.webkitNow||function(){return new Date().getTime()};function Q4(t){var e=H4.call(_a)*.001,n=Math.floor(e),i=Math.floor(e%1*1e9);return t&&(n=n-t[0],i=i-t[1],i<0&&(n--,i+=1e9)),[n,i]}var G4=new Date;function Y4(){var t=new Date,e=t-G4;return e/1e3}var Lu={nextTick:I4,title:E4,browser:M4,env:N4,argv:O4,version:D4,versions:j4,on:P4,addListener:F4,once:U4,off:L4,removeListener:$4,removeAllListeners:z4,emit:q4,binding:V4,cwd:W4,chdir:K4,umask:Z4,hrtime:Q4,platform:x4,release:R4,config:B4,uptime:Y4},X4=function(t,e,n,i,r,s,o,a){if(Lu.env.NODE_ENV!=="production"&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,s,o,a],u=0;c=new Error(e.replace(/%s/g,function(){return l[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},$a=X4;const J4={56:"https://bsc-dataseed1.binance.org",97:"https://data-seed-prebsc-1-s1.binance.org:8545",137:"https://rpc-mainnet.maticvigil.com/",80001:"https://rpc-mumbai.matic.today/",43114:"https://api.avax.network/ext/bc/C/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc"},ex={1:"ethereum",4:"ethereum",56:"bsc",97:"bsc",137:"polygon",80001:"polygon",43114:"avalanche",43113:"avalanche"},tx={1:"mainnet",4:"rinkeby",56:"mainnet",97:"testnet",137:"mainnet",80001:"testnet",43114:"mainnet",43113:"testnet"},nx={1:"https://wallet.blocto.app",4:"https://wallet-testnet.blocto.app",56:"https://wallet.blocto.app",97:"https://wallet-testnet.blocto.app",137:"https://wallet.blocto.app",80001:"https://wallet-testnet.blocto.app",43114:"https://wallet.blocto.app",43113:"https://wallet-testnet.blocto.app"},ix={devnet:"https://wallet-testnet.blocto.app",testnet:"https://wallet-testnet.blocto.app","mainnet-beta":"https://wallet.blocto.app"},rx=["devnet","testnet","mainnet-beta"],sx={1:"https://wallet.blocto.app",2:"https://wallet-testnet.blocto.app",3:"https://wallet-testnet.blocto.app",4:"https://wallet-testnet.blocto.app",5:"https://wallet.blocto.app"};var xo;(function(t){t.Mainnet="mainnet",t.Testnet="testnet",t.Devnet="devnet",t.Testing="testing",t.Premainnet="premainnet"})(xo||(xo={}));const ox={1:xo.Mainnet,2:xo.Testnet,3:xo.Devnet,4:xo.Testing,5:xo.Premainnet},ax={1:"https://fullnode.mainnet.aptoslabs.com/v1",2:"https://fullnode.testnet.aptoslabs.com/v1",3:"https://fullnode.devnet.aptoslabs.com/v1",4:"",5:"https://premainnet.aptosdev.com/v1"},Cw=["connect","disconnect","message","chainChanged","accountsChanged"],Mg=86400*1e3,cx="sdk.session";class Ng{constructor(){this.isBlocto=!0,this.isConnecting=!1,this.connected=!1,this.eventListeners={},this.code=null,this.sessionKey=cx,this.off=this.removeListener,Cw.forEach(e=>{this.eventListeners[e]=[]})}async request(e){}on(e,n){Cw.includes(e)&&this.eventListeners[e].push(n)}once(){}removeListener(e,n){const r=this.eventListeners[e].findIndex(s=>s===n);r!==-1&&this.eventListeners[e].splice(r,1)}}const lx="width:100vw;height:100%;position:fixed;top:0;left:0;z-index:20000;border:none;";function Ys(t){const e=document.createElement("iframe");return e.setAttribute("src",t),e.setAttribute("style",lx),e}function Xs(t){document.body.appendChild(t)}function Ln(t){const e=t&&t.parentNode;e&&e.removeChild instanceof Function&&e.removeChild(t)}var Lr=(t,e,n=window)=>{function i(r){e(r,()=>n.removeEventListener(t,i))}n.addEventListener(t,i)};class ux{constructor(){this.storage={}}getItem(e){return this[e]||null}setItem(e,n){this.storage[e]=n}removeItem(e){delete this.storage[e]}}const pb=typeof window<"u"?window.memoryStorage:new ux;typeof window<"u"&&(window.memoryStorage=pb);const dx=()=>{if(typeof window>"u")return!1;try{window.localStorage.setItem("local_storage_supported","1");const t=window.localStorage.getItem("local_storage_supported");return window.localStorage.removeItem("local_storage_supported"),t==="1"}catch{return!1}},Og=dx()?window.localStorage:pb,hx=(t,e=null)=>{const n=Og.getItem(t);try{return JSON.parse(n)||e}catch{return n||e}},Dg=(t,e=null)=>{const n=hx(t,null);return n?new Date().getTime()>n.expiry?(mb(t),e):n.value:e},gb=(t,e)=>Og.setItem(t,typeof e=="string"?e:JSON.stringify(e)),jg=(t,e,n)=>gb(t,{value:e,expiry:new Date().getTime()+n}),mb=t=>{gb(t,""),Og.removeItem(t)};async function cc(t,e){if(t.status===403)throw e.code=null,mb(e.sessionKey),new Error("[Blocto SDK]: Session expired!");return t.json()}class fx extends Ng{constructor({chainId:e="0x1",rpc:n,server:i,appId:r}){super(),this.accounts=[],$a(e,"'chainId' is required"),typeof e=="number"?this.chainId=e:e.includes("0x")?this.chainId=parseInt(e,16):this.chainId=parseInt(e,10),this.networkId=this.chainId,this.chain=ex[this.chainId],this.net=tx[this.chainId],$a(this.chain,`unsupported 'chainId': ${this.chainId}`),this.rpc=n||J4[this.chainId]||{}.RPC||"",$a(this.rpc,"'rpc' is required for Ethereum"),this.server=i||nx[this.chainId]||{}.SERVER||"",this.appId=r||{}.APP_ID}tryRetrieveSessionFromStorage(){const e=Dg(this.sessionKey,{}),n=e&&e.code,i=e&&e.address&&e.address[this.chain];this.connected=!!(n&&i),this.code=n||null,this.accounts=i?[i]:[]}checkNetworkMatched(){const e=window.ethereum;if(e&&e.isBlocto&&parseInt(e.chainId,16)!==this.chainId)throw new Error("Blocto SDK network mismatched")}async send(e,n){switch(!0){case n instanceof Function:return this.sendAsync(e,n);case(typeof e=="string"&&Array.isArray(n)):return this.sendAsync({method:e,params:n});default:return this.sendAsync(e)}}async sendAsync(e,n){const i=new Promise(r=>{if(Array.isArray(e)){const s=e.filter(u=>u.method==="eth_sendTransaction").map(u=>u.params[0]),o=Math.floor(Math.random()*1e4),a={method:"blocto_sendBatchTransaction",params:s},c=this.request(a),l=e.map(({method:u,params:d},h)=>u==="eth_sendTransaction"?c:this.request({id:o+h+1,jsonrpc:"2.0",method:u,params:d}));Promise.allSettled(l).then(u=>r(u.map((d,h)=>({id:o+h+1,jsonrpc:"2.0",result:d.status==="fulfilled"?d.value:void 0,error:d.status!=="fulfilled"?d.reason:void 0}))))}else this.request(e).then(r)});if(n)i.then(r=>n(null,r)).catch(r=>n(r));else return i}async request(e){const n=window.ethereum;if(n&&n.isBlocto)return n.request(e);this.connected||await this.enable();try{let i=null,r=null;switch(e.method){case"eth_requestAccounts":this.accounts=await this.fetchAccounts();case"eth_accounts":r=this.accounts.length?this.accounts:await this.fetchAccounts();break;case"eth_coinbase":{r=this.accounts[0];break}case"eth_chainId":{r=this.chainId,r=`0x${r.toString(16)}`;break}case"net_version":{r=this.networkId||this.chainId,r=`0x${r.toString(16)}`;break}case"eth_signTypedData_v3":case"eth_signTypedData":case"eth_signTypedData_v4":case"personal_sign":case"eth_sign":{r=await this.handleSign(e);break}case"blocto_sendBatchTransaction":case"eth_sendTransaction":r=await this.handleSendTransaction(e);break;case"eth_signTransaction":case"eth_sendRawTransaction":r=null;break;default:i=await this.handleReadRequests(e)}if(i&&!i.result&&i.error){const s=i.error.message?i.error.message:"Request failed";throw new Error(s)}return i?i.result:r}catch(i){throw console.error(i),i}}async enable(){const e=window.ethereum;if(e&&e.isBlocto){if(parseInt(e.chainId,16)!==this.chainId)try{await e.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${this.chainId.toString(16)}`}]}),this.accounts=[e.address]}catch(n){console.error(n)}return new Promise((n,i)=>setTimeout(()=>e.enable().then(n).catch(i),10))}return this.tryRetrieveSessionFromStorage(),new Promise((n,i)=>{if(typeof window>"u"&&i("Currently only supported in browser"),this.connected)return n(this.accounts);const r=encodeURIComponent(window.location.origin),s=Ys(`${this.server}/authn?l6n=${r}&chain=${this.chain}`);Xs(s),Lr("message",(o,a)=>{const c=o;if(c.origin===this.server){if(c.data.type==="FCL::CHALLENGE::RESPONSE"){a(),Ln(s),this.code=c.data.code,this.connected=!0,this.eventListeners.connect.forEach(u=>u(this.chainId));const l=c.data.address;this.accounts=l?[l[this.chain]]:[],jg(this.sessionKey,{code:this.code,address:l},Mg),n(this.accounts)}c.data.type==="FCL::CHALLENGE::CANCEL"&&(a(),Ln(s),i(new Error("User declined the login request")))}})})}async fetchAccounts(){this.checkNetworkMatched();const{accounts:e}=await fetch(`${this.server}/api/${this.chain}/accounts?code=${this.code}`).then(n=>cc(n,this));return this.accounts=e,e}async handleReadRequests(e){return this.checkNetworkMatched(),fetch(this.rpc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:1,jsonrpc:"2.0",...e})}).then(n=>n.json())}async handleSign({method:e,params:n}){const i=`${this.server}/user-signature/${this.chain}`,r=Ys(i);Xs(r);let s="";return Array.isArray(n)&&(e==="eth_sign"?s=n[1].slice(2):e==="personal_sign"?s=n[0].slice(2):["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4"].includes(e)&&(s=n[1])),Lr("message",(o,a)=>{const c=o;c.origin===this.server&&c.data.type==="ETH:FRAME:READY"&&(r.contentWindow&&r.contentWindow.postMessage({type:"ETH:FRAME:READY:RESPONSE",method:e,message:s,chain:this.chain},i),a())}),new Promise((o,a)=>Lr("message",(c,l)=>{const u=c;u.origin===this.server&&u.data.type==="ETH:FRAME:RESPONSE"&&(u.data.status==="APPROVED"&&(l(),Ln(r),o(u.data.signature)),u.data.status==="DECLINED"&&(l(),Ln(r),a(new Error("User declined the signing request"))))}))}async handleSendTransaction(e){this.checkNetworkMatched();const{authorizationId:n}=await fetch(`${this.server}/api/${this.chain}/authz?code=${this.code}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.params)}).then(r=>cc(r,this));if(typeof window>"u")throw new Error("Currently only supported in browser");const i=Ys(`${this.server}/authz/${this.chain}/${n}`);return Xs(i),new Promise((r,s)=>Lr("message",(o,a)=>{const c=o;c.origin===this.server&&c.data.type==="ETH:FRAME:RESPONSE"&&(c.data.status==="APPROVED"&&(a(),Ln(i),r(c.data.txHash)),c.data.status==="DECLINED"&&(a(),Ln(i),s(new Error("User declined to send the transaction"))))}))}}var Fr=[],$i=[],px=typeof Uint8Array<"u"?Uint8Array:Array,Rg=!1;function wb(){Rg=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)Fr[e]=t[e],$i[t.charCodeAt(e)]=e;$i["-".charCodeAt(0)]=62,$i["_".charCodeAt(0)]=63}function gx(t){Rg||wb();var e,n,i,r,s,o,a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=t[a-2]==="="?2:t[a-1]==="="?1:0,o=new px(a*3/4-s),i=s>0?a-4:a;var c=0;for(e=0,n=0;e<i;e+=4,n+=3)r=$i[t.charCodeAt(e)]<<18|$i[t.charCodeAt(e+1)]<<12|$i[t.charCodeAt(e+2)]<<6|$i[t.charCodeAt(e+3)],o[c++]=r>>16&255,o[c++]=r>>8&255,o[c++]=r&255;return s===2?(r=$i[t.charCodeAt(e)]<<2|$i[t.charCodeAt(e+1)]>>4,o[c++]=r&255):s===1&&(r=$i[t.charCodeAt(e)]<<10|$i[t.charCodeAt(e+1)]<<4|$i[t.charCodeAt(e+2)]>>2,o[c++]=r>>8&255,o[c++]=r&255),o}function mx(t){return Fr[t>>18&63]+Fr[t>>12&63]+Fr[t>>6&63]+Fr[t&63]}function wx(t,e,n){for(var i,r=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],r.push(mx(i));return r.join("")}function Iw(t){Rg||wb();for(var e,n=t.length,i=n%3,r="",s=[],o=16383,a=0,c=n-i;a<c;a+=o)s.push(wx(t,a,a+o>c?c:a+o));return i===1?(e=t[n-1],r+=Fr[e>>2],r+=Fr[e<<4&63],r+="=="):i===2&&(e=(t[n-2]<<8)+t[n-1],r+=Fr[e>>10],r+=Fr[e>>4&63],r+=Fr[e<<2&63],r+="="),s.push(r),s.join("")}function Ah(t,e,n,i,r){var s,o,a=r*8-i-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?r-1:0,h=n?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=s*256+t[e+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=o*256+t[e+d],d+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-l}return(f?-1:1)*o*Math.pow(2,s-i)}function yb(t,e,n,i,r,s){var o,a,c,l=s*8-r-1,u=(1<<l)-1,d=u>>1,h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,g=i?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,r),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;t[n+f]=a&255,f+=g,a/=256,r-=8);for(o=o<<r|a,l+=r;l>0;t[n+f]=o&255,f+=g,o/=256,l-=8);t[n+f-g]|=p*128}var yx={}.toString,_b=Array.isArray||function(t){return yx.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var bb=50;ue.TYPED_ARRAY_SUPPORT=ws.TYPED_ARRAY_SUPPORT!==void 0?ws.TYPED_ARRAY_SUPPORT:!0;var _x=Ud();function Ud(){return ue.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function hs(t,e){if(Ud()<e)throw new RangeError("Invalid typed array length");return ue.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=ue.prototype):(t===null&&(t=new ue(e)),t.length=e),t}function ue(t,e,n){if(!ue.TYPED_ARRAY_SUPPORT&&!(this instanceof ue))return new ue(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Bg(this,t)}return vb(this,t,e,n)}ue.poolSize=8192;ue._augment=function(t){return t.__proto__=ue.prototype,t};function vb(t,e,n,i){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?kx(t,e,n,i):typeof e=="string"?vx(t,e,n):Sx(t,e)}ue.from=function(t,e,n){return vb(null,t,e,n)};ue.TYPED_ARRAY_SUPPORT&&(ue.prototype.__proto__=Uint8Array.prototype,ue.__proto__=Uint8Array);function kb(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function bx(t,e,n,i){return kb(e),e<=0?hs(t,e):n!==void 0?typeof i=="string"?hs(t,e).fill(n,i):hs(t,e).fill(n):hs(t,e)}ue.alloc=function(t,e,n){return bx(null,t,e,n)};function Bg(t,e){if(kb(e),t=hs(t,e<0?0:Pg(e)|0),!ue.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}ue.allocUnsafe=function(t){return Bg(null,t)};ue.allocUnsafeSlow=function(t){return Bg(null,t)};function vx(t,e,n){if((typeof n!="string"||n==="")&&(n="utf8"),!ue.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=Sb(e,n)|0;t=hs(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function Xf(t,e){var n=e.length<0?0:Pg(e.length)|0;t=hs(t,n);for(var i=0;i<n;i+=1)t[i]=e[i]&255;return t}function kx(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return n===void 0&&i===void 0?e=new Uint8Array(e):i===void 0?e=new Uint8Array(e,n):e=new Uint8Array(e,n,i),ue.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=ue.prototype):t=Xf(t,e),t}function Sx(t,e){if(Zr(e)){var n=Pg(e.length)|0;return t=hs(t,n),t.length===0||e.copy(t,0,0,n),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||qx(e.length)?hs(t,0):Xf(t,e);if(e.type==="Buffer"&&_b(e.data))return Xf(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Pg(t){if(t>=Ud())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ud().toString(16)+" bytes");return t|0}function Tx(t){return+t!=t&&(t=0),ue.alloc(+t)}ue.isBuffer=Nb;function Zr(t){return!!(t!=null&&t._isBuffer)}ue.compare=function(e,n){if(!Zr(e)||!Zr(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var i=e.length,r=n.length,s=0,o=Math.min(i,r);s<o;++s)if(e[s]!==n[s]){i=e[s],r=n[s];break}return i<r?-1:r<i?1:0};ue.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ue.concat=function(e,n){if(!_b(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ue.alloc(0);var i;if(n===void 0)for(n=0,i=0;i<e.length;++i)n+=e[i].length;var r=ue.allocUnsafe(n),s=0;for(i=0;i<e.length;++i){var o=e[i];if(!Zr(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,s),s+=o.length}return r};function Sb(t,e){if(Zr(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Ld(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return Mb(t).length;default:if(i)return Ld(t).length;e=(""+e).toLowerCase(),i=!0}}ue.byteLength=Sb;function Ax(t,e,n){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Rx(this,e,n);case"utf8":case"utf-8":return Cb(this,e,n);case"ascii":return Dx(this,e,n);case"latin1":case"binary":return jx(this,e,n);case"base64":return Nx(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bx(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}ue.prototype._isBuffer=!0;function Ro(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}ue.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)Ro(this,n,n+1);return this};ue.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)Ro(this,n,n+3),Ro(this,n+1,n+2);return this};ue.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)Ro(this,n,n+7),Ro(this,n+1,n+6),Ro(this,n+2,n+5),Ro(this,n+3,n+4);return this};ue.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Cb(this,0,e):Ax.apply(this,arguments)};ue.prototype.equals=function(e){if(!Zr(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ue.compare(this,e)===0};ue.prototype.inspect=function(){var e="",n=bb;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"};ue.prototype.compare=function(e,n,i,r,s){if(!Zr(e))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),i===void 0&&(i=e?e.length:0),r===void 0&&(r=0),s===void 0&&(s=this.length),n<0||i>e.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&n>=i)return 0;if(r>=s)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,s>>>=0,this===e)return 0;for(var o=s-r,a=i-n,c=Math.min(o,a),l=this.slice(r,s),u=e.slice(n,i),d=0;d<c;++d)if(l[d]!==u[d]){o=l[d],a=u[d];break}return o<a?-1:a<o?1:0};function Tb(t,e,n,i,r){if(t.length===0)return-1;if(typeof n=="string"?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0)if(r)n=0;else return-1;if(typeof e=="string"&&(e=ue.from(e,i)),Zr(e))return e.length===0?-1:Ew(t,e,n,i,r);if(typeof e=="number")return e=e&255,ue.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Ew(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function Ew(t,e,n,i,r){var s=1,o=t.length,a=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,n/=2}function c(f,g){return s===1?f[g]:f.readUInt16BE(g*s)}var l;if(r){var u=-1;for(l=n;l<o;l++)if(c(t,l)===c(e,u===-1?0:l-u)){if(u===-1&&(u=l),l-u+1===a)return u*s}else u!==-1&&(l-=l-u),u=-1}else for(n+a>o&&(n=o-a),l=n;l>=0;l--){for(var d=!0,h=0;h<a;h++)if(c(t,l+h)!==c(e,h)){d=!1;break}if(d)return l}return-1}ue.prototype.includes=function(e,n,i){return this.indexOf(e,n,i)!==-1};ue.prototype.indexOf=function(e,n,i){return Tb(this,e,n,i,!0)};ue.prototype.lastIndexOf=function(e,n,i){return Tb(this,e,n,i,!1)};function Cx(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(e.substr(o*2,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function Ix(t,e,n,i){return Eh(Ld(e,t.length-n),t,n,i)}function Ab(t,e,n,i){return Eh($x(e),t,n,i)}function Ex(t,e,n,i){return Ab(t,e,n,i)}function xx(t,e,n,i){return Eh(Mb(e),t,n,i)}function Mx(t,e,n,i){return Eh(zx(e,t.length-n),t,n,i)}ue.prototype.write=function(e,n,i,r){if(n===void 0)r="utf8",i=this.length,n=0;else if(i===void 0&&typeof n=="string")r=n,i=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(i)?(i=i|0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-n;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return Cx(this,e,n,i);case"utf8":case"utf-8":return Ix(this,e,n,i);case"ascii":return Ab(this,e,n,i);case"latin1":case"binary":return Ex(this,e,n,i);case"base64":return xx(this,e,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mx(this,e,n,i);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}};ue.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Nx(t,e,n){return e===0&&n===t.length?Iw(t):Iw(t.slice(e,n))}function Cb(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var s=t[r],o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a<=n){var c,l,u,d;switch(a){case 1:s<128&&(o=s);break;case 2:c=t[r+1],(c&192)===128&&(d=(s&31)<<6|c&63,d>127&&(o=d));break;case 3:c=t[r+1],l=t[r+2],(c&192)===128&&(l&192)===128&&(d=(s&15)<<12|(c&63)<<6|l&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:c=t[r+1],l=t[r+2],u=t[r+3],(c&192)===128&&(l&192)===128&&(u&192)===128&&(d=(s&15)<<18|(c&63)<<12|(l&63)<<6|u&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),r+=a}return Ox(i)}var xw=4096;function Ox(t){var e=t.length;if(e<=xw)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=xw));return n}function Dx(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]&127);return i}function jx(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function Rx(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=e;s<n;++s)r+=Lx(t[s]);return r}function Bx(t,e,n){for(var i=t.slice(e,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+i[s+1]*256);return r}ue.prototype.slice=function(e,n){var i=this.length;e=~~e,n=n===void 0?i:~~n,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<e&&(n=e);var r;if(ue.TYPED_ARRAY_SUPPORT)r=this.subarray(e,n),r.__proto__=ue.prototype;else{var s=n-e;r=new ue(s,void 0);for(var o=0;o<s;++o)r[o]=this[o+e]}return r};function Tn(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}ue.prototype.readUIntLE=function(e,n,i){e=e|0,n=n|0,i||Tn(e,n,this.length);for(var r=this[e],s=1,o=0;++o<n&&(s*=256);)r+=this[e+o]*s;return r};ue.prototype.readUIntBE=function(e,n,i){e=e|0,n=n|0,i||Tn(e,n,this.length);for(var r=this[e+--n],s=1;n>0&&(s*=256);)r+=this[e+--n]*s;return r};ue.prototype.readUInt8=function(e,n){return n||Tn(e,1,this.length),this[e]};ue.prototype.readUInt16LE=function(e,n){return n||Tn(e,2,this.length),this[e]|this[e+1]<<8};ue.prototype.readUInt16BE=function(e,n){return n||Tn(e,2,this.length),this[e]<<8|this[e+1]};ue.prototype.readUInt32LE=function(e,n){return n||Tn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ue.prototype.readUInt32BE=function(e,n){return n||Tn(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ue.prototype.readIntLE=function(e,n,i){e=e|0,n=n|0,i||Tn(e,n,this.length);for(var r=this[e],s=1,o=0;++o<n&&(s*=256);)r+=this[e+o]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*n)),r};ue.prototype.readIntBE=function(e,n,i){e=e|0,n=n|0,i||Tn(e,n,this.length);for(var r=n,s=1,o=this[e+--r];r>0&&(s*=256);)o+=this[e+--r]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*n)),o};ue.prototype.readInt8=function(e,n){return n||Tn(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ue.prototype.readInt16LE=function(e,n){n||Tn(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};ue.prototype.readInt16BE=function(e,n){n||Tn(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};ue.prototype.readInt32LE=function(e,n){return n||Tn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ue.prototype.readInt32BE=function(e,n){return n||Tn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ue.prototype.readFloatLE=function(e,n){return n||Tn(e,4,this.length),Ah(this,e,!0,23,4)};ue.prototype.readFloatBE=function(e,n){return n||Tn(e,4,this.length),Ah(this,e,!1,23,4)};ue.prototype.readDoubleLE=function(e,n){return n||Tn(e,8,this.length),Ah(this,e,!0,52,8)};ue.prototype.readDoubleBE=function(e,n){return n||Tn(e,8,this.length),Ah(this,e,!1,52,8)};function mi(t,e,n,i,r,s){if(!Zr(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}ue.prototype.writeUIntLE=function(e,n,i,r){if(e=+e,n=n|0,i=i|0,!r){var s=Math.pow(2,8*i)-1;mi(this,e,n,i,s,0)}var o=1,a=0;for(this[n]=e&255;++a<i&&(o*=256);)this[n+a]=e/o&255;return n+i};ue.prototype.writeUIntBE=function(e,n,i,r){if(e=+e,n=n|0,i=i|0,!r){var s=Math.pow(2,8*i)-1;mi(this,e,n,i,s,0)}var o=i-1,a=1;for(this[n+o]=e&255;--o>=0&&(a*=256);)this[n+o]=e/a&255;return n+i};ue.prototype.writeUInt8=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,1,255,0),ue.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e&255,n+1};function Ch(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-n,2);r<s;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>(i?r:1-r)*8}ue.prototype.writeUInt16LE=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,2,65535,0),ue.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):Ch(this,e,n,!0),n+2};ue.prototype.writeUInt16BE=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,2,65535,0),ue.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):Ch(this,e,n,!1),n+2};function Ih(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-n,4);r<s;++r)t[n+r]=e>>>(i?r:3-r)*8&255}ue.prototype.writeUInt32LE=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,4,4294967295,0),ue.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e&255):Ih(this,e,n,!0),n+4};ue.prototype.writeUInt32BE=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,4,4294967295,0),ue.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):Ih(this,e,n,!1),n+4};ue.prototype.writeIntLE=function(e,n,i,r){if(e=+e,n=n|0,!r){var s=Math.pow(2,8*i-1);mi(this,e,n,i,s-1,-s)}var o=0,a=1,c=0;for(this[n]=e&255;++o<i&&(a*=256);)e<0&&c===0&&this[n+o-1]!==0&&(c=1),this[n+o]=(e/a>>0)-c&255;return n+i};ue.prototype.writeIntBE=function(e,n,i,r){if(e=+e,n=n|0,!r){var s=Math.pow(2,8*i-1);mi(this,e,n,i,s-1,-s)}var o=i-1,a=1,c=0;for(this[n+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[n+o+1]!==0&&(c=1),this[n+o]=(e/a>>0)-c&255;return n+i};ue.prototype.writeInt8=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,1,127,-128),ue.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=e&255,n+1};ue.prototype.writeInt16LE=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,2,32767,-32768),ue.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):Ch(this,e,n,!0),n+2};ue.prototype.writeInt16BE=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,2,32767,-32768),ue.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):Ch(this,e,n,!1),n+2};ue.prototype.writeInt32LE=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,4,2147483647,-2147483648),ue.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):Ih(this,e,n,!0),n+4};ue.prototype.writeInt32BE=function(e,n,i){return e=+e,n=n|0,i||mi(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ue.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):Ih(this,e,n,!1),n+4};function Ib(t,e,n,i,r,s){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Eb(t,e,n,i,r){return r||Ib(t,e,n,4),yb(t,e,n,i,23,4),n+4}ue.prototype.writeFloatLE=function(e,n,i){return Eb(this,e,n,!0,i)};ue.prototype.writeFloatBE=function(e,n,i){return Eb(this,e,n,!1,i)};function xb(t,e,n,i,r){return r||Ib(t,e,n,8),yb(t,e,n,i,52,8),n+8}ue.prototype.writeDoubleLE=function(e,n,i){return xb(this,e,n,!0,i)};ue.prototype.writeDoubleBE=function(e,n,i){return xb(this,e,n,!1,i)};ue.prototype.copy=function(e,n,i,r){if(i||(i=0),!r&&r!==0&&(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&r<i&&(r=i),r===i||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-i&&(r=e.length-n+i);var s=r-i,o;if(this===e&&i<n&&n<r)for(o=s-1;o>=0;--o)e[o+n]=this[o+i];else if(s<1e3||!ue.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+n]=this[o+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+s),n);return s};ue.prototype.fill=function(e,n,i,r){if(typeof e=="string"){if(typeof n=="string"?(r=n,n=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!ue.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof e=="number"&&(e=e&255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n=n>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var o;if(typeof e=="number")for(o=n;o<i;++o)this[o]=e;else{var a=Zr(e)?e:Ld(new ue(e,r).toString()),c=a.length;for(o=0;o<i-n;++o)this[o+n]=a[o%c]}return this};var Px=/[^+\/0-9A-Za-z-_]/g;function Fx(t){if(t=Ux(t).replace(Px,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Ux(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Lx(t){return t<16?"0"+t.toString(16):t.toString(16)}function Ld(t,e){e=e||1/0;for(var n,i=t.length,r=null,s=[],o=0;o<i;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return s}function $x(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n)&255);return e}function zx(t,e){for(var n,i,r,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}function Mb(t){return gx(Fx(t))}function Eh(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function qx(t){return t!==t}function Nb(t){return t!=null&&(!!t._isBuffer||Ob(t)||Vx(t))}function Ob(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Vx(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&Ob(t.slice(0,0))}var du=Object.freeze({__proto__:null,Buffer:ue,INSPECT_MAX_BYTES:bb,SlowBuffer:Tx,isBuffer:Nb,kMaxLength:_x});function Wx(t,e){return e={exports:{}},t(e,e.exports),e.exports}function Fg(t){return t&&t.default||t}var Db=Wx(function(t,e){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n=du.Buffer;function i(s,o){for(var a in s)o[a]=s[a]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=du:(i(du,e),e.Buffer=r);function r(s,o,a){return n(s,o,a)}r.prototype=Object.create(n.prototype),i(n,r),r.from=function(s,o,a){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,o,a)},r.alloc=function(s,o,a){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=n(s);return o!==void 0?typeof a=="string"?c.fill(o,a):c.fill(o):c.fill(0),c},r.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},r.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return du.SlowBuffer(s)}});Db.Buffer;var hu=Db.Buffer;function Kx(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),s=r.charCodeAt(0);if(e[s]!==255)throw new TypeError(r+" is ambiguous");e[s]=i}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=hu.from(f)),!hu.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var g=0,p=0,w=0,_=f.length;w!==_&&f[w]===0;)w++,g++;for(var k=(_-w)*l+1>>>0,T=new Uint8Array(k);w!==_;){for(var R=f[w],E=0,D=k-1;(R!==0||E<p)&&D!==-1;D--,E++)R+=256*T[D]>>>0,T[D]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");p=E,w++}for(var B=k-p;B!==k&&T[B]===0;)B++;for(var $=a.repeat(g);B<k;++B)$+=t.charAt(T[B]);return $}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return hu.alloc(0);for(var g=0,p=0,w=0;f[g]===a;)p++,g++;for(var _=(f.length-g)*c+1>>>0,k=new Uint8Array(_);f[g];){var T=e[f.charCodeAt(g)];if(T===255)return;for(var R=0,E=_-1;(T!==0||R<w)&&E!==-1;E--,R++)T+=o*k[E]>>>0,k[E]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");w=R,g++}for(var D=_-w;D!==_&&k[D]===0;)D++;var B=hu.allocUnsafe(p+(_-D));B.fill(0,0,p);for(var $=p;D!==_;)B[$++]=k[D++];return B}function h(f){var g=d(f);if(g)return g;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var Zx=Kx,Hx="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Mw=Zx(Hx);class Qx extends Ng{constructor({net:e="mainnet-beta",server:n,appId:i,rpc:r}){super(),this.accounts=[],$a(e,"'net' is required"),$a(rx.includes(e),"unsupported net"),this.net=e,this.rpc=r||(e==="mainnet-beta"?"https://free.rpcpool.com":`https://api.${e}.solana.com`),this.server=n||ix[this.net]||{}.SERVER||"",this.appId=i||{}.APP_ID}tryRetrieveSessionFromStorage(){const e=Dg(this.sessionKey,{}),n=e&&e.code,i=e&&e.address&&e.address.solana;this.connected=!!(n&&i),this.code=n||null,this.accounts=i?[i]:[]}async request(e){this.connected||await this.connect();try{let n=null,i=null;switch(e.method){case"connect":i=await this.fetchAccounts();break;case"disconnect":this.disconnect();break;case"getAccounts":i=this.accounts.length?this.accounts:await this.fetchAccounts();break;case"getAccountInfo":{const r=await this.handleReadRequests(e),[s,o]=r.result.value.data;i={...r.result.value,data:ue.from(s,o),owner:new pt(r.result.value.owner)};break}case"convertToProgramWalletTransaction":i=await this.handleConvertTransaction(e);break;case"signAndSendTransaction":i=await this.handleSignAndSendTransaction(e);break;case"signTransaction":case"signAllTransactions":throw new Error(`Blocto is program wallet, which doesn't support ${e.method}. Use signAndSendTransaction instead.`);default:n=await this.handleReadRequests(e)}if(n&&!n.result&&n.error){const r=n.error.message?n.error.message:"Request failed";throw new Error(r)}return n?n.result:i}catch(n){throw console.error(n),n}}async connect(){const e=window.solana;return e&&e.isBlocto?new Promise(n=>{e.once("connect",i=>{this.accounts=[i.toBase58()],n()}),e.connect()}):(this.tryRetrieveSessionFromStorage(),new Promise((n,i)=>{if(typeof window>"u"&&i("Currently only supported in browser"),this.connected)return n();const r=encodeURIComponent(window.location.origin),s=Ys(`${this.server}/authn?l6n=${r}&chain=solana`);Xs(s),Lr("message",(o,a)=>{const c=o;if(c.origin===this.server){if(c.data.type==="FCL::CHALLENGE::RESPONSE"){a(),Ln(s),this.code=c.data.code,this.connected=!0,this.eventListeners.connect.forEach(u=>u(this.net));const l=c.data.address;this.accounts=l?[l.solana]:[],jg(this.sessionKey,{code:this.code,address:l},Mg),n()}c.data.type==="FCL::CHALLENGE::CANCEL"&&(a(),Ln(s),i(new Error("User declined the login request")))}})}))}async disconnect(){const e=window.solana;if(e&&e.isBlocto){await e.disconnect();return}this.code=null,this.accounts=[],this.eventListeners.disconnect.forEach(n=>n())}async fetchAccounts(){const{accounts:e}=await fetch(`${this.server}/api/solana/accounts?code=${this.code}`).then(n=>n.json());return this.accounts=e,e}async handleReadRequests(e){return fetch(this.rpc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:1,jsonrpc:"2.0",...e})}).then(n=>n.json())}async convertToProgramWalletTransaction(e){const n=window.solana;if(n&&n.isBlocto)return n.convertToProgramWalletTransaction(e);const i=await this.request({method:"convertToProgramWalletTransaction",params:{message:e.serializeMessage().toString("hex")}});return this.toTransaction(i,[])}async signAndSendTransaction(e,n){const i=window.solana;if(i&&i.isBlocto)return i.signAndSendTransaction(e);const r={};if(n){n.commitment&&(r.commitment=n.commitment);const s=n?n._rpcEndpoint:null;s&&s!==this.rpc&&(this.rpc=s,this.disconnect(),await this.connect())}return this.request({method:"signAndSendTransaction",params:{signatures:await this.collectSignatures(e),message:e.serializeMessage().toString("hex"),...r}})}toTransaction(e,n){const i=oc.from(ue.from(e,"hex")),r=new JE;return r.recentBlockhash=i.recentBlockhash,i.header.numRequiredSignatures>0&&(r.feePayer=i.accountKeys[0]),n.forEach((s,o)=>{const a={signature:s===pt.default.toBase58()?null:Mw.decode(s),publicKey:i.accountKeys[o]};r.signatures.push(a)}),i.instructions.forEach(s=>{const o=s.accounts.map(a=>({pubkey:i.accountKeys[a],isSigner:a<i.header.numRequiredSignatures,isWritable:i.isAccountWritable(a)}));r.instructions.push(new Qf({keys:o,programId:i.accountKeys[s.programIdIndex],data:Mw.decode(s.data)}))}),r}async collectSignatures(e){return e.signatures.reduce((n,i)=>(i.signature&&(n[i.publicKey.toBase58()]=i.signature.toString("hex")),n),{})}async handleConvertTransaction(e){return fetch(`${this.server}/api/solana/convertToWalletTx?code=${this.code}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:this.code,...e.params})}).then(n=>cc(n,this))}async handleSignAndSendTransaction(e){const{authorizationId:n}=await fetch(`${this.server}/api/solana/authz?code=${this.code}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:this.code,...e.params})}).then(r=>cc(r,this));if(typeof window>"u")throw new Error("Currently only supported in browser");const i=Ys(`${this.server}/authz/solana/${n}`);return Xs(i),new Promise((r,s)=>Lr("message",(o,a)=>{const c=o;c.origin===this.server&&c.data.type==="SOL:FRAME:RESPONSE"&&(c.data.status==="APPROVED"&&(a(),Ln(i),r(c.data.txHash)),c.data.status==="DECLINED"&&(a(),Ln(i),s(new Error("User declined to send the transaction"))))}))}}class Gx extends Ng{constructor({chainId:e,server:n,appId:i}){super(),this.publicKey=[],this.authKey="",$a(e,"'chainId' is required"),this.chainId=e,this.networkName=ox[e],this.api=ax[e];const r=sx[e];this.appId=i||{}.APP_ID,this.server=n||r||{}.SERVER||""}tryRetrieveSessionFromStorage(){const e=Dg(this.sessionKey,{}),n=e&&e.code,i=e&&e.address&&e.address[this.chainId];this.code=n||null,this.address=i||void 0}get publicAccount(){return{address:this.address||null,publicKey:this.publicKey.length?this.publicKey:null,authKey:null,minKeysRequired:2}}async network(){return{name:this.networkName,api:this.api,chainId:this.chainId.toString()}}async isConnected(){return!!this.address}async signTransaction(e){const n=window.bloctoAptos;if(n)return n.signTransaction(e);throw await this.isConnected()||await this.connect(),this.address?new Error("signTransaction method not supported."):new Error("Fail to get account")}async disconnect(){const e=window.bloctoAptos;if(e){await e.disconnect();return}this.code=null,this.address=void 0}async signAndSubmitTransaction(e){const n=window.bloctoAptos;if(n)return n.signAndSubmitTransaction(e);if(await this.isConnected()||await this.connect(),!this.address)throw new Error("Fail to get account");const{authorizationId:r}=await fetch(`${this.server}/api/aptos/authz?code=${this.code}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o=>cc(o,this));if(typeof window>"u")throw new Error("Currently only supported in browser");const s=Ys(`${this.server}/authz/aptos/${r}`);return Xs(s),new Promise((o,a)=>Lr("message",(c,l)=>{const u=c;u.origin===this.server&&u.data.type==="APTOS:FRAME:RESPONSE"&&(u.data.status==="APPROVED"&&(l(),Ln(s),o({hash:u.data.txHash})),u.data.status==="DECLINED"&&(l(),Ln(s),a(new Error("User declined to send the transaction"))))}))}async signMessage(e){const n=window.bloctoAptos;if(n)return n.signMessage(e);if(await this.isConnected()||await this.connect(),!this.address)throw new Error("Fail to get account");const r=`${this.server}/user-signature/aptos`,s=Ys(r);return Xs(s),Lr("message",(o,a)=>{const c=o;c.origin===this.server&&c.data.type==="APTOS:FRAME:READY"&&(s.contentWindow&&s.contentWindow.postMessage({type:"APTOS:FRAME:READY:RESPONSE",...e},r),a())}),new Promise((o,a)=>Lr("message",(c,l)=>{const u=c;u.origin===this.server&&u.data.type==="APTOS:FRAME:RESPONSE"&&(u.data.status==="APPROVED"&&(l(),Ln(s),o({address:u.data.address,application:u.data.application,chainId:u.data.chainId,fullMessage:u.data.fullMessage,message:e.message,nonce:e.nonce,prefix:"APTOS",signature:u.data.signature,bitmap:u.data.bitmap})),u.data.status==="DECLINED"&&(l(),Ln(s),a(new Error("User declined the signing request"))))}))}async connect(){const e=window.bloctoAptos;return e?new Promise((n,i)=>setTimeout(()=>e.connect().then(n).catch(i),10)):(this.tryRetrieveSessionFromStorage(),new Promise((n,i)=>{typeof window>"u"&&i("Currently only supported in browser"),this.connected&&this.address&&n({address:this.address,publicKey:this.publicKey,authKey:null,minKeysRequired:2});const r=encodeURIComponent(window.location.origin),s=Ys(`${this.server}/authn?l6n=${r}&chain=aptos`);Xs(s),Lr("message",async(o,a)=>{const c=o;if(c.origin===this.server){if(c.data.type==="APTOS:FRAME:RESPONSE"){a(),Ln(s),this.code=c.data.code,this.connected=!0;const l=c.data.address;if(this.address=l?l.aptos:void 0,this.address)try{const{public_keys:u}=await fetch(`${this.server}/blocto/aptos/accounts/${this.address}`).then(d=>d.json());this.publicKey=u||[],n({address:this.address||"",publicKey:this.publicKey,authKey:null,minKeysRequired:2})}catch{i(c)}else return i();jg(this.sessionKey,{code:this.code,address:l},Mg)}c.data.type==="APTOS:FRAME:CLOSE"&&(a(),Ln(s),i(new Error("User declined the login request")))}})}))}async fetchAddress(){const{accounts:e}=await fetch(`${this.server}/api/aptos/accounts?code=${this.code}`).then(n=>cc(n,this));return this.address=e[0]||void 0,this.address}}var Yx={},Xx=Object.freeze({__proto__:null,default:Yx});function jb(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];r==="."?t.splice(i,1):r===".."?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var Jx=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Ug=function(t){return Jx.exec(t).slice(1)};function $d(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var i=n>=0?arguments[n]:"/";if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)continue;t=i+"/"+t,e=i.charAt(0)==="/"}return t=jb(zg(t.split("/"),function(r){return!!r}),!e).join("/"),(e?"/":"")+t||"."}function Lg(t){var e=$g(t),n=tM(t,-1)==="/";return t=jb(zg(t.split("/"),function(i){return!!i}),!e).join("/"),!t&&!e&&(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function $g(t){return t.charAt(0)==="/"}function Rb(){var t=Array.prototype.slice.call(arguments,0);return Lg(zg(t,function(e,n){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Bb(t,e){t=$d(t).substr(1),e=$d(e).substr(1);function n(l){for(var u=0;u<l.length&&l[u]==="";u++);for(var d=l.length-1;d>=0&&l[d]==="";d--);return u>d?[]:l.slice(u,d-u+1)}for(var i=n(t.split("/")),r=n(e.split("/")),s=Math.min(i.length,r.length),o=s,a=0;a<s;a++)if(i[a]!==r[a]){o=a;break}for(var c=[],a=o;a<i.length;a++)c.push("..");return c=c.concat(r.slice(o)),c.join("/")}var Pb="/",Fb=":";function Ub(t){var e=Ug(t),n=e[0],i=e[1];return!n&&!i?".":(i&&(i=i.substr(0,i.length-1)),n+i)}function Lb(t,e){var n=Ug(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function $b(t){return Ug(t)[3]}var eM={extname:$b,basename:Lb,dirname:Ub,sep:Pb,delimiter:Fb,relative:Bb,join:Rb,isAbsolute:$g,normalize:Lg,resolve:$d};function zg(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var tM="ab".substr(-1)==="b"?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},nM=Object.freeze({__proto__:null,resolve:$d,normalize:Lg,isAbsolute:$g,join:Rb,relative:Bb,sep:Pb,delimiter:Fb,dirname:Ub,basename:Lb,extname:$b,default:eM}),fu;function zb(){if(typeof fu>"u"){var t=new ArrayBuffer(2),e=new Uint8Array(t),n=new Uint16Array(t);if(e[0]=1,e[1]=2,n[0]===258)fu="BE";else if(n[0]===513)fu="LE";else throw new Error("unable to figure out endianess")}return fu}function qb(){return typeof ws.location<"u"?ws.location.hostname:""}function Vb(){return[]}function Wb(){return 0}function Kb(){return Number.MAX_VALUE}function Zb(){return Number.MAX_VALUE}function Hb(){return[]}function Qb(){return"Browser"}function Gb(){return typeof ws.navigator<"u"?ws.navigator.appVersion:""}function Yb(){}function Xb(){}function iM(){return"javascript"}function rM(){return"browser"}function qg(){return"/tmp"}var Jb=qg,e1=`
`,sM={EOL:e1,tmpdir:Jb,tmpDir:qg,networkInterfaces:Yb,getNetworkInterfaces:Xb,release:Gb,type:Qb,cpus:Hb,totalmem:Zb,freemem:Kb,uptime:Wb,loadavg:Vb,hostname:qb,endianness:zb},oM=Object.freeze({__proto__:null,endianness:zb,hostname:qb,loadavg:Vb,uptime:Wb,freemem:Kb,totalmem:Zb,cpus:Hb,type:Qb,release:Gb,networkInterfaces:Yb,getNetworkInterfaces:Xb,arch:iM,platform:rM,tmpDir:qg,tmpdir:Jb,EOL:e1,default:sM}),aM=Fg(Xx),t1=Fg(nM),cM=Fg(oM);function n1(t){console.log(`[dotenv][DEBUG] ${t}`)}const lM=`
`,uM=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,dM=/\\n/g,hM=/\r\n|\n|\r/;function i1(t,e){const n=!!(e&&e.debug),i={};return t.toString().split(hM).forEach(function(r,s){const o=r.match(uM);if(o!=null){const a=o[1];let c=o[2]||"";const l=c.length-1,u=c[0]==='"'&&c[l]==='"';c[0]==="'"&&c[l]==="'"||u?(c=c.substring(1,l),u&&(c=c.replace(dM,lM))):c=c.trim(),i[a]=c}else n&&n1(`did not match key and value when parsing line ${s+1}: ${r}`)}),i}function fM(t){return t[0]==="~"?t1.join(cM.homedir(),t.slice(1)):t}function pM(t){let e=t1.resolve(Lu.cwd(),".env"),n="utf8",i=!1;t&&(t.path!=null&&(e=fM(t.path)),t.encoding!=null&&(n=t.encoding),t.debug!=null&&(i=!0));try{const r=i1(aM.readFileSync(e,{encoding:n}),{debug:i});return Object.keys(r).forEach(function(s){Object.prototype.hasOwnProperty.call(Lu.env,s)?i&&n1(`"${s}" is already defined in \`{}\` and will not be overwritten`):Lu.env[s]=r[s]}),{parsed:r}}catch(r){return{error:r}}}var gM=pM,mM=i1,wM={config:gM,parse:mM};wM.config();class yM{constructor({appId:e,ethereum:n,solana:i,aptos:r}){n&&(this.ethereum=new fx({...n,appId:e})),i&&(this.solana=new Qx({...i,appId:e})),r&&(this.aptos=new Gx({...r,appId:e}))}}const _M="Blocto",bM={[vd.Mainnet]:1,[vd.Testnet]:2};class vM extends Xn{constructor({network:n,timeout:i=1e4,bloctoAppId:r=""}={network:vd.Mainnet}){super();v(this,"name",_M);v(this,"url","https://portto.com/download");v(this,"icon","https://raw.githubusercontent.com/hippospace/aptos-wallet-adapter/main/logos/blocto.svg");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");const s=new yM({aptos:{chainId:bM[n]},appId:r});this._provider=s.aptos,this._network=n,this._timeout=i,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>window?(this._readyState=me.Installed,!0):!1)}get publicAccount(){var n,i,r,s;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null,minKeysRequired:(s=this._wallet)==null?void 0:s.minKeysRequired}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const n=this._provider;await(n==null?void 0:n.isConnected())&&await(n==null?void 0:n.disconnect());const{publicKey:r,...s}=await(n==null?void 0:n.connect());this._wallet={...s,publicKey:r,isConnected:!0};const{api:o,chainId:a}=await n.network();this._api=o,this._chainId=a,this.emit("connect",this._wallet)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}}async disconnect(){const n=this._wallet,i=this._provider;if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(r){this.emit("error",new Yn(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(n){try{try{const i=this._provider;if(await(i==null?void 0:i.signTransaction(n)))return new Uint8Array([]);throw new Error("Transaction failed")}catch(i){throw new kn(i==null?void 0:i.message,i)}}catch(i){throw this.emit("error",i),i}}async signAndSubmitTransaction(n){try{try{const i=this._provider,r=await(i==null?void 0:i.signAndSubmitTransaction(n));if(r)return{hash:r.hash};throw new Error("Transaction failed")}catch(i){throw new Oi(i.message||i)}}catch(i){throw this.emit("error",i),i}}async signMessage(n){try{const i=this._provider,r=await(i==null?void 0:i.signMessage(n));if(r)return r;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider;if(!n||!i)throw new Ae}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider;if(!n||!i)throw new Ae}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}const kM="OKX";class SM extends Xn{constructor({timeout:n=1e4}={}){var i;super();v(this,"name",kM);v(this,"url","https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge");v(this,"icon","https://lh3.googleusercontent.com/sO4GPPbgvTCXEFWp-uALYYju9vxVOr5YSr2jqRAclNFSq8FrAIVTQOYmpJV4kMuDM1ZazcgUdjNGLIGKpmMRvR3NzQ=w128-h128-e365-rj-sc0x00ffffff");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(i=window.okxwallet)==null?void 0:i.aptos:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>{var r;return(r=window.okxwallet)!=null&&r.aptos?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||((n=window.okxwallet)==null?void 0:n.aptos);let r=await(i==null?void 0:i.connect());typeof r=="boolean"&&(r=await(i==null?void 0:i.account())),this._wallet={address:r==null?void 0:r.address,publicKey:r==null?void 0:r.publicKey,isConnected:!0};try{const s=await(i==null?void 0:i.network()),o=null,a=null;this._network=s,this._chainId=o,this._api=a}catch(s){const o=s.message;throw this.emit("error",new Sr(o)),s}this.emit("connect",this._wallet.publicKey)}catch(i){throw this.emit("error",i),i}finally{this._connecting=!1}}async disconnect(){var r;const n=this._wallet,i=this._provider||((r=window.okxwallet)==null?void 0:r.aptos);if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(s){this.emit("error",new Yn(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(n,i){var r;try{const s=this._wallet,o=this._provider||((r=window.okxwallet)==null?void 0:r.aptos);if(!s||!o)throw new Ae;const a=await o.signTransaction(n,i);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new kn(o)),s}}async signAndSubmitTransaction(n,i){var r;try{const s=this._wallet,o=this._provider||((r=window.okxwallet)==null?void 0:r.aptos);if(!s||!o)throw new Ae;const a=await o.signAndSubmitTransaction(n,i);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new Oi(o)),s}}async signMessage(n){var i;try{const r=this._wallet,s=this._provider||((i=window.okxwallet)==null?void 0:i.aptos);if(!r||!s)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(n));if(o)return o;throw new Error("Sign Message failed")}catch(r){const s=r.message;throw this.emit("error",new Kt(s)),r}}async onAccountChange(){var n;try{const i=this._wallet,r=this._provider||((n=window.okxwallet)==null?void 0:n.aptos);if(!i||!r)throw new Ae;const s=async o=>{var a,c,l,u;if(o!=null&&o.publicKey)this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),address:o.address||((c=this._wallet)==null?void 0:c.address)};else{const d=await(r==null?void 0:r.connect());this._wallet={...this._wallet,address:(d==null?void 0:d.address)||((l=this._wallet)==null?void 0:l.address),publicKey:(d==null?void 0:d.publicKey)||((u=this._wallet)==null?void 0:u.publicKey)}}this.emit("accountChange",o.publicKey)};r.on("accountChange",s)}catch(i){const r=i.message;throw this.emit("error",new fi(r)),i}}async onNetworkChange(){var n;try{const i=this._wallet,r=this._provider||((n=window.okxwallet)==null?void 0:n.aptos);if(!i||!r)throw new Ae}catch(i){const r=i.message;throw this.emit("error",new pi(r)),i}}}const TM="TokenPocket";class AM extends Xn{constructor({timeout:n=1e4}={}){super();v(this,"name",TM);v(this,"url","https://tokenpocket.pro");v(this,"icon","https://tp-statics.tokenpocket.pro/logo/tokenpocket.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.aptos:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>{var i;return window.aptos&&((i=window.aptos)!=null&&i.isTokenPocket)?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const n=this._provider||window.aptos;await(n==null?void 0:n.isConnected())&&await(n==null?void 0:n.disconnect());const r=await(n==null?void 0:n.connect());if(!r)throw new Ae("No connect response");this._wallet={address:r==null?void 0:r.address,publicKey:r==null?void 0:r.publicKey,isConnected:!0};try{const s=await(n==null?void 0:n.network()),o=await(n==null?void 0:n.getChainId()),a=await(n==null?void 0:n.getNodeUrl());this._network=s,this._chainId=o,this._api=a}catch(s){const o=s.message;throw this.emit("error",new Sr(o)),s}this.emit("connect",this._wallet.address)}catch(n){throw this.emit("error",new Error(n)),n}finally{this._connecting=!1}}async disconnect(){const n=this._wallet,i=this._provider||window.aptos;if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(r){this.emit("error",new Yn(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(n,i){try{const r=this._wallet,s=this._provider||window.aptos;if(!r||!s)throw new Ae;const o=await s.signTransaction(n,i);if(!o)throw new Error("No response");return o}catch(r){throw this.emit("error",new kn(r)),r}}async signAndSubmitTransaction(n,i){try{const r=this._wallet,s=this._provider||window.aptos;if(!r||!s)throw new Ae;const o=await s.signAndSubmitTransaction(n,i);if(!o)throw new Error("No response");return o}catch(r){throw this.emit("error",new Oi(r)),r}}async signMessage(n){try{const i=this._wallet,r=this._provider||window.aptos;if(!i||!r)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const s=await(r==null?void 0:r.signMessage(n));if(s)return s;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onNetworkChange(){}async onAccountChange(){}}const CM="BitKeep";class IM extends Xn{constructor({timeout:n=1e4}={}){var i;super();v(this,"name",CM);v(this,"url","https://chrome.google.com/webstore/detail/bitkeep-bitcoin-crypto-wa/jiidiaalihmmhddjgbnbgdfflelocpak");v(this,"icon","https://raw.githubusercontent.com/bitkeepwallet/download/main/logo-png/BitKeep_logo_circle.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(i=window.bitkeep)==null?void 0:i.aptos:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>{var r;return(r=window.bitkeep)!=null&&r.aptos?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||((n=window.bitkeep)==null?void 0:n.aptos),r=await(i==null?void 0:i.connect());this._wallet={address:r==null?void 0:r.address,publicKey:r==null?void 0:r.publicKey,isConnected:!0};try{const s=await(i==null?void 0:i.network()),o=null,a=null;this._network=s,this._chainId=o,this._api=a}catch(s){const o=s.message;throw this.emit("error",new Sr(o)),s}this.emit("connect",this._wallet.publicKey)}catch(i){throw this.emit("error",i),i}finally{this._connecting=!1}}async disconnect(){var r;const n=this._wallet,i=this._provider||((r=window.bitkeep)==null?void 0:r.aptos);if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(s){this.emit("error",new Yn(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(n,i){var r;try{const s=this._wallet,o=this._provider||((r=window.bitkeep)==null?void 0:r.aptos);if(!s||!o)throw new Ae;const a=await o.signTransaction(n,i);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new kn(o)),s}}async signAndSubmitTransaction(n,i){var r;try{const s=this._wallet,o=this._provider||((r=window.bitkeep)==null?void 0:r.aptos);if(!s||!o)throw new Ae;const a=await o.signAndSubmitTransaction(n,i);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new Oi(o)),s}}async signMessage(n){var i;try{const r=this._wallet,s=this._provider||((i=window.bitkeep)==null?void 0:i.aptos);if(!r||!s)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(n));if(o)return o;throw new Error("Sign Message failed")}catch(r){const s=r.message;throw this.emit("error",new Kt(s)),r}}async onAccountChange(){var n;try{const i=this._wallet,r=this._provider||((n=window.bitkeep)==null?void 0:n.aptos);if(!i||!r)throw new Ae;const s=async o=>{var a,c,l;this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),authKey:o.authKey||((c=this._wallet)==null?void 0:c.authKey),address:o.address||((l=this._wallet)==null?void 0:l.address)},this.emit("accountChange",o.publicKey)};await(r==null?void 0:r.onAccountChange(s))}catch(i){const r=i.message;throw this.emit("error",new fi(r)),i}}async onNetworkChange(){var n;try{const i=this._wallet,r=this._provider||((n=window.bitkeep)==null?void 0:n.aptos);if(!i||!r)throw new Ae;const s=async o=>{console.log("network Changed >>>",o),this._network=o.networkName,this.emit("networkChange",this._network)};await(r==null?void 0:r.onNetworkChange(s))}catch(i){const r=i.message;throw this.emit("error",new pi(r)),i}}}const EM="Rise Wallet";class xM extends Xn{constructor({timeout:n=1e4}={}){super();v(this,"name",EM);v(this,"url","https://chrome.google.com/webstore/detail/rise-aptos-wallet/hbbgbephgojikajhfbomhlmmollphcad");v(this,"icon","https://static.risewallet.io/logo.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.rise:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>window.rise?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||window.rise;if(await((n=this._provider)==null?void 0:n.isConnected())===!0&&await(i==null?void 0:i.disconnect()),!await(i==null?void 0:i.connect()))throw new Ae("User has rejected the request");if(i!=null&&i.network)try{const{chainId:a,api:c,name:l}=await i.network();this._network=l,this._chainId=a,this._api=c}catch(a){const c=a.message;throw this.emit("error",new Sr(c)),a}const o=await(i==null?void 0:i.account());if(o){const{publicKey:a,address:c,authKey:l}=o;this._wallet={publicKey:a,address:c,authKey:l,isConnected:!0},this.emit("connect",this._wallet.publicKey)}}catch(i){throw this.emit("error",i),i}finally{this._connecting=!1}}async disconnect(){if(this._wallet){this._wallet=null;try{const i=this._provider||window.rise;await(i==null?void 0:i.disconnect())}catch(i){this.emit("error",new Yn(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(n){try{const i=this._wallet,r=this._provider||window.rise;if(!i||!r)throw new Ae;const s=await(r==null?void 0:r.signTransaction(n));if(s)return s;throw new Error("Sign Transaction failed")}catch(i){const r=i.message;throw this.emit("error",new kn(r)),i}}async signAndSubmitTransaction(n){try{const i=this._wallet,r=this._provider||window.rise;if(!i||!r)throw new Ae;const s=await(r==null?void 0:r.signAndSubmitTransaction(n));if(s)return s;throw new Error("Transaction failed")}catch(i){const r=i.message;throw this.emit("error",new kn(r)),i}}async signMessage(n){try{const i=this._wallet,r=this._provider||window.rise;if(!i||!r)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const s=await(r==null?void 0:r.signMessage(n));if(s)return s;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider||window.rise;if(!n||!i)throw new Ae}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider||window.rise;if(!n||!i)throw new Ae}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}const MM="OpenBlock";class NM extends Xn{constructor({timeout:n=1e4}={}){var i;super();v(this,"name",MM);v(this,"url","https://openblock.com/");v(this,"icon","https://obstatic.243096.com/download/dapp/sdk/images/logo_blue.svg");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(i=window.openblock)==null?void 0:i.aptos:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&(p2(()=>import("./index.365a94ef.js").then(r=>r.i),["./index.365a94ef.js","./entry.a6654d09.js","./entry.0e63954c.css"],import.meta.url),gi(()=>{var r;return(r=window.openblock)!=null&&r.aptos?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n,i;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const r=this._provider||((n=window==null?void 0:window.openblock)==null?void 0:n.aptos);await((i=this._provider)==null?void 0:i.isConnected())===!0&&await(r==null?void 0:r.disconnect());const o=await(r==null?void 0:r.connect());if(o.address){this._wallet={address:o==null?void 0:o.address,publicKey:o==null?void 0:o.publicKey,isConnected:!0};const a=await(r==null?void 0:r.network());this._network=a.name,this._chainId=a.chainId,this._api=a.api}else throw new Error("failed to connect");this.emit("connect",this._wallet.publicKey)}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){var r;const n=this._wallet,i=this._provider||((r=window==null?void 0:window.openblock)==null?void 0:r.aptos);if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(s){this.emit("error",new Yn(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(n){var i;try{const r=this._wallet,s=this._provider||((i=window==null?void 0:window.openblock)==null?void 0:i.aptos);if(!r||!s)throw new Ae;const o=await s.signTransaction(n);if(o)return new TextEncoder().encode(o);throw new Error("failed to SignTransaction")}catch(r){const s=r.message;throw this.emit("error",new kn(s)),r}}async signAndSubmitTransaction(n){var i;try{const r=this._wallet,s=this._provider||((i=window==null?void 0:window.openblock)==null?void 0:i.aptos);if(!r||!s)throw new Ae;const o=await s.signAndSubmitTransaction(n);if(o)return o;throw new Error("Failed to SignAndSubmitTransaction")}catch(r){const s=r.message;throw this.emit("error",new Oi(s)),r}}async signMessage(n){var i;try{const r=this._wallet,s=this._provider||((i=window==null?void 0:window.openblock)==null?void 0:i.aptos);if(!r||!s)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(n));if(o)return o;throw new Error("Failed to signMessage")}catch(r){const s=r.message;throw this.emit("error",new Kt(s)),r}}async onAccountChange(){var n;try{const i=this._wallet,r=this._provider||((n=window==null?void 0:window.openblock)==null?void 0:n.aptos);if(!i||!r)throw new Ae;const s=async o=>{var a,c,l;this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),authKey:o.authKey||((c=this._wallet)==null?void 0:c.authKey),address:o.address||((l=this._wallet)==null?void 0:l.address)},this.emit("accountChange",o.publicKey)};r==null||r.onAccountChange(s)}catch(i){const r=i.message;throw this.emit("error",new fi(r)),i}}async onNetworkChange(){var n;try{const i=this._wallet,r=this._provider||((n=window==null?void 0:window.openblock)==null?void 0:n.aptos);if(!i||!r)throw new Ae;const s=async o=>{this._network=o.name,this._api=o.api,this._chainId=o.chainId,this.emit("networkChange",this._network)};r==null||r.onNetworkChange(s)}catch(i){const r=i.message;throw this.emit("error",new pi(r)),i}}}var Jf={},$r={},oi={},zd={},OM={get exports(){return zd},set exports(t){zd=t}};(function(t,e){var n=typeof Reflect<"u"?Reflect.construct:void 0,i=Object.defineProperty,r=Error.captureStackTrace;r===void 0&&(r=function(l){var u=new Error;i(l,"stack",{configurable:!0,get:function(){var h=u.stack;return i(this,"stack",{configurable:!0,value:h,writable:!0}),h},set:function(h){i(l,"stack",{configurable:!0,value:h,writable:!0})}})});function s(c){c!==void 0&&i(this,"message",{configurable:!0,value:c,writable:!0});var l=this.constructor.name;l!==void 0&&l!==this.name&&i(this,"name",{configurable:!0,value:l,writable:!0}),r(this,this.constructor)}s.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:s,writable:!0}});var o=function(){function c(u,d){return i(u,"name",{configurable:!0,value:d})}try{var l=function(){};if(c(l,"foo"),l.name==="foo")return c}catch{}}();function a(c,l){if(l==null||l===Error)l=s;else if(typeof l!="function")throw new TypeError("super_ should be a function");var u;if(typeof c=="string")u=c,c=n!==void 0?function(){return n(l,arguments,this.constructor)}:function(){l.apply(this,arguments)},o!==void 0&&(o(c,u),u=void 0);else if(typeof c!="function")throw new TypeError("constructor should be either a string or a function");c.super_=c.super=l;var d={constructor:{configurable:!0,value:c,writable:!0}};return u!==void 0&&(d.name={configurable:!0,value:u,writable:!0}),c.prototype=Object.create(l.prototype,d),c}e=t.exports=a,e.BaseError=s})(OM,zd);var Cl=At&&At.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(oi,"__esModule",{value:!0});oi.InvalidParameters=oi.MethodNotFound=oi.InvalidRequest=oi.InvalidJson=oi.JsonRpcError=void 0;var DM=zd,Il=function(t){Cl(e,t);function e(n,i,r){n===void 0&&(n="unknown error from the peer"),i===void 0&&(i=-32e3);var s=t.call(this,n)||this;return s.code=i,s.data=r,s}return e.prototype.toJsonRpcError=function(){return{code:this.code,data:this.data,message:this.message}},e}(DM.BaseError);oi.JsonRpcError=Il;var jM=function(t){Cl(e,t);function e(){return t.call(this,"invalid JSON",-32700)||this}return e}(Il);oi.InvalidJson=jM;var RM=function(t){Cl(e,t);function e(n){return n===void 0&&(n="invalid JSON-RPC request"),t.call(this,n,-32600)||this}return e}(Il);oi.InvalidRequest=RM;var BM=function(t){Cl(e,t);function e(n){var i=this,r=n?"method not found: "+n:"method not found";return i=t.call(this,r,-32601,n)||this,i}return e}(Il);oi.MethodNotFound=BM;var PM=function(t){Cl(e,t);function e(n){return t.call(this,"invalid parameter(s)",-32602,n)||this}return e}(Il);oi.InvalidParameters=PM;Object.defineProperty($r,"__esModule",{value:!0});$r.response=$r.request=$r.notification=$r.error=void 0;var FM=oi,xh=JSON.stringify;$r.error=function(t,e){(e==null||typeof e.toJsonRpcError!="function")&&(e=new FM.JsonRpcError);var n=e.toJsonRpcError();return xh({error:n,id:t,jsonrpc:"2.0"})};$r.notification=function(t,e){return xh({jsonrpc:"2.0",method:t,params:e})};$r.request=function(t,e,n){return xh({id:t,jsonrpc:"2.0",method:e,params:n})};$r.response=function(t,e){return xh({id:t,jsonrpc:"2.0",result:e})};var r1={};Object.defineProperty(r1,"__esModule",{value:!0});var s1={},o1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=t.isString=t.isInteger=t.isNumber=void 0;var e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;t.isNumber=function(i){var r=typeof i;return r==="number"&&i>e&&i<n},t.isInteger=function(i){return t.isNumber(i)&&i%1===0},t.isString=function(i){return typeof i=="string"},t.isObject=function(i){var r=typeof i;return i!==null&&(r==="object"||r==="function")}})(o1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.isResponsePayload=t.isErrorPayload=t.isRequestPayload=t.isNotificationPayload=void 0;var e=o1,n=oi,i=Object.defineProperty,r=function(f,g){return i(f,"type",{configurable:!0,value:g,writable:!0})},s=function(f){return f===null?"null":typeof f},o=function(f,g){if(g==="1.0"){if(f==null)throw new n.InvalidRequest("invalid error "+s(f))}else if(f==null||!e.isInteger(f.code)||!e.isString(f.message))throw new n.InvalidRequest("invalid error: "+s(f)+" instead of {code, message}")},a=function(f){if(!e.isNumber(f)&&!e.isString(f))throw new n.InvalidRequest("invalid identifier: "+s(f)+" instead of number or string")},c=function(f,g){if(g==="2.0"){if(f!==void 0&&!Array.isArray(f)&&!e.isObject(f))throw new n.InvalidRequest("invalid params: "+s(f)+" instead of undefined, array or object")}else if(!Array.isArray(f))throw new n.InvalidRequest("invalid params: "+s(f)+" instead of array")},l=function(f){var g=f.jsonrpc;if(g===void 0)return"1.0";if(g==="2.0")return"2.0";throw new n.InvalidRequest("invalid version: "+s(g)+" instead of undefined or '2.0'")},u=function(f,g){return f===(g==="2.0"?void 0:null)},d=function(f,g){var p=f.error;return p!==(g==="2.0"?void 0:null)};t.isNotificationPayload=function(f,g){if(e.isString(f.method)){var p=f.id;if(u(p,g))return c(f.params,g),!0}return!1},t.isRequestPayload=function(f,g){if(e.isString(f.method)){var p=f.id;if(!u(p,g))return a(p),c(f.params,g),!0}return!1},t.isErrorPayload=function(f,g){if(!e.isString(f.method)&&d(f,g)){var p=f.id;return p!==null&&a(p),o(f.error,g),!0}return!1},t.isResponsePayload=function(f,g){return!e.isString(f.method)&&!d(f,g)?(a(f.id),!0):!1};function h(f){if(e.isString(f))try{f=JSON.parse(f)}catch(p){throw p instanceof SyntaxError?new n.InvalidJson:p}if(Array.isArray(f))return f.map(h);var g=l(f);if(t.isNotificationPayload(f,g))r(f,"notification");else if(t.isRequestPayload(f,g))r(f,"request");else if(t.isErrorPayload(f,g))r(f,"error");else if(t.isResponsePayload(f,g))r(f,"response");else throw new n.InvalidJson;return f}t.parse=h,t.default=h,h.result=function(g){var p=h(g);if(!Array.isArray(p)){if(p.type==="error")throw p.error;if(p.type==="response")return p.result}throw new TypeError("message should be response or error JSON-RPC message")}})(s1);(function(t){var e=At&&At.__createBinding||(Object.create?function(a,c,l,u){u===void 0&&(u=l),Object.defineProperty(a,u,{enumerable:!0,get:function(){return c[l]}})}:function(a,c,l,u){u===void 0&&(u=l),a[u]=c[l]}),n=At&&At.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),i=At&&At.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var l in a)l!=="default"&&Object.hasOwnProperty.call(a,l)&&e(c,a,l);return n(c,a),c},r=At&&At.__exportStar||function(a,c){for(var l in a)l!=="default"&&!c.hasOwnProperty(l)&&e(c,a,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.format=void 0;var s=i($r);t.format=s,r(r1,t),r(oi,t);var o=s1;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.parse}})})(Jf);function ep(t){const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);let i=0;return t.forEach(r=>{n.set(r,i),i+=r.length}),n}var UM=class{constructor(t,e=t.byteOffset){this.data=t,this.byteOffset=e}read(t){const e=new Uint8Array(this.data.buffer,this.byteOffset,t);return this.byteOffset+=t,e}decodeBigInt(){return BigInt(this.decodeString())}decodeNumber(){return Number(this.decodeString())}decodeUint8Array(){const t=new Uint32Array(this.read(4).slice(0).buffer)[0];return this.read(t)}decodeBoolean(){return!!this.read(1)[0]}decodeString(){const t=this.decodeUint8Array();return Je.Buffer.from(t).toString()}decodeArray(){const t=this.decode();return Array(t).fill(0).map(()=>this.decode())}decodeObject(){const t=this.decode(),e=Array(t).fill(0).map(()=>[this.decode(),this.decode()]);return Object.fromEntries(e)}decode(){const t=this.read(1)[0];switch(t){case 2:return this.decodeBigInt();case 1:return this.decodeNumber();case 0:return this.decodeBoolean();case 3:return this.decodeString();case 4:return this.decodeUint8Array();case 6:return this.decodeArray();case 5:return this.decodeObject();case 7:return;case 8:return null}throw`unkonw type: ${t}`}};function a1(t){const e=new Uint8Array(t.length+5);return e[0]=4,Je.Buffer.from(e.buffer,1,4).writeUInt32LE(t.length),e.set(t,5),e}function LM(){return Uint8Array.from([7])}function $M(){return Uint8Array.from([8])}function zM(t){const e=Vg(t.toString());return e[0]=2,e}function qM(t){const e=Vg(t.toString());return e[0]=1,e}function VM(t){return new Uint8Array([0,Number(t)])}function Vg(t){const e=new ArrayBuffer(t.length);Je.Buffer.from(e).write(t);const n=a1(new Uint8Array(e));return n[0]=3,n}function WM(t){const e=Object.entries(t),n=e.map(([i,r])=>{const s=za(i),o=za(r);return ep([s,o])});return ep([Uint8Array.from([5]),za(e.length),...n])}function KM(t){const e=t.map(n=>za(n));return ep([Uint8Array.from([6]),za(e.length),...e])}function za(t){if(t instanceof Uint8Array)return a1(t);if(t instanceof Array)return KM(t);if(t instanceof Object)return WM(t);if(t===null)return $M();switch(typeof t){case"string":return Vg(t);case"number":return qM(t);case"bigint":return zM(t);case"boolean":return VM(t);case"undefined":return LM()}throw`unsuport type: ${t}`}function ZM(t){return new UM(t).decode()}function HM(t){return Je.Buffer.from(za(t).buffer).toString("hex")}function Nw(t){const e=new ArrayBuffer(t.length/2);return Je.Buffer.from(e).write(t,"hex"),ZM(new Uint8Array(e))}function c1(t,e){const n=l=>l.split(".").map(Number),[i,r,s]=n(t),[o,a,c]=n(e);return i>o?1:i<o?-1:r>a?1:r<a?-1:s>c?1:s<c?-1:0}function tp(t){return t!==void 0&&c1(t,"2.1.4")>=0}function QM(t){return t!==void 0&&c1(t,"2.0.5")>=0}function GM(t){return t!==void 0}var YM="2.1.4",l1=class{constructor(t,e,n){this.handshakeType=t,e!==void 0&&(this.version=e),n!==void 0&&(this.sessionID=n)}toString(t){if(tp(t)){if(this.sessionID===void 0)throw Error("sessionID is undefined");return`${this.handshakeType}:${this.version}:${this.sessionID}`}return GM(t)?`${this.handshakeType}:${this.version}`:this.handshakeType}isHandshakeMessage(t){return!(this.handshakeType!==t||tp(this.version)&&this.sessionID===void 0)}static fromString(t){const[e,n,i]=t.split(":");return new l1(e,n,Number(i))}},Wn=l1;Wn.HANDSHAKE_REQ="HANDSHAKE_REQ";Wn.HANDSHAKE_ACK="HANDSHAKE_ACK";Wn.HANDSHAKE_PORT_ACK="HANDSHAKE_PORT_REQ";var Ir=class{constructor(t,e,n){this.port=t,this.peerVersion=e,this.sessionID=n,this.connected=!0,this.port.onmessage=i=>{this.onMessage&&this.onMessage(i.data)},this.port.onmessageerror=()=>{this.close()}}send(t){this.port.postMessage(t)}on(t,e){switch(t){case"close":this.onClose=e;break;case"message":this.onMessage=e;break;default:throw Error("invlaid type")}}get version(){return{self:Ir.version,peer:this.peerVersion}}close(){this.connected&&(this.port.close(),this.connected=!1,this.onClose&&this.onClose())}static newSessionID(){return Ir.sessionID++}static async connect(t,e){return new Promise((n,i)=>{const r=Ir.newSessionID();let s=()=>{},o=setTimeout(()=>{s(),i(`connect timeout: ${r}`)},1e3);const a=l=>{const u=l.ports[0];if(!e.includes(l.origin)||typeof l.data!="string")return;const d=Wn.fromString(l.data);d.isHandshakeMessage(Wn.HANDSHAKE_PORT_ACK)&&d.sessionID===r&&(s(),n(new Ir(u,d.version,r)))};s=()=>{clearTimeout(o),window.removeEventListener("message",a)},window.addEventListener("message",a);const c=new Wn(Wn.HANDSHAKE_REQ,Ir.version,r);t.postMessage(c.toString(c.version),"*")})}static accepts(t,e){t=new URL(t).origin;const n=i=>{if(i.origin!==t||typeof i.data!="string")return;const r=Wn.fromString(i.data);if(!r.isHandshakeMessage(Wn.HANDSHAKE_REQ))return;const s=r.version,o=Ir.version;if(tp(s)){const a=new MessageChannel,c=new Wn(Wn.HANDSHAKE_PORT_ACK,o,r.sessionID);i.source.postMessage(c.toString(s),i.origin,[a.port2]),e(new Ir(a.port1,s,r.sessionID))}else if(QM(s)){const a=new MessageChannel,c=new Wn(Wn.HANDSHAKE_PORT_ACK,o);i.source.postMessage(c.toString(s),i.origin,[a.port2]),e(new Ir(a.port1,s,void 0))}else{const a=i.ports[0],c=new Wn(Wn.HANDSHAKE_ACK,o);a.postMessage(c.toString(s)),e(new Ir(i.ports[0],s,void 0))}};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)}static async accept(t){return new Promise(e=>{const n=this.accepts(t,i=>{e(i),n()})})}},Wg=Ir;Wg.version=YM;Wg.sessionID=0;var XM=class{constructor(t,e){this.connector=t,this.notifiers=e,this.id=0,this.executors={},this.connector.on("message",n=>this.onMessage(n)),this.connector.on("close",()=>this.onClose())}onMessage(t){const e=Jf.parse(t);switch(e.type){case"notification":return this.onNotify(e.method,e.params.map(Nw));case"response":const{resolve:n}=this.executors[Number(e.id)];return delete this.executors[Number(e.id)],n(Nw(e.result));case"error":const{reject:i}=this.executors[Number(e.id)];return delete this.executors[Number(e.id)],i(e.error.message)}}async request(t,e=[]){return new Promise((n,i)=>{const r=this.id++;this.executors[r]={resolve:n,reject:i};const s=Jf.format.request(r,t,e.map(HM));this.connector.send(s)})}get version(){return this.connector.version}onNotify(t,e){this.notifiers[t](...e)}onClose(){}},u1={mainnet:"https://app.m-safe.io",testnet:"https://testnet.m-safe.io",partner:"https://partner.m-safe.io"},JM=Object.values(u1),Ps=class{constructor(t){this.events={};const e=(r,...s)=>{const o=this.events[r];o&&o(s[0])},n=["ChangeAccountEvent","ChangeNetworkEvent"].map(r=>[r,(...s)=>e(r,...s)]),i=Object.fromEntries(n);this.client=new XM(t,i)}async connect(){return this.client.request("connect")}async isConnected(){return this.client.request("isConnected")}async disconnect(){return this.client.request("disconnect")}onChangeAccount(t){this.events.ChangeAccountEvent=t}onChangeNetwork(t){this.events.ChangeNetworkEvent=t}async network(){return this.client.request("network")}async account(){return this.client.request("account")}async chainId(){return this.client.request("chainId")}async signAndSubmit(t,e){return this.client.request("signAndSubmit",[t,e])}async signTransaction(t,e){return this.client.request("signTransaction",[t,e])}async signMessage(t){return this.client.request("signMessage",[t])}get version(){return this.client.version}static inMSafeWallet(){return typeof window<"u"&&typeof document<"u"&&typeof parent<"u"&&typeof parent.window<"u"&&parent.window!==window}static inMsafeWallet(){return Ps.inMSafeWallet()}static getAppUrl(t="mainnet",e=`${window.location.href}`){return`${Ps.getOrigin(t)}/aptos/v2/store/0?url=${encodeURIComponent(e)}`}static getOrigin(t="mainnet"){const e=u1[t.toLowerCase()]||t;return new URL(e).origin}static async new(t=JM){const e=t instanceof Array?t.map(i=>Ps.getOrigin(i)):[Ps.getOrigin(t)],n=await Wg.connect(window.parent,e);return new Ps(n)}};const e3="MSafe";class t3 extends Xn{constructor(n){super();v(this,"name",e3);v(this,"icon","https://raw.githubusercontent.com/hippospace/aptos-wallet-adapter/main/logos/msafe.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_readyState",Ps.inMSafeWallet()?me.NotDetected:me.Unsupported);v(this,"_connecting");v(this,"_wallet");v(this,"_origin");this._network=void 0,this._connecting=!1,this._origin=n,this._readyState===me.NotDetected&&Ps.new(n).then(i=>{this._provider=i,this._readyState=me.Installed,this.emit("readyStateChange",this._readyState)}).catch(i=>{this._readyState=me.Unsupported,this.emit("readyStateChange",this._readyState),console.error("MSafe connect error:",i)})}get url(){return Ps.getAppUrl(this._origin instanceof Array?this._origin[0]:this._origin)}get publicAccount(){var n,i,r,s;return{publicKey:(n=this._wallet)==null?void 0:n.publicKey,address:(i=this._wallet)==null?void 0:i.address,authKey:(r=this._wallet)==null?void 0:r.authKey,minKeysRequired:(s=this._wallet)==null?void 0:s.minKeysRequired}}get network(){return{name:this._network,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider;if(await(i==null?void 0:i.isConnected())&&await(i==null?void 0:i.disconnect()),!await(i==null?void 0:i.connect()))throw new Ae("No connect response");const o=await(i==null?void 0:i.account());if(o){this._wallet={...o,isConnected:!0};try{const a=await(i==null?void 0:i.network()),c=await(i==null?void 0:i.chainId());this._network=a,this._chainId=c.toString()}catch(a){const c=a.message;throw this.emit("error",new Sr(c)),a}}this.emit("connect",((n=this._wallet)==null?void 0:n.address)||"")}catch(i){throw this.emit("error",new Error(i)),i}finally{this._connecting=!1}}async disconnect(){const n=this._wallet,i=this._provider;if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(r){this.emit("error",new Yn(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(n,i){try{const r=this._wallet,s=this._provider;if(!r||!s)throw new Ae;const o=await s.signTransaction(n,i);if(!o)throw new Error("No response");return o}catch(r){throw this.emit("error",new kn(r)),r}}async signAndSubmitTransaction(n,i){try{const r=this._wallet,s=this._provider;if(!r||!s)throw new Ae;const o=await s.signAndSubmit(n,i);if(!o)throw new Error("No response");return{hash:F2.fromUint8Array(o).hex()}}catch(r){throw this.emit("error",new Oi(r)),r}}async signMessage(n){try{const i=this._wallet,r=this._provider;if(!i||!r)throw new Ae;const s=await r.signMessage(n);if(s)return s;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider;if(!n||!i)throw new Ae;const r=async s=>{this._wallet={...this._wallet,...s},this.emit("accountChange",s.address)};i.onChangeAccount(r)}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider;if(!n||!i)throw new Ae;const r=async s=>{this._network=s,this._chainId=(await this._provider.chainId()).toString(),this.emit("networkChange",this._network)};i.onChangeNetwork(r)}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}const n3="Spacecy";class i3 extends Xn{constructor({timeout:n=1e4}={}){super();v(this,"name",n3);v(this,"url","https://chrome.google.com/webstore/detail/spacecy-wallet/mkchoaaiifodcflmbaphdgeidocajadp");v(this,"icon","https://spacecywallet.com/favicon.ico");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?me.Unsupported:me.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.spacecy:void 0,this._network=void 0,this._timeout=n,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==me.Unsupported&&gi(()=>window.spacecy?(this._readyState=me.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var n,i,r;return{publicKey:((n=this._wallet)==null?void 0:n.publicKey)||null,address:((i=this._wallet)==null?void 0:i.address)||null,authKey:((r=this._wallet)==null?void 0:r.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var n;return!!((n=this._wallet)!=null&&n.isConnected)}get readyState(){return this._readyState}async connect(){var n;try{if(this.connected||this.connecting)return;if(!(this._readyState===me.Loadable||this._readyState===me.Installed))throw new Gn;this._connecting=!0;const i=this._provider||window.spacecy,r=await(i==null?void 0:i.connect());if(!r)throw new Ae("No connect response");const s=r.data.address,o=r.data.publicKey;if(s){this._wallet={address:s,publicKey:o,isConnected:!0};try{const a=await(i==null?void 0:i.chainId());a&&(this._network=a.data.networkName,this._chainId=a.data.chainId,this._api=a.data.rpcProvider)}catch(a){const c=a.message;throw this.emit("error",new Sr(c)),a}}this.emit("connect",((n=this._wallet)==null?void 0:n.address)||"")}catch(i){throw this.emit("error",new Error("User has rejected the connection")),i}finally{this._connecting=!1}}async disconnect(){const n=this._wallet,i=this._provider||window.spacecy;if(n){this._wallet=null;try{await(i==null?void 0:i.disconnect())}catch(r){this.emit("error",new Yn(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(n,i){try{const r=this._wallet,s=this._provider||window.spacecy;if(!r||!s)throw new Ae;const o=await s.generateTransaction(r.address||"",n,i);if(!o)throw new Error("Cannot generate transaction");const a=await(s==null?void 0:s.signTransaction(o.data));if(!a)throw new Error("No response");return a.data}catch(r){throw this.emit("error",new kn(r)),r}}async signAndSubmitTransaction(n,i){try{const r=this._wallet,s=this._provider||window.spacecy;if(!r||!s)throw new Ae;const o=await(s==null?void 0:s.signAndSubmitTransaction(n,i));if(!o||o.status!=200)throw new Error("No response");return{hash:o.data}}catch(r){throw this.emit("error",new Oi(r.message)),r}}async signMessage(n){try{const i=this._wallet,r=this._provider||window.spacecy;if(!i||!r)throw new Ae;if(typeof n!="object"||!n.nonce)throw new Kt("Invalid signMessage Payload");const s=await(r==null?void 0:r.signMessage(n));if(s.status==200)return s.data;throw new Error("Sign Message failed")}catch(i){const r=i.message;throw this.emit("error",new Kt(r)),i}}async onAccountChange(){try{const n=this._wallet,i=this._provider||window.spacecy;if(!n||!i)throw new Ae;const r=async s=>{if(s.data=="no account"){this.connected&&await this.disconnect();return}s.data==""&&(this._wallet={publicKey:"",address:"",authKey:"",isConnected:!1}),this._wallet!=null&&(this._wallet={...this._wallet,address:s.data=="no account"?void 0:s.data,publicKey:void 0}),this.emit("accountChange",s)};await(i==null?void 0:i.onAccountChange(r))}catch(n){const i=n.message;throw this.emit("error",new fi(i)),n}}async onNetworkChange(){try{const n=this._wallet,i=this._provider||window.spacecy;if(!n||!i)throw new Ae;const r=s=>{this._network=s.data.networkName,this._api=s.data.rpcProvider,this._chainId=s.data.chainId,this._network&&this.emit("networkChange",this._network)};await(i==null?void 0:i.onNetworkChange(r))}catch(n){const i=n.message;throw this.emit("error",new pi(i)),n}}}function r3(t){return"connect"in t}function d1(t){return!r3(t)}function Ow(t){return t.flatMap(e=>d1(e)?e.get():e)}const s3={async set(t,e){return localStorage.setItem(t,e)},async get(t){return localStorage.getItem(t)},async del(t){localStorage.removeItem(t)}},o3="Sui Wallet",a3="wallet-kit:last-wallet";function c3(){if(!document||document.visibilityState==="visible")return Promise.resolve();let t=null;const e=new Promise(i=>t=i),n=()=>{t&&document.visibilityState==="visible"&&(t(),document.removeEventListener("visibilitychange",n))};return document.addEventListener("visibilitychange",n),e}function Dw(t,e){return[...e.map(n=>t.find(i=>i.name===n)).filter(Boolean),...t.filter(n=>!e.includes(n.name))]}function l3({adapters:t,preferredWallets:e=[o3],storageAdapter:n=s3,storageKey:i=a3}){const r=new Set;let s=null,o={accounts:[],currentAccount:null,wallets:Dw(Ow(t),e),currentWallet:null,status:"DISCONNECTED"};const a=()=>({...o,isConnecting:o.status==="CONNECTING",isConnected:o.status==="CONNECTED",isError:o.status==="ERROR"});let c=a();function l(f){o={...o,...f},c=a(),r.forEach(g=>{try{g(c)}catch{}})}function u(){s&&(s(),s=null),l({status:"DISCONNECTED",accounts:[],currentAccount:null,currentWallet:null})}const d=t.filter(d1);d.length&&d.map(f=>f.on("changed",()=>{l({wallets:Dw(Ow(t),e)})}));const h={async autoconnect(){if(!c.currentWallet){await c3();try{const f=await n.get(i);f&&h.connect(f)}catch{}}},getState(){return c},subscribe(f){r.add(f);try{f(c)}catch{}return()=>{r.delete(f)}},selectAccount(f){f===o.currentAccount||!o.accounts.includes(f)||l({currentAccount:f})},async connect(f){const g=o.wallets.find(p=>p.name===f)??null;if(l({currentWallet:g}),g&&!g.connecting){s&&s(),s=g.on("change",({connected:p,accounts:w})=>{p===!1?u():w&&l({accounts:w,currentAccount:o.currentAccount&&!w.find(({address:_})=>{var k;return _===((k=o.currentAccount)==null?void 0:k.address)})?w[0]:o.currentAccount})});try{l({status:"CONNECTING"}),await g.connect(),l({status:"CONNECTED"});try{await n.set(i,g.name)}catch{}const p=await g.getAccounts();l({accounts:p,currentAccount:p[0]??null})}catch(p){console.log("Wallet connection error",p),l({status:"ERROR"})}}else l({status:"DISCONNECTED"})},async disconnect(){if(!o.currentWallet){console.warn("Attempted to `disconnect` but no wallet was connected.");return}try{await n.del(i)}catch{}await o.currentWallet.disconnect(),u()},signMessage(f){if(!o.currentWallet||!o.currentAccount)throw new Error("No wallet is currently connected, cannot call `signMessage`.");return o.currentWallet.signMessage({...f,account:f.account??o.currentAccount})},async signTransactionBlock(f){if(!o.currentWallet||!o.currentAccount)throw new Error("No wallet is currently connected, cannot call `signTransaction`.");const{account:g=o.currentAccount,chain:p=o.currentAccount.chains[0]}=f;if(!p)throw new Error("Missing chain");return o.currentWallet.signTransactionBlock({...f,account:g,chain:p})},async signAndExecuteTransactionBlock(f){if(!o.currentWallet||!o.currentAccount)throw new Error("No wallet is currently connected, cannot call `signAndExecuteTransactionBlock`.");const{account:g=o.currentAccount,chain:p=o.currentAccount.chains[0]}=f;if(!p)throw new Error("Missing chain");return o.currentWallet.signAndExecuteTransactionBlock({...f,account:g,chain:p})}};return h}var u3=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},d3=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},$u;let Ic;const zu=new Set,xa={};function Kg(){if(Ic||(Ic=Object.freeze({register:jw,get:h3,on:f3}),typeof window>"u"))return Ic;const t=Object.freeze({register:jw});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new p3(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Ic}function jw(...t){var e;return t=t.filter(n=>!zu.has(n)),t.length?(t.forEach(n=>zu.add(n)),(e=xa.register)==null||e.forEach(n=>Rw(()=>n(...t))),function(){var i;t.forEach(r=>zu.delete(r)),(i=xa.unregister)==null||i.forEach(r=>Rw(()=>r(...t)))}):()=>{}}function h3(){return[...zu]}function f3(t,e){var n;return(n=xa[t])!=null&&n.push(e)||(xa[t]=[e]),function(){var r;xa[t]=(r=xa[t])==null?void 0:r.filter(s=>e!==s)}}function Rw(t){try{t()}catch(e){console.error(e)}}class p3 extends Event{constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),$u.set(this,void 0),u3(this,$u,e,"f")}get detail(){return d3(this,$u,"f")}get type(){return"wallet-standard:app-ready"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}$u=new WeakMap;var g3=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},m3=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},qu;function w3(t){const e=({register:n})=>n(t);try{window.dispatchEvent(new y3(e))}catch(n){console.error(`wallet-standard:register-wallet event could not be dispatched
`,n)}try{window.addEventListener("wallet-standard:app-ready",({detail:n})=>e(n))}catch(n){console.error(`wallet-standard:app-ready event listener could not be added
`,n)}}class y3 extends Event{constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),qu.set(this,void 0),g3(this,qu,e,"f")}get detail(){return m3(this,qu,"f")}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}qu=new WeakMap;var aa=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},ca=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Vu,Wu,Ku,Zu,Hu,Qu;class Mh{constructor(e){Vu.set(this,void 0),Wu.set(this,void 0),Ku.set(this,void 0),Zu.set(this,void 0),Hu.set(this,void 0),Qu.set(this,void 0),new.target===Mh&&Object.freeze(this),aa(this,Vu,e.address,"f"),aa(this,Wu,e.publicKey.slice(),"f"),aa(this,Ku,e.chains.slice(),"f"),aa(this,Zu,e.features.slice(),"f"),aa(this,Hu,e.label,"f"),aa(this,Qu,e.icon,"f")}get address(){return ca(this,Vu,"f")}get publicKey(){return ca(this,Wu,"f").slice()}get chains(){return ca(this,Ku,"f").slice()}get features(){return ca(this,Zu,"f").slice()}get label(){return ca(this,Hu,"f")}get icon(){return ca(this,Qu,"f")}}Vu=new WeakMap,Wu=new WeakMap,Ku=new WeakMap,Zu=new WeakMap,Hu=new WeakMap,Qu=new WeakMap;const _3=["standard:connect","standard:events"];function b3(t,e=[]){return[..._3,...e].every(n=>n in t.features)}const v3="sui:testnet",Zg="sui:mainnet";function Hg(t){return{all:t=t||new Map,on:function(e,n){var i=t.get(e);i?i.push(n):t.set(e,[n])},off:function(e,n){var i=t.get(e);i&&(n?i.splice(i.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var i=t.get(e);i&&i.slice().map(function(r){r(n)}),(i=t.get("*"))&&i.slice().map(function(r){r(e,n)})}}}const Bw="1.0.0",Pw="1.0.0";function Fw(t,e){const[n]=t.split("."),[i]=e.split(".");return Number(i)===Number(n)}var Ga,rn,Fo,cl,np;class Uw{constructor({wallet:e}){Ge(this,cl);v(this,"connected",!1);v(this,"connecting",!1);Ge(this,Ga,Hg());Ge(this,rn,void 0);Ge(this,Fo,null);v(this,"signMessage",e=>M(this,rn).features["sui:signMessage"].signMessage(e));v(this,"signTransactionBlock",e=>{const n=M(this,rn).features["sui:signTransactionBlock"].version;if(!Fw(n,Bw))throw new Error(`Version mismatch, signTransaction feature version ${n} is not compatible with version ${Bw}`);return M(this,rn).features["sui:signTransactionBlock"].signTransactionBlock(e)});v(this,"signAndExecuteTransactionBlock",e=>{const n=M(this,rn).features["sui:signAndExecuteTransactionBlock"].version;if(!Fw(n,Pw))throw new Error(`Version mismatch, signAndExecuteTransactionBlock feature version ${n} is not compatible with version ${Pw}`);return M(this,rn).features["sui:signAndExecuteTransactionBlock"].signAndExecuteTransactionBlock(e)});v(this,"signPersonalMessage",async e=>M(this,rn).features["sui:signPersonalMessage"].signMessage(e));v(this,"on",(e,n)=>(M(this,Ga).on(e,n),()=>{M(this,Ga).off(e,n)}));Ue(this,rn,e)}get name(){return M(this,rn).name}get icon(){return M(this,rn).icon}get wallet(){return M(this,rn)}async getAccounts(){return M(this,rn).accounts}async connect(){try{if(this.connected||this.connecting)return;if(this.connecting=!0,Ue(this,Fo,M(this,rn).features["standard:events"].on("change",async({accounts:e})=>{e&&(this.connected=e.length>0,await Le(this,cl,np).call(this))})),M(this,rn).accounts.length||(console.log("这里的this.#wallet###",M(this,rn)),await M(this,rn).features["standard:connect"].connect()),!M(this,rn).accounts.length)throw new Error("No wallet accounts found");this.connected=!0,await Le(this,cl,np).call(this)}finally{this.connecting=!1}}async disconnect(){M(this,rn).features["standard:disconnect"]&&await M(this,rn).features["standard:disconnect"].disconnect(),this.connected=!1,this.connecting=!1,M(this,Fo)&&(M(this,Fo).call(this),Ue(this,Fo,null))}}Ga=new WeakMap,rn=new WeakMap,Fo=new WeakMap,cl=new WeakSet,np=async function(){M(this,Ga).emit("change",{connected:this.connected,accounts:await this.getAccounts()})};const h1=32;function qd(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(h1*2,"0")}`}const k3=/^vector<(.+)>$/,S3=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let Lw=class ba{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const i=e.match(k3);if(i)return{vector:ba.parseFromStr(i[1],n)};const r=e.match(S3);if(r)return{struct:{address:n?qd(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:ba.parseStructTypeArgs(r[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return C2(e).map(i=>ba.parseFromStr(i,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${ba.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,i=n.typeParams.map(ba.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}};const Ut=new I2({...E2(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function f1(t){return G.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function T3(t){return G.enum("Option",{None:null,Some:t})}function Qg(t){return t.transform({input:e=>({[e.kind]:e}),output:e=>{const n=Object.keys(e)[0];return{kind:n,...e[n]}}})}const gr=G.bytes(h1).transform({input:t=>typeof t=="string"?Gp(qd(t)):t,output:t=>qd(Yp(t))}),Gg=G.vector(G.u8()).transform({name:"ObjectDigest",input:t=>x2(t),output:t=>M2(new Uint8Array(t))}),tl=G.struct("SuiObjectRef",{objectId:gr,version:G.u64(),digest:Gg}),Yg=G.struct("SharedObjectRef",{objectId:gr,initialSharedVersion:G.u64(),mutable:G.bool()}),Vd=G.enum("ObjectArg",{ImmOrOwned:tl,Shared:Yg,Receiving:tl}),Xg=G.enum("CallArg",{Pure:G.vector(G.u8()),Object:Vd,ObjVec:G.vector(Vd)}),yc=G.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:G.lazy(()=>yc),struct:G.lazy(()=>rm),u16:null,u32:null,u256:null}),ar=Qg(G.enum("Argument",{GasCoin:null,Input:G.struct("Input",{index:G.u16()}),Result:G.struct("Result",{index:G.u16()}),NestedResult:G.struct("NestedResult",{index:G.u16(),resultIndex:G.u16()})})),Jg=G.struct("ProgrammableMoveCall",{package:gr,module:G.string(),function:G.string(),type_arguments:G.vector(yc),arguments:G.vector(ar)}).transform({input:t=>{const[e,n,i]=t.target.split("::"),r=t.typeArguments.map(s=>Lw.parseFromStr(s,!0));return{package:qd(e),module:n,function:i,type_arguments:r,arguments:t.arguments}},output:t=>({target:[t.package,t.module,t.function].join("::"),arguments:t.arguments,typeArguments:t.type_arguments.map(Lw.tagToString)})}),em=Qg(G.enum("Transaction",{MoveCall:Jg,TransferObjects:G.struct("TransferObjects",{objects:G.vector(ar),address:ar}),SplitCoins:G.struct("SplitCoins",{coin:ar,amounts:G.vector(ar)}),MergeCoins:G.struct("MergeCoins",{destination:ar,sources:G.vector(ar)}),Publish:G.struct("Publish",{modules:G.vector(G.vector(G.u8())),dependencies:G.vector(gr)}),MakeMoveVec:G.struct("MakeMoveVec",{type:T3(yc),objects:G.vector(ar)}),Upgrade:G.struct("Upgrade",{modules:G.vector(G.vector(G.u8())),dependencies:G.vector(gr),packageId:gr,ticket:ar})})),tm=G.struct("ProgrammableTransaction",{inputs:G.vector(Xg),transactions:G.vector(em)}),nm=G.enum("TransactionKind",{ProgrammableTransaction:tm,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),im=G.enum("TransactionExpiration",{None:null,Epoch:f1()}),rm=G.struct("StructTag",{address:gr,module:G.string(),name:G.string(),typeParams:G.vector(yc)}),sm=G.struct("GasData",{payment:G.vector(tl),owner:gr,price:G.u64(),budget:G.u64()}),om=G.struct("TransactionDataV1",{kind:nm,sender:gr,gasData:sm,expiration:im}),am=G.enum("TransactionData",{V1:om}),A3=G.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),C3=G.enum("IntentVersion",{V0:null}),I3=G.enum("AppId",{Sui:null}),E3=G.struct("Intent",{scope:A3,version:C3,appId:I3}),x3=G.generic(["T"],t=>G.struct("IntentMessage<T>",{intent:E3,value:t})),cm=G.enum("CompressedSignature",{ED25519:G.fixedArray(64,G.u8()),Secp256k1:G.fixedArray(64,G.u8()),Secp256r1:G.fixedArray(64,G.u8()),ZkLogin:G.vector(G.u8())}),lm=G.enum("PublicKey",{ED25519:G.fixedArray(32,G.u8()),Secp256k1:G.fixedArray(33,G.u8()),Secp256r1:G.fixedArray(33,G.u8()),ZkLogin:G.vector(G.u8())}),um=G.struct("MultiSigPkMap",{pubKey:lm,weight:G.u8()}),dm=G.struct("MultiSigPublicKey",{pk_map:G.vector(um),threshold:G.u16()}),p1=G.struct("MultiSig",{sigs:G.vector(cm),bitmap:G.u16(),multisig_pk:dm}),M3=G.vector(G.u8()).transform({input:t=>typeof t=="string"?uh(t):t,output:t=>Zo(new Uint8Array(t))}),g1=G.struct("SenderSignedTransaction",{intentMessage:x3(am),txSignatures:G.vector(M3)}),m1=G.vector(g1,{name:"SenderSignedData"}),$w={...G,U8:G.u8(),U16:G.u16(),U32:G.u32(),U64:G.u64(),U128:G.u128(),U256:G.u256(),ULEB128:G.uleb128(),Bool:G.bool(),String:G.string(),Address:gr,Argument:ar,CallArg:Xg,CompressedSignature:cm,GasData:sm,MultiSig:p1,MultiSigPkMap:um,MultiSigPublicKey:dm,ObjectArg:Vd,ObjectDigest:Gg,ProgrammableMoveCall:Jg,ProgrammableTransaction:tm,PublicKey:lm,SenderSignedData:m1,SenderSignedTransaction:g1,SharedObjectRef:Yg,StructTag:rm,SuiObjectRef:tl,Transaction:em,TransactionData:am,TransactionDataV1:om,TransactionExpiration:im,TransactionKind:nm,TypeTag:yc,ser:Ut.ser.bind(Ut),de:Ut.de.bind(Ut),getTypeInterface:Ut.getTypeInterface.bind(Ut),hasType:Ut.hasType.bind(Ut),parseTypeName:Ut.parseTypeName.bind(Ut),registerAddressType:Ut.registerAddressType.bind(Ut),registerAlias:Ut.registerAlias.bind(Ut),registerBcsType:Ut.registerBcsType.bind(Ut),registerEnumType:Ut.registerEnumType.bind(Ut),registerStructType:Ut.registerStructType.bind(Ut),registerType:Ut.registerType.bind(Ut),types:Ut.types};Ut.registerBcsType("utf8string",()=>G.string({name:"utf8string"}));Ut.registerBcsType("unsafe_u64",()=>f1());Ut.registerBcsType("enumKind",t=>Qg(t));[gr,ar,Xg,cm,sm,p1,um,dm,Vd,Gg,Jg,tm,lm,m1,Yg,rm,tl,em,am,om,im,nm,yc].forEach(t=>{Ut.registerBcsType(t.name,()=>t)});var N3=class extends Error{constructor(e){super(e[0].message);v(this,"issues");this.name="ValiError",this.issues=e}};function w1(t){return typeof t=="function"?t():t}function O3(t,e,n,i,r){return{issues:[{validation:t,message:w1(e),input:n,requirement:i,path:r}]}}function D3(t){return{output:t}}function Wd(t,e){return Array.isArray(t)?[void 0,t]:[t,e]}function Nh(t,e,n){return{typed:t,output:e,issues:n}}function j3(t,e,n){if(!t||typeof t=="object"&&!Array.isArray(t)){const[s,o]=Wd(e,n);return[t,s,o]}const[i,r]=Wd(t,e);return[void 0,i,r]}function R3(t,e){return{reason:t==null?void 0:t.reason,validation:e.validation,origin:(t==null?void 0:t.origin)||"value",message:e.message,input:e.input,requirement:e==null?void 0:e.requirement,path:e.path,abortEarly:t==null?void 0:t.abortEarly,abortPipeEarly:t==null?void 0:t.abortPipeEarly,skipPipe:t==null?void 0:t.skipPipe}}function B3(t,e){return{reason:e,origin:t==null?void 0:t.origin,abortEarly:t==null?void 0:t.abortEarly,abortPipeEarly:t==null?void 0:t.abortPipeEarly,skipPipe:t==null?void 0:t.skipPipe}}function hm(t,e,n,i,r){let s,o=t;if(e!=null&&e.length&&!(n!=null&&n.skipPipe))for(const a of e){const c=a._parse(o);if(c.issues){s=s||B3(n,i);for(const l of c.issues){const u=R3(s,l);r?r.push(u):r=[u]}if(s.abortEarly||s.abortPipeEarly)break}else o=c.output}return Nh(!0,o,r)}function nl(t,e,n,i,r,s,o){return{typed:!1,output:r,issues:[{reason:e,validation:n,origin:(t==null?void 0:t.origin)||"value",message:w1(i),input:r,path:s,issues:o,abortEarly:t==null?void 0:t.abortEarly,abortPipeEarly:t==null?void 0:t.abortPipeEarly,skipPipe:t==null?void 0:t.skipPipe}]}}function qa(t,e="Invalid type"){return{type:"literal",async:!1,literal:t,message:e,_parse(n,i){return n!==this.literal?nl(i,"type","literal",this.message,n):Nh(!0,n)}}}function Va(t,e,n,i){const[r,s="Invalid type",o]=j3(e,n,i);let a;return{type:"object",async:!1,entries:t,rest:r,message:s,pipe:o,_parse(c,l){if(!c||typeof c!="object")return nl(l,"type","object",this.message,c);a=a||Object.entries(this.entries);let u=!0,d;const h={};for(const[f,g]of a){const p=c[f],w=g._parse(p,l);if(w.issues){const _={type:"object",input:c,key:f,value:p};for(const k of w.issues)k.path?k.path.unshift(_):k.path=[_],d==null||d.push(k);if(d||(d=w.issues),l!=null&&l.abortEarly){u=!1;break}}w.typed||(u=!1),(w.output!==void 0||f in c)&&(h[f]=w.output)}if(this.rest&&!(l!=null&&l.abortEarly&&d)){for(const f in c)if(!(f in this.entries)){const g=c[f],p=this.rest._parse(g,l);if(p.issues){const w={type:"object",input:c,key:f,value:g};for(const _ of p.issues)_.path?_.path.unshift(w):_.path=[w],d==null||d.push(_);if(d||(d=p.issues),l!=null&&l.abortEarly){u=!1;break}}p.typed||(u=!1),h[f]=p.output}}return u?hm(h,this.pipe,l,"object",d):Nh(!1,h,d)}}}function va(t,e){const[n="Invalid type",i]=Wd(t,e);return{type:"string",async:!1,message:n,pipe:i,_parse(r,s){return typeof r!="string"?nl(s,"type","string",this.message,r):hm(r,this.pipe,s,"string")}}}function y1(t,e,n,i){const[r="Invalid type",s]=Wd(n,i);return{type:"variant",async:!1,key:t,options:e,message:r,pipe:s,_parse(o,a){if(!o||typeof o!="object")return nl(a,"type","variant",this.message,o);if(this.key in o){let c,l;const u=d=>{for(const h of d)if(h.type==="object"){if(!h.entries[this.key]._parse(o[this.key],a).issues){const g=h._parse(o,a);if(g.issues)c=g.issues;else{l=[g.output];break}}}else if(h.type==="variant"&&(u(h.options),l))break};if(u(this.options),l)return hm(l[0],this.pipe,a,"variant");if(c)return Nh(!1,l,c)}return nl(a,"type","variant",this.message,o,[{type:"object",input:o,key:this.key,value:void 0}])}}}function P3(t,e,n){const i=t._parse(e,n);return{typed:i.typed,success:!i.issues,data:i.output,output:i.output,error:i.issues&&new N3(i.issues),issues:i.issues}}var F3=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function U3(t="Invalid UUID"){return{type:"uuid",async:!1,message:t,requirement:F3,_parse(e){return this.requirement.test(e)?D3(e):O3(this.type,this.message,e,this.requirement)}}}function L3(){let t,e;return{promise:new Promise((i,r)=>{t=i,e=r}),reject:e,resolve:t}}const $3=y1("type",[Va({type:qa("connect"),address:va()}),Va({type:qa("sign-transaction-block"),bytes:va(),signature:va()}),Va({type:qa("sign-personal-message"),bytes:va(),signature:va()})]),z3=y1("type",[Va({type:qa("reject")}),Va({type:qa("resolve"),data:$3})]),q3=Va({id:va([U3()]),source:qa("zksend-channel"),payload:z3});var _1=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},la=(t,e,n)=>(_1(t,e,"read from private field"),n?n.call(t):e.get(t)),pu=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},gu=(t,e,n,i)=>(_1(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Rc,Bc,Gu,Yu;const b1="https://zksend.com";class df{constructor({origin:e=b1,name:n}){pu(this,Rc,void 0),pu(this,Bc,void 0),pu(this,Gu,void 0),pu(this,Yu,void 0),gu(this,Rc,crypto.randomUUID()),gu(this,Bc,e),gu(this,Gu,n)}async createRequest(e){const n=window.open("about:blank","_blank");if(!n)throw new Error("Failed to open new window");const{promise:i,resolve:r,reject:s}=L3();let o=null;function a(){o&&clearInterval(o),window.removeEventListener("message",c)}const c=d=>{if(d.origin!==la(this,Bc))return;const{success:h,output:f}=P3(q3,d.data);!h||f.id!==la(this,Rc)||(a(),f.payload.type==="reject"?s(new Error("User rejected the request")):f.payload.type==="resolve"&&r(f.payload.data))};gu(this,Yu,()=>{a(),n==null||n.close()}),window.addEventListener("message",c);const{type:l,...u}=e;return n==null||n.location.assign(`${la(this,Bc)}/dapp/${l}?${new URLSearchParams({id:la(this,Rc),origin:window.origin,name:la(this,Gu)})}${u?`#${new URLSearchParams(u)}`:""}`),o=setInterval(()=>{try{n!=null&&n.closed&&(a(),s(new Error("User closed the zkSend window")))}catch{}},1e3),i}close(){var e;(e=la(this,Yu))==null||e.call(this)}}Rc=new WeakMap;Bc=new WeakMap;Gu=new WeakMap;Yu=new WeakMap;var fm=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Vn=(t,e,n)=>(fm(t,e,"read from private field"),n?n.call(t):e.get(t)),Cr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ma=(t,e,n,i)=>(fm(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),mu=(t,e,n)=>(fm(t,e,"access private method"),n),Na,Wa,ka,Sa,ip,rp,sp,Ta,Pc,op,ap;const cp="zksend:recentAddress",V3="zkSend";class W3{constructor({name:e,address:n,origin:i=b1}){Cr(this,Ta),Cr(this,Na,void 0),Cr(this,Wa,void 0),Cr(this,ka,void 0),Cr(this,Sa,void 0),Cr(this,ip,async({transactionBlock:r,account:s})=>{r.setSenderIfNotSet(s.address);const o=r.serialize(),c=await new df({name:Vn(this,Sa),origin:Vn(this,ka)}).createRequest({type:"sign-transaction-block",data:o,address:s.address});return{transactionBlockBytes:c.bytes,signature:c.signature}}),Cr(this,rp,async({message:r,account:s})=>{const o=Zo($w.vector($w.u8()).serialize(r).toBytes()),c=await new df({name:Vn(this,Sa),origin:Vn(this,ka)}).createRequest({type:"sign-personal-message",bytes:o,address:s.address});return{bytes:o,signature:c.signature}}),Cr(this,sp,(r,s)=>(Vn(this,Na).on(r,s),()=>Vn(this,Na).off(r,s))),Cr(this,op,async r=>{if(r!=null&&r.silent){const a=localStorage.getItem(cp);return a&&mu(this,Ta,Pc).call(this,a),{accounts:this.accounts}}const o=await new df({name:Vn(this,Sa),origin:Vn(this,ka)}).createRequest({type:"connect"});if(!("address"in o))throw new Error("Unexpected response");return mu(this,Ta,Pc).call(this,o.address),{accounts:this.accounts}}),Cr(this,ap,async()=>{localStorage.removeItem(cp),mu(this,Ta,Pc).call(this)}),Ma(this,Wa,[]),Ma(this,Na,Hg()),Ma(this,ka,i),Ma(this,Sa,e),n&&mu(this,Ta,Pc).call(this,n)}get name(){return V3}get icon(){return"data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHdpZHRoPSIzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGNsaXBQYXRoIGlkPSJhIj48cmVjdCBoZWlnaHQ9IjMyIiByeD0iMiIgd2lkdGg9IjMyIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxyZWN0IGZpbGw9IiNmZmYiIGhlaWdodD0iMzIiIHJ4PSIyIiB3aWR0aD0iMzIiLz48cGF0aCBkPSJtMCAwaDMydjMyaC0zMnoiIGZpbGw9IiNkNDA1NTEiLz48cGF0aCBkPSJtNS42NjgyNSAyNS4yNDkxYy0uNzgyNjMtLjc4MjctLjc4MDgxLTIuMDUyMS4wMDQwNi0yLjgzMjVsMTYuNjA1MjktMTYuNTEwNDdjLjc4MTctLjc3NzIzIDIuMDQ0OS0uNzc1NDMgMi44MjQzLjAwNDA0bC44Mzg3LjgzODYyYy43ODI1Ljc4MjUxLjc4MDggMi4wNTE3NC0uMDAzOCAyLjgzMjE4bC0xNi42MDE4OCAxNi41MTM4M2MtLjc4MTY1Ljc3NzUtMi4wNDUwOC43NzU4LTIuODI0NjYtLjAwMzd6bTUuNDQzMzUtMTUuOTExNjZjLTEuODA5NzIuMDUzNjctMi43NTM3MS0yLjEzMzA5LTEuNDczNDctMy40MTMzM2wuODM4MzctLjgzODMyYy4zNzUtLjM3NTA4Ljg4MzctLjU4NTc5IDEuNDE0Mi0uNTg1NzloMTMuNDc5N2MxLjEwNDYgMCAyIC44OTU0MyAyIDJ2MTMuNDc5N2MwIC41MzA1LS4yMTA3IDEuMDM5Mi0uNTg1OCAxLjQxNDJsLS44MjY5LjgyN2MtMS4yODE4IDEuMjgxOC0zLjQ3MDkuMzMzOS0zLjQxMzItMS40Nzc5bC4zMDY2LTkuNjI5OWMuMDM2Ny0xLjE1MjI3LS45MDU5LTIuMDk2OS0yLjA1ODMtMi4wNjI3M3oiIGZpbGw9IiNmZmYiLz48L2c+PC9zdmc+"}get version(){return"1.0.0"}get chains(){return[Zg]}get accounts(){return Vn(this,Wa)}get features(){return{"standard:connect":{version:"1.0.0",connect:Vn(this,op)},"standard:disconnect":{version:"1.0.0",disconnect:Vn(this,ap)},"standard:events":{version:"1.0.0",on:Vn(this,sp)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:Vn(this,ip)},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:Vn(this,rp)}}}}Na=new WeakMap;Wa=new WeakMap;ka=new WeakMap;Sa=new WeakMap;ip=new WeakMap;rp=new WeakMap;sp=new WeakMap;Ta=new WeakSet;Pc=function(t){t?(Ma(this,Wa,[new Mh({address:t,chains:[Zg],features:["sui:signTransactionBlock","sui:signPersonalMessage"],publicKey:new Uint8Array})]),localStorage.setItem(cp,t)):Ma(this,Wa,[]),Vn(this,Na).emit("change",{accounts:this.accounts})};op=new WeakMap;ap=new WeakMap;function K3(t,{origin:e}){const n=Kg();let i=null;try{i=new URLSearchParams(window.location.search).get("zksend_address")}catch{}const r=new W3({name:t,origin:e,address:i}),s=n.register(r);return{wallet:r,unregister:s,addressFromRedirect:i}}const Z3=["sui:signAndExecuteTransactionBlock"];var Ls,$s,zs,ll,qs;class H3{constructor({features:e}={}){Ge(this,Ls,void 0);Ge(this,$s,void 0);Ge(this,zs,void 0);Ge(this,ll,void 0);Ge(this,qs,void 0);Ue(this,$s,new Map);const n=K3("Cetus",{origin:"https://preview.zksend.com"});Ue(this,qs,n==null?void 0:n.wallet),Ue(this,Ls,Kg()),Ue(this,zs,Hg()),Ue(this,ll,e??Z3),M(this,Ls).on("register",()=>{M(this,zs).emit("changed")}),M(this,Ls).on("unregister",()=>{M(this,zs).emit("changed")})}get(){return console.log("this.#wallets.get()####",M(this,Ls).get()),M(this,Ls).get().filter(n=>b3(n,M(this,ll))).forEach(n=>{M(this,$s).has(n)||M(this,$s).set(n,new Uw({wallet:n}))}),M(this,qs)&&(console.log("this.#zksendWallet###",M(this,qs)),M(this,$s).set(M(this,qs),new Uw({wallet:M(this,qs)}))),[...M(this,$s).values()]}on(e,n){return M(this,zs).on(e,n),()=>{M(this,zs).off(e,n)}}}Ls=new WeakMap,$s=new WeakMap,zs=new WeakMap,ll=new WeakMap,qs=new WeakMap;function Q3(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:t===43?62:t===47?63:0}function Oh(t,e){for(var n=t.replace(/[^A-Za-z0-9+/]/g,""),i=n.length,r=e?Math.ceil((i*3+1>>2)/e)*e:i*3+1>>2,s=new Uint8Array(r),o,a,c=0,l=0,u=0;u<i;u++)if(a=u&3,c|=Q3(n.charCodeAt(u))<<6*(3-a),a===3||i-u===1){for(o=0;o<3&&l<r;o++,l++)s[l]=c>>>(16>>>o&24)&255;c=0}return s}function wu(t){return t<26?t+65:t<52?t+71:t<62?t-4:t===62?43:t===63?47:65}function El(t){for(var e=2,n="",i=t.length,r=0,s=0;s<i;s++)e=s%3,r|=t[s]<<(16>>>e&24),(e===2||t.length-s===1)&&(n+=String.fromCodePoint(wu(r>>>18&63),wu(r>>>12&63),wu(r>>>6&63),wu(r&63)),r=0);return n.slice(0,n.length-2+e)+(e===2?"":e===1?"=":"==")}function pm(t){var r;const e=t.startsWith("0x")?t.slice(2):t,i=((r=(e.length%2===0?e:`0${e}}`).match(/.{2}/g))==null?void 0:r.map(s=>parseInt(s,16)))??[];return Uint8Array.from(i)}function gm(t){return t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),"")}var G3=32;function hf(t,e){let n=new Uint8Array(e),i=0;for(;t>0;)n[i]=Number(t%BigInt(256)),t=t/BigInt(256),i+=1;return n}var v1=t=>P0.encode(t),k1=t=>P0.decode(t),Y3=class{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),n=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let t=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let t=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(t){let e=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,e,t);return this.shift(t),n}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,e=new Uint8Array(this.dataView.buffer,t),{value:n,length:i}=eN(e);return this.shift(i),n}readVec(t){let e=this.readULEB(),n=[];for(let i=0;i<e;i++)n.push(t(this,i,e));return n}},X3=class{constructor({size:t=1024,maxSize:e,allocateSize:n=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=e||t,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const e=this.bytePosition+t;if(e>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(e>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${e}`);this.size=n;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return hf(BigInt(t),8).forEach(e=>this.write8(e)),this}write128(t){return hf(BigInt(t),16).forEach(e=>this.write8(e)),this}write256(t){return hf(BigInt(t),32).forEach(e=>this.write8(e)),this}writeULEB(t){return J3(t).forEach(e=>this.write8(e)),this}writeVec(t,e){return this.writeULEB(t.length),Array.from(t).forEach((n,i)=>e(this,n,i,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return tN(this.toBytes(),t)}};function J3(t){let e=[],n=0;if(t===0)return[0];for(;t>0;)e[n]=t&127,(t>>=7)&&(e[n]|=128),n+=1;return e}function eN(t){let e=0,n=0,i=0;for(;;){let r=t[i];if(i+=1,e|=(r&127)<<n,!(r&128))break;n+=7}return{value:e,length:i}}var wi=class Fc{constructor(e){if(this.types=new Map,this.counter=0,e instanceof Fc){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(Fc.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let n of Object.keys(e.types.structs))this.registerStructType(n,e.types.structs[n]);if(e.types&&e.types.enums)for(let n of Object.keys(e.types.enums))this.registerEnumType(n,e.types.enums[n]);if(e.types&&e.types.aliases)for(let n of Object.keys(e.types.aliases))this.registerAlias(n,e.types.aliases[n]);e.withPrimitives!==!1&&iN(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,n,i){if(typeof e=="string"||Array.isArray(e)){const{name:r,params:s}=this.parseTypeName(e);return this.getTypeInterface(r).encode(this,n,i,s)}if(typeof e=="object"){const r=this.tempKey();return new Fc(this).registerStructType(r,e).ser(r,n,i)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,n,i){if(typeof n=="string")if(i)n=nN(n,i);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:r,params:s}=this.parseTypeName(e);return this.getTypeInterface(r).decode(this,n,s)}if(typeof e=="object"){const r=new Fc(this),s=this.tempKey();return r.registerStructType(s,e).de(s,n,i)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,n){return this.types.set(e,n),this}registerType(e,n,i,r=()=>!0){const{name:s,params:o}=this.parseTypeName(e);return this.types.set(s,{encode(a,c,l,u){const d=o.reduce((h,f,g)=>Object.assign(h,{[f]:u[g]}),{});return this._encodeRaw.call(a,new X3(l),c,u,d)},decode(a,c,l){const u=o.reduce((d,h,f)=>Object.assign(d,{[h]:l[f]}),{});return this._decodeRaw.call(a,new Y3(c),l,u)},_encodeRaw(a,c,l,u){if(r(c))return n.call(this,a,c,l,u);throw new Error(`Validation failed for type ${s}, data: ${c}`)},_decodeRaw(a,c,l){return i.call(this,a,c,l)}}),this}registerAddressType(e,n,i="hex"){switch(i){case"base64":return this.registerType(e,function(s,o){return Oh(o).reduce((a,c)=>a.write8(c),s)},function(s){return El(s.readBytes(n))});case"hex":return this.registerType(e,function(s,o){return pm(o).reduce((a,c)=>a.write8(c),s)},function(s){return gm(s.readBytes(n))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:n,params:i}=this.parseTypeName(e);if(i.length>1)throw new Error("Vector can have only one type parameter; got "+n);return this.registerType(e,function(s,o,a,c){return s.writeVec(o,(l,u)=>{let d=a[0];if(!d)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:h,params:f}=this.parseTypeName(d);if(this.hasType(h))return this.getTypeInterface(h)._encodeRaw.call(this,l,u,f,c);if(!(h in c))throw new Error(`Unable to find a matching type definition for ${h} in vector; make sure you passed a generic`);let{name:g,params:p}=this.parseTypeName(c[h]);return this.getTypeInterface(g)._encodeRaw.call(this,l,u,p,c)})},function(s,o,a){return s.readVec(c=>{let l=o[0];if(!l)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:u,params:d}=this.parseTypeName(l);if(this.hasType(u))return this.getTypeInterface(u)._decodeRaw.call(this,c,d,a);if(!(u in a))throw new Error(`Unable to find a matching type definition for ${u} in vector; make sure you passed a generic`);let{name:h,params:f}=this.parseTypeName(a[u]);return this.getTypeInterface(h)._decodeRaw.call(this,c,f,a)})})}registerStructType(e,n){for(let a in n){let c=this.tempKey(),l=n[a];!Array.isArray(l)&&typeof l!="string"&&(n[a]=c,this.registerStructType(c,l))}let i=Object.freeze(n),r=Object.keys(i),{name:s,params:o}=this.parseTypeName(e);return this.registerType(e,function(c,l,u,d){if(!l||l.constructor!==Object)throw new Error(`Expected ${s} to be an Object, got: ${l}`);if(u.length!==o.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${o.length}, got: ${u.length}`);for(let h of r){if(!(h in l))throw new Error(`Struct ${s} requires field ${h}:${i[h]}`);const{name:f,params:g}=this.parseTypeName(i[h]);if(!o.includes(f))this.getTypeInterface(f)._encodeRaw.call(this,c,l[h],g,d);else{const p=o.indexOf(f);let{name:w,params:_}=this.parseTypeName(u[p]);if(this.hasType(w)){this.getTypeInterface(w)._encodeRaw.call(this,c,l[h],_,d);continue}if(!(w in d))throw new Error(`Unable to find a matching type definition for ${w} in ${s}; make sure you passed a generic`);let{name:k,params:T}=this.parseTypeName(d[w]);this.getTypeInterface(k)._encodeRaw.call(this,c,l[h],T,d)}}return c},function(c,l,u){if(l.length!==o.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${o.length}, got: ${l.length}`);let d={};for(let h of r){const{name:f,params:g}=this.parseTypeName(i[h]);if(!o.includes(f))d[h]=this.getTypeInterface(f)._decodeRaw.call(this,c,g,u);else{const p=o.indexOf(f);let{name:w,params:_}=this.parseTypeName(l[p]);if(this.hasType(w)){d[h]=this.getTypeInterface(w)._decodeRaw.call(this,c,_,u);continue}if(!(w in u))throw new Error(`Unable to find a matching type definition for ${w} in ${s}; make sure you passed a generic`);let{name:k,params:T}=this.parseTypeName(u[w]);d[h]=this.getTypeInterface(k)._decodeRaw.call(this,c,T,u)}}return d})}registerEnumType(e,n){for(let a in n){let c=this.tempKey(),l=n[a];l!==null&&!Array.isArray(l)&&typeof l!="string"&&(n[a]=c,this.registerStructType(c,l))}let i=Object.freeze(n),r=Object.keys(i),{name:s,params:o}=this.parseTypeName(e);return this.registerType(e,function(c,l,u,d){if(!l)throw new Error(`Unable to write enum "${s}", missing data.
Received: "${l}"`);if(typeof l!="object")throw new Error(`Incorrect data passed into enum "${s}", expected object with properties: "${r.join(" | ")}".
Received: "${JSON.stringify(l)}"`);let h=Object.keys(l)[0];if(h===void 0)throw new Error(`Empty object passed as invariant of the enum "${s}"`);let f=r.indexOf(h);if(f===-1)throw new Error(`Unknown invariant of the enum "${s}", allowed values: "${r.join(" | ")}"; received "${h}"`);let g=r[f],p=i[g];if(c.write8(f),p===null)return c;let w=o.indexOf(p),_=w===-1?p:u[w];{let{name:k,params:T}=this.parseTypeName(_);return this.getTypeInterface(k)._encodeRaw.call(this,c,l[h],T,d)}},function(c,l,u){let d=c.readULEB(),h=r[d],f=i[h];if(d===-1)throw new Error(`Decoding type mismatch, expected enum "${s}" invariant index, received "${d}"`);if(f===null)return{[h]:!0};let g=o.indexOf(f),p=g===-1?f:l[g];{let{name:w,params:_}=this.parseTypeName(p);return{[h]:this.getTypeInterface(w)._decodeRaw.call(this,c,_,u)}}})}getTypeInterface(e){let n=this.types.get(e);if(typeof n=="string"){let i=[];for(;typeof n=="string";){if(i.includes(n))throw new Error(`Recursive definition found: ${i.join(" -> ")} -> ${n}`);i.push(n),n=this.types.get(n)}}if(n===void 0)throw new Error(`Type ${e} is not registered`);return n}parseTypeName(e){if(Array.isArray(e)){let[c,...l]=e;return{name:c,params:l}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[n,i]=this.schema.genericSeparators||["<",">"],r=e.indexOf(n),s=Array.from(e).reverse().indexOf(i);if(r===-1&&s===-1)return{name:e,params:[]};if(r===-1||s===-1)throw new Error(`Unclosed generic in name '${e}'`);let o=e.slice(0,r),a=S1(e.slice(r+1,e.length-s-1),this.schema.genericSeparators);return{name:o,params:a}}};wi.U8="u8";wi.U16="u16";wi.U32="u32";wi.U64="u64";wi.U128="u128";wi.U256="u256";wi.BOOL="bool";wi.VECTOR="vector";wi.ADDRESS="address";wi.STRING="string";wi.HEX="hex-string";wi.BASE58="base58-string";wi.BASE64="base64-string";var ot=wi;function tN(t,e){switch(e){case"base58":return v1(t);case"base64":return El(t);case"hex":return gm(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function nN(t,e){switch(e){case"base58":return k1(t);case"base64":return Oh(t);case"hex":return pm(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function iN(t){t.registerType(ot.U8,function(e,n){return e.write8(n)},function(e){return e.read8()},e=>e<256),t.registerType(ot.U16,function(e,n){return e.write16(n)},function(e){return e.read16()},e=>e<65536),t.registerType(ot.U32,function(e,n){return e.write32(n)},function(e){return e.read32()},e=>e<=4294967296n),t.registerType(ot.U64,function(e,n){return e.write64(n)},function(e){return e.read64()}),t.registerType(ot.U128,function(e,n){return e.write128(n)},function(e){return e.read128()}),t.registerType(ot.U256,function(e,n){return e.write256(n)},function(e){return e.read256()}),t.registerType(ot.BOOL,function(e,n){return e.write8(n)},function(e){return e.read8().toString(10)==="1"}),t.registerType(ot.STRING,function(e,n){return e.writeVec(Array.from(n),(i,r)=>i.write8(r.charCodeAt(0)))},function(e){return e.readVec(n=>n.read8()).map(n=>String.fromCharCode(Number(n))).join("")},e=>!0),t.registerType(ot.HEX,function(e,n){return e.writeVec(Array.from(pm(n)),(i,r)=>i.write8(r))},function(e){let n=e.readVec(i=>i.read8());return gm(new Uint8Array(n))}),t.registerType(ot.BASE58,function(e,n){return e.writeVec(Array.from(k1(n)),(i,r)=>i.write8(r))},function(e){let n=e.readVec(i=>i.read8());return v1(new Uint8Array(n))}),t.registerType(ot.BASE64,function(e,n){return e.writeVec(Array.from(Oh(n)),(i,r)=>i.write8(r))},function(e){let n=e.readVec(i=>i.read8());return El(new Uint8Array(n))})}function rN(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:G3,addressEncoding:"hex"}}function S1(t,e=["<",">"]){const[n,i]=e,r=[];let s="",o=0;for(let a=0;a<t.length;a++){const c=t[a];if(c===n&&o++,c===i&&o--,o===0&&c===","){r.push(s.trim()),s="";continue}s+=c}return r.push(s.trim()),r}const sN=32;function mm(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(sN*2,"0")}`}function wm(t,e=!1){return mm(t,e)}I();I();I();I();I();I();const ia=bt([q({AddressOwner:I()}),q({ObjectOwner:I()}),q({Shared:q({initial_shared_version:it(I())})}),Pe("Immutable")]),oN=wl("SuiJsonValue",()=>!0),aN=bt([q({u32:I()}),q({u64:I()}),q({f64:I()})]);q({attributes:Yi(I(),it(aN)),featureFlags:Yi(I(),_t()),maxSupportedProtocolVersion:I(),minSupportedProtocolVersion:I(),protocolVersion:I()});bt([I(),Pe("package")]);const zr=q({digest:I(),objectId:I(),version:bt([tt(),I()])}),cN=q({payment:pe(zr),owner:I(),price:I(),budget:I()}),lN=us(zr,q({type:I(),owner:ia,previousTransaction:I()})),uN=Yi(I(),yl()),dN=Yi(I(),F0()),hN=q({type:I(),fields:uN,hasPublicTransfer:_t()}),lp=q({disassembled:dN}),fN=bt([us(hN,q({dataType:Pe("moveObject")})),us(lp,q({dataType:Pe("package")}))]),pN=q({type:I(),hasPublicTransfer:_t(),version:I(),bcsBytes:I()}),gN=q({id:I(),moduleMap:Yi(I(),I())}),mN=bt([us(pN,q({dataType:Pe("moveObject")})),us(gN,q({dataType:Pe("package")}))]);BigInt(1e9);I();const T1=q({code:I(),error:be(I()),object_id:be(I()),parent_object_id:be(I()),version:be(I()),digest:be(I())}),wN=q({data:it(be(Yi(I(),I()))),error:it(be(T1))}),yN=bt([wN,be(Yi(I(),I()))]),A1=q({objectId:I(),version:I(),digest:I(),type:it(be(I())),content:it(be(fN)),bcs:it(be(mN)),owner:it(be(ia)),previousTransaction:it(be(I())),storageRebate:it(be(I())),display:it(be(yN))});q({showType:it(be(_t())),showContent:it(be(_t())),showBcs:it(be(_t())),showOwner:it(be(_t())),showPreviousTransaction:it(be(_t())),showStorageRebate:it(be(_t())),showDisplay:it(be(_t()))});bt([Pe("Exists"),Pe("notExists"),Pe("Deleted")]);pe(lN);const _N=q({data:it(be(A1)),error:it(be(T1))});q({objectId:I(),atCheckpoint:be(tt())});q({data:pe(_N),nextCursor:be(it(I())),hasNextPage:_t()});bt([q({details:A1,status:Pe("VersionFound")}),q({details:I(),status:Pe("ObjectNotExists")}),q({details:zr,status:Pe("ObjectDeleted")}),q({details:Fn([I(),tt()]),status:Pe("VersionNotFound")}),q({details:q({asked_version:tt(),latest_version:tt(),object_id:I()}),status:Pe("VersionTooHigh")})]);const C1=q({txDigest:I(),eventSeq:I()}),I1=q({id:C1,packageId:I(),transactionModule:I(),sender:I(),type:I(),parsedJson:be(Yi(I(),yl())),bcs:be(I()),timestampMs:be(I())});q({data:pe(I1),nextCursor:it(C1),hasNextPage:_t()});I();const bN=q({epoch:I(),storage_charge:I(),computation_charge:I(),storage_rebate:I(),epoch_start_timestamp_ms:be(I())}),vN=q({epoch:I(),round:I(),commit_timestamp_ms:I()}),kN=q({objects:pe(I())}),or=bt([Pe("GasCoin"),q({Input:tt()}),q({Result:tt()}),q({NestedResult:Fn([tt(),tt()])})]),SN=q({arguments:be(pe(or)),type_arguments:be(pe(I())),package:I(),module:I(),function:I()}),TN=bt([q({MoveCall:SN}),q({TransferObjects:Fn([pe(or),or])}),q({SplitCoins:Fn([or,pe(or)])}),q({MergeCoins:Fn([or,pe(or)])}),q({Publish:bt([Fn([lp,pe(I())]),pe(I())])}),q({Upgrade:bt([Fn([lp,pe(I()),I(),or]),Fn([pe(I()),I(),or])])}),q({MakeMoveVec:Fn([it(I()),pe(or)])})]),AN=bt([q({type:Pe("pure"),valueType:it(I()),value:oN}),q({type:Pe("object"),objectType:Pe("immOrOwnedObject"),objectId:I(),version:I(),digest:I()}),q({type:Pe("object"),objectType:Pe("sharedObject"),objectId:I(),initialSharedVersion:I(),mutable:_t()})]),CN=q({transactions:pe(TN),inputs:pe(AN)}),IN=bt([us(bN,q({kind:Pe("ChangeEpoch")})),us(vN,q({kind:Pe("ConsensusCommitPrologue")})),us(kN,q({kind:Pe("Genesis")})),us(CN,q({kind:Pe("ProgrammableTransaction")}))]),E1=q({messageVersion:Pe("v1"),transaction:IN,sender:I(),gasData:cN});I();const EN=bt([I(),pe(I())]);q({epoch:I(),signature:EN,signers_map:pe(tt())});const xN=q({computationCost:I(),storageCost:I(),storageRebate:I(),nonRefundableStorageFee:I()}),MN=bt([Pe("success"),Pe("failure")]),NN=q({status:MN,error:be(I())}),yu=q({owner:ia,reference:zr}),ON=q({objectId:I(),sequenceNumber:I()}),ym=q({messageVersion:Pe("v1"),status:NN,executedEpoch:I(),modifiedAtVersions:be(pe(ON)),gasUsed:xN,sharedObjects:be(pe(zr)),transactionDigest:I(),created:be(pe(yu)),mutated:be(pe(yu)),unwrapped:be(pe(yu)),deleted:be(pe(zr)),unwrappedThenDeleted:be(pe(zr)),wrapped:be(pe(zr)),gasObject:yu,eventsDigest:it(be(I())),dependencies:be(pe(I()))}),_m=pe(I1),DN=Fn([pe(tt()),I()]),jN=Fn([or,pe(tt()),I()]),RN=q({mutableReferenceOutputs:be(pe(jN)),returnValues:be(pe(DN))});q({effects:ym,events:_m,results:be(pe(RN)),error:be(I())});I();const BN=q({data:E1,txSignatures:pe(I())}),PN=q({type:Pe("published"),packageId:I(),version:I(),digest:I(),modules:pe(I())}),FN=q({type:Pe("transferred"),sender:I(),recipient:ia,objectType:I(),objectId:I(),version:I(),digest:I()}),UN=q({type:Pe("mutated"),sender:I(),owner:ia,objectType:I(),objectId:I(),version:I(),previousVersion:I(),digest:I()}),LN=q({type:Pe("deleted"),sender:I(),objectType:I(),objectId:I(),version:I()}),$N=q({type:Pe("wrapped"),sender:I(),objectType:I(),objectId:I(),version:I()}),zN=q({type:Pe("created"),sender:I(),owner:ia,objectType:I(),objectId:I(),version:I(),digest:I()}),x1=bt([PN,FN,UN,LN,$N,zN]),M1=q({owner:ia,coinType:I(),amount:I()}),qN=q({digest:I(),transaction:be(BN),effects:be(ym),events:be(_m),timestampMs:be(I()),checkpoint:be(I()),confirmedLocalExecution:be(_t()),objectChanges:be(pe(x1)),balanceChanges:be(pe(M1)),errors:be(pe(I()))});q({showInput:be(_t()),showEffects:be(_t()),showEvents:be(_t()),showObjectChanges:be(_t()),showBalanceChanges:be(_t())});q({data:pe(qN),nextCursor:it(I()),hasNextPage:_t()});q({effects:ym,events:_m,objectChanges:pe(x1),balanceChanges:pe(M1),input:be(E1)});const VN=bt([I(),q({Object:I()})]);pe(VN);const WN=q({address:I(),name:I()}),KN=bt([Pe("Private"),Pe("Public"),Pe("Friend")]),bm=q({abilities:pe(I())}),ZN=q({constraints:bm,isPhantom:_t()}),HN=q({TypeParameter:tt()}),ff=Fn([q({module:I(),package:I(),function:I()}),I()]);q({rank3Days:pe(ff),rank7Days:pe(ff),rank30Days:pe(ff)});function N1(t){if(!t)return!1;if(typeof t=="string"||ou(t,HN)||O1(t))return!0;if(typeof t!="object")return!1;const e=t;return!!(ou(e.Reference,Ka)||ou(e.MutableReference,Ka)||ou(e.Vector,Ka))}const Ka=wl("SuiMoveNormalizedType",N1);function O1(t){if(!t||typeof t!="object")return!1;const e=t;if(!e.Struct||typeof e.Struct!="object")return!1;const n=e.Struct;return!(typeof n.address!="string"||typeof n.module!="string"||typeof n.name!="string"||!Array.isArray(n.typeArguments)||!n.typeArguments.every(i=>N1(i)))}wl("SuiMoveNormalizedStructType",O1);const QN=q({visibility:KN,isEntry:_t(),typeParameters:pe(bm),parameters:pe(Ka),return:pe(Ka)}),GN=q({name:I(),type:Ka}),YN=q({abilities:bm,typeParameters:pe(ZN),fields:pe(GN)}),XN=q({fileFormatVersion:tt(),address:I(),name:I(),friends:pe(WN),structs:Yi(I(),YN),exposedFunctions:Yi(I(),QN)});Yi(I(),XN);const JN=q({apy:tt(),address:I()});q({epoch:I(),apys:pe(JN)});q({value:tt()});const eO=q({stakedSuiId:I(),stakeRequestEpoch:I(),stakeActiveEpoch:I(),principal:I(),status:bt([Pe("Active"),Pe("Pending"),Pe("Unstaked")]),estimatedReward:be(I())});q({validatorAddress:I(),stakingPool:I(),stakes:pe(eO)});const tO=q({balance:q({value:tt()}),distribution_counter:tt(),current_distribution_amount:tt(),stake_subsidy_period_length:tt(),stake_subsidy_decrease_rate:tt()});q({type:I(),fields:tO});q({value:tt()});const nO=q({id:I(),size:tt(),head:q({vec:pe()}),tail:q({vec:pe()})});q({id:I(),size:tt()});q({type:I(),fields:nO});const iO=q({exchangeRates:q({id:I(),size:tt()}),id:I(),pendingStake:tt(),pendingPoolTokenWithdraw:tt(),pendingTotalSuiWithdraw:tt(),poolTokenBalance:tt(),rewardsPool:q({value:tt()}),activationEpoch:q({vec:pe()}),deactivationEpoch:q({vec:pe()}),suiBalance:tt()});q({type:I(),fields:iO});const rO=pe(Fn([I(),I()]));q({epoch:I(),validators:rO});const D1=q({suiAddress:I(),protocolPubkeyBytes:I(),networkPubkeyBytes:I(),workerPubkeyBytes:I(),proofOfPossessionBytes:I(),operationCapId:I(),name:I(),description:I(),imageUrl:I(),projectUrl:I(),p2pAddress:I(),netAddress:I(),primaryAddress:I(),workerAddress:I(),nextEpochProtocolPubkeyBytes:it(I()),nextEpochProofOfPossession:it(I()),nextEpochNetworkPubkeyBytes:it(I()),nextEpochWorkerPubkeyBytes:it(I()),nextEpochNetAddress:it(I()),nextEpochP2pAddress:it(I()),nextEpochPrimaryAddress:it(I()),nextEpochWorkerAddress:it(I()),votingPower:I(),gasPrice:I(),commissionRate:I(),nextEpochStake:I(),nextEpochGasPrice:I(),nextEpochCommissionRate:I(),stakingPoolId:I(),stakingPoolActivationEpoch:it(I()),stakingPoolDeactivationEpoch:it(I()),stakingPoolSuiBalance:I(),rewardsPool:I(),poolTokenBalance:I(),pendingStake:I(),pendingPoolTokenWithdraw:I(),pendingTotalSuiWithdraw:I(),exchangeRatesId:I(),exchangeRatesSize:I()});q({epoch:I(),protocolVersion:I(),systemStateVersion:I(),storageFundTotalObjectStorageRebates:I(),storageFundNonRefundableBalance:I(),referenceGasPrice:I(),safeMode:_t(),safeModeStorageRewards:I(),safeModeComputationRewards:I(),safeModeStorageRebates:I(),safeModeNonRefundableStorageFee:I(),epochStartTimestampMs:I(),epochDurationMs:I(),stakeSubsidyStartEpoch:I(),maxValidatorCount:I(),minValidatorJoiningStake:I(),validatorLowStakeThreshold:I(),validatorVeryLowStakeThreshold:I(),validatorLowStakeGracePeriod:I(),stakeSubsidyBalance:I(),stakeSubsidyDistributionCounter:I(),stakeSubsidyCurrentDistributionAmount:I(),stakeSubsidyPeriodLength:I(),stakeSubsidyDecreaseRate:tt(),totalStake:I(),activeValidators:pe(D1),pendingActiveValidatorsId:I(),pendingActiveValidatorsSize:I(),pendingRemovals:pe(I()),stakingPoolMappingsId:I(),stakingPoolMappingsSize:I(),inactivePoolsId:I(),inactivePoolsSize:I(),validatorCandidatesId:I(),validatorCandidatesSize:I(),atRiskValidators:pe(Fn([I(),I()])),validatorReportRecords:pe(Fn([I(),pe(I())]))});const sO=q({coinType:I(),coinObjectId:I(),version:I(),digest:I(),balance:I(),previousTransaction:I()});q({data:pe(sO),nextCursor:it(I()),hasNextPage:_t()});q({coinType:I(),coinObjectCount:tt(),totalBalance:I(),lockedBalance:q({epochId:be(tt()),number:be(tt())})});q({value:I()});const oO=q({lastCheckpointId:I(),epochEndTimestamp:I(),protocolVersion:I(),referenceGasPrice:I(),totalStake:I(),storageFundReinvestment:I(),storageCharge:I(),storageRebate:I(),storageFundBalance:I(),stakeSubsidyAmount:I(),totalGasFees:I(),totalStakeRewardsDistributed:I(),leftoverStorageFundInflow:I()}),aO=q({epoch:I(),validators:pe(D1),epochTotalTransactions:I(),firstCheckpointId:I(),epochStartTimestamp:I(),endOfEpochInfo:it(oO),referenceGasPrice:it(tt())});q({data:pe(aO),nextCursor:it(I()),hasNextPage:_t()});q({data:pe(I()),hasNextPage:_t(),nextCursor:it(I())});const cO=bt([Pe("DynamicField"),Pe("DynamicObject")]),lO=q({type:I(),value:yl()}),uO=q({name:lO,bcsName:I(),type:cO,objectType:I(),objectId:I(),version:tt(),digest:I()});q({data:pe(uO),nextCursor:it(I()),hasNextPage:_t()});const dO=q({computationCost:I(),storageCost:I(),storageRebate:I(),nonRefundableStorageFee:I()});I();I();q({digest:pe(tt())});const j1=yl();I();const hO=q({nextEpochCommittee:pe(Fn([I(),I()])),nextEpochProtocolVersion:I(),epochCommitments:pe(j1)});q({transaction:I(),effects:I()});const fO=q({epoch:I(),sequenceNumber:I(),digest:I(),networkTotalTransactions:I(),previousDigest:be(I()),epochRollingGasCostSummary:dO,timestampMs:I(),endOfEpochData:be(hO),validatorSignature:I(),transactions:pe(I()),checkpointCommitments:pe(j1)});q({data:pe(fO),nextCursor:it(I()),hasNextPage:_t()});q({currentTps:tt(),tps30Days:tt(),currentCheckpoint:I(),currentEpoch:I(),totalAddresses:I(),totalObjects:I(),totalPackages:I()});const pO=q({checkpoint:tt(),epoch:tt(),timestampMs:tt(),cumulativeAddresses:tt(),cumulativeActiveAddresses:tt(),dailyActiveAddresses:tt()});pe(pO);wm("0x6");q({decimals:tt(),name:I(),symbol:I(),description:I(),iconUrl:it(I()),id:it(I())});const gO=/^vector<(.+)>$/,mO=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Fs{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const i=e.match(gO);if(i)return{vector:Fs.parseFromStr(i[1],n)};const r=e.match(mO);if(r)return{struct:{address:n?mm(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:Fs.parseStructTypeArgs(r[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return S1(e).map(i=>Fs.parseFromStr(i,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Fs.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,i=n.typeParams.map(Fs.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}}const ua="vector",wO={kind:"TransactionKind",sender:ot.ADDRESS,gasData:"GasData",expiration:"TransactionExpiration"},yO={enums:{"Option<T>":{None:null,Some:"T"},ObjectArg:{ImmOrOwned:"SuiObjectRef",Shared:"SharedObjectRef"},CallArg:{Pure:[ua,ot.U8],Object:"ObjectArg",ObjVec:[ua,"ObjectArg"]},TypeTag:{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:"TypeTag",struct:"StructTag",u16:null,u32:null,u256:null},TransactionKind:{ProgrammableTransaction:"ProgrammableTransaction",ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null},TransactionExpiration:{None:null,Epoch:"unsafe_u64"},TransactionData:{V1:"TransactionDataV1"}},structs:{SuiObjectRef:{objectId:ot.ADDRESS,version:ot.U64,digest:"ObjectDigest"},SharedObjectRef:{objectId:ot.ADDRESS,initialSharedVersion:ot.U64,mutable:ot.BOOL},StructTag:{address:ot.ADDRESS,module:ot.STRING,name:ot.STRING,typeParams:[ua,"TypeTag"]},GasData:{payment:[ua,"SuiObjectRef"],owner:ot.ADDRESS,price:ot.U64,budget:ot.U64},SenderSignedData:{data:"TransactionData",txSignatures:[ua,[ua,ot.U8]]},TransactionDataV1:wO},aliases:{ObjectDigest:ot.BASE58}},vm=new ot({...rN(),types:yO});vm.registerType("utf8string",(t,e)=>{const n=Array.from(new TextEncoder().encode(e));return t.writeVec(n,(i,r)=>i.write8(r))},t=>{let e=t.readVec(n=>n.read8());return new TextDecoder().decode(new Uint8Array(e))});vm.registerType("unsafe_u64",(t,e)=>t.write64(e),t=>Number.parseInt(t.read64(),10));const R1="Argument",Bn="vector",_O="Option",bO="CallArg",zw="TypeTag",vO="ProgrammableTransaction",up="ProgrammableMoveCall",B1="Transaction",qw="CompressedSignature",Vw="PublicKey",Ww="MultiSigPublicKey",Kw="MultiSigPkMap",kO="MultiSig",km="EnumKind",SO=[km,B1],Jr=[km,R1],P1="SimpleProgrammableMoveCall",Go=new ot(vm);Sm(Go,"FixedArray[64]",64);Sm(Go,"FixedArray[33]",33);Sm(Go,"FixedArray[32]",32);Go.registerStructType(vO,{inputs:[Bn,bO],transactions:[Bn,SO]}).registerEnumType(R1,{GasCoin:null,Input:{index:ot.U16},Result:{index:ot.U16},NestedResult:{index:ot.U16,resultIndex:ot.U16}}).registerStructType(up,{package:ot.ADDRESS,module:ot.STRING,function:ot.STRING,type_arguments:[Bn,zw],arguments:[Bn,Jr]}).registerEnumType(B1,{MoveCall:P1,TransferObjects:{objects:[Bn,Jr],address:Jr},SplitCoins:{coin:Jr,amounts:[Bn,Jr]},MergeCoins:{destination:Jr,sources:[Bn,Jr]},Publish:{modules:[Bn,[Bn,ot.U8]],dependencies:[Bn,ot.ADDRESS]},MakeMoveVec:{type:[_O,zw],objects:[Bn,Jr]},Upgrade:{modules:[Bn,[Bn,ot.U8]],dependencies:[Bn,ot.ADDRESS],packageId:ot.ADDRESS,ticket:Jr}}).registerEnumType(qw,{ED25519:["FixedArray[64]","u8"],Secp256k1:["FixedArray[64]","u8"],Secp256r1:["FixedArray[64]","u8"]}).registerEnumType(Vw,{ED25519:["FixedArray[32]","u8"],Secp256k1:["FixedArray[33]","u8"],Secp256r1:["FixedArray[33]","u8"]}).registerStructType(Kw,{pubKey:Vw,weight:ot.U8}).registerStructType(Ww,{pk_map:[Bn,Kw],threshold:ot.U16}).registerStructType(kO,{sigs:[Bn,qw],bitmap:ot.U16,multisig_pk:Ww});Go.registerType([km,"T"],function(e,n,i,r){const o={[n.kind]:n},[a]=i;return this.getTypeInterface(a)._encodeRaw.call(this,e,o,i,r)},function(e,n,i){const[r]=n,s=this.getTypeInterface(r)._decodeRaw.call(this,e,n,i),o=Object.keys(s)[0];return{kind:o,...s[o]}},t=>{if(typeof t!="object"&&!("kind"in t))throw new Error(`EnumKind: Missing property "kind" in the input ${JSON.stringify(t)}`);return!0});Go.registerType(P1,function(e,n,i,r){const[s,o,a]=n.target.split("::"),c=n.typeArguments.map(l=>Fs.parseFromStr(l,!0));return this.getTypeInterface(up)._encodeRaw.call(this,e,{package:mm(s),module:o,function:a,type_arguments:c,arguments:n.arguments},i,r)},function(e,n,i){let r=Go.getTypeInterface(up)._decodeRaw.call(this,e,n,i);return{target:[r.package,r.module,r.function].join("::"),arguments:r.arguments,typeArguments:r.type_arguments.map(Fs.tagToString)}},t=>t.target.split("::").length===3);function Sm(t,e,n){t.registerType(e,function(r,s,o,a){if(s.length!==n)throw new Error(`Expected fixed array of length ${n}, got ${s.length}`);if(o.length!==1)throw new Error(`Expected one type parameter in a fixed array, got ${o.length}`);let[c]=typeof o[0]=="string"?[o[0],[]]:o[0];for(let l of s)this.getTypeInterface(c)._encodeRaw.call(this,r,l,o,a);return r},function(r,s,o){if(s.length!==1)throw new Error(`Expected one type parameter in a fixed array, got ${s.length}`);let a=[],[c]=typeof s[0]=="string"?[s[0],[]]:s[0];for(let l=0;l<n;l++)a.push(this.getTypeInterface(c)._decodeRaw.call(this,r,s,o));return a})}const TO=bt([q({ImmOrOwned:zr}),q({Shared:q({objectId:I(),initialSharedVersion:bt([fs(),I()]),mutable:_t()})})]),AO=q({Pure:pe(fs())}),CO=q({Object:TO});bt([AO,CO]);const F1=Symbol("transaction-argument-type"),IO=t=>bt([q({None:bt([Pe(!0),Pe(null)])}),q({Some:t})]),U1=q({kind:Pe("Input"),index:fs(),value:be(yl()),type:be(bt([Pe("pure"),Pe("object")]))}),Tm=[U1,q({kind:Pe("GasCoin")}),q({kind:Pe("Result"),index:fs()}),q({kind:Pe("NestedResult"),index:fs(),resultIndex:fs()})],EO=bt([...Tm]),Yo=bt([...Tm]);Yo[F1]={kind:"object"};const L1=t=>{const e=bt([...Tm]);return e[F1]={kind:"pure",type:t},e},xO=q({kind:Pe("MoveCall"),target:wl("target",I().validator),typeArguments:pe(I()),arguments:pe(EO)}),MO=q({kind:Pe("TransferObjects"),objects:pe(Yo),address:L1(ot.ADDRESS)}),NO=q({kind:Pe("SplitCoins"),coin:Yo,amounts:pe(L1("u64"))}),OO=q({kind:Pe("MergeCoins"),destination:Yo,sources:pe(Yo)}),DO=q({kind:Pe("MakeMoveVec"),type:be(IO(Yi(I(),F0()))),objects:pe(Yo)}),jO=q({kind:Pe("Publish"),modules:pe(pe(fs())),dependencies:pe(I())}),RO=q({kind:Pe("Upgrade"),modules:pe(pe(fs())),dependencies:pe(I()),packageId:I(),ticket:Yo}),BO=[xO,MO,NO,OO,jO,RO,DO],PO=bt([...BO]),FO=be(it(bt([q({Epoch:fs()}),q({None:bt([Pe(!0),Pe(null)])})]))),Zw=wl("StringEncodedBigint",t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}}),UO=q({budget:be(Zw),price:be(Zw),payment:be(pe(zr)),owner:be(I())});q({version:Pe(1),sender:be(I()),expiration:FO,gasConfig:UO,inputs:pe(U1),transactions:pe(PO)});BigInt(1e9);wm("0x6");wm("0x5");var LO=Object.defineProperty,$O=(t,e,n)=>e in t?LO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tr=(t,e,n)=>($O(t,typeof e!="symbol"?e+"":e,n),n),$1=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},ir=(t,e,n)=>($1(t,e,"read from private field"),n?n.call(t):e.get(t)),es=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Pi=(t,e,n,i)=>($1(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Am=q({address:I(),publicKey:I(),chains:pe(I()),features:pe(I()),label:be(I()),icon:be(I())});function Cm(t){return{address:t.address,publicKey:El(t.publicKey),features:[...t.features],chains:[...t.chains],label:t.label,icon:t.icon}}function zO(t){return{address:t.address,publicKey:Oh(t.publicKey),chains:t.chains.map(e=>e),features:t.features.map(e=>e),label:t.label,icon:t.icon}}q({message:I(),account:Am});function qO(t){return{message:El(t.message),account:Cm(t.account)}}q({transactionBlock:I(),account:Am,chain:I()});function VO(t){return{transactionBlock:t.transactionBlock.serialize(),account:Cm(t.account),chain:t.chain}}var WO=q({showBalanceChanges:be(_t()),showEffects:be(_t()),showEvents:be(_t()),showInput:be(_t()),showObjectChanges:be(_t()),showRawInput:be(_t())});q({transactionBlock:I(),account:Am,chain:I(),requestType:be(I()),options:be(WO)});function KO(t){return{transactionBlock:t.transactionBlock.serialize(),account:Cm(t.account),chain:t.chain,requestType:t.requestType,options:t.options}}q({network:bt([Pe("mainnet"),Pe("testnet"),Pe("devnet"),Pe("localnet")]),url:I()});var ZO="sui:devnet",HO="sui:testnet",QO="sui:localnet",GO="sui:mainnet",YO=[ZO,HO,QO,GO],XO="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGlkPSJMYXllcl8xIiB4PSIwIiB5PSIwIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzMTguNiAzMTguNiI+CiAgPHN0eWxlPgogICAgLnN0MSwuc3Q2e2ZpbGw6I2U0NzYxYjtzdHJva2U6I2U0NzYxYjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmR9LnN0NntmaWxsOiNmNjg1MWI7c3Ryb2tlOiNmNjg1MWJ9CiAgPC9zdHlsZT4KICA8cGF0aCBmaWxsPSIjZTI3NjFiIiBzdHJva2U9IiNlMjc2MWIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTI3NC4xIDM1LjUtOTkuNSA3My45TDE5MyA2NS44eiIvPgogIDxwYXRoIGQ9Im00NC40IDM1LjUgOTguNyA3NC42LTE3LjUtNDQuM3ptMTkzLjkgMTcxLjMtMjYuNSA0MC42IDU2LjcgMTUuNiAxNi4zLTU1LjN6bS0yMDQuNC45TDUwLjEgMjYzbDU2LjctMTUuNi0yNi41LTQwLjZ6IiBjbGFzcz0ic3QxIi8+CiAgPHBhdGggZD0ibTEwMy42IDEzOC4yLTE1LjggMjMuOSA1Ni4zIDIuNS0yLTYwLjV6bTExMS4zIDAtMzktMzQuOC0xLjMgNjEuMiA1Ni4yLTIuNXpNMTA2LjggMjQ3LjRsMzMuOC0xNi41LTI5LjItMjIuOHptNzEuMS0xNi41IDMzLjkgMTYuNS00LjctMzkuM3oiIGNsYXNzPSJzdDEiLz4KICA8cGF0aCBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTIxMS44IDI0Ny40LTMzLjktMTYuNSAyLjcgMjIuMS0uMyA5LjN6bS0xMDUgMCAzMS41IDE0LjktLjItOS4zIDIuNS0yMi4xeiIvPgogIDxwYXRoIGZpbGw9IiMyMzM0NDciIHN0cm9rZT0iIzIzMzQ0NyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJtMTM4LjggMTkzLjUtMjguMi04LjMgMTkuOS05LjF6bTQwLjkgMCA4LjMtMTcuNCAyMCA5LjF6Ii8+CiAgPHBhdGggZmlsbD0iI2NkNjExNiIgc3Ryb2tlPSIjY2Q2MTE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Im0xMDYuOCAyNDcuNCA0LjgtNDAuNi0zMS4zLjl6TTIwNyAyMDYuOGw0LjggNDAuNiAyNi41LTM5Ljd6bTIzLjgtNDQuNy01Ni4yIDIuNSA1LjIgMjguOSA4LjMtMTcuNCAyMCA5LjF6bS0xMjAuMiAyMy4xIDIwLTkuMSA4LjIgMTcuNCA1LjMtMjguOS01Ni4zLTIuNXoiLz4KICA8cGF0aCBmaWxsPSIjZTQ3NTFmIiBzdHJva2U9IiNlNDc1MWYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTg3LjggMTYyLjEgMjMuNiA0Ni0uOC0yMi45em0xMjAuMyAyMy4xLTEgMjIuOSAyMy43LTQ2em0tNjQtMjAuNi01LjMgMjguOSA2LjYgMzQuMSAxLjUtNDQuOXptMzAuNSAwLTIuNyAxOCAxLjIgNDUgNi43LTM0LjF6Ii8+CiAgPHBhdGggZD0ibTE3OS44IDE5My41LTYuNyAzNC4xIDQuOCAzLjMgMjkuMi0yMi44IDEtMjIuOXptLTY5LjItOC4zLjggMjIuOSAyOS4yIDIyLjggNC44LTMuMy02LjYtMzQuMXoiIGNsYXNzPSJzdDYiLz4KICA8cGF0aCBmaWxsPSIjYzBhZDllIiBzdHJva2U9IiNjMGFkOWUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTE4MC4zIDI2Mi4zLjMtOS4zLTIuNS0yLjJoLTM3LjdsLTIuMyAyLjIuMiA5LjMtMzEuNS0xNC45IDExIDkgMjIuMyAxNS41aDM4LjNsMjIuNC0xNS41IDExLTl6Ii8+CiAgPHBhdGggZmlsbD0iIzE2MTYxNiIgc3Ryb2tlPSIjMTYxNjE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Im0xNzcuOSAyMzAuOS00LjgtMy4zaC0yNy43bC00LjggMy4zLTIuNSAyMi4xIDIuMy0yLjJoMzcuN2wyLjUgMi4yeiIvPgogIDxwYXRoIGZpbGw9IiM3NjNkMTYiIHN0cm9rZT0iIzc2M2QxNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJtMjc4LjMgMTE0LjIgOC41LTQwLjgtMTIuNy0zNy45LTk2LjIgNzEuNCAzNyAzMS4zIDUyLjMgMTUuMyAxMS42LTEzLjUtNS0zLjYgOC03LjMtNi4yLTQuOCA4LTYuMXpNMzEuOCA3My40bDguNSA0MC44LTUuNCA0IDggNi4xLTYuMSA0LjggOCA3LjMtNSAzLjYgMTEuNSAxMy41IDUyLjMtMTUuMyAzNy0zMS4zLTk2LjItNzEuNHoiLz4KICA8cGF0aCBkPSJtMjY3LjIgMTUzLjUtNTIuMy0xNS4zIDE1LjkgMjMuOS0yMy43IDQ2IDMxLjItLjRoNDYuNXptLTE2My42LTE1LjMtNTIuMyAxNS4zLTE3LjQgNTQuMmg0Ni40bDMxLjEuNC0yMy42LTQ2em03MSAyNi40IDMuMy01Ny43IDE1LjItNDEuMWgtNjcuNWwxNSA0MS4xIDMuNSA1Ny43IDEuMiAxOC4yLjEgNDQuOGgyNy43bC4yLTQ0Ljh6IiBjbGFzcz0ic3Q2Ii8+Cjwvc3ZnPg==",z1=class vo extends Error{constructor(e){super(`${vo.type}: ${e}}`),Tr(this,"type",vo.type)}static asSimpleError(e){return new Error(`${vo.type}: ${e}`)}static isSimpleErrorMessage(e){return e.startsWith(vo.type+": ")}static fromSimpleErrorMessage(e){return new vo(e.slice(vo.type.length+2))}};Tr(z1,"type","INVALID_REQUEST_PARAMS");var Hw=z1,q1=class Uc extends Error{constructor(){super(Uc.type),Tr(this,"type",Uc.type)}static asSimpleError(){return new Error(Uc.type)}static isSimpleErrorMessage(e){return e===Uc.type}};Tr(q1,"type","USER_REJECTION");var dp=q1,V1=class ko extends Error{constructor(e){super(`${ko.type}: ${e}`),Tr(this,"type",ko.type)}static asSimpleError(e){return new Error(`${ko.type}: ${e}`)}static isSimpleErrorMessage(e){return e.startsWith(ko.type+": ")}static fromSimpleErrorMessage(e){return new ko(e.slice(ko.type.length+2))}};Tr(V1,"type","INVALID_REQUEST_METHOD");var Qw=V1,W1=class So extends Error{constructor(e){let n=So.type;e&&(n+=": "+e),super(n),Tr(this,"type",So.type)}static asSimpleError(e){let n=So.type;return e&&(n+=": "+e),new Error(n)}static isSimpleErrorMessage(e){return e.startsWith(So.type)}static fromSimpleErrorMessage(e){return new So(e.slice(So.type.length+2))}};Tr(W1,"type","DRY_RUN_FAILED");var Gw=W1,K1=class Xu extends Error{constructor(){super(Xu.type),Tr(this,"type",dp.type)}static asSimpleError(){return new Error(Xu.type)}static isSimpleErrorMessage(e){return e===Xu.type}};Tr(K1,"type","NON_ADMIN_ORIGIN");var Yw=K1;function JO(t){return typeof t=="object"&&t!==null&&"message"in t}function Im(t){return JO(t)?Hw.isSimpleErrorMessage(t.message)?Hw.fromSimpleErrorMessage(t.message):dp.isSimpleErrorMessage(t.message)?new dp:Qw.isSimpleErrorMessage(t.message)?Qw.fromSimpleErrorMessage(t.message):Gw.isSimpleErrorMessage(t.message)?Gw.fromSimpleErrorMessage(t.message):Yw.isSimpleErrorMessage(t.message)?new Yw:t:t}var xl="npm:@kunalabs-io/sui-metamask-snap",eD="^1.0.0";function tD(){const t=Kg();for(const n of t.get())if(n.name===Xw.NAME)return console.warn("SuiSnapWallet already registered"),n;const e=new Xw;return t.register(e),e}async function nD(t){return(await t.request({method:"wallet_invokeSnap",params:{snapId:xl,request:{method:"getAccounts"}}})).map(n=>new Mh(zO(n)))}async function Z1(t,e){const n=qO(e);try{return await t.request({method:"wallet_invokeSnap",params:{snapId:xl,request:{method:"signPersonalMessage",params:{...n}}}})}catch(i){throw Im(i)}}async function iD(t,e){const n=await Z1(t,e);return{messageBytes:n.bytes,signature:n.signature}}async function rD(t,e){const n=VO(e);try{return await t.request({method:"wallet_invokeSnap",params:{snapId:xl,request:{method:"signTransactionBlock",params:{...n}}}})}catch(i){throw Im(i)}}async function sD(t,e){const n=KO(e);try{return await t.request({method:"wallet_invokeSnap",params:{snapId:xl,request:{method:"signAndExecuteTransactionBlock",params:{...n}}}})}catch(i){throw Im(i)}}async function oD(){const t=window.ethereum;if(!t)return{available:!1,supportsSnaps:!1,suiSnapInstalled:!1};if(!t.isMetaMask)return{available:!1,suiSnapInstalled:!1,supportsSnaps:!1};try{const e=await t.request({method:"web3_clientVersion"}),n=await t.request({method:"wallet_getSnaps"}),i=!!n&&"npm:@kunalabs-io/sui-metamask-snap"in n;return{available:!0,version:e,supportsSnaps:!0,suiSnapInstalled:i}}catch(e){return console.warn(e),{available:!0,supportsSnaps:!1,suiSnapInstalled:!1}}}var ts,Ns,Aa,hp,fp,pp,gp,mp,wp,H1=class Q1{constructor(){es(this,ts,void 0),es(this,Ns,void 0),es(this,Aa,null),es(this,hp,async()=>{if(ir(this,ts))throw new Error("Already connecting");Pi(this,ts,!0),Pi(this,Ns,!1);try{const e=window.ethereum;if(!(await oD()).available)throw new Error("MetaMask not detected!");return await e.request({method:"wallet_requestSnaps",params:{[xl]:{version:eD}}}),Pi(this,Aa,await nD(e)),Pi(this,ts,!1),Pi(this,Ns,!0),{accounts:this.accounts}}catch(e){throw Pi(this,ts,!1),Pi(this,Ns,!1),e}}),es(this,fp,async()=>{Pi(this,ts,!1),Pi(this,Ns,!1),Pi(this,Aa,null)}),es(this,pp,async e=>Z1(window.ethereum,e)),es(this,gp,async e=>iD(window.ethereum,e)),es(this,mp,async e=>rD(window.ethereum,e)),es(this,wp,async e=>sD(window.ethereum,e)),Pi(this,ts,!1),Pi(this,Ns,!1)}get version(){return"1.0.0"}get name(){return Q1.NAME}get icon(){return XO}get chains(){return YO}get connecting(){return ir(this,ts)}get accounts(){return ir(this,Ns)&&ir(this,Aa)?ir(this,Aa):[]}get features(){return{"standard:connect":{version:"1.0.0",connect:ir(this,hp)},"standard:disconnect":{version:"1.0.0",disconnect:ir(this,fp)},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:ir(this,pp)},"sui:signMessage":{version:"1.0.0",signMessage:ir(this,gp)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:ir(this,mp)},"sui:signAndExecuteTransactionBlock":{version:"1.0.0",signAndExecuteTransactionBlock:ir(this,wp)},"standard:events":{version:"1.0.0",on:()=>()=>{}}}}};ts=new WeakMap;Ns=new WeakMap;Aa=new WeakMap;hp=new WeakMap;fp=new WeakMap;pp=new WeakMap;gp=new WeakMap;mp=new WeakMap;wp=new WeakMap;Tr(H1,"NAME","Sui MetaMask Snap");var Xw=H1;function Kd(){const t=Ni(),e=Ie(()=>t),n=on(),i=Ie(()=>n),r=Ie(()=>i.value.chainName?qc(i.value.chainName):{}),s=[new H3({features:void 0})];console.log("suiAdapters####",s);const o=l3({adapters:s}),a=Ie(()=>{console.log("0417###suiWalletState####suiWalletKitRef####",o);const w=o.subscribe;return console.log("0417####suiWalletState###test####",w),o.getState()}),c=Ie(()=>a.value.wallets||[]),l={Martian:zC,Petra:LC,Fewcha:aI,Pontem:lI,Spika:pI,Blocto:vM,Coin98:mI,OKX:SM,TokenPocket:AM,Bitget:IM,Rise:xM,OpenBlock:NM,Trust:PC,MSafe:new t3("https://app.m-safe.io"),Spacecy:i3,Nightly:hI};Ie(()=>i.value.chainName!=="Aptos"?c:l);const u={wallet:{}},d=_e(!1),h=_e(""),{$notify:f}=gl();return{account:h,isConnected:d,currentWallet:u,connect:async(w,_,k=i.value.chainName,T="",R="")=>{var $,Y,z;t.setSwitchWallet(!1);const E=k!=="Aptos"?c.value:l;let D=w;console.log("0329###wallet connet###wallets###",E),console.log("0329###wallet connet###walletName###",D);let B=null;if(k==="Aptos")B=D!=="MSafe"?new E[D]:E[D];else{if(console.log("1030###walletName###",D),D=="Sui MetaMask Snap"){const H=await tD();console.log("1030###test###",H)}D==="Sui Wallet"&&_==="fox"&&!(window!=null&&window.foxwallet)&&(D="FoxWallet"),B=E.find(H=>H.name.indexOf(D)>-1||D.replace(/\s*/g,"")==H.name),D.replace(/\s*/g,"")==(B==null?void 0:B.name)&&(D=D.replace(/\s*/g,""))}if(console.log("0511###wallet connet###selectedWallet###",B),console.log("0511###wallet connet###walletName###",D),B){if(t.walletName==B.name&&B.connected)return!1;try{let H,ie="",ke=null;if(k!=="Aptos"){console.log("0329###走到这里了吗 ####",o);const se=await o.connect(D);console.log("0329###wallet connet###suiWalletKitRef###",o),u.wallet=o;const le=o.getState();console.log("0329###wallet connet###suiWalletState###",le);const Ne=le.currentAccount;ke=Ne,Ne&&(ie=typeof Ne=="string"?Ne:Ne.address),H=!!ie}else{const se=await B.connect();u.wallet=B,B.name=="Trust"?(ie=(await B.account()).address||"",H=!0):(ie=((Y=($=u==null?void 0:u.wallet)==null?void 0:$.publicAccount)==null?void 0:Y.address)||"",H=(z=u==null?void 0:u.wallet)==null?void 0:z.connected)}B&&B.network&&B.network.name&&(console.log(B.network.name,"====>selectedWallet"),t.setNetwork(B.network.name)),t.setCurrentWallet({wallet:k!=="Aptos"?o:B,isConnected:H,account:ie,platform:k==="Aptos"?"Apots":"Sui",icon:_,walletName:k!=="Aptos"?R:B.name,accountObj:ke}),r.value.getAccount(ie),localStorage.setItem(`cetus-${k}-current-wallet`,D),localStorage.setItem(`cetus-${k}-current-suiwallet`,R),localStorage.setItem(`cetus-${k}-wallet-icon-name`,_);const ze=o.getState();ie?f.success({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:je("div",{class:"notification-title"},[je("span",{innerHTML:g2.global.t("tips.walletConnected")},null)]),class:"ant-notification-copy"}):ze.status==="ERROR"&&(console.log(ze,"###suiWalletState.status"),f.error({class:"ant-notification-copy ant-notification-error",message:je("div",{class:"notification-title"},[je("span",{innerHTML:"Connect Error"},null)]),description:"Connect Wallet Failed",duration:4.5,icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-a-icon-Shutdown"})])}))}catch(H){if(console.log("0329###wallet connet###useWalletProvider###error###",H),H.name==="WalletNotReadyError"||!(window!=null&&window.trustwallet)&&(D!=null&&D.includes("Trust"))){const ie=B.url,ke=["Please install ",je("a",{href:ie,target:"_blank"},`${D} wallet`)," extension first"];f.error({class:"ant-notification-copy ant-notification-error",message:je("div",{class:"notification-title"},[je("span",{innerHTML:"Wallet Not Ready Error"},null)]),description:je("div",ke),duration:4.5,icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-a-icon-Shutdown"})])});return}f.error({class:"ant-notification-copy ant-notification-error",message:je("div",{class:"notification-title"},[je("span",{innerHTML:H.name||"Rejected"},null)]),description:"Connect Wallet Failed",duration:4.5,icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-a-icon-Shutdown"})])})}}else if(k!=="Aptos"){const ie=["Please install ",je("a",{href:T,target:"_blank"},`${D}`)," extension first"];f.error({class:"ant-notification-copy ant-notification-error",message:je("div",{class:"notification-title"},[je("span",{innerHTML:"Wallet Not Ready Error"},null)]),description:je("div",ie),duration:4.5,icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-a-icon-Shutdown"})])})}},disconnect:async()=>{if(u.wallet)try{const w=await e.value.currentWallet.disconnect();t.setCurrentWallet({wallet:null,isConnected:!1,account:"",platform:i.value.chainName,icon:""}),t.setAssets({})}catch(w){console.log("disconnect error###",w)}}}}const aD=Sn({components:{Modal:vr},setup(){const{t}=Ko(),e=gl(),n=Ni(),i=on(),r=on(),s=Ie(()=>r),o=Ie(()=>s.value.chainName),a=$=>{var Y=typeof $;if(Y=="string")return $.length;if(Y=="object"){var z=0;for(var H in $)z++;return z}return!1},c=Ie(()=>en[o.value]),l=_e("Wallet"),u=Ff({Martian:{name:"Martian",url:"https://chrome.google.com/webstore/detail/martian-wallet/efbglgofoippbgcjepnhiblaibcnclgk",iconName:"Martian",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUyIiBoZWlnaHQ9IjM1MiIgdmlld0JveD0iMCAwIDM1MiAzNTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzNTIiIGhlaWdodD0iMzUyIiByeD0iODciIGZpbGw9IiMxRjFGMUYiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNjkuNzAxIDg5LjA4NDFDMTU5LjUwOCA4OS44MzA5IDE1MC41NDcgOTIuMDAxNCAxNDEuMDc2IDk2LjAxNjlDMTM5LjQyNCA5Ni43MTc0IDEzMy43MDIgOTkuNjAzNyAxMzIuMTE2IDEwMC41MzdDMTI4LjEzMSAxMDIuODgxIDEyMy4wNDMgMTA2LjQ5NiAxMTkuNTg2IDEwOS40NEMxMTYuOTc1IDExMS42NjUgMTExLjIxNiAxMTcuNDUyIDEwOS4yMDIgMTE5Ljg3NkMxMDUuMDg1IDEyNC44MzIgMTAxLjA4OCAxMzAuODg2IDk4LjQzODQgMTM2LjE3OUM5Ny45OTQyIDEzNy4wNjYgOTcuNTYzNSAxMzcuODE3IDk3LjQ4MTMgMTM3Ljg0OEM5Ny4zOTkzIDEzNy44OCA5Ny4zMzIgMTM3Ljk5NSA5Ny4zMzIgMTM4LjEwNUM5Ny4zMzIgMTM4LjIxNCA5Ni43Njg1IDEzOS42MDggOTYuMDc5NiAxNDEuMkM5NC42OTc1IDE0NC4zOTYgOTIuOTE3NiAxNDkuNDk2IDkxLjk5MjUgMTUyLjkwOUM4OS42MjY3IDE2MS42NCA4OC41NDA3IDE3Mi40OTUgODkuMTgxMSAxODEuMDExQzkwLjM4ODggMTk3LjA3MSA5NS4xODY2IDIxMS4xMiAxMDMuODUzIDIyMy45NzVDMTEwLjE0NyAyMzMuMzExIDExOC4zMzYgMjQxLjQxMyAxMjcuOTk1IDI0Ny44NjFDMTM4LjkzNiAyNTUuMTYzIDE1MS45NzEgMjU5LjkxIDE2NS41MzIgMjYxLjUyOUMxNjkuMjQ3IDI2MS45NzIgMTc3LjczMSAyNjIuMTQ2IDE4MS43NjIgMjYxLjg2MUMxOTguMDkzIDI2MC43MDYgMjEzLjYxNiAyNTQuOTk0IDIyNi43OCAyNDUuMjk3QzI0NC4wODIgMjMyLjU1MiAyNTYuMDc2IDIxMy43OTcgMjYwLjMzMiAxOTIuODM0QzI2MS42MDEgMTg2LjU4MiAyNjIuMDA2IDE4Mi4zNTUgMjYyIDE3NS40MDdDMjYxLjk5NiAxNzAuMzM3IDI2MS45NDYgMTY5LjI5NSAyNjEuNTQxIDE2NS44MjlDMjU5LjcwNSAxNTAuMTQyIDI1NC4wNTkgMTM1Ljg4OCAyNDQuNzgzIDEyMy41MjdDMjM4LjkwMyAxMTUuNjg5IDIzMC45OTIgMTA4LjI0OCAyMjMuMDk4IDEwMy4xMjlDMjE4LjQ4NSAxMDAuMTM2IDIxNi4xNzggOTguODU1NSAyMTEuNjYxIDk2Ljc3NzRDMjAyLjMzOCA5Mi40ODc5IDE5Mi4zNzYgODkuOTA5MSAxODIuMTg3IDg5LjE0NzlDMTgwLjA0MiA4OC45ODc2IDE3MS42MDYgODguOTQ0NSAxNjkuNzAxIDg5LjA4NDFaTTE4My4wMjUgMTAzLjY1N0MxODkuNTAzIDEwNC4zNDggMTk2LjI4NCAxMDYuMDM0IDIwMi4zNiAxMDguNDY0TDIwNC4zNTYgMTA5LjI2MkwyMDQuMzU2IDExMC44MjJDMjA0LjM1NyAxMTYuODk2IDIwMC4zNDQgMTIyLjMwNyAxOTQuMzMzIDEyNC4zMzRMMTkyLjcyIDEyNC44NzhMMTczLjUyMyAxMjQuOTg3QzE1NS4yODkgMTI1LjA5IDE1MS45OTQgMTI1LjE3NSAxNDcuNjE2IDEyNS42NTdDMTM3LjY3NiAxMjYuNzUyIDEyOS44NzIgMTI4LjI2NSAxMjEuMzAyIDEzMC43NjFDMTIwLjA1IDEzMS4xMjUgMTE4LjkxNyAxMzEuNDI0IDExOC43ODUgMTMxLjQyNEMxMTguNDY0IDEzMS40MjQgMTE4LjkwOSAxMzAuNzkxIDEyMC43NTIgMTI4LjYyMkMxMjQuNDgzIDEyNC4yMzMgMTMwLjczMiAxMTguNTk4IDEzNC43MDYgMTE2LjA0MUMxMzUuMTI2IDExNS43NyAxMzUuNTA4IDExNS41MDkgMTM1LjU1NSAxMTUuNDZDMTM1LjYwMiAxMTUuNDExIDEzNi4yNTEgMTE0Ljk3OSAxMzYuOTk5IDExNC41MDFDMTQyLjI2MyAxMTEuMTMxIDE0OC4wMzYgMTA4LjQ0MSAxNTQuMDcyIDEwNi41NDNDMTU5LjY1OCAxMDQuNzg3IDE2NC44MTQgMTAzLjg3MiAxNzIuMTY0IDEwMy4zMzFDMTczLjg3NCAxMDMuMjA2IDE4MC43MjMgMTAzLjQxMSAxODMuMDI1IDEwMy42NTdaTTIxOS4xMzMgMTE4LjAyMkMyMjIuNzUxIDEyMC43NzkgMjI5LjQ5OSAxMjcuMTM2IDIyOS40OTkgMTI3Ljc4N0MyMjkuNDk5IDEyOC42MDYgMjI2Ljc1IDEzMy40OTMgMjI0Ljc4NCAxMzYuMTY4QzIxOC4wMzIgMTQ1LjM1NSAyMDcuOTIxIDE1MS41NTYgMTk2Ljc5NyAxNTMuMzMyQzE5My45NDUgMTUzLjc4OCAxOTEuOTk0IDE1My44MzUgMTc1LjczMiAxNTMuODQ1QzE1NS4zOTYgMTUzLjg1NyAxNTIuNTc3IDE1My45NjYgMTQ1LjA2OCAxNTUuMDI4QzEzMS4xNjkgMTU2Ljk5NCAxMTguMDA0IDE2MS4zODUgMTA1Ljc3IDE2OC4xMzdDMTA0Ljc1NyAxNjguNjk1IDEwMy44ODUgMTY5LjEwOCAxMDMuODMxIDE2OS4wNTRDMTAzLjY1IDE2OC44NzMgMTA0LjMxMyAxNjMuOTY5IDEwNC44OTUgMTYxLjE4MkMxMDUuNTE0IDE1OC4yMTggMTA2LjU0MiAxNTQuNDE0IDEwNy4zMTEgMTUyLjI0N0wxMDcuNzg2IDE1MC45MDlMMTA5LjQ4MSAxNTAuMTU2QzEyMC45OTQgMTQ1LjA0MiAxMzQuODA4IDE0MS4zODIgMTQ3LjQ0NyAxNDAuMDk3QzE1NC4yNTggMTM5LjQwNSAxNTUuMTY2IDEzOS4zNzggMTczLjk0OCAxMzkuMzA0QzE4NC45MTIgMTM5LjI2MSAxOTMuMTE2IDEzOS4xNiAxOTMuOTMgMTM5LjA2QzE5NS4yOCAxMzguODkyIDE5Ny44NDYgMTM4LjI4NyAxOTkuNDEgMTM3Ljc2NkMxOTkuODQxIDEzNy42MjIgMjAxLjE4OCAxMzcuMDI1IDIwMi40MDMgMTM2LjQzOUMyMDkuNTU2IDEzMi45ODcgMjE0LjkxIDEyNi43OTggMjE3LjM1OCAxMTkuMTU0QzIxNy43OTIgMTE3Ljc5OCAyMTguMDU3IDExNy4yMDQgMjE4LjE4NCAxMTcuM0MyMTguMjg3IDExNy4zNzggMjE4LjcxNCAxMTcuNzAzIDIxOS4xMzMgMTE4LjAyMlpNMjM5LjM5OSAxNDEuODI1QzI0MC42NzggMTQ0LjAyMyAyNDIuODA1IDE0OS4xNjMgMjQ0LjA5MSAxNTMuMTZDMjQ1LjE0MSAxNTYuNDI2IDI0NS4yMTggMTU2LjgxOCAyNDQuODk5IDE1Ny4zMDVDMjQ0LjQ1MyAxNTcuOTg1IDIzOC45OTEgMTYzLjUxMSAyMzcuMzc3IDE2NC45MTZDMjI5LjUxNCAxNzEuNzU2IDIyMC4yNTIgMTc2Ljg4MiAyMTAuNTc1IDE3OS43NUMyMDUuNzczIDE4MS4xNzMgMjAxLjM0NCAxODIuMDAxIDE5NS42MjMgMTgyLjU0NkMxOTQuNjk4IDE4Mi42MzQgMTg1Ljk0NSAxODIuNzE2IDE3Ni4xNzIgMTgyLjcyOUMxNTUuMDkgMTgyLjc1NSAxNTMuODA5IDE4Mi44MTEgMTQ2LjU5NyAxODQuMDAxQzEzMy44MDkgMTg2LjExMiAxMjAuNjg1IDE5MS43MDYgMTEwLjA5NCAxOTkuNTZDMTA5LjIwNSAyMDAuMjE5IDEwOC4zNjggMjAwLjc2NyAxMDguMjM1IDIwMC43NzdDMTA3Ljk1NCAyMDAuNzk4IDEwNy4zODIgMTk5LjIxOCAxMDYuMjQ0IDE5NS4yNzZDMTA1LjQyOSAxOTIuNDUyIDEwNC4yNDggMTg2LjgxNCAxMDQuMzMxIDE4Ni4xNEMxMDQuMzcxIDE4NS44MTkgMTA0Ljg5NyAxODUuNDAxIDEwNi43NiAxODQuMjExQzExNy42NTkgMTc3LjI0NiAxMjkuNDk5IDE3Mi40ODcgMTQxLjkyNSAxNzAuMDc1QzE0NS4zODMgMTY5LjQwNCAxNDUuOTMxIDE2OS4zMjIgMTQ5Ljk5NSAxNjguODY1QzE1NSAxNjguMzAyIDE1Ni42NjQgMTY4LjI2MSAxNzcuMDA2IDE2OC4yMDVDMTk1LjY3MiAxNjguMTUzIDE5NS44ODMgMTY4LjE0NCAyMDAuODc0IDE2Ny4xNzRDMjA4LjYzNiAxNjUuNjY3IDIxNi4yMDcgMTYyLjQ3MyAyMjIuNjI4IDE1Ny45OThDMjI4LjUzMyAxNTMuODgyIDIzNC40MDMgMTQ3Ljg5MiAyMzcuOTcgMTQyLjM0QzIzOC40MDMgMTQxLjY2NiAyMzguODA3IDE0MS4xMTIgMjM4Ljg2OCAxNDEuMTA5QzIzOC45MjkgMTQxLjEwNiAyMzkuMTY4IDE0MS40MjggMjM5LjM5OSAxNDEuODI1Wk0yNDcuNjc1IDE3Ni44MDhDMjQ3LjY3MiAxODEuNTQ5IDI0Ni43NTUgMTg4LjE3NyAyNDUuMzU5IDE5My41MzNDMjQ0Ljk1NyAxOTUuMDc3IDI0NC44NDcgMTk1LjMwOCAyNDQuMzggMTk1LjU5QzI0NC4wOSAxOTUuNzY2IDI0My4zMTggMTk2LjIzOCAyNDIuNjY0IDE5Ni42NDFDMjMwLjUzNCAyMDQuMTA4IDIxNi40MTUgMjA5LjEzNyAyMDMuMTIxIDIxMC43MjVDMjAxLjUxMSAyMTAuOTE3IDE5OS41NDQgMjExLjE2MyAxOTguNzUgMjExLjI3MUMxOTcuNzcgMjExLjQwNCAxOTAuNzU0IDIxMS41MDcgMTc2LjkyMSAyMTEuNTkxQzE2NS43MDkgMjExLjY1OCAxNTYuMzA2IDIxMS43NTYgMTU2LjAyNSAyMTEuODA3QzE1NS43NDUgMjExLjg1OSAxNTQuNzkgMjExLjk4OSAxNTMuOTAyIDIxMi4wOTdDMTQzLjc3MiAyMTMuMzI1IDEzMy4yMDggMjE3Ljg1OSAxMjUuMTU2IDIyNC40MzRDMTI0LjQzNiAyMjUuMDIyIDEyMy43NzIgMjI1LjUwMyAxMjMuNjggMjI1LjUwM0MxMjMuMTkxIDIyNS41MDMgMTE4LjA5MiAyMTkuMjc5IDExNS44OSAyMTUuOTk0QzExNC45NDQgMjE0LjU4MiAxMTQuNzM2IDIxNC4xNjEgMTE0Ljg5IDIxMy45NzJDMTE1LjIyNyAyMTMuNTU4IDExOS40MjggMjEwLjM5MSAxMjEuMiAyMDkuMjE1QzEyNy40NDEgMjA1LjA3NCAxMzQuMTA1IDIwMS45NjQgMTQwLjk5MSAxOTkuOThDMTQ1LjAwMyAxOTguODI0IDE0Ny45NDkgMTk4LjIyNyAxNTMuMDM3IDE5Ny41NDJDMTU1LjMzMiAxOTcuMjMzIDE1OC42NjcgMTk3LjE3NSAxODAuMTQ4IDE5Ny4wNzJDMTk1Ljg1OCAxOTYuOTk2IDE5Ny4xMiAxOTYuOTQ2IDIwMi4zMTggMTk2LjE5N0MyMTQuNzAxIDE5NC40MTIgMjI2LjYyNyAxODkuODU3IDIzNy4zOTggMTgyLjc5N0MyMzkuNTQ4IDE4MS4zODggMjQzLjcxMiAxNzguMjU2IDI0NS43MjIgMTc2LjUzNUMyNDYuNjU2IDE3NS43MzUgMjQ3LjQ3OCAxNzUuMDc4IDI0Ny41NDggMTc1LjA3NEMyNDcuNjE4IDE3NS4wNyAyNDcuNjc1IDE3NS44NSAyNDcuNjc1IDE3Ni44MDhaTTIzNC40MjUgMjE3LjEyOUMyMzQuNDI1IDIxNy4yOTQgMjMyLjIxOCAyMjAuMTc1IDIzMC42MTYgMjIyLjEwMkMyMjguODg1IDIyNC4xODUgMjIzLjkyOSAyMjkuMTM0IDIyMS44NjYgMjMwLjg0MUMyMTAuMzQ3IDI0MC4zNzEgMTk3LjE0MSAyNDUuOTA2IDE4Mi4yNzIgMjQ3LjQzNUMxNzkuMjIyIDI0Ny43NDggMTcxLjA4OSAyNDcuNjk4IDE2OC4xMDQgMjQ3LjM0NkMxNjAuNTU1IDI0Ni40NTggMTUzLjk3MiAyNDQuNzYzIDE0Ny40NDcgMjQyLjAyOEMxNDUuOTEzIDI0MS4zODUgMTQxLjgxNCAyMzkuMzc5IDE0MC41MDMgMjM4LjYyOUMxMzcuODA3IDIzNy4wODkgMTM0Ljg3MyAyMzUuMjExIDEzNC44NzggMjM1LjAzMUMxMzQuODg4IDIzNC42ODQgMTM5LjY4MSAyMzEuNjU0IDE0Mi4xOTUgMjMwLjQwN0MxNDYuMDU3IDIyOC40OSAxNDkuNDU3IDIyNy4zOTcgMTU0LjM5IDIyNi40ODdDMTU2LjMxMiAyMjYuMTMyIDE1Ni45MTEgMjI2LjExOSAxNzYuNDExIDIyNi4wMDFDMTg3LjQzNiAyMjUuOTM0IDE5Ni44MDEgMjI1LjgzNSAxOTcuMjIxIDIyNS43OEMxOTcuNjQyIDIyNS43MjUgMTk5LjAxOCAyMjUuNTk3IDIwMC4yNzkgMjI1LjQ5NEMyMDUuMTI2IDIyNS4xIDIxMS44NDMgMjIzLjk3NiAyMTYuOTU5IDIyMi43MDRDMjE5LjYzOSAyMjIuMDM4IDIyNC4xNTggMjIwLjc5NCAyMjQuNjU3IDIyMC41ODZDMjI0Ljg0NCAyMjAuNTA4IDIyNi4wMjkgMjIwLjA5MiAyMjcuMjkgMjE5LjY2MkMyMjguNTUxIDIxOS4yMzEgMjMwLjYxNSAyMTguNDY2IDIzMS44NzcgMjE3Ljk2MUMyMzQuMzIzIDIxNi45ODIgMjM0LjQyNSAyMTYuOTQ5IDIzNC40MjUgMjE3LjEyOVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="},Pontem:{name:"Pontem",url:"https://chrome.google.com/webstore/detail/pontem-wallet/phkbamefinggmakgklpkljjmgibohnba",iconName:"Pontem",icon:"https://www.gitbook.com/cdn-cgi/image/width=20,height=20,fit=contain,dpr=2,format=auto/https%3A%2F%2F736486047-files.gitbook.io%2F~%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-MVVJKmKQGx983dZy_jr%252Favatar-1619180126965.png%3Fgeneration%3D1619180127194239%26alt%3Dmedia"},Fewcha:{name:"Fewcha",url:"https://fewcha.app/",iconName:"Fewcha",icon:"https://miro.medium.com/fit/c/176/176/1*a0WaY-q7gjCRiuryRG6TkQ.png"},Coin98:{name:"Coin98",url:"https://chrome.google.com/webstore/detail/coin98-wallet/aeachknmefphepccionboohckonoeemg",iconName:"coin98",icon:"https://coin98.s3.ap-southeast-1.amazonaws.com/Coin/c98wallet.png"},Blocto:{name:"Blocto",url:"https://portto.com/download",iconName:"Blocto",icon:""},Petra:{name:"Petra",url:"https://chrome.google.com/webstore/detail/petra-aptos-wallet/ejjladinnckdgjemekebdpeokbikhfci",iconName:"Petra",icon:"https://miro.medium.com/fit/c/176/176/1*Gf747eyRywU8Img0tK5wvw.png"},OKX:{name:"OKX",url:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge",iconName:"OKX",icon:""},TokenPocket:{name:"TokenPocket",url:"https://chrome.google.com/webstore/detail/tokenpocket/mfgccjchihfkkindfppnaooecgfneiii",iconName:"TokenPocket",icon:"https://tp-statics.tokenpocket.pro/logo/tokenpocket.png"},Bitget:{name:"Bitget",url:"https://chrome.google.com/webstore/detail/bitkeep-bitcoin-crypto-wa/jiidiaalihmmhddjgbnbgdfflelocpak",iconName:"Bitget",icon:"https://raw.githubusercontent.com/bitkeepwallet/download/main/logo-png/BitKeep_logo_circle.png"},Rise:{name:"Rise",url:"https://chrome.google.com/webstore/detail/rise-aptos-wallet/hbbgbephgojikajhfbomhlmmollphcad",iconName:"Rise",icon:""},OpenBlock:{name:"OpenBlock",url:"https://chrome.google.com/webstore/detail/openblock-bridge/memiokcjdencbponfgbkojkenpdpejhj",iconName:"OpenBlock",icon:""},Trust:{name:"Trust",url:"https://trustwallet.com/",iconName:"Trust",icon:""},MSafe:{name:"MSafe",url:"",iconName:"Msafe",icon:""},Spacecy:{name:"Spacecy",url:"https://chrome.google.com/webstore/detail/spacecy-wallet/mkchoaaiifodcflmbaphdgeidocajadp?hl=en-US",iconName:"Spacecy",icon:""},Nightly:{name:"Nightly",walletName:"Nightly",url:"https://chrome.google.com/webstore/detail/nightly/fiikommddbeccaoicoejoniammnalkfa",iconName:"nightly",icon:""}}),d=Ff({suiWallet:{name:"Sui Wallet",walletName:"Sui Wallet",url:"https://chrome.google.com/webstore/detail/sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil",iconName:"sui-wallet-icon",icon:""},Martian:{name:"Martian",walletName:"Martian Sui Wallet",url:"https://chrome.google.com/webstore/detail/martian-wallet/efbglgofoippbgcjepnhiblaibcnclgk",iconName:"Martian",icon:""},Suiet:{name:"Suiet",walletName:"Suiet",url:"https://chrome.google.com/webstore/detail/suiet-sui-wallet/khpkpbbcccdmmclmpigdgddabeilkdpd",iconName:"suiet-icon",icon:""},OKX:{name:"OKX Wallet",walletName:"OKX Wallet",url:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge",iconName:"OKX",icon:""},SuiMetaMaskSnap:{name:"SuiMetaMaskSnap",walletName:"Sui MetaMask Snap",url:"https://suisnap.com",iconName:"metamask",icon:""},Ethos:{name:"Ethos",walletName:"Ethos Wallet",url:"https://chrome.google.com/webstore/detail/ethos-sui-wallet/mcbigmjiafegjnnogedioegffbooigli",iconName:"Ethos",icon:""},Surf:{name:"Surf",walletName:"Surf Wallet",url:"https://chrome.google.com/webstore/detail/surf-wallet/emeeapjkbcbpbpgaagfchmcgglmebnen",iconName:"surf",icon:""},Coin98:{name:"Coin98",walletName:"Coin98",url:"https://chrome.google.com/webstore/detail/coin98-wallet/aeachknmefphepccionboohckonoeemg",iconName:"coin98",icon:"https://coin98.s3.ap-southeast-1.amazonaws.com/Coin/c98wallet.png"},Gate:{name:"Gate",walletName:"Gate Wallet",url:"https://chromewebstore.google.com/detail/gate-wallet/cpmkedoipcpimgecpmgpldfpohjplkpp",iconName:"gate",icon:""},MSafe:{name:"MSafe Wallet",walletName:"MSafe Wallet",url:"https://sui.m-safe.io/",iconName:"Msafe",icon:""},OneKey:{name:"OneKey Wallet",walletName:"OneKey Wallet",url:"https://chromewebstore.google.com/detail/onekey/jnmbobjmhlngoefaiojfljckilhhlhcj",iconName:"OneKey",icon:""},Fewcha:{name:"Fewcha",walletName:"Fewcha Move Wallet",url:"https://fewcha.app/",iconName:"Fewcha",icon:"https://miro.medium.com/fit/c/176/176/1*a0WaY-q7gjCRiuryRG6TkQ.png"},SafePal:{name:"SafePal",walletName:"SafePal",url:"https://chrome.google.com/webstore/detail/safepal-extension-wallet/lgmpcpglpngdoalbgeoldeajfclnhafa",iconName:"safepal",icon:""},Morphis:{name:"Morphis",walletName:"Morphis Wallet",url:"https://chrome.google.com/webstore/detail/morphis-wallet/heefohaffomkkkphnlpohglngmbcclhi",iconName:"Morphis",icon:""},Nightly:{name:"Nightly",walletName:"Nightly",url:"https://chrome.google.com/webstore/detail/nightly/fiikommddbeccaoicoejoniammnalkfa",iconName:"nightly",icon:""},Bitget:{name:"Bitget Wallet",walletName:"Bitget Wallet",url:"https://chrome.google.com/webstore/detail/bitkeep-bitcoin-crypto-wa/jiidiaalihmmhddjgbnbgdfflelocpak",iconName:"Bitget",icon:"https://raw.githubusercontent.com/bitkeepwallet/download/main/logo-png/BitKeep_logo_circle.png"},Elli:{name:"Elli",walletName:"Elli",url:"https://chrome.google.com/webstore/detail/elli-sui-wallet/ocjdpmoallmgmjbbogfiiaofphbjgchh",iconName:"elli",icon:""},Fox:{name:"Fox",walletName:"Sui Wallet",url:"https://foxwallet.com/download",iconName:"fox",icon:""},Math:{name:"Math",walletName:"MathWallet",url:"https://mathwallet.org/",iconName:"math",icon:""},TokenPocket:{name:"TokenPocket Wallet",walletName:"TokenPocket Wallet",url:"https://chrome.google.com/webstore/detail/tokenpocket/mfgccjchihfkkindfppnaooecgfneiii",iconName:"tokenpocket",icon:""},Spacecy:{name:"Spacecy",walletName:"Spacecy Sui Wallet",url:"https://chrome.google.com/webstore/detail/spacecy-wallet/mkchoaaiifodcflmbaphdgeidocajadp",iconName:"Spacecy",icon:""},Binance:{name:"Binance Web3 Wallet",walletName:"Binance Web3 Wallet",url:"https://chromewebstore.google.com/detail/%E5%B8%81%E5%AE%89%E9%93%BE%E9%92%B1%E5%8C%85/fhbohimaelbohpjbbldcngcnapndodjp?hl=zh-CN&utm_source=ext_sidebar",iconName:"binance",icon:""}}),h=Ie(()=>s.value.chainName!=="Aptos"?d:u),f=_e(!1),g=Ie(()=>n),{connect:p,disconnect:w}=Kd();function _($,Y){s.value.chainName!=="Aptos"?p(Y.walletName,Y.iconName,s.value.chainName,Y.url,Y.name):p(Y.name,Y.iconName,s.value.chainName),n.setIsShowWalletModal(!1),n.setWalletIconName(Y.iconName)}const k=_e([]);Jt(()=>s.value.newAddtransactionList,$=>{$&&(k.value=$.sort((Y,z)=>z.date-Y.date).filter((Y,z)=>{if(Y.chainName==s.value.chainName)return Y.date>new Date().getTime()&&Y.walletAddress==g.value.address&&z<50}))},{immediate:!0,deep:!0});const T=_e(0),R=_e(!1),E=()=>{i.clearTransactionList()},D=()=>{n.setIsShowWalletModal(!1),n.setSwitchWallet(!1)},B=Ie(()=>s.value.currentExplorer);return{getExplorerUrl:ps,timeFormat:Qc,offset:T,scrollDisabled:R,transactionList:k,store:s,currentToggle:l,importIcon:Et,walletList:h,wallet:g,isLoading:f,nuxtApp:e,setWallet:_,indexStore:i,config:c,chainName:o,clearTrans:E,t,walletModalCancel:D,count:a,currentExplorer:B}}}),cD=""+globalThis.__publicAssetsURL("image/logo-bg@2x.png"),lD=""+globalThis.__publicAssetsURL("sui-image/logo-bg@2x.png");const to=t=>(di("data-v-2836f008"),t=t(),hi(),t),uD=to(()=>S("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),dD={key:0,class:"wallet-title"},hD={key:1,class:"wallet-sub-title"},fD={key:2,class:"wallet-title"},pD={key:0,class:"select-wallet"},gD=["disabled","onClick"],mD={key:0,class:"wallet-name"},wD=to(()=>S("div",null,"Sui",-1)),yD=to(()=>S("div",null,"MetaMask",-1)),_D=to(()=>S("div",null,"Snap",-1)),bD=[wD,yD,_D],vD={key:1},kD={class:"icon-box"},SD=["src"],TD={key:0},AD={key:1},CD={key:0,class:"left"},ID={class:"platform"},ED={class:"address"},xD=to(()=>S("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),MD=[xD],ND={class:"copy-and-view"},OD=["href"],DD=to(()=>S("svg",{class:"icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon-jump"})],-1)),jD={class:"btn-box"},RD={class:"item"},BD=to(()=>S("div",{class:"svg-box"},[S("svg",{class:"icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-a-icon-Disconnect1"})])],-1)),PD={class:"item"},FD=to(()=>S("div",{class:"svg-box"},[S("svg",{class:"icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-a-icon-Switch1"})])],-1)),UD={key:1,class:"transtions"},LD={key:0,class:"transtionDetail"},$D={class:"bottom"},zD=["href"],qD={class:"tit"},VD={class:"tit-left"},WD={"aria-hidden":"true",class:"icon"},KD=["xlink:href"],ZD={class:"tit-right"},HD={class:"tokenInfo"},QD={class:"token-left"},GD={key:0,class:"tokenInfo-left"},YD={class:"img-box-token"},XD={key:0,alt:""},JD={key:1,alt:""},e6={key:2,alt:""},t6={key:0,class:"name"},n6={key:0},i6={key:1},r6={key:2},s6={key:1,class:"name"},o6={key:1,class:"tokenInfo-left tokenInfo-no-flex"},a6={key:0,class:"img-box-token"},c6={key:0,alt:""},l6={key:1},u6={key:1,class:"img-box-token"},d6={key:0,alt:""},h6={key:1},f6={key:2,class:"img-box-token"},p6={key:0,alt:""},g6={key:1},m6={key:0,class:"token-right"},w6={key:1,class:"token-right"},y6={key:3},_6={key:0},b6={key:1,class:"noData"},v6={key:0,src:v2},k6={key:1,src:eg},S6={key:2,class:"right"},T6={key:0,src:cD,alt:""},A6={key:1,src:lD,alt:""};function C6(t,e,n,i,r,s){const o=kr("Modal"),a=Kp("image");return P(),xt(o,{width:t.wallet.connected&&!t.wallet.switchWallet?420:552,visible:!0,class:He(["wallet-modal",t.wallet.connected&&!t.wallet.switchWallet?"wallet-modal-already":"wallet-modal"]),footer:null,centered:"",onCancel:t.walletModalCancel},{closeIcon:ft(()=>[uD]),title:ft(()=>[!t.wallet.connected||t.wallet.switchWallet?(P(),U("h3",dD,fe(t.$t("modal.walletModal")),1)):ae("",!0),!t.wallet.connected||t.wallet.switchWallet?(P(),U("p",hD,fe(t.$t("modal.walletModalText")),1)):ae("",!0),t.wallet.connected&&!t.wallet.switchWallet?(P(),U("h3",fD,fe(t.$t("modal.walletConnectModalTitle")),1)):ae("",!0)]),default:ft(()=>[!t.wallet.connected||t.wallet.switchWallet?(P(),U("div",pD,[(P(!0),U(tn,null,ln(t.walletList,(c,l)=>(P(),U("button",{key:l,disabled:t.isLoading,class:"wallet-item",ghost:"",onClick:u=>t.setWallet(!0,c)},[l=="SuiMetaMaskSnap"?(P(),U("div",mD,bD)):(P(),U("span",vD,fe(l=="suiWallet"?"Sui Wallet":l=="SuiMetaMaskSnap"?"Sui MetaMask Snap":l=="Bitget"?"Bitget Wallet":l),1)),S("div",kD,[S("img",{src:`/image/wallet/${c.iconName.toLowerCase()}.png`},null,8,SD)])],8,gD))),128)),Number.isInteger(t.count(t.walletList)/3)?ae("",!0):(P(),U("div",TD)),!Number.isInteger(t.count(t.walletList)/3)&&!Number.isInteger((t.count(t.walletList)+1)/3)?(P(),U("div",AD)):ae("",!0)])):(P(),U("div",{key:1,class:He(t.currentToggle=="Wallet"?"wallet-info walletflex":"wallet-info transations-info")},[t.currentToggle=="Wallet"?(P(),U("div",CD,[S("div",ID,fe(t.$t("modal.walletName"))+" "+fe(t.wallet.walletName),1),S("p",ED,[ai(fe(t.wallet.address&&t.wallet.address.substr(0,6))+" ... "+fe(t.wallet.address&&t.wallet.address.substr(t.wallet.address.length-4,4))+" ",1),(P(),U("svg",{class:"icon","aria-hidden":"true",onClick:e[0]||(e[0]=c=>t.indexStore.copy(t.wallet.address))},MD))]),S("div",ND,[S("a",{class:"view",target:"_blank",href:("getExplorerUrl"in t?t.getExplorerUrl:et(ps))(t.currentExplorer,"account",t.wallet.address)},[S("span",null,fe(t.$t("common.viewExplorer")),1),DD],8,OD)]),S("div",jD,[S("div",RD,[BD,S("p",{onClick:e[1]||(e[1]=c=>t.$emit("onDisconnect"))},fe(t.$t("button.disconnect")),1)]),S("div",PD,[FD,S("p",{onClick:e[2]||(e[2]=c=>t.$emit("onSwitch"))},fe(t.$t("newAdd.switch")),1)])])])):(P(),U("div",UD,[t.transactionList.length>0?(P(),U("div",LD,[S("div",$D,[(P(!0),U(tn,null,ln(t.transactionList,(c,l)=>(P(),U("a",{key:l,class:"transaction-item",target:"_blank",href:t.chainName!=="Aptos"?("getExplorerUrl"in t?t.getExplorerUrl:et(ps))(t.currentExplorer,"tx",encodeURIComponent(c.hash)):("getExplorerUrl"in t?t.getExplorerUrl:et(ps))(t.currentExplorer,"tx",c.hash)},[S("div",null,[S("div",qD,[S("div",VD,[(P(),U("svg",WD,[S("use",{"xlink:href":"#"+c.icon},null,8,KD)])),S("span",null,fe(c.tit),1)]),S("div",ZD,fe(("timeFormat"in t?t.timeFormat:et(Qc))(parseInt(t.chainName!=="Aptos"?c.date-6048e5:c.timestamp/1e3)-8*60*60*1e3))+" (UTC)",1)]),S("div",HD,[S("div",QD,[c.tit=="Swap"||c.tit=="Position Created"||c.tit=="Liquidity Removed"||c.tit=="Liquidity Increased"||c.tit=="Locked NFT Claimed"?(P(),U("div",GD,[S("div",YD,[c.tokenInfo.tokena&&(c.tokenInfo.numa&&c.tokenInfo.numa!=="+ 0"&&c.tokenInfo.numa!=="- 0"||c.tokenInfo.nftNum)?jr((P(),U("img",XD,null,512)),[[a,c.tokenInfo.logoa?c.tokenInfo.logoa:t.store.theme=="default"?("importIcon"in t?t.importIcon:et(Et))("/image/coins/unknown.png"):("importIcon"in t?t.importIcon:et(Et))("/image/coins/sui-unknown.png")]]):ae("",!0),c.tokenInfo.tokenb&&(c.tokenInfo.numb&&c.tokenInfo.numb!=="+ 0"&&c.tokenInfo.numb!=="- 0"||c.tokenInfo.nftNum)?jr((P(),U("img",JD,null,512)),[[a,c.tokenInfo.logob?c.tokenInfo.logob:t.store.theme=="default"?("importIcon"in t?t.importIcon:et(Et))("/image/coins/unknown.png"):("importIcon"in t?t.importIcon:et(Et))("/image/coins/sui-unknown.png")]]):ae("",!0),c.tokenInfo.tokenc&&(c.tokenInfo.numc&&c.tokenInfo.numc!=="+ 0"&&c.tokenInfo.numc!=="- 0"||c.tokenInfo.nftNum)?jr((P(),U("img",e6,null,512)),[[a,c.tokenInfo.logoc?c.tokenInfo.logoc:t.store.theme=="default"?("importIcon"in t?t.importIcon:et(Et))("/image/coins/unknown.png"):("importIcon"in t?t.importIcon:et(Et))("/image/coins/sui-unknown.png")]]):ae("",!0)]),c.tit!=="Locked NFT Claimed"?(P(),U("div",t6,[c.tokenInfo.tokena?(P(),U("span",n6,fe(c.tokenInfo.tokena),1)):ae("",!0),c.tokenInfo.tokenb&&c.tokenInfo.tokena?(P(),U("span",i6," "+fe(c.tit=="Swap"?"→":c.tit=="Locked NFT Claimed"?"":"-")+" ",1)):ae("",!0),c.tokenInfo.tokenb?(P(),U("span",r6,fe(c.tokenInfo.tokenb),1)):ae("",!0)])):ae("",!0),c.tit=="Locked NFT Claimed"?(P(),U("div",s6,fe(c.tokenInfo.nftId),1)):ae("",!0)])):(P(),U("div",o6,[c.tokenInfo.tokena&&c.tokenInfo.numa&&c.tokenInfo.numa!=="+ 0"&&c.tokenInfo.numa!=="- 0"?(P(),U("div",a6,[c.tokenInfo.tokena&&c.tokenInfo.numa&&c.tokenInfo.numa!=="+ 0"&&c.tokenInfo.numa!=="- 0"?jr((P(),U("img",c6,null,512)),[[a,c.tokenInfo.logoa?c.tokenInfo.logoa:t.store.theme=="default"?("importIcon"in t?t.importIcon:et(Et))("/image/coins/unknown.png"):("importIcon"in t?t.importIcon:et(Et))("/image/coins/sui-unknown.png")]]):ae("",!0),c.tokenInfo.tokena?(P(),U("span",l6,fe(c.tokenInfo.tokena),1)):ae("",!0)])):ae("",!0),c.tokenInfo.tokenb&&c.tokenInfo.numb&&c.tokenInfo.numb!=="+ 0"&&c.tokenInfo.numb!=="- 0"?(P(),U("div",u6,[c.tokenInfo.tokenb&&c.tokenInfo.numb&&c.tokenInfo.numb!=="+ 0"&&c.tokenInfo.numb!=="- 0"?jr((P(),U("img",d6,null,512)),[[a,c.tokenInfo.logob?c.tokenInfo.logob:t.store.theme=="default"?("importIcon"in t?t.importIcon:et(Et))("/image/coins/unknown.png"):("importIcon"in t?t.importIcon:et(Et))("/image/coins/sui-unknown.png")]]):ae("",!0),c.tokenInfo.tokenb?(P(),U("span",h6,fe(c.tokenInfo.tokenb),1)):ae("",!0)])):ae("",!0),c.tokenInfo.tokenc&&c.tokenInfo.numc&&c.tokenInfo.numc!=="+ 0"&&c.tokenInfo.numc!=="- 0"?(P(),U("div",f6,[c.tokenInfo.tokenc&&c.tokenInfo.numc&&c.tokenInfo.numc!=="+ 0"&&c.tokenInfo.numc!=="- 0"?jr((P(),U("img",p6,null,512)),[[a,c.tokenInfo.logoc?c.tokenInfo.logoc:t.store.theme=="default"?("importIcon"in t?t.importIcon:et(Et))("/image/coins/unknown.png"):("importIcon"in t?t.importIcon:et(Et))("/image/coins/sui-unknown.png")]]):ae("",!0),c.tokenInfo.tokenc?(P(),U("span",g6,fe(c.tokenInfo.tokenc),1)):ae("",!0)])):ae("",!0)]))]),c.tit=="Locked NFT Claimed"?(P(),U("div",m6,[S("p",{class:He(c.tokenInfo.nftNum&&c.tokenInfo.nftNum.includes("+")?"addP":"")},fe(c.tokenInfo.nftNum)+" NFT ",3)])):(P(),U("div",w6,[c.tokenInfo.numa&&c.tokenInfo.numa!=="+ 0"&&c.tokenInfo.numa!=="- 0"?(P(),U("p",{key:0,class:He(c.tokenInfo.numa&&c.tokenInfo.numa.includes("+")?"addP":"")},fe(c.tokenInfo.numa)+" "+fe(c.tokenInfo.tokena),3)):ae("",!0),c.tokenInfo.numb&&c.tokenInfo.numb!=="+ 0"&&c.tokenInfo.numb!=="- 0"?(P(),U("p",{key:1,class:He(c.tokenInfo.numb&&c.tokenInfo.numb.includes("+")?"addP":"")},fe(c.tokenInfo.numb)+" "+fe(c.tokenInfo.tokenb),3)):ae("",!0),c.tokenInfo.numc&&c.tokenInfo.numc!=="+ 0"&&c.tokenInfo.numc!=="- 0"?(P(),U("p",{key:2,class:He(c.tokenInfo.numc&&c.tokenInfo.numc.includes("+")?"addP":"")},fe(c.tokenInfo.numc)+" "+fe(c.tokenInfo.tokenc),3)):ae("",!0),c.tit=="Liquidity Removed"&&c.tokenInfo.pendingRewarderArr&&c.tokenInfo.pendingRewarderArr.length>0?(P(),U("div",y6,[(P(!0),U(tn,null,ln(c.tokenInfo.pendingRewarderArr,u=>(P(),U("div",{key:u.address,class:He(u.amount!==0?"addP":"")},[u.amount!==0?(P(),U("p",_6,fe(u.amount>1e-6?`+ ${u.amount}`:u.amount===0?"":"+ <0.000001")+" "+fe(u.symbol),1)):ae("",!0)],2))),128))])):ae("",!0)]))])])],8,zD))),128))])])):(P(),U("div",b6,[t.store.theme=="default"?(P(),U("img",v6)):(P(),U("img",k6)),S("p",null,fe(t.$t("newAdd.noTransactions")),1)]))])),t.currentToggle=="Wallet"?(P(),U("div",S6,[t.store.theme=="default"?(P(),U("img",T6)):(P(),U("img",A6))])):ae("",!0)],2))]),_:1},8,["width","class","onCancel"])}const I6=yn(aD,[["render",C6],["__scopeId","data-v-2836f008"]]);const E6=Sn({components:{Modal:vr},setup(t,e){const n=_e(""),i=on(),r=Ie(()=>i),s=Ie(()=>r.value.chainName&&r.value.chainName.toLowerCase().includes("sui")?r.value.chainName.split("2")[0]:r.value.chainName);Jt(()=>s.value,D=>{D&&(n.value=D=="Aptos"?en[D].rpcUrl:en[D].fullRpcUrl)},{immediate:!0});const o=_e(null),a=()=>o.value,c=()=>{e.emit("onClose")},l=_e(localStorage.getItem(`${s.value}-currentRpclocal2Name`)||Ws[s.value][0].name),u=_e(localStorage.getItem(`${s.value}-currentRpclocal2`)),d=_e(!1),h=_e(!0),f=(D,B)=>{d.value=!1,u.value="",l.value=D,l.value!=="Custom"&&(localStorage.setItem(`${s.value}-currentRpclocal2Name`,l.value),n.value=B,(localStorage.getItem(`${s.value}-currentRpclocal2`)||(s.value=="Aptos"?en[s.value].rpcUrl:en[s.value].fullRpcUrl))!=n.value&&(localStorage.setItem(`${s.value}-currentRpclocal2`,n.value),p.success({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:je("div",{class:"notification-title"},[je("span",{innerHTML:"RPC update"},null)]),description:je("div",{class:"notification-title"},[je("div",{class:"notification-text",innerHTML:`RPC is currently set to ${n.value}`},null)]),class:"ant-notification-copy ant-notification-swap"}),setTimeout(()=>{window.location.reload()},2e3)))},g=()=>!/^(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/.test(u.value);Jt(()=>u.value,(D,B)=>{const $=localStorage.getItem(`${s.value}-currentRpclocal2`);D==$?h.value=!1:h.value=!0,D!==B&&(d.value=!1)},{immediate:!0});const{$notify:p}=gl(),w=()=>{localStorage.setItem(`${s.value}-currentRpclocal2Name`,l.value),localStorage.setItem(`${s.value}-currentRpclocal2`,u.value),d.value=!1,p.success({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:je("div",{class:"notification-title"},[je("span",{innerHTML:"RPC update"},null)]),description:je("div",{class:"notification-title"},[je("div",{class:"notification-text",innerHTML:`RPC is currently set to ${u.value}`},null)]),class:"ant-notification-copy ant-notification-swap"}),setTimeout(()=>{window.location.reload()},2e3)},_=_e(localStorage.getItem(`${s.value}-currentExplorerUrl`)||Pa[s.value][0].link),k=_e(localStorage.getItem(`${s.value}-currentExplorerName`)||Pa[s.value][0].name),T=(D,B)=>{k.value=D,localStorage.setItem(`${s.value}-currentExplorerName`,k.value),localStorage.setItem(`${s.value}-currentExplorerUrl`,B);const $=new Event("updateExplorer");window.dispatchEvent($),_.value=B,p.success({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:je("div",{class:"notification-title"},[je("span",{innerHTML:"Explorer update"},null)]),description:je("div",{class:"notification-title"},[je("div",{class:"notification-text",innerHTML:`Explorer is currently set to ${_.value}`},null)]),class:"ant-notification-copy ant-notification-swap"})},R=Ie(()=>{let D=[{name:"Custom",link:""}];return s.value=="Sui"?r.value.suiRpcs&&r.value.suiRpcs.length>0?r.value.suiRpcs.concat(D):Ws[s.value]:r.value.aptosRpcs&&r.value.aptosRpcs.length>0?r.value.aptosRpcs.concat(D):Ws[s.value]}),E=_e(null);return Jt(()=>R.value,D=>{s.value==="Sui"&&(D==null?void 0:D.length)>0&&(E.value=setInterval(()=>{i.setRpcTimedelay(D)},3e3))},{immediate:!0}),ml(()=>{r.value.setIsShowExplorerH5(!1),r.value.setIsShowRpcH5(!1),s.value==="Sui"&&(clearInterval(E.value),E.value=null)}),{explorerSelected:k,store:r,changeExplorer:T,explorerObj:Pa,rpcList:R,rpcObj:Ws,currentRpc:n,getPopupContainer:a,settingModal:o,changeRpc:f,isShowTips:d,isUpdate:h,customRpc:u,chainName:s,rpcSelected:l,regTest:g,closeSystemSetting:c,saveCustomRpc:w,importIcon:Et}}}),x6=S("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1),M6={ref:"settingModal",class:"system-setting"},N6={key:0,class:"rpc-select-box"},O6={class:"rpc-select-top"},D6={class:"rpc-name"},j6=["onClick"],R6=["src"],B6={key:0},P6={key:0,class:"rpc-select-bottom"},F6={key:1,class:"rpc-select-tips"},U6={key:1,class:"rpc-select-box"},L6={class:"rpc-select-top"},$6={class:"rpc-name"},z6=["onClick"],q6=["src"];function V6(t,e,n,i,r,s){const o=Hp,a=eo,c=kr("Modal");return P(),xt(c,{class:"system-setting-modal system-setting-container-h5",title:t.store.isShowRpcH5?"RPC Node":"Preferred Explorer",centered:"",width:"400px",visible:!0,footer:null,onCancel:t.closeSystemSetting},{closeIcon:ft(()=>[x6]),default:ft(()=>[S("div",M6,[t.store.isShowRpcH5?(P(),U("div",N6,[S("div",O6,[(P(!0),U(tn,null,ln(t.rpcList,(l,u)=>(P(),U("div",{key:u,class:He(["select-item",t.rpcSelected==l.name?"select-item-active":""])},[S("div",D6,[S("div",{class:He(["check-box",t.chainName=="Aptos"?"aptos-check-box":"sui-check-box"]),onClick:St(d=>t.rpcSelected==l.name?"":t.changeRpc(l.name,l.link),["stop"])},[t.rpcSelected==l.name?(P(),U("img",{key:0,src:t.rpcSelected==l.name&&t.chainName=="Aptos"?("importIcon"in t?t.importIcon:et(Et))("/image/icon-selected@2x.png"):("importIcon"in t?t.importIcon:et(Et))("/sui-image/icon-selected@3x.png"),alt:""},null,8,R6)):ae("",!0)],10,j6),S("span",null,fe(l.name),1)]),t.chainName!=="Aptos"&&l.name!=="Custom"?(P(),U("div",{key:0,class:He(["rpc-rate",t.store.suiRpcTimeDelayObj?t.store.suiRpcTimeDelayObj&&Number(t.store.suiRpcTimeDelayObj[l.name])<=100?"green-rate":t.store.suiRpcTimeDelayObj&&Number(t.store.suiRpcTimeDelayObj[l.name])>200?"red-rate":"orange-rate":""])},[S("span",{class:He(t.store.suiRpcTimeDelayObj&&t.store.suiRpcTimeDelayObj[l.name]?"":"noColor")},null,2),t.store.suiRpcTimeDelayObj&&t.store.suiRpcTimeDelayObj[l.name]?(P(),U("p",B6,fe(t.store.suiRpcTimeDelayObj&&t.store.suiRpcTimeDelayObj[l.name])+"ms ",1)):ae("",!0)],2)):ae("",!0)],2))),128))]),t.rpcSelected=="Custom"?(P(),U("div",P6,[Ft(o,{value:t.customRpc,"onUpdate:value":e[0]||(e[0]=l=>t.customRpc=l),class:"rpc-input",type:"text",placeholder:"Custom RPC URL",onBlur:t.inputBlur},null,8,["value","onBlur"]),t.rpcSelected=="Custom"?(P(),xt(a,{key:0,class:"save-btn",disabled:t.regTest()||t.customRpc==t.currentRpc||!t.isUpdate,onClick:t.saveCustomRpc},{default:ft(()=>[ai("Save")]),_:1},8,["disabled","onClick"])):ae("",!0)])):ae("",!0),t.rpcSelected=="Custom"&&t.isShowTips?(P(),U("div",F6," Custom RPC URL is a required field ")):ae("",!0)])):(P(),U("div",U6,[S("div",L6,[(P(!0),U(tn,null,ln(("explorerObj"in t?t.explorerObj:et(U0))[t.chainName],(l,u)=>(P(),U("div",{key:u,class:He(["select-item",t.explorerSelected==l.name?"select-item-active":""])},[S("div",$6,[S("div",{class:He(["check-box",t.chainName=="Aptos"?"aptos-check-box":"sui-check-box"]),onClick:St(d=>t.explorerSelected==l.name?"":t.changeExplorer(l.name,l.link),["stop"])},[t.explorerSelected==l.name?(P(),U("img",{key:0,src:t.explorerSelected==l.name&&t.chainName=="Aptos"?("importIcon"in t?t.importIcon:et(Et))("/image/icon-selected@2x.png"):("importIcon"in t?t.importIcon:et(Et))("/sui-image/icon-selected@3x.png"),alt:""},null,8,q6)):ae("",!0)],10,z6),S("span",null,fe(l.name),1)])],2))),128))])]))],512)]),_:1},8,["title","onCancel"])}const W6=yn(E6,[["render",V6]]),K6=Sn({props:{platform:{type:String,default:"Alchemy"}},setup(t,e){const n=Ni(),i=Ie(()=>n),r=on(),s=Ie(()=>r),o=(c,l)=>{try{const u=Cc.enc.Utf8.parse(l),d=Cc.enc.Utf8.parse(l.substring(0,16)),h=Cc.enc.Utf8.parse(c);return Cc.AES.encrypt(c,u,{iv:d,mode:Cc.mode.CBC}).toString()}catch(u){console.log(`0613###AES encrypting exception, msg is ${u}`)}return null};return{iframeUrl:Ie(()=>{if(i.value.address&&s.value.currentCrypto){if(s.value.currentCrypto==="alchemy"){const c=`address=${i.value.address}&appId=eux4fx43yH39DsW0`,l=o(c,"J8Y2oKoFAKiw6OCq");return`https://ramp.alchemypay.org/?network=SUI&appId=eux4fx43yH39DsW0&sign=${encodeURIComponent(l)}&address=${i.value.address}`}return""}return""})}}});const Z6=t=>(di("data-v-221a106e"),t=t(),hi(),t),H6=Z6(()=>S("svg",{"aria-hidden":"true",class:"icon"},[S("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Q6=[H6],G6=["src"];function Y6(t,e,n,i,r,s){const o=vr;return P(),xt(o,{class:"buy-crypto-modal",visible:!!t.iframeUrl,title:null,footer:null,onCancel:e[1]||(e[1]=a=>t.$emit("onClose"))},{default:ft(()=>[S("div",{class:"close-icon",onClick:e[0]||(e[0]=a=>t.$emit("onClose"))},Q6),t.iframeUrl?(P(),U("iframe",{key:0,height:"625",title:"AlchemyPay On/Off Ramp Widget",src:t.iframeUrl,frameborder:"no",allowtransparency:"false",style:{display:"block",width:"100%","max-height":"625px","max-width":"500px"}},`
    `,8,G6)):ae("",!0)]),_:1},8,["visible"])}const X6=yn(K6,[["render",Y6],["__scopeId","data-v-221a106e"]]),J6=Sn({props:{platform:{type:String,default:"Alchemy"}},setup(t,e){const n=Ni(),i=Ie(()=>n),r=on(),s=Ie(()=>r);return{iframeUrl:Ie(()=>i.value.address&&s.value.currentCrypto&&s.value.currentCrypto==="KODO"?"https://global.kodo.finance?apiKey=m_prod_br9WUFm8nQ0TpzlITYVV13jZ52agwSQP":"")}}});const e8=t=>(di("data-v-d945dce3"),t=t(),hi(),t),t8=e8(()=>S("svg",{"aria-hidden":"true",class:"icon"},[S("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),n8=[t8],i8=["src"];function r8(t,e,n,i,r,s){const o=vr;return P(),xt(o,{class:"buy-crypto-modal",visible:!!t.iframeUrl,title:null,footer:null,onCancel:e[1]||(e[1]=a=>t.$emit("onClose"))},{default:ft(()=>[S("div",{class:"close-icon",onClick:e[0]||(e[0]=a=>t.$emit("onClose"))},n8),t.iframeUrl?(P(),U("iframe",{key:0,height:"625",title:"Kodo widget",src:t.iframeUrl,frameborder:"no",allowtransparency:"false",style:{display:"block",width:"100%","max-height":"625px","max-width":"500px"}},`
    `,8,i8)):ae("",!0)]),_:1},8,["visible"])}const s8=yn(J6,[["render",r8],["__scopeId","data-v-d945dce3"]]);const o8=Sn({components:{Modal:vr},setup(t,e){const n=_e(!1),i=on();Ie(()=>i);const r=Ni();return Ie(()=>r),{store:i,clickContinue:()=>{localStorage.setItem("IsShowBuyCryptoConfirm",!0),i.setIsShowBuyCryptoConfirm(!1),i.setIsShowBuyCryptoSelect(!0)},isSelect:n}}}),Em=t=>(di("data-v-8652d6d7"),t=t(),hi(),t),a8=Em(()=>S("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),c8=[a8],l8={class:"token-waring-conetnt"},u8=Em(()=>S("div",{class:"tips-text"}," Please note that the function you are requesting is provided by third-party service providers. If you encounter any issue or need support, please contact corresponding third party to resolve it. ",-1)),d8={class:"read-text"},h8={key:0,src:K2},f8=Em(()=>S("span",null," I acknowledge and accept. ",-1));function p8(t,e,n,i,r,s){const o=eo,a=kr("Modal");return P(),xt(a,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:e[2]||(e[2]=c=>t.$emit("close"))},{closeIcon:ft(()=>[(P(),U("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:e[0]||(e[0]=c=>t.$emit("close"))},c8))]),default:ft(()=>[S("div",l8,[u8,S("div",d8,[S("div",{class:"radio",onClick:e[1]||(e[1]=c=>t.isSelect=!t.isSelect)},[t.isSelect?(P(),U("img",h8)):ae("",!0)]),f8]),Ft(o,{class:"big-btn continue",disabled:!t.isSelect,onClick:t.clickContinue},{default:ft(()=>[ai("Continue")]),_:1},8,["disabled","onClick"])])]),_:1})}const g8=yn(o8,[["render",p8],["__scopeId","data-v-8652d6d7"]]);const m8=Sn({components:{Modal:vr},setup(t,e){const n=on(),i=Ni(),r=Ie(()=>i),s=_e([{id:"alchemy",name:"Alchemy Pay",icon:"alchemypay"},{id:"coinbase",name:"Coinbase Pay",icon:"coinbasepay"},{id:"KODO",name:"Kodo Pay",icon:"kodo"}]);return Ie(()=>n),{store:n,list:s,selectCrypto:a=>{if(n.setCurrentCrypto(a.id),a.id==="alchemy")n.setIsShowBuyCrypto(!0);else if(a.id==="KODO")console.log("kodo"),n.setIsShowBuyCryptoKODO(!0);else if(r.value.address){const c=W2({appId:"d2baaf93-cda5-404c-9be2-36695a530d02",destinationWallets:[{address:r.value.address,blockchains:["sui"]}]});window.open(c,"Coinbase Pay","height=700, width=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")}n.setIsShowBuyCryptoSelect(!1)}}}}),w8=t=>(di("data-v-2b3a9645"),t=t(),hi(),t),y8=w8(()=>S("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),_8=[y8],b8={class:"buy-crypto-select-container"},v8=["onClick"],k8=["src"];function S8(t,e,n,i,r,s){const o=kr("Modal");return P(),xt(o,{width:"440px",visible:!0,footer:null,title:"Buy Crypto","mask-closable":!0,onCancel:e[1]||(e[1]=a=>t.$emit("close"))},{closeIcon:ft(()=>[(P(),U("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:e[0]||(e[0]=a=>t.$emit("close"))},_8))]),default:ft(()=>[S("div",b8,[S("ul",null,[(P(!0),U(tn,null,ln(t.list,a=>(P(),U("li",{key:a.id,onClick:c=>t.selectCrypto(a)},[S("img",{src:`/image/${a.icon}.png`},null,8,k8),S("span",null,fe(a.name),1)],8,v8))),128))])])]),_:1})}const T8=yn(m8,[["render",S8],["__scopeId","data-v-2b3a9645"]]);console.log(L0,"envs");const Ju={pro:{url:"https://launch.cetus.zone",deepBookUrl:"https://deepbook.cetus.zone/"},pre:{url:"https://launch.cetus.zone",deepBookUrl:"https://deepbook-trade-pre.netlify.app/"},test:{url:"https://cetus-launchpad-site.netlify.app",deepBookUrl:"https://deepbook-trade-test.netlify.app/"}},A8={...Ju[L0]},lc={en:{icon:"EN",label:"English"},th:{icon:"TH",label:"ไทย"},hi:{icon:"IN",label:"Hindī"},kr:{icon:"KR",label:"한국어"},vi:{icon:"VN",label:"Tiếng Việt"},ja:{icon:"JP",label:"日本語"},ru:{icon:"RU",label:"Русский"},tr:{icon:"TR",label:"Türkçe"},tradCh:{icon:"CN",label:"中文"}},Ml=[{icon:"EN",label:"English",value:"en"},{icon:"TH",label:"ไทย",value:"th"},{icon:"IN",label:"Hindī",value:"hi"},{icon:"KR",label:"한국어",value:"kr"},{icon:"VN",label:"Tiếng Việt",value:"vi"},{icon:"JP",label:"日本語",value:"ja"},{icon:"RU",label:"Русский",value:"ru"},{icon:"TR",label:"Türkçe",value:"tr"},{icon:"CN",label:"中文",value:"tradCh"}],C8=Sn({setup(){const{t}=Ko();lh();const e=V0(),n=Ie(()=>e),i=Ni(),r=Ie(()=>i);let s=[{name:t("contactUS.twitter"),icon:"#icon-svg-twitter",link:"https://twitter.com/cetusprotocol"},{name:t("contactUS.discord"),icon:"#icon-svg-Discord",link:"https://discord.gg/rQtYGfmcD8"},{name:t("contactUS.tgChannel"),icon:"#icon-svg-tg",link:"https://t.me/cetusprotocol"},{name:t("contactUS.medium"),icon:"#icon-svg-medium",link:"https://medium.com/@CetusProtocol"}];const o=[{name:"Sui"},{name:"Aptos"}];let a=_e(!1);const c=on(),l=Ie(()=>c);let u=_e(l.value.chainName||"Aptos");const d=_e(!1);Hc(()=>{document.body.clientWidth<750?d.value=!1:d.value=!0,window.onresize=()=>{document.body.clientWidth<750?d.value=!1:d.value=!0},document.addEventListener("click",()=>{a.value=!1})}),ml(()=>{document.removeEventListener("click",()=>{a.value=!1})});const h=tg(),f=E=>{u.value=E,E=="Aptos"&&h.seleteDefaultTheme(),E=="Sui"&&h.selectSuiTheme()},{locale:g}=Ko(),p=_e(!1),{setLang:w}=c,_=E=>{w(E),g.value=E,s=[{name:t("contactUS.twitter"),icon:"#icon-icon-twitter",link:"https://twitter.com/cetusprotocol"},{name:t("contactUS.discord"),icon:"#icon-icon-Discord",link:"https://discord.gg/cetusprotocol"},{name:t("contactUS.tgChannel"),icon:"#icon-icon-TgChannel",link:"https://t.me/cetusprotocol"},{name:t("contactUS.medium"),icon:"#icon-icon-medium",link:"https://medium.com/@CetusProtocol"}]},k=Ie(()=>l.value.openH5Icon),T=()=>{r.value.address?localStorage.getItem("IsShowBuyCryptoConfirm")?l.value.setIsShowBuyCryptoSelect(!0):l.value.setIsShowBuyCryptoConfirm(!0):r.value.setIsShowWalletModal(!0)},R=Ie(()=>en[l.value.chainName]);return{siteUrlObj:A8,openH5Icon:k,isPc:d,launchpad:n,changeChain:f,currentChain:u,chainList:o,openSwitchChain:a,importIcon:Et,store:l,list:s,themeStore:h,counter:c,langObj:lc,changeLang:_,openSwitchLang:p,langList:Ml,onpenCrypto:T,config:R}}}),I8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAABACAMAAADRVBl4AAAAYFBMVEVHcEz///////////+n892x9uP///////////////9n/9n///8y6LgA1Z7///////////9o/9lo/9ln/9lo/9n///8C1p8A1J4A1Z8A1Z5o/9lo/9j///8A1J467L8Y3qtr5PYdAAAAG3RSTlMAMqK9BxPo82T9jFkyjj5H1LFT0Ot9Ze3bv3FnWwE/AAAELklEQVR42u2biZKiMBCGQ0jAICiniIK+/1vuEEAJpHOM6xxk/tqaqtmJJnz0lQ4gJBPNo6woy2tZFlmUx8hN0ai4iiojB1nkSwqDihP5wzDofHLIKbIrrFvXuOIgeXlV6d51bhhFdNWo67rGgUixdIvskuf5JSvnztF1Z7pxDGTBIZoumFzKuUlsnoTIoYilIfTGSRB34kNGgL/2ILpmy/lCtAcK2cudk0i2Wz+IeTMGB3Df6LrYjQCRSUZc5r6x2TAhOsZVdr+J4BtbdQ5xf1GqjGb0jZo6YBCZdNBFALFNk1hsOCNpvZULQaKrNxgl4qsBiMlsivNIAtp+HXEaSrUbB4StSmwahpXDWn+8EfyXI7CWA594WpgfaKaMbEBcTiMIeVXlpeDSw4MJiLbdj1/lq4FhAxBHPnKwaNwy3cqWrZhMUXqWFCUjCZlv7Jhi7QE1AhGOl0VTE9MxBaE0sGFldLXbJmAgKfvMmoC+oeTQtik1AfG4QZ5m5NECxFH9VSlZ54wP5UAgKccdaZycpXnjsfIQEH6AwDuFJufwZv8n+dTeAoSvXNewsnU7ppCByIWmfhyf1mXXMFuwU9cY/JJ2thEd+pQhiJCHFWLVj+kjolkHY2kQ7Gn/PwwE4cM8qyoCLLK1qkxm+8EgZA3b8jMkuGf4aFMgPrzDvnLk6a76kSCMJgU61sXFdl8VmF3hEP/3kN4Dgt8k5suFh/AOn2UUWbRS8hR9AQRc5b0HRKUpXSolCOlp11OvgGi/GAQN1CRYJc8aqsOuh8gvAoE8HYkDymxAzDjU6DeBQLRSo8D6gz7AM5pXQOwopHeB6Fl4Uh143g8kew0jg1jvNb4lfYZaEAFYCj/aFgMv+jmDWO8+fZ6hvhhEOkY6sNZlqfa7PW5WNtFyzmHdj+Apin1xic37DKmqxMNmIBgyDxLzlCHpUHntN2y6eutngElUYzowBRF/xjFkfZnv2IaPNSNez0kxM9v8DFYVIGPfEDjIuthTY4aFgUR7ocQGuzLEEsSBcZsIfSzKD9uZQVQBrPDRA83tOcjPNXZTdSKtEDyj5q1PLO1IXT1Xs7vO+n+rH4w9V1dYcwBOuv5H8xbbOlTFlJXzmDp9k1Zwbhko4YOuQ6prkeqbt9g2shyhSdNZgaFsiod7uF2nsgfVaXh/wMMAYSMQ0qJMGWLJfj1pmOK9sEpw3xWm1cO+aWmRL158PoIYCPjU+0/9SG7FYbtPzKiqqtt9yWHTz1qSzCxKbv/5QimJtTU48MQpvd30FBzggOKPq7zfb4PuUghuPIt96gyUoO2r0WM4O/G+Rq3DULvxMlOsswZX3ulShog6cectv2R18cPzc3WT9M+EuPOK33nJIeY7HeQSA15YSji4KBL/cZCFiIa6ykEop+qTsxgQqd0rGORbz6Sp+4yZnJwNDv8ACUmpoYUJbW0AAAAASUVORK5CYII=",Dh=""+globalThis.__publicAssetsURL("sui-image/icon-star2.png"),E8=""+globalThis.__publicAssetsURL("image/icon-star-Aptos.png");const Ct=t=>(di("data-v-a1cbcd1c"),t=t(),hi(),t),x8=Ct(()=>S("div",{class:"logo"},[S("img",{src:I8,alt:""})],-1)),M8={class:"menu-list"},N8={key:0},O8=Ct(()=>S("div",{class:"left active-star"},null,-1)),D8=Ct(()=>S("div",{class:"right active-star"},null,-1)),j8=Ct(()=>S("span",{class:"trade-title"},"Trade",-1)),R8=Ct(()=>S("use",{"xlink:href":"#icon-icon_on"},null,-1)),B8=[R8],P8=Ct(()=>S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_swap"})],-1)),F8=["href"],U8=Ct(()=>S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_deepbook"})]),S("span",null,"DeepBook")],-1)),L8=[U8],$8=Ct(()=>S("span",{class:"trade-title"},"Trade",-1)),z8=Ct(()=>S("use",{"xlink:href":"#icon-icon_on"},null,-1)),q8=[z8],V8=Ct(()=>S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_swap"})],-1)),W8=["href"],K8=Ct(()=>S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_deepbook"})]),S("span",null,"DeepBook")],-1)),Z8=[K8],H8={key:2},Q8=Ct(()=>S("div",{class:"left active-star"},null,-1)),G8=Ct(()=>S("div",{class:"right active-star"},null,-1)),Y8=Ct(()=>S("span",{class:"trade-title"},"Earn",-1)),X8=Ct(()=>S("use",{"xlink:href":"#icon-icon_on"},null,-1)),J8=[X8],ej=Ct(()=>S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_liquiditypools"})]),S("span",null,"Pools")],-1)),tj={key:0,class:"star-img",src:Dh},nj=Ct(()=>S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_farms"})]),S("span",null,"Farms")],-1)),ij={key:0,class:"star-img",src:Dh},rj=Ct(()=>S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_vaults"})]),S("span",null,"Vaults")],-1)),sj={key:0,class:"star-img",src:Dh},oj={class:"table-link"},aj=Ct(()=>S("div",{class:"left active-star"},null,-1)),cj=Ct(()=>S("div",{class:"right active-star"},null,-1)),lj={key:0,class:"icon h5-icon","aria-hidden":"true"},uj=Ct(()=>S("use",{"xlink:href":"#icon-icon_on1"},null,-1)),dj=[uj],hj=Ct(()=>S("div",{class:"the-sign"},null,-1)),fj={key:0,class:"link-list"},pj=["href"],gj={key:0,class:"link-list"},mj=Ct(()=>S("span",{class:"tit"},"More",-1)),wj=Ct(()=>S("use",{"xlink:href":"#icon-icon_on"},null,-1)),yj=[wj],_j=Ct(()=>S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-buy-crypto"})]),S("span",null,"Buy Crypto")],-1)),bj=[_j],vj=["href"],kj=Ct(()=>S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon-Bridge"})]),S("span",null,"Bridge")],-1)),Sj=[kj],Tj=Ct(()=>S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon-Stats"})]),S("span",null,"Stats")],-1)),Aj={key:0,class:"star-img",src:E8},Cj={key:1,class:"star-img",src:Dh},Ij=Ct(()=>S("a",{class:"item",href:"https://cetus-1.gitbook.io/cetus-docs",target:"_blank"},[S("div",null,[S("svg",{class:"item-icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon-Docs1"})]),S("span",null,"Docs")])],-1)),Ej=Ct(()=>S("div",{class:"line"},null,-1)),xj={class:"contact-us-list"},Mj=["href"],Nj={"aria-hidden":"true",class:"svg-icon"},Oj=["xlink:href"],Dj={class:"h5-more"},jj={class:"lang-tab"},Rj={class:"lang-box-all"},Bj=Ct(()=>S("div",{class:"current-lang rpc-box"},[S("svg",{"aria-hidden":"true",class:"svg-icon"},[S("use",{"xlink:href":"#icon-icon-RPC1"})]),S("span",null,"RPC Node")],-1)),Pj=[Bj],Fj=Ct(()=>S("div",{class:"current-lang rpc-box"},[S("svg",{"aria-hidden":"true",class:"svg-icon"},[S("use",{"xlink:href":"#icon-icon-Preferred-Explorer"})]),S("span",null,"Preferred Explorer")],-1)),Uj=[Fj],Lj={class:"current-lang"},$j=Ct(()=>S("svg",{"aria-hidden":"true",class:"svg-icon"},[S("use",{"xlink:href":"#icon-icon-Language"})],-1)),zj={class:"lang-icon"},qj=Ct(()=>S("use",{"xlink:href":"#icon-icon_on"},null,-1)),Vj=[qj],Wj={key:0,class:"list"},Kj=["onClick"],Zj={class:"lang-icon"},Hj={class:"contact-us"},Qj={class:"contact-us-list"},Gj=["href"],Yj={"aria-hidden":"true",class:"icon"},Xj=["xlink:href"];function Jj(t,e,n,i,r,s){const o=Z2;return P(),U("div",{class:He(t.openH5Icon?"menu h5-menu":"menu")},[x8,S("div",M8,[t.store.theme=="default"?(P(),U("div",N8,[Ft(o,{to:"/swap",class:He(t.$route.name==="swap"||t.$route.path==="/"?"nuxt-link-exact-active nuxt-link-active menu-item-active":"")},{default:ft(()=>[S("span",null,fe(t.$t("menu.swap")),1),O8,D8]),_:1},8,["class"])])):(P(),U(tn,{key:1},[S("div",{class:He(["trade trade-pc",t.store.isShowHeaderTrade?"trade-active":"trade-default"]),onClick:e[0]||(e[0]=St(()=>{t.store.setIsShowHeaderEarn(!1),t.store.setIsShowHeaderTrade(!t.store.isShowHeaderTrade),t.store.setIsShowHeaderMore(!1),t.$router.push("/swap")},["stop"]))},[j8,(P(),U("svg",{class:He(["icon",t.store.isShowHeaderTrade?"icon-opens":"icon-closes"]),"aria-hidden":"true"},B8,2)),S("div",{class:He(["trade-list",t.store.isShowHeaderTrade?"show-earnlist":"hidden-earnlist"])},[Ft(o,{to:"/swap",class:He(t.$route.name==="swap"||t.$route.path==="/"?"nuxt-link-exact-active nuxt-link-active menu-item-active":"")},{default:ft(()=>[S("div",null,[P8,S("span",null,fe(t.$t("menu.swap")),1)])]),_:1},8,["class"]),S("a",{href:("siteUrlObj"in t?t.siteUrlObj:et(Ju)).deepBookUrl,target:"_blank"},L8,8,F8)],2)],2),S("div",{class:He(["trade trade-h5",t.store.isShowHeaderTrade?"trade-active":"trade-default"]),onClick:e[1]||(e[1]=St(()=>{t.store.setIsShowHeaderEarn(!1),t.store.setIsShowHeaderTrade(!t.store.isShowHeaderTrade),t.store.setIsShowHeaderMore(!1)},["stop"]))},[$8,(P(),U("svg",{class:He(["icon",t.store.isShowHeaderTrade?"icon-opens":"icon-closes"]),"aria-hidden":"true"},q8,2)),S("div",{class:He(["trade-list",t.store.isShowHeaderTrade?"show-earnlist":"hidden-earnlist"])},[Ft(o,{to:"/swap",class:He(t.$route.name==="swap"||t.$route.path==="/"?"nuxt-link-exact-active nuxt-link-active menu-item-active":"")},{default:ft(()=>[S("div",null,[V8,S("span",null,fe(t.$t("menu.swap")),1)])]),_:1},8,["class"]),S("a",{href:("siteUrlObj"in t?t.siteUrlObj:et(Ju)).deepBookUrl,target:"_blank"},Z8,8,W8)],2)],2)],64)),t.store.theme=="default"?(P(),U("div",H8,[Ft(o,{to:"/pools",class:He(t.$route.name==="pools"||t.$route.name==="pools"||t.$route.name==="pool-position"||t.$route.name==="pool-list"||t.$route.name==="position"||t.$route.name==="remove-liquidity"||t.$route.name==="increase-liquidity"||t.$route.name==="pools-liquidity-add"||t.$route.name==="pools-management-remove"||t.$route.path.includes("position-detail")||t.$route.path.includes("deposit")||t.$route.name==="liquidity-deposit"||t.$route.name==="liquidity-position"||t.$route.name==="liquidity-analytics"||t.$route.name==="liquidity-create"||t.$route.path.includes("auto-pool-detail")?"nuxt-link-exact-active nuxt-link-active menu-item-active":"")},{default:ft(()=>[S("span",null,fe(t.$t("menu.pools")),1),Q8,G8]),_:1},8,["class"])])):(P(),U("div",{key:3,class:He(["trade",t.store.isShowHeaderEarn?"trade-active":"trade-default"]),onClick:e[5]||(e[5]=St(()=>{t.store.setIsShowHeaderMore(!1),t.store.setIsShowHeaderTrade(!1),t.store.setIsShowHeaderEarn(!t.store.isShowHeaderEarn)},["stop"]))},[Y8,(P(),U("svg",{class:He(["icon",t.store.isShowHeaderEarn?"icon-opens":"icon-closes"]),"aria-hidden":"true"},J8,2)),S("div",{class:He(["trade-list",t.store.isShowHeaderEarn?"show-earnlist":"hidden-earnlist"])},[Ft(o,{to:t.store.theme=="sui"?"/pool/list":"/pools",class:He(t.$route.name==="pools"||t.$route.name==="pool-position"||t.$route.name==="pool-list"||t.$route.name==="position"||t.$route.name==="remove-liquidity"||t.$route.name==="increase-liquidity"||t.$route.name==="pools-liquidity-add"||t.$route.name==="pools-management-remove"||t.$route.path.includes("position-detail")||t.$route.path.includes("deposit")||t.$route.name==="liquidity-deposit"||t.$route.name==="liquidity-position"||t.$route.name==="liquidity-analytics"||t.$route.name==="liquidity-create"||t.$route.name==="pool-vaults"||t.$route.path.includes("auto-pool-detail")?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[2]||(e[2]=St(a=>t.store.setOpenH5Icon(!1),["stop"]))},{default:ft(()=>[ej,t.store.theme=="sui"&&(t.$route.name==="pools"||t.$route.name==="pool-position"||t.$route.name==="pool-list"||t.$route.name==="position"||t.$route.name==="remove-liquidity"||t.$route.name==="increase-liquidity"||t.$route.name==="pools-liquidity-add"||t.$route.name==="pools-management-remove"||t.$route.path.includes("position-detail")||t.$route.path.includes("deposit")||t.$route.name==="liquidity-deposit"||t.$route.name==="liquidity-position"||t.$route.name==="liquidity-analytics"||t.$route.name==="liquidity-create"||t.$route.name==="pool-vaults"||t.$route.path.includes("auto-pool-detail"))?(P(),U("img",tj)):ae("",!0)]),_:1},8,["to","class"]),Ft(o,{to:"/farms",class:He(t.$route.name==="farms"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[3]||(e[3]=St(a=>t.store.setOpenH5Icon(!1),["stop"]))},{default:ft(()=>[nj,t.store.theme=="sui"&&t.$route.name==="farms"?(P(),U("img",ij)):ae("",!0)]),_:1},8,["class"]),("config"in t?t.config:et(en)).hasVault?(P(),xt(o,{key:0,to:"/vaults",class:He(t.$route.name==="vaults"||t.$route.path.includes("vaults-detail")?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[4]||(e[4]=St(a=>t.store.setOpenH5Icon(!1),["stop"]))},{default:ft(()=>[rj,t.store.theme=="sui"&&(t.$route.name==="vaults"||t.$route.path.includes("vaults-detail"))?(P(),U("img",sj)):ae("",!0)]),_:1},8,["class"])):ae("",!0)],2)],2)),S("div",oj,[Ft(o,{class:He(["span-link",t.$route.name==="xcetus"||t.$route.name==="leaderboard"||t.$route.name==="booster-manage"||t.$route.name==="lockup-liquidity"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""]),to:"/xcetus"},{default:ft(()=>[ai(" xCETUS "),aj,cj,t.store.theme=="sui"?(P(),U("svg",lj,dj)):ae("",!0),hj]),_:1},8,["class"]),t.store.theme=="default"?(P(),U("div",fj," xCETUS features are currently available on Sui network. ")):ae("",!0)]),S("a",{href:`${("siteUrlObj"in t?t.siteUrlObj:et(Ju)).url}/?chain=sui`,target:"_blank"},[S("span",null,fe(t.$t("menu.launchpad")),1),t.store.theme=="default"?(P(),U("div",gj," Launchpad features are currently available on Sui network. ")):ae("",!0)],8,pj),S("div",{class:"header-more table-link",onClick:e[8]||(e[8]=St(()=>{t.store.setIsShowHeaderEarn(!1),t.store.setIsShowHeaderTrade(!1),t.store.setIsShowHeaderMore(!t.store.isShowHeaderMore)},["stop"]))},[S("div",{class:He(["tit-box",t.store.isShowHeaderMore?" ":"noLine"])},[mj,(P(),U("svg",{class:He(["icon icon_on icon-open",t.store.isShowHeaderMore?"icon-opens":"icon-closes"]),"aria-hidden":"true"},yj,2))],2),t.isPc||t.store.isShowHeaderMore?(P(),U("div",{key:0,class:He(["more-list",t.store.isShowHeaderMore?"show-morelist":"hidden-morelist"])},[t.store.chainName==="Sui"?(P(),U("a",{key:0,class:"item",onClick:e[6]||(e[6]=(...a)=>t.onpenCrypto&&t.onpenCrypto(...a))},bj)):ae("",!0),S("a",{class:"item",href:t.store.theme=="default"?"https://bridge.cetus.zone/":"https://bridge.cetus.zone/sui",target:"_blank"},Sj,8,vj),Ft(o,{to:"/stats",class:He(["item",t.$route.name==="stats"||t.$route.name==="stats-pools"||t.$route.name==="stats-tokens"?"item-active":""]),onClick:e[7]||(e[7]=St(a=>t.store.setOpenH5Icon(!t.store.openH5Icon),["stop"]))},{default:ft(()=>[Tj,t.store.theme=="default"&&(t.$route.name==="stats"||t.$route.name==="stats-pools"||t.$route.name==="stats-tokens")?(P(),U("img",Aj)):ae("",!0),t.store.theme=="sui"&&(t.$route.name==="stats"||t.$route.name==="stats-pools"||t.$route.name==="stats-tokens")?(P(),U("img",Cj)):ae("",!0)]),_:1},8,["class"]),Ij,Ej,S("div",xj,[(P(!0),U(tn,null,ln(t.list,(a,c)=>(P(),U("div",{key:c,class:"contact-us-item"},[S("a",{class:"item",href:a.link,target:"_blank"},[(P(),U("svg",Nj,[S("use",{"xlink:href":a.icon},null,8,Oj)]))],8,Mj)]))),128))])],2)):ae("",!0)])]),S("div",Dj,[S("div",jj,[S("div",Rj,[S("div",{class:"switch-lang",onClick:e[9]||(e[9]=St(()=>{t.store.setIsShowSettingH5(!t.store.isShowSettingH5),t.store.setIsShowRpcH5(!t.store.isShowRpcH5),t.store.setOpenH5Icon(!1),t.store.setOpenSwitchChain(!1),t.store.setOpenMore(!1),t.store.setIsShowMore(!1),t.store.setOpenSwitchLang(!1),t.store.setIsShowHeaderMore(!1),t.store.setIsShowHeaderEarn(!1)},["stop"]))},Pj),t.store.theme!=="default"?(P(),U("div",{key:0,class:"switch-lang",onClick:e[10]||(e[10]=St(()=>{t.store.setIsShowSettingH5(!t.store.isShowSettingH5),t.store.setIsShowExplorerH5(!t.store.isShowExplorerH5),t.store.setOpenH5Icon(!1),t.store.setOpenSwitchChain(!1),t.store.setOpenMore(!1),t.store.setIsShowMore(!1),t.store.setOpenSwitchLang(!1),t.store.setIsShowHeaderMore(!1),t.store.setIsShowHeaderEarn(!1)},["stop"]))},Uj)):ae("",!0),S("div",{class:"switch-lang",onClick:e[11]||(e[11]=St(a=>t.openSwitchLang=!t.openSwitchLang,["stop"]))},[S("div",Lj,[S("div",null,[$j,S("span",zj,fe(("langObj"in t?t.langObj:et(lc))[t.counter.lang].icon),1),S("span",null,fe(("langObj"in t?t.langObj:et(lc))[t.counter.lang].label),1)]),(P(),U("svg",{class:He([t.openSwitchLang?"icon-open":"icon-close","icon"]),"aria-hidden":"true"},Vj,2))]),t.openSwitchLang?(P(),U("div",Wj,[(P(!0),U(tn,null,ln("langList"in t?t.langList:et(Ml),a=>(P(),U("div",{key:a.value,class:He(a.value==t.counter.lang?"item-container item-active-container":"item-container")},[S("div",{class:"item",onClick:c=>t.changeLang(a.value)},[S("span",Zj,fe(a.icon),1),S("span",null,fe(a.label),1)],8,Kj)],2))),128))])):ae("",!0)])])]),S("div",Hj,[S("div",Qj,[(P(!0),U(tn,null,ln(t.list,(a,c)=>(P(),U("div",{key:c,class:"contact-us-item"},[S("a",{class:"item",href:a.link,target:"_blank"},[(P(),U("svg",Yj,[S("use",{"xlink:href":a.icon},null,8,Xj)]))],8,Gj)]))),128))])])])],2)}const eR=yn(C8,[["render",Jj],["__scopeId","data-v-a1cbcd1c"]]),tR=Sn({components:{Modal:vr},setup(){const t=Ni(),e=Ie(()=>t),{t:n}=Ko(),i=on(),r=Ie(()=>i),s=Ie(()=>r.value.currentExplorer),{connect:o,disconnect:a}=Kd(),c=Ie(()=>r.value.chainName),l=()=>{t.setIsShowWalletModal(!1),a()},u=_e(!1),d=_e([]),h=_e(""),f=_e(!1);Ff([]);const g=async()=>{var z,H;u.value=!0;try{const ie=await $fetch(`https://api.blockvision.org/v3/sui/account/activities?address=${e.value.address}&protocol=cetus&cursor=${h.value}`,{method:"GET",headers:{accept:"application/json","x-api-key":"bdU4jzPvMTgmEDokRZGACw6epSB9NXWt"}});let ze=(((z=ie==null?void 0:ie.result)==null?void 0:z.data)||[]).map(se=>{let le=se.coinChanges?[...se.coinChanges]:[];return le.sort((Ne,he)=>parseFloat(he.amount)-parseFloat(Ne.amount)),{...se,coinChanges:le}});h.value=(H=ie==null?void 0:ie.result)==null?void 0:H.nextPageCursor,d.value=d.value.concat(ze),u.value=!1}catch(ie){console.log(ie,"error"),u.value=!1}},p=z=>{switch(z){case"Swap":return"/sui-image/icon_swap@2x.png";case"AddLiquidity":return"/sui-image/icon_liquidityincreased@2x.png";case"AddLiquidityAndClaim":return"/sui-image/icon_liquidityincreased@2x.png";case"RemoveLiquidity":return"/sui-image/icon_liquidityremoved@2x.png";case"RemoveLiquidityAndClaim":return"/sui-image/icon_liquidityremoved@2x.png";case"convert":return"/sui-image/icon_swap@2x.png";case"Contract Interaction":return"/sui-image/icon_presalesettled@2x.png";case"redeem_lock":return"/sui-image/icon_redeem@2x.png";case"mint_and_convert":return"/sui-image/icon_presalesettled@2x.png";case"collect_fee":return"/sui-image/icon_presalesettled@2x.png";default:return"/sui-image/icon_presalesettled@2x.png"}},w=z=>{switch(z){case"Swap":return{background:"url(/sui-image/bg_swap@2x.png)",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"AddLiquidityAndClaim":return{background:"url(/sui-image/bg_liquidityincreased@2x.png)",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"AddLiquidity":return{background:"url(/sui-image/bg_liquidityincreased@2x.png)",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"RemoveLiquidity":return{background:"url(/sui-image/bg_liquidityremoved@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"RemoveLiquidityAndClaim":return{background:"url(/sui-image/bg_liquidityremoved@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"convert":return{background:"url(/sui-image/bg_swap@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"Contract Interaction":return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"redeem_lock":return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"mint_and_convert":return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"collect_fee":return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};default:return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"}}};Hc(()=>{g()});const _=_e(null),k=_e(null),T=()=>{const z=_.value,{scrollTop:H,clientHeight:ie,scrollHeight:ke}=z;H+ie>=ke-10&&h.value&&g()},R=()=>{const z=k.value,{scrollTop:H,clientHeight:ie,scrollHeight:ke}=z;H+ie>=ke-10&&h.value&&g()},E=z=>{switch(z){case"convert":return"Convert";case"RemoveLiquidity":return"Remove Liquidity";case"AddLiquidity":return"Add Liquidity";case"redeem_lock":return"Redeem";case"cancel_redeem_lock":return"Cancel Redemption";case"mint_and_convert":return"Mint and Convert";case"collect_fee":return"Claim Fees";case"redeem":return"Claim (Redeem)";case"claim":return"Claim (Purchase)";case"purchase":return"Purchase";case"create_and_purchase":return"Purchase";case"collect_reward":return"Claim Farming Rewards";case"open_position_with_liquidity_with_all":return"Add Liquidity Failed";case"RemoveLiquidityAndClaim":return"Remove Liquidity";case"AddLiquidityAndClaim":return"Add Liquidity";default:return z}},D=dh(),B=Ie(()=>D);return{wallet:e,t:n,indexStore:i,currentExplorer:s,getExplorerUrl:ps,onDisconnect:l,historyList:d,getImage:p,prettyAmount:Gm,addCommom:zo,timeFormat:Qc,getStyle:w,loading:u,showWalletHis:f,handleScroll:T,scrollWrapperRef:_,getType:E,h5ScrollWrapperRef:k,handleH5Scroll:R,chainName:c,getCoinIcon:z=>{var H;return((H=B.value.tokensObj[z==null?void 0:z.coinAddress])==null?void 0:H.logo_url)||z.logo||Et("/image/coins/sui-unknown.png")},getAmount:(z,H)=>{const ke=Gm(z,H).replace("-","");return ke>1e6?z.indexOf("-")>-1?`-${Hm(ke)}`:`+${Hm(ke)}`:z.indexOf("-")>-1?`-${zo(ke)}`:`+${zo(ke)}`}}}}),jh=""+globalThis.__publicAssetsURL("sui-image/icon_suivision@2x.png");const an=t=>(di("data-v-c0c73b5d"),t=t(),hi(),t),nR={class:"wallet-name"},iR={class:"wallet-address"},rR=["href"],sR=an(()=>S("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),oR=[sR],aR=["href"],cR=an(()=>S("svg",{class:"icon icon-up","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon-link1"})],-1)),lR=[cR],uR={class:"list"},dR=an(()=>S("svg",{class:"icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_recenttransactions1"})],-1)),hR=an(()=>S("span",null,"Recent Transactions",-1)),fR=[dR,hR],pR=an(()=>S("svg",{class:"icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_disconnect"})],-1)),gR=an(()=>S("span",null,"Disconnect",-1)),mR=[pR,gR],wR={key:0,class:"table-top"},yR=an(()=>S("table",null,[S("thead",null,[S("tr",null,[S("th",null,"Activity"),S("th",null,"Assets"),S("th",null,"Txns")])])],-1)),_R=[yR],bR=["src"],vR={class:"activity-right"},kR={class:"coin-changes-item"},SR={class:"coin-changes-item-box"},TR={alt:""},AR={class:"txns"},CR=["href"],IR=an(()=>S("img",{src:jh,alt:""},null,-1)),ER={key:0,class:"loading-more"},xR={key:2,class:"loding-box"},MR={key:3,class:"no-data"},NR=an(()=>S("img",{src:eg},null,-1)),OR=an(()=>S("span",null,"No transactions found",-1)),DR=[NR,OR],jR={class:"table-bottom"},RR=an(()=>S("div",{class:"powered-source"},[S("span",null,"Powered by"),S("img",{src:jh,alt:""}),S("span",null,"SuiVision")],-1)),BR={class:"view-trans"},PR=["href"],FR=an(()=>S("span",null,"View all transactions",-1)),UR=an(()=>S("svg",{class:"icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon-link1"})],-1)),LR=[FR,UR],$R={class:"h5-trans"},zR=["src"],qR={class:"activity-right"},VR=an(()=>S("div",{class:"assets-title"},"Assets",-1)),WR={class:"coin-changes-item"},KR={class:"coin-changes-item-box"},ZR={alt:""},HR={class:"txns"},QR=an(()=>S("div",null,"Txns",-1)),GR=["href"],YR=an(()=>S("img",{src:jh,alt:""},null,-1)),XR={key:0,class:"loading-more"},JR={class:"table-bottom"},e5={class:"view-trans"},t5=["href"],n5=an(()=>S("span",null,"View all transactions",-1)),i5=an(()=>S("svg",{class:"icon","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon-link1"})],-1)),r5=[n5,i5],s5=an(()=>S("div",{class:"powered-source"},[S("span",null,"Powered by"),S("img",{src:jh,alt:""}),S("span",null,"SuiVision")],-1)),o5={key:0,class:"no-data"},a5=an(()=>S("img",{src:eg},null,-1)),c5=an(()=>S("span",null,"No transactions found",-1)),l5=[a5,c5];function u5(t,e,n,i,r,s){const o=m2,a=kr("Modal"),c=Kp("image");return P(),U("div",{class:"wallet-connected-modal",onClick:e[7]||(e[7]=St(()=>{},["stop"]))},[S("div",nR,fe(t.$t("modal.walletName"))+" "+fe(t.wallet.walletName=="SuiMetaMaskSnap"?"Sui MetaMask Snap":t.wallet.walletName),1),S("div",iR,[S("a",{class:"wallet-address-text",target:"_blank",href:("getExplorerUrl"in t?t.getExplorerUrl:et(ps))(t.currentExplorer,"account",t.wallet.address)},fe(t.wallet.address&&t.wallet.address.substr(0,6))+" ... "+fe(t.wallet.address&&t.wallet.address.substr(t.wallet.address.length-4,4)),9,rR),(P(),U("svg",{class:"icon","aria-hidden":"true",onClick:e[0]||(e[0]=l=>t.indexStore.copy(t.wallet.address))},oR)),S("a",{target:"_blank",class:"jump-icon",href:("getExplorerUrl"in t?t.getExplorerUrl:et(ps))(t.currentExplorer,"account",t.wallet.address)},lR,8,aR)]),S("div",uR,[t.chainName=="Sui"?(P(),U("div",{key:0,class:"list-item",onClick:e[1]||(e[1]=l=>t.showWalletHis=!0)},fR)):ae("",!0),S("div",{class:"list-item",onClick:e[2]||(e[2]=(...l)=>t.onDisconnect&&t.onDisconnect(...l))},mR)]),Ft(a,{width:832,visible:t.showWalletHis,footer:null,title:"Recent Transactions",centered:"","wrap-class-name":"wallet-his-modal",onCancel:e[6]||(e[6]=l=>t.showWalletHis=!1)},{default:ft(()=>[S("div",{class:"table-content",onClick:e[4]||(e[4]=St(()=>{},["stop"]))},[t.historyList.length!==0?(P(),U("div",wR,_R)):ae("",!0),t.historyList.length!==0?(P(),U("div",{key:1,ref:"scrollWrapperRef",class:"table-top",onScroll:e[3]||(e[3]=(...l)=>t.handleScroll&&t.handleScroll(...l))},[S("table",null,[S("tbody",null,[(P(!0),U(tn,null,ln(t.historyList,l=>(P(),U("tr",{key:l},[S("td",null,[S("div",{class:"activity",style:Uf(t.getStyle(l.type))},[S("img",{src:t.getImage(l.type),alt:""},null,8,bR),S("div",vR,[S("div",null,fe(t.getType(l.type)),1),S("div",null,fe(("timeFormat"in t?t.timeFormat:et(Qc))((l==null?void 0:l.timestampMs)-8*60*60*1e3,""))+" UTC ",1)])],4)]),S("td",null,[(P(!0),U(tn,null,ln(l.coinChanges,u=>(P(),U("div",{key:u,class:"coin-changes"},[S("div",kR,[S("div",SR,[jr(S("img",TR,null,512),[[c,t.getCoinIcon(u)]]),S("p",{class:He([u.amount.indexOf("-")>-1?"color-add":"color-sub","amount"])},[ai(fe(t.getAmount(u.amount,u.decimal))+" ",1),S("span",null,fe(u.symbol),1)],2)])])]))),128))]),S("td",null,[S("div",AR,[S("a",{target:"_blank",href:`https://suivision.xyz/txblock/${l.digest}?tab=Activity&type=Cetus`},[IR,S("span",null,fe(l.digest&&l.digest.substr(0,6))+" ... "+fe(l.digest&&l.digest.substr(l.digest.length-4,4)),1)],8,CR)])])]))),128))])]),t.loading&&t.historyList.length!==0?(P(),U("div",ER,[Ft(o)])):ae("",!0)],544)):ae("",!0),t.loading&&t.historyList.length==0?(P(),U("div",xR,[Ft(o)])):ae("",!0),!t.loading&&t.historyList.length==0?(P(),U("div",MR,DR)):ae("",!0),S("div",jR,[RR,S("div",BR,[S("a",{target:"_blank",href:`https://suivision.xyz/account/${t.wallet.address}?tab=Transaction+Blocks&type=Cetus`},LR,8,PR)])])]),S("div",$R,[S("div",{ref:"h5ScrollWrapperRef",class:"h5-trans-list",onScroll:e[5]||(e[5]=(...l)=>t.handleH5Scroll&&t.handleH5Scroll(...l))},[(P(!0),U(tn,null,ln(t.historyList,(l,u)=>(P(),U("div",{key:l,class:He(["trans-item",u==t.historyList.length-1?"trans-item-last":""])},[S("div",{class:"activity",style:Uf(t.getStyle(l.type))},[S("img",{src:t.getImage(l.type),alt:""},null,8,zR),S("div",qR,[S("div",null,fe(t.getType(l.type)),1),S("div",null,fe(("timeFormat"in t?t.timeFormat:et(Qc))((l==null?void 0:l.timestampMs)-8*60*60*1e3,""))+" UTC ",1)])],4),VR,(P(!0),U(tn,null,ln(l.coinChanges,d=>(P(),U("div",{key:d,class:"coin-changes"},[S("div",WR,[S("div",KR,[jr(S("img",ZR,null,512),[[c,t.getCoinIcon(d)]]),S("p",{class:He([d.amount.indexOf("-")>-1?"color-add":"color-sub","amount"])},[ai(fe(t.getAmount(d.amount,d.decimal))+" ",1),S("span",null,fe(d.symbol),1)],2)])])]))),128)),S("div",HR,[QR,S("a",{target:"_blank",href:`https://suivision.xyz/txblock/${l.digest}?tab=Activity&type=Cetus`},[YR,S("span",null,fe(l.digest&&l.digest.substr(0,6))+" ... "+fe(l.digest&&l.digest.substr(l.digest.length-4,4)),1)],8,GR)]),t.loading&&t.historyList.length!==0?(P(),U("div",XR,[Ft(o)])):ae("",!0)],2))),128)),t.loading&&t.historyList.length==0?(P(),xt(o,{key:0})):ae("",!0)],544),S("div",JR,[S("div",e5,[S("a",{target:"_blank",href:`https://suivision.xyz/account/${t.wallet.address}?tab=Transaction+Blocks&type=Cetus`},r5,8,t5)]),s5]),!t.loading&&t.historyList.length==0?(P(),U("div",o5,l5)):ae("",!0)])]),_:1},8,["visible"])])}const d5=yn(tR,[["render",u5],["__scopeId","data-v-c0c73b5d"]]),h5=Sn({components:{WalletConnectModal:d5},setup(){const t=on(),e=Ni(),n=Ie(()=>e),i=Ie(()=>t),r=Ie(()=>i.value.chainName?en[i.value.chainName]:{});return{wallet:n,importIcon:Et,storeIndex:i,config:r,showWalletCard:()=>{t.setIsShowSetting(!1),t.setOpenH5Icon(!1),t.setOpenSwitchChain(!1),t.setOpenMore(!1),t.setIsShowMore(!1),t.setOpenSwitchLang(!1),t.setIsShowHeaderMore(!1),t.setIsShowNotifi(!1),e.setIsShowWalletCard(!0)}}}});const f5=["src"],p5={class:"addressAndDev"},g5={key:0,class:"network"};function m5(t,e,n,i,r,s){const o=kr("WalletConnectModal");return t.wallet.connected?(P(),U("div",{key:0,class:"wallet-info",onClick:e[0]||(e[0]=St(a=>t.showWalletCard(),["stop"]))},[t.wallet.walletIcon?(P(),U("img",{key:0,src:`/image/wallet/${t.wallet.walletIcon.toLowerCase()}.png`,alt:""},null,8,f5)):ae("",!0),S("div",p5,[t.storeIndex.theme!=="default"&&("config"in t?t.config:et(en)).network==="testnet"?(P(),U("span",g5,"Testnet")):ae("",!0),S("span",null,fe(t.wallet.address&&t.wallet.address.substr(0,6))+" ... "+fe(t.wallet.address&&t.wallet.address.substr(t.wallet.address.length-4,4)),1)]),t.wallet&&t.wallet.isShowWalletCard?(P(),xt(o,{key:1})):ae("",!0)])):(P(),U("div",{key:1,class:"wallet-info noConnect",onClick:e[1]||(e[1]=a=>t.wallet.setIsShowWalletModal(!0))},fe(t.$t("button.connect")),1))}const w5=yn(h5,[["render",m5],["__scopeId","data-v-acd8ff60"]]),y5=Sn({props:{openNotification:{type:Boolean,default:!0}},setup(t){lh();const e=_e(!1),n=Ni(),i=Ie(()=>n),r=on(),s=Ie(()=>r),o=[],a=["+1","+32","+33","+34","+351","+354","+358","+36","+41","+43","+44","+45","+46","+47","+48","+49","+60","+61","+63","+65","+82","+852","+886"],c=_e("+1"),l=_e(""),u=_e(""),d=_e(""),h=_e(!1),f=_e(!0),g=_e(!1),p=_e(!1),w=q0(),_=Ie(()=>w),k=Ie(()=>_.value.status),T=async()=>{await w.sendEmailTargetVerificationRequest(ze.value),ee(),g.value=!0},R=()=>{p.value=!0,window.open(ke.value,"_blank"),b()},E=async()=>{const j={emailAddress:l.value,phoneNumber:u.value?c.value+" "+u.value:"",telegramId:d.value};k.value!=="authenticated"?await w.login(i,j,s.value.chainName):await w.ensureTargetGroup(j)},D=_e(),B=_e(""),$=_e(""),Y=_e(""),z=_e(""),H=_e(!1),ie=_e(!1),ke=_e(""),ze=_e(""),se=async j=>{var V,Q,re,Se,Me,Ce,Ve,De;j&&!ls(j)?(l.value=j!=null&&j.emailTargets&&((V=j==null?void 0:j.emailTargets)==null?void 0:V.length)>0?j.emailTargets[j.emailTargets.length-1].emailAddress:"",H.value=j!=null&&j.emailTargets&&((Q=j==null?void 0:j.emailTargets)==null?void 0:Q.length)>0?j.emailTargets[j.emailTargets.length-1].isConfirmed:!1,u.value=j!=null&&j.smsTargets&&((re=j==null?void 0:j.smsTargets)==null?void 0:re.length)>0?j.smsTargets[j.smsTargets.length-1].name.split(" ")[1]:"",c.value=j!=null&&j.smsTargets&&((Se=j==null?void 0:j.smsTargets)==null?void 0:Se.length)>0?j.smsTargets[j.smsTargets.length-1].name.split(" ")[0]:"+1",d.value=j!=null&&j.telegramTargets&&((Me=j==null?void 0:j.telegramTargets)==null?void 0:Me.length)>0?j.telegramTargets[j.telegramTargets.length-1].telegramId:"",ie.value=j!=null&&j.telegramTargets&&((Ce=j==null?void 0:j.telegramTargets)==null?void 0:Ce.length)>0?j.telegramTargets[j.telegramTargets.length-1].isConfirmed:!1,ke.value=j!=null&&j.telegramTargets&&((Ve=j==null?void 0:j.telegramTargets)==null?void 0:Ve.length)>0?j.telegramTargets[j.telegramTargets.length-1].confirmationUrl:"",B.value=l.value,Y.value=u.value,z.value=d.value,$.value=c.value,D.value=j,ze.value=j!=null&&j.emailTargets&&((De=j==null?void 0:j.emailTargets)==null?void 0:De.length)>0?j.emailTargets[j.emailTargets.length-1].id:""):(f.value=!0,h.value=!1)};Jt(()=>[_.value.targetGroups,k.value],([j,V])=>{j&&j.length>0&&V=="authenticated"&&se(j[0])},{immediate:!0}),Jt(()=>k.value,j=>{j&&j=="authenticated"&&w.getTargetGroups()},{immediate:!0});const le=Ie(()=>!l.value&&!u.value&&!d.value?!0:l.value==B.value&&u.value==Y.value&&d.value==z.value&&c.value==$.value),Ne=Ie(()=>!l.value&&!u.value&&!d.value?"Subscribe":B.value||Y.value||z.value?"Update":"Subscribe"),he=Ie(()=>_.value.notifiLoading),J=j=>{const V=new RegExp(/[^\d^\.]+/g);j.target.value=j.target.value.replace(V,""),u.value=j.target.value},ve=_e(60),ye=_e(60),ge=_e(),qe=_e(),ee=()=>{ge.value=setInterval(()=>{ve.value--,ve.value==0&&(clearInterval(ge.value),ve.value=60,g.value=!1)},1e3)},b=()=>{qe.value=setInterval(()=>{ye.value--,ye.value==0&&(clearInterval(qe.value),ye.value=60,p.value=!1)},1e3)};return ml(()=>{clearInterval(ge.value),clearInterval(qe.value)}),{inputChange:J,wallet:i,isShowPhone:e,posList:o,phoneList:a,phoneRepresent:c,emailAddress:l,phoneNumber:u,telegramId:d,openPositionInfos:h,openPositionDetails:f,subscribe:E,subscribeDisabled:le,subscribeBtnText:Ne,isVerifiEmail:H,notifiStatus:k,oldEmallAddress:B,sendEmailTargetVerificationRequest:T,sendEmailSuccess:g,notifiLoading:he,oldTelegramId:z,isVerifiTelegram:ie,sendTelegramTargetVerificationRequest:R,sendTelegramSuccess:p,sendEmailNum:ve,sendTgNum:ye}}}),_5=""+globalThis.__publicAssetsURL("image/aufstellen.png"),b5=""+globalThis.__publicAssetsURL("image/notifi-icon.png"),v5=""+globalThis.__publicAssetsURL("image/img-no-Positions.png");const _s=t=>(di("data-v-267235d0"),t=t(),hi(),t),k5=_s(()=>S("div",{class:"info-detail-bg"},null,-1)),S5={class:"item-title"},T5={key:0},A5={key:1},C5={class:"info-to-switch"},I5={class:"aufstellen-info"},E5=_s(()=>S("div",{class:"hover-text"},"setting",-1)),x5=_s(()=>S("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),M5=[x5],N5={class:"item-notify-title"},O5={class:"title"},D5={class:"notify-time"},j5={class:"item-notify-detail"},R5={key:0,class:"setting-info"},B5=_s(()=>S("div",{class:"input-title"},"Email address",-1)),P5={key:0,class:"verifi-email"},F5={key:0},U5={key:1},L5={class:"phone-position position-all"},$5=_s(()=>S("div",{class:"input-title"},"Phone number",-1)),z5=_s(()=>S("use",{"xlink:href":"#icon-icon_on"},null,-1)),q5=[z5],V5={key:0,class:"phone-list"},W5=["onClick"],K5={class:"telegram-position position-all"},Z5=_s(()=>S("div",{class:"input-title"},"Telegram ID",-1)),H5={key:1,class:"verifi-email"},Q5={key:0},G5={key:1},Y5=x0('<div class="notifi" data-v-267235d0> Notifications are provided by Notifi. By subscribing, you agree that info you provide to Notifi will be governed by its <a href="https://notifi.network/privacy" target="_blank" data-v-267235d0>Privacy Policy</a> and <a href="https://notifi.network/terms" target="_blank" data-v-267235d0>Terms of Use.</a></div><div class="platform-icon" data-v-267235d0><span data-v-267235d0>Powered by</span><img src="'+b5+'" alt="" data-v-267235d0></div>',2),X5={key:1,class:"item-no-notify"},J5=_s(()=>S("img",{src:v5,alt:""},null,-1)),eB=_s(()=>S("p",null,"You have no new updates.",-1)),tB=[J5,eB];function nB(t,e,n,i,r,s){const o=Hp,a=eo,c=eo;return P(),U(tn,null,[k5,S("div",{class:"info-detail",onClick:e[12]||(e[12]=St(l=>t.isShowPhone=!1,["stop"]))},[S("div",S5,[t.openPositionInfos?(P(),U("span",T5,"Updates")):ae("",!0),t.openPositionDetails?(P(),U("span",A5," Notification Setting ")):ae("",!0),S("div",C5,[S("div",I5,[t.openPositionInfos?(P(),U("img",{key:0,src:_5,alt:"",onClick:e[0]||(e[0]=St(()=>{t.openPositionInfos=!1,t.openPositionDetails=!0},["stop"]))})):ae("",!0),E5]),(P(),U("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:e[1]||(e[1]=St(l=>t.$emit("closeOpenNotification"),["stop"]))},M5))])]),(P(!0),U(tn,null,ln(t.posList,l=>jr((P(),U("div",{key:l.title,class:"item-notify"},[S("div",N5,[S("div",O5,fe(l.title),1),S("div",D5,fe(l.time),1)]),S("div",j5,fe(l.detailText),1)])),[[w2,t.openPositionInfos]])),128)),t.openPositionDetails?(P(),U("div",R5,[S("div",{class:"email-position position-all",style:Uf(t.notifiStatus=="authenticated"&&t.oldEmallAddress?{marginBottom:"4px"}:{})},[B5,Ft(o,{value:t.emailAddress,placeholder:"",onClick:e[2]||(e[2]=St(l=>t.isShowPhone=!1,["stop"])),onChange:e[3]||(e[3]=l=>{t.emailAddress=l.target.value})},null,8,["value"])],4),t.notifiStatus=="authenticated"&&t.oldEmallAddress?(P(),U("div",P5,[t.sendEmailSuccess?(P(),U("p",F5,"Verification email sent! ("+fe(t.sendEmailNum)+"s)",1)):ae("",!0),!t.isVerifiEmail&&!t.sendEmailSuccess?(P(),U("p",U5,[ai("Waiting for email verification. "),S("span",{onClick:e[4]||(e[4]=(...l)=>t.sendEmailTargetVerificationRequest&&t.sendEmailTargetVerificationRequest(...l))},"Retry")])):ae("",!0)])):ae("",!0),S("div",L5,[$5,S("div",{class:"phone-select",onClick:e[5]||(e[5]=St(()=>{t.isShowPhone=!t.isShowPhone},["stop"]))},[S("span",null,fe(t.phoneRepresent),1),(P(),U("svg",{class:He(["icon",t.isShowPhone?"icon-up":""]),"aria-hidden":"true"},q5,2)),t.isShowPhone?(P(),U("div",V5,[(P(!0),U(tn,null,ln(t.phoneList,(l,u)=>(P(),U("div",{key:u,onClick:()=>{t.phoneRepresent=l}},fe(l),9,W5))),128))])):ae("",!0)]),Ft(o,{value:t.phoneNumber,"onUpdate:value":e[6]||(e[6]=l=>t.phoneNumber=l),placeholder:"",onClick:e[7]||(e[7]=St(l=>t.isShowPhone=!1,["stop"])),onChange:t.inputChange},null,8,["value","onChange"])]),S("div",K5,[Z5,Ft(o,{value:t.telegramId,placeholder:"",onClick:e[8]||(e[8]=St(l=>t.isShowPhone=!1,["stop"])),onChange:e[9]||(e[9]=l=>{t.telegramId=l.target.value})},null,8,["value"])]),t.notifiStatus=="authenticated"&&t.oldTelegramId?(P(),U("div",H5,[t.sendTelegramSuccess?(P(),U("p",Q5,"Verification telegram sent! ("+fe(t.sendTgNum)+"s)",1)):ae("",!0),!t.isVerifiTelegram&&!t.sendTelegramSuccess?(P(),U("p",G5,[ai(" Waiting for telegram verification. "),S("span",{onClick:e[10]||(e[10]=(...l)=>t.sendTelegramTargetVerificationRequest&&t.sendTelegramTargetVerificationRequest(...l))},"Retry")])):ae("",!0)])):ae("",!0),t.wallet.connected?(P(),xt(c,{key:3,class:"big-btn setting-btn",disabled:t.subscribeDisabled,loading:t.notifiLoading,onClick:t.subscribe},{default:ft(()=>[ai(fe(t.subscribeBtnText),1)]),_:1},8,["disabled","loading","onClick"])):(P(),xt(a,{key:2,class:"big-btn setting-btn",onClick:e[11]||(e[11]=l=>t.wallet.setIsShowWalletModal(!0))},{default:ft(()=>[ai(" Connect Wallet ")]),_:1})),Y5])):ae("",!0),t.openPositionInfos&&t.posList&&t.posList.length==0?(P(),U("div",X5,tB)):ae("",!0)])],64)}const iB=yn(y5,[["render",nB],["__scopeId","data-v-267235d0"]]),rB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA+FJREFUWEfVmFmoVlUUx3//gkobFTKy6DGiggoqiiCIKCIospnMRjOjN0VsTi0ziXpKGs0mw0qtFCKSCIIoVCihQnqMLFJoHh9qxf+yzmV7Oud8371wL6f98n3ss/ba/zXutZbo+VLP8TFugBFxEHAacApwOHA0cEgK/DPwNbAH+ATYJunX8ShjzAAj4kzgIuAEYJ8hL/0H+BzYLOmjIc+MkA0NMCKOB24EjqtdsBuYkXvf5u+R+Vt+q47tBNZI+mIYoAMBRsS+wM2ptYqnzfcu8DFwX5rX5rw9hX48zW66ZcAZwPlJV/HYDKyW9HcX0E6A6WeLgZOTyQ/AK8AWM46IU4H789vDkj70/4g4C7gj95dK2p6CngdcA0zLb58CK7v8sxVggnukkHor8Kik3yuJI+Je4HTAppxXaSPBPJ2m3yrpgeLMVGBhnvO2tbyoDWQjwLxgSaG5DcCLkuzsIysi9k9t7gesk7S2NFVEzAauBv4CZkvyb3XWwXUdcFmhySVN5m4DOK/wufWSXqj7SURYc9ag10JJX9YAHmuN594ySdsaeFwPXJ77jnBrfa/1H4AZrSuTymZdXmqu0IIj+lLgJ2COpKgBNO+XgEOBjZLWNAC0Ju8uzL24Ht1NAO13TiUOiPmlz9UAPAicBGyXtLR+ebqBA8iBtEPSPS009sknM3B2SlpU0u0FMJPwXUmwStI7TUzz8nXAgcCrkl5uufxa4CrgN0n2x8YVERdkivL3h8pkXgdoSY4CfgHecyy08HSAXFi4wa4WOvOyr3q9nQHTRGoc5wIHA7skza+IRgFGxBHAs21STvL+XEnf+c4S4C3AxQnEea0rw1uD05PWjEbTT00QB4EF9/q+Q4P+7herejI3SXqmDnABcA7wlSQ/Wa0rImze2xLYrKYoTz81wDeyqHhCks3cxXcVcAzwvqTH6gBXACcCH0hyJHcxcnpxmvlD0pUDaF8DpmSBsHEArSP4bOAzSXfWAT4FzATelLR6ACNHpF+KHyXNGUDrXHgYsFaSI79LcBcllwDfSLq1DvB14ADgOUk2Sxej6gXYLclMu2gtrH2r8UUqD0bELOAm4E9JV9QBVqboA8BR1ymjuPcm7n2Q9D7N9ClRvyVp5FX7/zx1mfn7WywkQPe8/S23EmR/C9YE6Aa9vyV/giybpg2Snq+/ZRHhuYybdq/xNk03FJ3dcE1TAnRtVrad690ANbSdbjVdG05u25kgPb3qZ+NembPXo48C5FiHRz7qytgzw4kdHtVqtX6O3xqit58DzAagDiL3vB7NdY2APWLzhGtyRsBd5f1EfBs4YZ2IS8fC81/BalZHBYziFQAAAABJRU5ErkJggg==",sB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABdFJREFUWEfFmXmIlWUUxn9Pi5ZtVtBY0U4LZdiGtJDtZtRUpFgZZc20a2OrYAUl9UeBfwj2j2Vu5dSUprZom5gFmkS0kBmVZVPZJoxFC2PLieeb94vP670z93o1Dwxz537ve97ne8/7Puc5Z0SdFhECzgMGA/sC3wAvS3qlTtfZdDuvyyJiNHBuGScvSppcl/N6AUbEkcDDBrFs2TIWLFhAY2MjAwcOzHHdIenTekDWtYMRcTkwYu3atfTv35/Ozk769OnDihUr6Nu3r3HNkDR7awK8Ghja3t7OgAED/sOxcuVK+vXr57+fljRrqwCMiN2BO4AM2ZQpU5g7dy7Dhw9n5MiROaZ3gYmS1m0qyJpDHBHbAxcClwI7VrHw795J4AVJf1UxfoMhNQGMiBOBZiCLH/AP8BrQGzgV2BYwiDeBv4GzgG3S2DXeaEnv1AKyKoARcQBwXR7OtMD7wGOS2v132tkG4AdJf6bvDgSuB44ugHovzfu6GqDdAoyIXYArEhHnO/Ed8Lik5dUskICeDDQBfoF8518CWiX92p2fsgAjwqFydjC4nZODP4A24Pl8h6oFWNjhi4HhwA5p7i+Ab/krknwkNrKNAEbEscC1wP5pdACLgJmSOmoBVW5sROwBmJ7OKDxfncL+YemcDQBGxAXADYVBK4FHJX1eL7DS+RFxWDqfhxeePVKaw0sBjgCcHXzIzV++jVvMktA4HWgBtktRera4YCWAHZKuqhdZRBwBGMDxwGJJrRXC7u99IX2MtizAiLDkMij/5HxpXKsl3bJVAEaElcGgBOrQCjv/nKRp/xvAiDBVOLP4Nh5TyBjG4GziPGyOczax3VbpskXE5glx4keDMSiDc4or2sfAG8BbJuCIGAeYpJ1dTF1lrW6AabdM2ga2W8kqTlmLgSWSfsyfRYSFxJNAL2C2pBlbEuAQYFTJAqsA81ZZjoyI04A705wWSV9uSYDOoQ7XISWLOLM4pKaQDQBExD3pGHwr6cbuKKvuEBfCdnAKsykk0/QF+wh4QNLvEdEn5ViTb5skh7qibTaABaAWE1bSZ5ZclumS5kSEv78tjR8t6av/FWBxsXQZ7gdc4a2SdGtE3AecALRLKj27G2Hd7DtYukJEuGjPs4TrFJeiDu8sSZb73VpVAJMi9mH2YuskXdmT40LInUefSJLftLNfenaTJHcaegL4VNKdFrEWw5kit2ViISJOAW4Gdi14mpn4y3qwR4sIh9miILeKubfwYlbpFrDm2Nx+TvT1dgYwdQceqtBlsBZ8oUd0XS9ZvBiespEyKfUTEZcA15Tx72LsLnclDPBB38g1a9bQ1NRER0cHkyZNytsXv1kfSupxF0uoxWteL8n1S1lLadMlRO+lS5fS0tJCQ0MDU6dOzX47l0u63wB9iHcaP348EydOzJwNGjSI+fPn547vlfRBlbt4N3AS8Jmk27ubExG+5b7tDBkyhOXLu2qwsWPHMm6cc0LXPTDAR4G9W1tbGTWqixGam5uZMGFC7t/KxGifMQn3sOheQCPweiXui4idgMvSOPMpY8aMYeZMH/muDsXQoUP9MaMoA7TKuMjfLFy4MAvxsGHD6NXLOT4rzPNy0+0Le/HiPYa8zHmzn3MAK/X8Mmb+169fT1tbWxbawYNNIpllAsMAreu8XS7Oi+aS0JfH5ae7BrlZJEyW5IKqKouI/qlAOqgwYQnwasrxeWmbP/7C0ZbUmdOMt8s3yunLGu+TFNKs6RMRR6XOQlEsuKCaJmltJZQR4ZC7YDeN5fZZKjGzF0xlqKnG1Z1rb3ce5uVcWFXrIzlyiM5OIco1YScwB7Cc9+fMUlSGpZd2s8lm5eMjsqiWI1I1wMLiVir5IXc6s/0ETLeSBqwDXZjvmZ75ks1LEfEO1WQ1AywA3Sd1uv7r95oaSmSYs4FT1/c1oSoM3mSABaDHpVZJnn/9yPLKna+q+LM78HUDTGfOfHY+4NaJOdP/hijbDKp1J/8FDml2R84ujkAAAAAASUVORK5CYII=",oB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABY1JREFUWEfNmGmoVlUUhp+3gUaK5gGa5yj6UUEjjVT0o0EqbbJBCErFtGyySCq1ySy0MiHL1FIrFUpKUELCFMRAimiwsNEsogGahxXvbZ3Lud8933fOhTLXnzuctfd+9xrftcUGLtrA8fG/AIyIzYELgSOAPYF1wLvALEnflI223gFGhAHdAexa4b0fgfGSVhTf1ivAiNgEmADsnQCWAu8BuwOnAZsCBjm4sGSfAUbEzumWbXOztZI+bhLLEXEmMCR1H5L0WrEuIvYDHkiQr0p61N8aAYyIjYCTgfNLty9j+hp4BXhJ0i/twEbEMOB0YLWk4a16ETEYOAtYI2loI4ARsR1wG3BwAysZ6D2SPqrSjYhxwGHA65LurwBoA1wN/CzpolqACW48sFNu9hnwAvAW8C2wNXAQcA5weOr86gtJer/kPofDqUB/YCtgLXCtpD/LICPiFuB4x6WkGzsCTLfeV7LcfGC6pN8qbu5QORu4CtgswdtFzli77DjACVKWecC0AmREnAKMSIU5kqbXAfSNiziZL+nJOhdHxElA180zgWytsqxKqzshLLbkamA3YP/835fA0CKW2yZJREzMhLBbh1VZrk2cOV6PLX37HlgELJS0NiLsbifL0RXr1ziTJX1SfKsEmKWksNjDkhbXWa8Ub3sBk/Jvu/EZSX9UhIUv4U5ifVvNnWRxq247gEcBd+amgyR91RSg9SJiJrANMFPSrL6sbdVtB9BV/fpU7ifp974cEhEusk6QlyU90Ze1TQEeA4xK5YGSXFIaS0RMA7YHZkua0XhhhWI7C5bjaIyk5U0PiQjXzKmp36f4rTqjUxb7EB/mojxKUjQBGRGDgPMcioCt/12Tde10OgE0XxuYCydLWlB3UEQcAri4e99lksbWran73gmgSeVjaUW3r4mSlrTbMMHdBOwIOKlcbD+vA1D3vSObiYh9ATd1ty/Lsiwd3fQqY869+NwSO3JxH96J2dQBK77X0q2IOBC4HTCrKeQHwLFlsuBsLeQvwNTM8mYymz6VqFbgtQC9INuT61lrby32c0I4011e+gFn5Ic37IESITDZ3SW/rWvSAJoCNJUqAn6u+RrQzaiBlUW2JgsaCZyQQNyHTRIuyLZWNpJDxfRtSbsq0RSgg/9EwI3/yqreWj41Zw+HxZENY82W9gjgZOwhtQDTvU8nn3tRkn+vlYhwYplw2NIWEwKTh4LIOrbNoIvprpJlNwFY0HAfco0pUy26f+K23C5toQmtWZ3zsTmnCa2lV9fqBTDdY7LgGcS32yeTY5Uku62RRIQL9qGA55Qhkn6qWhgRWyY9c9d6R9LNZb0eAHOodoAXc2tZ90NTMEmOw44SEVv4lSBLzgxJszstiAjPKpcBLlMDJDkJu6QbYJrbLLqICVNxu9NU3JTcskLSXQ0A7pFdyKqjJa2sAehkGp0610n6tArg5UDXqJcZ1TVUR8TGwBUZ0P7XWEnuKG0lInyhKakwTpJjsJO+Y/DWVOgR52ULPpgj5FJJ95Z3S5CPpyUXSJpcc6CfMOxW/5wr6akafU+DLvDuOv3LBLkMcA7g2JkqyeWgh0REUQvfllTctpNVTHidyY4nJ0nl2JDzj2cYn71c0pjypmWAxRTX/S7SYkU/+jgeF0l6pEEcHuBQST0nmFveFy17+tHIFy/G0BGSPmgHsHgXsZlHSvKmXdIyVE+StLAOYK67BLg4dd0lTNcKAL6A5+iCKT0n6dnWfcsW3AHwsGNCYJAeNX1jP234OcLiudU0qtcY2Q5wRDjxLi2xnFZVlxZPfw6xXtJaBz1M39CGtbhV3V0eqptYMS3pGccdyft7HLWYsvmhcl6n57uqTmJLDshOYmrkKd9s5Pl/g4BmEadcjDtdtLYXN7XSf6W3wQP8G6V2CUe3pBCLAAAAAElFTkSuQmCC";const aB=Sn({setup(t,e){const n=Ko(),i=_e(""),r=on(),s=Ie(()=>r),o=_e(s.value.lang||"en"),a=Y=>{r.setLang(Y),n.locale.value=Y,o.value=Y};Jt(()=>r.lang,Y=>{o.value=Y});const c=Ie(()=>s.value.chainName&&s.value.chainName.toLowerCase().includes("sui")?s.value.chainName.split("2")[0]:s.value.chainName);Jt(()=>c.value,Y=>{Y&&(i.value=Y=="Aptos"?en[Y].rpcUrl:en[Y].fullRpcUrl)},{immediate:!0});const l=_e(null),u=()=>l.value,d=()=>{e.emit("onClose")},h=_e(localStorage.getItem(`${c.value}-currentRpclocal2Name`)||en[c.value].rpcName||Ws[c.value][0].name),f=_e(localStorage.getItem(`${c.value}-currentRpclocal2`)),g=_e(!1),p=_e(!0),w=_e(localStorage.getItem(`${c.value}-currentExplorerUrl`)||Pa[c.value][0].link),_=_e(localStorage.getItem(`${c.value}-currentExplorerName`)||Pa[c.value][0].name),k=(Y,z)=>{_.value=Y,localStorage.setItem(`${c.value}-currentExplorerName`,_.value),localStorage.setItem(`${c.value}-currentExplorerUrl`,z);const H=new Event("updateExplorer");window.dispatchEvent(H),w.value=z,E.success({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:je("div",{class:"notification-title"},[je("span",{innerHTML:"Explorer update"},null)]),description:je("div",{class:"notification-title"},[je("div",{class:"notification-text",innerHTML:`Explorer is currently set to ${w.value}`},null)]),class:"ant-notification-copy ant-notification-swap"})},T=(Y,z)=>{g.value=!1,f.value="",h.value=Y,h.value!=="Custom"&&(localStorage.setItem(`${c.value}-currentRpclocal2Name`,h.value),i.value=z,(localStorage.getItem(`${c.value}-currentRpclocal2`)||(c.value=="Aptos"?en[c.value].rpcUrl:en[c.value].fullRpcUrl))!=i.value&&(localStorage.setItem(`${c.value}-currentRpclocal2`,i.value),E.success({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:je("div",{class:"notification-title"},[je("span",{innerHTML:"RPC update"},null)]),description:je("div",{class:"notification-title"},[je("div",{class:"notification-text",innerHTML:`RPC is currently set to ${i.value}`},null)]),class:"ant-notification-copy ant-notification-swap"}),setTimeout(()=>{window.location.reload()},2e3)))},R=()=>!/^(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/.test(f.value);Jt(()=>f.value,(Y,z)=>{const H=localStorage.getItem(`${c.value}-currentRpclocal2`);Y==H?p.value=!1:p.value=!0,Y!==z&&(g.value=!1)},{immediate:!0});const{$notify:E}=gl(),D=()=>{localStorage.setItem(`${c.value}-currentRpclocal2Name`,h.value),localStorage.setItem(`${c.value}-currentRpclocal2`,f.value),g.value=!1,E.success({icon:je("svg",{class:{icon:!0},"aria-hidden":!0},[je("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:je("div",{class:"notification-title"},[je("span",{innerHTML:"RPC update"},null)]),description:je("div",{class:"notification-title"},[je("div",{class:"notification-text",innerHTML:`RPC is currently set to ${f.value}`},null)]),class:"ant-notification-copy ant-notification-swap"}),setTimeout(()=>{window.location.reload()},2e3)},B=Ie(()=>{let Y=[{name:"Custom",link:""}];return c.value=="Sui"?s.value.suiRpcs&&s.value.suiRpcs.length>0?s.value.suiRpcs.concat(Y):Ws[c.value]:s.value.aptosRpcs&&s.value.aptosRpcs.length>0?s.value.aptosRpcs.concat(Y):Ws[c.value]}),$=_e(null);return Jt(()=>B.value,Y=>{c.value==="Sui"&&(Y==null?void 0:Y.length)>0?$.value=setInterval(()=>{r.setRpcTimedelay(Y)},3e3):clearInterval($.value)},{immediate:!0}),ml(()=>{c.value==="Sui"&&(clearInterval($.value),$.value=null)}),{explorerSelected:_,changeExplorer:k,explorerObj:Pa,rpcList:B,rpcObj:Ws,store:s,changeLang:a,currentLang:o,langObj:lc,langList:Ml,currentRpc:i,getPopupContainer:u,settingModal:l,changeRpc:T,isShowTips:g,isUpdate:p,customRpc:f,chainName:c,rpcSelected:h,regTest:R,closeSystemSetting:d,saveCustomRpc:D,importIcon:Et}}}),cB={class:"system-setting-container"},lB={class:"modal-title"},uB={class:"language-left"},dB=S("svg",{"aria-hidden":"true",class:"back-icon"},[S("use",{"xlink:href":"#icon-icon-back"})],-1),hB=S("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1),fB=[hB],pB={key:1},gB={key:0,class:"language-list"},mB=["onClick"],wB={class:"lang-icon"},yB={key:1,class:"language-list"},_B=["onClick"],bB={style:{paddingLeft:"8px"}},vB={key:2,class:"module-box"},kB={class:"module language-box"},SB=S("div",{class:"current-lang"},[S("img",{src:rB,alt:""}),S("span",null,"Language")],-1),TB={class:"current"},AB={class:"lang-icon"},CB=S("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_on1"})],-1),IB={key:0,class:"module language-box"},EB=S("div",{class:"current-lang"},[S("img",{src:sB,alt:""}),S("span",null,"Preferred Explorer")],-1),xB={class:"current"},MB=S("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[S("use",{"xlink:href":"#icon-icon_on1"})],-1),NB={ref:"settingModal",class:"system-setting module"},OB=S("div",{class:"title"},[S("img",{src:oB,alt:""}),S("span",null,"RPC Node")],-1),DB={class:"rpc-select-box"},jB={class:"rpc-select-top"},RB={class:"rpc-name"},BB=["onClick"],PB=["src"],FB={key:0},UB={key:0,class:"rpc-select-bottom"},LB={key:1,class:"rpc-select-tips"};function $B(t,e,n,i,r,s){const o=Hp,a=eo;return P(),U("div",cB,[S("div",{class:"setting-box",onClick:e[5]||(e[5]=St(()=>{},["stop"]))},[S("div",lB,[t.store.openSwitchLang||t.store.openExplorer?(P(),U("div",{key:0,class:"lang-set",onClick:e[1]||(e[1]=St(()=>{t.store.setOpenSwitchLang(!1),t.store.setIsOpenExplorer(!1)},["stop"]))},[S("div",uB,[dB,S("span",null,fe(t.store.openSwitchLang?"Language":"Preferred Explorer"),1)]),t.store.openSwitchLang||t.store.openExplorer?(P(),U("svg",{key:0,class:"icon modal-icon-close","aria-hidden":"true",onClick:e[0]||(e[0]=St(()=>{t.store.setIsOpenExplorer(!1),t.store.setIsShowSetting(!1)},["stop"]))},fB)):ae("",!0)])):(P(),U("span",pB,"Settings"))]),t.store.openSwitchLang?(P(),U("div",gB,[(P(!0),U(tn,null,ln("langList"in t?t.langList:et(Ml),c=>(P(),U("div",{key:c.value,class:He(c.value==t.store.lang?"item-container item-active-container":"item-container")},[S("div",{class:"list-item",onClick:l=>t.changeLang(c.value)},[S("span",wB,fe(c.icon),1),S("span",null,fe(c.label),1)],8,mB)],2))),128))])):ae("",!0),t.store.openExplorer?(P(),U("div",yB,[(P(!0),U(tn,null,ln(("explorerObj"in t?t.explorerObj:et(U0))[t.chainName],c=>(P(),U("div",{key:c.name,class:He(c.name==t.explorerSelected?"item-container item-active-container":"item-container")},[S("div",{class:"list-item",onClick:l=>t.explorerSelected==c.name?"":t.changeExplorer(c.name,c.link)},[S("span",bB,fe(c.name),1)],8,_B)],2))),128))])):ae("",!0),!t.store.openSwitchLang&&!t.store.openExplorer?(P(),U("div",vB,[S("div",kB,[SB,S("div",{class:"current-box",onClick:e[2]||(e[2]=St(()=>{t.store.setOpenSwitchLang(!0)},["stop"]))},[S("div",TB,[S("span",AB,fe(("langObj"in t?t.langObj:et(lc))[t.currentLang].icon),1),S("span",null,fe(("langObj"in t?t.langObj:et(lc))[t.currentLang].label),1)]),CB])]),t.store.theme!=="default"?(P(),U("div",IB,[EB,S("div",{class:"current-box",onClick:e[3]||(e[3]=St(()=>{t.store.setIsOpenExplorer(!0)},["stop"]))},[S("div",xB,[S("span",null,fe(t.explorerSelected),1)]),MB])])):ae("",!0),S("div",NB,[OB,S("div",DB,[S("div",jB,[(P(!0),U(tn,null,ln(t.rpcList,(c,l)=>(P(),U("div",{key:l,class:He(["select-item",t.rpcSelected==c.name?"select-item-active":""])},[S("div",RB,[S("div",{class:He(["check-box",t.chainName=="Aptos"?"aptos-check-box":"sui-check-box"]),onClick:St(u=>t.rpcSelected==c.name?"":t.changeRpc(c.name,c.link),["stop"])},[t.rpcSelected==c.name?(P(),U("img",{key:0,src:t.rpcSelected==c.name&&t.chainName=="Aptos"?("importIcon"in t?t.importIcon:et(Et))("/image/icon-selected@2x.png"):("importIcon"in t?t.importIcon:et(Et))("/sui-image/icon-selected@3x.png"),alt:""},null,8,PB)):ae("",!0)],10,BB),S("span",null,fe(c.name),1)]),t.chainName!=="Aptos"&&c.name!=="Custom"?(P(),U("div",{key:0,class:He(["rpc-rate",t.store.suiRpcTimeDelayObj?t.store.suiRpcTimeDelayObj&&Number(t.store.suiRpcTimeDelayObj[c.name])<=100?"green-rate":t.store.suiRpcTimeDelayObj&&Number(t.store.suiRpcTimeDelayObj[c.name])>200?"red-rate":"orange-rate":""])},[S("span",{class:He(t.store.suiRpcTimeDelayObj&&t.store.suiRpcTimeDelayObj[c.name]?"":"noColor")},null,2),t.store.suiRpcTimeDelayObj&&t.store.suiRpcTimeDelayObj[c.name]?(P(),U("p",FB,fe(t.store.suiRpcTimeDelayObj&&t.store.suiRpcTimeDelayObj[c.name])+"ms ",1)):ae("",!0)],2)):ae("",!0)],2))),128))]),t.rpcSelected=="Custom"?(P(),U("div",UB,[Ft(o,{value:t.customRpc,"onUpdate:value":e[4]||(e[4]=c=>t.customRpc=c),class:"rpc-input",type:"text",placeholder:"Custom RPC URL",onBlur:t.inputBlur},null,8,["value","onBlur"]),t.rpcSelected=="Custom"?(P(),xt(a,{key:0,class:"save-btn",disabled:t.regTest()||t.customRpc==t.currentRpc||!t.isUpdate,onClick:t.saveCustomRpc},{default:ft(()=>[ai("Save")]),_:1},8,["disabled","onClick"])):ae("",!0)])):ae("",!0),t.rpcSelected=="Custom"&&t.isShowTips?(P(),U("div",LB," Custom RPC URL is a required field ")):ae("",!0)])],512)])):ae("",!0)])])}const zB=yn(aB,[["render",$B]]);var il=(t=>(t[t.TransactionData=0]="TransactionData",t[t.TransactionEffects=1]="TransactionEffects",t[t.CheckpointSummary=2]="CheckpointSummary",t[t.PersonalMessage=3]="PersonalMessage",t))(il||{});function qB(t){return[t,0,0]}function G1(t,e){const n=qB(t),i=new Uint8Array(n.length+e.length);return i.set(n),i.set(e,n.length),i}const Rh={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},VB={ED25519:32,Secp256k1:33,Secp256r1:33},WB={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function KB(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return e;return-1}function ZB(t,e){const n=t.toString(16);return N2(n.padStart(e*2,"0").slice(-e*2))}function HB(t,e){const n=ZB(t,e),i=KB(n);return i===-1?new Uint8Array([0]):n.slice(i)}function QB(t,e){const n=HB(t,32);e==="accounts.google.com"&&(e="https://accounts.google.com");const i=new TextEncoder().encode(e),r=new Uint8Array(2+n.length+i.length);return r.set([Rh.ZkLogin]),r.set([i.length],1),r.set(i,2),r.set(n,2+i.length),lt($0(wd(r,{dkLen:32})).slice(0,z0*2))}function GB(t){if(t.length!==1)throw new Error("Invalid base64Url character: "+t);const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(n===-1)throw new Error("Invalid base64Url character: "+t);const i=n.toString(2).padStart(6,"0");return Array.from(i).map(Number)}function YB(t){let e=[];for(let n=0;n<t.length;n++){const i=t.charAt(n),r=GB(i);e=e.concat(r)}return e}function XB(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let n=YB(t);const i=e%4;if(i!==0)if(i===1)n=n.slice(2);else if(i===2)n=n.slice(4);else throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);const r=(e+t.length-1)%4;if(r!==3)if(r===2)n=n.slice(0,n.length-2);else if(r===1)n=n.slice(0,n.length-4);else throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(n.length%8!==0)throw new Error("We should never reach here...");const s=new Uint8Array(Math.floor(n.length/8));let o=0;for(let a=0;a<n.length;a+=8){const c=n.slice(a,a+8),l=parseInt(c.join(""),2);s[o++]=l}return new TextDecoder().decode(s)}function JB(t){if(!(t.slice(-1)==="}"||t.slice(-1)===","))throw new Error("Invalid claim");const e=JSON.parse("{"+t.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");const n=Object.keys(e)[0];return[n,e[n]]}function eP(t,e){const n=XB(t.value,t.indexMod4),[i,r]=JB(n);if(i!==e)throw new Error(`Invalid field name: found ${i} expected ${e}`);return r}const tP=G.struct("ZkLoginSignature",{inputs:G.struct("ZkLoginSignatureInputs",{proofPoints:G.struct("ZkLoginSignatureInputsProofPoints",{a:G.vector(G.string()),b:G.vector(G.vector(G.string())),c:G.vector(G.string())}),issBase64Details:G.struct("ZkLoginSignatureInputsClaim",{value:G.string(),indexMod4:G.u8()}),headerBase64:G.string(),addressSeed:G.string()}),maxEpoch:G.u64(),userSignature:G.vector(G.u8())});function nP(t){return tP.parse(typeof t=="string"?uh(t):t)}function iP({signature:t,signatureScheme:e,publicKey:n}){if(!n)throw new Error("`publicKey` is required");const i=n.toRawBytes(),r=new Uint8Array(1+t.length+i.length);return r.set([Rh[e]]),r.set(t,1),r.set(i,1+t.length),Zo(r)}function rP(t){const e=uh(t),n=WB[e[0]];switch(n){case"MultiSig":const i=li.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:n,multisig:i,bytes:e};case"ZkLogin":const r=e.slice(1),{inputs:s,maxEpoch:o,userSignature:a}=nP(r),{issBase64Details:c,addressSeed:l}=s,u=eP(c,"iss"),d=QB(BigInt(l),u);return{serializedSignature:t,signatureScheme:n,zkLogin:{inputs:s,maxEpoch:o,userSignature:a,iss:u,address:d,addressSeed:BigInt(l)},signature:e};case"ED25519":case"Secp256k1":case"Secp256r1":const h=VB[n],f=e.slice(1,e.length-h),g=e.slice(1+f.length);return{serializedSignature:t,signatureScheme:n,signature:f,publicKey:g,bytes:e};default:throw new Error("Unsupported signature scheme")}}const ed=32,sP="suiprivkey";class oP{async signWithIntent(e,n){const i=G1(n,e),r=wd(i,{dkLen:32});return{signature:iP({signature:await this.sign(r),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:Zo(e)}}async signTransactionBlock(e){return this.signWithIntent(e,il.TransactionData)}async signPersonalMessage(e){return this.signWithIntent(G.vector(G.u8()).serialize(e).toBytes(),il.PersonalMessage)}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class aP extends oP{export(){return{schema:this.getKeyScheme(),privateKey:this.getSecretKey()}}}function cP(t,e){if(t.length!==ed)throw new Error("Invalid bytes length");const n=Rh[e],i=new Uint8Array(t.length+1);return i.set([n]),i.set(t,1),Lf.encode(sP,Lf.toWords(i))}function Jw(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}function lP(t){return yT(t,"")}function uP(t){return Yp(lP(t))}const dP="ed25519 seed",hP=2147483648,fP=new RegExp("^m(\\/[0-9]+')+$"),Y1=t=>t.replace("'",""),pP=t=>{const n=_l.create(bl,dP).update(Gp(t)).digest(),i=n.slice(0,32),r=n.slice(32);return{key:i,chainCode:r}},gP=({key:t,chainCode:e},n)=>{const i=new ArrayBuffer(4);new DataView(i).setUint32(0,n);const s=new Uint8Array(1+t.length+i.byteLength);s.set(new Uint8Array(1).fill(0)),s.set(t,1),s.set(new Uint8Array(i,0,i.byteLength),t.length+1);const o=_l.create(bl,e).update(s).digest(),a=o.slice(0,32),c=o.slice(32);return{key:a,chainCode:c}},mP=t=>fP.test(t)?!t.split("/").slice(1).map(Y1).some(isNaN):!1,ey=(t,e,n=hP)=>{if(!mP(t))throw new Error("Invalid derivation path");const{key:i,chainCode:r}=pP(e);return t.split("/").slice(1).map(Y1).map(o=>parseInt(o,10)).reduce((o,a)=>gP(o,a+n),{key:i,chainCode:r})};function X1(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}class wP{equals(e){return X1(this.toRawBytes(),e.toRawBytes())}toBase64(){return Zo(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return Zo(e)}verifyWithIntent(e,n,i){const r=G1(i,e),s=wd(r,{dkLen:32});return this.verify(s,n)}verifyPersonalMessage(e,n){return this.verifyWithIntent(li.vector(li.u8()).serialize(e).toBytes(),n,il.PersonalMessage)}verifyTransactionBlock(e,n){return this.verifyWithIntent(e,n,il.TransactionData)}toSuiBytes(){const e=this.toRawBytes(),n=new Uint8Array(e.length+1);return n.set([this.flag()]),n.set(e,1),n}toSuiAddress(){return lt($0(wd(this.toSuiBytes(),{dkLen:32})).slice(0,z0*2))}}const yp=32;class J1 extends wP{constructor(e){if(super(),typeof e=="string"?this.data=uh(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==yp)throw new Error(`Invalid public key input. Expected ${yp} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Rh.ED25519}async verify(e,n){let i;if(typeof n=="string"){const r=rP(n);if(r.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!X1(this.toRawBytes(),r.publicKey))throw new Error("Signature does not match public key");i=r.signature}else i=n;return bo.sign.detached.verify(e,i,this.toRawBytes())}}J1.SIZE=yp;const ty="m/44'/784'/0'/0'/0'";class Oa extends aP{constructor(e){super(),e?this.keypair=e:this.keypair=bo.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new Oa(bo.sign.keyPair())}static fromSecretKey(e,n){const i=e.length;if(i!==ed)throw new Error(`Wrong secretKey size. Expected ${ed} bytes, got ${i}.`);const r=bo.sign.keyPair.fromSeed(e);if(!n||!n.skipValidation){const o=new TextEncoder().encode("sui validation"),a=bo.sign.detached(o,r.secretKey);if(!bo.sign.detached.verify(o,a,r.publicKey))throw new Error("provided secretKey is invalid")}return new Oa(r)}getPublicKey(){return new J1(this.keypair.publicKey)}getSecretKey(){return cP(this.keypair.secretKey.slice(0,ed),this.getKeyScheme())}async sign(e){return this.signData(e)}signData(e){return bo.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,n){if(n==null&&(n=ty),!Jw(n))throw new Error("Invalid derivation path");const{key:i}=ey(n,uP(e));return Oa.fromSecretKey(i)}static deriveKeypairFromSeed(e,n){if(n==null&&(n=ty),!Jw(n))throw new Error("Invalid derivation path");const{key:i}=ey(n,e);return Oa.fromSecretKey(i)}}var yP=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const pf=yP;var _P=(t,e={})=>{if(!pf(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");const{deep:n}=e,i=[],r=[],s=a=>{const c=i.indexOf(a);if(c!==-1)return r[c];const l=[];return i.push(a),r.push(l),l.push(...a.map(u=>Array.isArray(u)?s(u):pf(u)?o(u):u)),l},o=a=>{const c=i.indexOf(a);if(c!==-1)return r[c];const l={},u=Object.keys(a).sort(e.compare);i.push(a),r.push(l);for(const d of u){const h=a[d];let f;n&&Array.isArray(h)?f=s(h):f=n&&pf(h)?o(h):h,Object.defineProperty(l,d,{...Object.getOwnPropertyDescriptor(a,d),value:f})}return l};return Array.isArray(t)?n?s(t):t.slice():o(t)},bP=Object.prototype.toString,vP=function(e){if(e===void 0)return"undefined";if(e===null)return"null";var n=typeof e;if(n==="boolean")return"boolean";if(n==="string")return"string";if(n==="number")return"number";if(n==="symbol")return"symbol";if(n==="function")return CP(e)?"generatorfunction":"function";if(kP(e))return"array";if(xP(e))return"buffer";if(EP(e))return"arguments";if(TP(e))return"date";if(SP(e))return"error";if(AP(e))return"regexp";switch(ev(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(IP(e))return"generator";switch(n=bP.call(e),n){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")};function ev(t){return typeof t.constructor=="function"?t.constructor.name:null}function kP(t){return Array.isArray?Array.isArray(t):t instanceof Array}function SP(t){return t instanceof Error||typeof t.message=="string"&&t.constructor&&typeof t.constructor.stackTraceLimit=="number"}function TP(t){return t instanceof Date?!0:typeof t.toDateString=="function"&&typeof t.getDate=="function"&&typeof t.setDate=="function"}function AP(t){return t instanceof RegExp?!0:typeof t.flags=="string"&&typeof t.ignoreCase=="boolean"&&typeof t.multiline=="boolean"&&typeof t.global=="boolean"}function CP(t,e){return ev(t)==="GeneratorFunction"}function IP(t){return typeof t.throw=="function"&&typeof t.return=="function"&&typeof t.next=="function"}function EP(t){try{if(typeof t.length=="number"&&typeof t.callee=="function")return!0}catch(e){if(e.message.indexOf("callee")!==-1)return!0}return!1}function xP(t){return t.constructor&&typeof t.constructor.isBuffer=="function"?t.constructor.isBuffer(t):!1}const MP=_P,xm=vP,ny=(t,e)=>!e||xm(e)!=="array"?!1:e.indexOf(t)>-1,NP=(t,e)=>MP(t,{compare:e}),tv=(t,e)=>{const n=e&&e.compareFunction;return t.slice().sort(n)};function nv(t,e){const n=e&&e.compareFunction,i=NP(t,n);return Object.keys(t).forEach(function(r){const s=i[r],o=xm(s);if(o==="object"){(!e||!ny(r,e.ignoreObjectAtKeys))&&(i[r]=nv(s,e));return}o==="array"&&(!e||!ny(r,e.ignoreArrayAtKeys))&&(i[r]=tv(s,e))}),i}const rl=(t,e)=>{const n=xm(t);return rl[n]?rl[n](t,e):t};rl.array=tv;rl.object=nv;var iv=rl,OP="0x2::sui::SUI";function rv(t,e){return lt(t)===lt(e)}function sv(t,e){return mn(t)===mn(e)}function DP(t){return mn(t).startsWith("0x2::coin::Coin")}async function jP(t,e,n){let i=!0,r;const s=[];for(;i;){const o=await t.getCoins({owner:e,coinType:n,cursor:r});s.push(...o.data),i=o.hasNextPage,r=o.nextCursor}return s}async function RP(t,e,n){return sv(e.coinType,OP)?BP(e,n):PP(t,e,n)}function BP(t,e){const n=new X,[i]=n.splitCoins(n.gas,[n.pure(t.amount)]);return n.transferObjects([i],n.pure(t.recipient)),n.setSender(e),n}async function PP(t,e,n){const i=await jP(t,n,e.coinType);if(i.length===0)throw new Error("No valid coin found to send");if(i.reduce((c,l)=>c+BigInt(l.balance),0n)<BigInt(e.amount))throw new Error("Not enough balance");const s=new X,o=s.object(i[0].coinObjectId);i.length>1&&s.mergeCoins(o,i.slice(1).map(c=>s.object(c.coinObjectId)));const[a]=s.splitCoins(o,[s.pure(e.amount)]);return s.transferObjects([a],s.pure(e.recipient)),s.setSender(n),s}async function FP(t,e,n){await UP(t,e,n);const i=new X;return i.transferObjects([i.object(e.objectId)],i.pure(e.receiver)),i.setSender(n),i}async function UP(t,e,n){var s;const i=await t.getObject({id:e.objectId,options:{showType:!0,showOwner:!0}});if(i.data===void 0)throw new Error("Object not found");if(!((s=i.data)!=null&&s.type))throw new Error("Object type is null");if(!sv(i.data.type,e.objectType))throw new Error("Object type not expected");if(DP(i.data.type))throw new Error("Can not transfer coin object in Object Transfer transactions");const r=LP(i);if(!rv(r,n))throw new Error("Object owner not match")}function LP(t){var n;const e=(n=t.data)==null?void 0:n.owner;if(!e)throw new Error("Object Owner not found");if(typeof e!="object"||!("AddressOwner"in e))throw new Error("Invalid object owner");return e.AddressOwner}var $P="msafe-core",ut=(t=>(t.Assets="Assets",t.NFT="NFT",t.Account="Account",t.Swap="Swap",t.Staking="Staking",t.Bridge="Bridge",t.Ending="Ending",t.Stream="Stream",t.Other="Other",t))(ut||{}),td={assets:{coin:{send:"SendCoin",receive:"ReceiveCoin"},object:{send:"SendObject",receive:"ReceiveObject"}},account:{creation:"CreateAccount"},others:{plain:"PlainTransaction"},stream:{create:"CreateStream",claim:"Claim",claimByProxy:"ClaimByProxy",setAutoClaim:"SetAutoClaim",cancel:"Cancel"}};let _u;const zP=new Uint8Array(16);function qP(){if(!_u&&(_u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _u(zP)}const An=[];for(let t=0;t<256;++t)An.push((t+256).toString(16).slice(1));function VP(t,e=0){return An[t[e+0]]+An[t[e+1]]+An[t[e+2]]+An[t[e+3]]+"-"+An[t[e+4]]+An[t[e+5]]+"-"+An[t[e+6]]+An[t[e+7]]+"-"+An[t[e+8]]+An[t[e+9]]+"-"+An[t[e+10]]+An[t[e+11]]+An[t[e+12]]+An[t[e+13]]+An[t[e+14]]+An[t[e+15]]}const WP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),iy={randomUUID:WP};function ry(t,e,n){if(iy.randomUUID&&!e&&!t)return iy.randomUUID();t=t||{};const i=t.random||(t.rng||qP)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return VP(i)}var KP=Object.defineProperty,ZP=(t,e,n)=>e in t?KP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HP=(t,e,n)=>(ZP(t,typeof e!="symbol"?e+"":e,n),n),Mi=5*60*1e3,Oe=24*60*60*1e3;function Ot(t){return Date.parse(new Date().toString())+t}var zn=class{constructor(t,e=0){v(this,"overdueTime");v(this,"value");this.overdueTime=e,this.value=t}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};ne.config({precision:64,rounding:ne.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var En=ne,Ee=class extends Error{constructor(e,n){super(e);v(this,"message");v(this,"errorCode");this.message=e,this.errorCode=n}static isClmmpoolsErrorCode(e,n){return e instanceof Ee&&e.errorCode===n}},$e=new A(0),Wr=new A(1),Bh=new A(2);Bh.pow(new A(128));var uc=Bh.pow(new A(64)).sub(Wr),QP=Bh.pow(new A(128)).sub(Wr),Mt=class{static toX64_BN(e){return e.mul(new A(2).pow(new A(64)))}static toX64_Decimal(e){return e.mul(En.pow(2,64))}static toX64(e){return new A(e.mul(En.pow(2,64)).floor().toFixed())}static fromX64(e){return new En(e.toString()).mul(En.pow(2,-64))}static fromX64_Decimal(e){return e.mul(En.pow(2,-64))}static fromX64_BN(e){return e.div(new A(2).pow(new A(64)))}static shiftRightRoundUp(e){let n=e.shrn(64);return e.mod(uc).gt($e)&&(n=n.add(Wr)),n}static divRoundUp(e,n){return e.mod(n).eq($e)?e.div(n):e.div(n).add(new A(1))}static subUnderflowU128(e,n){return e.lt(n)?e.sub(n).add(QP):e.sub(n)}static checkUnsignedSub(e,n){const i=e.sub(n);if(i.isNeg())throw new Ee("Unsigned integer sub overflow","UnsignedIntegerOverflow");return i}static checkMul(e,n,i){const r=e.mul(n);if(this.isOverflow(r,i))throw new Ee("Multiplication overflow","MultiplicationOverflow");return r}static checkMulDivFloor(e,n,i,r){if(i.eq($e))throw new Ee("Devide by zero","DivideByZero");const s=e.mul(n).div(i);if(this.isOverflow(s,r))throw new Ee("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivCeil(e,n,i,r){if(i.eq($e))throw new Ee("Devide by zero","DivideByZero");const s=e.mul(n).add(i.sub(Wr)).div(i);if(this.isOverflow(s,r))throw new Ee("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivRound(e,n,i,r){if(i.eq($e))throw new Ee("Devide by zero","DivideByZero");const s=e.mul(n.add(i.shrn(1))).div(i);if(this.isOverflow(s,r))throw new Ee("Multiplication div overflow","MulDivOverflow");return s}static checkMulShiftRight(e,n,i,r){const s=e.mul(n).div(new A(2).pow(new A(i)));if(this.isOverflow(s,r))throw new Ee("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftRight64RoundUpIf(e,n,i,r){const s=e.mul(n),a=r&&s.and(uc).gt($e)?s.shrn(64).add(Wr):s.shrn(64);if(this.isOverflow(a,i))throw new Ee("Multiplication shift right overflow","MulShiftRightOverflow");return a}static checkMulShiftLeft(e,n,i,r){const s=e.mul(n).shln(i);if(this.isOverflow(s,r))throw new Ee("Multiplication shift left overflow","MulShiftLeftOverflow");return s}static checkDivRoundUpIf(e,n,i){if(n.eq($e))throw new Ee("Devide by zero","DivideByZero");return i?this.divRoundUp(e,n):e.div(n)}static isOverflow(e,n){return e.gte(Bh.pow(new A(n)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt($e)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new A("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new A(1)))}static neg_from(e){return e.eq($e)?e:this.u128_neg(e).add(new A(1)).or(new A(1).shln(127))}};function GP(t){return{coinA:t.coinTypeA,coinB:t.coinTypeB,currentSqrtPrice:new A(t.current_sqrt_price),currentTickIndex:t.current_tick_index,feeGrowthGlobalA:new A(t.fee_growth_global_a),feeGrowthGlobalB:new A(t.fee_growth_global_b),feeProtocolCoinA:new A(t.fee_protocol_coin_a),feeProtocolCoinB:new A(t.fee_protocol_coin_b),feeRate:new A(t.fee_rate),liquidity:new A(t.liquidity),tickIndexes:[],tickSpacing:Number(t.tickSpacing),ticks:[],collection_name:""}}var YP=443636,XP=-443636,Ph="79226673515401279992447579055",Fh="4295048016",Da=new A(1e6),we="0x0000000000000000000000000000000000000000000000000000000000000006",JP="partner",Vc="pool_script",Js="pool_script_v2",Bo="router",gf="router_with_partner",Qi="fetcher_script",eF="expect_swap",sy="utils",mf="custodian_v2",tF="clob_v2",nF="endpoints_v2",ov=(t=>(t.Deleted="Deleted",t.Exists="Exists",t.NotExists="NotExists",t))(ov||{});function L(t){if(t.config===void 0)throw new Ee(`package: ${t.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return t.config}var iF=14,rF="59543866431248",sF="184467440737095516",oF="15793534762490258745",aF=443636;function cF(t,e,n){const i=t.toTwos(n).shln(e);return i.imaskn(n+1),i.fromTwos(n)}function dt(t,e,n){const i=t.toTwos(n).shrn(e);return i.imaskn(n-e+1),i.fromTwos(n-e)}function lF(t){let e;return t&1?e=new A("79232123823359799118286999567"):e=new A("79228162514264337593543950336"),t&2&&(e=dt(e.mul(new A("79236085330515764027303304731")),96,256)),t&4&&(e=dt(e.mul(new A("79244008939048815603706035061")),96,256)),t&8&&(e=dt(e.mul(new A("79259858533276714757314932305")),96,256)),t&16&&(e=dt(e.mul(new A("79291567232598584799939703904")),96,256)),t&32&&(e=dt(e.mul(new A("79355022692464371645785046466")),96,256)),t&64&&(e=dt(e.mul(new A("79482085999252804386437311141")),96,256)),t&128&&(e=dt(e.mul(new A("79736823300114093921829183326")),96,256)),t&256&&(e=dt(e.mul(new A("80248749790819932309965073892")),96,256)),t&512&&(e=dt(e.mul(new A("81282483887344747381513967011")),96,256)),t&1024&&(e=dt(e.mul(new A("83390072131320151908154831281")),96,256)),t&2048&&(e=dt(e.mul(new A("87770609709833776024991924138")),96,256)),t&4096&&(e=dt(e.mul(new A("97234110755111693312479820773")),96,256)),t&8192&&(e=dt(e.mul(new A("119332217159966728226237229890")),96,256)),t&16384&&(e=dt(e.mul(new A("179736315981702064433883588727")),96,256)),t&32768&&(e=dt(e.mul(new A("407748233172238350107850275304")),96,256)),t&65536&&(e=dt(e.mul(new A("2098478828474011932436660412517")),96,256)),t&131072&&(e=dt(e.mul(new A("55581415166113811149459800483533")),96,256)),t&262144&&(e=dt(e.mul(new A("38992368544603139932233054999993551")),96,256)),dt(e,32,256)}function uF(t){const e=Math.abs(t);let n;return e&1?n=new A("18445821805675392311"):n=new A("18446744073709551616"),e&2&&(n=dt(n.mul(new A("18444899583751176498")),64,256)),e&4&&(n=dt(n.mul(new A("18443055278223354162")),64,256)),e&8&&(n=dt(n.mul(new A("18439367220385604838")),64,256)),e&16&&(n=dt(n.mul(new A("18431993317065449817")),64,256)),e&32&&(n=dt(n.mul(new A("18417254355718160513")),64,256)),e&64&&(n=dt(n.mul(new A("18387811781193591352")),64,256)),e&128&&(n=dt(n.mul(new A("18329067761203520168")),64,256)),e&256&&(n=dt(n.mul(new A("18212142134806087854")),64,256)),e&512&&(n=dt(n.mul(new A("17980523815641551639")),64,256)),e&1024&&(n=dt(n.mul(new A("17526086738831147013")),64,256)),e&2048&&(n=dt(n.mul(new A("16651378430235024244")),64,256)),e&4096&&(n=dt(n.mul(new A("15030750278693429944")),64,256)),e&8192&&(n=dt(n.mul(new A("12247334978882834399")),64,256)),e&16384&&(n=dt(n.mul(new A("8131365268884726200")),64,256)),e&32768&&(n=dt(n.mul(new A("3584323654723342297")),64,256)),e&65536&&(n=dt(n.mul(new A("696457651847595233")),64,256)),e&131072&&(n=dt(n.mul(new A("26294789957452057")),64,256)),e&262144&&(n=dt(n.mul(new A("37481735321082")),64,256)),n}var Fe=class{static priceToSqrtPriceX64(t,e,n){return Mt.toX64(t.mul(En.pow(10,n-e)).sqrt())}static sqrtPriceX64ToPrice(t,e,n){return Mt.fromX64(t).pow(2).mul(En.pow(10,e-n))}static tickIndexToSqrtPriceX64(t){return t>0?new A(lF(t)):new A(uF(t))}static sqrtPriceX64ToTickIndex(t){if(t.gt(new A(Ph))||t.lt(new A(Fh)))throw new Ee("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const e=t.bitLength()-1,n=new A(e-64),i=cF(n,32,128);let r=new A("8000000000000000","hex"),s=0,o=new A(0),a=e>=64?t.shrn(e-63):t.shln(63-e);for(;r.gt(new A(0))&&s<iF;){a=a.mul(a);const g=a.shrn(127);a=a.shrn(63+g.toNumber()),o=o.add(r.mul(g)),r=r.shrn(1),s+=1}const c=o.shrn(32),u=i.add(c).mul(new A(rF)),d=dt(u.sub(new A(sF)),64,128).toNumber(),h=dt(u.add(new A(oF)),64,128).toNumber();return d===h?d:Fe.tickIndexToSqrtPriceX64(h).lte(t)?h:d}static tickIndexToPrice(t,e,n){return Fe.sqrtPriceX64ToPrice(Fe.tickIndexToSqrtPriceX64(t),e,n)}static priceToTickIndex(t,e,n){return Fe.sqrtPriceX64ToTickIndex(Fe.priceToSqrtPriceX64(t,e,n))}static priceToInitializableTickIndex(t,e,n,i){return Fe.getInitializableTickIndex(Fe.priceToTickIndex(t,e,n),i)}static getInitializableTickIndex(t,e){return t-t%e}static getNextInitializableTickIndex(t,e){return Fe.getInitializableTickIndex(t,e)+e}static getPrevInitializableTickIndex(t,e){return Fe.getInitializableTickIndex(t,e)-e}};function dF(t){return O(t).add(O(aF))}new A(365);new A(24);new A(3600);new A(.5);var Rr=class{static getDefaultSqrtPriceLimit(t){return new A(t?Fh:Ph)}static getDefaultOtherAmountThreshold(t){return t?$e:uc}};function av(t,e,n,i){if(n.eq($e))return t;const r=Mt.checkMulShiftLeft(t,e,64,256),s=e.shln(64),o=Mt.checkMul(t,n,256);if(!i&&s.lte(o))throw new Ee("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=i?Mt.checkDivRoundUpIf(r,s.add(o),!0):Mt.checkDivRoundUpIf(r,s.sub(o),!0);if(a.lt(new A(Fh)))throw new Ee("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new A(Ph)))throw new Ee("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function cv(t,e,n,i){const r=Mt.checkDivRoundUpIf(n.shln(64),e,!i),s=i?t.add(r):t.sub(r);if(s.lt(new A(Fh))||s.gt(new A(Ph)))throw new Ee("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return s}function hF(t,e,n,i){return i?av(t,e,n,!0):cv(t,e,n,!0)}function fF(t,e,n,i){return i?cv(t,e,n,!1):av(t,e,n,!1)}function oy(t,e,n,i){const r=t.gt(e)?t.sub(e):e.sub(t);if(n.lte($e)||r.eq($e))return $e;let s;if(i){const o=new A(n).mul(new A(r)).shln(64),a=e.mul(t),c=o.div(a);s=o.mod(a).eq($e)?c:c.add(Wr)}else{const o=new A(n).mul(new A(r));s=o.and(uc).gt($e)?o.shrn(64).add(Wr):o.shrn(64)}return s}function ay(t,e,n,i){const r=t.gt(e)?t.sub(e):e.sub(t);if(n.lte($e)||r.eq($e))return $e;let s;if(i)s=n.mul(r).shrn(64);else{const o=n.mul(r).shln(64),a=e.mul(t);s=o.div(a)}return s}function pF(t,e,n,i,r,s){if(n===$e)return{amountIn:$e,amountOut:$e,nextSqrtPrice:e,feeAmount:$e};const o=t.gte(e);let a,c,l,u;if(s){const d=Mt.checkMulDivFloor(i,Mt.checkUnsignedSub(Da,r),Da,64),h=oy(t,e,n,o);h.gt(d)?(a=d,u=Mt.checkUnsignedSub(i,d),l=hF(t,n,d,o)):(a=h,u=Mt.checkMulDivCeil(a,r,Da.sub(r),64),l=e),c=ay(t,l,n,o)}else{const d=ay(t,e,n,o);d.gt(i)?(c=i,l=fF(t,n,i,o)):(c=d,l=e),a=oy(t,l,n,o),u=Mt.checkMulDivCeil(a,r,Da.sub(r),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:l,feeAmount:u}}function gF(t,e,n,i,r){let s=n,o=i.liquidity,{currentSqrtPrice:a}=i;const c={amountIn:$e,amountOut:$e,feeAmount:$e,refAmount:$e,nextSqrtPrice:$e,crossTickNum:0};let l,u;const d=Rr.getDefaultSqrtPriceLimit(t);for(const h of r){if(t&&i.currentTickIndex<h.index||!t&&i.currentTickIndex>=h.index||h===null)continue;t&&d.gt(h.sqrtPrice)||!t&&d.lt(h.sqrtPrice)?l=d:l=h.sqrtPrice;const f=pF(a,l,o,s,i.feeRate,e);if(f.amountIn.eq($e)||(s=e?s.sub(f.amountIn.add(f.feeAmount)):s.sub(f.amountOut)),c.amountIn=c.amountIn.add(f.amountIn),c.amountOut=c.amountOut.add(f.amountOut),c.feeAmount=c.feeAmount.add(f.feeAmount),f.nextSqrtPrice.eq(h.sqrtPrice)?(u=h.liquidityNet.mul(new A(-1)),t?Mt.is_neg(u)?o=o.add(new A(Nn(BigInt(u.toString()),128))):o=o.add(u):Mt.is_neg(u)?o=o.sub(new A(Nn(BigInt(u.toString()),128))):o=o.sub(u),a=h.sqrtPrice):a=f.nextSqrtPrice,c.crossTickNum+=1,s.eq($e))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function bu(t,e,n){const i=A.min(t,e),r=A.max(t,e),s=Mt.fromX64_BN(n.mul(r).mul(i)),o=r.sub(i);return s.div(o)}function vu(t,e,n){const i=A.min(t,e),s=A.max(t,e).sub(i);return n.shln(64).div(s)}var bn=class{static updateFeeRate(t,e,n,i,r){const s=Mt.checkMulDivCeil(e,new A(i),Da,64),o=n===0?$e:Mt.checkMulDivFloor(e,new A(n),Da,64),a=e.mul(s).mul(o);if(r?t.feeProtocolCoinA=t.feeProtocolCoinA.add(s):t.feeProtocolCoinB=t.feeProtocolCoinB.add(s),a.eq($e)||t.liquidity.eq($e))return{refFee:o,clmm:t};const c=a.shln(64).div(t.liquidity);return r?t.feeGrowthGlobalA=t.feeGrowthGlobalA.add(c):t.feeGrowthGlobalB=t.feeGrowthGlobalB.add(c),{refFee:o,clmm:t}}static getCoinAmountFromLiquidity(t,e,n,i,r){const s=new En(t.toString()),o=new En(e.toString()),a=new En(n.toString()),c=new En(i.toString());let l,u;return e.lt(n)?(l=Mt.toX64_Decimal(s).mul(c.sub(a)).div(a.mul(c)),u=new En(0)):e.lt(i)?(l=Mt.toX64_Decimal(s).mul(c.sub(o)).div(o.mul(c)),u=Mt.fromX64_Decimal(s.mul(o.sub(a)))):(l=new En(0),u=Mt.fromX64_Decimal(s.mul(c.sub(a)))),r?{coinA:new A(l.ceil().toString()),coinB:new A(u.ceil().toString())}:{coinA:new A(l.floor().toString()),coinB:new A(u.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(t,e,n,i,r,s,o){const a=Fe.sqrtPriceX64ToTickIndex(o),c=Fe.tickIndexToSqrtPriceX64(t),l=Fe.tickIndexToSqrtPriceX64(e);let u;if(a<t){if(!i)throw new Ee("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");u=bu(c,l,n)}else if(a>e){if(i)throw new Ee("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");u=vu(l,c,n)}else i?u=bu(o,l,n):u=vu(o,c,n);const d=bn.getCoinAmountFromLiquidity(u,o,c,l,r),h=r?O(d.coinA.toString()).mul(1+s).toString():O(d.coinA.toString()).mul(1-s).toString(),f=r?O(d.coinB.toString()).mul(1+s).toString():O(d.coinB.toString()).mul(1-s).toString();return{coinAmountA:d.coinA,coinAmountB:d.coinB,tokenMaxA:r?new A(En.ceil(h).toString()):new A(En.floor(h).toString()),tokenMaxB:r?new A(En.ceil(f).toString()):new A(En.floor(f).toString()),liquidityAmount:u,fix_amount_a:i}}static estimateLiquidityFromcoinAmounts(t,e,n,i){if(e>n)throw new Ee("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const r=Fe.sqrtPriceX64ToTickIndex(t),s=Fe.tickIndexToSqrtPriceX64(e),o=Fe.tickIndexToSqrtPriceX64(n);if(r<e)return bu(s,o,i.coinA);if(r>=n)return vu(o,s,i.coinB);const a=bu(t,o,i.coinA),c=vu(t,s,i.coinB);return A.min(a,c)}static estCoinAmountsFromTotalAmount(t,e,n,i,r,s){const{ratioA:o,ratioB:a}=bn.calculateDepositRatioFixTokenA(t,e,n),c=O(i).mul(o).div(r),l=O(i).mul(a).div(s);return{amountA:c,amountB:l}}static calculateDepositRatioFixTokenA(t,e,n){const i=new A(1e8),{coinAmountB:r}=bn.estLiquidityAndcoinAmountFromOneAmounts(t,e,i,!0,!0,0,n),s=Fe.sqrtPriceX64ToPrice(n,0,0),o=O(i.toString()).mul(s),a=o.add(r.toString()),c=o.div(a),l=O(r.toString()).div(a);return{ratioA:c,ratioB:l}}};function lv(t){return t.startsWith("0x")?`${t.slice(2)}`:t}var mF=0,uv=1,wF=2;function cy(t,e){return t===e?mF:t<e?uv:wF}function yF(t,e){let n=0;const i=t.length<=e.length?t.length:e.length,r=cy(t.length,e.length);for(;n<i;){const s=cy(t.charCodeAt(n),e.charCodeAt(n));if(n+=1,s!==0)return s}return r}function _p(t,e){return yF(t,e)===uv}function Zd(t,...e){const n=Array.isArray(e[e.length-1])?e.pop():[];let r=[t,...e].filter(Boolean).join("::");return n&&n.length&&(r+=`<${n.join(", ")}>`),r}function ce(t){var e;try{let n=t.replace(/\s/g,"");const i=n.match(/(<.+>)$/),r=(e=i==null?void 0:i[0])==null?void 0:e.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r){n=n.slice(0,n.indexOf("<"));const l={...ce(n),type_arguments:r.map(u=>ce(u).source_address)};return l.type_arguments=l.type_arguments.map(u=>yt.isSuiCoin(u)?u:ce(u).source_address),l.source_address=Zd(l.full_address,l.type_arguments),l}const s=n.split("::"),a={full_address:n,address:n===Hd||n===SF?"0x2":Mn(s[0]),module:s[1],name:s[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=Zd(a.full_address,a.type_arguments),a}catch{return{full_address:t,address:"",module:"",name:"",type_arguments:[],source_address:t}}}function ci(t){return ce(t).source_address}function _F(t){return t.toLowerCase().startsWith("0x")?Mn(t):t}var bF=(t,e=!0)=>{const n=t.split("::"),i=n.shift();let r=Mn(i);return e&&(r=lv(r)),`${r}::${n.join("::")}`};function Mm(t){for(const e in t){const n=typeof t[e];if(n==="object")Mm(t[e]);else if(n==="string"){const i=t[e];i&&!i.includes("::")&&(t[e]=_F(i))}}}var vF="0x2::coin::Coin",kF=/^0x2::coin::Coin<(.+)>$/,Hd="0x2::sui::SUI",SF="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",yt=class{static getCoinTypeArg(t){const e=t.type.match(kF);return e?e[1]:null}static isSUI(t){const e=yt.getCoinTypeArg(t);return e?yt.getCoinSymbol(e)==="SUI":!1}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getBalance(t){return BigInt(t.fields.balance)}static totalBalance(t,e){let n=BigInt(0);return t.forEach(i=>{e===i.coinAddress&&(n+=BigInt(i.balance))}),n}static getID(t){return t.fields.id.id}static getCoinTypeFromArg(t){return`${vF}<${t}>`}static getFaucetCoins(t){const{events:e}=t,n=[];return e==null||e.forEach(i=>{const{type:r}=i;if(ce(r).name==="InitEvent"){const s=i.parsedJson;n.push({transactionModule:i.transactionModule,suplyID:s.suplyID,decimals:s.decimals})}}),n}static getCoinAssets(t,e){const n=[];return e.forEach(i=>{ci(i.coinAddress)===ci(t)&&n.push(i)}),n}static isSuiCoin(t){return ce(t).full_address===Hd}static selectCoinObjectIdGreaterThanOrEqual(t,e,n=[]){const i=yt.selectCoinAssetGreaterThanOrEqual(t,e,n),r=i.selectedCoins.map(a=>a.coinObjectId),s=i.remainingCoins,o=i.selectedCoins.map(a=>a.balance.toString());return{objectArray:r,remainCoins:s,amountArray:o}}static selectCoinAssetGreaterThanOrEqual(t,e,n=[]){const i=yt.sortByBalance(t.filter(c=>!n.includes(c.coinObjectId))),r=yt.calculateTotalBalance(i);if(r<e)return{selectedCoins:[],remainingCoins:i};if(r===e)return{selectedCoins:i,remainingCoins:[]};let s=BigInt(0);const o=[],a=[...i];for(;s<r;){const c=e-s,l=a.findIndex(d=>d.balance>=c);if(l!==-1){o.push(a[l]),a.splice(l,1);break}const u=a.pop();u.balance>0&&(o.push(u),s+=u.balance)}return{selectedCoins:yt.sortByBalance(o),remainingCoins:yt.sortByBalance(a)}}static sortByBalance(t){return t.sort((e,n)=>e.balance<n.balance?-1:e.balance>n.balance?1:0)}static sortByBalanceDes(t){return t.sort((e,n)=>e.balance>n.balance?-1:e.balance<n.balance?0:1)}static calculateTotalBalance(t){return t.reduce((e,n)=>e+n.balance,BigInt(0))}},Wc=class{constructor(t,e){v(this,"numerator");v(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=t,this.denominator=e}static fromDecimal(t){return Wc.fromFraction(t.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(t,e){const n=typeof t=="number"?new A(t.toString()):t,i=typeof e=="number"?new A(e.toString()):e;return new Wc(n,i)}};function bp(t,{numerator:e,denominator:n},i){return i?t.mul(n.add(e)).div(n):t.mul(n).div(n.add(e))}function wf(t,e,n){return{tokenMaxA:bp(t.coinA,e,n),tokenMaxB:bp(t.coinB,e,n)}}function O(t){return ne.isDecimal(t)?t:new ne(t===void 0?0:t)}function TF(t){return O(10).pow(O(t).abs())}function Nl(t){return t.data}function dv(t){if(t.error&&"object_id"in t.error&&"version"in t.error&&"digest"in t.error){const{error:e}=t;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function hv(t){if(t.error&&"object_id"in t.error&&!("version"in t.error)&&!("digest"in t.error))return t.error.object_id}function AF(t){if("reference"in t)return t.reference;const e=Nl(t);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:dv(t)}function mr(t){var e;return"objectId"in t?t.objectId:((e=AF(t))==null?void 0:e.objectId)??hv(t)}function CF(t){return t.data!==void 0}function IF(t){return t.content!==void 0}function fv(t){const e="data"in t?Nl(t):t;if(!(!e||!IF(e)||e.content.dataType!=="moveObject"))return e.content}function _r(t){var e;return(e=fv(t))==null?void 0:e.type}function dc(t){var n;const e=CF(t)?t.data:t;return!(e!=null&&e.type)&&"data"in t?((n=e==null?void 0:e.content)==null?void 0:n.dataType)==="package"?"package":_r(t):e==null?void 0:e.type}function Ol(t){var e;return(e=Nl(t))==null?void 0:e.previousTransaction}function Qd(t){var e;return(e=Nl(t))==null?void 0:e.owner}function EF(t){var n;const e=(n=Nl(t))==null?void 0:n.display;return e||{data:null,error:null}}function Qe(t){var n;const e=(n=fv(t))==null?void 0:n.fields;if(e)return"fields"in e?e.fields:e}function xF(t,e){const n=TF(O(e));return Number(O(t).mul(n))}function Nn(t,e=32){return BigInt.asUintN(e,BigInt(t)).toString()}function gn(t,e=32){return Number(BigInt.asIntN(e,BigInt(t)))}function MF(t,e,n){const i=ce(t).name,r=ce(e).name;return`${i}-${r}[${n}]`}function yf(t){const e=_r(t),n=ce(e),i=Qe(t);if(i==null)throw new Ee(`Pool id ${mr(t)} not exists.`,"InvalidPoolObject");const r=[];i.rewarder_manager.fields.rewarders.forEach(o=>{const{emissions_per_second:a}=o.fields,c=Mt.fromX64(new A(a)),l=Math.floor(c.toNumber()*60*60*24);r.push({emissions_per_second:a,coinAddress:ce(o.fields.reward_coin.fields.name).source_address,growth_global:o.fields.growth_global,emissionsEveryDay:l})});const s={poolAddress:mr(t),poolType:e,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:i.coin_a,coinAmountB:i.coin_b,current_sqrt_price:i.current_sqrt_price,current_tick_index:gn(BigInt(i.current_tick_index.fields.bits)),fee_growth_global_a:i.fee_growth_global_a,fee_growth_global_b:i.fee_growth_global_b,fee_protocol_coin_a:i.fee_protocol_coin_a,fee_protocol_coin_b:i.fee_protocol_coin_b,fee_rate:i.fee_rate,is_pause:i.is_pause,liquidity:i.liquidity,position_manager:{positions_handle:i.position_manager.fields.positions.fields.id.id,size:i.position_manager.fields.positions.fields.size},rewarder_infos:r,rewarder_last_updated_time:i.rewarder_manager.fields.last_updated_time,tickSpacing:i.tick_spacing,ticks_handle:i.tick_manager.fields.ticks.fields.id.id,uri:i.url,index:Number(i.index),name:""};return s.name=MF(s.coinTypeA,s.coinTypeB,s.tickSpacing),s}function Uh(t){const e=EF(t).data,n={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return e&&(n.creator=e.creator,n.description=e.description,n.image_url=e.image_url,n.link=e.link,n.name=e.name,n.project_url=e.project_url),n}function Za(t){var o,a;if(t.error!=null||((a=(o=t.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ee(`Position not exists. Get Position error:${t.error}`,"InvalidPositionObject");let e={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},n={...e,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},i=Qe(t);if(i){const c=_r(t),l=Qd(t);"nft"in i?(i=i.nft.fields,e.description=i.description,e.name=i.name,e.link=i.url):e=Uh(t),n={...e,pos_object_id:i.id.id,owner:l.AddressOwner,type:c,coin_type_a:i.coin_type_a.fields.name,coin_type_b:i.coin_type_b.fields.name,liquidity:i.liquidity,tick_lower_index:gn(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:gn(BigInt(i.tick_upper_index.fields.bits)),index:i.index,pool:i.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const r=dv(t);r&&(n.pos_object_id=r.objectId,n.position_status="Deleted");const s=hv(t);return s&&(n.pos_object_id=s,n.position_status="NotExists"),n}function pv(t){const e={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};t="fields"in t?t.fields:t,t.rewards.forEach((s,o)=>{const{amount_owned:a,growth_inside:c}="fields"in s?s.fields:s;o===0?(e.reward_amount_owed_0=a,e.reward_growth_inside_0=c):o===1?(e.reward_amount_owed_1=a,e.reward_growth_inside_1=c):o===2&&(e.reward_amount_owed_2=a,e.reward_growth_inside_2=c)});const n="fields"in t.tick_lower_index?t.tick_lower_index.fields.bits:t.tick_lower_index.bits,i="fields"in t.tick_upper_index?t.tick_upper_index.fields.bits:t.tick_upper_index.bits;return{liquidity:t.liquidity,tick_lower_index:gn(BigInt(n)),tick_upper_index:gn(BigInt(i)),...e,fee_growth_inside_a:t.fee_growth_inside_a,fee_owed_a:t.fee_owned_a,fee_growth_inside_b:t.fee_growth_inside_b,fee_owed_b:t.fee_owned_b,pos_object_id:t.position_id}}function _f(t){var r,s;if(t.error!=null||((s=(r=t.data)==null?void 0:r.content)==null?void 0:s.dataType)!=="moveObject")throw new Ee(`Tick not exists. Get tick data error:${t.error}`,"InvalidTickObject");const n=Qe(t).value.fields.value.fields;return{objectId:mr(t),index:gn(BigInt(n.index.fields.bits)),sqrtPrice:new A(n.sqrt_price),liquidityNet:new A(n.liquidity_net.fields.bits),liquidityGross:new A(n.liquidity_gross),feeGrowthOutsideA:new A(n.fee_growth_outside_a),feeGrowthOutsideB:new A(n.fee_growth_outside_b),rewardersGrowthOutside:n.rewards_growth_outside}}function NF(t){if(!t||!t.index||!t.sqrt_price||!t.liquidity_net||!t.liquidity_gross||!t.fee_growth_outside_a||!t.fee_growth_outside_b)throw new Ee("Invalid tick fields.","InvalidTickFields");const e=gn(BigInt(t.index.bits)),n=new A(t.sqrt_price),i=new A(t.liquidity_net.bits),r=new A(t.liquidity_gross),s=new A(t.fee_growth_outside_a),o=new A(t.fee_growth_outside_b),a=t.rewards_growth_outside||[];return{objectId:"",index:e,sqrtPrice:n,liquidityNet:i,liquidityGross:r,feeGrowthOutsideA:s,feeGrowthOutsideB:o,rewardersGrowthOutside:a}}function OF(t,e,n,i,r,s){const o=t.rewarder_infos,a=[];for(let c=0;c<o.length;c+=1){let l=s[c];e!==null&&(t.current_tick_index<i?l=s[c].sub(new A(e.rewardersGrowthOutside[c])):l=e.rewardersGrowthOutside[c]);let u=new A(0);n!==null&&(t.current_tick_index>=r?u=s[c].sub(new A(n.rewardersGrowthOutside[c])):u=n.rewardersGrowthOutside[c]);const d=Mt.subUnderflowU128(Mt.subUnderflowU128(new A(s[c]),new A(l)),new A(u));a.push(d)}return a}function Gd(t){const e=yt.isSuiCoin(t.coinTypeA),n=yt.isSuiCoin(t.coinTypeB);return{isAdjustCoinA:e,isAdjustCoinB:n}}function DF(t,e){return ne.ceil(O(t).div(1+e)).toString()}var We=class{static createCollectRewarderAndFeeParams(t,e,n,i,r,s){r===void 0&&(r=[...i]),s===void 0&&(s=[...i]);const o=ci(n.coinTypeA),a=ci(n.coinTypeB);if(n.collect_fee){const l=We.buildCoinForAmount(e,r,BigInt(0),o,!1);r=l.remainCoins;const u=We.buildCoinForAmount(e,s,BigInt(0),a,!1);s=u.remainCoins,e=t.Position.createCollectFeePaylod({pool_id:n.pool_id,pos_id:n.pos_id,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB},e,l.targetCoin,u.targetCoin)}const c=[];return n.rewarder_coin_types.forEach(l=>{switch(ci(l)){case o:c.push(We.buildCoinForAmount(e,r,BigInt(0),l,!1).targetCoin);break;case a:c.push(We.buildCoinForAmount(e,s,BigInt(0),l,!1).targetCoin);break;default:c.push(We.buildCoinForAmount(e,i,BigInt(0),l,!1).targetCoin);break}}),e=t.Rewarder.createCollectRewarderPaylod(n,e,c),e}static async adjustTransactionForGas(t,e,n,i){i.setSender(t.senderAddress);const r=yt.selectCoinAssetGreaterThanOrEqual(e,n).selectedCoins;if(r.length===0)throw new Ee("Insufficient balance","InsufficientBalance");const s=yt.calculateTotalBalance(e);if(s-n>1e9)return{fixAmount:n};const o=await t.fullClient.calculationTxGas(i);if(yt.selectCoinAssetGreaterThanOrEqual(e,BigInt(o),r.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(o)+BigInt(500);if(s-n<c){if(n-=c,n<0)throw new Ee("gas Insufficient balance","InsufficientBalance");const l=new X;return{fixAmount:n,newTx:l}}}return{fixAmount:n}}static async buildAddLiquidityFixTokenForGas(t,e,n,i){let r=await We.buildAddLiquidityFixToken(t,e,n);const{isAdjustCoinA:s}=Gd(n),o=s?n.amount_a:n.amount_b,a=await We.adjustTransactionForGas(t,yt.getCoinAssets(s?n.coinTypeA:n.coinTypeB,e),BigInt(o),r),{fixAmount:c}=a,{newTx:l}=a;if(l!==void 0){let u,d;if(s)n.amount_a=Number(c),u=We.buildAddLiquidityFixTokenCoinInput(l,!n.fix_amount_a,c.toString(),n.slippage,n.coinTypeA,e,!1),d=We.buildAddLiquidityFixTokenCoinInput(l,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,e,!1);else return n.amount_b=Number(c),u=We.buildAddLiquidityFixTokenCoinInput(l,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,e,!1),d=We.buildAddLiquidityFixTokenCoinInput(l,n.fix_amount_a,c.toString(),n.slippage,n.coinTypeB,e,!1),n=We.fixAddLiquidityFixTokenParams(n,i.slippage,i.curSqrtPrice),r=await We.buildAddLiquidityFixTokenArgs(l,t,e,n,u,d),r}return r}static async buildAddLiquidityFixToken(t,e,n){if(t.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=new X;const r=We.buildAddLiquidityFixTokenCoinInput(i,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,e,!1),s=We.buildAddLiquidityFixTokenCoinInput(i,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,e,!1);return i=We.buildAddLiquidityFixTokenArgs(i,t,e,n,r,s),i}static buildAddLiquidityFixTokenCoinInput(t,e,n,i,r,s,o=!0){return e?We.buildCoinForAmountInterval(t,s,{amountSecond:BigInt(DF(n,i)),amountFirst:BigInt(n)},r,o):We.buildCoinForAmount(t,s,BigInt(n),r,o)}static fixAddLiquidityFixTokenParams(t,e,n){const i=t.fix_amount_a?t.amount_a:t.amount_b,r=bn.estLiquidityAndcoinAmountFromOneAmounts(Number(t.tick_lower),Number(t.tick_upper),new A(i),t.fix_amount_a,!0,e,n);return t.amount_a=t.fix_amount_a?t.amount_a:r.tokenMaxA.toNumber(),t.amount_b=t.fix_amount_a?r.tokenMaxB.toNumber():t.amount_b,t}static buildAddLiquidityFixTokenArgs(t,e,n,i,r,s){const o=[i.coinTypeA,i.coinTypeB],a=i.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:l}=e.sdkOptions;i.is_open||(t=We.createCollectRewarderAndFeeParams(e,t,i,n,r.remainCoins,s.remainCoins));const u=L(c),d=i.is_open?[t.object(u.global_config_id),t.object(i.pool_id),t.pure(Nn(BigInt(i.tick_lower)).toString()),t.pure(Nn(BigInt(i.tick_upper)).toString()),r.targetCoin,s.targetCoin,t.pure(i.amount_a),t.pure(i.amount_b),t.pure(i.fix_amount_a),t.object(we)]:[t.object(u.global_config_id),t.object(i.pool_id),t.object(i.pos_id),r.targetCoin,s.targetCoin,t.pure(i.amount_a),t.pure(i.amount_b),t.pure(i.fix_amount_a),t.object(we)];return t.moveCall({target:`${l.published_at}::${Js}::${a}`,typeArguments:o,arguments:d}),t}static async buildSwapTransactionForGas(t,e,n,i){let r=We.buildSwapTransaction(t,e,n);r.setSender(t.senderAddress);const s=await We.adjustTransactionForGas(t,yt.getCoinAssets(e.a2b?e.coinTypeA:e.coinTypeB,n),BigInt(e.by_amount_in?e.amount:e.amount_limit),r),{fixAmount:o,newTx:a}=s;if(a!==void 0){a.setSender(t.senderAddress),e.by_amount_in?e.amount=o.toString():e.amount_limit=o.toString(),e=await We.fixSwapParams(t,e,i);const c=We.buildCoinForAmount(r,n,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA),l=We.buildCoinForAmount(r,n,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB);r=We.buildSwapTransactionArgs(a,e,t.sdkOptions,c,l)}return r}static buildSwapTransaction(t,e,n){let i=new X;i.setSender(t.senderAddress);const r=We.buildCoinForAmount(i,n,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1),s=We.buildCoinForAmount(i,n,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1);return i=We.buildSwapTransactionArgs(i,e,t.sdkOptions,r,s),i}static buildSwapTransactionArgs(t,e,n,i,r){const{clmm_pool:s,integrate:o}=n,a=Rr.getDefaultSqrtPriceLimit(e.a2b),c=[e.coinTypeA,e.coinTypeB],{global_config_id:l}=L(s);if(l===void 0)throw Error("clmm.config.global_config_id is undefined");const u=e.swap_partner!==void 0,d=u?e.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":e.a2b?"swap_a2b":"swap_b2a",h=u?[t.pure(l),t.pure(e.pool_id),t.pure(e.swap_partner),i.targetCoin,r.targetCoin,t.pure(e.by_amount_in),t.pure(e.amount),t.pure(e.amount_limit),t.pure(a.toString()),t.pure(we)]:[t.pure(l),t.pure(e.pool_id),i.targetCoin,r.targetCoin,t.pure(e.by_amount_in),t.pure(e.amount),t.pure(e.amount_limit),t.pure(a.toString()),t.pure(we)];return t.moveCall({target:`${o.published_at}::${Js}::${d}`,typeArguments:c,arguments:h}),t}static async buildSwapTransactionWithoutTransferCoinsForGas(t,e,n,i){let{tx:r,coinABs:s}=We.buildSwapTransactionWithoutTransferCoins(t,e,n);r.setSender(t.senderAddress);const o=await We.adjustTransactionForGas(t,yt.getCoinAssets(e.a2b?e.coinTypeA:e.coinTypeB,n),BigInt(e.by_amount_in?e.amount:e.amount_limit),r),{fixAmount:a,newTx:c}=o;if(c!==void 0){c.setSender(t.senderAddress),e.by_amount_in?e.amount=a.toString():e.amount_limit=a.toString(),e=await We.fixSwapParams(t,e,i);const l=We.buildCoinForAmount(r,n,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1,!0),u=We.buildCoinForAmount(r,n,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1,!0),d=We.buildSwapTransactionWithoutTransferCoinArgs(t,c,e,t.sdkOptions,l,u);r=d.tx,s=d.txRes}return{tx:r,coinABs:s}}static buildSwapTransactionWithoutTransferCoins(t,e,n){const i=new X;i.setSender(t.senderAddress);const r=We.buildCoinForAmount(i,n,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1,!0),s=We.buildCoinForAmount(i,n,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1,!0),o=We.buildSwapTransactionWithoutTransferCoinArgs(t,i,e,t.sdkOptions,r,s);return{tx:o.tx,coinABs:o.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(t,e,n,i,r,s){const{clmm_pool:o,integrate:a}=i,c=Rr.getDefaultSqrtPriceLimit(n.a2b),{global_config_id:l}=L(o);if(l===void 0)throw Error("clmm.config.global_config_id is undefined");const u=n.swap_partner!==void 0,d=u?"swap_with_partner":"swap",h=u?gf:Bo,f=u?[e.pure(l),e.pure(n.pool_id),e.pure(n.swap_partner),r.targetCoin,s.targetCoin,e.pure(n.a2b),e.pure(n.by_amount_in),e.pure(n.amount),e.pure(c.toString()),e.pure(!1),e.pure(we)]:[e.pure(l),e.pure(n.pool_id),r.targetCoin,s.targetCoin,e.pure(n.a2b),e.pure(n.by_amount_in),e.pure(n.amount),e.pure(c.toString()),e.pure(!1),e.pure(we)],g=[n.coinTypeA,n.coinTypeB],p=e.moveCall({target:`${a.published_at}::${h}::${d}`,typeArguments:g,arguments:f});if(n.by_amount_in){const w=n.a2b?n.coinTypeB:n.coinTypeA,_=n.a2b?p[1]:p[0],k=Number(n.amount_limit);this.checkCoinThreshold(t,n.by_amount_in,e,_,k,w)}return{tx:e,txRes:p}}static async fixSwapParams(t,e,n){const{currentPool:i}=n;try{const r=await t.Swap.preswap({decimalsA:n.decimalsA,decimalsB:n.decimalsB,a2b:e.a2b,byAmountIn:e.by_amount_in,amount:e.amount,pool:i,currentSqrtPrice:i.current_sqrt_price,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB}),s=n.byAmountIn?r.estimatedAmountOut:r.estimatedAmountIn,o=bp(s,n.slippage,!n.byAmountIn);e.amount_limit=o.toString()}catch(r){console.log("fixSwapParams",r)}return e}static async syncBuildCoinInputForAmount(t,e,n,i,r=!0){if(t.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const s=await t.getOwnerCoinAssets(t.senderAddress,i);return We.buildCoinForAmount(e,s,n,i,r).targetCoin}static buildCoinForAmount(t,e,n,i,r=!0,s=!1){const o=yt.getCoinAssets(i,e);if(n===BigInt(0)&&o.length===0)return We.buildZeroValueCoin(e,t,i,r);const a=yt.calculateTotalBalance(o);if(a<n)throw new Ee(`The amount(${a}) is Insufficient balance for ${i} , expect ${n} `,"InsufficientBalance");return We.buildCoin(t,e,o,n,i,r,s)}static buildCoin(t,e,n,i,r,s=!0,o=!1){if(yt.isSuiCoin(r)){if(s){const k=t.splitCoins(t.gas,[t.pure(i.toString())]);return{targetCoin:t.makeMoveVec({objects:[k]}),remainCoins:e,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:t.gas}}if(i===0n&&n.length>1){const k=yt.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:t.object(k.objectArray[0]),remainCoins:k.remainCoins,tragetCoinAmount:k.amountArray[0],isMintZeroCoin:!1}}const w=yt.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:t.splitCoins(t.gas,[t.pure(i.toString())]),remainCoins:w.remainCoins,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:t.gas}}const a=yt.selectCoinObjectIdGreaterThanOrEqual(n,i),c=a.amountArray.reduce((w,_)=>Number(w)+Number(_),0).toString(),l=a.objectArray;if(s)return{targetCoin:t.makeMoveVec({objects:l.map(w=>t.object(w))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((w,_)=>Number(w)+Number(_),0).toString(),isMintZeroCoin:!1};const[u,...d]=l,h=t.object(u);let f=h,g=a.amountArray.reduce((w,_)=>Number(w)+Number(_),0).toString(),p;return d.length>0&&t.mergeCoins(h,d.map(w=>t.object(w))),o&&Number(c)>Number(i)&&(f=t.splitCoins(h,[t.pure(i.toString())]),g=i.toString(),p=h),{targetCoin:f,remainCoins:a.remainCoins,originalSplitedCoin:p,tragetCoinAmount:g,isMintZeroCoin:!1}}static buildZeroValueCoin(t,e,n,i=!0){const r=We.callMintZeroValueCoin(e,n);let s;return i?s=e.makeMoveVec({objects:[r]}):s=r,{targetCoin:s,remainCoins:t,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(t,e,n,i,r=!0){const s=yt.getCoinAssets(i,e);if(n.amountFirst===BigInt(0))return s.length>0?We.buildCoin(t,[...e],[...s],n.amountFirst,i,r):We.buildZeroValueCoin(e,t,i,r);const o=yt.calculateTotalBalance(s);if(o>=n.amountFirst)return We.buildCoin(t,[...e],[...s],n.amountFirst,i,r);if(o<n.amountSecond)throw new Ee(`The amount(${o}) is Insufficient balance for ${i} , expect ${n.amountSecond} `,"InsufficientBalance");return We.buildCoin(t,[...e],[...s],n.amountSecond,i,r)}static async buildRouterSwapTransaction(t,e,n,i,r){let s=new X;return e.paths.length>1&&(e.partner=""),s=await this.buildRouterBasePathTx(t,e,n,i,s,r),s}static async buildRouterBasePathTx(t,e,n,i,r,s){const o=e.paths.filter(T=>T&&T.poolAddress),a=Number(o.reduce((T,R)=>T.add(R.amountIn),$e).toString()),c=Number(o.reduce((T,R)=>T.add(R.amountOut),$e).toString()),l=Math.round(n?Number(c.toString())*(1-e.priceSlippagePoint):Number(a.toString())*(1+e.priceSlippagePoint)),u=e.paths[0].coinType[0],d=e.paths[0].coinType[e.paths[0].coinType.length-1],h=We.buildCoinForAmount(r,i,BigInt(n?a:l),u,!1,!0),f=h.originalSplitedCoin!==void 0,g=We.buildCoinForAmount(r,i,0n,d,!1),p=await this.buildRouterBasePathReturnCoins(t,e,n,h,g,r),w=[],{toCoin:_,fromCoin:k}=p;if(r=p.tx,g.isMintZeroCoin?w.push({coinType:d,coin:_}):g.originalSplitedCoin!==void 0?r.mergeCoins(g.originalSplitedCoin,[_]):r.mergeCoins(g.targetCoin,[_]),f){const T=h==null?void 0:h.originalSplitedCoin;r.mergeCoins(T,[k])}else w.push({coinType:u,coin:k});for(let T=0;T<w.length;T++)this.buildTransferCoin(t,r,w[T].coin,w[T].coinType,s);return r}static async buildRouterBasePathReturnCoins(t,e,n,i,r,s){const{clmm_pool:o,integrate:a}=t.sdkOptions,c=L(o).global_config_id,l=e.paths.filter(T=>T&&T.poolAddress),u=Number(l.reduce((T,R)=>T.add(R.amountIn),$e).toString()),d=Number(l.reduce((T,R)=>T.add(R.amountOut),$e).toString()),h=Math.round(n?Number(d.toString())*(1-e.priceSlippagePoint):Number(u.toString())*(1+e.priceSlippagePoint)),f=e.paths[0].coinType[0],g=e.paths[0].coinType[e.paths[0].coinType.length-1];let p=i.targetCoin,w;r.isMintZeroCoin||r.originalSplitedCoin!==void 0?w=r.targetCoin:w=We.callMintZeroValueCoin(s,g);const _=e.partner==="",k=_?Bo:gf;for(const T of l)if(T.poolAddress.length===1){const R=T.a2b[0],E={amount:Number(T.amountIn.toString()),amountLimit:h,poolCoinA:T.a2b[0]?f:g,poolCoinB:T.a2b[0]?g:f},D=_?"swap":"swap_with_partner",B=R?p:w,$=R?w:p,Y=n?T.amountIn.toString():T.amountOut.toString(),z=Rr.getDefaultSqrtPriceLimit(R).toString(),H=_?[s.object(c),s.object(T.poolAddress[0]),B,$,s.pure(R),s.pure(n),s.pure(Y),s.pure(z),s.pure(!1),s.object(we)]:[s.object(c),s.object(T.poolAddress[0]),s.pure(e.partner),B,$,s.pure(R),s.pure(n),s.pure(Y),s.pure(z),s.pure(!1),s.object(we)],ie=[E.poolCoinA,E.poolCoinB],ke=s.moveCall({target:`${t.sdkOptions.integrate.published_at}::${k}::${D}`,typeArguments:ie,arguments:H});p=R?ke[0]:ke[1],w=R?ke[1]:ke[0]}else{const R=n?T.amountIn:T.rawAmountLimit[0],E=n?0:T.amountOut;let D="";T.a2b[0]?T.a2b[1]?D="swap_ab_bc":D="swap_ab_cb":T.a2b[1]?D="swap_ba_bc":D="swap_ba_cb",_||(D=`${D}_with_partner`);const B=Rr.getDefaultSqrtPriceLimit(T.a2b[0]),$=Rr.getDefaultSqrtPriceLimit(T.a2b[1]),Y=_?[s.object(c),s.object(T.poolAddress[0]),s.object(T.poolAddress[1]),p,w,s.pure(n),s.pure(R.toString()),s.pure(E.toString()),s.pure(B.toString()),s.pure($.toString()),s.object(we)]:[s.object(c),s.object(T.poolAddress[0]),s.object(T.poolAddress[1]),s.pure(e.partner),p,w,s.pure(n),s.pure(R.toString()),s.pure(E.toString()),s.pure(B.toString()),s.pure($.toString()),s.object(we)],z=[T.coinType[0],T.coinType[1],T.coinType[2]],H=s.moveCall({target:`${a.published_at}::${k}::${D}`,typeArguments:z,arguments:Y});p=H[0],w=H[1]}return this.checkCoinThreshold(t,n,s,w,h,g),{fromCoin:p,toCoin:w,tx:s}}static async buildAggregatorSwapReturnCoins(t,e,n,i,r,s,o,a){if(a==null){if(t.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=t.senderAddress}e.splitPaths.length>1&&(r="");let c,l;const u=e.splitPaths.some(d=>d.basePaths.some(h=>h.label==="Deepbook"));if((!e.byAmountIn||e.splitPaths.length===1)&&!u){const d=[];for(const g of e.splitPaths){const p=[],w=[],_=[],k=[];for(let R=0;R<g.basePaths.length;R+=1){const E=g.basePaths[R];p.push(E.direction),w.push(E.poolAddress),_.push(new A(E.inputAmount.toString())),R===0?k.push(E.fromCoin,E.toCoin):k.push(E.toCoin)}const T={amountIn:new A(g.inputAmount.toString()),amountOut:new A(g.outputAmount.toString()),poolAddress:w,a2b:p,rawAmountLimit:_,isExceed:!1,coinType:k};d.push(T)}const h={paths:d,partner:r,priceSlippagePoint:s},f=await this.buildRouterBasePathReturnCoins(t,h,e.byAmountIn,n,i,o);c=f.fromCoin,l=f.toCoin,o=f.tx}else{const d=Math.round(e.outputAmount*(1-s));c=n.targetCoin,i.isMintZeroCoin||i.originalSplitedCoin!==void 0?l=i.targetCoin:l=We.callMintZeroValueCoin(o,e.toCoin);let h=!1,f;if(u){const[g,p]=ly.createAccountCap(a,t.sdkOptions,o);o=p,f=g,h=!0}for(let g=0;g<e.splitPaths.length;g+=1){const p=e.splitPaths[g];let w;for(let _=0;_<p.basePaths.length;_+=1){const k=p.basePaths[_];if(k.label==="Deepbook")if(_===0)if(p.basePaths.length===1){const T=this.buildDeepbookBasePathTx(t,k,o,f,c,l,!1);c=T.from,l=T.to}else{w=We.callMintZeroValueCoin(o,k.toCoin);const T=this.buildDeepbookBasePathTx(t,k,o,f,c,w,!1);c=T.from,w=T.to}else{const T=this.buildDeepbookBasePathTx(t,k,o,f,w,l,!0);w=T.from,l=T.to}if(k.label==="Cetus")if(_===0)if(p.basePaths.length===1){const T=this.buildClmmBasePathTx(t,k,o,e.byAmountIn,c,l,!1,r);c=T.from,l=T.to}else{w=We.callMintZeroValueCoin(o,k.toCoin);const T=this.buildClmmBasePathTx(t,k,o,e.byAmountIn,c,w,!1,r);c=T.from,w=T.to}else{const T=this.buildClmmBasePathTx(t,k,o,e.byAmountIn,w,l,!0,r);w=T.from,l=T.to,o.moveCall({target:`${t.sdkOptions.integrate.published_at}::${sy}::send_coin`,typeArguments:[k.fromCoin],arguments:[w,o.pure(a)]})}}}this.checkCoinThreshold(t,e.byAmountIn,o,l,d,e.toCoin),h&&(o=ly.deleteAccountCapByObject(f,t.sdkOptions,o))}return{fromCoin:c,toCoin:l,tx:o}}static async buildAggregatorSwapTransaction(t,e,n,i,r,s){let o=new X;const a=e.byAmountIn?Math.round(e.outputAmount*(1-r)):Math.round(e.inputAmount*(1+r)),c=We.buildCoinForAmount(o,n,e.byAmountIn?BigInt(e.inputAmount):BigInt(a),e.fromCoin,!1,!0),l=c.originalSplitedCoin!=null,u=We.buildCoinForAmount(o,n,0n,e.toCoin,!1),d=await this.buildAggregatorSwapReturnCoins(t,e,c,u,i,r,o,s),{fromCoin:h,toCoin:f}=d;o=d.tx;const g=[];if(u.isMintZeroCoin?g.push({coinType:e.toCoin,coin:f}):u.originalSplitedCoin!=null?o.mergeCoins(u.originalSplitedCoin,[f]):o.mergeCoins(u.targetCoin,[f]),l){const p=c.originalSplitedCoin;o.mergeCoins(p,[h])}else g.push({coinType:e.fromCoin,coin:h});for(let p=0;p<g.length;p++)this.buildTransferCoin(t,o,g[p].coin,g[p].coinType,s);return o}static checkCoinThreshold(t,e,n,i,r,s){e&&n.moveCall({target:`${t.sdkOptions.integrate.published_at}::${Bo}::check_coin_threshold`,typeArguments:[s],arguments:[i,n.pure(r)]})}static buildDeepbookBasePathTx(t,e,n,i,r,s,o){const a=e.direction?r:s,c=e.direction?s:r,l=[n.object(e.poolAddress),i,n.pure(e.inputAmount),n.pure(0),n.pure(e.direction),a,c,n.pure(o),n.object(we)],u=e.direction?[e.fromCoin,e.toCoin]:[e.toCoin,e.fromCoin],d=n.moveCall({target:`${t.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:u,arguments:l});return r=e.direction?d[0]:d[1],s=e.direction?d[1]:d[0],{from:r,to:s,tx:n}}static buildClmmBasePathTx(t,e,n,i,r,s,o,a){const{clmm_pool:c,integrate:l}=t.sdkOptions,u=L(c).global_config_id;let d=e.direction?r:s,h=e.direction?s:r;const f=a==="",g=f?Bo:gf,p=f?"swap":"swap_with_partner",w=i?e.inputAmount.toString():e.outputAmount.toString(),_=Rr.getDefaultSqrtPriceLimit(e.direction),k=f?[n.object(u),n.object(e.poolAddress),d,h,n.pure(e.direction),n.pure(i),n.pure(w),n.pure(_.toString()),n.pure(o),n.object(we)]:[n.object(u),n.object(e.poolAddress),n.pure(a),d,h,n.pure(e.direction),n.pure(i),n.pure(w),n.pure(_.toString()),n.pure(o),n.object(we)],T=e.direction?[e.fromCoin,e.toCoin]:[e.toCoin,e.fromCoin],R=n.moveCall({target:`${l.published_at}::${g}::${p}`,typeArguments:T,arguments:k});return d=R[0],h=R[1],r=e.direction?d:h,s=e.direction?h:d,{from:r,to:s,tx:n}}static buildCoinTypePair(t,e){const n=[];if(t.length===2){const i=[];i.push(t[0],t[1]),n.push(i)}else{const i=[];i.push(t[0],t[t.length-1]),n.push(i);for(let r=1;r<t.length-1;r+=1){if(e[r-1]===0)continue;const s=[];s.push(t[0],t[r],t[t.length-1]),n.push(s)}}return n}static buildTransferCoinToSender(t,e,n,i){e.moveCall({target:`${t.sdkOptions.integrate.published_at}::${sy}::transfer_coin_to_sender`,typeArguments:[i],arguments:[n]})}static buildTransferCoin(t,e,n,i,r){r!=null?e.transferObjects([n],e.pure(r)):We.buildTransferCoinToSender(t,e,n,i)}},Ye=We;HP(Ye,"callMintZeroValueCoin",(t,e)=>t.moveCall({target:"0x2::coin::zero",typeArguments:[e]}));function Un(t){return!(!t.startsWith("0x")||t.length!==66)}var da=new A(1e9),ly=class{static createAccountCap(t,e,n,i=!1){if(t.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:r}=e,[s]=n.moveCall({target:`${r.published_at}::${tF}::create_account`,typeArguments:[],arguments:[]});return i&&n.transferObjects([s],n.pure(t)),[s,n]}static deleteAccountCap(t,e,n){const{deepbook:i}=e,r=[n.pure(t)];return n.moveCall({target:`${i.published_at}::${mf}::delete_account_cap`,typeArguments:[],arguments:r}),n}static deleteAccountCapByObject(t,e,n){const{deepbook:i}=e,r=[t];return n.moveCall({target:`${i.published_at}::${mf}::delete_account_cap`,typeArguments:[],arguments:r}),n}static async getAccountCap(t){const e=await t.fullClient.getOwnedObjectsByPage(t.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{MoveModule:{package:t.sdkOptions.deepbook.package_id,module:mf}}});return e.data.length===0?"":e.data[0].data.objectId}static async getPools(t){const e=t.sdkOptions.deepbook.package_id,n=[];try{(await t.fullClient.queryEventsByPage({MoveEventType:`${e}::clob_v2::PoolCreated`})).data.forEach(r=>{const s=r.parsedJson;s&&n.push({poolID:s.pool_id,tickSize:Number(s.tick_size),lotSize:Number(s.lot_size),takerFeeRate:Number(s.taker_fee_rate),makerRebateRate:Number(s.maker_rebate_rate),baseAsset:s.base_asset.name,quoteAsset:s.quote_asset.name})})}catch(i){console.log("getPoolImmutables",i)}return n}static async getPoolAsks(t,e,n,i){var h;const{simulationAccount:r}=t.sdkOptions,{deepbook_endpoint_v2:s}=t.sdkOptions,o=new X,a=[],c=[n,i],l=[o.pure(e),o.pure("0"),o.pure("999999999999"),o.pure(we)];o.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:l,typeArguments:c});const d=(h=(await t.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:r.address})).events)==null?void 0:h.filter(f=>ce(f.type).name==="BookStatus");if(d.length===0)return a;for(let f=0;f<d[0].parsedJson.depths.length;f++){const g=d[0].parsedJson.price[f],p=d[0].parsedJson.depths[f],w={price:parseInt(g,10),quantity:parseInt(p,10)};a.push(w)}return a}static async getPoolBids(t,e,n,i){var h;const{simulationAccount:r}=t.sdkOptions,{deepbook_endpoint_v2:s}=t.sdkOptions,o=new X,a=[],c=[n,i],l=[o.pure(e),o.pure("0"),o.pure("999999999999"),o.pure(we)];o.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:l,typeArguments:c});const d=(h=(await t.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:r.address})).events)==null?void 0:h.filter(f=>ce(f.type).name==="BookStatus");if(d.length===0)return a;for(let f=0;f<d[0].parsedJson.depths.length;f++){const g=d[0].parsedJson.price[f],p=d[0].parsedJson.depths[f],w={price:parseInt(g,10),quantity:parseInt(p,10)};a.push(w)}return a}static async preSwap(t,e,n,i){let r=!1,s=$e,o=new A(i),a=$e;const c=new A(i);if(n){let l=await this.getPoolBids(t,e.poolID,e.baseAsset,e.quoteAsset);l===null&&(r=!0),l=l.sort((u,d)=>d.price-u.price);for(let u=0;u<l.length;u+=1){const d=new A(l[u].quantity),h=new A(l[u].price),f=d.mul(new A(h)).mul(new A(e.takerFeeRate)).div(da).div(da);if(o.gt(d))o=o.sub(d),s=s.add(d.mul(h).div(da).sub(f)),a=a.add(f);else{const g=o.mul(new A(l[u].price)).div(da),p=g.mul(new A(e.takerFeeRate)).div(da);s=s.add(g.sub(p)),o=o.sub(o),a=a.add(p)}if(o.eq($e))break}}else{const l=await this.getPoolAsks(t,e.poolID,e.baseAsset,e.quoteAsset);l===null&&(r=!0);for(let u=0;u<l.length;u+=1){const d=new A(l[u].price).mul(new A(l[u].quantity)).div(new A(1e9)),h=d.mul(new A(e.takerFeeRate)).div(da),f=d.add(h);if(o.gt(d))s=s.add(new A(l[u].quantity)),o=o.sub(f),a=a.add(h);else{const g=new A(l[u].quantity).div(new A(e.lotSize)),p=f.div(g),w=o.div(p);s=s.add(w.muln(e.lotSize)),o=o.sub(w.mul(p)),a=a.add(w.div(g).mul(h))}if(o.eq($e))break}}return{poolAddress:e.poolID,estimatedAmountIn:c.sub(o).toNumber(),estimatedAmountOut:s.toNumber(),estimatedFeeAmount:a,isExceed:r,amount:Number(i),aToB:n,byAmountIn:!0}}static async simulateSwap(t,e,n,i,r,s){var E;const{deepbook_endpoint_v2:o}=t.sdkOptions;let a=new X;const c=await this.getAccountCap(t);let l;if(c===""){const D=this.createAccountCap(t.senderAddress,t.sdkOptions,a),B=D[0];a=D[1],l=B}else l=a.pure(c);const u=await t.getOwnerCoinAssets(t.senderAddress),d=Ye.buildCoinForAmount(a,u,BigInt(s),n,!1),h=d==null?void 0:d.targetCoin,f=Ye.buildCoinForAmount(a,u,BigInt(s),i,!1),g=f==null?void 0:f.targetCoin,p=[n,i],w=[a.pure(e),l,a.pure(s),a.pure(0),a.pure(r),h,g,a.pure(we)];a.moveCall({target:`${o.published_at}::${nF}::swap`,arguments:w,typeArguments:p});const{simulationAccount:_}=t.sdkOptions,T=(E=(await t.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:_.address})).events)==null?void 0:E.filter(D=>ce(D.type).name==="DeepbookSwapEvent");if(T.length===0)return null;const R=T[0].parsedJson;return{poolAddress:R.pool,estimatedAmountIn:R.amount_in,estimatedAmountOut:R.amount_out,aToB:R.atob}}},jF=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getPositionList(t,e="all"){const n={data:[],hasNextPage:!0},i=await this._sdk.fullClient.getDynamicFieldsByPage(t,e);n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor;const r=i.data.map(o=>{var a,c;if(o.error!=null||((c=(a=o.data)==null?void 0:a.content)==null?void 0:c.dataType)!=="moveObject")throw new Ee(`when getPositionList get position objects error: ${o.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return o.name.value}),s=await this._sdk.Position.getSipmlePositionList(r);return n.data=s,n}async getPoolImmutables(t=[],e=0,n=100,i=!1){const{package_id:r}=this._sdk.sdkOptions.clmm_pool,s=`${r}_getInitPoolEvent`,o=this.getCache(s,i),a=[],c=[];if(o!==void 0&&a.push(...o),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`})).data.forEach(d=>{const h=d.parsedJson;h&&a.push({poolAddress:h.pool_id,tickSpacing:h.tick_spacing,coinTypeA:ce(h.coin_type_a).full_address,coinTypeB:ce(h.coin_type_b).full_address})}),this.updateCache(s,a,Oe)}catch(u){console.log("getPoolImmutables",u)}const l=t.length>0;for(let u=0;u<a.length;u+=1){const d=a[u];l&&!t.includes(d.poolAddress)||!l&&(u<e||u>=e+n)||c.push(d)}return c}async getPools(t=[],e=0,n=100){var o,a,c;const i=[];let r=[];t.length>0?r=[...t]:(await this.getPoolImmutables([],e,n,!1)).forEach(u=>r.push(u.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0,showType:!0});for(const l of s){if(l.error!=null||((a=(o=l.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ee(`getPools error code: ${((c=l.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=yf(l);i.push(u);const d=`${u.poolAddress}_getPoolObject`;this.updateCache(d,u,Oe)}return i}async getPoolImmutablesWithPage(t="all",e=!1){const{package_id:n}=this._sdk.sdkOptions.clmm_pool,i=[],r={data:[],hasNextPage:!1},s=t==="all",o=`${n}_getPoolImmutables`;if(s){const a=this.getCache(o,e);a&&i.push(...a)}if(i.length===0)try{const a=`${n}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},t);r.hasNextPage=c.hasNextPage,r.nextCursor=c.nextCursor,c.data.forEach(l=>{const u=l.parsedJson;if(u){const d={poolAddress:u.pool_id,tickSpacing:u.tick_spacing,coinTypeA:ce(u.coin_type_a).full_address,coinTypeB:ce(u.coin_type_b).full_address};i.push(d)}})}catch(a){console.log("getPoolImmutables",a)}return r.data=i,s&&this.updateCache(`${n}_getPoolImmutables`,i,Oe),r}async getPoolsWithPage(t=[]){var r,s,o;const e=[];let n=[];t.length>0?n=[...t]:(await this.getPoolImmutablesWithPage()).data.forEach(c=>n.push(c.poolAddress));const i=await this._sdk.fullClient.batchGetObjects(n,{showContent:!0,showType:!0});for(const a of i){if(a.error!=null||((s=(r=a.data)==null?void 0:r.content)==null?void 0:s.dataType)!=="moveObject")throw new Ee(`getPoolWithPages error code: ${((o=a.error)==null?void 0:o.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const c=yf(a);e.push(c);const l=`${c.poolAddress}_getPoolObject`;this.updateCache(l,c,Oe)}return e}async getPool(t,e=!0){var o,a,c;const n=`${t}_getPoolObject`,i=this.getCache(n,e);if(i!==void 0)return i;const r=await this._sdk.fullClient.getObject({id:t,options:{showType:!0,showContent:!0}});if(r.error!=null||((a=(o=r.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ee(`getPool error code: ${((c=r.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const s=yf(r);return this.updateCache(n,s),s}async creatPoolsTransactionPayload(t){for(const n of t)if(_p(lt(n.coinTypeA),lt(n.coinTypeB))){const i=n.coinTypeB;n.coinTypeB=n.coinTypeA,n.coinTypeA=i}return await this.creatPool(t)}async creatPoolTransactionPayload(t){if(_p(lt(t.coinTypeA),lt(t.coinTypeB))){const e=t.coinTypeB;t.coinTypeB=t.coinTypeA,t.coinTypeA=e}return"fix_amount_a"in t?await this.creatPoolAndAddLiquidity(t):await this.creatPool([t])}async getClmmConfigs(t=!1){const{package_id:e}=this._sdk.sdkOptions.clmm_pool,n=`${e}_getInitEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const r=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),s=Ol(r),o=(await this._sdk.fullClient.queryEventsByPage({Transaction:s})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return o.length>0&&(o.forEach(c=>{const l=c.parsedJson;if(c.type)switch(ce(c.type).full_address){case`${e}::config::InitConfigEvent`:a.global_config_id=l.global_config_id,a.admin_cap_id=l.admin_cap_id;break;case`${e}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break;case`${e}::rewarder::RewarderInitEvent`:a.global_vault_id=l.global_vault_id;break;case`${e}::partner::InitPartnerEvent`:a.partners_id=l.partners_id;break}}),this.updateCache(n,a,Oe)),a}async getSuiTransactionResponse(t,e=!1){const n=`${t}_getSuiTransactionResponse`,i=this.getCache(n,e);if(i!==void 0)return i;let r;try{r=await this._sdk.fullClient.getTransactionBlock({digest:t,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{r=await this._sdk.fullClient.getTransactionBlock({digest:t,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(n,r,Oe),r}async creatPool(t){const e=new X,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,r=L(i),s=r.global_config_id,o=r.pools_id;return t.forEach(a=>{const c=[e.object(s),e.object(o),e.pure(a.tick_spacing.toString()),e.pure(a.initialize_sqrt_price),e.pure(a.uri),e.object(we)];e.moveCall({target:`${n.published_at}::${Vc}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),e}async creatPoolAndAddLiquidity(t){if(!Un(this._sdk.senderAddress))throw new Ee("this config sdk senderAddress is not set right","InvalidSendAddress");const e=new X,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,r=L(i),s=r.global_config_id,o=r.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=Ye.buildAddLiquidityFixTokenCoinInput(e,!t.fix_amount_a,t.amount_a,t.slippage,t.coinTypeA,a,!1),l=Ye.buildAddLiquidityFixTokenCoinInput(e,t.fix_amount_a,t.amount_b,t.slippage,t.coinTypeB,a,!1),u=[e.pure(s),e.pure(o),e.pure(t.tick_spacing.toString()),e.pure(t.initialize_sqrt_price),e.pure(t.uri),c.targetCoin,l.targetCoin,e.pure(Nn(BigInt(t.tick_lower)).toString()),e.pure(Nn(BigInt(t.tick_upper)).toString()),e.pure(t.amount_a),e.pure(t.amount_b),e.pure(t.fix_amount_a),e.pure(we)];return e.moveCall({target:`${n.published_at}::${Js}::create_pool_with_liquidity`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:u}),e}async fetchTicks(t){let e=[],n=[];for(;;){const r=await this.getTicks({pool_id:t.pool_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,start:n,limit:512});if(e=[...e,...r],r.length<512)break;n=[r[r.length-1].index]}return e}async getTicks(t){var c;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=[],r=[t.coinTypeA,t.coinTypeB],s=new X,o=[s.pure(t.pool_id),s.pure(t.start),s.pure(t.limit.toString())];if(s.moveCall({target:`${e.published_at}::${Qi}::fetch_ticks`,arguments:o,typeArguments:r}),!Un(n.address))throw new Ee("this config simulationAccount is not set right","InvalidSimulateAccount");const a=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:n.address});if(a.error!=null)throw new Ee(`getTicks error code: ${a.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(c=a.events)==null||c.forEach(l=>{ce(l.type).name==="FetchTicksResultEvent"&&l.parsedJson.ticks.forEach(u=>{i.push(NF(u))})}),i}async fetchPositionRewardList(t){var o;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=[];let r=[];const s=512;for(;;){const a=[t.coinTypeA,t.coinTypeB],c=new X,l=[c.object(t.pool_id),c.pure(r,"u64"),c.pure(s.toString(),"u64")];if(c.moveCall({target:`${e.published_at}::${Qi}::fetch_positions`,arguments:l,typeArguments:a}),!Un(n.address))throw new Ee("this config simulationAccount is not set right","InvalidSimulateAccount");const u=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:n.address});if(u.error!=null)throw new Ee(`fetch position reward error code: ${u.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const d=[];if((o=u==null?void 0:u.events)==null||o.forEach(h=>{ce(h.type).name==="FetchPositionsEvent"&&h.parsedJson.positions.forEach(f=>{const g=pv(f);d.push(g)})}),i.push(...d),d.length<s)break;r=[d[d.length-1].pos_object_id]}return i}async fetchTicksByRpc(t){let e=[],n=null;const i=512;for(;;){const r=[],s=await this.sdk.fullClient.getDynamicFields({parentId:t,cursor:n,limit:i});if(n=s.nextCursor,s.data.forEach(o=>{ce(o.objectType).module==="skip_list"&&r.push(o.objectId)}),e=[...e,...await this.getTicksByRpc(r)],n===null||s.data.length<i)break}return e}async getTicksByRpc(t){var i,r,s;const e=[],n=await this.sdk.fullClient.batchGetObjects(t,{showContent:!0,showType:!0});for(const o of n){if(o.error!=null||((r=(i=o.data)==null?void 0:i.content)==null?void 0:r.dataType)!=="moveObject")throw new Ee(`getTicksByRpc error code: ${((s=o.error)==null?void 0:s.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=_f(o);a!=null&&e.push(a)}return e}async getTickDataByIndex(t,e){var r,s;const n={type:"u64",value:Nn(BigInt(dF(e).toString())).toString()},i=await this.sdk.fullClient.getDynamicFieldObject({parentId:t,name:n});if(i.error!=null||((s=(r=i.data)==null?void 0:r.content)==null?void 0:s.dataType)!=="moveObject")throw new Ee(`get tick by index: ${e} error: ${i.error}`,"InvalidTickIndex");return _f(i)}async getTickDataByObjectId(t){var n,i,r;const e=await this.sdk.fullClient.getObject({id:t,options:{showContent:!0}});if(e.error!=null||((i=(n=e.data)==null?void 0:n.content)==null?void 0:i.dataType)!=="moveObject")throw new Ee(`getTicksByRpc error code: ${((r=e.error)==null?void 0:r.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return _f(e)}async getPartnerRefFeeAmount(t){var a,c;const e=await this._sdk.fullClient.batchGetObjects([t],{showOwner:!0,showContent:!0,showDisplay:!0,showType:!0});if(e[0].error!=null||((c=(a=e[0].data)==null?void 0:a.content)==null?void 0:c.dataType)!=="moveObject")throw new Ee(`get partner by object id: ${t} error: ${e[0].error}`,"NotFoundPartnerObject");const n=e[0].data.content.fields.balances,i=await this._sdk.fullClient.getDynamicFieldsByPage(n.fields.id.id),r=[];i.data.forEach(l=>{var u,d;if(l.error!=null||((d=(u=l.data)==null?void 0:u.content)==null?void 0:d.dataType)!=="moveObject")throw new Ee(`when getPartnerRefFeeAmount get partner object error: ${l.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");r.push(l.objectId)});const s=[];return(await this._sdk.fullClient.batchGetObjects(r,{showOwner:!0,showContent:!0,showDisplay:!0,showType:!0})).forEach(l=>{var d,h;if(l.error!=null||((h=(d=l.data)==null?void 0:d.content)==null?void 0:h.dataType)!=="moveObject")throw new Ee(`get coin by object id: ${l.data.objectId} error: ${l.error}`,"InvalidParnterRefFeeFields");const u={coinAddress:l.data.content.fields.name,coinObjectId:l.data.objectId,balance:BigInt(l.data.content.fields.value)};s.push(u)}),s}async claimPartnerRefFeePayload(t,e,n){const i=new X,{clmm_pool:r}=this.sdk.sdkOptions,{global_config_id:s}=L(r),o=[n],a=[i.object(s),i.object(t),i.object(e)];return i.moveCall({target:`${r.published_at}::${JP}::claim_ref_fee`,arguments:a,typeArguments:o}),i}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},RF=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(t,e=[]){const n=[],i=await this._sdk.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),r=e.length>0;for(const s of i.data)if(ce(s.data.type).full_address===this.buildPositionType()){const a=Za(s),c=`${a.pos_object_id}_getPositionList`;this.updateCache(c,a,Oe),r?e.includes(a.pool)&&n.push(a):n.push(a)}return n}async getPosition(t,e,n=!0){let i=await this.getSimplePosition(e);return n&&(i=await this.updatePositionRewarders(t,i)),i}async getPositionById(t,e=!0){const n=await this.getSimplePosition(t);if(e){const i=await this._sdk.Pool.getPool(n.pool,!1);return await this.updatePositionRewarders(i.position_manager.positions_handle,n)}return n}async getSimplePosition(t){const e=`${t}_getPositionList`;let n=this.getSimplePositionByCache(t);if(n===void 0){const i=await this.sdk.fullClient.getObject({id:t,options:{showContent:!0,showType:!0,showDisplay:!0,showOwner:!0}});n=Za(i),this.updateCache(e,n,Oe)}return n}getSimplePositionByCache(t){const e=`${t}_getPositionList`;return this.getCache(e)}async getSipmlePositionList(t){const e=[],n=[];return t.forEach(i=>{const r=this.getSimplePositionByCache(i);r?e.push(r):n.push(i)}),n.length>0&&(await this._sdk.fullClient.batchGetObjects(n,{showOwner:!0,showContent:!0,showDisplay:!0,showType:!0})).forEach(r=>{const s=Za(r);e.push(s);const o=`${s.pos_object_id}_getPositionList`;this.updateCache(o,s,Oe)}),e}async updatePositionRewarders(t,e){const n=await this.getPositionRewarders(t,e.pos_object_id);return{...e,...n}}async getPositionRewarders(t,e){try{const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),r=Qe(n.data).value.fields.value;return pv(r)}catch(n){console.log(n);return}}async fetchPosFeeAmount(t){var c;const{clmm_pool:e,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,r=new X;for(const l of t){const u=[l.coinTypeA,l.coinTypeB],d=[r.object(L(e).global_config_id),r.object(l.poolAddress),r.pure(l.positionId)];r.moveCall({target:`${n.published_at}::${Qi}::fetch_position_fees`,arguments:d,typeArguments:u})}if(!Un(i.address))throw new Ee("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:i.address});if(s.error!=null)throw new Ee(`fetch position fee error code: ${s.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const o=(c=s.events)==null?void 0:c.filter(l=>ce(l.type).name==="FetchPositionFeesEvent");if(o.length===0)return[];const a=[];for(let l=0;l<o.length;l+=1){const{parsedJson:u}=o[l],d={feeOwedA:new A(u.fee_owned_a),feeOwedB:new A(u.fee_owned_b),position_id:u.position_id};a.push(d)}return a}async batchFetchPositionFees(t){const e=[];for(const i of t){const r=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(r.pool,!1);e.push({poolAddress:s.poolAddress,positionId:r.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const n={};if(e.length>0){const i=await this.fetchPosFeeAmount(e);for(const r of i)n[r.position_id]=r;return n}return n}async createAddLiquidityFixTokenPayload(t,e){if(!Un(this._sdk.senderAddress))throw new Ee("this config sdk senderAddress is not set right","InvalidSendAddress");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(e){const{isAdjustCoinA:i,isAdjustCoinB:r}=Gd(t);if(t=t,t.fix_amount_a&&i||!t.fix_amount_a&&r)return await Ye.buildAddLiquidityFixTokenForGas(this._sdk,n,t,e)}return Ye.buildAddLiquidityFixToken(this._sdk,n,t)}async createAddLiquidityPayload(t){const{integrate:e,clmm_pool:n}=this._sdk.sdkOptions;if(!Un(this._sdk.senderAddress))throw new Ee("this config sdk senderAddress is not set right","InvalidSendAddress");const i=Nn(BigInt(t.tick_lower)).toString(),r=Nn(BigInt(t.tick_upper)).toString(),s=[t.coinTypeA,t.coinTypeB];let o=new X;const a=!O2(t.pos_id),c=BigInt(t.max_amount_a),l=BigInt(t.max_amount_b),u=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),d=Ye.buildCoinForAmount(o,u,c,t.coinTypeA,!1),h=Ye.buildCoinForAmount(o,u,l,t.coinTypeB,!1);return a?o.moveCall({target:`${e.published_at}::${Js}::open_position_with_liquidity`,typeArguments:s,arguments:[o.object(L(n).global_config_id),o.object(t.pool_id),o.pure(i),o.pure(r),d.targetCoin,h.targetCoin,o.pure(t.max_amount_a),o.pure(t.max_amount_b),o.pure(t.delta_liquidity),o.object(we)]}):(o=Ye.createCollectRewarderAndFeeParams(this._sdk,o,t,u,d.remainCoins,h.remainCoins),o.moveCall({target:`${e.published_at}::${Js}::add_liquidity`,typeArguments:s,arguments:[o.object(L(n).global_config_id),o.object(t.pool_id),o.object(t.pos_id),d.targetCoin,h.targetCoin,o.pure(t.max_amount_a),o.pure(t.max_amount_b),o.pure(t.delta_liquidity),o.object(we)]})),o}async removeLiquidityTransactionPayload(t){if(!Un(this._sdk.senderAddress))throw new Ee("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:e,integrate:n}=this.sdk.sdkOptions,i="remove_liquidity";let r=new X;const s=[t.coinTypeA,t.coinTypeB],o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);r=Ye.createCollectRewarderAndFeeParams(this._sdk,r,t,o);const a=[r.object(L(e).global_config_id),r.object(t.pool_id),r.object(t.pos_id),r.pure(t.delta_liquidity),r.pure(t.min_amount_a),r.pure(t.min_amount_b),r.object(we)];return r.moveCall({target:`${n.published_at}::${Vc}::${i}`,typeArguments:s,arguments:a}),r}async closePositionTransactionPayload(t){if(!Un(this._sdk.senderAddress))throw new Ee("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:e,integrate:n}=this.sdk.sdkOptions;let i=new X;const r=[t.coinTypeA,t.coinTypeB],s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return i=Ye.createCollectRewarderAndFeeParams(this._sdk,i,t,s),i.moveCall({target:`${n.published_at}::${Vc}::close_position`,typeArguments:r,arguments:[i.object(L(e).global_config_id),i.object(t.pool_id),i.object(t.pos_id),i.pure(t.min_amount_a),i.pure(t.min_amount_b),i.object(we)]}),i}openPositionTransactionPayload(t){const{clmm_pool:e,integrate:n}=this.sdk.sdkOptions,i=new X,r=[t.coinTypeA,t.coinTypeB],s=Nn(BigInt(t.tick_lower)).toString(),o=Nn(BigInt(t.tick_upper)).toString(),a=[i.pure(L(e).global_config_id),i.pure(t.pool_id),i.pure(s),i.pure(o)];return i.moveCall({target:`${n.published_at}::${Vc}::open_position`,typeArguments:r,arguments:a}),i}async collectFeeTransactionPayload(t){if(!Un(this._sdk.senderAddress))throw new Ee("this config sdk senderAddress is not set right","InvalidSendAddress");const e=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0),n=new X,i=Ye.buildCoinForAmount(n,e,BigInt(0),t.coinTypeA,!1),r=Ye.buildCoinForAmount(n,e,BigInt(0),t.coinTypeB,!1);return this.createCollectFeePaylod(t,n,i.targetCoin,r.targetCoin),n}createCollectFeePaylod(t,e,n,i){const{clmm_pool:r,integrate:s}=this.sdk.sdkOptions,o=[t.coinTypeA,t.coinTypeB],a=[e.object(L(r).global_config_id),e.object(t.pool_id),e.object(t.pos_id),n,i];return e.moveCall({target:`${s.published_at}::${Js}::collect_fee`,typeArguments:o,arguments:a}),e}async calculateFee(t){const e=await this.collectFeeTransactionPayload(t);if(!Un(this._sdk.senderAddress))throw new Ee("this config sdk senderAddress is not set right","InvalidSendAddress");const n=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:e,sender:this._sdk.senderAddress});for(const i of n.events)if(ce(i.type).name==="CollectFeeEvent"){const r=i.parsedJson;return{feeOwedA:r.amount_a,feeOwedB:r.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},BF=class{constructor(t){v(this,"_sdk");v(this,"growthGlobal");this._sdk=t,this.growthGlobal=[$e,$e,$e]}get sdk(){return this._sdk}async emissionsEveryDay(t){const n=(await this.sdk.Pool.getPool(t)).rewarder_infos;if(!n)return null;const i=[];for(const r of n){const s=Mt.fromX64(new A(r.emissions_per_second));i.push({emissions:Math.floor(s.toNumber()*60*60*24),coin_address:r.coinAddress})}return i}async updatePoolRewarder(t,e){const n=await this.sdk.Pool.getPool(t),i=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=e.toString(),Number(n.liquidity)===0||e.eq(new A(i)))return n;const r=e.div(new A(1e3)).sub(new A(i)).add(new A(15)),s=n.rewarder_infos;for(let o=0;o<s.length;o+=1){const a=s[o],c=Mt.checkMulDivFloor(r,new A(a.emissions_per_second),new A(n.liquidity),128);this.growthGlobal[o]=new A(a.growth_global).add(new A(c))}return n}async posRewardersAmount(t,e,n){const i=Date.parse(new Date().toString()),r=await this.updatePoolRewarder(t,new A(i)),s=await this.sdk.Position.getPositionRewarders(e,n);if(s===void 0)return[];const o=r.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(o,s.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(o,s.tick_upper_index);return this.posRewardersAmountInternal(r,s,a,c)}async poolRewardersAmount(t,e){const n=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(e,new A(n)),r=await this.sdk.Position.getPositionList(t,[e]),s=await this.getPoolLowerAndUpperTicks(i.ticks_handle,r),o=[$e,$e,$e];for(let a=0;a<r.length;a+=1){const c=await this.posRewardersAmountInternal(i,r[a],s[0][a],s[1][a]);for(let l=0;l<3;l+=1)o[l]=o[l].add(c[l].amount_owed)}return o}posRewardersAmountInternal(t,e,n,i){const r=e.tick_lower_index,s=e.tick_upper_index,o=OF(t,n,i,r,s,this.growthGlobal),a=[],c=[];if(o.length>0){let l=Mt.subUnderflowU128(o[0],new A(e.reward_growth_inside_0));l.gt(new A("3402823669209384634633745948738404"))&&(l=Wr);const u=Mt.checkMulShiftRight(new A(e.liquidity),l,64,128);a.push(o[0]),c.push({amount_owed:new A(e.reward_amount_owed_0).add(u),coin_address:t.rewarder_infos[0].coinAddress})}if(o.length>1){let l=Mt.subUnderflowU128(o[1],new A(e.reward_growth_inside_1));l.gt(new A("3402823669209384634633745948738404"))&&(l=Wr);const u=Mt.checkMulShiftRight(new A(e.liquidity),l,64,128);a.push(o[1]),c.push({amount_owed:new A(e.reward_amount_owed_1).add(u),coin_address:t.rewarder_infos[1].coinAddress})}if(o.length>2){let l=Mt.subUnderflowU128(o[2],new A(e.reward_growth_inside_2));l.gt(new A("3402823669209384634633745948738404"))&&(l=Wr);const u=Mt.checkMulShiftRight(new A(e.liquidity),l,64,128);a.push(o[2]),c.push({amount_owed:new A(e.reward_amount_owed_2).add(u),coin_address:t.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(t){const e=[];for(const i of t){const r=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(r.pool,!1);e.push({poolAddress:s.poolAddress,positionId:r.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB,rewarderInfo:s.rewarder_infos})}const n={};if(e.length>0){const i=await this.fetchPosRewardersAmount(e);for(const r of i)n[r.positionId]=r.rewarderAmountOwed;return n}return n}async fetchPositionRewarders(t,e){const n={poolAddress:t.poolAddress,positionId:e,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,rewarderInfo:t.rewarder_infos};return(await this.fetchPosRewardersAmount([n]))[0].rewarderAmountOwed}async batchFetchPositionFees(t){const e=[];for(const i of t){const r=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(r.pool,!1);e.push({poolAddress:s.poolAddress,positionId:r.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const n={};if(e.length>0){const i=await this.fetchPosFeeAmount(e);for(const r of i)n[r.position_id]=r;return n}return n}async fetchPosFeeAmount(t){var c;const{clmm_pool:e,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,r=new X;for(const l of t){const u=[l.coinTypeA,l.coinTypeB],d=[r.object(L(e).global_config_id),r.object(l.poolAddress),r.pure(l.positionId)];r.moveCall({target:`${n.published_at}::${Qi}::fetch_position_fees`,arguments:d,typeArguments:u})}const o=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:i.address})).events)==null?void 0:c.filter(l=>ce(l.type).name==="FetchPositionFeesEvent");if(o.length===0)return[];const a=[];for(let l=0;l<o.length;l+=1){const{parsedJson:u}=o[l],d={feeOwedA:new A(u.fee_owned_a),feeOwedB:new A(u.fee_owned_b),position_id:u.position_id};a.push(d)}return a}async fetchPosRewardersAmount(t){var c;const{clmm_pool:e,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,r=new X;for(const l of t){const u=[l.coinTypeA,l.coinTypeB],d=[r.object(L(e).global_config_id),r.object(l.poolAddress),r.pure(l.positionId),r.object(we)];r.moveCall({target:`${n.published_at}::${Qi}::fetch_position_rewards`,arguments:d,typeArguments:u})}if(!Un(i.address))throw new Ee(`this config simulationAccount: ${i.address} is not set right`,"InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:i.address});if(s.error!=null)throw new Ee(`fetch position rewards error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const o=(c=s.events)==null?void 0:c.filter(l=>ce(l.type).name==="FetchPositionRewardsEvent");if(o.length===0)return[];if(o.length!==t.length)throw new Ee("valueData.length !== params.pools.length");const a=[];for(let l=0;l<o.length;l+=1){const u={poolAddress:t[l].poolAddress,positionId:t[l].positionId,rewarderAmountOwed:[]};for(let d=0;d<t[l].rewarderInfo.length;d+=1)u.rewarderAmountOwed.push({amount_owed:new A(o[l].parsedJson.data[d]),coin_address:t[l].rewarderInfo[d].coinAddress});a.push(u)}return a}async fetchPoolRewardersAmount(t,e){const n=await this.sdk.Pool.getPool(e),i=await this.sdk.Position.getPositionList(t,[e]),r=[];for(const a of i)r.push({poolAddress:n.poolAddress,positionId:a.pos_object_id,rewarderInfo:n.rewarder_infos,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB});const s=await this.fetchPosRewardersAmount(r),o=[$e,$e,$e];if(s!=null)for(const a of s)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)o[c]=o[c].add(a.rewarderAmountOwed[c].amount_owed);return o}async getPoolLowerAndUpperTicks(t,e){const n=[],i=[];for(const r of e){const s=await this.sdk.Pool.getTickDataByIndex(t,r.tick_lower_index),o=await this.sdk.Pool.getTickDataByIndex(t,r.tick_upper_index);n.push(s),i.push(o)}return[n,i]}async collectRewarderTransactionPayload(t){if(!Un(this._sdk.senderAddress))throw new Ee("this config sdk senderAddress is not set right","InvalidSendAddress");const e=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let n=new X;return n=Ye.createCollectRewarderAndFeeParams(this._sdk,n,t,e),n}createCollectRewarderPaylod(t,e,n){const{clmm_pool:i,integrate:r}=this.sdk.sdkOptions,s=L(i),o=[t.coinTypeA,t.coinTypeB];return t.rewarder_coin_types.forEach((a,c)=>{e&&e.moveCall({target:`${r.published_at}::${Js}::collect_reward`,typeArguments:[...o,a],arguments:[e.object(s.global_config_id),e.object(t.pool_id),e.object(t.pos_id),e.object(s.global_vault_id),n[c],e.object(we)]})}),e}};function ku(t,e){return{pair:`${t}-${e}`,reversePair:`${e}-${t}`}}var PF=class{constructor(t){v(this,"graph");v(this,"pathProviders");v(this,"coinProviders");v(this,"_coinAddressMap");v(this,"poolAddressMap");v(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new U2(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=t,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(t,e){const{pair:n,reversePair:i}=ku(t,e);let r=this.poolAddressMap.get(n);if(r!=null)return{addressMap:r,direction:!0};if(r=this.poolAddressMap.get(i),r!=null)return{addressMap:r,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(t=>{this._coinAddressMap.set(t.address,t)})}loadGraph(t,e){this.addCoinProvider(t),this.addPathProvider(e),this.setCoinList(),this.pathProviders.forEach(n=>{const{paths:i}=n;i.forEach(r=>{const s=this.graph.getVertexByKey(r.base)??new Ym(r.base),o=this.graph.getVertexByKey(r.quote)??new Ym(r.quote);this.graph.addEdge(new L2(s,o));const a=this._coinAddressMap.get(r.base),c=this._coinAddressMap.get(r.quote);if(a!=null&&c!=null){const l=ku(r.base,r.quote).pair;this.poolAddressMap.set(l,r.addressMap)}})})}addPathProvider(t){for(let e=0;e<t.paths.length;e+=1){const{base:n,quote:i}=t.paths[e];n.localeCompare(i)<0&&(t.paths[e].base=i,t.paths[e].quote=n),n==="0x2::sui::SUI"&&(t.paths[e].base=i,t.paths[e].quote=n),i==="0x2::sui::SUI"&&(t.paths[e].base=n,t.paths[e].quote=i)}return this.pathProviders.push(t),this}addCoinProvider(t){return this.coinProviders=t,this}tokenInfo(t){return this._coinAddressMap.get(t)}getFeeRate(t,e,n){const i=ku(t,e).pair,r=this.poolAddressMap.get(i);if(r!=null){for(const[a,c]of r.entries())if(c===n)return a*100}const s=ku(t,e).reversePair,o=this.poolAddressMap.get(s);if(o!=null){for(const[a,c]of o.entries())if(c===n)return a*100}return 0}async price(t,e,n,i,r,s,o){const a=this.tokenInfo(t),c=this.tokenInfo(e);if(a===void 0||c===void 0)throw new Ee("From/To coin is undefined","InvalidCoin");const l=this.graph.getVertexByKey(a.address),u=this.graph.getVertexByKey(c.address),d=this.graph.findAllPath(l,u),h=Array.from(d);if(h.length===0)throw new Ee("No find valid path in coin graph","NotFoundPath");let f=[];for(let z=0;z<h.length;z+=1){const H=h[z];if(H.length>3)continue;const ie=[],ke=[],ze=[],se=[];for(let le=0;le<H.length-1;le+=1){const Ne=H[le].value.toString(),he=H[le+1].value.toString(),J=this.getPoolAddressMapAndDirection(Ne,he),ve=J==null?void 0:J.addressMap,ye=J==null?void 0:J.direction;ve!=null&&ye!=null&&(ke.push(ye),ie.push(Ne),ie.push(he),ve.forEach(ge=>{le===0?ze.push(ge):se.push(ge)}))}for(const le of ze)if(se.length>0)for(const Ne of se){const he={stepNums:2,poolAB:le,poolBC:Ne,a2b:ke[0],b2c:ke[1],amount:n,byAmountIn:i,coinTypeA:ie[0],coinTypeB:ie[1],coinTypeC:ie[3]};f.push(he)}else{const Ne={stepNums:1,poolAB:le,poolBC:void 0,a2b:ke[0],b2c:void 0,amount:n,byAmountIn:i,coinTypeA:ie[0],coinTypeB:ie[1],coinTypeC:void 0};f.push(Ne)}}const g=f.filter(z=>z.stepNums===1),p=f.filter(z=>z.stepNums!==1);let w=[];try{w=await this.getPoolWithTVL()}catch{w=[]}if(w.length>0){const z=new Map(w.map(H=>[H.poolAddress,H]));p.sort((H,ie)=>{let ke=0,ze=0;if(z.has(H.poolAB)&&z.has(H.poolBC)){const se=z.get(H.poolAB),le=z.get(H.poolBC);ke=Math.min(se.tvl,le.tvl)}if(z.has(ie.poolAB)&&z.has(ie.poolBC)){const se=z.get(ie.poolAB),le=z.get(ie.poolBC);ze=Math.min(se.tvl,le.tvl)}return ze-ke})}if(f=[...g,...p],f.length===0){if(o!=null){const z=await this.sdk.Swap.preSwapWithMultiPool(o),H={amountIn:new A(z.estimatedAmountIn),amountOut:new A(z.estimatedAmountOut),poolAddress:[z.poolAddress],a2b:[z.aToB],rawAmountLimit:i?[z.estimatedAmountOut]:[z.estimatedAmountIn],isExceed:z.isExceed,coinType:[t,e]},ie={paths:[H],partner:s,priceSlippagePoint:r};return{amountIn:new A(z.estimatedAmountIn),amountOut:new A(z.estimatedAmountOut),paths:[H],a2b:z.aToB,b2c:void 0,byAmountIn:i,isExceed:z.isExceed,targetSqrtPrice:[z.estimatedEndSqrtPrice],currentSqrtPrice:[z.estimatedStartSqrtPrice],coinTypeA:t,coinTypeB:e,coinTypeC:void 0,createTxParams:ie}}throw new Ee("No parameters available for service downgrade","NoDowngradeNeedParams")}const _=await this.preRouterSwapA2B2C(f.slice(0,16));if(_==null){if(o!=null){const H=await this.sdk.Swap.preSwapWithMultiPool(o),ie={amountIn:new A(H.estimatedAmountIn),amountOut:new A(H.estimatedAmountOut),poolAddress:[H.poolAddress],a2b:[H.aToB],rawAmountLimit:i?[H.estimatedAmountOut]:[H.estimatedAmountIn],isExceed:H.isExceed,coinType:[t,e]},ke={paths:[ie],partner:s,priceSlippagePoint:r};return{amountIn:new A(H.estimatedAmountIn),amountOut:new A(H.estimatedAmountOut),paths:[ie],a2b:H.aToB,b2c:void 0,byAmountIn:i,isExceed:H.isExceed,targetSqrtPrice:[H.estimatedEndSqrtPrice],currentSqrtPrice:[H.estimatedStartSqrtPrice],coinTypeA:t,coinTypeB:e,coinTypeC:void 0,createTxParams:ke}}return{amountIn:$e,amountOut:$e,paths:[],a2b:!1,b2c:!1,byAmountIn:i,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const k=_.index,T=f[k].poolBC!=null?[f[k].poolAB,f[k].poolBC]:[f[k].poolAB],R=i?[_.amountMedium,_.amountOut]:[_.amountIn,_.amountMedium],E=[];E.push(f[k].a2b),_.stepNum>1&&E.push(f[k].b2c);const D=[];D.push(f[k].coinTypeA),D.push(f[k].coinTypeB),_.stepNum>1&&D.push(f[k].coinTypeC);const B={amountIn:_.amountIn,amountOut:_.amountOut,poolAddress:T,a2b:E,rawAmountLimit:R,isExceed:_.isExceed,coinType:D},$={paths:[B],partner:s,priceSlippagePoint:r};return{amountIn:_.amountIn,amountOut:_.amountOut,paths:[B],a2b:f[k].a2b,b2c:_.stepNum>1?f[k].b2c:void 0,byAmountIn:i,isExceed:_.isExceed,targetSqrtPrice:_.targetSqrtPrice,currentSqrtPrice:_.currentSqrtPrice,coinTypeA:f[k].coinTypeA,coinTypeB:f[k].coinTypeB,coinTypeC:_.stepNum>1?f[k].coinTypeC:void 0,createTxParams:$}}async preRouterSwapA2B2C(t){var d;if(t.length===0)return null;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=new X;for(const h of t)if(h.stepNums>1){const f=[i.object(h.poolAB),i.object(h.poolBC),i.pure(h.a2b),i.pure(h.b2c),i.pure(h.byAmountIn),i.pure(h.amount.toString())],g=[];h.a2b?g.push(h.coinTypeA,h.coinTypeB):g.push(h.coinTypeB,h.coinTypeA),h.b2c?g.push(h.coinTypeB,h.coinTypeC):g.push(h.coinTypeC,h.coinTypeB),i.moveCall({target:`${e.published_at}::${Bo}::calculate_router_swap_result`,typeArguments:g,arguments:f})}else{const f=[i.pure(h.poolAB),i.pure(h.a2b),i.pure(h.byAmountIn),i.pure(h.amount.toString())],g=h.a2b?[h.coinTypeA,h.coinTypeB]:[h.coinTypeB,h.coinTypeA];i.moveCall({target:`${e.published_at}::${eF}::get_expect_swap_result`,arguments:f,typeArguments:g})}if(!Un(n.address))throw new Ee("this config simulationAccount is not set right","InvalidSimulateAccount");const s=(d=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:d.filter(h=>ce(h.type).name==="CalculatedRouterSwapResultEvent"||ce(h.type).name==="ExpectSwapResultEvent");if(s.length===0)return null;let o=t[0].byAmountIn?$e:uc,a=0;for(let h=0;h<s.length;h+=1)if(!s[h].parsedJson.data.is_exceed)if(t[0].byAmountIn){const f=new A(s[h].parsedJson.data.amount_out);f.gt(o)&&(a=h,o=f)}else{const f=t[h].stepNums>1?new A(s[h].parsedJson.data.amount_in):new A(s[h].parsedJson.data.amount_in).add(new A(s[h].parsedJson.data.fee_amount));f.lt(o)&&(a=h,o=f)}const c=[],l=[];return t[a].stepNums>1?(l.push(s[a].parsedJson.data.target_sqrt_price_ab,s[a].parsedJson.data.target_sqrt_price_cd),c.push(s[a].parsedJson.data.current_sqrt_price_ab,s[a].parsedJson.data.current_sqrt_price_cd)):(l.push(s[a].parsedJson.data.after_sqrt_price),c.push(s[a].parsedJson.current_sqrt_price)),{index:a,amountIn:t[0].byAmountIn?t[a].amount:o,amountMedium:s[a].parsedJson.data.amount_medium,amountOut:t[0].byAmountIn?o:t[a].amount,targetSqrtPrice:l,currentSqrtPrice:c,isExceed:s[a].parsedJson.data.is_exceed,stepNum:t[a].stepNums}}async getPoolWithTVL(){const t=[],{swapCountUrl:e}=this._sdk.sdkOptions;if(!e)return t;let n;try{n=await fetch(e)}catch{throw new Ee(`Failed to get pool list with liquidity from ${e}.`,"InvalidSwapCountUrl")}let i;try{i=await n.json()}catch{throw new Ee(`Failed tp [arse response from ${e}].`,"InvalidSwapCountUrl")}if(i.code!==200)throw new Ee(`Failed to get pool list from ${e}. Statu code is ${i.code}.`,"InvalidSwapCountUrl");const{pools:r}=i.data;for(const s of r)t.push({poolAddress:s.swap_account,tvl:Number(s.tvl_in_usd)});return t}},FF=class{constructor(t){v(this,"_sdk");v(this,"calculateSingleImpact",(t,e)=>e.minus(t).div(e).mul(100));this._sdk=t}get sdk(){return this._sdk}calculateSwapFee(t){let e=O(0);return t.forEach(n=>{const i=n.basePaths.length;if(i>0){const r=n.basePaths[0],s=r.label==="Cetus"?new ne(r.feeRate).div(10**6):new ne(r.feeRate).div(10**9),o=O(r.inputAmount).div(10**r.fromDecimal).mul(s);if(e=e.add(o),i>1){const a=n.basePaths[1],c=r.direction?r.currentPrice:new ne(1).div(r.currentPrice),l=a.direction?a.currentPrice:new ne(1).div(a.currentPrice),u=a.label==="Cetus"?new ne(a.feeRate).div(10**6):new ne(a.feeRate).div(10**9),h=O(a.outputAmount).div(10**a.toDecimal).mul(u).div(c.mul(l));e=e.add(h)}}}),e.toString()}calculateSwapPriceImpact(t){let e=O(0);return t.forEach(n=>{const i=n.basePaths.length;if(i===1){const r=n.basePaths[0],s=O(r.outputAmount).div(10**r.toDecimal),o=O(r.inputAmount).div(10**r.fromDecimal),a=s.div(o),c=r.direction?new ne(r.currentPrice):new ne(1).div(r.currentPrice);e=e.add(this.calculateSingleImpact(a,c))}if(i===2){const r=n.basePaths[0],s=n.basePaths[1],o=r.direction?new ne(r.currentPrice):new ne(1).div(r.currentPrice),a=s.direction?new ne(s.currentPrice):new ne(1).div(s.currentPrice),c=o.mul(a),l=new ne(s.outputAmount).div(10**s.toDecimal),u=new ne(r.inputAmount).div(10**r.fromDecimal),d=l.div(u);e=e.add(this.calculateSingleImpact(d,c))}}),e.toString()}async preSwapWithMultiPool(t){var l;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=new X,r=[t.coinTypeA,t.coinTypeB];for(let u=0;u<t.poolAddresses.length;u+=1){const d=[i.pure(t.poolAddresses[u]),i.pure(t.a2b),i.pure(t.byAmountIn),i.pure(t.amount)];i.moveCall({target:`${e.published_at}::${Qi}::calculate_swap_result`,arguments:d,typeArguments:r})}if(!Un(n.address))throw new Ee("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(s.error!=null)throw new Ee(`pre swap with multi pools error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const o=(l=s.events)==null?void 0:l.filter(u=>ce(u.type).name==="CalculatedSwapResultEvent");if(o.length===0)return null;if(o.length!==t.poolAddresses.length)throw new Ee("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=t.byAmountIn?$e:uc,c=0;for(let u=0;u<o.length;u+=1)if(!o[u].parsedJson.data.is_exceed)if(t.byAmountIn){const d=new A(o[u].parsedJson.data.amount_out);d.gt(a)&&(c=u,a=d)}else{const d=new A(o[u].parsedJson.data.amount_out);d.lt(a)&&(c=u,a=d)}return this.transformSwapWithMultiPoolData({poolAddress:t.poolAddresses[c],a2b:t.a2b,byAmountIn:t.byAmountIn,amount:t.amount,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB},o[c].parsedJson)}async preswap(t){var c;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=new X,r=[t.coinTypeA,t.coinTypeB],s=[i.pure(t.pool.poolAddress),i.pure(t.a2b),i.pure(t.byAmountIn),i.pure(t.amount)];if(i.moveCall({target:`${e.published_at}::${Qi}::calculate_swap_result`,arguments:s,typeArguments:r}),!Un(n.address))throw new Ee("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(o.error!=null)throw new Ee(`preswap error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=o.events)==null?void 0:c.filter(l=>ce(l.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(t,a[0].parsedJson.data)}transformSwapData(t,e){const n=e.amount_in&&e.fee_amount?new A(e.amount_in).add(new A(e.fee_amount)).toString():"";return{poolAddress:t.pool.poolAddress,currentSqrtPrice:t.currentSqrtPrice,estimatedAmountIn:n,estimatedAmountOut:e.amount_out,estimatedEndSqrtPrice:e.after_sqrt_price,estimatedFeeAmount:e.fee_amount,isExceed:e.is_exceed,amount:t.amount,aToB:t.a2b,byAmountIn:t.byAmountIn}}transformSwapWithMultiPoolData(t,e){const{data:n}=e,i=n.amount_in&&n.fee_amount?new A(n.amount_in).add(new A(n.fee_amount)).toString():"";return{poolAddress:t.poolAddress,estimatedAmountIn:i,estimatedAmountOut:n.amount_out,estimatedEndSqrtPrice:n.after_sqrt_price,estimatedStartSqrtPrice:e.current_sqrt_price,estimatedFeeAmount:n.fee_amount,isExceed:n.is_exceed,amount:t.amount,aToB:t.a2b,byAmountIn:t.byAmountIn}}calculateRates(t){const{currentPool:e}=t,n=GP(e);let i;t.a2b?i=t.swapTicks.sort((d,h)=>h.index-d.index):i=t.swapTicks.sort((d,h)=>d.index-h.index);const r=gF(t.a2b,t.byAmountIn,t.amount,n,i);let s=!1;t.byAmountIn?s=r.amountIn.lt(t.amount):s=r.amountOut.lt(t.amount);const o=Rr.getDefaultSqrtPriceLimit(t.a2b);t.a2b&&r.nextSqrtPrice.lt(o)&&(s=!0),!t.a2b&&r.nextSqrtPrice.gt(o)&&(s=!0);let a=0;r.crossTickNum>6&&r.crossTickNum<40&&(a=22e3*(r.crossTickNum-6)),r.crossTickNum>40&&(s=!0);const c=Fe.sqrtPriceX64ToPrice(n.currentSqrtPrice,t.decimalsA,t.decimalsB).toNumber(),l=Fe.sqrtPriceX64ToPrice(r.nextSqrtPrice,t.decimalsA,t.decimalsB).toNumber(),u=Math.abs(c-l)/c*100;return{estimatedAmountIn:r.amountIn,estimatedAmountOut:r.amountOut,estimatedEndSqrtPrice:r.nextSqrtPrice,estimatedFeeAmount:r.feeAmount,isExceed:s,extraComputeLimit:a,amount:t.amount,aToB:t.a2b,byAmountIn:t.byAmountIn,priceImpactPct:u}}async createSwapTransactionPayload(t,e){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(e){const{isAdjustCoinA:i,isAdjustCoinB:r}=Gd(t);if(t.a2b&&i||!t.a2b&&r)return await Ye.buildSwapTransactionForGas(this._sdk,t,n,e)}return Ye.buildSwapTransaction(this.sdk,t,n)}async createSwapTransactionWithoutTransferCoinsPayload(t,e){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(e){const{isAdjustCoinA:i,isAdjustCoinB:r}=Gd(t);if(t.a2b&&i||!t.a2b&&r)return await Ye.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,t,n,e)}return Ye.buildSwapTransactionWithoutTransferCoins(this.sdk,t,n)}},UF=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getAllRegisteredTokenList(t=!1){return await this.factchTokenList("",t)}async getOwnerTokenList(t="",e=!1){return await this.factchTokenList(t,e)}async getAllRegisteredPoolList(t=!1){return await this.factchPoolList("",t)}async getOwnerPoolList(t="",e=!1){return await this.factchPoolList(t,e)}async getWarpPoolList(t=!1){return await this.factchWarpPoolList("","",t)}async getOwnerWarpPoolList(t="",e="",n=!1){return await this.factchWarpPoolList(t,e,n)}async getTokenListByCoinTypes(t){const e={},n="getAllRegisteredTokenList",i=this.getCache(n);if(i!==void 0){const s=i;for(const o of t)for(const a of s)if(ci(o)===ci(a.address)){e[o]=a;continue}}const r=t.filter(s=>e[s]===void 0);for(const s of r){const o=`${s}_metadata`,a=this.getCache(o);if(a!==void 0)e[s]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:s});if(c){const l={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:s};e[s]=l,this.updateCache(o,l,Oe)}}}return e}async factchTokenList(t="",e=!1){var d;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,r="getAllRegisteredTokenList",s=this.getCache(r,e);if(s!==void 0)return s;const o=t.length>0,a=512;let c=0,l=[];if(i===void 0)throw Error("please config token ofsdkOptions");const u=L(i);for(;;){const h=new X;h.moveCall({target:`${i.published_at}::coin_list::${o?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:o?[h.pure(u.coin_registry_id),h.pure(t),h.pure(c),h.pure(a)]:[h.pure(u.coin_registry_id),h.pure(c),h.pure(a)]});const f=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:h,sender:n.address}),g=[];if((d=f.events)==null||d.forEach(p=>{ce(p.type).full_address===`${i.published_at}::coin_list::FetchCoinListEvent`&&p.parsedJson.full_list.value_list.forEach(_=>{g.push(this.transformData(_,!1))})}),l=[...l,...g],g.length<a)break;c=l.length}return l}async factchPoolList(t="",e=!1){var d;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,r="getAllRegisteredPoolList",s=this.getCache(r,e);if(s!==void 0)return s;let o=[];const a=512;let c=0;const l=t.length>0;if(i===void 0)throw Error("please config token ofsdkOptions");const u=L(i);for(;;){const h=new X;if(h.moveCall({target:`${i.published_at}::lp_list::${l?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:l?[h.pure(u.pool_registry_id),h.pure(t),h.pure(c),h.pure(a)]:[h.pure(u.pool_registry_id),h.pure(c),h.pure(a)]}),!Un(n.address))throw new Ee("this config simulationAccount is not set right","InvalidSimulateAccount");const f=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:h,sender:n.address}),g=[];if((d=f.events)==null||d.forEach(p=>{ce(p.type).full_address===`${i.published_at}::lp_list::FetchPoolListEvent`&&p.parsedJson.full_list.value_list.forEach(_=>{g.push(this.transformData(_,!0))})}),o=[...o,...g],g.length<a)break;c=o.length}return o}async factchWarpPoolList(t="",e="",n=!1){const i=await this.factchPoolList(t,n);if(i.length===0)return[];const r=await this.factchTokenList(e,n),s=[];for(const o of i){for(const a of r)a.address===o.coin_a_address&&(o.coinA=a),a.address===o.coin_b_address&&(o.coinB=a);s.push(o)}return s}async getTokenConfigEvent(t=!1){const e=this._sdk.sdkOptions.token.package_id,n=`${e}_getTokenConfigEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const r=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),s=Ol(r),o=await this._sdk.fullClient.queryEventsByPage({Transaction:s}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return o.data.length>0&&o.data.forEach(c=>{const l=ce(c.type);if(c.transactionModule==="coin_list")switch(l.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(l.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(n,a,Oe),a}transformData(t,e){const n={...t};if(e)try{n.coin_a_address=ce(n.coin_a_address).full_address,n.coin_b_address=ce(n.coin_b_address).full_address}catch{}else n.address=ce(n.address).full_address;if(t.extensions){const i=t.extensions.contents;for(const r of i){const{key:s}=r;let{value:o}=r;if(s==="labels")try{o=JSON.parse(decodeURIComponent(Pu.decode(o)))}catch{}s==="pyth_id"&&(o=Mn(o)),n[s]=o}delete n.extensions}return n}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},LF=class{constructor(t){v(this,"_sdk");this._sdk=t}get sdk(){return this._sdk}calculatePrice(t,e,n,i,r){const s=i?e:n,o=i?n:e;return r==="Cetus"?Fe.sqrtPriceX64ToPrice(t,s,o):new ne(t.toString()).div(new ne(10).pow(new ne(o+9-s)))}parseJsonResult(t){return{isExceed:t.is_exceed,isTimeout:t.is_timeout,inputAmount:t.input_amount,outputAmount:t.output_amount,fromCoin:t.from_coin,toCoin:t.to_coin,byAmountIn:t.by_amount_in,splitPaths:t.split_paths.map(n=>({pathIndex:n.path_index,lastQuoteOutput:n.last_quote_output,percent:n.percent,basePaths:n.best_path.map(r=>({direction:r.direction,label:r.label,poolAddress:r.provider,fromCoin:r.from_coin,toCoin:r.to_coin,outputAmount:r.output_amount,inputAmount:r.input_amount,feeRate:r.fee_rate,currentSqrtPrice:new A(r.current_sqrt_price.toString()),afterSqrtPrice:r.label==="Cetus"?new A(r.after_sqrt_price.toString()):$e,fromDecimal:r.from_decimal,toDecimal:r.to_decimal,currentPrice:this.calculatePrice(new A(r.current_sqrt_price.toString()),r.from_decimal,r.to_decimal,r.direction,r.label)})),inputAmount:n.input_amount,outputAmount:n.output_amount}))}}async fetchWithTimeout(t,e,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n);try{const s=await fetch(t,{...e,signal:i.signal});return clearTimeout(r),s}catch{return null}}async fetchAndParseData(t,e){try{const i=await this.fetchWithTimeout(t,e,1500);return i.status===200?this.parseJsonResult(await i.json()):null}catch{return null}}async getBestRouter(t,e,n,i,r,s,o,a,c=!1,l=!1,u=[]){let d=null,h="v2",f={},g=this.sdk.sdkOptions.aggregatorUrl;if(u.length>0){const p=new URL(g);g=`${p.protocol}//${p.hostname}/router_with_lp_changes`,f={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:t,to:e,amount:n,by_amount_in:i,order_split:c,external_router:l,sender_address:"None",request_id:encodeURIComponent(ry()),lp_changes:u})}}else g=`
      ${g}?from=${encodeURIComponent(t)}&to=${encodeURIComponent(e)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(l)}&sender_address=''&request_id=${encodeURIComponent(ry())}
      `;if(d=await this.fetchAndParseData(g,f),d!=null&&d.isTimeout||d==null){const p=await this.sdk.Router.price(t,e,new A(n),i,r,s,a),w=[];for(const k of p.paths){const T=[];if(k.poolAddress.length>1){const E=this.sdk.Router.tokenInfo(k.coinType[0]).decimals,D=this.sdk.Router.tokenInfo(k.coinType[1]).decimals,B=k.a2b[0]?Fe.sqrtPriceX64ToPrice(new A(p.currentSqrtPrice[0]),E,D):Fe.sqrtPriceX64ToPrice(new A(p.currentSqrtPrice[0]),D,E),$={direction:k.a2b[0],label:"Cetus",poolAddress:k.poolAddress[0],fromCoin:k.coinType[0],toCoin:k.coinType[1],feeRate:this.sdk.Router.getFeeRate(k.coinType[0],k.coinType[1],k.poolAddress[0]),outputAmount:p.byAmountIn?k.rawAmountLimit[0].toString():k.rawAmountLimit[1].toString(),inputAmount:k.amountIn.toString(),currentSqrtPrice:p.currentSqrtPrice[0],currentPrice:B,fromDecimal:E,toDecimal:D},Y=this.sdk.Router.tokenInfo(k.coinType[1]).decimals,z=this.sdk.Router.tokenInfo(k.coinType[2]).decimals,H=k.a2b[1]?Fe.sqrtPriceX64ToPrice(new A(p.currentSqrtPrice[1]),Y,z):Fe.sqrtPriceX64ToPrice(new A(p.currentSqrtPrice[1]),z,Y),ie={direction:k.a2b[1],label:"Cetus",poolAddress:k.poolAddress[1],fromCoin:k.coinType[1],toCoin:k.coinType[2],feeRate:this.sdk.Router.getFeeRate(k.coinType[1],k.coinType[2],k.poolAddress[1]),outputAmount:k.amountOut.toString(),inputAmount:p.byAmountIn?k.rawAmountLimit[0].toString():k.rawAmountLimit[1].toString(),currentSqrtPrice:p.currentSqrtPrice[1],currentPrice:H,fromDecimal:Y,toDecimal:z};T.push($,ie)}else{const E=this.sdk.Router.tokenInfo(k.coinType[0]).decimals,D=this.sdk.Router.tokenInfo(k.coinType[1]).decimals,B=k.a2b[0]?Fe.sqrtPriceX64ToPrice(new A(p.currentSqrtPrice[0]),E,D):Fe.sqrtPriceX64ToPrice(new A(p.currentSqrtPrice[0]),D,E),$={direction:k.a2b[0],label:"Cetus",poolAddress:k.poolAddress[0],fromCoin:k.coinType[0],toCoin:k.coinType[1],feeRate:this.sdk.Router.getFeeRate(k.coinType[0],k.coinType[1],k.poolAddress[0]),outputAmount:k.amountOut.toString(),inputAmount:k.amountIn.toString(),currentSqrtPrice:p.currentSqrtPrice[0],currentPrice:B,fromDecimal:E,toDecimal:D};T.push($)}const R={percent:Number(k.amountIn)/Number(p.amountIn)*100,inputAmount:Number(k.amountIn.toString()),outputAmount:Number(k.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:T};w.push(R)}const _={isExceed:p.isExceed,isTimeout:!0,inputAmount:Number(p.amountIn.toString()),outputAmount:Number(p.amountOut.toString()),fromCoin:p.coinTypeA,toCoin:p.coinTypeC!=null?p.coinTypeC:p.coinTypeB,byAmountIn:p.byAmountIn,splitPaths:w};h="v1",d=_}return{result:d,version:h}}},$F=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}setTokenListCache(t){const{coin_list_handle:e}=L(this.sdk.sdkOptions.cetus_config),n=`${e}_getCoinConfigs`,i=this.getCache(n),r=i?[...i,...t]:t;this.updateCache(n,r,Oe)}async getTokenListByCoinTypes(t){const e={},{coin_list_handle:n}=L(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,r=this.getCache(i);if(r!==void 0){const o=r;for(const a of t)for(const c of o)if(ci(a)===ci(c.address)){e[a]=c;continue}}const s=t.filter(o=>e[o]===void 0);for(const o of s){const a=`${o}_metadata`,c=this.getCache(a);if(c!==void 0)e[o]=c;else{const l=await this._sdk.fullClient.getCoinMetadata({coinType:o});if(l){const u={id:l.id,pyth_id:"",name:l.name,symbol:l.symbol,official_symbol:l.symbol,coingecko_id:"",decimals:l.decimals,project_url:"",logo_url:l.iconUrl,address:o};e[o]=u,this.updateCache(a,u,Oe)}else console.log(`not found ${o}`)}}return e}async getCoinConfigs(t=!1,e=!0){const{coin_list_handle:n}=L(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,r=this.getCache(i,t);if(r)return r;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(l=>{var d,h;if(l.error!=null||((h=(d=l.data)==null?void 0:d.content)==null?void 0:h.dataType)!=="moveObject")throw new Ee(`when getCoinConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildCoinConfig(l,e);this.updateCache(`${n}_${u.address}_getCoinConfig`,u,Oe),c.push({...u})}),this.updateCache(i,c,Oe),c}async getCoinConfig(t,e=!1,n=!0){var c,l;const{coin_list_handle:i}=L(this.sdk.sdkOptions.cetus_config),r=`${i}_${t}_getCoinConfig`,s=this.getCache(r,e);if(s)return s;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"0x1::type_name::TypeName",value:{name:bF(t)}}});if(o.error!=null||((l=(c=o.data)==null?void 0:c.content)==null?void 0:l.dataType)!=="moveObject")throw new Ee(`when getCoinConfig get object error: ${o.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(o,n);return this.updateCache(r,a,Oe),a}buildCoinConfig(t,e=!0){let n=Qe(t);n=n.value.fields;const i={...n};return i.id=mr(t),i.address=ce(n.coin_type.fields.name).full_address,n.pyth_id&&(i.pyth_id=Mn(n.pyth_id)),this.transformExtensions(i,n.extension_fields.fields.contents,e),delete i.coin_type,i}async getClmmPoolConfigs(t=!1,e=!0){const{clmm_pools_handle:n}=L(this.sdk.sdkOptions.cetus_config),i=`${n}_getClmmPoolConfigs`,r=this.getCache(i,t);if(r)return r;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(l=>{var d,h;if(l.error!=null||((h=(d=l.data)==null?void 0:d.content)==null?void 0:h.dataType)!=="moveObject")throw new Ee(`when getClmmPoolsConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildClmmPoolConfig(l,e);this.updateCache(`${u.pool_address}_getClmmPoolConfig`,u,Oe),c.push({...u})}),this.updateCache(i,c,Oe),c}async getClmmPoolConfig(t,e=!1,n=!0){const{clmm_pools_handle:i}=L(this.sdk.sdkOptions.cetus_config),r=`${t}_getClmmPoolConfig`,s=this.getCache(r,e);if(s)return s;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:t}}),a=this.buildClmmPoolConfig(o,n);return this.updateCache(r,a,Oe),a}buildClmmPoolConfig(t,e=!0){let n=Qe(t);n=n.value.fields;const i={...n};return i.id=mr(t),i.pool_address=Mn(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,e),i}async getLaunchpadPoolConfigs(t=!1,e=!0){const{launchpad_pools_handle:n}=L(this.sdk.sdkOptions.cetus_config),i=`${n}_getLaunchpadPoolConfigs`,r=this.getCache(i,t);if(r)return r;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(l=>{var d,h;if(l.error!=null||((h=(d=l.data)==null?void 0:d.content)==null?void 0:h.dataType)!=="moveObject")throw new Ee(`when getCoinConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildLaunchpadPoolConfig(l,e);this.updateCache(`${u.pool_address}_getLaunchpadPoolConfig`,u,Oe),c.push({...u})}),this.updateCache(i,c,Oe),c}async getLaunchpadPoolConfig(t,e=!1,n=!0){const{launchpad_pools_handle:i}=L(this.sdk.sdkOptions.cetus_config),r=`${t}_getLaunchpadPoolConfig`,s=this.getCache(r,e);if(s)return s;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:t}}),a=this.buildLaunchpadPoolConfig(o,n);return this.updateCache(r,a,Oe),a}buildLaunchpadPoolConfig(t,e=!0){let n=Qe(t);n=n.value.fields;const i={...n};i.id=mr(t),i.pool_address=Mn(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,e);const r=[];n.social_media.fields.contents.forEach(s=>{r.push({name:s.fields.value.fields.name,link:s.fields.value.fields.link})}),i.social_media=r;try{i.regulation=decodeURIComponent(Pu.decode(i.regulation).replace(/%/g,"%25"))}catch{i.regulation=Pu.decode(i.regulation)}return i}transformExtensions(t,e,n=!0){const i=[];for(const r of e){const{key:s}=r.fields;let{value:o}=r.fields;if(s==="labels")try{o=JSON.parse(decodeURIComponent(Pu.decode(o)))}catch{}n&&(t[s]=o),i.push({key:s,value:o})}delete t.extension_fields,n||(t.extensions=i)}async getCetusConfig(t=!1){const e=this._sdk.sdkOptions.cetus_config.package_id,n=`${e}_getCetusConfig`,i=this.getCache(n,t);if(i!==void 0)return i;const r=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),s=Ol(r),o=await this._sdk.fullClient.queryEventsByPage({Transaction:s});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(o.data.length>0)for(const c of o.data)switch(ce(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(n,a,Oe),a}async getCetusConfigHandle(t){const e=[t.clmm_pools_id,t.coin_list_id,t.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:e,options:{showContent:!0}})).forEach(i=>{var o,a;if(i.error!=null||((a=(o=i.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Ee(`when getCetusConfigHandle get objects error: ${i.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const r=Qe(i),s=dc(i);switch(ce(s).name){case"ClmmPools":t.clmm_pools_handle=r.pools.fields.id.id;break;case"CoinList":t.coin_list_handle=r.coins.fields.id.id;break;case"LaunchpadPools":t.launchpad_pools_handle=r.pools.fields.id.id;break}}),t}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){try{const n=this._cache[t];if(!n)return;if(e||!n.isValid()){delete this._cache[t];return}return n.value}catch(n){console.error(`Error accessing cache for key ${t}:`,n);return}}},zF=class extends zc{async queryEventsByPage(t,e="all"){let n=[],i=!0;const r=e==="all";let s=r?null:e.cursor;do{const o=await this.queryEvents({query:t,cursor:s,limit:r?null:e.limit});o.data?(n=[...n,...o.data],i=o.hasNextPage,s=o.nextCursor):i=!1}while(r&&i);return{data:n,nextCursor:s,hasNextPage:i}}async getOwnedObjectsByPage(t,e,n="all"){let i=[],r=!0;const s=n==="all";let o=s?null:n.cursor;do{const a=await this.getOwnedObjects({owner:t,...e,cursor:o,limit:s?null:n.limit});a.data?(i=[...i,...a.data],r=a.hasNextPage,o=a.nextCursor):r=!1}while(s&&r);return{data:i,nextCursor:o,hasNextPage:r}}async getDynamicFieldsByPage(t,e="all"){let n=[],i=!0;const r=e==="all";let s=r?null:e.cursor;do{const o=await this.getDynamicFields({parentId:t,cursor:s,limit:r?null:e.limit});o.data?(n=[...n,...o.data],i=o.hasNextPage,s=o.nextCursor):i=!1}while(r&&i);return{data:n,nextCursor:s,hasNextPage:i}}async batchGetObjects(t,e,n=50){let i=[];try{for(let r=0;r<Math.ceil(t.length/n);r++){const s=await this.multiGetObjects({ids:t.slice(r*n,n*(r+1)),options:e});i=[...i,...s]}}catch(r){console.log(r)}return i}async calculationTxGas(t){const{sender:e}=t.blockData;if(e===void 0)throw Error("sdk sender is empty");const n=await this.devInspectTransactionBlock({transactionBlock:t,sender:e}),{gasUsed:i}=n.effects;return Number(i.computationCost)+Number(i.storageCost)-Number(i.storageRebate)}async sendTransaction(t,e){try{return await this.signAndExecuteTransactionBlock({transactionBlock:e,signer:t,options:{showEffects:!0,showEvents:!0}})}catch(n){console.log("error: ",n)}}async sendSimulationTransaction(t,e,n=!0){try{if(n)return await this.devInspectTransactionBlock({transactionBlock:t,sender:e});const r={ProgrammableTransaction:{inputs:t.blockData.inputs.map(c=>{const{type:l,value:u}=c;return l==="object"?D2.SharedObjectRef({objectId:u,initialSharedVersion:0,mutable:!0}):u}),transactions:t.blockData.transactions}},s=li.TransactionKind.serialize(r,{maxSize:131072}).toBytes(),o=Zo(s);return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e,o,null,null]})}catch(i){console.log("devInspectTransactionBlock error",i)}}},qF=class{constructor(t){v(this,"_cache",{});v(this,"_rpcModule");v(this,"_pool");v(this,"_position");v(this,"_swap");v(this,"_rewarder");v(this,"_router");v(this,"_router_v2");v(this,"_token");v(this,"_config");v(this,"_sdkOptions");v(this,"_senderAddress","");this._sdkOptions=t,this._rpcModule=new zF({url:t.fullRpcUrl}),this._swap=new FF(this),this._pool=new jF(this),this._position=new RF(this),this._rewarder=new BF(this),this._router=new PF(this),this._router_v2=new LF(this),this._token=new UF(this),this._config=new $F(this),Mm(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(t){this._senderAddress=t}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(t,e,n=!0){const i=[];let r=null;const s=`${this.sdkOptions.fullRpcUrl}_${t}_${e}_getOwnerCoinAssets`,o=this.getCache(s,n);if(o)return o;for(;;){const a=await(e?this.fullClient.getCoins({owner:t,coinType:e,cursor:r}):this.fullClient.getAllCoins({owner:t,cursor:r}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&i.push({coinAddress:ce(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),r=a.nextCursor,!a.hasNextPage)break}return this.updateCache(s,i,30*1e3),i}async getOwnerCoinBalances(t,e){let n=[];return e?n=[await this.fullClient.getBalance({owner:t,coinType:e})]:n=[...await this.fullClient.getAllBalances({owner:t})],n}updateCache(t,e,n=Oe){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},bf="router",ja=1e4,Ts=class{static buildPoolImmutables(t){const{fields:e}=t.value.fields.value;return{clmm_pool_id:ce(e.clmm_pool_id).address,booster_type:ce(e.booster_type.fields.name).source_address,pool_id:ce(e.pool_id).address,coinTypeA:ce(e.coin_type_a.fields.name).source_address,coinTypeB:ce(e.coin_type_b.fields.name).source_address}}static buildPoolState(t){const e=Qe(t),n=[];return e.config.fields.contents.forEach(r=>{n.push({lock_day:Number(r.fields.key),multiplier:Number(O(r.fields.value).div(ja))})}),{basic_percent:Number(O(e.basic_percent).div(ja)),balances:{balances_handle:e.balances.fields.id.id,size:e.balances.fields.size},config:n,lock_positions:{lock_positions_handle:e.lock_positions.fields.id.id,size:e.lock_positions.fields.size},is_open:e.is_open,index:Number(e.index),pool_id:mr(t)}}static buildLockNFT(t){const e=ce(mr(t)).address;return{lock_clmm_position:Za(t),locked_nft_id:e}}static buildLockPositionInfo(t){const e=Qe(t),{value:n}=e.value.fields;return{type:n.type,position_id:n.fields.position_id,start_time:Number(n.fields.start_time),lock_period:Number(n.fields.lock_period),end_time:Number(n.fields.end_time),growth_rewarder:n.fields.growth_rewarder,rewarder_owned:n.fields.rewarder_owned,is_settled:n.fields.is_settled}}static isLocked(t){return t.end_time>Date.parse(new Date().toString())/1e3}},VF=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getPoolImmutables(t=!1){var s;const{booster:e}=this._sdk.sdkOptions,n=`${e.package_id}_getPoolImmutables`,i=this.getCache(n,t),r=[];if(i!==void 0)r.push(...i);else{const o=[];(s=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(L(e).booster_pool_handle)).data)==null||s.forEach(l=>{o.push(l.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showContent:!0});for(const l of c){const u=Qe(l);if(u){const d=Ts.buildPoolImmutables(u);this.updateCache(`${d.pool_id}_getPoolImmutable`,d,Oe),r.push(d)}}}return this.updateCache(n,r,Oe),r}async getPoolImmutable(t){const{booster:e}=this._sdk.sdkOptions,n=`${t}_getPoolImmutable`,i=this.getCache(n);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:L(e).booster_pool_handle,name:{type:"0x2::object::ID",value:t}}),s=Qe(r),o=Ts.buildPoolImmutables(s);return this.updateCache(n,o,Oe),o}async getPools(){const t=[],n=(await this.getPoolImmutables()).map(r=>r.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(const r of i){const s=Ts.buildPoolState(r);if(s){const o={...await this.getPoolImmutable(s.pool_id),...s};t.push(o);const a=`${o.pool_id}_getPoolObject`;this.updateCache(a,o,Oe)}}return t}async getPool(t,e=!0){const n=`${t}_getPoolObject`,i=this.getCache(n,e),r=await this.getPoolImmutable(t);if(i!==void 0)return{...r,...i};const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showType:!0}}),o=Ts.buildPoolState(s),a={...r,...o};return this.updateCache(n,a,Oe),a}async getPoolHandleId(t){const e=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),n=Qe(e);return n?n.list.fields.id.id:""}async getBoosterInitConfigs(){var i;const{package_id:t}=this.sdk.sdkOptions.booster,e=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::config::InitEvent`}))==null?void 0:i.data,n={booster_config_id:"",booster_pool_handle:""};return e.length>0&&e.forEach(r=>{const s=r.parsedJson;s&&(n.booster_config_id=s.config_id)}),n.booster_pool_handle=await this.getPoolHandleId(n.booster_config_id),n}async getOwnerBoosterPositions(t,e,n){const{booster:i}=this.sdk.sdkOptions,r=[],s=[],o=`${i.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:o}});for(const l of a.data)if(ce(_r(l)).source_address===o&&l.data){const d=Ts.buildLockNFT(l);this.updateCache(`${d.locked_nft_id}_getBoosterPositionById`,d,Oe),d&&(e===void 0||e===d.lock_clmm_position.pool)&&r.push(d)}const c=await this.getLockPositionInfos(n,r.map(l=>l.locked_nft_id));for(const l of r)for(const u of c)if(l.lock_clmm_position.pos_object_id===u.position_id){s.push({...l,...u});break}return s}async getBoosterPosition(t,e){const n=`${e}_getBoosterPositionById`,i=this.getCache(n);let r;if(i!==void 0)r=i;else{const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showOwner:!0}});r=Ts.buildLockNFT(o),this.updateCache(n,r,Oe)}const s=await this.getLockPositionInfo(t,e);return{...r,...s}}async getLockPositionInfos(t,e=[]){var s;const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(t),i=[],r=[];return(s=n.data)==null||s.forEach(o=>{e.length>0?e.includes(o.name.value)&&i.push(o.objectId):i.push(o.objectId)}),i.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showContent:!0})).forEach(a=>{const c=Ts.buildLockPositionInfo(a);c&&r.push(c)}),r}async getLockPositionInfo(t,e){const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}});return Ts.buildLockPositionInfo(n)}calculateXCetusRewarder(t,e,n){let i=e.basic_percent,r="0";t.forEach(a=>{a.coin_address===e.booster_type&&(console.log("find ",e.booster_type),r=a.amount_owed.toString())}),n.is_settled||e.config.forEach(a=>{a.lock_day===n.lock_period&&(i=a.multiplier)});const s=O(r).sub(n.growth_rewarder).mul(i);return O(n.rewarder_owned).add(s).toString()}lockPositionPayload(t){const{booster:e}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new X;return i.moveCall({target:`${e.published_at}::${bf}::lock_position`,typeArguments:[t.booster_type,t.coinTypeA,t.coinTypeB],arguments:[i.pure(L(e).booster_config_id),i.pure(L(n).global_config_id),i.pure(t.booster_pool_id),i.pure(t.clmm_pool_id),i.pure(t.clmm_position_id),i.pure(t.lock_day),i.pure(we)]}),i}canceLockPositionPayload(t){const{booster:e}=this.sdk.sdkOptions,n=new X;return n.moveCall({target:`${e.published_at}::${bf}::cancel_lock`,typeArguments:[t.booster_type],arguments:[n.pure(L(e).booster_config_id),n.pure(t.booster_pool_id),n.pure(t.lock_nft_id),n.pure(we)]}),n}redeemPayload(t){const{booster:e,xcetus:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,r=new X,s=L(n);return r.moveCall({target:`${e.published_at}::${bf}::redeem`,typeArguments:[t.booster_type,t.coinTypeA,t.coinTypeB],arguments:[r.pure(L(e).booster_config_id),r.pure(L(i).global_config_id),r.pure(t.booster_pool_id),r.pure(t.lock_nft_id),r.pure(t.clmm_pool_id),r.pure(s.lock_manager_id),r.pure(s.xcetus_manager_id),r.pure(t.ve_nft_id),r.pure(we)]}),r}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},ni="router",gv=1e9,Br=class{static priceRealToFix(t,e,n){const i=O(e-n).toNumber();return Number(O(t).div(O(10).pow(O(i))).toString())}static priceFixToReal(t,e,n){const i=O(e-n).toNumber();return Number(O(t).mul(O(10).pow(O(i))).toString())}static raiseTotalAmount(t,e,n){const i=O(e-n).abs().toNumber();return e>n?Number(O(t.total_supply).mul(t.current_price).div(O(10).pow(O(i))).toString()):Number(O(t.total_supply).mul(t.current_price).mul(O(10).pow(O(i))).toString())}static buildLaunchPadPool(t){const e=_r(t),n=ce(e),i=Qe(t),r={coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],pool_address:Mn(mr(t)),is_settle:i.is_settle,current_price:O(i.initialize_price).div(O(gv)).toString(),price:i.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,total_purchase_amount:i.reality_raise_total,total_supply:i.sale_total,min_purchase:i.min_purchase,max_purchase:i.max_purchase,complete_raise_limit:i.least_raise_amount,softcap:i.softcap,max_raise_amount:i.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(i.liquidity_rate)/1e4,is_cancel:i.is_cancel,duration_summary:{start_time:Number(i.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(i.duration_manager.fields.activity_duration),settle_duration:Number(i.duration_manager.fields.settle_duration),lock_up_duration:Number(i.duration_manager.fields.locked_duration)},white_summary:{white_handle:i.white_list.fields.users.fields.id.id,protection_hard_cap:i.white_list.fields.hard_cap_total,protection_limit_used:i.white_list.fields.purchase_total,size:Number(i.white_list.fields.users.fields.size)},unused_sale:i.unused_sale,harvest_raise:i.harvest_raise,tick_spacing:Number(i.tick_spacing),owner:i.recipient,purchase_summary:{purchase_handle:i.purchase_list.fields.id.id,size:Number(i.purchase_list.fields.size)},pool_status:"Failed"};return Br.updatePoolStatus(r),r}static updatePoolStatus(t){const e=Number(O(Date.now()/1e3).toFixed(0)),{duration_summary:n}=t,i=n.start_time+n.purchase_duration,r=i+n.settle_duration;if(n.end_time=i,n.settle_end_time=r,t.is_settle)t.pool_status="Ended";else if(t.is_cancel)t.pool_status="Canceled";else if(e<n.start_time)t.pool_status="Upcoming";else if(e>n.start_time&&e<i)t.pool_status="Live";else if(e>i&&e<r){const s=t.raise_coin_amount;Number(s)<Number(t.complete_raise_limit)?t.pool_status="Failed":t.pool_status="Settle"}return t}static async calculatePoolPrice(t,e){const n=await t.ClmmSDK.CetusConfig.getTokenListByCoinTypes([e.coin_type_sale,e.coin_type_raise]),i=n[e.coin_type_sale].decimals,r=n[e.coin_type_raise].decimals;e.min_price=this.priceFixToReal(Number(O(e.softcap).div(O(e.total_supply))),i,r).toString(),e.max_price=this.priceFixToReal(Number(O(e.max_raise_amount).div(O(e.total_supply))),i,r).toString(),e.current_price=this.priceFixToReal(Number(e.current_price),i,r).toString(),e.sale_decimals=i,e.raise_decimals=r}static async getWithdrawRaise(t){return t.pool_status==="Ended"?t.harvest_raise:"0"}static async getWithdrawSale(t){return t.pool_status==="Ended"?t.unused_sale:t.sale_coin_amount}static async getHistoryWithdrawRaise(t,e){if(e.pool_status==="Ended"){if(O(e.harvest_raise).equals(O(0))){const i=await t.Launchpad.getSettleEvent(e.pool_address);i&&(e.harvest_raise=i.unused_raise)}const n=A.min(new A(e.total_purchase_amount),new A(e.max_raise_amount));return O(n.toString()).mul(1-e.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(t,e){if(e.pool_status==="Ended"){const n=await t.Launchpad.getSettleEvent(e.pool_address);return n&&(e.unused_sale=n.unused_sale),e.unused_sale}return"0"}static async getOverrecruitReverseAmount(t,e){const n=await t.Launchpad.getPurchaseMarks(t.ClmmSDK.senderAddress,[e.pool_address],!1);if(n.length>0){const i=n[0].purchased_raise_amount,r=(await t.Launchpad.getPurchaseAmount(e.white_summary.white_handle,t.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:s}=e.white_summary;return O(i).sub(r).div(O(e.total_purchase_amount).sub(s)).mul(O(e.total_purchase_amount).sub(e.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(t,e){const n=await Br.getOverrecruitReverseAmount(t,e),i=await t.Launchpad.getPurchaseMarks(t.ClmmSDK.senderAddress,[e.pool_address],!1);if(i){const r=i[0].purchased_raise_amount;O(r).sub(n).div(e.current_price)}return"0"}},WF=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getPoolImmutables(t=[],e=0,n=100,i=!1){var u;const{package_id:r}=this._sdk.sdkOptions.launchpad;if(r===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");const s=`${r}_getPoolImmutables`,o=this.getCache(s,i),a=[],c=[];if(o!==void 0&&a.push(...o),a.length===0)try{((u=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`}))==null?void 0:u.data).forEach(h=>{const f=h.parsedJson;f&&a.push({pool_address:f.pool_id,coin_type_sale:ce(f.sale_coin.name).full_address,coin_type_raise:ce(f.raise_coin.name).full_address})}),this.updateCache(s,a,Oe)}catch(d){console.log("getPoolImmutables",d)}const l=t.length>0;for(let d=0;d<a.length;d+=1){const h=a[d];if(!(l&&!t.includes(h.pool_address))){if(!l){const f=d;if(f<e||f>=e+n)continue}c.push(h)}}return c}async getPoolImmutablesWithPage(t="all",e=!1){const{package_id:n}=this._sdk.sdkOptions.launchpad,i=`${n}_getPoolImmutables`,r=[],s={data:[],hasNextPage:!1},o=t==="all";if(o){const a=this.getCache(i,e);a&&r.push(...a)}if(r.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::factory::CreatePoolEvent`},t);s.hasNextPage=a.hasNextPage,s.nextCursor=a.nextCursor,a.data.forEach(c=>{const l=c.parsedJson;l&&r.push({pool_address:l.pool_id,coin_type_sale:ce(l.sale_coin.name).full_address,coin_type_raise:ce(l.raise_coin.name).full_address})})}catch(a){console.log("getPoolImmutables",a)}return s.data=r,o&&this.updateCache(i,r,Oe),s}async getPools(t=[],e=0,n=100){const i=[];let r=[];t.length>0?r=[...t]:(await this.getPoolImmutables([],e,n,!1)).forEach(a=>{r.push(a.pool_address)});const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0});for(const o of s){const a=Br.buildLaunchPadPool(o);await Br.calculatePoolPrice(this._sdk,a),i.push(a);const c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,Oe)}return i}async getPool(t,e=!0){const n=`${t}_getPoolObject`,i=this.getCache(n,e);if(i!==void 0){const o=i;return Br.updatePoolStatus(o),o}const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showType:!0}}),s=Br.buildLaunchPadPool(r);return await Br.calculatePoolPrice(this._sdk,s),this.updateCache(n,s),s}async getInitConfig(t=!1){var c;const e=this._sdk.sdkOptions.launchpad.package_id,n=`${e}_getInitEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),s=Ol(r),o=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:s}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return o.length>0&&(o.forEach(l=>{const u=l.parsedJson;if(u)switch(ce(l.type).full_address){case`${e}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.config_cap_id=u.config_cap_id;break;case`${e}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(n,a,Oe)),a}async getLockNFT(t,e=!1){const n=`${t}_getLockNFT`,i=this.getCache(n,e);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!r.error)return Za(r)}async getLockNFTList(t){var r;const{package_id:e}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:n}=this._sdk,i=[];try{const s=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:r.data;for(const o of s){const a=o.parsedJson;if(a){const c={locked_time:Number(a.locked_time),end_lock_time:Number(a.end_lock_time),nft_type:a.nft_type_name.name,lock_nft_id:a.lock_nft_id,recipient:a.recipient};if(t===c.recipient&&`${e}`===ce(c.nft_type).address){const l=await this.getLockNFT(c.lock_nft_id);if(l){const u=ce(l.coin_type_a).full_address,d=ce(l.coin_type_b).full_address;i.push({...l,coin_type_a:u,coin_type_b:d,...c})}}}}return i}catch(s){return console.log("getLockNFTList:",s),[]}}async creatPoolTransactionPayload(t){const{launchpad:e}=this.sdk.sdkOptions,n=L(e);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=Br.priceRealToFix(Number(t.initialize_price),t.sale_decimals,t.raise_decimals),r=new X,s=O(t.total_supply).add(O(t.total_supply).mul(O(t.liquidity_rate))).toNumber(),o=await Ye.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,r,BigInt(s),t.coin_type_sale),a=[r.pure(n.admin_cap_id),r.pure(n.config_cap_id),r.pure(n.pools_id),r.pure(lt(t.recipient)),r.pure((i*gv).toString()),o,r.pure(t.total_supply.toString()),r.pure(t.min_purchase.toString()),r.pure(t.max_purchase.toString()),r.pure(t.least_raise_amount.toString()),r.pure(t.hardcap.toString()),r.pure((t.liquidity_rate*1e3).toString()),r.pure(t.start_time.toString()),r.pure(t.activity_duration.toString()),r.pure(t.settle_duration.toString()),r.pure(t.locked_duration.toString()),r.pure(t.tick_spacing.toString()),r.pure(we)],c=[t.coin_type_sale,t.coin_type_raise];return r.moveCall({target:`${e.published_at}::${ni}::create_launch_pool`,typeArguments:c,arguments:a}),r}async creatPurchasePayload(t){const{launchpad:e}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=new X,i=await Ye.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(t.purchase_amount),t.coin_type_raise),r=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[t.pool_address],!1))[0],s=[t.coin_type_sale,t.coin_type_raise];let o;return r?o=[n.pure(t.pool_address),n.pure(L(e).config_cap_id),n.pure(r.id),i,n.pure(t.purchase_amount.toString()),n.pure(we)]:o=[n.pure(t.pool_address),n.pure(L(e).config_cap_id),i,n.pure(t.purchase_amount.toString()),n.pure(we)],n.moveCall({target:`${e.published_at}::${ni}::${r===void 0?"create_and_purchase":"purchase"}`,typeArguments:s,arguments:o}),n}async creatClaimPayload(t){const{launchpad:e}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[t.pool_address],!1))[0],i=new X,r=[t.coin_type_sale,t.coin_type_raise],s=[i.pure(t.pool_address),i.pure(L(e).config_cap_id),i.pure(n==null?void 0:n.id),i.pure(we)];return i.moveCall({target:`${e.published_at}::${ni}::claim`,typeArguments:r,arguments:s}),i}async creatSettlePayload(t){const{launchpad:e}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();const i=L(n),{clmm_args:r}=t,s=new X;s.setSender(this.sdk.ClmmSDK.senderAddress);const o=[t.coin_type_sale,t.coin_type_raise];if(r){const a=r.opposite?Fe.priceToSqrtPriceX64(O(1).div(r.current_price),r.raise_decimals,r.sale_decimals).toString():Fe.priceToSqrtPriceX64(O(r.current_price),r.sale_decimals,r.raise_decimals).toString(),c=BigInt(a)<BigInt(r.clmm_sqrt_price),l=r.opposite?c?t.coin_type_raise:t.coin_type_sale:c?t.coin_type_sale:t.coin_type_raise,u=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,l);let d=yt.calculateTotalBalance(u);yt.isSuiCoin(l)&&(d-=BigInt(2e8));const f=Ye.buildCoinForAmount(s,u,d,l).targetCoin,g=r.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",p=[s.pure(t.pool_address),s.pure(L(e).config_cap_id),s.pure(r.clmm_pool_address),s.pure(i.global_config_id),s.pure(a),f,s.pure(we)];s.moveCall({target:`${e.published_at}::${ni}::${g}`,typeArguments:o,arguments:p})}else s.moveCall({target:`${e.published_at}::${ni}::settle`,typeArguments:o,arguments:[s.pure(t.pool_address),s.pure(L(e).config_cap_id),s.pure(we)]});return s}creatWithdrawPayload(t){const{launchpad:e}=this.sdk.sdkOptions,n=new X,i=[t.coin_type_sale,t.coin_type_raise],r=[n.object(t.pool_address),n.object(L(e).config_cap_id),n.object(we)];return t.sale_amount>BigInt(0)&&n.moveCall({target:`${e.published_at}::${ni}::withdraw_sale`,typeArguments:i,arguments:r}),t.raise_amount>BigInt(0)&&n.moveCall({target:`${e.published_at}::${ni}::withdraw_raise`,typeArguments:i,arguments:r}),n}addUserToWhitelisPayload(t){const{launchpad:e}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new X,i=[t.coin_type_sale,t.coin_type_raise];return t.user_addrs.forEach(r=>{const s=[n.object(L(e).admin_cap_id),n.object(L(e).config_cap_id),n.object(t.pool_address),n.object(r),n.pure(t.safe_limit_amount),n.object(we)];n.moveCall({target:`${e.published_at}::${ni}::add_user_to_whitelist`,typeArguments:i,arguments:s})}),n}updateWhitelistCapPayload(t){const{launchpad:e}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new X,i=[t.coin_type_sale,t.coin_type_raise];return t.safe_limit_amount>0&&n.moveCall({target:`${e.published_at}::${ni}::update_whitelist_member_safe_limit_amount`,typeArguments:i,arguments:[n.object(L(e).admin_cap_id),n.object(L(e).config_cap_id),n.object(t.pool_address),n.pure(t.white_list_member),n.pure(t.safe_limit_amount),n.object(we)]}),t.hard_cap_total>0&&n.moveCall({target:`${e.published_at}::${ni}::update_whitelist_hard_cap_total`,typeArguments:i,arguments:[n.object(L(e).admin_cap_id),n.object(L(e).config_cap_id),n.object(t.pool_address),n.pure(t.hard_cap_total),n.object(we)]}),n}creatRemoveWhitelistPayload(t){const{launchpad:e}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new X,i=[t.coin_type_sale,t.coin_type_raise];return t.user_addrs.forEach(r=>{const s=[n.object(L(e).admin_cap_id),n.object(L(e).config_cap_id),n.object(t.pool_address),n.object(r),n.object(we)];n.moveCall({target:`${e.published_at}::${ni}::remove_user_from_whitelist`,typeArguments:i,arguments:s})}),n}creatCancelPoolPayload(t){const{launchpad:e}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new X,i=[t.coin_type_sale,t.coin_type_raise],r=[n.pure(L(e).admin_cap_id),n.pure(L(e).config_cap_id),n.pure(t.pool_address),n.pure(we)];return n.moveCall({target:`${e.published_at}::${ni}::cancel`,typeArguments:i,arguments:r}),n}updateRecipientPayload(t){const{launchpad:e}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new X,i=[t.coin_type_sale,t.coin_type_raise],r=[n.pure(L(e).admin_cap_id),n.pure(L(e).config_cap_id),n.pure(t.pool_address),n.pure(t.new_recipient),n.pure(we)];return n.moveCall({target:`${e.published_at}::${ni}::update_recipient_address`,typeArguments:i,arguments:r}),n}updatePoolDuractionPayload(t){const{launchpad:e}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new X,i=[t.coin_type_sale,t.coin_type_raise],r=[n.pure(L(e).admin_cap_id),n.pure(L(e).config_cap_id),n.pure(t.pool_address),n.pure(t.activity_duration),n.pure(t.settle_duration),n.pure(t.lock_duration),n.pure(we)];return n.moveCall({target:`${e.published_at}::${ni}::update_pool_duration`,typeArguments:i,arguments:r}),n}creatUnlockNftPayload(t){const{launchpad:e}=this.sdk.sdkOptions;if(L(e)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");const n=new X,i=[t.nft_type],r=[n.pure(t.lock_nft),n.pure(we)];return n.moveCall({target:`${e.published_at}::lock::unlock_nft`,typeArguments:i,arguments:r}),n}async isAdminCap(t){const{launchpad:e}=this._sdk.sdkOptions;if(L(e)===void 0)throw Error("launchpad config is empty");const n=`${t}_isAdminCap`,i=this.getCache(n);if(i)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:L(e).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(r);const s=dc(r),o=Qd(r);let a=!1;return o&&s&&ce(s).source_address===`${e.package_id}::config::AdminCap`&&(a=lt(o.AddressOwner)===lt(t)),this.updateCache(n,a,Oe),a}async isWhiteListUser(t,e){const n={type:"address",value:e};try{const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:n});return!!(i&&i.data)}catch{return!1}}async getPurchaseAmount(t,e){var i;const n={type:"address",value:e};try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:n}),s=Qe(r);if(console.log(s),s)return(i=s==null?void 0:s.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(t,e=[],n=!0){const{launchpad:i}=this._sdk.sdkOptions,r=`${e}_getPurchaseMark`,s=this.getCache(r,n);if(!n&&s!==void 0)return s;let o=null;const a=[];for(;;){const c=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:t,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:o});for(const l of c.data){const{fields:u}=l.data.content;if(ce(_r(l)).source_address===`${i.package_id}::pool::PurchaseMark`){console.log("fields: ",u);const h={id:u.id.id,pool_id:ce(u.pool_id).address,purchased_raise_amount:u.purchase_total,obtain_sale_amount:u.obtain_sale_amount,used_raise_amount:u.used_raise_amount};e.length>0?e.includes(h.pool_id)&&a.push(h):a.push(h)}}if(c.hasNextPage)o=c.nextCursor;else break}return this.updateCache(r,a,Oe),a}async getSettleEvent(t){const{launchpad:e}=this._sdk.sdkOptions,n=`${t}_getPurchaseMark`,i=this.getCache(n);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e.package_id}::pool::SettleEvent`});for(const s of r.data){const o=s.parsedJson;if(t===Mn(o.pool_id)){const a={pool_id:o.pool_id,settle_price:o.settle_price,unused_sale:o.unused_sale,unused_raise:o.unused_raise,white_purchase_total:o.white_purchase_total};return this.updateCache(n,a,Oe),a}}}buildLaunchpadCoinType(t,e){return Zd(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[t,e])}assertLuanchpadConfig(){const{launchpad:t}=this.sdk.sdkOptions;if(L(t)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},As=class{static buildPoolImmutables(t){const{fields:e}=t.value.fields.value;return{clmm_pool_id:ce(e.clmm_pool_id).address,bonus_type:ce(e.bonus_type.fields.name).source_address,pool_id:ce(e.pool_id).address,coinTypeA:ce(e.coin_type_a.fields.name).source_address,coinTypeB:ce(e.coin_type_b.fields.name).source_address}}static buildPoolState(t){const e=Qe(t),n=[];return e.config.fields.contents.forEach(r=>{n.push({rate:Number(O(r.fields.key).div(ja)),multiplier:Number(O(r.fields.value).div(ja))})}),{balance:e.balance,config:n,is_open:e.is_open,index:Number(e.index),start_time:Number(e.start_time),interval_day:Number(e.interval_day),minimum_percent_to_reward:Number(O(e.minimum_percent_to_reward).div(ja)),rewarders:{rewarder_handle:e.rewarders.fields.id.id,size:Number(e.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:e.whale_nfts.fields.id.id,size:Number(e.whale_nfts.fields.size)},points:{point_handle:e.points.fields.id.id,size:Number(e.points.fields.size)}}}static buildMarkerPositions(t){const{contents:e}=t.value.fields.value.fields,n=[],i=t.id.id;return e.forEach(r=>{const{key:s,value:o}=r.fields,a={id:s,period_id:i,bonus_num:o.fields.bonus_num,point:o.fields.point,is_burn:o.fields.is_burn,point_after_multiplier:o.fields.point_after_multiplier,percent:Number(O(o.fields.percent).div(ja)),fee_share_rate:0,is_redeemed:o.fields.is_redeemed};n.push(a)}),n}static buildPoolBonusInfo(t){const{fields:e,type:n}=t.value.fields.value;return{type:n,time:Number(e.time),settle_time:Number(e.settle_time),settled_num:e.settled_num,is_settled:e.is_settled,basis_bonus:e.basis_bonus,total_bonus:e.total_bonus,is_vacant:e.is_vacant,redeemed_num:e.redeemed_num}}static getBonusPercent(t,e){let n=0;for(const i of t)e>=i.rate&&i.rate>n&&(n=i.multiplier);return n}},uy="router",KF=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getPoolImmutables(t=!1){var s;const{maker_bonus:e}=this._sdk.sdkOptions,n=`${e.package_id}_getPoolImmutables`,i=this.getCache(n,t),r=[];if(i!==void 0)r.push(...i);else{const o=[];(s=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(L(e).maker_pool_handle)).data)==null||s.forEach(l=>{o.push(l.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showContent:!0});for(const l of c){const u=Qe(l);u&&r.push(As.buildPoolImmutables(u))}}return r}async getPoolImmutable(t){const{maker_bonus:e}=this._sdk.sdkOptions,n=`${e.package_id}_getPoolImmutables`,i=this.getCache(n);if(i!==void 0){const o=i.filter(a=>t===a.pool_id);if(o.length>0)return o[0]}const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:L(e).maker_pool_handle,name:{type:"0x2::object::ID",value:t}}),s=Qe(r);return As.buildPoolImmutables(s)}async getPools(){const t=[],e=await this.getPoolImmutables(),n=e.map(s=>s.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});let r=0;for(const s of i){const o=As.buildPoolState(s);if(o){const a={...e[r],...o};t.push(a);const c=`${a.pool_id}_getPoolObject`;this.updateCache(c,a,Oe)}r+=1}return t}async getPool(t,e=!0){const n=`${t}_getPoolObject`,i=this.getCache(n,e),r=await this.getPoolImmutable(t);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showType:!0}}),o=As.buildPoolState(s),a={...r,...o};return this.updateCache(n,a,Oe),a}async getPoolHandleId(t){const e=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),n=Qe(e);return n?n.list.fields.id.id:""}async getMakerPoolPeriods(t,e=!1){const n=[],i=`${t.pool_id}_getMakerPoolPeriods`,r=this.getCache(i,e);return r!==void 0?r:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(t.whale_nfts.whale_nfts_handle)).data.forEach(o=>{const a={id:o.objectId,start_time:0,end_time:0,period:Number(o.name.value)};a.start_time=Number(O(t.start_time).add(O(t.interval_day).mul(24*3600).mul(a.period)).toFixed(0,ne.ROUND_DOWN)),a.end_time=Number(O(a.start_time).add(O(t.interval_day).mul(24*3600)).toFixed(0,ne.ROUND_DOWN)),n.push(a)}),this.updateCache(i,n,Oe),n)}async getMakerBonusInitConfigs(){var i;const{package_id:t}=this.sdk.sdkOptions.maker_bonus,e=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::config::InitEvent`}))==null?void 0:i.data,n={maker_config_id:"",maker_pool_handle:""};return e.length>0&&e.forEach(r=>{const s=r.parsedJson;s&&(n.maker_config_id=s.config_id)}),n.maker_pool_handle=await this.getPoolHandleId(n.maker_config_id),n}async getPoolMarkerPositionList(t,e,n=!1){const i={},r=[];n||e.forEach(s=>{const o=`${t}_${s.period}_getPoolMarkerPositionList`,a=this.getCache(o);a!==void 0?i[s.period]=a:(i[s.period]=[],r.push(s))});try{r.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(r.map(a=>a.id),{showContent:!0})).forEach(a=>{const c=Qe(a),l=As.buildMarkerPositions(c);if(l.length>0){const{period_id:u}=l[0],d=e.filter(h=>h.id===u)[0];i[d.period]=l}});const s=[];for(const o in i)i[o].forEach(c=>{s.push(c)});if(s.length>0){const o=await this._sdk.ClmmSDK.Position.getSipmlePositionList(s.map(a=>a.id));for(const a of s)for(const c of o)if(a.id===c.pos_object_id){a.clmm_position=c;break}}}catch(s){console.log(s)}for(const s in i){const o=`${t}_${s}_getPoolMarkerPositionList`;this.updateCache(o,i[s],Oe)}return i}async updateXCetusRewarderAndFee(t,e,n){const i=await this.calculateTotalPointsAfterMultiper(t,n);for(const r of e)await this.calculateXCetusRewarder(t,r,n.period,i);return e}async calculateXCetusRewarder(t,e,n,i){const r=await this.getPoolBonusInfo(t.rewarders.rewarder_handle,n),{fee_share_rate:s}=this.calculateFeeShareRate(t,e,i),o=O(s).mul(r.total_bonus);return e.is_redeemed?e.bonus_num="0":e.bonus_num=o.toString(),e.bonus_num}calculateFeeShareRate(t,e,n){const i=As.getBonusPercent(t.config,e.percent),r=O(e.point).mul(i),s=O(r).div(n);return e.point_after_multiplier=r.toString(),e.fee_share_rate=Number(s),{fee_share_rate:Number(s),points_after_multiper:r.toString()}}async calculateTotalPointsAfterMultiper(t,e){const n=await this.getPoolMarkerPositionList(t.whale_nfts.whale_nfts_handle,[e]);let i=O(0);const r=n[e.period];for(const s of r){const o=As.getBonusPercent(t.config,s.percent),a=O(s.point).mul(o);i=i.add(a)}return i.toString()}async calculateAllXCetusRewarder(t){const e=this._sdk.ClmmSDK.senderAddress;let n=O(0);const i=[];for(const r of t){const s=await this._sdk.MakerModule.getMakerPoolPeriods(r),o=await this._sdk.MakerModule.getPoolMarkerPositionList(r.whale_nfts.whale_nfts_handle,s),a=[];for(const c of s){const l=o[c.period].filter(u=>{var d;return e.length===0?!1:((d=u.clmm_position)==null?void 0:d.owner)===e});l.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(r,l,c),l.forEach(u=>{var d;((d=u.clmm_position)==null?void 0:d.position_status)===ov.Exists&&O(u.bonus_num).greaterThan(0)&&(n=n.add(u.bonus_num),a.includes(u.clmm_position.pos_object_id)||a.push(u.clmm_position.pos_object_id))}))}i.push({bonus_type:r.bonus_type,pool_id:r.pool_id,nft_ids:a})}return{claimtotal:n,claimRecord:i}}async getPoolBonusInfo(t,e,n=!1){const i=`${t}_${e}_getPoolBonusInfo`,r=this.getCache(i,n);if(r!==void 0)return r;const s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"u64",value:e.toString()}}),o=Qe(s),a=As.buildPoolBonusInfo(o);return this.updateCache(i,a,Mi),a}claimPayload(t){const{maker_bonus:e,xcetus:n}=this.sdk.sdkOptions,i=new X;return i.moveCall({target:`${e.published_at}::${uy}::claim`,typeArguments:[t.bonus_type],arguments:[i.pure(L(e).maker_config_id),i.pure(t.market_pool_id),i.pure(t.position_nft_id),i.pure(t.phase),i.pure(L(n).lock_manager_id),i.pure(L(n).xcetus_manager_id),i.pure(t.ve_nft_id)]}),i}claimAllPayload(t){const{maker_bonus:e,xcetus:n}=this.sdk.sdkOptions,i=new X;return t.whale_nfts.forEach(r=>{r.nft_ids.forEach(s=>{i.moveCall({target:`${e.published_at}::${uy}::claim_all`,typeArguments:[r.bonus_type],arguments:[i.object(L(e).maker_config_id),i.object(r.pool_id),i.object(s),i.object(L(n).lock_manager_id),i.object(L(n).xcetus_manager_id),i.object(t.ve_nft_id)]})})}),i}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},ha="router",vf="router",Kc=24*3600,Yd=1e3,Wi=1e11,Mo=class{static buildVeNFTDividendInfo(t){const e={id:t.id.id,ve_nft_id:t.name,rewards:[]};return t.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(r=>{i.push({coin_type:ce(r.fields.key.fields.name).source_address,amount:r.fields.value})}),e.rewards.push({period:Number(n.fields.key),rewards:i})}),e}static buildDividendManager(t){const e={id:t.id.id,dividends:{id:t.dividends.fields.id.id,size:t.dividends.fields.size},venft_dividends:{id:t.venft_dividends.fields.id.id,size:t.venft_dividends.fields.size},bonus_types:[],start_time:Number(t.start_time),interval_day:Number(t.interval_day),balances:{id:t.balances.fields.id.id,size:t.balances.fields.size},is_open:t.is_open};return t.bonus_types.forEach(n=>{e.bonus_types.push(ce(n.fields.name).source_address)}),e}static buildLockUpManager(t){return{id:t.id.id,balance:t.balance,treasury_manager:t.treasury_manager,extra_treasury:t.extra_treasury,lock_infos:{lock_handle_id:t.lock_infos.fields.id.id,size:Number(t.lock_infos.fields.size)},type_name:ci(t.type_name.fields.name),min_lock_day:Number(t.min_lock_day),max_lock_day:Number(t.max_lock_day),package_version:Number(t.package_version),max_percent_numerator:Number(t.max_percent_numerator),min_percent_numerator:Number(t.min_percent_numerator)}}static buildLockCetus(t){const e=t.fields,n={id:e.id.id,type:ce(t.type).source_address,locked_start_time:Number(e.locked_start_time),locked_until_time:Number(e.locked_until_time),cetus_amount:e.balance,xcetus_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/Kc,n}static getAvailableXCetus(t,e){let n=O(0);return e.forEach(i=>{n=n.add(i.xcetus_amount)}),O(t.xcetus_balance).sub(n).toString()}static getWaitUnLockCetuss(t){return t.filter(e=>!Mo.isLocked(e))}static getLockingCetuss(t){return t.filter(e=>Mo.isLocked(e))}static isLocked(t){return t.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(t){const e=new Set;return t.forEach(n=>{n.rewards.forEach(i=>{e.add(i.coin_type)})}),Array.from(e)}static getNextStartTime(t){const e=Date.now()/1e3,{start_time:n,interval_day:i}=t,r=Math.ceil((e-n)/(i*Kc));return n+r*i*Kc}},ZF=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getOwnerVeNFT(t,e=!0){const{xcetus:n}=this.sdk.sdkOptions,i=`${t}_getLockUpManagerEvent`,r=this.getCache(i,e);if(r!==void 0)return r;let s;const o=`${n.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:o}})).data.forEach(c=>{const l=ce(_r(c)).source_address;if(l===o&&c.data&&c.data.content){const{fields:u}=c.data.content;s={...Uh(c),id:u.id.id,index:u.index,type:l,xcetus_balance:u.xcetus_balance},this.updateCache(i,s,Oe)}}),s}async getOwnerLockCetuss(t){const{xcetus:e}=this.sdk.sdkOptions,n=[],i=`${e.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const s of r.data)if(ce(_r(s)).source_address===i&&s.data){const a=Mo.buildLockCetus(s.data.content);a.xcetus_amount=await this.getXCetusAmount(a.id),n.push(a)}return n}async getLockCetus(t){var n;const e=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0}});if((n=e.data)!=null&&n.content){const i=Mo.buildLockCetus(e.data.content);return i.xcetus_amount=await this.getXCetusAmount(i.id),i}}async getOwnerCetusCoins(t){return await this._sdk.ClmmSDK.getOwnerCoinAssets(t,this.buileCetusCoinType())}mintVeNFTPayload(){const{xcetus:t}=this.sdk.sdkOptions,e=new X;return e.moveCall({target:`${t.published_at}::${ha}::mint_venft`,typeArguments:[],arguments:[e.pure(L(t).xcetus_manager_id)]}),e}async convertPayload(t){const{xcetus:e}=this.sdk.sdkOptions,n=new X,i=this.buileCetusCoinType(),r=await Ye.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(t.amount),i);return t.venft_id===void 0?n.moveCall({target:`${e.published_at}::${ha}::mint_and_convert`,typeArguments:[],arguments:[n.object(L(e).lock_manager_id),n.object(L(e).xcetus_manager_id),r,n.pure(t.amount)]}):n.moveCall({target:`${e.published_at}::${ha}::convert`,typeArguments:[],arguments:[n.object(L(e).lock_manager_id),n.object(L(e).xcetus_manager_id),r,n.pure(t.amount),n.pure(t.venft_id)]}),n}redeemLockPayload(t){const{xcetus:e}=this.sdk.sdkOptions,n=new X;return n.moveCall({target:`${e.published_at}::${ha}::redeem_lock`,typeArguments:[],arguments:[n.pure(L(e).lock_manager_id),n.pure(L(e).xcetus_manager_id),n.pure(t.venft_id),n.pure(t.amount),n.pure(t.lock_day),n.pure(we)]}),n}redeemPayload(t){const{xcetus:e}=this.sdk.sdkOptions,n=new X;return n.moveCall({target:`${e.published_at}::${ha}::redeem`,typeArguments:[],arguments:[n.pure(L(e).lock_manager_id),n.pure(L(e).xcetus_manager_id),n.pure(t.venft_id),n.pure(t.lock_id),n.pure(we)]}),n}redeemDividendPayload(t,e){const{xcetus:n,xcetus_dividends:i}=this.sdk.sdkOptions,r=new X;return e.forEach(s=>{r.moveCall({target:`${n.published_at}::${vf}::redeem`,typeArguments:[s],arguments:[r.object(L(i).dividend_manager_id),r.object(t)]})}),r}redeemDividendV2Payload(t,e,n){const{xcetus_dividends:i}=this.sdk.sdkOptions;let r=new X;return e.filter(o=>n.includes(o)).length>0&&(r=this.redeemDividendXTokenPayload(t,r)),e.forEach(o=>{n.includes(o)||r.moveCall({target:`${i.published_at}::${vf}::redeem_v2`,typeArguments:[o],arguments:[r.object(L(i).dividend_manager_id),r.object(t),r.object(we)]})}),r}redeemDividendXTokenPayload(t,e){const{xcetus_dividends:n,xcetus:i}=this.sdk.sdkOptions,{xcetus_manager_id:r,lock_manager_id:s}=L(i),{dividend_manager_id:o}=L(n);return e=e===void 0?new X:e,e.moveCall({target:`${n.published_at}::${vf}::redeem_xtoken`,typeArguments:[],arguments:[e.object(s),e.object(r),e.object(o),e.object(t),e.object(we)]}),e}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(t=this._sdk.sdkOptions.xcetus.package_id,e="xcetus",n="XCETUS"){return`${t}::${e}::${n}`}cancelRedeemPayload(t){const{xcetus:e}=this.sdk.sdkOptions,n=new X;return n.moveCall({target:`${e.published_at}::${ha}::cancel_redeem_lock`,typeArguments:[],arguments:[n.pure(L(e).lock_manager_id),n.pure(L(e).xcetus_manager_id),n.pure(t.venft_id),n.pure(t.lock_id),n.pure(we)]}),n}async getInitConfigs(){var o,a;const{package_id:t}=this.sdk.sdkOptions.xcetus,e=`${t}_getInitFactoryEvent`,n=this.getCache(e);if(n!==void 0)return n;const i=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::xcetus::InitEvent`}))==null?void 0:o.data,r={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const l=c.parsedJson;l&&(r.xcetus_manager_id=l.xcetus_manager)});const s=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::locking::InitializeEvent`}))==null?void 0:a.data;return s.length>0&&s.forEach(c=>{const l=c.parsedJson;l&&(r.lock_manager_id=l.lock_manager)}),r.lock_manager_id.length>0&&(r.lock_handle_id=(await this.getLockUpManager(r.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(e,r,Oe),r}async getLockUpManager(t=L(this.sdk.sdkOptions.xcetus).lock_manager_id,e=!1){const n=`${t}_getLockUpManager`,i=this.getCache(n,e);if(i!==void 0)return i;const r=await this.sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Mo.buildLockUpManager(Qe(r));return this.updateCache(n,s,Oe),s}async getDividendConfigs(){var s;const{package_id:t}=this.sdk.sdkOptions.xcetus_dividends,e=`${t}_getDividendManagerEvent`,n=this.getCache(e);if(n!==void 0)return n;const i=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::dividend::InitEvent`}))==null?void 0:s.data,r={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(o=>{const a=o.parsedJson;a&&(r.dividend_manager_id=a.manager_id,r.dividend_admin_id=a.admin_id,r.dividend_settle_id=a.settle_id,this.updateCache(e,r,Oe))}),r}async getDividendManager(t=!1){const{dividend_manager_id:e}=L(this._sdk.sdkOptions.xcetus_dividends),n=`${e}_getDividendManager`,i=this.getCache(n,t);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=Qe(r),o=Mo.buildDividendManager(s);return this.updateCache(n,o,Oe),o}async getXcetusManager(t=!0){const{xcetus_manager_id:e}=L(this._sdk.sdkOptions.xcetus),n=`${e}_getXcetusManager`,i=this.getCache(n,t);if(i)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=Qe(r),o={id:s.id.id,index:Number(s.index),has_venft:{handle:s.has_venft.fields.id.id,size:s.has_venft.fields.size},nfts:{handle:s.nfts.fields.id.id,size:s.nfts.fields.size},total_locked:s.total_locked,treasury:s.treasury.fields.total_supply.fields.value};return this.updateCache(n,o),o}async getVeNFTDividendInfo(t,e){try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),i=Qe(n);return Mo.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(t,e){if(BigInt(t)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(L(this._sdk.sdkOptions.xcetus).lock_manager_id),i=O(Wi).mul(O(n.max_lock_day).sub(O(e))).mul(O(n.max_percent_numerator).sub(O(n.min_percent_numerator))).div(O(n.max_lock_day).sub(O(n.min_lock_day))),r=O(Wi).mul(O(n.max_percent_numerator)).sub(i).div(O(Yd)).div(Wi);return{amountOut:O(r).mul(O(t)).round().toString(),percent:r.toString()}}async reverseRedeemNum(t,e){if(BigInt(t)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(L(this._sdk.sdkOptions.xcetus).lock_manager_id),i=O(Wi).mul(O(n.max_lock_day).sub(O(e))).mul(O(n.max_percent_numerator).sub(O(n.min_percent_numerator))).div(O(n.max_lock_day).sub(O(n.min_lock_day))),r=O(Wi).mul(O(n.max_percent_numerator)).sub(i).div(O(Yd)).div(Wi);return{amountOut:O(t).div(r).toFixed(0,ne.ROUND_UP),percent:r.toString()}}async getXCetusAmount(t){const{lock_handle_id:e}=L(this._sdk.sdkOptions.xcetus),n=`${t}_getXCetusAmount`,i=this.getCache(n);if(i!==void 0)return i;try{const r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),s=Qe(r);if(s){const{xcetus_amount:o}=s.value.fields.value.fields;return this.updateCache(n,o,Oe),o}}catch{}return"0"}async getVeNftAmount(t,e){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),i=Qe(n);if(i){const{lock_amount:r,xcetus_amount:s}=i.value.fields.value.fields;return{lock_amount:r,xcetus_amount:s}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(t,e=!1){const i=(await this.getDividendManager()).dividends.id,r=`${i}_${t}_getPhaseDividendInfo`,s=this._sdk.getCache(r,e);if(s)return s;try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:t}}),a=Qe(o),c=a.value.fields.value.fields,l=c.redeemed_num.fields.contents.map(f=>({name:f.fields.key.fields.name,value:f.fields.value})),u=c.bonus_types.map(f=>f.fields.name),d=c.bonus.fields.contents.map(f=>({name:f.fields.key.fields.name,value:f.fields.value})),h={id:mr(o),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:l,is_settled:c.is_settled,bonus_types:u,bonus:d,phase_end_time:""};return this.updateCache(r,h),h}catch{}}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},HF="factory",Fi="oversubscribe_pool",mv=1e6,Ca=1e18,fa="router",kf="router",Su="router",dy={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function QF(t){return"master_address"in t}var GF="router",YF="vaults",XF=1e4,Zn=class{static buildIdoPoolImmutables(t){return{pool_address:Mn(t.pool_id),coin_type_sale:ce(t.sale_coin_type.name).full_address,coin_type_raise:ce(t.raise_coin_type.name).full_address,tick_spacing:Number(t.tick_spacing),total_supply:t.total_supply,min_purchase:t.min_purchase_amount,max_purchase:t.max_purchase_amount}}static buildIdoPool(t){const e=_r(t),n=ce(e),i=Qe(t);console.log("fields:",i);const r={pool_address:Mn(i.id.id),coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],tick_spacing:Number(i.tick_spacing),total_supply:i.total_supply,min_purchase:i.min_purchase_amount,max_purchase:i.max_purchase_amount},s={start_time:Number(i.duration_manager.fields.start_time),lock_up_duration:Number(i.duration_manager.fields.lock_up_duration),purchase_duration:Number(i.duration_manager.fields.purchase_duration),end_time:0};s.end_time=s.start_time+s.purchase_duration;const o={complete_raise_limit:i.complete_raise_limit,liquidity_injection_ratio:O(i.liquidity_injection_ratio).div(mv).toNumber(),current_sqrt_price_min:i.current_sqrt_price_min,current_sqrt_price_max:i.current_sqrt_price_max,owner:i.owner,sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,price:i.price,current_price:i.price,duration_summary:s,is_cancelled:i.is_cancelled,is_liquidity_injected:i.is_liquidity_injected,liquidity_used_raise_amount:i.liquidity_used_raise_amount,liquidity_used_sale_amount:i.liquidity_used_sale_amount,purchase_summary:{size:Number(i.purchase_manager.fields.purchases.fields.size),purchase_handle:i.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:i.total_purchase_amount,white_summary:{white_list_id:i.white_list.fields.id.id,protection_limit_used:i.white_list.fields.protection_limit_used,protection_hard_cap:i.white_list.fields.protection_hard_cap,white_handle:i.white_list.fields.addresses.fields.id.id,size:Number(i.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:i.is_withdrawn};return Zn.updatePoolStatus(o),{...r,...o}}static is_init_period(t){return Number(O(Date.now()/1e3).toFixed(0))<t.start_time}static is_purchase_period(t){const e=Number(O(Date.now()/1e3).toFixed(0));return e>=t.start_time&&e<=t.start_time+t.purchase_duration}static is_claim_period(t){const e=Number(O(Date.now()/1e3).toFixed(0)),n=t.start_time+t.purchase_duration;return e>n}static is_can_inject_liquidity(t){return!t.is_cancelled&&t.liquidity_injection_ratio!==0&&Zn.is_claim_period(t.duration_summary)&&!t.is_liquidity_injected}static is_can_withdraw(t){return t.is_withdrawn?!1:Zn.is_sale_failed(t)?!0:(t.liquidity_injection_ratio===0||t.is_liquidity_injected)&&Zn.is_claim_period(t.duration_summary)}static is_sale_failed(t){return!!(t.is_cancelled||Zn.is_claim_period(t.duration_summary)&&O(t.total_purchase_amount).lessThan(t.complete_raise_limit))}static buildPurchaseInfo(t){return{...t.value.fields.value.fields,owner:t.name}}static calculateRedeemAmount(t,e){let n,i;if(Zn.is_sale_failed(t))n="0",i="0";else if(e.is_redeemed)n=e.obtained_sale_amount,i=e.used_raise_amount;else if(O(t.total_purchase_amount).lessThanOrEqualTo(t.max_raise_amount))n=O(e.purchased_raise_amount).mul(Ca).div(t.price).toString(),i=e.purchased_raise_amount;else{const s=Zn.redeemForSaleOversubcribeV2(t,e);n=s.user_obtained_sale_amount,i=s.user_used_raise_amount_ceil}n=ne.floor(n);const r=ne.floor(O(e.purchased_raise_amount).sub(i).toString());return{obtained_sale_amount:n,refunded_raise_amount:r}}static calculateWithdrawAmount(t){let e,n;const i=O(t.total_supply).mul(t.liquidity_injection_ratio);if(Zn.is_sale_failed(t))e="0",n=O(i).add(t.total_supply);else{const{max_raise_amount:r}=t;O(t.total_purchase_amount).greaterThanOrEqualTo(r)?(e=O(r).sub(t.liquidity_used_raise_amount).toString(),n="0"):(e=O(t.total_purchase_amount).sub(t.liquidity_used_raise_amount),n=O(t.total_supply).add(i).sub(t.liquidity_used_sale_amount).sub(Zn.get_sold_amount(t)))}return{obtained_raise_amount:ne.floor(e).toString(),refunded_sale_amount:ne.ceil(n).toString()}}static get_sold_amount(t){return O(t.total_purchase_amount).greaterThanOrEqualTo(t.max_raise_amount)?t.total_supply:O(t.total_purchase_amount).mul(Ca).div(t.price)}static redeemForSaleOversubcribe(t,e){const n=e.protection_raise_amount,i=O(e.purchased_raise_amount).sub(n),r=t.max_raise_amount,{protection_limit_used:s}=t.white_summary,o=O(r).sub(s),a=O(t.total_purchase_amount).sub(s),c=ne.ceil(i.mul(o).div(a).add(n)),l=ne.floor(i.mul(o).div(a).add(n));return{user_obtained_sale_amount:ne.floor(O(t.total_supply).mul(l).div(r)),user_used_raise_amount_ceil:c}}static redeemForSaleOversubcribeV2(t,e){const n=e.protection_raise_amount,i=O(e.purchased_raise_amount).sub(n),r=t.max_raise_amount,{protection_limit_used:s}=t.white_summary,o=O(r).sub(s),a=O(t.total_purchase_amount).sub(s),c=O(n).mul(a).add(O(i).mul(o)).mul(Ca).div(O(a).mul(t.price)),l=ne.ceil(c.mul(t.price).div(Ca));return{user_obtained_sale_amount:c,user_used_raise_amount_ceil:l}}static raiseTotalAmount(t){const e=O(t.sale_decimals-t.raise_decimals).abs().toNumber();return t.sale_decimals>t.raise_decimals?O(t.total_supply).mul(t.current_price).div(O(10).pow(O(e))).toString():O(t.total_supply).mul(t.current_price).mul(O(10).pow(O(e))).toString()}static updatePoolStatus(t){const e=Number(O(Date.now()/1e3).toFixed(0)),n=t.duration_summary,i=n.start_time+n.purchase_duration;t.is_cancelled?t.pool_status="Canceled":e<n.start_time?t.pool_status="Upcoming":e>n.start_time&&e<i?t.pool_status="Live":O(t.total_purchase_amount).lessThan(t.complete_raise_limit)?t.pool_status="Failed":t.pool_status="Ended"}static async calculatePoolUiPrice(t,e){const n=await t.ClmmSDK.CetusConfig.getTokenListByCoinTypes([e.coin_type_sale,e.coin_type_raise]),i=n[e.coin_type_sale].decimals,r=n[e.coin_type_raise].decimals;e.current_price=Br.priceFixToReal(Number(O(e.price).div(O(Ca)).toString()),i,r).toString(),e.sale_decimals=i,e.raise_decimals=r,e.max_raise_amount=this.raiseTotalAmount(e)}},No=class{static buildVeNFTDividendInfo(t){const e={id:t.id.id,ve_nft_id:t.name,rewards:[]};return t.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(r=>{i.push({coin_type:ce(r.fields.key.fields.name).source_address,amount:r.fields.value})}),e.rewards.push({period:Number(n.fields.key),rewards:i})}),e}static buildDividendManager(t){const e={id:t.id.id,dividends:{id:t.dividends.fields.id.id,size:t.dividends.fields.size},venft_dividends:{id:t.venft_dividends.fields.id.id,size:t.venft_dividends.fields.size},bonus_types:[],start_time:Number(t.start_time),interval_day:Number(t.interval_day),balances:{id:t.balances.fields.id.id,size:t.balances.fields.size},is_open:t.is_open};return t.bonus_types.forEach(n=>{e.bonus_types.push(ce(n.fields.name).source_address)}),e}static buildLockUpManager(t){return{id:t.id.id,balance:t.balance,treasury_manager:t.treasury_manager,extra_treasury:t.extra_treasury,lock_infos:{lock_handle_id:t.lock_infos.fields.id.id,size:Number(t.lock_infos.fields.size)},type_name:ci(t.type_name.fields.name),min_lock_day:Number(t.min_lock_day),max_lock_day:Number(t.max_lock_day),package_version:Number(t.package_version),max_percent_numerator:Number(t.max_percent_numerator),min_percent_numerator:Number(t.min_percent_numerator)}}static buildLockToken(t){const e=t.fields,n={id:e.id.id,type:ce(t.type).source_address,locked_start_time:Number(e.locked_start_time),locked_until_time:Number(e.locked_until_time),token_amount:e.balance,xtoken_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/Kc,n}static getAvailableXToken(t,e){let n=O(0);return e.forEach(i=>{n=n.add(i.xtoken_amount)}),O(t.xtoken_balance).sub(n).toString()}static getWaitUnLockTokens(t){return t.filter(e=>!No.isLocked(e))}static getLockingTokens(t){return t.filter(e=>No.isLocked(e))}static buildDividendRewardTypeList(t){const e=new Set;return t.forEach(n=>{n.rewards.forEach(i=>{e.add(i.coin_type)})}),Array.from(e)}static isLocked(t){return t.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(t,e=Kc){const n=Date.now()/1e3,{start_time:i,interval_day:r}=t,s=Math.ceil((n-i)/(r*e));return i+s*r*e}},ns=class{static getDefaultStrategyConfig(t){let e;switch(t){case 4:e=dy.bidAsk;break;default:e=dy.curve;break}return e}static geTickIndexRange(t,e,n,i){let r,s;switch(t=Fe.getInitializableTickIndex(t,e),i){case"left":t>0?(s=O(t).sub(e).toNumber(),r=O(t).mul(O(1).add(n)).toDecimalPlaces(0).toNumber()):(s=O(t).sub(e).toNumber(),r=O(t).mul(O(1).sub(n)).toDecimalPlaces(0).toNumber());break;case"right":t>0?(s=O(t).mul(O(1).add(n)).toDecimalPlaces(0).toNumber(),r=O(t).add(e).toNumber()):(s=O(t).mul(O(1).sub(n)).toDecimalPlaces(0).toNumber(),r=O(t).add(e).toNumber());break;default:t>0?(r=O(t).mul(O(1).sub(n)).toDecimalPlaces(0).toNumber(),s=O(t).mul(O(1).add(n)).toDecimalPlaces(0).toNumber()):(r=O(t).mul(O(1).add(n)).toDecimalPlaces(0).toNumber(),s=O(t).mul(O(1).sub(n)).toDecimalPlaces(0).toNumber());break}if(r=Fe.getInitializableTickIndex(r,e),s=Fe.getInitializableTickIndex(s,e),r<XP)throw Error("Tick lower value is below the minimum allowed value.");if(s>YP)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:r,tick_upper:s}}static getCreateLiquidityBins(t,e){let n=[];switch(e){case 4:n=ns.getCreateBidAskLiquidityBins(t);break;default:n=ns.getCreateCurveLiquidityBins(t);break}return n}static getCreateBidAskLiquidityBins(t){const e=O(Math.floor(O(t.tick_upper).sub(t.tick_lower).div(t.div_width).toNumber())).abs(),n=[],i=t.ratios;let r,s;for(let o=0;o<i.length;o++){let a,c;t.tick_upper<=t.curr_tick?(c=O(t.tick_upper).sub(e.mul(o)).toNumber(),a=O(c).sub(e).toNumber()):t.tick_lower>=t.curr_tick?(a=O(t.tick_lower).add(e.mul(o)).toNumber(),c=O(t.tick_lower).add(e.mul(o+1)).toNumber()):o===4?(a=O(t.tick_lower).add(e.mul(o)).toNumber(),c=O(a).add(e.mul(2)).toNumber()):o>4?(a=O(t.tick_lower).add(e.mul(o+1)).toNumber(),c=O(a).add(e).toNumber()):(a=O(t.tick_lower).add(e.mul(o)).toNumber(),c=O(a).add(e).toNumber()),r=Fe.getInitializableTickIndex(a,t.tick_spacing),s=Fe.getInitializableTickIndex(c,t.tick_spacing),n.push({tick_lower:r,tick_upper:s,ratio:i[o],liquidity:"0"})}return n}static getCreateCurveLiquidityBins(t){const e=O(Math.floor(O(t.tick_upper).sub(t.tick_lower).div(t.div_width).toNumber())).abs(),n=[],i=t.ratios;for(let r=0;r<i.length;r++){let s,o;t.tick_upper<=t.curr_tick?(o=t.tick_upper,s=O(t.tick_upper).sub(e.mul(r+1)).toNumber()):t.tick_lower>=t.curr_tick?(s=t.tick_lower,o=O(s).add(e.mul(r+1)).toNumber()):(s=O(t.curr_tick).sub(e.mul(r+1)).toNumber(),o=O(t.curr_tick).add(e.mul(r+1)).toNumber()),n.push({tick_lower:Fe.getInitializableTickIndex(s,t.tick_spacing),tick_upper:Fe.getInitializableTickIndex(o,t.tick_spacing),ratio:i[r],liquidity:"0"})}return n}static calculateAddLiquidityInputs(t){const e=new A(Fe.tickIndexToSqrtPriceX64(t.curr_tick)),n=ns.calculateCoinRatios(t.curr_tick,t.liquidity_bins),i=t.liquidity_bins.map((r,s)=>{const o=n[s],a=O(t.coin_amount).mul(t.fix_amount_a?o.coinRatioA:o.coinRatioB).toFixed(0).toString();try{return{...bn.estLiquidityAndcoinAmountFromOneAmounts(r.tick_lower,r.tick_upper,new A(a),t.fix_amount_a,!0,t.slippage,e),...r}}catch{return{coinAmountA:new A(0),coinAmountB:new A(0),tokenMaxA:new A(0),tokenMaxB:new A(0),liquidityAmount:new A(0),fix_amount_a:!t.fix_amount_a,...r}}});return ns.fixLiquidityInputs(e,t.slippage,i,!0)}static fixLiquidityInputs(t,e,n,i){const r=n.filter(o=>o.liquidityAmount.gt($e));if(r.length===0)return[];const s=r[0];return n.map(o=>{if(o.liquidityAmount.eq($e)){const a=O(s.liquidityAmount.toString()).mul(o.ratio).div(s.ratio).toFixed(0),c=Fe.tickIndexToSqrtPriceX64(o.tick_lower),l=Fe.tickIndexToSqrtPriceX64(o.tick_upper),u=bn.getCoinAmountFromLiquidity(new A(a.toString()),t,c,l,!1);return{coinAmountA:u.coinA,coinAmountB:u.coinB,liquidityAmount:new A(a.toString()),fix_amount_a:o.fix_amount_a,...wf(u,Wc.fromDecimal(O(e).mul(100)),i)}}return o})}static calculateCoinRatios(t,e){const n=new A(Fe.tickIndexToSqrtPriceX64(t)),i=[];let r=O(0),s=O(0);const o=e.map(l=>{const u=O(xF(100,6).toString()).mul(l.ratio).toFixed(0).toString(),d=Fe.tickIndexToSqrtPriceX64(l.tick_lower),h=Fe.tickIndexToSqrtPriceX64(l.tick_upper),f=bn.getCoinAmountFromLiquidity(new A(u),n,d,h,!0);return r=r.add(f.coinA.toString()),s=s.add(f.coinB.toString()),{...f,liquidity:u}}),a=[],c=[];return o.forEach((l,u)=>{const d={coinRatioA:r.eq(O(0))?0:O(l.coinA.toString()).div(r).toNumber(),coinRatioB:s.eq(O(0))?0:O(l.coinB.toString()).div(s).toNumber(),liquiditys:l.liquidity,tick_lower:e[u].tick_lower,tick_upper:e[u].tick_upper};i.push(d),a.push(r.eq(O(0))?0:O(l.coinA.toString()).div(r).toNumber()),c.push(s.eq(O(0))?0:O(l.coinB.toString()).div(s).toNumber())}),i}static calculateCloseMasterLiquidityInputs(t){const e=new A(Fe.tickIndexToSqrtPriceX64(t.curr_tick));return t.positions.map(i=>{const r=new A(i.liquidity),s=Fe.tickIndexToSqrtPriceX64(i.tick_lower_index),o=Fe.tickIndexToSqrtPriceX64(i.tick_upper_index),a=bn.getCoinAmountFromLiquidity(r,e,s,o,!1),c=Wc.fromDecimal(O(t.slippage).mul(100)),{tokenMaxA:l,tokenMaxB:u}=wf(a,c,!1);return{coinAmountA:a.coinA,coinAmountB:a.coinB,tokenMaxA:l,tokenMaxB:u,liquidityAmount:r,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(t){const e=new A(Fe.tickIndexToSqrtPriceX64(t.curr_tick)),{fix_token:n}=t;if(n){const r=t.positions.map((a,c)=>({tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,ratio:t.ratios[c]})),s=ns.calculateCoinRatios(t.curr_tick,r),o=t.positions.map((a,c)=>{const l=s[c],u=O(n.coin_amount).mul(n.fix_amount_a?l.coinRatioA:l.coinRatioB).toFixed(0).toString();try{const d=bn.estLiquidityAndcoinAmountFromOneAmounts(a.tick_lower_index,a.tick_upper_index,new A(u),n.fix_amount_a,!1,t.slippage,e);return{...d,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:d.liquidityAmount.toString(),ratio:t.ratios[c]}}catch{return{coinAmountA:new A(0),coinAmountB:new A(0),tokenMaxA:new A(0),tokenMaxB:new A(0),liquidityAmount:new A(0),fix_amount_a:!n.fix_amount_a,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:"0",ratio:t.ratios[c]}}});return ns.fixLiquidityInputs(e,t.slippage,o,!1)}return t.positions.map((r,s)=>{const o=t.ratios[s];let a=O(t.liquidity).mul(o).toFixed(0);O(a).greaterThan(r.liquidity)&&(a=r.liquidity);const c=Fe.tickIndexToSqrtPriceX64(r.tick_lower_index),l=Fe.tickIndexToSqrtPriceX64(r.tick_upper_index),u=bn.getCoinAmountFromLiquidity(new A(a),e,c,l,!1),d=Wc.fromDecimal(O(t.slippage).mul(100)),{tokenMaxA:h,tokenMaxB:f}=wf(u,d,!1);return{coinAmountA:u.coinA,coinAmountB:u.coinB,tokenMaxA:h,tokenMaxB:f,liquidityAmount:new A(a),fix_amount_a:!1}})}static buildMasterPosition(t){return{coin_type_a:ce(t.coin_type_a.fields.name).full_address,coin_type_b:ce(t.coin_type_b.fields.name).full_address,description:t.description,id:t.id.id,index:t.index,liquidity:t.liquidity,name:t.name,pool:t.pool,tick_lower_index:gn(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:gn(BigInt(t.tick_upper_index.fields.bits)),url:t.url}}static buildMasterNFT(t){const e=Qe(t);if(e){const n={id:e.id.id,pool_id:e.pool_id,index:Number(e.index),strategy:Number(e.strategy),tick_lower_index:gn(BigInt(e.tick_lower_index)),tick_upper_index:gn(BigInt(e.tick_upper_index)),positions:[],...Uh(t)};return n.positions=e.positions.map(i=>ns.buildMasterPosition(i.fields)),n}}},xr=class{static generateNextTickRange(t,e,n){const i=t-e/2,r=t+e/2;return{new_tick_lower:xr.getValidTickIndex(i,n),new_tick_upper:xr.getValidTickIndex(r,n)}}static calculateDepositRatio(t,e,n){const i=Fe.sqrtPriceX64ToTickIndex(n);if(i<t)return{ratioA:new ne(1),ratioB:new ne(0)};if(i>e)return{ratioA:new ne(0),ratioB:new ne(1)};const r=new A(1e8),{coinAmountB:s}=bn.estLiquidityAndcoinAmountFromOneAmounts(t,e,r,!0,!0,0,n),o=Fe.sqrtPriceX64ToPrice(n,0,0),a=O(r.toString()).mul(o),c=a.add(s.toString()),l=a.div(c),u=O(s.toString()).div(c);return{ratioA:l,ratioB:u}}static getValidTickIndex(t,e){if(t%e===0)return t;let n;if(t>0?n=t-t%e+e:t<0?n=t+Math.abs(t)%e-e:n=t,n%e!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(n)<Math.abs(t))throw new Error("Assertion failed: res.abs() >= tickIndex");return n}static get_lp_amount_by_liquidity(t,e){return t.total_supply==="0"?"0":O(t.total_supply).mul(e).div(t.liquidity).toFixed(0,ne.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(t,e){return t.total_supply==="0"?"0":O(e).mul(t.liquidity).div(t.total_supply).toFixed(0,ne.ROUND_DOWN).toString()}static get_protocol_fee_amount(t,e){return O(e).mul(t.protocol_fee_rate).div(XF).toFixed(0,ne.ROUND_CEIL)}static buildFramsPositionNFT(t){const e=t.clmm_postion.fields;return{id:t.id.id,url:e.url,pool_id:t.pool_id,coinTypeA:ce(e.coin_type_a.fields.name).full_address,coinTypeB:ce(e.coin_type_b.fields.name).full_address,description:e.description,name:e.name,liquidity:e.liquidity,clmm_position_id:e.id.id,clmm_pool_id:e.pool,tick_lower_index:gn(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:gn(BigInt(e.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(t){const e=Qe(t),n=dc(t),{positions:i}=e;if(e&&i.length>0){const r=xr.buildFramsPositionNFT(i[0].fields);return{id:e.id.id,pool_id:e.pool,protocol_fee_rate:e.protocol_fee_rate,is_pause:e.is_pause,harvest_assets:{harvest_assets_handle:e.harvest_assets.fields.id.id,size:Number(e.harvest_assets.fields.size)},lp_token_type:ce(n).type_arguments[0],total_supply:e.lp_token_treasury.fields.total_supply.fields.value,liquidity:e.liquidity,max_quota:e.max_quota,status:e.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:e.quota_based_type.fields.name,position:r}}}},Tu=class{static calculatePositionShare(t,e,n,i,r,s,o){if(e<=r||t>=s)return"0";let a=0;t<r?a=r:a=t;let c=0;e<s?c=e:c=s;const l=Fe.tickIndexToSqrtPriceX64(a),u=Fe.tickIndexToSqrtPriceX64(c),{coinA:d,coinB:h}=bn.getCoinAmountFromLiquidity(new A(n),new A(o),l,u,!0);return O(d.toString()).mul(i).div(1e12).add(h.toString()).toString()}static buildFramsPool(t){const e=Qe(t);if(e)try{const n=[];return e.rewarders.forEach(r=>{n.push({reward_coin:ce(r.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:e.id.id,clmm_pool_id:e.clmm_pool_id,effective_tick_lower:gn(BigInt(e.effective_tick_lower.fields.bits)),effective_tick_upper:gn(BigInt(e.effective_tick_upper.fields.bits)),total_share:e.total_share,rewarders:n,positions:{positions_handle:e.positions.fields.id.id,size:e.positions.fields.size},sqrt_price:e.sqrt_price}}catch(n){console.log(n)}}static buildFramsPositionNFT(t){const e=Qe(t);if(e){const n=e.clmm_postion.fields;return{id:e.id.id,url:n.url,pool_id:e.pool_id,coinTypeA:ce(n.coin_type_a.fields.name).full_address,coinTypeB:ce(n.coin_type_b.fields.name).full_address,description:n.description,name:n.name,liquidity:n.liquidity,clmm_position_id:n.id.id,clmm_pool_id:n.pool,tick_lower_index:gn(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:gn(BigInt(n.tick_upper_index.fields.bits)),rewards:[]}}}},JF=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getPoolImmutables(t="all",e=!1){const{package_id:n}=this._sdk.sdkOptions.ido,i=`${n}_getPoolImmutables`,r=this.getCache(i,e),s={data:[],hasNextPage:!1},o=[];if(r!==void 0&&o.push(...r),o.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::oversubscribe_pool::CreatePoolEvent`},t);a.data.forEach(c=>{const l=c.parsedJson;if(l){const u=Zn.buildIdoPoolImmutables(l);o.push(u)}}),s.hasNextPage=a.hasNextPage,s.nextCursor=a.nextCursor,this.updateCache(i,o,Oe)}catch(a){console.log("getPoolImmutables",a)}return s.data=o,s}async getPools(t=[],e=!1){const n=[];let i=[];t.length>0?i=[...t]:(await this.getPoolImmutables("all",e)).data.forEach(o=>{i.push(o.pool_address)});const r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0});for(const s of r){const o=Zn.buildIdoPool(s);await Zn.calculatePoolUiPrice(this._sdk,o),n.push(o);const a=`${o.pool_address}_getPoolObject`;this.updateCache(a,o,Oe)}return n}async getPool(t,e=!0){const n=`${t}_getPoolObject`,i=this.getCache(n,e);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showType:!0}}),s=Zn.buildIdoPool(r);return await Zn.calculatePoolUiPrice(this._sdk,s),this.updateCache(n,s),s}async getIdoConfigs(t=!1){var c;const{package_id:e}=this._sdk.sdkOptions.ido,n=`${e}_getInitEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),s=Ol(r),o=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:s}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",package_version_id:""};return o.length>0&&(o.forEach(l=>{console.log("item: ",l);const u=l.parsedJson;if(u)switch(ce(l.type).full_address){case`${e}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.package_version_id=u.package_version_id;break;case`${e}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(n,a,Oe)),a}async getPurchaseInfo(t,e,n=!0){const i=`${t}_${e}_getPurchaseInfo`,r=this.getCache(i,n);if(r)return r;try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"address",value:e}}),o=Zn.buildPurchaseInfo(Qe(s));return this.updateCache(i,o,Mi),o}catch{return}}async getLockNFT(t,e=!1){const n=`${t}_getLockNFT`,i=this.getCache(n,e);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!r.error)return Za(r)}async getLockNFTList(t){var r;const{clmm_pool:e}=this._sdk.ClmmSDK.sdkOptions,{ido:n}=this._sdk.sdkOptions,i=[];try{const s=(r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{filter:{StructType:`${n.package_id}::lock::LockedNFT<${e.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:r.data;for(const o of s){const a=Qe(o);if(a){const c=a.nft.fields,l={locked_at:Number(a.locked_at),lock_duration:Number(a.lock_duration),lock_nft_id:a.id.id,type:a.nft.type,...c};l.end_lock_time=l.locked_at+l.lock_duration,l.coin_type_a=ce(c.coin_type_a.fields.name).full_address,l.coin_type_b=ce(c.coin_type_b.fields.name).full_address,l.id=c.id.id,l.tick_lower_index=gn(BigInt(c.tick_lower_index.fields.bits)),l.tick_upper_index=gn(BigInt(c.tick_upper_index.fields.bits)),i.push(l)}}return i}catch(s){return console.log("getLockNFTList:",s),[]}}async creatPool(t){const{ido:e}=this.sdk.sdkOptions;_p(lt(t.coin_type_sale),lt(t.coin_type_raise))&&(t.price_min=O(1).div(t.price_max).toNumber(),t.price_max=O(1).div(t.price_min).toNumber());const i=Br.priceRealToFix(Number(t.price),t.sale_decimals,t.raise_decimals),r=Fe.priceToSqrtPriceX64(O(t.price_min),t.sale_decimals,t.raise_decimals).toString(),s=Fe.priceToSqrtPriceX64(O(t.price_max),t.sale_decimals,t.raise_decimals).toString(),o=new X,a=O(t.total_supply).add(O(t.total_supply).mul(O(t.liquidity_injection_ratio))).toNumber(),c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,t.coin_type_sale),l=Ye.buildCoinForAmount(o,c,BigInt(a),t.coin_type_sale,!1),u=[o.pure(L(e).admin_cap_id),o.pure(L(e).package_version_id),o.pure(L(e).pools_id),o.pure(lt(t.owner)),o.pure(O(i).mul(Ca).toString()),o.pure(t.total_supply),o.pure(t.complete_raise_limit),o.pure(t.min_purchase_amount),o.pure(t.max_purchase_amount),o.pure(t.start_time),o.pure(t.purchase_duration),o.pure(t.lock_up_duration),o.pure((t.liquidity_injection_ratio*mv).toString()),o.pure(r),o.pure(s),o.pure(t.tick_spacing.toString()),l.targetCoin,o.pure(t.protection_hard_cap.toString()),o.pure(we)],d=[t.coin_type_sale,t.coin_type_raise];return o.moveCall({target:`${e.published_at}::${HF}::create_oversubscribe_pool`,typeArguments:d,arguments:u}),o}async creatPurchasePayload(t){const{ido:e}=this.sdk.sdkOptions,n=new X,i=await this.getPurchaseInfo(t.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,t.coin_type_raise),s=Ye.buildCoinForAmount(n,r,BigInt(t.raise_amount),t.coin_type_raise,!1),o=[t.coin_type_sale,t.coin_type_raise];let a,c;return i?(c="purchase",a=[n.object(L(e).package_version_id),n.object(t.pool_address),n.object(i.purchase_certificate_id),n.pure(t.raise_amount.toString()),s.targetCoin,n.pure(we)]):(c="create_certificate_and_purchase",a=[n.object(L(e).package_version_id),n.object(t.pool_address),n.pure(t.raise_amount.toString()),s.targetCoin,n.pure(we)]),n.moveCall({target:`${e.published_at}::${Fi}::${c}`,typeArguments:o,arguments:a}),n}async redeemPayload(t){const{ido:e}=this.sdk.sdkOptions,n=await this.getPurchaseInfo(t.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(n===void 0)throw Error("get purchase certificate fail");const i=new X,r=[t.coin_type_sale,t.coin_type_raise],s=[i.pure(L(e).package_version_id),i.pure(t.pool_address),i.pure(n.purchase_certificate_id),i.pure(we)];return i.moveCall({target:`${e.published_at}::${Fi}::redeem`,typeArguments:r,arguments:s}),i}injectLiquidityPayload(t){const{ido:e}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new X,r=[t.coin_type_sale,t.coin_type_raise],s=t.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",o=[i.pure(L(e).package_version_id),i.pure(t.pool_address),i.pure(L(n).global_config_id),i.pure(t.clmm_pool_address),i.pure(we)];return i.moveCall({target:`${e.published_at}::${Fi}::${s}`,typeArguments:r,arguments:o}),i}unPauseInjectLiquidity(t){const{ido:e}=this.sdk.sdkOptions,{integrate:n,clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,r=new X;r.moveCall({target:`${n.published_at}::${Vc}::unpause_pool`,typeArguments:[t.coin_type_a,t.coin_type_b],arguments:[r.object(L(i).global_config_id),r.object(t.clmm_pool_address)]});const s=[t.coin_type_sale,t.coin_type_raise],o=t.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[r.object(L(e).package_version_id),r.object(t.pool_address),r.object(L(i).global_config_id),r.object(t.clmm_pool_address),r.object(we)];return r.moveCall({target:`${e.published_at}::${Fi}::${o}`,typeArguments:s,arguments:a}),r}async findClmmPoolForLiquidity(t){let e=null,n=!1;const i=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(const r of i){if(r.coinTypeA===t.coin_type_sale&&r.coinTypeB===t.coin_type_raise&&Number(r.tickSpacing)===t.tick_spacing){e=await this._sdk.ClmmSDK.Pool.getPool(r.poolAddress);break}if(r.coinTypeA===t.coin_type_raise&&r.coinTypeB===t.coin_type_sale&&Number(r.tickSpacing)===t.tick_spacing){e=await this._sdk.ClmmSDK.Pool.getPool(r.poolAddress),n=!0;break}}return e&&(O(e.current_sqrt_price).lessThanOrEqualTo(t.current_sqrt_price_min)||O(e.current_sqrt_price).greaterThanOrEqualTo(t.current_sqrt_price_max))?(console.log("clmmPool: ",e.poolAddress),{is_reverse:n,clmmPool:null}):{is_reverse:n,clmmPool:e}}withdrawPayload(t){const{ido:e}=this.sdk.sdkOptions,n=new X,i=[t.coin_type_sale,t.coin_type_raise],r=[n.object(L(e).package_version_id),n.object(t.pool_address),n.object(we)];return n.moveCall({target:`${e.published_at}::${Fi}::withdraw`,typeArguments:i,arguments:r}),n}updateWhitelistCapPayload(t){const{ido:e}=this.sdk.sdkOptions,n=new X,i=[t.coin_type_sale,t.coin_type_raise];return t.add_whites&&t.add_whites.addresses.length>0&&n.moveCall({target:`${e.published_at}::${Fi}::add_white_listed_addresses`,typeArguments:i,arguments:[n.object(L(e).admin_cap_id),n.object(L(e).package_version_id),n.object(t.pool_address),n.makeMoveVec({type:"address",objects:t.add_whites.addresses.map(r=>n.object(Mn(r)))}),n.pure(t.add_whites.protection_limit),n.object(we)]}),t.remove_whites&&t.remove_whites.length>0&&n.moveCall({target:`${e.published_at}::${Fi}::remove_white_listed_addresses`,typeArguments:i,arguments:[n.object(L(e).admin_cap_id),n.object(L(e).package_version_id),n.object(t.pool_address),n.makeMoveVec({type:"address",objects:t.remove_whites.map(r=>n.object(Mn(r)))}),n.object(we)]}),t.update_whites&&t.update_whites.forEach(r=>{n.moveCall({target:`${e.published_at}::${Fi}::update_white_listed_address`,typeArguments:i,arguments:[n.object(L(e).admin_cap_id),n.object(L(e).package_version_id),n.object(t.pool_address),n.object(r.address),n.pure(r.protection_limit),n.object(we)]})}),n}creatCancelPoolPayload(t){const{ido:e}=this.sdk.sdkOptions,n=new X,i=[t.coin_type_sale,t.coin_type_raise],r=[n.pure(L(e).admin_cap_id),n.pure(L(e).package_version_id),n.pure(t.pool_address),n.pure(we)];return n.moveCall({target:`${e.published_at}::${Fi}::cancel`,typeArguments:i,arguments:r}),n}updatePoolOwnerPayload(t,e){const{ido:n}=this.sdk.sdkOptions;e=e===void 0?new X:e;const i=[t.coin_type_sale,t.coin_type_raise],r=[e.object(L(n).admin_cap_id),e.object(L(n).package_version_id),e.object(t.pool_address),e.object(t.new_owner),e.object(we)];return e.moveCall({target:`${n.published_at}::${Fi}::update_pool_owner`,typeArguments:i,arguments:r}),e}updatePoolDuractionPayload(t,e){const{ido:n}=this.sdk.sdkOptions;e=e===void 0?new X:e;const i=[t.coin_type_sale,t.coin_type_raise],r=[e.object(L(n).admin_cap_id),e.object(L(n).package_version_id),e.object(t.pool_address),e.pure(t.start_time),e.pure(t.purchase_duration),e.pure(t.lock_duration),e.object(we)];return e.moveCall({target:`${n.published_at}::${Fi}::update_pool_duration`,typeArguments:i,arguments:r}),e}updateProtectionHardCapPayload(t,e){const{ido:n}=this.sdk.sdkOptions;e=e===void 0?new X:e;const i=[t.coin_type_sale,t.coin_type_raise],r=[e.object(L(n).admin_cap_id),e.object(L(n).package_version_id),e.object(t.pool_address),e.pure(t.protection_hard_cap),e.object(we)];return e.moveCall({target:`${n.published_at}::${Fi}::update_protection_hard_cap`,typeArguments:i,arguments:r}),e}unlockNftPayload(t){const{ido:e}=this.sdk.sdkOptions,n=new X,i=[t.nft_type],r=[n.pure(t.lock_nft_id),n.pure(we)];return n.moveCall({target:`${e.published_at}::lock::unlock_nft`,typeArguments:i,arguments:r}),n}async isAdminCap(t){const{ido:e}=this._sdk.sdkOptions,n=`${e.package_id}_${t}_isAdminCap`,i=this.getCache(n);if(i)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:L(e).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(r);const s=dc(r),o=Qd(r);let a=!1;return o&&s&&ce(s).source_address===`${e.package_id}::config::AdminCap`&&(a=lt(o.AddressOwner)===lt(t)),this.updateCache(n,a,Oe),a}async getWhiteProtectionLimit(t,e,n=!0){const i=`${t}_${e}_getWhiteProtectionLimit`,r=this._sdk.getCache(i,n);if(r)return r;try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"address",value:e}});if(s&&s.data){const o=Qe(s);return this._sdk.updateCache(i,o.value),o.value}return}catch{return}}async getWhiteList(t,e){var i;const n={type:"address",value:e};try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:n}),s=Qe(r);if(console.log(s),s)return(i=s==null?void 0:s.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){const{ido:t}=this._sdk.sdkOptions,e=`${L(t).admin_cap_id}_getAdminAddress`,n=this.getCache(e);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:L(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(i);const r=dc(i),s=Qd(i);if(s&&r&&ce(r).source_address===`${t.package_id}::config::AdminCap`){const a=lt(s.AddressOwner);return this.updateCache(e,a,Oe),a}return""}updateCache(t,e,n=Oe){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},eU=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getOwnerVeNFT(t,e=!0){const{xtoken:n}=this.sdk.sdkOptions,i=`${t}_getLockUpManagerEvent`,r=this.getCache(i,e);if(r!==void 0)return r;let s;const o=`${n.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:o}})).data.forEach(c=>{const l=ce(_r(c)).source_address;if(l===o&&c.data&&c.data.content){const{fields:u}=c.data.content;s={...Uh(c),id:u.id.id,index:u.index,type:l,xtoken_balance:u.xtoken_balance},this.updateCache(i,s,Oe)}}),s}async getOwnerLockTokens(t){const{xtoken:e}=this.sdk.sdkOptions,n=[],i=`${e.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const s of r.data)if(ce(_r(s)).source_address===i&&s.data){const a=No.buildLockToken(s.data.content),c=await this.getLockXToken(a.id);c&&(a.xtoken_amount=c.xtoken_amount),n.push(a)}return n}async getLockToken(t){var n;const e=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0}});if((n=e.data)!=null&&n.content){const i=No.buildLockToken(e.data.content),r=await this.getLockXToken(i.id);return r&&(i.xtoken_amount=r.xtoken_amount),i}}async getOwnerTokenCoins(t){return await this._sdk.ClmmSDK.getOwnerCoinAssets(t,this.buileTokenCoinType())}mintVeNFTPayload(){const{xtoken:t}=this.sdk.sdkOptions,e=new X;return e.moveCall({target:`${t.published_at}::${fa}::mint_venft`,typeArguments:[],arguments:[e.pure(L(t).xtoken_manager_id)]}),e}async convertPayload(t){const{xtoken:e}=this.sdk.sdkOptions,n=new X,i=this.buileTokenCoinType(),r=await Ye.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(t.amount),i);return t.venft_id===void 0?n.moveCall({target:`${e.published_at}::${fa}::mint_and_convert`,typeArguments:[],arguments:[n.object(L(e).lock_manager_id),n.object(L(e).xtoken_manager_id),r,n.pure(t.amount)]}):n.moveCall({target:`${e.published_at}::${fa}::convert`,typeArguments:[],arguments:[n.object(L(e).lock_manager_id),n.object(L(e).xtoken_manager_id),r,n.pure(t.amount),n.pure(t.venft_id)]}),n}redeemLockPayload(t){const{xtoken:e}=this.sdk.sdkOptions,n=new X;return n.moveCall({target:`${e.published_at}::${fa}::redeem_lock`,typeArguments:[],arguments:[n.pure(L(e).lock_manager_id),n.pure(L(e).xtoken_manager_id),n.pure(t.venft_id),n.pure(t.amount),n.pure(t.lock_day),n.pure(we)]}),n}redeemPayload(t){const{xtoken:e}=this.sdk.sdkOptions,n=new X;return n.moveCall({target:`${e.published_at}::${fa}::redeem`,typeArguments:[],arguments:[n.pure(L(e).lock_manager_id),n.pure(L(e).xtoken_manager_id),n.pure(t.venft_id),n.pure(t.lock_id),n.pure(we)]}),n}redeemDividendPayload(t,e){const{xtoken_dividends:n}=this.sdk.sdkOptions,i=new X;return e.forEach(r=>{i.moveCall({target:`${n.published_at}::${kf}::redeem`,typeArguments:[r],arguments:[i.object(L(n).dividend_manager_id),i.object(t)]})}),i}redeemDividendV2Payload(t,e,n){const{xtoken_dividends:i}=this.sdk.sdkOptions;let r=new X;return e.filter(o=>n.includes(o)).length>0&&(r=this.redeemDividendXTokenPayload(t,r)),e.forEach(o=>{n.includes(o)||r.moveCall({target:`${i.published_at}::${kf}::redeem_v2`,typeArguments:[o],arguments:[r.object(L(i).dividend_manager_id),r.object(t),r.object(we)]})}),r}redeemDividendXTokenPayload(t,e){const{xtoken_dividends:n,xtoken:i}=this.sdk.sdkOptions,{xtoken_manager_id:r,lock_manager_id:s}=L(i),{dividend_manager_id:o}=L(n);return e=e===void 0?new X:e,e.moveCall({target:`${n.published_at}::${kf}::redeem_xtoken`,typeArguments:[],arguments:[e.object(s),e.object(r),e.object(o),e.object(t),e.object(we)]}),e}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(t=this._sdk.sdkOptions.xtoken.package_id,e="xtoken",n="XTOKEN"){return`${t}::${e}::${n}`}cancelRedeemPayload(t){const{xtoken:e}=this.sdk.sdkOptions,n=new X;return n.moveCall({target:`${e.published_at}::${fa}::cancel_redeem_lock`,typeArguments:[],arguments:[n.pure(L(e).lock_manager_id),n.pure(L(e).xtoken_manager_id),n.pure(t.venft_id),n.pure(t.lock_id),n.pure(we)]}),n}async getInitConfigs(){var o,a;const{package_id:t}=this.sdk.sdkOptions.xtoken,e=`${t}_getInitFactoryEvent`,n=this.getCache(e);if(n!==void 0)return n;const i=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::xtoken::InitEvent`}))==null?void 0:o.data,r={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const l=c.parsedJson;l&&(r.xtoken_manager_id=l.xtoken_manager)});const s=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::locking::InitializeEvent`}))==null?void 0:a.data;return s.length>0&&s.forEach(c=>{const l=c.parsedJson;l&&(r.lock_manager_id=l.lock_manager)}),r.lock_handle_id=(await this.getLockUpManager(r.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(e,r,Oe),r}async getLockUpManager(t=L(this.sdk.sdkOptions.xtoken).lock_manager_id,e=!1){const n=`${t}_getLockUpManagerEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const r=await this.sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=No.buildLockUpManager(Qe(r));return this.updateCache(n,s,Oe),s}async getLockInfoHandle(t){const e=`${t}_getLockInfoHandle`,n=this.getCache(e);if(n!==void 0)return n;let i="";const r=await this.sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Qe(r);return s&&(i=s.lock_infos.fields.id.id,this.updateCache(e,i,Oe)),i}async getDividendConfigs(){var s;const{package_id:t}=this.sdk.sdkOptions.xtoken_dividends,e=`${t}_getDividendManagerEvent`,n=this.getCache(e);if(n!==void 0)return n;const i=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::dividend::InitEvent`}))==null?void 0:s.data,r={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(o=>{const a=o.parsedJson;a&&(r.dividend_manager_id=a.manager_id,r.dividend_admin_id=a.admin_id,r.dividend_settle_id=a.settle_id,this.updateCache(e,r,Oe))}),r}async getDividendManager(t=!1){const{dividend_manager_id:e}=L(this.sdk.sdkOptions.xtoken_dividends),n=`${e}_getDividendManager`,i=this.getCache(n,t);if(i!==void 0)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=Qe(r),o=No.buildDividendManager(s);return this.updateCache(n,o,Oe),o}async getXcetusManager(t=!0){const{xtoken_manager_id:e}=L(this.sdk.sdkOptions.xtoken),n=`${e}_getXcetusManager`,i=this.getCache(n,t);if(i)return i;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=Qe(r),o={id:s.id.id,index:Number(s.index),has_venft:{handle:s.has_venft.fields.id.id,size:s.has_venft.fields.size},nfts:{handle:s.nfts.fields.id.id,size:s.nfts.fields.size},total_locked:s.total_locked,treasury:s.treasury.fields.total_supply.fields.value};return this.updateCache(n,o),o}async getVeNFTDividendInfo(t,e){try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),i=Qe(n);return No.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(t,e){if(BigInt(t)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=O(Wi).mul(O(n.max_lock_day).sub(O(e))).mul(O(n.max_percent_numerator).sub(O(n.min_percent_numerator))).div(O(n.max_lock_day).sub(O(n.min_lock_day))),r=O(Wi).mul(O(n.max_percent_numerator)).sub(i).div(O(Yd)).div(Wi);return{amountOut:O(r).mul(O(t)).round().toString(),percent:r.toString()}}async reverseRedeemNum(t,e){if(BigInt(t)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=O(Wi).mul(O(n.max_lock_day).sub(O(e))).mul(O(n.max_percent_numerator).sub(O(n.min_percent_numerator))).div(O(n.max_lock_day).sub(O(n.min_lock_day))),r=O(Wi).mul(O(n.max_percent_numerator)).sub(i).div(O(Yd)).div(Wi);return{amountOut:O(t).div(r).toFixed(0,ne.ROUND_UP),percent:r.toString()}}async getLockXToken(t){const{lock_handle_id:e}=L(this._sdk.sdkOptions.xtoken),n=`${t}_getXTokenAmount`,i=this.getCache(n);if(i)return i;try{const r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),s=Qe(r);if(s){const o=s.value.fields.value.fields;return this.updateCache(n,o,Oe),o}}catch{}}async getVeNftAmount(t,e){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),i=Qe(n);if(i){const{lock_amount:r,xtoken_amount:s}=i.value.fields.value.fields;return{lock_amount:r,xtoken_amount:s}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(t,e=!1){const i=(await this.getDividendManager()).dividends.id,r=`${i}_${t}_getPhaseDividendInfo`,s=this._sdk.getCache(r,e);if(s)return s;try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:t}}),a=Qe(o),c=a.value.fields.value.fields,l=c.redeemed_num.fields.contents.map(f=>({name:f.fields.key.fields.name,value:f.fields.value})),u=c.bonus_types.map(f=>f.fields.name),d=c.bonus.fields.contents.map(f=>({name:f.fields.key.fields.name,value:f.fields.value})),h={id:mr(o),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:l,is_settled:c.is_settled,bonus_types:u,bonus:d,phase_end_time:""};return this.updateCache(r,h),h}catch{}}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},tU=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async addMasterLiquidity(t){var p,w;const{liquidity_stratefy:e}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);let r=O(0),s=O(0);const o=[],a=[],c=[],l=[],u=[];t.liquidity_bins.forEach((_,k)=>{const T=t.amounts_a[k],R=t.amounts_b[k],E=t.bins_fix_amount_a[k];r=r.add(T),s=s.add(R),o.push(T),a.push(R),c.push(Nn(BigInt(_.tick_lower)).toString()),l.push(Nn(BigInt(_.tick_upper)).toString()),u.push(E)});const d=[t.coinTypeA,t.coinTypeB],h=new X,f=(p=Ye.buildAddLiquidityFixTokenCoinInput(h,!t.fix_amount_a,r.toString(),t.slippage,t.coinTypeA,i,!1))==null?void 0:p.targetCoin,g=(w=Ye.buildAddLiquidityFixTokenCoinInput(h,t.fix_amount_a,s.toString(),t.slippage,t.coinTypeB,i,!1))==null?void 0:w.targetCoin;return QF(t)?h.moveCall({target:`${e.published_at}::router::increase_liquidity`,typeArguments:d,arguments:[h.object(L(e).master_manger_id),h.object(t.master_address),h.object(L(n).global_config_id),h.object(t.pool_address),f,g,h.pure(o.map(_=>h.pure(_,"u64"))),h.pure(a.map(_=>h.pure(_,"u64"))),h.pure(u.map(_=>h.pure(_,"bool"))),h.object(we)]}):h.moveCall({target:`${e.published_at}::router::create_master_liquidity`,typeArguments:d,arguments:[h.object(L(e).master_manger_id),h.object(L(n).global_config_id),h.object(t.pool_address),f,g,h.pure(c.map(_=>h.pure(_,"u32"))),h.pure(l.map(_=>h.pure(_,"u32"))),h.pure(o.map(_=>h.pure(_,"u64"))),h.pure(a.map(_=>h.pure(_,"u64"))),h.pure(u.map(_=>h.pure(_,"bool"))),h.pure(t.strategy),h.pure(Nn(BigInt(t.tick_lower)).toString()),h.pure(Nn(BigInt(t.tick_upper)).toString()),h.object(we)]}),h}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(t,e=[]){const n=[],i=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),r=e.length>0;for(const s of i.data)if(ce(s.data.type).full_address===this.buildMasterNFTType()){const a=ns.buildMasterNFT(s);if(a){const c=`${a.id}_masterNFT`;this.updateCache(c,a,Oe),r?e.includes(a.pool_id)&&n.push(a):n.push(a)}}return n}async getMasterNFT(t,e=!1){const n="$masterId}_masterNFT",i=this.getCache(n,e);if(i)return i;try{const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(ce(r.data.type).full_address===this.buildMasterNFTType()){const o=ns.buildMasterNFT(r);return o&&this.updateCache(n,o,Oe),o}}catch(r){console.log(r)}}async fetchMasterPositionInfos(t){var a;const e={},{clmm_pool:n,integrate:i,simulationAccount:r}=this.sdk.ClmmSDK.sdkOptions,s=new X;return t.forEach(c=>{c.position_ids.forEach(l=>{const u=[c.coinTypeA,c.coinTypeB],d=[s.object(L(n).global_config_id),s.object(c.pool_id),s.object(l)];s.moveCall({target:`${i.published_at}::${Qi}::fetch_position_fees`,arguments:d,typeArguments:u}),s.moveCall({target:`${i.published_at}::${Qi}::fetch_position_rewards`,arguments:[...d,s.object(we)],typeArguments:u})})}),(a=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:r.address})).events)==null||a.forEach(c=>{const{parsedJson:l}=c,{position_id:u}=l;let d=e[u];switch(d===void 0&&(d={position_id:u,feeOwedA:"0",feeOwedB:"0",rewarders:[]},e[u]=d),ce(c.type).name){case"FetchPositionFeesEvent":d.feeOwedA=l.fee_owned_a,d.feeOwedB=l.fee_owned_b;break;case"FetchPositionRewardsEvent":d.rewarders=l.data;break}}),e}async getLiquidityStrategyConfigs(t=!1){const{package_id:e}=this._sdk.sdkOptions.liquidity_stratefy,n=`${e}_getLiquidityStrategyConfigst`,i=this.getCache(n,t);if(i!==void 0)return i;const r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,s={master_manger_id:"",master_liquidity_handle:""};if(r.length>0){for(const o of r){const a=o.parsedJson;s.master_manger_id=a.id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),l=Qe(c);s.master_liquidity_handle=l.position_maps.fields.id.id;break}this.updateCache(n,s,Oe)}return s}removeMasterLiquidity(t){const{clmm_pool:e}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new X,r=[t.coinTypeA,t.coinTypeB];this.collectReward({coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collect_fee:!1,rewarder_coin_types:t.rewarder_coin_types,master_address:t.master_address,pool_address:t.pool_address},i);const s=[i.object(L(n).master_manger_id),i.object(t.pool_address),i.object(t.master_address),i.object(L(e).global_config_id),i.pure(t.delta_liquidities.map(o=>i.pure(o,"u128"))),i.pure(t.min_amounts_a.map(o=>i.pure(o,"u64"))),i.pure(t.min_amounts_b.map(o=>i.pure(o,"u64"))),i.object(we)];return i.moveCall({target:`${n.published_at}::${Su}::remove_liquidity`,typeArguments:r,arguments:s}),i}closeMasterLiquidity(t){const{clmm_pool:e}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new X,r=[t.coinTypeA,t.coinTypeB];return this.collectReward({coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collect_fee:!1,rewarder_coin_types:t.rewarder_coin_types,master_address:t.master_address,pool_address:t.pool_address},i),i.moveCall({target:`${n.published_at}::${Su}::close_master_liquidity`,typeArguments:r,arguments:[i.object(L(n).master_manger_id),i.object(t.master_address),i.object(L(e).global_config_id),i.object(t.pool_address),i.pure(t.min_amounts_a.map(s=>i.pure(s,"u64"))),i.pure(t.min_amounts_b.map(s=>i.pure(s,"u64"))),i.object(we)]}),i}collectFee(t,e){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;e=e===void 0?new X:e;const r=[t.coinTypeA,t.coinTypeB],s=[e.object(L(i).master_manger_id),e.object(t.master_address),e.object(L(n).global_config_id),e.object(t.pool_address)];return e.moveCall({target:`${i.published_at}::${Su}::collect_fee`,typeArguments:r,arguments:s}),e}collectReward(t,e){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;return e=e===void 0?new X:e,t.collect_fee&&this.collectFee({...t},e),t.rewarder_coin_types.forEach(r=>{const s=[t.coinTypeA,t.coinTypeB,r];if(e){const o=[e.object(L(i).master_manger_id),e.object(t.master_address),e.object(L(n).global_config_id),e.object(t.pool_address),e.object(L(n).global_vault_id),e.object(we)];e.moveCall({target:`${i.published_at}::${Su}::collect_reward`,typeArguments:s,arguments:o})}}),e}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},nU=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}buildCoinInput(t,e,n,i,r){const{selectedCoins:s,remainingCoins:o}=yt.selectCoinAssetGreaterThanOrEqual(e,BigInt(i)),a=yt.calculateTotalBalance(s);if(a<BigInt(i))throw new Error(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `);const c=a-BigInt(i);let l;if(yt.isSuiCoin(n))l=t.splitCoins(t.gas,[t.pure(i)]);else{const[u,...d]=s.map(h=>h.coinObjectId);l=t.object(u),d.length>0?r?t.mergeCoins(l,[...d.map(h=>t.object(h)),r]):t.mergeCoins(l,[...d.map(h=>t.object(h))]):r&&t.mergeCoins(l,[r])}return{selectedUnusedAmount:c,coinInput:l,remainingCoins:o}}async deposit(t){var d,h;console.log("1110 deposit 参数: ",{params:t});const{vaults:e,frams:n}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),s=new X;let o,a;if(t.swapParams){const f=await this.handleDepositSwap(t,s,r);o=f.primaryCoinAInputs,a=f.primaryCoinBInputs}else o=(d=Ye.buildAddLiquidityFixTokenCoinInput(s,!t.fix_amount_a,t.amount_a,t.slippage,t.coinTypeA,r,!1))==null?void 0:d.targetCoin,a=(h=Ye.buildAddLiquidityFixTokenCoinInput(s,t.fix_amount_a,t.amount_b,t.slippage,t.coinTypeB,r,!1))==null?void 0:h.targetCoin;const c=L(e),l=L(n),u=L(i);return s.moveCall({target:`${e.published_at}::${GF}::deposit`,typeArguments:[t.coinTypeA,t.coinTypeB,t.lp_token_type],arguments:[s.object(c.vaults_manager_id),s.object(t.vault_id),s.object(l.rewarder_manager_id),s.object(l.global_config_id),s.object(t.farming_pool),s.object(u.global_config_id),s.object(t.clmm_pool),o,a,s.pure(t.amount_a),s.pure(t.amount_b),s.pure(t.fix_amount_a),s.object(we)]}),s}async handleDepositSwap(t,e,n){const{clmm_pool:i,integrate:r}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:s,a2b:o,route_obj:a,staking_id:c}=t.swapParams,l=o?t.coinTypeA:t.coinTypeB,u=Ye.buildCoinForAmount(e,n,BigInt(s),l,!1),d=BigInt(u.tragetCoinAmount)-BigInt(s);let h=[];if(c){const _=this.requestStakeCoin(c,e,u.targetCoin),k=Ye.buildCoinForAmount(e,u.remainCoins,BigInt(0),l,!1).targetCoin;h=o?[k,_]:[_,k]}else if(a){const _=Ye.buildCoinForAmount(e,n,0n,o?t.coinTypeB:t.coinTypeA,!1),k=await Ye.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,a,u,_,"",t.slippage,e);h=o?[k.fromCoin,k.toCoin]:[k.toCoin,k.fromCoin],console.log("swapCoinInputTo.isMintZeroCoin: ",_),!_.isMintZeroCoin&&_.originalSplitedCoin===void 0&&e.transferObjects([_.targetCoin],e.pure(this._sdk.getVerifySenderAddress()))}else{const _=Ye.buildCoinForAmount(e,n,0n,o?t.coinTypeB:t.coinTypeA,!1),k=Rr.getDefaultSqrtPriceLimit(o).toString();h=e.moveCall({target:`${r.published_at}::${Bo}::swap`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(L(i).global_config_id),e.object(t.clmm_pool),o?u.targetCoin:_.targetCoin,o?_.targetCoin:u.targetCoin,e.pure(o),e.pure(!0),e.pure(s),e.pure(k),e.pure(!1),e.object(we)]})}let f,g;const p=h[0],w=h[1];if(o){const _=BigInt(t.amount_a)-d;yt.isSuiCoin(l)?(e.transferObjects([p],e.pure(this._sdk.getVerifySenderAddress())),f=e.splitCoins(e.gas,[e.pure(t.amount_a)])):_>0n?f=this.buildCoinInput(e,u.remainCoins,l,_,p).coinInput:f=p,g=w}else{f=p;const _=BigInt(t.amount_b)-d;yt.isSuiCoin(l)?(e.transferObjects([w],e.pure(this._sdk.getVerifySenderAddress())),g=e.splitCoins(e.gas,[e.pure(t.amount_b)])):_>0n?g=this.buildCoinInput(e,u.remainCoins,l,_,w).coinInput:g=w}return{primaryCoinAInputs:f,primaryCoinBInputs:g}}async remove(t){console.log({params:t});const{vaults:e,frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:r}=this._sdk.ClmmSDK.sdkOptions,s=new X,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),t.lp_token_type),a=Ye.buildCoinForAmount(s,o,BigInt(t.lp_token_amount),t.lp_token_type,!1).targetCoin,c=L(e),l=L(n),u=L(i),d=[t.coinTypeA,t.coinTypeB,t.lp_token_type],h=s.moveCall({target:`${e.published_at}::${YF}::remove`,typeArguments:d,arguments:[s.object(c.vaults_manager_id),s.object(t.vault_id),s.object(l.rewarder_manager_id),s.object(l.global_config_id),s.object(t.farming_pool),s.object(u.global_config_id),s.object(t.clmm_pool),a,s.pure(t.lp_token_amount),s.pure(t.min_amount_a),s.pure(t.min_amount_b),s.object(we)]}),f=h[0],g=h[1];if(t.swapParams){const{a2b:p,swap_amount:w,route_obj:_}=t.swapParams;if(_){const k={targetCoin:p?f:g,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},T={targetCoin:p?g:f,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},R=await Ye.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,_,k,T,"",t.slippage,s),E=p?[R.fromCoin,R.toCoin]:[R.toCoin,R.fromCoin];p?s.mergeCoins(E[1],[g]):s.mergeCoins(E[0],[f]),s.transferObjects([...E],s.pure(this._sdk.getVerifySenderAddress()))}else{const k=Rr.getDefaultSqrtPriceLimit(p).toString(),T=s.moveCall({target:`${r.published_at}::${Bo}::swap`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[s.object(L(i).global_config_id),s.object(t.clmm_pool),f,g,s.pure(p),s.pure(!0),s.pure(w),s.pure(k),s.pure(!0),s.object(we)]});s.transferObjects([T[0],T[1]],s.pure(this._sdk.getVerifySenderAddress()))}}else s.transferObjects([f,g],s.pure(this._sdk.getVerifySenderAddress()));return s}async getVaultList(t="all"){const{vaults:e}=this._sdk.sdkOptions,n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e.package_id}::vaults::CreateEvent`},t),i=n.data.map(o=>o.parsedJson.id),r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),s=[];return r.forEach(o=>{const a=xr.buildPool(o);a&&(a.staking_id=this.findHaedalStakeId(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),s.push(a))}),n.data=s,n}findHaedalStakeId(t,e){var s;const{haedal:n}=this._sdk.sdkOptions,{support_stakings:i}=L(n);return i.length===0?void 0:((s=i.filter(o=>{const a=ce(o.from_coin_type).full_address,c=ce(o.to_coin_type).full_address,l=ce(t).full_address,u=ce(e).full_address;return l===a&&u===c||l===c&&u===a})[0])==null?void 0:s.staking_id)||void 0}savePoolToCache(t){const e=`${t.id}_mirrorPool`;this.updateCache(e,t,Oe)}readPoolFromCache(t,e=!1){const n=`${t}_mirrorPool`;return this.getCache(n,e)}async calculateMaxAvailable(t){var p;const{integrate:e,simulationAccount:n}=this.sdk.ClmmSDK.sdkOptions,i=new X,r=Fe.tickIndexToSqrtPriceX64(t.lowerTick),s=Fe.tickIndexToSqrtPriceX64(t.upperTick),o=new A(t.curSqrtPrice),a=bn.getCoinAmountFromLiquidity(new A(t.input_amount),o,r,s,!1),c=[t.coinTypeA,t.coinTypeB];i.moveCall({target:`${e.published_at}::${Qi}::calculate_swap_result`,arguments:[i.object(t.clmm_pool),i.pure(!0),i.pure(!0),i.pure(a.coinA.toString())],typeArguments:c}),i.moveCall({target:`${e.published_at}::${Qi}::calculate_swap_result`,arguments:[i.object(t.clmm_pool),i.pure(!1),i.pure(!0),i.pure(a.coinB.toString())],typeArguments:c});const u=(p=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:p.filter(w=>ce(w.type).name==="CalculatedSwapResultEvent");if(u.length===0)return null;const d=u[0].parsedJson.data,h=u[1].parsedJson.data,f=O(a.coinB.toString()).add(d.amount_out),g=O(a.coinA.toString()).add(h.amount_out);return{maxAmountB:f,maxAmountA:g}}async calculateRemoveSwapAmount(t,e){const n=xr.calculateDepositRatio(t.lowerTick,t.upperTick,new A(t.curSqrtPrice)),i=t.fix_amount_a?n.ratioA:n.ratioB;console.log({fixRatio:i});let r=O(t.receive_amount).mul(i),s,o;if(t.removeLiquidity){const p=Fe.tickIndexToSqrtPriceX64(t.lowerTick),w=Fe.tickIndexToSqrtPriceX64(t.upperTick),_=bn.getCoinAmountFromLiquidity(new A(t.removeLiquidity),new A(t.curSqrtPrice),p,w,!1);o=t.removeLiquidity,s=t.fix_amount_a?_.coinB.toString():_.coinA.toString(),r=t.fix_amount_a?O(_.coinA.toString()):O(_.coinB.toString())}else{const p=bn.estLiquidityAndcoinAmountFromOneAmounts(t.lowerTick,t.upperTick,new A(r.toFixed(0)),t.fix_amount_a,!1,.2,new A(t.curSqrtPrice));o=p.liquidityAmount.toString(),s=t.fix_amount_a?p.coinAmountB.toString():p.coinAmountA.toString()}console.log({fixAmount:r,otherSideAmount:s});const a=!t.fix_amount_a,c=await this.clmmPreSwap(t.clmm_pool,t.curSqrtPrice,a,O(s),t.coinTypeA,t.coinTypeB,!0,t.priceSplitPoint,t.use_route,[{pool_id:t.clmm_pool,tick_lower:t.lowerTick,tick_upper:t.upperTick,delta_liquidity:Number(o),is_increase:!1}]);console.log({data:c,range:e});const l=r.add(c.amount_out),u=O(t.receive_amount),d=u.sub(l);if(console.log(`实际得到: ${l.toString()} , 期望得到: ${t.receive_amount}, 剩余: ${d.toString()} `),(!t.removeLiquidity||t.removeLiquidity&&e)&&d.abs().greaterThan(u.mul(.01))){const p=l.lessThan(u);let w,_;e?p?(w=O(o),_=e.right):(w=e.left,_=O(o)):(w=O(p?o:0),_=O(p?t.maxLiquidity:o));const k=O(w).add(_).div(2).toFixed(0);if(console.log({left:w.toString(),right:_.toString(),midLiquidity:k.toString()}),!e||e&&e.count<15&&w<_)return await this.calculateRemoveSwapAmount({...t,removeLiquidity:k},{left:w,right:_,count:e?e.count+1:0})}const h=c.amount_in&&c.fee_amount?new A(c.amount_in).add(new A(c.fee_amount)).toString():c.amount_in,f=c.amount_out,{is_exceed:g}=c;return{swapInAmount:h,swapOutAmount:f,liquidity:o,is_exceed:g,routeObj:c.route_obj,request_id:t.request_id}}async calculateHaedalDepositFixSui(t){const e=t.inputSuiAmount.mul(t.remainRate),n=t.inputSuiAmount.sub(t.swapSuiAmount),i=t.exchangeRate?t.exchangeRate:await this.getExchangeRateForHaedal(t.staking_id,t.shouldRequestStake,Number(t.swapSuiAmount.toFixed(0))),r=t.swapSuiAmount.div(i).toFixed(0);console.log({swapAmount:t.swapSuiAmount.toString(),hasuiAmount:r.toString(),leftSuiAmount:t.leftSuiAmount.toString(),rightSuiAmount:t.rightSuiAmount.toString(),exchangeRate:i});const s=bn.estLiquidityAndcoinAmountFromOneAmounts(t.lowerTick,t.upperTick,new A(r.toString()),!t.fixCoinA,!0,0,new A(t.curSqrtPrice)),o=t.fixCoinA?s.coinAmountA.toString():s.coinAmountB.toString(),a=O(n).sub(o);return console.log({useSuiAmount:o.toString(),hasuiAmount:r.toString(),remainSui:n.toString(),remainSuiLimit:e.toString(),actRemainSui:a.toString(),rebalanceCount:t.rebalanceCount}),a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(e)||t.rebalanceCount>12||t.leftSuiAmount.greaterThanOrEqualTo(t.rightSuiAmount)?{swapInAmount:t.swapSuiAmount.toFixed(0),swapOutAmount:r,afterSqrtPrice:t.curSqrtPrice,fixAmountA:!t.fixCoinA,is_exceed:!0,request_id:"",staking_id:t.staking_id}:a.lessThan(0)?await this.calculateHaedalDepositFixSui({...t,rightSuiAmount:t.swapSuiAmount,swapSuiAmount:t.swapSuiAmount.add(t.leftSuiAmount).div(2),exchangeRate:i,rebalanceCount:t.rebalanceCount+1}):a.greaterThan(e)?await this.calculateHaedalDepositFixSui({...t,leftSuiAmount:t.swapSuiAmount,swapSuiAmount:t.swapSuiAmount.add(t.rightSuiAmount).div(2),exchangeRate:i,rebalanceCount:t.rebalanceCount+1}):null}async calculateDepositSwapAmount(t,e=!1){const n=Fe.sqrtPriceX64ToTickIndex(new A(t.curSqrtPrice)),{ratioA:i,ratioB:r}=xr.calculateDepositRatio(t.lowerTick,t.upperTick,new A(t.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...t,currentTick:n,adjustBestAmount:e});const s=O(t.input_amount).mul(t.fix_amount_a?i:r);let o=O(t.input_amount).sub(s);console.log("1110 ",{fixAmount:s.toString(),swapAmount:o.toString()});const a=t.fix_amount_a;if(o.toFixed(0)==="0")return null;if(t.staking_id){if(yt.isSuiCoin(t.coinTypeA)&&t.fix_amount_a||yt.isSuiCoin(t.coinTypeB)&&!t.fix_amount_a){const D=await this.calculateHaedalDepositFixSui({inputSuiAmount:O(t.input_amount),swapSuiAmount:o,lowerTick:t.lowerTick,upperTick:t.upperTick,curSqrtPrice:t.curSqrtPrice,remainRate:t.remainRate?t.remainRate:.01,fixCoinA:t.fix_amount_a,rebalanceCount:0,shouldRequestStake:t.shouldRequestStake,leftSuiAmount:a?new ne(o.toFixed(0)):new ne(0),rightSuiAmount:a?new ne(t.input_amount):new ne(o.toFixed(0)),staking_id:t.staking_id});return D?{...D,request_id:t.request_id}:null}throw Error("Only support fix sui")}const c=n<t.lowerTick||n>t.upperTick,l={clmm_pool:t.clmm_pool,curSqrtPrice:t.curSqrtPrice,a2b:a,amount_a:a?new ne(t.input_amount):new ne(0),amount_b:a?new ne(0):new ne(t.input_amount),amount_left:a?new ne(o.toFixed(0)):new ne(0),amount_right:a?new ne(t.input_amount):new ne(o.toFixed(0)),lowerTick:t.lowerTick,upperTick:t.upperTick,tick_spacing:2,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,useRoute:t.use_route,remainRate:t.remainRate?t.remainRate:.01,priceSplitPoint:t.priceSplitPoint},u=e&&n<=t.upperTick;let d=u?await this.calculateRebalance(l):await this.clmmPreSwap(t.clmm_pool,t.curSqrtPrice,a,o,t.coinTypeA,t.coinTypeB,!0,t.priceSplitPoint,t.use_route),h=d.after_sqrt_price;const f=Fe.sqrtPriceX64ToTickIndex(new A(h));console.log("1110 首次计算 结果: ",{...d,currentTick:f},null,2);const g=f<t.lowerTick||f>t.upperTick;if(c!==g&&!u&&f<=t.upperTick){console.log("1110 区间发生变化, 再次进行swap: ");const{ratioA:D,ratioB:B}=xr.calculateDepositRatio(t.lowerTick,t.upperTick,new A(h));console.log("1110 ",{newAfterRatioA:D,newAfterRatioB:B}),o=O(t.input_amount).sub(O(t.input_amount).mul(t.fix_amount_a?D:B)),l.amount_left=a?new ne(o.toFixed(0)):new ne(0),l.amount_right=a?new ne(t.input_amount):new ne(o.toFixed(0)),d=await this.calculateRebalance(l),h=d.after_sqrt_price;const $=Fe.sqrtPriceX64ToTickIndex(new A(h));console.log("1110 再次计算变化后: ",{lowerTick:t.lowerTick,upperTick:t.upperTick,currentTick:$,afterSqrtPrice:h})}const{ratioA:p,ratioB:w}=xr.calculateDepositRatio(t.lowerTick,t.upperTick,new A(h));console.log("1110 1",{afterRatioA:p,afterRatioB:w,data:d});let _=w.div(p).sub(r.div(i)).greaterThan("0");const k=d.amount_in&&d.fee_amount?new A(d.amount_in).add(new A(d.fee_amount)).toString():d.amount_in,T=d.amount_out,{is_exceed:R}=d;if(f<t.lowerTick)_=!0;else if(f>t.upperTick)_=!1;else{const D=_===a?new A(O(t.input_amount).sub(k).toString()):new A(T),B=bn.estLiquidityAndcoinAmountFromOneAmounts(t.lowerTick,t.upperTick,D,_,!0,0,new A(h)),$=B.coinAmountA,Y=B.coinAmountB,z=O(t.fix_amount_a?$.toString():Y.toString()).add(k);console.log("1110 实际消耗:",{preAmountTotal:z.toString(),fixAmountA:_}),z.greaterThanOrEqualTo(t.input_amount)&&(_=!_)}const E={swapInAmount:k,swapOutAmount:T,afterSqrtPrice:h,is_exceed:R,fixAmountA:_,routeObj:d.route_obj,request_id:t.request_id,use_Haedal_stake:!1};return console.log(E),E}async calculateHaedalDepositSwapAmount(t){const e=Fe.sqrtPriceX64ToTickIndex(new A(t.curSqrtPrice)),{ratioA:n,ratioB:i}=xr.calculateDepositRatio(t.lowerTick,t.upperTick,new A(t.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...t,currentTick:e});const r=O(t.input_amount).mul(t.fix_amount_a?n:i),s=O(t.input_amount).sub(r);console.log("1110 ",{fixAmount:r.toString(),swapAmount:s.toString()});const o=t.fix_amount_a;if(s.toFixed(0)==="0")return null;if(t.staking_id){if(yt.isSuiCoin(t.coinTypeA)&&t.fix_amount_a||yt.isSuiCoin(t.coinTypeB)&&!t.fix_amount_a){const a=await this.calculateHaedalDepositFixSui({inputSuiAmount:O(t.input_amount),swapSuiAmount:s,lowerTick:t.lowerTick,upperTick:t.upperTick,curSqrtPrice:t.curSqrtPrice,remainRate:t.remainRate?t.remainRate:.01,fixCoinA:t.fix_amount_a,rebalanceCount:0,shouldRequestStake:t.shouldRequestStake,leftSuiAmount:o?new ne(s.toFixed(0)):new ne(0),rightSuiAmount:o?new ne(t.input_amount):new ne(s.toFixed(0)),staking_id:t.staking_id});return a?{...a,request_id:t.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(t){const{clmm_pool:e,a2b:n,curSqrtPrice:i,amount_a:r,amount_b:s,lowerTick:o,upperTick:a,amount_left:c,amount_right:l,coinTypeA:u,coinTypeB:d,useRoute:h,priceSplitPoint:f,remainRate:g}=t,p=async(w,_,k)=>{const T=w.plus(_).div(2),R=await this.clmmPreSwap(e,i,n,T,u,d,!0,f,h);if(R.amount_out==="0")return R;if(R.after_sqrt_price||(R.after_sqrt_price=t.curSqrtPrice),R.is_exceed)return _=T,p(w,_,k+1);const E=n?r.sub(R.amount_in):r.add(R.amount_out),D=n?s.add(R.amount_out):s.sub(R.amount_in),B=Fe.sqrtPriceX64ToTickIndex(new A(R.after_sqrt_price)),$=bn.estLiquidityAndcoinAmountFromOneAmounts(o,a,new A(E.toString()),!0,!0,1,new A(R.after_sqrt_price)),Y=new ne($.coinAmountA.toString()),z=new ne($.coinAmountB.toString());if(console.log("1110 swap递归计算 ",{preRes:R,left:w.toString(),right:_.toString(),mid:T.toString(),afterPoolTickIndex:B,afterA:E.toString(),afterB:D.toString(),usedA:Y.toString(),usedB:toString(),count:k}),Y.toString()!==E.toString())throw new Error("usedA does not match afterA");if(D.lessThan(z))n?w=T:_=T;else{n?_=T:w=T;const H=D.sub(z),ie=D.mul(g);if(console.log("1110 剩余未使用amount ",{remainingB:H.toString(),maxRemainingB:ie.toString(),remainRate:g,count:k}),ie.sub(H).greaterThanOrEqualTo(0))return console.log("break"),{...R,remainingB:H}}return w.greaterThan(_)||_.sub(w).lessThan(10)?R:p(w,_,k+1)};return c.greaterThanOrEqualTo(l)?p(new ne(0),c,0):p(c,l,0)}async clmmPreSwap(t,e,n,i,r,s,o,a,c,l){var _;if(c)try{const k=await this._sdk.ClmmSDK.RouterV2.getBestRouter(n?r:s,n?s:r,Number(i.toFixed(0)),o,a,"",void 0,void 0,!0,!1,l);if(!k.result)throw new Error("route unavailable");const{result:T}=k;let R=e;return T.splitPaths.forEach(E=>{const D=E.basePaths.find(B=>B.poolAddress.toLowerCase()===t.toLowerCase());D&&(R=D.afterSqrtPrice.toString())}),{amount_in:T.inputAmount.toString(),amount_out:T.outputAmount.toString(),after_sqrt_price:R,is_exceed:T.isExceed,route_obj:T}}catch{throw new Error("route unavailable")}const{integrate:u,simulationAccount:d}=this.sdk.ClmmSDK.sdkOptions,h=new X,f=[r,s],g=[h.pure(t),h.pure(n),h.pure(o),h.pure(i.toFixed(0))];h.moveCall({target:`${u.published_at}::${Qi}::calculate_swap_result`,arguments:g,typeArguments:f});const w=(_=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:h,sender:d.address})).events)==null?void 0:_.filter(k=>ce(k.type).name==="CalculatedSwapResultEvent");return w.length===0?null:w[0].parsedJson.data}async getVault(t,e=!1){const n=this.readPoolFromCache(t,e);if(n)return n;try{const i=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),r=xr.buildPool(i);if(r)return r.staking_id=this.findHaedalStakeId(r.position.coinTypeA,r.position.coinTypeB),this.savePoolToCache(r),r}catch(i){console.log(i)}}async getVaultsConfigs(t=!1){const{package_id:e}=this._sdk.sdkOptions.vaults,n=`${e}_getMirrorPoolConfigs`,i=this.getCache(n,t);if(i!==void 0)return i;const r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::vaults::InitEvent`})).data,s={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(r.length>0){for(const o of r){const a=o.parsedJson;s.admin_cap_id=a.admin_cap_id,s.vaults_manager_id=a.manager_id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:s.vaults_manager_id,options:{showContent:!0}}),l=Qe(c);s.vaults_pool_handle=l.vault_to_pool_maps.fields.id.id;break}this.updateCache(n,s,Oe)}return s}async getExchangeRateForHaedal(t,e,n){const{haedal:i}=this._sdk.sdkOptions,{simulationAccount:r}=this._sdk.ClmmSDK.sdkOptions;try{const s=new X;e?await this.requestStake(t,n||1e9,s):s.moveCall({target:`${i.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[s.object(t)]});const o=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:e?this._sdk.ClmmSDK.senderAddress:r.address});if(console.log("getExchangeRateForHaedal res: ",o),e){const l=o.events.find(f=>f.type.includes("UserStaked")),{sui_amount:u,st_amount:d}=l.parsedJson,h=O(u).div(d).toString();return console.log({st_amount:d,sui_amount:u,rate:h}),h}const a=o.results[0].returnValues[0][0],c=li.de("u64",Uint8Array.from(a))/1e6;return console.log("rate ",li.de("u64",Uint8Array.from(a))),c.toString()}catch(s){console.log("getExchangeRateForHaedal",s)}return"0"}requestStakeCoin(t,e,n){const{haedal:i}=this._sdk.sdkOptions;return e.moveCall({target:`${i.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[e.object(Mn("0x5")),e.object(t),n,e.pure(Mn("0x0"))]})}async requestStake(t,e,n){const{haedal:i}=this._sdk.sdkOptions,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),Hd);n=n||new X;let s;if(e>95e10){const[o,...a]=r;a.length>0&&n.mergeCoins(n.object(o.coinObjectId),a.map(c=>n.object(c.coinObjectId))),s=n.splitCoins(n.object(o.coinObjectId),[e])}else s=Ye.buildCoinForAmount(n,r,BigInt(e),Hd,!1,!0).targetCoin;return n.moveCall({target:`${i.published_at}::interface::request_stake`,typeArguments:[],arguments:[n.object(Mn("0x5")),n.object(t),s,n.pure(Mn("0x0"))]}),n}updateCache(t,e,n=Mi){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},Au=class{static buildOrderLimitEvent(t){const{events:e}=t,n=[];return e&&e.forEach(i=>{const r=ce(i.type).name;if(r==="OrderPlacedEvent"||r==="OrderCanceledEvent"||r==="FlashLoanEvent"){const s={digest:t.digest,type:r,timestampMs:t.timestampMs,parsedJson:i.parsedJson};n.push(s)}}),n}static buildLimitOrderInfo(t){const e=Qe(t),n=dc(t);if(e&&n)try{const i=ce(n),r={pay_coin_type:i.type_arguments[0],target_coin_type:i.type_arguments[1],balance:e.balance,canceled_ts:e.canceled_ts==="18446744073709551615"?0:Number(e.canceled_ts),id:e.id.id,obtained_amount:e.obtained_amount,owner:e.owner,rate:e.rate,expire_ts:Number(e.expire_ts),total_pay_amount:e.total_pay_amount,status:"Running",created_ts:Number(e.created_ts)};if(r.canceled_ts===0)r.status="Running";else if(Number(r.obtained_amount)===0)r.status="Cancelled";else{const s=O(r.total_pay_amount).mul(1e20).div(r.rate).toFixed(0);r.obtained_amount===s?r.status="Completed":r.status="Cancelled"}return r}catch(i){console.log(i)}}static calculateFormatRate(t,e,n){const i=20+e-n;return O(t).mul(O(10).pow(i)).toString()}static calculateRate(t,e,n){const i=20+e-n;return Number(t)/10**i}},iU=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getLimitOrderTokenList(){const{limit_order:t}=this._sdk.sdkOptions,{token_list_handle:e}=L(t),{fullClient:n}=this._sdk.ClmmSDK,r=(await n.getDynamicFieldsByPage(e)).data.map(o=>o.objectId);return(await n.batchGetObjects(r,{showContent:!0})).map(o=>{const{fields:a}=o.data.content;return{coin_type:ce(a.name.fields.name).full_address,min_trade_amount:Number(a.value)}})}async getLimitOrderPoolList(){const{limit_order:t}=this._sdk.sdkOptions,{rate_orders_indexer_handle:e}=L(t),{fullClient:n}=this._sdk.ClmmSDK,r=(await n.getDynamicFieldsByPage(e)).data.map(o=>o.objectId);return(await n.batchGetObjects(r,{showContent:!0})).map(o=>{const{fields:a}=o.data.content.fields.value,c={pay_coin_type:ce(a.pay_coin.fields.name).full_address,target_coin_type:ce(a.target_coin.fields.name).full_address,indexer_id:a.indexer_id};return this._sdk.updateCache(`${c.pay_coin_type}_${c.target_coin_type}`,c.indexer_id),c})}async getPoolIndexerId(t,e){const n=this._sdk.getCache(`${t}_${e}`);try{if(n===void 0){const r=(await this.getLimitOrderPoolList()).filter(s=>s.pay_coin_type===t&&s.target_coin_type===e);if(r.length>0)return r[0].indexer_id}}catch{}return n}async getOwnerLimitOrderList(t,e){const{fullClient:n}=this._sdk.ClmmSDK,i={data:[],hasNextPage:!1};try{const r=await this.getUserIndexerHandle(t);if(!r)return i;const s=await n.getDynamicFieldsByPage(r,e);i.hasNextPage=s.hasNextPage,i.nextCursor=s.nextCursor;const o=s.data.map(l=>l.name.value),c=(await n.batchGetObjects(o,{showContent:!0})).map(l=>Au.buildLimitOrderInfo(l)).filter(l=>l!==void 0);i.data=c}catch(r){console.error("Error in getOwnerLimitOrderList:",r)}return i}async getLimitOrderConfigs(){const{package_id:t}=this._sdk.sdkOptions.limit_order,e={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::limit_order::InitEvent`})).data;if(n.length>0){const r=n[0].parsedJson;e.rate_orders_indexer_id=r.rate_orders_indexer_id,e.user_orders_indexer_id=r.user_orders_indexer_id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e.rate_orders_indexer_id,options:{showContent:!0}});e.rate_orders_indexer_handle=Qe(s).list.fields.id.id;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e.user_orders_indexer_id,options:{showContent:!0}});e.user_orders_indexer_handle=Qe(o).indexer.fields.id.id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::config::InitFactoryEvent`})).data;if(i.length>0){const r=i[0].parsedJson;e.global_config_id=r.global_config_id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e.global_config_id,options:{showContent:!0}}),o=Qe(s);e.token_list_handle=o.token_white_list.fields.id.id}return e}async getLimitOrder(t){const{fullClient:e}=this._sdk.ClmmSDK;try{const n=await e.getObject({id:t,options:{showContent:!0}});return Au.buildLimitOrderInfo(n)}catch(n){console.error("Error in getLimitOrder:",n);return}}async getLimitOrderLogs(t){const{fullClient:e}=this._sdk.ClmmSDK;try{const n=await e.queryTransactionBlocks({filter:{ChangedObject:t},options:{showEvents:!0}}),i=[];return n.data.forEach(r=>{i.push(...Au.buildOrderLimitEvent(r))}),i}catch(n){return console.error("Error in getLimitOrderLogs:",n),[]}}buildRateOrdersIndexerType(t){const{limit_order:e}=this._sdk.sdkOptions;return Zd(`${e.package_id}::limit_order::RateOrdersIndexer`,[t.pay_coin_type,t.target_coin_type])}async placeLimitOrder(t){const{limit_order:e}=this._sdk.sdkOptions,{user_orders_indexer_id:n,global_config_id:i,rate_orders_indexer_id:r}=L(e),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,t.pay_coin_type),o=new X,a=await this.getPoolIndexerId(t.pay_coin_type,t.target_coin_type),c=Ye.buildCoinForAmount(o,s,BigInt(t.pay_coin_amount),t.pay_coin_type,!1,!0);return o.moveCall({target:`${e.published_at}::limit_order::${a===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[t.pay_coin_type,t.target_coin_type],arguments:[o.object(i),a===void 0?o.object(r):o.object(a),o.object(n),c.targetCoin,o.pure(Au.calculateFormatRate(t.rate,t.pay_decimal,t.target_decimal)),o.pure(t.expired_ts),o.object(we)]}),o}async cancelOrdersByOwner(t){const{limit_order:e}=this._sdk.sdkOptions,{global_config_id:n}=L(e),i=new X,r=await this.getPoolIndexerId(t.pay_coin_type,t.target_coin_type);if(r===void 0)throw Error("not found indexerId");return t.order_ids.forEach(s=>{i.moveCall({target:`${e.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[t.pay_coin_type,t.target_coin_type],arguments:[i.object(n),i.object(r),i.object(s),i.object(we)]})}),i}async getUserIndexerHandle(t){const{fullClient:e}=this._sdk.ClmmSDK,{limit_order:n}=this._sdk.sdkOptions;let i=this.getUserIndexerHandleByCache(t);if(i===void 0){const r=new X;r.moveCall({target:`${n.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[r.pure(t),r.object(L(n).user_orders_indexer_id)]}),i=(await e.devInspectTransactionBlock({transactionBlock:r,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,i&&this.saveUserIndexerHandleByCache(t,i)}return i}getUserIndexerHandleByCache(t){const e=`getUserIndexerHandleByCache_${t}`;return this.getCache(e)}saveUserIndexerHandleByCache(t,e){const n=`getUserIndexerHandleByCache_${t}`;return this.updateCache(n,e)}updateCache(t,e,n=Oe){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},rU=class{constructor(t){v(this,"_sdk");v(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getFramsPoolList(t="all"){const{package_id:e}=this._sdk.sdkOptions.frams,n={data:[],hasNextPage:!1};try{const i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::pool::CreatePoolEvent`},t),r=i.data.map(s=>s.parsedJson.pool_id);if(n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor,r.length>0){const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0});for(const o of s){const a=Tu.buildFramsPool(o);a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(c=>c.reward_coin)),n.data.push(a),this.updateCache(a.id,a))}}}catch(i){console.log("getFramsPoolList error ",i)}return n}async getFramsPool(t,e=!1){const n=this.getCache(t,e);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0}}),r=Tu.buildFramsPool(i.data);return r&&(r.rewarders=await this.getFramsRewarderConfig(r.clmm_pool_id,r.rewarders.map(s=>s.reward_coin)),this.updateCache(r.id,r)),r}async getFramsRewarderConfig(t,e,n=!1){const{frams:i}=this._sdk.sdkOptions,r=[];for(const s of e){const o=`getFramsRewarderConfig_${s}_${t}`,a=this.getCache(o,n);if(a)r.push(a);else try{const c=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:L(i).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:lv(s)}}),{fields:l}=c.data.content.fields.value.fields.value,u={reward_coin:s,last_reward_time:l.last_reward_time,emission_per_second:l.emission_per_second,total_allocate_point:l.total_allocate_point,allocate_point:""},d=l.pools.fields.id.id,h=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:d,name:{type:"0x2::object::ID",value:t}}),{allocate_point:f}=h.data.content.fields.value.fields.value.fields;u.allocate_point=f,this.updateCache(o,u),r.push(u)}catch(c){console.log(c)}}return r}async getOwnedFramsPositionNFTList(t,e=[],n=!1,i=!0,r="all"){const{package_id:s}=this._sdk.sdkOptions.frams,o={data:[],hasNextPage:!1};let a={};const c=[],l=e.length>0,u=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{filter:{StructType:`${s}::pool::WrappedPositionNFT`},options:{showContent:!0}},r);o.hasNextPage=u.hasNextPage,o.nextCursor=u.nextCursor;for(const d of u.data){const h=Tu.buildFramsPositionNFT(d);if(h)if(l){if(e.includes(h.pool_id)){c.push(h);let f=a[h.pool_id];f?f.push(h):f=[h],a[h.pool_id]=f}}else c.push(h)}if(n&&c.length>0){const d=await this.calculateFarmingRewards(c.map(h=>({pool_id:h.pool_id,position_nft_id:h.id,clmm_pool_id:h.clmm_pool_id})),i);l?(a={},c.forEach(h=>{d[h.id]&&(h.rewards=d[h.id]);let g=a[h.pool_id];g?g.push(h):g=[h],a[h.pool_id]=g})):c.forEach(h=>{d[h.id]&&(h.rewards=d[h.id])})}return l?a:(o.data=c,o)}async getFramsPositionNFT(t,e=!0){const n=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showType:!0}}),i=Tu.buildFramsPositionNFT(n);if(e&&i){const r=await this.calculateFarmingRewards([{pool_id:i.pool_id,position_nft_id:i.id}]);r[i.id]&&(i.rewards=r[i.id])}return i}async calculateFarmingRewards(t,e=!0){var a;const{frams:n}=this._sdk.sdkOptions,i=new X,{rewarder_manager_id:r,global_config_id:s}=L(n);t.forEach(c=>{i.moveCall({target:`${n.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[i.object(s),i.object(r),i.object(c.pool_id),i.pure(c.position_nft_id,"address"),i.object(we)]})});const o={};try{const c=await this._sdk.ClmmSDK.fullClient.sendSimulationTransaction(i,this._sdk.ClmmSDK.senderAddress,e);console.log({simulateRes:c});const l=(a=c==null?void 0:c.events)==null?void 0:a.filter(u=>ce(u.type).name==="AccumulatedPositionRewardsEvent");if(l&&l.length>0)for(let u=0;u<l.length;u+=1){const{parsedJson:d}=l[u],h=[];d.rewards.contents.forEach(f=>{h.push({rewarder_type:ce(f.key.name).full_address,rewarder_amount:f.value})}),o[d.wrapped_position_id]=h}}catch(c){console.log(c)}return o}depositPayload(t,e){const{frams:n}=this.sdk.sdkOptions;e=e||new X;const{global_config_id:i,rewarder_manager_id:r}=L(n);return e.moveCall({target:`${n.published_at}::router::deposit`,typeArguments:[],arguments:[e.object(i),e.object(r),e.object(t.pool_id),e.object(t.clmm_position_id),e.object(we)]}),e}async withdrawPayload(t,e){const{frams:n}=this.sdk.sdkOptions,{global_config_id:i,rewarder_manager_id:r}=L(n);return e=e||new X,e=await this.harvestPayload({pool_id:t.pool_id,position_nft_id:t.position_nft_id},e),e.moveCall({target:`${n.published_at}::router::withdraw`,typeArguments:[],arguments:[e.object(i),e.object(r),e.object(t.pool_id),e.object(t.position_nft_id),e.object(we)]}),e}async batchHarvestPayload(t,e){e=e||new X;for(const n of t)await this.harvestPayload(n,e);return e}async harvestPayload(t,e){const{frams:n}=this.sdk.sdkOptions;e=e||new X;const i=await this.getFramsPool(t.pool_id,!1);if(i===void 0)throw Error(`not found ${t.pool_id}`);const{global_config_id:r,rewarder_manager_id:s}=L(n);if("collect_fee"in t&&(t.collect_fee||t.clmm_rewarder_types.length>0)){const a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:t.clmm_pool_id,position_nft_id:t.position_nft_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collectFee:t.collect_fee,clmm_rewarder_types:t.clmm_rewarder_types},e,a)}return i.rewarders.forEach(a=>{e&&e.moveCall({target:`${n.published_at}::router::harvest`,typeArguments:[a.reward_coin],arguments:[e.object(r),e.object(s),e.object(t.pool_id),e.object(t.position_nft_id),e.object(we)]})}),e}async claimFeeAndClmmReward(t){const e=new X,n=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:t.clmm_pool_id,position_nft_id:t.position_nft_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collectFee:t.collect_fee,clmm_rewarder_types:t.clmm_rewarder_types},e,n),e}async openPositionAddLiquidityStakePaylod(t){const e=new X,{clmm_pool:n,integrate:i}=this._sdk.ClmmSDK.sdkOptions,r=L(n),s=e.moveCall({target:`${n.published_at}::pool::open_position`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(r.global_config_id),e.object(t.clmm_pool_id),e.pure(Nn(BigInt(t.tick_lower)).toString()),e.pure(Nn(BigInt(t.tick_upper)).toString())]}),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=Ye.buildCoinForAmount(e,o,BigInt(t.amount_a),t.coinTypeA,!1),c=Ye.buildCoinForAmount(e,o,BigInt(t.amount_b),t.coinTypeB,!1);e.moveCall({target:`${i.published_at}::${Js}::add_liquidity_by_fix_coin`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(r.global_config_id),e.object(t.clmm_pool_id),s,a.targetCoin,c.targetCoin,e.pure(t.amount_a.toString()),e.pure(t.amount_b.toString()),e.pure(t.fix_amount_a),e.object(we)]});const{frams:l}=this.sdk.sdkOptions,{global_config_id:u,rewarder_manager_id:d}=L(l);return e.moveCall({target:`${l.published_at}::router::deposit`,typeArguments:[],arguments:[e.object(u),e.object(d),e.object(t.pool_id),s,e.object(we)]}),e}async addLiquidityPayload(t,e){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;e=e||new X;const r=L(n),s=L(i),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=Ye.buildCoinForAmount(e,o,BigInt(t.amount_limit_a),t.coinTypeA,!1),c=Ye.buildCoinForAmount(e,o,BigInt(t.amount_limit_b),t.coinTypeB,!1);if(t.collect_rewarder&&(e=await this.harvestPayload({pool_id:t.pool_id,position_nft_id:t.position_nft_id,clmm_pool_id:t.clmm_pool_id},e)),t.collect_fee||t.clmm_rewarder_types.length>0){const l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:t.clmm_pool_id,position_nft_id:t.position_nft_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collectFee:t.collect_fee,clmm_rewarder_types:t.clmm_rewarder_types},e,l,a.remainCoins,c.remainCoins)}return e.moveCall({target:`${n.published_at}::router::add_liquidity`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(r.global_config_id),e.object(s.global_config_id),e.object(r.rewarder_manager_id),e.object(t.pool_id),e.object(t.clmm_pool_id),e.object(t.position_nft_id),a.targetCoin,c.targetCoin,e.pure(t.amount_limit_a),e.pure(t.amount_limit_b),e.pure(t.delta_liquidity),e.object(we)]}),e}async addLiquidityFixCoinPayload(t,e){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;e=e||new X;const r=L(n),s=L(i),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=Ye.buildCoinForAmount(e,o,BigInt(t.amount_a),t.coinTypeA,!1),c=Ye.buildCoinForAmount(e,o,BigInt(t.amount_b),t.coinTypeB,!1);if(t.collect_rewarder&&(e=await this.harvestPayload({pool_id:t.pool_id,position_nft_id:t.position_nft_id,clmm_pool_id:t.clmm_pool_id},e)),t.collect_fee||t.clmm_rewarder_types.length>0){const l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:t.clmm_pool_id,position_nft_id:t.position_nft_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collectFee:t.collect_fee,clmm_rewarder_types:t.clmm_rewarder_types},e,l,a.remainCoins,c.remainCoins)}return e.moveCall({target:`${n.published_at}::router::add_liquidity_fix_coin`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(r.global_config_id),e.object(s.global_config_id),e.object(r.rewarder_manager_id),e.object(t.pool_id),e.object(t.clmm_pool_id),e.object(t.position_nft_id),a.targetCoin,c.targetCoin,e.pure(t.amount_a.toString()),e.pure(t.amount_b.toString()),e.pure(t.fix_amount_a),e.object(we)]}),e}async removeLiquidityPayload(t,e){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;e=e||new X;const r=L(n),s=L(i);if(t.collect_rewarder&&(!t.unstake||t.close_position)&&(e=await this.harvestPayload({pool_id:t.pool_id,position_nft_id:t.position_nft_id,clmm_pool_id:t.clmm_pool_id},e)),t.clmm_rewarder_types.length>0){const o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:t.clmm_pool_id,position_nft_id:t.position_nft_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collectFee:!1,clmm_rewarder_types:t.clmm_rewarder_types},e,o)}if(t.close_position){if(t.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");e.moveCall({target:`${n.published_at}::router::close_position`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(r.global_config_id),e.object(r.rewarder_manager_id),e.object(t.pool_id),e.object(s.global_config_id),e.object(t.clmm_pool_id),e.object(t.position_nft_id),e.pure(t.min_amount_a),e.pure(t.min_amount_b),e.object(we)]})}else e.moveCall({target:`${n.published_at}::router::remove_liquidity`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(r.global_config_id),e.object(s.global_config_id),e.object(r.rewarder_manager_id),e.object(t.pool_id),e.object(t.clmm_pool_id),e.object(t.position_nft_id),e.pure(t.delta_liquidity),e.pure(t.min_amount_a),e.pure(t.min_amount_b),e.object(we)]}),t.unstake&&this.withdrawPayload({pool_id:t.pool_id,position_nft_id:t.position_nft_id});return e}async buildCollectRewarderAndFeeParams(t,e,n,i,r){i===void 0&&(i=[...n]),r===void 0&&(r=[...n]);const s=ci(t.coinTypeA),o=ci(t.coinTypeB);t.collectFee&&this.collectFeePayload({clmm_pool_id:t.clmm_pool_id,position_nft_id:t.position_nft_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB},e);const a=[];return t.clmm_rewarder_types.forEach(c=>{switch(ci(c)){case s:a.push(Ye.buildCoinForAmount(e,i,BigInt(0),c,!1).targetCoin);break;case o:a.push(Ye.buildCoinForAmount(e,r,BigInt(0),c,!1).targetCoin);break;default:a.push(Ye.buildCoinForAmount(e,n,BigInt(0),c,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:t.clmm_pool_id,position_nft_id:t.position_nft_id,clmm_rewarder_types:t.clmm_rewarder_types,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,reward_coins:a},e),e}collectFeePayload(t,e){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;e=e||new X;const r=L(n),s=L(i);return e.moveCall({target:`${n.published_at}::router::collect_fee`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(r.global_config_id),e.object(s.global_config_id),e.object(t.clmm_pool_id),e.object(t.position_nft_id)]}),e}async collectClmmRewardPayload(t,e){var a;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;e=e||new X;let r=t.reward_coins;if(t.clmm_rewarder_types.length>0&&r===void 0){r=[];const c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t.clmm_rewarder_types.forEach(l=>{r.push(Ye.buildCoinForAmount(e,c,BigInt(0),l,!1).targetCoin)})}const s=L(n),o=L(i);return(a=t.clmm_rewarder_types)==null||a.forEach((c,l)=>{e&&e.moveCall({target:`${n.published_at}::router::collect_clmm_reward`,typeArguments:[c,t.coinTypeA,t.coinTypeB],arguments:[e.object(s.global_config_id),e.object(o.global_config_id),e.object(t.clmm_pool_id),e.object(t.position_nft_id),e.object(o.global_vault_id),r[l],e.object(we)]})}),e}async getFrarmsConfigs(){const{package_id:t}=this._sdk.sdkOptions.frams,e={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::config::InitConfigEvent`})).data;if(n.length>0){const r=n[0].parsedJson;e.global_config_id=r.global_config_id,e.admin_cap_id=r.admin_cap_id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::rewarder::InitRewarderManagerEvent`})).data;if(i.length>0){const r=i[0].parsedJson;e.rewarder_manager_id=r.id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e.rewarder_manager_id,options:{showContent:!0}});e.rewarder_manager_handle=s.data.content.fields.rewarders.fields.id.id}return e}updateCache(t,e,n=Oe){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},sU=class{constructor(t,e){v(this,"_cache",{});v(this,"_sdkOptions");v(this,"_launchpad");v(this,"_ido");v(this,"_xcetusModule");v(this,"_xtokenModule");v(this,"_boosterModule");v(this,"_makerModule");v(this,"_clmmSDK");v(this,"_liquidityStrategy");v(this,"_vaults");v(this,"_limitOrder");v(this,"_farmsModule");this._sdkOptions=t,this._clmmSDK=e,this._launchpad=new WF(this),this._ido=new JF(this),this._xcetusModule=new ZF(this),this._xtokenModule=new eU(this),this._boosterModule=new VF(this),this._makerModule=new KF(this),this._vaults=new nU(this),this._limitOrder=new iU(this),this._farmsModule=new rU(this),this._liquidityStrategy=new tU(this),Mm(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}getVerifySenderAddress(){const{senderAddress:t}=this.ClmmSDK;if(t.length===0||!j2(t))throw Error("this clmm config sdk senderAddess is illegal");return t}updateCache(t,e,n=Oe){let i=this._cache[t];i?(i.overdueTime=Ot(n),i.value=e):i=new zn(e,Ot(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}};function wv(t,e){return function(){return t.apply(e,arguments)}}const{toString:oU}=Object.prototype,{getPrototypeOf:Nm}=Object,Lh=(t=>e=>{const n=oU.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Xr=t=>(t=t.toLowerCase(),e=>Lh(e)===t),$h=t=>e=>typeof e===t,{isArray:_c}=Array,sl=$h("undefined");function aU(t){return t!==null&&!sl(t)&&t.constructor!==null&&!sl(t.constructor)&&Gi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yv=Xr("ArrayBuffer");function cU(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&yv(t.buffer),e}const lU=$h("string"),Gi=$h("function"),_v=$h("number"),zh=t=>t!==null&&typeof t=="object",uU=t=>t===!0||t===!1,nd=t=>{if(Lh(t)!=="object")return!1;const e=Nm(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},dU=Xr("Date"),hU=Xr("File"),fU=Xr("Blob"),pU=Xr("FileList"),gU=t=>zh(t)&&Gi(t.pipe),mU=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Gi(t.append)&&((e=Lh(t))==="formdata"||e==="object"&&Gi(t.toString)&&t.toString()==="[object FormData]"))},wU=Xr("URLSearchParams"),yU=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),_c(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(i=0;i<o;i++)a=s[i],e.call(null,t[a],a,t)}}function bv(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const vv=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),kv=t=>!sl(t)&&t!==vv;function vp(){const{caseless:t}=kv(this)&&this||{},e={},n=(i,r)=>{const s=t&&bv(e,r)||r;nd(e[s])&&nd(i)?e[s]=vp(e[s],i):nd(i)?e[s]=vp({},i):_c(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Dl(arguments[i],n);return e}const _U=(t,e,n,{allOwnKeys:i}={})=>(Dl(e,(r,s)=>{n&&Gi(r)?t[s]=wv(r,n):t[s]=r},{allOwnKeys:i}),t),bU=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vU=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},kU=(t,e,n,i)=>{let r,s,o;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)o=r[s],(!i||i(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Nm(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},SU=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},TU=t=>{if(!t)return null;if(_c(t))return t;let e=t.length;if(!_v(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},AU=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Nm(Uint8Array)),CU=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},IU=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},EU=Xr("HTMLFormElement"),xU=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),hy=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),MU=Xr("RegExp"),Sv=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Dl(n,(r,s)=>{let o;(o=e(r,s,t))!==!1&&(i[s]=o||r)}),Object.defineProperties(t,i)},NU=t=>{Sv(t,(e,n)=>{if(Gi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Gi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},OU=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return _c(t)?i(t):i(String(t).split(e)),n},DU=()=>{},jU=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Sf="abcdefghijklmnopqrstuvwxyz",fy="0123456789",Tv={DIGIT:fy,ALPHA:Sf,ALPHA_DIGIT:Sf+Sf.toUpperCase()+fy},RU=(t=16,e=Tv.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function BU(t){return!!(t&&Gi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const PU=t=>{const e=new Array(10),n=(i,r)=>{if(zh(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=_c(i)?[]:{};return Dl(i,(o,a)=>{const c=n(o,r+1);!sl(c)&&(s[a]=c)}),e[r]=void 0,s}}return i};return n(t,0)},FU=Xr("AsyncFunction"),UU=t=>t&&(zh(t)||Gi(t))&&Gi(t.then)&&Gi(t.catch),oe={isArray:_c,isArrayBuffer:yv,isBuffer:aU,isFormData:mU,isArrayBufferView:cU,isString:lU,isNumber:_v,isBoolean:uU,isObject:zh,isPlainObject:nd,isUndefined:sl,isDate:dU,isFile:hU,isBlob:fU,isRegExp:MU,isFunction:Gi,isStream:gU,isURLSearchParams:wU,isTypedArray:AU,isFileList:pU,forEach:Dl,merge:vp,extend:_U,trim:yU,stripBOM:bU,inherits:vU,toFlatObject:kU,kindOf:Lh,kindOfTest:Xr,endsWith:SU,toArray:TU,forEachEntry:CU,matchAll:IU,isHTMLForm:EU,hasOwnProperty:hy,hasOwnProp:hy,reduceDescriptors:Sv,freezeMethods:NU,toObjectSet:OU,toCamelCase:xU,noop:DU,toFiniteNumber:jU,findKey:bv,global:vv,isContextDefined:kv,ALPHABET:Tv,generateString:RU,isSpecCompliantForm:BU,toJSONObject:PU,isAsyncFn:FU,isThenable:UU};function kt(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}oe.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Av=kt.prototype,Cv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Cv[t]={value:t}});Object.defineProperties(kt,Cv);Object.defineProperty(Av,"isAxiosError",{value:!0});kt.from=(t,e,n,i,r,s)=>{const o=Object.create(Av);return oe.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),kt.call(o,t.message,e,n,i,r),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const LU=null;function kp(t){return oe.isPlainObject(t)||oe.isArray(t)}function Iv(t){return oe.endsWith(t,"[]")?t.slice(0,-2):t}function py(t,e,n){return t?t.concat(e).map(function(r,s){return r=Iv(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function $U(t){return oe.isArray(t)&&!t.some(kp)}const zU=oe.toFlatObject(oe,{},null,function(e){return/^is[A-Z]/.test(e)});function qh(t,e,n){if(!oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=oe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,w){return!oe.isUndefined(w[p])});const i=n.metaTokens,r=n.visitor||u,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(e);if(!oe.isFunction(r))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(oe.isDate(g))return g.toISOString();if(!c&&oe.isBlob(g))throw new kt("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(g)||oe.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,p,w){let _=g;if(g&&!w&&typeof g=="object"){if(oe.endsWith(p,"{}"))p=i?p:p.slice(0,-2),g=JSON.stringify(g);else if(oe.isArray(g)&&$U(g)||(oe.isFileList(g)||oe.endsWith(p,"[]"))&&(_=oe.toArray(g)))return p=Iv(p),_.forEach(function(T,R){!(oe.isUndefined(T)||T===null)&&e.append(o===!0?py([p],R,s):o===null?p:p+"[]",l(T))}),!1}return kp(g)?!0:(e.append(py(w,p,s),l(g)),!1)}const d=[],h=Object.assign(zU,{defaultVisitor:u,convertValue:l,isVisitable:kp});function f(g,p){if(!oe.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));d.push(g),oe.forEach(g,function(_,k){(!(oe.isUndefined(_)||_===null)&&r.call(e,_,oe.isString(k)?k.trim():k,p,h))===!0&&f(_,p?p.concat(k):[k])}),d.pop()}}if(!oe.isObject(t))throw new TypeError("data must be an object");return f(t),e}function gy(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Om(t,e){this._pairs=[],t&&qh(t,this,e)}const Ev=Om.prototype;Ev.append=function(e,n){this._pairs.push([e,n])};Ev.toString=function(e){const n=e?function(i){return e.call(this,i,gy)}:gy;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function qU(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xv(t,e,n){if(!e)return t;const i=n&&n.encode||qU,r=n&&n.serialize;let s;if(r?s=r(e,n):s=oe.isURLSearchParams(e)?e.toString():new Om(e,n).toString(i),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class VU{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oe.forEach(this.handlers,function(i){i!==null&&e(i)})}}const my=VU,Mv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},WU=typeof URLSearchParams<"u"?URLSearchParams:Om,KU=typeof FormData<"u"?FormData:null,ZU=typeof Blob<"u"?Blob:null,HU={isBrowser:!0,classes:{URLSearchParams:WU,FormData:KU,Blob:ZU},protocols:["http","https","file","blob","url","data"]},Nv=typeof window<"u"&&typeof document<"u",QU=(t=>Nv&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),GU=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),YU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Nv,hasStandardBrowserEnv:QU,hasStandardBrowserWebWorkerEnv:GU},Symbol.toStringTag,{value:"Module"})),qr={...YU,...HU};function XU(t,e){return qh(t,new qr.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return qr.isNode&&oe.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function JU(t){return oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function eL(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function Ov(t){function e(n,i,r,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=n.length;return o=!o&&oe.isArray(r)?r.length:o,c?(oe.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!oe.isObject(r[o]))&&(r[o]=[]),e(n,i,r[o],s)&&oe.isArray(r[o])&&(r[o]=eL(r[o])),!a)}if(oe.isFormData(t)&&oe.isFunction(t.entries)){const n={};return oe.forEachEntry(t,(i,r)=>{e(JU(i),r,n,0)}),n}return null}function tL(t,e,n){if(oe.isString(t))try{return(e||JSON.parse)(t),oe.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Dm={transitional:Mv,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=oe.isObject(e);if(s&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return r?JSON.stringify(Ov(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return XU(e,this.formSerializer).toString();if((a=oe.isFileList(e))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return qh(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),tL(e)):e}],transformResponse:[function(e){const n=this.transitional||Dm.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&oe.isString(e)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?kt.from(a,kt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qr.classes.FormData,Blob:qr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],t=>{Dm.headers[t]={}});const jm=Dm,nL=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iL=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||e[n]&&nL[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},wy=Symbol("internals");function Ec(t){return t&&String(t).trim().toLowerCase()}function id(t){return t===!1||t==null?t:oe.isArray(t)?t.map(id):String(t)}function rL(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const sL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Tf(t,e,n,i,r){if(oe.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!oe.isString(e)){if(oe.isString(i))return e.indexOf(i)!==-1;if(oe.isRegExp(i))return i.test(e)}}function oL(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function aL(t,e){const n=oe.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}let Vh=class{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(a,c,l){const u=Ec(c);if(!u)throw new Error("header name must be a non-empty string");const d=oe.findKey(r,u);(!d||r[d]===void 0||l===!0||l===void 0&&r[d]!==!1)&&(r[d||c]=id(a))}const o=(a,c)=>oe.forEach(a,(l,u)=>s(l,u,c));return oe.isPlainObject(e)||e instanceof this.constructor?o(e,n):oe.isString(e)&&(e=e.trim())&&!sL(e)?o(iL(e),n):e!=null&&s(n,e,i),this}get(e,n){if(e=Ec(e),e){const i=oe.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return rL(r);if(oe.isFunction(n))return n.call(this,r,i);if(oe.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ec(e),e){const i=oe.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Tf(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(o){if(o=Ec(o),o){const a=oe.findKey(i,o);a&&(!n||Tf(i,i[a],a,n))&&(delete i[a],r=!0)}}return oe.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||Tf(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return oe.forEach(this,(r,s)=>{const o=oe.findKey(i,s);if(o){n[o]=id(r),delete n[s];return}const a=e?oL(s):String(s).trim();a!==s&&delete n[s],n[a]=id(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return oe.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&oe.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[wy]=this[wy]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Ec(o);i[a]||(aL(r,o),i[a]=!0)}return oe.isArray(e)?e.forEach(s):s(e),this}};Vh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(Vh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});oe.freezeMethods(Vh);const ms=Vh;function Af(t,e){const n=this||jm,i=e||n,r=ms.from(i.headers);let s=i.data;return oe.forEach(t,function(a){s=a.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function Dv(t){return!!(t&&t.__CANCEL__)}function jl(t,e,n){kt.call(this,t??"canceled",kt.ERR_CANCELED,e,n),this.name="CanceledError"}oe.inherits(jl,kt,{__CANCEL__:!0});function cL(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new kt("Request failed with status code "+n.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const lL=qr.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const o=[t+"="+encodeURIComponent(e)];oe.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),oe.isString(i)&&o.push("path="+i),oe.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function uL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function dL(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function jv(t,e){return t&&!uL(e)?dL(t,e):e}const hL=qr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(o){const a=oe.isString(o)?r(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function fL(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function pL(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=i[s];o||(o=l),n[r]=c,i[r]=l;let d=s,h=0;for(;d!==r;)h+=n[d++],d=d%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),l-o<e)return;const f=u&&l-u;return f?Math.round(h*1e3/f):void 0}}function yy(t,e){let n=0;const i=pL(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-n,c=i(a),l=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-s)/c:void 0,event:r};u[e?"download":"upload"]=!0,t(u)}}const gL=typeof XMLHttpRequest<"u",mL=gL&&function(t){return new Promise(function(n,i){let r=t.data;const s=ms.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,c;function l(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let u;if(oe.isFormData(r)){if(qr.hasStandardBrowserEnv||qr.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[p,...w]=u?u.split(";").map(_=>_.trim()).filter(Boolean):[];s.setContentType([p||"multipart/form-data",...w].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+w))}const h=jv(t.baseURL,t.url);d.open(t.method.toUpperCase(),xv(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function f(){if(!d)return;const p=ms.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:p,config:t,request:d};cL(function(T){n(T),l()},function(T){i(T),l()},_),d=null}if("onloadend"in d?d.onloadend=f:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(f)},d.onabort=function(){d&&(i(new kt("Request aborted",kt.ECONNABORTED,t,d)),d=null)},d.onerror=function(){i(new kt("Network Error",kt.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let w=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||Mv;t.timeoutErrorMessage&&(w=t.timeoutErrorMessage),i(new kt(w,_.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,t,d)),d=null},qr.hasStandardBrowserEnv&&(a&&oe.isFunction(a)&&(a=a(t)),a||a!==!1&&hL(h))){const p=t.xsrfHeaderName&&t.xsrfCookieName&&lL.read(t.xsrfCookieName);p&&s.set(t.xsrfHeaderName,p)}r===void 0&&s.setContentType(null),"setRequestHeader"in d&&oe.forEach(s.toJSON(),function(w,_){d.setRequestHeader(_,w)}),oe.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",yy(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",yy(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=p=>{d&&(i(!p||p.type?new jl(null,t,d):p),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const g=fL(h);if(g&&qr.protocols.indexOf(g)===-1){i(new kt("Unsupported protocol "+g+":",kt.ERR_BAD_REQUEST,t));return}d.send(r||null)})},Sp={http:LU,xhr:mL};oe.forEach(Sp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const _y=t=>`- ${t}`,wL=t=>oe.isFunction(t)||t===null||t===!1,Rv={getAdapter:t=>{t=oe.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){n=t[s];let o;if(i=n,!wL(n)&&(i=Sp[(o=String(n)).toLowerCase()],i===void 0))throw new kt(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(_y).join(`
`):" "+_y(s[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Sp};function Cf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new jl(null,t)}function by(t){return Cf(t),t.headers=ms.from(t.headers),t.data=Af.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Rv.getAdapter(t.adapter||jm.adapter)(t).then(function(i){return Cf(t),i.data=Af.call(t,t.transformResponse,i),i.headers=ms.from(i.headers),i},function(i){return Dv(i)||(Cf(t),i&&i.response&&(i.response.data=Af.call(t,t.transformResponse,i.response),i.response.headers=ms.from(i.response.headers))),Promise.reject(i)})}const vy=t=>t instanceof ms?{...t}:t;function hc(t,e){e=e||{};const n={};function i(l,u,d){return oe.isPlainObject(l)&&oe.isPlainObject(u)?oe.merge.call({caseless:d},l,u):oe.isPlainObject(u)?oe.merge({},u):oe.isArray(u)?u.slice():u}function r(l,u,d){if(oe.isUndefined(u)){if(!oe.isUndefined(l))return i(void 0,l,d)}else return i(l,u,d)}function s(l,u){if(!oe.isUndefined(u))return i(void 0,u)}function o(l,u){if(oe.isUndefined(u)){if(!oe.isUndefined(l))return i(void 0,l)}else return i(void 0,u)}function a(l,u,d){if(d in e)return i(l,u);if(d in t)return i(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>r(vy(l),vy(u),!0)};return oe.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=c[u]||r,h=d(t[u],e[u],u);oe.isUndefined(h)&&d!==a||(n[u]=h)}),n}const Bv="1.6.8",Rm={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Rm[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const ky={};Rm.transitional=function(e,n,i){function r(s,o){return"[Axios v"+Bv+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(e===!1)throw new kt(r(o," has been removed"+(n?" in "+n:"")),kt.ERR_DEPRECATED);return n&&!ky[o]&&(ky[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function yL(t,e,n){if(typeof t!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new kt("option "+s+" must be "+c,kt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new kt("Unknown option "+s,kt.ERR_BAD_OPTION)}}const Tp={assertOptions:yL,validators:Rm},Cs=Tp.validators;let Xd=class{constructor(e){this.defaults=e,this.interceptors={request:new my,response:new my}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=hc(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&Tp.assertOptions(i,{silentJSONParsing:Cs.transitional(Cs.boolean),forcedJSONParsing:Cs.transitional(Cs.boolean),clarifyTimeoutError:Cs.transitional(Cs.boolean)},!1),r!=null&&(oe.isFunction(r)?n.paramsSerializer={serialize:r}:Tp.assertOptions(r,{encode:Cs.function,serialize:Cs.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&oe.merge(s.common,s[n.method]);s&&oe.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=ms.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(c=c&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const l=[];this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,d=0,h;if(!c){const g=[by.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),h=g.length,u=Promise.resolve(n);d<h;)u=u.then(g[d++],g[d++]);return u}h=a.length;let f=n;for(d=0;d<h;){const g=a[d++],p=a[d++];try{f=g(f)}catch(w){p.call(this,w);break}}try{u=by.call(this,f)}catch(g){return Promise.reject(g)}for(d=0,h=l.length;d<h;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=hc(this.defaults,e);const n=jv(e.baseURL,e.url);return xv(n,e.params,e.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(e){Xd.prototype[e]=function(n,i){return this.request(hc(i||{},{method:e,url:n,data:(i||{}).data}))}});oe.forEach(["post","put","patch"],function(e){function n(i){return function(s,o,a){return this.request(hc(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Xd.prototype[e]=n(),Xd.prototype[e+"Form"]=n(!0)});const rd=Xd;let _L=class Pv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,a){i.reason||(i.reason=new jl(s,o,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Pv(function(r){e=r}),cancel:e}}};const bL=_L;function vL(t){return function(n){return t.apply(null,n)}}function kL(t){return oe.isObject(t)&&t.isAxiosError===!0}const Ap={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ap).forEach(([t,e])=>{Ap[e]=t});const SL=Ap;function Fv(t){const e=new rd(t),n=wv(rd.prototype.request,e);return oe.extend(n,rd.prototype,e,{allOwnKeys:!0}),oe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return Fv(hc(t,r))},n}const un=Fv(jm);un.Axios=rd;un.CanceledError=jl;un.CancelToken=bL;un.isCancel=Dv;un.VERSION=Bv;un.toFormData=qh;un.AxiosError=kt;un.Cancel=un.CanceledError;un.all=function(e){return Promise.all(e)};un.spread=vL;un.isAxiosError=kL;un.mergeConfig=hc;un.AxiosHeaders=ms;un.formToJSON=t=>Ov(oe.isHTMLForm(t)?new FormData(t):t);un.getAdapter=Rv.getAdapter;un.HttpStatusCode=SL;un.default=un;const To=un,{Axios:DV,AxiosError:TL,CanceledError:jV,isCancel:RV,CancelToken:BV,VERSION:PV,all:FV,Cancel:UV,isAxiosError:LV,spread:$V,toFormData:zV,AxiosHeaders:qV,HttpStatusCode:VV,formToJSON:WV,getAdapter:KV,mergeConfig:ZV}=To;let AL=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");class ra extends Error{}class CL extends ra{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class IL extends ra{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class EL extends ra{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Ra extends ra{}class Uv extends ra{constructor(e){super(`Invalid unit ${e}`)}}class ri extends ra{}class Is extends ra{constructor(){super("Zone is an abstract class")}}const xe="numeric",br="short",xi="long",Jd={year:xe,month:xe,day:xe},Lv={year:xe,month:br,day:xe},xL={year:xe,month:br,day:xe,weekday:br},$v={year:xe,month:xi,day:xe},zv={year:xe,month:xi,day:xe,weekday:xi},qv={hour:xe,minute:xe},Vv={hour:xe,minute:xe,second:xe},Wv={hour:xe,minute:xe,second:xe,timeZoneName:br},Kv={hour:xe,minute:xe,second:xe,timeZoneName:xi},Zv={hour:xe,minute:xe,hourCycle:"h23"},Hv={hour:xe,minute:xe,second:xe,hourCycle:"h23"},Qv={hour:xe,minute:xe,second:xe,hourCycle:"h23",timeZoneName:br},Gv={hour:xe,minute:xe,second:xe,hourCycle:"h23",timeZoneName:xi},Yv={year:xe,month:xe,day:xe,hour:xe,minute:xe},Xv={year:xe,month:xe,day:xe,hour:xe,minute:xe,second:xe},Jv={year:xe,month:br,day:xe,hour:xe,minute:xe},ek={year:xe,month:br,day:xe,hour:xe,minute:xe,second:xe},ML={year:xe,month:br,day:xe,weekday:br,hour:xe,minute:xe},tk={year:xe,month:xi,day:xe,hour:xe,minute:xe,timeZoneName:br},nk={year:xe,month:xi,day:xe,hour:xe,minute:xe,second:xe,timeZoneName:br},ik={year:xe,month:xi,day:xe,weekday:xi,hour:xe,minute:xe,timeZoneName:xi},rk={year:xe,month:xi,day:xe,weekday:xi,hour:xe,minute:xe,second:xe,timeZoneName:xi};class Rl{get type(){throw new Is}get name(){throw new Is}get ianaName(){return this.name}get isUniversal(){throw new Is}offsetName(e,n){throw new Is}formatOffset(e,n){throw new Is}offset(e){throw new Is}equals(e){throw new Is}get isValid(){throw new Is}}let If=null;class Wh extends Rl{static get instance(){return If===null&&(If=new Wh),If}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:i}){return fk(e,n,i)}formatOffset(e,n){return Zc(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let sd={};function NL(t){return sd[t]||(sd[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),sd[t]}const OL={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function DL(t,e){const n=t.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,s,o,a,c,l,u]=i;return[o,r,s,a,c,l,u]}function jL(t,e){const n=t.formatToParts(e),i=[];for(let r=0;r<n.length;r++){const{type:s,value:o}=n[r],a=OL[s];s==="era"?i[a]=o:st(a)||(i[a]=parseInt(o,10))}return i}let Cu={};class ys extends Rl{static create(e){return Cu[e]||(Cu[e]=new ys(e)),Cu[e]}static resetCache(){Cu={},sd={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=ys.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:i}){return fk(e,n,i,this.name)}formatOffset(e,n){return Zc(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const i=NL(this.name);let[r,s,o,a,c,l,u]=i.formatToParts?jL(i,n):DL(i,n);a==="BC"&&(r=-Math.abs(r)+1);const h=Zh({year:r,month:s,day:o,hour:c===24?0:c,minute:l,second:u,millisecond:0});let f=+n;const g=f%1e3;return f-=g>=0?g:1e3+g,(h-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Sy={};function RL(t,e={}){const n=JSON.stringify([t,e]);let i=Sy[n];return i||(i=new Intl.ListFormat(t,e),Sy[n]=i),i}let Cp={};function Ip(t,e={}){const n=JSON.stringify([t,e]);let i=Cp[n];return i||(i=new Intl.DateTimeFormat(t,e),Cp[n]=i),i}let Ep={};function BL(t,e={}){const n=JSON.stringify([t,e]);let i=Ep[n];return i||(i=new Intl.NumberFormat(t,e),Ep[n]=i),i}let xp={};function PL(t,e={}){const{base:n,...i}=e,r=JSON.stringify([t,i]);let s=xp[r];return s||(s=new Intl.RelativeTimeFormat(t,e),xp[r]=s),s}let Lc=null;function FL(){return Lc||(Lc=new Intl.DateTimeFormat().resolvedOptions().locale,Lc)}let Ty={};function UL(t){let e=Ty[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,Ty[t]=e}return e}function LL(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let i,r;try{i=Ip(t).resolvedOptions(),r=t}catch{const c=t.substring(0,n);i=Ip(c).resolvedOptions(),r=c}const{numberingSystem:s,calendar:o}=i;return[r,s,o]}}function $L(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function zL(t){const e=[];for(let n=1;n<=12;n++){const i=rt.utc(2009,n,1);e.push(t(i))}return e}function qL(t){const e=[];for(let n=1;n<=7;n++){const i=rt.utc(2016,11,13+n);e.push(t(i))}return e}function Iu(t,e,n,i){const r=t.listingMode();return r==="error"?null:r==="en"?n(e):i(e)}function VL(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class WL{constructor(e,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:s,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=BL(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):Um(e,3);return cn(n,this.padTo)}}}class KL{constructor(e,n,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&ys.create(a).valid?(r=a,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=Ip(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class ZL{constructor(e,n,i){this.opts={style:"long",...i},!n&&dk()&&(this.rtf=PL(e,i))}format(e,n){return this.rtf?this.rtf.format(e,n):f9(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const HL={firstDay:1,minimalDays:4,weekend:[6,7]};class Pt{static fromOpts(e){return Pt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,i,r,s=!1){const o=e||sn.defaultLocale,a=o||(s?"en-US":FL()),c=n||sn.defaultNumberingSystem,l=i||sn.defaultOutputCalendar,u=Mp(r)||sn.defaultWeekSettings;return new Pt(a,c,l,u,o)}static resetCache(){Lc=null,Cp={},Ep={},xp={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:i,weekSettings:r}={}){return Pt.create(e,n,i,r)}constructor(e,n,i,r,s){const[o,a,c]=LL(e);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=i||c||null,this.weekSettings=r,this.intl=$L(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=VL(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Pt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Mp(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Iu(this,e,mk,()=>{const i=n?{month:e,day:"numeric"}:{month:e},r=n?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=zL(s=>this.extract(s,i,"month"))),this.monthsCache[r][e]})}weekdays(e,n=!1){return Iu(this,e,_k,()=>{const i=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=n?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=qL(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return Iu(this,void 0,()=>bk,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[rt.utc(2016,11,13,9),rt.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Iu(this,e,vk,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[rt.utc(-40,1,1),rt.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[e]})}extract(e,n,i){const r=this.dtFormatter(e,n),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new WL(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new KL(e,this.intl,n)}relFormatter(e={}){return new ZL(this.intl,this.isEnglish(),e)}listFormatter(e={}){return RL(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:hk()?UL(this.locale):HL}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let Ef=null;class Qn extends Rl{static get utcInstance(){return Ef===null&&(Ef=new Qn(0)),Ef}static instance(e){return e===0?Qn.utcInstance:new Qn(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Qn(Hh(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Zc(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Zc(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Zc(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class QL extends Rl{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Us(t,e){if(st(t)||t===null)return e;if(t instanceof Rl)return t;if(XL(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?Wh.instance:n==="utc"||n==="gmt"?Qn.utcInstance:Qn.parseSpecifier(n)||ys.create(t)}else return Wo(t)?Qn.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new QL(t)}let Ay=()=>Date.now(),Cy="system",Iy=null,Ey=null,xy=null,My=60,Ny,Oy=null;class sn{static get now(){return Ay}static set now(e){Ay=e}static set defaultZone(e){Cy=e}static get defaultZone(){return Us(Cy,Wh.instance)}static get defaultLocale(){return Iy}static set defaultLocale(e){Iy=e}static get defaultNumberingSystem(){return Ey}static set defaultNumberingSystem(e){Ey=e}static get defaultOutputCalendar(){return xy}static set defaultOutputCalendar(e){xy=e}static get defaultWeekSettings(){return Oy}static set defaultWeekSettings(e){Oy=Mp(e)}static get twoDigitCutoffYear(){return My}static set twoDigitCutoffYear(e){My=e%100}static get throwOnInvalid(){return Ny}static set throwOnInvalid(e){Ny=e}static resetCaches(){Pt.resetCache(),ys.resetCache()}}class fr{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const sk=[0,31,59,90,120,151,181,212,243,273,304,334],ok=[0,31,60,91,121,152,182,213,244,274,305,335];function Ki(t,e){return new fr("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Bm(t,e,n){const i=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return r===0?7:r}function ak(t,e,n){return n+(Bl(t)?ok:sk)[e-1]}function ck(t,e){const n=Bl(t)?ok:sk,i=n.findIndex(s=>s<e),r=e-n[i];return{month:i+1,day:r}}function Pm(t,e){return(t-e+7)%7+1}function eh(t,e=4,n=1){const{year:i,month:r,day:s}=t,o=ak(i,r,s),a=Pm(Bm(i,r,s),n);let c=Math.floor((o-a+14-e)/7),l;return c<1?(l=i-1,c=ol(l,e,n)):c>ol(i,e,n)?(l=i+1,c=1):l=i,{weekYear:l,weekNumber:c,weekday:a,...Qh(t)}}function Dy(t,e=4,n=1){const{weekYear:i,weekNumber:r,weekday:s}=t,o=Pm(Bm(i,1,e),n),a=Ha(i);let c=r*7+s-o-7+e,l;c<1?(l=i-1,c+=Ha(l)):c>a?(l=i+1,c-=Ha(i)):l=i;const{month:u,day:d}=ck(l,c);return{year:l,month:u,day:d,...Qh(t)}}function xf(t){const{year:e,month:n,day:i}=t,r=ak(e,n,i);return{year:e,ordinal:r,...Qh(t)}}function jy(t){const{year:e,ordinal:n}=t,{month:i,day:r}=ck(e,n);return{year:e,month:i,day:r,...Qh(t)}}function Ry(t,e){if(!st(t.localWeekday)||!st(t.localWeekNumber)||!st(t.localWeekYear)){if(!st(t.weekday)||!st(t.weekNumber)||!st(t.weekYear))throw new Ra("Cannot mix locale-based week fields with ISO-based week fields");return st(t.localWeekday)||(t.weekday=t.localWeekday),st(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),st(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function GL(t,e=4,n=1){const i=Kh(t.weekYear),r=Zi(t.weekNumber,1,ol(t.weekYear,e,n)),s=Zi(t.weekday,1,7);return i?r?s?!1:Ki("weekday",t.weekday):Ki("week",t.weekNumber):Ki("weekYear",t.weekYear)}function YL(t){const e=Kh(t.year),n=Zi(t.ordinal,1,Ha(t.year));return e?n?!1:Ki("ordinal",t.ordinal):Ki("year",t.year)}function lk(t){const e=Kh(t.year),n=Zi(t.month,1,12),i=Zi(t.day,1,th(t.year,t.month));return e?n?i?!1:Ki("day",t.day):Ki("month",t.month):Ki("year",t.year)}function uk(t){const{hour:e,minute:n,second:i,millisecond:r}=t,s=Zi(e,0,23)||e===24&&n===0&&i===0&&r===0,o=Zi(n,0,59),a=Zi(i,0,59),c=Zi(r,0,999);return s?o?a?c?!1:Ki("millisecond",r):Ki("second",i):Ki("minute",n):Ki("hour",e)}function st(t){return typeof t>"u"}function Wo(t){return typeof t=="number"}function Kh(t){return typeof t=="number"&&t%1===0}function XL(t){return typeof t=="string"}function JL(t){return Object.prototype.toString.call(t)==="[object Date]"}function dk(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function hk(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function e9(t){return Array.isArray(t)?t:[t]}function By(t,e,n){if(t.length!==0)return t.reduce((i,r)=>{const s=[e(r),r];return i&&n(i[0],s[0])===i[0]?i:s},null)[1]}function t9(t,e){return e.reduce((n,i)=>(n[i]=t[i],n),{})}function fc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mp(t){if(t==null)return null;if(typeof t!="object")throw new ri("Week settings must be an object");if(!Zi(t.firstDay,1,7)||!Zi(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Zi(e,1,7)))throw new ri("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Zi(t,e,n){return Kh(t)&&t>=e&&t<=n}function n9(t,e){return t-e*Math.floor(t/e)}function cn(t,e=2){const n=t<0;let i;return n?i="-"+(""+-t).padStart(e,"0"):i=(""+t).padStart(e,"0"),i}function Bs(t){if(!(st(t)||t===null||t===""))return parseInt(t,10)}function mo(t){if(!(st(t)||t===null||t===""))return parseFloat(t)}function Fm(t){if(!(st(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Um(t,e,n=!1){const i=10**e;return(n?Math.trunc:Math.round)(t*i)/i}function Bl(t){return t%4===0&&(t%100!==0||t%400===0)}function Ha(t){return Bl(t)?366:365}function th(t,e){const n=n9(e-1,12)+1,i=t+(e-n)/12;return n===2?Bl(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Zh(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Py(t,e,n){return-Pm(Bm(t,1,e),n)+e-1}function ol(t,e=4,n=1){const i=Py(t,e,n),r=Py(t+1,e,n);return(Ha(t)-i+r)/7}function Np(t){return t>99?t:t>sn.twoDigitCutoffYear?1900+t:2e3+t}function fk(t,e,n,i=null){const r=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(r).find(c=>c.type.toLowerCase()==="timezonename");return a?a.value:null}function Hh(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const i=parseInt(e,10)||0,r=n<0||Object.is(n,-0)?-i:i;return n*60+r}function pk(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ri(`Invalid unit value ${t}`);return e}function nh(t,e){const n={};for(const i in t)if(fc(t,i)){const r=t[i];if(r==null)continue;n[e(i)]=pk(r)}return n}function Zc(t,e){const n=Math.trunc(Math.abs(t/60)),i=Math.trunc(Math.abs(t%60)),r=t>=0?"+":"-";switch(e){case"short":return`${r}${cn(n,2)}:${cn(i,2)}`;case"narrow":return`${r}${n}${i>0?`:${i}`:""}`;case"techie":return`${r}${cn(n,2)}${cn(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Qh(t){return t9(t,["hour","minute","second","millisecond"])}const i9=["January","February","March","April","May","June","July","August","September","October","November","December"],gk=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r9=["J","F","M","A","M","J","J","A","S","O","N","D"];function mk(t){switch(t){case"narrow":return[...r9];case"short":return[...gk];case"long":return[...i9];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const wk=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],yk=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],s9=["M","T","W","T","F","S","S"];function _k(t){switch(t){case"narrow":return[...s9];case"short":return[...yk];case"long":return[...wk];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const bk=["AM","PM"],o9=["Before Christ","Anno Domini"],a9=["BC","AD"],c9=["B","A"];function vk(t){switch(t){case"narrow":return[...c9];case"short":return[...a9];case"long":return[...o9];default:return null}}function l9(t){return bk[t.hour<12?0:1]}function u9(t,e){return _k(e)[t.weekday-1]}function d9(t,e){return mk(e)[t.month-1]}function h9(t,e){return vk(e)[t.year<0?0:1]}function f9(t,e,n="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const d=t==="days";switch(e){case 1:return d?"tomorrow":`next ${r[t][0]}`;case-1:return d?"yesterday":`last ${r[t][0]}`;case 0:return d?"today":`this ${r[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),c=a===1,l=r[t],u=i?c?l[1]:l[2]||l[1]:c?r[t][0]:t;return o?`${a} ${u} ago`:`in ${a} ${u}`}function Fy(t,e){let n="";for(const i of t)i.literal?n+=i.val:n+=e(i.val);return n}const p9={D:Jd,DD:Lv,DDD:$v,DDDD:zv,t:qv,tt:Vv,ttt:Wv,tttt:Kv,T:Zv,TT:Hv,TTT:Qv,TTTT:Gv,f:Yv,ff:Jv,fff:tk,ffff:ik,F:Xv,FF:ek,FFF:nk,FFFF:rk};class $n{static create(e,n={}){return new $n(e,n)}static parseFormat(e){let n=null,i="",r=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),n=null,i="",r=!r):r||a===n?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return p9[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return cn(e,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,n){const i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,g)=>this.loc.extract(e,f,g),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>i?l9(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(f,g)=>i?d9(e,f):s(g?{month:f}:{month:f,day:"numeric"},"month"),l=(f,g)=>i?u9(e,f):s(g?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const g=$n.macroTokenToFormatOpts(f);return g?this.formatWithSystemDefault(e,g):f},d=f=>i?h9(e,f):s({era:f},"era"),h=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(f)}};return Fy($n.parseFormat(n),h)}formatDurationFromString(e,n){const i=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=c=>l=>{const u=i(l);return u?this.num(c.get(u),l.length):l},s=$n.parseFormat(n),o=s.reduce((c,{literal:l,val:u})=>l?c:c.concat(u),[]),a=e.shiftTo(...o.map(i).filter(c=>c));return Fy(s,r(a))}}const kk=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function bc(...t){const e=t.reduce((n,i)=>n+i.source,"");return RegExp(`^${e}$`)}function vc(...t){return e=>t.reduce(([n,i,r],s)=>{const[o,a,c]=s(e,r);return[{...n,...o},a||i,c]},[{},null,1]).slice(0,2)}function kc(t,...e){if(t==null)return[null,null];for(const[n,i]of e){const r=n.exec(t);if(r)return i(r)}return[null,null]}function Sk(...t){return(e,n)=>{const i={};let r;for(r=0;r<t.length;r++)i[t[r]]=Bs(e[n+r]);return[i,null,n+r]}}const Tk=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,g9=`(?:${Tk.source}?(?:\\[(${kk.source})\\])?)?`,Lm=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Ak=RegExp(`${Lm.source}${g9}`),$m=RegExp(`(?:T${Ak.source})?`),m9=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,w9=/(\d{4})-?W(\d\d)(?:-?(\d))?/,y9=/(\d{4})-?(\d{3})/,_9=Sk("weekYear","weekNumber","weekDay"),b9=Sk("year","ordinal"),v9=/(\d{4})-(\d\d)-(\d\d)/,Ck=RegExp(`${Lm.source} ?(?:${Tk.source}|(${kk.source}))?`),k9=RegExp(`(?: ${Ck.source})?`);function Qa(t,e,n){const i=t[e];return st(i)?n:Bs(i)}function S9(t,e){return[{year:Qa(t,e),month:Qa(t,e+1,1),day:Qa(t,e+2,1)},null,e+3]}function Sc(t,e){return[{hours:Qa(t,e,0),minutes:Qa(t,e+1,0),seconds:Qa(t,e+2,0),milliseconds:Fm(t[e+3])},null,e+4]}function Pl(t,e){const n=!t[e]&&!t[e+1],i=Hh(t[e+1],t[e+2]),r=n?null:Qn.instance(i);return[{},r,e+3]}function Fl(t,e){const n=t[e]?ys.create(t[e]):null;return[{},n,e+1]}const T9=RegExp(`^T?${Lm.source}$`),A9=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function C9(t){const[e,n,i,r,s,o,a,c,l]=t,u=e[0]==="-",d=c&&c[0]==="-",h=(f,g=!1)=>f!==void 0&&(g||f&&u)?-f:f;return[{years:h(mo(n)),months:h(mo(i)),weeks:h(mo(r)),days:h(mo(s)),hours:h(mo(o)),minutes:h(mo(a)),seconds:h(mo(c),c==="-0"),milliseconds:h(Fm(l),d)}]}const I9={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function zm(t,e,n,i,r,s,o){const a={year:e.length===2?Np(Bs(e)):Bs(e),month:gk.indexOf(n)+1,day:Bs(i),hour:Bs(r),minute:Bs(s)};return o&&(a.second=Bs(o)),t&&(a.weekday=t.length>3?wk.indexOf(t)+1:yk.indexOf(t)+1),a}const E9=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function x9(t){const[,e,n,i,r,s,o,a,c,l,u,d]=t,h=zm(e,r,i,n,s,o,a);let f;return c?f=I9[c]:l?f=0:f=Hh(u,d),[h,new Qn(f)]}function M9(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const N9=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,O9=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,D9=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Uy(t){const[,e,n,i,r,s,o,a]=t;return[zm(e,r,i,n,s,o,a),Qn.utcInstance]}function j9(t){const[,e,n,i,r,s,o,a]=t;return[zm(e,a,n,i,r,s,o),Qn.utcInstance]}const R9=bc(m9,$m),B9=bc(w9,$m),P9=bc(y9,$m),F9=bc(Ak),Ik=vc(S9,Sc,Pl,Fl),U9=vc(_9,Sc,Pl,Fl),L9=vc(b9,Sc,Pl,Fl),$9=vc(Sc,Pl,Fl);function z9(t){return kc(t,[R9,Ik],[B9,U9],[P9,L9],[F9,$9])}function q9(t){return kc(M9(t),[E9,x9])}function V9(t){return kc(t,[N9,Uy],[O9,Uy],[D9,j9])}function W9(t){return kc(t,[A9,C9])}const K9=vc(Sc);function Z9(t){return kc(t,[T9,K9])}const H9=bc(v9,k9),Q9=bc(Ck),G9=vc(Sc,Pl,Fl);function Y9(t){return kc(t,[H9,Ik],[Q9,G9])}const Ly="Invalid Duration",Ek={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},X9={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Ek},Ui=146097/400,pa=146097/4800,J9={years:{quarters:4,months:12,weeks:Ui/7,days:Ui,hours:Ui*24,minutes:Ui*24*60,seconds:Ui*24*60*60,milliseconds:Ui*24*60*60*1e3},quarters:{months:3,weeks:Ui/28,days:Ui/4,hours:Ui*24/4,minutes:Ui*24*60/4,seconds:Ui*24*60*60/4,milliseconds:Ui*24*60*60*1e3/4},months:{weeks:pa/7,days:pa,hours:pa*24,minutes:pa*24*60,seconds:pa*24*60*60,milliseconds:pa*24*60*60*1e3},...Ek},Po=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],e$=Po.slice(0).reverse();function Es(t,e,n=!1){const i={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new gt(i)}function xk(t,e){let n=e.milliseconds??0;for(const i of e$.slice(1))e[i]&&(n+=e[i]*t[i].milliseconds);return n}function $y(t,e){const n=xk(t,e)<0?-1:1;Po.reduceRight((i,r)=>{if(st(e[r]))return i;if(i){const s=e[i]*n,o=t[r][i],a=Math.floor(s/o);e[r]+=a*n,e[i]-=a*o*n}return r},null),Po.reduce((i,r)=>{if(st(e[r]))return i;if(i){const s=e[i]%1;e[i]-=s,e[r]+=s*t[i][r]}return r},null)}function t$(t){const e={};for(const[n,i]of Object.entries(t))i!==0&&(e[n]=i);return e}class gt{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let i=n?J9:X9;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Pt.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,n){return gt.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new ri(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new gt({values:nh(e,gt.normalizeUnit),loc:Pt.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Wo(e))return gt.fromMillis(e);if(gt.isDuration(e))return e;if(typeof e=="object")return gt.fromObject(e);throw new ri(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[i]=W9(e);return i?gt.fromObject(i,n):gt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[i]=Z9(e);return i?gt.fromObject(i,n):gt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new ri("need to specify a reason the Duration is invalid");const i=e instanceof fr?e:new fr(e,n);if(sn.throwOnInvalid)throw new EL(i);return new gt({invalid:i})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new Uv(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?$n.create(this.loc,i).formatDurationFromString(this,e):Ly}toHuman(e={}){if(!this.isValid)return Ly;const n=Po.map(i=>{const r=this.values[i];return st(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Um(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},rt.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?xk(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=gt.fromDurationLike(e),i={};for(const r of Po)(fc(n.values,r)||fc(this.values,r))&&(i[r]=n.get(r)+this.get(r));return Es(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const n=gt.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=pk(e(this.values[i],i));return Es(this,{values:n},!0)}get(e){return this[gt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...nh(e,gt.normalizeUnit)};return Es(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:i,matrix:r}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:r,conversionAccuracy:i};return Es(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return $y(this.matrix,e),Es(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=t$(this.normalize().shiftToAll().toObject());return Es(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>gt.normalizeUnit(o));const n={},i={},r=this.toObject();let s;for(const o of Po)if(e.indexOf(o)>=0){s=o;let a=0;for(const l in i)a+=this.matrix[l][o]*i[l],i[l]=0;Wo(r[o])&&(a+=r[o]);const c=Math.trunc(a);n[o]=c,i[o]=(a*1e3-c*1e3)/1e3}else Wo(r[o])&&(i[o]=r[o]);for(const o in i)i[o]!==0&&(n[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return $y(this.matrix,n),Es(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return Es(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(const i of Po)if(!n(this.values[i],e.values[i]))return!1;return!0}}const ga="Invalid Interval";function n$(t,e){return!t||!t.isValid?Gt.invalid("missing or invalid start"):!e||!e.isValid?Gt.invalid("missing or invalid end"):e<t?Gt.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Gt{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new ri("need to specify a reason the Interval is invalid");const i=e instanceof fr?e:new fr(e,n);if(sn.throwOnInvalid)throw new IL(i);return new Gt({invalid:i})}static fromDateTimes(e,n){const i=Mc(e),r=Mc(n),s=n$(i,r);return s??new Gt({start:i,end:r})}static after(e,n){const i=gt.fromDurationLike(n),r=Mc(e);return Gt.fromDateTimes(r,r.plus(i))}static before(e,n){const i=gt.fromDurationLike(n),r=Mc(e);return Gt.fromDateTimes(r.minus(i),r)}static fromISO(e,n){const[i,r]=(e||"").split("/",2);if(i&&r){let s,o;try{s=rt.fromISO(i,n),o=s.isValid}catch{o=!1}let a,c;try{a=rt.fromISO(r,n),c=a.isValid}catch{c=!1}if(o&&c)return Gt.fromDateTimes(s,a);if(o){const l=gt.fromISO(r,n);if(l.isValid)return Gt.after(s,l)}else if(c){const l=gt.fromISO(i,n);if(l.isValid)return Gt.before(a,l)}}return Gt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const i=this.start.startOf(e,n);let r;return n!=null&&n.useLocaleWeeks?r=this.end.reconfigure({locale:i.locale}):r=this.end,r=r.startOf(e,n),Math.floor(r.diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Gt.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(Mc).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s:r}=this,s=0;for(;r<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;i.push(Gt.fromDateTimes(r,a)),r=a,s+=1}return i}splitBy(e){const n=gt.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,r=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(c=>c*r));s=+a>+this.e?this.e:a,o.push(Gt.fromDateTimes(i,s)),i=s,r+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return n>=i?null:Gt.fromDateTimes(n,i)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return Gt.fromDateTimes(n,i)}static merge(e){const[n,i]=e.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return i&&n.push(i),n}static xor(e){let n=null,i=0;const r=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((c,l)=>c.time-l.time);for(const c of a)i+=c.type==="s"?1:-1,i===1?n=c.time:(n&&+n!=+c.time&&r.push(Gt.fromDateTimes(n,c.time)),n=null);return Gt.merge(r)}difference(...e){return Gt.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:ga}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Jd,n={}){return this.isValid?$n.create(this.s.loc.clone(n),e).formatInterval(this):ga}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ga}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ga}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ga}toFormat(e,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:ga}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):gt.invalid(this.invalidReason)}mapEndpoints(e){return Gt.fromDateTimes(e(this.s),e(this.e))}}class Eu{static hasDST(e=sn.defaultZone){const n=rt.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return ys.isValidZone(e)}static normalizeZone(e){return Us(e,sn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Pt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Pt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Pt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||Pt.create(n,i,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||Pt.create(n,i,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||Pt.create(n,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||Pt.create(n,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Pt.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Pt.create(n,null,"gregory").eras(e)}static features(){return{relative:dk(),localeWeek:hk()}}}function zy(t,e){const n=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(e)-n(t);return Math.floor(gt.fromMillis(i).as("days"))}function i$(t,e,n){const i=[["years",(c,l)=>l.year-c.year],["quarters",(c,l)=>l.quarter-c.quarter+(l.year-c.year)*4],["months",(c,l)=>l.month-c.month+(l.year-c.year)*12],["weeks",(c,l)=>{const u=zy(c,l);return(u-u%7)/7}],["days",zy]],r={},s=t;let o,a;for(const[c,l]of i)n.indexOf(c)>=0&&(o=c,r[c]=l(t,e),a=s.plus(r),a>e?(r[c]--,t=s.plus(r),t>e&&(a=t,r[c]--,t=s.plus(r))):t=a);return[t,r,a,o]}function r$(t,e,n,i){let[r,s,o,a]=i$(t,e,n);const c=e-r,l=n.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);l.length===0&&(o<e&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+c/(o-r)));const u=gt.fromObject(s,i);return l.length>0?gt.fromMillis(c,i).shiftTo(...l).plus(u):u}const qm={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},qy={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},s$=qm.hanidec.replace(/[\[|\]]/g,"").split("");function o$(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(t[n].search(qm.hanidec)!==-1)e+=s$.indexOf(t[n]);else for(const r in qy){const[s,o]=qy[r];i>=s&&i<=o&&(e+=i-s)}}return parseInt(e,10)}else return e}function rr({numberingSystem:t},e=""){return new RegExp(`${qm[t||"latn"]}${e}`)}const a$="missing Intl.DateTimeFormat.formatToParts support";function Dt(t,e=n=>n){return{regex:t,deser:([n])=>e(o$(n))}}const c$=String.fromCharCode(160),Mk=`[ ${c$}]`,Nk=new RegExp(Mk,"g");function l$(t){return t.replace(/\./g,"\\.?").replace(Nk,Mk)}function Vy(t){return t.replace(/\./g,"").replace(Nk," ").toLowerCase()}function sr(t,e){return t===null?null:{regex:RegExp(t.map(l$).join("|")),deser:([n])=>t.findIndex(i=>Vy(n)===Vy(i))+e}}function Wy(t,e){return{regex:t,deser:([,n,i])=>Hh(n,i),groups:e}}function xu(t){return{regex:t,deser:([e])=>e}}function u$(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d$(t,e){const n=rr(e),i=rr(e,"{2}"),r=rr(e,"{3}"),s=rr(e,"{4}"),o=rr(e,"{6}"),a=rr(e,"{1,2}"),c=rr(e,"{1,3}"),l=rr(e,"{1,6}"),u=rr(e,"{1,9}"),d=rr(e,"{2,4}"),h=rr(e,"{4,6}"),f=w=>({regex:RegExp(u$(w.val)),deser:([_])=>_,literal:!0}),p=(w=>{if(t.literal)return f(w);switch(w.val){case"G":return sr(e.eras("short"),0);case"GG":return sr(e.eras("long"),0);case"y":return Dt(l);case"yy":return Dt(d,Np);case"yyyy":return Dt(s);case"yyyyy":return Dt(h);case"yyyyyy":return Dt(o);case"M":return Dt(a);case"MM":return Dt(i);case"MMM":return sr(e.months("short",!0),1);case"MMMM":return sr(e.months("long",!0),1);case"L":return Dt(a);case"LL":return Dt(i);case"LLL":return sr(e.months("short",!1),1);case"LLLL":return sr(e.months("long",!1),1);case"d":return Dt(a);case"dd":return Dt(i);case"o":return Dt(c);case"ooo":return Dt(r);case"HH":return Dt(i);case"H":return Dt(a);case"hh":return Dt(i);case"h":return Dt(a);case"mm":return Dt(i);case"m":return Dt(a);case"q":return Dt(a);case"qq":return Dt(i);case"s":return Dt(a);case"ss":return Dt(i);case"S":return Dt(c);case"SSS":return Dt(r);case"u":return xu(u);case"uu":return xu(a);case"uuu":return Dt(n);case"a":return sr(e.meridiems(),0);case"kkkk":return Dt(s);case"kk":return Dt(d,Np);case"W":return Dt(a);case"WW":return Dt(i);case"E":case"c":return Dt(n);case"EEE":return sr(e.weekdays("short",!1),1);case"EEEE":return sr(e.weekdays("long",!1),1);case"ccc":return sr(e.weekdays("short",!0),1);case"cccc":return sr(e.weekdays("long",!0),1);case"Z":case"ZZ":return Wy(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return Wy(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return xu(/[a-z_+-/]{1,256}?/i);case" ":return xu(/[^\S\n\r]/);default:return f(w)}})(t)||{invalidReason:a$};return p.token=t,p}const h$={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function f$(t,e,n){const{type:i,value:r}=t;if(i==="literal"){const c=/^\s+$/.test(r);return{literal:!c,val:c?" ":r}}const s=e[i];let o=i;i==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=h$[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function p$(t){return[`^${t.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,t]}function g$(t,e,n){const i=t.match(e);if(i){const r={};let s=1;for(const o in n)if(fc(n,o)){const a=n[o],c=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(i.slice(s,s+c))),s+=c}return[i,r]}else return[i,{}]}function m$(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return st(t.z)||(n=ys.create(t.z)),st(t.Z)||(n||(n=new Qn(t.Z)),i=t.Z),st(t.q)||(t.M=(t.q-1)*3+1),st(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),st(t.u)||(t.S=Fm(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),n,i]}let Mf=null;function w$(){return Mf||(Mf=rt.fromMillis(1555555555555)),Mf}function y$(t,e){if(t.literal)return t;const n=$n.macroTokenToFormatOpts(t.val),i=jk(n,e);return i==null||i.includes(void 0)?t:i}function Ok(t,e){return Array.prototype.concat(...t.map(n=>y$(n,e)))}function Dk(t,e,n){const i=Ok($n.parseFormat(n),t),r=i.map(o=>d$(o,t)),s=r.find(o=>o.invalidReason);if(s)return{input:e,tokens:i,invalidReason:s.invalidReason};{const[o,a]=p$(r),c=RegExp(o,"i"),[l,u]=g$(e,c,a),[d,h,f]=u?m$(u):[null,null,void 0];if(fc(u,"a")&&fc(u,"H"))throw new Ra("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:c,rawMatches:l,matches:u,result:d,zone:h,specificOffset:f}}}function _$(t,e,n){const{result:i,zone:r,specificOffset:s,invalidReason:o}=Dk(t,e,n);return[i,r,s,o]}function jk(t,e){if(!t)return null;const i=$n.create(e,t).dtFormatter(w$()),r=i.formatToParts(),s=i.resolvedOptions();return r.map(o=>f$(o,t,s))}const Nf="Invalid DateTime",Ky=864e13;function Mu(t){return new fr("unsupported zone",`the zone "${t.name}" is not supported`)}function Of(t){return t.weekData===null&&(t.weekData=eh(t.c)),t.weekData}function Df(t){return t.localWeekData===null&&(t.localWeekData=eh(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function wo(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new rt({...n,...e,old:n})}function Rk(t,e,n){let i=t-e*60*1e3;const r=n.offset(i);if(e===r)return[i,e];i-=(r-e)*60*1e3;const s=n.offset(i);return r===s?[i,r]:[t-Math.min(r,s)*60*1e3,Math.max(r,s)]}function Nu(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function od(t,e,n){return Rk(Zh(t),e,n)}function Zy(t,e){const n=t.o,i=t.c.year+Math.trunc(e.years),r=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:i,month:r,day:Math.min(t.c.day,th(i,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=gt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Zh(s);let[c,l]=Rk(a,n,t.zone);return o!==0&&(c+=o,l=t.zone.offset(c)),{ts:c,o:l}}function xc(t,e,n,i,r,s){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const c=e||a,l=rt.fromObject(t,{...n,zone:c,specificOffset:s});return o?l:l.setZone(a)}else return rt.invalid(new fr("unparsable",`the input "${r}" can't be parsed as ${i}`))}function Ou(t,e,n=!0){return t.isValid?$n.create(Pt.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function jf(t,e){const n=t.c.year>9999||t.c.year<0;let i="";return n&&t.c.year>=0&&(i+="+"),i+=cn(t.c.year,n?6:4),e?(i+="-",i+=cn(t.c.month),i+="-",i+=cn(t.c.day)):(i+=cn(t.c.month),i+=cn(t.c.day)),i}function Hy(t,e,n,i,r,s){let o=cn(t.c.hour);return e?(o+=":",o+=cn(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=cn(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=cn(t.c.second),(t.c.millisecond!==0||!i)&&(o+=".",o+=cn(t.c.millisecond,3))),r&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=cn(Math.trunc(-t.o/60)),o+=":",o+=cn(Math.trunc(-t.o%60))):(o+="+",o+=cn(Math.trunc(t.o/60)),o+=":",o+=cn(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const Bk={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},b$={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},v$={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Pk=["year","month","day","hour","minute","second","millisecond"],k$=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],S$=["year","ordinal","hour","minute","second","millisecond"];function T$(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Uv(t);return e}function Qy(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return T$(t)}}function Gy(t,e){const n=Us(e.zone,sn.defaultZone),i=Pt.fromObject(e),r=sn.now();let s,o;if(st(t.year))s=r;else{for(const l of Pk)st(t[l])&&(t[l]=Bk[l]);const a=lk(t)||uk(t);if(a)return rt.invalid(a);const c=n.offset(r);[s,o]=od(t,c,n)}return new rt({ts:s,zone:n,loc:i,o})}function Yy(t,e,n){const i=st(n.round)?!0:n.round,r=(o,a)=>(o=Um(o,i||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return r(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(t>e?-0:0,n.units[n.units.length-1])}function Xy(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}class rt{constructor(e){const n=e.zone||sn.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new fr("invalid input"):null)||(n.isValid?null:Mu(n));this.ts=st(e.ts)?sn.now():e.ts;let r=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[r,s]=[e.old.c,e.old.o];else{const a=n.offset(this.ts);r=Nu(this.ts,a),i=Number.isNaN(r.year)?new fr("invalid input"):null,r=i?null:r,s=i?null:a}this._zone=n,this.loc=e.loc||Pt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new rt({})}static local(){const[e,n]=Xy(arguments),[i,r,s,o,a,c,l]=n;return Gy({year:i,month:r,day:s,hour:o,minute:a,second:c,millisecond:l},e)}static utc(){const[e,n]=Xy(arguments),[i,r,s,o,a,c,l]=n;return e.zone=Qn.utcInstance,Gy({year:i,month:r,day:s,hour:o,minute:a,second:c,millisecond:l},e)}static fromJSDate(e,n={}){const i=JL(e)?e.valueOf():NaN;if(Number.isNaN(i))return rt.invalid("invalid input");const r=Us(n.zone,sn.defaultZone);return r.isValid?new rt({ts:i,zone:r,loc:Pt.fromObject(n)}):rt.invalid(Mu(r))}static fromMillis(e,n={}){if(Wo(e))return e<-Ky||e>Ky?rt.invalid("Timestamp out of range"):new rt({ts:e,zone:Us(n.zone,sn.defaultZone),loc:Pt.fromObject(n)});throw new ri(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Wo(e))return new rt({ts:e*1e3,zone:Us(n.zone,sn.defaultZone),loc:Pt.fromObject(n)});throw new ri("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const i=Us(n.zone,sn.defaultZone);if(!i.isValid)return rt.invalid(Mu(i));const r=Pt.fromObject(n),s=nh(e,Qy),{minDaysInFirstWeek:o,startOfWeek:a}=Ry(s,r),c=sn.now(),l=st(n.specificOffset)?i.offset(c):n.specificOffset,u=!st(s.ordinal),d=!st(s.year),h=!st(s.month)||!st(s.day),f=d||h,g=s.weekYear||s.weekNumber;if((f||u)&&g)throw new Ra("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new Ra("Can't mix ordinal dates with month/day");const p=g||s.weekday&&!f;let w,_,k=Nu(c,l);p?(w=k$,_=b$,k=eh(k,o,a)):u?(w=S$,_=v$,k=xf(k)):(w=Pk,_=Bk);let T=!1;for(const z of w){const H=s[z];st(H)?T?s[z]=_[z]:s[z]=k[z]:T=!0}const R=p?GL(s,o,a):u?YL(s):lk(s),E=R||uk(s);if(E)return rt.invalid(E);const D=p?Dy(s,o,a):u?jy(s):s,[B,$]=od(D,l,i),Y=new rt({ts:B,zone:i,o:$,loc:r});return s.weekday&&f&&e.weekday!==Y.weekday?rt.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${Y.toISO()}`):Y}static fromISO(e,n={}){const[i,r]=z9(e);return xc(i,r,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[i,r]=q9(e);return xc(i,r,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[i,r]=V9(e);return xc(i,r,n,"HTTP",n)}static fromFormat(e,n,i={}){if(st(e)||st(n))throw new ri("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=i,o=Pt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,c,l,u]=_$(o,e,n);return u?rt.invalid(u):xc(a,c,i,`format ${n}`,e,l)}static fromString(e,n,i={}){return rt.fromFormat(e,n,i)}static fromSQL(e,n={}){const[i,r]=Y9(e);return xc(i,r,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new ri("need to specify a reason the DateTime is invalid");const i=e instanceof fr?e:new fr(e,n);if(sn.throwOnInvalid)throw new CL(i);return new rt({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const i=jk(e,Pt.fromObject(n));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(e,n={}){return Ok($n.parseFormat(e),Pt.fromObject(n)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Of(this).weekYear:NaN}get weekNumber(){return this.isValid?Of(this).weekNumber:NaN}get weekday(){return this.isValid?Of(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Df(this).weekday:NaN}get localWeekNumber(){return this.isValid?Df(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Df(this).weekYear:NaN}get ordinal(){return this.isValid?xf(this.c).ordinal:NaN}get monthShort(){return this.isValid?Eu.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Eu.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Eu.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Eu.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,i=Zh(this.c),r=this.zone.offset(i-e),s=this.zone.offset(i+e),o=this.zone.offset(i-r*n),a=this.zone.offset(i-s*n);if(o===a)return[this];const c=i-o*n,l=i-a*n,u=Nu(c,o),d=Nu(l,a);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[wo(this,{ts:c}),wo(this,{ts:l})]:[this]}get isInLeapYear(){return Bl(this.year)}get daysInMonth(){return th(this.year,this.month)}get daysInYear(){return this.isValid?Ha(this.year):NaN}get weeksInWeekYear(){return this.isValid?ol(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ol(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:i,calendar:r}=$n.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:r}}toUTC(e=0,n={}){return this.setZone(Qn.instance(e),n)}toLocal(){return this.setZone(sn.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(e=Us(e,sn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(n||i){const s=e.offset(this.ts),o=this.toObject();[r]=od(o,s,e)}return wo(this,{ts:r,zone:e})}else return rt.invalid(Mu(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:i}={}){const r=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:i});return wo(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=nh(e,Qy),{minDaysInFirstWeek:i,startOfWeek:r}=Ry(n,this.loc),s=!st(n.weekYear)||!st(n.weekNumber)||!st(n.weekday),o=!st(n.ordinal),a=!st(n.year),c=!st(n.month)||!st(n.day),l=a||c,u=n.weekYear||n.weekNumber;if((l||o)&&u)throw new Ra("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Ra("Can't mix ordinal dates with month/day");let d;s?d=Dy({...eh(this.c,i,r),...n},i,r):st(n.ordinal)?(d={...this.toObject(),...n},st(n.day)&&(d.day=Math.min(th(d.year,d.month),d.day))):d=jy({...xf(this.c),...n});const[h,f]=od(d,this.o,this.zone);return wo(this,{ts:h,o:f})}plus(e){if(!this.isValid)return this;const n=gt.fromDurationLike(e);return wo(this,Zy(this,n))}minus(e){if(!this.isValid)return this;const n=gt.fromDurationLike(e).negate();return wo(this,Zy(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const i={},r=gt.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(r==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?$n.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):Nf}toLocaleString(e=Jd,n={}){return this.isValid?$n.create(this.loc.clone(n),e).formatDateTime(this):Nf}toLocaleParts(e={}){return this.isValid?$n.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=jf(this,o);return a+="T",a+=Hy(this,o,n,i,r,s),a}toISODate({format:e="extended"}={}){return this.isValid?jf(this,e==="extended"):null}toISOWeekDate(){return Ou(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+Hy(this,o==="extended",n,e,i,s):null}toRFC2822(){return Ou(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ou(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?jf(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(n||e)&&(i&&(r+=" "),n?r+="z":e&&(r+="ZZ")),Ou(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Nf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",i={}){if(!this.isValid||!e.isValid)return gt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=e9(n).map(gt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,c=o?e:this,l=r$(a,c,s,r);return o?l.negate():l}diffNow(e="milliseconds",n={}){return this.diff(rt.now(),e,n)}until(e){return this.isValid?Gt.fromDateTimes(this,e):this}hasSame(e,n,i){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,i)<=r&&r<=s.endOf(n,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||rt.fromObject({},{zone:this.zone}),i=e.padding?this<n?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),Yy(n,this.plus(i),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?Yy(e.base||rt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(rt.isDateTime))throw new ri("min requires all arguments be DateTimes");return By(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(rt.isDateTime))throw new ri("max requires all arguments be DateTimes");return By(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,i={}){const{locale:r=null,numberingSystem:s=null}=i,o=Pt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return Dk(o,e,n)}static fromStringExplain(e,n,i={}){return rt.fromFormatExplain(e,n,i)}static get DATE_SHORT(){return Jd}static get DATE_MED(){return Lv}static get DATE_MED_WITH_WEEKDAY(){return xL}static get DATE_FULL(){return $v}static get DATE_HUGE(){return zv}static get TIME_SIMPLE(){return qv}static get TIME_WITH_SECONDS(){return Vv}static get TIME_WITH_SHORT_OFFSET(){return Wv}static get TIME_WITH_LONG_OFFSET(){return Kv}static get TIME_24_SIMPLE(){return Zv}static get TIME_24_WITH_SECONDS(){return Hv}static get TIME_24_WITH_SHORT_OFFSET(){return Qv}static get TIME_24_WITH_LONG_OFFSET(){return Gv}static get DATETIME_SHORT(){return Yv}static get DATETIME_SHORT_WITH_SECONDS(){return Xv}static get DATETIME_MED(){return Jv}static get DATETIME_MED_WITH_SECONDS(){return ek}static get DATETIME_MED_WITH_WEEKDAY(){return ML}static get DATETIME_FULL(){return tk}static get DATETIME_FULL_WITH_SECONDS(){return nk}static get DATETIME_HUGE(){return ik}static get DATETIME_HUGE_WITH_SECONDS(){return rk}}function Mc(t){if(rt.isDateTime(t))return t;if(t&&t.valueOf&&Wo(t.valueOf()))return rt.fromJSDate(t);if(t&&typeof t=="object")return rt.fromObject(t);throw new ri(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const A$=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`),Nc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Fk=new Set,Op=typeof process=="object"&&process?process:{},Uk=(t,e,n,i)=>{typeof Op.emitWarning=="function"?Op.emitWarning(t,e,n,i):console.error(`[${n}] ${e}: ${t}`)};let ih=globalThis.AbortController,Jy=globalThis.AbortSignal;var E0;if(typeof ih>"u"){Jy=class{constructor(){v(this,"onabort");v(this,"_onabort",[]);v(this,"reason");v(this,"aborted",!1)}addEventListener(i,r){this._onabort.push(r)}},ih=class{constructor(){v(this,"signal",new Jy);e()}abort(i){var r,s;if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(const o of this.signal._onabort)o(i);(s=(r=this.signal).onabort)==null||s.call(r,i)}}};let t=((E0=Op.env)==null?void 0:E0.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,Uk("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const C$=t=>!Fk.has(t),Os=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Lk=t=>Os(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?ad:null:null;class ad extends Array{constructor(e){super(e),this.fill(0)}}var Ya;const Ba=class{constructor(e,n){v(this,"heap");v(this,"length");if(!M(Ba,Ya))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=Lk(e);if(!n)return[];Ue(Ba,Ya,!0);const i=new Ba(e,n);return Ue(Ba,Ya,!1),i}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};let cd=Ba;Ya=new WeakMap,Ge(cd,Ya,!1);var cr,vi,Mr,lr,Xa,hn,ur,fn,qt,at,Kn,ki,Pn,_n,dr,In,rs,ss,hr,Nr,Vs,ii,ul,jp,Uo,os,dl,Si,ah,$k,Lo,Ja,hl,Or,Ds,Dr,js,fl,Rp,ec,ld,tc,ud,Lt,Vt,pl,Bp,$o,$c;const Zm=class{constructor(e){Ge(this,ul);Ge(this,ah);Ge(this,Or);Ge(this,Dr);Ge(this,fl);Ge(this,ec);Ge(this,tc);Ge(this,Lt);Ge(this,pl);Ge(this,$o);Ge(this,cr,void 0);Ge(this,vi,void 0);Ge(this,Mr,void 0);Ge(this,lr,void 0);Ge(this,Xa,void 0);v(this,"ttl");v(this,"ttlResolution");v(this,"ttlAutopurge");v(this,"updateAgeOnGet");v(this,"updateAgeOnHas");v(this,"allowStale");v(this,"noDisposeOnSet");v(this,"noUpdateTTL");v(this,"maxEntrySize");v(this,"sizeCalculation");v(this,"noDeleteOnFetchRejection");v(this,"noDeleteOnStaleGet");v(this,"allowStaleOnFetchAbort");v(this,"allowStaleOnFetchRejection");v(this,"ignoreFetchAbort");Ge(this,hn,void 0);Ge(this,ur,void 0);Ge(this,fn,void 0);Ge(this,qt,void 0);Ge(this,at,void 0);Ge(this,Kn,void 0);Ge(this,ki,void 0);Ge(this,Pn,void 0);Ge(this,_n,void 0);Ge(this,dr,void 0);Ge(this,In,void 0);Ge(this,rs,void 0);Ge(this,ss,void 0);Ge(this,hr,void 0);Ge(this,Nr,void 0);Ge(this,Vs,void 0);Ge(this,ii,void 0);Ge(this,Uo,()=>{});Ge(this,os,()=>{});Ge(this,dl,()=>{});Ge(this,Si,()=>!1);Ge(this,Lo,e=>{});Ge(this,Ja,(e,n,i)=>{});Ge(this,hl,(e,n,i,r)=>{if(i||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});const{max:n=0,ttl:i,ttlResolution:r=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:h,maxSize:f=0,maxEntrySize:g=0,sizeCalculation:p,fetchMethod:w,noDeleteOnFetchRejection:_,noDeleteOnStaleGet:k,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:R,ignoreFetchAbort:E}=e;if(n!==0&&!Os(n))throw new TypeError("max option must be a nonnegative integer");const D=n?Lk(n):Array;if(!D)throw new Error("invalid max value: "+n);if(Ue(this,cr,n),Ue(this,vi,f),this.maxEntrySize=g||M(this,vi),this.sizeCalculation=p,this.sizeCalculation){if(!M(this,vi)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ue(this,Xa,w),Ue(this,Vs,!!w),Ue(this,fn,new Map),Ue(this,qt,new Array(n).fill(void 0)),Ue(this,at,new Array(n).fill(void 0)),Ue(this,Kn,new D(n)),Ue(this,ki,new D(n)),Ue(this,Pn,0),Ue(this,_n,0),Ue(this,dr,cd.create(n)),Ue(this,hn,0),Ue(this,ur,0),typeof l=="function"&&Ue(this,Mr,l),typeof u=="function"?(Ue(this,lr,u),Ue(this,In,[])):(Ue(this,lr,void 0),Ue(this,In,void 0)),Ue(this,Nr,!!M(this,Mr)),Ue(this,ii,!!M(this,lr)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!_,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!R,this.ignoreFetchAbort=!!E,this.maxEntrySize!==0){if(M(this,vi)!==0&&!Os(M(this,vi)))throw new TypeError("maxSize must be a positive integer if specified");if(!Os(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Le(this,ah,$k).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!k,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Os(r)||r===0?r:1,this.ttlAutopurge=!!s,this.ttl=i||0,this.ttl){if(!Os(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Le(this,ul,jp).call(this)}if(M(this,cr)===0&&this.ttl===0&&M(this,vi)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!M(this,cr)&&!M(this,vi)){const B="LRU_CACHE_UNBOUNDED";C$(B)&&(Fk.add(B),Uk("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",B,Zm))}}static unsafeExposeInternals(e){return{starts:M(e,ss),ttls:M(e,hr),sizes:M(e,rs),keyMap:M(e,fn),keyList:M(e,qt),valList:M(e,at),next:M(e,Kn),prev:M(e,ki),get head(){return M(e,Pn)},get tail(){return M(e,_n)},free:M(e,dr),isBackgroundFetch:n=>{var i;return Le(i=e,Lt,Vt).call(i,n)},backgroundFetch:(n,i,r,s)=>{var o;return Le(o=e,tc,ud).call(o,n,i,r,s)},moveToTail:n=>{var i;return Le(i=e,$o,$c).call(i,n)},indexes:n=>{var i;return Le(i=e,Or,Ds).call(i,n)},rindexes:n=>{var i;return Le(i=e,Dr,js).call(i,n)},isStale:n=>{var i;return M(i=e,Si).call(i,n)}}}get max(){return M(this,cr)}get maxSize(){return M(this,vi)}get calculatedSize(){return M(this,ur)}get size(){return M(this,hn)}get fetchMethod(){return M(this,Xa)}get dispose(){return M(this,Mr)}get disposeAfter(){return M(this,lr)}getRemainingTTL(e){return M(this,fn).has(e)?1/0:0}*entries(){for(const e of Le(this,Or,Ds).call(this))M(this,at)[e]!==void 0&&M(this,qt)[e]!==void 0&&!Le(this,Lt,Vt).call(this,M(this,at)[e])&&(yield[M(this,qt)[e],M(this,at)[e]])}*rentries(){for(const e of Le(this,Dr,js).call(this))M(this,at)[e]!==void 0&&M(this,qt)[e]!==void 0&&!Le(this,Lt,Vt).call(this,M(this,at)[e])&&(yield[M(this,qt)[e],M(this,at)[e]])}*keys(){for(const e of Le(this,Or,Ds).call(this)){const n=M(this,qt)[e];n!==void 0&&!Le(this,Lt,Vt).call(this,M(this,at)[e])&&(yield n)}}*rkeys(){for(const e of Le(this,Dr,js).call(this)){const n=M(this,qt)[e];n!==void 0&&!Le(this,Lt,Vt).call(this,M(this,at)[e])&&(yield n)}}*values(){for(const e of Le(this,Or,Ds).call(this))M(this,at)[e]!==void 0&&!Le(this,Lt,Vt).call(this,M(this,at)[e])&&(yield M(this,at)[e])}*rvalues(){for(const e of Le(this,Dr,js).call(this))M(this,at)[e]!==void 0&&!Le(this,Lt,Vt).call(this,M(this,at)[e])&&(yield M(this,at)[e])}[Symbol.iterator](){return this.entries()}find(e,n={}){for(const i of Le(this,Or,Ds).call(this)){const r=M(this,at)[i],s=Le(this,Lt,Vt).call(this,r)?r.__staleWhileFetching:r;if(s!==void 0&&e(s,M(this,qt)[i],this))return this.get(M(this,qt)[i],n)}}forEach(e,n=this){for(const i of Le(this,Or,Ds).call(this)){const r=M(this,at)[i],s=Le(this,Lt,Vt).call(this,r)?r.__staleWhileFetching:r;s!==void 0&&e.call(n,s,M(this,qt)[i],this)}}rforEach(e,n=this){for(const i of Le(this,Dr,js).call(this)){const r=M(this,at)[i],s=Le(this,Lt,Vt).call(this,r)?r.__staleWhileFetching:r;s!==void 0&&e.call(n,s,M(this,qt)[i],this)}}purgeStale(){let e=!1;for(const n of Le(this,Dr,js).call(this,{allowStale:!0}))M(this,Si).call(this,n)&&(this.delete(M(this,qt)[n]),e=!0);return e}dump(){const e=[];for(const n of Le(this,Or,Ds).call(this,{allowStale:!0})){const i=M(this,qt)[n],r=M(this,at)[n],s=Le(this,Lt,Vt).call(this,r)?r.__staleWhileFetching:r;if(s===void 0||i===void 0)continue;const o={value:s};if(M(this,hr)&&M(this,ss)){o.ttl=M(this,hr)[n];const a=Nc.now()-M(this,ss)[n];o.start=Math.floor(Date.now()-a)}M(this,rs)&&(o.size=M(this,rs)[n]),e.unshift([i,o])}return e}load(e){this.clear();for(const[n,i]of e){if(i.start){const r=Date.now()-i.start;i.start=Nc.now()-r}this.set(n,i.value,i)}}set(e,n,i={}){var h,f,g;if(n===void 0)return this.delete(e),this;const{ttl:r=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=i;let{noUpdateTTL:l=this.noUpdateTTL}=i;const u=M(this,hl).call(this,e,n,i.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;let d=M(this,hn)===0?void 0:M(this,fn).get(e);if(d===void 0)d=M(this,hn)===0?M(this,_n):M(this,dr).length!==0?M(this,dr).pop():M(this,hn)===M(this,cr)?Le(this,ec,ld).call(this,!1):M(this,hn),M(this,qt)[d]=e,M(this,at)[d]=n,M(this,fn).set(e,d),M(this,Kn)[M(this,_n)]=d,M(this,ki)[d]=M(this,_n),Ue(this,_n,d),su(this,hn)._++,M(this,Ja).call(this,d,u,c),c&&(c.set="add"),l=!1;else{Le(this,$o,$c).call(this,d);const p=M(this,at)[d];if(n!==p){if(M(this,Vs)&&Le(this,Lt,Vt).call(this,p)?p.__abortController.abort(new Error("replaced")):o||(M(this,Nr)&&((h=M(this,Mr))==null||h.call(this,p,e,"set")),M(this,ii)&&((f=M(this,In))==null||f.push([p,e,"set"]))),M(this,Lo).call(this,d),M(this,Ja).call(this,d,u,c),M(this,at)[d]=n,c){c.set="replace";const w=p&&Le(this,Lt,Vt).call(this,p)?p.__staleWhileFetching:p;w!==void 0&&(c.oldValue=w)}}else c&&(c.set="update")}if(r!==0&&!M(this,hr)&&Le(this,ul,jp).call(this),M(this,hr)&&(l||M(this,dl).call(this,d,r,s),c&&M(this,os).call(this,c,d)),!o&&M(this,ii)&&M(this,In)){const p=M(this,In);let w;for(;w=p==null?void 0:p.shift();)(g=M(this,lr))==null||g.call(this,...w)}return this}pop(){var e;try{for(;M(this,hn);){const n=M(this,at)[M(this,Pn)];if(Le(this,ec,ld).call(this,!0),Le(this,Lt,Vt).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(M(this,ii)&&M(this,In)){const n=M(this,In);let i;for(;i=n==null?void 0:n.shift();)(e=M(this,lr))==null||e.call(this,...i)}}}has(e,n={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:r}=n,s=M(this,fn).get(e);if(s!==void 0){const o=M(this,at)[s];if(Le(this,Lt,Vt).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(M(this,Si).call(this,s))r&&(r.has="stale",M(this,os).call(this,r,s));else return i&&M(this,Uo).call(this,s),r&&(r.has="hit",M(this,os).call(this,r,s)),!0}else r&&(r.has="miss");return!1}peek(e,n={}){const{allowStale:i=this.allowStale}=n,r=M(this,fn).get(e);if(r!==void 0&&(i||!M(this,Si).call(this,r))){const s=M(this,at)[r];return Le(this,Lt,Vt).call(this,s)?s.__staleWhileFetching:s}}async fetch(e,n={}){const{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:p,forceRefresh:w=!1,status:_,signal:k}=n;if(!M(this,Vs))return _&&(_.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:s,status:_});const T={allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:g,ignoreFetchAbort:f,status:_,signal:k};let R=M(this,fn).get(e);if(R===void 0){_&&(_.fetch="miss");const E=Le(this,tc,ud).call(this,e,R,T,p);return E.__returned=E}else{const E=M(this,at)[R];if(Le(this,Lt,Vt).call(this,E)){const z=i&&E.__staleWhileFetching!==void 0;return _&&(_.fetch="inflight",z&&(_.returnedStale=!0)),z?E.__staleWhileFetching:E.__returned=E}const D=M(this,Si).call(this,R);if(!w&&!D)return _&&(_.fetch="hit"),Le(this,$o,$c).call(this,R),r&&M(this,Uo).call(this,R),_&&M(this,os).call(this,_,R),E;const B=Le(this,tc,ud).call(this,e,R,T,p),Y=B.__staleWhileFetching!==void 0&&i;return _&&(_.fetch=D?"stale":"refresh",Y&&D&&(_.returnedStale=!0)),Y?B.__staleWhileFetching:B.__returned=B}}get(e,n={}){const{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=n,a=M(this,fn).get(e);if(a!==void 0){const c=M(this,at)[a],l=Le(this,Lt,Vt).call(this,c);return o&&M(this,os).call(this,o,a),M(this,Si).call(this,a)?(o&&(o.get="stale"),l?(o&&i&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),i?c.__staleWhileFetching:void 0):(s||this.delete(e),o&&i&&(o.returnedStale=!0),i?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(Le(this,$o,$c).call(this,a),r&&M(this,Uo).call(this,a),c))}else o&&(o.get="miss")}delete(e){var i,r,s,o;let n=!1;if(M(this,hn)!==0){const a=M(this,fn).get(e);if(a!==void 0)if(n=!0,M(this,hn)===1)this.clear();else{M(this,Lo).call(this,a);const c=M(this,at)[a];Le(this,Lt,Vt).call(this,c)?c.__abortController.abort(new Error("deleted")):(M(this,Nr)||M(this,ii))&&(M(this,Nr)&&((i=M(this,Mr))==null||i.call(this,c,e,"delete")),M(this,ii)&&((r=M(this,In))==null||r.push([c,e,"delete"]))),M(this,fn).delete(e),M(this,qt)[a]=void 0,M(this,at)[a]=void 0,a===M(this,_n)?Ue(this,_n,M(this,ki)[a]):a===M(this,Pn)?Ue(this,Pn,M(this,Kn)[a]):(M(this,Kn)[M(this,ki)[a]]=M(this,Kn)[a],M(this,ki)[M(this,Kn)[a]]=M(this,ki)[a]),su(this,hn)._--,M(this,dr).push(a)}}if(M(this,ii)&&((s=M(this,In))!=null&&s.length)){const a=M(this,In);let c;for(;c=a==null?void 0:a.shift();)(o=M(this,lr))==null||o.call(this,...c)}return n}clear(){var e,n,i;for(const r of Le(this,Dr,js).call(this,{allowStale:!0})){const s=M(this,at)[r];if(Le(this,Lt,Vt).call(this,s))s.__abortController.abort(new Error("deleted"));else{const o=M(this,qt)[r];M(this,Nr)&&((e=M(this,Mr))==null||e.call(this,s,o,"delete")),M(this,ii)&&((n=M(this,In))==null||n.push([s,o,"delete"]))}}if(M(this,fn).clear(),M(this,at).fill(void 0),M(this,qt).fill(void 0),M(this,hr)&&M(this,ss)&&(M(this,hr).fill(0),M(this,ss).fill(0)),M(this,rs)&&M(this,rs).fill(0),Ue(this,Pn,0),Ue(this,_n,0),M(this,dr).length=0,Ue(this,ur,0),Ue(this,hn,0),M(this,ii)&&M(this,In)){const r=M(this,In);let s;for(;s=r==null?void 0:r.shift();)(i=M(this,lr))==null||i.call(this,...s)}}};let Dp=Zm;cr=new WeakMap,vi=new WeakMap,Mr=new WeakMap,lr=new WeakMap,Xa=new WeakMap,hn=new WeakMap,ur=new WeakMap,fn=new WeakMap,qt=new WeakMap,at=new WeakMap,Kn=new WeakMap,ki=new WeakMap,Pn=new WeakMap,_n=new WeakMap,dr=new WeakMap,In=new WeakMap,rs=new WeakMap,ss=new WeakMap,hr=new WeakMap,Nr=new WeakMap,Vs=new WeakMap,ii=new WeakMap,ul=new WeakSet,jp=function(){const e=new ad(M(this,cr)),n=new ad(M(this,cr));Ue(this,hr,e),Ue(this,ss,n),Ue(this,dl,(s,o,a=Nc.now())=>{if(n[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){const c=setTimeout(()=>{M(this,Si).call(this,s)&&this.delete(M(this,qt)[s])},o+1);c.unref&&c.unref()}}),Ue(this,Uo,s=>{n[s]=e[s]!==0?Nc.now():0}),Ue(this,os,(s,o)=>{if(e[o]){const a=e[o],c=n[o];s.ttl=a,s.start=c,s.now=i||r();const l=s.now-c;s.remainingTTL=a-l}});let i=0;const r=()=>{const s=Nc.now();if(this.ttlResolution>0){i=s;const o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=M(this,fn).get(s);if(o===void 0)return 0;const a=e[o],c=n[o];if(a===0||c===0)return 1/0;const l=(i||r())-c;return a-l},Ue(this,Si,s=>e[s]!==0&&n[s]!==0&&(i||r())-n[s]>e[s])},Uo=new WeakMap,os=new WeakMap,dl=new WeakMap,Si=new WeakMap,ah=new WeakSet,$k=function(){const e=new ad(M(this,cr));Ue(this,ur,0),Ue(this,rs,e),Ue(this,Lo,n=>{Ue(this,ur,M(this,ur)-e[n]),e[n]=0}),Ue(this,hl,(n,i,r,s)=>{if(Le(this,Lt,Vt).call(this,i))return 0;if(!Os(r))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(r=s(i,n),!Os(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r}),Ue(this,Ja,(n,i,r)=>{if(e[n]=i,M(this,vi)){const s=M(this,vi)-e[n];for(;M(this,ur)>s;)Le(this,ec,ld).call(this,!0)}Ue(this,ur,M(this,ur)+e[n]),r&&(r.entrySize=i,r.totalCalculatedSize=M(this,ur))})},Lo=new WeakMap,Ja=new WeakMap,hl=new WeakMap,Or=new WeakSet,Ds=function*({allowStale:e=this.allowStale}={}){if(M(this,hn))for(let n=M(this,_n);!(!Le(this,fl,Rp).call(this,n)||((e||!M(this,Si).call(this,n))&&(yield n),n===M(this,Pn)));)n=M(this,ki)[n]},Dr=new WeakSet,js=function*({allowStale:e=this.allowStale}={}){if(M(this,hn))for(let n=M(this,Pn);!(!Le(this,fl,Rp).call(this,n)||((e||!M(this,Si).call(this,n))&&(yield n),n===M(this,_n)));)n=M(this,Kn)[n]},fl=new WeakSet,Rp=function(e){return e!==void 0&&M(this,fn).get(M(this,qt)[e])===e},ec=new WeakSet,ld=function(e){var s,o;const n=M(this,Pn),i=M(this,qt)[n],r=M(this,at)[n];return M(this,Vs)&&Le(this,Lt,Vt).call(this,r)?r.__abortController.abort(new Error("evicted")):(M(this,Nr)||M(this,ii))&&(M(this,Nr)&&((s=M(this,Mr))==null||s.call(this,r,i,"evict")),M(this,ii)&&((o=M(this,In))==null||o.push([r,i,"evict"]))),M(this,Lo).call(this,n),e&&(M(this,qt)[n]=void 0,M(this,at)[n]=void 0,M(this,dr).push(n)),M(this,hn)===1?(Ue(this,Pn,Ue(this,_n,0)),M(this,dr).length=0):Ue(this,Pn,M(this,Kn)[n]),M(this,fn).delete(i),su(this,hn)._--,n},tc=new WeakSet,ud=function(e,n,i,r){const s=n===void 0?void 0:M(this,at)[n];if(Le(this,Lt,Vt).call(this,s))return s;const o=new ih,{signal:a}=i;a==null||a.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});const c={signal:o.signal,options:i,context:r},l=(p,w=!1)=>{const{aborted:_}=o.signal,k=i.ignoreFetchAbort&&p!==void 0;if(i.status&&(_&&!w?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,k&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),_&&!k&&!w)return d(o.signal.reason);const T=f;return M(this,at)[n]===f&&(p===void 0?T.__staleWhileFetching?M(this,at)[n]=T.__staleWhileFetching:this.delete(e):(i.status&&(i.status.fetchUpdated=!0),this.set(e,p,c.options))),p},u=p=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=p),d(p)),d=p=>{const{aborted:w}=o.signal,_=w&&i.allowStaleOnFetchAbort,k=_||i.allowStaleOnFetchRejection,T=k||i.noDeleteOnFetchRejection,R=f;if(M(this,at)[n]===f&&(!T||R.__staleWhileFetching===void 0?this.delete(e):_||(M(this,at)[n]=R.__staleWhileFetching)),k)return i.status&&R.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),R.__staleWhileFetching;if(R.__returned===R)throw p},h=(p,w)=>{var k;const _=(k=M(this,Xa))==null?void 0:k.call(this,e,s,c);_&&_ instanceof Promise&&_.then(T=>p(T),w),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(p(),i.allowStaleOnFetchAbort&&(p=T=>l(T,!0)))})};i.status&&(i.status.fetchDispatched=!0);const f=new Promise(h).then(l,u),g=Object.assign(f,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(e,g,{...c.options,status:void 0}),n=M(this,fn).get(e)):M(this,at)[n]=g,g},Lt=new WeakSet,Vt=function(e){if(!M(this,Vs))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof ih},pl=new WeakSet,Bp=function(e,n){M(this,ki)[n]=e,M(this,Kn)[e]=n},$o=new WeakSet,$c=function(e){e!==M(this,_n)&&(e===M(this,Pn)?Ue(this,Pn,M(this,Kn)[e]):Le(this,pl,Bp).call(this,M(this,ki)[e],M(this,Kn)[e]),Le(this,pl,Bp).call(this,M(this,_n),e),Ue(this,_n,e))};class N extends Array{constructor(e,n){if(super(e),this.sign=n,Object.setPrototypeOf(this,N.prototype),e>N.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var n=Math.floor,i=Number.isFinite;if(typeof e=="number"){if(e===0)return N.__zero();if(N.__isOneDigitInt(e))return 0>e?N.__oneDigit(-e,!0):N.__oneDigit(e,!1);if(!i(e)||n(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return N.__fromDouble(e)}if(typeof e=="string"){const r=N.__fromString(e);if(r===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return r}if(typeof e=="boolean")return e===!0?N.__oneDigit(1,!1):N.__zero();if(typeof e=="object"){if(e.constructor===N)return e;const r=N.__toPrimitive(e);return N.BigInt(r)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const n of this)e.push((n&&(n>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?N.__toStringGeneric(this,e,!1):N.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const n=e.length;if(n===0)return 0;if(n===1){const w=e.__unsignedDigit(0);return e.sign?-w:w}const i=e.__digit(n-1),r=N.__clz30(i),s=30*n-r;if(1024<s)return e.sign?-1/0:1/0;let o=s-1,a=i,c=n-1;const l=r+3;let u=l===32?0:a<<l;u>>>=12;const d=l-12;let h=12<=l?0:a<<20+l,f=20+l;for(0<d&&0<c&&(c--,a=e.__digit(c),u|=a>>>30-d,h=a<<d+2,f=d+2);0<f&&0<c;)c--,a=e.__digit(c),h|=30<=f?a<<f-30:a>>>30-f,f-=30;const g=N.__decideRounding(e,f,c,a);if((g===1||g===0&&(1&h)==1)&&(h=h+1>>>0,h===0&&(u++,u>>>20!=0&&(u=0,o++,1023<o))))return e.sign?-1/0:1/0;const p=e.sign?-2147483648:0;return o=o+1023<<20,N.__kBitConversionInts[1]=p|o|u,N.__kBitConversionInts[0]=h,N.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const n=e.__copy();return n.sign=!e.sign,n}static bitwiseNot(e){return e.sign?N.__absoluteSubOne(e).__trim():N.__absoluteAddOne(e,!0)}static exponentiate(e,n){if(n.sign)throw new RangeError("Exponent must be positive");if(n.length===0)return N.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&n.__digit(0))?N.unaryMinus(e):e;if(1<n.length)throw new RangeError("BigInt too big");let i=n.__unsignedDigit(0);if(i===1)return e;if(i>=N.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const o=1+(0|i/30),a=e.sign&&(1&i)!=0,c=new N(o,a);c.__initializeDigits();const l=1<<i%30;return c.__setDigit(o-1,l),c}let r=null,s=e;for(1&i&&(r=e),i>>=1;i!==0;i>>=1)s=N.multiply(s,s),1&i&&(r===null?r=s:r=N.multiply(r,s));return r}static multiply(e,n){if(e.length===0)return e;if(n.length===0)return n;let i=e.length+n.length;30<=e.__clzmsd()+n.__clzmsd()&&i--;const r=new N(i,e.sign!==n.sign);r.__initializeDigits();for(let s=0;s<e.length;s++)N.__multiplyAccumulate(n,e.__digit(s),r,s);return r.__trim()}static divide(e,n){if(n.length===0)throw new RangeError("Division by zero");if(0>N.__absoluteCompare(e,n))return N.__zero();const i=e.sign!==n.sign,r=n.__unsignedDigit(0);let s;if(n.length===1&&32767>=r){if(r===1)return i===e.sign?e:N.unaryMinus(e);s=N.__absoluteDivSmall(e,r,null)}else s=N.__absoluteDivLarge(e,n,!0,!1);return s.sign=i,s.__trim()}static remainder(e,n){if(n.length===0)throw new RangeError("Division by zero");if(0>N.__absoluteCompare(e,n))return e;const i=n.__unsignedDigit(0);if(n.length===1&&32767>=i){if(i===1)return N.__zero();const s=N.__absoluteModSmall(e,i);return s===0?N.__zero():N.__oneDigit(s,e.sign)}const r=N.__absoluteDivLarge(e,n,!1,!0);return r.sign=e.sign,r.__trim()}static add(e,n){const i=e.sign;return i===n.sign?N.__absoluteAdd(e,n,i):0<=N.__absoluteCompare(e,n)?N.__absoluteSub(e,n,i):N.__absoluteSub(n,e,!i)}static subtract(e,n){const i=e.sign;return i===n.sign?0<=N.__absoluteCompare(e,n)?N.__absoluteSub(e,n,i):N.__absoluteSub(n,e,!i):N.__absoluteAdd(e,n,i)}static leftShift(e,n){return n.length===0||e.length===0?e:n.sign?N.__rightShiftByAbsolute(e,n):N.__leftShiftByAbsolute(e,n)}static signedRightShift(e,n){return n.length===0||e.length===0?e:n.sign?N.__leftShiftByAbsolute(e,n):N.__rightShiftByAbsolute(e,n)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,n){return 0>N.__compareToBigInt(e,n)}static lessThanOrEqual(e,n){return 0>=N.__compareToBigInt(e,n)}static greaterThan(e,n){return 0<N.__compareToBigInt(e,n)}static greaterThanOrEqual(e,n){return 0<=N.__compareToBigInt(e,n)}static equal(e,n){if(e.sign!==n.sign||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e.__digit(i)!==n.__digit(i))return!1;return!0}static notEqual(e,n){return!N.equal(e,n)}static bitwiseAnd(e,n){var i=Math.max;if(!e.sign&&!n.sign)return N.__absoluteAnd(e,n).__trim();if(e.sign&&n.sign){const r=i(e.length,n.length)+1;let s=N.__absoluteSubOne(e,r);const o=N.__absoluteSubOne(n);return s=N.__absoluteOr(s,o,s),N.__absoluteAddOne(s,!0,s).__trim()}return e.sign&&([e,n]=[n,e]),N.__absoluteAndNot(e,N.__absoluteSubOne(n)).__trim()}static bitwiseXor(e,n){var i=Math.max;if(!e.sign&&!n.sign)return N.__absoluteXor(e,n).__trim();if(e.sign&&n.sign){const o=i(e.length,n.length),a=N.__absoluteSubOne(e,o),c=N.__absoluteSubOne(n);return N.__absoluteXor(a,c,a).__trim()}const r=i(e.length,n.length)+1;e.sign&&([e,n]=[n,e]);let s=N.__absoluteSubOne(n,r);return s=N.__absoluteXor(s,e,s),N.__absoluteAddOne(s,!0,s).__trim()}static bitwiseOr(e,n){var i=Math.max;const r=i(e.length,n.length);if(!e.sign&&!n.sign)return N.__absoluteOr(e,n).__trim();if(e.sign&&n.sign){let o=N.__absoluteSubOne(e,r);const a=N.__absoluteSubOne(n);return o=N.__absoluteAnd(o,a,o),N.__absoluteAddOne(o,!0,o).__trim()}e.sign&&([e,n]=[n,e]);let s=N.__absoluteSubOne(n,r);return s=N.__absoluteAndNot(s,e,s),N.__absoluteAddOne(s,!0,s).__trim()}static asIntN(e,n){var i=Math.floor;if(n.length===0)return n;if(e=i(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return N.__zero();if(e>=N.__kMaxLengthBits)return n;const r=0|(e+29)/30;if(n.length<r)return n;const s=n.__unsignedDigit(r-1),o=1<<(e-1)%30;if(n.length===r&&s<o)return n;if((s&o)!==o)return N.__truncateToNBits(e,n);if(!n.sign)return N.__truncateAndSubFromPowerOfTwo(e,n,!0);if(!(s&o-1)){for(let a=r-2;0<=a;a--)if(n.__digit(a)!==0)return N.__truncateAndSubFromPowerOfTwo(e,n,!1);return n.length===r&&s===o?n:N.__truncateToNBits(e,n)}return N.__truncateAndSubFromPowerOfTwo(e,n,!1)}static asUintN(e,n){var i=Math.floor;if(n.length===0)return n;if(e=i(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return N.__zero();if(n.sign){if(e>N.__kMaxLengthBits)throw new RangeError("BigInt too big");return N.__truncateAndSubFromPowerOfTwo(e,n,!1)}if(e>=N.__kMaxLengthBits)return n;const r=0|(e+29)/30;if(n.length<r)return n;const s=e%30;return n.length==r&&(s===0||!(n.__digit(r-1)>>>s))?n:N.__truncateToNBits(e,n)}static ADD(e,n){if(e=N.__toPrimitive(e),n=N.__toPrimitive(n),typeof e=="string")return typeof n!="string"&&(n=n.toString()),e+n;if(typeof n=="string")return e.toString()+n;if(e=N.__toNumeric(e),n=N.__toNumeric(n),N.__isBigInt(e)&&N.__isBigInt(n))return N.add(e,n);if(typeof e=="number"&&typeof n=="number")return e+n;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,n){return N.__compare(e,n,0)}static LE(e,n){return N.__compare(e,n,1)}static GT(e,n){return N.__compare(e,n,2)}static GE(e,n){return N.__compare(e,n,3)}static EQ(e,n){for(;;){if(N.__isBigInt(e))return N.__isBigInt(n)?N.equal(e,n):N.EQ(n,e);if(typeof e=="number"){if(N.__isBigInt(n))return N.__equalToNumber(n,e);if(typeof n!="object")return e==n;n=N.__toPrimitive(n)}else if(typeof e=="string"){if(N.__isBigInt(n))return e=N.__fromString(e),e!==null&&N.equal(e,n);if(typeof n!="object")return e==n;n=N.__toPrimitive(n)}else if(typeof e=="boolean"){if(N.__isBigInt(n))return N.__equalToNumber(n,+e);if(typeof n!="object")return e==n;n=N.__toPrimitive(n)}else if(typeof e=="symbol"){if(N.__isBigInt(n))return!1;if(typeof n!="object")return e==n;n=N.__toPrimitive(n)}else if(typeof e=="object"){if(typeof n=="object"&&n.constructor!==N)return e==n;e=N.__toPrimitive(e)}else return e==n}}static NE(e,n){return!N.EQ(e,n)}static DataViewGetBigInt64(e,n,i=!1){return N.asIntN(64,N.DataViewGetBigUint64(e,n,i))}static DataViewGetBigUint64(e,n,i=!1){const[r,s]=i?[4,0]:[0,4],o=e.getUint32(n+r,i),a=e.getUint32(n+s,i),c=new N(3,!1);return c.__setDigit(0,1073741823&a),c.__setDigit(1,(268435455&o)<<2|a>>>30),c.__setDigit(2,o>>>28),c.__trim()}static DataViewSetBigInt64(e,n,i,r=!1){N.DataViewSetBigUint64(e,n,i,r)}static DataViewSetBigUint64(e,n,i,r=!1){i=N.asUintN(64,i);let s=0,o=0;if(0<i.length&&(o=i.__digit(0),1<i.length)){const l=i.__digit(1);o|=l<<30,s=l>>>2,2<i.length&&(s|=i.__digit(2)<<28)}const[a,c]=r?[4,0]:[0,4];e.setUint32(n+a,s,r),e.setUint32(n+c,o,r)}static __zero(){return new N(0,!1)}static __oneDigit(e,n){const i=new N(1,n);return i.__setDigit(0,e),i}__copy(){const e=new N(this.length,this.sign);for(let n=0;n<this.length;n++)e[n]=this[n];return e}__trim(){let e=this.length,n=this[e-1];for(;n===0;)e--,n=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,n,i,r){if(0<n)return-1;let s;if(0>n)s=-n-1;else{if(i===0)return-1;i--,r=e.__digit(i),s=29}let o=1<<s;if(!(r&o))return-1;if(o-=1,(r&o)!=0)return 1;for(;0<i;)if(i--,e.__digit(i)!==0)return 1;return 0}static __fromDouble(e){N.__kBitConversionDouble[0]=e;const n=2047&N.__kBitConversionInts[1]>>>20,i=n-1023,r=(0|i/30)+1,s=new N(r,0>e);let o=1048575&N.__kBitConversionInts[1]|1048576,a=N.__kBitConversionInts[0];const c=20,l=i%30;let u,d=0;if(l<20){const h=c-l;d=h+32,u=o>>>h,o=o<<32-h|a>>>h,a<<=32-h}else if(l===20)d=32,u=o,o=a,a=0;else{const h=l-c;d=32-h,u=o<<h|a>>>32-h,o=a<<h,a=0}s.__setDigit(r-1,u);for(let h=r-2;0<=h;h--)0<d?(d-=30,u=o>>>2,o=o<<30|a>>>2,a<<=30):u=0,s.__setDigit(h,u);return s.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,n=0){let i=0;const r=e.length;let s=0;if(s===r)return N.__zero();let o=e.charCodeAt(s);for(;N.__isWhitespace(o);){if(++s===r)return N.__zero();o=e.charCodeAt(s)}if(o===43){if(++s===r)return null;o=e.charCodeAt(s),i=1}else if(o===45){if(++s===r)return null;o=e.charCodeAt(s),i=-1}if(n===0){if(n=10,o===48){if(++s===r)return N.__zero();if(o=e.charCodeAt(s),o===88||o===120){if(n=16,++s===r)return null;o=e.charCodeAt(s)}else if(o===79||o===111){if(n=8,++s===r)return null;o=e.charCodeAt(s)}else if(o===66||o===98){if(n=2,++s===r)return null;o=e.charCodeAt(s)}}}else if(n===16&&o===48){if(++s===r)return N.__zero();if(o=e.charCodeAt(s),o===88||o===120){if(++s===r)return null;o=e.charCodeAt(s)}}if(i!=0&&n!==10)return null;for(;o===48;){if(++s===r)return N.__zero();o=e.charCodeAt(s)}const a=r-s;let c=N.__kMaxBitsPerChar[n],l=N.__kBitsPerCharTableMultiplier-1;if(a>1073741824/c)return null;const u=c*a+l>>>N.__kBitsPerCharTableShift,d=new N(0|(u+29)/30,!1),h=10>n?n:10,f=10<n?n-10:0;if(n&n-1){d.__initializeDigits();let g=!1,p=0;do{let w=0,_=1;for(;;){let T;if(o-48>>>0<h)T=o-48;else if((32|o)-97>>>0<f)T=(32|o)-87;else{g=!0;break}const R=_*n;if(1073741823<R)break;if(_=R,w=w*n+T,p++,++s===r){g=!0;break}o=e.charCodeAt(s)}l=30*N.__kBitsPerCharTableMultiplier-1;const k=0|(c*p+l>>>N.__kBitsPerCharTableShift)/30;d.__inplaceMultiplyAdd(_,w,k)}while(!g)}else{c>>=N.__kBitsPerCharTableShift;const g=[],p=[];let w=!1;do{let _=0,k=0;for(;;){let T;if(o-48>>>0<h)T=o-48;else if((32|o)-97>>>0<f)T=(32|o)-87;else{w=!0;break}if(k+=c,_=_<<c|T,++s===r){w=!0;break}if(o=e.charCodeAt(s),30<k+c)break}g.push(_),p.push(k)}while(!w);N.__fillFromParts(d,g,p)}if(s!==r){if(!N.__isWhitespace(o))return null;for(s++;s<r;s++)if(o=e.charCodeAt(s),!N.__isWhitespace(o))return null}return d.sign=i==-1,d.__trim()}static __fillFromParts(e,n,i){let r=0,s=0,o=0;for(let a=n.length-1;0<=a;a--){const c=n[a],l=i[a];s|=c<<o,o+=l,o===30?(e.__setDigit(r++,s),o=0,s=0):30<o&&(e.__setDigit(r++,1073741823&s),o-=30,s=c>>>l-o)}if(s!==0){if(r>=e.length)throw new Error("implementation bug");e.__setDigit(r++,s)}for(;r<e.length;r++)e.__setDigit(r,0)}static __toStringBasePowerOfTwo(e,n){const i=e.length;let r=n-1;r=(85&r>>>1)+(85&r),r=(51&r>>>2)+(51&r),r=(15&r>>>4)+(15&r);const s=r,o=n-1,a=e.__digit(i-1),c=N.__clz30(a);let l=0|(30*i-c+s-1)/s;if(e.sign&&l++,268435456<l)throw new Error("string too long");const u=Array(l);let d=l-1,h=0,f=0;for(let p=0;p<i-1;p++){const w=e.__digit(p),_=(h|w<<f)&o;u[d--]=N.__kConversionChars[_];const k=s-f;for(h=w>>>k,f=30-k;f>=s;)u[d--]=N.__kConversionChars[h&o],h>>>=s,f-=s}const g=(h|a<<f)&o;for(u[d--]=N.__kConversionChars[g],h=a>>>s-f;h!==0;)u[d--]=N.__kConversionChars[h&o],h>>>=s;if(e.sign&&(u[d--]="-"),d!=-1)throw new Error("implementation bug");return u.join("")}static __toStringGeneric(e,n,i){const r=e.length;if(r===0)return"";if(r===1){let p=e.__unsignedDigit(0).toString(n);return i===!1&&e.sign&&(p="-"+p),p}const s=30*r-N.__clz30(e.__digit(r-1)),o=N.__kMaxBitsPerChar[n],a=o-1;let c=s*N.__kBitsPerCharTableMultiplier;c+=a-1,c=0|c/a;const l=c+1>>1,u=N.exponentiate(N.__oneDigit(n,!1),N.__oneDigit(l,!1));let d,h;const f=u.__unsignedDigit(0);if(u.length===1&&32767>=f){d=new N(e.length,!1),d.__initializeDigits();let p=0;for(let w=2*e.length-1;0<=w;w--){const _=p<<15|e.__halfDigit(w);d.__setHalfDigit(w,0|_/f),p=0|_%f}h=p.toString(n)}else{const p=N.__absoluteDivLarge(e,u,!0,!0);d=p.quotient;const w=p.remainder.__trim();h=N.__toStringGeneric(w,n,!0)}d.__trim();let g=N.__toStringGeneric(d,n,!0);for(;h.length<l;)h="0"+h;return i===!1&&e.sign&&(g="-"+g),g+h}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,n){const i=e.sign;if(i!==n.sign)return N.__unequalSign(i);const r=N.__absoluteCompare(e,n);return 0<r?N.__absoluteGreater(i):0>r?N.__absoluteLess(i):0}static __compareToNumber(e,n){if(N.__isOneDigitInt(n)){const i=e.sign,r=0>n;if(i!==r)return N.__unequalSign(i);if(e.length===0){if(r)throw new Error("implementation bug");return n===0?0:-1}if(1<e.length)return N.__absoluteGreater(i);const s=Math.abs(n),o=e.__unsignedDigit(0);return o>s?N.__absoluteGreater(i):o<s?N.__absoluteLess(i):0}return N.__compareToDouble(e,n)}static __compareToDouble(e,n){if(n!==n)return n;if(n===1/0)return-1;if(n===-1/0)return 1;const i=e.sign;if(i!==0>n)return N.__unequalSign(i);if(n===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;N.__kBitConversionDouble[0]=n;const r=2047&N.__kBitConversionInts[1]>>>20;if(r==2047)throw new Error("implementation bug: handled elsewhere");const s=r-1023;if(0>s)return N.__absoluteGreater(i);const o=e.length;let a=e.__digit(o-1);const c=N.__clz30(a),l=30*o-c,u=s+1;if(l<u)return N.__absoluteLess(i);if(l>u)return N.__absoluteGreater(i);let d=1048576|1048575&N.__kBitConversionInts[1],h=N.__kBitConversionInts[0];const f=20,g=29-c;if(g!==(0|(l-1)%30))throw new Error("implementation bug");let p,w=0;if(20>g){const _=f-g;w=_+32,p=d>>>_,d=d<<32-_|h>>>_,h<<=32-_}else if(g===20)w=32,p=d,d=h,h=0;else{const _=g-f;w=32-_,p=d<<_|h>>>32-_,d=h<<_,h=0}if(a>>>=0,p>>>=0,a>p)return N.__absoluteGreater(i);if(a<p)return N.__absoluteLess(i);for(let _=o-2;0<=_;_--){0<w?(w-=30,p=d>>>2,d=d<<30|h>>>2,h<<=30):p=0;const k=e.__unsignedDigit(_);if(k>p)return N.__absoluteGreater(i);if(k<p)return N.__absoluteLess(i)}if(d!==0||h!==0){if(w===0)throw new Error("implementation bug");return N.__absoluteLess(i)}return 0}static __equalToNumber(e,n){var i=Math.abs;return N.__isOneDigitInt(n)?n===0?e.length===0:e.length===1&&e.sign===0>n&&e.__unsignedDigit(0)===i(n):N.__compareToDouble(e,n)===0}static __comparisonResultToBool(e,n){return n===0?0>e:n===1?0>=e:n===2?0<e:n===3?0<=e:void 0}static __compare(e,n,i){if(e=N.__toPrimitive(e),n=N.__toPrimitive(n),typeof e=="string"&&typeof n=="string")switch(i){case 0:return e<n;case 1:return e<=n;case 2:return e>n;case 3:return e>=n}if(N.__isBigInt(e)&&typeof n=="string")return n=N.__fromString(n),n!==null&&N.__comparisonResultToBool(N.__compareToBigInt(e,n),i);if(typeof e=="string"&&N.__isBigInt(n))return e=N.__fromString(e),e!==null&&N.__comparisonResultToBool(N.__compareToBigInt(e,n),i);if(e=N.__toNumeric(e),n=N.__toNumeric(n),N.__isBigInt(e)){if(N.__isBigInt(n))return N.__comparisonResultToBool(N.__compareToBigInt(e,n),i);if(typeof n!="number")throw new Error("implementation bug");return N.__comparisonResultToBool(N.__compareToNumber(e,n),i)}if(typeof e!="number")throw new Error("implementation bug");if(N.__isBigInt(n))return N.__comparisonResultToBool(N.__compareToNumber(n,e),2^i);if(typeof n!="number")throw new Error("implementation bug");return i===0?e<n:i===1?e<=n:i===2?e>n:i===3?e>=n:void 0}__clzmsd(){return N.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,n,i){if(e.length<n.length)return N.__absoluteAdd(n,e,i);if(e.length===0)return e;if(n.length===0)return e.sign===i?e:N.unaryMinus(e);let r=e.length;(e.__clzmsd()===0||n.length===e.length&&n.__clzmsd()===0)&&r++;const s=new N(r,i);let o=0,a=0;for(;a<n.length;a++){const c=e.__digit(a)+n.__digit(a)+o;o=c>>>30,s.__setDigit(a,1073741823&c)}for(;a<e.length;a++){const c=e.__digit(a)+o;o=c>>>30,s.__setDigit(a,1073741823&c)}return a<s.length&&s.__setDigit(a,o),s.__trim()}static __absoluteSub(e,n,i){if(e.length===0)return e;if(n.length===0)return e.sign===i?e:N.unaryMinus(e);const r=new N(e.length,i);let s=0,o=0;for(;o<n.length;o++){const a=e.__digit(o)-n.__digit(o)-s;s=1&a>>>30,r.__setDigit(o,1073741823&a)}for(;o<e.length;o++){const a=e.__digit(o)-s;s=1&a>>>30,r.__setDigit(o,1073741823&a)}return r.__trim()}static __absoluteAddOne(e,n,i=null){const r=e.length;i===null?i=new N(r,n):i.sign=n;let s=1;for(let o=0;o<r;o++){const a=e.__digit(o)+s;s=a>>>30,i.__setDigit(o,1073741823&a)}return s!=0&&i.__setDigitGrow(r,1),i}static __absoluteSubOne(e,n){const i=e.length;n=n||i;const r=new N(n,!1);let s=1;for(let o=0;o<i;o++){const a=e.__digit(o)-s;s=1&a>>>30,r.__setDigit(o,1073741823&a)}if(s!=0)throw new Error("implementation bug");for(let o=i;o<n;o++)r.__setDigit(o,0);return r}static __absoluteAnd(e,n,i=null){let r=e.length,s=n.length,o=s;if(r<s){o=r;const l=e,u=r;e=n,r=s,n=l,s=u}let a=o;i===null?i=new N(a,!1):a=i.length;let c=0;for(;c<o;c++)i.__setDigit(c,e.__digit(c)&n.__digit(c));for(;c<a;c++)i.__setDigit(c,0);return i}static __absoluteAndNot(e,n,i=null){const r=e.length,s=n.length;let o=s;r<s&&(o=r);let a=r;i===null?i=new N(a,!1):a=i.length;let c=0;for(;c<o;c++)i.__setDigit(c,e.__digit(c)&~n.__digit(c));for(;c<r;c++)i.__setDigit(c,e.__digit(c));for(;c<a;c++)i.__setDigit(c,0);return i}static __absoluteOr(e,n,i=null){let r=e.length,s=n.length,o=s;if(r<s){o=r;const l=e,u=r;e=n,r=s,n=l,s=u}let a=r;i===null?i=new N(a,!1):a=i.length;let c=0;for(;c<o;c++)i.__setDigit(c,e.__digit(c)|n.__digit(c));for(;c<r;c++)i.__setDigit(c,e.__digit(c));for(;c<a;c++)i.__setDigit(c,0);return i}static __absoluteXor(e,n,i=null){let r=e.length,s=n.length,o=s;if(r<s){o=r;const l=e,u=r;e=n,r=s,n=l,s=u}let a=r;i===null?i=new N(a,!1):a=i.length;let c=0;for(;c<o;c++)i.__setDigit(c,e.__digit(c)^n.__digit(c));for(;c<r;c++)i.__setDigit(c,e.__digit(c));for(;c<a;c++)i.__setDigit(c,0);return i}static __absoluteCompare(e,n){const i=e.length-n.length;if(i!=0)return i;let r=e.length-1;for(;0<=r&&e.__digit(r)===n.__digit(r);)r--;return 0>r?0:e.__unsignedDigit(r)>n.__unsignedDigit(r)?1:-1}static __multiplyAccumulate(e,n,i,r){if(n===0)return;const s=32767&n,o=n>>>15;let a=0,c=0;for(let l,u=0;u<e.length;u++,r++){l=i.__digit(r);const d=e.__digit(u),h=32767&d,f=d>>>15,g=N.__imul(h,s),p=N.__imul(h,o),w=N.__imul(f,s),_=N.__imul(f,o);l+=c+g+a,a=l>>>30,l&=1073741823,l+=((32767&p)<<15)+((32767&w)<<15),a+=l>>>30,c=_+(p>>>15)+(w>>>15),i.__setDigit(r,1073741823&l)}for(;a!=0||c!==0;r++){let l=i.__digit(r);l+=a+c,c=0,a=l>>>30,i.__setDigit(r,1073741823&l)}}static __internalMultiplyAdd(e,n,i,r,s){let o=i,a=0;for(let c=0;c<r;c++){const l=e.__digit(c),u=N.__imul(32767&l,n),d=N.__imul(l>>>15,n),h=u+((32767&d)<<15)+a+o;o=h>>>30,a=d>>>15,s.__setDigit(c,1073741823&h)}if(s.length>r)for(s.__setDigit(r++,o+a);r<s.length;)s.__setDigit(r++,0);else if(o+a!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,n,i){i>this.length&&(i=this.length);const r=32767&e,s=e>>>15;let o=0,a=n;for(let c=0;c<i;c++){const l=this.__digit(c),u=32767&l,d=l>>>15,h=N.__imul(u,r),f=N.__imul(u,s),g=N.__imul(d,r),p=N.__imul(d,s);let w=a+h+o;o=w>>>30,w&=1073741823,w+=((32767&f)<<15)+((32767&g)<<15),o+=w>>>30,a=p+(f>>>15)+(g>>>15),this.__setDigit(c,1073741823&w)}if(o!=0||a!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,n,i=null){i===null&&(i=new N(e.length,!1));let r=0;for(let s,o=2*e.length-1;0<=o;o-=2){s=(r<<15|e.__halfDigit(o))>>>0;const a=0|s/n;r=0|s%n,s=(r<<15|e.__halfDigit(o-1))>>>0;const c=0|s/n;r=0|s%n,i.__setDigit(o>>>1,a<<15|c)}return i}static __absoluteModSmall(e,n){let i=0;for(let r=2*e.length-1;0<=r;r--)i=0|((i<<15|e.__halfDigit(r))>>>0)%n;return i}static __absoluteDivLarge(e,n,i,r){const s=n.__halfDigitLength(),o=n.length,a=e.__halfDigitLength()-s;let c=null;i&&(c=new N(a+2>>>1,!1),c.__initializeDigits());const l=new N(s+2>>>1,!1);l.__initializeDigits();const u=N.__clz15(n.__halfDigit(s-1));0<u&&(n=N.__specialLeftShift(n,u,0));const d=N.__specialLeftShift(e,u,1),h=n.__halfDigit(s-1);let f=0;for(let g,p=a;0<=p;p--){g=32767;const w=d.__halfDigit(p+s);if(w!==h){const k=(w<<15|d.__halfDigit(p+s-1))>>>0;g=0|k/h;let T=0|k%h;const R=n.__halfDigit(s-2),E=d.__halfDigit(p+s-2);for(;N.__imul(g,R)>>>0>(T<<16|E)>>>0&&(g--,T+=h,!(32767<T)););}N.__internalMultiplyAdd(n,g,0,o,l);let _=d.__inplaceSub(l,p,s+1);_!==0&&(_=d.__inplaceAdd(n,p,s),d.__setHalfDigit(p+s,32767&d.__halfDigit(p+s)+_),g--),i&&(1&p?f=g<<15:c.__setDigit(p>>>1,f|g))}if(r)return d.__inplaceRightShift(u),i?{quotient:c,remainder:d}:d;if(i)return c;throw new Error("unreachable")}static __clz15(e){return N.__clz30(e)-15}__inplaceAdd(e,n,i){let r=0;for(let s=0;s<i;s++){const o=this.__halfDigit(n+s)+e.__halfDigit(s)+r;r=o>>>15,this.__setHalfDigit(n+s,32767&o)}return r}__inplaceSub(e,n,i){let r=0;if(1&n){n>>=1;let s=this.__digit(n),o=32767&s,a=0;for(;a<i-1>>>1;a++){const u=e.__digit(a),d=(s>>>15)-(32767&u)-r;r=1&d>>>15,this.__setDigit(n+a,(32767&d)<<15|32767&o),s=this.__digit(n+a+1),o=(32767&s)-(u>>>15)-r,r=1&o>>>15}const c=e.__digit(a),l=(s>>>15)-(32767&c)-r;if(r=1&l>>>15,this.__setDigit(n+a,(32767&l)<<15|32767&o),n+a+1>=this.length)throw new RangeError("out of bounds");!(1&i)&&(s=this.__digit(n+a+1),o=(32767&s)-(c>>>15)-r,r=1&o>>>15,this.__setDigit(n+e.length,1073709056&s|32767&o))}else{n>>=1;let s=0;for(;s<e.length-1;s++){const u=this.__digit(n+s),d=e.__digit(s),h=(32767&u)-(32767&d)-r;r=1&h>>>15;const f=(u>>>15)-(d>>>15)-r;r=1&f>>>15,this.__setDigit(n+s,(32767&f)<<15|32767&h)}const o=this.__digit(n+s),a=e.__digit(s),c=(32767&o)-(32767&a)-r;r=1&c>>>15;let l=0;!(1&i)&&(l=(o>>>15)-(a>>>15)-r,r=1&l>>>15),this.__setDigit(n+s,(32767&l)<<15|32767&c)}return r}__inplaceRightShift(e){if(e===0)return;let n=this.__digit(0)>>>e;const i=this.length-1;for(let r=0;r<i;r++){const s=this.__digit(r+1);this.__setDigit(r,1073741823&s<<30-e|n),n=s>>>e}this.__setDigit(i,n)}static __specialLeftShift(e,n,i){const r=e.length,s=new N(r+i,!1);if(n===0){for(let a=0;a<r;a++)s.__setDigit(a,e.__digit(a));return 0<i&&s.__setDigit(r,0),s}let o=0;for(let a=0;a<r;a++){const c=e.__digit(a);s.__setDigit(a,1073741823&c<<n|o),o=c>>>30-n}return 0<i&&s.__setDigit(r,o),s}static __leftShiftByAbsolute(e,n){const i=N.__toShiftAmount(n);if(0>i)throw new RangeError("BigInt too big");const r=0|i/30,s=i%30,o=e.length,a=s!==0&&e.__digit(o-1)>>>30-s!=0,c=o+r+(a?1:0),l=new N(c,e.sign);if(s===0){let u=0;for(;u<r;u++)l.__setDigit(u,0);for(;u<c;u++)l.__setDigit(u,e.__digit(u-r))}else{let u=0;for(let d=0;d<r;d++)l.__setDigit(d,0);for(let d=0;d<o;d++){const h=e.__digit(d);l.__setDigit(d+r,1073741823&h<<s|u),u=h>>>30-s}if(a)l.__setDigit(o+r,u);else if(u!==0)throw new Error("implementation bug")}return l.__trim()}static __rightShiftByAbsolute(e,n){const i=e.length,r=e.sign,s=N.__toShiftAmount(n);if(0>s)return N.__rightShiftByMaximum(r);const o=0|s/30,a=s%30;let c=i-o;if(0>=c)return N.__rightShiftByMaximum(r);let l=!1;if(r){if(e.__digit(o)&(1<<a)-1)l=!0;else for(let d=0;d<o;d++)if(e.__digit(d)!==0){l=!0;break}}l&&a===0&&!~e.__digit(i-1)&&c++;let u=new N(c,r);if(a===0){u.__setDigit(c-1,0);for(let d=o;d<i;d++)u.__setDigit(d-o,e.__digit(d))}else{let d=e.__digit(o)>>>a;const h=i-o-1;for(let f=0;f<h;f++){const g=e.__digit(f+o+1);u.__setDigit(f,1073741823&g<<30-a|d),d=g>>>a}u.__setDigit(h,d)}return l&&(u=N.__absoluteAddOne(u,!0,u)),u.__trim()}static __rightShiftByMaximum(e){return e?N.__oneDigit(1,!0):N.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const n=e.__unsignedDigit(0);return n>N.__kMaxLengthBits?-1:n}static __toPrimitive(e,n="default"){if(typeof e!="object"||e.constructor===N)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const s=e[Symbol.toPrimitive];if(s){const o=s(n);if(typeof o!="object")return o;throw new TypeError("Cannot convert object to primitive value")}}const i=e.valueOf;if(i){const s=i.call(e);if(typeof s!="object")return s}const r=e.toString;if(r){const s=r.call(e);if(typeof s!="object")return s}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return N.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===N}static __truncateToNBits(e,n){const i=0|(e+29)/30,r=new N(i,n.sign),s=i-1;for(let a=0;a<s;a++)r.__setDigit(a,n.__digit(a));let o=n.__digit(s);if(e%30!=0){const a=32-e%30;o=o<<a>>>a}return r.__setDigit(s,o),r.__trim()}static __truncateAndSubFromPowerOfTwo(e,n,i){var r=Math.min;const s=0|(e+29)/30,o=new N(s,i);let a=0;const c=s-1;let l=0;for(const f=r(c,n.length);a<f;a++){const g=0-n.__digit(a)-l;l=1&g>>>30,o.__setDigit(a,1073741823&g)}for(;a<c;a++)o.__setDigit(a,0|1073741823&-l);let u=c<n.length?n.__digit(c):0;const d=e%30;let h;if(d==0)h=0-u-l,h&=1073741823;else{const f=32-d;u=u<<f>>>f;const g=1<<32-f;h=g-u-l,h&=g-1}return o.__setDigit(c,h),o.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,n){this[e]=0|n}__setDigitGrow(e,n){this[e]=0|n}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,n){const i=e>>>1,r=this.__digit(i),s=1&e?32767&r|n<<15:1073709056&r|32767&n;this.__setDigit(i,s)}static __digitPow(e,n){let i=1;for(;0<n;)1&n&&(i*=e),n>>>=1,e*=e;return i}static __isOneDigitInt(e){return(1073741823&e)===e}}N.__kMaxLength=33554432,N.__kMaxLengthBits=N.__kMaxLength<<5,N.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],N.__kBitsPerCharTableShift=5,N.__kBitsPerCharTableMultiplier=1<<N.__kBitsPerCharTableShift,N.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],N.__kBitConversionBuffer=new ArrayBuffer(8),N.__kBitConversionDouble=new Float64Array(N.__kBitConversionBuffer),N.__kBitConversionInts=new Int32Array(N.__kBitConversionBuffer),N.__clz30=Math.clz32?function(t){return Math.clz32(t)-2}:function(t){return t===0?30:0|29-(0|Math.log(t>>>0)/Math.LN2)},N.__imul=Math.imul||function(t,e){return 0|t*e};var I$=Object.defineProperty,E$=(t,e,n)=>e in t?I$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Er=(t,e,n)=>(E$(t,typeof e!="symbol"?e+"":e,n),n),Du=443636,ju=-443636,Pp="79226673515401279992447579055",Fp="4295048016",x$=14,M$="59543866431248",N$="184467440737095516",O$="15793534762490258745",D$=class{generateMnemonic(t=24){return fT(A$,t===12?128:256)}getKeypairFromMnemonics(t,e={}){const n=this.getDerivePath(e);return Oa.deriveKeypair(t,n)}getDerivePath(t={}){const{accountIndex:e=0,isExternal:n=!1,addressIndex:i=0}=t;return`m/44'/784'/${e}'/${n?1:0}'/${i}'`}},Ul=class{constructor(t){this.sdk=t,Er(this,"_lru"),Er(this,"_fetching",{})}async getCacheOrSet(t,e,n=0){var i;const r=this._lru||(this._lru=new Dp({max:100}));if(r.has(t))return r.get(t);const o=await((i=this._fetching)[t]||(i[t]=e()));return delete this._fetching[t],r.set(t,o,{ttl:n}),o}get provider(){return this.sdk.provider}get math(){return this.sdk.math}get account(){return this.sdk.account}get network(){return this.sdk.network}get contract(){return this.sdk.contract}get nft(){return this.sdk.nft}get coin(){return this.sdk.coin}get trade(){return this.sdk.trade}get pool(){return this.sdk.pool}};function j$(t){if("reference"in t)return t.reference;const e=Vm(t);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:qk(t)}function Gh(t){var e,n;return"objectId"in t?t.objectId:(n=(e=j$(t))==null?void 0:e.objectId)!=null?n:Vk(t)}function Vr(t){var e;return"fields"in t?t.fields:(e=zk(t))==null?void 0:e.fields}function zk(t){const e="data"in t?Vm(t):t;if(!(!e||!R$(e)||e.content.dataType!=="moveObject"))return e.content}function R$(t){return t.content!==void 0}function Vm(t){return t.data}function qk(t){if(t.error&&"object_id"in t.error&&"version"in t.error&&"digest"in t.error){const e=t.error;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function Vk(t){if(t.error&&"object_id"in t.error&&!("version"in t.error)&&!("digest"in t.error))return t.error.object_id}function B$(t){return t.data!==void 0}function P$(t){var e;const n=B$(t)?t.data:t;return!(n!=null&&n.type)&&"data"in t?((e=n==null?void 0:n.content)==null?void 0:e.dataType)==="package"?"package":rh(t):n==null?void 0:n.type}function rh(t){var e;return(e=zk(t))==null?void 0:e.type}function F$(t){var e;return(e=Vm(t))==null?void 0:e.owner}var al=async(t,e,n)=>{const r=e.length;if(r>50){const s=[];let o=0;const a=Math.ceil(r/50);for(o;o<a;o++)s.push(t.multiGetObjects({ids:e.slice(o*50,(o+1)*50),options:n}));return(await Promise.all(s)).flat()}return await t.multiGetObjects({ids:e,options:n})},U$=class extends Ul{async getConfig(){return(await this.fetchJSON())[this.network].contract}getFees(){return this.getCacheOrSet("fees",async()=>{const e=(await this.fetchJSON())[this.network].fee;return(await al(this.provider,Object.values(e),{showContent:!0})).map(i=>{const r=Vr(i),s=Gh(i),o=rh(i);return{objectId:s,type:o.split("<")[1].slice(0,-1),fee:r.fee,tickSpacing:r.tick_spacing}})})}fetchJSON(){return this.getCacheOrSet("contract-json",async()=>await(await fetch("https://s3.amazonaws.com/app.turbos.finance/sdk/contract.json?t="+Date.now(),{method:"GET"})).json())}},e0=new A(2).pow(new A(128)),L$=class{priceToSqrtPriceX64(t,e,n){return new A(new ne(t).mul(ne.pow(10,n-e)).sqrt().mul(ne.pow(2,64)).floor().toFixed(0))}sqrtPriceX64ToPrice(t,e,n){return new ne(t.toString()).mul(ne.pow(2,-64)).pow(2).mul(ne.pow(10,e-n))}priceToTickIndex(t,e,n){return this.sqrtPriceX64ToTickIndex(this.priceToSqrtPriceX64(t,e,n))}sqrtPriceX64ToTickIndex(t){if(t.gt(new A(Pp))||t.lt(new A(Fp)))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const e=t.bitLength()-1,n=new A(e-64),i=this.signedShiftLeft(n,32,128);let r=new A("8000000000000000","hex"),s=0,o=new A(0),a=e>=64?t.shrn(e-63):t.shln(63-e);for(;r.gt(new A(0))&&s<x$;){a=a.mul(a);let f=a.shrn(127);a=a.shrn(63+f.toNumber()),o=o.add(r.mul(f)),r=r.shrn(1),s+=1}const c=o.shrn(32),u=i.add(c).mul(new A(M$)),d=this.signedShiftRight(u.sub(new A(N$)),64,128).toNumber(),h=this.signedShiftRight(u.add(new A(O$)),64,128).toNumber();return d==h?d:this.tickIndexToSqrtPriceX64(h).lte(t)?h:d}tickIndexToSqrtPriceX64(t){return t>0?new A(this.tickIndexToSqrtPricePositive(t)):new A(this.tickIndexToSqrtPriceNegative(t))}tickIndexToPrice(t,e,n){return this.sqrtPriceX64ToPrice(this.tickIndexToSqrtPriceX64(t),e,n)}toX64_Decimal(t){return t.mul(ne.pow(2,64))}fromX64_Decimal(t){return t.mul(ne.pow(2,-64))}scaleDown(t,e){return new ne(t).div(ne.pow(10,e)).toString()}scaleUp(t,e){return new ne(t).mul(ne.pow(10,e)).toString()}bitsToNumber(t,e=32){return N.toNumber(N.asIntN(e,N.BigInt(t)))}subUnderflowU128(t,e){return t.add(e0).sub(e).mod(e0)}tickIndexToSqrtPricePositive(t){let e;return t&1?e=new A("79232123823359799118286999567"):e=new A("79228162514264337593543950336"),t&2&&(e=this.signedShiftRight(e.mul(new A("79236085330515764027303304731")),96,256)),t&4&&(e=this.signedShiftRight(e.mul(new A("79244008939048815603706035061")),96,256)),t&8&&(e=this.signedShiftRight(e.mul(new A("79259858533276714757314932305")),96,256)),t&16&&(e=this.signedShiftRight(e.mul(new A("79291567232598584799939703904")),96,256)),t&32&&(e=this.signedShiftRight(e.mul(new A("79355022692464371645785046466")),96,256)),t&64&&(e=this.signedShiftRight(e.mul(new A("79482085999252804386437311141")),96,256)),t&128&&(e=this.signedShiftRight(e.mul(new A("79736823300114093921829183326")),96,256)),t&256&&(e=this.signedShiftRight(e.mul(new A("80248749790819932309965073892")),96,256)),t&512&&(e=this.signedShiftRight(e.mul(new A("81282483887344747381513967011")),96,256)),t&1024&&(e=this.signedShiftRight(e.mul(new A("83390072131320151908154831281")),96,256)),t&2048&&(e=this.signedShiftRight(e.mul(new A("87770609709833776024991924138")),96,256)),t&4096&&(e=this.signedShiftRight(e.mul(new A("97234110755111693312479820773")),96,256)),t&8192&&(e=this.signedShiftRight(e.mul(new A("119332217159966728226237229890")),96,256)),t&16384&&(e=this.signedShiftRight(e.mul(new A("179736315981702064433883588727")),96,256)),t&32768&&(e=this.signedShiftRight(e.mul(new A("407748233172238350107850275304")),96,256)),t&65536&&(e=this.signedShiftRight(e.mul(new A("2098478828474011932436660412517")),96,256)),t&131072&&(e=this.signedShiftRight(e.mul(new A("55581415166113811149459800483533")),96,256)),t&262144&&(e=this.signedShiftRight(e.mul(new A("38992368544603139932233054999993551")),96,256)),this.signedShiftRight(e,32,256)}tickIndexToSqrtPriceNegative(t){let e=Math.abs(t),n;return e&1?n=new A("18445821805675392311"):n=new A("18446744073709551616"),e&2&&(n=this.signedShiftRight(n.mul(new A("18444899583751176498")),64,256)),e&4&&(n=this.signedShiftRight(n.mul(new A("18443055278223354162")),64,256)),e&8&&(n=this.signedShiftRight(n.mul(new A("18439367220385604838")),64,256)),e&16&&(n=this.signedShiftRight(n.mul(new A("18431993317065449817")),64,256)),e&32&&(n=this.signedShiftRight(n.mul(new A("18417254355718160513")),64,256)),e&64&&(n=this.signedShiftRight(n.mul(new A("18387811781193591352")),64,256)),e&128&&(n=this.signedShiftRight(n.mul(new A("18329067761203520168")),64,256)),e&256&&(n=this.signedShiftRight(n.mul(new A("18212142134806087854")),64,256)),e&512&&(n=this.signedShiftRight(n.mul(new A("17980523815641551639")),64,256)),e&1024&&(n=this.signedShiftRight(n.mul(new A("17526086738831147013")),64,256)),e&2048&&(n=this.signedShiftRight(n.mul(new A("16651378430235024244")),64,256)),e&4096&&(n=this.signedShiftRight(n.mul(new A("15030750278693429944")),64,256)),e&8192&&(n=this.signedShiftRight(n.mul(new A("12247334978882834399")),64,256)),e&16384&&(n=this.signedShiftRight(n.mul(new A("8131365268884726200")),64,256)),e&32768&&(n=this.signedShiftRight(n.mul(new A("3584323654723342297")),64,256)),e&65536&&(n=this.signedShiftRight(n.mul(new A("696457651847595233")),64,256)),e&131072&&(n=this.signedShiftRight(n.mul(new A("26294789957452057")),64,256)),e&262144&&(n=this.signedShiftRight(n.mul(new A("37481735321082")),64,256)),n}signedShiftLeft(t,e,n){let i=t.toTwos(n).shln(e);return i.imaskn(n+1),i.fromTwos(n)}signedShiftRight(t,e,n){let i=t.toTwos(n).shrn(e);return i.imaskn(n-e+1),i.fromTwos(n-e)}},Up=(t,e)=>{const n=Gh(t);if(qk(t))throw new Error(`${e}(${n}) had been deleted`);if(Vk(t))throw new Error(`${e}(${n}) is not found`);return!0},ma=60*1e3,$$=class extends Ul{async getPools(t=!1){const e=await this.contract.getConfig(),n=[];let i;do i=await this.provider.getDynamicFields({parentId:e.PoolTableId,cursor:i==null?void 0:i.nextCursor,limit:15}),n.push(...i.data.map(a=>a.objectId));while(i.hasNextPage);if(!n.length)return[];const s=(await al(this.provider,n,{showContent:!0})).map(a=>Vr(a).value.fields.pool_id);if(!s.length)return[];let o=await al(this.provider,s,{showContent:!0});return t||(o=o.filter(a=>Vr(a).unlocked)),o.map(a=>this.parsePool(a))}async getPool(t){return this.getCacheOrSet(`pool-${t}`,async()=>{const e=await this.provider.getObject({id:t,options:{showContent:!0}});return Up(e,"pool"),this.parsePool(e)},1500)}async createPool(t){const{fee:e,address:n,tickLower:i,tickUpper:r,sqrtPrice:s,slippage:o,coinTypeA:a,coinTypeB:c}=t,l=await this.contract.getConfig(),u=new ne(t.amountA),d=new ne(t.amountB),[h,f]=await Promise.all([this.coin.selectTradeCoins(n,a,u),this.coin.selectTradeCoins(n,c,d)]),g=t.txb||new X,p=h.length>0?this.coin.convertTradeCoins(g,h,a,u):[this.coin.zero(a,g)],w=f.length>0?this.coin.convertTradeCoins(g,f,c,d):[this.coin.zero(c,g)];return g.moveCall({target:`${l.PackageId}::pool_factory::deploy_pool_and_mint`,typeArguments:[a,c,e.type],arguments:[g.object(l.PoolConfig),g.object(e.objectId),g.pure(s,"u128"),g.object(l.Positions),g.makeMoveVec({objects:p}),g.makeMoveVec({objects:w}),g.pure(Math.abs(i).toFixed(0),"u32"),g.pure(i<0,"bool"),g.pure(Math.abs(r).toFixed(0),"u32"),g.pure(r<0,"bool"),g.pure(u.toFixed(0),"u64"),g.pure(d.toFixed(0),"u64"),g.pure(this.getMinimumAmountBySlippage(u,o),"u64"),g.pure(this.getMinimumAmountBySlippage(d,o),"u64"),g.pure(n,"address"),g.pure(Date.now()+(t.deadline||ma),"u64"),g.object(is),g.object(l.Versioned)]}),g}async addLiquidity(t){const{address:e,tickLower:n,tickUpper:i,slippage:r,pool:s}=t,o=await this.contract.getConfig(),a=await this.getPoolTypeArguments(s),[c,l]=a,[u,d]=await Promise.all([this.coin.getMetadata(c),this.coin.getMetadata(l)]);if(!u||!d)throw new Error("Invalid coin type");const h=new ne(t.amountA),f=new ne(t.amountB),[g,p]=await Promise.all([this.coin.selectTradeCoins(e,c,h),this.coin.selectTradeCoins(e,l,f)]),w=t.txb||new X,_=g.length>0?this.coin.convertTradeCoins(w,g,c,h):[this.coin.zero(c,w)],k=p.length>0?this.coin.convertTradeCoins(w,p,l,f):[this.coin.zero(l,w)];return w.moveCall({target:`${o.PackageId}::position_manager::mint`,typeArguments:a,arguments:[w.object(s),w.object(o.Positions),w.makeMoveVec({objects:_}),w.makeMoveVec({objects:k}),w.pure(Math.abs(n).toFixed(0),"u32"),w.pure(n<0,"bool"),w.pure(Math.abs(i).toFixed(0),"u32"),w.pure(i<0,"bool"),w.pure(h.toFixed(0),"u64"),w.pure(f.toFixed(0),"u64"),w.pure(this.getMinimumAmountBySlippage(h,r),"u64"),w.pure(this.getMinimumAmountBySlippage(f,r),"u64"),w.pure(e,"address"),w.pure(Date.now()+(t.deadline||ma),"u64"),w.object(is),w.object(o.Versioned)]}),w}async increaseLiquidity(t){const{pool:e,slippage:n,address:i,nft:r}=t,s=await this.contract.getConfig(),o=new ne(t.amountA),a=new ne(t.amountB),c=await this.getPoolTypeArguments(e),[l,u]=c,[d,h]=await Promise.all([this.coin.selectTradeCoins(i,l,o),this.coin.selectTradeCoins(i,u,a)]),f=t.txb||new X,g=d.length>0?this.coin.convertTradeCoins(f,d,l,o):[this.coin.zero(l,f)],p=h.length>0?this.coin.convertTradeCoins(f,h,u,a):[this.coin.zero(u,f)];return f.moveCall({target:`${s.PackageId}::position_manager::increase_liquidity`,typeArguments:c,arguments:[f.object(e),f.object(s.Positions),f.makeMoveVec({objects:g}),f.makeMoveVec({objects:p}),f.object(r),f.pure(o.toFixed(0),"u64"),f.pure(a.toFixed(0),"u64"),f.pure(this.getMinimumAmountBySlippage(o,n),"u64"),f.pure(this.getMinimumAmountBySlippage(a,n),"u64"),f.pure(Date.now()+(t.deadline||ma*3),"u64"),f.object(is),f.object(s.Versioned)]}),f}async decreaseLiquidity(t){const{slippage:e,nft:n,pool:i,decreaseLiquidity:r}=t,s=new ne(t.amountA),o=new ne(t.amountB),a=await this.contract.getConfig(),c=await this.getPoolTypeArguments(i),l=t.txb||new X;return l.moveCall({target:`${a.PackageId}::position_manager::decrease_liquidity`,typeArguments:c,arguments:[l.object(i),l.object(a.Positions),l.object(n),l.pure(new A(r).toString(),"u128"),l.pure(this.getMinimumAmountBySlippage(s,e),"u64"),l.pure(this.getMinimumAmountBySlippage(o,e),"u64"),l.pure(Date.now()+(t.deadline||ma*3),"u64"),l.object(is),l.object(a.Versioned)]}),l}async removeLiquidity(t){let e=await this.decreaseLiquidity(t);return e=await this.collectFee({txb:e,...t}),e=await this.collectReward({txb:e,...t}),e=await this.nft.burn({txb:e,nft:t.nft,pool:t.pool}),e}async collectFee(t){const{pool:e,nft:n,address:i,collectAmountA:r,collectAmountB:s}=t,o=t.txb||new X;if(Number(r)===0&&Number(s)===0)return o;const a=await this.contract.getConfig(),c=await this.getPoolTypeArguments(e);return o.moveCall({target:`${a.PackageId}::position_manager::collect`,typeArguments:c,arguments:[o.object(e),o.object(a.Positions),o.object(n),o.pure(r,"u64"),o.pure(s,"u64"),o.pure(i),o.pure(Date.now()+(t.deadline||ma*3),"u64"),o.object(is),o.object(a.Versioned)]}),o}async collectReward(t){const{pool:e,nft:n,rewardAmounts:i,address:r}=t,s=t.txb||new X,o=await this.contract.getConfig(),a=await this.getPoolTypeArguments(e);return(await this.getPool(e)).reward_infos.forEach((l,u)=>{s.moveCall({target:`${o.PackageId}::position_manager::collect_reward`,typeArguments:[...a,l.fields.vault_coin_type],arguments:[s.object(e),s.object(o.Positions),s.object(n),s.object(l.fields.vault),s.pure(u,"u64"),s.pure(i[u],"u64"),s.pure(r),s.pure(Date.now()+(t.deadline||ma*3),"u64"),s.object(is),s.object(o.Versioned)]})}),s}getTokenAmountsFromLiquidity(t){const e=new ne((t.liquidity||new A(1e8)).toString()),n=new ne(t.currentSqrtPrice.toString()),i=new ne(t.lowerSqrtPrice.toString()),r=new ne(t.upperSqrtPrice.toString());let s,o;t.currentSqrtPrice.lt(t.lowerSqrtPrice)?(s=this.math.toX64_Decimal(e).mul(r.sub(i)).div(i.mul(r)),o=new ne(0)):t.currentSqrtPrice.lt(t.upperSqrtPrice)?(s=this.math.toX64_Decimal(e).mul(r.sub(n)).div(n.mul(r)),o=this.math.fromX64_Decimal(e.mul(n.sub(i)))):(s=new ne(0),o=this.math.fromX64_Decimal(e.mul(r.sub(i))));const a=t.ceil!==!1?"ceil":"floor";return[new A(s[a]().toString()),new A(o[a]().toString())]}async getPoolTypeArguments(t){return this.getCacheOrSet("pool-type-"+t,async()=>(await this.getPool(t)).types)}parsePoolType(t,e){var n;const i=((n=t.replace(">","").split("<")[1])==null?void 0:n.split(/,\s*/))||[];if(e!==void 0&&e!==i.length)throw new Error("Invalid pool type");return i}async getFixedLiquidity(t){var e,n;const{coinTypeA:i,coinTypeB:r,amountA:s,amountB:o}=t,[a,c]=await Promise.all([this.coin.getMetadata(i),this.coin.getMetadata(r)]),l=new ne(this.math.scaleDown(s,a.decimals)).mul((e=t.priceA)!=null?e:1),u=new ne(this.math.scaleDown(o,c.decimals)).mul((n=t.priceB)!=null?n:1);return{liquidityA:l.toString(),liquidityB:u.toString(),liquidity:l.plus(u).toString()}}parsePool(t){const e=Vr(t),n=Gh(t),i=P$(t),r=this.parsePoolType(i,3);return this.getCacheOrSet("pool-type-"+n,async()=>r),{...e,objectId:n,type:i,types:r}}getMinimumAmountBySlippage(t,e){const n=new ne(t),i=new ne(1).minus(new ne(e).div(100));if(i.lte(0)||i.gt(1))throw new Error("invalid slippage range");return n.mul(i).toFixed(0)}},z$=(t,e)=>{const{pool:n,position:i,tickLowerDetail:r,tickUpperDetail:s}=e,o=new A(n.fee_growth_global_a),a=new A(i.fee_growth_inside_a),c=new A(i.tokens_owed_a),l=new A(n.fee_growth_global_b),u=new A(i.fee_growth_inside_b),d=new A(i.tokens_owed_b),h=new A(i.liquidity);let f,g,p,w;const _=t.bitsToNumber(n.tick_current_index.fields.bits),k=t.bitsToNumber(i.tick_lower_index.fields.bits),T=t.bitsToNumber(i.tick_upper_index.fields.bits);_<k?(f=t.subUnderflowU128(o,r.feeGrowthOutsideA),g=t.subUnderflowU128(l,r.feeGrowthOutsideB)):(f=r.feeGrowthOutsideA,g=r.feeGrowthOutsideB),_<T?(p=s.feeGrowthOutsideA,w=s.feeGrowthOutsideB):(p=t.subUnderflowU128(o,s.feeGrowthOutsideA),w=t.subUnderflowU128(l,s.feeGrowthOutsideB));const R=t.subUnderflowU128(t.subUnderflowU128(o,f),p),E=t.subUnderflowU128(t.subUnderflowU128(l,g),w),D=t.subUnderflowU128(R,a).mul(h).shrn(64),B=t.subUnderflowU128(E,u).mul(h).shrn(64);return{feeOwedA:c.add(D).toString(),feeOwedB:d.add(B).toString()}},t0=new A(0),n0=new A(1),q$=new A(2),V$={mul(t,e,n){const i=t.mul(e);if(this.isOverLimit(i,n))throw new Error(`Mul result higher than u${n}`);return i},mulDiv(t,e,n,i){return this.mulDivRoundUpIf(t,e,n,!1,i)},mulDivRoundUpIf(t,e,n,i,r){if(n.eq(t0))throw new Error("mulDiv denominator is zero");const s=this.mul(t,e,r),o=s.div(n);return i&&s.mod(n).gt(t0)?o.add(n0):o},isOverLimit(t,e){const n=q$.pow(new A(e)).sub(n0);return t.gt(n)}},W$=(t,e)=>{var n,i,r,s;const{pool:o,position:a,tickLowerDetail:c,tickUpperDetail:l,timeStampInSeconds:u}=e,d=new A(new ne(o.reward_last_updated_time_ms).div(1e3).toFixed(0)),f=(u??new A(Date.now()).div(new A(1e3))).sub(new A(d)),g=[],p=new A(o.liquidity),w=new A(a.liquidity);for(let _=0;_<3;++_){const k=o.reward_infos[_],T={emissionsPerSecondX64:new A(k?k.fields.emissions_per_second:"0"),growthGlobalX64:new A(k?k.fields.growth_global:"0")},R={growthInsideCheckpoint:new A((i=(n=a.reward_infos[_])==null?void 0:n.fields.reward_growth_inside)!=null?i:"0"),amountOwed:new A((s=(r=a.reward_infos[_])==null?void 0:r.fields.amount_owed)!=null?s:"0")};let E=T.growthGlobalX64;if(!p.isZero()){const ie=V$.mulDiv(f,T.emissionsPerSecondX64,p,128);E=T.growthGlobalX64.add(ie)}const D=c.rewardGrowthsOutside[_],B=l.rewardGrowthsOutside[_];let $=E;c.initialized&&($=t.bitsToNumber(o.tick_current_index.fields.bits)<t.bitsToNumber(a.tick_lower_index.fields.bits)?t.subUnderflowU128(E,D):D);let Y=new A(0);l.initialized&&(Y=t.bitsToNumber(o.tick_current_index.fields.bits)<t.bitsToNumber(a.tick_upper_index.fields.bits)?B:t.subUnderflowU128(E,B));const z=t.subUnderflowU128(t.subUnderflowU128(E,$),Y),H=R.amountOwed.shln(64);g[_]=H.add(t.subUnderflowU128(z,R.growthInsideCheckpoint).mul(w)).shrn(64).toString()}return g},K$=class extends Ul{async getOwner(t){const e=await this.getObject(t),n=F$(e);if(!(!n||typeof n=="string")){if("ObjectOwner"in n)return n.ObjectOwner;if("AddressOwner"in n)return n.AddressOwner}}async getFields(t){const e=await this.getObject(t);return Vr(e)}async getPositionFields(t){const e=await this.contract.getConfig(),n=await this.provider.getDynamicFieldObject({parentId:e.Positions,name:{type:"address",value:t}});return Vr(n)}async getPositionFieldsByPositionId(t){const e=await this.provider.getObject({id:t,options:{showContent:!0}});return Up(e,"position"),Vr(e)}async getPositionTick(t,e){const n=await this.provider.getDynamicFieldObject({parentId:t,name:{type:e.type,value:e.fields}}),i=Vr(n);if(i)return{tickIndex:this.math.bitsToNumber(i.name.fields.bits),initialized:i.value.fields.initialized,liquidityNet:new A(this.math.bitsToNumber(i.value.fields.liquidity_net.fields.bits,128).toString()),liquidityGross:new A(i.value.fields.liquidity_gross),feeGrowthOutsideA:new A(i.value.fields.fee_growth_outside_a),feeGrowthOutsideB:new A(i.value.fields.fee_growth_outside_b),rewardGrowthsOutside:i.value.fields.reward_growths_outside.map(r=>new A(r))}}async getPositionAPR(t){const{poolId:e,getPrice:n,fees24h:i,tickLower:r,tickUpper:s}=t,o=await this.pool.getPool(e),a=this.math.bitsToNumber(o.tick_current_index.fields.bits),[c,l,u,d]=await Promise.all([this.coin.getMetadata(o.types[0]),this.coin.getMetadata(o.types[1]),n(o.types[0]),n(o.types[1])]);if(!u||!d||r>=s||a<r||a>=s)return{fees:"0",rewards:"0",total:"0"};const{minTokenA:h,minTokenB:f}=this.getRemoveLiquidityQuote(o,r,s),g=new ne(this.math.scaleDown(h.toString(),c.decimals)).mul(u),p=new ne(this.math.scaleDown(f.toString(),l.decimals)).mul(d),w=g.add(p),_=w.isZero()?new ne(0):new ne(i).mul(365).div(w).mul(100);let k=new ne(0);return await Promise.all(o.reward_infos.map(async T=>{const{emissions_per_second:R}=T.fields,E=this.coin.formatCoinType(T.fields.vault_coin_type),[D,B]=await Promise.all([n(E),this.coin.getMetadata(E)]);!R||R==="0"||!D||(k=k.add(new ne(new A(R).shrn(64).toString()).div(10**B.decimals).mul(31536e3).mul(D).div(w).mul(100)))})),{fees:_.toString(),rewards:k.toString(),total:_.plus(k).toString()}}getRemoveLiquidityQuote(t,e,n){const i=new A(0),r=new A(t.liquidity),s=this.math.bitsToNumber(t.tick_current_index.fields.bits),o=this.math.tickIndexToSqrtPriceX64(e),a=this.math.tickIndexToSqrtPriceX64(n);if(s<e){const l=this.getTokenAFromLiquidity(r,o,a);return{minTokenA:this.adjustForSlippage(l),minTokenB:i}}if(s<n){const l=new A(t.sqrt_price),u=this.getTokenAFromLiquidity(r,l,a),d=this.getTokenBFromLiquidity(r,o,l);return{minTokenA:this.adjustForSlippage(u),minTokenB:this.adjustForSlippage(d)}}const c=this.getTokenBFromLiquidity(r,o,a);return{minTokenA:i,minTokenB:this.adjustForSlippage(c)}}adjustForSlippage(t){const e={numerator:new A(0),denominator:new A(1e3)};return t.mul(e.denominator).div(e.denominator.add(e.numerator))}getTokenAFromLiquidity(t,e,n){const i=t.mul(n.sub(e)).shln(64),r=n.mul(e);return i.div(r)}getTokenBFromLiquidity(t,e,n){return t.mul(n.sub(e)).shrn(64)}async burn(t){const{pool:e,nft:n}=t,i=t.txb||new X,r=await this.contract.getConfig(),s=await this.pool.getPoolTypeArguments(e);return i.moveCall({target:`${r.PackageId}::position_manager::burn`,typeArguments:s,arguments:[i.object(r.Positions),i.object(n),i.object(r.Versioned)]}),i}async getPositionLiquidityUSD(t){const{position:e,poolId:n,priceA:i,priceB:r}=t,s=await this.pool.getPool(n),o=this.pool.getTokenAmountsFromLiquidity({currentSqrtPrice:new A(s.sqrt_price),lowerSqrtPrice:this.math.tickIndexToSqrtPriceX64(this.math.bitsToNumber(e.tick_lower_index.fields.bits)),upperSqrtPrice:this.math.tickIndexToSqrtPriceX64(this.math.bitsToNumber(e.tick_upper_index.fields.bits)),liquidity:new A(e.liquidity===void 0?1e8:e.liquidity)}),[a,c]=await Promise.all([this.coin.getMetadata(s.types[0]),this.coin.getMetadata(s.types[1])]),l=new ne(o[0].toString()).div(10**a.decimals).mul(i||0),u=new ne(o[1].toString()).div(10**c.decimals).mul(r||0);return l.plus(u).toString()}async getUnclaimedFeesAndRewards(t){const{position:e,poolId:n}=t,[i,r,s]=await Promise.all([this.pool.getPool(n),this.nft.getPositionTick(n,e.tick_lower_index),this.nft.getPositionTick(n,e.tick_upper_index)]),o={...t,pool:i,tickLowerDetail:r,tickUpperDetail:s},[a,c]=await Promise.all([this.getUnclaimedFees(o),this.getUnclaimedRewards(o)]),{unclaimedFees:l,...u}=a,{unclaimedRewards:d,...h}=c;return{fees:a.unclaimedFees.toString(),rewards:d.toString(),total:l.plus(d).toString(),fields:{...u,...h}}}async getUnclaimedFees(t){const{position:e,pool:n,getPrice:i,tickLowerDetail:r,tickUpperDetail:s}=t,[o,a,c,l]=await Promise.all([this.coin.getMetadata(n.types[0]),this.coin.getMetadata(n.types[1]),i(n.types[0]),i(n.types[1])]),u=z$(this.math,{pool:n,position:e,tickLowerDetail:r,tickUpperDetail:s});let d=this.math.scaleDown(u.feeOwedA,o.decimals),h=this.math.scaleDown(u.feeOwedB,a.decimals);function f(w,_){return new ne(1e6).mul(ne.pow(10,_)).lt(w)}f(d,o.decimals)&&(d="0",u.feeOwedA="0"),f(h,a.decimals)&&(h="0",u.feeOwedB="0");const g=c===void 0?new ne(0):new ne(c).mul(d),p=l===void 0?new ne(0):new ne(l).mul(h);return{unclaimedFees:g.plus(p),scaledFeeOwedA:d,scaledFeeOwedB:h,...u}}async getUnclaimedRewards(t){const{position:e,pool:n,getPrice:i,tickLowerDetail:r,tickUpperDetail:s}=t,o=W$(this.math,{pool:n,position:e,tickLowerDetail:r,tickUpperDetail:s}),a=[...o],c=n.reward_infos.map(h=>this.coin.formatCoinType(h.fields.vault_coin_type)),l=await Promise.all([...n.reward_infos.map((h,f)=>this.coin.getMetadata(c[f]))]),u=await Promise.all(n.reward_infos.map((h,f)=>i(c[f])));l.forEach((h,f)=>{a[f]=this.math.scaleDown(a[f],h.decimals)});let d=new ne(0);return n.reward_infos.some((h,f)=>{const g=u[f];return g?(d=d.plus(new ne(g).mul(a[f])),!1):(d=d.plus(1),!0)}),{unclaimedRewards:d,collectRewards:o,scaledCollectRewards:a}}getObject(t){return this.getCacheOrSet("nft-object-"+t,async()=>{const e=await this.provider.getObject({id:t,options:{showContent:!0,showOwner:!0}});return Up(e,"nft"),e})}},Z$=class extends Ul{isSUI(t){return lt(t)==="0x000000000000000000000000000000000000000000000000000002::sui::sui"}async getMetadata(t){return this.getCacheOrSet(`coin-metadata-${t}`,async()=>{const e=await this.provider.getCoinMetadata({coinType:t});if(!e)throw new Error(`Coin "${t}" is not found`);return e})}async selectTradeCoins(t,e,n){if(n.eq(0))return[];const i=[],r=[];let s=new ne(0),o;do o=await this.provider.getCoins({owner:t,coinType:e,cursor:o==null?void 0:o.nextCursor}),i.push(...o.data);while(o.hasNextPage);i.sort((a,c)=>Number(c.balance)-Number(a.balance));for(const a of i)if(r.push(a.coinObjectId),s=s.add(a.balance),s.gte(n))break;return r}convertTradeCoins(t,e,n,i){return this.isSUI(n)?[t.splitCoins(t.gas,[t.pure(i.toNumber())])[0]]:e.map(r=>t.object(r))}zero(t,e){return e.moveCall({typeArguments:[t],target:"0x2::coin::zero",arguments:[]})}formatCoinType(t,e=!1){let i=t.replace(/^0x/i,"");return i=i.replace(/^0+(2::sui::SUI)$/,"$1"),"0x"+(e&&i.length<64&&t!=="2::sui:SUI"?"0".repeat(64-i.length):"")+i}},H$=60*1e3,Ru=100,Q$=class extends Ul{async swap(t){const{coinTypeA:e,coinTypeB:n,address:i,amountSpecifiedIsInput:r,slippage:s}=t,o=new ne(t.amountA),a=new ne(t.amountB),c=await this.contract.getConfig(),l=await Promise.all(t.routes.map(async p=>{const w=await this.pool.getPoolTypeArguments(p.pool),[_,k]=await Promise.all([this.coin.getMetadata(w[0]),this.coin.getMetadata(w[1])]);return{...p,coinA:_,coinB:k,typeArguments:w}})),u=await this.coin.selectTradeCoins(i,e,o),{functionName:d,typeArguments:h}=this.getFunctionNameAndTypeArguments(l.map(({typeArguments:p})=>p),e,n),f=l.map(({nextTickIndex:p,coinA:w,coinB:_,a2b:k})=>{const T=this.math.tickIndexToPrice(p,w.decimals,_.decimals);return this.sqrtPriceWithSlippage(T,s,k,w.decimals,_.decimals)}),g=t.txb||new X;return g.moveCall({target:`${c.PackageId}::swap_router::${d}`,typeArguments:h,arguments:[...l.map(({pool:p})=>g.object(p)),g.makeMoveVec({objects:this.coin.convertTradeCoins(g,u,e,o)}),g.pure((r?o:a).toFixed(0),"u64"),g.pure(this.amountOutWithSlippage(r?a:o,s,r),"u64"),...f.map(p=>g.pure(p,"u128")),g.pure(r,"bool"),g.pure(i,"address"),g.pure(Date.now()+H$*3,"u64"),g.object(is),g.object(c.Versioned)]}),g}async computeSwapResult(t){const{pools:e,amountSpecified:n,amountSpecifiedIsInput:i,address:r,tickStep:s}=t,o=await this.contract.getConfig(),a=e.map(d=>d.pool);let c=await al(this.provider,a,{showContent:!0});const l=new X;c.map(async d=>{const h=Vr(d),f=e.find(k=>k.pool===h.id.id),g=this.math.bitsToNumber(h.tick_current_index.fields.bits);let p=g-h.tick_spacing*(s||Ru),w=g+h.tick_spacing*(s||Ru);p=p<ju?ju:p,w=w>Du?Du:w;const _=this.pool.parsePoolType(rh(d));l.moveCall({target:`${o.PackageId}::pool_fetcher::compute_swap_result`,typeArguments:_,arguments:[l.object(h.id.id),l.pure(f.a2b,"bool"),l.pure(new ne(n).toFixed(0),"u128"),l.pure(i,"bool"),l.pure(this.math.tickIndexToSqrtPriceX64(f.a2b?p:w).toString(),"u128"),l.object(is),l.object(o.Versioned)]})});const u=await this.provider.devInspectTransactionBlock({transactionBlock:l,sender:r});if(u.error)throw new Error(u.error);return u.events.map(d=>d.parsedJson)}async computeSwapResultV2(t){const{pools:e,amountSpecifiedIsInput:n,address:i,tickStep:r}=t,s=await this.contract.getConfig(),o=e.map(u=>u.pool);let a=await al(this.provider,Array.from(new Set(o)),{showContent:!0});const c=new X;e.forEach(async u=>{const d=a.find(_=>Gh(_)===u.pool),h=Vr(d),f=this.math.bitsToNumber(h.tick_current_index.fields.bits);let g=f-h.tick_spacing*(r||Ru),p=f+h.tick_spacing*(r||Ru);g=g<ju?ju:g,p=p>Du?Du:p;const w=this.pool.parsePoolType(rh(d));c.moveCall({target:`${s.PackageId}::pool_fetcher::compute_swap_result`,typeArguments:w,arguments:[c.object(h.id.id),c.pure(u.a2b,"bool"),c.pure(new ne(u.amountSpecified).toFixed(0),"u128"),c.pure(n,"bool"),c.pure(this.math.tickIndexToSqrtPriceX64(u.a2b?g:p).toString(),"u128"),c.object(is),c.object(s.Versioned)]})});const l=await this.provider.devInspectTransactionBlock({transactionBlock:c,sender:i});if(l.error)throw new Error(l.error);return l.events.map(u=>u.parsedJson)}getFunctionNameAndTypeArguments(t,e,n){let i=[];const r=["swap"];if(t.length===1)i=t[0],e===i[0]?r.push("a","b"):r.push("b","a");else{const s=t[0],o=t[1];e===s[0]?(r.push("a","b"),i.push(s[0],s[2],s[1])):(r.push("b","a"),i.push(s[1],s[2],s[0])),i.push(o[2],n),n===o[0]?r.push("c","b"):r.push("b","c")}return{functionName:r.join("_"),typeArguments:i}}amountOutWithSlippage(t,e,n){if(n){const r=new ne(100).minus(e).div(100);return new ne(t).mul(r).toFixed(0)}const i=new ne(100).plus(e).div(100);return new ne(t).mul(i).toFixed(0)}sqrtPriceWithSlippage(t,e,n,i,r){const s=new ne(t).mul(n?new ne(100).minus(e).div(100):new ne(100).plus(e).div(100)),o=this.math.priceToSqrtPriceX64(s,i,r);return o.lt(new A.BN(Fp))?Fp:o.gt(new A.BN(Pp))?Pp:o.toString()}},no=class{constructor(t,e){this.network=t,Er(this,"pool"),Er(this,"contract"),Er(this,"math",new L$),Er(this,"account",new D$),Er(this,"coin"),Er(this,"nft"),Er(this,"trade"),Er(this,"provider"),this.provider=e?e instanceof zc?e:new zc(e):new zc({url:Xm(t==="mainnet"?"mainnet":"testnet")}),this.contract=new U$(this),this.pool=new $$(this),this.nft=new K$(this),this.coin=new Z$(this),this.trade=new Q$(this)}},G$=Object.defineProperty,Wk=(t,e)=>{for(var n in e)G$(t,n,{get:e[n],enumerable:!0})},vt=class{constructor(e){this.data=e}get application(){return"msafe-core"}serialize(){return JSON.stringify(iv(this.data))}},Y$={fullRpcUrl:"https://fullnode.mainnet.sui.io/",simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xc33c3e937e5aa2009cc0c3fdb3f345a0c3193d4ee663ffc601fe8b894fbc4ba6",version:4,config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b",admin_cap_id:"0x89c1a321291d15ddae5a086c9abc533dff697fde3d89e0ca836c41af73e36a75"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0xd43348b8879c1457f882b02555ba862f2bc87bcc31b16294ca14a82f608875d2",version:6},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count"},X$={launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xcec352932edc6663a118e8d64ed54da6b8107e8719603bf728f80717592cd9e8",version:3,config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},liquidity_stratefy:{package_id:"",published_at:"",version:void 0,config:void 0},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",version:1,config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd"}},limit_order:{package_id:"",published_at:"",version:1,config:{rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""}},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",version:1,config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{support_stakings:[{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",from_coin_type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",to_coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}]}}},J$={fullRpcUrl:"https://fullnode.testnet.sui.io/",simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x1c29d658882c40eeb39a8bb8fe58f71a216a918acb3e3eb3b47d24efd07257f2",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699",admin_cap_id:""}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xf1a5d0c5b0593e41d13f9684ca91365bdfe54a98836c1d33c90e361a031fac74",version:6},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count"},e7={launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x20d948d640edd0c749f533d41efc5f843f212d441220324ad7959c6e1d281828",published_at:"0x20d948d640edd0c749f533d41efc5f843f212d441220324ad7959c6e1d281828",config:{dividend_manager_id:"0x13b7facb704fae1d199ff0038b8acabc253415a77d142b39189dee97d457e442",dividend_admin_id:"0x5eb78463007422d4130b21f61c180bcd190819b7792f56e00a61df3b8fb928ef",dividend_settle_id:"0x495095e13a170ff494d242ae44ac2c7453011ca6c33cff27498010105e10e4b4"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},liquidity_stratefy:{package_id:"",published_at:"",version:void 0,config:void 0},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a"}},limit_order:{package_id:"",published_at:"",version:1,config:{rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""}},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",config:{support_stakings:[{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",from_coin_type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",to_coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}]}}},Tc=(t,e)=>{let n=t==="sui:mainnet"?Y$:J$,i=new qF(n);return i.senderAddress=e.address,i},yi=(t,e)=>{let n=Tc(t,e),i=t==="sui:mainnet"?X$:e7;return new sU(i,n)},t7=async(t,e,n)=>await Tc(n,e).Position.createAddLiquidityFixTokenPayload(t==null?void 0:t.parameter,t==null?void 0:t.gasEstimateArg),n7=async(t,e,n)=>await Tc(n,e).Position.createAddLiquidityFixTokenPayload(t==null?void 0:t.parameter,t==null?void 0:t.gasEstimateArg),i7=async(t,e,n)=>await Tc(n,e).Position.closePositionTransactionPayload(t),r7=async(t,e,n)=>await Tc(n,e).Position.removeLiquidityTransactionPayload(t),s7=async(t,e,n)=>await Tc(n,e).Rewarder.collectRewarderTransactionPayload(t),o7=class Kk extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","OpenAndAddLiquidity");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await t7(s,i,r)}static fromData(n){return new Kk(n)}},a7=class Zk extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","ClaimFeeAndMining");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await s7(s,i,r)}static fromData(n){return new Zk(n)}},c7=class Hk extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","DecreaseLiquidity");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await r7(s,i,r)}static fromData(n){return new Hk(n)}},l7=async(t,e,n)=>await yi(n,e).Farms.openPositionAddLiquidityStakePaylod(t),u7=async(t,e,n)=>await yi(n,e).Farms.addLiquidityFixCoinPayload(t),d7=async(t,e,n)=>await yi(n,e).Farms.removeLiquidityPayload(t),h7=async(t,e,n)=>await yi(n,e).Farms.removeLiquidityPayload(t),f7=async(t,e,n)=>await yi(n,e).Farms.claimFeeAndClmmReward(t),p7=async(t,e,n)=>{let i=yi(n,e);return console.log("getFarmingHarvest txbParams: ",t),await i.Farms.harvestPayload(t)},g7=async(t,e,n)=>{let i=yi(n,e),r=Object.values(t);return console.log("getFarmingBatchHarvest params: ",r),await i.Farms.batchHarvestPayload(r)},m7=async(t,e,n)=>await yi(n,e).Farms.depositPayload(t),w7=async(t,e,n)=>await yi(n,e).Farms.withdrawPayload(t),y7=class Qk extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingOpenAndAddLiquidity");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await l7(s,i,r)}static fromData(n){return new Qk(n)}},_7=class Gk extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingBatchHarvest");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await g7(s,i,r)}static fromData(n){return new Gk(n)}},b7=class Yk extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingClaimFeeAndReward");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await f7(s,i,r)}static fromData(n){return new Yk(n)}},v7=class Xk extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingDecreaseLiquidity");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await d7(s,i,r)}static fromData(n){return new Xk(n)}},k7=class Jk extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingHarvest");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await p7(s,i,r)}static fromData(n){return new Jk(n)}},S7=class eS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingIncreaseLiquidity");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await u7(s,i,r)}static fromData(n){return new eS(n)}},T7=class tS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingRemoveLiquidity");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await h7(s,i,r)}static fromData(n){return new tS(n)}},A7=class nS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingStake");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await m7(s,i,r)}static fromData(n){return new nS(n)}},C7=class iS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","FarmingUnstake");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await w7(s,i,r)}static fromData(n){return new iS(n)}},I7=class rS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","IncreaseLiquidity");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await n7(s,i,r)}static fromData(n){return new rS(n)}},E7=class sS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","RemoveLiquidity");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await i7(s,i,r)}static fromData(n){return new sS(n)}},x7=async(t,e,n)=>await yi(n,e).XCetusModule.convertPayload(t),M7=async(t,e,n)=>await yi(n,e).XCetusModule.redeemLockPayload(t),N7=async(t,e,n)=>await yi(n,e).XCetusModule.redeemDividendV2Payload(t.venft_id,t.bonus_types,t.xTokenType),O7=async(t,e,n)=>await yi(n,e).XCetusModule.cancelRedeemPayload(t),D7=async(t,e,n)=>await yi(n,e).XCetusModule.redeemPayload(t),j7=class oS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","xCETUSCancelRedeem");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await O7(s,i,r)}static fromData(n){return new oS(n)}},R7=class aS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","xCETUSClaimStakingRwewards");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await N7(s,i,r)}static fromData(n){return new aS(n)}},B7=class cS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","xCETUSConvert");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await x7(s,i,r)}static fromData(n){return new cS(n)}},P7=class lS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","xCETUSRedeem");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await D7(s,i,r)}static fromData(n){return new lS(n)}},F7=class uS extends vt{constructor(n){super(n);v(this,"txType",ut.Other);v(this,"txSubType","xCETUSRedeemLock");this.data=n}async build(n){let{account:i,network:r}=n,{txbParams:s}=this.data;return await M7(s,i,r)}static fromData(n){return new uS(n)}},U7=class{constructor(){v(this,"application","cetus")}async deserialize(t){console.log("Cetus helper deserialize input: ",t);let{txbParams:e,action:n}=t;return{txType:ut.Other,txSubType:n,intentionData:{txbParams:{...e},action:n}}}async build(t){let{suiClient:e,account:n,network:i}=t;console.log("helper build input: ",t),console.log("helper build input.intentionData: ",t.intentionData),console.log("helper build input.intentionData JSON: ",JSON.stringify(t.intentionData));let r;switch(t.txSubType){case"OpenAndAddLiquidity":r=o7.fromData(t.intentionData);break;case"IncreaseLiquidity":r=I7.fromData(t.intentionData);break;case"DecreaseLiquidity":r=c7.fromData(t.intentionData);break;case"RemoveLiquidity":r=E7.fromData(t.intentionData);break;case"ClaimFeeAndMining":r=a7.fromData(t.intentionData);break;case"FarmingOpenAndAddLiquidity":r=y7.fromData(t.intentionData);break;case"FarmingIncreaseLiquidity":r=S7.fromData(t.intentionData);break;case"FarmingDecreaseLiquidity":r=v7.fromData(t.intentionData);break;case"FarmingRemoveLiquidity":r=T7.fromData(t.intentionData);break;case"FarmingClaimFeeAndReward":r=b7.fromData(t.intentionData);break;case"FarmingHarvest":r=k7.fromData(t.intentionData);break;case"FarmingBatchHarvest":r=_7.fromData(t.intentionData);break;case"FarmingStake":r=A7.fromData(t.intentionData);break;case"FarmingUnstake":r=C7.fromData(t.intentionData);break;case"xCETUSConvert":r=B7.fromData(t.intentionData);break;case"xCETUSRedeemLock":r=F7.fromData(t.intentionData);break;case"xCETUSClaimStakingRwewards":r=R7.fromData(t.intentionData);break;case"xCETUSCancelRedeem":r=j7.fromData(t.intentionData);break;case"xCETUSRedeem":r=P7.fromData(t.intentionData);break;default:throw new Error("not implemented")}return console.log("helper build intention: ",r),console.log("helper build account: ",n),console.log("helper build network: ",i),r.build({suiClient:e,account:n,network:i})}},dS={};Wk(dS,{contractId:()=>pS,default:()=>L7,feeObjId:()=>wS,roleObjId:()=>gS,status:()=>fS,transaction:()=>hS,upgradeCapObjId:()=>yS,vaultObjId:()=>mS});var hS="DiBZq4UmVVYiRL6ZJmFKYoHcxtxqrhsCXSkFyT7wUr3j",fS="success",pS="0x81c960dc653975fbd0072deca8afb92d322898c911622898ba1b2e3ad0c4bd8d",gS="0xc6ec0bdee0bb59a72077e9acd2f42457043cf47080b3d3fad4d39abf28bba63a",mS="0xbc4021387fbac149119fd24e92be9e58f745774292f3a2a12e2ac6daf5363e1d",wS="0x4178f63970fe2daeb256dc5730ad172e82b3e8eb45f31b33e0daae72cd35e1e1",yS="0xe1e9aa7d222d151bfe6dd83358b0d7fdcb11260f710800cfaf7ccc1b1e245115",L7={transaction:hS,status:fS,contractId:pS,roleObjId:gS,vaultObjId:mS,feeObjId:wS,upgradeCapObjId:yS},_S={};Wk(_S,{contractId:()=>kS,default:()=>$7,feeObjId:()=>AS,roleObjId:()=>SS,status:()=>vS,transaction:()=>bS,upgradeCapObjId:()=>CS,vaultObjId:()=>TS});var bS="855FNDV8o8Z3fWULPnQo9qdhLJpsg7wZrkCpNyfw9KfB",vS="success",kS="0xc357c3985e8fb875d6b37141497af660779aa1bab0ec489b2213efd74067d1fa",SS="0x5ab49bdf9fd1413e328ef242b3f8d83dde791b38a0b627bfc87fb25c010d34f1",TS="0xb483558770d8eb26007f193b75db40f0a45f2e36863a687625885d4de6993378",AS="0x48453fc4d7cde3fe35aad89e5dfb496608a6a55ea529a1c0274681a808627f94",CS="0x34279779a0d0d36bd5044b04830d607fa1b0ecf316548c8ac3a44151e4f1a42a",$7={transaction:bS,status:vS,contractId:kS,roleObjId:SS,vaultObjId:TS,feeObjId:AS,upgradeCapObjId:CS},z7="https://sui-testnet.blockvision.org/v1/2Sgk89ivT64MnKdcGzjmyjY2ndD",q7="https://sui-testnet.blockvision.org/v1/2Sgk89ivT64MnKdcGzjmyjY2ndD",V7="https://sui-mainnet.blockvision.org/v1/2Sgk7NPvqkd7mESYkxF01yX15l7",W7="https://sui-mainnet.blockvision.org/v1/2Sgk7NPvqkd7mESYkxF01yX15l7",K7="https://bc3p6l5unl.execute-api.us-west-1.amazonaws.com/prod",Z7="https://rolsbkota7.execute-api.us-west-1.amazonaws.com/prod",H7="https://6p6mkx33ne.execute-api.us-west-1.amazonaws.com/prod",Q7="https://xrae3mrjv5.execute-api.us-west-1.amazonaws.com/prod",i0=dS,r0=_S,G7=new Map([["dev",{env:"dev",rpc:{url:z7},backend:{url:K7},contract:i0}],["stg",{env:"stg",rpc:{url:q7},backend:{url:Z7},contract:i0}],["prev",{env:"prev",rpc:{url:V7},backend:{url:H7},contract:r0}],["prod",{env:"prod",rpc:{url:W7},backend:{url:Q7},contract:r0}]]);function Y7(t,e){let n=G7.get(t);if(!n)throw new Error(`Env not supported: ${t}`);return e&&e.rpc&&(n.rpc=e.rpc),e&&e.backend&&(n.backend=e.backend),e&&e.contract&&(n.contract=e.contract),n}var ji=class extends Error{constructor(e,n,i={}){var t=(...args)=>{super(...args);v(this,"mpayErrorCode");v(this,"context")};let{cause:r,context:s}=i;t(r?`[MPay] ${n}: ${r}`:`[MPay] ${n}`),this.mpayErrorCode=e,this.context=s}},X7=class extends ji{constructor(){super(11,"Backend is not specified")}},J7=class extends ji{constructor(){super(1,"Wallet not connected")}},Rf=class extends ji{constructor(t,e){super(10,t,{context:e})}},ez=class Ao{constructor(e){this.apiURL=e}static parseResponseData(e){var n;if(e instanceof TL)throw new Rf((n=e.response)==null?void 0:n.statusText);if(e.status===200){if(e.data.success)return e.data.data;throw new Rf(e.data.code)}throw new Rf(e.status.toString())}async getIncomingStreams(e,n){let i=await To.post(`${this.apiURL}/stream`,{recipient:e,...n});return Ao.parseResponseData(i)}async getOutgoingStreams(e,n){let i=await To.post(`${this.apiURL}/stream`,{sender:e,...n});return Ao.parseResponseData(i)}async getStreamHistory(e){let n=await To.post(`${this.apiURL}/stream-events`,e),i=Ao.parseResponseData(n);return i.data.forEach(r=>{let s=r;return s.data.type==="create_stream"?s.data.balance=BigInt(s.data.balance):s.data.type==="cancel_stream"?s.data.withdrawAmount=BigInt(s.data.withdrawAmount):s.data.type==="claim"||s.data.type==="auto_claim"?s.data.claimAmount=BigInt(s.data.claimAmount):s.data.type==="set_auto_claim"&&(s.data.enabled=!!s.data.enabled),s.createdAt=new Date(s.createdAt),s}),i}async getAllCoinTypes(e){let n=await To.post(`${this.apiURL}/stream-info`,{address:e});return Ao.parseResponseData(n)}async getAllRecipients(e,n){let i=await To.post(`${this.apiURL}/stream-info`,{sender:e,status:n});return Ao.parseResponseData(i)}async getAllSenders(e,n){let i=await To.post(`${this.apiURL}/stream-info`,{recipient:e,status:n});return Ao.parseResponseData(i)}},IS=class ES{constructor(e){v(this,"signer");v(this,"suiClient");v(this,"envConfig");v(this,"_backend");this.envConfig=e,this.suiClient=new zc({url:e.rpc.url}),e.backend&&(this._backend=new ez(e.backend.url))}static new(e,n){let i=Y7(e,n);return new ES(i)}get walletType(){return this.wallet?this.wallet.type:"disconnected"}get backend(){if(!this._backend)throw new X7;return this._backend}set backend(e){this._backend=e}connectWallet(e){this.signer=e}disconnect(){this.signer=void 0}get wallet(){if(!this.signer)throw new J7;return this.signer}async walletAddress(){return this.wallet.address()}},s0=50n,Bf=10000n,tz=25n,o0=100000000n,yo=class{constructor(t){this.object=t}moveArg(t){return t.object(this.object)}},a0=class{constructor(t){this.objects=t}moveArgs(t){return t.makeMoveVec({objects:this.objects.map(e=>t.object(e))})}},sh=class xS{constructor(e){return this.result=e,new Proxy(this,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(n,i){if(i in n)return Reflect.get(n,i);let r=o=>new xS(n.result[o]);if(i===Symbol.iterator)return function*(){let o=0;for(;;)yield r(o),o++};if(typeof i=="symbol")return;let s=parseInt(i,10);if(!(Number.isNaN(s)||s<0))return r(s)}})}moveArg(){return this.result}},c0=class extends ji{constructor(t,e){super(3,t,{context:e})}},nz=class{constructor(t){this.results=t}callResult(t){return this.results.results[t]}returnValue(t,e){return t.returnValues[e]}getValue(t=0,e=0){let n=this.callResult(t);return this.returnValue(n,e)}getAddress(t=0,e=0){let[n,i]=this.getValue(t,e);if(i!=="address")throw new c0("Invalid contract return type.",{ctx:{expectType:"address",gotType:i}});return lt(Je.Buffer.from(n).toString("hex"))}getU64(t=0,e=0){let[n,i]=this.getValue(t,e);if(i!=="u64")throw new c0("Invalid contract return type.",{ctx:{expectType:"u64",gotType:i}});return Je.Buffer.from(n).readBigInt64LE()}},Ei=class extends ji{constructor(t,e,n){super(2,`Invalid input: ${t}`,{context:{fieldKey:e,fieldValue:n}})}},MS={groupId:"string",name:"string"},iz=64;function rz(t){return NS(t),li.ser(MS,t).toString("base64")}function Lp(t){let e=li.de(MS,t,"base64");return NS(e),e}function NS(t){if(!l0(t.name))throw new Ei("Invalid metadata: Name contains unknown character");if(!l0(t.groupId))throw new Ei("Invalid metadata: Group ID contains unknown character");if(t.name.length>iz)throw new Ei("Invalid metadata: Name exceed max length 64")}function l0(t){return/^[\x00-\x7F]+$/.test(t)}function OS(t,e){return mn(t)===mn(e)}function Ia(t,e){return mn(t)===mn(e)}var DS="txn.gas";function sz(){return AL()}var $p=class jS{constructor(e,n,i){this.globals=e,this.feeContract=n,this.streamContract=i}static convertCreateStreamInfoToInternal(e){return{metadata:rz({name:e.name,groupId:sz()}),coinType:mn(e.coinType),recipients:e.recipients.map(n=>({address:n.address,cliffAmount:n.cliffAmount,amountPerEpoch:n.amountPerStep})),epochInterval:e.interval,numberEpoch:e.steps,startTime:e.startTimeMs,cancelable:e.cancelable}}async buildCreateStreamTransactionBlock(e){let n=new X,i=this.calculateFeesInternal(e),r=this.getCreateStreamCoinRequests(e,i),s=await this.wallet.requestCoins(r),o=await this.addMergeCoins(n,s[0]),a;r.length>1?a=await this.addMergeCoins(n,s[1]):a=o;for(let c=0;c<e.recipients.length;c++){let l=e.recipients[c],u=this.amountForRecipient(l,e.numberEpoch),d=this.getStreamFeeLocal(u),[h]=n.splitCoins(o,[n.pure(u+d,"u64")]),[f]=n.splitCoins(a,[n.pure(this.flatSuiFee,"u64")]);this.streamContract.createStream(n,{paymentCoin:new sh(h),flatFeeCoin:new sh(f),metadata:e.metadata,recipient:l.address,timeStart:e.startTime,cliff:l.cliffAmount,epochInterval:e.epochInterval,numEpoch:e.numberEpoch,amountPerEpoch:l.amountPerEpoch,cancelable:e.cancelable,coinType:e.coinType})}return n}calculateCreateStreamFees(e){let n=jS.convertCreateStreamInfoToInternal(e);return this.calculateFeesInternal(n)}feeParams(){return{createFeePercent:{numerator:s0,denominator:Bf},claimFeePercent:{numerator:tz,denominator:Bf},flatFeePerStream:o0}}async addMergeCoins(e,n){let i;return n.mergedCoins&&n.mergedCoins.length?(e.mergeCoins(e.object(n.primaryCoin),n.mergedCoins.map(r=>e.object(r))),i=e.object(n.primaryCoin)):n.primaryCoin===DS?i=e.gas:i=e.object(n.primaryCoin),i}getCreateStreamCoinRequests(e,n){let i=e.coinType;return OS(i,yd)?[{coinType:i,amount:n.totalAmount+n.streamFeeAmount+n.flatFeeAmount}]:[{coinType:i,amount:n.totalAmount+n.streamFeeAmount},{coinType:yd,amount:n.flatFeeAmount}]}calculateFeesInternal(e){let n=e.recipients.reduce((i,r)=>{let s=this.amountForRecipient(r,e.numberEpoch),o=this.getStreamFeeLocal(s);return{totalAmount:i.totalAmount+s,streamFeeAmount:i.streamFeeAmount+o}},{totalAmount:0n,streamFeeAmount:0n});return{flatFeeAmount:BigInt(e.recipients.length)*this.flatSuiFee,...n}}amountForRecipient(e,n){return BigInt(e.amountPerEpoch)*BigInt(n)+BigInt(e.cliffAmount)}get flatSuiFee(){return o0}getStreamFeeLocal(e){return e*s0/Bf}async getStreamFeeRemote(e){let n=this.feeContract.streamingFee(new X,e),i=await this.globals.suiClient.devInspectTransactionBlock({sender:await this.globals.walletAddress(),transactionBlock:n});return new nz(i).getU64()}get wallet(){return this.globals.wallet}},oz="0x0000000000000000000000000000000000000000000000000000000000000006",RS=class{constructor(t,e,n){this.moduleName=t,this.config=e,this.globals=n}addContractCall(t,e){let n=`${this.config.contractId}::${this.moduleName}::${e.method}`;return t.add(Qm.MoveCall({target:n,arguments:e.arguments.map(i=>i instanceof a0?i.moveArgs(t):i instanceof yo?i.moveArg(t):i instanceof sh?i.moveArg():t.pure(i)),typeArguments:e.typeArgs})),t}addTransactionBlock(t,e,n=[],i=[]){t.add(Qm.MoveCall({target:e,arguments:n.map(r=>r instanceof a0?r.moveArgs(t):r instanceof yo?r.moveArg(t):r instanceof sh?r.moveArg():t.pure(r)),typeArguments:i}))}makeObject(t){return typeof t=="string"?new yo(t):t}vaultObject(){return new yo(this.config.vaultObjId)}roleObject(){return new yo(this.config.roleObjId)}feeObject(){return new yo(this.config.feeObjId)}clockObject(){return new yo(oz)}},Ci,BS=(Ci=class extends RS{constructor(e,n){super(Ci.ModuleName,e,n),this.config=e,this.globals=n}setStreamingFee(e,n){let i=this.roleObject(),r=this.feeObject();return this.addContractCall(e,{method:Ci.MethodName.set_streaming_fee,arguments:[i,r,n],typeArgs:[]})}setStreamingFlatFee(e,n){let i=this.roleObject(),r=this.feeObject();return this.addContractCall(e,{method:Ci.MethodName.set_streaming_flat_fee,arguments:[i,r,n],typeArgs:[]})}setClaimFee(e,n){let i=this.roleObject(),r=this.feeObject();return this.addContractCall(e,{method:Ci.MethodName.set_claim_fee,arguments:[i,r,n],typeArgs:[]})}streamingFee(e,n){let i=this.feeObject();return this.addContractCall(e,{method:Ci.MethodName.streaming_fee,arguments:[i,n],typeArgs:[]})}claimFee(e,n){return this.addContractCall(e,{method:Ci.MethodName.claim_fee,arguments:[this.feeObject(),n],typeArgs:[]})}feeDenominator(e){return this.addContractCall(e,{method:Ci.MethodName.fee_denominator,arguments:[this.feeObject()],typeArgs:[]})}},v(Ci,"ModuleName","fee_module"),v(Ci,"MethodName",{set_streaming_fee:"set_streaming_fee",set_claim_fee:"set_claim_fee",set_streaming_flat_fee:"set_streaming_flat_fee",streaming_flat_fee:"streaming_flat_fee",streaming_fee:"streaming_fee",claim_fee:"claim_fee",fee_denominator:"fee_denominator"}),Ci),Yt,Yh=(Yt=class extends RS{constructor(e,n){super(Yt.ModuleName,e,n),this.config=e,this.globals=n}createStream(e,n){let i=this.feeObject(),r=this.vaultObject(),s=this.makeObject(n.paymentCoin),o=this.makeObject(n.flatFeeCoin),a=this.clockObject();return this.addContractCall(e,{method:Yt.MethodName.create_stream,arguments:[i,r,s,o,n.metadata,n.recipient,n.timeStart,n.cliff,n.epochInterval,n.numEpoch,n.amountPerEpoch,n.cancelable,a],typeArgs:[n.coinType]})}setAutoClaim(e,n){let i=this.makeObject(n.streamId);return this.addContractCall(e,{method:Yt.MethodName.set_auto_claim,arguments:[i,n.enabled],typeArgs:[n.coinType]})}cancelStream(e,n){let i=this.makeObject(n.streamId),r=this.clockObject();return this.addContractCall(e,{method:Yt.MethodName.cancel_stream,arguments:[i,r],typeArgs:[n.coinType]})}claimStream(e,n){let i=this.makeObject(n.streamId),r=this.clockObject();return this.addContractCall(e,{method:Yt.MethodName.claim_stream,arguments:[i,r],typeArgs:[n.coinType]})}claimStreamByProxy(e,n){let i=this.makeObject(n.streamId),r=this.vaultObject(),s=this.feeObject(),o=this.clockObject();return this.addContractCall(e,{method:Yt.MethodName.claim_stream_by_proxy,arguments:[i,r,s,o],typeArgs:[n.coinType]})}get createStreamTarget(){return`${this.config.contractId}::${Yt.ModuleName}::${Yt.MethodName.create_stream}`}get setAutoClaimTarget(){return`${this.config.contractId}::${Yt.ModuleName}::${Yt.MethodName.set_auto_claim}`}get cancelStreamTarget(){return`${this.config.contractId}::${Yt.ModuleName}::${Yt.MethodName.cancel_stream}`}get claimStreamTarget(){return`${this.config.contractId}::${Yt.ModuleName}::${Yt.MethodName.claim_stream}`}get claimStreamByProxyTarget(){return`${this.config.contractId}::${Yt.ModuleName}::${Yt.MethodName.claim_stream_by_proxy}`}},v(Yt,"ModuleName","stream"),v(Yt,"MethodName",{create_stream:"create_stream",set_auto_claim:"set_auto_claim",cancel_stream:"cancel_stream",claim_stream:"claim_stream",claim_stream_by_proxy:"claim_stream_by_proxy",stream_current_epoch:"stream_current_epoch",now_milli_seconds:"now_milli_seconds"}),Yt),PS=class{constructor(t){v(this,"feeContract");v(this,"streamContract");this.globals=t;let e=t.envConfig.contract;this.feeContract=new BS(e,t),this.streamContract=new Yh(e,t)}async createStreams(t){let e=$p.convertCreateStreamInfoToInternal(t);return this.createStreamHelper().buildCreateStreamTransactionBlock(e)}createStreamHelper(){return new $p(this.globals,this.feeContract,this.streamContract)}setAutoClaim(t,e,n){let i=new X;return this.streamContract.setAutoClaim(i,{streamId:t,enabled:e,coinType:n})}claimStream(t,e){let n=new X;return this.streamContract.claimStream(n,{streamId:t,coinType:e})}claimStreamByProxy(t,e){let n=new X;return this.streamContract.claimStreamByProxy(n,{streamId:t,coinType:e})}cancelStream(t,e){let n=new X;return this.streamContract.cancelStream(n,{streamId:t,coinType:e}),n}},wr=class extends ji{constructor(t,e={}){super(0,t,e)}};async function az(t){let e=[];for(;await t.hasNext();){let n=await t.next();e.push(n)}return e&&Array.isArray(e[0])?e.flat(1):e}var cz=class{constructor(t){v(this,"curPage");v(this,"init");this.requester=t,this.curPage=void 0,this.init=!0}async hasNext(){var t;if(this.init)return this.curPage||(this.curPage=await this.requester.doNextRequest()),!!((t=this.curPage.data)!=null&&t.length)||this.curPage.hasNext;if(!this.curPage)throw new Error("invalid implementation of iterator");return this.curPage.hasNext}async next(){return this.init?(this.init=!1,this.curPage||(this.curPage=await this.requester.doNextRequest()),this.curPage.data):(this.curPage=await this.requester.doNextRequest(),this.curPage.data)}},FS=class{constructor(t){v(this,"cursor");v(this,"pager");v(this,"curData");this.requester=t,this.pager=new cz(t),this.curData=[],this.cursor=0}async hasNext(){return this.cursor<this.curData.length-1?!0:this.pager.hasNext()}async next(){for(this.cursor+=1;this.cursor>=this.curData.length;)if(await this.pager.hasNext())this.curData=await this.pager.next(),this.cursor=0;else throw new Error("not more data");return this.curData[this.cursor]}},lz=class extends ji{constructor(t,e,n){super(4,`Not enough balance: ${t}`,{context:{coinType:t,requestAmount:e,gotAmount:n}}),this.coinType=t,this.requestAmount=e,this.gotAmount=n}},uz=25;async function dz(t,e,n,i="0x2::sui::SUI",r=uz){let s=new hz(t,e,i,r),o=BigInt(0),a=[];for(;await s.hasNext()&&o<n;){let c=await s.next();c&&(a.push(c),o+=BigInt(c.balance))}if(o<n)throw new lz(i,n,o);return a}var hz=class extends FS{constructor(t,e,n,i){super(new fz(t,e,n,i)),this.suiClient=t,this.owner=e,this.coinType=n,this.reqPageSize=i}},fz=class{constructor(t,e,n,i){v(this,"nextCursor");if(this.suiClient=t,this.owner=e,this.coinType=n,this.reqPageSize=i,i<=0)throw new wr("Invalid reqPageSize")}async doNextRequest(){let t=await this.suiClient.getCoins({owner:this.owner,coinType:this.coinType,cursor:this.nextCursor,limit:this.reqPageSize});return this.nextCursor=t.nextCursor,{data:t.data,hasNext:t.hasNextPage}}},pz=class extends ji{constructor(){super(7,"Connected wallet is not creator")}},u0=class extends ji{constructor(){super(8,"Connected wallet is not recipient")}},d0=class extends ji{constructor(t,e){super(6,t,{context:e})}},gz=class extends ji{constructor(t){super(5,"Stream not found",{context:{streamId:t}})}},mz=(1n<<64n)-1n,oh=1e3;function h0(t){let e;typeof t=="number"?e=t:typeof t=="bigint"?e=Number(t):e=t.toMillis();let n=Math.round(e/oh);return rt.fromMillis(n*oh)}function f0(t){let e;typeof t=="number"?e=t:typeof t=="bigint"?e=Number(t):e=t.toMillis();let n=Math.round(e/oh);return gt.fromMillis(n*oh)}var Wm=class Rs{constructor(e,n,i){v(this,"streamContract");v(this,"type","Stream");this.globals=e,this.streamId=n,this.rawData=i,this.streamContract=new Yh(e.envConfig.contract,e)}static async new(e,n){let i=await Rs.fetchStreamData(e,n);return new Rs(e,n,i)}static fromObjectData(e,n,i){let r=Rs.parseRawStreamData(n,i);return new Rs(e,n,r)}get info(){return{name:this.name,creator:this.creator,coinType:this.coinType,totalAmount:this.totalAmount,start:this.timeStart,end:this.timeEnd,cancelable:this.cancelable,cliffAmount:this.cliff,duration:this.duration,interval:this.interval,steps:this.totalSteps,nextReleaseDate:this.nextReleaseDate,nextReleaseAmount:this.nextReleaseAmount,groupId:this.groupId,streamId:this.streamId,recipient:this.recipient,progress:this.progress,autoClaim:this.autoClaim}}get groupCommonInfo(){return{name:this.name,groupId:this.groupId,creator:this.creator,start:this.timeStart,interval:this.interval,steps:this.totalSteps,cancelable:this.cancelable}}async refresh(){this.rawData=await Rs.fetchStreamData(this.globals,this.streamId)}refreshWithData(e){var n;if(((n=e.data)==null?void 0:n.objectId)!==this.streamId)throw new wr("Object Id does not align");this.rawData=Rs.parseRawStreamData(this.streamId,e)}async historyEvents(e){return this.globals.backend.getStreamHistory({streamId:this.streamId,pagination:e})}async cancel(){if(await this.globals.walletAddress()!==this.creator)throw new pz;let e=new X;return this.streamContract.cancelStream(e,{streamId:this.streamId,coinType:this.coinType}),e}async claim(){if(await this.globals.walletAddress()!==this.recipient)throw new u0;let e=new X;return this.streamContract.claimStream(e,{streamId:this.streamId,coinType:this.coinType}),e}async setAutoClaim(e){if(await this.globals.walletAddress()!==this.recipient)throw new u0;let n=new X;return this.streamContract.setAutoClaim(n,{streamId:this.streamId,coinType:this.coinType,enabled:e}),n}async claimByProxy(){let e=new X;return this.streamContract.claimStreamByProxy(e,{streamId:this.streamId,coinType:this.coinType}),e}get wallet(){return this.globals.wallet}get client(){return this.globals.suiClient}get coinType(){return mn(this.rawData.coinType)}get progress(){return{status:this.streamStatus,total:this.totalAmount,streamed:this.streamedAmount,claimed:this.claimedAmount,claimable:this.claimable,canceled:this.canceledAmount}}get balance(){return this.rawData.balance}get autoClaim(){return this.rawData.autoClaim}get amountPerEpoch(){return this.rawData.config.amountPerEpoch}get cancelable(){return this.rawData.config.cancelable}get cliff(){return this.rawData.config.cliff}get creator(){return this.rawData.config.creator}get interval(){return f0(this.rawData.config.epochInterval)}get groupId(){let{metadata:e}=this.rawData.config;return Lp(e).groupId}get name(){let{metadata:e}=this.rawData.config;return Lp(e).name}get recipient(){return this.rawData.config.recipient}get timeStart(){return h0(this.rawData.config.timeStart)}get duration(){let e=this.rawData.config,n=e.epochInterval*e.totalEpoch;return f0(n)}get timeEnd(){return this.timeStart.plus(this.duration)}get totalSteps(){return this.rawData.config.totalEpoch}get claimable(){return this.streamedAmount-this.claimedAmount}get nextReleaseDate(){return this.currentEpoch===-1n?this.timeStart:this.currentEpoch>=this.totalSteps||this.isCanceled?null:h0((this.currentEpoch+1n)*this.rawData.config.epochInterval+this.rawData.config.timeStart)}get nextReleaseAmount(){return this.currentEpoch===-1n?this.cliff:this.currentEpoch>=this.totalSteps||this.isCanceled?null:this.amountPerEpoch}get streamStatus(){let e=this.rawData.status.status;return e===16?"CANCELED":e===17?"SETTLED":e===1?"COMPLETED":this.currentEpoch>=this.totalSteps?"STREAMED":"STREAMING"}get streamedAmount(){return this.currentEpoch===-1n?0n:this.isCanceled?this.rawData.status.epochCanceled*this.amountPerEpoch+this.cliff:this.currentEpoch*this.amountPerEpoch+this.cliff}get claimedAmount(){return this.rawData.status.epochClaimed===mz?0n:this.rawData.status.epochClaimed*this.amountPerEpoch+this.cliff}get currentEpoch(){let e=rt.now().toMillis(),n=this.timeStart.toMillis();if(e<n)return-1n;let i=Math.floor((e-n)/Number(this.rawData.config.epochInterval));return BigInt(i)>Number(this.rawData.config.totalEpoch)?this.rawData.config.totalEpoch:BigInt(i)}get totalAmount(){let e=this.rawData.config;return e.amountPerEpoch*e.totalEpoch+e.cliff}get isCanceled(){let e=this.rawData.status.status;return e===16||e===17}get canceledAmount(){return this.isCanceled?this.totalAmount-this.streamedAmount:0n}static async fetchStreamData(e,n){let i=await e.suiClient.getObject({id:n,options:{showContent:!0,showType:!0}});return Rs.parseRawStreamData(n,i)}static parseRawStreamData(e,n){if(n.error)throw n.error.code==="notExists"?new gz(e):new d0(`get stream data: ${n.error.code}`,{streamId:e,...n.error});let i=n.data.content;if(i.dataType!=="moveObject")throw new d0("Unexpected object type",{gotType:i.dataType});let{typeParams:r}=R2(i.type),s=mn(r[0]),o=i.fields,a=o.config.fields,c=o.status.fields;return{coinType:s,autoClaim:o.auto_claim,balance:BigInt(o.balance.fields.balance),config:{amountPerEpoch:BigInt(a.amount_per_epoch),cancelable:a.cancelable,cliff:BigInt(a.cliff),creator:a.creator,epochInterval:BigInt(a.epoch_interval),metadata:a.metadata,recipient:a.recipient,timeStart:BigInt(a.time_start),totalEpoch:BigInt(a.total_epoch)},status:{status:c.status,epochCanceled:BigInt(c.epoch_canceled),epochClaimed:BigInt(c.epoch_claimed)}}}},wz=class extends ji{constructor(t,e){super(12,`Transaction failed: ${e}`,{context:{status:t,msg:e}})}},yz=1e3,_z=class{constructor(t){v(this,"coinMetaHelper");v(this,"createStreamHelper");this.globals=t,this.coinMetaHelper=new bz(t.suiClient),this.createStreamHelper=new PS(t).createStreamHelper()}getStreamIdsFromCreateStreamResponse(t){var e,n,i;if(((e=t.effects)==null?void 0:e.status.status)!=="success")throw new wz((n=t.effects)==null?void 0:n.status.status,(i=t.effects)==null?void 0:i.status.error);return t.objectChanges.filter(r=>r.type==="created"&&r.objectType.startsWith(`${this.globals.envConfig.contract.contractId}::stream::Stream`)).map(r=>r.objectId)}calculateCreateStreamFees(t){return this.createStreamHelper.calculateCreateStreamFees(t)}feeParams(){return this.createStreamHelper.feeParams()}calculateStreamAmount(t){if(t.steps===0n)throw new Ei("Invalid stream steps: 0");let e=t.cliff?t.cliff:{numerator:0n,denominator:100n},n=t.totalAmount*e.numerator/e.denominator,i=(t.totalAmount-n)/t.steps,r={realTotalAmount:i*t.steps+n,cliffAmount:n,amountPerStep:i};return this.validateStreamAmount(r,t.totalAmount),r}calculateTimelineByInterval(t){if(t.steps===0n)throw new Ei("Invalid stream steps: 0");let e=t.timeStart.plus(t.interval.toMillis()*Number(t.steps)),n={timeStart:t.timeStart,timeEnd:e,interval:t.interval,steps:t.steps};return this.validateTimeline(n),n}calculateTimelineByTotalDuration(t){if(t.steps===0n)throw new Ei("Invalid stream steps: 0");let e=BigInt(t.total.toMillis())/t.steps,n=t.timeStart.plus(gt.fromMillis(Number(e*t.steps))),i={timeStart:t.timeStart,timeEnd:n,interval:gt.fromMillis(Number(e)),steps:t.steps};return this.validateTimeline(i),i}async getBalance(t,e){let n=await this.globals.suiClient.getBalance({owner:t,coinType:e}),i=await this.getCoinMeta(e);return{...n,coinType:mn(n.coinType),coinMeta:i}}async getAllBalance(t){let e=await this.globals.suiClient.getAllBalances({owner:t}),n=await Promise.all(e.map(i=>this.getCoinMeta(i.coinType)));return e.map((i,r)=>({...i,coinType:mn(i.coinType),coinMeta:n[r]}))}async getCoinMeta(t){return this.coinMetaHelper.getCoinMeta(t)}async simulateTransactionBlock(t){return this.globals.suiClient.devInspectTransactionBlock({transactionBlock:t,sender:await this.globals.wallet.address()})}validateStreamAmount(t,e){if(t.amountPerStep===0n)throw new Ei("Stream amount too small","totalAmount",e);if(t.cliffAmount>t.realTotalAmount)throw new Ei("Invalid cliff settings")}validateTimeline(t){if(t.interval.toMillis()<yz)throw new Ei("Interval shall be at least 1 second","interval",t.interval)}},bz=class{constructor(t){v(this,"coinMetaReg");this.suiClient=t,this.coinMetaReg=new Map}async getCoinMeta(t){let e=mn(t||yd);if(this.coinMetaReg.has(e))return this.coinMetaReg.get(e);let n=await this.queryCoinMeta(e);return n&&this.coinMetaReg.set(e,n),n}async queryCoinMeta(t){return await this.suiClient.getCoinMetadata({coinType:t})||void 0}},Pf=class extends ji{constructor(t,e){super(9,`Invalid stream group: ${t}`,{context:e})}},vz=25;async function p0(t,e,n){let i=new US(e),r=new LS(t,i,n);return await az(r)}var US=class{constructor(t){v(this,"cursor");this.ids=t,this.cursor=-1}async hasNext(){return this.cursor<this.ids.length-1}async next(){if(this.cursor+=1,this.cursor>=this.ids.length)throw new Error("invalid iterator implementation");return this.ids[this.cursor]}},LS=class extends FS{constructor(t,e,n){super(new kz(t,e,n)),this.suiClient=t,this.idIter=e,this.options=n}},kz=class{constructor(t,e,n){v(this,"filter");v(this,"pageSize");v(this,"objectOptions");this.suiClient=t,this.stringIter=e,this.options=n,this.filter=n==null?void 0:n.filter,this.pageSize=(n==null?void 0:n.pageSize)||vz,this.objectOptions=(n==null?void 0:n.objectOptions)||{showType:!0,showContent:!0}}async doNextRequest(){let t=[];for(;t.length<this.pageSize&&await this.stringIter.hasNext();){let i=await this.stringIter.next();i&&t.push(i)}let e=await this.suiClient.multiGetObjects({ids:t,options:this.objectOptions}),n;if(this.filter){let{filter:i}=this;n=e.filter(r=>i==null?void 0:i(r))}else n=e;return{data:n,hasNext:await this.stringIter.hasNext()}}},Sz=class dd{constructor(e,n){v(this,"type","StreamGroup");if(this.globals=e,this.streams=n,n.length===0)throw new Pf("stream size 0");let i=n.map(r=>r.groupId);if(new Set(i).size!==1)throw new Ei("Stream does not have same group ID")}static async new(e,n){let i=await p0(e.suiClient,n);return i.forEach(r=>{if(!r)throw new wr("stream group object data undefined")}),dd.newFromObjectResponse(e,n,i)}static async newFromObjectResponse(e,n,i){let r=await dd.parseGroupStreams(e,n,i);return new dd(e,r)}static checkStreamGroup(e){let n=e.map(s=>s.groupCommonInfo),i=n[0],r=!0;return n.forEach(s=>{Tz(i,s)||(r=!1)}),r}async refresh(){let e=await p0(this.globals.suiClient,this.streams.map(n=>n.streamId));this.streams.forEach((n,i)=>{n.refreshWithData(e[i])})}get groupId(){return this.streams[0].groupId}get creator(){return this.streams[0].creator}get info(){return{groupId:this.groupId,streamIds:this.streams.map(e=>e.streamId),progress:this.progress,name:this.streams[0].name,creator:this.creator,coinType:this.streams[0].coinType,totalAmount:this.streams.reduce((e,n)=>e+n.totalAmount,0n),start:this.streams[0].timeStart,end:this.streams[0].timeEnd,cancelable:this.streams[0].cancelable,cliffAmount:this.streams.reduce((e,n)=>e+n.cliff,0n),duration:this.streams[0].duration,interval:this.streams[0].interval,steps:this.streams[0].totalSteps,nextReleaseAmount:this.streams.reduce((e,n)=>n.nextReleaseAmount===null?e:e+n.nextReleaseAmount,0n),nextReleaseDate:this.streams[0].nextReleaseDate}}get progress(){return{total:this.streams.reduce((e,n)=>e+n.totalAmount,0n),streamed:this.streams.reduce((e,n)=>e+n.streamedAmount,0n),claimed:this.streams.reduce((e,n)=>e+n.claimedAmount,0n),claimable:this.streams.reduce((e,n)=>e+n.claimable,0n),canceled:this.streams.reduce((e,n)=>e+n.canceledAmount,0n)}}async historyEvents(e){return this.globals.backend.getStreamHistory({groupId:this.groupId,pagination:e})}static async parseGroupStreams(e,n,i){let r=i.map((s,o)=>Wm.fromObjectData(e,n[o],s)).filter(s=>!!s);if(new Set(r.map(s=>s.groupId)).size!==1)throw new Pf("Not same group ID");if(!this.checkStreamGroup(r))throw new Pf("Not same stream settings");return r}};function Tz(t,e){return t.name===e.name&&t.groupId===e.groupId&&t.creator===e.creator&&t.start.toMillis()===e.start.toMillis()&&t.interval.toMillis()===e.interval.toMillis()&&t.steps===e.steps&&t.cancelable===e.cancelable}var g0=class zp{constructor(e,n){this.it=e,this.pageSize=n}static async newIncoming(e){let n=await m0.newIncoming(e);return new zp(n,e.pageSize)}static async newOutgoing(e){let n=await m0.newOutgoing(e);return new zp(n,e.pageSize)}async hasNext(){return this.it.hasNext()}async next(){let e=[];for(;e.length<this.pageSize&&await this.it.hasNext();)e.push(await this.it.next());return e}},m0=class qp{constructor(e){v(this,"cachedNext");this.requester=e}static async newIncoming(e){let n=await w0.newIncomingQuery(e);return new qp(n)}static async newOutgoing(e){let n=await w0.newOutgoingQuery(e);return new qp(n)}async hasNext(){return this.cachedNext===void 0&&(this.cachedNext=await this.requester.doNextRequest()),this.cachedNext!==null}async next(){if(this.cachedNext===void 0){let n=await this.requester.doNextRequest();if(n===null)throw new wr("No more results");return n}let e=this.cachedNext;if(this.cachedNext=void 0,e===null)throw new wr("No more results");return e}},w0=class Vp{constructor(e,n,i,r){v(this,"current",0);v(this,"objectIter");this.globals=e,this.recipient=n,this.groupRefs=i,this.query=r,this.current=0;let s=new US(i.flat().map(o=>o.streamId));this.objectIter=new LS(e.suiClient,s)}static async newIncomingQuery(e){let n=xz(e.query),i=await e.globals.walletAddress(),r=(await e.globals.backend.getIncomingStreams(i,n)).filter(o=>lt(o.recipient)===lt(i)),s=y0(r);return new Vp(e.globals,i,s,e.query)}static async newOutgoingQuery(e){let n=Mz(e.query),i=await e.globals.walletAddress(),r=await e.globals.backend.getOutgoingStreams(i,n),s=y0(r);return new Vp(e.globals,i,s,e.query)}async doNextRequest(){if(this.current>=this.groupRefs.length)return null;let e=this.groupRefs[this.current];if(e.length===1){let n=await Iz(this.globals,e[0].streamId,this.objectIter);return this.current++,$S(n,this.query)?n:this.doNextRequest()}if(e.length>1){let n=await Ez(this.globals,e.map(i=>i.streamId),this.objectIter);return this.current++,Cz(n,this.query)?n:this.doNextRequest()}throw new wr("Stream group with no stream")}};function y0(t){let e=new Map;return t.forEach(n=>{let i=e.get(n.groupId);i?(i.push(n),e.set(n.groupId,i)):e.set(n.groupId,[n])}),Array.from(e.values()).sort((n,i)=>rt.fromISO(i[0].createDate).toMillis()-rt.fromISO(n[0].createDate).toMillis())}function $S(t,e){if(e===void 0)return!0;let n=Az(t,e.status);if(e&&"claimable"in e&&e.claimable!==void 0){let i=e.claimable?t.progress.claimable!==0n:t.progress.claimable===0n;return n&&i}return n}function Az(t,e){return e===void 0?!0:Array.isArray(e)?e.includes(t.progress.status):t.progress.status===e}function Cz(t,e){if(!e)return!0;let n=!1;return t.streams.forEach(i=>{$S(i,e)&&(n=!0)}),n}async function Iz(t,e,n){let i=await zS(n,e);return Wm.fromObjectData(t,e,i)}async function Ez(t,e,n){let i=[];for(;i.length<e.length;){let r=await zS(n,e[i.length]);i.push(r)}return Sz.newFromObjectResponse(t,e,i)}async function zS(t,e){var i;if(!await t.hasNext())throw new wr("object iterator has been consumed");let n=await t.next();if(!n||n.error||n.data===void 0||n.data===null)throw new wr("object iterator undefined response",{cause:n==null?void 0:n.error});if(((i=n==null?void 0:n.data)==null?void 0:i.objectId)!==e)throw new wr("stream id not aligned");return n}function xz(t){return{status:Km(t==null?void 0:t.status),coinType:qS(t==null?void 0:t.coinType),sender:VS(t==null?void 0:t.sender)}}function Mz(t){return{status:Km(t==null?void 0:t.status),coinType:qS(t==null?void 0:t.coinType),recipient:VS(t==null?void 0:t.recipient)}}function Km(t){return t===void 0||t.length===0?"all":Array.isArray(t)?t.reduce((e,n)=>{let i=Km(n);return!e||e===i?i:"all"},void 0):Nz(t)}function Nz(t){switch(t){case"STREAMING":case"STREAMED":case"CANCELED":return"active";case"COMPLETED":case"SETTLED":return"inactive";default:throw new Ei("Unknown stream filtered status")}}function qS(t){if(t)return Array.isArray(t)?t.length!==0?t.map(e=>mn(e)):void 0:mn(t)}function VS(t){if(t)return Array.isArray(t)?t.length!==0?t.map(e=>lt(e)):void 0:lt(t)}var Oz=class{constructor(t){this.msafe=t}get type(){return"msafe"}async address(){return this.msafe.address()}async requestCoins(t){return this.msafe.requestCoins(t)}},Dz=class{constructor(t){this.account=t}async address(){return this.account.address}},jz=class{constructor(t,e){this.singleWallet=t,this.suiClient=e}get type(){return"single"}async address(){return this.singleWallet.address()}async requestCoins(t){return Promise.all(t.map(e=>this.requestCoin(e)))}async requestCoin(t){if(OS(t.coinType,yd))return{primaryCoin:DS};if(t.amount<=0)throw new Ei("Invalid coin request","coinAmount",t.amount);let e=await dz(this.suiClient,await this.address(),t.amount,t.coinType);if(e.length===0)throw new wr("no coins available");return{primaryCoin:e[0].coinObjectId,mergedCoins:e.slice(1).map(n=>n.coinObjectId)}}},Rz=class{constructor(t,e){v(this,"globals");v(this,"helper");this.globals=IS.new(t,e),this.helper=new _z(this.globals)}connectSingleWallet(t){let e=new jz(t,this.globals.suiClient);this.globals.connectWallet(e)}connectMSafeAccount(t){let e=new Oz(t);this.globals.connectWallet(e)}async createStream(t){return this.builder().createStreams(t)}async getStream(t){return Wm.new(this.globals,t)}async getIncomingStreams(t,e=10){return g0.newIncoming({globals:this.globals,query:t,pageSize:e})}async getOutgoingStreams(t,e=10){return g0.newOutgoing({globals:this.globals,query:t,pageSize:e})}async getCoinTypesForStreamFilter(){let t=await this.wallet.address();return(await this.globals.backend.getAllCoinTypes(t)).map(e=>mn(e))}async getRecipientsForStreamFilter(t){let e=await this.wallet.address();return(await this.globals.backend.getAllRecipients(e,t)).map(n=>lt(n))}async getCreatorsForStreamFilter(t){let e=await this.wallet.address();return(await this.globals.backend.getAllSenders(e,t)).map(n=>lt(n))}get wallet(){return this.globals.wallet}builder(){return new PS(this.globals)}},Bz=class{constructor(t){this.data=t}serialize(){return JSON.stringify(iv(this.data))}},Ll=class extends Bz{constructor(){super(...arguments);v(this,"application","mpay")}getClient(e,n){let i=new Rz(e==="sui:mainnet"?"prod":"dev");return i.connectSingleWallet(new Dz(n)),i}},_0=class extends Ll{constructor(e){super(e);v(this,"txType",ut.Stream);v(this,"txSubType","Cancel");this.data=e}async build(e){let{network:n,account:i}=e;return(await this.getClient(n,i).getStream(this.data.streamId)).cancel()}},b0=class extends Ll{constructor(e){super(e);v(this,"txType",ut.Stream);v(this,"txSubType","ClaimByProxy");this.data=e}async build(e){let{network:n,account:i}=e;return(await this.getClient(n,i).getStream(this.data.streamId)).claimByProxy()}},v0=class extends Ll{constructor(e){super(e);v(this,"txType",ut.Stream);v(this,"txSubType","Claim");this.data=e}async build(e){let{network:n,account:i}=e;return(await this.getClient(n,i).getStream(this.data.streamId)).claim()}},k0=class extends Ll{constructor(e){super(e);v(this,"txType",ut.Stream);v(this,"txSubType","CreateStream");this.data=e}async build(e){let{network:n,account:i}=e;return this.getClient(n,i).createStream(this.data)}},WS=class hd{constructor(e,n){this.moveCall=e,this.txb=n}decodeSharedObjectId(e){let n=this.getInputParam(e);return hd.getSharedObjectId(n)}decodeOwnedObjectId(e){let n=this.getInputParam(e);return hd.getOwnedObjectId(n)}decodeInputU64(e){let n=this.decodePureArg(e,"u64");return BigInt(n)}decodeInputAddress(e){let n=this.decodePureArg(e,"address");return lt(n)}decodeInputString(e){return this.decodePureArg(e,"string")}decodeInputBool(e){return this.decodePureArg(e,"bool")}decodePureArg(e,n){let i=this.getInputParam(e);return hd.getPureInputValue(i,n)}getInputParam(e){let n=this.moveCall.arguments[e];if(n.kind!=="Input")throw new Error("not input type");return this.txb.blockData.inputs[n.index]}static getPureInputValue(e,n){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value=="object"&&"Pure"in e.value){let i=e.value.Pure;return li.de(n,new Uint8Array(i))}return e.value}static getOwnedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value=="object"){if(!("Object"in e.value)||!("ImmOrOwned"in e.value.Object))throw new Error("not ImmOrOwned");return lt(e.value.Object.ImmOrOwned.objectId)}return lt(e.value)}static getSharedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value!="object")return lt(e.value);if(!("Object"in e.value)||!("Shared"in e.value.Object))throw new Error("not Shared");return lt(e.value.Object.Shared.objectId)}static getPureInput(e,n){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value!="object")return e.value;if(!("Pure"in e.value))throw new Error("Pure not in value");let i=e.value.Pure;return li.de(n,new Uint8Array(i))}typeArg(e){return mn(this.moveCall.typeArguments[e])}txArg(e){return this.moveCall.arguments[e]}},Pz=class{constructor(t,e){this.globals=t,this.txb=e}decode(){let t=this.decodeCreateStreamInfo(),e=this.createStreamHelper().calculateCreateStreamFees(t);return{type:"CreateStream",info:t,fees:e}}decodeCreateStreamInfo(){let t=this.createStreamTransactions().map(e=>this.getCreationInfoFromMoveCall(e));return this.aggregateGroupStreamInfo(t)}createStreamTransactions(){let t=this.transactions.filter(e=>e.kind==="MoveCall"&&Ia(e.target,this.contract.createStreamTarget));if(t.length===0)throw new wr("No create stream transactions");return t.map(e=>new WS(e,this.txb))}getCreationInfoFromMoveCall(t){let e=t.decodeInputString(4),{name:n,groupId:i}=Lp(e),r=t.decodeInputAddress(5),s=t.decodeInputU64(6),o=t.decodeInputU64(7),a=t.decodeInputU64(8),c=t.decodeInputU64(9),l=t.decodeInputU64(10),u=t.decodeInputBool(11),d=t.typeArg(0);return{name:n,groupId:i,recipient:r,timeStart:s,cliff:o,epochInterval:a,totalEpoch:c,amountPerEpoch:l,cancelable:u,coinType:d}}aggregateGroupStreamInfo(t){if(new Set(t.map(n=>JSON.stringify({name:n.name,groupId:n.groupId,timeStart:String(n.timeStart),epochInterval:String(n.epochInterval),totalEpoch:String(n.totalEpoch),cancelable:n.cancelable,coinType:n.coinType}))).size!==1)throw new Ei("Stream group not have common info");let e=t.map(n=>({address:n.recipient,amountPerStep:n.amountPerEpoch,cliffAmount:n.cliff}));return{name:t[0].name,coinType:t[0].coinType,recipients:e,interval:t[0].epochInterval,steps:t[0].totalEpoch,startTimeMs:t[0].timeStart,cancelable:t[0].cancelable}}mergeCoinTransactions(){return this.transactions.filter(t=>t.kind==="MergeCoins")}get transactions(){return this.txb.blockData.transactions}get contract(){return new Yh(this.globals.envConfig.contract,this.globals)}get feeContract(){return new BS(this.globals.envConfig.contract,this.globals)}createStreamHelper(){return new $p(this.globals,this.feeContract,this.contract)}getInputArg(t){if(t.kind!=="Input")throw new Error("not input type");return"value"in t?t:this.txb.blockData.inputs[t.index]}},Fz=class{constructor(t,e){v(this,"contract");this.globals=t,this.txb=e,this.contract=new Yh(t.envConfig.contract,t)}decode(){if(this.isCreateStreamTransaction())return this.decodeCreateStreamTransaction();if(this.isClaimByProxyTransaction())return this.decodeClaimByProxyTransaction();if(this.isSetAutoClaimTransaction())return this.decodeSetAutoClaimTransaction();if(this.isCancelStreamTransaction())return this.decodeCancelStreamTransaction();if(this.isClaimStreamTransaction())return this.decodeClaimTransaction();throw new Error("Unknown stream transaction type")}get transactions(){return this.txb.blockData.transactions}isCreateStreamTransaction(){return this.transactions.findIndex(t=>t.kind==="MoveCall"&&Ia(t.target,this.contract.createStreamTarget))!==-1}isSetAutoClaimTransaction(){return this.transactions.length===1&&this.transactions[0].kind==="MoveCall"&&Ia(this.transactions[0].target,this.contract.setAutoClaimTarget)}isCancelStreamTransaction(){return this.transactions.length===1&&this.transactions[0].kind==="MoveCall"&&Ia(this.transactions[0].target,this.contract.cancelStreamTarget)}isClaimStreamTransaction(){return this.transactions.length===1&&this.transactions[0].kind==="MoveCall"&&Ia(this.transactions[0].target,this.contract.claimStreamTarget)}isClaimByProxyTransaction(){return this.transactions.length===1&&this.transactions[0].kind==="MoveCall"&&Ia(this.transactions[0].target,this.contract.claimStreamByProxyTarget)}decodeCreateStreamTransaction(){return new Pz(this.globals,this.txb).decode()}decodeSetAutoClaimTransaction(){let t=this.helper.decodeSharedObjectId(0),e=this.helper.decodeInputBool(1);return{type:"SetAutoClaim",streamId:t,enabled:e}}decodeClaimTransaction(){return{type:"Claim",streamId:this.helper.decodeSharedObjectId(0)}}decodeClaimByProxyTransaction(){return{type:"ClaimByProxy",streamId:this.helper.decodeSharedObjectId(0)}}decodeCancelStreamTransaction(){return{type:"Cancel",streamId:this.helper.decodeSharedObjectId(0)}}get helper(){let t=this.transactions[0];return new WS(t,this.txb)}},S0=class extends Ll{constructor(e){super(e);v(this,"txType",ut.Stream);v(this,"txSubType","SetAutoClaim");this.data=e}async build(e){let{network:n,account:i}=e;return(await this.getClient(n,i).getStream(this.data.streamId)).setAutoClaim(this.data.enabled)}},Uz=class{constructor(){v(this,"application","mpay")}async deserialize(t){let{network:e,transactionBlock:n}=t,i=IS.new(e==="sui:mainnet"?"prod":"dev"),r=new Fz(i,n).decode(),s;switch(r.type){case"CreateStream":s=new k0(r.info);break;case"SetAutoClaim":s=new S0({streamId:r.streamId,enabled:r.enabled});break;case"Claim":s=new v0({streamId:r.streamId});break;case"ClaimByProxy":s=new b0({streamId:r.streamId});break;case"Cancel":s=new _0({streamId:r.streamId});break;default:throw new Error(`Unknown transaction type: ${r}`)}return{txType:s.txType,txSubType:s.txSubType,intentionData:s.data}}async build(t){let{intentionData:e}=t,n;switch(t.txSubType){case"CreateStream":n=new k0(e);break;case"Claim":n=new v0(e);break;case"ClaimByProxy":n=new b0(e);break;case"SetAutoClaim":n=new S0(e);break;case"Cancel":n=new _0(e);break;default:throw new Error("not implemented")}return n.build({...t})}},Lz=class KS extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let{suiClient:i,account:r}=n;return RP(i,this.data,r.address)}static fromData(n){return new KS(n)}},$z=class ZS extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let{suiClient:i,account:r}=n;return FP(i,this.data,r.address)}static fromData(n){return new ZS(n)}},zz=class HS extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let{account:i}=n,r=X.from(this.data.content);if(!rv(r.blockData.sender,i.address))throw new Error("Invalid sender address");return r}static fromData(n){return new HS(n)}},qz=class{constructor(){v(this,"application");this.application=$P}deserialize(){throw new Error("MSafe core transaction intention should be build from API")}async build(t){let{suiClient:e,account:n}=t,i;switch(t.txSubType){case td.assets.coin.send:i=Lz.fromData(t.intentionData);break;case td.assets.object.send:i=$z.fromData(t.intentionData);break;case td.others.plain:i=zz.fromData(t.intentionData);break;default:throw new Error("not implemented")}return i.build({suiClient:e,account:n})}},Vz={ProtocolPackage:"0x7c9b90b3fda0fa4aa8ee88ae6c4a0b83c773f74936b5354448cb94662e94442d",StorageId:"0xbb4e2f4b6205c2e2a2db47aeb4f830796ec7c005f88537ee775986639bc442fe",Incentive:"0xaaf735bf83ff564e1b219a0d644de894ef5bdc4b2250b126b2a46dd002331821",IncentiveV2:"0xf87a8acb8b81d14307894d12595541a73f19933f88e1326d5be349c7a6f7559c",PriceOracle:"0x1568865ed9a0b5ec414220e8f79b3d04c77acc82358f6e5ae4635687392ffbef",ReserveParentId:"0xe6d4c6610b86ce7735ea754596d71d72d10c7980b5052fc3c8cdf8d09fea9b4b",pool:{sui:{name:"SUI",assetId:0,poolId:"0x96df0fce3c471489f4debaaa762cf960b3d97820bd1f3f025ff8190730e958c5",fondPoolId:"0xf975bc2d4cca10e3ace8887e20afd77b46c383b4465eac694c4688344955dea4",type:"0x2::sui::SUI",coinType:"sui",reserveObjectId:"0xab644b5fd11aa11e930d1c7bc903ef609a9feaf9ffe1b23532ad8441854fbfaf",borrowBalanceParentId:"0xe7ff0daa9d090727210abe6a8b6c0c5cd483f3692a10610386e4dc9c57871ba7",supplyBalanceParentId:"0x589c83af4b035a3bc64c40d9011397b539b97ea47edf7be8f33d643606bf96f8"},usdc:{name:"USDC",assetId:1,coinType:"usdc",poolId:"0xa02a98f9c88db51c6f5efaaf2261c81f34dd56d86073387e0ef1805ca22e39c8",type:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",reserveObjectId:"0xeb3903f7748ace73429bd52a70fff278aac1725d3b58afa781f25ce3450ac203",borrowBalanceParentId:"0x8a3aaa817a811131c624658f6e77cba04ab5829293d2c49c1a9cce8ac9c8dec4",supplyBalanceParentId:"0x8d0a4467806458052d577c8cd2be6031e972f2b8f5f77fce98aa12cd85330da9"},usdt:{name:"USDT",coinType:"usdt",assetId:2,poolId:"0x0e060c3b5b8de00fb50511b7a45188c8e34b6995c01f69d98ea5a466fe10d103",type:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",reserveObjectId:"0xb8c5eab02a0202f638958cc79a69a2d30055565caad1684b3c8bbca3bddcb322",borrowBalanceParentId:"0xc14d8292a7d69ae31164bafab7ca8a5bfda11f998540fe976a674ed0673e448f",supplyBalanceParentId:"0x7e2a49ff9d2edd875f82b76a9b21e2a5a098e7130abfd510a203b6ea08ab9257"},weth:{name:"WETH",coinType:"weth",assetId:3,poolId:"0x71b9f6e822c48ce827bceadce82201d6a7559f7b0350ed1daa1dc2ba3ac41b56",type:"0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5::coin::COIN",reserveObjectId:"0xafecf4b57899d377cc8c9de75854c68925d9f512d0c47150ca52a0d3a442b735",borrowBalanceParentId:"0x7568d06a1b6ffc416a36c82791e3daf0e621cf19d4a2724fc6f74842661b6323",supplyBalanceParentId:"0xa668905b1ad445a3159b4d29b1181c4a62d864861b463dd9106cc0d97ffe8f7f"},cetus:{name:"CETUS",coinType:"cetus",assetId:4,poolId:"0x3c376f857ec4247b8ee456c1db19e9c74e0154d4876915e54221b5052d5b1e2e",type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",reserveObjectId:"0x66a807c06212537fe46aa6719a00e4fa1e85a932d0b53ce7c4b1041983645133",borrowBalanceParentId:"0x4c3da45ffff6432b4592a39cdb3ce12f4a28034cbcb804bb071facc81fdd923d",supplyBalanceParentId:"0x6adc72faf2a9a15a583c9fb04f457c6a5f0b456bc9b4832413a131dfd4faddae"},voloSui:{name:"VoloSui",coinType:"voloSui",assetId:5,poolId:"0x9790c2c272e15b6bf9b341eb531ef16bcc8ed2b20dfda25d060bf47f5dd88d01",fondPoolId:"0xe2b5ada45273676e0da8ae10f8fe079a7cec3d0f59187d3d20b1549c275b07ea",type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",reserveObjectId:"0xd4fd7e094af9819b06ea3136c13a6ae8da184016b78cf19773ac26d2095793e2",borrowBalanceParentId:"0x8fa5eccbca2c4ba9aae3b87fd44aa75aa5f5b41ea2d9be4d5321379384974984",supplyBalanceParentId:"0xe6457d247b6661b1cac123351998f88f3e724ff6e9ea542127b5dcb3176b3841"},haSui:{name:"HaedalSui",coinType:"haSui",assetId:6,poolId:"0x6fd9cb6ebd76bc80340a9443d72ea0ae282ee20e2fd7544f6ffcd2c070d9557a",fondPoolId:"0xa20e18085ce04be8aa722fbe85423f1ad6b1ae3b1be81ffac00a30f1d6d6ab51",type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",reserveObjectId:"0x0c9f7a6ca561dc566bd75744bcc71a6af1dc3caf7bd32c099cd640bb5f3bb0e3",borrowBalanceParentId:"0x01f36898e020be6c3423e5c95d9f348868813cd4d0be39b0c8df9d8de4722b00",supplyBalanceParentId:"0x278b8e3d09c3548c60c51ed2f8eed281876ea58c392f71b7ff650cc9286d095b"},navx:{name:"NAVX",coinType:"navx",assetId:7,poolId:"0xc0e02e7a245e855dd365422faf76f87d9f5b2148a26d48dda6e8253c3fe9fa60",fondPoolId:"0x9dae0cf104a193217904f88a48ce2cf0221e8cd9073878edd05101d6b771fa09",type:"0xa99b8952d4f7d947ea77fe0ecdcc9e5fc0bcab2841d6e2a5aa00c3044e5544b5::navx::NAVX",reserveObjectId:"0x2e13b2f1f714c0c5fa72264f147ef7632b48ec2501f810c07df3ccb59d6fdc81",borrowBalanceParentId:"0xa5bf13075aa400cbdd4690a617c5f008e1fae0511dcd4f7121f09817df6c8d8b",supplyBalanceParentId:"0x59dedca8dc44e8df50b190f8b5fe673098c1273ac6168c0a4addf3613afcdee5"}}},ht=Vz,Wz=class{constructor(t){this.txb=t}decode(){if(console.log("txb",this.txb),this.isClaimRewardTransaction())return this.decodeClaimReward();if(this.isEntryBorrowTransaction())return this.decodeEntryBorrow();if(this.isEntryDepositTransaction())return this.decodeEntryDeposit();if(this.isEntryRepayTransaction())return this.decodeEntryRepay();if(this.isEntryWithdrawTransaction())return this.decodeEntryWithdraw();throw new Error("Unknown transaction type")}get transactions(){return this.txb.blockData.transactions}getMoveCallTransaction(t){return this.transactions.find(e=>e.kind==="MoveCall"&&e.target===t)}isClaimRewardTransaction(){return!!this.getMoveCallTransaction(`${ht.ProtocolPackage}::incentive_v2::claim_reward`)}isEntryBorrowTransaction(){return!!this.getMoveCallTransaction(`${ht.ProtocolPackage}::incentive_v2::entry_borrow`)}isEntryDepositTransaction(){return!!this.getMoveCallTransaction(`${ht.ProtocolPackage}::incentive_v2::entry_deposit`)}isEntryRepayTransaction(){return!!this.getMoveCallTransaction(`${ht.ProtocolPackage}::incentive_v2::entry_repay`)}isEntryWithdrawTransaction(){return!!this.getMoveCallTransaction(`${ht.ProtocolPackage}::incentive_v2::entry_withdraw`)}findPoolByAssetId(t){let e=Object.values(ht.pool).find(n=>n.assetId===t);if(!e)throw new Error("Pool not found");return e}decodeClaimReward(){let t=[];return this.transactions.forEach(e=>{if(e.kind==="MoveCall"&&e.target===`${ht.ProtocolPackage}::incentive_v2::claim_reward`){let n=new T0(e,this.txb),i=n.decodeInputU8(4),r=n.decodeInputU8(5),s=n.decodeSharedObjectId(2),o=this.findPoolByAssetId(i),a=[...e.typeArguments];t.push({coinType:o.coinType,option:r,typeArguments:a,assetId:i,poolId:s})}}),console.log("decode claims",t),{txType:ut.Other,type:"ClaimReward",intentionData:{claims:t}}}decodeEntryBorrow(){let t=this.helper.decodeInputU8(4),e=this.helper.decodeInputU64(5),n=this.findPoolByAssetId(t);return{txType:ut.Other,type:"EntryBorrow",intentionData:{amount:e,coinType:n.coinType}}}decodeEntryDeposit(){let t=this.helper.decodeInputU8(3),e=this.helper.decodeInputU64(5),n=this.findPoolByAssetId(t);return{txType:ut.Other,type:"EntryDeposit",intentionData:{amount:e,coinType:n.coinType}}}decodeEntryRepay(){let t=this.helper.decodeInputU8(4),e=this.helper.decodeInputU64(6),n=this.findPoolByAssetId(t);return{txType:ut.Other,type:"EntryRepay",intentionData:{amount:e,coinType:n.coinType}}}decodeEntryWithdraw(){let t=this.helper.decodeInputU8(4),e=this.helper.decodeInputU64(5),n=this.findPoolByAssetId(t);return{txType:ut.Other,type:"EntryWithdraw",intentionData:{amount:e,coinType:n.coinType}}}get helper(){let t=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(ht.ProtocolPackage));return new T0(t,this.txb)}},T0=class fd{constructor(e,n){this.moveCall=e,this.txb=n}decodeSharedObjectId(e){let n=this.getInputParam(e);return fd.getSharedObjectId(n)}decodeOwnedObjectId(e){let n=this.getInputParam(e);return fd.getOwnedObjectId(n)}decodeInputU64(e){let n=this.decodePureArg(e,"u64");return Number(n)}decodeInputU8(e){let n=this.decodePureArg(e,"u8");return Number(n)}decodeInputAddress(e){let n=this.decodePureArg(e,"address");return lt(n)}decodeInputString(e){return this.decodePureArg(e,"string")}decodeInputBool(e){return this.decodePureArg(e,"bool")}decodePureArg(e,n){let i=this.getInputParam(e);return fd.getPureInputValue(i,n)}getInputParam(e){let n=this.moveCall.arguments[e];if(n.kind!=="Input")throw new Error("not input type");return this.txb.blockData.inputs[n.index]}static getPureInputValue(e,n){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value=="object"&&"Pure"in e.value){let i=e.value.Pure;return li.de(n,new Uint8Array(i))}return e.value}static getOwnedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value=="object"){if(!("Object"in e.value)||!("ImmOrOwned"in e.value.Object))throw new Error("not ImmOrOwned");return lt(e.value.Object.ImmOrOwned.objectId)}return lt(e.value)}static getSharedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value!="object")return lt(e.value);if(!("Object"in e.value)||!("Shared"in e.value.Object))throw new Error("not Shared");return lt(e.value.Object.Shared.objectId)}static getPureInput(e,n){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value!="object")return e.value;if(!("Pure"in e.value))throw new Error("Pure not in value");let i=e.value.Pure;return li.de(n,new Uint8Array(i))}typeArg(e){return mn(this.moveCall.typeArguments[e])}txArg(e){return this.moveCall.arguments[e]}};function A0(t,e,n,i){return t.moveCall({target:`${ht.ProtocolPackage}::incentive_v2::entry_deposit`,arguments:[t.object("0x06"),t.object(ht.StorageId),t.object(e.poolId),t.pure(e.assetId),n,t.pure(i),t.object(ht.Incentive),t.object(ht.IncentiveV2)],typeArguments:[e.type]}),t}function Kz(t,e,n){return t.moveCall({target:`${ht.ProtocolPackage}::incentive_v2::entry_withdraw`,arguments:[t.object("0x06"),t.object(ht.PriceOracle),t.object(ht.StorageId),t.object(e.poolId),t.pure(e.assetId),t.pure(n),t.object(ht.Incentive),t.object(ht.IncentiveV2)],typeArguments:[e.type]}),t}function Zz(t,e,n){return t.moveCall({target:`${ht.ProtocolPackage}::incentive_v2::entry_borrow`,arguments:[t.object("0x06"),t.object(ht.PriceOracle),t.object(ht.StorageId),t.object(e.poolId),t.pure(e.assetId),t.pure(n),t.object(ht.IncentiveV2)],typeArguments:[e.type]}),t}function C0(t,e,n,i){return t.moveCall({target:`${ht.ProtocolPackage}::incentive_v2::entry_repay`,arguments:[t.object("0x06"),t.object(ht.PriceOracle),t.object(ht.StorageId),t.object(e.poolId),t.pure(e.assetId),n,t.pure(i),t.object(ht.IncentiveV2)],typeArguments:[e.type]}),t}function Hz(t,e,n,i,r){return t.moveCall({target:`${ht.ProtocolPackage}::incentive_v2::claim_reward`,arguments:[t.object("0x06"),t.object(ht.IncentiveV2),t.object(n),t.object(ht.StorageId),t.pure(e),t.pure(i)],typeArguments:r}),t}var Qz=class QS extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(){let{claims:n}=this.data,i=new X;return n.forEach(r=>{let{assetId:s,poolId:o,option:a,typeArguments:c}=r;Hz(i,s,o,a,c)}),i}static fromData(n){return new QS(n)}},Gz=class GS extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(){let{coinType:n,amount:i}=this.data,r=new X;console.log("build",this.data);let s=ht.pool[n];if(!s)throw new Error(`${n} not support, please use ${Object.keys(ht.pool).join(", ")}.`);return Zz(r,s,i)}static fromData(n){return new GS(n)}};async function YS(t,e,n){let i=await t.getCoins({owner:e,coinType:n});return console.log("getTokenObjs",e,i),i}var Yz=class XS extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let{suiClient:i,account:r}=n,{coinType:s,amount:o}=this.data,a=new X;if(console.log("build",this.data),s==="sui"){let[d]=a.splitCoins(a.gas,[o]);return A0(a,ht.pool.sui,d,o)}let c=ht.pool[s];if(!c)throw new Error(`${s} not support, please use ${Object.keys(ht.pool).join(", ")}.`);let l=await YS(i,r.address,c.type);if(!l.data[0])throw new Error(`Insufficient balance for ${c.name} Token`);let u=l.data[0].coinObjectId;if(l.data.length>=2){let d=1;for(;d<l.data.length;)a.mergeCoins(u,[l.data[d].coinObjectId]),d++}return A0(a,c,a.object(u),o)}static fromData(n){return new XS(n)}},Xz=class JS extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let{suiClient:i,account:r}=n,{coinType:s,amount:o}=this.data,a=new X;if(console.log("build",this.data),s==="sui"){let[d]=a.splitCoins(a.gas,[o]);return C0(a,ht.pool.sui,d,o)}let c=ht.pool[s];if(!c)throw new Error(`${s} not support, please use ${Object.keys(ht.pool).join(", ")}.`);let l=await YS(i,r.address,c.type);if(!l.data[0])throw new Error(`Insufficient balance for ${c.name} Token`);let u=l.data[0].coinObjectId;if(l.data.length>=2){let d=1;for(;d<l.data.length;)a.mergeCoins(u,[l.data[d].coinObjectId]),d++}return C0(a,c,a.object(u),o)}static fromData(n){return new JS(n)}},Jz=class e2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(){let{coinType:n,amount:i}=this.data,r=new X;console.log("build",this.data);let s=ht.pool[n];if(!s)throw new Error(`${n} not support, please use ${Object.keys(ht.pool).join(", ")}.`);return Kz(r,s,i)}static fromData(n){return new e2(n)}},eq=class{constructor(){v(this,"application","navi")}async deserialize(t){let{transactionBlock:e}=t,n=new Wz(e).decode();return{txType:ut.Other,txSubType:n.type,intentionData:n.intentionData}}async build(t){let{suiClient:e,account:n}=t,i;switch(t.txSubType){case"EntryDeposit":i=Yz.fromData(t.intentionData);break;case"EntryBorrow":i=Gz.fromData(t.intentionData);break;case"EntryRepay":i=Xz.fromData(t.intentionData);break;case"EntryWithdraw":i=Jz.fromData(t.intentionData);break;case"ClaimReward":i=Qz.fromData(t.intentionData);break;default:throw new Error("not implemented")}return i.build({suiClient:e,account:n})}},tq="msafe-plain-tx",nq=td.others.plain,iq=class{constructor(){v(this,"application");this.application=tq}async deserialize(t){let{transactionBlock:e,suiClient:n}=t,i=await e.build({client:n});return{txType:ut.Other,txSubType:nq,intentionData:{content:Yp(i)}}}async build(t){let{suiClient:e,account:n}=t,i=X.from(Gp(t.intentionData.content)),r=await e.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(r.effects.status.status!=="success")throw new Error(r.effects.status.error);return i}},rq=class{constructor(t){v(this,"apps");this.apps=new Map(t.map(e=>[e.application,e]))}getAppHelper(t){let e=this.apps.get(t);if(!e)throw new Error(`${t} not registered`);return e}},_o={PackageId:"0x9632f61a796fc54952d9151d80b319e066cba5498a27b495c99e113db09726b1"},sq=class{constructor(t){this.txb=t}get transactions(){return this.txb.blockData.transactions}decode(t){if(this.isAddLiquidityTransaction())return this.decodeAddLiquidity();if(this.isIncreaseLiquidityTransaction())return this.decodeIncreaseLiquidity(t);if(this.isDecreaseLiquidityTransaction())return this.decodeDecreaseLiquidity(t);if(this.isCollectFeeTransaction())return this.decodeCollectFee();if(this.isCollectRewardTransaction())return this.decodeCollectReward();if(this.isBurnTransaction())return this.decodeBurn();throw new Error("Unknown transaction type")}getMoveCallTransaction(t){return this.transactions.find(e=>e.kind==="MoveCall"&&e.target===t)}isAddLiquidityTransaction(){return!!this.getMoveCallTransaction(`${_o.PackageId}::position_manager::mint`)}isIncreaseLiquidityTransaction(){return!!this.getMoveCallTransaction(`${_o.PackageId}::position_manager::increase_liquidity`)}isDecreaseLiquidityTransaction(){return!!this.getMoveCallTransaction(`${_o.PackageId}::position_manager::decrease_liquidity`)}isCollectFeeTransaction(){return!!this.getMoveCallTransaction(`${_o.PackageId}::position_manager::collect`)}isCollectRewardTransaction(){return!!this.getMoveCallTransaction(`${_o.PackageId}::position_manager::collect_reward`)}isBurnTransaction(){return!!this.getMoveCallTransaction(`${_o.PackageId}::position_manager::burn`)}decodeAddLiquidity(){console.log(this.helper,"this.helper");let t=this.helper.decodeSharedObjectId(0),e=this.helper.decodeInputAddress(12),n=this.helper.decodeInputU64(8),i=this.helper.decodeInputU64(9),r=this.helper.decodeInputU32(4),s=this.helper.decodeInputBool(5),o=this.helper.decodeInputU32(6),a=this.helper.decodeInputBool(7),c=this.helper.decodeInputU64(13);return{txType:ut.Other,type:"AddLiquidity",intentionData:{pool:t,slippage:5,address:e,amountA:n,amountB:i,tickLower:s?-r:r,tickUpper:a?-o:o,deadline:c}}}decodeIncreaseLiquidity(t){let e=this.helper.decodeSharedObjectId(0),n=this.helper.decodeSharedObjectId(4),i=this.helper.decodeInputU64(5),r=this.helper.decodeInputU64(6),s=this.helper.decodeInputU64(9);return{txType:ut.Other,type:"IncreaseLiquidity",intentionData:{pool:e,slippage:5,address:t,amountA:i,amountB:r,nft:n,deadline:s}}}decodeDecreaseLiquidity(t){let e=this.helper.decodeSharedObjectId(0),n=this.helper.decodeSharedObjectId(2),i=this.helper.decodeInputU64(3),r=this.helper.decodeInputU64(4),s=this.helper.decodeInputU64(5),o=this.helper.decodeInputU64(6);return{txType:ut.Other,type:"DecreaseLiquidity",intentionData:{pool:e,decreaseLiquidity:i,nft:n,amountA:r,amountB:s,slippage:3,address:t,deadline:o}}}decodeCollectFee(){let t=this.helper.decodeSharedObjectId(0),e=this.helper.decodeSharedObjectId(2),n=this.helper.decodeInputAddress(5),i=this.helper.decodeInputU64(3),r=this.helper.decodeInputU64(4),s=this.helper.decodeInputU64(6);return{txType:ut.Other,type:"CollectFee",intentionData:{pool:t,address:n,collectAmountA:i,collectAmountB:r,nft:e,deadline:s}}}decodeCollectReward(){let t=this.helper.decodeSharedObjectId(0),e=this.helper.decodeSharedObjectId(2),n=this.helper.decodeInputAddress(6),i=this.collectRewardHelper.map(s=>s.decodeInputU64(5)),r=this.helper.decodeInputU64(7);return{txType:ut.Other,type:"CollectReward",intentionData:{pool:t,address:n,rewardAmounts:i,nft:e,deadline:r}}}decodeBurn(){let t=this.helper.decodeSharedObjectId(0),e=this.helper.decodeSharedObjectId(2);return{txType:ut.Other,type:"Burn",intentionData:{pool:t,nft:e}}}get helper(){console.log(this.transactions,"this.transactions");let t=this.transactions.find(e=>e.kind==="MoveCall"&&e.target!=="0x2::coin::zero");return console.log(t,this.txb,"this.txb"),new I0(t,this.txb)}get collectRewardHelper(){console.log(this.transactions,"this.transactions");let t=this.transactions.filter(e=>e.kind==="MoveCall"&&e.target===`${_o.PackageId}::position_manager::collect_reward`);return console.log(t,this.txb,"this.txb"),t.map(e=>new I0(e,this.txb))}},I0=class pd{constructor(e,n){this.moveCall=e,this.txb=n}decodeSharedObjectId(e){let n=this.getInputParam(e);return pd.getSharedObjectId(n)}decodeOwnedObjectId(e){let n=this.getInputParam(e);return pd.getOwnedObjectId(n)}decodeInputU128(e){let n=this.decodePureArg(e,"u128");return Number(n)}decodeInputU64(e){let n=this.decodePureArg(e,"u64");return Number(n)}decodeInputU32(e){let n=this.decodePureArg(e,"u32");return Number(n)}decodeInputU8(e){let n=this.decodePureArg(e,"u8");return Number(n)}decodeInputAddress(e){let n=this.decodePureArg(e,"address");return lt(n)}decodeInputString(e){return this.decodePureArg(e,"string")}decodeInputBool(e){return this.decodePureArg(e,"bool")}decodePureArg(e,n){let i=this.getInputParam(e);return pd.getPureInputValue(i,n)}getInputParam(e){let n=this.moveCall.arguments[e];if(n.kind!=="Input")throw new Error("not input type");return this.txb.blockData.inputs[n.index]}static getPureInputValue(e,n){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value=="object"&&"Pure"in e.value){let i=e.value.Pure;return li.de(n,new Uint8Array(i))}return e.value}static getOwnedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value=="object"){if(!("Object"in e.value)||!("ImmOrOwned"in e.value.Object))throw new Error("not ImmOrOwned");return lt(e.value.Object.ImmOrOwned.objectId)}return lt(e.value)}static getSharedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value!="object")return lt(e.value);if(!("Object"in e.value)||!("Shared"in e.value.Object))throw new Error("not Shared");return lt(e.value.Object.Shared.objectId)}static getPureInput(e,n){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value!="object")return e.value;if(!("Pure"in e.value))throw new Error("Pure not in value");let i=e.value.Pure;return li.de(n,new Uint8Array(i))}typeArg(e){return mn(this.moveCall.typeArguments[e])}txArg(e){return this.moveCall.arguments[e]}},oq=class t2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let i=new no(n.network.replace("sui:",""),n.suiClient),{pool:r,address:s,amountA:o,amountB:a,slippage:c,tickLower:l,tickUpper:u,deadline:d,txb:h}=this.data;return i.pool.addLiquidity({pool:r,slippage:c,address:s,amountA:o,amountB:a,tickLower:l,tickUpper:u,deadline:d,txb:h})}static fromData(n){return new t2(n)}},aq=class n2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let i=new no(n.network.replace("sui:",""),n.suiClient),{pool:r,nft:s,txb:o}=this.data;return i.nft.burn({pool:r,nft:s,txb:o})}static fromData(n){return new n2(n)}},cq=class i2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let i=new no(n.network.replace("sui:",""),n.suiClient),{pool:r,address:s,nft:o,collectAmountA:a,collectAmountB:c,deadline:l,txb:u}=this.data;return i.pool.collectFee({pool:r,address:s,collectAmountA:a,collectAmountB:c,nft:o,deadline:l,txb:u})}static fromData(n){return new i2(n)}},lq=class r2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let i=new no(n.network.replace("sui:",""),n.suiClient),{pool:r,address:s,nft:o,rewardAmounts:a,deadline:c,txb:l}=this.data;return i.pool.collectReward({pool:r,address:s,rewardAmounts:a,nft:o,deadline:c,txb:l})}static fromData(n){return new r2(n)}},uq=class s2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let i=new no(n.network.replace("sui:",""),n.suiClient),{fee:r,address:s,tickLower:o,tickUpper:a,sqrtPrice:c,slippage:l,coinTypeA:u,coinTypeB:d,amountA:h,amountB:f,deadline:g,txb:p}=this.data;return i.pool.createPool({fee:r,amountA:h,amountB:f,address:s,tickLower:o,tickUpper:a,sqrtPrice:c,slippage:l,coinTypeA:u,coinTypeB:d,deadline:g,txb:p})}static fromData(n){return new s2(n)}},dq=class o2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let i=new no(n.network.replace("sui:",""),n.suiClient),{pool:r,address:s,amountA:o,amountB:a,slippage:c,nft:l,decreaseLiquidity:u,deadline:d,txb:h}=this.data;return i.pool.decreaseLiquidity({pool:r,slippage:c,address:s,amountA:o,amountB:a,nft:l,decreaseLiquidity:u,deadline:d,txb:h})}static fromData(n){return new o2(n)}},hq=class a2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let i=new no(n.network.replace("sui:",""),n.suiClient),{pool:r,address:s,amountA:o,amountB:a,slippage:c,nft:l,deadline:u,txb:d}=this.data;return i.pool.increaseLiquidity({pool:r,slippage:c,address:s,amountA:o,amountB:a,nft:l,deadline:u,txb:d})}static fromData(n){return new a2(n)}},fq=class c2 extends vt{constructor(n){super(n);v(this,"txType");v(this,"txSubType");this.data=n}async build(n){let i=new no(n.network.replace("sui:",""),n.suiClient),{pool:r,address:s,amountA:o,amountB:a,slippage:c,nft:l,decreaseLiquidity:u,collectAmountA:d,collectAmountB:h,rewardAmounts:f,deadline:g,txb:p}=this.data;return i.pool.removeLiquidity({pool:r,decreaseLiquidity:u,nft:l,amountA:o,amountB:a,slippage:c,address:s,collectAmountA:d,collectAmountB:h,rewardAmounts:f,deadline:g,txb:p})}static fromData(n){return new c2(n)}},pq=class{constructor(){v(this,"application","turbos")}async deserialize(t){let{transactionBlock:e,account:n}=t,i=new sq(e).decode(n.address);return{txType:ut.Other,txSubType:i.type,intentionData:i.intentionData}}async build(t){let{suiClient:e,account:n,network:i}=t,r;switch(t.txSubType){case"CreatePool":r=uq.fromData(t.intentionData);break;case"AddLiquidity":r=oq.fromData(t.intentionData);break;case"IncreaseLiquidity":r=hq.fromData(t.intentionData);break;case"DecreaseLiquidity":r=dq.fromData(t.intentionData);break;case"RemoveLiquidity":r=fq.fromData(t.intentionData);break;case"CollectFee":r=cq.fromData(t.intentionData);break;case"CollectReward":r=lq.fromData(t.intentionData);break;case"Burn":r=aq.fromData(t.intentionData);break;default:throw new Error("not implemented")}return r.build({suiClient:e,account:n,network:i})}},gq=new rq([new qz,new eq,new Uz,new iq,new U7,new pq]),mq=class{constructor(){v(this,"_listeners",{})}on(t,e,n=0){this._listeners[t]||(this._listeners[t]=[]),e._priority=n,this._listeners[t].indexOf(e)===-1&&(this._listeners[t].push(e),this._listeners[t].length>1&&this._listeners[t].sort(this.listenerSorter))}listenerSorter(t,e){return t._priority-e._priority}off(t,e){if(this._listeners[t]===void 0)return;if(e===void 0){delete this._listeners[t];return}let n=this._listeners[t].indexOf(e);-1<n&&this._listeners[t].splice(n,1)}trigger(t,e={}){if(typeof t=="string"&&(t={type:t,data:typeof e=="object"&&e!==null?e:{}}),typeof this._listeners[t.type]<"u")for(let n=this._listeners[t.type].length-1;n>=0;n--)this._listeners[t.type][n](t)}destroy(){this._listeners={}}},wq=class extends mq{constructor(e=Math.random()*100|0){super();v(this,"id");v(this,"connected");v(this,"connecting");v(this,"isChild");v(this,"debug");v(this,"supported");v(this,"origin");v(this,"_sendLater");v(this,"iframe");this.id=`BELLHOP:${e}`,this.connected=!1,this.isChild=!0,this.connecting=!1,this.debug=!1,this.origin="*",this._sendLater=[],this.iframe=null,this.receive=this.receive.bind(this)}receive(e){if(this.target===e.source){if(this.logDebugMessage(!0,e),e.data!=="connected"){let n=e.data;if(typeof n=="string")try{n=JSON.parse(n)}catch(i){console.warn("Bellhop error: ",i)}this.connected&&typeof n=="object"&&n.type&&this.trigger(n);return}this.onConnectionReceived(e.data)}}onConnectionReceived(e){if(this.connecting=!1,this.connected=!0,!this.isChild){if(!this.target)return;this.target.postMessage(e,this.origin)}for(let n=0;n<this._sendLater.length;n++){let{type:i,data:r}=this._sendLater[n];this.send(i,r)}this._sendLater.length=0,this.trigger("connected")}connect(e,n="*"){var i;this.connecting||(this.disconnect(),this.connecting=!0,e instanceof HTMLIFrameElement&&(this.iframe=e),this.isChild=e===void 0,this.supported=!0,this.isChild&&(this.supported=window!=e),this.origin=n,window.addEventListener("message",this.receive),this.isChild&&(window===this.target?this.trigger("failed"):(i=this.target)==null||i.postMessage("connected",this.origin)))}disconnect(){this.connected=!1,this.connecting=!1,this.origin="",this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener("message",this.receive)}send(e,n={}){var r;if(typeof e!="string")throw"The event type must be a string";let i={type:e,data:n};this.logDebugMessage(!1,i),this.connecting?this._sendLater.push(i):(r=this.target)==null||r.postMessage(JSON.stringify(i,(s,o)=>typeof o=="bigint"?o.toString():o),this.origin)}fetch(e,n,i={},r=!1){if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";let s=o=>{r&&this.off(o.type,s),n(o)};this.on(e,s),this.send(e,i)}respond(e,n={},i=!1){let r=this,s=async function(o){i&&r.off(o,s),typeof n=="function"?r.send(o.type,await n()):r.send(o.type,n)};this.on(e,s)}logDebugMessage(e=!1,n){this.debug&&typeof this.debug=="function"?console.log({isChild:this.isChild,received:e,message:n}):this.debug&&console.log(`Bellhop Instance (${this.isChild?"Child":"Parent"}) ${e?"Received":"Sent"}`,n)}destroy(){super.destroy(),this.disconnect(),this._sendLater.length=0}get target(){var e;return this.isChild?window.parent:(e=this.iframe)==null?void 0:e.contentWindow}},Wp=class{constructor(t,e,n){v(this,"accounts",[]);v(this,"currentAccount");v(this,"bellhop",new wq);v(this,"walletMessageListener");v(this,"onAccountChangeListner");v(this,"version","1.0.0");v(this,"name","MSafe Wallet");v(this,"icon","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQ3IiBoZWlnaHQ9IjE3MCIgdmlld0JveD0iMCAwIDI0NyAxNzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAyLjU5MyAyMy4wMTNDMTA3LjQ5OSAyNi4wNTU4IDExMC43OTQgMzAuODc4NSAxNDAuOTEyIDc5LjEwMzlDMTcyLjQxOSAxMjkuNTUyIDE3My44NjQgMTMyLjExNCAxNzMuODY0IDEzNy41MzZDMTczLjg2NCAxNDIuNDUxIDE3My4zNCAxNDMuNzI1IDE2OS45MTcgMTQ3LjExMkMxNjYuNDc2IDE1MC41MTggMTY1LjIyMiAxNTEuMDE5IDE2MC4xMzggMTUxLjAxOUMxNTUuNTg0IDE1MS4wMTkgMTUzLjUzNiAxNTAuMzc4IDE1MC43OTcgMTQ4LjA5N0MxNDguODY4IDE0Ni40OTEgMTM5Ljg2MiAxMzMuMTc1IDEzMC43ODUgMTE4LjUwOEMxMDMuNzE5IDc0Ljc3NDEgOTAuMDYxIDUzLjE2NzYgODkuNzI2NyA1My41NTQ5Qzg2LjY2ODUgNTcuMTAzMyA3OC42NjEgNzIuMzY1NiA3OC42NjEgNzQuNjQ0M0M3OC42NjEgNzYuNTM4IDg0LjQ0NjMgODcuMzAwNCA5My43MjA1IDEwMi42NThDMTAyLjAwMyAxMTYuMzc0IDEwOS41OTQgMTI5LjUyNCAxMTAuNTg5IDEzMS44ODFDMTE0LjQ2NCAxNDEuMDYyIDEwNy43NTQgMTUxLjAxOSA5Ny42ODc3IDE1MS4wMTlDOTQuODQwOSAxNTEuMDE5IDkxLjIxNTEgMTUwLjE3OCA4OS42MzAzIDE0OS4xNTFDODguMDQ1NSAxNDguMTIyIDgwLjk3OTUgMTM3Ljc4IDczLjkyODcgMTI2LjE2OUM2Ni44Nzc4IDExNC41NTYgNjAuNjc0NSAxMDUuMDU1IDYwLjE0MjggMTA1LjA1NUM1OS42MTEgMTA1LjA1NSA1My42OTMzIDExNC4yMzQgNDYuOTkzMSAxMjUuNDUyQzQwLjI5MjkgMTM2LjY2OSAzMy43MjYyIDE0Ni44MTUgMzIuNDAxNSAxNDcuOTk1QzMxLjA3NjcgMTQ5LjE3NiAyNy43MDYzIDE1MC4zOTYgMjQuOTEyOSAxNTAuNzA5QzE1LjgzODQgMTUxLjcyMSA5IDE0NS44NzggOSAxMzcuMTFDOSAxMzIuODQyIDkuMDQ4NzYgMTMyLjc1MiA0My41MzU2IDc0LjAyOTVDNTcuODI1NCA0OS42OTczIDcxLjIyMTIgMjguMDc5MyA3My4zMDQxIDI1Ljk4OTFDODEuMDc3MSAxOC4xODc5IDkyLjg4IDE2Ljk4OTQgMTAyLjU5MyAyMy4wMTNaTTE2Ni45MDEgMjMuMDIzM0MxNzAuMzA4IDI2LjQ4MjEgMjMzLjQ5OSAxMjcuMTE2IDIzNS40NDcgMTMyLjE4NUMyMzguMjU4IDEzOS41MDQgMjM1LjI3NyAxNDYuMzEyIDIyNy42NjUgMTQ5Ljk2QzIyMy41NDcgMTUxLjkzMyAyMjIuMDczIDE1Mi4xMSAyMTguMjQ1IDE1MS4wODlDMjE1Ljc0OSAxNTAuNDI0IDIxMi44NjYgMTQ4Ljk2IDIxMS44MzggMTQ3LjgzNUMyMTAuODA5IDE0Ni43MSAxOTQuNzk2IDEyMS41IDE3Ni4yNTMgOTEuODExOEMxNDAuMDU0IDMzLjg1NyAxNDAuMDQ0IDMzLjgzNTIgMTQ0LjI3NCAyNS43Mzk4QzE0OC4yNjMgMTguMTAxNyAxNjAuNTk0IDE2LjYyMjggMTY2LjkwMSAyMy4wMjMzWiIgZmlsbD0iIzQ4QjVBNyIvPgo8L3N2Zz4K");v(this,"chains",[Zg,v3]);v(this,"features",{"standard:connect":{version:"1.0.0",connect:async()=>{this.bellhop.send("connect");let t=await this.fetch("account");return this.accounts=t,t.length>0&&(this.currentAccount=t[0]),{accounts:t}}},"standard:events":{version:"1.0.0",on:t=>()=>{}},"sui:signMessage":{version:"1.0.0",signMessage:async()=>{throw new Error("No impl")}},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:async()=>{throw new Error("No impl")}},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:async t=>this.proposeIntention(t)},"sui:signAndExecuteTransactionBlock":{version:"1.0.0",signAndExecuteTransactionBlock:async t=>this.proposeIntention(t)}});this.appName=t,this.suiClient=e,this.network=n,this.bellhop.connect(),this.bellhop.on("walletMessage",async i=>{this.walletMessageListener&&this.walletMessageListener.onMessage(i.data)}),this.bellhop.on("accountChange",async i=>{this.currentAccount=i.data,console.log("🚀 ~ MSafeWallet ~ this.bellhop.on ~ currentAccount:",this.currentAccount),this.onAccountChangeListner&&this.onAccountChangeListner.onAccountChange(this.currentAccount)})}setWalletMessageListener(t){this.walletMessageListener=t}setOnAccountChangeListener(t){this.onAccountChangeListner=t}static inMSafeWallet(){return typeof window<"u"&&typeof document<"u"&&typeof parent<"u"&&typeof parent.window<"u"&&parent.window!==window}async proposeIntention(t){if(!this.currentAccount)throw new Error("Wallet not connected");let e=await gq.getAppHelper(this.appName).deserialize({...t,suiClient:this.suiClient,network:this.network,account:this.currentAccount});this.bellhop.send("proposeIntention",{application:this.appName,...e});let n;return this.bellhop.on("cancel",async()=>{n&&n("User canceled")}),new Promise((i,r)=>{n=r})}async fetch(t){return new Promise(e=>{this.bellhop.fetch(t,n=>{e(n.data)})})}};const yq=Sn({setup(t){const e=Ie(()=>Wp.inMSafeWallet()),n=Ni(),i=Ie(()=>n),r=dh();let s=_e(!1);const o=lh(),a=N0(),{t:c,locale:l}=Ko(),u=[{id:"Sui",name:"Sui",env:"",network:"Mainnet"},{id:"Aptos",name:"Aptos",env:"",network:"Mainnet"}],d=[{name:c("contactUS.docs"),icon:"#icon-svg-docs",link:"https://cetus-1.gitbook.io/cetus-docs/"},{name:c("contactUS.twitter"),icon:"#icon-svg-twitter",link:"https://twitter.com/cetusprotocol"},{name:c("contactUS.discord"),icon:"#icon-svg-Discord",link:"https://discord.gg/cetusprotocol"},{name:c("contactUS.tgChannel"),icon:"#icon-svg-tg",link:"https://t.me/cetusprotocol"},{name:c("contactUS.medium"),icon:"#icon-svg-medium",link:"https://medium.com/@CetusProtocol"}],h=on(),f=_e(""),g=Ie(()=>h);let p=_e(g.value.chainName||"Aptos");const w=tg();Hc(()=>{var ze,se,le;const ie=(le=(se=(ze=o==null?void 0:o.currentRoute)==null?void 0:ze.value)==null?void 0:se.query)==null?void 0:le.language;ie&&D(ie);const ke=localStorage.getItem("theme");!ke||ke==="sui"?w.selectSuiTheme():ke==="sui2"?w.selectSui2Theme():w.seleteDefaultTheme(),document.addEventListener("click",()=>{g.value.setOpenH5Icon(!1),g.value.setOpenSwitchChain(!1),g.value.setOpenMore(!1),g.value.setIsShowMore(!1),g.value.setOpenSwitchLang(!1),g.value.setIsShowHeaderMore(!1)}),f.value=l.value,k()});const _=()=>{o.push("/")},k=()=>{window.setInterval(()=>{d[0].name=c("contactUS.docs"),d[1].name=c("contactUS.twitter"),d[2].name=c("contactUS.discord"),d[3].name=c("contactUS.tgChannel"),d[4].name=c("contactUS.medium")},1e3)};Jt(()=>h.lang,ie=>{f.value=ie});const T=Ie(()=>g.value.chainName?en[g.value.chainName]:{}),R=ie=>{var ke,ze,se,le,Ne,he,J,ve,ye,ge,qe,ee,b,j,V,Q,re,Se,Me,Ce,Ve,De,mt,qn,Jn,Ji,er,Ri,ei,nn,ti,_i,dn,Bi,C,m,y,x,F,W,te,nt,jt,It,Rt,wt,io,ro,so,oo,ao,co,lo,uo,ho,fo,po,go;p.value!==ie.id&&(r.setChainPoolConfigList([]),h.setPositiomAmount("--")),p.value!=ie.id&&(p.value=ie.id,ie.id=="Aptos"?(w.seleteDefaultTheme(),n.setCurrentWallet({wallet:i.value.aptosCurrentWallet,isConnected:i.value.aptosConnected,account:i.value.aptosAddress,platform:"Aptos",icon:i.value.aptosWalletIcon})):ie.id=="Sui"?(w.selectSuiTheme(),n.setCurrentWallet({wallet:i.value.suiCurrentWallet,isConnected:i.value.suiConnected,account:i.value.suiAddress,platform:"Sui",icon:i.value.suiWalletIcon})):ie.id==="Sui2"&&(w.selectSui2Theme(),n.setCurrentWallet({wallet:i.value.suiCurrentWallet,isConnected:i.value.suiConnected,account:i.value.suiAddress,platform:"Sui",icon:i.value.suiWalletIcon})),(((ze=(ke=o==null?void 0:o.currentRoute)==null?void 0:ke.value)==null?void 0:ze.name)==="position-detail-id"||((le=(se=o==null?void 0:o.currentRoute)==null?void 0:se.value)==null?void 0:le.name)==="position-detail"||((he=(Ne=o==null?void 0:o.currentRoute)==null?void 0:Ne.value)==null?void 0:he.name)==="remove-liquidity"||((ve=(J=o==null?void 0:o.currentRoute)==null?void 0:J.value)==null?void 0:ve.name)==="increase-liquidity"||((ge=(ye=o==null?void 0:o.currentRoute)==null?void 0:ye.value)==null?void 0:ge.name)==="pool-position"||((ee=(qe=o==null?void 0:o.currentRoute)==null?void 0:qe.value)==null?void 0:ee.name)==="new-position-detail"||((j=(b=o==null?void 0:o.currentRoute)==null?void 0:b.value)==null?void 0:j.name)==="xcetus")&&o.push("/pools"),((Q=(V=o==null?void 0:o.currentRoute)==null?void 0:V.value)==null?void 0:Q.name)==="deposit"&&ie.id=="Sui"&&o.push("/pool/list"),((Se=(re=o==null?void 0:o.currentRoute)==null?void 0:re.value)==null?void 0:Se.name)==="deposit"&&ie.id=="Aptos"&&o.push("/pools"),((Ce=(Me=o==null?void 0:o.currentRoute)==null?void 0:Me.value)==null?void 0:Ce.name)==="pools"&&ie.id=="Cetus"&&o.push("/pool-list"),((De=(Ve=o==null?void 0:o.currentRoute)==null?void 0:Ve.value)==null?void 0:De.name)==="pool/list"&&ie.id=="Aptos"&&o.push("/pools"),((qn=(mt=o==null?void 0:o.currentRoute)==null?void 0:mt.value)==null?void 0:qn.name)==="new-position-detail"&&ie.id=="Aptos"&&o.push("/pools"),((Ji=(Jn=o==null?void 0:o.currentRoute)==null?void 0:Jn.value)==null?void 0:Ji.name)==="new-position-detail"&&ie.id=="Sui"&&o.push("/pool/list"),((Ri=(er=o==null?void 0:o.currentRoute)==null?void 0:er.value)==null?void 0:Ri.name)==="pool-position"&&ie.id=="Aptos"&&o.push("/position"),(nn=(ei=o==null?void 0:o.currentRoute)==null?void 0:ei.value)!=null&&nn.path.includes("/launchpad")&&ie.id=="Aptos"&&o.push("/pools"),((_i=(ti=o==null?void 0:o.currentRoute)==null?void 0:ti.value)!=null&&_i.path.includes("/liquidity/deposit")||(Bi=(dn=o==null?void 0:o.currentRoute)==null?void 0:dn.value)!=null&&Bi.path.includes("/liquidity/position")||(m=(C=o==null?void 0:o.currentRoute)==null?void 0:C.value)!=null&&m.path.includes("/liquidity/analytics")||(x=(y=o==null?void 0:o.currentRoute)==null?void 0:y.value)!=null&&x.path.includes("/liquidity/create")||(W=(F=o==null?void 0:o.currentRoute)==null?void 0:F.value)!=null&&W.path.includes("/vaults-detail")||(nt=(te=o==null?void 0:o.currentRoute)==null?void 0:te.value)!=null&&nt.path.includes("/pool/vaults")||(It=(jt=o==null?void 0:o.currentRoute)==null?void 0:jt.value)!=null&&It.path.includes("/vaults")||(wt=(Rt=o==null?void 0:o.currentRoute)==null?void 0:Rt.value)!=null&&wt.path.includes("/farms"))&&ie.id=="Aptos"&&o.replace("/pools"),((ro=(io=o==null?void 0:o.currentRoute)==null?void 0:io.value)!=null&&ro.path.includes("/liquidity/deposit")||(oo=(so=o==null?void 0:o.currentRoute)==null?void 0:so.value)!=null&&oo.path.includes("/liquidity/position")||(co=(ao=o==null?void 0:o.currentRoute)==null?void 0:ao.value)!=null&&co.path.includes("/liquidity/analytics")||(uo=(lo=o==null?void 0:o.currentRoute)==null?void 0:lo.value)!=null&&uo.path.includes("/liquidity/create")||(fo=(ho=o==null?void 0:o.currentRoute)==null?void 0:ho.value)!=null&&fo.path.includes("/pools"))&&ie.id=="Sui"&&o.push("/pool/list"),((go=(po=o==null?void 0:o.currentRoute)==null?void 0:po.value)==null?void 0:go.name)==="swap"&&o.push("/swap"))},{setLang:E}=h,D=ie=>{E(ie),l.value=ie},B=()=>{h.setIsSelect("head"),g.value.setOpenSwitchChain(!g.value.openSwitchChain),g.value.setOpenMore(!1),g.value.setOpenSwitchLang(!1),g.value.setOpenH5Icon(!1),g.value.setIsShowSetting(!1),g.value.setIsShowMore(!1),g.value.setIsShowNotifi(!1),g.value.setIsShowHeaderMore(!1),i.value.setIsShowWalletCard(!1)};Jt(()=>g.value.isSelect,ie=>{ie!=="head"&&g.value.setOpenSwitchChain(!1)},{immediate:!0});const $=Ie(()=>g.value.chainName&&g.value.chainName.toLowerCase().includes("sui")?g.value.chainName.split("2")[0]:g.value.chainName),Y=_e(!1),z=Ie(()=>g.value.openSwitchChain);return{hasNotifi:Ie(()=>en[$.value].hasNotifi),configure:en,openNotification:Y,openSwitch:B,changeChain:R,currentChain:p,chainList:u,store:g,isRequestCoins:s,importIcon:Et,list:d,gotoHome:_,changeLang:D,langList:Ml,counter:h,config:T,chainName:$,openSwitchChain:z,route:a,wallet:i,isInMsafeWallet:e}}});const Ac=t=>(di("data-v-7d2a1670"),t=t(),hi(),t),_q={key:0},bq={key:0,class:"tips"},vq=Ac(()=>S("img",{src:c_,alt:""},null,-1)),kq=Ac(()=>S("span",null,"Devnet environment is being upgraded. Services can not be accessed temporarily.",-1)),Sq=[vq,kq],Tq={class:"header-con"},Aq={class:"left"},Cq={class:"menu-right"},Iq=["src"],Eq={class:"chain-name"},xq=Ac(()=>S("svg",{"aria-hidden":"true",class:"icon"},[S("use",{"xlink:href":"#icon-icon_on"})],-1)),Mq={key:0,class:"list"},Nq=["onClick"],Oq=["src"],Dq={class:"name"},jq=["src"],Rq={key:1},Bq=Ac(()=>S("div",{class:"info-icon"},[S("svg",{"aria-hidden":"true",class:"icon"},[S("use",{"xlink:href":"#icon-header1"})])],-1)),Pq=Ac(()=>S("div",{class:"current-lang"},[S("svg",{"aria-hidden":"true",class:"icon"},[S("use",{"xlink:href":"#icon-icon-set"})])],-1)),Fq=Ac(()=>S("svg",{"aria-hidden":"true",class:"icon"},[S("use",{"xlink:href":"#icon-icon-menu1"})],-1)),Uq=[Fq];function Lq(t,e,n,i,r,s){var u,d;const o=eR,a=w5,c=iB,l=zB;return((d=(u=t.$route)==null?void 0:u.name)==null?void 0:d.indexOf("403"))>=0?ae("",!0):(P(),U("header",_q,[t.store.theme=="sui"&&t.configure&&t.configure.network=="devnet"?(P(),U("div",bq,Sq)):ae("",!0),S("div",Tq,[S("div",Aq,[S("div",{class:"logo",onClick:e[0]||(e[0]=(...h)=>t.gotoHome&&t.gotoHome(...h))}),Ft(o)]),S("div",Cq,[t.isInMsafeWallet?ae("",!0):(P(),U("div",{key:0,class:"swaichChain",onClick:e[1]||(e[1]=St((...h)=>t.openSwitch&&t.openSwitch(...h),["stop"]))},[S("div",{class:He(t.openSwitchChain?"text rodegText":"text")},[S("img",{src:("importIcon"in t?t.importIcon:et(Et))(`/image/${t.chainName.toLowerCase()}.png`),alt:""},null,8,Iq),S("span",Eq,fe(t.chainName),1),xq],2),t.store.openSwitchChain?(P(),U("div",Mq,[S("p",null,fe(t.$t("common.switchChain")),1),(P(!0),U(tn,null,ln(t.chainList,h=>(P(),U("div",{key:h.id,class:He(h.id==t.chainName?`item-container item-${t.chainName.toLocaleLowerCase()}-active-container`:`item-container item-${t.chainName.toLocaleLowerCase()}-active-container`)},[S("div",{class:"item",onClick:f=>t.changeChain(h)},[S("div",null,[S("img",{src:("importIcon"in t?t.importIcon:et(Et))(`/image/${h.name.toLowerCase()}.png`),alt:""},null,8,Oq),S("span",Dq,fe(h.name),1)]),h.id==t.chainName?(P(),U("img",{key:0,class:"current-chain",src:t.chainName=="Sui"?"/sui-image/icon-selected@3x.png":"/image/aptos-icon-selected@3x.png"},null,8,jq)):ae("",!0)],8,Nq)],2))),128))])):ae("",!0)])),t.isInMsafeWallet?ae("",!0):(P(),U("div",Rq,[Ft(a)])),t.hasNotifi?(P(),U("div",{key:2,class:"noti-fication",onClick:e[4]||(e[4]=St(()=>{t.store.setOpenH5Icon(!1),t.store.setOpenSwitchChain(!1),t.store.setOpenSwitchLang(!1),t.store.setIsShowMore(!1),t.store.setOpenMore(!1),t.store.setIsShowSetting(!1),t.store.setIsShowHeaderMore(!1),t.store.setIsShowNotifi(!t.store.isShowNotifi),t.wallet.setIsShowWalletCard(!1)},["stop"]))},[Bq,t.store&&t.store.isShowNotifi?(P(),xt(c,{key:0,"open-notification":t.store&&t.store.isShowNotifi,onOpenOpenNotification:e[2]||(e[2]=()=>{t.store.setIsShowNotifi(!1)}),onCloseOpenNotification:e[3]||(e[3]=()=>{t.store.setIsShowNotifi(!1)})},null,8,["open-notification"])):ae("",!0)])):ae("",!0),S("div",{class:"switch-lang",onClick:e[6]||(e[6]=St(()=>{t.store.setIsShowSetting(!t.store.isShowSetting),t.store.setOpenH5Icon(!1),t.store.setOpenSwitchChain(!1),t.store.setOpenMore(!1),t.store.setIsShowMore(!1),t.store.setOpenSwitchLang(!1),t.store.setIsShowHeaderMore(!1),t.store.setIsShowNotifi(!1),t.wallet.setIsShowWalletCard(!1)},["stop"]))},[Pq,t.store.isShowSetting?(P(),xt(l,{key:0,onOnClose:e[5]||(e[5]=h=>t.store.setIsShowSetting(!1))})):ae("",!0)]),S("div",{class:"img-box",onClick:e[7]||(e[7]=St(()=>{t.store.setOpenMore(!1),t.store.setOpenSwitchChain(!1),t.store.setOpenSwitchLang(!1),t.store.setIsShowMore(!1),t.store.setIsShowNotifi(!1),t.store.setIsShowSetting(!1),t.store.setOpenH5Icon(!t.store.openH5Icon)},["stop"]))},Uq)])])]))}const $q=yn(yq,[["render",Lq],["__scopeId","data-v-7d2a1670"]]);const zq=Sn({components:{CHead:$q},setup(){var he,J,ve,ye,ge,qe;const t=_e(!0),e=_e(!1),n=N0(),i=tg(),r=Ni(),s=V0();Ie(()=>s),Hc(()=>{var V;setTimeout(()=>{t.value=!1},1e3);const b=qc("Sui").getFullClient(),j=new Wp("cetus",b,((V=en.Sui)==null?void 0:V.network)==="testnet"?"sui:testnet":"sui:mainnet");w3(j)});const{connect:o,disconnect:a}=Kd(),c=on(),l=Ie(()=>c),u=Ie(()=>l.value.chainName?en[l.value.chainName]:{});let d=_e(!1);const h=()=>{c.setTransactionDescText(""),c.setIsShowWaiting(!1)},f=Ie(()=>r);let g=_e(null);Jt(()=>[f.value.address,l.value.chainName],([ee,b])=>{ee&&b&&qc(b).getAccount(ee)},{immediate:!0});const p=()=>{const ee=Kd(),b=localStorage.getItem("chainName"),j=localStorage.getItem(`cetus-${b}-current-wallet`),V=localStorage.getItem(`cetus-${b}-wallet-icon-name`),Q=localStorage.getItem(`cetus-${b}-current-suiwallet`);Wp.inMSafeWallet()?ee.connect("MSafe Wallet","Msafe","Sui","","MSafe Wallet"):j?ee.connect(j,V,b,"",Q):b&&b.toLowerCase().includes("sui")&&ee.disconnect(),g.value=window.setInterval(async()=>{if(f.value.address&&!f.value.loading&&f.value&&f.value.address&&f.value.countdown<f.value.autoRefreshTime&&(r.setCountdown(f.value.countdown+1),f.value.countdown===f.value.autoRefreshTime))try{await qc(l.value.chainName).getAccount(f.value.address)}catch(re){console.log(re,"errorBalance")}},1e4)};Jt(()=>l.value.theme,ee=>{const b=ee==="sui2"?"sui":ee;document.getElementsByTagName("body")[0].className=`theme-${b}`,ee&&(p(),t.value=!0,setTimeout(()=>{t.value=!1},1e3))},{immediate:!0});const w=dh(),_=Ie(()=>w);(he=window==null?void 0:window.aptos)!=null&&he.onNetworkChange&&((J=window==null?void 0:window.aptos)==null||J.onNetworkChange(ee=>{r.setNetwork(ee.networkName)})),(ve=window==null?void 0:window.martian)!=null&&ve.onNetworkChange&&((ye=window==null?void 0:window.martian)==null||ye.onNetworkChange(ee=>r.setNetwork(ee))),(ge=window==null?void 0:window.pontem)!=null&&ge.onNetworkChange&&((qe=window==null?void 0:window.pontem)==null||qe.onNetworkChange(ee=>{r.setNetwork(ee.name)}));const k=lh();H2(),Q2(),Hc(()=>{var b,j;if(window.addEventListener("scroll",ie()),c.getFrontConfig(),n&&n.query&&n.query.source)i.seleteDefaultTheme();else{const V=(b=n==null?void 0:n.query)==null?void 0:b.chain,Q=(j=n==null?void 0:n.query)==null?void 0:j.network,re=V||localStorage.getItem("theme");!re||re&&re.includes("sui")?Q==="testnet"||re==="sui2"?i.selectSui2Theme():i.selectSuiTheme():i.seleteDefaultTheme()}const ee=localStorage.getItem("chainName");localStorage.getItem(`cetus-${ee}-current-wallet`),localStorage.getItem(`cetus-${ee}-wallet-icon-name`),window.setInterval(()=>{w.setRates(l.value.chainName),n.name!=="swap"&&c.getStatsData(l.value.chainName,l.value.filterCoinsObj)},12e4),document.addEventListener("click",()=>{l.value.setIsShowMore(!1),l.value.setOpenMore(!1),l.value.setOpenSwitchLang(!1),l.value.setOpenH5Icon(!1),l.value.setOpenSwitchChain(!1),l.value.setIsShowSetting(!1),l.value.setIsIdoOpenTerm(!1),l.value.setIsOpenExplorer(!1),l.value.setIsShowNotifi(!1),l.value.setIsShowHeaderMore(!1),l.value.setIsShowHeaderEarn(!1),f.value.setIsShowWalletCard(!1)}),window.addEventListener("updateExplorer",V=>{const Q=localStorage.getItem(`${ee}-currentExplorerUrl`);c.setCurrentExplorer(Q)})}),ml(()=>{document.removeEventListener("click",()=>{l.value.setOpenH5Icon(!1),l.value.setOpenSwitchChain(!1),l.value.setOpenMore(!1),l.value.setIsShowMore(!1),l.value.setOpenSwitchLang(!1),l.value.setIsShowSetting(!1),l.value.setIsIdoOpenTerm(!1),l.value.setIsOpenExplorer(!1),l.value.setIsShowNotifi(!1),l.value.setIsShowHeaderMore(!1),l.value.setIsShowHeaderEarn(!1),f.value.setIsShowWalletCard(!1)})}),Jt(()=>l.value.chainName,(ee,b)=>{ee&&ee!==b&&(w.setTokens(ee),w.setChinaTokens(ee),w.setRates(ee),w.getRecommendRanges(ee))},{immediate:!0}),Jt(()=>[l.value.chainName,l.value.filterCoinsObj],(ee,b)=>{ee[0]&&ee[0]!==b[0]&&(b[1]&&ls(b[1])||!b[0]&&!b[1])&&c.getStatsData(ee[0],ee[1])},{immediate:!0}),Jt(()=>[_.value.poolConfigList,l.value.chainName],([ee,b],[j,V])=>{var Q;ee.length!==j.length&&b&&b.toLowerCase().includes((Q=ee[0])==null?void 0:Q.chain)&&w.setPools(ee,b)}),Jt(()=>[l.value.chainName,l.value.filterCoinsObj,n.name,_.value.poolConfigList],([ee,b,j,V])=>{b&&ee&&(j!=="stats"||ee=="Aptos")&&V&&V.length==0&&w.setPoolConfigList(l.value.chainName,b,ee=="Aptos")}),y2(()=>{window.removeEventListener("scroll",ie()),window.clearInterval(g)});const T=()=>{r.setIsShowWalletModal(!1),a()},R=()=>{r.setSwitchWallet(!0)},E=_e(!1);localStorage.getItem("isFirstAccess")||(E.value=!0);const B=()=>{localStorage.setItem("isFirstAccess",!0),E.value=!1};Jt(()=>[_.value.tokensObj,_.value.chinaTokensObj,l.value.chainName],([ee,b,j])=>{if(!ls(ee)&&!ls(b)&&j=="Aptos"){const V=Object.assign(ee,b);w.setAllTokenObj(V)}else!ls(ee)&&j!=="Aptos"&&w.setAllTokenObj(ee)},{immediate:!0,deep:!0});const $=q0(),Y=Ie(()=>$),z=Ie(()=>c),H=()=>{if(z.value.chainName==="Aptos"){const ee=f.value.currentWallet.publicAccount,b=ee.address,j=ee.publicKey;Y.value.initNotifi(b,j,z.value.chainName)}else Y.value.initNotifi(f.value.address,f.value.address,z.value.chainName)};Jt(()=>[z.value.chainName,f.value.address],([ee,b])=>{u.value.hasNotifi&&(b?H():$.setNotifiStatus("logOut")),ee==="Sui"&&n.name=="pool"&&k.push("/pool/list"),ee==="Aptos"&&n.name=="pool"&&k.push("/pools"),ee==="Aptos"&&n.name=="pool-vaults"&&k.replace("/pools"),ee==="Aptos"&&(n.path.includes("/launchpad")||n.path.includes("/xcetus")||n.path.includes("/pool/list")||n.path.includes("/pool/vaults")||n.path.includes("/vaults")||n.path.includes("/farms"))&&k.push("/pools"),ee==="Aptos"&&n.path.includes("/pool/position")&&k.push("/pools"),ee==="Sui"&&n.path.includes("/pools")&&k.push("/pool/list"),n.name=="liquidity"&&k.push("/liquidity/deposit"),ee==="Sui"&&n.name=="position"&&k.push("/pool/list")},{immediate:!0}),Jt(()=>[_.value.tokens,_.value.poolConfigList,z.value.chainName],([ee,b,j])=>{var V,Q;if(ee&&ee.length>0&&b&&b.length>0&&j&&j.toLowerCase().includes((V=ee[0])==null?void 0:V.chain)&&j.toLowerCase().includes((Q=b[0])==null?void 0:Q.chain)){const re=Object.fromEntries(ee.map((Se,Me)=>[Se.address,Se]));w.trappingTokenObj(b,re,j)}},{immediate:!0});const ie=()=>{const ee=document.querySelector(".body-container-bg");ee&&(ee.scrollTop>0&&n.name.includes("pool-list")||n.name.includes("pool-position")?e.value=!0:e.value=!1)},ke=()=>{const ee=document.querySelector(".body-container-bg");ee&&ee.scrollTo({top:0,behavior:"smooth"})},ze=ee=>{let b={};const j=ee.filter(Q=>!Q.is_pause),V={};for(let Q=0;Q<j.length;Q++){const re=j[Q];if(!b[re.routerSymbol]){b[re.routerSymbol]=re,V[re.routerSymbol]={base:re.token_a.address,quote:re.token_b.address,addressMap:new Map([[re.fee_rate,re.address]])};continue}b[re.routerSymbol]&&V[re.routerSymbol].addressMap.set(re.fee_rate,re.address)}return{paths:Object.values(V)}},se=ee=>{let b={};return ee.forEach(j=>{b[j.coin_a_address]={address:j.token_a.address,decimals:j.token_a.decimals},b[j.coin_b_address]={address:j.token_b.address,decimals:j.token_b.decimals}}),{coins:Object.values(b)}},le=$2(),Ne=Ie(()=>le);return Ie(()=>Ne.value.isInitRouter),Jt(()=>[_.value.openPool],async([ee])=>{if(ee&&ee.length>0){const b=ze(ee),j=se(ee);le.initSwapRouter("Sui",b,j)}},{immediate:!0}),{handleScroll:ie,scrollToTop:ke,showScrollTop:e,isRequestCoins:d,config:u,store:l,wallet:f,onSwitch:R,onDisconnect:T,isLoading:t,closeTerm:B,showTerm:E,closeWaitingModal:h}}}),l2=t=>(di("data-v-1203c9fb"),t=t(),hi(),t),qq={key:0,class:"scroll-top-svg"},Vq=l2(()=>S("use",{"xlink:href":"#icon-scroll"},null,-1)),Wq=[Vq],Kq={key:1,class:"web-loading-box"},Zq={key:2,class:"default-container"},Hq={class:"header-container"},Qq={class:"body-container"},Gq={key:0,class:"upgrade-pools-chart"},Yq={key:1,class:"launchpad-banner"},Xq=l2(()=>S("div",{class:"center"},[S("div",{class:"center-text"},[S("p",null,"Cetus Launchpad "),S("span",null,"Discover gems on Sui")])],-1)),Jq=[Xq];function eV(t,e,n,i,r,s){const o=bA,a=kr("c-head"),c=FA,l=_2,u=XA,d=dC,h=kC,f=BC,g=I6,p=V2,w=W6,_=X6,k=s8,T=g8,R=T8;return P(),U("div",null,[t.showScrollTop&&t.$route.name!=="swap"?(P(),U("div",qq,[(P(),U("svg",{"aria-hidden":"true",class:"scrollTop",onClick:e[0]||(e[0]=(...E)=>t.scrollToTop&&t.scrollToTop(...E))},Wq))])):ae("",!0),t.isLoading?(P(),U("div",Kq,[Ft(o)])):(P(),U("div",Zq,[S("div",Hq,[Ft(a)]),S("div",Qq,[S("div",{class:He(["body-container-bg",t.$route.name.indexOf("403")>=0?"body-container-denied":""]),onScroll:e[1]||(e[1]=(...E)=>t.handleScroll&&t.handleScroll(...E))},[t.$route.name.includes("upgrade-pools")||t.$route.name.includes("pool-list")||t.$route.name.includes("pool-position")||t.$route.name.includes("pool-vaults")?(P(),U("div",Gq,[Ft(c)])):ae("",!0),t.$route.name==="launchpad"?(P(),U("div",Yq,Jq)):ae("",!0),S("div",{class:He(["body-container-con",[t.$route.name==="launchpad"||t.$route.name.includes("upgrade-pools")||t.$route.name.includes("pool-list")||t.$route.name.includes("pool-position")||t.$route.name.includes("pool-vaults")?"launchpad-body-container-con":t.$route.name.indexOf("403")>=0?"delMargin":"",t.$route.name==="farms"||t.$route.name==="vaults"?"farms-body-container":""].join("")])},[Ft(l)],2)],34)]),t.isRequestCoins?(P(),xt(u,{key:0,onOnClose:e[2]||(e[2]=E=>t.isRequestCoins=!1)})):ae("",!0),t.store&&t.store.isShowSuccess?(P(),xt(d,{key:1,onOnClose:e[3]||(e[3]=E=>t.store.setIsShowSuccess(!1))})):ae("",!0),t.store&&t.store.isShowRejected?(P(),xt(h,{key:2,onOnClose:e[4]||(e[4]=E=>t.store.setIsShowRejected(!1))})):ae("",!0),t.store&&t.store.isShowWaiting?(P(),xt(f,{key:3,onOnClose:t.closeWaitingModal},null,8,["onOnClose"])):ae("",!0),t.wallet&&t.wallet.isShowWalletModal?(P(),xt(g,{key:4,onOnDisconnect:e[5]||(e[5]=E=>t.onDisconnect()),onOnSwitch:e[6]||(e[6]=E=>t.onSwitch()),onOnClose:e[7]||(e[7]=E=>t.wallet.setIsShowWalletModal(!1))})):ae("",!0),t.showTerm?(P(),xt(p,{key:5,onClose:t.closeTerm},null,8,["onClose"])):ae("",!0),t.store&&t.store.isShowSettingH5?(P(),xt(w,{key:6,onOnClose:e[8]||(e[8]=E=>t.store.setIsShowSettingH5(!1))})):ae("",!0),t.store&&t.store.isShowBuyCrypto?(P(),xt(_,{key:7,onOnClose:e[9]||(e[9]=E=>t.store.setIsShowBuyCrypto(!1))})):ae("",!0),t.store&&t.store.isShowBuyCryptoKODO?(P(),xt(k,{key:8,onOnClose:e[10]||(e[10]=E=>t.store.setIsShowBuyCryptoKODO(!1))})):ae("",!0),t.store&&t.store.isShowBuyCryptoConfirm?(P(),xt(T,{key:9,onClose:e[11]||(e[11]=E=>t.store.setIsShowBuyCryptoConfirm(!1))})):ae("",!0),t.store&&t.store.isShowBuyCryptoSelect?(P(),xt(R,{key:10,onClose:e[12]||(e[12]=E=>t.store.setIsShowBuyCryptoSelect(!1))})):ae("",!0)]))])}const YV=yn(zq,[["render",eV],["__scopeId","data-v-1203c9fb"]]);export{YV as default};
