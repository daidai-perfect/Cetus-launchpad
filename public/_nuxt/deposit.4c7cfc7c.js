import{_ as $a}from"./back.a14b7613.js";import{_ as _a,a as Ia}from"./token-warning-modal.afe2c86b.js";import{_ as Aa,a as Sa}from"./network-tips.c6629d9e.js";import{u as fn,_ as Zt}from"./index.03027a8f.js";import{u as ot,c as _n,D as B,a as go,f as xt,b as Ee,d as $n,e as Le,g as vt,n as Eo,t as Mo,h as jo,i as Ta,s as Kt,p as Bi,j as Fi}from"./pool.8a0325e3.js";import{a as mn,r as L,y as yo,C as Na,m as ne,D as Pe,b as xo,e as pn,o as w,f as S,h as d,v as C,i as be,z as Re,c as ke,x as F,p as Hn,k as Xn,q as Rt,t as un,E as bo,j as Xe,w as Ie,u as ge,F as jn,G as Pr,I as $r,S as _r,B as ko,H as Ma,J as Ei,s as _t,K as Ir,M as ei,L as ni,l as Ar}from"./entry.2d868adc.js";import{i as We}from"./import-icon.de3e6c66.js";import{_ as Ra}from"./assets-card.2408c97c.js";import{_ as Sr,a as Tr,b as La}from"./add-liquidity.aef48f30.js";/* empty css              *//* empty css              *//* empty css              */import{_ as qa}from"./apr-tab.494f20d2.js";import{_ as Ua}from"./apr-tips.e5812cd1.js";/* empty css              */import{p as Oa}from"./precision.a7a6c57b.js";import{_ as Ba}from"./coin-select.38c38ac5.js";import{_ as Fa}from"./status-block.e3a81990.js";import{_ as ti}from"./icon-arrow_2x.948aedb2.js";import{_ as oi}from"./icon-arrow_2x.4ffddb8e.js";import{_ as Nr}from"./coin-pair-name.49f6fd45.js";import{u as Ea}from"./notifi.cd1c7de6.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.e1cf42ba.js";/* empty css              */import"./index.05cb506b.js";import"./img-no-Positions_2x.d8b88062.js";const ja=mn({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const t=L(!1),o=L(null),i=L(0),a=L(20),r=ot(),l=fn(),s=L(!1);yo(()=>{}),Na(()=>{clearInterval(o.value)});const u=()=>{o.value=setInterval(()=>{var _;s.value||i.value<a.value&&(i.value+=1,i.value===a.value&&((_=e==null?void 0:e.poolInfo)!=null&&_.poolAddress&&r.updateCurrentPools(e.poolInfo.poolAddress,l.chainName),i.value=0))},1e3)},f=ne(()=>l.slippage),h=()=>{n.emit("clearAll")},g=()=>{i.value=0,n.emit("clickRefresh")};Pe(()=>e.poolInfo,_=>{_&&!o.value&&u()},{immediate:!0});const M=xo();return{clickRefresh:g,isShowSwapSetting:t,countdown:i,autoRefreshTime:a,slippage:f,clearAll:h,checkNullObj:_n,router:M}}});const Da=e=>(Hn("data-v-f484e6e0"),e=e(),Xn(),e),Ha={class:"title"},Xa={class:"left"},za=Da(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Wa={class:"deposit-progress"};function Va(e,n,t,o,i,a){var s,u;const r=_a,l=Aa;return w(),S("div",Ha,[d("div",Xa,[d("span",null,C(e.poolInfo?e.$t("common.concentratedLiquidity"):(u=(s=e.$route)==null?void 0:s.query)!=null&&u.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),d("div",{class:Re(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[d("div",{class:"slippage-icon",onClick:n[0]||(n[0]=f=>e.isShowSwapSetting=!0)},[za,d("span",null,C(e.slippage)+"%",1)]),d("div",Wa,[be(r,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])],2),e.isShowSwapSetting?(w(),ke(l,{key:0,onOnClose:n[1]||(n[1]=f=>e.isShowSwapSetting=!1)})):F("",!0)])}const Ka=pn(ja,[["render",Va],["__scopeId","data-v-f484e6e0"]]);const Ya=mn({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const n=fn(),t=ne(()=>n),o=L(""),i=L(""),a=L(""),r=ot(),l=ne(()=>r);Pe(()=>[e.coin,l.value.tokensObj],([u,f])=>{var h;u?(i.value=f&&f[u.address]&&((h=f[u.address])==null?void 0:h.labels),o.value=u.name,a.value=u.symbol):(i.value="",o.value="",a.value="")},{immediate:!0,deep:!0});const s=ne(()=>{var u,f,h;return e.coinIcon||((h=(f=l==null?void 0:l.value)==null?void 0:f.tokensObj[(u=e.coin)==null?void 0:u.address])==null?void 0:h.logo_url)||(t.value.theme==="default"?We("/image/coins/unknown.png"):We("/image/coins/sui-unknown.png"))});return{store:t,importIcon:We,coinName:o,coinLabels:i,coinSymbol:a,currentIcon:s}}}),Ga=e=>(Hn("data-v-1d5b1b83"),e=e(),Xn(),e),Qa={class:"coin-block"},Ja={class:"coin-info"},Za={class:"symbol"},xa={key:0,class:"name"},el=Ga(()=>d("div",null,[d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon_on"})])],-1));function nl(e,n,t,o,i,a){const r=Rt("image");return w(),S("div",Qa,[d("div",null,[un(d("img",null,null,512),[[r,e.currentIcon]]),d("div",Ja,[d("div",Za,C(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(w(),S("div",xa,C(e.coin.name)+" "+C(e.coinLabels?`(${e.coinLabels})`:""),1)):F("",!0)])]),el])}const tl=pn(Ya,[["render",nl],["__scopeId","data-v-1d5b1b83"]]),ol=mn({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})}},setup(){const e=fn();return{storeIndex:ne(()=>e)}}});const il={class:"unilateral"},rl={key:0,src:Sr,alt:""},al={key:1,src:Tr,alt:""},ll={key:2};function sl(e,n,t,o,i,a){return w(),S("div",il,[d("div",null,[e.storeIndex.theme=="default"?(w(),S("img",rl)):(w(),S("img",al)),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),S("p",ll,C(e.$t("tips.marketprice")),1)):F("",!0)])])}const ul=pn(ol,[["render",sl],["__scopeId","data-v-d81a96c0"]]),cl=mn({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=fn();return{storeIndex:ne(()=>e)}}});const dl={class:"create-pool-lock"},fl={key:0,src:Sr,alt:""},ml={key:1,src:Tr,alt:""};function pl(e,n,t,o,i,a){return w(),S("div",dl,[d("div",null,[e.storeIndex.theme=="default"?(w(),S("img",fl)):(w(),S("img",ml))])])}const vl=pn(cl,[["render",pl],["__scopeId","data-v-5d070e17"]]);B.config({precision:64,rounding:B.ROUND_DOWN,toExpNeg:-64,toExpPos:64});const hl=mn({props:{minPrice:{type:String,default:""},maxPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},slippage:{type:Number,default:0},currentPrice:{type:Number,default:0},currentPriceReverse:{type:Number,default:0},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""}},setup(e){const n=L(""),t=L(""),o=fn(),i=ne(()=>o),a=ot(),r=ne(()=>a),l=ne(()=>i.value.chainName?go(i.value.chainName):{});console.log(e,"props====>");const s=bo(),u=async()=>{var ae;if(!e.minPrice&&!e.maxPrice)return;const{TickUtil:g,TickMath:M,getNearestTickByTick:_}=l.value,ce=e.poolInfo.token_a.decimals,m=e.poolInfo.token_b.decimals;let I,P,y,p,b,O,z,Q=1,fe=1;const Z=e.poolInfo.current_tick_index;let T=r.value.poolPriceConfigObj&&r.value.poolPriceConfigObj[e.poolInfo.address]&&r.value.poolPriceConfigObj[e.poolInfo.address].recommend_ranges||{};if(e.poolInfo.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&e.poolInfo.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?z=!0:z=!1,e.minPrice==="0"&&e.maxPrice==="∞")y=g.getMinIndex(e.poolInfo.tickSpacing),p=g.getMaxIndex(e.poolInfo.tickSpacing);else if(e.currentPriceTab=="custom"||(ae=s==null?void 0:s.query)!=null&&ae.action){z?(I=Number(e.minPrice),P=Number(e.maxPrice)):(I=1/Number(e.maxPrice),P=1/Number(e.minPrice)),console.log(I,"min===>");try{b=M.priceToTickIndex(new B(I),ce,m)}catch{b=-443636}try{O=M.priceToTickIndex(new B(P),ce,m)}catch{O=443636}I==0&&(b=-443636),console.log(b,"===>minTick"),console.log(e.poolInfo.tickSpacing,"===>props.poolInfo.tickSpacing"),y=_(b,Number(e.poolInfo.tickSpacing)),p=_(O,Number(e.poolInfo.tickSpacing)),console.log(y,p,"===>tick_upper")}else y=T&&T[e.currentPriceTab]&&T[e.currentPriceTab].lower,p=T&&T[e.currentPriceTab]&&T[e.currentPriceTab].upper;if(e.maxPrice==="∞"||Z>y&&Z<p){let le;if(e.fixedFromCoin){const he=new B(1).mul(Math.pow(10,e.fromCoin.decimals)).toString();le=new $n(he)}else{const he=new B(1).mul(Math.pow(10,e.toCoin.decimals)).toString();le=new $n(he)}const{tokenMaxA:oe,tokenMaxB:ie}=await l.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:e.poolInfo.token_a,tokenB:e.poolInfo.token_b,lowerTick:y,upperTick:p,coinAmount:le,iscoinA:z?e.fixedFromCoin:!e.fixedFromCoin,roundUp:!0,slippage:Number(e.slippage)/100,curSqrtPrice:new $n(e.poolInfo.current_sqrt_price)});z?e.fixedFromCoin?fe=Number(ie)>0?ie:"":Q=Number(oe)>0?oe:"":e.fixedFromCoin?fe=oe:Q=ie}else Z>=p?z?(fe=1,Q=0):(Q=1,fe=0):Z<=y&&(z?(fe=0,Q=1):(fe=1,Q=0));const J=Q?Number(Q):0,j=fe?Number(fe):0,G=j+Number(z?J*e.currentPrice:J*e.currentPriceReverse),we=((z?e.currentPrice*J:e.currentPriceReverse*J)/G*100).toFixed(0),V=(j/G*100).toFixed(0);n.value=we,t.value=V};Pe(()=>[e.poolInfo,e.minPrice,e.maxPrice],([g,M,_])=>{console.log("0421####ratio###watch###poolInfo###",g),console.log("0421####ratio###watch###minPrice###",M),console.log("0421####ratio###watch###maxPrice###",_),M&&_&&g&&!_n(g)&&(M!=="0"||_!=="0")?u():(console.log("0421####ratio###watch###clear###"),n.value="",t.value="")},{immediate:!0,deep:!0});let f={};Pe(()=>r.value.RATES,g=>{g&&(f=g)},{immediate:!0});const h=ne(()=>{const g=xt(Number(e.fromCoinAmount)*Number(f&&f[e.fromCoin.address]&&f[e.fromCoin.address].price),2),M=xt(Number(e.toCoinAmount)*Number(f&&f[e.toCoin.address]&&f[e.toCoin.address].price),2);return g!=="--"&&M!=="--"?Number(g)+Number(M):"--"});return console.log(h.value,"totalAmount351"),{fromCoinRatio:n,toCoinRatio:t,totalAmount:h,fixD:xt,addCommom:Ee}}});const gl=e=>(Hn("data-v-09e20536"),e=e(),Xn(),e),yl={class:"deposit-ratio"},bl={class:"lebal"},kl=gl(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),wl={key:0,class:"text"},Cl={key:1},Pl={key:0,class:"deposit-ratio totalAmount"},$l={class:"lebal"},_l={class:"text"};function Il(e,n,t,o,i,a){const r=Pr;return w(),S(jn,null,[d("div",yl,[d("div",bl,[Xe(C(e.$t("newAdd.depositRatio"))+" ",1),be(r,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.$t("newAdd.depositRatioTips")),1)]),default:Ie(()=>[kl]),_:1})]),e.currentPriceTab!=="full range"?(w(),S("div",wl,C(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+C(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+C(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+C(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)):(w(),S("div",Cl," 50% "+C(e.fromCoin&&e.fromCoin.symbol)+" / 50% "+C(e.toCoin&&e.toCoin.symbol),1))]),e.fromCoinAmount&&e.toCoinAmount&&e.totalAmount!==0&&e.totalAmount!=="--"?(w(),S("div",Pl,[d("div",$l,C(e.$t("newAdd.totalAmount")),1),d("div",_l,"$"+C(("addCommom"in e?e.addCommom:ge(Ee))(("fixD"in e?e.fixD:ge(xt))(e.totalAmount,2),2)),1)])):F("",!0)],64)}const Al=pn(hl,[["render",Il],["__scopeId","data-v-09e20536"]]),Sl=mn({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,n){const t=L("");return{inpValue:t,changecurrentPrice:i=>{var r;console.log(i.target.value,"e.target.value"),console.log((r=e.fromCoin)==null?void 0:r.decimals,"==>props.fromCoin?.decimals");const a=new RegExp("[^\\d-]*(\\d*(?:\\.\\d*)?).*$");i.target.value=i.target.value.replace(a,"$1"),t.value=i.target.value,console.log(t.value,"===>inpValue.value"),n.emit("changecurrentPrice",t.value)}}}});const Tl={class:"set-init-price"},Nl={class:"init-price-tips"};function Ml(e,n,t,o,i,a){var l,s,u,f;const r=$r;return w(),S("div",Tl,[be(r,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((s=(l=e.$route)==null?void 0:l.query)!=null&&s.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),d("div",Nl,C((u=e.toCoin)==null?void 0:u.symbol)+" per "+C((f=e.fromCoin)==null?void 0:f.symbol),1)])}const Rl=pn(Sl,[["render",Ml],["__scopeId","data-v-9e71be9e"]]),Ll=-443636;function ji(e,n){const t=ql(e),o=(t-Ll)%n;return o>n/2?t-o+n:t-o}const Mr=new B("1.0001");function ql(e){return e.log(Mr).toDP(0,B.ROUND_HALF_UP).toNumber()}function Di(e){return Mr.pow(e)}const Ul=mn({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const t=L(""),o=L("");let i=L(""),a=L("");const r=bo(),l=fn(),s=ne(()=>l),u=ne(()=>s.value.chainName?go(s.value.chainName):{}),f=()=>{if(Number.isNaN(t.value)||Number(t.value)!==0&&!t.value||!e.poolInfo.tickSpacing)return;const m=ji(new B(t.value.toString()),Number(_.value.tickSpacing)),I=Di(m+Number(_.value.tickSpacing));if(e.pType=="Min"&&Number(I.toString())>=Number(a.value.toString()))return;const P=I.toString();n.emit("onInput",P)},h=()=>{if(Number.isNaN(t.value)||!t.value||!e.poolInfo.tickSpacing)return;const m=ji(new B(t.value),Number(_.value.tickSpacing)),I=Di(m-Number(_.value.tickSpacing)),P=I.toString();e.pType=="Max"&&Number(I)<=Number(i.value)||n.emit("onInput",P)},g=m=>{let I=m.toString().replace(/[^\d.]/g,"");const P=/^\d+(\.\d+)?$/;I.split(".").length>2&&!P.exec(I)&&(I=I.substr(0,I.length-1)),o.value=String(I),console.log(I,"v===>")},M=m=>{var z,Q,fe,Z;const{TickUtil:I,TickMath:P,getNearestTickByTick:y}=u.value;console.log("0519###onBlur###event###",m);const p=m.target.value;console.log("0519###onBlur###value###",p);let b;if(p==="0"){b=-443636,n.emit("onInput","0");return}else{const T=P.priceToTickIndex(new B(p),(z=_.value.token_a)==null?void 0:z.decimals,(Q=_.value.token_b)==null?void 0:Q.decimals);console.log("0519###onBlur###t###",T),b=y(Number(T),Number(_.value.tickSpacing))}console.log("0519###onBlur###tick###",b);const O=P.tickIndexToPrice(new B(b),(fe=_.value.token_a)==null?void 0:fe.decimals,(Z=_.value.token_b)==null?void 0:Z.decimals);console.log("0519###onBlur###price###",O.toString()),n.emit("onInput",O.toString())};Pe(()=>e.defaultMinPrice,(m,I)=>{m!==I&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),i.value=e.defaultMinPrice,console.log(i.value,"props.minPrice.value===>"))},{immediate:!0}),Pe(()=>e.defaultMaxPrice,(m,I)=>{m!==I&&(a.value=e.defaultMaxPrice)},{immediate:!0}),Pe(()=>o.value,m=>{console.log(m,"=sdajlaksjdkldas")},{immediate:!0}),Pe(()=>[e.inputValue,r.query.action],([m])=>{if(console.log(m,"==>newValue"),m&&m!=="0"&&m!=="∞"){t.value=m;const P=m.toString().split(".")[1];o.value=m!=="0"&&m!=="∞"&&P&&P.length>6?Le(m.toString(),6):m.toString()}else(m=="0"||m=="∞"||r.query.action)&&(o.value=m);console.log(o.value,"===> oValue.value")},{immediate:!0});const _=L({});Pe(()=>e.poolInfo,(m,I)=>{m&&(_.value=m)},{immediate:!0});const ce=L("");return Pe(()=>e.currentPriceTab,m=>{ce.value=m},{immediate:!0}),console.log(e,"props=======>"),{addPrice:f,minusPrice:h,oValue:o,changeValue:g,isDisabled:ce,route:r,onBlur:M}}});const Ol={class:"set-price-item"},Bl={class:"title"},Fl={class:"input-box"},El={class:"minus-btn"},jl=["disabled"],Dl={class:"plus-btn"};function Hl(e,n,t,o,i,a){const r=$r,l=_r;return w(),S("div",Ol,[d("div",Bl,C(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),be(l,{loading:e.loading,active:"",paragraph:!1},{default:Ie(()=>[d("div",Fl,[d("a",El,[d("div",{class:Re(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:n[0]||(n[0]=(...s)=>e.minusPrice&&e.minusPrice(...s))},null,10,jl)]),be(r,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=s=>e.oValue=s),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=s=>e.changeValue(s.target.value)),onBlur:n[3]||(n[3]=s=>e.onBlur(s))},null,8,["value","disabled"]),d("a",Dl,[d("div",{class:Re(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[4]||(n[4]=(...s)=>e.addPrice&&e.addPrice(...s))},null,2)])])]),_:1},8,["loading"]),d("p",{class:Re(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},C(e.toCoin&&e.toCoin.symbol)+" per "+C(e.fromCoin&&e.fromCoin.symbol),3)])}const Hi=pn(Ul,[["render",Hl],["__scopeId","data-v-b9504efe"]]),Xl=mn({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let t=L(""),o=L(""),i=L(),a=L(!1),r=L(!1);const l=L({}),s=fn(),u=ne(()=>s);yo(()=>{t.value=e.min,o.value=e.max}),Pe(()=>e.currentPriceTab,(m,I)=>{m!==I&&(i.value=e.currentPriceTab)},{immediate:!0}),Pe(()=>e.min,(m,I)=>{m!==I&&(t.value=m,console.log(e.min,"===> props.min"))}),Pe(()=>e.max,(m,I)=>{m!==I&&(o.value=m)}),Pe(()=>e.poolInfo,(m,I)=>{m&&(l.value=m)},{immediate:!0});const f=L("");Pe(()=>e.intPrice,m=>{console.log(e.intPrice,"===>props.intPrice"),f.value=m},{immediate:!0,deep:!0});const h=m=>{console.log(m,"val===>123"),t.value=m,n.emit("onChangeMinPrice",m)},g=m=>{o.value=m,n.emit("onChangeMaxPrice",m)};Pe(a,(m,I)=>{m!==I&&n.emit("onChangeFullRange",m)});const M=()=>{t.value=e.defaultMinPrice,o.value=e.defaultMaxPrice,r.value=!1,a.value=!1},_=()=>{r.value=!1,t.value="0",o.value="∞"};return Pe(a,(m,I)=>{m!==I&&n.emit("onChangeFullRange",m)}),{store:u,changeMinPrice:h,changeMaxPrice:g,importIcon:We,resetPrice:M,changeShowUnderStand:()=>{a.value=!a.value,a.value?r.value=!0:M(),r.value||(t.value=e.defaultMinPrice,o.value=e.defaultMaxPrice)},showUnderStand:r,minPrice:t,maxPrice:o,understand:_,isRadio:a,initPirce:f}}});const zl={class:"set-price"},Wl={class:"card-container"},Vl={key:0,class:"card"},Kl=["src"],Yl={key:1,class:"understand"},Gl={class:"left"},Ql={class:"right"};function Jl(e,n,t,o,i,a){const r=Hi,l=Hi,s=ko;return w(),S("div",zl,[d("div",Wl,[e.showUnderStand?(w(),S("div",Yl,[d("div",Gl,[d("p",null,C(e.$t("common.lowerEfficiency")),1),d("p",null,C(e.$t("common.lowerEfficiencyTips")),1)]),d("div",Ql,[be(s,{onClick:e.understand},{default:Ie(()=>[Xe(C(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(w(),S("div",Vl,[be(r,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),be(l,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),d("img",{src:("importIcon"in e?e.importIcon:ge(We))("/image/lmg-line@2x.png"),alt:""},null,8,Kl)]))])])}const Zl=pn(Xl,[["render",Jl],["__scopeId","data-v-d07618c3"]]);function eo(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function xl(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Rr(e){let n,t,o;e.length!==2?(n=eo,t=(l,s)=>eo(e(l),s),o=(l,s)=>e(l)-s):(n=e===eo||e===xl?e:es,t=e,o=e);function i(l,s,u=0,f=l.length){if(u<f){if(n(s,s)!==0)return f;do{const h=u+f>>>1;t(l[h],s)<0?u=h+1:f=h}while(u<f)}return u}function a(l,s,u=0,f=l.length){if(u<f){if(n(s,s)!==0)return f;do{const h=u+f>>>1;t(l[h],s)<=0?u=h+1:f=h}while(u<f)}return u}function r(l,s,u=0,f=l.length){const h=i(l,s,u,f-1);return h>u&&o(l[h-1],s)>-o(l[h],s)?h-1:h}return{left:i,center:r,right:a}}function es(){return 0}function ns(e){return e===null?NaN:+e}const ts=Rr(eo),os=ts.right;Rr(ns).center;const is=os;class Xi extends Map{constructor(n,t=ls){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),n!=null)for(const[o,i]of n)this.set(o,i)}get(n){return super.get(zi(this,n))}has(n){return super.has(zi(this,n))}set(n,t){return super.set(rs(this,n),t)}delete(n){return super.delete(as(this,n))}}function zi({_intern:e,_key:n},t){const o=n(t);return e.has(o)?e.get(o):t}function rs({_intern:e,_key:n},t){const o=n(t);return e.has(o)?e.get(o):(e.set(o,t),t)}function as({_intern:e,_key:n},t){const o=n(t);return e.has(o)&&(t=e.get(o),e.delete(o)),t}function ls(e){return e!==null&&typeof e=="object"?e.valueOf():e}const ss=Math.sqrt(50),us=Math.sqrt(10),cs=Math.sqrt(2);function ro(e,n,t){const o=(n-e)/Math.max(0,t),i=Math.floor(Math.log10(o)),a=o/Math.pow(10,i),r=a>=ss?10:a>=us?5:a>=cs?2:1;let l,s,u;return i<0?(u=Math.pow(10,-i)/r,l=Math.round(e*u),s=Math.round(n*u),l/u<e&&++l,s/u>n&&--s,u=-u):(u=Math.pow(10,i)*r,l=Math.round(e/u),s=Math.round(n/u),l*u<e&&++l,s*u>n&&--s),s<l&&.5<=t&&t<2?ro(e,n,t*2):[l,s,u]}function ds(e,n,t){if(n=+n,e=+e,t=+t,!(t>0))return[];if(e===n)return[e];const o=n<e,[i,a,r]=o?ro(n,e,t):ro(e,n,t);if(!(a>=i))return[];const l=a-i+1,s=new Array(l);if(o)if(r<0)for(let u=0;u<l;++u)s[u]=(a-u)/-r;else for(let u=0;u<l;++u)s[u]=(a-u)*r;else if(r<0)for(let u=0;u<l;++u)s[u]=(i+u)/-r;else for(let u=0;u<l;++u)s[u]=(i+u)*r;return s}function Do(e,n,t){return n=+n,e=+e,t=+t,ro(e,n,t)[2]}function fs(e,n,t){n=+n,e=+e,t=+t;const o=n<e,i=o?Do(n,e,t):Do(e,n,t);return(o?-1:1)*(i<0?1/-i:i)}function ms(e,n){let t;if(n===void 0)for(const o of e)o!=null&&(t<o||t===void 0&&o>=o)&&(t=o);else{let o=-1;for(let i of e)(i=n(i,++o,e))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function ps(e,n,t){e=+e,n=+n,t=(i=arguments.length)<2?(n=e,e=0,1):i<3?1:+t;for(var o=-1,i=Math.max(0,Math.ceil((n-e)/t))|0,a=new Array(i);++o<i;)a[o]=e+o*t;return a}var vs={value:()=>{}};function ii(){for(var e=0,n=arguments.length,t={},o;e<n;++e){if(!(o=arguments[e]+"")||o in t||/[\s.]/.test(o))throw new Error("illegal type: "+o);t[o]=[]}return new no(t)}function no(e){this._=e}function hs(e,n){return e.trim().split(/^|\s+/).map(function(t){var o="",i=t.indexOf(".");if(i>=0&&(o=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:o}})}no.prototype=ii.prototype={constructor:no,on:function(e,n){var t=this._,o=hs(e+"",t),i,a=-1,r=o.length;if(arguments.length<2){for(;++a<r;)if((i=(e=o[a]).type)&&(i=gs(t[i],e.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<r;)if(i=(e=o[a]).type)t[i]=Wi(t[i],e.name,n);else if(n==null)for(i in t)t[i]=Wi(t[i],e.name,null);return this},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new no(e)},call:function(e,n){if((i=arguments.length-2)>0)for(var t=new Array(i),o=0,i,a;o<i;++o)t[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(n,t)}};function gs(e,n){for(var t=0,o=e.length,i;t<o;++t)if((i=e[t]).name===n)return i.value}function Wi(e,n,t){for(var o=0,i=e.length;o<i;++o)if(e[o].name===n){e[o]=vs,e=e.slice(0,o).concat(e.slice(o+1));break}return t!=null&&e.push({name:n,value:t}),e}var Ho="http://www.w3.org/1999/xhtml";const Vi={svg:"http://www.w3.org/2000/svg",xhtml:Ho,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wo(e){var n=e+="",t=n.indexOf(":");return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),Vi.hasOwnProperty(n)?{space:Vi[n],local:e}:e}function ys(e){return function(){var n=this.ownerDocument,t=this.namespaceURI;return t===Ho&&n.documentElement.namespaceURI===Ho?n.createElement(e):n.createElementNS(t,e)}}function bs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lr(e){var n=wo(e);return(n.local?bs:ys)(n)}function ks(){}function ri(e){return e==null?ks:function(){return this.querySelector(e)}}function ws(e){typeof e!="function"&&(e=ri(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var a=n[i],r=a.length,l=o[i]=new Array(r),s,u,f=0;f<r;++f)(s=a[f])&&(u=e.call(s,s.__data__,f,a))&&("__data__"in s&&(u.__data__=s.__data__),l[f]=u);return new gn(o,this._parents)}function Cs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ps(){return[]}function qr(e){return e==null?Ps:function(){return this.querySelectorAll(e)}}function $s(e){return function(){return Cs(e.apply(this,arguments))}}function _s(e){typeof e=="function"?e=$s(e):e=qr(e);for(var n=this._groups,t=n.length,o=[],i=[],a=0;a<t;++a)for(var r=n[a],l=r.length,s,u=0;u<l;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),i.push(s));return new gn(o,i)}function Ur(e){return function(){return this.matches(e)}}function Or(e){return function(n){return n.matches(e)}}var Is=Array.prototype.find;function As(e){return function(){return Is.call(this.children,e)}}function Ss(){return this.firstElementChild}function Ts(e){return this.select(e==null?Ss:As(typeof e=="function"?e:Or(e)))}var Ns=Array.prototype.filter;function Ms(){return Array.from(this.children)}function Rs(e){return function(){return Ns.call(this.children,e)}}function Ls(e){return this.selectAll(e==null?Ms:Rs(typeof e=="function"?e:Or(e)))}function qs(e){typeof e!="function"&&(e=Ur(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var a=n[i],r=a.length,l=o[i]=[],s,u=0;u<r;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new gn(o,this._parents)}function Br(e){return new Array(e.length)}function Us(){return new gn(this._enter||this._groups.map(Br),this._parents)}function ao(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}ao.prototype={constructor:ao,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Os(e){return function(){return e}}function Bs(e,n,t,o,i,a){for(var r=0,l,s=n.length,u=a.length;r<u;++r)(l=n[r])?(l.__data__=a[r],o[r]=l):t[r]=new ao(e,a[r]);for(;r<s;++r)(l=n[r])&&(i[r]=l)}function Fs(e,n,t,o,i,a,r){var l,s,u=new Map,f=n.length,h=a.length,g=new Array(f),M;for(l=0;l<f;++l)(s=n[l])&&(g[l]=M=r.call(s,s.__data__,l,n)+"",u.has(M)?i[l]=s:u.set(M,s));for(l=0;l<h;++l)M=r.call(e,a[l],l,a)+"",(s=u.get(M))?(o[l]=s,s.__data__=a[l],u.delete(M)):t[l]=new ao(e,a[l]);for(l=0;l<f;++l)(s=n[l])&&u.get(g[l])===s&&(i[l]=s)}function Es(e){return e.__data__}function js(e,n){if(!arguments.length)return Array.from(this,Es);var t=n?Fs:Bs,o=this._parents,i=this._groups;typeof e!="function"&&(e=Os(e));for(var a=i.length,r=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var f=o[u],h=i[u],g=h.length,M=Ds(e.call(f,f&&f.__data__,u,o)),_=M.length,ce=l[u]=new Array(_),m=r[u]=new Array(_),I=s[u]=new Array(g);t(f,h,ce,m,I,M,n);for(var P=0,y=0,p,b;P<_;++P)if(p=ce[P]){for(P>=y&&(y=P+1);!(b=m[y])&&++y<_;);p._next=b||null}}return r=new gn(r,o),r._enter=l,r._exit=s,r}function Ds(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hs(){return new gn(this._exit||this._groups.map(Br),this._parents)}function Xs(e,n,t){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(i=n(i),i&&(i=i.selection())),t==null?a.remove():t(a),o&&i?o.merge(i).order():i}function zs(e){for(var n=e.selection?e.selection():e,t=this._groups,o=n._groups,i=t.length,a=o.length,r=Math.min(i,a),l=new Array(i),s=0;s<r;++s)for(var u=t[s],f=o[s],h=u.length,g=l[s]=new Array(h),M,_=0;_<h;++_)(M=u[_]||f[_])&&(g[_]=M);for(;s<i;++s)l[s]=t[s];return new gn(l,this._parents)}function Ws(){for(var e=this._groups,n=-1,t=e.length;++n<t;)for(var o=e[n],i=o.length-1,a=o[i],r;--i>=0;)(r=o[i])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function Vs(e){e||(e=Ks);function n(h,g){return h&&g?e(h.__data__,g.__data__):!h-!g}for(var t=this._groups,o=t.length,i=new Array(o),a=0;a<o;++a){for(var r=t[a],l=r.length,s=i[a]=new Array(l),u,f=0;f<l;++f)(u=r[f])&&(s[f]=u);s.sort(n)}return new gn(i,this._parents).order()}function Ks(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Ys(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Gs(){return Array.from(this)}function Qs(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],i=0,a=o.length;i<a;++i){var r=o[i];if(r)return r}return null}function Js(){let e=0;for(const n of this)++e;return e}function Zs(){return!this.node()}function xs(e){for(var n=this._groups,t=0,o=n.length;t<o;++t)for(var i=n[t],a=0,r=i.length,l;a<r;++a)(l=i[a])&&e.call(l,l.__data__,a,i);return this}function eu(e){return function(){this.removeAttribute(e)}}function nu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tu(e,n){return function(){this.setAttribute(e,n)}}function ou(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function iu(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function ru(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function au(e,n){var t=wo(e);if(arguments.length<2){var o=this.node();return t.local?o.getAttributeNS(t.space,t.local):o.getAttribute(t)}return this.each((n==null?t.local?nu:eu:typeof n=="function"?t.local?ru:iu:t.local?ou:tu)(t,n))}function Fr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lu(e){return function(){this.style.removeProperty(e)}}function su(e,n,t){return function(){this.style.setProperty(e,n,t)}}function uu(e,n,t){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,t)}}function cu(e,n,t){return arguments.length>1?this.each((n==null?lu:typeof n=="function"?uu:su)(e,n,t??"")):ht(this.node(),e)}function ht(e,n){return e.style.getPropertyValue(n)||Fr(e).getComputedStyle(e,null).getPropertyValue(n)}function du(e){return function(){delete this[e]}}function fu(e,n){return function(){this[e]=n}}function mu(e,n){return function(){var t=n.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function pu(e,n){return arguments.length>1?this.each((n==null?du:typeof n=="function"?mu:fu)(e,n)):this.node()[e]}function Er(e){return e.trim().split(/^|\s+/)}function ai(e){return e.classList||new jr(e)}function jr(e){this._node=e,this._names=Er(e.getAttribute("class")||"")}jr.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Dr(e,n){for(var t=ai(e),o=-1,i=n.length;++o<i;)t.add(n[o])}function Hr(e,n){for(var t=ai(e),o=-1,i=n.length;++o<i;)t.remove(n[o])}function vu(e){return function(){Dr(this,e)}}function hu(e){return function(){Hr(this,e)}}function gu(e,n){return function(){(n.apply(this,arguments)?Dr:Hr)(this,e)}}function yu(e,n){var t=Er(e+"");if(arguments.length<2){for(var o=ai(this.node()),i=-1,a=t.length;++i<a;)if(!o.contains(t[i]))return!1;return!0}return this.each((typeof n=="function"?gu:n?vu:hu)(t,n))}function bu(){this.textContent=""}function ku(e){return function(){this.textContent=e}}function wu(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function Cu(e){return arguments.length?this.each(e==null?bu:(typeof e=="function"?wu:ku)(e)):this.node().textContent}function Pu(){this.innerHTML=""}function $u(e){return function(){this.innerHTML=e}}function _u(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function Iu(e){return arguments.length?this.each(e==null?Pu:(typeof e=="function"?_u:$u)(e)):this.node().innerHTML}function Au(){this.nextSibling&&this.parentNode.appendChild(this)}function Su(){return this.each(Au)}function Tu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nu(){return this.each(Tu)}function Mu(e){var n=typeof e=="function"?e:Lr(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Ru(){return null}function Lu(e,n){var t=typeof e=="function"?e:Lr(e),o=n==null?Ru:typeof n=="function"?n:ri(n);return this.select(function(){return this.insertBefore(t.apply(this,arguments),o.apply(this,arguments)||null)})}function qu(){var e=this.parentNode;e&&e.removeChild(this)}function Uu(){return this.each(qu)}function Ou(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Bu(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Fu(e){return this.select(e?Bu:Ou)}function Eu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ju(e){return function(n){e.call(this,n,this.__data__)}}function Du(e){return e.trim().split(/^|\s+/).map(function(n){var t="",o=n.indexOf(".");return o>=0&&(t=n.slice(o+1),n=n.slice(0,o)),{type:n,name:t}})}function Hu(e){return function(){var n=this.__on;if(n){for(var t=0,o=-1,i=n.length,a;t<i;++t)a=n[t],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):n[++o]=a;++o?n.length=o:delete this.__on}}}function Xu(e,n,t){return function(){var o=this.__on,i,a=ju(n);if(o){for(var r=0,l=o.length;r<l;++r)if((i=o[r]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=t),i.value=n;return}}this.addEventListener(e.type,a,t),i={type:e.type,name:e.name,value:n,listener:a,options:t},o?o.push(i):this.__on=[i]}}function zu(e,n,t){var o=Du(e+""),i,a=o.length,r;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,f;s<u;++s)for(i=0,f=l[s];i<a;++i)if((r=o[i]).type===f.type&&r.name===f.name)return f.value}return}for(l=n?Xu:Hu,i=0;i<a;++i)this.each(l(o[i],n,t));return this}function Xr(e,n,t){var o=Fr(e),i=o.CustomEvent;typeof i=="function"?i=new i(n,t):(i=o.document.createEvent("Event"),t?(i.initEvent(n,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(n,!1,!1)),e.dispatchEvent(i)}function Wu(e,n){return function(){return Xr(this,e,n)}}function Vu(e,n){return function(){return Xr(this,e,n.apply(this,arguments))}}function Ku(e,n){return this.each((typeof n=="function"?Vu:Wu)(e,n))}function*Yu(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],i=0,a=o.length,r;i<a;++i)(r=o[i])&&(yield r)}var zr=[null];function gn(e,n){this._groups=e,this._parents=n}function Lt(){return new gn([[document.documentElement]],zr)}function Gu(){return this}gn.prototype=Lt.prototype={constructor:gn,select:ws,selectAll:_s,selectChild:Ts,selectChildren:Ls,filter:qs,data:js,enter:Us,exit:Hs,join:Xs,merge:zs,selection:Gu,order:Ws,sort:Vs,call:Ys,nodes:Gs,node:Qs,size:Js,empty:Zs,each:xs,attr:au,style:cu,property:pu,classed:yu,text:Cu,html:Iu,raise:Su,lower:Nu,append:Mu,insert:Lu,remove:Uu,clone:Fu,datum:Eu,on:zu,dispatch:Ku,[Symbol.iterator]:Yu};function An(e){return typeof e=="string"?new gn([[document.querySelector(e)]],[document.documentElement]):new gn([[e]],zr)}function Qu(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Ki(e,n){if(e=Qu(e),n===void 0&&(n=e.currentTarget),n){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[e.clientX-i.left-n.clientLeft,e.clientY-i.top-n.clientTop]}}return[e.pageX,e.pageY]}const Xo={capture:!0,passive:!1};function zo(e){e.preventDefault(),e.stopImmediatePropagation()}function Ju(e){var n=e.document.documentElement,t=An(e).on("dragstart.drag",zo,Xo);"onselectstart"in n?t.on("selectstart.drag",zo,Xo):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Zu(e,n){var t=e.document.documentElement,o=An(e).on("dragstart.drag",null);n&&(o.on("click.drag",zo,Xo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in t?o.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function li(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function Wr(e,n){var t=Object.create(e.prototype);for(var o in n)t[o]=n[o];return t}function qt(){}var Tt=.7,lo=1/Tt,pt="\\s*([+-]?\\d+)\\s*",Nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xu=/^#([0-9a-f]{3,8})$/,ec=new RegExp(`^rgb\\(${pt},${pt},${pt}\\)$`),nc=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),tc=new RegExp(`^rgba\\(${pt},${pt},${pt},${Nt}\\)$`),oc=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${Nt}\\)$`),ic=new RegExp(`^hsl\\(${Nt},${Nn},${Nn}\\)$`),rc=new RegExp(`^hsla\\(${Nt},${Nn},${Nn},${Nt}\\)$`),Yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};li(qt,nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gi,formatHex:Gi,formatHex8:ac,formatHsl:lc,formatRgb:Qi,toString:Qi});function Gi(){return this.rgb().formatHex()}function ac(){return this.rgb().formatHex8()}function lc(){return Vr(this).formatHsl()}function Qi(){return this.rgb().formatRgb()}function nt(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=xu.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?Ji(n):t===3?new dn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?Yt(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?Yt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=ec.exec(e))?new dn(n[1],n[2],n[3],1):(n=nc.exec(e))?new dn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=tc.exec(e))?Yt(n[1],n[2],n[3],n[4]):(n=oc.exec(e))?Yt(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=ic.exec(e))?er(n[1],n[2]/100,n[3]/100,1):(n=rc.exec(e))?er(n[1],n[2]/100,n[3]/100,n[4]):Yi.hasOwnProperty(e)?Ji(Yi[e]):e==="transparent"?new dn(NaN,NaN,NaN,0):null}function Ji(e){return new dn(e>>16&255,e>>8&255,e&255,1)}function Yt(e,n,t,o){return o<=0&&(e=n=t=NaN),new dn(e,n,t,o)}function sc(e){return e instanceof qt||(e=nt(e)),e?(e=e.rgb(),new dn(e.r,e.g,e.b,e.opacity)):new dn}function Wo(e,n,t,o){return arguments.length===1?sc(e):new dn(e,n,t,o??1)}function dn(e,n,t,o){this.r=+e,this.g=+n,this.b=+t,this.opacity=+o}li(dn,Wo,Wr(qt,{brighter(e){return e=e==null?lo:Math.pow(lo,e),new dn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Tt:Math.pow(Tt,e),new dn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dn(et(this.r),et(this.g),et(this.b),so(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zi,formatHex:Zi,formatHex8:uc,formatRgb:xi,toString:xi}));function Zi(){return`#${xn(this.r)}${xn(this.g)}${xn(this.b)}`}function uc(){return`#${xn(this.r)}${xn(this.g)}${xn(this.b)}${xn((isNaN(this.opacity)?1:this.opacity)*255)}`}function xi(){const e=so(this.opacity);return`${e===1?"rgb(":"rgba("}${et(this.r)}, ${et(this.g)}, ${et(this.b)}${e===1?")":`, ${e})`}`}function so(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function et(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xn(e){return e=et(e),(e<16?"0":"")+e.toString(16)}function er(e,n,t,o){return o<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new Sn(e,n,t,o)}function Vr(e){if(e instanceof Sn)return new Sn(e.h,e.s,e.l,e.opacity);if(e instanceof qt||(e=nt(e)),!e)return new Sn;if(e instanceof Sn)return e;e=e.rgb();var n=e.r/255,t=e.g/255,o=e.b/255,i=Math.min(n,t,o),a=Math.max(n,t,o),r=NaN,l=a-i,s=(a+i)/2;return l?(n===a?r=(t-o)/l+(t<o)*6:t===a?r=(o-n)/l+2:r=(n-t)/l+4,l/=s<.5?a+i:2-a-i,r*=60):l=s>0&&s<1?0:r,new Sn(r,l,s,e.opacity)}function cc(e,n,t,o){return arguments.length===1?Vr(e):new Sn(e,n,t,o??1)}function Sn(e,n,t,o){this.h=+e,this.s=+n,this.l=+t,this.opacity=+o}li(Sn,cc,Wr(qt,{brighter(e){return e=e==null?lo:Math.pow(lo,e),new Sn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Tt:Math.pow(Tt,e),new Sn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,o=t+(t<.5?t:1-t)*n,i=2*t-o;return new dn(Ro(e>=240?e-240:e+120,i,o),Ro(e,i,o),Ro(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Sn(nr(this.h),Gt(this.s),Gt(this.l),so(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=so(this.opacity);return`${e===1?"hsl(":"hsla("}${nr(this.h)}, ${Gt(this.s)*100}%, ${Gt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nr(e){return e=(e||0)%360,e<0?e+360:e}function Gt(e){return Math.max(0,Math.min(1,e||0))}function Ro(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}const si=e=>()=>e;function dc(e,n){return function(t){return e+t*n}}function fc(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(o){return Math.pow(e+o*n,t)}}function mc(e){return(e=+e)==1?Kr:function(n,t){return t-n?fc(n,t,e):si(isNaN(n)?t:n)}}function Kr(e,n){var t=n-e;return t?dc(e,t):si(isNaN(e)?n:e)}const uo=function e(n){var t=mc(n);function o(i,a){var r=t((i=Wo(i)).r,(a=Wo(a)).r),l=t(i.g,a.g),s=t(i.b,a.b),u=Kr(i.opacity,a.opacity);return function(f){return i.r=r(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return o.gamma=e,o}(1);function pc(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,o=n.slice(),i;return function(a){for(i=0;i<t;++i)o[i]=e[i]*(1-a)+n[i]*a;return o}}function vc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hc(e,n){var t=n?n.length:0,o=e?Math.min(t,e.length):0,i=new Array(o),a=new Array(t),r;for(r=0;r<o;++r)i[r]=Co(e[r],n[r]);for(;r<t;++r)a[r]=n[r];return function(l){for(r=0;r<o;++r)a[r]=i[r](l);return a}}function gc(e,n){var t=new Date;return e=+e,n=+n,function(o){return t.setTime(e*(1-o)+n*o),t}}function In(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function yc(e,n){var t={},o={},i;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in e?t[i]=Co(e[i],n[i]):o[i]=n[i];return function(a){for(i in t)o[i]=t[i](a);return o}}var Vo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lo=new RegExp(Vo.source,"g");function bc(e){return function(){return e}}function kc(e){return function(n){return e(n)+""}}function Yr(e,n){var t=Vo.lastIndex=Lo.lastIndex=0,o,i,a,r=-1,l=[],s=[];for(e=e+"",n=n+"";(o=Vo.exec(e))&&(i=Lo.exec(n));)(a=i.index)>t&&(a=n.slice(t,a),l[r]?l[r]+=a:l[++r]=a),(o=o[0])===(i=i[0])?l[r]?l[r]+=i:l[++r]=i:(l[++r]=null,s.push({i:r,x:In(o,i)})),t=Lo.lastIndex;return t<n.length&&(a=n.slice(t),l[r]?l[r]+=a:l[++r]=a),l.length<2?s[0]?kc(s[0].x):bc(n):(n=s.length,function(u){for(var f=0,h;f<n;++f)l[(h=s[f]).i]=h.x(u);return l.join("")})}function Co(e,n){var t=typeof n,o;return n==null||t==="boolean"?si(n):(t==="number"?In:t==="string"?(o=nt(n))?(n=o,uo):Yr:n instanceof nt?uo:n instanceof Date?gc:vc(n)?pc:Array.isArray(n)?hc:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?yc:In)(e,n)}function wc(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var tr=180/Math.PI,Ko={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gr(e,n,t,o,i,a){var r,l,s;return(r=Math.sqrt(e*e+n*n))&&(e/=r,n/=r),(s=e*t+n*o)&&(t-=e*s,o-=n*s),(l=Math.sqrt(t*t+o*o))&&(t/=l,o/=l,s/=l),e*o<n*t&&(e=-e,n=-n,s=-s,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(n,e)*tr,skewX:Math.atan(s)*tr,scaleX:r,scaleY:l}}var Qt;function Cc(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Ko:Gr(n.a,n.b,n.c,n.d,n.e,n.f)}function Pc(e){return e==null||(Qt||(Qt=document.createElementNS("http://www.w3.org/2000/svg","g")),Qt.setAttribute("transform",e),!(e=Qt.transform.baseVal.consolidate()))?Ko:(e=e.matrix,Gr(e.a,e.b,e.c,e.d,e.e,e.f))}function Qr(e,n,t,o){function i(u){return u.length?u.pop()+" ":""}function a(u,f,h,g,M,_){if(u!==h||f!==g){var ce=M.push("translate(",null,n,null,t);_.push({i:ce-4,x:In(u,h)},{i:ce-2,x:In(f,g)})}else(h||g)&&M.push("translate("+h+n+g+t)}function r(u,f,h,g){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),g.push({i:h.push(i(h)+"rotate(",null,o)-2,x:In(u,f)})):f&&h.push(i(h)+"rotate("+f+o)}function l(u,f,h,g){u!==f?g.push({i:h.push(i(h)+"skewX(",null,o)-2,x:In(u,f)}):f&&h.push(i(h)+"skewX("+f+o)}function s(u,f,h,g,M,_){if(u!==h||f!==g){var ce=M.push(i(M)+"scale(",null,",",null,")");_.push({i:ce-4,x:In(u,h)},{i:ce-2,x:In(f,g)})}else(h!==1||g!==1)&&M.push(i(M)+"scale("+h+","+g+")")}return function(u,f){var h=[],g=[];return u=e(u),f=e(f),a(u.translateX,u.translateY,f.translateX,f.translateY,h,g),r(u.rotate,f.rotate,h,g),l(u.skewX,f.skewX,h,g),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,g),u=f=null,function(M){for(var _=-1,ce=g.length,m;++_<ce;)h[(m=g[_]).i]=m.x(M);return h.join("")}}}var $c=Qr(Cc,"px, ","px)","deg)"),_c=Qr(Pc,", ",")",")"),gt=0,It=0,$t=0,Jr=1e3,co,At,fo=0,tt=0,Po=0,Mt=typeof performance=="object"&&performance.now?performance:Date,Zr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ui(){return tt||(Zr(Ic),tt=Mt.now()+Po)}function Ic(){tt=0}function mo(){this._call=this._time=this._next=null}mo.prototype=xr.prototype={constructor:mo,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?ui():+t)+(n==null?0:+n),!this._next&&At!==this&&(At?At._next=this:co=this,At=this),this._call=e,this._time=t,Yo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yo())}};function xr(e,n,t){var o=new mo;return o.restart(e,n,t),o}function Ac(){ui(),++gt;for(var e=co,n;e;)(n=tt-e._time)>=0&&e._call.call(void 0,n),e=e._next;--gt}function or(){tt=(fo=Mt.now())+Po,gt=It=0;try{Ac()}finally{gt=0,Tc(),tt=0}}function Sc(){var e=Mt.now(),n=e-fo;n>Jr&&(Po-=n,fo=e)}function Tc(){for(var e,n=co,t,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:co=t);At=e,Yo(o)}function Yo(e){if(!gt){It&&(It=clearTimeout(It));var n=e-tt;n>24?(e<1/0&&(It=setTimeout(or,e-Mt.now()-Po)),$t&&($t=clearInterval($t))):($t||(fo=Mt.now(),$t=setInterval(Sc,Jr)),gt=1,Zr(or))}}function ir(e,n,t){var o=new mo;return n=n==null?0:+n,o.restart(i=>{o.stop(),e(i+n)},n,t),o}var Nc=ii("start","end","cancel","interrupt"),Mc=[],ea=0,rr=1,Go=2,to=3,ar=4,Qo=5,oo=6;function $o(e,n,t,o,i,a){var r=e.__transition;if(!r)e.__transition={};else if(t in r)return;Rc(e,t,{name:n,index:o,group:i,on:Nc,tween:Mc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ea})}function ci(e,n){var t=Tn(e,n);if(t.state>ea)throw new Error("too late; already scheduled");return t}function Mn(e,n){var t=Tn(e,n);if(t.state>to)throw new Error("too late; already running");return t}function Tn(e,n){var t=e.__transition;if(!t||!(t=t[n]))throw new Error("transition not found");return t}function Rc(e,n,t){var o=e.__transition,i;o[n]=t,t.timer=xr(a,0,t.time);function a(u){t.state=rr,t.timer.restart(r,t.delay,t.time),t.delay<=u&&r(u-t.delay)}function r(u){var f,h,g,M;if(t.state!==rr)return s();for(f in o)if(M=o[f],M.name===t.name){if(M.state===to)return ir(r);M.state===ar?(M.state=oo,M.timer.stop(),M.on.call("interrupt",e,e.__data__,M.index,M.group),delete o[f]):+f<n&&(M.state=oo,M.timer.stop(),M.on.call("cancel",e,e.__data__,M.index,M.group),delete o[f])}if(ir(function(){t.state===to&&(t.state=ar,t.timer.restart(l,t.delay,t.time),l(u))}),t.state=Go,t.on.call("start",e,e.__data__,t.index,t.group),t.state===Go){for(t.state=to,i=new Array(g=t.tween.length),f=0,h=-1;f<g;++f)(M=t.tween[f].value.call(e,e.__data__,t.index,t.group))&&(i[++h]=M);i.length=h+1}}function l(u){for(var f=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(s),t.state=Qo,1),h=-1,g=i.length;++h<g;)i[h].call(e,f);t.state===Qo&&(t.on.call("end",e,e.__data__,t.index,t.group),s())}function s(){t.state=oo,t.timer.stop(),delete o[n];for(var u in o)return;delete e.__transition}}function Jo(e,n){var t=e.__transition,o,i,a=!0,r;if(t){n=n==null?null:n+"";for(r in t){if((o=t[r]).name!==n){a=!1;continue}i=o.state>Go&&o.state<Qo,o.state=oo,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete t[r]}a&&delete e.__transition}}function Lc(e){return this.each(function(){Jo(this,e)})}function qc(e,n){var t,o;return function(){var i=Mn(this,e),a=i.tween;if(a!==t){o=t=a;for(var r=0,l=o.length;r<l;++r)if(o[r].name===n){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function Uc(e,n,t){var o,i;if(typeof t!="function")throw new Error;return function(){var a=Mn(this,e),r=a.tween;if(r!==o){i=(o=r).slice();for(var l={name:n,value:t},s=0,u=i.length;s<u;++s)if(i[s].name===n){i[s]=l;break}s===u&&i.push(l)}a.tween=i}}function Oc(e,n){var t=this._id;if(e+="",arguments.length<2){for(var o=Tn(this.node(),t).tween,i=0,a=o.length,r;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((n==null?qc:Uc)(t,e,n))}function di(e,n,t){var o=e._id;return e.each(function(){var i=Mn(this,o);(i.value||(i.value={}))[n]=t.apply(this,arguments)}),function(i){return Tn(i,o).value[n]}}function na(e,n){var t;return(typeof n=="number"?In:n instanceof nt?uo:(t=nt(n))?(n=t,uo):Yr)(e,n)}function Bc(e){return function(){this.removeAttribute(e)}}function Fc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ec(e,n,t){var o,i=t+"",a;return function(){var r=this.getAttribute(e);return r===i?null:r===o?a:a=n(o=r,t)}}function jc(e,n,t){var o,i=t+"",a;return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?a:a=n(o=r,t)}}function Dc(e,n,t){var o,i,a;return function(){var r,l=t(this),s;return l==null?void this.removeAttribute(e):(r=this.getAttribute(e),s=l+"",r===s?null:r===o&&s===i?a:(i=s,a=n(o=r,l)))}}function Hc(e,n,t){var o,i,a;return function(){var r,l=t(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),s=l+"",r===s?null:r===o&&s===i?a:(i=s,a=n(o=r,l)))}}function Xc(e,n){var t=wo(e),o=t==="transform"?_c:na;return this.attrTween(e,typeof n=="function"?(t.local?Hc:Dc)(t,o,di(this,"attr."+e,n)):n==null?(t.local?Fc:Bc)(t):(t.local?jc:Ec)(t,o,n))}function zc(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}function Wc(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}function Vc(e,n){var t,o;function i(){var a=n.apply(this,arguments);return a!==o&&(t=(o=a)&&Wc(e,a)),t}return i._value=n,i}function Kc(e,n){var t,o;function i(){var a=n.apply(this,arguments);return a!==o&&(t=(o=a)&&zc(e,a)),t}return i._value=n,i}function Yc(e,n){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;var o=wo(e);return this.tween(t,(o.local?Vc:Kc)(o,n))}function Gc(e,n){return function(){ci(this,e).delay=+n.apply(this,arguments)}}function Qc(e,n){return n=+n,function(){ci(this,e).delay=n}}function Jc(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Gc:Qc)(n,e)):Tn(this.node(),n).delay}function Zc(e,n){return function(){Mn(this,e).duration=+n.apply(this,arguments)}}function xc(e,n){return n=+n,function(){Mn(this,e).duration=n}}function ed(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Zc:xc)(n,e)):Tn(this.node(),n).duration}function nd(e,n){if(typeof n!="function")throw new Error;return function(){Mn(this,e).ease=n}}function td(e){var n=this._id;return arguments.length?this.each(nd(n,e)):Tn(this.node(),n).ease}function od(e,n){return function(){var t=n.apply(this,arguments);if(typeof t!="function")throw new Error;Mn(this,e).ease=t}}function id(e){if(typeof e!="function")throw new Error;return this.each(od(this._id,e))}function rd(e){typeof e!="function"&&(e=Ur(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var a=n[i],r=a.length,l=o[i]=[],s,u=0;u<r;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new Dn(o,this._parents,this._name,this._id)}function ad(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,t=e._groups,o=n.length,i=t.length,a=Math.min(o,i),r=new Array(o),l=0;l<a;++l)for(var s=n[l],u=t[l],f=s.length,h=r[l]=new Array(f),g,M=0;M<f;++M)(g=s[M]||u[M])&&(h[M]=g);for(;l<o;++l)r[l]=n[l];return new Dn(r,this._parents,this._name,this._id)}function ld(e){return(e+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||n==="start"})}function sd(e,n,t){var o,i,a=ld(n)?ci:Mn;return function(){var r=a(this,e),l=r.on;l!==o&&(i=(o=l).copy()).on(n,t),r.on=i}}function ud(e,n){var t=this._id;return arguments.length<2?Tn(this.node(),t).on.on(e):this.each(sd(t,e,n))}function cd(e){return function(){var n=this.parentNode;for(var t in this.__transition)if(+t!==e)return;n&&n.removeChild(this)}}function dd(){return this.on("end.remove",cd(this._id))}function fd(e){var n=this._name,t=this._id;typeof e!="function"&&(e=ri(e));for(var o=this._groups,i=o.length,a=new Array(i),r=0;r<i;++r)for(var l=o[r],s=l.length,u=a[r]=new Array(s),f,h,g=0;g<s;++g)(f=l[g])&&(h=e.call(f,f.__data__,g,l))&&("__data__"in f&&(h.__data__=f.__data__),u[g]=h,$o(u[g],n,t,g,u,Tn(f,t)));return new Dn(a,this._parents,n,t)}function md(e){var n=this._name,t=this._id;typeof e!="function"&&(e=qr(e));for(var o=this._groups,i=o.length,a=[],r=[],l=0;l<i;++l)for(var s=o[l],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var g=e.call(f,f.__data__,h,s),M,_=Tn(f,t),ce=0,m=g.length;ce<m;++ce)(M=g[ce])&&$o(M,n,t,ce,g,_);a.push(g),r.push(f)}return new Dn(a,r,n,t)}var pd=Lt.prototype.constructor;function vd(){return new pd(this._groups,this._parents)}function hd(e,n){var t,o,i;return function(){var a=ht(this,e),r=(this.style.removeProperty(e),ht(this,e));return a===r?null:a===t&&r===o?i:i=n(t=a,o=r)}}function ta(e){return function(){this.style.removeProperty(e)}}function gd(e,n,t){var o,i=t+"",a;return function(){var r=ht(this,e);return r===i?null:r===o?a:a=n(o=r,t)}}function yd(e,n,t){var o,i,a;return function(){var r=ht(this,e),l=t(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),ht(this,e))),r===s?null:r===o&&s===i?a:(i=s,a=n(o=r,l))}}function bd(e,n){var t,o,i,a="style."+n,r="end."+a,l;return function(){var s=Mn(this,e),u=s.on,f=s.value[a]==null?l||(l=ta(n)):void 0;(u!==t||i!==f)&&(o=(t=u).copy()).on(r,i=f),s.on=o}}function kd(e,n,t){var o=(e+="")=="transform"?$c:na;return n==null?this.styleTween(e,hd(e,o)).on("end.style."+e,ta(e)):typeof n=="function"?this.styleTween(e,yd(e,o,di(this,"style."+e,n))).each(bd(this._id,e)):this.styleTween(e,gd(e,o,n),t).on("end.style."+e,null)}function wd(e,n,t){return function(o){this.style.setProperty(e,n.call(this,o),t)}}function Cd(e,n,t){var o,i;function a(){var r=n.apply(this,arguments);return r!==i&&(o=(i=r)&&wd(e,r,t)),o}return a._value=n,a}function Pd(e,n,t){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,Cd(e,n,t??""))}function $d(e){return function(){this.textContent=e}}function _d(e){return function(){var n=e(this);this.textContent=n??""}}function Id(e){return this.tween("text",typeof e=="function"?_d(di(this,"text",e)):$d(e==null?"":e+""))}function Ad(e){return function(n){this.textContent=e.call(this,n)}}function Sd(e){var n,t;function o(){var i=e.apply(this,arguments);return i!==t&&(n=(t=i)&&Ad(i)),n}return o._value=e,o}function Td(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Sd(e))}function Nd(){for(var e=this._name,n=this._id,t=oa(),o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],l=r.length,s,u=0;u<l;++u)if(s=r[u]){var f=Tn(s,n);$o(s,e,t,u,r,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Dn(o,this._parents,e,t)}function Md(){var e,n,t=this,o=t._id,i=t.size();return new Promise(function(a,r){var l={value:r},s={value:function(){--i===0&&a()}};t.each(function(){var u=Mn(this,o),f=u.on;f!==e&&(n=(e=f).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(s)),u.on=n}),i===0&&a()})}var Rd=0;function Dn(e,n,t,o){this._groups=e,this._parents=n,this._name=t,this._id=o}function oa(){return++Rd}var Fn=Lt.prototype;Dn.prototype={constructor:Dn,select:fd,selectAll:md,selectChild:Fn.selectChild,selectChildren:Fn.selectChildren,filter:rd,merge:ad,selection:vd,transition:Nd,call:Fn.call,nodes:Fn.nodes,node:Fn.node,size:Fn.size,empty:Fn.empty,each:Fn.each,on:ud,attr:Xc,attrTween:Yc,style:kd,styleTween:Pd,text:Id,textTween:Td,remove:dd,tween:Oc,delay:Jc,duration:ed,ease:td,easeVarying:id,end:Md,[Symbol.iterator]:Fn[Symbol.iterator]};function Ld(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qd={time:null,delay:0,duration:250,ease:Ld};function Ud(e,n){for(var t;!(t=e.__transition)||!(t=t[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return t}function Od(e){var n,t;e instanceof Dn?(n=e._id,e=e._name):(n=oa(),(t=qd).time=ui(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],l=r.length,s,u=0;u<l;++u)(s=r[u])&&$o(s,e,n,u,r,t||Ud(s,n));return new Dn(o,this._parents,e,n)}Lt.prototype.interrupt=Lc;Lt.prototype.transition=Od;const qo=e=>()=>e;function Bd(e,{sourceEvent:n,target:t,selection:o,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},selection:{value:o,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Fd(e){e.stopImmediatePropagation()}function Uo(e){e.preventDefault(),e.stopImmediatePropagation()}var lr={name:"drag"},Oo={name:"space"},dt={name:"handle"},ft={name:"center"};const{abs:sr,max:nn,min:tn}=Math;function ur(e){return[+e[0],+e[1]]}function cr(e){return[ur(e[0]),ur(e[1])]}var io={name:"x",handles:["w","e"].map(po),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Bo={name:"y",handles:["n","s"].map(po),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},En={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},dr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},fr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ed={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},jd={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function po(e){return{type:e}}function Dd(e){return!e.ctrlKey&&!e.button}function Hd(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Xd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fo(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function zd(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Wd(){return Vd(io)}function Vd(e){var n=Hd,t=Dd,o=Xd,i=!0,a=ii("start","brush","end"),r=6,l;function s(m){var I=m.property("__brush",ce).selectAll(".overlay").data([po("overlay")]);I.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",En.overlay).merge(I).each(function(){var y=Fo(this).extent;An(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),m.selectAll(".selection").data([po("selection")]).enter().append("rect").attr("class","selection").attr("cursor",En.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var P=m.selectAll(".handle").data(e.handles,function(y){return y.type});P.exit().remove(),P.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return En[y.type]}),m.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",g).filter(o).on("touchstart.brush",g).on("touchmove.brush",M).on("touchend.brush touchcancel.brush",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(m,I,P){m.tween?m.on("start.brush",function(y){f(this,arguments).beforestart().start(y)}).on("interrupt.brush end.brush",function(y){f(this,arguments).end(y)}).tween("brush",function(){var y=this,p=y.__brush,b=f(y,arguments),O=p.selection,z=e.input(typeof I=="function"?I.apply(this,arguments):I,p.extent),Q=Co(O,z);function fe(Z){p.selection=Z===1&&z===null?null:Q(Z),u.call(y),b.brush()}return O!==null&&z!==null?fe:fe(1)}):m.each(function(){var y=this,p=arguments,b=y.__brush,O=e.input(typeof I=="function"?I.apply(y,p):I,b.extent),z=f(y,p).beforestart();Jo(y),b.selection=O===null?null:O,u.call(y),z.start(P).brush(P).end(P)})},s.clear=function(m,I){s.move(m,null,I)};function u(){var m=An(this),I=Fo(this).selection;I?(m.selectAll(".selection").style("display",null).attr("x",I[0][0]).attr("y",I[0][1]).attr("width",I[1][0]-I[0][0]).attr("height",I[1][1]-I[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(P){return P.type[P.type.length-1]==="e"?I[1][0]-r/2:I[0][0]-r/2}).attr("y",function(P){return P.type[0]==="s"?I[1][1]-r/2:I[0][1]-r/2}).attr("width",function(P){return P.type==="n"||P.type==="s"?I[1][0]-I[0][0]+r:r}).attr("height",function(P){return P.type==="e"||P.type==="w"?I[1][1]-I[0][1]+r:r})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(m,I,P){var y=m.__brush.emitter;return y&&(!P||!y.clean)?y:new h(m,I,P)}function h(m,I,P){this.that=m,this.args=I,this.state=m.__brush,this.active=0,this.clean=P}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,I){return this.starting?(this.starting=!1,this.emit("start",m,I)):this.emit("brush",m),this},brush:function(m,I){return this.emit("brush",m,I),this},end:function(m,I){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,I)),this},emit:function(m,I,P){var y=An(this.that).datum();a.call(m,this.that,new Bd(m,{sourceEvent:I,target:s,selection:e.output(this.state.selection),mode:P,dispatch:a}),y)}};function g(m){if(l&&!m.touches||!t.apply(this,arguments))return;var I=this,P=m.target.__data__.type,y=(i&&m.metaKey?P="overlay":P)==="selection"?lr:i&&m.altKey?ft:dt,p=e===Bo?null:Ed[P],b=e===io?null:jd[P],O=Fo(I),z=O.extent,Q=O.selection,fe=z[0][0],Z,T,J=z[0][1],j,G,we=z[1][0],V,ae,le=z[1][1],oe,ie,he=0,x=0,K,vn=p&&b&&i&&m.shiftKey,X,Ke,je=Array.from(m.touches||[m],te=>{const qe=te.identifier;return te=Ki(te,I),te.point0=te.slice(),te.identifier=qe,te});Jo(I);var hn=f(I,arguments,!0).beforestart();if(P==="overlay"){Q&&(K=!0);const te=[je[0],je[1]||je[0]];O.selection=Q=[[Z=e===Bo?fe:tn(te[0][0],te[1][0]),j=e===io?J:tn(te[0][1],te[1][1])],[V=e===Bo?we:nn(te[0][0],te[1][0]),oe=e===io?le:nn(te[0][1],te[1][1])]],je.length>1&&Be(m)}else Z=Q[0][0],j=Q[0][1],V=Q[1][0],oe=Q[1][1];T=Z,G=j,ae=V,ie=oe;var yn=An(I).attr("pointer-events","none"),cn=yn.selectAll(".overlay").attr("cursor",En[P]);if(m.touches)hn.moved=Je,hn.ended=bn;else{var zn=An(m.view).on("mousemove.brush",Je,!0).on("mouseup.brush",bn,!0);i&&zn.on("keydown.brush",wn,!0).on("keyup.brush",De,!0),Ju(m.view)}u.call(I),hn.start(m,y.name);function Je(te){for(const qe of te.changedTouches||[te])for(const on of je)on.identifier===qe.identifier&&(on.cur=Ki(qe,I));if(vn&&!X&&!Ke&&je.length===1){const qe=je[0];sr(qe.cur[0]-qe[0])>sr(qe.cur[1]-qe[1])?Ke=!0:X=!0}for(const qe of je)qe.cur&&(qe[0]=qe.cur[0],qe[1]=qe.cur[1]);K=!0,Uo(te),Be(te)}function Be(te){const qe=je[0],on=qe.point0;var U;switch(he=qe[0]-on[0],x=qe[1]-on[1],y){case Oo:case lr:{p&&(he=nn(fe-Z,tn(we-V,he)),T=Z+he,ae=V+he),b&&(x=nn(J-j,tn(le-oe,x)),G=j+x,ie=oe+x);break}case dt:{je[1]?(p&&(T=nn(fe,tn(we,je[0][0])),ae=nn(fe,tn(we,je[1][0])),p=1),b&&(G=nn(J,tn(le,je[0][1])),ie=nn(J,tn(le,je[1][1])),b=1)):(p<0?(he=nn(fe-Z,tn(we-Z,he)),T=Z+he,ae=V):p>0&&(he=nn(fe-V,tn(we-V,he)),T=Z,ae=V+he),b<0?(x=nn(J-j,tn(le-j,x)),G=j+x,ie=oe):b>0&&(x=nn(J-oe,tn(le-oe,x)),G=j,ie=oe+x));break}case ft:{p&&(T=nn(fe,tn(we,Z-he*p)),ae=nn(fe,tn(we,V+he*p))),b&&(G=nn(J,tn(le,j-x*b)),ie=nn(J,tn(le,oe+x*b)));break}}ae<T&&(p*=-1,U=Z,Z=V,V=U,U=T,T=ae,ae=U,P in dr&&cn.attr("cursor",En[P=dr[P]])),ie<G&&(b*=-1,U=j,j=oe,oe=U,U=G,G=ie,ie=U,P in fr&&cn.attr("cursor",En[P=fr[P]])),O.selection&&(Q=O.selection),X&&(T=Q[0][0],ae=Q[1][0]),Ke&&(G=Q[0][1],ie=Q[1][1]),(Q[0][0]!==T||Q[0][1]!==G||Q[1][0]!==ae||Q[1][1]!==ie)&&(O.selection=[[T,G],[ae,ie]],u.call(I),hn.brush(te,y.name))}function bn(te){if(Fd(te),te.touches){if(te.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else Zu(te.view,K),zn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);yn.attr("pointer-events","all"),cn.attr("cursor",En.overlay),O.selection&&(Q=O.selection),zd(Q)&&(O.selection=null,u.call(I)),hn.end(te,y.name)}function wn(te){switch(te.keyCode){case 16:{vn=p&&b;break}case 18:{y===dt&&(p&&(V=ae-he*p,Z=T+he*p),b&&(oe=ie-x*b,j=G+x*b),y=ft,Be(te));break}case 32:{(y===dt||y===ft)&&(p<0?V=ae-he:p>0&&(Z=T-he),b<0?oe=ie-x:b>0&&(j=G-x),y=Oo,cn.attr("cursor",En.selection),Be(te));break}default:return}Uo(te)}function De(te){switch(te.keyCode){case 16:{vn&&(X=Ke=vn=!1,Be(te));break}case 18:{y===ft&&(p<0?V=ae:p>0&&(Z=T),b<0?oe=ie:b>0&&(j=G),y=dt,Be(te));break}case 32:{y===Oo&&(te.altKey?(p&&(V=ae-he*p,Z=T+he*p),b&&(oe=ie-x*b,j=G+x*b),y=ft):(p<0?V=ae:p>0&&(Z=T),b<0?oe=ie:b>0&&(j=G),y=dt),cn.attr("cursor",En[P]),Be(te));break}default:return}Uo(te)}}function M(m){f(this,arguments).moved(m)}function _(m){f(this,arguments).ended(m)}function ce(){var m=this.__brush||{selection:null};return m.extent=cr(n.apply(this,arguments)),m.dim=e,m}return s.extent=function(m){return arguments.length?(n=typeof m=="function"?m:qo(cr(m)),s):n},s.filter=function(m){return arguments.length?(t=typeof m=="function"?m:qo(!!m),s):t},s.touchable=function(m){return arguments.length?(o=typeof m=="function"?m:qo(!!m),s):o},s.handleSize=function(m){return arguments.length?(r=+m,s):r},s.keyModifiers=function(m){return arguments.length?(i=!!m,s):i},s.on=function(){var m=a.on.apply(a,arguments);return m===a?s:m},s}function Kd(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vo(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,o=e.slice(0,t);return[o.length>1?o[0]+o.slice(2):o,+e.slice(t+1)]}function yt(e){return e=vo(Math.abs(e)),e?e[1]:NaN}function Yd(e,n){return function(t,o){for(var i=t.length,a=[],r=0,l=e[0],s=0;i>0&&l>0&&(s+l+1>o&&(l=Math.max(1,o-s)),a.push(t.substring(i-=l,i+l)),!((s+=l+1)>o));)l=e[r=(r+1)%e.length];return a.reverse().join(n)}}function Gd(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var Qd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ho(e){if(!(n=Qd.exec(e)))throw new Error("invalid format: "+e);var n;return new fi({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}ho.prototype=fi.prototype;function fi(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}fi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jd(e){e:for(var n=e.length,t=1,o=-1,i;t<n;++t)switch(e[t]){case".":o=i=t;break;case"0":o===0&&(o=t),i=t;break;default:if(!+e[t])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(i+1):e}var ia;function Zd(e,n){var t=vo(e,n);if(!t)return e+"";var o=t[0],i=t[1],a=i-(ia=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,r=o.length;return a===r?o:a>r?o+new Array(a-r+1).join("0"):a>0?o.slice(0,a)+"."+o.slice(a):"0."+new Array(1-a).join("0")+vo(e,Math.max(0,n+a-1))[0]}function mr(e,n){var t=vo(e,n);if(!t)return e+"";var o=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}const pr={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Kd,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>mr(e*100,n),r:mr,s:Zd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vr(e){return e}var hr=Array.prototype.map,gr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function xd(e){var n=e.grouping===void 0||e.thousands===void 0?vr:Yd(hr.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?vr:Gd(hr.call(e.numerals,String)),r=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(h){h=ho(h);var g=h.fill,M=h.align,_=h.sign,ce=h.symbol,m=h.zero,I=h.width,P=h.comma,y=h.precision,p=h.trim,b=h.type;b==="n"?(P=!0,b="g"):pr[b]||(y===void 0&&(y=12),p=!0,b="g"),(m||g==="0"&&M==="=")&&(m=!0,g="0",M="=");var O=ce==="$"?t:ce==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",z=ce==="$"?o:/[%p]/.test(b)?r:"",Q=pr[b],fe=/[defgprs%]/.test(b);y=y===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function Z(T){var J=O,j=z,G,we,V;if(b==="c")j=Q(T)+j,T="";else{T=+T;var ae=T<0||1/T<0;if(T=isNaN(T)?s:Q(Math.abs(T),y),p&&(T=Jd(T)),ae&&+T==0&&_!=="+"&&(ae=!1),J=(ae?_==="("?_:l:_==="-"||_==="("?"":_)+J,j=(b==="s"?gr[8+ia/3]:"")+j+(ae&&_==="("?")":""),fe){for(G=-1,we=T.length;++G<we;)if(V=T.charCodeAt(G),48>V||V>57){j=(V===46?i+T.slice(G+1):T.slice(G))+j,T=T.slice(0,G);break}}}P&&!m&&(T=n(T,1/0));var le=J.length+T.length+j.length,oe=le<I?new Array(I-le+1).join(g):"";switch(P&&m&&(T=n(oe+T,oe.length?I-j.length:1/0),oe=""),M){case"<":T=J+T+j+oe;break;case"=":T=J+oe+T+j;break;case"^":T=oe.slice(0,le=oe.length>>1)+J+T+j+oe.slice(le);break;default:T=oe+J+T+j;break}return a(T)}return Z.toString=function(){return h+""},Z}function f(h,g){var M=u((h=ho(h),h.type="f",h)),_=Math.max(-8,Math.min(8,Math.floor(yt(g)/3)))*3,ce=Math.pow(10,-_),m=gr[8+_/3];return function(I){return M(ce*I)+m}}return{format:u,formatPrefix:f}}var Jt,ra,aa;ef({thousands:",",grouping:[3],currency:["$",""]});function ef(e){return Jt=xd(e),ra=Jt.format,aa=Jt.formatPrefix,Jt}function nf(e){return Math.max(0,-yt(Math.abs(e)))}function tf(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yt(n)/3)))*3-yt(Math.abs(e)))}function of(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,yt(n)-yt(e))+1}function mi(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const yr=Symbol("implicit");function la(){var e=new Xi,n=[],t=[],o=yr;function i(a){let r=e.get(a);if(r===void 0){if(o!==yr)return o;e.set(a,r=n.push(a)-1)}return t[r%t.length]}return i.domain=function(a){if(!arguments.length)return n.slice();n=[],e=new Xi;for(const r of a)e.has(r)||e.set(r,n.push(r)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(o=a,i):o},i.copy=function(){return la(n,t).unknown(o)},mi.apply(i,arguments),i}function sa(){var e=la().unknown(void 0),n=e.domain,t=e.range,o=0,i=1,a,r,l=!1,s=0,u=0,f=.5;delete e.unknown;function h(){var g=n().length,M=i<o,_=M?i:o,ce=M?o:i;a=(ce-_)/Math.max(1,g-s+u*2),l&&(a=Math.floor(a)),_+=(ce-_-a*(g-s))*f,r=a*(1-s),l&&(_=Math.round(_),r=Math.round(r));var m=ps(g).map(function(I){return _+a*I});return t(M?m.reverse():m)}return e.domain=function(g){return arguments.length?(n(g),h()):n()},e.range=function(g){return arguments.length?([o,i]=g,o=+o,i=+i,h()):[o,i]},e.rangeRound=function(g){return[o,i]=g,o=+o,i=+i,l=!0,h()},e.bandwidth=function(){return r},e.step=function(){return a},e.round=function(g){return arguments.length?(l=!!g,h()):l},e.padding=function(g){return arguments.length?(s=Math.min(1,u=+g),h()):s},e.paddingInner=function(g){return arguments.length?(s=Math.min(1,g),h()):s},e.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},e.copy=function(){return sa(n(),[o,i]).round(l).paddingInner(s).paddingOuter(u).align(f)},mi.apply(h(),arguments)}function rf(e){return function(){return e}}function af(e){return+e}var br=[0,1];function mt(e){return e}function Zo(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:rf(isNaN(n)?NaN:.5)}function lf(e,n){var t;return e>n&&(t=e,e=n,n=t),function(o){return Math.max(e,Math.min(n,o))}}function sf(e,n,t){var o=e[0],i=e[1],a=n[0],r=n[1];return i<o?(o=Zo(i,o),a=t(r,a)):(o=Zo(o,i),a=t(a,r)),function(l){return a(o(l))}}function uf(e,n,t){var o=Math.min(e.length,n.length)-1,i=new Array(o),a=new Array(o),r=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++r<o;)i[r]=Zo(e[r],e[r+1]),a[r]=t(n[r],n[r+1]);return function(l){var s=is(e,l,1,o)-1;return a[s](i[s](l))}}function cf(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function df(){var e=br,n=br,t=Co,o,i,a,r=mt,l,s,u;function f(){var g=Math.min(e.length,n.length);return r!==mt&&(r=lf(e[0],e[g-1])),l=g>2?uf:sf,s=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(s||(s=l(e.map(o),n,t)))(o(r(g)))}return h.invert=function(g){return r(i((u||(u=l(n,e.map(o),In)))(g)))},h.domain=function(g){return arguments.length?(e=Array.from(g,af),f()):e.slice()},h.range=function(g){return arguments.length?(n=Array.from(g),f()):n.slice()},h.rangeRound=function(g){return n=Array.from(g),t=wc,f()},h.clamp=function(g){return arguments.length?(r=g?!0:mt,f()):r!==mt},h.interpolate=function(g){return arguments.length?(t=g,f()):t},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,M){return o=g,i=M,f()}}function ff(){return df()(mt,mt)}function mf(e,n,t,o){var i=fs(e,n,t),a;switch(o=ho(o??",f"),o.type){case"s":{var r=Math.max(Math.abs(e),Math.abs(n));return o.precision==null&&!isNaN(a=tf(i,r))&&(o.precision=a),aa(o,r)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(a=of(i,Math.max(Math.abs(e),Math.abs(n))))&&(o.precision=a-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(a=nf(i))&&(o.precision=a-(o.type==="%")*2);break}}return ra(o)}function pf(e){var n=e.domain;return e.ticks=function(t){var o=n();return ds(o[0],o[o.length-1],t??10)},e.tickFormat=function(t,o){var i=n();return mf(i[0],i[i.length-1],t??10,o)},e.nice=function(t){t==null&&(t=10);var o=n(),i=0,a=o.length-1,r=o[i],l=o[a],s,u,f=10;for(l<r&&(u=r,r=l,l=u,u=i,i=a,a=u);f-- >0;){if(u=Do(r,l,t),u===s)return o[i]=r,o[a]=l,n(o);if(u>0)r=Math.floor(r/u)*u,l=Math.ceil(l/u)*u;else if(u<0)r=Math.ceil(r*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function ua(){var e=ff();return e.copy=function(){return cf(e,ua())},mi.apply(e,arguments),pf(e)}function St(e,n,t){this.k=e,this.x=n,this.y=t}St.prototype={constructor:St,scale:function(e){return e===1?this:new St(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new St(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};St.prototype;function kr(e,n,t){const o=new B(10).pow(n-t);return new B(1.0001).pow(e).mul(o)}const vf=mn({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,n){const t=L(1),o=L(""),i=L(""),a=ne(()=>{var p,b,O;return h.sqrtPriceX64ToPrice((p=e.poolInfo)==null?void 0:p.current_sqrt_price,(b=e.poolInfo)==null?void 0:b.coinA.decimals,(O=e.poolInfo)==null?void 0:O.coinB.decimals).toString()}),r=ne(()=>{let p=0;return e.direction?p=(Number(e.minPrice)/Number(a.value)-1)*100:p=(Number(e.minPrice)/Number(1/Number(a.value))-1)*100,p=p>0&&p<.1?.1:p,p=p<0&&p>-.1?-.1:p,p}),l=ne(()=>{let p=0;return e.direction?p=(Number(e.maxPrice)/Number(a.value)-1)*100:p=(Number(e.maxPrice)/Number(1/Number(a.value))-1)*100,p=p>0&&p<.1?.1:p,p=p<0&&p>-.1?-.1:p,p}),s=fn(),u=ne(()=>s),f=ne(()=>u.value.chainName?go(u.value.chainName):{}),{TickMath:h,getNearestTickByTick:g}=f.value,M=()=>{const p=t.value/2;t.value=p,m(e.poolInfo,p)},_=()=>{const p=t.value*2;t.value=p,m(e.poolInfo,p)},ce=(p=[])=>{let b=6;const O=Math.abs(Number(p[0])-Number(p[p.length-1]));return O>=6?b=0:O>=1?b=1:O>=.1?b=2:O>=.01?b=3:O>=.001?b=4:O>=1e-4?b=5:O>=1e-5?b=6:O>=1e-6?b=7:O>=1e-7&&(b=8),b},m=(p,b=1)=>{if(p&&p.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const O=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",O),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let z=O+100*b,Q=O-100*b,fe,Z;if(e.maxPrice==="∞")Z=f.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?Z=h.priceToTickIndex(new B(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):Z=h.priceToTickIndex(new B(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{Z=443636}if(e.minPrice==="0")fe=f.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?fe=h.priceToTickIndex(new B(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):fe=h.priceToTickIndex(new B(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{fe=-443636}let T=0;if(e.currentPriceTab!=="full range"){if(O>=fe&&O<=Z){const x=O-fe,K=Z-O;T=Math.max(Math.abs(x),Math.abs(K))}else O<fe?T=Math.abs(Z-O):T=Math.abs(O-fe);z=O+T+100*b,Q=O-T-100*b}else{const x=(Math.abs(O)>5e3,2e4);z=O+x*b,Q=O-x*b}Q<-443636&&(Q=-443636),z>443636&&(z=443636);const J=new B(p.liquidity).div(Math.pow(10,8)).toString(),j=e.tickList;console.log("0117####drawChart####tick_info_array####",j);const G=[],we=[];let V={};for(let x=0;x<j.length;x++){if(V=j[x],V.index<=O&&V.index>=Q){if(G.length<1&&x!==0){const K=j[x-1];G.unshift({...K,index:Q})}G.unshift(V)}else if(V.index>O&&V.index<=z&&(we.push(V),G.length<1&&x!==0)){const K=j[x-1];G.push({...K,index:Q})}if(V.index>z){const K=j[x];if(we.push({...K,index:z}),G.length<1&&x!==0){const vn=j[x-1];G.push({...vn,index:Q})}break}}let ae="0";for(let x=G.length-1;x>=0;x--)ae=new B(ae).plus(new B(G[x].liquidityNet.toString()).div(Math.pow(10,8))).toString(),G[x].liquityAmount=ae;let le=J;for(let x=0;x<we.length;x++)le=new B(le).plus(new B(we[x].liquidityNet.toString()).div(Math.pow(10,8))).toString(),we[x].liquityAmount=le;let oe=[];const ie=j&&j.length>0?{index:O,liquityAmount:Number(J)}:{index:O,liquityAmount:0};(G.length>0||we.length>0)&&(oe=[...G.reverse(),ie,...we],e.direction||(oe=oe.reverse()));const he=[];j.forEach(x=>{he.push({...x,liquidityGross:x.liquidityGross.toString(),liquidityNet:x.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",he),console.log("0117####drawChart####currentLiquity####",J),P(oe,Q,z,fe,Z,O)}};let I=L(!1);yo(()=>{document.body.clientWidth<750?I.value=!1:I.value=!0,window.onresize=()=>{document.body.clientWidth<750?I.value=!1:I.value=!0,m(e.poolInfo,t.value)}});const P=(p,b,O,z,Q,fe)=>{console.log("0117####drawChart####chartData####",p),console.log("0117####drawChart####tickMin####",b),console.log("0117####drawChart####tickMax####",O),console.log("0117####drawChart####minPriceTick####",z),console.log("0117####drawChart####maxPriceTick####",Q),console.log("0117####drawChart####currentTick####",fe),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let Z,T;e.direction?(Z=e.before7dContractPriceLowest?h.priceToTickIndex(new B(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",T=e.before7dContractPriceHighest?h.priceToTickIndex(new B(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(Z=e.before7dContractPriceLowest?h.priceToTickIndex(new B(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",T=e.before7dContractPriceHighest?h.priceToTickIndex(new B(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const J={top:30,right:35,bottom:20,left:55};let j,G;I.value?(j=460-J.left-J.right,G=205-J.top-J.bottom):(j=340-J.left-J.right,G=205-J.top-J.bottom);const we=O-b,V=parseInt(String(we/4));let ae=[b+V/4,b+V,b+2*V,O-V,O-V/4];const le=b,oe=O,ie=j/(oe-le);e.currentPriceTab==="full range"&&(ae=[b,b+2*V,O]),console.log("0117####drawChart####xArr####",ae),console.log("0117####drawChart####utickMin####",le),console.log("0117####drawChart####utickMax####",oe),console.log("0117####drawChart####unit####",ie);const he=ae.map(U=>e.direction?kr(U,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new B(1).div(kr(U,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),x=ce(he);An("#chart").selectAll("*").remove();const K=An("#chart").attr("width",j+J.left+J.right).attr("height",G+J.top+J.bottom).append("g").attr("transform",`translate(${J.left},${J.right})`),vn=ms(p,function(U){return Number(Math.abs(U.liquityAmount))})||0,X=ua().range([0,G]).domain([vn,0]);sa().rangeRound([0,j]).padding(.1);const je=K.append("g").attr("id","barsBox").selectAll("rect").data(p).enter().append("rect");u.value.theme=="default"?je.attr("x",function(U,ee){return ee===0?0:e.direction?Math.abs(U.index-le)*ie:Math.abs(oe-U.index)*ie}).attr("y",function(U,ee){return e.direction?ee===p.length-1?0:X(U.liquityAmount):ee===p.length-1?0:X(p[ee+1].liquityAmount)}).attr("width",function(U,ee){return ee===0&&p.length===1&&U.liquityAmount>0?j:(e.direction,ee!==p.length-1?Math.abs(p[ee+1].index-U.index)*ie:0)}).attr("height",function(U,ee){return ee===0&&p.length===1&&U.liquityAmount>0?G:e.direction?ee===p.length-1?0:G-X(U.liquityAmount):ee===p.length-1?0:G-X(p[ee+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):je.attr("x",function(U,ee){return ee===0?0:e.direction?Math.abs(U.index-le)*ie:Math.abs(oe-U.index)*ie}).attr("y",function(U,ee){return e.direction?ee===p.length-1?0:X(Math.abs(U.liquityAmount)):ee===p.length-1?0:X(Math.abs(p[ee+1].liquityAmount))}).attr("width",function(U,ee){return ee===0&&p.length===1&&U.liquityAmount>0?j:(e.direction,ee!==p.length-1?Math.abs(p[ee+1].index-U.index)*ie:0)}).attr("height",function(U,ee){if(ee===0&&p.length===1&&U.liquityAmount>0)return G;if(e.direction)return ee===p.length-1?0:Number(U.liquityAmount)?G-X(Math.abs(U.liquityAmount)):0;{if(ee===p.length-1)return 0;const xe=G-X(Math.abs(p[ee+1].liquityAmount));return Number(p[ee+1].liquityAmount)?xe:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const hn=K.append("g");hn.append("line").attr("x1",0).attr("y1",155).attr("x2",j).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const yn=hn.append("g");let cn=0;if(e.direction){for(let U=0;U<ae.length;U++){const ee=Le(he[U],x)||"0";console.log("0423####price####",ee),he.push(ee);const xe=Math.abs(ae[U]-le)*ie;let Me=0;for(let k=0;k<ee.length;k++)ee[k]==="1"?Me+=4.02:ee[k]==="."?Me+=2.64:ee[k]==="7"?Me+=5.48:Me+=6;console.log(xe,"x=>>>"),yn.append("text").text(ee).attr("x",xe-Me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}cn=Math.abs(fe-le)*ie}else{for(let U=ae.length-1;U>=0;U--){const ee=Le(he[U],x)||0;he.push(ee);const xe=Math.abs(ae[U]-oe)*ie;let Me=0;for(let k=0;k<ee.length;k++)ee[k]==="1"?Me+=4.02:ee[k]==="."?Me+=2.64:ee[k]==="7"?Me+=5.48:Me+=6;yn.append("text").text(ee).attr("x",xe-Me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}cn=Math.abs(fe-oe)*ie}(u.value.theme=="default"?K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+cn+", 0)");let Je,Be,bn,wn;e.direction?(console.log("0525###d3###select###minPriceTick###",z),console.log("0525###d3###select###maxPriceTick###",Q),console.log("0525###d3###select###props.minPrice###",e.minPrice),console.log("0525###d3###select###props.maxPrice###",e.maxPrice),Je=z<le?-100:parseInt(String(Math.abs(z-le)*ie)),Be=Q<le?-100:parseInt(String(Math.abs(Q-le)*ie)),bn=Z<le?-100:Math.abs(Z-le)*ie,wn=T<le?-100:Math.abs(T-le)*ie):(Be=z<le?-100:Math.abs(oe-z)*ie,Je=Q<le?-100:Math.abs(oe-Q)*ie,wn=Z<le?-100:Math.abs(oe-Z)*ie,bn=T<le?-100:Math.abs(oe-T)*ie),e.minPrice==="0"&&(Je=0),e.maxPrice==="∞"&&(Be=j),I.value?o.value=j-Je+60+"px":o.value=j-Je+52+"px",i.value=Be+74+"px",Z&&bn<j&&K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+bn+", 0)"),T&&wn<j&&K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+wn+", 0)");const De=K.append("g").attr("id","left-handle"),te=K.append("g").attr("id","right-handle");u.value.theme=="default"?(De.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),De.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),De.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),De.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),te.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),te.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),te.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(De.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),De.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),De.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),De.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),te.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),te.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),te.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",Je),console.log("0525###d3###select###maxPriceTickX###",Be),De.attr("transform","translate("+Je+", 0)"),te.attr("transform","translate("+Be+", 0)");const qe=Wd().extent([[0,0],[j,G]]).handleSize(30).on("end",on);K.append("g").attr("class","brush").call(qe).call(qe.move,[Je,Be]);function on(U){if(!U.sourceEvent||!U.selection)return;De.attr("transform","translate("+U.selection[0]+", 0)"),te.attr("transform","translate("+U.selection[1]+", 0)"),I.value?o.value=j-U.selection[0]+60+"px":o.value=j-U.selection[0]+52+"px",i.value=U.selection[1]+74+"px";let ee,xe;console.log("0525###d3###select###e.selection[0]###",U.selection[0]),console.log("0525###d3###select###e.selection[0]###",U.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",j),console.log("0525###d3###select###unit###",ie),console.log("0525###d3###select###utickMin###",le),console.log("0525###d3###select###utickMax###",oe),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let Me=0,k=0;e.direction?(Me=g(parseInt(String(U.selection[0]/ie+le)),Number(e.poolInfo.tickSpacing)),ee=h.tickIndexToPrice(Me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),k=g(parseInt(String(U.selection[1]/ie+le)),Number(e.poolInfo.tickSpacing)),xe=h.tickIndexToPrice(k,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("0525###d3###select###minTick###",Me),console.log("0525###d3###select###maxTick###",k),console.log("0525###d3###select###minPrice###",ee),console.log("0525###d3###select###maxPrice###",xe)):(k=g(oe-U.selection[0]/ie,Number(e.poolInfo.tickSpacing)),ee=1/h.tickIndexToPrice(k,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Me=g(oe-U.selection[1]/ie,Number(e.poolInfo.tickSpacing)),xe=1/h.tickIndexToPrice(Me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),n.emit("onChangeMinPrice",String(Le(String(ee),6))),n.emit("onChangeMaxPrice",String(Le(String(xe),6)))}u.value.theme=="default"?An(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):An(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};L(""),Pe(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([p,b,O,z])=>{console.log(p,b,O,O>b,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),p&&b&&O&&(O=="∞"||Number(O)>Number(b))&&m(p,t.value)},{immediate:!0});const y=L(!0);return Pe(()=>e.chartLoading,(p,b)=>{p!==b&&(y.value=p)},{immediate:!0,deep:!0}),{store:u,loading:y,zoomOut:M,zoomIn:_,rangeSizeLower:r,rangeSizeUpper:l,rangeSizeLowerPosition:o,rangeSizeUpperPosition:i,decimalFormat:vt,numberformat:Eo}}});const hf=e=>(Hn("data-v-f69ce771"),e=e(),Xn(),e),gf={class:"chart-box"},yf={class:"chart"},bf={class:"zoom"},kf=hf(()=>d("svg",{id:"chart"},null,-1));function wf(e,n,t,o,i,a){return w(),S("div",gf,[un(d("div",yf,[d("div",bf,[d("div",{class:"amplification",onClick:n[0]||(n[0]=(...r)=>e.zoomOut&&e.zoomOut(...r))}),d("div",{class:"narrow",onClick:n[1]||(n[1]=(...r)=>e.zoomIn&&e.zoomIn(...r))})]),e.currentPriceTab!=="full range"?(w(),S("div",{key:0,class:"range-size range-size-lower",style:Ei({right:e.rangeSizeLowerPosition})},C(("numberformat"in e?e.numberformat:ge(Eo))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):F("",!0),e.currentPriceTab!=="full range"?(w(),S("div",{key:1,class:"range-size range-size-upper",style:Ei({left:e.rangeSizeUpperPosition})},C(("numberformat"in e?e.numberformat:ge(Eo))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):F("",!0),kf],512),[[Ma,!e.loading]])])}const Cf=pn(vf,[["render",wf],["__scopeId","data-v-f69ce771"]]),Pf=mn({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,n){const t=L(""),o=L(""),i=L(""),a=fn(),r=ne(()=>a);console.log(e,"props124====>");const l=ot(),s=ne(()=>l),u=(y,p)=>y&&p?Oa.plus(Mo(y),Mo(p)):y>0?y:0,f=y=>{let p=0;return y&&y.forEach(b=>{p+=Mo(String(b))}),String(p)},h=L([]),g=L([]),M=L(""),_=L(""),ce=L(!0);Pe(()=>[r.value.newTopPoolsObj,e.poolInfo,s.value.tokensObj,e.aprRewardsParameter],async([y,p,b])=>{var O;if(y&&p&&b){const z=y[p==null?void 0:p.poolAddress];if(z){console.log(z,"===>stats"),t.value=z&&z.apr_7day&&z.apr_7day.replace("%","")||"0",_.value=f(z&&z.rewarder_apr),M.value=u(z&&z.apr_7day,z&&f(z.rewarder_apr)),console.log(e.poolInfo,"===>props.poolInfo"),console.log(M.value,"===> rewardApr.value"),o.value=Ee(z.tvl_in_usd,2),i.value=Ee(z.vol_in_usd_24h,2);const Q=p&&e.poolInfo.rewarder_infos||[],fe=[];for(let T=0;T<Q.length;T++){const J=Q[T];if(b[J.coinAddress]){const j=b[J.coinAddress].decimals,G=vt(J.emissionsEveryDay/Math.pow(10,j),4),we=Number(G)>0?Ee(G):G,V=vt(Number(G)*((O=s.value.RATES[J.coinAddress])==null?void 0:O.price),4);fe.push({...J,logoUrl:b[J.coinAddress].logoURI,day:we,dayUSD:V,symbol:b[J.coinAddress].symbol,rewarder_display:p&&p[`rewarder_display${T+1}`]?p[`rewarder_display${T+1}`]:!1})}}console.log(fe,"mockArr206===>"),h.value=fe.filter(T=>T.rewarder_display);const Z=[];fe.forEach((T,J)=>{b[T.coinAddress]&&Z.push({...T,symbol:b[T.coinAddress].symbol,rewarderApr:z.rewarder_apr[J]&&z.rewarder_apr[J].replace("%","")})}),g.value=Z.filter(T=>T.rewarder_display)}else t.value="0",o.value="--",i.value="--",M.value=="0";console.log(g.value,"===>rewarderArr.value"),ce.value=!1}},{immediate:!0,deep:!0});const m=()=>{n.emit("reviseValue")},I=y=>{var p;return(y==null?void 0:y.logoURI)||(y==null?void 0:y.logo_url)||((p=s.value.tokensObj[y==null?void 0:y.address])==null?void 0:p.logo_url)||(r.value.theme==="default"?We("/image/coins/unknown.png"):We("/image/coins/sui-unknown.png"))},P=ne(()=>s.value.tokensWarningObj);return console.log(P.value,"==>tokensObj"),console.log(e.poolInfo,"props.poolInfo====>"),{tokensWarningObj:P,rewarderInfo:h,rewarderArr:g,rewardApr:M,rewardAprList:_,apr:t,liquidityTvl:o,vol24:i,addCommom:Ee,reviseValue:m,loading:ce,getCoinIcon:I,store:a}}});const _o=e=>(Hn("data-v-139d055a"),e=e(),Xn(),e),$f={key:0,class:"pool-info"},_f=_o(()=>d("use",{"xlink:href":"#icon-icon_on"},null,-1)),If=[_f],Af={key:0,class:"info-block-container"},Sf={class:"info-block"},Tf={class:"coin-tips"},Nf={class:"left"},Mf={alt:""},Rf={class:"address"},Lf={key:0,class:"pool-warning"},qf=_o(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Uf=[qf],Of={class:"info-block"},Bf={class:"coin-tips"},Ff={class:"left"},Ef={alt:""},jf={class:"address"},Df={key:0,class:"pool-warning"},Hf=_o(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Xf=[Hf],zf={class:"info-block"},Wf={class:"leabl"},Vf={class:"text"},Kf={class:"apr-hover-content"},Yf={class:"info-block"},Gf={class:"leabl"},Qf={class:"text"},Jf={class:"info-block"},Zf={class:"leabl"},xf={class:"text"},em={class:"info-block"},nm={class:"leabl"},tm={class:"text"},om={key:1,class:"pool-rewards-info"},im={class:"rewards-list-all"},rm=_o(()=>d("div",{class:"icon-sign"},null,-1)),am={alt:""},lm={class:"rewards-value"};function sm(e,n,t,o,i,a){const r=Ua,l=Ir,s=Rt("image");return e.poolInfo?(w(),S("div",$f,[e.loading?(w(),ke(l,{key:1})):(w(),S(jn,{key:0},[d("div",{class:Re(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Xe(C(e.$t("newAdd.poolInfo"))+" ",1),(w(),S("svg",{class:Re(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:n[0]||(n[0]=u=>e.reviseValue())},If,2))],2),e.label?(w(),S("div",Af,[d("div",Sf,[d("div",Tf,[d("div",Nf,[un(d("img",Mf,null,512),[[s,e.getCoinIcon(e.poolInfo.token_a)]]),d("div",Rf,C(e.poolInfo.token_a.address),1),e.tokensWarningObj&&e.poolInfo&&e.poolInfo.coin_a_address&&!e.tokensWarningObj[e.poolInfo.coin_a_address]?(w(),S("div",Lf)):F("",!0),(w(),S("svg",{class:"icon","aria-hidden":"true",onClick:n[1]||(n[1]=u=>e.store.copy(e.poolInfo.token_a.address&&e.poolInfo.token_a.address))},Uf))])])]),d("div",Of,[d("div",Bf,[d("div",Ff,[un(d("img",Ef,null,512),[[s,e.getCoinIcon(e.poolInfo.token_b)]]),d("div",jf,C(e.poolInfo.token_b.address),1),e.tokensWarningObj&&e.poolInfo&&e.poolInfo.coin_b_address&&!e.tokensWarningObj[e.poolInfo.coin_b_address]?(w(),S("div",Df)):F("",!0),(w(),S("svg",{class:"icon","aria-hidden":"true",onClick:n[2]||(n[2]=u=>e.store.copy(e.poolInfo.token_b.address&&e.poolInfo.token_b.address))},Xf))])])]),d("div",zf,[d("div",Wf,C(e.$t("common.apr")),1),d("div",Vf,[Xe(C(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:ge(Ee))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:ge(Ee))(e.apr,2))+"% ",1),d("div",Kf,[be(r,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),d("div",Yf,[d("div",Gf,C(e.$t("common.liquidity")),1),d("div",Qf,"$"+C(e.liquidityTvl),1)]),d("div",Jf,[d("div",Zf,C(e.$t("common.volume24h")),1),d("div",xf,"$"+C(e.vol24),1)]),d("div",em,[d("div",nm,C(e.$t("newAdd.tickSpacing")),1),d("div",tm,C(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):F("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(w(),S("div",om,[Xe(C("Farming Bonus")+" "),d("div",im,[(w(!0),S(jn,null,_t(e.rewarderInfo,u=>(w(),S("div",{key:u,class:Re(["rewards-list",u.day==0?"rewards-none":""])},[rm,un(d("img",am,null,512),[[s,u.logoUrl]]),d("div",lm,[d("p",null,C(u.day)+" "+C(u.symbol)+" / "+C(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):F("",!0)],64))])):F("",!0)}const um=pn(Pf,[["render",sm],["__scopeId","data-v-139d055a"]]),cm=mn({components:{Modal:ei},props:{poolInfo:{type:Object,required:!0}},setup(e){const n=L({}),t=fn(),o=ne(()=>t),i=ne(()=>o.value.chainName),a=ne(()=>Zt[i.value]);let r=L(!0);const l=ot(),s=ne(()=>l),u=xo(),f=ne(()=>e.poolInfo.needReverse);return Pe(()=>s.value.currentPositionInfo,g=>{console.log(g,"==>newVal111111"),g&&(n.value=g)},{immediate:!0}),{getExplorerUrl:jo,addCommom:Ee,router:u,pools:s,positionInfo:n,decimalFormat:vt,rateChange:r,config:a,importIcon:We,store:o,chainName:i,checkNullObj:_n,needReverse:f,getCoinIcon:g=>{var M;return(g==null?void 0:g.logoURI)||(g==null?void 0:g.logo_url)||((M=s.value.tokensObj[g==null?void 0:g.address])==null?void 0:M.logo_url)||(o.value.theme==="default"?We("/image/coins/unknown.png"):We("/image/coins/sui-unknown.png"))},decimalUi:Le}}});const Io=e=>(Hn("data-v-e3466cf5"),e=e(),Xn(),e),dm=Io(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),fm={class:"rejected-container"},mm={class:"coin-pair"},pm=Io(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),vm=[pm],hm=["href"],gm=Io(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-jump"})],-1)),ym=[gm],bm={class:"coin-pair"},km={class:"fee"},wm={class:"status"},Cm={class:"min-and-max"},Pm={key:0},$m={class:"text"},_m={key:0,src:ti,alt:""},Im={key:1,src:oi,alt:""},Am={class:"text"},Sm={key:1},Tm={class:"text"},Nm={key:0,src:ti,alt:""},Mm={key:1,src:oi,alt:""},Rm={class:"text"},Lm=Io(()=>d("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),qm=[Lm];function Um(e,n,t,o,i,a){const r=_r,l=Fa,s=ko,u=ni("Modal"),f=Rt("image");return w(),ke(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:n[3]||(n[3]=h=>e.$emit("onClose"))},{closeIcon:Ie(()=>[dm]),default:Ie(()=>[d("div",fm,[be(r,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>[d("div",mm,[Xe(C(e.positionInfo.tokenName)+" ",1),(w(),S("svg",{class:"icon","aria-hidden":"true",onClick:n[0]||(n[0]=h=>e.store.copy(e.positionInfo.nftHash))},vm)),d("a",{href:e.chainName==="Aptos"?("getExplorerUrl"in e?e.getExplorerUrl:ge(jo))("nftAddress",e.positionInfo.nftHash):("getExplorerUrl"in e?e.getExplorerUrl:ge(jo))("nftAddress",e.positionInfo.pos_object_id),target:"_blank"},ym,8,hm)])]),_:1},8,["loading"]),d("div",{class:Re(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[be(r,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>{var h,g,M,_,ce,m,I,P,y,p,b,O;return[d("div",bm,[d("div",null,[un(d("img",null,null,512),[[f,e.getCoinIcon(e.needReverse?(g=e.positionInfo)==null?void 0:g.token_b:(h=e.positionInfo)==null?void 0:h.token_a)]]),un(d("img",null,null,512),[[f,e.getCoinIcon(e.needReverse?(_=e.positionInfo)==null?void 0:_.token_a:(M=e.positionInfo)==null?void 0:M.token_b)]])]),d("span",null,C(e.needReverse?(P=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:P.symbol:(m=(ce=e.positionInfo)==null?void 0:ce.token_a)==null?void 0:m.symbol)+" - "+C(e.needReverse?(O=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:O.symbol:(p=(y=e.positionInfo)==null?void 0:y.token_b)==null?void 0:p.symbol),1)]),d("div",km,C(e.$t("common.fee"))+" "+C(e.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),d("div",wm,[be(l,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),be(r,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>{var h,g,M,_,ce,m,I,P;return[d("div",Cm,[(e.needReverse?!e.rateChange:e.rateChange)?(w(),S("div",Pm,[d("div",$m,C(("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(w(),S("img",_m)):(w(),S("img",Im)),d("div",Am,C(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+C((g=(h=e.positionInfo)==null?void 0:h.token_b)==null?void 0:g.symbol)+" per "+C((_=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:_.symbol),1)])):(w(),S("div",Sm,[d("div",Tm,C(("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(w(),S("img",Nm)):(w(),S("img",Mm)),d("div",Rm,C(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+C((m=(ce=e.positionInfo)==null?void 0:ce.token_a)==null?void 0:m.symbol)+" per "+C((P=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:P.symbol),1)])),(w(),S("svg",{class:"icon-change","aria-hidden":"true",onClick:n[1]||(n[1]=y=>e.rateChange=!e.rateChange)},qm))])]}),_:1},8,["loading"])]),be(s,{disabled:("checkNullObj"in e?e.checkNullObj:ge(_n))(e.positionInfo),onClick:n[2]||(n[2]=h=>e.router.push(`/position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:Ie(()=>[Xe(C(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])}const Om=pn(cm,[["render",Um],["__scopeId","data-v-e3466cf5"]]),Bm=mn({components:{Modal:ei},setup(){const e=fn(),n=ne(()=>e);return{importIcon:We,store:n}}}),Fm=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,Em=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const jm=e=>(Hn("data-v-d7a9ceb3"),e=e(),Xn(),e),Dm=jm(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Hm={class:"create-success-container"},Xm={key:0,src:Fm,alt:""},zm={key:1,src:Em,alt:""},Wm={class:"waiting-title"};function Vm(e,n,t,o,i,a){const r=ni("Modal");return w(),ke(r,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:n[0]||(n[0]=l=>e.$emit("onClose"))},{closeIcon:Ie(()=>[Dm]),default:Ie(()=>[d("div",Hm,[e.store.theme=="default"?(w(),S("img",Xm)):(w(),S("img",zm)),d("p",Wm,C(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const Km=pn(Bm,[["render",Vm],["__scopeId","data-v-d7a9ceb3"]]),Ym=mn({components:{Modal:ei,CoinPairName:Nr},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},currentPrice:{type:String,default:""},needReverse:{type:Boolean,default:!1},direct:{type:Boolean,default:!0}},setup(e,n){const{t}=Ar(),o=bo(),i=fn(),a=ne(()=>i),r=ot(),l=ne(()=>r);return{t,route:o,decimalFormat:vt,addCommom:Ee,store:a,createPool:()=>{n.emit("createPool")},importIcon:We,getCoinIcon:f=>{var h;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((h=l.value.tokensObj[f==null?void 0:f.address])==null?void 0:h.logo_url)||(a.value.theme==="default"?We("/image/coins/unknown.png"):We("/image/coins/sui-unknown.png"))},decimalUi:Le}}});const Gm=e=>(Hn("data-v-f211730c"),e=e(),Xn(),e),Qm=Gm(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Jm={class:"create-pool-content"},Zm={class:"top"},xm={class:"coin-pair-box"},ep={class:"induction info"},np={class:"item"},tp={class:"induction-text"},op={class:"induction-value"},ip={class:"item"},rp={class:"induction-text"},ap={class:"induction-value"},lp={class:"item"},sp={class:"induction-text"},up={class:"induction-value"},cp={class:"min-and-max"},dp={class:"text"},fp={key:0,src:ti,alt:""},mp={key:1,src:oi,alt:""},pp={class:"text"},vp={class:"deposit-amount"},hp={class:"deposit-amount-title"},gp={class:"bottom"};function yp(e,n,t,o,i,a){const r=Nr,l=ko,s=ni("Modal"),u=Rt("image");return w(),ke(s,{width:"440px",visible:!0,footer:null,title:e.$t("newAdd.preview"),class:"add-liquidity-modal",onCancel:n[0]||(n[0]=f=>e.$emit("onClose"))},{closeIcon:Ie(()=>[Qm]),default:Ie(()=>{var f,h;return[d("div",Jm,[d("div",Zm,[d("div",xm,[be(r,{"from-coin":e.fromCoin,"to-coin":e.toCoin},null,8,["from-coin","to-coin"])]),d("div",ep,[d("div",np,[d("span",tp,C(e.$t("common.feeTier")),1),d("span",op,C(((h=(f=e.route)==null?void 0:f.query)==null?void 0:h.fee)*100)+" %",1)]),d("div",ip,[d("span",rp,C(e.$t("newAdd.initialPrice")),1),d("span",ap,C(e.currentPrice)+" "+C(e.toCoin.symbol)+" per "+C(e.fromCoin.symbol),1)]),d("div",lp,[d("span",sp,C(e.$t("newAdd.priceRange")),1),d("span",up,[d("div",cp,[d("div",dp,C(("decimalUi"in e?e.decimalUi:ge(Le))(e.minPrice,6)),1),e.store.theme=="default"?(w(),S("img",fp)):(w(),S("img",mp)),d("div",pp,C(e.maxPrice&&String(e.maxPrice).indexOf("+")>-1?"∞":("decimalUi"in e?e.decimalUi:ge(Le))(e.maxPrice,6)),1)])])])])]),d("div",vp,[d("div",hp,C(e.$t("newAdd.depositAmount")),1),d("div",gp,[d("div",null,[un(d("img",null,null,512),[[u,e.getCoinIcon((e.needReverse?!e.direct:e.direct)?e.fromCoin:e.toCoin)]]),d("p",null,C((e.needReverse?!e.direct:e.direct)?e.fromCoinAmount?e.fromCoinAmount:0:e.toCoinAmount?e.toCoinAmount:0),1),d("span",null,C((e.needReverse?!e.direct:e.direct)?e.fromCoin.symbol:e.toCoin.symbol),1)]),d("div",null,[un(d("img",null,null,512),[[u,e.getCoinIcon((e.needReverse?!e.direct:e.direct)?e.toCoin:e.fromCoin)]]),d("p",null,C((e.needReverse?!e.direct:e.direct)?e.toCoinAmount?e.toCoinAmount:0:e.fromCoinAmount?e.fromCoinAmount:0),1),d("span",null,C((e.needReverse?!e.direct:e.direct)?e.toCoin.symbol:e.fromCoin.symbol),1)])])])]),be(l,{class:"big-btn liquidity-btn",onClick:e.createPool},{default:Ie(()=>[Xe(C(e.$t("newAdd.createAndAddLiquidity")),1)]),_:1},8,["onClick"])]}),_:1},8,["title"])}const bp=pn(Ym,[["render",yp],["__scopeId","data-v-f211730c"]]),kp={1e-4:2,5e-4:10,.002:60,.006:200},wp={1e-4:2,5e-4:10,.0025:60,.01:200},Cp=mn({setup(){let e=L(!1);const{t:n,locale:t}=Ar(),o=Ta(),i=ne(()=>o),a=fn(),r=L(0),l=L(!1),s=L(!1),u=L(!1),f=L("fromCoin"),h=L(""),g=L(""),M=L(!1),_=L(!0),ce=L(!1),m=L(!0),I=L(!1),P=L(""),y=L(""),p=L(""),b=L(""),O=L(""),z=L(""),Q=L(!1),fe=L(!1),Z=L(!1),T=L(""),J=L(0),j=L(!0),G=L(!1),we=L([]),V=L(""),ae=L(30),le=L("30D"),oe=L("Estimated APR"),ie=L([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),he=L(!0),x=fn(),K=ne(()=>x),vn=ne(()=>{var c;return!!((c=q==null?void 0:q.query)!=null&&c.action&&(!k.value||!$.value||!T.value))}),X=ne(()=>K.value.chainName?go(K.value.chainName):{}),Ke=ne(()=>{var c;return(c=K.value)==null?void 0:c.filterCreatePoolCoin}),je=c=>{console.log(c,"====>>>>item",c.num,ae.value),an.updateCurrentPools(re.value.poolAddress,K.value.chainName),le.value=c.time,ae.value=c.num},hn=()=>{console.log("reviseValue==>"),he.value=!he.value},yn=L([]),cn=()=>{r.value=0,q.query.action!=="create-pool"&&q.query.actions!=="new-position"&&(wt(),Cn(),an.updateCurrentPools(re.value.poolAddress,K.value.chainName)),an.setPoolConfigList(To.value,K.value.filterCoinsObj)},zn=ne(()=>Number(p.value)>0&&Number(b.value)>0&&Number(p.value)>Number(b.value)),Je=c=>{ce.value=c,p.value="0",b.value="∞"},Be=ne(()=>{if(W.value.poolConfigList&&k.value&&$.value){const c=W.value.poolConfigList.filter(A=>{var R,E,D,Y;return A.token_a.address.toUpperCase()===((R=k.value.address)==null?void 0:R.toUpperCase())&&A.token_b.address.toUpperCase()===((E=$.value.address)==null?void 0:E.toUpperCase())||A.token_b.address.toUpperCase()===((D=k.value.address)==null?void 0:D.toUpperCase())&&A.token_a.address.toUpperCase()===((Y=$.value.address)==null?void 0:Y.toUpperCase())});console.log(c,"===>info");const v=[];return c.forEach(A=>{v.push(Number(A.fee))}),console.log(v,"===>>result"),v}else return[]}),bn=ne(()=>{if(W.value.poolConfigList&&k.value&&$.value){const c=W.value.poolConfigList.filter(R=>{var Y,me,de,se;const E=R.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":R.coin_a_address,D=R.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":R.coin_b_address;return console.log(R,"p===>1334"),E.toUpperCase()===((Y=k.value.address)==null?void 0:Y.toUpperCase())&&D.toUpperCase()===((me=$.value.address)==null?void 0:me.toUpperCase())||D.toUpperCase()===((de=k.value.address)==null?void 0:de.toUpperCase())&&E.toUpperCase()===((se=$.value.address)==null?void 0:se.toUpperCase())}),v={};let A=new B(0);return console.log(c,"info===>"),c.forEach(R=>{A=A.add(new B(R.object.liquidity))}),c.forEach(R=>{const E=new B(R.object.liquidity),D=E.gt(0)?new B(E).div(A).mul(100).toString():0;v[R.fee]={rateText:(D>0&&D<.01?"<0.01":D==0?0:Kt(D,2))+"% select",rate:D}}),console.log(v,"===>1356"),console.log(A.toString(),"totalTvl.toString()"),v}}),wn=ne(()=>[{label:.01+"% "+n("common.feeTier"),title:.01+"% ",fee:1e-4,text:n("newAdd.bestVeryStablePairs")},{label:.05+"% "+n("common.feeTier"),title:.05+"% ",fee:5e-4,text:n("newAdd.bestStablePairs")},K.value.chainName=="Aptos"?{label:.2+"% "+n("common.feeTier"),title:.2+"% ",fee:.002,text:n("newAdd.bestMostPairs")}:{label:.25+"% "+n("common.feeTier"),title:.25+"% ",fee:.0025,text:n("newAdd.bestMostPairs")},K.value.chainName=="Aptos"?{label:.6+"% "+n("common.feeTier"),title:.6+"% ",fee:.006,text:n("newAdd.besteExoticPairs")}:{label:"1% "+n("common.feeTier"),title:"1% ",fee:.01,text:n("newAdd.besteExoticPairs")}]),De=ne(()=>a.slippage),te=ne(()=>!k.value||!$.value),qe=ne(()=>{var c,v;return!P.value&&!y.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(P.value)>Number(Ze.value)||Number(y.value)>Number(en.value)?(console.log("addLiquidityBtnDisabled22222"),!0):on.value!==n("button.addLiquidity")&&on.value!==n("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",on.value),!0):re.value&&re.value&&re.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):(c=q==null?void 0:q.query)!=null&&c.action&&!H.value&&!((v=H.value)!=null&&v.currentPrice)?(console.log("addLiquidityBtnDisabled55555"),!0):!!(Number(P.value)<=0&&Number(y.value)<=0||!Ae.value&&Number(P.value)==0||!Se.value&&Number(y.value)==0||Z.value)}),on=ne(()=>{var c,v,A;return re.value&&re.value.is_pause?"Pool Closed":!k.value||!$.value?n("modal.selectTokenModalTitle"):To.value=="Sui"&&!Be.value.includes(1e-4)&&!Be.value.includes(5e-4)&&!Be.value.includes(.0025)&&!Be.value.includes(.01)&&!Ke.value[k==null?void 0:k.value.address]&&!Ke.value[(c=$.value)==null?void 0:c.address]?"Invalid Pool":(q.query.action||q.query.actions)&&!T.value&&Zt[K.value.chainName].hasCreatePool?(console.log("addLiquidityBtnDisabled11111"),"Select fee tier"):te.value?n("modal.selectTokenModalTitle"):!Zt[K.value.chainName].hasCreatePool&&!re.value?n("button.poolNotFound"):Number(P.value)>Number(Ze.value)?n("button.insufficientBalance",{name:k.value.symbol}):Number(y.value)>Number(en.value)?n("button.insufficientBalance",{name:$.value.symbol}):I.value?n("modal.selectTokenModalTitle"):(console.log(re.value,"==>poolInfo.value"),console.log(!re.value&&((v=q==null?void 0:q.query)==null?void 0:v.action),"===>!poolInfo.value && route?.query?.action"),!re.value&&k.value&&$.value&&((A=q==null?void 0:q.query)==null?void 0:A.action)=="create-pool"?n("newAdd.preview"):!Number(P.value)&&!Number(y.value)?n("button.enterAmount"):b.value!=="∞"&&Number(p.value)>=Number(b.value)?n("newAdd.invalidRange"):n("button.addLiquidity"))}),U=ne(()=>{var c,v,A;return!re.value||_n(K.value.addressHistTokens)||!K.value.addressHistTokens[(c=re.value)==null?void 0:c.poolAddress]?null:Object.fromEntries((A=K.value.addressHistTokens[(v=re.value)==null?void 0:v.poolAddress])==null?void 0:A.data.map(R=>[R.key,R.value]))}),ee=ne(()=>_.value?U.value&&Le(ae.value==7?U.value.before_7_d_contract_price_lowest:ae.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest,6)||0:U.value&&Le(new B(1).div(ae.value==7?U.value.before_7_d_contract_price_highest:ae.value==24?U.value.before_24_h_contract_price_highest:U.value.before_30_d_contract_price_highest).toString(),6)||0),xe=ne(()=>_.value?U.value&&Le(ae.value==7?U.value.before_7_d_contract_price_highest:ae.value==24?U.value.before_24_h_contract_price_highest:U.value.before_30_d_contract_price_highest,6)||0:(U.value&&Le(1/Number(ae.value==7?U.value.before_7_d_contract_price_lowest:ae.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest),6))==1/0?0:U.value&&Le(1/Number(ae.value==7?U.value.before_7_d_contract_price_lowest:ae.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest),6)||0),Me=xo(),k=L(),$=L();yo(()=>{document.body.clientWidth<750?(he.value=!1,e.value=!1):(he.value=!0,e.value=!0)});const Ut=c=>{var v,A;(v=re.value)==null||v.token_a.decimals,(A=re.value)==null||A.token_b.decimals,c!==p.value&&V.value=="full range"?(zt({key:"custom",...N.value.custom}),console.log(N.value.custom.min,"priceConfigObj.value[custom].min")):(V.value!=="full range"&&V.value!=="custom"&&(V.value="custom"),p.value=c)},Ot=c=>{c!==b.value&&V.value=="full range"?zt({key:"custom",...N.value.custom}):(V.value!=="full range"&&V.value!=="custom"&&(V.value="custom"),b.value=c)},Bt=()=>{var v;if(q.query.action)_.value=!_.value,H.value&&Ao(Le(new B(1).div(H.value.currentPrice).toString(),(v=$==null?void 0:$.value)==null?void 0:v.decimals));else if(j.value=!0,j.value=!1,_.value=!_.value,p.value!==""&&b.value!==""&&p.value!=="0"&&b.value!=="∞"){const A=p.value,R=b.value;p.value=new B(1).div(R).toString(),b.value=new B(1).div(A).toString();const E=O.value,D=z.value;O.value=new B(1).div(D).toString(),z.value=new B(1).div(E).toString(),G.value=!1}const c=k.value;k.value=$.value,$.value=c,m.value?P.value=y.value:y.value=P.value};Pe([p,b],([c,v])=>{console.log(c,v,"==>minPrice,maxPrice"),Number(c)!==0&&Number(v)!==0&&Cn(),v!=="∞"&&Number(c)!==0&&Number(v)!==0&&Number(c)>=Number(v)?Z.value=!0:Z.value=!1,Number(c)==0&&Number(v)==0&&Ye.value&&(Z.value=!0,console.log("价格区间错误"))});const Qn=L(!1),Jn=L(!1),Ft=c=>{var v,A,R,E,D,Y,me,de,se;f.value=c,c==="fromCoin"?(h.value=((v=$.value)==null?void 0:v.address)||"",g.value=((A=k.value)==null?void 0:A.address)||"",((R=q==null?void 0:q.query)==null?void 0:R.action)=="create-pool"&&((E=q==null?void 0:q.query)==null?void 0:E.from)==="pool"?Jn.value=!0:Jn.value=!1,Qn.value=!1):(h.value=((D=k.value)==null?void 0:D.address)||"",g.value=((Y=$.value)==null?void 0:Y.address)||"",((me=q==null?void 0:q.query)==null?void 0:me.action)=="create-pool"&&((de=q==null?void 0:q.query)==null?void 0:de.from)==="pool"&&!Ke[(se=k.value)==null?void 0:se.address]?(console.log("0515###这里这里##fromCoin.value###",k.value),Qn.value=!0):Qn.value=!1,Jn.value=!1),M.value=!0},Ue=L(null),Oe=L(null),bt=L({}),kt=L({}),Et=c=>{var v,A,R,E;I.value=!1,f.value==="fromCoin"?(((v=k.value)==null?void 0:v.address)===((A=Ue.value)==null?void 0:A.address)?($.value&&c.address.toLowerCase()===($==null?void 0:$.value.address.toLowerCase())&&($.value=null,Oe.value=null,T.value=""),k.value=c):(k.value&&c.address.toLowerCase()===(k==null?void 0:k.value.address.toLowerCase())&&(k.value=null,Ue.value=null,T.value=""),$.value=c),Ue.value=c,q.query.action||(q.query.fee="")):(((R=$.value)==null?void 0:R.address)===((E=Oe.value)==null?void 0:E.address)?(k.value&&c.address.toLowerCase()===(k==null?void 0:k.value.address.toLowerCase())&&(k.value=null,Ue.value=null,T.value=""),$.value=c):($.value&&c.address.toLowerCase()===($==null?void 0:$.value.address.toLowerCase())&&($.value=null,Oe.value=null,T.value=""),k.value=c),Oe.value=c,q.query.action||(q.query.fee="")),Ao(""),M.value=!1},jt=c=>{c==="fromCoin"?(m.value=!0,K.value.chainName==="Aptos"?P.value=Number(Ze.value)>0?k.value.symbol=="APT"?new B(Number(Ze.value)).sub(new B(.1)).lt(new B(0))?"0":new B(Number(Ze.value)).sub(new B(.1)).toString():String(Ze.value):"":P.value=Number(Ze.value)>0?k.value.symbol=="SUI"?new B(Number(Ze.value)).sub(new B(.05)).lt(new B(0))?"0":new B(Number(Ze.value)).sub(new B(.05)).toString():String(Ze.value):""):(m.value=!1,K.value.chainName==="Aptos"?y.value=Number(en.value)>0?$.value.symbol=="APT"?new B(Number(en.value)).sub(new B(.1)).lt(new B(0))?"0":new B(Number(en.value)).sub(new B(.1)).toString():String(en.value):"":y.value=Number(en.value)>0?$.value.symbol=="SUI"?new B(Number(en.value)).sub(new B(.05)).lt(new B(0))?"0":new B(Number(en.value)).sub(new B(.05)).toString():String(en.value):"")},Dt=c=>{c==="fromCoin"?(m.value=!0,P.value=Number(Ze.value)>0?Kt(new B(Number(Ze.value)).div(2).toString(),k.value.decimals).toString():""):(m.value=!1,y.value=Number(en.value)>0?Kt(new B(Number(en.value)).div(2).toString(),$.value.decimals).toString():"")};Pe(P,(c,v)=>{console.log(P,"===>fromCoinAmount"),c==""&&m.value&&(y.value=""),c&&m.value&&Cn()}),Pe(y,(c,v)=>{console.log(c,"===>>>>newValsda"),c==""&&!m.value&&(P.value=""),c&&!m.value&&Cn()});const Ht=()=>{k.value=null,$.value=null,p.value="0",b.value="0",P.value="",y.value="",I.value=!0,T.value="",Q.value=!1,Ae.value=!0,Se.value=!0,j.value=!1},it=L(!1),{setIsShowSuccess:Ln,setIsShowRejected:qn,setIsShowWaiting:rn,setTransactionDesc:rt,setTransactionTxid:Un,setPositiomNum:at}=a,q=bo(),an=ot(),Wn=ne(()=>Zt[K.value.chainName].hasCreatePool);Pe(()=>[T.value,q.query.action,k.value,$.value,q.query.actions,Wn.value],([c,v,A,R,E,D])=>{!c&&(v=="create-pool"||E=="new-position")&&A&&R&&D?(Q.value=!0,j.value=!1):(!A||!R)&&(Q.value=!1)},{immediate:!0});const W=ne(()=>an);Pe(()=>W.value.tokens,async c=>{if(c&&c.length>0){const v=c;if(q&&q.query&&q.query.tokena&&(console.log("0410###deposite###watch###route.query.tokena####",q.query.tokena),q.query.tokena)){const A=await X.value.getTokenBySymbol(v,q.query.tokena);k.value=A,Ue.value=A}if(q&&q.query&&q.query.tokenb&&q.query.tokenb){const A=await X.value.getTokenBySymbol(v,q.query.tokenb);$.value=A,Oe.value=A}}},{immediate:!0});const On=L({}),Ae=L(!1),Se=L(!1),lt=L(),st=L(),Ye=L(),kn=L(),Cn=async()=>{var He,$e,ln,Ve,Ne,ze;if(!p.value&&!b.value)return!1;if(!P.value&&!y.value&&!p.value&&!b.value)return;const c=re.value?re.value:H.value;if(console.log(c,"===>poolInfos"),_n(c))return;console.log("添加流动性预计算=====>");const{TickUtil:v,TickMath:A,getNearestTickByTick:R}=X.value,E=c==null?void 0:c.token_a.decimals,D=c==null?void 0:c.token_b.decimals;let Y,me,de,se,ue,pe,Ce,Te,ye=c.current_tick_index,ve;if(c.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&c.token_b.address.toLowerCase()===$.value.address.toLowerCase()?ve=!0:ve=!1,console.log(ve,"=====>directs"),console.log("currentTickIndex####",ye),console.log("currentTickIndex####",ye),console.log("currentTickIndex####",ye),p.value==="0"&&b.value==="∞")de=v.getMinIndex(Number(c.tickSpacing)),se=v.getMaxIndex(Number(c.tickSpacing)),ue=A.tickIndexToSqrtPriceX64(de),pe=A.tickIndexToSqrtPriceX64(se);else if(V.value=="custom"||q.query.action){console.log(ve,"===>directs1866"),ve?(Y=Number(p.value),me=Number(b.value)):(Y=new B(1).div(b.value).toString(),me=new B(1).div(p.value).toString()),console.log("0518###pre###directs###",ve),console.log("0518###pre###minPrice###",p.value),console.log("0518###pre###maxPrice###",b.value),console.log("0518###pre###poolInfos###",c),console.log("0518###pre###decimalsA###",E),console.log("0518###pre###decimalsB###",D),console.log("0518###pre###currentTickIndex###",ye),console.log(Y,me,"min max1875"),console.log(p.value,b.value,"===>maxPrice.value");try{Ce=Y==0?-443636:A.priceToTickIndex(new B(Y),E,D)}catch{Ce=-443636}try{Te=A.priceToTickIndex(new B(me),E,D)}catch{Te=443636}de=R(Ce,Number(c.tickSpacing)),se=R(Te,Number(c.tickSpacing)),console.log("0523####min####",Y),console.log("0523####max####",me),ue=A.priceToSqrtPriceX64(new B(Y),E,D);try{pe=A.priceToSqrtPriceX64(new B(me),E,D)}catch{console.log("0523###test###max###",me),me===1/0&&(console.log("0523###test###max###11111"),pe=A.tickIndexToSqrtPriceX64(v.getMaxIndex(Number(c.tickSpacing))))}console.log(de,"===>tick_lower"),console.log(se,"===>tick_upper"),console.log("0518###pre###tick_lower###",de),console.log("0518###pre###tick_upper###",se)}else de=(He=N.value[V.value])==null?void 0:He.lower,se=($e=N.value[V.value])==null?void 0:$e.upper,ue=A.tickIndexToSqrtPriceX64(de),pe=A.tickIndexToSqrtPriceX64(se);if(b.value!=="∞"&&de>=se){Ae.value=!0,P.value="",Se.value=!0,y.value="";return}if(console.log(se,ye,de,"1922"),b.value==="∞"||ye>de&&ye<se){Ae.value=!1,Se.value=!1;let Fe;if(P.value||y.value){if(m.value){const Bn=new B(P.value).mul(Math.pow(10,k.value.decimals)).toString();Fe=new $n(Bn)}else{const Bn=new B(y.value).mul(Math.pow(10,$.value.decimals)).toString();Fe=new $n(Bn)}console.log(ve,"======>directs");const{liquidityAmount:_e,tokenMaxA:sn,tokenMaxB:Ge,tokenMaxAOrigin:Qe,tokenMaxBOrigin:Pn}=X.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:c.token_a,tokenB:c.token_b,lowerTick:de,upperTick:se,coinAmount:Fe,iscoinA:ve?m.value:!m.value,roundUp:!0,slippage:Number(De.value)/100,curSqrtPrice:new $n(c.current_sqrt_price)});On.value={liquidityAmount:_e,tokenMaxA:sn,tokenMaxB:Ge,tokenMaxAOrigin:Qe,tokenMaxBOrigin:Pn},console.log(_e,sn,Ge,Qe,Pn,"preAdd"),ve?m.value?y.value=Number(Ge)>0?Ge:"":P.value=Number(sn)>0?sn:"":m.value?y.value=sn:P.value=Ge}}else if(ye>=se){if(ve?P.value="":y.value="",Ae.value=ve,Se.value=!ve,(ln=q==null?void 0:q.query)!=null&&ln.action&&(Ae.value=!0,Se.value=!0),P.value||y.value){let Fe;if(ve){const _e=new B(y.value).mul(Math.pow(10,(Ve=$.value)==null?void 0:Ve.decimals)).toString();Fe=new $n(_e),On.value={liquidityAmount:X.value.estimateLiquidityForCoinB(ue,pe,Fe),tokenMaxA:0,tokenMaxB:y.value}}else{const _e=new B(P.value).mul(Math.pow(10,(Ne=k.value)==null?void 0:Ne.decimals)).toString();Fe=new $n(_e),On.value={liquidityAmount:X.value.estimateLiquidityForCoinB(ue,pe,Fe),tokenMaxA:0,tokenMaxB:P.value}}}}else if(ye<=de){if(Ae.value=!ve,Se.value=ve,(ze=q==null?void 0:q.query)!=null&&ze.action&&(Ae.value=!0,Se.value=!0),ve?y.value="":P.value="",P.value||y.value){let Fe;if(ve){const _e=new B(P.value).mul(Math.pow(10,k.value.decimals)).toString();Fe=new $n(_e),console.log(ue,"minPriceX64===>"),console.log(pe,"maxPriceX64===>maxPriceX64"),console.log(_e,"===>amount"),On.value={liquidityAmount:X.value.estimateLiquidityForCoinA(ue,pe,Fe),tokenMaxA:P.value,tokenMaxB:0}}else{const _e=new B(y.value).mul(Math.pow(10,$.value.decimals)).toString();Fe=new $n(_e),On.value={liquidityAmount:X.value.estimateLiquidityForCoinA(ue,pe,Fe),tokenMaxA:y.value,tokenMaxB:0}}}}else Ae.value=!0,P.value="",Se.value=!0,y.value=""},Vn=L(0);Pe(()=>{var c;return(c=q.query)==null?void 0:c.fee},c=>{c&&(Vn.value=c,T.value=Number(c)*100+"% "+n("common.feeTier"))},{immediate:!0,deep:!0});const ut=ne(()=>{var E,D,Y,me,de;const c=(E=q==null?void 0:q.query)==null?void 0:E.fee,v=(D=q==null?void 0:q.query)==null?void 0:D.tokena,A=(Y=q==null?void 0:q.query)==null?void 0:Y.tokenb;let R=null;console.log("0501###basePoolInfo###tokena###",v),console.log("0501###basePoolInfo###tokenb###",A),console.log("0501###basePoolInfo###fromCoin###",(me=k==null?void 0:k.value)==null?void 0:me.address),console.log("0501###basePoolInfo###toCoin###",(de=$==null?void 0:$.value)==null?void 0:de.address),console.log("0501###basePoolInfo###fee###",c),console.log(W.value.poolConfigList,"===>pools.value.poolConfigList");for(let se=0;se<W.value.poolConfigList.length;se++){const ue=W.value.poolConfigList[se];console.log(ue,"p===>"),!v||!A?R={}:(ue.token_a.address.toUpperCase()===(v==null?void 0:v.toUpperCase())&&ue.token_b.address.toUpperCase()===(A==null?void 0:A.toUpperCase())||ue.token_b.address.toUpperCase()===(v==null?void 0:v.toUpperCase())&&ue.token_a.address.toUpperCase()===(A==null?void 0:A.toUpperCase()))&&(R=ue)}return console.log("0501###baseInfo###",R),R}),re=ne(()=>{var v,A,R,E,D,Y,me,de,se,ue,pe,Ce,Te;const c=(v=q==null?void 0:q.query)==null?void 0:v.fee;if(k.value&&$.value){let ye=null;if(c)for(const He in W.value.poolsObj){const $e=W.value.poolsObj[He];($e.token_a.address.toUpperCase()===((R=(A=k==null?void 0:k.value)==null?void 0:A.address)==null?void 0:R.toUpperCase())&&$e.token_b.address.toUpperCase()===((D=(E=$==null?void 0:$.value)==null?void 0:E.address)==null?void 0:D.toUpperCase())&&Number($e.fee)==Number(Vn.value)||$e.token_b.address.toUpperCase()===((Y=k==null?void 0:k.value.address)==null?void 0:Y.toUpperCase())&&$e.token_a.address.toUpperCase()===((de=(me=$==null?void 0:$.value)==null?void 0:me.address)==null?void 0:de.toUpperCase())&&Number($e.fee)==Number(Vn.value))&&(ye=$e)}const ve=[];if(!((se=q==null?void 0:q.query)!=null&&se.action)&&(!c||!ye)){for(const He in W.value.poolsObj){const $e=W.value.poolsObj[He];($e.token_a.address.toUpperCase()===((ue=k==null?void 0:k.value.address)==null?void 0:ue.toUpperCase())&&$e.token_b.address.toUpperCase()===((pe=$.value.address)==null?void 0:pe.toUpperCase())||$e.token_b.address.toUpperCase()===((Ce=k==null?void 0:k.value.address)==null?void 0:Ce.toUpperCase())&&$e.token_a.address.toUpperCase()===((Te=$.value.address)==null?void 0:Te.toUpperCase()))&&ve.push($e)}console.log(ve,"result2408===>"),ve&&ve.length>0&&(ye=ve.sort((He,$e)=>{const ln=He.coinAmountA+He.coinAmountB;return $e.coinAmountA+$e.coinAmountB-ln})[0]),console.log(ve,"result===>2351")}return ye&&!_n(ye)?ye:null}return null}),Xt=ne(()=>{var R,E;const c=(R=k==null?void 0:k.value)==null?void 0:R.address,v=(E=$==null?void 0:$.value)==null?void 0:E.address;let A=null;for(let D=0;D<W.value.poolConfigList.length;D++){const Y=W.value.poolConfigList[D];!c||!v?A={}:(Y.token_a.address.toUpperCase()===(c==null?void 0:c.toUpperCase())&&Y.token_b.address.toUpperCase()===(v==null?void 0:v.toUpperCase())||Y.token_b.address.toUpperCase()===(c==null?void 0:c.toUpperCase())&&Y.token_a.address.toUpperCase()===(v==null?void 0:v.toUpperCase()))&&(A=Y)}return console.log("0501###baseInfo###",A),A});Pe(()=>[ut.value,re.value,W.value.recommendRangesObj],(c,v)=>{var A,R,E,D,Y;c[0]&&!c[1]&&c[2]&&!_n(c[2])&&(!v||c[0]&&((A=c[0])==null?void 0:A.address)!==v[0]&&((R=v[0])!=null&&R.address))&&(E=c[0])!=null&&E.address&&!((D=q==null?void 0:q.query)!=null&&D.action)&&an.setSinglePool(c[0],c[2][(Y=c[0])==null?void 0:Y.address],K.value.chainName)},{immediate:!0,deep:!0});const N=L({}),Zn=async(c,v)=>{var A,R,E,D;if(console.log("deposit##poolInfoWatch###value####",c),c){const{TickMath:Y,getNearestTickByTick:me}=X.value;v&&(j.value=!0),c.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&c.token_b.address.toLowerCase()===$.value.address.toLowerCase()?_.value=!0:_.value=!1,G.value=!0;const de=c.token_a.decimals,se=c.token_b.decimals;Ae.value=!1,Se.value=!1,T.value=c.fee*100+"% "+n("common.feeTier");const ue=c.current_tick_index;Ye.value=Y.sqrtPriceX64ToPrice(c.current_sqrt_price,de,se).toString(),kn.value=String(1/Ye.value);const pe=await X.value.getTicks(c);if(we.value=pe?X.value.getTickDataFromUrlData(pe):[],v){let Ce=W.value.poolPriceConfigObj&&W.value.poolPriceConfigObj[c.address]&&W.value.poolPriceConfigObj[c.address].recommend_ranges||{};const Te=W.value.poolPriceConfigObj&&W.value.poolPriceConfigObj[c.address]&&W.value.poolPriceConfigObj[c.address].type||"",ye=ue-Number(Te=="unstable"?Number(c.tickSpacing)*2:Number(c.tickSpacing)*3),ve=ue+Number(Te=="unstable"?Number(c.tickSpacing)*2:Number(c.tickSpacing)*3),He=(R=(A=re==null?void 0:re.value)==null?void 0:A.token_a)==null?void 0:R.decimals,$e=(D=(E=re==null?void 0:re.value)==null?void 0:E.token_b)==null?void 0:D.decimals,ln=X.value.TickMath.tickIndexToPrice(ye,He,$e).toString(),Ve=X.value.TickMath.tickIndexToPrice(ve,He,$e).toString();Ce["full range"]={lower:-443636,upper:443636},Ce.custom={lower:ye,upper:ve,minPrice:ln,maxPrice:Ve};const Ne=[];for(let ze in Ce)Ce[ze]&&Ne.push({...Ce[ze],key:ze});yn.value=Ne,Te?c.isSelfBuilt?V.value="custom":Te=="stable"?V.value="suggested":V.value="passive":V.value="custom",N.value=Ce,zt({key:V.value,...Ce[V.value]}),console.log(yn,"===>currentPriceTabList")}j.value=!1}else j.value=!1},Kn=ne(()=>an.getPoolInfoSuccess);Pe(()=>re.value,(c,v)=>{var A,R,E,D,Y,me,de,se,ue,pe,Ce,Te;console.log("0419###poolInfo###watch###",c),console.log("0419###poolInfo###pools.value.poolsObj###",W.value.poolsObj),c?((!v||c.poolAddress!==v.poolAddress||c.current_sqrt_price!==v.current_sqrt_price)&&Zn(c,!v||c.poolAddress!==v.poolAddress),Me.push(`/deposit?poolAddress=${c==null?void 0:c.address}&tokena=${(A=k==null?void 0:k.value)==null?void 0:A.address}&tokenb=${(R=$==null?void 0:$.value)==null?void 0:R.address}&fee=${c==null?void 0:c.fee}`)):((E=q==null?void 0:q.query)==null?void 0:E.actions)=="new-position"||(!Xt.value&&Wn.value&&((D=k==null?void 0:k.value)!=null&&D.address||(Y=$==null?void 0:$.value)!=null&&Y.address)?(T.value="",p.value="0",b.value="0",Ae.value=!1,Se.value=!1,j.value=!1,Ye.value="",kn.value="",console.log("0501####333333",k==null?void 0:k.value),Me.push(`/deposit?action=create-pool&tokena=${(me=k==null?void 0:k.value)==null?void 0:me.address}&tokenb=${(de=$==null?void 0:$.value)==null?void 0:de.address}&from=${(se=q==null?void 0:q.query)==null?void 0:se.from}`)):Wn.value&&!c&&!((ue=q==null?void 0:q.query)!=null&&ue.action)&&Kn.value&&!ut.value?(T.value="",p.value="0",b.value="0",Ae.value=!1,Se.value=!1,j.value=!1,Ye.value="",kn.value="",console.log("0501####222222"),Me.push(`/deposit?action=create-pool&tokena=${(pe=k==null?void 0:k.value)==null?void 0:pe.address}&tokenb=${(Ce=$==null?void 0:$.value)==null?void 0:Ce.address}&from=${(Te=q==null?void 0:q.query)==null?void 0:Te.from}`)):(Ae.value=!1,Se.value=!1,j.value=!1,Ye.value="",kn.value="")),console.log(!ut.value,"===>getPoolInfoSuccess.value&& !basePoolInfo.value")},{immediate:!0});const Ze=ne(()=>i.value.assets&&k.value&&i.value.assets[k.value.address]?Bi(i.value.assets[k.value.address].balance,k.value.decimals):"0"),en=ne(()=>i.value.assets&&$.value&&i.value.assets[$.value.address]?Bi(i.value.assets[$.value.address].balance,$.value.decimals):"0"),wt=async()=>{console.log("0412###resetTickList####");const c=await X.value.getTicks(re.value);console.log("0412###resetTickList###result####",c);const v=c?X.value.getTickDataFromUrlData(c):[];we.value=v,console.log("0412###resetTickList###tickList####",v)},Ct=Ea(),Yn=ne(()=>W.value.currentPositionInfo),fa=async c=>{var ue,pe,Ce,Te,ye,ve,He,$e,ln,Ve;console.log(re.value,"===> poolInfo.value"),it.value=!1,W.value.currentPositionInfo={},Un(""),rt(n("tips.increaseLiquiditySuccess",{from:Ae.value?"":`${P.value} ${(ue=k.value)==null?void 0:ue.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(pe=$.value)==null?void 0:pe.symbol}`})),rn(!0);const v=_.value?m.value:!m.value;let A,R,E,D,Y,me;const de=re.value.token_a.decimals,se=re.value.token_b.decimals;if(p.value==="0"&&b.value==="∞")E=X.value.TickUtil.getMinIndex(Number(re.value.tickSpacing)),D=X.value.TickUtil.getMaxIndex(Number(re.value.tickSpacing));else if(V.value=="custom"){_.value?(A=Number(p.value),R=Number(b.value)):(A=new B(1).div(b.value).toString(),R=new B(1).div(p.value).toString()),console.log("0519###toAdd###min###",A),console.log("0519###toAdd###max###",R),console.log("0519###toAdd###minPrice.value###",p.value),console.log("0519###toAdd###maxPrice.value###",b.value);try{Y=A==0?X.value.TickUtil.getMinIndex(Number(re.value.tickSpacing)):X.value.TickMath.priceToTickIndex(new B(A),de,se)}catch{Y=X.value.TickUtil.getMinIndex(Number(re.value.tickSpacing))}try{me=X.value.TickMath.priceToTickIndex(new B(R),de,se)}catch{me=X.value.TickUtil.getMaxIndex(Number(re.value.tickSpacing))}E=X.value.getNearestTickByTick(Y,Number(re.value.tickSpacing)),D=X.value.getNearestTickByTick(me,Number(re.value.tickSpacing))}else E=N.value[V.value].lower,D=N.value[V.value].upper;try{const Ne=await X.value.getAddLiquidityTransactionPayload({pool:{poolAddress:re.value.poolAddress,token_a:re.value.token_a,token_b:re.value.token_b},amount:m.value?P.value:y.value,fix_amount_a:v,tick_lower:E,tick_upper:D,index:0,slippage:Number(De.value)/100,roundUp:!0});let ze;if(K.value.chainName==="Aptos")ze=await i.value.currentWallet.signAndSubmitTransaction(Ne);else{const Fe=await i.value.currentWallet.signAndExecuteTransactionBlock(Ne);ze=X.value.handleTx(Fe)}if(console.log("0410###tx###",ze),ze&&ze.hash){Un(ze.hash),rn(!1),Ln(!0);const Fe=pi();let _e;re.value.needReverse?re.value.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&re.value.token_b.address.toLowerCase()===$.value.address.toLowerCase()?_e=!1:_e=!0:re.value.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&re.value.token_b.address.toLowerCase()===$.value.address.toLowerCase()?_e=!0:_e=!1,console.log(_e,"===>directs");const sn={title:"Supplied",desc:n("tips.addLiquiditySuccessText",{from:Ae.value?"":`${P.value} ${(Ce=k.value)==null?void 0:Ce.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(Te=$.value)==null?void 0:Te.symbol}`}),hash:ze.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:_e?(ye=k.value)==null?void 0:ye.address:(ve=$.value)==null?void 0:ve.address,numa:_e?P.value:y.value,logoa:_e?W.value.tokensObj&&k.value&&k.value.address&&W.value.tokensObj[k.value.address]&&W.value.tokensObj[k.value.address].logoURI:W.value.tokensObj&&$.value&&$.value.address&&W.value.tokensObj[$.value.address]&&W.value.tokensObj[$.value.address].logoURI,tokenb:_e?($e=$.value)==null?void 0:$e.address:(He=k.value)==null?void 0:He.address,numb:_e?y.value:P.value,logob:_e?W.value.tokensObj&&$.value&&$.value.address&&W.value.tokensObj[$.value.address]&&W.value.tokensObj[$.value.address].logoURI:W.value.tokensObj&&k.value&&k.value.address&&W.value.tokensObj[k.value.address]&&W.value.tokensObj[k.value.address].logoURI},text:`Deopsit ${Ae.value?"":`${P.value} ${(ln=k.value)==null?void 0:ln.symbol}`} ${!Ae.value&&!Se.value?"and":""} ${Se.value?"":`${y.value} ${(Ve=$.value)==null?void 0:Ve.symbol}`}`};K.value.chainName!=="Aptos"&&(sn.res=ze.res),X.value.showTransitionPending(sn);const Ge=await X.value.watchTransaction(sn,!0);if(Ge.status){if(Ln(!1),W.value.setCurrentPositionLoading(!0),s.value=!0,console.log(Ge.nftInfo,"===> watchInfo.nftInfo"),K.value.chainName==="Aptos")await W.value.setCurrentPositionInfo(Ge.nftInfo[0].data.id.creator,Ge.nftInfo[0].data.id.collection,Ge.nftInfo[0].data.name,K.value.chainName),c&&await Ct.subscribePosition({pool_address:Yn.value.poolAddress,position_index:Yn.value.index},Yn.value.nftHash);else{const Qe=Ge.nftInfo,Pn=await Fi(2e3);await W.value.setCurrentPositionInfo(Qe==null?void 0:Qe.pool,"","",K.value.chainName,Qe==null?void 0:Qe.position),await Fi(1e3),console.log("0529###nftInfo###",Qe),console.log("0529###currentPositionInfo.value.index###",Yn.value.index),c&&await Ct.subscribePosition({pool_address:Yn.value.poolAddress,position_index:Yn.value.index},Yn.value.nftHash)}setTimeout(()=>{an.updateCurrentPools(re.value.poolAddress,K.value.chainName),X.value.getAccount(i.value.address)},3e3),setTimeout(async()=>{wt()},3e3)}at()}else rn(!1),qn(!0);P.value="",y.value=""}catch(Ne){P.value="",y.value="",console.log("0330###Add liquidity Error###",Ne),rn(!1),qn(!0)}},ma=c=>{switch(c){case"active":return n("newAdd.activeTips");case"passive":return n("newAdd.passiveTips");case"full range":return n("newAdd.fullRangTips");case"suggested":return n("newAdd.suggestedTips");case"custom":return n("newAdd.customTips")}},pa=c=>{switch(c){case"suggested":return n("newAdd.suggested");case"active":return n("newAdd.active");case"passive":return n("newAdd.conservative");case"full range":return n("newAdd.fullRange");case"custom":return n("newAdd.custom")}},zt=c=>{console.log("priceTab====>",c),console.log("priceTab###poolInfo###",re.value),V.value=c.key.toLowerCase();const v=re.value.token_a.decimals,A=re.value.token_b.decimals,{lower:R,upper:E}=c,D=X.value.TickMath.tickIndexToPrice(R,v,A).toString(),Y=X.value.TickMath.tickIndexToPrice(E,v,A).toString();if(c.key=="full range"){lt.value=R,st.value=E,Je(!0),Cn();return}console.log(_.value,"===>direct.value"),_.value?(O.value=String(D),p.value=String(D),z.value=String(Y),b.value=String(Y),lt.value=R,st.value=E,Cn()):(O.value=String(1/Number(Y)),p.value=String(1/Number(Y)),z.value=String(1/Number(D)),b.value=String(1/Number(D)),lt.value=X.value.TickMath.priceToTickIndex(new B(1/Number(Y)),v,A),st.value=X.value.TickMath.priceToTickIndex(new B(1/Number(D)),v,A),Cn())},va=ne(()=>W.value.tokensObj&&k.value.address&&W.value.tokensObj[k.value.address]&&W.value.tokensObj[k.value.address].logoURI),ha=ne(()=>W.value.tokensObj&&$.value.address&&W.value.tokensObj[$.value.address]&&W.value.tokensObj[$.value.address].logoURI),pi=()=>{var A,R,E,D,Y,me,de,se;let c=null;const v=W.value.poolConfigList;for(let ue=0;ue<v.length;ue++){const pe=v[ue];if(pe.token_a.address.toUpperCase()===((R=(A=k==null?void 0:k.value)==null?void 0:A.address)==null?void 0:R.toUpperCase())&&pe.token_b.address.toUpperCase()===((D=(E=$==null?void 0:$.value)==null?void 0:E.address)==null?void 0:D.toUpperCase())||pe.token_b.address.toUpperCase()===((me=(Y=k==null?void 0:k.value)==null?void 0:Y.address)==null?void 0:me.toUpperCase())&&pe.token_a.address.toUpperCase()===((se=(de=$==null?void 0:$.value)==null?void 0:de.address)==null?void 0:se.toUpperCase())){c=pe;break}}return c},ga=c=>{var A,R,E,D,Y,me,de,se,ue,pe;const v=pi();if(v&&(Ue.value=v.needReverse?v==null?void 0:v.token_b:v==null?void 0:v.token_a,Oe.value=v.needReverse?v==null?void 0:v.token_a:v==null?void 0:v.token_b,k.value=v.needReverse?v==null?void 0:v.token_b:v==null?void 0:v.token_a,$.value=v.needReverse?v==null?void 0:v.token_a:v==null?void 0:v.token_b,console.log("0524###test###11111###samePoolInfo###",v),_.value=k.value.address===((A=v==null?void 0:v.token_a)==null?void 0:A.address)),Be.value.includes(c.fee))T.value=c.label,Vn.value=c.fee,Me.push(`/deposit?tokena=${v?v.needReverse?(E=v==null?void 0:v.token_b)==null?void 0:E.address:(R=v==null?void 0:v.token_a)==null?void 0:R.address:_.value?k.value.address:$.value.address}&tokenb=${v?v.needReverse?(Y=v==null?void 0:v.token_a)==null?void 0:Y.address:(D=v==null?void 0:v.token_b)==null?void 0:D.address:_.value?$.value.address:k.value.address}&fee=${c.fee}`),p.value="0",b.value="0";else{if(console.log(Ke[k.value.address],"filterCreatePoolCoin[fromCoin.value.address]"),console.log(Ke[$.value.address],"filterCreatePoolCoin[toCoin.value.address]"),console.log(Ke.value,"filterCreatePoolCoin===>"),K.value.chainName!=="Aptos"&&!Ke.value[k.value.address]&&!Ke.value[$.value.address])return;Vn.value=c.fee,T.value=c.label,re.value&&(p.value="",b.value=""),P.value="",y.value="",Ye.value="",kn.value="",p.value="",b.value="",Wt.value="",Vt.value="",Me.push(`/deposit?action=create-pool&tokena=${v?v.needReverse?(de=v==null?void 0:v.token_b)==null?void 0:de.address:(me=v==null?void 0:v.token_a)==null?void 0:me.address:_.value?k.value.address:$.value.address}&tokenb=${v?v.needReverse?(ue=v==null?void 0:v.token_a)==null?void 0:ue.address:(se=v==null?void 0:v.token_b)==null?void 0:se.address:_.value?$.value.address:k.value.address}&fee=${c.fee}&from=${(pe=q==null?void 0:q.query)==null?void 0:pe.from}`)}},ct=L(!1),ya=()=>{re.value?it.value=!0:ct.value=!0},H=L(null),Wt=L(""),Vt=L(""),Ao=c=>{var me,de,se,ue,pe,Ce,Te,ye,ve,He,$e,ln;if(c?(Wt.value=c,Ye.value=c,kn.value=c,Vt.value=kn.value,j.value=!1):(Wt.value="",Ye.value="",kn.value="",Vt.value=""),!((me=Ue.value)!=null&&me.address)||!((de=Oe.value)!=null&&de.address))return;let v=!1;const A=W.value.poolConfigList;let R=null;for(let Ve=0;Ve<A.length;Ve++){const Ne=A[Ve];if(Ne.token_a.address.toUpperCase()===((ue=(se=Ue==null?void 0:Ue.value)==null?void 0:se.address)==null?void 0:ue.toUpperCase())&&Ne.token_b.address.toUpperCase()===((Ce=(pe=Oe==null?void 0:Oe.value)==null?void 0:pe.address)==null?void 0:Ce.toUpperCase())){v=Ne.needReverse,R=Ne;break}else if(Ne.token_b.address.toUpperCase()===((ye=(Te=Ue==null?void 0:Ue.value)==null?void 0:Te.address)==null?void 0:ye.toUpperCase())&&Ne.token_a.address.toUpperCase()===((He=(ve=Oe==null?void 0:Oe.value)==null?void 0:ve.address)==null?void 0:He.toUpperCase())){v=Ne.needReverse,R=Ne;break}}let E=!1;X.value.getIsSortedSymbols(($e=Ue.value)==null?void 0:$e.address,(ln=Oe.value)==null?void 0:ln.address)&&(E=!0);let D;E&&!_.value?D=!0:E&&_.value||!E&&_.value?D=!1:D=!0,console.log("0518###c####direct.value####",_.value),console.log("0518###c####createPoolNeedReverse####",E),console.log("0518###c####newDirect####",D);const Y=K.value.chainName=="Aptos"?kp:wp;if(k.value&&$.value&&c){const Ve=R?R==null?void 0:R.token_a.decimals:E?Oe.value.decimals:Ue.value.decimals,Ne=R?R==null?void 0:R.token_b.decimals:E?Ue.value.decimals:Oe.value.decimals,ze=c&&X.value.TickMath.priceToSqrtPriceX64(D?new B(1/c):new B(c),Ve,Ne);console.log(ze,"===>current_sqrt_price");const Fe=c&&X.value.TickMath.priceToSqrtPriceX64(new B(1).div(c),k.value.decimals,$.value.decimals),_e=X.value.TickMath.priceToTickIndex(D?new B(1).div(c):new B(c),Ve,Ne,Y[q.query.fee]),sn=_e-Y[q.query.fee]*5,Ge=_e+Y[q.query.fee]*5,Qe=X.value.TickMath.tickIndexToPrice(sn,Ve,Ne).toString(),Pn=X.value.TickMath.tickIndexToPrice(Ge,Ve,Ne).toString();D?(p.value=String(1/Pn),b.value=String(1/Qe),O.value=String(1/Pn),z.value=String(1/Qe)):(p.value=Qe,b.value=Pn,O.value=Qe,z.value=Pn),console.log("0518###c####createPoolFromCoin.value####",Ue.value),console.log("0518###c####createPoolToCoin.value####",Oe.value),console.log("0518###c####createPoolNeedReverse####",E);const Bn={token_a:R?R.token_a:E?Oe.value:Ue.value,token_b:R?R.token_b:E?Ue.value:Oe.value,isCreate:!0,tickSpacing:Y[q.query.fee],currentPrice:c,current_sqrt_price:ze,tick_lower:sn,tick_upper:Ge,current_tick_index:_e,currentPriceReverse:vt(String(1/c),6),reverse_current_sqrt_price:Fe,needReverse:v};H.value=Bn,console.log("0518###c####poolInfos####",Bn),Cn()}else H.value=null,p.value="",b.value=""},ba=async()=>{var se,ue,pe,Ce;if(K.value.chainName!=="Aptos"){vi();return}ct.value=!1;let c,v,A,R,E,D;const Y=Ue.value.decimals,me=Oe.value.decimals;Un(""),rt(n("tips.increaseLiquiditySuccess",{from:Ae.value?"":`${P.value} ${(se=k.value)==null?void 0:se.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(ue=$.value)==null?void 0:ue.symbol}`})),rn(!0),p.value==="0"&&b.value==="∞"?(A=X.value.TickUtil.getMinIndex(Number(H.value.tickSpacing)),R=X.value.TickUtil.getMaxIndex(Number(H.value.tickSpacing))):(_.value?(c=Number(p.value),v=Number(b.value)):(c=1/Number(b.value),v=1/Number(p.value)),E=c==0?-443636:X.value.TickMath.priceToTickIndex(new B(c),Y,me),D=X.value.TickMath.priceToTickIndex(new B(v),Y,me),A=X.value.getNearestTickByTick(E,Number(H.value.tickSpacing)),R=X.value.getNearestTickByTick(D,Number(H.value.tickSpacing)));const de=_.value?m.value:!m.value;try{const Te=await X.value.getCreatPoolTransactionPayload({coinTypeA:Ue.value.address,coinTypeB:Oe.value.address,tick_spacing:Number(H.value.tickSpacing),initialize_sqrt_price:new $n(H.value.current_sqrt_price),uri:"",current_tick_index:H.value.current_tick_index,max_amount_a:_.value?P.value:y.value,max_amount_b:_.value?y.value:P.value,tick_lower:A,tick_upper:R,slippage:Number(De.value)/100,decimalsA:Y,decimalsB:me,fix_amount_a:de,liquidityInput:On.value});let ye;if(console.log(JSON.stringify(Te),"===>creatPoolPayload"),K.value.chainName==="Aptos")ye=await i.value.currentWallet.signAndSubmitTransaction(Te);else{const ve=await i.value.currentWallet.signAndExecuteTransactionBlock(Te);ye=X.value.handleTx(ve)}if(ye&&ye.hash){Un(ye.hash),rn(!1),Ln(!0);const ve={title:"Created pool",desc:"Pool created successfully ",hash:ye.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(pe=k.value)==null?void 0:pe.address}`,numa:Ae.value?"":`- ${P.value}`,logoa:W.value.tokensObj&&k.value&&k.value.address&&W.value.tokensObj[k.value.address]&&W.value.tokensObj[k.value.address].logoURI,tokenb:`${(Ce=$.value)==null?void 0:Ce.address}`,numb:Se.value?"":`- ${y.value}`,logob:W.value.tokensObj&&$.value&&$.value.address&&W.value.tokensObj[$.value.address]&&W.value.tokensObj[$.value.address].logoURI},text:"Pool created successfully"};K.value.chainName!=="Aptos"&&(ve.res=ye.res),X.value.showTransitionPending(ve),(await X.value.watchTransaction(ve,!0)).status&&(Ln(!1),l.value=!0,setTimeout(()=>{an.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),X.value.getAccount(i.value.address)},1e3)),at()}else rn(!1),qn(!0);P.value="",y.value=""}catch(Te){an.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),ct.value=!1,console.log(Te,"error===>"),P.value="",y.value="",rn(!1),qn(!0)}},vi=async()=>{var Te,ye,ve,He,$e,ln,Ve,Ne,ze,Fe,_e,sn,Ge,Qe,Pn,Bn,gi,yi,bi,ki,wi,Ci,Pi,$i,_i,Ii,Ai,Si,Ti,Ni,Mi,Ri,Li,qi,Ui,Oi;ct.value=!1;let c=!1;X.value.getIsSortedSymbols(Ue.value.address,Oe.value.address)&&(c=!0),Un("");const v=Ae.value?"":`${P.value} ${(Te=k.value)==null?void 0:Te.symbol}`,A=Se.value?"":`${y.value} ${(ye=$.value)==null?void 0:ye.symbol}`;console.log("0424###createPoolFromCoin###",Ue.value),console.log("0424###createPoolToCoin###",Oe.value),console.log("0424###needReverse###",c),console.log("0424###createPoolInfo?.value?.needReverse###",(ve=H==null?void 0:H.value)==null?void 0:ve.needReverse),rt(n("tips.increaseLiquiditySuccess",{from:!c&&!((He=H==null?void 0:H.value)!=null&&He.needReverse)||c&&(($e=H==null?void 0:H.value)!=null&&$e.needReverse)?v:A,and:!Ae.value&&!Se.value?"and":"",to:!c&&!((ln=H==null?void 0:H.value)!=null&&ln.needReverse)||c&&((Ve=H==null?void 0:H.value)!=null&&Ve.needReverse)?A:v})),rn(!0);let R="",E="",D="",Y="",me="",de="",se=0,ue=0,pe=!1,Ce;if(c||(Ne=H==null?void 0:H.value)!=null&&Ne.needReverse){const Gn=c&&!((ze=H==null?void 0:H.value)!=null&&ze.needReverse);R=Gn?(Ge=(sn=H==null?void 0:H.value)==null?void 0:sn.token_b)==null?void 0:Ge.address:(_e=(Fe=H==null?void 0:H.value)==null?void 0:Fe.token_a)==null?void 0:_e.address,E=Gn?(gi=(Bn=H==null?void 0:H.value)==null?void 0:Bn.token_a)==null?void 0:gi.address:(Pn=(Qe=H==null?void 0:H.value)==null?void 0:Qe.token_b)==null?void 0:Pn.address,D=Gn?(wi=(ki=H==null?void 0:H.value)==null?void 0:ki.token_b)==null?void 0:wi.decimals:(bi=(yi=H==null?void 0:H.value)==null?void 0:yi.token_a)==null?void 0:bi.decimals,Y=Gn?(_i=($i=H==null?void 0:H.value)==null?void 0:$i.token_a)==null?void 0:_i.decimals:(Pi=(Ci=H==null?void 0:H.value)==null?void 0:Ci.token_b)==null?void 0:Pi.decimals,(Ii=H==null?void 0:H.value)!=null&&Ii.needReverse?(me=_.value?P.value:y.value,de=_.value?y.value:P.value,se=_.value?Number(p.value):1/Number(b.value),ue=_.value?Number(b.value):1/Number(p.value),pe=_.value?m.value:!m.value,Ce=_.value?Ye.value:1/Number(Ye.value)):(me=_.value?y.value:P.value,de=_.value?P.value:y.value,se=_.value?1/Number(b.value):Number(p.value),ue=_.value?1/Number(p.value):Number(b.value),pe=_.value?!m.value:m.value,Ce=_.value?1/Number(Ye.value):Ye.value)}else R=(Si=(Ai=H==null?void 0:H.value)==null?void 0:Ai.token_a)==null?void 0:Si.address,E=(Ni=(Ti=H==null?void 0:H.value)==null?void 0:Ti.token_b)==null?void 0:Ni.address,D=(Ri=(Mi=H==null?void 0:H.value)==null?void 0:Mi.token_a)==null?void 0:Ri.decimals,Y=(qi=(Li=H==null?void 0:H.value)==null?void 0:Li.token_b)==null?void 0:qi.decimals,me=_.value?P.value:y.value,de=_.value?y.value:P.value,se=_.value?Number(p.value):1/Number(b.value),ue=_.value?Number(b.value):1/Number(p.value),pe=_.value?m.value:!m.value,Ce=_.value?Ye.value:1/Number(Ye.value);try{console.log("0501###toCreatePool###params###",{coinTypeA:R,coinTypeB:E,decimalsA:D,decimalsB:Y,amountA:me,amountB:de,minPrice:se,maxPrice:ue,fix_amount_a:pe,tick_spacing:Number(H.value.tickSpacing),slippage:Number(De.value)/100,price:Ce});const Gn=await X.value.getCreatPoolTransactionPayload({coinTypeA:R,coinTypeB:E,decimalsA:D,decimalsB:Y,amountA:me,amountB:de,minPrice:se,maxPrice:ue,fix_amount_a:pe,tick_spacing:Number(H.value.tickSpacing),slippage:Number(De.value)/100,price:Ce}),Pa=await i.value.currentWallet.signAndExecuteTransactionBlock(Gn),Pt=X.value.handleTx(Pa);if(Pt&&Pt.hash){Un(Pt.hash),rn(!1),Ln(!0);const No={title:"Created pool",desc:"Pool created successfully ",hash:Pt.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(Ui=k.value)==null?void 0:Ui.address}`,numa:Ae.value?"":`- ${P.value}`,logoa:W.value.tokensObj&&k.value&&k.value.address&&W.value.tokensObj[k.value.address]&&W.value.tokensObj[k.value.address].logoURI,tokenb:`${(Oi=$.value)==null?void 0:Oi.address}`,numb:Se.value?"":`- ${y.value}`,logob:W.value.tokensObj&&$.value&&$.value.address&&W.value.tokensObj[$.value.address]&&W.value.tokensObj[$.value.address].logoURI},text:"Pool created successfully"};K.value.chainName!=="Aptos"&&(No.res=Pt.res),X.value.showTransitionPending(No),(await X.value.watchTransaction(No,!0)).status&&(Ln(!1),l.value=!0,setTimeout(()=>{an.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),X.value.getAccount(i.value.address)},1e3)),at()}else rn(!1),qn(!0);P.value="",y.value=""}catch(Gn){console.log("0407###createPool###error##",Gn),ct.value=!1,an.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),P.value="",y.value="",rn(!1),qn(!0)}},ka=ne(()=>{var c,v,A,R,E,D;return((c=k.value)==null?void 0:c.isSelfBuilt)||((v=$.value)==null?void 0:v.isSelfBuilt)||((R=W.value.tokensObj[(A=k.value)==null?void 0:A.address])==null?void 0:R.isSelfBuilt)||((D=W.value.tokensObj[(E=$.value)==null?void 0:E.address])==null?void 0:D.isSelfBuilt)}),wa=c=>{var v;return(c==null?void 0:c.logoURI)||(c==null?void 0:c.logo_url)||((v=W.value.tokensObj[c==null?void 0:c.address])==null?void 0:v.logo_url)||(K.value.theme==="default"?We("/image/coins/unknown.png"):We("/image/coins/sui-unknown.png"))},So=(c,v)=>{console.log(f.value,"===>currentCoinKey.value"),console.log(c);const A=localStorage.getItem(c.address);console.log(W.value.tokensObj,"===>pools.value.tokensObj"),console.log(A,"===>coinLocak"),W.value.tokensObj&&W.value.tokensObj[c.address]&&W.value.tokensObj[c.address].isSelfBuilt&&!A&&(v=="fromCoin"&&(bt.value=c),v=="toCoin"&&(kt.value=c),hi.value=!0)};Pe(()=>[k.value,$.value],([c,v])=>{c&&!_n(c)&&So(c,"fromCoin"),v&&!_n(v)&&So(v,"toCoin")},{immediate:!0});const hi=L(!1),Ca=()=>{Me.push("/pools")},To=ne(()=>K.value.chainName);return Pe(()=>[K.value.chainName,K.value.filterCoinsObj],([c,v])=>{c&&v&&an.setPoolConfigList(c,v)},{immediate:!0}),Pe(()=>[Be.value,Ke.value,k.value,$.value,Wn.value],([c,v,A,R,E])=>{console.log(c.value,"==>isCreatePool.value"),console.log(v.value,"===>filterCreatePoolCoin.value"),console.log(A,"===>fromCoin"),console.log(R,"===>toCoin"),E&&c&&v&&!c.includes(1e-4)&&!c.includes(5e-4)&&!c.includes(.0025)&&!c.includes(.01)&&!v[A==null?void 0:A.address]&&!v[R==null?void 0:R.address]&&(T.value="")},{immediate:!0}),{warningToCoin:kt,warningFromCoin:bt,getTokenSource:So,closeTokenWarning:Ca,isShowTokenWarning:hi,chainName:To,hasCreatePool:Wn,isCreateSuccess:l,intPriceReverse:Vt,isShowMask:vn,isPc:e,intPrice:Wt,createPoolToCoin:Oe,createPoolFromCoin:Ue,getPoolInfoSuccess:Kn,toCreatePool:ba,createPoolInfo:H,changecurrentPrice:Ao,isShowCreatePoolModal:ct,addOrCreate:ya,halfBtnSelect:Dt,selectFee:ga,isViewDetail:s,addCommom:Ee,decimalUi:Le,fromCoinUrl:va,toCoinUrl:ha,t:n,wallet:i,toAdd:fa,chartLoading:j,currentTick:J,tickList:we,poolInfo:re,storeIndex:K,importIcon:We,addLiquidityBtnText:on,slippage:De,countdown:r,loading:u,fromCoin:k,toCoin:$,openCoinSelect:Ft,onCoinSelect:Et,existingCoins:h,lastSelectCoin:g,currentCoinKey:f,showCoinSelect:M,fromCoinAmount:P,toCoinAmount:y,maxBtnSelect:jt,fixedFromCoin:m,isShowLiquidityModal:it,direct:_,toggle:Bt,edit:Q,inputValue:T,feeTierList:wn,minPrice:p,maxPrice:b,invalidPriceRange:zn,defaultMinPrice:O,defaultMaxPrice:z,priceRangeChangeMin:Ut,priceRangeChangeMax:Ot,toFullRange:Je,clearAll:Ht,clickClear:I,positionError:Z,positionTips:fe,router:Me,clickRefresh:cn,fromCoinBlance:Ze,toCoinBlance:en,showToCoinLock:Se,showFromCoinLock:Ae,currentPriceReverse:kn,currentPrice:Ye,getPirceText:ma,currentPriceTab:V,currentPriceTabList:yn,getPirceKey:pa,priceTab:zt,aprRewardsParameter:ae,aprRewardsDateList:ie,aprTab:je,reviseValue:hn,label:he,aprTitle:oe,isCreatePool:Be,before7dContractPriceLowest:ee,before7dContractPriceHighest:xe,aprRewardsTime:le,addLiquidityBtnDisabled:qe,checkNullObj:_n,sFixD:Kt,toCreateSuiPool:vi,isSelfBuilt:ka,getCoinIcon:wa,isCreatePoolToCoin:Qn,isCreatePoolFromCoin:Jn,filterCreatePoolCoin:Ke,poolTvl:bn}}}),wr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",Cr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",ca=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,da=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const Rn=e=>(Hn("data-v-b5dd6745"),e=e(),Xn(),e),Pp={class:"pools-container"},$p={key:0,class:"content pc-content"},_p={class:"content-left"},Ip={class:"content-left-bg"},Ap={class:"content-left-title"},Sp={key:0,class:"pool-warning"},Tp={class:"coin-select"},Np={key:0,class:"icon","aria-hidden":"true"},Mp=Rn(()=>d("use",{"xlink:href":"#icon-edit"},null,-1)),Rp=[Mp],Lp={key:0,class:"fee-container"},qp=["onClick"],Up={key:0,class:"icon fee-disabled","aria-hidden":"true"},Op=Rn(()=>d("use",{"xlink:href":"#icon-icon-disable"},null,-1)),Bp=[Op],Fp={key:1},Ep={key:2},jp={key:0},Dp={key:1,class:"text-active"},Hp={class:"deposit-title"},Xp={class:"card-container"},zp={class:"card-item"},Wp={class:"card-item"},Vp={key:0,class:"icon","aria-hidden":"true"},Kp=Rn(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),Yp=[Kp],Gp={class:"pc-network"},Qp={class:"content-right"},Jp={key:0,class:"initPrice-mask"},Zp={class:"content-right-title"},xp=Rn(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),ev={class:"content-right-bg"},nv={key:1,class:"price-tab"},tv=["onClick"],ov={key:2,class:"create-pool-tips"},iv={key:3,class:"set-price-range"},rv={key:0},av={key:1,class:"coin"},lv={key:2,class:"coin"},sv={key:3,class:"no-price"},uv={alt:""},cv={alt:""},dv={key:6,class:"position-tips"},fv={alt:""},mv={class:"tips"},pv={key:7,class:"position-tips"},vv={alt:""},hv={class:"error"},gv={key:8,class:"d3-chart-box"},yv={key:9,class:"day-7-price-range"},bv=Rn(()=>d("i",null,null,-1)),kv={class:"gray"},wv={key:11,class:"create-pool-tips"},Cv={key:12,class:"create-pool-warning"},Pv={key:1,class:"no-data"},$v={key:0,src:ca,alt:""},_v={key:1,src:da,alt:""},Iv={key:1,class:"content h5-content"},Av={class:"content-left"},Sv={class:"content-left-bg"},Tv={class:"content-left-title"},Nv={key:0,class:"pool-warning"},Mv={class:"coin-select"},Rv={key:0,class:"icon","aria-hidden":"true"},Lv=Rn(()=>d("use",{"xlink:href":"#icon-edit"},null,-1)),qv=[Lv],Uv={key:0,class:"fee-container"},Ov=["onClick"],Bv={key:0},Fv={key:1},Ev={key:0},jv={key:1,class:"text-active"},Dv={class:"content-right"},Hv={key:0,class:"initPrice-mask"},Xv={class:"content-right-title"},zv=Rn(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),Wv={class:"content-right-bg"},Vv={key:1,class:"price-tab"},Kv=["onClick"],Yv={key:2,class:"create-pool-tips"},Gv={key:3,class:"set-price-range"},Qv={key:0},Jv={key:1,class:"coin"},Zv={key:2,class:"coin"},xv={key:3,class:"no-price"},eh={alt:""},nh={alt:""},th={key:6,class:"position-tips"},oh=["src"],ih={class:"tips"},rh={key:7,class:"position-tips"},ah=["src"],lh={class:"error"},sh={key:8,class:"d3-chart-box"},uh={key:9,class:"day-7-price-range"},ch=Rn(()=>d("i",null,null,-1)),dh={class:"gray"},fh={key:11,class:"create-pool-tips"},mh={key:1,class:"no-data"},ph={key:0,src:ca,alt:""},vh={key:1,src:da,alt:""},hh={key:0,class:"icon","aria-hidden":"true"},gh=Rn(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),yh=[gh],bh={class:"pc-network"},kh={class:"new-right"},wh={class:"deposit-title"},Ch={class:"card-container"},Ph={class:"card-item"},$h={class:"card-item"},_h={key:0,class:"icon","aria-hidden":"true"},Ih=Rn(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),Ah=[Ih],Sh={class:"h5-network"};function Th(e,n,t,o,i,a){var j,G,we,V,ae,le,oe,ie,he,x,K,vn,X,Ke,je,hn,yn,cn,zn,Je,Be,bn,wn,De,te,qe,on,U,ee,xe,Me,k,$,Ut,Ot,Bt,Qn,Jn,Ft,Ue,Oe,bt,kt,Et,jt,Dt,Ht,it,Ln,qn,rn,rt,Un,at,q,an,Wn,W,On,Ae,Se,lt,st,Ye,kn,Cn,Vn,ut,re,Xt;const r=$a,l=Ka,s=Pr,u=tl,f=Ra,h=ul,g=vl,M=Al,_=ko,ce=Sa,m=Rl,I=Zl,P=Cf,y=Ir,p=qa,b=um,O=Ba,z=La,Q=Om,fe=Km,Z=bp,T=Ia,J=Rt("image");return w(),S("div",Pp,[be(r,{url:"/pools"}),be(l,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(w(),S("div",$p,[d("div",_p,[d("div",Ip,[d("div",Ap,[Xe(C(e.$t("common.selectPool"))+" ",1),be(s,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.t("newAdd.poolWarning")),1)]),default:Ie(()=>[e.isSelfBuilt?(w(),S("div",Sp)):F("",!0)]),_:1})]),d("div",Tp,[be(u,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[0]||(n[0]=N=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),be(u,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:n[1]||(n[1]=N=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),d("div",{class:Re(["pool-fee",e.edit?"pool-fee-edit":""])},[d("div",{class:"pool-fee-header",onClick:n[2]||(n[2]=N=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[d("span",{class:Re(e.inputValue?"":"fee-span")},C(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(w(),S("svg",Np,Rp)):F("",!0)]),e.edit?(w(),S("div",Lp,[(w(!0),S(jn,null,_t(e.feeTierList,(N,Zn)=>{var Kn,Ze,en,wt,Ct;return w(),S("div",{key:Zn,class:Re(["fee-item",[e.inputValue&&e.inputValue==N.label?"fee-item-active":"",e.isCreatePool.includes(N.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(N.fee)&&!e.filterCreatePoolCoin[(Kn=e.fromCoin)==null?void 0:Kn.address]&&!e.filterCreatePoolCoin[(Ze=e.toCoin)==null?void 0:Ze.address]?"disabled":""]]),onClick:Yn=>e.selectFee(N)},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(N.fee)&&!e.filterCreatePoolCoin[(en=e.fromCoin)==null?void 0:en.address]&&!e.filterCreatePoolCoin[(wt=e.toCoin)==null?void 0:wt.address]?(w(),S("svg",Up,Bp)):F("",!0),e.$route.query.action=="create-pool"?(w(),S("div",Fp,[d("p",null,C(N.title),1),d("p",{class:Re(e.isCreatePool&&e.isCreatePool.includes(N.fee)?"text-default":"text-theme")},C(e.isCreatePool&&e.isCreatePool.includes(N.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(w(),S("div",Ep,[d("p",{class:Re(e.isCreatePool&&e.isCreatePool.includes(N.fee)?"text-active":"text-default")},C(N.title),3),e.isCreatePool&&!e.isCreatePool.includes(N.fee)?(w(),S("p",jp,C(e.$t("newAdd.notCreated")),1)):F("",!0),e.isCreatePool&&e.isCreatePool.includes(N.fee)?(w(),S("p",Dp,C(e.poolTvl&&e.poolTvl[N.fee]&&((Ct=e.poolTvl[N.fee])==null?void 0:Ct.rateText)),1)):F("",!0)])),d("span",null,C(N.text),1)],10,qp)}),128))])):F("",!0)],2),d("div",Hp,C(e.$t("newAdd.depositAmounts")),1),d("div",Xp,[d("div",zp,[be(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=N=>e.fromCoinAmount=N),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[4]||(n[4]=N=>e.maxBtnSelect("fromCoin")),onOnHalf:n[5]||(n[5]=N=>e.halfBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=N=>{e.fromCoinAmount=N,e.fixedFromCoin=!0}),onOnSelect:n[7]||(n[7]=N=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(w(),ke(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):F("",!0)]),d("div",Wp,[be(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=N=>e.toCoinAmount=N),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[9]||(n[9]=N=>e.maxBtnSelect("toCoin")),onOnHalf:n[10]||(n[10]=N=>e.halfBtnSelect("toCoin")),onOnInput:n[11]||(n[11]=N=>{e.toCoinAmount=N,e.fixedFromCoin=!1}),onOnSelect:n[12]||(n[12]=N=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(w(),ke(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):F("",!0)]),((G=(j=e.$route)==null?void 0:j.query)==null?void 0:G.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock||!e.filterCreatePoolCoin[(we=e.fromCoin)==null?void 0:we.address]&&!e.filterCreatePoolCoin[(V=e.toCoin)==null?void 0:V.address])?(w(),ke(g,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):F("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(w(),S("img",{key:1,class:"add",src:wr,alt:"",onClick:n[13]||(n[13]=(...N)=>e.toggle&&e.toggle(...N))})):F("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(w(),S("img",{key:2,class:"add",src:Cr,alt:"",onClick:n[14]||(n[14]=(...N)=>e.toggle&&e.toggle(...N))})):F("",!0)]),e.poolInfo?(w(),ke(M,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):F("",!0)]),be(_,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[15]||(n[15]=N=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ie(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(w(),S("svg",Vp,Yp)):F("",!0),d("span",null,C(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",Gp,[be(ce)])]),d("div",Qp,[e.isShowMask?(w(),S("div",Jp)):F("",!0),d("div",Zp,[Xe(C((ae=e.$route)!=null&&ae.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(w(),ke(s,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.$t("newAdd.selectRangeTips")),1)]),default:Ie(()=>[xp]),_:1})):F("",!0)]),d("div",ev,[!((oe=(le=e.$route)==null?void 0:le.query)!=null&&oe.action)&&e.poolInfo||(he=(ie=e.$route)==null?void 0:ie.query)!=null&&he.action?(w(),S(jn,{key:0},[(K=(x=e.$route)==null?void 0:x.query)!=null&&K.action&&!e.poolInfo?(w(),ke(m,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):F("",!0),e.poolInfo?(w(),S("div",nv,[(w(!0),S(jn,null,_t(e.currentPriceTabList,N=>(w(),S("div",{key:N,class:Re(["price-item",{"price-item-active":N.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Zn=>e.priceTab(N)},[be(s,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.getPirceText(N.key)),1)]),default:Ie(()=>[Xe(" "+C(e.getPirceKey(N.key)),1)]),_:2},1024)],10,tv))),128))])):F("",!0),(X=(vn=e.$route)==null?void 0:vn.query)!=null&&X.action&&!e.poolInfo?(w(),S("div",ov,C(e.$t("newAdd.createPoolInitialText")),1)):F("",!0),!e.poolInfo&&((je=(Ke=e.$route)==null?void 0:Ke.query)!=null&&je.action)?(w(),S("div",iv,C(e.$t("common.setPriceRange")),1)):F("",!0),e.poolInfo||(yn=(hn=e.$route)==null?void 0:hn.query)!=null&&yn.action?(w(),S("div",{key:4,class:Re(["current-price",(zn=(cn=e.$route)==null?void 0:cn.query)!=null&&zn.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(w(),S("span",rv,C(e.$t("common.currentPrice")),1)):F("",!0),e.fromCoin&&e.toCoin&&e.direct?(w(),S("div",av,[d("span",null,C(e.$t("common.currentPrice")),1),Xe(" "+C(e.currentPrice===""?"--":("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(e.currentPrice,6)))+" "+C((Je=e.toCoin)==null?void 0:Je.symbol)+" per "+C((Be=e.fromCoin)==null?void 0:Be.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(w(),S("div",lv,[d("span",null,C(e.$t("common.currentPrice")),1),Xe(" "+C(e.currentPriceReverse===""?"--":("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(e.currentPriceReverse,6)))+" "+C((bn=e.toCoin)==null?void 0:bn.symbol)+" per "+C((wn=e.fromCoin)==null?void 0:wn.symbol),1)])):(w(),S("div",sv,"0.0")),e.fromCoin&&e.toCoin?(w(),S("div",{key:4,class:Re(e.poolInfo&&((De=e.poolInfo)!=null&&De.needReverse)||e.createPoolInfo&&((te=e.createPoolInfo)!=null&&te.needReverse)?"toggle reverse":"toggle")},[d("div",{class:Re(e.direct?"item active-item":"item"),onClick:n[16]||(n[16]=N=>e.direct?"":e.toggle())},[un(d("img",uv,null,512),[[J,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),Xe(" "+C(e.direct?(qe=e.fromCoin)==null?void 0:qe.symbol:(on=e.toCoin)==null?void 0:on.symbol),1)],2),d("div",{class:Re(e.direct?"item ":"item active-item"),onClick:n[17]||(n[17]=N=>e.direct?e.toggle():"")},[un(d("img",cv,null,512),[[J,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),Xe(" "+C(e.direct?(U=e.toCoin)==null?void 0:U.symbol:(ee=e.fromCoin)==null?void 0:ee.symbol),1)],2)],2)):F("",!0)],2)):F("",!0),e.poolInfo||(Me=(xe=e.$route)==null?void 0:xe.query)!=null&&Me.action?(w(),ke(I,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):F("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(w(),S("div",dv,[un(d("img",fv,null,512),[[J,("importIcon"in e?e.importIcon:ge(We))("/image/icon-tips@2x.png")]]),d("p",mv,C(e.$t("tips.positionTips")),1)])):F("",!0),e.positionError&&(e.poolInfo||($=(k=e.$route)==null?void 0:k.query)!=null&&$.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(w(),S("div",pv,[un(d("img",vv,null,512),[[J,("importIcon"in e?e.importIcon:ge(We))("/image/icon-tips-error@2x.png")]]),d("p",hv,C(e.$t("tips.positionError")),1)])):F("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),S("div",gv,[e.fromCoin&&e.toCoin&&e.poolInfo?(w(),ke(P,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):F("",!0),e.chartLoading?(w(),ke(y,{key:1})):F("",!0)])):F("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(w(),S("div",yv,[bv,d("span",kv,C(e.aprRewardsTime)+" Price Range",1),d("span",null,C(("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(e.before7dContractPriceLowest,6)))+" - "+C(("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(e.before7dContractPriceHighest,6))),1)])):F("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(w(),ke(p,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):F("",!0),(Ot=(Ut=e.$route)==null?void 0:Ut.query)!=null&&Ot.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(w(),S("div",wv,C(e.$t("newAdd.createPoolText")),1)):F("",!0),((Qn=(Bt=e.$route)==null?void 0:Bt.query)==null?void 0:Qn.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(w(),S("div",Cv,"To create a new pool, the initial price you set must be within your price range. ")):F("",!0)],64)):(w(),S("div",Pv,[e.storeIndex.theme=="default"?(w(),S("img",$v)):(w(),S("img",_v)),d("p",null,C(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(w(),ke(b,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):F("",!0)])])):F("",!0),e.isPc?F("",!0):(w(),S("div",Iv,[d("div",Av,[d("div",Sv,[d("div",Tv,[Xe(C(e.$t("common.selectPool"))+" ",1),be(s,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.t("newAdd.poolWarning")),1)]),default:Ie(()=>[e.poolInfo&&e.isSelfBuilt?(w(),S("div",Nv)):F("",!0)]),_:1})]),d("div",Mv,[be(u,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[18]||(n[18]=N=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),be(u,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:n[19]||(n[19]=N=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),d("div",{class:Re(["pool-fee",e.edit?"pool-fee-edit":""])},[d("div",{class:"pool-fee-header",onClick:n[20]||(n[20]=N=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[d("span",{class:Re(e.inputValue?"":"fee-span")},C(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(w(),S("svg",Rv,qv)):F("",!0)]),e.edit?(w(),S("div",Uv,[e.getPoolInfoSuccess?(w(!0),S(jn,{key:1},_t(e.feeTierList,(N,Zn)=>{var Kn;return w(),S("div",{key:Zn,class:Re(["fee-item",[e.inputValue&&e.inputValue==N.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(N.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:Ze=>e.selectFee(N)},[e.$route.query.action=="create-pool"?(w(),S("div",Bv,[d("p",null,C(N.title),1),d("p",{class:Re(e.isCreatePool.includes(N.fee)?"text-default":"text-theme")},C(e.isCreatePool.includes(N.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(w(),S("div",Fv,[d("p",{class:Re(e.isCreatePool.includes(N.fee)?"text-active":"text-default")},C(N.title),3),e.isCreatePool&&!e.isCreatePool.includes(N.fee)?(w(),S("p",Ev,C(e.$t("newAdd.notCreated")),1)):F("",!0),e.isCreatePool&&e.isCreatePool.includes(N.fee)?(w(),S("p",jv,C(e.poolTvl&&e.poolTvl[N.fee]&&((Kn=e.poolTvl[N.fee])==null?void 0:Kn.rateText)),1)):F("",!0)])),d("span",null,C(N.text),1)],10,Ov)}),128)):(w(),ke(y,{key:0}))])):F("",!0)],2)]),d("div",Dv,[e.isShowMask?(w(),S("div",Hv)):F("",!0),d("div",Xv,[Xe(C((Jn=e.$route)!=null&&Jn.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(w(),ke(s,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.$t("newAdd.selectRangeTips")),1)]),default:Ie(()=>[zv]),_:1})):F("",!0)]),d("div",Wv,[!((Ue=(Ft=e.$route)==null?void 0:Ft.query)!=null&&Ue.action)&&e.poolInfo||(bt=(Oe=e.$route)==null?void 0:Oe.query)!=null&&bt.action?(w(),S(jn,{key:0},[(Et=(kt=e.$route)==null?void 0:kt.query)!=null&&Et.action&&!e.poolInfo?(w(),ke(m,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):F("",!0),e.poolInfo?(w(),S("div",Vv,[(w(!0),S(jn,null,_t(e.currentPriceTabList,N=>(w(),S("div",{key:N,class:Re(["price-item",{"price-item-active":N.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Zn=>e.priceTab(N)},[be(s,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.getPirceText(N.key)),1)]),default:Ie(()=>[Xe(" "+C(e.getPirceKey(N.key)),1)]),_:2},1024)],10,Kv))),128))])):F("",!0),(Dt=(jt=e.$route)==null?void 0:jt.query)!=null&&Dt.action&&!e.poolInfo?(w(),S("div",Yv,C(e.$t("newAdd.createPoolInitialText")),1)):F("",!0),!e.poolInfo&&((it=(Ht=e.$route)==null?void 0:Ht.query)!=null&&it.action)?(w(),S("div",Gv,C(e.$t("common.setPriceRange")),1)):F("",!0),e.poolInfo||(qn=(Ln=e.$route)==null?void 0:Ln.query)!=null&&qn.action?(w(),S("div",{key:4,class:Re(["current-price",(rt=(rn=e.$route)==null?void 0:rn.query)!=null&&rt.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(w(),S("span",Qv,C(e.$t("common.currentPrice")),1)):F("",!0),e.fromCoin&&e.toCoin&&e.direct?(w(),S("div",Jv,[d("span",null,C(e.$t("common.currentPrice")),1),Xe(" "+C(("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(e.currentPrice,6)))+" "+C((Un=e.toCoin)==null?void 0:Un.symbol)+" per "+C((at=e.fromCoin)==null?void 0:at.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(w(),S("div",Zv,[d("span",null,C(e.$t("common.currentPrice")),1),Xe(" "+C(("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(e.currentPriceReverse,6)))+" "+C((q=e.toCoin)==null?void 0:q.symbol)+" per "+C((an=e.fromCoin)==null?void 0:an.symbol),1)])):(w(),S("div",xv,"0.0")),e.fromCoin&&e.toCoin?(w(),S("div",{key:4,class:Re(e.poolInfo&&((Wn=e.poolInfo)!=null&&Wn.needReverse)||e.createPoolInfo&&((W=e.createPoolInfo)!=null&&W.needReverse)?"toggle reverse":"toggle")},[d("div",{class:Re(e.direct?"item active-item":"item"),onClick:n[21]||(n[21]=N=>e.direct?"":e.toggle())},[un(d("img",eh,null,512),[[J,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),Xe(" "+C(e.direct?(On=e.fromCoin)==null?void 0:On.symbol:(Ae=e.toCoin)==null?void 0:Ae.symbol),1)],2),d("div",{class:Re(e.direct?"item ":"item active-item"),onClick:n[22]||(n[22]=N=>e.direct?e.toggle():"")},[un(d("img",nh,null,512),[[J,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),Xe(" "+C(e.direct?(Se=e.toCoin)==null?void 0:Se.symbol:(lt=e.fromCoin)==null?void 0:lt.symbol),1)],2)],2)):F("",!0)],2)):F("",!0),e.poolInfo||(Ye=(st=e.$route)==null?void 0:st.query)!=null&&Ye.action?(w(),ke(I,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):F("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(w(),S("div",th,[d("img",{src:("importIcon"in e?e.importIcon:ge(We))("/image/icon-tips@2x.png"),alt:""},null,8,oh),d("p",ih,C(e.$t("tips.positionTips")),1)])):F("",!0),e.positionError&&(e.poolInfo||(Cn=(kn=e.$route)==null?void 0:kn.query)!=null&&Cn.action)?(w(),S("div",rh,[d("img",{src:("importIcon"in e?e.importIcon:ge(We))("/image/icon-tips-error@2x.png"),alt:""},null,8,ah),d("p",lh,C(e.$t("tips.positionError")),1)])):F("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),S("div",sh,[e.fromCoin&&e.toCoin&&e.poolInfo?(w(),ke(P,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):F("",!0),e.chartLoading?(w(),ke(y,{key:1})):F("",!0)])):F("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(w(),S("div",uh,[ch,d("span",dh,C(e.aprRewardsTime)+" Price Range",1),d("span",null,C(("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(e.before7dContractPriceLowest,6)))+" - "+C(("addCommom"in e?e.addCommom:ge(Ee))(("decimalUi"in e?e.decimalUi:ge(Le))(e.before7dContractPriceHighest,6))),1)])):F("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(w(),ke(p,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):F("",!0),(ut=(Vn=e.$route)==null?void 0:Vn.query)!=null&&ut.action&&!e.poolInfo?(w(),S("div",fh,C(e.$t("newAdd.createPoolText")),1)):F("",!0)],64)):(w(),S("div",mh,[e.storeIndex.theme=="default"?(w(),S("img",ph)):(w(),S("img",vh)),d("p",null,C(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(w(),ke(b,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):F("",!0)]),be(_,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[23]||(n[23]=N=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ie(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(w(),S("svg",hh,yh)):F("",!0),d("span",null,C(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",bh,[be(ce)])]),d("div",kh,[d("div",wh,C(e.$t("newAdd.depositAmounts")),1),d("div",Ch,[d("div",Ph,[be(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[24]||(n[24]=N=>e.fromCoinAmount=N),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[25]||(n[25]=N=>e.maxBtnSelect("fromCoin")),onOnHalf:n[26]||(n[26]=N=>e.halfBtnSelect("fromCoin")),onOnInput:n[27]||(n[27]=N=>{e.fromCoinAmount=N,e.fixedFromCoin=!0}),onOnSelect:n[28]||(n[28]=N=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(w(),ke(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):F("",!0)]),d("div",$h,[be(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[29]||(n[29]=N=>e.toCoinAmount=N),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[30]||(n[30]=N=>e.maxBtnSelect("toCoin")),onOnHalf:n[31]||(n[31]=N=>e.halfBtnSelect("toCoin")),onOnInput:n[32]||(n[32]=N=>{e.toCoinAmount=N,e.fixedFromCoin=!1}),onOnSelect:n[33]||(n[33]=N=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(w(),ke(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):F("",!0)]),(Xt=(re=e.$route)==null?void 0:re.query)!=null&&Xt.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(w(),ke(g,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):F("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(w(),S("img",{key:1,class:"add",src:wr,alt:"",onClick:n[34]||(n[34]=(...N)=>e.toggle&&e.toggle(...N))})):F("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(w(),S("img",{key:2,class:"add",src:Cr,alt:"",onClick:n[35]||(n[35]=(...N)=>e.toggle&&e.toggle(...N))})):F("",!0)]),e.poolInfo||e.createPoolInfo?(w(),ke(M,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):F("",!0)])])),be(_,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:n[36]||(n[36]=N=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ie(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(w(),S("svg",_h,Ah)):F("",!0),d("span",null,C(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",Sh,[be(ce)]),e.showCoinSelect?(w(),ke(O,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:n[37]||(n[37]=N=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):F("",!0),e.isShowLiquidityModal?(w(),ke(z,{key:3,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,"current-direct":e.direct,onToAdd:e.toAdd,onOnClose:n[38]||(n[38]=N=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","current-direct","onToAdd"])):F("",!0),e.isViewDetail?(w(),ke(Q,{key:4,"pool-info":e.poolInfo,onOnClose:n[39]||(n[39]=N=>e.isViewDetail=!1)},null,8,["pool-info"])):F("",!0),e.isCreateSuccess?(w(),ke(fe,{key:5,onOnClose:n[40]||(n[40]=N=>e.isCreateSuccess=!1)})):F("",!0),e.isShowCreatePoolModal&&e.fromCoin&&e.toCoin?(w(),ke(Z,{key:6,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.createPoolInfo.currentPrice,"need-reverse":e.createPoolInfo.needReverse,direct:e.direct,onOnClose:n[41]||(n[41]=N=>e.isShowCreatePoolModal=!1),onCreatePool:e.toCreatePool},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","need-reverse","direct","onCreatePool"])):F("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(w(),ke(T,{key:7,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:n[42]||(n[42]=N=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):F("",!0)])}const rg=pn(Cp,[["render",Th],["__scopeId","data-v-b5dd6745"]]);export{rg as default};
