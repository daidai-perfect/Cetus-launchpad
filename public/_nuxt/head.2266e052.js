var B4=Object.defineProperty;var R4=(n,e,t)=>e in n?B4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var v=(n,e,t)=>(R4(n,typeof e!="symbol"?e+"":e,t),t),tg=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Z=(n,e,t)=>(tg(n,e,"read from private field"),t?t.call(n):e.get(n)),st=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},qe=(n,e,t,r)=>(tg(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),ph=(n,e,t,r)=>({set _(i){qe(n,e,i,t)},get _(){return Z(n,e,r)}}),ze=(n,e,t)=>(tg(n,e,"access private method"),t);import{e as xr,o as ne,f as re,A as bv,a as Vr,P as wo,m as Le,M as yo,c as ar,w as kt,h as N,v as Se,u as ft,i as rn,j as pr,B as Ka,p as Ri,k as Pi,x as ye,ab as Tw,ae as Bt,_ as P4,r as Fe,$ as Zp,U as Ve,a4 as U4,l as cu,fo as i0,G as ns,q as _v,F as qn,s as rr,t as jo,z as Ge,O as vt,E as Qp,Z as Iw,b as xw,W as vv,y as Ew,J as s0,S as F4,H as L4}from"./entry.1afe32c4.js";import{t as mh,b as wr,g as Wo,v as $4,H as V4,w as Su,x as Ai,y as gb,z as no,B as el,C as q4,D as gh,c as z4,E as Da,F as $l,G as kv,u as Sv,p as wb,I as Lc,J as sr,n as Et,S as W4,K as Qn,L as Ld,M as K4,N as Z4,O as uc,T as xe,P as nt,k as tl,Q as Pc,R as He,U as Cv,V as $c,W as yb,X as Av}from"./pool.83f6439f.js";import{i as Zt}from"./import-icon.de3e6c66.js";import{aY as Tv,aZ as Iv,a_ as Hf,a$ as Gf,b0 as xv,b1 as Yh,b2 as Q4,b3 as Xh,b4 as H4,b5 as Ev,b6 as Qs,b7 as bt,b8 as Mw,b9 as G4,c as nr,m as B,U as Yf,u as Vs,v as wd,S as Mv,h as ng,I as bb,i as Y4,ba as X4,bb as J4,X as fe,W as Bn,al as Ti,ai as ex,P as tx,Q as _b,R as nx,O as Jh,Y as Xf,V as rx,ar as Ow}from"./index.c41a185a.js";import{_ as ix}from"./img-no-Positions_2x.08e38da6.js";import{_ as Nw}from"./img-no-Positions_2x.c7686760.js";import{_ as jw}from"./icon-selected_3x.09e9a6f0.js";/* empty css              */import{c as $u,g as sx}from"./index.902ac7e8.js";import{_ as ox}from"./nuxt-link.5897df25.js";import{u as Ov}from"./useTheme.1cc4592a.js";import{V as ax}from"./vesrion-beta.87bdb614.js";/* empty css              */import{D as ue}from"./decimal.0bdeb344.js";import{u as cx,p as lx}from"./notifi.63f5c945.js";import{r as ux,a as dx}from"./index.3f134baf.js";function lu(n){switch(n){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${n}`)}}var yd={};Object.defineProperty(yd,"__esModule",{value:!0});yd.bech32m=o0=yd.bech32=void 0;const Jf="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Nv={};for(let n=0;n<Jf.length;n++){const e=Jf.charAt(n);Nv[e]=n}function Vl(n){const e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function vb(n){let e=1;for(let t=0;t<n.length;++t){const r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=Vl(e)^r>>5}e=Vl(e);for(let t=0;t<n.length;++t){const r=n.charCodeAt(t);e=Vl(e)^r&31}return e}function Dw(n,e,t,r){let i=0,s=0;const o=(1<<t)-1,a=[];for(let c=0;c<n.length;++c)for(i=i<<e|n[c],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function hx(n){return Dw(n,8,5,!0)}function fx(n){const e=Dw(n,5,8,!1);if(Array.isArray(e))return e}function px(n){const e=Dw(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function jv(n){let e;n==="bech32"?e=1:e=734539939;function t(o,a,c){if(c=c||90,o.length+7+a.length>c)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let l=vb(o);if(typeof l=="string")throw new Error(l);let u=o+"1";for(let d=0;d<a.length;++d){const h=a[d];if(h>>5)throw new Error("Non 5-bit word");l=Vl(l)^h,u+=Jf.charAt(h)}for(let d=0;d<6;++d)l=Vl(l);l^=e;for(let d=0;d<6;++d){const h=l>>(5-d)*5&31;u+=Jf.charAt(h)}return u}function r(o,a){if(a=a||90,o.length<8)return o+" too short";if(o.length>a)return"Exceeds length limit";const c=o.toLowerCase(),l=o.toUpperCase();if(o!==c&&o!==l)return"Mixed-case string "+o;o=c;const u=o.lastIndexOf("1");if(u===-1)return"No separator character for "+o;if(u===0)return"Missing prefix for "+o;const d=o.slice(0,u),h=o.slice(u+1);if(h.length<6)return"Data too short";let f=vb(d);if(typeof f=="string")return f;const m=[];for(let w=0;w<h.length;++w){const y=h.charAt(w),C=Nv[y];if(C===void 0)return"Unknown character "+y;f=Vl(f)^C,!(w+6>=h.length)&&m.push(C)}return f!==e?"Invalid checksum for "+o:{prefix:d,words:m}}function i(o,a){const c=r(o,a);if(typeof c=="object")return c}function s(o,a){const c=r(o,a);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:i,decode:s,encode:t,toWords:hx,fromWordsUnsafe:fx,fromWords:px}}var o0=yd.bech32=jv("bech32");yd.bech32m=jv("bech32m");var wh={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"};class mx extends Error{constructor(e,t,r,i,s,o,a){super(e),this.name="GraphQLError",this.message=e,s&&(this.path=s),t&&(this.nodes=Array.isArray(t)?t:[t]),r&&(this.source=r),i&&(this.positions=i),o&&(this.originalError=o);var c=a;if(!c&&o){var l=o.extensions;l&&typeof l=="object"&&(c=l)}this.extensions=c||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}}var Rt,Ye;function zn(n){return new mx(`Syntax Error: Unexpected token at ${Ye} in ${n}`)}function Mi(n){if(n.lastIndex=Ye,n.test(Rt))return Rt.slice(Ye,Ye=n.lastIndex)}var yh=/ +(?=[^\s])/y;function gx(n){for(var e=n.split(`
`),t="",r=0,i=0,s=e.length-1,o=0;o<e.length;o++)yh.lastIndex=0,yh.test(e[o])&&(o&&(!r||yh.lastIndex<r)&&(r=yh.lastIndex),i=i||o,s=o);for(var a=i;a<=s;a++)a!==i&&(t+=`
`),t+=e[a].slice(r).replace(/\\"""/g,'"""');return t}function mt(){for(var n=0|Rt.charCodeAt(Ye++);n===9||n===10||n===13||n===32||n===35||n===44||n===65279;n=0|Rt.charCodeAt(Ye++))if(n===35)for(;(n=Rt.charCodeAt(Ye++))!==10&&n!==13;);Ye--}var Jr=/[_A-Za-z]\w*/y,rg=new RegExp("(?:(null|true|false)|\\$("+Jr.source+')|(-?\\d+)((?:\\.\\d+)?[eE][+-]?\\d+|\\.\\d+)?|("""(?:"""|(?:[\\s\\S]*?[^\\\\])"""))|("(?:"|[^\\r\\n]*?[^\\\\]"))|('+Jr.source+"))","y"),pa=function(n){return n[n.Const=1]="Const",n[n.Var=2]="Var",n[n.Int=3]="Int",n[n.Float=4]="Float",n[n.BlockString=5]="BlockString",n[n.String=6]="String",n[n.Enum=7]="Enum",n}(pa||{}),wx=/\\/;function ep(n){var e,t;if(rg.lastIndex=Ye,Rt.charCodeAt(Ye)===91){Ye++,mt();for(var r=[];Rt.charCodeAt(Ye)!==93;)r.push(ep(n));return Ye++,mt(),{kind:"ListValue",values:r}}else if(Rt.charCodeAt(Ye)===123){Ye++,mt();for(var i=[];Rt.charCodeAt(Ye)!==125;){if((e=Mi(Jr))==null||(mt(),Rt.charCodeAt(Ye++)!==58))throw zn("ObjectField");mt(),i.push({kind:"ObjectField",name:{kind:"Name",value:e},value:ep(n)})}return Ye++,mt(),{kind:"ObjectValue",fields:i}}else if((t=rg.exec(Rt))!=null){if(Ye=rg.lastIndex,mt(),(e=t[pa.Const])!=null)return e==="null"?{kind:"NullValue"}:{kind:"BooleanValue",value:e==="true"};if((e=t[pa.Var])!=null){if(n)throw zn("Variable");return{kind:"Variable",name:{kind:"Name",value:e}}}else if((e=t[pa.Int])!=null){var s;return(s=t[pa.Float])!=null?{kind:"FloatValue",value:e+s}:{kind:"IntValue",value:e}}else{if((e=t[pa.BlockString])!=null)return{kind:"StringValue",value:gx(e.slice(3,-3)),block:!0};if((e=t[pa.String])!=null)return{kind:"StringValue",value:wx.test(e)?JSON.parse(e):e.slice(1,-1),block:!1};if((e=t[pa.Enum])!=null)return{kind:"EnumValue",value:e}}}throw zn("Value")}function Dv(n){if(Rt.charCodeAt(Ye)===40){var e=[];Ye++,mt();var t;do{if((t=Mi(Jr))==null||(mt(),Rt.charCodeAt(Ye++)!==58))throw zn("Argument");mt(),e.push({kind:"Argument",name:{kind:"Name",value:t},value:ep(n)})}while(Rt.charCodeAt(Ye)!==41);return Ye++,mt(),e}}function ql(n){if(Rt.charCodeAt(Ye)===64){var e=[],t;do{if(Ye++,(t=Mi(Jr))==null)throw zn("Directive");mt(),e.push({kind:"Directive",name:{kind:"Name",value:t},arguments:Dv(n)})}while(Rt.charCodeAt(Ye)===64);return e}}function yx(){for(var n,e=0;Rt.charCodeAt(Ye)===91;)e++,Ye++,mt();if((n=Mi(Jr))==null)throw zn("NamedType");mt();var t={kind:"NamedType",name:{kind:"Name",value:n}};do if(Rt.charCodeAt(Ye)===33&&(Ye++,mt(),t={kind:"NonNullType",type:t}),e){if(Rt.charCodeAt(Ye++)!==93)throw zn("NamedType");mt(),t={kind:"ListType",type:t}}while(e--);return t}var ig=new RegExp("(?:(\\.{3})|("+Jr.source+"))","y"),a0=function(n){return n[n.Spread=1]="Spread",n[n.Name=2]="Name",n}(a0||{});function tp(){var n=[],e,t;do if(ig.lastIndex=Ye,(t=ig.exec(Rt))!=null){if(Ye=ig.lastIndex,t[a0.Spread]!=null){mt();var r=Mi(Jr);if(r!=null&&r!=="on")mt(),n.push({kind:"FragmentSpread",name:{kind:"Name",value:r},directives:ql(!1)});else{if(mt(),r==="on"){if((r=Mi(Jr))==null)throw zn("NamedType");mt()}var i=ql(!1);if(Rt.charCodeAt(Ye++)!==123)throw zn("InlineFragment");mt(),n.push({kind:"InlineFragment",typeCondition:r?{kind:"NamedType",name:{kind:"Name",value:r}}:void 0,directives:i,selectionSet:tp()})}}else if((e=t[a0.Name])!=null){var s=void 0;if(mt(),Rt.charCodeAt(Ye)===58){if(Ye++,mt(),s=e,(e=Mi(Jr))==null)throw zn("Field");mt()}var o=Dv(!1);mt();var a=ql(!1),c=void 0;Rt.charCodeAt(Ye)===123&&(Ye++,mt(),c=tp()),n.push({kind:"Field",alias:s?{kind:"Name",value:s}:void 0,name:{kind:"Name",value:e},arguments:o,directives:a,selectionSet:c})}}else throw zn("SelectionSet");while(Rt.charCodeAt(Ye)!==125);return Ye++,mt(),{kind:"SelectionSet",selections:n}}function bx(){var n,e;if((n=Mi(Jr))==null||(mt(),Mi(Jr)!=="on")||(mt(),(e=Mi(Jr))==null))throw zn("FragmentDefinition");mt();var t=ql(!1);if(Rt.charCodeAt(Ye++)!==123)throw zn("FragmentDefinition");return mt(),{kind:"FragmentDefinition",name:{kind:"Name",value:n},typeCondition:{kind:"NamedType",name:{kind:"Name",value:e}},directives:t,selectionSet:tp()}}var _x=/(?:query|mutation|subscription|fragment)/y;function vx(n){var e,t,r;if(n&&(mt(),e=Mi(Jr),t=function(){if(mt(),Rt.charCodeAt(Ye)===40){var s=[];Ye++,mt();var o;do{if(Rt.charCodeAt(Ye++)!==36||(o=Mi(Jr))==null)throw zn("Variable");if(mt(),Rt.charCodeAt(Ye++)!==58)throw zn("VariableDefinition");mt();var a=yx(),c=void 0;Rt.charCodeAt(Ye)===61&&(Ye++,mt(),c=ep(!0)),mt(),s.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:o}},type:a,defaultValue:c,directives:ql(!0)})}while(Rt.charCodeAt(Ye)!==41);return Ye++,mt(),s}}(),r=ql(!1)),Rt.charCodeAt(Ye)===123)return Ye++,mt(),{kind:"OperationDefinition",operation:n||"query",name:e?{kind:"Name",value:e}:void 0,variableDefinitions:t,directives:r,selectionSet:tp()}}function kx(n,e){return Rt=typeof n.body=="string"?n.body:n,Ye=0,function(){var r,i;mt();var s=[];do if((r=Mi(_x))==="fragment")mt(),s.push(bx());else if((i=vx(r))!=null)s.push(i);else throw zn("Document");while(Ye<Rt.length);return{kind:"Document",definitions:s}}()}class Bv extends Tv{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Iv(e);const r=Hf(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Gf(this),this.iHash.update(e),this}digestInto(e){Gf(this),xv(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const $d=(n,e,t)=>new Bv(n,e).update(t).digest();$d.create=(n,e)=>new Bv(n,e);function Sx(n,e,t,r){Iv(n);const i=Q4({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Xh(s),Xh(o),Xh(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Hf(e),l=Hf(t),u=new Uint8Array(o),d=$d.create(n,c),h=d._cloneInto().update(l);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:h}}function Cx(n,e,t,r,i){return n.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),t}function Ax(n,e,t,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=Sx(n,e,t,r);let l;const u=new Uint8Array(4),d=Yh(u),h=new Uint8Array(a.outputLen);for(let f=1,m=0;m<s;f++,m+=a.outputLen){const w=o.subarray(m,m+a.outputLen);d.setInt32(0,f,!1),(l=c._cloneInto(l)).update(u).digestInto(h),w.set(h.subarray(0,w.length));for(let y=1;y<i;y++){a._cloneInto(l).update(h).digestInto(h);for(let C=0;C<w.length;C++)w[C]^=h[C]}}return Cx(a,c,o,l,h)}function Tx(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=r?4:0,l=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+l,a,r)}const Ix=(n,e,t)=>n&e^~n&t,xx=(n,e,t)=>n&e^n&t^e&t;class Rv extends Tv{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Yh(this.buffer)}update(e){Gf(this);const{view:t,buffer:r,blockLen:i}=this;e=Hf(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Yh(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Gf(this),H4(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)t[d]=0;Tx(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Yh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const Ex=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ra=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ia=new Uint32Array(64);class Mx extends Rv{constructor(){super(64,32,8,!1),this.A=ra[0]|0,this.B=ra[1]|0,this.C=ra[2]|0,this.D=ra[3]|0,this.E=ra[4]|0,this.F=ra[5]|0,this.G=ra[6]|0,this.H=ra[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,r,i,s,o,a,c]}set(e,t,r,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let d=0;d<16;d++,t+=4)ia[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const h=ia[d-15],f=ia[d-2],m=Qs(h,7)^Qs(h,18)^h>>>3,w=Qs(f,17)^Qs(f,19)^f>>>10;ia[d]=w+ia[d-7]+m+ia[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Qs(a,6)^Qs(a,11)^Qs(a,25),f=u+h+Ix(a,c,l)+Ex[d]+ia[d]|0,w=(Qs(r,2)^Qs(r,13)^Qs(r,22))+xx(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+w|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){ia.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const np=Ev(()=>new Mx),[Ox,Nx]=(()=>bt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),sa=new Uint32Array(80),oa=new Uint32Array(80);class jx extends Rv{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:m,Hh:w,Hl:y}=this;return[e,t,r,i,s,o,a,c,l,u,d,h,f,m,w,y]}set(e,t,r,i,s,o,a,c,l,u,d,h,f,m,w,y){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=m|0,this.Hh=w|0,this.Hl=y|0}process(e,t){for(let M=0;M<16;M++,t+=4)sa[M]=e.getUint32(t),oa[M]=e.getUint32(t+=4);for(let M=16;M<80;M++){const H=sa[M-15]|0,G=oa[M-15]|0,q=bt.rotrSH(H,G,1)^bt.rotrSH(H,G,8)^bt.shrSH(H,G,7),X=bt.rotrSL(H,G,1)^bt.rotrSL(H,G,8)^bt.shrSL(H,G,7),E=sa[M-2]|0,j=oa[M-2]|0,R=bt.rotrSH(E,j,19)^bt.rotrBH(E,j,61)^bt.shrSH(E,j,6),V=bt.rotrSL(E,j,19)^bt.rotrBL(E,j,61)^bt.shrSL(E,j,6),U=bt.add4L(X,V,oa[M-7],oa[M-16]),Y=bt.add4H(U,q,R,sa[M-7],sa[M-16]);sa[M]=Y|0,oa[M]=U|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:m,Gh:w,Gl:y,Hh:C,Hl:A}=this;for(let M=0;M<80;M++){const H=bt.rotrSH(d,h,14)^bt.rotrSH(d,h,18)^bt.rotrBH(d,h,41),G=bt.rotrSL(d,h,14)^bt.rotrSL(d,h,18)^bt.rotrBL(d,h,41),q=d&f^~d&w,X=h&m^~h&y,E=bt.add5L(A,G,X,Nx[M],oa[M]),j=bt.add5H(E,C,H,q,Ox[M],sa[M]),R=E|0,V=bt.rotrSH(r,i,28)^bt.rotrBH(r,i,34)^bt.rotrBH(r,i,39),U=bt.rotrSL(r,i,28)^bt.rotrBL(r,i,34)^bt.rotrBL(r,i,39),Y=r&s^r&a^s&a,x=i&o^i&c^o&c;C=w|0,A=y|0,w=f|0,y=m|0,f=d|0,m=h|0,{h:d,l:h}=bt.add(l|0,u|0,j|0,R|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const p=bt.add3L(R,U,x);r=bt.add3H(p,j,V,Y),i=p|0}({h:r,l:i}=bt.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=bt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=bt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=bt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=bt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:m}=bt.add(this.Fh|0,this.Fl|0,f|0,m|0),{h:w,l:y}=bt.add(this.Gh|0,this.Gl|0,w|0,y|0),{h:C,l:A}=bt.add(this.Hh|0,this.Hl|0,C|0,A|0),this.set(r,i,s,o,a,c,l,u,d,h,f,m,w,y,C,A)}roundClean(){sa.fill(0),oa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Hp=Ev(()=>new jx);/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Dx=n=>n[0]==="あいこくしん";function Pv(n){if(typeof n!="string")throw new TypeError(`Invalid mnemonic type: ${typeof n}`);return n.normalize("NFKD")}function Bx(n){const e=Pv(n),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}function Rx(n){xv(n,16,20,24,28,32)}function Px(n,e=128){if(Xh(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return Lx(Mw(e/8),n)}const Ux=n=>{const e=8-n.length/4;return new Uint8Array([np(n)[0]>>e<<e])};function Fx(n){if(!Array.isArray(n)||n.length!==2048||typeof n[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return n.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),mh.chain(mh.checksum(1,Ux),mh.radix2(11,!0),mh.alphabet(n))}function Lx(n,e){return Rx(n),Fx(e).encode(n).join(Dx(e)?"　":" ")}const $x=n=>Pv(`mnemonic${n}`);function Vx(n,e=""){return Ax(Hp,Bx(n).nfkd,$x(e),{c:2048,dkLen:64})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bw=BigInt(0),Gp=BigInt(1),qx=BigInt(2);function Vc(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Vd(n){if(!Vc(n))throw new Error("Uint8Array expected")}function Ko(n,e){if(typeof e!="boolean")throw new Error(`${n} must be valid boolean, got "${e}".`)}const zx=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function qc(n){Vd(n);let e="";for(let t=0;t<n.length;t++)e+=zx[n[t]];return e}function Uv(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function Rw(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const Co={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function kb(n){if(n>=Co._0&&n<=Co._9)return n-Co._0;if(n>=Co._A&&n<=Co._F)return n-(Co._A-10);if(n>=Co._a&&n<=Co._f)return n-(Co._a-10)}function uu(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=kb(n.charCodeAt(s)),a=kb(n.charCodeAt(s+1));if(o===void 0||a===void 0){const c=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Uc(n){return Rw(qc(n))}function zl(n){return Vd(n),Rw(qc(Uint8Array.from(n).reverse()))}function du(n,e){return uu(n.toString(16).padStart(e*2,"0"))}function bd(n,e){return du(n,e).reverse()}function Wx(n){return uu(Uv(n))}function er(n,e,t){let r;if(typeof e=="string")try{r=uu(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Vc(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function zc(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Vd(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function Kx(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function Zx(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}const sg=n=>typeof n=="bigint"&&Bw<=n;function Yp(n,e,t){return sg(n)&&sg(e)&&sg(t)&&e<=n&&n<t}function ts(n,e,t,r){if(!Yp(e,t,r))throw new Error(`expected valid ${n}: ${t} <= n < ${r}, got ${typeof e} ${e}`)}function Qx(n){let e;for(e=0;n>Bw;n>>=Gp,e+=1);return e}function Hx(n,e){return n>>BigInt(e)&Gp}function Gx(n,e,t){return n|(t?Gp:Bw)<<BigInt(e)}const Pw=n=>(qx<<BigInt(n-1))-Gp,og=n=>new Uint8Array(n),Sb=n=>Uint8Array.from(n);function Fv(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=og(n),i=og(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>t(i,r,...d),c=(d=og())=>{i=a(Sb([0]),d),r=a(),d.length!==0&&(i=a(Sb([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return zc(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const Yx={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Vc(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Cu(n,e,t={}){const r=(i,s,o)=>{const a=Yx[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=n[i];if(!(o&&c===void 0)&&!a(c,n))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const Xx=()=>{throw new Error("not implemented")};function _d(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const Jx=Object.freeze(Object.defineProperty({__proto__:null,aInRange:ts,abool:Ko,abytes:Vd,bitGet:Hx,bitLen:Qx,bitMask:Pw,bitSet:Gx,bytesToHex:qc,bytesToNumberBE:Uc,bytesToNumberLE:zl,concatBytes:zc,createHmacDrbg:Fv,ensureBytes:er,equalBytes:Kx,hexToBytes:uu,hexToNumber:Rw,inRange:Yp,isBytes:Vc,memoized:_d,notImplemented:Xx,numberToBytesBE:du,numberToBytesLE:bd,numberToHexUnpadded:Uv,numberToVarBytesBE:Wx,utf8ToBytes:Zx,validateObject:Cu},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mr=BigInt(0),jn=BigInt(1),bc=BigInt(2),eE=BigInt(3),c0=BigInt(4),Cb=BigInt(5),Ab=BigInt(8);BigInt(9);BigInt(16);function xn(n,e){const t=n%e;return t>=mr?t:e+t}function tE(n,e,t){if(t<=mr||e<mr)throw new Error("Expected power/modulo > 0");if(t===jn)return mr;let r=jn;for(;e>mr;)e&jn&&(r=r*n%t),n=n*n%t,e>>=jn;return r}function Un(n,e,t){let r=n;for(;e-- >mr;)r*=r,r%=t;return r}function l0(n,e){if(n===mr||e<=mr)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=xn(n,e),r=e,i=mr,s=jn;for(;t!==mr;){const a=r/t,c=r%t,l=i-s*a;r=t,t=c,i=s,s=l}if(r!==jn)throw new Error("invert: does not exist");return xn(i,e)}function nE(n){const e=(n-jn)/bc;let t,r,i;for(t=n-jn,r=0;t%bc===mr;t/=bc,r++);for(i=bc;i<n&&tE(i,e,n)!==n-jn;i++);if(r===1){const o=(n+jn)/c0;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(t+jn)/bc;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),t),d=a.pow(c,s),h=a.pow(c,t);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let w=a.sqr(h);f<l&&!a.eql(w,a.ONE);f++)w=a.sqr(w);const m=a.pow(u,jn<<BigInt(l-f-1));u=a.sqr(m),d=a.mul(d,m),h=a.mul(h,u),l=f}return d}}function rE(n){if(n%c0===eE){const e=(n+jn)/c0;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%Ab===Cb){const e=(n-Cb)/Ab;return function(r,i){const s=r.mul(i,bc),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,bc),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return nE(n)}const iE=(n,e)=>(xn(n,e)&jn)===jn,sE=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oE(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=sE.reduce((r,i)=>(r[i]="function",r),e);return Cu(n,t)}function aE(n,e,t){if(t<mr)throw new Error("Expected power > 0");if(t===mr)return n.ONE;if(t===jn)return e;let r=n.ONE,i=e;for(;t>mr;)t&jn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=jn;return r}function cE(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function Lv(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function $v(n,e,t=!1,r={}){if(n<=mr)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=Lv(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=rE(n),a=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:Pw(i),ZERO:mr,ONE:jn,create:c=>xn(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return mr<=c&&c<n},is0:c=>c===mr,isOdd:c=>(c&jn)===jn,neg:c=>xn(-c,n),eql:(c,l)=>c===l,sqr:c=>xn(c*c,n),add:(c,l)=>xn(c+l,n),sub:(c,l)=>xn(c-l,n),mul:(c,l)=>xn(c*l,n),pow:(c,l)=>aE(a,c,l),div:(c,l)=>xn(c*l0(l,n),n),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>l0(c,n),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>cE(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?bd(c,s):du(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return t?zl(c):Uc(c)}});return Object.freeze(a)}function Vv(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function qv(n){const e=Vv(n);return e+Math.ceil(e/2)}function lE(n,e,t=!1){const r=n.length,i=Vv(e),s=qv(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?Uc(n):zl(n),a=xn(o,e-jn)+jn;return t?bd(a,i):du(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uE=BigInt(0),ag=BigInt(1),cg=new WeakMap,Tb=new WeakMap;function zv(n,e){const t=(s,o)=>{const a=o.negate();return s?a:o},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>{r(s);const o=Math.ceil(e/s)+1,a=2**(s-1);return{windows:o,windowSize:a}};return{constTimeNegate:t,unsafeLadder(s,o){let a=n.ZERO,c=s;for(;o>uE;)o&ag&&(a=a.add(c)),c=c.double(),o>>=ag;return a},precomputeWindow(s,o){const{windows:a,windowSize:c}=i(o),l=[];let u=s,d=u;for(let h=0;h<a;h++){d=u,l.push(d);for(let f=1;f<c;f++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(s,o,a){const{windows:c,windowSize:l}=i(s);let u=n.ZERO,d=n.BASE;const h=BigInt(2**s-1),f=2**s,m=BigInt(s);for(let w=0;w<c;w++){const y=w*l;let C=Number(a&h);a>>=m,C>l&&(C-=f,a+=ag);const A=y,M=y+Math.abs(C)-1,H=w%2!==0,G=C<0;C===0?d=d.add(t(H,o[A])):u=u.add(t(G,o[M]))}return{p:u,f:d}},wNAFCached(s,o,a){const c=Tb.get(s)||1;let l=cg.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&cg.set(s,a(l))),this.wNAF(c,l,o)},setWindowSize(s,o){r(o),Tb.set(s,o),cg.delete(s)}}}function Uw(n){return oE(n.Fp),Cu(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Lv(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ib(n){n.lowS!==void 0&&Ko("lowS",n.lowS),n.prehash!==void 0&&Ko("prehash",n.prehash)}function dE(n){const e=Uw(n);Cu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:hE,hexToBytes:fE}=Jx,Ac={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Ac;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:hE(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Ac,t=typeof n=="string"?fE(n):n;Vd(t);let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Ac._parseInt(t.subarray(2)),{d:o,l:a}=Ac._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,a=t(s),c=t(o);return`30${t(o+s+4)}02${c}${i}02${a}${r}`}},Ta=BigInt(0),dr=BigInt(1);BigInt(2);const xb=BigInt(3);BigInt(4);function pE(n){const e=dE(n),{Fp:t}=e,r=e.toBytes||((m,w,y)=>{const C=w.toAffine();return zc(Uint8Array.from([4]),t.toBytes(C.x),t.toBytes(C.y))}),i=e.fromBytes||(m=>{const w=m.subarray(1),y=t.fromBytes(w.subarray(0,t.BYTES)),C=t.fromBytes(w.subarray(t.BYTES,2*t.BYTES));return{x:y,y:C}});function s(m){const{a:w,b:y}=e,C=t.sqr(m),A=t.mul(C,m);return t.add(t.add(A,t.mul(m,w)),y)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return Yp(m,dr,e.n)}function a(m){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:C,n:A}=e;if(w&&typeof m!="bigint"){if(Vc(m)&&(m=qc(m)),typeof m!="string"||!w.includes(m.length))throw new Error("Invalid key");m=m.padStart(y*2,"0")}let M;try{M=typeof m=="bigint"?m:Uc(er("private key",m,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof m}`)}return C&&(M=xn(M,A)),ts("private key",M,dr,A),M}function c(m){if(!(m instanceof d))throw new Error("ProjectivePoint expected")}const l=_d((m,w)=>{const{px:y,py:C,pz:A}=m;if(t.eql(A,t.ONE))return{x:y,y:C};const M=m.is0();w==null&&(w=M?t.ONE:t.inv(A));const H=t.mul(y,w),G=t.mul(C,w),q=t.mul(A,w);if(M)return{x:t.ZERO,y:t.ZERO};if(!t.eql(q,t.ONE))throw new Error("invZ was invalid");return{x:H,y:G}}),u=_d(m=>{if(m.is0()){if(e.allowInfinityPoint&&!t.is0(m.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=m.toAffine();if(!t.isValid(w)||!t.isValid(y))throw new Error("bad point: x or y not FE");const C=t.sqr(y),A=s(w);if(!t.eql(C,A))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(w,y,C){if(this.px=w,this.py=y,this.pz=C,w==null||!t.isValid(w))throw new Error("x required");if(y==null||!t.isValid(y))throw new Error("y required");if(C==null||!t.isValid(C))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:C}=w||{};if(!w||!t.isValid(y)||!t.isValid(C))throw new Error("invalid affine point");if(w instanceof d)throw new Error("projective point not allowed");const A=M=>t.eql(M,t.ZERO);return A(y)&&A(C)?d.ZERO:new d(y,C,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=t.invertBatch(w.map(C=>C.pz));return w.map((C,A)=>C.toAffine(y[A])).map(d.fromAffine)}static fromHex(w){const y=d.fromAffine(i(er("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return d.BASE.multiply(a(w))}_setWindowSize(w){f.setWindowSize(this,w)}assertValidity(){u(this)}hasEvenY(){const{y:w}=this.toAffine();if(t.isOdd)return!t.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){c(w);const{px:y,py:C,pz:A}=this,{px:M,py:H,pz:G}=w,q=t.eql(t.mul(y,G),t.mul(M,A)),X=t.eql(t.mul(C,G),t.mul(H,A));return q&&X}negate(){return new d(this.px,t.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,C=t.mul(y,xb),{px:A,py:M,pz:H}=this;let G=t.ZERO,q=t.ZERO,X=t.ZERO,E=t.mul(A,A),j=t.mul(M,M),R=t.mul(H,H),V=t.mul(A,M);return V=t.add(V,V),X=t.mul(A,H),X=t.add(X,X),G=t.mul(w,X),q=t.mul(C,R),q=t.add(G,q),G=t.sub(j,q),q=t.add(j,q),q=t.mul(G,q),G=t.mul(V,G),X=t.mul(C,X),R=t.mul(w,R),V=t.sub(E,R),V=t.mul(w,V),V=t.add(V,X),X=t.add(E,E),E=t.add(X,E),E=t.add(E,R),E=t.mul(E,V),q=t.add(q,E),R=t.mul(M,H),R=t.add(R,R),E=t.mul(R,V),G=t.sub(G,E),X=t.mul(R,j),X=t.add(X,X),X=t.add(X,X),new d(G,q,X)}add(w){c(w);const{px:y,py:C,pz:A}=this,{px:M,py:H,pz:G}=w;let q=t.ZERO,X=t.ZERO,E=t.ZERO;const j=e.a,R=t.mul(e.b,xb);let V=t.mul(y,M),U=t.mul(C,H),Y=t.mul(A,G),x=t.add(y,C),p=t.add(M,H);x=t.mul(x,p),p=t.add(V,U),x=t.sub(x,p),p=t.add(y,A);let g=t.add(M,G);return p=t.mul(p,g),g=t.add(V,Y),p=t.sub(p,g),g=t.add(C,A),q=t.add(H,G),g=t.mul(g,q),q=t.add(U,Y),g=t.sub(g,q),E=t.mul(j,p),q=t.mul(R,Y),E=t.add(q,E),q=t.sub(U,E),E=t.add(U,E),X=t.mul(q,E),U=t.add(V,V),U=t.add(U,V),Y=t.mul(j,Y),p=t.mul(R,p),U=t.add(U,Y),Y=t.sub(V,Y),Y=t.mul(j,Y),p=t.add(p,Y),V=t.mul(U,p),X=t.add(X,V),V=t.mul(g,p),q=t.mul(x,q),q=t.sub(q,V),V=t.mul(x,U),E=t.mul(g,E),E=t.add(E,V),new d(q,X,E)}subtract(w){return this.add(w.negate())}is0(){return this.equals(d.ZERO)}wNAF(w){return f.wNAFCached(this,w,d.normalizeZ)}multiplyUnsafe(w){ts("scalar",w,Ta,e.n);const y=d.ZERO;if(w===Ta)return y;if(w===dr)return this;const{endo:C}=e;if(!C)return f.unsafeLadder(this,w);let{k1neg:A,k1:M,k2neg:H,k2:G}=C.splitScalar(w),q=y,X=y,E=this;for(;M>Ta||G>Ta;)M&dr&&(q=q.add(E)),G&dr&&(X=X.add(E)),E=E.double(),M>>=dr,G>>=dr;return A&&(q=q.negate()),H&&(X=X.negate()),X=new d(t.mul(X.px,C.beta),X.py,X.pz),q.add(X)}multiply(w){const{endo:y,n:C}=e;ts("scalar",w,dr,C);let A,M;if(y){const{k1neg:H,k1:G,k2neg:q,k2:X}=y.splitScalar(w);let{p:E,f:j}=this.wNAF(G),{p:R,f:V}=this.wNAF(X);E=f.constTimeNegate(H,E),R=f.constTimeNegate(q,R),R=new d(t.mul(R.px,y.beta),R.py,R.pz),A=E.add(R),M=j.add(V)}else{const{p:H,f:G}=this.wNAF(w);A=H,M=G}return d.normalizeZ([A,M])[0]}multiplyAndAddUnsafe(w,y,C){const A=d.BASE,M=(G,q)=>q===Ta||q===dr||!G.equals(A)?G.multiplyUnsafe(q):G.multiply(q),H=M(this,y).add(M(w,C));return H.is0()?void 0:H}toAffine(w){return l(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===dr)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===dr?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Ko("isCompressed",w),this.assertValidity(),r(d,this,w)}toHex(w=!0){return Ko("isCompressed",w),qc(this.toRawBytes(w))}}d.BASE=new d(e.Gx,e.Gy,t.ONE),d.ZERO=new d(t.ZERO,t.ONE,t.ZERO);const h=e.nBitLength,f=zv(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:o}}function mE(n){const e=Uw(n);return Cu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function gE(n){const e=mE(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(x){return xn(x,r)}function a(x){return l0(x,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=pE({...e,toBytes(x,p,g){const k=p.toAffine(),T=t.toBytes(k.x),O=zc;return Ko("isCompressed",g),g?O(Uint8Array.from([p.hasEvenY()?2:3]),T):O(Uint8Array.from([4]),T,t.toBytes(k.y))},fromBytes(x){const p=x.length,g=x[0],k=x.subarray(1);if(p===i&&(g===2||g===3)){const T=Uc(k);if(!Yp(T,dr,t.ORDER))throw new Error("Point is not on curve");const O=u(T);let L;try{L=t.sqrt(O)}catch(_){const F=_ instanceof Error?": "+_.message:"";throw new Error("Point is not on curve"+F)}const W=(L&dr)===dr;return(g&1)===1!==W&&(L=t.neg(L)),{x:T,y:L}}else if(p===s&&g===4){const T=t.fromBytes(k.subarray(0,t.BYTES)),O=t.fromBytes(k.subarray(t.BYTES,2*t.BYTES));return{x:T,y:O}}else throw new Error(`Point of length ${p} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=x=>qc(du(x,e.nByteLength));function f(x){const p=r>>dr;return x>p}function m(x){return f(x)?o(-x):x}const w=(x,p,g)=>Uc(x.slice(p,g));class y{constructor(p,g,k){this.r=p,this.s=g,this.recovery=k,this.assertValidity()}static fromCompact(p){const g=e.nByteLength;return p=er("compactSignature",p,g*2),new y(w(p,0,g),w(p,g,2*g))}static fromDER(p){const{r:g,s:k}=Ac.toSig(er("DER",p));return new y(g,k)}assertValidity(){ts("r",this.r,dr,r),ts("s",this.s,dr,r)}addRecoveryBit(p){return new y(this.r,this.s,p)}recoverPublicKey(p){const{r:g,s:k,recovery:T}=this,O=q(er("msgHash",p));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const L=T===2||T===3?g+e.n:g;if(L>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const W=T&1?"03":"02",P=c.fromHex(W+h(L)),_=a(L),F=o(-O*_),I=o(k*_),z=c.BASE.multiplyAndAddUnsafe(P,F,I);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return uu(this.toDERHex())}toDERHex(){return Ac.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return uu(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const C={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=qv(e.n);return lE(e.randomBytes(x),e.n)},precompute(x=8,p=c.BASE){return p._setWindowSize(x),p.multiply(BigInt(3)),p}};function A(x,p=!0){return c.fromPrivateKey(x).toRawBytes(p)}function M(x){const p=Vc(x),g=typeof x=="string",k=(p||g)&&x.length;return p?k===i||k===s:g?k===2*i||k===2*s:x instanceof c}function H(x,p,g=!0){if(M(x))throw new Error("first arg must be private key");if(!M(p))throw new Error("second arg must be public key");return c.fromHex(p).multiply(l(x)).toRawBytes(g)}const G=e.bits2int||function(x){const p=Uc(x),g=x.length*8-e.nBitLength;return g>0?p>>BigInt(g):p},q=e.bits2int_modN||function(x){return o(G(x))},X=Pw(e.nBitLength);function E(x){return ts(`num < 2^${e.nBitLength}`,x,Ta,X),du(x,e.nByteLength)}function j(x,p,g=R){if(["recovered","canonical"].some(le=>le in g))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:T}=e;let{lowS:O,prehash:L,extraEntropy:W}=g;O==null&&(O=!0),x=er("msgHash",x),Ib(g),L&&(x=er("prehashed msgHash",k(x)));const P=q(x),_=l(p),F=[E(_),E(P)];if(W!=null&&W!==!1){const le=W===!0?T(t.BYTES):W;F.push(er("extraEntropy",le))}const I=zc(...F),z=P;function ie(le){const he=G(le);if(!d(he))return;const _e=a(he),Ce=c.BASE.multiply(he).toAffine(),ge=o(Ce.x);if(ge===Ta)return;const Oe=o(_e*o(z+ge*_));if(Oe===Ta)return;let Ie=(Ce.x===ge?0:2)|Number(Ce.y&dr),Ne=Oe;return O&&f(Oe)&&(Ne=m(Oe),Ie^=1),new y(ge,Ne,Ie)}return{seed:I,k2sig:ie}}const R={lowS:e.lowS,prehash:!1},V={lowS:e.lowS,prehash:!1};function U(x,p,g=R){const{seed:k,k2sig:T}=j(x,p,g),O=e;return Fv(O.hash.outputLen,O.nByteLength,O.hmac)(k,T)}c.BASE._setWindowSize(8);function Y(x,p,g,k=V){var Ce;const T=x;if(p=er("msgHash",p),g=er("publicKey",g),"strict"in k)throw new Error("options.strict was renamed to lowS");Ib(k);const{lowS:O,prehash:L}=k;let W,P;try{if(typeof T=="string"||Vc(T))try{W=y.fromDER(T)}catch(ge){if(!(ge instanceof Ac.Err))throw ge;W=y.fromCompact(T)}else if(typeof T=="object"&&typeof T.r=="bigint"&&typeof T.s=="bigint"){const{r:ge,s:Oe}=T;W=new y(ge,Oe)}else throw new Error("PARSE");P=c.fromHex(g)}catch(ge){if(ge.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(O&&W.hasHighS())return!1;L&&(p=e.hash(p));const{r:_,s:F}=W,I=q(p),z=a(F),ie=o(I*z),le=o(_*z),he=(Ce=c.BASE.multiplyAndAddUnsafe(P,ie,le))==null?void 0:Ce.toAffine();return he?o(he.x)===_:!1}return{CURVE:e,getPublicKey:A,getSharedSecret:H,sign:U,verify:Y,ProjectivePoint:c,Signature:y,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wE(n){return{hash:n,hmac:(e,...t)=>$d(n,e,G4(...t)),randomBytes:Mw}}function yE(n,e){const t=r=>gE({...n,...wE(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wv=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Eb=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),bE=BigInt(1),u0=BigInt(2),Mb=(n,e)=>(n+e/u0)/e;function _E(n){const e=Wv,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,u=l*l*n%e,d=Un(u,t,e)*u%e,h=Un(d,t,e)*u%e,f=Un(h,u0,e)*l%e,m=Un(f,i,e)*f%e,w=Un(m,s,e)*m%e,y=Un(w,a,e)*w%e,C=Un(y,c,e)*y%e,A=Un(C,a,e)*w%e,M=Un(A,t,e)*u%e,H=Un(M,o,e)*m%e,G=Un(H,r,e)*l%e,q=Un(G,u0,e);if(!d0.eql(d0.sqr(q),n))throw new Error("Cannot find square root");return q}const d0=$v(Wv,void 0,void 0,{sqrt:_E}),Fw=yE({a:BigInt(0),b:BigInt(7),Fp:d0,n:Eb,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=Eb,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-bE*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=Mb(s*n,e),c=Mb(-r*n,e);let l=xn(n-a*t-c*i,e),u=xn(-a*r-c*s,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},np);BigInt(0);Fw.ProjectivePoint;const vE={setup(){return{}}};const kE={class:"webLoading-container"},SE=bv('<div class="spot" style="--index:0;" data-v-cb831a29></div><div class="spot" style="--index:1;" data-v-cb831a29></div><div class="spot" style="--index:2;" data-v-cb831a29></div><div class="spot" style="--index:3;" data-v-cb831a29></div><div class="spot" style="--index:4;" data-v-cb831a29></div>',5),CE=[SE];function AE(n,e,t,r,i,s){return ne(),re("div",kE,CE)}const NX=xr(vE,[["render",AE],["__scopeId","data-v-cb831a29"]]),TE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABVFJREFUWEft11tsFFUYB/D/N7u0UNqZqQaDISGiFCgQUgOCoFx2Zw0mQgwk4gMmQCIaeLCztmirgaxALMhlZ02EKCRg1AcxgRgwAd3pUhAQhVgJWKV4CQkRg9iZaS3tdvd8ZhZKEHrZWwMP7tPs7jnf95t/Zk7OIdzjH7rHfcgbsDrWOrFLiI0EkFRA+taZ8vl83HxegKEYD7aE3cSMh1wUEX5XJaU85KOOXJF5Aer1Vi0LvA3g+xugR0nCG4ZfrbvrwNojrcPa48kLAGQij+aCmJMmAKeowDO6blbJlVyQOSeom/Y2Zl4B0IFIQJnvYiqj9n6A5xHRdkNTVt41oN7QWo6EOJMCeKVJxuySJveyt9+zgeaUoB61DzD4mZ6S6k6WQF8YAWVeNrjUC5ftRN1s9ff1rN3+bBpaSX02vbIChpgly7RPM1AhEWrDmrqhp+ZB06oRjDoCGlVNmRwiEpkiswLqprOUWewCcLHUo4x117vqY60PdHWIGoD/jGjqRhfiro8tSftnACOJpGWGJu8ecGDoFBdZtn2eGSPIQy8YPuUTt2lVzBmXSIomAjUZAWV8N0SP2Ys5yR8T4ZKqKGNCU6g9E2TGCer19moWvJZAp8KaPJWIuC8gM1PQdL5l8BSSaI3hV9YNGHBVrG14XCSawSgGeWZHtJIj3c16SzC1Lpqts8DJBhDaCiRv2SZf8eV0kRklqJvWDma8CMK+iKYuvLVJX8DrSGsvGAuIsNPQ1OV5B6Z2K0nRCIIo8GLCptlKcybAVQ12WTyBc2BIgzxSxWZfydl0kGknqEftgwyeK4HeDQeUytuL95egOz4YtSMC/AqBDhkB5em8ASvr7bkQfJAI1pBiaXTdNPlqNsDak87919rEBWaokOjpiF851B+y3wT3MHuO1duNYEyUIFWHA/KWnoqmk+D1FJ0qAbEZhLNP+JWKRUTJvpD9AitNZzlYfADgt9IHlXGhCRTPBRg6xwUtf9g/ARgFkl6KaPKOrIGhGBe3CKcZzMMlCc+H/eqe3oqlm2AqxXprkRD4FESXSyW5LOSjtt7q9pmgHrXXMng1gU4YAWVGX3eaCdCto0ft4wyeTqB1RkBZkzEwaLaPEBx3Dz5F5JVmGHPkE3kFHnamc0IcB9AuUcGYsFZ0qaf6vSaoR+3dDF4CwmcRTV3U39uWaYI3Fu89YDxHoA+NgLI0baAea6tAMnkaQIIKuTw8U/11IIDBo9bD3EnuLtwLj2ey4StuvL1PjwnqpmUyww/CloimVveHc//PJsEbKW4Go4oI9Yampg5dt37uAL4ac+Ylk2I/gf6GR37E8JGVDrDmqFXaEaclAK4amvJROnNSL0uMVSSdXxh8n8cjzd/qkw/0CgzF2GslnTMMLpdAejigRNJtlMu4YNSuFGDD3UuqHnlSyEeJ7nr/SVA3rRXM2AZQ83hVnvDyFOpKt3HQtKcy4z13/K37xHTmv3+KB/1oOecALiPCSkNTt98BDH3Dcss/zgUwD5NIWhjW5H3pFO8eUxW1nkoAX7rfSzXFk+n5I2g6CwSLvSC6UjpUHh16nBy31s0EK02nDixqiOiooSmzMsG5Y6sbro3qSsQXu9cRTVmf6fzU82jaR5h5JkjaENHk2pvA17++NrKjM+4ebgq9HkzbMkf5LpsGuc6pOmw/lkjiJIDOwYUFYzc+OeRiKkHdtN5kxnoCfT64kJfl2iiX+R2dtIvBzxJRyNCUt1LAynpnFYR4J5fCeZ8rSa9F/PKmFLD6Bx7a9ZezE4AGsDfvzTIqmNrOfVUqySvcXU6/+8GMag/A4P+BuYZ6zyf4L5scmkdyk0/jAAAAAElFTkSuQmCC",IE=Vr({components:{Modal:wo},setup(){const n=wr(),e=Le(()=>n),t=Le(()=>n.chainName),r=Le(()=>e.value.chainName?nr[e.value.chainName]:{}),i=Le(()=>e.value.currentExplorer);return{getExplorerUrl:Wo,importIcon:Zt,store:e,chainName:t,config:r,currentExplorer:i}}}),xE=""+globalThis.__publicAssetsURL("image/img-Transaction-Submitted@2x.png"),EE=""+globalThis.__publicAssetsURL("sui-image/img-Transaction-Submitted@2x.png");const Kv=n=>(Ri("data-v-1cdc2d08"),n=n(),Pi(),n),ME=Kv(()=>N("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),OE={class:"success-container"},NE={key:0,src:xE,alt:""},jE={key:1,src:EE,alt:""},DE={class:"waiting-title"},BE={class:"waiting-text"},RE=["href"],PE=Kv(()=>N("svg",{class:"icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon-jump"})],-1));function UE(n,e,t,r,i,s){const o=Ka,a=yo("Modal");return ne(),ar(a,{visible:!0,class:"transaction-success",centered:"",title:"",width:"400px",footer:null,onCancel:e[1]||(e[1]=c=>n.$emit("onClose"))},{closeIcon:kt(()=>[ME]),default:kt(()=>[N("div",OE,[n.store.theme=="default"?(ne(),re("img",NE)):(ne(),re("img",jE)),N("p",DE,Se(n.$t("common.transactionSubmitted")),1),N("p",BE,[N("a",{href:("getExplorerUrl"in n?n.getExplorerUrl:ft(Wo))(n.currentExplorer,"tx",n.store.currentTransactionTxid),target:"_blank"},[N("span",null,Se(n.$t("common.viewExplorer")),1),PE],8,RE)]),rn(o,{onClick:e[0]||(e[0]=c=>n.$emit("onClose"))},{default:kt(()=>[pr(Se(n.$t("button.ok")),1)]),_:1})])]),_:1})}const jX=xr(IE,[["render",UE],["__scopeId","data-v-1cdc2d08"]]),FE=Vr({components:{Modal:wo},setup(){const n=wr(),e=Le(()=>n);return{importIcon:Zt,store:e}}}),LE=""+globalThis.__publicAssetsURL("image/img-transaction-rejected@2x.png"),$E=""+globalThis.__publicAssetsURL("sui-image/img-Transaction-rejected@2x.png");const VE=n=>(Ri("data-v-ace0f971"),n=n(),Pi(),n),qE=VE(()=>N("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),zE={class:"rejected-container"},WE={key:0,src:LE,alt:""},KE={key:1,src:$E,alt:""},ZE={class:"waiting-title"};function QE(n,e,t,r,i,s){const o=Ka,a=yo("Modal");return ne(),ar(a,{visible:!0,class:"transiaction-rejected",centered:"",title:"",width:"400px",footer:null,onCancel:e[1]||(e[1]=c=>n.$emit("onClose"))},{closeIcon:kt(()=>[qE]),default:kt(()=>[N("div",zE,[n.store.theme=="default"?(ne(),re("img",WE)):(ne(),re("img",KE)),N("p",ZE,Se(n.store.isNotSupportMsafeError?"MSafe Wallet is not supported by this operation.":n.$t("modal.rejectedModalText")),1),rn(o,{onClick:e[0]||(e[0]=c=>n.$emit("onClose"))},{default:kt(()=>[pr(Se(n.$t("button.ok")),1)]),_:1})])]),_:1})}const DX=xr(FE,[["render",QE],["__scopeId","data-v-ace0f971"]]),HE=Vr({components:{Modal:wo},setup(){const n=wr();return{store:Le(()=>n),importIcon:Zt}}}),GE=""+globalThis.__publicAssetsURL("image/img-loading@2x.png"),YE=""+globalThis.__publicAssetsURL("sui-image/img-loading.png");const XE=n=>(Ri("data-v-4f3bccb2"),n=n(),Pi(),n),JE=XE(()=>N("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),eM={class:"waiting-container"},tM={class:"loading-pic"},nM={key:0,src:GE,alt:""},rM={key:1,src:YE,alt:""},iM={class:"waiting-title"},sM={key:0,class:"waiting-title waiting-title1"},oM={class:"waiting-desc"};function aM(n,e,t,r,i,s){const o=yo("Modal");return ne(),ar(o,{visible:!0,class:"transaction-waiting",centered:"",title:n.$t("modal.waitingModalTitle"),width:"400px",footer:null,"mask-closable":!1,onCancel:e[0]||(e[0]=a=>n.$emit("onClose"))},{closeIcon:kt(()=>[JE]),default:kt(()=>[N("div",eM,[N("div",tM,[n.store.theme=="default"?(ne(),re("img",nM)):(ne(),re("img",rM))]),N("p",iM,Se(n.store.currentTransactionDesc),1),n.$route.name==="remove-liquidity"?(ne(),re("p",sM,Se(n.store.currentTransactionDescText),1)):ye("",!0),N("p",oM,Se(n.$t("modal.waitingModalText")),1)])]),_:1},8,["title"])}const BX=xr(HE,[["render",aM],["__scopeId","data-v-4f3bccb2"]]);var nl="TrustWallet",cM=class{constructor(){this.name=nl,this.url="https://trustwallet.com/",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgdmlld0JveD0iMCAwIDQwMiA0MDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8cmVjdCB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgZmlsbD0idXJsKCNwYXR0ZXJuMCkiLz4KPGRlZnM+CjxwYXR0ZXJuIGlkPSJwYXR0ZXJuMCIgcGF0dGVybkNvbnRlbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHdpZHRoPSIxIiBoZWlnaHQ9IjEiPgo8dXNlIHhsaW5rOmhyZWY9IiNpbWFnZTBfMTY5NF8xODk2NyIgdHJhbnNmb3JtPSJzY2FsZSgwLjAwMjQ4NzU2KSIvPgo8L3BhdHRlcm4+CjxpbWFnZSBpZD0iaW1hZ2UwXzE2OTRfMTg5NjciIHdpZHRoPSI0MDIiIGhlaWdodD0iNDAyIiB4bGluazpocmVmPSJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRC8yd0JEQUFjRkJRWUZCQWNHQmdZSUJ3Y0lDeElMQ3dvS0N4WVBFQTBTR2hZYkdoa1dHUmdjSUNnaUhCNG1IaGdaSXpBa0ppb3JMUzR0R3lJeU5URXNOU2dzTFN6LzJ3QkRBUWNJQ0FzSkN4VUxDeFVzSFJrZExDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3ovd2dBUkNBR1NBWklEQVNJQUFoRUJBeEVCLzhRQUd3QUJBQUlEQVFFQUFBQUFBQUFBQUFBQUFBRUdCQVVIQXdML3hBQVpBUUVBQXdFQkFBQUFBQUFBQUFBQUFBQUFBUU1FQlFMLzJnQU1Bd0VBQWhBREVBQUFBZWtBQUFFRXhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaElJRWdBQUFBQVFrQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBQUFRa0FBQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBRUVnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWlZa0FJa0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBUk1FZ2lZa0FBQUFBQUFBQUFQT29XVjduWFZWdXg5TXllWTNYTG8zSXo2QUFBQUFBQUFBRVNENUV6RWdBQUFBQUFCR0xNWmJSNmUydTVWK3BlT25QazR4cXpCTUFicTE4NlVYOVZjNzNlVFRhV3J6NmJmVWVmUUFBQUFBQUdPSmozbUppUUFBQUFOTlVQckE2Zk95Zm53WFZ6Qk1BZ0EyOXFvdXJtNjNyRnI1cGk5U3JlbWlvc2pIMVpnbUFQdjF4MFRrN0RUUFBycUhyWGJGeStpSGoyQUFBQmppWTk1aVlrQUFBQURtMkhuWVBZNVFzTVRYbCt5cUx1YzdMb0UxV1ZiZTVpaTRLN0FBSTArNWV2TksxWFNtaWpsVHArSGJYenhlNlpkVmppMnE0V1d1V1BsZElLclFBQUFNY1RIdk1URWdBQUFBYzYxK3kxdlg1YTMxQzIxMldnY3pvQUFBQUFBQUFPYTlLNW5yeTR3MzRycFlkRHZ1VjB3cXNBQUFBeHhNZTh4TVNBQUFBQnovVmJuVGRibUxWVmJONTlXOGN2b2dBQUFBQUFBT1lkUDVac3lmSTNZNzF1OVB1T1Qwd3JzQUFBQXh4TWU4eE1TQUFBQUJSOUZZcTcxZWFzVmQzaGVSeXVrQUFBQUFBQUI4OHM2ZHpIZGpEWms2RnM4SE80L1ZEejZBQUFBeHhNZTh4TVNBQUFBQlVxdmNLZjArYzIycHo3UEhSaHlPb0FBQUFBQUFCaGMzNkJ6L29ZUTFaK201RVR4dXFFU0FBQUJqaVk5NWlZa0FBQUFEUlVmb1hQZWpnZTNpMDBkVmVYcnhlcUNRQUFBQUFBTkRTTFpVK2x6M3Y0Ykc2cm9nNC9WQUFBQUF4eE1lOHhNU0FBQUFCNDh3NnJ6TGJreHh0eDlDMmRic25KNllWMkFBQUFBQUFValE1bUgxK1czMmh0dmoxYUJ5K2tBQUFBQmppWTk1aVlrQUFBQUJSYjFYYjZhWU9uenQzZXVXZE53YmZZWk5RQUFBQUFERnlxdlpYVWgxdVk2QlErbjQ5WDBNTzBBQUFBREhFeDd6RXhJQUFBQUR3OXlPV2ZOaHIzWDVpeTFvZFZWeXg4cm9oNTlnQUFBRHhRNXZtNnZwWUEwVWIrN1lHZnl1a0ZWb0FBQUFHT0pqM21KaVFBQUFBQU1mbkhUOVhvbzU4Ky9qcFlHOTBUelBUTW5sdG13N0xZOC9UTG9CSUJyYWpkVFphZGpOK01MYWxrd2I3azFmUXdiUUFBQUFBTWNUSHZNVEVnQUFBQUFBYTZqZEs4NzZlWExQV3VoaCtSNzhlOXRwYXF6cXJudTZ4Yk4vVWRMNTZzNGFNNHpZbkNzTzgzR0xYOC9SajFnQUFBQUFBWTRtUGVZbUpBQUFBQUFBQVl1VW1LUm9lcTYzWGw1NDJXdDI1UW55UHBQemtiKzFaZEdoc01zT3NQUHNBQUFBQUFBUWZEMElpWWxJQUFBQUFBQUFBRVZ1eXZmamxuejB2QjJaYWxkczM2elhoVGNBQUFBQUFBQUFpWUpBaVlKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFSSUFCRW9KQUFBQUFBQUFBQUFBQUFBQUFBQUFBaVlKQUFBQkVvSkFBQUFBQUFBQUFBQUFBQUFBQUFRRWdBQUFBQkNRUUpSSUFBQUFBQUFBQUFBQUFJSlFKaVFBQUFBQUFBQUErUkhpSkFBQUFBQUFBQUFBQWVub1FCSUFBQUFILzhRQUx4QUFBQVVFQWdFQ0JBVUZBQUFBQUFBQUFBRUNBd1FGRVRBeEVFQVNJRFFURkNGQklpUXpOV0FqTWxCd2dQL2FBQWdCQVFBQkJRTEhZV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVc1di9OTi81TGYrbC92L0FDVDcvd0FLazFOcGhTYTE5V0pEY2h2ckhvRjFsdUpiUk1xaW5PV1hsc09SS2kzSTY5d1d1bXBTVUprVmR0QWVrT3lGZW1OVTNXQXhPWWtkVTlsclBld1ZLWVFIS3RIU0hhdzZvT1BPUEhoWm55R1EzV2lDS2xGV0V1dHI2SjdMV09mUCtWSmN5UXMvbVh3YnpwZ3pNOEVXbHVQQitsTXVOdnhuWTZ2V1Mxa1BtSGg4eStJOVRmYVUyNGwxdkdleTFqbktOYzdDeFRYM2hHZ014dVZJU3RNaWpwTU94M1dEdzBaUm5HeG5zdFk1ZnZmU2xLbEczVHBMZ2FveEJtSXd4NnpJbEU5UzQ3Z2NvN3lRdUsrMTY2TCtqalBaYXh6ZmZjVTZFMUpiS2x4U0NZY2RBSWlJc3FtVzNBcW54VkE2VEZNU0VFMUk0bzN0OFo3TFdPZjcvaWkvcGRPWDd6aWplMHhuc3RZNmorNGNVWCszcHlQZGNVZjJXTTlsckhVLzNIaWlkUjM2dmNVbjJPTTlsckhWZmY4QUZGL1Y2YXZxcmlsL3QrTTlsckhWeS9POFVZL3pQU1VkazgwNHJVL0dleTFqckpmbWVLUWRwdlNmTzBmbUVWb09NOWxySFdpL0Z4VER0VU9sTk8wTG1PVm8yTTlsckhXaS9wY1FUOFozU3FSMnAvSkZaT005bHJIVnl2QzRhVjR2ZEtzS3RENFlUNVNNaDdMV09vcDhvSExTdk5ubzFwWDA0cDZmS2ZrUFpheHZKODJPYWN2emdkR3JyOHBuRklUZVprUFpheVNFZkRrOFVaeTdIUmxyK0pNNG9xUHdaRDJXc2xXYjhKdkZLZCtITTZFbDM0TWJtbXQvRGdaRDJXc2xZYThtT0VxTkMyWENlWnoxaC84QUR3MmczSEVwSktjaDdMV1I1c25tRkpOS3VLVEs4RlpublVzTlBPcWZlNHBEUG5KeW5zdFphdEg4SHVZRlNKd3NqcnFHVVRacXBhK1lVZjVhTmxQWmF5dnNwZlplYVV3N3pGcWJqSVprTnlFNFpWVGFZRDhoeVF2bWxSUE5lWTlsck5OaEpsTnJRcHRmS0ZxYlZHcTRRNGgxUHBrem1Zd2sxQjZSNllNRlVwYVVraE9ZOWxyUExoTnlreUl6a1pmb2FmY1lWRnF5SE9YcERjZEVtcU9PK3FIVEZPaEtTUW5PZXkxMEZvUzRpVlNESUtTYUZlaUxPZGpCK3NGNExjVTZ2MFI0ajBrNHRPYWo5STlscnBQeG1wQlNhVTYxaFpZY2ZWR3BLRUFpSWk2VnV0SmdzeVJKZ3V4dlNTVFVjV2tHWVEybHRQVCt3Ky9WTXJsTHBSS0NrcVFvUllUc280ME5xS25ybjJIb3pNZ0pwY1ZKa1JKTHJmZi9BSnd2M2I5Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN3bkwvQVAvRUFDY1JBQUlCQWdVRkFBSURBQUFBQUFBQUFBRUNBd0FSQkJBd01USVNJQ0ZBUVJSd0lsRlMvOW9BQ0FFREFRRS9BZjBhN2hONk03VkhNRzhIMWIyb3lxS2FjbmF0ODFtWmFXZFRRWUhiMEpKQ1RWejJKQ3pVSWxBdFR3RWNhMnp2UVlpa1BVTDZyYjBxbGpZVitPMUREajdTeHF1M1lWQjNvNGRmbEhEbis2ZU1wdmxGd0dxL0kxRHowc1JzTW8rQTFYNUdvZVkwc1I4eWo0alZsNW1vK1kwc1I4eVhpTldiblNjaHBZamxrTlhFY3RPZm5TK1RyWWdiSEtNM1VhTG03RTFFTHVOYVlYWExEdDR0b08zU3Q4c09QTjlkbDZUYWxicE42Vmd3dU8rV1RxOERLSmVsZGVXUHE4akpXSzdVazRQTHNlVlZwNUMrVU1kLzVIMFpJZzlNaFhmSkpDbTFDZFNQTlBNVzJ5QXZ0U1FmVzlNaTlQQi9taUNOODBnSjNwVkM3ZXN5aHQ2T0hQeWtpQ2ZvL3dEL3hBQWtFUUFDQVFNRUFnTUJBUUFBQUFBQUFBQUJBZ01BQkJFUU1ERXlFaUVnUUVFaWNQL2FBQWdCQWdFQlB3SC9BQTFJeS9GQzNURlNRRmZZK3FBVFN3dWFTMkE3VUJqVjRGYW10M0hGRlNPZm9SUmhWckErRHpxdE5NNU9hUzRCN1VEblhBb29wNUZPdmkyTjFlQlRNRUdUUnVWbzNSL0JUU00zSitDc1Y0b1hMRG1oZEQ5RkpLSDQwbTduZFRxS242YlZyeWRKZTUzWStncWZvZHExL2RKTzUzWXVncVhvZHExL2RIN0hkZzZDbjZuYXR1dWgzYlkveHQyNC9pbU9CbmV0VHlOSlJoenN4akNnVk1jSWQ2QnNQcGNyNzh0aU5mSnNhWFRlZ043aWtieUdhZGZNWU5NaFE0UHpoaThCazZTdjV0bmZobDhEZzhhTW9iMGFlM0k2L0JJV2VraVZOSjVjZnlQb3h6RlBWSTRmalI0bGZtbXQyQndLamdDODZFZ2MxSmNmaWZUQnh4U1hQNDFBZyt4ckpjQWVscG5MYy9XVnluc1VMbGNlNmttTC93Q0gvd0QveEFBM0VBQUJBUVFHQndZR0FnTUFBQUFBQUFBQkFnQURFUklRSUNFaVFGRXhRVkpoY1hLQkV5TXdVR0toQkRJemtaS3hRb0tBa1BELzJnQUlBUUVBQmo4Qy93QkMwcVIyaXR6WG5ObTR0TTdNZkw1bHFDUXhRNXVvejFtbWQyWUZwVlhIbVdmbGtWRUFiMmc1RTV6MU5GNHFOYVZmZUkzNld1cmdySStUM255UHUxMlpmQU4zYVFqM2FMeFpWeDhLeGNSa3ExdTlkZFV0OVNYaTExYVZjRGpwVTJ2RDdORXZsOURCdnJQUHlhMTR2N3RhZkFtZTkyajNMQU8rN1VHZzhURGZxUGdXS0k2dDlWZjVOOVo1K1RYMWRvbmV3V2d4QnhMMG5haDRVU096VG1wb3dtWHRHbVZRQkJ6YUxoVXZwTFFlSUtmQ1duSldKZmN4clFTQ2VEZlRsNXJHNzE1MFMxeDJBYzY4Q0lockIyWjlMWEZKWDdOZmRLSFN1ODVzUzk1cVZLZVJzT3B2a2oxYXh5ajdOWUllTmZkcFZ4RGZSSFJ0Q2gxWjRoT2hKaFN2bXhMM2pTOTQ0Ujl6bWxmUGlYdEwzcGhIdk1hVHo0bDUwL1ZMN3BoRjh4cC9zY1NyZ0tYdkRDRTBvNjRrY3RLeDZjR1RVZGY5cnhLRDZhZUtjRzhQcE5SMXk0bHllTktOOGYxZzMzTFVkREpJeExzNzZYWE5nM25UOTFBTXNUSEpWS0ZaS0J3WUdhcVhhYzFERlBmdlVRck1Sd1RwUEUwdWh2amlscHpTUlVkN3JNRkxzcHBKMlU0dDRqSlZLMFpHT0NlcTMwdlY5TVhOdGlOTXVwWWhnVnZNaFVSNnJjV2w1c0drS0drV3NsNG5Rb1lCTGtjVFNsQTBxTUdDUm9GbUxXN1A4Z3hTZElwN0Jac1Y4dmpsNHMyQmxQRmFUU1hoMEkvZU43WWZLdlR4cUIwK01GNmpuNHBXdFVBMlRzYUJVU2orV2s0MVR0V2dzWGE5SXFCTHkrajNEVE8xUjhLVkhlTDltbWVLalU3ZFl1ajVjZms4R2dzVUxFQ0treUZGSjNNRS9FRCt3YVpDZ29icTBDWmxiSWFFWkVaQ3JFMk9ocExCS1JBRHlDMnhlcFRRZUo2MVpuYWlscFgxeFdlcW1aNHFEU3V1N1Q3MWd0OWRSbHJMQktSQUR5S1ZhUW9NVmZEMmpaTFFVQ0R2cXdqTWpaTGR5bThkclUweTFGUnEzRTJablEweHZyelBrMEhpWTcybWRkNG4zOEdWMmtxYVo4WnpscWFBRUI1VEVpQzlvTkVpS05vVllKRVMwM3hGbnBEU29TRWpkNVpBdFA4QUQzVHN0S29RSW91aUNkb3RkRVZiUjh3N3hFZDdSbEo0bG9KRUIvbkovOFFBS2hBQUFRSUVCQVlEQVFFQkFBQUFBQUFBQVFBUklURmhjUkF3UVZFZ1FJR1JvYkZRNGZEQjhkSC8yZ0FJQVFFQUFUOGh5Q1FFNTI3cGp1bUtnRlFDb0JVQXFBVkFLZ0ZRQ29CVUFxQVZBS2dGUUNvQlVBcUFWQUtnRlFDb0JVQXFBVkFLZ0ZRQ1ltcVZHNlpia0NXVVRPQ0FiNEpta24zaG11OHBib0J2aG9pb1U4cncrSmJVSUY4ancrTEkxRTBJOFJpVzcvR21CZnZ3a3NnR0h4d2hEZ203YjQ4K3NTV0NBWWZJQ0RqQXlmSW1Zd0V6ekI4WUdZSmdPcSsvbFFGV28xRitaSk9XTmhEcVZHWElQNk5pSE1ieW1kamNTczVjQUFGSjVRb0hjeVRCT0Zab2ZaUEg3Um9PbkVPRmlLQ3hUUUJFcG5sWmlrMjVBZ0RrZ0NxbDRwR1U3eE5nZVU1Z2Z1WWs4UjFaVE9Eam9FWkFncVA0SzBtV3drTHduQjVHYmRTYlpnQkRBcnhrRzY4UFFlRi9wRk5GYzBSY2h2a05EMngrR1FnV0xBemU2Y2MyQjREa2VGNUFHUStwZjZSQVFKcWlNOUNtbmpjWmsyNmsyek5FUXV5R1RNcHY3a095WmcvWmh0aVp6YkFFOHZuUjdxOFdhSHJsRkJLRjFHWk51cE5zeUg4VWVKMUYyQjFxME4wQk1YNkg5SzZqQkU5K001Q0pNRUozSnV5N0o2SW51VW9MZUlkK01JOUhyTW0zVW0yWURYV01ieTJITXAwZDVyMzJkN1RLRUd3R2Q0b2txYkJ1STlLUVdpdTFQUWZIOTlNeWJkU2JaZ05peWhVK3VVSi8weHhDSlY2R1pOdXBOc3dHdUQwTVRoMS9ybERjbS91eEJxcGVobVRicVRiTUJxdjhNU2lQN1BsRGQ3K3pFV0d1WVRicVRiTUZxM294S0J1SEtGVkRpTFZEN1prMjZrMnpHaWJpZkp4dlova2NuUVFQd05LaFBsbVRicVRiTXZKdms0d0hjSHJrNkhFOGNEUm9PWk51cE5zeThRSHJHMHdlWEp1YXNjRkRWNHpKdDFKdG1PN2N4NCtzWFRRTzhPVHZ4bmhpQTVZS2xCc3liZFNiWmpmc2o3R1A2NkR5ZEJNZURqUWdlYzJiZFNiWmpHMkE3RHdVWi9Ea3V2eWVNYUVlQVBtemJxVGJNL053T0J5Nmg0bHVTYWRnUDdqWDBQOEFNMmJkU2Jac0FHZUFzK01ZNCtkL25KYThnbUJZUXhZM0pBL3V1Yk51cE5zMXgwQi9qK1l0SkdLNjVqa2Q3b1Y5T0NNSnVQcjlObXpicVRiTmFlYkJzY1Rqc2NBYXJWMEZ1UWFMeFAxNHlDUUNsT0lETm0zVW0yYkxRWXNnSXNSaU1RbGFFY2pvZHM5bVFQdlJUd0Y3WXN5Z3d1L0hPbTNVbTJjY1lmU3hTSzBNUVdYM3pRRWg2bFFDL3dEdHppQVNXRVNuRW03dWROdXBOczZRaXoyTzZEWXhlOWVBYTZHaHFzZFJxTGpLY0dOZ0dDNVZqQU5CYmdza1IxTytmTnVwTnM5NUJoZnFLT2hoaUR3QW9CMUprVVJFZnR3aGtvNmx4T25kcjEyVHZHUDJUcndnSXlSY29FT2dFd0EwejV0MUp0eUdnOUkwVUdRYUJJOEwxWlNSVEdJZDUvNGdRUTRMZzROUmpvTlRaUDdubGY4QUZNOEo0TXpoK2pJZEFaZ0JweUUyNmsyNUUrTU13VTRyVWVqMEtMQlhNQXg0UzREOFNHeVp3ZGlKL0RvME9PcDRlcXJDQk05bklDdzVLYmZsQm5zdEpDT3FlYkNKZW1xSUlMR0J5SE96WFlKbm92Si8xQVFBSkFjbkhIZENaNVVTZTZqN1J1aXBIMXdpNWhwQUJ5VXdtWjF1cFF1QWRBNVF6S1FYdHl3Q0FCQjBLZjJOWFNiYkk3TG5nY0pCT2NqN1U0Uk9ZZVdPZ3drNWdaQ01Ta0k2cDBxV0NoOFFVZ0F3SExpSkhFUWg4ZVN3UURERTc3Zkh6TnVHUnA4YWRoTlNIRE5EWS9Ga3NnTy9HUTZCME0vaVNXUUdwbmtrT25hZmY0ZDlCTkFkOHhtbDJUN3crRGRsRTBVczl0aW5PbzdKbS9PczNUN0JNVE05a0EzS0FBSktvVlVLcUZWQ3FoVlFxb1ZVS3FGVkNxaFZRcW9WVUtxRlZDcWhWUXFvVlVLcUZWQ3FoVlFxb1ZVS2luSE4vOW9BREFNQkFBSUFBd0FBQUJEenp6UlR6enp6enp6enp6enp6enp6VHp6enp6eVJ6enp6enp6enp6enp6enp6enp3elR6enlUenp6enp6enp6enp6enp6enp6enp5anp5aHp6enp6enp6enp6enp6enp6enp6enp4end6enp6enp6enp6enp6enp6enp6enp6enl6enp6enp6enp6enp6OVBmenp6enp6enp6enpEenp6enp6enp6UW9NTU9EN0h6enp6enp6ekx6enp6enl1QUFNTTkrNHNNUE9MM3p6enp3THp6enp6eUVJV1kzenp3MjAwd1A4QTg4ODg4Qzg4ODg4OEtRODg4ODg4ODg4NkQwODg4ODhDODg4ODg4cUU4ODg4ODg4ODhyRGQ4ODg4OEM4ODg4ODhxRzg4ODg4ODg4OGdEVzg4ODg4Qzg4ODg4OGpTODg4ODg4ODg4SkdWODg4ODhDODg4ODg4cEEvODg4ODg4ODhDSDg4ODg4OEM4ODg4ODhNRDE4ODg4ODg4OEpIODg4ODg4Qzg4ODg4OG9EYjg4ODg4ODg1REQ4ODg4ODhDODg4ODg4L0NDLzhBUFBQUFB3UjkvUFBQUFBBdlBQUFBQUE9DQWZ0L1BPOEF5dlBQUFBQUEF2UFBQUFBQUERqUTQwcUF4VDNQUFBQUFBQQXZQUFBQUFBQUExmUUF3RGovQUR6enp6enp6elB6enp6enp6enp6eTJLL3dBODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODhFODhVODg4ODg4ODg4ODg4ODg4ODg4ODg4MGM4OHN3ODg4ODg4ODg4ODg4ODg4ODg4OHM4ODg4ODhjODg4ODg4ODg4ODg4ODg4ODhFODg4ODg4ODg4akJCQkJCQkJCQkJCQkIvOEFQUFBQUFAvRUFDWVJBUUFDQVFNRUFnSURBUUFBQUFBQUFBRUFFU0VRTURGQVFXRnhJS0ZSY0lHUnNmRC8yZ0FJQVFNQkFUOFEvUm8xd2xzYW5ZQjZWSEpuZjc5VEdHb3FyZGNRNUp5V0p5UytnYmw0SjV2aGtPQ1k0dVpUSWlLcDFFY01Xc1pTL251OHZ2U1FkeElMbE9BZkF1aGNaeXFkbkExNzZmWVp4ZFRKajdtZjhQVzF4L2xwOUxkRlFkYlE4ajNvYUR3YnBwUlVuazJuZ2VOQlFHNktMNGcwM0JzdlpWcnhCU2VlZ2l4YlB1amZoZjhBak9saS9IWXVORjYzcUNVeGxVY3g4OUNnV3k3MkRTbUhuZnI5d2lWaGlGcVlUQitvSTVOY0x5emx1UHhvNjdIUTVRd3h1aG9sbGlYREJtT3dORVZDVmY0empvZ0ZNRnovQUVqdEN0Y2ppZmNIbzdWYmg5Q1djc1ROY3Y2UC84UUFKaEVCQUFJQUJRUURBQU1CQUFBQUFBQUFBUUFSRUNFd01WRkJZWEdoSUVDeFlIQ0I4UC9hQUFnQkFnRUJQeEQralg2MmN3bEV1ZFpUNnV3RnpvdGVabVN1QUtESE16Sm5LcHM1UG9ER3JXZHI0WkdOc3BScVpabGZVQVdPS201Q2FoZGNkWDFpZE1VSHNNYjB2aTR0YnFiVUdkU1I5TmZ2V0p2L0FPZnVsNldIdmFydndrRi85ZGRJNXJ4Zzc4anF1L0ZEZmkwaGt2R0N0TzdxdS84QWI5aHN1enBITTk4RmF1cmNqaGlXVkVwclJvTHpMbmdmUUNtZDlIdzVyeXF1K1dGWUhYUXI4RkhKMWhWWkJNOVlLeXFEOGdWb25NRGhjamJwcjh3SU41a0hwdVovbVBjUkduSFBOam1iVHZ6Z1o2N3Y5SFAyWkJyZUJPVFBtYmtEbVp2bmNBYlZFdjhBMG0vMGtWcW1NZnJEYkxNZXJqNmpkdTlLOVJxMk95RzVrZXh4L09qV2ZuLy94QUFxRUFFQUFRSUNDUVVCQVFFQUFBQUFBQUFCRVFBaE1hRVFNRUZSWVhHQmtmRWdRTEhCOEZEUjRmL2FBQWdCQVFBQlB4RFVXUmI3akdwY0ljMVNZdm9SVzhsNXJYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4Vlc0STVNVk13NjE2azRoeVdva2hsYm4yQXFNWGNWR0lodVA5b0JZaitDZ2tKSlU4V09EY292Z1N5ZGJMZGZpMUJnUDRxQ1FralVZTTdqYVVJSkdUVXFCS3dGUTNOdHpmei9rcUhBZHB2b0JicWJ0UVhTNE1PUEgrV2srUlNCSjZ1U0g0ZnpjRndmeDlNUzJMWXF3ZnpyeTlsemw2QzVzV0gzL0FEemFURzRvUkJMam9tVXgyYzZnRGQvUXZibTV5MFhCdXY4QTBiRzMyZEZ6OVAzZjNDUERpWWU1dXZ5R2tTUU51ekE1SmZ1VUV2MkVJWGNObnQ4UjJsKzJqYTcxYy9iWTJvM2c1Y1hoUXEzWE5nNGJtZkxEU2tXeWRvTnliU2pIcXRKZTR2cHZ6OXVSTGNJcktudE1KS2lCMWFMZkd3YUw4NU9kVHFSd2VXTEhxa2dDeFlQNHN6MG9NQlByelk5RjlyTEQydFpWN0JxTllxZ281a1RFRHNGNkhFWmg4aEJ5bzVXNFd2dkJrMWNsTWtxSEl3T21xSi94d2k5em9sRkN2YkRaSHpRUkRPNXZXSXpvc3VtSDBqN0hPcXlyV1JXNkRxVGZ3T0hkS1V1eFE2UUsvYi9kRHdMeFgzVW9EdlUrc0ZZTHRQRmJjUkJjQndjWHRRVVlReU9YdDU0MHpPTEY5eFBveDFHelgzeDhWa3JIOTErMys2ZHgwblFtL0VubkpWMll6OVBFYmF6T3F5cldNVEtUd0xHUnFRUUFWYkFWZkNkZ2lPR042d2NhTWhyWVNqd1lmTGpwTGUwU2cxdkhHUlh5eEhXZVpVMkU0SW5rQ3ozMVN0ek80UUpPNVBYV1oxV1Zhd29IZjV2VURXOXBYWXBzUlBhRU9qZktuRmQrRWZqaFJBbE5sUDFYN2VzSW13TWljUnBGZWJWaTVyZG9wM1laRmw2TnM2ZVlWak4yRW5yNWtEV002ckt0WVFUZjU2UmZaQ2hSQTdxL08zNEpTUXlEQk5uV1ZGaVhBUVphNmF1TzFqTXFSbUg4S0tZZXJuM05PUXBKU3dPM1NTZmF3eTZ6T3F5cldRQ0l2ZTRhWnQwWDg2ZTBCWnVzK21MZkEvZlBXWjFXVmF5RzhidTJtYmQzN24rUGFZM1hkK2ZUTU41eWZyV1oxV1ZheTJON3B1YlJlMDdkWkdNN1dtVWJ4OEgxck02ckt0WktONitIMXBqM3Q5bC8zMmwwcGxjOU1vakhaejYxbWRWbFdzL1djSDFwZzN4N1A5dlo3S3ArdzlIR0R1ays5Wm5WWlZySWZISCsybWQ4bVgxN1B4ano5SEZydkwvZXN6cXNxMWtjVDZaWDNwanV4RHVmWHM3cVJQZEVmZm90NUdUSFdaMVdWYXkwKzJlY3RLNjhUK0p6OW54M0Y2L1JPbERDVllDakp3QWREV1oxV1ZhenlnNTltbTlrWERrSDJkeTd3WEFUNk5OaUp0dk1HdHpxc3Exa0tsek9nL0I2TGd6ZnQ4aCsvWlFCY1F1VUQ1ZE5ucGw3ajZhM09xeXJXUitTa2RVZWlWMlVyaElNZzlsRVRaZzRxL0JOTStscGJpcDhGMXVkVmxXdGUzQVRtUmxHa0c3RVRnSStWMzlrWmpJamZZWkJwbkV4NXlGZmhyYzZyS3RiQVJFejJTWGZCNjZUaHJnQ0grQ2RmWWhKUW5yMnpKU3F5M2RMUVVkOUxaTmF6cXNxMXJuWit6dmNPK25oWXJJTWxZSlFKdmJUb3lkUFlIYzFpTmdXSGVYb2FjMVlCWW9HNENOd0VHdHpxc3ExcmhRc3U5c2VqRDBwTGJ6c1JHRTAzOENCYmE5V3pqejE5eTFFYlZzSEZwRDlqVFlZQWNBZzAzVU1lMnlCMkpkdGRuVlpWcnRpMW9iRSt3bm1Pa1VFVVM0bEFaSFlYQVhaOHVldHhlejRpN2cydkNqb0VMbUw5bnhtNkFRS01BWFZvekppNXY0blFnNmE3T3F5clhCMWdBRjlrT0kxWkVwT3diQndmUWFka0ZiWEJjVGc5eW9LTkd3ZmRpR3FscU8yS2Z4WXlwUzVtSFk5dzJmUG9jcnZzTVA0SHp5MStkVmxXdkpZb0hCUGkrTzhwWU9HdWZ0L293UWdzUjJwelloQmM0N1RtZHF3c3VURGs3bmg2aDRaTFhPcGgxWDRVWTJCVFluYytIRDA3cUZybVptOTJVR2RRMEFOZm5WWlY3QzBrV0RTOENiVGgycVRSSGJ1Vy9XUHBCYlNSZEJNSHJTRFJzSE1tL1ZialFNQUpFWkUwVFlEaXZ1R0xVZmxrS052aS9BNzBxaXFyZFgwOEZCUVAweithZ3ppZUFld3pxc3E5amdxamNsU1EzbFlPRzA1TitMVFRsaFFPWStsMnhOMnNjMjFsd3JFZXdWbnVBeFpjNnhwaHZMeTRIRDB4RjRNWm9iWGdTMDRBSzVlT1J6dSt5MzNhcXdHNjNzNENjUUhaaS9UQ3BTSlhnc2NmbzdVaUJCaEVoSFVRd25FRWN4YkZObURmQWJqdHlIQ2piREFZQTRIc3drNTFXanVaOXJaUjFyZlZzSFB1VS9GTkYzMUdLNTkzMHNkdUZrY0FvcGw3aVhmQnlMOFNzRE9FUS82OGZhT0VNWXRRUUJnV3BzWGNqOW43WU1MUWhJbERHdVZHT2UydUdIS2xHWkE0UjBTT1pRYXpnYjNBNnhVTWpVRW5oRzQ0R2Z0cjNlTTl2eG9HSXhMME1rbUQ3Y1dERUJQSkMvU2pjSFpGUFlSUFdqTzNBd09BZTM0QUxIMys0YWJ6dTRjdjU5NEx1QnpxQU5KYkRITVVJZ2x4L25HUHNzT2ZwTUxhdzRPNythM0V1eU45QUFHQjZVQkRoU1IybXgzL3dBdUJoSzRHK29MdDFpK3NCR0c1M1VrNEh5L2toeExnYjZTY1JaYWtCRFV0K2ZsL3dDTzN3VGtLZ3VzcmJySjduaXcvd0NVR1lFdHp0L2hvc2NkMjJveGJOeGpRQWdJTmNna0pKVXpFT0RjcURhOFZXOWh6dDcxRmhFN3FtNHJ6dFc0QnUvMVFZQ1BhS1VBN3dwdmZOWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxVjQrYWdHUjFYb0FJQURXZi9aIi8+CjwvZGVmcz4KPC9zdmc+Cg==",this.provider=typeof window<"u"?window.trustwallet:void 0}async connect(){var n,e;try{const t=await((e=(n=this.provider)==null?void 0:n.aptos)==null?void 0:e.connect());if(!t)throw`${nl} Address Info Error`;return t}catch(t){throw t}}async account(){var n,e;const t=await((e=(n=this.provider)==null?void 0:n.aptos)==null?void 0:e.account());if(!t)throw`${nl} Account Error`;return t}async disconnect(){var n,e;try{await((e=(n=this.provider)==null?void 0:n.aptos)==null?void 0:e.disconnect())}catch(t){throw t}}async signAndSubmitTransaction(n,e){var t,r;try{const i=await((r=(t=this.provider)==null?void 0:t.aptos)==null?void 0:r.signAndSubmitTransaction(n,e));if(i.code)throw new Error(i.message);return i}catch(i){throw i.message}}async signMessage(n){var e,t;try{(typeof n!="object"||!n.nonce)&&`${nl}`;const r=await((t=(e=this.provider)==null?void 0:e.aptos)==null?void 0:t.signMessage(n));if(r)return r;throw`${nl} Sign Message failed`}catch(r){throw r.message}}async network(){var n,e;try{const t=await((e=(n=this.provider)==null?void 0:n.aptos)==null?void 0:e.network());if(!t)throw`${nl} Network Error`;return{name:t}}catch(t){throw t}}async onNetworkChange(n){var e,t;try{const r=async i=>{n({name:i.networkName,chainId:void 0,api:void 0})};await((t=(e=this.provider)==null?void 0:e.aptos)==null?void 0:t.onNetworkChange(r))}catch(r){throw r.message}}async onAccountChange(n){var e,t;try{const r=async i=>{if(i!=null&&i.publicKey)n({publicKey:i.publicKey,address:i.address});else{const s=await this.connect();n({address:s==null?void 0:s.address,publicKey:s==null?void 0:s.publicKey})}};await((t=(e=this.provider)==null?void 0:e.aptos)==null?void 0:t.onAccountChange(r))}catch(r){throw console.log(r),r.message}}};class bo extends Error{constructor(t,r){super(t);v(this,"error");this.error=r}}class qr extends bo{constructor(){super(...arguments);v(this,"name","WalletNotReadyError")}}class lg extends bo{constructor(){super(...arguments);v(this,"name","WalletConnectionError")}}class zr extends bo{constructor(){super(...arguments);v(this,"name","WalletDisconnectionError")}}class us extends bo{constructor(){super(...arguments);v(this,"name","WalletGetNetworkError")}}class ti extends bo{constructor(){super(...arguments);v(this,"name","WalletAccountChangeError")}}class ni extends bo{constructor(){super(...arguments);v(this,"name","WalletNetworkChangeError")}}class Te extends bo{constructor(){super(...arguments);v(this,"name","WalletNotConnectedError")}}class un extends bo{constructor(){super(...arguments);v(this,"name","WalletSignMessageError")}}class mi extends bo{constructor(){super(...arguments);v(this,"name","WalletSignAndSubmitMessageError")}}class or extends bo{constructor(){super(...arguments);v(this,"name","WalletSignTransactionError")}}var h0={},lM={get exports(){return h0},set exports(n){h0=n}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||c,h),m=t?t+l:l;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],f]:c._events[m].push(f):(c._events[m]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},a.prototype.listenerCount=function(l){var u=t?t+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,m){var w=t?t+l:l;if(!this._events[w])return!1;var y=this._events[w],C=arguments.length,A,M;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),C){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,m),!0}for(M=1,A=new Array(C-1);M<C;M++)A[M-1]=arguments[M];y.fn.apply(y.context,A)}else{var H=y.length,G;for(M=0;M<H;M++)switch(y[M].once&&this.removeListener(l,y[M].fn,void 0,!0),C){case 1:y[M].fn.call(y[M].context);break;case 2:y[M].fn.call(y[M].context,u);break;case 3:y[M].fn.call(y[M].context,u,d);break;case 4:y[M].fn.call(y[M].context,u,d,h);break;default:if(!A)for(G=1,A=new Array(C-1);G<C;G++)A[G-1]=arguments[G];y[M].fn.apply(y[M].context,A)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=t?t+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var w=0,y=[],C=m.length;w<C;w++)(m[w].fn!==u||h&&!m[w].once||d&&m[w].context!==d)&&y.push(m[w]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(lM);var ve=(n=>(n.Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported",n))(ve||{}),rp=(n=>(n.Mainnet="mainnet",n.Testnet="testnet",n.Devnet="devnet",n))(rp||{});class Wr extends h0{get connected(){return!!this.publicAccount.publicKey}}function ri(n){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(n())for(const s of e)s()}const r=setInterval(t,1e3);e.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}const uM="Petra";class dM extends Wr{constructor({timeout:t=1e4}={}){super();v(this,"name",uM);v(this,"url","https://chrome.google.com/webstore/detail/petra-aptos-wallet/ejjladinnckdgjemekebdpeokbikhfci");v(this,"icon","https://raw.githubusercontent.com/hippospace/aptos-wallet-adapter/main/logos/petra.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.aptos:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>window.aptos?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const t=this._provider||window.aptos,r=await(t==null?void 0:t.connect());this._wallet={address:r==null?void 0:r.address,publicKey:r==null?void 0:r.publicKey,isConnected:!0};try{const i=await(t==null?void 0:t.network()),s=null,o=null;this._network=i,this._chainId=s,this._api=o}catch(i){const s=i.message;throw this.emit("error",new us(s)),i}this.emit("connect",this._wallet.publicKey)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet,r=this._provider||window.aptos;if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(i){this.emit("error",new zr(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(t,r){try{const i=this._wallet,s=this._provider||window.aptos;if(!i||!s)throw new Te;const o=await s.signTransaction(t,r);if(o.code)throw new Error(o.message);return o}catch(i){const s=i.message;throw this.emit("error",new or(s)),i}}async signAndSubmitTransaction(t,r){try{const i=this._wallet,s=this._provider||window.aptos;if(!i||!s)throw new Te;const o=await s.signAndSubmitTransaction(t,r);if(o.code)throw new Error(o.message);return o}catch(i){const s=i.message;throw this.emit("error",new mi(s)),i}}async signMessage(t){try{const r=this._wallet,i=this._provider||window.aptos;if(!r||!i)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const s=await(i==null?void 0:i.signMessage(t));if(s)return s;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider||window.aptos;if(!t||!r)throw new Te;const i=async s=>{var o,a,c,l,u,d;if(s!=null&&s.publicKey)this._wallet={...this._wallet,publicKey:s.publicKey||((o=this._wallet)==null?void 0:o.publicKey),authKey:s.authKey||((a=this._wallet)==null?void 0:a.authKey),address:s.address||((c=this._wallet)==null?void 0:c.address)};else{const h=await(r==null?void 0:r.connect());this._wallet={...this._wallet,authKey:(h==null?void 0:h.authKey)||((l=this._wallet)==null?void 0:l.authKey),address:(h==null?void 0:h.address)||((u=this._wallet)==null?void 0:u.address),publicKey:(h==null?void 0:h.publicKey)||((d=this._wallet)==null?void 0:d.publicKey)}}this.emit("accountChange",s.publicKey)};await(r==null?void 0:r.onAccountChange(i))}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider||window.aptos;if(!t||!r)throw new Te;const i=async s=>{this._network=s.networkName,this.emit("networkChange",this._network)};await(r==null?void 0:r.onNetworkChange(i))}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}const hM="Martian";class fM extends Wr{constructor({timeout:t=1e4}={}){super();v(this,"name",hM);v(this,"url","https://chrome.google.com/webstore/detail/martian-wallet/efbglgofoippbgcjepnhiblaibcnclgk");v(this,"icon","https://raw.githubusercontent.com/hippospace/aptos-wallet-adapter/main/logos/martian.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.martian:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>window.martian?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||window.martian;if(await(r==null?void 0:r.isConnected())&&await(r==null?void 0:r.disconnect()),!await(r==null?void 0:r.connect()))throw new Te("No connect response");const o=await(r==null?void 0:r.account());if(o){this._wallet={...o,isConnected:!0};try{const a=await(r==null?void 0:r.network()),{chainId:c}=await(r==null?void 0:r.getChainId())||{chainId:""},l=null;this._network=a,this._chainId=c.toString(),this._api=l}catch(a){const c=a.message;throw this.emit("error",new us(c)),a}}this.emit("connect",((t=this._wallet)==null?void 0:t.address)||"")}catch(r){throw this.emit("error",new Error(r)),r}finally{this._connecting=!1}}async disconnect(){const t=this._wallet,r=this._provider||window.martian;if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(i){this.emit("error",new zr(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(t,r){try{const i=this._wallet,s=this._provider||window.martian;if(!i||!s)throw new Te;const o=await s.generateTransaction(i.address||"",t,r);if(!o)throw new Error("Cannot generate transaction");const a=await(s==null?void 0:s.signTransaction(o));if(!a)throw new Error("No response");return a}catch(i){throw this.emit("error",new or(i)),i}}async signAndSubmitTransaction(t,r){try{const i=this._wallet,s=this._provider||window.martian;if(!i||!s)throw new Te;const o=await s.generateTransaction(i.address||"",t,r);if(!o)throw new Error("Cannot generate transaction");const a=await(s==null?void 0:s.signAndSubmitTransaction(o));if(!a)throw new Error("No response");return{hash:a}}catch(i){throw this.emit("error",new mi(i)),i}}async signMessage(t){try{const r=this._wallet,i=this._provider||window.martian;if(!r||!i)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const s=await(i==null?void 0:i.signMessage(t));if(s)return s;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider||window.martian;if(!t||!r)throw new Te;const i=async s=>{const{publicKey:o}=await(r==null?void 0:r.account());this._wallet={...this._wallet,address:s,publicKey:o},this.emit("accountChange",s)};await(r==null?void 0:r.onAccountChange(i))}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider||window.martian;if(!t||!r)throw new Te;const i=async s=>{this._network=s,this.emit("networkChange",this._network)};await(r==null?void 0:r.onNetworkChange(i))}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}var Fa={};const pM=Tw($4);var Zv={},hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.toDecimal=hu.toHuman=void 0;const mM=(n,e,t=3,r=",")=>{if(n.length<e)return n.length+t<e?"0":`0${r}${n.slice(0,Math.min(t,e))}`;{const i=n.length-e,s=`${n.slice(i,Math.min(t,e))}`;return s!==""?`${n.slice(0,i)}${r}${s}`:`${n.slice(0,i)}`}};hu.toHuman=mM;const gM=(n,e,t=".")=>{var r=n.split(t);if(r.length!==2)throw new Error("Invalid number");const i=r[0]==="0"?"":r[0],s=r[1].length<=e?`${r[1]}${"0".repeat(e-r[1].length)}`:`${r[1].slice(0,e)}`;return i+s};hu.toDecimal=gM;var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0});Xp.isUrl=void 0;const wM=n=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(n);Xp.isUrl=wM;(function(n){var e=Bt&&Bt.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),t=Bt&&Bt.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(n,"__esModule",{value:!0}),t(hu,n),t(Xp,n)})(Zv);var Lw={};Object.defineProperty(Lw,"__esModule",{value:!0});class yM{constructor(e){v(this,"provider");return this.provider=e,this}}Lw.default=yM;var La={},qd={};Object.defineProperty(qd,"__esModule",{value:!0});qd.createReponse=void 0;const bM=(n,e,t)=>({method:n,status:e,data:t});qd.createReponse=bM;Object.defineProperty(La,"__esModule",{value:!0});La.MartianMask=La.MartianMaskToken=La.MartianMaskSDK=void 0;const ln=qd;class Qv{constructor(e){v(this,"provider");this.provider=e}async getAccountResources(e,t){const r=await this.provider.getAccountResources(e);return(0,ln.createReponse)("getAccountResources",200,r)}async getAccount(e){const t=await this.provider.getAccount(e);return(0,ln.createReponse)("getAccount",200,t)}async getTransactions(e){let t=null;return e?t=await this.provider.getTransactions(e):t=await this.provider.getTransactions(),(0,ln.createReponse)("getTransactions",200,t)}async getAccountTransactions(e,t){const r=await this.provider.getAccountTransactions(e);return(0,ln.createReponse)("getAccountTransactions",200,r)}async getTransactionByHash(e){const t=await this.provider.getTransaction(e);return(0,ln.createReponse)("getTransactionByHash",200,t)}async getChainId(){const e=await this.provider.getChainId();return(0,ln.createReponse)("getChainId",200,e)}}La.MartianMaskSDK=Qv;class Hv{constructor(e){v(this,"provider");this.provider=e}async createCollection(e,t,r,i){const s=await this.provider.createCollection(e,t,r);return(0,ln.createReponse)("createCollection",200,s)}async createToken(e,t,r,i,s,o,a,c,l,u,d,h){const f=await this.provider.createToken(e,t,r,i,s,1);return(0,ln.createReponse)("createToken",200,f)}}La.MartianMaskToken=Hv;class _M{constructor(e){v(this,"provider");v(this,"user");v(this,"sdk");v(this,"token");this.provider=e,this.sdk=new Qv(e),this.token=new Hv(e)}setUser(e){this.user=e}async reConnect(){const e=await this.provider.connect();if(e){const t={address:e.address,publicKey:e.publicKey};this.setUser(t)}}async connect(){const e=await this.provider.connect();if(e){const t={address:e.address,publicKey:e.publicKey};this.setUser(t)}return(0,ln.createReponse)("connect",200,e)}async disconnect(){const e=await this.provider.disconnect();return this.setUser(null),(0,ln.createReponse)("disconnect",200,e)}async isConnected(){return this.user.address&&this.user.publicKey?(0,ln.createReponse)("isConnected",200,!0):(0,ln.createReponse)("isConnected",200,!1)}async account(){return this.user||await this.reConnect(),(0,ln.createReponse)("account",200,this.user)}async getNetwork(){const e=await this.provider.network();return console.log("7s62::getNetwork:",e),(0,ln.createReponse)("getNetwork",200,e)}async getNetworkURL(){const e=await this.provider.network();return console.log("7s62::getNetworkURL:",e),(0,ln.createReponse)("getNetworkURL",200,e)}async getBalance(){console.log("7s62::getBalance");const e=await this.provider.legacy.getAccountBalance();return console.log("7s62::getBalance:",e),(0,ln.createReponse)("getAccountBalance",200,e)}async generateTransaction(e,t){console.log("7s62::generateTransaction"),this.user||await this.reConnect();const r=await this.provider.generateTransaction(this.user.address,e);return(0,ln.createReponse)("generateTransaction",200,r)}async signTransaction(e){const t=await this.provider.signTransaction(e);return(0,ln.createReponse)("signTransaction",200,t)}async submitTransaction(e){const t=await this.provider.submitTransaction(e);return(0,ln.createReponse)("submitTransaction",200,t)}async generateSignSubmitTransaction(e,t){console.log("7s62::generateSignSubmitTransaction"),this.user||await this.reConnect();const r=await this.provider.generateTransaction(this.user.address,e),i=await this.provider.signTransaction(r),s=await this.provider.submitTransaction(i);return(0,ln.createReponse)("generateSignSubmitTransaction",200,s)}async signAndSubmitTransaction(e){const t=await this.provider.signAndSubmitTransaction(e);return(0,ln.createReponse)("signAndSubmit",200,t)}async signMessage(e){const t=await this.provider.signMessage(e);return(0,ln.createReponse)("signMessage",200,t)}async createCollection(e,t,r,i){const s=await this.provider.createCollection(e,t,r,i);return(0,ln.createReponse)("createCollection",200,s)}async createToken(e,t,r,i,s,o,a,c,l,u,d,h){const f=await this.provider.createToken(e,t,r,i,s,o,a,c,l,u,d,h);return(0,ln.createReponse)("createToken",200,f)}async getTransactionByHash(e){const t=await this.provider.getTransaction(e);return(0,ln.createReponse)("getTransactionByHash",200,t)}async getLedgerInfo(){const e=await this.provider.getLedgerInfo();return(0,ln.createReponse)("getLedgerInfo",200,e)}}La.MartianMask=_M;var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.PetraMask=void 0;const ps=qd;class vM{constructor(e){v(this,"provider");this.provider=e}async connect(){if(await this.provider.connect()){const t=await this.provider.account();return(0,ps.createReponse)("connect",200,t)}return(0,ps.createReponse)("connect",400,null)}async account(){if(await this.provider.isConnected()){const t=await this.provider.account();return(0,ps.createReponse)("isConnected",200,t)}return(0,ps.createReponse)("isConnected",400,null)}async isConnected(){const e=await this.provider.isConnected();return(0,ps.createReponse)("isConnected",200,e)}async disconnect(){return await this.provider.disconnect()?(0,ps.createReponse)("disconnect",200,!0):(0,ps.createReponse)("disconnect",400,!1)}async getNetwork(){const e=await this.provider.network();return(0,ps.createReponse)("network",200,e)}async signAndSubmitTransaction(e){const t=await this.provider.signAndSubmitTransaction(e);return(0,ps.createReponse)("signAndSubmitTransaction",200,t)}async signTransaction(e){const t=await this.provider.signTransaction(e);return(0,ps.createReponse)("signTransaction",200,t)}async signMessage(e){const t=await this.provider.signMessage(e);return(0,ps.createReponse)("signMessage",200,t)}}Jp.PetraMask=vM;var kM=Bt&&Bt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),SM=Bt&&Bt.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Gv=Bt&&Bt.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&kM(e,n,t);return SM(e,n),e},CM=Bt&&Bt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.Web3Provider=Fa.utils=Fa.Aptos=void 0;const AM=Gv(pM);Fa.Aptos=AM;const TM=Gv(Zv);Fa.utils=TM;const Hu=CM(Lw);Fa.Web3Provider=Hu.default;const IM=La,xM=Jp;class EM{constructor(e){v(this,"action");return e?e.isFewcha?this.action=new Hu.default(e).provider:e._isConnected!==void 0?this.action=new IM.MartianMask(e):this.action=new xM.PetraMask(e):(this.action=new Hu.default(window.fewcha).provider,window.addEventListener("fewcha#initialized",()=>{this.action=new Hu.default(window.fewcha).provider}),window.addEventListener("martian#initialized",()=>{this.action=new Hu.default(window.martian).provider})),this}setProvider(e){return this.action=e.provider,this}}var MM=Fa.default=EM;const OM="Fewcha";class NM extends Wr{constructor({timeout:t=1e4}={}){super();v(this,"name",OM);v(this,"url","https://fewcha.app/");v(this,"icon","https://miro.medium.com/fit/c/176/176/1*a0WaY-q7gjCRiuryRG6TkQ.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._network=void 0,this._provider=typeof window<"u"?new MM().action:void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>{var r;return(r=window==null?void 0:window.fewcha)!=null&&r.aptos?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.connected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||((t=window==null?void 0:window.fewcha)==null?void 0:t.aptos),i=await r.isConnected();(i==null?void 0:i.data)===!0&&await r.disconnect();const s=await r.connect();if(s.status===401)throw new lg("User has rejected the connection");if(s.status!==200)throw new lg("Wallet connect issue");let o={...s.data};if(!o.publicKey){const a=await r.account();if(!a.data.publicKey)throw new lg("Wallet connect issue",s.data);o={...a.data}}this._wallet={connected:!0,...o};try{const{data:a}=await(r==null?void 0:r.getNetwork()),c=null,l=null;this._network=a,this._chainId=c,this._api=l}catch(a){const c=a.message;throw this.emit("error",new us(c)),a}this.emit("connect",this._wallet.publicKey)}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){var r;const t=this._provider||((r=window==null?void 0:window.fewcha)==null?void 0:r.aptos);if(t)try{if((await t.disconnect()).data===!0)this._provider=void 0,this._wallet=null;else throw new Error("Disconnect failed")}catch(i){throw this.emit("error",new zr(i==null?void 0:i.message,i)),i}this.emit("disconnect")}async signTransaction(t,r){var i;try{if(!this._wallet)throw new Te;const o=this._provider||((i=window==null?void 0:window.fewcha)==null?void 0:i.aptos),a=await o.generateTransaction(t,r);if(!a)throw new Error("Cannot generate transaction");const c=await(o==null?void 0:o.signTransaction(a.data));if(!c||c.status!==200)throw new Error("No response");return c.data}catch(s){const o=s instanceof Error?s.message:s.response.data.message;throw this.emit("error",new or(o)),s}}async signAndSubmitTransaction(t,r){var i;try{if(!this._wallet)throw new Te;const o=this._provider||((i=window==null?void 0:window.fewcha)==null?void 0:i.aptos),a=await o.generateTransaction(t,r);if(!a)throw new Error("Cannot generate transaction");const c=await(o==null?void 0:o.signAndSubmitTransaction(a.data));if(c.status===401)throw new Error("User has rejected the transaction");if(c.status!==200)throw new Error("Transaction issue");return{hash:c.data}}catch(s){const o=s instanceof Error?s.message:s.response.data.message;throw this.emit("error",new mi(o)),s}}async signMessage(t){var r;try{const i=this._wallet,s=this._provider||((r=window==null?void 0:window.fewcha)==null?void 0:r.aptos);if(!i||!s)throw new Te;const o=await(s==null?void 0:s.signMessage(t));if(o)return o.data;throw new Error("Sign Message failed")}catch(i){const s=i.message;throw this.emit("error",new un(s)),i}}async onAccountChange(){var t;try{const r=this._wallet,i=this._provider||((t=window==null?void 0:window.fewcha)==null?void 0:t.aptos);if(!r||!i)throw new Te}catch(r){const i=r.message;throw this.emit("error",new ti(i)),r}}async onNetworkChange(){var t;try{const r=this._wallet,i=this._provider||((t=window==null?void 0:window.fewcha)==null?void 0:t.aptos);if(!r||!i)throw new Te}catch(r){const i=r.message;throw this.emit("error",new ni(i)),r}}}const jM="Pontem";class DM extends Wr{constructor({timeout:t=1e4}={}){super();v(this,"name",jM);v(this,"url","https://chrome.google.com/webstore/detail/pontem-wallet/phkbamefinggmakgklpkljjmgibohnba");v(this,"icon","https://www.gitbook.com/cdn-cgi/image/width=20,height=20,fit=contain,dpr=2,format=auto/https%3A%2F%2F736486047-files.gitbook.io%2F~%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-MVVJKmKQGx983dZy_jr%252Favatar-1619180126965.png%3Fgeneration%3D1619180127194239%26alt%3Dmedia");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.pontem:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>window.pontem?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||window.pontem;await(r==null?void 0:r.isConnected())&&await(r==null?void 0:r.disconnect());const s=await(r==null?void 0:r.connect());if(!s)throw new Te("No connect response");const o=s.address,a=s.publicKey;if(o){this._wallet={address:o,publicKey:a,isConnected:!0};try{const c=await(r==null?void 0:r.network());this._network=c.name,this._chainId=c.chainId,this._api=c.api}catch(c){const l=c.message;throw this.emit("error",new us(l)),c}}this.emit("connect",((t=this._wallet)==null?void 0:t.address)||"")}catch(r){throw this.emit("error",new Error("User has rejected the connection")),r}finally{this._connecting=!1}}async disconnect(){const t=this._wallet,r=this._provider||window.pontem;if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(i){this.emit("error",new zr(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(t,r){try{const i=this._wallet,s=this._provider||window.pontem;if(!i||!s)throw new Te;return await(s==null?void 0:s.signTransaction(t,r))}catch(i){throw this.emit("error",new or(i)),i}}async signAndSubmitTransaction(t,r){try{const i=this._wallet,s=this._provider||window.pontem;if(!i||!s)throw new Te;const o=await(s==null?void 0:s.signAndSubmit(t,r));if(!o||!o.success)throw new Error("No response");return{hash:o.result.hash}}catch(i){throw this.emit("error",new mi(i.message)),i}}async signMessage(t){try{const r=this._wallet,i=this._provider||window.pontem;if(!r||!i)throw new Te;const s=await(i==null?void 0:i.signMessage(t));if(s.success)return s.result;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider||window.pontem;if(!t||!r)throw new Te;const i=async s=>{if(s===void 0){this.connected&&await(r==null?void 0:r.disconnect());return}const o=await(r==null?void 0:r.publicKey());this._wallet={...this._wallet,address:s,publicKey:o},this.emit("accountChange",s)};await(r==null?void 0:r.onAccountChange(i))}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider||window.pontem;if(!t||!r)throw new Te;const i=s=>{this._network=s.name,this._api=s.api,this._chainId=s.chainId,this._network&&this.emit("networkChange",this._network)};await(r==null?void 0:r.onNetworkChange(i))}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}var Ob={},BM={get exports(){return Ob},set exports(n){Ob=n}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=Bt:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,c=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],h=[1,256,65536,16777216],f=[6,1536,393216,100663296],m=[0,8,16,24],w=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],C=[128,256],A=["hex","buffer","arrayBuffer","array","digest"],M={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(I){return Object.prototype.toString.call(I)==="[object Array]"}),c&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(I){return typeof I=="object"&&I.buffer&&I.buffer.constructor===ArrayBuffer});for(var H=function(I,z,ie){return function(le){return new P(I,z,I).update(le)[ie]()}},G=function(I,z,ie){return function(le,he){return new P(I,z,he).update(le)[ie]()}},q=function(I,z,ie){return function(le,he,_e,Ce){return x["cshake"+I].update(le,he,_e,Ce)[ie]()}},X=function(I,z,ie){return function(le,he,_e,Ce){return x["kmac"+I].update(le,he,_e,Ce)[ie]()}},E=function(I,z,ie,le){for(var he=0;he<A.length;++he){var _e=A[he];I[_e]=z(ie,le,_e)}return I},j=function(I,z){var ie=H(I,z,"hex");return ie.create=function(){return new P(I,z,I)},ie.update=function(le){return ie.create().update(le)},E(ie,H,I,z)},R=function(I,z){var ie=G(I,z,"hex");return ie.create=function(le){return new P(I,z,le)},ie.update=function(le,he){return ie.create(he).update(le)},E(ie,G,I,z)},V=function(I,z){var ie=M[I],le=q(I,z,"hex");return le.create=function(he,_e,Ce){return!_e&&!Ce?x["shake"+I].create(he):new P(I,z,he).bytepad([_e,Ce],ie)},le.update=function(he,_e,Ce,ge){return le.create(_e,Ce,ge).update(he)},E(le,q,I,z)},U=function(I,z){var ie=M[I],le=X(I,z,"hex");return le.create=function(he,_e,Ce){return new _(I,z,_e).bytepad(["KMAC",Ce],ie).bytepad([he],ie)},le.update=function(he,_e,Ce,ge){return le.create(he,Ce,ge).update(_e)},E(le,X,I,z)},Y=[{name:"keccak",padding:h,bits:y,createMethod:j},{name:"sha3",padding:f,bits:y,createMethod:j},{name:"shake",padding:u,bits:C,createMethod:R},{name:"cshake",padding:d,bits:C,createMethod:V},{name:"kmac",padding:d,bits:C,createMethod:U}],x={},p=[],g=0;g<Y.length;++g)for(var k=Y[g],T=k.bits,O=0;O<T.length;++O){var L=k.name+"_"+T[O];if(p.push(L),x[L]=k.createMethod(T[O],k.padding),k.name!=="sha3"){var W=k.name+T[O];p.push(W),x[W]=x[L]}}function P(I,z,ie){this.blocks=[],this.s=[],this.padding=z,this.outputBits=ie,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(I<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ie>>5,this.extraBytes=(ie&31)>>3;for(var le=0;le<50;++le)this.s[le]=0}P.prototype.update=function(I){if(this.finalized)throw new Error(t);var z,ie=typeof I;if(ie!=="string"){if(ie==="object"){if(I===null)throw new Error(e);if(c&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!c||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);z=!0}for(var le=this.blocks,he=this.byteCount,_e=I.length,Ce=this.blockCount,ge=0,Oe=this.s,Ie,Ne;ge<_e;){if(this.reset)for(this.reset=!1,le[0]=this.block,Ie=1;Ie<Ce+1;++Ie)le[Ie]=0;if(z)for(Ie=this.start;ge<_e&&Ie<he;++ge)le[Ie>>2]|=I[ge]<<m[Ie++&3];else for(Ie=this.start;ge<_e&&Ie<he;++ge)Ne=I.charCodeAt(ge),Ne<128?le[Ie>>2]|=Ne<<m[Ie++&3]:Ne<2048?(le[Ie>>2]|=(192|Ne>>6)<<m[Ie++&3],le[Ie>>2]|=(128|Ne&63)<<m[Ie++&3]):Ne<55296||Ne>=57344?(le[Ie>>2]|=(224|Ne>>12)<<m[Ie++&3],le[Ie>>2]|=(128|Ne>>6&63)<<m[Ie++&3],le[Ie>>2]|=(128|Ne&63)<<m[Ie++&3]):(Ne=65536+((Ne&1023)<<10|I.charCodeAt(++ge)&1023),le[Ie>>2]|=(240|Ne>>18)<<m[Ie++&3],le[Ie>>2]|=(128|Ne>>12&63)<<m[Ie++&3],le[Ie>>2]|=(128|Ne>>6&63)<<m[Ie++&3],le[Ie>>2]|=(128|Ne&63)<<m[Ie++&3]);if(this.lastByteIndex=Ie,Ie>=he){for(this.start=Ie-he,this.block=le[Ce],Ie=0;Ie<Ce;++Ie)Oe[Ie]^=le[Ie];F(Oe),this.reset=!0}else this.start=Ie}return this},P.prototype.encode=function(I,z){var ie=I&255,le=1,he=[ie];for(I=I>>8,ie=I&255;ie>0;)he.unshift(ie),I=I>>8,ie=I&255,++le;return z?he.push(le):he.unshift(le),this.update(he),he.length},P.prototype.encodeString=function(I){var z,ie=typeof I;if(ie!=="string"){if(ie==="object"){if(I===null)throw new Error(e);if(c&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!c||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);z=!0}var le=0,he=I.length;if(z)le=he;else for(var _e=0;_e<I.length;++_e){var Ce=I.charCodeAt(_e);Ce<128?le+=1:Ce<2048?le+=2:Ce<55296||Ce>=57344?le+=3:(Ce=65536+((Ce&1023)<<10|I.charCodeAt(++_e)&1023),le+=4)}return le+=this.encode(le*8),this.update(I),le},P.prototype.bytepad=function(I,z){for(var ie=this.encode(z),le=0;le<I.length;++le)ie+=this.encodeString(I[le]);var he=z-ie%z,_e=[];return _e.length=he,this.update(_e),this},P.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var I=this.blocks,z=this.lastByteIndex,ie=this.blockCount,le=this.s;if(I[z>>2]|=this.padding[z&3],this.lastByteIndex===this.byteCount)for(I[0]=I[ie],z=1;z<ie+1;++z)I[z]=0;for(I[ie-1]|=2147483648,z=0;z<ie;++z)le[z]^=I[z];F(le)}},P.prototype.toString=P.prototype.hex=function(){this.finalize();for(var I=this.blockCount,z=this.s,ie=this.outputBlocks,le=this.extraBytes,he=0,_e=0,Ce="",ge;_e<ie;){for(he=0;he<I&&_e<ie;++he,++_e)ge=z[he],Ce+=l[ge>>4&15]+l[ge&15]+l[ge>>12&15]+l[ge>>8&15]+l[ge>>20&15]+l[ge>>16&15]+l[ge>>28&15]+l[ge>>24&15];_e%I===0&&(F(z),he=0)}return le&&(ge=z[he],Ce+=l[ge>>4&15]+l[ge&15],le>1&&(Ce+=l[ge>>12&15]+l[ge>>8&15]),le>2&&(Ce+=l[ge>>20&15]+l[ge>>16&15])),Ce},P.prototype.arrayBuffer=function(){this.finalize();var I=this.blockCount,z=this.s,ie=this.outputBlocks,le=this.extraBytes,he=0,_e=0,Ce=this.outputBits>>3,ge;le?ge=new ArrayBuffer(ie+1<<2):ge=new ArrayBuffer(Ce);for(var Oe=new Uint32Array(ge);_e<ie;){for(he=0;he<I&&_e<ie;++he,++_e)Oe[_e]=z[he];_e%I===0&&F(z)}return le&&(Oe[he]=z[he],ge=ge.slice(0,Ce)),ge},P.prototype.buffer=P.prototype.arrayBuffer,P.prototype.digest=P.prototype.array=function(){this.finalize();for(var I=this.blockCount,z=this.s,ie=this.outputBlocks,le=this.extraBytes,he=0,_e=0,Ce=[],ge,Oe;_e<ie;){for(he=0;he<I&&_e<ie;++he,++_e)ge=_e<<2,Oe=z[he],Ce[ge]=Oe&255,Ce[ge+1]=Oe>>8&255,Ce[ge+2]=Oe>>16&255,Ce[ge+3]=Oe>>24&255;_e%I===0&&F(z)}return le&&(ge=_e<<2,Oe=z[he],Ce[ge]=Oe&255,le>1&&(Ce[ge+1]=Oe>>8&255),le>2&&(Ce[ge+2]=Oe>>16&255)),Ce};function _(I,z,ie){P.call(this,I,z,ie)}_.prototype=new P,_.prototype.finalize=function(){return this.encode(this.outputBits,!0),P.prototype.finalize.call(this)};var F=function(I){var z,ie,le,he,_e,Ce,ge,Oe,Ie,Ne,Ut,Mr,Ft,Ot,Or,Ct,pt,br,Nt,yt,Kr,D,b,S,$,te,se,ce,Pe,jt,Xe,tt,St,Gt,Yt,Ws,Xt,Jt,Ks,en,tn,Zs,nn,fn,Xa,pn,mn,Ja,gn,wn,ec,yn,bn,tc,_n,vn,nc,kn,Sn,Jo,ea,ta,na;for(le=0;le<48;le+=2)he=I[0]^I[10]^I[20]^I[30]^I[40],_e=I[1]^I[11]^I[21]^I[31]^I[41],Ce=I[2]^I[12]^I[22]^I[32]^I[42],ge=I[3]^I[13]^I[23]^I[33]^I[43],Oe=I[4]^I[14]^I[24]^I[34]^I[44],Ie=I[5]^I[15]^I[25]^I[35]^I[45],Ne=I[6]^I[16]^I[26]^I[36]^I[46],Ut=I[7]^I[17]^I[27]^I[37]^I[47],Mr=I[8]^I[18]^I[28]^I[38]^I[48],Ft=I[9]^I[19]^I[29]^I[39]^I[49],z=Mr^(Ce<<1|ge>>>31),ie=Ft^(ge<<1|Ce>>>31),I[0]^=z,I[1]^=ie,I[10]^=z,I[11]^=ie,I[20]^=z,I[21]^=ie,I[30]^=z,I[31]^=ie,I[40]^=z,I[41]^=ie,z=he^(Oe<<1|Ie>>>31),ie=_e^(Ie<<1|Oe>>>31),I[2]^=z,I[3]^=ie,I[12]^=z,I[13]^=ie,I[22]^=z,I[23]^=ie,I[32]^=z,I[33]^=ie,I[42]^=z,I[43]^=ie,z=Ce^(Ne<<1|Ut>>>31),ie=ge^(Ut<<1|Ne>>>31),I[4]^=z,I[5]^=ie,I[14]^=z,I[15]^=ie,I[24]^=z,I[25]^=ie,I[34]^=z,I[35]^=ie,I[44]^=z,I[45]^=ie,z=Oe^(Mr<<1|Ft>>>31),ie=Ie^(Ft<<1|Mr>>>31),I[6]^=z,I[7]^=ie,I[16]^=z,I[17]^=ie,I[26]^=z,I[27]^=ie,I[36]^=z,I[37]^=ie,I[46]^=z,I[47]^=ie,z=Ne^(he<<1|_e>>>31),ie=Ut^(_e<<1|he>>>31),I[8]^=z,I[9]^=ie,I[18]^=z,I[19]^=ie,I[28]^=z,I[29]^=ie,I[38]^=z,I[39]^=ie,I[48]^=z,I[49]^=ie,Ot=I[0],Or=I[1],pn=I[11]<<4|I[10]>>>28,mn=I[10]<<4|I[11]>>>28,ce=I[20]<<3|I[21]>>>29,Pe=I[21]<<3|I[20]>>>29,Jo=I[31]<<9|I[30]>>>23,ea=I[30]<<9|I[31]>>>23,Zs=I[40]<<18|I[41]>>>14,nn=I[41]<<18|I[40]>>>14,Gt=I[2]<<1|I[3]>>>31,Yt=I[3]<<1|I[2]>>>31,Ct=I[13]<<12|I[12]>>>20,pt=I[12]<<12|I[13]>>>20,Ja=I[22]<<10|I[23]>>>22,gn=I[23]<<10|I[22]>>>22,jt=I[33]<<13|I[32]>>>19,Xe=I[32]<<13|I[33]>>>19,ta=I[42]<<2|I[43]>>>30,na=I[43]<<2|I[42]>>>30,tc=I[5]<<30|I[4]>>>2,_n=I[4]<<30|I[5]>>>2,Ws=I[14]<<6|I[15]>>>26,Xt=I[15]<<6|I[14]>>>26,br=I[25]<<11|I[24]>>>21,Nt=I[24]<<11|I[25]>>>21,wn=I[34]<<15|I[35]>>>17,ec=I[35]<<15|I[34]>>>17,tt=I[45]<<29|I[44]>>>3,St=I[44]<<29|I[45]>>>3,S=I[6]<<28|I[7]>>>4,$=I[7]<<28|I[6]>>>4,vn=I[17]<<23|I[16]>>>9,nc=I[16]<<23|I[17]>>>9,Jt=I[26]<<25|I[27]>>>7,Ks=I[27]<<25|I[26]>>>7,yt=I[36]<<21|I[37]>>>11,Kr=I[37]<<21|I[36]>>>11,yn=I[47]<<24|I[46]>>>8,bn=I[46]<<24|I[47]>>>8,fn=I[8]<<27|I[9]>>>5,Xa=I[9]<<27|I[8]>>>5,te=I[18]<<20|I[19]>>>12,se=I[19]<<20|I[18]>>>12,kn=I[29]<<7|I[28]>>>25,Sn=I[28]<<7|I[29]>>>25,en=I[38]<<8|I[39]>>>24,tn=I[39]<<8|I[38]>>>24,D=I[48]<<14|I[49]>>>18,b=I[49]<<14|I[48]>>>18,I[0]=Ot^~Ct&br,I[1]=Or^~pt&Nt,I[10]=S^~te&ce,I[11]=$^~se&Pe,I[20]=Gt^~Ws&Jt,I[21]=Yt^~Xt&Ks,I[30]=fn^~pn&Ja,I[31]=Xa^~mn&gn,I[40]=tc^~vn&kn,I[41]=_n^~nc&Sn,I[2]=Ct^~br&yt,I[3]=pt^~Nt&Kr,I[12]=te^~ce&jt,I[13]=se^~Pe&Xe,I[22]=Ws^~Jt&en,I[23]=Xt^~Ks&tn,I[32]=pn^~Ja&wn,I[33]=mn^~gn&ec,I[42]=vn^~kn&Jo,I[43]=nc^~Sn&ea,I[4]=br^~yt&D,I[5]=Nt^~Kr&b,I[14]=ce^~jt&tt,I[15]=Pe^~Xe&St,I[24]=Jt^~en&Zs,I[25]=Ks^~tn&nn,I[34]=Ja^~wn&yn,I[35]=gn^~ec&bn,I[44]=kn^~Jo&ta,I[45]=Sn^~ea&na,I[6]=yt^~D&Ot,I[7]=Kr^~b&Or,I[16]=jt^~tt&S,I[17]=Xe^~St&$,I[26]=en^~Zs&Gt,I[27]=tn^~nn&Yt,I[36]=wn^~yn&fn,I[37]=ec^~bn&Xa,I[46]=Jo^~ta&tc,I[47]=ea^~na&_n,I[8]=D^~Ot&Ct,I[9]=b^~Or&pt,I[18]=tt^~S&te,I[19]=St^~$&se,I[28]=Zs^~Gt&Ws,I[29]=nn^~Yt&Xt,I[38]=yn^~fn&pn,I[39]=bn^~Xa&mn,I[48]=ta^~tc&vn,I[49]=na^~_n&nc,I[0]^=w[le],I[1]^=w[le+1]};if(a)n.exports=x;else for(g=0;g<p.length;++g)i[p[g]]=x[p[g]]})()})(BM);const RM="Nightly";class PM extends Wr{constructor({timeout:t=1e4}={}){var r;super();v(this,"name",RM);v(this,"url","https://chrome.google.com/webstore/detail/nightly/fiikommddbeccaoicoejoniammnalkfa/related?hl=en&authuser=0");v(this,"icon","https://lh3.googleusercontent.com/_feXM9qulMM5w9BYMLzMpZrxW2WlBmdyg3SbETIoRsHdAD9PANnLCEPabC7lzEK0N8fOyyvFkY3746jk8l73zUErxhU=w128-h128-e365-rj-sc0x00ffffff");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(r=window.nightly)==null?void 0:r.aptos:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>{var i;return(i=window.nightly)!=null&&i.aptos?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||((t=window.nightly)==null?void 0:t.aptos),i=await(r==null?void 0:r.connect(()=>{this._wallet=null,this.emit("disconnect")}));this._wallet={publicKey:i==null?void 0:i.asString(),address:i==null?void 0:i.address(),isConnected:!0},this.emit("connect",this._wallet.publicKey||"");const s=await(r==null?void 0:r.network());this._chainId=s==null?void 0:s.chainId.toString(),this._api=s==null?void 0:s.api,this._network=s==null?void 0:s.network.toLocaleLowerCase()}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){var r;if(this._wallet){this._wallet=null;try{const i=this._provider||((r=window.nightly)==null?void 0:r.aptos);await(i==null?void 0:i.disconnect())}catch(i){this.emit("error",new zr(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(t){var r;try{if(!this._wallet)throw new Te;try{const s=this._provider||((r=window.nightly)==null?void 0:r.aptos),o=await(s==null?void 0:s.signTransaction(t,!1));if(o)return o;throw new Error("Transaction failed")}catch(s){throw new or(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signAllTransaction(t){var r;try{if(!this._wallet)throw new Te;try{const s=this._provider||((r=window.nightly)==null?void 0:r.aptos),o=await(s==null?void 0:s.signAllTransactions(t));if(o)return o;throw new Error("Transaction failed")}catch(s){throw new or(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signAndSubmitTransaction(t){var r;try{if(!this._wallet)throw new Te;try{const s=this._provider||((r=window.nightly)==null?void 0:r.aptos),o=await(s==null?void 0:s.signTransaction(t,!0));if(o)return o;throw new Error("Transaction failed")}catch(s){const o=s instanceof Error?s.message:s.response.data.message;throw new or(o)}}catch(i){throw this.emit("error",i),i}}async signMessage(t){try{const r=this._wallet,i=this._provider||window.nightly.aptos;if(!r||!i)throw new Te;const s=await(i==null?void 0:i.signMessage(t));if(s)return Buffer.from(s).toString("hex");throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider||window.nightly.aptos;if(!t||!r)throw new Te}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider||window.nightly.aptos;if(!t||!r)throw new Te}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}const UM="Spika";class FM extends Wr{constructor({timeout:t=1e4}={}){super();v(this,"name",UM);v(this,"url","https://chrome.google.com/webstore/detail/spika/fadkojdgchhfkdkklllhcphknohbmjmb");v(this,"icon","https://spika.app/assets/logo_400_nb.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.spika:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>window.spika?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const t=this._provider||window.spika;await(t==null?void 0:t.isConnected());const r=await(t==null?void 0:t.connect());(r==null?void 0:r.publicKey)!==void 0?this._wallet={publicKey:r==null?void 0:r.publicKey,address:r==null?void 0:r.account,authKey:r==null?void 0:r.authKey,isConnected:!0}:this._wallet={isConnected:!1},this.emit("connect",this._wallet.publicKey)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){if(this._wallet){this._wallet=null;try{const r=this._provider||window.spika;await(r==null?void 0:r.disconnect())}catch(r){this.emit("error",new zr(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(t,r){try{const i=this._wallet,s=this._provider||window.spika;if(!i||!s)throw new Te;const o=await(s==null?void 0:s.signTransaction(t,r));if(o)return o;throw new Error("Sign Transaction failed")}catch(i){const s=i.message;throw this.emit("error",new or(s)),i}}async signAndSubmitTransaction(t,r){try{const i=this._wallet,s=this._provider||window.spika;if(!i||!s)throw new Te;const o=await(s==null?void 0:s.signAndSubmitTransaction(t,r));if(o)return o;throw new Error("Transaction failed")}catch(i){const s=i.message;throw this.emit("error",new mi(s)),i}}async signMessage(t){try{const r=this._wallet,i=this._provider||window.spika;if(!r||!i)throw new Te;const s=await(i==null?void 0:i.signMessage(t));if(s)return s;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider||window.spika;if(!t||!r)throw new Te}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider||window.spika;if(!t||!r)throw new Te}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}const LM="Coin98";class $M extends Wr{constructor({timeout:t=1e4}={}){var r;super();v(this,"name",LM);v(this,"url","https://chrome.google.com/webstore/detail/coin98-wallet/aeachknmefphepccionboohckonoeemg");v(this,"icon","https://coin98.s3.ap-southeast-1.amazonaws.com/Coin/c98wallet.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(r=window.coin98)==null?void 0:r.aptos:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>{var i;return(i=window.coin98)!=null&&i.aptos?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||((t=window.coin98)==null?void 0:t.aptos);let i=await(r==null?void 0:r.connect());typeof i=="boolean"&&(i=await(r==null?void 0:r.account())),this._wallet={address:i==null?void 0:i.address,publicKey:i==null?void 0:i.publicKey,isConnected:!0};try{this._chainId=null,this._api=null}catch(s){const o=s.message;throw this.emit("error",new us(o)),s}this.emit("connect",this._wallet.publicKey)}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){var i;const t=this._wallet,r=this._provider||((i=window.coin98)==null?void 0:i.aptos);if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(s){this.emit("error",new zr(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(t,r){var i;try{const s=this._wallet,o=this._provider||((i=window.coin98)==null?void 0:i.aptos);if(!s||!o)throw new Te;const a=await o.signTransaction(t,r);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new or(o)),s}}async signAndSubmitTransaction(t,r){var i;try{const s=this._wallet,o=this._provider||((i=window.coin98)==null?void 0:i.aptos);if(!s||!o)throw new Te;const a=await o.signAndSubmitTransaction(t,r);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new mi(o)),s}}async signMessage(t){var r;try{const i=this._wallet,s=this._provider||((r=window.coin98)==null?void 0:r.aptos);if(!i||!s)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(t));if(o)return o;throw new Error("Sign Message failed")}catch(i){const s=i.message;throw this.emit("error",new un(s)),i}}async onAccountChange(){var t;try{const r=this._wallet,i=this._provider||((t=window.coin98)==null?void 0:t.aptos);if(!r||!i)throw new Te;const s=async o=>{var a,c,l,u;if(o!=null&&o.publicKey)this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),address:o.address||((c=this._wallet)==null?void 0:c.address)};else{const d=await(i==null?void 0:i.connect());this._wallet={...this._wallet,address:(d==null?void 0:d.address)||((l=this._wallet)==null?void 0:l.address),publicKey:(d==null?void 0:d.publicKey)||((u=this._wallet)==null?void 0:u.publicKey)}}this.emit("accountChange",o.publicKey)};i.on("accountChange",s)}catch(r){const i=r.message;throw this.emit("error",new ti(i)),r}}async onNetworkChange(){var t;try{const r=this._wallet,i=this._provider||((t=window.coin98)==null?void 0:t.aptos);if(!r||!i)throw new Te}catch(r){const i=r.message;throw this.emit("error",new ni(i)),r}}}var ct={},em={};em.byteLength=zM;em.toByteArray=KM;em.fromByteArray=HM;var so=[],Qi=[],VM=typeof Uint8Array<"u"?Uint8Array:Array,ug="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var rl=0,qM=ug.length;rl<qM;++rl)so[rl]=ug[rl],Qi[ug.charCodeAt(rl)]=rl;Qi["-".charCodeAt(0)]=62;Qi["_".charCodeAt(0)]=63;function Yv(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function zM(n){var e=Yv(n),t=e[0],r=e[1];return(t+r)*3/4-r}function WM(n,e,t){return(e+t)*3/4-t}function KM(n){var e,t=Yv(n),r=t[0],i=t[1],s=new VM(WM(n,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=Qi[n.charCodeAt(c)]<<18|Qi[n.charCodeAt(c+1)]<<12|Qi[n.charCodeAt(c+2)]<<6|Qi[n.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Qi[n.charCodeAt(c)]<<2|Qi[n.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=Qi[n.charCodeAt(c)]<<10|Qi[n.charCodeAt(c+1)]<<4|Qi[n.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function ZM(n){return so[n>>18&63]+so[n>>12&63]+so[n>>6&63]+so[n&63]}function QM(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(ZM(r));return i.join("")}function HM(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(QM(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(so[e>>2]+so[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(so[e>>10]+so[e>>4&63]+so[e<<2&63]+"=")),i.join("")}var $w={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */$w.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=t?i-1:0,h=t?-1:1,f=n[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=s*256+n[e+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+n[e+d],d+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(f?-1:1)*o*Math.pow(2,s-r)};$w.write=function(n,e,t,r,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,m=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;n[t+f]=a&255,f+=m,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;n[t+f]=o&255,f+=m,o/=256,l-=8);n[t+f-m]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=em,t=$w,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=A,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const D=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(D,b),D.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(D){if(D>i)throw new RangeError('The value "'+D+'" is invalid for option "size"');const b=new Uint8Array(D);return Object.setPrototypeOf(b,a.prototype),b}function a(D,b,S){if(typeof D=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(D)}return c(D,b,S)}a.poolSize=8192;function c(D,b,S){if(typeof D=="string")return h(D,b);if(ArrayBuffer.isView(D))return m(D);if(D==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D);if(pt(D,ArrayBuffer)||D&&pt(D.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pt(D,SharedArrayBuffer)||D&&pt(D.buffer,SharedArrayBuffer)))return w(D,b,S);if(typeof D=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $=D.valueOf&&D.valueOf();if($!=null&&$!==D)return a.from($,b,S);const te=y(D);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof D[Symbol.toPrimitive]=="function")return a.from(D[Symbol.toPrimitive]("string"),b,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D)}a.from=function(D,b,S){return c(D,b,S)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(D){if(typeof D!="number")throw new TypeError('"size" argument must be of type number');if(D<0)throw new RangeError('The value "'+D+'" is invalid for option "size"')}function u(D,b,S){return l(D),D<=0?o(D):b!==void 0?typeof S=="string"?o(D).fill(b,S):o(D).fill(b):o(D)}a.alloc=function(D,b,S){return u(D,b,S)};function d(D){return l(D),o(D<0?0:C(D)|0)}a.allocUnsafe=function(D){return d(D)},a.allocUnsafeSlow=function(D){return d(D)};function h(D,b){if((typeof b!="string"||b==="")&&(b="utf8"),!a.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const S=M(D,b)|0;let $=o(S);const te=$.write(D,b);return te!==S&&($=$.slice(0,te)),$}function f(D){const b=D.length<0?0:C(D.length)|0,S=o(b);for(let $=0;$<b;$+=1)S[$]=D[$]&255;return S}function m(D){if(pt(D,Uint8Array)){const b=new Uint8Array(D);return w(b.buffer,b.byteOffset,b.byteLength)}return f(D)}function w(D,b,S){if(b<0||D.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(D.byteLength<b+(S||0))throw new RangeError('"length" is outside of buffer bounds');let $;return b===void 0&&S===void 0?$=new Uint8Array(D):S===void 0?$=new Uint8Array(D,b):$=new Uint8Array(D,b,S),Object.setPrototypeOf($,a.prototype),$}function y(D){if(a.isBuffer(D)){const b=C(D.length)|0,S=o(b);return S.length===0||D.copy(S,0,0,b),S}if(D.length!==void 0)return typeof D.length!="number"||br(D.length)?o(0):f(D);if(D.type==="Buffer"&&Array.isArray(D.data))return f(D.data)}function C(D){if(D>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return D|0}function A(D){return+D!=D&&(D=0),a.alloc(+D)}a.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==a.prototype},a.compare=function(b,S){if(pt(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),pt(S,Uint8Array)&&(S=a.from(S,S.offset,S.byteLength)),!a.isBuffer(b)||!a.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===S)return 0;let $=b.length,te=S.length;for(let se=0,ce=Math.min($,te);se<ce;++se)if(b[se]!==S[se]){$=b[se],te=S[se];break}return $<te?-1:te<$?1:0},a.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(b,S){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return a.alloc(0);let $;if(S===void 0)for(S=0,$=0;$<b.length;++$)S+=b[$].length;const te=a.allocUnsafe(S);let se=0;for($=0;$<b.length;++$){let ce=b[$];if(pt(ce,Uint8Array))se+ce.length>te.length?(a.isBuffer(ce)||(ce=a.from(ce)),ce.copy(te,se)):Uint8Array.prototype.set.call(te,ce,se);else if(a.isBuffer(ce))ce.copy(te,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=ce.length}return te};function M(D,b){if(a.isBuffer(D))return D.length;if(ArrayBuffer.isView(D)||pt(D,ArrayBuffer))return D.byteLength;if(typeof D!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof D);const S=D.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&S===0)return 0;let te=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return Mr(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return Or(D).length;default:if(te)return $?-1:Mr(D).length;b=(""+b).toLowerCase(),te=!0}}a.byteLength=M;function H(D,b,S){let $=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,b>>>=0,S<=b))return"";for(D||(D="utf8");;)switch(D){case"hex":return O(this,b,S);case"utf8":case"utf-8":return x(this,b,S);case"ascii":return k(this,b,S);case"latin1":case"binary":return T(this,b,S);case"base64":return Y(this,b,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,b,S);default:if($)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),$=!0}}a.prototype._isBuffer=!0;function G(D,b,S){const $=D[b];D[b]=D[S],D[S]=$}a.prototype.swap16=function(){const b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<b;S+=2)G(this,S,S+1);return this},a.prototype.swap32=function(){const b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<b;S+=4)G(this,S,S+3),G(this,S+1,S+2);return this},a.prototype.swap64=function(){const b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<b;S+=8)G(this,S,S+7),G(this,S+1,S+6),G(this,S+2,S+5),G(this,S+3,S+4);return this},a.prototype.toString=function(){const b=this.length;return b===0?"":arguments.length===0?x(this,0,b):H.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:a.compare(this,b)===0},a.prototype.inspect=function(){let b="";const S=n.INSPECT_MAX_BYTES;return b=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(b+=" ... "),"<Buffer "+b+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(b,S,$,te,se){if(pt(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(S===void 0&&(S=0),$===void 0&&($=b?b.length:0),te===void 0&&(te=0),se===void 0&&(se=this.length),S<0||$>b.length||te<0||se>this.length)throw new RangeError("out of range index");if(te>=se&&S>=$)return 0;if(te>=se)return-1;if(S>=$)return 1;if(S>>>=0,$>>>=0,te>>>=0,se>>>=0,this===b)return 0;let ce=se-te,Pe=$-S;const jt=Math.min(ce,Pe),Xe=this.slice(te,se),tt=b.slice(S,$);for(let St=0;St<jt;++St)if(Xe[St]!==tt[St]){ce=Xe[St],Pe=tt[St];break}return ce<Pe?-1:Pe<ce?1:0};function q(D,b,S,$,te){if(D.length===0)return-1;if(typeof S=="string"?($=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,br(S)&&(S=te?0:D.length-1),S<0&&(S=D.length+S),S>=D.length){if(te)return-1;S=D.length-1}else if(S<0)if(te)S=0;else return-1;if(typeof b=="string"&&(b=a.from(b,$)),a.isBuffer(b))return b.length===0?-1:X(D,b,S,$,te);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?te?Uint8Array.prototype.indexOf.call(D,b,S):Uint8Array.prototype.lastIndexOf.call(D,b,S):X(D,[b],S,$,te);throw new TypeError("val must be string, number or Buffer")}function X(D,b,S,$,te){let se=1,ce=D.length,Pe=b.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(D.length<2||b.length<2)return-1;se=2,ce/=2,Pe/=2,S/=2}function jt(tt,St){return se===1?tt[St]:tt.readUInt16BE(St*se)}let Xe;if(te){let tt=-1;for(Xe=S;Xe<ce;Xe++)if(jt(D,Xe)===jt(b,tt===-1?0:Xe-tt)){if(tt===-1&&(tt=Xe),Xe-tt+1===Pe)return tt*se}else tt!==-1&&(Xe-=Xe-tt),tt=-1}else for(S+Pe>ce&&(S=ce-Pe),Xe=S;Xe>=0;Xe--){let tt=!0;for(let St=0;St<Pe;St++)if(jt(D,Xe+St)!==jt(b,St)){tt=!1;break}if(tt)return Xe}return-1}a.prototype.includes=function(b,S,$){return this.indexOf(b,S,$)!==-1},a.prototype.indexOf=function(b,S,$){return q(this,b,S,$,!0)},a.prototype.lastIndexOf=function(b,S,$){return q(this,b,S,$,!1)};function E(D,b,S,$){S=Number(S)||0;const te=D.length-S;$?($=Number($),$>te&&($=te)):$=te;const se=b.length;$>se/2&&($=se/2);let ce;for(ce=0;ce<$;++ce){const Pe=parseInt(b.substr(ce*2,2),16);if(br(Pe))return ce;D[S+ce]=Pe}return ce}function j(D,b,S,$){return Ct(Mr(b,D.length-S),D,S,$)}function R(D,b,S,$){return Ct(Ft(b),D,S,$)}function V(D,b,S,$){return Ct(Or(b),D,S,$)}function U(D,b,S,$){return Ct(Ot(b,D.length-S),D,S,$)}a.prototype.write=function(b,S,$,te){if(S===void 0)te="utf8",$=this.length,S=0;else if($===void 0&&typeof S=="string")te=S,$=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite($)?($=$>>>0,te===void 0&&(te="utf8")):(te=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-S;if(($===void 0||$>se)&&($=se),b.length>0&&($<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ce=!1;for(;;)switch(te){case"hex":return E(this,b,S,$);case"utf8":case"utf-8":return j(this,b,S,$);case"ascii":case"latin1":case"binary":return R(this,b,S,$);case"base64":return V(this,b,S,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,b,S,$);default:if(ce)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ce=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(D,b,S){return b===0&&S===D.length?e.fromByteArray(D):e.fromByteArray(D.slice(b,S))}function x(D,b,S){S=Math.min(D.length,S);const $=[];let te=b;for(;te<S;){const se=D[te];let ce=null,Pe=se>239?4:se>223?3:se>191?2:1;if(te+Pe<=S){let jt,Xe,tt,St;switch(Pe){case 1:se<128&&(ce=se);break;case 2:jt=D[te+1],(jt&192)===128&&(St=(se&31)<<6|jt&63,St>127&&(ce=St));break;case 3:jt=D[te+1],Xe=D[te+2],(jt&192)===128&&(Xe&192)===128&&(St=(se&15)<<12|(jt&63)<<6|Xe&63,St>2047&&(St<55296||St>57343)&&(ce=St));break;case 4:jt=D[te+1],Xe=D[te+2],tt=D[te+3],(jt&192)===128&&(Xe&192)===128&&(tt&192)===128&&(St=(se&15)<<18|(jt&63)<<12|(Xe&63)<<6|tt&63,St>65535&&St<1114112&&(ce=St))}}ce===null?(ce=65533,Pe=1):ce>65535&&(ce-=65536,$.push(ce>>>10&1023|55296),ce=56320|ce&1023),$.push(ce),te+=Pe}return g($)}const p=4096;function g(D){const b=D.length;if(b<=p)return String.fromCharCode.apply(String,D);let S="",$=0;for(;$<b;)S+=String.fromCharCode.apply(String,D.slice($,$+=p));return S}function k(D,b,S){let $="";S=Math.min(D.length,S);for(let te=b;te<S;++te)$+=String.fromCharCode(D[te]&127);return $}function T(D,b,S){let $="";S=Math.min(D.length,S);for(let te=b;te<S;++te)$+=String.fromCharCode(D[te]);return $}function O(D,b,S){const $=D.length;(!b||b<0)&&(b=0),(!S||S<0||S>$)&&(S=$);let te="";for(let se=b;se<S;++se)te+=Nt[D[se]];return te}function L(D,b,S){const $=D.slice(b,S);let te="";for(let se=0;se<$.length-1;se+=2)te+=String.fromCharCode($[se]+$[se+1]*256);return te}a.prototype.slice=function(b,S){const $=this.length;b=~~b,S=S===void 0?$:~~S,b<0?(b+=$,b<0&&(b=0)):b>$&&(b=$),S<0?(S+=$,S<0&&(S=0)):S>$&&(S=$),S<b&&(S=b);const te=this.subarray(b,S);return Object.setPrototypeOf(te,a.prototype),te};function W(D,b,S){if(D%1!==0||D<0)throw new RangeError("offset is not uint");if(D+b>S)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(b,S,$){b=b>>>0,S=S>>>0,$||W(b,S,this.length);let te=this[b],se=1,ce=0;for(;++ce<S&&(se*=256);)te+=this[b+ce]*se;return te},a.prototype.readUintBE=a.prototype.readUIntBE=function(b,S,$){b=b>>>0,S=S>>>0,$||W(b,S,this.length);let te=this[b+--S],se=1;for(;S>0&&(se*=256);)te+=this[b+--S]*se;return te},a.prototype.readUint8=a.prototype.readUInt8=function(b,S){return b=b>>>0,S||W(b,1,this.length),this[b]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(b,S){return b=b>>>0,S||W(b,2,this.length),this[b]|this[b+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(b,S){return b=b>>>0,S||W(b,2,this.length),this[b]<<8|this[b+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(b,S){return b=b>>>0,S||W(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(b,S){return b=b>>>0,S||W(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},a.prototype.readBigUInt64LE=yt(function(b){b=b>>>0,Oe(b,"offset");const S=this[b],$=this[b+7];(S===void 0||$===void 0)&&Ie(b,this.length-8);const te=S+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24,se=this[++b]+this[++b]*2**8+this[++b]*2**16+$*2**24;return BigInt(te)+(BigInt(se)<<BigInt(32))}),a.prototype.readBigUInt64BE=yt(function(b){b=b>>>0,Oe(b,"offset");const S=this[b],$=this[b+7];(S===void 0||$===void 0)&&Ie(b,this.length-8);const te=S*2**24+this[++b]*2**16+this[++b]*2**8+this[++b],se=this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+$;return(BigInt(te)<<BigInt(32))+BigInt(se)}),a.prototype.readIntLE=function(b,S,$){b=b>>>0,S=S>>>0,$||W(b,S,this.length);let te=this[b],se=1,ce=0;for(;++ce<S&&(se*=256);)te+=this[b+ce]*se;return se*=128,te>=se&&(te-=Math.pow(2,8*S)),te},a.prototype.readIntBE=function(b,S,$){b=b>>>0,S=S>>>0,$||W(b,S,this.length);let te=S,se=1,ce=this[b+--te];for(;te>0&&(se*=256);)ce+=this[b+--te]*se;return se*=128,ce>=se&&(ce-=Math.pow(2,8*S)),ce},a.prototype.readInt8=function(b,S){return b=b>>>0,S||W(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},a.prototype.readInt16LE=function(b,S){b=b>>>0,S||W(b,2,this.length);const $=this[b]|this[b+1]<<8;return $&32768?$|4294901760:$},a.prototype.readInt16BE=function(b,S){b=b>>>0,S||W(b,2,this.length);const $=this[b+1]|this[b]<<8;return $&32768?$|4294901760:$},a.prototype.readInt32LE=function(b,S){return b=b>>>0,S||W(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},a.prototype.readInt32BE=function(b,S){return b=b>>>0,S||W(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},a.prototype.readBigInt64LE=yt(function(b){b=b>>>0,Oe(b,"offset");const S=this[b],$=this[b+7];(S===void 0||$===void 0)&&Ie(b,this.length-8);const te=this[b+4]+this[b+5]*2**8+this[b+6]*2**16+($<<24);return(BigInt(te)<<BigInt(32))+BigInt(S+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24)}),a.prototype.readBigInt64BE=yt(function(b){b=b>>>0,Oe(b,"offset");const S=this[b],$=this[b+7];(S===void 0||$===void 0)&&Ie(b,this.length-8);const te=(S<<24)+this[++b]*2**16+this[++b]*2**8+this[++b];return(BigInt(te)<<BigInt(32))+BigInt(this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+$)}),a.prototype.readFloatLE=function(b,S){return b=b>>>0,S||W(b,4,this.length),t.read(this,b,!0,23,4)},a.prototype.readFloatBE=function(b,S){return b=b>>>0,S||W(b,4,this.length),t.read(this,b,!1,23,4)},a.prototype.readDoubleLE=function(b,S){return b=b>>>0,S||W(b,8,this.length),t.read(this,b,!0,52,8)},a.prototype.readDoubleBE=function(b,S){return b=b>>>0,S||W(b,8,this.length),t.read(this,b,!1,52,8)};function P(D,b,S,$,te,se){if(!a.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>te||b<se)throw new RangeError('"value" argument is out of bounds');if(S+$>D.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(b,S,$,te){if(b=+b,S=S>>>0,$=$>>>0,!te){const Pe=Math.pow(2,8*$)-1;P(this,b,S,$,Pe,0)}let se=1,ce=0;for(this[S]=b&255;++ce<$&&(se*=256);)this[S+ce]=b/se&255;return S+$},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(b,S,$,te){if(b=+b,S=S>>>0,$=$>>>0,!te){const Pe=Math.pow(2,8*$)-1;P(this,b,S,$,Pe,0)}let se=$-1,ce=1;for(this[S+se]=b&255;--se>=0&&(ce*=256);)this[S+se]=b/ce&255;return S+$},a.prototype.writeUint8=a.prototype.writeUInt8=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,1,255,0),this[S]=b&255,S+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,2,65535,0),this[S]=b&255,this[S+1]=b>>>8,S+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,2,65535,0),this[S]=b>>>8,this[S+1]=b&255,S+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,4,4294967295,0),this[S+3]=b>>>24,this[S+2]=b>>>16,this[S+1]=b>>>8,this[S]=b&255,S+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,4,4294967295,0),this[S]=b>>>24,this[S+1]=b>>>16,this[S+2]=b>>>8,this[S+3]=b&255,S+4};function _(D,b,S,$,te){ge(b,$,te,D,S,7);let se=Number(b&BigInt(4294967295));D[S++]=se,se=se>>8,D[S++]=se,se=se>>8,D[S++]=se,se=se>>8,D[S++]=se;let ce=Number(b>>BigInt(32)&BigInt(4294967295));return D[S++]=ce,ce=ce>>8,D[S++]=ce,ce=ce>>8,D[S++]=ce,ce=ce>>8,D[S++]=ce,S}function F(D,b,S,$,te){ge(b,$,te,D,S,7);let se=Number(b&BigInt(4294967295));D[S+7]=se,se=se>>8,D[S+6]=se,se=se>>8,D[S+5]=se,se=se>>8,D[S+4]=se;let ce=Number(b>>BigInt(32)&BigInt(4294967295));return D[S+3]=ce,ce=ce>>8,D[S+2]=ce,ce=ce>>8,D[S+1]=ce,ce=ce>>8,D[S]=ce,S+8}a.prototype.writeBigUInt64LE=yt(function(b,S=0){return _(this,b,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=yt(function(b,S=0){return F(this,b,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(b,S,$,te){if(b=+b,S=S>>>0,!te){const jt=Math.pow(2,8*$-1);P(this,b,S,$,jt-1,-jt)}let se=0,ce=1,Pe=0;for(this[S]=b&255;++se<$&&(ce*=256);)b<0&&Pe===0&&this[S+se-1]!==0&&(Pe=1),this[S+se]=(b/ce>>0)-Pe&255;return S+$},a.prototype.writeIntBE=function(b,S,$,te){if(b=+b,S=S>>>0,!te){const jt=Math.pow(2,8*$-1);P(this,b,S,$,jt-1,-jt)}let se=$-1,ce=1,Pe=0;for(this[S+se]=b&255;--se>=0&&(ce*=256);)b<0&&Pe===0&&this[S+se+1]!==0&&(Pe=1),this[S+se]=(b/ce>>0)-Pe&255;return S+$},a.prototype.writeInt8=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,1,127,-128),b<0&&(b=255+b+1),this[S]=b&255,S+1},a.prototype.writeInt16LE=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,2,32767,-32768),this[S]=b&255,this[S+1]=b>>>8,S+2},a.prototype.writeInt16BE=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,2,32767,-32768),this[S]=b>>>8,this[S+1]=b&255,S+2},a.prototype.writeInt32LE=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,4,2147483647,-2147483648),this[S]=b&255,this[S+1]=b>>>8,this[S+2]=b>>>16,this[S+3]=b>>>24,S+4},a.prototype.writeInt32BE=function(b,S,$){return b=+b,S=S>>>0,$||P(this,b,S,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[S]=b>>>24,this[S+1]=b>>>16,this[S+2]=b>>>8,this[S+3]=b&255,S+4},a.prototype.writeBigInt64LE=yt(function(b,S=0){return _(this,b,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=yt(function(b,S=0){return F(this,b,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function I(D,b,S,$,te,se){if(S+$>D.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function z(D,b,S,$,te){return b=+b,S=S>>>0,te||I(D,b,S,4),t.write(D,b,S,$,23,4),S+4}a.prototype.writeFloatLE=function(b,S,$){return z(this,b,S,!0,$)},a.prototype.writeFloatBE=function(b,S,$){return z(this,b,S,!1,$)};function ie(D,b,S,$,te){return b=+b,S=S>>>0,te||I(D,b,S,8),t.write(D,b,S,$,52,8),S+8}a.prototype.writeDoubleLE=function(b,S,$){return ie(this,b,S,!0,$)},a.prototype.writeDoubleBE=function(b,S,$){return ie(this,b,S,!1,$)},a.prototype.copy=function(b,S,$,te){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");if($||($=0),!te&&te!==0&&(te=this.length),S>=b.length&&(S=b.length),S||(S=0),te>0&&te<$&&(te=$),te===$||b.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),b.length-S<te-$&&(te=b.length-S+$);const se=te-$;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,$,te):Uint8Array.prototype.set.call(b,this.subarray($,te),S),se},a.prototype.fill=function(b,S,$,te){if(typeof b=="string"){if(typeof S=="string"?(te=S,S=0,$=this.length):typeof $=="string"&&(te=$,$=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!a.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(b.length===1){const ce=b.charCodeAt(0);(te==="utf8"&&ce<128||te==="latin1")&&(b=ce)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(S<0||this.length<S||this.length<$)throw new RangeError("Out of range index");if($<=S)return this;S=S>>>0,$=$===void 0?this.length:$>>>0,b||(b=0);let se;if(typeof b=="number")for(se=S;se<$;++se)this[se]=b;else{const ce=a.isBuffer(b)?b:a.from(b,te),Pe=ce.length;if(Pe===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(se=0;se<$-S;++se)this[se+S]=ce[se%Pe]}return this};const le={};function he(D,b,S){le[D]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${D}]`,this.stack,delete this.name}get code(){return D}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${D}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(D){return D?`${D} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(D,b){return`The "${D}" argument must be of type number. Received type ${typeof b}`},TypeError),he("ERR_OUT_OF_RANGE",function(D,b,S){let $=`The value of "${D}" is out of range.`,te=S;return Number.isInteger(S)&&Math.abs(S)>2**32?te=_e(String(S)):typeof S=="bigint"&&(te=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(te=_e(te)),te+="n"),$+=` It must be ${b}. Received ${te}`,$},RangeError);function _e(D){let b="",S=D.length;const $=D[0]==="-"?1:0;for(;S>=$+4;S-=3)b=`_${D.slice(S-3,S)}${b}`;return`${D.slice(0,S)}${b}`}function Ce(D,b,S){Oe(b,"offset"),(D[b]===void 0||D[b+S]===void 0)&&Ie(b,D.length-(S+1))}function ge(D,b,S,$,te,se){if(D>S||D<b){const ce=typeof b=="bigint"?"n":"";let Pe;throw se>3?b===0||b===BigInt(0)?Pe=`>= 0${ce} and < 2${ce} ** ${(se+1)*8}${ce}`:Pe=`>= -(2${ce} ** ${(se+1)*8-1}${ce}) and < 2 ** ${(se+1)*8-1}${ce}`:Pe=`>= ${b}${ce} and <= ${S}${ce}`,new le.ERR_OUT_OF_RANGE("value",Pe,D)}Ce($,te,se)}function Oe(D,b){if(typeof D!="number")throw new le.ERR_INVALID_ARG_TYPE(b,"number",D)}function Ie(D,b,S){throw Math.floor(D)!==D?(Oe(D,S),new le.ERR_OUT_OF_RANGE(S||"offset","an integer",D)):b<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${b}`,D)}const Ne=/[^+/0-9A-Za-z-_]/g;function Ut(D){if(D=D.split("=")[0],D=D.trim().replace(Ne,""),D.length<2)return"";for(;D.length%4!==0;)D=D+"=";return D}function Mr(D,b){b=b||1/0;let S;const $=D.length;let te=null;const se=[];for(let ce=0;ce<$;++ce){if(S=D.charCodeAt(ce),S>55295&&S<57344){if(!te){if(S>56319){(b-=3)>-1&&se.push(239,191,189);continue}else if(ce+1===$){(b-=3)>-1&&se.push(239,191,189);continue}te=S;continue}if(S<56320){(b-=3)>-1&&se.push(239,191,189),te=S;continue}S=(te-55296<<10|S-56320)+65536}else te&&(b-=3)>-1&&se.push(239,191,189);if(te=null,S<128){if((b-=1)<0)break;se.push(S)}else if(S<2048){if((b-=2)<0)break;se.push(S>>6|192,S&63|128)}else if(S<65536){if((b-=3)<0)break;se.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((b-=4)<0)break;se.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return se}function Ft(D){const b=[];for(let S=0;S<D.length;++S)b.push(D.charCodeAt(S)&255);return b}function Ot(D,b){let S,$,te;const se=[];for(let ce=0;ce<D.length&&!((b-=2)<0);++ce)S=D.charCodeAt(ce),$=S>>8,te=S%256,se.push(te),se.push($);return se}function Or(D){return e.toByteArray(Ut(D))}function Ct(D,b,S,$){let te;for(te=0;te<$&&!(te+S>=b.length||te>=D.length);++te)b[te+S]=D[te];return te}function pt(D,b){return D instanceof b||D!=null&&D.constructor!=null&&D.constructor.name!=null&&D.constructor.name===b.name}function br(D){return D!==D}const Nt=function(){const D="0123456789abcdef",b=new Array(256);for(let S=0;S<16;++S){const $=S*16;for(let te=0;te<16;++te)b[$+te]=D[S]+D[te]}return b}();function yt(D){return typeof BigInt>"u"?Kr:D}function Kr(){throw new Error("BigInt not supported")}})(ct);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ms=BigInt(0),ii=BigInt(1),bh=BigInt(2),GM=BigInt(8),YM={zip215:!0};function XM(n){const e=Uw(n);return Cu(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function JM(n){const e=XM(n),{Fp:t,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=bh<<BigInt(a*8)-ii,u=t.create,d=e.uvRatio||((p,g)=>{try{return{isValid:!0,value:t.sqrt(p*t.inv(g))}}catch{return{isValid:!1,value:ms}}}),h=e.adjustScalarBytes||(p=>p),f=e.domain||((p,g,k)=>{if(Ko("phflag",k),g.length||k)throw new Error("Contexts/pre-hash are not supported");return p});function m(p,g){ts("coordinate "+p,g,ms,l)}function w(p){if(!(p instanceof A))throw new Error("ExtendedPoint expected")}const y=_d((p,g)=>{const{ex:k,ey:T,ez:O}=p,L=p.is0();g==null&&(g=L?GM:t.inv(O));const W=u(k*g),P=u(T*g),_=u(O*g);if(L)return{x:ms,y:ii};if(_!==ii)throw new Error("invZ was invalid");return{x:W,y:P}}),C=_d(p=>{const{a:g,d:k}=e;if(p.is0())throw new Error("bad point: ZERO");const{ex:T,ey:O,ez:L,et:W}=p,P=u(T*T),_=u(O*O),F=u(L*L),I=u(F*F),z=u(P*g),ie=u(F*u(z+_)),le=u(I+u(k*u(P*_)));if(ie!==le)throw new Error("bad point: equation left != right (1)");const he=u(T*O),_e=u(L*W);if(he!==_e)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(g,k,T,O){this.ex=g,this.ey=k,this.ez=T,this.et=O,m("x",g),m("y",k),m("z",T),m("t",O),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(g){if(g instanceof A)throw new Error("extended point not allowed");const{x:k,y:T}=g||{};return m("x",k),m("y",T),new A(k,T,ii,u(k*T))}static normalizeZ(g){const k=t.invertBatch(g.map(T=>T.ez));return g.map((T,O)=>T.toAffine(k[O])).map(A.fromAffine)}_setWindowSize(g){G.setWindowSize(this,g)}assertValidity(){C(this)}equals(g){w(g);const{ex:k,ey:T,ez:O}=this,{ex:L,ey:W,ez:P}=g,_=u(k*P),F=u(L*O),I=u(T*P),z=u(W*O);return _===F&&I===z}is0(){return this.equals(A.ZERO)}negate(){return new A(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:g}=e,{ex:k,ey:T,ez:O}=this,L=u(k*k),W=u(T*T),P=u(bh*u(O*O)),_=u(g*L),F=k+T,I=u(u(F*F)-L-W),z=_+W,ie=z-P,le=_-W,he=u(I*ie),_e=u(z*le),Ce=u(I*le),ge=u(ie*z);return new A(he,_e,ge,Ce)}add(g){w(g);const{a:k,d:T}=e,{ex:O,ey:L,ez:W,et:P}=this,{ex:_,ey:F,ez:I,et:z}=g;if(k===BigInt(-1)){const Ot=u((L-O)*(F+_)),Or=u((L+O)*(F-_)),Ct=u(Or-Ot);if(Ct===ms)return this.double();const pt=u(W*bh*z),br=u(P*bh*I),Nt=br+pt,yt=Or+Ot,Kr=br-pt,D=u(Nt*Ct),b=u(yt*Kr),S=u(Nt*Kr),$=u(Ct*yt);return new A(D,b,$,S)}const ie=u(O*_),le=u(L*F),he=u(P*T*z),_e=u(W*I),Ce=u((O+L)*(_+F)-ie-le),ge=_e-he,Oe=_e+he,Ie=u(le-k*ie),Ne=u(Ce*ge),Ut=u(Oe*Ie),Mr=u(Ce*Ie),Ft=u(ge*Oe);return new A(Ne,Ut,Ft,Mr)}subtract(g){return this.add(g.negate())}wNAF(g){return G.wNAFCached(this,g,A.normalizeZ)}multiply(g){const k=g;ts("scalar",k,ii,r);const{p:T,f:O}=this.wNAF(k);return A.normalizeZ([T,O])[0]}multiplyUnsafe(g){const k=g;return ts("scalar",k,ms,r),k===ms?H:this.equals(H)||k===ii?this:this.equals(M)?this.wNAF(k).p:G.unsafeLadder(this,k)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return G.unsafeLadder(this,r).is0()}toAffine(g){return y(this,g)}clearCofactor(){const{h:g}=e;return g===ii?this:this.multiplyUnsafe(g)}static fromHex(g,k=!1){const{d:T,a:O}=e,L=t.BYTES;g=er("pointHex",g,L),Ko("zip215",k);const W=g.slice(),P=g[L-1];W[L-1]=P&-129;const _=zl(W),F=k?l:t.ORDER;ts("pointHex.y",_,ms,F);const I=u(_*_),z=u(I-ii),ie=u(T*I-O);let{isValid:le,value:he}=d(z,ie);if(!le)throw new Error("Point.fromHex: invalid y coordinate");const _e=(he&ii)===ii,Ce=(P&128)!==0;if(!k&&he===ms&&Ce)throw new Error("Point.fromHex: x=0 and x_0=1");return Ce!==_e&&(he=u(-he)),A.fromAffine({x:he,y:_})}static fromPrivateKey(g){return E(g).point}toRawBytes(){const{x:g,y:k}=this.toAffine(),T=bd(k,t.BYTES);return T[T.length-1]|=g&ii?128:0,T}toHex(){return qc(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,ii,u(e.Gx*e.Gy)),A.ZERO=new A(ms,ii,ii,ms);const{BASE:M,ZERO:H}=A,G=zv(A,a*8);function q(p){return xn(p,r)}function X(p){return q(zl(p))}function E(p){const g=a;p=er("private key",p,g);const k=er("hashed private key",s(p),2*g),T=h(k.slice(0,g)),O=k.slice(g,2*g),L=X(T),W=M.multiply(L),P=W.toRawBytes();return{head:T,prefix:O,scalar:L,point:W,pointBytes:P}}function j(p){return E(p).pointBytes}function R(p=new Uint8Array,...g){const k=zc(...g);return X(s(f(k,er("context",p),!!i)))}function V(p,g,k={}){p=er("message",p),i&&(p=i(p));const{prefix:T,scalar:O,pointBytes:L}=E(g),W=R(k.context,T,p),P=M.multiply(W).toRawBytes(),_=R(k.context,P,L,p),F=q(W+_*O);ts("signature.s",F,ms,r);const I=zc(P,bd(F,t.BYTES));return er("result",I,a*2)}const U=YM;function Y(p,g,k,T=U){const{context:O,zip215:L}=T,W=t.BYTES;p=er("signature",p,2*W),g=er("message",g),L!==void 0&&Ko("zip215",L),i&&(g=i(g));const P=zl(p.slice(W,2*W));let _,F,I;try{_=A.fromHex(k,L),F=A.fromHex(p.slice(0,W),L),I=M.multiplyUnsafe(P)}catch{return!1}if(!L&&_.isSmallOrder())return!1;const z=R(O,F.toRawBytes(),_.toRawBytes(),g);return F.add(_.multiplyUnsafe(z)).subtract(I).clearCofactor().equals(A.ZERO)}return M._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:V,verify:Y,ExtendedPoint:A,utils:{getExtendedPublicKey:E,randomPrivateKey:()=>o(t.BYTES),precompute(p=8,g=A.BASE){return g._setWindowSize(p),g.multiply(BigInt(3)),g}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Nb=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const e3=BigInt(1),jb=BigInt(2);BigInt(3);const t3=BigInt(5),n3=BigInt(8);function r3(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=Vw,a=n*n%s*n%s,c=Un(a,jb,s)*a%s,l=Un(c,e3,s)*n%s,u=Un(l,t3,s)*l%s,d=Un(u,e,s)*u%s,h=Un(d,t,s)*d%s,f=Un(h,r,s)*h%s,m=Un(f,i,s)*f%s,w=Un(m,i,s)*f%s,y=Un(w,e,s)*u%s;return{pow_p_5_8:Un(y,jb,s)*n%s,b2:a}}function i3(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function s3(n,e){const t=Vw,r=xn(e*e*e,t),i=xn(r*r*e,t),s=r3(n*i).pow_p_5_8;let o=xn(n*r*s,t);const a=xn(e*o*o,t),c=o,l=xn(o*Nb,t),u=a===n,d=a===xn(-n,t),h=a===xn(-n*Nb,t);return u&&(o=c),(d||h)&&(o=l),iE(o,t)&&(o=xn(-o,t)),{isValid:u||d,value:o}}const o3=(()=>$v(Vw,void 0,!0))(),a3=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:o3,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:n3,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Hp,randomBytes:Mw,adjustScalarBytes:i3,uvRatio:s3}))(),tm=(()=>JM(a3))();var ip={},c3={get exports(){return ip},set exports(n){ip=n}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=ct,r=t.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=s);function s(o,a,c){return r(o,a,c)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=r(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(c3,ip);var _h=ip.Buffer;function l3(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=_h.from(f)),!_h.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var m=0,w=0,y=0,C=f.length;y!==C&&f[y]===0;)y++,m++;for(var A=(C-y)*l+1>>>0,M=new Uint8Array(A);y!==C;){for(var H=f[y],G=0,q=A-1;(H!==0||G<w)&&q!==-1;q--,G++)H+=256*M[q]>>>0,M[q]=H%o>>>0,H=H/o>>>0;if(H!==0)throw new Error("Non-zero carry");w=G,y++}for(var X=A-w;X!==A&&M[X]===0;)X++;for(var E=a.repeat(m);X<A;++X)E+=n.charAt(M[X]);return E}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return _h.alloc(0);for(var m=0,w=0,y=0;f[m]===a;)w++,m++;for(var C=(f.length-m)*c+1>>>0,A=new Uint8Array(C);m<f.length;){var M=e[f.charCodeAt(m)];if(M===255)return;for(var H=0,G=C-1;(M!==0||H<y)&&G!==-1;G--,H++)M+=o*A[G]>>>0,A[G]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");y=H,m++}for(var q=C-y;q!==C&&A[q]===0;)q++;var X=_h.allocUnsafe(w+(C-q));X.fill(0,0,w);for(var E=w;q!==C;)X[E++]=A[q++];return X}function h(f){var m=d(f);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var u3=l3,d3=u3,h3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",li=d3(h3),Ar={};function Uo(n,e,t){return e<=n&&n<=t}function nm(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function f3(n){for(var e=String(n),t=e.length,r=0,i=[];r<t;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===t-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,c=o&1023;i.push(65536+(a<<10)+c),r+=1}else i.push(65533)}r+=1}return i}function p3(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var sp=-1;function qw(n){this.tokens=[].slice.call(n)}qw.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():sp},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var fu=-1;function dg(n,e){if(n)throw TypeError("Decoder error");return e||65533}var op="utf-8";function ap(n,e){if(!(this instanceof ap))return new ap(n,e);if(n=n!==void 0?String(n).toLowerCase():op,n!==op)throw new Error("Encoding not supported. Only utf-8 is supported");e=nm(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ap.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=nm(t),this._streaming||(this._decoder=new m3({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new qw(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==fu);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===fu)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),p3(s)}};function cp(n,e){if(!(this instanceof cp))return new cp(n,e);if(n=n!==void 0?String(n).toLowerCase():op,n!==op)throw new Error("Encoding not supported. Only utf-8 is supported");e=nm(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}cp.prototype={encode:function(e,t){e=e?String(e):"",t=nm(t),this._streaming||(this._encoder=new g3(this._options)),this._streaming=!!t.stream;for(var r=[],i=new qw(f3(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==fu);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==fu;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function m3(n){var e=n.fatal,t=0,r=0,i=0,s=128,o=191;this.handler=function(a,c){if(c===sp&&i!==0)return i=0,dg(e);if(c===sp)return fu;if(i===0){if(Uo(c,0,127))return c;if(Uo(c,194,223))i=1,t=c-192;else if(Uo(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,t=c-224;else if(Uo(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,t=c-240;else return dg(e);return t=t<<6*i,null}if(!Uo(c,s,o))return t=i=r=0,s=128,o=191,a.prepend(c),dg(e);if(s=128,o=191,r+=1,t+=c-128<<6*(i-r),r!==i)return null;var l=t;return t=i=r=0,l}}function g3(n){n.fatal,this.handler=function(e,t){if(t===sp)return fu;if(Uo(t,0,127))return t;var r,i;Uo(t,128,2047)?(r=1,i=192):Uo(t,2048,65535)?(r=2,i=224):Uo(t,65536,1114111)&&(r=3,i=240);for(var s=[(t>>6*r)+i];r>0;){var o=t>>6*(r-1);s.push(128|o&63),r-=1}return s}}const w3=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ap,TextEncoder:cp},Symbol.toStringTag,{value:"Module"})),y3=Tw(w3);var b3=Bt&&Bt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),_3=Bt&&Bt.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),_o=Bt&&Bt.__decorate||function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},v3=Bt&&Bt.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&b3(e,n,t);return _3(e,n),e},Xv=Bt&&Bt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ar,"__esModule",{value:!0});var Jv=Ar.deserializeUnchecked=sk=Ar.deserialize=ik=Ar.serialize=Ar.BinaryReader=Ar.BinaryWriter=Ar.BorshError=Ar.baseDecode=Ar.baseEncode=void 0;const Ba=Xv(B),ek=Xv(li),k3=v3(y3),S3=typeof TextDecoder!="function"?k3.TextDecoder:TextDecoder,C3=new S3("utf-8",{fatal:!0});function A3(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),ek.default.encode(Buffer.from(n))}Ar.baseEncode=A3;function T3(n){return Buffer.from(ek.default.decode(n))}Ar.baseDecode=T3;const hg=1024;class Yr extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ar.BorshError=Yr;class tk{constructor(){this.buf=Buffer.alloc(hg),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(hg)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ba.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ba.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ba.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ba.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(hg)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}Ar.BinaryWriter=tk;function vo(n,e,t){const r=t.value;t.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Yr("Reached the end of buffer when deserializing")}throw s}}}class Ui{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Ba.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Ba.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Ba.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Ba.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Yr(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return C3.decode(t)}catch(r){throw new Yr(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let i=0;i<t;++i)r.push(e());return r}}_o([vo],Ui.prototype,"readU8",null);_o([vo],Ui.prototype,"readU16",null);_o([vo],Ui.prototype,"readU32",null);_o([vo],Ui.prototype,"readU64",null);_o([vo],Ui.prototype,"readU128",null);_o([vo],Ui.prototype,"readU256",null);_o([vo],Ui.prototype,"readU512",null);_o([vo],Ui.prototype,"readString",null);_o([vo],Ui.prototype,"readFixedArray",null);_o([vo],Ui.prototype,"readArray",null);Ar.BinaryReader=Ui;function nk(n){return n.charAt(0).toUpperCase()+n.slice(1)}function _c(n,e,t,r,i){try{if(typeof r=="string")i[`write${nk(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new Yr(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new Yr(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let s=0;s<r[1];s++)_c(n,null,t[s],r[0],i)}else i.writeArray(t,s=>{_c(n,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),_c(n,e,t,r.type,i));break}case"map":{i.writeU32(t.size),t.forEach((s,o)=>{_c(n,e,o,r.key,i),_c(n,e,s,r.value,i)});break}default:throw new Yr(`FieldType ${r} unrecognized`)}else rk(n,t,i)}catch(s){throw s instanceof Yr&&s.addToFieldPath(e),s}}function rk(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const r=n.get(e.constructor);if(!r)throw new Yr(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{_c(n,i,e[i],s,t)});else if(r.kind==="enum"){const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){t.writeU8(s),_c(n,o,e[o],a,t);break}}}else throw new Yr(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function I3(n,e,t=tk){const r=new t;return rk(n,e,r),r.toArray()}var ik=Ar.serialize=I3;function vc(n,e,t,r){try{if(typeof t=="string")return r[`read${nk(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){const i=[];for(let s=0;s<t[1];s++)i.push(vc(n,null,t[0],r));return i}else return r.readArray(()=>vc(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?vc(n,e,t.type,r):void 0;if(t.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=vc(n,e,t.key,r),c=vc(n,e,t.value,r);i.set(a,c)}return i}return zw(n,t,r)}catch(i){throw i instanceof Yr&&i.addToFieldPath(e),i}}function zw(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const r=n.get(e);if(!r)throw new Yr(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of n.get(e).fields)i[s]=vc(n,s,o,t);return new e(i)}if(r.kind==="enum"){const i=t.readU8();if(i>=r.values.length)throw new Yr(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=vc(n,s,o,t);return new e({[s]:a})}throw new Yr(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function x3(n,e,t,r=Ui){const i=new r(t),s=zw(n,e,i);if(i.offset<t.length)throw new Yr(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return s}var sk=Ar.deserialize=x3;function E3(n,e,t,r=Ui){const i=new r(t);return zw(n,e,i)}Jv=Ar.deserializeUnchecked=E3;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.s16=ae.s8=ae.nu64be=ae.u48be=ae.u40be=ae.u32be=ae.u24be=ae.u16be=kr=ae.nu64=ae.u48=ae.u40=Je=ae.u32=ae.u24=Xi=ae.u16=Dn=ae.u8=Fc=ae.offset=ae.greedy=ae.Constant=ae.UTF8=ae.CString=ae.Blob=ae.Boolean=ae.BitField=ae.BitStructure=ae.VariantLayout=ae.Union=ae.UnionLayoutDiscriminator=ae.UnionDiscriminator=ae.Structure=ae.Sequence=ae.DoubleBE=ae.Double=ae.FloatBE=ae.Float=ae.NearInt64BE=ae.NearInt64=ae.NearUInt64BE=ae.NearUInt64=ae.IntBE=ae.Int=ae.UIntBE=ae.UInt=ae.OffsetLayout=ae.GreedyCount=ae.ExternalLayout=ae.bindConstructorLayout=ae.nameWithProperty=ae.Layout=ae.uint8ArrayToBuffer=ae.checkUint8Array=void 0;ae.constant=ae.utf8=ae.cstr=Ji=ae.blob=ae.unionLayoutDiscriminator=ae.union=co=ae.seq=ae.bits=Qe=ae.struct=ae.f64be=ae.f64=ae.f32be=ae.f32=ae.ns64be=ae.s48be=ae.s40be=ae.s32be=ae.s24be=ae.s16be=ki=ae.ns64=ae.s48=ae.s40=ae.s32=ae.s24=void 0;const Ww=ct;function Au(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ae.checkUint8Array=Au;function Vt(n){return Au(n),Ww.Buffer.from(n.buffer,n.byteOffset,n.length)}ae.uint8ArrayToBuffer=Vt;class Ht{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}ae.Layout=Ht;function Kw(n,e){return e.property?n+"["+e.property+"]":n}ae.nameWithProperty=Kw;function M3(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Ht))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}ae.bindConstructorLayout=M3;class ui extends Ht{isCount(){throw new Error("ExternalLayout is abstract")}}ae.ExternalLayout=ui;class ok extends ui{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Au(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}ae.GreedyCount=ok;class Zw extends ui{constructor(e,t=0,r){if(!(e instanceof Ht))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof as||this.layout instanceof js}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}ae.OffsetLayout=Zw;class as extends Ht{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Vt(e).readUIntLE(t,this.span)}encode(e,t,r=0){return Vt(t).writeUIntLE(e,r,this.span),this.span}}ae.UInt=as;class js extends Ht{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Vt(e).readUIntBE(t,this.span)}encode(e,t,r=0){return Vt(t).writeUIntBE(e,r,this.span),this.span}}ae.UIntBE=js;class Zc extends Ht{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Vt(e).readIntLE(t,this.span)}encode(e,t,r=0){return Vt(t).writeIntLE(e,r,this.span),this.span}}ae.Int=Zc;class Tu extends Ht{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Vt(e).readIntBE(t,this.span)}encode(e,t,r=0){return Vt(t).writeIntBE(e,r,this.span),this.span}}ae.IntBE=Tu;const f0=Math.pow(2,32);function rm(n){const e=Math.floor(n/f0),t=n-e*f0;return{hi32:e,lo32:t}}function im(n,e){return n*f0+e}class ak extends Ht{constructor(e){super(8,e)}decode(e,t=0){const r=Vt(e),i=r.readUInt32LE(t),s=r.readUInt32LE(t+4);return im(s,i)}encode(e,t,r=0){const i=rm(e),s=Vt(t);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}ae.NearUInt64=ak;class ck extends Ht{constructor(e){super(8,e)}decode(e,t=0){const r=Vt(e),i=r.readUInt32BE(t),s=r.readUInt32BE(t+4);return im(i,s)}encode(e,t,r=0){const i=rm(e),s=Vt(t);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}ae.NearUInt64BE=ck;class lk extends Ht{constructor(e){super(8,e)}decode(e,t=0){const r=Vt(e),i=r.readUInt32LE(t),s=r.readInt32LE(t+4);return im(s,i)}encode(e,t,r=0){const i=rm(e),s=Vt(t);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}ae.NearInt64=lk;class uk extends Ht{constructor(e){super(8,e)}decode(e,t=0){const r=Vt(e),i=r.readInt32BE(t),s=r.readUInt32BE(t+4);return im(i,s)}encode(e,t,r=0){const i=rm(e),s=Vt(t);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}ae.NearInt64BE=uk;class dk extends Ht{constructor(e){super(4,e)}decode(e,t=0){return Vt(e).readFloatLE(t)}encode(e,t,r=0){return Vt(t).writeFloatLE(e,r),4}}ae.Float=dk;class hk extends Ht{constructor(e){super(4,e)}decode(e,t=0){return Vt(e).readFloatBE(t)}encode(e,t,r=0){return Vt(t).writeFloatBE(e,r),4}}ae.FloatBE=hk;class fk extends Ht{constructor(e){super(8,e)}decode(e,t=0){return Vt(e).readDoubleLE(t)}encode(e,t,r=0){return Vt(t).writeDoubleLE(e,r),8}}ae.Double=fk;class pk extends Ht{constructor(e){super(8,e)}decode(e,t=0){return Vt(e).readDoubleBE(t)}encode(e,t,r=0){return Vt(t).writeDoubleBE(e,r),8}}ae.DoubleBE=pk;class mk extends Ht{constructor(e,t,r){if(!(e instanceof Ht))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof ui&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof ui)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof ui&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,t+r),++s}return r}decode(e,t=0){const r=[];let i=0,s=this.count;for(s instanceof ui&&(s=s.decode(e,t));i<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,t,r+o),0);return this.count instanceof ui&&this.count.encode(e.length,t,r),s}}ae.Sequence=mk;class gk extends Ht{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof Ht,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){Au(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,t,r),0>c&&(c=a.getSpan(t,r)))}s=r,r+=c}return s+o-i}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}ae.Structure=gk;class Qw{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}ae.UnionDiscriminator=Qw;class lp extends Qw{constructor(e,t){if(!(e instanceof ui&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}ae.UnionLayoutDiscriminator=lp;class Hw extends Ht{constructor(e,t,r){let i;if(e instanceof as||e instanceof js)i=new lp(new Zw(e));else if(e instanceof ui&&e.isCount())i=new lp(e);else if(e instanceof Qw)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Ht))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&(e instanceof as||e instanceof js)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof as||e instanceof js,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const i=this.discriminator,s=i.decode(e,t),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,t+c)}else r=o.decode(e,t);return r}encode(e,t,r=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],t,r),a+o.encode(e[o.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){const i=new wk(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}ae.Union=Hw;class wk extends Ht{constructor(e,t,r,i){if(!(e instanceof Hw))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof Ht))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+r)),r+i}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),s+=this.layout.getSpan(t,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}ae.VariantLayout=wk;function gl(n){return 0>n&&(n+=4294967296),n}class Gw extends Ht{constructor(e,t,r){if(!(e instanceof as||e instanceof js))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(s){return i=gl(s),this},this._packedGetValue=function(){return i}}decode(e,t=0){const r=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,t,r=0){const i=this.word.decode(t,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new Yw(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new yk(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}ae.BitStructure=Gw;class Yw{constructor(e,t,r){if(!(e instanceof Gw))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(t+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-t),this.wordMask=gl(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue();return gl(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==gl(e&this.valueMask))throw new TypeError(Kw("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=gl(e<<this.start);this.container._packedSetValue(gl(t&~this.wordMask)|r)}}ae.BitField=Yw;let yk=class extends Yw{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};ae.Boolean=yk;let bk=class extends Ht{constructor(e,t){if(!(e instanceof ui&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof ui||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),Vt(e).slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof ui&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(Kw("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>t.length)throw new RangeError("encoding overruns Uint8Array");const s=Vt(e);return Vt(t).write(s.toString("hex"),r,i,"hex"),this.length instanceof ui&&this.length.encode(i,t,r),i}};ae.Blob=bk;class _k extends Ht{constructor(e){super(-1,e)}getSpan(e,t=0){Au(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return Vt(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=Ww.Buffer.from(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");const o=Vt(t);return i.copy(o,r),o[r+s]=0,s+1}}ae.CString=_k;class vk extends Ht{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Au(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Vt(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=Ww.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(Vt(t),r),s}}ae.UTF8=vk;class kk extends Ht{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}ae.Constant=kk;ae.greedy=(n,e)=>new ok(n,e);var Fc=ae.offset=(n,e,t)=>new Zw(n,e,t),Dn=ae.u8=n=>new as(1,n),Xi=ae.u16=n=>new as(2,n);ae.u24=n=>new as(3,n);var Je=ae.u32=n=>new as(4,n);ae.u40=n=>new as(5,n);ae.u48=n=>new as(6,n);var kr=ae.nu64=n=>new ak(n);ae.u16be=n=>new js(2,n);ae.u24be=n=>new js(3,n);ae.u32be=n=>new js(4,n);ae.u40be=n=>new js(5,n);ae.u48be=n=>new js(6,n);ae.nu64be=n=>new ck(n);ae.s8=n=>new Zc(1,n);ae.s16=n=>new Zc(2,n);ae.s24=n=>new Zc(3,n);ae.s32=n=>new Zc(4,n);ae.s40=n=>new Zc(5,n);ae.s48=n=>new Zc(6,n);var ki=ae.ns64=n=>new lk(n);ae.s16be=n=>new Tu(2,n);ae.s24be=n=>new Tu(3,n);ae.s32be=n=>new Tu(4,n);ae.s40be=n=>new Tu(5,n);ae.s48be=n=>new Tu(6,n);ae.ns64be=n=>new uk(n);ae.f32=n=>new dk(n);ae.f32be=n=>new hk(n);ae.f64=n=>new fk(n);ae.f64be=n=>new pk(n);var Qe=ae.struct=(n,e,t)=>new gk(n,e,t);ae.bits=(n,e,t)=>new Gw(n,e,t);var co=ae.seq=(n,e,t)=>new mk(n,e,t);ae.union=(n,e,t)=>new Hw(n,e,t);ae.unionLayoutDiscriminator=(n,e)=>new lp(n,e);var Ji=ae.blob=(n,e)=>new bk(n,e);ae.cstr=n=>new _k(n);ae.utf8=(n,e)=>new vk(n,e);ae.constant=(n,e)=>new kk(n,e);var zd={};Object.defineProperty(zd,"__esModule",{value:!0});function O3(n){{const e=Buffer.from(n);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var N3=zd.toBigIntLE=O3;function j3(n){{const e=n.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}zd.toBigIntBE=j3;function D3(n,e){{const t=n.toString(16),r=Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var B3=zd.toBufferLE=D3;function R3(n,e){{const t=n.toString(16);return Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}zd.toBufferBE=R3;class P3 extends TypeError{constructor(e,t){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function U3(n){return Wd(n)&&typeof n[Symbol.iterator]=="function"}function Wd(n){return typeof n=="object"&&n!=null}function up(n){return Wd(n)&&!Array.isArray(n)}function Us(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function F3(n){const{done:e,value:t}=n.next();return e?void 0:t}function L3(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Us(r)}\``}=n;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...n,message:c}}function*Db(n,e,t,r){U3(n)||(n=[n]);for(const i of n){const s=L3(i,e,t,r);s&&(yield s)}}function*Xw(n,e,t={}){const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=t,a={path:r,branch:i,mask:o};s&&(n=e.coercer(n,a));let c="valid";for(const l of e.validator(n,a))l.explanation=t.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(n,a)){const h=Xw(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:t.message});for(const f of h)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):s&&(u=f[1],l===void 0?n=u:n instanceof Map?n.set(l,u):n instanceof Set?n.add(u):Wd(n)&&(u!==void 0||l in n)&&(n[l]=u))}if(c!=="not_valid")for(const l of e.refiner(n,a))l.explanation=t.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,n])}let ko=class{constructor(e){const{type:t,schema:r,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(c,l)=>{const u=i(c,l);return Db(u,l,this,c)}:this.validator=()=>[],s?this.refiner=(c,l)=>{const u=s(c,l);return Db(u,l,this,c)}:this.refiner=()=>[]}assert(e,t){return $3(e,this,t)}create(e,t){return vd(e,this,t)}is(e){return Sk(e,this)}mask(e,t){return V3(e,this,t)}validate(e,t={}){return Kd(e,this,t)}};function $3(n,e,t){const r=Kd(n,e,{message:t});if(r[0])throw r[0]}function vd(n,e,t){const r=Kd(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function V3(n,e,t){const r=Kd(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function Sk(n,e){return!Kd(n,e)[0]}function Kd(n,e,t={}){const r=Xw(n,e,t),i=F3(r);return i[0]?[new P3(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Qc(n,e){return new ko({type:n,schema:null,validator:e})}function q3(){return Qc("any",()=>!0)}function Be(n){return new ko({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Us(e)}`}})}function po(){return Qc("boolean",n=>typeof n=="boolean")}function Jw(n){return Qc("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${Us(e)}`)}function Nn(n){const e=Us(n),t=typeof n;return new ko({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${Us(r)}`}})}function z3(){return Qc("never",()=>!1)}function Re(n){return new ko({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function oe(){return Qc("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Us(n)}`)}function it(n){return new ko({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Ck(n,e){return new ko({type:"record",schema:null,*entries(t){if(Wd(t))for(const r in t){const i=t[r];yield[r,r,n],yield[r,i,e]}},validator(t){return up(t)||`Expected an object, but received: ${Us(t)}`},coercer(t){return up(t)?{...t}:t}})}function Ae(){return Qc("string",n=>typeof n=="string"||`Expected a string, but received: ${Us(n)}`)}function ey(n){const e=z3();return new ko({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let i=0;i<r;i++)yield[i,t[i],n[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Us(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function be(n){const e=Object.keys(n);return new ko({type:"type",schema:n,*entries(t){if(Wd(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return up(t)||`Expected an object, but received: ${Us(t)}`},coercer(t){return up(t)?{...t}:t}})}function ei(n){const e=n.map(t=>t.type).join(" | ");return new ko({type:"union",schema:null,coercer(t,r){for(const i of n){const[s,o]=i.validate(t,{coerce:!0,mask:r.mask});if(!s)return o}return t},validator(t,r){const i=[];for(const s of n){const[...o]=Xw(t,s,r),[a]=o;if(a[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Us(t)}`,...i]}})}function Iu(){return Qc("unknown",()=>!0)}function Zd(n,e,t){return new ko({...n,coercer:(r,i)=>Sk(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}var vh,W3=new Uint8Array(16);function Ak(){if(!vh&&(vh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!vh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vh(W3)}const K3=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function sm(n){return typeof n=="string"&&K3.test(n)}var _r=[];for(var fg=0;fg<256;++fg)_r.push((fg+256).toString(16).substr(1));function om(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(_r[n[e+0]]+_r[n[e+1]]+_r[n[e+2]]+_r[n[e+3]]+"-"+_r[n[e+4]]+_r[n[e+5]]+"-"+_r[n[e+6]]+_r[n[e+7]]+"-"+_r[n[e+8]]+_r[n[e+9]]+"-"+_r[n[e+10]]+_r[n[e+11]]+_r[n[e+12]]+_r[n[e+13]]+_r[n[e+14]]+_r[n[e+15]]).toLowerCase();if(!sm(t))throw TypeError("Stringified UUID is invalid");return t}var Bb,pg,mg=0,gg=0;function Z3(n,e,t){var r=e&&t||0,i=e||new Array(16);n=n||{};var s=n.node||Bb,o=n.clockseq!==void 0?n.clockseq:pg;if(s==null||o==null){var a=n.random||(n.rng||Ak)();s==null&&(s=Bb=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=pg=(a[6]<<8|a[7])&16383)}var c=n.msecs!==void 0?n.msecs:Date.now(),l=n.nsecs!==void 0?n.nsecs:gg+1,u=c-mg+(l-gg)/1e4;if(u<0&&n.clockseq===void 0&&(o=o+1&16383),(u<0||c>mg)&&n.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");mg=c,gg=l,pg=o,c+=122192928e5;var d=((c&268435455)*1e4+l)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=d&255;var h=c/4294967296*1e4&268435455;i[r++]=h>>>8&255,i[r++]=h&255,i[r++]=h>>>24&15|16,i[r++]=h>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var f=0;f<6;++f)i[r+f]=s[f];return e||om(i)}function Tk(n){if(!sm(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Q3(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var H3="6ba7b810-9dad-11d1-80b4-00c04fd430c8",G3="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ik(n,e,t){function r(i,s,o,a){if(typeof i=="string"&&(i=Q3(i)),typeof s=="string"&&(s=Tk(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return om(c)}try{r.name=n}catch{}return r.DNS=H3,r.URL=G3,r}function Y3(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return X3(J3(e6(n),n.length*8))}function X3(n){for(var e=[],t=n.length*32,r="0123456789abcdef",i=0;i<t;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function xk(n){return(n+64>>>9<<4)+14+1}function J3(n,e){n[e>>5]|=128<<e%32,n[xk(e)-1]=e;for(var t=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var a=t,c=r,l=i,u=s;t=Nr(t,r,i,s,n[o],7,-680876936),s=Nr(s,t,r,i,n[o+1],12,-389564586),i=Nr(i,s,t,r,n[o+2],17,606105819),r=Nr(r,i,s,t,n[o+3],22,-1044525330),t=Nr(t,r,i,s,n[o+4],7,-176418897),s=Nr(s,t,r,i,n[o+5],12,1200080426),i=Nr(i,s,t,r,n[o+6],17,-1473231341),r=Nr(r,i,s,t,n[o+7],22,-45705983),t=Nr(t,r,i,s,n[o+8],7,1770035416),s=Nr(s,t,r,i,n[o+9],12,-1958414417),i=Nr(i,s,t,r,n[o+10],17,-42063),r=Nr(r,i,s,t,n[o+11],22,-1990404162),t=Nr(t,r,i,s,n[o+12],7,1804603682),s=Nr(s,t,r,i,n[o+13],12,-40341101),i=Nr(i,s,t,r,n[o+14],17,-1502002290),r=Nr(r,i,s,t,n[o+15],22,1236535329),t=jr(t,r,i,s,n[o+1],5,-165796510),s=jr(s,t,r,i,n[o+6],9,-1069501632),i=jr(i,s,t,r,n[o+11],14,643717713),r=jr(r,i,s,t,n[o],20,-373897302),t=jr(t,r,i,s,n[o+5],5,-701558691),s=jr(s,t,r,i,n[o+10],9,38016083),i=jr(i,s,t,r,n[o+15],14,-660478335),r=jr(r,i,s,t,n[o+4],20,-405537848),t=jr(t,r,i,s,n[o+9],5,568446438),s=jr(s,t,r,i,n[o+14],9,-1019803690),i=jr(i,s,t,r,n[o+3],14,-187363961),r=jr(r,i,s,t,n[o+8],20,1163531501),t=jr(t,r,i,s,n[o+13],5,-1444681467),s=jr(s,t,r,i,n[o+2],9,-51403784),i=jr(i,s,t,r,n[o+7],14,1735328473),r=jr(r,i,s,t,n[o+12],20,-1926607734),t=Dr(t,r,i,s,n[o+5],4,-378558),s=Dr(s,t,r,i,n[o+8],11,-2022574463),i=Dr(i,s,t,r,n[o+11],16,1839030562),r=Dr(r,i,s,t,n[o+14],23,-35309556),t=Dr(t,r,i,s,n[o+1],4,-1530992060),s=Dr(s,t,r,i,n[o+4],11,1272893353),i=Dr(i,s,t,r,n[o+7],16,-155497632),r=Dr(r,i,s,t,n[o+10],23,-1094730640),t=Dr(t,r,i,s,n[o+13],4,681279174),s=Dr(s,t,r,i,n[o],11,-358537222),i=Dr(i,s,t,r,n[o+3],16,-722521979),r=Dr(r,i,s,t,n[o+6],23,76029189),t=Dr(t,r,i,s,n[o+9],4,-640364487),s=Dr(s,t,r,i,n[o+12],11,-421815835),i=Dr(i,s,t,r,n[o+15],16,530742520),r=Dr(r,i,s,t,n[o+2],23,-995338651),t=Br(t,r,i,s,n[o],6,-198630844),s=Br(s,t,r,i,n[o+7],10,1126891415),i=Br(i,s,t,r,n[o+14],15,-1416354905),r=Br(r,i,s,t,n[o+5],21,-57434055),t=Br(t,r,i,s,n[o+12],6,1700485571),s=Br(s,t,r,i,n[o+3],10,-1894986606),i=Br(i,s,t,r,n[o+10],15,-1051523),r=Br(r,i,s,t,n[o+1],21,-2054922799),t=Br(t,r,i,s,n[o+8],6,1873313359),s=Br(s,t,r,i,n[o+15],10,-30611744),i=Br(i,s,t,r,n[o+6],15,-1560198380),r=Br(r,i,s,t,n[o+13],21,1309151649),t=Br(t,r,i,s,n[o+4],6,-145523070),s=Br(s,t,r,i,n[o+11],10,-1120210379),i=Br(i,s,t,r,n[o+2],15,718787259),r=Br(r,i,s,t,n[o+9],21,-343485551),t=Ra(t,a),r=Ra(r,c),i=Ra(i,l),s=Ra(s,u)}return[t,r,i,s]}function e6(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(xk(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function Ra(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function t6(n,e){return n<<e|n>>>32-e}function am(n,e,t,r,i,s){return Ra(t6(Ra(Ra(e,n),Ra(r,s)),i),t)}function Nr(n,e,t,r,i,s,o){return am(e&t|~e&r,n,e,i,s,o)}function jr(n,e,t,r,i,s,o){return am(e&r|t&~r,n,e,i,s,o)}function Dr(n,e,t,r,i,s,o){return am(e^t^r,n,e,i,s,o)}function Br(n,e,t,r,i,s,o){return am(t^(e|~r),n,e,i,s,o)}var n6=Ik("v3",48,Y3);const r6=n6;function i6(n,e,t){n=n||{};var r=n.random||(n.rng||Ak)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return om(r)}function s6(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function wg(n,e){return n<<e|n>>>32-e}function o6(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=n[c*64+u*4]<<24|n[c*64+u*4+1]<<16|n[c*64+u*4+2]<<8|n[c*64+u*4+3];a[c]=l}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var m=16;m<80;++m)h[m]=wg(h[m-3]^h[m-8]^h[m-14]^h[m-16],1);for(var w=t[0],y=t[1],C=t[2],A=t[3],M=t[4],H=0;H<80;++H){var G=Math.floor(H/20),q=wg(w,5)+s6(G,y,C,A)+M+e[G]+h[H]>>>0;M=A,A=C,C=wg(y,30)>>>0,y=w,w=q}t[0]=t[0]+w>>>0,t[1]=t[1]+y>>>0,t[2]=t[2]+C>>>0,t[3]=t[3]+A>>>0,t[4]=t[4]+M>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var a6=Ik("v5",80,o6);const c6=a6,l6="00000000-0000-0000-0000-000000000000";function u6(n){if(!sm(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const d6=Object.freeze(Object.defineProperty({__proto__:null,NIL:l6,parse:Tk,stringify:om,v1:Z3,v3:r6,v4:i6,v5:c6,validate:sm,version:u6},Symbol.toStringTag,{value:"Module"})),Ek=Tw(d6);Ek.v4;Ek.v4;var Rb={},h6={get exports(){return Rb},set exports(n){Rb=n}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||c,h),m=t?t+l:l;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],f]:c._events[m].push(f):(c._events[m]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},a.prototype.listenerCount=function(l){var u=t?t+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,m){var w=t?t+l:l;if(!this._events[w])return!1;var y=this._events[w],C=arguments.length,A,M;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),C){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,m),!0}for(M=1,A=new Array(C-1);M<C;M++)A[M-1]=arguments[M];y.fn.apply(y.context,A)}else{var H=y.length,G;for(M=0;M<H;M++)switch(y[M].once&&this.removeListener(l,y[M].fn,void 0,!0),C){case 1:y[M].fn.call(y[M].context);break;case 2:y[M].fn.call(y[M].context,u);break;case 3:y[M].fn.call(y[M].context,u,d);break;case 4:y[M].fn.call(y[M].context,u,d,h);break;default:if(!A)for(G=1,A=new Array(C-1);G<C;G++)A[G-1]=arguments[G];y[M].fn.apply(y[M].context,A)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=t?t+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var w=0,y=[],C=m.length;w<C;w++)(m[w].fn!==u||h&&!m[w].once||d&&m[w].context!==d)&&y.push(m[w]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(h6);tm.utils.randomPrivateKey;function Pb(n){try{return tm.ExtendedPoint.fromHex(n),!0}catch{return!1}}const f6=(n,e)=>tm.sign(n,e.slice(0,32)),p6=tm.verify,ty=n=>ct.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ct.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ct.Buffer.from(n);class m6{constructor(e){Object.assign(this,e)}encode(){return ct.Buffer.from(ik(ef,this))}static decode(e){return sk(ef,this,e)}static decodeUnchecked(e){return Jv(ef,this,e)}}const ef=new Map;var Mk;const g6=32,ud=32;function w6(n){return n._bn!==void 0}let Ub=1,Tt=class wl extends m6{constructor(e){if(super({}),this._bn=void 0,w6(e))this._bn=e._bn;else{if(typeof e=="string"){const t=li.decode(e);if(t.length!=ud)throw new Error("Invalid public key input");this._bn=new B(t)}else this._bn=new B(e);if(this._bn.byteLength()>ud)throw new Error("Invalid public key input")}}static unique(){const e=new wl(Ub);return Ub+=1,new wl(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return li.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ct.Buffer);if(e.length===ud)return e;const t=ct.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=ct.Buffer.concat([e.toBuffer(),ct.Buffer.from(t),r.toBuffer()]),s=np(i);return new wl(s)}static createProgramAddressSync(e,t){let r=ct.Buffer.alloc(0);e.forEach(function(s){if(s.length>g6)throw new TypeError("Max seed length exceeded");r=ct.Buffer.concat([r,ty(s)])}),r=ct.Buffer.concat([r,t.toBuffer(),ct.Buffer.from("ProgramDerivedAddress")]);const i=np(r);if(Pb(i))throw new Error("Invalid seeds, address must fall off the curve");return new wl(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,i;for(;r!=0;){try{const s=e.concat(ct.Buffer.from([r]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new wl(e);return Pb(t.toBytes())}};Mk=Tt;Tt.default=new Mk("11111111111111111111111111111111");ef.set(Tt,{kind:"struct",fields:[["_bn","u256"]]});new Tt("BPFLoader1111111111111111111111111111111111");const p0=1280-40-8,y6=127,Ok=64;class Fb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const Dt=(n="publicKey")=>Ji(32,n),El=(n="string")=>{const e=Qe([Je("length"),Je("lengthPadding"),Ji(Fc(Je(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const c={chars:ct.Buffer.from(s,"utf8")};return r(c,o,a)},i.alloc=s=>Je().span+Je().span+ct.Buffer.from(s,"utf8").length,i},b6=(n="authorized")=>Qe([Dt("staker"),Dt("withdrawer")],n),_6=(n="lockup")=>Qe([ki("unixTimestamp"),ki("epoch"),Dt("custodian")],n),v6=(n="voteInit")=>Qe([Dt("nodePubkey"),Dt("authorizedVoter"),Dt("authorizedWithdrawer"),Dn("commission")],n),k6=(n="voteAuthorizeWithSeedArgs")=>Qe([Je("voteAuthorizationType"),Dt("currentAuthorityDerivedKeyOwnerPubkey"),El("currentAuthorityDerivedKeySeed"),Dt("newAuthorized")],n);function Gu(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function Yu(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function vi(n,e){if(!n)throw new Error(e||"Assertion failed")}class ny{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,i=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const c=i(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new ny(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];vi(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{vi(t.length>0,"Expected at least one writable signer key");const[c]=t[0];vi(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([c])=>new Tt(c)),...r.map(([c])=>new Tt(c)),...i.map(([c])=>new Tt(c)),...s.map(([c])=>new Tt(c))];return[o,a]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,t){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new Tt(s),c=e.findIndex(l=>l.equals(a));c>=0&&(vi(c<256,"Max lookup table index exceeded"),r.push(c),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const Nk="Reached end of buffer unexpectedly";function kh(n){if(n.length===0)throw new Error(Nk);return n.shift()}function Xu(n,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(Nk);return n.splice(...e)}class pu{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Tt(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:li.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Fb(this.staticAccountKeys)}static compile(e){const t=ny.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),o=new Fb(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:li.encode(a.data)}));return new pu({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Yu(t,e);const r=this.instructions.map(d=>{const{accounts:h,programIdIndex:f}=d,m=Array.from(li.decode(d.data));let w=[];Yu(w,h.length);let y=[];return Yu(y,m.length),{programIdIndex:f,keyIndicesCount:ct.Buffer.from(w),keyIndices:h,dataLength:ct.Buffer.from(y),data:m}});let i=[];Yu(i,r.length);let s=ct.Buffer.alloc(p0);ct.Buffer.from(i).copy(s);let o=i.length;r.forEach(d=>{const f=Qe([Dn("programIdIndex"),Ji(d.keyIndicesCount.length,"keyIndicesCount"),co(Dn("keyIndex"),d.keyIndices.length,"keyIndices"),Ji(d.dataLength.length,"dataLength"),co(Dn("userdatum"),d.data.length,"data")]).encode(d,s,o);o+=f}),s=s.slice(0,o);const a=Qe([Ji(1,"numRequiredSignatures"),Ji(1,"numReadonlySignedAccounts"),Ji(1,"numReadonlyUnsignedAccounts"),Ji(t.length,"keyCount"),co(Dt("key"),e,"keys"),Dt("recentBlockhash")]),c={numRequiredSignatures:ct.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ct.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ct.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ct.Buffer.from(t),keys:this.accountKeys.map(d=>ty(d.toBytes())),recentBlockhash:li.decode(this.recentBlockhash)};let l=ct.Buffer.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let t=[...e];const r=kh(t);if(r!==(r&y6))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=kh(t),s=kh(t),o=Gu(t);let a=[];for(let h=0;h<o;h++){const f=Xu(t,0,ud);a.push(new Tt(ct.Buffer.from(f)))}const c=Xu(t,0,ud),l=Gu(t);let u=[];for(let h=0;h<l;h++){const f=kh(t),m=Gu(t),w=Xu(t,0,m),y=Gu(t),C=Xu(t,0,y),A=li.encode(ct.Buffer.from(C));u.push({programIdIndex:f,accounts:w,data:A})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:li.encode(ct.Buffer.from(c)),accountKeys:a,instructions:u};return new pu(d)}}const S6=ct.Buffer.alloc(Ok).fill(0);class m0{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ct.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}let C6=class g0{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new m0(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let w=0;w<t.length;w++)if(t[w].programId===void 0)throw new Error(`Transaction instruction index ${w} has undefined program id`);const i=[],s=[];t.forEach(w=>{w.keys.forEach(C=>{s.push({...C})});const y=w.programId.toString();i.includes(y)||i.push(y)}),i.forEach(w=>{s.push({pubkey:new Tt(w),isSigner:!1,isWritable:!1})});const o=[];s.forEach(w=>{const y=w.pubkey.toString(),C=o.findIndex(A=>A.pubkey.toString()===y);C>-1?(o[C].isWritable=o[C].isWritable||w.isWritable,o[C].isSigner=o[C].isSigner||w.isSigner):o.push(w)}),o.sort(function(w,y){if(w.isSigner!==y.isSigner)return w.isSigner?-1:1;if(w.isWritable!==y.isWritable)return w.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return w.pubkey.toBase58().localeCompare(y.pubkey.toBase58(),"en",C)});const a=o.findIndex(w=>w.pubkey.equals(r));if(a>-1){const[w]=o.splice(a,1);w.isSigner=!0,w.isWritable=!0,o.unshift(w)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const w of this.signatures){const y=o.findIndex(C=>C.pubkey.equals(w.publicKey));if(y>-1)o[y].isSigner||(o[y].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${w.publicKey.toString()}`)}let c=0,l=0,u=0;const d=[],h=[];o.forEach(({pubkey:w,isSigner:y,isWritable:C})=>{y?(d.push(w.toString()),c+=1,C||(l+=1)):(h.push(w.toString()),C||(u+=1))});const f=d.concat(h),m=t.map(w=>{const{data:y,programId:C}=w;return{programIdIndex:f.indexOf(C.toString()),accounts:w.keys.map(A=>f.indexOf(A.pubkey.toString())),data:li.encode(y)}});return m.forEach(w=>{vi(w.programIdIndex>=0),w.accounts.forEach(y=>vi(y>=0))}),new pu({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:m})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const i=r.toString();return t.has(i)?!1:(t.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(i=>{const s=f6(r,i.secretKey);this._addSignature(i.publicKey,ty(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){vi(t.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ct.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(r.missing||(r.missing=[])).push(s):p6(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,r=[];Yu(r,t.length);const i=r.length+t.length*64+e.length,s=ct.Buffer.alloc(i);return vi(t.length<256),ct.Buffer.from(r).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(vi(o.length===64,"signature has invalid length"),ct.Buffer.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+t.length*64),vi(s.length<=p0,`Transaction too large: ${s.length} > ${p0}`),s}get keys(){return vi(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return vi(this.instructions.length===1),this.instructions[0].programId}get data(){return vi(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=Gu(t);let i=[];for(let s=0;s<r;s++){const o=Xu(t,0,Ok);i.push(li.encode(ct.Buffer.from(o)))}return g0.populate(pu.from(t),i)}static populate(e,t=[]){const r=new g0;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==li.encode(S6)?null:li.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new m0({keys:s,programId:e.accountKeys[i.programIdIndex],data:li.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}};new Tt("SysvarC1ock11111111111111111111111111111111");new Tt("SysvarEpochSchedu1e111111111111111111111111");new Tt("Sysvar1nstructions1111111111111111111111111");new Tt("SysvarRecentB1ockHashes11111111111111111111");new Tt("SysvarRent111111111111111111111111111111111");new Tt("SysvarRewards111111111111111111111111111111");new Tt("SysvarS1otHashes111111111111111111111111111");new Tt("SysvarS1otHistory11111111111111111111111111");new Tt("SysvarStakeHistory1111111111111111111111111");const A6=kr("lamportsPerSignature"),T6=Qe([Je("version"),Je("state"),Dt("authorizedPubkey"),Dt("nonce"),Qe([A6],"feeCalculator")]);T6.span;const I6=n=>{const e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},x6=n=>e=>{const t=Ji(n,e),{encode:r,decode:i}=I6(t),s=t;return s.decode=(o,a)=>{const c=i(o,a);return N3(ct.Buffer.from(c))},s.encode=(o,a,c)=>{const l=B3(o,n);return r(l,a,c)},s},mu=x6(8);Object.freeze({Create:{index:0,layout:Qe([Je("instruction"),ki("lamports"),ki("space"),Dt("programId")])},Assign:{index:1,layout:Qe([Je("instruction"),Dt("programId")])},Transfer:{index:2,layout:Qe([Je("instruction"),mu("lamports")])},CreateWithSeed:{index:3,layout:Qe([Je("instruction"),Dt("base"),El("seed"),ki("lamports"),ki("space"),Dt("programId")])},AdvanceNonceAccount:{index:4,layout:Qe([Je("instruction")])},WithdrawNonceAccount:{index:5,layout:Qe([Je("instruction"),ki("lamports")])},InitializeNonceAccount:{index:6,layout:Qe([Je("instruction"),Dt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Qe([Je("instruction"),Dt("authorized")])},Allocate:{index:8,layout:Qe([Je("instruction"),ki("space")])},AllocateWithSeed:{index:9,layout:Qe([Je("instruction"),Dt("base"),El("seed"),ki("space"),Dt("programId")])},AssignWithSeed:{index:10,layout:Qe([Je("instruction"),Dt("base"),El("seed"),Dt("programId")])},TransferWithSeed:{index:11,layout:Qe([Je("instruction"),mu("lamports"),El("seed"),Dt("programId")])},UpgradeNonceAccount:{index:12,layout:Qe([Je("instruction")])}});new Tt("11111111111111111111111111111111");new Tt("BPFLoader2111111111111111111111111111111111");Qe([Je("typeIndex"),mu("deactivationSlot"),kr("lastExtendedSlot"),Dn("lastExtendedStartIndex"),Dn(),co(Dt(),Fc(Dn(),-1),"authority")]);const Vn=Zd(Jw(Tt),Ae(),n=>new Tt(n)),jk=ey([Ae(),Nn("base64")]),ry=Zd(Jw(ct.Buffer),jk,n=>ct.Buffer.from(n[0],"base64"));function Dk(n){return ei([be({jsonrpc:Nn("2.0"),id:Ae(),result:n}),be({jsonrpc:Nn("2.0"),id:Ae(),error:be({code:Iu(),message:Ae(),data:it(q3())})})])}const E6=Dk(Iu());function dn(n){return Zd(Dk(n),E6,e=>"error"in e?e:{...e,result:vd(e.result,n)})}function ds(n){return dn(be({context:be({slot:oe()}),value:n}))}function cm(n){return be({context:be({slot:oe()}),value:n})}const M6=be({foundation:oe(),foundationTerm:oe(),initial:oe(),taper:oe(),terminal:oe()});dn(Be(Re(be({epoch:oe(),effectiveSlot:oe(),amount:oe(),postBalance:oe(),commission:it(Re(oe()))}))));const O6=Be(be({slot:oe(),prioritizationFee:oe()})),N6=be({total:oe(),validator:oe(),foundation:oe(),epoch:oe()}),j6=be({epoch:oe(),slotIndex:oe(),slotsInEpoch:oe(),absoluteSlot:oe(),blockHeight:it(oe()),transactionCount:it(oe())}),D6=be({slotsPerEpoch:oe(),leaderScheduleSlotOffset:oe(),warmup:po(),firstNormalEpoch:oe(),firstNormalSlot:oe()}),B6=Ck(Ae(),Be(oe())),Hc=Re(ei([be({}),Ae()])),R6=be({err:Hc}),P6=Nn("receivedSignature");be({"solana-core":Ae(),"feature-set":it(oe())});const U6=be({program:Ae(),programId:Vn,parsed:Iu()}),F6=be({programId:Vn,accounts:Be(Vn),data:Ae()});ds(be({err:Re(ei([be({}),Ae()])),logs:Re(Be(Ae())),accounts:it(Re(Be(Re(be({executable:po(),owner:Ae(),lamports:oe(),data:Be(Ae()),rentEpoch:it(oe())}))))),unitsConsumed:it(oe()),returnData:it(Re(be({programId:Ae(),data:ey([Ae(),Nn("base64")])}))),innerInstructions:it(Re(Be(be({index:oe(),instructions:Be(ei([U6,F6]))}))))}));ds(be({byIdentity:Ck(Ae(),Be(oe())),range:be({firstSlot:oe(),lastSlot:oe()})}));dn(M6);dn(N6);dn(O6);dn(j6);dn(D6);dn(B6);dn(oe());ds(be({total:oe(),circulating:oe(),nonCirculating:oe(),nonCirculatingAccounts:Be(Vn)}));const L6=be({amount:Ae(),uiAmount:Re(oe()),decimals:oe(),uiAmountString:it(Ae())});ds(Be(be({address:Vn,amount:Ae(),uiAmount:Re(oe()),decimals:oe(),uiAmountString:it(Ae())})));ds(Be(be({pubkey:Vn,account:be({executable:po(),owner:Vn,lamports:oe(),data:ry,rentEpoch:oe()})})));const w0=be({program:Ae(),parsed:Iu(),space:oe()});ds(Be(be({pubkey:Vn,account:be({executable:po(),owner:Vn,lamports:oe(),data:w0,rentEpoch:oe()})})));ds(Be(be({lamports:oe(),address:Vn})));const iy=be({executable:po(),owner:Vn,lamports:oe(),data:ry,rentEpoch:oe()});be({pubkey:Vn,account:iy});const $6=Zd(ei([Jw(ct.Buffer),w0]),ei([jk,w0]),n=>Array.isArray(n)?vd(n,ry):n),V6=be({executable:po(),owner:Vn,lamports:oe(),data:$6,rentEpoch:oe()});be({pubkey:Vn,account:V6});be({state:ei([Nn("active"),Nn("inactive"),Nn("activating"),Nn("deactivating")]),active:oe(),inactive:oe()});dn(Be(be({signature:Ae(),slot:oe(),err:Hc,memo:Re(Ae()),blockTime:it(Re(oe()))})));dn(Be(be({signature:Ae(),slot:oe(),err:Hc,memo:Re(Ae()),blockTime:it(Re(oe()))})));be({subscription:oe(),result:cm(iy)});const q6=be({pubkey:Vn,account:iy});be({subscription:oe(),result:cm(q6)});const z6=be({parent:oe(),slot:oe(),root:oe()});be({subscription:oe(),result:z6});const W6=ei([be({type:ei([Nn("firstShredReceived"),Nn("completed"),Nn("optimisticConfirmation"),Nn("root")]),slot:oe(),timestamp:oe()}),be({type:Nn("createdBank"),parent:oe(),slot:oe(),timestamp:oe()}),be({type:Nn("frozen"),slot:oe(),timestamp:oe(),stats:be({numTransactionEntries:oe(),numSuccessfulTransactions:oe(),numFailedTransactions:oe(),maxTransactionsPerEntry:oe()})}),be({type:Nn("dead"),slot:oe(),timestamp:oe(),err:Ae()})]);be({subscription:oe(),result:W6});be({subscription:oe(),result:cm(ei([R6,P6]))});be({subscription:oe(),result:oe()});be({pubkey:Ae(),gossip:Re(Ae()),tpu:Re(Ae()),rpc:Re(Ae()),version:Re(Ae())});const Lb=be({votePubkey:Ae(),nodePubkey:Ae(),activatedStake:oe(),epochVoteAccount:po(),epochCredits:Be(ey([oe(),oe(),oe()])),commission:oe(),lastVote:oe(),rootSlot:Re(oe())});dn(be({current:Be(Lb),delinquent:Be(Lb)}));const K6=ei([Nn("processed"),Nn("confirmed"),Nn("finalized")]),Z6=be({slot:oe(),confirmations:Re(oe()),err:Hc,confirmationStatus:it(K6)});ds(Be(Re(Z6)));dn(oe());const Bk=be({accountKey:Vn,writableIndexes:Be(oe()),readonlyIndexes:Be(oe())}),sy=be({signatures:Be(Ae()),message:be({accountKeys:Be(Ae()),header:be({numRequiredSignatures:oe(),numReadonlySignedAccounts:oe(),numReadonlyUnsignedAccounts:oe()}),instructions:Be(be({accounts:Be(oe()),data:Ae(),programIdIndex:oe()})),recentBlockhash:Ae(),addressTableLookups:it(Be(Bk))})}),Rk=be({pubkey:Vn,signer:po(),writable:po(),source:it(ei([Nn("transaction"),Nn("lookupTable")]))}),Pk=be({accountKeys:Be(Rk),signatures:Be(Ae())}),Uk=be({parsed:Iu(),program:Ae(),programId:Vn}),Fk=be({accounts:Be(Vn),data:Ae(),programId:Vn}),Q6=ei([Fk,Uk]),H6=ei([be({parsed:Iu(),program:Ae(),programId:Ae()}),be({accounts:Be(Ae()),data:Ae(),programId:Ae()})]),Lk=Zd(Q6,H6,n=>"accounts"in n?vd(n,Fk):vd(n,Uk)),$k=be({signatures:Be(Ae()),message:be({accountKeys:Be(Rk),instructions:Be(Lk),recentBlockhash:Ae(),addressTableLookups:it(Re(Be(Bk)))})}),dp=be({accountIndex:oe(),mint:Ae(),owner:it(Ae()),uiTokenAmount:L6}),Vk=be({writable:Be(Vn),readonly:Be(Vn)}),lm=be({err:Hc,fee:oe(),innerInstructions:it(Re(Be(be({index:oe(),instructions:Be(be({accounts:Be(oe()),data:Ae(),programIdIndex:oe()}))})))),preBalances:Be(oe()),postBalances:Be(oe()),logMessages:it(Re(Be(Ae()))),preTokenBalances:it(Re(Be(dp))),postTokenBalances:it(Re(Be(dp))),loadedAddresses:it(Vk),computeUnitsConsumed:it(oe())}),oy=be({err:Hc,fee:oe(),innerInstructions:it(Re(Be(be({index:oe(),instructions:Be(Lk)})))),preBalances:Be(oe()),postBalances:Be(oe()),logMessages:it(Re(Be(Ae()))),preTokenBalances:it(Re(Be(dp))),postTokenBalances:it(Re(Be(dp))),loadedAddresses:it(Vk),computeUnitsConsumed:it(oe())}),xu=ei([Nn(0),Nn("legacy")]),Gc=be({pubkey:Ae(),lamports:oe(),postBalance:Re(oe()),rewardType:Re(Ae()),commission:it(Re(oe()))});dn(Re(be({blockhash:Ae(),previousBlockhash:Ae(),parentSlot:oe(),transactions:Be(be({transaction:sy,meta:Re(lm),version:it(xu)})),rewards:it(Be(Gc)),blockTime:Re(oe()),blockHeight:Re(oe())})));dn(Re(be({blockhash:Ae(),previousBlockhash:Ae(),parentSlot:oe(),rewards:it(Be(Gc)),blockTime:Re(oe()),blockHeight:Re(oe())})));dn(Re(be({blockhash:Ae(),previousBlockhash:Ae(),parentSlot:oe(),transactions:Be(be({transaction:Pk,meta:Re(lm),version:it(xu)})),rewards:it(Be(Gc)),blockTime:Re(oe()),blockHeight:Re(oe())})));dn(Re(be({blockhash:Ae(),previousBlockhash:Ae(),parentSlot:oe(),transactions:Be(be({transaction:$k,meta:Re(oy),version:it(xu)})),rewards:it(Be(Gc)),blockTime:Re(oe()),blockHeight:Re(oe())})));dn(Re(be({blockhash:Ae(),previousBlockhash:Ae(),parentSlot:oe(),transactions:Be(be({transaction:Pk,meta:Re(oy),version:it(xu)})),rewards:it(Be(Gc)),blockTime:Re(oe()),blockHeight:Re(oe())})));dn(Re(be({blockhash:Ae(),previousBlockhash:Ae(),parentSlot:oe(),rewards:it(Be(Gc)),blockTime:Re(oe()),blockHeight:Re(oe())})));dn(Re(be({blockhash:Ae(),previousBlockhash:Ae(),parentSlot:oe(),transactions:Be(be({transaction:sy,meta:Re(lm)})),rewards:it(Be(Gc)),blockTime:Re(oe())})));dn(Re(be({blockhash:Ae(),previousBlockhash:Ae(),parentSlot:oe(),signatures:Be(Ae()),blockTime:Re(oe())})));dn(Re(be({slot:oe(),meta:Re(lm),blockTime:it(Re(oe())),transaction:sy,version:it(xu)})));dn(Re(be({slot:oe(),transaction:$k,meta:Re(oy),blockTime:it(Re(oe())),version:it(xu)})));ds(be({blockhash:Ae(),feeCalculator:be({lamportsPerSignature:oe()})}));ds(be({blockhash:Ae(),lastValidBlockHeight:oe()}));ds(po());const G6=be({slot:oe(),numTransactions:oe(),numSlots:oe(),samplePeriodSecs:oe()});dn(Be(G6));ds(Re(be({feeCalculator:be({lamportsPerSignature:oe()})})));dn(Ae());dn(Ae());const Y6=be({err:Hc,logs:Be(Ae()),signature:Ae()});be({result:cm(Y6),subscription:oe()});Object.freeze({CreateLookupTable:{index:0,layout:Qe([Je("instruction"),mu("recentSlot"),Dn("bumpSeed")])},FreezeLookupTable:{index:1,layout:Qe([Je("instruction")])},ExtendLookupTable:{index:2,layout:Qe([Je("instruction"),mu(),co(Dt(),Fc(Je(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Qe([Je("instruction")])},CloseLookupTable:{index:4,layout:Qe([Je("instruction")])}});new Tt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Qe([Dn("instruction"),Je("units"),Je("additionalFee")])},RequestHeapFrame:{index:1,layout:Qe([Dn("instruction"),Je("bytes")])},SetComputeUnitLimit:{index:2,layout:Qe([Dn("instruction"),Je("units")])},SetComputeUnitPrice:{index:3,layout:Qe([Dn("instruction"),mu("microLamports")])}});new Tt("ComputeBudget111111111111111111111111111111");Qe([Dn("numSignatures"),Dn("padding"),Xi("signatureOffset"),Xi("signatureInstructionIndex"),Xi("publicKeyOffset"),Xi("publicKeyInstructionIndex"),Xi("messageDataOffset"),Xi("messageDataSize"),Xi("messageInstructionIndex")]);new Tt("Ed25519SigVerify111111111111111111111111111");Fw.utils.isValidPrivateKey;Fw.getPublicKey;Qe([Dn("numSignatures"),Xi("signatureOffset"),Dn("signatureInstructionIndex"),Xi("ethAddressOffset"),Dn("ethAddressInstructionIndex"),Xi("messageDataOffset"),Xi("messageDataSize"),Dn("messageInstructionIndex"),Ji(20,"ethAddress"),Ji(64,"signature"),Dn("recoveryId")]);new Tt("KeccakSecp256k11111111111111111111111111111");var qk;new Tt("StakeConfig11111111111111111111111111111111");class zk{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}qk=zk;zk.default=new qk(0,0,Tt.default);Object.freeze({Initialize:{index:0,layout:Qe([Je("instruction"),b6(),_6()])},Authorize:{index:1,layout:Qe([Je("instruction"),Dt("newAuthorized"),Je("stakeAuthorizationType")])},Delegate:{index:2,layout:Qe([Je("instruction")])},Split:{index:3,layout:Qe([Je("instruction"),ki("lamports")])},Withdraw:{index:4,layout:Qe([Je("instruction"),ki("lamports")])},Deactivate:{index:5,layout:Qe([Je("instruction")])},Merge:{index:7,layout:Qe([Je("instruction")])},AuthorizeWithSeed:{index:8,layout:Qe([Je("instruction"),Dt("newAuthorized"),Je("stakeAuthorizationType"),El("authoritySeed"),Dt("authorityOwner")])}});new Tt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Qe([Je("instruction"),v6()])},Authorize:{index:1,layout:Qe([Je("instruction"),Dt("newAuthorized"),Je("voteAuthorizationType")])},Withdraw:{index:3,layout:Qe([Je("instruction"),ki("lamports")])},UpdateValidatorIdentity:{index:4,layout:Qe([Je("instruction")])},AuthorizeWithSeed:{index:10,layout:Qe([Je("instruction"),k6()])}});new Tt("Vote111111111111111111111111111111111111111");new Tt("Va1idator1nfo111111111111111111111111111111");be({name:Ae(),website:it(Ae()),details:it(Ae()),iconUrl:it(Ae()),keybaseUsername:it(Ae())});new Tt("Vote111111111111111111111111111111111111111");Qe([Dt("nodePubkey"),Dt("authorizedWithdrawer"),Dn("commission"),kr(),co(Qe([kr("slot"),Je("confirmationCount")]),Fc(Je(),-8),"votes"),Dn("rootSlotValid"),kr("rootSlot"),kr(),co(Qe([kr("epoch"),Dt("authorizedVoter")]),Fc(Je(),-8),"authorizedVoters"),Qe([co(Qe([Dt("authorizedPubkey"),kr("epochOfLastAuthorizedSwitch"),kr("targetEpoch")]),32,"buf"),kr("idx"),Dn("isEmpty")],"priorVoters"),kr(),co(Qe([kr("epoch"),kr("credits"),kr("prevCredits")]),Fc(Je(),-8),"epochCredits"),Qe([kr("slot"),kr("timestamp")],"lastTimestamp")]);var Ho=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Wk(){throw new Error("setTimeout has not been defined")}function Kk(){throw new Error("clearTimeout has not been defined")}var ma=Wk,ga=Kk;typeof Ho.setTimeout=="function"&&(ma=setTimeout);typeof Ho.clearTimeout=="function"&&(ga=clearTimeout);function Zk(n){if(ma===setTimeout)return setTimeout(n,0);if((ma===Wk||!ma)&&setTimeout)return ma=setTimeout,setTimeout(n,0);try{return ma(n,0)}catch{try{return ma.call(null,n,0)}catch{return ma.call(this,n,0)}}}function X6(n){if(ga===clearTimeout)return clearTimeout(n);if((ga===Kk||!ga)&&clearTimeout)return ga=clearTimeout,clearTimeout(n);try{return ga(n)}catch{try{return ga.call(null,n)}catch{return ga.call(this,n)}}}var $o=[],Wl=!1,Tc,tf=-1;function J6(){!Wl||!Tc||(Wl=!1,Tc.length?$o=Tc.concat($o):tf=-1,$o.length&&Qk())}function Qk(){if(!Wl){var n=Zk(J6);Wl=!0;for(var e=$o.length;e;){for(Tc=$o,$o=[];++tf<e;)Tc&&Tc[tf].run();tf=-1,e=$o.length}Tc=null,Wl=!1,X6(n)}}function eO(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];$o.push(new Hk(n,e)),$o.length===1&&!Wl&&Zk(Qk)}function Hk(n,e){this.fun=n,this.array=e}Hk.prototype.run=function(){this.fun.apply(null,this.array)};var tO="browser",nO="browser",rO=!0,iO={},sO=[],oO="",aO={},cO={},lO={};function Yc(){}var uO=Yc,dO=Yc,hO=Yc,fO=Yc,pO=Yc,mO=Yc,gO=Yc;function wO(n){throw new Error("process.binding is not supported")}function yO(){return"/"}function bO(n){throw new Error("process.chdir is not supported")}function _O(){return 0}var yl=Ho.performance||{},vO=yl.now||yl.mozNow||yl.msNow||yl.oNow||yl.webkitNow||function(){return new Date().getTime()};function kO(n){var e=vO.call(yl)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return n&&(t=t-n[0],r=r-n[1],r<0&&(t--,r+=1e9)),[t,r]}var SO=new Date;function CO(){var n=new Date,e=n-SO;return e/1e3}var nf={nextTick:eO,title:tO,browser:rO,env:iO,argv:sO,version:oO,versions:aO,on:uO,addListener:dO,once:hO,off:fO,removeListener:pO,removeAllListeners:mO,emit:gO,binding:wO,cwd:yO,chdir:bO,umask:_O,hrtime:kO,platform:nO,release:cO,config:lO,uptime:CO},AO=function(n,e,t,r,i,s,o,a){if(nf.env.NODE_ENV!=="production"&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[t,r,i,s,o,a],u=0;c=new Error(e.replace(/%s/g,function(){return l[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Kl=AO;const TO={56:"https://bsc-dataseed1.binance.org",97:"https://data-seed-prebsc-1-s1.binance.org:8545",137:"https://rpc-mainnet.maticvigil.com/",80001:"https://rpc-mumbai.matic.today/",43114:"https://api.avax.network/ext/bc/C/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc"},IO={1:"ethereum",4:"ethereum",56:"bsc",97:"bsc",137:"polygon",80001:"polygon",43114:"avalanche",43113:"avalanche"},xO={1:"mainnet",4:"rinkeby",56:"mainnet",97:"testnet",137:"mainnet",80001:"testnet",43114:"mainnet",43113:"testnet"},EO={1:"https://wallet.blocto.app",4:"https://wallet-testnet.blocto.app",56:"https://wallet.blocto.app",97:"https://wallet-testnet.blocto.app",137:"https://wallet.blocto.app",80001:"https://wallet-testnet.blocto.app",43114:"https://wallet.blocto.app",43113:"https://wallet-testnet.blocto.app"},MO={devnet:"https://wallet-testnet.blocto.app",testnet:"https://wallet-testnet.blocto.app","mainnet-beta":"https://wallet.blocto.app"},OO=["devnet","testnet","mainnet-beta"],NO={1:"https://wallet.blocto.app",2:"https://wallet-testnet.blocto.app",3:"https://wallet-testnet.blocto.app",4:"https://wallet-testnet.blocto.app",5:"https://wallet.blocto.app"};var kc;(function(n){n.Mainnet="mainnet",n.Testnet="testnet",n.Devnet="devnet",n.Testing="testing",n.Premainnet="premainnet"})(kc||(kc={}));const jO={1:kc.Mainnet,2:kc.Testnet,3:kc.Devnet,4:kc.Testing,5:kc.Premainnet},DO={1:"https://fullnode.mainnet.aptoslabs.com/v1",2:"https://fullnode.testnet.aptoslabs.com/v1",3:"https://fullnode.devnet.aptoslabs.com/v1",4:"",5:"https://premainnet.aptosdev.com/v1"},$b=["connect","disconnect","message","chainChanged","accountsChanged"],ay=86400*1e3,BO="sdk.session";class cy{constructor(){this.isBlocto=!0,this.isConnecting=!1,this.connected=!1,this.eventListeners={},this.code=null,this.sessionKey=BO,this.off=this.removeListener,$b.forEach(e=>{this.eventListeners[e]=[]})}async request(e){}on(e,t){$b.includes(e)&&this.eventListeners[e].push(t)}once(){}removeListener(e,t){const i=this.eventListeners[e].findIndex(s=>s===t);i!==-1&&this.eventListeners[e].splice(i,1)}}const RO="width:100vw;height:100%;position:fixed;top:0;left:0;z-index:20000;border:none;";function $a(n){const e=document.createElement("iframe");return e.setAttribute("src",n),e.setAttribute("style",RO),e}function Va(n){document.body.appendChild(n)}function Ur(n){const e=n&&n.parentNode;e&&e.removeChild instanceof Function&&e.removeChild(n)}var lo=(n,e,t=window)=>{function r(i){e(i,()=>t.removeEventListener(n,r))}t.addEventListener(n,r)};class PO{constructor(){this.storage={}}getItem(e){return this[e]||null}setItem(e,t){this.storage[e]=t}removeItem(e){delete this.storage[e]}}const Gk=typeof window<"u"?window.memoryStorage:new PO;typeof window<"u"&&(window.memoryStorage=Gk);const UO=()=>{if(typeof window>"u")return!1;try{window.localStorage.setItem("local_storage_supported","1");const n=window.localStorage.getItem("local_storage_supported");return window.localStorage.removeItem("local_storage_supported"),n==="1"}catch{return!1}},ly=UO()?window.localStorage:Gk,FO=(n,e=null)=>{const t=ly.getItem(n);try{return JSON.parse(t)||e}catch{return t||e}},uy=(n,e=null)=>{const t=FO(n,null);return t?new Date().getTime()>t.expiry?(Xk(n),e):t.value:e},Yk=(n,e)=>ly.setItem(n,typeof e=="string"?e:JSON.stringify(e)),dy=(n,e,t)=>Yk(n,{value:e,expiry:new Date().getTime()+t}),Xk=n=>{Yk(n,""),ly.removeItem(n)};async function gu(n,e){if(n.status===403)throw e.code=null,Xk(e.sessionKey),new Error("[Blocto SDK]: Session expired!");return n.json()}class LO extends cy{constructor({chainId:e="0x1",rpc:t,server:r,appId:i}){super(),this.accounts=[],Kl(e,"'chainId' is required"),typeof e=="number"?this.chainId=e:e.includes("0x")?this.chainId=parseInt(e,16):this.chainId=parseInt(e,10),this.networkId=this.chainId,this.chain=IO[this.chainId],this.net=xO[this.chainId],Kl(this.chain,`unsupported 'chainId': ${this.chainId}`),this.rpc=t||TO[this.chainId]||{}.RPC||"",Kl(this.rpc,"'rpc' is required for Ethereum"),this.server=r||EO[this.chainId]||{}.SERVER||"",this.appId=i||{}.APP_ID}tryRetrieveSessionFromStorage(){const e=uy(this.sessionKey,{}),t=e&&e.code,r=e&&e.address&&e.address[this.chain];this.connected=!!(t&&r),this.code=t||null,this.accounts=r?[r]:[]}checkNetworkMatched(){const e=window.ethereum;if(e&&e.isBlocto&&parseInt(e.chainId,16)!==this.chainId)throw new Error("Blocto SDK network mismatched")}async send(e,t){switch(!0){case t instanceof Function:return this.sendAsync(e,t);case(typeof e=="string"&&Array.isArray(t)):return this.sendAsync({method:e,params:t});default:return this.sendAsync(e)}}async sendAsync(e,t){const r=new Promise(i=>{if(Array.isArray(e)){const s=e.filter(u=>u.method==="eth_sendTransaction").map(u=>u.params[0]),o=Math.floor(Math.random()*1e4),a={method:"blocto_sendBatchTransaction",params:s},c=this.request(a),l=e.map(({method:u,params:d},h)=>u==="eth_sendTransaction"?c:this.request({id:o+h+1,jsonrpc:"2.0",method:u,params:d}));Promise.allSettled(l).then(u=>i(u.map((d,h)=>({id:o+h+1,jsonrpc:"2.0",result:d.status==="fulfilled"?d.value:void 0,error:d.status!=="fulfilled"?d.reason:void 0}))))}else this.request(e).then(i)});if(t)r.then(i=>t(null,i)).catch(i=>t(i));else return r}async request(e){const t=window.ethereum;if(t&&t.isBlocto)return t.request(e);this.connected||await this.enable();try{let r=null,i=null;switch(e.method){case"eth_requestAccounts":this.accounts=await this.fetchAccounts();case"eth_accounts":i=this.accounts.length?this.accounts:await this.fetchAccounts();break;case"eth_coinbase":{i=this.accounts[0];break}case"eth_chainId":{i=this.chainId,i=`0x${i.toString(16)}`;break}case"net_version":{i=this.networkId||this.chainId,i=`0x${i.toString(16)}`;break}case"eth_signTypedData_v3":case"eth_signTypedData":case"eth_signTypedData_v4":case"personal_sign":case"eth_sign":{i=await this.handleSign(e);break}case"blocto_sendBatchTransaction":case"eth_sendTransaction":i=await this.handleSendTransaction(e);break;case"eth_signTransaction":case"eth_sendRawTransaction":i=null;break;default:r=await this.handleReadRequests(e)}if(r&&!r.result&&r.error){const s=r.error.message?r.error.message:"Request failed";throw new Error(s)}return r?r.result:i}catch(r){throw console.error(r),r}}async enable(){const e=window.ethereum;if(e&&e.isBlocto){if(parseInt(e.chainId,16)!==this.chainId)try{await e.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${this.chainId.toString(16)}`}]}),this.accounts=[e.address]}catch(t){console.error(t)}return new Promise((t,r)=>setTimeout(()=>e.enable().then(t).catch(r),10))}return this.tryRetrieveSessionFromStorage(),new Promise((t,r)=>{if(typeof window>"u"&&r("Currently only supported in browser"),this.connected)return t(this.accounts);const i=encodeURIComponent(window.location.origin),s=$a(`${this.server}/authn?l6n=${i}&chain=${this.chain}`);Va(s),lo("message",(o,a)=>{const c=o;if(c.origin===this.server){if(c.data.type==="FCL::CHALLENGE::RESPONSE"){a(),Ur(s),this.code=c.data.code,this.connected=!0,this.eventListeners.connect.forEach(u=>u(this.chainId));const l=c.data.address;this.accounts=l?[l[this.chain]]:[],dy(this.sessionKey,{code:this.code,address:l},ay),t(this.accounts)}c.data.type==="FCL::CHALLENGE::CANCEL"&&(a(),Ur(s),r(new Error("User declined the login request")))}})})}async fetchAccounts(){this.checkNetworkMatched();const{accounts:e}=await fetch(`${this.server}/api/${this.chain}/accounts?code=${this.code}`).then(t=>gu(t,this));return this.accounts=e,e}async handleReadRequests(e){return this.checkNetworkMatched(),fetch(this.rpc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:1,jsonrpc:"2.0",...e})}).then(t=>t.json())}async handleSign({method:e,params:t}){const r=`${this.server}/user-signature/${this.chain}`,i=$a(r);Va(i);let s="";return Array.isArray(t)&&(e==="eth_sign"?s=t[1].slice(2):e==="personal_sign"?s=t[0].slice(2):["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4"].includes(e)&&(s=t[1])),lo("message",(o,a)=>{const c=o;c.origin===this.server&&c.data.type==="ETH:FRAME:READY"&&(i.contentWindow&&i.contentWindow.postMessage({type:"ETH:FRAME:READY:RESPONSE",method:e,message:s,chain:this.chain},r),a())}),new Promise((o,a)=>lo("message",(c,l)=>{const u=c;u.origin===this.server&&u.data.type==="ETH:FRAME:RESPONSE"&&(u.data.status==="APPROVED"&&(l(),Ur(i),o(u.data.signature)),u.data.status==="DECLINED"&&(l(),Ur(i),a(new Error("User declined the signing request"))))}))}async handleSendTransaction(e){this.checkNetworkMatched();const{authorizationId:t}=await fetch(`${this.server}/api/${this.chain}/authz?code=${this.code}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.params)}).then(i=>gu(i,this));if(typeof window>"u")throw new Error("Currently only supported in browser");const r=$a(`${this.server}/authz/${this.chain}/${t}`);return Va(r),new Promise((i,s)=>lo("message",(o,a)=>{const c=o;c.origin===this.server&&c.data.type==="ETH:FRAME:RESPONSE"&&(c.data.status==="APPROVED"&&(a(),Ur(r),i(c.data.txHash)),c.data.status==="DECLINED"&&(a(),Ur(r),s(new Error("User declined to send the transaction"))))}))}}var oo=[],Hi=[],$O=typeof Uint8Array<"u"?Uint8Array:Array,hy=!1;function Jk(){hy=!0;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=n.length;e<t;++e)oo[e]=n[e],Hi[n.charCodeAt(e)]=e;Hi["-".charCodeAt(0)]=62,Hi["_".charCodeAt(0)]=63}function VO(n){hy||Jk();var e,t,r,i,s,o,a=n.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=n[a-2]==="="?2:n[a-1]==="="?1:0,o=new $O(a*3/4-s),r=s>0?a-4:a;var c=0;for(e=0,t=0;e<r;e+=4,t+=3)i=Hi[n.charCodeAt(e)]<<18|Hi[n.charCodeAt(e+1)]<<12|Hi[n.charCodeAt(e+2)]<<6|Hi[n.charCodeAt(e+3)],o[c++]=i>>16&255,o[c++]=i>>8&255,o[c++]=i&255;return s===2?(i=Hi[n.charCodeAt(e)]<<2|Hi[n.charCodeAt(e+1)]>>4,o[c++]=i&255):s===1&&(i=Hi[n.charCodeAt(e)]<<10|Hi[n.charCodeAt(e+1)]<<4|Hi[n.charCodeAt(e+2)]>>2,o[c++]=i>>8&255,o[c++]=i&255),o}function qO(n){return oo[n>>18&63]+oo[n>>12&63]+oo[n>>6&63]+oo[n&63]}function zO(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16)+(n[s+1]<<8)+n[s+2],i.push(qO(r));return i.join("")}function Vb(n){hy||Jk();for(var e,t=n.length,r=t%3,i="",s=[],o=16383,a=0,c=t-r;a<c;a+=o)s.push(zO(n,a,a+o>c?c:a+o));return r===1?(e=n[t-1],i+=oo[e>>2],i+=oo[e<<4&63],i+="=="):r===2&&(e=(n[t-2]<<8)+n[t-1],i+=oo[e>>10],i+=oo[e>>4&63],i+=oo[e<<2&63],i+="="),s.push(i),s.join("")}function um(n,e,t,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=t?i-1:0,h=t?-1:1,f=n[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=s*256+n[e+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+n[e+d],d+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(f?-1:1)*o*Math.pow(2,s-r)}function eS(n,e,t,r,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,m=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;n[t+f]=a&255,f+=m,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;n[t+f]=o&255,f+=m,o/=256,l-=8);n[t+f-m]|=w*128}var WO={}.toString,tS=Array.isArray||function(n){return WO.call(n)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var nS=50;we.TYPED_ARRAY_SUPPORT=Ho.TYPED_ARRAY_SUPPORT!==void 0?Ho.TYPED_ARRAY_SUPPORT:!0;var KO=hp();function hp(){return we.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Vo(n,e){if(hp()<e)throw new RangeError("Invalid typed array length");return we.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(e),n.__proto__=we.prototype):(n===null&&(n=new we(e)),n.length=e),n}function we(n,e,t){if(!we.TYPED_ARRAY_SUPPORT&&!(this instanceof we))return new we(n,e,t);if(typeof n=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return fy(this,n)}return rS(this,n,e,t)}we.poolSize=8192;we._augment=function(n){return n.__proto__=we.prototype,n};function rS(n,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?HO(n,e,t,r):typeof e=="string"?QO(n,e,t):GO(n,e)}we.from=function(n,e,t){return rS(null,n,e,t)};we.TYPED_ARRAY_SUPPORT&&(we.prototype.__proto__=Uint8Array.prototype,we.__proto__=Uint8Array);function iS(n){if(typeof n!="number")throw new TypeError('"size" argument must be a number');if(n<0)throw new RangeError('"size" argument must not be negative')}function ZO(n,e,t,r){return iS(e),e<=0?Vo(n,e):t!==void 0?typeof r=="string"?Vo(n,e).fill(t,r):Vo(n,e).fill(t):Vo(n,e)}we.alloc=function(n,e,t){return ZO(null,n,e,t)};function fy(n,e){if(iS(e),n=Vo(n,e<0?0:py(e)|0),!we.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)n[t]=0;return n}we.allocUnsafe=function(n){return fy(null,n)};we.allocUnsafeSlow=function(n){return fy(null,n)};function QO(n,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!we.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=sS(e,t)|0;n=Vo(n,r);var i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function y0(n,e){var t=e.length<0?0:py(e.length)|0;n=Vo(n,t);for(var r=0;r<t;r+=1)n[r]=e[r]&255;return n}function HO(n,e,t,r){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),we.TYPED_ARRAY_SUPPORT?(n=e,n.__proto__=we.prototype):n=y0(n,e),n}function GO(n,e){if(mo(e)){var t=py(e.length)|0;return n=Vo(n,t),n.length===0||e.copy(n,0,0,t),n}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||gN(e.length)?Vo(n,0):y0(n,e);if(e.type==="Buffer"&&tS(e.data))return y0(n,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function py(n){if(n>=hp())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hp().toString(16)+" bytes");return n|0}function YO(n){return+n!=n&&(n=0),we.alloc(+n)}we.isBuffer=fS;function mo(n){return!!(n!=null&&n._isBuffer)}we.compare=function(e,t){if(!mo(e)||!mo(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,s=0,o=Math.min(r,i);s<o;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0};we.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};we.concat=function(e,t){if(!tS(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return we.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=we.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var o=e[r];if(!mo(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,s),s+=o.length}return i};function sS(n,e){if(mo(n))return n.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(n)||n instanceof ArrayBuffer))return n.byteLength;typeof n!="string"&&(n=""+n);var t=n.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return fp(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return hS(n).length;default:if(r)return fp(n).length;e=(""+e).toLowerCase(),r=!0}}we.byteLength=sS;function XO(n,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return cN(this,e,t);case"utf8":case"utf-8":return cS(this,e,t);case"ascii":return oN(this,e,t);case"latin1":case"binary":return aN(this,e,t);case"base64":return iN(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lN(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}we.prototype._isBuffer=!0;function Ic(n,e,t){var r=n[e];n[e]=n[t],n[t]=r}we.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ic(this,t,t+1);return this};we.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ic(this,t,t+3),Ic(this,t+1,t+2);return this};we.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ic(this,t,t+7),Ic(this,t+1,t+6),Ic(this,t+2,t+5),Ic(this,t+3,t+4);return this};we.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?cS(this,0,e):XO.apply(this,arguments)};we.prototype.equals=function(e){if(!mo(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:we.compare(this,e)===0};we.prototype.inspect=function(){var e="",t=nS;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};we.prototype.compare=function(e,t,r,i,s){if(!mo(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var o=s-i,a=r-t,c=Math.min(o,a),l=this.slice(i,s),u=e.slice(t,r),d=0;d<c;++d)if(l[d]!==u[d]){o=l[d],a=u[d];break}return o<a?-1:a<o?1:0};function oS(n,e,t,r,i){if(n.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(i)return-1;t=n.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=we.from(e,r)),mo(e))return e.length===0?-1:qb(n,e,t,r,i);if(typeof e=="number")return e=e&255,we.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):qb(n,[e],t,r,i);throw new TypeError("val must be string, number or Buffer")}function qb(n,e,t,r,i){var s=1,o=n.length,a=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||e.length<2)return-1;s=2,o/=2,a/=2,t/=2}function c(f,m){return s===1?f[m]:f.readUInt16BE(m*s)}var l;if(i){var u=-1;for(l=t;l<o;l++)if(c(n,l)===c(e,u===-1?0:l-u)){if(u===-1&&(u=l),l-u+1===a)return u*s}else u!==-1&&(l-=l-u),u=-1}else for(t+a>o&&(t=o-a),l=t;l>=0;l--){for(var d=!0,h=0;h<a;h++)if(c(n,l+h)!==c(e,h)){d=!1;break}if(d)return l}return-1}we.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};we.prototype.indexOf=function(e,t,r){return oS(this,e,t,r,!0)};we.prototype.lastIndexOf=function(e,t,r){return oS(this,e,t,r,!1)};function JO(n,e,t,r){t=Number(t)||0;var i=n.length-t;r?(r=Number(r),r>i&&(r=i)):r=i;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(o*2,2),16);if(isNaN(a))return o;n[t+o]=a}return o}function eN(n,e,t,r){return fm(fp(e,n.length-t),n,t,r)}function aS(n,e,t,r){return fm(pN(e),n,t,r)}function tN(n,e,t,r){return aS(n,e,t,r)}function nN(n,e,t,r){return fm(hS(e),n,t,r)}function rN(n,e,t,r){return fm(mN(e,n.length-t),n,t,r)}we.prototype.write=function(e,t,r,i){if(t===void 0)i="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")i=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return JO(this,e,t,r);case"utf8":case"utf-8":return eN(this,e,t,r);case"ascii":return aS(this,e,t,r);case"latin1":case"binary":return tN(this,e,t,r);case"base64":return nN(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rN(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};we.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function iN(n,e,t){return e===0&&t===n.length?Vb(n):Vb(n.slice(e,t))}function cS(n,e,t){t=Math.min(n.length,t);for(var r=[],i=e;i<t;){var s=n[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=t){var c,l,u,d;switch(a){case 1:s<128&&(o=s);break;case 2:c=n[i+1],(c&192)===128&&(d=(s&31)<<6|c&63,d>127&&(o=d));break;case 3:c=n[i+1],l=n[i+2],(c&192)===128&&(l&192)===128&&(d=(s&15)<<12|(c&63)<<6|l&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:c=n[i+1],l=n[i+2],u=n[i+3],(c&192)===128&&(l&192)===128&&(u&192)===128&&(d=(s&15)<<18|(c&63)<<12|(l&63)<<6|u&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),i+=a}return sN(r)}var zb=4096;function sN(n){var e=n.length;if(e<=zb)return String.fromCharCode.apply(String,n);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,n.slice(r,r+=zb));return t}function oN(n,e,t){var r="";t=Math.min(n.length,t);for(var i=e;i<t;++i)r+=String.fromCharCode(n[i]&127);return r}function aN(n,e,t){var r="";t=Math.min(n.length,t);for(var i=e;i<t;++i)r+=String.fromCharCode(n[i]);return r}function cN(n,e,t){var r=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var i="",s=e;s<t;++s)i+=fN(n[s]);return i}function lN(n,e,t){for(var r=n.slice(e,t),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+r[s+1]*256);return i}we.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var i;if(we.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=we.prototype;else{var s=t-e;i=new we(s,void 0);for(var o=0;o<s;++o)i[o]=this[o+e]}return i};function yr(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}we.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||yr(e,t,this.length);for(var i=this[e],s=1,o=0;++o<t&&(s*=256);)i+=this[e+o]*s;return i};we.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||yr(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i};we.prototype.readUInt8=function(e,t){return t||yr(e,1,this.length),this[e]};we.prototype.readUInt16LE=function(e,t){return t||yr(e,2,this.length),this[e]|this[e+1]<<8};we.prototype.readUInt16BE=function(e,t){return t||yr(e,2,this.length),this[e]<<8|this[e+1]};we.prototype.readUInt32LE=function(e,t){return t||yr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};we.prototype.readUInt32BE=function(e,t){return t||yr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};we.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||yr(e,t,this.length);for(var i=this[e],s=1,o=0;++o<t&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};we.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||yr(e,t,this.length);for(var i=t,s=1,o=this[e+--i];i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};we.prototype.readInt8=function(e,t){return t||yr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};we.prototype.readInt16LE=function(e,t){t||yr(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};we.prototype.readInt16BE=function(e,t){t||yr(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};we.prototype.readInt32LE=function(e,t){return t||yr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};we.prototype.readInt32BE=function(e,t){return t||yr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};we.prototype.readFloatLE=function(e,t){return t||yr(e,4,this.length),um(this,e,!0,23,4)};we.prototype.readFloatBE=function(e,t){return t||yr(e,4,this.length),um(this,e,!1,23,4)};we.prototype.readDoubleLE=function(e,t){return t||yr(e,8,this.length),um(this,e,!0,52,8)};we.prototype.readDoubleBE=function(e,t){return t||yr(e,8,this.length),um(this,e,!1,52,8)};function gi(n,e,t,r,i,s){if(!mo(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>n.length)throw new RangeError("Index out of range")}we.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t=t|0,r=r|0,!i){var s=Math.pow(2,8*r)-1;gi(this,e,t,r,s,0)}var o=1,a=0;for(this[t]=e&255;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r};we.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t=t|0,r=r|0,!i){var s=Math.pow(2,8*r)-1;gi(this,e,t,r,s,0)}var o=r-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r};we.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,1,255,0),we.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function dm(n,e,t,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(n.length-t,2);i<s;++i)n[t+i]=(e&255<<8*(r?i:1-i))>>>(r?i:1-i)*8}we.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,2,65535,0),we.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):dm(this,e,t,!0),t+2};we.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,2,65535,0),we.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):dm(this,e,t,!1),t+2};function hm(n,e,t,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(n.length-t,4);i<s;++i)n[t+i]=e>>>(r?i:3-i)*8&255}we.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,4,4294967295,0),we.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):hm(this,e,t,!0),t+4};we.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,4,4294967295,0),we.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):hm(this,e,t,!1),t+4};we.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*r-1);gi(this,e,t,r,s-1,-s)}var o=0,a=1,c=0;for(this[t]=e&255;++o<r&&(a*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+r};we.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*r-1);gi(this,e,t,r,s-1,-s)}var o=r-1,a=1,c=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+r};we.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,1,127,-128),we.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};we.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,2,32767,-32768),we.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):dm(this,e,t,!0),t+2};we.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,2,32767,-32768),we.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):dm(this,e,t,!1),t+2};we.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,4,2147483647,-2147483648),we.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):hm(this,e,t,!0),t+4};we.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||gi(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),we.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):hm(this,e,t,!1),t+4};function lS(n,e,t,r,i,s){if(t+r>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function uS(n,e,t,r,i){return i||lS(n,e,t,4),eS(n,e,t,r,23,4),t+4}we.prototype.writeFloatLE=function(e,t,r){return uS(this,e,t,!0,r)};we.prototype.writeFloatBE=function(e,t,r){return uS(this,e,t,!1,r)};function dS(n,e,t,r,i){return i||lS(n,e,t,8),eS(n,e,t,r,52,8),t+8}we.prototype.writeDoubleLE=function(e,t,r){return dS(this,e,t,!0,r)};we.prototype.writeDoubleBE=function(e,t,r){return dS(this,e,t,!1,r)};we.prototype.copy=function(e,t,r,i){if(r||(r=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var s=i-r,o;if(this===e&&r<t&&t<i)for(o=s-1;o>=0;--o)e[o+t]=this[o+r];else if(s<1e3||!we.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s};we.prototype.fill=function(e,t,r,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!we.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<r;++o)this[o]=e;else{var a=mo(e)?e:fp(new we(e,i).toString()),c=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%c]}return this};var uN=/[^+\/0-9A-Za-z-_]/g;function dN(n){if(n=hN(n).replace(uN,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function hN(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function fN(n){return n<16?"0"+n.toString(16):n.toString(16)}function fp(n,e){e=e||1/0;for(var t,r=n.length,i=null,s=[],o=0;o<r;++o){if(t=n.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function pN(n){for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function mN(n,e){for(var t,r,i,s=[],o=0;o<n.length&&!((e-=2)<0);++o)t=n.charCodeAt(o),r=t>>8,i=t%256,s.push(i),s.push(r);return s}function hS(n){return VO(dN(n))}function fm(n,e,t,r){for(var i=0;i<r&&!(i+t>=e.length||i>=n.length);++i)e[i+t]=n[i];return i}function gN(n){return n!==n}function fS(n){return n!=null&&(!!n._isBuffer||pS(n)||wN(n))}function pS(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function wN(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&pS(n.slice(0,0))}var Sh=Object.freeze({__proto__:null,Buffer:we,INSPECT_MAX_BYTES:nS,SlowBuffer:YO,isBuffer:fS,kMaxLength:KO});function yN(n,e){return e={exports:{}},n(e,e.exports),e.exports}function my(n){return n&&n.default||n}var mS=yN(function(n,e){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var t=Sh.Buffer;function r(s,o){for(var a in s)o[a]=s[a]}t.from&&t.alloc&&t.allocUnsafe&&t.allocUnsafeSlow?n.exports=Sh:(r(Sh,e),e.Buffer=i);function i(s,o,a){return t(s,o,a)}i.prototype=Object.create(t.prototype),r(t,i),i.from=function(s,o,a){if(typeof s=="number")throw new TypeError("Argument must not be a number");return t(s,o,a)},i.alloc=function(s,o,a){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=t(s);return o!==void 0?typeof a=="string"?c.fill(o,a):c.fill(o):c.fill(0),c},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return t(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return Sh.SlowBuffer(s)}});mS.Buffer;var Ch=mS.Buffer;function bN(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=Ch.from(f)),!Ch.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var m=0,w=0,y=0,C=f.length;y!==C&&f[y]===0;)y++,m++;for(var A=(C-y)*l+1>>>0,M=new Uint8Array(A);y!==C;){for(var H=f[y],G=0,q=A-1;(H!==0||G<w)&&q!==-1;q--,G++)H+=256*M[q]>>>0,M[q]=H%o>>>0,H=H/o>>>0;if(H!==0)throw new Error("Non-zero carry");w=G,y++}for(var X=A-w;X!==A&&M[X]===0;)X++;for(var E=a.repeat(m);X<A;++X)E+=n.charAt(M[X]);return E}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return Ch.alloc(0);for(var m=0,w=0,y=0;f[m]===a;)w++,m++;for(var C=(f.length-m)*c+1>>>0,A=new Uint8Array(C);f[m];){var M=e[f.charCodeAt(m)];if(M===255)return;for(var H=0,G=C-1;(M!==0||H<y)&&G!==-1;G--,H++)M+=o*A[G]>>>0,A[G]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");y=H,m++}for(var q=C-y;q!==C&&A[q]===0;)q++;var X=Ch.allocUnsafe(w+(C-q));X.fill(0,0,w);for(var E=w;q!==C;)X[E++]=A[q++];return X}function h(f){var m=d(f);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var _N=bN,vN="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Wb=_N(vN);class kN extends cy{constructor({net:e="mainnet-beta",server:t,appId:r,rpc:i}){super(),this.accounts=[],Kl(e,"'net' is required"),Kl(OO.includes(e),"unsupported net"),this.net=e,this.rpc=i||(e==="mainnet-beta"?"https://free.rpcpool.com":`https://api.${e}.solana.com`),this.server=t||MO[this.net]||{}.SERVER||"",this.appId=r||{}.APP_ID}tryRetrieveSessionFromStorage(){const e=uy(this.sessionKey,{}),t=e&&e.code,r=e&&e.address&&e.address.solana;this.connected=!!(t&&r),this.code=t||null,this.accounts=r?[r]:[]}async request(e){this.connected||await this.connect();try{let t=null,r=null;switch(e.method){case"connect":r=await this.fetchAccounts();break;case"disconnect":this.disconnect();break;case"getAccounts":r=this.accounts.length?this.accounts:await this.fetchAccounts();break;case"getAccountInfo":{const i=await this.handleReadRequests(e),[s,o]=i.result.value.data;r={...i.result.value,data:we.from(s,o),owner:new Tt(i.result.value.owner)};break}case"convertToProgramWalletTransaction":r=await this.handleConvertTransaction(e);break;case"signAndSendTransaction":r=await this.handleSignAndSendTransaction(e);break;case"signTransaction":case"signAllTransactions":throw new Error(`Blocto is program wallet, which doesn't support ${e.method}. Use signAndSendTransaction instead.`);default:t=await this.handleReadRequests(e)}if(t&&!t.result&&t.error){const i=t.error.message?t.error.message:"Request failed";throw new Error(i)}return t?t.result:r}catch(t){throw console.error(t),t}}async connect(){const e=window.solana;return e&&e.isBlocto?new Promise(t=>{e.once("connect",r=>{this.accounts=[r.toBase58()],t()}),e.connect()}):(this.tryRetrieveSessionFromStorage(),new Promise((t,r)=>{if(typeof window>"u"&&r("Currently only supported in browser"),this.connected)return t();const i=encodeURIComponent(window.location.origin),s=$a(`${this.server}/authn?l6n=${i}&chain=solana`);Va(s),lo("message",(o,a)=>{const c=o;if(c.origin===this.server){if(c.data.type==="FCL::CHALLENGE::RESPONSE"){a(),Ur(s),this.code=c.data.code,this.connected=!0,this.eventListeners.connect.forEach(u=>u(this.net));const l=c.data.address;this.accounts=l?[l.solana]:[],dy(this.sessionKey,{code:this.code,address:l},ay),t()}c.data.type==="FCL::CHALLENGE::CANCEL"&&(a(),Ur(s),r(new Error("User declined the login request")))}})}))}async disconnect(){const e=window.solana;if(e&&e.isBlocto){await e.disconnect();return}this.code=null,this.accounts=[],this.eventListeners.disconnect.forEach(t=>t())}async fetchAccounts(){const{accounts:e}=await fetch(`${this.server}/api/solana/accounts?code=${this.code}`).then(t=>t.json());return this.accounts=e,e}async handleReadRequests(e){return fetch(this.rpc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:1,jsonrpc:"2.0",...e})}).then(t=>t.json())}async convertToProgramWalletTransaction(e){const t=window.solana;if(t&&t.isBlocto)return t.convertToProgramWalletTransaction(e);const r=await this.request({method:"convertToProgramWalletTransaction",params:{message:e.serializeMessage().toString("hex")}});return this.toTransaction(r,[])}async signAndSendTransaction(e,t){const r=window.solana;if(r&&r.isBlocto)return r.signAndSendTransaction(e);const i={};if(t){t.commitment&&(i.commitment=t.commitment);const s=t?t._rpcEndpoint:null;s&&s!==this.rpc&&(this.rpc=s,this.disconnect(),await this.connect())}return this.request({method:"signAndSendTransaction",params:{signatures:await this.collectSignatures(e),message:e.serializeMessage().toString("hex"),...i}})}toTransaction(e,t){const r=pu.from(we.from(e,"hex")),i=new C6;return i.recentBlockhash=r.recentBlockhash,r.header.numRequiredSignatures>0&&(i.feePayer=r.accountKeys[0]),t.forEach((s,o)=>{const a={signature:s===Tt.default.toBase58()?null:Wb.decode(s),publicKey:r.accountKeys[o]};i.signatures.push(a)}),r.instructions.forEach(s=>{const o=s.accounts.map(a=>({pubkey:r.accountKeys[a],isSigner:a<r.header.numRequiredSignatures,isWritable:r.isAccountWritable(a)}));i.instructions.push(new m0({keys:o,programId:r.accountKeys[s.programIdIndex],data:Wb.decode(s.data)}))}),i}async collectSignatures(e){return e.signatures.reduce((t,r)=>(r.signature&&(t[r.publicKey.toBase58()]=r.signature.toString("hex")),t),{})}async handleConvertTransaction(e){return fetch(`${this.server}/api/solana/convertToWalletTx?code=${this.code}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:this.code,...e.params})}).then(t=>gu(t,this))}async handleSignAndSendTransaction(e){const{authorizationId:t}=await fetch(`${this.server}/api/solana/authz?code=${this.code}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:this.code,...e.params})}).then(i=>gu(i,this));if(typeof window>"u")throw new Error("Currently only supported in browser");const r=$a(`${this.server}/authz/solana/${t}`);return Va(r),new Promise((i,s)=>lo("message",(o,a)=>{const c=o;c.origin===this.server&&c.data.type==="SOL:FRAME:RESPONSE"&&(c.data.status==="APPROVED"&&(a(),Ur(r),i(c.data.txHash)),c.data.status==="DECLINED"&&(a(),Ur(r),s(new Error("User declined to send the transaction"))))}))}}class SN extends cy{constructor({chainId:e,server:t,appId:r}){super(),this.publicKey=[],this.authKey="",Kl(e,"'chainId' is required"),this.chainId=e,this.networkName=jO[e],this.api=DO[e];const i=NO[e];this.appId=r||{}.APP_ID,this.server=t||i||{}.SERVER||""}tryRetrieveSessionFromStorage(){const e=uy(this.sessionKey,{}),t=e&&e.code,r=e&&e.address&&e.address[this.chainId];this.code=t||null,this.address=r||void 0}get publicAccount(){return{address:this.address||null,publicKey:this.publicKey.length?this.publicKey:null,authKey:null,minKeysRequired:2}}async network(){return{name:this.networkName,api:this.api,chainId:this.chainId.toString()}}async isConnected(){return!!this.address}async signTransaction(e){const t=window.bloctoAptos;if(t)return t.signTransaction(e);throw await this.isConnected()||await this.connect(),this.address?new Error("signTransaction method not supported."):new Error("Fail to get account")}async disconnect(){const e=window.bloctoAptos;if(e){await e.disconnect();return}this.code=null,this.address=void 0}async signAndSubmitTransaction(e){const t=window.bloctoAptos;if(t)return t.signAndSubmitTransaction(e);if(await this.isConnected()||await this.connect(),!this.address)throw new Error("Fail to get account");const{authorizationId:i}=await fetch(`${this.server}/api/aptos/authz?code=${this.code}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o=>gu(o,this));if(typeof window>"u")throw new Error("Currently only supported in browser");const s=$a(`${this.server}/authz/aptos/${i}`);return Va(s),new Promise((o,a)=>lo("message",(c,l)=>{const u=c;u.origin===this.server&&u.data.type==="APTOS:FRAME:RESPONSE"&&(u.data.status==="APPROVED"&&(l(),Ur(s),o({hash:u.data.txHash})),u.data.status==="DECLINED"&&(l(),Ur(s),a(new Error("User declined to send the transaction"))))}))}async signMessage(e){const t=window.bloctoAptos;if(t)return t.signMessage(e);if(await this.isConnected()||await this.connect(),!this.address)throw new Error("Fail to get account");const i=`${this.server}/user-signature/aptos`,s=$a(i);return Va(s),lo("message",(o,a)=>{const c=o;c.origin===this.server&&c.data.type==="APTOS:FRAME:READY"&&(s.contentWindow&&s.contentWindow.postMessage({type:"APTOS:FRAME:READY:RESPONSE",...e},i),a())}),new Promise((o,a)=>lo("message",(c,l)=>{const u=c;u.origin===this.server&&u.data.type==="APTOS:FRAME:RESPONSE"&&(u.data.status==="APPROVED"&&(l(),Ur(s),o({address:u.data.address,application:u.data.application,chainId:u.data.chainId,fullMessage:u.data.fullMessage,message:e.message,nonce:e.nonce,prefix:"APTOS",signature:u.data.signature,bitmap:u.data.bitmap})),u.data.status==="DECLINED"&&(l(),Ur(s),a(new Error("User declined the signing request"))))}))}async connect(){const e=window.bloctoAptos;return e?new Promise((t,r)=>setTimeout(()=>e.connect().then(t).catch(r),10)):(this.tryRetrieveSessionFromStorage(),new Promise((t,r)=>{typeof window>"u"&&r("Currently only supported in browser"),this.connected&&this.address&&t({address:this.address,publicKey:this.publicKey,authKey:null,minKeysRequired:2});const i=encodeURIComponent(window.location.origin),s=$a(`${this.server}/authn?l6n=${i}&chain=aptos`);Va(s),lo("message",async(o,a)=>{const c=o;if(c.origin===this.server){if(c.data.type==="APTOS:FRAME:RESPONSE"){a(),Ur(s),this.code=c.data.code,this.connected=!0;const l=c.data.address;if(this.address=l?l.aptos:void 0,this.address)try{const{public_keys:u}=await fetch(`${this.server}/blocto/aptos/accounts/${this.address}`).then(d=>d.json());this.publicKey=u||[],t({address:this.address||"",publicKey:this.publicKey,authKey:null,minKeysRequired:2})}catch{r(c)}else return r();dy(this.sessionKey,{code:this.code,address:l},ay)}c.data.type==="APTOS:FRAME:CLOSE"&&(a(),Ur(s),r(new Error("User declined the login request")))}})}))}async fetchAddress(){const{accounts:e}=await fetch(`${this.server}/api/aptos/accounts?code=${this.code}`).then(t=>gu(t,this));return this.address=e[0]||void 0,this.address}}var CN={},AN=Object.freeze({__proto__:null,default:CN});function gS(n,e){for(var t=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}var TN=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,gy=function(n){return TN.exec(n).slice(1)};function pp(){for(var n="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;n=r+"/"+n,e=r.charAt(0)==="/"}return n=gS(by(n.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+n||"."}function wy(n){var e=yy(n),t=xN(n,-1)==="/";return n=gS(by(n.split("/"),function(r){return!!r}),!e).join("/"),!n&&!e&&(n="."),n&&t&&(n+="/"),(e?"/":"")+n}function yy(n){return n.charAt(0)==="/"}function wS(){var n=Array.prototype.slice.call(arguments,0);return wy(by(n,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function yS(n,e){n=pp(n).substr(1),e=pp(e).substr(1);function t(l){for(var u=0;u<l.length&&l[u]==="";u++);for(var d=l.length-1;d>=0&&l[d]==="";d--);return u>d?[]:l.slice(u,d-u+1)}for(var r=t(n.split("/")),i=t(e.split("/")),s=Math.min(r.length,i.length),o=s,a=0;a<s;a++)if(r[a]!==i[a]){o=a;break}for(var c=[],a=o;a<r.length;a++)c.push("..");return c=c.concat(i.slice(o)),c.join("/")}var bS="/",_S=":";function vS(n){var e=gy(n),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function kS(n,e){var t=gy(n)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function SS(n){return gy(n)[3]}var IN={extname:SS,basename:kS,dirname:vS,sep:bS,delimiter:_S,relative:yS,join:wS,isAbsolute:yy,normalize:wy,resolve:pp};function by(n,e){if(n.filter)return n.filter(e);for(var t=[],r=0;r<n.length;r++)e(n[r],r,n)&&t.push(n[r]);return t}var xN="ab".substr(-1)==="b"?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)},EN=Object.freeze({__proto__:null,resolve:pp,normalize:wy,isAbsolute:yy,join:wS,relative:yS,sep:bS,delimiter:_S,dirname:vS,basename:kS,extname:SS,default:IN}),Ah;function CS(){if(typeof Ah>"u"){var n=new ArrayBuffer(2),e=new Uint8Array(n),t=new Uint16Array(n);if(e[0]=1,e[1]=2,t[0]===258)Ah="BE";else if(t[0]===513)Ah="LE";else throw new Error("unable to figure out endianess")}return Ah}function AS(){return typeof Ho.location<"u"?Ho.location.hostname:""}function TS(){return[]}function IS(){return 0}function xS(){return Number.MAX_VALUE}function ES(){return Number.MAX_VALUE}function MS(){return[]}function OS(){return"Browser"}function NS(){return typeof Ho.navigator<"u"?Ho.navigator.appVersion:""}function jS(){}function DS(){}function MN(){return"javascript"}function ON(){return"browser"}function _y(){return"/tmp"}var BS=_y,RS=`
`,NN={EOL:RS,tmpdir:BS,tmpDir:_y,networkInterfaces:jS,getNetworkInterfaces:DS,release:NS,type:OS,cpus:MS,totalmem:ES,freemem:xS,uptime:IS,loadavg:TS,hostname:AS,endianness:CS},jN=Object.freeze({__proto__:null,endianness:CS,hostname:AS,loadavg:TS,uptime:IS,freemem:xS,totalmem:ES,cpus:MS,type:OS,release:NS,networkInterfaces:jS,getNetworkInterfaces:DS,arch:MN,platform:ON,tmpDir:_y,tmpdir:BS,EOL:RS,default:NN}),DN=my(AN),PS=my(EN),BN=my(jN);function US(n){console.log(`[dotenv][DEBUG] ${n}`)}const RN=`
`,PN=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,UN=/\\n/g,FN=/\r\n|\n|\r/;function FS(n,e){const t=!!(e&&e.debug),r={};return n.toString().split(FN).forEach(function(i,s){const o=i.match(PN);if(o!=null){const a=o[1];let c=o[2]||"";const l=c.length-1,u=c[0]==='"'&&c[l]==='"';c[0]==="'"&&c[l]==="'"||u?(c=c.substring(1,l),u&&(c=c.replace(UN,RN))):c=c.trim(),r[a]=c}else t&&US(`did not match key and value when parsing line ${s+1}: ${i}`)}),r}function LN(n){return n[0]==="~"?PS.join(BN.homedir(),n.slice(1)):n}function $N(n){let e=PS.resolve(nf.cwd(),".env"),t="utf8",r=!1;n&&(n.path!=null&&(e=LN(n.path)),n.encoding!=null&&(t=n.encoding),n.debug!=null&&(r=!0));try{const i=FS(DN.readFileSync(e,{encoding:t}),{debug:r});return Object.keys(i).forEach(function(s){Object.prototype.hasOwnProperty.call(nf.env,s)?r&&US(`"${s}" is already defined in \`{}\` and will not be overwritten`):nf.env[s]=i[s]}),{parsed:i}}catch(i){return{error:i}}}var VN=$N,qN=FS,zN={config:VN,parse:qN};zN.config();class WN{constructor({appId:e,ethereum:t,solana:r,aptos:i}){t&&(this.ethereum=new LO({...t,appId:e})),r&&(this.solana=new kN({...r,appId:e})),i&&(this.aptos=new SN({...i,appId:e}))}}const KN="Blocto",ZN={[rp.Mainnet]:1,[rp.Testnet]:2};class QN extends Wr{constructor({network:t,timeout:r=1e4,bloctoAppId:i=""}={network:rp.Mainnet}){super();v(this,"name",KN);v(this,"url","https://portto.com/download");v(this,"icon","https://raw.githubusercontent.com/hippospace/aptos-wallet-adapter/main/logos/blocto.svg");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");const s=new WN({aptos:{chainId:ZN[t]},appId:i});this._provider=s.aptos,this._network=t,this._timeout=r,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>window?(this._readyState=ve.Installed,!0):!1)}get publicAccount(){var t,r,i,s;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null,minKeysRequired:(s=this._wallet)==null?void 0:s.minKeysRequired}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const t=this._provider;await(t==null?void 0:t.isConnected())&&await(t==null?void 0:t.disconnect());const{publicKey:i,...s}=await(t==null?void 0:t.connect());this._wallet={...s,publicKey:i,isConnected:!0};const{api:o,chainId:a}=await t.network();this._api=o,this._chainId=a,this.emit("connect",this._wallet)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet,r=this._provider;if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(i){this.emit("error",new zr(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(t){try{try{const r=this._provider;if(await(r==null?void 0:r.signTransaction(t)))return new Uint8Array([]);throw new Error("Transaction failed")}catch(r){throw new or(r==null?void 0:r.message,r)}}catch(r){throw this.emit("error",r),r}}async signAndSubmitTransaction(t){try{try{const r=this._provider,i=await(r==null?void 0:r.signAndSubmitTransaction(t));if(i)return{hash:i.hash};throw new Error("Transaction failed")}catch(r){throw new mi(r.message||r)}}catch(r){throw this.emit("error",r),r}}async signMessage(t){try{const r=this._provider,i=await(r==null?void 0:r.signMessage(t));if(i)return i;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider;if(!t||!r)throw new Te}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider;if(!t||!r)throw new Te}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}const HN="OKX";class GN extends Wr{constructor({timeout:t=1e4}={}){var r;super();v(this,"name",HN);v(this,"url","https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge");v(this,"icon","https://lh3.googleusercontent.com/sO4GPPbgvTCXEFWp-uALYYju9vxVOr5YSr2jqRAclNFSq8FrAIVTQOYmpJV4kMuDM1ZazcgUdjNGLIGKpmMRvR3NzQ=w128-h128-e365-rj-sc0x00ffffff");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(r=window.okxwallet)==null?void 0:r.aptos:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>{var i;return(i=window.okxwallet)!=null&&i.aptos?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||((t=window.okxwallet)==null?void 0:t.aptos);let i=await(r==null?void 0:r.connect());typeof i=="boolean"&&(i=await(r==null?void 0:r.account())),this._wallet={address:i==null?void 0:i.address,publicKey:i==null?void 0:i.publicKey,isConnected:!0};try{const s=await(r==null?void 0:r.network()),o=null,a=null;this._network=s,this._chainId=o,this._api=a}catch(s){const o=s.message;throw this.emit("error",new us(o)),s}this.emit("connect",this._wallet.publicKey)}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){var i;const t=this._wallet,r=this._provider||((i=window.okxwallet)==null?void 0:i.aptos);if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(s){this.emit("error",new zr(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(t,r){var i;try{const s=this._wallet,o=this._provider||((i=window.okxwallet)==null?void 0:i.aptos);if(!s||!o)throw new Te;const a=await o.signTransaction(t,r);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new or(o)),s}}async signAndSubmitTransaction(t,r){var i;try{const s=this._wallet,o=this._provider||((i=window.okxwallet)==null?void 0:i.aptos);if(!s||!o)throw new Te;const a=await o.signAndSubmitTransaction(t,r);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new mi(o)),s}}async signMessage(t){var r;try{const i=this._wallet,s=this._provider||((r=window.okxwallet)==null?void 0:r.aptos);if(!i||!s)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(t));if(o)return o;throw new Error("Sign Message failed")}catch(i){const s=i.message;throw this.emit("error",new un(s)),i}}async onAccountChange(){var t;try{const r=this._wallet,i=this._provider||((t=window.okxwallet)==null?void 0:t.aptos);if(!r||!i)throw new Te;const s=async o=>{var a,c,l,u;if(o!=null&&o.publicKey)this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),address:o.address||((c=this._wallet)==null?void 0:c.address)};else{const d=await(i==null?void 0:i.connect());this._wallet={...this._wallet,address:(d==null?void 0:d.address)||((l=this._wallet)==null?void 0:l.address),publicKey:(d==null?void 0:d.publicKey)||((u=this._wallet)==null?void 0:u.publicKey)}}this.emit("accountChange",o.publicKey)};i.on("accountChange",s)}catch(r){const i=r.message;throw this.emit("error",new ti(i)),r}}async onNetworkChange(){var t;try{const r=this._wallet,i=this._provider||((t=window.okxwallet)==null?void 0:t.aptos);if(!r||!i)throw new Te}catch(r){const i=r.message;throw this.emit("error",new ni(i)),r}}}const YN="TokenPocket";class XN extends Wr{constructor({timeout:t=1e4}={}){super();v(this,"name",YN);v(this,"url","https://tokenpocket.pro");v(this,"icon","https://tp-statics.tokenpocket.pro/logo/tokenpocket.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.aptos:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>{var r;return window.aptos&&((r=window.aptos)!=null&&r.isTokenPocket)?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const t=this._provider||window.aptos;await(t==null?void 0:t.isConnected())&&await(t==null?void 0:t.disconnect());const i=await(t==null?void 0:t.connect());if(!i)throw new Te("No connect response");this._wallet={address:i==null?void 0:i.address,publicKey:i==null?void 0:i.publicKey,isConnected:!0};try{const s=await(t==null?void 0:t.network()),o=await(t==null?void 0:t.getChainId()),a=await(t==null?void 0:t.getNodeUrl());this._network=s,this._chainId=o,this._api=a}catch(s){const o=s.message;throw this.emit("error",new us(o)),s}this.emit("connect",this._wallet.address)}catch(t){throw this.emit("error",new Error(t)),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet,r=this._provider||window.aptos;if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(i){this.emit("error",new zr(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(t,r){try{const i=this._wallet,s=this._provider||window.aptos;if(!i||!s)throw new Te;const o=await s.signTransaction(t,r);if(!o)throw new Error("No response");return o}catch(i){throw this.emit("error",new or(i)),i}}async signAndSubmitTransaction(t,r){try{const i=this._wallet,s=this._provider||window.aptos;if(!i||!s)throw new Te;const o=await s.signAndSubmitTransaction(t,r);if(!o)throw new Error("No response");return o}catch(i){throw this.emit("error",new mi(i)),i}}async signMessage(t){try{const r=this._wallet,i=this._provider||window.aptos;if(!r||!i)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const s=await(i==null?void 0:i.signMessage(t));if(s)return s;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onNetworkChange(){}async onAccountChange(){}}const JN="BitKeep";class e8 extends Wr{constructor({timeout:t=1e4}={}){var r;super();v(this,"name",JN);v(this,"url","https://chrome.google.com/webstore/detail/bitkeep-bitcoin-crypto-wa/jiidiaalihmmhddjgbnbgdfflelocpak");v(this,"icon","https://raw.githubusercontent.com/bitkeepwallet/download/main/logo-png/BitKeep_logo_circle.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(r=window.bitkeep)==null?void 0:r.aptos:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>{var i;return(i=window.bitkeep)!=null&&i.aptos?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||((t=window.bitkeep)==null?void 0:t.aptos),i=await(r==null?void 0:r.connect());this._wallet={address:i==null?void 0:i.address,publicKey:i==null?void 0:i.publicKey,isConnected:!0};try{const s=await(r==null?void 0:r.network()),o=null,a=null;this._network=s,this._chainId=o,this._api=a}catch(s){const o=s.message;throw this.emit("error",new us(o)),s}this.emit("connect",this._wallet.publicKey)}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){var i;const t=this._wallet,r=this._provider||((i=window.bitkeep)==null?void 0:i.aptos);if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(s){this.emit("error",new zr(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(t,r){var i;try{const s=this._wallet,o=this._provider||((i=window.bitkeep)==null?void 0:i.aptos);if(!s||!o)throw new Te;const a=await o.signTransaction(t,r);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new or(o)),s}}async signAndSubmitTransaction(t,r){var i;try{const s=this._wallet,o=this._provider||((i=window.bitkeep)==null?void 0:i.aptos);if(!s||!o)throw new Te;const a=await o.signAndSubmitTransaction(t,r);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new mi(o)),s}}async signMessage(t){var r;try{const i=this._wallet,s=this._provider||((r=window.bitkeep)==null?void 0:r.aptos);if(!i||!s)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(t));if(o)return o;throw new Error("Sign Message failed")}catch(i){const s=i.message;throw this.emit("error",new un(s)),i}}async onAccountChange(){var t;try{const r=this._wallet,i=this._provider||((t=window.bitkeep)==null?void 0:t.aptos);if(!r||!i)throw new Te;const s=async o=>{var a,c,l;this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),authKey:o.authKey||((c=this._wallet)==null?void 0:c.authKey),address:o.address||((l=this._wallet)==null?void 0:l.address)},this.emit("accountChange",o.publicKey)};await(i==null?void 0:i.onAccountChange(s))}catch(r){const i=r.message;throw this.emit("error",new ti(i)),r}}async onNetworkChange(){var t;try{const r=this._wallet,i=this._provider||((t=window.bitkeep)==null?void 0:t.aptos);if(!r||!i)throw new Te;const s=async o=>{console.log("network Changed >>>",o),this._network=o.networkName,this.emit("networkChange",this._network)};await(i==null?void 0:i.onNetworkChange(s))}catch(r){const i=r.message;throw this.emit("error",new ni(i)),r}}}const t8="Rise Wallet";class n8 extends Wr{constructor({timeout:t=1e4}={}){super();v(this,"name",t8);v(this,"url","https://chrome.google.com/webstore/detail/rise-aptos-wallet/hbbgbephgojikajhfbomhlmmollphcad");v(this,"icon","https://static.risewallet.io/logo.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.rise:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>window.rise?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||window.rise;if(await((t=this._provider)==null?void 0:t.isConnected())===!0&&await(r==null?void 0:r.disconnect()),!await(r==null?void 0:r.connect()))throw new Te("User has rejected the request");if(r!=null&&r.network)try{const{chainId:a,api:c,name:l}=await r.network();this._network=l,this._chainId=a,this._api=c}catch(a){const c=a.message;throw this.emit("error",new us(c)),a}const o=await(r==null?void 0:r.account());if(o){const{publicKey:a,address:c,authKey:l}=o;this._wallet={publicKey:a,address:c,authKey:l,isConnected:!0},this.emit("connect",this._wallet.publicKey)}}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){if(this._wallet){this._wallet=null;try{const r=this._provider||window.rise;await(r==null?void 0:r.disconnect())}catch(r){this.emit("error",new zr(r==null?void 0:r.message,r))}}this.emit("disconnect")}async signTransaction(t){try{const r=this._wallet,i=this._provider||window.rise;if(!r||!i)throw new Te;const s=await(i==null?void 0:i.signTransaction(t));if(s)return s;throw new Error("Sign Transaction failed")}catch(r){const i=r.message;throw this.emit("error",new or(i)),r}}async signAndSubmitTransaction(t){try{const r=this._wallet,i=this._provider||window.rise;if(!r||!i)throw new Te;const s=await(i==null?void 0:i.signAndSubmitTransaction(t));if(s)return s;throw new Error("Transaction failed")}catch(r){const i=r.message;throw this.emit("error",new or(i)),r}}async signMessage(t){try{const r=this._wallet,i=this._provider||window.rise;if(!r||!i)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const s=await(i==null?void 0:i.signMessage(t));if(s)return s;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider||window.rise;if(!t||!r)throw new Te}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider||window.rise;if(!t||!r)throw new Te}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}const r8="OpenBlock";class i8 extends Wr{constructor({timeout:t=1e4}={}){var r;super();v(this,"name",r8);v(this,"url","https://openblock.com/");v(this,"icon","https://obstatic.243096.com/download/dapp/sdk/images/logo_blue.svg");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(r=window.openblock)==null?void 0:r.aptos:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&(P4(()=>import("./index.4b9d1a16.js").then(i=>i.i),["./index.4b9d1a16.js","./entry.1afe32c4.js","./entry.876eaa1f.css"],import.meta.url),ri(()=>{var i;return(i=window.openblock)!=null&&i.aptos?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t,r;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const i=this._provider||((t=window==null?void 0:window.openblock)==null?void 0:t.aptos);await((r=this._provider)==null?void 0:r.isConnected())===!0&&await(i==null?void 0:i.disconnect());const o=await(i==null?void 0:i.connect());if(o.address){this._wallet={address:o==null?void 0:o.address,publicKey:o==null?void 0:o.publicKey,isConnected:!0};const a=await(i==null?void 0:i.network());this._network=a.name,this._chainId=a.chainId,this._api=a.api}else throw new Error("failed to connect");this.emit("connect",this._wallet.publicKey)}catch(i){throw this.emit("error",i),i}finally{this._connecting=!1}}async disconnect(){var i;const t=this._wallet,r=this._provider||((i=window==null?void 0:window.openblock)==null?void 0:i.aptos);if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(s){this.emit("error",new zr(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(t){var r;try{const i=this._wallet,s=this._provider||((r=window==null?void 0:window.openblock)==null?void 0:r.aptos);if(!i||!s)throw new Te;const o=await s.signTransaction(t);if(o)return new TextEncoder().encode(o);throw new Error("failed to SignTransaction")}catch(i){const s=i.message;throw this.emit("error",new or(s)),i}}async signAndSubmitTransaction(t){var r;try{const i=this._wallet,s=this._provider||((r=window==null?void 0:window.openblock)==null?void 0:r.aptos);if(!i||!s)throw new Te;const o=await s.signAndSubmitTransaction(t);if(o)return o;throw new Error("Failed to SignAndSubmitTransaction")}catch(i){const s=i.message;throw this.emit("error",new mi(s)),i}}async signMessage(t){var r;try{const i=this._wallet,s=this._provider||((r=window==null?void 0:window.openblock)==null?void 0:r.aptos);if(!i||!s)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(t));if(o)return o;throw new Error("Failed to signMessage")}catch(i){const s=i.message;throw this.emit("error",new un(s)),i}}async onAccountChange(){var t;try{const r=this._wallet,i=this._provider||((t=window==null?void 0:window.openblock)==null?void 0:t.aptos);if(!r||!i)throw new Te;const s=async o=>{var a,c,l;this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),authKey:o.authKey||((c=this._wallet)==null?void 0:c.authKey),address:o.address||((l=this._wallet)==null?void 0:l.address)},this.emit("accountChange",o.publicKey)};i==null||i.onAccountChange(s)}catch(r){const i=r.message;throw this.emit("error",new ti(i)),r}}async onNetworkChange(){var t;try{const r=this._wallet,i=this._provider||((t=window==null?void 0:window.openblock)==null?void 0:t.aptos);if(!r||!i)throw new Te;const s=async o=>{this._network=o.name,this._api=o.api,this._chainId=o.chainId,this.emit("networkChange",this._network)};i==null||i.onNetworkChange(s)}catch(r){const i=r.message;throw this.emit("error",new ni(i)),r}}}var b0={},uo={},di={},mp={},s8={get exports(){return mp},set exports(n){mp=n}};(function(n,e){var t=typeof Reflect<"u"?Reflect.construct:void 0,r=Object.defineProperty,i=Error.captureStackTrace;i===void 0&&(i=function(l){var u=new Error;r(l,"stack",{configurable:!0,get:function(){var h=u.stack;return r(this,"stack",{configurable:!0,value:h,writable:!0}),h},set:function(h){r(l,"stack",{configurable:!0,value:h,writable:!0})}})});function s(c){c!==void 0&&r(this,"message",{configurable:!0,value:c,writable:!0});var l=this.constructor.name;l!==void 0&&l!==this.name&&r(this,"name",{configurable:!0,value:l,writable:!0}),i(this,this.constructor)}s.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:s,writable:!0}});var o=function(){function c(u,d){return r(u,"name",{configurable:!0,value:d})}try{var l=function(){};if(c(l,"foo"),l.name==="foo")return c}catch{}}();function a(c,l){if(l==null||l===Error)l=s;else if(typeof l!="function")throw new TypeError("super_ should be a function");var u;if(typeof c=="string")u=c,c=t!==void 0?function(){return t(l,arguments,this.constructor)}:function(){l.apply(this,arguments)},o!==void 0&&(o(c,u),u=void 0);else if(typeof c!="function")throw new TypeError("constructor should be either a string or a function");c.super_=c.super=l;var d={constructor:{configurable:!0,value:c,writable:!0}};return u!==void 0&&(d.name={configurable:!0,value:u,writable:!0}),c.prototype=Object.create(l.prototype,d),c}e=n.exports=a,e.BaseError=s})(s8,mp);var Qd=Bt&&Bt.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(di,"__esModule",{value:!0});di.InvalidParameters=di.MethodNotFound=di.InvalidRequest=di.InvalidJson=di.JsonRpcError=void 0;var o8=mp,Hd=function(n){Qd(e,n);function e(t,r,i){t===void 0&&(t="unknown error from the peer"),r===void 0&&(r=-32e3);var s=n.call(this,t)||this;return s.code=r,s.data=i,s}return e.prototype.toJsonRpcError=function(){return{code:this.code,data:this.data,message:this.message}},e}(o8.BaseError);di.JsonRpcError=Hd;var a8=function(n){Qd(e,n);function e(){return n.call(this,"invalid JSON",-32700)||this}return e}(Hd);di.InvalidJson=a8;var c8=function(n){Qd(e,n);function e(t){return t===void 0&&(t="invalid JSON-RPC request"),n.call(this,t,-32600)||this}return e}(Hd);di.InvalidRequest=c8;var l8=function(n){Qd(e,n);function e(t){var r=this,i=t?"method not found: "+t:"method not found";return r=n.call(this,i,-32601,t)||this,r}return e}(Hd);di.MethodNotFound=l8;var u8=function(n){Qd(e,n);function e(t){return n.call(this,"invalid parameter(s)",-32602,t)||this}return e}(Hd);di.InvalidParameters=u8;Object.defineProperty(uo,"__esModule",{value:!0});uo.response=uo.request=uo.notification=uo.error=void 0;var d8=di,pm=JSON.stringify;uo.error=function(n,e){(e==null||typeof e.toJsonRpcError!="function")&&(e=new d8.JsonRpcError);var t=e.toJsonRpcError();return pm({error:t,id:n,jsonrpc:"2.0"})};uo.notification=function(n,e){return pm({jsonrpc:"2.0",method:n,params:e})};uo.request=function(n,e,t){return pm({id:n,jsonrpc:"2.0",method:e,params:t})};uo.response=function(n,e){return pm({id:n,jsonrpc:"2.0",result:e})};var LS={};Object.defineProperty(LS,"__esModule",{value:!0});var $S={},VS={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isObject=n.isString=n.isInteger=n.isNumber=void 0;var e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY;n.isNumber=function(r){var i=typeof r;return i==="number"&&r>e&&r<t},n.isInteger=function(r){return n.isNumber(r)&&r%1===0},n.isString=function(r){return typeof r=="string"},n.isObject=function(r){var i=typeof r;return r!==null&&(i==="object"||i==="function")}})(VS);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.parse=n.isResponsePayload=n.isErrorPayload=n.isRequestPayload=n.isNotificationPayload=void 0;var e=VS,t=di,r=Object.defineProperty,i=function(f,m){return r(f,"type",{configurable:!0,value:m,writable:!0})},s=function(f){return f===null?"null":typeof f},o=function(f,m){if(m==="1.0"){if(f==null)throw new t.InvalidRequest("invalid error "+s(f))}else if(f==null||!e.isInteger(f.code)||!e.isString(f.message))throw new t.InvalidRequest("invalid error: "+s(f)+" instead of {code, message}")},a=function(f){if(!e.isNumber(f)&&!e.isString(f))throw new t.InvalidRequest("invalid identifier: "+s(f)+" instead of number or string")},c=function(f,m){if(m==="2.0"){if(f!==void 0&&!Array.isArray(f)&&!e.isObject(f))throw new t.InvalidRequest("invalid params: "+s(f)+" instead of undefined, array or object")}else if(!Array.isArray(f))throw new t.InvalidRequest("invalid params: "+s(f)+" instead of array")},l=function(f){var m=f.jsonrpc;if(m===void 0)return"1.0";if(m==="2.0")return"2.0";throw new t.InvalidRequest("invalid version: "+s(m)+" instead of undefined or '2.0'")},u=function(f,m){return f===(m==="2.0"?void 0:null)},d=function(f,m){var w=f.error;return w!==(m==="2.0"?void 0:null)};n.isNotificationPayload=function(f,m){if(e.isString(f.method)){var w=f.id;if(u(w,m))return c(f.params,m),!0}return!1},n.isRequestPayload=function(f,m){if(e.isString(f.method)){var w=f.id;if(!u(w,m))return a(w),c(f.params,m),!0}return!1},n.isErrorPayload=function(f,m){if(!e.isString(f.method)&&d(f,m)){var w=f.id;return w!==null&&a(w),o(f.error,m),!0}return!1},n.isResponsePayload=function(f,m){return!e.isString(f.method)&&!d(f,m)?(a(f.id),!0):!1};function h(f){if(e.isString(f))try{f=JSON.parse(f)}catch(w){throw w instanceof SyntaxError?new t.InvalidJson:w}if(Array.isArray(f))return f.map(h);var m=l(f);if(n.isNotificationPayload(f,m))i(f,"notification");else if(n.isRequestPayload(f,m))i(f,"request");else if(n.isErrorPayload(f,m))i(f,"error");else if(n.isResponsePayload(f,m))i(f,"response");else throw new t.InvalidJson;return f}n.parse=h,n.default=h,h.result=function(m){var w=h(m);if(!Array.isArray(w)){if(w.type==="error")throw w.error;if(w.type==="response")return w.result}throw new TypeError("message should be response or error JSON-RPC message")}})($S);(function(n){var e=Bt&&Bt.__createBinding||(Object.create?function(a,c,l,u){u===void 0&&(u=l),Object.defineProperty(a,u,{enumerable:!0,get:function(){return c[l]}})}:function(a,c,l,u){u===void 0&&(u=l),a[u]=c[l]}),t=Bt&&Bt.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),r=Bt&&Bt.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var l in a)l!=="default"&&Object.hasOwnProperty.call(a,l)&&e(c,a,l);return t(c,a),c},i=Bt&&Bt.__exportStar||function(a,c){for(var l in a)l!=="default"&&!c.hasOwnProperty(l)&&e(c,a,l)};Object.defineProperty(n,"__esModule",{value:!0}),n.format=void 0;var s=r(uo);n.format=s,i(LS,n),i(di,n);var o=$S;Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return o.parse}})})(b0);function _0(n){const e=n.reduce((i,s)=>i+s.length,0),t=new Uint8Array(e);let r=0;return n.forEach(i=>{t.set(i,r),r+=i.length}),t}var h8=class{constructor(n,e=n.byteOffset){this.data=n,this.byteOffset=e}read(n){const e=new Uint8Array(this.data.buffer,this.byteOffset,n);return this.byteOffset+=n,e}decodeBigInt(){return BigInt(this.decodeString())}decodeNumber(){return Number(this.decodeString())}decodeUint8Array(){const n=new Uint32Array(this.read(4).slice(0).buffer)[0];return this.read(n)}decodeBoolean(){return!!this.read(1)[0]}decodeString(){const n=this.decodeUint8Array();return ct.Buffer.from(n).toString()}decodeArray(){const n=this.decode();return Array(n).fill(0).map(()=>this.decode())}decodeObject(){const n=this.decode(),e=Array(n).fill(0).map(()=>[this.decode(),this.decode()]);return Object.fromEntries(e)}decode(){const n=this.read(1)[0];switch(n){case 2:return this.decodeBigInt();case 1:return this.decodeNumber();case 0:return this.decodeBoolean();case 3:return this.decodeString();case 4:return this.decodeUint8Array();case 6:return this.decodeArray();case 5:return this.decodeObject();case 7:return;case 8:return null}throw`unkonw type: ${n}`}};function qS(n){const e=new Uint8Array(n.length+5);return e[0]=4,ct.Buffer.from(e.buffer,1,4).writeUInt32LE(n.length),e.set(n,5),e}function f8(){return Uint8Array.from([7])}function p8(){return Uint8Array.from([8])}function m8(n){const e=vy(n.toString());return e[0]=2,e}function g8(n){const e=vy(n.toString());return e[0]=1,e}function w8(n){return new Uint8Array([0,Number(n)])}function vy(n){const e=new ArrayBuffer(n.length);ct.Buffer.from(e).write(n);const t=qS(new Uint8Array(e));return t[0]=3,t}function y8(n){const e=Object.entries(n),t=e.map(([r,i])=>{const s=Zl(r),o=Zl(i);return _0([s,o])});return _0([Uint8Array.from([5]),Zl(e.length),...t])}function b8(n){const e=n.map(t=>Zl(t));return _0([Uint8Array.from([6]),Zl(e.length),...e])}function Zl(n){if(n instanceof Uint8Array)return qS(n);if(n instanceof Array)return b8(n);if(n instanceof Object)return y8(n);if(n===null)return p8();switch(typeof n){case"string":return vy(n);case"number":return g8(n);case"bigint":return m8(n);case"boolean":return w8(n);case"undefined":return f8()}throw`unsuport type: ${n}`}function _8(n){return new h8(n).decode()}function v8(n){return ct.Buffer.from(Zl(n).buffer).toString("hex")}function Kb(n){const e=new ArrayBuffer(n.length/2);return ct.Buffer.from(e).write(n,"hex"),_8(new Uint8Array(e))}function zS(n,e){const t=l=>l.split(".").map(Number),[r,i,s]=t(n),[o,a,c]=t(e);return r>o?1:r<o?-1:i>a?1:i<a?-1:s>c?1:s<c?-1:0}function v0(n){return n!==void 0&&zS(n,"2.1.4")>=0}function k8(n){return n!==void 0&&zS(n,"2.0.5")>=0}function S8(n){return n!==void 0}var C8="2.1.4",WS=class{constructor(n,e,t){this.handshakeType=n,e!==void 0&&(this.version=e),t!==void 0&&(this.sessionID=t)}toString(n){if(v0(n)){if(this.sessionID===void 0)throw Error("sessionID is undefined");return`${this.handshakeType}:${this.version}:${this.sessionID}`}return S8(n)?`${this.handshakeType}:${this.version}`:this.handshakeType}isHandshakeMessage(n){return!(this.handshakeType!==n||v0(this.version)&&this.sessionID===void 0)}static fromString(n){const[e,t,r]=n.split(":");return new WS(e,t,Number(r))}},Zr=WS;Zr.HANDSHAKE_REQ="HANDSHAKE_REQ";Zr.HANDSHAKE_ACK="HANDSHAKE_ACK";Zr.HANDSHAKE_PORT_ACK="HANDSHAKE_PORT_REQ";var Gs=class{constructor(n,e,t){this.port=n,this.peerVersion=e,this.sessionID=t,this.connected=!0,this.port.onmessage=r=>{this.onMessage&&this.onMessage(r.data)},this.port.onmessageerror=()=>{this.close()}}send(n){this.port.postMessage(n)}on(n,e){switch(n){case"close":this.onClose=e;break;case"message":this.onMessage=e;break;default:throw Error("invlaid type")}}get version(){return{self:Gs.version,peer:this.peerVersion}}close(){this.connected&&(this.port.close(),this.connected=!1,this.onClose&&this.onClose())}static newSessionID(){return Gs.sessionID++}static async connect(n,e){return new Promise((t,r)=>{const i=Gs.newSessionID();let s=()=>{},o=setTimeout(()=>{s(),r(`connect timeout: ${i}`)},1e3);const a=l=>{const u=l.ports[0];if(!e.includes(l.origin)||typeof l.data!="string")return;const d=Zr.fromString(l.data);d.isHandshakeMessage(Zr.HANDSHAKE_PORT_ACK)&&d.sessionID===i&&(s(),t(new Gs(u,d.version,i)))};s=()=>{clearTimeout(o),window.removeEventListener("message",a)},window.addEventListener("message",a);const c=new Zr(Zr.HANDSHAKE_REQ,Gs.version,i);n.postMessage(c.toString(c.version),"*")})}static accepts(n,e){n=new URL(n).origin;const t=r=>{if(r.origin!==n||typeof r.data!="string")return;const i=Zr.fromString(r.data);if(!i.isHandshakeMessage(Zr.HANDSHAKE_REQ))return;const s=i.version,o=Gs.version;if(v0(s)){const a=new MessageChannel,c=new Zr(Zr.HANDSHAKE_PORT_ACK,o,i.sessionID);r.source.postMessage(c.toString(s),r.origin,[a.port2]),e(new Gs(a.port1,s,i.sessionID))}else if(k8(s)){const a=new MessageChannel,c=new Zr(Zr.HANDSHAKE_PORT_ACK,o);r.source.postMessage(c.toString(s),r.origin,[a.port2]),e(new Gs(a.port1,s,void 0))}else{const a=r.ports[0],c=new Zr(Zr.HANDSHAKE_ACK,o);a.postMessage(c.toString(s)),e(new Gs(r.ports[0],s,void 0))}};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)}static async accept(n){return new Promise(e=>{const t=this.accepts(n,r=>{e(r),t()})})}},ky=Gs;ky.version=C8;ky.sessionID=0;var A8=class{constructor(n,e){this.connector=n,this.notifiers=e,this.id=0,this.executors={},this.connector.on("message",t=>this.onMessage(t)),this.connector.on("close",()=>this.onClose())}onMessage(n){const e=b0.parse(n);switch(e.type){case"notification":return this.onNotify(e.method,e.params.map(Kb));case"response":const{resolve:t}=this.executors[Number(e.id)];return delete this.executors[Number(e.id)],t(Kb(e.result));case"error":const{reject:r}=this.executors[Number(e.id)];return delete this.executors[Number(e.id)],r(e.error.message)}}async request(n,e=[]){return new Promise((t,r)=>{const i=this.id++;this.executors[i]={resolve:t,reject:r};const s=b0.format.request(i,n,e.map(v8));this.connector.send(s)})}get version(){return this.connector.version}onNotify(n,e){this.notifiers[n](...e)}onClose(){}},KS={mainnet:"https://app.m-safe.io",testnet:"https://testnet.m-safe.io",partner:"https://partner.m-safe.io"},T8=Object.values(KS),Ia=class{constructor(n){this.events={};const e=(i,...s)=>{const o=this.events[i];o&&o(s[0])},t=["ChangeAccountEvent","ChangeNetworkEvent"].map(i=>[i,(...s)=>e(i,...s)]),r=Object.fromEntries(t);this.client=new A8(n,r)}async connect(){return this.client.request("connect")}async isConnected(){return this.client.request("isConnected")}async disconnect(){return this.client.request("disconnect")}onChangeAccount(n){this.events.ChangeAccountEvent=n}onChangeNetwork(n){this.events.ChangeNetworkEvent=n}async network(){return this.client.request("network")}async account(){return this.client.request("account")}async chainId(){return this.client.request("chainId")}async signAndSubmit(n,e){return this.client.request("signAndSubmit",[n,e])}async signTransaction(n,e){return this.client.request("signTransaction",[n,e])}async signMessage(n){return this.client.request("signMessage",[n])}get version(){return this.client.version}static inMSafeWallet(){return typeof window<"u"&&typeof document<"u"&&typeof parent<"u"&&typeof parent.window<"u"&&parent.window!==window}static inMsafeWallet(){return Ia.inMSafeWallet()}static getAppUrl(n="mainnet",e=`${window.location.href}`){return`${Ia.getOrigin(n)}/aptos/v2/store/0?url=${encodeURIComponent(e)}`}static getOrigin(n="mainnet"){const e=KS[n.toLowerCase()]||n;return new URL(e).origin}static async new(n=T8){const e=n instanceof Array?n.map(r=>Ia.getOrigin(r)):[Ia.getOrigin(n)],t=await ky.connect(window.parent,e);return new Ia(t)}};const I8="MSafe";class x8 extends Wr{constructor(t){super();v(this,"name",I8);v(this,"icon","https://raw.githubusercontent.com/hippospace/aptos-wallet-adapter/main/logos/msafe.png");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_readyState",Ia.inMSafeWallet()?ve.NotDetected:ve.Unsupported);v(this,"_connecting");v(this,"_wallet");v(this,"_origin");this._network=void 0,this._connecting=!1,this._origin=t,this._readyState===ve.NotDetected&&Ia.new(t).then(r=>{this._provider=r,this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState)}).catch(r=>{this._readyState=ve.Unsupported,this.emit("readyStateChange",this._readyState),console.error("MSafe connect error:",r)})}get url(){return Ia.getAppUrl(this._origin instanceof Array?this._origin[0]:this._origin)}get publicAccount(){var t,r,i,s;return{publicKey:(t=this._wallet)==null?void 0:t.publicKey,address:(r=this._wallet)==null?void 0:r.address,authKey:(i=this._wallet)==null?void 0:i.authKey,minKeysRequired:(s=this._wallet)==null?void 0:s.minKeysRequired}}get network(){return{name:this._network,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider;if(await(r==null?void 0:r.isConnected())&&await(r==null?void 0:r.disconnect()),!await(r==null?void 0:r.connect()))throw new Te("No connect response");const o=await(r==null?void 0:r.account());if(o){this._wallet={...o,isConnected:!0};try{const a=await(r==null?void 0:r.network()),c=await(r==null?void 0:r.chainId());this._network=a,this._chainId=c.toString()}catch(a){const c=a.message;throw this.emit("error",new us(c)),a}}this.emit("connect",((t=this._wallet)==null?void 0:t.address)||"")}catch(r){throw this.emit("error",new Error(r)),r}finally{this._connecting=!1}}async disconnect(){const t=this._wallet,r=this._provider;if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(i){this.emit("error",new zr(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(t,r){try{const i=this._wallet,s=this._provider;if(!i||!s)throw new Te;const o=await s.signTransaction(t,r);if(!o)throw new Error("No response");return o}catch(i){throw this.emit("error",new or(i)),i}}async signAndSubmitTransaction(t,r){try{const i=this._wallet,s=this._provider;if(!i||!s)throw new Te;const o=await s.signAndSubmit(t,r);if(!o)throw new Error("No response");return{hash:V4.fromUint8Array(o).hex()}}catch(i){throw this.emit("error",new mi(i)),i}}async signMessage(t){try{const r=this._wallet,i=this._provider;if(!r||!i)throw new Te;const s=await i.signMessage(t);if(s)return s;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider;if(!t||!r)throw new Te;const i=async s=>{this._wallet={...this._wallet,...s},this.emit("accountChange",s.address)};r.onChangeAccount(i)}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider;if(!t||!r)throw new Te;const i=async s=>{this._network=s,this._chainId=(await this._provider.chainId()).toString(),this.emit("networkChange",this._network)};r.onChangeNetwork(i)}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}const E8="Spacecy";class M8 extends Wr{constructor({timeout:t=1e4}={}){super();v(this,"name",E8);v(this,"url","https://chrome.google.com/webstore/detail/spacecy-wallet/mkchoaaiifodcflmbaphdgeidocajadp");v(this,"icon","https://spacecywallet.com/favicon.ico");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?window.spacecy:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>window.spacecy?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const r=this._provider||window.spacecy,i=await(r==null?void 0:r.connect());if(!i)throw new Te("No connect response");const s=i.data.address,o=i.data.publicKey;if(s){this._wallet={address:s,publicKey:o,isConnected:!0};try{const a=await(r==null?void 0:r.chainId());a&&(this._network=a.data.networkName,this._chainId=a.data.chainId,this._api=a.data.rpcProvider)}catch(a){const c=a.message;throw this.emit("error",new us(c)),a}}this.emit("connect",((t=this._wallet)==null?void 0:t.address)||"")}catch(r){throw this.emit("error",new Error("User has rejected the connection")),r}finally{this._connecting=!1}}async disconnect(){const t=this._wallet,r=this._provider||window.spacecy;if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(i){this.emit("error",new zr(i==null?void 0:i.message,i))}}this.emit("disconnect")}async signTransaction(t,r){try{const i=this._wallet,s=this._provider||window.spacecy;if(!i||!s)throw new Te;const o=await s.generateTransaction(i.address||"",t,r);if(!o)throw new Error("Cannot generate transaction");const a=await(s==null?void 0:s.signTransaction(o.data));if(!a)throw new Error("No response");return a.data}catch(i){throw this.emit("error",new or(i)),i}}async signAndSubmitTransaction(t,r){try{const i=this._wallet,s=this._provider||window.spacecy;if(!i||!s)throw new Te;const o=await(s==null?void 0:s.signAndSubmitTransaction(t,r));if(!o||o.status!=200)throw new Error("No response");return{hash:o.data}}catch(i){throw this.emit("error",new mi(i.message)),i}}async signMessage(t){try{const r=this._wallet,i=this._provider||window.spacecy;if(!r||!i)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const s=await(i==null?void 0:i.signMessage(t));if(s.status==200)return s.data;throw new Error("Sign Message failed")}catch(r){const i=r.message;throw this.emit("error",new un(i)),r}}async onAccountChange(){try{const t=this._wallet,r=this._provider||window.spacecy;if(!t||!r)throw new Te;const i=async s=>{if(s.data=="no account"){this.connected&&await this.disconnect();return}s.data==""&&(this._wallet={publicKey:"",address:"",authKey:"",isConnected:!1}),this._wallet!=null&&(this._wallet={...this._wallet,address:s.data=="no account"?void 0:s.data,publicKey:void 0}),this.emit("accountChange",s)};await(r==null?void 0:r.onAccountChange(i))}catch(t){const r=t.message;throw this.emit("error",new ti(r)),t}}async onNetworkChange(){try{const t=this._wallet,r=this._provider||window.spacecy;if(!t||!r)throw new Te;const i=s=>{this._network=s.data.networkName,this._api=s.data.rpcProvider,this._chainId=s.data.chainId,this._network&&this.emit("networkChange",this._network)};await(r==null?void 0:r.onNetworkChange(i))}catch(t){const r=t.message;throw this.emit("error",new ni(r)),t}}}const O8="bybitWallet";class N8 extends Wr{constructor({timeout:t=1e4}={}){var r;super();v(this,"name",O8);v(this,"url","https://chromewebstore.google.com/detail/bybit-wallet/pdliaogehgdbhbnmkklieghmmjkpigpa?hl=zh-CN&utm_source=ext_sidebar");v(this,"icon","https://lh3.googleusercontent.com/6lZG3r0XGvx62rnG9RiEV4Jut-xDViwxoqRvb5H-oboHYpPpLl5fol5p5IEfTKsyz3i9yD5TXopl60VwFKQV2ymiRg=s60");v(this,"_provider");v(this,"_network");v(this,"_chainId");v(this,"_api");v(this,"_timeout");v(this,"_readyState",typeof window>"u"||typeof document>"u"?ve.Unsupported:ve.NotDetected);v(this,"_connecting");v(this,"_wallet");this._provider=typeof window<"u"?(r=window==null?void 0:window.bybitWallet)==null?void 0:r.aptos:void 0,this._network=void 0,this._timeout=t,this._connecting=!1,this._wallet=null,typeof window<"u"&&this._readyState!==ve.Unsupported&&ri(()=>{var i;return(i=window==null?void 0:window.bybitWallet)!=null&&i.aptos?(this._readyState=ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1})}get publicAccount(){var t,r,i;return{publicKey:((t=this._wallet)==null?void 0:t.publicKey)||null,address:((r=this._wallet)==null?void 0:r.address)||null,authKey:((i=this._wallet)==null?void 0:i.authKey)||null}}get network(){return{name:this._network,api:this._api,chainId:this._chainId}}get connecting(){return this._connecting}get connected(){var t;return!!((t=this._wallet)!=null&&t.isConnected)}get readyState(){return this._readyState}async connect(){var t,r,i,s,o,a,c,l,u;try{if(this.connected||this.connecting)return;if(!(this._readyState===ve.Loadable||this._readyState===ve.Installed))throw new qr;this._connecting=!0;const d=this._provider||((t=window.bybitWallet)==null?void 0:t.aptos);let h=await(d==null?void 0:d.connect());console.log("🚀 ~ file: BybitWallet.ts:153 ~ BybitWalletAdapter ~ connect ~ response:",h),console.log("🚀 ~ file: BybitWallet.ts:153 ~ BybitWalletAdapter ~ connect ~ address:",(i=(r=h==null?void 0:h.args)==null?void 0:r.address)==null?void 0:i.toString()),console.log("🚀 ~ file: BybitWallet.ts:153 ~ BybitWalletAdapter ~ connect ~ publicKey:",(o=(s=h==null?void 0:h.args)==null?void 0:s.publicKey)==null?void 0:o.toString()),typeof h=="boolean"&&(h=await(d==null?void 0:d.account())),this._wallet={address:(c=(a=h==null?void 0:h.args)==null?void 0:a.address)==null?void 0:c.toString(),publicKey:(u=(l=h==null?void 0:h.args)==null?void 0:l.publicKey)==null?void 0:u.toString(),isConnected:!0};try{this._network="aptos:mainnet",this._chainId=null,this._api=null}catch(f){const m=f.message;throw this.emit("error",new us(m)),f}this.emit("connect",this._wallet.publicKey)}catch(d){throw this.emit("error",d),d}finally{this._connecting=!1}}async disconnect(){var i;const t=this._wallet,r=this._provider||((i=window.bybitWallet)==null?void 0:i.aptos);if(t){this._wallet=null;try{await(r==null?void 0:r.disconnect())}catch(s){this.emit("error",new zr(s==null?void 0:s.message,s))}}this.emit("disconnect")}async signTransaction(t,r){var i;try{const s=this._wallet,o=this._provider||((i=window.bybitWallet)==null?void 0:i.aptos);if(!s||!o)throw new Te;const a=await o.signTransaction(t,r);if(a.code)throw new Error(a.message);return a}catch(s){const o=s.message;throw this.emit("error",new or(o)),s}}async signAndSubmitTransaction(t,r){var i,s;console.log("🚀 ~ file: BybitWallet.ts:226 ~ BybitWalletAdapter ~ signAndSubmitTransaction ~ transaction:",t),console.log("🚀 ~ file: BybitWallet.ts:226 ~ BybitWalletAdapter ~ signAndSubmitTransaction ~ (window as any).bybitWallet?.aptos:",(i=window.bybitWallet)==null?void 0:i.aptos);try{const o=this._wallet,a=this._provider||((s=window.bybitWallet)==null?void 0:s.aptos);if(!o||!a)throw new Te;const c={gasUnitPrice:void 0,maxGasAmount:void 0,payload:{function:t.function,functionArguments:t.arguments,typeArguments:t.type_arguments}};console.log("🚀 ~ file: BybitWallet.ts:226 ~ BybitWalletAdapter ~ signAndSubmitTransaction ~ tx:",c);const l=await(a==null?void 0:a.signAndSubmitTransaction(c));if(console.log("🚀 ~ file: BybitWallet.ts:226 ~ BybitWalletAdapter ~ signAndSubmitTransaction ~ response:",l),l.code)throw new Error(l.message);return l}catch(o){console.log("🚀 ~ file: BybitWallet.ts:226 ~ BybitWalletAdapter ~ signAndSubmitTransaction ~ error:",o);const a=o.message;throw this.emit("error",new mi(a)),o}}async signMessage(t){var r;try{const i=this._wallet,s=this._provider||((r=window.bybitWallet)==null?void 0:r.aptos);if(!i||!s)throw new Te;if(typeof t!="object"||!t.nonce)throw new un("Invalid signMessage Payload");const o=await(s==null?void 0:s.signMessage(t));if(o)return o;throw new Error("Sign Message failed")}catch(i){const s=i.message;throw this.emit("error",new un(s)),i}}async onAccountChange(){var t;try{const r=this._wallet,i=this._provider||((t=window.bybitWallet)==null?void 0:t.aptos);if(!r||!i)throw new Te;const s=async o=>{var a,c,l,u;if(o!=null&&o.publicKey)this._wallet={...this._wallet,publicKey:o.publicKey||((a=this._wallet)==null?void 0:a.publicKey),address:o.address||((c=this._wallet)==null?void 0:c.address)};else{const d=await(i==null?void 0:i.connect());this._wallet={...this._wallet,address:(d==null?void 0:d.address)||((l=this._wallet)==null?void 0:l.address),publicKey:(d==null?void 0:d.publicKey)||((u=this._wallet)==null?void 0:u.publicKey)}}this.emit("accountChange",o.publicKey)};i.on("accountChange",s)}catch(r){const i=r.message;throw this.emit("error",new ti(i)),r}}async onNetworkChange(){var t;try{const r=this._wallet,i=this._provider||((t=window.bybitWallet)==null?void 0:t.aptos);if(!r||!i)throw new Te}catch(r){const i=r.message;throw this.emit("error",new ni(i)),r}}}function j8(n){return"connect"in n}function ZS(n){return!j8(n)}function Zb(n){return n.flatMap(e=>ZS(e)?e.get():e)}const D8={async set(n,e){return localStorage.setItem(n,e)},async get(n){return localStorage.getItem(n)},async del(n){localStorage.removeItem(n)}},B8="Sui Wallet",R8="wallet-kit:last-wallet";function P8(){if(!document||document.visibilityState==="visible")return Promise.resolve();let n=null;const e=new Promise(r=>n=r),t=()=>{n&&document.visibilityState==="visible"&&(n(),document.removeEventListener("visibilitychange",t))};return document.addEventListener("visibilitychange",t),e}function Qb(n,e){return[...e.map(t=>n.find(r=>r.name===t)).filter(Boolean),...n.filter(t=>!e.includes(t.name))]}function U8({adapters:n,preferredWallets:e=[B8],storageAdapter:t=D8,storageKey:r=R8}){const i=new Set;let s=null,o={accounts:[],currentAccount:null,wallets:Qb(Zb(n),e),currentWallet:null,status:"DISCONNECTED"};const a=()=>({...o,isConnecting:o.status==="CONNECTING",isConnected:o.status==="CONNECTED",isError:o.status==="ERROR"});let c=a();function l(f){o={...o,...f},c=a(),i.forEach(m=>{try{m(c)}catch{}})}function u(){s&&(s(),s=null),l({status:"DISCONNECTED",accounts:[],currentAccount:null,currentWallet:null})}const d=n.filter(ZS);d.length&&d.map(f=>f.on("changed",()=>{l({wallets:Qb(Zb(n),e)})}));const h={async autoconnect(){if(!c.currentWallet){await P8();try{const f=await t.get(r);f&&h.connect(f)}catch{}}},getState(){return c},subscribe(f){i.add(f);try{f(c)}catch{}return()=>{i.delete(f)}},selectAccount(f){f===o.currentAccount||!o.accounts.includes(f)||l({currentAccount:f})},async connect(f){const m=o.wallets.find(w=>w.name===f)??null;if(l({currentWallet:m}),m&&!m.connecting){s&&s(),s=m.on("change",({connected:w,accounts:y})=>{w===!1?u():y&&l({accounts:y,currentAccount:o.currentAccount&&!y.find(({address:C})=>{var A;return C===((A=o.currentAccount)==null?void 0:A.address)})?y[0]:o.currentAccount})});try{l({status:"CONNECTING"}),await m.connect(),l({status:"CONNECTED"});try{await t.set(r,m.name)}catch{}const w=await m.getAccounts();l({accounts:w,currentAccount:w[0]??null})}catch(w){console.log("Wallet connection error",w),l({status:"ERROR"})}}else l({status:"DISCONNECTED"})},async disconnect(){if(!o.currentWallet){console.warn("Attempted to `disconnect` but no wallet was connected.");return}try{await t.del(r)}catch{}await o.currentWallet.disconnect(),u()},signMessage(f){if(!o.currentWallet||!o.currentAccount)throw new Error("No wallet is currently connected, cannot call `signMessage`.");return o.currentWallet.signMessage({...f,account:f.account??o.currentAccount})},async signTransactionBlock(f){if(!o.currentWallet||!o.currentAccount)throw new Error("No wallet is currently connected, cannot call `signTransaction`.");const{account:m=o.currentAccount,chain:w=o.currentAccount.chains[0]}=f;if(!w)throw new Error("Missing chain");return o.currentWallet.signTransactionBlock({...f,account:m,chain:w})},async signAndExecuteTransactionBlock(f){if(!o.currentWallet||!o.currentAccount)throw new Error("No wallet is currently connected, cannot call `signAndExecuteTransactionBlock`.");const{account:m=o.currentAccount,chain:w=o.currentAccount.chains[0]}=f;if(!w)throw new Error("Missing chain");return o.currentWallet.signAndExecuteTransactionBlock({...f,account:m,chain:w})}};return h}var F8=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},L8=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},rf;let Vu;const sf=new Set,Ml={};function Sy(){if(Vu||(Vu=Object.freeze({register:Hb,get:$8,on:V8}),typeof window>"u"))return Vu;const n=Object.freeze({register:Hb});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(n))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new q8(n))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Vu}function Hb(...n){var e;return n=n.filter(t=>!sf.has(t)),n.length?(n.forEach(t=>sf.add(t)),(e=Ml.register)==null||e.forEach(t=>Gb(()=>t(...n))),function(){var r;n.forEach(i=>sf.delete(i)),(r=Ml.unregister)==null||r.forEach(i=>Gb(()=>i(...n)))}):()=>{}}function $8(){return[...sf]}function V8(n,e){var t;return(t=Ml[n])!=null&&t.push(e)||(Ml[n]=[e]),function(){var i;Ml[n]=(i=Ml[n])==null?void 0:i.filter(s=>e!==s)}}function Gb(n){try{n()}catch(e){console.error(e)}}class q8 extends Event{constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),rf.set(this,void 0),F8(this,rf,e,"f")}get detail(){return L8(this,rf,"f")}get type(){return"wallet-standard:app-ready"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}rf=new WeakMap;var il=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},sl=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},of,af,cf,lf,uf,df;class mm{constructor(e){of.set(this,void 0),af.set(this,void 0),cf.set(this,void 0),lf.set(this,void 0),uf.set(this,void 0),df.set(this,void 0),new.target===mm&&Object.freeze(this),il(this,of,e.address,"f"),il(this,af,e.publicKey.slice(),"f"),il(this,cf,e.chains.slice(),"f"),il(this,lf,e.features.slice(),"f"),il(this,uf,e.label,"f"),il(this,df,e.icon,"f")}get address(){return sl(this,of,"f")}get publicKey(){return sl(this,af,"f").slice()}get chains(){return sl(this,cf,"f").slice()}get features(){return sl(this,lf,"f").slice()}get label(){return sl(this,uf,"f")}get icon(){return sl(this,df,"f")}}of=new WeakMap,af=new WeakMap,cf=new WeakMap,lf=new WeakMap,uf=new WeakMap,df=new WeakMap;const z8=["standard:connect","standard:events"];function W8(n,e=[]){return[...z8,...e].every(t=>t in n.features)}const K8="sui:testnet",Z8="sui:mainnet";function Cy(n){return{all:n=n||new Map,on:function(e,t){var r=n.get(e);r?r.push(t):n.set(e,[t])},off:function(e,t){var r=n.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var r=n.get(e);r&&r.slice().map(function(i){i(t)}),(r=n.get("*"))&&r.slice().map(function(i){i(e,t)})}}}const Yb="1.0.0",Xb="1.0.0";function Jb(n,e){const[t]=n.split("."),[r]=e.split(".");return Number(r)===Number(t)}var nu,Hn,jc,jd,k0;class e_{constructor({wallet:e}){st(this,jd);v(this,"connected",!1);v(this,"connecting",!1);st(this,nu,Cy());st(this,Hn,void 0);st(this,jc,null);v(this,"signMessage",e=>Z(this,Hn).features["sui:signMessage"].signMessage(e));v(this,"signTransactionBlock",e=>{const t=Z(this,Hn).features["sui:signTransactionBlock"].version;if(!Jb(t,Yb))throw new Error(`Version mismatch, signTransaction feature version ${t} is not compatible with version ${Yb}`);return Z(this,Hn).features["sui:signTransactionBlock"].signTransactionBlock(e)});v(this,"signAndExecuteTransactionBlock",e=>{const t=Z(this,Hn).features["sui:signAndExecuteTransactionBlock"].version;if(!Jb(t,Xb))throw new Error(`Version mismatch, signAndExecuteTransactionBlock feature version ${t} is not compatible with version ${Xb}`);return Z(this,Hn).features["sui:signAndExecuteTransactionBlock"].signAndExecuteTransactionBlock(e)});v(this,"signPersonalMessage",async e=>Z(this,Hn).features["sui:signPersonalMessage"].signMessage(e));v(this,"on",(e,t)=>(Z(this,nu).on(e,t),()=>{Z(this,nu).off(e,t)}));qe(this,Hn,e)}get name(){return Z(this,Hn).name}get icon(){return Z(this,Hn).icon}get wallet(){return Z(this,Hn)}async getAccounts(){return Z(this,Hn).accounts}async connect(){try{if(this.connected||this.connecting)return;if(this.connecting=!0,qe(this,jc,Z(this,Hn).features["standard:events"].on("change",async({accounts:e})=>{e&&(this.connected=e.length>0,await ze(this,jd,k0).call(this))})),Z(this,Hn).accounts.length||await Z(this,Hn).features["standard:connect"].connect(),!Z(this,Hn).accounts.length)throw new Error("No wallet accounts found");this.connected=!0,await ze(this,jd,k0).call(this)}finally{this.connecting=!1}}async disconnect(){Z(this,Hn).features["standard:disconnect"]&&await Z(this,Hn).features["standard:disconnect"].disconnect(),this.connected=!1,this.connecting=!1,Z(this,jc)&&(Z(this,jc).call(this),qe(this,jc,null))}}nu=new WeakMap,Hn=new WeakMap,jc=new WeakMap,jd=new WeakSet,k0=async function(){Z(this,nu).emit("change",{connected:this.connected,accounts:await this.getAccounts()})};function Q8(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var m=0,w=0,y=0,C=f.length;y!==C&&f[y]===0;)y++,m++;for(var A=(C-y)*l+1>>>0,M=new Uint8Array(A);y!==C;){for(var H=f[y],G=0,q=A-1;(H!==0||G<w)&&q!==-1;q--,G++)H+=256*M[q]>>>0,M[q]=H%o>>>0,H=H/o>>>0;if(H!==0)throw new Error("Non-zero carry");w=G,y++}for(var X=A-w;X!==A&&M[X]===0;)X++;for(var E=a.repeat(m);X<A;++X)E+=n.charAt(M[X]);return E}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;for(var m=0,w=0,y=0;f[m]===a;)w++,m++;for(var C=(f.length-m)*c+1>>>0,A=new Uint8Array(C);f[m];){var M=e[f.charCodeAt(m)];if(M===255)return;for(var H=0,G=C-1;(M!==0||H<y)&&G!==-1;G--,H++)M+=o*A[G]>>>0,A[G]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");y=H,m++}for(var q=C-y;q!==C&&A[q]===0;)q++;for(var X=new Uint8Array(w+(C-q)),E=w;q!==C;)X[E++]=A[q++];return X}function h(f){var m=d(f);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var H8=Q8;const G8=H8,Y8="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var QS=G8(Y8);const gm=n=>QS.encode(n),S0=n=>QS.decode(n);function ho(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}const yg=8192;function Oi(n){if(n.length<yg)return btoa(String.fromCharCode(...n));let e="";for(var t=0;t<n.length;t+=yg){const r=n.slice(t,t+yg);e+=String.fromCharCode(...r)}return btoa(e)}function HS(n){var i;const e=n.startsWith("0x")?n.slice(2):n,r=((i=(e.length%2===0?e:`0${e}}`).match(/.{2}/g))==null?void 0:i.map(s=>parseInt(s,16)))??[];return Uint8Array.from(r)}function gp(n){return n.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function Ay(n){let e=[],t=0;if(n===0)return[0];for(;n>0;)e[t]=n&127,(n>>=7)&&(e[t]|=128),t+=1;return e}function X8(n){let e=0,t=0,r=0;for(;;){let i=n[r];if(r+=1,e|=(i&127)<<t,!(i&128))break;t+=7}return{value:e,length:r}}class J8{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),r=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+r).toString(10)}read128(){let e=BigInt(this.read64()),r=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+r).toString(10)}read256(){let e=BigInt(this.read128()),r=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+r).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:i}=X8(t);return this.shift(i),r}readVec(e){let t=this.readULEB(),r=[];for(let i=0;i<t;i++)r.push(e(this,i,t));return r}}function ej(n,e){switch(e){case"base58":return gm(n);case"base64":return Oi(n);case"hex":return gp(n);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function tj(n,e=["<",">"]){const[t,r]=e,i=[];let s="",o=0;for(let a=0;a<n.length;a++){const c=n[a];if(c===t&&o++,c===r&&o--,o===0&&c===","){i.push(s.trim()),s="";continue}s+=c}return i.push(s.trim()),i}class nj{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const r=Math.min(this.maxSize,this.size+this.allocateSize);if(t>r)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=r;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return bg(BigInt(e),8).forEach(t=>this.write8(t)),this}write128(e){return bg(BigInt(e),16).forEach(t=>this.write8(t)),this}write256(e){return bg(BigInt(e),32).forEach(t=>this.write8(t)),this}writeULEB(e){return Ay(e).forEach(t=>this.write8(t)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((r,i)=>t(this,r,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return ej(this.toBytes(),e)}}function bg(n,e){let t=new Uint8Array(e),r=0;for(;n>0;)t[r]=Number(n%BigInt(256)),n=n/BigInt(256),r+=1;return t}var GS=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},xs=(n,e,t)=>(GS(n,e,"read from private field"),t?t.call(n):e.get(n)),wp=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},yp=(n,e,t,r)=>(GS(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),bl,Ju,hf,wa;const YS=class{constructor(n){wp(this,bl,void 0),wp(this,Ju,void 0),this.name=n.name,this.read=n.read,this.serializedSize=n.serializedSize??(()=>null),yp(this,bl,n.write),yp(this,Ju,n.serialize??((e,t)=>{const r=new nj({initialSize:this.serializedSize(e)??void 0,...t});return xs(this,bl).call(this,e,r),r.toBytes()})),this.validate=n.validate??(()=>{})}write(n,e){this.validate(n),xs(this,bl).call(this,n,e)}serialize(n,e){return this.validate(n),new rj(this,xs(this,Ju).call(this,n,e))}parse(n){const e=new J8(n);return this.read(e)}fromHex(n){return this.parse(HS(n))}fromBase58(n){return this.parse(S0(n))}fromBase64(n){return this.parse(ho(n))}transform({name:n,input:e,output:t,validate:r}){return new YS({name:n??this.name,read:i=>t(this.read(i)),write:(i,s)=>xs(this,bl).call(this,e(i),s),serializedSize:i=>this.serializedSize(e(i)),serialize:(i,s)=>xs(this,Ju).call(this,e(i),s),validate:i=>{r==null||r(i),this.validate(e(i))}})}};let Fo=YS;bl=new WeakMap;Ju=new WeakMap;const XS=Symbol.for("@mysten/serialized-bcs");function JS(n){return!!n&&typeof n=="object"&&n[XS]===!0}class rj{constructor(e,t){wp(this,hf,void 0),wp(this,wa,void 0),yp(this,hf,e),yp(this,wa,t)}get[XS](){return!0}toBytes(){return xs(this,wa)}toHex(){return gp(xs(this,wa))}toBase64(){return Oi(xs(this,wa))}toBase58(){return gm(xs(this,wa))}parse(){return xs(this,hf).parse(xs(this,wa))}}hf=new WeakMap;wa=new WeakMap;function bp({size:n,...e}){return new Fo({...e,serializedSize:()=>n})}function _g({readMethod:n,writeMethod:e,...t}){return bp({...t,read:r=>r[n](),write:(r,i)=>i[e](r),validate:r=>{var i;if(r<0||r>t.maxValue)throw new TypeError(`Invalid ${t.name} value: ${r}. Expected value in range 0-${t.maxValue}`);(i=t.validate)==null||i.call(t,r)}})}function vg({readMethod:n,writeMethod:e,...t}){return bp({...t,read:r=>r[n](),write:(r,i)=>i[e](BigInt(r)),validate:r=>{var s;const i=BigInt(r);if(i<0||i>t.maxValue)throw new TypeError(`Invalid ${t.name} value: ${i}. Expected value in range 0-${t.maxValue}`);(s=t.validate)==null||s.call(t,i)}})}function ij({serialize:n,...e}){const t=new Fo({...e,serialize:n,write:(r,i)=>{for(const s of t.serialize(r).toBytes())i.write8(s)}});return t}function sj({toBytes:n,fromBytes:e,...t}){return new Fo({...t,read:r=>{const i=r.readULEB(),s=r.readBytes(i);return e(s)},write:(r,i)=>{const s=n(r);i.writeULEB(s.length);for(let o=0;o<s.length;o++)i.write8(s[o])},serialize:r=>{const i=n(r),s=Ay(i.length),o=new Uint8Array(s.length+i.length);return o.set(s,0),o.set(i,s.length),o},validate:r=>{var i;if(typeof r!="string")throw new TypeError(`Invalid ${t.name} value: ${r}. Expected string`);(i=t.validate)==null||i.call(t,r)}})}function oj(n){let e=null;function t(){return e||(e=n()),e}return new Fo({name:"lazy",read:r=>t().read(r),serializedSize:r=>t().serializedSize(r),write:(r,i)=>t().write(r,i),serialize:(r,i)=>t().serialize(r,i).toBytes()})}const ee={u8(n){return _g({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...n})},u16(n){return _g({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...n})},u32(n){return _g({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...n})},u64(n){return vg({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...n})},u128(n){return vg({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...n})},u256(n){return vg({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...n})},bool(n){return bp({name:"bool",size:1,read:e=>e.read8()===1,write:(e,t)=>t.write8(e?1:0),...n,validate:e=>{var t;if((t=n==null?void 0:n.validate)==null||t.call(n,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(n){return ij({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Ay(e)),...n})},bytes(n,e){return bp({name:`bytes[${n}]`,size:n,read:t=>t.readBytes(n),write:(t,r)=>{for(let i=0;i<n;i++)r.write8(t[i]??0)},...e,validate:t=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,t),!t||typeof t!="object"||!("length"in t))throw new TypeError(`Expected array, found ${typeof t}`);if(t.length!==n)throw new TypeError(`Expected array of length ${n}, found ${t.length}`)}})},string(n){return sj({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...n})},fixedArray(n,e,t){return new Fo({name:`${e.name}[${n}]`,read:r=>{const i=new Array(n);for(let s=0;s<n;s++)i[s]=e.read(r);return i},write:(r,i)=>{for(const s of r)e.write(s,i)},...t,validate:r=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==n)throw new TypeError(`Expected array of length ${n}, found ${r.length}`)}})},option(n){return ee.enum(`Option<${n.name}>`,{None:null,Some:n}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(n,e){return new Fo({name:`vector<${n.name}>`,read:t=>{const r=t.readULEB(),i=new Array(r);for(let s=0;s<r;s++)i[s]=n.read(t);return i},write:(t,r)=>{r.writeULEB(t.length);for(const i of t)n.write(i,r)},...e,validate:t=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,t),!t||typeof t!="object"||!("length"in t))throw new TypeError(`Expected array, found ${typeof t}`)}})},tuple(n,e){return new Fo({name:`(${n.map(t=>t.name).join(", ")})`,serializedSize:t=>{let r=0;for(let i=0;i<n.length;i++){const s=n[i].serializedSize(t[i]);if(s==null)return null;r+=s}return r},read:t=>{const r=[];for(const i of n)r.push(i.read(t));return r},write:(t,r)=>{for(let i=0;i<n.length;i++)n[i].write(t[i],r)},...e,validate:t=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,t),!Array.isArray(t))throw new TypeError(`Expected array, found ${typeof t}`);if(t.length!==n.length)throw new TypeError(`Expected array of length ${n.length}, found ${t.length}`)}})},struct(n,e,t){const r=Object.entries(e);return new Fo({name:n,serializedSize:i=>{let s=0;for(const[o,a]of r){const c=a.serializedSize(i[o]);if(c==null)return null;s+=c}return s},read:i=>{const s={};for(const[o,a]of r)s[o]=a.read(i);return s},write:(i,s)=>{for(const[o,a]of r)a.write(i[o],s)},...t,validate:i=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})},enum(n,e,t){const r=Object.entries(e);return new Fo({name:n,read:i=>{const s=i.readULEB(),[o,a]=r[s];return{[o]:(a==null?void 0:a.read(i))??!0,$kind:o}},write:(i,s)=>{const[o,a]=Object.entries(i).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<r.length;c++){const[l,u]=r[c];if(l===o){s.writeULEB(c),u==null||u.write(a,s);return}}},...t,validate:i=>{var a;if((a=t==null?void 0:t.validate)==null||a.call(t,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);const s=Object.keys(i).filter(c=>i[c]!==void 0&&Object.hasOwn(e,c));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${n}}`);const[o]=s;if(!Object.hasOwn(e,o))throw new TypeError(`Invalid enum variant ${o}`)}})},map(n,e){return ee.vector(ee.tuple([n,e])).transform({name:`Map<${n.name}, ${e.name}>`,input:t=>[...t.entries()],output:t=>{const r=new Map;for(const[i,s]of t)r.set(i,s);return r}})},lazy(n){return oj(n)}},Ty=32;function e2(n){return aj(n)&&cj(n)===Ty}function $n(n,e=!1){let t=n.toLowerCase();return!e&&t.startsWith("0x")&&(t=t.slice(2)),`0x${t.padStart(Ty*2,"0")}`}function kd(n,e=!1){return $n(n,e)}function aj(n){return/^(0x|0X)?[a-fA-F0-9]+$/.test(n)&&n.length%2===0}function cj(n){return/^(0x|0X)/.test(n)?(n.length-2)/2:n.length/2}const lj=/^vector<(.+)>$/,uj=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class ao{static parseFromStr(e,t=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const r=e.match(lj);if(r)return{vector:ao.parseFromStr(r[1],t)};const i=e.match(uj);if(i)return{struct:{address:t?$n(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:ao.parseStructTypeArgs(i[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return tj(e).map(r=>ao.parseFromStr(r,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${ao.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,r=t.typeParams.map(ao.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}function dj(n){return ee.u64({name:"unsafe_u64",...n}).transform({input:e=>e,output:e=>Number(e)})}function hj(n){return ee.enum("Option",{None:null,Some:n})}const Wn=ee.bytes(Ty).transform({validate:n=>{const e=typeof n=="string"?n:gp(n);if(!e||!e2($n(e)))throw new Error(`Invalid Sui address ${e}`)},input:n=>typeof n=="string"?HS($n(n)):n,output:n=>$n(gp(n))}),Ms=ee.vector(ee.u8()).transform({name:"ObjectDigest",input:n=>S0(n),output:n=>gm(new Uint8Array(n)),validate:n=>{if(S0(n).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Yi=ee.struct("SuiObjectRef",{objectId:Wn,version:ee.u64(),digest:Ms}),t2=ee.struct("SharedObjectRef",{objectId:Wn,initialSharedVersion:ee.u64(),mutable:ee.bool()}),n2=ee.enum("ObjectArg",{ImmOrOwnedObject:Yi,SharedObject:t2,Receiving:Yi}),r2=ee.enum("CallArg",{Pure:ee.struct("Pure",{bytes:ee.vector(ee.u8()).transform({input:n=>typeof n=="string"?ho(n):n,output:n=>Oi(new Uint8Array(n))})}),Object:n2}),Iy=ee.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:ee.lazy(()=>Iy),struct:ee.lazy(()=>l2),u16:null,u32:null,u256:null}),xy=Iy.transform({input:n=>typeof n=="string"?ao.parseFromStr(n,!0):n,output:n=>ao.tagToString(n)}),Ys=ee.enum("Argument",{GasCoin:null,Input:ee.u16(),Result:ee.u16(),NestedResult:ee.tuple([ee.u16(),ee.u16()])}),i2=ee.struct("ProgrammableMoveCall",{package:Wn,module:ee.string(),function:ee.string(),typeArguments:ee.vector(xy),arguments:ee.vector(Ys)}),s2=ee.enum("Command",{MoveCall:i2,TransferObjects:ee.struct("TransferObjects",{objects:ee.vector(Ys),address:Ys}),SplitCoins:ee.struct("SplitCoins",{coin:Ys,amounts:ee.vector(Ys)}),MergeCoins:ee.struct("MergeCoins",{destination:Ys,sources:ee.vector(Ys)}),Publish:ee.struct("Publish",{modules:ee.vector(ee.vector(ee.u8()).transform({input:n=>typeof n=="string"?ho(n):n,output:n=>Oi(new Uint8Array(n))})),dependencies:ee.vector(Wn)}),MakeMoveVec:ee.struct("MakeMoveVec",{type:hj(xy).transform({input:n=>n===null?{None:!0}:{Some:n},output:n=>n.Some??null}),elements:ee.vector(Ys)}),Upgrade:ee.struct("Upgrade",{modules:ee.vector(ee.vector(ee.u8()).transform({input:n=>typeof n=="string"?ho(n):n,output:n=>Oi(new Uint8Array(n))})),dependencies:ee.vector(Wn),package:Wn,ticket:Ys})}),o2=ee.struct("ProgrammableTransaction",{inputs:ee.vector(r2),commands:ee.vector(s2)}),a2=ee.enum("TransactionKind",{ProgrammableTransaction:o2,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),c2=ee.enum("TransactionExpiration",{None:null,Epoch:dj()}),l2=ee.struct("StructTag",{address:Wn,module:ee.string(),name:ee.string(),typeParams:ee.vector(Iy)}),u2=ee.struct("GasData",{payment:ee.vector(Yi),owner:Wn,price:ee.u64(),budget:ee.u64()}),d2=ee.struct("TransactionDataV1",{kind:a2,sender:Wn,gasData:u2,expiration:c2}),h2=ee.enum("TransactionData",{V1:d2}),f2=ee.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),p2=ee.enum("IntentVersion",{V0:null}),m2=ee.enum("AppId",{Sui:null}),g2=ee.struct("Intent",{scope:f2,version:p2,appId:m2});function w2(n){return ee.struct(`IntentMessage<${n.name}>`,{intent:g2,value:n})}const y2=ee.enum("CompressedSignature",{ED25519:ee.fixedArray(64,ee.u8()),Secp256k1:ee.fixedArray(64,ee.u8()),Secp256r1:ee.fixedArray(64,ee.u8()),ZkLogin:ee.vector(ee.u8())}),b2=ee.enum("PublicKey",{ED25519:ee.fixedArray(32,ee.u8()),Secp256k1:ee.fixedArray(33,ee.u8()),Secp256r1:ee.fixedArray(33,ee.u8()),ZkLogin:ee.vector(ee.u8())}),_2=ee.struct("MultiSigPkMap",{pubKey:b2,weight:ee.u8()}),v2=ee.struct("MultiSigPublicKey",{pk_map:ee.vector(_2),threshold:ee.u16()}),fj=ee.struct("MultiSig",{sigs:ee.vector(y2),bitmap:ee.u16(),multisig_pk:v2}),pj=ee.vector(ee.u8()).transform({input:n=>typeof n=="string"?ho(n):n,output:n=>Oi(new Uint8Array(n))}),k2=ee.struct("SenderSignedTransaction",{intentMessage:w2(h2),txSignatures:ee.vector(pj)}),mj=ee.vector(k2,{name:"SenderSignedData"}),gj=ee.enum("PackageUpgradeError",{UnableToFetchPackage:ee.struct("UnableToFetchPackage",{packageId:Wn}),NotAPackage:ee.struct("NotAPackage",{objectId:Wn}),IncompatibleUpgrade:null,DigestDoesNotMatch:ee.struct("DigestDoesNotMatch",{digest:ee.vector(ee.u8())}),UnknownUpgradePolicy:ee.struct("UnknownUpgradePolicy",{policy:ee.u8()}),PackageIDDoesNotMatch:ee.struct("PackageIDDoesNotMatch",{packageId:Wn,ticketId:Wn})}),wj=ee.struct("ModuleId",{address:Wn,name:ee.string()}),t_=ee.struct("MoveLocation",{module:wj,function:ee.u16(),instruction:ee.u16(),functionName:ee.option(ee.string())}),yj=ee.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:ee.struct("IndexOutOfBounds",{idx:ee.u16()}),SecondaryIndexOutOfBounds:ee.struct("SecondaryIndexOutOfBounds",{resultIdx:ee.u16(),secondaryIdx:ee.u16()}),InvalidResultArity:ee.struct("InvalidResultArity",{resultIdx:ee.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),bj=ee.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),_j=ee.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:ee.struct("MoveObjectTooBig",{objectSize:ee.u64(),maxObjectSize:ee.u64()}),MovePackageTooBig:ee.struct("MovePackageTooBig",{objectSize:ee.u64(),maxObjectSize:ee.u64()}),CircularObjectOwnership:ee.struct("CircularObjectOwnership",{object:Wn}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:ee.option(t_),MoveAbort:ee.tuple([t_,ee.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:ee.struct("CommandArgumentError",{argIdx:ee.u16(),kind:yj}),TypeArgumentError:ee.struct("TypeArgumentError",{argumentIdx:ee.u16(),kind:bj}),UnusedValueWithoutDrop:ee.struct("UnusedValueWithoutDrop",{resultIdx:ee.u16(),secondaryIdx:ee.u16()}),InvalidPublicFunctionReturnType:ee.struct("InvalidPublicFunctionReturnType",{idx:ee.u16()}),InvalidTransferObject:null,EffectsTooLarge:ee.struct("EffectsTooLarge",{currentSize:ee.u64(),maxSize:ee.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:ee.struct("PackageUpgradeError",{upgradeError:gj}),WrittenObjectsTooLarge:ee.struct("WrittenObjectsTooLarge",{currentSize:ee.u64(),maxSize:ee.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),S2=ee.enum("ExecutionStatus",{Success:null,Failed:ee.struct("ExecutionFailed",{error:_j,command:ee.option(ee.u64())})}),C2=ee.struct("GasCostSummary",{computationCost:ee.u64(),storageCost:ee.u64(),storageRebate:ee.u64(),nonRefundableStorageFee:ee.u64()}),Ol=ee.enum("Owner",{AddressOwner:Wn,ObjectOwner:Wn,Shared:ee.struct("Shared",{initialSharedVersion:ee.u64()}),Immutable:null}),vj=ee.struct("TransactionEffectsV1",{status:S2,executedEpoch:ee.u64(),gasUsed:C2,modifiedAtVersions:ee.vector(ee.tuple([Wn,ee.u64()])),sharedObjects:ee.vector(Yi),transactionDigest:Ms,created:ee.vector(ee.tuple([Yi,Ol])),mutated:ee.vector(ee.tuple([Yi,Ol])),unwrapped:ee.vector(ee.tuple([Yi,Ol])),deleted:ee.vector(Yi),unwrappedThenDeleted:ee.vector(Yi),wrapped:ee.vector(Yi),gasObject:ee.tuple([Yi,Ol]),eventsDigest:ee.option(Ms),dependencies:ee.vector(Ms)}),Ey=ee.tuple([ee.u64(),Ms]),kj=ee.enum("ObjectIn",{NotExist:null,Exist:ee.tuple([Ey,Ol])}),Sj=ee.enum("ObjectOut",{NotExist:null,ObjectWrite:ee.tuple([Ms,Ol]),PackageWrite:Ey}),Cj=ee.enum("IDOperation",{None:null,Created:null,Deleted:null}),Aj=ee.struct("EffectsObjectChange",{inputState:kj,outputState:Sj,idOperation:Cj}),Tj=ee.enum("UnchangedSharedKind",{ReadOnlyRoot:Ey,MutateDeleted:ee.u64(),ReadDeleted:ee.u64()}),Ij=ee.struct("TransactionEffectsV2",{status:S2,executedEpoch:ee.u64(),gasUsed:C2,transactionDigest:Ms,gasObjectIndex:ee.option(ee.u32()),eventsDigest:ee.option(Ms),dependencies:ee.vector(Ms),lamportVersion:ee.u64(),changedObjects:ee.vector(ee.tuple([Wn,Aj])),unchangedSharedObjects:ee.vector(ee.tuple([Wn,Tj])),auxDataDigest:ee.option(Ms)}),xj=ee.enum("TransactionEffects",{V1:vj,V2:Ij}),Kt={...ee,U8:ee.u8(),U16:ee.u16(),U32:ee.u32(),U64:ee.u64(),U128:ee.u128(),U256:ee.u256(),ULEB128:ee.uleb128(),Bool:ee.bool(),String:ee.string(),Address:Wn,AppId:m2,Argument:Ys,CallArg:r2,CompressedSignature:y2,GasData:u2,Intent:g2,IntentMessage:w2,IntentScope:f2,IntentVersion:p2,MultiSig:fj,MultiSigPkMap:_2,MultiSigPublicKey:v2,ObjectArg:n2,ObjectDigest:Ms,ProgrammableMoveCall:i2,ProgrammableTransaction:o2,PublicKey:b2,SenderSignedData:mj,SenderSignedTransaction:k2,SharedObjectRef:t2,StructTag:l2,SuiObjectRef:Yi,Command:s2,TransactionData:h2,TransactionDataV1:d2,TransactionExpiration:c2,TransactionKind:a2,TypeTag:xy,TransactionEffects:xj};BigInt(1e9);const Ej="0x1",A2="0x2";kd("0x6");const Mj=`${A2}::sui::SUI`;kd("0x5");const Oj="object",Nj="ID",jj="ascii",Dj="String",Bj="string",Rj="String",Pj="option",Uj="Option";function Fj(n){const e=typeof n.body=="object"&&"datatype"in n.body?n.body.datatype:null;return!!e&&$n(e.package)===$n("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function C0(n){if(typeof n=="string")switch(n){case"address":return Kt.Address;case"bool":return Kt.Bool;case"u8":return Kt.U8;case"u16":return Kt.U16;case"u32":return Kt.U32;case"u64":return Kt.U64;case"u128":return Kt.U128;case"u256":return Kt.U256;default:throw new Error(`Unknown type signature ${n}`)}if("vector"in n){if(n.vector==="u8")return Kt.vector(Kt.U8).transform({input:t=>typeof t=="string"?new TextEncoder().encode(t):t,output:t=>t});const e=C0(n.vector);return e?Kt.vector(e):null}if("datatype"in n){const e=$n(n.datatype.package);if(e===$n(Ej)){if(n.datatype.module===jj&&n.datatype.type===Dj||n.datatype.module===Bj&&n.datatype.type===Rj)return Kt.String;if(n.datatype.module===Pj&&n.datatype.type===Uj){const t=C0(n.datatype.typeParameters[0]);return t?Kt.vector(t):null}}if(e===$n(A2)&&n.datatype.module===Oj&&n.datatype.type===Nj)return Kt.Address}return null}function Lj(n){return typeof n=="object"&&"Reference"in n?{ref:"&",body:dd(n.Reference)}:typeof n=="object"&&"MutableReference"in n?{ref:"&mut",body:dd(n.MutableReference)}:{ref:null,body:dd(n)}}function dd(n){if(typeof n=="string")switch(n){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${n}`)}if("Vector"in n)return{vector:dd(n.Vector)};if("Struct"in n)return{datatype:{package:n.Struct.address,module:n.Struct.module,type:n.Struct.name,typeParameters:n.Struct.typeArguments.map(dd)}};if("TypeParameter"in n)return{typeParameter:n.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(n)}`)}function $j(n){return{$kind:"Pure",Pure:{bytes:n instanceof Uint8Array?Oi(n):n.toBase64()}}}const qo={Pure:$j,ObjectRef({objectId:n,digest:e,version:t}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:t,objectId:$n(n)}}}},SharedObjectRef({objectId:n,mutable:e,initialSharedVersion:t}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:t,objectId:$n(n)}}}},ReceivingRef({objectId:n,digest:e,version:t}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:t,objectId:$n(n)}}}}};var T2=class extends Error{constructor(e){super(e[0].message);v(this,"issues");this.name="ValiError",this.issues=e}};function I2(n){return typeof n=="function"?n():n}function My(n,e,t,r,i){return{issues:[{validation:n,message:I2(e),input:t,requirement:r,path:i}]}}function Oy(n){return{output:n}}function Fs(n,e){return Array.isArray(n)?[void 0,n]:[n,e]}function So(n,e,t){return{typed:n,output:e,issues:t}}function x2(n,e,t){if(!n||typeof n=="object"&&!Array.isArray(n)){const[s,o]=Fs(e,t);return[n,s,o]}const[r,i]=Fs(n,e);return[void 0,r,i]}function Vj(n,e){return{reason:n==null?void 0:n.reason,validation:e.validation,origin:(n==null?void 0:n.origin)||"value",message:e.message,input:e.input,requirement:e==null?void 0:e.requirement,path:e.path,abortEarly:n==null?void 0:n.abortEarly,abortPipeEarly:n==null?void 0:n.abortPipeEarly,skipPipe:n==null?void 0:n.skipPipe}}function qj(n,e){return{reason:e,origin:n==null?void 0:n.origin,abortEarly:n==null?void 0:n.abortEarly,abortPipeEarly:n==null?void 0:n.abortPipeEarly,skipPipe:n==null?void 0:n.skipPipe}}function hs(n,e,t,r,i){let s,o=n;if(e!=null&&e.length&&!(t!=null&&t.skipPipe))for(const a of e){const c=a._parse(o);if(c.issues){s=s||qj(t,r);for(const l of c.issues){const u=Vj(s,l);i?i.push(u):i=[u]}if(s.abortEarly||s.abortPipeEarly)break}else o=c.output}return So(!0,o,i)}function ls(n,e,t,r,i,s,o){return{typed:!1,output:i,issues:[{reason:e,validation:t,origin:(n==null?void 0:n.origin)||"value",message:I2(r),input:i,path:s,issues:o,abortEarly:n==null?void 0:n.abortEarly,abortPipeEarly:n==null?void 0:n.abortPipeEarly,skipPipe:n==null?void 0:n.skipPipe}]}}function Ny(n){return typeof n.default=="function"?n.default():n.default}function A0(n,e,t){return!n._parse(e,{abortEarly:!0,skipPipe:t==null?void 0:t.skipPipe}).issues}function zt(n,e,t){const[r="Invalid type",i]=Fs(e,t);return{type:"array",async:!1,item:n,message:r,pipe:i,_parse(s,o){if(!Array.isArray(s))return ls(o,"type","array",this.message,s);let a=!0,c;const l=[];for(let u=0;u<s.length;u++){const d=s[u],h=this.item._parse(d,o);if(h.issues){const f={type:"array",input:s,key:u,value:d};for(const m of h.issues)m.path?m.path.unshift(f):m.path=[f],c==null||c.push(m);if(c||(c=h.issues),o!=null&&o.abortEarly){a=!1;break}}h.typed||(a=!1),l.push(h.output)}return a?hs(l,this.pipe,o,"array",c):So(!1,l,c)}}}function zj(n,e){const[t="Invalid type",r]=Fs(n,e);return{type:"bigint",async:!1,message:t,pipe:r,_parse(i,s){return typeof i!="bigint"?ls(s,"type","bigint",this.message,i):hs(i,this.pipe,s,"bigint")}}}function jy(n,e){const[t="Invalid type",r]=Fs(n,e);return{type:"boolean",async:!1,message:t,pipe:r,_parse(i,s){return typeof i!="boolean"?ls(s,"type","boolean",this.message,i):hs(i,this.pipe,s,"boolean")}}}function En(n,e="Invalid type"){return{type:"literal",async:!1,literal:n,message:e,_parse(t,r){return t!==this.literal?ls(r,"type","literal",this.message,t):So(!0,t)}}}function gr(n,e){return{type:"nullable",async:!1,wrapped:n,default:e,_parse(t,r){if(t===null){const i=Ny(this);if(i===void 0)return So(!0,t);t=i}return this.wrapped._parse(t,r)}}}function _p(n,e){return{type:"nullish",async:!1,wrapped:n,default:e,_parse(t,r){if(t==null){const i=Ny(this);if(i===void 0)return So(!0,t);t=i}return this.wrapped._parse(t,r)}}}function xi(n,e){const[t="Invalid type",r]=Fs(n,e);return{type:"number",async:!1,message:t,pipe:r,_parse(i,s){return typeof i!="number"||isNaN(i)?ls(s,"type","number",this.message,i):hs(i,this.pipe,s,"number")}}}function ot(n,e,t,r){const[i,s="Invalid type",o]=x2(e,t,r);let a;return{type:"object",async:!1,entries:n,rest:i,message:s,pipe:o,_parse(c,l){if(!c||typeof c!="object")return ls(l,"type","object",this.message,c);a=a||Object.entries(this.entries);let u=!0,d;const h={};for(const[f,m]of a){const w=c[f],y=m._parse(w,l);if(y.issues){const C={type:"object",input:c,key:f,value:w};for(const A of y.issues)A.path?A.path.unshift(C):A.path=[C],d==null||d.push(A);if(d||(d=y.issues),l!=null&&l.abortEarly){u=!1;break}}y.typed||(u=!1),(y.output!==void 0||f in c)&&(h[f]=y.output)}if(this.rest&&!(l!=null&&l.abortEarly&&d)){for(const f in c)if(!(f in this.entries)){const m=c[f],w=this.rest._parse(m,l);if(w.issues){const y={type:"object",input:c,key:f,value:m};for(const C of w.issues)C.path?C.path.unshift(y):C.path=[y],d==null||d.push(C);if(d||(d=w.issues),l!=null&&l.abortEarly){u=!1;break}}w.typed||(u=!1),h[f]=w.output}}return u?hs(h,this.pipe,l,"object",d):So(!1,h,d)}}}function Zo(n,e){return{type:"optional",async:!1,wrapped:n,default:e,_parse(t,r){if(t===void 0){const i=Ny(this);if(i===void 0)return So(!0,t);t=i}return this.wrapped._parse(t,r)}}}function Pt(n,e){const[t="Invalid type",r]=Fs(n,e);return{type:"string",async:!1,message:t,pipe:r,_parse(i,s){return typeof i!="string"?ls(s,"type","string",this.message,i):hs(i,this.pipe,s,"string")}}}function Wj(n,e,t,r){if(typeof e=="object"&&!Array.isArray(e)){const[o,a]=Fs(t,r);return[n,e,o,a]}const[i,s]=Fs(e,t);return[Pt(),n,i,s]}var Kj=["__proto__","prototype","constructor"];function vp(n,e,t,r){const[i,s,o="Invalid type",a]=Wj(n,e,t,r);return{type:"record",async:!1,key:i,value:s,message:o,pipe:a,_parse(c,l){if(!c||typeof c!="object")return ls(l,"type","record",this.message,c);let u=!0,d;const h={};for(const[f,m]of Object.entries(c))if(!Kj.includes(f)){let w;const y=this.key._parse(f,{origin:"key",abortEarly:l==null?void 0:l.abortEarly,abortPipeEarly:l==null?void 0:l.abortPipeEarly,skipPipe:l==null?void 0:l.skipPipe});if(y.issues){w={type:"record",input:c,key:f,value:m};for(const A of y.issues)A.path=[w],d==null||d.push(A);if(d||(d=y.issues),l!=null&&l.abortEarly){u=!1;break}}const C=this.value._parse(m,l);if(C.issues){w=w||{type:"record",input:c,key:f,value:m};for(const A of C.issues)A.path?A.path.unshift(w):A.path=[w],d==null||d.push(A);if(d||(d=C.issues),l!=null&&l.abortEarly){u=!1;break}}(!y.typed||!C.typed)&&(u=!1),y.typed&&(h[y.output]=C.output)}return u?hs(h,this.pipe,l,"record",d):So(!1,h,d)}}}function n_(n){return{type:"recursive",async:!1,getter:n,_parse(e,t){return this.getter()._parse(e,t)}}}function E2(n,e,t,r){const[i,s="Invalid type",o]=x2(e,t,r);return{type:"tuple",async:!1,items:n,rest:i,message:s,pipe:o,_parse(a,c){if(!Array.isArray(a)||this.items.length>a.length)return ls(c,"type","tuple",this.message,a);let l=!0,u;const d=[];for(let h=0;h<this.items.length;h++){const f=a[h],m=this.items[h]._parse(f,c);if(m.issues){const w={type:"tuple",input:a,key:h,value:f};for(const y of m.issues)y.path?y.path.unshift(w):y.path=[w],u==null||u.push(y);if(u||(u=m.issues),c!=null&&c.abortEarly){l=!1;break}}m.typed||(l=!1),d[h]=m.output}if(this.rest&&!(c!=null&&c.abortEarly&&u))for(let h=this.items.length;h<a.length;h++){const f=a[h],m=this.rest._parse(f,c);if(m.issues){const w={type:"tuple",input:a,key:h,value:f};for(const y of m.issues)y.path?y.path.unshift(w):y.path=[w],u==null||u.push(y);if(u||(u=m.issues),c!=null&&c.abortEarly){l=!1;break}}m.typed||(l=!1),d[h]=m.output}return l?hs(d,this.pipe,c,"tuple",u):So(!1,d,u)}}}function Yo(n,e,t){const[r="Invalid type",i]=Fs(e,t);return{type:"union",async:!1,options:n,message:r,pipe:i,_parse(s,o){let a,c;for(const l of this.options){const u=l._parse(s,o);if(u.issues)if(a)for(const d of u.issues)a.push(d);else a=u.issues;else{c=[u.output];break}}return c?hs(c[0],this.pipe,o,"union"):ls(o,"type","union",this.message,s,void 0,a)}}}function wm(n){return{type:"unknown",async:!1,pipe:n,_parse(e,t){return hs(e,this.pipe,t,"unknown")}}}function M2(n,e,t,r){const[i="Invalid type",s]=Fs(t,r);return{type:"variant",async:!1,key:n,options:e,message:i,pipe:s,_parse(o,a){if(!o||typeof o!="object")return ls(a,"type","variant",this.message,o);if(this.key in o){let c,l;const u=d=>{for(const h of d)if(h.type==="object"){if(!h.entries[this.key]._parse(o[this.key],a).issues){const m=h._parse(o,a);if(m.issues)c=m.issues;else{l=[m.output];break}}}else if(h.type==="variant"&&(u(h.options),l))break};if(u(this.options),l)return hs(l[0],this.pipe,a,"variant");if(c)return So(!1,l,c)}return ls(a,"type","variant",this.message,o,[{type:"object",input:o,key:this.key,value:void 0}])}}}function Fn(n,e,t){const r=n._parse(e,t);if(r.issues)throw new T2(r.issues);return r.output}function Zj(n,e,t){const r=n._parse(e,t);return{typed:r.typed,success:!r.issues,data:r.output,output:r.output,error:r.issues&&new T2(r.issues),issues:r.issues}}function Dy(n,e,t){return{...n,_parse(r,i){const s=n._parse(r,i);return s.typed?(s.output=e(s.output,{issues:s.issues}),s.issues||!t?s:Array.isArray(t)?hs(s.output,t,i,typeof s.output):t._parse(s.output,i)):s}}}var Qj=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function O2(n,e="Invalid input"){return{type:"custom",async:!1,message:e,requirement:n,_parse(t){return this.requirement(t)?Oy(t):My(this.type,this.message,t,this.requirement)}}}function Ei(n="Invalid integer"){return{type:"integer",async:!1,message:n,requirement:Number.isInteger,_parse(e){return this.requirement(e)?Oy(e):My(this.type,this.message,e,this.requirement)}}}function Hj(n="Invalid UUID"){return{type:"uuid",async:!1,message:n,requirement:Qj,_parse(e){return this.requirement.test(e)?Oy(e):My(this.type,this.message,e,this.requirement)}}}function Xc(n){const e=Object.entries(n).map(([t,r])=>ot({[t]:r}));return Dy(Yo(e),t=>({...t,$kind:Object.keys(t)[0]}))}const Eu=Dy(Pt(),n=>$n(n),[O2(e2)]),Ni=Eu,Wc=Pt(),fi=Yo([Pt(),xi([Ei()])],[O2(n=>{try{return BigInt(n),BigInt(n)>=0&&BigInt(n)<=18446744073709551615n}catch{return!1}},"Invalid u64")]),Za=ot({objectId:Eu,version:fi,digest:Pt()}),In=Dy(Yo([ot({GasCoin:En(!0)}),ot({Input:xi([Ei()]),type:Zo(En("pure"))}),ot({Input:xi([Ei()]),type:Zo(En("object"))}),ot({Result:xi([Ei()])}),ot({NestedResult:E2([xi([Ei()]),xi([Ei()])])})]),n=>({...n,$kind:Object.keys(n)[0]})),Gj=ot({budget:gr(fi),price:gr(fi),owner:gr(Eu),payment:gr(zt(Za))}),T0=Yo([En("address"),En("bool"),En("u8"),En("u16"),En("u32"),En("u64"),En("u128"),En("u256"),ot({vector:n_(()=>T0)}),ot({datatype:ot({package:Pt(),module:Pt(),type:Pt(),typeParameters:zt(n_(()=>T0))})}),ot({typeParameter:xi([Ei()])})]),Yj=ot({ref:gr(Yo([En("&"),En("&mut")])),body:T0}),Xj=ot({package:Ni,module:Pt(),function:Pt(),typeArguments:zt(Pt()),arguments:zt(In),_argumentTypes:Zo(gr(zt(Yj)))}),Jj=ot({name:Pt(),inputs:vp(Pt(),Yo([In,zt(In)])),data:vp(Pt(),wm())}),eD=Xc({MoveCall:Xj,TransferObjects:ot({objects:zt(In),address:In}),SplitCoins:ot({coin:In,amounts:zt(In)}),MergeCoins:ot({destination:In,sources:zt(In)}),Publish:ot({modules:zt(Wc),dependencies:zt(Ni)}),MakeMoveVec:ot({type:gr(Pt()),elements:zt(In)}),Upgrade:ot({modules:zt(Wc),dependencies:zt(Ni),package:Ni,ticket:In}),$Intent:Jj}),N2=Xc({ImmOrOwnedObject:Za,SharedObject:ot({objectId:Ni,initialSharedVersion:fi,mutable:jy()}),Receiving:Za}),tD=Xc({Object:N2,Pure:ot({bytes:Wc}),UnresolvedPure:ot({value:wm()}),UnresolvedObject:ot({objectId:Ni,version:Zo(gr(fi)),digest:Zo(gr(Pt())),initialSharedVersion:Zo(gr(fi))})}),r_=Xc({Object:N2,Pure:ot({bytes:Wc})}),j2=Xc({None:En(!0),Epoch:fi}),ff=ot({version:En(2),sender:_p(Eu),expiration:_p(j2),gasData:Gj,inputs:zt(tD),commands:zt(eD)}),rc={MoveCall(n){const[e,t="",r=""]="target"in n?n.target.split("::"):[n.package,n.module,n.function];return{$kind:"MoveCall",MoveCall:{package:e,module:t,function:r,typeArguments:n.typeArguments??[],arguments:n.arguments??[]}}},TransferObjects(n,e){return{$kind:"TransferObjects",TransferObjects:{objects:n.map(t=>Fn(In,t)),address:Fn(In,e)}}},SplitCoins(n,e){return{$kind:"SplitCoins",SplitCoins:{coin:Fn(In,n),amounts:e.map(t=>Fn(In,t))}}},MergeCoins(n,e){return{$kind:"MergeCoins",MergeCoins:{destination:Fn(In,n),sources:e.map(t=>Fn(In,t))}}},Publish({modules:n,dependencies:e}){return{$kind:"Publish",Publish:{modules:n.map(t=>typeof t=="string"?t:Oi(new Uint8Array(t))),dependencies:e.map(t=>kd(t))}}},Upgrade({modules:n,dependencies:e,package:t,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:n.map(i=>typeof i=="string"?i:Oi(new Uint8Array(i))),dependencies:e.map(i=>kd(i)),package:t,ticket:Fn(In,r)}}},MakeMoveVec({type:n,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:n??null,elements:e.map(t=>Fn(In,t))}}},Intent({name:n,inputs:e={},data:t={}}){return{$kind:"$Intent",$Intent:{name:n,inputs:Object.fromEntries(Object.entries(e).map(([r,i])=>[r,Array.isArray(i)?i.map(s=>Fn(In,s)):Fn(In,i)])),data:t}}}},i_=ot({digest:Pt(),objectId:Pt(),version:Yo([xi([Ei()]),Pt(),zj()])}),nD=Xc({ImmOrOwned:i_,Shared:ot({objectId:Ni,initialSharedVersion:fi,mutable:jy()}),Receiving:i_}),s_=Xc({Object:nD,Pure:zt(xi([Ei()]))});function o_(n){var t;const e=n.inputs.map((r,i)=>{if(r.Object)return{kind:"Input",index:i,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:i,value:{Pure:Array.from(ho(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:i,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:i,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:n.sender??void 0,expiration:((t=n.expiration)==null?void 0:t.$kind)==="Epoch"?{Epoch:Number(n.expiration.Epoch)}:n.expiration?{None:!0}:null,gasConfig:{owner:n.gasData.owner??void 0,budget:n.gasData.budget??void 0,price:n.gasData.price??void 0,payment:n.gasData.payment??void 0},inputs:e,transactions:n.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:ao.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(i=>Ao(i,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:Ao(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(i=>Ao(i,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(i=>Ao(i,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(i=>Array.from(ho(i))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:Ao(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(i=>Ao(i,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(i=>Ao(i,e)),address:Ao(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(i=>Array.from(ho(i))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:Ao(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}function Ao(n,e){if(n.$kind==="GasCoin")return{kind:"GasCoin"};if(n.$kind==="Result")return{kind:"Result",index:n.Result};if(n.$kind==="NestedResult")return{kind:"NestedResult",index:n.NestedResult[0],resultIndex:n.NestedResult[1]};if(n.$kind==="Input")return e[n.Input];throw new Error(`Invalid argument ${Object.keys(n)}`)}function rD(n){var e,t,r;return Fn(ff,{version:2,sender:n.sender??null,expiration:n.expiration?"Epoch"in n.expiration?{Epoch:n.expiration.Epoch}:{None:!0}:null,gasData:{owner:n.gasConfig.owner??null,budget:((e=n.gasConfig.budget)==null?void 0:e.toString())??null,price:((t=n.gasConfig.price)==null?void 0:t.toString())??null,payment:((r=n.gasConfig.payment)==null?void 0:r.map(i=>({digest:i.digest,objectId:i.objectId,version:i.version.toString()})))??null},inputs:n.inputs.map(i=>{if(i.kind==="Input"){if(A0(s_,i.value)){const s=Fn(s_,i.value);if(s.Object){if(s.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:s.Object.ImmOrOwned.objectId,version:String(s.Object.ImmOrOwned.version),digest:s.Object.ImmOrOwned.digest}}};if(s.Object.Shared)return{Object:{SharedObject:{mutable:s.Object.Shared.mutable??null,initialSharedVersion:s.Object.Shared.initialSharedVersion,objectId:s.Object.Shared.objectId}}};if(s.Object.Receiving)return{Object:{Receiving:{digest:s.Object.Receiving.digest,version:String(s.Object.Receiving.version),objectId:s.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Oi(new Uint8Array(s.Pure))}}}return i.type==="object"?{UnresolvedObject:{objectId:i.value}}:{UnresolvedPure:{value:i.value}}}throw new Error("Invalid input")}),commands:n.transactions.map(i=>{switch(i.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in i.type?ao.tagToString(i.type.Some):null,elements:i.objects.map(s=>To(s))}};case"MergeCoins":return{MergeCoins:{destination:To(i.destination),sources:i.sources.map(s=>To(s))}};case"MoveCall":{const[s,o,a]=i.target.split("::");return{MoveCall:{package:s,module:o,function:a,typeArguments:i.typeArguments,arguments:i.arguments.map(c=>To(c))}}}case"Publish":return{Publish:{modules:i.modules.map(s=>Oi(Uint8Array.from(s))),dependencies:i.dependencies}};case"SplitCoins":return{SplitCoins:{coin:To(i.coin),amounts:i.amounts.map(s=>To(s))}};case"TransferObjects":return{TransferObjects:{objects:i.objects.map(s=>To(s)),address:To(i.address)}};case"Upgrade":return{Upgrade:{modules:i.modules.map(s=>Oi(Uint8Array.from(s))),dependencies:i.dependencies,package:i.packageId,ticket:To(i.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(i)}`)})})}function To(n){switch(n.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:n.index};case"NestedResult":return{NestedResult:[n.index,n.resultIndex]};case"Input":return{Input:n.index}}}function Gd(n){return Yo(Object.entries(n).map(([e,t])=>ot({[e]:t})))}const ks=Gd({GasCoin:En(!0),Input:xi([Ei()]),Result:xi([Ei()]),NestedResult:E2([xi([Ei()]),xi([Ei()])])}),iD=ot({budget:gr(fi),price:gr(fi),owner:gr(Eu),payment:gr(zt(Za))}),sD=ot({package:Ni,module:Pt(),function:Pt(),typeArguments:zt(Pt()),arguments:zt(ks)}),oD=ot({name:Pt(),inputs:vp(Pt(),Yo([ks,zt(ks)])),data:vp(Pt(),wm())}),aD=Gd({MoveCall:sD,TransferObjects:ot({objects:zt(ks),address:ks}),SplitCoins:ot({coin:ks,amounts:zt(ks)}),MergeCoins:ot({destination:ks,sources:zt(ks)}),Publish:ot({modules:zt(Wc),dependencies:zt(Ni)}),MakeMoveVec:ot({type:gr(Pt()),elements:zt(ks)}),Upgrade:ot({modules:zt(Wc),dependencies:zt(Ni),package:Ni,ticket:ks}),$Intent:oD}),cD=Gd({ImmOrOwnedObject:Za,SharedObject:ot({objectId:Ni,initialSharedVersion:fi,mutable:jy()}),Receiving:Za}),lD=Gd({Object:cD,Pure:ot({bytes:Wc}),UnresolvedPure:ot({value:wm()}),UnresolvedObject:ot({objectId:Ni,version:Zo(gr(fi)),digest:Zo(gr(Pt())),initialSharedVersion:Zo(gr(fi))})}),uD=Gd({None:En(!0),Epoch:fi}),dD=ot({version:En(2),sender:_p(Eu),expiration:_p(uD),gasData:iD,inputs:zt(lD),commands:zt(aD)}),hD=50,fD=1000n,pD=5e10;async function mD(n,e,t){return await _D(n,e),await bD(n,e),e.onlyTransactionKind||(await gD(n,e),await wD(n,e),await yD(n,e)),await vD(n),await t()}async function gD(n,e){n.gasConfig.price||(n.gasConfig.price=String(await Yd(e).getReferenceGasPrice()))}async function wD(n,e){if(n.gasConfig.budget)return;const t=await Yd(e).dryRunTransactionBlock({transactionBlock:n.build({overrides:{gasData:{budget:String(pD),payment:[]}}})});if(t.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const r=fD*BigInt(n.gasConfig.price||1n),i=BigInt(t.effects.gasUsed.computationCost)+r,s=i+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);n.gasConfig.budget=String(s>i?s:i)}async function yD(n,e){if(!n.gasConfig.payment){const r=(await Yd(e).getCoins({owner:n.gasConfig.owner||n.sender,coinType:Mj})).data.filter(i=>!n.inputs.find(o=>{var a;return(a=o.Object)!=null&&a.ImmOrOwnedObject?i.coinObjectId===o.Object.ImmOrOwnedObject.objectId:!1})).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");n.gasConfig.payment=r.map(i=>Fn(Za,i))}}async function bD(n,e){const t=n.inputs.filter(u=>{var d;return u.UnresolvedObject&&!(u.UnresolvedObject.version||(d=u.UnresolvedObject)!=null&&d.initialSharedVersion)}),r=[...new Set(t.map(u=>kd(u.UnresolvedObject.objectId)))],i=r.length?AD(r,hD):[],s=(await Promise.all(i.map(u=>Yd(e).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat(),o=new Map(r.map((u,d)=>[u,s[d]])),a=Array.from(o).filter(([u,d])=>d.error).map(([u,d])=>JSON.stringify(d.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=s.map(u=>{if(u.error||!u.data)throw new Error(`Failed to fetch object: ${u.error}`);const d=u.data.owner,h=d&&typeof d=="object"&&"Shared"in d?d.Shared.initial_shared_version:null;return{objectId:u.data.objectId,digest:u.data.digest,version:u.data.version,initialSharedVersion:h}}),l=new Map(r.map((u,d)=>[u,c[d]]));for(const[u,d]of n.inputs.entries()){if(!d.UnresolvedObject)continue;let h;const f=$n(d.UnresolvedObject.objectId),m=l.get(f);d.UnresolvedObject.initialSharedVersion??(m==null?void 0:m.initialSharedVersion)?h=qo.SharedObjectRef({objectId:f,initialSharedVersion:d.UnresolvedObject.initialSharedVersion||(m==null?void 0:m.initialSharedVersion),mutable:kD(n,u)}):SD(n,u)&&(h=qo.ReceivingRef({objectId:f,digest:d.UnresolvedObject.digest??(m==null?void 0:m.digest),version:d.UnresolvedObject.version??(m==null?void 0:m.version)})),n.inputs[n.inputs.indexOf(d)]=h??qo.ObjectRef({objectId:f,digest:d.UnresolvedObject.digest??(m==null?void 0:m.digest),version:d.UnresolvedObject.version??(m==null?void 0:m.version)})}}async function _D(n,e){const{inputs:t,commands:r}=n,i=[],s=new Set;r.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(u=>u.$kind==="Input"?n.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;s.add(u),i.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(c=>{a_(c,Kt.U64,n)});break;case"TransferObjects":a_(a.TransferObjects.address,Kt.Address,n);break}});const o=new Map;if(s.size>0){const a=Yd(e);await Promise.all([...s].map(async c=>{const[l,u,d]=c.split("::"),h=await a.getNormalizedMoveFunction({package:l,module:u,function:d});o.set(c,h.parameters.map(f=>Lj(f)))}))}i.length&&await Promise.all(i.map(async a=>{const c=o.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const u=c.length>0&&Fj(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=u})),r.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,l=`${c.package}::${c.module}::${c.function}`,u=c._argumentTypes;if(u){if(u.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${l}`);u.forEach((d,h)=>{var A,M;const f=c.arguments[h];if(f.$kind!=="Input")return;const m=t[f.Input];if(!m.UnresolvedPure&&!m.UnresolvedObject)return;const w=((A=m.UnresolvedPure)==null?void 0:A.value)??((M=m.UnresolvedObject)==null?void 0:M.objectId),y=C0(d.body);if(y){f.type="pure",t[t.indexOf(m)]=qo.Pure(y.serialize(w));return}if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);f.type="object";const C=m.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:w}}:m;t[f.Input]=C})}})}function vD(n){n.inputs.forEach((e,t)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function a_(n,e,t){if(n.$kind!=="Input")return;const r=t.inputs[n.Input];r.$kind==="UnresolvedPure"&&(t.inputs[n.Input]=qo.Pure(e.serialize(r.UnresolvedPure.value)))}function kD(n,e){let t=!1;return n.getInputUses(e,(r,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){const s=i.MoveCall.arguments.indexOf(r);t=i.MoveCall._argumentTypes[s].ref!=="&"||t}}),t}function SD(n,e){let t=!1;return n.getInputUses(e,(r,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){const s=i.MoveCall.arguments.indexOf(r);t=CD(i.MoveCall._argumentTypes[s])||t}}),t}function CD(n){return typeof n.body!="object"||!("datatype"in n.body)?!1:n.body.datatype.package==="0x2"&&n.body.datatype.module==="transfer"&&n.body.datatype.type==="Receiving"}function Yd(n){if(!n.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return n.client}function AD(n,e){return Array.from({length:Math.ceil(n.length/e)},(t,r)=>n.slice(r*e,r*e+e))}function TD(n){function e(t){return n(t)}return e.u8=t=>n(Kt.U8.serialize(t)),e.u16=t=>n(Kt.U16.serialize(t)),e.u32=t=>n(Kt.U32.serialize(t)),e.u64=t=>n(Kt.U64.serialize(t)),e.u128=t=>n(Kt.U128.serialize(t)),e.u256=t=>n(Kt.U256.serialize(t)),e.bool=t=>n(Kt.Bool.serialize(t)),e.string=t=>n(Kt.String.serialize(t)),e.address=t=>n(Kt.Address.serialize(t)),e.id=e.address,e}function ID(n,e){const t=Array.from(`${n}::`).map(i=>i.charCodeAt(0)),r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),Yf(r,{dkLen:32})}function c_(n){return $n(n).replace("0x","")}class Es{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const r=Kt.TransactionKind.parse(e).ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");return Es.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:r.inputs,commands:r.commands})}static fromBytes(e){const t=Kt.TransactionData.parse(e),r=t==null?void 0:t.V1,i=r.kind.ProgrammableTransaction;if(!r||!i)throw new Error("Unable to deserialize from bytes.");return Es.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new Es(Fn(ff,e)):new Es(Fn(ff,rD(e)))}static getDigestFromBytes(e){const t=ID("TransactionData",e);return gm(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){const i=this.inputs,s=this.commands,o={ProgrammableTransaction:{inputs:i,commands:s}};if(r)return Kt.TransactionKind.serialize(o,{maxSize:e}).toBytes();const a=(t==null?void 0:t.expiration)??this.expiration,c=(t==null?void 0:t.sender)??this.sender,l={...this.gasData,...t==null?void 0:t.gasConfig,...t==null?void 0:t.gasData};if(!c)throw new Error("Missing transaction sender");if(!l.budget)throw new Error("Missing gas budget");if(!l.payment)throw new Error("Missing gas payment");if(!l.price)throw new Error("Missing gas price");const u={sender:c_(c),expiration:a||{None:!0},gasData:{payment:l.payment,owner:c_(this.gasData.owner??c),price:BigInt(l.price),budget:BigInt(l.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return Kt.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,t){const r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments((r,i)=>(r.$kind==="Input"&&r.Input===e&&t(r,i),r))}mapArguments(e){for(const t of this.commands)switch(t.$kind){case"MoveCall":t.MoveCall.arguments=t.MoveCall.arguments.map(i=>e(i,t));break;case"TransferObjects":t.TransferObjects.objects=t.TransferObjects.objects.map(i=>e(i,t)),t.TransferObjects.address=e(t.TransferObjects.address,t);break;case"SplitCoins":t.SplitCoins.coin=e(t.SplitCoins.coin,t),t.SplitCoins.amounts=t.SplitCoins.amounts.map(i=>e(i,t));break;case"MergeCoins":t.MergeCoins.destination=e(t.MergeCoins.destination,t),t.MergeCoins.sources=t.MergeCoins.sources.map(i=>e(i,t));break;case"MakeMoveVec":t.MakeMoveVec.elements=t.MakeMoveVec.elements.map(i=>e(i,t));break;case"Upgrade":t.Upgrade.ticket=e(t.Upgrade.ticket,t);break;case"$Intent":const r=t.$Intent.inputs;t.$Intent.inputs={};for(const[i,s]of Object.entries(r))t.$Intent.inputs[i]=Array.isArray(s)?s.map(o=>e(o,t)):e(s,t);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${t.$kind}`)}}replaceCommand(e,t){if(!Array.isArray(t)){this.commands[e]=t;return}const r=t.length-1;this.commands.splice(e,1,...t),r!==0&&this.mapArguments(i=>{switch(i.$kind){case"Result":i.Result>e&&(i.Result+=r);break;case"NestedResult":i.NestedResult[0]>e&&(i.NestedResult[0]+=r);break}return i})}getDigest(){const e=this.build({onlyTransactionKind:!1});return Es.getDigestFromBytes(e)}snapshot(){return Fn(ff,this)}}function l_(n){if(typeof n=="string")return $n(n);if(n.Object)return n.Object.ImmOrOwnedObject?$n(n.Object.ImmOrOwnedObject.objectId):n.Object.Receiving?$n(n.Object.Receiving.objectId):$n(n.Object.SharedObject.objectId);if(n.UnresolvedObject)return $n(n.UnresolvedObject.objectId)}var By=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Lt=(n,e,t)=>(By(n,e,"read from private field"),t?t.call(n):e.get(n)),aa=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},qu=(n,e,t,r)=>(By(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Oo=(n,e,t)=>(By(n,e,"access private method"),t),pf,kp,dc,Wt,ed,mf,Sp,Ry,gf,I0,Cp,Py;function xD(n){const e={$kind:"Result",Result:n},t=[],r=i=>t[i]??(t[i]={$kind:"NestedResult",NestedResult:[n,i]});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,s){if(s in i)return Reflect.get(i,s);if(s===Symbol.iterator)return function*(){let a=0;for(;;)yield r(a),a++};if(typeof s=="symbol")return;const o=parseInt(s,10);if(!(Number.isNaN(o)||o<0))return r(o)}})}const D2=Symbol.for("@mysten/transaction");function ED(n){return!!n&&typeof n=="object"&&n[D2]===!0}const x0=class{constructor(){aa(this,ed),aa(this,Sp),aa(this,gf),aa(this,Cp),aa(this,pf,[]),aa(this,kp,[]),aa(this,dc,new Map),aa(this,Wt,void 0),qu(this,Wt,new Es)}static fromKind(n){const e=new x0;return qu(e,Wt,Es.fromKindBytes(typeof n=="string"?ho(n):n)),e}static from(n){const e=new x0;return ED(n)?qu(e,Wt,new Es(n.getData())):typeof n!="string"||!n.startsWith("{")?qu(e,Wt,Es.fromBytes(typeof n=="string"?ho(n):n)):qu(e,Wt,Es.restore(JSON.parse(n))),e}addSerializationPlugin(n){Lt(this,pf).push(n)}addBuildPlugin(n){Lt(this,kp).push(n)}addIntentResolver(n,e){if(Lt(this,dc).has(n)&&Lt(this,dc).get(n)!==e)throw new Error(`Intent resolver for ${n} already exists`);Lt(this,dc).set(n,e)}setSender(n){Lt(this,Wt).sender=n}setSenderIfNotSet(n){Lt(this,Wt).sender||(Lt(this,Wt).sender=n)}setExpiration(n){Lt(this,Wt).expiration=n?Fn(j2,n):null}setGasPrice(n){Lt(this,Wt).gasConfig.price=String(n)}setGasBudget(n){Lt(this,Wt).gasConfig.budget=String(n)}setGasOwner(n){Lt(this,Wt).gasConfig.owner=n}setGasPayment(n){Lt(this,Wt).gasConfig.payment=n.map(e=>Fn(Za,e))}get blockData(){return o_(Lt(this,Wt).snapshot())}getData(){return Lt(this,Wt).snapshot()}get[D2](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:TD(n=>JS(n)?Lt(this,Wt).addInput("pure",{$kind:"Pure",Pure:{bytes:n.toBase64()}}):Lt(this,Wt).addInput("pure",A0(r_,n)?Fn(r_,n):n instanceof Uint8Array?qo.Pure(n):{$kind:"UnresolvedPure",UnresolvedPure:{value:n}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}object(n){var r,i;if(typeof n=="function")return this.object(n(this));if(typeof n=="object"&&A0(In,n))return n;const e=l_(n),t=Lt(this,Wt).inputs.find(s=>e===l_(s));return(r=t==null?void 0:t.Object)!=null&&r.SharedObject&&typeof n=="object"&&((i=n.Object)!=null&&i.SharedObject)&&(t.Object.SharedObject.mutable=t.Object.SharedObject.mutable||n.Object.SharedObject.mutable),t?{$kind:"Input",Input:Lt(this,Wt).inputs.indexOf(t),type:"object"}:Lt(this,Wt).addInput("object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:$n(n)}}:n)}objectRef(...n){return this.object(qo.ObjectRef(...n))}receivingRef(...n){return this.object(qo.ReceivingRef(...n))}sharedObjectRef(...n){return this.object(qo.SharedObjectRef(...n))}add(n){if(typeof n=="function")return n(this);const e=Lt(this,Wt).commands.push(n);return xD(e-1)}splitCoins(n,e){return this.add(rc.SplitCoins(typeof n=="string"?this.object(n):Oo(this,Sp,Ry).call(this,n),e.map(t=>typeof t=="number"||typeof t=="bigint"||typeof t=="string"?this.pure.u64(t):Oo(this,ed,mf).call(this,t))))}mergeCoins(n,e){return this.add(rc.MergeCoins(this.object(n),e.map(t=>this.object(t))))}publish({modules:n,dependencies:e}){return this.add(rc.Publish({modules:n,dependencies:e}))}upgrade({modules:n,dependencies:e,package:t,ticket:r}){return this.add(rc.Upgrade({modules:n,dependencies:e,package:t,ticket:this.object(r)}))}moveCall({arguments:n,...e}){return this.add(rc.MoveCall({...e,arguments:n==null?void 0:n.map(t=>Oo(this,ed,mf).call(this,t))}))}transferObjects(n,e){return this.add(rc.TransferObjects(n.map(t=>this.object(t)),typeof e=="string"?this.pure.address(e):Oo(this,ed,mf).call(this,e)))}makeMoveVec({type:n,elements:e}){return this.add(rc.MakeMoveVec({type:n,elements:e.map(t=>this.object(t))}))}serialize(){return JSON.stringify(o_(Lt(this,Wt).snapshot()))}async toJSON(n={}){return await this.prepareForSerialization(n),JSON.stringify(Fn(dD,Lt(this,Wt).snapshot()),(e,t)=>typeof t=="bigint"?t.toString():t,2)}async sign(n){const{signer:e,...t}=n,r=await this.build(t);return e.signTransaction(r)}async build(n={}){return await this.prepareForSerialization(n),await Oo(this,gf,I0).call(this,n),Lt(this,Wt).build({onlyTransactionKind:n.onlyTransactionKind})}async getDigest(n={}){return await Oo(this,gf,I0).call(this,n),Lt(this,Wt).getDigest()}async prepareForSerialization(n){var r;const e=new Set;for(const i of Lt(this,Wt).commands)i.$Intent&&e.add(i.$Intent.name);const t=[...Lt(this,pf)];for(const i of e)if(!((r=n.supportedIntents)!=null&&r.includes(i))){if(!Lt(this,dc).has(i))throw new Error(`Missing intent resolver for ${i}`);t.push(Lt(this,dc).get(i))}await Oo(this,Cp,Py).call(this,t,n)}};let MD=x0;pf=new WeakMap;kp=new WeakMap;dc=new WeakMap;Wt=new WeakMap;ed=new WeakSet;mf=function(n){return JS(n)?this.pure(n):Oo(this,Sp,Ry).call(this,n)};Sp=new WeakSet;Ry=function(n){return typeof n=="function"?Fn(In,n(this)):Fn(In,n)};gf=new WeakSet;I0=async function(n){if(!n.onlyTransactionKind&&!Lt(this,Wt).sender)throw new Error("Missing transaction sender");await Oo(this,Cp,Py).call(this,[...Lt(this,kp),mD],n)};Cp=new WeakSet;Py=async function(n,e){const t=r=>{if(r>=n.length)return()=>{};const i=n[r];return async()=>{const s=t(r+1);let o=!1,a=!1;if(await i(Lt(this,Wt),e,async()=>{if(o)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);o=!0,await s(),a=!0}),!o)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await t(0)()};const B2="sui:mainnet";function OD(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),reject:e,resolve:n}}const ND=M2("type",[ot({type:En("connect"),address:Pt()}),ot({type:En("sign-transaction-block"),bytes:Pt(),signature:Pt()}),ot({type:En("sign-personal-message"),bytes:Pt(),signature:Pt()})]),jD=M2("type",[ot({type:En("reject")}),ot({type:En("resolve"),data:ND})]),DD=ot({id:Pt([Hj()]),source:En("zksend-channel"),payload:jD});var Uy=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Qr=(n,e,t)=>(Uy(n,e,"read from private field"),t?t.call(n):e.get(n)),Hs=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Eo=(n,e,t,r)=>(Uy(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),kg=(n,e,t)=>(Uy(n,e,"access private method"),t),_l,td,nd,wf,yf,bf,_f,Ql,Ap,rd,vf;const R2="https://getstashed.com";class Th{constructor({name:e,origin:t=R2}){Hs(this,rd),Hs(this,_l,void 0),Hs(this,td,void 0),Hs(this,nd,void 0),Hs(this,wf,void 0),Hs(this,yf,void 0),Hs(this,bf,void 0),Hs(this,_f,void 0),Hs(this,Ql,null),Hs(this,Ap,a=>{if(a.origin!==Qr(this,nd))return;const{success:c,output:l}=Zj(DD,a.data);!c||l.id!==Qr(this,td)||(kg(this,rd,vf).call(this),l.payload.type==="reject"?Qr(this,_f).call(this,new Error("User rejected the request")):l.payload.type==="resolve"&&Qr(this,bf).call(this,l.payload.data))});const r=window.open("about:blank","_blank");if(!r)throw new Error("Failed to open new window");Eo(this,_l,r),Eo(this,td,crypto.randomUUID()),Eo(this,nd,t),Eo(this,wf,e);const{promise:i,resolve:s,reject:o}=OD();Eo(this,yf,i),Eo(this,bf,s),Eo(this,_f,o),Eo(this,Ql,setInterval(()=>{try{Qr(this,_l).closed&&(kg(this,rd,vf).call(this),o(new Error("User closed the Stashed window")))}catch{}},1e3))}send({type:e,...t}){return window.addEventListener("message",Qr(this,Ap)),Qr(this,_l).location.assign(`${Qr(this,nd)}/dapp/${e}?${new URLSearchParams({id:Qr(this,td),origin:window.origin,name:Qr(this,wf)})}${t?`#${new URLSearchParams(t)}`:""}`),Qr(this,yf)}close(){kg(this,rd,vf).call(this),Qr(this,_l).close()}}_l=new WeakMap;td=new WeakMap;nd=new WeakMap;wf=new WeakMap;yf=new WeakMap;bf=new WeakMap;_f=new WeakMap;Ql=new WeakMap;Ap=new WeakMap;rd=new WeakSet;vf=function(){Qr(this,Ql)&&(clearInterval(Qr(this,Ql)),Eo(this,Ql,null)),window.removeEventListener("message",Qr(this,Ap))};var Fy=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},lr=(n,e,t)=>(Fy(n,e,"read from private field"),t?t.call(n):e.get(n)),gs=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Nl=(n,e,t,r)=>(Fy(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ih=(n,e,t)=>(Fy(n,e,"access private method"),t),jl,Hl,hc,fc,E0,M0,O0,N0,vl,id,j0,D0;const B0="stashed:recentAddress",BD="Stashed";class RD{constructor({name:e,address:t,origin:r=R2}){gs(this,vl),gs(this,jl,void 0),gs(this,Hl,void 0),gs(this,hc,void 0),gs(this,fc,void 0),gs(this,E0,async({transactionBlock:i,account:s})=>{i.setSenderIfNotSet(s.address);const o=i.serialize(),c=await new Th({name:lr(this,fc),origin:lr(this,hc)}).send({type:"sign-transaction-block",data:o,address:s.address});return{transactionBlockBytes:c.bytes,signature:c.signature}}),gs(this,M0,async({transaction:i,account:s})=>{const o=new Th({name:lr(this,fc),origin:lr(this,hc)}),a=MD.from(await i.toJSON());a.setSenderIfNotSet(s.address);const c=a.serialize(),l=await o.send({type:"sign-transaction-block",data:c,address:s.address});return{bytes:l.bytes,signature:l.signature}}),gs(this,O0,async({message:i,account:s})=>{const o=new Th({name:lr(this,fc),origin:lr(this,hc)}),a=Oi(i),c=await o.send({type:"sign-personal-message",bytes:a,address:s.address});return{bytes:a,signature:c.signature}}),gs(this,N0,(i,s)=>(lr(this,jl).on(i,s),()=>lr(this,jl).off(i,s))),gs(this,j0,async i=>{if(i!=null&&i.silent){const a=localStorage.getItem(B0);return a&&Ih(this,vl,id).call(this,a),{accounts:this.accounts}}const o=await new Th({name:lr(this,fc),origin:lr(this,hc)}).send({type:"connect"});if(!("address"in o))throw new Error("Unexpected response");return Ih(this,vl,id).call(this,o.address),{accounts:this.accounts}}),gs(this,D0,async()=>{localStorage.removeItem(B0),Ih(this,vl,id).call(this)}),Nl(this,Hl,[]),Nl(this,jl,Cy()),Nl(this,hc,r),Nl(this,fc,e),t&&Ih(this,vl,id).call(this,t)}get name(){return BD}get icon(){return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjU0IiBoZWlnaHQ9IjU0IiB4PSIxIiB5PSIxIiBmaWxsPSIjNTE5REU5IiByeD0iMjciLz48cmVjdCB3aWR0aD0iNTQiIGhlaWdodD0iNTQiIHg9IjEiIHk9IjEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMjciLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTguMzUzIDM1LjA2NGMuOTIxIDMuNDM4IDQuMzYzIDYuNTUxIDExLjQ4MyA0LjY0NCA2Ljc5NC0xLjgyMSAxMS4wNTItNy40MSA5Ljk0OC0xMS41My0uMzgxLTEuNDIzLTEuNTMtMi4zODctMy4zLTIuMjNsLTE1LjgzMiAxLjMyYy0uOTk3LjA3Ni0xLjQ1NC0uMDg4LTEuNzE4LS43MTYtLjI1Ni0uNTk5LS4xMS0xLjI0MSAxLjA5NC0xLjg1bDEyLjA0OC02LjE4M2MuOTI0LS40NyAxLjUzOS0uNjY2IDIuMTAxLS40NjguMzUyLjEyOC41ODQuNjM4LjM3MSAxLjI2N2wtLjc4MSAyLjMwNmMtLjk1OSAyLjgzIDEuMDk0IDMuNDg4IDIuMjUgMy4xNzggMS43NTEtLjQ2OSAyLjE2My0yLjEzNiAxLjU5OS00LjI0LTEuNDMtNS4zMzctNy4wOS02LjE3LTEyLjIyMy00Ljc5Ni01LjIyMiAxLjQtOS43NDggNS42My04LjM2NiAxMC43ODkuMzI1IDEuMjE1IDEuNDQ0IDIuMTg2IDIuNzQgMi4xNTdsMS45NzgtLjAwNWMuNDA3LS4wMS4yNi4wMjQgMS4wNDYtLjA0MS43ODQtLjA2NSAyLjg4LS4zMjMgMi44OC0uMzIzbDEwLjI4Ni0xLjE2NC4yNjUtLjAzOGMuNjAyLS4xMDMgMS4wNTYuMDUzIDEuNDQuNzE1LjU3Ni45OTEtLjMwMiAxLjczOC0xLjM1MiAyLjYzM2wtLjA4NS4wNzItOS4wNDEgNy43OTJjLTEuNTUgMS4zMzctMi42MzkuODM0LTMuMDItLjU4OWwtMS4zNS01LjA0Yy0uMzM0LTEuMjQ0LTEuNTUtMi4yMjEtMi45NzQtMS44NC0xLjc4LjQ3Ny0xLjkyNCAyLjU1LTEuNDg3IDQuMThaIi8+PC9zdmc+Cg=="}get version(){return"1.0.0"}get chains(){return[B2]}get accounts(){return lr(this,Hl)}get features(){return{"standard:connect":{version:"1.0.0",connect:lr(this,j0)},"standard:disconnect":{version:"1.0.0",disconnect:lr(this,D0)},"standard:events":{version:"1.0.0",on:lr(this,N0)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:lr(this,E0)},"sui:signTransaction":{version:"2.0.0",signTransaction:lr(this,M0)},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:lr(this,O0)}}}}jl=new WeakMap;Hl=new WeakMap;hc=new WeakMap;fc=new WeakMap;E0=new WeakMap;M0=new WeakMap;O0=new WeakMap;N0=new WeakMap;vl=new WeakSet;id=function(n){n?(Nl(this,Hl,[new mm({address:n,chains:[B2],features:["sui:signTransactionBlock","sui:signPersonalMessage"],publicKey:new Uint8Array})]),localStorage.setItem(B0,n)):Nl(this,Hl,[]),lr(this,jl).emit("change",{accounts:this.accounts})};j0=new WeakMap;D0=new WeakMap;function PD(n,{origin:e}){const t=Sy();let r=null;try{const o=new URLSearchParams(window.location.search);r=o.get("stashed_address")||o.get("zksend_address")}catch{}const i=new RD({name:n,origin:e,address:r}),s=t.register(i);return{wallet:i,unregister:s,addressFromRedirect:r}}const UD=["sui:signAndExecuteTransactionBlock"];var Ea,Ma,Oa,Dd,Na;class FD{constructor({features:e}={}){st(this,Ea,void 0);st(this,Ma,void 0);st(this,Oa,void 0);st(this,Dd,void 0);st(this,Na,void 0);qe(this,Ma,new Map);const t=PD("Cetus",{});qe(this,Na,t==null?void 0:t.wallet),qe(this,Ea,Sy()),qe(this,Oa,Cy()),qe(this,Dd,e??UD),Z(this,Ea).on("register",()=>{Z(this,Oa).emit("changed")}),Z(this,Ea).on("unregister",()=>{Z(this,Oa).emit("changed")})}get(){return console.log("this.#wallets.get()####",Z(this,Ea).get()),Z(this,Ea).get().filter(t=>W8(t,Z(this,Dd))).forEach(t=>{Z(this,Ma).has(t)||Z(this,Ma).set(t,new e_({wallet:t}))}),Z(this,Na)&&(console.log("this.#zksendWallet###",Z(this,Na)),Z(this,Ma).set(Z(this,Na),new e_({wallet:Z(this,Na)}))),[...Z(this,Ma).values()]}on(e,t){return Z(this,Oa).on(e,t),()=>{Z(this,Oa).off(e,t)}}}Ea=new WeakMap,Ma=new WeakMap,Oa=new WeakMap,Dd=new WeakMap,Na=new WeakMap;function LD(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}const Sg=8192;function P2(n){if(n.length<Sg)return btoa(String.fromCharCode(...n));let e="";for(var t=0;t<n.length;t+=Sg){const r=n.slice(t,t+Sg);e+=String.fromCharCode(...r)}return btoa(e)}const $D=32;function VD(n,e=!1){let t=n.toLowerCase();return!e&&t.startsWith("0x")&&(t=t.slice(2)),`0x${t.padStart($D*2,"0")}`}function U2(n,e=!1){return VD(n,e)}BigInt(1e9);U2("0x6");U2("0x5");var qD=Object.defineProperty,zD=(n,e,t)=>e in n?qD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qs=(n,e,t)=>(zD(n,typeof e!="symbol"?e+"":e,t),t),F2=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},ws=(n,e,t)=>(F2(n,e,"read from private field"),t?t.call(n):e.get(n)),Io=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Li=(n,e,t,r)=>(F2(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ly=Su({address:Ai(),publicKey:Ai(),chains:gb(Ai()),features:gb(Ai()),label:no(Ai()),icon:no(Ai())});function $y(n){return{address:n.address,publicKey:P2(n.publicKey),features:[...n.features],chains:[...n.chains],label:n.label,icon:n.icon}}function WD(n){return{address:n.address,publicKey:LD(n.publicKey),chains:n.chains.map(e=>e),features:n.features.map(e=>e),label:n.label,icon:n.icon}}Su({message:Ai(),account:Ly});function KD(n){return{message:P2(n.message),account:$y(n.account)}}Su({transactionBlock:Ai(),account:Ly,chain:Ai()});function ZD(n){return{transactionBlock:n.transactionBlock.serialize(),account:$y(n.account),chain:n.chain}}var QD=Su({showBalanceChanges:no(el()),showEffects:no(el()),showEvents:no(el()),showInput:no(el()),showObjectChanges:no(el()),showRawInput:no(el())});Su({transactionBlock:Ai(),account:Ly,chain:Ai(),requestType:no(Ai()),options:no(QD)});function HD(n){return{transactionBlock:n.transactionBlock.serialize(),account:$y(n.account),chain:n.chain,requestType:n.requestType,options:n.options}}Su({network:q4([gh("mainnet"),gh("testnet"),gh("devnet"),gh("localnet")]),url:Ai()});const GD="sui:devnet",YD="sui:testnet",XD="sui:localnet",JD="sui:mainnet",e5=[GD,YD,XD,JD];var t5="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGlkPSJMYXllcl8xIiB4PSIwIiB5PSIwIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzMTguNiAzMTguNiI+CiAgPHN0eWxlPgogICAgLnN0MSwuc3Q2e2ZpbGw6I2U0NzYxYjtzdHJva2U6I2U0NzYxYjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmR9LnN0NntmaWxsOiNmNjg1MWI7c3Ryb2tlOiNmNjg1MWJ9CiAgPC9zdHlsZT4KICA8cGF0aCBmaWxsPSIjZTI3NjFiIiBzdHJva2U9IiNlMjc2MWIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTI3NC4xIDM1LjUtOTkuNSA3My45TDE5MyA2NS44eiIvPgogIDxwYXRoIGQ9Im00NC40IDM1LjUgOTguNyA3NC42LTE3LjUtNDQuM3ptMTkzLjkgMTcxLjMtMjYuNSA0MC42IDU2LjcgMTUuNiAxNi4zLTU1LjN6bS0yMDQuNC45TDUwLjEgMjYzbDU2LjctMTUuNi0yNi41LTQwLjZ6IiBjbGFzcz0ic3QxIi8+CiAgPHBhdGggZD0ibTEwMy42IDEzOC4yLTE1LjggMjMuOSA1Ni4zIDIuNS0yLTYwLjV6bTExMS4zIDAtMzktMzQuOC0xLjMgNjEuMiA1Ni4yLTIuNXpNMTA2LjggMjQ3LjRsMzMuOC0xNi41LTI5LjItMjIuOHptNzEuMS0xNi41IDMzLjkgMTYuNS00LjctMzkuM3oiIGNsYXNzPSJzdDEiLz4KICA8cGF0aCBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTIxMS44IDI0Ny40LTMzLjktMTYuNSAyLjcgMjIuMS0uMyA5LjN6bS0xMDUgMCAzMS41IDE0LjktLjItOS4zIDIuNS0yMi4xeiIvPgogIDxwYXRoIGZpbGw9IiMyMzM0NDciIHN0cm9rZT0iIzIzMzQ0NyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJtMTM4LjggMTkzLjUtMjguMi04LjMgMTkuOS05LjF6bTQwLjkgMCA4LjMtMTcuNCAyMCA5LjF6Ii8+CiAgPHBhdGggZmlsbD0iI2NkNjExNiIgc3Ryb2tlPSIjY2Q2MTE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Im0xMDYuOCAyNDcuNCA0LjgtNDAuNi0zMS4zLjl6TTIwNyAyMDYuOGw0LjggNDAuNiAyNi41LTM5Ljd6bTIzLjgtNDQuNy01Ni4yIDIuNSA1LjIgMjguOSA4LjMtMTcuNCAyMCA5LjF6bS0xMjAuMiAyMy4xIDIwLTkuMSA4LjIgMTcuNCA1LjMtMjguOS01Ni4zLTIuNXoiLz4KICA8cGF0aCBmaWxsPSIjZTQ3NTFmIiBzdHJva2U9IiNlNDc1MWYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTg3LjggMTYyLjEgMjMuNiA0Ni0uOC0yMi45em0xMjAuMyAyMy4xLTEgMjIuOSAyMy43LTQ2em0tNjQtMjAuNi01LjMgMjguOSA2LjYgMzQuMSAxLjUtNDQuOXptMzAuNSAwLTIuNyAxOCAxLjIgNDUgNi43LTM0LjF6Ii8+CiAgPHBhdGggZD0ibTE3OS44IDE5My41LTYuNyAzNC4xIDQuOCAzLjMgMjkuMi0yMi44IDEtMjIuOXptLTY5LjItOC4zLjggMjIuOSAyOS4yIDIyLjggNC44LTMuMy02LjYtMzQuMXoiIGNsYXNzPSJzdDYiLz4KICA8cGF0aCBmaWxsPSIjYzBhZDllIiBzdHJva2U9IiNjMGFkOWUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTE4MC4zIDI2Mi4zLjMtOS4zLTIuNS0yLjJoLTM3LjdsLTIuMyAyLjIuMiA5LjMtMzEuNS0xNC45IDExIDkgMjIuMyAxNS41aDM4LjNsMjIuNC0xNS41IDExLTl6Ii8+CiAgPHBhdGggZmlsbD0iIzE2MTYxNiIgc3Ryb2tlPSIjMTYxNjE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Im0xNzcuOSAyMzAuOS00LjgtMy4zaC0yNy43bC00LjggMy4zLTIuNSAyMi4xIDIuMy0yLjJoMzcuN2wyLjUgMi4yeiIvPgogIDxwYXRoIGZpbGw9IiM3NjNkMTYiIHN0cm9rZT0iIzc2M2QxNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJtMjc4LjMgMTE0LjIgOC41LTQwLjgtMTIuNy0zNy45LTk2LjIgNzEuNCAzNyAzMS4zIDUyLjMgMTUuMyAxMS42LTEzLjUtNS0zLjYgOC03LjMtNi4yLTQuOCA4LTYuMXpNMzEuOCA3My40bDguNSA0MC44LTUuNCA0IDggNi4xLTYuMSA0LjggOCA3LjMtNSAzLjYgMTEuNSAxMy41IDUyLjMtMTUuMyAzNy0zMS4zLTk2LjItNzEuNHoiLz4KICA8cGF0aCBkPSJtMjY3LjIgMTUzLjUtNTIuMy0xNS4zIDE1LjkgMjMuOS0yMy43IDQ2IDMxLjItLjRoNDYuNXptLTE2My42LTE1LjMtNTIuMyAxNS4zLTE3LjQgNTQuMmg0Ni40bDMxLjEuNC0yMy42LTQ2em03MSAyNi40IDMuMy01Ny43IDE1LjItNDEuMWgtNjcuNWwxNSA0MS4xIDMuNSA1Ny43IDEuMiAxOC4yLjEgNDQuOGgyNy43bC4yLTQ0Ljh6IiBjbGFzcz0ic3Q2Ii8+Cjwvc3ZnPg==",L2=class pc extends Error{constructor(e){super(`${pc.type}: ${e}}`),qs(this,"type",pc.type)}static asSimpleError(e){return new Error(`${pc.type}: ${e}`)}static isSimpleErrorMessage(e){return e.startsWith(pc.type+": ")}static fromSimpleErrorMessage(e){return new pc(e.slice(pc.type.length+2))}};qs(L2,"type","INVALID_REQUEST_PARAMS");var u_=L2,$2=class sd extends Error{constructor(){super(sd.type),qs(this,"type",sd.type)}static asSimpleError(){return new Error(sd.type)}static isSimpleErrorMessage(e){return e===sd.type}};qs($2,"type","USER_REJECTION");var R0=$2,V2=class mc extends Error{constructor(e){super(`${mc.type}: ${e}`),qs(this,"type",mc.type)}static asSimpleError(e){return new Error(`${mc.type}: ${e}`)}static isSimpleErrorMessage(e){return e.startsWith(mc.type+": ")}static fromSimpleErrorMessage(e){return new mc(e.slice(mc.type.length+2))}};qs(V2,"type","INVALID_REQUEST_METHOD");var d_=V2,q2=class gc extends Error{constructor(e){let t=gc.type;e&&(t+=": "+e),super(t),qs(this,"type",gc.type)}static asSimpleError(e){let t=gc.type;return e&&(t+=": "+e),new Error(t)}static isSimpleErrorMessage(e){return e.startsWith(gc.type)}static fromSimpleErrorMessage(e){return new gc(e.slice(gc.type.length+2))}};qs(q2,"type","DRY_RUN_FAILED");var h_=q2,z2=class kf extends Error{constructor(){super(kf.type),qs(this,"type",R0.type)}static asSimpleError(){return new Error(kf.type)}static isSimpleErrorMessage(e){return e===kf.type}};qs(z2,"type","NON_ADMIN_ORIGIN");var f_=z2;function n5(n){return typeof n=="object"&&n!==null&&"message"in n}function Vy(n){return n5(n)?u_.isSimpleErrorMessage(n.message)?u_.fromSimpleErrorMessage(n.message):R0.isSimpleErrorMessage(n.message)?new R0:d_.isSimpleErrorMessage(n.message)?d_.fromSimpleErrorMessage(n.message):h_.isSimpleErrorMessage(n.message)?h_.fromSimpleErrorMessage(n.message):f_.isSimpleErrorMessage(n.message)?new f_:n:n}var Xd="npm:@kunalabs-io/sui-metamask-snap",r5="^1.0.0";function i5(){const n=Sy();for(const t of n.get())if(t.name===p_.NAME)return console.warn("SuiSnapWallet already registered"),t;const e=new p_;return n.register(e),e}async function s5(n){return(await n.request({method:"wallet_invokeSnap",params:{snapId:Xd,request:{method:"getAccounts"}}})).map(t=>new mm(WD(t)))}async function W2(n,e){const t=KD(e);try{return await n.request({method:"wallet_invokeSnap",params:{snapId:Xd,request:{method:"signPersonalMessage",params:JSON.parse(JSON.stringify(t))}}})}catch(r){throw Vy(r)}}async function o5(n,e){const t=await W2(n,e);return{messageBytes:t.bytes,signature:t.signature}}async function a5(n,e){const t=ZD(e);try{return await n.request({method:"wallet_invokeSnap",params:{snapId:Xd,request:{method:"signTransactionBlock",params:JSON.parse(JSON.stringify(t))}}})}catch(r){throw Vy(r)}}async function c5(n,e){const t=HD(e);try{return await n.request({method:"wallet_invokeSnap",params:{snapId:Xd,request:{method:"signAndExecuteTransactionBlock",params:JSON.parse(JSON.stringify(t))}}})}catch(r){throw Vy(r)}}async function l5(){const n=window.ethereum;if(!n)return{available:!1,supportsSnaps:!1,suiSnapInstalled:!1};if(!n.isMetaMask)return{available:!1,suiSnapInstalled:!1,supportsSnaps:!1};try{const e=await n.request({method:"web3_clientVersion"}),t=await n.request({method:"wallet_getSnaps"}),r=!!t&&"npm:@kunalabs-io/sui-metamask-snap"in t;return{available:!0,version:e,supportsSnaps:!0,suiSnapInstalled:r}}catch(e){return console.warn(e),{available:!0,supportsSnaps:!1,suiSnapInstalled:!1}}}var Mo,ya,kl,P0,U0,F0,L0,$0,V0,K2=class Z2{constructor(){Io(this,Mo,void 0),Io(this,ya,void 0),Io(this,kl,null),Io(this,P0,async()=>{if(ws(this,Mo))throw new Error("Already connecting");Li(this,Mo,!0),Li(this,ya,!1);try{const e=window.ethereum;if(!(await l5()).available)throw new Error("MetaMask not detected!");return await e.request({method:"wallet_requestSnaps",params:{[Xd]:{version:r5}}}),Li(this,kl,await s5(e)),Li(this,Mo,!1),Li(this,ya,!0),{accounts:this.accounts}}catch(e){throw Li(this,Mo,!1),Li(this,ya,!1),e}}),Io(this,U0,async()=>{Li(this,Mo,!1),Li(this,ya,!1),Li(this,kl,null)}),Io(this,F0,async e=>W2(window.ethereum,e)),Io(this,L0,async e=>o5(window.ethereum,e)),Io(this,$0,async e=>a5(window.ethereum,e)),Io(this,V0,async e=>c5(window.ethereum,e)),Li(this,Mo,!1),Li(this,ya,!1)}get version(){return"1.0.0"}get name(){return Z2.NAME}get icon(){return t5}get chains(){return e5}get connecting(){return ws(this,Mo)}get accounts(){return ws(this,ya)&&ws(this,kl)?ws(this,kl):[]}get features(){return{"standard:connect":{version:"1.0.0",connect:ws(this,P0)},"standard:disconnect":{version:"1.0.0",disconnect:ws(this,U0)},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:ws(this,F0)},"sui:signMessage":{version:"1.0.0",signMessage:ws(this,L0)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:ws(this,$0)},"sui:signAndExecuteTransactionBlock":{version:"1.0.0",signAndExecuteTransactionBlock:ws(this,V0)},"standard:events":{version:"1.0.0",on:()=>()=>{}}}}};Mo=new WeakMap;ya=new WeakMap;kl=new WeakMap;P0=new WeakMap;U0=new WeakMap;F0=new WeakMap;L0=new WeakMap;$0=new WeakMap;V0=new WeakMap;qs(K2,"NAME","Sui MetaMask Snap");var p_=K2;function Q2(){const n=Vs(),e=Le(()=>n),t=wr(),r=Le(()=>t),i=Le(()=>r.value.chainName?z4(r.value.chainName):{}),s=[new FD({features:void 0})];console.log("suiAdapters####",s);const o=U8({adapters:s}),a=Le(()=>{console.log("0417###suiWalletState####suiWalletKitRef####",o);const y=o.subscribe;return console.log("0417####suiWalletState###test####",y),o.getState()}),c=Le(()=>a.value.wallets||[]),l={Martian:fM,Petra:dM,Fewcha:NM,Pontem:DM,Spika:FM,Blocto:QN,Coin98:$M,OKX:GN,TokenPocket:XN,Bitget:e8,Rise:n8,OpenBlock:i8,Trust:cM,MSafe:new x8("https://app.m-safe.io"),Spacecy:M8,Nightly:PM,Bybit:N8};Le(()=>r.value.chainName!=="Aptos"?c:l);const u={wallet:{}},d=Fe(!1),h=Fe(""),{$notify:f}=Zp();return{account:h,isConnected:d,currentWallet:u,connect:async(y,C,A=r.value.chainName,M="",H="")=>{var E,j,R;n.setSwitchWallet(!1);const G=A!=="Aptos"?c.value:l;let q=y;console.log("0329###wallet connet###wallets###",G),console.log("0329###wallet connet###walletName###",q);let X=null;if(A==="Aptos")X=q!=="MSafe"?new G[q]:G[q];else{if(console.log("1030###walletName###",q),q=="Sui MetaMask Snap"){const V=await i5();console.log("1030###test###",V)}q==="Sui Wallet"&&C==="fox"&&!(window!=null&&window.foxwallet)&&(q="FoxWallet"),X=G.find(V=>V.name.indexOf(q)>-1||q.replace(/\s*/g,"")==V.name),q.replace(/\s*/g,"")==(X==null?void 0:X.name)&&(q=q.replace(/\s*/g,""))}if(console.log("0511###wallet connet###selectedWallet###",X),console.log("0511###wallet connet###walletName###",q),X){if(n.walletName==X.name&&X.connected)return!1;try{let V,U="",Y=null;if(A!=="Aptos"){const p=await o.connect(q);console.log("0329###wallet connet###suiWalletKitRef###",o),u.wallet=o;const g=o.getState();console.log("0329###wallet connet###suiWalletState###",g);const k=g.currentAccount;Y=k,k&&(U=typeof k=="string"?k:k.address),V=!!U}else{const p=await X.connect();console.log("🚀🚀🚀 ~ file: useWalletProvider.ts:171 ~ connect ~ result:",p),u.wallet=X,console.log("🚀🚀🚀 ~ file: useWalletProvider.ts:173 ~ connect ~ selectedWallet:",X),X.name=="Trust"?(U=(await X.account()).address||"",V=!0):(U=((j=(E=u==null?void 0:u.wallet)==null?void 0:E.publicAccount)==null?void 0:j.address)||"",console.log("🚀🚀🚀 ~ file: useWalletProvider.ts:180 ~ connect ~ account:",U),V=(R=u==null?void 0:u.wallet)==null?void 0:R.connected)}X&&X.network&&X.network.name&&(console.log(X.network.name,"====>selectedWallet"),n.setNetwork(X.network.name)),n.setCurrentWallet({wallet:A!=="Aptos"?o:X,isConnected:V,account:U,platform:A==="Aptos"?"Apots":"Sui",icon:C,walletName:A!=="Aptos"?H:X.name,accountObj:Y}),i.value.getAccount(U),localStorage.setItem(`cetus-${A}-current-wallet`,q),localStorage.setItem(`cetus-${A}-current-suiwallet`,H),localStorage.setItem(`cetus-${A}-wallet-icon-name`,C);const x=o.getState();U?f.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:U4.global.t("tips.walletConnected")},null)]),class:"ant-notification-copy"}):x.status==="ERROR"&&(console.log(x,"###suiWalletState.status"),f.error({class:"ant-notification-copy ant-notification-error",message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"Connect Error"},null)]),description:"Connect Wallet Failed",duration:4.5,icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})])}))}catch(V){if(console.log("0329###wallet connet###useWalletProvider###error###",V),V.name==="WalletNotReadyError"||!(window!=null&&window.trustwallet)&&(q!=null&&q.includes("Trust"))){const U=X.url,Y=["Please install ",Ve("a",{href:U,target:"_blank"},`${q} wallet`)," extension first"];f.error({class:"ant-notification-copy ant-notification-error",message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"Wallet Not Ready Error"},null)]),description:Ve("div",Y),duration:4.5,icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})])});return}f.error({class:"ant-notification-copy ant-notification-error",message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:V.name||"Rejected"},null)]),description:"Connect Wallet Failed",duration:4.5,icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})])})}}else if(A!=="Aptos"){const U=["Please install ",Ve("a",{href:M,target:"_blank"},`${q}`)," extension first"];f.error({class:"ant-notification-copy ant-notification-error",message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"Wallet Not Ready Error"},null)]),description:Ve("div",U),duration:4.5,icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})])})}},disconnect:async()=>{if(u.wallet)try{const y=await e.value.currentWallet.disconnect();n.setCurrentWallet({wallet:null,isConnected:!1,account:"",platform:r.value.chainName,icon:""}),n.setAssets({})}catch(y){console.log("disconnect error###",y)}}}}const u5=Vr({components:{Modal:wo},setup(){const{t:n}=cu(),e=Zp(),t=Vs(),r=wr(),i=wr(),s=Le(()=>i),o=Le(()=>s.value.chainName),a=E=>{var j=typeof E;if(j=="string")return E.length;if(j=="object"){var R=0;for(var V in E)R++;return R}return!1},c=Le(()=>nr[o.value]),l=Fe("Wallet"),u=i0({Martian:{name:"Martian",url:"https://chrome.google.com/webstore/detail/martian-wallet/efbglgofoippbgcjepnhiblaibcnclgk",iconName:"Martian",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUyIiBoZWlnaHQ9IjM1MiIgdmlld0JveD0iMCAwIDM1MiAzNTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzNTIiIGhlaWdodD0iMzUyIiByeD0iODciIGZpbGw9IiMxRjFGMUYiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNjkuNzAxIDg5LjA4NDFDMTU5LjUwOCA4OS44MzA5IDE1MC41NDcgOTIuMDAxNCAxNDEuMDc2IDk2LjAxNjlDMTM5LjQyNCA5Ni43MTc0IDEzMy43MDIgOTkuNjAzNyAxMzIuMTE2IDEwMC41MzdDMTI4LjEzMSAxMDIuODgxIDEyMy4wNDMgMTA2LjQ5NiAxMTkuNTg2IDEwOS40NEMxMTYuOTc1IDExMS42NjUgMTExLjIxNiAxMTcuNDUyIDEwOS4yMDIgMTE5Ljg3NkMxMDUuMDg1IDEyNC44MzIgMTAxLjA4OCAxMzAuODg2IDk4LjQzODQgMTM2LjE3OUM5Ny45OTQyIDEzNy4wNjYgOTcuNTYzNSAxMzcuODE3IDk3LjQ4MTMgMTM3Ljg0OEM5Ny4zOTkzIDEzNy44OCA5Ny4zMzIgMTM3Ljk5NSA5Ny4zMzIgMTM4LjEwNUM5Ny4zMzIgMTM4LjIxNCA5Ni43Njg1IDEzOS42MDggOTYuMDc5NiAxNDEuMkM5NC42OTc1IDE0NC4zOTYgOTIuOTE3NiAxNDkuNDk2IDkxLjk5MjUgMTUyLjkwOUM4OS42MjY3IDE2MS42NCA4OC41NDA3IDE3Mi40OTUgODkuMTgxMSAxODEuMDExQzkwLjM4ODggMTk3LjA3MSA5NS4xODY2IDIxMS4xMiAxMDMuODUzIDIyMy45NzVDMTEwLjE0NyAyMzMuMzExIDExOC4zMzYgMjQxLjQxMyAxMjcuOTk1IDI0Ny44NjFDMTM4LjkzNiAyNTUuMTYzIDE1MS45NzEgMjU5LjkxIDE2NS41MzIgMjYxLjUyOUMxNjkuMjQ3IDI2MS45NzIgMTc3LjczMSAyNjIuMTQ2IDE4MS43NjIgMjYxLjg2MUMxOTguMDkzIDI2MC43MDYgMjEzLjYxNiAyNTQuOTk0IDIyNi43OCAyNDUuMjk3QzI0NC4wODIgMjMyLjU1MiAyNTYuMDc2IDIxMy43OTcgMjYwLjMzMiAxOTIuODM0QzI2MS42MDEgMTg2LjU4MiAyNjIuMDA2IDE4Mi4zNTUgMjYyIDE3NS40MDdDMjYxLjk5NiAxNzAuMzM3IDI2MS45NDYgMTY5LjI5NSAyNjEuNTQxIDE2NS44MjlDMjU5LjcwNSAxNTAuMTQyIDI1NC4wNTkgMTM1Ljg4OCAyNDQuNzgzIDEyMy41MjdDMjM4LjkwMyAxMTUuNjg5IDIzMC45OTIgMTA4LjI0OCAyMjMuMDk4IDEwMy4xMjlDMjE4LjQ4NSAxMDAuMTM2IDIxNi4xNzggOTguODU1NSAyMTEuNjYxIDk2Ljc3NzRDMjAyLjMzOCA5Mi40ODc5IDE5Mi4zNzYgODkuOTA5MSAxODIuMTg3IDg5LjE0NzlDMTgwLjA0MiA4OC45ODc2IDE3MS42MDYgODguOTQ0NSAxNjkuNzAxIDg5LjA4NDFaTTE4My4wMjUgMTAzLjY1N0MxODkuNTAzIDEwNC4zNDggMTk2LjI4NCAxMDYuMDM0IDIwMi4zNiAxMDguNDY0TDIwNC4zNTYgMTA5LjI2MkwyMDQuMzU2IDExMC44MjJDMjA0LjM1NyAxMTYuODk2IDIwMC4zNDQgMTIyLjMwNyAxOTQuMzMzIDEyNC4zMzRMMTkyLjcyIDEyNC44NzhMMTczLjUyMyAxMjQuOTg3QzE1NS4yODkgMTI1LjA5IDE1MS45OTQgMTI1LjE3NSAxNDcuNjE2IDEyNS42NTdDMTM3LjY3NiAxMjYuNzUyIDEyOS44NzIgMTI4LjI2NSAxMjEuMzAyIDEzMC43NjFDMTIwLjA1IDEzMS4xMjUgMTE4LjkxNyAxMzEuNDI0IDExOC43ODUgMTMxLjQyNEMxMTguNDY0IDEzMS40MjQgMTE4LjkwOSAxMzAuNzkxIDEyMC43NTIgMTI4LjYyMkMxMjQuNDgzIDEyNC4yMzMgMTMwLjczMiAxMTguNTk4IDEzNC43MDYgMTE2LjA0MUMxMzUuMTI2IDExNS43NyAxMzUuNTA4IDExNS41MDkgMTM1LjU1NSAxMTUuNDZDMTM1LjYwMiAxMTUuNDExIDEzNi4yNTEgMTE0Ljk3OSAxMzYuOTk5IDExNC41MDFDMTQyLjI2MyAxMTEuMTMxIDE0OC4wMzYgMTA4LjQ0MSAxNTQuMDcyIDEwNi41NDNDMTU5LjY1OCAxMDQuNzg3IDE2NC44MTQgMTAzLjg3MiAxNzIuMTY0IDEwMy4zMzFDMTczLjg3NCAxMDMuMjA2IDE4MC43MjMgMTAzLjQxMSAxODMuMDI1IDEwMy42NTdaTTIxOS4xMzMgMTE4LjAyMkMyMjIuNzUxIDEyMC43NzkgMjI5LjQ5OSAxMjcuMTM2IDIyOS40OTkgMTI3Ljc4N0MyMjkuNDk5IDEyOC42MDYgMjI2Ljc1IDEzMy40OTMgMjI0Ljc4NCAxMzYuMTY4QzIxOC4wMzIgMTQ1LjM1NSAyMDcuOTIxIDE1MS41NTYgMTk2Ljc5NyAxNTMuMzMyQzE5My45NDUgMTUzLjc4OCAxOTEuOTk0IDE1My44MzUgMTc1LjczMiAxNTMuODQ1QzE1NS4zOTYgMTUzLjg1NyAxNTIuNTc3IDE1My45NjYgMTQ1LjA2OCAxNTUuMDI4QzEzMS4xNjkgMTU2Ljk5NCAxMTguMDA0IDE2MS4zODUgMTA1Ljc3IDE2OC4xMzdDMTA0Ljc1NyAxNjguNjk1IDEwMy44ODUgMTY5LjEwOCAxMDMuODMxIDE2OS4wNTRDMTAzLjY1IDE2OC44NzMgMTA0LjMxMyAxNjMuOTY5IDEwNC44OTUgMTYxLjE4MkMxMDUuNTE0IDE1OC4yMTggMTA2LjU0MiAxNTQuNDE0IDEwNy4zMTEgMTUyLjI0N0wxMDcuNzg2IDE1MC45MDlMMTA5LjQ4MSAxNTAuMTU2QzEyMC45OTQgMTQ1LjA0MiAxMzQuODA4IDE0MS4zODIgMTQ3LjQ0NyAxNDAuMDk3QzE1NC4yNTggMTM5LjQwNSAxNTUuMTY2IDEzOS4zNzggMTczLjk0OCAxMzkuMzA0QzE4NC45MTIgMTM5LjI2MSAxOTMuMTE2IDEzOS4xNiAxOTMuOTMgMTM5LjA2QzE5NS4yOCAxMzguODkyIDE5Ny44NDYgMTM4LjI4NyAxOTkuNDEgMTM3Ljc2NkMxOTkuODQxIDEzNy42MjIgMjAxLjE4OCAxMzcuMDI1IDIwMi40MDMgMTM2LjQzOUMyMDkuNTU2IDEzMi45ODcgMjE0LjkxIDEyNi43OTggMjE3LjM1OCAxMTkuMTU0QzIxNy43OTIgMTE3Ljc5OCAyMTguMDU3IDExNy4yMDQgMjE4LjE4NCAxMTcuM0MyMTguMjg3IDExNy4zNzggMjE4LjcxNCAxMTcuNzAzIDIxOS4xMzMgMTE4LjAyMlpNMjM5LjM5OSAxNDEuODI1QzI0MC42NzggMTQ0LjAyMyAyNDIuODA1IDE0OS4xNjMgMjQ0LjA5MSAxNTMuMTZDMjQ1LjE0MSAxNTYuNDI2IDI0NS4yMTggMTU2LjgxOCAyNDQuODk5IDE1Ny4zMDVDMjQ0LjQ1MyAxNTcuOTg1IDIzOC45OTEgMTYzLjUxMSAyMzcuMzc3IDE2NC45MTZDMjI5LjUxNCAxNzEuNzU2IDIyMC4yNTIgMTc2Ljg4MiAyMTAuNTc1IDE3OS43NUMyMDUuNzczIDE4MS4xNzMgMjAxLjM0NCAxODIuMDAxIDE5NS42MjMgMTgyLjU0NkMxOTQuNjk4IDE4Mi42MzQgMTg1Ljk0NSAxODIuNzE2IDE3Ni4xNzIgMTgyLjcyOUMxNTUuMDkgMTgyLjc1NSAxNTMuODA5IDE4Mi44MTEgMTQ2LjU5NyAxODQuMDAxQzEzMy44MDkgMTg2LjExMiAxMjAuNjg1IDE5MS43MDYgMTEwLjA5NCAxOTkuNTZDMTA5LjIwNSAyMDAuMjE5IDEwOC4zNjggMjAwLjc2NyAxMDguMjM1IDIwMC43NzdDMTA3Ljk1NCAyMDAuNzk4IDEwNy4zODIgMTk5LjIxOCAxMDYuMjQ0IDE5NS4yNzZDMTA1LjQyOSAxOTIuNDUyIDEwNC4yNDggMTg2LjgxNCAxMDQuMzMxIDE4Ni4xNEMxMDQuMzcxIDE4NS44MTkgMTA0Ljg5NyAxODUuNDAxIDEwNi43NiAxODQuMjExQzExNy42NTkgMTc3LjI0NiAxMjkuNDk5IDE3Mi40ODcgMTQxLjkyNSAxNzAuMDc1QzE0NS4zODMgMTY5LjQwNCAxNDUuOTMxIDE2OS4zMjIgMTQ5Ljk5NSAxNjguODY1QzE1NSAxNjguMzAyIDE1Ni42NjQgMTY4LjI2MSAxNzcuMDA2IDE2OC4yMDVDMTk1LjY3MiAxNjguMTUzIDE5NS44ODMgMTY4LjE0NCAyMDAuODc0IDE2Ny4xNzRDMjA4LjYzNiAxNjUuNjY3IDIxNi4yMDcgMTYyLjQ3MyAyMjIuNjI4IDE1Ny45OThDMjI4LjUzMyAxNTMuODgyIDIzNC40MDMgMTQ3Ljg5MiAyMzcuOTcgMTQyLjM0QzIzOC40MDMgMTQxLjY2NiAyMzguODA3IDE0MS4xMTIgMjM4Ljg2OCAxNDEuMTA5QzIzOC45MjkgMTQxLjEwNiAyMzkuMTY4IDE0MS40MjggMjM5LjM5OSAxNDEuODI1Wk0yNDcuNjc1IDE3Ni44MDhDMjQ3LjY3MiAxODEuNTQ5IDI0Ni43NTUgMTg4LjE3NyAyNDUuMzU5IDE5My41MzNDMjQ0Ljk1NyAxOTUuMDc3IDI0NC44NDcgMTk1LjMwOCAyNDQuMzggMTk1LjU5QzI0NC4wOSAxOTUuNzY2IDI0My4zMTggMTk2LjIzOCAyNDIuNjY0IDE5Ni42NDFDMjMwLjUzNCAyMDQuMTA4IDIxNi40MTUgMjA5LjEzNyAyMDMuMTIxIDIxMC43MjVDMjAxLjUxMSAyMTAuOTE3IDE5OS41NDQgMjExLjE2MyAxOTguNzUgMjExLjI3MUMxOTcuNzcgMjExLjQwNCAxOTAuNzU0IDIxMS41MDcgMTc2LjkyMSAyMTEuNTkxQzE2NS43MDkgMjExLjY1OCAxNTYuMzA2IDIxMS43NTYgMTU2LjAyNSAyMTEuODA3QzE1NS43NDUgMjExLjg1OSAxNTQuNzkgMjExLjk4OSAxNTMuOTAyIDIxMi4wOTdDMTQzLjc3MiAyMTMuMzI1IDEzMy4yMDggMjE3Ljg1OSAxMjUuMTU2IDIyNC40MzRDMTI0LjQzNiAyMjUuMDIyIDEyMy43NzIgMjI1LjUwMyAxMjMuNjggMjI1LjUwM0MxMjMuMTkxIDIyNS41MDMgMTE4LjA5MiAyMTkuMjc5IDExNS44OSAyMTUuOTk0QzExNC45NDQgMjE0LjU4MiAxMTQuNzM2IDIxNC4xNjEgMTE0Ljg5IDIxMy45NzJDMTE1LjIyNyAyMTMuNTU4IDExOS40MjggMjEwLjM5MSAxMjEuMiAyMDkuMjE1QzEyNy40NDEgMjA1LjA3NCAxMzQuMTA1IDIwMS45NjQgMTQwLjk5MSAxOTkuOThDMTQ1LjAwMyAxOTguODI0IDE0Ny45NDkgMTk4LjIyNyAxNTMuMDM3IDE5Ny41NDJDMTU1LjMzMiAxOTcuMjMzIDE1OC42NjcgMTk3LjE3NSAxODAuMTQ4IDE5Ny4wNzJDMTk1Ljg1OCAxOTYuOTk2IDE5Ny4xMiAxOTYuOTQ2IDIwMi4zMTggMTk2LjE5N0MyMTQuNzAxIDE5NC40MTIgMjI2LjYyNyAxODkuODU3IDIzNy4zOTggMTgyLjc5N0MyMzkuNTQ4IDE4MS4zODggMjQzLjcxMiAxNzguMjU2IDI0NS43MjIgMTc2LjUzNUMyNDYuNjU2IDE3NS43MzUgMjQ3LjQ3OCAxNzUuMDc4IDI0Ny41NDggMTc1LjA3NEMyNDcuNjE4IDE3NS4wNyAyNDcuNjc1IDE3NS44NSAyNDcuNjc1IDE3Ni44MDhaTTIzNC40MjUgMjE3LjEyOUMyMzQuNDI1IDIxNy4yOTQgMjMyLjIxOCAyMjAuMTc1IDIzMC42MTYgMjIyLjEwMkMyMjguODg1IDIyNC4xODUgMjIzLjkyOSAyMjkuMTM0IDIyMS44NjYgMjMwLjg0MUMyMTAuMzQ3IDI0MC4zNzEgMTk3LjE0MSAyNDUuOTA2IDE4Mi4yNzIgMjQ3LjQzNUMxNzkuMjIyIDI0Ny43NDggMTcxLjA4OSAyNDcuNjk4IDE2OC4xMDQgMjQ3LjM0NkMxNjAuNTU1IDI0Ni40NTggMTUzLjk3MiAyNDQuNzYzIDE0Ny40NDcgMjQyLjAyOEMxNDUuOTEzIDI0MS4zODUgMTQxLjgxNCAyMzkuMzc5IDE0MC41MDMgMjM4LjYyOUMxMzcuODA3IDIzNy4wODkgMTM0Ljg3MyAyMzUuMjExIDEzNC44NzggMjM1LjAzMUMxMzQuODg4IDIzNC42ODQgMTM5LjY4MSAyMzEuNjU0IDE0Mi4xOTUgMjMwLjQwN0MxNDYuMDU3IDIyOC40OSAxNDkuNDU3IDIyNy4zOTcgMTU0LjM5IDIyNi40ODdDMTU2LjMxMiAyMjYuMTMyIDE1Ni45MTEgMjI2LjExOSAxNzYuNDExIDIyNi4wMDFDMTg3LjQzNiAyMjUuOTM0IDE5Ni44MDEgMjI1LjgzNSAxOTcuMjIxIDIyNS43OEMxOTcuNjQyIDIyNS43MjUgMTk5LjAxOCAyMjUuNTk3IDIwMC4yNzkgMjI1LjQ5NEMyMDUuMTI2IDIyNS4xIDIxMS44NDMgMjIzLjk3NiAyMTYuOTU5IDIyMi43MDRDMjE5LjYzOSAyMjIuMDM4IDIyNC4xNTggMjIwLjc5NCAyMjQuNjU3IDIyMC41ODZDMjI0Ljg0NCAyMjAuNTA4IDIyNi4wMjkgMjIwLjA5MiAyMjcuMjkgMjE5LjY2MkMyMjguNTUxIDIxOS4yMzEgMjMwLjYxNSAyMTguNDY2IDIzMS44NzcgMjE3Ljk2MUMyMzQuMzIzIDIxNi45ODIgMjM0LjQyNSAyMTYuOTQ5IDIzNC40MjUgMjE3LjEyOVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="},Pontem:{name:"Pontem",url:"https://chrome.google.com/webstore/detail/pontem-wallet/phkbamefinggmakgklpkljjmgibohnba",iconName:"Pontem",icon:"https://www.gitbook.com/cdn-cgi/image/width=20,height=20,fit=contain,dpr=2,format=auto/https%3A%2F%2F736486047-files.gitbook.io%2F~%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-MVVJKmKQGx983dZy_jr%252Favatar-1619180126965.png%3Fgeneration%3D1619180127194239%26alt%3Dmedia"},Fewcha:{name:"Fewcha",url:"https://fewcha.app/",iconName:"Fewcha",icon:"https://miro.medium.com/fit/c/176/176/1*a0WaY-q7gjCRiuryRG6TkQ.png"},Coin98:{name:"Coin98",url:"https://chrome.google.com/webstore/detail/coin98-wallet/aeachknmefphepccionboohckonoeemg",iconName:"coin98",icon:"https://coin98.s3.ap-southeast-1.amazonaws.com/Coin/c98wallet.png"},Blocto:{name:"Blocto",url:"https://portto.com/download",iconName:"Blocto",icon:""},Petra:{name:"Petra",url:"https://chrome.google.com/webstore/detail/petra-aptos-wallet/ejjladinnckdgjemekebdpeokbikhfci",iconName:"Petra",icon:"https://miro.medium.com/fit/c/176/176/1*Gf747eyRywU8Img0tK5wvw.png"},OKX:{name:"OKX",url:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge",iconName:"OKX",icon:""},TokenPocket:{name:"TokenPocket",url:"https://chrome.google.com/webstore/detail/tokenpocket/mfgccjchihfkkindfppnaooecgfneiii",iconName:"TokenPocket",icon:"https://tp-statics.tokenpocket.pro/logo/tokenpocket.png"},Bitget:{name:"Bitget",url:"https://chrome.google.com/webstore/detail/bitkeep-bitcoin-crypto-wa/jiidiaalihmmhddjgbnbgdfflelocpak",iconName:"Bitget",icon:"https://raw.githubusercontent.com/bitkeepwallet/download/main/logo-png/BitKeep_logo_circle.png"},Rise:{name:"Rise",url:"https://chrome.google.com/webstore/detail/rise-aptos-wallet/hbbgbephgojikajhfbomhlmmollphcad",iconName:"Rise",icon:""},OpenBlock:{name:"OpenBlock",url:"https://chrome.google.com/webstore/detail/openblock-bridge/memiokcjdencbponfgbkojkenpdpejhj",iconName:"OpenBlock",icon:""},Trust:{name:"Trust",url:"https://trustwallet.com/",iconName:"Trust",icon:""},MSafe:{name:"MSafe",url:"",iconName:"Msafe",icon:""},Spacecy:{name:"Spacecy",url:"https://chrome.google.com/webstore/detail/spacecy-wallet/mkchoaaiifodcflmbaphdgeidocajadp?hl=en-US",iconName:"Spacecy",icon:""},Nightly:{name:"Nightly",walletName:"Nightly",url:"https://chrome.google.com/webstore/detail/nightly/fiikommddbeccaoicoejoniammnalkfa",iconName:"nightly",icon:""}}),d=i0({suiWallet:{name:"Sui Wallet",walletName:"Sui Wallet",url:"https://chrome.google.com/webstore/detail/sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil",iconName:"sui-wallet-icon",icon:""},Suiet:{name:"Suiet",walletName:"Suiet",url:"https://chrome.google.com/webstore/detail/suiet-sui-wallet/khpkpbbcccdmmclmpigdgddabeilkdpd",iconName:"suiet-icon",icon:""},OKX:{name:"OKX Wallet",walletName:"OKX Wallet",url:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge",iconName:"OKX",icon:""},Martian:{name:"Martian",walletName:"Martian Sui Wallet",url:"https://chrome.google.com/webstore/detail/martian-wallet/efbglgofoippbgcjepnhiblaibcnclgk",iconName:"Martian",icon:""},Stashed:{name:"Stashed",walletName:"Stashed",url:"https://getstashed.com",iconName:"stashed",icon:""},SuiMetaMaskSnap:{name:"SuiMetaMaskSnap",walletName:"Sui MetaMask Snap",url:"https://suisnap.com",iconName:"metamask",icon:""},Binance:{name:"Binance Web3 Wallet",walletName:"Binance Web3 Wallet",url:"https://chromewebstore.google.com/detail/%E5%B8%81%E5%AE%89%E9%93%BE%E9%92%B1%E5%8C%85/fhbohimaelbohpjbbldcngcnapndodjp?hl=zh-CN&utm_source=ext_sidebar",iconName:"binance",icon:""},Bybit:{name:"Bybit Wallet",walletName:"Bybit Wallet",url:"https://chromewebstore.google.com/search/Bybit%20Wallet?hl=zh-CN&utm_source=ext_sidebar",iconName:"bybit",icon:""},Gate:{name:"Gate",walletName:"Gate Wallet",url:"https://chromewebstore.google.com/detail/gate-wallet/cpmkedoipcpimgecpmgpldfpohjplkpp",iconName:"gate",icon:""},Ethos:{name:"Ethos",walletName:"Ethos Wallet",url:"https://chrome.google.com/webstore/detail/ethos-sui-wallet/mcbigmjiafegjnnogedioegffbooigli",iconName:"Ethos",icon:""},Surf:{name:"Surf",walletName:"Surf Wallet",url:"https://chrome.google.com/webstore/detail/surf-wallet/emeeapjkbcbpbpgaagfchmcgglmebnen",iconName:"surf",icon:""},Coin98:{name:"Coin98",walletName:"Coin98",url:"https://chrome.google.com/webstore/detail/coin98-wallet/aeachknmefphepccionboohckonoeemg",iconName:"coin98",icon:"https://coin98.s3.ap-southeast-1.amazonaws.com/Coin/c98wallet.png"},MSafe:{name:"MSafe Wallet",walletName:"MSafe Wallet",url:"https://sui.m-safe.io/",iconName:"Msafe",icon:""},OneKey:{name:"OneKey Wallet",walletName:"OneKey Wallet",url:"https://chromewebstore.google.com/detail/onekey/jnmbobjmhlngoefaiojfljckilhhlhcj",iconName:"OneKey",icon:""},Fewcha:{name:"Fewcha",walletName:"Fewcha Move Wallet",url:"https://fewcha.app/",iconName:"Fewcha",icon:"https://miro.medium.com/fit/c/176/176/1*a0WaY-q7gjCRiuryRG6TkQ.png"},SafePal:{name:"SafePal",walletName:"SafePal",url:"https://chrome.google.com/webstore/detail/safepal-extension-wallet/lgmpcpglpngdoalbgeoldeajfclnhafa",iconName:"safepal",icon:""},Morphis:{name:"Morphis",walletName:"Morphis Wallet",url:"https://chrome.google.com/webstore/detail/morphis-wallet/heefohaffomkkkphnlpohglngmbcclhi",iconName:"Morphis",icon:""},Nightly:{name:"Nightly",walletName:"Nightly",url:"https://chrome.google.com/webstore/detail/nightly/fiikommddbeccaoicoejoniammnalkfa",iconName:"nightly",icon:""},Bitget:{name:"Bitget Wallet",walletName:"Bitget Wallet",url:"https://chrome.google.com/webstore/detail/bitkeep-bitcoin-crypto-wa/jiidiaalihmmhddjgbnbgdfflelocpak",iconName:"Bitget",icon:"https://raw.githubusercontent.com/bitkeepwallet/download/main/logo-png/BitKeep_logo_circle.png"},Elli:{name:"Elli",walletName:"Elli",url:"https://chrome.google.com/webstore/detail/elli-sui-wallet/ocjdpmoallmgmjbbogfiiaofphbjgchh",iconName:"elli",icon:""},Fox:{name:"Fox",walletName:"Sui Wallet",url:"https://foxwallet.com/download",iconName:"fox",icon:""},Math:{name:"Math",walletName:"MathWallet",url:"https://mathwallet.org/",iconName:"math",icon:""},TokenPocket:{name:"TokenPocket Wallet",walletName:"TokenPocket Wallet",url:"https://chrome.google.com/webstore/detail/tokenpocket/mfgccjchihfkkindfppnaooecgfneiii",iconName:"tokenpocket",icon:""},Spacecy:{name:"Spacecy",walletName:"Spacecy Sui Wallet",url:"https://chrome.google.com/webstore/detail/spacecy-wallet/mkchoaaiifodcflmbaphdgeidocajadp",iconName:"Spacecy",icon:""}}),h=Le(()=>s.value.chainName!=="Aptos"?d:u),f=Fe(!1),m=Le(()=>t),{connect:w,disconnect:y}=Q2();function C(E,j){s.value.chainName!=="Aptos"?w(j.walletName,j.iconName,s.value.chainName,j.url,j.name):w(j.name,j.iconName,s.value.chainName),t.setIsShowWalletModal(!1),t.setWalletIconName(j.iconName)}const A=Fe([]);ns(()=>s.value.newAddtransactionList,E=>{E&&(A.value=E.sort((j,R)=>R.date-j.date).filter((j,R)=>{if(j.chainName==s.value.chainName)return j.date>new Date().getTime()&&j.walletAddress==m.value.address&&R<50}))},{immediate:!0,deep:!0});const M=Fe(0),H=Fe(!1),G=()=>{r.clearTransactionList()},q=()=>{t.setIsShowWalletModal(!1),t.setSwitchWallet(!1)},X=Le(()=>s.value.currentExplorer);return{getExplorerUrl:Wo,timeFormat:wd,offset:M,scrollDisabled:H,transactionList:A,store:s,currentToggle:l,importIcon:Zt,walletList:h,wallet:m,isLoading:f,nuxtApp:e,setWallet:C,indexStore:r,config:c,chainName:o,clearTrans:G,t:n,walletModalCancel:q,count:a,currentExplorer:X}}}),d5=""+globalThis.__publicAssetsURL("image/logo-bg@2x.png"),h5=""+globalThis.__publicAssetsURL("sui-image/logo-bg@2x.png");const Ga=n=>(Ri("data-v-f089ccfc"),n=n(),Pi(),n),f5=Ga(()=>N("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),p5={key:0,class:"wallet-title"},m5={key:1,class:"wallet-sub-title"},g5={key:2,class:"wallet-title"},w5={key:0,class:"select-wallet"},y5=["disabled","onClick"],b5={key:0,class:"wallet-name"},_5=Ga(()=>N("div",null,"Sui",-1)),v5=Ga(()=>N("div",null,"MetaMask",-1)),k5=Ga(()=>N("div",null,"Snap",-1)),S5=[_5,v5,k5],C5={key:1},A5={class:"icon-box"},T5=["src"],I5={key:0},x5={key:1},E5={key:0,class:"left"},M5={class:"platform"},O5={class:"address"},N5=Ga(()=>N("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),j5=[N5],D5={class:"copy-and-view"},B5=["href"],R5=Ga(()=>N("svg",{class:"icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon-jump"})],-1)),P5={class:"btn-box"},U5={class:"item"},F5=Ga(()=>N("div",{class:"svg-box"},[N("svg",{class:"icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-a-icon-Disconnect1"})])],-1)),L5={class:"item"},$5=Ga(()=>N("div",{class:"svg-box"},[N("svg",{class:"icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-a-icon-Switch1"})])],-1)),V5={key:1,class:"transtions"},q5={key:0,class:"transtionDetail"},z5={class:"bottom"},W5=["href"],K5={class:"tit"},Z5={class:"tit-left"},Q5={"aria-hidden":"true",class:"icon"},H5=["xlink:href"],G5={class:"tit-right"},Y5={class:"tokenInfo"},X5={class:"token-left"},J5={key:0,class:"tokenInfo-left"},eB={class:"img-box-token"},tB={key:0,alt:""},nB={key:1,alt:""},rB={key:2,alt:""},iB={key:0,class:"name"},sB={key:0},oB={key:1},aB={key:2},cB={key:1,class:"name"},lB={key:1,class:"tokenInfo-left tokenInfo-no-flex"},uB={key:0,class:"img-box-token"},dB={key:0,alt:""},hB={key:1},fB={key:1,class:"img-box-token"},pB={key:0,alt:""},mB={key:1},gB={key:2,class:"img-box-token"},wB={key:0,alt:""},yB={key:1},bB={key:0,class:"token-right"},_B={key:1,class:"token-right"},vB={key:3},kB={key:0},SB={key:1,class:"noData"},CB={key:0,src:ix},AB={key:1,src:Nw},TB={key:2,class:"right"},IB={key:0,src:d5,alt:""},xB={key:1,src:h5,alt:""};function EB(n,e,t,r,i,s){const o=yo("Modal"),a=_v("image");return ne(),ar(o,{width:n.wallet.connected&&!n.wallet.switchWallet?420:552,visible:!0,class:Ge(["wallet-modal",n.wallet.connected&&!n.wallet.switchWallet?"wallet-modal-already":"wallet-modal"]),footer:null,centered:"",onCancel:n.walletModalCancel},{closeIcon:kt(()=>[f5]),title:kt(()=>[!n.wallet.connected||n.wallet.switchWallet?(ne(),re("h3",p5,Se(n.$t("modal.walletModal")),1)):ye("",!0),!n.wallet.connected||n.wallet.switchWallet?(ne(),re("p",m5,Se(n.$t("modal.walletModalText")),1)):ye("",!0),n.wallet.connected&&!n.wallet.switchWallet?(ne(),re("h3",g5,Se(n.$t("modal.walletConnectModalTitle")),1)):ye("",!0)]),default:kt(()=>[!n.wallet.connected||n.wallet.switchWallet?(ne(),re("div",w5,[(ne(!0),re(qn,null,rr(n.walletList,(c,l)=>(ne(),re("button",{key:l,disabled:n.isLoading,class:"wallet-item",ghost:"",onClick:u=>n.setWallet(!0,c)},[l=="SuiMetaMaskSnap"?(ne(),re("div",b5,S5)):(ne(),re("span",C5,Se(l=="suiWallet"?"Sui Wallet":l=="SuiMetaMaskSnap"?"Sui MetaMask Snap":l=="Bitget"?"Bitget Wallet":l=="Bybit"?"Bybit Wallet":l),1)),N("div",A5,[N("img",{src:`/image/wallet/${c.iconName.toLowerCase()}.png`},null,8,T5)])],8,y5))),128)),Number.isInteger(n.count(n.walletList)/3)?ye("",!0):(ne(),re("div",I5)),!Number.isInteger(n.count(n.walletList)/3)&&!Number.isInteger((n.count(n.walletList)+1)/3)?(ne(),re("div",x5)):ye("",!0)])):(ne(),re("div",{key:1,class:Ge(n.currentToggle=="Wallet"?"wallet-info walletflex":"wallet-info transations-info")},[n.currentToggle=="Wallet"?(ne(),re("div",E5,[N("div",M5,Se(n.$t("modal.walletName"))+" "+Se(n.wallet.walletName),1),N("p",O5,[pr(Se(n.wallet.address&&n.wallet.address.substr(0,6))+" ... "+Se(n.wallet.address&&n.wallet.address.substr(n.wallet.address.length-4,4))+" ",1),(ne(),re("svg",{class:"icon","aria-hidden":"true",onClick:e[0]||(e[0]=c=>n.indexStore.copy(n.wallet.address))},j5))]),N("div",D5,[N("a",{class:"view",target:"_blank",href:("getExplorerUrl"in n?n.getExplorerUrl:ft(Wo))(n.currentExplorer,"account",n.wallet.address)},[N("span",null,Se(n.$t("common.viewExplorer")),1),R5],8,B5)]),N("div",P5,[N("div",U5,[F5,N("p",{onClick:e[1]||(e[1]=c=>n.$emit("onDisconnect"))},Se(n.$t("button.disconnect")),1)]),N("div",L5,[$5,N("p",{onClick:e[2]||(e[2]=c=>n.$emit("onSwitch"))},Se(n.$t("newAdd.switch")),1)])])])):(ne(),re("div",V5,[n.transactionList.length>0?(ne(),re("div",q5,[N("div",z5,[(ne(!0),re(qn,null,rr(n.transactionList,(c,l)=>(ne(),re("a",{key:l,class:"transaction-item",target:"_blank",href:n.chainName!=="Aptos"?("getExplorerUrl"in n?n.getExplorerUrl:ft(Wo))(n.currentExplorer,"tx",encodeURIComponent(c.hash)):("getExplorerUrl"in n?n.getExplorerUrl:ft(Wo))(n.currentExplorer,"tx",c.hash)},[N("div",null,[N("div",K5,[N("div",Z5,[(ne(),re("svg",Q5,[N("use",{"xlink:href":"#"+c.icon},null,8,H5)])),N("span",null,Se(c.tit),1)]),N("div",G5,Se(("timeFormat"in n?n.timeFormat:ft(wd))(parseInt(n.chainName!=="Aptos"?c.date-6048e5:c.timestamp/1e3)-8*60*60*1e3))+" (UTC)",1)]),N("div",Y5,[N("div",X5,[c.tit=="Swap"||c.tit=="Position Created"||c.tit=="Liquidity Removed"||c.tit=="Liquidity Increased"||c.tit=="Locked NFT Claimed"?(ne(),re("div",J5,[N("div",eB,[c.tokenInfo.tokena&&(c.tokenInfo.numa&&c.tokenInfo.numa!=="+ 0"&&c.tokenInfo.numa!=="- 0"||c.tokenInfo.nftNum)?jo((ne(),re("img",tB,null,512)),[[a,c.tokenInfo.logoa?c.tokenInfo.logoa:n.store.theme=="default"?("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/unknown.png"):("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/sui-unknown.png")]]):ye("",!0),c.tokenInfo.tokenb&&(c.tokenInfo.numb&&c.tokenInfo.numb!=="+ 0"&&c.tokenInfo.numb!=="- 0"||c.tokenInfo.nftNum)?jo((ne(),re("img",nB,null,512)),[[a,c.tokenInfo.logob?c.tokenInfo.logob:n.store.theme=="default"?("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/unknown.png"):("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/sui-unknown.png")]]):ye("",!0),c.tokenInfo.tokenc&&(c.tokenInfo.numc&&c.tokenInfo.numc!=="+ 0"&&c.tokenInfo.numc!=="- 0"||c.tokenInfo.nftNum)?jo((ne(),re("img",rB,null,512)),[[a,c.tokenInfo.logoc?c.tokenInfo.logoc:n.store.theme=="default"?("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/unknown.png"):("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/sui-unknown.png")]]):ye("",!0)]),c.tit!=="Locked NFT Claimed"?(ne(),re("div",iB,[c.tokenInfo.tokena?(ne(),re("span",sB,Se(c.tokenInfo.tokena),1)):ye("",!0),c.tokenInfo.tokenb&&c.tokenInfo.tokena?(ne(),re("span",oB," "+Se(c.tit=="Swap"?"→":c.tit=="Locked NFT Claimed"?"":"-")+" ",1)):ye("",!0),c.tokenInfo.tokenb?(ne(),re("span",aB,Se(c.tokenInfo.tokenb),1)):ye("",!0)])):ye("",!0),c.tit=="Locked NFT Claimed"?(ne(),re("div",cB,Se(c.tokenInfo.nftId),1)):ye("",!0)])):(ne(),re("div",lB,[c.tokenInfo.tokena&&c.tokenInfo.numa&&c.tokenInfo.numa!=="+ 0"&&c.tokenInfo.numa!=="- 0"?(ne(),re("div",uB,[c.tokenInfo.tokena&&c.tokenInfo.numa&&c.tokenInfo.numa!=="+ 0"&&c.tokenInfo.numa!=="- 0"?jo((ne(),re("img",dB,null,512)),[[a,c.tokenInfo.logoa?c.tokenInfo.logoa:n.store.theme=="default"?("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/unknown.png"):("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/sui-unknown.png")]]):ye("",!0),c.tokenInfo.tokena?(ne(),re("span",hB,Se(c.tokenInfo.tokena),1)):ye("",!0)])):ye("",!0),c.tokenInfo.tokenb&&c.tokenInfo.numb&&c.tokenInfo.numb!=="+ 0"&&c.tokenInfo.numb!=="- 0"?(ne(),re("div",fB,[c.tokenInfo.tokenb&&c.tokenInfo.numb&&c.tokenInfo.numb!=="+ 0"&&c.tokenInfo.numb!=="- 0"?jo((ne(),re("img",pB,null,512)),[[a,c.tokenInfo.logob?c.tokenInfo.logob:n.store.theme=="default"?("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/unknown.png"):("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/sui-unknown.png")]]):ye("",!0),c.tokenInfo.tokenb?(ne(),re("span",mB,Se(c.tokenInfo.tokenb),1)):ye("",!0)])):ye("",!0),c.tokenInfo.tokenc&&c.tokenInfo.numc&&c.tokenInfo.numc!=="+ 0"&&c.tokenInfo.numc!=="- 0"?(ne(),re("div",gB,[c.tokenInfo.tokenc&&c.tokenInfo.numc&&c.tokenInfo.numc!=="+ 0"&&c.tokenInfo.numc!=="- 0"?jo((ne(),re("img",wB,null,512)),[[a,c.tokenInfo.logoc?c.tokenInfo.logoc:n.store.theme=="default"?("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/unknown.png"):("importIcon"in n?n.importIcon:ft(Zt))("/image/coins/sui-unknown.png")]]):ye("",!0),c.tokenInfo.tokenc?(ne(),re("span",yB,Se(c.tokenInfo.tokenc),1)):ye("",!0)])):ye("",!0)]))]),c.tit=="Locked NFT Claimed"?(ne(),re("div",bB,[N("p",{class:Ge(c.tokenInfo.nftNum&&c.tokenInfo.nftNum.includes("+")?"addP":"")},Se(c.tokenInfo.nftNum)+" NFT ",3)])):(ne(),re("div",_B,[c.tokenInfo.numa&&c.tokenInfo.numa!=="+ 0"&&c.tokenInfo.numa!=="- 0"?(ne(),re("p",{key:0,class:Ge(c.tokenInfo.numa&&c.tokenInfo.numa.includes("+")?"addP":"")},Se(c.tokenInfo.numa)+" "+Se(c.tokenInfo.tokena),3)):ye("",!0),c.tokenInfo.numb&&c.tokenInfo.numb!=="+ 0"&&c.tokenInfo.numb!=="- 0"?(ne(),re("p",{key:1,class:Ge(c.tokenInfo.numb&&c.tokenInfo.numb.includes("+")?"addP":"")},Se(c.tokenInfo.numb)+" "+Se(c.tokenInfo.tokenb),3)):ye("",!0),c.tokenInfo.numc&&c.tokenInfo.numc!=="+ 0"&&c.tokenInfo.numc!=="- 0"?(ne(),re("p",{key:2,class:Ge(c.tokenInfo.numc&&c.tokenInfo.numc.includes("+")?"addP":"")},Se(c.tokenInfo.numc)+" "+Se(c.tokenInfo.tokenc),3)):ye("",!0),c.tit=="Liquidity Removed"&&c.tokenInfo.pendingRewarderArr&&c.tokenInfo.pendingRewarderArr.length>0?(ne(),re("div",vB,[(ne(!0),re(qn,null,rr(c.tokenInfo.pendingRewarderArr,u=>(ne(),re("div",{key:u.address,class:Ge(u.amount!==0?"addP":"")},[u.amount!==0?(ne(),re("p",kB,Se(u.amount>1e-6?`+ ${u.amount}`:u.amount===0?"":"+ <0.000001")+" "+Se(u.symbol),1)):ye("",!0)],2))),128))])):ye("",!0)]))])])],8,W5))),128))])])):(ne(),re("div",SB,[n.store.theme=="default"?(ne(),re("img",CB)):(ne(),re("img",AB)),N("p",null,Se(n.$t("newAdd.noTransactions")),1)]))])),n.currentToggle=="Wallet"?(ne(),re("div",TB,[n.store.theme=="default"?(ne(),re("img",IB)):(ne(),re("img",xB))])):ye("",!0)],2))]),_:1},8,["width","class","onCancel"])}const LX=xr(u5,[["render",EB],["__scopeId","data-v-f089ccfc"]]),MB=""+new URL("img-Sui-Term-and-Conditions_3x.503ac44e.png",import.meta.url).href,OB=""+new URL("img-Term-and-Conditions_2x.1a415d6a.png",import.meta.url).href,H2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAADo0lEQVRYCe1WWUhUURj+/zujtlEUET0ELab5aA8REgWNGtEKQgstUBTVjBW0QNFD2FMvReY2CkUPbSRUD20YmT0EBQVFRTkjtmouLRYWZTn37zvC6J3rPTdrciTwwOX+5z//8p3v/Pe/h2hw/GcM8EDh3SZ1KT/JPOclo7CE025FcRhRIZHvApFkgLlAJEsjFLm8VWpnRfMnHBDAeJspXAkwCxQIIRreSXQtX8Iz1TyhR1Yp4qmh0FmAWKaSWwcTfyLy5CQMEJgxWih0EmBWWYFYZYCpSciRiQjjmI67gcFhPfWSZ4XXirA/ZAUmQOFyVMs6XXwwE2JKzi7mye/6nSE/hYuEZJMODJipH0KcXcaTm5VNvzLkl9BhgNmqB0MvU8jrO8KpjVGbfmMoIKGDALMzmqj3mxvAhu8op762rvUCVCGSZDX4GxnMHDBJ9rr4NiWDmRLOeGG3iQG0RUJrH1D43i4JjbUb9nUOMPvAzH6dPfpNq5fYV8SpdU423X0IFK8wiU7ja/DA6SHREF+QJ7Y5Oel02NAu+B/SraOA36P5zS3nqU90Nl0MBSSch12dUmCUIeRMou9Ve6R+lM7RrvdLeJsbGOy8zSDOdQOjYnJA6habFDkP2al27hg0Zl4Zj/tiB2CdY0ObTTLRa3SDP3vJm1PCqfd1FlG9gUAbMHECo2yyhNquFsjbYVEH+xvMrEcBB+16y7ydyZjfFzDKxxhPyStBVLUlQIyI45vdQu2XdsiboTELmPildg2O6Rie7lq02kD5FfW4MMhpd616N7krkGKgmdqvIfAcnTEMq/CvWVrMaR3KJl9ql0eIz8Cnq+7sfgDyDZtZVM4ZN+1rbvPunQWkdYRJH6/DOEvngCSXMyk97xGFF+GYKvGzdOz0sOvAMS0p4zQV749GNyDlhWvlyE4yb2BnM3RRkOw21tVlSld3PwAmL8jpV3Qx3PQxgJShX16NxidfjaTT3Ryd1hCsE5/28lKedtFpvS+6mE6tHFQzNGh4LsTHfQnQY8MRBFsdDxgVqxcgpSzlCR9QHrhO8jM1/92Ancm475RyBu7K8Q1HQCokOmprCqVkQ3T85/SkZdQ2bwxyBjp9/EMLSIUu5ElNSeTxgYHnulSoGT8K+IRu/U/1roBUMPSdBoOSfBBf24Pja9pexukVdn08898CUsFLecorJJ+Lo2nsSca7wUxxz3wApHypT8fvokndeQYgvXPKeC5vzhEHtYMM/FsGfgH3viNAzmmZhgAAAABJRU5ErkJggg==";const NB=Vr({props:{idoInfo:{type:Object,required:!1,default:()=>({})}},setup(n){const e=Fe(!1),t=Fe(!n.idoInfo.link),r=wr(),i=Le(()=>r);return{isSelect:e,isIdoSelect:t,store:i,counter:r}}}),qy=n=>(Ri("data-v-088cdc18"),n=n(),Pi(),n),jB={class:"term-and-conditions"},DB={class:"box"},BB={class:"tit-top"},RB={class:"title"},PB=qy(()=>N("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),UB=[PB],FB={class:"img-box"},LB={key:0,src:MB},$B={key:1,src:OB},VB=qy(()=>N("p",{class:"note"},"Please read & accept terms before using this site.",-1)),qB={class:"accept"},zB={key:0,src:H2},WB={key:1,src:jw},KB=qy(()=>N("span",null,[pr("I accept the "),N("a",{href:"https://www.cetus.zone/terms",target:"_blank"}," Cetus Protocol Terms & Conditions")],-1)),ZB={key:0,class:"accept"},QB={key:0,src:H2},HB={key:1,src:jw},GB=["href"];function YB(n,e,t,r,i,s){const o=Ka;return ne(),re("div",jB,[N("div",{class:"term-and-conditions-content",onClick:e[4]||(e[4]=vt(()=>{},["stop"]))},[N("div",DB,[N("div",BB,[N("h3",RB,Se(n.$t("newAdd.termTitle")),1),n.idoInfo.isIdo?(ne(),re("svg",{key:0,class:"icon modal-icon-close","aria-hidden":"true",onClick:e[0]||(e[0]=vt(()=>n.counter.setIsIdoOpenTerm(!1),["stop"]))},UB)):ye("",!0)]),N("div",FB,[n.store.theme=="sui"?(ne(),re("img",LB)):(ne(),re("img",$B))]),VB,N("div",qB,[N("div",{class:"radio",onClick:e[1]||(e[1]=a=>n.isSelect=!n.isSelect)},[n.isSelect&&n.store.theme!=="sui"?(ne(),re("img",zB)):ye("",!0),n.isSelect&&n.store.theme=="sui"?(ne(),re("img",WB)):ye("",!0)]),KB]),n.idoInfo.link?(ne(),re("div",ZB,[N("div",{class:"radio",onClick:e[2]||(e[2]=a=>n.isIdoSelect=!n.isIdoSelect)},[n.isIdoSelect&&n.store.theme!=="sui"?(ne(),re("img",QB)):ye("",!0),n.isIdoSelect&&n.store.theme=="sui"?(ne(),re("img",HB)):ye("",!0)]),N("span",null,[pr("I accept the "),N("a",{href:n.idoInfo.link,target:"_blank"},Se(n.idoInfo.name)+" Terms & Conditions",9,GB)])])):ye("",!0)]),rn(o,{disabled:!n.isSelect||!n.isIdoSelect,class:"big-btn continue",onClick:e[3]||(e[3]=a=>n.$emit("close"))},{default:kt(()=>[pr("Continue")]),_:1},8,["disabled"])])])}const $X=xr(NB,[["render",YB],["__scopeId","data-v-088cdc18"]]);const XB=Vr({components:{Modal:wo},setup(n,e){const t=Fe(""),r=wr(),i=Le(()=>r),s=Le(()=>i.value.chainName&&i.value.chainName.toLowerCase().includes("sui")?i.value.chainName.split("2")[0]:i.value.chainName);ns(()=>s.value,q=>{q&&(t.value=q=="Aptos"?nr[q].rpcUrl:nr[q].fullRpcUrl)},{immediate:!0});const o=Fe(null),a=()=>o.value,c=()=>{e.emit("onClose")},l=Fe(localStorage.getItem(`${s.value}-currentRpclocal6Name`)||Da[s.value][0].name),u=Fe(localStorage.getItem(`${s.value}-currentRpclocal6`)),d=Fe(!1),h=Fe(!0),f=(q,X)=>{d.value=!1,u.value="",l.value=q,l.value!=="Custom"&&(localStorage.setItem(`${s.value}-currentRpclocal6Name`,l.value),t.value=X,(localStorage.getItem(`${s.value}-currentRpclocal6`)||(s.value=="Aptos"?nr[s.value].rpcUrl:nr[s.value].fullRpcUrl))!=t.value&&(localStorage.setItem(`${s.value}-currentRpclocal6`,t.value),w.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"RPC update"},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:`RPC is currently set to ${t.value}`},null)]),class:"ant-notification-copy ant-notification-swap"}),setTimeout(()=>{window.location.reload()},2e3)))},m=()=>!/^(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/.test(u.value);ns(()=>u.value,(q,X)=>{const E=localStorage.getItem(`${s.value}-currentRpclocal6`);q==E?h.value=!1:h.value=!0,q!==X&&(d.value=!1)},{immediate:!0});const{$notify:w}=Zp(),y=()=>{localStorage.setItem(`${s.value}-currentRpclocal6Name`,l.value),localStorage.setItem(`${s.value}-currentRpclocal6`,u.value),d.value=!1,w.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"RPC update"},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:`RPC is currently set to ${u.value}`},null)]),class:"ant-notification-copy ant-notification-swap"}),setTimeout(()=>{window.location.reload()},2e3)},C=Fe(localStorage.getItem(`${s.value}-currentExplorerUrl`)||$l[s.value][0].link),A=Fe(localStorage.getItem(`${s.value}-currentExplorerName`)||$l[s.value][0].name),M=(q,X)=>{A.value=q,localStorage.setItem(`${s.value}-currentExplorerName`,A.value),localStorage.setItem(`${s.value}-currentExplorerUrl`,X);const E=new Event("updateExplorer");window.dispatchEvent(E),C.value=X,w.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"Explorer update"},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:`Explorer is currently set to ${C.value}`},null)]),class:"ant-notification-copy ant-notification-swap"})},H=Le(()=>{let q=[{name:"Custom",link:""}];return s.value=="Sui"?i.value.suiRpcs&&i.value.suiRpcs.length>0?i.value.suiRpcs.concat(q):Da[s.value]:i.value.aptosRpcs&&i.value.aptosRpcs.length>0?i.value.aptosRpcs.concat(q):Da[s.value]}),G=Fe(null);return ns(()=>H.value,q=>{s.value==="Sui"&&(q==null?void 0:q.length)>0&&(G.value=setInterval(()=>{r.setRpcTimedelay(q)},3e3))},{immediate:!0}),Qp(()=>{i.value.setIsShowExplorerH5(!1),i.value.setIsShowRpcH5(!1),s.value==="Sui"&&(clearInterval(G.value),G.value=null)}),{explorerSelected:A,store:i,changeExplorer:M,explorerObj:$l,rpcList:H,rpcObj:Da,currentRpc:t,getPopupContainer:a,settingModal:o,changeRpc:f,isShowTips:d,isUpdate:h,customRpc:u,chainName:s,rpcSelected:l,regTest:m,closeSystemSetting:c,saveCustomRpc:y,importIcon:Zt}}}),JB=N("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1),eR={ref:"settingModal",class:"system-setting"},tR={key:0,class:"rpc-select-box"},nR={class:"rpc-select-top"},rR={class:"rpc-name"},iR=["onClick"],sR=["src"],oR={key:0},aR={key:0,class:"rpc-select-bottom"},cR={key:1,class:"rpc-select-tips"},lR={key:1,class:"rpc-select-box"},uR={class:"rpc-select-top"},dR={class:"rpc-name"},hR=["onClick"],fR=["src"];function pR(n,e,t,r,i,s){const o=Iw,a=Ka,c=yo("Modal");return ne(),ar(c,{class:"system-setting-modal system-setting-container-h5",title:n.store.isShowRpcH5?"RPC Node":"Preferred Explorer",centered:"",width:"400px",visible:!0,footer:null,onCancel:n.closeSystemSetting},{closeIcon:kt(()=>[JB]),default:kt(()=>[N("div",eR,[n.store.isShowRpcH5?(ne(),re("div",tR,[N("div",nR,[(ne(!0),re(qn,null,rr(n.rpcList,(l,u)=>(ne(),re("div",{key:u,class:Ge(["select-item",n.rpcSelected==l.name?"select-item-active":""])},[N("div",rR,[N("div",{class:Ge(["check-box",n.chainName=="Aptos"?"aptos-check-box":"sui-check-box"]),onClick:vt(d=>n.rpcSelected==l.name?"":n.changeRpc(l.name,l.link),["stop"])},[n.rpcSelected==l.name?(ne(),re("img",{key:0,src:n.rpcSelected==l.name&&n.chainName=="Aptos"?("importIcon"in n?n.importIcon:ft(Zt))("/image/icon-selected@2x.png"):("importIcon"in n?n.importIcon:ft(Zt))("/sui-image/icon-selected@3x.png"),alt:""},null,8,sR)):ye("",!0)],10,iR),N("span",null,Se(l.name),1)]),n.chainName!=="Aptos"&&l.name!=="Custom"?(ne(),re("div",{key:0,class:Ge(["rpc-rate",n.store.suiRpcTimeDelayObj?n.store.suiRpcTimeDelayObj&&Number(n.store.suiRpcTimeDelayObj[l.name])<=100?"green-rate":n.store.suiRpcTimeDelayObj&&Number(n.store.suiRpcTimeDelayObj[l.name])>200?"red-rate":"orange-rate":""])},[N("span",{class:Ge(n.store.suiRpcTimeDelayObj&&n.store.suiRpcTimeDelayObj[l.name]?"":"noColor")},null,2),n.store.suiRpcTimeDelayObj&&n.store.suiRpcTimeDelayObj[l.name]?(ne(),re("p",oR,Se(n.store.suiRpcTimeDelayObj&&n.store.suiRpcTimeDelayObj[l.name])+"ms ",1)):ye("",!0)],2)):ye("",!0)],2))),128))]),n.rpcSelected=="Custom"?(ne(),re("div",aR,[rn(o,{value:n.customRpc,"onUpdate:value":e[0]||(e[0]=l=>n.customRpc=l),class:"rpc-input",type:"text",placeholder:"Custom RPC URL",onBlur:n.inputBlur},null,8,["value","onBlur"]),n.rpcSelected=="Custom"?(ne(),ar(a,{key:0,class:"save-btn",disabled:n.regTest()||n.customRpc==n.currentRpc||!n.isUpdate,onClick:n.saveCustomRpc},{default:kt(()=>[pr("Save")]),_:1},8,["disabled","onClick"])):ye("",!0)])):ye("",!0),n.rpcSelected=="Custom"&&n.isShowTips?(ne(),re("div",cR," Custom RPC URL is a required field ")):ye("",!0)])):(ne(),re("div",lR,[N("div",uR,[(ne(!0),re(qn,null,rr(("explorerObj"in n?n.explorerObj:ft(kv))[n.chainName],(l,u)=>(ne(),re("div",{key:u,class:Ge(["select-item",n.explorerSelected==l.name?"select-item-active":""])},[N("div",dR,[N("div",{class:Ge(["check-box",n.chainName=="Aptos"?"aptos-check-box":"sui-check-box"]),onClick:vt(d=>n.explorerSelected==l.name?"":n.changeExplorer(l.name,l.link),["stop"])},[n.explorerSelected==l.name?(ne(),re("img",{key:0,src:n.explorerSelected==l.name&&n.chainName=="Aptos"?("importIcon"in n?n.importIcon:ft(Zt))("/image/icon-selected@2x.png"):("importIcon"in n?n.importIcon:ft(Zt))("/sui-image/icon-selected@3x.png"),alt:""},null,8,fR)):ye("",!0)],10,hR),N("span",null,Se(l.name),1)])],2))),128))])]))],512)]),_:1},8,["title","onCancel"])}const VX=xr(XB,[["render",pR]]),mR=Vr({props:{platform:{type:String,default:"Alchemy"}},setup(n,e){const t=Vs(),r=Le(()=>t),i=wr(),s=Le(()=>i),o=(c,l)=>{try{const u=$u.enc.Utf8.parse(l),d=$u.enc.Utf8.parse(l.substring(0,16)),h=$u.enc.Utf8.parse(c);return $u.AES.encrypt(c,u,{iv:d,mode:$u.mode.CBC}).toString()}catch(u){console.log(`0613###AES encrypting exception, msg is ${u}`)}return null};return{iframeUrl:Le(()=>{if(r.value.address&&s.value.currentCrypto){if(s.value.currentCrypto==="alchemy"){const c=`address=${r.value.address}&appId=eux4fx43yH39DsW0`,l=o(c,"J8Y2oKoFAKiw6OCq");return`https://ramp.alchemypay.org/?network=SUI&appId=eux4fx43yH39DsW0&sign=${encodeURIComponent(l)}&address=${r.value.address}`}return""}return""})}}});const gR=n=>(Ri("data-v-221a106e"),n=n(),Pi(),n),wR=gR(()=>N("svg",{"aria-hidden":"true",class:"icon"},[N("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),yR=[wR],bR=["src"];function _R(n,e,t,r,i,s){const o=wo;return ne(),ar(o,{class:"buy-crypto-modal",visible:!!n.iframeUrl,title:null,footer:null,onCancel:e[1]||(e[1]=a=>n.$emit("onClose"))},{default:kt(()=>[N("div",{class:"close-icon",onClick:e[0]||(e[0]=a=>n.$emit("onClose"))},yR),n.iframeUrl?(ne(),re("iframe",{key:0,height:"625",title:"AlchemyPay On/Off Ramp Widget",src:n.iframeUrl,frameborder:"no",allowtransparency:"false",style:{display:"block",width:"100%","max-height":"625px","max-width":"500px"}},null,8,bR)):ye("",!0)]),_:1},8,["visible"])}const qX=xr(mR,[["render",_R],["__scopeId","data-v-221a106e"]]),vR=Vr({props:{platform:{type:String,default:"Alchemy"}},setup(n,e){const t=Vs(),r=Le(()=>t),i=wr(),s=Le(()=>i);return{iframeUrl:Le(()=>r.value.address&&s.value.currentCrypto&&s.value.currentCrypto==="KODO"?"https://global.kodo.finance?apiKey=m_prod_br9WUFm8nQ0TpzlITYVV13jZ52agwSQP":"")}}});const kR=n=>(Ri("data-v-d945dce3"),n=n(),Pi(),n),SR=kR(()=>N("svg",{"aria-hidden":"true",class:"icon"},[N("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),CR=[SR],AR=["src"];function TR(n,e,t,r,i,s){const o=wo;return ne(),ar(o,{class:"buy-crypto-modal",visible:!!n.iframeUrl,title:null,footer:null,onCancel:e[1]||(e[1]=a=>n.$emit("onClose"))},{default:kt(()=>[N("div",{class:"close-icon",onClick:e[0]||(e[0]=a=>n.$emit("onClose"))},CR),n.iframeUrl?(ne(),re("iframe",{key:0,height:"625",title:"Kodo widget",src:n.iframeUrl,frameborder:"no",allowtransparency:"false",style:{display:"block",width:"100%","max-height":"625px","max-width":"500px"}},null,8,AR)):ye("",!0)]),_:1},8,["visible"])}const zX=xr(vR,[["render",TR],["__scopeId","data-v-d945dce3"]]);const IR=Vr({components:{Modal:wo},setup(n,e){const t=Fe(!1),r=wr();Le(()=>r);const i=Vs();return Le(()=>i),{store:r,clickContinue:()=>{localStorage.setItem("IsShowBuyCryptoConfirm",!0),r.setIsShowBuyCryptoConfirm(!1),r.setIsShowBuyCryptoSelect(!0)},isSelect:t}}}),zy=n=>(Ri("data-v-8652d6d7"),n=n(),Pi(),n),xR=zy(()=>N("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),ER=[xR],MR={class:"token-waring-conetnt"},OR=zy(()=>N("div",{class:"tips-text"}," Please note that the function you are requesting is provided by third-party service providers. If you encounter any issue or need support, please contact corresponding third party to resolve it. ",-1)),NR={class:"read-text"},jR={key:0,src:jw},DR=zy(()=>N("span",null," I acknowledge and accept. ",-1));function BR(n,e,t,r,i,s){const o=Ka,a=yo("Modal");return ne(),ar(a,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:e[2]||(e[2]=c=>n.$emit("close"))},{closeIcon:kt(()=>[(ne(),re("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:e[0]||(e[0]=c=>n.$emit("close"))},ER))]),default:kt(()=>[N("div",MR,[OR,N("div",NR,[N("div",{class:"radio",onClick:e[1]||(e[1]=c=>n.isSelect=!n.isSelect)},[n.isSelect?(ne(),re("img",jR)):ye("",!0)]),DR]),rn(o,{class:"big-btn continue",disabled:!n.isSelect,onClick:n.clickContinue},{default:kt(()=>[pr("Continue")]),_:1},8,["disabled","onClick"])])]),_:1})}const WX=xr(IR,[["render",BR],["__scopeId","data-v-8652d6d7"]]);const RR=Vr({components:{Modal:wo},setup(n,e){const t=wr(),r=Vs(),i=Le(()=>r),s=Fe([{id:"alchemy",name:"Alchemy Pay",icon:"alchemypay"},{id:"coinbase",name:"Coinbase Pay",icon:"coinbasepay"},{id:"KODO",name:"Kodo Pay",icon:"kodo"}]);return Le(()=>t),{store:t,list:s,selectCrypto:a=>{if(t.setCurrentCrypto(a.id),a.id==="alchemy")t.setIsShowBuyCrypto(!0);else if(a.id==="KODO")console.log("kodo"),t.setIsShowBuyCryptoKODO(!0);else if(i.value.address){const c=sx({appId:"d2baaf93-cda5-404c-9be2-36695a530d02",destinationWallets:[{address:i.value.address,blockchains:["sui"]}]});window.open(c,"Coinbase Pay","height=700, width=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")}t.setIsShowBuyCryptoSelect(!1)}}}}),PR=n=>(Ri("data-v-2b3a9645"),n=n(),Pi(),n),UR=PR(()=>N("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),FR=[UR],LR={class:"buy-crypto-select-container"},$R=["onClick"],VR=["src"];function qR(n,e,t,r,i,s){const o=yo("Modal");return ne(),ar(o,{width:"440px",visible:!0,footer:null,title:"Buy Crypto","mask-closable":!0,onCancel:e[1]||(e[1]=a=>n.$emit("close"))},{closeIcon:kt(()=>[(ne(),re("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:e[0]||(e[0]=a=>n.$emit("close"))},FR))]),default:kt(()=>[N("div",LR,[N("ul",null,[(ne(!0),re(qn,null,rr(n.list,a=>(ne(),re("li",{key:a.id,onClick:c=>n.selectCrypto(a)},[N("img",{src:`/image/${a.icon}.png`},null,8,VR),N("span",null,Se(a.name),1)],8,$R))),128))])])]),_:1})}const KX=xr(RR,[["render",qR],["__scopeId","data-v-2b3a9645"]]);console.log(Mv,"envs");const Sf={pro:{url:"https://launch.cetus.zone",deepBookUrl:"https://deepbook.cetus.zone/"},pre:{url:"https://launch.cetus.zone",deepBookUrl:"https://deepbook-trade-pre.netlify.app/"},test:{url:"https://cetus-launchpad-site.netlify.app",deepBookUrl:"https://deepbook-trade-test.netlify.app/"}},zR={...Sf[Mv]},wu={en:{icon:"EN",label:"English"},th:{icon:"TH",label:"ไทย"},hi:{icon:"IN",label:"Hindī"},kr:{icon:"KR",label:"한국어"},vi:{icon:"VN",label:"Tiếng Việt"},ja:{icon:"JP",label:"日本語"},ru:{icon:"RU",label:"Русский"},tr:{icon:"TR",label:"Türkçe"},tradCh:{icon:"CN",label:"中文"}},Jd=[{icon:"EN",label:"English",value:"en"},{icon:"TH",label:"ไทย",value:"th"},{icon:"IN",label:"Hindī",value:"hi"},{icon:"KR",label:"한국어",value:"kr"},{icon:"VN",label:"Tiếng Việt",value:"vi"},{icon:"JP",label:"日本語",value:"ja"},{icon:"RU",label:"Русский",value:"ru"},{icon:"TR",label:"Türkçe",value:"tr"},{icon:"CN",label:"中文",value:"tradCh"}],WR=Vr({components:{VesrionBeta:ax},setup(){const{t:n}=cu();xw();const e=vv();console.log("🚀🚀🚀 ~ file: new-menu.vue:664 ~ setup ~ route:",e);const t=Vs(),r=Le(()=>t);let i=[{name:n("contactUS.twitter"),icon:"#icon-svg-twitter",link:"https://twitter.com/cetusprotocol"},{name:n("contactUS.discord"),icon:"#icon-svg-Discord",link:"https://discord.gg/rQtYGfmcD8"},{name:n("contactUS.tgChannel"),icon:"#icon-svg-tg",link:"https://t.me/cetusprotocol"},{name:n("contactUS.medium"),icon:"#icon-svg-medium",link:"https://medium.com/@CetusProtocol"}];const s=[{name:"Sui"},{name:"Aptos"}];let o=Fe(!1);const a=wr(),c=Le(()=>a);let l=Fe(c.value.chainName||"Aptos");const u=Fe(!1);Ew(()=>{document.body.clientWidth<750?u.value=!1:u.value=!0,window.onresize=()=>{document.body.clientWidth<750?u.value=!1:u.value=!0},document.addEventListener("click",()=>{o.value=!1})}),Qp(()=>{document.removeEventListener("click",()=>{o.value=!1})});const d=Ov(),h=q=>{l.value=q,q=="Aptos"&&d.seleteDefaultTheme(),q=="Sui"&&d.selectSuiTheme()},{locale:f}=cu(),m=Fe(!1),{setLang:w}=a,y=q=>{w(q),f.value=q,i=[{name:n("contactUS.twitter"),icon:"#icon-icon-twitter",link:"https://twitter.com/cetusprotocol"},{name:n("contactUS.discord"),icon:"#icon-icon-Discord",link:"https://discord.gg/cetusprotocol"},{name:n("contactUS.tgChannel"),icon:"#icon-icon-TgChannel",link:"https://t.me/cetusprotocol"},{name:n("contactUS.medium"),icon:"#icon-icon-medium",link:"https://medium.com/@CetusProtocol"}]},C=Le(()=>c.value.openH5Icon),A=()=>{r.value.address?localStorage.getItem("IsShowBuyCryptoConfirm")?c.value.setIsShowBuyCryptoSelect(!0):c.value.setIsShowBuyCryptoConfirm(!0):r.value.setIsShowWalletModal(!0)},M=Le(()=>nr[c.value.chainName]),H=Le(()=>e.name=="swap"?`/limit/${e.query.from||M.value.swapDefaultPair.fromCoin}-${e.query.to||M.value.swapDefaultPair.toCoin}`:"/limit"),G=Le(()=>{if(console.log("🚀🚀🚀 ~ file: new-menu.vue:821 ~ limitUrl ~ route:",e),e.name=="limit-id"){const q=e.params.id.split("-")[0],X=e.params.id.split("-")[1];return`/swap?from=${q||M.value.swapDefaultPair.fromCoin}&to=${X||M.value.swapDefaultPair.toCoin}`}return"/swap"});return{siteUrlObj:zR,openH5Icon:C,isPc:u,changeChain:h,currentChain:l,chainList:s,openSwitchChain:o,importIcon:Zt,store:c,list:i,themeStore:d,counter:a,langObj:wu,changeLang:y,openSwitchLang:m,langList:Jd,onpenCrypto:A,config:M,limitUrl:H,swapUrl:G}}}),KR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAABACAMAAADRVBl4AAAAYFBMVEVHcEz///////////+n892x9uP///////////////9n/9n///8y6LgA1Z7///////////9o/9lo/9ln/9lo/9n///8C1p8A1J4A1Z8A1Z5o/9lo/9j///8A1J467L8Y3qtr5PYdAAAAG3RSTlMAMqK9BxPo82T9jFkyjj5H1LFT0Ot9Ze3bv3FnWwE/AAAELklEQVR42u2biZKiMBCGQ0jAICiniIK+/1vuEEAJpHOM6xxk/tqaqtmJJnz0lQ4gJBPNo6woy2tZFlmUx8hN0ai4iiojB1nkSwqDihP5wzDofHLIKbIrrFvXuOIgeXlV6d51bhhFdNWo67rGgUixdIvskuf5JSvnztF1Z7pxDGTBIZoumFzKuUlsnoTIoYilIfTGSRB34kNGgL/2ILpmy/lCtAcK2cudk0i2Wz+IeTMGB3Df6LrYjQCRSUZc5r6x2TAhOsZVdr+J4BtbdQ5xf1GqjGb0jZo6YBCZdNBFALFNk1hsOCNpvZULQaKrNxgl4qsBiMlsivNIAtp+HXEaSrUbB4StSmwahpXDWn+8EfyXI7CWA594WpgfaKaMbEBcTiMIeVXlpeDSw4MJiLbdj1/lq4FhAxBHPnKwaNwy3cqWrZhMUXqWFCUjCZlv7Jhi7QE1AhGOl0VTE9MxBaE0sGFldLXbJmAgKfvMmoC+oeTQtik1AfG4QZ5m5NECxFH9VSlZ54wP5UAgKccdaZycpXnjsfIQEH6AwDuFJufwZv8n+dTeAoSvXNewsnU7ppCByIWmfhyf1mXXMFuwU9cY/JJ2thEd+pQhiJCHFWLVj+kjolkHY2kQ7Gn/PwwE4cM8qyoCLLK1qkxm+8EgZA3b8jMkuGf4aFMgPrzDvnLk6a76kSCMJgU61sXFdl8VmF3hEP/3kN4Dgt8k5suFh/AOn2UUWbRS8hR9AQRc5b0HRKUpXSolCOlp11OvgGi/GAQN1CRYJc8aqsOuh8gvAoE8HYkDymxAzDjU6DeBQLRSo8D6gz7AM5pXQOwopHeB6Fl4Uh143g8kew0jg1jvNb4lfYZaEAFYCj/aFgMv+jmDWO8+fZ6hvhhEOkY6sNZlqfa7PW5WNtFyzmHdj+Apin1xic37DKmqxMNmIBgyDxLzlCHpUHntN2y6eutngElUYzowBRF/xjFkfZnv2IaPNSNez0kxM9v8DFYVIGPfEDjIuthTY4aFgUR7ocQGuzLEEsSBcZsIfSzKD9uZQVQBrPDRA83tOcjPNXZTdSKtEDyj5q1PLO1IXT1Xs7vO+n+rH4w9V1dYcwBOuv5H8xbbOlTFlJXzmDp9k1Zwbhko4YOuQ6prkeqbt9g2shyhSdNZgaFsiod7uF2nsgfVaXh/wMMAYSMQ0qJMGWLJfj1pmOK9sEpw3xWm1cO+aWmRL158PoIYCPjU+0/9SG7FYbtPzKiqqtt9yWHTz1qSzCxKbv/5QimJtTU48MQpvd30FBzggOKPq7zfb4PuUghuPIt96gyUoO2r0WM4O/G+Rq3DULvxMlOsswZX3ulShog6cectv2R18cPzc3WT9M+EuPOK33nJIeY7HeQSA15YSji4KBL/cZCFiIa6ykEop+qTsxgQqd0rGORbz6Sp+4yZnJwNDv8ACUmpoYUJbW0AAAAASUVORK5CYII=",G2=""+globalThis.__publicAssetsURL("sui-image/deepbook-menu.png"),Y2=""+globalThis.__publicAssetsURL("sui-image/deepbook-menu-hover.png"),ym=""+globalThis.__publicAssetsURL("sui-image/icon-star2.png"),ZR=""+globalThis.__publicAssetsURL("image/icon-star-Aptos.png");const It=n=>(Ri("data-v-5deed24c"),n=n(),Pi(),n),QR=It(()=>N("div",{class:"logo"},[N("img",{src:KR,alt:""})],-1)),HR={class:"menu-list"},GR={key:0},YR=It(()=>N("div",{class:"left active-star"},null,-1)),XR=It(()=>N("div",{class:"right active-star"},null,-1)),JR=It(()=>N("span",{class:"trade-title"},"Trade",-1)),eP=It(()=>N("use",{"xlink:href":"#icon-icon_on"},null,-1)),tP=[eP],nP=It(()=>N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_swap"})],-1)),rP=It(()=>N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_limitorder"})]),N("span",null,"Limit Order")],-1)),iP=It(()=>N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_dca"})],-1)),sP=["href"],oP=It(()=>N("div",{class:"deepbook-menu"},[N("img",{class:"default-img",src:G2,alt:""}),N("img",{class:"hover-img",src:Y2,alt:""}),N("span",null,"DeepBook")],-1)),aP=[oP],cP=It(()=>N("span",{class:"trade-title"},"Trade",-1)),lP=It(()=>N("use",{"xlink:href":"#icon-icon_on"},null,-1)),uP=[lP],dP=It(()=>N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_swap"})],-1)),hP=It(()=>N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_limitorder"})]),N("span",null,"Limit Order")],-1)),fP=It(()=>N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_dca"})],-1)),pP=["href"],mP=It(()=>N("div",{class:"deepbook-menu"},[N("img",{class:"default-img",src:G2,alt:""}),N("img",{class:"hover-img",src:Y2,alt:""}),N("span",null,"DeepBook")],-1)),gP=[mP],wP={key:2},yP=It(()=>N("div",{class:"left active-star"},null,-1)),bP=It(()=>N("div",{class:"right active-star"},null,-1)),_P=It(()=>N("span",{class:"trade-title"},"Earn",-1)),vP=It(()=>N("use",{"xlink:href":"#icon-icon_on"},null,-1)),kP=[vP],SP=It(()=>N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_liquiditypools"})]),N("span",null,"Pools")],-1)),CP={key:0,class:"star-img",src:ym},AP=It(()=>N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_farms"})]),N("span",null,"Farms")],-1)),TP={key:0,class:"star-img",src:ym},IP=It(()=>N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_vaults"})]),N("span",null,"Vaults")],-1)),xP={key:0,class:"star-img",src:ym},EP={class:"table-link"},MP=It(()=>N("div",{class:"left active-star"},null,-1)),OP=It(()=>N("div",{class:"right active-star"},null,-1)),NP={key:0,class:"icon h5-icon","aria-hidden":"true"},jP=It(()=>N("use",{"xlink:href":"#icon-icon_on1"},null,-1)),DP=[jP],BP=It(()=>N("div",{class:"the-sign"},null,-1)),RP={key:0,class:"link-list"},PP=["href"],UP={key:0,class:"link-list"},FP=It(()=>N("span",{class:"tit"},"More",-1)),LP=It(()=>N("use",{"xlink:href":"#icon-icon_on"},null,-1)),$P=[LP],VP=It(()=>N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-buy-crypto"})]),N("span",null,"Buy Crypto")],-1)),qP=[VP],zP=["href"],WP=It(()=>N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon-Bridge"})]),N("span",null,"Bridge")],-1)),KP=[WP],ZP=It(()=>N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon-Stats"})]),N("span",null,"Stats")],-1)),QP={key:0,class:"star-img",src:ZR},HP={key:1,class:"star-img",src:ym},GP=It(()=>N("a",{class:"item",href:"https://cetus-1.gitbook.io/cetus-docs",target:"_blank"},[N("div",null,[N("svg",{class:"item-icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon-Docs1"})]),N("span",null,"Docs")])],-1)),YP=It(()=>N("div",{class:"line"},null,-1)),XP={class:"contact-us-list"},JP=["href"],eU={"aria-hidden":"true",class:"svg-icon"},tU=["xlink:href"],nU={class:"h5-more"},rU={class:"lang-tab"},iU={class:"lang-box-all"},sU=It(()=>N("div",{class:"current-lang rpc-box"},[N("svg",{"aria-hidden":"true",class:"svg-icon"},[N("use",{"xlink:href":"#icon-icon-RPC1"})]),N("span",null,"RPC Node")],-1)),oU=[sU],aU=It(()=>N("div",{class:"current-lang rpc-box"},[N("svg",{"aria-hidden":"true",class:"svg-icon"},[N("use",{"xlink:href":"#icon-icon-Preferred-Explorer"})]),N("span",null,"Preferred Explorer")],-1)),cU=[aU],lU={class:"current-lang"},uU=It(()=>N("svg",{"aria-hidden":"true",class:"svg-icon"},[N("use",{"xlink:href":"#icon-icon-Language"})],-1)),dU={class:"lang-icon"},hU=It(()=>N("use",{"xlink:href":"#icon-icon_on"},null,-1)),fU=[hU],pU={key:0,class:"list"},mU=["onClick"],gU={class:"lang-icon"},wU={class:"contact-us"},yU={class:"contact-us-list"},bU=["href"],_U={"aria-hidden":"true",class:"icon"},vU=["xlink:href"];function kU(n,e,t,r,i,s){var c,l;const o=ox,a=yo("VesrionBeta");return ne(),re("div",{class:Ge(n.openH5Icon?"menu h5-menu":"menu")},[QR,N("div",HR,[n.store.theme=="default"?(ne(),re("div",GR,[rn(o,{to:"/swap",class:Ge(n.$route.name==="swap"||n.$route.path==="/"?"nuxt-link-exact-active nuxt-link-active menu-item-active":"")},{default:kt(()=>[N("span",null,Se(n.$t("menu.swap")),1),YR,XR]),_:1},8,["class"])])):(ne(),re(qn,{key:1},[N("div",{class:Ge(["trade trade-pc",n.store.isShowHeaderTrade?"trade-active":"trade-default"]),onClick:e[2]||(e[2]=vt(()=>{n.store.setIsShowHeaderEarn(!1),n.store.setIsShowHeaderTrade(!n.store.isShowHeaderTrade),n.store.setIsShowHeaderMore(!1),n.$router.push("/swap")},["stop"]))},[JR,(ne(),re("svg",{class:Ge(["icon",n.store.isShowHeaderTrade?"icon-opens":"icon-closes"]),"aria-hidden":"true"},tP,2)),N("div",{class:Ge(["trade-list",n.store.isShowHeaderTrade?"show-earnlist":"hidden-earnlist"])},[rn(o,{to:"/swap",class:Ge(n.$route.name==="swap"||n.$route.path==="/"?"nuxt-link-exact-active nuxt-link-active menu-item-active":"")},{default:kt(()=>[N("div",null,[nP,N("span",null,Se(n.$t("menu.swap")),1)])]),_:1},8,["class"]),rn(o,{to:"/limit",class:Ge(n.$route.name==="limit"||n.$route.name=="limit-id"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[0]||(e[0]=vt(()=>{},["stop"]))},{default:kt(()=>[rP]),_:1},8,["class"]),rn(o,{to:"/dca",class:Ge(n.$route.name==="dca"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[1]||(e[1]=vt(()=>{},["stop"]))},{default:kt(()=>[N("div",null,[iP,N("span",null,[pr("DCA"),rn(a,{top:"-3px"})])])]),_:1},8,["class"]),N("a",{href:("siteUrlObj"in n?n.siteUrlObj:ft(Sf)).deepBookUrl,target:"_blank"},aP,8,sP)],2)],2),N("div",{class:Ge(["trade trade-h5",n.store.isShowHeaderTrade?"trade-active":"trade-default"]),onClick:e[5]||(e[5]=vt(()=>{n.store.setIsShowHeaderEarn(!1),n.store.setIsShowHeaderTrade(!n.store.isShowHeaderTrade),n.store.setIsShowHeaderMore(!1)},["stop"]))},[cP,(ne(),re("svg",{class:Ge(["icon",n.store.isShowHeaderTrade?"icon-opens":"icon-closes"]),"aria-hidden":"true"},uP,2)),N("div",{class:Ge(["trade-list",n.store.isShowHeaderTrade?"show-earnlist":"hidden-earnlist"])},[rn(o,{to:"/swap",class:Ge(n.$route.name==="swap"||n.$route.path==="/"?"nuxt-link-exact-active nuxt-link-active menu-item-active":"")},{default:kt(()=>[N("div",null,[dP,N("span",null,Se(n.$t("menu.swap")),1)])]),_:1},8,["class"]),(c="config"in n?n.config:ft(nr))!=null&&c.hasLimitOrder?(ne(),ar(o,{key:0,to:"/limit",class:Ge(n.$route.name==="limit"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[3]||(e[3]=vt(()=>{},["stop"]))},{default:kt(()=>[hP]),_:1},8,["class"])):ye("",!0),rn(o,{to:"/dca",class:Ge(n.$route.name==="dca"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[4]||(e[4]=vt(()=>{},["stop"]))},{default:kt(()=>[N("div",null,[fP,N("span",null,[pr("DCA"),rn(a,{top:"-3px"})])])]),_:1},8,["class"]),N("a",{href:("siteUrlObj"in n?n.siteUrlObj:ft(Sf)).deepBookUrl,target:"_blank"},gP,8,pP)],2)],2)],64)),n.store.theme=="default"?(ne(),re("div",wP,[rn(o,{to:"/pools",class:Ge(n.$route.name==="pools"||n.$route.name==="pools"||n.$route.name==="pool-position"||n.$route.name==="pool-list"||n.$route.name==="position"||n.$route.name==="remove-liquidity"||n.$route.name==="increase-liquidity"||n.$route.name==="pools-liquidity-add"||n.$route.name==="pools-management-remove"||n.$route.path.includes("position-detail")||n.$route.path.includes("deposit")||n.$route.name==="liquidity-deposit"||n.$route.name==="liquidity-position"||n.$route.name==="liquidity-analytics"||n.$route.name==="liquidity-create"||n.$route.path.includes("auto-pool-detail")?"nuxt-link-exact-active nuxt-link-active menu-item-active":"")},{default:kt(()=>[N("span",null,Se(n.$t("menu.pools")),1),yP,bP]),_:1},8,["class"])])):(ne(),re("div",{key:3,class:Ge(["trade",n.store.isShowHeaderEarn?"trade-active":"trade-default"]),onClick:e[9]||(e[9]=vt(()=>{n.store.setIsShowHeaderMore(!1),n.store.setIsShowHeaderTrade(!1),n.store.setIsShowHeaderEarn(!n.store.isShowHeaderEarn)},["stop"]))},[_P,(ne(),re("svg",{class:Ge(["icon",n.store.isShowHeaderEarn?"icon-opens":"icon-closes"]),"aria-hidden":"true"},kP,2)),N("div",{class:Ge(["trade-list",n.store.isShowHeaderEarn?"show-earnlist":"hidden-earnlist"])},[rn(o,{to:n.store.theme=="sui"?"/pool/list":"/pools",class:Ge(n.$route.name==="pools"||n.$route.name==="pool-position"||n.$route.name==="pool-list"||n.$route.name==="position"||n.$route.name==="remove-liquidity"||n.$route.name==="increase-liquidity"||n.$route.name==="pools-liquidity-add"||n.$route.name==="pools-management-remove"||n.$route.path.includes("position-detail")||n.$route.path.includes("deposit")||n.$route.name==="liquidity-deposit"||n.$route.name==="liquidity-position"||n.$route.name==="liquidity-analytics"||n.$route.name==="liquidity-create"||n.$route.name==="pool-vaults"||n.$route.path.includes("auto-pool-detail")?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[6]||(e[6]=vt(u=>n.store.setOpenH5Icon(!1),["stop"]))},{default:kt(()=>[SP,n.store.theme=="sui"&&(n.$route.name==="pools"||n.$route.name==="pool-position"||n.$route.name==="pool-list"||n.$route.name==="position"||n.$route.name==="remove-liquidity"||n.$route.name==="increase-liquidity"||n.$route.name==="pools-liquidity-add"||n.$route.name==="pools-management-remove"||n.$route.path.includes("position-detail")||n.$route.path.includes("deposit")||n.$route.name==="liquidity-deposit"||n.$route.name==="liquidity-position"||n.$route.name==="liquidity-analytics"||n.$route.name==="liquidity-create"||n.$route.name==="pool-vaults"||n.$route.path.includes("auto-pool-detail"))?(ne(),re("img",CP)):ye("",!0)]),_:1},8,["to","class"]),rn(o,{to:"/farms",class:Ge(n.$route.name==="farms"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[7]||(e[7]=vt(u=>n.store.setOpenH5Icon(!1),["stop"]))},{default:kt(()=>[AP,n.store.theme=="sui"&&n.$route.name==="farms"?(ne(),re("img",TP)):ye("",!0)]),_:1},8,["class"]),(l="config"in n?n.config:ft(nr))!=null&&l.hasVault?(ne(),ar(o,{key:0,to:"/vaults",class:Ge(n.$route.name==="vaults"||n.$route.path.includes("vaults-detail")?"nuxt-link-exact-active nuxt-link-active menu-item-active":""),onClick:e[8]||(e[8]=vt(u=>n.store.setOpenH5Icon(!1),["stop"]))},{default:kt(()=>[IP,n.store.theme=="sui"&&(n.$route.name==="vaults"||n.$route.path.includes("vaults-detail"))?(ne(),re("img",xP)):ye("",!0)]),_:1},8,["class"])):ye("",!0)],2)],2)),N("div",EP,[rn(o,{class:Ge(["span-link",n.$route.name==="xcetus"||n.$route.name==="leaderboard"||n.$route.name==="booster-manage"||n.$route.name==="lockup-liquidity"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""]),to:"/xcetus"},{default:kt(()=>[pr(" xCETUS "),MP,OP,n.store.theme=="sui"?(ne(),re("svg",NP,DP)):ye("",!0),BP]),_:1},8,["class"]),n.store.theme=="default"?(ne(),re("div",RP," xCETUS features are currently available on Sui network. ")):ye("",!0)]),N("a",{href:`${("siteUrlObj"in n?n.siteUrlObj:ft(Sf)).url}/?chain=sui`,target:"_blank"},[N("span",null,Se(n.$t("menu.launchpad")),1),n.store.theme=="default"?(ne(),re("div",UP," Launchpad features are currently available on Sui network. ")):ye("",!0)],8,PP),N("div",{class:Ge(["header-more table-link",n.$route.name==="stats"||n.$route.name==="stats-pools"||n.$route.name==="stats-tokens"?"nuxt-link-exact-active nuxt-link-active menu-item-active":""]),onClick:e[12]||(e[12]=vt(()=>{n.store.setIsShowHeaderEarn(!1),n.store.setIsShowHeaderTrade(!1),n.store.setIsShowHeaderMore(!n.store.isShowHeaderMore)},["stop"]))},[N("div",{class:Ge(["tit-box",n.store.isShowHeaderMore?" ":"noLine"])},[FP,(ne(),re("svg",{class:Ge(["icon icon_on icon-open",n.store.isShowHeaderMore?"icon-opens":"icon-closes"]),"aria-hidden":"true"},$P,2))],2),n.isPc||n.store.isShowHeaderMore?(ne(),re("div",{key:0,class:Ge(["more-list",n.store.isShowHeaderMore?"show-morelist":"hidden-morelist"])},[n.store.chainName==="Sui"?(ne(),re("a",{key:0,class:"item",onClick:e[10]||(e[10]=(...u)=>n.onpenCrypto&&n.onpenCrypto(...u))},qP)):ye("",!0),N("a",{class:"item",href:n.store.theme=="default"?"https://bridge.cetus.zone/":"https://bridge.cetus.zone/sui",target:"_blank"},KP,8,zP),rn(o,{to:"/stats",class:Ge(["item",n.$route.name==="stats"||n.$route.name==="stats-pools"||n.$route.name==="stats-tokens"?"item-active":""]),onClick:e[11]||(e[11]=vt(u=>n.store.setOpenH5Icon(!n.store.openH5Icon),["stop"]))},{default:kt(()=>[ZP,n.store.theme=="default"&&(n.$route.name==="stats"||n.$route.name==="stats-pools"||n.$route.name==="stats-tokens")?(ne(),re("img",QP)):ye("",!0),n.store.theme=="sui"&&(n.$route.name==="stats"||n.$route.name==="stats-pools"||n.$route.name==="stats-tokens")?(ne(),re("img",HP)):ye("",!0)]),_:1},8,["class"]),GP,YP,N("div",XP,[(ne(!0),re(qn,null,rr(n.list,(u,d)=>(ne(),re("div",{key:d,class:"contact-us-item"},[N("a",{class:"item",href:u.link,target:"_blank"},[(ne(),re("svg",eU,[N("use",{"xlink:href":u.icon},null,8,tU)]))],8,JP)]))),128))])],2)):ye("",!0)],2)]),N("div",nU,[N("div",rU,[N("div",iU,[N("div",{class:"switch-lang",onClick:e[13]||(e[13]=vt(()=>{n.store.setIsShowSettingH5(!n.store.isShowSettingH5),n.store.setIsShowRpcH5(!n.store.isShowRpcH5),n.store.setOpenH5Icon(!1),n.store.setOpenSwitchChain(!1),n.store.setOpenMore(!1),n.store.setIsShowMore(!1),n.store.setOpenSwitchLang(!1),n.store.setIsShowHeaderMore(!1),n.store.setIsShowHeaderEarn(!1)},["stop"]))},oU),n.store.theme!=="default"?(ne(),re("div",{key:0,class:"switch-lang",onClick:e[14]||(e[14]=vt(()=>{n.store.setIsShowSettingH5(!n.store.isShowSettingH5),n.store.setIsShowExplorerH5(!n.store.isShowExplorerH5),n.store.setOpenH5Icon(!1),n.store.setOpenSwitchChain(!1),n.store.setOpenMore(!1),n.store.setIsShowMore(!1),n.store.setOpenSwitchLang(!1),n.store.setIsShowHeaderMore(!1),n.store.setIsShowHeaderEarn(!1)},["stop"]))},cU)):ye("",!0),N("div",{class:"switch-lang",onClick:e[15]||(e[15]=vt(u=>n.openSwitchLang=!n.openSwitchLang,["stop"]))},[N("div",lU,[N("div",null,[uU,N("span",dU,Se(("langObj"in n?n.langObj:ft(wu))[n.counter.lang].icon),1),N("span",null,Se(("langObj"in n?n.langObj:ft(wu))[n.counter.lang].label),1)]),(ne(),re("svg",{class:Ge([n.openSwitchLang?"icon-open":"icon-close","icon"]),"aria-hidden":"true"},fU,2))]),n.openSwitchLang?(ne(),re("div",pU,[(ne(!0),re(qn,null,rr("langList"in n?n.langList:ft(Jd),u=>(ne(),re("div",{key:u.value,class:Ge(u.value==n.counter.lang?"item-container item-active-container":"item-container")},[N("div",{class:"item",onClick:d=>n.changeLang(u.value)},[N("span",gU,Se(u.icon),1),N("span",null,Se(u.label),1)],8,mU)],2))),128))])):ye("",!0)])])]),N("div",wU,[N("div",yU,[(ne(!0),re(qn,null,rr(n.list,(u,d)=>(ne(),re("div",{key:d,class:"contact-us-item"},[N("a",{class:"item",href:u.link,target:"_blank"},[(ne(),re("svg",_U,[N("use",{"xlink:href":u.icon},null,8,vU)]))],8,bU)]))),128))])])])],2)}const SU=xr(WR,[["render",kU],["__scopeId","data-v-5deed24c"]]),CU=Vr({components:{Modal:wo},setup(){const n=Vs(),e=Le(()=>n),{t}=cu(),r=wr(),i=Le(()=>r),s=Le(()=>i.value.currentExplorer),{connect:o,disconnect:a}=Q2(),c=Le(()=>i.value.chainName),l=()=>{n.setIsShowWalletModal(!1),a()},u=Fe(!1),d=Fe([]),h=Fe(""),f=Fe(!1);i0([]);const m=async()=>{var R,V;u.value=!0;try{const U=await $fetch(`https://api.blockvision.org/v3/sui/account/activities?address=${e.value.address}&protocol=cetus&cursor=${h.value}`,{method:"GET",headers:{accept:"application/json","x-api-key":"bdU4jzPvMTgmEDokRZGACw6epSB9NXWt"}});let x=(((R=U==null?void 0:U.result)==null?void 0:R.data)||[]).map(p=>{let g=p.coinChanges?[...p.coinChanges]:[];return g.sort((k,T)=>parseFloat(T.amount)-parseFloat(k.amount)),{...p,coinChanges:g}});h.value=(V=U==null?void 0:U.result)==null?void 0:V.nextPageCursor,d.value=d.value.concat(x),u.value=!1}catch(U){console.log(U,"error"),u.value=!1}},w=R=>{switch(R){case"Swap":return"/sui-image/icon_swap@2x.png";case"AddLiquidity":return"/sui-image/icon_liquidityincreased@2x.png";case"AddLiquidityAndClaim":return"/sui-image/icon_liquidityincreased@2x.png";case"RemoveLiquidity":return"/sui-image/icon_liquidityremoved@2x.png";case"RemoveLiquidityAndClaim":return"/sui-image/icon_liquidityremoved@2x.png";case"convert":return"/sui-image/icon_swap@2x.png";case"Contract Interaction":return"/sui-image/icon_presalesettled@2x.png";case"redeem_lock":return"/sui-image/icon_redeem@2x.png";case"mint_and_convert":return"/sui-image/icon_presalesettled@2x.png";case"collect_fee":return"/sui-image/icon_presalesettled@2x.png";case"claim_target_coin":return"/sui-image/icon_liquidityremoved@2x.png";case"create_indexer_and_place_limit_order":return"/sui-image/icon_createlimitorder@2x.png";case"place_limit_order":return"/sui-image/icon_createlimitorder@2x.png";case"cancel_order_by_owner":return"/sui-image/icon_cancel@2x.png";default:return"/sui-image/icon_presalesettled@2x.png"}},y=R=>{switch(R){case"Swap":return{background:"url(/sui-image/bg_swap@2x.png)",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"AddLiquidityAndClaim":return{background:"url(/sui-image/bg_liquidityincreased@2x.png)",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"AddLiquidity":return{background:"url(/sui-image/bg_liquidityincreased@2x.png)",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"RemoveLiquidity":return{background:"url(/sui-image/bg_liquidityremoved@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"RemoveLiquidityAndClaim":return{background:"url(/sui-image/bg_liquidityremoved@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"convert":return{background:"url(/sui-image/bg_swap@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"Contract Interaction":return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"redeem_lock":return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"mint_and_convert":return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"collect_fee":return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"claim_target_coin":return{background:"url(/sui-image/bg_liquidityremoved@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"create_indexer_and_place_limit_order":return{background:"url(/sui-image/bg_createlimitorder@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};case"place_limit_order":return{background:"url(/sui-image/bg_createlimitorder@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"};default:return{background:"url(/sui-image/bg_redeem@2x.png",backgroundSize:"148px 40px",backgroundRepeat:"no-repeat"}}};Ew(()=>{m()});const C=Fe(null),A=Fe(null),M=()=>{const R=C.value,{scrollTop:V,clientHeight:U,scrollHeight:Y}=R;V+U>=Y-10&&h.value&&m()},H=()=>{const R=A.value,{scrollTop:V,clientHeight:U,scrollHeight:Y}=R;V+U>=Y-10&&h.value&&m()},G=R=>{switch(R){case"convert":return"Convert";case"RemoveLiquidity":return"Remove Liquidity";case"AddLiquidity":return"Add Liquidity";case"redeem_lock":return"Redeem";case"cancel_redeem_lock":return"Cancel Redemption";case"mint_and_convert":return"Mint and Convert";case"collect_fee":return"Claim Fees";case"redeem":return"Claim (Redeem)";case"claim":return"Claim (Purchase)";case"purchase":return"Purchase";case"create_and_purchase":return"Purchase";case"collect_reward":return"Claim Farming Rewards";case"open_position_with_liquidity_with_all":return"Add Liquidity Failed";case"RemoveLiquidityAndClaim":return"Remove Liquidity";case"AddLiquidityAndClaim":return"Add Liquidity";case"create_indexer_and_place_limit_order":return"Create Order";case"place_limit_order":return"Create Order";case"cancel_order_by_owner":return"Cance Order";case"claim_target_coin":return"Claim Order";default:return R}},q=Sv(),X=Le(()=>q);return{wallet:e,t,indexStore:r,currentExplorer:s,getExplorerUrl:Wo,onDisconnect:l,historyList:d,getImage:w,prettyAmount:wb,addCommom:ng,timeFormat:wd,getStyle:y,loading:u,showWalletHis:f,handleScroll:M,scrollWrapperRef:C,getType:G,h5ScrollWrapperRef:A,handleH5Scroll:H,chainName:c,getCoinIcon:R=>{var V;return((V=X.value.tokensObj[R==null?void 0:R.coinAddress])==null?void 0:V.logo_url)||R.logo||Zt("/image/coins/sui-unknown.png")},getAmount:(R,V)=>{const Y=wb(R,V).replace("-","");return Y>1e6?R.indexOf("-")>-1?`-${bb(Y)}`:`+${bb(Y)}`:R.indexOf("-")>-1?`-${ng(Y)}`:`+${ng(Y)}`}}}}),bm=""+globalThis.__publicAssetsURL("sui-image/icon_suivision@2x.png");const Kn=n=>(Ri("data-v-ff49b44e"),n=n(),Pi(),n),AU={class:"wallet-name"},TU={class:"wallet-address"},IU=["href"],xU=Kn(()=>N("use",{"xlink:href":"#icon-icon_copy1"},null,-1)),EU=[xU],MU=["href"],OU=Kn(()=>N("svg",{class:"icon icon-up","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon-link1"})],-1)),NU=[OU],jU={class:"list"},DU=Kn(()=>N("svg",{class:"icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_recenttransactions1"})],-1)),BU=Kn(()=>N("span",null,"Recent Transactions",-1)),RU=[DU,BU],PU=Kn(()=>N("svg",{class:"icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_disconnect"})],-1)),UU=Kn(()=>N("span",null,"Disconnect",-1)),FU=[PU,UU],LU={key:0,class:"table-top"},$U=Kn(()=>N("table",null,[N("thead",null,[N("tr",null,[N("th",null,"Activity"),N("th",null,"Assets"),N("th",null,"Txns")])])],-1)),VU=[$U],qU=["src"],zU={class:"activity-right"},WU={class:"coin-changes-item"},KU={class:"coin-changes-item-box"},ZU={alt:""},QU={class:"txns"},HU=["href"],GU=Kn(()=>N("img",{src:bm,alt:""},null,-1)),YU={key:0,class:"loading-more"},XU={key:2,class:"loding-box"},JU={key:3,class:"no-data"},eF=Kn(()=>N("img",{src:Nw},null,-1)),tF=Kn(()=>N("span",null,"No transactions found",-1)),nF=[eF,tF],rF={class:"table-bottom"},iF=Kn(()=>N("div",{class:"powered-source"},[N("span",null,"Powered by"),N("img",{src:bm,alt:""}),N("span",null,"SuiVision")],-1)),sF={class:"view-trans"},oF=["href"],aF=Kn(()=>N("span",null,"View all transactions",-1)),cF=Kn(()=>N("svg",{class:"icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon-link1"})],-1)),lF=[aF,cF],uF={class:"h5-trans"},dF=["src"],hF={class:"activity-right"},fF=Kn(()=>N("div",{class:"assets-title"},"Assets",-1)),pF={class:"coin-changes-item"},mF={class:"coin-changes-item-box"},gF={alt:""},wF={class:"txns"},yF=Kn(()=>N("div",null,"Txns",-1)),bF=["href"],_F=Kn(()=>N("img",{src:bm,alt:""},null,-1)),vF={key:0,class:"loading-more"},kF={class:"table-bottom"},SF={class:"view-trans"},CF=["href"],AF=Kn(()=>N("span",null,"View all transactions",-1)),TF=Kn(()=>N("svg",{class:"icon","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon-link1"})],-1)),IF=[AF,TF],xF=Kn(()=>N("div",{class:"powered-source"},[N("span",null,"Powered by"),N("img",{src:bm,alt:""}),N("span",null,"SuiVision")],-1)),EF={key:0,class:"no-data"},MF=Kn(()=>N("img",{src:Nw},null,-1)),OF=Kn(()=>N("span",null,"No transactions found",-1)),NF=[MF,OF];function jF(n,e,t,r,i,s){const o=F4,a=yo("Modal"),c=_v("image");return ne(),re("div",{class:"wallet-connected-modal",onClick:e[7]||(e[7]=vt(()=>{},["stop"]))},[N("div",AU,Se(n.$t("modal.walletName"))+" "+Se(n.wallet.walletName=="SuiMetaMaskSnap"?"Sui MetaMask Snap":n.wallet.walletName),1),N("div",TU,[N("a",{class:"wallet-address-text",target:"_blank",href:("getExplorerUrl"in n?n.getExplorerUrl:ft(Wo))(n.currentExplorer,"account",n.wallet.address)},Se(n.wallet.address&&n.wallet.address.substr(0,6))+" ... "+Se(n.wallet.address&&n.wallet.address.substr(n.wallet.address.length-4,4)),9,IU),(ne(),re("svg",{class:"icon","aria-hidden":"true",onClick:e[0]||(e[0]=l=>n.indexStore.copy(n.wallet.address))},EU)),N("a",{target:"_blank",class:"jump-icon",href:("getExplorerUrl"in n?n.getExplorerUrl:ft(Wo))(n.currentExplorer,"account",n.wallet.address)},NU,8,MU)]),N("div",jU,[n.chainName=="Sui"?(ne(),re("div",{key:0,class:"list-item",onClick:e[1]||(e[1]=l=>n.showWalletHis=!0)},RU)):ye("",!0),N("div",{class:"list-item",onClick:e[2]||(e[2]=(...l)=>n.onDisconnect&&n.onDisconnect(...l))},FU)]),rn(a,{width:832,visible:n.showWalletHis,footer:null,title:"Recent Transactions",centered:"","wrap-class-name":"wallet-his-modal",onCancel:e[6]||(e[6]=l=>n.showWalletHis=!1)},{default:kt(()=>[N("div",{class:"table-content",onClick:e[4]||(e[4]=vt(()=>{},["stop"]))},[n.historyList.length!==0?(ne(),re("div",LU,VU)):ye("",!0),n.historyList.length!==0?(ne(),re("div",{key:1,ref:"scrollWrapperRef",class:"table-top",onScroll:e[3]||(e[3]=(...l)=>n.handleScroll&&n.handleScroll(...l))},[N("table",null,[N("tbody",null,[(ne(!0),re(qn,null,rr(n.historyList,l=>(ne(),re("tr",{key:l},[N("td",null,[N("div",{class:"activity",style:s0(n.getStyle(l.type))},[N("img",{src:n.getImage(l.type),alt:""},null,8,qU),N("div",zU,[N("div",null,Se(n.getType(l.type)),1),N("div",null,Se(("timeFormat"in n?n.timeFormat:ft(wd))((l==null?void 0:l.timestampMs)-8*60*60*1e3,""))+" UTC ",1)])],4)]),N("td",null,[(ne(!0),re(qn,null,rr(l.coinChanges,u=>(ne(),re("div",{key:u,class:"coin-changes"},[N("div",WU,[N("div",KU,[jo(N("img",ZU,null,512),[[c,n.getCoinIcon(u)]]),N("p",{class:Ge([u.amount.indexOf("-")>-1?"color-add":"color-sub","amount"])},[pr(Se(n.getAmount(u.amount,u.decimal))+" ",1),N("span",null,Se(u.symbol),1)],2)])])]))),128))]),N("td",null,[N("div",QU,[N("a",{target:"_blank",href:`https://suivision.xyz/txblock/${l.digest}?tab=Activity&type=Cetus`},[GU,N("span",null,Se(l.digest&&l.digest.substr(0,6))+" ... "+Se(l.digest&&l.digest.substr(l.digest.length-4,4)),1)],8,HU)])])]))),128))])]),n.loading&&n.historyList.length!==0?(ne(),re("div",YU,[rn(o)])):ye("",!0)],544)):ye("",!0),n.loading&&n.historyList.length==0?(ne(),re("div",XU,[rn(o)])):ye("",!0),!n.loading&&n.historyList.length==0?(ne(),re("div",JU,nF)):ye("",!0),N("div",rF,[iF,N("div",sF,[N("a",{target:"_blank",href:`https://suivision.xyz/account/${n.wallet.address}?tab=Activity&type=Cetus`},lF,8,oF)])])]),N("div",uF,[N("div",{ref:"h5ScrollWrapperRef",class:"h5-trans-list",onScroll:e[5]||(e[5]=(...l)=>n.handleH5Scroll&&n.handleH5Scroll(...l))},[(ne(!0),re(qn,null,rr(n.historyList,(l,u)=>(ne(),re("div",{key:l,class:Ge(["trans-item",u==n.historyList.length-1?"trans-item-last":""])},[N("div",{class:"activity",style:s0(n.getStyle(l.type))},[N("img",{src:n.getImage(l.type),alt:""},null,8,dF),N("div",hF,[N("div",null,Se(n.getType(l.type)),1),N("div",null,Se(("timeFormat"in n?n.timeFormat:ft(wd))((l==null?void 0:l.timestampMs)-8*60*60*1e3,""))+" UTC ",1)])],4),fF,(ne(!0),re(qn,null,rr(l.coinChanges,d=>(ne(),re("div",{key:d,class:"coin-changes"},[N("div",pF,[N("div",mF,[jo(N("img",gF,null,512),[[c,n.getCoinIcon(d)]]),N("p",{class:Ge([d.amount.indexOf("-")>-1?"color-add":"color-sub","amount"])},[pr(Se(n.getAmount(d.amount,d.decimal))+" ",1),N("span",null,Se(d.symbol),1)],2)])])]))),128)),N("div",wF,[yF,N("a",{target:"_blank",href:`https://suivision.xyz/txblock/${l.digest}?tab=Activity&type=Cetus`},[_F,N("span",null,Se(l.digest&&l.digest.substr(0,6))+" ... "+Se(l.digest&&l.digest.substr(l.digest.length-4,4)),1)],8,bF)]),n.loading&&n.historyList.length!==0?(ne(),re("div",vF,[rn(o)])):ye("",!0)],2))),128)),n.loading&&n.historyList.length==0?(ne(),ar(o,{key:0})):ye("",!0)],544),N("div",kF,[N("div",SF,[N("a",{target:"_blank",href:`https://suivision.xyz/account/${n.wallet.address}?tab=Activity&type=Cetus`},IF,8,CF)]),xF]),!n.loading&&n.historyList.length==0?(ne(),re("div",EF,NF)):ye("",!0)])]),_:1},8,["visible"])])}const DF=xr(CU,[["render",jF],["__scopeId","data-v-ff49b44e"]]),BF=Vr({components:{WalletConnectModal:DF},setup(){const n=wr(),e=Vs(),t=Le(()=>e),r=Le(()=>n),i=Le(()=>r.value.chainName?nr[r.value.chainName]:{});return{wallet:t,importIcon:Zt,storeIndex:r,config:i,showWalletCard:()=>{n.setIsShowSetting(!1),n.setOpenH5Icon(!1),n.setOpenSwitchChain(!1),n.setOpenMore(!1),n.setIsShowMore(!1),n.setOpenSwitchLang(!1),n.setIsShowHeaderMore(!1),n.setIsShowNotifi(!1),e.setIsShowWalletCard(!0)}}}});const RF=["src"],PF={class:"addressAndDev"},UF={key:0,class:"network"};function FF(n,e,t,r,i,s){const o=yo("WalletConnectModal");return n.wallet.connected?(ne(),re("div",{key:0,class:"wallet-info",onClick:e[0]||(e[0]=vt(a=>n.showWalletCard(),["stop"]))},[n.wallet.walletIcon?(ne(),re("img",{key:0,src:`/image/wallet/${n.wallet.walletIcon.toLowerCase()}.png`,alt:""},null,8,RF)):ye("",!0),N("div",PF,[n.storeIndex.theme!=="default"&&("config"in n?n.config:ft(nr)).network==="testnet"?(ne(),re("span",UF,"Testnet")):ye("",!0),N("span",null,Se(n.wallet.address&&n.wallet.address.substr(0,6))+" ... "+Se(n.wallet.address&&n.wallet.address.substr(n.wallet.address.length-4,4)),1)]),n.wallet&&n.wallet.isShowWalletCard?(ne(),ar(o,{key:1})):ye("",!0)])):(ne(),re("div",{key:1,class:"wallet-info noConnect",onClick:e[1]||(e[1]=a=>n.wallet.setIsShowWalletModal(!0))},Se(n.$t("button.connect")),1))}const LF=xr(BF,[["render",FF],["__scopeId","data-v-c243058c"]]),$F=Vr({props:{openNotification:{type:Boolean,default:!0}},setup(n){xw();const e=Fe(!1),t=Vs(),r=Le(()=>t),i=wr(),s=Le(()=>i),o=[],a=["+1","+32","+33","+34","+351","+354","+358","+36","+41","+43","+44","+45","+46","+47","+48","+49","+60","+61","+63","+65","+82","+852","+886"],c=Fe("+1"),l=Fe(""),u=Fe(""),d=Fe(""),h=Fe(!1),f=Fe(!0),m=Fe(!1),w=Fe(!1),y=cx(),C=Le(()=>y),A=Le(()=>C.value.status),M=async()=>{await y.sendEmailTargetVerificationRequest(x.value),F(),m.value=!0},H=()=>{w.value=!0,window.open(Y.value,"_blank"),I()},G=async()=>{const z={emailAddress:l.value,phoneNumber:u.value?c.value+" "+u.value:"",telegramId:d.value};A.value!=="authenticated"?await y.login(r,z,s.value.chainName):await y.ensureTargetGroup(z)},q=Fe(),X=Fe(""),E=Fe(""),j=Fe(""),R=Fe(""),V=Fe(!1),U=Fe(!1),Y=Fe(""),x=Fe(""),p=async z=>{var ie,le,he,_e,Ce,ge,Oe,Ie;z&&!Y4(z)?(l.value=z!=null&&z.emailTargets&&((ie=z==null?void 0:z.emailTargets)==null?void 0:ie.length)>0?z.emailTargets[z.emailTargets.length-1].emailAddress:"",V.value=z!=null&&z.emailTargets&&((le=z==null?void 0:z.emailTargets)==null?void 0:le.length)>0?z.emailTargets[z.emailTargets.length-1].isConfirmed:!1,u.value=z!=null&&z.smsTargets&&((he=z==null?void 0:z.smsTargets)==null?void 0:he.length)>0?z.smsTargets[z.smsTargets.length-1].name.split(" ")[1]:"",c.value=z!=null&&z.smsTargets&&((_e=z==null?void 0:z.smsTargets)==null?void 0:_e.length)>0?z.smsTargets[z.smsTargets.length-1].name.split(" ")[0]:"+1",d.value=z!=null&&z.telegramTargets&&((Ce=z==null?void 0:z.telegramTargets)==null?void 0:Ce.length)>0?z.telegramTargets[z.telegramTargets.length-1].telegramId:"",U.value=z!=null&&z.telegramTargets&&((ge=z==null?void 0:z.telegramTargets)==null?void 0:ge.length)>0?z.telegramTargets[z.telegramTargets.length-1].isConfirmed:!1,Y.value=z!=null&&z.telegramTargets&&((Oe=z==null?void 0:z.telegramTargets)==null?void 0:Oe.length)>0?z.telegramTargets[z.telegramTargets.length-1].confirmationUrl:"",X.value=l.value,j.value=u.value,R.value=d.value,E.value=c.value,q.value=z,x.value=z!=null&&z.emailTargets&&((Ie=z==null?void 0:z.emailTargets)==null?void 0:Ie.length)>0?z.emailTargets[z.emailTargets.length-1].id:""):(f.value=!0,h.value=!1)};ns(()=>[C.value.targetGroups,A.value],([z,ie])=>{z&&z.length>0&&ie=="authenticated"&&p(z[0])},{immediate:!0}),ns(()=>A.value,z=>{z&&z=="authenticated"&&y.getTargetGroups()},{immediate:!0});const g=Le(()=>!l.value&&!u.value&&!d.value?!0:l.value==X.value&&u.value==j.value&&d.value==R.value&&c.value==E.value),k=Le(()=>!l.value&&!u.value&&!d.value?"Subscribe":X.value||j.value||R.value?"Update":"Subscribe"),T=Le(()=>C.value.notifiLoading),O=z=>{const ie=new RegExp(/[^\d^\.]+/g);z.target.value=z.target.value.replace(ie,""),u.value=z.target.value},L=Fe(60),W=Fe(60),P=Fe(),_=Fe(),F=()=>{P.value=setInterval(()=>{L.value--,L.value==0&&(clearInterval(P.value),L.value=60,m.value=!1)},1e3)},I=()=>{_.value=setInterval(()=>{W.value--,W.value==0&&(clearInterval(_.value),W.value=60,w.value=!1)},1e3)};return Qp(()=>{clearInterval(P.value),clearInterval(_.value)}),{inputChange:O,wallet:r,isShowPhone:e,posList:o,phoneList:a,phoneRepresent:c,emailAddress:l,phoneNumber:u,telegramId:d,openPositionInfos:h,openPositionDetails:f,subscribe:G,subscribeDisabled:g,subscribeBtnText:k,isVerifiEmail:V,notifiStatus:A,oldEmallAddress:X,sendEmailTargetVerificationRequest:M,sendEmailSuccess:m,notifiLoading:T,oldTelegramId:R,isVerifiTelegram:U,sendTelegramTargetVerificationRequest:H,sendTelegramSuccess:w,sendEmailNum:L,sendTgNum:W}}}),VF=""+globalThis.__publicAssetsURL("image/aufstellen.png"),qF=""+globalThis.__publicAssetsURL("image/notifi-icon.png"),zF=""+globalThis.__publicAssetsURL("image/img-no-Positions.png");const Xo=n=>(Ri("data-v-267235d0"),n=n(),Pi(),n),WF=Xo(()=>N("div",{class:"info-detail-bg"},null,-1)),KF={class:"item-title"},ZF={key:0},QF={key:1},HF={class:"info-to-switch"},GF={class:"aufstellen-info"},YF=Xo(()=>N("div",{class:"hover-text"},"setting",-1)),XF=Xo(()=>N("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),JF=[XF],e9={class:"item-notify-title"},t9={class:"title"},n9={class:"notify-time"},r9={class:"item-notify-detail"},i9={key:0,class:"setting-info"},s9=Xo(()=>N("div",{class:"input-title"},"Email address",-1)),o9={key:0,class:"verifi-email"},a9={key:0},c9={key:1},l9={class:"phone-position position-all"},u9=Xo(()=>N("div",{class:"input-title"},"Phone number",-1)),d9=Xo(()=>N("use",{"xlink:href":"#icon-icon_on"},null,-1)),h9=[d9],f9={key:0,class:"phone-list"},p9=["onClick"],m9={class:"telegram-position position-all"},g9=Xo(()=>N("div",{class:"input-title"},"Telegram ID",-1)),w9={key:1,class:"verifi-email"},y9={key:0},b9={key:1},_9=bv('<div class="notifi" data-v-267235d0> Notifications are provided by Notifi. By subscribing, you agree that info you provide to Notifi will be governed by its <a href="https://notifi.network/privacy" target="_blank" data-v-267235d0>Privacy Policy</a> and <a href="https://notifi.network/terms" target="_blank" data-v-267235d0>Terms of Use.</a></div><div class="platform-icon" data-v-267235d0><span data-v-267235d0>Powered by</span><img src="'+qF+'" alt="" data-v-267235d0></div>',2),v9={key:1,class:"item-no-notify"},k9=Xo(()=>N("img",{src:zF,alt:""},null,-1)),S9=Xo(()=>N("p",null,"You have no new updates.",-1)),C9=[k9,S9];function A9(n,e,t,r,i,s){const o=Iw,a=Ka,c=Ka;return ne(),re(qn,null,[WF,N("div",{class:"info-detail",onClick:e[12]||(e[12]=vt(l=>n.isShowPhone=!1,["stop"]))},[N("div",KF,[n.openPositionInfos?(ne(),re("span",ZF,"Updates")):ye("",!0),n.openPositionDetails?(ne(),re("span",QF," Notification Setting ")):ye("",!0),N("div",HF,[N("div",GF,[n.openPositionInfos?(ne(),re("img",{key:0,src:VF,alt:"",onClick:e[0]||(e[0]=vt(()=>{n.openPositionInfos=!1,n.openPositionDetails=!0},["stop"]))})):ye("",!0),YF]),(ne(),re("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:e[1]||(e[1]=vt(l=>n.$emit("closeOpenNotification"),["stop"]))},JF))])]),(ne(!0),re(qn,null,rr(n.posList,l=>jo((ne(),re("div",{key:l.title,class:"item-notify"},[N("div",e9,[N("div",t9,Se(l.title),1),N("div",n9,Se(l.time),1)]),N("div",r9,Se(l.detailText),1)])),[[L4,n.openPositionInfos]])),128)),n.openPositionDetails?(ne(),re("div",i9,[N("div",{class:"email-position position-all",style:s0(n.notifiStatus=="authenticated"&&n.oldEmallAddress?{marginBottom:"4px"}:{})},[s9,rn(o,{value:n.emailAddress,placeholder:"",onClick:e[2]||(e[2]=vt(l=>n.isShowPhone=!1,["stop"])),onChange:e[3]||(e[3]=l=>{n.emailAddress=l.target.value})},null,8,["value"])],4),n.notifiStatus=="authenticated"&&n.oldEmallAddress?(ne(),re("div",o9,[n.sendEmailSuccess?(ne(),re("p",a9,"Verification email sent! ("+Se(n.sendEmailNum)+"s)",1)):ye("",!0),!n.isVerifiEmail&&!n.sendEmailSuccess?(ne(),re("p",c9,[pr("Waiting for email verification. "),N("span",{onClick:e[4]||(e[4]=(...l)=>n.sendEmailTargetVerificationRequest&&n.sendEmailTargetVerificationRequest(...l))},"Retry")])):ye("",!0)])):ye("",!0),N("div",l9,[u9,N("div",{class:"phone-select",onClick:e[5]||(e[5]=vt(()=>{n.isShowPhone=!n.isShowPhone},["stop"]))},[N("span",null,Se(n.phoneRepresent),1),(ne(),re("svg",{class:Ge(["icon",n.isShowPhone?"icon-up":""]),"aria-hidden":"true"},h9,2)),n.isShowPhone?(ne(),re("div",f9,[(ne(!0),re(qn,null,rr(n.phoneList,(l,u)=>(ne(),re("div",{key:u,onClick:()=>{n.phoneRepresent=l}},Se(l),9,p9))),128))])):ye("",!0)]),rn(o,{value:n.phoneNumber,"onUpdate:value":e[6]||(e[6]=l=>n.phoneNumber=l),placeholder:"",onClick:e[7]||(e[7]=vt(l=>n.isShowPhone=!1,["stop"])),onChange:n.inputChange},null,8,["value","onChange"])]),N("div",m9,[g9,rn(o,{value:n.telegramId,placeholder:"",onClick:e[8]||(e[8]=vt(l=>n.isShowPhone=!1,["stop"])),onChange:e[9]||(e[9]=l=>{n.telegramId=l.target.value})},null,8,["value"])]),n.notifiStatus=="authenticated"&&n.oldTelegramId?(ne(),re("div",w9,[n.sendTelegramSuccess?(ne(),re("p",y9,"Verification telegram sent! ("+Se(n.sendTgNum)+"s)",1)):ye("",!0),!n.isVerifiTelegram&&!n.sendTelegramSuccess?(ne(),re("p",b9,[pr(" Waiting for telegram verification. "),N("span",{onClick:e[10]||(e[10]=(...l)=>n.sendTelegramTargetVerificationRequest&&n.sendTelegramTargetVerificationRequest(...l))},"Retry")])):ye("",!0)])):ye("",!0),n.wallet.connected?(ne(),ar(c,{key:3,class:"big-btn setting-btn",disabled:n.subscribeDisabled,loading:n.notifiLoading,onClick:n.subscribe},{default:kt(()=>[pr(Se(n.subscribeBtnText),1)]),_:1},8,["disabled","loading","onClick"])):(ne(),ar(a,{key:2,class:"big-btn setting-btn",onClick:e[11]||(e[11]=l=>n.wallet.setIsShowWalletModal(!0))},{default:kt(()=>[pr(" Connect Wallet ")]),_:1})),_9])):ye("",!0),n.openPositionInfos&&n.posList&&n.posList.length==0?(ne(),re("div",v9,C9)):ye("",!0)])],64)}const T9=xr($F,[["render",A9],["__scopeId","data-v-267235d0"]]),I9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA+FJREFUWEfVmFmoVlUUx3//gkobFTKy6DGiggoqiiCIKCIospnMRjOjN0VsTi0ziXpKGs0mw0qtFCKSCIIoVCihQnqMLFJoHh9qxf+yzmV7Oud8371wL6f98n3ss/ba/zXutZbo+VLP8TFugBFxEHAacApwOHA0cEgK/DPwNbAH+ATYJunX8ShjzAAj4kzgIuAEYJ8hL/0H+BzYLOmjIc+MkA0NMCKOB24EjqtdsBuYkXvf5u+R+Vt+q47tBNZI+mIYoAMBRsS+wM2ptYqnzfcu8DFwX5rX5rw9hX48zW66ZcAZwPlJV/HYDKyW9HcX0E6A6WeLgZOTyQ/AK8AWM46IU4H789vDkj70/4g4C7gj95dK2p6CngdcA0zLb58CK7v8sxVggnukkHor8Kik3yuJI+Je4HTAppxXaSPBPJ2m3yrpgeLMVGBhnvO2tbyoDWQjwLxgSaG5DcCLkuzsIysi9k9t7gesk7S2NFVEzAauBv4CZkvyb3XWwXUdcFmhySVN5m4DOK/wufWSXqj7SURYc9ag10JJX9YAHmuN594ySdsaeFwPXJ77jnBrfa/1H4AZrSuTymZdXmqu0IIj+lLgJ2COpKgBNO+XgEOBjZLWNAC0Ju8uzL24Ht1NAO13TiUOiPmlz9UAPAicBGyXtLR+ebqBA8iBtEPSPS009sknM3B2SlpU0u0FMJPwXUmwStI7TUzz8nXAgcCrkl5uufxa4CrgN0n2x8YVERdkivL3h8pkXgdoSY4CfgHecyy08HSAXFi4wa4WOvOyr3q9nQHTRGoc5wIHA7skza+IRgFGxBHAs21STvL+XEnf+c4S4C3AxQnEea0rw1uD05PWjEbTT00QB4EF9/q+Q4P+7herejI3SXqmDnABcA7wlSQ/Wa0rImze2xLYrKYoTz81wDeyqHhCks3cxXcVcAzwvqTH6gBXACcCH0hyJHcxcnpxmvlD0pUDaF8DpmSBsHEArSP4bOAzSXfWAT4FzATelLR6ACNHpF+KHyXNGUDrXHgYsFaSI79LcBcllwDfSLq1DvB14ADgOUk2Sxej6gXYLclMu2gtrH2r8UUqD0bELOAm4E9JV9QBVqboA8BR1ymjuPcm7n2Q9D7N9ClRvyVp5FX7/zx1mfn7WywkQPe8/S23EmR/C9YE6Aa9vyV/giybpg2Snq+/ZRHhuYybdq/xNk03FJ3dcE1TAnRtVrad690ANbSdbjVdG05u25kgPb3qZ+NembPXo48C5FiHRz7qytgzw4kdHtVqtX6O3xqit58DzAagDiL3vB7NdY2APWLzhGtyRsBd5f1EfBs4YZ2IS8fC81/BalZHBYziFQAAAABJRU5ErkJggg==",x9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABdFJREFUWEfFmXmIlWUUxn9Pi5ZtVtBY0U4LZdiGtJDtZtRUpFgZZc20a2OrYAUl9UeBfwj2j2Vu5dSUprZom5gFmkS0kBmVZVPZJoxFC2PLieeb94vP670z93o1Dwxz537ve97ne8/7Puc5Z0SdFhECzgMGA/sC3wAvS3qlTtfZdDuvyyJiNHBuGScvSppcl/N6AUbEkcDDBrFs2TIWLFhAY2MjAwcOzHHdIenTekDWtYMRcTkwYu3atfTv35/Ozk769OnDihUr6Nu3r3HNkDR7awK8Ghja3t7OgAED/sOxcuVK+vXr57+fljRrqwCMiN2BO4AM2ZQpU5g7dy7Dhw9n5MiROaZ3gYmS1m0qyJpDHBHbAxcClwI7VrHw795J4AVJf1UxfoMhNQGMiBOBZiCLH/AP8BrQGzgV2BYwiDeBv4GzgG3S2DXeaEnv1AKyKoARcQBwXR7OtMD7wGOS2v132tkG4AdJf6bvDgSuB44ugHovzfu6GqDdAoyIXYArEhHnO/Ed8Lik5dUskICeDDQBfoF8518CWiX92p2fsgAjwqFydjC4nZODP4A24Pl8h6oFWNjhi4HhwA5p7i+Ab/krknwkNrKNAEbEscC1wP5pdACLgJmSOmoBVW5sROwBmJ7OKDxfncL+YemcDQBGxAXADYVBK4FHJX1eL7DS+RFxWDqfhxeePVKaw0sBjgCcHXzIzV++jVvMktA4HWgBtktRera4YCWAHZKuqhdZRBwBGMDxwGJJrRXC7u99IX2MtizAiLDkMij/5HxpXKsl3bJVAEaElcGgBOrQCjv/nKRp/xvAiDBVOLP4Nh5TyBjG4GziPGyOczax3VbpskXE5glx4keDMSiDc4or2sfAG8BbJuCIGAeYpJ1dTF1lrW6AabdM2ga2W8kqTlmLgSWSfsyfRYSFxJNAL2C2pBlbEuAQYFTJAqsA81ZZjoyI04A705wWSV9uSYDOoQ7XISWLOLM4pKaQDQBExD3pGHwr6cbuKKvuEBfCdnAKsykk0/QF+wh4QNLvEdEn5ViTb5skh7qibTaABaAWE1bSZ5ZclumS5kSEv78tjR8t6av/FWBxsXQZ7gdc4a2SdGtE3AecALRLKj27G2Hd7DtYukJEuGjPs4TrFJeiDu8sSZb73VpVAJMi9mH2YuskXdmT40LInUefSJLftLNfenaTJHcaegL4VNKdFrEWw5kit2ViISJOAW4Gdi14mpn4y3qwR4sIh9miILeKubfwYlbpFrDm2Nx+TvT1dgYwdQceqtBlsBZ8oUd0XS9ZvBiespEyKfUTEZcA15Tx72LsLnclDPBB38g1a9bQ1NRER0cHkyZNytsXv1kfSupxF0uoxWteL8n1S1lLadMlRO+lS5fS0tJCQ0MDU6dOzX47l0u63wB9iHcaP348EydOzJwNGjSI+fPn547vlfRBlbt4N3AS8Jmk27ubExG+5b7tDBkyhOXLu2qwsWPHMm6cc0LXPTDAR4G9W1tbGTWqixGam5uZMGFC7t/KxGifMQn3sOheQCPweiXui4idgMvSOPMpY8aMYeZMH/muDsXQoUP9MaMoA7TKuMjfLFy4MAvxsGHD6NXLOT4rzPNy0+0Le/HiPYa8zHmzn3MAK/X8Mmb+169fT1tbWxbawYNNIpllAsMAreu8XS7Oi+aS0JfH5ae7BrlZJEyW5IKqKouI/qlAOqgwYQnwasrxeWmbP/7C0ZbUmdOMt8s3yunLGu+TFNKs6RMRR6XOQlEsuKCaJmltJZQR4ZC7YDeN5fZZKjGzF0xlqKnG1Z1rb3ce5uVcWFXrIzlyiM5OIco1YScwB7Cc9+fMUlSGpZd2s8lm5eMjsqiWI1I1wMLiVir5IXc6s/0ETLeSBqwDXZjvmZ75ks1LEfEO1WQ1AywA3Sd1uv7r95oaSmSYs4FT1/c1oSoM3mSABaDHpVZJnn/9yPLKna+q+LM78HUDTGfOfHY+4NaJOdP/hijbDKp1J/8FDml2R84ujkAAAAAASUVORK5CYII=",E9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABY1JREFUWEfNmGmoVlUUhp+3gUaK5gGa5yj6UUEjjVT0o0EqbbJBCErFtGyySCq1ySy0MiHL1FIrFUpKUELCFMRAimiwsNEsogGahxXvbZ3Lud8933fOhTLXnzuctfd+9xrftcUGLtrA8fG/AIyIzYELgSOAPYF1wLvALEnflI223gFGhAHdAexa4b0fgfGSVhTf1ivAiNgEmADsnQCWAu8BuwOnAZsCBjm4sGSfAUbEzumWbXOztZI+bhLLEXEmMCR1H5L0WrEuIvYDHkiQr0p61N8aAYyIjYCTgfNLty9j+hp4BXhJ0i/twEbEMOB0YLWk4a16ETEYOAtYI2loI4ARsR1wG3BwAysZ6D2SPqrSjYhxwGHA65LurwBoA1wN/CzpolqACW48sFNu9hnwAvAW8C2wNXAQcA5weOr86gtJer/kPofDqUB/YCtgLXCtpD/LICPiFuB4x6WkGzsCTLfeV7LcfGC6pN8qbu5QORu4CtgswdtFzli77DjACVKWecC0AmREnAKMSIU5kqbXAfSNiziZL+nJOhdHxElA180zgWytsqxKqzshLLbkamA3YP/835fA0CKW2yZJREzMhLBbh1VZrk2cOV6PLX37HlgELJS0NiLsbifL0RXr1ziTJX1SfKsEmKWksNjDkhbXWa8Ub3sBk/Jvu/EZSX9UhIUv4U5ifVvNnWRxq247gEcBd+amgyR91RSg9SJiJrANMFPSrL6sbdVtB9BV/fpU7ifp974cEhEusk6QlyU90Ze1TQEeA4xK5YGSXFIaS0RMA7YHZkua0XhhhWI7C5bjaIyk5U0PiQjXzKmp36f4rTqjUxb7EB/mojxKUjQBGRGDgPMcioCt/12Tde10OgE0XxuYCydLWlB3UEQcAri4e99lksbWran73gmgSeVjaUW3r4mSlrTbMMHdBOwIOKlcbD+vA1D3vSObiYh9ATd1ty/Lsiwd3fQqY869+NwSO3JxH96J2dQBK77X0q2IOBC4HTCrKeQHwLFlsuBsLeQvwNTM8mYymz6VqFbgtQC9INuT61lrby32c0I4011e+gFn5Ic37IESITDZ3SW/rWvSAJoCNJUqAn6u+RrQzaiBlUW2JgsaCZyQQNyHTRIuyLZWNpJDxfRtSbsq0RSgg/9EwI3/yqreWj41Zw+HxZENY82W9gjgZOwhtQDTvU8nn3tRkn+vlYhwYplw2NIWEwKTh4LIOrbNoIvprpJlNwFY0HAfco0pUy26f+K23C5toQmtWZ3zsTmnCa2lV9fqBTDdY7LgGcS32yeTY5Uku62RRIQL9qGA55Qhkn6qWhgRWyY9c9d6R9LNZb0eAHOodoAXc2tZ90NTMEmOw44SEVv4lSBLzgxJszstiAjPKpcBLlMDJDkJu6QbYJrbLLqICVNxu9NU3JTcskLSXQ0A7pFdyKqjJa2sAehkGp0610n6tArg5UDXqJcZ1TVUR8TGwBUZ0P7XWEnuKG0lInyhKakwTpJjsJO+Y/DWVOgR52ULPpgj5FJJ95Z3S5CPpyUXSJpcc6CfMOxW/5wr6akafU+DLvDuOv3LBLkMcA7g2JkqyeWgh0REUQvfllTctpNVTHidyY4nJ0nl2JDzj2cYn71c0pjypmWAxRTX/S7SYkU/+jgeF0l6pEEcHuBQST0nmFveFy17+tHIFy/G0BGSPmgHsHgXsZlHSvKmXdIyVE+StLAOYK67BLg4dd0lTNcKAL6A5+iCKT0n6dnWfcsW3AHwsGNCYJAeNX1jP234OcLiudU0qtcY2Q5wRDjxLi2xnFZVlxZPfw6xXtJaBz1M39CGtbhV3V0eqptYMS3pGccdyft7HLWYsvmhcl6n57uqTmJLDshOYmrkKd9s5Pl/g4BmEadcjDtdtLYXN7XSf6W3wQP8G6V2CUe3pBCLAAAAAElFTkSuQmCC";const M9=Vr({setup(n,e){const t=cu(),r=Fe(""),i=wr(),s=Le(()=>i),o=Fe(s.value.lang||"en"),a=j=>{i.setLang(j),t.locale.value=j,o.value=j};ns(()=>i.lang,j=>{o.value=j});const c=Le(()=>s.value.chainName&&s.value.chainName.toLowerCase().includes("sui")?s.value.chainName.split("2")[0]:s.value.chainName);ns(()=>c.value,j=>{j&&(r.value=j=="Aptos"?nr[j].rpcUrl:nr[j].fullRpcUrl)},{immediate:!0});const l=Fe(null),u=()=>l.value,d=()=>{e.emit("onClose")},h=Fe(localStorage.getItem(`${c.value}-currentRpclocal6Name`)||nr[c.value].rpcName||Da[c.value][0].name),f=Fe(localStorage.getItem(`${c.value}-currentRpclocal6`)),m=Fe(!1),w=Fe(!0),y=Fe(localStorage.getItem(`${c.value}-currentExplorerUrl`)||$l[c.value][0].link),C=Fe(localStorage.getItem(`${c.value}-currentExplorerName`)||$l[c.value][0].name),A=(j,R)=>{C.value=j,localStorage.setItem(`${c.value}-currentExplorerName`,C.value),localStorage.setItem(`${c.value}-currentExplorerUrl`,R);const V=new Event("updateExplorer");window.dispatchEvent(V),y.value=R,G.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"Explorer update"},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:`Explorer is currently set to ${y.value}`},null)]),class:"ant-notification-copy ant-notification-swap"})},M=(j,R)=>{m.value=!1,f.value="",h.value=j,h.value!=="Custom"&&(localStorage.setItem(`${c.value}-currentRpclocal6Name`,h.value),r.value=R,(localStorage.getItem(`${c.value}-currentRpclocal6`)||(c.value=="Aptos"?nr[c.value].rpcUrl:nr[c.value].fullRpcUrl))!=r.value&&(localStorage.setItem(`${c.value}-currentRpclocal6`,r.value),G.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"RPC update"},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:`RPC is currently set to ${r.value}`},null)]),class:"ant-notification-copy ant-notification-swap"}),setTimeout(()=>{window.location.reload()},2e3)))},H=()=>!/^(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/.test(f.value);ns(()=>f.value,(j,R)=>{const V=localStorage.getItem(`${c.value}-currentRpclocal6`);j==V?w.value=!1:w.value=!0,j!==R&&(m.value=!1)},{immediate:!0});const{$notify:G}=Zp(),q=()=>{localStorage.setItem(`${c.value}-currentRpclocal6Name`,h.value),localStorage.setItem(`${c.value}-currentRpclocal6`,f.value),m.value=!1,G.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"RPC update"},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:`RPC is currently set to ${f.value}`},null)]),class:"ant-notification-copy ant-notification-swap"}),setTimeout(()=>{window.location.reload()},2e3)},X=Le(()=>{let j=[{name:"Custom",link:""}];return c.value=="Sui"?s.value.suiRpcs&&s.value.suiRpcs.length>0?s.value.suiRpcs.concat(j):Da[c.value]:s.value.aptosRpcs&&s.value.aptosRpcs.length>0?s.value.aptosRpcs.concat(j):Da[c.value]}),E=Fe(null);return ns(()=>X.value,j=>{c.value==="Sui"&&(j==null?void 0:j.length)>0?E.value=setInterval(()=>{i.setRpcTimedelay(j)},3e3):clearInterval(E.value)},{immediate:!0}),Qp(()=>{c.value==="Sui"&&(clearInterval(E.value),E.value=null)}),{explorerSelected:C,changeExplorer:A,explorerObj:$l,rpcList:X,rpcObj:Da,store:s,changeLang:a,currentLang:o,langObj:wu,langList:Jd,currentRpc:r,getPopupContainer:u,settingModal:l,changeRpc:M,isShowTips:m,isUpdate:w,customRpc:f,chainName:c,rpcSelected:h,regTest:H,closeSystemSetting:d,saveCustomRpc:q,importIcon:Zt}}}),O9={class:"system-setting-container"},N9={class:"modal-title"},j9={class:"language-left"},D9=N("svg",{"aria-hidden":"true",class:"back-icon"},[N("use",{"xlink:href":"#icon-icon-back"})],-1),B9=N("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1),R9=[B9],P9={key:1},U9={key:0,class:"language-list"},F9=["onClick"],L9={class:"lang-icon"},$9={key:1,class:"language-list"},V9=["onClick"],q9={style:{paddingLeft:"8px"}},z9={key:2,class:"module-box"},W9={class:"module language-box"},K9=N("div",{class:"current-lang"},[N("img",{src:I9,alt:""}),N("span",null,"Language")],-1),Z9={class:"current"},Q9={class:"lang-icon"},H9=N("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_on1"})],-1),G9={key:0,class:"module language-box"},Y9=N("div",{class:"current-lang"},[N("img",{src:x9,alt:""}),N("span",null,"Preferred Explorer")],-1),X9={class:"current"},J9=N("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[N("use",{"xlink:href":"#icon-icon_on1"})],-1),e7={ref:"settingModal",class:"system-setting module"},t7=N("div",{class:"title"},[N("img",{src:E9,alt:""}),N("span",null,"RPC Node")],-1),n7={class:"rpc-select-box"},r7={class:"rpc-select-top"},i7={class:"rpc-name"},s7=["onClick"],o7=["src"],a7={key:0},c7={key:0,class:"rpc-select-bottom"},l7={key:1,class:"rpc-select-tips"};function u7(n,e,t,r,i,s){const o=Iw,a=Ka;return ne(),re("div",O9,[N("div",{class:"setting-box",onClick:e[5]||(e[5]=vt(()=>{},["stop"]))},[N("div",N9,[n.store.openSwitchLang||n.store.openExplorer?(ne(),re("div",{key:0,class:"lang-set",onClick:e[1]||(e[1]=vt(()=>{n.store.setOpenSwitchLang(!1),n.store.setIsOpenExplorer(!1)},["stop"]))},[N("div",j9,[D9,N("span",null,Se(n.store.openSwitchLang?"Language":"Preferred Explorer"),1)]),n.store.openSwitchLang||n.store.openExplorer?(ne(),re("svg",{key:0,class:"icon modal-icon-close","aria-hidden":"true",onClick:e[0]||(e[0]=vt(()=>{n.store.setIsOpenExplorer(!1),n.store.setIsShowSetting(!1)},["stop"]))},R9)):ye("",!0)])):(ne(),re("span",P9,"Settings"))]),n.store.openSwitchLang?(ne(),re("div",U9,[(ne(!0),re(qn,null,rr("langList"in n?n.langList:ft(Jd),c=>(ne(),re("div",{key:c.value,class:Ge(c.value==n.store.lang?"item-container item-active-container":"item-container")},[N("div",{class:"list-item",onClick:l=>n.changeLang(c.value)},[N("span",L9,Se(c.icon),1),N("span",null,Se(c.label),1)],8,F9)],2))),128))])):ye("",!0),n.store.openExplorer?(ne(),re("div",$9,[(ne(!0),re(qn,null,rr(("explorerObj"in n?n.explorerObj:ft(kv))[n.chainName],c=>(ne(),re("div",{key:c.name,class:Ge(c.name==n.explorerSelected?"item-container item-active-container":"item-container")},[N("div",{class:"list-item",onClick:l=>n.explorerSelected==c.name?"":n.changeExplorer(c.name,c.link)},[N("span",q9,Se(c.name),1)],8,V9)],2))),128))])):ye("",!0),!n.store.openSwitchLang&&!n.store.openExplorer?(ne(),re("div",z9,[N("div",W9,[K9,N("div",{class:"current-box",onClick:e[2]||(e[2]=vt(()=>{n.store.setOpenSwitchLang(!0)},["stop"]))},[N("div",Z9,[N("span",Q9,Se(("langObj"in n?n.langObj:ft(wu))[n.currentLang].icon),1),N("span",null,Se(("langObj"in n?n.langObj:ft(wu))[n.currentLang].label),1)]),H9])]),n.store.theme!=="default"?(ne(),re("div",G9,[Y9,N("div",{class:"current-box",onClick:e[3]||(e[3]=vt(()=>{n.store.setIsOpenExplorer(!0)},["stop"]))},[N("div",X9,[N("span",null,Se(n.explorerSelected),1)]),J9])])):ye("",!0),N("div",e7,[t7,N("div",n7,[N("div",r7,[(ne(!0),re(qn,null,rr(n.rpcList,(c,l)=>(ne(),re("div",{key:l,class:Ge(["select-item",n.rpcSelected==c.name?"select-item-active":""])},[N("div",i7,[N("div",{class:Ge(["check-box",n.chainName=="Aptos"?"aptos-check-box":"sui-check-box"]),onClick:vt(u=>n.rpcSelected==c.name?"":n.changeRpc(c.name,c.link),["stop"])},[n.rpcSelected==c.name?(ne(),re("img",{key:0,src:n.rpcSelected==c.name&&n.chainName=="Aptos"?("importIcon"in n?n.importIcon:ft(Zt))("/image/icon-selected@2x.png"):("importIcon"in n?n.importIcon:ft(Zt))("/sui-image/icon-selected@3x.png"),alt:""},null,8,o7)):ye("",!0)],10,s7),N("span",null,Se(c.name),1)]),n.chainName!=="Aptos"&&c.name!=="Custom"?(ne(),re("div",{key:0,class:Ge(["rpc-rate",n.store.suiRpcTimeDelayObj?n.store.suiRpcTimeDelayObj&&Number(n.store.suiRpcTimeDelayObj[c.name])<=100?"green-rate":n.store.suiRpcTimeDelayObj&&Number(n.store.suiRpcTimeDelayObj[c.name])>200?"red-rate":"orange-rate":""])},[N("span",{class:Ge(n.store.suiRpcTimeDelayObj&&n.store.suiRpcTimeDelayObj[c.name]?"":"noColor")},null,2),n.store.suiRpcTimeDelayObj&&n.store.suiRpcTimeDelayObj[c.name]?(ne(),re("p",a7,Se(n.store.suiRpcTimeDelayObj&&n.store.suiRpcTimeDelayObj[c.name])+"ms ",1)):ye("",!0)],2)):ye("",!0)],2))),128))]),n.rpcSelected=="Custom"?(ne(),re("div",c7,[rn(o,{value:n.customRpc,"onUpdate:value":e[4]||(e[4]=c=>n.customRpc=c),class:"rpc-input",type:"text",placeholder:"Custom RPC URL",onBlur:n.inputBlur},null,8,["value","onBlur"]),n.rpcSelected=="Custom"?(ne(),ar(a,{key:0,class:"save-btn",disabled:n.regTest()||n.customRpc==n.currentRpc||!n.isUpdate,onClick:n.saveCustomRpc},{default:kt(()=>[pr("Save")]),_:1},8,["disabled","onClick"])):ye("",!0)])):ye("",!0),n.rpcSelected=="Custom"&&n.isShowTips?(ne(),re("div",l7," Custom RPC URL is a required field ")):ye("",!0)])],512)])):ye("",!0)])])}const d7=xr(M9,[["render",u7]]);var Sd=(n=>(n[n.TransactionData=0]="TransactionData",n[n.TransactionEffects=1]="TransactionEffects",n[n.CheckpointSummary=2]="CheckpointSummary",n[n.PersonalMessage=3]="PersonalMessage",n))(Sd||{});function h7(n){return[n,0,0]}function X2(n,e){const t=h7(n),r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}const eh={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},f7={ED25519:32,Secp256k1:33,Secp256r1:33},p7={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function J2(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}class eC{equals(e){return J2(this.toRawBytes(),e.toRawBytes())}toBase64(){return Lc(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return Lc(e)}verifyWithIntent(e,t,r){const i=X2(r,e),s=Yf(i,{dkLen:32});return this.verify(s,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(sr.vector(sr.u8()).serialize(e).toBytes(),t,Sd.PersonalMessage)}verifyTransactionBlock(e,t){return this.verifyWithIntent(e,t,Sd.TransactionData)}toSuiBytes(){const e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toSuiAddress(){return Et(X4(Yf(this.toSuiBytes(),{dkLen:32})).slice(0,W4*2))}}var tC=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},xh=(n,e,t)=>(tC(n,e,"read from private field"),t?t.call(n):e.get(n)),Eh=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Mh=(n,e,t,r)=>(tC(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Cf,Af,Tf,If;class m7 extends Error{}class g7{constructor({url:e,fetch:t=fetch,headers:r={},queries:i={}}){Eh(this,Cf,void 0),Eh(this,Af,void 0),Eh(this,Tf,void 0),Eh(this,If,void 0),Mh(this,Cf,e),Mh(this,Af,i),Mh(this,Tf,r),Mh(this,If,(...s)=>t(...s))}async query(e){const t=await xh(this,If).call(this,xh(this,Cf),{method:"POST",headers:{"Content-Type":"application/json",...xh(this,Tf)},body:JSON.stringify({query:typeof e.query=="string"?String(e.query):lx(e.query),variables:e.variables,extensions:e.extensions,operationName:e.operationName})});if(!t.ok)throw new m7(`GraphQL request failed: ${t.statusText} (${t.status})`);return await t.json()}async execute(e,t){return this.query({...t,query:xh(this,Af)[e]})}}Cf=new WeakMap;Af=new WeakMap;Tf=new WeakMap;If=new WeakMap;function nC(){function n(e,t){var r=kx(e).definitions,i=new Set;for(var s of t||[])for(var o of s.definitions)o.kind===wh.FRAGMENT_DEFINITION&&!i.has(o)&&(r.push(o),i.add(o));return r[0].kind===wh.FRAGMENT_DEFINITION&&r[0].directives&&(r[0].directives=r[0].directives.filter(a=>a.name.value!=="_unmask")),{kind:wh.DOCUMENT,definitions:r}}return n.scalar=function(t,r){return r},n.persisted=function(t,r){return{kind:wh.DOCUMENT,definitions:r?r.definitions:[],documentId:t}},n}nC();const w7=nC();function y7(n){if(n.length!==1)throw new Error("Invalid base64Url character: "+n);const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(n);if(t===-1)throw new Error("Invalid base64Url character: "+n);const r=t.toString(2).padStart(6,"0");return Array.from(r).map(Number)}function b7(n){let e=[];for(let t=0;t<n.length;t++){const r=n.charAt(t),i=y7(r);e=e.concat(i)}return e}function _7(n,e){if(n.length<2)throw new Error(`Input (s = ${n}) is not tightly packed because s.length < 2`);let t=b7(n);const r=e%4;if(r!==0)if(r===1)t=t.slice(2);else if(r===2)t=t.slice(4);else throw new Error(`Input (s = ${n}) is not tightly packed because i%4 = 3 (i = ${e}))`);const i=(e+n.length-1)%4;if(i!==3)if(i===2)t=t.slice(0,t.length-2);else if(i===1)t=t.slice(0,t.length-4);else throw new Error(`Input (s = ${n}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(t.length%8!==0)throw new Error("We should never reach here...");const s=new Uint8Array(Math.floor(t.length/8));let o=0;for(let a=0;a<t.length;a+=8){const c=t.slice(a,a+8),l=parseInt(c.join(""),2);s[o++]=l}return new TextDecoder().decode(s)}function v7(n){if(!(n.slice(-1)==="}"||n.slice(-1)===","))throw new Error("Invalid claim");const e=JSON.parse("{"+n.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");const t=Object.keys(e)[0];return[t,e[t]]}function k7(n,e){const t=_7(n.value,n.indexMod4),[r,i]=v7(t);if(r!==e)throw new Error(`Invalid field name: found ${r} expected ${e}`);return i}const S7=Qn.struct("ZkLoginSignature",{inputs:Qn.struct("ZkLoginSignatureInputs",{proofPoints:Qn.struct("ZkLoginSignatureInputsProofPoints",{a:Qn.vector(Qn.string()),b:Qn.vector(Qn.vector(Qn.string())),c:Qn.vector(Qn.string())}),issBase64Details:Qn.struct("ZkLoginSignatureInputsClaim",{value:Qn.string(),indexMod4:Qn.u8()}),headerBase64:Qn.string(),addressSeed:Qn.string()}),maxEpoch:Qn.u64(),userSignature:Qn.vector(Qn.u8())});function C7(n){return S7.parse(typeof n=="string"?Ld(n):n)}function A7(n,e){const t=n.toString(16);return J4(t.padStart(e*2,"0").slice(-e*2))}var rC=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Cg=(n,e,t)=>(rC(n,e,"read from private field"),t?t.call(n):e.get(n)),m_=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Oh=(n,e,t,r)=>(rC(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Sl,od;class T7 extends eC{constructor(e,{client:t}={}){super(),m_(this,Sl,void 0),m_(this,od,void 0),Oh(this,od,t),typeof e=="string"?Oh(this,Sl,Ld(e)):e instanceof Uint8Array?Oh(this,Sl,e):Oh(this,Sl,Uint8Array.from(e))}equals(e){return super.equals(e)}toRawBytes(){return Cg(this,Sl)}flag(){return eh.ZkLogin}async verify(e,t){throw Error("does not support")}verifyPersonalMessage(e,t){const r=q0(t);return g_({address:r.zkLogin.address,bytes:Lc(e),signature:r.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:Cg(this,od)})}verifyTransactionBlock(e,t){const r=q0(t);return g_({address:r.zkLogin.address,bytes:Lc(e),signature:r.serializedSignature,intentScope:"TRANSACTION_DATA",client:Cg(this,od)})}}Sl=new WeakMap;od=new WeakMap;function I7(n,e,t){const r=A7(n,32),i=new TextEncoder().encode(e),s=new Uint8Array(1+i.length+r.length);return s.set([i.length],0),s.set(i,1),s.set(r,1+i.length),new T7(s,t)}const x7=w7(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);async function g_({address:n,bytes:e,signature:t,intentScope:r,client:i=new g7({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){var o,a;const s=await i.query({query:x7,variables:{bytes:e,signature:t,intentScope:r,author:n}});return((o=s.data)==null?void 0:o.verifyZkloginSignature.success)===!0&&((a=s.data)==null?void 0:a.verifyZkloginSignature.errors.length)===0}function q0(n){const e=typeof n=="string"?Ld(n):n;if(e[0]!==eh.ZkLogin)throw new Error("Invalid signature scheme");const t=e.slice(1),{inputs:r,maxEpoch:i,userSignature:s}=C7(t),{issBase64Details:o,addressSeed:a}=r,c=k7(o,"iss"),l=I7(BigInt(a),c),u=l.toSuiAddress();return{serializedSignature:Lc(e),signatureScheme:"ZkLogin",zkLogin:{inputs:r,maxEpoch:i,userSignature:s,iss:c,address:u,addressSeed:BigInt(a)},signature:e,publicKey:l.toRawBytes()}}function E7({signature:n,signatureScheme:e,publicKey:t}){if(!t)throw new Error("`publicKey` is required");const r=t.toRawBytes(),i=new Uint8Array(1+n.length+r.length);return i.set([eh[e]]),i.set(n,1),i.set(r,1+n.length),Lc(i)}function M7(n){const e=Ld(n),t=p7[e[0]];switch(t){case"MultiSig":const r=sr.MultiSig.parse(e.slice(1));return{serializedSignature:n,signatureScheme:t,multisig:r,bytes:e};case"ZkLogin":return q0(n);case"ED25519":case"Secp256k1":case"Secp256r1":const i=f7[t],s=e.slice(1,e.length-i),o=e.slice(1+s.length);return{serializedSignature:n,signatureScheme:t,signature:s,publicKey:o,bytes:e};default:throw new Error("Unsupported signature scheme")}}const xf=32,O7="suiprivkey";class N7{async signWithIntent(e,t){const r=X2(t,e),i=Yf(r,{dkLen:32});return{signature:E7({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:Lc(e)}}async signTransactionBlock(e){return this.signWithIntent(e,Sd.TransactionData)}async signPersonalMessage(e){return this.signWithIntent(Qn.vector(Qn.u8()).serialize(e).toBytes(),Sd.PersonalMessage)}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class j7 extends N7{export(){return{schema:this.getKeyScheme(),privateKey:this.getSecretKey()}}}function D7(n,e){if(n.length!==xf)throw new Error("Invalid bytes length");const t=eh[e],r=new Uint8Array(n.length+1);return r.set([t]),r.set(n,1),o0.encode(O7,o0.toWords(r))}function w_(n){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(n)}function B7(n){return Vx(n,"")}function R7(n){return K4(B7(n))}const P7="ed25519 seed",U7=2147483648,F7=new RegExp("^m(\\/[0-9]+')+$"),iC=n=>n.replace("'",""),L7=n=>{const t=$d.create(Hp,P7).update(Z4(n)).digest(),r=t.slice(0,32),i=t.slice(32);return{key:r,chainCode:i}},$7=({key:n,chainCode:e},t)=>{const r=new ArrayBuffer(4);new DataView(r).setUint32(0,t);const s=new Uint8Array(1+n.length+r.byteLength);s.set(new Uint8Array(1).fill(0)),s.set(n,1),s.set(new Uint8Array(r,0,r.byteLength),n.length+1);const o=$d.create(Hp,e).update(s).digest(),a=o.slice(0,32),c=o.slice(32);return{key:a,chainCode:c}},V7=n=>F7.test(n)?!n.split("/").slice(1).map(iC).some(isNaN):!1,y_=(n,e,t=U7)=>{if(!V7(n))throw new Error("Invalid derivation path");const{key:r,chainCode:i}=L7(e);return n.split("/").slice(1).map(iC).map(o=>parseInt(o,10)).reduce((o,a)=>$7(o,a+t),{key:r,chainCode:i})},z0=32;class sC extends eC{constructor(e){if(super(),typeof e=="string"?this.data=Ld(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==z0)throw new Error(`Invalid public key input. Expected ${z0} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return eh.ED25519}async verify(e,t){let r;if(typeof t=="string"){const i=M7(t);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!J2(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");r=i.signature}else r=t;return uc.sign.detached.verify(e,r,this.toRawBytes())}}sC.SIZE=z0;const b_="m/44'/784'/0'/0'/0'";class Dl extends j7{constructor(e){super(),e?this.keypair=e:this.keypair=uc.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new Dl(uc.sign.keyPair())}static fromSecretKey(e,t){const r=e.length;if(r!==xf)throw new Error(`Wrong secretKey size. Expected ${xf} bytes, got ${r}.`);const i=uc.sign.keyPair.fromSeed(e);if(!t||!t.skipValidation){const o=new TextEncoder().encode("sui validation"),a=uc.sign.detached(o,i.secretKey);if(!uc.sign.detached.verify(o,a,i.publicKey))throw new Error("provided secretKey is invalid")}return new Dl(i)}getPublicKey(){return new sC(this.keypair.publicKey)}getSecretKey(){return D7(this.keypair.secretKey.slice(0,xf),this.getKeyScheme())}async sign(e){return this.signData(e)}signData(e){return uc.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,t){if(t==null&&(t=b_),!w_(t))throw new Error("Invalid derivation path");const{key:r}=y_(t,R7(e));return Dl.fromSecretKey(r)}static deriveKeypairFromSeed(e,t){if(t==null&&(t=b_),!w_(t))throw new Error("Invalid derivation path");const{key:r}=y_(t,e);return Dl.fromSecretKey(r)}}var q7=n=>{if(Object.prototype.toString.call(n)!=="[object Object]")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype};const Ag=q7;var z7=(n,e={})=>{if(!Ag(n)&&!Array.isArray(n))throw new TypeError("Expected a plain object or array");const{deep:t}=e,r=[],i=[],s=a=>{const c=r.indexOf(a);if(c!==-1)return i[c];const l=[];return r.push(a),i.push(l),l.push(...a.map(u=>Array.isArray(u)?s(u):Ag(u)?o(u):u)),l},o=a=>{const c=r.indexOf(a);if(c!==-1)return i[c];const l={},u=Object.keys(a).sort(e.compare);r.push(a),i.push(l);for(const d of u){const h=a[d];let f;t&&Array.isArray(h)?f=s(h):f=t&&Ag(h)?o(h):h,Object.defineProperty(l,d,{...Object.getOwnPropertyDescriptor(a,d),value:f})}return l};return Array.isArray(n)?t?s(n):n.slice():o(n)},W7=Object.prototype.toString,K7=function(e){if(e===void 0)return"undefined";if(e===null)return"null";var t=typeof e;if(t==="boolean")return"boolean";if(t==="string")return"string";if(t==="number")return"number";if(t==="symbol")return"symbol";if(t==="function")return Y7(e)?"generatorfunction":"function";if(Z7(e))return"array";if(eL(e))return"buffer";if(J7(e))return"arguments";if(H7(e))return"date";if(Q7(e))return"error";if(G7(e))return"regexp";switch(oC(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(X7(e))return"generator";switch(t=W7.call(e),t){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")};function oC(n){return typeof n.constructor=="function"?n.constructor.name:null}function Z7(n){return Array.isArray?Array.isArray(n):n instanceof Array}function Q7(n){return n instanceof Error||typeof n.message=="string"&&n.constructor&&typeof n.constructor.stackTraceLimit=="number"}function H7(n){return n instanceof Date?!0:typeof n.toDateString=="function"&&typeof n.getDate=="function"&&typeof n.setDate=="function"}function G7(n){return n instanceof RegExp?!0:typeof n.flags=="string"&&typeof n.ignoreCase=="boolean"&&typeof n.multiline=="boolean"&&typeof n.global=="boolean"}function Y7(n,e){return oC(n)==="GeneratorFunction"}function X7(n){return typeof n.throw=="function"&&typeof n.return=="function"&&typeof n.next=="function"}function J7(n){try{if(typeof n.length=="number"&&typeof n.callee=="function")return!0}catch(e){if(e.message.indexOf("callee")!==-1)return!0}return!1}function eL(n){return n.constructor&&typeof n.constructor.isBuffer=="function"?n.constructor.isBuffer(n):!1}const tL=z7,Wy=K7,__=(n,e)=>!e||Wy(e)!=="array"?!1:e.indexOf(n)>-1,nL=(n,e)=>tL(n,{compare:e}),aC=(n,e)=>{const t=e&&e.compareFunction;return n.slice().sort(t)};function cC(n,e){const t=e&&e.compareFunction,r=nL(n,t);return Object.keys(n).forEach(function(i){const s=r[i],o=Wy(s);if(o==="object"){(!e||!__(i,e.ignoreObjectAtKeys))&&(r[i]=cC(s,e));return}o==="array"&&(!e||!__(i,e.ignoreArrayAtKeys))&&(r[i]=aC(s,e))}),r}const Cd=(n,e)=>{const t=Wy(n);return Cd[t]?Cd[t](n,e):n};Cd.array=aC;Cd.object=cC;var _m=Cd,rL="0x2::sui::SUI";function lC(n,e){return Et(n)===Et(e)}function uC(n,e){return nt(n)===nt(e)}function iL(n){return nt(n).startsWith("0x2::coin::Coin")}async function sL(n,e,t){let r=!0,i;const s=[];for(;r;){const o=await n.getCoins({owner:e,coinType:t,cursor:i});s.push(...o.data),r=o.hasNextPage,i=o.nextCursor}return s}async function oL(n,e,t){return uC(e.coinType,rL)?aL(e,t):cL(n,e,t)}function aL(n,e){const t=new xe,[r]=t.splitCoins(t.gas,[t.pure(n.amount)]);return t.transferObjects([r],t.pure(n.recipient)),t.setSender(e),t}async function cL(n,e,t){const r=await sL(n,t,e.coinType);if(r.length===0)throw new Error("No valid coin found to send");if(r.reduce((c,l)=>c+BigInt(l.balance),0n)<BigInt(e.amount))throw new Error("Not enough balance");const s=new xe,o=s.object(r[0].coinObjectId);r.length>1&&s.mergeCoins(o,r.slice(1).map(c=>s.object(c.coinObjectId)));const[a]=s.splitCoins(o,[s.pure(e.amount)]);return s.transferObjects([a],s.pure(e.recipient)),s.setSender(t),s}async function lL(n,e,t){await uL(n,e,t);const r=new xe;return r.transferObjects([r.object(e.objectId)],r.pure(e.receiver)),r.setSender(t),r}async function uL(n,e,t){var s;const r=await n.getObject({id:e.objectId,options:{showType:!0,showOwner:!0}});if(r.data===void 0)throw new Error("Object not found");if(!((s=r.data)!=null&&s.type))throw new Error("Object type is null");if(!uC(r.data.type,e.objectType))throw new Error("Object type not expected");if(iL(r.data.type))throw new Error("Can not transfer coin object in Object Transfer transactions");const i=dL(r);if(!lC(i,t))throw new Error("Object owner not match")}function dL(n){var t;const e=(t=n.data)==null?void 0:t.owner;if(!e)throw new Error("Object Owner not found");if(typeof e!="object"||!("AddressOwner"in e))throw new Error("Invalid object owner");return e.AddressOwner}var hL="msafe-core",Ee=(n=>(n.Assets="Assets",n.NFT="NFT",n.Account="Account",n.Swap="Swap",n.Staking="Staking",n.Bridge="Bridge",n.Ending="Ending",n.Stream="Stream",n.Other="Other",n))(Ee||{}),Ef={assets:{coin:{send:"SendCoin",receive:"ReceiveCoin"},object:{send:"SendObject",receive:"ReceiveObject"}},account:{creation:"CreateAccount"},others:{plain:"PlainTransaction"},stream:{create:"CreateStream",claim:"Claim",claimByProxy:"ClaimByProxy",setAutoClaim:"SetAutoClaim",cancel:"Cancel"}},W0=ux,fL=dx,pL=Object.create,Ky=Object.defineProperty,mL=Object.defineProperties,gL=Object.getOwnPropertyDescriptor,wL=Object.getOwnPropertyDescriptors,dC=Object.getOwnPropertyNames,v_=Object.getOwnPropertySymbols,yL=Object.getPrototypeOf,hC=Object.prototype.hasOwnProperty,bL=Object.prototype.propertyIsEnumerable,k_=(n,e,t)=>e in n?Ky(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fC=(n,e)=>{for(var t in e||(e={}))hC.call(e,t)&&k_(n,t,e[t]);if(v_)for(var t of v_(e))bL.call(e,t)&&k_(n,t,e[t]);return n},pC=(n,e)=>mL(n,wL(e)),_L=(n=>typeof tl<"u"?tl:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof tl<"u"?tl:e)[t]}):n)(function(n){if(typeof tl<"u")return tl.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),vL=(n,e)=>function(){return e||(0,n[dC(n)[0]])((e={exports:{}}).exports,e),e.exports},kL=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of dC(e))!hC.call(n,i)&&i!==t&&Ky(n,i,{get:()=>e[i],enumerable:!(r=gL(e,i))||r.enumerable});return n},Mu=(n,e,t)=>(t=n!=null?pL(yL(n)):{},kL(!n||!n.__esModule?Ky(t,"default",{value:n,enumerable:!0}):t,n)),on=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())}),Ou=vL({"node_modules/bn.js/lib/bn.js"(n,e){(function(t,r){function i(x,p){if(!x)throw new Error(p||"Assertion failed")}function s(x,p){x.super_=p;var g=function(){};g.prototype=p.prototype,x.prototype=new g,x.prototype.constructor=x}function o(x,p,g){if(o.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((p==="le"||p==="be")&&(g=p,p=10),this._init(x||0,p||10,g||"be"))}typeof t=="object"?t.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=_L("buffer").Buffer}catch{}o.isBN=function(p){return p instanceof o?!0:p!==null&&typeof p=="object"&&p.constructor.wordSize===o.wordSize&&Array.isArray(p.words)},o.max=function(p,g){return p.cmp(g)>0?p:g},o.min=function(p,g){return p.cmp(g)<0?p:g},o.prototype._init=function(p,g,k){if(typeof p=="number")return this._initNumber(p,g,k);if(typeof p=="object")return this._initArray(p,g,k);g==="hex"&&(g=16),i(g===(g|0)&&g>=2&&g<=36),p=p.toString().replace(/\s+/g,"");var T=0;p[0]==="-"&&(T++,this.negative=1),T<p.length&&(g===16?this._parseHex(p,T,k):(this._parseBase(p,g,T),k==="le"&&this._initArray(this.toArray(),g,k)))},o.prototype._initNumber=function(p,g,k){p<0&&(this.negative=1,p=-p),p<67108864?(this.words=[p&67108863],this.length=1):p<4503599627370496?(this.words=[p&67108863,p/67108864&67108863],this.length=2):(i(p<9007199254740992),this.words=[p&67108863,p/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),g,k)},o.prototype._initArray=function(p,g,k){if(i(typeof p.length=="number"),p.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(p.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var O,L,W=0;if(k==="be")for(T=p.length-1,O=0;T>=0;T-=3)L=p[T]|p[T-1]<<8|p[T-2]<<16,this.words[O]|=L<<W&67108863,this.words[O+1]=L>>>26-W&67108863,W+=24,W>=26&&(W-=26,O++);else if(k==="le")for(T=0,O=0;T<p.length;T+=3)L=p[T]|p[T+1]<<8|p[T+2]<<16,this.words[O]|=L<<W&67108863,this.words[O+1]=L>>>26-W&67108863,W+=24,W>=26&&(W-=26,O++);return this._strip()};function c(x,p){var g=x.charCodeAt(p);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;i(!1,"Invalid character in "+x)}function l(x,p,g){var k=c(x,g);return g-1>=p&&(k|=c(x,g-1)<<4),k}o.prototype._parseHex=function(p,g,k){this.length=Math.ceil((p.length-g)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var O=0,L=0,W;if(k==="be")for(T=p.length-1;T>=g;T-=2)W=l(p,g,T)<<O,this.words[L]|=W&67108863,O>=18?(O-=18,L+=1,this.words[L]|=W>>>26):O+=8;else{var P=p.length-g;for(T=P%2===0?g+1:g;T<p.length;T+=2)W=l(p,g,T)<<O,this.words[L]|=W&67108863,O>=18?(O-=18,L+=1,this.words[L]|=W>>>26):O+=8}this._strip()};function u(x,p,g,k){for(var T=0,O=0,L=Math.min(x.length,g),W=p;W<L;W++){var P=x.charCodeAt(W)-48;T*=k,P>=49?O=P-49+10:P>=17?O=P-17+10:O=P,i(P>=0&&O<k,"Invalid character"),T+=O}return T}o.prototype._parseBase=function(p,g,k){this.words=[0],this.length=1;for(var T=0,O=1;O<=67108863;O*=g)T++;T--,O=O/g|0;for(var L=p.length-k,W=L%T,P=Math.min(L,L-W)+k,_=0,F=k;F<P;F+=T)_=u(p,F,F+T,g),this.imuln(O),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(W!==0){var I=1;for(_=u(p,F,p.length,g),F=0;F<W;F++)I*=g;this.imuln(I),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},o.prototype.copy=function(p){p.words=new Array(this.length);for(var g=0;g<this.length;g++)p.words[g]=this.words[g];p.length=this.length,p.negative=this.negative,p.red=this.red};function d(x,p){x.words=p.words,x.length=p.length,x.negative=p.negative,x.red=p.red}if(o.prototype._move=function(p){d(p,this)},o.prototype.clone=function(){var p=new o(null);return this.copy(p),p},o.prototype._expand=function(p){for(;this.length<p;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(p,g){p=p||10,g=g|0||1;var k;if(p===16||p==="hex"){k="";for(var T=0,O=0,L=0;L<this.length;L++){var W=this.words[L],P=((W<<T|O)&16777215).toString(16);O=W>>>24-T&16777215,T+=2,T>=26&&(T-=26,L--),O!==0||L!==this.length-1?k=f[6-P.length]+P+k:k=P+k}for(O!==0&&(k=O.toString(16)+k);k.length%g!==0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(p===(p|0)&&p>=2&&p<=36){var _=m[p],F=w[p];k="";var I=this.clone();for(I.negative=0;!I.isZero();){var z=I.modrn(F).toString(p);I=I.idivn(F),I.isZero()?k=z+k:k=f[_-z.length]+z+k}for(this.isZero()&&(k="0"+k);k.length%g!==0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var p=this.words[0];return this.length===2?p+=this.words[1]*67108864:this.length===3&&this.words[2]===1?p+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-p:p},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(p,g){return this.toArrayLike(a,p,g)}),o.prototype.toArray=function(p,g){return this.toArrayLike(Array,p,g)};var y=function(p,g){return p.allocUnsafe?p.allocUnsafe(g):new p(g)};o.prototype.toArrayLike=function(p,g,k){this._strip();var T=this.byteLength(),O=k||Math.max(1,T);i(T<=O,"byte array longer than desired length"),i(O>0,"Requested array length <= 0");var L=y(p,O),W=g==="le"?"LE":"BE";return this["_toArrayLike"+W](L,T),L},o.prototype._toArrayLikeLE=function(p,g){for(var k=0,T=0,O=0,L=0;O<this.length;O++){var W=this.words[O]<<L|T;p[k++]=W&255,k<p.length&&(p[k++]=W>>8&255),k<p.length&&(p[k++]=W>>16&255),L===6?(k<p.length&&(p[k++]=W>>24&255),T=0,L=0):(T=W>>>24,L+=2)}if(k<p.length)for(p[k++]=T;k<p.length;)p[k++]=0},o.prototype._toArrayLikeBE=function(p,g){for(var k=p.length-1,T=0,O=0,L=0;O<this.length;O++){var W=this.words[O]<<L|T;p[k--]=W&255,k>=0&&(p[k--]=W>>8&255),k>=0&&(p[k--]=W>>16&255),L===6?(k>=0&&(p[k--]=W>>24&255),T=0,L=0):(T=W>>>24,L+=2)}if(k>=0)for(p[k--]=T;k>=0;)p[k--]=0},Math.clz32?o.prototype._countBits=function(p){return 32-Math.clz32(p)}:o.prototype._countBits=function(p){var g=p,k=0;return g>=4096&&(k+=13,g>>>=13),g>=64&&(k+=7,g>>>=7),g>=8&&(k+=4,g>>>=4),g>=2&&(k+=2,g>>>=2),k+g},o.prototype._zeroBits=function(p){if(p===0)return 26;var g=p,k=0;return g&8191||(k+=13,g>>>=13),g&127||(k+=7,g>>>=7),g&15||(k+=4,g>>>=4),g&3||(k+=2,g>>>=2),g&1||k++,k},o.prototype.bitLength=function(){var p=this.words[this.length-1],g=this._countBits(p);return(this.length-1)*26+g};function C(x){for(var p=new Array(x.bitLength()),g=0;g<p.length;g++){var k=g/26|0,T=g%26;p[g]=x.words[k]>>>T&1}return p}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var p=0,g=0;g<this.length;g++){var k=this._zeroBits(this.words[g]);if(p+=k,k!==26)break}return p},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(p){return this.negative!==0?this.abs().inotn(p).iaddn(1):this.clone()},o.prototype.fromTwos=function(p){return this.testn(p-1)?this.notn(p).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(p){for(;this.length<p.length;)this.words[this.length++]=0;for(var g=0;g<p.length;g++)this.words[g]=this.words[g]|p.words[g];return this._strip()},o.prototype.ior=function(p){return i((this.negative|p.negative)===0),this.iuor(p)},o.prototype.or=function(p){return this.length>p.length?this.clone().ior(p):p.clone().ior(this)},o.prototype.uor=function(p){return this.length>p.length?this.clone().iuor(p):p.clone().iuor(this)},o.prototype.iuand=function(p){var g;this.length>p.length?g=p:g=this;for(var k=0;k<g.length;k++)this.words[k]=this.words[k]&p.words[k];return this.length=g.length,this._strip()},o.prototype.iand=function(p){return i((this.negative|p.negative)===0),this.iuand(p)},o.prototype.and=function(p){return this.length>p.length?this.clone().iand(p):p.clone().iand(this)},o.prototype.uand=function(p){return this.length>p.length?this.clone().iuand(p):p.clone().iuand(this)},o.prototype.iuxor=function(p){var g,k;this.length>p.length?(g=this,k=p):(g=p,k=this);for(var T=0;T<k.length;T++)this.words[T]=g.words[T]^k.words[T];if(this!==g)for(;T<g.length;T++)this.words[T]=g.words[T];return this.length=g.length,this._strip()},o.prototype.ixor=function(p){return i((this.negative|p.negative)===0),this.iuxor(p)},o.prototype.xor=function(p){return this.length>p.length?this.clone().ixor(p):p.clone().ixor(this)},o.prototype.uxor=function(p){return this.length>p.length?this.clone().iuxor(p):p.clone().iuxor(this)},o.prototype.inotn=function(p){i(typeof p=="number"&&p>=0);var g=Math.ceil(p/26)|0,k=p%26;this._expand(g),k>0&&g--;for(var T=0;T<g;T++)this.words[T]=~this.words[T]&67108863;return k>0&&(this.words[T]=~this.words[T]&67108863>>26-k),this._strip()},o.prototype.notn=function(p){return this.clone().inotn(p)},o.prototype.setn=function(p,g){i(typeof p=="number"&&p>=0);var k=p/26|0,T=p%26;return this._expand(k+1),g?this.words[k]=this.words[k]|1<<T:this.words[k]=this.words[k]&~(1<<T),this._strip()},o.prototype.iadd=function(p){var g;if(this.negative!==0&&p.negative===0)return this.negative=0,g=this.isub(p),this.negative^=1,this._normSign();if(this.negative===0&&p.negative!==0)return p.negative=0,g=this.isub(p),p.negative=1,g._normSign();var k,T;this.length>p.length?(k=this,T=p):(k=p,T=this);for(var O=0,L=0;L<T.length;L++)g=(k.words[L]|0)+(T.words[L]|0)+O,this.words[L]=g&67108863,O=g>>>26;for(;O!==0&&L<k.length;L++)g=(k.words[L]|0)+O,this.words[L]=g&67108863,O=g>>>26;if(this.length=k.length,O!==0)this.words[this.length]=O,this.length++;else if(k!==this)for(;L<k.length;L++)this.words[L]=k.words[L];return this},o.prototype.add=function(p){var g;return p.negative!==0&&this.negative===0?(p.negative=0,g=this.sub(p),p.negative^=1,g):p.negative===0&&this.negative!==0?(this.negative=0,g=p.sub(this),this.negative=1,g):this.length>p.length?this.clone().iadd(p):p.clone().iadd(this)},o.prototype.isub=function(p){if(p.negative!==0){p.negative=0;var g=this.iadd(p);return p.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(p),this.negative=1,this._normSign();var k=this.cmp(p);if(k===0)return this.negative=0,this.length=1,this.words[0]=0,this;var T,O;k>0?(T=this,O=p):(T=p,O=this);for(var L=0,W=0;W<O.length;W++)g=(T.words[W]|0)-(O.words[W]|0)+L,L=g>>26,this.words[W]=g&67108863;for(;L!==0&&W<T.length;W++)g=(T.words[W]|0)+L,L=g>>26,this.words[W]=g&67108863;if(L===0&&W<T.length&&T!==this)for(;W<T.length;W++)this.words[W]=T.words[W];return this.length=Math.max(this.length,W),T!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(p){return this.clone().isub(p)};function A(x,p,g){g.negative=p.negative^x.negative;var k=x.length+p.length|0;g.length=k,k=k-1|0;var T=x.words[0]|0,O=p.words[0]|0,L=T*O,W=L&67108863,P=L/67108864|0;g.words[0]=W;for(var _=1;_<k;_++){for(var F=P>>>26,I=P&67108863,z=Math.min(_,p.length-1),ie=Math.max(0,_-x.length+1);ie<=z;ie++){var le=_-ie|0;T=x.words[le]|0,O=p.words[ie]|0,L=T*O+I,F+=L/67108864|0,I=L&67108863}g.words[_]=I|0,P=F|0}return P!==0?g.words[_]=P|0:g.length--,g._strip()}var M=function(p,g,k){var T=p.words,O=g.words,L=k.words,W=0,P,_,F,I=T[0]|0,z=I&8191,ie=I>>>13,le=T[1]|0,he=le&8191,_e=le>>>13,Ce=T[2]|0,ge=Ce&8191,Oe=Ce>>>13,Ie=T[3]|0,Ne=Ie&8191,Ut=Ie>>>13,Mr=T[4]|0,Ft=Mr&8191,Ot=Mr>>>13,Or=T[5]|0,Ct=Or&8191,pt=Or>>>13,br=T[6]|0,Nt=br&8191,yt=br>>>13,Kr=T[7]|0,D=Kr&8191,b=Kr>>>13,S=T[8]|0,$=S&8191,te=S>>>13,se=T[9]|0,ce=se&8191,Pe=se>>>13,jt=O[0]|0,Xe=jt&8191,tt=jt>>>13,St=O[1]|0,Gt=St&8191,Yt=St>>>13,Ws=O[2]|0,Xt=Ws&8191,Jt=Ws>>>13,Ks=O[3]|0,en=Ks&8191,tn=Ks>>>13,Zs=O[4]|0,nn=Zs&8191,fn=Zs>>>13,Xa=O[5]|0,pn=Xa&8191,mn=Xa>>>13,Ja=O[6]|0,gn=Ja&8191,wn=Ja>>>13,ec=O[7]|0,yn=ec&8191,bn=ec>>>13,tc=O[8]|0,_n=tc&8191,vn=tc>>>13,nc=O[9]|0,kn=nc&8191,Sn=nc>>>13;k.negative=p.negative^g.negative,k.length=19,P=Math.imul(z,Xe),_=Math.imul(z,tt),_=_+Math.imul(ie,Xe)|0,F=Math.imul(ie,tt);var Jo=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Jo>>>26)|0,Jo&=67108863,P=Math.imul(he,Xe),_=Math.imul(he,tt),_=_+Math.imul(_e,Xe)|0,F=Math.imul(_e,tt),P=P+Math.imul(z,Gt)|0,_=_+Math.imul(z,Yt)|0,_=_+Math.imul(ie,Gt)|0,F=F+Math.imul(ie,Yt)|0;var ea=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(ea>>>26)|0,ea&=67108863,P=Math.imul(ge,Xe),_=Math.imul(ge,tt),_=_+Math.imul(Oe,Xe)|0,F=Math.imul(Oe,tt),P=P+Math.imul(he,Gt)|0,_=_+Math.imul(he,Yt)|0,_=_+Math.imul(_e,Gt)|0,F=F+Math.imul(_e,Yt)|0,P=P+Math.imul(z,Xt)|0,_=_+Math.imul(z,Jt)|0,_=_+Math.imul(ie,Xt)|0,F=F+Math.imul(ie,Jt)|0;var ta=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(ta>>>26)|0,ta&=67108863,P=Math.imul(Ne,Xe),_=Math.imul(Ne,tt),_=_+Math.imul(Ut,Xe)|0,F=Math.imul(Ut,tt),P=P+Math.imul(ge,Gt)|0,_=_+Math.imul(ge,Yt)|0,_=_+Math.imul(Oe,Gt)|0,F=F+Math.imul(Oe,Yt)|0,P=P+Math.imul(he,Xt)|0,_=_+Math.imul(he,Jt)|0,_=_+Math.imul(_e,Xt)|0,F=F+Math.imul(_e,Jt)|0,P=P+Math.imul(z,en)|0,_=_+Math.imul(z,tn)|0,_=_+Math.imul(ie,en)|0,F=F+Math.imul(ie,tn)|0;var na=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(na>>>26)|0,na&=67108863,P=Math.imul(Ft,Xe),_=Math.imul(Ft,tt),_=_+Math.imul(Ot,Xe)|0,F=Math.imul(Ot,tt),P=P+Math.imul(Ne,Gt)|0,_=_+Math.imul(Ne,Yt)|0,_=_+Math.imul(Ut,Gt)|0,F=F+Math.imul(Ut,Yt)|0,P=P+Math.imul(ge,Xt)|0,_=_+Math.imul(ge,Jt)|0,_=_+Math.imul(Oe,Xt)|0,F=F+Math.imul(Oe,Jt)|0,P=P+Math.imul(he,en)|0,_=_+Math.imul(he,tn)|0,_=_+Math.imul(_e,en)|0,F=F+Math.imul(_e,tn)|0,P=P+Math.imul(z,nn)|0,_=_+Math.imul(z,fn)|0,_=_+Math.imul(ie,nn)|0,F=F+Math.imul(ie,fn)|0;var Lm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Lm>>>26)|0,Lm&=67108863,P=Math.imul(Ct,Xe),_=Math.imul(Ct,tt),_=_+Math.imul(pt,Xe)|0,F=Math.imul(pt,tt),P=P+Math.imul(Ft,Gt)|0,_=_+Math.imul(Ft,Yt)|0,_=_+Math.imul(Ot,Gt)|0,F=F+Math.imul(Ot,Yt)|0,P=P+Math.imul(Ne,Xt)|0,_=_+Math.imul(Ne,Jt)|0,_=_+Math.imul(Ut,Xt)|0,F=F+Math.imul(Ut,Jt)|0,P=P+Math.imul(ge,en)|0,_=_+Math.imul(ge,tn)|0,_=_+Math.imul(Oe,en)|0,F=F+Math.imul(Oe,tn)|0,P=P+Math.imul(he,nn)|0,_=_+Math.imul(he,fn)|0,_=_+Math.imul(_e,nn)|0,F=F+Math.imul(_e,fn)|0,P=P+Math.imul(z,pn)|0,_=_+Math.imul(z,mn)|0,_=_+Math.imul(ie,pn)|0,F=F+Math.imul(ie,mn)|0;var $m=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+($m>>>26)|0,$m&=67108863,P=Math.imul(Nt,Xe),_=Math.imul(Nt,tt),_=_+Math.imul(yt,Xe)|0,F=Math.imul(yt,tt),P=P+Math.imul(Ct,Gt)|0,_=_+Math.imul(Ct,Yt)|0,_=_+Math.imul(pt,Gt)|0,F=F+Math.imul(pt,Yt)|0,P=P+Math.imul(Ft,Xt)|0,_=_+Math.imul(Ft,Jt)|0,_=_+Math.imul(Ot,Xt)|0,F=F+Math.imul(Ot,Jt)|0,P=P+Math.imul(Ne,en)|0,_=_+Math.imul(Ne,tn)|0,_=_+Math.imul(Ut,en)|0,F=F+Math.imul(Ut,tn)|0,P=P+Math.imul(ge,nn)|0,_=_+Math.imul(ge,fn)|0,_=_+Math.imul(Oe,nn)|0,F=F+Math.imul(Oe,fn)|0,P=P+Math.imul(he,pn)|0,_=_+Math.imul(he,mn)|0,_=_+Math.imul(_e,pn)|0,F=F+Math.imul(_e,mn)|0,P=P+Math.imul(z,gn)|0,_=_+Math.imul(z,wn)|0,_=_+Math.imul(ie,gn)|0,F=F+Math.imul(ie,wn)|0;var Vm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Vm>>>26)|0,Vm&=67108863,P=Math.imul(D,Xe),_=Math.imul(D,tt),_=_+Math.imul(b,Xe)|0,F=Math.imul(b,tt),P=P+Math.imul(Nt,Gt)|0,_=_+Math.imul(Nt,Yt)|0,_=_+Math.imul(yt,Gt)|0,F=F+Math.imul(yt,Yt)|0,P=P+Math.imul(Ct,Xt)|0,_=_+Math.imul(Ct,Jt)|0,_=_+Math.imul(pt,Xt)|0,F=F+Math.imul(pt,Jt)|0,P=P+Math.imul(Ft,en)|0,_=_+Math.imul(Ft,tn)|0,_=_+Math.imul(Ot,en)|0,F=F+Math.imul(Ot,tn)|0,P=P+Math.imul(Ne,nn)|0,_=_+Math.imul(Ne,fn)|0,_=_+Math.imul(Ut,nn)|0,F=F+Math.imul(Ut,fn)|0,P=P+Math.imul(ge,pn)|0,_=_+Math.imul(ge,mn)|0,_=_+Math.imul(Oe,pn)|0,F=F+Math.imul(Oe,mn)|0,P=P+Math.imul(he,gn)|0,_=_+Math.imul(he,wn)|0,_=_+Math.imul(_e,gn)|0,F=F+Math.imul(_e,wn)|0,P=P+Math.imul(z,yn)|0,_=_+Math.imul(z,bn)|0,_=_+Math.imul(ie,yn)|0,F=F+Math.imul(ie,bn)|0;var qm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(qm>>>26)|0,qm&=67108863,P=Math.imul($,Xe),_=Math.imul($,tt),_=_+Math.imul(te,Xe)|0,F=Math.imul(te,tt),P=P+Math.imul(D,Gt)|0,_=_+Math.imul(D,Yt)|0,_=_+Math.imul(b,Gt)|0,F=F+Math.imul(b,Yt)|0,P=P+Math.imul(Nt,Xt)|0,_=_+Math.imul(Nt,Jt)|0,_=_+Math.imul(yt,Xt)|0,F=F+Math.imul(yt,Jt)|0,P=P+Math.imul(Ct,en)|0,_=_+Math.imul(Ct,tn)|0,_=_+Math.imul(pt,en)|0,F=F+Math.imul(pt,tn)|0,P=P+Math.imul(Ft,nn)|0,_=_+Math.imul(Ft,fn)|0,_=_+Math.imul(Ot,nn)|0,F=F+Math.imul(Ot,fn)|0,P=P+Math.imul(Ne,pn)|0,_=_+Math.imul(Ne,mn)|0,_=_+Math.imul(Ut,pn)|0,F=F+Math.imul(Ut,mn)|0,P=P+Math.imul(ge,gn)|0,_=_+Math.imul(ge,wn)|0,_=_+Math.imul(Oe,gn)|0,F=F+Math.imul(Oe,wn)|0,P=P+Math.imul(he,yn)|0,_=_+Math.imul(he,bn)|0,_=_+Math.imul(_e,yn)|0,F=F+Math.imul(_e,bn)|0,P=P+Math.imul(z,_n)|0,_=_+Math.imul(z,vn)|0,_=_+Math.imul(ie,_n)|0,F=F+Math.imul(ie,vn)|0;var zm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(zm>>>26)|0,zm&=67108863,P=Math.imul(ce,Xe),_=Math.imul(ce,tt),_=_+Math.imul(Pe,Xe)|0,F=Math.imul(Pe,tt),P=P+Math.imul($,Gt)|0,_=_+Math.imul($,Yt)|0,_=_+Math.imul(te,Gt)|0,F=F+Math.imul(te,Yt)|0,P=P+Math.imul(D,Xt)|0,_=_+Math.imul(D,Jt)|0,_=_+Math.imul(b,Xt)|0,F=F+Math.imul(b,Jt)|0,P=P+Math.imul(Nt,en)|0,_=_+Math.imul(Nt,tn)|0,_=_+Math.imul(yt,en)|0,F=F+Math.imul(yt,tn)|0,P=P+Math.imul(Ct,nn)|0,_=_+Math.imul(Ct,fn)|0,_=_+Math.imul(pt,nn)|0,F=F+Math.imul(pt,fn)|0,P=P+Math.imul(Ft,pn)|0,_=_+Math.imul(Ft,mn)|0,_=_+Math.imul(Ot,pn)|0,F=F+Math.imul(Ot,mn)|0,P=P+Math.imul(Ne,gn)|0,_=_+Math.imul(Ne,wn)|0,_=_+Math.imul(Ut,gn)|0,F=F+Math.imul(Ut,wn)|0,P=P+Math.imul(ge,yn)|0,_=_+Math.imul(ge,bn)|0,_=_+Math.imul(Oe,yn)|0,F=F+Math.imul(Oe,bn)|0,P=P+Math.imul(he,_n)|0,_=_+Math.imul(he,vn)|0,_=_+Math.imul(_e,_n)|0,F=F+Math.imul(_e,vn)|0,P=P+Math.imul(z,kn)|0,_=_+Math.imul(z,Sn)|0,_=_+Math.imul(ie,kn)|0,F=F+Math.imul(ie,Sn)|0;var Wm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Wm>>>26)|0,Wm&=67108863,P=Math.imul(ce,Gt),_=Math.imul(ce,Yt),_=_+Math.imul(Pe,Gt)|0,F=Math.imul(Pe,Yt),P=P+Math.imul($,Xt)|0,_=_+Math.imul($,Jt)|0,_=_+Math.imul(te,Xt)|0,F=F+Math.imul(te,Jt)|0,P=P+Math.imul(D,en)|0,_=_+Math.imul(D,tn)|0,_=_+Math.imul(b,en)|0,F=F+Math.imul(b,tn)|0,P=P+Math.imul(Nt,nn)|0,_=_+Math.imul(Nt,fn)|0,_=_+Math.imul(yt,nn)|0,F=F+Math.imul(yt,fn)|0,P=P+Math.imul(Ct,pn)|0,_=_+Math.imul(Ct,mn)|0,_=_+Math.imul(pt,pn)|0,F=F+Math.imul(pt,mn)|0,P=P+Math.imul(Ft,gn)|0,_=_+Math.imul(Ft,wn)|0,_=_+Math.imul(Ot,gn)|0,F=F+Math.imul(Ot,wn)|0,P=P+Math.imul(Ne,yn)|0,_=_+Math.imul(Ne,bn)|0,_=_+Math.imul(Ut,yn)|0,F=F+Math.imul(Ut,bn)|0,P=P+Math.imul(ge,_n)|0,_=_+Math.imul(ge,vn)|0,_=_+Math.imul(Oe,_n)|0,F=F+Math.imul(Oe,vn)|0,P=P+Math.imul(he,kn)|0,_=_+Math.imul(he,Sn)|0,_=_+Math.imul(_e,kn)|0,F=F+Math.imul(_e,Sn)|0;var Km=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Km>>>26)|0,Km&=67108863,P=Math.imul(ce,Xt),_=Math.imul(ce,Jt),_=_+Math.imul(Pe,Xt)|0,F=Math.imul(Pe,Jt),P=P+Math.imul($,en)|0,_=_+Math.imul($,tn)|0,_=_+Math.imul(te,en)|0,F=F+Math.imul(te,tn)|0,P=P+Math.imul(D,nn)|0,_=_+Math.imul(D,fn)|0,_=_+Math.imul(b,nn)|0,F=F+Math.imul(b,fn)|0,P=P+Math.imul(Nt,pn)|0,_=_+Math.imul(Nt,mn)|0,_=_+Math.imul(yt,pn)|0,F=F+Math.imul(yt,mn)|0,P=P+Math.imul(Ct,gn)|0,_=_+Math.imul(Ct,wn)|0,_=_+Math.imul(pt,gn)|0,F=F+Math.imul(pt,wn)|0,P=P+Math.imul(Ft,yn)|0,_=_+Math.imul(Ft,bn)|0,_=_+Math.imul(Ot,yn)|0,F=F+Math.imul(Ot,bn)|0,P=P+Math.imul(Ne,_n)|0,_=_+Math.imul(Ne,vn)|0,_=_+Math.imul(Ut,_n)|0,F=F+Math.imul(Ut,vn)|0,P=P+Math.imul(ge,kn)|0,_=_+Math.imul(ge,Sn)|0,_=_+Math.imul(Oe,kn)|0,F=F+Math.imul(Oe,Sn)|0;var Zm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Zm>>>26)|0,Zm&=67108863,P=Math.imul(ce,en),_=Math.imul(ce,tn),_=_+Math.imul(Pe,en)|0,F=Math.imul(Pe,tn),P=P+Math.imul($,nn)|0,_=_+Math.imul($,fn)|0,_=_+Math.imul(te,nn)|0,F=F+Math.imul(te,fn)|0,P=P+Math.imul(D,pn)|0,_=_+Math.imul(D,mn)|0,_=_+Math.imul(b,pn)|0,F=F+Math.imul(b,mn)|0,P=P+Math.imul(Nt,gn)|0,_=_+Math.imul(Nt,wn)|0,_=_+Math.imul(yt,gn)|0,F=F+Math.imul(yt,wn)|0,P=P+Math.imul(Ct,yn)|0,_=_+Math.imul(Ct,bn)|0,_=_+Math.imul(pt,yn)|0,F=F+Math.imul(pt,bn)|0,P=P+Math.imul(Ft,_n)|0,_=_+Math.imul(Ft,vn)|0,_=_+Math.imul(Ot,_n)|0,F=F+Math.imul(Ot,vn)|0,P=P+Math.imul(Ne,kn)|0,_=_+Math.imul(Ne,Sn)|0,_=_+Math.imul(Ut,kn)|0,F=F+Math.imul(Ut,Sn)|0;var Qm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Qm>>>26)|0,Qm&=67108863,P=Math.imul(ce,nn),_=Math.imul(ce,fn),_=_+Math.imul(Pe,nn)|0,F=Math.imul(Pe,fn),P=P+Math.imul($,pn)|0,_=_+Math.imul($,mn)|0,_=_+Math.imul(te,pn)|0,F=F+Math.imul(te,mn)|0,P=P+Math.imul(D,gn)|0,_=_+Math.imul(D,wn)|0,_=_+Math.imul(b,gn)|0,F=F+Math.imul(b,wn)|0,P=P+Math.imul(Nt,yn)|0,_=_+Math.imul(Nt,bn)|0,_=_+Math.imul(yt,yn)|0,F=F+Math.imul(yt,bn)|0,P=P+Math.imul(Ct,_n)|0,_=_+Math.imul(Ct,vn)|0,_=_+Math.imul(pt,_n)|0,F=F+Math.imul(pt,vn)|0,P=P+Math.imul(Ft,kn)|0,_=_+Math.imul(Ft,Sn)|0,_=_+Math.imul(Ot,kn)|0,F=F+Math.imul(Ot,Sn)|0;var Hm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Hm>>>26)|0,Hm&=67108863,P=Math.imul(ce,pn),_=Math.imul(ce,mn),_=_+Math.imul(Pe,pn)|0,F=Math.imul(Pe,mn),P=P+Math.imul($,gn)|0,_=_+Math.imul($,wn)|0,_=_+Math.imul(te,gn)|0,F=F+Math.imul(te,wn)|0,P=P+Math.imul(D,yn)|0,_=_+Math.imul(D,bn)|0,_=_+Math.imul(b,yn)|0,F=F+Math.imul(b,bn)|0,P=P+Math.imul(Nt,_n)|0,_=_+Math.imul(Nt,vn)|0,_=_+Math.imul(yt,_n)|0,F=F+Math.imul(yt,vn)|0,P=P+Math.imul(Ct,kn)|0,_=_+Math.imul(Ct,Sn)|0,_=_+Math.imul(pt,kn)|0,F=F+Math.imul(pt,Sn)|0;var Gm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Gm>>>26)|0,Gm&=67108863,P=Math.imul(ce,gn),_=Math.imul(ce,wn),_=_+Math.imul(Pe,gn)|0,F=Math.imul(Pe,wn),P=P+Math.imul($,yn)|0,_=_+Math.imul($,bn)|0,_=_+Math.imul(te,yn)|0,F=F+Math.imul(te,bn)|0,P=P+Math.imul(D,_n)|0,_=_+Math.imul(D,vn)|0,_=_+Math.imul(b,_n)|0,F=F+Math.imul(b,vn)|0,P=P+Math.imul(Nt,kn)|0,_=_+Math.imul(Nt,Sn)|0,_=_+Math.imul(yt,kn)|0,F=F+Math.imul(yt,Sn)|0;var Ym=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Ym>>>26)|0,Ym&=67108863,P=Math.imul(ce,yn),_=Math.imul(ce,bn),_=_+Math.imul(Pe,yn)|0,F=Math.imul(Pe,bn),P=P+Math.imul($,_n)|0,_=_+Math.imul($,vn)|0,_=_+Math.imul(te,_n)|0,F=F+Math.imul(te,vn)|0,P=P+Math.imul(D,kn)|0,_=_+Math.imul(D,Sn)|0,_=_+Math.imul(b,kn)|0,F=F+Math.imul(b,Sn)|0;var Xm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Xm>>>26)|0,Xm&=67108863,P=Math.imul(ce,_n),_=Math.imul(ce,vn),_=_+Math.imul(Pe,_n)|0,F=Math.imul(Pe,vn),P=P+Math.imul($,kn)|0,_=_+Math.imul($,Sn)|0,_=_+Math.imul(te,kn)|0,F=F+Math.imul(te,Sn)|0;var Jm=(W+P|0)+((_&8191)<<13)|0;W=(F+(_>>>13)|0)+(Jm>>>26)|0,Jm&=67108863,P=Math.imul(ce,kn),_=Math.imul(ce,Sn),_=_+Math.imul(Pe,kn)|0,F=Math.imul(Pe,Sn);var eg=(W+P|0)+((_&8191)<<13)|0;return W=(F+(_>>>13)|0)+(eg>>>26)|0,eg&=67108863,L[0]=Jo,L[1]=ea,L[2]=ta,L[3]=na,L[4]=Lm,L[5]=$m,L[6]=Vm,L[7]=qm,L[8]=zm,L[9]=Wm,L[10]=Km,L[11]=Zm,L[12]=Qm,L[13]=Hm,L[14]=Gm,L[15]=Ym,L[16]=Xm,L[17]=Jm,L[18]=eg,W!==0&&(L[19]=W,k.length++),k};Math.imul||(M=A);function H(x,p,g){g.negative=p.negative^x.negative,g.length=x.length+p.length;for(var k=0,T=0,O=0;O<g.length-1;O++){var L=T;T=0;for(var W=k&67108863,P=Math.min(O,p.length-1),_=Math.max(0,O-x.length+1);_<=P;_++){var F=O-_,I=x.words[F]|0,z=p.words[_]|0,ie=I*z,le=ie&67108863;L=L+(ie/67108864|0)|0,le=le+W|0,W=le&67108863,L=L+(le>>>26)|0,T+=L>>>26,L&=67108863}g.words[O]=W,k=L,L=T}return k!==0?g.words[O]=k:g.length--,g._strip()}function G(x,p,g){return H(x,p,g)}o.prototype.mulTo=function(p,g){var k,T=this.length+p.length;return this.length===10&&p.length===10?k=M(this,p,g):T<63?k=A(this,p,g):T<1024?k=H(this,p,g):k=G(this,p,g),k},o.prototype.mul=function(p){var g=new o(null);return g.words=new Array(this.length+p.length),this.mulTo(p,g)},o.prototype.mulf=function(p){var g=new o(null);return g.words=new Array(this.length+p.length),G(this,p,g)},o.prototype.imul=function(p){return this.clone().mulTo(p,this)},o.prototype.imuln=function(p){var g=p<0;g&&(p=-p),i(typeof p=="number"),i(p<67108864);for(var k=0,T=0;T<this.length;T++){var O=(this.words[T]|0)*p,L=(O&67108863)+(k&67108863);k>>=26,k+=O/67108864|0,k+=L>>>26,this.words[T]=L&67108863}return k!==0&&(this.words[T]=k,this.length++),g?this.ineg():this},o.prototype.muln=function(p){return this.clone().imuln(p)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(p){var g=C(p);if(g.length===0)return new o(1);for(var k=this,T=0;T<g.length&&g[T]===0;T++,k=k.sqr());if(++T<g.length)for(var O=k.sqr();T<g.length;T++,O=O.sqr())g[T]!==0&&(k=k.mul(O));return k},o.prototype.iushln=function(p){i(typeof p=="number"&&p>=0);var g=p%26,k=(p-g)/26,T=67108863>>>26-g<<26-g,O;if(g!==0){var L=0;for(O=0;O<this.length;O++){var W=this.words[O]&T,P=(this.words[O]|0)-W<<g;this.words[O]=P|L,L=W>>>26-g}L&&(this.words[O]=L,this.length++)}if(k!==0){for(O=this.length-1;O>=0;O--)this.words[O+k]=this.words[O];for(O=0;O<k;O++)this.words[O]=0;this.length+=k}return this._strip()},o.prototype.ishln=function(p){return i(this.negative===0),this.iushln(p)},o.prototype.iushrn=function(p,g,k){i(typeof p=="number"&&p>=0);var T;g?T=(g-g%26)/26:T=0;var O=p%26,L=Math.min((p-O)/26,this.length),W=67108863^67108863>>>O<<O,P=k;if(T-=L,T=Math.max(0,T),P){for(var _=0;_<L;_++)P.words[_]=this.words[_];P.length=L}if(L!==0)if(this.length>L)for(this.length-=L,_=0;_<this.length;_++)this.words[_]=this.words[_+L];else this.words[0]=0,this.length=1;var F=0;for(_=this.length-1;_>=0&&(F!==0||_>=T);_--){var I=this.words[_]|0;this.words[_]=F<<26-O|I>>>O,F=I&W}return P&&F!==0&&(P.words[P.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(p,g,k){return i(this.negative===0),this.iushrn(p,g,k)},o.prototype.shln=function(p){return this.clone().ishln(p)},o.prototype.ushln=function(p){return this.clone().iushln(p)},o.prototype.shrn=function(p){return this.clone().ishrn(p)},o.prototype.ushrn=function(p){return this.clone().iushrn(p)},o.prototype.testn=function(p){i(typeof p=="number"&&p>=0);var g=p%26,k=(p-g)/26,T=1<<g;if(this.length<=k)return!1;var O=this.words[k];return!!(O&T)},o.prototype.imaskn=function(p){i(typeof p=="number"&&p>=0);var g=p%26,k=(p-g)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(g!==0&&k++,this.length=Math.min(k,this.length),g!==0){var T=67108863^67108863>>>g<<g;this.words[this.length-1]&=T}return this._strip()},o.prototype.maskn=function(p){return this.clone().imaskn(p)},o.prototype.iaddn=function(p){return i(typeof p=="number"),i(p<67108864),p<0?this.isubn(-p):this.negative!==0?this.length===1&&(this.words[0]|0)<=p?(this.words[0]=p-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(p),this.negative=1,this):this._iaddn(p)},o.prototype._iaddn=function(p){this.words[0]+=p;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},o.prototype.isubn=function(p){if(i(typeof p=="number"),i(p<67108864),p<0)return this.iaddn(-p);if(this.negative!==0)return this.negative=0,this.iaddn(p),this.negative=1,this;if(this.words[0]-=p,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},o.prototype.addn=function(p){return this.clone().iaddn(p)},o.prototype.subn=function(p){return this.clone().isubn(p)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(p,g,k){var T=p.length+k,O;this._expand(T);var L,W=0;for(O=0;O<p.length;O++){L=(this.words[O+k]|0)+W;var P=(p.words[O]|0)*g;L-=P&67108863,W=(L>>26)-(P/67108864|0),this.words[O+k]=L&67108863}for(;O<this.length-k;O++)L=(this.words[O+k]|0)+W,W=L>>26,this.words[O+k]=L&67108863;if(W===0)return this._strip();for(i(W===-1),W=0,O=0;O<this.length;O++)L=-(this.words[O]|0)+W,W=L>>26,this.words[O]=L&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(p,g){var k=this.length-p.length,T=this.clone(),O=p,L=O.words[O.length-1]|0,W=this._countBits(L);k=26-W,k!==0&&(O=O.ushln(k),T.iushln(k),L=O.words[O.length-1]|0);var P=T.length-O.length,_;if(g!=="mod"){_=new o(null),_.length=P+1,_.words=new Array(_.length);for(var F=0;F<_.length;F++)_.words[F]=0}var I=T.clone()._ishlnsubmul(O,1,P);I.negative===0&&(T=I,_&&(_.words[P]=1));for(var z=P-1;z>=0;z--){var ie=(T.words[O.length+z]|0)*67108864+(T.words[O.length+z-1]|0);for(ie=Math.min(ie/L|0,67108863),T._ishlnsubmul(O,ie,z);T.negative!==0;)ie--,T.negative=0,T._ishlnsubmul(O,1,z),T.isZero()||(T.negative^=1);_&&(_.words[z]=ie)}return _&&_._strip(),T._strip(),g!=="div"&&k!==0&&T.iushrn(k),{div:_||null,mod:T}},o.prototype.divmod=function(p,g,k){if(i(!p.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var T,O,L;return this.negative!==0&&p.negative===0?(L=this.neg().divmod(p,g),g!=="mod"&&(T=L.div.neg()),g!=="div"&&(O=L.mod.neg(),k&&O.negative!==0&&O.iadd(p)),{div:T,mod:O}):this.negative===0&&p.negative!==0?(L=this.divmod(p.neg(),g),g!=="mod"&&(T=L.div.neg()),{div:T,mod:L.mod}):this.negative&p.negative?(L=this.neg().divmod(p.neg(),g),g!=="div"&&(O=L.mod.neg(),k&&O.negative!==0&&O.isub(p)),{div:L.div,mod:O}):p.length>this.length||this.cmp(p)<0?{div:new o(0),mod:this}:p.length===1?g==="div"?{div:this.divn(p.words[0]),mod:null}:g==="mod"?{div:null,mod:new o(this.modrn(p.words[0]))}:{div:this.divn(p.words[0]),mod:new o(this.modrn(p.words[0]))}:this._wordDiv(p,g)},o.prototype.div=function(p){return this.divmod(p,"div",!1).div},o.prototype.mod=function(p){return this.divmod(p,"mod",!1).mod},o.prototype.umod=function(p){return this.divmod(p,"mod",!0).mod},o.prototype.divRound=function(p){var g=this.divmod(p);if(g.mod.isZero())return g.div;var k=g.div.negative!==0?g.mod.isub(p):g.mod,T=p.ushrn(1),O=p.andln(1),L=k.cmp(T);return L<0||O===1&&L===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},o.prototype.modrn=function(p){var g=p<0;g&&(p=-p),i(p<=67108863);for(var k=(1<<26)%p,T=0,O=this.length-1;O>=0;O--)T=(k*T+(this.words[O]|0))%p;return g?-T:T},o.prototype.modn=function(p){return this.modrn(p)},o.prototype.idivn=function(p){var g=p<0;g&&(p=-p),i(p<=67108863);for(var k=0,T=this.length-1;T>=0;T--){var O=(this.words[T]|0)+k*67108864;this.words[T]=O/p|0,k=O%p}return this._strip(),g?this.ineg():this},o.prototype.divn=function(p){return this.clone().idivn(p)},o.prototype.egcd=function(p){i(p.negative===0),i(!p.isZero());var g=this,k=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var T=new o(1),O=new o(0),L=new o(0),W=new o(1),P=0;g.isEven()&&k.isEven();)g.iushrn(1),k.iushrn(1),++P;for(var _=k.clone(),F=g.clone();!g.isZero();){for(var I=0,z=1;!(g.words[0]&z)&&I<26;++I,z<<=1);if(I>0)for(g.iushrn(I);I-- >0;)(T.isOdd()||O.isOdd())&&(T.iadd(_),O.isub(F)),T.iushrn(1),O.iushrn(1);for(var ie=0,le=1;!(k.words[0]&le)&&ie<26;++ie,le<<=1);if(ie>0)for(k.iushrn(ie);ie-- >0;)(L.isOdd()||W.isOdd())&&(L.iadd(_),W.isub(F)),L.iushrn(1),W.iushrn(1);g.cmp(k)>=0?(g.isub(k),T.isub(L),O.isub(W)):(k.isub(g),L.isub(T),W.isub(O))}return{a:L,b:W,gcd:k.iushln(P)}},o.prototype._invmp=function(p){i(p.negative===0),i(!p.isZero());var g=this,k=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var T=new o(1),O=new o(0),L=k.clone();g.cmpn(1)>0&&k.cmpn(1)>0;){for(var W=0,P=1;!(g.words[0]&P)&&W<26;++W,P<<=1);if(W>0)for(g.iushrn(W);W-- >0;)T.isOdd()&&T.iadd(L),T.iushrn(1);for(var _=0,F=1;!(k.words[0]&F)&&_<26;++_,F<<=1);if(_>0)for(k.iushrn(_);_-- >0;)O.isOdd()&&O.iadd(L),O.iushrn(1);g.cmp(k)>=0?(g.isub(k),T.isub(O)):(k.isub(g),O.isub(T))}var I;return g.cmpn(1)===0?I=T:I=O,I.cmpn(0)<0&&I.iadd(p),I},o.prototype.gcd=function(p){if(this.isZero())return p.abs();if(p.isZero())return this.abs();var g=this.clone(),k=p.clone();g.negative=0,k.negative=0;for(var T=0;g.isEven()&&k.isEven();T++)g.iushrn(1),k.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;k.isEven();)k.iushrn(1);var O=g.cmp(k);if(O<0){var L=g;g=k,k=L}else if(O===0||k.cmpn(1)===0)break;g.isub(k)}while(!0);return k.iushln(T)},o.prototype.invm=function(p){return this.egcd(p).a.umod(p)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(p){return this.words[0]&p},o.prototype.bincn=function(p){i(typeof p=="number");var g=p%26,k=(p-g)/26,T=1<<g;if(this.length<=k)return this._expand(k+1),this.words[k]|=T,this;for(var O=T,L=k;O!==0&&L<this.length;L++){var W=this.words[L]|0;W+=O,O=W>>>26,W&=67108863,this.words[L]=W}return O!==0&&(this.words[L]=O,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(p){var g=p<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var k;if(this.length>1)k=1;else{g&&(p=-p),i(p<=67108863,"Number is too big");var T=this.words[0]|0;k=T===p?0:T<p?-1:1}return this.negative!==0?-k|0:k},o.prototype.cmp=function(p){if(this.negative!==0&&p.negative===0)return-1;if(this.negative===0&&p.negative!==0)return 1;var g=this.ucmp(p);return this.negative!==0?-g|0:g},o.prototype.ucmp=function(p){if(this.length>p.length)return 1;if(this.length<p.length)return-1;for(var g=0,k=this.length-1;k>=0;k--){var T=this.words[k]|0,O=p.words[k]|0;if(T!==O){T<O?g=-1:T>O&&(g=1);break}}return g},o.prototype.gtn=function(p){return this.cmpn(p)===1},o.prototype.gt=function(p){return this.cmp(p)===1},o.prototype.gten=function(p){return this.cmpn(p)>=0},o.prototype.gte=function(p){return this.cmp(p)>=0},o.prototype.ltn=function(p){return this.cmpn(p)===-1},o.prototype.lt=function(p){return this.cmp(p)===-1},o.prototype.lten=function(p){return this.cmpn(p)<=0},o.prototype.lte=function(p){return this.cmp(p)<=0},o.prototype.eqn=function(p){return this.cmpn(p)===0},o.prototype.eq=function(p){return this.cmp(p)===0},o.red=function(p){return new U(p)},o.prototype.toRed=function(p){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),p.convertTo(this)._forceRed(p)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(p){return this.red=p,this},o.prototype.forceRed=function(p){return i(!this.red,"Already a number in reduction context"),this._forceRed(p)},o.prototype.redAdd=function(p){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,p)},o.prototype.redIAdd=function(p){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,p)},o.prototype.redSub=function(p){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,p)},o.prototype.redISub=function(p){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,p)},o.prototype.redShl=function(p){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,p)},o.prototype.redMul=function(p){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.mul(this,p)},o.prototype.redIMul=function(p){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.imul(this,p)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(p){return i(this.red&&!p.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,p)};var q={k256:null,p224:null,p192:null,p25519:null};function X(x,p){this.name=x,this.p=new o(p,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var p=new o(null);return p.words=new Array(Math.ceil(this.n/13)),p},X.prototype.ireduce=function(p){var g=p,k;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),k=g.bitLength();while(k>this.n);var T=k<this.n?-1:g.ucmp(this.p);return T===0?(g.words[0]=0,g.length=1):T>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},X.prototype.split=function(p,g){p.iushrn(this.n,0,g)},X.prototype.imulK=function(p){return p.imul(this.k)};function E(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(E,X),E.prototype.split=function(p,g){for(var k=4194303,T=Math.min(p.length,9),O=0;O<T;O++)g.words[O]=p.words[O];if(g.length=T,p.length<=9){p.words[0]=0,p.length=1;return}var L=p.words[9];for(g.words[g.length++]=L&k,O=10;O<p.length;O++){var W=p.words[O]|0;p.words[O-10]=(W&k)<<4|L>>>22,L=W}L>>>=22,p.words[O-10]=L,L===0&&p.length>10?p.length-=10:p.length-=9},E.prototype.imulK=function(p){p.words[p.length]=0,p.words[p.length+1]=0,p.length+=2;for(var g=0,k=0;k<p.length;k++){var T=p.words[k]|0;g+=T*977,p.words[k]=g&67108863,g=T*64+(g/67108864|0)}return p.words[p.length-1]===0&&(p.length--,p.words[p.length-1]===0&&p.length--),p};function j(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(j,X);function R(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(R,X);function V(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(V,X),V.prototype.imulK=function(p){for(var g=0,k=0;k<p.length;k++){var T=(p.words[k]|0)*19+g,O=T&67108863;T>>>=26,p.words[k]=O,g=T}return g!==0&&(p.words[p.length++]=g),p},o._prime=function(p){if(q[p])return q[p];var g;if(p==="k256")g=new E;else if(p==="p224")g=new j;else if(p==="p192")g=new R;else if(p==="p25519")g=new V;else throw new Error("Unknown prime "+p);return q[p]=g,g};function U(x){if(typeof x=="string"){var p=o._prime(x);this.m=p.p,this.prime=p}else i(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}U.prototype._verify1=function(p){i(p.negative===0,"red works only with positives"),i(p.red,"red works only with red numbers")},U.prototype._verify2=function(p,g){i((p.negative|g.negative)===0,"red works only with positives"),i(p.red&&p.red===g.red,"red works only with red numbers")},U.prototype.imod=function(p){return this.prime?this.prime.ireduce(p)._forceRed(this):(d(p,p.umod(this.m)._forceRed(this)),p)},U.prototype.neg=function(p){return p.isZero()?p.clone():this.m.sub(p)._forceRed(this)},U.prototype.add=function(p,g){this._verify2(p,g);var k=p.add(g);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},U.prototype.iadd=function(p,g){this._verify2(p,g);var k=p.iadd(g);return k.cmp(this.m)>=0&&k.isub(this.m),k},U.prototype.sub=function(p,g){this._verify2(p,g);var k=p.sub(g);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},U.prototype.isub=function(p,g){this._verify2(p,g);var k=p.isub(g);return k.cmpn(0)<0&&k.iadd(this.m),k},U.prototype.shl=function(p,g){return this._verify1(p),this.imod(p.ushln(g))},U.prototype.imul=function(p,g){return this._verify2(p,g),this.imod(p.imul(g))},U.prototype.mul=function(p,g){return this._verify2(p,g),this.imod(p.mul(g))},U.prototype.isqr=function(p){return this.imul(p,p.clone())},U.prototype.sqr=function(p){return this.mul(p,p)},U.prototype.sqrt=function(p){if(p.isZero())return p.clone();var g=this.m.andln(3);if(i(g%2===1),g===3){var k=this.m.add(new o(1)).iushrn(2);return this.pow(p,k)}for(var T=this.m.subn(1),O=0;!T.isZero()&&T.andln(1)===0;)O++,T.iushrn(1);i(!T.isZero());var L=new o(1).toRed(this),W=L.redNeg(),P=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new o(2*_*_).toRed(this);this.pow(_,P).cmp(W)!==0;)_.redIAdd(W);for(var F=this.pow(_,T),I=this.pow(p,T.addn(1).iushrn(1)),z=this.pow(p,T),ie=O;z.cmp(L)!==0;){for(var le=z,he=0;le.cmp(L)!==0;he++)le=le.redSqr();i(he<ie);var _e=this.pow(F,new o(1).iushln(ie-he-1));I=I.redMul(_e),F=_e.redSqr(),z=z.redMul(F),ie=he}return I},U.prototype.invm=function(p){var g=p._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},U.prototype.pow=function(p,g){if(g.isZero())return new o(1).toRed(this);if(g.cmpn(1)===0)return p.clone();var k=4,T=new Array(1<<k);T[0]=new o(1).toRed(this),T[1]=p;for(var O=2;O<T.length;O++)T[O]=this.mul(T[O-1],p);var L=T[0],W=0,P=0,_=g.bitLength()%26;for(_===0&&(_=26),O=g.length-1;O>=0;O--){for(var F=g.words[O],I=_-1;I>=0;I--){var z=F>>I&1;if(L!==T[0]&&(L=this.sqr(L)),z===0&&W===0){P=0;continue}W<<=1,W|=z,P++,!(P!==k&&(O!==0||I!==0))&&(L=this.mul(L,T[W]),P=0,W=0)}_=26}return L},U.prototype.convertTo=function(p){var g=p.umod(this.m);return g===p?g.clone():g},U.prototype.convertFrom=function(p){var g=p.clone();return g.red=null,g},o.mont=function(p){return new Y(p)};function Y(x){U.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Y,U),Y.prototype.convertTo=function(p){return this.imod(p.ushln(this.shift))},Y.prototype.convertFrom=function(p){var g=this.imod(p.mul(this.rinv));return g.red=null,g},Y.prototype.imul=function(p,g){if(p.isZero()||g.isZero())return p.words[0]=0,p.length=1,p;var k=p.imul(g),T=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=k.isub(T).iushrn(this.shift),L=O;return O.cmp(this.m)>=0?L=O.isub(this.m):O.cmpn(0)<0&&(L=O.iadd(this.m)),L._forceRed(this)},Y.prototype.mul=function(p,g){if(p.isZero()||g.isZero())return new o(0)._forceRed(this);var k=p.mul(g),T=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=k.isub(T).iushrn(this.shift),L=O;return O.cmp(this.m)>=0?L=O.isub(this.m):O.cmpn(0)<0&&(L=O.iadd(this.m)),L._forceRed(this)},Y.prototype.invm=function(p){var g=this.imod(p._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(typeof e>"u"||e,n)}}),Bl=9e15,Ya=1e9,K0="0123456789abcdef",Tp="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ip="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Z0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Bl,maxE:Bl,crypto:!1},mC,zo,ut=!0,vm="[DecimalError] ",Qa=vm+"Invalid argument: ",gC=vm+"Precision limit exceeded",wC=vm+"crypto unavailable",yC="[object Decimal]",$r=Math.floor,tr=Math.pow,SL=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,CL=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,AL=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,bC=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ds=1e7,rt=7,TL=9007199254740991,IL=Tp.length-1,Q0=Ip.length-1,me={toStringTag:yC};me.absoluteValue=me.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Ke(n)};me.ceil=function(){return Ke(new this.constructor(this),this.e+1,2)};me.clampedTo=me.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(Qa+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};me.comparedTo=me.cmp=function(n){var e,t,r,i,s=this,o=s.d,a=(n=new s.constructor(n)).d,c=s.s,l=n.s;if(!o||!a)return!c||!l?NaN:c!==l?c:o===a?0:!o^c<0?1:-1;if(!o[0]||!a[0])return o[0]?c:a[0]?-l:0;if(c!==l)return c;if(s.e!==n.e)return s.e>n.e^c<0?1:-1;for(r=o.length,i=a.length,e=0,t=r<i?r:i;e<t;++e)if(o[e]!==a[e])return o[e]>a[e]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1};me.cosine=me.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+rt,r.rounding=1,t=xL(r,CC(r,t)),r.precision=n,r.rounding=e,Ke(zo==2||zo==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};me.cubeRoot=me.cbrt=function(){var n,e,t,r,i,s,o,a,c,l,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(ut=!1,s=u.s*tr(u.s*u,1/3),!s||Math.abs(s)==1/0?(t=Tr(u.d),n=u.e,(s=(n-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=tr(t,1/3),n=$r((n+1)/3)-(n%3==(n<0?-1:2)),s==1/0?t="5e"+n:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new d(t),r.s=u.s):r=new d(s.toString()),o=(n=d.precision)+3;;)if(a=r,c=a.times(a).times(a),l=c.plus(u),r=an(l.plus(u).times(a),l.plus(c),o+2,1),Tr(a.d).slice(0,o)===(t=Tr(r.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(Ke(a,n+1,0),a.times(a).times(a).eq(u))){r=a;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ke(r,n+1,1),e=!r.times(r).times(r).eq(u));break}return ut=!0,Ke(r,n,d.rounding,e)};me.decimalPlaces=me.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-$r(this.e/rt))*rt,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};me.dividedBy=me.div=function(n){return an(this,new this.constructor(n))};me.dividedToIntegerBy=me.divToInt=function(n){var e=this,t=e.constructor;return Ke(an(e,new t(n),0,1,1),t.precision,t.rounding)};me.equals=me.eq=function(n){return this.cmp(n)===0};me.floor=function(){return Ke(new this.constructor(this),this.e+1,3)};me.greaterThan=me.gt=function(n){return this.cmp(n)>0};me.greaterThanOrEqualTo=me.gte=function(n){var e=this.cmp(n);return e==1||e===0};me.hyperbolicCosine=me.cosh=function(){var n,e,t,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;t=o.precision,r=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(n=Math.ceil(i/3),e=(1/Sm(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),s=yu(o,1,s.times(e),new o(1),!0);for(var c,l=n,u=new o(8);l--;)c=s.times(s),s=a.minus(c.times(u.minus(c.times(u))));return Ke(s,o.precision=t,o.rounding=r,!0)};me.hyperbolicSine=me.sinh=function(){var n,e,t,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=yu(s,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/Sm(5,n)),i=yu(s,2,i,i,!0);for(var o,a=new s(5),c=new s(16),l=new s(20);n--;)o=i.times(i),i=i.times(a.plus(o.times(c.times(o).plus(l))))}return s.precision=e,s.rounding=t,Ke(i,e,t,!0)};me.hyperbolicTangent=me.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,an(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};me.inverseCosine=me.acos=function(){var n,e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,s=t.rounding;return r!==-1?r===0?e.isNeg()?Os(t,i,s):new t(0):new t(NaN):e.isZero()?Os(t,i+4,s).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),n=Os(t,i+4,s).times(.5),t.precision=i,t.rounding=s,n.minus(e))};me.inverseHyperbolicCosine=me.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,ut=!1,t=t.times(t).minus(1).sqrt().plus(t),ut=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};me.inverseHyperbolicSine=me.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,ut=!1,t=t.times(t).plus(1).sqrt().plus(t),ut=!0,r.precision=n,r.rounding=e,t.ln())};me.inverseHyperbolicTangent=me.atanh=function(){var n,e,t,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=s.precision,e=s.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?Ke(new s(i),n,e,!0):(s.precision=t=r-i.e,i=an(i.plus(1),new s(1).minus(i),t+n,1),s.precision=n+4,s.rounding=1,i=i.ln(),s.precision=n,s.rounding=e,i.times(.5))):new s(NaN)};me.inverseSine=me.asin=function(){var n,e,t,r,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,r=s.rounding,e!==-1?e===0?(n=Os(s,t+4,r).times(.5),n.s=i.s,n):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=r,i.times(2)))};me.inverseTangent=me.atan=function(){var n,e,t,r,i,s,o,a,c,l=this,u=l.constructor,d=u.precision,h=u.rounding;if(l.isFinite()){if(l.isZero())return new u(l);if(l.abs().eq(1)&&d+4<=Q0)return o=Os(u,d+4,h).times(.25),o.s=l.s,o}else{if(!l.s)return new u(NaN);if(d+4<=Q0)return o=Os(u,d+4,h).times(.5),o.s=l.s,o}for(u.precision=a=d+10,u.rounding=1,t=Math.min(28,a/rt+2|0),n=t;n;--n)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(ut=!1,e=Math.ceil(a/rt),r=1,c=l.times(l),o=new u(l),i=l;n!==-1;)if(i=i.times(c),s=o.minus(i.div(r+=2)),i=i.times(c),o=s.plus(i.div(r+=2)),o.d[e]!==void 0)for(n=e;o.d[n]===s.d[n]&&n--;);return t&&(o=o.times(2<<t-1)),ut=!0,Ke(o,u.precision=d,u.rounding=h,!0)};me.isFinite=function(){return!!this.d};me.isInteger=me.isInt=function(){return!!this.d&&$r(this.e/rt)>this.d.length-2};me.isNaN=function(){return!this.s};me.isNegative=me.isNeg=function(){return this.s<0};me.isPositive=me.isPos=function(){return this.s>0};me.isZero=function(){return!!this.d&&this.d[0]===0};me.lessThan=me.lt=function(n){return this.cmp(n)<0};me.lessThanOrEqualTo=me.lte=function(n){return this.cmp(n)<1};me.logarithm=me.log=function(n){var e,t,r,i,s,o,a,c,l=this,u=l.constructor,d=u.precision,h=u.rounding,f=5;if(n==null)n=new u(10),e=!0;else{if(n=new u(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new u(NaN);e=n.eq(10)}if(t=l.d,l.s<0||!t||!t[0]||l.eq(1))return new u(t&&!t[0]?-1/0:l.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(ut=!1,a=d+f,o=Pa(l,a),r=e?xp(u,a+10):Pa(n,a),c=an(o,r,a,1),Ad(c.d,i=d,h))do if(a+=10,o=Pa(l,a),r=e?xp(u,a+10):Pa(n,a),c=an(o,r,a,1),!s){+Tr(c.d).slice(i+1,i+15)+1==1e14&&(c=Ke(c,d+1,0));break}while(Ad(c.d,i+=10,h));return ut=!0,Ke(c,d,h)};me.minus=me.sub=function(n){var e,t,r,i,s,o,a,c,l,u,d,h,f=this,m=f.constructor;if(n=new m(n),!f.d||!n.d)return!f.s||!n.s?n=new m(NaN):f.d?n.s=-n.s:n=new m(n.d||f.s!==n.s?f:NaN),n;if(f.s!=n.s)return n.s=-n.s,f.plus(n);if(l=f.d,h=n.d,a=m.precision,c=m.rounding,!l[0]||!h[0]){if(h[0])n.s=-n.s;else if(l[0])n=new m(f);else return new m(c===3?-0:0);return ut?Ke(n,a,c):n}if(t=$r(n.e/rt),u=$r(f.e/rt),l=l.slice(),s=u-t,s){for(d=s<0,d?(e=l,s=-s,o=h.length):(e=h,t=u,o=l.length),r=Math.max(Math.ceil(a/rt),o)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=l.length,o=h.length,d=r<o,d&&(o=r),r=0;r<o;r++)if(l[r]!=h[r]){d=l[r]<h[r];break}s=0}for(d&&(e=l,l=h,h=e,n.s=-n.s),o=l.length,r=h.length-o;r>0;--r)l[o++]=0;for(r=h.length;r>s;){if(l[--r]<h[r]){for(i=r;i&&l[--i]===0;)l[i]=Ds-1;--l[i],l[r]+=Ds}l[r]-=h[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--t;return l[0]?(n.d=l,n.e=km(l,t),ut?Ke(n,a,c):n):new m(c===3?-0:0)};me.modulo=me.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?Ke(new r(t),r.precision,r.rounding):(ut=!1,r.modulo==9?(e=an(t,n.abs(),0,3,1),e.s*=n.s):e=an(t,n,0,r.modulo,1),e=e.times(n),ut=!0,t.minus(e))};me.naturalExponential=me.exp=function(){return H0(this)};me.naturalLogarithm=me.ln=function(){return Pa(this)};me.negated=me.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Ke(n)};me.plus=me.add=function(n){var e,t,r,i,s,o,a,c,l,u,d=this,h=d.constructor;if(n=new h(n),!d.d||!n.d)return!d.s||!n.s?n=new h(NaN):d.d||(n=new h(n.d||d.s===n.s?d:NaN)),n;if(d.s!=n.s)return n.s=-n.s,d.minus(n);if(l=d.d,u=n.d,a=h.precision,c=h.rounding,!l[0]||!u[0])return u[0]||(n=new h(d)),ut?Ke(n,a,c):n;if(s=$r(d.e/rt),r=$r(n.e/rt),l=l.slice(),i=s-r,i){for(i<0?(t=l,i=-i,o=u.length):(t=u,r=s,o=l.length),s=Math.ceil(a/rt),o=s>o?s+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=l.length,i=u.length,o-i<0&&(i=o,t=u,u=l,l=t),e=0;i;)e=(l[--i]=l[i]+u[i]+e)/Ds|0,l[i]%=Ds;for(e&&(l.unshift(e),++r),o=l.length;l[--o]==0;)l.pop();return n.d=l,n.e=km(l,r),ut?Ke(n,a,c):n};me.precision=me.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Qa+n);return t.d?(e=_C(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};me.round=function(){var n=this,e=n.constructor;return Ke(new e(n),n.e+1,e.rounding)};me.sine=me.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+rt,r.rounding=1,t=ML(r,CC(r,t)),r.precision=n,r.rounding=e,Ke(zo>2?t.neg():t,n,e,!0)):new r(NaN)};me.squareRoot=me.sqrt=function(){var n,e,t,r,i,s,o=this,a=o.d,c=o.e,l=o.s,u=o.constructor;if(l!==1||!a||!a[0])return new u(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(ut=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=Tr(a),(e.length+c)%2==0&&(e+="0"),l=Math.sqrt(e),c=$r((c+1)/2)-(c<0||c%2),l==1/0?e="5e"+c:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),r=new u(e)):r=new u(l.toString()),t=(c=u.precision)+3;;)if(s=r,r=s.plus(an(o,s,t+2,1)).times(.5),Tr(s.d).slice(0,t)===(e=Tr(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ke(s,c+1,0),s.times(s).eq(o))){r=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ke(r,c+1,1),n=!r.times(r).eq(o));break}return ut=!0,Ke(r,c,u.rounding,n)};me.tangent=me.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=an(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,Ke(zo==2||zo==4?t.neg():t,n,e,!0)):new r(NaN)};me.times=me.mul=function(n){var e,t,r,i,s,o,a,c,l,u=this,d=u.constructor,h=u.d,f=(n=new d(n)).d;if(n.s*=u.s,!h||!h[0]||!f||!f[0])return new d(!n.s||h&&!h[0]&&!f||f&&!f[0]&&!h?NaN:!h||!f?n.s/0:n.s*0);for(t=$r(u.e/rt)+$r(n.e/rt),c=h.length,l=f.length,c<l&&(s=h,h=f,f=s,o=c,c=l,l=o),s=[],o=c+l,r=o;r--;)s.push(0);for(r=l;--r>=0;){for(e=0,i=c+r;i>r;)a=s[i]+f[r]*h[i-r-1]+e,s[i--]=a%Ds|0,e=a/Ds|0;s[i]=(s[i]+e)%Ds|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),n.d=s,n.e=km(s,t),ut?Ke(n,d.precision,d.rounding):n};me.toBinary=function(n,e){return Zy(this,2,n,e)};me.toDecimalPlaces=me.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(pi(n,0,Ya),e===void 0?e=r.rounding:pi(e,0,8),Ke(t,n+t.e+1,e))};me.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=go(r,!0):(pi(n,0,Ya),e===void 0?e=i.rounding:pi(e,0,8),r=Ke(new i(r),n+1,e),t=go(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};me.toFixed=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?t=go(i):(pi(n,0,Ya),e===void 0?e=s.rounding:pi(e,0,8),r=Ke(new s(i),n+i.e+1,e),t=go(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};me.toFraction=function(n){var e,t,r,i,s,o,a,c,l,u,d,h,f=this,m=f.d,w=f.constructor;if(!m)return new w(f);if(l=t=new w(1),r=c=new w(0),e=new w(r),s=e.e=_C(m)-f.e-1,o=s%rt,e.d[0]=tr(10,o<0?rt+o:o),n==null)n=s>0?e:l;else{if(a=new w(n),!a.isInt()||a.lt(l))throw Error(Qa+a);n=a.gt(e)?s>0?e:l:a}for(ut=!1,a=new w(Tr(m)),u=w.precision,w.precision=s=m.length*rt*2;d=an(a,e,0,1,1),i=t.plus(d.times(r)),i.cmp(n)!=1;)t=r,r=i,i=l,l=c.plus(d.times(i)),c=i,i=e,e=a.minus(d.times(i)),a=i;return i=an(n.minus(t),r,0,1,1),c=c.plus(i.times(l)),t=t.plus(i.times(r)),c.s=l.s=f.s,h=an(l,r,s,1).minus(f).abs().cmp(an(c,t,s,1).minus(f).abs())<1?[l,r]:[c,t],w.precision=u,ut=!0,h};me.toHexadecimal=me.toHex=function(n,e){return Zy(this,16,n,e)};me.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:pi(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(ut=!1,t=an(t,n,0,e,1).times(n),ut=!0,Ke(t)):(n.s=t.s,t=n),t};me.toNumber=function(){return+this};me.toOctal=function(n,e){return Zy(this,8,n,e)};me.toPower=me.pow=function(n){var e,t,r,i,s,o,a=this,c=a.constructor,l=+(n=new c(n));if(!a.d||!n.d||!a.d[0]||!n.d[0])return new c(tr(+a,l));if(a=new c(a),a.eq(1))return a;if(r=c.precision,s=c.rounding,n.eq(1))return Ke(a,r,s);if(e=$r(n.e/rt),e>=n.d.length-1&&(t=l<0?-l:l)<=TL)return i=vC(c,a,t,r),n.s<0?new c(1).div(i):Ke(i,r,s);if(o=a.s,o<0){if(e<n.d.length-1)return new c(NaN);if(n.d[e]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return t=tr(+a,l),e=t==0||!isFinite(t)?$r(l*(Math.log("0."+Tr(a.d))/Math.LN10+a.e+1)):new c(t+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?o/0:0):(ut=!1,c.rounding=a.s=1,t=Math.min(12,(e+"").length),i=H0(n.times(Pa(a,r+t)),r),i.d&&(i=Ke(i,r+5,1),Ad(i.d,r,s)&&(e=r+10,i=Ke(H0(n.times(Pa(a,e+t)),e),e+5,1),+Tr(i.d).slice(r+1,r+15)+1==1e14&&(i=Ke(i,r+1,0)))),i.s=o,ut=!0,c.rounding=s,Ke(i,r,s))};me.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=go(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(pi(n,1,Ya),e===void 0?e=i.rounding:pi(e,0,8),r=Ke(new i(r),n,e),t=go(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};me.toSignificantDigits=me.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(pi(n,1,Ya),e===void 0?e=r.rounding:pi(e,0,8)),Ke(new r(t),n,e)};me.toString=function(){var n=this,e=n.constructor,t=go(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};me.truncated=me.trunc=function(){return Ke(new this.constructor(this),this.e+1,1)};me.valueOf=me.toJSON=function(){var n=this,e=n.constructor,t=go(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function Tr(n){var e,t,r,i=n.length-1,s="",o=n[0];if(i>0){for(s+=o,e=1;e<i;e++)r=n[e]+"",t=rt-r.length,t&&(s+=Ca(t)),s+=r;o=n[e],r=o+"",t=rt-r.length,t&&(s+=Ca(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function pi(n,e,t){if(n!==~~n||n<e||n>t)throw Error(Qa+n)}function Ad(n,e,t,r){var i,s,o,a;for(s=n[0];s>=10;s/=10)--e;return--e<0?(e+=rt,i=0):(i=Math.ceil((e+1)/rt),e%=rt),s=tr(10,rt-e),a=n[i]%s|0,r==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=t<4&&a==99999||t>3&&a==49999||a==5e4||a==0):o=(t<4&&a+1==s||t>3&&a+1==s/2)&&(n[i+1]/s/100|0)==tr(10,e-2)-1||(a==s/2||a==0)&&(n[i+1]/s/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(r||t<4)&&a==9999||!r&&t>3&&a==4999):o=((r||t<4)&&a+1==s||!r&&t>3&&a+1==s/2)&&(n[i+1]/s/1e3|0)==tr(10,e-3)-1,o}function Mf(n,e,t){for(var r,i=[0],s,o=0,a=n.length;o<a;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=K0.indexOf(n.charAt(o++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}function xL(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/Sm(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=yu(n,1,e.times(i),new n(1));for(var s=t;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return n.precision-=t,e}var an=function(){function n(r,i,s){var o,a=0,c=r.length;for(r=r.slice();c--;)o=r[c]*i+a,r[c]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function e(r,i,s,o){var a,c;if(s!=o)c=s>o?1:-1;else for(a=c=0;a<s;a++)if(r[a]!=i[a]){c=r[a]>i[a]?1:-1;break}return c}function t(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,c){var l,u,d,h,f,m,w,y,C,A,M,H,G,q,X,E,j,R,V,U,Y=r.constructor,x=r.s==i.s?1:-1,p=r.d,g=i.d;if(!p||!p[0]||!g||!g[0])return new Y(!r.s||!i.s||(p?g&&p[0]==g[0]:!g)?NaN:p&&p[0]==0||!g?x*0:x/0);for(c?(f=1,u=r.e-i.e):(c=Ds,f=rt,u=$r(r.e/f)-$r(i.e/f)),V=g.length,j=p.length,C=new Y(x),A=C.d=[],d=0;g[d]==(p[d]||0);d++);if(g[d]>(p[d]||0)&&u--,s==null?(q=s=Y.precision,o=Y.rounding):a?q=s+(r.e-i.e)+1:q=s,q<0)A.push(1),m=!0;else{if(q=q/f+2|0,d=0,V==1){for(h=0,g=g[0],q++;(d<j||h)&&q--;d++)X=h*c+(p[d]||0),A[d]=X/g|0,h=X%g|0;m=h||d<j}else{for(h=c/(g[0]+1)|0,h>1&&(g=n(g,h,c),p=n(p,h,c),V=g.length,j=p.length),E=V,M=p.slice(0,V),H=M.length;H<V;)M[H++]=0;U=g.slice(),U.unshift(0),R=g[0],g[1]>=c/2&&++R;do h=0,l=e(g,M,V,H),l<0?(G=M[0],V!=H&&(G=G*c+(M[1]||0)),h=G/R|0,h>1?(h>=c&&(h=c-1),w=n(g,h,c),y=w.length,H=M.length,l=e(w,M,y,H),l==1&&(h--,t(w,V<y?U:g,y,c))):(h==0&&(l=h=1),w=g.slice()),y=w.length,y<H&&w.unshift(0),t(M,w,H,c),l==-1&&(H=M.length,l=e(g,M,V,H),l<1&&(h++,t(M,V<H?U:g,H,c))),H=M.length):l===0&&(h++,M=[0]),A[d++]=h,l&&M[0]?M[H++]=p[E]||0:(M=[p[E]],H=1);while((E++<j||M[0]!==void 0)&&q--);m=M[0]!==void 0}A[0]||A.shift()}if(f==1)C.e=u,mC=m;else{for(d=1,h=A[0];h>=10;h/=10)d++;C.e=d+u*f-1,Ke(C,a?s+C.e+1:s,o,m)}return C}}();function Ke(n,e,t,r){var i,s,o,a,c,l,u,d,h,f=n.constructor;e:if(e!=null){if(d=n.d,!d)return n;for(i=1,a=d[0];a>=10;a/=10)i++;if(s=e-i,s<0)s+=rt,o=e,u=d[h=0],c=u/tr(10,i-o-1)%10|0;else if(h=Math.ceil((s+1)/rt),a=d.length,h>=a)if(r){for(;a++<=h;)d.push(0);u=c=0,i=1,s%=rt,o=s-rt+1}else break e;else{for(u=a=d[h],i=1;a>=10;a/=10)i++;s%=rt,o=s-rt+i,c=o<0?0:u/tr(10,i-o-1)%10|0}if(r=r||e<0||d[h+1]!==void 0||(o<0?u:u%tr(10,i-o-1)),l=t<4?(c||r)&&(t==0||t==(n.s<0?3:2)):c>5||c==5&&(t==4||r||t==6&&(s>0?o>0?u/tr(10,i-o):0:d[h-1])%10&1||t==(n.s<0?8:7)),e<1||!d[0])return d.length=0,l?(e-=n.e+1,d[0]=tr(10,(rt-e%rt)%rt),n.e=-e||0):d[0]=n.e=0,n;if(s==0?(d.length=h,a=1,h--):(d.length=h+1,a=tr(10,rt-s),d[h]=o>0?(u/tr(10,i-o)%tr(10,o)|0)*a:0),l)for(;;)if(h==0){for(s=1,o=d[0];o>=10;o/=10)s++;for(o=d[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(n.e++,d[0]==Ds&&(d[0]=1));break}else{if(d[h]+=a,d[h]!=Ds)break;d[h--]=0,a=1}for(s=d.length;d[--s]===0;)d.pop()}return ut&&(n.e>f.maxE?(n.d=null,n.e=NaN):n.e<f.minE&&(n.e=0,n.d=[0])),n}function go(n,e,t){if(!n.isFinite())return SC(n);var r,i=n.e,s=Tr(n.d),o=s.length;return e?(t&&(r=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ca(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n.e<0?"e":"e+")+n.e):i<0?(s="0."+Ca(-i-1)+s,t&&(r=t-o)>0&&(s+=Ca(r))):i>=o?(s+=Ca(i+1-o),t&&(r=t-i-1)>0&&(s=s+"."+Ca(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(s+="."),s+=Ca(r))),s}function km(n,e){var t=n[0];for(e*=rt;t>=10;t/=10)e++;return e}function xp(n,e,t){if(e>IL)throw ut=!0,t&&(n.precision=t),Error(gC);return Ke(new n(Tp),e,1,!0)}function Os(n,e,t){if(e>Q0)throw Error(gC);return Ke(new n(Ip),e,t,!0)}function _C(n){var e=n.length-1,t=e*rt+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function Ca(n){for(var e="";n--;)e+="0";return e}function vC(n,e,t,r){var i,s=new n(1),o=Math.ceil(r/rt+4);for(ut=!1;;){if(t%2&&(s=s.times(e),C_(s.d,o)&&(i=!0)),t=$r(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),C_(e.d,o)}return ut=!0,s}function S_(n){return n.d[n.d.length-1]&1}function kC(n,e,t){for(var r,i=new n(e[0]),s=0;++s<e.length;)if(r=new n(e[s]),r.s)i[t](r)&&(i=r);else{i=r;break}return i}function H0(n,e){var t,r,i,s,o,a,c,l=0,u=0,d=0,h=n.constructor,f=h.rounding,m=h.precision;if(!n.d||!n.d[0]||n.e>17)return new h(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:0/0);for(e==null?(ut=!1,c=m):c=e,a=new h(.03125);n.e>-2;)n=n.times(a),d+=5;for(r=Math.log(tr(2,d))/Math.LN10*2+5|0,c+=r,t=s=o=new h(1),h.precision=c;;){if(s=Ke(s.times(n),c,1),t=t.times(++u),a=o.plus(an(s,t,c,1)),Tr(a.d).slice(0,c)===Tr(o.d).slice(0,c)){for(i=d;i--;)o=Ke(o.times(o),c,1);if(e==null)if(l<3&&Ad(o.d,c-r,f,l))h.precision=c+=10,t=s=a=new h(1),u=0,l++;else return Ke(o,h.precision=m,f,ut=!0);else return h.precision=m,o}o=a}}function Pa(n,e){var t,r,i,s,o,a,c,l,u,d,h,f=1,m=10,w=n,y=w.d,C=w.constructor,A=C.rounding,M=C.precision;if(w.s<0||!y||!y[0]||!w.e&&y[0]==1&&y.length==1)return new C(y&&!y[0]?-1/0:w.s!=1?NaN:y?0:w);if(e==null?(ut=!1,u=M):u=e,C.precision=u+=m,t=Tr(y),r=t.charAt(0),Math.abs(s=w.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)w=w.times(n),t=Tr(w.d),r=t.charAt(0),f++;s=w.e,r>1?(w=new C("0."+t),s++):w=new C(r+"."+t.slice(1))}else return l=xp(C,u+2,M).times(s+""),w=Pa(new C(r+"."+t.slice(1)),u-m).plus(l),C.precision=M,e==null?Ke(w,M,A,ut=!0):w;for(d=w,c=o=w=an(w.minus(1),w.plus(1),u,1),h=Ke(w.times(w),u,1),i=3;;){if(o=Ke(o.times(h),u,1),l=c.plus(an(o,new C(i),u,1)),Tr(l.d).slice(0,u)===Tr(c.d).slice(0,u))if(c=c.times(2),s!==0&&(c=c.plus(xp(C,u+2,M).times(s+""))),c=an(c,new C(f),u,1),e==null)if(Ad(c.d,u-m,A,a))C.precision=u+=m,l=o=w=an(d.minus(1),d.plus(1),u,1),h=Ke(w.times(w),u,1),i=a=1;else return Ke(c,C.precision=M,A,ut=!0);else return C.precision=M,c;c=l,i+=2}}function SC(n){return String(n.s*n.s/0)}function G0(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%rt,t<0&&(r+=rt),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=rt;r<i;)n.d.push(+e.slice(r,r+=rt));e=e.slice(r),r=rt-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),ut&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function EL(n,e){var t,r,i,s,o,a,c,l,u;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),bC.test(e))return G0(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(CL.test(e))t=16,e=e.toLowerCase();else if(SL.test(e))t=2;else if(AL.test(e))t=8;else throw Error(Qa+e);for(s=e.search(/p/i),s>0?(c=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,r=n.constructor,o&&(e=e.replace(".",""),a=e.length,s=a-s,i=vC(r,new r(t),s,s*2)),l=Mf(e,t,Ds),u=l.length-1,s=u;l[s]===0;--s)l.pop();return s<0?new r(n.s*0):(n.e=km(l,u),n.d=l,ut=!1,o&&(n=an(n,i,a*4)),c&&(n=n.times(Math.abs(c)<54?tr(2,c):th.pow(2,c))),ut=!0,n)}function ML(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:yu(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/Sm(5,t)),e=yu(n,2,e,e);for(var i,s=new n(5),o=new n(16),a=new n(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(o.times(i).minus(a))));return e}function yu(n,e,t,r,i){var s,o,a,c,l=n.precision,u=Math.ceil(l/rt);for(ut=!1,c=t.times(t),a=new n(r);;){if(o=an(a.times(c),new n(e++*e++),l,1),a=i?r.plus(o):r.minus(o),r=an(o.times(c),new n(e++*e++),l,1),o=a.plus(r),o.d[u]!==void 0){for(s=u;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return ut=!0,o.d.length=u+1,o}function Sm(n,e){for(var t=n;--e;)t*=n;return t}function CC(n,e){var t,r=e.s<0,i=Os(n,n.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return zo=r?4:1,e;if(t=e.divToInt(i),t.isZero())zo=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return zo=S_(t)?r?2:3:r?4:1,e;zo=S_(t)?r?1:4:r?3:2}return e.minus(i).abs()}function Zy(n,e,t,r){var i,s,o,a,c,l,u,d,h,f=n.constructor,m=t!==void 0;if(m?(pi(t,1,Ya),r===void 0?r=f.rounding:pi(r,0,8)):(t=f.precision,r=f.rounding),!n.isFinite())u=SC(n);else{for(u=go(n),o=u.indexOf("."),m?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(u=u.replace(".",""),h=new f(1),h.e=u.length-o,h.d=Mf(go(h),10,i),h.e=h.d.length),d=Mf(u,10,i),s=c=d.length;d[--c]==0;)d.pop();if(!d[0])u=m?"0p+0":"0";else{if(o<0?s--:(n=new f(n),n.d=d,n.e=s,n=an(n,h,t,r,0,i),d=n.d,s=n.e,l=mC),o=d[t],a=i/2,l=l||d[t+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(n.s<0?3:2)):o>a||o===a&&(r===4||l||r===6&&d[t-1]&1||r===(n.s<0?8:7)),d.length=t,l)for(;++d[--t]>i-1;)d[t]=0,t||(++s,d.unshift(1));for(c=d.length;!d[c-1];--c);for(o=0,u="";o<c;o++)u+=K0.charAt(d[o]);if(m){if(c>1)if(e==16||e==8){for(o=e==16?4:3,--c;c%o;c++)u+="0";for(d=Mf(u,i,e),c=d.length;!d[c-1];--c);for(o=1,u="1.";o<c;o++)u+=K0.charAt(d[o])}else u=u.charAt(0)+"."+u.slice(1);u=u+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)u="0"+u;u="0."+u}else if(++s>c)for(s-=c;s--;)u+="0";else s<c&&(u=u.slice(0,s)+"."+u.slice(s))}u=(e==16?"0x":e==2?"0b":e==8?"0o":"")+u}return n.s<0?"-"+u:u}function C_(n,e){if(n.length>e)return n.length=e,!0}function OL(n){return new this(n).abs()}function NL(n){return new this(n).acos()}function jL(n){return new this(n).acosh()}function DL(n,e){return new this(n).plus(e)}function BL(n){return new this(n).asin()}function RL(n){return new this(n).asinh()}function PL(n){return new this(n).atan()}function UL(n){return new this(n).atanh()}function FL(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,s=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=Os(this,s,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?Os(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=Os(this,s,1).times(.5),t.s=n.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(an(n,e,s,1)),e=Os(this,s,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(an(n,e,s,1)),t}function LL(n){return new this(n).cbrt()}function $L(n){return Ke(n=new this(n),n.e+1,2)}function VL(n,e,t){return new this(n).clamp(e,t)}function qL(n){if(!n||typeof n!="object")throw Error(vm+"Object expected");var e,t,r,i=n.defaults===!0,s=["precision",1,Ya,"rounding",0,8,"toExpNeg",-Bl,0,"toExpPos",0,Bl,"maxE",0,Bl,"minE",-Bl,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=Z0[t]),(r=n[t])!==void 0)if($r(r)===r&&r>=s[e+1]&&r<=s[e+2])this[t]=r;else throw Error(Qa+t+": "+r);if(t="crypto",i&&(this[t]=Z0[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(wC);else this[t]=!1;else throw Error(Qa+t+": "+r);return this}function zL(n){return new this(n).cos()}function WL(n){return new this(n).cosh()}function AC(n){var e,t,r;function i(s){var o,a,c,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,A_(s)){l.s=s.s,ut?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;ut?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return G0(l,s.toString())}else if(c!=="string")throw Error(Qa+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),bC.test(s)?G0(l,s):EL(l,s)}if(i.prototype=me,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=qL,i.clone=AC,i.isDecimal=A_,i.abs=OL,i.acos=NL,i.acosh=jL,i.add=DL,i.asin=BL,i.asinh=RL,i.atan=PL,i.atanh=UL,i.atan2=FL,i.cbrt=LL,i.ceil=$L,i.clamp=VL,i.cos=zL,i.cosh=WL,i.div=KL,i.exp=ZL,i.floor=QL,i.hypot=HL,i.ln=GL,i.log=YL,i.log10=JL,i.log2=XL,i.max=e$,i.min=t$,i.mod=n$,i.mul=r$,i.pow=i$,i.random=s$,i.round=o$,i.sign=a$,i.sin=c$,i.sinh=l$,i.sqrt=u$,i.sub=d$,i.sum=h$,i.tan=f$,i.tanh=p$,i.trunc=m$,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function KL(n,e){return new this(n).div(e)}function ZL(n){return new this(n).exp()}function QL(n){return Ke(n=new this(n),n.e+1,3)}function HL(){var n,e,t=new this(0);for(ut=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return ut=!0,new this(1/0);t=e}return ut=!0,t.sqrt()}function A_(n){return n instanceof th||n&&n.toStringTag===yC||!1}function GL(n){return new this(n).ln()}function YL(n,e){return new this(n).log(e)}function XL(n){return new this(n).log(2)}function JL(n){return new this(n).log(10)}function e$(){return kC(this,arguments,"lt")}function t$(){return kC(this,arguments,"gt")}function n$(n,e){return new this(n).mod(e)}function r$(n,e){return new this(n).mul(e)}function i$(n,e){return new this(n).pow(e)}function s$(n){var e,t,r,i,s=0,o=new this(1),a=[];if(n===void 0?n=this.precision:pi(n,1,Ya),r=Math.ceil(n/rt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(wC);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],n%=rt,r&&n&&(i=tr(10,rt-n),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)t=0,a=[0];else{for(t=-1;a[0]===0;t-=rt)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<rt&&(t-=rt-r)}return o.e=t,o.d=a,o}function o$(n){return Ke(n=new this(n),n.e+1,this.rounding)}function a$(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function c$(n){return new this(n).sin()}function l$(n){return new this(n).sinh()}function u$(n){return new this(n).sqrt()}function d$(n,e){return new this(n).sub(e)}function h$(){var n=0,e=arguments,t=new this(e[n]);for(ut=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return ut=!0,Ke(t,this.precision,this.rounding)}function f$(n){return new this(n).tan()}function p$(n){return new this(n).tanh()}function m$(n){return Ke(n=new this(n),n.e+1,1)}me[Symbol.for("nodejs.util.inspect.custom")]=me.toString;me[Symbol.toStringTag]="Decimal";var th=me.constructor=AC(Z0);Tp=new th(Tp);Ip=new th(Ip);var hd=th,Lo=Mu(Ou()),Tg=Mu(Ou()),g$=class{constructor(n){if(n!==0)throw new Error("Aftermath only supported on mainnet");this.slippage="900000000000000000",this.poolRegistry="0xfcc774493db2c45c79f688f88d28023a3e7d98e4ee9f48bbf5c7990f651577ae",this.protocolFeeVault="0xf194d9b1bcad972e45a7dd67dd49b3ee1e3357a00a50850c52cd51bb450e13b4",this.treasury="0x28e499dff5e864a2eafe476269a4f5035f1c16f338da7be18b103499abf271ce",this.insuranceFund="0xf0c40d67b078000e18032334c3325c47b9ec9f3d9ae4128be820d54663d14e3b",this.referrealVault="0x35d35b0e5b177593d8c3a801462485572fc30861e6ce96a55af6dc4730709278"}amountLimit(n){return Number(new Tg.default(n).mul(new Tg.default(this.slippage)).div(new Tg.default("1000000000000000000")).toString())}swap(n,e,t,r){return on(this,null,function*(){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["swap_a2b",s,o]:["swap_b2a",o,s];if(t.extendedDetails==null)throw new Error("Extended details not supported");if(t.extendedDetails.aftermathLpSupplyType==null)throw new Error("LP supply type not supported");const u=[e.object(t.id),e.object(this.poolRegistry),e.object(this.protocolFeeVault),e.object(this.treasury),e.object(this.insuranceFund),e.object(this.referrealVault),e.pure.u64(this.amountLimit(t.amountOut)),e.pure.u64(this.slippage),r];return e.moveCall({target:`${n.publishedAt()}::aftermath::${a}`,typeArguments:[c,l,t.extendedDetails.aftermathLpSupplyType],arguments:u})})}},T_="0x000000000000000000000000000000000000000000000000000000000000dee9",w$=class{constructor(n){if(n!==0)throw new Error("Aftermath only supported on mainnet")}getAccountCap(n,e){return on(this,null,function*(){let t=50,r=null;for(;;){const i=n.getOwnedObjects({owner:e,cursor:r,limit:t,filter:{MoveModule:{package:T_,module:"custodian_v2"}}});if(i!=null&&i.data!=null){if(i.data.length!==0)return i.data[0].data.objectId;if(i.data.length<50)break}else break}return null})}getOrCreateAccountCap(n,e,t){return on(this,null,function*(){let r=yield this.getAccountCap(e,t);return r!==null?{accountCap:n.object(r),isCreate:!1}:{accountCap:n.moveCall({target:`${T_}::clob_v2::create_account`,typeArguments:[],arguments:[]}),isCreate:!0}})}swap(n,e,t,r){return on(this,null,function*(){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["swap_a2b",s,o]:["swap_b2a",o,s],u=yield this.getOrCreateAccountCap(e,n.client,n.signer),d=[e.object(t.id),r,u.accountCap,e.object(bu)],h=e.moveCall({target:`${n.publishedAt()}::deepbook::${a}`,typeArguments:[c,l],arguments:d});return u.isCreate&&e.transferObjects([u.accountCap],n.signer),h})}},y$=class{constructor(n){if(n!==0)throw new Error("Kriya amm only supported on mainnet")}swap(n,e,t,r){return on(this,null,function*(){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["swap_a2b",s,o]:["swap_b2a",o,s],u=[e.object(t.id),r];return e.moveCall({target:`${n.publishedAt()}::kriya_amm::${a}`,typeArguments:[c,l],arguments:u})})}},b$=class{constructor(n){if(n!==0)throw new Error("Flowx only supported on mainnet");this.container="0xb65dcbf63fd3ad5d0ebfbf334780dc9f785eff38a4459e37ab08fa79576ee511"}swap(n,e,t,r){return on(this,null,function*(){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["swap_a2b",s,o]:["swap_b2a",o,s],u=[e.object(this.container),r];return e.moveCall({target:`${n.publishedAt()}::flowx_amm::${a}`,typeArguments:[c,l],arguments:u})})}},_$=class{constructor(n){if(n!==0)throw new Error("Turbos only supported on mainnet");this.versioned="0xf1cf0e81048df168ebeb1b8030fad24b3e0b53ae827c25053fff0779c1445b6f"}swap(n,e,t,r){return on(this,null,function*(){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["swap_a2b",s,o]:["swap_b2a",o,s];if(t.extendedDetails==null)throw new Error("Extended details not supported");if(t.extendedDetails.turbosFeeType==null)throw new Error("Turbos fee type not supported");const u=[e.object(t.id),r,e.object(bu),e.object(this.versioned)];return e.moveCall({target:`${n.publishedAt()}::turbos::${a}`,typeArguments:[c,l,t.extendedDetails.turbosFeeType],arguments:u})})}},I_=class{constructor(n,e){this.globalConfig=n===0?"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f":"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",this.partner=e??n===0?"0x639b5e433da31739e800cd085f356e64cae222966d0f1b11bd9dc76b322ff58b":"0x8e0b7668a79592f70fbfb1ae0aebaf9e2019a7049783b9a4b6fe7c6ae038b528"}flash_swap(n,e,t,r){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["flash_swap_a2b",s,o]:["flash_swap_b2a",o,s];let u=r?t.amountIn:t.amountOut;const d=[e.object(this.globalConfig),e.object(t.id),e.object(this.partner),e.pure.u64(u),e.pure.bool(r),e.object(bu)],h=e.moveCall({target:`${n.publishedAt()}::cetus::${a}`,typeArguments:[c,l],arguments:d});return{targetCoin:h[0],flashReceipt:h[1],payAmount:h[2]}}repay_flash_swap(n,e,t,r,i){const{direction:s,from:o,target:a}=t,[c,l,u]=s?["repay_flash_swap_a2b",o,a]:["repay_flash_swap_b2a",a,o],d=[e.object(this.globalConfig),e.object(t.id),e.object(this.partner),r,i];return e.moveCall({target:`${n.publishedAt()}::cetus::${c}`,typeArguments:[l,u],arguments:d})[0]}swap(n,e,t,r){return on(this,null,function*(){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["swap_a2b",s,o]:["swap_b2a",o,s],u=[e.object(this.globalConfig),e.object(t.id),e.object(this.partner),r,e.object(bu)];return e.moveCall({target:`${n.publishedAt()}::cetus::${a}`,typeArguments:[c,l],arguments:u})})}};function x_(n,...e){const t=Array.isArray(e[e.length-1])?e.pop():[];let i=[n,...e].filter(Boolean).join("::");return t&&t.length&&(i+=`<${t.join(", ")}>`),i}function Gl(n){var e;try{let t=n.replace(/\s/g,"");const r=t.match(/(<.+>)$/),i=(e=r==null?void 0:r[0])==null?void 0:e.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(i){t=t.slice(0,t.indexOf("<"));const c=Gl(t),l=pC(fC({},c),{type_arguments:i.map(u=>Gl(u).source_address)});return l.type_arguments=l.type_arguments.map(u=>wc.isSuiCoin(u)?u:Gl(u).source_address),l.source_address=x_(l.full_address,l.type_arguments),l}const s=t.split("::"),a={full_address:t,address:t===TC||t===S$?"0x2":W0.normalizeSuiObjectId(s[0]),module:s[1],name:s[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=x_(a.full_address,a.type_arguments),a}catch{return{full_address:n,address:"",module:"",name:"",type_arguments:[],source_address:n}}}function E_(n){return Gl(n).source_address}var v$="0x2::coin::Coin",k$=/^0x2::coin::Coin<(.+)>$/,TC="0x2::sui::SUI",S$="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",wc=class ba{static getCoinTypeArg(e){const t=e.type.match(k$);return t?t[1]:null}static isSUI(e){const t=ba.getCoinTypeArg(e);return t?ba.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let r=BigInt(0);return e.forEach(i=>{t===i.coinAddress&&(r+=BigInt(i.balance))}),r}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${v$}<${e}>`}static getCoinAssets(e,t){const r=[];return t.forEach(i=>{E_(i.coinAddress)===E_(e)&&r.push(i)}),r}static isSuiCoin(e){return Gl(e).full_address===TC}static selectCoinObjectIdGreaterThanOrEqual(e,t,r=[]){const i=ba.selectCoinAssetGreaterThanOrEqual(e,t,r),s=i.selectedCoins.map(c=>c.coinObjectId),o=i.remainingCoins,a=i.selectedCoins.map(c=>c.balance.toString());return{objectArray:s,remainCoins:o,amountArray:a}}static selectCoinAssetGreaterThanOrEqual(e,t,r=[]){const i=ba.sortByBalance(e.filter(l=>!r.includes(l.coinObjectId))),s=ba.calculateTotalBalance(i);if(s<t)return{selectedCoins:[],remainingCoins:i};if(s===t)return{selectedCoins:i,remainingCoins:[]};let o=BigInt(0);const a=[],c=[...i];for(;o<s;){const l=t-o,u=c.findIndex(h=>h.balance>=l);if(u!==-1){a.push(c[u]),c.splice(u,1);break}const d=c.pop();d.balance>0&&(a.push(d),o+=d.balance)}return{selectedCoins:ba.sortByBalance(a),remainingCoins:ba.sortByBalance(c)}}static sortByBalance(e){return e.sort((t,r)=>t.balance<r.balance?-1:t.balance>r.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,r)=>t.balance>r.balance?-1:t.balance<r.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,r)=>t+r.balance,BigInt(0))}};function M_(n){switch(n){case 1e4:return"Calculate error";case 10001:return"Input number too large can not fit in target type";case 10002:return"No router";case 10003:return"Insufficient Liquidity";default:return"Unknown error"}}function Ha(n){const e=n.indexOf("::");if(e===-1)return n;const t=n.substring(0,e),r=n.substring(e);if(!t.startsWith("0x"))return n;const i=t.substring(2);return i.length>64?n:`0x${i.padStart(64,"0")}${r}`}function C$(n,e){n=Ha(n),e=Ha(e);const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){if(n[r]>e[r])return!0;if(n[r]<e[r])return!1}return!0}function A$(n,e){return n.moveCall({target:"0x2::coin::zero",typeArguments:[e]})}function O_(n,e,t,r){const i=wc.getCoinAssets(r,e);if(t===BigInt(0)&&i.length===0)return{targetCoin:A$(n,r),isMintZeroCoin:!0,targetCoinAmount:0};if(wc.calculateTotalBalance(i)<t)throw new AggregateError("Insufficient balance when build merge coin","InsufficientBalance");if(wc.isSuiCoin(r))return{targetCoin:n.splitCoins(n.gas,[n.pure.u64(t.toString())]),isMintZeroCoin:!0,targetCoinAmount:Number(t.toString())};let o=wc.sortByBalance(i);o.slice(0,3).reduce((d,h)=>d+h.balance,BigInt(0))<BigInt(t)&&(o=wc.sortByBalanceDes(i));let c=wc.selectCoinObjectIdGreaterThanOrEqual(o,t);const[l,...u]=c.objectArray;return u.length>0&&n.mergeCoins(l,u.map(d=>n.object(d))),{targetCoin:n.object(l),isMintZeroCoin:!1,targetCoinAmount:Number(t.toString())}}function T$(n){return!(!n.startsWith("0x")||n.length!==66)}var ol=Mu(Ou()),Nh=Mu(Ou()),nh=Mu(Ou()),Rl=new nh.default(0);new nh.default(1);var I$=new nh.default(2);I$.pow(new nh.default(128));var x$=new nh.default("18446744073709551615"),al=1e9;function N_(n,e,t){let r=Rl;return e?r=n.mul(new Nh.default(al-t*al)).div(new Nh.default(al)):r=n.mul(new Nh.default(al+t*al)).div(new Nh.default(al)),Number(r.toString())}function E$(n,e,t){return new hd(n).mul(hd.pow(2,-64)).pow(2).mul(hd.pow(10,e-t))}function M$(n,e,t){return on(this,null,function*(){var r,i,s,o,a;const{from:c,target:l,amount:u,byAmountIn:d,pools:h}=e,f=Ha(c),m=Ha(l),w=new fL.Transaction,y=C$(f,m),C="0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee",A=y?f:m,M=y?m:f,H=[A,M];for(let g=0;g<h.length;g++){const k=[w.object(h[g]),w.pure.bool(y),w.pure.bool(d),w.pure.u64(u.toString())];w.moveCall({target:`${C}::fetcher_script::calculate_swap_result`,arguments:k,typeArguments:H})}if(!T$(t))throw new AggregateError("Aggregator package not set","InvalidWallet");const G=yield n.devInspectTransactionBlock({transactionBlock:w,sender:t});if(G.error!=null)throw new AggregateError("Aggregator package not set","SimulateError");const q=(r=G.events)==null?void 0:r.filter(g=>g.type.includes("CalculatedSwapResultEvent"));if(q.length===0||q.length!==h.length)throw new AggregateError("Simulate event result error","simulateEventError");let X=d?Rl:x$,E=0;for(let g=0;g<q.length;g+=1)if(!q[g].parsedJson.data.is_exceed)if(e.byAmountIn){const k=new ol.BN(q[g].parsedJson.data.amount_out);k.gt(X)&&(E=g,X=k)}else{const k=new ol.BN(q[g].parsedJson.data.amount_out);k.lt(X)&&(E=g,X=k)}const j=q[E].parsedJson.data;console.log("event",JSON.stringify(j,null,2));const R=j.step_results[0].current_sqrt_price,[V,U]=yield Promise.all([n.getCoinMetadata({coinType:A}).then(g=>g==null?void 0:g.decimals),n.getCoinMetadata({coinType:M}).then(g=>g==null?void 0:g.decimals)]);if(V==null||U==null)throw new AggregateError("Simulate event result error","CannotGetDecimals");const Y=E$(R,V,U),x={amountIn:new ol.BN((i=j.amount_in)!=null?i:0),amountOut:new ol.BN((s=j.amount_out)!=null?s:0),routes:[{path:[{id:h[E],direction:y,provider:"CETUS",from:f,target:m,feeRate:j.fee_rate,amountIn:j.amount_in,amountOut:j.amount_out}],amountIn:new ol.BN((o=j.amount_in)!=null?o:0),amountOut:new ol.BN((a=j.amount_out)!=null?a:0),initialPrice:Y}],insufficientLiquidity:!1};return{isExceed:j.is_exceed,routeData:x}})}var O$=class{constructor(n){if(n!==0)throw new Error("Kriya clmm only supported on mainnet");this.version="0xf5145a7ac345ca8736cf8c76047d00d6d378f30e81be6f6eb557184d9de93c78"}swap(n,e,t,r){return on(this,null,function*(){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["swap_a2b",s,o]:["swap_b2a",o,s],u=[e.object(t.id),r,e.object(this.version),e.object(bu)];return e.moveCall({target:`${n.publishedAt()}::kriya_clmm::${a}`,typeArguments:[c,l],arguments:u})})}},N$=class{constructor(n){if(n!==0)throw new Error("Haedal only supported on mainnet")}swap(n,e,t,r){return on(this,null,function*(){const{direction:i}=t;if(!i)throw new Error("Haedal not support b2a swap");const s="swap_a2b",o=[e.object(t.id),e.object("0x5"),r];return e.moveCall({target:`${n.publishedAt()}::haedal::${s}`,typeArguments:[],arguments:o})})}},j$=class{constructor(n){if(n!==0)throw new Error("Afsui only supported on mainnet");this.stakedSuiVault="0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",this.safe="0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",this.referVault="0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",this.validator="0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2"}swap(n,e,t,r){return on(this,null,function*(){const{direction:i}=t;if(!i)throw new Error("Afsui not support b2a swap");const s="swap_a2b",o=[e.object(this.stakedSuiVault),e.object(this.safe),e.object("0x5"),e.object(this.referVault),e.object(this.validator),r];return e.moveCall({target:`${n.publishedAt()}::afsui::${s}`,typeArguments:[],arguments:o})})}},D$=class{constructor(n){if(n!==0)throw new Error("Volo only supported on mainnet");this.nativePool="0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",this.metadata="0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60"}swap(n,e,t,r){return on(this,null,function*(){const{direction:i}=t;if(!i)throw new Error("Volo not support b2a swap");const s="swap_a2b",o=[e.object(this.nativePool),e.object(this.metadata),e.object("0x5"),r];return e.moveCall({target:`${n.publishedAt()}::volo::${s}`,typeArguments:[],arguments:o})})}},B$=class{constructor(n){if(n!==0)throw new Error("Flowx clmm only supported on mainnet");this.versioned="0x67624a1533b5aff5d0dfcf5e598684350efd38134d2d245f475524c03a64e656",this.poolRegistry="0x27565d24a4cd51127ac90e4074a841bbe356cca7bf5759ddc14a975be1632abc"}swap(n,e,t,r){return on(this,null,function*(){const{direction:i,from:s,target:o}=t,[a,c,l]=i?["swap_a2b",s,o]:["swap_b2a",o,s],u=[e.object(this.poolRegistry),e.pure.u64(t.feeRate*1e6),r,e.object(this.versioned),e.object(bu)];return e.moveCall({target:`${n.publishedAt()}::flowx_clmm::${a}`,typeArguments:[c,l],arguments:u})})}},IC="CETUS",R$="DEEPBOOK",P$="KRIYA",U$="FLOWX",F$="FLOWXV3",L$="KRIYAV3",xC="TURBOS",Y0="AFTERMATH",$$="HAEDAL",V$="VOLO",q$="AFSUI",z$=class{constructor(n,e,t,r){this.endpoint=n,this.client=t,this.signer=e,this.env=r,this.allCoins=[]}getAllCoins(){return on(this,null,function*(){let n=null,e=50;const t=[];for(;;){const r=yield this.client.getAllCoins({owner:this.signer,cursor:n,limit:e});for(const i of r.data)t.push({coinAddress:Gl(i.coinType).source_address,coinObjectId:i.coinObjectId,balance:BigInt(i.balance)});if(r.data.length<e)break;n=r.data[e-1].coinObjectId}return t})}findRouters(n){return on(this,null,function*(){return Z$(this.endpoint,n)})}expectInputSwap(n,e,t,r,i){return on(this,null,function*(){if(t.length===0)throw new Error("No router found");const s=t.map(d=>d.amountIn.toString()),o=t[0].path[0].from,a=t[0].path[t[0].path.length-1].target,c=n.splitCoins(e,s),l=[];for(let d=0;d<t.length;d++){if(t[d].path.length===0)throw new Error("Empty path");let h=c[d];for(const f of t[d].path)h=yield this.newDex(f.provider,i).swap(this,n,f,h);l.push(h)}return this.transferOrDestoryCoin(n,e,o),this.checkCoinThresholdAndMergeCoin(n,l,a,r)})}expectOutputSwap(n,e,t,r){return on(this,null,function*(){const i=[],s=[],o=[],a=new I_(this.env,r);for(let l=0;l<t.length;l++){const u=t[l];for(let h=u.path.length-1;h>=0;h--){const f=u.path[h],m=a.flash_swap(this,n,f,!1);i.unshift(m.targetCoin),s.unshift(m.flashReceipt)}let d=e;for(let h=0;h<u.path.length;h++){const f=u.path[h],m=a.repay_flash_swap(this,n,f,d,s[h]);d=i[h],h===0?e=m:this.transferOrDestoryCoin(n,m,f.from),h===u.path.length-1&&o.push(d)}}const c=t[0].path[0].from;if(this.transferOrDestoryCoin(n,e,c),o.length>1){const l=n.makeMoveVec({elements:o.slice(1)});n.moveCall({target:`${W0.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[t[0].path[t[0].path.length-1].target],arguments:[o[0],l]})}return o[0]})}swapInPools(n){return on(this,null,function*(){let e;try{e=yield M$(this.client,n,this.signer)}catch(t){return console.error("swapInPools error:",t),null}return e})}routerSwap(n){return on(this,null,function*(){const{routers:e,inputCoin:t,slippage:r,byAmountIn:i,txb:s,partner:o}=n,a=e.reduce((h,f)=>h.add(f.amountIn),new Lo.default(0)),c=e.reduce((h,f)=>h.add(f.amountOut),new Lo.default(0)),l=N_(i?c:a,i,r);if(i)return yield this.expectInputSwap(s,t,e,new Lo.default(l),o);const u=s.splitCoins(t,[l.toString()]);return this.transferOrDestoryCoin(s,t,e[0].path[0].from),yield this.expectOutputSwap(s,u[0],e,o)})}fastRouterSwap(n){return on(this,null,function*(){const{routers:e,byAmountIn:t,slippage:r,txb:i,partner:s,isMergeTragetCoin:o,refreshAllCoins:a}=n;(a||this.allCoins.length===0)&&(this.allCoins=yield this.getAllCoins());const c=e[0].path[0].from,l=e[0].path[e[0].path.length-1].target,u=e.reduce((y,C)=>y.add(C.amountIn),new Lo.default(0)),d=e.reduce((y,C)=>y.add(C.amountOut),new Lo.default(0)),h=N_(t?d:u,t,r),f=t?u:h,m=O_(i,this.allCoins,BigInt(f.toString()),c),w=yield this.routerSwap({routers:e,inputCoin:m.targetCoin,slippage:r,byAmountIn:t,txb:i,partner:s});if(o){const y=O_(i,this.allCoins,BigInt(0),l);i.mergeCoins(y.targetCoin,[w]),y.isMintZeroCoin&&this.transferOrDestoryCoin(i,y.targetCoin,l)}else this.transferOrDestoryCoin(i,w,l)})}publishedAt(){return this.env===0?"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302":"0x6cbaa3e9fbe902d90191b12f315932bc58079cba422bafbd4b4369f80e61f595"}transferOrDestoryCoin(n,e,t){n.moveCall({target:`${this.publishedAt()}::utils::transfer_or_destroy_coin`,typeArguments:[t],arguments:[e]})}checkCoinThresholdAndMergeCoin(n,e,t,r){let i=e[0];if(e.length>1){let s=n.makeMoveVec({elements:e.slice(1)});n.moveCall({target:`${W0.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[t],arguments:[e[0],s]}),i=e[0]}return n.moveCall({target:`${this.publishedAt()}::utils::check_coin_threshold`,typeArguments:[t],arguments:[i,n.pure.u64(r.toString())]}),i}newDex(n,e){switch(n){case IC:return new I_(this.env,e);case R$:return new w$(this.env);case P$:return new y$(this.env);case L$:return new O$(this.env);case U$:return new b$(this.env);case F$:return new B$(this.env);case xC:return new _$(this.env);case Y0:return new g$(this.env);case $$:return new N$(this.env);case q$:return new j$(this.env);case V$:return new D$(this.env);default:throw new Error(`Unsupported dex ${n}`)}}signAndExecuteTransaction(n,e){return on(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:n,signer:e,options:{showEffects:!0,showEvents:!0,showInput:!0,showBalanceChanges:!0}})})}devInspectTransactionBlock(n){return on(this,null,function*(){return yield this.client.devInspectTransactionBlock({transactionBlock:n,sender:this.signer})})}sendTransaction(n,e){return on(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:n,signer:e})})}};function W$(n){return{amountIn:new Lo.default(n.amount_in.toString()),amountOut:new Lo.default(n.amount_out.toString()),insufficientLiquidity:!1,routes:n.routes.map(e=>({path:e.path.map(t=>{var r,i,s;let o;t.provider===Y0&&(o=t.extended_details.aftermath_pool_flatness===0?"v2":"v3");let a;return(t.provider===xC||t.provider===Y0||t.provider===IC)&&(a={aftermathLpSupplyType:(r=t.extended_details)==null?void 0:r.aftermath_lp_supply_type,turbosFeeType:(i=t.extended_details)==null?void 0:i.turbos_fee_type,afterSqrtPrice:(s=t.extended_details)==null?void 0:s.after_sqrt_price}),{id:t.id,direction:t.direction,provider:t.provider,from:t.from,target:t.target,feeRate:t.fee_rate,amountIn:t.amount_in,amountOut:t.amount_out,extendedDetails:a,version:o}}),amountIn:new Lo.default(e.amount_in.toString()),amountOut:new Lo.default(e.amount_out.toString()),initialPrice:new hd(e.initial_price.toString())}))}}var bu="0x0000000000000000000000000000000000000000000000000000000000000006",j_=Mu(Ou()),K$=n=>n.map(t=>pC(fC({},t),{amountIn:new j_.default(t.amountIn),amountOut:new j_.default(t.amountOut),initialPrice:new hd(t.initialPrice.toString()),path:t.path}));function Z$(n,e){return on(this,null,function*(){let t;if(e.liquidityChanges&&e.liquidityChanges.length>0?t=yield H$(n,e):t=yield Q$(n,e),!t)return null;if(!t.ok)return{amountIn:Rl,amountOut:Rl,routes:[],insufficientLiquidity:!1,error:{code:10001,msg:M_(10001)}};const r=yield t.json();if(r.data!=null)return W$(r.data);const i=r.msg==="liquidity is not enough";return{amountIn:Rl,amountOut:Rl,routes:[],insufficientLiquidity:i,error:{code:10003,msg:M_(10003)}}})}function Q$(n,e){return on(this,null,function*(){try{const{from:t,target:r,amount:i,byAmountIn:s,depth:o,splitAlgorithm:a,splitFactor:c,splitCount:l,providers:u}=e,d=Ha(t),h=Ha(r);let f=`${n}?from=${d}&target=${h}&amount=${i.toString()}&by_amount_in=${s}`;return o&&(f+=`&depth=${o}`),a&&(f+=`&split_algorithm=${a}`),c&&(f+=`&split_factor=${c}`),l&&(f+=`&split_count=${l}`),u&&u.length>0&&(f+=`&providers=${u.join(",")}`),yield fetch(f)}catch(t){return console.error(t),null}})}function H$(n,e){return on(this,null,function*(){const{from:t,target:r,amount:i,byAmountIn:s,depth:o,splitAlgorithm:a,splitFactor:c,splitCount:l,providers:u,liquidityChanges:d}=e,h=Ha(t),f=Ha(r),m=`${n}`,w=u==null?void 0:u.join(","),y={from:h,target:f,amount:Number(i.toString()),by_amount_in:s,depth:o,split_algorithm:a,split_factor:c,split_count:l,providers:w,liquidity_changes:d.map(C=>({pool:C.poolID,tick_lower:C.ticklower,tick_upper:C.tickUpper,delta_liquidity:C.deltaLiquidity}))};console.log("requestData",JSON.stringify(y,null,2));try{return yield fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})}catch(C){return console.error("Error:",C),null}})}var EC=(n=>(n[n.Mainnet=0]="Mainnet",n[n.Testnet=1]="Testnet",n))(EC||{}),G$=z$,Y$=EC,X$=K$;function J$(n){var i;const e=n.startsWith("0x")?n.slice(2):n,r=((i=(e.length%2===0?e:`0${e}}`).match(/.{2}/g))==null?void 0:i.map(s=>parseInt(s,16)))??[];return Uint8Array.from(r)}function eV(n){return n.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}let jh;const tV=new Uint8Array(16);function nV(){if(!jh&&(jh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!jh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jh(tV)}const vr=[];for(let n=0;n<256;++n)vr.push((n+256).toString(16).slice(1));function rV(n,e=0){return vr[n[e+0]]+vr[n[e+1]]+vr[n[e+2]]+vr[n[e+3]]+"-"+vr[n[e+4]]+vr[n[e+5]]+"-"+vr[n[e+6]]+vr[n[e+7]]+"-"+vr[n[e+8]]+vr[n[e+9]]+"-"+vr[n[e+10]]+vr[n[e+11]]+vr[n[e+12]]+vr[n[e+13]]+vr[n[e+14]]+vr[n[e+15]]}const iV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D_={randomUUID:iV};function Dh(n,e,t){if(D_.randomUUID&&!e&&!n)return D_.randomUUID();n=n||{};const r=n.random||(n.rng||nV)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return rV(r)}function MC(n,e){return function(){return n.apply(e,arguments)}}const{toString:sV}=Object.prototype,{getPrototypeOf:Qy}=Object,Cm=(n=>e=>{const t=sV.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),zs=n=>(n=n.toLowerCase(),e=>Cm(e)===n),Am=n=>e=>typeof e===n,{isArray:Nu}=Array,Td=Am("undefined");function oV(n){return n!==null&&!Td(n)&&n.constructor!==null&&!Td(n.constructor)&&ji(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const OC=zs("ArrayBuffer");function aV(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&OC(n.buffer),e}const cV=Am("string"),ji=Am("function"),NC=Am("number"),Tm=n=>n!==null&&typeof n=="object",lV=n=>n===!0||n===!1,Of=n=>{if(Cm(n)!=="object")return!1;const e=Qy(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},uV=zs("Date"),dV=zs("File"),hV=zs("Blob"),fV=zs("FileList"),pV=n=>Tm(n)&&ji(n.pipe),mV=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ji(n.append)&&((e=Cm(n))==="formdata"||e==="object"&&ji(n.toString)&&n.toString()==="[object FormData]"))},gV=zs("URLSearchParams"),[wV,yV,bV,_V]=["ReadableStream","Request","Response","Headers"].map(zs),vV=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Nu(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function jC(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const xc=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),DC=n=>!Td(n)&&n!==xc;function X0(){const{caseless:n}=DC(this)&&this||{},e={},t=(r,i)=>{const s=n&&jC(e,i)||i;Of(e[s])&&Of(r)?e[s]=X0(e[s],r):Of(r)?e[s]=X0({},r):Nu(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&rh(arguments[r],t);return e}const kV=(n,e,t,{allOwnKeys:r}={})=>(rh(e,(i,s)=>{t&&ji(i)?n[s]=MC(i,t):n[s]=i},{allOwnKeys:r}),n),SV=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),CV=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},AV=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&Qy(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},TV=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},IV=n=>{if(!n)return null;if(Nu(n))return n;let e=n.length;if(!NC(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},xV=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Qy(Uint8Array)),EV=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},MV=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},OV=zs("HTMLFormElement"),NV=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),B_=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),jV=zs("RegExp"),BC=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};rh(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},DV=n=>{BC(n,(e,t)=>{if(ji(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(ji(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},BV=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Nu(n)?r(n):r(String(n).split(e)),t},RV=()=>{},PV=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,Ig="abcdefghijklmnopqrstuvwxyz",R_="0123456789",RC={DIGIT:R_,ALPHA:Ig,ALPHA_DIGIT:Ig+Ig.toUpperCase()+R_},UV=(n=16,e=RC.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function FV(n){return!!(n&&ji(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const LV=n=>{const e=new Array(10),t=(r,i)=>{if(Tm(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Nu(r)?[]:{};return rh(r,(o,a)=>{const c=t(o,i+1);!Td(c)&&(s[a]=c)}),e[i]=void 0,s}}return r};return t(n,0)},$V=zs("AsyncFunction"),VV=n=>n&&(Tm(n)||ji(n))&&ji(n.then)&&ji(n.catch),PC=((n,e)=>n?setImmediate:e?((t,r)=>(xc.addEventListener("message",({source:i,data:s})=>{i===xc&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),xc.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ji(xc.postMessage)),qV=typeof queueMicrotask<"u"?queueMicrotask.bind(xc):typeof process<"u"&&process.nextTick||PC,de={isArray:Nu,isArrayBuffer:OC,isBuffer:oV,isFormData:mV,isArrayBufferView:aV,isString:cV,isNumber:NC,isBoolean:lV,isObject:Tm,isPlainObject:Of,isReadableStream:wV,isRequest:yV,isResponse:bV,isHeaders:_V,isUndefined:Td,isDate:uV,isFile:dV,isBlob:hV,isRegExp:jV,isFunction:ji,isStream:pV,isURLSearchParams:gV,isTypedArray:xV,isFileList:fV,forEach:rh,merge:X0,extend:kV,trim:vV,stripBOM:SV,inherits:CV,toFlatObject:AV,kindOf:Cm,kindOfTest:zs,endsWith:TV,toArray:IV,forEachEntry:EV,matchAll:MV,isHTMLForm:OV,hasOwnProperty:B_,hasOwnProp:B_,reduceDescriptors:BC,freezeMethods:DV,toObjectSet:BV,toCamelCase:NV,noop:RV,toFiniteNumber:PV,findKey:jC,global:xc,isContextDefined:DC,ALPHABET:RC,generateString:UV,isSpecCompliantForm:FV,toJSONObject:LV,isAsyncFn:$V,isThenable:VV,setImmediate:PC,asap:qV};function gt(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}de.inherits(gt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:de.toJSONObject(this.config),code:this.code,status:this.status}}});const UC=gt.prototype,FC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{FC[n]={value:n}});Object.defineProperties(gt,FC);Object.defineProperty(UC,"isAxiosError",{value:!0});gt.from=(n,e,t,r,i,s)=>{const o=Object.create(UC);return de.toFlatObject(n,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),gt.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const zV=null;function J0(n){return de.isPlainObject(n)||de.isArray(n)}function LC(n){return de.endsWith(n,"[]")?n.slice(0,-2):n}function P_(n,e,t){return n?n.concat(e).map(function(i,s){return i=LC(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function WV(n){return de.isArray(n)&&!n.some(J0)}const KV=de.toFlatObject(de,{},null,function(e){return/^is[A-Z]/.test(e)});function Im(n,e,t){if(!de.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=de.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,y){return!de.isUndefined(y[w])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&de.isSpecCompliantForm(e);if(!de.isFunction(i))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(de.isDate(m))return m.toISOString();if(!c&&de.isBlob(m))throw new gt("Blob is not supported. Use a Buffer instead.");return de.isArrayBuffer(m)||de.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,w,y){let C=m;if(m&&!y&&typeof m=="object"){if(de.endsWith(w,"{}"))w=r?w:w.slice(0,-2),m=JSON.stringify(m);else if(de.isArray(m)&&WV(m)||(de.isFileList(m)||de.endsWith(w,"[]"))&&(C=de.toArray(m)))return w=LC(w),C.forEach(function(M,H){!(de.isUndefined(M)||M===null)&&e.append(o===!0?P_([w],H,s):o===null?w:w+"[]",l(M))}),!1}return J0(m)?!0:(e.append(P_(y,w,s),l(m)),!1)}const d=[],h=Object.assign(KV,{defaultVisitor:u,convertValue:l,isVisitable:J0});function f(m,w){if(!de.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(m),de.forEach(m,function(C,A){(!(de.isUndefined(C)||C===null)&&i.call(e,C,de.isString(A)?A.trim():A,w,h))===!0&&f(C,w?w.concat(A):[A])}),d.pop()}}if(!de.isObject(n))throw new TypeError("data must be an object");return f(n),e}function U_(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Hy(n,e){this._pairs=[],n&&Im(n,this,e)}const $C=Hy.prototype;$C.append=function(e,t){this._pairs.push([e,t])};$C.toString=function(e){const t=e?function(r){return e.call(this,r,U_)}:U_;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function ZV(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function VC(n,e,t){if(!e)return n;const r=t&&t.encode||ZV,i=t&&t.serialize;let s;if(i?s=i(e,t):s=de.isURLSearchParams(e)?e.toString():new Hy(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class QV{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){de.forEach(this.handlers,function(r){r!==null&&e(r)})}}const F_=QV,qC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},HV=typeof URLSearchParams<"u"?URLSearchParams:Hy,GV=typeof FormData<"u"?FormData:null,YV=typeof Blob<"u"?Blob:null,XV={isBrowser:!0,classes:{URLSearchParams:HV,FormData:GV,Blob:YV},protocols:["http","https","file","blob","url","data"]},Gy=typeof window<"u"&&typeof document<"u",ew=typeof navigator=="object"&&navigator||void 0,JV=Gy&&(!ew||["ReactNative","NativeScript","NS"].indexOf(ew.product)<0),eq=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),tq=Gy&&window.location.href||"http://localhost",nq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gy,hasStandardBrowserEnv:JV,hasStandardBrowserWebWorkerEnv:eq,navigator:ew,origin:tq},Symbol.toStringTag,{value:"Module"})),hi={...nq,...XV};function rq(n,e){return Im(n,new hi.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return hi.isNode&&de.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function iq(n){return de.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function sq(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function zC(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=t.length;return o=!o&&de.isArray(i)?i.length:o,c?(de.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!de.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&de.isArray(i[o])&&(i[o]=sq(i[o])),!a)}if(de.isFormData(n)&&de.isFunction(n.entries)){const t={};return de.forEachEntry(n,(r,i)=>{e(iq(r),i,t,0)}),t}return null}function oq(n,e,t){if(de.isString(n))try{return(e||JSON.parse)(n),de.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Yy={transitional:qC,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=de.isObject(e);if(s&&de.isHTMLForm(e)&&(e=new FormData(e)),de.isFormData(e))return i?JSON.stringify(zC(e)):e;if(de.isArrayBuffer(e)||de.isBuffer(e)||de.isStream(e)||de.isFile(e)||de.isBlob(e)||de.isReadableStream(e))return e;if(de.isArrayBufferView(e))return e.buffer;if(de.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rq(e,this.formSerializer).toString();if((a=de.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Im(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),oq(e)):e}],transformResponse:[function(e){const t=this.transitional||Yy.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(de.isResponse(e)||de.isReadableStream(e))return e;if(e&&de.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?gt.from(a,gt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hi.classes.FormData,Blob:hi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};de.forEach(["delete","get","head","post","put","patch"],n=>{Yy.headers[n]={}});const Xy=Yy,aq=de.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cq=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&aq[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},L_=Symbol("internals");function zu(n){return n&&String(n).trim().toLowerCase()}function Nf(n){return n===!1||n==null?n:de.isArray(n)?n.map(Nf):String(n)}function lq(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const uq=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function xg(n,e,t,r,i){if(de.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!de.isString(e)){if(de.isString(r))return e.indexOf(r)!==-1;if(de.isRegExp(r))return r.test(e)}}function dq(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function hq(n,e){const t=de.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let xm=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,c,l){const u=zu(c);if(!u)throw new Error("header name must be a non-empty string");const d=de.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=Nf(a))}const o=(a,c)=>de.forEach(a,(l,u)=>s(l,u,c));if(de.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(de.isString(e)&&(e=e.trim())&&!uq(e))o(cq(e),t);else if(de.isHeaders(e))for(const[a,c]of e.entries())s(c,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=zu(e),e){const r=de.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return lq(i);if(de.isFunction(t))return t.call(this,i,r);if(de.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=zu(e),e){const r=de.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||xg(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=zu(o),o){const a=de.findKey(r,o);a&&(!t||xg(r,r[a],a,t))&&(delete r[a],i=!0)}}return de.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||xg(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return de.forEach(this,(i,s)=>{const o=de.findKey(r,s);if(o){t[o]=Nf(i),delete t[s];return}const a=e?dq(s):String(s).trim();a!==s&&delete t[s],t[a]=Nf(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return de.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&de.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[L_]=this[L_]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=zu(o);r[a]||(hq(i,o),r[a]=!0)}return de.isArray(e)?e.forEach(s):s(e),this}};xm.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);de.reduceDescriptors(xm.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});de.freezeMethods(xm);const Bs=xm;function Eg(n,e){const t=this||Xy,r=e||t,i=Bs.from(r.headers);let s=r.data;return de.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function WC(n){return!!(n&&n.__CANCEL__)}function ju(n,e,t){gt.call(this,n??"canceled",gt.ERR_CANCELED,e,t),this.name="CanceledError"}de.inherits(ju,gt,{__CANCEL__:!0});function KC(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new gt("Request failed with status code "+t.status,[gt.ERR_BAD_REQUEST,gt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function fq(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function pq(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=r[s];o||(o=l),t[i]=c,r[i]=l;let d=s,h=0;for(;d!==i;)h+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),l-o<e)return;const f=u&&l-u;return f?Math.round(h*1e3/f):void 0}}function mq(n,e){let t=0,r=1e3/e,i,s;const o=(l,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),n.apply(null,l)};return[(...l)=>{const u=Date.now(),d=u-t;d>=r?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const Ep=(n,e,t=3)=>{let r=0;const i=pq(50,250);return mq(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},$_=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},V_=n=>(...e)=>de.asap(()=>n(...e)),gq=hi.hasStandardBrowserEnv?function(){const e=hi.navigator&&/(msie|trident)/i.test(hi.navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=de.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),wq=hi.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];de.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),de.isString(r)&&o.push("path="+r),de.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yq(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function bq(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function ZC(n,e){return n&&!yq(e)?bq(n,e):e}const q_=n=>n instanceof Bs?{...n}:n;function Kc(n,e){e=e||{};const t={};function r(l,u,d){return de.isPlainObject(l)&&de.isPlainObject(u)?de.merge.call({caseless:d},l,u):de.isPlainObject(u)?de.merge({},u):de.isArray(u)?u.slice():u}function i(l,u,d){if(de.isUndefined(u)){if(!de.isUndefined(l))return r(void 0,l,d)}else return r(l,u,d)}function s(l,u){if(!de.isUndefined(u))return r(void 0,u)}function o(l,u){if(de.isUndefined(u)){if(!de.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,d){if(d in e)return r(l,u);if(d in n)return r(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>i(q_(l),q_(u),!0)};return de.forEach(Object.keys(Object.assign({},n,e)),function(u){const d=c[u]||i,h=d(n[u],e[u],u);de.isUndefined(h)&&d!==a||(t[u]=h)}),t}const QC=n=>{const e=Kc({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Bs.from(o),e.url=VC(ZC(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(de.isFormData(t)){if(hi.hasStandardBrowserEnv||hi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(hi.hasStandardBrowserEnv&&(r&&de.isFunction(r)&&(r=r(e)),r||r!==!1&&gq(e.url))){const l=i&&s&&wq.read(s);l&&o.set(i,l)}return e},_q=typeof XMLHttpRequest<"u",vq=_q&&function(n){return new Promise(function(t,r){const i=QC(n);let s=i.data;const o=Bs.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,d,h,f,m;function w(){f&&f(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function C(){if(!y)return;const M=Bs.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),G={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:M,config:n,request:y};KC(function(X){t(X),w()},function(X){r(X),w()},G),y=null}"onloadend"in y?y.onloadend=C:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(C)},y.onabort=function(){y&&(r(new gt("Request aborted",gt.ECONNABORTED,n,y)),y=null)},y.onerror=function(){r(new gt("Network Error",gt.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let H=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const G=i.transitional||qC;i.timeoutErrorMessage&&(H=i.timeoutErrorMessage),r(new gt(H,G.clarifyTimeoutError?gt.ETIMEDOUT:gt.ECONNABORTED,n,y)),y=null},s===void 0&&o.setContentType(null),"setRequestHeader"in y&&de.forEach(o.toJSON(),function(H,G){y.setRequestHeader(G,H)}),de.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),a&&a!=="json"&&(y.responseType=i.responseType),l&&([h,m]=Ep(l,!0),y.addEventListener("progress",h)),c&&y.upload&&([d,f]=Ep(c),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",f)),(i.cancelToken||i.signal)&&(u=M=>{y&&(r(!M||M.type?new ju(null,n,y):M),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const A=fq(i.url);if(A&&hi.protocols.indexOf(A)===-1){r(new gt("Unsupported protocol "+A+":",gt.ERR_BAD_REQUEST,n));return}y.send(s||null)})},kq=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(l){if(!i){i=!0,a();const u=l instanceof Error?l:this.reason;r.abort(u instanceof gt?u:new ju(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new gt(`timeout ${e} of ms exceeded`,gt.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),n=null)};n.forEach(l=>l.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>de.asap(a),c}},Sq=kq,Cq=function*(n,e){let t=n.byteLength;if(!e||t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},Aq=async function*(n,e){for await(const t of Tq(n))yield*Cq(t,e)},Tq=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},z_=(n,e,t,r)=>{const i=Aq(n,e);let s=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){a(),c.close();return}let d=u.byteLength;if(t){let h=s+=d;t(h)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},Em=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",HC=Em&&typeof ReadableStream=="function",Iq=Em&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),GC=(n,...e)=>{try{return!!n(...e)}catch{return!1}},xq=HC&&GC(()=>{let n=!1;const e=new Request(hi.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),W_=64*1024,tw=HC&&GC(()=>de.isReadableStream(new Response("").body)),Mp={stream:tw&&(n=>n.body)};Em&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Mp[e]&&(Mp[e]=de.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new gt(`Response type '${e}' is not supported`,gt.ERR_NOT_SUPPORT,r)})})})(new Response);const Eq=async n=>{if(n==null)return 0;if(de.isBlob(n))return n.size;if(de.isSpecCompliantForm(n))return(await new Request(hi.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(de.isArrayBufferView(n)||de.isArrayBuffer(n))return n.byteLength;if(de.isURLSearchParams(n)&&(n=n+""),de.isString(n))return(await Iq(n)).byteLength},Mq=async(n,e)=>{const t=de.toFiniteNumber(n.getContentLength());return t??Eq(e)},Oq=Em&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=QC(n);l=l?(l+"").toLowerCase():"text";let f=Sq([i,s&&s.toAbortSignal()],o),m;const w=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let y;try{if(c&&xq&&t!=="get"&&t!=="head"&&(y=await Mq(u,r))!==0){let G=new Request(e,{method:"POST",body:r,duplex:"half"}),q;if(de.isFormData(r)&&(q=G.headers.get("content-type"))&&u.setContentType(q),G.body){const[X,E]=$_(y,Ep(V_(c)));r=z_(G.body,W_,X,E)}}de.isString(d)||(d=d?"include":"omit");const C="credentials"in Request.prototype;m=new Request(e,{...h,signal:f,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:C?d:void 0});let A=await fetch(m);const M=tw&&(l==="stream"||l==="response");if(tw&&(a||M&&w)){const G={};["status","statusText","headers"].forEach(j=>{G[j]=A[j]});const q=de.toFiniteNumber(A.headers.get("content-length")),[X,E]=a&&$_(q,Ep(V_(a),!0))||[];A=new Response(z_(A.body,W_,X,()=>{E&&E(),w&&w()}),G)}l=l||"text";let H=await Mp[de.findKey(Mp,l)||"text"](A,n);return!M&&w&&w(),await new Promise((G,q)=>{KC(G,q,{data:H,headers:Bs.from(A.headers),status:A.status,statusText:A.statusText,config:n,request:m})})}catch(C){throw w&&w(),C&&C.name==="TypeError"&&/fetch/i.test(C.message)?Object.assign(new gt("Network Error",gt.ERR_NETWORK,n,m),{cause:C.cause||C}):gt.from(C,C&&C.code,n,m)}}),nw={http:zV,xhr:vq,fetch:Oq};de.forEach(nw,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const K_=n=>`- ${n}`,Nq=n=>de.isFunction(n)||n===null||n===!1,YC={getAdapter:n=>{n=de.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!Nq(t)&&(r=nw[(o=String(t)).toLowerCase()],r===void 0))throw new gt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(K_).join(`
`):" "+K_(s[0]):"as no adapter specified";throw new gt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:nw};function Mg(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new ju(null,n)}function Z_(n){return Mg(n),n.headers=Bs.from(n.headers),n.data=Eg.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),YC.getAdapter(n.adapter||Xy.adapter)(n).then(function(r){return Mg(n),r.data=Eg.call(n,n.transformResponse,r),r.headers=Bs.from(r.headers),r},function(r){return WC(r)||(Mg(n),r&&r.response&&(r.response.data=Eg.call(n,n.transformResponse,r.response),r.response.headers=Bs.from(r.response.headers))),Promise.reject(r)})}const XC="1.7.7",Jy={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Jy[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Q_={};Jy.transitional=function(e,t,r){function i(s,o){return"[Axios v"+XC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new gt(i(o," has been removed"+(t?" in "+t:"")),gt.ERR_DEPRECATED);return t&&!Q_[o]&&(Q_[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function jq(n,e,t){if(typeof n!="object")throw new gt("options must be an object",gt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],c=a===void 0||o(a,s,n);if(c!==!0)throw new gt("option "+s+" must be "+c,gt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new gt("Unknown option "+s,gt.ERR_BAD_OPTION)}}const rw={assertOptions:jq,validators:Jy},ca=rw.validators;let Op=class{constructor(e){this.defaults=e,this.interceptors={request:new F_,response:new F_}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Kc(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&rw.assertOptions(r,{silentJSONParsing:ca.transitional(ca.boolean),forcedJSONParsing:ca.transitional(ca.boolean),clarifyTimeoutError:ca.transitional(ca.boolean)},!1),i!=null&&(de.isFunction(i)?t.paramsSerializer={serialize:i}:rw.assertOptions(i,{encode:ca.function,serialize:ca.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&de.merge(s.common,s[t.method]);s&&de.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),t.headers=Bs.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(c=c&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const l=[];this.interceptors.response.forEach(function(w){l.push(w.fulfilled,w.rejected)});let u,d=0,h;if(!c){const m=[Z_.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,l),h=m.length,u=Promise.resolve(t);d<h;)u=u.then(m[d++],m[d++]);return u}h=a.length;let f=t;for(d=0;d<h;){const m=a[d++],w=a[d++];try{f=m(f)}catch(y){w.call(this,y);break}}try{u=Z_.call(this,f)}catch(m){return Promise.reject(m)}for(d=0,h=l.length;d<h;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=Kc(this.defaults,e);const t=ZC(e.baseURL,e.url);return VC(t,e.params,e.paramsSerializer)}};de.forEach(["delete","get","head","options"],function(e){Op.prototype[e]=function(t,r){return this.request(Kc(r||{},{method:e,url:t,data:(r||{}).data}))}});de.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(Kc(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Op.prototype[e]=t(),Op.prototype[e+"Form"]=t(!0)});const jf=Op;let Dq=class JC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new ju(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new JC(function(i){e=i}),cancel:e}}};const Bq=Dq;function Rq(n){return function(t){return n.apply(null,t)}}function Pq(n){return de.isObject(n)&&n.isAxiosError===!0}const iw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(iw).forEach(([n,e])=>{iw[e]=n});const Uq=iw;function eA(n){const e=new jf(n),t=MC(jf.prototype.request,e);return de.extend(t,jf.prototype,e,{allOwnKeys:!0}),de.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return eA(Kc(n,i))},t}const Yn=eA(Xy);Yn.Axios=jf;Yn.CanceledError=ju;Yn.CancelToken=Bq;Yn.isCancel=WC;Yn.VERSION=XC;Yn.toFormData=Im;Yn.AxiosError=gt;Yn.Cancel=Yn.CanceledError;Yn.all=function(e){return Promise.all(e)};Yn.spread=Rq;Yn.isAxiosError=Pq;Yn.mergeConfig=Kc;Yn.AxiosHeaders=Bs;Yn.formToJSON=n=>zC(de.isHTMLForm(n)?new FormData(n):n);Yn.getAdapter=YC.getAdapter;Yn.HttpStatusCode=Uq;Yn.default=Yn;const Do=Yn,{Axios:HX,AxiosError:Fq,CanceledError:GX,isCancel:YX,CancelToken:XX,VERSION:JX,all:eJ,Cancel:tJ,isAxiosError:nJ,spread:rJ,toFormData:iJ,AxiosHeaders:sJ,HttpStatusCode:oJ,formToJSON:aJ,getAdapter:cJ,mergeConfig:lJ}=Do;var Lq=Object.defineProperty,$q=(n,e,t)=>e in n?Lq(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vq=(n,e,t)=>($q(n,typeof e!="symbol"?e+"":e,t),t),Bi=5*60*1e3,De=24*60*60*1e3;function Mt(n){return Date.parse(new Date().toString())+n}var Er=class{constructor(n,e=0){v(this,"overdueTime");v(this,"value");this.overdueTime=e,this.value=n}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};ue.config({precision:64,rounding:ue.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var Cr=ue,Me=class extends Error{constructor(e,t){super(e);v(this,"message");v(this,"errorCode");this.message=e,this.errorCode=t}static isClmmpoolsErrorCode(e,t){return e instanceof Me&&e.errorCode===t}},We=new B(0),fo=new B(1),Mm=new B(2);Mm.pow(new B(128));var _u=Mm.pow(new B(64)).sub(fo),qq=Mm.pow(new B(128)).sub(fo),$t=class{static toX64_BN(e){return e.mul(new B(2).pow(new B(64)))}static toX64_Decimal(e){return e.mul(Cr.pow(2,64))}static toX64(e){return new B(e.mul(Cr.pow(2,64)).floor().toFixed())}static fromX64(e){return new Cr(e.toString()).mul(Cr.pow(2,-64))}static fromX64_Decimal(e){return e.mul(Cr.pow(2,-64))}static fromX64_BN(e){return e.div(new B(2).pow(new B(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(_u).gt(We)&&(t=t.add(fo)),t}static divRoundUp(e,t){return e.mod(t).eq(We)?e.div(t):e.div(t).add(new B(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(qq):e.sub(t)}static checkUnsignedSub(e,t){const r=e.sub(t);if(r.isNeg())throw new Me("Unsigned integer sub overflow","UnsignedIntegerOverflow");return r}static checkMul(e,t,r){const i=e.mul(t);if(this.isOverflow(i,r))throw new Me("Multiplication overflow","MultiplicationOverflow");return i}static checkMulDivFloor(e,t,r,i){if(r.eq(We))throw new Me("Devide by zero","DivideByZero");const s=e.mul(t).div(r);if(this.isOverflow(s,i))throw new Me("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivCeil(e,t,r,i){if(r.eq(We))throw new Me("Devide by zero","DivideByZero");const s=e.mul(t).add(r.sub(fo)).div(r);if(this.isOverflow(s,i))throw new Me("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivRound(e,t,r,i){if(r.eq(We))throw new Me("Devide by zero","DivideByZero");const s=e.mul(t.add(r.shrn(1))).div(r);if(this.isOverflow(s,i))throw new Me("Multiplication div overflow","MulDivOverflow");return s}static checkMulShiftRight(e,t,r,i){const s=e.mul(t).div(new B(2).pow(new B(r)));if(this.isOverflow(s,i))throw new Me("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftRight64RoundUpIf(e,t,r,i){const s=e.mul(t),a=i&&s.and(_u).gt(We)?s.shrn(64).add(fo):s.shrn(64);if(this.isOverflow(a,r))throw new Me("Multiplication shift right overflow","MulShiftRightOverflow");return a}static checkMulShiftLeft(e,t,r,i){const s=e.mul(t).shln(r);if(this.isOverflow(s,i))throw new Me("Multiplication shift left overflow","MulShiftLeftOverflow");return s}static checkDivRoundUpIf(e,t,r){if(t.eq(We))throw new Me("Devide by zero","DivideByZero");return r?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(Mm.pow(new B(t)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(We)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new B("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new B(1)))}static neg_from(e){return e.eq(We)?e:this.u128_neg(e).add(new B(1)).or(new B(1).shln(127))}};function zq(n){return{coinA:n.coinTypeA,coinB:n.coinTypeB,currentSqrtPrice:new B(n.current_sqrt_price),currentTickIndex:n.current_tick_index,feeGrowthGlobalA:new B(n.fee_growth_global_a),feeGrowthGlobalB:new B(n.fee_growth_global_b),feeProtocolCoinA:new B(n.fee_protocol_coin_a),feeProtocolCoinB:new B(n.fee_protocol_coin_b),feeRate:new B(n.fee_rate),liquidity:new B(n.liquidity),tickIndexes:[],tickSpacing:Number(n.tickSpacing),ticks:[],collection_name:""}}var Wq=443636,Kq=-443636,Om="79226673515401279992447579055",Nm="4295048016",Pl=new B(1e6),ke="0x0000000000000000000000000000000000000000000000000000000000000006",Zq="partner",fd="pool_script",qa="pool_script_v2",tA="pool_script_v3",Ec="router",Og="router_with_partner",cs="fetcher_script",Qq="expect_swap",H_="utils",Ng="custodian_v2",Hq="clob_v2",Gq="endpoints_v2",nA=(n=>(n.Deleted="Deleted",n.Exists="Exists",n.NotExists="NotExists",n))(nA||{});function J(n){if(n.config===void 0)throw new Me(`package: ${n.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return n.config}var Yq=14,Xq="59543866431248",Jq="184467440737095516",ez="15793534762490258745",tz=443636;function nz(n,e,t){const r=n.toTwos(t).shln(e);return r.imaskn(t+1),r.fromTwos(t)}function _t(n,e,t){const r=n.toTwos(t).shrn(e);return r.imaskn(t-e+1),r.fromTwos(t-e)}function rz(n){let e;return n&1?e=new B("79232123823359799118286999567"):e=new B("79228162514264337593543950336"),n&2&&(e=_t(e.mul(new B("79236085330515764027303304731")),96,256)),n&4&&(e=_t(e.mul(new B("79244008939048815603706035061")),96,256)),n&8&&(e=_t(e.mul(new B("79259858533276714757314932305")),96,256)),n&16&&(e=_t(e.mul(new B("79291567232598584799939703904")),96,256)),n&32&&(e=_t(e.mul(new B("79355022692464371645785046466")),96,256)),n&64&&(e=_t(e.mul(new B("79482085999252804386437311141")),96,256)),n&128&&(e=_t(e.mul(new B("79736823300114093921829183326")),96,256)),n&256&&(e=_t(e.mul(new B("80248749790819932309965073892")),96,256)),n&512&&(e=_t(e.mul(new B("81282483887344747381513967011")),96,256)),n&1024&&(e=_t(e.mul(new B("83390072131320151908154831281")),96,256)),n&2048&&(e=_t(e.mul(new B("87770609709833776024991924138")),96,256)),n&4096&&(e=_t(e.mul(new B("97234110755111693312479820773")),96,256)),n&8192&&(e=_t(e.mul(new B("119332217159966728226237229890")),96,256)),n&16384&&(e=_t(e.mul(new B("179736315981702064433883588727")),96,256)),n&32768&&(e=_t(e.mul(new B("407748233172238350107850275304")),96,256)),n&65536&&(e=_t(e.mul(new B("2098478828474011932436660412517")),96,256)),n&131072&&(e=_t(e.mul(new B("55581415166113811149459800483533")),96,256)),n&262144&&(e=_t(e.mul(new B("38992368544603139932233054999993551")),96,256)),_t(e,32,256)}function iz(n){const e=Math.abs(n);let t;return e&1?t=new B("18445821805675392311"):t=new B("18446744073709551616"),e&2&&(t=_t(t.mul(new B("18444899583751176498")),64,256)),e&4&&(t=_t(t.mul(new B("18443055278223354162")),64,256)),e&8&&(t=_t(t.mul(new B("18439367220385604838")),64,256)),e&16&&(t=_t(t.mul(new B("18431993317065449817")),64,256)),e&32&&(t=_t(t.mul(new B("18417254355718160513")),64,256)),e&64&&(t=_t(t.mul(new B("18387811781193591352")),64,256)),e&128&&(t=_t(t.mul(new B("18329067761203520168")),64,256)),e&256&&(t=_t(t.mul(new B("18212142134806087854")),64,256)),e&512&&(t=_t(t.mul(new B("17980523815641551639")),64,256)),e&1024&&(t=_t(t.mul(new B("17526086738831147013")),64,256)),e&2048&&(t=_t(t.mul(new B("16651378430235024244")),64,256)),e&4096&&(t=_t(t.mul(new B("15030750278693429944")),64,256)),e&8192&&(t=_t(t.mul(new B("12247334978882834399")),64,256)),e&16384&&(t=_t(t.mul(new B("8131365268884726200")),64,256)),e&32768&&(t=_t(t.mul(new B("3584323654723342297")),64,256)),e&65536&&(t=_t(t.mul(new B("696457651847595233")),64,256)),e&131072&&(t=_t(t.mul(new B("26294789957452057")),64,256)),e&262144&&(t=_t(t.mul(new B("37481735321082")),64,256)),t}var Ue=class{static priceToSqrtPriceX64(n,e,t){return $t.toX64(n.mul(Cr.pow(10,t-e)).sqrt())}static sqrtPriceX64ToPrice(n,e,t){return $t.fromX64(n).pow(2).mul(Cr.pow(10,e-t))}static tickIndexToSqrtPriceX64(n){return n>0?new B(rz(n)):new B(iz(n))}static sqrtPriceX64ToTickIndex(n){if(n.gt(new B(Om))||n.lt(new B(Nm)))throw new Me("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const e=n.bitLength()-1,t=new B(e-64),r=nz(t,32,128);let i=new B("8000000000000000","hex"),s=0,o=new B(0),a=e>=64?n.shrn(e-63):n.shln(63-e);for(;i.gt(new B(0))&&s<Yq;){a=a.mul(a);const m=a.shrn(127);a=a.shrn(63+m.toNumber()),o=o.add(i.mul(m)),i=i.shrn(1),s+=1}const c=o.shrn(32),u=r.add(c).mul(new B(Xq)),d=_t(u.sub(new B(Jq)),64,128).toNumber(),h=_t(u.add(new B(ez)),64,128).toNumber();return d===h?d:Ue.tickIndexToSqrtPriceX64(h).lte(n)?h:d}static tickIndexToPrice(n,e,t){return Ue.sqrtPriceX64ToPrice(Ue.tickIndexToSqrtPriceX64(n),e,t)}static priceToTickIndex(n,e,t){return Ue.sqrtPriceX64ToTickIndex(Ue.priceToSqrtPriceX64(n,e,t))}static priceToInitializableTickIndex(n,e,t,r){return Ue.getInitializableTickIndex(Ue.priceToTickIndex(n,e,t),r)}static getInitializableTickIndex(n,e){return n-n%e}static getNextInitializableTickIndex(n,e){return Ue.getInitializableTickIndex(n,e)+e}static getPrevInitializableTickIndex(n,e){return Ue.getInitializableTickIndex(n,e)-e}};function sz(n){return Q(n).add(Q(tz))}new B(365);new B(24);new B(3600);new B(.5);var ro=class{static getDefaultSqrtPriceLimit(n){return new B(n?Nm:Om)}static getDefaultOtherAmountThreshold(n){return n?We:_u}};function rA(n,e,t,r){if(t.eq(We))return n;const i=$t.checkMulShiftLeft(n,e,64,256),s=e.shln(64),o=$t.checkMul(n,t,256);if(!r&&s.lte(o))throw new Me("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=r?$t.checkDivRoundUpIf(i,s.add(o),!0):$t.checkDivRoundUpIf(i,s.sub(o),!0);if(a.lt(new B(Nm)))throw new Me("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new B(Om)))throw new Me("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function iA(n,e,t,r){const i=$t.checkDivRoundUpIf(t.shln(64),e,!r),s=r?n.add(i):n.sub(i);if(s.lt(new B(Nm))||s.gt(new B(Om)))throw new Me("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return s}function oz(n,e,t,r){return r?rA(n,e,t,!0):iA(n,e,t,!0)}function az(n,e,t,r){return r?iA(n,e,t,!1):rA(n,e,t,!1)}function G_(n,e,t,r){const i=n.gt(e)?n.sub(e):e.sub(n);if(t.lte(We)||i.eq(We))return We;let s;if(r){const o=new B(t).mul(new B(i)).shln(64),a=e.mul(n),c=o.div(a);s=o.mod(a).eq(We)?c:c.add(fo)}else{const o=new B(t).mul(new B(i));s=o.and(_u).gt(We)?o.shrn(64).add(fo):o.shrn(64)}return s}function Y_(n,e,t,r){const i=n.gt(e)?n.sub(e):e.sub(n);if(t.lte(We)||i.eq(We))return We;let s;if(r)s=t.mul(i).shrn(64);else{const o=t.mul(i).shln(64),a=e.mul(n);s=o.div(a)}return s}function cz(n,e,t,r,i,s){if(t===We)return{amountIn:We,amountOut:We,nextSqrtPrice:e,feeAmount:We};const o=n.gte(e);let a,c,l,u;if(s){const d=$t.checkMulDivFloor(r,$t.checkUnsignedSub(Pl,i),Pl,64),h=G_(n,e,t,o);h.gt(d)?(a=d,u=$t.checkUnsignedSub(r,d),l=oz(n,t,d,o)):(a=h,u=$t.checkMulDivCeil(a,i,Pl.sub(i),64),l=e),c=Y_(n,l,t,o)}else{const d=Y_(n,e,t,o);d.gt(r)?(c=r,l=az(n,t,r,o)):(c=d,l=e),a=G_(n,l,t,o),u=$t.checkMulDivCeil(a,i,Pl.sub(i),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:l,feeAmount:u}}function lz(n,e,t,r,i){let s=t,o=r.liquidity,{currentSqrtPrice:a}=r;const c={amountIn:We,amountOut:We,feeAmount:We,refAmount:We,nextSqrtPrice:We,crossTickNum:0};let l,u;const d=ro.getDefaultSqrtPriceLimit(n);for(const h of i){if(n&&r.currentTickIndex<h.index||!n&&r.currentTickIndex>=h.index||h===null)continue;n&&d.gt(h.sqrtPrice)||!n&&d.lt(h.sqrtPrice)?l=d:l=h.sqrtPrice;const f=cz(a,l,o,s,r.feeRate,e);if(f.amountIn.eq(We)||(s=e?s.sub(f.amountIn.add(f.feeAmount)):s.sub(f.amountOut)),c.amountIn=c.amountIn.add(f.amountIn),c.amountOut=c.amountOut.add(f.amountOut),c.feeAmount=c.feeAmount.add(f.feeAmount),f.nextSqrtPrice.eq(h.sqrtPrice)?(u=h.liquidityNet.mul(new B(-1)),n?$t.is_neg(u)?o=o.add(new B(Ir(BigInt(u.toString()),128))):o=o.add(u):$t.is_neg(u)?o=o.sub(new B(Ir(BigInt(u.toString()),128))):o=o.sub(u),a=h.sqrtPrice):a=f.nextSqrtPrice,c.crossTickNum+=1,s.eq(We))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function Bh(n,e,t){const r=B.min(n,e),i=B.max(n,e),s=$t.fromX64_BN(t.mul(i).mul(r)),o=i.sub(r);return s.div(o)}function Rh(n,e,t){const r=B.min(n,e),s=B.max(n,e).sub(r);return t.shln(64).div(s)}var fr=class{static updateFeeRate(n,e,t,r,i){const s=$t.checkMulDivCeil(e,new B(r),Pl,64),o=t===0?We:$t.checkMulDivFloor(e,new B(t),Pl,64),a=e.mul(s).mul(o);if(i?n.feeProtocolCoinA=n.feeProtocolCoinA.add(s):n.feeProtocolCoinB=n.feeProtocolCoinB.add(s),a.eq(We)||n.liquidity.eq(We))return{refFee:o,clmm:n};const c=a.shln(64).div(n.liquidity);return i?n.feeGrowthGlobalA=n.feeGrowthGlobalA.add(c):n.feeGrowthGlobalB=n.feeGrowthGlobalB.add(c),{refFee:o,clmm:n}}static getCoinAmountFromLiquidity(n,e,t,r,i){const s=new Cr(n.toString()),o=new Cr(e.toString()),a=new Cr(t.toString()),c=new Cr(r.toString());let l,u;return e.lt(t)?(l=$t.toX64_Decimal(s).mul(c.sub(a)).div(a.mul(c)),u=new Cr(0)):e.lt(r)?(l=$t.toX64_Decimal(s).mul(c.sub(o)).div(o.mul(c)),u=$t.fromX64_Decimal(s.mul(o.sub(a)))):(l=new Cr(0),u=$t.fromX64_Decimal(s.mul(c.sub(a)))),i?{coinA:new B(l.ceil().toString()),coinB:new B(u.ceil().toString())}:{coinA:new B(l.floor().toString()),coinB:new B(u.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(n,e,t,r,i,s,o){const a=Ue.sqrtPriceX64ToTickIndex(o),c=Ue.tickIndexToSqrtPriceX64(n),l=Ue.tickIndexToSqrtPriceX64(e);let u;if(a<n){if(!r)throw new Me("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");u=Bh(c,l,t)}else if(a>e){if(r)throw new Me("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");u=Rh(l,c,t)}else r?u=Bh(o,l,t):u=Rh(o,c,t);const d=fr.getCoinAmountFromLiquidity(u,o,c,l,i),h=i?Q(d.coinA.toString()).mul(1+s).toString():Q(d.coinA.toString()).mul(1-s).toString(),f=i?Q(d.coinB.toString()).mul(1+s).toString():Q(d.coinB.toString()).mul(1-s).toString();return{coinAmountA:d.coinA,coinAmountB:d.coinB,tokenMaxA:i?new B(Cr.ceil(h).toString()):new B(Cr.floor(h).toString()),tokenMaxB:i?new B(Cr.ceil(f).toString()):new B(Cr.floor(f).toString()),liquidityAmount:u,fix_amount_a:r}}static estimateLiquidityFromcoinAmounts(n,e,t,r){if(e>t)throw new Me("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const i=Ue.sqrtPriceX64ToTickIndex(n),s=Ue.tickIndexToSqrtPriceX64(e),o=Ue.tickIndexToSqrtPriceX64(t);if(i<e)return Bh(s,o,r.coinA);if(i>=t)return Rh(o,s,r.coinB);const a=Bh(n,o,r.coinA),c=Rh(n,s,r.coinB);return B.min(a,c)}static estCoinAmountsFromTotalAmount(n,e,t,r,i,s){const{ratioA:o,ratioB:a}=fr.calculateDepositRatioFixTokenA(n,e,t),c=Q(r).mul(o).div(i),l=Q(r).mul(a).div(s);return{amountA:c,amountB:l}}static calculateDepositRatioFixTokenA(n,e,t){const r=new B(1e8),{coinAmountB:i}=fr.estLiquidityAndcoinAmountFromOneAmounts(n,e,r,!0,!0,0,t),s=Ue.sqrtPriceX64ToPrice(t,0,0),o=Q(r.toString()).mul(s),a=o.add(i.toString()),c=o.div(a),l=Q(i.toString()).div(a);return{ratioA:c,ratioB:l}}};function sA(n){return n.startsWith("0x")?`${n.slice(2)}`:n}var uz=0,oA=1,dz=2;function X_(n,e){return n===e?uz:n<e?oA:dz}function hz(n,e){let t=0;const r=n.length<=e.length?n.length:e.length,i=X_(n.length,e.length);for(;t<r;){const s=X_(n.charCodeAt(t),e.charCodeAt(t));if(t+=1,s!==0)return s}return i}function sw(n,e){return hz(n,e)===oA}function Np(n,...e){const t=Array.isArray(e[e.length-1])?e.pop():[];let i=[n,...e].filter(Boolean).join("::");return t&&t.length&&(i+=`<${t.join(", ")}>`),i}function pe(n){var e;try{let t=n.replace(/\s/g,"");const r=t.match(/(<.+>)$/),i=(e=r==null?void 0:r[0])==null?void 0:e.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(i){t=t.slice(0,t.indexOf("<"));const l={...pe(t),type_arguments:i.map(u=>pe(u).source_address)};return l.type_arguments=l.type_arguments.map(u=>At.isSuiCoin(u)?u:pe(u).source_address),l.source_address=Np(l.full_address,l.type_arguments),l}const s=t.split("::"),a={full_address:t,address:t===jp||t===wz?"0x2":Bn(s[0]),module:s[1],name:s[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=Np(a.full_address,a.type_arguments),a}catch{return{full_address:n,address:"",module:"",name:"",type_arguments:[],source_address:n}}}function On(n){return pe(n).source_address}function fz(n){return n.toLowerCase().startsWith("0x")?Bn(n):n}var pz=(n,e=!0)=>{const t=n.split("::"),r=t.shift();let i=Bn(r);return e&&(i=sA(i)),`${i}::${t.join("::")}`};function eb(n){for(const e in n){const t=typeof n[e];if(t==="object")eb(n[e]);else if(t==="string"){const r=n[e];r&&!r.includes("::")&&(n[e]=fz(r))}}}var mz="0x2::coin::Coin",gz=/^0x2::coin::Coin<(.+)>$/,jp="0x2::sui::SUI",wz="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",At=class{static getCoinTypeArg(n){const e=n.type.match(gz);return e?e[1]:null}static isSUI(n){const e=At.getCoinTypeArg(n);return e?At.getCoinSymbol(e)==="SUI":!1}static getCoinSymbol(n){return n.substring(n.lastIndexOf(":")+1)}static getBalance(n){return BigInt(n.fields.balance)}static totalBalance(n,e){let t=BigInt(0);return n.forEach(r=>{e===r.coinAddress&&(t+=BigInt(r.balance))}),t}static getID(n){return n.fields.id.id}static getCoinTypeFromArg(n){return`${mz}<${n}>`}static getFaucetCoins(n){const{events:e}=n,t=[];return e==null||e.forEach(r=>{const{type:i}=r;if(pe(i).name==="InitEvent"){const s=r.parsedJson;t.push({transactionModule:r.transactionModule,suplyID:s.suplyID,decimals:s.decimals})}}),t}static getCoinAssets(n,e){const t=[];return e.forEach(r=>{On(r.coinAddress)===On(n)&&t.push(r)}),t}static isSuiCoin(n){return pe(n).full_address===jp}static selectCoinObjectIdGreaterThanOrEqual(n,e,t=[]){const r=At.selectCoinAssetGreaterThanOrEqual(n,e,t),i=r.selectedCoins.map(a=>a.coinObjectId),s=r.remainingCoins,o=r.selectedCoins.map(a=>a.balance.toString());return{objectArray:i,remainCoins:s,amountArray:o}}static selectCoinAssetGreaterThanOrEqual(n,e,t=[]){const r=At.sortByBalance(n.filter(c=>!t.includes(c.coinObjectId))),i=At.calculateTotalBalance(r);if(i<e)return{selectedCoins:[],remainingCoins:r};if(i===e)return{selectedCoins:r,remainingCoins:[]};let s=BigInt(0);const o=[],a=[...r];for(;s<i;){const c=e-s,l=a.findIndex(d=>d.balance>=c);if(l!==-1){o.push(a[l]),a.splice(l,1);break}const u=a.pop();u.balance>0&&(o.push(u),s+=u.balance)}return{selectedCoins:At.sortByBalance(o),remainingCoins:At.sortByBalance(a)}}static sortByBalance(n){return n.sort((e,t)=>e.balance<t.balance?-1:e.balance>t.balance?1:0)}static sortByBalanceDes(n){return n.sort((e,t)=>e.balance>t.balance?-1:e.balance<t.balance?0:1)}static calculateTotalBalance(n){return n.reduce((e,t)=>e+t.balance,BigInt(0))}},pd=class{constructor(n,e){v(this,"numerator");v(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=n,this.denominator=e}static fromDecimal(n){return pd.fromFraction(n.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(n,e){const t=typeof n=="number"?new B(n.toString()):n,r=typeof e=="number"?new B(e.toString()):e;return new pd(t,r)}};function ow(n,{numerator:e,denominator:t},r){return r?n.mul(t.add(e)).div(t):n.mul(t).div(t.add(e))}function jg(n,e,t){return{tokenMaxA:ow(n.coinA,e,t),tokenMaxB:ow(n.coinB,e,t)}}function Q(n){return ue.isDecimal(n)?n:new ue(n===void 0?0:n)}function yz(n){return Q(10).pow(Q(n).abs())}function ih(n){return n.data}function aA(n){if(n.error&&"object_id"in n.error&&"version"in n.error&&"digest"in n.error){const{error:e}=n;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function cA(n){if(n.error&&"object_id"in n.error&&!("version"in n.error)&&!("digest"in n.error))return n.error.object_id}function bz(n){if("reference"in n)return n.reference;const e=ih(n);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:aA(n)}function Rs(n){var e;return"objectId"in n?n.objectId:((e=bz(n))==null?void 0:e.objectId)??cA(n)}function _z(n){return n.data!==void 0}function vz(n){return n.content!==void 0}function lA(n){const e="data"in n?ih(n):n;if(!(!e||!vz(e)||e.content.dataType!=="moveObject"))return e.content}function Ls(n){var e;return(e=lA(n))==null?void 0:e.type}function vu(n){var t;const e=_z(n)?n.data:n;return!(e!=null&&e.type)&&"data"in n?((t=e==null?void 0:e.content)==null?void 0:t.dataType)==="package"?"package":Ls(n):e==null?void 0:e.type}function sh(n){var e;return(e=ih(n))==null?void 0:e.previousTransaction}function Dp(n){var e;return(e=ih(n))==null?void 0:e.owner}function kz(n){var t;const e=(t=ih(n))==null?void 0:t.display;return e||{data:null,error:null}}function et(n){var t;const e=(t=lA(n))==null?void 0:t.fields;if(e)return"fields"in e?e.fields:e}function Sz(n,e){const t=yz(Q(e));return Number(Q(n).mul(t))}function Ir(n,e=32){return BigInt.asUintN(e,BigInt(n)).toString()}function ir(n,e=32){return Number(BigInt.asIntN(e,BigInt(n)))}function Cz(n,e,t){const r=pe(n).name,i=pe(e).name;return`${r}-${i}[${t}]`}function Dg(n){const e=Ls(n),t=pe(e),r=et(n);if(r==null)throw new Me(`Pool id ${Rs(n)} not exists.`,"InvalidPoolObject");const i=[];r.rewarder_manager.fields.rewarders.forEach(o=>{const{emissions_per_second:a}=o.fields,c=$t.fromX64(new B(a)),l=Math.floor(c.toNumber()*60*60*24);i.push({emissions_per_second:a,coinAddress:pe(o.fields.reward_coin.fields.name).source_address,growth_global:o.fields.growth_global,emissionsEveryDay:l})});const s={poolAddress:Rs(n),poolType:e,coinTypeA:t.type_arguments[0],coinTypeB:t.type_arguments[1],coinAmountA:r.coin_a,coinAmountB:r.coin_b,current_sqrt_price:r.current_sqrt_price,current_tick_index:ir(BigInt(r.current_tick_index.fields.bits)),fee_growth_global_a:r.fee_growth_global_a,fee_growth_global_b:r.fee_growth_global_b,fee_protocol_coin_a:r.fee_protocol_coin_a,fee_protocol_coin_b:r.fee_protocol_coin_b,fee_rate:r.fee_rate,is_pause:r.is_pause,liquidity:r.liquidity,position_manager:{positions_handle:r.position_manager.fields.positions.fields.id.id,size:r.position_manager.fields.positions.fields.size},rewarder_infos:i,rewarder_last_updated_time:r.rewarder_manager.fields.last_updated_time,tickSpacing:r.tick_spacing,ticks_handle:r.tick_manager.fields.ticks.fields.id.id,uri:r.url,index:Number(r.index),name:""};return s.name=Cz(s.coinTypeA,s.coinTypeB,s.tickSpacing),s}function jm(n){const e=kz(n).data,t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return e&&(t.creator=e.creator,t.description=e.description,t.image_url=e.image_url,t.link=e.link,t.name=e.name,t.project_url=e.project_url),t}function Yl(n){var o,a;if(n.error!=null||((a=(o=n.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Me(`Position not exists. Get Position error:${n.error}`,"InvalidPositionObject");let e={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},t={...e,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},r=et(n);if(r){const c=Ls(n),l=Dp(n);"nft"in r?(r=r.nft.fields,e.description=r.description,e.name=r.name,e.link=r.url):e=jm(n),t={...e,pos_object_id:r.id.id,owner:l.AddressOwner,type:c,liquidity:r.liquidity,coin_type_a:r.coin_type_a.fields.name,coin_type_b:r.coin_type_b.fields.name,tick_lower_index:ir(BigInt(r.tick_lower_index.fields.bits)),tick_upper_index:ir(BigInt(r.tick_upper_index.fields.bits)),index:r.index,pool:r.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const i=aA(n);i&&(t.pos_object_id=i.objectId,t.position_status="Deleted");const s=cA(n);return s&&(t.pos_object_id=s,t.position_status="NotExists"),t}function uA(n){const e={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};n="fields"in n?n.fields:n,n.rewards.forEach((s,o)=>{const{amount_owned:a,growth_inside:c}="fields"in s?s.fields:s;o===0?(e.reward_amount_owed_0=a,e.reward_growth_inside_0=c):o===1?(e.reward_amount_owed_1=a,e.reward_growth_inside_1=c):o===2&&(e.reward_amount_owed_2=a,e.reward_growth_inside_2=c)});const t="fields"in n.tick_lower_index?n.tick_lower_index.fields.bits:n.tick_lower_index.bits,r="fields"in n.tick_upper_index?n.tick_upper_index.fields.bits:n.tick_upper_index.bits;return{liquidity:n.liquidity,tick_lower_index:ir(BigInt(t)),tick_upper_index:ir(BigInt(r)),...e,fee_growth_inside_a:n.fee_growth_inside_a,fee_owed_a:n.fee_owned_a,fee_growth_inside_b:n.fee_growth_inside_b,fee_owed_b:n.fee_owned_b,pos_object_id:n.position_id}}function Bg(n){var i,s;if(n.error!=null||((s=(i=n.data)==null?void 0:i.content)==null?void 0:s.dataType)!=="moveObject")throw new Me(`Tick not exists. Get tick data error:${n.error}`,"InvalidTickObject");const t=et(n).value.fields.value.fields;return{objectId:Rs(n),index:ir(BigInt(t.index.fields.bits)),sqrtPrice:new B(t.sqrt_price),liquidityNet:new B(t.liquidity_net.fields.bits),liquidityGross:new B(t.liquidity_gross),feeGrowthOutsideA:new B(t.fee_growth_outside_a),feeGrowthOutsideB:new B(t.fee_growth_outside_b),rewardersGrowthOutside:t.rewards_growth_outside}}function Az(n){if(!n||!n.index||!n.sqrt_price||!n.liquidity_net||!n.liquidity_gross||!n.fee_growth_outside_a||!n.fee_growth_outside_b)throw new Me("Invalid tick fields.","InvalidTickFields");const e=ir(BigInt(n.index.bits)),t=new B(n.sqrt_price),r=new B(n.liquidity_net.bits),i=new B(n.liquidity_gross),s=new B(n.fee_growth_outside_a),o=new B(n.fee_growth_outside_b),a=n.rewards_growth_outside||[];return{objectId:"",index:e,sqrtPrice:t,liquidityNet:r,liquidityGross:i,feeGrowthOutsideA:s,feeGrowthOutsideB:o,rewardersGrowthOutside:a}}function Tz(n,e,t,r,i,s){const o=n.rewarder_infos,a=[];for(let c=0;c<o.length;c+=1){let l=s[c];e!==null&&(n.current_tick_index<r?l=s[c].sub(new B(e.rewardersGrowthOutside[c])):l=e.rewardersGrowthOutside[c]);let u=new B(0);t!==null&&(n.current_tick_index>=i?u=s[c].sub(new B(t.rewardersGrowthOutside[c])):u=t.rewardersGrowthOutside[c]);const d=$t.subUnderflowU128($t.subUnderflowU128(new B(s[c]),new B(l)),new B(u));a.push(d)}return a}function Bp(n){const e=At.isSuiCoin(n.coinTypeA),t=At.isSuiCoin(n.coinTypeB);return{isAdjustCoinA:e,isAdjustCoinB:t}}function Iz(n,e){return ue.ceil(Q(n).div(1+e)).toString()}var Ze=class{static createCollectRewarderAndFeeParams(n,e,t,r,i,s){i===void 0&&(i=[...r]),s===void 0&&(s=[...r]);const o=On(t.coinTypeA),a=On(t.coinTypeB);if(t.collect_fee){const l=Ze.buildCoinForAmount(e,i,BigInt(0),o,!1);i=l.remainCoins;const u=Ze.buildCoinForAmount(e,s,BigInt(0),a,!1);s=u.remainCoins,e=n.Position.createCollectFeePaylod({pool_id:t.pool_id,pos_id:t.pos_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB},e,l.targetCoin,u.targetCoin)}const c=[];return t.rewarder_coin_types.forEach(l=>{switch(On(l)){case o:c.push(Ze.buildCoinForAmount(e,i,BigInt(0),l,!1).targetCoin);break;case a:c.push(Ze.buildCoinForAmount(e,s,BigInt(0),l,!1).targetCoin);break;default:c.push(Ze.buildCoinForAmount(e,r,BigInt(0),l,!1).targetCoin);break}}),e=n.Rewarder.createCollectRewarderPaylod(t,e,c),e}static async adjustTransactionForGas(n,e,t,r){r.setSender(n.senderAddress);const i=At.selectCoinAssetGreaterThanOrEqual(e,t).selectedCoins;if(i.length===0)throw new Me("Insufficient balance","InsufficientBalance");const s=At.calculateTotalBalance(e);if(s-t>1e9)return{fixAmount:t};const o=await n.fullClient.calculationTxGas(r);if(At.selectCoinAssetGreaterThanOrEqual(e,BigInt(o),i.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(o)+BigInt(500);if(s-t<c){if(t-=c,t<0)throw new Me("gas Insufficient balance","InsufficientBalance");const l=new fe;return{fixAmount:t,newTx:l}}}return{fixAmount:t}}static async buildAddLiquidityFixTokenForGas(n,e,t,r,i,s,o){i=await Ze.buildAddLiquidityFixToken(n,e,t,i,s,o);const{isAdjustCoinA:a}=Bp(t),c=a?t.amount_a:t.amount_b,l=await Ze.adjustTransactionForGas(n,At.getCoinAssets(a?t.coinTypeA:t.coinTypeB,e),BigInt(c),i),{fixAmount:u}=l,{newTx:d}=l;if(d!=null){let h,f;if(a)t.amount_a=Number(u),h=Ze.buildAddLiquidityFixTokenCoinInput(d,!t.fix_amount_a,u.toString(),t.slippage,t.coinTypeA,e,!1),f=Ze.buildAddLiquidityFixTokenCoinInput(d,t.fix_amount_a,t.amount_b,t.slippage,t.coinTypeB,e,!1);else return t.amount_b=Number(u),h=Ze.buildAddLiquidityFixTokenCoinInput(d,!t.fix_amount_a,t.amount_a,t.slippage,t.coinTypeA,e,!1),f=Ze.buildAddLiquidityFixTokenCoinInput(d,t.fix_amount_a,u.toString(),t.slippage,t.coinTypeB,e,!1),t=Ze.fixAddLiquidityFixTokenParams(t,r.slippage,r.curSqrtPrice),i=await Ze.buildAddLiquidityFixTokenArgs(d,n,e,t,h,f),i}return i}static async buildAddLiquidityFixToken(n,e,t,r,i,s){if(n.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");r=r||new fe;let o,a;return i==null||s==null?(o=Ze.buildAddLiquidityFixTokenCoinInput(r,!t.fix_amount_a,t.amount_a,t.slippage,t.coinTypeA,e,!1),a=Ze.buildAddLiquidityFixTokenCoinInput(r,t.fix_amount_a,t.amount_b,t.slippage,t.coinTypeB,e,!1)):(o={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a={targetCoin:s,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),r=Ze.buildAddLiquidityFixTokenArgs(r,n,e,t,o,a),r}static buildAddLiquidityFixTokenCoinInput(n,e,t,r,i,s,o=!0){return e?Ze.buildCoinForAmountInterval(n,s,{amountSecond:BigInt(Iz(t,r)),amountFirst:BigInt(t)},i,o):Ze.buildCoinForAmount(n,s,BigInt(t),i,o)}static fixAddLiquidityFixTokenParams(n,e,t){const r=n.fix_amount_a?n.amount_a:n.amount_b,i=fr.estLiquidityAndcoinAmountFromOneAmounts(Number(n.tick_lower),Number(n.tick_upper),new B(r),n.fix_amount_a,!0,e,t);return n.amount_a=n.fix_amount_a?n.amount_a:i.tokenMaxA.toNumber(),n.amount_b=n.fix_amount_a?i.tokenMaxB.toNumber():n.amount_b,n}static buildAddLiquidityFixTokenArgs(n,e,t,r,i,s){const o=[r.coinTypeA,r.coinTypeB],a=r.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:l}=e.sdkOptions;r.is_open||(n=Ze.createCollectRewarderAndFeeParams(e,n,r,t,i.remainCoins,s.remainCoins));const u=J(c),d=r.is_open?[n.object(u.global_config_id),n.object(r.pool_id),n.pure.u32(Number(Ir(BigInt(r.tick_lower)).toString())),n.pure.u32(Number(Ir(BigInt(r.tick_upper)).toString())),i.targetCoin,s.targetCoin,n.pure.u64(r.amount_a),n.pure.u64(r.amount_b),n.pure.bool(r.fix_amount_a),n.object(ke)]:[n.object(u.global_config_id),n.object(r.pool_id),n.object(r.pos_id),i.targetCoin,s.targetCoin,n.pure.u64(r.amount_a),n.pure.u64(r.amount_b),n.pure.bool(r.fix_amount_a),n.object(ke)];return n.moveCall({target:`${l.published_at}::${qa}::${a}`,typeArguments:o,arguments:d}),n}static async buildSwapTransactionForGas(n,e,t,r){let i=Ze.buildSwapTransaction(n,e,t);i.setSender(n.senderAddress);const s=await Ze.adjustTransactionForGas(n,At.getCoinAssets(e.a2b?e.coinTypeA:e.coinTypeB,t),BigInt(e.by_amount_in?e.amount:e.amount_limit),i),{fixAmount:o,newTx:a}=s;if(a!==void 0){a.setSender(n.senderAddress),e.by_amount_in?e.amount=o.toString():e.amount_limit=o.toString(),e=await Ze.fixSwapParams(n,e,r);const c=Ze.buildCoinForAmount(i,t,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA),l=Ze.buildCoinForAmount(i,t,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB);i=Ze.buildSwapTransactionArgs(a,e,n.sdkOptions,c,l)}return i}static buildSwapTransaction(n,e,t){let r=new fe;r.setSender(n.senderAddress);const i=Ze.buildCoinForAmount(r,t,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1),s=Ze.buildCoinForAmount(r,t,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1);return r=Ze.buildSwapTransactionArgs(r,e,n.sdkOptions,i,s),r}static buildSwapTransactionArgs(n,e,t,r,i){const{clmm_pool:s,integrate:o}=t,a=ro.getDefaultSqrtPriceLimit(e.a2b),c=[e.coinTypeA,e.coinTypeB],{global_config_id:l}=J(s);if(l===void 0)throw Error("clmm.config.global_config_id is undefined");const u=e.swap_partner!==void 0,d=u?e.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":e.a2b?"swap_a2b":"swap_b2a",h=u?[n.object(l),n.object(e.pool_id),n.object(e.swap_partner),r.targetCoin,i.targetCoin,n.pure.bool(e.by_amount_in),n.pure.u64(e.amount),n.pure.u64(e.amount_limit),n.pure.u128(a.toString()),n.object(ke)]:[n.object(l),n.object(e.pool_id),r.targetCoin,i.targetCoin,n.pure.bool(e.by_amount_in),n.pure.u64(e.amount),n.pure.u64(e.amount_limit),n.pure.u128(a.toString()),n.object(ke)];return n.moveCall({target:`${o.published_at}::${qa}::${d}`,typeArguments:c,arguments:h}),n}static async buildSwapTransactionWithoutTransferCoinsForGas(n,e,t,r){let{tx:i,coinABs:s}=Ze.buildSwapTransactionWithoutTransferCoins(n,e,t);i.setSender(n.senderAddress);const o=await Ze.adjustTransactionForGas(n,At.getCoinAssets(e.a2b?e.coinTypeA:e.coinTypeB,t),BigInt(e.by_amount_in?e.amount:e.amount_limit),i),{fixAmount:a,newTx:c}=o;if(c!==void 0){c.setSender(n.senderAddress),e.by_amount_in?e.amount=a.toString():e.amount_limit=a.toString(),e=await Ze.fixSwapParams(n,e,r);const l=Ze.buildCoinForAmount(i,t,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1,!0),u=Ze.buildCoinForAmount(i,t,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1,!0),d=Ze.buildSwapTransactionWithoutTransferCoinArgs(n,c,e,n.sdkOptions,l,u);i=d.tx,s=d.txRes}return{tx:i,coinABs:s}}static buildSwapTransactionWithoutTransferCoins(n,e,t){const r=new fe;r.setSender(n.senderAddress);const i=Ze.buildCoinForAmount(r,t,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1,!0),s=Ze.buildCoinForAmount(r,t,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1,!0),o=Ze.buildSwapTransactionWithoutTransferCoinArgs(n,r,e,n.sdkOptions,i,s);return{tx:o.tx,coinABs:o.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(n,e,t,r,i,s){const{clmm_pool:o,integrate:a}=r,c=ro.getDefaultSqrtPriceLimit(t.a2b),{global_config_id:l}=J(o);if(l===void 0)throw Error("clmm.config.global_config_id is undefined");const u=t.swap_partner!==void 0,d=u?"swap_with_partner":"swap",h=u?Og:Ec,f=u?[e.object(l),e.object(t.pool_id),e.object(t.swap_partner),i.targetCoin,s.targetCoin,e.pure.bool(t.a2b),e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u128(c.toString()),e.pure.bool(!1),e.object(ke)]:[e.object(l),e.object(t.pool_id),i.targetCoin,s.targetCoin,e.pure.bool(t.a2b),e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u128(c.toString()),e.pure.bool(!1),e.object(ke)],m=[t.coinTypeA,t.coinTypeB],w=e.moveCall({target:`${a.published_at}::${h}::${d}`,typeArguments:m,arguments:f});if(t.by_amount_in){const y=t.a2b?t.coinTypeB:t.coinTypeA,C=t.a2b?w[1]:w[0],A=Number(t.amount_limit);this.checkCoinThreshold(n,t.by_amount_in,e,C,A,y)}return{tx:e,txRes:w}}static async fixSwapParams(n,e,t){const{currentPool:r}=t;try{const i=await n.Swap.preswap({decimalsA:t.decimalsA,decimalsB:t.decimalsB,a2b:e.a2b,byAmountIn:e.by_amount_in,amount:e.amount,pool:r,currentSqrtPrice:r.current_sqrt_price,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB}),s=t.byAmountIn?i.estimatedAmountOut:i.estimatedAmountIn,o=ow(s,t.slippage,!t.byAmountIn);e.amount_limit=o.toString()}catch(i){console.log("fixSwapParams",i)}return e}static async syncBuildCoinInputForAmount(n,e,t,r,i=!0){if(n.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const s=await n.getOwnerCoinAssets(n.senderAddress,r);return Ze.buildCoinForAmount(e,s,t,r,i).targetCoin}static buildCoinForAmount(n,e,t,r,i=!0,s=!1){const o=At.getCoinAssets(r,e);if(t===BigInt(0)&&o.length===0)return Ze.buildZeroValueCoin(e,n,r,i);const a=At.calculateTotalBalance(o);if(a<t)throw new Me(`The amount(${a}) is Insufficient balance for ${r} , expect ${t} `,"InsufficientBalance");return Ze.buildCoin(n,e,o,t,r,i,s)}static buildCoin(n,e,t,r,i,s=!0,o=!1){if(At.isSuiCoin(i)){if(s){const A=n.splitCoins(n.gas,[n.pure.u64(r)]);return{targetCoin:n.makeMoveVec({elements:[A]}),remainCoins:e,tragetCoinAmount:r.toString(),isMintZeroCoin:!1,originalSplitedCoin:n.gas}}if(r===0n&&t.length>1){const A=At.selectCoinObjectIdGreaterThanOrEqual(t,r);return{targetCoin:n.object(A.objectArray[0]),remainCoins:A.remainCoins,tragetCoinAmount:A.amountArray[0],isMintZeroCoin:!1}}const y=At.selectCoinObjectIdGreaterThanOrEqual(t,r);return{targetCoin:n.splitCoins(n.gas,[n.pure.u64(r)]),remainCoins:y.remainCoins,tragetCoinAmount:r.toString(),isMintZeroCoin:!1,originalSplitedCoin:n.gas}}const a=At.selectCoinObjectIdGreaterThanOrEqual(t,r),c=a.amountArray.reduce((y,C)=>Number(y)+Number(C),0).toString(),l=a.objectArray;if(s)return{targetCoin:n.makeMoveVec({elements:l.map(y=>n.object(y))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((y,C)=>Number(y)+Number(C),0).toString(),isMintZeroCoin:!1};const[u,...d]=l,h=n.object(u);let f=h,m=a.amountArray.reduce((y,C)=>Number(y)+Number(C),0).toString(),w;return d.length>0&&n.mergeCoins(h,d.map(y=>n.object(y))),o&&Number(c)>Number(r)&&(f=n.splitCoins(h,[n.pure.u64(r)]),m=r.toString(),w=h),{targetCoin:f,remainCoins:a.remainCoins,originalSplitedCoin:w,tragetCoinAmount:m,isMintZeroCoin:!1}}static buildZeroValueCoin(n,e,t,r=!0){const i=Ze.callMintZeroValueCoin(e,t);let s;return r?s=e.makeMoveVec({elements:[i]}):s=i,{targetCoin:s,remainCoins:n,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(n,e,t,r,i=!0){const s=At.getCoinAssets(r,e);if(t.amountFirst===BigInt(0))return s.length>0?Ze.buildCoin(n,[...e],[...s],t.amountFirst,r,i):Ze.buildZeroValueCoin(e,n,r,i);const o=At.calculateTotalBalance(s);if(o>=t.amountFirst)return Ze.buildCoin(n,[...e],[...s],t.amountFirst,r,i);if(o<t.amountSecond)throw new Me(`The amount(${o}) is Insufficient balance for ${r} , expect ${t.amountSecond} `,"InsufficientBalance");return Ze.buildCoin(n,[...e],[...s],t.amountSecond,r,i)}static async buildRouterSwapTransaction(n,e,t,r,i){let s=new fe;return e.paths.length>1&&(e.partner=""),s=await this.buildRouterBasePathTx(n,e,t,r,s,i),s}static async buildRouterBasePathTx(n,e,t,r,i,s){const o=e.paths.filter(M=>M&&M.poolAddress),a=Number(o.reduce((M,H)=>M.add(H.amountIn),We).toString()),c=Number(o.reduce((M,H)=>M.add(H.amountOut),We).toString()),l=Math.round(t?Number(c.toString())*(1-e.priceSlippagePoint):Number(a.toString())*(1+e.priceSlippagePoint)),u=e.paths[0].coinType[0],d=e.paths[0].coinType[e.paths[0].coinType.length-1],h=Ze.buildCoinForAmount(i,r,BigInt(t?a:l),u,!1,!0),f=h.originalSplitedCoin!==void 0,m=Ze.buildCoinForAmount(i,r,0n,d,!1),w=await this.buildRouterBasePathReturnCoins(n,e,t,h,m,i),y=[],{toCoin:C,fromCoin:A}=w;if(i=w.tx,m.isMintZeroCoin?y.push({coinType:d,coin:C}):m.originalSplitedCoin!==void 0?i.mergeCoins(m.originalSplitedCoin,[C]):i.mergeCoins(m.targetCoin,[C]),f){const M=h==null?void 0:h.originalSplitedCoin;i.mergeCoins(M,[A])}else y.push({coinType:u,coin:A});for(let M=0;M<y.length;M++)this.buildTransferCoin(n,i,y[M].coin,y[M].coinType,s);return i}static async buildRouterBasePathReturnCoins(n,e,t,r,i,s){const{clmm_pool:o,integrate:a}=n.sdkOptions,c=J(o).global_config_id,l=e.paths.filter(M=>M&&M.poolAddress),u=Number(l.reduce((M,H)=>M.add(H.amountIn),We).toString()),d=Number(l.reduce((M,H)=>M.add(H.amountOut),We).toString()),h=Math.round(t?Number(d.toString())*(1-e.priceSlippagePoint):Number(u.toString())*(1+e.priceSlippagePoint)),f=e.paths[0].coinType[0],m=e.paths[0].coinType[e.paths[0].coinType.length-1];let w=r.targetCoin,y;i.isMintZeroCoin||i.originalSplitedCoin!==void 0?y=i.targetCoin:y=Ze.callMintZeroValueCoin(s,m);const C=e.partner==="",A=C?Ec:Og;for(const M of l)if(M.poolAddress.length===1){const H=M.a2b[0],G={amount:Number(M.amountIn.toString()),amountLimit:h,poolCoinA:M.a2b[0]?f:m,poolCoinB:M.a2b[0]?m:f},q=C?"swap":"swap_with_partner",X=H?w:y,E=H?y:w,j=t?M.amountIn.toString():M.amountOut.toString(),R=ro.getDefaultSqrtPriceLimit(H).toString(),V=C?[s.object(c),s.object(M.poolAddress[0]),X,E,s.pure.bool(H),s.pure.bool(t),s.pure.u64(j),s.pure.u128(R),s.pure.bool(!1),s.object(ke)]:[s.object(c),s.object(M.poolAddress[0]),s.object(e.partner),X,E,s.pure.bool(H),s.pure.bool(t),s.pure.u64(j),s.pure.u128(R),s.pure.bool(!1),s.object(ke)],U=[G.poolCoinA,G.poolCoinB],Y=s.moveCall({target:`${n.sdkOptions.integrate.published_at}::${A}::${q}`,typeArguments:U,arguments:V});w=H?Y[0]:Y[1],y=H?Y[1]:Y[0]}else{const H=t?M.amountIn:M.rawAmountLimit[0],G=t?0:M.amountOut;let q="";M.a2b[0]?M.a2b[1]?q="swap_ab_bc":q="swap_ab_cb":M.a2b[1]?q="swap_ba_bc":q="swap_ba_cb",C||(q=`${q}_with_partner`);const X=ro.getDefaultSqrtPriceLimit(M.a2b[0]),E=ro.getDefaultSqrtPriceLimit(M.a2b[1]),j=C?[s.object(c),s.object(M.poolAddress[0]),s.object(M.poolAddress[1]),w,y,s.pure.bool(t),s.pure.u64(H.toString()),s.pure.u64(G.toString()),s.pure.u128(X.toString()),s.pure.u128(E.toString()),s.object(ke)]:[s.object(c),s.object(M.poolAddress[0]),s.object(M.poolAddress[1]),s.object(e.partner),w,y,s.pure.bool(t),s.pure.u64(H.toString()),s.pure.u64(G.toString()),s.pure.u128(X.toString()),s.pure.u128(E.toString()),s.object(ke)],R=[M.coinType[0],M.coinType[1],M.coinType[2]],V=s.moveCall({target:`${a.published_at}::${A}::${q}`,typeArguments:R,arguments:j});w=V[0],y=V[1]}return this.checkCoinThreshold(n,t,s,y,h,m),{fromCoin:w,toCoin:y,tx:s}}static async buildAggregatorSwapReturnCoins(n,e,t,r,i,s,o,a){if(a==null){if(n.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=n.senderAddress}e.splitPaths.length>1&&(i="");let c,l;const u=e.splitPaths.some(d=>d.basePaths.some(h=>h.label==="Deepbook"));if((!e.byAmountIn||e.splitPaths.length===1)&&!u){const d=[];for(const m of e.splitPaths){const w=[],y=[],C=[],A=[];for(let H=0;H<m.basePaths.length;H+=1){const G=m.basePaths[H];w.push(G.direction),y.push(G.poolAddress),C.push(new B(G.inputAmount.toString())),H===0?A.push(G.fromCoin,G.toCoin):A.push(G.toCoin)}const M={amountIn:new B(m.inputAmount.toString()),amountOut:new B(m.outputAmount.toString()),poolAddress:y,a2b:w,rawAmountLimit:C,isExceed:!1,coinType:A};d.push(M)}const h={paths:d,partner:i,priceSlippagePoint:s},f=await this.buildRouterBasePathReturnCoins(n,h,e.byAmountIn,t,r,o);c=f.fromCoin,l=f.toCoin,o=f.tx}else{const d=Math.round(e.outputAmount*(1-s));c=t.targetCoin,r.isMintZeroCoin||r.originalSplitedCoin!==void 0?l=r.targetCoin:l=Ze.callMintZeroValueCoin(o,e.toCoin);let h=!1,f;if(u){const[m,w]=J_.createAccountCap(a,n.sdkOptions,o);o=w,f=m,h=!0}for(let m=0;m<e.splitPaths.length;m+=1){const w=e.splitPaths[m];let y;for(let C=0;C<w.basePaths.length;C+=1){const A=w.basePaths[C];if(A.label==="Deepbook")if(C===0)if(w.basePaths.length===1){const M=this.buildDeepbookBasePathTx(n,A,o,f,c,l,!1);c=M.from,l=M.to}else{y=Ze.callMintZeroValueCoin(o,A.toCoin);const M=this.buildDeepbookBasePathTx(n,A,o,f,c,y,!1);c=M.from,y=M.to}else{const M=this.buildDeepbookBasePathTx(n,A,o,f,y,l,!0);y=M.from,l=M.to}if(A.label==="Cetus")if(C===0)if(w.basePaths.length===1){const M=this.buildClmmBasePathTx(n,A,o,e.byAmountIn,c,l,!1,i);c=M.from,l=M.to}else{y=Ze.callMintZeroValueCoin(o,A.toCoin);const M=this.buildClmmBasePathTx(n,A,o,e.byAmountIn,c,y,!1,i);c=M.from,y=M.to}else{const M=this.buildClmmBasePathTx(n,A,o,e.byAmountIn,y,l,!0,i);y=M.from,l=M.to,o.moveCall({target:`${n.sdkOptions.integrate.published_at}::${H_}::send_coin`,typeArguments:[A.fromCoin],arguments:[y,o.pure.address(a)]})}}}this.checkCoinThreshold(n,e.byAmountIn,o,l,d,e.toCoin),h&&(o=J_.deleteAccountCapByObject(f,n.sdkOptions,o))}return{fromCoin:c,toCoin:l,tx:o}}static async buildAggregatorSwapTransaction(n,e,t,r,i,s){let o=new fe;const a=e.byAmountIn?Math.round(e.outputAmount*(1-i)):Math.round(e.inputAmount*(1+i)),c=Ze.buildCoinForAmount(o,t,e.byAmountIn?BigInt(e.inputAmount):BigInt(a),e.fromCoin,!1,!0),l=c.originalSplitedCoin!=null,u=Ze.buildCoinForAmount(o,t,0n,e.toCoin,!1),d=await this.buildAggregatorSwapReturnCoins(n,e,c,u,r,i,o,s),{fromCoin:h,toCoin:f}=d;o=d.tx;const m=[];if(u.isMintZeroCoin?m.push({coinType:e.toCoin,coin:f}):u.originalSplitedCoin!=null?o.mergeCoins(u.originalSplitedCoin,[f]):o.mergeCoins(u.targetCoin,[f]),l){const w=c.originalSplitedCoin;o.mergeCoins(w,[h])}else m.push({coinType:e.fromCoin,coin:h});for(let w=0;w<m.length;w++)this.buildTransferCoin(n,o,m[w].coin,m[w].coinType,s);return o}static checkCoinThreshold(n,e,t,r,i,s){e&&t.moveCall({target:`${n.sdkOptions.integrate.published_at}::${Ec}::check_coin_threshold`,typeArguments:[s],arguments:[r,t.pure.u64(i)]})}static buildDeepbookBasePathTx(n,e,t,r,i,s,o){const a=e.direction?i:s,c=e.direction?s:i,l=[t.object(e.poolAddress),r,t.pure.u64(e.inputAmount),t.pure.u64(0),t.pure.bool(e.direction),a,c,t.pure.bool(o),t.object(ke)],u=e.direction?[e.fromCoin,e.toCoin]:[e.toCoin,e.fromCoin],d=t.moveCall({target:`${n.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:u,arguments:l});return i=e.direction?d[0]:d[1],s=e.direction?d[1]:d[0],{from:i,to:s,tx:t}}static buildClmmBasePathTx(n,e,t,r,i,s,o,a){const{clmm_pool:c,integrate:l}=n.sdkOptions,u=J(c).global_config_id;let d=e.direction?i:s,h=e.direction?s:i;const f=a==="",m=f?Ec:Og,w=f?"swap":"swap_with_partner",y=r?e.inputAmount.toString():e.outputAmount.toString(),C=ro.getDefaultSqrtPriceLimit(e.direction),A=f?[t.object(u),t.object(e.poolAddress),d,h,t.pure.bool(e.direction),t.pure.bool(r),t.pure.u64(y),t.pure.u128(C.toString()),t.pure.bool(o),t.object(ke)]:[t.object(u),t.object(e.poolAddress),t.object(a),d,h,t.pure.bool(e.direction),t.pure.bool(r),t.pure.u64(y),t.pure.u128(C.toString()),t.pure.bool(o),t.object(ke)],M=e.direction?[e.fromCoin,e.toCoin]:[e.toCoin,e.fromCoin],H=t.moveCall({target:`${l.published_at}::${m}::${w}`,typeArguments:M,arguments:A});return d=H[0],h=H[1],i=e.direction?d:h,s=e.direction?h:d,{from:i,to:s,tx:t}}static buildCoinTypePair(n,e){const t=[];if(n.length===2){const r=[];r.push(n[0],n[1]),t.push(r)}else{const r=[];r.push(n[0],n[n.length-1]),t.push(r);for(let i=1;i<n.length-1;i+=1){if(e[i-1]===0)continue;const s=[];s.push(n[0],n[i],n[n.length-1]),t.push(s)}}return t}static buildTransferCoinToSender(n,e,t,r){e.moveCall({target:`${n.sdkOptions.integrate.published_at}::${H_}::transfer_coin_to_sender`,typeArguments:[r],arguments:[t]})}static buildTransferCoin(n,e,t,r,i){i!=null?e.transferObjects([t],e.pure.address(i)):Ze.buildTransferCoinToSender(n,e,t,r)}},$e=Ze;Vq($e,"callMintZeroValueCoin",(n,e)=>n.moveCall({target:"0x2::coin::zero",typeArguments:[e]}));function hr(n){return!(!n.startsWith("0x")||n.length!==66)}var cl=new B(1e9),J_=class{static createAccountCap(n,e,t,r=!1){if(n.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:i}=e,[s]=t.moveCall({target:`${i.published_at}::${Hq}::create_account`,typeArguments:[],arguments:[]});return r&&t.transferObjects([s],t.pure.address(n)),[s,t]}static deleteAccountCap(n,e,t){const{deepbook:r}=e,i=[t.object(n)];return t.moveCall({target:`${r.published_at}::${Ng}::delete_account_cap`,typeArguments:[],arguments:i}),t}static deleteAccountCapByObject(n,e,t){const{deepbook:r}=e,i=[n];return t.moveCall({target:`${r.published_at}::${Ng}::delete_account_cap`,typeArguments:[],arguments:i}),t}static async getAccountCap(n,e=!0){const t=await n.fullClient.getOwnedObjectsByPage(n.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:e,showOwner:!0},filter:{MoveModule:{package:n.sdkOptions.deepbook.package_id,module:Ng}}});return t.data.length===0?"":t.data[0].data.objectId}static async getPools(n){const e=n.sdkOptions.deepbook.package_id,t=[];try{(await n.fullClient.queryEventsByPage({MoveEventType:`${e}::clob_v2::PoolCreated`})).data.forEach(i=>{const s=i.parsedJson;s&&t.push({poolID:s.pool_id,tickSize:Number(s.tick_size),lotSize:Number(s.lot_size),takerFeeRate:Number(s.taker_fee_rate),makerRebateRate:Number(s.maker_rebate_rate),baseAsset:s.base_asset.name,quoteAsset:s.quote_asset.name})})}catch(r){console.log("getPoolImmutables",r)}return t}static async getPoolAsks(n,e,t,r){var h;const{simulationAccount:i}=n.sdkOptions,{deepbook_endpoint_v2:s}=n.sdkOptions,o=new fe,a=[],c=[t,r],l=[o.object(e),o.pure.u64("0"),o.pure.u64("999999999999"),o.object(ke)];o.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:l,typeArguments:c});const d=(h=(await n.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address})).events)==null?void 0:h.filter(f=>pe(f.type).name==="BookStatus");if(d.length===0)return a;for(let f=0;f<d[0].parsedJson.depths.length;f++){const m=d[0].parsedJson.price[f],w=d[0].parsedJson.depths[f],y={price:parseInt(m,10),quantity:parseInt(w,10)};a.push(y)}return a}static async getPoolBids(n,e,t,r){var h;const{simulationAccount:i}=n.sdkOptions,{deepbook_endpoint_v2:s}=n.sdkOptions,o=new fe,a=[],c=[t,r],l=[o.object(e),o.pure.u64("0"),o.pure.u64("999999999999"),o.object(ke)];o.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:l,typeArguments:c});const d=(h=(await n.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address})).events)==null?void 0:h.filter(f=>pe(f.type).name==="BookStatus");if(d.length===0)return a;for(let f=0;f<d[0].parsedJson.depths.length;f++){const m=d[0].parsedJson.price[f],w=d[0].parsedJson.depths[f],y={price:parseInt(m,10),quantity:parseInt(w,10)};a.push(y)}return a}static async preSwap(n,e,t,r){let i=!1,s=We,o=new B(r),a=We;const c=new B(r);if(t){let l=await this.getPoolBids(n,e.poolID,e.baseAsset,e.quoteAsset);l===null&&(i=!0),l=l.sort((u,d)=>d.price-u.price);for(let u=0;u<l.length;u+=1){const d=new B(l[u].quantity),h=new B(l[u].price),f=d.mul(new B(h)).mul(new B(e.takerFeeRate)).div(cl).div(cl);if(o.gt(d))o=o.sub(d),s=s.add(d.mul(h).div(cl).sub(f)),a=a.add(f);else{const m=o.mul(new B(l[u].price)).div(cl),w=m.mul(new B(e.takerFeeRate)).div(cl);s=s.add(m.sub(w)),o=o.sub(o),a=a.add(w)}if(o.eq(We))break}}else{const l=await this.getPoolAsks(n,e.poolID,e.baseAsset,e.quoteAsset);l===null&&(i=!0);for(let u=0;u<l.length;u+=1){const d=new B(l[u].price).mul(new B(l[u].quantity)).div(new B(1e9)),h=d.mul(new B(e.takerFeeRate)).div(cl),f=d.add(h);if(o.gt(d))s=s.add(new B(l[u].quantity)),o=o.sub(f),a=a.add(h);else{const m=new B(l[u].quantity).div(new B(e.lotSize)),w=f.div(m),y=o.div(w);s=s.add(y.muln(e.lotSize)),o=o.sub(y.mul(w)),a=a.add(y.div(m).mul(h))}if(o.eq(We))break}}return{poolAddress:e.poolID,estimatedAmountIn:c.sub(o).toNumber(),estimatedAmountOut:s.toNumber(),estimatedFeeAmount:a,isExceed:i,amount:Number(r),aToB:t,byAmountIn:!0}}static async simulateSwap(n,e,t,r,i,s){var G;const{deepbook_endpoint_v2:o}=n.sdkOptions;let a=new fe;const c=await this.getAccountCap(n);let l;if(c===""){const q=this.createAccountCap(n.senderAddress,n.sdkOptions,a),X=q[0];a=q[1],l=X}else l=a.object(c);const u=await n.getOwnerCoinAssets(n.senderAddress),d=$e.buildCoinForAmount(a,u,BigInt(s),t,!1),h=d==null?void 0:d.targetCoin,f=$e.buildCoinForAmount(a,u,BigInt(s),r,!1),m=f==null?void 0:f.targetCoin,w=[t,r],y=[a.object(e),l,a.pure.u64(s),a.pure.u64(0),a.pure.bool(i),h,m,a.object(ke)];a.moveCall({target:`${o.published_at}::${Gq}::swap`,arguments:y,typeArguments:w});const{simulationAccount:C}=n.sdkOptions,M=(G=(await n.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:C.address})).events)==null?void 0:G.filter(q=>pe(q.type).name==="DeepbookSwapEvent");if(M.length===0)return null;const H=M[0].parsedJson;return{poolAddress:H.pool,estimatedAmountIn:H.amount_in,estimatedAmountOut:H.amount_out,aToB:H.atob}}},xz=class{constructor(n){v(this,"_sdk");v(this,"_cache",{});this._sdk=n}get sdk(){return this._sdk}async getPositionList(n,e="all"){const t={data:[],hasNextPage:!0},r=await this._sdk.fullClient.getDynamicFieldsByPage(n,e);t.hasNextPage=r.hasNextPage,t.nextCursor=r.nextCursor;const i=r.data.map(o=>{if(o.error!=null)throw new Me(`when getPositionList get position objects error: ${o.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return o.name.value}),s=await this._sdk.Position.getSipmlePositionList(i);return t.data=s,t}async getPoolImmutables(n=[],e=0,t=100,r=!1){const{package_id:i}=this._sdk.sdkOptions.clmm_pool,s=`${i}_getInitPoolEvent`,o=this.getCache(s,r),a=[],c=[];if(o!==void 0&&a.push(...o),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${i}::factory::CreatePoolEvent`})).data.forEach(d=>{const h=d.parsedJson;h&&a.push({poolAddress:h.pool_id,tickSpacing:h.tick_spacing,coinTypeA:pe(h.coin_type_a).full_address,coinTypeB:pe(h.coin_type_b).full_address})}),this.updateCache(s,a,De)}catch(u){console.log("getPoolImmutables",u)}const l=n.length>0;for(let u=0;u<a.length;u+=1){const d=a[u];l&&!n.includes(d.poolAddress)||!l&&(u<e||u>=e+t)||c.push(d)}return c}async getPools(n=[],e=0,t=100){var o,a,c;const r=[];let i=[];n.length>0?i=[...n]:(await this.getPoolImmutables([],e,t,!1)).forEach(u=>i.push(u.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(i,{showContent:!0,showType:!0});for(const l of s){if(l.error!=null||((a=(o=l.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Me(`getPools error code: ${((c=l.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=Dg(l);r.push(u);const d=`${u.poolAddress}_getPoolObject`;this.updateCache(d,u,De)}return r}async getPoolImmutablesWithPage(n="all",e=!1){const{package_id:t}=this._sdk.sdkOptions.clmm_pool,r=[],i={data:[],hasNextPage:!1},s=n==="all",o=`${t}_getPoolImmutables`;if(s){const a=this.getCache(o,e);a&&r.push(...a)}if(r.length===0)try{const a=`${t}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},n);i.hasNextPage=c.hasNextPage,i.nextCursor=c.nextCursor,c.data.forEach(l=>{const u=l.parsedJson;if(u){const d={poolAddress:u.pool_id,tickSpacing:u.tick_spacing,coinTypeA:pe(u.coin_type_a).full_address,coinTypeB:pe(u.coin_type_b).full_address};r.push(d)}})}catch(a){console.log("getPoolImmutables",a)}return i.data=r,s&&this.updateCache(`${t}_getPoolImmutables`,r,De),i}async getPoolsWithPage(n=[],e="all",t=!1){var o,a,c;const r=[];let i=[];n.length>0?i=[...n]:(await this.getPoolImmutablesWithPage(e,t)).data.forEach(u=>i.push(u.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(i,{showContent:!0,showType:!0});for(const l of s){if(l.error!=null||((a=(o=l.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Me(`getPoolWithPages error code: ${((c=l.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=Dg(l);r.push(u);const d=`${u.poolAddress}_getPoolObject`;this.updateCache(d,u,De)}return r}async getPool(n,e=!0){var o,a,c;const t=`${n}_getPoolObject`,r=this.getCache(t,e);if(r!==void 0)return r;const i=await this._sdk.fullClient.getObject({id:n,options:{showType:!0,showContent:!0}});if(i.error!=null||((a=(o=i.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Me(`getPool error code: ${((c=i.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const s=Dg(i);return this.updateCache(t,s),s}async getPoolByCoins(n,e){if(n.length===0)return[];const t=this._sdk.sdkOptions.swapCountUrl,r=await fetch(t);let i;try{i=await r.json()}catch{throw new Me(`Failed tp [arse response from ${t}].`,"InvalidSwapCountUrl")}const s=i.data.lp_list;if(!s||s.length===0)throw new Me(`Failed tp [arse response from ${t}].`,"PoolsNotFound");const o=[];for(const a of s)n.includes(a.coin_a_address)&&n.includes(a.coin_b_address)&&(e!=null?a.object.feeRate===e&&o.push(a.address):o.push(a.address));return o.length>0?await this.getPools(o):[]}async creatPoolsTransactionPayload(n){for(const t of n)if(sw(Ti(t.coinTypeA),Ti(t.coinTypeB))){const r=t.coinTypeB;t.coinTypeB=t.coinTypeA,t.coinTypeA=r}return await this.creatPool(n)}async creatPoolTransactionPayload(n){if(sw(Ti(n.coinTypeA),Ti(n.coinTypeB))){const e=n.coinTypeB;n.coinTypeB=n.coinTypeA,n.coinTypeA=e}return"fix_amount_a"in n?await this.creatPoolAndAddLiquidity(n):await this.creatPool([n])}async getClmmConfigs(n=!1){const{package_id:e}=this._sdk.sdkOptions.clmm_pool,t=`${e}_getInitEvent`,r=this.getCache(t,n);if(r!==void 0)return r;const i=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),s=sh(i),o=(await this._sdk.fullClient.queryEventsByPage({Transaction:s})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return o.length>0&&(o.forEach(c=>{const l=c.parsedJson;if(c.type)switch(pe(c.type).full_address){case`${e}::config::InitConfigEvent`:a.global_config_id=l.global_config_id,a.admin_cap_id=l.admin_cap_id;break;case`${e}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break;case`${e}::rewarder::RewarderInitEvent`:a.global_vault_id=l.global_vault_id;break;case`${e}::partner::InitPartnerEvent`:a.partners_id=l.partners_id;break}}),this.updateCache(t,a,De)),a}async getSuiTransactionResponse(n,e=!1){const t=`${n}_getSuiTransactionResponse`,r=this.getCache(t,e);if(r!==void 0)return r;let i;try{i=await this._sdk.fullClient.getTransactionBlock({digest:n,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{i=await this._sdk.fullClient.getTransactionBlock({digest:n,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(t,i,De),i}async creatPool(n){const e=new fe,{integrate:t,clmm_pool:r}=this.sdk.sdkOptions,i=J(r),s=i.global_config_id,o=i.pools_id;return n.forEach(a=>{const c=[e.object(s),e.object(o),e.pure.u32(a.tick_spacing),e.pure.u128(a.initialize_sqrt_price),e.pure.string(a.uri),e.object(ke)];e.moveCall({target:`${t.published_at}::${fd}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),e}async creatPoolAndAddLiquidity(n){if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const e=new fe,{integrate:t,clmm_pool:r}=this.sdk.sdkOptions,i=J(r),s=i.global_config_id,o=i.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=$e.buildAddLiquidityFixTokenCoinInput(e,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,a,!1),l=$e.buildAddLiquidityFixTokenCoinInput(e,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,a,!1),u=[e.object(s),e.object(o),e.pure.u32(n.tick_spacing),e.pure.u128(n.initialize_sqrt_price),e.pure.string(n.uri),c.targetCoin,l.targetCoin,e.pure.u32(Number(Ir(BigInt(n.tick_lower)).toString())),e.pure.u32(Number(Ir(BigInt(n.tick_upper)).toString())),e.pure.u64(n.amount_a),e.pure.u64(n.amount_b),e.pure.bool(n.fix_amount_a),e.object(ke)];return e.moveCall({target:`${t.published_at}::${qa}::create_pool_with_liquidity`,typeArguments:[n.coinTypeA,n.coinTypeB],arguments:u}),e}async fetchTicks(n){let e=[],t=[];for(;;){const i=await this.getTicks({pool_id:n.pool_id,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB,start:t,limit:512});if(e=[...e,...i],i.length<512)break;t=[i[i.length-1].index]}return e}async getTicks(n){var l;const{integrate:e,simulationAccount:t}=this.sdk.sdkOptions,r=[],i=[n.coinTypeA,n.coinTypeB],s=new fe,o=s.makeMoveVec({elements:n.start.map(u=>s.pure.u32(u)),type:"u32"}),a=[s.object(n.pool_id),o,s.pure.u64(n.limit.toString())];if(s.moveCall({target:`${e.published_at}::${cs}::fetch_ticks`,arguments:a,typeArguments:i}),!hr(t.address))throw new Me("this config simulationAccount is not set right","InvalidSimulateAccount");const c=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:t.address});if(c.error!=null)throw new Me(`getTicks error code: ${c.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(l=c.events)==null||l.forEach(u=>{pe(u.type).name==="FetchTicksResultEvent"&&u.parsedJson.ticks.forEach(d=>{r.push(Az(d))})}),r}async fetchPositionRewardList(n){var o;const{integrate:e,simulationAccount:t}=this.sdk.sdkOptions,r=[];let i=[];const s=512;for(;;){const a=[n.coinTypeA,n.coinTypeB],c=new fe,l=c.makeMoveVec({elements:i.map(f=>c.pure.address(f)),type:void 0}),u=[c.object(n.pool_id),l,c.pure.u64(s)];if(c.moveCall({target:`${e.published_at}::${cs}::fetch_positions`,arguments:u,typeArguments:a}),!hr(t.address))throw new Me("this config simulationAccount is not set right","InvalidSimulateAccount");const d=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t.address});if(d.error!=null)throw new Me(`fetch position reward error code: ${d.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const h=[];if((o=d==null?void 0:d.events)==null||o.forEach(f=>{pe(f.type).name==="FetchPositionsEvent"&&f.parsedJson.positions.forEach(m=>{const w=uA(m);h.push(w)})}),r.push(...h),h.length<s)break;i=[h[h.length-1].pos_object_id]}return r}async fetchTicksByRpc(n){let e=[],t=null;const r=512;for(;;){const i=[],s=await this.sdk.fullClient.getDynamicFields({parentId:n,cursor:t,limit:r});if(t=s.nextCursor,s.data.forEach(o=>{pe(o.objectType).module==="skip_list"&&i.push(o.objectId)}),e=[...e,...await this.getTicksByRpc(i)],t===null||s.data.length<r)break}return e}async getTicksByRpc(n){var r,i,s;const e=[],t=await this.sdk.fullClient.batchGetObjects(n,{showContent:!0,showType:!0});for(const o of t){if(o.error!=null||((i=(r=o.data)==null?void 0:r.content)==null?void 0:i.dataType)!=="moveObject")throw new Me(`getTicksByRpc error code: ${((s=o.error)==null?void 0:s.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=Bg(o);a!=null&&e.push(a)}return e}async getTickDataByIndex(n,e){var i,s;const t={type:"u64",value:Ir(BigInt(sz(e).toString())).toString()},r=await this.sdk.fullClient.getDynamicFieldObject({parentId:n,name:t});if(r.error!=null||((s=(i=r.data)==null?void 0:i.content)==null?void 0:s.dataType)!=="moveObject")throw new Me(`get tick by index: ${e} error: ${r.error}`,"InvalidTickIndex");return Bg(r)}async getTickDataByObjectId(n){var t,r,i;const e=await this.sdk.fullClient.getObject({id:n,options:{showContent:!0}});if(e.error!=null||((r=(t=e.data)==null?void 0:t.content)==null?void 0:r.dataType)!=="moveObject")throw new Me(`getTicksByRpc error code: ${((i=e.error)==null?void 0:i.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return Bg(e)}async getPartnerRefFeeAmount(n,e=!0){var c,l;const t=await this._sdk.fullClient.batchGetObjects([n],{showOwner:!0,showContent:!0,showDisplay:e,showType:!0});if(console.log("objectDataResponses:",JSON.stringify(t,null,2)),((l=(c=t[0].data)==null?void 0:c.content)==null?void 0:l.dataType)!=="moveObject")throw new Me(`get partner by object id: ${n} error: ${t[0].error}`,"NotFoundPartnerObject");const r=t[0].data.content.fields.balances,i=await this._sdk.fullClient.getDynamicFieldsByPage(r.fields.id.id),s=[];i.data.forEach(u=>{u.objectId!=null&&s.push(u.objectId)});const o=[];return(await this._sdk.fullClient.batchGetObjects(s,{showOwner:!0,showContent:!0,showDisplay:e,showType:!0})).forEach(u=>{var h,f;if(u.error!=null||((f=(h=u.data)==null?void 0:h.content)==null?void 0:f.dataType)!=="moveObject")throw new Me(`get coin by object id: ${u.data.objectId} error: ${u.error}`,"InvalidParnterRefFeeFields");const d={coinAddress:u.data.content.fields.name,coinObjectId:u.data.objectId,balance:BigInt(u.data.content.fields.value)};o.push(d)}),o}async claimPartnerRefFeePayload(n,e,t){const r=new fe,{clmm_pool:i}=this.sdk.sdkOptions,{global_config_id:s}=J(i),o=[t],a=[r.object(s),r.object(n),r.object(e)];return r.moveCall({target:`${i.published_at}::${Zq}::claim_ref_fee`,arguments:a,typeArguments:o}),r}updateCache(n,e,t=Bi){let r=this._cache[n];r?(r.overdueTime=Mt(t),r.value=e):r=new Er(e,Mt(t)),this._cache[n]=r}getCache(n,e=!1){const t=this._cache[n],r=t==null?void 0:t.isValid();if(!e&&r)return t.value;r||delete this._cache[n]}},Ez=class{constructor(n){v(this,"_sdk");v(this,"_cache",{});this._sdk=n}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(n,e=[],t=!0){const r=[],i=await this._sdk.fullClient.getOwnedObjectsByPage(n,{options:{showType:!0,showContent:!0,showDisplay:t,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),s=e.length>0;for(const o of i.data)if(pe(o.data.type).full_address===this.buildPositionType()){const c=Yl(o),l=`${c.pos_object_id}_getPositionList`;this.updateCache(l,c,De),s?e.includes(c.pool)&&r.push(c):r.push(c)}return r}async getPosition(n,e,t=!0,r=!0){let i=await this.getSimplePosition(e,r);return t&&(i=await this.updatePositionRewarders(n,i)),i}async getPositionById(n,e=!0,t=!0){const r=await this.getSimplePosition(n,t);if(e){const i=await this._sdk.Pool.getPool(r.pool,!1);return await this.updatePositionRewarders(i.position_manager.positions_handle,r)}return r}async getSimplePosition(n,e=!0){const t=`${n}_getPositionList`;let r=this.getSimplePositionByCache(n);if(r===void 0){const i=await this.sdk.fullClient.getObject({id:n,options:{showContent:!0,showType:!0,showDisplay:e,showOwner:!0}});r=Yl(i),this.updateCache(t,r,De)}return r}getSimplePositionByCache(n){const e=`${n}_getPositionList`;return this.getCache(e)}async getSipmlePositionList(n,e=!0){const t=[],r=[];return n.forEach(i=>{const s=this.getSimplePositionByCache(i);s?t.push(s):r.push(i)}),r.length>0&&(await this._sdk.fullClient.batchGetObjects(r,{showOwner:!0,showContent:!0,showDisplay:e,showType:!0})).forEach(s=>{if(s.error==null){const o=Yl(s);t.push(o);const a=`${o.pos_object_id}_getPositionList`;this.updateCache(a,o,De)}}),t}async updatePositionRewarders(n,e){const t=await this.getPositionRewarders(n,e.pos_object_id);return{...e,...t}}async getPositionRewarders(n,e){try{const t=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x2::object::ID",value:e}}),i=et(t.data).value.fields.value;return uA(i)}catch(t){console.log(t);return}}async fetchPosFeeAmount(n){var c;const{clmm_pool:e,integrate:t,simulationAccount:r}=this.sdk.sdkOptions,i=new fe;for(const l of n){const u=[l.coinTypeA,l.coinTypeB],d=[i.object(J(e).global_config_id),i.object(l.poolAddress),i.pure.address(l.positionId)];i.moveCall({target:`${t.published_at}::${cs}::fetch_position_fees`,arguments:d,typeArguments:u})}if(!hr(r.address))throw new Me("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:r.address});if(s.error!=null)throw new Me(`fetch position fee error code: ${s.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const o=(c=s.events)==null?void 0:c.filter(l=>pe(l.type).name==="FetchPositionFeesEvent");if(o.length===0)return[];const a=[];for(let l=0;l<o.length;l+=1){const{parsedJson:u}=o[l],d={feeOwedA:new B(u.fee_owned_a),feeOwedB:new B(u.fee_owned_b),position_id:u.position_id};a.push(d)}return a}async batchFetchPositionFees(n){const e=[];for(const r of n){const i=await this._sdk.Position.getPositionById(r,!1),s=await this._sdk.Pool.getPool(i.pool,!1);e.push({poolAddress:s.poolAddress,positionId:i.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const t={};if(e.length>0){const r=await this.fetchPosFeeAmount(e);for(const i of r)t[i.position_id]=i;return t}return t}async createAddLiquidityFixTokenPayload(n,e,t,r,i){if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(e){const{isAdjustCoinA:o,isAdjustCoinB:a}=Bp(n);if(n=n,n.fix_amount_a&&o||!n.fix_amount_a&&a)return t=await $e.buildAddLiquidityFixTokenForGas(this._sdk,s,n,e,t,r,i),t}return $e.buildAddLiquidityFixToken(this._sdk,s,n,t,r,i)}async createAddLiquidityPayload(n,e,t,r){const{integrate:i,clmm_pool:s}=this._sdk.sdkOptions;if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const o=Ir(BigInt(n.tick_lower)).toString(),a=Ir(BigInt(n.tick_upper)).toString(),c=[n.coinTypeA,n.coinTypeB];e=e||new fe;const l=!ex(n.pos_id),u=BigInt(n.max_amount_a),d=BigInt(n.max_amount_b);let h,f;if(t==null||r==null){const m=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);h=$e.buildCoinForAmount(e,m,u,n.coinTypeA,!1),f=$e.buildCoinForAmount(e,m,d,n.coinTypeB,!1)}else h={targetCoin:t,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},f={targetCoin:r,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"};if(l)e.moveCall({target:`${i.published_at}::${qa}::open_position_with_liquidity`,typeArguments:c,arguments:[e.object(J(s).global_config_id),e.object(n.pool_id),e.pure.u32(Number(o)),e.pure.u32(Number(a)),h.targetCoin,f.targetCoin,e.pure.u64(n.max_amount_a),e.pure.u64(n.max_amount_b),e.pure.u128(n.delta_liquidity),e.object(ke)]});else{const m=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);e=$e.createCollectRewarderAndFeeParams(this._sdk,e,n,m,h.remainCoins,f.remainCoins),e.moveCall({target:`${i.published_at}::${qa}::add_liquidity`,typeArguments:c,arguments:[e.object(J(s).global_config_id),e.object(n.pool_id),e.object(n.pos_id),h.targetCoin,f.targetCoin,e.pure.u64(n.max_amount_a),e.pure.u64(n.max_amount_b),e.pure.u128(n.delta_liquidity),e.object(ke)]})}return e}async removeLiquidityTransactionPayload(n,e){if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:t,integrate:r}=this.sdk.sdkOptions,i="remove_liquidity";e=e||new fe;const s=[n.coinTypeA,n.coinTypeB],o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);e=$e.createCollectRewarderAndFeeParams(this._sdk,e,n,o);const a=[e.object(J(t).global_config_id),e.object(n.pool_id),e.object(n.pos_id),e.pure.u128(n.delta_liquidity),e.pure.u64(n.min_amount_a),e.pure.u64(n.min_amount_b),e.object(ke)];return e.moveCall({target:`${r.published_at}::${fd}::${i}`,typeArguments:s,arguments:a}),e}async closePositionTransactionPayload(n,e){if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:t,integrate:r}=this.sdk.sdkOptions;e=e||new fe;const i=[n.coinTypeA,n.coinTypeB],s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return e=$e.createCollectRewarderAndFeeParams(this._sdk,e,n,s),e.moveCall({target:`${r.published_at}::${fd}::close_position`,typeArguments:i,arguments:[e.object(J(t).global_config_id),e.object(n.pool_id),e.object(n.pos_id),e.pure.u64(n.min_amount_a),e.pure.u64(n.min_amount_b),e.object(ke)]}),e}openPositionTransactionPayload(n,e){const{clmm_pool:t,integrate:r}=this.sdk.sdkOptions;e=e||new fe;const i=[n.coinTypeA,n.coinTypeB],s=Ir(BigInt(n.tick_lower)).toString(),o=Ir(BigInt(n.tick_upper)).toString(),a=[e.object(J(t).global_config_id),e.object(n.pool_id),e.pure.u32(Number(s)),e.pure.u32(Number(o))];return e.moveCall({target:`${r.published_at}::${fd}::open_position`,typeArguments:i,arguments:a}),e}async collectFeeTransactionPayload(n,e,t,r){if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const i=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0);e=e||new fe;const s=$e.buildCoinForAmount(e,i,BigInt(0),n.coinTypeA,!1),o=$e.buildCoinForAmount(e,i,BigInt(0),n.coinTypeB,!1),a=t??s.targetCoin,c=r??o.targetCoin;return this.createCollectFeePaylod(n,e,a,c),e}createCollectFeePaylod(n,e,t,r){const{clmm_pool:i,integrate:s}=this.sdk.sdkOptions,o=[n.coinTypeA,n.coinTypeB],a=[e.object(J(i).global_config_id),e.object(n.pool_id),e.object(n.pos_id),t,r];return e.moveCall({target:`${s.published_at}::${qa}::collect_fee`,typeArguments:o,arguments:a}),e}createCollectFeeNoSendPaylod(n,e,t,r){const{clmm_pool:i,integrate:s}=this.sdk.sdkOptions,o=[n.coinTypeA,n.coinTypeB],a=[e.object(J(i).global_config_id),e.object(n.pool_id),e.object(n.pos_id),t,r];return e.moveCall({target:`${s.published_at}::${tA}::collect_fee`,typeArguments:o,arguments:a}),e}async calculateFee(n){const e=await this.collectFeeTransactionPayload(n);if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:e,sender:this._sdk.senderAddress});for(const r of t.events)if(pe(r.type).name==="CollectFeeEvent"){const i=r.parsedJson;return{feeOwedA:i.amount_a,feeOwedB:i.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(n,e,t=Bi){let r=this._cache[n];r?(r.overdueTime=Mt(t),r.value=e):r=new Er(e,Mt(t)),this._cache[n]=r}getCache(n,e=!1){const t=this._cache[n],r=t==null?void 0:t.isValid();if(!e&&r)return t.value;r||delete this._cache[n]}},Mz=class{constructor(n){v(this,"_sdk");v(this,"growthGlobal");this._sdk=n,this.growthGlobal=[We,We,We]}get sdk(){return this._sdk}async emissionsEveryDay(n){const t=(await this.sdk.Pool.getPool(n)).rewarder_infos;if(!t)return null;const r=[];for(const i of t){const s=$t.fromX64(new B(i.emissions_per_second));r.push({emissions:Math.floor(s.toNumber()*60*60*24),coin_address:i.coinAddress})}return r}async updatePoolRewarder(n,e){const t=await this.sdk.Pool.getPool(n),r=t.rewarder_last_updated_time;if(t.rewarder_last_updated_time=e.toString(),Number(t.liquidity)===0||e.eq(new B(r)))return t;const i=e.div(new B(1e3)).sub(new B(r)).add(new B(15)),s=t.rewarder_infos;for(let o=0;o<s.length;o+=1){const a=s[o],c=$t.checkMulDivFloor(i,new B(a.emissions_per_second),new B(t.liquidity),128);this.growthGlobal[o]=new B(a.growth_global).add(new B(c))}return t}async posRewardersAmount(n,e,t){const r=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(n,new B(r)),s=await this.sdk.Position.getPositionRewarders(e,t);if(s===void 0)return[];const o=i.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(o,s.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(o,s.tick_upper_index);return this.posRewardersAmountInternal(i,s,a,c)}async poolRewardersAmount(n,e){const t=Date.parse(new Date().toString()),r=await this.updatePoolRewarder(e,new B(t)),i=await this.sdk.Position.getPositionList(n,[e]),s=await this.getPoolLowerAndUpperTicks(r.ticks_handle,i),o=[We,We,We];for(let a=0;a<i.length;a+=1){const c=await this.posRewardersAmountInternal(r,i[a],s[0][a],s[1][a]);for(let l=0;l<3;l+=1)o[l]=o[l].add(c[l].amount_owed)}return o}posRewardersAmountInternal(n,e,t,r){const i=e.tick_lower_index,s=e.tick_upper_index,o=Tz(n,t,r,i,s,this.growthGlobal),a=[],c=[];if(o.length>0){let l=$t.subUnderflowU128(o[0],new B(e.reward_growth_inside_0));l.gt(new B("3402823669209384634633745948738404"))&&(l=fo);const u=$t.checkMulShiftRight(new B(e.liquidity),l,64,128);a.push(o[0]),c.push({amount_owed:new B(e.reward_amount_owed_0).add(u),coin_address:n.rewarder_infos[0].coinAddress})}if(o.length>1){let l=$t.subUnderflowU128(o[1],new B(e.reward_growth_inside_1));l.gt(new B("3402823669209384634633745948738404"))&&(l=fo);const u=$t.checkMulShiftRight(new B(e.liquidity),l,64,128);a.push(o[1]),c.push({amount_owed:new B(e.reward_amount_owed_1).add(u),coin_address:n.rewarder_infos[1].coinAddress})}if(o.length>2){let l=$t.subUnderflowU128(o[2],new B(e.reward_growth_inside_2));l.gt(new B("3402823669209384634633745948738404"))&&(l=fo);const u=$t.checkMulShiftRight(new B(e.liquidity),l,64,128);a.push(o[2]),c.push({amount_owed:new B(e.reward_amount_owed_2).add(u),coin_address:n.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(n){const e=[];for(const r of n){const i=await this._sdk.Position.getPositionById(r,!1),s=await this._sdk.Pool.getPool(i.pool,!1);e.push({poolAddress:s.poolAddress,positionId:i.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB,rewarderInfo:s.rewarder_infos})}const t={};if(e.length>0){const r=await this.fetchPosRewardersAmount(e);for(const i of r)t[i.positionId]=i.rewarderAmountOwed;return t}return t}async fetchPositionRewarders(n,e){const t={poolAddress:n.poolAddress,positionId:e,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB,rewarderInfo:n.rewarder_infos};return(await this.fetchPosRewardersAmount([t]))[0].rewarderAmountOwed}async batchFetchPositionFees(n){const e=[];for(const r of n){const i=await this._sdk.Position.getPositionById(r,!1),s=await this._sdk.Pool.getPool(i.pool,!1);e.push({poolAddress:s.poolAddress,positionId:i.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const t={};if(e.length>0){const r=await this.fetchPosFeeAmount(e);for(const i of r)t[i.position_id]=i;return t}return t}async fetchPosFeeAmount(n){var c;const{clmm_pool:e,integrate:t,simulationAccount:r}=this.sdk.sdkOptions,i=new fe;for(const l of n){const u=[l.coinTypeA,l.coinTypeB],d=[i.object(J(e).global_config_id),i.object(l.poolAddress),i.pure.address(l.positionId)];i.moveCall({target:`${t.published_at}::${cs}::fetch_position_fees`,arguments:d,typeArguments:u})}const o=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:r.address})).events)==null?void 0:c.filter(l=>pe(l.type).name==="FetchPositionFeesEvent");if(o.length===0)return[];const a=[];for(let l=0;l<o.length;l+=1){const{parsedJson:u}=o[l],d={feeOwedA:new B(u.fee_owned_a),feeOwedB:new B(u.fee_owned_b),position_id:u.position_id};a.push(d)}return a}async fetchPosRewardersAmount(n){var c;const{clmm_pool:e,integrate:t,simulationAccount:r}=this.sdk.sdkOptions,i=new fe;for(const l of n){const u=[l.coinTypeA,l.coinTypeB],d=[i.object(J(e).global_config_id),i.object(l.poolAddress),i.pure.address(l.positionId),i.object(ke)];i.moveCall({target:`${t.published_at}::${cs}::fetch_position_rewards`,arguments:d,typeArguments:u})}if(!hr(r.address))throw new Me(`this config simulationAccount: ${r.address} is not set right`,"InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:r.address});if(s.error!=null)throw new Me(`fetch position rewards error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const o=(c=s.events)==null?void 0:c.filter(l=>pe(l.type).name==="FetchPositionRewardsEvent");if(o.length===0)return[];if(o.length!==n.length)throw new Me("valueData.length !== params.pools.length");const a=[];for(let l=0;l<o.length;l+=1){const u={poolAddress:n[l].poolAddress,positionId:n[l].positionId,rewarderAmountOwed:[]};for(let d=0;d<n[l].rewarderInfo.length;d+=1)u.rewarderAmountOwed.push({amount_owed:new B(o[l].parsedJson.data[d]),coin_address:n[l].rewarderInfo[d].coinAddress});a.push(u)}return a}async fetchPoolRewardersAmount(n,e){const t=await this.sdk.Pool.getPool(e),r=await this.sdk.Position.getPositionList(n,[e]),i=[];for(const a of r)i.push({poolAddress:t.poolAddress,positionId:a.pos_object_id,rewarderInfo:t.rewarder_infos,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB});const s=await this.fetchPosRewardersAmount(i),o=[We,We,We];if(s!=null)for(const a of s)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)o[c]=o[c].add(a.rewarderAmountOwed[c].amount_owed);return o}async getPoolLowerAndUpperTicks(n,e){const t=[],r=[];for(const i of e){const s=await this.sdk.Pool.getTickDataByIndex(n,i.tick_lower_index),o=await this.sdk.Pool.getTickDataByIndex(n,i.tick_upper_index);t.push(s),r.push(o)}return[t,r]}async collectRewarderTransactionPayload(n){if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const e=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let t=new fe;return t=$e.createCollectRewarderAndFeeParams(this._sdk,t,n,e),t}async batchCollectRewardePayload(n,e,t,r){if(!hr(this._sdk.senderAddress))throw new Me("this config sdk senderAddress is not set right","InvalidSendAddress");const i=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);e=e||new fe;const s={};return n.forEach(o=>{const a=On(o.coinTypeA),c=On(o.coinTypeB);if(o.collect_fee){let u=s[a];u==null&&(t==null?u=$e.buildCoinForAmount(e,i,BigInt(0),a,!1):u={targetCoin:t,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},s[a]=u);let d=s[c];d==null&&(r==null?d=$e.buildCoinForAmount(e,i,BigInt(0),c,!1):d={targetCoin:r,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},s[c]=d),e=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:o.pool_id,pos_id:o.pos_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB},e,u.targetCoin,d.targetCoin)}const l=[];o.rewarder_coin_types.forEach(u=>{const d=On(u);let h=s[u];h===void 0&&(h=$e.buildCoinForAmount(e,i,BigInt(0),d,!1),s[d]=h),l.push(h.targetCoin)}),e=this.createCollectRewarderNoSendPaylod(o,e,l)}),Object.keys(s).forEach(o=>{const a=s[o];a.isMintZeroCoin&&$e.buildTransferCoin(this._sdk,e,a.targetCoin,o,this._sdk.senderAddress)}),e}createCollectRewarderPaylod(n,e,t){const{clmm_pool:r,integrate:i}=this.sdk.sdkOptions,s=J(r),o=[n.coinTypeA,n.coinTypeB];return n.rewarder_coin_types.forEach((a,c)=>{e&&e.moveCall({target:`${i.published_at}::${qa}::collect_reward`,typeArguments:[...o,a],arguments:[e.object(s.global_config_id),e.object(n.pool_id),e.object(n.pos_id),e.object(s.global_vault_id),t[c],e.object(ke)]})}),e}createCollectRewarderNoSendPaylod(n,e,t){const{clmm_pool:r,integrate:i}=this.sdk.sdkOptions,s=J(r),o=[n.coinTypeA,n.coinTypeB];return n.rewarder_coin_types.forEach((a,c)=>{e&&e.moveCall({target:`${i.published_at}::${tA}::collect_reward`,typeArguments:[...o,a],arguments:[e.object(s.global_config_id),e.object(n.pool_id),e.object(n.pos_id),e.object(s.global_vault_id),t[c],e.object(ke)]})}),e}};function Ph(n,e){return{pair:`${n}-${e}`,reversePair:`${e}-${n}`}}var Oz=class{constructor(n){v(this,"graph");v(this,"pathProviders");v(this,"coinProviders");v(this,"_coinAddressMap");v(this,"poolAddressMap");v(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new tx(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=n,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(n,e){const{pair:t,reversePair:r}=Ph(n,e);let i=this.poolAddressMap.get(t);if(i!=null)return{addressMap:i,direction:!0};if(i=this.poolAddressMap.get(r),i!=null)return{addressMap:i,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(n=>{this._coinAddressMap.set(n.address,n)})}loadGraph(n,e){this.addCoinProvider(n),this.addPathProvider(e),this.setCoinList(),this.pathProviders.forEach(t=>{const{paths:r}=t;r.forEach(i=>{const s=this.graph.getVertexByKey(i.base)??new _b(i.base),o=this.graph.getVertexByKey(i.quote)??new _b(i.quote);this.graph.addEdge(new nx(s,o));const a=this._coinAddressMap.get(i.base),c=this._coinAddressMap.get(i.quote);if(a!=null&&c!=null){const l=Ph(i.base,i.quote).pair;this.poolAddressMap.set(l,i.addressMap)}})})}addPathProvider(n){for(let e=0;e<n.paths.length;e+=1){const{base:t,quote:r}=n.paths[e];t.localeCompare(r)<0&&(n.paths[e].base=r,n.paths[e].quote=t),t==="0x2::sui::SUI"&&(n.paths[e].base=r,n.paths[e].quote=t),r==="0x2::sui::SUI"&&(n.paths[e].base=t,n.paths[e].quote=r)}return this.pathProviders.push(n),this}addCoinProvider(n){return this.coinProviders=n,this}tokenInfo(n){return this._coinAddressMap.get(n)}getFeeRate(n,e,t){const r=Ph(n,e).pair,i=this.poolAddressMap.get(r);if(i!=null){for(const[a,c]of i.entries())if(c===t)return a*100}const s=Ph(n,e).reversePair,o=this.poolAddressMap.get(s);if(o!=null){for(const[a,c]of o.entries())if(c===t)return a*100}return 0}async price(n,e,t,r,i,s,o){const a=this.tokenInfo(n),c=this.tokenInfo(e);if(a===void 0||c===void 0)throw new Me("From/To coin is undefined","InvalidCoin");const l=this.graph.getVertexByKey(a.address),u=this.graph.getVertexByKey(c.address),d=this.graph.findAllPath(l,u),h=Array.from(d);if(h.length===0)throw new Me("No find valid path in coin graph","NotFoundPath");let f=[];for(let R=0;R<h.length;R+=1){const V=h[R];if(V.length>3)continue;const U=[],Y=[],x=[],p=[];for(let g=0;g<V.length-1;g+=1){const k=V[g].value.toString(),T=V[g+1].value.toString(),O=this.getPoolAddressMapAndDirection(k,T),L=O==null?void 0:O.addressMap,W=O==null?void 0:O.direction;L!=null&&W!=null&&(Y.push(W),U.push(k),U.push(T),L.forEach(P=>{g===0?x.push(P):p.push(P)}))}for(const g of x)if(p.length>0)for(const k of p){const T={stepNums:2,poolAB:g,poolBC:k,a2b:Y[0],b2c:Y[1],amount:t,byAmountIn:r,coinTypeA:U[0],coinTypeB:U[1],coinTypeC:U[3]};f.push(T)}else{const k={stepNums:1,poolAB:g,poolBC:void 0,a2b:Y[0],b2c:void 0,amount:t,byAmountIn:r,coinTypeA:U[0],coinTypeB:U[1],coinTypeC:void 0};f.push(k)}}const m=f.filter(R=>R.stepNums===1),w=f.filter(R=>R.stepNums!==1);let y=[];try{y=await this.getPoolWithTVL()}catch{y=[]}if(y.length>0){const R=new Map(y.map(V=>[V.poolAddress,V]));w.sort((V,U)=>{let Y=0,x=0;if(R.has(V.poolAB)&&R.has(V.poolBC)){const p=R.get(V.poolAB),g=R.get(V.poolBC);Y=Math.min(p.tvl,g.tvl)}if(R.has(U.poolAB)&&R.has(U.poolBC)){const p=R.get(U.poolAB),g=R.get(U.poolBC);x=Math.min(p.tvl,g.tvl)}return x-Y})}if(f=[...m,...w],f.length===0){if(o!=null){const R=await this.sdk.Swap.preSwapWithMultiPool(o),V={amountIn:new B(R.estimatedAmountIn),amountOut:new B(R.estimatedAmountOut),poolAddress:[R.poolAddress],a2b:[R.aToB],rawAmountLimit:r?[R.estimatedAmountOut]:[R.estimatedAmountIn],isExceed:R.isExceed,coinType:[n,e]},U={paths:[V],partner:s,priceSlippagePoint:i};return{amountIn:new B(R.estimatedAmountIn),amountOut:new B(R.estimatedAmountOut),paths:[V],a2b:R.aToB,b2c:void 0,byAmountIn:r,isExceed:R.isExceed,targetSqrtPrice:[R.estimatedEndSqrtPrice],currentSqrtPrice:[R.estimatedStartSqrtPrice],coinTypeA:n,coinTypeB:e,coinTypeC:void 0,createTxParams:U}}throw new Me("No parameters available for service downgrade","NoDowngradeNeedParams")}const C=await this.preRouterSwapA2B2C(f.slice(0,16));if(C==null){if(o!=null){const V=await this.sdk.Swap.preSwapWithMultiPool(o),U={amountIn:new B(V.estimatedAmountIn),amountOut:new B(V.estimatedAmountOut),poolAddress:[V.poolAddress],a2b:[V.aToB],rawAmountLimit:r?[V.estimatedAmountOut]:[V.estimatedAmountIn],isExceed:V.isExceed,coinType:[n,e]},Y={paths:[U],partner:s,priceSlippagePoint:i};return{amountIn:new B(V.estimatedAmountIn),amountOut:new B(V.estimatedAmountOut),paths:[U],a2b:V.aToB,b2c:void 0,byAmountIn:r,isExceed:V.isExceed,targetSqrtPrice:[V.estimatedEndSqrtPrice],currentSqrtPrice:[V.estimatedStartSqrtPrice],coinTypeA:n,coinTypeB:e,coinTypeC:void 0,createTxParams:Y}}return{amountIn:We,amountOut:We,paths:[],a2b:!1,b2c:!1,byAmountIn:r,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const A=C.index,M=f[A].poolBC!=null?[f[A].poolAB,f[A].poolBC]:[f[A].poolAB],H=r?[C.amountMedium,C.amountOut]:[C.amountIn,C.amountMedium],G=[];G.push(f[A].a2b),C.stepNum>1&&G.push(f[A].b2c);const q=[];q.push(f[A].coinTypeA),q.push(f[A].coinTypeB),C.stepNum>1&&q.push(f[A].coinTypeC);const X={amountIn:C.amountIn,amountOut:C.amountOut,poolAddress:M,a2b:G,rawAmountLimit:H,isExceed:C.isExceed,coinType:q},E={paths:[X],partner:s,priceSlippagePoint:i};return{amountIn:C.amountIn,amountOut:C.amountOut,paths:[X],a2b:f[A].a2b,b2c:C.stepNum>1?f[A].b2c:void 0,byAmountIn:r,isExceed:C.isExceed,targetSqrtPrice:C.targetSqrtPrice,currentSqrtPrice:C.currentSqrtPrice,coinTypeA:f[A].coinTypeA,coinTypeB:f[A].coinTypeB,coinTypeC:C.stepNum>1?f[A].coinTypeC:void 0,createTxParams:E}}async priceUseV1(n,e,t,r,i,s,o){if(o!=null){const a=await this.sdk.Swap.preSwapWithMultiPool(o),c={amountIn:new B(a.estimatedAmountIn),amountOut:new B(a.estimatedAmountOut),poolAddress:[a.poolAddress],a2b:[a.aToB],rawAmountLimit:r?[a.estimatedAmountOut]:[a.estimatedAmountIn],isExceed:a.isExceed,coinType:[n,e]},l={paths:[c],partner:s,priceSlippagePoint:i};return{amountIn:new B(a.estimatedAmountIn),amountOut:new B(a.estimatedAmountOut),paths:[c],a2b:a.aToB,b2c:void 0,byAmountIn:r,isExceed:a.isExceed,targetSqrtPrice:[a.estimatedEndSqrtPrice],currentSqrtPrice:[a.estimatedStartSqrtPrice],coinTypeA:n,coinTypeB:e,coinTypeC:void 0,createTxParams:l}}throw new Me("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(n){var d;if(n.length===0)return null;const{integrate:e,simulationAccount:t}=this.sdk.sdkOptions,r=new fe;for(const h of n)if(h.stepNums>1){const f=[r.object(h.poolAB),r.object(h.poolBC),r.pure.bool(h.a2b),r.pure.bool(h.b2c),r.pure.bool(h.byAmountIn),r.pure.u64(h.amount.toString())],m=[];h.a2b?m.push(h.coinTypeA,h.coinTypeB):m.push(h.coinTypeB,h.coinTypeA),h.b2c?m.push(h.coinTypeB,h.coinTypeC):m.push(h.coinTypeC,h.coinTypeB),r.moveCall({target:`${e.published_at}::${Ec}::calculate_router_swap_result`,typeArguments:m,arguments:f})}else{const f=[r.object(h.poolAB),r.pure.bool(h.a2b),r.pure.bool(h.byAmountIn),r.pure.u64(h.amount.toString())],m=h.a2b?[h.coinTypeA,h.coinTypeB]:[h.coinTypeB,h.coinTypeA];r.moveCall({target:`${e.published_at}::${Qq}::get_expect_swap_result`,arguments:f,typeArguments:m})}if(!hr(t.address))throw new Me("this config simulationAccount is not set right","InvalidSimulateAccount");const s=(d=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:t.address})).events)==null?void 0:d.filter(h=>pe(h.type).name==="CalculatedRouterSwapResultEvent"||pe(h.type).name==="ExpectSwapResultEvent");if(s.length===0)return null;let o=n[0].byAmountIn?We:_u,a=0;for(let h=0;h<s.length;h+=1)if(!s[h].parsedJson.data.is_exceed)if(n[0].byAmountIn){const f=new B(s[h].parsedJson.data.amount_out);f.gt(o)&&(a=h,o=f)}else{const f=n[h].stepNums>1?new B(s[h].parsedJson.data.amount_in):new B(s[h].parsedJson.data.amount_in).add(new B(s[h].parsedJson.data.fee_amount));f.lt(o)&&(a=h,o=f)}const c=[],l=[];return n[a].stepNums>1?(l.push(s[a].parsedJson.data.target_sqrt_price_ab,s[a].parsedJson.data.target_sqrt_price_cd),c.push(s[a].parsedJson.data.current_sqrt_price_ab,s[a].parsedJson.data.current_sqrt_price_cd)):(l.push(s[a].parsedJson.data.after_sqrt_price),c.push(s[a].parsedJson.current_sqrt_price)),{index:a,amountIn:n[0].byAmountIn?n[a].amount:o,amountMedium:s[a].parsedJson.data.amount_medium,amountOut:n[0].byAmountIn?o:n[a].amount,targetSqrtPrice:l,currentSqrtPrice:c,isExceed:s[a].parsedJson.data.is_exceed,stepNum:n[a].stepNums}}async getPoolWithTVL(){const n=[],{swapCountUrl:e}=this._sdk.sdkOptions;if(!e)return n;let t;try{t=await fetch(e)}catch{throw new Me(`Failed to get pool list with liquidity from ${e}.`,"InvalidSwapCountUrl")}let r;try{r=await t.json()}catch{throw new Me(`Failed tp [arse response from ${e}].`,"InvalidSwapCountUrl")}if(r.code!==200)throw new Me(`Failed to get pool list from ${e}. Statu code is ${r.code}.`,"InvalidSwapCountUrl");const{pools:i}=r.data;for(const s of i)n.push({poolAddress:s.swap_account,tvl:Number(s.tvl_in_usd)});return n}},Nz=class{constructor(n){v(this,"_sdk");v(this,"calculateSingleImpact",(n,e)=>e.minus(n).div(e).mul(100));this._sdk=n}get sdk(){return this._sdk}calculateSwapFee(n){let e=Q(0);return n.forEach(t=>{const r=t.basePaths.length;if(r>0){const i=t.basePaths[0],s=i.label==="Cetus"?new ue(i.feeRate).div(10**6):new ue(i.feeRate).div(10**9),o=Q(i.inputAmount).div(10**i.fromDecimal).mul(s);if(e=e.add(o),r>1){const a=t.basePaths[1],c=i.direction?i.currentPrice:new ue(1).div(i.currentPrice),l=a.direction?a.currentPrice:new ue(1).div(a.currentPrice),u=a.label==="Cetus"?new ue(a.feeRate).div(10**6):new ue(a.feeRate).div(10**9),h=Q(a.outputAmount).div(10**a.toDecimal).mul(u).div(c.mul(l));e=e.add(h)}}}),e.toString()}calculateSwapPriceImpact(n){let e=Q(0);return n.forEach(t=>{const r=t.basePaths.length;if(r===1){const i=t.basePaths[0],s=Q(i.outputAmount).div(10**i.toDecimal),o=Q(i.inputAmount).div(10**i.fromDecimal),a=s.div(o),c=i.direction?new ue(i.currentPrice):new ue(1).div(i.currentPrice);e=e.add(this.calculateSingleImpact(a,c))}if(r===2){const i=t.basePaths[0],s=t.basePaths[1],o=i.direction?new ue(i.currentPrice):new ue(1).div(i.currentPrice),a=s.direction?new ue(s.currentPrice):new ue(1).div(s.currentPrice),c=o.mul(a),l=new ue(s.outputAmount).div(10**s.toDecimal),u=new ue(i.inputAmount).div(10**i.fromDecimal),d=l.div(u);e=e.add(this.calculateSingleImpact(d,c))}}),e.toString()}async preSwapWithMultiPool(n){var l;const{integrate:e,simulationAccount:t}=this.sdk.sdkOptions,r=new fe,i=[n.coinTypeA,n.coinTypeB];for(let u=0;u<n.poolAddresses.length;u+=1){const d=[r.object(n.poolAddresses[u]),r.pure.bool(n.a2b),r.pure.bool(n.byAmountIn),r.pure.u64(n.amount)];r.moveCall({target:`${e.published_at}::${cs}::calculate_swap_result`,arguments:d,typeArguments:i})}if(!hr(t.address))throw new Me("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:t.address});if(s.error!=null)throw new Me(`pre swap with multi pools error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const o=(l=s.events)==null?void 0:l.filter(u=>pe(u.type).name==="CalculatedSwapResultEvent");if(o.length===0)return null;if(o.length!==n.poolAddresses.length)throw new Me("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=n.byAmountIn?We:_u,c=0;for(let u=0;u<o.length;u+=1)if(!o[u].parsedJson.data.is_exceed)if(n.byAmountIn){const d=new B(o[u].parsedJson.data.amount_out);d.gt(a)&&(c=u,a=d)}else{const d=new B(o[u].parsedJson.data.amount_out);d.lt(a)&&(c=u,a=d)}return this.transformSwapWithMultiPoolData({poolAddress:n.poolAddresses[c],a2b:n.a2b,byAmountIn:n.byAmountIn,amount:n.amount,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB},o[c].parsedJson)}async preswap(n){var c;const{integrate:e,simulationAccount:t}=this.sdk.sdkOptions,r=new fe,i=[n.coinTypeA,n.coinTypeB],s=[r.object(n.pool.poolAddress),r.pure.bool(n.a2b),r.pure.bool(n.byAmountIn),r.pure.u64(n.amount)];if(r.moveCall({target:`${e.published_at}::${cs}::calculate_swap_result`,arguments:s,typeArguments:i}),!hr(t.address))throw new Me("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:t.address});if(o.error!=null)throw new Me(`preswap error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=o.events)==null?void 0:c.filter(l=>pe(l.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(n,a[0].parsedJson.data)}transformSwapData(n,e){const t=e.amount_in&&e.fee_amount?new B(e.amount_in).add(new B(e.fee_amount)).toString():"";return{poolAddress:n.pool.poolAddress,currentSqrtPrice:n.currentSqrtPrice,estimatedAmountIn:t,estimatedAmountOut:e.amount_out,estimatedEndSqrtPrice:e.after_sqrt_price,estimatedFeeAmount:e.fee_amount,isExceed:e.is_exceed,amount:n.amount,aToB:n.a2b,byAmountIn:n.byAmountIn}}transformSwapWithMultiPoolData(n,e){const{data:t}=e;console.log("json data. ",t);const r=t.amount_in&&t.fee_amount?new B(t.amount_in).add(new B(t.fee_amount)).toString():"";return{poolAddress:n.poolAddress,estimatedAmountIn:r,estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedStartSqrtPrice:t.step_results[0].current_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:n.amount,aToB:n.a2b,byAmountIn:n.byAmountIn}}calculateRates(n){const{currentPool:e}=n,t=zq(e);let r;n.a2b?r=n.swapTicks.sort((d,h)=>h.index-d.index):r=n.swapTicks.sort((d,h)=>d.index-h.index);const i=lz(n.a2b,n.byAmountIn,n.amount,t,r);let s=!1;n.byAmountIn?s=i.amountIn.lt(n.amount):s=i.amountOut.lt(n.amount);const o=ro.getDefaultSqrtPriceLimit(n.a2b);n.a2b&&i.nextSqrtPrice.lt(o)&&(s=!0),!n.a2b&&i.nextSqrtPrice.gt(o)&&(s=!0);let a=0;i.crossTickNum>6&&i.crossTickNum<40&&(a=22e3*(i.crossTickNum-6)),i.crossTickNum>40&&(s=!0);const c=Ue.sqrtPriceX64ToPrice(t.currentSqrtPrice,n.decimalsA,n.decimalsB).toNumber(),l=Ue.sqrtPriceX64ToPrice(i.nextSqrtPrice,n.decimalsA,n.decimalsB).toNumber(),u=Math.abs(c-l)/c*100;return{estimatedAmountIn:i.amountIn,estimatedAmountOut:i.amountOut,estimatedEndSqrtPrice:i.nextSqrtPrice,estimatedFeeAmount:i.feeAmount,isExceed:s,extraComputeLimit:a,amount:n.amount,aToB:n.a2b,byAmountIn:n.byAmountIn,priceImpactPct:u}}async createSwapTransactionPayload(n,e){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(e){const{isAdjustCoinA:r,isAdjustCoinB:i}=Bp(n);if(n.a2b&&r||!n.a2b&&i)return await $e.buildSwapTransactionForGas(this._sdk,n,t,e)}return $e.buildSwapTransaction(this.sdk,n,t)}async createSwapTransactionWithoutTransferCoinsPayload(n,e){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(e){const{isAdjustCoinA:r,isAdjustCoinB:i}=Bp(n);if(n.a2b&&r||!n.a2b&&i)return await $e.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,n,t,e)}return $e.buildSwapTransactionWithoutTransferCoins(this.sdk,n,t)}},jz=class{constructor(n){v(this,"_sdk");v(this,"_cache",{});this._sdk=n}get sdk(){return this._sdk}async getAllRegisteredTokenList(n=!1){return await this.factchTokenList("",n)}async getOwnerTokenList(n="",e=!1){return await this.factchTokenList(n,e)}async getAllRegisteredPoolList(n=!1){return await this.factchPoolList("",n)}async getOwnerPoolList(n="",e=!1){return await this.factchPoolList(n,e)}async getWarpPoolList(n=!1){return await this.factchWarpPoolList("","",n)}async getOwnerWarpPoolList(n="",e="",t=!1){return await this.factchWarpPoolList(n,e,t)}async getTokenListByCoinTypes(n){const e={},t="getAllRegisteredTokenList",r=this.getCache(t);if(r!==void 0){const s=r;for(const o of n)for(const a of s)if(On(o)===On(a.address)){e[o]=a;continue}}const i=n.filter(s=>e[s]===void 0);for(const s of i){const o=`${s}_metadata`,a=this.getCache(o);if(a!==void 0)e[s]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:s});if(c){const l={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:s};e[s]=l,this.updateCache(o,l,De)}}}return e}async factchTokenList(n="",e=!1){var d;const{simulationAccount:t,token:r}=this.sdk.sdkOptions,i="getAllRegisteredTokenList",s=this.getCache(i,e);if(s!==void 0)return s;const o=n.length>0,a=512;let c=0,l=[];if(r===void 0)throw Error("please config token ofsdkOptions");const u=J(r);for(;;){const h=new fe;h.moveCall({target:`${r.published_at}::coin_list::${o?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:o?[h.pure.address(u.coin_registry_id),h.pure.address(n),h.pure.u64(c),h.pure.u64(a)]:[h.pure.address(u.coin_registry_id),h.pure.u64(c),h.pure.u64(a)]});const f=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:h,sender:t.address}),m=[];if((d=f.events)==null||d.forEach(w=>{pe(w.type).full_address===`${r.published_at}::coin_list::FetchCoinListEvent`&&w.parsedJson.full_list.value_list.forEach(C=>{m.push(this.transformData(C,!1))})}),l=[...l,...m],m.length<a)break;c=l.length}return l}async factchPoolList(n="",e=!1){var d;const{simulationAccount:t,token:r}=this.sdk.sdkOptions,i="getAllRegisteredPoolList",s=this.getCache(i,e);if(s!==void 0)return s;let o=[];const a=512;let c=0;const l=n.length>0;if(r===void 0)throw Error("please config token ofsdkOptions");const u=J(r);for(;;){const h=new fe;if(h.moveCall({target:`${r.published_at}::lp_list::${l?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:l?[h.pure.address(u.pool_registry_id),h.pure.address(n),h.pure.u64(c),h.pure.u64(a)]:[h.pure.address(u.pool_registry_id),h.pure.u64(c),h.pure.u64(a)]}),!hr(t.address))throw new Me("this config simulationAccount is not set right","InvalidSimulateAccount");const f=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:h,sender:t.address}),m=[];if((d=f.events)==null||d.forEach(w=>{pe(w.type).full_address===`${r.published_at}::lp_list::FetchPoolListEvent`&&w.parsedJson.full_list.value_list.forEach(C=>{m.push(this.transformData(C,!0))})}),o=[...o,...m],m.length<a)break;c=o.length}return o}async factchWarpPoolList(n="",e="",t=!1){const r=await this.factchPoolList(n,t);if(r.length===0)return[];const i=await this.factchTokenList(e,t),s=[];for(const o of r){for(const a of i)a.address===o.coin_a_address&&(o.coinA=a),a.address===o.coin_b_address&&(o.coinB=a);s.push(o)}return s}async getTokenConfigEvent(n=!1){const e=this._sdk.sdkOptions.token.package_id,t=`${e}_getTokenConfigEvent`,r=this.getCache(t,n);if(r!==void 0)return r;const i=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),s=sh(i),o=await this._sdk.fullClient.queryEventsByPage({Transaction:s}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return o.data.length>0&&o.data.forEach(c=>{const l=pe(c.type);if(c.transactionModule==="coin_list")switch(l.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(l.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(t,a,De),a}transformData(n,e){const t={...n};if(e)try{t.coin_a_address=pe(t.coin_a_address).full_address,t.coin_b_address=pe(t.coin_b_address).full_address}catch{}else t.address=pe(t.address).full_address;if(n.extensions){const r=n.extensions.contents;for(const i of r){const{key:s}=i;let{value:o}=i;if(s==="labels")try{o=JSON.parse(decodeURIComponent(Jh.decode(o)))}catch{}s==="pyth_id"&&(o=Bn(o)),t[s]=o}delete t.extensions}return t}updateCache(n,e,t=Bi){let r=this._cache[n];r?(r.overdueTime=Mt(t),r.value=e):r=new Er(e,Mt(t)),this._cache[n]=r}getCache(n,e=!1){const t=this._cache[n],r=t==null?void 0:t.isValid();if(!e&&r)return t.value;r||delete this._cache[n]}},Dz=class{constructor(n){v(this,"_sdk");this._sdk=n}get sdk(){return this._sdk}calculatePrice(n,e,t,r,i){const s=r?e:t,o=r?t:e;return i==="Cetus"?Ue.sqrtPriceX64ToPrice(n,s,o):new ue(n.toString()).div(new ue(10).pow(new ue(o+9-s)))}parseJsonResult(n){return{isExceed:n.is_exceed,isTimeout:n.is_timeout,inputAmount:n.input_amount,outputAmount:n.output_amount,fromCoin:n.from_coin,toCoin:n.to_coin,byAmountIn:n.by_amount_in,splitPaths:n.split_paths.map(t=>({pathIndex:t.path_index,lastQuoteOutput:t.last_quote_output,percent:t.percent,basePaths:t.best_path.map(i=>({direction:i.direction,label:i.label,poolAddress:i.provider,fromCoin:i.from_coin,toCoin:i.to_coin,outputAmount:i.output_amount,inputAmount:i.input_amount,feeRate:i.fee_rate,currentSqrtPrice:new B(i.current_sqrt_price.toString()),afterSqrtPrice:i.label==="Cetus"?new B(i.after_sqrt_price.toString()):We,fromDecimal:i.from_decimal,toDecimal:i.to_decimal,currentPrice:this.calculatePrice(new B(i.current_sqrt_price.toString()),i.from_decimal,i.to_decimal,i.direction,i.label)})),inputAmount:t.input_amount,outputAmount:t.output_amount}))}}async fetchDataWithAxios(n,e,t){try{const r={...e,timeout:t},i=await Do(n,r);return i.status===200?this.parseJsonResult(i.data):null}catch(r){return console.error(r),null}}async getBestRouter(n,e,t,r,i,s,o,a,c=!1,l=!1,u=[]){let d=null,h="v2",f={},m=this.sdk.sdkOptions.aggregatorUrl;if(u.length>0){const w=new URL(m);m=`${w.protocol}//${w.hostname}/router_with_lp_changes`,f={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:n,to:e,amount:t,by_amount_in:r,order_split:c,external_router:l,sender_address:"None",request_id:encodeURIComponent(Dh()),lp_changes:u})}}else m=`
      ${m}?from=${encodeURIComponent(n)}&to=${encodeURIComponent(e)}&amount=${encodeURIComponent(t)}&by_amount_in=${encodeURIComponent(r)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(l)}&sender_address=''&request_id=${encodeURIComponent(Dh())}
      `;if(d=await this.fetchDataWithAxios(m,f,6e3),d==null){const w=await this.sdk.Router.priceUseV1(n,e,new B(t),r,i,s,a),y=[];for(const A of w.paths){const M=[];if(A.poolAddress.length>1){const G=this.sdk.Router.tokenInfo(A.coinType[0]).decimals,q=this.sdk.Router.tokenInfo(A.coinType[1]).decimals,X=A.a2b[0]?Ue.sqrtPriceX64ToPrice(new B(w.currentSqrtPrice[0]),G,q):Ue.sqrtPriceX64ToPrice(new B(w.currentSqrtPrice[0]),q,G),E={direction:A.a2b[0],label:"Cetus",poolAddress:A.poolAddress[0],fromCoin:A.coinType[0],toCoin:A.coinType[1],feeRate:this.sdk.Router.getFeeRate(A.coinType[0],A.coinType[1],A.poolAddress[0]),outputAmount:w.byAmountIn?A.rawAmountLimit[0].toString():A.rawAmountLimit[1].toString(),inputAmount:A.amountIn.toString(),currentSqrtPrice:w.currentSqrtPrice[0],currentPrice:X,fromDecimal:G,toDecimal:q},j=this.sdk.Router.tokenInfo(A.coinType[1]).decimals,R=this.sdk.Router.tokenInfo(A.coinType[2]).decimals,V=A.a2b[1]?Ue.sqrtPriceX64ToPrice(new B(w.currentSqrtPrice[1]),j,R):Ue.sqrtPriceX64ToPrice(new B(w.currentSqrtPrice[1]),R,j),U={direction:A.a2b[1],label:"Cetus",poolAddress:A.poolAddress[1],fromCoin:A.coinType[1],toCoin:A.coinType[2],feeRate:this.sdk.Router.getFeeRate(A.coinType[1],A.coinType[2],A.poolAddress[1]),outputAmount:A.amountOut.toString(),inputAmount:w.byAmountIn?A.rawAmountLimit[0].toString():A.rawAmountLimit[1].toString(),currentSqrtPrice:w.currentSqrtPrice[1],currentPrice:V,fromDecimal:j,toDecimal:R};M.push(E,U)}else{const G=this.sdk.Router.tokenInfo(A.coinType[0]).decimals,q=this.sdk.Router.tokenInfo(A.coinType[1]).decimals,X=A.a2b[0]?Ue.sqrtPriceX64ToPrice(new B(w.currentSqrtPrice[0]),G,q):Ue.sqrtPriceX64ToPrice(new B(w.currentSqrtPrice[0]),q,G),E={direction:A.a2b[0],label:"Cetus",poolAddress:A.poolAddress[0],fromCoin:A.coinType[0],toCoin:A.coinType[1],feeRate:this.sdk.Router.getFeeRate(A.coinType[0],A.coinType[1],A.poolAddress[0]),outputAmount:A.amountOut.toString(),inputAmount:A.amountIn.toString(),currentSqrtPrice:w.currentSqrtPrice[0],currentPrice:X,fromDecimal:G,toDecimal:q};M.push(E)}const H={percent:Number(A.amountIn)/Number(w.amountIn)*100,inputAmount:Number(A.amountIn.toString()),outputAmount:Number(A.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:M};y.push(H)}const C={isExceed:w.isExceed,isTimeout:!0,inputAmount:Number(w.amountIn.toString()),outputAmount:Number(w.amountOut.toString()),fromCoin:w.coinTypeA,toCoin:w.coinTypeC!=null?w.coinTypeC:w.coinTypeB,byAmountIn:w.byAmountIn,splitPaths:y};h="v1",d=C}return{result:d,version:h}}async getBestRouterByServer(n,e,t,r,i,s=!1,o=!1,a=[]){let c=null,l={},u=this.sdk.sdkOptions.aggregatorUrl;if(a.length>0){const d=new URL(u);u=`${d.protocol}//${d.hostname}/router_with_lp_changes`,l={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:n,to:e,amount:t,by_amount_in:r,order_split:s,external_router:o,sender_address:"None",request_id:encodeURIComponent(Dh()),lp_changes:a})}}else u=`
      ${u}?from=${encodeURIComponent(n)}&to=${encodeURIComponent(e)}&amount=${encodeURIComponent(t)}&by_amount_in=${encodeURIComponent(r)}&order_split=${encodeURIComponent(s)}&external_router=${encodeURIComponent(o)}&sender_address=''&request_id=${encodeURIComponent(Dh())}
      `;if(c=await this.fetchDataWithAxios(u,l,6e3),c==null)throw new Me("Invalid server response","InvalidServerResponse");return c}async getBestRouterByRpc(n,e,t,r,i,s,o){const a=await this.sdk.Router.priceUseV1(n,e,new B(t),r,i,s,o),c=[];for(const u of a.paths){const d=[];if(u.poolAddress.length>1){const f=this.sdk.Router.tokenInfo(u.coinType[0]).decimals,m=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,w=u.a2b[0]?Ue.sqrtPriceX64ToPrice(new B(a.currentSqrtPrice[0]),f,m):Ue.sqrtPriceX64ToPrice(new B(a.currentSqrtPrice[0]),m,f),y={direction:u.a2b[0],label:"Cetus",poolAddress:u.poolAddress[0],fromCoin:u.coinType[0],toCoin:u.coinType[1],feeRate:this.sdk.Router.getFeeRate(u.coinType[0],u.coinType[1],u.poolAddress[0]),outputAmount:a.byAmountIn?u.rawAmountLimit[0].toString():u.rawAmountLimit[1].toString(),inputAmount:u.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:w,fromDecimal:f,toDecimal:m},C=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,A=this.sdk.Router.tokenInfo(u.coinType[2]).decimals,M=u.a2b[1]?Ue.sqrtPriceX64ToPrice(new B(a.currentSqrtPrice[1]),C,A):Ue.sqrtPriceX64ToPrice(new B(a.currentSqrtPrice[1]),A,C),H={direction:u.a2b[1],label:"Cetus",poolAddress:u.poolAddress[1],fromCoin:u.coinType[1],toCoin:u.coinType[2],feeRate:this.sdk.Router.getFeeRate(u.coinType[1],u.coinType[2],u.poolAddress[1]),outputAmount:u.amountOut.toString(),inputAmount:a.byAmountIn?u.rawAmountLimit[0].toString():u.rawAmountLimit[1].toString(),currentSqrtPrice:a.currentSqrtPrice[1],currentPrice:M,fromDecimal:C,toDecimal:A};d.push(y,H)}else{const f=this.sdk.Router.tokenInfo(u.coinType[0]).decimals,m=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,w=u.a2b[0]?Ue.sqrtPriceX64ToPrice(new B(a.currentSqrtPrice[0]),f,m):Ue.sqrtPriceX64ToPrice(new B(a.currentSqrtPrice[0]),m,f),y={direction:u.a2b[0],label:"Cetus",poolAddress:u.poolAddress[0],fromCoin:u.coinType[0],toCoin:u.coinType[1],feeRate:this.sdk.Router.getFeeRate(u.coinType[0],u.coinType[1],u.poolAddress[0]),outputAmount:u.amountOut.toString(),inputAmount:u.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:w,fromDecimal:f,toDecimal:m};d.push(y)}const h={percent:Number(u.amountIn)/Number(a.amountIn)*100,inputAmount:Number(u.amountIn.toString()),outputAmount:Number(u.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:d};c.push(h)}return{isExceed:a.isExceed,isTimeout:!0,inputAmount:Number(a.amountIn.toString()),outputAmount:Number(a.amountOut.toString()),fromCoin:a.coinTypeA,toCoin:a.coinTypeC!=null?a.coinTypeC:a.coinTypeB,byAmountIn:a.byAmountIn,splitPaths:c}}},Bz=class{constructor(n){v(this,"_sdk");v(this,"_cache",{});this._sdk=n}get sdk(){return this._sdk}setTokenListCache(n){const{coin_list_handle:e}=J(this.sdk.sdkOptions.cetus_config),t=`${e}_getCoinConfigs`,r=this.getCache(t),i=r?[...r,...n]:n;this.updateCache(t,i,De)}async getTokenListByCoinTypes(n){const e={},{coin_list_handle:t}=J(this.sdk.sdkOptions.cetus_config),r=`${t}_getCoinConfigs`,i=this.getCache(r);if(i!==void 0){const o=i;for(const a of n)for(const c of o)if(On(a)===On(c.address)){e[a]=c;continue}}const s=n.filter(o=>e[o]===void 0);for(const o of s){const a=`${o}_metadata`,c=this.getCache(a);if(c!==void 0)e[o]=c;else{const l=await this._sdk.fullClient.getCoinMetadata({coinType:o});if(l){const u={id:l.id,pyth_id:"",name:l.name,symbol:l.symbol,official_symbol:l.symbol,coingecko_id:"",decimals:l.decimals,project_url:"",logo_url:l.iconUrl,address:o};e[o]=u,this.updateCache(a,u,De)}else console.log(`not found ${o}`)}}return e}async getCoinConfigs(n=!1,e=!0){const{coin_list_handle:t}=J(this.sdk.sdkOptions.cetus_config),r=`${t}_getCoinConfigs`,i=this.getCache(r,n);if(i)return i;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(t)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(l=>{var d,h;if(l.error!=null||((h=(d=l.data)==null?void 0:d.content)==null?void 0:h.dataType)!=="moveObject")throw new Me(`when getCoinConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildCoinConfig(l,e);this.updateCache(`${t}_${u.address}_getCoinConfig`,u,De),c.push({...u})}),this.updateCache(r,c,De),c}async getCoinConfig(n,e=!1,t=!0){var c,l;const{coin_list_handle:r}=J(this.sdk.sdkOptions.cetus_config),i=`${r}_${n}_getCoinConfig`,s=this.getCache(i,e);if(s)return s;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:r,name:{type:"0x1::type_name::TypeName",value:{name:pz(n)}}});if(o.error!=null||((l=(c=o.data)==null?void 0:c.content)==null?void 0:l.dataType)!=="moveObject")throw new Me(`when getCoinConfig get object error: ${o.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(o,t);return this.updateCache(i,a,De),a}buildCoinConfig(n,e=!0){let t=et(n);t=t.value.fields;const r={...t};return r.id=Rs(n),r.address=pe(t.coin_type.fields.name).full_address,t.pyth_id&&(r.pyth_id=Bn(t.pyth_id)),this.transformExtensions(r,t.extension_fields.fields.contents,e),delete r.coin_type,r}async getClmmPoolConfigs(n=!1,e=!0){const{clmm_pools_handle:t}=J(this.sdk.sdkOptions.cetus_config),r=`${t}_getClmmPoolConfigs`,i=this.getCache(r,n);if(i)return i;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(t)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(l=>{var d,h;if(l.error!=null||((h=(d=l.data)==null?void 0:d.content)==null?void 0:h.dataType)!=="moveObject")throw new Me(`when getClmmPoolsConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildClmmPoolConfig(l,e);this.updateCache(`${u.pool_address}_getClmmPoolConfig`,u,De),c.push({...u})}),this.updateCache(r,c,De),c}async getClmmPoolConfig(n,e=!1,t=!0){const{clmm_pools_handle:r}=J(this.sdk.sdkOptions.cetus_config),i=`${n}_getClmmPoolConfig`,s=this.getCache(i,e);if(s)return s;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:r,name:{type:"address",value:n}}),a=this.buildClmmPoolConfig(o,t);return this.updateCache(i,a,De),a}buildClmmPoolConfig(n,e=!0){let t=et(n);t=t.value.fields;const r={...t};return r.id=Rs(n),r.pool_address=Bn(t.pool_address),this.transformExtensions(r,t.extension_fields.fields.contents,e),r}async getLaunchpadPoolConfigs(n=!1,e=!0){const{launchpad_pools_handle:t}=J(this.sdk.sdkOptions.cetus_config),r=`${t}_getLaunchpadPoolConfigs`,i=this.getCache(r,n);if(i)return i;const o=(await this._sdk.fullClient.getDynamicFieldsByPage(t)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0}),c=[];return a.forEach(l=>{var d,h;if(l.error!=null||((h=(d=l.data)==null?void 0:d.content)==null?void 0:h.dataType)!=="moveObject")throw new Me(`when getCoinConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildLaunchpadPoolConfig(l,e);this.updateCache(`${u.pool_address}_getLaunchpadPoolConfig`,u,De),c.push({...u})}),this.updateCache(r,c,De),c}async getLaunchpadPoolConfig(n,e=!1,t=!0){const{launchpad_pools_handle:r}=J(this.sdk.sdkOptions.cetus_config),i=`${n}_getLaunchpadPoolConfig`,s=this.getCache(i,e);if(s)return s;const o=await this._sdk.fullClient.getDynamicFieldObject({parentId:r,name:{type:"address",value:n}}),a=this.buildLaunchpadPoolConfig(o,t);return this.updateCache(i,a,De),a}buildLaunchpadPoolConfig(n,e=!0){let t=et(n);t=t.value.fields;const r={...t};r.id=Rs(n),r.pool_address=Bn(t.pool_address),this.transformExtensions(r,t.extension_fields.fields.contents,e);const i=[];t.social_media.fields.contents.forEach(s=>{i.push({name:s.fields.value.fields.name,link:s.fields.value.fields.link})}),r.social_media=i;try{r.regulation=decodeURIComponent(Jh.decode(r.regulation).replace(/%/g,"%25"))}catch{r.regulation=Jh.decode(r.regulation)}return r}transformExtensions(n,e,t=!0){const r=[];for(const i of e){const{key:s}=i.fields;let{value:o}=i.fields;if(s==="labels")try{const a=decodeURIComponent(Jh.decode(o));try{o=JSON.parse(a)}catch{o=a}}catch{}t&&(n[s]=o),r.push({key:s,value:o})}delete n.extension_fields,t||(n.extensions=r)}async getCetusConfig(n=!1){const e=this._sdk.sdkOptions.cetus_config.package_id,t=`${e}_getCetusConfig`,r=this.getCache(t,n);if(r!==void 0)return r;const i=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),s=sh(i),o=await this._sdk.fullClient.queryEventsByPage({Transaction:s});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(o.data.length>0)for(const c of o.data)switch(pe(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(t,a,De),a}async getCetusConfigHandle(n){const e=[n.clmm_pools_id,n.coin_list_id,n.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:e,options:{showContent:!0}})).forEach(r=>{var o,a;if(r.error!=null||((a=(o=r.data)==null?void 0:o.content)==null?void 0:a.dataType)!=="moveObject")throw new Me(`when getCetusConfigHandle get objects error: ${r.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const i=et(r),s=vu(r);switch(pe(s).name){case"ClmmPools":n.clmm_pools_handle=i.pools.fields.id.id;break;case"CoinList":n.coin_list_handle=i.coins.fields.id.id;break;case"LaunchpadPools":n.launchpad_pools_handle=i.pools.fields.id.id;break}}),n}updateCache(n,e,t=Bi){let r=this._cache[n];r?(r.overdueTime=Mt(t),r.value=e):r=new Er(e,Mt(t)),this._cache[n]=r}getCache(n,e=!1){try{const t=this._cache[n];if(!t)return;if(e||!t.isValid()){delete this._cache[n];return}return t.value}catch(t){console.error(`Error accessing cache for key ${n}:`,t);return}}},Rz=class extends Xf{async queryEventsByPage(n,e="all"){let t=[],r=!0;const i=e==="all";let s=i?null:e.cursor;do{const o=await this.queryEvents({query:n,cursor:s,limit:i?null:e.limit});o.data?(t=[...t,...o.data],r=o.hasNextPage,s=o.nextCursor):r=!1}while(i&&r);return{data:t,nextCursor:s,hasNextPage:r}}async getOwnedObjectsByPage(n,e,t="all"){let r=[],i=!0;const s=t==="all";let o=s?null:t.cursor;do{const a=await this.getOwnedObjects({owner:n,...e,cursor:o,limit:s?null:t.limit});a.data?(r=[...r,...a.data],i=a.hasNextPage,o=a.nextCursor):i=!1}while(s&&i);return{data:r,nextCursor:o,hasNextPage:i}}async getDynamicFieldsByPage(n,e="all"){let t=[],r=!0;const i=e==="all";let s=i?null:e.cursor;do{const o=await this.getDynamicFields({parentId:n,cursor:s,limit:i?null:e.limit});o.data?(t=[...t,...o.data],r=o.hasNextPage,s=o.nextCursor):r=!1}while(i&&r);return{data:t,nextCursor:s,hasNextPage:r}}async batchGetObjects(n,e,t=50){let r=[];try{for(let i=0;i<Math.ceil(n.length/t);i++){const s=await this.multiGetObjects({ids:n.slice(i*t,t*(i+1)),options:e});r=[...r,...s]}}catch(i){console.log(i)}return r}async calculationTxGas(n){const{sender:e}=n.blockData;if(e===void 0)throw Error("sdk sender is empty");const t=await this.devInspectTransactionBlock({transactionBlock:n,sender:e}),{gasUsed:r}=t.effects;return Number(r.computationCost)+Number(r.storageCost)-Number(r.storageRebate)}async sendTransaction(n,e){try{return await this.signAndExecuteTransaction({transaction:e,signer:n,options:{showEffects:!0,showEvents:!0}})}catch(t){console.log("error: ",t)}}async sendSimulationTransaction(n,e,t=!0){try{if(t)return await this.devInspectTransactionBlock({transactionBlock:n,sender:e})}catch(r){console.log("devInspectTransactionBlock error",r)}}},Pz=class{constructor(n){v(this,"_cache",{});v(this,"_rpcModule");v(this,"_pool");v(this,"_position");v(this,"_swap");v(this,"_rewarder");v(this,"_router");v(this,"_router_v2");v(this,"_token");v(this,"_config");v(this,"_sdkOptions");v(this,"_senderAddress","");this._sdkOptions=n,this._rpcModule=new Rz({url:n.fullRpcUrl}),this._swap=new Nz(this),this._pool=new xz(this),this._position=new Ez(this),this._rewarder=new Mz(this),this._router=new Oz(this),this._router_v2=new Dz(this),this._token=new jz(this),this._config=new Bz(this),eb(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(n){this._senderAddress=n}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(n,e,t=!0){const r=[];let i=null;const s=`${this.sdkOptions.fullRpcUrl}_${n}_${e}_getOwnerCoinAssets`,o=this.getCache(s,t);if(o)return o;for(;;){const a=await(e?this.fullClient.getCoins({owner:n,coinType:e,cursor:i}):this.fullClient.getAllCoins({owner:n,cursor:i}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&r.push({coinAddress:pe(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),i=a.nextCursor,!a.hasNextPage)break}return this.updateCache(s,r,30*1e3),r}async getOwnerCoinBalances(n,e){let t=[];return e?t=[await this.fullClient.getBalance({owner:n,coinType:e})]:t=[...await this.fullClient.getAllBalances({owner:n})],t}updateCache(n,e,t=De){let r=this._cache[n];r?(r.overdueTime=Mt(t),r.value=e):r=new Er(e,Mt(t)),this._cache[n]=r}getCache(n,e=!1){const t=this._cache[n],r=t==null?void 0:t.isValid();if(!e&&r)return t.value;r||delete this._cache[n]}},Rg="router",Ul=1e4,la=class{static buildPoolImmutables(e){let{fields:t}=e.value.fields.value;return{clmm_pool_id:pe(t.clmm_pool_id).address,booster_type:pe(t.booster_type.fields.name).source_address,pool_id:pe(t.pool_id).address,coinTypeA:pe(t.coin_type_a.fields.name).source_address,coinTypeB:pe(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){let t=et(e),r=[];return t.config.fields.contents.forEach(i=>{r.push({lock_day:Number(i.fields.key),multiplier:Number(Q(i.fields.value).div(Ul))})}),{basic_percent:Number(Q(t.basic_percent).div(Ul)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:r,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:Rs(e)}}static buildLockNFT(e){let t=pe(Rs(e)).address;return{lock_clmm_position:Yl(e),locked_nft_id:t}}static buildLockPositionInfo(e){let t=et(e),{value:r}=t.value.fields;return{type:r.type,position_id:r.fields.position_id,start_time:Number(r.fields.start_time),lock_period:Number(r.fields.lock_period),end_time:Number(r.fields.end_time),growth_rewarder:r.fields.growth_rewarder,rewarder_owned:r.fields.rewarder_owned,is_settled:r.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},Uz=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;let{booster:t}=this._sdk.sdkOptions,r=`${t.package_id}_getPoolImmutables`,i=this.getCache(r,e),s=[];if(i!==void 0)s.push(...i);else{let a=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(J(t).booster_pool_handle)).data)==null||o.forEach(l=>{a.push(l.objectId)});let c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(a,{showContent:!0});for(let l of c){let u=et(l);if(u){let d=la.buildPoolImmutables(u);this.updateCache(`${d.pool_id}_getPoolImmutable`,d,De),s.push(d)}}}return this.updateCache(r,s,De),s}async getPoolImmutable(e){let{booster:t}=this._sdk.sdkOptions,r=`${e}_getPoolImmutable`,i=this.getCache(r);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:J(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=et(s),a=la.buildPoolImmutables(o);return this.updateCache(r,a,De),a}async getPools(){let e=[],t=(await this.getPoolImmutables()).map(i=>i.pool_id),r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(t,{showType:!0,showContent:!0});for(let i of r){let s=la.buildPoolState(i);if(s){let o={...await this.getPoolImmutable(s.pool_id),...s};e.push(o);let a=`${o.pool_id}_getPoolObject`;this.updateCache(a,o,De)}}return e}async getPool(e,t=!0){let r=`${e}_getPoolObject`,i=this.getCache(r,t),s=await this.getPoolImmutable(e);if(i!==void 0)return{...s,...i};let o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),a=la.buildPoolState(o),c={...s,...a};return this.updateCache(r,c,De),c}async getPoolHandleId(e){let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),r=et(t);return r?r.list.fields.id.id:""}async getBoosterInitConfigs(){var i;let{package_id:e}=this.sdk.sdkOptions.booster,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,r={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(s=>{let o=s.parsedJson;o&&(r.booster_config_id=o.config_id)}),r.booster_pool_handle=await this.getPoolHandleId(r.booster_config_id),r}async getOwnerBoosterPositions(e,t,r){let{booster:i}=this.sdk.sdkOptions,s=[],o=[],a=`${i.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,c=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:a}});for(let u of c.data)if(pe(Ls(u)).source_address===a&&u.data){let d=la.buildLockNFT(u);this.updateCache(`${d.locked_nft_id}_getBoosterPositionById`,d,De),d&&(t===void 0||t===d.lock_clmm_position.pool)&&s.push(d)}let l=await this.getLockPositionInfos(r,s.map(u=>u.locked_nft_id));for(let u of s)for(let d of l)if(u.lock_clmm_position.pos_object_id===d.position_id){o.push({...u,...d});break}return o}async getBoosterPosition(e,t){let r=`${t}_getBoosterPositionById`,i=this.getCache(r),s;if(i!==void 0)s=i;else{let a=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});s=la.buildLockNFT(a),this.updateCache(r,s,De)}let o=await this.getLockPositionInfo(e,t);return{...s,...o}}async getLockPositionInfos(e,t=[]){var o;let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),i=[],s=[];return(o=r.data)==null||o.forEach(a=>{t.length>0?t.includes(a.name.value)&&i.push(a.objectId):i.push(a.objectId)}),i.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showContent:!0})).forEach(a=>{let c=la.buildLockPositionInfo(a);c&&s.push(c)}),s}async getLockPositionInfo(e,t){let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return la.buildLockPositionInfo(r)}calculateXCetusRewarder(e,t,r){let i=t.basic_percent,s="0";e.forEach(a=>{a.coin_address===t.booster_type&&(s=a.amount_owed.toString())}),r.is_settled||t.config.forEach(a=>{a.lock_day===r.lock_period&&(i=a.multiplier)});let o=Q(s).sub(r.growth_rewarder).mul(i);return Q(r.rewarder_owned).add(o).toString()}lockPositionPayload(e){let{booster:t}=this.sdk.sdkOptions,{clmm_pool:r}=this.sdk.ClmmSDK.sdkOptions,i=new fe;return i.moveCall({target:`${t.published_at}::${Rg}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[i.object(J(t).booster_config_id),i.object(J(r).global_config_id),i.object(e.booster_pool_id),i.object(e.clmm_pool_id),i.object(e.clmm_position_id),i.pure.u16(e.lock_day),i.object(ke)]}),i}canceLockPositionPayload(e){let{booster:t}=this.sdk.sdkOptions,r=new fe;return r.moveCall({target:`${t.published_at}::${Rg}::cancel_lock`,typeArguments:[e.booster_type],arguments:[r.object(J(t).booster_config_id),r.object(e.booster_pool_id),r.object(e.lock_nft_id),r.object(ke)]}),r}redeemPayload(e){let{booster:t,xcetus:r}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,s=new fe,o=J(r);return s.moveCall({target:`${t.published_at}::${Rg}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[s.object(J(t).booster_config_id),s.object(J(i).global_config_id),s.object(e.booster_pool_id),s.object(e.lock_nft_id),s.object(e.clmm_pool_id),s.object(o.lock_manager_id),s.object(o.xcetus_manager_id),s.object(e.ve_nft_id),s.object(ke)]}),s}updateCache(e,t,r=Bi){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e];if(!t&&(r!=null&&r.isValid()))return r.value;delete this._cache[e]}},si="router",dA=1e9,Fz=(n=>(n.Upcoming="Upcoming",n.Live="Live",n.Settle="Settle",n.Ended="Ended",n.Failed="Failed",n.Canceled="Canceled",n))(Fz||{}),io=class{static priceRealToFix(n,e,t){let r=Q(e-t).toNumber();return Number(Q(n).div(Q(10).pow(Q(r))).toString())}static priceFixToReal(n,e,t){let r=Q(e-t).toNumber();return Number(Q(n).mul(Q(10).pow(Q(r))).toString())}static raiseTotalAmount(n,e,t){let r=Q(e-t).abs().toNumber();return e>t?Number(Q(n.total_supply).mul(n.current_price).div(Q(10).pow(Q(r))).toString()):Number(Q(n.total_supply).mul(n.current_price).mul(Q(10).pow(Q(r))).toString())}static buildLaunchPadPool(n){let e=Ls(n),t=pe(e),r=et(n),i={coin_type_sale:t.type_arguments[0],coin_type_raise:t.type_arguments[1],pool_address:Bn(Rs(n)),is_settle:r.is_settle,current_price:Q(r.initialize_price).div(Q(dA)).toString(),price:r.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:r.sale_coin,raise_coin_amount:r.raise_coin,total_purchase_amount:r.reality_raise_total,total_supply:r.sale_total,min_purchase:r.min_purchase,max_purchase:r.max_purchase,complete_raise_limit:r.least_raise_amount,softcap:r.softcap,max_raise_amount:r.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(r.liquidity_rate)/1e4,is_cancel:r.is_cancel,duration_summary:{start_time:Number(r.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(r.duration_manager.fields.activity_duration),settle_duration:Number(r.duration_manager.fields.settle_duration),lock_up_duration:Number(r.duration_manager.fields.locked_duration)},white_summary:{white_handle:r.white_list.fields.users.fields.id.id,protection_hard_cap:r.white_list.fields.hard_cap_total,protection_limit_used:r.white_list.fields.purchase_total,size:Number(r.white_list.fields.users.fields.size)},unused_sale:r.unused_sale,harvest_raise:r.harvest_raise,tick_spacing:Number(r.tick_spacing),owner:r.recipient,purchase_summary:{purchase_handle:r.purchase_list.fields.id.id,size:Number(r.purchase_list.fields.size)},pool_status:"Failed"};return io.updatePoolStatus(i),i}static updatePoolStatus(n){let e=Number(Q(Date.now()/1e3).toFixed(0)),{duration_summary:t}=n,r=t.start_time+t.purchase_duration,i=r+t.settle_duration;if(t.end_time=r,t.settle_end_time=i,n.is_settle)n.pool_status="Ended";else if(n.is_cancel)n.pool_status="Canceled";else if(e<t.start_time)n.pool_status="Upcoming";else if(e>t.start_time&&e<r)n.pool_status="Live";else if(e>r&&e<i){let s=n.raise_coin_amount;Number(s)<Number(n.complete_raise_limit)?n.pool_status="Failed":n.pool_status="Settle"}return n}static async calculatePoolPrice(n,e){let t=await n.ClmmSDK.CetusConfig.getTokenListByCoinTypes([e.coin_type_sale,e.coin_type_raise]),r=t[e.coin_type_sale].decimals,i=t[e.coin_type_raise].decimals;e.min_price=this.priceFixToReal(Number(Q(e.softcap).div(Q(e.total_supply))),r,i).toString(),e.max_price=this.priceFixToReal(Number(Q(e.max_raise_amount).div(Q(e.total_supply))),r,i).toString(),e.current_price=this.priceFixToReal(Number(e.current_price),r,i).toString(),e.sale_decimals=r,e.raise_decimals=i}static async getWithdrawRaise(n){return n.pool_status==="Ended"?n.harvest_raise:"0"}static async getWithdrawSale(n){return n.pool_status==="Ended"?n.unused_sale:n.sale_coin_amount}static async getHistoryWithdrawRaise(n,e){if(e.pool_status==="Ended"){if(Q(e.harvest_raise).equals(Q(0))){let r=await n.Launchpad.getSettleEvent(e.pool_address);r&&(e.harvest_raise=r.unused_raise)}let t=B.min(new B(e.total_purchase_amount),new B(e.max_raise_amount));return Q(t.toString()).mul(1-e.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(n,e){if(e.pool_status==="Ended"){let t=await n.Launchpad.getSettleEvent(e.pool_address);return t&&(e.unused_sale=t.unused_sale),e.unused_sale}return"0"}static async getOverrecruitReverseAmount(n,e){let t=await n.Launchpad.getPurchaseMarks(n.ClmmSDK.senderAddress,[e.pool_address],!1);if(t.length>0){let r=t[0].purchased_raise_amount,i=(await n.Launchpad.getPurchaseAmount(e.white_summary.white_handle,n.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:s}=e.white_summary;return Q(r).sub(i).div(Q(e.total_purchase_amount).sub(s)).mul(Q(e.total_purchase_amount).sub(e.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(n,e){let t=await io.getOverrecruitReverseAmount(n,e),r=await n.Launchpad.getPurchaseMarks(n.ClmmSDK.senderAddress,[e.pool_address],!1);if(r){let i=r[0].purchased_raise_amount;Q(i).sub(t).div(e.current_price)}return"0"}},Lz=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,r=100,i=!1){var d;let{package_id:s}=this._sdk.sdkOptions.launchpad;if(s===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");let o=`${s}_getPoolImmutables`,a=this.getCache(o,i),c=[],l=[];if(a!==void 0&&c.push(...a),c.length===0)try{((d=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${s}::factory::CreatePoolEvent`}))==null?void 0:d.data).forEach(h=>{let f=h.parsedJson;f&&c.push({pool_address:f.pool_id,coin_type_sale:pe(f.sale_coin.name).full_address,coin_type_raise:pe(f.raise_coin.name).full_address})}),this.updateCache(o,c,De)}catch(h){console.log("getPoolImmutables",h)}let u=e.length>0;for(let h=0;h<c.length;h+=1){let f=c[h];if(!(u&&!e.includes(f.pool_address))){if(!u){let m=h;if(m<t||m>=t+r)continue}l.push(f)}}return l}async getPoolImmutablesWithPage(e="all",t=!1){let{package_id:r}=this._sdk.sdkOptions.launchpad,i=`${r}_getPoolImmutables`,s=[],o={data:[],hasNextPage:!1},a=e==="all";if(a){let c=this.getCache(i,t);c&&s.push(...c)}if(s.length===0)try{let c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`},e);o.hasNextPage=c.hasNextPage,o.nextCursor=c.nextCursor,c.data.forEach(l=>{let u=l.parsedJson;u&&s.push({pool_address:u.pool_id,coin_type_sale:pe(u.sale_coin.name).full_address,coin_type_raise:pe(u.raise_coin.name).full_address})})}catch(c){console.log("getPoolImmutables",c)}return o.data=s,a&&this.updateCache(i,s,De),o}async getPools(e=[],t=0,r=100){let i=[],s=[];e.length>0?s=[...e]:(await this.getPoolImmutables([],t,r,!1)).forEach(a=>{s.push(a.pool_address)});let o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showType:!0,showContent:!0});for(let a of o){let c=io.buildLaunchPadPool(a);await io.calculatePoolPrice(this._sdk,c),i.push(c);let l=`${c.pool_address}_getPoolObject`;this.updateCache(l,c,De)}return i}async getPool(e,t=!0){let r=`${e}_getPoolObject`,i=this.getCache(r,t);if(i!==void 0){let a=i;return io.updatePoolStatus(a),a}let s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=io.buildLaunchPadPool(s);return await io.calculatePoolPrice(this._sdk,o),this.updateCache(r,o),o}async getInitConfig(e=!1){var l;let t=this._sdk.sdkOptions.launchpad.package_id,r=`${t}_getInitEvent`,i=this.getCache(r,e);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=sh(s),a=(l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:l.data,c={pools_id:"",admin_cap_id:"",config_cap_id:""};return a.length>0&&(a.forEach(u=>{let d=u.parsedJson;if(d)switch(pe(u.type).full_address){case`${t}::config::InitConfigEvent`:c.admin_cap_id=d.admin_cap_id,c.config_cap_id=d.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:c.pools_id=d.pools_id;break}}),this.updateCache(r,c,De)),c}async getLockNFT(e,t=!1){let r=`${e}_getLockNFT`,i=this.getCache(r,t);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!s.error)return Yl(s)}async getLockNFTList(e){var s;let{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:r}=this._sdk,i=[];try{let o=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${r.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:s.data;for(let a of o){let c=a.parsedJson;if(c){let l={locked_time:Number(c.locked_time),end_lock_time:Number(c.end_lock_time),nft_type:c.nft_type_name.name,lock_nft_id:c.lock_nft_id,recipient:c.recipient};if(e===l.recipient&&`${t}`===pe(l.nft_type).address){let u=await this.getLockNFT(l.lock_nft_id);if(u){let d=pe(u.coin_type_a).full_address,h=pe(u.coin_type_b).full_address;i.push({...u,coin_type_a:d,coin_type_b:h,...l})}}}}return i}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPoolTransactionPayload(e){let{launchpad:t}=this.sdk.sdkOptions,r=J(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=io.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),s=new fe,o=Q(e.total_supply).add(Q(e.total_supply).mul(Q(e.liquidity_rate))).toNumber(),a=await $e.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,s,BigInt(o),e.coin_type_sale),c=[s.object(r.admin_cap_id),s.object(r.config_cap_id),s.object(r.pools_id),s.object(Ti(e.recipient)),s.pure.u128((i*dA).toString()),a,s.pure.u64(e.total_supply.toString()),s.pure.u64(e.min_purchase.toString()),s.pure.u64(e.max_purchase.toString()),s.pure.u64(e.least_raise_amount.toString()),s.pure.u64(e.hardcap.toString()),s.pure.u64((e.liquidity_rate*1e3).toString()),s.pure.u64(e.start_time.toString()),s.pure.u64(e.activity_duration.toString()),s.pure.u64(e.settle_duration.toString()),s.pure.u64(e.locked_duration.toString()),s.pure.u32(e.tick_spacing),s.object(ke)],l=[e.coin_type_sale,e.coin_type_raise];return s.moveCall({target:`${t.published_at}::${si}::create_launch_pool`,typeArguments:l,arguments:c}),s}async creatPurchasePayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let r=new fe,i=await $e.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,r,BigInt(e.purchase_amount),e.coin_type_raise),s=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],o=[e.coin_type_sale,e.coin_type_raise],a;return s?a=[r.object(e.pool_address),r.object(J(t).config_cap_id),r.object(s.id),i,r.pure.u64(e.purchase_amount.toString()),r.object(ke)]:a=[r.object(e.pool_address),r.object(J(t).config_cap_id),i,r.pure.u64(e.purchase_amount.toString()),r.object(ke)],r.moveCall({target:`${t.published_at}::${si}::${s===void 0?"create_and_purchase":"purchase"}`,typeArguments:o,arguments:a}),r}async creatClaimPayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let r=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],i=new fe,s=[e.coin_type_sale,e.coin_type_raise],o=[i.object(e.pool_address),i.object(J(t).config_cap_id),i.object(r==null?void 0:r.id),i.object(ke)];return i.moveCall({target:`${t.published_at}::${si}::claim`,typeArguments:s,arguments:o}),i}async creatSettlePayload(e){let{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:r}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();let i=J(r),{clmm_args:s}=e,o=new fe;o.setSender(this.sdk.ClmmSDK.senderAddress);let a=[e.coin_type_sale,e.coin_type_raise];if(s){let c=s.opposite?Ue.priceToSqrtPriceX64(Q(1).div(s.current_price),s.raise_decimals,s.sale_decimals).toString():Ue.priceToSqrtPriceX64(Q(s.current_price),s.sale_decimals,s.raise_decimals).toString(),l=BigInt(c)<BigInt(s.clmm_sqrt_price),u=s.opposite?l?e.coin_type_raise:e.coin_type_sale:l?e.coin_type_sale:e.coin_type_raise,d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,u),h=At.calculateTotalBalance(d);At.isSuiCoin(u)&&(h-=BigInt(2e8));let f=$e.buildCoinForAmount(o,d,h,u).targetCoin,m=s.opposite?l?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":l?"settle_only_with_a":"settle_only_with_b",w=[o.object(e.pool_address),o.object(J(t).config_cap_id),o.object(s.clmm_pool_address),o.object(i.global_config_id),o.pure.u128(c),f,o.object(ke)];o.moveCall({target:`${t.published_at}::${si}::${m}`,typeArguments:a,arguments:w})}else o.moveCall({target:`${t.published_at}::${si}::settle`,typeArguments:a,arguments:[o.object(e.pool_address),o.object(J(t).config_cap_id),o.object(ke)]});return o}creatWithdrawPayload(e){let{launchpad:t}=this.sdk.sdkOptions,r=new fe,i=[e.coin_type_sale,e.coin_type_raise],s=[r.object(e.pool_address),r.object(J(t).config_cap_id),r.object(ke)];return e.sale_amount>BigInt(0)&&r.moveCall({target:`${t.published_at}::${si}::withdraw_sale`,typeArguments:i,arguments:s}),e.raise_amount>BigInt(0)&&r.moveCall({target:`${t.published_at}::${si}::withdraw_raise`,typeArguments:i,arguments:s}),r}addUserToWhitelisPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let r=new fe,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(s=>{let o=[r.object(J(t).admin_cap_id),r.object(J(t).config_cap_id),r.object(e.pool_address),r.object(s),r.pure.u64(e.safe_limit_amount),r.object(ke)];r.moveCall({target:`${t.published_at}::${si}::add_user_to_whitelist`,typeArguments:i,arguments:o})}),r}updateWhitelistCapPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let r=new fe,i=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&r.moveCall({target:`${t.published_at}::${si}::update_whitelist_member_safe_limit_amount`,typeArguments:i,arguments:[r.object(J(t).admin_cap_id),r.object(J(t).config_cap_id),r.object(e.pool_address),r.pure.address(e.white_list_member),r.pure.u64(e.safe_limit_amount),r.object(ke)]}),e.hard_cap_total>0&&r.moveCall({target:`${t.published_at}::${si}::update_whitelist_hard_cap_total`,typeArguments:i,arguments:[r.object(J(t).admin_cap_id),r.object(J(t).config_cap_id),r.object(e.pool_address),r.pure.u64(e.hard_cap_total),r.object(ke)]}),r}creatRemoveWhitelistPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let r=new fe,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(s=>{let o=[r.object(J(t).admin_cap_id),r.object(J(t).config_cap_id),r.object(e.pool_address),r.object(s),r.object(ke)];r.moveCall({target:`${t.published_at}::${si}::remove_user_from_whitelist`,typeArguments:i,arguments:o})}),r}creatCancelPoolPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let r=new fe,i=[e.coin_type_sale,e.coin_type_raise],s=[r.object(J(t).admin_cap_id),r.object(J(t).config_cap_id),r.object(e.pool_address),r.object(ke)];return r.moveCall({target:`${t.published_at}::${si}::cancel`,typeArguments:i,arguments:s}),r}updateRecipientPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let r=new fe,i=[e.coin_type_sale,e.coin_type_raise],s=[r.object(J(t).admin_cap_id),r.object(J(t).config_cap_id),r.object(e.pool_address),r.object(e.new_recipient),r.object(ke)];return r.moveCall({target:`${t.published_at}::${si}::update_recipient_address`,typeArguments:i,arguments:s}),r}updatePoolDuractionPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let r=new fe,i=[e.coin_type_sale,e.coin_type_raise],s=[r.object(J(t).admin_cap_id),r.object(J(t).config_cap_id),r.object(e.pool_address),r.pure.u64(e.activity_duration),r.pure.u64(e.settle_duration),r.pure.u64(e.lock_duration),r.object(ke)];return r.moveCall({target:`${t.published_at}::${si}::update_pool_duration`,typeArguments:i,arguments:s}),r}creatUnlockNftPayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(J(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");let r=new fe,i=[e.nft_type],s=[r.object(e.lock_nft),r.object(ke)];return r.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:s}),r}async isAdminCap(e){let{launchpad:t}=this._sdk.sdkOptions;if(J(t)===void 0)throw Error("launchpad config is empty");let r=`${e}_isAdminCap`,i=this.getCache(r);if(i)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:J(t).admin_cap_id,options:{showType:!0,showOwner:!0}}),o=vu(s),a=Dp(s),c=!1;return a&&o&&pe(o).source_address===`${t.package_id}::config::AdminCap`&&(c=Ti(a.AddressOwner)===Ti(e)),this.updateCache(r,c,De),c}async isWhiteListUser(e,t){let r={type:"address",value:t};try{let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:r});return!!(i&&i.data)}catch{return!1}}async getPurchaseAmount(e,t){var i;let r={type:"address",value:t};try{let s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:r}),o=et(s);if(o)return(i=o==null?void 0:o.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],r=!0){let{launchpad:i}=this._sdk.sdkOptions,s=`${t}_getPurchaseMark`,o=this.getCache(s,r);if(!r&&o!==void 0)return o;let a=null,c=[];for(;;){let l=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:a});for(let u of l.data){let{fields:d}=u.data.content;if(pe(Ls(u)).source_address===`${i.package_id}::pool::PurchaseMark`){console.log("fields: ",d);let h={id:d.id.id,pool_id:pe(d.pool_id).address,purchased_raise_amount:d.purchase_total,obtain_sale_amount:d.obtain_sale_amount,used_raise_amount:d.used_raise_amount};t.length>0?t.includes(h.pool_id)&&c.push(h):c.push(h)}}if(l.hasNextPage)a=l.nextCursor;else break}return this.updateCache(s,c,De),c}async getSettleEvent(e){let{launchpad:t}=this._sdk.sdkOptions,r=`${e}_getPurchaseMark`,i=this.getCache(r);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(let o of s.data){let a=o.parsedJson;if(e===Bn(a.pool_id)){let c={pool_id:a.pool_id,settle_price:a.settle_price,unused_sale:a.unused_sale,unused_raise:a.unused_raise,white_purchase_total:a.white_purchase_total};return this.updateCache(r,c,De),c}}}buildLaunchpadCoinType(e,t){return Np(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,t])}assertLuanchpadConfig(){let{launchpad:e}=this.sdk.sdkOptions;if(J(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,r=Bi){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e];if(!t&&(r!=null&&r.isValid()))return r.value;delete this._cache[e]}},ua=class{static buildPoolImmutables(e){let{fields:t}=e.value.fields.value;return{clmm_pool_id:pe(t.clmm_pool_id).address,bonus_type:pe(t.bonus_type.fields.name).source_address,pool_id:pe(t.pool_id).address,coinTypeA:pe(t.coin_type_a.fields.name).source_address,coinTypeB:pe(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){let t=et(e),r=[];return t.config.fields.contents.forEach(i=>{r.push({rate:Number(Q(i.fields.key).div(Ul)),multiplier:Number(Q(i.fields.value).div(Ul))})}),{balance:t.balance,config:r,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(Q(t.minimum_percent_to_reward).div(Ul)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){let{contents:t}=e.value.fields.value.fields,r=[],i=e.id.id;return t.forEach(s=>{let{key:o,value:a}=s.fields,c={id:o,period_id:i,bonus_num:a.fields.bonus_num,point:a.fields.point,is_burn:a.fields.is_burn,point_after_multiplier:a.fields.point_after_multiplier,percent:Number(Q(a.fields.percent).div(Ul)),fee_share_rate:0,is_redeemed:a.fields.is_redeemed};r.push(c)}),r}static buildPoolBonusInfo(e){let{fields:t,type:r}=e.value.fields.value;return{type:r,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let r=0;for(let i of e)t>=i.rate&&i.rate>r&&(r=i.multiplier);return r}},e1="router",$z=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;let{maker_bonus:t}=this._sdk.sdkOptions,r=`${t.package_id}_getPoolImmutables`,i=this.getCache(r,e),s=[];if(i!==void 0)s.push(...i);else{let a=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(J(t).maker_pool_handle)).data)==null||o.forEach(l=>{a.push(l.objectId)});let c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(a,{showContent:!0});for(let l of c){let u=et(l);u&&s.push(ua.buildPoolImmutables(u))}}return s}async getPoolImmutable(e){let{maker_bonus:t}=this._sdk.sdkOptions,r=`${t.package_id}_getPoolImmutables`,i=this.getCache(r);if(i!==void 0){let a=i.filter(c=>e===c.pool_id);if(a.length>0)return a[0]}let s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:J(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=et(s);return ua.buildPoolImmutables(o)}async getPools(){let e=[],t=await this.getPoolImmutables(),r=t.map(o=>o.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0}),s=0;for(let o of i){let a=ua.buildPoolState(o);if(a){let c={...t[s],...a};e.push(c);let l=`${c.pool_id}_getPoolObject`;this.updateCache(l,c,De)}s+=1}return e}async getPool(e,t=!0){let r=`${e}_getPoolObject`,i=this.getCache(r,t),s=await this.getPoolImmutable(e);if(i!==void 0)return i;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),a=ua.buildPoolState(o),c={...s,...a};return this.updateCache(r,c,De),c}async getPoolHandleId(e){let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),r=et(t);return r?r.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){let r=[],i=`${e.pool_id}_getMakerPoolPeriods`,s=this.getCache(i,t);return s!==void 0?s:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(o=>{let a={id:o.objectId,start_time:0,end_time:0,period:Number(o.name.value)};a.start_time=Number(Q(e.start_time).add(Q(e.interval_day).mul(24*3600).mul(a.period)).toFixed(0,ue.ROUND_DOWN)),a.end_time=Number(Q(a.start_time).add(Q(e.interval_day).mul(24*3600)).toFixed(0,ue.ROUND_DOWN)),r.push(a)}),this.updateCache(i,r,De),r)}async getMakerBonusInitConfigs(){var i;let{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,r={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(s=>{let o=s.parsedJson;o&&(r.maker_config_id=o.config_id)}),r.maker_pool_handle=await this.getPoolHandleId(r.maker_config_id),r}async getPoolMarkerPositionList(e,t,r=!1){let i={},s=[];r||t.forEach(o=>{let a=`${e}_${o.period}_getPoolMarkerPositionList`,c=this.getCache(a);c!==void 0?i[o.period]=c:(i[o.period]=[],s.push(o))});try{s.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(s.map(a=>a.id),{showContent:!0})).forEach(a=>{let c=et(a),l=ua.buildMarkerPositions(c);if(l.length>0){let{period_id:u}=l[0],d=t.filter(h=>h.id===u)[0];i[d.period]=l}});let o=[];for(let a in i)i[a].forEach(c=>{o.push(c)});if(o.length>0){let a=await this._sdk.ClmmSDK.Position.getSipmlePositionList(o.map(c=>c.id));for(let c of o)for(let l of a)if(c.id===l.pos_object_id){c.clmm_position=l;break}}}catch(o){console.log(o)}for(let o in i){let a=`${e}_${o}_getPoolMarkerPositionList`;this.updateCache(a,i[o],De)}return i}async updateXCetusRewarderAndFee(e,t,r){let i=await this.calculateTotalPointsAfterMultiper(e,r);for(let s of t)await this.calculateXCetusRewarder(e,s,r.period,i);return t}async calculateXCetusRewarder(e,t,r,i){let s=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,r),{fee_share_rate:o}=this.calculateFeeShareRate(e,t,i),a=Q(o).mul(s.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=a.toString(),t.bonus_num}calculateFeeShareRate(e,t,r){let i=ua.getBonusPercent(e.config,t.percent),s=Q(t.point).mul(i),o=Q(s).div(r);return t.point_after_multiplier=s.toString(),t.fee_share_rate=Number(o),{fee_share_rate:Number(o),points_after_multiper:s.toString()}}async calculateTotalPointsAfterMultiper(e,t){let r=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]),i=Q(0),s=r[t.period];for(let o of s){let a=ua.getBonusPercent(e.config,o.percent),c=Q(o.point).mul(a);i=i.add(c)}return i.toString()}async calculateAllXCetusRewarder(e){let t=this._sdk.ClmmSDK.senderAddress,r=Q(0),i=[];for(let s of e){let o=await this._sdk.MakerModule.getMakerPoolPeriods(s),a=await this._sdk.MakerModule.getPoolMarkerPositionList(s.whale_nfts.whale_nfts_handle,o),c=[];for(let l of o){let u=a[l.period].filter(d=>{var h;return t.length===0?!1:((h=d.clmm_position)==null?void 0:h.owner)===t});u.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(s,u,l),u.forEach(d=>{var h;((h=d.clmm_position)==null?void 0:h.position_status)===nA.Exists&&Q(d.bonus_num).greaterThan(0)&&(r=r.add(d.bonus_num),c.includes(d.clmm_position.pos_object_id)||c.push(d.clmm_position.pos_object_id))}))}i.push({bonus_type:s.bonus_type,pool_id:s.pool_id,nft_ids:c})}return{claimtotal:r,claimRecord:i}}async getPoolBonusInfo(e,t,r=!1){let i=`${e}_${t}_getPoolBonusInfo`,s=this.getCache(i,r);if(s!==void 0)return s;let o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),a=et(o),c=ua.buildPoolBonusInfo(a);return this.updateCache(i,c,Bi),c}claimPayload(e){let{maker_bonus:t,xcetus:r}=this.sdk.sdkOptions,i=new fe;return i.moveCall({target:`${t.published_at}::${e1}::claim`,typeArguments:[e.bonus_type],arguments:[i.object(J(t).maker_config_id),i.object(e.market_pool_id),i.object(e.position_nft_id),i.pure.u8(e.phase),i.object(J(r).lock_manager_id),i.object(J(r).xcetus_manager_id),i.object(e.ve_nft_id)]}),i}claimAllPayload(e){let{maker_bonus:t,xcetus:r}=this.sdk.sdkOptions,i=new fe;return e.whale_nfts.forEach(s=>{s.nft_ids.forEach(o=>{i.moveCall({target:`${t.published_at}::${e1}::claim_all`,typeArguments:[s.bonus_type],arguments:[i.object(J(t).maker_config_id),i.object(s.pool_id),i.object(o),i.object(J(r).lock_manager_id),i.object(J(r).xcetus_manager_id),i.object(e.ve_nft_id)]})})}),i}updateCache(e,t,r=Bi){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e];if(!t&&(r!=null&&r.isValid()))return r.value;delete this._cache[e]}},ll="router",Uh="router",md=24*3600,Rp=1e3,es=1e11,Sc=class{static buildVeNFTDividendInfo(e){let t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(r=>{let i=[];r.fields.value.fields.contents.forEach(s=>{i.push({coin_type:pe(s.fields.key.fields.name).source_address,amount:s.fields.value})}),t.rewards.push({period:Number(r.fields.key),rewards:i,vesrion:"v1"})}),t}static buildDividendManager(e){let t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(r=>{t.bonus_types.push(pe(r.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:On(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){let t=e.fields,r={id:t.id.id,type:pe(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return r.lock_day=(r.locked_until_time-r.locked_start_time)/md,r}static getAvailableXCetus(e,t){let r=Q(0);return t.forEach(i=>{r=r.add(i.xcetus_amount)}),Q(e.xcetus_balance).sub(r).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!Sc.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>Sc.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e,t){let r=new Set;return e==null||e.forEach(i=>{i.rewards.forEach(s=>{r.add(s.coin_type)})}),t==null||t.forEach(i=>{i.rewards.forEach(s=>{r.add(s.coin_type)})}),Array.from(r)}static buildDividendRewardTypeListV2(e){let t={};return e==null||e.forEach(r=>{r.vesrion==="v2"&&r.rewards.forEach(i=>{t[i.coin_type]||(t[i.coin_type]=[]),t[i.coin_type].push(r.period)})}),t}static getNextStartTime(e){let t=Date.now()/1e3,{start_time:r,interval_day:i}=e,s=Math.ceil((t-r)/(i*md));return r+s*i*md}},Vz=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){let{xcetus:r}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,s=this.getCache(i,t);if(s!==void 0)return s;let o,a=`${r.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:a}})).data.forEach(c=>{let l=pe(Ls(c)).source_address;if(l===a&&c.data&&c.data.content){let{fields:u}=c.data.content;o={...jm(c),id:u.id.id,index:u.index,type:l,xcetus_balance:u.xcetus_balance},this.updateCache(i,o,De)}}),o}async getOwnerLockCetuss(e){let{xcetus:t}=this.sdk.sdkOptions,r=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(let o of s.data)if(pe(Ls(o)).source_address===i&&o.data){let a=Sc.buildLockCetus(o.data.content);a.xcetus_amount=await this.getXCetusAmount(a.id),r.push(a)}return r}async getLockCetus(e){var r;let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((r=t.data)!=null&&r.content){let i=Sc.buildLockCetus(t.data.content);return i.xcetus_amount=await this.getXCetusAmount(i.id),i}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){let{xcetus:e}=this.sdk.sdkOptions,t=new fe;return t.moveCall({target:`${e.published_at}::${ll}::mint_venft`,typeArguments:[],arguments:[t.object(J(e).xcetus_manager_id)]}),t}async convertPayload(e,t){let{xcetus:r}=this.sdk.sdkOptions;t=t||new fe;let i=this.buileCetusCoinType(),s=await $e.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,t,BigInt(e.amount),i);return e.venft_id===void 0?t.moveCall({target:`${r.published_at}::${ll}::mint_and_convert`,typeArguments:[],arguments:[t.object(J(r).lock_manager_id),t.object(J(r).xcetus_manager_id),s,t.pure.u64(e.amount)]}):t.moveCall({target:`${r.published_at}::${ll}::convert`,typeArguments:[],arguments:[t.object(J(r).lock_manager_id),t.object(J(r).xcetus_manager_id),s,t.pure.u64(e.amount),t.object(e.venft_id)]}),t}redeemLockPayload(e){let{xcetus:t}=this.sdk.sdkOptions,r=new fe;return r.moveCall({target:`${t.published_at}::${ll}::redeem_lock`,typeArguments:[],arguments:[r.object(J(t).lock_manager_id),r.object(J(t).xcetus_manager_id),r.object(e.venft_id),r.pure.u64(e.amount),r.pure.u64(e.lock_day),r.object(ke)]}),r}redeemPayload(e){let{xcetus:t}=this.sdk.sdkOptions,r=new fe;return r.moveCall({target:`${t.published_at}::${ll}::redeem`,typeArguments:[],arguments:[r.object(J(t).lock_manager_id),r.object(J(t).xcetus_manager_id),r.object(e.venft_id),r.object(e.lock_id),r.object(ke)]}),r}redeemDividendPayload(e,t){let{xcetus:r,xcetus_dividends:i}=this.sdk.sdkOptions,s=new fe;return t.forEach(o=>{s.moveCall({target:`${r.published_at}::${Uh}::redeem`,typeArguments:[o],arguments:[s.object(J(i).dividend_manager_id),s.object(e)]})}),s}redeemDividendV2Payload(e,t,r){let{xcetus_dividends:i}=this.sdk.sdkOptions,s=new fe;return t.filter(o=>r.includes(o)).length>0&&(s=this.redeemDividendXTokenPayload(e,s)),t.forEach(o=>{r.includes(o)||s.moveCall({target:`${i.published_at}::${Uh}::redeem_v2`,typeArguments:[o],arguments:[s.object(J(i).dividend_manager_id),s.object(e),s.object(ke)]})}),s}redeemDividendV3Payload(e,t,r,i,s){let{xcetus_dividends:o}=this.sdk.sdkOptions,a=new fe;return r.filter(c=>s.includes(c)).length>0&&(a=this.redeemDividendXTokenPayload(t,a)),r.forEach(c=>{a.moveCall({target:`${o.published_at}::${Uh}::redeem_v3`,typeArguments:[c],arguments:[a.object(J(o).dividend_manager_id),a.object(J(o).venft_dividends_id),a.makeMoveVec({elements:i[c].map(l=>a.pure.u64(l)),type:"u64"}),a.object(t),a.object(ke)]})}),a}redeemDividendXTokenPayload(e,t){let{xcetus_dividends:r,xcetus:i}=this.sdk.sdkOptions,{xcetus_manager_id:s,lock_manager_id:o}=J(i),{dividend_manager_id:a}=J(r);return t=t===void 0?new fe:t,t.moveCall({target:`${r.published_at}::${Uh}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(s),t.object(a),t.object(e),t.object(ke)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",r="XCETUS"){return`${e}::${t}::${r}`}cancelRedeemPayload(e){let{xcetus:t}=this.sdk.sdkOptions,r=new fe;return r.moveCall({target:`${t.published_at}::${ll}::cancel_redeem_lock`,typeArguments:[],arguments:[r.object(J(t).lock_manager_id),r.object(J(t).xcetus_manager_id),r.object(e.venft_id),r.object(e.lock_id),r.object(ke)]}),r}async getInitConfigs(){var a,c;let{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,r=this.getCache(t);if(r!==void 0)return r;let i=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:a.data,s={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(l=>{let u=l.parsedJson;u&&(s.xcetus_manager_id=u.xcetus_manager)});let o=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:c.data;return o.length>0&&o.forEach(l=>{let u=l.parsedJson;u&&(s.lock_manager_id=u.lock_manager)}),s.lock_manager_id.length>0&&(s.lock_handle_id=(await this.getLockUpManager(s.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(t,s,De),s}async getLockUpManager(e=J(this.sdk.sdkOptions.xcetus).lock_manager_id,t=!1){let r=`${e}_getLockUpManager`,i=this.getCache(r,t);if(i!==void 0)return i;let s=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=Sc.buildLockUpManager(et(s));return this.updateCache(r,o,De),o}async getDividendConfigs(){var u,d,h;let{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,{dividend_manager_id:t,venft_dividends_id:r}=J(this._sdk.sdkOptions.xcetus_dividends),i=`${e}_getDividendManagerEvent`,s=this.getCache(i);if(s!==void 0)return s;let o=(u=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:u.data,a=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x1::string::String",value:"VeNFTDividends"}}),c={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:"",venft_dividends_id:"",venft_dividends_id_v2:""};o.length>0&&o.forEach(f=>{let m=f.parsedJson;m&&(c.dividend_manager_id=m.manager_id,c.dividend_admin_id=m.admin_id,c.dividend_settle_id=m.settle_id,this.updateCache(i,c,De))}),a&&a.data&&a.data.content&&(c.venft_dividends_id=(h=(d=a.data.content)==null?void 0:d.fields)==null?void 0:h.value,this.updateCache(i,c,De));let l=await this._sdk.ClmmSDK.fullClient.getObject({id:r,options:{showContent:!0}});return c.venft_dividends_id_v2=l.data.content.fields.venft_dividends.fields.id.id,c}async getDividendManager(e=!1){let{dividend_manager_id:t}=J(this._sdk.sdkOptions.xcetus_dividends),r=`${t}_getDividendManager`,i=this.getCache(r,e);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=et(s),a=Sc.buildDividendManager(o);return this.updateCache(r,a,De),a}async getXcetusManager(e=!0){let{xcetus_manager_id:t}=J(this._sdk.sdkOptions.xcetus),r=`${t}_getXcetusManager`,i=this.getCache(r,e);if(i)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=et(s),a={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(r,a),a}async getVeNFTDividendInfo(e,t,r){let i,s={id:"",ve_nft_id:r,rewards:[]};try{i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:r}});let a=et(i);s=Sc.buildVeNFTDividendInfo(a)}catch{i=void 0}let o=[];try{let a=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:r}}),c=et(a).value.fields.value.fields.dividends.fields.id.id,l=null,u=50,d=[];for(;;){let h=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:c,cursor:l,limit:u});if(h.data.forEach(f=>{d.push(f.objectId)}),l=h.nextCursor,l===null||h.data.length<u)break}console.log("🚀🚀🚀 ~ file: xcetusModule.ts:662 ~ XCetusModule ~ tableIdList:",d),(await this._sdk.ClmmSDK.fullClient.batchGetObjects(d,{showType:!0,showContent:!0})).forEach(h=>{o.push({period:Number(h.data.content.fields.name),vesrion:"v2",rewards:h.data.content.fields.value.fields.contents.map(f=>({coin_type:pe(f.fields.key.fields.name).source_address,amount:f.fields.value}))})}),console.log("🚀🚀🚀 ~ file: xcetusModule.ts:680 ~ XCetusModule ~ objects.forEach ~ rewards:",o)}catch(a){console.log("🚀🚀🚀 ~ file: xcetusModule.ts:637 ~ XCetusModule ~ error:",a)}return{...s,rewards:[...s.rewards,...o]}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let r=await this.getLockUpManager(J(this._sdk.sdkOptions.xcetus).lock_manager_id),i=Q(es).mul(Q(r.max_lock_day).sub(Q(t))).mul(Q(r.max_percent_numerator).sub(Q(r.min_percent_numerator))).div(Q(r.max_lock_day).sub(Q(r.min_lock_day))),s=Q(es).mul(Q(r.max_percent_numerator)).sub(i).div(Q(Rp)).div(es);return{amountOut:Q(s).mul(Q(e)).round().toString(),percent:s.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let r=await this.getLockUpManager(J(this._sdk.sdkOptions.xcetus).lock_manager_id),i=Q(es).mul(Q(r.max_lock_day).sub(Q(t))).mul(Q(r.max_percent_numerator).sub(Q(r.min_percent_numerator))).div(Q(r.max_lock_day).sub(Q(r.min_lock_day))),s=Q(es).mul(Q(r.max_percent_numerator)).sub(i).div(Q(Rp)).div(es);return{amountOut:Q(e).div(s).toFixed(0,ue.ROUND_UP),percent:s.toString()}}async getXCetusAmount(e){let{lock_handle_id:t}=J(this._sdk.sdkOptions.xcetus),r=`${e}_getXCetusAmount`,i=this.getCache(r);if(i!==void 0)return i;try{let s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=et(s);if(o){let{xcetus_amount:a}=o.value.fields.value.fields;return this.updateCache(r,a,De),a}}catch{}return"0"}async getVeNftAmount(e,t){try{let r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=et(r);if(i){let{lock_amount:s,xcetus_amount:o}=i.value.fields.value.fields;return{lock_amount:s,xcetus_amount:o}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){let r=(await this.getDividendManager()).dividends.id,i=`${r}_${e}_getPhaseDividendInfo`,s=this._sdk.getCache(i,t);if(s)return s;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:r,name:{type:"u64",value:e}}),a=et(o),c=a.value.fields.value.fields,l=c.redeemed_num.fields.contents.map(f=>({name:f.fields.key.fields.name,value:f.fields.value})),u=c.bonus_types.map(f=>f.fields.name),d=c.bonus.fields.contents.map(f=>({name:f.fields.key.fields.name,value:f.fields.value})),h={id:Rs(o),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:l,is_settled:c.is_settled,bonus_types:u,bonus:d,phase_end_time:""};return this.updateCache(i,h),h}catch{}}updateCache(e,t,r=Bi){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e];if(!t&&(r!=null&&r.isValid()))return r.value;delete this._cache[e]}},qz="factory",$i="oversubscribe_pool",hA=1e6,Cl=1e18,zz=(n=>(n.Upcoming="Upcoming",n.Live="Live",n.Ended="Ended",n.Failed="Failed",n.Canceled="Canceled",n))(zz||{}),ul="router",Pg="router",Fh="router",Wz=(n=>(n.BOTH="both",n.LEFT="left",n.Right="right",n))(Wz||{}),Kz=(n=>(n[n.CURVE=3]="CURVE",n[n.BID_ASK=4]="BID_ASK",n))(Kz||{}),t1={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function Zz(n){return"master_address"in n}var Qz="router",Hz="vaults",Gz=1e4,Yz=(n=>(n.STATUS_RUNNING="STATUS_RUNNING",n.STATUS_REBALANCING="STATUS_REBALANCING",n))(Yz||{}),Xz=(n=>(n.Haedal="Haedal",n.Volo="Volo",n.Aftermath="aftermath",n))(Xz||{}),Jz=(n=>(n.Running="Running",n.PartialCompleted="PartialCompleted",n.Completed="Completed",n.Cancelled="Cancelled",n))(Jz||{}),Gr=class{static buildIdoPoolImmutables(e){return{pool_address:Bn(e.pool_id),coin_type_sale:pe(e.sale_coin_type.name).full_address,coin_type_raise:pe(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){let t=Ls(e),r=pe(t),i=et(e),s={pool_address:Bn(i.id.id),coin_type_sale:r.type_arguments[0],coin_type_raise:r.type_arguments[1],tick_spacing:Number(i.tick_spacing),total_supply:i.total_supply,min_purchase:i.min_purchase_amount,max_purchase:i.max_purchase_amount},o={start_time:Number(i.duration_manager.fields.start_time),lock_up_duration:Number(i.duration_manager.fields.lock_up_duration),purchase_duration:Number(i.duration_manager.fields.purchase_duration),end_time:0};o.end_time=o.start_time+o.purchase_duration;let a={complete_raise_limit:i.complete_raise_limit,liquidity_injection_ratio:Q(i.liquidity_injection_ratio).div(hA).toNumber(),current_sqrt_price_min:i.current_sqrt_price_min,current_sqrt_price_max:i.current_sqrt_price_max,owner:i.owner,sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,price:i.price,current_price:i.price,duration_summary:o,is_cancelled:i.is_cancelled,is_liquidity_injected:i.is_liquidity_injected,liquidity_used_raise_amount:i.liquidity_used_raise_amount,liquidity_used_sale_amount:i.liquidity_used_sale_amount,purchase_summary:{size:Number(i.purchase_manager.fields.purchases.fields.size),purchase_handle:i.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:i.total_purchase_amount,white_summary:{white_list_id:i.white_list.fields.id.id,protection_limit_used:i.white_list.fields.protection_limit_used,protection_hard_cap:i.white_list.fields.protection_hard_cap,white_handle:i.white_list.fields.addresses.fields.id.id,size:Number(i.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:i.is_withdrawn};return Gr.updatePoolStatus(a),{...s,...a}}static is_init_period(e){return Number(Q(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){let t=Number(Q(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){let t=Number(Q(Date.now()/1e3).toFixed(0)),r=e.start_time+e.purchase_duration;return t>r}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&Gr.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:Gr.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&Gr.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||Gr.is_claim_period(e.duration_summary)&&Q(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let r,i;if(Gr.is_sale_failed(e))r="0",i="0";else if(t.is_redeemed)r=t.obtained_sale_amount,i=t.used_raise_amount;else if(Q(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))r=Q(t.purchased_raise_amount).mul(Cl).div(e.price).toString(),i=t.purchased_raise_amount;else{let o=Gr.redeemForSaleOversubcribeV2(e,t);r=o.user_obtained_sale_amount,i=o.user_used_raise_amount_ceil}r=ue.floor(r);let s=ue.floor(Q(t.purchased_raise_amount).sub(i).toString());return{obtained_sale_amount:r,refunded_raise_amount:s}}static calculateWithdrawAmount(e){let t,r,i=Q(e.total_supply).mul(e.liquidity_injection_ratio);if(Gr.is_sale_failed(e))t="0",r=Q(i).add(e.total_supply);else{let{max_raise_amount:s}=e;Q(e.total_purchase_amount).greaterThanOrEqualTo(s)?(t=Q(s).sub(e.liquidity_used_raise_amount).toString(),r="0"):(t=Q(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),r=Q(e.total_supply).add(i).sub(e.liquidity_used_sale_amount).sub(Gr.get_sold_amount(e)))}return{obtained_raise_amount:ue.floor(t).toString(),refunded_sale_amount:ue.ceil(r).toString()}}static get_sold_amount(e){return Q(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:Q(e.total_purchase_amount).mul(Cl).div(e.price)}static redeemForSaleOversubcribe(e,t){let r=t.protection_raise_amount,i=Q(t.purchased_raise_amount).sub(r),s=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,a=Q(s).sub(o),c=Q(e.total_purchase_amount).sub(o),l=ue.ceil(i.mul(a).div(c).add(r)),u=ue.floor(i.mul(a).div(c).add(r));return{user_obtained_sale_amount:ue.floor(Q(e.total_supply).mul(u).div(s)),user_used_raise_amount_ceil:l}}static redeemForSaleOversubcribeV2(e,t){let r=t.protection_raise_amount,i=Q(t.purchased_raise_amount).sub(r),s=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,a=Q(s).sub(o),c=Q(e.total_purchase_amount).sub(o),l=Q(r).mul(c).add(Q(i).mul(a)).mul(Cl).div(Q(c).mul(e.price)),u=ue.ceil(l.mul(e.price).div(Cl));return{user_obtained_sale_amount:l,user_used_raise_amount_ceil:u}}static raiseTotalAmount(e){let t=Q(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?Q(e.total_supply).mul(e.current_price).div(Q(10).pow(Q(t))).toString():Q(e.total_supply).mul(e.current_price).mul(Q(10).pow(Q(t))).toString()}static updatePoolStatus(e){let t=Number(Q(Date.now()/1e3).toFixed(0)),r=e.duration_summary,i=r.start_time+r.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<r.start_time?e.pool_status="Upcoming":t>r.start_time&&t<i?e.pool_status="Live":Q(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){let r=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=r[t.coin_type_sale].decimals,s=r[t.coin_type_raise].decimals;t.current_price=io.priceFixToReal(Number(Q(t.price).div(Q(Cl)).toString()),i,s).toString(),t.sale_decimals=i,t.raise_decimals=s,t.max_raise_amount=this.raiseTotalAmount(t)}},eW=(n=>(n.V1="1",n.V2="2",n))(eW||{}),Cc=class{static buildVeNFTDividendInfo(e){let t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(r=>{let i=[];r.fields.value.fields.contents.forEach(s=>{i.push({coin_type:pe(s.fields.key.fields.name).source_address,amount:s.fields.value})}),t.rewards.push({period:Number(r.fields.key),rewards:i})}),t}static buildDividendManager(e){let t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(r=>{t.bonus_types.push(pe(r.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:On(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){let t=e.fields,r={id:t.id.id,type:pe(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return r.lock_day=(r.locked_until_time-r.locked_start_time)/md,r}static getAvailableXToken(e,t){let r=Q(0);return t.forEach(i=>{r=r.add(i.xtoken_amount)}),Q(e.xtoken_balance).sub(r).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!Cc.isLocked(t))}static getLockingTokens(e){return e.filter(t=>Cc.isLocked(t))}static buildDividendRewardTypeList(e){let t=new Set;return e.forEach(r=>{r.rewards.forEach(i=>{t.add(i.coin_type)})}),Array.from(t)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=md){let r=Date.now()/1e3,{start_time:i,interval_day:s}=e,o=Math.ceil((r-i)/(s*t));return i+o*s*t}},No=class{static getDefaultStrategyConfig(n){let e;switch(n){case 4:e=t1.bidAsk;break;default:e=t1.curve;break}return e}static geTickIndexRange(n,e,t,r){let i,s;switch(n=Ue.getInitializableTickIndex(n,e),r){case"left":n>0?(s=Q(n).sub(e).toNumber(),i=Q(n).mul(Q(1).add(t)).toDecimalPlaces(0).toNumber()):(s=Q(n).sub(e).toNumber(),i=Q(n).mul(Q(1).sub(t)).toDecimalPlaces(0).toNumber());break;case"right":n>0?(s=Q(n).mul(Q(1).add(t)).toDecimalPlaces(0).toNumber(),i=Q(n).add(e).toNumber()):(s=Q(n).mul(Q(1).sub(t)).toDecimalPlaces(0).toNumber(),i=Q(n).add(e).toNumber());break;default:n>0?(i=Q(n).mul(Q(1).sub(t)).toDecimalPlaces(0).toNumber(),s=Q(n).mul(Q(1).add(t)).toDecimalPlaces(0).toNumber()):(i=Q(n).mul(Q(1).add(t)).toDecimalPlaces(0).toNumber(),s=Q(n).mul(Q(1).sub(t)).toDecimalPlaces(0).toNumber());break}if(i=Ue.getInitializableTickIndex(i,e),s=Ue.getInitializableTickIndex(s,e),i<Kq)throw Error("Tick lower value is below the minimum allowed value.");if(s>Wq)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:i,tick_upper:s}}static getCreateLiquidityBins(n,e){let t=[];switch(e){case 4:t=No.getCreateBidAskLiquidityBins(n);break;default:t=No.getCreateCurveLiquidityBins(n);break}return t}static getCreateBidAskLiquidityBins(n){let e=Q(Math.floor(Q(n.tick_upper).sub(n.tick_lower).div(n.div_width).toNumber())).abs(),t=[],r=n.ratios,i,s;for(let o=0;o<r.length;o++){let a,c;n.tick_upper<=n.curr_tick?(c=Q(n.tick_upper).sub(e.mul(o)).toNumber(),a=Q(c).sub(e).toNumber()):n.tick_lower>=n.curr_tick?(a=Q(n.tick_lower).add(e.mul(o)).toNumber(),c=Q(n.tick_lower).add(e.mul(o+1)).toNumber()):o===4?(a=Q(n.tick_lower).add(e.mul(o)).toNumber(),c=Q(a).add(e.mul(2)).toNumber()):o>4?(a=Q(n.tick_lower).add(e.mul(o+1)).toNumber(),c=Q(a).add(e).toNumber()):(a=Q(n.tick_lower).add(e.mul(o)).toNumber(),c=Q(a).add(e).toNumber()),i=Ue.getInitializableTickIndex(a,n.tick_spacing),s=Ue.getInitializableTickIndex(c,n.tick_spacing),t.push({tick_lower:i,tick_upper:s,ratio:r[o],liquidity:"0"})}return t}static getCreateCurveLiquidityBins(n){let e=Q(Math.floor(Q(n.tick_upper).sub(n.tick_lower).div(n.div_width).toNumber())).abs(),t=[],r=n.ratios;for(let i=0;i<r.length;i++){let s,o;n.tick_upper<=n.curr_tick?(o=n.tick_upper,s=Q(n.tick_upper).sub(e.mul(i+1)).toNumber()):n.tick_lower>=n.curr_tick?(s=n.tick_lower,o=Q(s).add(e.mul(i+1)).toNumber()):(s=Q(n.curr_tick).sub(e.mul(i+1)).toNumber(),o=Q(n.curr_tick).add(e.mul(i+1)).toNumber()),t.push({tick_lower:Ue.getInitializableTickIndex(s,n.tick_spacing),tick_upper:Ue.getInitializableTickIndex(o,n.tick_spacing),ratio:r[i],liquidity:"0"})}return t}static calculateAddLiquidityInputs(n){let e=new B(Ue.tickIndexToSqrtPriceX64(n.curr_tick)),t=No.calculateCoinRatios(n.curr_tick,n.liquidity_bins),r=n.liquidity_bins.map((i,s)=>{let o=t[s],a=Q(n.coin_amount).mul(n.fix_amount_a?o.coinRatioA:o.coinRatioB).toFixed(0).toString();try{return{...fr.estLiquidityAndcoinAmountFromOneAmounts(i.tick_lower,i.tick_upper,new B(a),n.fix_amount_a,!0,n.slippage,e),...i}}catch{return{coinAmountA:new B(0),coinAmountB:new B(0),tokenMaxA:new B(0),tokenMaxB:new B(0),liquidityAmount:new B(0),fix_amount_a:!n.fix_amount_a,...i}}});return No.fixLiquidityInputs(e,n.slippage,r,!0)}static fixLiquidityInputs(n,e,t,r){let i=t.filter(o=>o.liquidityAmount.gt(We));if(i.length===0)return[];let s=i[0];return t.map(o=>{if(o.liquidityAmount.eq(We)){let a=Q(s.liquidityAmount.toString()).mul(o.ratio).div(s.ratio).toFixed(0),c=Ue.tickIndexToSqrtPriceX64(o.tick_lower),l=Ue.tickIndexToSqrtPriceX64(o.tick_upper),u=fr.getCoinAmountFromLiquidity(new B(a.toString()),n,c,l,!1);return{coinAmountA:u.coinA,coinAmountB:u.coinB,liquidityAmount:new B(a.toString()),fix_amount_a:o.fix_amount_a,...jg(u,pd.fromDecimal(Q(e).mul(100)),r)}}return o})}static calculateCoinRatios(n,e){let t=new B(Ue.tickIndexToSqrtPriceX64(n)),r=[],i=Q(0),s=Q(0),o=e.map(l=>{let u=Q(Sz(100,6).toString()).mul(l.ratio).toFixed(0).toString(),d=Ue.tickIndexToSqrtPriceX64(l.tick_lower),h=Ue.tickIndexToSqrtPriceX64(l.tick_upper),f=fr.getCoinAmountFromLiquidity(new B(u),t,d,h,!0);return i=i.add(f.coinA.toString()),s=s.add(f.coinB.toString()),{...f,liquidity:u}}),a=[],c=[];return o.forEach((l,u)=>{let d={coinRatioA:i.eq(Q(0))?0:Q(l.coinA.toString()).div(i).toNumber(),coinRatioB:s.eq(Q(0))?0:Q(l.coinB.toString()).div(s).toNumber(),liquiditys:l.liquidity,tick_lower:e[u].tick_lower,tick_upper:e[u].tick_upper};r.push(d),a.push(i.eq(Q(0))?0:Q(l.coinA.toString()).div(i).toNumber()),c.push(s.eq(Q(0))?0:Q(l.coinB.toString()).div(s).toNumber())}),r}static calculateCloseMasterLiquidityInputs(n){let e=new B(Ue.tickIndexToSqrtPriceX64(n.curr_tick));return n.positions.map(t=>{let r=new B(t.liquidity),i=Ue.tickIndexToSqrtPriceX64(t.tick_lower_index),s=Ue.tickIndexToSqrtPriceX64(t.tick_upper_index),o=fr.getCoinAmountFromLiquidity(r,e,i,s,!1),a=pd.fromDecimal(Q(n.slippage).mul(100)),{tokenMaxA:c,tokenMaxB:l}=jg(o,a,!1);return{coinAmountA:o.coinA,coinAmountB:o.coinB,tokenMaxA:c,tokenMaxB:l,liquidityAmount:r,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(n){let e=new B(Ue.tickIndexToSqrtPriceX64(n.curr_tick)),{fix_token:t}=n;if(t){let r=n.positions.map((o,a)=>({tick_lower:o.tick_lower_index,tick_upper:o.tick_upper_index,ratio:n.ratios[a]})),i=No.calculateCoinRatios(n.curr_tick,r),s=n.positions.map((o,a)=>{let c=i[a],l=Q(t.coin_amount).mul(t.fix_amount_a?c.coinRatioA:c.coinRatioB).toFixed(0).toString();try{let u=fr.estLiquidityAndcoinAmountFromOneAmounts(o.tick_lower_index,o.tick_upper_index,new B(l),t.fix_amount_a,!1,n.slippage,e);return{...u,tick_lower:o.tick_lower_index,tick_upper:o.tick_upper_index,liquidity:u.liquidityAmount.toString(),ratio:n.ratios[a]}}catch{return{coinAmountA:new B(0),coinAmountB:new B(0),tokenMaxA:new B(0),tokenMaxB:new B(0),liquidityAmount:new B(0),fix_amount_a:!t.fix_amount_a,tick_lower:o.tick_lower_index,tick_upper:o.tick_upper_index,liquidity:"0",ratio:n.ratios[a]}}});return No.fixLiquidityInputs(e,n.slippage,s,!1)}return n.positions.map((r,i)=>{let s=n.ratios[i],o=Q(n.liquidity).mul(s).toFixed(0);Q(o).greaterThan(r.liquidity)&&(o=r.liquidity);let a=Ue.tickIndexToSqrtPriceX64(r.tick_lower_index),c=Ue.tickIndexToSqrtPriceX64(r.tick_upper_index),l=fr.getCoinAmountFromLiquidity(new B(o),e,a,c,!1),u=pd.fromDecimal(Q(n.slippage).mul(100)),{tokenMaxA:d,tokenMaxB:h}=jg(l,u,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,tokenMaxA:d,tokenMaxB:h,liquidityAmount:new B(o),fix_amount_a:!1}})}static buildMasterPosition(n){return{coin_type_a:pe(n.coin_type_a.fields.name).full_address,coin_type_b:pe(n.coin_type_b.fields.name).full_address,description:n.description,id:n.id.id,index:n.index,liquidity:n.liquidity,name:n.name,pool:n.pool,tick_lower_index:ir(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:ir(BigInt(n.tick_upper_index.fields.bits)),url:n.url}}static buildMasterNFT(n){let e=et(n);if(e){let t={id:e.id.id,pool_id:e.pool_id,index:Number(e.index),strategy:Number(e.strategy),tick_lower_index:ir(BigInt(e.tick_lower_index)),tick_upper_index:ir(BigInt(e.tick_upper_index)),positions:[],...jm(n)};return t.positions=e.positions.map(r=>No.buildMasterPosition(r.fields)),t}}},Si=class{static generateNextTickRange(e,t,r){let i=e-t/2,s=e+t/2;return{new_tick_lower:Si.getValidTickIndex(i,r),new_tick_upper:Si.getValidTickIndex(s,r)}}static calculateDepositRatio(e,t,r){let i=Ue.sqrtPriceX64ToTickIndex(r);if(i<e)return{ratioA:new ue(1),ratioB:new ue(0)};if(i>t)return{ratioA:new ue(0),ratioB:new ue(1)};let s=new B(1e8),{coinAmountB:o}=fr.estLiquidityAndcoinAmountFromOneAmounts(e,t,s,!0,!0,0,r),a=Ue.sqrtPriceX64ToPrice(r,0,0),c=Q(s.toString()).mul(a),l=c.add(o.toString()),u=c.div(l),d=Q(o.toString()).div(l);return{ratioA:u,ratioB:d}}static getValidTickIndex(e,t){if(e%t===0)return e;let r;if(e>0?r=e-e%t+t:e<0?r=e+Math.abs(e)%t-t:r=e,r%t!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(r)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return r}static get_lp_amount_by_liquidity(e,t){return e.total_supply==="0"?"0":Q(e.total_supply).mul(t).div(e.liquidity).toFixed(0,ue.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,t){return e.total_supply==="0"?"0":Q(t).mul(e.liquidity).div(e.total_supply).toFixed(0,ue.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,t){return Q(t).mul(e.protocol_fee_rate).div(Gz).toFixed(0,ue.ROUND_CEIL)}static buildFramsPositionNFT(e){let t=e.clmm_postion.fields;return{id:e.id.id,url:t.url,pool_id:e.pool_id,coinTypeA:pe(t.coin_type_a.fields.name).full_address,coinTypeB:pe(t.coin_type_b.fields.name).full_address,description:t.description,name:t.name,liquidity:t.liquidity,clmm_position_id:t.id.id,clmm_pool_id:t.pool,tick_lower_index:ir(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:ir(BigInt(t.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){let t=et(e),r=vu(e),{positions:i}=t;if(t&&i.length>0){let s=Si.buildFramsPositionNFT(i[0].fields);return{id:t.id.id,pool_id:t.pool,protocol_fee_rate:t.protocol_fee_rate,is_pause:t.is_pause,harvest_assets:{harvest_assets_handle:t.harvest_assets.fields.id.id,size:Number(t.harvest_assets.fields.size)},lp_token_type:pe(r).type_arguments[0],total_supply:t.lp_token_treasury.fields.total_supply.fields.value,liquidity:t.liquidity,max_quota:t.max_quota,status:t.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:t.quota_based_type.fields.name,position:s}}}static async getSuiCoin(e,t,r){let i=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),jp);r=r||new fe;let s;if(t>95e10){let[o,...a]=i;a.length>0&&r.mergeCoins(r.object(o.coinObjectId),a.map(c=>r.object(c.coinObjectId))),s=r.splitCoins(r.object(o.coinObjectId),[t])}else s=$e.buildCoinForAmount(r,i,BigInt(t),jp,!1,!0).targetCoin;return s}},Lh=class{static calculatePositionShare(e,t,r,i,s,o,a){if(t<=s||e>=o)return"0";let c=0;e<s?c=s:c=e;let l=0;t<o?l=t:l=o;let u=Ue.tickIndexToSqrtPriceX64(c),d=Ue.tickIndexToSqrtPriceX64(l),{coinA:h,coinB:f}=fr.getCoinAmountFromLiquidity(new B(r),new B(a),u,d,!0);return Q(h.toString()).mul(i).div(1e12).add(f.toString()).toString()}static buildFramsPool(e){let t=et(e);if(t)try{let r=[];return t.rewarders.forEach(i=>{r.push({reward_coin:pe(i.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:t.id.id,clmm_pool_id:t.clmm_pool_id,effective_tick_lower:ir(BigInt(t.effective_tick_lower.fields.bits)),effective_tick_upper:ir(BigInt(t.effective_tick_upper.fields.bits)),total_share:t.total_share,rewarders:r,positions:{positions_handle:t.positions.fields.id.id,size:t.positions.fields.size},sqrt_price:t.sqrt_price}}catch(r){console.log(r)}}static buildFramsPositionNFT(e){let t=et(e);if(t){let r=t.clmm_postion.fields;return{id:t.id.id,url:r.url,pool_id:t.pool_id,coinTypeA:pe(r.coin_type_a.fields.name).full_address,coinTypeB:pe(r.coin_type_b.fields.name).full_address,description:r.description,name:r.name,liquidity:r.liquidity,clmm_position_id:r.id.id,clmm_pool_id:r.pool,tick_lower_index:ir(BigInt(r.tick_lower_index.fields.bits)),tick_upper_index:ir(BigInt(r.tick_upper_index.fields.bits)),rewards:[]}}}},Wu=class{static buildOrderLimitEvent(e,t){let{events:r}=e,i=[];return r&&r.forEach(s=>{let o=pe(s.type).name;if(t.includes(o)){let a={digest:e.digest,type:o,timestampMs:e.timestampMs,parsedJson:s.parsedJson};i.push(a)}}),i}static buildLimitOrderInfo(e){let t=et(e),r=vu(e);if(t&&r)try{let i=pe(r),s={pay_coin_type:i.type_arguments[0],target_coin_type:i.type_arguments[1],canceled_ts:t.canceled_ts==="18446744073709551615"?0:Number(t.canceled_ts),id:t.id.id,obtained_amount:t.obtained_amount,owner:t.owner,rate:t.rate,rate_order_indexer_id:t.rate_order_indexer_id,expire_ts:Number(t.expire_ts),total_pay_amount:t.total_pay_amount,pay_balance:t.pay_balance,target_balance:t.target_balance,claimed_amount:t.claimed_amount,status:"Running",created_ts:Number(t.created_ts)};return s.canceled_ts===0?(s.status="Running",Q(s.pay_balance).eq(0)?s.status="Completed":Q(s.pay_balance).lessThan(s.total_pay_amount)&&(s.status="PartialCompleted")):s.status="Cancelled",s}catch(i){console.log(i)}}static rateToPrice(e,t,r){let i=18+t-r;return Q(10**i).div(e).toString()}static priceToRate(e,t,r){let i=18+t-r;return Q(10).pow(i).div(Q(e)).toFixed(0).toString()}},Ug=class{static async getExchangeRateForStake(e,t,r){let{vaults:i}=e.sdkOptions,{haedal:s}=J(i);if(s===void 0)throw Error("the haedal config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{staking_id:a}=J(s);try{let c=new fe;t?await this.requestStake(e,r||1e9,c):c.moveCall({target:`${s.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[c.object(a)]});let l=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let d=l.events.find(m=>m.type.includes("UserStaked")),{sui_amount:h,st_amount:f}=d.parsedJson;return Q(h).div(f).toString()}let u=l.results[0].returnValues[0][0];return Q(Ow.u64().parse(Uint8Array.from(u))).div(1e6).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,r){var o,a;let{vaults:i}=e.sdkOptions;r=r||new fe;let s=await Si.getSuiCoin(e,t,r);return r.moveCall({target:`${(a=(o=i.config)==null?void 0:o.haedal)==null?void 0:a.published_at}::interface::request_stake`,typeArguments:[],arguments:[r.object(Bn("0x5")),r.object(i.config.haedal.config.staking_id),s,r.pure.address(Bn("0x0"))]}),r}static requestStakeCoin(e,t,r){let{haedal:i}=e.sdkOptions.vaults.config;return t.moveCall({target:`${i.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[t.object(Bn("0x5")),t.object(i.config.staking_id),r,t.pure.address(Bn("0x0"))]})}},Fg=class{static async getExchangeRateForStake(e,t,r){let{vaults:i}=e.sdkOptions,{volo:s}=J(i);if(s===void 0)throw Error("the volo config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{native_pool:a,vsui_metadata:c}=J(s);try{let l=new fe;t?await this.requestStake(e,r||1e9,l):l.moveCall({target:`${s.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[l.object(a),l.object(c)]});let u=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:l,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let f=u.events.find(y=>y.type.includes("StakedEvent")),{cert_amount:m,sui_amount:w}=f.parsedJson;return Q(w).div(m).toString()}let d=u.results[0].returnValues[0][0],h=Q(Ow.u256().parse(Uint8Array.from(d))).div("1000000000000000000").toNumber();return Q(1).div(h).toString()}catch(l){console.log("getExchangeRateForHaedal",l)}return"0"}static async requestStake(e,t,r){let{vaults:i}=e.sdkOptions,{volo:s}=J(i);if(s===void 0)throw Error("the volo config is undefined");r=r||new fe;let{native_pool:o,vsui_metadata:a}=J(s),c=await Si.getSuiCoin(e,t,r);return r.moveCall({target:`${s.published_at}::native_pool::stake`,typeArguments:[],arguments:[r.object(o),r.object(a),r.object(Bn("0x5")),c]}),r}static requestStakeCoin(e,t,r){let{vaults:i}=e.sdkOptions,{volo:s}=J(i);if(s===void 0)throw Error("the volo config is undefined");t=t||new fe;let{native_pool:o,vsui_metadata:a}=J(s);return t.moveCall({target:`${s.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[t.object(o),t.object(a),t.object(Bn("0x5")),r]})}},Lg=class{static async getExchangeRateForStake(e,t,r){let{vaults:i}=e.sdkOptions,{aftermath:s}=J(i);if(s===void 0)throw Error("the aftermath config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{staked_sui_vault:a,safe:c}=J(s);try{let l=new fe;t?await this.requestStake(e,r||1e9,l):l.moveCall({target:`${s.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[l.object(a),l.object(c)]});let u=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:l,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let h=u.events.find(w=>w.type.includes("StakedEvent")),{afsui_amount:f,sui_amount:m}=h.parsedJson;return Q(m).div(f).toString()}let d=u.results[0].returnValues[0][0];return Q(Ow.u128().parse(Uint8Array.from(d))).div(1e18).toString()}catch(l){console.log("getExchangeRateForHaedal",l)}return"0"}static async requestStake(e,t,r){let{vaults:i}=e.sdkOptions,{aftermath:s}=J(i);if(s===void 0)throw Error("the aftermath config is undefined");r=r||new fe;let{staked_sui_vault:o,referral_vault:a,safe:c,validator_address:l}=J(s),u=await Si.getSuiCoin(e,t,r);return r.moveCall({target:`${s.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[r.object(o),r.object(c),r.object(Bn("0x5")),r.object(a),u,r.pure.address(Bn(l))]}),r}static requestStakeCoin(e,t,r){let{vaults:i}=e.sdkOptions,{aftermath:s}=J(i);if(s===void 0)throw Error("the aftermath config is undefined");t=t||new fe;let{staked_sui_vault:o,referral_vault:a,safe:c,validator_address:l}=J(s);return t.moveCall({target:`${s.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[t.object(o),t.object(c),t.object(Bn("0x5")),t.object(a),r,t.pure.address(Bn(l))]})}},tW=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){let{package_id:r}=this._sdk.sdkOptions.ido,i=`${r}_getPoolImmutables`,s=this.getCache(i,t),o={data:[],hasNextPage:!1},a=[];if(s!==void 0&&a.push(...s),a.length===0)try{let c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${r}::oversubscribe_pool::CreatePoolEvent`},e);c.data.forEach(l=>{let u=l.parsedJson;if(u){let d=Gr.buildIdoPoolImmutables(u);a.push(d)}}),o.hasNextPage=c.hasNextPage,o.nextCursor=c.nextCursor,this.updateCache(i,a,De)}catch(c){console.log("getPoolImmutables",c)}return o.data=a,o}async getPools(e=[],t=!1){let r=[],i=[];e.length>0?i=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(o=>{i.push(o.pool_address)});let s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0});for(let o of s){let a=Gr.buildIdoPool(o);await Gr.calculatePoolUiPrice(this._sdk,a),r.push(a);let c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,De)}return r}async getPool(e,t=!0){let r=`${e}_getPoolObject`,i=this.getCache(r,t);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=Gr.buildIdoPool(s);return await Gr.calculatePoolUiPrice(this._sdk,o),this.updateCache(r,o),o}async getIdoConfigs(e=!1){var l;let{package_id:t}=this._sdk.sdkOptions.ido,r=`${t}_getInitEvent`,i=this.getCache(r,e);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=sh(s),a=(l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:l.data,c={pools_id:"",admin_cap_id:"",package_version_id:""};return a.length>0&&(a.forEach(u=>{let d=u.parsedJson;if(d)switch(pe(u.type).full_address){case`${t}::config::InitConfigEvent`:c.admin_cap_id=d.admin_cap_id,c.package_version_id=d.package_version_id;break;case`${t}::factory::InitFactoryEvent`:c.pools_id=d.pools_id;break}}),this.updateCache(r,c,De)),c}async getPurchaseInfo(e,t,r=!0){let i=`${e}_${t}_getPurchaseInfo`,s=this.getCache(i,r);if(s)return s;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),a=Gr.buildPurchaseInfo(et(o));return this.updateCache(i,a,Bi),a}catch{return}}async getLockNFT(e,t=!1){let r=`${e}_getLockNFT`,i=this.getCache(r,t);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!s.error)return Yl(s)}async getLockNFTList(e){var s;let{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:r}=this._sdk.sdkOptions,i=[];try{let o=(s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${r.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:s.data;for(let a of o){let c=et(a);if(c){let l=c.nft.fields,u={locked_at:Number(c.locked_at),lock_duration:Number(c.lock_duration),lock_nft_id:c.id.id,type:c.nft.type,...l};u.end_lock_time=u.locked_at+u.lock_duration,u.coin_type_a=pe(l.coin_type_a.fields.name).full_address,u.coin_type_b=pe(l.coin_type_b.fields.name).full_address,u.id=l.id.id,u.tick_lower_index=ir(BigInt(l.tick_lower_index.fields.bits)),u.tick_upper_index=ir(BigInt(l.tick_upper_index.fields.bits)),i.push(u)}}return i}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPool(e){let{ido:t}=this.sdk.sdkOptions;sw(Ti(e.coin_type_sale),Ti(e.coin_type_raise))&&(e.price_min=Q(1).div(e.price_max).toNumber(),e.price_max=Q(1).div(e.price_min).toNumber());let r=io.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),i=Ue.priceToSqrtPriceX64(Q(e.price_min),e.sale_decimals,e.raise_decimals).toString(),s=Ue.priceToSqrtPriceX64(Q(e.price_max),e.sale_decimals,e.raise_decimals).toString(),o=new fe,a=Q(e.total_supply).add(Q(e.total_supply).mul(Q(e.liquidity_injection_ratio))).toNumber(),c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),l=$e.buildCoinForAmount(o,c,BigInt(a),e.coin_type_sale,!1),u=[o.object(J(t).admin_cap_id),o.object(J(t).package_version_id),o.object(J(t).pools_id),o.object(Ti(e.owner)),o.pure.u128(Q(r).mul(Cl).toString()),o.pure.u64(e.total_supply),o.pure.u64(e.complete_raise_limit),o.pure.u64(e.min_purchase_amount),o.pure.u64(e.max_purchase_amount),o.pure.u64(e.start_time),o.pure.u64(e.purchase_duration),o.pure.u64(e.lock_up_duration),o.pure.u64((e.liquidity_injection_ratio*hA).toString()),o.pure.u128(i),o.pure.u128(s),o.pure.u32(e.tick_spacing),l.targetCoin,o.pure.u64(e.protection_hard_cap.toString()),o.object(ke)],d=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.published_at}::${qz}::create_oversubscribe_pool`,typeArguments:d,arguments:u}),o}async creatPurchasePayload(e){let{ido:t}=this.sdk.sdkOptions,r=new fe,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),o=$e.buildCoinForAmount(r,s,BigInt(e.raise_amount),e.coin_type_raise,!1),a=[e.coin_type_sale,e.coin_type_raise],c,l;return i?(l="purchase",c=[r.object(J(t).package_version_id),r.object(e.pool_address),r.object(i.purchase_certificate_id),r.pure.u64(e.raise_amount.toString()),o.targetCoin,r.object(ke)]):(l="create_certificate_and_purchase",c=[r.object(J(t).package_version_id),r.object(e.pool_address),r.pure.u64(e.raise_amount.toString()),o.targetCoin,r.object(ke)]),r.moveCall({target:`${t.published_at}::${$i}::${l}`,typeArguments:a,arguments:c}),r}async redeemPayload(e){let{ido:t}=this.sdk.sdkOptions,r=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(r===void 0)throw Error("get purchase certificate fail");let i=new fe,s=[e.coin_type_sale,e.coin_type_raise],o=[i.object(J(t).package_version_id),i.object(e.pool_address),i.object(r.purchase_certificate_id),i.object(ke)];return i.moveCall({target:`${t.published_at}::${$i}::redeem`,typeArguments:s,arguments:o}),i}injectLiquidityPayload(e){let{ido:t}=this.sdk.sdkOptions,{clmm_pool:r}=this.sdk.ClmmSDK.sdkOptions,i=new fe,s=[e.coin_type_sale,e.coin_type_raise],o=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[i.object(J(t).package_version_id),i.object(e.pool_address),i.object(J(r).global_config_id),i.object(e.clmm_pool_address),i.object(ke)];return i.moveCall({target:`${t.published_at}::${$i}::${o}`,typeArguments:s,arguments:a}),i}unPauseInjectLiquidity(e){let{ido:t}=this.sdk.sdkOptions,{integrate:r,clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,s=new fe;s.moveCall({target:`${r.published_at}::${fd}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[s.object(J(i).global_config_id),s.object(e.clmm_pool_address)]});let o=[e.coin_type_sale,e.coin_type_raise],a=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",c=[s.object(J(t).package_version_id),s.object(e.pool_address),s.object(J(i).global_config_id),s.object(e.clmm_pool_address),s.object(ke)];return s.moveCall({target:`${t.published_at}::${$i}::${a}`,typeArguments:o,arguments:c}),s}async findClmmPoolForLiquidity(e){let t=null,r=!1,i=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(let s of i){if(s.coinTypeA===e.coin_type_sale&&s.coinTypeB===e.coin_type_raise&&Number(s.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(s.poolAddress);break}if(s.coinTypeA===e.coin_type_raise&&s.coinTypeB===e.coin_type_sale&&Number(s.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(s.poolAddress),r=!0;break}}return t&&(Q(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||Q(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?{is_reverse:r,clmmPool:null}:{is_reverse:r,clmmPool:t}}withdrawPayload(e){let{ido:t}=this.sdk.sdkOptions,r=new fe,i=[e.coin_type_sale,e.coin_type_raise],s=[r.object(J(t).package_version_id),r.object(e.pool_address),r.object(ke)];return r.moveCall({target:`${t.published_at}::${$i}::withdraw`,typeArguments:i,arguments:s}),r}updateWhitelistCapPayload(e){let{ido:t}=this.sdk.sdkOptions,r=new fe,i=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&r.moveCall({target:`${t.published_at}::${$i}::add_white_listed_addresses`,typeArguments:i,arguments:[r.object(J(t).admin_cap_id),r.object(J(t).package_version_id),r.object(e.pool_address),r.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(s=>r.pure.address(Bn(s)))}),r.pure.u64(e.add_whites.protection_limit),r.object(ke)]}),e.remove_whites&&e.remove_whites.length>0&&r.moveCall({target:`${t.published_at}::${$i}::remove_white_listed_addresses`,typeArguments:i,arguments:[r.object(J(t).admin_cap_id),r.object(J(t).package_version_id),r.object(e.pool_address),r.makeMoveVec({type:"address",elements:e.remove_whites.map(s=>r.pure.address(Bn(s)))}),r.object(ke)]}),e.update_whites&&e.update_whites.forEach(s=>{r.moveCall({target:`${t.published_at}::${$i}::update_white_listed_address`,typeArguments:i,arguments:[r.object(J(t).admin_cap_id),r.object(J(t).package_version_id),r.object(e.pool_address),r.object(s.address),r.pure.u64(s.protection_limit),r.object(ke)]})}),r}creatCancelPoolPayload(e){let{ido:t}=this.sdk.sdkOptions,r=new fe,i=[e.coin_type_sale,e.coin_type_raise],s=[r.object(J(t).admin_cap_id),r.object(J(t).package_version_id),r.object(e.pool_address),r.object(ke)];return r.moveCall({target:`${t.published_at}::${$i}::cancel`,typeArguments:i,arguments:s}),r}updatePoolOwnerPayload(e,t){let{ido:r}=this.sdk.sdkOptions;t=t===void 0?new fe:t;let i=[e.coin_type_sale,e.coin_type_raise],s=[t.object(J(r).admin_cap_id),t.object(J(r).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object(ke)];return t.moveCall({target:`${r.published_at}::${$i}::update_pool_owner`,typeArguments:i,arguments:s}),t}updatePoolDuractionPayload(e,t){let{ido:r}=this.sdk.sdkOptions;t=t===void 0?new fe:t;let i=[e.coin_type_sale,e.coin_type_raise],s=[t.object(J(r).admin_cap_id),t.object(J(r).package_version_id),t.object(e.pool_address),t.pure.u64(e.start_time),t.pure.u64(e.purchase_duration),t.pure.u64(e.lock_duration),t.object(ke)];return t.moveCall({target:`${r.published_at}::${$i}::update_pool_duration`,typeArguments:i,arguments:s}),t}updateProtectionHardCapPayload(e,t){let{ido:r}=this.sdk.sdkOptions;t=t===void 0?new fe:t;let i=[e.coin_type_sale,e.coin_type_raise],s=[t.object(J(r).admin_cap_id),t.object(J(r).package_version_id),t.object(e.pool_address),t.pure.u64(e.protection_hard_cap),t.object(ke)];return t.moveCall({target:`${r.published_at}::${$i}::update_protection_hard_cap`,typeArguments:i,arguments:s}),t}unlockNftPayload(e){let{ido:t}=this.sdk.sdkOptions,r=new fe,i=[e.nft_type],s=[r.object(e.lock_nft_id),r.object(ke)];return r.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:s}),r}async isAdminCap(e){let{ido:t}=this._sdk.sdkOptions,r=`${t.package_id}_${e}_isAdminCap`,i=this.getCache(r);if(i)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:J(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(s);let o=vu(s),a=Dp(s),c=!1;return a&&o&&pe(o).source_address===`${t.package_id}::config::AdminCap`&&(c=Ti(a.AddressOwner)===Ti(e)),this.updateCache(r,c,De),c}async getWhiteProtectionLimit(e,t,r=!0){let i=`${e}_${t}_getWhiteProtectionLimit`,s=this._sdk.getCache(i,r);if(s)return s;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(o&&o.data){let a=et(o);return this._sdk.updateCache(i,a.value),a.value}return}catch{return}}async getWhiteList(e,t){var i;let r={type:"address",value:t};try{let s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:r}),o=et(s);if(console.log(o),o)return(i=o==null?void 0:o.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){let{ido:e}=this._sdk.sdkOptions,t=`${J(e).admin_cap_id}_getAdminAddress`,r=this.getCache(t);if(r)return r;let i=await this._sdk.ClmmSDK.fullClient.getObject({id:J(e).admin_cap_id,options:{showType:!0,showOwner:!0}}),s=vu(i),o=Dp(i);if(o&&s&&pe(s).source_address===`${e.package_id}::config::AdminCap`){let a=Ti(o.AddressOwner);return this.updateCache(t,a,De),a}return""}updateCache(e,t,r=De){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e];if(!t&&(r!=null&&r.isValid()))return r.value;delete this._cache[e]}},nW=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){let{xtoken:r}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,s=this.getCache(i,t);if(s!==void 0)return s;let o,a=`${r.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:a}})).data.forEach(c=>{let l=pe(Ls(c)).source_address;if(l===a&&c.data&&c.data.content){let{fields:u}=c.data.content;o={...jm(c),id:u.id.id,index:u.index,type:l,xtoken_balance:u.xtoken_balance},this.updateCache(i,o,De)}}),o}async getOwnerLockTokens(e){let{xtoken:t}=this.sdk.sdkOptions,r=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(let o of s.data)if(pe(Ls(o)).source_address===i&&o.data){let a=Cc.buildLockToken(o.data.content),c=await this.getLockXToken(a.id);c&&(a.xtoken_amount=c.xtoken_amount),r.push(a)}return r}async getLockToken(e){var r;let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((r=t.data)!=null&&r.content){let i=Cc.buildLockToken(t.data.content),s=await this.getLockXToken(i.id);return s&&(i.xtoken_amount=s.xtoken_amount),i}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){let{xtoken:e}=this.sdk.sdkOptions,t=new fe;return t.moveCall({target:`${e.published_at}::${ul}::mint_venft`,typeArguments:[],arguments:[t.object(J(e).xtoken_manager_id)]}),t}async convertPayload(e){let{xtoken:t}=this.sdk.sdkOptions,r=new fe,i=this.buileTokenCoinType(),s=await $e.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,r,BigInt(e.amount),i);return e.venft_id===void 0?r.moveCall({target:`${t.published_at}::${ul}::mint_and_convert`,typeArguments:[],arguments:[r.object(J(t).lock_manager_id),r.object(J(t).xtoken_manager_id),s,r.pure.u64(e.amount)]}):r.moveCall({target:`${t.published_at}::${ul}::convert`,typeArguments:[],arguments:[r.object(J(t).lock_manager_id),r.object(J(t).xtoken_manager_id),s,r.pure.u64(e.amount),r.object(e.venft_id)]}),r}redeemLockPayload(e){let{xtoken:t}=this.sdk.sdkOptions,r=new fe;return r.moveCall({target:`${t.published_at}::${ul}::redeem_lock`,typeArguments:[],arguments:[r.object(J(t).lock_manager_id),r.object(J(t).xtoken_manager_id),r.object(e.venft_id),r.pure.u64(e.amount),r.pure.u64(e.lock_day),r.object(ke)]}),r}redeemPayload(e){let{xtoken:t}=this.sdk.sdkOptions,r=new fe;return r.moveCall({target:`${t.published_at}::${ul}::redeem`,typeArguments:[],arguments:[r.object(J(t).lock_manager_id),r.object(J(t).xtoken_manager_id),r.object(e.venft_id),r.object(e.lock_id),r.object(ke)]}),r}redeemDividendPayload(e,t){let{xtoken_dividends:r}=this.sdk.sdkOptions,i=new fe;return t.forEach(s=>{i.moveCall({target:`${r.published_at}::${Pg}::redeem`,typeArguments:[s],arguments:[i.object(J(r).dividend_manager_id),i.object(e)]})}),i}redeemDividendV2Payload(e,t,r){let{xtoken_dividends:i}=this.sdk.sdkOptions,s=new fe;return t.filter(o=>r.includes(o)).length>0&&(s=this.redeemDividendXTokenPayload(e,s)),t.forEach(o=>{r.includes(o)||s.moveCall({target:`${i.published_at}::${Pg}::redeem_v2`,typeArguments:[o],arguments:[s.object(J(i).dividend_manager_id),s.object(e),s.object(ke)]})}),s}redeemDividendXTokenPayload(e,t){let{xtoken_dividends:r,xtoken:i}=this.sdk.sdkOptions,{xtoken_manager_id:s,lock_manager_id:o}=J(i),{dividend_manager_id:a}=J(r);return t=t===void 0?new fe:t,t.moveCall({target:`${r.published_at}::${Pg}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(s),t.object(a),t.object(e),t.object(ke)]}),t}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,t="xtoken",r="XTOKEN"){return`${e}::${t}::${r}`}cancelRedeemPayload(e){let{xtoken:t}=this.sdk.sdkOptions,r=new fe;return r.moveCall({target:`${t.published_at}::${ul}::cancel_redeem_lock`,typeArguments:[],arguments:[r.object(J(t).lock_manager_id),r.object(J(t).xtoken_manager_id),r.object(e.venft_id),r.object(e.lock_id),r.object(ke)]}),r}async getInitConfigs(){var a,c;let{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,r=this.getCache(t);if(r!==void 0)return r;let i=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:a.data,s={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(l=>{let u=l.parsedJson;u&&(s.xtoken_manager_id=u.xtoken_manager)});let o=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:c.data;return o.length>0&&o.forEach(l=>{let u=l.parsedJson;u&&(s.lock_manager_id=u.lock_manager)}),s.lock_handle_id=(await this.getLockUpManager(s.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(t,s,De),s}async getLockUpManager(e=J(this.sdk.sdkOptions.xtoken).lock_manager_id,t=!1){let r=`${e}_getLockUpManagerEvent`,i=this.getCache(r,t);if(i!==void 0)return i;let s=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=Cc.buildLockUpManager(et(s));return this.updateCache(r,o,De),o}async getLockInfoHandle(e){let t=`${e}_getLockInfoHandle`,r=this.getCache(t);if(r!==void 0)return r;let i="",s=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=et(s);return o&&(i=o.lock_infos.fields.id.id,this.updateCache(t,i,De)),i}async getDividendConfigs(){var o;let{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,r=this.getCache(t);if(r!==void 0)return r;let i=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:o.data,s={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(a=>{let c=a.parsedJson;c&&(s.dividend_manager_id=c.manager_id,s.dividend_admin_id=c.admin_id,s.dividend_settle_id=c.settle_id,this.updateCache(t,s,De))}),s}async getDividendManager(e=!1){let{dividend_manager_id:t}=J(this.sdk.sdkOptions.xtoken_dividends),r=`${t}_getDividendManager`,i=this.getCache(r,e);if(i!==void 0)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=et(s),a=Cc.buildDividendManager(o);return this.updateCache(r,a,De),a}async getXcetusManager(e=!0){let{xtoken_manager_id:t}=J(this.sdk.sdkOptions.xtoken),r=`${t}_getXcetusManager`,i=this.getCache(r,e);if(i)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=et(s),a={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(r,a),a}async getVeNFTDividendInfo(e,t){try{let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=et(r);return Cc.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let r=await this.getLockUpManager(),i=Q(es).mul(Q(r.max_lock_day).sub(Q(t))).mul(Q(r.max_percent_numerator).sub(Q(r.min_percent_numerator))).div(Q(r.max_lock_day).sub(Q(r.min_lock_day))),s=Q(es).mul(Q(r.max_percent_numerator)).sub(i).div(Q(Rp)).div(es);return{amountOut:Q(s).mul(Q(e)).round().toString(),percent:s.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let r=await this.getLockUpManager(),i=Q(es).mul(Q(r.max_lock_day).sub(Q(t))).mul(Q(r.max_percent_numerator).sub(Q(r.min_percent_numerator))).div(Q(r.max_lock_day).sub(Q(r.min_lock_day))),s=Q(es).mul(Q(r.max_percent_numerator)).sub(i).div(Q(Rp)).div(es);return{amountOut:Q(e).div(s).toFixed(0,ue.ROUND_UP),percent:s.toString()}}async getLockXToken(e){let{lock_handle_id:t}=J(this._sdk.sdkOptions.xtoken),r=`${e}_getXTokenAmount`,i=this.getCache(r);if(i)return i;try{let s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=et(s);if(o){let a=o.value.fields.value.fields;return this.updateCache(r,a,De),a}}catch{}}async getVeNftAmount(e,t){try{let r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=et(r);if(i){let{lock_amount:s,xtoken_amount:o}=i.value.fields.value.fields;return{lock_amount:s,xtoken_amount:o}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){let r=(await this.getDividendManager()).dividends.id,i=`${r}_${e}_getPhaseDividendInfo`,s=this._sdk.getCache(i,t);if(s)return s;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:r,name:{type:"u64",value:e}}),a=et(o),c=a.value.fields.value.fields,l=c.redeemed_num.fields.contents.map(f=>({name:f.fields.key.fields.name,value:f.fields.value})),u=c.bonus_types.map(f=>f.fields.name),d=c.bonus.fields.contents.map(f=>({name:f.fields.key.fields.name,value:f.fields.value})),h={id:Rs(o),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:l,is_settled:c.is_settled,bonus_types:u,bonus:d,phase_end_time:""};return this.updateCache(i,h),h}catch{}}updateCache(e,t,r=Bi){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e];if(!t&&(r!=null&&r.isValid()))return r.value;delete this._cache[e]}},rW=class{constructor(n){v(this,"_sdk");v(this,"_cache",{});this._sdk=n}get sdk(){return this._sdk}async addMasterLiquidity(n){var w,y;let{liquidity_stratefy:e}=this._sdk.sdkOptions,{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),i=Q(0),s=Q(0),o=[],a=[],c=[],l=[],u=[];n.liquidity_bins.forEach((C,A)=>{let M=n.amounts_a[A],H=n.amounts_b[A],G=n.bins_fix_amount_a[A];i=i.add(M),s=s.add(H),o.push(M),a.push(H),c.push(Ir(BigInt(C.tick_lower)).toString()),l.push(Ir(BigInt(C.tick_upper)).toString()),u.push(G)});let d=[n.coinTypeA,n.coinTypeB],h=new fe,f=(w=$e.buildAddLiquidityFixTokenCoinInput(h,!n.fix_amount_a,i.toString(),n.slippage,n.coinTypeA,r,!1))==null?void 0:w.targetCoin,m=(y=$e.buildAddLiquidityFixTokenCoinInput(h,n.fix_amount_a,s.toString(),n.slippage,n.coinTypeB,r,!1))==null?void 0:y.targetCoin;return Zz(n)?h.moveCall({target:`${e.published_at}::router::increase_liquidity`,typeArguments:d,arguments:[h.object(J(e).master_manger_id),h.object(n.master_address),h.object(J(t).global_config_id),h.object(n.pool_address),f,m,h.makeMoveVec({elements:o.map(C=>h.pure.u64(C))}),h.makeMoveVec({elements:a.map(C=>h.pure.u64(C))}),h.makeMoveVec({elements:u.map(C=>h.pure.bool(C))}),h.object(ke)]}):h.moveCall({target:`${e.published_at}::router::create_master_liquidity`,typeArguments:d,arguments:[h.object(J(e).master_manger_id),h.object(J(t).global_config_id),h.object(n.pool_address),f,m,h.makeMoveVec({elements:c.map(C=>h.pure.u32(Number(C)))}),h.makeMoveVec({elements:l.map(C=>h.pure.u32(Number(C)))}),h.makeMoveVec({elements:o.map(C=>h.pure.u64(C))}),h.makeMoveVec({elements:a.map(C=>h.pure.u64(C))}),h.makeMoveVec({elements:u.map(C=>h.pure.bool(C))}),h.pure.u8(n.strategy),h.pure.u32(Number(Ir(BigInt(n.tick_lower)).toString())),h.pure.u32(Number(Ir(BigInt(n.tick_upper)).toString())),h.object(ke)]}),h}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(n,e=[]){let t=[],r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(n,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),i=e.length>0;for(let s of r.data)if(pe(s.data.type).full_address===this.buildMasterNFTType()){let o=No.buildMasterNFT(s);if(o){let a=`${o.id}_masterNFT`;this.updateCache(a,o,De),i?e.includes(o.pool_id)&&t.push(o):t.push(o)}}return t}async getMasterNFT(n,e=!1){let t="$masterId}_masterNFT",r=this.getCache(t,e);if(r)return r;try{let i=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(pe(i.data.type).full_address===this.buildMasterNFTType()){let s=No.buildMasterNFT(i);return s&&this.updateCache(t,s,De),s}}catch(i){console.log(i)}}async fetchMasterPositionInfos(n){var o;let e={},{clmm_pool:t,integrate:r,simulationAccount:i}=this.sdk.ClmmSDK.sdkOptions,s=new fe;return n.forEach(a=>{a.position_ids.forEach(c=>{let l=[a.coinTypeA,a.coinTypeB],u=[s.object(J(t).global_config_id),s.object(a.pool_id),s.object(c)];s.moveCall({target:`${r.published_at}::${cs}::fetch_position_fees`,arguments:u,typeArguments:l}),s.moveCall({target:`${r.published_at}::${cs}::fetch_position_rewards`,arguments:[...u,s.object(ke)],typeArguments:l})})}),(o=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:i.address})).events)==null||o.forEach(a=>{let{parsedJson:c}=a,{position_id:l}=c,u=e[l];switch(u===void 0&&(u={position_id:l,feeOwedA:"0",feeOwedB:"0",rewarders:[]},e[l]=u),pe(a.type).name){case"FetchPositionFeesEvent":u.feeOwedA=c.fee_owned_a,u.feeOwedB=c.fee_owned_b;break;case"FetchPositionRewardsEvent":u.rewarders=c.data;break}}),e}async getLiquidityStrategyConfigs(n=!1){let{package_id:e}=this._sdk.sdkOptions.liquidity_stratefy,t=`${e}_getLiquidityStrategyConfigst`,r=this.getCache(t,n);if(r!==void 0)return r;let i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,s={master_manger_id:"",master_liquidity_handle:""};if(i.length>0){for(let o of i){let a=o.parsedJson;s.master_manger_id=a.id;let c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),l=et(c);s.master_liquidity_handle=l.position_maps.fields.id.id;break}this.updateCache(t,s,De)}return s}removeMasterLiquidity(n){let{clmm_pool:e}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:t}=this.sdk.sdkOptions,r=new fe,i=[n.coinTypeA,n.coinTypeB];this.collectReward({coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB,collect_fee:!1,rewarder_coin_types:n.rewarder_coin_types,master_address:n.master_address,pool_address:n.pool_address},r);let s=[r.object(J(t).master_manger_id),r.object(n.pool_address),r.object(n.master_address),r.object(J(e).global_config_id),r.makeMoveVec({elements:n.delta_liquidities.map(o=>r.pure.u128(o))}),r.makeMoveVec({elements:n.min_amounts_a.map(o=>r.pure.u64(o))}),r.makeMoveVec({elements:n.min_amounts_a.map(o=>r.pure.u64(o))}),r.object(ke)];return r.moveCall({target:`${t.published_at}::${Fh}::remove_liquidity`,typeArguments:i,arguments:s}),r}closeMasterLiquidity(n){let{clmm_pool:e}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:t}=this.sdk.sdkOptions,r=new fe,i=[n.coinTypeA,n.coinTypeB];return this.collectReward({coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB,collect_fee:!1,rewarder_coin_types:n.rewarder_coin_types,master_address:n.master_address,pool_address:n.pool_address},r),r.moveCall({target:`${t.published_at}::${Fh}::close_master_liquidity`,typeArguments:i,arguments:[r.object(J(t).master_manger_id),r.object(n.master_address),r.object(J(e).global_config_id),r.object(n.pool_address),r.makeMoveVec({elements:n.min_amounts_a.map(s=>r.pure.u64(s))}),r.makeMoveVec({elements:n.min_amounts_a.map(s=>r.pure.u64(s))}),r.object(ke)]}),r}collectFee(n,e){let{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:r}=this.sdk.sdkOptions;e=e===void 0?new fe:e;let i=[n.coinTypeA,n.coinTypeB],s=[e.object(J(r).master_manger_id),e.object(n.master_address),e.object(J(t).global_config_id),e.object(n.pool_address)];return e.moveCall({target:`${r.published_at}::${Fh}::collect_fee`,typeArguments:i,arguments:s}),e}collectReward(n,e){let{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:r}=this.sdk.sdkOptions;return e=e===void 0?new fe:e,n.collect_fee&&this.collectFee({...n},e),n.rewarder_coin_types.forEach(i=>{let s=[n.coinTypeA,n.coinTypeB,i];if(e){let o=[e.object(J(r).master_manger_id),e.object(n.master_address),e.object(J(t).global_config_id),e.object(n.pool_address),e.object(J(t).global_vault_id),e.object(ke)];e.moveCall({target:`${r.published_at}::${Fh}::collect_reward`,typeArguments:s,arguments:o})}}),e}updateCache(n,e,t=Bi){let r=this._cache[n];r?(r.overdueTime=Mt(t),r.value=e):r=new Er(e,Mt(t)),this._cache[n]=r}getCache(n,e=!1){let t=this._cache[n],r=t==null?void 0:t.isValid();if(!e&&r)return t.value;r||delete this._cache[n]}},iW=class{constructor(n){v(this,"_sdk");v(this,"_cache",{});this._sdk=n}get sdk(){return this._sdk}buildCoinInput(n,e,t,r,i){let{selectedCoins:s,remainingCoins:o}=At.selectCoinAssetGreaterThanOrEqual(e,BigInt(r)),a=At.calculateTotalBalance(s);if(a<BigInt(r))throw new Error(`The amount(${a}) is Insufficient balance for ${t} , expect ${r} `);let c=a-BigInt(r),l;if(At.isSuiCoin(t))l=n.splitCoins(n.gas,[n.pure.u64(r)]);else{let[u,...d]=s.map(h=>h.coinObjectId);l=n.object(u),d.length>0?i?n.mergeCoins(l,[...d.map(h=>n.object(h)),i]):n.mergeCoins(l,[...d.map(h=>n.object(h))]):i&&n.mergeCoins(l,[i])}return{selectedUnusedAmount:c,coinInput:l,remainingCoins:o}}async deposit(n){var d,h;let{vaults:e,frams:t}=this._sdk.sdkOptions,{clmm_pool:r}=this._sdk.ClmmSDK.sdkOptions,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),s=new fe,o,a;if(n.swapParams){let f=await this.handleDepositSwap(n,s,i);o=f.primaryCoinAInputs,a=f.primaryCoinBInputs}else o=(d=$e.buildAddLiquidityFixTokenCoinInput(s,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,i,!1))==null?void 0:d.targetCoin,a=(h=$e.buildAddLiquidityFixTokenCoinInput(s,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,i,!1))==null?void 0:h.targetCoin;let c=J(e),l=J(t),u=J(r);return s.moveCall({target:`${e.published_at}::${Qz}::deposit`,typeArguments:[n.coinTypeA,n.coinTypeB,n.lp_token_type],arguments:[s.object(c.vaults_manager_id),s.object(n.vault_id),s.object(l.rewarder_manager_id),s.object(l.global_config_id),s.object(n.farming_pool),s.object(u.global_config_id),s.object(n.clmm_pool),o,a,s.pure.u64(n.amount_a),s.pure.u64(n.amount_b),s.pure.bool(n.fix_amount_a),s.object(ke)]}),s}async handleDepositSwap(n,e,t){let{clmm_pool:r,integrate:i}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:s,a2b:o,route_obj:a,stakeProtocol:c}=n.swapParams,l=o?n.coinTypeA:n.coinTypeB,u=$e.buildCoinForAmount(e,t,BigInt(s),l,!1),d=BigInt(u.tragetCoinAmount)-BigInt(s),h=[];if(c){let C=this.requestStakeCoin(c,e,u.targetCoin),A=$e.buildCoinForAmount(e,u.remainCoins,BigInt(0),l,!1).targetCoin;h=o?[A,C]:[C,A]}else if(a){let C=$e.buildCoinForAmount(e,t,0n,o?n.coinTypeB:n.coinTypeA,!1),A=await $e.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,a,u,C,"",n.slippage,e);h=o?[A.fromCoin,A.toCoin]:[A.toCoin,A.fromCoin],!C.isMintZeroCoin&&C.originalSplitedCoin===void 0&&e.transferObjects([C.targetCoin],e.pure.address(this._sdk.getVerifySenderAddress()))}else{let C=$e.buildCoinForAmount(e,t,0n,o?n.coinTypeB:n.coinTypeA,!1),A=ro.getDefaultSqrtPriceLimit(o).toString();h=e.moveCall({target:`${i.published_at}::${Ec}::swap`,typeArguments:[n.coinTypeA,n.coinTypeB],arguments:[e.object(J(r).global_config_id),e.object(n.clmm_pool),o?u.targetCoin:C.targetCoin,o?C.targetCoin:u.targetCoin,e.pure.bool(o),e.pure.bool(!0),e.pure.u64(s),e.pure.u128(A),e.pure.bool(!1),e.object(ke)]})}let f,m,w=h[0],y=h[1];if(o){let C=BigInt(n.amount_a)-d;At.isSuiCoin(l)?(e.transferObjects([w],e.pure.address(this._sdk.getVerifySenderAddress())),f=e.splitCoins(e.gas,[e.pure.u64(n.amount_a)])):C>0n?f=this.buildCoinInput(e,u.remainCoins,l,C,w).coinInput:f=w,m=y}else{f=w;let C=BigInt(n.amount_b)-d;At.isSuiCoin(l)?(e.transferObjects([y],e.pure.address(this._sdk.getVerifySenderAddress())),m=e.splitCoins(e.gas,[e.pure.u64(n.amount_b)])):C>0n?m=this.buildCoinInput(e,u.remainCoins,l,C,y).coinInput:m=y}return{primaryCoinAInputs:f,primaryCoinBInputs:m}}async remove(n){let{vaults:e,frams:t}=this.sdk.sdkOptions,{clmm_pool:r,integrate:i}=this._sdk.ClmmSDK.sdkOptions,s=new fe,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),n.lp_token_type),a=$e.buildCoinForAmount(s,o,BigInt(n.lp_token_amount),n.lp_token_type,!1).targetCoin,c=J(e),l=J(t),u=J(r),d=[n.coinTypeA,n.coinTypeB,n.lp_token_type],h=s.moveCall({target:`${e.published_at}::${Hz}::remove`,typeArguments:d,arguments:[s.object(c.vaults_manager_id),s.object(n.vault_id),s.object(l.rewarder_manager_id),s.object(l.global_config_id),s.object(n.farming_pool),s.object(u.global_config_id),s.object(n.clmm_pool),a,s.pure.u64(n.lp_token_amount),s.pure.u64(n.min_amount_a),s.pure.u64(n.min_amount_b),s.object(ke)]}),f=h[0],m=h[1];if(n.swapParams){let{a2b:w,swap_amount:y,route_obj:C}=n.swapParams;if(C){let A={targetCoin:w?f:m,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},M={targetCoin:w?m:f,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},H=await $e.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,C,A,M,"",n.slippage,s),G=w?[H.fromCoin,H.toCoin]:[H.toCoin,H.fromCoin];w?s.mergeCoins(G[1],[m]):s.mergeCoins(G[0],[f]),s.transferObjects([...G],s.pure.address(this._sdk.getVerifySenderAddress()))}else{let A=ro.getDefaultSqrtPriceLimit(w).toString(),M=s.moveCall({target:`${i.published_at}::${Ec}::swap`,typeArguments:[n.coinTypeA,n.coinTypeB],arguments:[s.object(J(r).global_config_id),s.object(n.clmm_pool),f,m,s.pure.bool(w),s.pure.bool(!0),s.pure.u64(y),s.pure.u128(A),s.pure.bool(!0),s.object(ke)]});s.transferObjects([M[0],M[1]],s.pure.address(this._sdk.getVerifySenderAddress()))}}else s.transferObjects([f,m],s.pure.address(this._sdk.getVerifySenderAddress()));return s}async getVaultList(n="all"){let{vaults:e}=this._sdk.sdkOptions,t=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e.package_id}::vaults::CreateEvent`},n),r=t.data.map(o=>o.parsedJson.id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),s=[];return i.forEach(o=>{let a=Si.buildPool(o);a&&(a.stake_protocol=this.findStakeProtocol(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),s.push(a))}),t.data=s,t}findStakeProtocol(n,e){let{haedal:t,volo:r,aftermath:i}=J(this._sdk.sdkOptions.vaults),s=pe(n).full_address,o=pe(e).full_address;if(At.isSuiCoin(s)||At.isSuiCoin(o)){if(t){let a=pe(J(t).coin_type).full_address;if(s===a||o===a)return"Haedal"}if(r){let a=pe(J(r).coin_type).full_address;if(s===a||o===a)return"Volo"}if(i){let a=pe(J(i).coin_type).full_address;if(s===a||o===a)return"aftermath"}}}savePoolToCache(n){let e=`${n.id}_mirrorPool`;this.updateCache(e,n,De)}readPoolFromCache(n,e=!1){let t=`${n}_mirrorPool`;return this.getCache(t,e)}async calculateMaxAvailable(n){var m;let{integrate:e,simulationAccount:t}=this.sdk.ClmmSDK.sdkOptions,r=new fe,i=Ue.tickIndexToSqrtPriceX64(n.lowerTick),s=Ue.tickIndexToSqrtPriceX64(n.upperTick),o=new B(n.curSqrtPrice),a=fr.getCoinAmountFromLiquidity(new B(n.input_amount),o,i,s,!1),c=[n.coinTypeA,n.coinTypeB];r.moveCall({target:`${e.published_at}::${cs}::calculate_swap_result`,arguments:[r.object(n.clmm_pool),r.pure.bool(!0),r.pure.bool(!0),r.pure.u64(a.coinA.toString())],typeArguments:c}),r.moveCall({target:`${e.published_at}::${cs}::calculate_swap_result`,arguments:[r.object(n.clmm_pool),r.pure.bool(!1),r.pure.bool(!0),r.pure.u64(a.coinB.toString())],typeArguments:c});let l=(m=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:t.address})).events)==null?void 0:m.filter(w=>pe(w.type).name==="CalculatedSwapResultEvent");if(l.length===0)return null;let u=l[0].parsedJson.data,d=l[1].parsedJson.data,h=Q(a.coinB.toString()).add(u.amount_out),f=Q(a.coinA.toString()).add(d.amount_out);return{maxAmountB:h,maxAmountA:f}}async calculateRemoveSwapAmount(n,e){let t=Si.calculateDepositRatio(n.lowerTick,n.upperTick,new B(n.curSqrtPrice)),r=n.fix_amount_a?t.ratioA:t.ratioB,i=Q(n.receive_amount).mul(r),s,o;if(n.removeLiquidity){let w=Ue.tickIndexToSqrtPriceX64(n.lowerTick),y=Ue.tickIndexToSqrtPriceX64(n.upperTick),C=fr.getCoinAmountFromLiquidity(new B(n.removeLiquidity),new B(n.curSqrtPrice),w,y,!1);o=n.removeLiquidity,s=n.fix_amount_a?C.coinB.toString():C.coinA.toString(),i=n.fix_amount_a?Q(C.coinA.toString()):Q(C.coinB.toString())}else{let w=fr.estLiquidityAndcoinAmountFromOneAmounts(n.lowerTick,n.upperTick,new B(i.toFixed(0)),n.fix_amount_a,!1,.2,new B(n.curSqrtPrice));o=w.liquidityAmount.toString(),s=n.fix_amount_a?w.coinAmountB.toString():w.coinAmountA.toString()}let a=!n.fix_amount_a,c=await this.clmmPreSwap(n.clmm_pool,n.curSqrtPrice,a,Q(s),n.coinTypeA,n.coinTypeB,!0,n.priceSplitPoint,n.use_route,[{pool_id:n.clmm_pool,tick_lower:n.lowerTick,tick_upper:n.upperTick,delta_liquidity:Number(o),is_increase:!1}]),l=i.add(c.amount_out),u=Q(n.receive_amount),d=u.sub(l);if((!n.removeLiquidity||n.removeLiquidity&&e)&&d.abs().greaterThan(u.mul(.01))){let w=l.lessThan(u),y,C;e?w?(y=Q(o),C=e.right):(y=e.left,C=Q(o)):(y=Q(w?o:0),C=Q(w?n.maxLiquidity:o));let A=Q(y).add(C).div(2).toFixed(0);if(!e||e&&e.count<15&&y<C)return await this.calculateRemoveSwapAmount({...n,removeLiquidity:A},{left:y,right:C,count:e?e.count+1:0})}let h=c.amount_in&&c.fee_amount?new B(c.amount_in).add(new B(c.fee_amount)).toString():c.amount_in,f=c.amount_out,{is_exceed:m}=c;return{swapInAmount:h,swapOutAmount:f,liquidity:o,is_exceed:m,routeObj:c.route_obj,request_id:n.request_id}}async calculateStakeDepositFixSui(n){let e=n.inputSuiAmount.mul(n.remainRate),t=n.inputSuiAmount.sub(n.swapSuiAmount),r=n.exchangeRate?n.exchangeRate:await this.getExchangeRateForStake(n.stakeProtocol,n.shouldRequestStake,Number(n.swapSuiAmount.toFixed(0))),i=n.swapSuiAmount.div(r).toFixed(0),s=fr.estLiquidityAndcoinAmountFromOneAmounts(n.lowerTick,n.upperTick,new B(i.toString()),!n.fixCoinA,!0,0,new B(n.curSqrtPrice)),o=n.fixCoinA?s.coinAmountA.toString():s.coinAmountB.toString(),a=Q(t).sub(o);return a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(e)||n.rebalanceCount>12||n.leftSuiAmount.greaterThanOrEqualTo(n.rightSuiAmount)?{swapInAmount:n.swapSuiAmount.toFixed(0),swapOutAmount:i,afterSqrtPrice:n.curSqrtPrice,fixAmountA:!n.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:n.stakeProtocol}:a.lessThan(0)?await this.calculateStakeDepositFixSui({...n,rightSuiAmount:n.swapSuiAmount,swapSuiAmount:n.swapSuiAmount.add(n.leftSuiAmount).div(2),exchangeRate:r,rebalanceCount:n.rebalanceCount+1}):a.greaterThan(e)?await this.calculateStakeDepositFixSui({...n,leftSuiAmount:n.swapSuiAmount,swapSuiAmount:n.swapSuiAmount.add(n.rightSuiAmount).div(2),exchangeRate:r,rebalanceCount:n.rebalanceCount+1}):null}async calculateDepositSwapAmount(n,e=!1){let t=Ue.sqrtPriceX64ToTickIndex(new B(n.curSqrtPrice)),{ratioA:r,ratioB:i}=Si.calculateDepositRatio(n.lowerTick,n.upperTick,new B(n.curSqrtPrice)),s=Q(n.input_amount).mul(n.fix_amount_a?r:i),o=Q(n.input_amount).sub(s),a=n.fix_amount_a;if(o.toFixed(0)==="0")return null;if(n.stakeProtocol){if(At.isSuiCoin(n.coinTypeA)&&n.fix_amount_a||At.isSuiCoin(n.coinTypeB)&&!n.fix_amount_a){let G=await this.calculateStakeDepositFixSui({inputSuiAmount:Q(n.input_amount),swapSuiAmount:o,lowerTick:n.lowerTick,upperTick:n.upperTick,curSqrtPrice:n.curSqrtPrice,remainRate:n.remainRate?n.remainRate:.01,fixCoinA:n.fix_amount_a,rebalanceCount:0,shouldRequestStake:n.shouldRequestStake,leftSuiAmount:a?new ue(o.toFixed(0)):new ue(0),rightSuiAmount:a?new ue(n.input_amount):new ue(o.toFixed(0)),stakeProtocol:n.stakeProtocol});return G?{...G,request_id:n.request_id}:null}throw Error("Only support fix sui")}let c=t<n.lowerTick||t>n.upperTick,l={clmm_pool:n.clmm_pool,curSqrtPrice:n.curSqrtPrice,a2b:a,amount_a:a?new ue(n.input_amount):new ue(0),amount_b:a?new ue(0):new ue(n.input_amount),amount_left:a?new ue(o.toFixed(0)):new ue(0),amount_right:a?new ue(n.input_amount):new ue(o.toFixed(0)),lowerTick:n.lowerTick,upperTick:n.upperTick,tick_spacing:2,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB,useRoute:n.use_route,remainRate:n.remainRate?n.remainRate:.01,priceSplitPoint:n.priceSplitPoint},u=e&&t<=n.upperTick,d=u?await this.calculateRebalance(l):await this.clmmPreSwap(n.clmm_pool,n.curSqrtPrice,a,o,n.coinTypeA,n.coinTypeB,!0,n.priceSplitPoint,n.use_route),h=d.after_sqrt_price,f=Ue.sqrtPriceX64ToTickIndex(new B(h)),m=f<n.lowerTick||f>n.upperTick;if(c!==m&&!u&&f<=n.upperTick){let{ratioA:G,ratioB:q}=Si.calculateDepositRatio(n.lowerTick,n.upperTick,new B(h));o=Q(n.input_amount).sub(Q(n.input_amount).mul(n.fix_amount_a?G:q)),l.amount_left=a?new ue(o.toFixed(0)):new ue(0),l.amount_right=a?new ue(n.input_amount):new ue(o.toFixed(0)),d=await this.calculateRebalance(l),h=d.after_sqrt_price,Ue.sqrtPriceX64ToTickIndex(new B(h))}let{ratioA:w,ratioB:y}=Si.calculateDepositRatio(n.lowerTick,n.upperTick,new B(h)),C=y.div(w).sub(i.div(r)).greaterThan("0"),A=d.amount_in&&d.fee_amount?new B(d.amount_in).add(new B(d.fee_amount)).toString():d.amount_in,M=d.amount_out,{is_exceed:H}=d;if(f<n.lowerTick)C=!0;else if(f>n.upperTick)C=!1;else{let G=C===a?new B(Q(n.input_amount).sub(A).toString()):new B(M),q=fr.estLiquidityAndcoinAmountFromOneAmounts(n.lowerTick,n.upperTick,G,C,!0,0,new B(h)),X=q.coinAmountA,E=q.coinAmountB;Q(n.fix_amount_a?X.toString():E.toString()).add(A).greaterThanOrEqualTo(n.input_amount)&&(C=!C)}return{swapInAmount:A,swapOutAmount:M,afterSqrtPrice:h,is_exceed:H,fixAmountA:C,routeObj:d.route_obj,request_id:n.request_id,use_Haedal_stake:!1}}async calculateHaedalDepositSwapAmount(n){Ue.sqrtPriceX64ToTickIndex(new B(n.curSqrtPrice));let{ratioA:e,ratioB:t}=Si.calculateDepositRatio(n.lowerTick,n.upperTick,new B(n.curSqrtPrice)),r=Q(n.input_amount).mul(n.fix_amount_a?e:t),i=Q(n.input_amount).sub(r),s=n.fix_amount_a;if(i.toFixed(0)==="0")return null;if(n.stakeProtocol){if(At.isSuiCoin(n.coinTypeA)&&n.fix_amount_a||At.isSuiCoin(n.coinTypeB)&&!n.fix_amount_a){let o=await this.calculateStakeDepositFixSui({inputSuiAmount:Q(n.input_amount),swapSuiAmount:i,lowerTick:n.lowerTick,upperTick:n.upperTick,curSqrtPrice:n.curSqrtPrice,remainRate:n.remainRate?n.remainRate:.01,fixCoinA:n.fix_amount_a,rebalanceCount:0,shouldRequestStake:n.shouldRequestStake,leftSuiAmount:s?new ue(i.toFixed(0)):new ue(0),rightSuiAmount:s?new ue(n.input_amount):new ue(i.toFixed(0)),stakeProtocol:n.stakeProtocol});return o?{...o,request_id:n.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(n){let{clmm_pool:e,a2b:t,curSqrtPrice:r,amount_a:i,amount_b:s,lowerTick:o,upperTick:a,amount_left:c,amount_right:l,coinTypeA:u,coinTypeB:d,useRoute:h,priceSplitPoint:f,remainRate:m}=n,w=async(y,C,A)=>{let M=y.plus(C).div(2),H=await this.clmmPreSwap(e,r,t,M,u,d,!0,f,h);if(H.amount_out==="0")return H;if(H.after_sqrt_price||(H.after_sqrt_price=n.curSqrtPrice),H.is_exceed)return C=M,w(y,C);let G=t?i.sub(H.amount_in):i.add(H.amount_out),q=t?s.add(H.amount_out):s.sub(H.amount_in);Ue.sqrtPriceX64ToTickIndex(new B(H.after_sqrt_price));let X=fr.estLiquidityAndcoinAmountFromOneAmounts(o,a,new B(G.toString()),!0,!0,1,new B(H.after_sqrt_price)),E=new ue(X.coinAmountA.toString()),j=new ue(X.coinAmountB.toString());if(E.toString()!==G.toString())throw new Error("usedA does not match afterA");if(q.lessThan(j))t?y=M:C=M;else{t?C=M:y=M;let R=q.sub(j);if(q.mul(m).sub(R).greaterThanOrEqualTo(0))return{...H,remainingB:R}}return y.greaterThan(C)||C.sub(y).lessThan(10)?H:w(y,C)};return c.greaterThanOrEqualTo(l)?w(new ue(0),c):w(c,l)}async clmmPreSwap(n,e,t,r,i,s,o,a,c,l){var y;if(c)try{let C=await this._sdk.ClmmSDK.RouterV2.getBestRouter(t?i:s,t?s:i,Number(r.toFixed(0)),o,a,"",void 0,void 0,!0,!1,l);if(!C.result)throw new Error("route unavailable");let{result:A}=C,M=e;return A.splitPaths.forEach(H=>{let G=H.basePaths.find(q=>q.poolAddress.toLowerCase()===n.toLowerCase());G&&(M=G.afterSqrtPrice.toString())}),{amount_in:A.inputAmount.toString(),amount_out:A.outputAmount.toString(),after_sqrt_price:M,is_exceed:A.isExceed,route_obj:A}}catch{throw new Error("route unavailable")}let{integrate:u,simulationAccount:d}=this.sdk.ClmmSDK.sdkOptions,h=new fe,f=[i,s],m=[h.object(n),h.pure.bool(t),h.pure.bool(o),h.pure.u64(r.toFixed(0))];h.moveCall({target:`${u.published_at}::${cs}::calculate_swap_result`,arguments:m,typeArguments:f});let w=(y=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:h,sender:d.address})).events)==null?void 0:y.filter(C=>pe(C.type).name==="CalculatedSwapResultEvent");return w.length===0?null:w[0].parsedJson.data}async getVault(n,e=!1){let t=this.readPoolFromCache(n,e);if(t)return t;try{let r=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),i=Si.buildPool(r);if(i)return i.stake_protocol=this.findStakeProtocol(i.position.coinTypeA,i.position.coinTypeB),this.savePoolToCache(i),i}catch(r){console.log(r)}}async getVaultsConfigs(n=!1){let{package_id:e}=this._sdk.sdkOptions.vaults,t=`${e}_getMirrorPoolConfigs`,r=this.getCache(t,n);if(r!==void 0)return r;let i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::vaults::InitEvent`})).data,s={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(i.length>0){for(let o of i){let a=o.parsedJson;s.admin_cap_id=a.admin_cap_id,s.vaults_manager_id=a.manager_id;let c=await this._sdk.ClmmSDK.fullClient.getObject({id:s.vaults_manager_id,options:{showContent:!0}}),l=et(c);s.vaults_pool_handle=l.vault_to_pool_maps.fields.id.id;break}this.updateCache(t,s,De)}return s}async getExchangeRateForStake(n,e,t){return n==="Haedal"?await Ug.getExchangeRateForStake(this._sdk,e,t):n==="Volo"?await Fg.getExchangeRateForStake(this._sdk,e,t):n==="aftermath"?await Lg.getExchangeRateForStake(this._sdk,e,t):"0"}requestStakeCoin(n,e,t){if(n==="Haedal")return Ug.requestStakeCoin(this._sdk,e,t);if(n==="Volo")return Fg.requestStakeCoin(this._sdk,e,t);if(n==="aftermath")return Lg.requestStakeCoin(this._sdk,e,t)}async requestStake(n,e,t){if(n==="Haedal")return await Ug.requestStake(this._sdk,e,t);if(n==="Volo")return await Fg.requestStake(this._sdk,e,t);if(n==="aftermath")return await Lg.requestStake(this._sdk,e,t)}updateCache(n,e,t=Bi){let r=this._cache[n];r?(r.overdueTime=Mt(t),r.value=e):r=new Er(e,Mt(t)),this._cache[n]=r}getCache(n,e=!1){let t=this._cache[n],r=t==null?void 0:t.isValid();if(!e&&r)return t.value;r||delete this._cache[n]}},sW=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getLimitOrderTokenList(){let{limit_order:e}=this._sdk.sdkOptions,{token_list_handle:t}=J(e),{fullClient:r}=this._sdk.ClmmSDK,i=(await r.getDynamicFieldsByPage(t)).data.map(s=>s.objectId);return(await r.batchGetObjects(i,{showContent:!0})).map(s=>{let{fields:o}=s.data.content;return{coin_type:pe(o.name.fields.name).full_address,min_trade_amount:Number(o.value)}})}async getLimitOrderPoolList(){let{limit_order:e}=this._sdk.sdkOptions,{rate_orders_indexer_handle:t}=J(e),{fullClient:r}=this._sdk.ClmmSDK,i=(await r.getDynamicFieldsByPage(t)).data.map(s=>s.objectId);return(await r.batchGetObjects(i,{showContent:!0})).map(s=>{let{fields:o}=s.data.content.fields.value,a={pay_coin_type:pe(o.pay_coin.fields.name).full_address,target_coin_type:pe(o.target_coin.fields.name).full_address,indexer_id:o.indexer_id};return this._sdk.updateCache(`${a.pay_coin_type}_${a.target_coin_type}`,a.indexer_id),a})}async getPoolIndexerId(e,t){let r=this._sdk.getCache(`${e}_${t}`);try{if(r===void 0){let i=(await this.getLimitOrderPoolList()).filter(s=>pe(s.pay_coin_type).full_address===pe(e).full_address&&pe(s.target_coin_type).full_address===pe(t).full_address);if(i.length>0)return i[0].indexer_id}}catch{}return r}async getOwnerLimitOrderList(e,t){let{fullClient:r}=this._sdk.ClmmSDK,i={data:[],hasNextPage:!1};try{let s=await this.getUserIndexerHandle(e);if(!s)return i;let o=await r.getDynamicFieldsByPage(s,t);i.hasNextPage=o.hasNextPage,i.nextCursor=o.nextCursor;let a=o.data.map(l=>l.name.value),c=(await r.batchGetObjects(a,{showContent:!0})).map(l=>Wu.buildLimitOrderInfo(l)).filter(l=>l!==void 0);i.data=c}catch(s){console.log("Error in getOwnerLimitOrderList:",s)}return i}async getLimitOrderConfigs(){let{package_id:e}=this._sdk.sdkOptions.limit_order,t={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::limit_order::InitEvent`})).data;if(r.length>0){let s=r[0].parsedJson;t.rate_orders_indexer_id=s.rate_orders_indexer_id,t.user_orders_indexer_id=s.user_orders_indexer_id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rate_orders_indexer_id,options:{showContent:!0}});t.rate_orders_indexer_handle=et(o).list.fields.id.id;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:t.user_orders_indexer_id,options:{showContent:!0}});t.user_orders_indexer_handle=et(a).indexer.fields.id.id}let i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitFactoryEvent`})).data;if(i.length>0){let s=i[0].parsedJson;t.global_config_id=s.global_config_id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showContent:!0}}),a=et(o);t.token_list_handle=a.token_white_list.fields.id.id}return t}async getLimitOrder(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let r=await t.getObject({id:e,options:{showContent:!0}});return Wu.buildLimitOrderInfo(r)}catch(r){console.log("Error in getLimitOrder:",r);return}}async getLimitOrderLogs(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let r=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return r.data.forEach(s=>{i.push(...Wu.buildOrderLimitEvent(s,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),i}catch(r){return console.log("Error in getLimitOrderLogs:",r),[]}}async getLimitOrderClaimLogs(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let r=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return r.data.forEach(s=>{i.push(...Wu.buildOrderLimitEvent(s,["ClaimTargetCoinEvent"]))}),i}catch(r){return console.log("Error in getLimitOrderLogs:",r),[]}}buildRateOrdersIndexerType(e){let{limit_order:t}=this._sdk.sdkOptions;return Np(`${t.package_id}::limit_order::RateOrdersIndexer`,[e.pay_coin_type,e.target_coin_type])}async placeLimitOrder(e){let{limit_order:t}=this._sdk.sdkOptions,{user_orders_indexer_id:r,global_config_id:i,rate_orders_indexer_id:s}=J(t),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.pay_coin_type),a=new fe,c=await this.getPoolIndexerId(e.pay_coin_type,e.target_coin_type),l=$e.buildCoinForAmount(a,o,BigInt(e.pay_coin_amount),e.pay_coin_type,!1,!0);return a.moveCall({target:`${t.published_at}::limit_order::${c===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[a.object(i),c===void 0?a.object(s):a.object(c),a.object(r),l.targetCoin,a.pure.u128(Wu.priceToRate(e.price,e.pay_decimal,e.target_decimal)),a.pure.u64(e.expired_ts),a.object(ke)]}),a}async claimTargetCoin(e){let{limit_order:t}=this._sdk.sdkOptions,{global_config_id:r}=J(t),i=new fe;return i.moveCall({target:`${t.published_at}::limit_order::claim_target_coin`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[i.object(r),i.object(e.order_id)]}),i}async cancelOrdersByOwner(e){let{limit_order:t}=this._sdk.sdkOptions,{global_config_id:r}=J(t),i=new fe,s={};for(let o=0;o<e.length;o++){let a=e[o],c=await this.getPoolIndexerId(a.pay_coin_type,a.target_coin_type);if(c===void 0)throw Error("not found indexerId");s[a.order_id]=c}return e.forEach(o=>{i.moveCall({target:`${t.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[o.pay_coin_type,o.target_coin_type],arguments:[i.object(r),i.object(s[o.order_id]),i.object(o.order_id),i.object(ke)]})}),i}async getUserIndexerHandle(e){let{fullClient:t}=this._sdk.ClmmSDK,{limit_order:r}=this._sdk.sdkOptions,i=this.getUserIndexerHandleByCache(e);if(i===void 0){let s=new fe;s.moveCall({target:`${r.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[s.pure.address(e),s.object(J(r).user_orders_indexer_id)]}),i=(await t.devInspectTransactionBlock({transactionBlock:s,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,i&&this.saveUserIndexerHandleByCache(e,i)}return i}getUserIndexerHandleByCache(e){let t=`getUserIndexerHandleByCache_${e}`;return this.getCache(t)}saveUserIndexerHandleByCache(e,t){let r=`getUserIndexerHandleByCache_${e}`;return this.updateCache(r,t)}updateCache(e,t,r=De){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e],i=r==null?void 0:r.isValid();if(!t&&i)return r.value;i||delete this._cache[e]}},oW=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){let{package_id:t}=this._sdk.sdkOptions.frams,r={data:[],hasNextPage:!1};try{let i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::pool::CreatePoolEvent`},e),s=i.data.map(o=>o.parsedJson.pool_id);if(r.hasNextPage=i.hasNextPage,r.nextCursor=i.nextCursor,s.length>0){let o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showType:!0,showContent:!0});for(let a of o){let c=Lh.buildFramsPool(a);c&&(c.rewarders=await this.getFramsRewarderConfig(c.clmm_pool_id,c.rewarders.map(l=>l.reward_coin)),r.data.push(c),this.updateCache(c.id,c))}}}catch(i){console.log("getFramsPoolList error ",i)}return r}async getFramsPool(e,t=!1){let r=this.getCache(e,t);if(r)return r;let i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),s=Lh.buildFramsPool(i.data);return s&&(s.rewarders=await this.getFramsRewarderConfig(s.clmm_pool_id,s.rewarders.map(o=>o.reward_coin)),this.updateCache(s.id,s)),s}async getFramsRewarderConfig(e,t,r=!1){let{frams:i}=this._sdk.sdkOptions,s=[];for(let o of t){let a=`getFramsRewarderConfig_${o}_${e}`,c=this.getCache(a,r);if(c)s.push(c);else try{let l=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:J(i).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:sA(o)}}),{fields:u}=l.data.content.fields.value.fields.value,d={reward_coin:o,last_reward_time:u.last_reward_time,emission_per_second:u.emission_per_second,total_allocate_point:u.total_allocate_point,allocate_point:""},h=u.pools.fields.id.id,f=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:h,name:{type:"0x2::object::ID",value:e}}),{allocate_point:m}=f.data.content.fields.value.fields.value.fields;d.allocate_point=m,this.updateCache(a,d),s.push(d)}catch(l){console.log(l)}}return s}async getOwnedFramsPositionNFTList(e,t=[],r=!1,i="all"){let{package_id:s}=this._sdk.sdkOptions.frams,o={data:[],hasNextPage:!1},a={},c=[],l=t.length>0,u=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${s}::pool::WrappedPositionNFT`},options:{showContent:!0}},i);o.hasNextPage=u.hasNextPage,o.nextCursor=u.nextCursor;for(let d of u.data){let h=Lh.buildFramsPositionNFT(d);if(h)if(l){if(t.includes(h.pool_id)){c.push(h);let f=a[h.pool_id];f?f.push(h):f=[h],a[h.pool_id]=f}}else c.push(h)}if(r&&c.length>0){let d=await this.calculateFarmingRewards(c.map(h=>({pool_id:h.pool_id,position_nft_id:h.id,clmm_pool_id:h.clmm_pool_id})));l?(a={},c.forEach(h=>{d[h.id]&&(h.rewards=d[h.id]);let f=a[h.pool_id];f?f.push(h):f=[h],a[h.pool_id]=f})):c.forEach(h=>{d[h.id]&&(h.rewards=d[h.id])})}return l?a:(o.data=c,o)}async getFramsPositionNFT(e,t=!0){let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),i=Lh.buildFramsPositionNFT(r);if(t&&i){let s=await this.calculateFarmingRewards([{pool_id:i.pool_id,position_nft_id:i.id}]);s[i.id]&&(i.rewards=s[i.id])}return i}async calculateFarmingRewards(e){var a,c;let{frams:t}=this._sdk.sdkOptions,r=new fe,{rewarder_manager_id:i,global_config_id:s}=J(t);e.forEach(l=>{r.moveCall({target:`${t.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[r.object(s),r.object(i),r.object(l.pool_id),r.pure.address(l.position_nft_id),r.object(ke)]})});let o={};try{let l=(c=(a=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:this.sdk.ClmmSDK.senderAddress}))==null?void 0:a.events)==null?void 0:c.filter(u=>pe(u.type).name==="AccumulatedPositionRewardsEvent");if(l&&l.length>0)for(let u=0;u<l.length;u+=1){let{parsedJson:d}=l[u],h=[];d.rewards.contents.forEach(f=>{h.push({rewarder_type:pe(f.key.name).full_address,rewarder_amount:f.value})}),o[d.wrapped_position_id]=h}}catch(l){console.log(l)}return o}depositPayload(e,t){let{frams:r}=this.sdk.sdkOptions;t=t||new fe;let{global_config_id:i,rewarder_manager_id:s}=J(r);return t.moveCall({target:`${r.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(i),t.object(s),t.object(e.pool_id),t.object(e.clmm_position_id),t.object(ke)]}),t}async withdrawPayload(e,t){let{frams:r}=this.sdk.sdkOptions,{global_config_id:i,rewarder_manager_id:s}=J(r);return t=t||new fe,t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},t),t.moveCall({target:`${r.published_at}::router::withdraw`,typeArguments:[],arguments:[t.object(i),t.object(s),t.object(e.pool_id),t.object(e.position_nft_id),t.object(ke)]}),t}async batchHarvestPayload(e,t){t=t||new fe;for(let r of e)await this.harvestPayload(r,t);return t}async batchHarvestAndClmmFeePayload(e,t){if(!hr(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");let r=new fe,i={},s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(let l of t)this.collectClmmFeeInternal(l,i,r,s),this.collectClmmRewardInternal(l,i,r,s);let{frams:o}=this.sdk.sdkOptions,{global_config_id:a,rewarder_manager_id:c}=J(o);for(let l of e){let u=await this.getFramsPool(l.pool_id,!1);if(u===void 0)throw Error(`not found ${l.pool_id}`);l.collect_fee&&this.collectFeeInternal(l,i,r,s),l.clmm_rewarder_types.length>0&&await this.collectRewardInternal(l,i,r,s),l.collect_frams_rewarder&&u.rewarders.forEach(d=>{r&&r.moveCall({target:`${o.published_at}::router::harvest`,typeArguments:[d.reward_coin],arguments:[r.object(a),r.object(c),r.object(l.pool_id),r.object(l.position_nft_id),r.object(ke)]})})}return Object.keys(i).forEach(l=>{let u=i[l],{originalSplitedCoin:d}=u;(u.isMintZeroCoin||d&&(d==null?void 0:d.$kind)==="GasCoin")&&$e.buildTransferCoin(this._sdk.ClmmSDK,r,u.targetCoin,l,this._sdk.ClmmSDK.senderAddress)}),r}async collectRewardInternal(e,t,r,i){let s=[];e.clmm_rewarder_types.forEach(o=>{let a=On(o),c=t[o];c===void 0&&(c=$e.buildCoinForAmount(r,i,BigInt(0),a,!1),t[a]=c),s.push(c.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,r)}collectFeeInternal(e,t,r,i){let{frams:s}=this.sdk.sdkOptions,{global_config_id:o}=J(s),{clmm_pool:a,integrate:c}=this.sdk.ClmmSDK.sdkOptions,l=J(a),u=On(e.coinTypeA),d=On(e.coinTypeB),h=t[u];h===void 0&&(h=$e.buildCoinForAmount(r,i,BigInt(0),u,!1),t[u]=h);let f=t[d];f===void 0&&(f=$e.buildCoinForAmount(r,i,BigInt(0),d,!1),t[d]=f),r.moveCall({target:`${c.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[r.object(o),r.object(l.global_config_id),r.object(e.clmm_pool_id),r.object(e.position_nft_id),h.targetCoin,f.targetCoin]})}collectClmmRewardInternal(e,t,r,i){let s=[];e.rewarder_coin_types.forEach(o=>{let a=On(o),c=t[o];c===void 0&&(c=$e.buildCoinForAmount(r,i,BigInt(0),a,!1),t[a]=c),s.push(c.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,r,s)}collectClmmFeeInternal(e,t,r,i){if(e.collect_fee){let s=On(e.coinTypeA),o=On(e.coinTypeB),a=t[s];a===void 0&&(a=$e.buildCoinForAmount(r,i,BigInt(0),s,!1),t[s]=a);let c=t[o];c===void 0&&(c=$e.buildCoinForAmount(r,i,BigInt(0),o,!1),t[o]=c),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},r,a.targetCoin,c.targetCoin)}}async harvestPayload(e,t){let{frams:r}=this.sdk.sdkOptions;t=t||new fe;let i=await this.getFramsPool(e.pool_id,!1);if(i===void 0)throw Error(`not found ${e.pool_id}`);let{global_config_id:s,rewarder_manager_id:o}=J(r);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){let a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,a)}return i.rewarders.forEach(a=>{t&&t.moveCall({target:`${r.published_at}::router::harvest`,typeArguments:[a.reward_coin],arguments:[t.object(s),t.object(o),t.object(e.pool_id),t.object(e.position_nft_id),t.object(ke)]})}),t}async claimFeeAndClmmReward(e){let t=new fe,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,r),t}async openPositionAddLiquidityStakePaylod(e){let t=new fe,{clmm_pool:r,integrate:i}=this._sdk.ClmmSDK.sdkOptions,s=J(r),o=t.moveCall({target:`${r.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(e.clmm_pool_id),t.pure.u32(Number(Ir(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(Ir(BigInt(e.tick_upper)).toString()))]}),a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),c=$e.buildCoinForAmount(t,a,BigInt(e.amount_a),e.coinTypeA,!1),l=$e.buildCoinForAmount(t,a,BigInt(e.amount_b),e.coinTypeB,!1);t.moveCall({target:`${i.published_at}::${qa}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(e.clmm_pool_id),o,c.targetCoin,l.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(ke)]});let{frams:u}=this.sdk.sdkOptions,{global_config_id:d,rewarder_manager_id:h}=J(u);return t.moveCall({target:`${u.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(d),t.object(h),t.object(e.pool_id),o,t.object(ke)]}),t}async addLiquidityPayload(e,t){let{frams:r}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new fe;let s=J(r),o=J(i),a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),c=$e.buildCoinForAmount(t,a,BigInt(e.amount_limit_a),e.coinTypeA,!1),l=$e.buildCoinForAmount(t,a,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){let u=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,u,c.remainCoins,l.remainCoins)}return t.moveCall({target:`${r.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(o.global_config_id),t.object(s.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),c.targetCoin,l.targetCoin,t.pure.u64(e.amount_limit_a),t.pure.u64(e.amount_limit_b),t.pure.u128(e.delta_liquidity),t.object(ke)]}),t}async addLiquidityFixCoinPayload(e,t){let{frams:r}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new fe;let s=J(r),o=J(i),a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),c=$e.buildCoinForAmount(t,a,BigInt(e.amount_a),e.coinTypeA,!1),l=$e.buildCoinForAmount(t,a,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){let u=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,u,c.remainCoins,l.remainCoins)}return t.moveCall({target:`${r.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(o.global_config_id),t.object(s.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),c.targetCoin,l.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(ke)]}),t}async removeLiquidityPayload(e,t){let{frams:r}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new fe;let s=J(r),o=J(i);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.clmm_rewarder_types.length>0){let a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},t,a)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");t.moveCall({target:`${r.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(s.rewarder_manager_id),t.object(e.pool_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(ke)]})}else t.moveCall({target:`${r.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(o.global_config_id),t.object(s.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(ke)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return t}async buildCollectRewarderAndFeeParams(e,t,r,i,s){i===void 0&&(i=[...r]),s===void 0&&(s=[...r]);let o=On(e.coinTypeA),a=On(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},t);let c=[];return e.clmm_rewarder_types.forEach(l=>{switch(On(l)){case o:c.push($e.buildCoinForAmount(t,i,BigInt(0),l,!1).targetCoin);break;case a:c.push($e.buildCoinForAmount(t,s,BigInt(0),l,!1).targetCoin);break;default:c.push($e.buildCoinForAmount(t,r,BigInt(0),l,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:c},t),t}collectFeePayload(e,t){let{frams:r}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new fe;let s=J(r),o=J(i);return t.moveCall({target:`${r.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id)]}),t}async collectClmmRewardPayload(e,t){var c;let{frams:r}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new fe;let s=e.reward_coins;if(e.clmm_rewarder_types.length>0&&s===void 0){s=[];let l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(u=>{s.push($e.buildCoinForAmount(t,l,BigInt(0),u,!1).targetCoin)})}let o=J(r),a=J(i);return(c=e.clmm_rewarder_types)==null||c.forEach((l,u)=>{t&&t.moveCall({target:`${r.published_at}::router::collect_clmm_reward`,typeArguments:[l,e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(a.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(a.global_vault_id),s[u],t.object(ke)]})}),t}async collectClmmRewardNoSendPayload(e,t){var l;let{frams:r}=this.sdk.sdkOptions,{clmm_pool:i,integrate:s}=this.sdk.ClmmSDK.sdkOptions,o=e.reward_coins;if(e.clmm_rewarder_types.length>0&&o===void 0){o=[];let u=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(d=>{o.push($e.buildCoinForAmount(t,u,BigInt(0),d,!1).targetCoin)})}let a=J(r),c=J(i);return(l=e.clmm_rewarder_types)==null||l.forEach((u,d)=>{t&&t.moveCall({target:`${s.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[u,e.coinTypeA,e.coinTypeB],arguments:[t.object(a.global_config_id),t.object(c.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(c.global_vault_id),o[d],t.object(ke)]})}),t}async getFrarmsConfigs(){let{package_id:e}=this._sdk.sdkOptions.frams,t={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(r.length>0){let s=r[0].parsedJson;t.global_config_id=s.global_config_id,t.admin_cap_id=s.admin_cap_id}let i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(i.length>0){let s=i[0].parsedJson;t.rewarder_manager_id=s.id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rewarder_manager_id,options:{showContent:!0}});t.rewarder_manager_handle=o.data.content.fields.rewarders.fields.id.id}return t}updateCache(e,t,r=De){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e];if(!t&&(r!=null&&r.isValid()))return r.value;delete this._cache[e]}},n1=class{static buildDcaOrderList(e){let{parsedJson:t}=e;if(t&&t.order_id)return{created_at:t.created_at,cycle_count:t.cycle_count,cycle_frequency:t.cycle_frequency,in_coin:pe(t.in_coin.name).full_address,in_deposited:t.in_deposited,order_id:t.order_id,out_coin:pe(t.out_coin.name).full_address,per_cycle_in_amount_limit:t.per_cycle_in_amount_limit,per_cycle_max_out_amount:t.per_cycle_max_out_amount,per_cycle_min_out_amount:t.per_cycle_min_out_amount}}static buildDcaGlobalConfig(e){if(e&&e.id.id)return{min_cycle_count:e.min_cycle_count,min_cycle_frequency:e.min_cycle_frequency,whitelist_mode:e.whitelist_mode}}static buildOrderHistoryList(e,t){let{events:r}=e,i=[];return r&&r.forEach(s=>{let o=pe(s.type).name;if(t.includes(o)){let a={digest:e.digest,type:o,timestampMs:e.timestampMs,parsedJson:s.parsedJson};i.push(a)}}),i}},aW=class{constructor(e){v(this,"_sdk");v(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async dcaOpenOrderPayload(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:r,indexer_id:i}=J(t),s=new fe,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.in_coin_type),a=$e.buildCoinForAmount(s,o,BigInt(e.in_coin_amount),e.in_coin_type,!1,!0);return s.moveCall({target:`${t.published_at}::order::open_order`,typeArguments:[e.in_coin_type,e.out_coin_type],arguments:[s.object(r),a.targetCoin,s.pure.u64(e.cycle_frequency),s.pure.u64(e.cycle_count),s.pure.u64(e.per_cycle_min_out_amount),s.pure.u64(e.per_cycle_max_out_amount),s.pure.u64(e.per_cycle_in_amount_limit),s.pure.u64(e.fee_rate),s.pure.u64(e.timestamp),s.pure.string(e.signature),s.object(ke),s.object(i)]}),s}dcaCloseOrderPayload(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:r,indexer_id:i}=J(t),s=new fe;return e.forEach(o=>{let a=s.moveCall({target:`${t.published_at}::order::cancle_order`,typeArguments:[o.in_coin_type,o.out_coin_type],arguments:[s.object(r),s.object(o.order_id),s.object(i),s.object(ke)]});s.transferObjects([a[0],a[1]],s.pure.address(this._sdk.getVerifySenderAddress()))}),s}async getDcaOrders(e){let t={data:[],hasNextPage:!1},{dca:r}=this._sdk.sdkOptions,{user_indexer_id:i}=J(r);try{let s,o=this.getCache(`${e}_dca_table_id`);if(o)s=o;else{let d=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}});s=et(d).value.fields.id.id,this.updateCache(`${e}_dca_table_id`,s)}let a=null,c=50,l=[];for(;;){let d=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:s,cursor:a,limit:c});if(d.data.forEach(h=>{l.push(h.name.value)}),a=d.nextCursor,a===null||d.data.length<c)break}let u=[];for(let d=0;d<l.length;d++){let h=await this._sdk.ClmmSDK.fullClient.getObject({id:l[d],options:{showType:!0,showContent:!0}}),f=pe(h.data.type),m=f.type_arguments[0],w=f.type_arguments[1];u.push({in_coin_type:m,out_coin_type:w,...h.data.content.fields,id:h.data.content.fields.id.id,version:h.data.version})}return t.data=u,t}catch{return t}}async withdraw(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:r}=J(t),i=new fe,s=i.moveCall({target:`${t.published_at}::order::withdraw`,typeArguments:[e.in_coin_type,e.out_coin_type],arguments:[i.object(r),i.object(e.order_id),i.object(ke)]});return i.transferObjects([s[0]],i.pure.address(this._sdk.getVerifySenderAddress())),i}async getDcaOrdersMakeDeal(e){let t=this.getCache(`${e}_tx`),r=[],i=null,s=50;for(;;){let c=await this._sdk.ClmmSDK.fullClient.queryTransactionBlocks({filter:{ChangedObject:e},limit:s});if(c.data.forEach(l=>{r.push(l.digest)}),i=c.nextCursor,i===null||c.data.length<s)break}if(this.updateCache(`${e}_tx`,r),t&&t.length===r.length)return this.getCache(`${e}_history_list`);let o=await this._sdk.ClmmSDK.fullClient.multiGetTransactionBlocks({digests:r,options:{showInput:!0,showEffects:!0,showEvents:!0}}),a=[];return o.forEach(c=>{a.push(...n1.buildOrderHistoryList(c,["MakeDealEvent"]))}),this.updateCache(`${e}_history_list`,a),a}async getDcaCoinWhiteList(e){let{in_coin_whitelist_id:t,out_coin_whitelist_id:r}=J(this._sdk.sdkOptions.dca),i=[],s=[];if(e===1||e===3){let o=null,a=50;for(;;){let c=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:t,cursor:o,limit:a});if(c.data.forEach(l=>{i.push(pe(l.name.value.name).full_address)}),o=c.nextCursor,o===null||c.data.length<a)break}}if(e===2||e===3){let o=null,a=50;for(;;){let c=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:r,cursor:o,limit:a});if(c.data.forEach(l=>{s.push(pe(l.name.value.name).full_address)}),o=c.nextCursor,o===null||c.data.length<a)break}}return{inCoinList:i,outCoinList:s}}async getDcaGlobalConfig(){let{global_config_id:e}=J(this._sdk.sdkOptions.dca),t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});return n1.buildDcaGlobalConfig(t.data.content.fields)}async getDcaConfigs(){var s;let{package_id:e}=this._sdk.sdkOptions.dca,t={admin_cap_id:"",global_config_id:"",indexer_id:"",user_indexer_id:"",in_coin_whitelist_id:"",out_coin_whitelist_id:""},r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`})).data,i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::order::InitEvent`})).data;if(r&&r.length>0){let{parsedJson:o}=r[0];t.admin_cap_id=o.admin_cap_id,t.global_config_id=o.global_config_id}if(i&&i.length>0){let{parsedJson:o}=i[0];t.indexer_id=o.indexer_id;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:o.indexer_id,options:{showType:!0,showContent:!0}});t.user_indexer_id=(s=a.data)==null?void 0:s.content.fields.user_orders.fields.id.id}if(t.global_config_id){let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showType:!0,showContent:!0}});t.in_coin_whitelist_id=o.data.content.fields.in_coin_whitelist.fields.id.id,t.out_coin_whitelist_id=o.data.content.fields.out_coin_whitelist.fields.id.id}return t}updateCache(e,t,r=De){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e],i=r==null?void 0:r.isValid();if(!t&&i)return r.value;i||delete this._cache[e]}},cW=class{constructor(e,t){v(this,"_cache",{});v(this,"_sdkOptions");v(this,"_launchpad");v(this,"_ido");v(this,"_xcetusModule");v(this,"_xtokenModule");v(this,"_boosterModule");v(this,"_makerModule");v(this,"_clmmSDK");v(this,"_liquidityStrategy");v(this,"_vaults");v(this,"_limitOrder");v(this,"_farmsModule");v(this,"_dcaModule");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new Lz(this),this._ido=new tW(this),this._xcetusModule=new Vz(this),this._xtokenModule=new nW(this),this._boosterModule=new Uz(this),this._makerModule=new $z(this),this._vaults=new iW(this),this._limitOrder=new sW(this),this._farmsModule=new oW(this),this._dcaModule=new aW(this),this._liquidityStrategy=new rW(this),eb(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}get Dca(){return this._dcaModule}getVerifySenderAddress(){let{senderAddress:e}=this.ClmmSDK;if(e.length===0||!rx(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,t,r=De){let i=this._cache[e];i?(i.overdueTime=Mt(r),i.value=t):i=new Er(t,Mt(r)),this._cache[e]=i}getCache(e,t=!1){let r=this._cache[e];if(!t&&(r!=null&&r.isValid()))return r.value;delete this._cache[e]}};let lW=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");class Jc extends Error{}class uW extends Jc{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class dW extends Jc{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class hW extends Jc{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Fl extends Jc{}class fA extends Jc{constructor(e){super(`Invalid unit ${e}`)}}class Pr extends Jc{}class da extends Jc{constructor(){super("Zone is an abstract class")}}const je="numeric",$s="short",Di="long",Pp={year:je,month:je,day:je},pA={year:je,month:$s,day:je},fW={year:je,month:$s,day:je,weekday:$s},mA={year:je,month:Di,day:je},gA={year:je,month:Di,day:je,weekday:Di},wA={hour:je,minute:je},yA={hour:je,minute:je,second:je},bA={hour:je,minute:je,second:je,timeZoneName:$s},_A={hour:je,minute:je,second:je,timeZoneName:Di},vA={hour:je,minute:je,hourCycle:"h23"},kA={hour:je,minute:je,second:je,hourCycle:"h23"},SA={hour:je,minute:je,second:je,hourCycle:"h23",timeZoneName:$s},CA={hour:je,minute:je,second:je,hourCycle:"h23",timeZoneName:Di},AA={year:je,month:je,day:je,hour:je,minute:je},TA={year:je,month:je,day:je,hour:je,minute:je,second:je},IA={year:je,month:$s,day:je,hour:je,minute:je},xA={year:je,month:$s,day:je,hour:je,minute:je,second:je},pW={year:je,month:$s,day:je,weekday:$s,hour:je,minute:je},EA={year:je,month:Di,day:je,hour:je,minute:je,timeZoneName:$s},MA={year:je,month:Di,day:je,hour:je,minute:je,second:je,timeZoneName:$s},OA={year:je,month:Di,day:je,weekday:Di,hour:je,minute:je,timeZoneName:Di},NA={year:je,month:Di,day:je,weekday:Di,hour:je,minute:je,second:je,timeZoneName:Di};class oh{get type(){throw new da}get name(){throw new da}get ianaName(){return this.name}get isUniversal(){throw new da}offsetName(e,t){throw new da}formatOffset(e,t){throw new da}offset(e){throw new da}equals(e){throw new da}get isValid(){throw new da}}let $g=null;class Dm extends oh{static get instance(){return $g===null&&($g=new Dm),$g}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return $A(e,t,r)}formatOffset(e,t){return gd(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Df={};function mW(n){return Df[n]||(Df[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Df[n]}const gW={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function wW(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,s,o,a,c,l,u]=r;return[o,i,s,a,c,l,u]}function yW(n,e){const t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){const{type:s,value:o}=t[i],a=gW[s];s==="era"?r[a]=o:lt(a)||(r[a]=parseInt(o,10))}return r}let $h={};class Go extends oh{static create(e){return $h[e]||($h[e]=new Go(e)),$h[e]}static resetCache(){$h={},Df={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Go.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return $A(e,t,r,this.name)}formatOffset(e,t){return gd(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const r=mW(this.name);let[i,s,o,a,c,l,u]=r.formatToParts?yW(r,t):wW(r,t);a==="BC"&&(i=-Math.abs(i)+1);const h=Rm({year:i,month:s,day:o,hour:c===24?0:c,minute:l,second:u,millisecond:0});let f=+t;const m=f%1e3;return f-=m>=0?m:1e3+m,(h-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let r1={};function bW(n,e={}){const t=JSON.stringify([n,e]);let r=r1[t];return r||(r=new Intl.ListFormat(n,e),r1[t]=r),r}let aw={};function cw(n,e={}){const t=JSON.stringify([n,e]);let r=aw[t];return r||(r=new Intl.DateTimeFormat(n,e),aw[t]=r),r}let lw={};function _W(n,e={}){const t=JSON.stringify([n,e]);let r=lw[t];return r||(r=new Intl.NumberFormat(n,e),lw[t]=r),r}let uw={};function vW(n,e={}){const{base:t,...r}=e,i=JSON.stringify([n,r]);let s=uw[i];return s||(s=new Intl.RelativeTimeFormat(n,e),uw[i]=s),s}let ad=null;function kW(){return ad||(ad=new Intl.DateTimeFormat().resolvedOptions().locale,ad)}let i1={};function SW(n){let e=i1[n];if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,i1[n]=e}return e}function CW(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let r,i;try{r=cw(n).resolvedOptions(),i=n}catch{const c=n.substring(0,t);r=cw(c).resolvedOptions(),i=c}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function AW(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function TW(n){const e=[];for(let t=1;t<=12;t++){const r=at.utc(2009,t,1);e.push(n(r))}return e}function IW(n){const e=[];for(let t=1;t<=7;t++){const r=at.utc(2016,11,13+t);e.push(n(r))}return e}function Vh(n,e,t,r){const i=n.listingMode();return i==="error"?null:i==="en"?t(e):r(e)}function xW(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}class EW{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=_W(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):sb(e,3);return Gn(t,this.padTo)}}}class MW{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Go.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=cw(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class OW{constructor(e,t,r){this.opts={style:"long",...r},!t&&FA()&&(this.rtf=vW(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):eK(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const NW={firstDay:1,minimalDays:4,weekend:[6,7]};class Qt{static fromOpts(e){return Qt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,i,s=!1){const o=e||Ln.defaultLocale,a=o||(s?"en-US":kW()),c=t||Ln.defaultNumberingSystem,l=r||Ln.defaultOutputCalendar,u=dw(i)||Ln.defaultWeekSettings;return new Qt(a,c,l,u,o)}static resetCache(){ad=null,aw={},lw={},uw={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:i}={}){return Qt.create(e,t,r,i)}constructor(e,t,r,i,s){const[o,a,c]=CW(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=r||c||null,this.weekSettings=i,this.intl=AW(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=xW(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Qt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,dw(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Vh(this,e,zA,()=>{const r=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=TW(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,t=!1){return Vh(this,e,ZA,()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=IW(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Vh(this,void 0,()=>QA,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[at.utc(2016,11,13,9),at.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Vh(this,e,HA,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[at.utc(-40,1,1),at.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){const i=this.dtFormatter(e,t),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new EW(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new MW(e,this.intl,t)}relFormatter(e={}){return new OW(this.intl,this.isEnglish(),e)}listFormatter(e={}){return bW(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:LA()?SW(this.locale):NW}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Vg=null;class Xr extends oh{static get utcInstance(){return Vg===null&&(Vg=new Xr(0)),Vg}static instance(e){return e===0?Xr.utcInstance:new Xr(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Xr(Pm(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${gd(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${gd(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return gd(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class jW extends oh{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function xa(n,e){if(lt(n)||n===null)return e;if(n instanceof oh)return n;if(FW(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Dm.instance:t==="utc"||t==="gmt"?Xr.utcInstance:Xr.parseSpecifier(t)||Go.create(n)}else return za(n)?Xr.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new jW(n)}const tb={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},s1={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},DW=tb.hanidec.replace(/[\[|\]]/g,"").split("");function BW(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);if(n[t].search(tb.hanidec)!==-1)e+=DW.indexOf(n[t]);else for(const i in s1){const[s,o]=s1[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let Al={};function RW(){Al={}}function ys({numberingSystem:n},e=""){const t=n||"latn";return Al[t]||(Al[t]={}),Al[t][e]||(Al[t][e]=new RegExp(`${tb[t]}${e}`)),Al[t][e]}let o1=()=>Date.now(),a1="system",c1=null,l1=null,u1=null,d1=60,h1,f1=null;class Ln{static get now(){return o1}static set now(e){o1=e}static set defaultZone(e){a1=e}static get defaultZone(){return xa(a1,Dm.instance)}static get defaultLocale(){return c1}static set defaultLocale(e){c1=e}static get defaultNumberingSystem(){return l1}static set defaultNumberingSystem(e){l1=e}static get defaultOutputCalendar(){return u1}static set defaultOutputCalendar(e){u1=e}static get defaultWeekSettings(){return f1}static set defaultWeekSettings(e){f1=dw(e)}static get twoDigitCutoffYear(){return d1}static set twoDigitCutoffYear(e){d1=e%100}static get throwOnInvalid(){return h1}static set throwOnInvalid(e){h1=e}static resetCaches(){Qt.resetCache(),Go.resetCache(),at.resetCache(),RW()}}class Ns{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const jA=[0,31,59,90,120,151,181,212,243,273,304,334],DA=[0,31,60,91,121,152,182,213,244,274,305,335];function rs(n,e){return new Ns("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function nb(n,e,t){const r=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function BA(n,e,t){return t+(ah(n)?DA:jA)[e-1]}function RA(n,e){const t=ah(n)?DA:jA,r=t.findIndex(s=>s<e),i=e-t[r];return{month:r+1,day:i}}function rb(n,e){return(n-e+7)%7+1}function Up(n,e=4,t=1){const{year:r,month:i,day:s}=n,o=BA(r,i,s),a=rb(nb(r,i,s),t);let c=Math.floor((o-a+14-e)/7),l;return c<1?(l=r-1,c=Id(l,e,t)):c>Id(r,e,t)?(l=r+1,c=1):l=r,{weekYear:l,weekNumber:c,weekday:a,...Um(n)}}function p1(n,e=4,t=1){const{weekYear:r,weekNumber:i,weekday:s}=n,o=rb(nb(r,1,e),t),a=Xl(r);let c=i*7+s-o-7+e,l;c<1?(l=r-1,c+=Xl(l)):c>a?(l=r+1,c-=Xl(r)):l=r;const{month:u,day:d}=RA(l,c);return{year:l,month:u,day:d,...Um(n)}}function qg(n){const{year:e,month:t,day:r}=n,i=BA(e,t,r);return{year:e,ordinal:i,...Um(n)}}function m1(n){const{year:e,ordinal:t}=n,{month:r,day:i}=RA(e,t);return{year:e,month:r,day:i,...Um(n)}}function g1(n,e){if(!lt(n.localWeekday)||!lt(n.localWeekNumber)||!lt(n.localWeekYear)){if(!lt(n.weekday)||!lt(n.weekNumber)||!lt(n.weekYear))throw new Fl("Cannot mix locale-based week fields with ISO-based week fields");return lt(n.localWeekday)||(n.weekday=n.localWeekday),lt(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),lt(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function PW(n,e=4,t=1){const r=Bm(n.weekYear),i=is(n.weekNumber,1,Id(n.weekYear,e,t)),s=is(n.weekday,1,7);return r?i?s?!1:rs("weekday",n.weekday):rs("week",n.weekNumber):rs("weekYear",n.weekYear)}function UW(n){const e=Bm(n.year),t=is(n.ordinal,1,Xl(n.year));return e?t?!1:rs("ordinal",n.ordinal):rs("year",n.year)}function PA(n){const e=Bm(n.year),t=is(n.month,1,12),r=is(n.day,1,Fp(n.year,n.month));return e?t?r?!1:rs("day",n.day):rs("month",n.month):rs("year",n.year)}function UA(n){const{hour:e,minute:t,second:r,millisecond:i}=n,s=is(e,0,23)||e===24&&t===0&&r===0&&i===0,o=is(t,0,59),a=is(r,0,59),c=is(i,0,999);return s?o?a?c?!1:rs("millisecond",i):rs("second",r):rs("minute",t):rs("hour",e)}function lt(n){return typeof n>"u"}function za(n){return typeof n=="number"}function Bm(n){return typeof n=="number"&&n%1===0}function FW(n){return typeof n=="string"}function LW(n){return Object.prototype.toString.call(n)==="[object Date]"}function FA(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function LA(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function $W(n){return Array.isArray(n)?n:[n]}function w1(n,e,t){if(n.length!==0)return n.reduce((r,i)=>{const s=[e(i),i];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function VW(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function ku(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function dw(n){if(n==null)return null;if(typeof n!="object")throw new Pr("Week settings must be an object");if(!is(n.firstDay,1,7)||!is(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!is(e,1,7)))throw new Pr("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function is(n,e,t){return Bm(n)&&n>=e&&n<=t}function qW(n,e){return n-e*Math.floor(n/e)}function Gn(n,e=2){const t=n<0;let r;return t?r="-"+(""+-n).padStart(e,"0"):r=(""+n).padStart(e,"0"),r}function Aa(n){if(!(lt(n)||n===null||n===""))return parseInt(n,10)}function ic(n){if(!(lt(n)||n===null||n===""))return parseFloat(n)}function ib(n){if(!(lt(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function sb(n,e,t=!1){const r=10**e;return(t?Math.trunc:Math.round)(n*r)/r}function ah(n){return n%4===0&&(n%100!==0||n%400===0)}function Xl(n){return ah(n)?366:365}function Fp(n,e){const t=qW(e-1,12)+1,r=n+(e-t)/12;return t===2?ah(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Rm(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function y1(n,e,t){return-rb(nb(n,1,e),t)+e-1}function Id(n,e=4,t=1){const r=y1(n,e,t),i=y1(n+1,e,t);return(Xl(n)-r+i)/7}function hw(n){return n>99?n:n>Ln.twoDigitCutoffYear?1900+n:2e3+n}function $A(n,e,t,r=null){const i=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(i).find(c=>c.type.toLowerCase()==="timezonename");return a?a.value:null}function Pm(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const r=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-r:r;return t*60+i}function VA(n){const e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new Pr(`Invalid unit value ${n}`);return e}function Lp(n,e){const t={};for(const r in n)if(ku(n,r)){const i=n[r];if(i==null)continue;t[e(r)]=VA(i)}return t}function gd(n,e){const t=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),i=n>=0?"+":"-";switch(e){case"short":return`${i}${Gn(t,2)}:${Gn(r,2)}`;case"narrow":return`${i}${t}${r>0?`:${r}`:""}`;case"techie":return`${i}${Gn(t,2)}${Gn(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Um(n){return VW(n,["hour","minute","second","millisecond"])}const zW=["January","February","March","April","May","June","July","August","September","October","November","December"],qA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WW=["J","F","M","A","M","J","J","A","S","O","N","D"];function zA(n){switch(n){case"narrow":return[...WW];case"short":return[...qA];case"long":return[...zW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const WA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],KA=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],KW=["M","T","W","T","F","S","S"];function ZA(n){switch(n){case"narrow":return[...KW];case"short":return[...KA];case"long":return[...WA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const QA=["AM","PM"],ZW=["Before Christ","Anno Domini"],QW=["BC","AD"],HW=["B","A"];function HA(n){switch(n){case"narrow":return[...HW];case"short":return[...QW];case"long":return[...ZW];default:return null}}function GW(n){return QA[n.hour<12?0:1]}function YW(n,e){return ZA(e)[n.weekday-1]}function XW(n,e){return zA(e)[n.month-1]}function JW(n,e){return HA(e)[n.year<0?0:1]}function eK(n,e,t="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const d=n==="days";switch(e){case 1:return d?"tomorrow":`next ${i[n][0]}`;case-1:return d?"yesterday":`last ${i[n][0]}`;case 0:return d?"today":`this ${i[n][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),c=a===1,l=i[n],u=r?c?l[1]:l[2]||l[1]:c?i[n][0]:n;return o?`${a} ${u} ago`:`in ${a} ${u}`}function b1(n,e){let t="";for(const r of n)r.literal?t+=r.val:t+=e(r.val);return t}const tK={D:Pp,DD:pA,DDD:mA,DDDD:gA,t:wA,tt:yA,ttt:bA,tttt:_A,T:vA,TT:kA,TTT:SA,TTTT:CA,f:AA,ff:IA,fff:EA,ffff:OA,F:TA,FF:xA,FFF:MA,FFFF:NA};class Fr{static create(e,t={}){return new Fr(e,t)}static parseFormat(e){let t=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),t=null,r="",i=!i):i||a===t?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return tK[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Gn(e,t);const r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,m)=>this.loc.extract(e,f,m),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>r?GW(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(f,m)=>r?XW(e,f):s(m?{month:f}:{month:f,day:"numeric"},"month"),l=(f,m)=>r?YW(e,f):s(m?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const m=Fr.macroTokenToFormatOpts(f);return m?this.formatWithSystemDefault(e,m):f},d=f=>r?JW(e,f):s({era:f},"era"),h=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(f)}};return b1(Fr.parseFormat(t),h)}formatDurationFromString(e,t){const r=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=c=>l=>{const u=r(l);return u?this.num(c.get(u),l.length):l},s=Fr.parseFormat(t),o=s.reduce((c,{literal:l,val:u})=>l?c:c.concat(u),[]),a=e.shiftTo(...o.map(r).filter(c=>c));return b1(s,i(a))}}const GA=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Du(...n){const e=n.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function Bu(...n){return e=>n.reduce(([t,r,i],s)=>{const[o,a,c]=s(e,i);return[{...t,...o},a||r,c]},[{},null,1]).slice(0,2)}function Ru(n,...e){if(n==null)return[null,null];for(const[t,r]of e){const i=t.exec(n);if(i)return r(i)}return[null,null]}function YA(...n){return(e,t)=>{const r={};let i;for(i=0;i<n.length;i++)r[n[i]]=Aa(e[t+i]);return[r,null,t+i]}}const XA=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,nK=`(?:${XA.source}?(?:\\[(${GA.source})\\])?)?`,ob=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,JA=RegExp(`${ob.source}${nK}`),ab=RegExp(`(?:T${JA.source})?`),rK=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,iK=/(\d{4})-?W(\d\d)(?:-?(\d))?/,sK=/(\d{4})-?(\d{3})/,oK=YA("weekYear","weekNumber","weekDay"),aK=YA("year","ordinal"),cK=/(\d{4})-(\d\d)-(\d\d)/,eT=RegExp(`${ob.source} ?(?:${XA.source}|(${GA.source}))?`),lK=RegExp(`(?: ${eT.source})?`);function Jl(n,e,t){const r=n[e];return lt(r)?t:Aa(r)}function uK(n,e){return[{year:Jl(n,e),month:Jl(n,e+1,1),day:Jl(n,e+2,1)},null,e+3]}function Pu(n,e){return[{hours:Jl(n,e,0),minutes:Jl(n,e+1,0),seconds:Jl(n,e+2,0),milliseconds:ib(n[e+3])},null,e+4]}function ch(n,e){const t=!n[e]&&!n[e+1],r=Pm(n[e+1],n[e+2]),i=t?null:Xr.instance(r);return[{},i,e+3]}function lh(n,e){const t=n[e]?Go.create(n[e]):null;return[{},t,e+1]}const dK=RegExp(`^T?${ob.source}$`),hK=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function fK(n){const[e,t,r,i,s,o,a,c,l]=n,u=e[0]==="-",d=c&&c[0]==="-",h=(f,m=!1)=>f!==void 0&&(m||f&&u)?-f:f;return[{years:h(ic(t)),months:h(ic(r)),weeks:h(ic(i)),days:h(ic(s)),hours:h(ic(o)),minutes:h(ic(a)),seconds:h(ic(c),c==="-0"),milliseconds:h(ib(l),d)}]}const pK={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function cb(n,e,t,r,i,s,o){const a={year:e.length===2?hw(Aa(e)):Aa(e),month:qA.indexOf(t)+1,day:Aa(r),hour:Aa(i),minute:Aa(s)};return o&&(a.second=Aa(o)),n&&(a.weekday=n.length>3?WA.indexOf(n)+1:KA.indexOf(n)+1),a}const mK=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function gK(n){const[,e,t,r,i,s,o,a,c,l,u,d]=n,h=cb(e,i,r,t,s,o,a);let f;return c?f=pK[c]:l?f=0:f=Pm(u,d),[h,new Xr(f)]}function wK(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const yK=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,bK=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,_K=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function _1(n){const[,e,t,r,i,s,o,a]=n;return[cb(e,i,r,t,s,o,a),Xr.utcInstance]}function vK(n){const[,e,t,r,i,s,o,a]=n;return[cb(e,a,t,r,i,s,o),Xr.utcInstance]}const kK=Du(rK,ab),SK=Du(iK,ab),CK=Du(sK,ab),AK=Du(JA),tT=Bu(uK,Pu,ch,lh),TK=Bu(oK,Pu,ch,lh),IK=Bu(aK,Pu,ch,lh),xK=Bu(Pu,ch,lh);function EK(n){return Ru(n,[kK,tT],[SK,TK],[CK,IK],[AK,xK])}function MK(n){return Ru(wK(n),[mK,gK])}function OK(n){return Ru(n,[yK,_1],[bK,_1],[_K,vK])}function NK(n){return Ru(n,[hK,fK])}const jK=Bu(Pu);function DK(n){return Ru(n,[dK,jK])}const BK=Du(cK,lK),RK=Du(eT),PK=Bu(Pu,ch,lh);function UK(n){return Ru(n,[BK,tT],[RK,PK])}const v1="Invalid Duration",nT={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},FK={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...nT},Vi=146097/400,dl=146097/4800,LK={years:{quarters:4,months:12,weeks:Vi/7,days:Vi,hours:Vi*24,minutes:Vi*24*60,seconds:Vi*24*60*60,milliseconds:Vi*24*60*60*1e3},quarters:{months:3,weeks:Vi/28,days:Vi/4,hours:Vi*24/4,minutes:Vi*24*60/4,seconds:Vi*24*60*60/4,milliseconds:Vi*24*60*60*1e3/4},months:{weeks:dl/7,days:dl,hours:dl*24,minutes:dl*24*60,seconds:dl*24*60*60,milliseconds:dl*24*60*60*1e3},...nT},Mc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],$K=Mc.slice(0).reverse();function ha(n,e,t=!1){const r={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new xt(r)}function rT(n,e){let t=e.milliseconds??0;for(const r of $K.slice(1))e[r]&&(t+=e[r]*n[r].milliseconds);return t}function k1(n,e){const t=rT(n,e)<0?-1:1;Mc.reduceRight((r,i)=>{if(lt(e[i]))return r;if(r){const s=e[r]*t,o=n[i][r],a=Math.floor(s/o);e[i]+=a*t,e[r]-=a*o*t}return i},null),Mc.reduce((r,i)=>{if(lt(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*n[r][i]}return i},null)}function VK(n){const e={};for(const[t,r]of Object.entries(n))r!==0&&(e[t]=r);return e}class xt{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let r=t?LK:FK;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Qt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return xt.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Pr(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new xt({values:Lp(e,xt.normalizeUnit),loc:Qt.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(za(e))return xt.fromMillis(e);if(xt.isDuration(e))return e;if(typeof e=="object")return xt.fromObject(e);throw new Pr(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=NK(e);return r?xt.fromObject(r,t):xt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=DK(e);return r?xt.fromObject(r,t):xt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Pr("need to specify a reason the Duration is invalid");const r=e instanceof Ns?e:new Ns(e,t);if(Ln.throwOnInvalid)throw new hW(r);return new xt({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new fA(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Fr.create(this.loc,r).formatDurationFromString(this,e):v1}toHuman(e={}){if(!this.isValid)return v1;const t=Mc.map(r=>{const i=this.values[r];return lt(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=sb(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},at.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?rT(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=xt.fromDurationLike(e),r={};for(const i of Mc)(ku(t.values,i)||ku(this.values,i))&&(r[i]=t.get(i)+this.get(i));return ha(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=xt.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=VA(e(this.values[r],r));return ha(this,{values:t},!0)}get(e){return this[xt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Lp(e,xt.normalizeUnit)};return ha(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:r};return ha(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return k1(this.matrix,e),ha(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=VK(this.normalize().shiftToAll().toObject());return ha(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>xt.normalizeUnit(o));const t={},r={},i=this.toObject();let s;for(const o of Mc)if(e.indexOf(o)>=0){s=o;let a=0;for(const l in r)a+=this.matrix[l][o]*r[l],r[l]=0;za(i[o])&&(a+=i[o]);const c=Math.trunc(a);t[o]=c,r[o]=(a*1e3-c*1e3)/1e3}else za(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(t[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return k1(this.matrix,t),ha(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return ha(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of Mc)if(!t(this.values[r],e.values[r]))return!1;return!0}}const hl="Invalid Interval";function qK(n,e){return!n||!n.isValid?Rn.invalid("missing or invalid start"):!e||!e.isValid?Rn.invalid("missing or invalid end"):e<n?Rn.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class Rn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Pr("need to specify a reason the Interval is invalid");const r=e instanceof Ns?e:new Ns(e,t);if(Ln.throwOnInvalid)throw new dW(r);return new Rn({invalid:r})}static fromDateTimes(e,t){const r=Ku(e),i=Ku(t),s=qK(r,i);return s??new Rn({start:r,end:i})}static after(e,t){const r=xt.fromDurationLike(t),i=Ku(e);return Rn.fromDateTimes(i,i.plus(r))}static before(e,t){const r=xt.fromDurationLike(t),i=Ku(e);return Rn.fromDateTimes(i.minus(r),i)}static fromISO(e,t){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=at.fromISO(r,t),o=s.isValid}catch{o=!1}let a,c;try{a=at.fromISO(i,t),c=a.isValid}catch{c=!1}if(o&&c)return Rn.fromDateTimes(s,a);if(o){const l=xt.fromISO(i,t);if(l.isValid)return Rn.after(s,l)}else if(c){const l=xt.fromISO(r,t);if(l.isValid)return Rn.before(a,l)}}return Rn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const r=this.start.startOf(e,t);let i;return t!=null&&t.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,t),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Rn.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Ku).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=t[s]||this.e,a=+o>+this.e?this.e:o;r.push(Rn.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const t=xt.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(t.mapUnits(c=>c*i));s=+a>+this.e?this.e:a,o.push(Rn.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:Rn.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Rn.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const i=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((c,l)=>c.time-l.time);for(const c of a)r+=c.type==="s"?1:-1,r===1?t=c.time:(t&&+t!=+c.time&&i.push(Rn.fromDateTimes(t,c.time)),t=null);return Rn.merge(i)}difference(...e){return Rn.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:hl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Pp,t={}){return this.isValid?Fr.create(this.s.loc.clone(t),e).formatInterval(this):hl}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:hl}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:hl}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:hl}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:hl}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):xt.invalid(this.invalidReason)}mapEndpoints(e){return Rn.fromDateTimes(e(this.s),e(this.e))}}class qh{static hasDST(e=Ln.defaultZone){const t=at.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Go.isValidZone(e)}static normalizeZone(e){return xa(e,Ln.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Qt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Qt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Qt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Qt.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Qt.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Qt.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Qt.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Qt.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Qt.create(t,null,"gregory").eras(e)}static features(){return{relative:FA(),localeWeek:LA()}}}function S1(n,e){const t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(n);return Math.floor(xt.fromMillis(r).as("days"))}function zK(n,e,t){const r=[["years",(c,l)=>l.year-c.year],["quarters",(c,l)=>l.quarter-c.quarter+(l.year-c.year)*4],["months",(c,l)=>l.month-c.month+(l.year-c.year)*12],["weeks",(c,l)=>{const u=S1(c,l);return(u-u%7)/7}],["days",S1]],i={},s=n;let o,a;for(const[c,l]of r)t.indexOf(c)>=0&&(o=c,i[c]=l(n,e),a=s.plus(i),a>e?(i[c]--,n=s.plus(i),n>e&&(a=n,i[c]--,n=s.plus(i))):n=a);return[n,i,a,o]}function WK(n,e,t,r){let[i,s,o,a]=zK(n,e,t);const c=e-i,l=t.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);l.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+c/(o-i)));const u=xt.fromObject(s,r);return l.length>0?xt.fromMillis(c,r).shiftTo(...l).plus(u):u}const KK="missing Intl.DateTimeFormat.formatToParts support";function qt(n,e=t=>t){return{regex:n,deser:([t])=>e(BW(t))}}const ZK=String.fromCharCode(160),iT=`[ ${ZK}]`,sT=new RegExp(iT,"g");function QK(n){return n.replace(/\./g,"\\.?").replace(sT,iT)}function C1(n){return n.replace(/\./g,"").replace(sT," ").toLowerCase()}function bs(n,e){return n===null?null:{regex:RegExp(n.map(QK).join("|")),deser:([t])=>n.findIndex(r=>C1(t)===C1(r))+e}}function A1(n,e){return{regex:n,deser:([,t,r])=>Pm(t,r),groups:e}}function zh(n){return{regex:n,deser:([e])=>e}}function HK(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function GK(n,e){const t=ys(e),r=ys(e,"{2}"),i=ys(e,"{3}"),s=ys(e,"{4}"),o=ys(e,"{6}"),a=ys(e,"{1,2}"),c=ys(e,"{1,3}"),l=ys(e,"{1,6}"),u=ys(e,"{1,9}"),d=ys(e,"{2,4}"),h=ys(e,"{4,6}"),f=y=>({regex:RegExp(HK(y.val)),deser:([C])=>C,literal:!0}),w=(y=>{if(n.literal)return f(y);switch(y.val){case"G":return bs(e.eras("short"),0);case"GG":return bs(e.eras("long"),0);case"y":return qt(l);case"yy":return qt(d,hw);case"yyyy":return qt(s);case"yyyyy":return qt(h);case"yyyyyy":return qt(o);case"M":return qt(a);case"MM":return qt(r);case"MMM":return bs(e.months("short",!0),1);case"MMMM":return bs(e.months("long",!0),1);case"L":return qt(a);case"LL":return qt(r);case"LLL":return bs(e.months("short",!1),1);case"LLLL":return bs(e.months("long",!1),1);case"d":return qt(a);case"dd":return qt(r);case"o":return qt(c);case"ooo":return qt(i);case"HH":return qt(r);case"H":return qt(a);case"hh":return qt(r);case"h":return qt(a);case"mm":return qt(r);case"m":return qt(a);case"q":return qt(a);case"qq":return qt(r);case"s":return qt(a);case"ss":return qt(r);case"S":return qt(c);case"SSS":return qt(i);case"u":return zh(u);case"uu":return zh(a);case"uuu":return qt(t);case"a":return bs(e.meridiems(),0);case"kkkk":return qt(s);case"kk":return qt(d,hw);case"W":return qt(a);case"WW":return qt(r);case"E":case"c":return qt(t);case"EEE":return bs(e.weekdays("short",!1),1);case"EEEE":return bs(e.weekdays("long",!1),1);case"ccc":return bs(e.weekdays("short",!0),1);case"cccc":return bs(e.weekdays("long",!0),1);case"Z":case"ZZ":return A1(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return A1(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return zh(/[a-z_+-/]{1,256}?/i);case" ":return zh(/[^\S\n\r]/);default:return f(y)}})(n)||{invalidReason:KK};return w.token=n,w}const YK={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function XK(n,e,t){const{type:r,value:i}=n;if(r==="literal"){const c=/^\s+$/.test(i);return{literal:!c,val:c?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=YK[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function JK(n){return[`^${n.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,n]}function eZ(n,e,t){const r=n.match(e);if(r){const i={};let s=1;for(const o in t)if(ku(t,o)){const a=t[o],c=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+c))),s+=c}return[r,i]}else return[r,{}]}function tZ(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,r;return lt(n.z)||(t=Go.create(n.z)),lt(n.Z)||(t||(t=new Xr(n.Z)),r=n.Z),lt(n.q)||(n.M=(n.q-1)*3+1),lt(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),lt(n.u)||(n.S=ib(n.u)),[Object.keys(n).reduce((s,o)=>{const a=e(o);return a&&(s[a]=n[o]),s},{}),t,r]}let zg=null;function nZ(){return zg||(zg=at.fromMillis(1555555555555)),zg}function rZ(n,e){if(n.literal)return n;const t=Fr.macroTokenToFormatOpts(n.val),r=lT(t,e);return r==null||r.includes(void 0)?n:r}function oT(n,e){return Array.prototype.concat(...n.map(t=>rZ(t,e)))}class aT{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=oT(Fr.parseFormat(t),e),this.units=this.tokens.map(r=>GK(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=JK(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[t,r]=eZ(e,this.regex,this.handlers),[i,s,o]=r?tZ(r):[null,null,void 0];if(ku(r,"a")&&ku(r,"H"))throw new Fl("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function cT(n,e,t){return new aT(n,t).explainFromTokens(e)}function iZ(n,e,t){const{result:r,zone:i,specificOffset:s,invalidReason:o}=cT(n,e,t);return[r,i,s,o]}function lT(n,e){if(!n)return null;const r=Fr.create(e,n).dtFormatter(nZ()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>XK(o,n,s))}const Wg="Invalid DateTime",T1=864e13;function cd(n){return new Ns("unsupported zone",`the zone "${n.name}" is not supported`)}function Kg(n){return n.weekData===null&&(n.weekData=Up(n.c)),n.weekData}function Zg(n){return n.localWeekData===null&&(n.localWeekData=Up(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function sc(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new at({...t,...e,old:t})}function uT(n,e,t){let r=n-e*60*1e3;const i=t.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=t.offset(r);return i===s?[r,i]:[n-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Wh(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Bf(n,e,t){return uT(Rm(n),e,t)}function I1(n,e){const t=n.o,r=n.c.year+Math.trunc(e.years),i=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:r,month:i,day:Math.min(n.c.day,Fp(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=xt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Rm(s);let[c,l]=uT(a,t,n.zone);return o!==0&&(c+=o,l=n.zone.offset(c)),{ts:c,o:l}}function fl(n,e,t,r,i,s){const{setZone:o,zone:a}=t;if(n&&Object.keys(n).length!==0||e){const c=e||a,l=at.fromObject(n,{...t,zone:c,specificOffset:s});return o?l:l.setZone(a)}else return at.invalid(new Ns("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Kh(n,e,t=!0){return n.isValid?Fr.create(Qt.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function Qg(n,e){const t=n.c.year>9999||n.c.year<0;let r="";return t&&n.c.year>=0&&(r+="+"),r+=Gn(n.c.year,t?6:4),e?(r+="-",r+=Gn(n.c.month),r+="-",r+=Gn(n.c.day)):(r+=Gn(n.c.month),r+=Gn(n.c.day)),r}function x1(n,e,t,r,i,s){let o=Gn(n.c.hour);return e?(o+=":",o+=Gn(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=":")):o+=Gn(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=Gn(n.c.second),(n.c.millisecond!==0||!r)&&(o+=".",o+=Gn(n.c.millisecond,3))),i&&(n.isOffsetFixed&&n.offset===0&&!s?o+="Z":n.o<0?(o+="-",o+=Gn(Math.trunc(-n.o/60)),o+=":",o+=Gn(Math.trunc(-n.o%60))):(o+="+",o+=Gn(Math.trunc(n.o/60)),o+=":",o+=Gn(Math.trunc(n.o%60)))),s&&(o+="["+n.zone.ianaName+"]"),o}const dT={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},sZ={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},oZ={ordinal:1,hour:0,minute:0,second:0,millisecond:0},hT=["year","month","day","hour","minute","second","millisecond"],aZ=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],cZ=["year","ordinal","hour","minute","second","millisecond"];function lZ(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new fA(n);return e}function E1(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return lZ(n)}}function uZ(n){return Pf[n]||(Rf===void 0&&(Rf=Ln.now()),Pf[n]=n.offset(Rf)),Pf[n]}function M1(n,e){const t=xa(e.zone,Ln.defaultZone);if(!t.isValid)return at.invalid(cd(t));const r=Qt.fromObject(e);let i,s;if(lt(n.year))i=Ln.now();else{for(const c of hT)lt(n[c])&&(n[c]=dT[c]);const o=PA(n)||UA(n);if(o)return at.invalid(o);const a=uZ(t);[i,s]=Bf(n,a,t)}return new at({ts:i,zone:t,loc:r,o:s})}function O1(n,e,t){const r=lt(t.round)?!0:t.round,i=(o,a)=>(o=sb(o,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(n,o)?0:e.startOf(o).diff(n.startOf(o),o).get(o):e.diff(n,o).get(o);if(t.unit)return i(s(t.unit),t.unit);for(const o of t.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(n>e?-0:0,t.units[t.units.length-1])}function N1(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let Rf,Pf={};class at{constructor(e){const t=e.zone||Ln.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Ns("invalid input"):null)||(t.isValid?null:cd(t));this.ts=lt(e.ts)?Ln.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,s]=[e.old.c,e.old.o];else{const a=za(e.o)&&!e.old?e.o:t.offset(this.ts);i=Wh(this.ts,a),r=Number.isNaN(i.year)?new Ns("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=t,this.loc=e.loc||Qt.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new at({})}static local(){const[e,t]=N1(arguments),[r,i,s,o,a,c,l]=t;return M1({year:r,month:i,day:s,hour:o,minute:a,second:c,millisecond:l},e)}static utc(){const[e,t]=N1(arguments),[r,i,s,o,a,c,l]=t;return e.zone=Xr.utcInstance,M1({year:r,month:i,day:s,hour:o,minute:a,second:c,millisecond:l},e)}static fromJSDate(e,t={}){const r=LW(e)?e.valueOf():NaN;if(Number.isNaN(r))return at.invalid("invalid input");const i=xa(t.zone,Ln.defaultZone);return i.isValid?new at({ts:r,zone:i,loc:Qt.fromObject(t)}):at.invalid(cd(i))}static fromMillis(e,t={}){if(za(e))return e<-T1||e>T1?at.invalid("Timestamp out of range"):new at({ts:e,zone:xa(t.zone,Ln.defaultZone),loc:Qt.fromObject(t)});throw new Pr(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(za(e))return new at({ts:e*1e3,zone:xa(t.zone,Ln.defaultZone),loc:Qt.fromObject(t)});throw new Pr("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const r=xa(t.zone,Ln.defaultZone);if(!r.isValid)return at.invalid(cd(r));const i=Qt.fromObject(t),s=Lp(e,E1),{minDaysInFirstWeek:o,startOfWeek:a}=g1(s,i),c=Ln.now(),l=lt(t.specificOffset)?r.offset(c):t.specificOffset,u=!lt(s.ordinal),d=!lt(s.year),h=!lt(s.month)||!lt(s.day),f=d||h,m=s.weekYear||s.weekNumber;if((f||u)&&m)throw new Fl("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new Fl("Can't mix ordinal dates with month/day");const w=m||s.weekday&&!f;let y,C,A=Wh(c,l);w?(y=aZ,C=sZ,A=Up(A,o,a)):u?(y=cZ,C=oZ,A=qg(A)):(y=hT,C=dT);let M=!1;for(const R of y){const V=s[R];lt(V)?M?s[R]=C[R]:s[R]=A[R]:M=!0}const H=w?PW(s,o,a):u?UW(s):PA(s),G=H||UA(s);if(G)return at.invalid(G);const q=w?p1(s,o,a):u?m1(s):s,[X,E]=Bf(q,l,r),j=new at({ts:X,zone:r,o:E,loc:i});return s.weekday&&f&&e.weekday!==j.weekday?at.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${j.toISO()}`):j.isValid?j:at.invalid(j.invalid)}static fromISO(e,t={}){const[r,i]=EK(e);return fl(r,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[r,i]=MK(e);return fl(r,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[r,i]=OK(e);return fl(r,i,t,"HTTP",t)}static fromFormat(e,t,r={}){if(lt(e)||lt(t))throw new Pr("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Qt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,c,l,u]=iZ(o,e,t);return u?at.invalid(u):fl(a,c,r,`format ${t}`,e,l)}static fromString(e,t,r={}){return at.fromFormat(e,t,r)}static fromSQL(e,t={}){const[r,i]=UK(e);return fl(r,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Pr("need to specify a reason the DateTime is invalid");const r=e instanceof Ns?e:new Ns(e,t);if(Ln.throwOnInvalid)throw new uW(r);return new at({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const r=lT(e,Qt.fromObject(t));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return oT(Fr.parseFormat(e),Qt.fromObject(t)).map(i=>i.val).join("")}static resetCache(){Rf=void 0,Pf={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Kg(this).weekYear:NaN}get weekNumber(){return this.isValid?Kg(this).weekNumber:NaN}get weekday(){return this.isValid?Kg(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Zg(this).weekday:NaN}get localWeekNumber(){return this.isValid?Zg(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Zg(this).weekYear:NaN}get ordinal(){return this.isValid?qg(this.c).ordinal:NaN}get monthShort(){return this.isValid?qh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?qh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?qh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?qh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=Rm(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*t),a=this.zone.offset(r-s*t);if(o===a)return[this];const c=r-o*t,l=r-a*t,u=Wh(c,o),d=Wh(l,a);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[sc(this,{ts:c}),sc(this,{ts:l})]:[this]}get isInLeapYear(){return ah(this.year)}get daysInMonth(){return Fp(this.year,this.month)}get daysInYear(){return this.isValid?Xl(this.year):NaN}get weeksInWeekYear(){return this.isValid?Id(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Id(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:r,calendar:i}=Fr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(Xr.instance(e),t)}toLocal(){return this.setZone(Ln.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=xa(e,Ln.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||r){const s=e.offset(this.ts),o=this.toObject();[i]=Bf(o,s,e)}return sc(this,{ts:i,zone:e})}else return at.invalid(cd(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return sc(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Lp(e,E1),{minDaysInFirstWeek:r,startOfWeek:i}=g1(t,this.loc),s=!lt(t.weekYear)||!lt(t.weekNumber)||!lt(t.weekday),o=!lt(t.ordinal),a=!lt(t.year),c=!lt(t.month)||!lt(t.day),l=a||c,u=t.weekYear||t.weekNumber;if((l||o)&&u)throw new Fl("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Fl("Can't mix ordinal dates with month/day");let d;s?d=p1({...Up(this.c,r,i),...t},r,i):lt(t.ordinal)?(d={...this.toObject(),...t},lt(t.day)&&(d.day=Math.min(Fp(d.year,d.month),d.day))):d=m1({...qg(this.c),...t});const[h,f]=Bf(d,this.o,this.zone);return sc(this,{ts:h,o:f})}plus(e){if(!this.isValid)return this;const t=xt.fromDurationLike(e);return sc(this,I1(this,t))}minus(e){if(!this.isValid)return this;const t=xt.fromDurationLike(e).negate();return sc(this,I1(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const r={},i=xt.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Fr.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Wg}toLocaleString(e=Pp,t={}){return this.isValid?Fr.create(this.loc.clone(t),e).formatDateTime(this):Wg}toLocaleParts(e={}){return this.isValid?Fr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=Qg(this,o);return a+="T",a+=x1(this,o,t,r,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?Qg(this,e==="extended"):null}toISOWeekDate(){return Kh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+x1(this,o==="extended",t,e,r,s):null}toRFC2822(){return Kh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Kh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Qg(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(r&&(i+=" "),t?i+="z":e&&(i+="ZZ")),Kh(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Wg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return xt.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=$W(t).map(xt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,c=o?e:this,l=WK(a,c,s,i);return o?l.negate():l}diffNow(e="milliseconds",t={}){return this.diff(at.now(),e,t)}until(e){return this.isValid?Rn.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,r)<=i&&i<=s.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||at.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),O1(t,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?O1(e.base||at.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(at.isDateTime))throw new Pr("min requires all arguments be DateTimes");return w1(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(at.isDateTime))throw new Pr("max requires all arguments be DateTimes");return w1(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Qt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return cT(o,e,t)}static fromStringExplain(e,t,r={}){return at.fromFormatExplain(e,t,r)}static buildFormatParser(e,t={}){const{locale:r=null,numberingSystem:i=null}=t,s=Qt.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new aT(s,e)}static fromFormatParser(e,t,r={}){if(lt(e)||lt(t))throw new Pr("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Qt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(t.locale))throw new Pr(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:a,zone:c,specificOffset:l,invalidReason:u}=t.explainFromTokens(e);return u?at.invalid(u):fl(a,c,r,`format ${t.format}`,e,l)}static get DATE_SHORT(){return Pp}static get DATE_MED(){return pA}static get DATE_MED_WITH_WEEKDAY(){return fW}static get DATE_FULL(){return mA}static get DATE_HUGE(){return gA}static get TIME_SIMPLE(){return wA}static get TIME_WITH_SECONDS(){return yA}static get TIME_WITH_SHORT_OFFSET(){return bA}static get TIME_WITH_LONG_OFFSET(){return _A}static get TIME_24_SIMPLE(){return vA}static get TIME_24_WITH_SECONDS(){return kA}static get TIME_24_WITH_SHORT_OFFSET(){return SA}static get TIME_24_WITH_LONG_OFFSET(){return CA}static get DATETIME_SHORT(){return AA}static get DATETIME_SHORT_WITH_SECONDS(){return TA}static get DATETIME_MED(){return IA}static get DATETIME_MED_WITH_SECONDS(){return xA}static get DATETIME_MED_WITH_WEEKDAY(){return pW}static get DATETIME_FULL(){return EA}static get DATETIME_FULL_WITH_SECONDS(){return MA}static get DATETIME_HUGE(){return OA}static get DATETIME_HUGE_WITH_SECONDS(){return NA}}function Ku(n){if(at.isDateTime(n))return n;if(n&&n.valueOf&&za(n.valueOf()))return at.fromJSDate(n);if(n&&typeof n=="object")return at.fromObject(n);throw new Pr(`Unknown datetime argument: ${n}, of type ${typeof n}`)}var dZ=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Hg=Math.ceil,Ki=Math.floor,ai="[BigNumber Error] ",j1=ai+"Number primitive has more than 15 significant digits: ",_s=1e14,dt=14,Gg=9007199254740991,Yg=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],fa=1e7,cr=1e9;function fT(n){var e,t,r,i=A.prototype={constructor:A,toString:null,valueOf:null},s=new A(1),o=20,a=4,c=-7,l=21,u=-1e7,d=1e7,h=!1,f=1,m=0,w={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},y="0123456789abcdefghijklmnopqrstuvwxyz",C=!0;function A(E,j){var R,V,U,Y,x,p,g,k,T=this;if(!(T instanceof A))return new A(E,j);if(j==null){if(E&&E._isBigNumber===!0){T.s=E.s,!E.c||E.e>d?T.c=T.e=null:E.e<u?T.c=[T.e=0]:(T.e=E.e,T.c=E.c.slice());return}if((p=typeof E=="number")&&E*0==0){if(T.s=1/E<0?(E=-E,-1):1,E===~~E){for(Y=0,x=E;x>=10;x/=10,Y++);Y>d?T.c=T.e=null:(T.e=Y,T.c=[E]);return}k=String(E)}else{if(!dZ.test(k=String(E)))return r(T,k,p);T.s=k.charCodeAt(0)==45?(k=k.slice(1),-1):1}(Y=k.indexOf("."))>-1&&(k=k.replace(".","")),(x=k.search(/e/i))>0?(Y<0&&(Y=x),Y+=+k.slice(x+1),k=k.substring(0,x)):Y<0&&(Y=k.length)}else{if(Mn(j,2,y.length,"Base"),j==10&&C)return T=new A(E),q(T,o+T.e+1,a);if(k=String(E),p=typeof E=="number"){if(E*0!=0)return r(T,k,p,j);if(T.s=1/E<0?(k=k.slice(1),-1):1,A.DEBUG&&k.replace(/^0\.0*|\./,"").length>15)throw Error(j1+E)}else T.s=k.charCodeAt(0)===45?(k=k.slice(1),-1):1;for(R=y.slice(0,j),Y=x=0,g=k.length;x<g;x++)if(R.indexOf(V=k.charAt(x))<0){if(V=="."){if(x>Y){Y=g;continue}}else if(!U&&(k==k.toUpperCase()&&(k=k.toLowerCase())||k==k.toLowerCase()&&(k=k.toUpperCase()))){U=!0,x=-1,Y=0;continue}return r(T,String(E),p,j)}p=!1,k=t(k,j,10,T.s),(Y=k.indexOf("."))>-1?k=k.replace(".",""):Y=k.length}for(x=0;k.charCodeAt(x)===48;x++);for(g=k.length;k.charCodeAt(--g)===48;);if(k=k.slice(x,++g)){if(g-=x,p&&A.DEBUG&&g>15&&(E>Gg||E!==Ki(E)))throw Error(j1+T.s*E);if((Y=Y-x-1)>d)T.c=T.e=null;else if(Y<u)T.c=[T.e=0];else{if(T.e=Y,T.c=[],x=(Y+1)%dt,Y<0&&(x+=dt),x<g){for(x&&T.c.push(+k.slice(0,x)),g-=dt;x<g;)T.c.push(+k.slice(x,x+=dt));x=dt-(k=k.slice(x)).length}else x-=g;for(;x--;k+="0");T.c.push(+k)}}else T.c=[T.e=0]}A.clone=fT,A.ROUND_UP=0,A.ROUND_DOWN=1,A.ROUND_CEIL=2,A.ROUND_FLOOR=3,A.ROUND_HALF_UP=4,A.ROUND_HALF_DOWN=5,A.ROUND_HALF_EVEN=6,A.ROUND_HALF_CEIL=7,A.ROUND_HALF_FLOOR=8,A.EUCLID=9,A.config=A.set=function(E){var j,R;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(j="DECIMAL_PLACES")&&(R=E[j],Mn(R,0,cr,j),o=R),E.hasOwnProperty(j="ROUNDING_MODE")&&(R=E[j],Mn(R,0,8,j),a=R),E.hasOwnProperty(j="EXPONENTIAL_AT")&&(R=E[j],R&&R.pop?(Mn(R[0],-cr,0,j),Mn(R[1],0,cr,j),c=R[0],l=R[1]):(Mn(R,-cr,cr,j),c=-(l=R<0?-R:R))),E.hasOwnProperty(j="RANGE"))if(R=E[j],R&&R.pop)Mn(R[0],-cr,-1,j),Mn(R[1],1,cr,j),u=R[0],d=R[1];else if(Mn(R,-cr,cr,j),R)u=-(d=R<0?-R:R);else throw Error(ai+j+" cannot be zero: "+R);if(E.hasOwnProperty(j="CRYPTO"))if(R=E[j],R===!!R)if(R)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))h=R;else throw h=!R,Error(ai+"crypto unavailable");else h=R;else throw Error(ai+j+" not true or false: "+R);if(E.hasOwnProperty(j="MODULO_MODE")&&(R=E[j],Mn(R,0,9,j),f=R),E.hasOwnProperty(j="POW_PRECISION")&&(R=E[j],Mn(R,0,cr,j),m=R),E.hasOwnProperty(j="FORMAT"))if(R=E[j],typeof R=="object")w=R;else throw Error(ai+j+" not an object: "+R);if(E.hasOwnProperty(j="ALPHABET"))if(R=E[j],typeof R=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(R))C=R.slice(0,10)=="0123456789",y=R;else throw Error(ai+j+" invalid: "+R)}else throw Error(ai+"Object expected: "+E);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[c,l],RANGE:[u,d],CRYPTO:h,MODULO_MODE:f,POW_PRECISION:m,FORMAT:w,ALPHABET:y}},A.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!A.DEBUG)return!0;var j,R,V=E.c,U=E.e,Y=E.s;e:if({}.toString.call(V)=="[object Array]"){if((Y===1||Y===-1)&&U>=-cr&&U<=cr&&U===Ki(U)){if(V[0]===0){if(U===0&&V.length===1)return!0;break e}if(j=(U+1)%dt,j<1&&(j+=dt),String(V[0]).length==j){for(j=0;j<V.length;j++)if(R=V[j],R<0||R>=_s||R!==Ki(R))break e;if(R!==0)return!0}}}else if(V===null&&U===null&&(Y===null||Y===1||Y===-1))return!0;throw Error(ai+"Invalid BigNumber: "+E)},A.maximum=A.max=function(){return H(arguments,-1)},A.minimum=A.min=function(){return H(arguments,1)},A.random=function(){var E=9007199254740992,j=Math.random()*E&2097151?function(){return Ki(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(R){var V,U,Y,x,p,g=0,k=[],T=new A(s);if(R==null?R=o:Mn(R,0,cr),x=Hg(R/dt),h)if(crypto.getRandomValues){for(V=crypto.getRandomValues(new Uint32Array(x*=2));g<x;)p=V[g]*131072+(V[g+1]>>>11),p>=9e15?(U=crypto.getRandomValues(new Uint32Array(2)),V[g]=U[0],V[g+1]=U[1]):(k.push(p%1e14),g+=2);g=x/2}else if(crypto.randomBytes){for(V=crypto.randomBytes(x*=7);g<x;)p=(V[g]&31)*281474976710656+V[g+1]*1099511627776+V[g+2]*4294967296+V[g+3]*16777216+(V[g+4]<<16)+(V[g+5]<<8)+V[g+6],p>=9e15?crypto.randomBytes(7).copy(V,g):(k.push(p%1e14),g+=7);g=x/7}else throw h=!1,Error(ai+"crypto unavailable");if(!h)for(;g<x;)p=j(),p<9e15&&(k[g++]=p%1e14);for(x=k[--g],R%=dt,x&&R&&(p=Yg[dt-R],k[g]=Ki(x/p)*p);k[g]===0;k.pop(),g--);if(g<0)k=[Y=0];else{for(Y=-1;k[0]===0;k.splice(0,1),Y-=dt);for(g=1,p=k[0];p>=10;p/=10,g++);g<dt&&(Y-=dt-g)}return T.e=Y,T.c=k,T}}(),A.sum=function(){for(var E=1,j=arguments,R=new A(j[0]);E<j.length;)R=R.plus(j[E++]);return R},t=function(){var E="0123456789";function j(R,V,U,Y){for(var x,p=[0],g,k=0,T=R.length;k<T;){for(g=p.length;g--;p[g]*=V);for(p[0]+=Y.indexOf(R.charAt(k++)),x=0;x<p.length;x++)p[x]>U-1&&(p[x+1]==null&&(p[x+1]=0),p[x+1]+=p[x]/U|0,p[x]%=U)}return p.reverse()}return function(R,V,U,Y,x){var p,g,k,T,O,L,W,P,_=R.indexOf("."),F=o,I=a;for(_>=0&&(T=m,m=0,R=R.replace(".",""),P=new A(V),L=P.pow(R.length-_),m=T,P.c=j(xo(qi(L.c),L.e,"0"),10,U,E),P.e=P.c.length),W=j(R,V,U,x?(p=y,E):(p=E,y)),k=T=W.length;W[--T]==0;W.pop());if(!W[0])return p.charAt(0);if(_<0?--k:(L.c=W,L.e=k,L.s=Y,L=e(L,P,F,I,U),W=L.c,O=L.r,k=L.e),g=k+F+1,_=W[g],T=U/2,O=O||g<0||W[g+1]!=null,O=I<4?(_!=null||O)&&(I==0||I==(L.s<0?3:2)):_>T||_==T&&(I==4||O||I==6&&W[g-1]&1||I==(L.s<0?8:7)),g<1||!W[0])R=O?xo(p.charAt(1),-F,p.charAt(0)):p.charAt(0);else{if(W.length=g,O)for(--U;++W[--g]>U;)W[g]=0,g||(++k,W=[1].concat(W));for(T=W.length;!W[--T];);for(_=0,R="";_<=T;R+=p.charAt(W[_++]));R=xo(R,k,p.charAt(0))}return R}}(),e=function(){function E(V,U,Y){var x,p,g,k,T=0,O=V.length,L=U%fa,W=U/fa|0;for(V=V.slice();O--;)g=V[O]%fa,k=V[O]/fa|0,x=W*g+k*L,p=L*g+x%fa*fa+T,T=(p/Y|0)+(x/fa|0)+W*k,V[O]=p%Y;return T&&(V=[T].concat(V)),V}function j(V,U,Y,x){var p,g;if(Y!=x)g=Y>x?1:-1;else for(p=g=0;p<Y;p++)if(V[p]!=U[p]){g=V[p]>U[p]?1:-1;break}return g}function R(V,U,Y,x){for(var p=0;Y--;)V[Y]-=p,p=V[Y]<U[Y]?1:0,V[Y]=p*x+V[Y]-U[Y];for(;!V[0]&&V.length>1;V.splice(0,1));}return function(V,U,Y,x,p){var g,k,T,O,L,W,P,_,F,I,z,ie,le,he,_e,Ce,ge,Oe=V.s==U.s?1:-1,Ie=V.c,Ne=U.c;if(!Ie||!Ie[0]||!Ne||!Ne[0])return new A(!V.s||!U.s||(Ie?Ne&&Ie[0]==Ne[0]:!Ne)?NaN:Ie&&Ie[0]==0||!Ne?Oe*0:Oe/0);for(_=new A(Oe),F=_.c=[],k=V.e-U.e,Oe=Y+k+1,p||(p=_s,k=Zi(V.e/dt)-Zi(U.e/dt),Oe=Oe/dt|0),T=0;Ne[T]==(Ie[T]||0);T++);if(Ne[T]>(Ie[T]||0)&&k--,Oe<0)F.push(1),O=!0;else{for(he=Ie.length,Ce=Ne.length,T=0,Oe+=2,L=Ki(p/(Ne[0]+1)),L>1&&(Ne=E(Ne,L,p),Ie=E(Ie,L,p),Ce=Ne.length,he=Ie.length),le=Ce,I=Ie.slice(0,Ce),z=I.length;z<Ce;I[z++]=0);ge=Ne.slice(),ge=[0].concat(ge),_e=Ne[0],Ne[1]>=p/2&&_e++;do{if(L=0,g=j(Ne,I,Ce,z),g<0){if(ie=I[0],Ce!=z&&(ie=ie*p+(I[1]||0)),L=Ki(ie/_e),L>1)for(L>=p&&(L=p-1),W=E(Ne,L,p),P=W.length,z=I.length;j(W,I,P,z)==1;)L--,R(W,Ce<P?ge:Ne,P,p),P=W.length,g=1;else L==0&&(g=L=1),W=Ne.slice(),P=W.length;if(P<z&&(W=[0].concat(W)),R(I,W,z,p),z=I.length,g==-1)for(;j(Ne,I,Ce,z)<1;)L++,R(I,Ce<z?ge:Ne,z,p),z=I.length}else g===0&&(L++,I=[0]);F[T++]=L,I[0]?I[z++]=Ie[le]||0:(I=[Ie[le]],z=1)}while((le++<he||I[0]!=null)&&Oe--);O=I[0]!=null,F[0]||F.splice(0,1)}if(p==_s){for(T=1,Oe=F[0];Oe>=10;Oe/=10,T++);q(_,Y+(_.e=T+k*dt-1)+1,x,O)}else _.e=k,_.r=+O;return _}}();function M(E,j,R,V){var U,Y,x,p,g;if(R==null?R=a:Mn(R,0,8),!E.c)return E.toString();if(U=E.c[0],x=E.e,j==null)g=qi(E.c),g=V==1||V==2&&(x<=c||x>=l)?Qh(g,x):xo(g,x,"0");else if(E=q(new A(E),j,R),Y=E.e,g=qi(E.c),p=g.length,V==1||V==2&&(j<=Y||Y<=c)){for(;p<j;g+="0",p++);g=Qh(g,Y)}else if(j-=x,g=xo(g,Y,"0"),Y+1>p){if(--j>0)for(g+=".";j--;g+="0");}else if(j+=Y-p,j>0)for(Y+1==p&&(g+=".");j--;g+="0");return E.s<0&&U?"-"+g:g}function H(E,j){for(var R,V,U=1,Y=new A(E[0]);U<E.length;U++)V=new A(E[U]),(!V.s||(R=oc(Y,V))===j||R===0&&Y.s===j)&&(Y=V);return Y}function G(E,j,R){for(var V=1,U=j.length;!j[--U];j.pop());for(U=j[0];U>=10;U/=10,V++);return(R=V+R*dt-1)>d?E.c=E.e=null:R<u?E.c=[E.e=0]:(E.e=R,E.c=j),E}r=function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,R=/^\.([^.]+)$/,V=/^-?(Infinity|NaN)$/,U=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Y,x,p,g){var k,T=p?x:x.replace(U,"");if(V.test(T))Y.s=isNaN(T)?null:T<0?-1:1;else{if(!p&&(T=T.replace(E,function(O,L,W){return k=(W=W.toLowerCase())=="x"?16:W=="b"?2:8,!g||g==k?L:O}),g&&(k=g,T=T.replace(j,"$1").replace(R,"0.$1")),x!=T))return new A(T,k);if(A.DEBUG)throw Error(ai+"Not a"+(g?" base "+g:"")+" number: "+x);Y.s=null}Y.c=Y.e=null}}();function q(E,j,R,V){var U,Y,x,p,g,k,T,O=E.c,L=Yg;if(O){e:{for(U=1,p=O[0];p>=10;p/=10,U++);if(Y=j-U,Y<0)Y+=dt,x=j,g=O[k=0],T=Ki(g/L[U-x-1]%10);else if(k=Hg((Y+1)/dt),k>=O.length)if(V){for(;O.length<=k;O.push(0));g=T=0,U=1,Y%=dt,x=Y-dt+1}else break e;else{for(g=p=O[k],U=1;p>=10;p/=10,U++);Y%=dt,x=Y-dt+U,T=x<0?0:Ki(g/L[U-x-1]%10)}if(V=V||j<0||O[k+1]!=null||(x<0?g:g%L[U-x-1]),V=R<4?(T||V)&&(R==0||R==(E.s<0?3:2)):T>5||T==5&&(R==4||V||R==6&&(Y>0?x>0?g/L[U-x]:0:O[k-1])%10&1||R==(E.s<0?8:7)),j<1||!O[0])return O.length=0,V?(j-=E.e+1,O[0]=L[(dt-j%dt)%dt],E.e=-j||0):O[0]=E.e=0,E;if(Y==0?(O.length=k,p=1,k--):(O.length=k+1,p=L[dt-Y],O[k]=x>0?Ki(g/L[U-x]%L[x])*p:0),V)for(;;)if(k==0){for(Y=1,x=O[0];x>=10;x/=10,Y++);for(x=O[0]+=p,p=1;x>=10;x/=10,p++);Y!=p&&(E.e++,O[0]==_s&&(O[0]=1));break}else{if(O[k]+=p,O[k]!=_s)break;O[k--]=0,p=1}for(Y=O.length;O[--Y]===0;O.pop());}E.e>d?E.c=E.e=null:E.e<u&&(E.c=[E.e=0])}return E}function X(E){var j,R=E.e;return R===null?E.toString():(j=qi(E.c),j=R<=c||R>=l?Qh(j,R):xo(j,R,"0"),E.s<0?"-"+j:j)}return i.absoluteValue=i.abs=function(){var E=new A(this);return E.s<0&&(E.s=1),E},i.comparedTo=function(E,j){return oc(this,new A(E,j))},i.decimalPlaces=i.dp=function(E,j){var R,V,U,Y=this;if(E!=null)return Mn(E,0,cr),j==null?j=a:Mn(j,0,8),q(new A(Y),E+Y.e+1,j);if(!(R=Y.c))return null;if(V=((U=R.length-1)-Zi(this.e/dt))*dt,U=R[U])for(;U%10==0;U/=10,V--);return V<0&&(V=0),V},i.dividedBy=i.div=function(E,j){return e(this,new A(E,j),o,a)},i.dividedToIntegerBy=i.idiv=function(E,j){return e(this,new A(E,j),0,1)},i.exponentiatedBy=i.pow=function(E,j){var R,V,U,Y,x,p,g,k,T,O=this;if(E=new A(E),E.c&&!E.isInteger())throw Error(ai+"Exponent not an integer: "+X(E));if(j!=null&&(j=new A(j)),p=E.e>14,!O.c||!O.c[0]||O.c[0]==1&&!O.e&&O.c.length==1||!E.c||!E.c[0])return T=new A(Math.pow(+X(O),p?E.s*(2-Zh(E)):+X(E))),j?T.mod(j):T;if(g=E.s<0,j){if(j.c?!j.c[0]:!j.s)return new A(NaN);V=!g&&O.isInteger()&&j.isInteger(),V&&(O=O.mod(j))}else{if(E.e>9&&(O.e>0||O.e<-1||(O.e==0?O.c[0]>1||p&&O.c[1]>=24e7:O.c[0]<8e13||p&&O.c[0]<=9999975e7)))return Y=O.s<0&&Zh(E)?-0:0,O.e>-1&&(Y=1/Y),new A(g?1/Y:Y);m&&(Y=Hg(m/dt+2))}for(p?(R=new A(.5),g&&(E.s=1),k=Zh(E)):(U=Math.abs(+X(E)),k=U%2),T=new A(s);;){if(k){if(T=T.times(O),!T.c)break;Y?T.c.length>Y&&(T.c.length=Y):V&&(T=T.mod(j))}if(U){if(U=Ki(U/2),U===0)break;k=U%2}else if(E=E.times(R),q(E,E.e+1,1),E.e>14)k=Zh(E);else{if(U=+X(E),U===0)break;k=U%2}O=O.times(O),Y?O.c&&O.c.length>Y&&(O.c.length=Y):V&&(O=O.mod(j))}return V?T:(g&&(T=s.div(T)),j?T.mod(j):Y?q(T,m,a,x):T)},i.integerValue=function(E){var j=new A(this);return E==null?E=a:Mn(E,0,8),q(j,j.e+1,E)},i.isEqualTo=i.eq=function(E,j){return oc(this,new A(E,j))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(E,j){return oc(this,new A(E,j))>0},i.isGreaterThanOrEqualTo=i.gte=function(E,j){return(j=oc(this,new A(E,j)))===1||j===0},i.isInteger=function(){return!!this.c&&Zi(this.e/dt)>this.c.length-2},i.isLessThan=i.lt=function(E,j){return oc(this,new A(E,j))<0},i.isLessThanOrEqualTo=i.lte=function(E,j){return(j=oc(this,new A(E,j)))===-1||j===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(E,j){var R,V,U,Y,x=this,p=x.s;if(E=new A(E,j),j=E.s,!p||!j)return new A(NaN);if(p!=j)return E.s=-j,x.plus(E);var g=x.e/dt,k=E.e/dt,T=x.c,O=E.c;if(!g||!k){if(!T||!O)return T?(E.s=-j,E):new A(O?x:NaN);if(!T[0]||!O[0])return O[0]?(E.s=-j,E):new A(T[0]?x:a==3?-0:0)}if(g=Zi(g),k=Zi(k),T=T.slice(),p=g-k){for((Y=p<0)?(p=-p,U=T):(k=g,U=O),U.reverse(),j=p;j--;U.push(0));U.reverse()}else for(V=(Y=(p=T.length)<(j=O.length))?p:j,p=j=0;j<V;j++)if(T[j]!=O[j]){Y=T[j]<O[j];break}if(Y&&(U=T,T=O,O=U,E.s=-E.s),j=(V=O.length)-(R=T.length),j>0)for(;j--;T[R++]=0);for(j=_s-1;V>p;){if(T[--V]<O[V]){for(R=V;R&&!T[--R];T[R]=j);--T[R],T[V]+=_s}T[V]-=O[V]}for(;T[0]==0;T.splice(0,1),--k);return T[0]?G(E,T,k):(E.s=a==3?-1:1,E.c=[E.e=0],E)},i.modulo=i.mod=function(E,j){var R,V,U=this;return E=new A(E,j),!U.c||!E.s||E.c&&!E.c[0]?new A(NaN):!E.c||U.c&&!U.c[0]?new A(U):(f==9?(V=E.s,E.s=1,R=e(U,E,0,3),E.s=V,R.s*=V):R=e(U,E,0,f),E=U.minus(R.times(E)),!E.c[0]&&f==1&&(E.s=U.s),E)},i.multipliedBy=i.times=function(E,j){var R,V,U,Y,x,p,g,k,T,O,L,W,P,_,F,I=this,z=I.c,ie=(E=new A(E,j)).c;if(!z||!ie||!z[0]||!ie[0])return!I.s||!E.s||z&&!z[0]&&!ie||ie&&!ie[0]&&!z?E.c=E.e=E.s=null:(E.s*=I.s,!z||!ie?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(V=Zi(I.e/dt)+Zi(E.e/dt),E.s*=I.s,g=z.length,O=ie.length,g<O&&(P=z,z=ie,ie=P,U=g,g=O,O=U),U=g+O,P=[];U--;P.push(0));for(_=_s,F=fa,U=O;--U>=0;){for(R=0,L=ie[U]%F,W=ie[U]/F|0,x=g,Y=U+x;Y>U;)k=z[--x]%F,T=z[x]/F|0,p=W*k+T*L,k=L*k+p%F*F+P[Y]+R,R=(k/_|0)+(p/F|0)+W*T,P[Y--]=k%_;P[Y]=R}return R?++V:P.splice(0,1),G(E,P,V)},i.negated=function(){var E=new A(this);return E.s=-E.s||null,E},i.plus=function(E,j){var R,V=this,U=V.s;if(E=new A(E,j),j=E.s,!U||!j)return new A(NaN);if(U!=j)return E.s=-j,V.minus(E);var Y=V.e/dt,x=E.e/dt,p=V.c,g=E.c;if(!Y||!x){if(!p||!g)return new A(U/0);if(!p[0]||!g[0])return g[0]?E:new A(p[0]?V:U*0)}if(Y=Zi(Y),x=Zi(x),p=p.slice(),U=Y-x){for(U>0?(x=Y,R=g):(U=-U,R=p),R.reverse();U--;R.push(0));R.reverse()}for(U=p.length,j=g.length,U-j<0&&(R=g,g=p,p=R,j=U),U=0;j;)U=(p[--j]=p[j]+g[j]+U)/_s|0,p[j]=_s===p[j]?0:p[j]%_s;return U&&(p=[U].concat(p),++x),G(E,p,x)},i.precision=i.sd=function(E,j){var R,V,U,Y=this;if(E!=null&&E!==!!E)return Mn(E,1,cr),j==null?j=a:Mn(j,0,8),q(new A(Y),E,j);if(!(R=Y.c))return null;if(U=R.length-1,V=U*dt+1,U=R[U]){for(;U%10==0;U/=10,V--);for(U=R[0];U>=10;U/=10,V++);}return E&&Y.e+1>V&&(V=Y.e+1),V},i.shiftedBy=function(E){return Mn(E,-Gg,Gg),this.times("1e"+E)},i.squareRoot=i.sqrt=function(){var E,j,R,V,U,Y=this,x=Y.c,p=Y.s,g=Y.e,k=o+4,T=new A("0.5");if(p!==1||!x||!x[0])return new A(!p||p<0&&(!x||x[0])?NaN:x?Y:1/0);if(p=Math.sqrt(+X(Y)),p==0||p==1/0?(j=qi(x),(j.length+g)%2==0&&(j+="0"),p=Math.sqrt(+j),g=Zi((g+1)/2)-(g<0||g%2),p==1/0?j="5e"+g:(j=p.toExponential(),j=j.slice(0,j.indexOf("e")+1)+g),R=new A(j)):R=new A(p+""),R.c[0]){for(g=R.e,p=g+k,p<3&&(p=0);;)if(U=R,R=T.times(U.plus(e(Y,U,k,1))),qi(U.c).slice(0,p)===(j=qi(R.c)).slice(0,p))if(R.e<g&&--p,j=j.slice(p-3,p+1),j=="9999"||!V&&j=="4999"){if(!V&&(q(U,U.e+o+2,0),U.times(U).eq(Y))){R=U;break}k+=4,p+=4,V=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(q(R,R.e+o+2,1),E=!R.times(R).eq(Y));break}}return q(R,R.e+o+1,a,E)},i.toExponential=function(E,j){return E!=null&&(Mn(E,0,cr),E++),M(this,E,j,1)},i.toFixed=function(E,j){return E!=null&&(Mn(E,0,cr),E=E+this.e+1),M(this,E,j)},i.toFormat=function(E,j,R){var V,U=this;if(R==null)E!=null&&j&&typeof j=="object"?(R=j,j=null):E&&typeof E=="object"?(R=E,E=j=null):R=w;else if(typeof R!="object")throw Error(ai+"Argument not an object: "+R);if(V=U.toFixed(E,j),U.c){var Y,x=V.split("."),p=+R.groupSize,g=+R.secondaryGroupSize,k=R.groupSeparator||"",T=x[0],O=x[1],L=U.s<0,W=L?T.slice(1):T,P=W.length;if(g&&(Y=p,p=g,g=Y,P-=Y),p>0&&P>0){for(Y=P%p||p,T=W.substr(0,Y);Y<P;Y+=p)T+=k+W.substr(Y,p);g>0&&(T+=k+W.slice(Y)),L&&(T="-"+T)}V=O?T+(R.decimalSeparator||"")+((g=+R.fractionGroupSize)?O.replace(new RegExp("\\d{"+g+"}\\B","g"),"$&"+(R.fractionGroupSeparator||"")):O):T}return(R.prefix||"")+V+(R.suffix||"")},i.toFraction=function(E){var j,R,V,U,Y,x,p,g,k,T,O,L,W=this,P=W.c;if(E!=null&&(p=new A(E),!p.isInteger()&&(p.c||p.s!==1)||p.lt(s)))throw Error(ai+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+X(p));if(!P)return new A(W);for(j=new A(s),k=R=new A(s),V=g=new A(s),L=qi(P),Y=j.e=L.length-W.e-1,j.c[0]=Yg[(x=Y%dt)<0?dt+x:x],E=!E||p.comparedTo(j)>0?Y>0?j:k:p,x=d,d=1/0,p=new A(L),g.c[0]=0;T=e(p,j,0,1),U=R.plus(T.times(V)),U.comparedTo(E)!=1;)R=V,V=U,k=g.plus(T.times(U=k)),g=U,j=p.minus(T.times(U=j)),p=U;return U=e(E.minus(R),V,0,1),g=g.plus(U.times(k)),R=R.plus(U.times(V)),g.s=k.s=W.s,Y=Y*2,O=e(k,V,Y,a).minus(W).abs().comparedTo(e(g,R,Y,a).minus(W).abs())<1?[k,V]:[g,R],d=x,O},i.toNumber=function(){return+X(this)},i.toPrecision=function(E,j){return E!=null&&Mn(E,1,cr),M(this,E,j,2)},i.toString=function(E){var j,R=this,V=R.s,U=R.e;return U===null?V?(j="Infinity",V<0&&(j="-"+j)):j="NaN":(E==null?j=U<=c||U>=l?Qh(qi(R.c),U):xo(qi(R.c),U,"0"):E===10&&C?(R=q(new A(R),o+U+1,a),j=xo(qi(R.c),R.e,"0")):(Mn(E,2,y.length,"Base"),j=t(xo(qi(R.c),U,"0"),10,E,V,!0)),V<0&&R.c[0]&&(j="-"+j)),j},i.valueOf=i.toJSON=function(){return X(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,n!=null&&A.set(n),A}function Zi(n){var e=n|0;return n>0||n===e?e:e-1}function qi(n){for(var e,t,r=1,i=n.length,s=n[0]+"";r<i;){for(e=n[r++]+"",t=dt-e.length;t--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function oc(n,e){var t,r,i=n.c,s=e.c,o=n.s,a=e.s,c=n.e,l=e.e;if(!o||!a)return null;if(t=i&&!i[0],r=s&&!s[0],t||r)return t?r?0:-a:o;if(o!=a)return o;if(t=o<0,r=c==l,!i||!s)return r?0:!i^t?1:-1;if(!r)return c>l^t?1:-1;for(a=(c=i.length)<(l=s.length)?c:l,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return c==l?0:c>l^t?1:-1}function Mn(n,e,t,r){if(n<e||n>t||n!==Ki(n))throw Error(ai+(r||"Argument")+(typeof n=="number"?n<e||n>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function Zh(n){var e=n.c.length-1;return Zi(n.e/dt)==e&&n.c[e]%2!=0}function Qh(n,e){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(e<0?"e":"e+")+e}function xo(n,e,t){var r,i;if(e<0){for(i=t+".";++e;i+=t);n=i+n}else if(r=n.length,++e>r){for(i=t,e-=r;--e;i+=t);n+=i}else e<r&&(n=n.slice(0,e)+"."+n.slice(e));return n}var Qo=fT();const hZ=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`),Zu=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,pT=new Set,fw=typeof process=="object"&&process?process:{},mT=(n,e,t,r)=>{typeof fw.emitWarning=="function"?fw.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)};let $p=globalThis.AbortController,D1=globalThis.AbortSignal;var yv;if(typeof $p>"u"){D1=class{constructor(){v(this,"onabort");v(this,"_onabort",[]);v(this,"reason");v(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},$p=class{constructor(){v(this,"signal",new D1);e()}abort(r){var i,s;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const o of this.signal._onabort)o(r);(s=(i=this.signal).onabort)==null||s.call(i,r)}}};let n=((yv=fw.env)==null?void 0:yv.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{n&&(n=!1,mT("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const fZ=n=>!pT.has(n),_a=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),gT=n=>_a(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Uf:null:null;class Uf extends Array{constructor(e){super(e),this.fill(0)}}var ru;const Ll=class{constructor(e,t){v(this,"heap");v(this,"length");if(!Z(Ll,ru))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}static create(e){const t=gT(e);if(!t)return[];qe(Ll,ru,!0);const r=new Ll(e,t);return qe(Ll,ru,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};let Ff=Ll;ru=new WeakMap,st(Ff,ru,!1);var Ss,yi,Xs,Cs,iu,Xn,As,Jn,Cn,ht,Hr,bi,Rr,ur,Ts,Sr,Bo,Ro,Is,Js,ja,ci,Bd,mw,Dc,Po,Rd,_i,Kp,wT,Bc,su,Pd,eo,va,to,ka,Ud,gw,ou,Lf,au,$f,cn,Tn,Fd,ww,Rc,ld;const mb=class{constructor(e){st(this,Bd);st(this,Kp);st(this,eo);st(this,to);st(this,Ud);st(this,ou);st(this,au);st(this,cn);st(this,Fd);st(this,Rc);st(this,Ss,void 0);st(this,yi,void 0);st(this,Xs,void 0);st(this,Cs,void 0);st(this,iu,void 0);v(this,"ttl");v(this,"ttlResolution");v(this,"ttlAutopurge");v(this,"updateAgeOnGet");v(this,"updateAgeOnHas");v(this,"allowStale");v(this,"noDisposeOnSet");v(this,"noUpdateTTL");v(this,"maxEntrySize");v(this,"sizeCalculation");v(this,"noDeleteOnFetchRejection");v(this,"noDeleteOnStaleGet");v(this,"allowStaleOnFetchAbort");v(this,"allowStaleOnFetchRejection");v(this,"ignoreFetchAbort");st(this,Xn,void 0);st(this,As,void 0);st(this,Jn,void 0);st(this,Cn,void 0);st(this,ht,void 0);st(this,Hr,void 0);st(this,bi,void 0);st(this,Rr,void 0);st(this,ur,void 0);st(this,Ts,void 0);st(this,Sr,void 0);st(this,Bo,void 0);st(this,Ro,void 0);st(this,Is,void 0);st(this,Js,void 0);st(this,ja,void 0);st(this,ci,void 0);st(this,Dc,()=>{});st(this,Po,()=>{});st(this,Rd,()=>{});st(this,_i,()=>!1);st(this,Bc,e=>{});st(this,su,(e,t,r)=>{});st(this,Pd,(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});const{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:h,maxSize:f=0,maxEntrySize:m=0,sizeCalculation:w,fetchMethod:y,noDeleteOnFetchRejection:C,noDeleteOnStaleGet:A,allowStaleOnFetchRejection:M,allowStaleOnFetchAbort:H,ignoreFetchAbort:G}=e;if(t!==0&&!_a(t))throw new TypeError("max option must be a nonnegative integer");const q=t?gT(t):Array;if(!q)throw new Error("invalid max value: "+t);if(qe(this,Ss,t),qe(this,yi,f),this.maxEntrySize=m||Z(this,yi),this.sizeCalculation=w,this.sizeCalculation){if(!Z(this,yi)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(y!==void 0&&typeof y!="function")throw new TypeError("fetchMethod must be a function if specified");if(qe(this,iu,y),qe(this,ja,!!y),qe(this,Jn,new Map),qe(this,Cn,new Array(t).fill(void 0)),qe(this,ht,new Array(t).fill(void 0)),qe(this,Hr,new q(t)),qe(this,bi,new q(t)),qe(this,Rr,0),qe(this,ur,0),qe(this,Ts,Ff.create(t)),qe(this,Xn,0),qe(this,As,0),typeof l=="function"&&qe(this,Xs,l),typeof u=="function"?(qe(this,Cs,u),qe(this,Sr,[])):(qe(this,Cs,void 0),qe(this,Sr,void 0)),qe(this,Js,!!Z(this,Xs)),qe(this,ci,!!Z(this,Cs)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!C,this.allowStaleOnFetchRejection=!!M,this.allowStaleOnFetchAbort=!!H,this.ignoreFetchAbort=!!G,this.maxEntrySize!==0){if(Z(this,yi)!==0&&!_a(Z(this,yi)))throw new TypeError("maxSize must be a positive integer if specified");if(!_a(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ze(this,Kp,wT).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!A,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=_a(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!_a(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ze(this,Bd,mw).call(this)}if(Z(this,Ss)===0&&this.ttl===0&&Z(this,yi)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!Z(this,Ss)&&!Z(this,yi)){const X="LRU_CACHE_UNBOUNDED";fZ(X)&&(pT.add(X),mT("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",X,mb))}}static unsafeExposeInternals(e){return{starts:Z(e,Ro),ttls:Z(e,Is),sizes:Z(e,Bo),keyMap:Z(e,Jn),keyList:Z(e,Cn),valList:Z(e,ht),next:Z(e,Hr),prev:Z(e,bi),get head(){return Z(e,Rr)},get tail(){return Z(e,ur)},free:Z(e,Ts),isBackgroundFetch:t=>{var r;return ze(r=e,cn,Tn).call(r,t)},backgroundFetch:(t,r,i,s)=>{var o;return ze(o=e,au,$f).call(o,t,r,i,s)},moveToTail:t=>{var r;return ze(r=e,Rc,ld).call(r,t)},indexes:t=>{var r;return ze(r=e,eo,va).call(r,t)},rindexes:t=>{var r;return ze(r=e,to,ka).call(r,t)},isStale:t=>{var r;return Z(r=e,_i).call(r,t)}}}get max(){return Z(this,Ss)}get maxSize(){return Z(this,yi)}get calculatedSize(){return Z(this,As)}get size(){return Z(this,Xn)}get fetchMethod(){return Z(this,iu)}get dispose(){return Z(this,Xs)}get disposeAfter(){return Z(this,Cs)}getRemainingTTL(e){return Z(this,Jn).has(e)?1/0:0}*entries(){for(const e of ze(this,eo,va).call(this))Z(this,ht)[e]!==void 0&&Z(this,Cn)[e]!==void 0&&!ze(this,cn,Tn).call(this,Z(this,ht)[e])&&(yield[Z(this,Cn)[e],Z(this,ht)[e]])}*rentries(){for(const e of ze(this,to,ka).call(this))Z(this,ht)[e]!==void 0&&Z(this,Cn)[e]!==void 0&&!ze(this,cn,Tn).call(this,Z(this,ht)[e])&&(yield[Z(this,Cn)[e],Z(this,ht)[e]])}*keys(){for(const e of ze(this,eo,va).call(this)){const t=Z(this,Cn)[e];t!==void 0&&!ze(this,cn,Tn).call(this,Z(this,ht)[e])&&(yield t)}}*rkeys(){for(const e of ze(this,to,ka).call(this)){const t=Z(this,Cn)[e];t!==void 0&&!ze(this,cn,Tn).call(this,Z(this,ht)[e])&&(yield t)}}*values(){for(const e of ze(this,eo,va).call(this))Z(this,ht)[e]!==void 0&&!ze(this,cn,Tn).call(this,Z(this,ht)[e])&&(yield Z(this,ht)[e])}*rvalues(){for(const e of ze(this,to,ka).call(this))Z(this,ht)[e]!==void 0&&!ze(this,cn,Tn).call(this,Z(this,ht)[e])&&(yield Z(this,ht)[e])}[Symbol.iterator](){return this.entries()}find(e,t={}){for(const r of ze(this,eo,va).call(this)){const i=Z(this,ht)[r],s=ze(this,cn,Tn).call(this,i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,Z(this,Cn)[r],this))return this.get(Z(this,Cn)[r],t)}}forEach(e,t=this){for(const r of ze(this,eo,va).call(this)){const i=Z(this,ht)[r],s=ze(this,cn,Tn).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,Z(this,Cn)[r],this)}}rforEach(e,t=this){for(const r of ze(this,to,ka).call(this)){const i=Z(this,ht)[r],s=ze(this,cn,Tn).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,Z(this,Cn)[r],this)}}purgeStale(){let e=!1;for(const t of ze(this,to,ka).call(this,{allowStale:!0}))Z(this,_i).call(this,t)&&(this.delete(Z(this,Cn)[t]),e=!0);return e}dump(){const e=[];for(const t of ze(this,eo,va).call(this,{allowStale:!0})){const r=Z(this,Cn)[t],i=Z(this,ht)[t],s=ze(this,cn,Tn).call(this,i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;const o={value:s};if(Z(this,Is)&&Z(this,Ro)){o.ttl=Z(this,Is)[t];const a=Zu.now()-Z(this,Ro)[t];o.start=Math.floor(Date.now()-a)}Z(this,Bo)&&(o.size=Z(this,Bo)[t]),e.unshift([r,o])}return e}load(e){this.clear();for(const[t,r]of e){if(r.start){const i=Date.now()-r.start;r.start=Zu.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){var h,f,m;if(t===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r;let{noUpdateTTL:l=this.noUpdateTTL}=r;const u=Z(this,Pd).call(this,e,t,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;let d=Z(this,Xn)===0?void 0:Z(this,Jn).get(e);if(d===void 0)d=Z(this,Xn)===0?Z(this,ur):Z(this,Ts).length!==0?Z(this,Ts).pop():Z(this,Xn)===Z(this,Ss)?ze(this,ou,Lf).call(this,!1):Z(this,Xn),Z(this,Cn)[d]=e,Z(this,ht)[d]=t,Z(this,Jn).set(e,d),Z(this,Hr)[Z(this,ur)]=d,Z(this,bi)[d]=Z(this,ur),qe(this,ur,d),ph(this,Xn)._++,Z(this,su).call(this,d,u,c),c&&(c.set="add"),l=!1;else{ze(this,Rc,ld).call(this,d);const w=Z(this,ht)[d];if(t!==w){if(Z(this,ja)&&ze(this,cn,Tn).call(this,w)?w.__abortController.abort(new Error("replaced")):o||(Z(this,Js)&&((h=Z(this,Xs))==null||h.call(this,w,e,"set")),Z(this,ci)&&((f=Z(this,Sr))==null||f.push([w,e,"set"]))),Z(this,Bc).call(this,d),Z(this,su).call(this,d,u,c),Z(this,ht)[d]=t,c){c.set="replace";const y=w&&ze(this,cn,Tn).call(this,w)?w.__staleWhileFetching:w;y!==void 0&&(c.oldValue=y)}}else c&&(c.set="update")}if(i!==0&&!Z(this,Is)&&ze(this,Bd,mw).call(this),Z(this,Is)&&(l||Z(this,Rd).call(this,d,i,s),c&&Z(this,Po).call(this,c,d)),!o&&Z(this,ci)&&Z(this,Sr)){const w=Z(this,Sr);let y;for(;y=w==null?void 0:w.shift();)(m=Z(this,Cs))==null||m.call(this,...y)}return this}pop(){var e;try{for(;Z(this,Xn);){const t=Z(this,ht)[Z(this,Rr)];if(ze(this,ou,Lf).call(this,!0),ze(this,cn,Tn).call(this,t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(Z(this,ci)&&Z(this,Sr)){const t=Z(this,Sr);let r;for(;r=t==null?void 0:t.shift();)(e=Z(this,Cs))==null||e.call(this,...r)}}}has(e,t={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=Z(this,Jn).get(e);if(s!==void 0){const o=Z(this,ht)[s];if(ze(this,cn,Tn).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(Z(this,_i).call(this,s))i&&(i.has="stale",Z(this,Po).call(this,i,s));else return r&&Z(this,Dc).call(this,s),i&&(i.has="hit",Z(this,Po).call(this,i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){const{allowStale:r=this.allowStale}=t,i=Z(this,Jn).get(e);if(i!==void 0&&(r||!Z(this,_i).call(this,i))){const s=Z(this,ht)[i];return ze(this,cn,Tn).call(this,s)?s.__staleWhileFetching:s}}async fetch(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:w,forceRefresh:y=!1,status:C,signal:A}=t;if(!Z(this,ja))return C&&(C.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:C});const M={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:m,ignoreFetchAbort:f,status:C,signal:A};let H=Z(this,Jn).get(e);if(H===void 0){C&&(C.fetch="miss");const G=ze(this,au,$f).call(this,e,H,M,w);return G.__returned=G}else{const G=Z(this,ht)[H];if(ze(this,cn,Tn).call(this,G)){const R=r&&G.__staleWhileFetching!==void 0;return C&&(C.fetch="inflight",R&&(C.returnedStale=!0)),R?G.__staleWhileFetching:G.__returned=G}const q=Z(this,_i).call(this,H);if(!y&&!q)return C&&(C.fetch="hit"),ze(this,Rc,ld).call(this,H),i&&Z(this,Dc).call(this,H),C&&Z(this,Po).call(this,C,H),G;const X=ze(this,au,$f).call(this,e,H,M,w),j=X.__staleWhileFetching!==void 0&&r;return C&&(C.fetch=q?"stale":"refresh",j&&q&&(C.returnedStale=!0)),j?X.__staleWhileFetching:X.__returned=X}}get(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=Z(this,Jn).get(e);if(a!==void 0){const c=Z(this,ht)[a],l=ze(this,cn,Tn).call(this,c);return o&&Z(this,Po).call(this,o,a),Z(this,_i).call(this,a)?(o&&(o.get="stale"),l?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.delete(e),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(ze(this,Rc,ld).call(this,a),i&&Z(this,Dc).call(this,a),c))}else o&&(o.get="miss")}delete(e){var r,i,s,o;let t=!1;if(Z(this,Xn)!==0){const a=Z(this,Jn).get(e);if(a!==void 0)if(t=!0,Z(this,Xn)===1)this.clear();else{Z(this,Bc).call(this,a);const c=Z(this,ht)[a];ze(this,cn,Tn).call(this,c)?c.__abortController.abort(new Error("deleted")):(Z(this,Js)||Z(this,ci))&&(Z(this,Js)&&((r=Z(this,Xs))==null||r.call(this,c,e,"delete")),Z(this,ci)&&((i=Z(this,Sr))==null||i.push([c,e,"delete"]))),Z(this,Jn).delete(e),Z(this,Cn)[a]=void 0,Z(this,ht)[a]=void 0,a===Z(this,ur)?qe(this,ur,Z(this,bi)[a]):a===Z(this,Rr)?qe(this,Rr,Z(this,Hr)[a]):(Z(this,Hr)[Z(this,bi)[a]]=Z(this,Hr)[a],Z(this,bi)[Z(this,Hr)[a]]=Z(this,bi)[a]),ph(this,Xn)._--,Z(this,Ts).push(a)}}if(Z(this,ci)&&((s=Z(this,Sr))!=null&&s.length)){const a=Z(this,Sr);let c;for(;c=a==null?void 0:a.shift();)(o=Z(this,Cs))==null||o.call(this,...c)}return t}clear(){var e,t,r;for(const i of ze(this,to,ka).call(this,{allowStale:!0})){const s=Z(this,ht)[i];if(ze(this,cn,Tn).call(this,s))s.__abortController.abort(new Error("deleted"));else{const o=Z(this,Cn)[i];Z(this,Js)&&((e=Z(this,Xs))==null||e.call(this,s,o,"delete")),Z(this,ci)&&((t=Z(this,Sr))==null||t.push([s,o,"delete"]))}}if(Z(this,Jn).clear(),Z(this,ht).fill(void 0),Z(this,Cn).fill(void 0),Z(this,Is)&&Z(this,Ro)&&(Z(this,Is).fill(0),Z(this,Ro).fill(0)),Z(this,Bo)&&Z(this,Bo).fill(0),qe(this,Rr,0),qe(this,ur,0),Z(this,Ts).length=0,qe(this,As,0),qe(this,Xn,0),Z(this,ci)&&Z(this,Sr)){const i=Z(this,Sr);let s;for(;s=i==null?void 0:i.shift();)(r=Z(this,Cs))==null||r.call(this,...s)}}};let pw=mb;Ss=new WeakMap,yi=new WeakMap,Xs=new WeakMap,Cs=new WeakMap,iu=new WeakMap,Xn=new WeakMap,As=new WeakMap,Jn=new WeakMap,Cn=new WeakMap,ht=new WeakMap,Hr=new WeakMap,bi=new WeakMap,Rr=new WeakMap,ur=new WeakMap,Ts=new WeakMap,Sr=new WeakMap,Bo=new WeakMap,Ro=new WeakMap,Is=new WeakMap,Js=new WeakMap,ja=new WeakMap,ci=new WeakMap,Bd=new WeakSet,mw=function(){const e=new Uf(Z(this,Ss)),t=new Uf(Z(this,Ss));qe(this,Is,e),qe(this,Ro,t),qe(this,Rd,(s,o,a=Zu.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){const c=setTimeout(()=>{Z(this,_i).call(this,s)&&this.delete(Z(this,Cn)[s])},o+1);c.unref&&c.unref()}}),qe(this,Dc,s=>{t[s]=e[s]!==0?Zu.now():0}),qe(this,Po,(s,o)=>{if(e[o]){const a=e[o],c=t[o];s.ttl=a,s.start=c,s.now=r||i();const l=s.now-c;s.remainingTTL=a-l}});let r=0;const i=()=>{const s=Zu.now();if(this.ttlResolution>0){r=s;const o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=Z(this,Jn).get(s);if(o===void 0)return 0;const a=e[o],c=t[o];if(a===0||c===0)return 1/0;const l=(r||i())-c;return a-l},qe(this,_i,s=>e[s]!==0&&t[s]!==0&&(r||i())-t[s]>e[s])},Dc=new WeakMap,Po=new WeakMap,Rd=new WeakMap,_i=new WeakMap,Kp=new WeakSet,wT=function(){const e=new Uf(Z(this,Ss));qe(this,As,0),qe(this,Bo,e),qe(this,Bc,t=>{qe(this,As,Z(this,As)-e[t]),e[t]=0}),qe(this,Pd,(t,r,i,s)=>{if(ze(this,cn,Tn).call(this,r))return 0;if(!_a(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!_a(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),qe(this,su,(t,r,i)=>{if(e[t]=r,Z(this,yi)){const s=Z(this,yi)-e[t];for(;Z(this,As)>s;)ze(this,ou,Lf).call(this,!0)}qe(this,As,Z(this,As)+e[t]),i&&(i.entrySize=r,i.totalCalculatedSize=Z(this,As))})},Bc=new WeakMap,su=new WeakMap,Pd=new WeakMap,eo=new WeakSet,va=function*({allowStale:e=this.allowStale}={}){if(Z(this,Xn))for(let t=Z(this,ur);!(!ze(this,Ud,gw).call(this,t)||((e||!Z(this,_i).call(this,t))&&(yield t),t===Z(this,Rr)));)t=Z(this,bi)[t]},to=new WeakSet,ka=function*({allowStale:e=this.allowStale}={}){if(Z(this,Xn))for(let t=Z(this,Rr);!(!ze(this,Ud,gw).call(this,t)||((e||!Z(this,_i).call(this,t))&&(yield t),t===Z(this,ur)));)t=Z(this,Hr)[t]},Ud=new WeakSet,gw=function(e){return e!==void 0&&Z(this,Jn).get(Z(this,Cn)[e])===e},ou=new WeakSet,Lf=function(e){var s,o;const t=Z(this,Rr),r=Z(this,Cn)[t],i=Z(this,ht)[t];return Z(this,ja)&&ze(this,cn,Tn).call(this,i)?i.__abortController.abort(new Error("evicted")):(Z(this,Js)||Z(this,ci))&&(Z(this,Js)&&((s=Z(this,Xs))==null||s.call(this,i,r,"evict")),Z(this,ci)&&((o=Z(this,Sr))==null||o.push([i,r,"evict"]))),Z(this,Bc).call(this,t),e&&(Z(this,Cn)[t]=void 0,Z(this,ht)[t]=void 0,Z(this,Ts).push(t)),Z(this,Xn)===1?(qe(this,Rr,qe(this,ur,0)),Z(this,Ts).length=0):qe(this,Rr,Z(this,Hr)[t]),Z(this,Jn).delete(r),ph(this,Xn)._--,t},au=new WeakSet,$f=function(e,t,r,i){const s=t===void 0?void 0:Z(this,ht)[t];if(ze(this,cn,Tn).call(this,s))return s;const o=new $p,{signal:a}=r;a==null||a.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});const c={signal:o.signal,options:r,context:i},l=(w,y=!1)=>{const{aborted:C}=o.signal,A=r.ignoreFetchAbort&&w!==void 0;if(r.status&&(C&&!y?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,A&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),C&&!A&&!y)return d(o.signal.reason);const M=f;return Z(this,ht)[t]===f&&(w===void 0?M.__staleWhileFetching?Z(this,ht)[t]=M.__staleWhileFetching:this.delete(e):(r.status&&(r.status.fetchUpdated=!0),this.set(e,w,c.options))),w},u=w=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=w),d(w)),d=w=>{const{aborted:y}=o.signal,C=y&&r.allowStaleOnFetchAbort,A=C||r.allowStaleOnFetchRejection,M=A||r.noDeleteOnFetchRejection,H=f;if(Z(this,ht)[t]===f&&(!M||H.__staleWhileFetching===void 0?this.delete(e):C||(Z(this,ht)[t]=H.__staleWhileFetching)),A)return r.status&&H.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),H.__staleWhileFetching;if(H.__returned===H)throw w},h=(w,y)=>{var A;const C=(A=Z(this,iu))==null?void 0:A.call(this,e,s,c);C&&C instanceof Promise&&C.then(M=>w(M),y),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(w(),r.allowStaleOnFetchAbort&&(w=M=>l(M,!0)))})};r.status&&(r.status.fetchDispatched=!0);const f=new Promise(h).then(l,u),m=Object.assign(f,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,m,{...c.options,status:void 0}),t=Z(this,Jn).get(e)):Z(this,ht)[t]=m,m},cn=new WeakSet,Tn=function(e){if(!Z(this,ja))return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof $p},Fd=new WeakSet,ww=function(e,t){Z(this,bi)[t]=e,Z(this,Hr)[e]=t},Rc=new WeakSet,ld=function(e){e!==Z(this,ur)&&(e===Z(this,Rr)?qe(this,Rr,Z(this,Hr)[e]):ze(this,Fd,ww).call(this,Z(this,bi)[e],Z(this,Hr)[e]),ze(this,Fd,ww).call(this,Z(this,ur),e),qe(this,ur,e))};class K extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,K.prototype),e>K.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,r=Number.isFinite;if(typeof e=="number"){if(e===0)return K.__zero();if(K.__isOneDigitInt(e))return 0>e?K.__oneDigit(-e,!0):K.__oneDigit(e,!1);if(!r(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return K.__fromDouble(e)}if(typeof e=="string"){const i=K.__fromString(e);if(i===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return i}if(typeof e=="boolean")return e===!0?K.__oneDigit(1,!1):K.__zero();if(typeof e=="object"){if(e.constructor===K)return e;const i=K.__toPrimitive(e);return K.BigInt(i)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?K.__toStringGeneric(this,e,!1):K.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const y=e.__unsignedDigit(0);return e.sign?-y:y}const r=e.__digit(t-1),i=K.__clz30(r),s=30*t-i;if(1024<s)return e.sign?-1/0:1/0;let o=s-1,a=r,c=t-1;const l=i+3;let u=l===32?0:a<<l;u>>>=12;const d=l-12;let h=12<=l?0:a<<20+l,f=20+l;for(0<d&&0<c&&(c--,a=e.__digit(c),u|=a>>>30-d,h=a<<d+2,f=d+2);0<f&&0<c;)c--,a=e.__digit(c),h|=30<=f?a<<f-30:a>>>30-f,f-=30;const m=K.__decideRounding(e,f,c,a);if((m===1||m===0&&(1&h)==1)&&(h=h+1>>>0,h===0&&(u++,u>>>20!=0&&(u=0,o++,1023<o))))return e.sign?-1/0:1/0;const w=e.sign?-2147483648:0;return o=o+1023<<20,K.__kBitConversionInts[1]=w|o|u,K.__kBitConversionInts[0]=h,K.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?K.__absoluteSubOne(e).__trim():K.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return K.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&t.__digit(0))?K.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let r=t.__unsignedDigit(0);if(r===1)return e;if(r>=K.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const o=1+(0|r/30),a=e.sign&&(1&r)!=0,c=new K(o,a);c.__initializeDigits();const l=1<<r%30;return c.__setDigit(o-1,l),c}let i=null,s=e;for(1&r&&(i=e),r>>=1;r!==0;r>>=1)s=K.multiply(s,s),1&r&&(i===null?i=s:i=K.multiply(i,s));return i}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let r=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&r--;const i=new K(r,e.sign!==t.sign);i.__initializeDigits();for(let s=0;s<e.length;s++)K.__multiplyAccumulate(t,e.__digit(s),i,s);return i.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>K.__absoluteCompare(e,t))return K.__zero();const r=e.sign!==t.sign,i=t.__unsignedDigit(0);let s;if(t.length===1&&32767>=i){if(i===1)return r===e.sign?e:K.unaryMinus(e);s=K.__absoluteDivSmall(e,i,null)}else s=K.__absoluteDivLarge(e,t,!0,!1);return s.sign=r,s.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>K.__absoluteCompare(e,t))return e;const r=t.__unsignedDigit(0);if(t.length===1&&32767>=r){if(r===1)return K.__zero();const s=K.__absoluteModSmall(e,r);return s===0?K.__zero():K.__oneDigit(s,e.sign)}const i=K.__absoluteDivLarge(e,t,!1,!0);return i.sign=e.sign,i.__trim()}static add(e,t){const r=e.sign;return r===t.sign?K.__absoluteAdd(e,t,r):0<=K.__absoluteCompare(e,t)?K.__absoluteSub(e,t,r):K.__absoluteSub(t,e,!r)}static subtract(e,t){const r=e.sign;return r===t.sign?0<=K.__absoluteCompare(e,t)?K.__absoluteSub(e,t,r):K.__absoluteSub(t,e,!r):K.__absoluteAdd(e,t,r)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?K.__rightShiftByAbsolute(e,t):K.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?K.__leftShiftByAbsolute(e,t):K.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>K.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=K.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<K.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=K.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e.__digit(r)!==t.__digit(r))return!1;return!0}static notEqual(e,t){return!K.equal(e,t)}static bitwiseAnd(e,t){var r=Math.max;if(!e.sign&&!t.sign)return K.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const i=r(e.length,t.length)+1;let s=K.__absoluteSubOne(e,i);const o=K.__absoluteSubOne(t);return s=K.__absoluteOr(s,o,s),K.__absoluteAddOne(s,!0,s).__trim()}return e.sign&&([e,t]=[t,e]),K.__absoluteAndNot(e,K.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var r=Math.max;if(!e.sign&&!t.sign)return K.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const o=r(e.length,t.length),a=K.__absoluteSubOne(e,o),c=K.__absoluteSubOne(t);return K.__absoluteXor(a,c,a).__trim()}const i=r(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let s=K.__absoluteSubOne(t,i);return s=K.__absoluteXor(s,e,s),K.__absoluteAddOne(s,!0,s).__trim()}static bitwiseOr(e,t){var r=Math.max;const i=r(e.length,t.length);if(!e.sign&&!t.sign)return K.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let o=K.__absoluteSubOne(e,i);const a=K.__absoluteSubOne(t);return o=K.__absoluteAnd(o,a,o),K.__absoluteAddOne(o,!0,o).__trim()}e.sign&&([e,t]=[t,e]);let s=K.__absoluteSubOne(t,i);return s=K.__absoluteAndNot(s,e,s),K.__absoluteAddOne(s,!0,s).__trim()}static asIntN(e,t){var r=Math.floor;if(t.length===0)return t;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return K.__zero();if(e>=K.__kMaxLengthBits)return t;const i=0|(e+29)/30;if(t.length<i)return t;const s=t.__unsignedDigit(i-1),o=1<<(e-1)%30;if(t.length===i&&s<o)return t;if((s&o)!==o)return K.__truncateToNBits(e,t);if(!t.sign)return K.__truncateAndSubFromPowerOfTwo(e,t,!0);if(!(s&o-1)){for(let a=i-2;0<=a;a--)if(t.__digit(a)!==0)return K.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===i&&s===o?t:K.__truncateToNBits(e,t)}return K.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var r=Math.floor;if(t.length===0)return t;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return K.__zero();if(t.sign){if(e>K.__kMaxLengthBits)throw new RangeError("BigInt too big");return K.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=K.__kMaxLengthBits)return t;const i=0|(e+29)/30;if(t.length<i)return t;const s=e%30;return t.length==i&&(s===0||!(t.__digit(i-1)>>>s))?t:K.__truncateToNBits(e,t)}static ADD(e,t){if(e=K.__toPrimitive(e),t=K.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=K.__toNumeric(e),t=K.__toNumeric(t),K.__isBigInt(e)&&K.__isBigInt(t))return K.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return K.__compare(e,t,0)}static LE(e,t){return K.__compare(e,t,1)}static GT(e,t){return K.__compare(e,t,2)}static GE(e,t){return K.__compare(e,t,3)}static EQ(e,t){for(;;){if(K.__isBigInt(e))return K.__isBigInt(t)?K.equal(e,t):K.EQ(t,e);if(typeof e=="number"){if(K.__isBigInt(t))return K.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=K.__toPrimitive(t)}else if(typeof e=="string"){if(K.__isBigInt(t))return e=K.__fromString(e),e!==null&&K.equal(e,t);if(typeof t!="object")return e==t;t=K.__toPrimitive(t)}else if(typeof e=="boolean"){if(K.__isBigInt(t))return K.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=K.__toPrimitive(t)}else if(typeof e=="symbol"){if(K.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=K.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==K)return e==t;e=K.__toPrimitive(e)}else return e==t}}static NE(e,t){return!K.EQ(e,t)}static DataViewGetBigInt64(e,t,r=!1){return K.asIntN(64,K.DataViewGetBigUint64(e,t,r))}static DataViewGetBigUint64(e,t,r=!1){const[i,s]=r?[4,0]:[0,4],o=e.getUint32(t+i,r),a=e.getUint32(t+s,r),c=new K(3,!1);return c.__setDigit(0,1073741823&a),c.__setDigit(1,(268435455&o)<<2|a>>>30),c.__setDigit(2,o>>>28),c.__trim()}static DataViewSetBigInt64(e,t,r,i=!1){K.DataViewSetBigUint64(e,t,r,i)}static DataViewSetBigUint64(e,t,r,i=!1){r=K.asUintN(64,r);let s=0,o=0;if(0<r.length&&(o=r.__digit(0),1<r.length)){const l=r.__digit(1);o|=l<<30,s=l>>>2,2<r.length&&(s|=r.__digit(2)<<28)}const[a,c]=i?[4,0]:[0,4];e.setUint32(t+a,s,i),e.setUint32(t+c,o,i)}static __zero(){return new K(0,!1)}static __oneDigit(e,t){const r=new K(1,t);return r.__setDigit(0,e),r}__copy(){const e=new K(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,r,i){if(0<t)return-1;let s;if(0>t)s=-t-1;else{if(r===0)return-1;r--,i=e.__digit(r),s=29}let o=1<<s;if(!(i&o))return-1;if(o-=1,(i&o)!=0)return 1;for(;0<r;)if(r--,e.__digit(r)!==0)return 1;return 0}static __fromDouble(e){K.__kBitConversionDouble[0]=e;const t=2047&K.__kBitConversionInts[1]>>>20,r=t-1023,i=(0|r/30)+1,s=new K(i,0>e);let o=1048575&K.__kBitConversionInts[1]|1048576,a=K.__kBitConversionInts[0];const c=20,l=r%30;let u,d=0;if(l<20){const h=c-l;d=h+32,u=o>>>h,o=o<<32-h|a>>>h,a<<=32-h}else if(l===20)d=32,u=o,o=a,a=0;else{const h=l-c;d=32-h,u=o<<h|a>>>32-h,o=a<<h,a=0}s.__setDigit(i-1,u);for(let h=i-2;0<=h;h--)0<d?(d-=30,u=o>>>2,o=o<<30|a>>>2,a<<=30):u=0,s.__setDigit(h,u);return s.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let r=0;const i=e.length;let s=0;if(s===i)return K.__zero();let o=e.charCodeAt(s);for(;K.__isWhitespace(o);){if(++s===i)return K.__zero();o=e.charCodeAt(s)}if(o===43){if(++s===i)return null;o=e.charCodeAt(s),r=1}else if(o===45){if(++s===i)return null;o=e.charCodeAt(s),r=-1}if(t===0){if(t=10,o===48){if(++s===i)return K.__zero();if(o=e.charCodeAt(s),o===88||o===120){if(t=16,++s===i)return null;o=e.charCodeAt(s)}else if(o===79||o===111){if(t=8,++s===i)return null;o=e.charCodeAt(s)}else if(o===66||o===98){if(t=2,++s===i)return null;o=e.charCodeAt(s)}}}else if(t===16&&o===48){if(++s===i)return K.__zero();if(o=e.charCodeAt(s),o===88||o===120){if(++s===i)return null;o=e.charCodeAt(s)}}if(r!=0&&t!==10)return null;for(;o===48;){if(++s===i)return K.__zero();o=e.charCodeAt(s)}const a=i-s;let c=K.__kMaxBitsPerChar[t],l=K.__kBitsPerCharTableMultiplier-1;if(a>1073741824/c)return null;const u=c*a+l>>>K.__kBitsPerCharTableShift,d=new K(0|(u+29)/30,!1),h=10>t?t:10,f=10<t?t-10:0;if(t&t-1){d.__initializeDigits();let m=!1,w=0;do{let y=0,C=1;for(;;){let M;if(o-48>>>0<h)M=o-48;else if((32|o)-97>>>0<f)M=(32|o)-87;else{m=!0;break}const H=C*t;if(1073741823<H)break;if(C=H,y=y*t+M,w++,++s===i){m=!0;break}o=e.charCodeAt(s)}l=30*K.__kBitsPerCharTableMultiplier-1;const A=0|(c*w+l>>>K.__kBitsPerCharTableShift)/30;d.__inplaceMultiplyAdd(C,y,A)}while(!m)}else{c>>=K.__kBitsPerCharTableShift;const m=[],w=[];let y=!1;do{let C=0,A=0;for(;;){let M;if(o-48>>>0<h)M=o-48;else if((32|o)-97>>>0<f)M=(32|o)-87;else{y=!0;break}if(A+=c,C=C<<c|M,++s===i){y=!0;break}if(o=e.charCodeAt(s),30<A+c)break}m.push(C),w.push(A)}while(!y);K.__fillFromParts(d,m,w)}if(s!==i){if(!K.__isWhitespace(o))return null;for(s++;s<i;s++)if(o=e.charCodeAt(s),!K.__isWhitespace(o))return null}return d.sign=r==-1,d.__trim()}static __fillFromParts(e,t,r){let i=0,s=0,o=0;for(let a=t.length-1;0<=a;a--){const c=t[a],l=r[a];s|=c<<o,o+=l,o===30?(e.__setDigit(i++,s),o=0,s=0):30<o&&(e.__setDigit(i++,1073741823&s),o-=30,s=c>>>l-o)}if(s!==0){if(i>=e.length)throw new Error("implementation bug");e.__setDigit(i++,s)}for(;i<e.length;i++)e.__setDigit(i,0)}static __toStringBasePowerOfTwo(e,t){const r=e.length;let i=t-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);const s=i,o=t-1,a=e.__digit(r-1),c=K.__clz30(a);let l=0|(30*r-c+s-1)/s;if(e.sign&&l++,268435456<l)throw new Error("string too long");const u=Array(l);let d=l-1,h=0,f=0;for(let w=0;w<r-1;w++){const y=e.__digit(w),C=(h|y<<f)&o;u[d--]=K.__kConversionChars[C];const A=s-f;for(h=y>>>A,f=30-A;f>=s;)u[d--]=K.__kConversionChars[h&o],h>>>=s,f-=s}const m=(h|a<<f)&o;for(u[d--]=K.__kConversionChars[m],h=a>>>s-f;h!==0;)u[d--]=K.__kConversionChars[h&o],h>>>=s;if(e.sign&&(u[d--]="-"),d!=-1)throw new Error("implementation bug");return u.join("")}static __toStringGeneric(e,t,r){const i=e.length;if(i===0)return"";if(i===1){let w=e.__unsignedDigit(0).toString(t);return r===!1&&e.sign&&(w="-"+w),w}const s=30*i-K.__clz30(e.__digit(i-1)),o=K.__kMaxBitsPerChar[t],a=o-1;let c=s*K.__kBitsPerCharTableMultiplier;c+=a-1,c=0|c/a;const l=c+1>>1,u=K.exponentiate(K.__oneDigit(t,!1),K.__oneDigit(l,!1));let d,h;const f=u.__unsignedDigit(0);if(u.length===1&&32767>=f){d=new K(e.length,!1),d.__initializeDigits();let w=0;for(let y=2*e.length-1;0<=y;y--){const C=w<<15|e.__halfDigit(y);d.__setHalfDigit(y,0|C/f),w=0|C%f}h=w.toString(t)}else{const w=K.__absoluteDivLarge(e,u,!0,!0);d=w.quotient;const y=w.remainder.__trim();h=K.__toStringGeneric(y,t,!0)}d.__trim();let m=K.__toStringGeneric(d,t,!0);for(;h.length<l;)h="0"+h;return r===!1&&e.sign&&(m="-"+m),m+h}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const r=e.sign;if(r!==t.sign)return K.__unequalSign(r);const i=K.__absoluteCompare(e,t);return 0<i?K.__absoluteGreater(r):0>i?K.__absoluteLess(r):0}static __compareToNumber(e,t){if(K.__isOneDigitInt(t)){const r=e.sign,i=0>t;if(r!==i)return K.__unequalSign(r);if(e.length===0){if(i)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return K.__absoluteGreater(r);const s=Math.abs(t),o=e.__unsignedDigit(0);return o>s?K.__absoluteGreater(r):o<s?K.__absoluteLess(r):0}return K.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const r=e.sign;if(r!==0>t)return K.__unequalSign(r);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;K.__kBitConversionDouble[0]=t;const i=2047&K.__kBitConversionInts[1]>>>20;if(i==2047)throw new Error("implementation bug: handled elsewhere");const s=i-1023;if(0>s)return K.__absoluteGreater(r);const o=e.length;let a=e.__digit(o-1);const c=K.__clz30(a),l=30*o-c,u=s+1;if(l<u)return K.__absoluteLess(r);if(l>u)return K.__absoluteGreater(r);let d=1048576|1048575&K.__kBitConversionInts[1],h=K.__kBitConversionInts[0];const f=20,m=29-c;if(m!==(0|(l-1)%30))throw new Error("implementation bug");let w,y=0;if(20>m){const C=f-m;y=C+32,w=d>>>C,d=d<<32-C|h>>>C,h<<=32-C}else if(m===20)y=32,w=d,d=h,h=0;else{const C=m-f;y=32-C,w=d<<C|h>>>32-C,d=h<<C,h=0}if(a>>>=0,w>>>=0,a>w)return K.__absoluteGreater(r);if(a<w)return K.__absoluteLess(r);for(let C=o-2;0<=C;C--){0<y?(y-=30,w=d>>>2,d=d<<30|h>>>2,h<<=30):w=0;const A=e.__unsignedDigit(C);if(A>w)return K.__absoluteGreater(r);if(A<w)return K.__absoluteLess(r)}if(d!==0||h!==0){if(y===0)throw new Error("implementation bug");return K.__absoluteLess(r)}return 0}static __equalToNumber(e,t){var r=Math.abs;return K.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===r(t):K.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,r){if(e=K.__toPrimitive(e),t=K.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(r){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(K.__isBigInt(e)&&typeof t=="string")return t=K.__fromString(t),t!==null&&K.__comparisonResultToBool(K.__compareToBigInt(e,t),r);if(typeof e=="string"&&K.__isBigInt(t))return e=K.__fromString(e),e!==null&&K.__comparisonResultToBool(K.__compareToBigInt(e,t),r);if(e=K.__toNumeric(e),t=K.__toNumeric(t),K.__isBigInt(e)){if(K.__isBigInt(t))return K.__comparisonResultToBool(K.__compareToBigInt(e,t),r);if(typeof t!="number")throw new Error("implementation bug");return K.__comparisonResultToBool(K.__compareToNumber(e,t),r)}if(typeof e!="number")throw new Error("implementation bug");if(K.__isBigInt(t))return K.__comparisonResultToBool(K.__compareToNumber(t,e),2^r);if(typeof t!="number")throw new Error("implementation bug");return r===0?e<t:r===1?e<=t:r===2?e>t:r===3?e>=t:void 0}__clzmsd(){return K.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,r){if(e.length<t.length)return K.__absoluteAdd(t,e,r);if(e.length===0)return e;if(t.length===0)return e.sign===r?e:K.unaryMinus(e);let i=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&i++;const s=new K(i,r);let o=0,a=0;for(;a<t.length;a++){const c=e.__digit(a)+t.__digit(a)+o;o=c>>>30,s.__setDigit(a,1073741823&c)}for(;a<e.length;a++){const c=e.__digit(a)+o;o=c>>>30,s.__setDigit(a,1073741823&c)}return a<s.length&&s.__setDigit(a,o),s.__trim()}static __absoluteSub(e,t,r){if(e.length===0)return e;if(t.length===0)return e.sign===r?e:K.unaryMinus(e);const i=new K(e.length,r);let s=0,o=0;for(;o<t.length;o++){const a=e.__digit(o)-t.__digit(o)-s;s=1&a>>>30,i.__setDigit(o,1073741823&a)}for(;o<e.length;o++){const a=e.__digit(o)-s;s=1&a>>>30,i.__setDigit(o,1073741823&a)}return i.__trim()}static __absoluteAddOne(e,t,r=null){const i=e.length;r===null?r=new K(i,t):r.sign=t;let s=1;for(let o=0;o<i;o++){const a=e.__digit(o)+s;s=a>>>30,r.__setDigit(o,1073741823&a)}return s!=0&&r.__setDigitGrow(i,1),r}static __absoluteSubOne(e,t){const r=e.length;t=t||r;const i=new K(t,!1);let s=1;for(let o=0;o<r;o++){const a=e.__digit(o)-s;s=1&a>>>30,i.__setDigit(o,1073741823&a)}if(s!=0)throw new Error("implementation bug");for(let o=r;o<t;o++)i.__setDigit(o,0);return i}static __absoluteAnd(e,t,r=null){let i=e.length,s=t.length,o=s;if(i<s){o=i;const l=e,u=i;e=t,i=s,t=l,s=u}let a=o;r===null?r=new K(a,!1):a=r.length;let c=0;for(;c<o;c++)r.__setDigit(c,e.__digit(c)&t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteAndNot(e,t,r=null){const i=e.length,s=t.length;let o=s;i<s&&(o=i);let a=i;r===null?r=new K(a,!1):a=r.length;let c=0;for(;c<o;c++)r.__setDigit(c,e.__digit(c)&~t.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteOr(e,t,r=null){let i=e.length,s=t.length,o=s;if(i<s){o=i;const l=e,u=i;e=t,i=s,t=l,s=u}let a=i;r===null?r=new K(a,!1):a=r.length;let c=0;for(;c<o;c++)r.__setDigit(c,e.__digit(c)|t.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteXor(e,t,r=null){let i=e.length,s=t.length,o=s;if(i<s){o=i;const l=e,u=i;e=t,i=s,t=l,s=u}let a=i;r===null?r=new K(a,!1):a=r.length;let c=0;for(;c<o;c++)r.__setDigit(c,e.__digit(c)^t.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteCompare(e,t){const r=e.length-t.length;if(r!=0)return r;let i=e.length-1;for(;0<=i&&e.__digit(i)===t.__digit(i);)i--;return 0>i?0:e.__unsignedDigit(i)>t.__unsignedDigit(i)?1:-1}static __multiplyAccumulate(e,t,r,i){if(t===0)return;const s=32767&t,o=t>>>15;let a=0,c=0;for(let l,u=0;u<e.length;u++,i++){l=r.__digit(i);const d=e.__digit(u),h=32767&d,f=d>>>15,m=K.__imul(h,s),w=K.__imul(h,o),y=K.__imul(f,s),C=K.__imul(f,o);l+=c+m+a,a=l>>>30,l&=1073741823,l+=((32767&w)<<15)+((32767&y)<<15),a+=l>>>30,c=C+(w>>>15)+(y>>>15),r.__setDigit(i,1073741823&l)}for(;a!=0||c!==0;i++){let l=r.__digit(i);l+=a+c,c=0,a=l>>>30,r.__setDigit(i,1073741823&l)}}static __internalMultiplyAdd(e,t,r,i,s){let o=r,a=0;for(let c=0;c<i;c++){const l=e.__digit(c),u=K.__imul(32767&l,t),d=K.__imul(l>>>15,t),h=u+((32767&d)<<15)+a+o;o=h>>>30,a=d>>>15,s.__setDigit(c,1073741823&h)}if(s.length>i)for(s.__setDigit(i++,o+a);i<s.length;)s.__setDigit(i++,0);else if(o+a!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,r){r>this.length&&(r=this.length);const i=32767&e,s=e>>>15;let o=0,a=t;for(let c=0;c<r;c++){const l=this.__digit(c),u=32767&l,d=l>>>15,h=K.__imul(u,i),f=K.__imul(u,s),m=K.__imul(d,i),w=K.__imul(d,s);let y=a+h+o;o=y>>>30,y&=1073741823,y+=((32767&f)<<15)+((32767&m)<<15),o+=y>>>30,a=w+(f>>>15)+(m>>>15),this.__setDigit(c,1073741823&y)}if(o!=0||a!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,r=null){r===null&&(r=new K(e.length,!1));let i=0;for(let s,o=2*e.length-1;0<=o;o-=2){s=(i<<15|e.__halfDigit(o))>>>0;const a=0|s/t;i=0|s%t,s=(i<<15|e.__halfDigit(o-1))>>>0;const c=0|s/t;i=0|s%t,r.__setDigit(o>>>1,a<<15|c)}return r}static __absoluteModSmall(e,t){let r=0;for(let i=2*e.length-1;0<=i;i--)r=0|((r<<15|e.__halfDigit(i))>>>0)%t;return r}static __absoluteDivLarge(e,t,r,i){const s=t.__halfDigitLength(),o=t.length,a=e.__halfDigitLength()-s;let c=null;r&&(c=new K(a+2>>>1,!1),c.__initializeDigits());const l=new K(s+2>>>1,!1);l.__initializeDigits();const u=K.__clz15(t.__halfDigit(s-1));0<u&&(t=K.__specialLeftShift(t,u,0));const d=K.__specialLeftShift(e,u,1),h=t.__halfDigit(s-1);let f=0;for(let m,w=a;0<=w;w--){m=32767;const y=d.__halfDigit(w+s);if(y!==h){const A=(y<<15|d.__halfDigit(w+s-1))>>>0;m=0|A/h;let M=0|A%h;const H=t.__halfDigit(s-2),G=d.__halfDigit(w+s-2);for(;K.__imul(m,H)>>>0>(M<<16|G)>>>0&&(m--,M+=h,!(32767<M)););}K.__internalMultiplyAdd(t,m,0,o,l);let C=d.__inplaceSub(l,w,s+1);C!==0&&(C=d.__inplaceAdd(t,w,s),d.__setHalfDigit(w+s,32767&d.__halfDigit(w+s)+C),m--),r&&(1&w?f=m<<15:c.__setDigit(w>>>1,f|m))}if(i)return d.__inplaceRightShift(u),r?{quotient:c,remainder:d}:d;if(r)return c;throw new Error("unreachable")}static __clz15(e){return K.__clz30(e)-15}__inplaceAdd(e,t,r){let i=0;for(let s=0;s<r;s++){const o=this.__halfDigit(t+s)+e.__halfDigit(s)+i;i=o>>>15,this.__setHalfDigit(t+s,32767&o)}return i}__inplaceSub(e,t,r){let i=0;if(1&t){t>>=1;let s=this.__digit(t),o=32767&s,a=0;for(;a<r-1>>>1;a++){const u=e.__digit(a),d=(s>>>15)-(32767&u)-i;i=1&d>>>15,this.__setDigit(t+a,(32767&d)<<15|32767&o),s=this.__digit(t+a+1),o=(32767&s)-(u>>>15)-i,i=1&o>>>15}const c=e.__digit(a),l=(s>>>15)-(32767&c)-i;if(i=1&l>>>15,this.__setDigit(t+a,(32767&l)<<15|32767&o),t+a+1>=this.length)throw new RangeError("out of bounds");!(1&r)&&(s=this.__digit(t+a+1),o=(32767&s)-(c>>>15)-i,i=1&o>>>15,this.__setDigit(t+e.length,1073709056&s|32767&o))}else{t>>=1;let s=0;for(;s<e.length-1;s++){const u=this.__digit(t+s),d=e.__digit(s),h=(32767&u)-(32767&d)-i;i=1&h>>>15;const f=(u>>>15)-(d>>>15)-i;i=1&f>>>15,this.__setDigit(t+s,(32767&f)<<15|32767&h)}const o=this.__digit(t+s),a=e.__digit(s),c=(32767&o)-(32767&a)-i;i=1&c>>>15;let l=0;!(1&r)&&(l=(o>>>15)-(a>>>15)-i,i=1&l>>>15),this.__setDigit(t+s,(32767&l)<<15|32767&c)}return i}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const r=this.length-1;for(let i=0;i<r;i++){const s=this.__digit(i+1);this.__setDigit(i,1073741823&s<<30-e|t),t=s>>>e}this.__setDigit(r,t)}static __specialLeftShift(e,t,r){const i=e.length,s=new K(i+r,!1);if(t===0){for(let a=0;a<i;a++)s.__setDigit(a,e.__digit(a));return 0<r&&s.__setDigit(i,0),s}let o=0;for(let a=0;a<i;a++){const c=e.__digit(a);s.__setDigit(a,1073741823&c<<t|o),o=c>>>30-t}return 0<r&&s.__setDigit(i,o),s}static __leftShiftByAbsolute(e,t){const r=K.__toShiftAmount(t);if(0>r)throw new RangeError("BigInt too big");const i=0|r/30,s=r%30,o=e.length,a=s!==0&&e.__digit(o-1)>>>30-s!=0,c=o+i+(a?1:0),l=new K(c,e.sign);if(s===0){let u=0;for(;u<i;u++)l.__setDigit(u,0);for(;u<c;u++)l.__setDigit(u,e.__digit(u-i))}else{let u=0;for(let d=0;d<i;d++)l.__setDigit(d,0);for(let d=0;d<o;d++){const h=e.__digit(d);l.__setDigit(d+i,1073741823&h<<s|u),u=h>>>30-s}if(a)l.__setDigit(o+i,u);else if(u!==0)throw new Error("implementation bug")}return l.__trim()}static __rightShiftByAbsolute(e,t){const r=e.length,i=e.sign,s=K.__toShiftAmount(t);if(0>s)return K.__rightShiftByMaximum(i);const o=0|s/30,a=s%30;let c=r-o;if(0>=c)return K.__rightShiftByMaximum(i);let l=!1;if(i){if(e.__digit(o)&(1<<a)-1)l=!0;else for(let d=0;d<o;d++)if(e.__digit(d)!==0){l=!0;break}}l&&a===0&&!~e.__digit(r-1)&&c++;let u=new K(c,i);if(a===0){u.__setDigit(c-1,0);for(let d=o;d<r;d++)u.__setDigit(d-o,e.__digit(d))}else{let d=e.__digit(o)>>>a;const h=r-o-1;for(let f=0;f<h;f++){const m=e.__digit(f+o+1);u.__setDigit(f,1073741823&m<<30-a|d),d=m>>>a}u.__setDigit(h,d)}return l&&(u=K.__absoluteAddOne(u,!0,u)),u.__trim()}static __rightShiftByMaximum(e){return e?K.__oneDigit(1,!0):K.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>K.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===K)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const s=e[Symbol.toPrimitive];if(s){const o=s(t);if(typeof o!="object")return o;throw new TypeError("Cannot convert object to primitive value")}}const r=e.valueOf;if(r){const s=r.call(e);if(typeof s!="object")return s}const i=e.toString;if(i){const s=i.call(e);if(typeof s!="object")return s}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return K.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===K}static __truncateToNBits(e,t){const r=0|(e+29)/30,i=new K(r,t.sign),s=r-1;for(let a=0;a<s;a++)i.__setDigit(a,t.__digit(a));let o=t.__digit(s);if(e%30!=0){const a=32-e%30;o=o<<a>>>a}return i.__setDigit(s,o),i.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,r){var i=Math.min;const s=0|(e+29)/30,o=new K(s,r);let a=0;const c=s-1;let l=0;for(const f=i(c,t.length);a<f;a++){const m=0-t.__digit(a)-l;l=1&m>>>30,o.__setDigit(a,1073741823&m)}for(;a<c;a++)o.__setDigit(a,0|1073741823&-l);let u=c<t.length?t.__digit(c):0;const d=e%30;let h;if(d==0)h=0-u-l,h&=1073741823;else{const f=32-d;u=u<<f>>>f;const m=1<<32-f;h=m-u-l,h&=m-1}return o.__setDigit(c,h),o.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const r=e>>>1,i=this.__digit(r),s=1&e?32767&i|t<<15:1073709056&i|32767&t;this.__setDigit(r,s)}static __digitPow(e,t){let r=1;for(;0<t;)1&t&&(r*=e),t>>>=1,e*=e;return r}static __isOneDigitInt(e){return(1073741823&e)===e}}K.__kMaxLength=33554432,K.__kMaxLengthBits=K.__kMaxLength<<5,K.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],K.__kBitsPerCharTableShift=5,K.__kBitsPerCharTableMultiplier=1<<K.__kBitsPerCharTableShift,K.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],K.__kBitConversionBuffer=new ArrayBuffer(8),K.__kBitConversionDouble=new Float64Array(K.__kBitConversionBuffer),K.__kBitConversionInts=new Int32Array(K.__kBitConversionBuffer),K.__clz30=Math.clz32?function(n){return Math.clz32(n)-2}:function(n){return n===0?30:0|29-(0|Math.log(n>>>0)/Math.LN2)},K.__imul=Math.imul||function(n,e){return 0|n*e};var pZ=Object.defineProperty,mZ=(n,e,t)=>e in n?pZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vs=(n,e,t)=>(mZ(n,typeof e!="symbol"?e+"":e,t),t),Oc=443636,Nc=-443636,yw="79226673515401279992447579055",bw="4295048016",gZ=14,wZ="59543866431248",yZ="184467440737095516",bZ="15793534762490258745",_Z=class{generateMnemonic(n=24){return Px(hZ,n===12?128:256)}getKeypairFromMnemonics(n,e={}){const t=this.getDerivePath(e);return Dl.deriveKeypair(n,t)}getDerivePath(n={}){const{accountIndex:e=0,isExternal:t=!1,addressIndex:r=0}=n;return`m/44'/784'/${e}'/${t?1:0}'/${r}'`}},Uu=class{constructor(n){this.sdk=n,vs(this,"_lru"),vs(this,"_fetching",{})}async getCacheOrSet(n,e,t=0){var r;const i=this._lru||(this._lru=new pw({max:100}));if(i.has(n))return i.get(n);const o=await((r=this._fetching)[n]||(r[n]=e()));return delete this._fetching[n],i.set(n,o,{ttl:t}),o}get provider(){return this.sdk.provider}get math(){return this.sdk.math}get account(){return this.sdk.account}get network(){return this.sdk.network}get contract(){return this.sdk.contract}get nft(){return this.sdk.nft}get coin(){return this.sdk.coin}get trade(){return this.sdk.trade}get pool(){return this.sdk.pool}};function vZ(n){if("reference"in n)return n.reference;const e=lb(n);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:bT(n)}function uh(n){var e,t;return"objectId"in n?n.objectId:(t=(e=vZ(n))==null?void 0:e.objectId)!=null?t:_T(n)}function ss(n){var e;return"fields"in n?n.fields:(e=yT(n))==null?void 0:e.fields}function yT(n){const e="data"in n?lb(n):n;if(!(!e||!kZ(e)||e.content.dataType!=="moveObject"))return e.content}function kZ(n){return n.content!==void 0}function lb(n){return n.data}function bT(n){if(n.error&&"object_id"in n.error&&"version"in n.error&&"digest"in n.error){const e=n.error;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function _T(n){if(n.error&&"object_id"in n.error&&!("version"in n.error)&&!("digest"in n.error))return n.error.object_id}function SZ(n){return n.data!==void 0}function CZ(n){var e;const t=SZ(n)?n.data:n;return!(t!=null&&t.type)&&"data"in n?((e=t==null?void 0:t.content)==null?void 0:e.dataType)==="package"?"package":Vp(n):t==null?void 0:t.type}function Vp(n){var e;return(e=yT(n))==null?void 0:e.type}function AZ(n){var e;return(e=lb(n))==null?void 0:e.owner}var xd=async(n,e,t)=>{const i=e.length;if(i>50){const s=[];let o=0;const a=Math.ceil(i/50);for(o;o<a;o++)s.push(n.multiGetObjects({ids:e.slice(o*50,(o+1)*50),options:t}));return(await Promise.all(s)).flat()}return await n.multiGetObjects({ids:e,options:t})},TZ=class extends Uu{async getConfig(){return(await this.fetchJSON())[this.network].contract}getFees(){return this.getCacheOrSet("fees",async()=>{const e=(await this.fetchJSON())[this.network].fee;return(await xd(this.provider,Object.values(e),{showContent:!0})).map(r=>{const i=ss(r),s=uh(r),o=Vp(r);return{objectId:s,type:o.split("<")[1].slice(0,-1),fee:i.fee,tickSpacing:i.tick_spacing}})})}fetchJSON(){return this.getCacheOrSet("contract-json",async()=>await(await fetch("https://s3.amazonaws.com/app.turbos.finance/sdk/contract.json?t="+Date.now(),{method:"GET"})).json())}},B1=new B(2).pow(new B(128)),IZ=class{priceToSqrtPriceX64(n,e,t){return new B(new ue(n).mul(ue.pow(10,t-e)).sqrt().mul(ue.pow(2,64)).floor().toFixed(0))}sqrtPriceX64ToPrice(n,e,t){return new ue(n.toString()).mul(ue.pow(2,-64)).pow(2).mul(ue.pow(10,e-t))}priceToTickIndex(n,e,t){return this.sqrtPriceX64ToTickIndex(this.priceToSqrtPriceX64(n,e,t))}sqrtPriceX64ToTickIndex(n){if(n.gt(new B(yw))||n.lt(new B(bw)))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const e=n.bitLength()-1,t=new B(e-64),r=this.signedShiftLeft(t,32,128);let i=new B("8000000000000000","hex"),s=0,o=new B(0),a=e>=64?n.shrn(e-63):n.shln(63-e);for(;i.gt(new B(0))&&s<gZ;){a=a.mul(a);let f=a.shrn(127);a=a.shrn(63+f.toNumber()),o=o.add(i.mul(f)),i=i.shrn(1),s+=1}const c=o.shrn(32),u=r.add(c).mul(new B(wZ)),d=this.signedShiftRight(u.sub(new B(yZ)),64,128).toNumber(),h=this.signedShiftRight(u.add(new B(bZ)),64,128).toNumber();return d==h?d:this.tickIndexToSqrtPriceX64(h).lte(n)?h:d}tickIndexToSqrtPriceX64(n){return n>0?new B(this.tickIndexToSqrtPricePositive(n)):new B(this.tickIndexToSqrtPriceNegative(n))}tickIndexToPrice(n,e,t){return this.sqrtPriceX64ToPrice(this.tickIndexToSqrtPriceX64(n),e,t)}toX64_Decimal(n){return n.mul(ue.pow(2,64))}fromX64_Decimal(n){return n.mul(ue.pow(2,-64))}scaleDown(n,e){return new ue(n).div(ue.pow(10,e)).toString()}scaleUp(n,e){return new ue(n).mul(ue.pow(10,e)).toString()}bitsToNumber(n,e=32){return K.toNumber(K.asIntN(e,K.BigInt(n)))}subUnderflowU128(n,e){return n.add(B1).sub(e).mod(B1)}tickIndexToSqrtPricePositive(n){let e;return n&1?e=new B("79232123823359799118286999567"):e=new B("79228162514264337593543950336"),n&2&&(e=this.signedShiftRight(e.mul(new B("79236085330515764027303304731")),96,256)),n&4&&(e=this.signedShiftRight(e.mul(new B("79244008939048815603706035061")),96,256)),n&8&&(e=this.signedShiftRight(e.mul(new B("79259858533276714757314932305")),96,256)),n&16&&(e=this.signedShiftRight(e.mul(new B("79291567232598584799939703904")),96,256)),n&32&&(e=this.signedShiftRight(e.mul(new B("79355022692464371645785046466")),96,256)),n&64&&(e=this.signedShiftRight(e.mul(new B("79482085999252804386437311141")),96,256)),n&128&&(e=this.signedShiftRight(e.mul(new B("79736823300114093921829183326")),96,256)),n&256&&(e=this.signedShiftRight(e.mul(new B("80248749790819932309965073892")),96,256)),n&512&&(e=this.signedShiftRight(e.mul(new B("81282483887344747381513967011")),96,256)),n&1024&&(e=this.signedShiftRight(e.mul(new B("83390072131320151908154831281")),96,256)),n&2048&&(e=this.signedShiftRight(e.mul(new B("87770609709833776024991924138")),96,256)),n&4096&&(e=this.signedShiftRight(e.mul(new B("97234110755111693312479820773")),96,256)),n&8192&&(e=this.signedShiftRight(e.mul(new B("119332217159966728226237229890")),96,256)),n&16384&&(e=this.signedShiftRight(e.mul(new B("179736315981702064433883588727")),96,256)),n&32768&&(e=this.signedShiftRight(e.mul(new B("407748233172238350107850275304")),96,256)),n&65536&&(e=this.signedShiftRight(e.mul(new B("2098478828474011932436660412517")),96,256)),n&131072&&(e=this.signedShiftRight(e.mul(new B("55581415166113811149459800483533")),96,256)),n&262144&&(e=this.signedShiftRight(e.mul(new B("38992368544603139932233054999993551")),96,256)),this.signedShiftRight(e,32,256)}tickIndexToSqrtPriceNegative(n){let e=Math.abs(n),t;return e&1?t=new B("18445821805675392311"):t=new B("18446744073709551616"),e&2&&(t=this.signedShiftRight(t.mul(new B("18444899583751176498")),64,256)),e&4&&(t=this.signedShiftRight(t.mul(new B("18443055278223354162")),64,256)),e&8&&(t=this.signedShiftRight(t.mul(new B("18439367220385604838")),64,256)),e&16&&(t=this.signedShiftRight(t.mul(new B("18431993317065449817")),64,256)),e&32&&(t=this.signedShiftRight(t.mul(new B("18417254355718160513")),64,256)),e&64&&(t=this.signedShiftRight(t.mul(new B("18387811781193591352")),64,256)),e&128&&(t=this.signedShiftRight(t.mul(new B("18329067761203520168")),64,256)),e&256&&(t=this.signedShiftRight(t.mul(new B("18212142134806087854")),64,256)),e&512&&(t=this.signedShiftRight(t.mul(new B("17980523815641551639")),64,256)),e&1024&&(t=this.signedShiftRight(t.mul(new B("17526086738831147013")),64,256)),e&2048&&(t=this.signedShiftRight(t.mul(new B("16651378430235024244")),64,256)),e&4096&&(t=this.signedShiftRight(t.mul(new B("15030750278693429944")),64,256)),e&8192&&(t=this.signedShiftRight(t.mul(new B("12247334978882834399")),64,256)),e&16384&&(t=this.signedShiftRight(t.mul(new B("8131365268884726200")),64,256)),e&32768&&(t=this.signedShiftRight(t.mul(new B("3584323654723342297")),64,256)),e&65536&&(t=this.signedShiftRight(t.mul(new B("696457651847595233")),64,256)),e&131072&&(t=this.signedShiftRight(t.mul(new B("26294789957452057")),64,256)),e&262144&&(t=this.signedShiftRight(t.mul(new B("37481735321082")),64,256)),t}signedShiftLeft(n,e,t){let r=n.toTwos(t).shln(e);return r.imaskn(t+1),r.fromTwos(t)}signedShiftRight(n,e,t){let r=n.toTwos(t).shrn(e);return r.imaskn(t-e+1),r.fromTwos(t-e)}},Ed=(n,e)=>{const t=uh(n);if(bT(n))throw new Error(`${e}(${t}) had been deleted`);if(_T(n))throw new Error(`${e}(${t}) is not found`);return!0},pl=60*1e3,xZ=class extends Uu{async getPools(n=!1){const e=await this.contract.getConfig(),t=[];let r;do r=await this.provider.getDynamicFields({parentId:e.PoolTableId,cursor:r==null?void 0:r.nextCursor,limit:15}),t.push(...r.data.map(a=>a.objectId));while(r.hasNextPage);if(!t.length)return[];const s=(await xd(this.provider,t,{showContent:!0})).map(a=>ss(a).value.fields.pool_id);if(!s.length)return[];let o=await xd(this.provider,s,{showContent:!0});return n||(o=o.filter(a=>ss(a).unlocked)),o.map(a=>this.parsePool(a))}async getPool(n,e=1500){return this.getCacheOrSet(`pool-${n}`,async()=>{const t=await this.provider.getObject({id:n,options:{showContent:!0}});return Ed(t,"pool"),this.parsePool(t)},e)}async createPool(n){const{fee:e,address:t,tickLower:r,tickUpper:i,sqrtPrice:s,slippage:o,coinTypeA:a,coinTypeB:c}=n,l=await this.contract.getConfig(),u=new ue(n.amountA),d=new ue(n.amountB),[h,f]=await Promise.all([this.coin.selectTradeCoins(t,a,u),this.coin.selectTradeCoins(t,c,d)]),m=n.txb||new xe,w=h.length>0?this.coin.convertTradeCoins(m,h,a,u):[this.coin.zero(a,m)],y=f.length>0?this.coin.convertTradeCoins(m,f,c,d):[this.coin.zero(c,m)];return m.moveCall({target:`${l.PackageId}::pool_factory::deploy_pool_and_mint`,typeArguments:[a,c,e.type],arguments:[m.object(l.PoolConfig),m.object(e.objectId),m.pure(s,"u128"),m.object(l.Positions),m.makeMoveVec({objects:w}),m.makeMoveVec({objects:y}),m.pure(Math.abs(r).toFixed(0),"u32"),m.pure(r<0,"bool"),m.pure(Math.abs(i).toFixed(0),"u32"),m.pure(i<0,"bool"),m.pure(u.toFixed(0),"u64"),m.pure(d.toFixed(0),"u64"),m.pure(this.getMinimumAmountBySlippage(u,o),"u64"),m.pure(this.getMinimumAmountBySlippage(d,o),"u64"),m.pure(t,"address"),m.pure(Date.now()+(n.deadline||pl),"u64"),m.object(He),m.object(l.Versioned)]}),m}async addLiquidity(n){const{address:e,tickLower:t,tickUpper:r,slippage:i,pool:s}=n,o=await this.contract.getConfig(),a=await this.getPoolTypeArguments(s),[c,l]=a,[u,d]=await Promise.all([this.coin.getMetadata(c),this.coin.getMetadata(l)]);if(!u||!d)throw new Error("Invalid coin type");const h=new ue(n.amountA),f=new ue(n.amountB),[m,w]=await Promise.all([this.coin.selectTradeCoins(e,c,h),this.coin.selectTradeCoins(e,l,f)]),y=n.txb||new xe,C=m.length>0?this.coin.convertTradeCoins(y,m,c,h):[this.coin.zero(c,y)],A=w.length>0?this.coin.convertTradeCoins(y,w,l,f):[this.coin.zero(l,y)];return y.moveCall({target:`${o.PackageId}::position_manager::mint`,typeArguments:a,arguments:[y.object(s),y.object(o.Positions),y.makeMoveVec({objects:C}),y.makeMoveVec({objects:A}),y.pure(Math.abs(t).toFixed(0),"u32"),y.pure(t<0,"bool"),y.pure(Math.abs(r).toFixed(0),"u32"),y.pure(r<0,"bool"),y.pure(h.toFixed(0),"u64"),y.pure(f.toFixed(0),"u64"),y.pure(this.getMinimumAmountBySlippage(h,i),"u64"),y.pure(this.getMinimumAmountBySlippage(f,i),"u64"),y.pure(e,"address"),y.pure(Date.now()+(n.deadline||pl),"u64"),y.object(He),y.object(o.Versioned)]}),y}async increaseLiquidity(n){const{pool:e,slippage:t,address:r,nft:i}=n,s=await this.contract.getConfig(),o=new ue(n.amountA),a=new ue(n.amountB),c=await this.getPoolTypeArguments(e),[l,u]=c,[d,h]=await Promise.all([this.coin.selectTradeCoins(r,l,o),this.coin.selectTradeCoins(r,u,a)]),f=n.txb||new xe,m=d.length>0?this.coin.convertTradeCoins(f,d,l,o):[this.coin.zero(l,f)],w=h.length>0?this.coin.convertTradeCoins(f,h,u,a):[this.coin.zero(u,f)];return f.moveCall({target:`${s.PackageId}::position_manager::increase_liquidity`,typeArguments:c,arguments:[f.object(e),f.object(s.Positions),f.makeMoveVec({objects:m}),f.makeMoveVec({objects:w}),f.object(i),f.pure(o.toFixed(0),"u64"),f.pure(a.toFixed(0),"u64"),f.pure(this.getMinimumAmountBySlippage(o,t),"u64"),f.pure(this.getMinimumAmountBySlippage(a,t),"u64"),f.pure(Date.now()+(n.deadline||pl*3),"u64"),f.object(He),f.object(s.Versioned)]}),f}async decreaseLiquidity(n){const{slippage:e,nft:t,pool:r,decreaseLiquidity:i}=n,s=new ue(n.amountA),o=new ue(n.amountB),a=await this.contract.getConfig(),c=await this.getPoolTypeArguments(r),l=n.txb||new xe;return l.moveCall({target:`${a.PackageId}::position_manager::decrease_liquidity`,typeArguments:c,arguments:[l.object(r),l.object(a.Positions),l.object(t),l.pure(new B(i).toString(),"u128"),l.pure(this.getMinimumAmountBySlippage(s,e),"u64"),l.pure(this.getMinimumAmountBySlippage(o,e),"u64"),l.pure(Date.now()+(n.deadline||pl*3),"u64"),l.object(He),l.object(a.Versioned)]}),l}async removeLiquidity(n){let e=await this.decreaseLiquidity(n);return e=await this.collectFee({txb:e,...n}),e=await this.collectReward({txb:e,...n}),e=await this.nft.burn({txb:e,nft:n.nft,pool:n.pool}),e}async collectFee(n){const{pool:e,nft:t,address:r,collectAmountA:i,collectAmountB:s}=n,o=n.txb||new xe;if(Number(i)===0&&Number(s)===0)return o;const a=await this.contract.getConfig(),c=await this.getPoolTypeArguments(e);return o.moveCall({target:`${a.PackageId}::position_manager::collect`,typeArguments:c,arguments:[o.object(e),o.object(a.Positions),o.object(t),o.pure(i,"u64"),o.pure(s,"u64"),o.pure(r),o.pure(Date.now()+(n.deadline||pl*3),"u64"),o.object(He),o.object(a.Versioned)]}),o}async collectReward(n){const{pool:e,nft:t,rewardAmounts:r,address:i}=n,s=n.txb||new xe,o=await this.contract.getConfig(),a=await this.getPoolTypeArguments(e);return(await this.getPool(e)).reward_infos.forEach((l,u)=>{r[u]!=="0"&&r[u]!==0&&s.moveCall({target:`${o.PackageId}::position_manager::collect_reward`,typeArguments:[...a,l.fields.vault_coin_type],arguments:[s.object(e),s.object(o.Positions),s.object(t),s.object(l.fields.vault),s.pure(u,"u64"),s.pure(r[u],"u64"),s.pure(i),s.pure(Date.now()+(n.deadline||pl*3),"u64"),s.object(He),s.object(o.Versioned)]})}),s}getTokenAmountsFromLiquidity(n){const e=new ue((n.liquidity||new B(1e8)).toString()),t=new ue(n.currentSqrtPrice.toString()),r=new ue(n.lowerSqrtPrice.toString()),i=new ue(n.upperSqrtPrice.toString());let s,o;n.currentSqrtPrice.lt(n.lowerSqrtPrice)?(s=this.math.toX64_Decimal(e).mul(i.sub(r)).div(r.mul(i)),o=new ue(0)):n.currentSqrtPrice.lt(n.upperSqrtPrice)?(s=this.math.toX64_Decimal(e).mul(i.sub(t)).div(t.mul(i)),o=this.math.fromX64_Decimal(e.mul(t.sub(r)))):(s=new ue(0),o=this.math.fromX64_Decimal(e.mul(i.sub(r))));const a=n.ceil!==!1?"ceil":"floor";return[new B(s[a]().toString()),new B(o[a]().toString())]}async getPoolTypeArguments(n){return this.getCacheOrSet("pool-type-"+n,async()=>(await this.getPool(n)).types)}parsePoolType(n,e){var t;const r=((t=n.replace(">","").split("<")[1])==null?void 0:t.split(/,\s*/))||[];if(e!==void 0&&e!==r.length)throw new Error("Invalid pool type");return r}async getFixedLiquidity(n){var e,t;const{coinTypeA:r,coinTypeB:i,amountA:s,amountB:o}=n,[a,c]=await Promise.all([this.coin.getMetadata(r),this.coin.getMetadata(i)]),l=new ue(this.math.scaleDown(s,a.decimals)).mul((e=n.priceA)!=null?e:1),u=new ue(this.math.scaleDown(o,c.decimals)).mul((t=n.priceB)!=null?t:1);return{liquidityA:l.toString(),liquidityB:u.toString(),liquidity:l.plus(u).toString()}}parsePool(n){const e=ss(n),t=uh(n),r=CZ(n),i=this.parsePoolType(r,3);return this.getCacheOrSet("pool-type-"+t,async()=>i),{...e,objectId:t,type:r,types:i}}getMinimumAmountBySlippage(n,e){const t=new ue(n),r=new ue(1).minus(new ue(e).div(100));if(r.lte(0)||r.gt(1))throw new Error("invalid slippage range");return t.mul(r).toFixed(0)}},EZ=(n,e)=>{const{pool:t,position:r,tickLowerDetail:i,tickUpperDetail:s}=e,o=new B(t.fee_growth_global_a),a=new B(r.fee_growth_inside_a),c=new B(r.tokens_owed_a),l=new B(t.fee_growth_global_b),u=new B(r.fee_growth_inside_b),d=new B(r.tokens_owed_b),h=new B(r.liquidity);let f,m,w,y;const C=n.bitsToNumber(t.tick_current_index.fields.bits),A=n.bitsToNumber(r.tick_lower_index.fields.bits),M=n.bitsToNumber(r.tick_upper_index.fields.bits);C<A?(f=n.subUnderflowU128(o,i.feeGrowthOutsideA),m=n.subUnderflowU128(l,i.feeGrowthOutsideB)):(f=i.feeGrowthOutsideA,m=i.feeGrowthOutsideB),C<M?(w=s.feeGrowthOutsideA,y=s.feeGrowthOutsideB):(w=n.subUnderflowU128(o,s.feeGrowthOutsideA),y=n.subUnderflowU128(l,s.feeGrowthOutsideB));const H=n.subUnderflowU128(n.subUnderflowU128(o,f),w),G=n.subUnderflowU128(n.subUnderflowU128(l,m),y),q=n.subUnderflowU128(H,a).mul(h).shrn(64),X=n.subUnderflowU128(G,u).mul(h).shrn(64);return{feeOwedA:c.add(q).toString(),feeOwedB:d.add(X).toString()}},R1=new B(0),P1=new B(1),MZ=new B(2),OZ={mul(n,e,t){const r=n.mul(e);if(this.isOverLimit(r,t))throw new Error(`Mul result higher than u${t}`);return r},mulDiv(n,e,t,r){return this.mulDivRoundUpIf(n,e,t,!1,r)},mulDivRoundUpIf(n,e,t,r,i){if(t.eq(R1))throw new Error("mulDiv denominator is zero");const s=this.mul(n,e,i),o=s.div(t);return r&&s.mod(t).gt(R1)?o.add(P1):o},isOverLimit(n,e){const t=MZ.pow(new B(e)).sub(P1);return n.gt(t)}},NZ=(n,e)=>{var t,r,i,s;const{pool:o,position:a,tickLowerDetail:c,tickUpperDetail:l,timeStampInSeconds:u}=e,d=new B(new ue(o.reward_last_updated_time_ms).div(1e3).toFixed(0)),f=(u??new B(Date.now()).div(new B(1e3))).sub(new B(d)),m=[],w=new B(o.liquidity),y=new B(a.liquidity);for(let C=0;C<3;++C){const A=o.reward_infos[C],M={emissionsPerSecondX64:new B(A?A.fields.emissions_per_second:"0"),growthGlobalX64:new B(A?A.fields.growth_global:"0")},H={growthInsideCheckpoint:new B((r=(t=a.reward_infos[C])==null?void 0:t.fields.reward_growth_inside)!=null?r:"0"),amountOwed:new B((s=(i=a.reward_infos[C])==null?void 0:i.fields.amount_owed)!=null?s:"0")};let G=M.growthGlobalX64;if(!w.isZero()){const U=OZ.mulDiv(f,M.emissionsPerSecondX64,w,128);G=M.growthGlobalX64.add(U)}const q=c.rewardGrowthsOutside[C],X=l.rewardGrowthsOutside[C];let E=G;c.initialized&&(E=n.bitsToNumber(o.tick_current_index.fields.bits)<n.bitsToNumber(a.tick_lower_index.fields.bits)?n.subUnderflowU128(G,q):q);let j=new B(0);l.initialized&&(j=n.bitsToNumber(o.tick_current_index.fields.bits)<n.bitsToNumber(a.tick_upper_index.fields.bits)?X:n.subUnderflowU128(G,X));const R=n.subUnderflowU128(n.subUnderflowU128(G,E),j),V=H.amountOwed.shln(64);m[C]=V.add(n.subUnderflowU128(R,H.growthInsideCheckpoint).mul(y)).shrn(64).toString()}return m},jZ=class extends Uu{async getOwner(n){const e=await this.getObject(n),t=AZ(e);if(!(!t||typeof t=="string")){if("ObjectOwner"in t)return t.ObjectOwner;if("AddressOwner"in t)return t.AddressOwner}}async getFields(n){const e=await this.getObject(n);return ss(e)}async getPositionFields(n){const e=await this.contract.getConfig(),t=await this.provider.getDynamicFieldObject({parentId:e.Positions,name:{type:"address",value:n}});return ss(t)}async getPositionFieldsByPositionId(n){const e=await this.provider.getObject({id:n,options:{showContent:!0}});return Ed(e,"position"),ss(e)}async getPositionTick(n,e){const t=await this.provider.getDynamicFieldObject({parentId:n,name:{type:e.type,value:e.fields}}),r=ss(t);if(r)return{tickIndex:this.math.bitsToNumber(r.name.fields.bits),initialized:r.value.fields.initialized,liquidityNet:new B(this.math.bitsToNumber(r.value.fields.liquidity_net.fields.bits,128).toString()),liquidityGross:new B(r.value.fields.liquidity_gross),feeGrowthOutsideA:new B(r.value.fields.fee_growth_outside_a),feeGrowthOutsideB:new B(r.value.fields.fee_growth_outside_b),rewardGrowthsOutside:r.value.fields.reward_growths_outside.map(i=>new B(i))}}async getPositionAPR(n){const{poolId:e,getPrice:t,fees24h:r,tickLower:i,tickUpper:s}=n,o=await this.pool.getPool(e),a=this.math.bitsToNumber(o.tick_current_index.fields.bits),[c,l,u,d]=await Promise.all([this.coin.getMetadata(o.types[0]),this.coin.getMetadata(o.types[1]),t(o.types[0]),t(o.types[1])]);if(!u||!d||i>=s||a<i||a>=s)return{fees:"0",rewards:"0",total:"0"};const{minTokenA:h,minTokenB:f}=this.getRemoveLiquidityQuote(o,i,s),m=new ue(this.math.scaleDown(h.toString(),c.decimals)).mul(u),w=new ue(this.math.scaleDown(f.toString(),l.decimals)).mul(d),y=m.add(w),C=y.isZero()?new ue(0):new ue(r).mul(365).div(y).mul(100);let A=new ue(0);return await Promise.all(o.reward_infos.map(async M=>{const{emissions_per_second:H}=M.fields,G=this.coin.formatCoinType(M.fields.vault_coin_type),[q,X]=await Promise.all([t(G),this.coin.getMetadata(G)]);!H||H==="0"||!q||(A=A.add(new ue(new B(H).shrn(64).toString()).div(10**X.decimals).mul(31536e3).mul(q).div(y).mul(100)))})),{fees:C.toString(),rewards:A.toString(),total:C.plus(A).toString()}}getRemoveLiquidityQuote(n,e,t){const r=new B(0),i=new B(n.liquidity),s=this.math.bitsToNumber(n.tick_current_index.fields.bits),o=this.math.tickIndexToSqrtPriceX64(e),a=this.math.tickIndexToSqrtPriceX64(t);if(s<e){const l=this.getTokenAFromLiquidity(i,o,a);return{minTokenA:this.adjustForSlippage(l),minTokenB:r}}if(s<t){const l=new B(n.sqrt_price),u=this.getTokenAFromLiquidity(i,l,a),d=this.getTokenBFromLiquidity(i,o,l);return{minTokenA:this.adjustForSlippage(u),minTokenB:this.adjustForSlippage(d)}}const c=this.getTokenBFromLiquidity(i,o,a);return{minTokenA:r,minTokenB:this.adjustForSlippage(c)}}adjustForSlippage(n){const e={numerator:new B(0),denominator:new B(1e3)};return n.mul(e.denominator).div(e.denominator.add(e.numerator))}getTokenAFromLiquidity(n,e,t){const r=n.mul(t.sub(e)).shln(64),i=t.mul(e);return r.div(i)}getTokenBFromLiquidity(n,e,t){return n.mul(t.sub(e)).shrn(64)}async burn(n){const{pool:e,nft:t}=n,r=n.txb||new xe,i=await this.contract.getConfig(),s=await this.pool.getPoolTypeArguments(e);return r.moveCall({target:`${i.PackageId}::position_manager::burn`,typeArguments:s,arguments:[r.object(i.Positions),r.object(t),r.object(i.Versioned)]}),r}async getPositionLiquidityUSD(n){const{position:e,poolId:t,priceA:r,priceB:i}=n,s=await this.pool.getPool(t),o=this.pool.getTokenAmountsFromLiquidity({currentSqrtPrice:new B(s.sqrt_price),lowerSqrtPrice:this.math.tickIndexToSqrtPriceX64(this.math.bitsToNumber(e.tick_lower_index.fields.bits)),upperSqrtPrice:this.math.tickIndexToSqrtPriceX64(this.math.bitsToNumber(e.tick_upper_index.fields.bits)),liquidity:new B(e.liquidity===void 0?1e8:e.liquidity)}),[a,c]=await Promise.all([this.coin.getMetadata(s.types[0]),this.coin.getMetadata(s.types[1])]),l=new ue(o[0].toString()).div(10**a.decimals).mul(r||0),u=new ue(o[1].toString()).div(10**c.decimals).mul(i||0);return l.plus(u).toString()}async getUnclaimedFeesAndRewards(n){const{position:e,poolId:t}=n,r=await this.getPositionFieldsByPositionId(e.id.id),[i,s,o]=await Promise.all([this.pool.getPool(t,30),this.nft.getPositionTick(t,r.tick_lower_index),this.nft.getPositionTick(t,r.tick_upper_index)]),a={...n,pool:i,tickLowerDetail:s,tickUpperDetail:o},[c,l]=await Promise.all([this.getUnclaimedFees(a),this.getUnclaimedRewards(a)]),{unclaimedFees:u,...d}=c,{unclaimedRewards:h,...f}=l;return{fees:c.unclaimedFees.toString(),rewards:h.toString(),total:u.plus(h).toString(),fields:{...d,...f}}}async getUnclaimedFees(n){const{position:e,pool:t,getPrice:r,tickLowerDetail:i,tickUpperDetail:s}=n,[o,a,c,l]=await Promise.all([this.coin.getMetadata(t.types[0]),this.coin.getMetadata(t.types[1]),r(t.types[0]),r(t.types[1])]),u=EZ(this.math,{pool:t,position:e,tickLowerDetail:i,tickUpperDetail:s});let d=this.math.scaleDown(u.feeOwedA,o.decimals),h=this.math.scaleDown(u.feeOwedB,a.decimals);function f(y,C){return new ue(1e6).mul(ue.pow(10,C)).lt(y)}f(d,o.decimals)&&(d="0",u.feeOwedA="0"),f(h,a.decimals)&&(h="0",u.feeOwedB="0");const m=c===void 0?new ue(0):new ue(c).mul(d),w=l===void 0?new ue(0):new ue(l).mul(h);return{unclaimedFees:m.plus(w),scaledFeeOwedA:d,scaledFeeOwedB:h,...u}}async getUnclaimedRewards(n){const{position:e,pool:t,getPrice:r,tickLowerDetail:i,tickUpperDetail:s}=n,o=NZ(this.math,{pool:t,position:e,tickLowerDetail:i,tickUpperDetail:s}),a=[...o],c=t.reward_infos.map(h=>this.coin.formatCoinType(h.fields.vault_coin_type)),l=await Promise.all([...t.reward_infos.map((h,f)=>this.coin.getMetadata(c[f]))]),u=await Promise.all(t.reward_infos.map((h,f)=>r(c[f])));l.forEach((h,f)=>{a[f]=this.math.scaleDown(a[f],h.decimals)});let d=new ue(0);return t.reward_infos.some((h,f)=>{const m=u[f];return m?(d=d.plus(new ue(m).mul(a[f])),!1):(d=d.plus(1),!0)}),{unclaimedRewards:d,collectRewards:o,scaledCollectRewards:a}}getObject(n){return this.getCacheOrSet("nft-object-"+n,async()=>{const e=await this.provider.getObject({id:n,options:{showContent:!0,showOwner:!0}});return Ed(e,"nft"),e})}},DZ=class extends Uu{isSUI(n){return Et(n)==="0x000000000000000000000000000000000000000000000000000002::sui::sui"}async getMetadata(n){return this.getCacheOrSet(`coin-metadata-${n}`,async()=>{const e=await this.provider.getCoinMetadata({coinType:n});if(!e)throw new Error(`Coin "${n}" is not found`);return e})}async selectTradeCoins(n,e,t){if(t.eq(0))return[];const r=[],i=[];let s=new ue(0),o;do o=await this.provider.getCoins({owner:n,coinType:e,cursor:o==null?void 0:o.nextCursor}),r.push(...o.data);while(o.hasNextPage);r.sort((a,c)=>Number(c.balance)-Number(a.balance));for(const a of r)if(i.push(a.coinObjectId),s=s.add(a.balance),s.gte(t))break;return i}convertTradeCoins(n,e,t,r){return this.isSUI(t)?[n.splitCoins(n.gas,[n.pure(r.toNumber())])[0]]:e.map(i=>n.object(i))}zero(n,e){return e.moveCall({typeArguments:[n],target:"0x2::coin::zero",arguments:[]})}formatCoinType(n,e=!1){let r=n.replace(/^0x/i,"");return r=r.replace(/^0+(2::sui::SUI)$/,"$1"),"0x"+(e&&r.length<64&&n!=="2::sui:SUI"?"0".repeat(64-r.length):"")+r}async takeAmountFromCoins(n,e,t,r){const i=await this.selectTradeCoins(n,e,new ue(t));return this.isSUI(e)?[this.splitSUIFromGas([t],r)]:this.splitMultiCoins(i,[t],r)}splitSUIFromGas(n,e){return e.splitCoins(e.gas,n)}splitMultiCoins(n,e,t){const r=n.map(o=>t.object(o)),i=r[0];return n.length>1&&t.mergeCoins(i,r.slice(1)),[t.splitCoins(i,e),i]}},qp=60*1e3,Hh=100,BZ=class extends Uu{async swap(n){const{coinTypeA:e,coinTypeB:t,address:r,amountSpecifiedIsInput:i,slippage:s}=n,o=new ue(n.amountA),a=new ue(n.amountB),c=await this.contract.getConfig(),l=await Promise.all(n.routes.map(async w=>{const y=await this.pool.getPoolTypeArguments(w.pool),[C,A]=await Promise.all([this.coin.getMetadata(y[0]),this.coin.getMetadata(y[1])]);return{...w,coinA:C,coinB:A,typeArguments:y}})),u=await this.coin.selectTradeCoins(r,e,o),{functionName:d,typeArguments:h}=this.getFunctionNameAndTypeArguments(l.map(({typeArguments:w})=>w),e,t),f=l.map(({nextTickIndex:w,coinA:y,coinB:C,a2b:A})=>{const M=this.math.tickIndexToPrice(w,y.decimals,C.decimals);return this.sqrtPriceWithSlippage(M,s,A,y.decimals,C.decimals)}),m=n.txb||new xe;return m.moveCall({target:`${c.PackageId}::swap_router::${d}`,typeArguments:h,arguments:[...l.map(({pool:w})=>m.object(w)),m.makeMoveVec({objects:this.coin.convertTradeCoins(m,u,e,o)}),m.pure((i?o:a).toFixed(0),"u64"),m.pure(this.amountOutWithSlippage(i?a:o,s,i),"u64"),...f.map(w=>m.pure(w,"u128")),m.pure(i,"bool"),m.pure(r,"address"),m.pure(Date.now()+(n.deadline||qp*3),"u64"),m.object(He),m.object(c.Versioned)]}),m}async computeSwapResult(n){const{pools:e,amountSpecified:t,amountSpecifiedIsInput:r,address:i,tickStep:s}=n,o=await this.contract.getConfig(),a=e.map(d=>d.pool);let c=await xd(this.provider,a,{showContent:!0});const l=new xe;c.map(async d=>{const h=ss(d),f=e.find(A=>A.pool===h.id.id),m=this.math.bitsToNumber(h.tick_current_index.fields.bits);let w=m-h.tick_spacing*(s||Hh),y=m+h.tick_spacing*(s||Hh);w=w<Nc?Nc:w,y=y>Oc?Oc:y;const C=this.pool.parsePoolType(Vp(d));l.moveCall({target:`${o.PackageId}::pool_fetcher::compute_swap_result`,typeArguments:C,arguments:[l.object(h.id.id),l.pure(f.a2b,"bool"),l.pure(new ue(t).toFixed(0),"u128"),l.pure(r,"bool"),l.pure(this.math.tickIndexToSqrtPriceX64(f.a2b?w:y).toString(),"u128"),l.object(He),l.object(o.Versioned)]})});const u=await this.provider.devInspectTransactionBlock({transactionBlock:l,sender:i});if(u.error)throw new Error(u.error);return u.events.map(d=>d.parsedJson)}async computeSwapResultV2(n){const{pools:e,amountSpecifiedIsInput:t,address:r,tickStep:i}=n,s=await this.contract.getConfig(),o=e.map(u=>u.pool);let a=await xd(this.provider,Array.from(new Set(o)),{showContent:!0});const c=new xe;e.forEach(async u=>{const d=a.find(C=>uh(C)===u.pool),h=ss(d),f=this.math.bitsToNumber(h.tick_current_index.fields.bits);let m=f-h.tick_spacing*(i||Hh),w=f+h.tick_spacing*(i||Hh);m=m<Nc?Nc:m,w=w>Oc?Oc:w;const y=this.pool.parsePoolType(Vp(d));c.moveCall({target:`${s.PackageId}::pool_fetcher::compute_swap_result`,typeArguments:y,arguments:[c.object(h.id.id),c.pure(u.a2b,"bool"),c.pure(new ue(u.amountSpecified).toFixed(0),"u128"),c.pure(t,"bool"),c.pure(this.math.tickIndexToSqrtPriceX64(u.a2b?m:w).toString(),"u128"),c.object(He),c.object(s.Versioned)]})});const l=await this.provider.devInspectTransactionBlock({transactionBlock:c,sender:r});if(l.error)throw new Error(l.error);return l.events.map(u=>u.parsedJson)}async swapWithReturn(n){const{poolId:e,coinType:t,amountA:r,amountB:i,swapAmount:s,address:o,slippage:a,amountSpecifiedIsInput:c,nextTickIndex:l,a2b:u}=n,d=n.txb||new xe,h=new ue(r),f=new ue(i),m=await this.pool.getPoolTypeArguments(e),[w,y]=await Promise.all([this.coin.getMetadata(m[0]),this.coin.getMetadata(m[1])]),C=await this.contract.getConfig(),A=this.math.tickIndexToPrice(l,w.decimals,y.decimals),M=this.sqrtPriceWithSlippage(A,a,u,w.decimals,y.decimals),[H,G]=await this.coin.takeAmountFromCoins(o,t,u?h.toNumber():f.toNumber(),d),[q,X]=d.moveCall({target:`${C.PackageId}::swap_router::swap_${u?"a_b":"b_a"}_with_return_`,typeArguments:m,arguments:[d.object(e),d.makeMoveVec({objects:[H]}),d.pure(s,"u64"),d.pure(this.amountOutWithSlippage(new ue(u?i:r),a,c),"u64"),d.pure(M,"u128"),d.pure(c,"bool"),d.pure(o,"address"),d.pure(Date.now()+(n.deadline||qp*3),"u64"),d.object(He),d.object(C.Versioned)]});return G&&d.transferObjects([G],o),{txb:d,coinVecA:u?X:q,coinVecB:u?q:X}}getFunctionNameAndTypeArguments(n,e,t){let r=[];const i=["swap"];if(n.length===1)r=n[0],e===r[0]?i.push("a","b"):i.push("b","a");else{const s=n[0],o=n[1];e===s[0]?(i.push("a","b"),r.push(s[0],s[2],s[1])):(i.push("b","a"),r.push(s[1],s[2],s[0])),r.push(o[2],t),t===o[0]?i.push("c","b"):i.push("b","c")}return{functionName:i.join("_"),typeArguments:r}}amountOutWithSlippage(n,e,t){if(t){const i=new ue(100).minus(e).div(100);return new ue(n).mul(i).toFixed(0)}const r=new ue(100).plus(e).div(100);return new ue(n).mul(r).toFixed(0)}sqrtPriceWithSlippage(n,e,t,r,i){const s=new ue(n).mul(t?new ue(100).minus(e).div(100):new ue(100).plus(e).div(100)),o=this.math.priceToSqrtPriceX64(s,r,i);return o.lt(new B.BN(bw))?bw:o.gt(new B.BN(yw))?yw:o.toString()}},RZ=class extends Uu{async createAndDepositVault(n){const{address:e,strategyId:t,poolId:r,coinTypeA:i,coinTypeB:s,baseLowerIndex:o,baseUpperIndex:a,limitLowerIndex:c,limitUpperIndex:l,baseTickStep:u,limitTickStep:d}=n;let h=n.txb||new xe;const f=await this.contract.getConfig(),m=await this.pool.getPoolTypeArguments(r);let w=o,y=a,C=c,A=l,M,H;if(n.amountA==="0"&&n.amountB==="0")return h;if(n.amountB==="0"||n.amountA==="0"){const G=await this.pool.getPool(r),q=await this.onlyTokenSwapWithReturn({liquidity:G.liquidity,sqrt_price:G.sqrt_price,lowerIndex:o,upperIndex:a,amountA:n.amountA,amountB:n.amountB,coinTypeA:i,coinTypeB:s,poolId:r,txb:h,address:e,deadline:n.deadline,a2b:n.amountB==="0"}),X=await this.getStrategy(t),[E,j]=this.getCalculateVaultStepTick(u,G.tick_spacing.toString(),q.swapResultSqrtPrice),[R,V]=this.getCalculateVaultStepTick(X.base_tick_step_minimum,G.tick_spacing.toString(),q.swapResultSqrtPrice);h=q.txb,w=E,y=j,C=R,A=V,M=q.coinVecA,H=q.coinVecB}else{const[G,q]=await this.coin.takeAmountFromCoins(e,i,Number(n.amountA),h),[X,E]=await this.coin.takeAmountFromCoins(e,s,Number(n.amountB),h);M=G,H=X;const j=[];[q,E].forEach(R=>{R&&j.push(R)}),j.length>0&&h.transferObjects(j,e)}return h.moveCall({target:`${f.VaultPackageId}::router::open_vault_and_deposit`,arguments:[h.object(f.VaultGlobalConfig),h.object(f.VaultRewarderManager),h.object(t),h.object(r),h.object(f.Positions),M,H,h.pure(Math.abs(w).toFixed(0),"u32"),h.pure(w<0,"bool"),h.pure(Math.abs(y).toFixed(0),"u32"),h.pure(y<0,"bool"),h.pure(Math.abs(C).toFixed(0),"u32"),h.pure(C<0,"bool"),h.pure(Math.abs(A).toFixed(0),"u32"),h.pure(A<0,"bool"),h.pure(u,"u32"),h.pure(d,"u32"),h.pure(e,"address"),h.object(He),h.object(f.Versioned)],typeArguments:m}),h}async createVault(n){const{strategyId:e,address:t,baseLowerIndex:r,baseUpperIndex:i,limitLowerIndex:s,limitUpperIndex:o}=n,a=n.txb||new xe,c=await this.contract.getConfig(),l=await this.getStrategy(e);return a.moveCall({target:`${c.VaultPackageId}::router::open_vault`,arguments:[a.object(c.VaultGlobalConfig),a.object(e),a.pure(Math.abs(r).toFixed(0),"u32"),a.pure(r<0,"bool"),a.pure(Math.abs(i).toFixed(0),"u32"),a.pure(i<0,"bool"),a.pure(Math.abs(s).toFixed(0),"u32"),a.pure(s<0,"bool"),a.pure(Math.abs(o).toFixed(0),"u32"),a.pure(o<0,"bool"),a.pure(t,"address")],typeArguments:[l.coin_a_type_name.fields.name,l.coin_b_type_name.fields.name]}),a}async depositVault(n){const{strategyId:e,vaultId:t,poolId:r,coinTypeA:i,coinTypeB:s,address:o}=n;let a=n.txb||new xe;const c=await this.contract.getConfig(),l=await this.pool.getPoolTypeArguments(r);let u,d;if(!n.amountA&&!n.amountB)return a;if(n.amountB==="0"||n.amountA==="0"){const h=await this.getStrategy(e),f=await this.getStrategyVault(h.vaults.fields.id.id,t),m=await this.pool.getPool(r),w=this.math.bitsToNumber(f.value.fields.value.fields.base_lower_index.fields.bits),y=this.math.bitsToNumber(f.value.fields.value.fields.base_upper_index.fields.bits),C=await this.onlyTokenSwapWithReturn({liquidity:m.liquidity,sqrt_price:m.sqrt_price,lowerIndex:w,upperIndex:y,amountA:n.amountA,amountB:n.amountB,coinTypeA:i,coinTypeB:s,poolId:r,txb:a,address:o,deadline:n.deadline,a2b:n.amountB==="0"});a=C.txb,u=C.coinVecA,d=C.coinVecB}else{const[h,f]=await this.coin.takeAmountFromCoins(o,i,Number(n.amountA),a),[m,w]=await this.coin.takeAmountFromCoins(o,s,Number(n.amountB),a);u=h,d=m;const y=[];[f,w].forEach(C=>{C&&y.push(C)}),y.length>0&&a.transferObjects(y,o)}return a.moveCall({target:`${c.VaultPackageId}::router::deposit`,arguments:[a.object(c.VaultGlobalConfig),a.object(c.VaultRewarderManager),a.object(e),a.object(t),a.object(r),a.object(c.Positions),u,d,a.object(He),a.object(c.Versioned)],typeArguments:l}),a}async withdrawVaultV2(n){const{strategyId:e,vaultId:t,poolId:r,address:i,percentage:s}=n,o=n.txb||new xe;if(n.onlyTokenA&&n.onlyTokenB)return o;if(n.onlyTokenA||n.onlyTokenB)return this.onlyTokenWithdrawVault(n);const a=await this.contract.getConfig(),c=await this.pool.getPoolTypeArguments(r);return o.moveCall({target:`${a.VaultPackageId}::router::withdraw_v2`,arguments:[o.object(a.VaultGlobalConfig),o.object(a.VaultUserTierConfig),o.object(a.VaultRewarderManager),o.object(e),o.object(t),o.object(r),o.object(a.Positions),o.pure(s,"u64"),o.pure(s===1e6,"bool"),o.pure(i,"address"),o.object(He),o.object(a.Versioned)],typeArguments:c}),o}async collectClmmRewardDirectReturnVault(n){const{address:e,strategyId:t,poolId:r,vaultId:i}=n,s=n.txb||new xe,o=await this.contract.getConfig(),a=await this.pool.getPoolTypeArguments(r);return(await this.pool.getPool(r)).reward_infos.forEach((l,u)=>{s.moveCall({target:`${o.VaultPackageId}::router::collect_clmm_reward_direct_return`,arguments:[s.object(o.VaultGlobalConfig),s.object(t),s.object(i),s.object(r),s.object(o.Positions),s.object(l.fields.vault),s.pure(u,"u64"),s.pure(e,"address"),s.object(He),s.object(o.Versioned)],typeArguments:[...a,l.fields.vault_coin_type]})}),s}async closeVault(n){const{strategyId:e,vaultId:t}=n,r=n.txb||new xe,i=await this.contract.getConfig(),s=await this.getStrategy(e);return r.moveCall({target:`${i.VaultPackageId}::router::close_vault`,arguments:[r.object(i.VaultGlobalConfig),r.object(e),r.object(t)],typeArguments:[s.coin_a_type_name.fields.name,s.coin_b_type_name.fields.name]}),r}async withdrawAllVault(n){let e=await this.collectClmmRewardDirectReturnVault(n);return e=await this.withdrawVaultV2({txb:e,...n}),e=await this.closeVault({txb:e,...n}),e}async computeTokenWithdrawVaultSwapResult(n){var e;const{poolId:t,strategyId:r,vaultId:i,percentage:s,address:o}=n;let a=new xe(n.txb);a=await this.collectClmmRewardDirectReturnVault(n);const c=await this.contract.getConfig(),l=await this.pool.getPoolTypeArguments(t),[u,d]=a.moveCall({target:`${c.VaultPackageId}::vault::withdraw_v2`,arguments:[a.object(c.VaultGlobalConfig),a.object(c.VaultUserTierConfig),a.object(c.VaultRewarderManager),a.object(r),a.object(i),a.object(t),a.object(c.Positions),a.pure(s,"u64"),a.pure(s===1e6,"bool"),a.object(He),a.object(c.Versioned)],typeArguments:l}),h=await this.provider.devInspectTransactionBlock({transactionBlock:a,sender:o});if(h.error)throw new Error(h.error);let f,m;if(h.events.map(E=>{const j=E.parsedJson;j.percentage&&(f=j.amount_a,m=j.amount_b)}),!f||!m)throw new Error("event does not exist");const w=!!n.onlyTokenB,[y,C]=a.moveCall({target:`${c.PackageId}::swap_router::swap_${w?"a_b":"b_a"}_with_return_`,typeArguments:l,arguments:[a.object(t),a.makeMoveVec({objects:[w?u:d]}),a.pure(w?f:m,"u64"),a.pure("0","u64"),a.pure(this.math.tickIndexToSqrtPriceX64(w?Nc:Oc).toString(),"u128"),a.pure(!0,"bool"),a.pure(o,"address"),a.pure(Date.now()+(n.deadline||qp*3),"u64"),a.object(He),a.object(c.Versioned)]});a.transferObjects([n.onlyTokenB?d:u,C,y],o);const A=await this.provider.devInspectTransactionBlock({transactionBlock:a,sender:o});let M;if(A.events.map(E=>{const j=E.parsedJson;j.a_to_b!==void 0&&(M=j)}),!M)throw new Error("event does not exist");const[H,G]=await Promise.all([this.coin.getMetadata(l[0]),this.coin.getMetadata(l[1])]),q=this.math.tickIndexToPrice(this.math.bitsToNumber(M.tick_current_index.bits),H.decimals,G.decimals),X=this.trade.sqrtPriceWithSlippage(q,((e=n.slippage)==null?void 0:e.toString())||"1",!!n.onlyTokenB,H.decimals,G.decimals);return{amountA:f,amountB:m,resultAmountA:M.amount_a,resultAmountB:M.amount_b,sqrt_price:X,current_index:this.math.bitsToNumber(M.tick_current_index.bits),prev_index:this.math.bitsToNumber(M.tick_pre_index.bits),a2b:M.a_to_b}}async onlyTokenSwapWithReturn(n){var e;const{coinTypeA:t,coinTypeB:r,liquidity:i,sqrt_price:s,lowerIndex:o,upperIndex:a,poolId:c,address:l,a2b:u}=n;let d=n.txb||new xe;const[h,f]=await Promise.all([this.coin.getMetadata(t),this.coin.getMetadata(r)]),m=this.math.sqrtPriceX64ToPrice(new B(s),h.decimals,f.decimals).toString(),[w,y]=this.pool.getTokenAmountsFromLiquidity({liquidity:new B(i),currentSqrtPrice:new B(s),lowerSqrtPrice:this.math.tickIndexToSqrtPriceX64(o),upperSqrtPrice:this.math.tickIndexToSqrtPriceX64(a)}),C=new ue(w.toString()).div(10**h.decimals),A=new ue(y.toString()).div(10**f.decimals),M=C.mul(m).add(A),H=A.div(M),G=new ue(1).sub(H),q=new ue(u?n.amountA.toString():n.amountB.toString()).mul(u?H:G).toFixed(0),X=await this.trade.computeSwapResultV2({pools:[{pool:c,a2b:u,amountSpecified:q}],amountSpecifiedIsInput:!0,address:l}),{txb:E,coinVecA:j,coinVecB:R}=await this.trade.swapWithReturn({poolId:c,coinType:u?t:r,amountA:u?n.amountA:X[0].amount_a,swapAmount:q,amountB:u?X[0].amount_b:n.amountB,nextTickIndex:this.math.bitsToNumber(X[0].tick_current_index.bits),slippage:((e=n.slippage)==null?void 0:e.toString())||"5",amountSpecifiedIsInput:!0,a2b:u,address:l,deadline:n.deadline,txb:d});return d=E,{txb:d,coinVecA:j,coinVecB:R,swapResultSqrtPrice:X[0].sqrt_price}}async onlyTokenWithdrawVault(n){var e;const{poolId:t,strategyId:r,vaultId:i,percentage:s,address:o}=n;let a=new xe(n.txb);const c=await this.computeTokenWithdrawVaultSwapResult({...n,txb:a});let l=n.txb||new xe;const u=await this.contract.getConfig(),d=await this.pool.getPoolTypeArguments(t),[h,f]=l.moveCall({target:`${u.VaultPackageId}::vault::withdraw_v2`,arguments:[l.object(u.VaultGlobalConfig),l.object(u.VaultUserTierConfig),l.object(u.VaultRewarderManager),l.object(r),l.object(i),l.object(t),l.object(u.Positions),l.pure(s,"u64"),l.pure(s===1e6,"bool"),l.object(He),l.object(u.Versioned)],typeArguments:d}),m=!!n.onlyTokenB,[w,y]=l.moveCall({target:`${u.PackageId}::swap_router::swap_${m?"a_b":"b_a"}_with_return_`,typeArguments:d,arguments:[l.object(t),l.makeMoveVec({objects:[m?h:f]}),l.pure(m?c.amountA:c.amountB,"u64"),l.pure(this.trade.amountOutWithSlippage(new ue(m?c.resultAmountB:c.resultAmountA),((e=n.slippage)==null?void 0:e.toString())||"1",!0),"u64"),l.pure(c.sqrt_price,"u128"),l.pure(!0,"bool"),l.pure(o,"address"),l.pure(Date.now()+(n.deadline||qp*3),"u64"),l.object(He),l.object(u.Versioned)]});return l.transferObjects([n.onlyTokenB?f:h,y,w],o),l}async getStrategy(n){return this.getCacheOrSet(`strategy-${n}`,async()=>{const e=await this.provider.getObject({id:n,options:{showContent:!0}});return Ed(e,"strategyId"),ss(e)},1500)}async getStrategyVault(n,e){return this.getCacheOrSet(`vaultId-${n}-${e}`,async()=>{const t=await this.provider.getDynamicFieldObject({parentId:n,name:{type:"0x2::object::ID",value:e}});return Ed(t,"vaultId-value"),ss(t)},1500)}getCalculateVaultStepTick(n,e,t){const r=Number(e),i=this.math.sqrtPriceX64ToTickIndex(new B(t)),s=i-i%r-(n+1)*r,o=i-i%r+(n+1)*r;return[s<Nc?Nc:s,o>Oc?Oc:o]}},fs=class{constructor(n,e){this.network=n,vs(this,"pool"),vs(this,"contract"),vs(this,"math",new IZ),vs(this,"account",new _Z),vs(this,"coin"),vs(this,"nft"),vs(this,"trade"),vs(this,"provider"),vs(this,"vault"),this.provider=e?e instanceof Pc?e:new Pc(e):new Pc({url:lu(n==="mainnet"?"mainnet":"testnet")}),this.contract=new TZ(this),this.pool=new xZ(this),this.nft=new jZ(this),this.coin=new DZ(this),this.trade=new BZ(this),this.vault=new RZ(this)}},PZ=Object.defineProperty,vT=(n,e)=>{for(var t in e)PZ(n,t,{get:e[t],enumerable:!0})},Zn=class{constructor(n){this.data=n}serialize(){return JSON.stringify(_m(this.data))}},UZ={fullRpcUrl:"https://fullnode.mainnet.sui.io/",simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",version:4,config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b",admin_cap_id:"0x89c1a321291d15ddae5a086c9abc533dff697fde3d89e0ca836c41af73e36a75"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x6f5e582ede61fe5395b50c4a449ec11479a54d7ff8e0158247adfda60d98970b",version:6},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count"},FZ={launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},liquidity_stratefy:{package_id:"",published_at:"",version:void 0,config:void 0},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0x016b8ce6560f55bfe02abb2cc0681bb91f767107cfb1c9b6e73a6bcf74492a02",version:1,config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},limit_order:{package_id:"",published_at:"",version:1,config:{rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""}},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",version:1,config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},dca:{package_id:"",published_at:"",version:0,config:{admin_cap_id:"",global_config_id:"",indexer_id:"",user_indexer_id:"",in_coin_whitelist_id:"",out_coin_whitelist_id:""}}},LZ={fullRpcUrl:"https://fullnode.testnet.sui.io/",simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x1c29d658882c40eeb39a8bb8fe58f71a216a918acb3e3eb3b47d24efd07257f2",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699",admin_cap_id:""}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xf1a5d0c5b0593e41d13f9684ca91365bdfe54a98836c1d33c90e361a031fac74",version:6},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count"},$Z={launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x20d948d640edd0c749f533d41efc5f843f212d441220324ad7959c6e1d281828",published_at:"0x20d948d640edd0c749f533d41efc5f843f212d441220324ad7959c6e1d281828",config:{dividend_manager_id:"0x13b7facb704fae1d199ff0038b8acabc253415a77d142b39189dee97d457e442",dividend_admin_id:"0x5eb78463007422d4130b21f61c180bcd190819b7792f56e00a61df3b8fb928ef",dividend_settle_id:"0x495095e13a170ff494d242ae44ac2c7453011ca6c33cff27498010105e10e4b4",venft_dividends_id:"",venft_dividends_id_v2:""}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},liquidity_stratefy:{package_id:"",published_at:"",version:void 0,config:void 0},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a"}},limit_order:{package_id:"",published_at:"",version:1,config:{rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""}},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},dca:{package_id:"",published_at:"",version:0,config:{admin_cap_id:"",global_config_id:"",indexer_id:"",user_indexer_id:"",in_coin_whitelist_id:"",out_coin_whitelist_id:""}}},Fu=(n,e)=>{let t=n==="sui:mainnet"?UZ:LZ,r=new Pz(t);return r.senderAddress=e.address,r},wi=(n,e)=>{let t=Fu(n,e),r=n==="sui:mainnet"?FZ:$Z;return new cW(r,t)},VZ="https://api-sui.cetus.zone/router_v2/find_routes",qZ=(n,e)=>{let t=new Xf({url:"https://fullnode.mainnet.sui.io/"});return new G$(VZ,e.address,t,Y$.Mainnet)},zZ=async(n,e,t)=>await Fu(t,e).Position.createAddLiquidityFixTokenPayload(n==null?void 0:n.parameter,n==null?void 0:n.gasEstimateArg),WZ=async(n,e,t)=>await Fu(t,e).Position.createAddLiquidityFixTokenPayload(n==null?void 0:n.parameter,n==null?void 0:n.gasEstimateArg),KZ=async(n,e,t)=>await Fu(t,e).Position.closePositionTransactionPayload(n),ZZ=async(n,e,t)=>await Fu(t,e).Position.removeLiquidityTransactionPayload(n),QZ=async(n,e,t)=>await Fu(t,e).Rewarder.collectRewarderTransactionPayload(n),HZ=class kT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","OpenAndAddLiquidity");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await zZ(s,r,i)}static fromData(t){return new kT(t)}},GZ=class ST extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","ClaimFeeAndMining");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await QZ(s,r,i)}static fromData(t){return new ST(t)}},YZ=class CT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","DecreaseLiquidity");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await ZZ(s,r,i)}static fromData(t){return new CT(t)}},XZ=async(n,e,t)=>await wi(t,e).Farms.openPositionAddLiquidityStakePaylod(n),JZ=async(n,e,t)=>await wi(t,e).Farms.addLiquidityFixCoinPayload(n),eQ=async(n,e,t)=>await wi(t,e).Farms.removeLiquidityPayload(n),tQ=async(n,e,t)=>await wi(t,e).Farms.removeLiquidityPayload(n),nQ=async(n,e,t)=>await wi(t,e).Farms.claimFeeAndClmmReward(n),rQ=async(n,e,t)=>await wi(t,e).Farms.harvestPayload(n),iQ=async(n,e,t)=>{let r=wi(t,e),i=Object.values(n);return await r.Farms.batchHarvestPayload(i)},sQ=async(n,e,t)=>await wi(t,e).Farms.depositPayload(n),oQ=async(n,e,t)=>await wi(t,e).Farms.withdrawPayload(n),aQ=class AT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingOpenAndAddLiquidity");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await XZ(s,r,i)}static fromData(t){return new AT(t)}},cQ=class TT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingBatchHarvest");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await iQ(s,r,i)}static fromData(t){return new TT(t)}},lQ=class IT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingClaimFeeAndReward");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await nQ(s,r,i)}static fromData(t){return new IT(t)}},uQ=class xT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingDecreaseLiquidity");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await eQ(s,r,i)}static fromData(t){return new xT(t)}},dQ=class ET extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingHarvest");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await rQ(s,r,i)}static fromData(t){return new ET(t)}},hQ=class MT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingIncreaseLiquidity");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await JZ(s,r,i)}static fromData(t){return new MT(t)}},fQ=class OT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingRemoveLiquidity");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await tQ(s,r,i)}static fromData(t){return new OT(t)}},pQ=class NT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingStake");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await sQ(s,r,i)}static fromData(t){return new NT(t)}},mQ=class jT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","FarmingUnstake");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await oQ(s,r,i)}static fromData(t){return new jT(t)}},gQ=class DT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","IncreaseLiquidity");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await WZ(s,r,i)}static fromData(t){return new DT(t)}},wQ=class BT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","RemoveLiquidity");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await KZ(s,r,i)}static fromData(t){return new BT(t)}},yQ=async(n,e,t)=>{let r=qZ(t,e),i=new fe;return await r.fastRouterSwap({...n,routers:X$(n.routers),txb:i}),i},bQ=class RT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","AggregatorSwap");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await yQ(s,r,i)}static fromData(t){return new RT(t)}},U1={package_id:"0x355714a1eeb7ab1d80902da6c92001170cda1212edf524c32aa308a3ac177c31",published_at:"0x355714a1eeb7ab1d80902da6c92001170cda1212edf524c32aa308a3ac177c31",cetus_coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},_Q=async(n,e,t)=>{console.log("getVestingRedeemTxb txbParams: ",n),console.log("getVestingRedeemTxb account: ",e),console.log("getVestingRedeemTxb network: ",t);let{pool:r,nftId:i,periods:s,CLOCK_ADDRESS:o}=n,a=new fe;return s.forEach(c=>{a.moveCall({target:`${U1.published_at}::router::redeem`,typeArguments:[U1.cetus_coin_type],arguments:[a.object(r),a.object(i),a.pure(c),a.object(o)]})}),a},vQ=class PT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","VestingRedeem");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await _Q(s,r,i)}static fromData(t){return new PT(t)}},kQ=async(n,e,t)=>{let r=wi(t,e),i=new fe;return await r.XCetusModule.convertPayload(n,i)},SQ=async(n,e,t)=>await wi(t,e).XCetusModule.redeemLockPayload(n),CQ=async(n,e,t)=>await wi(t,e).XCetusModule.redeemDividendV3Payload(n.phases,n.venft_id,n.bonus_types,n.bonus_types_v2,n.xTokenType),AQ=async(n,e,t)=>await wi(t,e).XCetusModule.cancelRedeemPayload(n),TQ=async(n,e,t)=>await wi(t,e).XCetusModule.redeemPayload(n),IQ=class UT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","xCETUSCancelRedeem");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await AQ(s,r,i)}static fromData(t){return new UT(t)}},xQ=class FT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","xCETUSClaimStakingRwewards");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await CQ(s,r,i)}static fromData(t){return new FT(t)}},EQ=class LT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","xCETUSConvert");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await kQ(s,r,i)}static fromData(t){return new LT(t)}},MQ=class $T extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","xCETUSRedeem");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await TQ(s,r,i)}static fromData(t){return new $T(t)}},OQ=class VT extends Zn{constructor(t){super(t);v(this,"txType",Ee.Other);v(this,"txSubType","xCETUSRedeemLock");this.data=t}async build(t){let{account:r,network:i}=t,{txbParams:s}=this.data;return await SQ(s,r,i)}static fromData(t){return new VT(t)}},NQ=class{constructor(){v(this,"application","cetus");v(this,"supportSDK","@mysten/sui")}async deserialize(n){console.log("Cetus helper deserialize input: ",n);let{txbParams:e,action:t}=n;return{txType:Ee.Other,txSubType:t,intentionData:{txbParams:{...e},action:t}}}async build(n){let{suiClient:e,account:t,network:r}=n,i;switch(n.txSubType){case"OpenAndAddLiquidity":i=HZ.fromData(n.intentionData);break;case"IncreaseLiquidity":i=gQ.fromData(n.intentionData);break;case"DecreaseLiquidity":i=YZ.fromData(n.intentionData);break;case"RemoveLiquidity":i=wQ.fromData(n.intentionData);break;case"ClaimFeeAndMining":i=GZ.fromData(n.intentionData);break;case"FarmingOpenAndAddLiquidity":i=aQ.fromData(n.intentionData);break;case"FarmingIncreaseLiquidity":i=hQ.fromData(n.intentionData);break;case"FarmingDecreaseLiquidity":i=uQ.fromData(n.intentionData);break;case"FarmingRemoveLiquidity":i=fQ.fromData(n.intentionData);break;case"FarmingClaimFeeAndReward":i=lQ.fromData(n.intentionData);break;case"FarmingHarvest":i=dQ.fromData(n.intentionData);break;case"FarmingBatchHarvest":i=cQ.fromData(n.intentionData);break;case"FarmingStake":i=pQ.fromData(n.intentionData);break;case"FarmingUnstake":i=mQ.fromData(n.intentionData);break;case"xCETUSConvert":i=EQ.fromData(n.intentionData);break;case"xCETUSRedeemLock":i=OQ.fromData(n.intentionData);break;case"xCETUSClaimStakingRwewards":i=xQ.fromData(n.intentionData);break;case"xCETUSCancelRedeem":i=IQ.fromData(n.intentionData);break;case"xCETUSRedeem":i=MQ.fromData(n.intentionData);break;case"VestingRedeem":i=vQ.fromData(n.intentionData);break;case"AggregatorSwap":i=bQ.fromData(n.intentionData);break;default:throw new Error("not implemented")}return i.build({suiClient:e,account:t,network:r})}},An=class{constructor(n){this.data=n}serialize(){return JSON.stringify(_m(this.data))}},qT={};vT(qT,{contractId:()=>KT,default:()=>jQ,feeObjId:()=>HT,roleObjId:()=>ZT,status:()=>WT,transaction:()=>zT,upgradeCapObjId:()=>GT,vaultObjId:()=>QT});var zT="DiBZq4UmVVYiRL6ZJmFKYoHcxtxqrhsCXSkFyT7wUr3j",WT="success",KT="0x81c960dc653975fbd0072deca8afb92d322898c911622898ba1b2e3ad0c4bd8d",ZT="0xc6ec0bdee0bb59a72077e9acd2f42457043cf47080b3d3fad4d39abf28bba63a",QT="0xbc4021387fbac149119fd24e92be9e58f745774292f3a2a12e2ac6daf5363e1d",HT="0x4178f63970fe2daeb256dc5730ad172e82b3e8eb45f31b33e0daae72cd35e1e1",GT="0xe1e9aa7d222d151bfe6dd83358b0d7fdcb11260f710800cfaf7ccc1b1e245115",jQ={transaction:zT,status:WT,contractId:KT,roleObjId:ZT,vaultObjId:QT,feeObjId:HT,upgradeCapObjId:GT},YT={};vT(YT,{contractId:()=>eI,default:()=>DQ,feeObjId:()=>rI,roleObjId:()=>tI,status:()=>JT,transaction:()=>XT,upgradeCapObjId:()=>iI,vaultObjId:()=>nI});var XT="855FNDV8o8Z3fWULPnQo9qdhLJpsg7wZrkCpNyfw9KfB",JT="success",eI="0xc357c3985e8fb875d6b37141497af660779aa1bab0ec489b2213efd74067d1fa",tI="0x5ab49bdf9fd1413e328ef242b3f8d83dde791b38a0b627bfc87fb25c010d34f1",nI="0xb483558770d8eb26007f193b75db40f0a45f2e36863a687625885d4de6993378",rI="0x48453fc4d7cde3fe35aad89e5dfb496608a6a55ea529a1c0274681a808627f94",iI="0x34279779a0d0d36bd5044b04830d607fa1b0ecf316548c8ac3a44151e4f1a42a",DQ={transaction:XT,status:JT,contractId:eI,roleObjId:tI,vaultObjId:nI,feeObjId:rI,upgradeCapObjId:iI},BQ=lu("testnet"),RQ=lu("testnet"),PQ=lu("mainnet"),UQ=lu("mainnet"),FQ="https://bc3p6l5unl.execute-api.us-west-1.amazonaws.com/prod",LQ="https://rolsbkota7.execute-api.us-west-1.amazonaws.com/prod",$Q="https://6p6mkx33ne.execute-api.us-west-1.amazonaws.com/prod",VQ="https://xrae3mrjv5.execute-api.us-west-1.amazonaws.com/prod",F1=qT,L1=YT,qQ=new Map([["dev",{env:"dev",rpc:{url:BQ},backend:{url:FQ},contract:F1}],["stg",{env:"stg",rpc:{url:RQ},backend:{url:LQ},contract:F1}],["prev",{env:"prev",rpc:{url:PQ},backend:{url:$Q},contract:L1}],["prod",{env:"prod",rpc:{url:UQ},backend:{url:VQ},contract:L1}]]);function zQ(n,e){let t=qQ.get(n);if(!t)throw new Error(`Env not supported: ${n}`);return e&&e.rpc&&(t.rpc=e.rpc),e&&e.backend&&(t.backend=e.backend),e&&e.contract&&(t.contract=e.contract),t}var Fi=class extends Error{constructor(e,t,r={}){var n=(...args)=>{super(...args);v(this,"mpayErrorCode");v(this,"context")};let{cause:i,context:s}=r;n(i?`[MPay] ${t}: ${i}`:`[MPay] ${t}`),this.mpayErrorCode=e,this.context=s}},WQ=class extends Fi{constructor(){super(11,"Backend is not specified")}},KQ=class extends Fi{constructor(){super(1,"Wallet not connected")}},Xg=class extends Fi{constructor(n,e){super(10,n,{context:e})}},ZQ=class yc{constructor(e){this.apiURL=e}static parseResponseData(e){var t;if(e instanceof Fq)throw new Xg((t=e.response)==null?void 0:t.statusText);if(e.status===200){if(e.data.success)return e.data.data;throw new Xg(e.data.code)}throw new Xg(e.status.toString())}async getIncomingStreams(e,t){let r=await Do.post(`${this.apiURL}/stream`,{recipient:e,...t});return yc.parseResponseData(r)}async getOutgoingStreams(e,t){let r=await Do.post(`${this.apiURL}/stream`,{sender:e,...t});return yc.parseResponseData(r)}async getStreamHistory(e){let t=await Do.post(`${this.apiURL}/stream-events`,e),r=yc.parseResponseData(t);return r.data.forEach(i=>{let s=i;return s.data.type==="create_stream"?s.data.balance=BigInt(s.data.balance):s.data.type==="cancel_stream"?s.data.withdrawAmount=BigInt(s.data.withdrawAmount):s.data.type==="claim"||s.data.type==="auto_claim"?s.data.claimAmount=BigInt(s.data.claimAmount):s.data.type==="set_auto_claim"&&(s.data.enabled=!!s.data.enabled),s.createdAt=new Date(s.createdAt),s}),r}async getAllCoinTypes(e){let t=await Do.post(`${this.apiURL}/stream-info`,{address:e});return yc.parseResponseData(t)}async getAllRecipients(e,t){let r=await Do.post(`${this.apiURL}/stream-info`,{sender:e,status:t});return yc.parseResponseData(r)}async getAllSenders(e,t){let r=await Do.post(`${this.apiURL}/stream-info`,{recipient:e,status:t});return yc.parseResponseData(r)}},sI=class oI{constructor(e){v(this,"signer");v(this,"suiClient");v(this,"envConfig");v(this,"_backend");this.envConfig=e,this.suiClient=new Pc({url:e.rpc.url}),e.backend&&(this._backend=new ZQ(e.backend.url))}static new(e,t){let r=zQ(e,t);return new oI(r)}get walletType(){return this.wallet?this.wallet.type:"disconnected"}get backend(){if(!this._backend)throw new WQ;return this._backend}set backend(e){this._backend=e}connectWallet(e){this.signer=e}disconnect(){this.signer=void 0}get wallet(){if(!this.signer)throw new KQ;return this.signer}async walletAddress(){return this.wallet.address()}},$1=50n,Jg=10000n,QQ=25n,V1=100000000n,ac=class{constructor(n){this.object=n}moveArg(n){return n.object(this.object)}},q1=class{constructor(n){this.objects=n}moveArgs(n){return n.makeMoveVec({objects:this.objects.map(e=>n.object(e))})}},zp=class aI{constructor(e){return this.result=e,new Proxy(this,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(t,r){if(r in t)return Reflect.get(t,r);let i=o=>new aI(t.result[o]);if(r===Symbol.iterator)return function*(){let o=0;for(;;)yield i(o),o++};if(typeof r=="symbol")return;let s=parseInt(r,10);if(!(Number.isNaN(s)||s<0))return i(s)}})}moveArg(){return this.result}},z1=class extends Fi{constructor(n,e){super(3,n,{context:e})}},HQ=class{constructor(n){this.results=n}callResult(n){return this.results.results[n]}returnValue(n,e){return n.returnValues[e]}getValue(n=0,e=0){let t=this.callResult(n);return this.returnValue(t,e)}getAddress(n=0,e=0){let[t,r]=this.getValue(n,e);if(r!=="address")throw new z1("Invalid contract return type.",{ctx:{expectType:"address",gotType:r}});return Et(ct.Buffer.from(t).toString("hex"))}getU64(n=0,e=0){let[t,r]=this.getValue(n,e);if(r!=="u64")throw new z1("Invalid contract return type.",{ctx:{expectType:"u64",gotType:r}});return ct.Buffer.from(t).readBigInt64LE()}},Ii=class extends Fi{constructor(n,e,t){super(2,`Invalid input: ${n}`,{context:{fieldKey:e,fieldValue:t}})}},cI={groupId:"string",name:"string"},GQ=64;function YQ(n){return lI(n),sr.ser(cI,n).toString("base64")}function _w(n){let e=sr.de(cI,n,"base64");return lI(e),e}function lI(n){if(!W1(n.name))throw new Ii("Invalid metadata: Name contains unknown character");if(!W1(n.groupId))throw new Ii("Invalid metadata: Group ID contains unknown character");if(n.name.length>GQ)throw new Ii("Invalid metadata: Name exceed max length 64")}function W1(n){return/^[\x00-\x7F]+$/.test(n)}function uI(n,e){return nt(n)===nt(e)}function Tl(n,e){return nt(n)===nt(e)}var dI="txn.gas";function XQ(){return lW()}var vw=class hI{constructor(e,t,r){this.globals=e,this.feeContract=t,this.streamContract=r}static convertCreateStreamInfoToInternal(e){return{metadata:YQ({name:e.name,groupId:XQ()}),coinType:nt(e.coinType),recipients:e.recipients.map(t=>({address:t.address,cliffAmount:t.cliffAmount,amountPerEpoch:t.amountPerStep})),epochInterval:e.interval,numberEpoch:e.steps,startTime:e.startTimeMs,cancelable:e.cancelable}}async buildCreateStreamTransactionBlock(e){let t=new xe,r=this.calculateFeesInternal(e),i=this.getCreateStreamCoinRequests(e,r),s=await this.wallet.requestCoins(i),o=await this.addMergeCoins(t,s[0]),a;i.length>1?a=await this.addMergeCoins(t,s[1]):a=o;for(let c=0;c<e.recipients.length;c++){let l=e.recipients[c],u=this.amountForRecipient(l,e.numberEpoch),d=this.getStreamFeeLocal(u),[h]=t.splitCoins(o,[t.pure(u+d,"u64")]),[f]=t.splitCoins(a,[t.pure(this.flatSuiFee,"u64")]);this.streamContract.createStream(t,{paymentCoin:new zp(h),flatFeeCoin:new zp(f),metadata:e.metadata,recipient:l.address,timeStart:e.startTime,cliff:l.cliffAmount,epochInterval:e.epochInterval,numEpoch:e.numberEpoch,amountPerEpoch:l.amountPerEpoch,cancelable:e.cancelable,coinType:e.coinType})}return t}calculateCreateStreamFees(e){let t=hI.convertCreateStreamInfoToInternal(e);return this.calculateFeesInternal(t)}feeParams(){return{createFeePercent:{numerator:$1,denominator:Jg},claimFeePercent:{numerator:QQ,denominator:Jg},flatFeePerStream:V1}}async addMergeCoins(e,t){let r;return t.mergedCoins&&t.mergedCoins.length?(e.mergeCoins(e.object(t.primaryCoin),t.mergedCoins.map(i=>e.object(i))),r=e.object(t.primaryCoin)):t.primaryCoin===dI?r=e.gas:r=e.object(t.primaryCoin),r}getCreateStreamCoinRequests(e,t){let r=e.coinType;return uI(r,$c)?[{coinType:r,amount:t.totalAmount+t.streamFeeAmount+t.flatFeeAmount}]:[{coinType:r,amount:t.totalAmount+t.streamFeeAmount},{coinType:$c,amount:t.flatFeeAmount}]}calculateFeesInternal(e){let t=e.recipients.reduce((r,i)=>{let s=this.amountForRecipient(i,e.numberEpoch),o=this.getStreamFeeLocal(s);return{totalAmount:r.totalAmount+s,streamFeeAmount:r.streamFeeAmount+o}},{totalAmount:0n,streamFeeAmount:0n});return{flatFeeAmount:BigInt(e.recipients.length)*this.flatSuiFee,...t}}amountForRecipient(e,t){return BigInt(e.amountPerEpoch)*BigInt(t)+BigInt(e.cliffAmount)}get flatSuiFee(){return V1}getStreamFeeLocal(e){return e*$1/Jg}async getStreamFeeRemote(e){let t=this.feeContract.streamingFee(new xe,e),r=await this.globals.suiClient.devInspectTransactionBlock({sender:await this.globals.walletAddress(),transactionBlock:t});return new HQ(r).getU64()}get wallet(){return this.globals.wallet}},JQ="0x0000000000000000000000000000000000000000000000000000000000000006",fI=class{constructor(n,e,t){this.moduleName=n,this.config=e,this.globals=t}addContractCall(n,e){let t=`${this.config.contractId}::${this.moduleName}::${e.method}`;return n.add(yb.MoveCall({target:t,arguments:e.arguments.map(r=>r instanceof q1?r.moveArgs(n):r instanceof ac?r.moveArg(n):r instanceof zp?r.moveArg():n.pure(r)),typeArguments:e.typeArgs})),n}addTransactionBlock(n,e,t=[],r=[]){n.add(yb.MoveCall({target:e,arguments:t.map(i=>i instanceof q1?i.moveArgs(n):i instanceof ac?i.moveArg(n):i instanceof zp?i.moveArg():n.pure(i)),typeArguments:r}))}makeObject(n){return typeof n=="string"?new ac(n):n}vaultObject(){return new ac(this.config.vaultObjId)}roleObject(){return new ac(this.config.roleObjId)}feeObject(){return new ac(this.config.feeObjId)}clockObject(){return new ac(JQ)}},Ci,pI=(Ci=class extends fI{constructor(e,t){super(Ci.ModuleName,e,t),this.config=e,this.globals=t}setStreamingFee(e,t){let r=this.roleObject(),i=this.feeObject();return this.addContractCall(e,{method:Ci.MethodName.set_streaming_fee,arguments:[r,i,t],typeArgs:[]})}setStreamingFlatFee(e,t){let r=this.roleObject(),i=this.feeObject();return this.addContractCall(e,{method:Ci.MethodName.set_streaming_flat_fee,arguments:[r,i,t],typeArgs:[]})}setClaimFee(e,t){let r=this.roleObject(),i=this.feeObject();return this.addContractCall(e,{method:Ci.MethodName.set_claim_fee,arguments:[r,i,t],typeArgs:[]})}streamingFee(e,t){let r=this.feeObject();return this.addContractCall(e,{method:Ci.MethodName.streaming_fee,arguments:[r,t],typeArgs:[]})}claimFee(e,t){return this.addContractCall(e,{method:Ci.MethodName.claim_fee,arguments:[this.feeObject(),t],typeArgs:[]})}feeDenominator(e){return this.addContractCall(e,{method:Ci.MethodName.fee_denominator,arguments:[this.feeObject()],typeArgs:[]})}},v(Ci,"ModuleName","fee_module"),v(Ci,"MethodName",{set_streaming_fee:"set_streaming_fee",set_claim_fee:"set_claim_fee",set_streaming_flat_fee:"set_streaming_flat_fee",streaming_flat_fee:"streaming_flat_fee",streaming_fee:"streaming_fee",claim_fee:"claim_fee",fee_denominator:"fee_denominator"}),Ci),Pn,Fm=(Pn=class extends fI{constructor(e,t){super(Pn.ModuleName,e,t),this.config=e,this.globals=t}createStream(e,t){let r=this.feeObject(),i=this.vaultObject(),s=this.makeObject(t.paymentCoin),o=this.makeObject(t.flatFeeCoin),a=this.clockObject();return this.addContractCall(e,{method:Pn.MethodName.create_stream,arguments:[r,i,s,o,t.metadata,t.recipient,t.timeStart,t.cliff,t.epochInterval,t.numEpoch,t.amountPerEpoch,t.cancelable,a],typeArgs:[t.coinType]})}setAutoClaim(e,t){let r=this.makeObject(t.streamId);return this.addContractCall(e,{method:Pn.MethodName.set_auto_claim,arguments:[r,t.enabled],typeArgs:[t.coinType]})}cancelStream(e,t){let r=this.makeObject(t.streamId),i=this.clockObject();return this.addContractCall(e,{method:Pn.MethodName.cancel_stream,arguments:[r,i],typeArgs:[t.coinType]})}claimStream(e,t){let r=this.makeObject(t.streamId),i=this.clockObject();return this.addContractCall(e,{method:Pn.MethodName.claim_stream,arguments:[r,i],typeArgs:[t.coinType]})}claimStreamByProxy(e,t){let r=this.makeObject(t.streamId),i=this.vaultObject(),s=this.feeObject(),o=this.clockObject();return this.addContractCall(e,{method:Pn.MethodName.claim_stream_by_proxy,arguments:[r,i,s,o],typeArgs:[t.coinType]})}get createStreamTarget(){return`${this.config.contractId}::${Pn.ModuleName}::${Pn.MethodName.create_stream}`}get setAutoClaimTarget(){return`${this.config.contractId}::${Pn.ModuleName}::${Pn.MethodName.set_auto_claim}`}get cancelStreamTarget(){return`${this.config.contractId}::${Pn.ModuleName}::${Pn.MethodName.cancel_stream}`}get claimStreamTarget(){return`${this.config.contractId}::${Pn.ModuleName}::${Pn.MethodName.claim_stream}`}get claimStreamByProxyTarget(){return`${this.config.contractId}::${Pn.ModuleName}::${Pn.MethodName.claim_stream_by_proxy}`}},v(Pn,"ModuleName","stream"),v(Pn,"MethodName",{create_stream:"create_stream",set_auto_claim:"set_auto_claim",cancel_stream:"cancel_stream",claim_stream:"claim_stream",claim_stream_by_proxy:"claim_stream_by_proxy",stream_current_epoch:"stream_current_epoch",now_milli_seconds:"now_milli_seconds"}),Pn),mI=class{constructor(n){v(this,"feeContract");v(this,"streamContract");this.globals=n;let e=n.envConfig.contract;this.feeContract=new pI(e,n),this.streamContract=new Fm(e,n)}async createStreams(n){let e=vw.convertCreateStreamInfoToInternal(n);return this.createStreamHelper().buildCreateStreamTransactionBlock(e)}createStreamHelper(){return new vw(this.globals,this.feeContract,this.streamContract)}setAutoClaim(n,e,t){let r=new xe;return this.streamContract.setAutoClaim(r,{streamId:n,enabled:e,coinType:t})}claimStream(n,e){let t=new xe;return this.streamContract.claimStream(t,{streamId:n,coinType:e})}claimStreamByProxy(n,e){let t=new xe;return this.streamContract.claimStreamByProxy(t,{streamId:n,coinType:e})}cancelStream(n,e){let t=new xe;return this.streamContract.cancelStream(t,{streamId:n,coinType:e}),t}},Ps=class extends Fi{constructor(n,e={}){super(0,n,e)}};async function eH(n){let e=[];for(;await n.hasNext();){let t=await n.next();e.push(t)}return e&&Array.isArray(e[0])?e.flat(1):e}var tH=class{constructor(n){v(this,"curPage");v(this,"init");this.requester=n,this.curPage=void 0,this.init=!0}async hasNext(){var n;if(this.init)return this.curPage||(this.curPage=await this.requester.doNextRequest()),!!((n=this.curPage.data)!=null&&n.length)||this.curPage.hasNext;if(!this.curPage)throw new Error("invalid implementation of iterator");return this.curPage.hasNext}async next(){return this.init?(this.init=!1,this.curPage||(this.curPage=await this.requester.doNextRequest()),this.curPage.data):(this.curPage=await this.requester.doNextRequest(),this.curPage.data)}},gI=class{constructor(n){v(this,"cursor");v(this,"pager");v(this,"curData");this.requester=n,this.pager=new tH(n),this.curData=[],this.cursor=0}async hasNext(){return this.cursor<this.curData.length-1?!0:this.pager.hasNext()}async next(){for(this.cursor+=1;this.cursor>=this.curData.length;)if(await this.pager.hasNext())this.curData=await this.pager.next(),this.cursor=0;else throw new Error("not more data");return this.curData[this.cursor]}},nH=class extends Fi{constructor(n,e,t){super(4,`Not enough balance: ${n}`,{context:{coinType:n,requestAmount:e,gotAmount:t}}),this.coinType=n,this.requestAmount=e,this.gotAmount=t}},rH=25;async function iH(n,e,t,r="0x2::sui::SUI",i=rH){let s=new sH(n,e,r,i),o=BigInt(0),a=[];for(;await s.hasNext()&&o<t;){let c=await s.next();c&&(a.push(c),o+=BigInt(c.balance))}if(o<t)throw new nH(r,t,o);return a}var sH=class extends gI{constructor(n,e,t,r){super(new oH(n,e,t,r)),this.suiClient=n,this.owner=e,this.coinType=t,this.reqPageSize=r}},oH=class{constructor(n,e,t,r){v(this,"nextCursor");if(this.suiClient=n,this.owner=e,this.coinType=t,this.reqPageSize=r,r<=0)throw new Ps("Invalid reqPageSize")}async doNextRequest(){let n=await this.suiClient.getCoins({owner:this.owner,coinType:this.coinType,cursor:this.nextCursor,limit:this.reqPageSize});return this.nextCursor=n.nextCursor,{data:n.data,hasNext:n.hasNextPage}}},aH=class extends Fi{constructor(){super(7,"Connected wallet is not creator")}},K1=class extends Fi{constructor(){super(8,"Connected wallet is not recipient")}},Z1=class extends Fi{constructor(n,e){super(6,n,{context:e})}},cH=class extends Fi{constructor(n){super(5,"Stream not found",{context:{streamId:n}})}},lH=(1n<<64n)-1n,Wp=1e3;function Q1(n){let e;typeof n=="number"?e=n:typeof n=="bigint"?e=Number(n):e=n.toMillis();let t=Math.round(e/Wp);return at.fromMillis(t*Wp)}function H1(n){let e;typeof n=="number"?e=n:typeof n=="bigint"?e=Number(n):e=n.toMillis();let t=Math.round(e/Wp);return xt.fromMillis(t*Wp)}var ub=class Sa{constructor(e,t,r){v(this,"streamContract");v(this,"type","Stream");this.globals=e,this.streamId=t,this.rawData=r,this.streamContract=new Fm(e.envConfig.contract,e)}static async new(e,t){let r=await Sa.fetchStreamData(e,t);return new Sa(e,t,r)}static fromObjectData(e,t,r){let i=Sa.parseRawStreamData(t,r);return new Sa(e,t,i)}get info(){return{name:this.name,creator:this.creator,coinType:this.coinType,totalAmount:this.totalAmount,start:this.timeStart,end:this.timeEnd,cancelable:this.cancelable,cliffAmount:this.cliff,duration:this.duration,interval:this.interval,steps:this.totalSteps,nextReleaseDate:this.nextReleaseDate,nextReleaseAmount:this.nextReleaseAmount,groupId:this.groupId,streamId:this.streamId,recipient:this.recipient,progress:this.progress,autoClaim:this.autoClaim}}get groupCommonInfo(){return{name:this.name,groupId:this.groupId,creator:this.creator,start:this.timeStart,interval:this.interval,steps:this.totalSteps,cancelable:this.cancelable}}async refresh(){this.rawData=await Sa.fetchStreamData(this.globals,this.streamId)}refreshWithData(e){var t;if(((t=e.data)==null?void 0:t.objectId)!==this.streamId)throw new Ps("Object Id does not align");this.rawData=Sa.parseRawStreamData(this.streamId,e)}async historyEvents(e){return this.globals.backend.getStreamHistory({streamId:this.streamId,pagination:e})}async cancel(){if(await this.globals.walletAddress()!==this.creator)throw new aH;let e=new xe;return this.streamContract.cancelStream(e,{streamId:this.streamId,coinType:this.coinType}),e}async claim(){if(await this.globals.walletAddress()!==this.recipient)throw new K1;let e=new xe;return this.streamContract.claimStream(e,{streamId:this.streamId,coinType:this.coinType}),e}async setAutoClaim(e){if(await this.globals.walletAddress()!==this.recipient)throw new K1;let t=new xe;return this.streamContract.setAutoClaim(t,{streamId:this.streamId,coinType:this.coinType,enabled:e}),t}async claimByProxy(){let e=new xe;return this.streamContract.claimStreamByProxy(e,{streamId:this.streamId,coinType:this.coinType}),e}get wallet(){return this.globals.wallet}get client(){return this.globals.suiClient}get coinType(){return nt(this.rawData.coinType)}get progress(){return{status:this.streamStatus,total:this.totalAmount,streamed:this.streamedAmount,claimed:this.claimedAmount,claimable:this.claimable,canceled:this.canceledAmount}}get balance(){return this.rawData.balance}get autoClaim(){return this.rawData.autoClaim}get amountPerEpoch(){return this.rawData.config.amountPerEpoch}get cancelable(){return this.rawData.config.cancelable}get cliff(){return this.rawData.config.cliff}get creator(){return this.rawData.config.creator}get interval(){return H1(this.rawData.config.epochInterval)}get groupId(){let{metadata:e}=this.rawData.config;return _w(e).groupId}get name(){let{metadata:e}=this.rawData.config;return _w(e).name}get recipient(){return this.rawData.config.recipient}get timeStart(){return Q1(this.rawData.config.timeStart)}get duration(){let e=this.rawData.config,t=e.epochInterval*e.totalEpoch;return H1(t)}get timeEnd(){return this.timeStart.plus(this.duration)}get totalSteps(){return this.rawData.config.totalEpoch}get claimable(){return this.streamedAmount-this.claimedAmount}get nextReleaseDate(){return this.currentEpoch===-1n?this.timeStart:this.currentEpoch>=this.totalSteps||this.isCanceled?null:Q1((this.currentEpoch+1n)*this.rawData.config.epochInterval+this.rawData.config.timeStart)}get nextReleaseAmount(){return this.currentEpoch===-1n?this.cliff:this.currentEpoch>=this.totalSteps||this.isCanceled?null:this.amountPerEpoch}get streamStatus(){let e=this.rawData.status.status;return e===16?"CANCELED":e===17?"SETTLED":e===1?"COMPLETED":this.currentEpoch>=this.totalSteps?"STREAMED":"STREAMING"}get streamedAmount(){return this.currentEpoch===-1n?0n:this.isCanceled?this.rawData.status.epochCanceled*this.amountPerEpoch+this.cliff:this.currentEpoch*this.amountPerEpoch+this.cliff}get claimedAmount(){return this.rawData.status.epochClaimed===lH?0n:this.rawData.status.epochClaimed*this.amountPerEpoch+this.cliff}get currentEpoch(){let e=at.now().toMillis(),t=this.timeStart.toMillis();if(e<t)return-1n;let r=Math.floor((e-t)/Number(this.rawData.config.epochInterval));return BigInt(r)>Number(this.rawData.config.totalEpoch)?this.rawData.config.totalEpoch:BigInt(r)}get totalAmount(){let e=this.rawData.config;return e.amountPerEpoch*e.totalEpoch+e.cliff}get isCanceled(){let e=this.rawData.status.status;return e===16||e===17}get canceledAmount(){return this.isCanceled?this.totalAmount-this.streamedAmount:0n}static async fetchStreamData(e,t){let r=await e.suiClient.getObject({id:t,options:{showContent:!0,showType:!0}});return Sa.parseRawStreamData(t,r)}static parseRawStreamData(e,t){if(t.error)throw t.error.code==="notExists"?new cH(e):new Z1(`get stream data: ${t.error.code}`,{streamId:e,...t.error});let r=t.data.content;if(r.dataType!=="moveObject")throw new Z1("Unexpected object type",{gotType:r.dataType});let{typeParams:i}=Av(r.type),s=nt(i[0]),o=r.fields,a=o.config.fields,c=o.status.fields;return{coinType:s,autoClaim:o.auto_claim,balance:BigInt(o.balance.fields.balance),config:{amountPerEpoch:BigInt(a.amount_per_epoch),cancelable:a.cancelable,cliff:BigInt(a.cliff),creator:a.creator,epochInterval:BigInt(a.epoch_interval),metadata:a.metadata,recipient:a.recipient,timeStart:BigInt(a.time_start),totalEpoch:BigInt(a.total_epoch)},status:{status:c.status,epochCanceled:BigInt(c.epoch_canceled),epochClaimed:BigInt(c.epoch_claimed)}}}},uH=class extends Fi{constructor(n,e){super(12,`Transaction failed: ${e}`,{context:{status:n,msg:e}})}},dH=1e3,hH=class{constructor(n){v(this,"coinMetaHelper");v(this,"createStreamHelper");this.globals=n,this.coinMetaHelper=new fH(n.suiClient),this.createStreamHelper=new mI(n).createStreamHelper()}getStreamIdsFromCreateStreamResponse(n){var e,t,r;if(((e=n.effects)==null?void 0:e.status.status)!=="success")throw new uH((t=n.effects)==null?void 0:t.status.status,(r=n.effects)==null?void 0:r.status.error);return n.objectChanges.filter(i=>i.type==="created"&&i.objectType.startsWith(`${this.globals.envConfig.contract.contractId}::stream::Stream`)).map(i=>i.objectId)}calculateCreateStreamFees(n){return this.createStreamHelper.calculateCreateStreamFees(n)}feeParams(){return this.createStreamHelper.feeParams()}calculateStreamAmount(n){if(n.steps===0n)throw new Ii("Invalid stream steps: 0");let e=n.cliff?n.cliff:{numerator:0n,denominator:100n},t=n.totalAmount*e.numerator/e.denominator,r=(n.totalAmount-t)/n.steps,i={realTotalAmount:r*n.steps+t,cliffAmount:t,amountPerStep:r};return this.validateStreamAmount(i,n.totalAmount),i}calculateTimelineByInterval(n){if(n.steps===0n)throw new Ii("Invalid stream steps: 0");let e=n.timeStart.plus(n.interval.toMillis()*Number(n.steps)),t={timeStart:n.timeStart,timeEnd:e,interval:n.interval,steps:n.steps};return this.validateTimeline(t),t}calculateTimelineByTotalDuration(n){if(n.steps===0n)throw new Ii("Invalid stream steps: 0");let e=BigInt(n.total.toMillis())/n.steps,t=n.timeStart.plus(xt.fromMillis(Number(e*n.steps))),r={timeStart:n.timeStart,timeEnd:t,interval:xt.fromMillis(Number(e)),steps:n.steps};return this.validateTimeline(r),r}async getBalance(n,e){let t=await this.globals.suiClient.getBalance({owner:n,coinType:e}),r=await this.getCoinMeta(e);return{...t,coinType:nt(t.coinType),coinMeta:r}}async getAllBalance(n){let e=await this.globals.suiClient.getAllBalances({owner:n}),t=await Promise.all(e.map(r=>this.getCoinMeta(r.coinType)));return e.map((r,i)=>({...r,coinType:nt(r.coinType),coinMeta:t[i]}))}async getCoinMeta(n){return this.coinMetaHelper.getCoinMeta(n)}async simulateTransactionBlock(n){return this.globals.suiClient.devInspectTransactionBlock({transactionBlock:n,sender:await this.globals.wallet.address()})}validateStreamAmount(n,e){if(n.amountPerStep===0n)throw new Ii("Stream amount too small","totalAmount",e);if(n.cliffAmount>n.realTotalAmount)throw new Ii("Invalid cliff settings")}validateTimeline(n){if(n.interval.toMillis()<dH)throw new Ii("Interval shall be at least 1 second","interval",n.interval)}},fH=class{constructor(n){v(this,"coinMetaReg");this.suiClient=n,this.coinMetaReg=new Map}async getCoinMeta(n){let e=nt(n||$c);if(this.coinMetaReg.has(e))return this.coinMetaReg.get(e);let t=await this.queryCoinMeta(e);return t&&this.coinMetaReg.set(e,t),t}async queryCoinMeta(n){return await this.suiClient.getCoinMetadata({coinType:n})||void 0}},e0=class extends Fi{constructor(n,e){super(9,`Invalid stream group: ${n}`,{context:e})}},pH=25;async function G1(n,e,t){let r=new wI(e),i=new yI(n,r,t);return await eH(i)}var wI=class{constructor(n){v(this,"cursor");this.ids=n,this.cursor=-1}async hasNext(){return this.cursor<this.ids.length-1}async next(){if(this.cursor+=1,this.cursor>=this.ids.length)throw new Error("invalid iterator implementation");return this.ids[this.cursor]}},yI=class extends gI{constructor(n,e,t){super(new mH(n,e,t)),this.suiClient=n,this.idIter=e,this.options=t}},mH=class{constructor(n,e,t){v(this,"filter");v(this,"pageSize");v(this,"objectOptions");this.suiClient=n,this.stringIter=e,this.options=t,this.filter=t==null?void 0:t.filter,this.pageSize=(t==null?void 0:t.pageSize)||pH,this.objectOptions=(t==null?void 0:t.objectOptions)||{showType:!0,showContent:!0}}async doNextRequest(){let n=[];for(;n.length<this.pageSize&&await this.stringIter.hasNext();){let r=await this.stringIter.next();r&&n.push(r)}let e=await this.suiClient.multiGetObjects({ids:n,options:this.objectOptions}),t;if(this.filter){let{filter:r}=this;t=e.filter(i=>r==null?void 0:r(i))}else t=e;return{data:t,hasNext:await this.stringIter.hasNext()}}},gH=class Vf{constructor(e,t){v(this,"type","StreamGroup");if(this.globals=e,this.streams=t,t.length===0)throw new e0("stream size 0");let r=t.map(i=>i.groupId);if(new Set(r).size!==1)throw new Ii("Stream does not have same group ID")}static async new(e,t){let r=await G1(e.suiClient,t);return r.forEach(i=>{if(!i)throw new Ps("stream group object data undefined")}),Vf.newFromObjectResponse(e,t,r)}static async newFromObjectResponse(e,t,r){let i=await Vf.parseGroupStreams(e,t,r);return new Vf(e,i)}static checkStreamGroup(e){let t=e.map(s=>s.groupCommonInfo),r=t[0],i=!0;return t.forEach(s=>{wH(r,s)||(i=!1)}),i}async refresh(){let e=await G1(this.globals.suiClient,this.streams.map(t=>t.streamId));this.streams.forEach((t,r)=>{t.refreshWithData(e[r])})}get groupId(){return this.streams[0].groupId}get creator(){return this.streams[0].creator}get info(){return{groupId:this.groupId,streamIds:this.streams.map(e=>e.streamId),progress:this.progress,name:this.streams[0].name,creator:this.creator,coinType:this.streams[0].coinType,totalAmount:this.streams.reduce((e,t)=>e+t.totalAmount,0n),start:this.streams[0].timeStart,end:this.streams[0].timeEnd,cancelable:this.streams[0].cancelable,cliffAmount:this.streams.reduce((e,t)=>e+t.cliff,0n),duration:this.streams[0].duration,interval:this.streams[0].interval,steps:this.streams[0].totalSteps,nextReleaseAmount:this.streams.reduce((e,t)=>t.nextReleaseAmount===null?e:e+t.nextReleaseAmount,0n),nextReleaseDate:this.streams[0].nextReleaseDate}}get progress(){return{total:this.streams.reduce((e,t)=>e+t.totalAmount,0n),streamed:this.streams.reduce((e,t)=>e+t.streamedAmount,0n),claimed:this.streams.reduce((e,t)=>e+t.claimedAmount,0n),claimable:this.streams.reduce((e,t)=>e+t.claimable,0n),canceled:this.streams.reduce((e,t)=>e+t.canceledAmount,0n)}}async historyEvents(e){return this.globals.backend.getStreamHistory({groupId:this.groupId,pagination:e})}static async parseGroupStreams(e,t,r){let i=r.map((s,o)=>ub.fromObjectData(e,t[o],s)).filter(s=>!!s);if(new Set(i.map(s=>s.groupId)).size!==1)throw new e0("Not same group ID");if(!this.checkStreamGroup(i))throw new e0("Not same stream settings");return i}};function wH(n,e){return n.name===e.name&&n.groupId===e.groupId&&n.creator===e.creator&&n.start.toMillis()===e.start.toMillis()&&n.interval.toMillis()===e.interval.toMillis()&&n.steps===e.steps&&n.cancelable===e.cancelable}var Y1=class kw{constructor(e,t){this.it=e,this.pageSize=t}static async newIncoming(e){let t=await X1.newIncoming(e);return new kw(t,e.pageSize)}static async newOutgoing(e){let t=await X1.newOutgoing(e);return new kw(t,e.pageSize)}async hasNext(){return this.it.hasNext()}async next(){let e=[];for(;e.length<this.pageSize&&await this.it.hasNext();)e.push(await this.it.next());return e}},X1=class Sw{constructor(e){v(this,"cachedNext");this.requester=e}static async newIncoming(e){let t=await J1.newIncomingQuery(e);return new Sw(t)}static async newOutgoing(e){let t=await J1.newOutgoingQuery(e);return new Sw(t)}async hasNext(){return this.cachedNext===void 0&&(this.cachedNext=await this.requester.doNextRequest()),this.cachedNext!==null}async next(){if(this.cachedNext===void 0){let t=await this.requester.doNextRequest();if(t===null)throw new Ps("No more results");return t}let e=this.cachedNext;if(this.cachedNext=void 0,e===null)throw new Ps("No more results");return e}},J1=class Cw{constructor(e,t,r,i){v(this,"current",0);v(this,"objectIter");this.globals=e,this.recipient=t,this.groupRefs=r,this.query=i,this.current=0;let s=new wI(r.flat().map(o=>o.streamId));this.objectIter=new yI(e.suiClient,s)}static async newIncomingQuery(e){let t=kH(e.query),r=await e.globals.walletAddress(),i=(await e.globals.backend.getIncomingStreams(r,t)).filter(o=>Et(o.recipient)===Et(r)),s=ev(i);return new Cw(e.globals,r,s,e.query)}static async newOutgoingQuery(e){let t=SH(e.query),r=await e.globals.walletAddress(),i=await e.globals.backend.getOutgoingStreams(r,t),s=ev(i);return new Cw(e.globals,r,s,e.query)}async doNextRequest(){if(this.current>=this.groupRefs.length)return null;let e=this.groupRefs[this.current];if(e.length===1){let t=await _H(this.globals,e[0].streamId,this.objectIter);return this.current++,bI(t,this.query)?t:this.doNextRequest()}if(e.length>1){let t=await vH(this.globals,e.map(r=>r.streamId),this.objectIter);return this.current++,bH(t,this.query)?t:this.doNextRequest()}throw new Ps("Stream group with no stream")}};function ev(n){let e=new Map;return n.forEach(t=>{let r=e.get(t.groupId);r?(r.push(t),e.set(t.groupId,r)):e.set(t.groupId,[t])}),Array.from(e.values()).sort((t,r)=>at.fromISO(r[0].createDate).toMillis()-at.fromISO(t[0].createDate).toMillis())}function bI(n,e){if(e===void 0)return!0;let t=yH(n,e.status);if(e&&"claimable"in e&&e.claimable!==void 0){let r=e.claimable?n.progress.claimable!==0n:n.progress.claimable===0n;return t&&r}return t}function yH(n,e){return e===void 0?!0:Array.isArray(e)?e.includes(n.progress.status):n.progress.status===e}function bH(n,e){if(!e)return!0;let t=!1;return n.streams.forEach(r=>{bI(r,e)&&(t=!0)}),t}async function _H(n,e,t){let r=await _I(t,e);return ub.fromObjectData(n,e,r)}async function vH(n,e,t){let r=[];for(;r.length<e.length;){let i=await _I(t,e[r.length]);r.push(i)}return gH.newFromObjectResponse(n,e,r)}async function _I(n,e){var r;if(!await n.hasNext())throw new Ps("object iterator has been consumed");let t=await n.next();if(!t||t.error||t.data===void 0||t.data===null)throw new Ps("object iterator undefined response",{cause:t==null?void 0:t.error});if(((r=t==null?void 0:t.data)==null?void 0:r.objectId)!==e)throw new Ps("stream id not aligned");return t}function kH(n){return{status:db(n==null?void 0:n.status),coinType:vI(n==null?void 0:n.coinType),sender:kI(n==null?void 0:n.sender)}}function SH(n){return{status:db(n==null?void 0:n.status),coinType:vI(n==null?void 0:n.coinType),recipient:kI(n==null?void 0:n.recipient)}}function db(n){return n===void 0||n.length===0?"all":Array.isArray(n)?n.reduce((e,t)=>{let r=db(t);return!e||e===r?r:"all"},void 0):CH(n)}function CH(n){switch(n){case"STREAMING":case"STREAMED":case"CANCELED":return"active";case"COMPLETED":case"SETTLED":return"inactive";default:throw new Ii("Unknown stream filtered status")}}function vI(n){if(n)return Array.isArray(n)?n.length!==0?n.map(e=>nt(e)):void 0:nt(n)}function kI(n){if(n)return Array.isArray(n)?n.length!==0?n.map(e=>Et(e)):void 0:Et(n)}var AH=class{constructor(n){this.msafe=n}get type(){return"msafe"}async address(){return this.msafe.address()}async requestCoins(n){return this.msafe.requestCoins(n)}},TH=class{constructor(n){this.account=n}async address(){return this.account.address}},IH=class{constructor(n,e){this.singleWallet=n,this.suiClient=e}get type(){return"single"}async address(){return this.singleWallet.address()}async requestCoins(n){return Promise.all(n.map(e=>this.requestCoin(e)))}async requestCoin(n){if(uI(n.coinType,$c))return{primaryCoin:dI};if(n.amount<=0)throw new Ii("Invalid coin request","coinAmount",n.amount);let e=await iH(this.suiClient,await this.address(),n.amount,n.coinType);if(e.length===0)throw new Ps("no coins available");return{primaryCoin:e[0].coinObjectId,mergedCoins:e.slice(1).map(t=>t.coinObjectId)}}},xH=class{constructor(n,e){v(this,"globals");v(this,"helper");this.globals=sI.new(n,e),this.helper=new hH(this.globals)}connectSingleWallet(n){let e=new IH(n,this.globals.suiClient);this.globals.connectWallet(e)}connectMSafeAccount(n){let e=new AH(n);this.globals.connectWallet(e)}async createStream(n){return this.builder().createStreams(n)}async getStream(n){return ub.new(this.globals,n)}async getIncomingStreams(n,e=10){return Y1.newIncoming({globals:this.globals,query:n,pageSize:e})}async getOutgoingStreams(n,e=10){return Y1.newOutgoing({globals:this.globals,query:n,pageSize:e})}async getCoinTypesForStreamFilter(){let n=await this.wallet.address();return(await this.globals.backend.getAllCoinTypes(n)).map(e=>nt(e))}async getRecipientsForStreamFilter(n){let e=await this.wallet.address();return(await this.globals.backend.getAllRecipients(e,n)).map(t=>Et(t))}async getCreatorsForStreamFilter(n){let e=await this.wallet.address();return(await this.globals.backend.getAllSenders(e,n)).map(t=>Et(t))}get wallet(){return this.globals.wallet}builder(){return new mI(this.globals)}},dh=class extends An{constructor(){super(...arguments);v(this,"application","mpay")}getClient(e,t){let r=new xH(e==="sui:mainnet"?"prod":"dev");return r.connectSingleWallet(new TH(t)),r}},tv=class extends dh{constructor(e){super(e);v(this,"txType",Ee.Stream);v(this,"txSubType","Cancel");this.data=e}async build(e){let{network:t,account:r}=e;return(await this.getClient(t,r).getStream(this.data.streamId)).cancel()}},nv=class extends dh{constructor(e){super(e);v(this,"txType",Ee.Stream);v(this,"txSubType","ClaimByProxy");this.data=e}async build(e){let{network:t,account:r}=e;return(await this.getClient(t,r).getStream(this.data.streamId)).claimByProxy()}},rv=class extends dh{constructor(e){super(e);v(this,"txType",Ee.Stream);v(this,"txSubType","Claim");this.data=e}async build(e){let{network:t,account:r}=e;return(await this.getClient(t,r).getStream(this.data.streamId)).claim()}},iv=class extends dh{constructor(e){super(e);v(this,"txType",Ee.Stream);v(this,"txSubType","CreateStream");this.data=e}async build(e){let{network:t,account:r}=e;return this.getClient(t,r).createStream(this.data)}},SI=class qf{constructor(e,t){this.moveCall=e,this.txb=t}decodeSharedObjectId(e){let t=this.getInputParam(e);return qf.getSharedObjectId(t)}decodeOwnedObjectId(e){let t=this.getInputParam(e);return qf.getOwnedObjectId(t)}decodeInputU64(e){let t=this.decodePureArg(e,"u64");return BigInt(t)}decodeInputAddress(e){let t=this.decodePureArg(e,"address");return Et(t)}decodeInputString(e){return this.decodePureArg(e,"string")}decodeInputBool(e){return this.decodePureArg(e,"bool")}decodePureArg(e,t){let r=this.getInputParam(e);return qf.getPureInputValue(r,t)}getInputParam(e){let t=this.moveCall.arguments[e];if(t.kind!=="Input")throw new Error("not input type");return this.txb.blockData.inputs[t.index]}static getPureInputValue(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value=="object"&&"Pure"in e.value){let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}return e.value}static getOwnedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value=="object"){if(!("Object"in e.value)||!("ImmOrOwned"in e.value.Object))throw new Error("not ImmOrOwned");return Et(e.value.Object.ImmOrOwned.objectId)}return Et(e.value)}static getSharedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value!="object")return Et(e.value);if(!("Object"in e.value)||!("Shared"in e.value.Object))throw new Error("not Shared");return Et(e.value.Object.Shared.objectId)}static getPureInput(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value!="object")return e.value;if(!("Pure"in e.value))throw new Error("Pure not in value");let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}typeArg(e){return nt(this.moveCall.typeArguments[e])}txArg(e){return this.moveCall.arguments[e]}},EH=class{constructor(n,e){this.globals=n,this.txb=e}decode(){let n=this.decodeCreateStreamInfo(),e=this.createStreamHelper().calculateCreateStreamFees(n);return{type:"CreateStream",info:n,fees:e}}decodeCreateStreamInfo(){let n=this.createStreamTransactions().map(e=>this.getCreationInfoFromMoveCall(e));return this.aggregateGroupStreamInfo(n)}createStreamTransactions(){let n=this.transactions.filter(e=>e.kind==="MoveCall"&&Tl(e.target,this.contract.createStreamTarget));if(n.length===0)throw new Ps("No create stream transactions");return n.map(e=>new SI(e,this.txb))}getCreationInfoFromMoveCall(n){let e=n.decodeInputString(4),{name:t,groupId:r}=_w(e),i=n.decodeInputAddress(5),s=n.decodeInputU64(6),o=n.decodeInputU64(7),a=n.decodeInputU64(8),c=n.decodeInputU64(9),l=n.decodeInputU64(10),u=n.decodeInputBool(11),d=n.typeArg(0);return{name:t,groupId:r,recipient:i,timeStart:s,cliff:o,epochInterval:a,totalEpoch:c,amountPerEpoch:l,cancelable:u,coinType:d}}aggregateGroupStreamInfo(n){if(new Set(n.map(t=>JSON.stringify({name:t.name,groupId:t.groupId,timeStart:String(t.timeStart),epochInterval:String(t.epochInterval),totalEpoch:String(t.totalEpoch),cancelable:t.cancelable,coinType:t.coinType}))).size!==1)throw new Ii("Stream group not have common info");let e=n.map(t=>({address:t.recipient,amountPerStep:t.amountPerEpoch,cliffAmount:t.cliff}));return{name:n[0].name,coinType:n[0].coinType,recipients:e,interval:n[0].epochInterval,steps:n[0].totalEpoch,startTimeMs:n[0].timeStart,cancelable:n[0].cancelable}}mergeCoinTransactions(){return this.transactions.filter(n=>n.kind==="MergeCoins")}get transactions(){return this.txb.blockData.transactions}get contract(){return new Fm(this.globals.envConfig.contract,this.globals)}get feeContract(){return new pI(this.globals.envConfig.contract,this.globals)}createStreamHelper(){return new vw(this.globals,this.feeContract,this.contract)}getInputArg(n){if(n.kind!=="Input")throw new Error("not input type");return"value"in n?n:this.txb.blockData.inputs[n.index]}},MH=class{constructor(n,e){v(this,"contract");this.globals=n,this.txb=e,this.contract=new Fm(n.envConfig.contract,n)}decode(){if(this.isCreateStreamTransaction())return this.decodeCreateStreamTransaction();if(this.isClaimByProxyTransaction())return this.decodeClaimByProxyTransaction();if(this.isSetAutoClaimTransaction())return this.decodeSetAutoClaimTransaction();if(this.isCancelStreamTransaction())return this.decodeCancelStreamTransaction();if(this.isClaimStreamTransaction())return this.decodeClaimTransaction();throw new Error("Unknown stream transaction type")}get transactions(){return this.txb.blockData.transactions}isCreateStreamTransaction(){return this.transactions.findIndex(n=>n.kind==="MoveCall"&&Tl(n.target,this.contract.createStreamTarget))!==-1}isSetAutoClaimTransaction(){return this.transactions.length===1&&this.transactions[0].kind==="MoveCall"&&Tl(this.transactions[0].target,this.contract.setAutoClaimTarget)}isCancelStreamTransaction(){return this.transactions.length===1&&this.transactions[0].kind==="MoveCall"&&Tl(this.transactions[0].target,this.contract.cancelStreamTarget)}isClaimStreamTransaction(){return this.transactions.length===1&&this.transactions[0].kind==="MoveCall"&&Tl(this.transactions[0].target,this.contract.claimStreamTarget)}isClaimByProxyTransaction(){return this.transactions.length===1&&this.transactions[0].kind==="MoveCall"&&Tl(this.transactions[0].target,this.contract.claimStreamByProxyTarget)}decodeCreateStreamTransaction(){return new EH(this.globals,this.txb).decode()}decodeSetAutoClaimTransaction(){let n=this.helper.decodeSharedObjectId(0),e=this.helper.decodeInputBool(1);return{type:"SetAutoClaim",streamId:n,enabled:e}}decodeClaimTransaction(){return{type:"Claim",streamId:this.helper.decodeSharedObjectId(0)}}decodeClaimByProxyTransaction(){return{type:"ClaimByProxy",streamId:this.helper.decodeSharedObjectId(0)}}decodeCancelStreamTransaction(){return{type:"Cancel",streamId:this.helper.decodeSharedObjectId(0)}}get helper(){let n=this.transactions[0];return new SI(n,this.txb)}},sv=class extends dh{constructor(e){super(e);v(this,"txType",Ee.Stream);v(this,"txSubType","SetAutoClaim");this.data=e}async build(e){let{network:t,account:r}=e;return(await this.getClient(t,r).getStream(this.data.streamId)).setAutoClaim(this.data.enabled)}},OH=class{constructor(){v(this,"application","mpay");v(this,"supportSDK","@mysten/sui.js")}async deserialize(n){let{network:e,transactionBlock:t}=n,r=sI.new(e==="sui:mainnet"?"prod":"dev"),i=new MH(r,t).decode(),s;switch(i.type){case"CreateStream":s=new iv(i.info);break;case"SetAutoClaim":s=new sv({streamId:i.streamId,enabled:i.enabled});break;case"Claim":s=new rv({streamId:i.streamId});break;case"ClaimByProxy":s=new nv({streamId:i.streamId});break;case"Cancel":s=new tv({streamId:i.streamId});break;default:throw new Error(`Unknown transaction type: ${i}`)}return{txType:s.txType,txSubType:s.txSubType,intentionData:s.data}}async build(n){let{intentionData:e}=n,t;switch(n.txSubType){case"CreateStream":t=new iv(e);break;case"Claim":t=new rv(e);break;case"ClaimByProxy":t=new nv(e);break;case"SetAutoClaim":t=new sv(e);break;case"Cancel":t=new tv(e);break;default:throw new Error("not implemented")}return t.build({...n})}},NH=class CI extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let{suiClient:r,account:i}=t;return oL(r,this.data,i.address)}static fromData(t){return new CI(t)}},jH=class AI extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let{suiClient:r,account:i}=t;return lL(r,this.data,i.address)}static fromData(t){return new AI(t)}},DH=class TI extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let{account:r}=t,i=xe.from(this.data.content);if(!lC(i.blockData.sender,r.address))throw new Error("Invalid sender address");return i}static fromData(t){return new TI(t)}},BH=class{constructor(){v(this,"application","msafe-core");v(this,"supportSDK","@mysten/sui.js");this.application=hL}deserialize(){throw new Error("MSafe core transaction intention should be build from API")}async build(n){let{suiClient:e,account:t}=n,r;switch(n.txSubType){case Ef.assets.coin.send:r=NH.fromData(n.intentionData);break;case Ef.assets.object.send:r=jH.fromData(n.intentionData);break;case Ef.others.plain:r=DH.fromData(n.intentionData);break;default:throw new Error("not implemented")}return r.build({suiClient:e,account:t})}},ov=!1,zf={ProtocolPackage:"0xc6374c7da60746002bfee93014aeb607e023b2d6b25c9e55a152b826dbc8c1ce",StorageId:"0xbb4e2f4b6205c2e2a2db47aeb4f830796ec7c005f88537ee775986639bc442fe",Incentive:"0xaaf735bf83ff564e1b219a0d644de894ef5bdc4b2250b126b2a46dd002331821",IncentiveV2:"0xf87a8acb8b81d14307894d12595541a73f19933f88e1326d5be349c7a6f7559c",gasBudget:5e7,PriceOracle:"0x1568865ed9a0b5ec414220e8f79b3d04c77acc82358f6e5ae4635687392ffbef",ReserveParentId:"0xe6d4c6610b86ce7735ea754596d71d72d10c7980b5052fc3c8cdf8d09fea9b4b",pool:{sui:{name:"SUI",assetId:0,poolId:"0x96df0fce3c471489f4debaaa762cf960b3d97820bd1f3f025ff8190730e958c5",fondPoolId:"0xf975bc2d4cca10e3ace8887e20afd77b46c383b4465eac694c4688344955dea4",type:"0x2::sui::SUI",coinType:"sui",reserveObjectId:"0xab644b5fd11aa11e930d1c7bc903ef609a9feaf9ffe1b23532ad8441854fbfaf",borrowBalanceParentId:"0xe7ff0daa9d090727210abe6a8b6c0c5cd483f3692a10610386e4dc9c57871ba7",supplyBalanceParentId:"0x589c83af4b035a3bc64c40d9011397b539b97ea47edf7be8f33d643606bf96f8"},usdc:{name:"USDC",assetId:1,coinType:"usdc",poolId:"0xa02a98f9c88db51c6f5efaaf2261c81f34dd56d86073387e0ef1805ca22e39c8",type:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",reserveObjectId:"0xeb3903f7748ace73429bd52a70fff278aac1725d3b58afa781f25ce3450ac203",borrowBalanceParentId:"0x8a3aaa817a811131c624658f6e77cba04ab5829293d2c49c1a9cce8ac9c8dec4",supplyBalanceParentId:"0x8d0a4467806458052d577c8cd2be6031e972f2b8f5f77fce98aa12cd85330da9"},usdt:{name:"USDT",coinType:"usdt",assetId:2,poolId:"0x0e060c3b5b8de00fb50511b7a45188c8e34b6995c01f69d98ea5a466fe10d103",type:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",reserveObjectId:"0xb8c5eab02a0202f638958cc79a69a2d30055565caad1684b3c8bbca3bddcb322",borrowBalanceParentId:"0xc14d8292a7d69ae31164bafab7ca8a5bfda11f998540fe976a674ed0673e448f",supplyBalanceParentId:"0x7e2a49ff9d2edd875f82b76a9b21e2a5a098e7130abfd510a203b6ea08ab9257"},weth:{name:"WETH",coinType:"weth",assetId:3,poolId:"0x71b9f6e822c48ce827bceadce82201d6a7559f7b0350ed1daa1dc2ba3ac41b56",type:"0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5::coin::COIN",reserveObjectId:"0xafecf4b57899d377cc8c9de75854c68925d9f512d0c47150ca52a0d3a442b735",borrowBalanceParentId:"0x7568d06a1b6ffc416a36c82791e3daf0e621cf19d4a2724fc6f74842661b6323",supplyBalanceParentId:"0xa668905b1ad445a3159b4d29b1181c4a62d864861b463dd9106cc0d97ffe8f7f"},cetus:{name:"CETUS",coinType:"cetus",assetId:4,poolId:"0x3c376f857ec4247b8ee456c1db19e9c74e0154d4876915e54221b5052d5b1e2e",type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",reserveObjectId:"0x66a807c06212537fe46aa6719a00e4fa1e85a932d0b53ce7c4b1041983645133",borrowBalanceParentId:"0x4c3da45ffff6432b4592a39cdb3ce12f4a28034cbcb804bb071facc81fdd923d",supplyBalanceParentId:"0x6adc72faf2a9a15a583c9fb04f457c6a5f0b456bc9b4832413a131dfd4faddae"},voloSui:{name:"VoloSui",coinType:"voloSui",assetId:5,poolId:"0x9790c2c272e15b6bf9b341eb531ef16bcc8ed2b20dfda25d060bf47f5dd88d01",fondPoolId:"0xe2b5ada45273676e0da8ae10f8fe079a7cec3d0f59187d3d20b1549c275b07ea",type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",reserveObjectId:"0xd4fd7e094af9819b06ea3136c13a6ae8da184016b78cf19773ac26d2095793e2",borrowBalanceParentId:"0x8fa5eccbca2c4ba9aae3b87fd44aa75aa5f5b41ea2d9be4d5321379384974984",supplyBalanceParentId:"0xe6457d247b6661b1cac123351998f88f3e724ff6e9ea542127b5dcb3176b3841"},haSui:{name:"HaedalSui",coinType:"haSui",assetId:6,poolId:"0x6fd9cb6ebd76bc80340a9443d72ea0ae282ee20e2fd7544f6ffcd2c070d9557a",fondPoolId:"0xa20e18085ce04be8aa722fbe85423f1ad6b1ae3b1be81ffac00a30f1d6d6ab51",type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",reserveObjectId:"0x0c9f7a6ca561dc566bd75744bcc71a6af1dc3caf7bd32c099cd640bb5f3bb0e3",borrowBalanceParentId:"0x01f36898e020be6c3423e5c95d9f348868813cd4d0be39b0c8df9d8de4722b00",supplyBalanceParentId:"0x278b8e3d09c3548c60c51ed2f8eed281876ea58c392f71b7ff650cc9286d095b"},navx:{name:"NAVX",coinType:"navx",assetId:7,poolId:"0xc0e02e7a245e855dd365422faf76f87d9f5b2148a26d48dda6e8253c3fe9fa60",fondPoolId:"0x9dae0cf104a193217904f88a48ce2cf0221e8cd9073878edd05101d6b771fa09",type:"0xa99b8952d4f7d947ea77fe0ecdcc9e5fc0bcab2841d6e2a5aa00c3044e5544b5::navx::NAVX",reserveObjectId:"0x2e13b2f1f714c0c5fa72264f147ef7632b48ec2501f810c07df3ccb59d6fdc81",borrowBalanceParentId:"0xa5bf13075aa400cbdd4690a617c5f008e1fae0511dcd4f7121f09817df6c8d8b",supplyBalanceParentId:"0x59dedca8dc44e8df50b190f8b5fe673098c1273ac6168c0a4addf3613afcdee5"},wbtc:{name:"WBTC",coinType:"wbtc",assetId:8,poolId:"0xd162cbe40f8829ce71c9b3d3bf3a83859689a79fa220b23d70dc0300b777ae6e",type:"0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881::coin::COIN",reserveObjectId:"0x8b4d81f004e4e9faf4540951a896b6d96e42598a270e6375f598b99742db767e",borrowBalanceParentId:"0x55e1f3c9e6e5cf9fff563bdd61db07a3826458c56ef72c455e049ab3b1b0e99c",supplyBalanceParentId:"0x821e505a0091b089edba94deaa14c2f2230d026bbaa7b85680554441aad447e0"},ausd:{name:"AUSD",coinType:"ausd",assetId:9,poolId:"0xc9208c1e75f990b2c814fa3a45f1bf0e85bb78404cfdb2ae6bb97de58bb30932",type:"0x2053d08c1e2bd02791056171aab0fd12bd7cd7efad2ab8f6b9c8902f14df2ff2::ausd::AUSD",reserveObjectId:"0x918889c6a9d9b93108531d4d59a4ebb9cc4d41689798ffc1d4aed6e1ae816ec0",borrowBalanceParentId:"0x551300b9441c9a3a16ca1d7972c1dbb4715e15004ccd5f001b2c2eee22fd92c1",supplyBalanceParentId:"0xe151af690355de8be1c0281fbd0d483c099ea51920a57c4bf8c9666fd36808fd"}},borrowFee:.003,borrowFeeAddress:"0x70b9b10704263cf53392849e33b1f5fd16005869b4198ed5524836bad1234ea2"};async function av(){if(!ov)try{let n=await fetch("https://open-api.naviprotocol.io/api/msafe").then(i=>i.json()),{packageId:e,borrowFee:t,borrowFeeAddress:r}=n;e&&(zf.ProtocolPackage=e),t&&(zf.borrowFee=t),r&&(zf.borrowFeeAddress=r),ov=!0}catch(n){console.error(n.message)}}var wt=zf,RH=class{constructor(n){this.txb=n}decode(){if(console.log("txb",this.txb),this.isClaimRewardTransaction())return this.decodeClaimReward();if(this.isEntryBorrowTransaction())return this.decodeEntryBorrow();if(this.isEntryBorrowWithFeeTransaction())return this.decodeEntryBorrow();if(this.isEntryDepositTransaction())return this.decodeEntryDeposit();if(this.isEntryRepayTransaction())return this.decodeEntryRepay();if(this.isEntryWithdrawTransaction())return this.decodeEntryWithdraw();throw new Error("Unknown transaction type")}get transactions(){return this.txb.blockData.transactions}getMoveCallTransaction(n){return this.transactions.find(e=>e.kind==="MoveCall"&&e.target===n)}isClaimRewardTransaction(){return!!this.getMoveCallTransaction(`${wt.ProtocolPackage}::incentive_v2::claim_reward`)}isEntryBorrowTransaction(){return!!this.getMoveCallTransaction(`${wt.ProtocolPackage}::incentive_v2::entry_borrow`)}isEntryBorrowWithFeeTransaction(){return!!this.getMoveCallTransaction(`${wt.ProtocolPackage}::incentive_v2::borrow`)}isEntryDepositTransaction(){return!!this.getMoveCallTransaction(`${wt.ProtocolPackage}::incentive_v2::entry_deposit`)}isEntryRepayTransaction(){return!!this.getMoveCallTransaction(`${wt.ProtocolPackage}::incentive_v2::entry_repay`)}isEntryWithdrawTransaction(){return!!this.getMoveCallTransaction(`${wt.ProtocolPackage}::incentive_v2::entry_withdraw`)}findPoolByAssetId(n){let e=Object.values(wt.pool).find(t=>t.assetId===n);if(!e)throw new Error("Pool not found");return e}decodeClaimReward(){let n=[];return this.transactions.forEach(e=>{if(e.kind==="MoveCall"&&e.target===`${wt.ProtocolPackage}::incentive_v2::claim_reward`){let t=new cv(e,this.txb),r=t.decodeInputU8(4),i=t.decodeInputU8(5),s=t.decodeSharedObjectId(2),o=this.findPoolByAssetId(r),a=[...e.typeArguments];n.push({coinType:o.coinType,option:i,typeArguments:a,assetId:r,poolId:s})}}),console.log("decode claims",n),{txType:Ee.Other,type:"ClaimReward",intentionData:{claims:n}}}decodeEntryBorrow(){let n=this.helper.decodeInputU8(4),e=this.helper.decodeInputU64(5),t=this.findPoolByAssetId(n);return{txType:Ee.Other,type:"EntryBorrow",intentionData:{amount:e,coinType:t.coinType}}}decodeEntryDeposit(){let n=this.helper.decodeInputU8(3),e=this.helper.decodeInputU64(5),t=this.findPoolByAssetId(n);return{txType:Ee.Other,type:"EntryDeposit",intentionData:{amount:e,coinType:t.coinType}}}decodeEntryRepay(){let n=this.helper.decodeInputU8(4),e=this.helper.decodeInputU64(6),t=this.findPoolByAssetId(n);return{txType:Ee.Other,type:"EntryRepay",intentionData:{amount:e,coinType:t.coinType}}}decodeEntryWithdraw(){let n=this.helper.decodeInputU8(4),e=this.helper.decodeInputU64(5),t=this.findPoolByAssetId(n);return{txType:Ee.Other,type:"EntryWithdraw",intentionData:{amount:e,coinType:t.coinType}}}get helper(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(wt.ProtocolPackage));return new cv(n,this.txb)}},cv=class Wf{constructor(e,t){this.moveCall=e,this.txb=t}decodeSharedObjectId(e){let t=this.getInputParam(e);return Wf.getSharedObjectId(t)}decodeOwnedObjectId(e){let t=this.getInputParam(e);return Wf.getOwnedObjectId(t)}decodeInputU64(e){let t=this.decodePureArg(e,"u64");return Number(t)}decodeInputU8(e){let t=this.decodePureArg(e,"u8");return Number(t)}decodeInputAddress(e){let t=this.decodePureArg(e,"address");return Et(t)}decodeInputString(e){return this.decodePureArg(e,"string")}decodeInputBool(e){return this.decodePureArg(e,"bool")}decodePureArg(e,t){let r=this.getInputParam(e);return Wf.getPureInputValue(r,t)}getInputParam(e){let t=this.moveCall.arguments[e];if(t.kind!=="Input")throw new Error("not input type");return this.txb.blockData.inputs[t.index]}static getPureInputValue(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value=="object"&&"Pure"in e.value){let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}return e.value}static getOwnedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value=="object"){if(!("Object"in e.value)||!("ImmOrOwned"in e.value.Object))throw new Error("not ImmOrOwned");return Et(e.value.Object.ImmOrOwned.objectId)}return Et(e.value)}static getSharedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value!="object")return Et(e.value);if(!("Object"in e.value)||!("Shared"in e.value.Object))throw new Error("not Shared");return Et(e.value.Object.Shared.objectId)}static getPureInput(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value!="object")return e.value;if(!("Pure"in e.value))throw new Error("Pure not in value");let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}typeArg(e){return nt(this.moveCall.typeArguments[e])}txArg(e){return this.moveCall.arguments[e]}};function lv(n,e,t,r){return n.moveCall({target:`${wt.ProtocolPackage}::incentive_v2::entry_deposit`,arguments:[n.object("0x06"),n.object(wt.StorageId),n.object(e.poolId),n.pure(e.assetId),t,n.pure(r),n.object(wt.Incentive),n.object(wt.IncentiveV2)],typeArguments:[e.type]}),n}function PH(n,e,t){return n.moveCall({target:`${wt.ProtocolPackage}::incentive_v2::entry_withdraw`,arguments:[n.object("0x06"),n.object(wt.PriceOracle),n.object(wt.StorageId),n.object(e.poolId),n.pure(e.assetId),n.pure(t),n.object(wt.Incentive),n.object(wt.IncentiveV2)],typeArguments:[e.type]}),n}function UH(n,e,t,r){let i=n.moveCall({target:`${wt.ProtocolPackage}::incentive_v2::borrow`,arguments:[n.object("0x06"),n.object(wt.PriceOracle),n.object(wt.StorageId),n.object(e.poolId),n.pure(e.assetId),n.pure(t),n.object(wt.IncentiveV2)],typeArguments:[e.type]}),[s]=n.moveCall({target:"0x02::coin::from_balance",typeArguments:[e.type],arguments:[i]});if(wt.borrowFee>0){let[o]=n.splitCoins(s,[n.pure(Math.floor(t*wt.borrowFee))]);n.transferObjects([s],n.pure(r)),n.transferObjects([o],n.pure(wt.borrowFeeAddress))}else n.transferObjects([s],n.pure(r));return n}function uv(n,e,t,r){return n.moveCall({target:`${wt.ProtocolPackage}::incentive_v2::entry_repay`,arguments:[n.object("0x06"),n.object(wt.PriceOracle),n.object(wt.StorageId),n.object(e.poolId),n.pure(e.assetId),t,n.pure(r),n.object(wt.IncentiveV2)],typeArguments:[e.type]}),n}function FH(n,e,t,r,i){return n.moveCall({target:`${wt.ProtocolPackage}::incentive_v2::claim_reward`,arguments:[n.object("0x06"),n.object(wt.IncentiveV2),n.object(t),n.object(wt.StorageId),n.pure(e),n.pure(r)],typeArguments:i}),n}var LH=class II extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(){let{claims:t}=this.data,r=new xe;return t.forEach(i=>{let{assetId:s,poolId:o,option:a,typeArguments:c}=i;FH(r,s,o,a,c)}),r}static fromData(t){return new II(t)}},$H=class xI extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let{coinType:r,amount:i}=this.data,s=new xe;console.log("build",this.data);let o=wt.pool[r];if(!o)throw new Error(`${r} not support, please use ${Object.keys(wt.pool).join(", ")}.`);return UH(s,o,i,t.account.address)}static fromData(t){return new xI(t)}};async function EI(n,e,t){let r=await n.getCoins({owner:e,coinType:t});return console.log("getTokenObjs",e,r),r}var VH=class MI extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let{suiClient:r,account:i}=t,{coinType:s,amount:o}=this.data,a=new xe;if(console.log("build",this.data),s==="sui"){let[d]=a.splitCoins(a.gas,[o]);return lv(a,wt.pool.sui,d,o)}let c=wt.pool[s];if(!c)throw new Error(`${s} not support, please use ${Object.keys(wt.pool).join(", ")}.`);let l=await EI(r,i.address,c.type);if(!l.data[0])throw new Error(`Insufficient balance for ${c.name} Token`);let u=l.data[0].coinObjectId;if(l.data.length>=2){let d=1;for(;d<l.data.length;)a.mergeCoins(u,[l.data[d].coinObjectId]),d++}return lv(a,c,a.object(u),o)}static fromData(t){return new MI(t)}},qH=class OI extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let{suiClient:r,account:i}=t,{coinType:s,amount:o}=this.data,a=new xe;if(console.log("build",this.data),s==="sui"){let[d]=a.splitCoins(a.gas,[o]);return uv(a,wt.pool.sui,d,o)}let c=wt.pool[s];if(!c)throw new Error(`${s} not support, please use ${Object.keys(wt.pool).join(", ")}.`);let l=await EI(r,i.address,c.type);if(!l.data[0])throw new Error(`Insufficient balance for ${c.name} Token`);let u=l.data[0].coinObjectId;if(l.data.length>=2){let d=1;for(;d<l.data.length;)a.mergeCoins(u,[l.data[d].coinObjectId]),d++}return uv(a,c,a.object(u),o)}static fromData(t){return new OI(t)}},zH=class NI extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(){let{coinType:t,amount:r}=this.data,i=new xe;console.log("build",this.data);let s=wt.pool[t];if(!s)throw new Error(`${t} not support, please use ${Object.keys(wt.pool).join(", ")}.`);return PH(i,s,r)}static fromData(t){return new NI(t)}},WH=class{constructor(){v(this,"application","navi");v(this,"supportSDK","@mysten/sui.js")}async deserialize(n){await av();let{transactionBlock:e}=n,t=new RH(e).decode();return{txType:Ee.Other,txSubType:t.type,intentionData:t.intentionData}}async build(n){let{suiClient:e,account:t}=n,r;switch(await av(),n.txSubType){case"EntryDeposit":r=VH.fromData(n.intentionData);break;case"EntryBorrow":r=$H.fromData(n.intentionData);break;case"EntryRepay":r=qH.fromData(n.intentionData);break;case"EntryWithdraw":r=zH.fromData(n.intentionData);break;case"ClaimReward":r=LH.fromData(n.intentionData);break;default:throw new Error("not implemented")}return r.build({suiClient:e,account:t})}},jI="msafe-plain-tx",DI=Ef.others.plain,KH=class BI{constructor(e){v(this,"application",jI);v(this,"txType",Ee.Other);v(this,"txSubType",DI);this.data=e}serialize(){return JSON.stringify(_m(this.data))}async build(e){return fe.from(J$(this.data.content))}static fromData(e){return new BI(e)}},ZH=class{constructor(){v(this,"application");v(this,"supportSDK","@mysten/sui");this.application=jI}async deserialize(n){let{transaction:e}=n,t=await e.build({client:n.suiClient});return{txType:Ee.Other,txSubType:DI,intentionData:{content:eV(t)}}}async build(n){let{account:e}=n,t=await KH.fromData(n.intentionData).build({suiClient:n.suiClient,network:n.network,account:n.account}),r=await n.suiClient.devInspectTransactionBlock({transactionBlock:t,sender:e.address});if(r.effects.status.status!=="success")throw new Error(r.effects.status.error);return t}},QH=class RI{constructor(){v(this,"apps");this.apps=new Map}static fromHelpers(e){let t=new RI;for(let r=0;r<e.length;r++){let i=e[r];switch(i.supportSDK){case"@mysten/sui.js":t.addLegacyHelper(i);break;case"@mysten/sui":t.addHelper(i);break;default:throw new Error(`${i.application}: ${i.supportSDK} SDK not supported`)}}return t}addLegacyHelper(e){this.apps.set(e.application,new GH(e))}addHelper(e){this.apps.set(e.application,new HH(e))}getAppHelper(e){let t=this.apps.get(e);if(!t)throw new Error(`${e} not registered`);return t}},HH=class{constructor(n){this.helper=n}async deserialize(n){let e=new Xf({url:n.clientUrl}),t=new Pc({url:n.clientUrl}),r=await n.transactionBlock.build({client:t}),i=fe.from(r);return this.helper.deserialize({...n,suiClient:e,transaction:i})}async build(n){let e=new Xf({url:n.clientUrl}),t=await this.helper.build({...n,suiClient:e});t.setSender(n.account.address);let r=await t.build({client:e});return xe.from(r)}},GH=class{constructor(n){this.helper=n}async deserialize(n){let e=new Pc({url:n.clientUrl});return this.helper.deserialize({...n,transactionBlock:n.transactionBlock,suiClient:e})}async build(n){let e=new Pc({url:n.clientUrl});return this.helper.build({...n,suiClient:e})}},hb=class{constructor(n,e){v(this,"scallop");this.txb=n,this.scallop=e}get coreId(){return{protocolPkg:this.scallop.address.get("core.packages.protocol.id"),market:this.scallop.address.get("core.market"),version:this.scallop.address.get("core.version"),coinDecimalsRegistry:this.scallop.address.get("core.coinDecimalsRegistry"),xOracle:this.scallop.address.get("core.oracles.xOracle"),spoolPkg:this.scallop.address.get("spool.id"),borrowIncentivePkg:this.scallop.address.get("borrowIncentive.id"),veScaPkgId:this.scallop.address.get("vesca.id"),scoin:this.scallop.address.get("scoin.id"),referral:this.scallop.address.get("referral.id")}}get transactions(){return this.txb.blockData.transactions}get inputTransaction(){return this.txb.blockData.inputs}getMoveCallTransaction(n){return this.transactions.find(e=>e.kind==="MoveCall"&&e.target===n)}},YH="https://sui.apis.scallop.io",XH="664dfe22898c36c159e28bc8",PI="0xefe8b36d5b2e43728cc323298626b83177803521d195cfb11e15b910e892fddf",eu="0x7016aae72cfc67f2fadf55769c0a7dd54291a583b63051a5ed71081cce836ac6::sca::SCA",Md="0xc63072e7f5f4983a2efaf5bdba1480d5e7d74d57948e1c7cc436f8e22cbeb410",hh=["eth","btc","usdc","usdt","sui","apt","sol","cetus","afsui","hasui","vsui","sca"],UI=["eth","btc","usdc","usdt","sui","apt","sol","cetus","afsui","hasui","vsui","sca"],Od=["seth","ssui","susdc","susdt","scetus","safsui","shasui","svsui"],tu=["ssui","susdc","susdt","safsui","shasui","svsui","seth","ssca","scetus","sbtc","ssol"],JH=["sui"],Il=["sui","usdc","usdt","afsui","hasui","vsui","eth","sca","btc","sol"],eG={eth:8,btc:8,usdc:6,usdt:6,sui:9,apt:8,sol:8,sca:9,cetus:9,afsui:9,hasui:9,vsui:9,seth:8,sbtc:8,susdc:6,susdt:6,ssui:9,sapt:8,ssol:8,scetus:9,safsui:9,shasui:9,svsui:9,ssca:9},FI={seth:"sui",ssui:"sui",susdc:"sui",susdt:"sui",scetus:"sui",safsui:"sui",shasui:"sui",svsui:"sui"},tG={sui:["sui","sca"],usdc:["sui","sca"],usdt:["sui","sca"],afsui:["sui","sca"],hasui:["sui","sca"],vsui:["sui","sca"],sca:["sui","sca"],eth:["sui","sca"],btc:["sui","sca"],sol:["sui","sca"]},nG={sui:"0x0000000000000000000000000000000000000000000000000000000000000002",eth:"0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5",btc:"0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881",usdc:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf",usdt:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c",apt:"0x3a5143bb1196e3bcdfab6203d1683ae29edd26294fc8bfeafe4aaa9d2704df37",sol:"0xb7844e289a8410e50fb3ca48d69eb9cf29e27d223ef90353fe1bd8e27ff8f3f8",cetus:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",afsui:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc",hasui:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",vsui:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",sca:"0x7016aae72cfc67f2fadf55769c0a7dd54291a583b63051a5ed71081cce836ac6"},zi={eth:"0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5",btc:"0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881",usdc:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf",usdt:"0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c",apt:"0x3a5143bb1196e3bcdfab6203d1683ae29edd26294fc8bfeafe4aaa9d2704df37",sol:"0xb7844e289a8410e50fb3ca48d69eb9cf29e27d223ef90353fe1bd8e27ff8f3f8"},dv={vsui:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55"},rG={ssui:"0xaafc4f740de0dd0dde642a31148fb94517087052f19afb0f7bed1dc41a50c77b::scallop_sui::SCALLOP_SUI",scetus:"0xea346ce428f91ab007210443efcea5f5cdbbb3aae7e9affc0ca93f9203c31f0c::scallop_cetus::SCALLOP_CETUS",ssca:"0x5ca17430c1d046fae9edeaa8fd76c7b4193a00d764a0ecfa9418d733ad27bc1e::scallop_sca::SCALLOP_SCA",susdc:"0xad4d71551d31092230db1fd482008ea42867dbf27b286e9c70a79d2a6191d58d::scallop_wormhole_usdc::SCALLOP_WORMHOLE_USDC",susdt:"0xe6e5a012ec20a49a3d1d57bd2b67140b96cd4d3400b9d79e541f7bdbab661f95::scallop_wormhole_usdt::SCALLOP_WORMHOLE_USDT",seth:"0x67540ceb850d418679e69f1fb6b2093d6df78a2a699ffc733f7646096d552e9b::scallop_wormhole_eth::SCALLOP_WORMHOLE_ETH",safsui:"0x00671b1fa2a124f5be8bdae8b91ee711462c5d9e31bda232e70fd9607b523c88::scallop_af_sui::SCALLOP_AF_SUI",shasui:"0x9a2376943f7d22f88087c259c5889925f332ca4347e669dc37d54c2bf651af3c::scallop_ha_sui::SCALLOP_HA_SUI",svsui:"0xe1a1cc6bcf0001a015eab84bcc6713393ce20535f55b8b6f35c142e057a25fbe::scallop_v_sui::SCALLOP_V_SUI",sbtc:"0x2cf76a9cf5d3337961d1154283234f94da2dcff18544dfe5cbdef65f319591b5::scallop_wormhole_btc::SCALLOP_WORMHOLE_BTC",ssol:"0x1392650f2eca9e3f6ffae3ff89e42a3590d7102b80e2b430f674730bc30d3259::scallop_wormhole_sol::SCALLOP_WORMHOLE_SOL"},sn=class Kf{constructor(e,t){this.moveCall=e,this.txb=t}decodeSharedObjectId(e){let t=this.getInputParam(e);return Kf.getSharedObjectId(t)}decodeOwnedObjectId(e){let t=this.getInputParam(e);return Kf.getOwnedObjectId(t)}decodeInputU64(e){let t=this.decodePureArg(e,"u64");return Number(t)}decodeInputU8(e){let t=this.decodePureArg(e,"u8");return Number(t)}decodeInputAddress(e){let t=this.decodePureArg(e,"address");return Et(t)}decodeInputString(e){return this.decodePureArg(e,"string")}decodeInputBool(e){return this.decodePureArg(e,"bool")}decodePureArg(e,t){let r=this.getInputParam(e);return Kf.getPureInputValue(r,t)}getInputParam(e){let t=this.moveCall.arguments[e];if(t.kind!=="Input")throw new Error("not input type");return this.txb.blockData.inputs[t.index]}getNestedInputParam(e){let t=this.moveCall.arguments[e];if(t.kind!=="NestedResult")throw new Error("not input type");return this.txb.blockData.transactions[t.index]}isHaveNestedInput(e){return this.moveCall.arguments[e].kind==="NestedResult"}static getPureInputValue(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value=="object"&&"Pure"in e.value){let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}return e.value}static getOwnedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value=="object"){if(!("Object"in e.value)||!("ImmOrOwned"in e.value.Object))throw new Error("not ImmOrOwned");return Et(e.value.Object.ImmOrOwned.objectId)}return Et(e.value)}static getSharedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value!="object")return Et(e.value);if(!("Object"in e.value)||!("Shared"in e.value.Object))throw new Error("not Shared");return Et(e.value.Object.Shared.objectId)}static getPureInput(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value!="object")return e.value;if(!("Pure"in e.value))throw new Error("Pure not in value");let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}typeArg(e){return nt(this.moveCall.typeArguments[e])}txArg(e){return this.moveCall.arguments[e]}},Gi=class{constructor(n,e){this.splitCoin=n,this.txb=e}getAmountInput(){return this.splitCoin.amounts.map(n=>{if(n.kind==="Input")return Number(sn.getPureInputValue(n,"u64"))}).filter(n=>n!==void 0)}static getPureInputValue(n,e){if(n.type!=="pure")throw new Error("not pure argument");if(typeof n.value=="object"&&"Pure"in n.value){let t=n.value.Pure;return sr.de(e,new Uint8Array(t))}return n.value}},iG=class extends hb{decode(){if(this.isSupplyWithStakeSpoolTransaction())return this.decodeSupplyWithStakeSpool();if(this.isUnstakeAndWithdrawTransaction())return this.decodeUnstakeAndWithdraw();if(this.isStakeSpoolTransaction())return this.decodeStakeSpool();if(this.isDepositCollateralTransaction())return this.decodeDepositCollateral();if(this.isWithdrawCollateralTransaction())return this.decodeWithdrawCollateral();if(this.isWithdrawLendingScoinTransaction())return this.decodeWithdrawLendingScoin();if(this.isWithdrawLendingTransaction())return this.decodeWithdrawLending();if(this.isSupplyLendingTransaction())return this.decodeSupplyLending();if(this.isBorrowWithReferralTransaction())return this.decodeBorrowWithReferral();if(this.isBorrowWithBoostTransaction())return this.decodeBorrowWithBoost();if(this.isBorrowTransaction())return this.decodeBorrow();if(this.isRepayWithBoostTransaction())return this.decodeRepayWithBoost();if(this.isRepayTransaction())return this.decodeRepay();if(this.isUnstakeSpoolTransaction())return this.decodeUnstakeSpool();if(this.isClaimRewardTransaction())return this.decodeClaimReward();if(this.isOpenObligationTransaction())return this.decodeOpenObligation();if(this.isMigrateAndClaim())return this.decodeMigrateAndClaim();if(this.isMigrateScoinTransaction())return this.decodeMigrateScoin()}isMigrateScoinTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.scoin}::s_coin_converter::mint_s_coin`)}isSupplyLendingTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::mint::mint`)}isSupplyWithStakeSpoolTransaction(){let n=this.getMoveCallTransaction(`${this.coreId.protocolPkg}::mint::mint`),e=this.getMoveCallTransaction(`${this.coreId.spoolPkg}::user::stake`);return!!n&&!!e}isUnstakeAndWithdrawTransaction(){let n=this.getMoveCallTransaction(`${this.coreId.spoolPkg}::user::unstake`),e=this.getMoveCallTransaction(`${this.coreId.protocolPkg}::redeem::redeem`);return!!n&&!!e}isStakeSpoolTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.spoolPkg}::user::stake`)}isWithdrawLendingTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::redeem::redeem`)}isWithdrawLendingScoinTransaction(){let n=!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::redeem::redeem`),e=!!this.getMoveCallTransaction(`${this.coreId.scoin}::s_coin_converter::burn_s_coin`);return!!n&&!!e}isDepositCollateralTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::deposit_collateral::deposit_collateral`)}isWithdrawCollateralTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::withdraw_collateral::withdraw_collateral`)}isBorrowTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::borrow::borrow`)}isBorrowWithBoostTransaction(){let n=this.getMoveCallTransaction(`${this.coreId.protocolPkg}::borrow::borrow`),e=this.getMoveCallTransaction(`${this.coreId.borrowIncentivePkg}::user::stake_with_ve_sca`);return!!n&&!!e}isBorrowWithReferralTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::borrow::borrow_with_referral`)}isRepayTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::repay::repay`)}isRepayWithBoostTransaction(){let n=!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::repay::repay`),e=this.getMoveCallTransaction(`${this.coreId.borrowIncentivePkg}::user::stake_with_ve_sca`);return!!n&&!!e}isUnstakeSpoolTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.spoolPkg}::user::unstake`)}isCreateStakeAccountTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.spoolPkg}::user::new_spool_account`)}isClaimRewardTransaction(){let n=this.getMoveCallTransaction(`${this.coreId.spoolPkg}::user::redeem_rewards`),e=this.getMoveCallTransaction(`${this.coreId.borrowIncentivePkg}::user::redeem_rewards`);return!!n||!!e}isOpenObligationTransaction(){return!!this.getMoveCallTransaction(`${this.coreId.protocolPkg}::open_obligation::open_obligation`)}isMigrateAndClaim(){let n=this.getMoveCallTransaction(`${Md}::user::redeem_rewards`),e=this.getMoveCallTransaction(`${this.coreId.borrowIncentivePkg}::user::stake_with_ve_sca`),t=this.getMoveCallTransaction(`${this.coreId.borrowIncentivePkg}::user::stake`);return!!n&&(!!e||!!t)}get helperClaimLendingReward(){return this.transactions.filter(n=>n.kind==="MoveCall"&&n.target.startsWith(`${this.coreId.spoolPkg}::user::redeem_rewards`)).map(n=>new sn(n,this.txb))}get helperClaimBorrowV2Reward(){return this.transactions.filter(n=>n.kind==="MoveCall"&&n.target.startsWith(`${this.coreId.borrowIncentivePkg}::user::redeem_rewards`)).map(n=>new sn(n,this.txb))}get helperStakeObligationWithVeSca(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.borrowIncentivePkg}::user::stake_with_ve_sca`));return new sn(n,this.txb)}get helperClaimBorrowReward(){return this.transactions.filter(n=>n.kind==="MoveCall"&&n.target.startsWith(`${Md}::user::redeem_rewards`)).map(n=>new sn(n,this.txb))}get helperMint(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.protocolPkg}::mint::mint`));return new sn(n,this.txb)}get helperUnstakes(){return this.transactions.filter(n=>n.kind==="MoveCall"&&n.target.startsWith(`${this.coreId.spoolPkg}::user::unstake`)).map(n=>new sn(n,this.txb))}get helperRedeems(){return this.transactions.filter(n=>n.kind==="MoveCall"&&n.target.startsWith(`${this.coreId.protocolPkg}::redeem::redeem`)).map(n=>new sn(n,this.txb))}get helperRedeem(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.protocolPkg}::redeem::redeem`));return new sn(n,this.txb)}get helperBurnScoin(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.scoin}::s_coin_converter::burn_s_coin`));return new sn(n,this.txb)}get helperStake(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.spoolPkg}::user::stake`));return new sn(n,this.txb)}get helperUnstake(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.spoolPkg}::user::unstake`));return new sn(n,this.txb)}get helperDepositCollateral(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.protocolPkg}::deposit_collateral::deposit_collateral`));return new sn(n,this.txb)}get helperWithdrawCollateral(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.protocolPkg}::withdraw_collateral::withdraw_collateral`));return new sn(n,this.txb)}get helperBorrow(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.protocolPkg}::borrow::borrow`));return new sn(n,this.txb)}get helperBorrowWithReferral(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.protocolPkg}::borrow::borrow_with_referral`));return new sn(n,this.txb)}get helperRepay(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.protocolPkg}::repay::repay`));return new sn(n,this.txb)}decodeMigrateScoin(){return{txType:Ee.Other,type:"MigrateScoin",intentionData:{}}}decodeMigrateAndClaim(){let n;this.helperStakeObligationWithVeSca.moveCall&&(n=this.helperStakeObligationWithVeSca.decodeOwnedObjectId(9));let e=this.helperClaimBorrowReward[0].decodeOwnedObjectId(2),t=this.helperClaimBorrowReward[0].decodeSharedObjectId(3),r=this.scallop.utils.parseCoinNameFromType(this.helperClaimBorrowReward[0].typeArg(0));return{txType:Ee.Other,type:"MigrateAndClaim",intentionData:{obligationKey:e,obligationId:t,rewardCoinName:r,veScaKey:n}}}decodeOpenObligation(){return{txType:Ee.Other,type:"OpenObligation",intentionData:{}}}decodeSupplyLending(){let n=this.scallop.utils.parseCoinNameFromType(this.helperMint.typeArg(0)),e=this.helperMint.getNestedInputParam(2),t=new Gi(e,this.txb).getAmountInput().reduce((r,i)=>r+i,0);return{txType:Ee.Other,type:"SupplyLending",intentionData:{amount:t,coinName:n}}}decodeWithdrawLending(){let n=this.scallop.utils.parseCoinNameFromType(this.helperRedeem.typeArg(0)),e=this.helperRedeem.getNestedInputParam(2),t=new Gi(e,this.txb).getAmountInput().reduce((r,i)=>r+i,0);return{txType:Ee.Other,type:"WithdrawLending",intentionData:{amount:t,coinName:n}}}decodeWithdrawLendingScoin(){let n=this.scallop.utils.parseCoinNameFromType(this.helperRedeem.typeArg(0)),e=this.helperBurnScoin.getNestedInputParam(1),t=new Gi(e,this.txb).getAmountInput().reduce((r,i)=>r+i,0);return{txType:Ee.Other,type:"WithdrawLending",intentionData:{amount:t,coinName:n}}}decodeDepositCollateral(){let n=this.scallop.utils.parseCoinNameFromType(this.helperDepositCollateral.typeArg(0)),e=this.helperDepositCollateral.getNestedInputParam(3),t=new Gi(e,this.txb).getAmountInput().reduce((i,s)=>i+s,0),r=this.helperDepositCollateral.decodeSharedObjectId(1);return{txType:Ee.Other,type:"DepositCollateral",intentionData:{amount:t,obligationId:r,collateralCoinName:n}}}decodeWithdrawCollateral(){let n=this.scallop.utils.parseCoinNameFromType(this.helperWithdrawCollateral.typeArg(0)),e=this.helperWithdrawCollateral.decodeInputU64(5),t=this.helperWithdrawCollateral.decodeSharedObjectId(1),r=this.helperWithdrawCollateral.decodeOwnedObjectId(2);return{txType:Ee.Other,type:"WithdrawCollateral",intentionData:{amount:e,collateralCoinName:n,obligationKey:r,obligationId:t}}}decodeBorrow(){let n=this.scallop.utils.parseCoinNameFromType(this.helperBorrow.typeArg(0)),e=this.helperBorrow.decodeInputU64(5),t=this.helperBorrow.decodeSharedObjectId(1),r=this.helperBorrow.decodeOwnedObjectId(2);return{txType:Ee.Other,type:"Borrow",intentionData:{amount:e,coinName:n,obligationKey:r,obligationId:t}}}decodeBorrowWithBoost(){let n=this.scallop.utils.parseCoinNameFromType(this.helperBorrow.typeArg(0)),e=this.helperStakeObligationWithVeSca.decodeOwnedObjectId(9),t=this.helperBorrow.decodeInputU64(5),r=this.helperBorrow.decodeSharedObjectId(1),i=this.helperBorrow.decodeOwnedObjectId(2);return{txType:Ee.Other,type:"BorrowWithBoost",intentionData:{amount:t,coinName:n,obligationKey:i,obligationId:r,veScaKey:e}}}decodeBorrowWithReferral(){let n=this.scallop.utils.parseCoinNameFromType(this.helperBorrowWithReferral.typeArg(0)),e;this.helperStakeObligationWithVeSca.moveCall&&(e=this.helperStakeObligationWithVeSca.decodeOwnedObjectId(9));let t=this.helperBorrowWithReferral.decodeInputU64(6),r=this.helperBorrowWithReferral.decodeSharedObjectId(1),i=this.helperBorrowWithReferral.decodeOwnedObjectId(2);return{txType:Ee.Other,type:"BorrowWithReferral",intentionData:{amount:t,coinName:n,obligationKey:i,obligationId:r,veScaKey:e}}}decodeRepay(){let n=this.scallop.utils.parseCoinNameFromType(this.helperRepay.typeArg(0)),e=this.helperRepay.getNestedInputParam(3),t=new Gi(e,this.txb).getAmountInput().reduce((i,s)=>i+s,0),r=this.helperRepay.decodeSharedObjectId(1);return{txType:Ee.Other,type:"Repay",intentionData:{amount:t,obligationId:r,coinName:n}}}decodeRepayWithBoost(){let n=this.scallop.utils.parseCoinNameFromType(this.helperRepay.typeArg(0)),e=this.helperStakeObligationWithVeSca.decodeOwnedObjectId(9),t=this.helperRepay.getNestedInputParam(3),r=new Gi(t,this.txb).getAmountInput().reduce((s,o)=>s+o,0),i=this.helperRepay.decodeSharedObjectId(1);return{txType:Ee.Other,type:"RepayWithBoost",intentionData:{amount:r,obligationId:i,coinName:n,veScaKey:e}}}decodeStakeSpool(){let n;this.isCreateStakeAccountTransaction()||(n=this.helperStake.decodeOwnedObjectId(1));let e=this.helperBurnScoin.getNestedInputParam(1),t=new Gi(e,this.txb).getAmountInput().reduce((s,o)=>s+o,0),r=this.helperStake.typeArg(0),i=this.scallop.utils.parseCoinNameFromType(r);return{txType:Ee.Other,type:"StakeSpool",intentionData:{amount:t,marketCoinName:i,stakeAccountId:n}}}decodeUnstakeSpool(){let n=this.helperUnstake.decodeOwnedObjectId(1),e=this.helperUnstake.decodeInputU64(2),t=this.helperUnstake.typeArg(0),r=this.scallop.utils.parseCoinNameFromType(t);return{txType:Ee.Other,type:"UnstakeSpool",intentionData:{amount:e,marketCoinName:r,stakeAccountId:n}}}decodeSupplyWithStakeSpool(){let n=this.scallop.utils.parseCoinNameFromType(this.helperMint.typeArg(0)),e=this.helperMint.getNestedInputParam(2),t=new Gi(e,this.txb).getAmountInput().reduce((i,s)=>i+s,0),r;return this.isCreateStakeAccountTransaction()||(r=this.helperStake.decodeOwnedObjectId(1)),{txType:Ee.Other,type:"SupplyAndStakeLending",intentionData:{amount:t,coinName:n,stakeAccountId:r}}}decodeUnstakeAndWithdraw(){let n=[];this.helperUnstakes.forEach(r=>{let i=r.decodeOwnedObjectId(1),s=r.decodeInputU64(2);n.push({id:i,coin:s})});let e=this.scallop.utils.parseCoinNameFromType(this.helperRedeems[0].typeArg(0)),t=0;if(this.helperBurnScoin.moveCall){let r=this.helperBurnScoin.getNestedInputParam(1);t=new Gi(r,this.txb).getAmountInput().reduce((i,s)=>i+s,0)}return{txType:Ee.Other,type:"WithdrawAndUnstakeLending",intentionData:{amount:t,coinName:e,stakeAccountId:n}}}decodeClaimReward(){let n=[],e=[],t=[];return this.helperClaimLendingReward.forEach(r=>{let i=r.decodeOwnedObjectId(2),s=r.typeArg(0),o=this.scallop.utils.parseCoinNameFromType(s);n.push({stakeMarketCoinName:o,stakeAccountId:i})}),this.helperClaimBorrowV2Reward.forEach(r=>{let i=r.decodeSharedObjectId(3),s=r.decodeOwnedObjectId(4),o=this.scallop.utils.parseCoinNameFromType(r.typeArg(0));e.push({obligationId:s,obligationKey:i,rewardCoinName:o})}),this.helperClaimBorrowReward.forEach(r=>{let i=r.decodeSharedObjectId(2),s=r.decodeOwnedObjectId(3),o=this.scallop.utils.parseCoinNameFromType(r.typeArg(0));t.push({obligationId:s,obligationKey:i,rewardCoinName:o})}),{txType:Ee.Other,type:"ClaimIncentiveReward",intentionData:{lendingIncentive:n,borrowIncentiveV2:e,borrowIncentive:t}}}},sG=class extends hb{decode(){if(this.isCreateReferralLink())return this.decodeCreateReferralLink();if(this.isClaimRevenueReferral())return this.decodeClaimRevenueReferral();if(this.isBindReferral())return this.decodeBindReferral()}isClaimRevenueReferral(){return!!this.getMoveCallTransaction(`${this.coreId.referral}::referral_revenue_pool::claim_revenue_with_ve_sca_key`)}isCreateReferralLink(){return!!this.getMoveCallTransaction(`${this.coreId.veScaPkgId}::ve_sca::mint_ve_sca_placeholder_key`)}isBindReferral(){return!!this.getMoveCallTransaction(`${this.coreId.referral}::referral_bindings::bind_ve_sca_referrer`)}get helperClaimRevenueReferral(){return this.transactions.filter(n=>n.kind==="MoveCall"&&n.target.startsWith(`${this.coreId.referral}::referral_revenue_pool::claim_revenue_with_ve_sca_key`)).map(n=>new sn(n,this.txb))}get helperBindReferral(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.referral}::referral_bindings::bind_ve_sca_referrer`));return new sn(n,this.txb)}decodeCreateReferralLink(){return{txType:Ee.Other,type:"CreateReferralLink",intentionData:{}}}decodeClaimRevenueReferral(){let n=this.helperClaimRevenueReferral[0].decodeOwnedObjectId(2),e=this.helperClaimRevenueReferral.map(t=>t.typeArg(0));return{txType:Ee.Other,type:"ClaimRevenueReferral",intentionData:{veScaKey:n,coins:e}}}decodeBindReferral(){let n=this.helperBindReferral.decodePureArg(1,"address");return{txType:Ee.Other,type:"BindReferral",intentionData:{veScaKey:n}}}},oG=class extends hb{decode(){if(this.isExtendPeriodAndStakeMoreSca())return this.decodePeriodAndStakeMoreSca();if(this.isStakeScaFirsTime()||this.isStakeMoreSca())return this.decodeStakeSca();if(this.isRenewExpiredVeSca())return this.decodeRenewExpiredVeSca();if(this.isExtendPeriod())return this.decodeExtendStakePeriod();if(this.isRedeemSca())return this.decodeRedeemSca()}isStakeScaFirsTime(){return!!this.getMoveCallTransaction(`${this.coreId.veScaPkgId}::ve_sca::mint_ve_sca_key`)}isExtendPeriodAndStakeMoreSca(){let n=this.getMoveCallTransaction(`${this.coreId.veScaPkgId}::ve_sca::extend_lock_period`),e=this.getMoveCallTransaction(`${this.coreId.veScaPkgId}::ve_sca::lock_more_sca`);return!!n&&!!e}isRedeemSca(){return!!this.getMoveCallTransaction(`${this.coreId.veScaPkgId}::ve_sca::redeem`)}isStakeMoreSca(){return!!this.getMoveCallTransaction(`${this.coreId.veScaPkgId}::ve_sca::lock_more_sca`)}isExtendPeriod(){return!!this.getMoveCallTransaction(`${this.coreId.veScaPkgId}::ve_sca::extend_lock_period`)}isRenewExpiredVeSca(){return!!this.getMoveCallTransaction(`${this.coreId.veScaPkgId}::ve_sca::renew_expired_ve_sca`)}get helperStakeMoreSca(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.veScaPkgId}::ve_sca::lock_more_sca`));return new sn(n,this.txb)}get helperStakeSca(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.veScaPkgId}::ve_sca::mint_ve_sca_key`));return new sn(n,this.txb)}get helperExtendStakePeriod(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.veScaPkgId}::ve_sca::extend_lock_period`));return new sn(n,this.txb)}get helperRedeemSca(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.veScaPkgId}::ve_sca::redeem`));return new sn(n,this.txb)}get helperRenewExpired(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.veScaPkgId}::ve_sca::renew_expired_ve_sca`));return new sn(n,this.txb)}get helperOldUnstakeObligation(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${Md}::user::unstake`));return new sn(n,this.txb)}get helperUnstakeObligation(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.borrowIncentivePkg}::user::unstake`));return new sn(n,this.txb)}get helperStakeObligationWithVeSca(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(`${this.coreId.borrowIncentivePkg}::user::stake_with_ve_sca`));return new sn(n,this.txb)}decodeRedeemSca(){let n=this.helperRedeemSca.decodeOwnedObjectId(1);return{txType:Ee.Other,type:"RedeemSca",intentionData:{veScaKey:n}}}decodeRenewExpiredVeSca(){let n=this.helperRenewExpired.getNestedInputParam(4),e=this.helperRenewExpired.decodeInputU64(5),t=new Gi(n,this.txb).getAmountInput().reduce((f,m)=>f+m,0),r=this.helperRenewExpired.decodeOwnedObjectId(1),i=!!this.helperRedeemSca.moveCall,s=[],o=[],a=[];this.helperOldUnstakeObligation.moveCall&&(s=[this.helperOldUnstakeObligation.decodeSharedObjectId(2),this.helperOldUnstakeObligation.decodeSharedObjectId(3)]),this.helperUnstakeObligation.moveCall&&(o=[this.helperUnstakeObligation.decodeSharedObjectId(3),this.helperUnstakeObligation.decodeSharedObjectId(4)]),this.helperStakeObligationWithVeSca.moveCall&&(a=[this.helperStakeObligationWithVeSca.decodeSharedObjectId(3),this.helperStakeObligationWithVeSca.decodeSharedObjectId(4)]);let c=!1,l=!1,u,d,h=[{condition:s,isOld:!0},{condition:o,isOld:!1},{condition:a,isOld:!1}];for(let f=0;f<h.length;f++)h[f].condition.length>1&&([d,u]=h[f].condition,c=!0,l=h[f].isOld);return{txType:Ee.Other,type:"RenewExpStakePeriod",intentionData:{amount:t,lockPeriodInDays:e,obligationId:u,obligationKey:d,veScaKey:r,isHaveRedeem:i,isObligationLocked:c,isOldBorrowIncentive:l}}}decodeExtendStakePeriod(){let n=this.helperExtendStakePeriod.decodeInputU64(4),e=this.helperExtendStakePeriod.decodeOwnedObjectId(1),t=[],r=[],i=[];this.helperOldUnstakeObligation.moveCall&&(t=[this.helperOldUnstakeObligation.decodeSharedObjectId(2),this.helperOldUnstakeObligation.decodeSharedObjectId(3)]),this.helperUnstakeObligation.moveCall&&(r=[this.helperUnstakeObligation.decodeSharedObjectId(3),this.helperUnstakeObligation.decodeSharedObjectId(4)]),this.helperStakeObligationWithVeSca.moveCall&&(i=[this.helperStakeObligationWithVeSca.decodeSharedObjectId(3),this.helperStakeObligationWithVeSca.decodeSharedObjectId(4)]);let s=!1,o=!1,a,c,l=[{condition:t,isOld:!0},{condition:r,isOld:!1},{condition:i,isOld:!1}];for(let u=0;u<l.length;u++)l[u].condition.length>1&&([c,a]=l[u].condition,s=!0,o=l[u].isOld);return{txType:Ee.Other,type:"ExtendStakePeriod",intentionData:{lockPeriodInDays:n,obligationId:a,obligationKey:c,veScaKey:e,isObligationLocked:s,isOldBorrowIncentive:o}}}decodePeriodAndStakeMoreSca(){let n=this.helperStakeMoreSca.getNestedInputParam(4),e=this.helperExtendStakePeriod.decodeInputU64(4),t=new Gi(n,this.txb).getAmountInput().reduce((h,f)=>h+f,0),r=[],i=[],s,o=[];this.helperOldUnstakeObligation.moveCall&&(r=[this.helperOldUnstakeObligation.decodeSharedObjectId(2),this.helperOldUnstakeObligation.decodeSharedObjectId(3)]),this.helperUnstakeObligation.moveCall&&(i=[this.helperUnstakeObligation.decodeSharedObjectId(3),this.helperUnstakeObligation.decodeSharedObjectId(4)]),this.helperStakeMoreSca.moveCall&&(s=this.helperStakeMoreSca.decodeOwnedObjectId(1)),this.helperStakeObligationWithVeSca.moveCall&&(o=[this.helperStakeObligationWithVeSca.decodeSharedObjectId(3),this.helperStakeObligationWithVeSca.decodeSharedObjectId(4)]);let a=!1,c=!1,l,u,d=[{condition:r,isOld:!0},{condition:i,isOld:!1},{condition:o,isOld:!1}];for(let h=0;h<d.length;h++)d[h].condition.length>1&&([u,l]=d[h].condition,a=!0,c=d[h].isOld);return{txType:Ee.Other,type:"ExtendPeriodAndStakeMore",intentionData:{amount:t,veScaKey:s,lockPeriodInDays:e,obligationId:l,obligationKey:u,isOldBorrowIncentive:c,isObligationLocked:a}}}decodeStakeSca(){let n,e;this.helperStakeSca.moveCall&&this.helperStakeMoreSca.moveCall===void 0?(n=this.helperStakeSca.getNestedInputParam(3),e=this.helperStakeSca.decodeInputU64(4)):n=this.helperStakeMoreSca.getNestedInputParam(4);let t=new Gi(n,this.txb).getAmountInput().reduce((h,f)=>h+f,0),r=[],i=[],s,o=[];this.helperOldUnstakeObligation.moveCall&&(r=[this.helperOldUnstakeObligation.decodeSharedObjectId(2),this.helperOldUnstakeObligation.decodeSharedObjectId(3)]),this.helperUnstakeObligation.moveCall&&(i=[this.helperUnstakeObligation.decodeSharedObjectId(3),this.helperUnstakeObligation.decodeSharedObjectId(4)]),this.helperStakeMoreSca.moveCall&&(s=this.helperStakeMoreSca.decodeOwnedObjectId(1)),this.helperStakeObligationWithVeSca.moveCall&&(o=[this.helperStakeObligationWithVeSca.decodeSharedObjectId(3),this.helperStakeObligationWithVeSca.decodeSharedObjectId(4)]);let a=!1,c=!1,l,u,d=[{condition:r,isOld:!0},{condition:i,isOld:!1},{condition:o,isOld:!1}];for(let h=0;h<d.length;h++)d[h].condition.length>1&&([u,l]=d[h].condition,a=!0,c=d[h].isOld);return{txType:Ee.Other,type:"StakeSca",intentionData:{amount:t,lockPeriodInDays:e,obligationId:l,obligationKey:u,veScaKey:s,isObligationLocked:a,isOldBorrowIncentive:c}}}},hn=class{constructor(n){this.data=n}get application(){return"msafe-core"}serialize(){return JSON.stringify(_m(this.data))}},aG=class LI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.borrow(this.data.coinName,Number(this.data.amount),this.data.obligationId,this.data.obligationKey,t.account.address)}static fromData(t){return new LI(t)}},cG=class $I extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.borrowWithBoost(this.data.coinName,Number(this.data.amount),this.data.obligationId,this.data.obligationKey,this.data.veScaKey,t.account.address)}static fromData(t){return new $I(t)}},lG=class VI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.borrowWithReferral(this.data.coinName,Number(this.data.amount),this.data.obligationId,this.data.obligationKey,this.data.veScaKey,t.account.address)}static fromData(t){return new VI(t)}},uG=class qI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.claim(this.data.lendingIncentive,this.data.borrowIncentiveV2,this.data.borrowIncentive,t.account.address)}static fromData(t){return new qI(t)}},dG=class zI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.depositCollateral(this.data.collateralCoinName,Number(this.data.amount),this.data.obligationId,t.account.address)}static fromData(t){return new zI(t)}},hG=class WI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.migrateAndClaim(this.data.obligationKey,this.data.obligationId,this.data.rewardCoinName,this.data.veScaKey)}static fromData(t){return new WI(t)}},fG=class KI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.migrateAllMarketCoin()}static fromData(t){return new KI(t)}},pG=class ZI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.openObligation()}static fromData(t){return new ZI(t)}},mG=class QI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.repay(this.data.coinName,Number(this.data.amount),this.data.obligationId,this.data.obligationKey,t.account.address)}static fromData(t){return new QI(t)}},gG=class HI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.repayWithBoost(this.data.coinName,Number(this.data.amount),this.data.obligationId,this.data.veScaKey,t.account.address)}static fromData(t){return new HI(t)}},wG=class GI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.stake(this.data.marketCoinName,Number(this.data.amount),void 0,t.account.address)}static fromData(t){return new GI(t)}},yG=class YI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.deposit(this.data.coinName,Number(this.data.amount),t.account.address)}static fromData(t){return new YI(t)}},bG=class XI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.unstake(this.data.marketCoinName,Number(this.data.amount),void 0,t.account.address)}static fromData(t){return new XI(t)}},_G=class JI extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.unstakeAndWithdraw(this.data.coinName,Number(this.data.amount),this.data.stakeAccountId)}static fromData(t){return new JI(t)}},vG=class e4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.withdrawCollateral(this.data.collateralCoinName,Number(this.data.amount),this.data.obligationId,this.data.obligationKey,t.account.address)}static fromData(t){return new e4(t)}},kG=class t4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.withdraw(this.data.coinName,Number(this.data.amount),t.account.address)}static fromData(t){return new t4(t)}},SG=class n4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.bindReferral(this.data.veScaKey)}static fromData(t){return new n4(t)}},CG=class r4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.claimRevenuReferral(this.data.veScaKey,this.data.coins)}static fromData(t){return new r4(t)}},AG=class i4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.createReferralLink()}static fromData(t){return new i4(t)}},TG=class s4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.extendPeriodAndStakeMoreSca(this.data.amount,this.data.veScaKey,this.data.lockPeriodInDays,this.data.obligationId,this.data.obligationKey,this.data.isObligationLocked,this.data.isOldBorrowIncentive,t.account.address)}static fromData(t){return new s4(t)}},IG=class o4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.extendStakeScaLockPeriod(this.data.lockPeriodInDays,this.data.veScaKey,this.data.obligationId,this.data.obligationKey,this.data.isObligationLocked,this.data.isOldBorrowIncentive,t.account.address)}static fromData(t){return new o4(t)}},xG=class a4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.redeemSca(this.data.veScaKey)}static fromData(t){return new a4(t)}},EG=class c4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.renewExpiredStakeSca(this.data.amount,this.data.lockPeriodInDays,this.data.vescaKey,this.data.isHaveRedeem,this.data.obligation,this.data.obligationKey,this.data.isObligationLocked,this.data.isOldBorrowIncentive,t.account.address)}static fromData(t){return new c4(t)}},MG=class l4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.stakeSca(this.data.amount,this.data.isObligationLocked,this.data.isOldBorrowIncentive,this.data.obligationId,this.data.obligationKey,this.data.lockPeriodInDays,this.data.veScaKey,t.account.address)}static fromData(t){return new l4(t)}},OG=class u4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.supplyAndStake(this.data.coinName,Number(this.data.amount),this.data.stakeAccountId,t.account.address)}static fromData(t){return new u4(t)}},NG=class d4 extends hn{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){return t.scallop.client.withdrawUnlockedSca(this.data.vescaKey,t.account.address)}static fromData(t){return new d4(t)}},jG=class{constructor(n){v(this,"id");v(this,"addresses");let{id:e}=n;this.id=e}getId(){return this.id}getAddresses(){return this.addresses}get(n){if(!this.addresses)throw new Error(`Failed to fetch address ${this.id}`);return n.split(".").reduce((e,t)=>typeof e=="object"?e[t]:e,this.addresses)}async read(){let n={method:"GET",headers:new Headers({"Content-Type":"application/json"})},e=await fetch(`${YH}/addresses/${this.id}`,n);if(e.status===200){let t=await e.json();if("mainnet"in t){this.addresses=t.mainnet;return}throw new Error("Mainnet key is not in address!")}throw new Error(`Failed to fetch address with id ${this.id}`)}},DG=class{constructor(n,e){v(this,"params");v(this,"isTestnet");v(this,"address");v(this,"query");v(this,"utils");v(this,"client");this.params=n,this.client=n.client;let{address:t,query:r,utils:i}=e;this.address=t,this.query=r,this.utils=i,this.isTestnet=n.networkType?n.networkType==="testnet":!1}createTxBlock(n){return new xe(n)}async selectCoin(n,e,t,r=this.params.walletAddress){let i=this.utils.parseCoinType(e),s=await this.utils.selectCoinIds(t,i,r),[o,a]=this.utils.takeAmountFromCoins(n,s,t);return{takeCoin:o,leftCoin:a}}async selectMarketCoin(n,e,t,r=this.params.walletAddress){let i=this.utils.parseMarketCoinType(e),s=await this.utils.selectCoins(t,i,r),o=s.reduce((u,d)=>(u+=Number(d.balance),u),0),a=s.map(u=>u.objectId),[c,l]=this.utils.takeAmountFromCoins(n,a,Math.min(t,o));return{takeCoin:c,leftCoin:l,totalAmount:o}}async selectSCoin(n,e,t,r=this.params.walletAddress){let i=this.utils.parseSCoinType(e),s=await this.utils.selectCoins(t,i,r),o=s.map(u=>u.objectId),a=s.reduce((u,d)=>u+Number(d.balance),0),[c,l]=this.utils.takeAmountFromCoins(n,o,Math.min(a,t));return{takeCoin:c,leftCoin:l,totalAmount:a}}},fb=async(n,e)=>{let t=e,r=n.address.get("core.object")||PI,i=[],s=!1,o=null;do{let u=await n.client.getOwnedObjects({owner:t,filter:{StructType:`${r}::obligation::ObligationKey`},cursor:o});i.push(...u.data),u.hasNextPage&&u.nextCursor?(s=!0,o=u.nextCursor):s=!1}while(s);let a=i.map(u=>{var d;return(d=u==null?void 0:u.data)==null?void 0:d.objectId}).filter(u=>u!==void 0),c=await n.client.multiGetObjects({ids:a,options:{showContent:!0,showType:!0}}),l=[];for(let u=0;u<c.length;u++){let d=c[u].data.objectId,{content:h}=c[u].data;if(h&&"fields"in h){let f=h.fields,m=String(f.ownership.fields.of),w=await h4(n,m);l.push({id:m,keyId:d,locked:w})}}return l},h4=async(n,e)=>{var i,s;let t=await n.client.getObject({id:e,options:{showContent:!0}}),r=!1;return t.data&&((s=(i=t==null?void 0:t.data)==null?void 0:i.content)==null?void 0:s.dataType)==="moveObject"&&"lock_key"in t.data.content.fields&&(r=!!t.data.content.fields.lock_key),r},BG=async(n,e,t)=>{let r=t||[...hh],i=e,s=[],o=!1,a=null;do{let l=await n.client.getOwnedObjects({owner:i,filter:{MatchAny:r.map(u=>({StructType:`0x2::coin::Coin<${n.utils.parseCoinType(u)}>`}))},options:{showType:!0,showContent:!0},cursor:a});s.push(...l.data),l.hasNextPage&&l.nextCursor?(o=!0,a=l.nextCursor):o=!1}while(o);let c={};return s.map(l=>l.data).filter(l=>l!=null).forEach(l=>{let u=l.type;if(l.content&&"fields"in l.content){let d=l.content.fields,h=n.utils.parseCoinNameFromType(u);h&&(c[h]=Qo(c[h]??0).plus(d.balance).toNumber())}}),c},RG=async(n,e,t)=>{let r=t,i=n.utils.parseCoinType(e),s=[],o=!1,a=null;do{let l=await n.client.getOwnedObjects({owner:r,filter:{StructType:`0x2::coin::Coin<${i}>`},options:{showContent:!0},cursor:a});s.push(...l.data),l.hasNextPage&&l.nextCursor?(o=!0,a=l.nextCursor):o=!1}while(o);let c=0;return s.map(l=>l.data).filter(l=>l!=null).forEach(l=>{if(l.content&&"fields"in l.content){let u=l.content.fields;c=Qo(c).plus(u.balance).toNumber()}}),c},PG=async(n,e,t)=>{let r=t||[...hh].map(l=>n.utils.parseMarketCoinName(l)),i=e,s=[],o=!1,a=null;do{let l=await n.client.getOwnedObjects({owner:i,filter:{MatchAny:r.map(u=>({StructType:`0x2::coin::Coin<${n.utils.parseMarketCoinType(u)}>`}))},options:{showType:!0,showContent:!0},cursor:a});s.push(...l.data),l.hasNextPage&&l.nextCursor?(o=!0,a=l.nextCursor):o=!1}while(o);let c={};return s.map(l=>l.data).filter(l=>l!=null).forEach(l=>{let u=l.type;if(l.content&&"fields"in l.content){let d=l.content.fields,h=n.utils.parseCoinNameFromType(u);h&&(c[h]=Qo(c[h]??0).plus(d.balance).toNumber())}}),c},UG=async(n,e,t)=>{let r=t,i=n.utils.parseMarketCoinType(e);console.log(i);let s=[],o=!1,a=null;do{let l=await n.client.getOwnedObjects({owner:r,filter:{StructType:`0x2::coin::Coin<${i}>`},options:{showContent:!0},cursor:a});s.push(...l.data),l.hasNextPage&&l.nextCursor?(o=!0,a=l.nextCursor):o=!1}while(o);let c=0;return s.map(l=>l.data).filter(l=>l!=null).forEach(l=>{if(l.content&&"fields"in l.content){let u=l.content.fields;c=Qo(c).plus(u.balance).toNumber()}}),c},FG=async(n,e)=>{let t=`${n.address.get("core.packages.query.id")}::obligation_query::obligation_data`,r=new xe;return r.moveCall({target:t,arguments:[r.object(e)]}),(await n.client.devInspectTransactionBlock({transactionBlock:r,sender:n.params.walletAddress})).events[0].parsedJson},pb=async(n,e)=>{let t=e,r=n.address.get("spool.object"),i=`${r}::spool_account::SpoolAccount`,s=[],o=!1,a=null;do{let d=await n.client.getOwnedObjects({owner:t,filter:{StructType:i},options:{showContent:!0,showType:!0},cursor:a});s.push(...d.data),d.hasNextPage&&d.nextCursor?(o=!0,a=d.nextCursor):o=!1}while(o);let c={seth:[],ssui:[],susdc:[],susdt:[],scetus:[],safsui:[],shasui:[],svsui:[]},l=Object.keys(c).reduce((d,h)=>{let f=n.utils.parseCoinName(h),m=n.utils.parseMarketCoinType(f),w={...d},y=`${r}::spool_account::SpoolAccount<${m}>`;return w[h]=y,w},{}),u=s.map(d=>{var h;return(h=d==null?void 0:d.data)==null?void 0:h.objectId}).filter(d=>d!==void 0);return(await n.client.multiGetObjects({ids:u,options:{showContent:!0,showType:!0}})).forEach(d=>{let h=d.data.objectId,f=d.data.type;if(d.data.content&&"fields"in d.data.content){let m=d.data.content.fields,w=String(m.spool_id),y=String(m.stake_type.fields.name),C=Number(m.stakes),A=Number(m.index),M=Number(m.points),H=Number(m.total_points);nt(f)===l.seth?c.seth.push({id:h,type:nt(f),stakePoolId:w,stakeType:nt(y),staked:C,index:A,points:M,totalPoints:H}):nt(f)===l.ssui?c.ssui.push({id:h,type:nt(f),stakePoolId:w,stakeType:nt(y),staked:C,index:A,points:M,totalPoints:H}):nt(f)===l.susdc?c.susdc.push({id:h,type:nt(f),stakePoolId:w,stakeType:nt(y),staked:C,index:A,points:M,totalPoints:H}):nt(f)===l.susdt?c.susdt.push({id:h,type:nt(f),stakePoolId:w,stakeType:nt(y),staked:C,index:A,points:M,totalPoints:H}):nt(f)===l.scetus?c.scetus.push({id:h,type:nt(f),stakePoolId:w,stakeType:nt(y),staked:C,index:A,points:M,totalPoints:H}):nt(f)===l.safsui?c.safsui.push({id:h,type:nt(f),stakePoolId:w,stakeType:nt(y),staked:C,index:A,points:M,totalPoints:H}):nt(f)===l.shasui?c.shasui.push({id:h,type:nt(f),stakePoolId:w,stakeType:nt(y),staked:C,index:A,points:M,totalPoints:H}):nt(f)===l.svsui&&c.svsui.push({id:h,type:nt(f),stakePoolId:w,stakeType:nt(y),staked:C,index:A,points:M,totalPoints:H})}}),c},hv=async(n,e)=>{let t=n.address.get(`spool.pools.${e}.id`),r,i=await n.client.getObject({id:t,options:{showContent:!0,showType:!0}});if(i.data){let s=i.data,o=s.objectId,a=s.type;if(s.content&&"fields"in s.content){let c=s.content.fields,l=Number(c.max_distributed_point),u=Number(c.distributed_point),d=Number(c.distributed_point_per_period),h=Number(c.point_distribution_time),f=Number(c.max_stakes),m=String(c.stake_type.fields.name),w=Number(c.stakes),y=Number(c.index),C=Number(c.created_at),A=Number(c.last_update);r={id:o,type:nt(a),maxPoint:l,distributedPoint:u,pointPerPeriod:d,period:h,maxStake:f,stakeType:nt(m),totalStaked:w,index:y,createdAt:C,lastUpdate:A}}}return r},fv=async(n,e)=>{let t=n.address.get(`spool.pools.${e}.rewardPoolId`),r,i=await n.client.getObject({id:t,options:{showContent:!0,showType:!0}});if(i.data){let s=i.data,o=s.objectId,a=s.type;if(s.content&&"fields"in s.content){let c=s.content.fields,l=String(c.spool_id),u=Number(c.exchange_rate_numerator),d=Number(c.exchange_rate_denominator),h=Number(c.rewards),f=Number(c.claimed_rewards);r={id:o,type:nt(a),stakePoolId:l,ratioNumerator:u,ratioDenominator:d,rewards:h,claimedRewards:f}}}return r},os=n=>{let{sender:e}=n.blockData;if(!e)throw new Error("Sender is required");return e},LG=(n,e,t,r)=>{let i=!r,s=!i&&r*1e3<=new Date().getTime();if(i||s)if(n!==void 0&&e!==void 0){if(e<=0)throw new Error("Lock period must be greater than 0");if(typeof n=="number"&&n<1e10)throw new Error(`Minimum lock amount for ${s?"renewing expired veSca":"initial lock"} is 10 SCA`);if(e*86400>126144e3)throw new Error("Maximum lock period is ~4 years (1460 days)")}else throw new Error(`SCA amount and lock period is required for ${s?"renewing expired veSca":"initial lock"}`);else{if(fh(r),typeof n=="number"&&n<1e9)throw new Error("Minimum top up amount is 1 SCA");if(t&&r&&t-r>126057600)throw new Error("Maximum lock period is ~4 years (1459 days)")}},$G=(n,e,t)=>{if(fh(t),n<=0)throw new Error("Lock period must be greater than 0");if(t&&t*1e3<=new Date().getTime())throw new Error("veSca is expired, use renewExpiredVeScaQuick instead");if(t&&e-(t??0)>126057600)throw new Error("Maximum lock period is ~4 years (1459 days)")},VG=(n,e)=>{if(fh(e),n<1e9)throw new Error("Minimum top up amount is 1 SCA");if(e&&e*1e3<=new Date().getTime())throw new Error("veSca is expired, use renewExpiredVeScaQuick instead")},qG=(n,e,t)=>{if(fh(t),n<1e10)throw new Error("Minimum lock amount for renewing expired vesca 10 SCA");if(e*86400>=126057600)throw new Error("Maximum lock period is ~4 years (1459 days)")},fh=n=>{if(n===void 0)throw new Error("veSca not found")},zG=n=>({pointType:nt(n.point_type.name),weightedAmount:Number(n.weighted_amount),points:Number(n.points),totalPoints:Number(n.total_points),index:Number(n.index)}),WG=n=>({poolType:nt(n.pool_type.name),debtAmount:Number(n.debt_amount),pointList:n.points_list.reduce((e,t)=>{let r=zG(t),i=Av(r.pointType).name.toLowerCase();return e[i]=r,e},{})}),t0=n=>{let e=n.slice(1).toLowerCase();return n.charAt(0).toLowerCase()==="s"&&[...new Set([...hh,...UI,...JH])].includes(e)},pv=n=>{switch(n){case"afsui":return"afSUI";case"hasui":return"haSUI";case"vsui":return"vSUI";default:return n.toUpperCase()}},KG=n=>{let e=new Date(n*1e3),t=new Date(n*1e3);t.setUTCHours(0,0,0,0),e.getUTCHours()>=0&&t.setUTCDate(t.getUTCDate()+1);let r=new Date().getTime();return t.getTime()-r>126144e3*1e3&&t.setUTCDate(t.getUTCDate()-1),Math.floor(t.getTime()/1e3)},ZG=async(n,e,t,r)=>{let i=r||[...Il],s=n.address.get("borrowIncentive.query"),o=n.address.get("borrowIncentive.incentiveAccounts"),a=`${s}::incentive_account_query::incentive_account_data`,c=new xe;c.moveCall({target:a,arguments:[c.object(o),c.object(e)]});let l=(await n.client.devInspectTransactionBlock({transactionBlock:c,sender:t})).events[0].parsedJson,u={};return l.pool_records.forEach(d=>{let h=WG(d),{poolType:f}=h,m=n.utils.parseCoinNameFromType(f);i.length>=1&&i.includes(m)&&(u[m]=h)},{}),u},QG=async(n,e)=>{let t=n.address.get(`core.coins.${e}.oracle.pyth.feedObject`),r=await n.client.getObject({id:t,options:{showContent:!0}});if(r.data){let i=r.data;if(i.content&&"fields"in i.content){let s=i.content.fields,o=Number(s.price_info.fields.price_feed.fields.price.fields.expo.fields.magnitude),a=Number(s.price_info.fields.price_feed.fields.price.fields.expo.fields.negative),c=Number(s.price_info.fields.price_feed.fields.price.fields.price.fields.magnitude),l=Number(s.price_info.fields.price_feed.fields.price.fields.price.fields.negative);return c*10**((a?-1:1)*o)*(l?-1:1)}}return 0},f4=async(n,e)=>{let t=e,r=`${n.address.get("vesca.id")}::ve_sca::VeScaKey`,i=[],s=!1,o=null;do{let a=await n.client.getOwnedObjects({owner:t,filter:{StructType:r},cursor:o});i.push(...a.data),a.hasNextPage&&a.nextCursor?(s=!0,o=a.nextCursor):s=!1}while(s);return i.map(a=>a.data).filter(a=>!!a)},HG=async(n,e)=>{let t=(await f4(n,e)).map(i=>i.objectId),r=[];for(let i=0;i<t.length;i++){let s=await p4(n,t[i]);s&&r.push(s)}return r},p4=async(n,e,t)=>{let r=n.address.get("vesca.tableId"),i=e||(await f4(n,t))[0].objectId,s,o=(await n.client.getDynamicFieldObject({parentId:r,name:{type:"0x2::object::ID",value:i}})).data;if(o&&o.content&&o.content.dataType==="moveObject"&&"fields"in o.content){let a=o.content.fields.value.fields;s={id:o.objectId,keyId:i,lockedScaAmount:Qo(a.locked_sca_amount).toNumber(),lockedScaCoin:Qo(a.locked_sca_amount).shiftedBy(-9).toNumber(),unlockAt:Qo(a.unlock_at).toNumber()}}return s},GG=class{constructor(n,e){v(this,"params");v(this,"address");v(this,"client");v(this,"utils");this.params=n,this.client=n.client;let{address:t,utils:r}=e;this.address=t,this.utils=r}async getObligations(n=this.params.walletAddress){return fb(this,n)}async getCoinAmounts(n,e){return BG(this,n,e)}async getCoinAmount(n,e=this.params.walletAddress){return RG(this,n,e)}async getMarketCoinAmounts(n,e){return PG(this,n,e)}async getMarketCoinAmount(n,e=this.params.walletAddress){return UG(this,n,e)}async getPriceFromPyth(n){return QG(this,n)}async getAllStakeAccounts(n=this.params.walletAddress){return pb(this,n)}async getStakeAccounts(n,e=this.params.walletAddress){return(await this.getAllStakeAccounts(e))[n]??[]}async getStakePools(n=[...Od]){let e={};for(let t=0;t<n.length;t++){let r=n[t],i=await hv(this,r);i&&(e[r]=i)}return e}async getStakePool(n){return hv(this,n)}async getStakeRewardPools(n=[...Od]){let e={};for(let t=0;t<n.length;t++){let r=await fv(this,n[t]);r&&(e[n[t]]=r)}return e}async getStakeRewardPool(n){return fv(this,n)}async getBorrowIncentiveAccounts(n,e=this.params.walletAddress,t){return ZG(this,n,e,t)}async getObligationCoinNames(n){let e=await FG(this,n),t=e.collaterals.map(i=>`0x${i.type.name}`),r=e.debts.map(i=>`0x${i.type.name}`);return[...new Set([...t,...r])].map(i=>this.utils.parseCoinNameFromType(i))}},YG=class{constructor(n,e){v(this,"params");v(this,"isTestnet");v(this,"_address");v(this,"client");v(this,"getSpoolRewardCoinName",n=>FI[n]);v(this,"getBorrowIncentiveRewardCoinName",n=>tG[n]);this.params=n,this.client=n.client,this._address=e}parseSymbol(n){if(t0(n)){let e=n.slice(1).toLowerCase();return n.slice(0,1).toLowerCase()+pv(e)}return pv(n)}parseCoinType(n){let e=t0(n)?this.parseCoinName(n):n,t=nG[e];return[zi.usdc,zi.usdt,zi.eth,zi.btc,zi.sol,zi.apt].includes(t)?`${t}::coin::COIN`:n==="vsui"?`${dv.vsui}::cert::CERT`:`${t}::${e}::${e.toUpperCase()}`}parseMarketCoinType(n){let e=this._address.get("core.object")||PI,t=this.parseCoinType(n);return`${e}::reserve::MarketCoin<${t}>`}parseCoinNameFromType(n){let e=nt(n),t=/((0x[^:]+::[^:]+::[^<>]+))(?![^<>]*<)/,r=n.match(t),i=n.includes("reserve::MarketCoin");e=(r==null?void 0:r[1])||n;let s={[`${zi.usdc}::coin::COIN`]:"usdc",[`${zi.usdt}::coin::COIN`]:"usdt",[`${zi.eth}::coin::COIN`]:"eth",[`${zi.btc}::coin::COIN`]:"btc",[`${zi.sol}::coin::COIN`]:"sol",[`${zi.apt}::coin::COIN`]:"apt"},o={[`${dv.vsui}::cert::CERT`]:"vsui"},a=s[e]||o[e]||e.split("::")[2].toLowerCase();return i?this.parseMarketCoinName(a):a}parseCoinName(n){return n.slice(1)}parseMarketCoinName(n){return`s${n}`}getCoinDecimal(n){return eG[n]}getCoinWrappedType(n){return n==="usdc"||n==="usdt"||n==="eth"||n==="btc"||n==="apt"||n==="sol"?{from:"Wormhole",type:"Portal from Ethereum"}:void 0}parseSCoinType(n){return rG[n]}parseUnderlyingSCoinType(n){let e=this.parseCoinName(n);return this.parseCoinType(e)}getSCoinTreasury(n){return this._address.get(`scoin.coins.${n}.treasury`)}async selectCoins(n,e=$c,t){let r=t,i=[],s=0,o=!0,a=null;for(;o&&s<n;){let c=await this.client.getCoins({owner:r,coinType:e,cursor:a});c.data.sort((l,u)=>parseInt(u.balance,10)-parseInt(l.balance,10));for(let l=0;l<c.data.length&&(i.push({objectId:c.data[l].coinObjectId,digest:c.data[l].digest,version:c.data[l].version,balance:c.data[l].balance}),s+=parseInt(c.data[l].balance,10),!(s>=n));l++);a=c.nextCursor,o=c.hasNextPage}if(!i.length)throw new Error("No valid coins found for the transaction.");return i}async selectCoinIds(n,e=$c,t){return(await this.selectCoins(n,e,t)).map(r=>r.objectId)}parseAprToApy(n,e=365){return(1+n/e)**e-1}parseApyToApr(n,e=365){return((1+n)**(1/e)-1)*e}takeAmountFromCoins(n,e,t){let r=e.map(o=>n.object(o)),i=r[0];r.length>1&&n.mergeCoins(i,r.slice(1));let[s]=n.splitCoins(i,[n.pure(t)]);return[s,i]}getUnlockAt(n,e){let t=Math.floor(new Date().getTime()/1e3),r=e?Math.max(e-t,0):0,i=0;if(r===0){let s=(n??1)*86400;i=Math.min(t+s,t+126144e3)}else{let s=Math.min(n?n*86400+r:r,126144e3);i=t+s}return KG(i)}parseSCoinName(n){if(t0(n)&&tu.includes(n))return n;let e=`s${n}`;if(tu.includes(e))return e}},xl=async(...n)=>{let[e,t,r]=n;if(n.length===3&&r&&typeof r=="string")return await p4(e.query,r)||void 0;let i=os(t),s=await HG(e.query,i);if(s.length!==0)return s[0]},XG=async(n,e)=>{var u,d,h,f;let t=n.address.get("borrowIncentive.object"),r=n.address.get("borrowIncentive.incentivePools"),i=n.address.get("vesca.id"),{client:s}=n,o=await s.getObject({id:r,options:{showContent:!0}});if(((d=(u=o.data)==null?void 0:u.content)==null?void 0:d.dataType)!=="moveObject")return!1;let a=o.data.content.fields.ve_sca_bind.fields.id.id,c=`${t}::typed_id::TypedID<${i}::ve_sca::VeScaKey>`,l=await s.getDynamicFieldObject({parentId:a,name:{type:c,value:e}});return((f=(h=l.data)==null?void 0:h.content)==null?void 0:f.dataType)!=="moveObject"?!1:l.data.content.fields.value.fields.id},n0=async(...n)=>{let[e,t,r,i]=n;if(n.length===4&&r&&i&&typeof r=="string"){let c=await h4(e.query,r);return{obligationId:r,obligationKey:i,obligationLocked:c}}let s=os(t),o=await fb(e.query,s);if(o.length===0)throw new Error(`No obligation found for sender ${s}`);let a=o.find(c=>c.id===r||c.keyId===i)??o[0];return{obligationId:a.id,obligationKey:a.keyId,obligationLocked:a.locked}},JG=async({builder:n,txBlock:e})=>{let t={borrowIncentivePkg:n.address.get("borrowIncentive.id"),query:n.address.get("borrowIncentive.query"),incentivePools:n.address.get("borrowIncentive.incentivePools"),incentiveAccounts:n.address.get("borrowIncentive.incentiveAccounts"),obligationAccessStore:n.address.get("core.obligationAccessStore"),config:n.address.get("borrowIncentive.config")},r={id:"0xc63072e7f5f4983a2efaf5bdba1480d5e7d74d57948e1c7cc436f8e22cbeb410",incentivePools:"0x64972b713ccec45ec3964809e477cea6f97350c0c50ca3aec85bb631639266ec",incentiveAccounts:"0x3c0b707068bdcea8bb859d751ad3e2149a9f83c13fcf4054ef91372a00bccdd3"},i={table:n.address.get("vesca.table"),treasury:n.address.get("vesca.treasury"),config:n.address.get("vesca.config")};return{stakeObligation:(s,o)=>{e.moveCall({target:`${t.borrowIncentivePkg}::user::stake`,arguments:[e.object(t.config),e.object(t.incentivePools),e.object(t.incentiveAccounts),e.object(o),e.object(s),e.object(t.obligationAccessStore),e.object(He)]})},stakeObligationWithVesca:(s,o,a)=>{e.moveCall({target:`${t.borrowIncentivePkg}::user::stake_with_ve_sca`,arguments:[e.object(t.config),e.object(t.incentivePools),e.object(t.incentiveAccounts),e.object(o),e.object(s),e.object(t.obligationAccessStore),e.object(i.config),e.object(i.treasury),e.object(i.table),e.object(a),e.object(He)]})},unstakeObligation:(s,o)=>{e.moveCall({target:`${t.borrowIncentivePkg}::user::unstake`,arguments:[e.object(t.config),e.object(t.incentivePools),e.object(t.incentiveAccounts),e.object(o),e.object(s),e.object(He)]})},oldUnstakeObligation:(s,o)=>{e.moveCall({target:`${t.borrowIncentivePkg}::user::unstake`,arguments:[e.object(r.incentivePools),e.object(r.incentiveAccounts),e.object(o),e.object(s),e.object(He)],typeArguments:[$c]})},claimBorrowIncentive:(s,o,a)=>{let c=n.utils.parseCoinType(a);return e.moveCall({target:`${t.borrowIncentivePkg}::user::redeem_rewards`,arguments:[e.object(t.config),e.object(t.incentivePools),e.object(t.incentiveAccounts),e.object(o),e.object(s),e.object(He)],typeArguments:[c]})},oldClaimBorrowIncentive(s,o,a){let c=n.utils.parseCoinType(a);return e.moveCall({target:`${r.id}::user::redeem_rewards`,arguments:[e.object(r.incentivePools),e.object(r.incentiveAccounts),e.object(o),e.object(s),e.object(He)],typeArguments:[c]})}}},oi=async({builder:n,txBlock:e})=>{let t=await JG({builder:n,txBlock:e});return{normalMethod:t,stakeObligationQuick:async(r,i)=>{let{obligationId:s,obligationKey:o,obligationLocked:a}=await n0(n,e,r,i),c=!!e.blockData.transactions.find(l=>l.kind==="MoveCall"&&(l.target===`${Md}::user::unstake`||l.target===`${n.address.get("borrowIncentive.id")}::user::unstake`));(!a||c)&&t.stakeObligation(s,o)},unstakeObligationQuick:async(r,i)=>{let{obligationId:s,obligationKey:o,obligationLocked:a}=await n0(n,e,r,i);a&&t.unstakeObligation(s,o)},stakeObligationWithVeScaQuick:async(r,i,s)=>{let{obligationId:o,obligationKey:a,obligationLocked:c}=await n0(n,e,r,i),l=!!e.blockData.transactions.find(async u=>u.kind==="MoveCall"&&(u.target===`${Md}::user::unstake`||u.target===`${n.address.get("borrowIncentive.id")}::user::unstake`));if(!c||l){let u=await xl(n,e,s);if(u){let d=await XG(n,u.keyId);!d||d===o?t.stakeObligationWithVesca(o,a,u.keyId):t.stakeObligation(o,a)}else t.stakeObligation(o,a)}},claimBorrowIncentiveQuick:(r,i,s)=>t.claimBorrowIncentive(i,s,r)}},eY={testnet:["https://hermes-beta.pyth.network"],mainnet:["https://hermes.pyth.network","https://scallop.rpc.p2p.world"]},r0=16*1024,tY=class{constructor(n,e,t){v(this,"provider");v(this,"pythStateId");v(this,"wormholeStateId");v(this,"pythPackageId");v(this,"wormholePackageId");v(this,"priceTableInfo");v(this,"priceFeedObjectIdCache",new Map);v(this,"baseUpdateFee");this.provider=n,this.pythStateId=e,this.wormholeStateId=t,this.pythPackageId=void 0,this.wormholePackageId=void 0}async getBaseUpdateFee(){if(this.baseUpdateFee===void 0){let n=await this.provider.getObject({id:this.pythStateId,options:{showContent:!0}});if(!n.data||!n.data.content||n.data.content.dataType!=="moveObject")throw new Error("Unable to fetch pyth state object");this.baseUpdateFee=n.data.content.fields.base_update_fee}return this.baseUpdateFee}async getPackageId(n){let e=await this.provider.getObject({id:n,options:{showContent:!0}}).then(t=>{var r,i,s;if(((i=(r=t.data)==null?void 0:r.content)==null?void 0:i.dataType)==="moveObject")return t.data.content.fields;throw console.log((s=t.data)==null?void 0:s.content),new Error(`Cannot fetch package id for object ${n}`)});if("upgrade_cap"in e)return e.upgrade_cap.fields.package;throw new Error("upgrade_cap not found")}async verifyVaas(n,e){let t=await this.getWormholePackageId(),r=[];return n.forEach(i=>{let[s]=e.moveCall({target:`${t}::vaa::parse_and_verify`,arguments:[e.object(this.wormholeStateId),e.pure(sr.ser("vector<u8>",Array.from(i),{maxSize:r0}).toBytes()),e.object(He)]});r.push(s)}),r}async updatePriceFeeds(n,e,t){let r=await this.getPythPackageId(),i;if(e.length>1)throw new Error("SDK does not support sending multiple accumulator messages in a single transaction");let s=this.extractVaaBytesFromAccumulatorMessage(e[0]),o=await this.verifyVaas([s],n);[i]=n.moveCall({target:`${r}::pyth::create_authenticated_price_infos_using_accumulator`,arguments:[n.object(this.pythStateId),n.pure(sr.ser("vector<u8>",Array.from(e[0]),{maxSize:r0}).toBytes()),o[0],n.object(He)]});let a=[],c=await this.getBaseUpdateFee(),l=n.splitCoins(n.gas,t.map(()=>n.pure(c))),u=0;for(let d=0;d<t.length;d++){let h=await this.getPriceFeedObjectId(t[d]);if(!h)throw new Error(`Price feed ${t[0]} not found, please create it first`);a.push(h),[i]=n.moveCall({target:`${r}::pyth::update_single_price_feed`,arguments:[n.object(this.pythStateId),i,n.object(h),l[u],n.object(He)]}),u++}return n.moveCall({target:`${r}::hot_potato_vector::destroy`,arguments:[i],typeArguments:[`${r}::price_info::PriceInfo`]}),a}async createPriceFeed(n,e){let t=await this.getPythPackageId();if(e.length>1)throw new Error("SDK does not support sending multiple accumulator messages in a single transaction");let r=this.extractVaaBytesFromAccumulatorMessage(e[0]),i=await this.verifyVaas([r],n);n.moveCall({target:`${t}::pyth::create_price_feeds_using_accumulator`,arguments:[n.object(this.pythStateId),n.pure(sr.ser("vector<u8>",Array.from(e[0]),{maxSize:r0}).toBytes()),i[0],n.object(He)]})}async getWormholePackageId(){return this.wormholePackageId||(this.wormholePackageId=await this.getPackageId(this.wormholeStateId)),this.wormholePackageId}async getPythPackageId(){return this.pythPackageId||(this.pythPackageId=await this.getPackageId(this.pythStateId)),this.pythPackageId}async getPriceFeedObjectId(n){let e=n.replace("0x","");if(!this.priceFeedObjectIdCache.has(e)){let{id:t,fieldType:r}=await this.getPriceTableInfo(),i=await this.provider.getDynamicFieldObject({parentId:t,name:{type:`${r}::price_identifier::PriceIdentifier`,value:{bytes:Array.from(Buffer.from(e,"hex"))}}});if(!i.data||!i.data.content)return;if(i.data.content.dataType!=="moveObject")throw new Error("Price feed type mismatch");this.priceFeedObjectIdCache.set(e,i.data.content.fields.value)}return this.priceFeedObjectIdCache.get(e)}async getPriceTableInfo(){if(this.priceTableInfo===void 0){let n=await this.provider.getDynamicFieldObject({parentId:this.pythStateId,name:{type:"vector<u8>",value:"price_info"}});if(!n.data||!n.data.type)throw new Error("Price Table not found, contract may not be initialized");let e=n.data.type.replace("0x2::table::Table<","");e=e.replace("::price_identifier::PriceIdentifier, 0x2::object::ID>",""),this.priceTableInfo={id:n.data.objectId,fieldType:e}}return this.priceTableInfo}extractVaaBytesFromAccumulatorMessage(n){let e=7+n.readUint8(6)+1,t=n.readUint16BE(e),r=e+2;return n.subarray(r,r+t)}},nY=async(n,e)=>(await Do.get(`${n}/api/latest_vaas`,{params:{ids:e}})).data.map(t=>Buffer.from(t,"base64")),Gh=async(n,e,t)=>{let r=t??[...new Set([...hh,...UI])],i=n.isTestnet?["pyth"]:["pyth"];if(i.includes("pyth")){let o=new tY(n.client,n.address.get("core.oracles.pyth.state"),n.address.get("core.oracles.pyth.wormholeState")),a=[];await Promise.all(r.map(async l=>a.push(n.address.get(`core.coins.${l}.oracle.pyth.feed`))));let c=n.params.pythEndpoints??eY[n.isTestnet?"testnet":"mainnet"];try{let l=await nY(c[0],a);await o.updatePriceFeeds(e,l,a)}catch(l){console.warn(`Failed to update price feeds with endpoint ${c[0]}: ${l}`)}}let s=[...new Set(r)];for(let o=0;o<s.length;o++)await rY(n,e,s[o],i)},rY=async(n,e,t,r)=>{let i=n.utils.parseCoinType(t);iY(e,r,n.address.get("core.packages.xOracle.id"),n.address.get("core.oracles.xOracle"),n.address.get("core.packages.pyth.id"),n.address.get("core.oracles.pyth.registry"),n.address.get("core.oracles.pyth.state"),n.address.get(`core.coins.${t}.oracle.pyth.feedObject`),n.address.get("core.packages.switchboard.id"),n.address.get("core.oracles.switchboard.registry"),n.address.get(`core.coins.${t}.oracle.switchboard`),n.address.get("core.packages.supra.id"),n.address.get("core.oracles.supra.registry"),n.address.get("core.oracles.supra.holder"),i)},iY=(n,e,t,r,i,s,o,a,c,l,u,d,h,f,m)=>{let w=sY(n,t,r,m);return e.includes("pyth")&&lY(n,i,w,o,a,s,m),e.includes("switchboard")&&cY(n,c,w,u,l,m),e.includes("supra")&&aY(n,d,w,f,h,m),oY(n,t,r,w,m),n},sY=(n,e,t,r)=>{let i=typeof t=="string"?n.object(t):t,s=`${e}::x_oracle::price_update_request`,o=[r];return n.moveCall({target:s,arguments:[i],typeArguments:o})},oY=(n,e,t,r,i)=>{let s=`${e}::x_oracle::confirm_price_update_request`,o=[i],a=typeof t=="string"?n.object(t):t;return n.moveCall({target:s,arguments:[a,r,n.object(He)],typeArguments:o}),n},aY=(n,e,t,r,i,s)=>{let o=typeof r=="string"?n.object(r):r,a=typeof i=="string"?n.object(i):i;n.moveCall({target:`${e}::rule::set_price`,arguments:[t,o,a,n.object(He)],typeArguments:[s]})},cY=(n,e,t,r,i,s)=>{let o=typeof r=="string"?n.object(r):r,a=typeof i=="string"?n.object(i):i;n.moveCall({target:`${e}::rule::set_price`,arguments:[t,o,a,n.object(He)],typeArguments:[s]})},lY=(n,e,t,r,i,s,o)=>{let a=typeof t=="string"?n.object(t):t,c=typeof r=="string"?n.object(r):r,l=typeof i=="string"?n.object(i):i,u=typeof s=="string"?n.object(s):s;n.moveCall({target:`${e}::rule::set_price`,arguments:[a,c,l,u,n.object(He)],typeArguments:[o]})},Nd=async({builder:n,txBlock:e})=>{let t={pkgId:n.address.get("scoin.id")},r={};return await Promise.all(tu.map(async i=>{let s=n.utils.getSCoinTreasury(i);r[i]=s})),{mintSCoin:(i,s)=>e.moveCall({target:`${t.pkgId}::s_coin_converter::mint_s_coin`,arguments:[e.object(r[i]),typeof s!="string"?s:e.pure(s)],typeArguments:[n.utils.parseSCoinType(i),n.utils.parseUnderlyingSCoinType(i)]}),burnSCoin:(i,s)=>e.moveCall({target:`${t.pkgId}::s_coin_converter::burn_s_coin`,arguments:[e.object(r[i]),typeof s!="string"?s:e.pure(s)],typeArguments:[n.utils.parseSCoinType(i),n.utils.parseUnderlyingSCoinType(i)]})}},Qu=async(...n)=>{let[e,t,r,i]=n;if(n.length===3&&r)return{obligationId:r};if(n.length===4&&r&&i)return{obligationId:r,obligationKey:i};let s=os(e),o=await fb(t.query,s);if(o.length===0)throw new Error(`No obligation found for sender ${s}`);return{obligationId:o[0].id,obligationKey:o[0].keyId}},uY=async({builder:n,txBlock:e})=>{let t={protocolPkg:n.address.get("core.packages.protocol.id"),market:n.address.get("core.market"),version:n.address.get("core.version"),coinDecimalsRegistry:n.address.get("core.coinDecimalsRegistry"),xOracle:n.address.get("core.oracles.xOracle")},r=`${n.address.get("referral.id")}::scallop_referral_program::REFERRAL_WITNESS`;return{openObligation:()=>e.moveCall({target:`${t.protocolPkg}::open_obligation::open_obligation`,arguments:[e.object(t.version)]}),returnObligation:(i,s)=>e.moveCall({target:`${t.protocolPkg}::open_obligation::return_obligation`,arguments:[e.object(t.version),e.object(i),e.object(s)]}),openObligationEntry:()=>e.moveCall({target:`${t.protocolPkg}::open_obligation::open_obligation_entry`,arguments:[e.object(t.version)]}),addCollateral:(i,s,o)=>{let a=n.utils.parseCoinType(o);return e.moveCall({target:`${t.protocolPkg}::deposit_collateral::deposit_collateral`,arguments:[e.object(t.version),e.object(i),e.object(t.market),typeof s!="string"?s:e.pure(s)],typeArguments:[a]})},takeCollateral:(i,s,o,a)=>{let c=n.utils.parseCoinType(a);return e.moveCall({target:`${t.protocolPkg}::withdraw_collateral::withdraw_collateral`,arguments:[e.object(t.version),e.object(i),e.object(s),e.object(t.market),e.object(t.coinDecimalsRegistry),e.pure(o),e.object(t.xOracle),e.object(He)],typeArguments:[c]})},deposit:(i,s)=>{let o=n.utils.parseCoinType(s);return e.moveCall({target:`${t.protocolPkg}::mint::mint`,arguments:[e.object(t.version),e.object(t.market),typeof i!="string"?i:e.pure(i),e.object(He)],typeArguments:[o]})},depositEntry:(i,s)=>{let o=n.utils.parseCoinType(s);return e.moveCall({target:`${t.protocolPkg}::mint::mint_entry`,arguments:[e.object(t.version),e.object(t.market),typeof i!="string"?i:e.pure(i),e.object(He)],typeArguments:[o]})},withdraw:(i,s)=>{let o=n.utils.parseCoinType(s);return e.moveCall({target:`${t.protocolPkg}::redeem::redeem`,arguments:[e.object(t.version),e.object(t.market),typeof i!="string"?i:e.pure(i),e.object(He)],typeArguments:[o]})},withdrawEntry:(i,s)=>{let o=n.utils.parseCoinType(s);return e.moveCall({target:`${t.protocolPkg}::redeem::redeem_entry`,arguments:[e.object(t.version),e.object(t.market),typeof i!="string"?i:e.pure(i),e.object(He)],typeArguments:[o]})},borrow:(i,s,o,a)=>{let c=n.utils.parseCoinType(a);return e.moveCall({target:`${t.protocolPkg}::borrow::borrow`,arguments:[e.object(t.version),e.object(i),e.object(s),e.object(t.market),e.object(t.coinDecimalsRegistry),e.pure(o),e.object(t.xOracle),e.object(He)],typeArguments:[c]})},borrowEntry:(i,s,o,a)=>{let c=n.utils.parseCoinType(a);return e.moveCall({target:`${t.protocolPkg}::borrow::borrow_entry`,arguments:[e.object(t.version),e.object(i),e.object(s),e.object(t.market),e.object(t.coinDecimalsRegistry),e.pure(o),e.object(t.xOracle),e.object(He)],typeArguments:[c]})},borrowWithReferral:(i,s,o,a,c)=>{let l=n.utils.parseCoinType(c);return e.moveCall({target:`${t.protocolPkg}::borrow::borrow_with_referral`,arguments:[e.object(t.version),e.object(i),e.object(s),e.object(t.market),e.object(t.coinDecimalsRegistry),e.object(o),e.pure(a),e.object(t.xOracle),e.object(He)],typeArguments:[l,r]})},repay:(i,s,o)=>{let a=n.utils.parseCoinType(o);return e.moveCall({target:`${t.protocolPkg}::repay::repay`,arguments:[e.object(t.version),e.object(i),e.object(t.market),typeof s!="string"?s:e.pure(s),e.object(He)],typeArguments:[a]})},borrowFlashLoan:(i,s)=>{let o=n.utils.parseCoinType(s);return e.moveCall({target:`${t.protocolPkg}::flash_loan::borrow_flash_loan`,arguments:[e.object(t.version),e.object(t.market),e.pure(i)],typeArguments:[o]})},repayFlashLoan:(i,s,o)=>{let a=n.utils.parseCoinType(o);return e.moveCall({target:`${t.protocolPkg}::flash_loan::repay_flash_loan`,arguments:[e.object(t.version),e.object(t.market),e.pure(i),e.object(s)],typeArguments:[a]})}}},Wi=async({builder:n,txBlock:e})=>{let t=await uY({builder:n,txBlock:e}),r=await Nd({builder:n,txBlock:e});return{normalMethod:t,addCollateralQuick:async(i,s,o)=>{let a=os(e),{obligationId:c}=await Qu(e,n,o);if(s==="sui"){let[l]=e.splitCoins(e.gas,[i]);t.addCollateral(c,l,s)}else{let{leftCoin:l,takeCoin:u}=await n.selectCoin(e,s,i,a);t.addCollateral(c,u,s),e.transferObjects([l],a)}},takeCollateralQuick:async(i,s,o,a)=>{let c=await Qu(e,n,o,a),l=await n.query.getObligationCoinNames(c.obligationId);return await Gh(n,e,l),t.takeCollateral(c.obligationId,c.obligationKey,i,s)},depositQuick:async(i,s,o)=>{if(s==="sui"){let[l]=e.splitCoins(e.gas,[i]);return t.deposit(l,s)}let{leftCoin:a,takeCoin:c}=await n.selectCoin(e,s,i,o);return e.transferObjects([a],o),t.deposit(c,s)},withdrawQuick:async(i,s)=>{let o=os(e),a=n.utils.parseMarketCoinName(s);try{let c=n.utils.parseSCoinName(s);if(!c)throw new Error(`No sCoin for ${s}`);let{leftCoin:l,takeCoin:u,totalAmount:d}=await n.selectSCoin(e,c,i,o);e.transferObjects([l],o);let h=r.burnSCoin(c,u),f=t.withdraw(h,s),m=i-d;try{if(m>0){let{leftCoin:w,takeCoin:y}=await n.selectMarketCoin(e,a,m,o);e.transferObjects([w],o),e.mergeCoins(f,[t.withdraw(y,s)])}}catch{}return f}catch{let{leftCoin:c,takeCoin:l}=await n.selectMarketCoin(e,a,i,o);return e.transferObjects([c],o),t.withdraw(l,s)}},borrowQuick:async(i,s,o,a)=>{let c=await Qu(e,n,o,a),l=[...await n.query.getObligationCoinNames(c.obligationId),s];return await Gh(n,e,l),t.borrow(c.obligationId,c.obligationKey,i,s)},borrowWithReferralQuick:async(i,s,o,a,c)=>{let l=await Qu(e,n,a,c),u=[...await n.query.getObligationCoinNames(l.obligationId),s];return await Gh(n,e,u),t.borrowWithReferral(l.obligationId,l.obligationKey,o,i,s)},repayQuick:async(i,s,o,a)=>{let c=await Qu(e,n,o);if(s==="sui"){let[d]=e.splitCoins(e.gas,[i]);return t.repay(c.obligationId,d,s)}let{leftCoin:l,takeCoin:u}=await n.selectCoin(e,s,i,a);return e.transferObjects([l],a),t.repay(c.obligationId,u,s)},updateAssetPricesQuick:async i=>Gh(n,e,i)}},Aw=async({builder:n,txBlock:e})=>{let t={referralPgkId:n.address.get("referral.id"),referralBindings:n.address.get("referral.referralBindings"),referralRevenuePool:n.address.get("referral.referralRevenuePool"),authorizedWitnessList:n.address.get("referral.authorizedWitnessList"),referralTiers:n.address.get("referral.referralTiers"),version:n.address.get("referral.version")},r=n.address.get("vesca.table");return{bindToReferral:i=>e.moveCall({target:`${t.referralPgkId}::referral_bindings::bind_ve_sca_referrer`,arguments:[e.object(t.referralBindings),e.pure(i),e.object(r),e.object(He)],typeArguments:[]}),claimReferralTicket:i=>{let s=n.utils.parseCoinType(i);return e.moveCall({target:`${t.referralPgkId}::scallop_referral_program::claim_ve_sca_referral_ticket`,arguments:[e.object(t.version),e.object(r),e.object(t.referralBindings),e.object(t.authorizedWitnessList),e.object(t.referralTiers),e.object(He)],typeArguments:[s]})},burnReferralTicket:(i,s)=>{let o=n.utils.parseCoinType(s);return e.moveCall({target:`${t.referralPgkId}::scallop_referral_program::burn_ve_sca_referral_ticket`,arguments:[e.object(t.version),e.object(i),e.object(t.referralRevenuePool),e.object(He)],typeArguments:[o]})},claimReferralRevenue:(i,s)=>{let o=n.utils.parseCoinType(s);return e.moveCall({target:`${t.referralPgkId}::referral_revenue_pool::claim_revenue_with_ve_sca_key`,arguments:[e.object(t.version),e.object(t.referralRevenuePool),e.object(i),e.object(He)],typeArguments:[o]})}}},dY=async({builder:n,txBlock:e})=>{let t=await Aw({builder:n,txBlock:e});return{claimReferralRevenueQuick:async(r,i,s=[...hh])=>{let o=[];for(let a=0;a<s.length;a++)if(s[a]==="sui"){let c=t.claimReferralRevenue(r,s[a]);o.push(c)}else{let c=t.claimReferralRevenue(r,s[a]);try{let l=await n.utils.selectCoinIds(1/0,n.utils.parseCoinType(s[a]),i);e.mergeCoins(c,l.slice(0,500))}catch{}finally{o.push(c)}}o.length>0&&e.transferObjects(o,e.pure(i))}}},mv=async(n,e,t,r,i,s,o=!1)=>{let a=await Nd({builder:n,txBlock:e}),c=await m4({builder:n,txBlock:e});try{let{takeCoin:l,leftCoin:u,totalAmount:d}=o?await n.selectSCoin(e,r,i,s):await n.selectMarketCoin(e,r,i,s);if(o){let h=a.burnSCoin(r,l);c.stake(t,h,r)}else c.stake(t,l,r);return e.transferObjects([u],s),d}catch{return 0}},gv=async(...n)=>{let[e,t,r,i]=n;if(n.length===4&&i)return[i];let s=os(t),o=await pb(e.query,s);if(o[r].length===0)throw new Error(`No stake account id found for sender ${s}`);return o[r].map(a=>a.id)},hY=async(...n)=>{let[e,t,r,i]=n,s=os(t),o=await pb(e.query,s);if(o[r].length===0)throw new Error(`No stake account found for sender ${s}`);return i?o[r].filter(a=>a.id===i):o[r]},m4=async({builder:n,txBlock:e})=>{let t={spoolPkg:n.address.get("spool.id")},r={},i={},s={};return Od.forEach(o=>{let a=n.address.get(`spool.pools.${o}.id`),c=n.address.get(`spool.pools.${o}.rewardPoolId`),l=n.utils.parseMarketCoinType(o);r[o]=a,i[o]=c,s[o]=l}),{createStakeAccount:o=>{let a=s[o],c=r[o];return e.moveCall({target:`${t.spoolPkg}::user::new_spool_account`,arguments:[e.object(c),e.object(He)],typeArguments:[a]})},stake:(o,a,c)=>{let l=s[c],u=r[c];e.moveCall({target:`${t.spoolPkg}::user::stake`,arguments:[e.object(u),e.object(o),typeof a=="string"?e.pure(a):a,e.object(He)],typeArguments:[l]})},unstake:(o,a,c)=>{let l=s[c],u=r[c];return e.moveCall({target:`${t.spoolPkg}::user::unstake`,arguments:[e.object(u),e.object(o),e.pure(a),e.object(He)],typeArguments:[l]})},claim:(o,a)=>{let c=r[a],l=i[a],u=s[a],d=FI[a],h=n.utils.parseCoinType(d);return e.moveCall({target:`${t.spoolPkg}::user::redeem_rewards`,arguments:[e.object(c),e.object(l),e.object(o),e.object(He)],typeArguments:[u,h]})}}},cc=async({builder:n,txBlock:e})=>{let t=await m4({builder:n,txBlock:e}),r=await Nd({builder:n,txBlock:e});return{normalMethod:t,stakeQuick:async(i,s,o)=>{let a=os(e),c=await gv(n,e,s,o);if(typeof i=="number"){let l=await mv(n,e,c[0],s,i,a);i-=l,l||await mv(n,e,c[0],s,i,a,!0)}else t.stake(c[0],i,s)},unstakeQuick:async(i,s,o,a)=>{let c=await hY(n,e,s,o),l=[],u=i;for(let d of c){if(d.staked===0)continue;let h=Math.min(u,d.staked),f=t.unstake(d.id,h,s);if(a){let m=r.mintSCoin(s,f);l.push(m)}else l.push(f);if(u-=h,i<=0)break}if(l.length>0){let d=l[0];return l.length>1&&e.mergeCoins(d,l.slice(1)),d}},claimQuick:async(i,s)=>{let o=await gv(n,e,i,s),a=[];return o.forEach(c=>{let l=t.claim(c,i);a.push(l)}),a}}},fY=async({builder:n,txBlock:e})=>{let t={pkgId:n.address.get("vesca.id"),table:n.address.get("vesca.table"),treasury:n.address.get("vesca.treasury"),config:n.address.get("vesca.config")};return{lockSca:(r,i)=>e.moveCall({target:`${t.pkgId}::ve_sca::mint_ve_sca_key`,arguments:[e.object(t.config),e.object(t.table),e.object(t.treasury),typeof r=="string"?e.pure(r):r,e.pure(i),e.object(He)]}),extendLockPeriod:(r,i)=>{e.moveCall({target:`${t.pkgId}::ve_sca::extend_lock_period`,arguments:[e.object(t.config),e.object(r),e.object(t.table),e.object(t.treasury),e.pure(i),e.object(He)]})},extendLockAmount:(r,i)=>{e.moveCall({target:`${t.pkgId}::ve_sca::lock_more_sca`,arguments:[e.object(t.config),e.object(r),e.object(t.table),e.object(t.treasury),typeof i=="string"?e.pure(i):i,e.object(He)]})},renewExpiredVeSca:(r,i,s)=>{e.moveCall({target:`${t.pkgId}::ve_sca::renew_expired_ve_sca`,arguments:[e.object(t.config),e.object(r),e.object(t.table),e.object(t.treasury),typeof i=="string"?e.pure(i):i,e.pure(s),e.object(He)]})},redeemSca:r=>e.moveCall({target:`${t.pkgId}::ve_sca::redeem`,arguments:[e.object(t.config),e.object(r),e.object(t.table),e.object(t.treasury),e.object(He)]}),mintEmptyVeSca:()=>e.moveCall({target:`${t.pkgId}::ve_sca::mint_ve_sca_placeholder_key`,arguments:[e.object(t.config),e.object(t.table)],typeArguments:[]})}},lc=async({builder:n,txBlock:e})=>{let t=await fY({builder:n,txBlock:e});return{normalMethod:t,lockScaQuick:async(r,i,s=!0)=>{let o=os(e),a=await xl(n,e),c,l=[];if(r!==void 0&&typeof r=="number"){let f=await n.utils.selectCoinIds(r,eu,o),[m,w]=n.utils.takeAmountFromCoins(e,f,r);c=m,l.push(w)}else c=r;let u=n.utils.getUnlockAt(i,a==null?void 0:a.unlockAt);s&&LG(r,i,u,a==null?void 0:a.unlockAt),console.log(new Date(u*1e3).toLocaleString("en-CA",{hour12:!0}));let d=!(a!=null&&a.unlockAt),h=!d&&a.unlockAt*1e3<=new Date().getTime();if(d||h){if(c)if(d){let f=t.lockSca(c,u);l.push(f)}else{if(a.lockedScaAmount!==0){let f=t.redeemSca(a.keyId);l.push(f)}t.renewExpiredVeSca(a.keyId,c,u)}}else c&&i?(t.extendLockPeriod(a.keyId,u),t.extendLockAmount(a.keyId,c)):i?t.extendLockPeriod(a.keyId,u):c&&t.extendLockAmount(a.keyId,c);l.length>0&&e.transferObjects(l,o)},extendLockPeriodQuick:async(r,i,s=!0)=>{let o=await xl(n,e,i),a=n.utils.getUnlockAt(r);s&&$G(r,a,o==null?void 0:o.unlockAt),o&&t.extendLockPeriod(o.keyId,a)},extendLockAmountQuick:async(r,i,s=!0)=>{let o=os(e),a=await xl(n,e,i);if(s&&VG(r,a==null?void 0:a.unlockAt),a){let c=await n.utils.selectCoinIds(r,eu,o),[l,u]=n.utils.takeAmountFromCoins(e,c,r);t.extendLockAmount(a.keyId,l),e.transferObjects([u],o)}},renewExpiredVeScaQuick:async(r,i,s,o=!0)=>{let a=os(e),c=await xl(n,e,s),l=n.utils.getUnlockAt(i,c==null?void 0:c.unlockAt);if(o&&qG(r,i,c==null?void 0:c.unlockAt),c){let u=[];if(c.lockedScaAmount!==0){let m=t.redeemSca(c.keyId);u.push(m)}let d=await n.utils.selectCoinIds(r,eu,a),[h,f]=n.utils.takeAmountFromCoins(e,d,r);u.push(f),t.renewExpiredVeSca(c.keyId,h,l),e.transferObjects(u,a)}},redeemScaQuick:async r=>{let i=os(e),s=await xl(n,e,r);if(fh(s==null?void 0:s.unlockAt),s){let o=t.redeemSca(s.keyId);e.transferObjects([o],i)}}}},pY=class{constructor(n,e){v(this,"params");v(this,"client");v(this,"address");v(this,"builder");v(this,"query");v(this,"utils");v(this,"walletAddress");this.params=n,this.client=n.client,this.address=e,this.utils=new YG(n,this.address),this.query=new GG(n,{address:this.address,utils:this.utils}),this.builder=new DG(n,{address:this.address,query:this.query,utils:this.utils})}async getObligations(n){let e=n||this.params.walletAddress;return this.query.getObligations(e)}async getAllStakeAccounts(n){let e=n||this.params.walletAddress;return this.query.getAllStakeAccounts(e)}async getStakeAccounts(n,e){let t=e||this.params.walletAddress;return this.query.getStakeAccounts(n,t)}async getStakePool(n){return this.query.getStakePool(n)}async getStakeRewardPool(n){return this.query.getStakeRewardPool(n)}async openObligation(n){let e=new xe,t=await Wi({builder:this.builder,txBlock:e}),r=await oi({builder:this.builder,txBlock:e}),i=n||this.params.walletAddress;e.setSender(i);let[s,o,a]=t.normalMethod.openObligation();return r.normalMethod.stakeObligation(s,o),t.normalMethod.returnObligation(s,a),e.transferObjects([o],i),e}async depositCollateral(n,e,t,r){var l;let i=new xe,s=r||this.params.walletAddress;i.setSender(s);let o=await Wi({builder:this.builder,txBlock:i}),a=await this.query.getObligations(s),c=t||((l=a==null?void 0:a[0])==null?void 0:l.id);if(c)await o.addCollateralQuick(e,n,c);else{let[u,d,h]=o.normalMethod.openObligation();await o.addCollateralQuick(e,n,u),o.normalMethod.returnObligation(u,h),i.transferObjects([d],s)}return i}async withdrawCollateral(n,e,t,r,i){let s=new xe,o=await Wi({builder:this.builder,txBlock:s}),a=i||this.params.walletAddress;s.setSender(a);let c=await o.takeCollateralQuick(e,n,t,r);return s.transferObjects([c],a),s}async deposit(n,e,t){let r=new xe,i=await Wi({builder:this.builder,txBlock:r}),s=await Nd({builder:this.builder,txBlock:r}),o=t||this.params.walletAddress;r.setSender(o);let a=await i.depositQuick(e,n,t),c=this.utils.parseMarketCoinName(n);if(!tu.includes(c))r.transferObjects([a],o);else{let l=s.mintSCoin(c,a);r.transferObjects([l],o)}return r}async withdraw(n,e,t){let r=new xe,i=t||this.params.walletAddress,s=await Wi({builder:this.builder,txBlock:r});r.setSender(i);let o=await s.withdrawQuick(e,n);return r.transferObjects([o],i),r}async borrow(n,e,t,r,i){let s=new xe,o=await Wi({builder:this.builder,txBlock:s}),a=await oi({builder:this.builder,txBlock:s}),c=i||this.params.walletAddress;s.setSender(c);let l=Il.includes(n);l&&await a.unstakeObligationQuick(t,r);let u=await o.borrowQuick(e,n,t,r);return s.transferObjects([u],c),l&&await a.stakeObligationQuick(t,r),s}async borrowWithBoost(n,e,t,r,i,s){let o=new xe,a=await Wi({builder:this.builder,txBlock:o}),c=await oi({builder:this.builder,txBlock:o}),l=s||this.params.walletAddress;o.setSender(l);let u=Il.includes(n);u&&await c.unstakeObligationQuick(t,r);let d=await a.borrowQuick(e,n,t,r);return o.transferObjects([d],l),u&&await c.stakeObligationWithVeScaQuick(t,r,i),o}async borrowWithReferral(n,e,t,r,i,s){let o=new xe,a=await Wi({builder:this.builder,txBlock:o}),c=await oi({builder:this.builder,txBlock:o}),l=await Aw({builder:this.builder,txBlock:o}),u=s||this.params.walletAddress;o.setSender(u);let d=Il.includes(n);d&&await c.unstakeObligationQuick(t,r);let h=l.claimReferralTicket(n),f=await a.borrowWithReferralQuick(e,n,h,t,r);return l.burnReferralTicket(h,n),o.transferObjects([f],u),d&&i?await c.stakeObligationWithVeScaQuick(t,r,i):await c.stakeObligationQuick(t,r),o}async repay(n,e,t,r,i){let s=new xe,o=await Wi({builder:this.builder,txBlock:s}),a=await oi({builder:this.builder,txBlock:s}),c=i||this.params.walletAddress;s.setSender(c);let l=Il.includes(n);return l&&await a.unstakeObligationQuick(t,r),await o.repayQuick(e,n,t,c),l&&await a.stakeObligationQuick(t,r),s}async repayWithBoost(n,e,t,r,i){let s=new xe,o=await Wi({builder:this.builder,txBlock:s}),a=await oi({builder:this.builder,txBlock:s}),c=i||this.params.walletAddress;s.setSender(c);let l=Il.includes(n);return l&&await a.unstakeObligationQuick(t,void 0),await o.repayQuick(e,n,t,c),l&&await a.stakeObligationWithVeScaQuick(t,void 0,r),s}async createStakeAccount(n,e){let t=new xe,r=await cc({builder:this.builder,txBlock:t}),i=e||this.params.walletAddress;t.setSender(i);let s=r.normalMethod.createStakeAccount(n);return t.transferObjects([s],i),t}async supplyAndStake(n,e,t,r){let i=new xe,s=await Wi({builder:this.builder,txBlock:i}),o=await cc({builder:this.builder,txBlock:i}),a=r||this.params.walletAddress;i.setSender(a);let c=await s.depositQuick(e,n,r),l=this.utils.parseMarketCoinName(n);if(!Od.find(h=>h===l))return i;let u=await this.query.getStakeAccounts(l,a),d=t||(u.length>0?u[0].id:void 0);if(d)await o.stakeQuick(c,l,d);else{let h=o.normalMethod.createStakeAccount(l);await o.stakeQuick(c,l,h),i.transferObjects([h],a)}return i}async unstakeAndWithdraw(n,e,t){let r=new xe,i=await Wi({builder:this.builder,txBlock:r}),s=await cc({builder:this.builder,txBlock:r}),o=this.params.walletAddress,a=[];r.setSender(o);let c=this.utils.parseMarketCoinName(n);for(let l=0;l<t.length;l++){let u=t[l],[d]=await s.unstakeQuick(u.coin,c,u.id);if(d){let h=i.normalMethod.withdraw(d,n);a.push(h)}}if(e>0){let l=await i.withdrawQuick(e,n);a.push(l)}return r.transferObjects(a,o),r}async stake(n,e,t,r){let i=new xe,s=await cc({builder:this.builder,txBlock:i}),o=r||this.params.walletAddress;i.setSender(o);let a=await this.query.getStakeAccounts(n,o),c=t||(a.length>0?a[0].id:void 0);if(c)await s.stakeQuick(e,n,c);else{let l=s.normalMethod.createStakeAccount(n);await s.stakeQuick(e,n,l),i.transferObjects([l],o)}return i}async unstake(n,e,t,r){let i=new xe,s=await cc({builder:this.builder,txBlock:i}),o=r||this.params.walletAddress;i.setSender(o);let a=tu.includes(n),c=await s.unstakeQuick(e,n,t,a);return i.transferObjects([c],i.pure(o)),i}async claim(n,e,t,r){let i=new xe,s=await cc({builder:this.builder,txBlock:i}),o=await oi({builder:this.builder,txBlock:i}),a=r||this.params.walletAddress;i.setSender(a);let c={sui:[],sca:[]};for(let l=0;l<n.length;l++){let{stakeMarketCoinName:u,stakeAccountId:d}=n[l],h=s.normalMethod.claim(d,u);c.sui.push(h)}for(let l=0;l<e.length;l++){let{obligationId:u,obligationKey:d,rewardCoinName:h}=e[l],f=o.normalMethod.claimBorrowIncentive(u,d,h);c[h].push(f)}for(let l=0;l<t.length;l++){let{obligationId:u,obligationKey:d,rewardCoinName:h}=t[l],f=o.normalMethod.oldClaimBorrowIncentive(u,d,h);c[h].push(f)}return c.sui.length>0&&(c.sui.length>1&&i.mergeCoins(c.sui[0],c.sui.slice(1)),i.transferObjects([c.sui[0]],i.pure(a))),c.sca.length>0&&(c.sca.length>1&&i.mergeCoins(c.sca[0],c.sca.slice(1)),i.transferObjects([c.sca[0]],i.pure(a))),i}async stakeObligation(n,e,t){let r=this.builder.createTxBlock(),i=await oi({builder:this.builder,txBlock:r}),s=t||this.params.walletAddress;return r.setSender(s),await i.stakeObligationQuick(n,e),r}async unstakeObligation(n,e,t){let r=this.builder.createTxBlock(),i=await oi({builder:this.builder,txBlock:r}),s=t||this.params.walletAddress;return r.setSender(s),await i.unstakeObligationQuick(n,e),r}async stakeSca(n,e=!1,t=!1,r,i,s,o,a){let c=new xe,l=await lc({builder:this.builder,txBlock:c}),u=await oi({builder:this.builder,txBlock:c}),d=a||this.params.walletAddress;c.setSender(d);let h=await this.builder.utils.selectCoinIds(n,eu,d),[f,m]=this.builder.utils.takeAmountFromCoins(c,h,n),w;return o?l.normalMethod.extendLockAmount(o,f):w=l.normalMethod.lockSca(f,s),r&&i&&(e&&(t?u.normalMethod.oldUnstakeObligation(r,i):u.normalMethod.unstakeObligation(r,i)),u.normalMethod.stakeObligationWithVesca(r,i,o||w)),o||c.transferObjects([w,m],d),c}async stakeMoreSca(n,e,t){let r=new xe,i=t||this.params.walletAddress;return r.setSender(i),r}async extendStakeScaLockPeriod(n,e,t,r,i=!1,s=!1,o){let a=new xe,c=await lc({builder:this.builder,txBlock:a}),l=await oi({builder:this.builder,txBlock:a}),u=o||this.params.walletAddress;return a.setSender(u),c.normalMethod.extendLockPeriod(e,n),t&&r&&(i&&(s?l.normalMethod.oldUnstakeObligation(t,r):l.normalMethod.unstakeObligation(t,r)),l.normalMethod.stakeObligationWithVesca(t,r,e)),a}async extendPeriodAndStakeMoreSca(n,e,t,r,i,s=!1,o=!1,a){let c=new xe,l=await lc({builder:this.builder,txBlock:c}),u=await oi({builder:this.builder,txBlock:c}),d=a||this.params.walletAddress;c.setSender(d);let h=await this.builder.utils.selectCoinIds(n,eu,d),[f,m]=this.builder.utils.takeAmountFromCoins(c,h,n);return l.normalMethod.extendLockPeriod(e,t),l.normalMethod.extendLockAmount(e,f),c.transferObjects([m],d),!r||!i||(s&&(o?u.normalMethod.oldUnstakeObligation(r,i):u.normalMethod.unstakeObligation(r,i)),u.normalMethod.stakeObligationWithVesca(r,i,e)),c}async renewExpiredStakeSca(n,e,t,r=!1,i,s,o=!1,a=!1,c){let l=new xe,u=await lc({builder:this.builder,txBlock:l}),d=await oi({builder:this.builder,txBlock:l}),h=c||this.params.walletAddress;if(l.setSender(h),r){let y=u.normalMethod.redeemSca(t);l.transferObjects([y],h)}let f=await this.builder.utils.selectCoinIds(n,eu,h),[m,w]=this.builder.utils.takeAmountFromCoins(l,f,n);return l.transferObjects([w],h),u.normalMethod.renewExpiredVeSca(t,m,e),!i||!s||(o&&(a?d.normalMethod.oldUnstakeObligation(i,s):d.normalMethod.unstakeObligation(i,s)),d.normalMethod.stakeObligationWithVesca(i,s,t)),l}async redeemSca(n){let e=new xe,t=await lc({builder:this.builder,txBlock:e}),r=this.params.walletAddress;return e.setSender(r),await t.redeemScaQuick(n),e}async migrateAndClaim(n,e,t,r){let i=new xe,s=await oi({builder:this.builder,txBlock:i}),o=this.params.walletAddress;i.setSender(o);let a=s.normalMethod.oldClaimBorrowIncentive(e,n,t);return i.transferObjects([a],o),await s.unstakeObligationQuick(e,n),r?await s.stakeObligationWithVeScaQuick(e,n,r):await s.stakeObligationQuick(e,n),i}async withdrawUnlockedSca(n,e){let t=new xe,r=await lc({builder:this.builder,txBlock:t}),i=e||this.params.walletAddress;return t.setSender(i),await r.redeemScaQuick(n),t}calculateAvailableClaimCoin(n,e){let t=new Qo(n.weightedAmount),r=e.currentPointIndex?Qo(e.currentPointIndex-n.index).dividedBy(1e9):1;return t.multipliedBy(r).plus(n.points).shiftedBy(-1*e.coinDecimal)}async createReferralLink(){let n=new xe,e=await lc({builder:this.builder,txBlock:n}),t=this.params.walletAddress;n.setSender(t);let r=e.normalMethod.mintEmptyVeSca();return n.transferObjects([r],t),n}async claimRevenuReferral(n,e){let t=new xe,r=await dY({builder:this.builder,txBlock:t}),i=this.params.walletAddress;t.setSender(i);let s=e.map(o=>this.utils.parseCoinNameFromType(o));return await r.claimReferralRevenueQuick(n,i,s),t}async bindReferral(n){let e=new xe,t=await Aw({builder:this.builder,txBlock:e}),r=this.params.walletAddress;return e.setSender(r),t.bindToReferral(n),e}async migrateAllMarketCoin(){let n=new xe,e=await Nd({builder:this.builder,txBlock:n}),t=await cc({builder:this.builder,txBlock:n});n.setSender(this.params.walletAddress);let r=[];return await Promise.all(tu.map(async i=>{let s=[],o;try{let a=await this.utils.selectCoinIds(Number.MAX_SAFE_INTEGER,this.utils.parseMarketCoinType(i),this.params.walletAddress),c=a[0];a.length>1&&n.mergeCoins(c,a.slice(1)),o=c}catch(a){if(!a.toString().includes("No valid coins found for the transaction"))throw a}if(o){let a=e.mintSCoin(i,o);try{let c=await this.utils.selectCoinIds(Number.MAX_SAFE_INTEGER,this.utils.parseSCoinType(i),this.params.walletAddress);n.mergeCoins(a,c)}catch(c){console.log(c)}s.push(a)}if(Od.includes(i))try{let a=await t.unstakeQuick(Number.MAX_SAFE_INTEGER,i);a&&s.push(a)}catch(a){console.log(a)}if(s.length>0){let a=s[0];s.length>1&&n.mergeCoins(a,s.slice(1)),r.push(a)}})),r.length>0&&n.transferObjects(r,this.params.walletAddress),n}},wv=class{constructor(n){v(this,"params");v(this,"client");v(this,"builder");v(this,"query");v(this,"utils");v(this,"address");this.params=n,this.address=n.address}async init(){this.address||(this.address=new jG({id:XH})),await this.address.read(),this.client=new pY(this.params,this.address);let{builder:n,query:e,utils:t}=this.client;this.builder=n,this.query=e,this.utils=t}},mY=class{constructor(){v(this,"application","scallop");v(this,"supportSDK","@mysten/sui.js");v(this,"scallop")}async deserialize(n){this.scallop||(this.scallop=new wv({client:n.suiClient,walletAddress:n.account.address}),await this.scallop.init());let{transactionBlock:e}=n;console.log("transactionBlock",e);let t=new iG(e,this.scallop),r=new sG(e,this.scallop),i=new oG(e,this.scallop),s=t.decode()||r.decode()||i.decode();if(!s)throw new Error("Unknown transaction type");return{txType:Ee.Other,txSubType:s.type,intentionData:s.intentionData}}async build(n){let{suiClient:e,account:t,network:r,txSubType:i,intentionData:s}=n;this.scallop||(this.scallop=new wv({client:n.suiClient,walletAddress:n.account.address}),await this.scallop.init());let o;switch(i){case"SupplyLending":o=yG.fromData(s);break;case"WithdrawLending":o=kG.fromData(s);break;case"Borrow":o=aG.fromData(s);break;case"Repay":o=mG.fromData(s);break;case"DepositCollateral":o=dG.fromData(s);break;case"WithdrawCollateral":o=vG.fromData(s);break;case"OpenObligation":o=pG.fromData(s);break;case"StakeSpool":o=wG.fromData(s);break;case"UnstakeSpool":o=bG.fromData(s);break;case"ClaimIncentiveReward":o=uG.fromData(s);break;case"BorrowWithBoost":o=cG.fromData(s);break;case"StakeSca":o=MG.fromData(s);break;case"ExtendStakePeriod":o=IG.fromData(s);break;case"ExtendPeriodAndStakeMore":o=TG.fromData(s);break;case"RenewExpStakePeriod":o=EG.fromData(s);break;case"WithdrawStakedSca":o=NG.fromData(s);break;case"SupplyAndStakeLending":o=OG.fromData(s);break;case"WithdrawAndUnstakeLending":o=_G.fromData(s);break;case"RedeemSca":o=xG.fromData(s);break;case"MigrateAndClaim":o=hG.fromData(s);break;case"BorrowWithReferral":o=lG.fromData(s);break;case"CreateReferralLink":o=AG.fromData(s);break;case"ClaimRevenueReferral":o=CG.fromData(s);break;case"BindReferral":o=SG.fromData(s);break;case"MigrateScoin":o=fG.fromData(s);break;case"RepayWithBoost":o=gG.fromData(s);break;default:throw new Error("not implemented")}return o.build({suiClient:e,account:t,network:r,scallop:this.scallop})}},Wa={PackageId:"0x02fe4933f4521250e55a15441096d1d4a38a7311195b0bca126fc0138c1f5a97",Claim:"0x0c822cec42f7ca703696b4232f1c47b348330c23580172a29aab465bc071d894",turbosCoinType:"0x5d1f47ea69bb0de31c313d7acf89b890dbb8991ea8e03c6c355171f84bb1ba4a::turbos::TURBOS"},Ua={PackageId:"0xdee9"},gY=(n,e,t,r)=>{if(n===1)switch(r.findIndex(i=>i===e)){case 0:return[!0,!0];case 1:return[!0,!1];case 2:return[!1,!0];case 3:return[!1,!1];default:throw new Error(`not target: ${e}`)}switch(t.findIndex(i=>i===e)){case 0:return[!0];case 1:return[!1];default:throw new Error(`not target: ${e}`)}},wY=class{constructor(n,e,t){this.txb=n,this.turbosSdk=e,this.config=t}get transactions(){return this.txb.blockData.transactions}get swap1Layer(){return[`${this.config.PackageId}::swap_router::swap_a_b`,`${this.config.PackageId}::swap_router::swap_b_a`]}get swap2Layer(){return[`${this.config.PackageId}::swap_router::swap_a_b_b_c`,`${this.config.PackageId}::swap_router::swap_a_b_c_b`,`${this.config.PackageId}::swap_router::swap_b_a_b_c`,`${this.config.PackageId}::swap_router::swap_b_a_c_b`]}async decode(n){if(this.isSwapTransaction())return await this.decodeSwap();if(this.isAddLiquidityTransaction())return this.decodeAddLiquidity();if(this.isIncreaseLiquidityTransaction())return this.decodeIncreaseLiquidity(n);if(this.isRemoveLiquidityTransaction())return this.decodeRemoveLiquidity(n);if(this.isDecreaseLiquidityTransaction())return this.decodeDecreaseLiquidity(n);if(this.isCollectFeeTransaction())return this.decodeCollectFee();if(this.isCollectRewardTransaction())return this.decodeCollectReward();if(this.isBurnTransaction())return this.decodeBurn();if(this.isPrixClaimTransaction())return this.decodePrixClaim();if(this.isPrixJoinTransaction())return this.decodePrixJoin();if(this.isSwapExactBaseForQuoteTransaction())return this.decodeSwapExactBaseForQuote();if(this.isSwapExactQuoteForBaseTransaction())return this.decodeSwapExactQuoteForBase();throw new Error("Unknown transaction type")}getMoveCallTransaction(n){return this.transactions.find(e=>e.kind==="MoveCall"&&e.target===n)}getMoveCallsTransaction(n){return n.every(e=>this.transactions.find(t=>t.kind==="MoveCall"&&t.target===e))}getSwapMoveCallTransaction(n){return this.transactions.find(e=>e.kind==="MoveCall"&&n.includes(e.target))}isSwapTransaction(){return!!this.getSwapMoveCallTransaction([...this.swap1Layer,...this.swap2Layer])}isAddLiquidityTransaction(){return!!this.getMoveCallTransaction(`${this.config.PackageId}::position_manager::mint`)}isIncreaseLiquidityTransaction(){return!!this.getMoveCallTransaction(`${this.config.PackageId}::position_manager::increase_liquidity`)}isDecreaseLiquidityTransaction(){return!!this.getMoveCallTransaction(`${this.config.PackageId}::position_manager::decrease_liquidity`)}isCollectFeeTransaction(){return!!this.getMoveCallTransaction(`${this.config.PackageId}::position_manager::collect`)}isCollectRewardTransaction(){return!!this.getMoveCallTransaction(`${this.config.PackageId}::position_manager::collect_reward`)}isBurnTransaction(){return!!this.getMoveCallTransaction(`${this.config.PackageId}::position_manager::burn`)}isPrixJoinTransaction(){return!!this.getMoveCallTransaction(`${Wa.PackageId}::claim::join`)}isPrixClaimTransaction(){return!!this.getMoveCallTransaction(`${Wa.PackageId}::claim::claim`)}isRemoveLiquidityTransaction(){return!!this.getMoveCallsTransaction([`${this.config.PackageId}::position_manager::decrease_liquidity`,`${this.config.PackageId}::position_manager::burn`])}isSwapExactBaseForQuoteTransaction(){return!!this.getMoveCallTransaction(`${Ua.PackageId}::clob_v2::swap_exact_base_for_quote`)}isSwapExactQuoteForBaseTransaction(){return!!this.getMoveCallTransaction(`${Ua.PackageId}::clob_v2::swap_exact_quote_for_base`)}async decodeSwap(){let n=this.transactions.find(d=>d.kind==="MoveCall"),e=0;this.swap2Layer.includes(n.target)&&(e=1);let t=gY(e,n.target,this.swap1Layer,this.swap2Layer),r=t.map((d,h)=>{let f=this.helper.decodeSharedObjectId(h),m=this.helper.decodeInputU128(4+h+e),w=this.turbosSdk.math.sqrtPriceX64ToTickIndex(new B(m.toString()));return{pool:f,a2b:d,nextTickIndex:w}}),i=t[0]||e===1?n.typeArguments[0]:n.typeArguments[1],s=e===1?n.typeArguments[4]:t[0]?n.typeArguments[1]:n.typeArguments[0],o=this.helper.decodeInputAddress(6+2*e),a=this.helper.decodeInputU64(7+2*e),c=this.helper.decodeInputBool(5+2*e),l=this.helper.decodeInputU64(2+e),u=this.helper.decodeInputU64(3+e);return await this.turbosSdk.trade.computeSwapResultV2({pools:[{pool:r[0].pool,a2b:r[0].a2b,amountSpecified:l}],address:o,amountSpecifiedIsInput:c}),{txType:Ee.Other,type:"Swap",intentionData:{routes:r,coinTypeA:i,coinTypeB:s,address:o,amountA:c?l:u,amountB:c?u:l,amountSpecifiedIsInput:c,slippage:"0.1",deadline:a}}}decodeAddLiquidity(){console.log(this.helper,"decodeAddLiquidity this.helper");let n=this.helper.decodeSharedObjectId(0),e=this.helper.decodeInputAddress(12),t=this.helper.decodeInputU64(8),r=this.helper.decodeInputU64(9),i=this.helper.decodeInputU32(4),s=this.helper.decodeInputBool(5),o=this.helper.decodeInputU32(6),a=this.helper.decodeInputBool(7),c=this.helper.decodeInputU64(13);return{txType:Ee.Other,type:"AddLiquidity",intentionData:{pool:n,slippage:10,address:e,amountA:t,amountB:r,tickLower:s?-i:i,tickUpper:a?-o:o,deadline:c}}}decodeIncreaseLiquidity(n){console.log(this.helper,"decodeIncreaseLiquidity this.helper");let e=this.helper.decodeSharedObjectId(0),t=this.helper.decodeSharedObjectId(4),r=this.helper.decodeInputU64(5),i=this.helper.decodeInputU64(6),s=this.helper.decodeInputU64(9);return{txType:Ee.Other,type:"IncreaseLiquidity",intentionData:{pool:e,slippage:10,address:n,amountA:r,amountB:i,nft:t,deadline:s}}}decodeDecreaseLiquidity(n){console.log(this.helper,"decodeDecreaseLiquidity this.helper");let e=this.helper.decodeSharedObjectId(0),t=this.helper.decodeSharedObjectId(2),r=this.helper.decodeInputU64(3),i=this.helper.decodeInputU64(4),s=this.helper.decodeInputU64(5),o=this.helper.decodeInputU64(6);return{txType:Ee.Other,type:"DecreaseLiquidity",intentionData:{pool:e,decreaseLiquidity:r,nft:t,amountA:i,amountB:s,slippage:10,address:n,deadline:o}}}decodeCollectFee(){console.log(this.helper,"decodeCollectFee this.helper");let n=this.helper.decodeSharedObjectId(0),e=this.helper.decodeSharedObjectId(2),t=this.helper.decodeInputAddress(5),r=this.helper.decodeInputU64(3),i=this.helper.decodeInputU64(4),s=this.helper.decodeInputU64(6);return{txType:Ee.Other,type:"CollectFee",intentionData:{pool:n,address:t,collectAmountA:r,collectAmountB:i,nft:e,deadline:s}}}decodeCollectReward(){console.log(this.helper,"decodeCollectReward this.helper");let n=this.helper.decodeSharedObjectId(0),e=this.helper.decodeSharedObjectId(2),t=this.helper.decodeInputAddress(6),r=this.collectRewardHelper.map(s=>s.decodeInputU64(5)),i=this.helper.decodeInputU64(7);return{txType:Ee.Other,type:"CollectReward",intentionData:{pool:n,address:t,rewardAmounts:r,nft:e,deadline:i}}}decodeBurn(){console.log(this.helper,"decodeBurn this.helper");let n=this.helper.decodeSharedObjectId(0),e=this.helper.decodeSharedObjectId(2);return{txType:Ee.Other,type:"Burn",intentionData:{pool:n,nft:e}}}decodeRemoveLiquidity(n){console.log(this.helper,"decodeRemoveLiquidity this.helper");let e=this.decreaseLiquidityHelper.decodeSharedObjectId(0),t=this.decreaseLiquidityHelper.decodeSharedObjectId(2),r=this.decreaseLiquidityHelper.decodeInputU64(3),i=this.decreaseLiquidityHelper.decodeInputU64(4),s=this.decreaseLiquidityHelper.decodeInputU64(5),o=this.decreaseLiquidityHelper.decodeInputU64(6),a=this.collectRewardHelper.map(u=>u.decodeInputU64(5)),c=this.collectFeeHelper.decodeInputU64(3)||0,l=this.collectFeeHelper.decodeInputU64(4)||0;return{txType:Ee.Other,type:"RemoveLiquidity",intentionData:{pool:e,decreaseLiquidity:r,nft:t,amountA:i,amountB:s,slippage:10,address:n,collectAmountA:c,collectAmountB:l,rewardAmounts:a,deadline:o}}}decodePrixClaim(){return{txType:Ee.Other,type:"PrixClaim",intentionData:{}}}decodePrixJoin(){return{txType:Ee.Other,type:"PrixJoin",intentionData:{}}}decodeSwapExactBaseForQuote(){let n=this.swapExactBaseForQuoteHelper.decodeSharedObjectId(0),e=this.swapExactBaseForQuoteHelper.decodeInputU64(3),t=this.swapExactBaseForQuoteHelper.shortTypeArg(0),r=this.swapExactBaseForQuoteHelper.shortTypeArg(1);return{txType:Ee.Other,type:"SwapExactBaseForQuote",intentionData:{poolId:n,amountIn:e,token1:t,token2:r}}}decodeSwapExactQuoteForBase(){let n=this.swapExactQuoteForBaseHelper.decodeSharedObjectId(0),e=this.swapExactQuoteForBaseHelper.decodeInputU64(3),t=this.swapExactQuoteForBaseHelper.shortTypeArg(0),r=this.swapExactQuoteForBaseHelper.shortTypeArg(1);return{txType:Ee.Other,type:"SwapExactQuoteForBase",intentionData:{poolId:n,amountIn:e,token1:t,token2:r}}}get helper(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target!=="0x2::coin::zero"&&e.target!=="0x0000000000000000000000000000000000000000000000000000000000000002::coin::zero");return new ml(n,this.txb)}get collectRewardHelper(){return this.transactions.filter(n=>n.kind==="MoveCall"&&n.target===`${this.config.PackageId}::position_manager::collect_reward`).map(n=>new ml(n,this.txb))}get collectFeeHelper(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target===`${this.config.PackageId}::position_manager::collect`);return new ml(n,this.txb)}get decreaseLiquidityHelper(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target===`${this.config.PackageId}::position_manager::decrease_liquidity`);return new ml(n,this.txb)}get swapExactBaseForQuoteHelper(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target===`${Ua.PackageId}::clob_v2::swap_exact_base_for_quote`);return new ml(n,this.txb)}get swapExactQuoteForBaseHelper(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target===`${Ua.PackageId}::clob_v2::swap_exact_quote_for_base`);return new ml(n,this.txb)}},ml=class Zf{constructor(e,t){this.moveCall=e,this.txb=t}decodeSharedObjectId(e){let t=this.getInputParam(e);return Zf.getSharedObjectId(t)}decodeOwnedObjectId(e){let t=this.getInputParam(e);return Zf.getOwnedObjectId(t)}decodeInputU128(e){let t=this.decodePureArg(e,"u128");return Number(t)}decodeInputU64(e){let t=this.decodePureArg(e,"u64");return Number(t)}decodeInputU32(e){let t=this.decodePureArg(e,"u32");return Number(t)}decodeInputU8(e){let t=this.decodePureArg(e,"u8");return Number(t)}decodeInputAddress(e){let t=this.decodePureArg(e,"address");return Et(t)}decodeInputString(e){return this.decodePureArg(e,"string")}decodeInputBool(e){return this.decodePureArg(e,"bool")}decodePureArg(e,t){let r=this.getInputParam(e);return Zf.getPureInputValue(r,t)}getInputParam(e){let t=this.moveCall.arguments[e];if(t.kind!=="Input")throw new Error("not input type");return this.txb.blockData.inputs[t.index]}static getPureInputValue(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value=="object"&&"Pure"in e.value){let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}return e.value}static getOwnedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value=="object"){if(!("Object"in e.value)||!("ImmOrOwned"in e.value.Object))throw new Error("not ImmOrOwned");return Et(e.value.Object.ImmOrOwned.objectId)}return Et(e.value)}static getSharedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value!="object")return Et(e.value);if(!("Object"in e.value)||!("Shared"in e.value.Object))throw new Error("not Shared");return Et(e.value.Object.Shared.objectId)}static getPureInput(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value!="object")return e.value;if(!("Pure"in e.value))throw new Error("Pure not in value");let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}typeArg(e){return nt(this.moveCall.typeArguments[e])}shortTypeArg(e){return this.moveCall.typeArguments[e]}txArg(e){return this.moveCall.arguments[e]}},yY=class g4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient),{pool:i,address:s,amountA:o,amountB:a,slippage:c,tickLower:l,tickUpper:u,deadline:d,txb:h}=this.data;return r.pool.addLiquidity({pool:i,slippage:c,address:s,amountA:o,amountB:a,tickLower:l,tickUpper:u,deadline:d,txb:h})}static fromData(t){return new g4(t)}},bY=class w4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient),{pool:i,nft:s,txb:o}=this.data;return r.nft.burn({pool:i,nft:s,txb:o})}static fromData(t){return new w4(t)}},_Y=class y4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient),{pool:i,address:s,nft:o,collectAmountA:a,collectAmountB:c,deadline:l,txb:u}=this.data;return r.pool.collectFee({pool:i,address:s,collectAmountA:a,collectAmountB:c,nft:o,deadline:l,txb:u})}static fromData(t){return new y4(t)}},vY=class b4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient),{pool:i,address:s,nft:o,rewardAmounts:a,deadline:c,txb:l}=this.data;return r.pool.collectReward({pool:i,address:s,rewardAmounts:a,nft:o,deadline:c,txb:l})}static fromData(t){return new b4(t)}},kY=class _4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient),{fee:i,address:s,tickLower:o,tickUpper:a,sqrtPrice:c,slippage:l,coinTypeA:u,coinTypeB:d,amountA:h,amountB:f,deadline:m,txb:w}=this.data;return r.pool.createPool({fee:i,amountA:h,amountB:f,address:s,tickLower:o,tickUpper:a,sqrtPrice:c,slippage:l,coinTypeA:u,coinTypeB:d,deadline:m,txb:w})}static fromData(t){return new _4(t)}},SY=class v4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient),{pool:i,address:s,amountA:o,amountB:a,slippage:c,nft:l,decreaseLiquidity:u,deadline:d,txb:h}=this.data;return r.pool.decreaseLiquidity({pool:i,slippage:c,address:s,amountA:o,amountB:a,nft:l,decreaseLiquidity:u,deadline:d,txb:h})}static fromData(t){return new v4(t)}},CY=class k4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient),{pool:i,address:s,amountA:o,amountB:a,slippage:c,nft:l,deadline:u,txb:d}=this.data;return r.pool.increaseLiquidity({pool:i,slippage:c,address:s,amountA:o,amountB:a,nft:l,deadline:u,txb:d})}static fromData(t){return new k4(t)}},AY=class S4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new xe;return r.moveCall({target:`${Wa.PackageId}::claim::claim`,typeArguments:[Wa.turbosCoinType],arguments:[r.object(Wa.Claim),r.object(He)]}),r}static fromData(t){return new S4(t)}},TY=class C4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new xe;return r.moveCall({target:`${Wa.PackageId}::claim::join`,typeArguments:[Wa.turbosCoinType],arguments:[r.object(Wa.Claim)]}),r}static fromData(t){return new C4(t)}},IY=class A4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient),i=new xe;return i=await r.pool.collectFee({txb:i,...this.data}),i=await r.pool.collectReward({txb:i,...this.data}),i=await r.pool.decreaseLiquidity({txb:i,...this.data}),i=await r.nft.burn({txb:i,nft:this.data.nft,pool:this.data.pool}),i}static fromData(t){return new A4(t)}},xY=class T4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){console.log(this.data,"this.data");let r=new fs(t.network.replace("sui:",""),t.suiClient),{routes:i,coinTypeA:s,coinTypeB:o,address:a,amountA:c,amountB:l,slippage:u,amountSpecifiedIsInput:d,deadline:h,txb:f}=this.data;return r.trade.swap({routes:i,coinTypeA:s,coinTypeB:o,address:a,amountA:c,amountB:l,amountSpecifiedIsInput:d,slippage:u,deadline:h,txb:f})}static fromData(t){return new T4(t)}},I4=class{constructor(n){this.turbosSdk=n}async getCoinsData(n,e,t){let r=[],i;do i=await this.turbosSdk.provider.getCoins({owner:n,coinType:e,cursor:i==null?void 0:i.nextCursor}),r.push(...i.data);while(i.hasNextPage);let s=[],o=0;return r.sort((a,c)=>Number(c.balance)-Number(a.balance)).some(a=>o>=t?!0:(o+=Number(a.balance),s.push(a),!1)),s}splitAndMergeCoin(n,e,t){if(!n||n.length<1)return[void 0,void 0];if(this.isSuiCoinAddress(n[0].coinType)){let[s]=t.splitCoins(t.gas,[t.pure(e)]);return[s,void 0]}let r=t.object(n[0].coinObjectId);n.length>1&&t.mergeCoins(r,n.slice(1).map(s=>t.object(s.coinObjectId)));let[i]=t.splitCoins(r,[t.pure(e)]);return[i,r]}isSuiCoinAddress(n){return n.toLocaleLowerCase()==="0x2::sui::sui"}async IsAccountCap(n){var t;let e=await this.turbosSdk.provider.getOwnedObjects({owner:n,options:{showContent:!0,showType:!0,showOwner:!0},filter:{StructType:`${Ua.PackageId}::custodian_v2::AccountCap`}});return(t=e.data[0])!=null&&t.data?uh(e.data[0].data):void 0}createAccount(n){let[e]=n.moveCall({typeArguments:[],target:`${Ua.PackageId}::clob_v2::create_account`,arguments:[]});return e}zero(n,e){return e.moveCall({typeArguments:[n],target:"0x2::coin::zero",arguments:[]})}},x4=89,E4=1e6,EY=async n=>{let{token1:e,token2:t,poolId:r,amountIn:i,currentAddress:s,turbosSdk:o}=n,a=new xe,c=new I4(o),l=await c.getCoinsData(s,t,i),[u,d]=c.splitAndMergeCoin(l,i,a);if(!u)throw new Error(`Not enough balance: ${t}`);let h=await c.IsAccountCap(s),f=h?a.object(h):c.createAccount(a),[m,w,y]=a.moveCall({typeArguments:[e,t],target:`${Ua.PackageId}::clob_v2::swap_exact_quote_for_base`,arguments:[a.object(String(r)),a.pure(x4),f,a.pure(i),a.object(Cv("0x6")),u]});return d&&a.transferObjects([d],a.pure(s)),a.transferObjects([m],a.pure(s)),a.transferObjects([w],a.pure(s)),h||a.transferObjects([f],a.pure(s)),a.setSenderIfNotSet(s),a.setGasBudget(E4),a},MY=async n=>{let{token1:e,token2:t,poolId:r,amountIn:i,currentAddress:s,turbosSdk:o}=n,a=new xe,c=new I4(o),l=await c.getCoinsData(s,e,i),[u,d]=c.splitAndMergeCoin(l,i,a);if(!u)throw new Error(`Not enough balance: ${e}`);let h=await c.IsAccountCap(s),f=h?a.object(h):c.createAccount(a),m=c.zero(t,a),[w,y,C]=a.moveCall({typeArguments:[e,t],target:`${Ua.PackageId}::clob_v2::swap_exact_base_for_quote`,arguments:[a.object(String(r)),a.pure(x4),f,a.pure(i),u,m,a.object(Cv("0x6"))]});return d&&a.transferObjects([d],a.pure(s)),a.transferObjects([w],a.pure(s)),a.transferObjects([y],a.pure(s)),h||a.transferObjects([f],a.pure(s)),a.setSenderIfNotSet(s),a.setGasBudget(E4),a},OY=class M4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient);return await MY({...this.data,turbosSdk:r,currentAddress:t.account.address})}static fromData(t){return new M4(t)}},NY=class O4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){let r=new fs(t.network.replace("sui:",""),t.suiClient);return await EY({...this.data,turbosSdk:r,currentAddress:t.account.address})}static fromData(t){return new O4(t)}},jY=class{constructor(){v(this,"application","turbos");v(this,"supportSDK","@mysten/sui.js")}async deserialize(n){let e=new fs(n.network.replace("sui:",""),n.suiClient),t=await e.contract.getConfig(),{transactionBlock:r,account:i}=n;console.log(n,"input");let s=await new wY(r,e,t).decode(i.address);return{txType:Ee.Other,txSubType:s.type,intentionData:s.intentionData}}async build(n){let{suiClient:e,account:t,network:r}=n,i;switch(console.log(n.intentionData,"intentionData"),n.txSubType){case"CreatePool":i=kY.fromData(n.intentionData);break;case"AddLiquidity":i=yY.fromData(n.intentionData);break;case"IncreaseLiquidity":i=CY.fromData(n.intentionData);break;case"DecreaseLiquidity":i=SY.fromData(n.intentionData);break;case"RemoveLiquidity":i=IY.fromData(n.intentionData);break;case"CollectFee":i=_Y.fromData(n.intentionData);break;case"CollectReward":i=vY.fromData(n.intentionData);break;case"Burn":i=bY.fromData(n.intentionData);break;case"Swap":i=xY.fromData(n.intentionData);break;case"PrixJoin":i=TY.fromData(n.intentionData);break;case"PrixClaim":i=AY.fromData(n.intentionData);break;case"SwapExactBaseForQuote":i=OY.fromData(n.intentionData);break;case"SwapExactQuoteForBase":i=NY.fromData(n.intentionData);break;default:throw new Error("not implemented")}return i.build({suiClient:e,account:t,network:r})}},DY={packageId:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",poolObjectId:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",metadataObjectId:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",systemStateObjectId:"0x0000000000000000000000000000000000000000000000000000000000000005",certType:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",gasBudget:5e7},Lr=DY,BY=class{constructor(n){this.txb=n}decode(){if(console.log("txb",this.txb),this.isStakeTransaction())return this.decodeStake();if(this.isUnStakeTransaction())return this.decodeUnStake();if(this.isClaimTicketTransaction())return this.decodeClaimTicket();throw new Error("Unknown transaction type")}get transactions(){return this.txb.blockData.transactions}getMoveCallTransaction(n){return this.transactions.find(e=>e.kind==="MoveCall"&&e.target===n)}isStakeTransaction(){return!!this.getMoveCallTransaction(`${Lr.packageId}::native_pool::stake`)}isUnStakeTransaction(){return!!this.getMoveCallTransaction(`${Lr.packageId}::native_pool::unstake`)}isClaimTicketTransaction(){return!!this.getMoveCallTransaction(`${Lr.packageId}::native_pool::burn_ticket`)}decodeStake(){let n=this.transactions[0].amounts[0].value.toNumber();return{txType:Ee.Other,type:"Stake",intentionData:{amount:n}}}decodeUnStake(){let n=this.transactions.find(e=>e.kind==="SplitCoins").amounts[0].value.toNumber();return{txType:Ee.Other,type:"UnStake",intentionData:{amount:n}}}decodeClaimTicket(){let n=this.helper.decodeOwnedObjectId(2);return console.log(n),{txType:Ee.Other,type:"ClaimTicket",intentionData:{ticketId:n}}}get helper(){let n=this.transactions.find(e=>e.kind==="MoveCall"&&e.target.startsWith(Lr.packageId));return new RY(n,this.txb)}},RY=class Qf{constructor(e,t){this.moveCall=e,this.txb=t}decodeSharedObjectId(e){let t=this.getInputParam(e);return Qf.getSharedObjectId(t)}decodeOwnedObjectId(e){let t=this.getInputParam(e);return Qf.getOwnedObjectId(t)}decodeInputU64(e){let t=this.decodePureArg(e,"u64");return Number(t)}decodeInputU8(e){let t=this.decodePureArg(e,"u8");return Number(t)}decodeInputAddress(e){let t=this.decodePureArg(e,"address");return Et(t)}decodeInputString(e){return this.decodePureArg(e,"string")}decodeInputBool(e){return this.decodePureArg(e,"bool")}decodePureArg(e,t){let r=this.getInputParam(e);return Qf.getPureInputValue(r,t)}getInputParam(e){let t=this.moveCall.arguments[e];if(t.kind!=="Input")throw new Error("not input type");return this.txb.blockData.inputs[t.index]}static getPureInputValue(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value=="object"&&"Pure"in e.value){let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}return e.value}static getOwnedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value=="object"){if(!("Object"in e.value)||!("ImmOrOwned"in e.value.Object))throw new Error("not ImmOrOwned");return Et(e.value.Object.ImmOrOwned.objectId)}return Et(e.value)}static getSharedObjectId(e){if(e.type!=="object")throw new Error(`not object argument: ${JSON.stringify(e)}`);if(typeof e.value!="object")return Et(e.value);if(!("Object"in e.value)||!("Shared"in e.value.Object))throw new Error("not Shared");return Et(e.value.Object.Shared.objectId)}static getPureInput(e,t){if(e.type!=="pure")throw new Error("not pure argument");if(typeof e.value!="object")return e.value;if(!("Pure"in e.value))throw new Error("Pure not in value");let r=e.value.Pure;return sr.de(t,new Uint8Array(r))}typeArg(e){return nt(this.moveCall.typeArguments[e])}txArg(e){return this.moveCall.arguments[e]}},PY=class N4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){console.log(t);let r=new xe,{ticketId:i}=this.data;return r.moveCall({target:`${Lr.packageId}::native_pool::burn_ticket`,arguments:[r.object(Lr.poolObjectId),r.object(Lr.systemStateObjectId),r.object(i)]}),r}static fromData(t){return new N4(t)}},UY=class j4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){console.log(t);let r=new xe,{amount:i}=this.data,[s]=r.splitCoins(r.gas,[r.pure(i)]);return r.moveCall({target:`${Lr.packageId}::native_pool::stake`,arguments:[r.object(Lr.poolObjectId),r.object(Lr.metadataObjectId),r.object(Lr.systemStateObjectId),s]}),r}static fromData(t){return new j4(t)}},FY=class D4 extends An{constructor(t){super(t);v(this,"txType");v(this,"txSubType");this.data=t}async build(t){console.log(t);let r=new xe,{amount:i}=this.data,s=(await t.suiClient.getAllCoins({owner:t.account.address,limit:100})).data,[o,...a]=s.filter(u=>u.coinType.split("::")[0]===Lr.certType.split("::")[0]),c=r.object(o.coinObjectId);a.length&&r.mergeCoins(c,a.map(u=>r.object(u.coinObjectId)));let l=r.splitCoins(r.object(o.coinObjectId),[r.pure(i)]);return r.moveCall({target:`${Lr.packageId}::native_pool::unstake`,arguments:[r.object(Lr.poolObjectId),r.object(Lr.metadataObjectId),r.object(Lr.systemStateObjectId),l]}),r}static fromData(t){return new D4(t)}},LY=class{constructor(){v(this,"application","volo");v(this,"supportSDK","@mysten/sui.js")}async deserialize(n){let{transactionBlock:e}=n,t=new BY(e).decode();return{txType:Ee.Other,txSubType:t.type,intentionData:t.intentionData}}async build(n){let{suiClient:e,account:t}=n,r;switch(n.txSubType){case"Stake":r=UY.fromData(n.intentionData);break;case"UnStake":r=FY.fromData(n.intentionData);break;case"ClaimTicket":r=PY.fromData(n.intentionData);break;default:throw new Error("not implemented")}return r.build({suiClient:e,account:t})}},$Y=QH.fromHelpers([new BH,new WH,new OH,new ZH,new NQ,new jY,new mY,new LY]),VY=class{constructor(){v(this,"_listeners",{})}on(n,e,t=0){this._listeners[n]||(this._listeners[n]=[]),e._priority=t,this._listeners[n].indexOf(e)===-1&&(this._listeners[n].push(e),this._listeners[n].length>1&&this._listeners[n].sort(this.listenerSorter))}listenerSorter(n,e){return n._priority-e._priority}off(n,e){if(this._listeners[n]===void 0)return;if(e===void 0){delete this._listeners[n];return}let t=this._listeners[n].indexOf(e);-1<t&&this._listeners[n].splice(t,1)}trigger(n,e={}){if(typeof n=="string"&&(n={type:n,data:typeof e=="object"&&e!==null?e:{}}),typeof this._listeners[n.type]<"u")for(let t=this._listeners[n.type].length-1;t>=0;t--)this._listeners[n.type][t](n)}destroy(){this._listeners={}}},qY=class extends VY{constructor(e=Math.random()*100|0){super();v(this,"id");v(this,"connected");v(this,"connecting");v(this,"isChild");v(this,"debug");v(this,"supported");v(this,"origin");v(this,"_sendLater");v(this,"iframe");this.id=`BELLHOP:${e}`,this.connected=!1,this.isChild=!0,this.connecting=!1,this.debug=!1,this.origin="*",this._sendLater=[],this.iframe=null,this.receive=this.receive.bind(this)}receive(e){if(this.target===e.source){if(this.logDebugMessage(!0,e),e.data!=="connected"){let t=e.data;if(typeof t=="string")try{t=JSON.parse(t)}catch(r){console.warn("Bellhop error: ",r)}this.connected&&typeof t=="object"&&t.type&&this.trigger(t);return}this.onConnectionReceived(e.data)}}onConnectionReceived(e){if(this.connecting=!1,this.connected=!0,!this.isChild){if(!this.target)return;this.target.postMessage(e,this.origin)}for(let t=0;t<this._sendLater.length;t++){let{type:r,data:i}=this._sendLater[t];this.send(r,i)}this._sendLater.length=0,this.trigger("connected")}connect(e,t="*"){var r;this.connecting||(this.disconnect(),this.connecting=!0,e instanceof HTMLIFrameElement&&(this.iframe=e),this.isChild=e===void 0,this.supported=!0,this.isChild&&(this.supported=window!=e),this.origin=t,window.addEventListener("message",this.receive),this.isChild&&(window===this.target?this.trigger("failed"):(r=this.target)==null||r.postMessage("connected",this.origin)))}disconnect(){this.connected=!1,this.connecting=!1,this.origin="",this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener("message",this.receive)}send(e,t={}){var i;if(typeof e!="string")throw"The event type must be a string";let r={type:e,data:t};this.logDebugMessage(!1,r),this.connecting?this._sendLater.push(r):(i=this.target)==null||i.postMessage(JSON.stringify(r,(s,o)=>typeof o=="bigint"?o.toString():o),this.origin)}fetch(e,t,r={},i=!1){if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";let s=o=>{i&&this.off(o.type,s),t(o)};this.on(e,s),this.send(e,r)}respond(e,t={},r=!1){let i=this,s=async function(o){r&&i.off(o,s),typeof t=="function"?i.send(o.type,await t()):i.send(o.type,t)};this.on(e,s)}logDebugMessage(e=!1,t){this.debug&&typeof this.debug=="function"?console.log({isChild:this.isChild,received:e,message:t}):this.debug&&console.log(`Bellhop Instance (${this.isChild?"Child":"Parent"}) ${e?"Received":"Sent"}`,t)}destroy(){super.destroy(),this.disconnect(),this._sendLater.length=0}get target(){var e;return this.isChild?window.parent:(e=this.iframe)==null?void 0:e.contentWindow}},zY=class{constructor(n,e,t){v(this,"accounts",[]);v(this,"currentAccount");v(this,"bellhop",new qY);v(this,"walletMessageListener");v(this,"onAccountChangeListner");v(this,"version","1.0.0");v(this,"name","MSafe Wallet");v(this,"icon","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQ3IiBoZWlnaHQ9IjE3MCIgdmlld0JveD0iMCAwIDI0NyAxNzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAyLjU5MyAyMy4wMTNDMTA3LjQ5OSAyNi4wNTU4IDExMC43OTQgMzAuODc4NSAxNDAuOTEyIDc5LjEwMzlDMTcyLjQxOSAxMjkuNTUyIDE3My44NjQgMTMyLjExNCAxNzMuODY0IDEzNy41MzZDMTczLjg2NCAxNDIuNDUxIDE3My4zNCAxNDMuNzI1IDE2OS45MTcgMTQ3LjExMkMxNjYuNDc2IDE1MC41MTggMTY1LjIyMiAxNTEuMDE5IDE2MC4xMzggMTUxLjAxOUMxNTUuNTg0IDE1MS4wMTkgMTUzLjUzNiAxNTAuMzc4IDE1MC43OTcgMTQ4LjA5N0MxNDguODY4IDE0Ni40OTEgMTM5Ljg2MiAxMzMuMTc1IDEzMC43ODUgMTE4LjUwOEMxMDMuNzE5IDc0Ljc3NDEgOTAuMDYxIDUzLjE2NzYgODkuNzI2NyA1My41NTQ5Qzg2LjY2ODUgNTcuMTAzMyA3OC42NjEgNzIuMzY1NiA3OC42NjEgNzQuNjQ0M0M3OC42NjEgNzYuNTM4IDg0LjQ0NjMgODcuMzAwNCA5My43MjA1IDEwMi42NThDMTAyLjAwMyAxMTYuMzc0IDEwOS41OTQgMTI5LjUyNCAxMTAuNTg5IDEzMS44ODFDMTE0LjQ2NCAxNDEuMDYyIDEwNy43NTQgMTUxLjAxOSA5Ny42ODc3IDE1MS4wMTlDOTQuODQwOSAxNTEuMDE5IDkxLjIxNTEgMTUwLjE3OCA4OS42MzAzIDE0OS4xNTFDODguMDQ1NSAxNDguMTIyIDgwLjk3OTUgMTM3Ljc4IDczLjkyODcgMTI2LjE2OUM2Ni44Nzc4IDExNC41NTYgNjAuNjc0NSAxMDUuMDU1IDYwLjE0MjggMTA1LjA1NUM1OS42MTEgMTA1LjA1NSA1My42OTMzIDExNC4yMzQgNDYuOTkzMSAxMjUuNDUyQzQwLjI5MjkgMTM2LjY2OSAzMy43MjYyIDE0Ni44MTUgMzIuNDAxNSAxNDcuOTk1QzMxLjA3NjcgMTQ5LjE3NiAyNy43MDYzIDE1MC4zOTYgMjQuOTEyOSAxNTAuNzA5QzE1LjgzODQgMTUxLjcyMSA5IDE0NS44NzggOSAxMzcuMTFDOSAxMzIuODQyIDkuMDQ4NzYgMTMyLjc1MiA0My41MzU2IDc0LjAyOTVDNTcuODI1NCA0OS42OTczIDcxLjIyMTIgMjguMDc5MyA3My4zMDQxIDI1Ljk4OTFDODEuMDc3MSAxOC4xODc5IDkyLjg4IDE2Ljk4OTQgMTAyLjU5MyAyMy4wMTNaTTE2Ni45MDEgMjMuMDIzM0MxNzAuMzA4IDI2LjQ4MjEgMjMzLjQ5OSAxMjcuMTE2IDIzNS40NDcgMTMyLjE4NUMyMzguMjU4IDEzOS41MDQgMjM1LjI3NyAxNDYuMzEyIDIyNy42NjUgMTQ5Ljk2QzIyMy41NDcgMTUxLjkzMyAyMjIuMDczIDE1Mi4xMSAyMTguMjQ1IDE1MS4wODlDMjE1Ljc0OSAxNTAuNDI0IDIxMi44NjYgMTQ4Ljk2IDIxMS44MzggMTQ3LjgzNUMyMTAuODA5IDE0Ni43MSAxOTQuNzk2IDEyMS41IDE3Ni4yNTMgOTEuODExOEMxNDAuMDU0IDMzLjg1NyAxNDAuMDQ0IDMzLjgzNTIgMTQ0LjI3NCAyNS43Mzk4QzE0OC4yNjMgMTguMTAxNyAxNjAuNTk0IDE2LjYyMjggMTY2LjkwMSAyMy4wMjMzWiIgZmlsbD0iIzQ4QjVBNyIvPgo8L3N2Zz4K");v(this,"chains",[Z8,K8]);v(this,"features",{"standard:connect":{version:"1.0.0",connect:async()=>{this.bellhop.send("connect");let n=await this.fetch("account");return this.accounts=n,n.length>0&&(this.currentAccount=n[0]),{accounts:n}}},"standard:events":{version:"1.0.0",on:n=>()=>{}},"sui:signMessage":{version:"1.0.0",signMessage:async()=>{throw new Error("No impl")}},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:async()=>{throw new Error("No impl")}},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:async n=>this.proposeIntention(n)},"sui:signAndExecuteTransactionBlock":{version:"1.0.0",signAndExecuteTransactionBlock:async n=>this.proposeIntention(n)}});this.appName=n,this.clientUrl=e,this.network=t,this.bellhop.connect(),this.bellhop.on("walletMessage",async r=>{this.walletMessageListener&&this.walletMessageListener.onMessage(r.data)}),this.bellhop.on("accountChange",async r=>{this.currentAccount=r.data,console.log("🚀 ~ MSafeWallet ~ this.bellhop.on ~ currentAccount:",this.currentAccount),this.onAccountChangeListner&&this.onAccountChangeListner.onAccountChange(this.currentAccount)})}setWalletMessageListener(n){this.walletMessageListener=n}setOnAccountChangeListener(n){this.onAccountChangeListner=n}static inMSafeWallet(){return typeof window<"u"&&typeof document<"u"&&typeof parent<"u"&&typeof parent.window<"u"&&parent.window!==window}async proposeIntention(n){if(!this.currentAccount)throw new Error("Wallet not connected");let e=await $Y.getAppHelper(this.appName).deserialize({...n,clientUrl:this.clientUrl,network:this.network,account:this.currentAccount});this.bellhop.send("proposeIntention",{application:this.appName,...e});let t;return this.bellhop.on("cancel",async()=>{t&&t("User canceled")}),new Promise((r,i)=>{t=i})}async fetch(n){return new Promise(e=>{this.bellhop.fetch(n,t=>{e(t.data)})})}};const WY=Vr({setup(n){const e=Le(()=>zY.inMSafeWallet()),t=Vs(),r=Le(()=>t),i=Sv();let s=Fe(!1);const o=xw(),a=vv(),{t:c,locale:l}=cu(),u=[{id:"Sui",name:"Sui",env:"",network:"Mainnet"},{id:"Aptos",name:"Aptos",env:"",network:"Mainnet"}],d=[{name:c("contactUS.docs"),icon:"#icon-svg-docs",link:"https://cetus-1.gitbook.io/cetus-docs/"},{name:c("contactUS.twitter"),icon:"#icon-svg-twitter",link:"https://twitter.com/cetusprotocol"},{name:c("contactUS.discord"),icon:"#icon-svg-Discord",link:"https://discord.gg/cetusprotocol"},{name:c("contactUS.tgChannel"),icon:"#icon-svg-tg",link:"https://t.me/cetusprotocol"},{name:c("contactUS.medium"),icon:"#icon-svg-medium",link:"https://medium.com/@CetusProtocol"}],h=wr(),f=Fe(""),m=Le(()=>h);let w=Fe(m.value.chainName||"Aptos");const y=Ov();Ew(()=>{var x,p,g;const U=(g=(p=(x=o==null?void 0:o.currentRoute)==null?void 0:x.value)==null?void 0:p.query)==null?void 0:g.language;U&&q(U);const Y=localStorage.getItem("theme");!Y||Y==="sui"?y.selectSuiTheme():Y==="sui2"?y.selectSui2Theme():y.seleteDefaultTheme(),document.addEventListener("click",()=>{m.value.setOpenH5Icon(!1),m.value.setOpenSwitchChain(!1),m.value.setOpenMore(!1),m.value.setIsShowMore(!1),m.value.setOpenSwitchLang(!1),m.value.setIsShowHeaderMore(!1)}),f.value=l.value,A()});const C=()=>{o.push("/")},A=()=>{window.setInterval(()=>{d[0].name=c("contactUS.docs"),d[1].name=c("contactUS.twitter"),d[2].name=c("contactUS.discord"),d[3].name=c("contactUS.tgChannel"),d[4].name=c("contactUS.medium")},1e3)};ns(()=>h.lang,U=>{f.value=U});const M=Le(()=>m.value.chainName?nr[m.value.chainName]:{}),H=U=>{var Y,x,p,g,k,T,O,L,W,P,_,F,I,z,ie,le,he,_e,Ce,ge,Oe,Ie,Ne,Ut,Mr,Ft,Ot,Or,Ct,pt,br,Nt,yt,Kr,D,b,S,$,te,se,ce,Pe,jt,Xe,tt,St,Gt,Yt,Ws,Xt,Jt,Ks,en,tn,Zs,nn;w.value!==U.id&&(i.setChainPoolConfigList([]),h.setPositiomAmount("--")),w.value!=U.id&&(w.value=U.id,U.id=="Aptos"?(y.seleteDefaultTheme(),t.setCurrentWallet({wallet:r.value.aptosCurrentWallet,isConnected:r.value.aptosConnected,account:r.value.aptosAddress,platform:"Aptos",icon:r.value.aptosWalletIcon})):U.id=="Sui"?(y.selectSuiTheme(),t.setCurrentWallet({wallet:r.value.suiCurrentWallet,isConnected:r.value.suiConnected,account:r.value.suiAddress,platform:"Sui",icon:r.value.suiWalletIcon})):U.id==="Sui2"&&(y.selectSui2Theme(),t.setCurrentWallet({wallet:r.value.suiCurrentWallet,isConnected:r.value.suiConnected,account:r.value.suiAddress,platform:"Sui",icon:r.value.suiWalletIcon})),(((x=(Y=o==null?void 0:o.currentRoute)==null?void 0:Y.value)==null?void 0:x.name)==="position-detail-id"||((g=(p=o==null?void 0:o.currentRoute)==null?void 0:p.value)==null?void 0:g.name)==="position-detail"||((T=(k=o==null?void 0:o.currentRoute)==null?void 0:k.value)==null?void 0:T.name)==="remove-liquidity"||((L=(O=o==null?void 0:o.currentRoute)==null?void 0:O.value)==null?void 0:L.name)==="increase-liquidity"||((P=(W=o==null?void 0:o.currentRoute)==null?void 0:W.value)==null?void 0:P.name)==="pool-position"||((F=(_=o==null?void 0:o.currentRoute)==null?void 0:_.value)==null?void 0:F.name)==="new-position-detail"||((z=(I=o==null?void 0:o.currentRoute)==null?void 0:I.value)==null?void 0:z.name)==="xcetus")&&o.push("/pools"),((le=(ie=o==null?void 0:o.currentRoute)==null?void 0:ie.value)==null?void 0:le.name)==="deposit"&&U.id=="Sui"&&o.push("/pool/list"),((_e=(he=o==null?void 0:o.currentRoute)==null?void 0:he.value)==null?void 0:_e.name)==="deposit"&&U.id=="Aptos"&&o.push("/pools"),((ge=(Ce=o==null?void 0:o.currentRoute)==null?void 0:Ce.value)==null?void 0:ge.name)==="pools"&&U.id=="Cetus"&&o.push("/pool-list"),((Ie=(Oe=o==null?void 0:o.currentRoute)==null?void 0:Oe.value)==null?void 0:Ie.name)==="pool/list"&&U.id=="Aptos"&&o.push("/pools"),((Ut=(Ne=o==null?void 0:o.currentRoute)==null?void 0:Ne.value)==null?void 0:Ut.name)==="new-position-detail"&&U.id=="Aptos"&&o.push("/pools"),((Ft=(Mr=o==null?void 0:o.currentRoute)==null?void 0:Mr.value)==null?void 0:Ft.name)==="new-position-detail"&&U.id=="Sui"&&o.push("/pool/list"),((Or=(Ot=o==null?void 0:o.currentRoute)==null?void 0:Ot.value)==null?void 0:Or.name)==="pool-position"&&U.id=="Aptos"&&o.push("/position"),((pt=(Ct=o==null?void 0:o.currentRoute)==null?void 0:Ct.value)!=null&&pt.path.includes("/liquidity/deposit")||(Nt=(br=o==null?void 0:o.currentRoute)==null?void 0:br.value)!=null&&Nt.path.includes("/liquidity/position")||(Kr=(yt=o==null?void 0:o.currentRoute)==null?void 0:yt.value)!=null&&Kr.path.includes("/liquidity/analytics")||(b=(D=o==null?void 0:o.currentRoute)==null?void 0:D.value)!=null&&b.path.includes("/liquidity/create")||($=(S=o==null?void 0:o.currentRoute)==null?void 0:S.value)!=null&&$.path.includes("/vaults-detail")||(se=(te=o==null?void 0:o.currentRoute)==null?void 0:te.value)!=null&&se.path.includes("/pool/vaults")||(Pe=(ce=o==null?void 0:o.currentRoute)==null?void 0:ce.value)!=null&&Pe.path.includes("/vaults")||(Xe=(jt=o==null?void 0:o.currentRoute)==null?void 0:jt.value)!=null&&Xe.path.includes("/farms"))&&U.id=="Aptos"&&o.replace("/pools"),((St=(tt=o==null?void 0:o.currentRoute)==null?void 0:tt.value)!=null&&St.path.includes("/liquidity/deposit")||(Yt=(Gt=o==null?void 0:o.currentRoute)==null?void 0:Gt.value)!=null&&Yt.path.includes("/liquidity/position")||(Xt=(Ws=o==null?void 0:o.currentRoute)==null?void 0:Ws.value)!=null&&Xt.path.includes("/liquidity/analytics")||(Ks=(Jt=o==null?void 0:o.currentRoute)==null?void 0:Jt.value)!=null&&Ks.path.includes("/liquidity/create")||(tn=(en=o==null?void 0:o.currentRoute)==null?void 0:en.value)!=null&&tn.path.includes("/pools"))&&U.id=="Sui"&&o.push("/pool/list"),((nn=(Zs=o==null?void 0:o.currentRoute)==null?void 0:Zs.value)==null?void 0:nn.name)==="swap"&&o.push("/swap"))},{setLang:G}=h,q=U=>{G(U),l.value=U},X=()=>{h.setIsSelect("head"),m.value.setOpenSwitchChain(!m.value.openSwitchChain),m.value.setOpenMore(!1),m.value.setOpenSwitchLang(!1),m.value.setOpenH5Icon(!1),m.value.setIsShowSetting(!1),m.value.setIsShowMore(!1),m.value.setIsShowNotifi(!1),m.value.setIsShowHeaderMore(!1),r.value.setIsShowWalletCard(!1)};ns(()=>m.value.isSelect,U=>{U!=="head"&&m.value.setOpenSwitchChain(!1)},{immediate:!0});const E=Le(()=>{if(m.value.chainName&&m.value.chainName.toLowerCase().includes("sui")){const U=m.value.chainName.split("2");return console.log("🚀🚀🚀 ~ file: head.vue:498 ~ chainName ~ arr[0]:",U[0]),U[0]}return console.log("🚀🚀🚀 ~ file: head.vue:501 ~ chainName ~ store.value.chainName:",m.value.chainName),m.value.chainName}),j=Fe(!1),R=Le(()=>m.value.openSwitchChain);return{hasNotifi:Le(()=>{var U;return console.log("🚀🚀🚀 ~ file: head.vue:510 ~ hasNotifi ~ chainName.value:",E.value),(U=nr[E.value])==null?void 0:U.hasNotifi}),configure:nr,openNotification:j,openSwitch:X,changeChain:H,currentChain:w,chainList:u,store:m,isRequestCoins:s,importIcon:Zt,list:d,gotoHome:C,changeLang:q,langList:Jd,counter:h,config:M,chainName:E,openSwitchChain:R,route:a,wallet:r,isInMsafeWallet:e}}});const Lu=n=>(Ri("data-v-3e8de783"),n=n(),Pi(),n),KY={key:0},ZY={key:0,class:"tips"},QY=Lu(()=>N("img",{src:TE,alt:""},null,-1)),HY=Lu(()=>N("span",null,"Devnet environment is being upgraded. Services can not be accessed temporarily.",-1)),GY=[QY,HY],YY={class:"header-con"},XY={class:"left"},JY={class:"menu-right"},eX=["src"],tX={class:"chain-name"},nX=Lu(()=>N("svg",{"aria-hidden":"true",class:"icon"},[N("use",{"xlink:href":"#icon-icon_on"})],-1)),rX={key:0,class:"list"},iX=["onClick"],sX=["src"],oX={class:"name"},aX=["src"],cX={key:1},lX=Lu(()=>N("div",{class:"info-icon"},[N("svg",{"aria-hidden":"true",class:"icon"},[N("use",{"xlink:href":"#icon-icon_message"})])],-1)),uX=Lu(()=>N("div",{class:"current-lang"},[N("svg",{"aria-hidden":"true",class:"icon"},[N("use",{"xlink:href":"#icon-icon_set"})])],-1)),dX=Lu(()=>N("svg",{"aria-hidden":"true",class:"icon"},[N("use",{"xlink:href":"#icon-icon-menu1"})],-1)),hX=[dX];function fX(n,e,t,r,i,s){var u,d;const o=SU,a=LF,c=T9,l=d7;return((d=(u=n.$route)==null?void 0:u.name)==null?void 0:d.indexOf("403"))>=0?ye("",!0):(ne(),re("header",KY,[n.store.theme=="sui"&&n.configure&&n.configure.network=="devnet"?(ne(),re("div",ZY,GY)):ye("",!0),N("div",YY,[N("div",XY,[N("div",{class:"logo",onClick:e[0]||(e[0]=(...h)=>n.gotoHome&&n.gotoHome(...h))}),rn(o)]),N("div",JY,[n.isInMsafeWallet?ye("",!0):(ne(),re("div",{key:0,class:"swaichChain",onClick:e[1]||(e[1]=vt((...h)=>n.openSwitch&&n.openSwitch(...h),["stop"]))},[N("div",{class:Ge(n.openSwitchChain?"text rodegText":"text")},[N("img",{src:("importIcon"in n?n.importIcon:ft(Zt))(`/image/${n.chainName.toLowerCase()}.png`),alt:""},null,8,eX),N("span",tX,Se(n.chainName),1),nX],2),n.store.openSwitchChain?(ne(),re("div",rX,[N("p",null,Se(n.$t("common.switchChain")),1),(ne(!0),re(qn,null,rr(n.chainList,h=>(ne(),re("div",{key:h.id,class:Ge(h.id==n.chainName?`item-container item-${n.chainName.toLocaleLowerCase()}-active-container`:`item-container item-${n.chainName.toLocaleLowerCase()}-active-container`)},[N("div",{class:"item",onClick:f=>n.changeChain(h)},[N("div",null,[N("img",{src:("importIcon"in n?n.importIcon:ft(Zt))(`/image/${h.name.toLowerCase()}.png`),alt:""},null,8,sX),N("span",oX,Se(h.name),1)]),h.id==n.chainName?(ne(),re("img",{key:0,class:"current-chain",src:n.chainName=="Sui"?"/sui-image/icon-selected@3x.png":"/image/aptos-icon-selected@3x.png"},null,8,aX)):ye("",!0)],8,iX)],2))),128))])):ye("",!0)])),n.isInMsafeWallet?ye("",!0):(ne(),re("div",cX,[rn(a)])),n.hasNotifi?(ne(),re("div",{key:2,class:"noti-fication",onClick:e[4]||(e[4]=vt(()=>{n.store.setOpenH5Icon(!1),n.store.setOpenSwitchChain(!1),n.store.setOpenSwitchLang(!1),n.store.setIsShowMore(!1),n.store.setOpenMore(!1),n.store.setIsShowSetting(!1),n.store.setIsShowHeaderMore(!1),n.store.setIsShowNotifi(!n.store.isShowNotifi),n.wallet.setIsShowWalletCard(!1)},["stop"]))},[lX,n.store&&n.store.isShowNotifi?(ne(),ar(c,{key:0,"open-notification":n.store&&n.store.isShowNotifi,onOpenOpenNotification:e[2]||(e[2]=()=>{n.store.setIsShowNotifi(!1)}),onCloseOpenNotification:e[3]||(e[3]=()=>{n.store.setIsShowNotifi(!1)})},null,8,["open-notification"])):ye("",!0)])):ye("",!0),N("div",{class:"switch-lang",onClick:e[6]||(e[6]=vt(()=>{n.store.setIsShowSetting(!n.store.isShowSetting),n.store.setOpenH5Icon(!1),n.store.setOpenSwitchChain(!1),n.store.setOpenMore(!1),n.store.setIsShowMore(!1),n.store.setOpenSwitchLang(!1),n.store.setIsShowHeaderMore(!1),n.store.setIsShowNotifi(!1),n.wallet.setIsShowWalletCard(!1)},["stop"]))},[uX,n.store.isShowSetting?(ne(),ar(l,{key:0,onOnClose:e[5]||(e[5]=h=>n.store.setIsShowSetting(!1))})):ye("",!0)]),N("div",{class:"img-box",onClick:e[7]||(e[7]=vt(()=>{n.store.setOpenMore(!1),n.store.setOpenSwitchChain(!1),n.store.setOpenSwitchLang(!1),n.store.setIsShowMore(!1),n.store.setIsShowNotifi(!1),n.store.setIsShowSetting(!1),n.store.setOpenH5Icon(!n.store.openH5Icon)},["stop"]))},hX)])])]))}const BJ=xr(WY,[["render",fX],["__scopeId","data-v-3e8de783"]]);export{BJ as C,zY as M,TE as _,NX as a,jX as b,DX as c,BX as d,LX as e,$X as f,VX as g,qX as h,zX as i,WX as j,KX as k,Q2 as u};
