import{a as me,r as q,s as wt,m as _,A as ne,b as Je,e as he,l as nt,o as h,f as O,h as t,i as B,q as lt,I as Ae,M as rt,p as Ce,k as Ne,u as Y,x as T,j as se,w as oe,P as ct,N as it,G as Z,F as De,E as ze,B as Le,c as le,$ as yt,z as ut,y as et,fi as Pt,D as dt,Y as It,C as St,O as At}from"./entry.6a22eb5c.js";/* empty css              */import{u as Ye}from"./useCurrentPosition.8d88aa01.js";import{u as qe}from"./pool.60377385.js";import{u as $t}from"./token.26574884.js";import{u as je,b as $e,C as vt,o as Ze,T as tt}from"./index.931efb95.js";import{c as ae,g as xt,n as Tt,d as Te,o as Ct,b as Ue,a as ve,h as ie,p as xe}from"./common.27d82c7e.js";import{a as mt,u as fe,b as ye,h as Nt,c as Lt}from"./index.3e36085b.js";import{u as qt}from"./usePoolList.21545b61.js";import{_ as Bt}from"./back.43869507.js";import{I as Mt}from"./icon-slippage.c9da944c.js";import{I as Rt}from"./icon-refresh.8f0034d5.js";/* empty css              */import{s as Oe,m as Ft,l as Ot,b as Ut,a as Dt}from"./transform.c672907f.js";import"./decimal.a2826370.js";import{D as Q}from"./decimal.765d8738.js";import{l as zt,a as jt}from"./linearClosed.d07a7d12.js";import{C as re}from"./coin-img-warning.f9b4b4f3.js";import{N as ft,I as He}from"./input-lock.6dd114d1.js";import{P as _t}from"./pos-current-price.e5da79cb.js";import{N as Wt}from"./sui-position-range.e1b7acd4.js";import{s as Ge}from"./formatter.9c9178e2.js";import{u as pt}from"./useRate.6dddd94a.js";import{u as Et}from"./useSDK.2049b8d7.js";import{S as ht}from"./select-tab.e1258d08.js";import{T as Xe}from"./token-input-block.bee24991.js";/* empty css              *//* empty css              */import{i as gt}from"./import-icon.de3e6c66.js";import{u as Vt}from"./notifi.6712e44b.js";import{_ as Ht}from"./apr-tips.dd6a8cd2.js";import{u as Gt}from"./farms.aa2b2844.js";import"./usePositionList.00eabe69.js";import"./useToken.caa279df.js";import"./fetchFun.ff4aae28.js";import"./swap-setting.dc194858.js";/* empty css              */import"./icon-error_2x.cd11996c.js";import"./coin-img.9d5359f8.js";import"./lock.35e1d915.js";import"./index.f5eaad7a.js";import"./token-dropdown-select.47b3739e.js";import"./useDebounceFunction.cce0e05a.js";import"./useWhale.e61c8414.js";import"./icon_fee_2x.6caceffc.js";import"./icon_rewards_2x.1b1dab77.js";const Xt=me({components:{IconSlippage:Mt,IconRefresh:Rt},props:{poolInfo:{type:Object,default:()=>({})}},setup(e,M){const m=q(!1),V=q(null),S=q(0),i=q(20),U=mt(),f=fe(),C=q(!1);wt(()=>{clearInterval(V.value)});const n=()=>{V.value=setInterval(()=>{var z;C.value||S.value<i.value&&(S.value+=1,S.value===i.value&&((z=e==null?void 0:e.poolInfo)!=null&&z.poolAddress&&U.updateCurrentPools(e.poolInfo.poolAddress,f.chainName),S.value=0))},1e3)},D=_(()=>f.slippage),s=()=>{M.emit("clearAll")},a=q(!1),l=()=>{S.value=0,a.value=!0,M.emit("clickRefresh"),setTimeout(()=>{a.value=!1},1e3)};ne(()=>e.poolInfo,z=>{z&&!V.value&&n()},{immediate:!0});const u=Je(),R=_(()=>f.chainName);return{clickRefresh:l,isShowSwapSetting:m,countdown:S,autoRefreshTime:i,slippage:D,clearAll:s,checkNullObj:ae,router:u,loading:C,chainName:R,refresh:a}}});const Jt={class:"new-position-title"},Yt={class:"left"},Qt={class:"right"};function Kt(e,M,m,V,S,i){const U=Bt,f=nt("IconSlippage"),C=nt("IconRefresh");return h(),O("div",Jt,[t("div",Yt,[B(U)]),t("div",Qt,[B(f),B(C,{refresh:e.refresh,onClickRefresh:e.clickRefresh},null,8,["refresh","onClickRefresh"])])])}const Zt=he(Xt,[["render",Kt],["__scopeId","data-v-5e7ee742"]]);function st(e,M,m){const V=new Q(10).pow(M-m);return new Q(1.0001).pow(e).mul(V)}const eo=me({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,coinA:{decimal:6},coinB:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,M){const m=q(1),V=q(""),S=q(""),i=_(()=>{var o,g,d;return s.sqrtPriceX64ToPrice((o=e.poolInfo)==null?void 0:o.current_sqrt_price,(g=e.poolInfo)==null?void 0:g.coinA.decimals,(d=e.poolInfo)==null?void 0:d.coinB.decimals).toString()}),U=_(()=>{let o=0;return e.direction?o=(Number(e.minPrice)/Number(i.value)-1)*100:o=(Number(e.minPrice)/Number(1/Number(i.value))-1)*100,o=o>0&&o<.1?.1:o,o=o<0&&o>-.1?-.1:o,o}),f=_(()=>{let o=0;return e.direction?o=(Number(e.maxPrice)/Number(i.value)-1)*100:o=(Number(e.maxPrice)/Number(1/Number(i.value))-1)*100,o=o>0&&o<.1?.1:o,o=o<0&&o>-.1?-.1:o,o}),C=fe(),n=_(()=>C),D=_(()=>n.value.chainName?ye(n.value.chainName):{}),{TickMath:s,getNearestTickByTick:a}=D.value,l=()=>{const o=m.value/2;m.value=o,z(e.poolInfo,o)},u=()=>{const o=m.value*2;m.value=o,z(e.poolInfo,o)},R=(o=[])=>{let g=6;const d=Math.abs(Number(o[0])-Number(o[o.length-1]));return d>=6?g=0:d>=1?g=1:d>=.1?g=2:d>=.01?g=3:d>=.001?g=4:d>=1e-4?g=5:d>=1e-5?g=6:d>=1e-6?g=7:d>=1e-7&&(g=8),g},z=(o,g=1)=>{if(o&&o.coinA&&!e.chartLoading&&e.minPrice&&e.maxPrice){const d=Number(e.poolInfo.current_tick_index);let A=d+100*g,E=d-100*g,J,I;if(e.maxPrice==="âˆž")I=D.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?I=s.priceToTickIndex(new Q(e.maxPrice),e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals):I=s.priceToTickIndex(new Q(1).div(e.minPrice),e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals)}catch{I=443636}if(e.minPrice==="0")J=D.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?J=s.priceToTickIndex(new Q(e.minPrice),e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals):J=s.priceToTickIndex(new Q(1).div(e.maxPrice),e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals)}catch{J=-443636}let F=0;if(e.currentPriceTab!=="full range"){if(d>=J&&d<=I){const r=d-J,k=I-d;F=Math.max(Math.abs(r),Math.abs(k))}else d<J?F=Math.abs(I-d):F=Math.abs(d-J);A=d+F+20*g,E=d-F-20*g}else{const r=(Math.abs(d)>5e3,2e4);A=d+r*g,E=d-r*g}E<-443636&&(E=-443636),A>443636&&(A=443636);const y=new Q(o.poolLiquidity).div(Math.pow(10,8)).toString(),p=e.tickList,$=[],v=[];let c={};for(let r=0;r<p.length;r++){if(c=p[r],c.index<=d&&c.index>=E){if($.length<1&&r!==0){const k=p[r-1];$.unshift({...k,index:E})}$.unshift(c)}else if(c.index>d&&c.index<=A&&(v.push(c),$.length<1&&r!==0)){const k=p[r-1];$.push({...k,index:E})}if(c.index>A){const k=p[r];if(v.push({...k,index:A}),$.length<1&&r!==0){const X=p[r-1];$.push({...X,index:E})}break}}let G="0";for(let r=$.length-1;r>=0;r--)G=new Q(G).plus(new Q($[r].liquidityNet.toString()).div(Math.pow(10,8))).toString(),$[r].liquityAmount=G;let P=y;for(let r=0;r<v.length;r++)P=new Q(P).plus(new Q(v[r].liquidityNet.toString()).div(Math.pow(10,8))).toString(),v[r].liquityAmount=P;let b=[];const x=p&&p.length>0?{index:d,liquityAmount:Number(y)}:{index:d,liquityAmount:0};($.length>0||v.length>0)&&(b=[...$.reverse(),x,...v],e.direction||(b=b.reverse()));const ee=[];p.forEach(r=>{ee.push({...r,liquidityGross:r.liquidityGross.toString(),liquidityNet:r.liquidityNet.toString()})}),W(b,E,A,J,I,d)}};let N=q(!0);lt(()=>{document.body.clientWidth<750?N.value=!1:N.value=!0,window.onresize=()=>{document.body.clientWidth<750?N.value=!1:N.value=!0,z(e.poolInfo,m.value)}});const W=(o,g,d,A,E,J)=>{let I,F;e.direction?(I=e.before7dContractPriceLowest?s.priceToTickIndex(new Q(e.before7dContractPriceLowest),e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals):"",F=e.before7dContractPriceHighest?s.priceToTickIndex(new Q(e.before7dContractPriceHighest),e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals):""):(I=e.before7dContractPriceLowest?s.priceToTickIndex(new Q(1).div(e.before7dContractPriceLowest),e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals):"",F=e.before7dContractPriceHighest?s.priceToTickIndex(new Q(1).div(e.before7dContractPriceHighest),e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals):"");const y={top:30,right:35,bottom:20,left:55};let p,$;N.value?(p=590-y.left-y.right,$=205-y.top-y.bottom):(p=340-y.left-y.right,$=205-y.top-y.bottom);const v=d-g,c=parseInt(String(v/4));let G=[g+c/4,g+c,g+2*c,d-c,d-c/4];const P=g,b=d,x=p/(b-P);e.currentPriceTab==="full range"&&(G=[g,g+2*c,d]);const ee=G.map(L=>e.direction?st(L,e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals).toString():new Q(1).div(st(L,e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals)).toString());R(ee),Oe("#chart").selectAll("*").remove();const r=Oe("#chart").attr("width",p+y.left+y.right).attr("height",$+y.top+y.bottom).append("g").attr("transform",`translate(${y.left},${y.right})`),k=Ft(o,function(L){return Number(Math.abs(L.liquityAmount))})||0,X=Ot().range([0,$]).domain([k,0]);Ut().rangeRound([0,p]).padding(.1);const te=r.append("g").attr("id","barsBox").selectAll("rect").data(o).enter().append("rect");n.value.theme=="default"?te.attr("x",function(L,j){return j===0?0:e.direction?Math.abs(L.index-P)*x:Math.abs(b-L.index)*x}).attr("y",function(L,j){return e.direction?j===o.length-1?0:X(L.liquityAmount):j===o.length-1?0:X(o[j+1].liquityAmount)}).attr("width",function(L,j){return j===0&&o.length===1&&L.liquityAmount>0?p:(e.direction,j!==o.length-1?Math.abs(o[j+1].index-L.index)*x:0)}).attr("height",function(L,j){return j===0&&o.length===1&&L.liquityAmount>0?$:e.direction?j===o.length-1?0:$-X(L.liquityAmount):j===o.length-1?0:$-X(o[j+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):te.attr("x",function(L,j){return j===0?0:e.direction?Math.abs(L.index-P)*x:Math.abs(b-L.index)*x}).attr("y",function(L,j){return e.direction?j===o.length-1?0:X(Math.abs(L.liquityAmount)):j===o.length-1?0:X(Math.abs(o[j+1].liquityAmount))}).attr("width",function(L,j){return j===0&&o.length===1&&L.liquityAmount>0?p:(e.direction,j!==o.length-1?Math.abs(o[j+1].index-L.index)*x:0)}).attr("height",function(L,j){if(j===0&&o.length===1&&L.liquityAmount>0)return $;if(e.direction)return j===o.length-1?0:Number(L.liquityAmount)?$-X(Math.abs(L.liquityAmount)):0;{if(j===o.length-1)return 0;const _e=$-X(Math.abs(o[j+1].liquityAmount));return Number(o[j+1].liquityAmount)?_e:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const K=r.append("g");K.append("line").attr("x1",0).attr("y1",155).attr("x2",p).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D"),K.append("g");let ue=0;e.direction?ue=Math.abs(J-P)*x:ue=Math.abs(J-b)*x,(n.value.theme=="default"?r.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):r.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+ue+", 0)"),Oe("#triangle").attr("width",8).attr("height",4);let Me=[[0,0],[4,4],[8,0]],Re=zt().x(function(L){return L[0]}).y(function(L){return L[1]}).curve(jt);const Ie=ue-4;r.append("path").attr("d",Re(Me)).style("fill",n.value.theme=="default"?"#68FFD8":"#76C8FF").attr("transform","translate("+Ie+", 0)");let ce,de,Se,ge;e.direction?(ce=A<P?-100:parseInt(String(Math.abs(A-P)*x)),de=E<P?-100:parseInt(String(Math.abs(E-P)*x)),Se=I<P?-100:Math.abs(I-P)*x,ge=F<P?-100:Math.abs(F-P)*x):(de=A<P?-100:Math.abs(b-A)*x,ce=E<P?-100:Math.abs(b-E)*x,ge=I<P?-100:Math.abs(b-I)*x,Se=F<P?-100:Math.abs(b-F)*x),e.minPrice==="0"&&(ce=0),e.maxPrice==="âˆž"&&(de=p),N.value?V.value=p-ce+60+"px":V.value=p-ce+52+"px",S.value=de+74+"px",I&&Se<p&&r.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Se+", 0)"),F&&ge<p&&r.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ge+", 0)");const Fe=Dt().extent([[0,0],[p,$]]).handleSize(30).on("end",Ve);r.append("g").attr("class","brush").call(Fe).call(Fe.move,[ce,de]);function Ve(L){if(!L.sourceEvent||!L.selection)return;N.value?V.value=p-L.selection[0]+60+"px":V.value=p-L.selection[0]+52+"px",S.value=L.selection[1]+74+"px";let j,_e,be=0,ke=0;e.direction?(be=a(parseInt(String(L.selection[0]/x+P)),Number(e.poolInfo.tickSpacing)),j=s.tickIndexToPrice(be,e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals).toString(),ke=a(parseInt(String(L.selection[1]/x+P)),Number(e.poolInfo.tickSpacing)),_e=s.tickIndexToPrice(ke,e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals).toString()):(ke=a(b-L.selection[0]/x,Number(e.poolInfo.tickSpacing)),j=1/s.tickIndexToPrice(ke,e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals).toString(),be=a(b-L.selection[1]/x,Number(e.poolInfo.tickSpacing)),_e=1/s.tickIndexToPrice(be,e.poolInfo.coinA.decimals,e.poolInfo.coinB.decimals).toString()),M.emit("onChangeMinPrice",String(Te(String(j),6))),M.emit("onChangeMaxPrice",String(Te(String(_e),6)))}n.value.theme=="default"?Oe(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):Oe(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","rgba(255,255,255,0.7)")};q(""),ne(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.tickList],([o,g,d,A,E])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-chart.vue:1125 ~ dataProcessing ~ poolInfo:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-chart.vue:1126 ~ dataProcessing ~ tickList:",E),console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-chart.vue:1126 ~ dataProcessing ~ currentPriceTab:",A),console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-chart.vue:1126 ~ dataProcessing ~ maxPrice:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-chart.vue:1126 ~ dataProcessing ~ minPrice:",g),o&&g&&d&&A&&E&&E.length>0&&(A!=="Custom"&&console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-chart.vue:1131 ~ dataProcessing ~ dataProcessing:"),z(o,m.value))},{immediate:!0});const w=q(!0);return ne(()=>e.chartLoading,(o,g)=>{o!==g&&(w.value=o)},{immediate:!0,deep:!0}),{store:n,loading:w,zoomOut:l,zoomIn:u,rangeSizeLower:U,rangeSizeUpper:f,rangeSizeLowerPosition:V,rangeSizeUpperPosition:S,decimalFormat:xt,numberformat:Tt}}});const to=e=>(Ce("data-v-70d71659"),e=e(),Ne(),e),oo={class:"chart-box"},no={class:"chart"},io=to(()=>t("svg",{id:"chart"},null,-1)),so=[io];function ao(e,M,m,V,S,i){return h(),O("div",oo,[Ae(t("div",no,so,512),[[rt,!e.loading]])])}const lo=he(eo,[["render",ao],["__scopeId","data-v-70d71659"]]),We=e=>(Ce("data-v-7b2bc3df"),e=e(),Ne(),e),ro={class:"new-position-info"},co={class:"pool-info"},uo={class:"info"},vo={class:"coin-logo"},mo={class:"name-fee"},fo={class:"name-copy"},_o=["href"],po=We(()=>t("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),ho=[po],go={class:"pool-fee"},bo=We(()=>t("span",null,"Fee tier",-1)),ko={class:"price-info"},wo={class:"price-and-chart"},yo={class:"top"},Po={class:"position-range position-range-warp"},Io=We(()=>t("span",{class:"position-range-title"}," Position Range ",-1)),So={class:"bottom"},Ao=We(()=>t("div",{class:"chat-mask"},null,-1)),$o={class:"lever"},xo={class:"lever-title"},To=We(()=>t("div",{class:"tit"},[t("span",null," Leverage "),t("svg",{"aria-hidden":"true",class:"icon"},[t("use",{"xlink:href":"#icon-icon_tips"})])],-1)),Co={class:"lever-text"},No=me({__name:"sui-position-info",setup(e){const M=qe(),m=_(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-info.vue:643 ~ currentPositionInfo ~ suiPoolStore.currentPositionInfo:",M.currentPositionInfo),M.currentPositionInfo)),V=_(()=>M.poolsObj),S=fe(),i=_(()=>S.currentExplorer);q(!0);const U=(s,a)=>s!=="0"&&a!=="âˆž"?Ue(1/(1-Number((s/a)**.25)),2)+"x":"1x",f=_(()=>{var s,a,l;return(s=m==null?void 0:m.value)!=null&&s.minPrice&&m.value.maxPrice?U((a=m==null?void 0:m.value)==null?void 0:a.minPrice,(l=m==null?void 0:m.value)==null?void 0:l.maxPrice):"--"}),C=ye("Sui"),n=q([]),D=async s=>{const{list:a}=await C.getTicks(s),l=a?C.getTickDataFromUrlData(a):[];console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-info.vue:593 ~ resetTickList ~ list:",l),n.value=l};return ne(()=>[m.value,V.value],([s,a])=>{s&&!ae(s)&&a&&!ae(a)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-info.vue:417 ~ poolsObj:",a),console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-info.vue:418 ~ newValue:",s),D(a[s.pool]))},{immediate:!0}),(s,a)=>{var u,R,z,N,W,w,o;const l=ct;return h(),O("div",ro,[t("div",co,[t("div",uo,[t("div",vo,[B(re,{"token-info":(u=m.value)==null?void 0:u.coinA},null,8,["token-info"]),B(re,{"token-info":(R=m.value)==null?void 0:R.coinB},null,8,["token-info"])]),t("div",mo,[t("div",fo,[t("a",{class:"position-name",href:Y(Ct)(i.value,"nftAddress",(z=m.value)==null?void 0:z.nftHash),target:"_blank"},T((N=m.value)==null?void 0:N.positionName),9,_o),(h(),O("svg",{class:"copy-icon","aria-hidden":"true",onClick:a[0]||(a[0]=g=>{var d;return Y(S).copy((d=m.value)==null?void 0:d.nftHash)})},ho))]),t("div",go,[bo,se(" "+T((W=m.value)==null?void 0:W.feeRate),1)])])]),B(ft,{"position-info":m.value},null,8,["position-info"])]),t("div",ko,[t("div",wo,[t("div",yo,[B(_t,{"pool-info":m.value},null,8,["pool-info"]),t("div",Po,[Io,B(Wt,{"position-info":m.value},null,8,["position-info"])])]),t("div",So,[B(lo,{"pool-info":m.value,"tick-list":n.value,"min-price":(w=m.value)==null?void 0:w.minPrice,"max-price":(o=m.value)==null?void 0:o.maxPrice,"current-price-tab":"custom","chart-loading":!1},null,8,["pool-info","tick-list","min-price","max-price"]),Ao,t("div",$o,[t("div",xo,[B(l,{"overlay-class-name":"lever-tooltip ant-tooltip-text-color"},{title:oe(()=>[se("This parameter indicates the concentration rate of your liquidity relative to a full range position.")]),default:oe(()=>[To]),_:1})]),t("div",Co,T(f.value),1)])])])])])}}});const Lo=he(No,[["__scopeId","data-v-7b2bc3df"]]),Be=e=>(Ce("data-v-4e4aa12e"),e=e(),Ne(),e),qo={class:"liquidity-card-box"},Bo={class:"liquidity-title"},Mo={class:"liquidity-usd"},Ro=Be(()=>t("span",null,"Liquidity",-1)),Fo={class:"liquidity-ratio"},Oo={class:"coin-ratio"},Uo={class:"coin-a-ratio"},Do={class:"coin-b-ratio"},zo={class:"ratio-progress"},jo={class:"base-quote-num"},Wo={class:"base-coin-num"},Eo=Be(()=>t("span",null,"Base",-1)),Vo={class:"token-amount"},Ho={key:0,class:"after"},Go={class:"quote-coin-num"},Xo=Be(()=>t("span",null,"Quote",-1)),Jo={class:"token-amount"},Yo={key:0,class:"after"},Qo={class:"pending-yield"},Ko={class:"left"},Zo=Be(()=>t("div",{class:"pending-yield-title"},"Pending Yield",-1)),en={key:0,class:"after"},tn={class:"right"},on={class:"fees-rewards"},nn={class:"fees-rewards-item"},sn=Be(()=>t("span",null,"Fees",-1)),an={class:"token-amount"},ln={key:0,class:"after"},rn=Be(()=>t("span",null,"Mining Rewards",-1)),cn={class:"token-amount"},un={key:0,class:"after"},dn=me({__name:"sui-position-liquidity",setup(e){const M=fe(),m=je(),V=_(()=>m),S=qe(),i=_(()=>S.currentPositionInfo),U=_(()=>{var A;return S.positionPendingFees[(A=i==null?void 0:i.value)==null?void 0:A.positionId]}),f=_(()=>{var A;return S.positionPendingRewards[(A=i==null?void 0:i.value)==null?void 0:A.positionId]}),C=_(()=>{var E,J,I,F;let A=ie(0);return(E=U==null?void 0:U.value)!=null&&E.feesAmountUSD&&(A=A.add((J=U.value)==null?void 0:J.feesAmountUSD)),(I=f==null?void 0:f.value)!=null&&I.rewardsAmount&&(A=A.add((F=f.value)==null?void 0:F.rewardsAmount)),A.toNumber()}),n=q(!1),{setIsShowSuccess:D,setIsShowRejected:s,setIsShowWaiting:a,setTransactionDesc:l,setTransactionTxid:u}=M,R=ye("Sui"),{getCurrentPosition:z}=Ye(),N=async()=>{var E,J;console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-liquidity.vue:1233 ~ claimFeesAndRewards ~ currentPositionInfo.value:",i.value),n.value=!0;let A={coinTypeA:i.value.defaultCoinaAddress,coinTypeB:i.value.defaultCoinbAddress,coinTypeC:"",coinTypeD:"",coinTypeE:"",pool_address:i.value.pool,pos_index:i.value.positionIndex,rewarder_nums:f.value.rewarderAmountOwed.length,collect_fee:!0};A.coinTypeC=f.value.rewarderAmountOwed[0]?f.value.rewarderAmountOwed[0].tokenInfo.address:"",A.coinTypeD=f.value.rewarderAmountOwed[1]?f.value.rewarderAmountOwed[1].tokenInfo.address:"",A.coinTypeE=f.value.rewarderAmountOwed[2]?f.value.rewarderAmountOwed[2].tokenInfo.address:"",a(!0),l();try{let I;A.pos_index=i.value.pos_object_id;const F=await R.getCollectRewarderTransactionPayload(A,i.value),y=await R.signAndExecuteTransactionBlock(V.value.currentWallet,F.txb,F.payloadParams);if(I=R.handleTx(y),I&&I.hash){u(I.hash),a(!1),D(!0);const p={title:"Claim",desc:"",hash:I.hash,tit:"Rewards Claimed",icon:"icon-icon-Removed"};p.res=I.res,R.showTransitionPending(p),await R.watchTransaction(p)&&(z((E=i==null?void 0:i.value)==null?void 0:E.positionId,(J=i==null?void 0:i.value)==null?void 0:J.positionSource),setTimeout(()=>{R.getAccount(V.value.address),n.value=!1},3e3))}else console.log("0310###toClaimRewards###else###"),a(!1),s(!0),n.value=!1}catch(I){console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-liquidity.vue:1225 ~ claimFeesAndRewards ~ error:",I),a(!1),s(!0),n.value=!1}},W=_(()=>S.positionDetailCurrentTab),w=_(()=>S.positionActionFromCoinAmount),o=_(()=>S.positionActionToCoinAmount),g=_(()=>{if(W.value=="increase")return w.value>0?ie(i.value.coinaAmount).add(ie(w.value)).toString():"";if(w.value>0){const A=ie(i.value.coinaAmount).minus(ie(w.value)).toString();return A<0?"0":A}else return""}),d=_(()=>{if(W.value=="increase")return o.value>0?ie(i.value.coinbAmount).add(ie(o.value)).toString():"";if(o.value>0){const A=ie(i.value.coinbAmount).minus(ie(o.value)).toString();return A<0?"0":A}else return""});return(A,E)=>{var I,F,y,p,$,v,c,G,P,b,x,ee,r,k,X,H,te;const J=Le;return h(),O("div",qo,[t("div",Bo,[t("div",Mo,[Ro,t("div",null,"$"+T((I=i.value)==null?void 0:I.positionAmountUSD),1)]),t("div",Fo,[t("div",Oo,[t("div",Uo,[B(re,{"token-info":(F=i.value)==null?void 0:F.coinA,"coin-size":"20px","warning-coin-size":"10px"},null,8,["token-info"]),t("span",null,T((p=(y=i.value)==null?void 0:y.coinA)==null?void 0:p.symbol),1),t("span",null,T(($=i.value)==null?void 0:$.fromPercent)+"%",1)]),t("div",Do,[B(re,{"token-info":(v=i.value)==null?void 0:v.coinB,"coin-size":"20px","warning-coin-size":"10px"},null,8,["token-info"]),t("span",null,T((G=(c=i.value)==null?void 0:c.coinB)==null?void 0:G.symbol),1),t("span",null,T((P=i.value)==null?void 0:P.toPercent)+"%",1)])]),t("div",zo,[t("div",{class:"from-percent",style:it({width:((b=i.value)==null?void 0:b.fromPercent)+"%"})},null,4),t("div",{class:"to-percent",style:it({width:((x=i.value)==null?void 0:x.toPercent)+"%"})},null,4)])])]),t("div",jo,[t("div",Wo,[Eo,t("div",Vo,[B(re,{"token-info":(ee=i.value)==null?void 0:ee.coinA,"coin-size":"20px","warning-coin-size":"10px"},null,8,["token-info"]),t("span",null,T(Y(ve)(Y(Te)((r=i.value)==null?void 0:r.coinaAmount))),1)]),g.value?(h(),O("div",Ho,T(Y(ve)(g.value))+" after ",1)):Z("",!0)]),t("div",Go,[Xo,t("div",Jo,[B(re,{"token-info":(k=i.value)==null?void 0:k.coinB,"coin-size":"20px","warning-coin-size":"10px"},null,8,["token-info"]),t("span",null,T(Y(ve)(Y(Te)((X=i.value)==null?void 0:X.coinbAmount))),1)]),d.value?(h(),O("div",Yo,T(Y(ve)(d.value))+" after ",1)):Z("",!0)])]),t("div",Qo,[t("div",Ko,[Zo,t("div",null,[se(" $"+T(C.value>0&&C.value<.01?"<0.01":Y(ve)(C.value,2))+" ",1),C.value>0?(h(),O("span",en,"$0 after")):Z("",!0)])]),t("div",tn,[B(J,{class:"claim-all",loading:n.value,disabled:n.value||C.value==0,onClick:N},{default:oe(()=>[se("Claim")]),_:1},8,["loading","disabled"])])]),t("div",on,[t("div",nn,[(h(!0),O(De,null,ze((H=U.value)==null?void 0:H.feesList,K=>(h(),O("div",{key:K},[sn,t("div",an,[B(re,{"token-info":K.tokenInfo,"coin-size":"20px","warning-coin-size":"10px"},null,8,["token-info"]),t("span",null,T(Y(Ge)(K.amount,"",K.tokenInfo.decimals)),1)]),(g.value||d.value)&&!Y(ae)(i.value)?(h(),O("div",ln," 0 after ")):Z("",!0)]))),128)),(h(!0),O(De,null,ze((te=f.value)==null?void 0:te.rewarderAmountOwed,K=>(h(),O("div",{key:K},[rn,t("div",cn,[B(re,{"token-info":K.tokenInfo,"coin-size":"20px","warning-coin-size":"10px"},null,8,["token-info"]),t("span",null,T(Y(Ge)(K.amount,"",K.tokenInfo.decimals)),1)]),(g.value||d.value)&&!Y(ae)(i.value)?(h(),O("div",un," 0 after ")):Z("",!0)]))),128))])])])}}});const at=he(dn,[["__scopeId","data-v-4e4aa12e"]]);function bt(){const e=qe();_(()=>e.currentPositionInfo);const M=fe(),m=_(()=>M.slippage),{getTransactionBlock:V}=Nt("Sui"),S=Et(),i=(f,C,n,D,s,a,l=0,u=0)=>{const R=new $e(f),z=!0,{coinAmountA:N,coinAmountB:W}=vt.estLiquidityAndcoinAmountFromOneAmounts(n,D,R,C,z,Ze(m.value).div(100).toNumber(),new $e(s)),w=a?u:l,o=a?l:u;return{tokenMaxA:a?xe(W.toString(),o):xe(N.toString(),w),tokenMaxB:a?xe(N.toString(),w):xe(W.toString(),o),tokenMaxAOrigin:a?W.toString():N.toString(),tokenMaxBorigin:a?N.toString():W.toString()}};return{preAdd:i,getAddLiquidityTransactionPayload:async(f,C,n,D,s,a,l,u="",R="",z="")=>{const N=await S.clmmSdk.Pool.getPool(s),{coinTypeA:W,coinTypeB:w}=N;console.log("ðŸš€ðŸš€ðŸš€ ~ file: usePositionIncrease.ts:69 ~ getAddLiquidityTransactionPayload ~ contratcPoolInfo:",N);const o=tt.sqrtPriceX64ToTickIndex(new $e(N.current_sqrt_price));let g,d;if(o>=n&&o<=D){const{tokenMaxAOrigin:I,tokenMaxBorigin:F}=i(f,C,n,D,N.current_sqrt_price,a);console.log("ðŸš€ðŸš€ðŸš€ ~ file: usePositionIncrease.ts:91 ~ getAddLiquidityTransactionPayload ~ tokenMaxBorigin:",F),console.log("ðŸš€ðŸš€ðŸš€ ~ file: usePositionIncrease.ts:91 ~ getAddLiquidityTransactionPayload ~ tokenMaxAOrigin:",I),g=C?f:a?F:I,d=C?a?I:F:f}else o>D?(g=0,d=f):o<n&&(g=f,d=0);let A=[];if(u){const{rewarder_infos:I}=N;A=I.map(F=>F.coinAddress)}let E,J;if(l==="clmm"){const I={coinTypeA:W,coinTypeB:w,amount_a:g,amount_b:d,pool_id:s,fix_amount_a:C,slippage:Ze(m.value).div(100).toNumber(),is_open:!u,tick_lower:n,tick_upper:D,collect_fee:!!u,rewarder_coin_types:A,pos_id:R};console.log("ðŸš€ðŸš€ðŸš€ ~ file: usePositionIncrease.ts:98 ~ getAddLiquidityTransactionPayload ~ parameter:",I);const F={slippage:Ze(m.value).div(100).toNumber(),curSqrtPrice:new $e(N.current_sqrt_price)};E=await S.clmmSdk.Position.createAddLiquidityFixTokenPayload(I,F),J={action:u?"IncreaseLiquidity":"",txbParams:{parameter:I,gasEstimateArg:F}}}else{const I={pool_id:z,coinTypeA:W,coinTypeB:w,clmm_pool_id:s,amount_a:g,amount_b:d,fix_amount_a:C,tick_lower:n,tick_upper:D};console.log("ðŸš€ðŸš€ðŸš€ ~ file: usePositionIncrease.ts:127 ~ getAddLiquidityTransactionPayload ~ parameter:",I),E=await S.peripherySdk.Farms.openPositionAddLiquidityStakePaylod(I),J={action:"FarmingOpenAndAddLiquidity",txbParams:I}}return{txb:V(E),payloadParams:J}}}}const Qe=e=>(Ce("data-v-01fcf13a"),e=e(),Ne(),e),vn=Qe(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),mn={class:"modal-content"},fn={class:"pool-info"},_n={class:"left"},pn={class:"pool-name"},hn={class:"right"},gn={class:"coin-info"},bn={class:"from-coin-info"},kn={class:"left"},wn={class:"coin-amount"},yn={class:"coin-symbol"},Pn={class:"right"},In={class:"to-coin-info"},Sn={class:"left"},An={class:"coin-amount"},$n={class:"coin-symbol"},xn={class:"right"},Tn={class:"select-range"},Cn=Qe(()=>t("div",{class:"select-range-title"},"Selected Range",-1)),Nn={class:"price-conent"},Ln={class:"current-price"},qn={class:"price-range-block-content"},Bn={class:"price-range-block"},Mn={class:"price-item"},Rn={class:"title"},Fn={class:"price"},On={key:0,class:"text"},Un={key:1,class:"text"},Dn={class:"price-item"},zn={class:"title"},jn={class:"price"},Wn={key:0,class:"text"},En={key:1,class:"text"},Vn={class:"modal-block"},Hn=Qe(()=>t("div",{class:"label"},"Deposit Ratio",-1)),Gn={class:"text"},Xn={class:"modal-block"},Jn=Qe(()=>t("div",{class:"label"},"Total Amount",-1)),Yn={class:"text"},Qn=me({__name:"increase-liquidity-modal",props:{fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fixedFromCoin:{type:Boolean,default:!0},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},positionTotalAmount:{type:Number,default:0},currentPositionInfo:{type:Object,default:()=>({})},totalAmount:{type:String,default:""}},emits:["toAdd"],setup(e,{emit:M}){const m=M,V=q(!0),S=()=>{m("toAdd")};return(i,U)=>{const f=Le;return h(),le(Y(yt),{width:"440px",visible:!0,footer:null,title:"Increase",onCancel:U[0]||(U[0]=C=>i.$emit("onClose"))},{closeIcon:oe(()=>[vn]),default:oe(()=>{var C,n,D,s,a,l;return[t("div",mn,[t("div",fn,[t("div",_n,[B(re,{"token-info":e.currentPositionInfo.coinA,"coin-size":"28px","warning-coin-size":"12px"},null,8,["token-info"]),B(re,{"token-info":e.currentPositionInfo.coinB,"coin-size":"28px","warning-coin-size":"12px"},null,8,["token-info"]),t("div",pn,[t("span",null,T(e.currentPositionInfo.coinA.symbol)+"Â -Â ",1),t("span",null,T(e.currentPositionInfo.coinB.symbol),1)])]),t("div",hn,[se(" Fee tier "),t("span",null,T(e.currentPositionInfo.feeRate),1)])]),t("div",gn,[t("div",bn,[t("div",kn,[t("div",wn,T(Y(ve)(e.fromCoinAmount)||0),1),t("div",yn,T(e.currentPositionInfo.coinA.symbol),1)]),t("div",Pn,[B(re,{"token-info":e.currentPositionInfo.coinA,"coin-size":"28px","warning-coin-size":"12px"},null,8,["token-info"])])]),t("div",In,[t("div",Sn,[t("div",An,T(Y(ve)(e.toCoinAmount)||0),1),t("div",$n,T(e.currentPositionInfo.coinB.symbol),1)]),t("div",xn,[B(re,{"token-info":e.currentPositionInfo.coinB,"coin-size":"28px","warning-coin-size":"12px"},null,8,["token-info"])])])]),t("div",Tn,[Cn,B(ft,{"position-info":e.currentPositionInfo},null,8,["position-info"])]),t("div",Nn,[t("div",Ln,[B(_t,{"pool-info":e.currentPositionInfo},null,8,["pool-info"])]),t("div",qn,[t("div",Bn,[t("div",Mn,[t("div",Rn,T(i.$t("common.minPrice")),1),t("p",Fn,T(e.currentPositionInfo.minPrice),1),V.value?(h(),O("div",On,T(e.currentPositionInfo.coinB.symbol)+" per "+T(e.currentPositionInfo.coinA.symbol),1)):(h(),O("div",Un,T(e.currentPositionInfo.coinA.symbol)+" per "+T(e.currentPositionInfo.coinB.symbol),1))]),t("div",Dn,[t("div",zn,T(i.$t("common.maxPrice")),1),t("p",jn,T(e.currentPositionInfo.maxPrice),1),V.value?(h(),O("div",Wn,T(e.currentPositionInfo.coinB.symbol)+" per "+T(e.currentPositionInfo.coinA.symbol),1)):(h(),O("div",En,T(e.currentPositionInfo.coinA.symbol)+" per "+T(e.currentPositionInfo.coinB.symbol),1))])])])]),t("div",Vn,[Hn,t("div",Gn,T((C=e.currentPositionInfo)==null?void 0:C.fromPercent)+"% "+T((D=(n=e.currentPositionInfo)==null?void 0:n.coinA)==null?void 0:D.symbol)+" / "+T((s=e.currentPositionInfo)==null?void 0:s.toPercent)+"% "+T((l=(a=e.currentPositionInfo)==null?void 0:a.coinB)==null?void 0:l.symbol),1)]),t("div",Xn,[Jn,t("div",Yn,T(e.totalAmount),1)]),B(f,{class:"big-btn",onClick:S},{default:oe(()=>[se(T("Increase Liquidity"))]),_:1})])]}),_:1})}}});const Kn=he(Qn,[["__scopeId","data-v-01fcf13a"]]),Zn={class:"new-position-asset-add-box"},ei={class:"add-or-remove"},ti={class:"tab-box"},oi={key:0,class:"from-lock"},ni={key:1,class:"to-lock"},ii={key:2,class:"new-sui-exchange to-add-logo"},si=t("div",{class:"exchange-new"},[t("svg",{class:"icon icon-down","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_add1"})])],-1),ai=[si],li={class:"amount-btn"},ri={key:2,class:"total-amount"},ci=t("span",null,"Total Amount",-1),ui=me({__name:"sui-position-asset-add",setup(e){const M=q(!0),m=q(!1),V=[{name:"Increase",logo:""},{name:"Remove",logo:""}],{t:S}=ut(),{getTokenRatePrice:i}=pt(),U=je(),f=_(()=>U),C=qe(),n=_(()=>C.currentPositionInfo),D=fe();_(()=>D.slippage);const s=q(),a=q(),l=q(),u=q(),R=q(!0),z=_(()=>f.value.assets&&s.value&&f.value.assets[s.value.address]?xe(f.value.assets[s.value.address].balance,s.value.decimals):0),N=_(()=>f.value.assets&&a.value&&f.value.assets[a.value.address]?xe(f.value.assets[a.value.address].balance,a.value.decimals):0),W=_(()=>n.value.isResever),w=q(),o=q(),{preAdd:g,getAddLiquidityTransactionPayload:d}=bt(),{getCurrentPosition:A}=Ye(),E=()=>{var de;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-asset-add-box-add.vue:1021 ~ updateAmounts ~ updateAmounts:"),!n.value||!l.value&&!u.value)return;const r=R.value?l.value:u.value,k=R.value?s.value.decimals:a.value.decimals,X=ie(r).mul(Q.pow(10,k)).toString(),H=(de=n.value)!=null&&de.isReverse?!R.value:R.value,te=n.value.tickLowerIndex,K=n.value.tickUpperIndex,ue=n.value.current_sqrt_price,Ee=s.value.decimals,Me=a.value.decimals,Re=n.value.isReverse,{tokenMaxA:Ie,tokenMaxB:ce}=g(X,H,te,K,ue,Re,Ee,Me);console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-add.vue:859 ~ updateAmounts ~ tokenMaxA, tokenMaxB:",Ie,ce),R.value?u.value=ce:l.value=Ie,C.setPositionActionAmount({fromCoinAmount:l,toCoinAmount:u})};ne(()=>n.value,r=>{if(r&&!ae(r)){s.value=r.coinA,a.value=r.coinB,console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-asset-add-box-add.vue:872 ~ newVal:",r);const{tickLowerIndex:k,tickUpperIndex:X,current_tick_index:H,maxPrice:te}=r;console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-add.vue:882 ~ currentTick,tickLower,tickUpper:",H,k,X),te=="âˆž"||H>=k&&H<X?(w.value=!1,o.value=!1):H>=X?(l.value="",w.value=!0,o.value=!1):H<k?(w.value=!1,o.value=!0,u.value=""):(w.value=!0,l.value="",o.value=!0,u.value=""),E()}},{immediate:!0}),ne(l,(r,k)=>{r&&E(),r==""&&(u.value="")}),ne(u,(r,k)=>{r&&E(),r==""&&(l.value="")});const J=_(()=>{var X,H,te,K;const r=i((X=s==null?void 0:s.value)==null?void 0:X.address,l==null?void 0:l.value,(H=s==null?void 0:s.value)==null?void 0:H.decimals),k=i((te=a==null?void 0:a.value)==null?void 0:te.address,u==null?void 0:u.value,(K=a==null?void 0:a.value)==null?void 0:K.decimals);if(r!=="--"&&k!=="--"){const ue=ie(r).add(k);return Ge(ue.toString())}return"--"}),I=_(()=>{const r=Number(l.value)>Number(z.value),k=Number(u.value)>Number(N.value);return!l.value&&!u.value?S("button.enterAmount"):r?S("button.insufficientBalance",{name:s.value.symbol}):k?S("button.insufficientBalance",{name:a.value.symbol}):S("newAdd.addMore")}),F=_(()=>{const r=Number(l.value)>Number(z.value),k=Number(u.value)>Number(N.value);return!!(!l.value&&!u.value||r||k)}),y=q(!1),p=q(!1),{setTransactionTxid:$,setTransactionDesc:v,setIsShowWaiting:c,setIsShowRejected:G,setIsShowSuccess:P}=D,b=_(()=>D.chainName),x=_(()=>b.value?ye(b.value):{}),ee=async()=>{var ge,Fe,Ve,L,j,_e,be,ke,ot;y.value=!1,p.value=!0,$("");const r=w.value?"":`${l.value} ${(ge=s.value)==null?void 0:ge.symbol}`,k=o.value?"":`${u.value} ${(Fe=a.value)==null?void 0:Fe.symbol}`;v(S("tips.increaseLiquiditySuccess",{from:W.value?k:r,and:!w.value&&!o.value?"and":"",to:W.value?r:k})),c(!0);const X=R.value?l.value:u.value,H=R.value?s.value.decimals:a.value.decimals,te=ie(X).mul(Q.pow(10,H)).toString(),K=(Ve=n.value)!=null&&Ve.isReverse?!R.value:R.value,ue=n.value.pool,{tickLowerIndex:Ee,tickUpperIndex:Me,isReverse:Re,positionIndex:Ie,positionId:ce,positionSource:de,farm_pool_id:Se}=n.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-add.vue:408 ~ toAdd ~ currentPositionInfo.value:",n.value);try{const pe=await d(te,K,Ee,Me,ue,Re,de,Ie,ce,Se);let we;const kt=await x.value.signAndExecuteTransactionBlock(f.value.currentWallet,pe==null?void 0:pe.txb,pe==null?void 0:pe.payloadParams);if(we=x.value.handleTx(kt),console.log("toAdd###tx###",we),we&&we.hash){$(we.hash),c(!1),P(!0);const Ke={title:"Supplied",desc:S("tips.addLiquiditySuccessText",{from:w.value?"":`${W.value?u.value:l.value} ${W.value?(j=a==null?void 0:a.value)==null?void 0:j.symbol:(L=s.value)==null?void 0:L.symbol}`,and:!w.value&&!o.value?"and":"",to:o.value?"":`${W.value?l.value:u.value} ${W.value?(be=s==null?void 0:s.value)==null?void 0:be.symbol:(_e=a.value)==null?void 0:_e.symbol}`}),hash:we.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deopsit ${w.value?"":`${l.value} ${(ke=s.value)==null?void 0:ke.symbol}`} ${!w.value&&!o.value?"and":""} ${o.value?"":`${u.value} ${(ot=a.value)==null?void 0:ot.symbol}`}`};Ke.res=we.res,x.value.showTransitionPending(Ke),console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-add.vue:1089 ~ toAdd ~ contract:",x),await x.value.watchTransaction(Ke)&&setTimeout(()=>{A(n.value.positionId,n.value.positionSource),x.value.getAccount(f.value.address)},1e3)}else c(!1),G(!0);l.value="",u.value="",p.value=!1}catch(pe){console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-add.vue:1103 ~ toAdd ~ error:",pe),l.value="",u.value="",p.value=!1,c(!1),G(!0)}};return(r,k)=>{const X=Le;return h(),O("div",Zn,[t("div",ei,[t("div",ti,[B(Y(ht),{"tab-list":V,"current-tab":"Increase",onOnClick:k[0]||(k[0]=H=>{H.name=="Remove"&&Y(C).setPositionDetailCurrentTab("remove")})})]),t("div",{class:et(["card-container",[M.value?"input-block-add-top":"",m.value?"input-block-add-bottom":""]])},[B(Xe,{modelValue:l.value,"onUpdate:modelValue":k[1]||(k[1]=H=>l.value=H),"input-value":l.value,"token-info":s.value||null,"has-arrow":!1,onOnInput:k[2]||(k[2]=H=>{l.value=H,R.value=!0}),onOnFocus:k[3]||(k[3]=()=>{M.value=!0,m.value=!1})},null,8,["modelValue","input-value","token-info"]),B(Xe,{modelValue:u.value,"onUpdate:modelValue":k[4]||(k[4]=H=>u.value=H),"input-value":u.value,"token-info":a.value||null,"has-arrow":!1,onOnInput:k[5]||(k[5]=H=>{u.value=H,R.value=!1}),onOnFocus:k[6]||(k[6]=()=>{M.value=!1,m.value=!0})},null,8,["modelValue","input-value","token-info"]),w.value?(h(),O("div",oi,[B(He,{"from-coin":s.value,"to-coin":a.value},null,8,["from-coin","to-coin"])])):Z("",!0),o.value?(h(),O("div",ni,[B(He,{"from-coin":s.value,"to-coin":a.value},null,8,["from-coin","to-coin"])])):Z("",!0),!w.value&&!o.value?(h(),O("div",ii,ai)):Z("",!0)],2)]),t("div",li,[f.value.connected?(h(),le(X,{key:0,class:"big-btn liquidity-btn",disabled:F.value,loading:r.actionLoading,onClick:k[7]||(k[7]=H=>y.value=!0)},{default:oe(()=>[t("span",null,T(I.value),1)]),_:1},8,["disabled","loading"])):(h(),le(X,{key:1,class:"big-btn",onClick:k[8]||(k[8]=H=>f.value.connected?y.value=!0:f.value.setIsShowWalletModal(!0))},{default:oe(()=>[t("span",null,T(r.$t("button.connectWallet")),1)]),_:1})),f.value.connected?(h(),O("div",ri,[ci,t("span",null,T(J.value),1)])):Z("",!0)]),y.value?(h(),le(Kn,{key:0,"current-position-info":n.value,"show-from-coin-lock":w.value,"show-to-coin-lock":o.value,"from-coin-amount":l.value,"to-coin-amount":u.value,"total-amount":J.value,onOnClose:k[9]||(k[9]=H=>y.value=!1),onToAdd:ee},null,8,["current-position-info","show-from-coin-lock","show-to-coin-lock","from-coin-amount","to-coin-amount","total-amount"])):Z("",!0)])}}});const di={class:"new-position-asset-remove-box"},vi={class:"add-or-remove"},mi={class:"tab-box"},fi={key:0,class:"assets-card-mask-from"},_i={key:1,class:"assets-card-mask-to"},pi={class:"remove-ratio"},hi=t("div",{class:"remove-ratio-title"},"Amount",-1),gi={class:"remove-ratio-select"},bi={key:0,class:"ratio"},ki={key:1,class:"ratio"},wi={class:"ratio-list"},yi=["onClick"],Pi=me({__name:"sui-position-asset-remove",setup(e){const M=q(!0),m=q(!1),V=[{name:"Increase",logo:""},{name:"Remove",logo:""}],{t:S}=ut(),{getTokenRatePrice:i}=pt(),U=je(),f=_(()=>U),C=qe(),n=_(()=>C.currentPositionInfo),D=fe();_(()=>D.slippage);const s=q(),a=q(),l=q(),u=q(),R=q(!0),z=_(()=>{var v;return Te(n==null?void 0:n.value.coinaAmount,(v=n==null?void 0:n.value.coinA)==null?void 0:v.decimals)}),N=_(()=>{var v;return Te(n==null?void 0:n.value.coinbAmount,(v=n==null?void 0:n.value.coinB)==null?void 0:v.decimals)});_(()=>n.value.isResever);const W=q(),w=q(),{preAdd:o,getAddLiquidityTransactionPayload:g}=bt();Ye();const d=()=>{var K;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-asset-add-box-add.vue:1021 ~ updateAmounts ~ updateAmounts:"),!n.value||!l.value&&!u.value)return;const v=R.value?l.value:u.value,c=R.value?s.value.decimals:a.value.decimals,G=ie(v).mul(Q.pow(10,c)).toString(),P=(K=n.value)!=null&&K.isReverse?!R.value:R.value,b=n.value.tickLowerIndex,x=n.value.tickUpperIndex,ee=n.value.current_sqrt_price,r=s.value.decimals,k=a.value.decimals,X=n.value.isReverse,{tokenMaxA:H,tokenMaxB:te}=o(G,P,b,x,ee,X,r,k);console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-add.vue:859 ~ updateAmounts ~ tokenMaxA, tokenMaxB:",H,te),R.value?u.value=te:l.value=H,C.setPositionActionAmount({fromCoinAmount:l,toCoinAmount:u})};ne(()=>n.value,v=>{if(v&&!ae(v)){s.value=v.coinA,a.value=v.coinB,console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-asset-add-box-add.vue:872 ~ newVal:",v);const{tickLowerIndex:c,tickUpperIndex:G,current_tick_index:P,maxPrice:b}=v;console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-add.vue:882 ~ currentTick,tickLower,tickUpper:",P,c,G),b=="âˆž"||P>=c&&P<G?(W.value=!1,w.value=!1):P>=G?(l.value="",W.value=!0,w.value=!1):P<c?(W.value=!1,w.value=!0,u.value=""):(W.value=!0,l.value="",w.value=!0,u.value=""),d()}},{immediate:!0}),ne(l,(v,c)=>{v&&d(),v==""&&(u.value="")}),ne(u,(v,c)=>{v&&d(),v==""&&(l.value="")}),_(()=>{var G,P,b,x;const v=i((G=s==null?void 0:s.value)==null?void 0:G.address,l==null?void 0:l.value,(P=s==null?void 0:s.value)==null?void 0:P.decimals),c=i((b=a==null?void 0:a.value)==null?void 0:b.address,u==null?void 0:u.value,(x=a==null?void 0:a.value)==null?void 0:x.decimals);if(v!=="--"&&c!=="--"){const ee=ie(v).add(c);return Ge(ee.toString())}return"--"});const A=_(()=>{const v=Number(l.value)>Number(z.value),c=Number(u.value)>Number(N.value);return!l.value&&!u.value?S("button.enterAmount"):v?S("button.insufficientBalance",{name:s.value.symbol}):c?S("button.insufficientBalance",{name:a.value.symbol}):S("newAdd.addMore")}),E=_(()=>{const v=Number(l.value)>Number(z.value),c=Number(u.value)>Number(N.value);return!!(!l.value&&!u.value||v||c)}),J=q(!1);q(!1);const I=_(()=>D.chainName);_(()=>I.value?ye(I.value):{});const F=q(0),y=q(!1),p=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"Max",value:100}],$=v=>{if(console.log("setPercent isSlider.value: ",y.value),!y.value)return;console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-remove.vue:529 ~ setPercent ~ currentPositionInfo.value:",n.value),y.value=!0;const c=s.value.decimals,G=a.value.decimals,P=n.value.tickLowerIndex,b=n.value.tickUpperIndex,x=tt.tickIndexToSqrtPriceX64(P),ee=tt.tickIndexToSqrtPriceX64(b);let r="";v.value!==1?r=ie(n.value.positionLiquidity).mul(v.value).toString():r=n.value.positionLiquidity,r=Ue(r,0)||"0",console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-remove.vue:536 ~ setPercent ~ newLiquidity:",r);const k=vt.getCoinAmountFromLiquidity(new $e(r),new $e(n.value.current_sqrt_price),x,ee,!1),X=new Q(k.coinA.toString()).div(Math.pow(10,c)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-remove.vue:547 ~ setPercent ~ amountA:",X);const H=new Q(k.coinB.toString()).div(Math.pow(10,G)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-position-asset-remove.vue:551 ~ setPercent ~ amountB:",H),l.value=Number(X)>0?X:"",u.value=Number(H)>0?H:""};return ne(()=>F.value,v=>{v>0&&$({value:v/100})},{immediate:!0}),(v,c)=>{const G=Pt,P=Le;return h(),O("div",di,[t("div",vi,[t("div",mi,[B(Y(ht),{"tab-list":V,"current-tab":"Remove",onOnClick:c[0]||(c[0]=b=>{b.name=="Increase"&&Y(C).setPositionDetailCurrentTab("increase")})})]),t("div",{class:et(["card-container",[M.value?"input-block-add-top":"",m.value?"input-block-add-bottom":""]])},[B(Xe,{modelValue:l.value,"onUpdate:modelValue":c[1]||(c[1]=b=>l.value=b),"input-value":l.value,"token-info":s.value||null,"has-arrow":!1,"have-half":!1,"is-remove":!0,"remove-balance":z.value,onOnInput:c[2]||(c[2]=b=>{l.value=b,R.value=!0,y.value=!1}),onOnFocus:c[3]||(c[3]=()=>{M.value=!0,m.value=!1})},null,8,["modelValue","input-value","token-info","remove-balance"]),B(Xe,{modelValue:u.value,"onUpdate:modelValue":c[4]||(c[4]=b=>u.value=b),"input-value":u.value,"token-info":a.value||null,"has-arrow":!1,"have-half":!1,"is-remove":!0,"remove-balance":N.value,onOnInput:c[5]||(c[5]=b=>{u.value=b,R.value=!1,y.value=!1}),onOnFocus:c[6]||(c[6]=()=>{M.value=!1,m.value=!0})},null,8,["modelValue","input-value","token-info","remove-balance"]),W.value?(h(),O("div",fi,[B(He,{"from-coin":s.value,"to-coin":a.value},null,8,["from-coin","to-coin"])])):Z("",!0),w.value?(h(),O("div",_i,[B(He,{"from-coin":s.value,"to-coin":a.value},null,8,["from-coin","to-coin"])])):Z("",!0)],2),t("div",pi,[hi,t("div",gi,[Number(z.value)>=Number(l.value)&&Number(N.value)>=Number(u.value)?(h(),O("div",bi,T(F.value>0&&Number(Y(Ue)(F.value,2))<.01?"<0.01":Y(Ue)(F.value,2))+"% ",1)):(h(),O("div",ki," -- ")),t("div",wi,[(h(),O(De,null,ze(p,(b,x)=>t("div",{key:x,class:et(["ratio-item",F.value==b.value?"ratio-item-active":""]),onClick:()=>{y.value=!0,F.value=b.value}},T(b.name),11,yi)),64))])]),B(G,{value:F.value,"onUpdate:value":c[7]||(c[7]=b=>F.value=b)},null,8,["value"])])]),f.value.connected?(h(),le(P,{key:0,class:"big-btn liquidity-btn",loading:v.actionLoading,disabled:E.value,onClick:v.toRemove},{default:oe(()=>[t("span",null,T(A.value),1)]),_:1},8,["loading","disabled","onClick"])):(h(),le(P,{key:1,class:"big-btn",onClick:c[8]||(c[8]=b=>f.value.connected?J.value=!0:f.value.setIsShowWalletModal(!0))},{default:oe(()=>[t("span",null,T(v.$t("button.connectWallet")),1)]),_:1}))])}}});const Ii=me({props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const M=Vt(),m=_(()=>M),V=_(()=>m.value.status),S=fe(),i=q(!1);ne(()=>V.value,n=>{n=="authenticated",i.value=!1},{immediate:!0});const U=q(!1),f=async()=>{U.value=!U.value;const n={pool_address:e.positionInfo.poolAddress||e.positionInfo.clmm_pool_id,position_index:e.positionInfo.index||e.positionInfo.name.split("-")[1]},D=e.positionInfo.clmm_position_id||e.positionInfo.nftHash;try{await M.subscribePosition(n,D,U.value)}catch{U.value=!U.value}},C=n=>{const D=n.sources;console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-notifi.vue:172 ~ getPositionNotifiStatus ~ sources:",D),U.value=D.some(s=>JSON.parse(s.blockchainAddress).pool_address==e.positionInfo.poolAddress&&Number(JSON.parse(s.blockchainAddress).position_index)==(Number(e.positionInfo.index)||Number(e.positionInfo.name.split("-")[1])))};return Je(),ne(()=>[m.value.sourceGroups,e.positionInfo],([n,D])=>{U.value=!1,n&&n.length>0&&n[0]&&D&&!ae(D)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-notifi.vue:206 ~ setup ~ getPositionNotifiStatus:"),C(n[0]))},{immediate:!0,deep:!0}),{importIcon:gt,isShowSetUp:i,changeSwitch:f,checked:U,notifiStatus:V,store:S}}});const Si=e=>(Ce("data-v-758cc786"),e=e(),Ne(),e),Ai={class:"range-alerts"},$i={class:"range-alerts-top"},xi={class:"title"},Ti=Si(()=>t("div",{class:"title-all"},[t("span",{class:"Range"},"Range Alerts")],-1)),Ci={key:1,class:"h5-switch-box"},Ni={class:"range-alerts-bottom"},Li={key:0,class:"pc-switch-box"};function qi(e,M,m,V,S,i){const U=Le,f=It;return h(),O("div",Ai,[t("div",$i,[t("div",xi,[Ti,e.isShowSetUp||e.notifiStatus!=="authenticated"?(h(),le(U,{key:0,class:"range-alerts-button",onClick:M[0]||(M[0]=dt(C=>e.store.setIsShowNotifi(!0),["stop"]))},{default:oe(()=>[se(" Set up ")]),_:1})):Z("",!0),!e.isShowSetUp&&e.notifiStatus=="authenticated"?(h(),O("div",Ci,[B(f,{class:"range-alerts-switch",checked:e.checked,disabled:e.notifiStatus!=="authenticated",onChange:e.changeSwitch},null,8,["checked","disabled","onChange"])])):Z("",!0)])]),t("div",Ni,[se(" Receive alerts via Telegram, SMS, or email when this position goes out of range. "),!e.isShowSetUp&&e.notifiStatus=="authenticated"?(h(),O("div",Li,[B(f,{class:"range-alerts-switch",checked:e.checked,disabled:e.notifiStatus!=="authenticated",onChange:e.changeSwitch},null,8,["checked","disabled","onChange"])])):Z("",!0)])])}const Bi=he(Ii,[["render",qi],["__scopeId","data-v-758cc786"]]),Mi=me({setup(){const e=mt(),M=_(()=>e),m=Gt(),V=_(()=>m),S=Je(),i=_(()=>M.value.currentPositionInfo),U=q(),f=y=>{var p;return((p=M.value.tokensObj[y])==null?void 0:p.logo_url)||gt("/image/coins/sui-unknown.png")},C=Lt("Sui"),n=q(),D=async y=>{n.value=0;try{const p=await C.calculateFarmingRewards([{pool_id:y.pool_id,position_nft_id:y.id}]),$=[];let v=new Q(0);p[y.id].forEach((c,G)=>{var x;const P=(x=M.value.tokensObj[c.rewarder_type])==null?void 0:x.decimals;let b=new Q(c.rewarder_amount).div(Math.pow(10,P)).toString();Number(b)>0&&a.value.rewarders[G]&&(v=v.add(b),$.push({...c,rewarderAmount:b,rewarderAmountPer:b}))}),n.value=v,U.value=$}catch(p){console.log(p,"getRewarder")}},s=_(()=>V.value.farmsPoolObj),a=_(()=>s.value[i.value.poolAddress]);ne(()=>[i.value,s.value,a.value],([y,p,$])=>{var v;!ae(y)&&y.positionSource=="farming"&&!ae($)?D(y):!ae(p)&&!ae(y)&&(U.value=(v=p[y.poolAddress])==null?void 0:v.rewarders)},{immediate:!0});const l=je(),u=_(()=>l),R=fe(),z=ye("Sui"),{setIsShowSuccess:N,setIsShowRejected:W,setIsShowWaiting:w,setTransactionDesc:o,setTransactionTxid:g}=R,d=q(!1),A=async()=>{d.value=!0,g(""),o("Claim rewards"),w(!0);const y={pool_id:i.value.pool_id,position_nft_id:i.value.id};try{const p=await C.harvestFarms(y),$=await z.signAndExecuteTransactionBlock(u.value.currentWallet,p.txb,p.payloadParams);console.log("0221###sui swap res###",$);let v=z.handleTx($);if(v&&v.hash){g(v.hash),w(!1),N(!0);let c={title:"Claim",res:v.res,hash:v.hash};z.showTransitionPending(c),await z.watchTransaction(c)&&setTimeout(()=>{D(i.value),z.getAccount(u.value.address)},2e3)}else w(!1),W(!0);d.value=!1}catch(p){console.log("farmsDeposit error",p),w(!1),W(!0),d.value=!1}},E=async()=>{d.value=!0,g(""),o(`Unstake ${i.value.name}`),w(!0);const y=i.value.pool_id,p=i.value.id;try{const $=await C.farmsWithdraw(y,p),v=await z.signAndExecuteTransactionBlock(u.value.currentWallet,$.txb,$.payloadParams);console.log("0221###sui swap res###",v);let c=z.handleTx(v);if(c&&c.hash){g(c.hash),w(!1),N(!0);let G={res:c.res,title:"Unstake",hash:c.hash};z.showTransitionPending(G),await z.watchTransaction(G)&&setTimeout(()=>{S.replace(`/new-position-detail?token=${i.value.tokenName}&address=${i.value.clmm_pool_id}&pos=${i.value.clmm_position_id}`),M.value.setCurrentPositionInfo(i.value.clmm_pool_id,"",i.value.tokenName,"Sui",i.value.clmm_position_id),n.value=0,d.value=!1},2e3)}else w(!1),W(!0)}catch($){console.log("farmsDeposit error",$),w(!1),W(!0),d.value=!1}},J=async()=>{d.value=!0,g(""),o(`Stake ${i.value.name}`),w(!0);const y={clmm_pool_id:i.value.poolAddress,clmm_position_id:i.value.pos_object_id,coinTypeA:i.value.coin_type_a,coinTypeB:i.value.coin_type_b},p=s.value[i.value.poolAddress].id;try{const $=await C.farmsDeposit(y,p),v=await z.signAndExecuteTransactionBlock(u.value.currentWallet,$.txb,$.payloadParams);console.log("0221###sui swap res###",v);let c=z.handleTx(v);if(c&&c.hash){g(c.hash),w(!1),N(!0);let G={res:c.res,title:"Staked",hash:c.hash};z.showTransitionPending(G);const P=await z.watchTransaction(G,!0);let b;P!=null&&P.status&&setTimeout(async()=>{var x,ee;(ee=(x=P==null?void 0:P.res)==null?void 0:x.events)==null||ee.forEach(r=>{r.type.indexOf("::pool::DepositEvent")>-1&&(b=r.parsedJson.wrapped_position_id)}),S.replace(`/new-position-detail?position_nft_id=${b}&positionSource=farming`),await M.value.setCurrentPositionInfo("","","","Sui",b,"farming"),d.value=!1},2e3)}else w(!1),W(!0)}catch($){console.log("farmsDeposit error",$),w(!1),W(!0),d.value=!1}},I=_(()=>R),F=_(()=>I.value.addressLpTokens);return{getCoinIcon:f,rewardList:U,sFixD:Ue,addCommom:ve,claim:A,unStake:E,loading:d,totalRewardAmount:n,currentPositionInfo:i,stake:J,farmsPoolObj:s,addressLpTokens:F,farmsPoolInfo:a}}});const Pe=e=>(Ce("data-v-8a2c6b44"),e=e(),Ne(),e),Ri={key:0,class:"farms-position-detail-box"},Fi={class:"farms-top"},Oi=Pe(()=>t("div",{class:"left"},[t("div",{class:"title"},"Farming"),t("div",{class:"desc"},"Stake Position to Earn")],-1)),Ui={class:"right"},Di={class:"apr"},zi={class:"apr-tips-box"},ji=Pe(()=>t("span",null,"View",-1)),Wi=Pe(()=>t("svg",{class:"arrow-icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Ei=[ji,Wi],Vi={class:"farms-bottom"},Hi=Pe(()=>t("div",{class:"title"},"Farming Rewards",-1)),Gi={key:0,class:"reward-list"},Xi={key:0,class:"rewards-item-bg"},Ji={class:"rewards-item-box"},Yi={alt:""},Qi={key:1},Ki={class:"rewards-item-bg"},Zi={class:"rewards-item-box"},es={alt:""},ts=Pe(()=>t("span",null,"0",-1)),os={key:1,class:"reward-list"},ns={key:0,class:"rewards-item-bg"},is={class:"rewards-item-box"},ss={alt:""},as=Pe(()=>t("span",null,"0",-1)),ls={key:1},rs={class:"rewards-item-bg"},cs={class:"rewards-item-box"},us={alt:""},ds=Pe(()=>t("span",null,"0",-1)),vs={class:"actions-box"};function ms(e,M,m,V,S,i){var D,s,a;const U=Ht,f=Le,C=ct,n=St("image");return e.farmsPoolObj&&e.farmsPoolObj[e.currentPositionInfo.poolAddress]&&e.farmsPoolObj[e.currentPositionInfo.poolAddress].status=="Live"||e.currentPositionInfo.positionSource=="farming"?(h(),O("div",Ri,[t("div",Fi,[Oi,t("div",Ui,[t("div",Di,[se(" APRÂ  "),t("span",null,[se(T(("addCommom"in e?e.addCommom:Y(ve))(((D=e.farmsPoolInfo)==null?void 0:D.total_apr)*100,2))+"%Â  ",1),t("div",zi,[B(U,{"l-item":e.farmsPoolInfo,"rewarder-info":(a=(s=e.farmsPoolInfo)==null?void 0:s.rewarder)==null?void 0:a.rewardList},null,8,["l-item","rewarder-info"])])])]),t("div",{class:"view",onClick:M[0]||(M[0]=l=>e.$router.push("/farms"))},Ei)])]),t("div",Vi,[Hi,e.rewardList&&e.rewardList.length>0?(h(),O("div",Gi,[(h(!0),O(De,null,ze(e.rewardList,l=>(h(),O("div",{key:l,class:"rewards-item"},[e.currentPositionInfo.positionSource=="farming"?(h(),O("div",Xi,[t("div",Ji,[Ae(t("img",Yi,null,512),[[n,e.getCoinIcon(l.rewarder_type)]]),t("span",null,T(("addCommom"in e?e.addCommom:Y(ve))(l.rewarderAmount||0)),1)])])):(h(),O("div",Qi,[t("div",Ki,[t("div",Zi,[Ae(t("img",es,null,512),[[n,e.getCoinIcon(l.reward_coin)]]),ts])])]))]))),128))])):(h(),O("div",os,[(h(!0),O(De,null,ze(e.currentPositionInfo.rewards,l=>(h(),O("div",{key:l,class:"rewards-item"},[e.currentPositionInfo.positionSource=="farming"?(h(),O("div",ns,[t("div",is,[Ae(t("img",ss,null,512),[[n,e.getCoinIcon(l.rewarder_type)]]),as])])):(h(),O("div",ls,[t("div",rs,[t("div",cs,[Ae(t("img",us,null,512),[[n,e.getCoinIcon(l.reward_coin)]]),ds])])]))]))),128))])),t("div",vs,[e.currentPositionInfo&&e.currentPositionInfo.positionSource=="farming"?(h(),le(f,{key:0,class:"unstake-btn",loading:e.loading,onClick:e.unStake},{default:oe(()=>[se("Unstake")]),_:1},8,["loading","onClick"])):Z("",!0),e.currentPositionInfo&&e.currentPositionInfo.positionSource=="clmm"&&e.currentPositionInfo.currentStatus!=="Active"?(h(),le(C,{key:1},{title:oe(()=>[se("Farming rewards are only available for active positions.")]),default:oe(()=>[B(f,{class:"unstake-btn",loading:e.loading,disabled:!0,onClick:e.stake},{default:oe(()=>[se("Stake")]),_:1},8,["loading","onClick"])]),_:1})):e.currentPositionInfo&&e.currentPositionInfo.positionSource=="clmm"?(h(),le(f,{key:2,class:"unstake-btn",loading:e.loading,onClick:e.stake},{default:oe(()=>[se("Stake")]),_:1},8,["loading","onClick"])):Z("",!0),B(f,{class:"unstake-btn btn-margin",loading:e.loading,disabled:e.totalRewardAmount==0||e.currentPositionInfo&&e.currentPositionInfo.positionSource!=="farming",onClick:dt(e.claim,["stop"])},{default:oe(()=>[se("Claim")]),_:1},8,["loading","disabled","onClick"])])])])):Z("",!0)}const fs=he(Mi,[["render",ms],["__scopeId","data-v-8a2c6b44"]]),_s={class:"new-position-detail"},ps={class:"new-position-content"},hs={class:"left"},gs={class:"right"},bs={class:"loading-global"},ks=me({__name:"new-position-detail-sui",setup(e){const M=Je(),{getCurrentPosition:m}=Ye(),{getPoolList:V}=qt(),S=q(),i=q();lt(()=>{S.value=M.currentRoute.value.query.id||"",i.value=M.currentRoute.value.query.positionSource||""});const U=qe(),f=_(()=>U.poolsObj),C=$t(),n=_(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-detail-sui.vue:293 ~ allTokensObj ~ suiTokenStore.allTokensObj:",C.allTokensObj),C.allTokensObj));ne(()=>n.value,N=>{N&&!ae(N)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-detail-sui.vue:298 ~ watch ~ getPoolList:"),V())},{immediate:!0}),ne(()=>[f.value,n.value,S.value,i.value],([N,W,w,o])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-detail.vue:42 ~ positionSource:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-detail.vue:42 ~ routerId:",w),console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-detail.vue:42 ~ allTokensObj:",W),console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-detail.vue:42 ~ poolsObj:",N),N&&!ae(N)&&W&&!ae(W)&&w&&o&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-position-detail.vue:38 ~ getCurrentPosition:"),m(w,o))},{immediate:!0});const D=je(),s=_(()=>D),a=ye("Sui"),l=()=>{m(S.value,i.value),s.value.address&&a.getAccount(s.value.address)},u=_(()=>U.currentPositionLoading),R=_(()=>U.currentPositionInfo),z=_(()=>U.positionDetailCurrentTab);return(N,W)=>{const w=At;return h(),O("div",_s,[B(Zt,{onClickRefresh:l}),t("div",ps,[t("div",hs,[B(Lo),B(at,{class:"pc-module",onGetDetails:N.getDetails},null,8,["onGetDetails"])]),t("div",gs,[z.value=="increase"?(h(),le(ui,{key:0,onGetDetails:N.getDetails},null,8,["onGetDetails"])):(h(),le(Pi,{key:1,onGetDetails:N.getDetails},null,8,["onGetDetails"])),B(at,{class:"h5-module",onGetDetails:N.getDetails},null,8,["onGetDetails"]),B(fs),R.value&&R.value.minPrice!=="0"&&R.value.maxPrice!=="âˆž"?(h(),le(Bi,{key:2,"position-info":R.value},null,8,["position-info"])):Z("",!0)])]),Ae(t("div",bs,[B(w)],512),[[rt,u.value]])])}}});const fa=he(ks,[["__scopeId","data-v-d82de158"]]);export{fa as default};
