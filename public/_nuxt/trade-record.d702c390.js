import{_ as wa}from"./token-warning.54d6df24.js";import{m as b,t as Da,a5 as Fa,r as g,L as ja,A as ae,a as de,C as Ut,o as u,f as y,h as e,I as le,i as N,x as o,G as D,u as a,M as ct,y as X,O as wt,p as Te,k as Ie,e as ve,c as F,w as j,j as U,$ as Qt,K as Xt,B as st,a2 as pt,a3 as za,z as Wa,q as Va,s as Ya,a7 as qt,b as qa,fi as ra,a0 as Ja,D as Zt,N as Jt,F as G,E as Ue,P as ea,J as Ka,H as Ga}from"./entry.a85dcc8c.js";/* empty css              */import"./decimal.a2826370.js";import{c as Ae,R as ua,U as fe,b as qe,a as A,V as ca,p as da,r as Ke,o as ta}from"./common.58ad47a8.js";import{a as $t,u as _t,b as Bt}from"./index.a6e74e8d.js";import{_ as Qa}from"./token-warning-modal.7308be88.js";/* empty css              *//* empty css              */import{_ as Xa}from"./refresh-icon.36486167.js";import{c as H,s as Za,m as es,u as Be,ak as ts,aj as Tt}from"./index.d5fbf89e.js";import{_ as as}from"./coin-select.ef88db8f.js";import{D as h}from"./decimal.765d8738.js";import{U as $a}from"./underline-tab.537f13fb.js";import{N as va}from"./new-assets-card.03ce91e9.js";import{I as ss}from"./icon-tooltip.c403b367.js";import{B as _a}from"./bignumber.266e6c56.js";import{_ as ns}from"./img-no-Positions_2x.02902d06.js";import{_ as ls}from"./img-connect-wallet_2x.9c7563c2.js";import{S as is}from"./data.712deea2.js";/* empty css              */const os=""+globalThis.__publicAssetsURL("sui-image/img-no-data@2x.png");function He(t){const c={fullRpcUrl:localStorage.getItem(`${t}-currentRpclocal2`)||H[t||"Sui"].fullRpcUrl,simulationAccount:H[t||"Sui"].simulationAccount,cetus_config:H[t||"Sui"].cetus_config,clmm_pool:H[t||"Sui"].clmm_pool,integrate:H[t||"Sui"].integrate,deepbook:H[t||"Sui"].deepbook,deepbook_endpoint_v2:H[t||"Sui"].deepbook_endpoint_v2,aggregatorUrl:H[t||"Sui"].aggregatorUrl,swapCountUrl:H[t||"Sui"].swapCountUrl},n={launchpad:H[t||"Sui"].launchpad,ido:H[t||"Sui"].ido,xcetus:H[t||"Sui"].xcetus,xcetus_dividends:H[t||"Sui"].xcetus_dividends,cetus_faucet:H[t||"Sui"].cetus_faucet,xtoken:H[t||"Sui"].xtoken,xtoken_dividends:H[t||"Sui"].xtoken_dividends,token_faucet:H[t||"Sui"].token_faucet,booster:H[t||"Sui"].booster,maker_bonus:H[t||"Sui"].maker_bonus,liquidity_stratefy:H[t||"Sui"].liquidity_stratefy,vaults:H[t||"Sui"].vaults,frams:H[t||"Sui"].frams,limit_order:H[t||"Sui"].limit_order};console.log("defaultNetworkOptions####",c);const _=new Za(c),f=new es(n,_),w=Be(),m=b(()=>w);Da(()=>{m.value.address&&(_.senderAddress=m.value.address)});const v=async()=>await f.LimitOrder.getLimitOrderTokenList(),l=async()=>await f.LimitOrder.getLimitOrderPoolList(),O=async()=>{try{return await f.LimitOrder.getOwnerLimitOrderList(f.ClmmSDK.senderAddress,"all")}catch(x){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useLimitOrder.ts:71 ~ getOwnerLimitOrderList ~ error:",x)}},r=x=>({transactionBlock:x,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),i=async x=>{const{pay_coin_amount:k,price:M,expired_ts:z,pay_coin_type:L,target_coin_type:Z,pay_decimal:re,target_decimal:ue}=x,ge=new h(k).mul(Math.pow(10,re)).toNumber();console.log("useLimitOrder placeLimitOrder params##",x);const ee=await f.LimitOrder.placeLimitOrder({pay_coin_amount:ge,price:M,expired_ts:z,pay_coin_type:L=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":L,target_coin_type:Z=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":Z,pay_decimal:re,target_decimal:ue});return console.log("useLimitOrder placeLimitOrder payload##",ee),r(ee)},I=async x=>{console.log("cancelOrdersByOwner params",x);const k=await f.LimitOrder.cancelOrdersByOwner(x);return r(k)},T=async x=>await f.LimitOrder.getLimitOrderLogs(x),d=async x=>{const k=await f.LimitOrder.claimTargetCoin({order_id:x.order_id,pay_coin_type:x.pay_coin_type,target_coin_type:x.target_coin_type});return r(k)},C=async x=>await f.LimitOrder.getLimitOrderClaimLogs(x);return{getLimitOrderTokenList:v,getLimitOrderPoolList:l,getOwnerLimitOrderList:O,placeLimitOrder:i,rateToPrice:ts.rateToPrice,cancelOrdersByOwner:I,getLimitOrderLogs:T,claimTargetCoin:d,getLimitOrderClaimLogs:C}}const It="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Me=Fa("LimitOrder",{state:()=>({limitTokenList:[],limitTokenObj:{},limitOrderPoolList:[],limitOrderList:[],orderNum:0,orderListLoading:!1,limitTokenMinAmountObj:{},limitOrderHistoryList:[],historyNum:0,orderHistoryObj:{},cancelOrderId:"",orderHistoryLoading:!1,currentOrderClaimHistory:[],claimHistoryLoading:!0,RATES:{},marketPriceLoading:!0,haveMarket:!0,isShowChart:JSON.parse(localStorage.getItem("isShowChart"))||!1}),actions:{async getTokenMinAmount(){const c=await He("Sui").getLimitOrderTokenList();this.limitTokenMinAmountObj=Object.fromEntries(c.map((n,_)=>[n.coin_type==It?"0x2::sui::SUI":n.coin_type,n])),console.log(c,"store limitorder getLimitgetTokenMinAmount###")},async getPoolList(){const c=await He("Sui").getLimitOrderPoolList();this.limitOrderPoolList=c.map(n=>({indexer_id:n.indexer_id,pay_coin_type:n.pay_coin_type==It?"0x2::sui::SUI":n.pay_coin_type,target_coin_type:n.target_coin_type==It?"0x2::sui::SUI":n.target_coin_type})),console.log(c,"store limitorder getLimitOrderPoolList###")},async getOrderList(){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:42 ~ getOrderList ~ getOrderList:");const t=He("Sui");this.orderListLoading=!0;try{const c=await t.getOwnerLimitOrderList();console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:46 ~ getOrderList ~ result:",c);const n=c.data.filter(_=>_.status=="PartialCompleted"||_.status=="Running")||[];this.limitOrderList=n.sort((_,f)=>f.created_ts-_.created_ts),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:52 ~ getOrderList ~ this.limitOrderList:",this.limitOrderList),this.orderListLoading=!1,this.cancelOrderId=""}catch(c){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:53 ~ getOrderList ~ e:",c),this.orderListLoading=!1,this.cancelOrderId=""}},async getTokenList(){const c=(await fetch(`${H.Sui.api}/v2/sui/coin_metadata`,{method:"POST",body:JSON.stringify({})}).then(n=>n.json())).data.list||[];this.limitTokenList=c,this.limitTokenObj=Object.fromEntries(c.map((n,_)=>[n.coin_type==It?"0x2::sui::SUI":n.coin_type,n])),console.log(c,"store limitorder getLimitOrderTokenList###")},async getLimitOrderLogs(){},async getLimitOrderHistory(t){this.orderHistoryLoading=!0;const{data:c}=await fetch(`${H.Sui.api}/v2/sui/limit_order?wallet_address=${t}`).then(_=>_.json()),n=c.list||[];this.limitOrderHistoryList=n||[],this.orderHistoryLoading=!1},async getLimitOrderClaimHistory(t){this.currentOrderClaimHistory=[],this.claimHistoryLoading=!0;const n=await He("Sui").getLimitOrderClaimLogs(t.id);this.currentOrderClaimHistory=n.map(_=>{const f=new h(_.parsedJson.claimed_amount).div(Math.pow(10,t.target_coin_info.decimals));return{..._,..._.parsedJson,claimed_amount:f}}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:105 ~ getLimitOrderClaimHistory ~ currentOrderClaimHistory:",this.currentOrderClaimHistory),this.claimHistoryLoading=!1},setOrderNum(t){this.orderNum=t},setHistoryNum(t){this.historyNum=t},setLimitOrderLoading(t){this.cancelOrderId=t},async setRates(t){this.marketPriceLoading=!0;let c={};if(t&&t.includes("Sui"))try{c=await $fetch(`${H.Sui.api}/v2/sui/price`)}catch(f){console.log("sui pric api error ###",f),c={data:{prices:is}}}else c=await $fetch(`${H.Aptos.api}/v2/price`);const n=c.data.prices||[],_=[];n.forEach(f=>{f.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?_.push({...f},{...f,base_symbol:"0x2::sui::SUI"}):_.push(f)}),this.RATES=Object.fromEntries(_.map(f=>[f.base_symbol,f])),this.marketPriceLoading=!1},setHaveMarket(t){this.haveMarket=t},setIsShowChart(t){localStorage.setItem("isShowChart",JSON.stringify(t)),this.isShowChart=t},limitOrderLogOut(){this.limitOrderHistoryList=[],this.limitOrderList=[]}}}),$=g(),S=g(),rs=$t(),Sa=b(()=>rs),xa=_t(),us=b(()=>xa),ma=b(()=>us.value.chainName),Le=Bt("Sui"),cs=ja(),ka=g(!0);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:53 ~ route:",cs);ae(()=>[Sa.value.tokensObj,ka.value],async([t,c])=>{if(!Ae(t)){const n=ua("from"),_=ua("to");console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:61 ~ routerCoinTo:",n,_),n&&_?$.value=t[n]||await Le.getTokenBySymbol(t,n):!n&&!$.value&&($.value=t[H[ma.value].swapDefaultPair.fromCoin]),n&&_?S.value=t[_]||await Le.getTokenBySymbol(t,_):!_&&!S.value&&(S.value=t[H[ma.value].swapDefaultPair.toCoin])}},{});const{setTransactionTxid:ds,setIsShowWaiting:Mt,setIsShowSuccess:vs,setIsShowRejected:pa,setTransactionDesc:_s}=xa,fa=g(!1),at=Me(),aa=b(()=>at),ms=b(()=>aa.value.limitOrderList),ps=Be(),Gt=b(()=>ps),sa=async(t,c=!1)=>{const n=He("Sui");try{_s("Canceling order"),Mt(!0);const f=c?ms.value.map(l=>({order_id:l.id,pay_coin_type:l.pay_coin_type,target_coin_type:l.target_coin_type})):[{order_id:t.id,pay_coin_type:t.pay_coin_type,target_coin_type:t.target_coin_type}];at.setLimitOrderLoading(c?"all":t.id),console.log("cacelLimitOrder parmas",f);const w=await n.cancelOrdersByOwner(f),m=await Le.signAndExecuteTransactionBlock(Gt.value.currentWallet,w),v=Le.handleTx(m);if(v&&v.hash){ds(v.hash),Mt(!1),vs(!0),fa.value=!1;const l={title:"Transaction",desc:"Order cancelled successfully",hash:v.hash,icon:"icon-icon-Increased"};l.res=v.res,Le.showTransitionPending(l),await Le.watchTransaction(l)&&setTimeout(()=>{Le.getAccount(Gt.value.address),at.getOrderList()},2e3)}else Mt(!1),pa(!0),at.setLimitOrderLoading("")}catch(_){Mt(!1),pa(!0),fa.value=!1,at.setLimitOrderLoading(""),console.log("trade-data.ts cancel error##",_)}},ga=g(!1),W=g(!0),E=g(),P=g();function ha(){ga.value=!0;const t=$.value;$.value=S.value,S.value=t,W.value=!W.value;const c=E.value,n=P.value;W.value?(E.value=P.value,P.value=c):(P.value=E.value,E.value=n),setTimeout(()=>{ga.value=!1},300)}ae(()=>ka.value,()=>{E.value="",P.value=""},{immediate:!0});const ot=g("orders"),gt=g(1),Et=g(10),K=g([]),ht=g([]),fs=g(1),rt=g(),ft=b(()=>aa.value.limitOrderList),Rt=b(()=>Sa.value.tokensObj),gs=He("Sui"),ut=g(),hs=t=>{ut.value={...ut.value,[t.id]:t}},Kt=g(!1),ya=b(()=>aa.value.cancelOrderId),ys=async()=>{const t=Et.value*gt.value-Et.value;let c=gt.value*Et.value;c=c>ft.value.length?ft.value.length:c;const n=ft.value;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:147 ~ updateOrderList ~ ordersList.value:",ft.value),console.log("trade-card updateOrderList tokenObj",Rt.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:257 ~ updateOrderList ~ orderDirectObj.value:",ut.value),n.length>0){const _=[],f=n.filter((m,v)=>v>=t&&v<c);for(let m=0;m<f.length;m++){const v=f[m];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:176 ~ updateOrderList ~ order.pay_coin_type:",await Le.getTokenListByCoinType[v.pay_coin_type]);const l=Rt.value[v.pay_coin_type]||(await Le.getTokenListByCoinType([v.pay_coin_type]))[0],O=Rt.value[v.target_coin_type]||(await Le.getTokenListByCoinType([v.target_coin_type]))[0];console.log(v,"order###"),console.log(l.decimals,"##pay_coin_info.decimals");const r=fe(gs.rateToPrice(v.rate,l.decimals,O.decimals).toString(),l.decimals),i=new h(v.total_pay_amount).div(Math.pow(10,l.decimals)).toString(),I=new h(v.total_pay_amount).mul(new h(Math.pow(10,18))).div(new h(v.rate)).ceil().div(new h(Math.pow(10,O.decimals))).toString(),T=new h(v.total_pay_amount).mul(new h(r)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:166 ~ updateOrderList ~ totalBuyNum:",I,T);const d=new h(v.obtained_amount).div(Math.pow(10,O.decimals)).toString(),C=qe(new h(d).div(new h(I)).mul(100).toString(),2),x=new h(v.target_balance).div(Math.pow(10,O.decimals)).toString(),k=fe(new h(1).div(new h(r)).toString());console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:217 ~ updateOrderList ~ new Decimal(1).div(new Decimal(rate)).toString():",new h(1).div(new h(r)).toString()),_.push({...v,pay_coin_info:l,target_coin_info:O,total_pay_amount:i,rate:r,totalBuyNum:I,obtained_amount:d,obtainedRatio:C,target_balance:x,reseverRate:k,direction:ut.value&&ut.value[v.id]&&ut.value[v.id].direction||!1})}K.value=_,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:255 ~ updateOrderList ~ pageList.value:",K.value),fs.value==1;const w=_.filter(m=>{var v;return m.id==((v=rt==null?void 0:rt.value)==null?void 0:v.id)});rt.value=w&&w.length>0?w[0]:""}ht.value=n,at.setOrderNum(n.length),console.log("allList",ht.value),console.log("pageList",K.value)};ae(()=>[ft.value,gt.value,Rt.value,Gt.value.address],([t,c,n,_])=>{t&&t.length>0&&n&&!Ae(n)&&_?ys():(K.value=[],ht.value=[],at.setOrderNum(0))},{immediate:!0});const bs=t=>(Te("data-v-fa5a04b3"),t=t(),Ie(),t),ws={class:"switch-direction"},$s={class:"left"},Ss={key:0,class:"token-info"},xs={key:0},ks={key:1,class:"token-info"},Os={alt:""},Cs={alt:""},Ls={class:"iframe-chart-box"},Ts={key:0,class:"chart-no-data"},Is=bs(()=>e("img",{src:os,alt:""},null,-1)),Ms=["src","onload"],Ns=de({__name:"trade-chart",setup(t){const c=g(!0);g(!0),g(),g(),g();const n=Me(),_=b(()=>n);b(()=>_.value.RATES),b(()=>_.value.marketPriceLoading);const f=b(()=>_.value.haveMarket);g(),g();const w=_t(),m=b(()=>w),v=b(()=>m.value.addressLpTokens),l=$t(),O=b(()=>l),r=b(()=>O.value.openPool),i=g(),I=()=>{var d;const T=[];if((d=r==null?void 0:r.value)==null||d.forEach(C=>{var x,k,M,z,L,Z,re,ue;if(C.coinA.address.toUpperCase()===((k=(x=$==null?void 0:$.value)==null?void 0:x.address)==null?void 0:k.toUpperCase())&&C.coinB.address.toUpperCase()===((z=(M=S==null?void 0:S.value)==null?void 0:M.address)==null?void 0:z.toUpperCase())||C.coinB.address.toUpperCase()===((Z=(L=$==null?void 0:$.value)==null?void 0:L.address)==null?void 0:Z.toUpperCase())&&C.coinA.address.toUpperCase()===((ue=(re=S==null?void 0:S.value)==null?void 0:re.address)==null?void 0:ue.toUpperCase())){const ge=(v==null?void 0:v.value[C.address])||{};ge&&!Ae(ge)&&T.push({...C,pure_tvl_in_usd:ge.pure_tvl_in_usd})}}),T&&T.length>0){const C=T.sort((x,k)=>x.pure_tvl_in_usd-k.pure_tvl_in_usd)[0];return i.value=C,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-chart.vue:327 ~ poolInfo ~ result:",C),!1}i.value=null};return ae(()=>[r.value,v.value,$.value,S.value],([T,d])=>{T&&T.length>0&&d&&!Ae(d)&&I()},{immediate:!0}),(T,d)=>{var M,z,L,Z,re,ue,ge,ee,Se,xe,V,se,be,he,De,Ne,ie,_e,Fe,ce,Xe,je,Ze,ke,et,ze,tt,Ee,me,ne,Y,oe,pe,we,Q,ye,We,Re,kt;const C=wa,x=wt,k=Ut("image");return u(),y("div",{class:X(["trade-chart",!c.value&&!i.value?"trade-chart-no-pool":""])},[e("div",ws,[e("div",$s,[i.value?(u(),y("div",Ss,[e("div",null,[le(e("img",null,null,512),[[k,(M=i.value)!=null&&M.needReverse?(L=(z=i.value)==null?void 0:z.token_b)==null?void 0:L.logo_url:(re=(Z=i.value)==null?void 0:Z.token_a)==null?void 0:re.logo_url]]),N(C,{address:(ue=i.value)!=null&&ue.needReverse?(ee=(ge=i.value)==null?void 0:ge.token_b)==null?void 0:ee.address:(xe=(Se=i.value)==null?void 0:Se.token_a)==null?void 0:xe.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[le(e("img",null,null,512),[[k,(V=i.value)!=null&&V.needReverse?(be=(se=i.value)==null?void 0:se.token_a)==null?void 0:be.logo_url:(De=(he=i.value)==null?void 0:he.token_b)==null?void 0:De.logo_url]]),N(C,{address:(Ne=i.value)!=null&&Ne.needReverse?(_e=(ie=i.value)==null?void 0:ie.token_a)==null?void 0:_e.address:(ce=(Fe=i.value)==null?void 0:Fe.token_b)==null?void 0:ce.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),i.value?(u(),y("span",xs,o((Xe=i.value)!=null&&Xe.needReverse?(Ze=(je=i.value)==null?void 0:je.token_b)==null?void 0:Ze.symbol:(et=(ke=i.value)==null?void 0:ke.token_a)==null?void 0:et.symbol)+" / "+o((ze=i.value)!=null&&ze.needReverse?(Ee=(tt=i.value)==null?void 0:tt.token_a)==null?void 0:Ee.symbol:(ne=(me=i.value)==null?void 0:me.token_b)==null?void 0:ne.symbol),1)):D("",!0)])):a($)&&a(S)?(u(),y("div",ks,[e("div",null,[le(e("img",Os,null,512),[[k,(Y=a($))==null?void 0:Y.logo_url]]),N(C,{address:(oe=a($))==null?void 0:oe.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[le(e("img",Cs,null,512),[[k,(pe=a(S))==null?void 0:pe.logo_url]]),N(C,{address:(we=a(S))==null?void 0:we.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o((Q=a($))==null?void 0:Q.symbol)+" / "+o((ye=a(S))==null?void 0:ye.symbol),1)])):D("",!0)])]),e("div",Ls,[!c.value&&!i.value?(u(),y("div",Ts,[Is,e("span",null,o(f.value?"Price chart is currently not available for this pair, but you can still place your limit orders.":"No data avaliable"),1)])):D("",!0),le(e("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",src:`https://birdeye.so/tv-widget/${(Re=(We=i.value)==null?void 0:We.token_a)==null?void 0:Re.address}/${(kt=i.value)==null?void 0:kt.address}?chain=sui`,onload:()=>{c.value=!1}},null,8,Ms),[[ct,!c.value&&i.value]]),le(N(x,null,null,512),[[ct,c.value]])])],2)}}});const Yo=ve(Ns,[["__scopeId","data-v-fa5a04b3"]]),Oa=t=>(Te("data-v-424fa68d"),t=t(),Ie(),t),Es={class:"custom-expiry"},Rs={class:"input-box"},Ps=Oa(()=>e("div",{class:"minutes"},"Hours",-1)),As={class:"input-box"},Hs=Oa(()=>e("div",{class:"minutes"},"Minutes",-1)),Us=de({__name:"custom-expires-modal",setup(t){const c=g(),n=g(),_=g({}),f=(l,O)=>{const r=(l||0)*60+Number(O||0),i=Math.floor(r/(60*24)),I=Math.floor(r%(60*24)/60),T=r%60;let d="";i>0&&(d+=i+"d "),I>0&&(d+=I+"h "),T>0&&(d+=T+"m "),_.value={timeText:d.trim()||"0 m",time:r*60*1e3}};ae(()=>[c.value,n.value],([l,O])=>{f(l,O)},{immediate:!0});const w=l=>{const O=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");l.target.value=l.target.value.replace(O,"$1"),c.value=l.target.value,console.log(c.value,"##inputChange")},m=l=>{const O=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");l.target.value=l.target.value.replace(O,"$1"),n.value=l.target.value},v=b(()=>!c.value&&!n.value||Number(c.value)==0&&!n.value||Number(n.value)==0&&!c.value||Number(c.value)==0&&Number(n.value)==0);return(l,O)=>{const r=Xt,i=st;return u(),F(a(Qt),{class:"new-modal-have-btn",title:"Custom Expiry Period",visible:!0,width:"400px",footer:null,onCancel:O[3]||(O[3]=I=>l.$emit("closeModal"))},{default:j(()=>[e("div",Es,[e("div",Rs,[N(r,{value:c.value,"onUpdate:value":O[0]||(O[0]=I=>c.value=I),placeholder:"0",onChange:w},null,8,["value"]),Ps]),e("div",As,[N(r,{value:n.value,"onUpdate:value":O[1]||(O[1]=I=>n.value=I),placeholder:"0",onChange:m},null,8,["value"]),Hs]),N(i,{class:"set-period modal-bottom-btn",disabled:v.value,onClick:O[2]||(O[2]=I=>l.$emit("sendTime",_.value))},{default:j(()=>[U("Set Period")]),_:1},8,["disabled"])])]),_:1})}}});const Bs=ve(Us,[["__scopeId","data-v-424fa68d"]]),nt=t=>(Te("data-v-cd0718ea"),t=t(),Ie(),t),Ds=nt(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Fs=[Ds],js={class:"trade-cofirm-content"},zs={class:"coin-info"},Ws={class:"from-coin-info"},Vs={class:"left"},Ys={class:"coin-amount"},qs={class:"coin-symbol"},Js={class:"right"},Ks={class:"to-coin-info"},Gs={class:"left"},Qs={class:"coin-amount"},Xs={class:"coin-symbol"},Zs={class:"right"},en=nt(()=>e("div",{class:"new-sui-exchange to-swap-logo"},[e("div",{class:"exchange-new"},[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap1"})])])],-1)),tn={class:"trade-info"},an={class:"price"},sn=nt(()=>e("div",{class:"label"},"Pirce",-1)),nn={class:"text"},ln={key:0},on={key:1},rn=nt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),un=[rn],cn={class:"expires-in"},dn=nt(()=>e("div",{class:"label"},"Expires in",-1)),vn={class:"text"},_n=nt(()=>e("div",{class:"trade-tips1"}," You will receive exactly what you have specified if your order is fully filled in the end. ",-1)),mn=nt(()=>e("div",{class:"trade-tips2"}," Please note that your order may not be filled immediately after the price is triggered, depending on pending sequence and liquidity depth. ",-1)),pn=de({__name:"trade-confirm",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},direction:{type:Boolean,default:!1},price:{type:String,default:""},currentExpires:{type:String,default:""}},emits:["to-trade","close"],setup(t,{emit:c}){const n=t,_=c,f=g(!1),w=b(()=>new h(1).div(new h(n.price)).toString()),m=async()=>{_("to-trade")};return(v,l)=>{const O=st,r=Ut("image");return u(),F(a(Qt),{title:"Review your order",width:"440px",footer:null,visible:!0,class:"trade-confirm-modal new-modal-have-btn"},{closeIcon:j(()=>[(u(),y("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:l[0]||(l[0]=i=>_("close"))},Fs))]),default:j(()=>{var i,I,T,d,C,x,k,M;return[e("div",js,[e("div",zs,[e("div",Ws,[e("div",Vs,[e("div",Ys,o(t.fromCoinAmount&&a(A)(t.fromCoinAmount)),1),e("div",qs,o(t.fromCoin&&t.fromCoin.symbol),1)]),e("div",Js,[le(e("img",null,null,512),[[r,t.fromCoin&&t.fromCoin.logo_url]])])]),e("div",Ks,[e("div",Gs,[e("div",Qs,o(t.toCoinAmount&&a(A)(t.toCoinAmount)),1),e("div",Xs,o(t.toCoin&&t.toCoin.symbol),1)]),e("div",Zs,[le(e("img",null,null,512),[[r,t.toCoin&&t.toCoin.logo_url]])]),en])]),e("div",tn,[e("div",an,[sn,e("div",nn,[t.direction?(u(),y("span",on,o(a(A)(a(fe)(f.value?w.value:t.price,9)))+" "+o(f.value?(x=t.fromCoin)==null?void 0:x.symbol:(C=t.toCoin)==null?void 0:C.symbol)+" per "+o(f.value?(M=t.toCoin)==null?void 0:M.symbol:(k=t.fromCoin)==null?void 0:k.symbol),1)):(u(),y("span",ln,o(a(A)(a(fe)(f.value?w.value:t.price,9)))+" "+o(f.value?(I=t.toCoin)==null?void 0:I.symbol:(i=t.fromCoin)==null?void 0:i.symbol)+" per "+o(f.value?(d=t.fromCoin)==null?void 0:d.symbol:(T=t.toCoin)==null?void 0:T.symbol),1)),e("div",{class:"right",onClick:l[1]||(l[1]=z=>f.value=!f.value)},un)])]),e("div",cn,[dn,e("div",vn,o(t.currentExpires),1)])]),_n,mn]),N(O,{class:"big-btn trade-confirm-btn modal-bottom-btn",onClick:l[2]||(l[2]=z=>m())},{default:j(()=>[U(" Place Order ")]),_:1})]}),_:1})}}});const fn=ve(pn,[["__scopeId","data-v-cd0718ea"]]),Dt=t=>(Te("data-v-f01e7404"),t=t(),Ie(),t),gn={class:"trade-card"},hn={class:"trade-content"},yn={class:"trade-card-title"},bn={class:"tit-icon-box"},wn={class:"icon-bg"},$n=Dt(()=>e("use",{"xlink:href":"#icon-icon_kline"},null,-1)),Sn=[$n],xn={class:"icon-bg"},kn={class:"trade-card-content"},On=Ka('<div class="exchange-new" data-v-f01e7404><svg class="icon icon-down" aria-hidden="true" data-v-f01e7404><use xlink:href="#icon-icon_swap1" data-v-f01e7404></use></svg><svg class="icon icon-swap" aria-hidden="true" data-v-f01e7404><use xlink:href="#icon-tx_swap1" data-v-f01e7404></use></svg></div>',1),Cn=[On],Ln={class:"sell-setting"},Tn={class:"sell-rate"},In={class:"top"},Mn={key:0,class:"direction-text"},Nn={key:1,class:"direction-text"},En={class:"bottom"},Rn={class:"coin-symbol"},Pn=Dt(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),An=[Pn],Hn={class:"top"},Un=Dt(()=>e("span",null,"Expiry in",-1)),Bn={class:"bottom"},Dn=Dt(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Fn=[Dn],jn=["onClick"],zn={class:"market-price-tips"},Wn=de({__name:"trade-card",setup(t){const c=pt(za,{style:{fontSize:"14px",marginLeft:"4px",color:"#75c8ff"},spin:!0}),{t:n}=Wa(),_=[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}];g("Limit");const f=Be(),w=b(()=>f),m=b(()=>w.value.assets&&$.value&&w.value.assets[$.value.address]?da(w.value.assets[$.value.address].balance,$.value.decimals):0),v=b(()=>w.value.assets&&S.value&&w.value.assets[S.value.address]?da(w.value.assets[S.value.address].balance,S.value.decimals):0),l=p=>{p==="fromCoin"?(W.value=!0,E.value=m.value>0?$.value.symbol=="SUI"?new h(Number(m.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(m.value)).sub(new h(.05)).toString():String(m.value):""):(W.value=!1,P.value=v.value>0?S.value.symbol=="SUI"?new h(Number(v.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(v.value)).sub(new h(.05)).toString():String(v.value):"")},O=p=>{p==="fromCoin"?(W.value=!0,E.value=m.value>0?qe(new h(Number(m.value)).div(2).toString(),$.value.decimals).toString():""):(W.value=!1,P.value=v.value>0?qe(new h(Number(v.value)).div(2).toString(),S.value.decimals).toString():"")},r=g(""),i=g(""),I=g(""),T=g(!1),d=p=>{var s,B,q,te;r.value=p,p==="fromCoin"?(i.value=((s=S.value)==null?void 0:s.address)||"",I.value=((B=$.value)==null?void 0:B.address)||""):(i.value=((q=$.value)==null?void 0:q.address)||"",I.value=((te=S.value)==null?void 0:te.address)||""),T.value=!0},C=["5 Minutes","10 Minutes","30 Minutes","1 Hour","1 Day","3 Days","7 Days","1 Month","Custom"],x=p=>{switch(p){case"5 Minutes":return 3e5;case"10 Minutes":return 6e5;case"30 Minutes":return 18e5;case"1 Hour":return 36e5;case"1 Day":return 864e5;case"7 Days":return 6048e5;case"1 Month":return 2592e6;default:return 0}},k=g(!1),M=g("7 Days"),z=g(!1),L=g(),Z=g(0),re=p=>{M.value=p.timeText,Z.value=p.time,z.value=!1},ue=g(),ge=p=>{ue.value=r.value==="fromCoin"?$.value:S.value;let s=!1;r.value==="fromCoin"?(E.value="",S.value&&p.address.toLowerCase()===(S==null?void 0:S.value.address.toLowerCase())&&(S.value=$.value,s=!0),$.value=p):($.value&&(P.value="",p.address.toLowerCase()===($==null?void 0:$.value.address.toLowerCase())&&($.value=S.value,s=!0)),S.value=p),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:416 ~ onCoinSelect ~ toCoin.value:",S.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:453 ~ onCoinSelect ~ fromCoin.value:",$.value),s||(Y.value=!1),T.value=!1},ee=g(20),Se=g(0),xe=g(null),V=g(!1),se=()=>{V.value||(clearInterval(xe.value),w.value.address&&(ce.getOrderList(),ce.getLimitOrderHistory(w.value.address),me.getAccount(w.value.address)),pe.value||Q.value?zt():Ot(!1),Se.value=0,V.value=!0,setTimeout(()=>{V.value=!1,be()},1e3))},be=()=>{xe.value=setInterval(()=>{V.value=!1,Se.value<ee.value&&(Se.value+=1,Se.value===ee.value&&se())},1e3)};Va(()=>{be(),window.addEventListener("click",()=>{k.value=!1})}),Ya(()=>{clearInterval(xe.value)});const he=()=>{if(W.value&&(!E.value||E.value==0)||!W.value&&(!P.value||P.value==0))return!1;if(L.value<=0&&it.value)return W.value?P.value="":E.value="",!1;if(Number(E.value)<=0&&Number(P.value)<=0)return!1;if(L.value<=0&&!it.value&&E.value>0&&P.value>0)return console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:480 ~ updateAmounts ~ fromCoinAmount.value&&toCoinAmount.value:",E.value>0&&P.value>0),L.value=Y.value?fe(new h(P.value||0).div(new h(E.value||0)).toString()):fe(new h(E.value||0).div(new h(P.value||0)).toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:497 ~ updateAmounts ~ fixedFromCoin.value :",W.value),!1;if(L.value<=0&&!it.value)return!1;W.value?Y.value?P.value=qe(new h(E.value).mul(new h(L.value||0)).toString(),S.value.decimals):P.value=qe(new h(E.value).div(new h(L.value||0)).toString(),S.value.decimals):Y.value?E.value=qe(new h(P.value).div(new h(L.value||0)).toString(),$.value.decimals):E.value=qe(new h(P.value).mul(new h(L.value||0)).toString(),$.value.decimals)};ae(E,qt((p,s)=>{p&&p!==0&&W.value&&he(),p==""&&W.value&&(P.value="")},100)),ae(L,qt((p,s)=>{p&&p!==0&&he(),p==""&&W.value&&(P.value="")},100)),ae(P,qt((p,s)=>{p&&p!==0&&!W.value&&he(),p==""&&!W.value&&(E.value="")},100));const De=$t(),Ne=b(()=>De),ie=b(()=>{var q;const s=(q=Ne.value.RATES[$.value.address])==null?void 0:q.price,B=new h(s||0).mul(E.value||0).toNumber();if(s){if(B<5&&s)return!0}else return!1;return!1}),_e=b(()=>!$.value||!S.value?n("modal.selectTokenModalTitle"):Re.value?!Number(E.value)||!Number(P.value)?n("button.enterAmount"):ie.value?"Order size should be higher than $5":Number(E.value)>Number(m.value)?n("button.insufficientBalance",{name:$.value.symbol}):"Place Limit Order":"No Available Route"),Fe=b(()=>!!(!$.value||!S.value||!L.value||ie.value||!Number(E.value)&&!Number(P.value)||Number(E.value)>Number(m.value)||Number(E.value)==0||Number(P.value)==0||!Re.value)),ce=Me(),Xe=b(()=>ce),je=_t(),{setTransactionTxid:Ze,setIsShowWaiting:ke,setIsShowSuccess:et,setIsShowRejected:ze,setTransactionDesc:tt}=je,Ee=g(!1),me=Bt("Sui"),ne=async()=>{Lt.value=!1;const p=He("Sui"),s=Date.parse(new Date().toString())+(x(M.value)||Z.value);try{tt("Creating order"),ke(!0);const q={pay_coin_amount:E.value,price:Y.value?L.value:new h(1).div(new h(L.value)).toString(),expired_ts:s,pay_coin_type:$.value.address,target_coin_type:S.value.address,pay_decimal:$.value.decimals,target_decimal:S.value.decimals};console.log("placeLimitOrder parmas",q);const te=await p.placeLimitOrder(q),mt=await me.signAndExecuteTransactionBlock(w.value.currentWallet,te),Oe=me.handleTx(mt);if(Oe&&Oe.hash){Ze(Oe.hash),ke(!1),et(!0),Ee.value=!1;const Pe={title:"Transaction",desc:"Order placed successfully",hash:Oe.hash,icon:"icon-icon-Increased"};Pe.res=Oe.res,me.showTransitionPending(Pe),await me.watchTransaction(Pe)&&setTimeout(()=>{me.getAccount(w.value.address),ce.getOrderList()},1e3)}else ke(!1),ze(!0)}catch(B){ke(!1),ze(!0),Ee.value=!1,console.log("trade-card openOrder error##",B)}},Y=g(!1),oe=g(),pe=g(""),we=g(),Q=g("0"),ye=g(""),We=g(),Re=g(!0),kt=async()=>{var B,q;let p;if(W.value){const te=new h(1).mul(Math.pow(10,(B=$==null?void 0:$.value)==null?void 0:B.decimals)).toString();p=new _a(te)}else{const te=new h(1).mul(Math.pow(10,(q=S==null?void 0:S.value)==null?void 0:q.decimals)).toString();p=new _a(te)}const s=await me.getBestRouterByServer($,S,p,W.value,w.value.address,!1,!1);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:805 ~ getTokenRouter ~ res:",s),s&&s.splitPaths&&s.splitPaths.length>0?(Re.value=!0,ce.setHaveMarket(!0)):(Re.value=!1,ce.setHaveMarket(!1))},Ra=async()=>{var Oe,Pe;const s=(await $fetch(`${H.Sui.api}/v2/sui/price?base_symbol_address_pair=${ca($.value.address)},${ca(S.value.address)}`)).data.prices||[],B=[];s.forEach(Ce=>{Ce.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?B.push({...Ce,base_symbol:"0x2::sui::SUI"}):B.push(Ce)});const q=Object.fromEntries(B.map(Ce=>[Ce.base_symbol,Ce]));console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:872 ~ setMarketPriceFromRate ~ RATES:",q);const te=new h((Oe=q[S.value.address])==null?void 0:Oe.price),mt=new h((Pe=q[$.value.address])==null?void 0:Pe.price);return{inputAmount:te,outputAmount:mt}},Ft=g(!1),Ot=async p=>{p||(Ft.value=!0);let s;try{s=await Ra()}catch(B){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:787 ~ setMarketPrice ~ error:",B)}if(Q.value="",console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:794 ~ setMarketPrice ~ res:",s),!s||s.outputAmount.toNumber()<=0&&s.inputAmount.toNumber()<=0)return We.value=!1,ye.value="",pe.value="",Q.value="",!1;We.value=!0,p?oe.value=Y.value?fe(s.outputAmount.div(s.inputAmount).toString()):fe(s.inputAmount.div(s.outputAmount).toString()):L.value=Y.value?fe(s.outputAmount.div(s.inputAmount).toString()):fe(s.inputAmount.div(s.outputAmount).toString()),setTimeout(()=>{Ft.value=!1},1e3)},jt=g(!1),zt=async()=>{jt.value=!0,await Ot(!0),ye.value="",pe.value="",Q.value="";const p=new h(L.value).sub(new h(oe.value)).div(new h(oe.value)).mul(100);Q.value=p.toNumber().toFixed(2);const s=Math.abs(p.toNumber()).toFixed(2);pe.value=`Limit order price is ${s}% ${Q.value>0?"higher":"lower"} than the market.`,Y.value?L.value>oe.value?(ye.value="",we.value="#68FFD8"):oe.value>L.value&&(ye.value=`Your limit order price is ${s}% ${Q.value>0?"higher":"lower"} than market. You are selling at a much higher rate. We recommend you to use`,we.value="#ffb62d"):L.value>oe.value?(ye.value=`Your limit order price is ${s}% ${Q.value>0?"higher":"lower"} than market. You are buying at a much lower rate. We recommend you to use`,we.value="#ffb62d"):oe.value>L.value&&(ye.value="",we.value="#68FFD8"),jt.value=!1};ae(()=>[$.value,S.value],([p,s])=>{p&&s&&(L.value="",Ot(!1))},{immediate:!0});const it=g(!1),Pa=p=>{const s=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,18})?).*$");p.target.value=p.target.value.replace(s,"$1"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1002 ~ priceChange ~ e.target.value:",p.target.value),L.value=p.target.value,ye.value="",pe.value="",Q.value="",it.value=!0,L.value&&L.value>0&&Re.value&&zt()},Aa=()=>{Y.value=!Y.value,L.value=fe(new h(1).div(new h(L.value)).toString()),L.value>0&&Re.value&&zt()},Ve=g(),Ye=g(),Ct=g(!1),la=(p,s)=>{var q,te;const B=je.importTokenListObj;p&&!Ae(p)&&p!=null&&p.isSelfBuilt&&!(B!=null&&B.hasOwnProperty(p==null?void 0:p.address))&&(r.value="fromCoin",Ve.value=p),s&&!Ae(s)&&s!=null&&s.isSelfBuilt&&!(B!=null&&B.hasOwnProperty(s==null?void 0:s.address))&&(r.value="toCoin",Ye.value=s),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1034 ~ getTokenSource ~ warningFromCoin.value:",Ve.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1046 ~ getTokenSource ~ warningToCoin.value:",Ye.value),((q=Ve==null?void 0:Ve.value)!=null&&q.address||(te=Ye==null?void 0:Ye.value)!=null&&te.address)&&(Ct.value=!0)};ae(()=>[$.value,S.value],([p,s])=>{p&&!Ae(p)&&la(p,{}),s&&!Ae(s)&&la({},s)},{immediate:!0});const Ha=()=>{r.value==="fromCoin"?$.value=ue.value:S.value=ue.value,Ct.value=!1,Ve.value="",Ye.value=""},Ua=b(()=>{var p,s;return`/swap?from=${(p=$==null?void 0:$.value)==null?void 0:p.address}&to=${(s=S==null?void 0:S.value)==null?void 0:s.address}`}),Ba=qa();ae(()=>[$.value,S.value],([p,s])=>{if(p&&s){if(kt(),he(),p||s){const B=`/limit/${p==null?void 0:p.address}-${s==null?void 0:s.address}`;Ba.push(B)}}else ce.setHaveMarket(!1)},{immediate:!0});const Lt=g(!1),Wt=b(()=>Xe.value.isShowChart),Vt=g(!0),Yt=g(!1);return(p,s)=>{var Pe,Ce,ia,oa;const B=ea,q=wt,te=st,mt=Xt,Oe=Qa;return u(),y("div",gn,[e("div",hn,[e("div",yn,[N($a,{"tab-list":_,"current-tab":"limit",onClickTab:s[0]||(s[0]=R=>p.$router.push(R.link))}),e("div",bn,[N(B,{"overlay-class-name":"ant-tooltip-text-color"},{title:j(()=>[U(o(Wt.value?"Hide reference price":"View reference price"),1)]),default:j(()=>[e("div",wn,[(u(),y("svg",{class:X(["chart-icon",Wt.value?"active-chart-icon":""]),"aria-hidden":"true",onClick:s[1]||(s[1]=R=>a(ce).setIsShowChart(!Wt.value))},Sn,2))])]),_:1}),e("div",xn,[N(Xa,{loading:V.value,"auto-refresh-time":ee.value,countdown:Se.value,"tooltip-placement":"left",onClickRefresh:se},null,8,["loading","auto-refresh-time","countdown"])])])]),e("div",kn,[e("div",{class:X(["card-container",[Vt.value?"input-block-add-top":"",Yt.value?"input-block-add-bottom":""]])},[N(va,{modelValue:a(E),"onUpdate:modelValue":s[2]||(s[2]=R=>ra(E)?E.value=R:null),"input-value":a(E),"coin-symbol":a($)?a($).symbol:null,"coin-name":a($)?a($).name:null,balance:m.value,"coin-icon":a($)?a($).logo_url:"",address:a($)?a($).address:"","swap-direction":"From",title:"Sell",onOnMax:s[3]||(s[3]=R=>l("fromCoin")),onOnHalf:s[4]||(s[4]=R=>O("fromCoin")),onOnInput:s[5]||(s[5]=R=>{E.value=R,W.value=!0,it.value=!1}),onOnFocus:s[6]||(s[6]=()=>{Vt.value=!0,Yt.value=!1}),onOnSelect:s[7]||(s[7]=R=>d("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),N(va,{modelValue:a(P),"onUpdate:modelValue":s[8]||(s[8]=R=>ra(P)?P.value=R:null),"input-value":a(P),havemax:!1,"coin-symbol":a(S)?a(S).symbol:null,"coin-name":a(S)?a(S).name:null,balance:v.value,"swap-direction":"To","coin-icon":a(S)?a(S).logo_url:"",address:a(S)?a(S).address:"",havehalf:!1,title:"Buy",onOnInput:s[9]||(s[9]=R=>{P.value=R,W.value=!1,it.value=!1}),onOnFocus:s[10]||(s[10]=()=>{Vt.value=!1,Yt.value=!0}),onOnSelect:s[11]||(s[11]=R=>d("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),e("div",{class:"exchange new-sui-exchange",onClick:s[12]||(s[12]=(...R)=>a(ha)&&a(ha)(...R))},Cn)]),e("div",Ln,[e("div",Tn,[e("div",In,[e("div",null,[Y.value?(u(),y("div",Mn," Sell "+o((Pe=a($))==null?void 0:Pe.symbol)+" at rate",1)):(u(),y("div",Nn,"Buy "+o((Ce=a(S))==null?void 0:Ce.symbol)+" at rate ",1)),jt.value?(u(),F(q,{key:2,indicator:a(c)},null,8,["indicator"])):(u(),F(B,{key:3,"overlay-class-name":"ant-tooltip-text-color"},Ja({default:j(()=>[L.value&&oe.value&&We.value&&Number(Q.value)!==0?(u(),y("div",{key:0,class:"rate",style:Jt({color:we.value})},o(Number(Q.value)>0&&Number(Q.value)<1e4?`+${Q.value}`:Number(Q.value)>1e4?">10000":Q.value)+"% ",5)):D("",!0)]),_:2},[pe.value?{name:"title",fn:j(()=>[U(o(pe.value),1)]),key:"0"}:void 0]),1024))]),We.value?(u(),F(te,{key:0,loading:Ft.value,class:"set-market max-btn",onClick:s[13]||(s[13]=R=>Ot(!1))},{default:j(()=>[U("Market")]),_:1},8,["loading"])):D("",!0)]),e("div",En,[N(mt,{value:L.value,"onUpdate:value":s[14]||(s[14]=R=>L.value=R),placeholder:"0.0",onOnInput:s[15]||(s[15]=()=>{W.value=!0}),onChange:Pa},null,8,["value"]),e("div",Rn,[e("span",null,o(Y.value?(ia=a(S))==null?void 0:ia.symbol:(oa=a($))==null?void 0:oa.symbol),1),e("div",{class:"right",onClick:Aa},An)])])]),e("div",{class:"sell-expires",onClick:s[16]||(s[16]=Zt(R=>k.value=!k.value,["stop"]))},[e("div",Hn,[Un,N(ss,{type:"expiryIn","xlink-href":"#icon-icon_tips"})]),e("div",Bn,[e("span",null,o(M.value),1),(u(),y("svg",{class:"icon","aria-hidden":"true",style:Jt(k.value?{transform:"rotate(180deg)"}:{})},Fn,4))]),e("div",{class:"expires-list",style:Jt(k.value?{display:"block"}:{})},[(u(),y(G,null,Ue(C,R=>e("div",{key:R,class:X(["expirer-item",R==M.value?"expirer-item-active":""]),onClick:xo=>R=="Custom"?z.value=!0:M.value=R},o(R),11,jn)),64))],4)])]),le(e("div",zn,[U(o(ye.value)+" ",1),e("span",{onClick:s[17]||(s[17]=R=>p.$router.push(Ua.value))},"Cetus Swap"),U(" instead. ")],512),[[ct,L.value&&oe.value&&Number(Q.value)!==0&&ye.value&&We.value]])]),w.value&&w.value.address?(u(),F(te,{key:0,disabled:Fe.value,class:X(["place-order-btn",_e.value&&_e.value.length>40?"place-order-btn-size":""]),loading:Ee.value,onClick:s[18]||(s[18]=R=>Lt.value=!0)},{default:j(()=>[U(o(_e.value),1)]),_:1},8,["disabled","class","loading"])):(u(),F(te,{key:1,class:"place-order-btn",onClick:s[19]||(s[19]=R=>w.value.setIsShowWalletModal(!0))},{default:j(()=>[U("Connect wallet")]),_:1})),z.value?(u(),F(Bs,{key:2,onCloseModal:s[20]||(s[20]=R=>z.value=!1),onSendTime:re})):D("",!0),T.value?(u(),F(as,{key:3,"existing-coins":i.value,"last-select-coin":I.value,"have-import-btn":!0,onOnSelect:ge,onOnClose:s[21]||(s[21]=R=>T.value=!1)},null,8,["existing-coins","last-select-coin"])):D("",!0),Ct.value?(u(),F(Oe,{key:4,"from-coin":Ve.value,"to-coin":Ye.value,"is-import-modal":!0,onClose:Ha,onClickContinue:s[22]||(s[22]=()=>{Ct.value=!1,Ve.value="",Ye.value=""})},null,8,["from-coin","to-coin"])):D("",!0),Lt.value?(u(),F(fn,{key:5,"from-coin":a($),"to-coin":a(S),"from-coin-amount":a(E),"to-coin-amount":a(P),direction:Y.value,price:L.value,"current-expires":M.value,onClose:s[23]||(s[23]=R=>Lt.value=!1),onToTrade:ne},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","direction","price","current-expires"])):D("",!0)])}}});const qo=ve(Wn,[["__scopeId","data-v-f01e7404"]]),Ca=t=>(Te("data-v-a8dd45fb"),t=t(),Ie(),t),Vn={key:0,class:"no-data"},Yn=Ca(()=>e("img",{src:ns,alt:""},null,-1)),qn={key:1,class:"no-data"},Jn=Ca(()=>e("img",{src:ls,alt:""},null,-1)),Kn=de({__name:"trade-no-data",props:{platform:{type:String,default:"platform"}},setup(t){const c=Be(),n=f=>{switch(f){case"orders":return"You don't have any open orders yet.";case"history":return"You don't have any order history.";case"claim":return"No History."}},_=b(()=>c);return(f,w)=>{const m=st;return _.value&&_.value.address?(u(),y("div",Vn,[Yn,e("span",null,o(n(t.platform)),1)])):(u(),y("div",qn,[Jn,N(m,{class:"connect-wallet",onClick:w[0]||(w[0]=v=>_.value.setIsShowWalletModal(!0))},{default:j(()=>[U("Connect Wallet")]),_:1})]))}}});const na=ve(Kn,[["__scopeId","data-v-a8dd45fb"]]),Gn={class:"trade-info"},Qn={alt:""},Xn={alt:""},Zn=de({__name:"trade-info",props:{order:{type:Object,default:()=>({})}},setup(t){return(c,n)=>{var w,m,v,l,O,r,i,I,T,d,C,x,k,M;const _=wa,f=Ut("image");return u(),y("div",Gn,[e("div",null,[le(e("img",Qn,null,512),[[f,(m=(w=t.order)==null?void 0:w.pay_coin_info)==null?void 0:m.logo_url]]),N(_,{address:(l=(v=t.order)==null?void 0:v.pay_coin_info)==null?void 0:l.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[le(e("img",Xn,null,512),[[f,(r=(O=t.order)==null?void 0:O.target_coin_info)==null?void 0:r.logo_url]]),N(_,{address:(I=(i=t.order)==null?void 0:i.target_coin_info)==null?void 0:I.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o(a(A)((T=t.order)==null?void 0:T.total_pay_amount))+" "+o((C=(d=t.order)==null?void 0:d.pay_coin_info)==null?void 0:C.symbol)+" â†’ "+o(a(A)((x=t.order)==null?void 0:x.totalBuyNum))+" "+o((M=(k=t.order)==null?void 0:k.target_coin_info)==null?void 0:M.symbol),1)])}}});const St=ve(Zn,[["__scopeId","data-v-d1826e2f"]]),Ge=t=>(Te("data-v-55e5ca76"),t=t(),Ie(),t),el={class:"claim-modal-content"},tl=Ge(()=>e("div",{class:"desc"}," For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ",-1)),al={class:"order-info-detail"},sl={class:"order-info"},nl=Ge(()=>e("div",{class:"label"},"Price",-1)),ll={class:"text"},il=Ge(()=>e("div",{class:"label"},"Filled size",-1)),ol={class:"text"},rl=Ge(()=>e("div",{class:"label"},"Expiry",-1)),ul={class:"text"},cl={class:"tab"},dl=["onClick"],vl={key:0,class:"claim-content"},_l={class:"inp-box"},ml=Ge(()=>e("div",{class:"top"},[e("div",{class:"avalibale-claim"},"Avalibale to claim")],-1)),pl={class:"bottom"},fl={class:"token-info"},gl={alt:""},hl={key:1,class:"history-list"},yl={class:"amount"},bl=Ge(()=>e("div",{class:"label"},"Amount",-1)),wl={class:"text"},$l={alt:""},Sl={class:"time"},xl=Ge(()=>e("div",{class:"label"},"Time",-1)),kl={class:"text"},Ol=["href"],Cl=Ge(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),Ll=[Cl],Tl={key:2,class:"loading-box"},Il=de({__name:"trade-claim-modal",props:{order:{type:Object,default:()=>({})}},emits:["closeModal"],setup(t,{emit:c}){const n=t,_=["Claim","History"],f=g("Claim"),w=g(),m=V=>{const se=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${n.order.target_coin_info.decimals}})?).*$`);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ props.order.target_coin_info.decimals:",n.order.target_coin_info.decimals),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ reg:",se),w.value=V.target.value.replace(se,"$1")},v=g(!0);ae(()=>n.order.target_balance,V=>{V&&V>0&&v.value?(w.value=V,v.value=!1):w.value=0},{immediate:!0});const l=b(()=>!!(w.value>n.order.target_balance||Z.value||!w.value||n.order.target_balance==0)),O=b(()=>w.value>n.order.target_balance?"Maximum amount that can be withdrawn":w.value?"Confirm Claim":"Claim"),r=_t(),i=b(()=>r),I=Be(),T=b(()=>I),d=He("Sui"),{setTransactionTxid:C,setIsShowWaiting:x,setIsShowSuccess:k,setIsShowRejected:M,setTransactionDesc:z}=r,L=Bt("Sui"),Z=g(!1),re=Me(),ue=b(()=>re),ge=async()=>{var V,se;Z.value=!0;try{const be=`Claim ${A(w.value)} ${(se=(V=n.order)==null?void 0:V.target_coin_info)==null?void 0:se.symbol}`;z(be),x(!0);const he={order_id:n.order.id,pay_coin_type:n.order.pay_coin_type,target_coin_type:n.order.target_coin_type};console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:194 ~ confirmClaim ~ params:",he);const De=await d.claimTargetCoin(he),Ne=await L.signAndExecuteTransactionBlock(T.value.currentWallet,De),ie=L.handleTx(Ne);if(ie&&ie.hash){C(ie.hash),x(!1),k(!0);const _e={title:"Transaction",desc:"Claim successfully",hash:ie.hash,icon:"icon-icon-Increased"};_e.res=ie.res,L.showTransitionPending(_e),await L.watchTransaction(_e)&&(setTimeout(()=>{L.getAccount(T.value.address),re.getOrderList()},2e3),setTimeout(()=>{w.value=0,Z.value=!1},4e3))}else x(!1),M(!0)}catch(be){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:222 ~ confirmClaim ~ error:",be),x(!1),M(!0),Z.value=!1}};ae(()=>f.value,V=>{V=="History"&&re.getLimitOrderClaimHistory(n.order)},{immediate:!0});const ee=b(()=>ue.value.currentOrderClaimHistory),Se=b(()=>i.value.currentExplorer),xe=b(()=>ue.value.claimHistoryLoading);return(V,se)=>{const be=Xt,he=st,De=wt,Ne=Ut("image");return u(),F(a(Qt),{title:"Claim",visible:!0,width:"440px",footer:null,onCancel:se[1]||(se[1]=ie=>V.$emit("closeModal"))},{default:j(()=>{var ie,_e,Fe,ce,Xe,je,Ze,ke,et,ze,tt,Ee,me;return[e("div",el,[tl,e("div",al,[N(St,{order:t.order},null,8,["order"]),e("div",sl,[e("div",null,[nl,e("div",ll,o(a(A)(t.order.reseverRate))+" "+o((_e=(ie=t.order)==null?void 0:ie.pay_coin_info)==null?void 0:_e.symbol)+" per "+o((ce=(Fe=t.order)==null?void 0:Fe.target_coin_info)==null?void 0:ce.symbol),1)]),e("div",null,[il,e("div",ol,[U(o(a(A)((Xe=t.order)==null?void 0:Xe.obtained_amount))+"/"+o(a(A)((je=t.order)==null?void 0:je.totalBuyNum))+" "+o((ke=(Ze=t.order)==null?void 0:Ze.target_coin_info)==null?void 0:ke.symbol)+" ",1),e("span",null,"("+o((et=t.order)==null?void 0:et.obtainedRatio)+"%)",1)])]),e("div",null,[rl,e("div",ul,o(a(Ke)(t.order.expire_ts,""))+" (UTC) ",1)])])]),e("div",cl,[(u(),y(G,null,Ue(_,ne=>e("div",{key:ne,class:X(["tab-item",f.value==ne?"tab-item-active":""]),onClick:Y=>f.value=ne},o(ne),11,dl)),64))]),f.value=="Claim"?(u(),y("div",vl,[e("div",_l,[ml,e("div",pl,[N(be,{value:w.value,"onUpdate:value":se[0]||(se[0]=ne=>w.value=ne),disabled:"",onChange:m},null,8,["value"]),e("div",fl,[le(e("img",gl,null,512),[[Ne,(tt=(ze=t.order)==null?void 0:ze.target_coin_info)==null?void 0:tt.logo_url]]),e("span",null,o((me=(Ee=t.order)==null?void 0:Ee.target_coin_info)==null?void 0:me.symbol),1)])])]),N(he,{disabled:l.value,class:"claim-btn",loading:Z.value,onClick:ge},{default:j(()=>[U(o(O.value),1)]),_:1},8,["disabled","loading"])])):(u(),y("div",hl,[!xe.value&&ee.value&&ee.value.length>0?(u(!0),y(G,{key:0},Ue(ee.value,ne=>{var Y,oe,pe,we;return u(),y("div",{key:ne.digest,class:"history-item"},[e("div",yl,[bl,e("div",wl,[le(e("img",$l,null,512),[[Ne,(oe=(Y=t.order)==null?void 0:Y.target_coin_info)==null?void 0:oe.logo_url]]),e("span",null,o(a(A)(ne.claimed_amount))+" "+o((we=(pe=t.order)==null?void 0:pe.target_coin_info)==null?void 0:we.symbol),1)])]),e("div",Sl,[xl,e("div",kl,[e("span",null,o(a(Ke)(Number(ne.timestampMs),""))+" (UTC)",1),e("a",{target:"_blank",href:a(ta)(Se.value,"tx",ne.digest)},Ll,8,Ol)])])])}),128)):!xe.value&&ee.value&&ee.value.length==0?(u(),F(na,{key:1,platform:"claim"})):xe.value&&ee.value&&ee.value.length==0?(u(),y("div",Tl,[N(De)])):D("",!0)]))])]}),_:1})}}});const La=ve(Il,[["__scopeId","data-v-55e5ca76"]]),xt=t=>(Te("data-v-0f062fdc"),t=t(),Ie(),t),Ml={class:"trade-order-card-list"},Nl={class:"order-info"},El=xt(()=>e("div",{class:"label"},"Price",-1)),Rl={class:"text"},Pl=["onClick"],Al=xt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Hl=[Al],Ul=xt(()=>e("div",{class:"label"},"Filled size",-1)),Bl={class:"text"},Dl=xt(()=>e("div",{class:"label"},"Expiry",-1)),Fl={class:"text"},jl=xt(()=>e("div",{class:"trade-claim-btn trade-claim-btn-disabled"},"Claim",-1)),zl=de({__name:"trade-order-card",props:{pageList:{type:Object,default:()=>({})}},setup(t){const c=g(),n=g(!1),_=Me(),f=b(()=>_),w=b(()=>f.value.cancelOrderId);return(m,v)=>{const l=ea,O=st,r=La;return u(),y("div",Ml,[(u(!0),y(G,null,Ue(t.pageList,i=>{var I,T,d,C,x;return u(),y("div",{key:i.id,class:"trade-order-card"},[N(St,{order:i},null,8,["order"]),e("div",Nl,[e("div",null,[El,e("div",Rl,[i.direction?(u(),y(G,{key:0},[U(o(a(A)(i==null?void 0:i.rate))+" "+o((I=i==null?void 0:i.target_coin_info)==null?void 0:I.symbol)+" per "+o((T=i==null?void 0:i.pay_coin_info)==null?void 0:T.symbol),1)],64)):(u(),y(G,{key:1},[U(o(a(A)(i==null?void 0:i.reseverRate))+" "+o((d=i==null?void 0:i.pay_coin_info)==null?void 0:d.symbol)+" per "+o((C=i==null?void 0:i.target_coin_info)==null?void 0:C.symbol),1)],64)),e("div",{class:"right",onClick:k=>i.direction=!i.direction},Hl,8,Pl)])]),e("div",null,[Ul,e("div",Bl,[U(o(a(A)(i==null?void 0:i.obtained_amount))+"/"+o(a(A)(i==null?void 0:i.totalBuyNum))+" "+o((x=i==null?void 0:i.target_coin_info)==null?void 0:x.symbol)+" ",1),e("span",null,"("+o(i==null?void 0:i.obtainedRatio)+"%)",1)])]),e("div",null,[Dl,e("div",Fl,o(a(Ke)(i.created_ts,""))+" (UTC)",1)])]),i.target_balance==0&&i.obtained_amount==0?(u(),F(l,{key:0,"overlay-class-name":"ant-tooltip-text-color"},{title:j(()=>[U(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:j(()=>[jl]),_:1})):(u(),F(O,{key:1,class:"trade-claim-btn",onClick:()=>{c.value=i,n.value=!0}},{default:j(()=>[U("Claim")]),_:2},1032,["onClick"])),N(O,{class:"trade-cancel-btn cancel-btn",loading:w.value=="all"||w.value==i.id,onClick:k=>a(sa)(i)},{default:j(()=>[U("Cancel")]),_:2},1032,["loading","onClick"])])}),128)),n.value?(u(),F(r,{key:0,order:c.value,onCloseModal:v[0]||(v[0]=i=>n.value=!1)},null,8,["order"])):D("",!0)])}}});const Wl=ve(zl,[["__scopeId","data-v-0f062fdc"]]),Vl=de({props:{currentPageNum:{type:Number,default:null},pageSize:{type:[Number,String],default:""},total:{type:Number,default:null}},setup(t){return{itemRender:(n,_,f)=>(n==null?void 0:n.type)==="prev"?pt("svg",{class:"icon icon-prev","aria-hidden":"true"},[pt("use",{"xlink:href":"#icon-icon_left"})]):(n==null?void 0:n.type)==="next"?pt("svg",{class:"icon icon-next","aria-hidden":"true"},[pt("use",{"xlink:href":"#icon-icon_right"})]):f}}});function Yl(t,c,n,_,f,w){const m=Ga;return u(),F(m,{current:t.currentPageNum,"page-size":t.pageSize,"item-render":t.itemRender,total:t.total,simple:"",onChange:c[0]||(c[0]=v=>{t.$emit("change",v)})},null,8,["current","page-size","item-render","total"])}const Ta=ve(Vl,[["render",Yl]]),Ia=t=>(Te("data-v-42d41035"),t=t(),Ie(),t),ql={class:"trade-orders"},Jl={key:0},Kl=Ia(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Price"),e("th",null,"Filled size"),e("th",null,"Expiry"),e("th",null,"Action")])],-1)),Gl={class:"order-price"},Ql=["onClick"],Xl=Ia(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Zl=[Xl],ei={class:"filled-size"},ti={class:"action"},ai={key:4,class:"loading-box"},si=de({__name:"trade-orders",setup(t){const c=Be(),n=b(()=>c),_=Me(),f=b(()=>_);b(()=>f.value.limitOrderList);const w=$t(),m=b(()=>w);b(()=>m.value.tokensObj),ae(()=>n.value.address,O=>{O&&_.getOrderList()},{immediate:!0});const v=b(()=>f.value.orderListLoading),l=(O,r)=>{console.log(O,"page"),gt.value=O};return(O,r)=>{const i=st,I=ea,T=wt;return u(),y("div",ql,[n.value&&n.value.address&&a(K)&&a(K).length>0?(u(),y("table",Jl,[Kl,e("tbody",null,[(u(!0),y(G,null,Ue(a(K),d=>{var C,x,k,M,z;return u(),y("tr",{key:d.id},[e("td",null,[N(St,{order:d},null,8,["order"])]),e("td",null,[e("div",Gl,[d.direction?(u(),y(G,{key:0},[U(o(a(A)(d==null?void 0:d.rate))+" "+o((C=d==null?void 0:d.target_coin_info)==null?void 0:C.symbol)+" per "+o((x=d==null?void 0:d.pay_coin_info)==null?void 0:x.symbol),1)],64)):(u(),y(G,{key:1},[U(o(a(A)(d==null?void 0:d.reseverRate))+" "+o((k=d==null?void 0:d.pay_coin_info)==null?void 0:k.symbol)+" per "+o((M=d==null?void 0:d.target_coin_info)==null?void 0:M.symbol),1)],64)),e("div",{class:"right",onClick:()=>{d.direction=!d.direction,a(hs)(d)}},Zl,8,Ql)])]),e("td",null,[e("div",ei,[U(o(a(A)(d==null?void 0:d.obtained_amount))+"/"+o(a(A)(d==null?void 0:d.totalBuyNum))+" "+o((z=d==null?void 0:d.target_coin_info)==null?void 0:z.symbol)+" ",1),e("span",null,"("+o(d==null?void 0:d.obtainedRatio)+"%)",1)])]),e("td",null,o(a(Ke)(d==null?void 0:d.expire_ts,""))+" (UTC)",1),e("td",null,[e("div",ti,[N(I,{"overlay-class-name":"expiry-tooltip ant-tooltip-text-color"},{title:j(()=>[U(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:j(()=>[N(i,{class:"trade-claim-btn",disabled:d.target_balance==0&&d.obtained_amount==0,onClick:()=>{rt.value=d,Kt.value=!0}},{default:j(()=>[U("Claim")]),_:2},1032,["disabled","onClick"])]),_:2},1024),N(i,{class:"trade-cancel-btn cancel-btn",loading:a(ya)=="all"||a(ya)==d.id,onClick:L=>a(sa)(d)},{default:j(()=>[U("Cancel")]),_:2},1032,["loading","onClick"])])])])}),128))])])):D("",!0),n.value&&n.value.address&&a(K)&&a(K).length>0?(u(),F(Wl,{key:1,"page-list":a(K)},null,8,["page-list"])):D("",!0),(a(K)&&a(K).length==0||!n.value.address)&&!v.value?(u(),F(na,{key:2,platform:"orders"})):D("",!0),a(K)&&a(K).length>0?(u(),y("div",{key:3,class:X(["pagination",a(K)&&a(K).length>0&&v.value?"loading-pagination":""])},[N(Ta,{"page-size":a(Et),total:a(ht)&&a(ht).length,"current-page-num":a(gt),onChange:l},null,8,["page-size","total","current-page-num"])],2)):D("",!0),a(K)&&a(K).length==0&&v.value?(u(),y("div",ai,[N(T)])):D("",!0),a(K)&&a(K).length>0&&v.value?(u(),F(T,{key:5,class:"order-spin"})):D("",!0),a(Kt)?(u(),F(La,{key:6,order:a(rt),onCloseModal:r[0]||(r[0]=d=>Kt.value=!1)},null,8,["order"])):D("",!0)])}}});const ni=ve(si,[["__scopeId","data-v-42d41035"]]),dt=t=>{switch(t){case"Running":return{class:"order-running",path:"#icon-icon_completed"};case"Completed":return{class:"order-running",path:"#icon-icon_completed"};case"Cancelled":return{class:"order-cancelled",path:"#icon-icon_cancelled"};default:return{class:"",path:""}}},Je=t=>{switch(t){case"OrderPlacedEvent":return{path:"#icon-tx_add1",class:"order-status-create",text:"Create"};case"OrderCanceledEvent":return{path:"#icon-icon_cancelled",class:"order-status-cancel",text:"Cancel"};case"FlashLoanEvent":return{path:"#icon-tx_swap1",class:"order-status-trade",text:"Trade"};default:return{path:"",class:"",text:""}}},vt=Me(),$e=g({}),Ma=(t,c)=>{$e.value[c]?$e.value[c]=!1:($e.value[c]=!0,vt.getLimitOrderLogs()),console.log($e.value,"##isShowPosition.value")},li=Be(),Na=b(()=>li),ii=$t(),oi=b(()=>ii),Pt=b(()=>oi.value.tokensObj),Ea=b(()=>vt),At=b(()=>Ea.value.limitOrderHistoryList),ba=Bt("Sui"),ri=He("Sui"),yt=g(1),Ht=g(10),J=g([]),bt=g([]),ui=async()=>{const t=Ht.value*yt.value-Ht.value;let c=yt.value*Ht.value;c=c>At.value.length?At.value.length:c;const n=At.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:174 ~ updateOrderList ~ result:",n),console.log("trade-card updateOrderList tokenObj",Pt.value);const _=[];if(n.length>0){const f=n.filter((w,m)=>m>=t&&m<c);for(let w=0;w<f.length;w++){const m=f[w];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:188 ~ updateOrderList ~ order:",m,m.order_id);const v=Pt.value[Tt(m.pay_coin,!1)]||await ba.getTokenBySymbol({},Tt(m.pay_coin,!1)),l=Pt.value[Tt(m.target_coin,!1)]||await ba.getTokenBySymbol({},Tt(m.target_coin,!1)),O=fe(ri.rateToPrice(m.rate,v.decimals,l.decimals).toString(),v.decimals);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:211 ~ updateOrderList ~ rate:",O);const r=new h(m.total_pay_amount).div(Math.pow(10,v.decimals)).toString(),i=new h(m.remaining_amount).div(Math.pow(10,v.decimals)).toString(),I=new h(r).sub(new h(i)).toString(),T=new h(m.total_pay_amount).mul(new h(Math.pow(10,18))).div(new h(m.rate)).ceil().div(new h(Math.pow(10,l.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:226 ~ updateOrderList ~ order.rate:",m.rate);const d=fe(new h(1).div(new h(O)).toString()),C=m.events.map(x=>{const k=x.event_type.split("::")[2];let M="";return k=="OrderPlacedEvent"?M=new h(x.amount).div(Math.pow(10,v.decimals)).toString():k=="FlashLoanEvent"?M=new h(x.amount).div(Math.pow(10,l.decimals)).toString():k=="OrderCanceledEvent"&&(M=new h(x.amount).div(Math.pow(10,v.decimals)).toString()),{...x,amount:M,type:k}}).sort((x,k)=>k.block_time-x.block_time);_.push({...m,pay_coin_info:v,target_coin_info:l,total_pay_amount:r,rate:O,remaining_amount:i,transaction_ratio:qe(new h(m.total_pay_amount).sub(new h(m.remaining_amount)).div(new h(m.total_pay_amount)).mul(100).toString(),2),transaction_volume:I,status:m.cancel_reason==0?"Completed":"Cancelled",events:C,totalBuyNum:T,reseverRate:d,direction:!0})}J.value=_}bt.value=n,vt.setHistoryNum(n.length),console.log("allList",bt.value),console.log("pageList",J.value)},ci=(t,c)=>{console.log(t,"page"),yt.value=t};ae(()=>[At.value,yt.value,Pt.value,Na.value.address],([t,c,n,_])=>{t&&t.length>0&&n&&!Ae(n)&&_?ui():(J.value=[],bt.value=[],vt.setHistoryNum(0))},{immediate:!0});ae(()=>Na.value.address,t=>{t&&(vt.getLimitOrderLogs(),vt.getLimitOrderHistory(t))},{immediate:!0});const Nt=b(()=>Ea.value.orderHistoryLoading),Qe=t=>(Te("data-v-c0f555a8"),t=t(),Ie(),t),di={class:"history-card-list"},vi={class:"history-info"},_i=Qe(()=>e("div",{class:"label"},"Limit price",-1)),mi={class:"text"},pi=["onClick"],fi=Qe(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),gi=[fi],hi=Qe(()=>e("div",{class:"label"},"Expiry",-1)),yi={class:"text"},bi=Qe(()=>e("div",{class:"label"},"Filled size",-1)),wi={class:"text"},$i=Qe(()=>e("div",{class:"label"},"Status",-1)),Si={class:"text"},xi=["onClick"],ki=["xlink:href"],Oi=Qe(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Ci=[Oi],Li={class:"order-log-num"},Ti={class:"order-status"},Ii=["xlink:href"],Mi={class:"create-ts"},Ni={key:0},Ei={key:1},Ri={class:"view-trans"},Pi=["href"],Ai=Qe(()=>e("span",null,"View Txn.",-1)),Hi=Qe(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),Ui=[Ai,Hi],Bi=de({__name:"trade-history-card",props:{pageList:{type:Object,default:()=>[]}},setup(t){const c=_t(),n=b(()=>c),_=b(()=>n.value.currentExplorer),f=Me(),w=b(()=>f);return b(()=>w.value.orderHistoryObj),(m,v)=>(u(),y("div",di,[(u(!0),y(G,null,Ue(t.pageList,(l,O)=>{var r,i,I,T,d;return u(),y("div",{key:l.expire_ts,class:"history-card-item"},[N(St,{order:l},null,8,["order"]),e("div",vi,[e("div",null,[_i,e("div",mi,[l.direction?(u(),y(G,{key:1},[U(o(a(A)(l==null?void 0:l.reseverRate))+" "+o((I=l==null?void 0:l.pay_coin_info)==null?void 0:I.symbol)+" per "+o((T=l==null?void 0:l.target_coin_info)==null?void 0:T.symbol),1)],64)):(u(),y(G,{key:0},[U(o(a(A)(l==null?void 0:l.rate))+" "+o((r=l==null?void 0:l.target_coin_info)==null?void 0:r.symbol)+" per "+o((i=l==null?void 0:l.pay_coin_info)==null?void 0:i.symbol),1)],64)),e("div",{class:"right",onClick:Zt(C=>l.direction=!l.direction,["stop"])},gi,8,pi)])]),e("div",null,[hi,e("div",yi,o(a(Ke)(l==null?void 0:l.expire_ts,""))+" (UTC)",1)]),e("div",null,[bi,e("div",wi,[U(o(a(A)(l==null?void 0:l.transaction_volume))+"/"+o(a(A)(l==null?void 0:l.total_pay_amount))+" "+o((d=l==null?void 0:l.pay_coin_info)==null?void 0:d.symbol)+" ",1),e("span",null,"("+o(l==null?void 0:l.transaction_ratio)+"%)",1)])]),e("div",null,[$i,e("div",Si,[e("div",{class:"order-status",onClick:C=>a(Ma)(l,O)},[(u(),y("svg",{class:X(["order-status-icon",a(dt)(l.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(dt)(l.status).path},null,8,ki)],2)),e("span",{class:X(a(dt)(l.status).class)},o(l.status),3),(u(),y("svg",{class:X(["arrow-icon",a($e)[O]?"open-arrow":""]),"aria-hidden":"true"},Ci,2))],8,xi)])])]),a($e)[O]?(u(!0),y(G,{key:0},Ue(l.events,C=>{var x,k,M;return u(),y("div",{key:C,class:"order-log"},[e("div",Li,[e("div",Ti,[e("div",null,[(u(),y("svg",{class:X(["status-icon",a(Je)(C.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Je)(C.type).path},null,8,Ii)],2)),e("span",{class:X(["text-status",a(Je)(C.type).class])},o(a(Je)(C.type).text),3)]),e("div",Mi,o(a(Ke)(Number(C.block_time),""))+" (UTC) ",1)]),e("div",null,[C.type=="FlashLoanEvent"?(u(),y("span",Ni,"+"+o(a(A)(C.amount))+" "+o((x=l==null?void 0:l.buy_coin_info)==null?void 0:x.symbol)+" "+o((k=l==null?void 0:l.target_coin_info)==null?void 0:k.symbol),1)):(u(),y("span",Ei,o(C.type=="OrderPlacedEvent"?"-":"+")+o(a(A)(C.amount))+" "+o((M=l==null?void 0:l.pay_coin_info)==null?void 0:M.symbol),1)),e("div",Ri,[e("a",{href:a(ta)(_.value,"tx",C.tx),target:"_blank"},Ui,8,Pi)])])])])}),128)):D("",!0)])}),128))]))}});const Di=ve(Bi,[["__scopeId","data-v-c0f555a8"]]),lt=t=>(Te("data-v-13885b75"),t=t(),Ie(),t),Fi={class:"trade-history"},ji={key:0},zi=lt(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Limit price"),e("th",null,"Expiry"),e("th",null,"Filled size"),e("th",null,"Status")])],-1)),Wi=["onClick"],Vi={class:"order-price"},Yi=["onClick"],qi=lt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Ji=[qi],Ki={class:"order-status"},Gi=["xlink:href"],Qi=lt(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Xi=[Qi],Zi={class:"order-log"},eo={class:"order-log-num"},to=["xlink:href"],ao={key:0},so={key:1},no=lt(()=>e("td",null,null,-1)),lo=lt(()=>e("td",null,null,-1)),io={class:"create-ts"},oo={class:"view-trans"},ro=["href"],uo=lt(()=>e("span",null,"View Transaction",-1)),co=lt(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),vo=[uo,co],_o={style:{height:"4px",background:"unset"}},mo={class:"tr-line",style:{height:"24px",background:"unset"}},po={key:4,class:"loading-box"},fo=de({__name:"trade-history",setup(t){const c=_t(),n=b(()=>c),_=b(()=>n.value.currentExplorer),f=Me();b(()=>f);const w=Be(),m=b(()=>w);return ae(()=>m.value.address,v=>{v&&(f.getLimitOrderLogs(),f.getLimitOrderHistory(v))},{immediate:!0}),(v,l)=>{const O=wt;return u(),y("div",Fi,[m.value&&m.value.address&&a(J)&&a(J).length>0?(u(),y("table",ji,[zi,e("tbody",null,[(u(!0),y(G,null,Ue(a(J),(r,i)=>{var I,T,d,C,x;return u(),y(G,{key:r.id},[e("tr",{class:X(["order",i!==a(J).length-1?"order-border":""]),onClick:k=>a(Ma)(r,i)},[e("td",null,[N(St,{order:r},null,8,["order"])]),e("td",null,[e("div",Vi,[r.direction?(u(),y(G,{key:1},[U(o(a(A)(r==null?void 0:r.reseverRate))+" "+o((d=r==null?void 0:r.pay_coin_info)==null?void 0:d.symbol)+" per "+o((C=r==null?void 0:r.target_coin_info)==null?void 0:C.symbol),1)],64)):(u(),y(G,{key:0},[U(o(a(A)(r==null?void 0:r.rate))+" "+o((I=r==null?void 0:r.target_coin_info)==null?void 0:I.symbol)+" per "+o((T=r==null?void 0:r.pay_coin_info)==null?void 0:T.symbol),1)],64)),e("div",{class:"right",onClick:Zt(k=>r.direction=!r.direction,["stop"])},Ji,8,Yi)])]),e("td",null,o(a(Ke)(r==null?void 0:r.expire_ts,""))+" (UTC)",1),e("td",null,[U(o(a(A)(r==null?void 0:r.transaction_volume))+"/"+o(a(A)(r==null?void 0:r.total_pay_amount))+" "+o((x=r==null?void 0:r.pay_coin_info)==null?void 0:x.symbol)+" ",1),e("span",null,"("+o(r==null?void 0:r.transaction_ratio)+"%)",1)]),e("td",null,[e("div",Ki,[(u(),y("svg",{class:X(["order-status-icon",a(dt)(r.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(dt)(r.status).path},null,8,Gi)],2)),e("span",{class:X(a(dt)(r.status).class)},o(r.status),3),(u(),y("svg",{class:X(["arrow-icon",a($e)[i]?"open-arrow":""]),"aria-hidden":"true"},Xi,2))])])],10,Wi),a($e)[i]?(u(),y(G,{key:0},[(u(!0),y(G,null,Ue(r.events,k=>{var M,z,L;return u(),y(G,{key:k},[le(e("tr",Zi,[e("td",null,[e("div",eo,[(u(),y("svg",{class:X(["status-icon",a(Je)(k.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Je)(k.type).path},null,8,to)],2)),e("span",{class:X(["text-status",a(Je)(k.type).class])},o(a(Je)(k.type).text),3),k.type=="FlashLoanEvent"?(u(),y("span",ao,"+"+o(a(A)(k.amount))+" "+o((M=r==null?void 0:r.buy_coin_info)==null?void 0:M.symbol)+" "+o((z=r==null?void 0:r.target_coin_info)==null?void 0:z.symbol),1)):(u(),y("span",so,o(k.type=="OrderPlacedEvent"?"-":"+")+o(a(A)(k.amount))+" "+o((L=r==null?void 0:r.pay_coin_info)==null?void 0:L.symbol),1))])]),no,lo,e("td",null,[e("span",io,o(a(Ke)(Number(k.block_time),""))+" (UTC)",1)]),e("td",null,[e("div",oo,[e("a",{href:a(ta)(_.value,"tx",k.tx),target:"_blank"},vo,8,ro)])])],512),[[ct,a($e)[i]]]),le(e("tr",_o,null,512),[[ct,a($e)[i]]])],64)}),128)),le(e("tr",mo,null,512),[[ct,a($e)[i]]])],64)):D("",!0)],64)}),128))])])):D("",!0),m.value&&m.value.address&&a(J)&&a(J).length>0?(u(),F(Di,{key:1,"page-list":a(J)},null,8,["page-list"])):D("",!0),a(J)&&a(J).length==0&&!a(Nt)?(u(),F(na,{key:2,platform:"history"})):D("",!0),a(J)&&a(J).length>0?(u(),y("div",{key:3,class:X(["pagination",a(J)&&a(J).length>0&&a(Nt)?"loading-pagination":""])},[N(Ta,{"page-size":a(Ht),total:a(bt)&&a(bt).length,"current-page-num":a(yt),onChange:a(ci)},null,8,["page-size","total","current-page-num","onChange"])],2)):D("",!0),a(J)&&a(J).length==0&&a(Nt)?(u(),y("div",po,[N(O)])):D("",!0),a(J)&&a(J).length>0&&a(Nt)?(u(),F(O,{key:5,class:"order-spin"})):D("",!0)])}}});const go=ve(fo,[["__scopeId","data-v-13885b75"]]),ho={class:"order-or-history"},yo={class:"tab-list"},bo=de({__name:"trade-tab",setup(t){const c=Me(),n=b(()=>c),_=b(()=>n.value.orderNum),f=b(()=>n.value.historyNum),w=Be(),m=b(()=>w),v=b(()=>[{value:"orders",label:"Open Orders",numValue:ot.value=="orders"&&m.value&&m.value.address?_:""},{value:"history",label:"Order History",numValue:ot.value=="history"&&m.value&&m.value.address?f:""}]);return(l,O)=>(u(),y("div",ho,[e("div",yo,[N($a,{"tab-list":v.value,"current-tab":a(ot),onClickTab:O[0]||(O[0]=r=>ot.value=r.value)},null,8,["tab-list","current-tab"])]),a(ot)=="orders"&&m.value&&m.value.address&&_.value>0?(u(),y("div",{key:0,class:"clear-all",onClick:O[1]||(O[1]=r=>a(sa)({},!0))},"Cancel All")):D("",!0)]))}});const wo=ve(bo,[["__scopeId","data-v-b27fb2b8"]]),$o={class:"trade-order"},So=de({__name:"trade-record",setup(t){return(c,n)=>(u(),y("div",$o,[N(wo),a(ot)=="orders"?(u(),F(ni,{key:0})):(u(),F(go,{key:1}))]))}});const Jo=ve(So,[["__scopeId","data-v-a8fdd16c"]]);export{Ta as N,St as T,Wl as _,ya as a,sa as b,rt as c,Et as d,ht as e,gt as f,na as g,La as h,Kt as i,J as j,Di as k,Ht as l,bt as m,yt as n,Nt as o,K as p,ci as q,wo as r,ot as s,ka as t,Me as u,qo as v,Na as w,Yo as x,Jo as y};
