import{a as B,r as g,m as C,D as q,y as J,C as Pe,o as d,f as y,h as n,v as w,F as ae,s as ne,i as c,x as M,a1 as Ae,d7 as He,J as Re,z as le,e as Y,u as xe,c as E,S as Ue,M as L,w as G,p as re,k as ie,b as We}from"./entry.5ab2e052.js";/* empty css              */import"./index.c34c7051.js";import{a as ce}from"./pool.bfdb664c.js";import{k as z,g as se,c as Z}from"./index.9a18b0fa.js";import{l as ze}from"./lodash.8281e542.js";import{u as K}from"./stats.808edb92.js";import{f as Be}from"./formatter.22643201.js";import"./index.ea9f07ed.js";import{i as Ye}from"./import-icon.de3e6c66.js";import{R as ue,A as Fe,P as Me}from"./to-add.931f49de.js";import{u as ee}from"./useToken.6dad11ae.js";import{T as pe,N as de,H as me,a as Ee}from"./h5-table-card.28024282.js";import{S as Je}from"./select-tab.f6fb2ce3.js";import{u as Oe}from"./useStatsData.2f848329.js";import"./install.ffe2a480.js";import"./decimal.0bdeb344.js";/* empty css              */import"./coin-img.f3028f4e.js";import"./token-warning_2x.9b815d32.js";import"./token.13dac837.js";import"./token-warning-new.259e2e0b.js";import"./nuxt-link.9c1005dc.js";import"./icon_farms_2x.84bf376f.js";import"./farms.42fe1902.js";import"./icon_autopools_2x.15f8c566.js";import"./icon_autopools_2x.b4f00087.js";import"./icon_fee_2x.57a012ac.js";import"./icon_rewards_2x.f4e64de9.js";import"./pool.d76a72f3.js";import"./fetchFun.4cb836ab.js";const je={class:"stats-chart-container"},qe={class:"chart-top"},Ge={class:"trading-vol"},Ke={class:"title"},Qe={class:"text"},Xe=["innerHTML"],Ze={class:"time-list"},et=["onClick"],tt={key:0,class:"loading-box"},ot={class:"chart-content"},st=["id"];var X=(e=>(e.D="day",e.W="wek",e.M="mon",e))(X||{}),ve=(e=>(e[e.D=40]="D",e[e.W=30]="W",e[e.M=20]="M",e))(ve||{}),U=(e=>(e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec",e))(U||{}),_e=(e=>(e[e.D=1]="D",e[e.W=4]="W",e[e.M=12]="M",e))(_e||{}),he=(e=>(e[e.D=1]="D",e[e.W=2]="W",e[e.M=4]="M",e))(he||{});const at=B({__name:"stats-sui-chart",props:{chartType:{type:String,default:"tvl"}},setup(e){const i=e,l=g("D"),T=["D","W","M"],h=g(""),k=g("24H"),m=ce();C(()=>m);const v=g(),s=g(),f=g(""),I=g(!1),A=K(),a=C(()=>A),u=C(()=>a.value.overallStatistics);q(()=>[u.value,i.chartType,f.value],([r,S,V])=>{Z(r)||(f.value=S=="tvl"?r.totalValueLockedDisplay:r.volInUsd24h)},{immediate:!0});const p=async()=>{I.value=!0;try{const r=ve[l.value],{data:S}=i.chartType=="tvl"?await fetch(`${se.Sui.api}/v2/sui/histogram/all?date_type=${X[l.value]}&typ=pure_tvl`).then(_=>_.json()):await fetch(`${se.Sui.api}/v2/sui/histogram/all?date_type=${X[l.value]}&typ=vol`).then(_=>_.json());console.log("ðŸš€ ~ getHistogram ~ data:",S);const V=S.list.map(_=>_.num),$=S.list.map(_=>_.date);v.value=V,s.value=$,t(V,$,r),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:70 ~ getHistogram ~ data:",S)}catch(r){console.info("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:50 ~ getHistogram ~ error:",r)}},b=g(),t=(r,S,V)=>{const $=document.getElementById(`stats-chart-${i.chartType}`),_=Ae($);b.value=_;let R={tooltip:{trigger:"axis",position:function(P,F,x,W,O){return[P[0]-50,"10%"]},backgroundColor:"#28353F",borderColor:"transparent",formatter:function(P){H(P)},padding:0,axisPointer:{type:"line",lineStyle:{width:l.value=="D"?1:l.value=="W"?2:4,type:"solid",color:"#456D89"}}},xAxis:{type:"category",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},splitArea:{show:!1},data:S.reverse(),inverse:!0,axisLabel:{interval:parseInt(Number(r.length)/6),formatter:(P,F)=>{const x=z(Date.parse(P)-288e5,"YMD")||"";let W,O=x.slice(5,7),Q=U[Number(O)];return l.value=="M"?W=Q:W=x.slice(8,10),`${W}`}}},yAxis:{show:!1,max:function(P){return P.max}},series:[{data:r.reverse(),inverse:!0,type:i.chartType=="tvl"?"line":"bar",symbol:"none",itemStyle:{normal:{barBorderRadius:1,color:"#72C1F7"}},areaStyle:{color:new He(0,0,0,1,[{offset:0,color:"rgba(0, 128, 255, 0.3)"},{offset:1,color:"rgba(0, 128, 255, 0)"}])},barWidth:o.value?_e[l.value]:he[l.value]}],grid:{left:20,top:0,bottom:24,right:20}};I.value=!1,R&&_.setOption(R),_&&_.resize(),_.on("globalout",P=>{f.value=i.chartType=="tvl"?u.value.totalValueLockedDisplay:u.value.volInUsd24h,k.value="24H",N()})};q(()=>l.value,(r,S)=>{(!S||r!==S)&&p()},{immediate:!0});const o=g(!0),D=ze.debounce(()=>{document.body.clientWidth>750?o.value=!0:o.value=!1,!v.value&&!s.value?p():b.value&&b.value.resize()},300);J(()=>{window.addEventListener("resize",D),N()}),Pe(()=>{window.removeEventListener("resize",D)});const N=()=>{const r=z(Date.parse(new Date().toUTCString()),"YMD")||"";let S=r.slice(5,7),V=U[Number(S)];const $=r.slice(8,10),_=V,R=r.slice(0,4);h.value=_+"&nbsp;"+$+",&nbsp;"+R+"&nbsp;(UTC)"},H=r=>{f.value=Be(r[0].value,2),k.value=l.value=="D"?"24H":l.value=="W"?"7D":"30D";const S=Date.parse(r[0].axisValue),V=new Date(S);V.setDate(V.getDate()+7);const $=new Date(S);$.setDate($.getDate()+31);const _=V.toUTCString(),R=$.toUTCString(),P=z(Date.parse(R),"YMD")||"",F=z(Date.parse(new Date().toUTCString()),"YMD")||"",x=Date.parse(_)>Date.parse(new Date().toUTCString())?z(Date.parse(new Date().toUTCString()),"YMD")||"":z(Date.parse(_),"YMD")||"";let W=F.slice(5,7),O=U[Number(W)];const Q=F.slice(8,10),ye=O,Te=F.slice(0,4);let te=r[0].axisValue.slice(5,7),ke=U[Number(te)];const oe=r[0].axisValue.slice(8,10),j=ke,De=r[0].axisValue.slice(0,4);let $e=x.slice(5,7),we=U[Number($e)];const Ce=x.slice(8,10),Le=we,Ie=x.slice(0,4),Ve=U[Number(te)+1],Ne=P.slice(0,4);l.value=="D"?h.value=j+"&nbsp;"+oe+",&nbsp;"+De+"&nbsp;(UTC)":l.value=="W"?h.value=oe+"&nbsp;"+j+"-"+Ce+"&nbsp;"+Le+"&nbsp;,&nbsp;"+Ie+"&nbsp;(UTC)":h.value=Date.parse(R)>=Date.parse(new Date().toUTCString())?j+"&nbsp;01-"+ye+"&nbsp;"+Q+",&nbsp;"+Te+"&nbsp;(UTC)":j+"&nbsp;01-"+Ve+"&nbsp;01,&nbsp;"+Ne+"&nbsp;(UTC)"};return(r,S)=>{const V=Re;return d(),y("div",je,[n("div",qe,[n("div",Ge,[n("div",Ke,w(e.chartType=="tvl"?"Total Value Locked":`Trading Volume  (${k.value})`),1),n("div",Qe," $"+w(f.value===""?"--":Number(f.value)==0?0:f.value),1),n("span",{innerHTML:h.value},null,8,Xe)]),n("div",Ze,[(d(),y(ae,null,ne(T,$=>n("div",{key:$,class:le(["time-item",$==l.value?"time-item-active":""]),onClick:_=>l.value=$},w($),11,et)),64))])]),I.value?(d(),y("div",tt,[c(V)])):M("",!0),n("div",ot,[n("div",{id:`stats-chart-${e.chartType}`,class:"stats-chart"},null,8,st)])])}}});const ge=Y(at,[["__scopeId","data-v-ae946f64"]]),nt=B({setup(){const e=K(),i=C(()=>e),l=C(()=>i.value.overallStatistics),T=C(()=>[{img_url:"/sui-image/icon_cumulativevolume@2x.png",label:"Cumulative Volume",symbol:"$",value:l.value.cumulativeVolumeDisplay},{img_url:"/sui-image/icon_totalvaluelocked@2x.png",label:"Total Value Locked",symbol:"$",value:l.value.totalValueLockedDisplay},{img_url:"/sui-image/icon_cumulativetransactions@2x.png",label:"Cumulative Transactions",symbol:"",value:l.value.cumulativeTransactionsDisplay},{img_url:"/sui-image/icon_accounts@2x.png",label:"Total Accounts",symbol:"",value:l.value.totalAccountsDisplay}]);return{checkNullObj:Z,overallStatistics:l,statisticsList:T}}});const lt={class:"stats-sui-statistics"},rt={class:"img-label"},it=["src"],ct={class:"label"},ut={key:1,class:"value"};function pt(e,i,l,T,h,k){const m=Ue;return d(),y("div",lt,[(d(!0),y(ae,null,ne(e.statisticsList,v=>(d(),y("div",{key:v.label,class:"item"},[n("div",rt,[n("img",{src:v.img_url},null,8,it),n("div",ct,w(v.label),1)]),("checkNullObj"in e?e.checkNullObj:xe(Z))(e.overallStatistics)?(d(),E(m,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(d(),y("div",ut,w(v.symbol)+w(v.value),1))]))),128))])}const fe=Y(nt,[["render",pt],["__scopeId","data-v-8cb9033e"]]),dt=B({components:{RankIcon:ue,StatsAprTips:Fe,TableLoading:pe,StatsNoData:de,H5TableCard:me},setup(){const{getToken:e}=ee(),i=K(),l=C(()=>i),T=C(()=>l.value.poolsStatsList),h=g(!0),k=g(null);J(()=>{window.scroller=k.value});const m=g([]),v=C(()=>m.value.map(u=>Object.assign({},{random:Math.random()},u))),s=g({label:"Volume (24H)",sort:"desc"}),f=a=>{s.value=a,I(T.value)},I=async a=>{let u=[];for(let t=0;t<a.length;t++){const o=a[t],D=await e(a[t].displayTokenAAddress),N=await e(a[t].displayTokenBAddress),H=[];D!=null&&D.labels&&H.push(...D.labels),N!=null&&N.labels&&H.push(...N.labels);const r={...o,tokenA:D,tokenB:N,labels:[...new Set(H)]};u.push(r)}let p=u,b=[];s.value.label=="Volume (24H)"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.volume24-t.volume24):p.sort((t,o)=>t.volume24-o.volume24)),s.value.label=="Volume (7D)"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.volume7d-t.volume7d):p.sort((t,o)=>t.volume7d-o.volume7d)),s.value.label=="Liquidity"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.tvl-t.tvl):p.sort((t,o)=>t.tvl-o.tvl)),s.value.label=="Fees (24H)"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.fees24-t.fees24):p.sort((t,o)=>t.fees24-o.fees24)),s.value.label=="APR (24H)"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.totalApr-t.totalApr):p.sort((t,o)=>t.totalApr-o.totalApr)),m.value=b,console.log("ðŸš€ ~ buildPoolList ~ pageList:",m.value,b),h.value=!1};return q(()=>T.value,a=>{a&&a.length>0&&I(a)},{immediate:!0}),{pageList:m,tableColumns:[{title:"Pools",hasSort:!1,tdWidth:"330px",isNotShowTitle:!0,component:"pool-name-block"},{title:"Liquidity",hasSort:!0,tdWidth:"200px",value:"tvlDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"200px",value:"volume24Display"},{title:"Volume (7D)",hasSort:!0,tdWidth:"200px",value:"volume7dDisplay"},{title:"Fees (24H)",hasSort:!0,tdWidth:"175px",value:"fees24Display"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"175px",component:"apr-tips"}],scroller:k,list:v,isPoolLoading:h,sortInfo:s,changeSort:f}}});const mt=e=>(re("data-v-5274e5fe"),e=e(),ie(),e),vt={class:"stats-sui-pools-table"},_t={class:"h5-table"},ht={class:"pc-table"},gt={key:1,class:"virtual-table"},ft=mt(()=>n("th",null,"Pool",-1));function bt(e,i,l,T,h,k){const m=L("H5TableCard"),v=L("TableLoading"),s=L("RankIcon"),f=Me,I=L("StatsAprTips"),A=L("RecycleScroller"),a=L("StatsNoData");return d(),y("div",vt,[n("div",_t,[c(m,{"h5-title":"Pools","key-field":"poolAddress","sort-info":e.sortInfo,"item-size":278,"data-source-length":10,loading:e.isPoolLoading,columns:e.tableColumns,"data-source":e.pageList,onChangeSort:e.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),n("div",ht,[e.isPoolLoading?(d(),E(v,{key:0,columns:e.tableColumns,"data-source-length":10},null,8,["columns"])):(d(),y("table",gt,[c(A,{ref:"scroller",class:"scroller",items:e.list,"item-size":80,"page-mode":"","key-field":"poolAddress"},{before:G(()=>[n("thead",null,[ft,c(s,{label:"Liquidity","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Volume (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Volume (7D)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Fees (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"])])]),default:G(({item:u})=>[(d(),y("tr",{key:u==null?void 0:u.poolAddress},[n("td",null,[c(f,{"pool-info":u},null,8,["pool-info"])]),n("td",null,w(u.tvlDisplay||"--"),1),n("td",null,w(u.volume24Display||"--"),1),n("td",null,w(u.volume7dDisplay||"--"),1),n("td",null,w(u.fees24Display||"--"),1),n("td",null,[c(I,{"pool-info":u},null,8,["pool-info"])])]))]),_:1},8,["items"])]))]),!e.isPoolLoading&&e.pageList&&e.pageList.length==0?(d(),E(a,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):M("",!0)])}const be=Y(dt,[["render",bt],["__scopeId","data-v-5274e5fe"]]),St=B({components:{TokenBlock:Ee,RankIcon:ue,TableLoading:pe,NoDataStats:de,H5TableCard:me},setup(){const{getToken:e}=ee(),i=K(),l=C(()=>i),T=C(()=>l.value.tokensStatsList),h=g(!0),k=g(null);J(()=>{window.scroller=k.value});const m=g([]),v=C(()=>m.value.map(u=>Object.assign({},{random:Math.random()},u))),s=g({label:"Volume (24H)",sort:"desc"}),f=a=>{s.value=a,I(T.value)},I=async a=>{let u=[];for(let t=0;t<a.length;t++){const o=a[t],D=await e(o==null?void 0:o.address),N=[];D!=null&&D.labels&&N.push(...D.labels);const H={...o,logoURI:D==null?void 0:D.logo_url,labels:[...new Set(N)]};u.push(H)}let p=u,b=[];s.value.label=="Price"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.price-t.price):p.sort((t,o)=>t.price-o.price)),s.value.label=="Price Change"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.priceChange-t.priceChange):p.sort((t,o)=>t.priceChange-o.priceChange)),s.value.label=="Volume (24H)"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.volume24-t.volume24):p.sort((t,o)=>t.volume24-o.volume24)),s.value.label=="TVL"&&(b=s.value.sort=="desc"?p.sort((t,o)=>o.tvl-t.tvl):p.sort((t,o)=>t.tvl-o.tvl)),m.value=b,h.value=!1};return q(()=>T.value,a=>{a&&a.length>0&&I(a)},{immediate:!0}),{pageList:m,tableColumns:[{title:"Token",hasSort:!1,tdWidth:"370px",isNotShowTitle:!0,component:"token-block"},{title:"Price",hasSort:!0,tdWidth:"240px",value:"priceDisplay"},{title:"Price Change",hasSort:!0,tdWidth:"215px",value:"priceChangeDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"240px",value:"volume24Display"},{title:"TVL",hasSort:!0,tdWidth:"215px",value:"tvlDisplay"}],scroller:k,list:v,isTokenLoading:h,sortInfo:s,changeSort:f}}});const yt=e=>(re("data-v-f57228b1"),e=e(),ie(),e),Tt={class:"aptos-stats-sui-tokens-table"},kt={class:"h5-table"},Dt={class:"pc-table"},$t={key:1,class:"virtual-table"},wt=yt(()=>n("th",null,"Token",-1));function Ct(e,i,l,T,h,k){const m=L("H5TableCard"),v=L("TableLoading"),s=L("RankIcon"),f=L("TokenBlock"),I=L("RecycleScroller"),A=L("NoDataStats");return d(),y("div",Tt,[n("div",kt,[c(m,{"h5-title":"Tokens","key-field":"address","sort-info":e.sortInfo,"item-size":234,"data-source-length":10,loading:e.isTokenLoading,columns:e.tableColumns,"data-source":e.pageList,onChangeSort:e.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),n("div",Dt,[e.isTokenLoading?(d(),E(v,{key:0,columns:e.tableColumns,"data-source-length":10},null,8,["columns"])):(d(),y("table",$t,[c(I,{ref:"scroller",class:"scroller",items:e.list,"item-size":80,"page-mode":"","key-field":"address"},{before:G(()=>[n("thead",null,[wt,c(s,{label:"Price","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Price Change","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Volume (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"TVL","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"])])]),default:G(({item:a})=>[(d(),y("tr",{key:a==null?void 0:a.address},[n("td",null,[c(f,{"token-info":a,"justify-content":"flex-start","is-have-label":!0},null,8,["token-info"])]),n("td",null,"$"+w(a.priceDisplay||"--"),1),n("td",null,[n("span",{class:le(a.priceChangeDisplay.includes("-")?"redecue-change-price":"add-change-price")},w(a.priceChangeDisplay||"--"),3)]),n("td",null,w(a.volume24Display||"--"),1),n("td",null,w(a.tvlDisplay||"--"),1)]))]),_:1},8,["items"])]))]),!e.isTokenLoading&&e.pageList&&e.pageList.length==0?(d(),E(A,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No tokens found"})):M("",!0)])}const Se=Y(St,[["render",Ct],["__scopeId","data-v-f57228b1"]]),Lt=B({components:{StatsTab:Je,StatsPoolsTable:be,StatsTokensTable:Se},setup(){const{getTokenList:e}=ee(),i=[{name:"Pools",logo:"/sui-image/icon_pools@2x.png"},{name:"Tokens",logo:"/sui-image/icon_tokens@2x.png"}],l=g("Pools");return J(()=>{e()}),{currentTab:l,tabList:i}}});const It={class:"pools-tokens-transitions"},Vt={class:"tab-box"},Nt={key:0,class:"table-box"},Pt={key:1,class:"table-box"};function At(e,i,l,T,h,k){const m=L("StatsTab"),v=be,s=Se;return d(),y("div",It,[n("div",Vt,[c(m,{"tab-list":e.tabList,"current-tab":e.currentTab,onOnClick:i[0]||(i[0]=f=>{e.currentTab=f.name})},null,8,["tab-list","current-tab"])]),e.currentTab=="Pools"?(d(),y("div",Nt,[c(v)])):M("",!0),e.currentTab=="Tokens"?(d(),y("div",Pt,[c(s)])):M("",!0)])}const Ht=Y(Lt,[["render",At],["__scopeId","data-v-3e8025c9"]]),Rt=B({components:{StatsSuiChart:ge,StatsSuiStatistics:fe,PoolsTokensTransitions:Ht},setup(){const e=ce(),i=C(()=>e),l=We(),T=C(()=>i.value.chainName),{getStatusData:h}=Oe();J(async()=>{h()});const k=C(()=>i.value.theme);return{chainName:T,theme:k,store:i,importIcon:Ye,router:l}}});const xt={class:"stats-sui-container"},Ut={class:"title"},Wt={class:"chart-box"};function zt(e,i,l,T,h,k){const m=ge,v=fe,s=L("PoolsTokensTransitions");return d(),y("div",xt,[n("div",Ut,w(e.$t("menu.stats")),1),n("div",Wt,[c(m,{"chart-type":"tvl"}),c(m,{"chart-type":"vol"})]),c(v),c(s)])}const bo=Y(Rt,[["render",zt],["__scopeId","data-v-03e3c28a"]]);export{bo as default};
