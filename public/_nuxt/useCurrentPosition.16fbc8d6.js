import{u as a}from"./pool.bdfb4cef.js";import{u as S,a as I,b as R}from"./usePositionList.f561d7e2.js";import{h as F,c as T}from"./index.e1982e8b.js";import{u as b}from"./useSDK.d654b771.js";import{u as x}from"./useToken.4ffb05a7.js";import"./decimal.a2826370.js";import{h}from"./common.6f330190.js";import{u as D}from"./useRate.d4ab8a49.js";import{D as j}from"./decimal.765d8738.js";import{m as c}from"./entry.731085b3.js";function G(){const l=a(),p=c(()=>l);c(()=>p.value.poolsObj);const{positionsObj:r,setCurrentPositionInfo:u,setCurrentPositionLoading:m}=a(),{getPositionFees:d}=S(),{getPositionReward:_}=I(),{getPoolInfoByContract:g,wrapPositionItem:f}=R(),{getPositionById:w}=F("Sui"),{getFramsPositionNFT:P}=T("Sui");b();const{getToken:C}=x(),{getTokenRatePrice:y}=D(),k=async o=>{const i=[];for(let t=0;t<o.rewards.length;t++){const e=o.rewards[t],s=await C(e.rewarder_type),n=h(e.rewarder_amount).div(j.pow(10,s.decimals)).toString();i.push({...s,rewardAmount:n,rewardAmountUSD:y(s.address,n,s.decimals)})}return{coin_type_a:o.coinTypeA,coin_type_b:o.coinTypeB,name:o.name,pool:o.clmm_pool_id,tick_lower_index:o.tick_lower_index,tick_upper_index:o.tick_upper_index,position_source:"farms",pos_object_id:o.clmm_position_id,farm_position_id:o.id,liquidity:o.liquidity,farmsReward:i}};return{getCurrentPosition:async(o,i="clmm")=>{console.log("ğŸš€ğŸš€ğŸš€ ~ file: useCurrentPosition.ts:21 ~ getCurrentPosition ~ positionId:",o,i),r&&r[o]&&u(r[o]);let t,e;i==="clmm"?(e=await w(o),t={...e,position_source:"clmm"}):(e=await P(o),console.log("ğŸš€ğŸš€ğŸš€ ~ file: useCurrentPosition.ts:44 ~ getCurrentPosition ~ posRes:",e),t=await k(e)),console.log("ğŸš€ğŸš€ğŸš€ ~ file: useCurrentPosition.ts:78 ~ getCurrentPosition ~ positionInfo:",t);const s=await g([t.pool]);console.log("ğŸš€ğŸš€ğŸš€ ~ file: useCurrentPosition.ts:81 ~ getCurrentPosition ~ contractPoolInfo:",s);const n=await f(t,s[t.pool]);console.log("ğŸš€ğŸš€ğŸš€ ~ file: useCurrentPosition.ts:82 ~ getCurrentPosition ~ position:",n),u(n),d([t],!1),_([t],!1),m(!1)}}}export{G as u};
