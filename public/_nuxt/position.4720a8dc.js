import{a as G,e as T,o as l,f as u,h as t,F as q,E as B,i as n,S as H,p as x,k as I,z as K,L as Q,m as c,A as N,r as U,q as X,G as S,x as O,w as Y,B as Z,c as M,j as oo}from"./entry.41ea690b.js";import"./index.4014d28e.js";import{_ as eo}from"./img-no-Positions_2x.69186996.js";import{_ as so}from"./img-connect-wallet_2x.1f08cff0.js";import{c as L}from"./common.2aa2b559.js";import{u as to,c as io}from"./index.e4df0a82.js";import{N as ao}from"./sui-my-position-item.04879285.js";import{u as no}from"./pool.fb156510.js";import{u as lo}from"./usePositionList.0855810a.js";import{u as ro}from"./token.a65c225b.js";import{u as co}from"./usePoolList.c304dcaf.js";import{u as uo}from"./notifi.70321ead.js";import"./decimal.a2826370.js";import"./decimal.765d8738.js";/* empty css              */import"./icon_farms_2x.963970c1.js";import"./icon_rewards_2x.f8638727.js";import"./index.46f67f5f.js";import"./sui-position-range.4b6866ae.js";import"./formatter.622c02db.js";import"./useRate.c37bcdde.js";import"./fetchFun.ff4aae28.js";import"./useSDK.ccd79ad9.js";import"./useToken.fb6d8ddd.js";import"./useWhale.63a5ed1d.js";const po=G({props:{loading:{type:Boolean,required:!0},source:{type:String,default:""}},setup(e){return{positionList:[{},{},{}]}}});const go=e=>(x("data-v-ac88b320"),e=e(),I(),e),_o={class:"sui-pool-position-list"},vo={class:"position-list"},fo={class:"card-content"},mo={class:"pos-name"},ho={class:"bottom-info"},ko={class:"pos-valid-range"},bo={class:"info-block"},So={class:"info-block"},Lo={class:"info-block"},yo=go(()=>t("div",{class:"info-block"},null,-1));function Po(e,y,j,r,v,w){const i=H;return l(),u("div",_o,[t("div",vo,[(l(!0),u(q,null,B(e.positionList,(P,f)=>(l(),u("div",{key:f,class:"new-my-position-item"},[t("div",fo,[t("div",mo,[n(i,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),t("div",ho,[t("div",ko,[n(i,{class:"upgrade-long-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),t("div",bo,[n(i,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),n(i,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),t("div",So,[n(i,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),n(i,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),t("div",Lo,[n(i,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),n(i,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),yo])])]))),128))])])}const $o=T(po,[["render",Po],["__scopeId","data-v-ac88b320"]]),C=e=>(x("data-v-2bc72884"),e=e(),I(),e),No={class:"sui-liquidity-container"},jo={key:0,class:"upgrade-loading"},wo={key:1,class:"position-list"},Oo={key:2,class:"no-data"},Go=C(()=>t("img",{src:eo,alt:""},null,-1)),To={key:3,class:"no-data"},qo=C(()=>t("img",{src:so,alt:""},null,-1)),Bo=G({__name:"position",setup(e){K();const y=Q(),j=to(),r=c(()=>j),v=no(),w=ro(),i=c(()=>v.poolPositionsObj),P=c(()=>v.poolsObj),f=c(()=>r.value.address?v.liquidityPositionLoading:!1),A=c(()=>w.allTokensObj),k=c(()=>y.query.poolAddress),{getPoolList:V}=co();N(()=>P.value,o=>{L(o)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:462 ~ watch ~ newVal:",o,L(o)),V())},{immediate:!0}),console.log("ðŸš€ ~ poolPositionsObj ~ suiPoolStore.poolPositionsObj:",v.poolPositionsObj);const{getPositionListByPool:W}=lo();N(()=>[r.value.address,P.value,A.value],([o,s,a])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:451 ~ watch ~ allTokensObj:",k.value,a,s,o),o&&!L(s)&&!L(a)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:453 ~ watch ~ getPositionList:"),W(o,k.value))},{immediate:!0});let E=U([]);X(()=>{E.value=[]});const b=c(()=>{var o;return console.log("ðŸš€ ~ showList ~ poolPositionsObj.value:",i.value),k.value&&r.value.address?(o=i.value[k.value])==null?void 0:o.positionList:[]}),F=c(()=>v.positionList),h=uo(),p=c(()=>h),J=async o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:569 ~ getNftTransfer ~ getNftTransfer:"),await h.getSourceGroups();const s=p.value.sourceGroups&&p.value.sourceGroups.length>0&&p.value.sourceGroups[0]&&p.value.sourceGroups[0].sources||[];console.log(s,"####source"),console.log(o,"###myPositions");for(let a=0;a<s.length;a++){const{pool_address:m,position_index:g}=JSON.parse(s[a].blockchainAddress);console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:604 ~ getNftTransfer ~ source[j]:",s[a]);let _=!1,d;for(let $=0;$<o.length;$++){const{pool:D,positionIndex:R}=o[$];m==D&&R==g&&(_=!0),d={pool_address:m,position_index:g}}_||await h.subscribePosition(d,"",!1,!1)}},z=async()=>{await h.getSourceGroups();const o=p.value.sourceGroups&&p.value.sourceGroups.length>0&&p.value.sourceGroups[0]&&p.value.sourceGroups[0].sources||[];for(let s=0;s<o.length;s++){const{pool_address:a,position_index:m}=JSON.parse(o[s].blockchainAddress),{name:g}=o[s],_={pool_address:a,position_index:m};await h.subscribePosition(_,g,!1,!1)}};return N(()=>F.value,(o,s)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:628 ~ newMyPositions:",o),io.Sui.hasNotifi&&(o&&o.length>0&&s&&s.length!==o.length?J(o):o&&o.length==0&&!f.value&&z())},{immediate:!0}),(o,s)=>{var g,_;const a=$o,m=Z;return l(),u("div",No,[f.value&&r.value.connected?(l(),u("div",jo,[n(a,{loading:o.isPositionLoading,type:"position"},null,8,["loading"])])):S("",!0),((g=b.value)==null?void 0:g.length)>0&&r.value.connected&&!f.value?(l(),u("div",wo,[(l(!0),u(q,null,B(b.value,d=>(l(),M(ao,{key:d==null?void 0:d.name,"p-item":d},null,8,["p-item"]))),128))])):S("",!0),(!b.value||((_=b.value)==null?void 0:_.length)==0)&&!f.value&&r.value.connected?(l(),u("div",Oo,[Go,t("span",null,O(o.$t("common.noLiquidityPositions")),1)])):S("",!0),r.value.connected?S("",!0):(l(),u("div",To,[qo,n(m,{class:"connect-wallet",onClick:s[0]||(s[0]=d=>r.value.setIsShowWalletModal(!0))},{default:Y(()=>[oo(O(o.$t("button.connectWallet")),1)]),_:1})]))])}}});const ae=T(Bo,[["__scopeId","data-v-2bc72884"]]);export{ae as default};
