import{m as f,c as g}from"./index.52313906.js";import{a5 as b,m as S}from"./entry.a7bc8957.js";import{f as T,V as h}from"./index.3daa4341.js";import{f as y}from"./fetchFun.3abfe0a1.js";const d=b("SuiRateStore",{state:()=>({allRateObj:{},allRateList:[]}),getters:{getTokenRate:e=>r=>{var t,s;return(s=(t=e.allRateObj)==null?void 0:t[r])==null?void 0:s.price}},actions:{setRateObj(e){this.allRateObj={...this.allRateObj,...e}},setRateList(e){this.allRateList=e;const r=Object.fromEntries(e.map(t=>{var o;return[(o=f(t.base_symbol))==null?void 0:o.full_address,t]}));this.setRateObj(r)}}});function v(){const e=d(),{setRateList:r}=e,t=S(()=>e.allRateObj),s=async()=>{try{const{prices:a}=await y(`${g.Sui.api}/v2/sui/market_price`);return a}catch(a){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:13 ~ fetchRates ~ error:",a)}};return{getRateList:async()=>{const a=await s();a&&r(a)},getTokenRatePrice:(a,i,R)=>{var c,u,l;if(!i)return"--";const m=(c=f(a))==null?void 0:c.full_address,n=(l=(u=t==null?void 0:t.value)==null?void 0:u[m])==null?void 0:l.price;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:37 ~ getTokenRatePrice ~ allRateObj?.value:",t==null?void 0:t.value),!n)return"--";const p=T(i).mul(n).toString();return h(p,R??2,!1)}}}export{v as u};
