var $f=Object.defineProperty;var qf=(e,t,i)=>t in e?$f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var X=(e,t,i)=>(qf(e,typeof t!="symbol"?t+"":t,i),i);import{D as Ff,ab as hc,ae as Lf,af as Uf,W as Kf}from"./entry.69b7b6a8.js";import{D as J}from"./decimal.0bdeb344.js";const Wc=5,xw=Ff("wallet",{state:()=>({loading:!1,autoRefreshTime:Wc,countdown:0,connected:!1,aptosConnected:!1,suiConnected:!1,address:"",aptosAddress:"",suiAddress:"",platform:"",isShowWalletModal:!1,walletName:"",aptosWalletName:"",suiWalletName:"",currentWallet:null,aptosCurrentWallet:null,suiCurrentWallet:null,walletIcon:"",aptosWalletIcon:"",suiWalletIcon:"",switchWallet:!1,assets:{},walletIconName:"",aptosWalletIconName:"",suiWalletIconName:"",walletNetwork:"",isShowWalletCard:"",accountObj:null,firstGetAssetLoading:!1}),actions:{setLoading(e){e&&(this.countdown=Wc),this.loading=e,e||(this.countdown=0)},setCountdown(e){this.countdown=e},setWalletStatus(){this.connected=!0},setSwitchWallet(e){this.switchWallet=e},setIsShowWalletModal(e){this.isShowWalletModal=e},setWalletInfo(e,t){this.connected=e,this.platform=t},setCurrentWallet(e){e.wallet?(this.currentWallet=e.wallet,this.connected=e.isConnected,this.address=e.account,this.walletIcon=e.icon,this.walletName=e.wallet.name,e.platform==="Sui"?(this.suiCurrentWallet=e.wallet,this.suiConnected=e.isConnected,this.suiAddress=e.account,this.suiWalletIcon=e.icon,this.suiWalletName=e.wallet.name,this.walletName=e.walletName,this.accountObj=e.accountObj):(this.aptosCurrentWallet=e.wallet,this.aptosConnected=e.isConnected,this.aptosAddress=e.account,this.aptosWalletIcon=e.icon,this.aptosWalletName=e.wallet.name)):(this.currentWallet=null,this.connected=!1,this.address="",this.walletIcon="",this.walletName="",e.platform==="Sui"?(this.suiCurrentWallet=null,this.suiConnected=!1,this.suiAddress="",this.suiWalletIcon="",this.suiWalletName="",this.accountObj=null):(this.aptosCurrentWallet=null,this.aptosConnected=!1,this.aptosAddress="",this.aptosWalletIcon="",this.aptosWalletName=""))},setAssets(e){this.assets=e},setWalletIconName(e){this.walletIconName=e,localStorage.setItem("walletIconName",e)},setNetwork(e){this.walletNetwork=e,console.log(this.walletNetwork,"====>this.walletNetwork")},setIsShowWalletCard(e){this.isShowWalletCard=e},setFirstGetAssetLoading(e){this.firstGetAssetLoading=e}}});function mr(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const Vf={},zf=Object.freeze(Object.defineProperty({__proto__:null,default:Vf},Symbol.toStringTag,{value:"Module"})),Wf=hc(zf);var A={},Gf={get exports(){return A},set exports(e){A=e}};(function(e){(function(t,i){function n(O,f){if(!O)throw new Error(f||"Assertion failed")}function r(O,f){O.super_=f;var d=function(){};d.prototype=f.prototype,O.prototype=new d,O.prototype.constructor=O}function o(O,f,d){if(o.isBN(O))return O;this.negative=0,this.words=null,this.length=0,this.red=null,O!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(O||0,f||10,d||"be"))}typeof t=="object"?t.exports=o:i.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Wf.Buffer}catch{}o.isBN=function(f){return f instanceof o?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===o.wordSize&&Array.isArray(f.words)},o.max=function(f,d){return f.cmp(d)>0?f:d},o.min=function(f,d){return f.cmp(d)<0?f:d},o.prototype._init=function(f,d,h){if(typeof f=="number")return this._initNumber(f,d,h);if(typeof f=="object")return this._initArray(f,d,h);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),f=f.toString().replace(/\s+/g,"");var b=0;f[0]==="-"&&(b++,this.negative=1),b<f.length&&(d===16?this._parseHex(f,b,h):(this._parseBase(f,d,b),h==="le"&&this._initArray(this.toArray(),d,h)))},o.prototype._initNumber=function(f,d,h){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),d,h)},o.prototype._initArray=function(f,d,h){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var w,y,C=0;if(h==="be")for(b=f.length-1,w=0;b>=0;b-=3)y=f[b]|f[b-1]<<8|f[b-2]<<16,this.words[w]|=y<<C&67108863,this.words[w+1]=y>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);else if(h==="le")for(b=0,w=0;b<f.length;b+=3)y=f[b]|f[b+1]<<8|f[b+2]<<16,this.words[w]|=y<<C&67108863,this.words[w+1]=y>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);return this._strip()};function a(O,f){var d=O.charCodeAt(f);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+O)}function c(O,f,d){var h=a(O,d);return d-1>=f&&(h|=a(O,d-1)<<4),h}o.prototype._parseHex=function(f,d,h){this.length=Math.ceil((f.length-d)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var w=0,y=0,C;if(h==="be")for(b=f.length-1;b>=d;b-=2)C=c(f,d,b)<<w,this.words[y]|=C&67108863,w>=18?(w-=18,y+=1,this.words[y]|=C>>>26):w+=8;else{var v=f.length-d;for(b=v%2===0?d+1:d;b<f.length;b+=2)C=c(f,d,b)<<w,this.words[y]|=C&67108863,w>=18?(w-=18,y+=1,this.words[y]|=C>>>26):w+=8}this._strip()};function l(O,f,d,h){for(var b=0,w=0,y=Math.min(O.length,d),C=f;C<y;C++){var v=O.charCodeAt(C)-48;b*=h,v>=49?w=v-49+10:v>=17?w=v-17+10:w=v,n(v>=0&&w<h,"Invalid character"),b+=w}return b}o.prototype._parseBase=function(f,d,h){this.words=[0],this.length=1;for(var b=0,w=1;w<=67108863;w*=d)b++;b--,w=w/d|0;for(var y=f.length-h,C=y%b,v=Math.min(y,y-C)+h,p=0,_=h;_<v;_+=b)p=l(f,_,_+b,d),this.imuln(w),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p);if(C!==0){var S=1;for(p=l(f,_,f.length,d),_=0;_<C;_++)S*=d;this.imuln(S),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p)}this._strip()},o.prototype.copy=function(f){f.words=new Array(this.length);for(var d=0;d<this.length;d++)f.words[d]=this.words[d];f.length=this.length,f.negative=this.negative,f.red=this.red};function u(O,f){O.words=f.words,O.length=f.length,O.negative=f.negative,O.red=f.red}if(o.prototype._move=function(f){u(f,this)},o.prototype.clone=function(){var f=new o(null);return this.copy(f),f},o.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{o.prototype.inspect=m}else o.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(f,d){f=f||10,d=d|0||1;var h;if(f===16||f==="hex"){h="";for(var b=0,w=0,y=0;y<this.length;y++){var C=this.words[y],v=((C<<b|w)&16777215).toString(16);w=C>>>24-b&16777215,b+=2,b>=26&&(b-=26,y--),w!==0||y!==this.length-1?h=g[6-v.length]+v+h:h=v+h}for(w!==0&&(h=w.toString(16)+h);h.length%d!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(f===(f|0)&&f>=2&&f<=36){var p=k[f],_=x[f];h="";var S=this.clone();for(S.negative=0;!S.isZero();){var U=S.modrn(_).toString(f);S=S.idivn(_),S.isZero()?h=U+h:h=g[p-U.length]+U+h}for(this.isZero()&&(h="0"+h);h.length%d!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(f,d){return this.toArrayLike(s,f,d)}),o.prototype.toArray=function(f,d){return this.toArrayLike(Array,f,d)};var T=function(f,d){return f.allocUnsafe?f.allocUnsafe(d):new f(d)};o.prototype.toArrayLike=function(f,d,h){this._strip();var b=this.byteLength(),w=h||Math.max(1,b);n(b<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var y=T(f,w),C=d==="le"?"LE":"BE";return this["_toArrayLike"+C](y,b),y},o.prototype._toArrayLikeLE=function(f,d){for(var h=0,b=0,w=0,y=0;w<this.length;w++){var C=this.words[w]<<y|b;f[h++]=C&255,h<f.length&&(f[h++]=C>>8&255),h<f.length&&(f[h++]=C>>16&255),y===6?(h<f.length&&(f[h++]=C>>24&255),b=0,y=0):(b=C>>>24,y+=2)}if(h<f.length)for(f[h++]=b;h<f.length;)f[h++]=0},o.prototype._toArrayLikeBE=function(f,d){for(var h=f.length-1,b=0,w=0,y=0;w<this.length;w++){var C=this.words[w]<<y|b;f[h--]=C&255,h>=0&&(f[h--]=C>>8&255),h>=0&&(f[h--]=C>>16&255),y===6?(h>=0&&(f[h--]=C>>24&255),b=0,y=0):(b=C>>>24,y+=2)}if(h>=0)for(f[h--]=b;h>=0;)f[h--]=0},Math.clz32?o.prototype._countBits=function(f){return 32-Math.clz32(f)}:o.prototype._countBits=function(f){var d=f,h=0;return d>=4096&&(h+=13,d>>>=13),d>=64&&(h+=7,d>>>=7),d>=8&&(h+=4,d>>>=4),d>=2&&(h+=2,d>>>=2),h+d},o.prototype._zeroBits=function(f){if(f===0)return 26;var d=f,h=0;return d&8191||(h+=13,d>>>=13),d&127||(h+=7,d>>>=7),d&15||(h+=4,d>>>=4),d&3||(h+=2,d>>>=2),d&1||h++,h},o.prototype.bitLength=function(){var f=this.words[this.length-1],d=this._countBits(f);return(this.length-1)*26+d};function I(O){for(var f=new Array(O.bitLength()),d=0;d<f.length;d++){var h=d/26|0,b=d%26;f[d]=O.words[h]>>>b&1}return f}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,d=0;d<this.length;d++){var h=this._zeroBits(this.words[d]);if(f+=h,h!==26)break}return f},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},o.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]|f.words[d];return this._strip()},o.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},o.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},o.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},o.prototype.iuand=function(f){var d;this.length>f.length?d=f:d=this;for(var h=0;h<d.length;h++)this.words[h]=this.words[h]&f.words[h];return this.length=d.length,this._strip()},o.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},o.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},o.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},o.prototype.iuxor=function(f){var d,h;this.length>f.length?(d=this,h=f):(d=f,h=this);for(var b=0;b<h.length;b++)this.words[b]=d.words[b]^h.words[b];if(this!==d)for(;b<d.length;b++)this.words[b]=d.words[b];return this.length=d.length,this._strip()},o.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},o.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},o.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},o.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var d=Math.ceil(f/26)|0,h=f%26;this._expand(d),h>0&&d--;for(var b=0;b<d;b++)this.words[b]=~this.words[b]&67108863;return h>0&&(this.words[b]=~this.words[b]&67108863>>26-h),this._strip()},o.prototype.notn=function(f){return this.clone().inotn(f)},o.prototype.setn=function(f,d){n(typeof f=="number"&&f>=0);var h=f/26|0,b=f%26;return this._expand(h+1),d?this.words[h]=this.words[h]|1<<b:this.words[h]=this.words[h]&~(1<<b),this._strip()},o.prototype.iadd=function(f){var d;if(this.negative!==0&&f.negative===0)return this.negative=0,d=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,d=this.isub(f),f.negative=1,d._normSign();var h,b;this.length>f.length?(h=this,b=f):(h=f,b=this);for(var w=0,y=0;y<b.length;y++)d=(h.words[y]|0)+(b.words[y]|0)+w,this.words[y]=d&67108863,w=d>>>26;for(;w!==0&&y<h.length;y++)d=(h.words[y]|0)+w,this.words[y]=d&67108863,w=d>>>26;if(this.length=h.length,w!==0)this.words[this.length]=w,this.length++;else if(h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this},o.prototype.add=function(f){var d;return f.negative!==0&&this.negative===0?(f.negative=0,d=this.sub(f),f.negative^=1,d):f.negative===0&&this.negative!==0?(this.negative=0,d=f.sub(this),this.negative=1,d):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},o.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var d=this.iadd(f);return f.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var h=this.cmp(f);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,w;h>0?(b=this,w=f):(b=f,w=this);for(var y=0,C=0;C<w.length;C++)d=(b.words[C]|0)-(w.words[C]|0)+y,y=d>>26,this.words[C]=d&67108863;for(;y!==0&&C<b.length;C++)d=(b.words[C]|0)+y,y=d>>26,this.words[C]=d&67108863;if(y===0&&C<b.length&&b!==this)for(;C<b.length;C++)this.words[C]=b.words[C];return this.length=Math.max(this.length,C),b!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(f){return this.clone().isub(f)};function E(O,f,d){d.negative=f.negative^O.negative;var h=O.length+f.length|0;d.length=h,h=h-1|0;var b=O.words[0]|0,w=f.words[0]|0,y=b*w,C=y&67108863,v=y/67108864|0;d.words[0]=C;for(var p=1;p<h;p++){for(var _=v>>>26,S=v&67108863,U=Math.min(p,f.length-1),V=Math.max(0,p-O.length+1);V<=U;V++){var ne=p-V|0;b=O.words[ne]|0,w=f.words[V]|0,y=b*w+S,_+=y/67108864|0,S=y&67108863}d.words[p]=S|0,v=_|0}return v!==0?d.words[p]=v|0:d.length--,d._strip()}var B=function(f,d,h){var b=f.words,w=d.words,y=h.words,C=0,v,p,_,S=b[0]|0,U=S&8191,V=S>>>13,ne=b[1]|0,we=ne&8191,fe=ne>>>13,Ze=b[2]|0,et=Ze&8191,ke=Ze>>>13,tt=b[3]|0,it=tt&8191,Ce=tt>>>13,nt=b[4]|0,rt=nt&8191,Ae=nt>>>13,ot=b[5]|0,st=ot&8191,xe=ot>>>13,at=b[6]|0,ct=at&8191,Se=at>>>13,lt=b[7]|0,dt=lt&8191,Te=lt>>>13,ut=b[8]|0,ft=ut&8191,Me=ut>>>13,ht=b[9]|0,pt=ht&8191,Oe=ht>>>13,_t=w[0]|0,mt=_t&8191,Ie=_t>>>13,gt=w[1]|0,bt=gt&8191,Pe=gt>>>13,wt=w[2]|0,yt=wt&8191,je=wt>>>13,vt=w[3]|0,kt=vt&8191,Ee=vt>>>13,Ct=w[4]|0,At=Ct&8191,Be=Ct>>>13,xt=w[5]|0,St=xt&8191,Ne=xt>>>13,Tt=w[6]|0,Mt=Tt&8191,De=Tt>>>13,Ot=w[7]|0,It=Ot&8191,Re=Ot>>>13,Pt=w[8]|0,jt=Pt&8191,$e=Pt>>>13,Et=w[9]|0,Bt=Et&8191,qe=Et>>>13;h.negative=f.negative^d.negative,h.length=19,v=Math.imul(U,mt),p=Math.imul(U,Ie),p=p+Math.imul(V,mt)|0,_=Math.imul(V,Ie);var Qe=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,v=Math.imul(we,mt),p=Math.imul(we,Ie),p=p+Math.imul(fe,mt)|0,_=Math.imul(fe,Ie),v=v+Math.imul(U,bt)|0,p=p+Math.imul(U,Pe)|0,p=p+Math.imul(V,bt)|0,_=_+Math.imul(V,Pe)|0;var En=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(En>>>26)|0,En&=67108863,v=Math.imul(et,mt),p=Math.imul(et,Ie),p=p+Math.imul(ke,mt)|0,_=Math.imul(ke,Ie),v=v+Math.imul(we,bt)|0,p=p+Math.imul(we,Pe)|0,p=p+Math.imul(fe,bt)|0,_=_+Math.imul(fe,Pe)|0,v=v+Math.imul(U,yt)|0,p=p+Math.imul(U,je)|0,p=p+Math.imul(V,yt)|0,_=_+Math.imul(V,je)|0;var Bn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,v=Math.imul(it,mt),p=Math.imul(it,Ie),p=p+Math.imul(Ce,mt)|0,_=Math.imul(Ce,Ie),v=v+Math.imul(et,bt)|0,p=p+Math.imul(et,Pe)|0,p=p+Math.imul(ke,bt)|0,_=_+Math.imul(ke,Pe)|0,v=v+Math.imul(we,yt)|0,p=p+Math.imul(we,je)|0,p=p+Math.imul(fe,yt)|0,_=_+Math.imul(fe,je)|0,v=v+Math.imul(U,kt)|0,p=p+Math.imul(U,Ee)|0,p=p+Math.imul(V,kt)|0,_=_+Math.imul(V,Ee)|0;var Nn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,v=Math.imul(rt,mt),p=Math.imul(rt,Ie),p=p+Math.imul(Ae,mt)|0,_=Math.imul(Ae,Ie),v=v+Math.imul(it,bt)|0,p=p+Math.imul(it,Pe)|0,p=p+Math.imul(Ce,bt)|0,_=_+Math.imul(Ce,Pe)|0,v=v+Math.imul(et,yt)|0,p=p+Math.imul(et,je)|0,p=p+Math.imul(ke,yt)|0,_=_+Math.imul(ke,je)|0,v=v+Math.imul(we,kt)|0,p=p+Math.imul(we,Ee)|0,p=p+Math.imul(fe,kt)|0,_=_+Math.imul(fe,Ee)|0,v=v+Math.imul(U,At)|0,p=p+Math.imul(U,Be)|0,p=p+Math.imul(V,At)|0,_=_+Math.imul(V,Be)|0;var Dn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,v=Math.imul(st,mt),p=Math.imul(st,Ie),p=p+Math.imul(xe,mt)|0,_=Math.imul(xe,Ie),v=v+Math.imul(rt,bt)|0,p=p+Math.imul(rt,Pe)|0,p=p+Math.imul(Ae,bt)|0,_=_+Math.imul(Ae,Pe)|0,v=v+Math.imul(it,yt)|0,p=p+Math.imul(it,je)|0,p=p+Math.imul(Ce,yt)|0,_=_+Math.imul(Ce,je)|0,v=v+Math.imul(et,kt)|0,p=p+Math.imul(et,Ee)|0,p=p+Math.imul(ke,kt)|0,_=_+Math.imul(ke,Ee)|0,v=v+Math.imul(we,At)|0,p=p+Math.imul(we,Be)|0,p=p+Math.imul(fe,At)|0,_=_+Math.imul(fe,Be)|0,v=v+Math.imul(U,St)|0,p=p+Math.imul(U,Ne)|0,p=p+Math.imul(V,St)|0,_=_+Math.imul(V,Ne)|0;var Rn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,v=Math.imul(ct,mt),p=Math.imul(ct,Ie),p=p+Math.imul(Se,mt)|0,_=Math.imul(Se,Ie),v=v+Math.imul(st,bt)|0,p=p+Math.imul(st,Pe)|0,p=p+Math.imul(xe,bt)|0,_=_+Math.imul(xe,Pe)|0,v=v+Math.imul(rt,yt)|0,p=p+Math.imul(rt,je)|0,p=p+Math.imul(Ae,yt)|0,_=_+Math.imul(Ae,je)|0,v=v+Math.imul(it,kt)|0,p=p+Math.imul(it,Ee)|0,p=p+Math.imul(Ce,kt)|0,_=_+Math.imul(Ce,Ee)|0,v=v+Math.imul(et,At)|0,p=p+Math.imul(et,Be)|0,p=p+Math.imul(ke,At)|0,_=_+Math.imul(ke,Be)|0,v=v+Math.imul(we,St)|0,p=p+Math.imul(we,Ne)|0,p=p+Math.imul(fe,St)|0,_=_+Math.imul(fe,Ne)|0,v=v+Math.imul(U,Mt)|0,p=p+Math.imul(U,De)|0,p=p+Math.imul(V,Mt)|0,_=_+Math.imul(V,De)|0;var $n=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+($n>>>26)|0,$n&=67108863,v=Math.imul(dt,mt),p=Math.imul(dt,Ie),p=p+Math.imul(Te,mt)|0,_=Math.imul(Te,Ie),v=v+Math.imul(ct,bt)|0,p=p+Math.imul(ct,Pe)|0,p=p+Math.imul(Se,bt)|0,_=_+Math.imul(Se,Pe)|0,v=v+Math.imul(st,yt)|0,p=p+Math.imul(st,je)|0,p=p+Math.imul(xe,yt)|0,_=_+Math.imul(xe,je)|0,v=v+Math.imul(rt,kt)|0,p=p+Math.imul(rt,Ee)|0,p=p+Math.imul(Ae,kt)|0,_=_+Math.imul(Ae,Ee)|0,v=v+Math.imul(it,At)|0,p=p+Math.imul(it,Be)|0,p=p+Math.imul(Ce,At)|0,_=_+Math.imul(Ce,Be)|0,v=v+Math.imul(et,St)|0,p=p+Math.imul(et,Ne)|0,p=p+Math.imul(ke,St)|0,_=_+Math.imul(ke,Ne)|0,v=v+Math.imul(we,Mt)|0,p=p+Math.imul(we,De)|0,p=p+Math.imul(fe,Mt)|0,_=_+Math.imul(fe,De)|0,v=v+Math.imul(U,It)|0,p=p+Math.imul(U,Re)|0,p=p+Math.imul(V,It)|0,_=_+Math.imul(V,Re)|0;var qn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(qn>>>26)|0,qn&=67108863,v=Math.imul(ft,mt),p=Math.imul(ft,Ie),p=p+Math.imul(Me,mt)|0,_=Math.imul(Me,Ie),v=v+Math.imul(dt,bt)|0,p=p+Math.imul(dt,Pe)|0,p=p+Math.imul(Te,bt)|0,_=_+Math.imul(Te,Pe)|0,v=v+Math.imul(ct,yt)|0,p=p+Math.imul(ct,je)|0,p=p+Math.imul(Se,yt)|0,_=_+Math.imul(Se,je)|0,v=v+Math.imul(st,kt)|0,p=p+Math.imul(st,Ee)|0,p=p+Math.imul(xe,kt)|0,_=_+Math.imul(xe,Ee)|0,v=v+Math.imul(rt,At)|0,p=p+Math.imul(rt,Be)|0,p=p+Math.imul(Ae,At)|0,_=_+Math.imul(Ae,Be)|0,v=v+Math.imul(it,St)|0,p=p+Math.imul(it,Ne)|0,p=p+Math.imul(Ce,St)|0,_=_+Math.imul(Ce,Ne)|0,v=v+Math.imul(et,Mt)|0,p=p+Math.imul(et,De)|0,p=p+Math.imul(ke,Mt)|0,_=_+Math.imul(ke,De)|0,v=v+Math.imul(we,It)|0,p=p+Math.imul(we,Re)|0,p=p+Math.imul(fe,It)|0,_=_+Math.imul(fe,Re)|0,v=v+Math.imul(U,jt)|0,p=p+Math.imul(U,$e)|0,p=p+Math.imul(V,jt)|0,_=_+Math.imul(V,$e)|0;var Fn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,v=Math.imul(pt,mt),p=Math.imul(pt,Ie),p=p+Math.imul(Oe,mt)|0,_=Math.imul(Oe,Ie),v=v+Math.imul(ft,bt)|0,p=p+Math.imul(ft,Pe)|0,p=p+Math.imul(Me,bt)|0,_=_+Math.imul(Me,Pe)|0,v=v+Math.imul(dt,yt)|0,p=p+Math.imul(dt,je)|0,p=p+Math.imul(Te,yt)|0,_=_+Math.imul(Te,je)|0,v=v+Math.imul(ct,kt)|0,p=p+Math.imul(ct,Ee)|0,p=p+Math.imul(Se,kt)|0,_=_+Math.imul(Se,Ee)|0,v=v+Math.imul(st,At)|0,p=p+Math.imul(st,Be)|0,p=p+Math.imul(xe,At)|0,_=_+Math.imul(xe,Be)|0,v=v+Math.imul(rt,St)|0,p=p+Math.imul(rt,Ne)|0,p=p+Math.imul(Ae,St)|0,_=_+Math.imul(Ae,Ne)|0,v=v+Math.imul(it,Mt)|0,p=p+Math.imul(it,De)|0,p=p+Math.imul(Ce,Mt)|0,_=_+Math.imul(Ce,De)|0,v=v+Math.imul(et,It)|0,p=p+Math.imul(et,Re)|0,p=p+Math.imul(ke,It)|0,_=_+Math.imul(ke,Re)|0,v=v+Math.imul(we,jt)|0,p=p+Math.imul(we,$e)|0,p=p+Math.imul(fe,jt)|0,_=_+Math.imul(fe,$e)|0,v=v+Math.imul(U,Bt)|0,p=p+Math.imul(U,qe)|0,p=p+Math.imul(V,Bt)|0,_=_+Math.imul(V,qe)|0;var Ln=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,v=Math.imul(pt,bt),p=Math.imul(pt,Pe),p=p+Math.imul(Oe,bt)|0,_=Math.imul(Oe,Pe),v=v+Math.imul(ft,yt)|0,p=p+Math.imul(ft,je)|0,p=p+Math.imul(Me,yt)|0,_=_+Math.imul(Me,je)|0,v=v+Math.imul(dt,kt)|0,p=p+Math.imul(dt,Ee)|0,p=p+Math.imul(Te,kt)|0,_=_+Math.imul(Te,Ee)|0,v=v+Math.imul(ct,At)|0,p=p+Math.imul(ct,Be)|0,p=p+Math.imul(Se,At)|0,_=_+Math.imul(Se,Be)|0,v=v+Math.imul(st,St)|0,p=p+Math.imul(st,Ne)|0,p=p+Math.imul(xe,St)|0,_=_+Math.imul(xe,Ne)|0,v=v+Math.imul(rt,Mt)|0,p=p+Math.imul(rt,De)|0,p=p+Math.imul(Ae,Mt)|0,_=_+Math.imul(Ae,De)|0,v=v+Math.imul(it,It)|0,p=p+Math.imul(it,Re)|0,p=p+Math.imul(Ce,It)|0,_=_+Math.imul(Ce,Re)|0,v=v+Math.imul(et,jt)|0,p=p+Math.imul(et,$e)|0,p=p+Math.imul(ke,jt)|0,_=_+Math.imul(ke,$e)|0,v=v+Math.imul(we,Bt)|0,p=p+Math.imul(we,qe)|0,p=p+Math.imul(fe,Bt)|0,_=_+Math.imul(fe,qe)|0;var Un=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Un>>>26)|0,Un&=67108863,v=Math.imul(pt,yt),p=Math.imul(pt,je),p=p+Math.imul(Oe,yt)|0,_=Math.imul(Oe,je),v=v+Math.imul(ft,kt)|0,p=p+Math.imul(ft,Ee)|0,p=p+Math.imul(Me,kt)|0,_=_+Math.imul(Me,Ee)|0,v=v+Math.imul(dt,At)|0,p=p+Math.imul(dt,Be)|0,p=p+Math.imul(Te,At)|0,_=_+Math.imul(Te,Be)|0,v=v+Math.imul(ct,St)|0,p=p+Math.imul(ct,Ne)|0,p=p+Math.imul(Se,St)|0,_=_+Math.imul(Se,Ne)|0,v=v+Math.imul(st,Mt)|0,p=p+Math.imul(st,De)|0,p=p+Math.imul(xe,Mt)|0,_=_+Math.imul(xe,De)|0,v=v+Math.imul(rt,It)|0,p=p+Math.imul(rt,Re)|0,p=p+Math.imul(Ae,It)|0,_=_+Math.imul(Ae,Re)|0,v=v+Math.imul(it,jt)|0,p=p+Math.imul(it,$e)|0,p=p+Math.imul(Ce,jt)|0,_=_+Math.imul(Ce,$e)|0,v=v+Math.imul(et,Bt)|0,p=p+Math.imul(et,qe)|0,p=p+Math.imul(ke,Bt)|0,_=_+Math.imul(ke,qe)|0;var Kn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,v=Math.imul(pt,kt),p=Math.imul(pt,Ee),p=p+Math.imul(Oe,kt)|0,_=Math.imul(Oe,Ee),v=v+Math.imul(ft,At)|0,p=p+Math.imul(ft,Be)|0,p=p+Math.imul(Me,At)|0,_=_+Math.imul(Me,Be)|0,v=v+Math.imul(dt,St)|0,p=p+Math.imul(dt,Ne)|0,p=p+Math.imul(Te,St)|0,_=_+Math.imul(Te,Ne)|0,v=v+Math.imul(ct,Mt)|0,p=p+Math.imul(ct,De)|0,p=p+Math.imul(Se,Mt)|0,_=_+Math.imul(Se,De)|0,v=v+Math.imul(st,It)|0,p=p+Math.imul(st,Re)|0,p=p+Math.imul(xe,It)|0,_=_+Math.imul(xe,Re)|0,v=v+Math.imul(rt,jt)|0,p=p+Math.imul(rt,$e)|0,p=p+Math.imul(Ae,jt)|0,_=_+Math.imul(Ae,$e)|0,v=v+Math.imul(it,Bt)|0,p=p+Math.imul(it,qe)|0,p=p+Math.imul(Ce,Bt)|0,_=_+Math.imul(Ce,qe)|0;var Vn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,v=Math.imul(pt,At),p=Math.imul(pt,Be),p=p+Math.imul(Oe,At)|0,_=Math.imul(Oe,Be),v=v+Math.imul(ft,St)|0,p=p+Math.imul(ft,Ne)|0,p=p+Math.imul(Me,St)|0,_=_+Math.imul(Me,Ne)|0,v=v+Math.imul(dt,Mt)|0,p=p+Math.imul(dt,De)|0,p=p+Math.imul(Te,Mt)|0,_=_+Math.imul(Te,De)|0,v=v+Math.imul(ct,It)|0,p=p+Math.imul(ct,Re)|0,p=p+Math.imul(Se,It)|0,_=_+Math.imul(Se,Re)|0,v=v+Math.imul(st,jt)|0,p=p+Math.imul(st,$e)|0,p=p+Math.imul(xe,jt)|0,_=_+Math.imul(xe,$e)|0,v=v+Math.imul(rt,Bt)|0,p=p+Math.imul(rt,qe)|0,p=p+Math.imul(Ae,Bt)|0,_=_+Math.imul(Ae,qe)|0;var zn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(zn>>>26)|0,zn&=67108863,v=Math.imul(pt,St),p=Math.imul(pt,Ne),p=p+Math.imul(Oe,St)|0,_=Math.imul(Oe,Ne),v=v+Math.imul(ft,Mt)|0,p=p+Math.imul(ft,De)|0,p=p+Math.imul(Me,Mt)|0,_=_+Math.imul(Me,De)|0,v=v+Math.imul(dt,It)|0,p=p+Math.imul(dt,Re)|0,p=p+Math.imul(Te,It)|0,_=_+Math.imul(Te,Re)|0,v=v+Math.imul(ct,jt)|0,p=p+Math.imul(ct,$e)|0,p=p+Math.imul(Se,jt)|0,_=_+Math.imul(Se,$e)|0,v=v+Math.imul(st,Bt)|0,p=p+Math.imul(st,qe)|0,p=p+Math.imul(xe,Bt)|0,_=_+Math.imul(xe,qe)|0;var Wn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,v=Math.imul(pt,Mt),p=Math.imul(pt,De),p=p+Math.imul(Oe,Mt)|0,_=Math.imul(Oe,De),v=v+Math.imul(ft,It)|0,p=p+Math.imul(ft,Re)|0,p=p+Math.imul(Me,It)|0,_=_+Math.imul(Me,Re)|0,v=v+Math.imul(dt,jt)|0,p=p+Math.imul(dt,$e)|0,p=p+Math.imul(Te,jt)|0,_=_+Math.imul(Te,$e)|0,v=v+Math.imul(ct,Bt)|0,p=p+Math.imul(ct,qe)|0,p=p+Math.imul(Se,Bt)|0,_=_+Math.imul(Se,qe)|0;var Gn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,v=Math.imul(pt,It),p=Math.imul(pt,Re),p=p+Math.imul(Oe,It)|0,_=Math.imul(Oe,Re),v=v+Math.imul(ft,jt)|0,p=p+Math.imul(ft,$e)|0,p=p+Math.imul(Me,jt)|0,_=_+Math.imul(Me,$e)|0,v=v+Math.imul(dt,Bt)|0,p=p+Math.imul(dt,qe)|0,p=p+Math.imul(Te,Bt)|0,_=_+Math.imul(Te,qe)|0;var Hn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,v=Math.imul(pt,jt),p=Math.imul(pt,$e),p=p+Math.imul(Oe,jt)|0,_=Math.imul(Oe,$e),v=v+Math.imul(ft,Bt)|0,p=p+Math.imul(ft,qe)|0,p=p+Math.imul(Me,Bt)|0,_=_+Math.imul(Me,qe)|0;var Xn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,v=Math.imul(pt,Bt),p=Math.imul(pt,qe),p=p+Math.imul(Oe,Bt)|0,_=Math.imul(Oe,qe);var Jn=(C+v|0)+((p&8191)<<13)|0;return C=(_+(p>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,y[0]=Qe,y[1]=En,y[2]=Bn,y[3]=Nn,y[4]=Dn,y[5]=Rn,y[6]=$n,y[7]=qn,y[8]=Fn,y[9]=Ln,y[10]=Un,y[11]=Kn,y[12]=Vn,y[13]=zn,y[14]=Wn,y[15]=Gn,y[16]=Hn,y[17]=Xn,y[18]=Jn,C!==0&&(y[19]=C,h.length++),h};Math.imul||(B=E);function N(O,f,d){d.negative=f.negative^O.negative,d.length=O.length+f.length;for(var h=0,b=0,w=0;w<d.length-1;w++){var y=b;b=0;for(var C=h&67108863,v=Math.min(w,f.length-1),p=Math.max(0,w-O.length+1);p<=v;p++){var _=w-p,S=O.words[_]|0,U=f.words[p]|0,V=S*U,ne=V&67108863;y=y+(V/67108864|0)|0,ne=ne+C|0,C=ne&67108863,y=y+(ne>>>26)|0,b+=y>>>26,y&=67108863}d.words[w]=C,h=y,y=b}return h!==0?d.words[w]=h:d.length--,d._strip()}function F(O,f,d){return N(O,f,d)}o.prototype.mulTo=function(f,d){var h,b=this.length+f.length;return this.length===10&&f.length===10?h=B(this,f,d):b<63?h=E(this,f,d):b<1024?h=N(this,f,d):h=F(this,f,d),h},o.prototype.mul=function(f){var d=new o(null);return d.words=new Array(this.length+f.length),this.mulTo(f,d)},o.prototype.mulf=function(f){var d=new o(null);return d.words=new Array(this.length+f.length),F(this,f,d)},o.prototype.imul=function(f){return this.clone().mulTo(f,this)},o.prototype.imuln=function(f){var d=f<0;d&&(f=-f),n(typeof f=="number"),n(f<67108864);for(var h=0,b=0;b<this.length;b++){var w=(this.words[b]|0)*f,y=(w&67108863)+(h&67108863);h>>=26,h+=w/67108864|0,h+=y>>>26,this.words[b]=y&67108863}return h!==0&&(this.words[b]=h,this.length++),d?this.ineg():this},o.prototype.muln=function(f){return this.clone().imuln(f)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(f){var d=I(f);if(d.length===0)return new o(1);for(var h=this,b=0;b<d.length&&d[b]===0;b++,h=h.sqr());if(++b<d.length)for(var w=h.sqr();b<d.length;b++,w=w.sqr())d[b]!==0&&(h=h.mul(w));return h},o.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var d=f%26,h=(f-d)/26,b=67108863>>>26-d<<26-d,w;if(d!==0){var y=0;for(w=0;w<this.length;w++){var C=this.words[w]&b,v=(this.words[w]|0)-C<<d;this.words[w]=v|y,y=C>>>26-d}y&&(this.words[w]=y,this.length++)}if(h!==0){for(w=this.length-1;w>=0;w--)this.words[w+h]=this.words[w];for(w=0;w<h;w++)this.words[w]=0;this.length+=h}return this._strip()},o.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},o.prototype.iushrn=function(f,d,h){n(typeof f=="number"&&f>=0);var b;d?b=(d-d%26)/26:b=0;var w=f%26,y=Math.min((f-w)/26,this.length),C=67108863^67108863>>>w<<w,v=h;if(b-=y,b=Math.max(0,b),v){for(var p=0;p<y;p++)v.words[p]=this.words[p];v.length=y}if(y!==0)if(this.length>y)for(this.length-=y,p=0;p<this.length;p++)this.words[p]=this.words[p+y];else this.words[0]=0,this.length=1;var _=0;for(p=this.length-1;p>=0&&(_!==0||p>=b);p--){var S=this.words[p]|0;this.words[p]=_<<26-w|S>>>w,_=S&C}return v&&_!==0&&(v.words[v.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(f,d,h){return n(this.negative===0),this.iushrn(f,d,h)},o.prototype.shln=function(f){return this.clone().ishln(f)},o.prototype.ushln=function(f){return this.clone().iushln(f)},o.prototype.shrn=function(f){return this.clone().ishrn(f)},o.prototype.ushrn=function(f){return this.clone().iushrn(f)},o.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var d=f%26,h=(f-d)/26,b=1<<d;if(this.length<=h)return!1;var w=this.words[h];return!!(w&b)},o.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var d=f%26,h=(f-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(d!==0&&h++,this.length=Math.min(h,this.length),d!==0){var b=67108863^67108863>>>d<<d;this.words[this.length-1]&=b}return this._strip()},o.prototype.maskn=function(f){return this.clone().imaskn(f)},o.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},o.prototype._iaddn=function(f){this.words[0]+=f;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},o.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},o.prototype.addn=function(f){return this.clone().iaddn(f)},o.prototype.subn=function(f){return this.clone().isubn(f)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(f,d,h){var b=f.length+h,w;this._expand(b);var y,C=0;for(w=0;w<f.length;w++){y=(this.words[w+h]|0)+C;var v=(f.words[w]|0)*d;y-=v&67108863,C=(y>>26)-(v/67108864|0),this.words[w+h]=y&67108863}for(;w<this.length-h;w++)y=(this.words[w+h]|0)+C,C=y>>26,this.words[w+h]=y&67108863;if(C===0)return this._strip();for(n(C===-1),C=0,w=0;w<this.length;w++)y=-(this.words[w]|0)+C,C=y>>26,this.words[w]=y&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(f,d){var h=this.length-f.length,b=this.clone(),w=f,y=w.words[w.length-1]|0,C=this._countBits(y);h=26-C,h!==0&&(w=w.ushln(h),b.iushln(h),y=w.words[w.length-1]|0);var v=b.length-w.length,p;if(d!=="mod"){p=new o(null),p.length=v+1,p.words=new Array(p.length);for(var _=0;_<p.length;_++)p.words[_]=0}var S=b.clone()._ishlnsubmul(w,1,v);S.negative===0&&(b=S,p&&(p.words[v]=1));for(var U=v-1;U>=0;U--){var V=(b.words[w.length+U]|0)*67108864+(b.words[w.length+U-1]|0);for(V=Math.min(V/y|0,67108863),b._ishlnsubmul(w,V,U);b.negative!==0;)V--,b.negative=0,b._ishlnsubmul(w,1,U),b.isZero()||(b.negative^=1);p&&(p.words[U]=V)}return p&&p._strip(),b._strip(),d!=="div"&&h!==0&&b.iushrn(h),{div:p||null,mod:b}},o.prototype.divmod=function(f,d,h){if(n(!f.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var b,w,y;return this.negative!==0&&f.negative===0?(y=this.neg().divmod(f,d),d!=="mod"&&(b=y.div.neg()),d!=="div"&&(w=y.mod.neg(),h&&w.negative!==0&&w.iadd(f)),{div:b,mod:w}):this.negative===0&&f.negative!==0?(y=this.divmod(f.neg(),d),d!=="mod"&&(b=y.div.neg()),{div:b,mod:y.mod}):this.negative&f.negative?(y=this.neg().divmod(f.neg(),d),d!=="div"&&(w=y.mod.neg(),h&&w.negative!==0&&w.isub(f)),{div:y.div,mod:w}):f.length>this.length||this.cmp(f)<0?{div:new o(0),mod:this}:f.length===1?d==="div"?{div:this.divn(f.words[0]),mod:null}:d==="mod"?{div:null,mod:new o(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new o(this.modrn(f.words[0]))}:this._wordDiv(f,d)},o.prototype.div=function(f){return this.divmod(f,"div",!1).div},o.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},o.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},o.prototype.divRound=function(f){var d=this.divmod(f);if(d.mod.isZero())return d.div;var h=d.div.negative!==0?d.mod.isub(f):d.mod,b=f.ushrn(1),w=f.andln(1),y=h.cmp(b);return y<0||w===1&&y===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},o.prototype.modrn=function(f){var d=f<0;d&&(f=-f),n(f<=67108863);for(var h=(1<<26)%f,b=0,w=this.length-1;w>=0;w--)b=(h*b+(this.words[w]|0))%f;return d?-b:b},o.prototype.modn=function(f){return this.modrn(f)},o.prototype.idivn=function(f){var d=f<0;d&&(f=-f),n(f<=67108863);for(var h=0,b=this.length-1;b>=0;b--){var w=(this.words[b]|0)+h*67108864;this.words[b]=w/f|0,h=w%f}return this._strip(),d?this.ineg():this},o.prototype.divn=function(f){return this.clone().idivn(f)},o.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var d=this,h=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var b=new o(1),w=new o(0),y=new o(0),C=new o(1),v=0;d.isEven()&&h.isEven();)d.iushrn(1),h.iushrn(1),++v;for(var p=h.clone(),_=d.clone();!d.isZero();){for(var S=0,U=1;!(d.words[0]&U)&&S<26;++S,U<<=1);if(S>0)for(d.iushrn(S);S-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(p),w.isub(_)),b.iushrn(1),w.iushrn(1);for(var V=0,ne=1;!(h.words[0]&ne)&&V<26;++V,ne<<=1);if(V>0)for(h.iushrn(V);V-- >0;)(y.isOdd()||C.isOdd())&&(y.iadd(p),C.isub(_)),y.iushrn(1),C.iushrn(1);d.cmp(h)>=0?(d.isub(h),b.isub(y),w.isub(C)):(h.isub(d),y.isub(b),C.isub(w))}return{a:y,b:C,gcd:h.iushln(v)}},o.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var d=this,h=f.clone();d.negative!==0?d=d.umod(f):d=d.clone();for(var b=new o(1),w=new o(0),y=h.clone();d.cmpn(1)>0&&h.cmpn(1)>0;){for(var C=0,v=1;!(d.words[0]&v)&&C<26;++C,v<<=1);if(C>0)for(d.iushrn(C);C-- >0;)b.isOdd()&&b.iadd(y),b.iushrn(1);for(var p=0,_=1;!(h.words[0]&_)&&p<26;++p,_<<=1);if(p>0)for(h.iushrn(p);p-- >0;)w.isOdd()&&w.iadd(y),w.iushrn(1);d.cmp(h)>=0?(d.isub(h),b.isub(w)):(h.isub(d),w.isub(b))}var S;return d.cmpn(1)===0?S=b:S=w,S.cmpn(0)<0&&S.iadd(f),S},o.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var d=this.clone(),h=f.clone();d.negative=0,h.negative=0;for(var b=0;d.isEven()&&h.isEven();b++)d.iushrn(1),h.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;h.isEven();)h.iushrn(1);var w=d.cmp(h);if(w<0){var y=d;d=h,h=y}else if(w===0||h.cmpn(1)===0)break;d.isub(h)}while(!0);return h.iushln(b)},o.prototype.invm=function(f){return this.egcd(f).a.umod(f)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(f){return this.words[0]&f},o.prototype.bincn=function(f){n(typeof f=="number");var d=f%26,h=(f-d)/26,b=1<<d;if(this.length<=h)return this._expand(h+1),this.words[h]|=b,this;for(var w=b,y=h;w!==0&&y<this.length;y++){var C=this.words[y]|0;C+=w,w=C>>>26,C&=67108863,this.words[y]=C}return w!==0&&(this.words[y]=w,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(f){var d=f<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var h;if(this.length>1)h=1;else{d&&(f=-f),n(f<=67108863,"Number is too big");var b=this.words[0]|0;h=b===f?0:b<f?-1:1}return this.negative!==0?-h|0:h},o.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var d=this.ucmp(f);return this.negative!==0?-d|0:d},o.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var d=0,h=this.length-1;h>=0;h--){var b=this.words[h]|0,w=f.words[h]|0;if(b!==w){b<w?d=-1:b>w&&(d=1);break}}return d},o.prototype.gtn=function(f){return this.cmpn(f)===1},o.prototype.gt=function(f){return this.cmp(f)===1},o.prototype.gten=function(f){return this.cmpn(f)>=0},o.prototype.gte=function(f){return this.cmp(f)>=0},o.prototype.ltn=function(f){return this.cmpn(f)===-1},o.prototype.lt=function(f){return this.cmp(f)===-1},o.prototype.lten=function(f){return this.cmpn(f)<=0},o.prototype.lte=function(f){return this.cmp(f)<=0},o.prototype.eqn=function(f){return this.cmpn(f)===0},o.prototype.eq=function(f){return this.cmp(f)===0},o.red=function(f){return new z(f)},o.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(f){return this.red=f,this},o.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},o.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},o.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},o.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},o.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},o.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},o.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},o.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var H={k256:null,p224:null,p192:null,p25519:null};function K(O,f){this.name=O,this.p=new o(f,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var f=new o(null);return f.words=new Array(Math.ceil(this.n/13)),f},K.prototype.ireduce=function(f){var d=f,h;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),h=d.bitLength();while(h>this.n);var b=h<this.n?-1:d.ucmp(this.p);return b===0?(d.words[0]=0,d.length=1):b>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},K.prototype.split=function(f,d){f.iushrn(this.n,0,d)},K.prototype.imulK=function(f){return f.imul(this.k)};function ee(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(ee,K),ee.prototype.split=function(f,d){for(var h=4194303,b=Math.min(f.length,9),w=0;w<b;w++)d.words[w]=f.words[w];if(d.length=b,f.length<=9){f.words[0]=0,f.length=1;return}var y=f.words[9];for(d.words[d.length++]=y&h,w=10;w<f.length;w++){var C=f.words[w]|0;f.words[w-10]=(C&h)<<4|y>>>22,y=C}y>>>=22,f.words[w-10]=y,y===0&&f.length>10?f.length-=10:f.length-=9},ee.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var d=0,h=0;h<f.length;h++){var b=f.words[h]|0;d+=b*977,f.words[h]=d&67108863,d=b*64+(d/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function me(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(me,K);function be(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(be,K);function ie(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(ie,K),ie.prototype.imulK=function(f){for(var d=0,h=0;h<f.length;h++){var b=(f.words[h]|0)*19+d,w=b&67108863;b>>>=26,f.words[h]=w,d=b}return d!==0&&(f.words[f.length++]=d),f},o._prime=function(f){if(H[f])return H[f];var d;if(f==="k256")d=new ee;else if(f==="p224")d=new me;else if(f==="p192")d=new be;else if(f==="p25519")d=new ie;else throw new Error("Unknown prime "+f);return H[f]=d,d};function z(O){if(typeof O=="string"){var f=o._prime(O);this.m=f.p,this.prime=f}else n(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}z.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},z.prototype._verify2=function(f,d){n((f.negative|d.negative)===0,"red works only with positives"),n(f.red&&f.red===d.red,"red works only with red numbers")},z.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(u(f,f.umod(this.m)._forceRed(this)),f)},z.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},z.prototype.add=function(f,d){this._verify2(f,d);var h=f.add(d);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},z.prototype.iadd=function(f,d){this._verify2(f,d);var h=f.iadd(d);return h.cmp(this.m)>=0&&h.isub(this.m),h},z.prototype.sub=function(f,d){this._verify2(f,d);var h=f.sub(d);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},z.prototype.isub=function(f,d){this._verify2(f,d);var h=f.isub(d);return h.cmpn(0)<0&&h.iadd(this.m),h},z.prototype.shl=function(f,d){return this._verify1(f),this.imod(f.ushln(d))},z.prototype.imul=function(f,d){return this._verify2(f,d),this.imod(f.imul(d))},z.prototype.mul=function(f,d){return this._verify2(f,d),this.imod(f.mul(d))},z.prototype.isqr=function(f){return this.imul(f,f.clone())},z.prototype.sqr=function(f){return this.mul(f,f)},z.prototype.sqrt=function(f){if(f.isZero())return f.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var h=this.m.add(new o(1)).iushrn(2);return this.pow(f,h)}for(var b=this.m.subn(1),w=0;!b.isZero()&&b.andln(1)===0;)w++,b.iushrn(1);n(!b.isZero());var y=new o(1).toRed(this),C=y.redNeg(),v=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new o(2*p*p).toRed(this);this.pow(p,v).cmp(C)!==0;)p.redIAdd(C);for(var _=this.pow(p,b),S=this.pow(f,b.addn(1).iushrn(1)),U=this.pow(f,b),V=w;U.cmp(y)!==0;){for(var ne=U,we=0;ne.cmp(y)!==0;we++)ne=ne.redSqr();n(we<V);var fe=this.pow(_,new o(1).iushln(V-we-1));S=S.redMul(fe),_=fe.redSqr(),U=U.redMul(_),V=we}return S},z.prototype.invm=function(f){var d=f._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},z.prototype.pow=function(f,d){if(d.isZero())return new o(1).toRed(this);if(d.cmpn(1)===0)return f.clone();var h=4,b=new Array(1<<h);b[0]=new o(1).toRed(this),b[1]=f;for(var w=2;w<b.length;w++)b[w]=this.mul(b[w-1],f);var y=b[0],C=0,v=0,p=d.bitLength()%26;for(p===0&&(p=26),w=d.length-1;w>=0;w--){for(var _=d.words[w],S=p-1;S>=0;S--){var U=_>>S&1;if(y!==b[0]&&(y=this.sqr(y)),U===0&&C===0){v=0;continue}C<<=1,C|=U,v++,!(v!==h&&(w!==0||S!==0))&&(y=this.mul(y,b[C]),v=0,C=0)}p=26}return y},z.prototype.convertTo=function(f){var d=f.umod(this.m);return d===f?d.clone():d},z.prototype.convertFrom=function(f){var d=f.clone();return d.red=null,d},o.mont=function(f){return new te(f)};function te(O){z.call(this,O),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(te,z),te.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},te.prototype.convertFrom=function(f){var d=this.imod(f.mul(this.rinv));return d.red=null,d},te.prototype.imul=function(f,d){if(f.isZero()||d.isZero())return f.words[0]=0,f.length=1,f;var h=f.imul(d),b=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=h.isub(b).iushrn(this.shift),y=w;return w.cmp(this.m)>=0?y=w.isub(this.m):w.cmpn(0)<0&&(y=w.iadd(this.m)),y._forceRed(this)},te.prototype.mul=function(f,d){if(f.isZero()||d.isZero())return new o(0)._forceRed(this);var h=f.mul(d),b=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=h.isub(b).iushrn(this.shift),y=w;return w.cmp(this.m)>=0?y=w.isub(this.m):w.cmpn(0)<0&&(y=w.iadd(this.m)),y._forceRed(this)},te.prototype.invm=function(f){var d=this.imod(f._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(e,Lf)})(Gf);const id="3.7.7",Hf=id,Gr=typeof Buffer=="function",Gc=typeof TextDecoder=="function"?new TextDecoder:void 0,Hc=typeof TextEncoder=="function"?new TextEncoder:void 0,Xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",co=Array.prototype.slice.call(Xf),Uo=(e=>{let t={};return e.forEach((i,n)=>t[i]=n),t})(co),Jf=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ti=String.fromCharCode.bind(String),Xc=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),nd=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),rd=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),od=e=>{let t,i,n,r,o="";const s=e.length%3;for(let a=0;a<e.length;){if((i=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=i<<16|n<<8|r,o+=co[t>>18&63]+co[t>>12&63]+co[t>>6&63]+co[t&63]}return s?o.slice(0,s-3)+"===".substring(s):o},pc=typeof btoa=="function"?e=>btoa(e):Gr?e=>Buffer.from(e,"binary").toString("base64"):od,Ea=Gr?e=>Buffer.from(e).toString("base64"):e=>{let i=[];for(let n=0,r=e.length;n<r;n+=4096)i.push(ti.apply(null,e.subarray(n,n+4096)));return pc(i.join(""))},es=(e,t=!1)=>t?nd(Ea(e)):Ea(e),Zf=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?ti(192|t>>>6)+ti(128|t&63):ti(224|t>>>12&15)+ti(128|t>>>6&63)+ti(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return ti(240|t>>>18&7)+ti(128|t>>>12&63)+ti(128|t>>>6&63)+ti(128|t&63)}},Qf=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,sd=e=>e.replace(Qf,Zf),Jc=Gr?e=>Buffer.from(e,"utf8").toString("base64"):Hc?e=>Ea(Hc.encode(e)):e=>pc(sd(e)),Br=(e,t=!1)=>t?nd(Jc(e)):Jc(e),Zc=e=>Br(e,!0),Yf=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,eh=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return ti((i>>>10)+55296)+ti((i&1023)+56320);case 3:return ti((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return ti((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},ad=e=>e.replace(Yf,eh),cd=e=>{if(e=e.replace(/\s+/g,""),!Jf.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",n,r;for(let o=0;o<e.length;)t=Uo[e.charAt(o++)]<<18|Uo[e.charAt(o++)]<<12|(n=Uo[e.charAt(o++)])<<6|(r=Uo[e.charAt(o++)]),i+=n===64?ti(t>>16&255):r===64?ti(t>>16&255,t>>8&255):ti(t>>16&255,t>>8&255,t&255);return i},_c=typeof atob=="function"?e=>atob(rd(e)):Gr?e=>Buffer.from(e,"base64").toString("binary"):cd,ld=Gr?e=>Xc(Buffer.from(e,"base64")):e=>Xc(_c(e).split("").map(t=>t.charCodeAt(0))),dd=e=>ld(ud(e)),th=Gr?e=>Buffer.from(e,"base64").toString("utf8"):Gc?e=>Gc.decode(ld(e)):e=>ad(_c(e)),ud=e=>rd(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Ba=e=>th(ud(e)),ih=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fd=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),hd=function(){const e=(t,i)=>Object.defineProperty(String.prototype,t,fd(i));e("fromBase64",function(){return Ba(this)}),e("toBase64",function(t){return Br(this,t)}),e("toBase64URI",function(){return Br(this,!0)}),e("toBase64URL",function(){return Br(this,!0)}),e("toUint8Array",function(){return dd(this)})},pd=function(){const e=(t,i)=>Object.defineProperty(Uint8Array.prototype,t,fd(i));e("toBase64",function(t){return es(this,t)}),e("toBase64URI",function(){return es(this,!0)}),e("toBase64URL",function(){return es(this,!0)})},nh=()=>{hd(),pd()},ts={version:id,VERSION:Hf,atob:_c,atobPolyfill:cd,btoa:pc,btoaPolyfill:od,fromBase64:Ba,toBase64:Br,encode:Br,encodeURI:Zc,encodeURL:Zc,utob:sd,btou:ad,decode:Ba,isValid:ih,fromUint8Array:es,toUint8Array:dd,extendString:hd,extendUint8Array:pd,extendBuiltins:nh};function oa(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=l[0]&2?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(l[0]===6&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],r=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Cn;(function(e){e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS"})(Cn||(Cn={}));var rh=function(){function e(t){this.compare=t||e.defaultCompareFunction}return e.defaultCompareFunction=function(t,i){return t===i?Cn.EQUAL:t<i?Cn.LESS:Cn.GREATER},e.prototype.equal=function(t,i){return this.compare(t,i)===Cn.EQUAL},e.prototype.lessThan=function(t,i){return this.compare(t,i)===Cn.LESS},e.prototype.greaterThan=function(t,i){return this.compare(t,i)===Cn.GREATER},e.prototype.lessThanOrEqual=function(t,i){return this.lessThan(t,i)||this.equal(t,i)},e.prototype.greaterThanOrEqual=function(t,i){return this.greaterThan(t,i)||this.equal(t,i)},e.prototype.reverse=function(){var t=this.compare;this.compare=function(i,n){return t(n,i)}},e}(),Qc=function(){function e(t){this.value=t,this.next=null}return e}(),Yc=function(){function e(t){this.value=t,this.next=null,this.prev=null}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Na=function(e,t){return Na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},Na(e,t)};function Hr(e,t){Na(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function ko(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=l[0]&2?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(l[0]===6&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],r=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function oh(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function Ki(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(oh(arguments[t]));return e}var sh="obfuse error occur";function _s(e,t){if(!e)throw new Error("[linked-list] "+(t||sh))}var ah=-1,_d=function(){function e(){for(var t=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];this._head=null,this._tail=null,this._length=0,this.compare=new rh,i.length>0&&i.forEach(function(r){t.append(r)})}return Object.defineProperty(e.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopLength",{get:function(){var t=!1,i=1;if(!this._head)return 0;for(var n=this._head,r=this._head;r.next&&r.next.next;)if(r=r.next.next,n=n.next,n===r){t=!0;break}if(t){for(r=r.next;n!==r;)i++,r=r.next;return i}else return 0},enumerable:!0,configurable:!0}),e.prototype.getNode=function(t){var i=this._length;_s(i>0&&t>=0&&t<i,"[linked-list] index "+t+" out of scope of list, which length is "+i);for(var n=this._head,r=0;r<t;)n=n.next,r++;return n},e.prototype.get=function(t){var i=this.getNode(t);return i?i.value:null},e.prototype.find=function(t){var i=t.value,n=t.callback;if(!this._head)return null;for(var r=this._head;r;){if(n&&n(r.value)||i!==void 0&&this.compare.equal(r.value,i))return r;r=r.next}return null},e.prototype.indexOf=function(t){if(!this._head)return ah;for(var i=this._head,n=-1;i.next;){if(n++,this.compare.equal(i.value,t))return n;i=i.next}return i===this._tail&&this.compare.equal(i.value,t)&&(n+=1),n},e.prototype.first=function(t){_s(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var i=this.iterator(),n=[],r=Math.min(t,this.length),o=0;o<r;o++){var s=i.next();n.push(s.value)}return n},e.prototype.toArray=function(){return Ki(this)},e.prototype.isEmpty=function(){return this._head===null},e.prototype.iterator=function(){var t;return ko(this,function(i){switch(i.label){case 0:t=this._head,i.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return i.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e}(),Co=function(e){Hr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.apply(this,Ki(i))||this}return t.prototype.append=function(i){var n=new Qc(i);return this._tail?(this._tail.next=n,this._tail=n):this._head=this._tail=n,this._length++,!0},t.prototype.prepend=function(i){var n=new Qc(i);return this._head?(n.next=this._head,this._head=n):this._head=this._tail=n,this._length++,!0},t.prototype.remove=function(i){var n=this._head;if(n){if(this.compare.equal(n.value,i))return n.next?(this._head=n.next,n.next=null):this._head=this._tail=null,this._length--,i;for(var r=n;;){if(this.compare.equal(n.value,i))return n.next?r.next=n.next:(this._tail=r,this._tail.next=null),n.next=null,this._length--,i;if(n.next)r=n,n=n.next;else return}}},t.prototype.removeHead=function(){var i=this._head;if(i)return this._head.next?(this._head=i.next,i.next=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.removeTail=function(){var i=this._tail;if(i){if(!this._head.next)this._head=null,this._tail=null;else{for(var n=this._head;n.next!==i;)n=n.next;n.next=null,this._tail=n}return this._length--,i.value}},t.prototype.reverse=function(){if(this._head){var i=this._head,n=null,r;for(this._tail=this._head;i!==null;)r=i.next,i.next=n,n=i,i=r;this._head=n}},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Ki([void 0],i)))},t}(_d),ch=function(e){Hr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Ki(i))||this;return r.cyclization(),r}return t.prototype.iterator=function(){var i;return ko(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,i===this._head&&(i=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var i;return ko(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.breakCircle();var o=e.prototype[i].apply(this,n);return this.cyclization(),o},t.prototype.getNode=function(i){return this.mapToNormalListFn("getNode",i)},t.prototype.append=function(i){return this.mapToNormalListFn("append",i)},t.prototype.prepend=function(i){return this.mapToNormalListFn("prepend",i)},t.prototype.find=function(i){return this.mapToNormalListFn("find",i)},t.prototype.indexOf=function(i){return this.mapToNormalListFn("indexOf",i)},t.prototype.remove=function(i){return this.mapToNormalListFn("remove",i)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(i){_s(i>=0,"[linked-list] param 'num' ("+i+") should not less than 0");for(var n=this.circleIterator(),r=[],o=0;o<i;o++){var s=n.next();r.push(s.value)}return r},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(Co);(function(e){Hr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Ki(i))||this;return r.cyclization(),r}return t.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},t.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Ki([void 0],i)))},t})(ch);var lh=function(e){Hr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.apply(this,Ki(i))||this}return t.prototype.append=function(i){var n=new Yc(i);return this._tail?(this._tail.next=n,n.prev=this._tail,this._tail=n):this._head=this._tail=n,this._length++,!0},t.prototype.prepend=function(i){var n=new Yc(i);return this._head?(n.next=this._head,this._head.prev=n,this._head=n):this._head=this._tail=n,this._length++,!0},t.prototype.remove=function(i){var n=this._head;if(n){if(this.compare.equal(n.value,i))return n.next?(this._head=n.next,this._head.prev=null,n.next=n.prev=null):this._head=this._tail=null,this._length--,i;for(;;){if(this.compare.equal(n.value,i))return n.next?(n.prev.next=n.next,n.next.prev=n.prev,n.next=n.prev=null):(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null),this._length--,n.value;if(n.next)n=n.next;else return}}},t.prototype.removeHead=function(){var i=this._head;if(i)return this._head.next?(i.next.prev=null,this._head=i.next,i.next=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.removeTail=function(){var i=this._tail;if(i)return this._head.next?(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.reverse=function(){if(this._head){var i=this._head,n=null,r;for(this._tail=this._head;i!==null;)r=i.next,i.next=n,i.prev=r,n=i,i=r;this._head=n}},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Ki([void 0],i)))},t}(_d),dh=function(e){Hr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Ki(i))||this;return r.cyclization(),r}return t.prototype.iterator=function(){var i;return ko(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,i===this._head&&(i=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var i;return ko(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.breakCircle();var o=e.prototype[i].apply(this,n);return this.cyclization(),o},t.prototype.getNode=function(i){return this.mapToNormalListFn("getNode",i)},t.prototype.append=function(i){return this.mapToNormalListFn("append",i)},t.prototype.prepend=function(i){return this.mapToNormalListFn("prepend",i)},t.prototype.find=function(i){return this.mapToNormalListFn("find",i)},t.prototype.indexOf=function(i){return this.mapToNormalListFn("indexOf",i)},t.prototype.remove=function(i){return this.mapToNormalListFn("remove",i)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(i){_s(i>=0,"[linked-list] param 'num' ("+i+") should not less than 0");for(var n=this.circleIterator(),r=[],o=0;o<i;o++){var s=n.next();r.push(s.value)}return r},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(lh);(function(e){Hr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Ki(i))||this;return r.cyclization(),r}return t.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},t.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Ki([void 0],i)))},t})(dh);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function uh(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function fh(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(uh(arguments[t]));return e}var hh=function(){function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.queue=new(Co.bind.apply(Co,fh([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.queue.isEmpty()},e.prototype.enqueue=function(t){return this.queue.append(t)},e.prototype.dequeue=function(){var t=this.queue.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.queue.toArray()},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ph(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function _h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ph(arguments[t]));return e}var sa=function(){function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.stack=new(Co.bind.apply(Co,_h([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.stack.isEmpty()},e.prototype.push=function(t){return this.stack.append(t)},e.prototype.pop=function(){var t=this.stack.removeTail();return typeof t<"u"?t:void 0},e.prototype.popBottom=function(){var t=this.stack.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.stack.toArray()},e}(),mh=function(){function e(t,i,n){n===void 0&&(n=0),this.startVertex=t,this.endVertex=i,this.weight=n}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),i=this.endVertex.getKey();return t+"_"+i},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function Da(e,t,i){if(i===void 0&&(i="cc-graph"),!e)throw new Error((i?"["+i+"]":"")+" Invariant failed: "+t)}function gh(e,t){t===void 0&&(t=!0);var i=typeof e<"u"&&e!==null;return t?i&&e!=="undefined"&&e!=="null":i}var el=function(){function e(t){Da(gh(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,i=this.getEdges(),n=function(r){return r.startVertex===t?r.endVertex:r.startVertex};return i.map(n)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var i=this.getEdges().find(function(n){return n===t});return!!i},e.prototype.hasNeighbor=function(t){var i=this.getEdges().find(function(n){return n.startVertex===t||n.endVertex===t});return!!i},e.prototype.findEdge=function(t){var i=function(r){return r.startVertex===t||r.endVertex===t},n=this.getEdges().find(i);return n||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(i){return t.deleteEdge(i)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();function tl(e,t,i,n){if(e){t.push(e),n.set(e.getKey(),!0);var r=e.getNeighbors().filter(function(o){return!n.get(o.getKey())});i.push(r)}}function il(e,t,i){var n=e.pop();n&&i.set(n.getKey(),!1),t.pop()}var bh=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,i){if(i===void 0&&(i=!1),this.edges[t.getKey()]){if(i)return this;Da(!1,"Edge has already been added before")}var n=this.getVertexByKey(t.startVertex.getKey()),r=this.getVertexByKey(t.endVertex.getKey());if(n||(this.addVertex(t.startVertex),n=this.getVertexByKey(t.startVertex.getKey())),r||(this.addVertex(t.endVertex),r=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)n.addEdge(t);else{n.addEdge(t);var o=t.clone();r.addEdge(o.reverse())}return this},e.prototype.deleteEdge=function(t,i){if(i===void 0&&(i=!1),!this.edges[t.getKey()]){if(i)return this;Da(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var n=this.getVertexByKey(t.startVertex.getKey()),r=this.getVertexByKey(t.endVertex.getKey());return n.deleteEdge(t),r.deleteEdge(t),this},e.prototype.findEdge=function(t,i){var n=this.getVertexByKey(t.getKey());return n?n.findEdge(i):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,i){return t+i.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(i){t.deleteEdge(i),i.reverse(),t.addEdge(i)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(i,n){t[i.getKey()]=n}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,i=this.getAllVertices(),n=this.getVerticesIndices(),r=Array(i.length).fill(null).map(function(){return Array(i.length).fill(1/0)});return i.forEach(function(o,s){o.getNeighbors().forEach(function(a){var c=n[a.getKey()],l=t.findEdge(o,a);l&&(r[s][c]=l.weight)})}),r},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var i,n,r;return oa(this,function(o){switch(o.label){case 0:i=new Map,n=new hh,n.enqueue(t),o.label=1;case 1:return n.isEmpty()?[3,4]:(r=n.dequeue(),r&&!i.has(r.getKey())?[4,r]:[3,3]);case 2:o.sent(),i.set(r.getKey(),r),r.getNeighbors().forEach(function(s){return n.enqueue(s)}),o.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var i,n,r;return oa(this,function(o){switch(o.label){case 0:i=new Map,n=new sa,n.push(t),o.label=1;case 1:return n.isEmpty()?[3,4]:(r=n.pop(),r&&!i.has(r.getKey())?[4,r]:[3,3]);case 2:o.sent(),i.set(r.getKey(),r),r.getNeighbors().forEach(function(s){return n.push(s)}),o.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,i){var n,r,o,s,a,c,l;return oa(this,function(u){switch(u.label){case 0:return n=[],t!==i?[3,2]:(n.push(t),[4,n]);case 1:return u.sent(),[2];case 2:r=new Map,o=new sa,s=new sa,tl(t,o,s,r),u.label=3;case 3:if(o.isEmpty())return[3,6];if(a=s.pop(),a&&a.length)c=a.shift(),s.push(a),c&&tl(c,o,s,r);else return s.push(a),il(o,s,r),[3,3];return l=o.peek,l!==i?[3,5]:[4,o.toArray()];case 4:u.sent(),il(o,s,r),u.label=5;case 5:return[3,3];case 6:return[2]}})},e}();const wh=Uf(),md=wh.public.appEnv;console.log("config env: ",md);const yh={pro:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0x4fb259302630bf727f1b489e0597131fe4d8ccba12074bb7fedba3886c008945",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://alpha.cetus.zone",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://cetus-mainnet-endpoint.blockvision.org",queryTxsBlocksRpcUrl:"https://cetus-mainnet-endpoint.blockvision.org",rpcName:"BlockVision 2",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui.cetus.zone/router_v2/find_routes",aggregatorV2:{package_id:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302",published_at:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"},dca:{package_id:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",published_at:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",config:{admin_cap_id:"0xbcdd7391245dd8d6118a39bc83e6d9a7cfca899d06cc283c1a4cae41b2508574",global_config_id:"0x5db218756f8486fa2ac26fab590c4be4e439be54e6d932c9a30b20573a5b706a",indexer_id:"0x713f0968d042b48f4ec57e4e21bd7e346d06355f59776faedc9497ca990a9f77",user_indexer_id:"0x0ae365f60f2fa692831f9496c9e49b2440c74f14e8eab6f88dbb418c443b5020",in_coin_whitelist_id:"0x845643253afdfef9c4202e7af5e2de374b7f4766f78694903e8b2c0f83dab3ce",out_coin_whitelist_id:"0xe398b24a2b28f1ffd18394eaa78538d6ec8111dcb5fd919424bd3d42764c19f7"}}}},pre:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://cetus-mainnet-endpoint.blockvision.org",queryTxsBlocksRpcUrl:"https://cetus-mainnet-endpoint.blockvision.org",rpcName:"BlockVision 2",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui-cloudfront.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui-cloudfront.cetus.zone/router_v2/find_routes",aggregatorV2:{package_id:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302",published_at:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!1,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"},dca:{package_id:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",published_at:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",config:{admin_cap_id:"0xbcdd7391245dd8d6118a39bc83e6d9a7cfca899d06cc283c1a4cae41b2508574",global_config_id:"0x5db218756f8486fa2ac26fab590c4be4e439be54e6d932c9a30b20573a5b706a",indexer_id:"0x713f0968d042b48f4ec57e4e21bd7e346d06355f59776faedc9497ca990a9f77",user_indexer_id:"0x0ae365f60f2fa692831f9496c9e49b2440c74f14e8eab6f88dbb418c443b5020",in_coin_whitelist_id:"0x845643253afdfef9c4202e7af5e2de374b7f4766f78694903e8b2c0f83dab3ce",out_coin_whitelist_id:"0xe398b24a2b28f1ffd18394eaa78538d6ec8111dcb5fd919424bd3d42764c19f7"}}}},preRoute:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xfa36bcb799278bddaf295991b2d3ce039013b1dd60dfd7183dee135fdadbc4be",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7",published_at:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7"},aggregatorUrl:"https://api-sui.cetus.zone/router1",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x7cc8461d20ad82d3851123a64bed22883199b465763ee53b1b529fba1f4e15cc",published_at:"0x9f63e8926719bcb45df55fb60b4444f4d50309bff2e85cccc1fdb91c3e4653a2",config:{pools_id:"0x68b4b6bd15aa086df8f8d94f62fb5b38817a02cc288802d1637e1febae46f545",admin_cap_id:"0x5a304d63a5421a3fbc190b3d124f7ea3cdf56b1cb8fd3e0bf4855d129075caef",package_version_id:"0xceab2289e0968f0e7172ce702af8f28a678570afa6b139e97bc344f0290672d6"}},xcetus:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"}}},test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.testnet.sui.io",fullRpcUrl:"https://fullnode.testnet.sui.io",queryTxsBlocksRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",explorerUrl1:"https://testnet.suivision.xyz",network:"testnet",networkTip:"Testnet",api:"https://api-sui.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count/v3",faucet:{faucet_display:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",faucet_router:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc"},simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x084dbc14f8f6b50e4e1d6828ebf1f93fd1b1d2502b121bc787937893793417b0",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699"}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xe26cb89a7c3bb9a00b396e278f4f1f90aae02d0da37cd4b0c4b4977ca95568ef"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",aggregatorv2Url:"https://api-sui.devcetus.com/router_v2/find_routes",aggregatorV2:{package_id:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0",published_at:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0"},launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetusTokenAddress:"0x04792c459e2c20d1d48c85ab2eed98ef115d5b3e36ccf6ce8d0d3c79ca548c91::xtoken::XTOKEN",xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x4061e279415a3c45cfd31554d38c5b3bb0e06c65833811a98a66f469e04c69c3",published_at:"0xfeda040996e722ba532ab2203d13333484024456ca38bf4adeb526ce1457332d",config:{dividend_manager_id:"0x9d1be1a6b1146b30448a266bc87127466c0bae1585750c42adffce3e25e1ab6d",dividend_admin_id:"0x36d63c1a588bd93775aff8f47538a0063960564f0a171d100a9f49526a872b92",dividend_settle_id:"0x9eb78595419560b1dcaa9fb0ca307921ab1664a5f63c877c6887ab696344b400",venft_dividends_id:"0xc31a85fa5a77fc1def0dc5b2aadc5317a9d744ffda24b472e56a646711770676",venft_dividends_id_v2:"0x53b24031120730f6e4a733526147917650b1ecd3c56b43164b69eaa74f9b9ff7"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"0xb58a7b66d3d007d9977940598187104084951bd8fdabb74f03f68151a3e27710",published_at:"0x72eefdfad9c79ef4c69748f9fcaf47874779704475d9ce35a29cc0ff1b9ce29f",config:{xtoken_manager_id:"0x51c6f72ecbc819aeee851b5e2d79cf6100e8e2b44e7ca55b06bd81bd163f677f",lock_manager_id:"0x92cb9f128ae2f823401c2104136a96cde6c201d6a133a1c7b5c67f4400711a10",lock_handle_id:"0x5cc82e84cf911a2d904997c7ef3e2e98eb3fea0bc43308f7b8c52bf0aff478b9"}},xtoken_dividends:{package_id:"0xdc899c0b05327036990f08cd70b99ef92c4288b784cbb82088c099d109a30226",published_at:"0x4677c8990eab6036d7059be96ad82173efd88775be36e277f4543155da4cbb9e",config:{dividend_manager_id:"0xaf17350657fb26a972d088bfb9db4491d11bf5533b7a5272ab6aa4a1badee749",dividend_admin_id:"0x8c0993c6ea9574cf6a3743698a0d6a46c7bbc4bab668d28b51aa947ad34edfc2",dividend_settle_id:"0xd938930b4ad7ef0cd85d8ae640d6ed7fd5cfcb64101994b69b88aa240dba1cb0"}},token_faucet:{package_id:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5",published_at:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5"},booster:{package_id:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",published_at:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",config:{booster_config_id:"0xeba41bf99086b0140713d7dd102e1374281a608bf524cc38f62c1d2bd792715c",booster_pool_handle:"0x01f9ba86234f661157366b8393eaeba82c8b78bf40fd9728604c3cc142811629"}},liquidity_stratefy:{package_id:"0x9b894cff0422a6acc41dadab3c8e2f52da7b5f0b366821a80d62eaf650565c3f",published_at:"0xc76c30d0a7b3e0a4372b6e7f24d73ef4d7740eaf920789e658795502c2fd252a",config:{master_manger_id:"0x562f2c9a90ffc3cdbe492b8cedb2e911954c81e8d20b47c4d2b0b2782bd7cad2",master_liquidity_handle:"0x323179fcd8fc2c01f146a902aaec56221e791fb0f1965907c97b25cba5eac515"}},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0xe1fb9fc8542a9e7768b0a701bf0c11b595201fb2492791a03eb9c0bb319297f3",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a",haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",version:1,config:{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:"::cert::CERT"}},aftermath:{package_id:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",published_at:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",version:1,config:{staked_sui_vault:"0xe498a8c07ec62200c519a0092eda233abdab879e8f332c11bdc1819eb7b12fbb",referral_vault:"0x8d357115058f22976cd01c5415116d9aca806d1ded37eecd75d87978f404e927",safe:"0x38710a6e0bd885c158e52ec7a42c8a9a1826c6696b626b4a5e2d1dcb15cfd9b7",validator_address:"0x9336c4c9d891e263cfac99adc397853a7392e5cf84cbd5df92207a57c7fbdadc",coin_type:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4::afsui::AFSUI"}}}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC",toCoin:"0x2::sui::SUI"},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xc4c250fa155fb27668650fd96aeaade6a3e7c669395f147b05747a5d9eb35795",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",config:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"}},cetus_integrate2:{package_id:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c",published_at:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c"},dca:{package_id:"0x484d2be08b58b8dc00a08c0ff8a2a9cd0542c4249ea2d5934ef9b15a10585d88",published_at:"0x484d2be08b58b8dc00a08c0ff8a2a9cd0542c4249ea2d5934ef9b15a10585d88",config:{admin_cap_id:"0xf54334a5cf41874d151cc610f7575f2b9ca8aab32103be3ed87f07f73388dcf2",global_config_id:"0xdac150723df0b51c1407ea942036d7f9d4e3b064ff35a4136dd31ffb397497e0",indexer_id:"0xacd0ab94883a8785c5258388618b6252f0c2e9384b23f91fc23f6c8ef44d445c",user_indexer_id:"0xc4ca05342746468383922650a3137bd3efc49d4c7a37431ed11a94c08dbfb677",in_coin_whitelist_id:"0xe72cdb8a0777bbcb5105b7045b90f5fdc8c7b946d48fd4cec0607d201a45a9b7",out_coin_whitelist_id:"0xbe67538ca0e4683fef704b374d034f5a4f79cdc756ea47cec82df55b37d4ff0a"}}}},pre_test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},token:{token_display:"0x481fb627bf18bc93c02c41ada3cc8b574744ef23c9d5e3136637ae3076e71562",config:{coin_registry_id:"0xe0b8cb7e56d465965cac5c5fe26cba558de35d88b9ec712c40f131f72c600151",pool_registry_id:"0xab40481f926e686455edf819b4c6485fbbf147a42cf3b95f72ed88c94577e67a",coin_list_owner:"0x1f6510ee7d8e2b39261bad012f0be0adbecfd75199450b7cbf28efab42dad083",pool_list_owner:"0x6de133b609ea815e1f6a4d50785b798b134f567ec1f4ee113ae73f6900b4012d"}},clmm:{clmm_display:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",clmm_router:"0x780e590a9354f5bcb429af4578c742aaa0ee20ab942bb2bbd161fbde4b64b08c",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},launchpad:{ido_display:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",ido_router:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",config_display:"0xc9b958492e4be73e0af4daa48101bc7ab2a7ab7c67585938ea3535929fc193fa",config:{pools_id:"0x7b96aea4d695996635265e2cc41d5c5f5c4cd70f36763e41b2abf2fa1eff866f",admin_cap_id:"0x342f4b272ff5abcaacc770a5972728b154a5e74835fa36b2340ad94895184acb",config_cap_id:"0xef2a813b8c1bbaf9470fff7df0fd0febebdc6e2bbd3d7bf9a917734af7893428",config_pools_id:"0x04b6e8de80f325bdf5963dc54f324c3319b471f2f93163ebc982bee0d9b38336"}},xcetus:{xcetus_display:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",xcetus_router:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",dividends_display:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",dividends_router:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",cetus_faucet:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49",dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5"}},hasCreatePool:!1,hasNotifi:!1}},testnet_external:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0xc7c40602f81eee198f472e14c87cb9c7186496064adba06cef1768c8b1785512",config:{coin_registry_id:"0xde9a5123749136ca9fe05b88777e322f2161fe4aa71e9c575d5e27a31b815d40",pool_registry_id:"0x7b7b399344838363ec96611f133c77b98042404559e326fd289885b88848a3c5",coin_list_owner:"0xc93e168a9361b5443fef27dbbb95a023337c6bfd082fdd920d658f4f9147d801",pool_list_owner:"0x36d796de9529007373fd2e34311511a8ca4eaef2bf7ea65f65ab68a1bc1de092"}},clmm:{clmm_display:"0x837dddad95c6741474cde3e414a2eebccbeae81d0b378f193d00381bdaf0da62",clmm_router:"0x32ba8c0298964e26161b3b44375ac39eeab6b29207e00c5f44368426096eb902",config:{pools_id:"0xc8407fc5dfec8d7b7014ee4d244dbe4eb456bfa6a7878e88c9d4bc947b2c2d87",global_config_id:"0x43e2925f7c5bed04b612cc66c53a850e280a46704ce12cd2f25420b537e23f9d",global_vault_id:"0x435c9725c4026206002a5a4004762316a53891f21a10c695311074482e52757e"}},launchpad:{ido_display:"",ido_router:"",lock_display:"",lock_router:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:"",lock_manager_id:""}},xcetus:{xcetus_display:"",xcetus_router:"",dividends_display:"",dividends_router:"",cetus_faucet:"",config:{xcetus_manager_id:"",lock_manager_id:"",dividend_manager_id:""}},hasCreatePool:!0,hasNotifi:!1}},local:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"http://192.168.1.41:9000",faucetURL:"http://192.168.1.41:9123/gas",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x61353a797a3d7f9c5522641bf824d730272260bcf66c7fcaf36a50243418caca",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"",config:{coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""}},clmm:{clmm_display:"0x33e0056fdbd9444c20302ce4141eaf5ec66fe864b62d8c0e3ee3bb1d138ee445",clmm_router:"0x306efa18b1a70af5007aaccd3b228e4f97f5596bf20c3a2d7b6321dfe8e30765",config:{pools_id:"0xae24565ffac1eb9f2fcb03b1dc21c21d1ce2a992d13a1a58e51d28293249d21c",global_config_id:"0xb8bd0870a43a75c55690a8ffbc13682ae7e0a8254348524963657474342c20b4",global_vault_id:"0x639c2d2d068df99602a9ef014b000df26b0312c07cb06065992cac911e1c376d"}},launchpad:{ido_display:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",ido_router:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",lock_display:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",lock_router:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",config:{pools_id:"0x1b3a62d143ac08dee37670eea58e714ab7cd501a396060bd2caf7a77fee88dfa",admin_cap_id:"0x0cb7daf2484c38e4a183813b8ad51b6ed664d135b7897e72be095768c90df911",config_cap_id:"0x40f0cee72c6e86d5a7b0e013a18cad8bf567bb70075b4a0f1c63eab8953a3dfd",lock_manager_id:"0x23954bf7d5c7880b50a369ee439a11ab771b7e0079a042645c4920d5e618b898"}},xwhale:{xwhale_display:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",xwhale_router:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",dividends_display:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",dividends_router:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",booster_display:"",booster_router:"",whale_faucet:"0xb0845bcf2f985e6ea5b401218598212e11f915a0c4d7afd1ed6e04b83e7d6310",config:{xwhale_manager_id:"0x46b2a60ee784180534ea2a6568ca510b488ea190f822cab8a9d38fb01b8e6421",lock_manager_id:"0x253e34da0542134e39b3c5dade1f5437d1b6ef6e90adfaa014186b456b6d7ffd",dividend_manager_id:"0xced885ada26d894f30efc236303caa500c994a25db5b18ee01e7664729cb983c"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},dev:{Aptos:{liquidswapDeployer:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37",faucetObjectId:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29",fetcher:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",clmmIntegrate:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",TokenDeployer:"0xc50b243a7180dfad9afd7dff8451c7b16cf27a92b6816f521b1f3c6d0c5397e3",IntegerMate:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.devnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"devnet",networkTip:"Devnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{liquidswapDeployer:"0x2b8f54bf724fa62789299569210d6c94758dd636",globalPauseStatusObjectId:"0x877cd08c02a2faa110a020f4f203304b114d76d2",faucetObjectId:"0x61df0e8caaf7b241d137fdc97906e3ca6bd68cca",rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",ammSite:"https://cetus-pre.netlify.app",api:"https://api.devcetus.zone",currentChainTokenAddress:"0x2::sui::SUI",hasCreatePool:!0,hasNotifi:!1}}},Sw={...yh[md]},Hi=e=>J.isDecimal(e)?e:new J(e===void 0?0:e),vh=(e,t,i=!0)=>{if(`${e}`=="0")return!parseFloat(t)||!i?0:"0.".padEnd(t+2,"0");if(!e)return"--";const n=parseFloat(e),r=e.toString(),o=n<0;let s=r;if(r.toLowerCase().includes("e")){const a=r.match(/(\d+?)(?:\.(\d*))?e([+-])(\d+)/),c=a[1],l=a[2],u=a[3],m=a[4];let g="",k=l?l.substr(m):"";if(k&&(k=`.${k}`),u!=="-"){for(let x=0;x<m;x+=1){const T=l[x]||"0";g+=T}s=c+g+k}else{let x="0";for(let T=0;T<m;T+=1)g=(c[c.length-T-1]||"0")+g;c.length>m&&(x=c.substr(0,c.length-m)),s=`${x}.${g}${l}`}}if(t&&i){let a=`${s.split(".")[0]}.`;const c=s.split(".")[1]||"";for(let l=0;l<t;l+=1)a+=c[l]||"0";s=a}if(s.length>14){const a=s.split(".");a[0].length>14?s=`${a[0].slice(0,14)}+`:(s=s.slice(0,13),s.indexOf(".")===12&&(s=s.slice(0,12)))}return`${o?"-":""}${s}`};function Tw(e,t){if(t=t>-1?t:0,`${e}`=="0")return parseFloat(t)?"0.".padEnd(t+2,"0"):"0";if(!e)return"--";let i=!1;parseFloat(e)<0&&(i=!0);const n=`${Math.abs(parseFloat(e))}`;if(n==="NaN")return"--";let r=n;if(n.toLowerCase().includes("e")){if(n.toLowerCase().includes("+"))return vh(n,t);const s=n.toLowerCase().split("e");let a=s[0];const c=Math.abs(parseFloat(s[1]));let l="",u=a.length,m;for(s[0].split(".")[1]&&(a=s[0].split(".")[0]+s[0].split(".")[1],u=s[0].split(".")[0].length),m=0;m<c-u;m+=1)l+="0";r=`0.${l}${a}`}if(`${t}`!="0"&&!t||`${parseFloat(e)}`=="NaN")return(i?"-":"")+r;const o=r.split(".");if(t===0)r=parseInt(r,10);else if(t>0&&o[1])if(o[1].length>t)if(o[1].includes("999999999")){const s=parseFloat(r).toFixed(t+1);r=s.slice(0,s.length-1)}else r=`${o[0]}.${o[1].slice(0,t)}`;else r=parseFloat(r).toFixed(t);else r=parseFloat(r).toFixed(t);if(r.length>=14&&r.includes(".")){const s=r.split(".");s[0].length>14?r=`${s[0].slice(0,14)}+`:(r=r.slice(0,13),r.indexOf(".")===12&&(r=r.slice(0,12)))}return(i?"-":"")+r}function kh(e,t){const i=String(e);if(!i.includes("."))return i;const n=i.split("."),r=n[0],o=n[1].slice(0,t);return sr(o)?`${r}.${sr(o)}`:`${r}`}function sr(e){return e.replace(/(\s|0|\.)+$/g,"")}function gd(e,t){if(typeof e=="number"&&isNaN(e)||!Number(e))return 0;if(!String(e).includes("."))return e;const i=String(e).split(".");if(i[1]&&i[1].length<=t&&Number(i[1]))return e;const n=Math.pow(10,-t);if(Number(e)<n)return i[1]&&sr(i[1])?i[0]+"."+sr(i[1]):i[0];const r=kh(e,t),o=String(r).split(".");return r==="--"?"--":o[1]&&sr(String(o[1]))?o[0]+"."+sr(String(o[1])):o[0]}const ms=(e,t=0)=>isNaN(e)||!e?e:(e=String(e),Number(e)==0?0:!isNaN(t)&&t?(t===0&&(e=e.split(".")[0]),e.replace(/(\d+)(\.\d+)?/,(i,n,r)=>n.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+(r?r.slice(0,t+1):""))):e.replace(/^\d+/,i=>i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")));function Ch(e,t){const n=String(e).split(".");let r=!0;if(!n[1]||n[1]&&n[1].length<=t||n[0]!=="0")return!1;if(n&&n[1]&&n[0]==="0"&&n[1][n[1].length-1]==="1")for(let o=0;o<n[1].length-1;o++)n[1]!=="0"&&(r=!1);else r=!1;return r}function Ah(e){const t=String(e);if(!t.includes("."))return e;const i=t.split("."),n=i[0],r=sr(i[1]);return r&&`${n}.${r}`}const gs=(e,t,i=2)=>{if(e=="∞"||typeof e=="string"&&e.indexOf("+")>-1)return e;if(isNaN(e)||Number(e)==0)return"0";const n=gd(e,t),r=Math.pow(10,-t);return Number(n)&&Math.abs(Number(n))<=r||Ch(n,t)?gs(e,t+i):Ah(n)};function Mw(e){if(e){const t=e.toString(),i=t.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return t.replace(i,"$1,")}}function Ow(e){return!e||Object.keys(e).length===0}function Zt(e){return e.toString().length===1?"0"+e:e}function nl(e){const t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return t+"-"+Zt(i)+"-"+Zt(n)}function xh(e){const t=e.getMonth()+1,i=e.getDate();return Zt(t)+"/"+Zt(i)}function rl(e){const t=e.getHours(),i=e.getMinutes(),n=e.getSeconds();return Zt(t)+":"+Zt(i)+":"+Zt(n)}function Sh(e){const t=e.getHours(),i=e.getMinutes();return Zt(t)+":"+Zt(i)}const Iw=(e,t)=>{if(e){const i=new Date(Number(e));if(!t)return nl(i)+" "+rl(i);switch(t){case"HMS":return rl(i);case"YMD":return nl(i);case"MD":return xh(i);case"HM":return Sh(i)}}},Pw=(e,t)=>isNaN(e)||!e?e:Number(e)<1e-6&&Number(e)!==0?"<0.000001":ms(gd(String(e),t),t);function jw(e){const t=e.replace("%","");return Number(t)}function Ew(e,t=1){return!e||isNaN(Number(e))?e:Math.abs(String(e))<1e3?gs(e,t):gs(Number(e)/1e3,t)+"k"}const Bw=async e=>new Promise(t=>{setTimeout(()=>{t(1)},e)}),Nw=e=>e>=1e9?(e/1e9).toFixed(1)+"b":e>=1e6?(e/1e6).toFixed(1)+"m":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();function Dw(e){const t=Number(gs(e,2));return t>=1e9?(t/1e9).toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"b":t>=1e6?(t/1e6).toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"m":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const Rw=(e,t)=>e>=1e9?(e/1e9).toFixed(t)+"b":e>=1e6?(e/1e6).toFixed(t)+"m":e>=1e3?(e/1e3).toFixed(t)+"k":e.toString(),$w=e=>{const t=Math.floor(e/1e3),i=Math.floor(new Date().getTime()/1e3),n=60,r=60*n,o=24*r,s=30*o,a=365*o,c=i-t;if(c<n)return"recently";if(c<r){const l=Math.floor(c/n);return l==1?`${l} minute ago`:`${l} minutes ago`}else if(c<o){const l=Math.floor(c/r);return l==1?`${l} hour ago`:`${l} hours ago`}else if(c<s){const l=Math.floor(c/o);return l==1?`${l} day ago`:`${l} days ago`}else if(c<a){const l=Math.floor(c/s);return l==1?`${l} mouth ago`:`${l} mouths ago`}else{const l=Math.floor(c/a);return l==1?`${l} year ago`:`${l} years ago`}},qw=(e,t)=>{if(e){const i=new Date(e);if(!t)return aa(i)+" "+ol(i);switch(t){case"HMS":return ol(i);case"YMD":return aa(i);case"MD":return Th(i);case"HM":return sl(i);case"YMDHM":return aa(i)+" "+sl(i);default:return"--"}}};function aa(e){const t=e.getUTCFullYear(),i=e.getUTCMonth()+1,n=e.getUTCDate();return t+"-"+Zt(i)+"-"+Zt(n)}function Th(e){const t=e.getUTCMonth()+1,i=e.getUTCDate();return Zt(t)+"/"+Zt(i)}function ol(e){const t=e.getUTCHours(),i=e.getUTCMinutes(),n=e.getUTCSeconds();return Zt(t)+":"+Zt(i)+":"+Zt(n)}function sl(e){const t=e.getUTCHours(),i=e.getUTCMinutes();return Zt(t)+":"+Zt(i)}const wn=(e,t)=>{try{return Hi(e).toDP(t,J.ROUND_DOWN).toString()}catch{return e}},Fw=(e,t)=>Hi(e).toDP(t,J.ROUND_HALF_DOWN).toString(),Lw=(e,t,i,n,r=!0)=>{if(e===void 0||e==="--")return"--";const o=wn(e,t);return!i&&Number(e)>0&&Number(o)<.01?`<${r?"$":""}0.01`:n?`${r?"$":""}${o}`:`${r?"$":""}${ms(o)}`};function Uw(e){var r;const t=Kf();console.log("🚀🚀🚀 ~ file: index.ts:587 ~ getUrlParam ~ route:",t);const i=(r=t==null?void 0:t.params)==null?void 0:r.id,n=i==null?void 0:i.split("-");return n&&n.length>0?decodeURI(e=="from"?n[0]?n[0]:"":n[1]?n[1]:""):null}function Kw(e){return e=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":e}function Vw(e){return e=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e}function Mh(e){let t=0;for(;t<e.length;){if(Hi(e[t]).gt(0))return t+1;t++}return 0}const zw=(e,t,i=!0)=>{if(e==="∞")return"∞";if(e!=="0"&&!e||Hi(e).equals(0))return"0";if(t!==void 0){const c=wn(e,t);if(!Hi(c).equals(0))return i?c:ms(c)}const n=Hi(e).toString(),r=n.split("."),o=r[0],s=r[1];let a;if(Hi(o).gt(0))!s||Hi(o.length).gte(9)?a=wn(n,0):Hi(o.length).gte(4)?a=wn(n,2):a=wn(n,4);else{wn(n,6);const c=Mh(s);if(c<6)a=wn(n,c+6);else{if(c>20)return"0";a=wn(n,9+(c-6))}}return i||Hi(o).lt(1)?a:ms(a)},Ww=e=>e?e.substring(0,6)+"..."+e.substring(e.length-4):"";function Gw(e){const s=Math.floor(e/2592e3);e%=2592e3;const a=Math.floor(e/604800);e%=604800;const c=Math.floor(e/86400);e%=86400;const l=Math.floor(e/3600);e%=3600;const u=Math.floor(e/60);e%=60;const m=[];return s>0&&m.push(`${s} Month${s>1?"s":""}`),a>0&&m.push(`${a} Week${a>1?"s":""}`),c>0&&m.push(`${c} Day${c>1?"s":""}`),l>0&&m.push(`${l} Hour${l>1?"s":""}`),u>0&&m.push(`${u} Minute${u>1?"s":""}`),m.join(" ")}const bd="…";function Oh(e){if(e.length<=6)return e;const t=e.startsWith("0x")?2:0;return`0x${e.slice(t,t+4)}${bd}${e.slice(-4)}`}function Ih(e){return`${e.slice(0,10)}${bd}`}function Ph(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let l=0;l<t.length;l++)t[l]=255;for(let l=0;l<e.length;l++){const u=e.charAt(l),m=u.charCodeAt(0);if(t[m]!==255)throw new TypeError(u+" is ambiguous");t[m]=l}const i=e.length,n=e.charAt(0),r=Math.log(i)/Math.log(256),o=Math.log(256)/Math.log(i);function s(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,m=0,g=0;const k=l.length;for(;g!==k&&l[g]===0;)g++,u++;const x=(k-g)*o+1>>>0,T=new Uint8Array(x);for(;g!==k;){let B=l[g],N=0;for(let F=x-1;(B!==0||N<m)&&F!==-1;F--,N++)B+=256*T[F]>>>0,T[F]=B%i>>>0,B=B/i>>>0;if(B!==0)throw new Error("Non-zero carry");m=N,g++}let I=x-m;for(;I!==x&&T[I]===0;)I++;let E=n.repeat(u);for(;I<x;++I)E+=e.charAt(T[I]);return E}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,m=0,g=0;for(;l[u]===n;)m++,u++;const k=(l.length-u)*r+1>>>0,x=new Uint8Array(k);for(;l[u];){let B=t[l.charCodeAt(u)];if(B===255)return;let N=0;for(let F=k-1;(B!==0||N<g)&&F!==-1;F--,N++)B+=i*x[F]>>>0,x[F]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");g=N,u++}let T=k-g;for(;T!==k&&x[T]===0;)T++;const I=new Uint8Array(m+(k-T));let E=m;for(;T!==k;)I[E++]=x[T++];return I}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+i+" character")}return{encode:s,decodeUnsafe:a,decode:c}}var jh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const wd=Ph(jh),qs=e=>wd.encode(e),Ao=e=>wd.decode(e);function qi(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const ca=8192;function Ht(e){if(e.length<ca)return btoa(String.fromCharCode(...e));let t="";for(var i=0;i<e.length;i+=ca){const n=e.slice(i,i+ca);t+=String.fromCharCode(...n)}return btoa(t)}function mc(e){var r;const t=e.startsWith("0x")?e.slice(2):e,n=((r=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:r.map(o=>parseInt(o,16)))??[];return Uint8Array.from(n)}function Fr(e){return e.reduce((t,i)=>t+i.toString(16).padStart(2,"0"),"")}function gc(e){let t=[],i=0;if(e===0)return[0];for(;e>0;)t[i]=e&127,(e>>=7)&&(t[i]|=128),i+=1;return t}function Eh(e){let t=0,i=0,n=0;for(;;){let r=e[n];if(n+=1,t|=(r&127)<<i,!(r&128))break;i+=7}return{value:t,length:n}}class Bh{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),n=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let t=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let t=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(t){let i=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,i,t);return this.shift(t),n}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,t),{value:n,length:r}=Eh(i);return this.shift(r),n}readVec(t){let i=this.readULEB(),n=[];for(let r=0;r<i;r++)n.push(t(this,r,i));return n}}function Nh(e,t){switch(t){case"base58":return qs(e);case"base64":return Ht(e);case"hex":return Fr(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function yd(e,t=["<",">"]){const[i,n]=t,r=[];let o="",s=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===i&&s++,c===n&&s--,s===0&&c===","){r.push(o.trim()),o="";continue}o+=c}return r.push(o.trim()),r}class Dh{constructor({initialSize:t=1024,maxSize:i=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=i,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const i=this.bytePosition+t;if(i>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(i>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${i}`);this.size=n;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return la(BigInt(t),8).forEach(i=>this.write8(i)),this}write128(t){return la(BigInt(t),16).forEach(i=>this.write8(i)),this}write256(t){return la(BigInt(t),32).forEach(i=>this.write8(i)),this}writeULEB(t){return gc(t).forEach(i=>this.write8(i)),this}writeVec(t,i){return this.writeULEB(t.length),Array.from(t).forEach((n,r)=>i(this,n,r,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return Nh(this.toBytes(),t)}}function la(e,t){let i=new Uint8Array(t),n=0;for(;e>0;)i[n]=Number(e%BigInt(256)),e=e/BigInt(256),n+=1;return i}var vd=e=>{throw TypeError(e)},kd=(e,t,i)=>t.has(e)||vd("Cannot "+i),Ei=(e,t,i)=>(kd(e,t,"read from private field"),i?i.call(e):t.get(e)),bs=(e,t,i)=>t.has(e)?vd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ws=(e,t,i,n)=>(kd(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Cr,lo,is,yn;const Rh=class Cd{constructor(t){bs(this,Cr),bs(this,lo),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),ws(this,Cr,t.write),ws(this,lo,t.serialize??((i,n)=>{const r=new Dh({initialSize:this.serializedSize(i)??void 0,...n});return Ei(this,Cr).call(this,i,r),r.toBytes()})),this.validate=t.validate??(()=>{})}write(t,i){this.validate(t),Ei(this,Cr).call(this,t,i)}serialize(t,i){return this.validate(t),new $h(this,Ei(this,lo).call(this,t,i))}parse(t){const i=new Bh(t);return this.read(i)}fromHex(t){return this.parse(mc(t))}fromBase58(t){return this.parse(Ao(t))}fromBase64(t){return this.parse(qi(t))}transform({name:t,input:i,output:n,validate:r}){return new Cd({name:t??this.name,read:o=>n(this.read(o)),write:(o,s)=>Ei(this,Cr).call(this,i(o),s),serializedSize:o=>this.serializedSize(i(o)),serialize:(o,s)=>Ei(this,lo).call(this,i(o),s),validate:o=>{r==null||r(o),this.validate(i(o))}})}};Cr=new WeakMap;lo=new WeakMap;let dn=Rh;const Ad=Symbol.for("@mysten/serialized-bcs");function bc(e){return!!e&&typeof e=="object"&&e[Ad]===!0}class $h{constructor(t,i){bs(this,is),bs(this,yn),ws(this,is,t),ws(this,yn,i)}get[Ad](){return!0}toBytes(){return Ei(this,yn)}toHex(){return Fr(Ei(this,yn))}toBase64(){return Ht(Ei(this,yn))}toBase58(){return qs(Ei(this,yn))}parse(){return Ei(this,is).parse(Ei(this,yn))}}is=new WeakMap;yn=new WeakMap;function ys({size:e,...t}){return new dn({...t,serializedSize:()=>e})}function da({readMethod:e,writeMethod:t,...i}){return ys({...i,read:n=>n[e](),write:(n,r)=>r[t](n),validate:n=>{var r;if(n<0||n>i.maxValue)throw new TypeError(`Invalid ${i.name} value: ${n}. Expected value in range 0-${i.maxValue}`);(r=i.validate)==null||r.call(i,n)}})}function ua({readMethod:e,writeMethod:t,...i}){return ys({...i,read:n=>n[e](),write:(n,r)=>r[t](BigInt(n)),validate:n=>{var o;const r=BigInt(n);if(r<0||r>i.maxValue)throw new TypeError(`Invalid ${i.name} value: ${r}. Expected value in range 0-${i.maxValue}`);(o=i.validate)==null||o.call(i,r)}})}function qh({serialize:e,...t}){const i=new dn({...t,serialize:e,write:(n,r)=>{for(const o of i.serialize(n).toBytes())r.write8(o)}});return i}function Fh({toBytes:e,fromBytes:t,...i}){return new dn({...i,read:n=>{const r=n.readULEB(),o=n.readBytes(r);return t(o)},write:(n,r)=>{const o=e(n);r.writeULEB(o.length);for(let s=0;s<o.length;s++)r.write8(o[s])},serialize:n=>{const r=e(n),o=gc(r.length),s=new Uint8Array(o.length+r.length);return s.set(o,0),s.set(r,o.length),s},validate:n=>{var r;if(typeof n!="string")throw new TypeError(`Invalid ${i.name} value: ${n}. Expected string`);(r=i.validate)==null||r.call(i,n)}})}function Lh(e){let t=null;function i(){return t||(t=e()),t}return new dn({name:"lazy",read:n=>i().read(n),serializedSize:n=>i().serializedSize(n),write:(n,r)=>i().write(n,r),serialize:(n,r)=>i().serialize(n,r).toBytes()})}const P={u8(e){return da({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return da({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return da({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return ua({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return ua({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return ua({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return ys({name:"bool",size:1,read:t=>t.read8()===1,write:(t,i)=>i.write8(t?1:0),...e,validate:t=>{var i;if((i=e==null?void 0:e.validate)==null||i.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return qh({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(gc(t)),...e})},bytes(e,t){return ys({name:`bytes[${e}]`,size:e,read:i=>i.readBytes(e),write:(i,n)=>{for(let r=0;r<e;r++)n.write8(i[r]??0)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e)throw new TypeError(`Expected array of length ${e}, found ${i.length}`)}})},string(e){return Fh({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,i){return new dn({name:`${t.name}[${e}]`,read:n=>{const r=new Array(e);for(let o=0;o<e;o++)r[o]=t.read(n);return r},write:(n,r)=>{for(const o of n)t.write(o,r)},...i,validate:n=>{var r;if((r=i==null?void 0:i.validate)==null||r.call(i,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},option(e){return P.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>t.$kind==="Some"?t.Some:null})},vector(e,t){return new dn({name:`vector<${e.name}>`,read:i=>{const n=i.readULEB(),r=new Array(n);for(let o=0;o<n;o++)r[o]=e.read(i);return r},write:(i,n)=>{n.writeULEB(i.length);for(const r of i)e.write(r,n)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`)}})},tuple(e,t){return new dn({name:`(${e.map(i=>i.name).join(", ")})`,serializedSize:i=>{let n=0;for(let r=0;r<e.length;r++){const o=e[r].serializedSize(i[r]);if(o==null)return null;n+=o}return n},read:i=>{const n=[];for(const r of e)n.push(r.read(i));return n},write:(i,n)=>{for(let r=0;r<e.length;r++)e[r].write(i[r],n)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!Array.isArray(i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${i.length}`)}})},struct(e,t,i){const n=Object.entries(t);return new dn({name:e,serializedSize:r=>{let o=0;for(const[s,a]of n){const c=a.serializedSize(r[s]);if(c==null)return null;o+=c}return o},read:r=>{const o={};for(const[s,a]of n)o[s]=a.read(r);return o},write:(r,o)=>{for(const[s,a]of n)a.write(r[s],o)},...i,validate:r=>{var o;if((o=i==null?void 0:i.validate)==null||o.call(i,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`)}})},enum(e,t,i){const n=Object.entries(t);return new dn({name:e,read:r=>{const o=r.readULEB(),s=n[o];if(!s)throw new TypeError(`Unknown value ${o} for enum ${e}`);const[a,c]=s;return{[a]:(c==null?void 0:c.read(r))??!0,$kind:a}},write:(r,o)=>{const[s,a]=Object.entries(r).filter(([c])=>Object.hasOwn(t,c))[0];for(let c=0;c<n.length;c++){const[l,u]=n[c];if(l===s){o.writeULEB(c),u==null||u.write(a,o);return}}},...i,validate:r=>{var a;if((a=i==null?void 0:i.validate)==null||a.call(i,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`);const o=Object.keys(r).filter(c=>r[c]!==void 0&&Object.hasOwn(t,c));if(o.length!==1)throw new TypeError(`Expected object with one key, but found ${o.length} for type ${e}}`);const[s]=o;if(!Object.hasOwn(t,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map(e,t){return P.vector(P.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:i=>[...i.entries()],output:i=>{const n=new Map;for(const[r,o]of i)n.set(r,o);return n}})},lazy(e){return Lh(e)}},Uh=32;function Ra(e){try{return Ao(e).length===Uh}catch{return!1}}const Fs=32;function Bi(e){return Vh(e)&&zh(e)===Fs}function Tr(e){return Bi(e)}function Kh(e){return e.includes("::")?wc(e):e}function wc(e){const[t,i]=e.split("::"),n=e.slice(t.length+i.length+4),r=n.includes("<")?n.slice(0,n.indexOf("<")):n,o=n.includes("<")?yd(n.slice(n.indexOf("<")+1,n.lastIndexOf(">"))).map(s=>Kh(s.trim())):[];return{address:pe(t),module:i,name:r,typeParams:o}}function Ls(e){const{address:t,module:i,name:n,typeParams:r}=typeof e=="string"?wc(e):e,o=(r==null?void 0:r.length)>0?`<${r.map(s=>typeof s=="string"?s:Ls(s)).join(",")}>`:"";return`${t}::${i}::${n}${o}`}function pe(e,t=!1){let i=e.toLowerCase();return!t&&i.startsWith("0x")&&(i=i.slice(2)),`0x${i.padStart(Fs*2,"0")}`}function ze(e,t=!1){return pe(e,t)}function Vh(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function zh(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const xd=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Sd=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,Wh=235;function Gh(e){return e.length>Wh?!1:e.includes("@")?xd.test(e):Sd.test(e)}function Td(e,t="at"){const i=e.toLowerCase();let n;if(i.includes("@")){if(!xd.test(i))throw new Error(`Invalid SuiNS name ${e}`);const[r,o]=i.split("@");n=[...r?r.split("."):[],o]}else{if(!Sd.test(i))throw new Error(`Invalid SuiNS name ${e}`);n=i.split(".").slice(0,-1)}return t==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}const Hh=9,Xh=BigInt(1e9),Md="0x1",yc="0x2",Jh="0x3",Zh=ze("0x6"),Qh="sui_system",Od=`${yc}::sui::SUI`,Yh=ze("0x5"),e0=Object.freeze(Object.defineProperty({__proto__:null,MIST_PER_SUI:Xh,MOVE_STDLIB_ADDRESS:Md,SUI_ADDRESS_LENGTH:Fs,SUI_CLOCK_OBJECT_ID:Zh,SUI_DECIMALS:Hh,SUI_FRAMEWORK_ADDRESS:yc,SUI_SYSTEM_ADDRESS:Jh,SUI_SYSTEM_MODULE_NAME:Qh,SUI_SYSTEM_STATE_OBJECT_ID:Yh,SUI_TYPE_ARG:Od,formatAddress:Oh,formatDigest:Ih,fromB64:qi,fromHEX:mc,isValidSuiAddress:Bi,isValidSuiNSName:Gh,isValidSuiObjectId:Tr,isValidTransactionDigest:Ra,normalizeStructTag:Ls,normalizeSuiAddress:pe,normalizeSuiNSName:Td,normalizeSuiObjectId:ze,parseStructTag:wc,toB64:Ht,toHEX:Fr},Symbol.toStringTag,{value:"Module"})),t0=/^vector<(.+)>$/,i0=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Zi{static parseFromStr(t,i=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const n=t.match(t0);if(n)return{vector:Zi.parseFromStr(n[1],i)};const r=t.match(i0);if(r)return{struct:{address:i?pe(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:Zi.parseStructTypeArgs(r[5],i)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,i=!1){return yd(t).map(n=>Zi.parseFromStr(n,i))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${Zi.tagToString(t.vector)}>`;if("struct"in t){const i=t.struct,n=i.typeParams.map(Zi.tagToString).join(", ");return`${i.address}::${i.module}::${i.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}function n0(e){return P.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function r0(e){return P.enum("Option",{None:null,Some:e})}const Lt=P.bytes(Fs).transform({validate:e=>{const t=typeof e=="string"?e:Fr(e);if(!t||!Bi(pe(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?mc(pe(e)):e,output:e=>pe(Fr(e))}),Ri=P.vector(P.u8()).transform({name:"ObjectDigest",input:e=>Ao(e),output:e=>qs(new Uint8Array(e)),validate:e=>{if(Ao(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ai=P.struct("SuiObjectRef",{objectId:Lt,version:P.u64(),digest:Ri}),Id=P.struct("SharedObjectRef",{objectId:Lt,initialSharedVersion:P.u64(),mutable:P.bool()}),Pd=P.enum("ObjectArg",{ImmOrOwnedObject:Ai,SharedObject:Id,Receiving:Ai}),jd=P.enum("CallArg",{Pure:P.struct("Pure",{bytes:P.vector(P.u8()).transform({input:e=>typeof e=="string"?qi(e):e,output:e=>Ht(new Uint8Array(e))})}),Object:Pd}),vc=P.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:P.lazy(()=>vc),struct:P.lazy(()=>$d),u16:null,u32:null,u256:null}),kc=vc.transform({input:e=>typeof e=="string"?Zi.parseFromStr(e,!0):e,output:e=>Zi.tagToString(e)}),Gi=P.enum("Argument",{GasCoin:null,Input:P.u16(),Result:P.u16(),NestedResult:P.tuple([P.u16(),P.u16()])}),Ed=P.struct("ProgrammableMoveCall",{package:Lt,module:P.string(),function:P.string(),typeArguments:P.vector(kc),arguments:P.vector(Gi)}),Bd=P.enum("Command",{MoveCall:Ed,TransferObjects:P.struct("TransferObjects",{objects:P.vector(Gi),address:Gi}),SplitCoins:P.struct("SplitCoins",{coin:Gi,amounts:P.vector(Gi)}),MergeCoins:P.struct("MergeCoins",{destination:Gi,sources:P.vector(Gi)}),Publish:P.struct("Publish",{modules:P.vector(P.vector(P.u8()).transform({input:e=>typeof e=="string"?qi(e):e,output:e=>Ht(new Uint8Array(e))})),dependencies:P.vector(Lt)}),MakeMoveVec:P.struct("MakeMoveVec",{type:r0(kc).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:P.vector(Gi)}),Upgrade:P.struct("Upgrade",{modules:P.vector(P.vector(P.u8()).transform({input:e=>typeof e=="string"?qi(e):e,output:e=>Ht(new Uint8Array(e))})),dependencies:P.vector(Lt),package:Lt,ticket:Gi})}),Nd=P.struct("ProgrammableTransaction",{inputs:P.vector(jd),commands:P.vector(Bd)}),Dd=P.enum("TransactionKind",{ProgrammableTransaction:Nd,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Rd=P.enum("TransactionExpiration",{None:null,Epoch:n0()}),$d=P.struct("StructTag",{address:Lt,module:P.string(),name:P.string(),typeParams:P.vector(vc)}),qd=P.struct("GasData",{payment:P.vector(Ai),owner:Lt,price:P.u64(),budget:P.u64()}),Fd=P.struct("TransactionDataV1",{kind:Dd,sender:Lt,gasData:qd,expiration:Rd}),Ld=P.enum("TransactionData",{V1:Fd}),Ud=P.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Kd=P.enum("IntentVersion",{V0:null}),Vd=P.enum("AppId",{Sui:null}),zd=P.struct("Intent",{scope:Ud,version:Kd,appId:Vd});function Wd(e){return P.struct(`IntentMessage<${e.name}>`,{intent:zd,value:e})}const Gd=P.enum("CompressedSignature",{ED25519:P.fixedArray(64,P.u8()),Secp256k1:P.fixedArray(64,P.u8()),Secp256r1:P.fixedArray(64,P.u8()),ZkLogin:P.vector(P.u8())}),Hd=P.enum("PublicKey",{ED25519:P.fixedArray(32,P.u8()),Secp256k1:P.fixedArray(33,P.u8()),Secp256r1:P.fixedArray(33,P.u8()),ZkLogin:P.vector(P.u8())}),Xd=P.struct("MultiSigPkMap",{pubKey:Hd,weight:P.u8()}),Jd=P.struct("MultiSigPublicKey",{pk_map:P.vector(Xd),threshold:P.u16()}),o0=P.struct("MultiSig",{sigs:P.vector(Gd),bitmap:P.u16(),multisig_pk:Jd}),s0=P.vector(P.u8()).transform({input:e=>typeof e=="string"?qi(e):e,output:e=>Ht(new Uint8Array(e))}),Zd=P.struct("SenderSignedTransaction",{intentMessage:Wd(Ld),txSignatures:P.vector(s0)}),a0=P.vector(Zd,{name:"SenderSignedData"}),c0=P.enum("PackageUpgradeError",{UnableToFetchPackage:P.struct("UnableToFetchPackage",{packageId:Lt}),NotAPackage:P.struct("NotAPackage",{objectId:Lt}),IncompatibleUpgrade:null,DigestDoesNotMatch:P.struct("DigestDoesNotMatch",{digest:P.vector(P.u8())}),UnknownUpgradePolicy:P.struct("UnknownUpgradePolicy",{policy:P.u8()}),PackageIDDoesNotMatch:P.struct("PackageIDDoesNotMatch",{packageId:Lt,ticketId:Lt})}),l0=P.struct("ModuleId",{address:Lt,name:P.string()}),al=P.struct("MoveLocation",{module:l0,function:P.u16(),instruction:P.u16(),functionName:P.option(P.string())}),d0=P.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:P.struct("IndexOutOfBounds",{idx:P.u16()}),SecondaryIndexOutOfBounds:P.struct("SecondaryIndexOutOfBounds",{resultIdx:P.u16(),secondaryIdx:P.u16()}),InvalidResultArity:P.struct("InvalidResultArity",{resultIdx:P.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),u0=P.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),f0=P.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:P.struct("MoveObjectTooBig",{objectSize:P.u64(),maxObjectSize:P.u64()}),MovePackageTooBig:P.struct("MovePackageTooBig",{objectSize:P.u64(),maxObjectSize:P.u64()}),CircularObjectOwnership:P.struct("CircularObjectOwnership",{object:Lt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:P.option(al),MoveAbort:P.tuple([al,P.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:P.struct("CommandArgumentError",{argIdx:P.u16(),kind:d0}),TypeArgumentError:P.struct("TypeArgumentError",{argumentIdx:P.u16(),kind:u0}),UnusedValueWithoutDrop:P.struct("UnusedValueWithoutDrop",{resultIdx:P.u16(),secondaryIdx:P.u16()}),InvalidPublicFunctionReturnType:P.struct("InvalidPublicFunctionReturnType",{idx:P.u16()}),InvalidTransferObject:null,EffectsTooLarge:P.struct("EffectsTooLarge",{currentSize:P.u64(),maxSize:P.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:P.struct("PackageUpgradeError",{upgradeError:c0}),WrittenObjectsTooLarge:P.struct("WrittenObjectsTooLarge",{currentSize:P.u64(),maxSize:P.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),Qd=P.enum("ExecutionStatus",{Success:null,Failed:P.struct("ExecutionFailed",{error:f0,command:P.option(P.u64())})}),Yd=P.struct("GasCostSummary",{computationCost:P.u64(),storageCost:P.u64(),storageRebate:P.u64(),nonRefundableStorageFee:P.u64()}),Mr=P.enum("Owner",{AddressOwner:Lt,ObjectOwner:Lt,Shared:P.struct("Shared",{initialSharedVersion:P.u64()}),Immutable:null}),h0=P.struct("TransactionEffectsV1",{status:Qd,executedEpoch:P.u64(),gasUsed:Yd,modifiedAtVersions:P.vector(P.tuple([Lt,P.u64()])),sharedObjects:P.vector(Ai),transactionDigest:Ri,created:P.vector(P.tuple([Ai,Mr])),mutated:P.vector(P.tuple([Ai,Mr])),unwrapped:P.vector(P.tuple([Ai,Mr])),deleted:P.vector(Ai),unwrappedThenDeleted:P.vector(Ai),wrapped:P.vector(Ai),gasObject:P.tuple([Ai,Mr]),eventsDigest:P.option(Ri),dependencies:P.vector(Ri)}),Cc=P.tuple([P.u64(),Ri]),p0=P.enum("ObjectIn",{NotExist:null,Exist:P.tuple([Cc,Mr])}),_0=P.enum("ObjectOut",{NotExist:null,ObjectWrite:P.tuple([Ri,Mr]),PackageWrite:Cc}),m0=P.enum("IDOperation",{None:null,Created:null,Deleted:null}),g0=P.struct("EffectsObjectChange",{inputState:p0,outputState:_0,idOperation:m0}),b0=P.enum("UnchangedSharedKind",{ReadOnlyRoot:Cc,MutateDeleted:P.u64(),ReadDeleted:P.u64(),Cancelled:P.u64(),PerEpochConfig:null}),w0=P.struct("TransactionEffectsV2",{status:Qd,executedEpoch:P.u64(),gasUsed:Yd,transactionDigest:Ri,gasObjectIndex:P.option(P.u32()),eventsDigest:P.option(Ri),dependencies:P.vector(Ri),lamportVersion:P.u64(),changedObjects:P.vector(P.tuple([Lt,g0])),unchangedSharedObjects:P.vector(P.tuple([Lt,b0])),auxDataDigest:P.option(Ri)}),y0=P.enum("TransactionEffects",{V1:h0,V2:w0}),de={...P,U8:P.u8(),U16:P.u16(),U32:P.u32(),U64:P.u64(),U128:P.u128(),U256:P.u256(),ULEB128:P.uleb128(),Bool:P.bool(),String:P.string(),Address:Lt,AppId:Vd,Argument:Gi,CallArg:jd,CompressedSignature:Gd,GasData:qd,Intent:zd,IntentMessage:Wd,IntentScope:Ud,IntentVersion:Kd,MultiSig:o0,MultiSigPkMap:Xd,MultiSigPublicKey:Jd,ObjectArg:Pd,ObjectDigest:Ri,ProgrammableMoveCall:Ed,ProgrammableTransaction:Nd,PublicKey:Hd,SenderSignedData:a0,SenderSignedTransaction:Zd,SharedObjectRef:Id,StructTag:$d,SuiObjectRef:Ai,Command:Bd,TransactionData:Ld,TransactionDataV1:Fd,TransactionExpiration:Rd,TransactionKind:Dd,TypeTag:kc,TransactionEffects:y0},v0="object",k0="ID",C0="ascii",A0="String",x0="string",S0="String",T0="option",M0="Option";function O0(e){const t=typeof e.body=="object"&&"datatype"in e.body?e.body.datatype:null;return!!t&&pe(t.package)===pe("0x2")&&t.module==="tx_context"&&t.type==="TxContext"}function vs(e){if(typeof e=="string")switch(e){case"address":return de.Address;case"bool":return de.Bool;case"u8":return de.U8;case"u16":return de.U16;case"u32":return de.U32;case"u64":return de.U64;case"u128":return de.U128;case"u256":return de.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if(e.vector==="u8")return de.vector(de.U8).transform({input:i=>typeof i=="string"?new TextEncoder().encode(i):i,output:i=>i});const t=vs(e.vector);return t?de.vector(t):null}if("datatype"in e){const t=pe(e.datatype.package);if(t===pe(Md)){if(e.datatype.module===C0&&e.datatype.type===A0||e.datatype.module===x0&&e.datatype.type===S0)return de.String;if(e.datatype.module===T0&&e.datatype.type===M0){const i=vs(e.datatype.typeParameters[0]);return i?de.vector(i):null}}if(t===pe(yc)&&e.datatype.module===v0&&e.datatype.type===k0)return de.Address}return null}function eu(e){return typeof e=="object"&&"Reference"in e?{ref:"&",body:ho(e.Reference)}:typeof e=="object"&&"MutableReference"in e?{ref:"&mut",body:ho(e.MutableReference)}:{ref:null,body:ho(e)}}function ho(e){if(typeof e=="string")switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:ho(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(ho)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}function I0(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?Ht(e):e.toBase64()}}}const Mi={Pure:I0,ObjectRef({objectId:e,digest:t,version:i}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:i,objectId:pe(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:i}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:i,objectId:pe(e)}}}},ReceivingRef({objectId:e,digest:t,version:i}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:i,objectId:pe(e)}}}}};var tn;function P0(e){return{lang:(e==null?void 0:e.lang)??(tn==null?void 0:tn.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(tn==null?void 0:tn.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(tn==null?void 0:tn.abortPipeEarly)}}var fa;function j0(e){return fa==null?void 0:fa.get(e)}var ha;function E0(e){return ha==null?void 0:ha.get(e)}var pa;function B0(e,t){var i;return(i=pa==null?void 0:pa.get(e))==null?void 0:i.get(t)}function tu(e){var i,n;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((n=(i=Object.getPrototypeOf(e))==null?void 0:i.constructor)==null?void 0:n.name))??"null":t}function vi(e,t,i,n,r){const o=r&&"input"in r?r.input:i.value,s=(r==null?void 0:r.expected)??e.expects??null,a=(r==null?void 0:r.received)??tu(o),c={kind:e.kind,type:e.type,input:o,expected:s,received:a,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:r==null?void 0:r.path,issues:r==null?void 0:r.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},l=e.kind==="schema",u=(r==null?void 0:r.message)??e.message??B0(e.reference,c.lang)??(l?E0(c.lang):null)??n.message??j0(c.lang);u&&(c.message=typeof u=="function"?u(c):u),l&&(i.typed=!1),i.issues?i.issues.push(c):i.issues=[c]}function N0(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var D0=class extends Error{constructor(t){super(t[0].message);X(this,"issues");this.name="ValiError",this.issues=t}};function Bo(e,t){return{kind:"validation",type:"check",reference:Bo,async:!1,expects:null,requirement:e,message:t,_run(i,n){return i.typed&&!this.requirement(i.value)&&vi(this,"input",i,n),i}}}function Ft(e){return{kind:"validation",type:"integer",reference:Ft,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(t,i){return t.typed&&!this.requirement(t.value)&&vi(this,"integer",t,i),t}}}function Us(e){return{kind:"transformation",type:"transform",reference:Us,async:!1,operation:e,_run(t){return t.value=this.operation(t.value),t}}}function Ac(e,t,i){return typeof e.default=="function"?e.default(t,i):e.default}function $a(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function he(e,t){return{kind:"schema",type:"array",reference:he,expects:"Array",async:!1,item:e,message:t,_run(i,n){var o;const r=i.value;if(Array.isArray(r)){i.typed=!0,i.value=[];for(let s=0;s<r.length;s++){const a=r[s],c=this.item._run({typed:!1,value:a},n);if(c.issues){const l={type:"array",origin:"value",input:r,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(o=i.issues)==null||o.push(u);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),i.value.push(c.value)}}else vi(this,"type",i,n);return i}}}function Ks(e){return{kind:"schema",type:"bigint",reference:Ks,expects:"bigint",async:!1,message:e,_run(t,i){return typeof t.value=="bigint"?t.typed=!0:vi(this,"type",t,i),t}}}function Vs(e){return{kind:"schema",type:"boolean",reference:Vs,expects:"boolean",async:!1,message:e,_run(t,i){return typeof t.value=="boolean"?t.typed=!0:vi(this,"type",t,i),t}}}function xo(e){return{kind:"schema",type:"lazy",reference:xo,expects:"unknown",async:!1,getter:e,_run(t,i){return this.getter(t.value)._run(t,i)}}}function ge(e,t){return{kind:"schema",type:"literal",reference:ge,expects:tu(e),async:!1,literal:e,message:t,_run(i,n){return i.value===this.literal?i.typed=!0:vi(this,"type",i,n),i}}}function Ge(e,...t){const i={kind:"schema",type:"nullable",reference:Ge,expects:`${e.expects} | null`,async:!1,wrapped:e,_run(n,r){return n.value===null&&("default"in this&&(n.value=Ac(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function Lr(e,...t){const i={kind:"schema",type:"nullish",reference:Lr,expects:`${e.expects} | null | undefined`,async:!1,wrapped:e,_run(n,r){return(n.value===null||n.value===void 0)&&("default"in this&&(n.value=Ac(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function Rt(e){return{kind:"schema",type:"number",reference:Rt,expects:"number",async:!1,message:e,_run(t,i){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:vi(this,"type",t,i),t}}}function G(e,t){return{kind:"schema",type:"object",reference:G,expects:"Object",async:!1,entries:e,message:t,_run(i,n){var o;const r=i.value;if(r&&typeof r=="object"){i.typed=!0,i.value={};for(const s in this.entries){const a=r[s],c=this.entries[s]._run({typed:!1,value:a},n);if(c.issues){const l={type:"object",origin:"value",input:r,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(o=i.issues)==null||o.push(u);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),(c.value!==void 0||s in r)&&(i.value[s]=c.value)}}else vi(this,"type",i,n);return i}}}function si(e,...t){const i={kind:"schema",type:"optional",reference:si,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(n,r){return n.value===void 0&&("default"in this&&(n.value=Ac(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function So(e,t,i){return{kind:"schema",type:"record",reference:So,expects:"Object",async:!1,key:e,value:t,message:i,_run(n,r){var s,a;const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const c in o)if(N0(o,c)){const l=o[c],u=this.key._run({typed:!1,value:c},r);if(u.issues){const g={type:"object",origin:"key",input:o,key:c,value:l};for(const k of u.issues)k.path=[g],(s=n.issues)==null||s.push(k);if(n.issues||(n.issues=u.issues),r.abortEarly){n.typed=!1;break}}const m=this.value._run({typed:!1,value:l},r);if(m.issues){const g={type:"object",origin:"value",input:o,key:c,value:l};for(const k of m.issues)k.path?k.path.unshift(g):k.path=[g],(a=n.issues)==null||a.push(k);if(n.issues||(n.issues=m.issues),r.abortEarly){n.typed=!1;break}}(!u.typed||!m.typed)&&(n.typed=!1),u.typed&&(n.value[u.value]=m.value)}}else vi(this,"type",n,r);return n}}}function Le(e){return{kind:"schema",type:"string",reference:Le,expects:"string",async:!1,message:e,_run(t,i){return typeof t.value=="string"?t.typed=!0:vi(this,"type",t,i),t}}}function xc(e,t){return{kind:"schema",type:"tuple",reference:xc,expects:"Array",async:!1,items:e,message:t,_run(i,n){var o;const r=i.value;if(Array.isArray(r)){i.typed=!0,i.value=[];for(let s=0;s<this.items.length;s++){const a=r[s],c=this.items[s]._run({typed:!1,value:a},n);if(c.issues){const l={type:"array",origin:"value",input:r,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(o=i.issues)==null||o.push(u);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),i.value.push(c.value)}}else vi(this,"type",i,n);return i}}}function cl(e){let t;if(e)for(const i of e)t?t.push(...i.issues):t=i.issues;return t}function ri(e,t){return{kind:"schema",type:"union",reference:ri,expects:[...new Set(e.map(i=>i.expects))].join(" | ")||"never",async:!1,options:e,message:t,_run(i,n){let r,o,s;for(const a of this.options){const c=a._run({typed:!1,value:i.value},n);if(c.typed)if(c.issues)o?o.push(c):o=[c];else{r=c;break}else s?s.push(c):s=[c]}if(r)return r;if(o){if(o.length===1)return o[0];vi(this,"type",i,n,{issues:cl(o)}),i.typed=!0}else{if((s==null?void 0:s.length)===1)return s[0];vi(this,"type",i,n,{issues:cl(s)})}return i}}}function fr(){return{kind:"schema",type:"unknown",reference:fr,expects:"unknown",async:!1,_run(e){return e.typed=!0,e}}}function Nt(e,t,i){const n=e._run({typed:!1,value:t},P0(i));if(n.issues)throw new D0(n.issues);return n.value}function Xe(...e){return{...e[0],pipe:e,_run(t,i){for(let n=0;n<e.length;n++){if(t.issues&&(e[n].kind==="schema"||e[n].kind==="transformation")){t.typed=!1;break}(!t.issues||!i.abortEarly&&!i.abortPipeEarly)&&(t=e[n]._run(t,i))}return t}}}function _r(e){const t=Object.entries(e).map(([i,n])=>G({[i]:n}));return Xe(ri(t),Us(i=>({...i,$kind:Object.keys(i)[0]})))}const Xr=Xe(Le(),Us(e=>pe(e)),Bo(Bi)),bi=Xr,hr=Le(),pi=Xe(ri([Le(),Xe(Rt(),Ft())]),Bo(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}},"Invalid u64")),On=G({objectId:Xr,version:pi,digest:Le()}),Ye=Xe(ri([G({GasCoin:ge(!0)}),G({Input:Xe(Rt(),Ft()),type:si(ge("pure"))}),G({Input:Xe(Rt(),Ft()),type:si(ge("object"))}),G({Result:Xe(Rt(),Ft())}),G({NestedResult:xc([Xe(Rt(),Ft()),Xe(Rt(),Ft())])})]),Us(e=>({...e,$kind:Object.keys(e)[0]}))),R0=G({budget:Ge(pi),price:Ge(pi),owner:Ge(Xr),payment:Ge(he(On))}),qa=ri([ge("address"),ge("bool"),ge("u8"),ge("u16"),ge("u32"),ge("u64"),ge("u128"),ge("u256"),G({vector:xo(()=>qa)}),G({datatype:G({package:Le(),module:Le(),type:Le(),typeParameters:he(xo(()=>qa))})}),G({typeParameter:Xe(Rt(),Ft())})]),$0=G({ref:Ge(ri([ge("&"),ge("&mut")])),body:qa}),q0=G({package:bi,module:Le(),function:Le(),typeArguments:he(Le()),arguments:he(Ye),_argumentTypes:si(Ge(he($0)))}),F0=G({name:Le(),inputs:So(Le(),ri([Ye,he(Ye)])),data:So(Le(),fr())}),L0=_r({MoveCall:q0,TransferObjects:G({objects:he(Ye),address:Ye}),SplitCoins:G({coin:Ye,amounts:he(Ye)}),MergeCoins:G({destination:Ye,sources:he(Ye)}),Publish:G({modules:he(hr),dependencies:he(bi)}),MakeMoveVec:G({type:Ge(Le()),elements:he(Ye)}),Upgrade:G({modules:he(hr),dependencies:he(bi),package:bi,ticket:Ye}),$Intent:F0}),iu=_r({ImmOrOwnedObject:On,SharedObject:G({objectId:bi,initialSharedVersion:pi,mutable:Vs()}),Receiving:On}),U0=_r({Object:iu,Pure:G({bytes:hr}),UnresolvedPure:G({value:fr()}),UnresolvedObject:G({objectId:bi,version:si(Ge(pi)),digest:si(Ge(Le())),initialSharedVersion:si(Ge(pi))})}),ll=_r({Object:iu,Pure:G({bytes:hr})}),nu=_r({None:ge(!0),Epoch:pi}),ns=G({version:ge(2),sender:Lr(Xr),expiration:Lr(nu),gasData:R0,inputs:he(U0),commands:he(L0)});var ru=(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(ru||{});const ji={MoveCall(e){const[t,i="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:i,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects(e,t){return{$kind:"TransferObjects",TransferObjects:{objects:e.map(i=>Nt(Ye,i)),address:Nt(Ye,t)}}},SplitCoins(e,t){return{$kind:"SplitCoins",SplitCoins:{coin:Nt(Ye,e),amounts:t.map(i=>Nt(Ye,i))}}},MergeCoins(e,t){return{$kind:"MergeCoins",MergeCoins:{destination:Nt(Ye,e),sources:t.map(i=>Nt(Ye,i))}}},Publish({modules:e,dependencies:t}){return{$kind:"Publish",Publish:{modules:e.map(i=>typeof i=="string"?i:Ht(new Uint8Array(i))),dependencies:t.map(i=>ze(i))}}},Upgrade({modules:e,dependencies:t,package:i,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:e.map(r=>typeof r=="string"?r:Ht(new Uint8Array(r))),dependencies:t.map(r=>ze(r)),package:i,ticket:Nt(Ye,n)}}},MakeMoveVec({type:e,elements:t}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(i=>Nt(Ye,i))}}},Intent({name:e,inputs:t={},data:i={}}){return{$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Array.isArray(r)?r.map(o=>Nt(Ye,o)):Nt(Ye,r)])),data:i}}}},Fa=G({digest:Le(),objectId:Le(),version:ri([Xe(Rt(),Ft()),Le(),Ks()])}),K0=_r({ImmOrOwned:Fa,Shared:G({objectId:bi,initialSharedVersion:pi,mutable:Vs()}),Receiving:Fa}),dl=_r({Object:K0,Pure:he(Xe(Rt(),Ft()))}),ou=ri([G({kind:ge("Input"),index:Xe(Rt(),Ft()),value:fr(),type:si(ge("object"))}),G({kind:ge("Input"),index:Xe(Rt(),Ft()),value:fr(),type:ge("pure")})]),V0=ri([G({Epoch:Xe(Rt(),Ft())}),G({None:Ge(ge(!0))})]),ul=Xe(ri([Rt(),Le(),Ks()]),Bo(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),Sc=ri([G({bool:Ge(ge(!0))}),G({u8:Ge(ge(!0))}),G({u64:Ge(ge(!0))}),G({u128:Ge(ge(!0))}),G({address:Ge(ge(!0))}),G({signer:Ge(ge(!0))}),G({vector:xo(()=>Sc)}),G({struct:xo(()=>z0)}),G({u16:Ge(ge(!0))}),G({u32:Ge(ge(!0))}),G({u256:Ge(ge(!0))})]),z0=G({address:Le(),module:Le(),name:Le(),typeParams:he(Sc)}),W0=G({budget:si(ul),price:si(ul),payment:si(he(Fa)),owner:si(Le())}),G0=[ou,G({kind:ge("GasCoin")}),G({kind:ge("Result"),index:Xe(Rt(),Ft())}),G({kind:ge("NestedResult"),index:Xe(Rt(),Ft()),resultIndex:Xe(Rt(),Ft())})],hn=ri([...G0]),H0=G({kind:ge("MoveCall"),target:Xe(Le(),Bo(e=>e.split("::").length===3)),typeArguments:he(Le()),arguments:he(hn)}),X0=G({kind:ge("TransferObjects"),objects:he(hn),address:hn}),J0=G({kind:ge("SplitCoins"),coin:hn,amounts:he(hn)}),Z0=G({kind:ge("MergeCoins"),destination:hn,sources:he(hn)}),Q0=G({kind:ge("MakeMoveVec"),type:ri([G({Some:Sc}),G({None:Ge(ge(!0))})]),objects:he(hn)}),Y0=G({kind:ge("Publish"),modules:he(he(Xe(Rt(),Ft()))),dependencies:he(Le())}),ep=G({kind:ge("Upgrade"),modules:he(he(Xe(Rt(),Ft()))),dependencies:he(Le()),packageId:Le(),ticket:hn}),tp=[H0,X0,J0,Z0,Y0,ep,Q0],ip=ri([...tp]);G({version:ge(1),sender:si(Le()),expiration:Lr(V0),gasConfig:W0,inputs:he(ou),transactions:he(ip)});function fl(e){var i;const t=e.inputs.map((n,r)=>{if(n.Object)return{kind:"Input",index:r,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:r,value:{Pure:Array.from(qi(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:r,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:r,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:((i=e.expiration)==null?void 0:i.$kind)==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:Zi.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(r=>nn(r,t))};if(n.MergeCoins)return{kind:"MergeCoins",destination:nn(n.MergeCoins.destination,t),sources:n.MergeCoins.sources.map(r=>nn(r,t))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(r=>nn(r,t))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(r=>Array.from(qi(r))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:nn(n.SplitCoins.coin,t),amounts:n.SplitCoins.amounts.map(r=>nn(r,t))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(r=>nn(r,t)),address:nn(n.TransferObjects.address,t)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(r=>Array.from(qi(r))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:nn(n.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function nn(e,t){if(e.$kind==="GasCoin")return{kind:"GasCoin"};if(e.$kind==="Result")return{kind:"Result",index:e.Result};if(e.$kind==="NestedResult")return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if(e.$kind==="Input")return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function np(e){var t,i,n;return Nt(ns,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:((t=e.gasConfig.budget)==null?void 0:t.toString())??null,price:((i=e.gasConfig.price)==null?void 0:i.toString())??null,payment:((n=e.gasConfig.payment)==null?void 0:n.map(r=>({digest:r.digest,objectId:r.objectId,version:r.version.toString()})))??null},inputs:e.inputs.map(r=>{if(r.kind==="Input"){if($a(dl,r.value)){const o=Nt(dl,r.value);if(o.Object){if(o.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:o.Object.ImmOrOwned.objectId,version:String(o.Object.ImmOrOwned.version),digest:o.Object.ImmOrOwned.digest}}};if(o.Object.Shared)return{Object:{SharedObject:{mutable:o.Object.Shared.mutable??null,initialSharedVersion:o.Object.Shared.initialSharedVersion,objectId:o.Object.Shared.objectId}}};if(o.Object.Receiving)return{Object:{Receiving:{digest:o.Object.Receiving.digest,version:String(o.Object.Receiving.version),objectId:o.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Ht(new Uint8Array(o.Pure))}}}return r.type==="object"?{UnresolvedObject:{objectId:r.value}}:{UnresolvedPure:{value:r.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(r=>{switch(r.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in r.type?Zi.tagToString(r.type.Some):null,elements:r.objects.map(o=>rn(o))}};case"MergeCoins":return{MergeCoins:{destination:rn(r.destination),sources:r.sources.map(o=>rn(o))}};case"MoveCall":{const[o,s,a]=r.target.split("::");return{MoveCall:{package:o,module:s,function:a,typeArguments:r.typeArguments,arguments:r.arguments.map(c=>rn(c))}}}case"Publish":return{Publish:{modules:r.modules.map(o=>Ht(Uint8Array.from(o))),dependencies:r.dependencies}};case"SplitCoins":return{SplitCoins:{coin:rn(r.coin),amounts:r.amounts.map(o=>rn(o))}};case"TransferObjects":return{TransferObjects:{objects:r.objects.map(o=>rn(o)),address:rn(r.address)}};case"Upgrade":return{Upgrade:{modules:r.modules.map(o=>Ht(Uint8Array.from(o))),dependencies:r.dependencies,package:r.packageId,ticket:rn(r.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(r)}`)})})}function rn(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function No(e){return ri(Object.entries(e).map(([t,i])=>G({[t]:i})))}const Ii=No({GasCoin:ge(!0),Input:Xe(Rt(),Ft()),Result:Xe(Rt(),Ft()),NestedResult:xc([Xe(Rt(),Ft()),Xe(Rt(),Ft())])}),rp=G({budget:Ge(pi),price:Ge(pi),owner:Ge(Xr),payment:Ge(he(On))}),op=G({package:bi,module:Le(),function:Le(),typeArguments:he(Le()),arguments:he(Ii)}),sp=G({name:Le(),inputs:So(Le(),ri([Ii,he(Ii)])),data:So(Le(),fr())}),ap=No({MoveCall:op,TransferObjects:G({objects:he(Ii),address:Ii}),SplitCoins:G({coin:Ii,amounts:he(Ii)}),MergeCoins:G({destination:Ii,sources:he(Ii)}),Publish:G({modules:he(hr),dependencies:he(bi)}),MakeMoveVec:G({type:Ge(Le()),elements:he(Ii)}),Upgrade:G({modules:he(hr),dependencies:he(bi),package:bi,ticket:Ii}),$Intent:sp}),cp=No({ImmOrOwnedObject:On,SharedObject:G({objectId:bi,initialSharedVersion:pi,mutable:Vs()}),Receiving:On}),lp=No({Object:cp,Pure:G({bytes:hr}),UnresolvedPure:G({value:fr()}),UnresolvedObject:G({objectId:bi,version:si(Ge(pi)),digest:si(Ge(Le())),initialSharedVersion:si(Ge(pi))})}),dp=No({None:ge(!0),Epoch:pi}),up=G({version:ge(2),sender:Lr(Xr),expiration:Lr(dp),gasData:rp,inputs:he(lp),commands:he(ap)}),fp=50,hp=1000n,pp=5e10;async function _p(e,t,i){return await yp(e,t),await wp(e,t),t.onlyTransactionKind||(await mp(e,t),await gp(e,t),await bp(e,t)),await vp(e),await i()}async function mp(e,t){e.gasConfig.price||(e.gasConfig.price=String(await Jr(t).getReferenceGasPrice()))}async function gp(e,t){if(e.gasConfig.budget)return;const i=await Jr(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(pp),payment:[]}}})});if(i.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${i.effects.status.error}`,{cause:i});const n=hp*BigInt(e.gasConfig.price||1n),r=BigInt(i.effects.gasUsed.computationCost)+n,o=r+BigInt(i.effects.gasUsed.storageCost)-BigInt(i.effects.gasUsed.storageRebate);e.gasConfig.budget=String(o>r?o:r)}async function bp(e,t){if(!e.gasConfig.payment){const n=(await Jr(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:Od})).data.filter(r=>!e.inputs.find(s=>{var a;return(a=s.Object)!=null&&a.ImmOrOwnedObject?r.coinObjectId===s.Object.ImmOrOwnedObject.objectId:!1})).map(r=>({objectId:r.coinObjectId,digest:r.digest,version:r.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=n.map(r=>Nt(On,r))}}async function wp(e,t){const i=e.inputs.filter(u=>{var m;return u.UnresolvedObject&&!(u.UnresolvedObject.version||(m=u.UnresolvedObject)!=null&&m.initialSharedVersion)}),n=[...new Set(i.map(u=>ze(u.UnresolvedObject.objectId)))],r=n.length?xp(n,fp):[],o=(await Promise.all(r.map(u=>Jr(t).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat(),s=new Map(n.map((u,m)=>[u,o[m]])),a=Array.from(s).filter(([u,m])=>m.error).map(([u,m])=>JSON.stringify(m.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=o.map(u=>{if(u.error||!u.data)throw new Error(`Failed to fetch object: ${u.error}`);const m=u.data.owner,g=m&&typeof m=="object"&&"Shared"in m?m.Shared.initial_shared_version:null;return{objectId:u.data.objectId,digest:u.data.digest,version:u.data.version,initialSharedVersion:g}}),l=new Map(n.map((u,m)=>[u,c[m]]));for(const[u,m]of e.inputs.entries()){if(!m.UnresolvedObject)continue;let g;const k=pe(m.UnresolvedObject.objectId),x=l.get(k);m.UnresolvedObject.initialSharedVersion??(x==null?void 0:x.initialSharedVersion)?g=Mi.SharedObjectRef({objectId:k,initialSharedVersion:m.UnresolvedObject.initialSharedVersion||(x==null?void 0:x.initialSharedVersion),mutable:kp(e,u)}):Cp(e,u)&&(g=Mi.ReceivingRef({objectId:k,digest:m.UnresolvedObject.digest??(x==null?void 0:x.digest),version:m.UnresolvedObject.version??(x==null?void 0:x.version)})),e.inputs[e.inputs.indexOf(m)]=g??Mi.ObjectRef({objectId:k,digest:m.UnresolvedObject.digest??(x==null?void 0:x.digest),version:m.UnresolvedObject.version??(x==null?void 0:x.version)})}}async function yp(e,t){const{inputs:i,commands:n}=e,r=[],o=new Set;n.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(u=>u.$kind==="Input"?e.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;o.add(u),r.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(c=>{hl(c,de.U64,e)});break;case"TransferObjects":hl(a.TransferObjects.address,de.Address,e);break}});const s=new Map;if(o.size>0){const a=Jr(t);await Promise.all([...o].map(async c=>{const[l,u,m]=c.split("::"),g=await a.getNormalizedMoveFunction({package:l,module:u,function:m});s.set(c,g.parameters.map(k=>eu(k)))}))}r.length&&await Promise.all(r.map(async a=>{const c=s.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const u=c.length>0&&O0(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=u})),n.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,l=`${c.package}::${c.module}::${c.function}`,u=c._argumentTypes;if(u){if(u.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${l}`);u.forEach((m,g)=>{var B,N;const k=c.arguments[g];if(k.$kind!=="Input")return;const x=i[k.Input];if(!x.UnresolvedPure&&!x.UnresolvedObject)return;const T=((B=x.UnresolvedPure)==null?void 0:B.value)??((N=x.UnresolvedObject)==null?void 0:N.objectId),I=vs(m.body);if(I){k.type="pure",i[i.indexOf(x)]=Mi.Pure(I.serialize(T));return}if(typeof T!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(T,null,2)}`);k.type="object";const E=x.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:T}}:x;i[k.Input]=E})}})}function vp(e){e.inputs.forEach((t,i)=>{if(t.$kind!=="Object"&&t.$kind!=="Pure")throw new Error(`Input at index ${i} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(t)}`)})}function hl(e,t,i){if(e.$kind!=="Input")return;const n=i.inputs[e.Input];n.$kind==="UnresolvedPure"&&(i.inputs[e.Input]=Mi.Pure(t.serialize(n.UnresolvedPure.value)))}function kp(e,t){let i=!1;return e.getInputUses(t,(n,r)=>{if(r.MoveCall&&r.MoveCall._argumentTypes){const o=r.MoveCall.arguments.indexOf(n);i=r.MoveCall._argumentTypes[o].ref!=="&"||i}(r.$kind==="MakeMoveVec"||r.$kind==="MergeCoins"||r.$kind==="SplitCoins")&&(i=!0)}),i}function Cp(e,t){let i=!1;return e.getInputUses(t,(n,r)=>{if(r.MoveCall&&r.MoveCall._argumentTypes){const o=r.MoveCall.arguments.indexOf(n);i=Ap(r.MoveCall._argumentTypes[o])||i}}),i}function Ap(e){return typeof e.body!="object"||!("datatype"in e.body)?!1:e.body.datatype.package==="0x2"&&e.body.datatype.module==="transfer"&&e.body.datatype.type==="Receiving"}function Jr(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function xp(e,t){return Array.from({length:Math.ceil(e.length/t)},(i,n)=>e.slice(n*t,n*t+t))}function su(e){function t(i,n){if(typeof i=="string")return e(po(i).serialize(n));if(i instanceof Uint8Array||bc(i))return e(i);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=i=>e(de.U8.serialize(i)),t.u16=i=>e(de.U16.serialize(i)),t.u32=i=>e(de.U32.serialize(i)),t.u64=i=>e(de.U64.serialize(i)),t.u128=i=>e(de.U128.serialize(i)),t.u256=i=>e(de.U256.serialize(i)),t.bool=i=>e(de.Bool.serialize(i)),t.string=i=>e(de.String.serialize(i)),t.address=i=>e(de.Address.serialize(i)),t.id=t.address,t.vector=(i,n)=>e(de.vector(po(i)).serialize(n)),t.option=(i,n)=>e(de.option(po(i)).serialize(n)),t}function po(e){switch(e){case"u8":return de.u8();case"u16":return de.u16();case"u32":return de.u32();case"u64":return de.u64();case"u128":return de.u128();case"u256":return de.u256();case"bool":return de.bool();case"string":return de.string();case"id":case"address":return de.Address}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[i,n]=t.slice(1);return i==="vector"?de.vector(po(n)):de.option(po(n))}throw new Error(`Invalid Pure type name: ${e}`)}function _a(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Sp(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function au(e,...t){if(!Sp(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function pl(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Tp(e,t){au(e);const i=t.outputLen;if(e.length<i)throw new Error(`digestInto() expects output buffer of length at least ${i}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ks=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Qn=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,cu=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,on=Qn?e=>e:e=>cu(e);function gr(e){for(let t=0;t<e.length;t++)e[t]=cu(e[t])}function Mp(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function _o(e){return typeof e=="string"&&(e=Mp(e)),au(e),e}class Op{clone(){return this._cloneInto()}}function Ip(e){const t=(n,r)=>e(r).update(_o(n)).digest(),i=e({});return t.outputLen=i.outputLen,t.blockLen=i.blockLen,t.create=n=>e(n),t}const Pp=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class jp extends Op{constructor(t,i,n={},r,o,s){if(super(),this.blockLen=t,this.outputLen=i,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,_a(t),_a(i),_a(r),i<0||i>r)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>r))throw new Error(`key must be up 1..${r} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==s)throw new Error(`personalization must be ${s} byte long or undefined`);this.buffer32=ks(this.buffer=new Uint8Array(t))}update(t){pl(this);const{blockLen:i,buffer:n,buffer32:r}=this;t=_o(t);const o=t.length,s=t.byteOffset,a=t.buffer;for(let c=0;c<o;){this.pos===i&&(Qn||gr(r),this.compress(r,0,!1),Qn||gr(r),this.pos=0);const l=Math.min(i-this.pos,o-c),u=s+c;if(l===i&&!(u%4)&&c+l<o){const m=new Uint32Array(a,u,Math.floor((o-c)/4));Qn||gr(m);for(let g=0;c+i<o;g+=r.length,c+=i)this.length+=i,this.compress(m,g,!1);Qn||gr(m);continue}n.set(t.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(t){pl(this),Tp(t,this);const{pos:i,buffer32:n}=this;this.finished=!0,this.buffer.subarray(i).fill(0),Qn||gr(n),this.compress(n,0,!0),Qn||gr(n);const r=ks(t);this.get().forEach((o,s)=>r[s]=on(o))}digest(){const{buffer:t,outputLen:i}=this;this.digestInto(t);const n=t.slice(0,i);return this.destroy(),n}_cloneInto(t){const{buffer:i,length:n,finished:r,destroyed:o,outputLen:s,pos:a}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=n,t.finished=r,t.destroyed=o,t.outputLen=s,t.buffer.set(i),t.pos=a,t}}const Ko=BigInt(2**32-1),La=BigInt(32);function lu(e,t=!1){return t?{h:Number(e&Ko),l:Number(e>>La&Ko)}:{h:Number(e>>La&Ko)|0,l:Number(e&Ko)|0}}function Ep(e,t=!1){let i=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:o,l:s}=lu(e[r],t);[i[r],n[r]]=[o,s]}return[i,n]}const Bp=(e,t)=>BigInt(e>>>0)<<La|BigInt(t>>>0),Np=(e,t,i)=>e>>>i,Dp=(e,t,i)=>e<<32-i|t>>>i,Rp=(e,t,i)=>e>>>i|t<<32-i,$p=(e,t,i)=>e<<32-i|t>>>i,qp=(e,t,i)=>e<<64-i|t>>>i-32,Fp=(e,t,i)=>e>>>i-32|t<<64-i,Lp=(e,t)=>t,Up=(e,t)=>e,Kp=(e,t,i)=>e<<i|t>>>32-i,Vp=(e,t,i)=>t<<i|e>>>32-i,zp=(e,t,i)=>t<<i-32|e>>>64-i,Wp=(e,t,i)=>e<<i-32|t>>>64-i;function Gp(e,t,i,n){const r=(t>>>0)+(n>>>0);return{h:e+i+(r/2**32|0)|0,l:r|0}}const Hp=(e,t,i)=>(e>>>0)+(t>>>0)+(i>>>0),Xp=(e,t,i,n)=>t+i+n+(e/2**32|0)|0,Jp=(e,t,i,n)=>(e>>>0)+(t>>>0)+(i>>>0)+(n>>>0),Zp=(e,t,i,n,r)=>t+i+n+r+(e/2**32|0)|0,Qp=(e,t,i,n,r)=>(e>>>0)+(t>>>0)+(i>>>0)+(n>>>0)+(r>>>0),Yp=(e,t,i,n,r,o)=>t+i+n+r+o+(e/2**32|0)|0,e_={fromBig:lu,split:Ep,toBig:Bp,shrSH:Np,shrSL:Dp,rotrSH:Rp,rotrSL:$p,rotrBH:qp,rotrBL:Fp,rotr32H:Lp,rotr32L:Up,rotlSH:Kp,rotlSL:Vp,rotlBH:zp,rotlBL:Wp,add:Gp,add3L:Hp,add3H:Xp,add4L:Jp,add4H:Zp,add5H:Yp,add5L:Qp},di=e_,Vt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Z=new Uint32Array(32);function pn(e,t,i,n,r,o){const s=r[o],a=r[o+1];let c=Z[2*e],l=Z[2*e+1],u=Z[2*t],m=Z[2*t+1],g=Z[2*i],k=Z[2*i+1],x=Z[2*n],T=Z[2*n+1],I=di.add3L(c,u,s);l=di.add3H(I,l,m,a),c=I|0,{Dh:T,Dl:x}={Dh:T^l,Dl:x^c},{Dh:T,Dl:x}={Dh:di.rotr32H(T,x),Dl:di.rotr32L(T,x)},{h:k,l:g}=di.add(k,g,T,x),{Bh:m,Bl:u}={Bh:m^k,Bl:u^g},{Bh:m,Bl:u}={Bh:di.rotrSH(m,u,24),Bl:di.rotrSL(m,u,24)},Z[2*e]=c,Z[2*e+1]=l,Z[2*t]=u,Z[2*t+1]=m,Z[2*i]=g,Z[2*i+1]=k,Z[2*n]=x,Z[2*n+1]=T}function _n(e,t,i,n,r,o){const s=r[o],a=r[o+1];let c=Z[2*e],l=Z[2*e+1],u=Z[2*t],m=Z[2*t+1],g=Z[2*i],k=Z[2*i+1],x=Z[2*n],T=Z[2*n+1],I=di.add3L(c,u,s);l=di.add3H(I,l,m,a),c=I|0,{Dh:T,Dl:x}={Dh:T^l,Dl:x^c},{Dh:T,Dl:x}={Dh:di.rotrSH(T,x,16),Dl:di.rotrSL(T,x,16)},{h:k,l:g}=di.add(k,g,T,x),{Bh:m,Bl:u}={Bh:m^k,Bl:u^g},{Bh:m,Bl:u}={Bh:di.rotrBH(m,u,63),Bl:di.rotrBL(m,u,63)},Z[2*e]=c,Z[2*e+1]=l,Z[2*t]=u,Z[2*t+1]=m,Z[2*i]=g,Z[2*i+1]=k,Z[2*n]=x,Z[2*n+1]=T}class t_ extends jp{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Vt[0]|0,this.v0h=Vt[1]|0,this.v1l=Vt[2]|0,this.v1h=Vt[3]|0,this.v2l=Vt[4]|0,this.v2h=Vt[5]|0,this.v3l=Vt[6]|0,this.v3h=Vt[7]|0,this.v4l=Vt[8]|0,this.v4h=Vt[9]|0,this.v5l=Vt[10]|0,this.v5h=Vt[11]|0,this.v6l=Vt[12]|0,this.v6h=Vt[13]|0,this.v7l=Vt[14]|0,this.v7h=Vt[15]|0;const i=t.key?t.key.length:0;if(this.v0l^=this.outputLen|i<<8|65536|1<<24,t.salt){const n=ks(_o(t.salt));this.v4l^=on(n[0]),this.v4h^=on(n[1]),this.v5l^=on(n[2]),this.v5h^=on(n[3])}if(t.personalization){const n=ks(_o(t.personalization));this.v6l^=on(n[0]),this.v6h^=on(n[1]),this.v7l^=on(n[2]),this.v7h^=on(n[3])}if(t.key){const n=new Uint8Array(this.blockLen);n.set(_o(t.key)),this.update(n)}}get(){let{v0l:t,v0h:i,v1l:n,v1h:r,v2l:o,v2h:s,v3l:a,v3h:c,v4l:l,v4h:u,v5l:m,v5h:g,v6l:k,v6h:x,v7l:T,v7h:I}=this;return[t,i,n,r,o,s,a,c,l,u,m,g,k,x,T,I]}set(t,i,n,r,o,s,a,c,l,u,m,g,k,x,T,I){this.v0l=t|0,this.v0h=i|0,this.v1l=n|0,this.v1h=r|0,this.v2l=o|0,this.v2h=s|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=m|0,this.v5h=g|0,this.v6l=k|0,this.v6h=x|0,this.v7l=T|0,this.v7h=I|0}compress(t,i,n){this.get().forEach((c,l)=>Z[l]=c),Z.set(Vt,16);let{h:r,l:o}=di.fromBig(BigInt(this.length));Z[24]=Vt[8]^o,Z[25]=Vt[9]^r,n&&(Z[28]=~Z[28],Z[29]=~Z[29]);let s=0;const a=Pp;for(let c=0;c<12;c++)pn(0,4,8,12,t,i+2*a[s++]),_n(0,4,8,12,t,i+2*a[s++]),pn(1,5,9,13,t,i+2*a[s++]),_n(1,5,9,13,t,i+2*a[s++]),pn(2,6,10,14,t,i+2*a[s++]),_n(2,6,10,14,t,i+2*a[s++]),pn(3,7,11,15,t,i+2*a[s++]),_n(3,7,11,15,t,i+2*a[s++]),pn(0,5,10,15,t,i+2*a[s++]),_n(0,5,10,15,t,i+2*a[s++]),pn(1,6,11,12,t,i+2*a[s++]),_n(1,6,11,12,t,i+2*a[s++]),pn(2,7,8,13,t,i+2*a[s++]),_n(2,7,8,13,t,i+2*a[s++]),pn(3,4,9,14,t,i+2*a[s++]),_n(3,4,9,14,t,i+2*a[s++]);this.v0l^=Z[0]^Z[16],this.v0h^=Z[1]^Z[17],this.v1l^=Z[2]^Z[18],this.v1h^=Z[3]^Z[19],this.v2l^=Z[4]^Z[20],this.v2h^=Z[5]^Z[21],this.v3l^=Z[6]^Z[22],this.v3h^=Z[7]^Z[23],this.v4l^=Z[8]^Z[24],this.v4h^=Z[9]^Z[25],this.v5l^=Z[10]^Z[26],this.v5h^=Z[11]^Z[27],this.v6l^=Z[12]^Z[28],this.v6h^=Z[13]^Z[29],this.v7l^=Z[14]^Z[30],this.v7h^=Z[15]^Z[31],Z.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const i_=Ip(e=>new t_(e));function n_(e,t){const i=Array.from(`${e}::`).map(r=>r.charCodeAt(0)),n=new Uint8Array(i.length+t.length);return n.set(i),n.set(t,i.length),i_(n,{dkLen:32})}function _l(e){return pe(e).replace("0x","")}class gi{constructor(t){this.version=2,this.sender=(t==null?void 0:t.sender)??null,this.expiration=(t==null?void 0:t.expiration)??null,this.inputs=(t==null?void 0:t.inputs)??[],this.commands=(t==null?void 0:t.commands)??[],this.gasData=(t==null?void 0:t.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(t){const n=de.TransactionKind.parse(t).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return gi.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(t){const i=de.TransactionData.parse(t),n=i==null?void 0:i.V1,r=n.kind.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");return gi.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:r.inputs,commands:r.commands})}static restore(t){return t.version===2?new gi(Nt(ns,t)):new gi(Nt(ns,np(t)))}static getDigestFromBytes(t){const i=n_("TransactionData",t);return qs(i)}get gasConfig(){return this.gasData}set gasConfig(t){this.gasData=t}build({maxSizeBytes:t=1/0,overrides:i,onlyTransactionKind:n}={}){const r=this.inputs,o=this.commands,s={ProgrammableTransaction:{inputs:r,commands:o}};if(n)return de.TransactionKind.serialize(s,{maxSize:t}).toBytes();const a=(i==null?void 0:i.expiration)??this.expiration,c=(i==null?void 0:i.sender)??this.sender,l={...this.gasData,...i==null?void 0:i.gasConfig,...i==null?void 0:i.gasData};if(!c)throw new Error("Missing transaction sender");if(!l.budget)throw new Error("Missing gas budget");if(!l.payment)throw new Error("Missing gas payment");if(!l.price)throw new Error("Missing gas price");const u={sender:_l(c),expiration:a||{None:!0},gasData:{payment:l.payment,owner:_l(this.gasData.owner??c),price:BigInt(l.price),budget:BigInt(l.budget)},kind:{ProgrammableTransaction:{inputs:r,commands:o}}};return de.TransactionData.serialize({V1:u},{maxSize:t}).toBytes()}addInput(t,i){const n=this.inputs.length;return this.inputs.push(i),{Input:n,type:t,$kind:"Input"}}getInputUses(t,i){this.mapArguments((n,r)=>(n.$kind==="Input"&&n.Input===t&&i(n,r),n))}mapArguments(t){for(const i of this.commands)switch(i.$kind){case"MoveCall":i.MoveCall.arguments=i.MoveCall.arguments.map(r=>t(r,i));break;case"TransferObjects":i.TransferObjects.objects=i.TransferObjects.objects.map(r=>t(r,i)),i.TransferObjects.address=t(i.TransferObjects.address,i);break;case"SplitCoins":i.SplitCoins.coin=t(i.SplitCoins.coin,i),i.SplitCoins.amounts=i.SplitCoins.amounts.map(r=>t(r,i));break;case"MergeCoins":i.MergeCoins.destination=t(i.MergeCoins.destination,i),i.MergeCoins.sources=i.MergeCoins.sources.map(r=>t(r,i));break;case"MakeMoveVec":i.MakeMoveVec.elements=i.MakeMoveVec.elements.map(r=>t(r,i));break;case"Upgrade":i.Upgrade.ticket=t(i.Upgrade.ticket,i);break;case"$Intent":const n=i.$Intent.inputs;i.$Intent.inputs={};for(const[r,o]of Object.entries(n))i.$Intent.inputs[r]=Array.isArray(o)?o.map(s=>t(s,i)):t(o,i);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${i.$kind}`)}}replaceCommand(t,i){if(!Array.isArray(i)){this.commands[t]=i;return}const n=i.length-1;this.commands.splice(t,1,...i),n!==0&&this.mapArguments(r=>{switch(r.$kind){case"Result":r.Result>t&&(r.Result+=n);break;case"NestedResult":r.NestedResult[0]>t&&(r.NestedResult[0]+=n);break}return r})}getDigest(){const t=this.build({onlyTransactionKind:!1});return gi.getDigestFromBytes(t)}snapshot(){return Nt(ns,this)}}function ml(e){if(typeof e=="string")return pe(e);if(e.Object)return e.Object.ImmOrOwnedObject?pe(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?pe(e.Object.Receiving.objectId):pe(e.Object.SharedObject.objectId);if(e.UnresolvedObject)return pe(e.UnresolvedObject.objectId)}var du=e=>{throw TypeError(e)},Tc=(e,t,i)=>t.has(e)||du("Cannot "+i),Ke=(e,t,i)=>(Tc(e,t,"read from private field"),i?i.call(e):t.get(e)),to=(e,t,i)=>t.has(e)?du("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),io=(e,t,i,n)=>(Tc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),sn=(e,t,i)=>(Tc(e,t,"access private method"),i),rs,Cs,Yn,We,Pi,os,Mc,Ua,Oc;function r_(e){const t={$kind:"Result",Result:e},i=[],n=r=>i[r]??(i[r]={$kind:"NestedResult",NestedResult:[e,r]});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(r,o){if(o in r)return Reflect.get(r,o);if(o===Symbol.iterator)return function*(){let a=0;for(;;)yield n(a),a++};if(typeof o=="symbol")return;const s=parseInt(o,10);if(!(Number.isNaN(s)||s<0))return n(s)}})}const uu=Symbol.for("@mysten/transaction");function Do(e){return!!e&&typeof e=="object"&&e[uu]===!0}const o_=class Ka{constructor(){to(this,Pi),to(this,rs,[]),to(this,Cs,[]),to(this,Yn,new Map),to(this,We),io(this,We,new gi)}static fromKind(t){const i=new Ka;return io(i,We,gi.fromKindBytes(typeof t=="string"?qi(t):t)),i}static from(t){const i=new Ka;return Do(t)?io(i,We,new gi(t.getData())):typeof t!="string"||!t.startsWith("{")?io(i,We,gi.fromBytes(typeof t=="string"?qi(t):t)):io(i,We,gi.restore(JSON.parse(t))),i}addSerializationPlugin(t){Ke(this,rs).push(t)}addBuildPlugin(t){Ke(this,Cs).push(t)}addIntentResolver(t,i){if(Ke(this,Yn).has(t)&&Ke(this,Yn).get(t)!==i)throw new Error(`Intent resolver for ${t} already exists`);Ke(this,Yn).set(t,i)}setSender(t){Ke(this,We).sender=t}setSenderIfNotSet(t){Ke(this,We).sender||(Ke(this,We).sender=t)}setExpiration(t){Ke(this,We).expiration=t?Nt(nu,t):null}setGasPrice(t){Ke(this,We).gasConfig.price=String(t)}setGasBudget(t){Ke(this,We).gasConfig.budget=String(t)}setGasBudgetIfNotSet(t){Ke(this,We).gasData.budget==null&&(Ke(this,We).gasConfig.budget=String(t))}setGasOwner(t){Ke(this,We).gasConfig.owner=t}setGasPayment(t){Ke(this,We).gasConfig.payment=t.map(i=>Nt(On,i))}get blockData(){return fl(Ke(this,We).snapshot())}getData(){return Ke(this,We).snapshot()}get[uu](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:su(t=>bc(t)?Ke(this,We).addInput("pure",{$kind:"Pure",Pure:{bytes:t.toBase64()}}):Ke(this,We).addInput("pure",$a(ll,t)?Nt(ll,t):t instanceof Uint8Array?Mi.Pure(t):{$kind:"UnresolvedPure",UnresolvedPure:{value:t}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}object(t){var r,o;if(typeof t=="function")return this.object(t(this));if(typeof t=="object"&&$a(Ye,t))return t;const i=ml(t),n=Ke(this,We).inputs.find(s=>i===ml(s));return(r=n==null?void 0:n.Object)!=null&&r.SharedObject&&typeof t=="object"&&((o=t.Object)!=null&&o.SharedObject)&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||t.Object.SharedObject.mutable),n?{$kind:"Input",Input:Ke(this,We).inputs.indexOf(n),type:"object"}:Ke(this,We).addInput("object",typeof t=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:pe(t)}}:t)}objectRef(...t){return this.object(Mi.ObjectRef(...t))}receivingRef(...t){return this.object(Mi.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(Mi.SharedObjectRef(...t))}add(t){if(typeof t=="function")return t(this);const i=Ke(this,We).commands.push(t);return r_(i-1)}splitCoins(t,i){return this.add(ji.SplitCoins(typeof t=="string"?this.object(t):sn(this,Pi,Mc).call(this,t),i.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):sn(this,Pi,os).call(this,n))))}mergeCoins(t,i){return this.add(ji.MergeCoins(this.object(t),i.map(n=>this.object(n))))}publish({modules:t,dependencies:i}){return this.add(ji.Publish({modules:t,dependencies:i}))}upgrade({modules:t,dependencies:i,package:n,ticket:r}){return this.add(ji.Upgrade({modules:t,dependencies:i,package:n,ticket:this.object(r)}))}moveCall({arguments:t,...i}){return this.add(ji.MoveCall({...i,arguments:t==null?void 0:t.map(n=>sn(this,Pi,os).call(this,n))}))}transferObjects(t,i){return this.add(ji.TransferObjects(t.map(n=>this.object(n)),typeof i=="string"?this.pure.address(i):sn(this,Pi,os).call(this,i)))}makeMoveVec({type:t,elements:i}){return this.add(ji.MakeMoveVec({type:t,elements:i.map(n=>this.object(n))}))}serialize(){return JSON.stringify(fl(Ke(this,We).snapshot()))}async toJSON(t={}){return await this.prepareForSerialization(t),JSON.stringify(Nt(up,Ke(this,We).snapshot()),(i,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(t){const{signer:i,...n}=t,r=await this.build(n);return i.signTransaction(r)}async build(t={}){return await this.prepareForSerialization(t),await sn(this,Pi,Ua).call(this,t),Ke(this,We).build({onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await sn(this,Pi,Ua).call(this,t),Ke(this,We).getDigest()}async prepareForSerialization(t){var r;const i=new Set;for(const o of Ke(this,We).commands)o.$Intent&&i.add(o.$Intent.name);const n=[...Ke(this,rs)];for(const o of i)if(!((r=t.supportedIntents)!=null&&r.includes(o))){if(!Ke(this,Yn).has(o))throw new Error(`Missing intent resolver for ${o}`);n.push(Ke(this,Yn).get(o))}await sn(this,Pi,Oc).call(this,n,t)}};rs=new WeakMap;Cs=new WeakMap;Yn=new WeakMap;We=new WeakMap;Pi=new WeakSet;os=function(e){return bc(e)?this.pure(e):sn(this,Pi,Mc).call(this,e)};Mc=function(e){return typeof e=="function"?Nt(Ye,e(this)):Nt(Ye,e)};Ua=async function(e){if(!e.onlyTransactionKind&&!Ke(this,We).sender)throw new Error("Missing transaction sender");await sn(this,Pi,Oc).call(this,[...Ke(this,Cs),_p],e)};Oc=async function(e,t){const i=n=>{if(n>=e.length)return()=>{};const r=e[n];return async()=>{const o=i(n+1);let s=!1,a=!1;if(await r(Ke(this,We),t,async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await o(),a=!0}),!s)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await i(0)()};let $=o_;var fu=e=>{throw TypeError(e)},hu=(e,t,i)=>t.has(e)||fu("Cannot "+i),Wt=(e,t,i)=>(hu(e,t,"read from private field"),i?i.call(e):t.get(e)),pu=(e,t,i)=>t.has(e)?fu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),s_=(e,t,i,n)=>(hu(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),er,Qt;class _u{async getObject(t){const[i,n]=await Promise.all([this.get("OwnedObject",t),this.get("SharedOrImmutableObject",t)]);return i??n??null}async getObjects(t){return Promise.all([...t.map(i=>this.getObject(i))])}async addObject(t){return t.owner?await this.set("OwnedObject",t.objectId,t):await this.set("SharedOrImmutableObject",t.objectId,t),t}async addObjects(t){await Promise.all(t.map(async i=>this.addObject(i)))}async deleteObject(t){await Promise.all([this.delete("OwnedObject",t),this.delete("SharedOrImmutableObject",t)])}async deleteObjects(t){await Promise.all(t.map(i=>this.deleteObject(i)))}async getMoveFunctionDefinition(t){const i=`${pe(t.package)}::${t.module}::${t.function}`;return this.get("MoveFunction",i)}async addMoveFunctionDefinition(t){const i=pe(t.package),n=`${i}::${t.module}::${t.function}`,r={...t,package:i};return await this.set("MoveFunction",n,r),r}async deleteMoveFunctionDefinition(t){const i=`${pe(t.package)}::${t.module}::${t.function}`;await this.delete("MoveFunction",i)}async getCustom(t){return this.get("Custom",t)}async setCustom(t,i){return this.set("Custom",t,i)}async deleteCustom(t){return this.delete("Custom",t)}}class a_ extends _u{constructor(){super(...arguments),pu(this,er,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(t,i){return Wt(this,er)[t].get(i)??null}async set(t,i,n){Wt(this,er)[t].set(i,n)}async delete(t,i){Wt(this,er)[t].delete(i)}async clear(t){if(t)Wt(this,er)[t].clear();else for(const i of Object.values(Wt(this,er)))i.clear()}}er=new WeakMap;class mu{constructor({cache:t=new a_}){pu(this,Qt),s_(this,Qt,t)}asPlugin(){return async(t,i,n)=>{const r=t.inputs.filter(a=>a.UnresolvedObject).map(a=>a.UnresolvedObject.objectId),o=(await Wt(this,Qt).getObjects(r)).filter(a=>a!==null),s=new Map(o.map(a=>[a.objectId,a]));for(const a of t.inputs){if(!a.UnresolvedObject)continue;const c=s.get(a.UnresolvedObject.objectId);c&&(c.initialSharedVersion&&!a.UnresolvedObject.initialSharedVersion?a.UnresolvedObject.initialSharedVersion=c.initialSharedVersion:(c.version&&!a.UnresolvedObject.version&&(a.UnresolvedObject.version=c.version),c.digest&&!a.UnresolvedObject.digest&&(a.UnresolvedObject.digest=c.digest)))}await Promise.all(t.commands.map(async a=>{if(a.MoveCall){const c=await this.getMoveFunctionDefinition({package:a.MoveCall.package,module:a.MoveCall.module,function:a.MoveCall.function});c&&(a.MoveCall._argumentTypes=c.parameters)}})),await n(),await Promise.all(t.commands.map(async a=>{var c;(c=a.MoveCall)!=null&&c._argumentTypes&&await Wt(this,Qt).addMoveFunctionDefinition({package:a.MoveCall.package,module:a.MoveCall.module,function:a.MoveCall.function,parameters:a.MoveCall._argumentTypes})}))}}async clear(){await Wt(this,Qt).clear()}async getMoveFunctionDefinition(t){return Wt(this,Qt).getMoveFunctionDefinition(t)}async getObjects(t){return Wt(this,Qt).getObjects(t)}async deleteObjects(t){return Wt(this,Qt).deleteObjects(t)}async clearOwnedObjects(){await Wt(this,Qt).clear("OwnedObject")}async clearCustom(){await Wt(this,Qt).clear("Custom")}async getCustom(t){return Wt(this,Qt).getCustom(t)}async setCustom(t,i){return Wt(this,Qt).setCustom(t,i)}async deleteCustom(t){return Wt(this,Qt).deleteCustom(t)}async applyEffects(t){if(!t.V2)throw new Error(`Unsupported transaction effects version ${t.$kind}`);const{lamportVersion:i,changedObjects:n}=t.V2,r=[],o=[];n.map(async([s,a])=>{var c;if(a.outputState.NotExist)await Wt(this,Qt).deleteObject(s);else if(a.outputState.ObjectWrite){const[l,u]=a.outputState.ObjectWrite;o.push({objectId:s,digest:l,version:i,owner:u.AddressOwner??u.ObjectOwner??null,initialSharedVersion:((c=u.Shared)==null?void 0:c.initialSharedVersion)??null})}}),await Promise.all([Wt(this,Qt).addObjects(o),Wt(this,Qt).deleteObjects(r)])}}Qt=new WeakMap;var gu=e=>{throw TypeError(e)},bu=(e,t,i)=>t.has(e)||gu("Cannot "+i),no=(e,t,i)=>(bu(e,t,"read from private field"),i?i.call(e):t.get(e)),gl=(e,t,i)=>t.has(e)?gu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ma=(e,t,i,n)=>(bu(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Ar,xr;class wu{constructor({client:t,...i}){gl(this,Ar),gl(this,xr,null),ma(this,Ar,t),this.cache=new mu(i)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:t,...i}){return t.addBuildPlugin(this.cache.asPlugin()),t.build({client:no(this,Ar),...i})}async executeTransaction({transaction:t,options:i,...n}){const r=Do(t)?await this.buildTransaction({transaction:t}):t,o=await no(this,Ar).executeTransactionBlock({...n,transactionBlock:r,options:{...i,showRawEffects:!0}});if(o.rawEffects){const s=de.TransactionEffects.parse(Uint8Array.from(o.rawEffects));await this.applyEffects(s)}return o}async signAndExecuteTransaction({options:t,transaction:i,...n}){i.setSenderIfNotSet(n.signer.toSuiAddress());const r=await this.buildTransaction({transaction:i}),{signature:o}=await n.signer.signTransaction(r);return await this.executeTransaction({transaction:r,signature:o,options:t})}async applyEffects(t){var i;ma(this,xr,((i=t.V2)==null?void 0:i.transactionDigest)??null),await this.cache.applyEffects(t)}async waitForLastTransaction(){no(this,xr)&&(await no(this,Ar).waitForTransaction({digest:no(this,xr)}),ma(this,xr,null))}}Ar=new WeakMap;xr=new WeakMap;var yu=e=>{throw TypeError(e)},c_=(e,t,i)=>t.has(e)||yu("Cannot "+i),Ni=(e,t,i)=>(c_(e,t,"read from private field"),i?i.call(e):t.get(e)),vu=(e,t,i)=>t.has(e)?yu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),vn,tr;class ku{constructor(){vu(this,vn,[])}async runTask(t){return new Promise((i,n)=>{Ni(this,vn).push(()=>{t().finally(()=>{Ni(this,vn).shift(),Ni(this,vn).length>0&&Ni(this,vn)[0]()}).then(i,n)}),Ni(this,vn).length===1&&Ni(this,vn)[0]()})}}vn=new WeakMap;class l_{constructor(t){vu(this,tr,[]),this.activeTasks=0,this.maxTasks=t}runTask(t){return new Promise((i,n)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,t().finally(()=>{Ni(this,tr).length>0?Ni(this,tr).shift()():this.activeTasks--}).then(i,n)):Ni(this,tr).push(()=>{t().finally(()=>{Ni(this,tr).length>0?Ni(this,tr).shift()():this.activeTasks--}).then(i,n)})})}}tr=new WeakMap;var Cu=e=>{throw TypeError(e)},Au=(e,t,i)=>t.has(e)||Cu("Cannot "+i),ci=(e,t,i)=>(Au(e,t,"read from private field"),i?i.call(e):t.get(e)),ro=(e,t,i)=>t.has(e)?Cu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),bl=(e,t,i,n)=>(Au(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),ss,uo,Oi,Va,as;class d_{constructor({signer:t,...i}){ro(this,ss,new ku),ro(this,uo),ro(this,Oi),ro(this,Va,async n=>{if(!n.V2)return;const r=Ic(n).ref;r?ci(this,Oi).cache.setCustom("gasCoin",r):ci(this,Oi).cache.deleteCustom("gasCoin")}),ro(this,as,async n=>{const r=await ci(this,Oi).cache.getCustom("gasCoin"),o=$.from(n);return r&&o.setGasPayment([r]),o.setSenderIfNotSet(ci(this,uo).toSuiAddress()),ci(this,Oi).buildTransaction({transaction:o})}),bl(this,uo,t),bl(this,Oi,new wu({client:i.client,cache:i.cache}))}async applyEffects(t){return Promise.all([ci(this,Va).call(this,t),ci(this,Oi).cache.applyEffects(t)])}async buildTransaction(t){return ci(this,ss).runTask(()=>ci(this,as).call(this,t))}resetCache(){return ci(this,Oi).reset()}waitForLastTransaction(){return ci(this,Oi).waitForLastTransaction()}executeTransaction(t){return ci(this,ss).runTask(async()=>{const i=Do(t)?await ci(this,as).call(this,t):t,{signature:n}=await ci(this,uo).signTransaction(i),r=await ci(this,Oi).executeTransaction({signature:n,transaction:i}).catch(async a=>{throw await this.resetCache(),a}),o=Uint8Array.from(r.rawEffects),s=de.TransactionEffects.parse(o);return await this.applyEffects(s),{digest:r.digest,effects:Ht(o)}})}}ss=new WeakMap;uo=new WeakMap;Oi=new WeakMap;Va=new WeakMap;as=new WeakMap;function Ic(e){if(!e.V2)throw new Error("Unexpected effects version");const t=e.V2.changedObjects[e.V2.gasObjectIndex];if(!t)throw new Error("Gas object not found in effects");const[i,{outputState:n}]=t;if(!n.ObjectWrite)throw new Error("Unexpected gas object state");const[r,o]=n.ObjectWrite;return{ref:{objectId:i,digest:r,version:e.V2.lamportVersion},owner:o.AddressOwner||o.ObjectOwner}}var xu=e=>{throw TypeError(e)},Pc=(e,t,i)=>t.has(e)||xu("Cannot "+i),oe=(e,t,i)=>(Pc(e,t,"read from private field"),i?i.call(e):t.get(e)),zt=(e,t,i)=>t.has(e)?xu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),$t=(e,t,i,n)=>(Pc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Ti=(e,t,i)=>(Pc(e,t,"access private method"),i),wl=(e,t,i,n)=>({set _(r){$t(e,t,r,i)},get _(){return oe(e,t,n)}}),Sn,Qi,As,To,mo,Mo,xs,Nr,ui,Tn,ur,ar,jc,cs,Oo,Or,Ur,cn,hi,Su,Tu,Io,Ec,Mu,za,Ou;const oo={coinBatchSize:20,initialCoinBalance:200000000n,minimumCoinBalance:50000000n,maxPoolSize:50,epochBoundaryWindow:1e3};class u_{constructor(t){zt(this,hi),zt(this,Sn),zt(this,Qi),zt(this,As),zt(this,To),zt(this,mo),zt(this,Mo),zt(this,xs),zt(this,Nr),zt(this,ui),zt(this,Tn,[]),zt(this,ur),zt(this,ar,new Map),zt(this,jc,new ku),zt(this,cs),zt(this,Oo,null),zt(this,Or,null),zt(this,Ur,0),zt(this,cn,null),$t(this,Sn,t.signer),$t(this,Qi,t.client),$t(this,As,t.coinBatchSize??oo.coinBatchSize),$t(this,To,t.initialCoinBalance??oo.initialCoinBalance),$t(this,mo,t.minimumCoinBalance??oo.minimumCoinBalance),$t(this,xs,t.defaultGasBudget??oe(this,mo)),$t(this,Mo,t.epochBoundaryWindow??oo.epochBoundaryWindow),$t(this,Nr,t.maxPoolSize??oo.maxPoolSize),$t(this,ur,new wu({client:t.client,cache:t.cache})),$t(this,cs,new l_(oe(this,Nr))),$t(this,ui,t.sourceCoins?new Map(t.sourceCoins.map(i=>[i,null])):null)}resetCache(){return $t(this,cn,null),Ti(this,hi,Io).call(this,()=>oe(this,ur).reset())}async waitForLastTransaction(){await Ti(this,hi,Io).call(this,()=>Ti(this,hi,Ec).call(this))}async executeTransaction(t){const{promise:i,resolve:n,reject:r}=f_(),o=await Ti(this,hi,Su).call(this,t),s=()=>{oe(this,cs).runTask(()=>Ti(this,hi,Tu).call(this,t,o).then(n,r))},a=new Set;return o.forEach(c=>{oe(this,ar).get(c)?(a.add(c),oe(this,ar).get(c).push(()=>{a.delete(c),a.size===0&&s()})):oe(this,ar).set(c,[])}),a.size===0&&s(),i}}Sn=new WeakMap;Qi=new WeakMap;As=new WeakMap;To=new WeakMap;mo=new WeakMap;Mo=new WeakMap;xs=new WeakMap;Nr=new WeakMap;ui=new WeakMap;Tn=new WeakMap;ur=new WeakMap;ar=new WeakMap;jc=new WeakMap;cs=new WeakMap;Oo=new WeakMap;Or=new WeakMap;Ur=new WeakMap;cn=new WeakMap;hi=new WeakSet;Su=async function(e){const t=new Set;let i=!1;return e.addSerializationPlugin(async(n,r,o)=>{await o(),!i&&(i=!0,n.inputs.forEach(s=>{var a,c,l,u,m;(c=(a=s.Object)==null?void 0:a.ImmOrOwnedObject)!=null&&c.objectId?t.add(s.Object.ImmOrOwnedObject.objectId):(u=(l=s.Object)==null?void 0:l.Receiving)!=null&&u.objectId?t.add(s.Object.Receiving.objectId):(m=s.UnresolvedObject)!=null&&m.objectId&&!s.UnresolvedObject.initialSharedVersion&&t.add(s.UnresolvedObject.objectId)}))}),await e.prepareForSerialization({client:oe(this,Qi)}),t};Tu=async function(e,t){var n;let i;try{e.setSenderIfNotSet(oe(this,Sn).toSuiAddress()),await oe(this,jc).runTask(async()=>{const m=e.getData();m.gasData.price||e.setGasPrice(await Ti(this,hi,za).call(this)),m.gasData.budget||e.setGasBudget(oe(this,xs)),await Ti(this,hi,Io).call(this),i=await Ti(this,hi,Mu).call(this),wl(this,Ur)._++,e.setGasPayment([{objectId:i.id,version:i.version,digest:i.digest}]),await oe(this,ur).buildTransaction({transaction:e,onlyTransactionKind:!0})});const r=await e.build({client:oe(this,Qi)}),{signature:o}=await oe(this,Sn).signTransaction(r),s=await oe(this,ur).executeTransaction({transaction:r,signature:o,options:{showEffects:!0}}),a=Uint8Array.from(s.rawEffects),c=de.TransactionEffects.parse(a),l=Ic(c),u=(n=c.V2)==null?void 0:n.gasUsed;if(i&&u&&l.owner===oe(this,Sn).toSuiAddress()){const m=BigInt(u.computationCost)+BigInt(u.storageCost)+BigInt(u.storageCost)-BigInt(u.storageRebate);let g=!1;new gi(e.getData()).mapArguments(k=>(k.$kind==="GasCoin"&&(g=!0),k)),!g&&i.balance>=oe(this,mo)?oe(this,Tn).push({id:l.ref.objectId,version:l.ref.version,digest:l.ref.digest,balance:i.balance-m}):(oe(this,ui)||$t(this,ui,new Map),oe(this,ui).set(l.ref.objectId,l.ref))}return $t(this,Oo,s.digest),{digest:s.digest,effects:Ht(a)}}catch(r){throw i&&(oe(this,ui)||$t(this,ui,new Map),oe(this,ui).set(i.id,null)),await Ti(this,hi,Io).call(this,async()=>{await Promise.all([oe(this,ur).cache.deleteObjects([...t]),Ti(this,hi,Ec).call(this)])}),r}finally{t.forEach(r=>{const o=oe(this,ar).get(r);o&&o.length>0?o.shift()():o&&oe(this,ar).delete(r)}),wl(this,Ur)._--}};Io=async function(e){oe(this,Or)&&await oe(this,Or),$t(this,Or,(e==null?void 0:e().then(()=>{$t(this,Or,null)},()=>{}))??null)};Ec=async function(){const e=oe(this,Oo);e&&($t(this,Oo,null),await oe(this,Qi).waitForTransaction({digest:e}))};Mu=async function(){if(oe(this,Tn).length===0&&oe(this,Ur)<=oe(this,Nr)&&await Ti(this,hi,Ou).call(this),oe(this,Tn).length===0)throw new Error("No coins available");return oe(this,Tn).shift()};za=async function(){if((oe(this,cn)?oe(this,cn).expiration-oe(this,Mo)-Date.now():0)>0)return oe(this,cn).price;if(oe(this,cn)){const i=Math.max(oe(this,cn).expiration+oe(this,Mo)-Date.now(),1e3);await new Promise(n=>setTimeout(n,i))}const t=await oe(this,Qi).getLatestSuiSystemState();return $t(this,cn,{price:BigInt(t.referenceGasPrice),expiration:Number.parseInt(t.epochStartTimestampMs,10)+Number.parseInt(t.epochDurationMs,10)}),Ti(this,hi,za).call(this)};Ou=async function(){var l;const e=Math.min(oe(this,As),oe(this,Nr)-(oe(this,Tn).length+oe(this,Ur))+1);if(e===0)return;const t=new $,i=oe(this,Sn).toSuiAddress();if(t.setSender(i),oe(this,ui)){const u=[],m=[];for(const[g,k]of oe(this,ui))k?u.push(k):m.push(g);if(m.length>0){const g=await oe(this,Qi).multiGetObjects({ids:m});u.push(...g.filter(k=>k.data!==null).map(({data:k})=>({objectId:k.objectId,version:k.version,digest:k.digest})))}t.setGasPayment(u),$t(this,ui,new Map)}const n=new Array(e).fill(oe(this,To)),r=t.splitCoins(t.gas,n),o=[];for(let u=0;u<n.length;u++)o.push(r[u]);t.transferObjects(o,i),await this.waitForLastTransaction();const s=await oe(this,Qi).signAndExecuteTransaction({transaction:t,signer:oe(this,Sn),options:{showRawEffects:!0}}),a=de.TransactionEffects.parse(Uint8Array.from(s.rawEffects));(l=a.V2)==null||l.changedObjects.forEach(([u,{outputState:m}],g)=>{var k;g===((k=a.V2)==null?void 0:k.gasObjectIndex)||!m.ObjectWrite||oe(this,Tn).push({id:u,version:a.V2.lamportVersion,digest:m.ObjectWrite[0],balance:BigInt(oe(this,To))})}),oe(this,ui)||$t(this,ui,new Map);const c=Ic(a).ref;oe(this,ui).set(c.objectId,c),await oe(this,Qi).waitForTransaction({digest:s.digest})};function f_(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}const Ss="CoinWithBalance",yl=Ls("0x2::sui::SUI");function h_({type:e=yl,balance:t,useGasCoin:i=!0}){return n=>{n.addIntentResolver(Ss,__);const r=e==="gas"?e:Ls(e);return n.add(ji.Intent({name:Ss,inputs:{},data:{type:r===yl&&i?"gas":r,balance:BigInt(t)}}))}}const p_=G({type:Le(),balance:Ks()});async function __(e,t,i){var l,u;const n=new Set,r=new Map;if(!e.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const m of e.commands)if(m.$kind==="$Intent"&&m.$Intent.name===Ss){const{type:g,balance:k}=Nt(p_,m.$Intent.data);g!=="gas"&&n.add(g),r.set(g,(r.get(g)??0n)+k)}const o=new Set;for(const m of e.inputs)(l=m.Object)!=null&&l.ImmOrOwnedObject&&o.add(m.Object.ImmOrOwnedObject.objectId),(u=m.UnresolvedObject)!=null&&u.objectId&&o.add(m.UnresolvedObject.objectId);const s=new Map,a=Jr(t);await Promise.all([...n].map(async m=>{s.set(m,await m_({coinType:m,balance:r.get(m),client:a,owner:e.sender,usedIds:o}))}));const c=new Map;c.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[m,g]of e.commands.entries()){if(g.$kind!=="$Intent"||g.$Intent.name!==Ss)continue;const{type:k,balance:x}=g.$Intent.data,T=[];if(!c.has(k)){const[I,...E]=s.get(k).map(B=>e.addInput("object",Mi.ObjectRef({objectId:B.coinObjectId,digest:B.digest,version:B.version})));E.length>0&&T.push(ji.MergeCoins(I,E)),c.set(k,I)}T.push(ji.SplitCoins(c.get(k),[e.addInput("pure",Mi.Pure(de.u64().serialize(x)))])),e.replaceCommand(m,T),e.mapArguments(I=>I.$kind==="Result"&&I.Result===m?{$kind:"NestedResult",NestedResult:[m+T.length-1,0]}:I)}return i()}async function m_({coinType:e,balance:t,client:i,owner:n,usedIds:r}){let o=t;const s=[];return a();async function a(c=null){const{data:l,hasNextPage:u,nextCursor:m}=await i.getCoins({owner:n,coinType:e,cursor:c}),g=l.sort((k,x)=>Number(BigInt(x.balance)-BigInt(k.balance)));for(const k of g){if(r.has(k.coinObjectId))continue;const x=BigInt(k.balance);if(s.push(k),o-=x,o<=0)return s}if(u)return a(m);throw new Error(`Not enough coins of type ${e} to satisfy requested balance`)}}const g_={pure:su(e=>t=>t.pure(e)),object:e=>t=>t.object(e),sharedObjectRef:(...e)=>t=>t.sharedObjectRef(...e),objectRef:(...e)=>t=>t.objectRef(...e),receivingRef:(...e)=>t=>t.receivingRef(...e)},b_=Object.freeze(Object.defineProperty({__proto__:null,Arguments:g_,AsyncCache:_u,Commands:ji,Inputs:Mi,ObjectCache:mu,ParallelTransactionExecutor:u_,SerialTransactionExecutor:d_,Transaction:$,TransactionDataBuilder:gi,UpgradePolicy:ru,coinWithBalance:h_,getPureBcsSchema:vs,isTransaction:Do,normalizedTypeToMoveTypeSignature:eu},Symbol.toStringTag,{value:"Module"}));let Vo;const w_=new Uint8Array(16);function y_(){if(!Vo&&(Vo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Vo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Vo(w_)}const Yt=[];for(let e=0;e<256;++e)Yt.push((e+256).toString(16).slice(1));function v_(e,t=0){return Yt[e[t+0]]+Yt[e[t+1]]+Yt[e[t+2]]+Yt[e[t+3]]+"-"+Yt[e[t+4]]+Yt[e[t+5]]+"-"+Yt[e[t+6]]+Yt[e[t+7]]+"-"+Yt[e[t+8]]+Yt[e[t+9]]+"-"+Yt[e[t+10]]+Yt[e[t+11]]+Yt[e[t+12]]+Yt[e[t+13]]+Yt[e[t+14]]+Yt[e[t+15]]}const k_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vl={randomUUID:k_};function zo(e,t,i){if(vl.randomUUID&&!t&&!e)return vl.randomUUID();e=e||{};const n=e.random||(e.rng||y_)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){i=i||0;for(let r=0;r<16;++r)t[i+r]=n[r];return t}return v_(n)}function Iu(e,t){return function(){return e.apply(t,arguments)}}const{toString:C_}=Object.prototype,{getPrototypeOf:Bc}=Object,zs=(e=>t=>{const i=C_.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Wi=e=>(e=e.toLowerCase(),t=>zs(t)===e),Ws=e=>t=>typeof t===e,{isArray:Zr}=Array,Po=Ws("undefined");function A_(e){return e!==null&&!Po(e)&&e.constructor!==null&&!Po(e.constructor)&&wi(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Pu=Wi("ArrayBuffer");function x_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Pu(e.buffer),t}const S_=Ws("string"),wi=Ws("function"),ju=Ws("number"),Gs=e=>e!==null&&typeof e=="object",T_=e=>e===!0||e===!1,ls=e=>{if(zs(e)!=="object")return!1;const t=Bc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},M_=Wi("Date"),O_=Wi("File"),I_=Wi("Blob"),P_=Wi("FileList"),j_=e=>Gs(e)&&wi(e.pipe),E_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||wi(e.append)&&((t=zs(e))==="formdata"||t==="object"&&wi(e.toString)&&e.toString()==="[object FormData]"))},B_=Wi("URLSearchParams"),[N_,D_,R_,$_]=["ReadableStream","Request","Response","Headers"].map(Wi),q_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ro(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let n,r;if(typeof e!="object"&&(e=[e]),Zr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const o=i?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let a;for(n=0;n<s;n++)a=o[n],t.call(null,e[a],a,e)}}function Eu(e,t){t=t.toLowerCase();const i=Object.keys(e);let n=i.length,r;for(;n-- >0;)if(r=i[n],t===r.toLowerCase())return r;return null}const cr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Bu=e=>!Po(e)&&e!==cr;function Wa(){const{caseless:e}=Bu(this)&&this||{},t={},i=(n,r)=>{const o=e&&Eu(t,r)||r;ls(t[o])&&ls(n)?t[o]=Wa(t[o],n):ls(n)?t[o]=Wa({},n):Zr(n)?t[o]=n.slice():t[o]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Ro(arguments[n],i);return t}const F_=(e,t,i,{allOwnKeys:n}={})=>(Ro(t,(r,o)=>{i&&wi(r)?e[o]=Iu(r,i):e[o]=r},{allOwnKeys:n}),e),L_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),U_=(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},K_=(e,t,i,n)=>{let r,o,s;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)s=r[o],(!n||n(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=i!==!1&&Bc(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},V_=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return n!==-1&&n===i},z_=e=>{if(!e)return null;if(Zr(e))return e;let t=e.length;if(!ju(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},W_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Bc(Uint8Array)),G_=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},H_=(e,t)=>{let i;const n=[];for(;(i=e.exec(t))!==null;)n.push(i);return n},X_=Wi("HTMLFormElement"),J_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,r){return n.toUpperCase()+r}),kl=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),Z_=Wi("RegExp"),Nu=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};Ro(i,(r,o)=>{let s;(s=t(r,o,e))!==!1&&(n[o]=s||r)}),Object.defineProperties(e,n)},Q_=e=>{Nu(e,(t,i)=>{if(wi(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=e[i];if(wi(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Y_=(e,t)=>{const i={},n=r=>{r.forEach(o=>{i[o]=!0})};return Zr(e)?n(e):n(String(e).split(t)),i},em=()=>{},tm=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,ga="abcdefghijklmnopqrstuvwxyz",Cl="0123456789",Du={DIGIT:Cl,ALPHA:ga,ALPHA_DIGIT:ga+ga.toUpperCase()+Cl},im=(e=16,t=Du.ALPHA_DIGIT)=>{let i="";const{length:n}=t;for(;e--;)i+=t[Math.random()*n|0];return i};function nm(e){return!!(e&&wi(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const rm=e=>{const t=new Array(10),i=(n,r)=>{if(Gs(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;const o=Zr(n)?[]:{};return Ro(n,(s,a)=>{const c=i(s,r+1);!Po(c)&&(o[a]=c)}),t[r]=void 0,o}}return n};return i(e,0)},om=Wi("AsyncFunction"),sm=e=>e&&(Gs(e)||wi(e))&&wi(e.then)&&wi(e.catch),Ru=((e,t)=>e?setImmediate:t?((i,n)=>(cr.addEventListener("message",({source:r,data:o})=>{r===cr&&o===i&&n.length&&n.shift()()},!1),r=>{n.push(r),cr.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",wi(cr.postMessage)),am=typeof queueMicrotask<"u"?queueMicrotask.bind(cr):typeof process<"u"&&process.nextTick||Ru,D={isArray:Zr,isArrayBuffer:Pu,isBuffer:A_,isFormData:E_,isArrayBufferView:x_,isString:S_,isNumber:ju,isBoolean:T_,isObject:Gs,isPlainObject:ls,isReadableStream:N_,isRequest:D_,isResponse:R_,isHeaders:$_,isUndefined:Po,isDate:M_,isFile:O_,isBlob:I_,isRegExp:Z_,isFunction:wi,isStream:j_,isURLSearchParams:B_,isTypedArray:W_,isFileList:P_,forEach:Ro,merge:Wa,extend:F_,trim:q_,stripBOM:L_,inherits:U_,toFlatObject:K_,kindOf:zs,kindOfTest:Wi,endsWith:V_,toArray:z_,forEachEntry:G_,matchAll:H_,isHTMLForm:X_,hasOwnProperty:kl,hasOwnProp:kl,reduceDescriptors:Nu,freezeMethods:Q_,toObjectSet:Y_,toCamelCase:J_,noop:em,toFiniteNumber:tm,findKey:Eu,global:cr,isContextDefined:Bu,ALPHABET:Du,generateString:im,isSpecCompliantForm:nm,toJSONObject:rm,isAsyncFn:om,isThenable:sm,setImmediate:Ru,asap:am};function ye(e,t,i,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}D.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const $u=ye.prototype,qu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{qu[e]={value:e}});Object.defineProperties(ye,qu);Object.defineProperty($u,"isAxiosError",{value:!0});ye.from=(e,t,i,n,r,o)=>{const s=Object.create($u);return D.toFlatObject(e,s,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ye.call(s,e.message,t,i,n,r),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const cm=null;function Ga(e){return D.isPlainObject(e)||D.isArray(e)}function Fu(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function Al(e,t,i){return e?e.concat(t).map(function(r,o){return r=Fu(r),!i&&o?"["+r+"]":r}).join(i?".":""):t}function lm(e){return D.isArray(e)&&!e.some(Ga)}const dm=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function Hs(e,t,i){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=D.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,I){return!D.isUndefined(I[T])});const n=i.metaTokens,r=i.visitor||u,o=i.dots,s=i.indexes,c=(i.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(r))throw new TypeError("visitor must be a function");function l(x){if(x===null)return"";if(D.isDate(x))return x.toISOString();if(!c&&D.isBlob(x))throw new ye("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(x)||D.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,T,I){let E=x;if(x&&!I&&typeof x=="object"){if(D.endsWith(T,"{}"))T=n?T:T.slice(0,-2),x=JSON.stringify(x);else if(D.isArray(x)&&lm(x)||(D.isFileList(x)||D.endsWith(T,"[]"))&&(E=D.toArray(x)))return T=Fu(T),E.forEach(function(N,F){!(D.isUndefined(N)||N===null)&&t.append(s===!0?Al([T],F,o):s===null?T:T+"[]",l(N))}),!1}return Ga(x)?!0:(t.append(Al(I,T,o),l(x)),!1)}const m=[],g=Object.assign(dm,{defaultVisitor:u,convertValue:l,isVisitable:Ga});function k(x,T){if(!D.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+T.join("."));m.push(x),D.forEach(x,function(E,B){(!(D.isUndefined(E)||E===null)&&r.call(t,E,D.isString(B)?B.trim():B,T,g))===!0&&k(E,T?T.concat(B):[B])}),m.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return k(e),t}function xl(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Nc(e,t){this._pairs=[],e&&Hs(e,this,t)}const Lu=Nc.prototype;Lu.append=function(t,i){this._pairs.push([t,i])};Lu.toString=function(t){const i=t?function(n){return t.call(this,n,xl)}:xl;return this._pairs.map(function(r){return i(r[0])+"="+i(r[1])},"").join("&")};function um(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Uu(e,t,i){if(!t)return e;const n=i&&i.encode||um,r=i&&i.serialize;let o;if(r?o=r(t,i):o=D.isURLSearchParams(t)?t.toString():new Nc(t,i).toString(n),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class fm{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Sl=fm,Ku={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hm=typeof URLSearchParams<"u"?URLSearchParams:Nc,pm=typeof FormData<"u"?FormData:null,_m=typeof Blob<"u"?Blob:null,mm={isBrowser:!0,classes:{URLSearchParams:hm,FormData:pm,Blob:_m},protocols:["http","https","file","blob","url","data"]},Dc=typeof window<"u"&&typeof document<"u",Ha=typeof navigator=="object"&&navigator||void 0,gm=Dc&&(!Ha||["ReactNative","NativeScript","NS"].indexOf(Ha.product)<0),bm=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),wm=Dc&&window.location.href||"http://localhost",ym=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dc,hasStandardBrowserEnv:gm,hasStandardBrowserWebWorkerEnv:bm,navigator:Ha,origin:wm},Symbol.toStringTag,{value:"Module"})),yi={...ym,...mm};function vm(e,t){return Hs(e,new yi.classes.URLSearchParams,Object.assign({visitor:function(i,n,r,o){return yi.isNode&&D.isBuffer(i)?(this.append(n,i.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function km(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Cm(e){const t={},i=Object.keys(e);let n;const r=i.length;let o;for(n=0;n<r;n++)o=i[n],t[o]=e[o];return t}function Vu(e){function t(i,n,r,o){let s=i[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),c=o>=i.length;return s=!s&&D.isArray(r)?r.length:s,c?(D.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!a):((!r[s]||!D.isObject(r[s]))&&(r[s]=[]),t(i,n,r[s],o)&&D.isArray(r[s])&&(r[s]=Cm(r[s])),!a)}if(D.isFormData(e)&&D.isFunction(e.entries)){const i={};return D.forEachEntry(e,(n,r)=>{t(km(n),r,i,0)}),i}return null}function Am(e,t,i){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(e)}const Rc={transitional:Ku,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const n=i.getContentType()||"",r=n.indexOf("application/json")>-1,o=D.isObject(t);if(o&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return r?JSON.stringify(Vu(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return vm(t,this.formSerializer).toString();if((a=D.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Hs(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||r?(i.setContentType("application/json",!1),Am(t)):t}],transformResponse:[function(t){const i=this.transitional||Rc.transitional,n=i&&i.forcedJSONParsing,r=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(n&&!this.responseType||r)){const s=!(i&&i.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?ye.from(a,ye.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yi.classes.FormData,Blob:yi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{Rc.headers[e]={}});const $c=Rc,xm=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sm=e=>{const t={};let i,n,r;return e&&e.split(`
`).forEach(function(s){r=s.indexOf(":"),i=s.substring(0,r).trim().toLowerCase(),n=s.substring(r+1).trim(),!(!i||t[i]&&xm[i])&&(i==="set-cookie"?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)}),t},Tl=Symbol("internals");function so(e){return e&&String(e).trim().toLowerCase()}function ds(e){return e===!1||e==null?e:D.isArray(e)?e.map(ds):String(e)}function Tm(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}const Mm=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ba(e,t,i,n,r){if(D.isFunction(n))return n.call(this,t,i);if(r&&(t=i),!!D.isString(t)){if(D.isString(n))return t.indexOf(n)!==-1;if(D.isRegExp(n))return n.test(t)}}function Om(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n)}function Im(e,t){const i=D.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+i,{value:function(r,o,s){return this[n].call(this,t,r,o,s)},configurable:!0})})}class Xs{constructor(t){t&&this.set(t)}set(t,i,n){const r=this;function o(a,c,l){const u=so(c);if(!u)throw new Error("header name must be a non-empty string");const m=D.findKey(r,u);(!m||r[m]===void 0||l===!0||l===void 0&&r[m]!==!1)&&(r[m||c]=ds(a))}const s=(a,c)=>D.forEach(a,(l,u)=>o(l,u,c));if(D.isPlainObject(t)||t instanceof this.constructor)s(t,i);else if(D.isString(t)&&(t=t.trim())&&!Mm(t))s(Sm(t),i);else if(D.isHeaders(t))for(const[a,c]of t.entries())o(c,a,n);else t!=null&&o(i,t,n);return this}get(t,i){if(t=so(t),t){const n=D.findKey(this,t);if(n){const r=this[n];if(!i)return r;if(i===!0)return Tm(r);if(D.isFunction(i))return i.call(this,r,n);if(D.isRegExp(i))return i.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=so(t),t){const n=D.findKey(this,t);return!!(n&&this[n]!==void 0&&(!i||ba(this,this[n],n,i)))}return!1}delete(t,i){const n=this;let r=!1;function o(s){if(s=so(s),s){const a=D.findKey(n,s);a&&(!i||ba(n,n[a],a,i))&&(delete n[a],r=!0)}}return D.isArray(t)?t.forEach(o):o(t),r}clear(t){const i=Object.keys(this);let n=i.length,r=!1;for(;n--;){const o=i[n];(!t||ba(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const i=this,n={};return D.forEach(this,(r,o)=>{const s=D.findKey(n,o);if(s){i[s]=ds(r),delete i[o];return}const a=t?Om(o):String(o).trim();a!==o&&delete i[o],i[a]=ds(r),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return D.forEach(this,(n,r)=>{n!=null&&n!==!1&&(i[r]=t&&D.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const n=new this(t);return i.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[Tl]=this[Tl]={accessors:{}}).accessors,r=this.prototype;function o(s){const a=so(s);n[a]||(Im(r,s),n[a]=!0)}return D.isArray(t)?t.forEach(o):o(t),this}}Xs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(Xs.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[i]=n}}});D.freezeMethods(Xs);const Fi=Xs;function wa(e,t){const i=this||$c,n=t||i,r=Fi.from(n.headers);let o=n.data;return D.forEach(e,function(a){o=a.call(i,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function zu(e){return!!(e&&e.__CANCEL__)}function Qr(e,t,i){ye.call(this,e??"canceled",ye.ERR_CANCELED,t,i),this.name="CanceledError"}D.inherits(Qr,ye,{__CANCEL__:!0});function Wu(e,t,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(new ye("Request failed with status code "+i.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function Pm(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function jm(e,t){e=e||10;const i=new Array(e),n=new Array(e);let r=0,o=0,s;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=n[o];s||(s=l),i[r]=c,n[r]=l;let m=o,g=0;for(;m!==r;)g+=i[m++],m=m%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),l-s<t)return;const k=u&&l-u;return k?Math.round(g*1e3/k):void 0}}function Em(e,t){let i=0,n=1e3/t,r,o;const s=(l,u=Date.now())=>{i=u,r=null,o&&(clearTimeout(o),o=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),m=u-i;m>=n?s(l,u):(r=l,o||(o=setTimeout(()=>{o=null,s(r)},n-m)))},()=>r&&s(r)]}const Ts=(e,t,i=3)=>{let n=0;const r=jm(50,250);return Em(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,c=s-n,l=r(c),u=s<=a;n=s;const m={loaded:s,total:a,progress:a?s/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-s)/l:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(m)},i)},Ml=(e,t)=>{const i=e!=null;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},Ol=e=>(...t)=>D.asap(()=>e(...t)),Bm=yi.hasStandardBrowserEnv?function(){const t=yi.navigator&&/(msie|trident)/i.test(yi.navigator.userAgent),i=document.createElement("a");let n;function r(o){let s=o;return t&&(i.setAttribute("href",s),s=i.href),i.setAttribute("href",s),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=r(window.location.href),function(s){const a=D.isString(s)?r(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}(),Nm=yi.hasStandardBrowserEnv?{write(e,t,i,n,r,o){const s=[e+"="+encodeURIComponent(t)];D.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),D.isString(n)&&s.push("path="+n),D.isString(r)&&s.push("domain="+r),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Dm(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Rm(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Gu(e,t){return e&&!Dm(t)?Rm(e,t):t}const Il=e=>e instanceof Fi?{...e}:e;function pr(e,t){t=t||{};const i={};function n(l,u,m){return D.isPlainObject(l)&&D.isPlainObject(u)?D.merge.call({caseless:m},l,u):D.isPlainObject(u)?D.merge({},u):D.isArray(u)?u.slice():u}function r(l,u,m){if(D.isUndefined(u)){if(!D.isUndefined(l))return n(void 0,l,m)}else return n(l,u,m)}function o(l,u){if(!D.isUndefined(u))return n(void 0,u)}function s(l,u){if(D.isUndefined(u)){if(!D.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function a(l,u,m){if(m in t)return n(l,u);if(m in e)return n(void 0,l)}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(l,u)=>r(Il(l),Il(u),!0)};return D.forEach(Object.keys(Object.assign({},e,t)),function(u){const m=c[u]||r,g=m(e[u],t[u],u);D.isUndefined(g)&&m!==a||(i[u]=g)}),i}const Hu=e=>{const t=pr({},e);let{data:i,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:o,headers:s,auth:a}=t;t.headers=s=Fi.from(s),t.url=Uu(Gu(t.baseURL,t.url),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(D.isFormData(i)){if(yi.hasStandardBrowserEnv||yi.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[l,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];s.setContentType([l||"multipart/form-data",...u].join("; "))}}if(yi.hasStandardBrowserEnv&&(n&&D.isFunction(n)&&(n=n(t)),n||n!==!1&&Bm(t.url))){const l=r&&o&&Nm.read(o);l&&s.set(r,l)}return t},$m=typeof XMLHttpRequest<"u",qm=$m&&function(e){return new Promise(function(i,n){const r=Hu(e);let o=r.data;const s=Fi.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=r,u,m,g,k,x;function T(){k&&k(),x&&x(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let I=new XMLHttpRequest;I.open(r.method.toUpperCase(),r.url,!0),I.timeout=r.timeout;function E(){if(!I)return;const N=Fi.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),H={data:!a||a==="text"||a==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:N,config:e,request:I};Wu(function(ee){i(ee),T()},function(ee){n(ee),T()},H),I=null}"onloadend"in I?I.onloadend=E:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(E)},I.onabort=function(){I&&(n(new ye("Request aborted",ye.ECONNABORTED,e,I)),I=null)},I.onerror=function(){n(new ye("Network Error",ye.ERR_NETWORK,e,I)),I=null},I.ontimeout=function(){let F=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const H=r.transitional||Ku;r.timeoutErrorMessage&&(F=r.timeoutErrorMessage),n(new ye(F,H.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,e,I)),I=null},o===void 0&&s.setContentType(null),"setRequestHeader"in I&&D.forEach(s.toJSON(),function(F,H){I.setRequestHeader(H,F)}),D.isUndefined(r.withCredentials)||(I.withCredentials=!!r.withCredentials),a&&a!=="json"&&(I.responseType=r.responseType),l&&([g,x]=Ts(l,!0),I.addEventListener("progress",g)),c&&I.upload&&([m,k]=Ts(c),I.upload.addEventListener("progress",m),I.upload.addEventListener("loadend",k)),(r.cancelToken||r.signal)&&(u=N=>{I&&(n(!N||N.type?new Qr(null,e,I):N),I.abort(),I=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const B=Pm(r.url);if(B&&yi.protocols.indexOf(B)===-1){n(new ye("Unsupported protocol "+B+":",ye.ERR_BAD_REQUEST,e));return}I.send(o||null)})},Fm=(e,t)=>{let i=new AbortController,n;const r=function(c){if(!n){n=!0,s();const l=c instanceof Error?c:this.reason;i.abort(l instanceof ye?l:new Qr(l instanceof Error?l.message:l))}};let o=t&&setTimeout(()=>{r(new ye(`timeout ${t} of ms exceeded`,ye.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",r):c.unsubscribe(r))}),e=null)};e.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",r));const{signal:a}=i;return a.unsubscribe=s,[a,()=>{o&&clearTimeout(o),o=null}]},Lm=Fm,Um=function*(e,t){let i=e.byteLength;if(!t||i<t){yield e;return}let n=0,r;for(;n<i;)r=n+t,yield e.slice(n,r),n=r},Km=async function*(e,t,i){for await(const n of e)yield*Um(ArrayBuffer.isView(n)?n:await i(String(n)),t)},Pl=(e,t,i,n,r)=>{const o=Km(e,t,r);let s=0,a,c=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:m}=await o.next();if(u){c(),l.close();return}let g=m.byteLength;if(i){let k=s+=g;i(k)}l.enqueue(new Uint8Array(m))}catch(u){throw c(u),u}},cancel(l){return c(l),o.return()}},{highWaterMark:2})},Js=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Xu=Js&&typeof ReadableStream=="function",Xa=Js&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ju=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Vm=Xu&&Ju(()=>{let e=!1;const t=new Request(yi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),jl=64*1024,Ja=Xu&&Ju(()=>D.isReadableStream(new Response("").body)),Ms={stream:Ja&&(e=>e.body)};Js&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ms[t]&&(Ms[t]=D.isFunction(e[t])?i=>i[t]():(i,n)=>{throw new ye(`Response type '${t}' is not supported`,ye.ERR_NOT_SUPPORT,n)})})})(new Response);const zm=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await Xa(e)).byteLength},Wm=async(e,t)=>{const i=D.toFiniteNumber(e.getContentLength());return i??zm(t)},Gm=Js&&(async e=>{let{url:t,method:i,data:n,signal:r,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:m="same-origin",fetchOptions:g}=Hu(e);l=l?(l+"").toLowerCase():"text";let[k,x]=r||o||s?Lm([r,o],s):[],T,I;const E=()=>{!T&&setTimeout(()=>{k&&k.unsubscribe()}),T=!0};let B;try{if(c&&Vm&&i!=="get"&&i!=="head"&&(B=await Wm(u,n))!==0){let ee=new Request(t,{method:"POST",body:n,duplex:"half"}),me;if(D.isFormData(n)&&(me=ee.headers.get("content-type"))&&u.setContentType(me),ee.body){const[be,ie]=Ml(B,Ts(Ol(c)));n=Pl(ee.body,jl,be,ie,Xa)}}D.isString(m)||(m=m?"include":"omit");const N="credentials"in Request.prototype;I=new Request(t,{...g,signal:k,method:i.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:N?m:void 0});let F=await fetch(I);const H=Ja&&(l==="stream"||l==="response");if(Ja&&(a||H)){const ee={};["status","statusText","headers"].forEach(z=>{ee[z]=F[z]});const me=D.toFiniteNumber(F.headers.get("content-length")),[be,ie]=a&&Ml(me,Ts(Ol(a),!0))||[];F=new Response(Pl(F.body,jl,be,()=>{ie&&ie(),H&&E()},Xa),ee)}l=l||"text";let K=await Ms[D.findKey(Ms,l)||"text"](F,e);return!H&&E(),x&&x(),await new Promise((ee,me)=>{Wu(ee,me,{data:K,headers:Fi.from(F.headers),status:F.status,statusText:F.statusText,config:e,request:I})})}catch(N){throw E(),N&&N.name==="TypeError"&&/fetch/i.test(N.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,e,I),{cause:N.cause||N}):ye.from(N,N&&N.code,e,I)}}),Za={http:cm,xhr:qm,fetch:Gm};D.forEach(Za,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const El=e=>`- ${e}`,Hm=e=>D.isFunction(e)||e===null||e===!1,Zu={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let i,n;const r={};for(let o=0;o<t;o++){i=e[o];let s;if(n=i,!Hm(i)&&(n=Za[(s=String(i)).toLowerCase()],n===void 0))throw new ye(`Unknown adapter '${s}'`);if(n)break;r[s||"#"+o]=n}if(!n){const o=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?`since :
`+o.map(El).join(`
`):" "+El(o[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:Za};function ya(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qr(null,e)}function Bl(e){return ya(e),e.headers=Fi.from(e.headers),e.data=wa.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Zu.getAdapter(e.adapter||$c.adapter)(e).then(function(n){return ya(e),n.data=wa.call(e,e.transformResponse,n),n.headers=Fi.from(n.headers),n},function(n){return zu(n)||(ya(e),n&&n.response&&(n.response.data=wa.call(e,e.transformResponse,n.response),n.response.headers=Fi.from(n.response.headers))),Promise.reject(n)})}const Qu="1.7.5",qc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qc[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Nl={};qc.transitional=function(t,i,n){function r(o,s){return"[Axios v"+Qu+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return(o,s,a)=>{if(t===!1)throw new ye(r(s," has been removed"+(i?" in "+i:"")),ye.ERR_DEPRECATED);return i&&!Nl[s]&&(Nl[s]=!0,console.warn(r(s," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(o,s,a):!0}};function Xm(e,t,i){if(typeof e!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const o=n[r],s=t[o];if(s){const a=e[o],c=a===void 0||s(a,o,e);if(c!==!0)throw new ye("option "+o+" must be "+c,ye.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ye("Unknown option "+o,ye.ERR_BAD_OPTION)}}const Qa={assertOptions:Xm,validators:qc},mn=Qa.validators;class Os{constructor(t){this.defaults=t,this.interceptors={request:new Sl,response:new Sl}}async request(t,i){try{return await this._request(t,i)}catch(n){if(n instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=pr(this.defaults,i);const{transitional:n,paramsSerializer:r,headers:o}=i;n!==void 0&&Qa.assertOptions(n,{silentJSONParsing:mn.transitional(mn.boolean),forcedJSONParsing:mn.transitional(mn.boolean),clarifyTimeoutError:mn.transitional(mn.boolean)},!1),r!=null&&(D.isFunction(r)?i.paramsSerializer={serialize:r}:Qa.assertOptions(r,{encode:mn.function,serialize:mn.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let s=o&&D.merge(o.common,o[i.method]);o&&D.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),i.headers=Fi.concat(s,o);const a=[];let c=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(i)===!1||(c=c&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});const l=[];this.interceptors.response.forEach(function(T){l.push(T.fulfilled,T.rejected)});let u,m=0,g;if(!c){const x=[Bl.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,l),g=x.length,u=Promise.resolve(i);m<g;)u=u.then(x[m++],x[m++]);return u}g=a.length;let k=i;for(m=0;m<g;){const x=a[m++],T=a[m++];try{k=x(k)}catch(I){T.call(this,I);break}}try{u=Bl.call(this,k)}catch(x){return Promise.reject(x)}for(m=0,g=l.length;m<g;)u=u.then(l[m++],l[m++]);return u}getUri(t){t=pr(this.defaults,t);const i=Gu(t.baseURL,t.url);return Uu(i,t.params,t.paramsSerializer)}}D.forEach(["delete","get","head","options"],function(t){Os.prototype[t]=function(i,n){return this.request(pr(n||{},{method:t,url:i,data:(n||{}).data}))}});D.forEach(["post","put","patch"],function(t){function i(n){return function(o,s,a){return this.request(pr(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Os.prototype[t]=i(),Os.prototype[t+"Form"]=i(!0)});const us=Os;class Fc{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(o){i=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const s=new Promise(a=>{n.subscribe(a),o=a}).then(r);return s.cancel=function(){n.unsubscribe(o)},s},t(function(o,s,a){n.reason||(n.reason=new Qr(o,s,a),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new Fc(function(r){t=r}),cancel:t}}}const Jm=Fc;function Zm(e){return function(i){return e.apply(null,i)}}function Qm(e){return D.isObject(e)&&e.isAxiosError===!0}const Ya={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ya).forEach(([e,t])=>{Ya[t]=e});const Ym=Ya;function Yu(e){const t=new us(e),i=Iu(us.prototype.request,t);return D.extend(i,us.prototype,t,{allOwnKeys:!0}),D.extend(i,t,null,{allOwnKeys:!0}),i.create=function(r){return Yu(pr(e,r))},i}const Kt=Yu($c);Kt.Axios=us;Kt.CanceledError=Qr;Kt.CancelToken=Jm;Kt.isCancel=zu;Kt.VERSION=Qu;Kt.toFormData=Hs;Kt.AxiosError=ye;Kt.Cancel=Kt.CanceledError;Kt.all=function(t){return Promise.all(t)};Kt.spread=Zm;Kt.isAxiosError=Qm;Kt.mergeConfig=pr;Kt.AxiosHeaders=Fi;Kt.formToJSON=e=>Vu(D.isHTMLForm(e)?new FormData(e):e);Kt.getAdapter=Zu.getAdapter;Kt.HttpStatusCode=Ym;Kt.default=Kt;const eg=Kt,tg="1.6.0",ig="1.32.0",ng={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class ef extends Error{}class tf extends ef{constructor(t,i){super(t),this.code=i,this.type=ng[i]??"ServerError"}}class rg extends ef{constructor(t,i,n){super(t),this.status=i,this.statusText=n}}var nf=e=>{throw TypeError(e)},Lc=(e,t,i)=>t.has(e)||nf("Cannot "+i),qt=(e,t,i)=>(Lc(e,t,"read from private field"),i?i.call(e):t.get(e)),Zn=(e,t,i)=>t.has(e)?nf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Dr=(e,t,i,n)=>(Lc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),rf=(e,t,i)=>(Lc(e,t,"access private method"),i),og=(e,t,i,n)=>({set _(r){Dr(e,t,r,i)},get _(){return qt(e,t,n)}}),ir,go,ln,lr,jo,Rr,Is,of,sf;function sg(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const ag={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class cg{constructor(t,i={}){if(Zn(this,Is),Zn(this,ir,0),Zn(this,go,0),Zn(this,ln,null),Zn(this,lr,null),Zn(this,jo,new Set),Zn(this,Rr,new Map),this.endpoint=t,this.options={...ag,...i},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=sg(this.endpoint))}async makeRequest(t,i){const n=await rf(this,Is,of).call(this);return new Promise((r,o)=>{Dr(this,ir,qt(this,ir)+1),qt(this,Rr).set(qt(this,ir),{resolve:r,reject:o,timeout:setTimeout(()=>{qt(this,Rr).delete(qt(this,ir)),o(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:qt(this,ir),method:t,params:i}))}).then(({error:r,result:o})=>{if(r)throw new tf(r.message,r.code);return o})}async subscribe(t){const i=new lg(t);return qt(this,jo).add(i),await i.subscribe(this),()=>i.unsubscribe(this)}}ir=new WeakMap;go=new WeakMap;ln=new WeakMap;lr=new WeakMap;jo=new WeakMap;Rr=new WeakMap;Is=new WeakSet;of=function(){return qt(this,lr)?qt(this,lr):(Dr(this,lr,new Promise(e=>{var t;(t=qt(this,ln))==null||t.close(),Dr(this,ln,new this.options.WebSocketConstructor(this.endpoint)),qt(this,ln).addEventListener("open",()=>{Dr(this,go,0),e(qt(this,ln))}),qt(this,ln).addEventListener("close",()=>{og(this,go)._++,qt(this,go)<=this.options.maxReconnects&&setTimeout(()=>{rf(this,Is,sf).call(this)},this.options.reconnectTimeout)}),qt(this,ln).addEventListener("message",({data:i})=>{let n;try{n=JSON.parse(i)}catch(r){console.error(new Error(`Failed to parse RPC message: ${i}`,{cause:r}));return}if("id"in n&&n.id!=null&&qt(this,Rr).has(n.id)){const{resolve:r,timeout:o}=qt(this,Rr).get(n.id);clearTimeout(o),r(n)}else if("params"in n){const{params:r}=n;qt(this,jo).forEach(o=>{o.subscriptionId===r.subscription&&r.subscription===o.subscriptionId&&o.onMessage(r.result)})}})})),qt(this,lr))};sf=async function(){var e;return(e=qt(this,ln))==null||e.close(),Dr(this,lr,null),Promise.allSettled([...qt(this,jo)].map(t=>t.subscribe(this)))};class lg{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:i}=this;return this.subscribed=!1,i==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[i]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const i=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=i)}}var af=e=>{throw TypeError(e)},Uc=(e,t,i)=>t.has(e)||af("Cannot "+i),xi=(e,t,i)=>(Uc(e,t,"read from private field"),i?i.call(e):t.get(e)),Wo=(e,t,i)=>t.has(e)?af("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ec=(e,t,i,n)=>(Uc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),dg=(e,t,i)=>(Uc(e,t,"access private method"),i),fo,Di,bo,tc,cf;class ug{constructor(t){Wo(this,tc),Wo(this,fo,0),Wo(this,Di),Wo(this,bo),ec(this,Di,t)}fetch(t,i){const n=xi(this,Di).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(t,i)}async request(t){var r,o;ec(this,fo,xi(this,fo)+1);const i=await this.fetch(((r=xi(this,Di).rpc)==null?void 0:r.url)??xi(this,Di).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":tg,"Client-Target-Api-Version":ig,...(o=xi(this,Di).rpc)==null?void 0:o.headers},body:JSON.stringify({jsonrpc:"2.0",id:xi(this,fo),method:t.method,params:t.params})});if(!i.ok)throw new rg(`Unexpected status code: ${i.status}`,i.status,i.statusText);const n=await i.json();if("error"in n&&n.error!=null)throw new tf(n.error.message,n.error.code);return n.result}async subscribe(t){const i=await dg(this,tc,cf).call(this).subscribe(t);return async()=>!!await i()}}fo=new WeakMap;Di=new WeakMap;bo=new WeakMap;tc=new WeakSet;cf=function(){var e;if(!xi(this,bo)){const t=xi(this,Di).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");ec(this,bo,new cg(((e=xi(this,Di).websocket)==null?void 0:e.url)??xi(this,Di).url,{WebSocketConstructor:t,...xi(this,Di).websocket}))}return xi(this,bo)};const fg=Symbol.for("@mysten/SuiClient");class fs{get[fg](){return!0}constructor(t){this.transport=t.transport??new ug({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,i){return await this.transport.request({method:t,params:i})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!Tr(ze(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(n=>{if(!n||!Tr(ze(n)))throw new Error(`Invalid Sui Object id ${n}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!Ra(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(n=>{if(!Ra(n))throw new Error(`Invalid Transaction digest ${n}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock({transactionBlock:t,signature:i,options:n,requestType:r}){const o=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t=="string"?t:Ht(t),Array.isArray(i)?i:[i],n]});if(r==="WaitForLocalExecution")try{await this.waitForTransaction({digest:o.digest})}catch{}return o}async signAndExecuteTransaction({transaction:t,signer:i,...n}){let r;t instanceof Uint8Array?r=t:(t.setSenderIfNotSet(i.toSuiAddress()),r=await t.build({client:this}));const{signature:o,bytes:s}=await i.signTransaction(r);return this.executeTransactionBlock({transactionBlock:s,signature:o,...n})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(i=>{if(!i||!Tr(ze(i)))throw new Error(`Invalid Sui Stake id ${i}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var n;let i;if(Do(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),i=Ht(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")i=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)i=Ht(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,i,(n=t.gasPrice)==null?void 0:n.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Ht(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!Tr(ze(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),i=Ao(t.digest);return Fr(i.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...i}){const{nextCursor:n,hasNextPage:r,data:o}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[i.address,i.cursor,i.limit]});return{hasNextPage:r,nextCursor:n,data:o.map(s=>Td(s,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransaction({signal:t,timeout:i=60*1e3,pollInterval:n=2*1e3,...r}){const o=AbortSignal.timeout(i),s=new Promise((a,c)=>{o.addEventListener("abort",()=>c(o.reason))});for(s.catch(()=>{});!o.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(r)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),s])}}throw o.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}var hg=Object.defineProperty,pg=(e,t,i)=>t in e?hg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,_g=(e,t,i)=>(pg(e,typeof t!="symbol"?t+"":t,i),i),ki=5*60*1e3,Q=24*60*60*1e3;function Ve(e){return Date.parse(new Date().toString())+e}var oi=class{constructor(e,t=0){X(this,"overdueTime");X(this,"value");this.overdueTime=t,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};J.config({precision:64,rounding:J.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var ei=J,W=class extends Error{constructor(t,i){super(t);X(this,"message");X(this,"errorCode");this.message=t,this.errorCode=i}static isClmmpoolsErrorCode(t,i){return t instanceof W&&t.errorCode===i}},se=new A(0),Yi=new A(1),Zs=new A(2);Zs.pow(new A(128));var Kr=Zs.pow(new A(64)).sub(Yi),mg=Zs.pow(new A(128)).sub(Yi),ve=class{static toX64_BN(e){return e.mul(new A(2).pow(new A(64)))}static toX64_Decimal(e){return e.mul(ei.pow(2,64))}static toX64(e){return new A(e.mul(ei.pow(2,64)).floor().toFixed())}static fromX64(e){return new ei(e.toString()).mul(ei.pow(2,-64))}static fromX64_Decimal(e){return e.mul(ei.pow(2,-64))}static fromX64_BN(e){return e.div(new A(2).pow(new A(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(Kr).gt(se)&&(t=t.add(Yi)),t}static divRoundUp(e,t){return e.mod(t).eq(se)?e.div(t):e.div(t).add(new A(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(mg):e.sub(t)}static checkUnsignedSub(e,t){const i=e.sub(t);if(i.isNeg())throw new W("Unsigned integer sub overflow","UnsignedIntegerOverflow");return i}static checkMul(e,t,i){const n=e.mul(t);if(this.isOverflow(n,i))throw new W("Multiplication overflow","MultiplicationOverflow");return n}static checkMulDivFloor(e,t,i,n){if(i.eq(se))throw new W("Devide by zero","DivideByZero");const r=e.mul(t).div(i);if(this.isOverflow(r,n))throw new W("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivCeil(e,t,i,n){if(i.eq(se))throw new W("Devide by zero","DivideByZero");const r=e.mul(t).add(i.sub(Yi)).div(i);if(this.isOverflow(r,n))throw new W("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivRound(e,t,i,n){if(i.eq(se))throw new W("Devide by zero","DivideByZero");const r=e.mul(t.add(i.shrn(1))).div(i);if(this.isOverflow(r,n))throw new W("Multiplication div overflow","MulDivOverflow");return r}static checkMulShiftRight(e,t,i,n){const r=e.mul(t).div(new A(2).pow(new A(i)));if(this.isOverflow(r,n))throw new W("Multiplication shift right overflow","MulShiftRightOverflow");return r}static checkMulShiftRight64RoundUpIf(e,t,i,n){const r=e.mul(t),s=n&&r.and(Kr).gt(se)?r.shrn(64).add(Yi):r.shrn(64);if(this.isOverflow(s,i))throw new W("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftLeft(e,t,i,n){const r=e.mul(t).shln(i);if(this.isOverflow(r,n))throw new W("Multiplication shift left overflow","MulShiftLeftOverflow");return r}static checkDivRoundUpIf(e,t,i){if(t.eq(se))throw new W("Devide by zero","DivideByZero");return i?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(Zs.pow(new A(t)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(se)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new A("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new A(1)))}static neg_from(e){return e.eq(se)?e:this.u128_neg(e).add(new A(1)).or(new A(1).shln(127))}};function gg(e){return{coinA:e.coinTypeA,coinB:e.coinTypeB,currentSqrtPrice:new A(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new A(e.fee_growth_global_a),feeGrowthGlobalB:new A(e.fee_growth_global_b),feeProtocolCoinA:new A(e.fee_protocol_coin_a),feeProtocolCoinB:new A(e.fee_protocol_coin_b),feeRate:new A(e.fee_rate),liquidity:new A(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:""}}var ic=443636,nc=-443636,Qs="79226673515401279992447579055",Ys="4295048016",Ir=new A(1e6),L="0x0000000000000000000000000000000000000000000000000000000000000006",bg="partner",wo="pool_script",Mn="pool_script_v2",lf="pool_script_v3",dr="router",va="router_with_partner",Vi="fetcher_script",wg="expect_swap",Dl="utils",ka="custodian_v2",yg="clob_v2",vg="endpoints_v2",df=(e=>(e.Deleted="Deleted",e.Exists="Exists",e.NotExists="NotExists",e))(df||{});function j(e){if(e.config===void 0)throw new W(`package: ${e.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return e.config}var kg=14,Cg="59543866431248",Ag="184467440737095516",xg="15793534762490258745",Sg=443636;function Tg(e,t,i){const n=e.toTwos(i).shln(t);return n.imaskn(i+1),n.fromTwos(i)}function Fe(e,t,i){const n=e.toTwos(i).shrn(t);return n.imaskn(i-t+1),n.fromTwos(i-t)}function Mg(e){let t;return e&1?t=new A("79232123823359799118286999567"):t=new A("79228162514264337593543950336"),e&2&&(t=Fe(t.mul(new A("79236085330515764027303304731")),96,256)),e&4&&(t=Fe(t.mul(new A("79244008939048815603706035061")),96,256)),e&8&&(t=Fe(t.mul(new A("79259858533276714757314932305")),96,256)),e&16&&(t=Fe(t.mul(new A("79291567232598584799939703904")),96,256)),e&32&&(t=Fe(t.mul(new A("79355022692464371645785046466")),96,256)),e&64&&(t=Fe(t.mul(new A("79482085999252804386437311141")),96,256)),e&128&&(t=Fe(t.mul(new A("79736823300114093921829183326")),96,256)),e&256&&(t=Fe(t.mul(new A("80248749790819932309965073892")),96,256)),e&512&&(t=Fe(t.mul(new A("81282483887344747381513967011")),96,256)),e&1024&&(t=Fe(t.mul(new A("83390072131320151908154831281")),96,256)),e&2048&&(t=Fe(t.mul(new A("87770609709833776024991924138")),96,256)),e&4096&&(t=Fe(t.mul(new A("97234110755111693312479820773")),96,256)),e&8192&&(t=Fe(t.mul(new A("119332217159966728226237229890")),96,256)),e&16384&&(t=Fe(t.mul(new A("179736315981702064433883588727")),96,256)),e&32768&&(t=Fe(t.mul(new A("407748233172238350107850275304")),96,256)),e&65536&&(t=Fe(t.mul(new A("2098478828474011932436660412517")),96,256)),e&131072&&(t=Fe(t.mul(new A("55581415166113811149459800483533")),96,256)),e&262144&&(t=Fe(t.mul(new A("38992368544603139932233054999993551")),96,256)),Fe(t,32,256)}function Og(e){const t=Math.abs(e);let i;return t&1?i=new A("18445821805675392311"):i=new A("18446744073709551616"),t&2&&(i=Fe(i.mul(new A("18444899583751176498")),64,256)),t&4&&(i=Fe(i.mul(new A("18443055278223354162")),64,256)),t&8&&(i=Fe(i.mul(new A("18439367220385604838")),64,256)),t&16&&(i=Fe(i.mul(new A("18431993317065449817")),64,256)),t&32&&(i=Fe(i.mul(new A("18417254355718160513")),64,256)),t&64&&(i=Fe(i.mul(new A("18387811781193591352")),64,256)),t&128&&(i=Fe(i.mul(new A("18329067761203520168")),64,256)),t&256&&(i=Fe(i.mul(new A("18212142134806087854")),64,256)),t&512&&(i=Fe(i.mul(new A("17980523815641551639")),64,256)),t&1024&&(i=Fe(i.mul(new A("17526086738831147013")),64,256)),t&2048&&(i=Fe(i.mul(new A("16651378430235024244")),64,256)),t&4096&&(i=Fe(i.mul(new A("15030750278693429944")),64,256)),t&8192&&(i=Fe(i.mul(new A("12247334978882834399")),64,256)),t&16384&&(i=Fe(i.mul(new A("8131365268884726200")),64,256)),t&32768&&(i=Fe(i.mul(new A("3584323654723342297")),64,256)),t&65536&&(i=Fe(i.mul(new A("696457651847595233")),64,256)),t&131072&&(i=Fe(i.mul(new A("26294789957452057")),64,256)),t&262144&&(i=Fe(i.mul(new A("37481735321082")),64,256)),i}var Y=class{static priceToSqrtPriceX64(e,t,i){return ve.toX64(e.mul(ei.pow(10,i-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,i){return ve.fromX64(e).pow(2).mul(ei.pow(10,t-i))}static tickIndexToSqrtPriceX64(e){return e>0?new A(Mg(e)):new A(Og(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new A(Qs))||e.lt(new A(Ys)))throw new W("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const t=e.bitLength()-1,i=new A(t-64),n=Tg(i,32,128);let r=new A("8000000000000000","hex"),o=0,s=new A(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;r.gt(new A(0))&&o<kg;){a=a.mul(a);const x=a.shrn(127);a=a.shrn(63+x.toNumber()),s=s.add(r.mul(x)),r=r.shrn(1),o+=1}const c=s.shrn(32),u=n.add(c).mul(new A(Cg)),m=Fe(u.sub(new A(Ag)),64,128).toNumber(),g=Fe(u.add(new A(xg)),64,128).toNumber();return m===g?m:Y.tickIndexToSqrtPriceX64(g).lte(e)?g:m}static tickIndexToPrice(e,t,i){return Y.sqrtPriceX64ToPrice(Y.tickIndexToSqrtPriceX64(e),t,i)}static priceToTickIndex(e,t,i){return Y.sqrtPriceX64ToTickIndex(Y.priceToSqrtPriceX64(e,t,i))}static priceToInitializableTickIndex(e,t,i,n){return Y.getInitializableTickIndex(Y.priceToTickIndex(e,t,i),n)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return Y.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return Y.getInitializableTickIndex(e,t)-t}};function Hw(e){const t=[];for(const i of e){const n={objectId:i.objectId,index:Number(Ut(BigInt(i.index)).toString()),sqrtPrice:i.sqrtPrice,liquidityNet:new A(BigInt.asIntN(128,BigInt(BigInt(i.liquidityNet.toString()))).toString()),liquidityGross:i.liquidityGross,feeGrowthOutsideA:i.feeGrowthOutsideA,feeGrowthOutsideB:i.feeGrowthOutsideB,rewardersGrowthOutside:[new A(i.rewardersGrowthOutside[0]),new A(i.rewardersGrowthOutside[1]),new A(i.rewardersGrowthOutside[2])]};t.push(n)}return t}function Ig(e){return M(e).add(M(Sg))}new A(365);new A(24);new A(3600);new A(.5);function Xw(e,t,i,n){const r=Math.max(e,i),s=Math.min(t,n)-r,a=t-e,c=n-i,l=new J(a.toString()),u=new J(c.toString()),m=new J(s.toString());let g=new J("0");return s<0?g=new J("0"):a===s?g=u.div(m):c===s?g=m.div(l):g=m.mul(m).div(u).div(l),g}var Xi=class{static getDefaultSqrtPriceLimit(e){return new A(e?Ys:Qs)}static getDefaultOtherAmountThreshold(e){return e?se:Kr}};function uf(e,t,i,n){if(i.eq(se))return e;const r=ve.checkMulShiftLeft(e,t,64,256),o=t.shln(64),s=ve.checkMul(e,i,256);if(!n&&o.lte(s))throw new W("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=n?ve.checkDivRoundUpIf(r,o.add(s),!0):ve.checkDivRoundUpIf(r,o.sub(s),!0);if(a.lt(new A(Ys)))throw new W("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new A(Qs)))throw new W("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function ff(e,t,i,n){const r=ve.checkDivRoundUpIf(i.shln(64),t,!n),o=n?e.add(r):e.sub(r);if(o.lt(new A(Ys))||o.gt(new A(Qs)))throw new W("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return o}function Pg(e,t,i,n){return n?uf(e,t,i,!0):ff(e,t,i,!0)}function jg(e,t,i,n){return n?ff(e,t,i,!1):uf(e,t,i,!1)}function Rl(e,t,i,n){const r=e.gt(t)?e.sub(t):t.sub(e);if(i.lte(se)||r.eq(se))return se;let o;if(n){const s=new A(i).mul(new A(r)).shln(64),a=t.mul(e),c=s.div(a);o=s.mod(a).eq(se)?c:c.add(Yi)}else{const s=new A(i).mul(new A(r));o=s.and(Kr).gt(se)?s.shrn(64).add(Yi):s.shrn(64)}return o}function $l(e,t,i,n){const r=e.gt(t)?e.sub(t):t.sub(e);if(i.lte(se)||r.eq(se))return se;let o;if(n)o=i.mul(r).shrn(64);else{const s=i.mul(r).shln(64),a=t.mul(e);o=s.div(a)}return o}function Eg(e,t,i,n,r,o){if(i===se)return{amountIn:se,amountOut:se,nextSqrtPrice:t,feeAmount:se};const s=e.gte(t);let a,c,l,u;if(o){const m=ve.checkMulDivFloor(n,ve.checkUnsignedSub(Ir,r),Ir,64),g=Rl(e,t,i,s);g.gt(m)?(a=m,u=ve.checkUnsignedSub(n,m),l=Pg(e,i,m,s)):(a=g,u=ve.checkMulDivCeil(a,r,Ir.sub(r),64),l=t),c=$l(e,l,i,s)}else{const m=$l(e,t,i,s);m.gt(n)?(c=n,l=jg(e,i,n,s)):(c=m,l=t),a=Rl(e,l,i,s),u=ve.checkMulDivCeil(a,r,Ir.sub(r),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:l,feeAmount:u}}function Bg(e,t,i,n,r){let o=i,s=n.liquidity,{currentSqrtPrice:a}=n;const c={amountIn:se,amountOut:se,feeAmount:se,refAmount:se,nextSqrtPrice:se,crossTickNum:0};let l,u;const m=Xi.getDefaultSqrtPriceLimit(e);for(const g of r){if(e&&n.currentTickIndex<g.index||!e&&n.currentTickIndex>=g.index||g===null)continue;e&&m.gt(g.sqrtPrice)||!e&&m.lt(g.sqrtPrice)?l=m:l=g.sqrtPrice;const k=Eg(a,l,s,o,n.feeRate,t);if(k.amountIn.eq(se)||(o=t?o.sub(k.amountIn.add(k.feeAmount)):o.sub(k.amountOut)),c.amountIn=c.amountIn.add(k.amountIn),c.amountOut=c.amountOut.add(k.amountOut),c.feeAmount=c.feeAmount.add(k.feeAmount),k.nextSqrtPrice.eq(g.sqrtPrice)?(u=g.liquidityNet.mul(new A(-1)),e?ve.is_neg(u)?s=s.add(new A(ii(BigInt(u.toString()),128))):s=s.add(u):ve.is_neg(u)?s=s.sub(new A(ii(BigInt(u.toString()),128))):s=s.sub(u),a=g.sqrtPrice):a=k.nextSqrtPrice,c.crossTickNum+=1,o.eq(se))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function Go(e,t,i){const n=A.min(e,t),r=A.max(e,t),o=ve.fromX64_BN(i.mul(r).mul(n)),s=r.sub(n);return o.div(s)}function Ho(e,t,i){const n=A.min(e,t),o=A.max(e,t).sub(n);return i.shln(64).div(o)}var Jt=class{static updateFeeRate(e,t,i,n,r){const o=ve.checkMulDivCeil(t,new A(n),Ir,64),s=i===0?se:ve.checkMulDivFloor(t,new A(i),Ir,64),a=t.mul(o).mul(s);if(r?e.feeProtocolCoinA=e.feeProtocolCoinA.add(o):e.feeProtocolCoinB=e.feeProtocolCoinB.add(o),a.eq(se)||e.liquidity.eq(se))return{refFee:s,clmm:e};const c=a.shln(64).div(e.liquidity);return r?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:s,clmm:e}}static getCoinAmountFromLiquidity(e,t,i,n,r){const o=new ei(e.toString()),s=new ei(t.toString()),a=new ei(i.toString()),c=new ei(n.toString());let l,u;return t.lt(i)?(l=ve.toX64_Decimal(o).mul(c.sub(a)).div(a.mul(c)),u=new ei(0)):t.lt(n)?(l=ve.toX64_Decimal(o).mul(c.sub(s)).div(s.mul(c)),u=ve.fromX64_Decimal(o.mul(s.sub(a)))):(l=new ei(0),u=ve.fromX64_Decimal(o.mul(c.sub(a)))),r?{coinA:new A(l.ceil().toString()),coinB:new A(u.ceil().toString())}:{coinA:new A(l.floor().toString()),coinB:new A(u.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,t,i,n,r,o,s){const a=Y.sqrtPriceX64ToTickIndex(s),c=Y.tickIndexToSqrtPriceX64(e),l=Y.tickIndexToSqrtPriceX64(t);let u;if(a<e){if(!n)throw new W("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");u=Go(c,l,i)}else if(a>t){if(n)throw new W("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");u=Ho(l,c,i)}else n?u=Go(s,l,i):u=Ho(s,c,i);const m=Jt.getCoinAmountFromLiquidity(u,s,c,l,r),g=r?M(m.coinA.toString()).mul(1+o).toString():M(m.coinA.toString()).mul(1-o).toString(),k=r?M(m.coinB.toString()).mul(1+o).toString():M(m.coinB.toString()).mul(1-o).toString();return{coinAmountA:m.coinA,coinAmountB:m.coinB,tokenMaxA:r?new A(ei.ceil(g).toString()):new A(ei.floor(g).toString()),tokenMaxB:r?new A(ei.ceil(k).toString()):new A(ei.floor(k).toString()),liquidityAmount:u,fix_amount_a:n}}static estimateLiquidityFromcoinAmounts(e,t,i,n){if(t>i)throw new W("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const r=Y.sqrtPriceX64ToTickIndex(e),o=Y.tickIndexToSqrtPriceX64(t),s=Y.tickIndexToSqrtPriceX64(i);if(r<t)return Go(o,s,n.coinA);if(r>=i)return Ho(s,o,n.coinB);const a=Go(e,s,n.coinA),c=Ho(e,o,n.coinB);return A.min(a,c)}static estCoinAmountsFromTotalAmount(e,t,i,n,r,o){const{ratioA:s,ratioB:a}=Jt.calculateDepositRatioFixTokenA(e,t,i),c=M(n).mul(s).div(r),l=M(n).mul(a).div(o);return{amountA:c,amountB:l}}static calculateDepositRatioFixTokenA(e,t,i){const n=new A(1e8),{coinAmountB:r}=Jt.estLiquidityAndcoinAmountFromOneAmounts(e,t,n,!0,!0,0,i),o=Y.sqrtPriceX64ToPrice(i,0,0),s=M(n.toString()).mul(o),a=s.add(r.toString()),c=s.div(a),l=M(r.toString()).div(a);return{ratioA:c,ratioB:l}}};function hf(e){return e.startsWith("0x")?`${e.slice(2)}`:e}var Ng=0,pf=1,Dg=2;function ql(e,t){return e===t?Ng:e<t?pf:Dg}function Rg(e,t){let i=0;const n=e.length<=t.length?e.length:t.length,r=ql(e.length,t.length);for(;i<n;){const o=ql(e.charCodeAt(i),t.charCodeAt(i));if(i+=1,o!==0)return o}return r}function rc(e,t){return Rg(e,t)===pf}function Ps(e,...t){const i=Array.isArray(t[t.length-1])?t.pop():[];let r=[e,...t].filter(Boolean).join("::");return i&&i.length&&(r+=`<${i.join(", ")}>`),r}function R(e){var t;try{let i=e.replace(/\s/g,"");const n=i.match(/(<.+>)$/),r=(t=n==null?void 0:n[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r){i=i.slice(0,i.indexOf("<"));const l={...R(i),type_arguments:r.map(u=>R(u).source_address)};return l.type_arguments=l.type_arguments.map(u=>Ue.isSuiCoin(u)?u:R(u).source_address),l.source_address=Ps(l.full_address,l.type_arguments),l}const o=i.split("::"),a={full_address:i,address:i===js||i===Ug?"0x2":ze(o[0]),module:o[1],name:o[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=Ps(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function Dt(e){return R(e).source_address}function $g(e){return e.toLowerCase().startsWith("0x")?ze(e):e}var qg=(e,t=!0)=>{const i=e.split("::"),n=i.shift();let r=ze(n);return t&&(r=hf(r)),`${r}::${i.join("::")}`};function Kc(e){for(const t in e){const i=typeof e[t];if(i==="object")Kc(e[t]);else if(i==="string"){const n=e[t];n&&!n.includes("::")&&(e[t]=$g(n))}}}var Fg="0x2::coin::Coin",Lg=/^0x2::coin::Coin<(.+)>$/,js="0x2::sui::SUI",Ug="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Ue=class{static getCoinTypeArg(e){const t=e.type.match(Lg);return t?t[1]:null}static isSUI(e){const t=Ue.getCoinTypeArg(e);return t?Ue.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let i=BigInt(0);return e.forEach(n=>{t===n.coinAddress&&(i+=BigInt(n.balance))}),i}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${Fg}<${e}>`}static getFaucetCoins(e){const{events:t}=e,i=[];return t==null||t.forEach(n=>{const{type:r}=n;if(R(r).name==="InitEvent"){const o=n.parsedJson;i.push({transactionModule:n.transactionModule,suplyID:o.suplyID,decimals:o.decimals})}}),i}static getCoinAssets(e,t){const i=[];return t.forEach(n=>{Dt(n.coinAddress)===Dt(e)&&i.push(n)}),i}static isSuiCoin(e){return R(e).full_address===js}static selectCoinObjectIdGreaterThanOrEqual(e,t,i=[]){const n=Ue.selectCoinAssetGreaterThanOrEqual(e,t,i),r=n.selectedCoins.map(a=>a.coinObjectId),o=n.remainingCoins,s=n.selectedCoins.map(a=>a.balance.toString());return{objectArray:r,remainCoins:o,amountArray:s}}static selectCoinAssetGreaterThanOrEqual(e,t,i=[]){const n=Ue.sortByBalance(e.filter(c=>!i.includes(c.coinObjectId))),r=Ue.calculateTotalBalance(n);if(r<t)return{selectedCoins:[],remainingCoins:n};if(r===t)return{selectedCoins:n,remainingCoins:[]};let o=BigInt(0);const s=[],a=[...n];for(;o<r;){const c=t-o,l=a.findIndex(m=>m.balance>=c);if(l!==-1){s.push(a[l]),a.splice(l,1);break}const u=a.pop();u.balance>0&&(s.push(u),o+=u.balance)}return{selectedCoins:Ue.sortByBalance(s),remainingCoins:Ue.sortByBalance(a)}}static sortByBalance(e){return e.sort((t,i)=>t.balance<i.balance?-1:t.balance>i.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,i)=>t.balance>i.balance?-1:t.balance<i.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,i)=>t+i.balance,BigInt(0))}};function Kg(e,t,i){let n=new A(0),r=new A(0);e.current_tick_index<t.index?(n=ve.subUnderflowU128(new A(e.fee_growth_global_a),new A(t.feeGrowthOutsideA)),r=ve.subUnderflowU128(new A(e.fee_growth_global_b),new A(t.feeGrowthOutsideB))):(n=new A(t.feeGrowthOutsideA),r=new A(t.feeGrowthOutsideB));let o=new A(0),s=new A(0);e.current_tick_index<i.index?(o=new A(i.feeGrowthOutsideA),s=new A(i.feeGrowthOutsideB)):(o=ve.subUnderflowU128(new A(e.fee_growth_global_a),new A(i.feeGrowthOutsideA)),s=ve.subUnderflowU128(new A(e.fee_growth_global_b),new A(i.feeGrowthOutsideB)));const a=ve.subUnderflowU128(ve.subUnderflowU128(new A(e.fee_growth_global_a),n),o),c=ve.subUnderflowU128(ve.subUnderflowU128(new A(e.fee_growth_global_b),r),s);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function Vg(e,t,i){const n=ve.subUnderflowU128(t,new A(e.fee_growth_inside_a)),r=new A(e.liquidity).mul(n).shrn(64),o=ve.subUnderflowU128(i,new A(e.fee_growth_inside_b)),s=new A(e.liquidity).mul(o).shrn(64),a=new A(e.fee_owed_a).add(r),c=new A(e.fee_owed_b).add(s);return{position_id:e.pos_object_id,feeOwedA:a,feeOwedB:c}}function Jw(e){const{fee_growth_inside_a:t,fee_growth_inside_b:i}=Kg(e.clmmpool,e.tickLower,e.tickUpper);return Vg(e.position,t,i)}var yo=class{constructor(e,t){X(this,"numerator");X(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return yo.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const i=typeof e=="number"?new A(e.toString()):e,n=typeof t=="number"?new A(t.toString()):t;return new yo(i,n)}};function oc(e,{numerator:t,denominator:i},n){return n?e.mul(i.add(t)).div(i):e.mul(i).div(i.add(t))}function Ca(e,t,i){return{tokenMaxA:oc(e.coinA,t,i),tokenMaxB:oc(e.coinB,t,i)}}function M(e){return J.isDecimal(e)?e:new J(e===void 0?0:e)}function zg(e){return M(10).pow(M(e).abs())}function $o(e){return e.data}function _f(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const{error:t}=e;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function mf(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function Wg(e){if("reference"in e)return e.reference;const t=$o(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:_f(e)}function Li(e){var t;return"objectId"in e?e.objectId:((t=Wg(e))==null?void 0:t.objectId)??mf(e)}function Gg(e){return e.data!==void 0}function Hg(e){return e.content!==void 0}function gf(e){const t="data"in e?$o(e):e;if(!(!t||!Hg(t)||t.content.dataType!=="moveObject"))return t.content}function zi(e){var t;return(t=gf(e))==null?void 0:t.type}function Vr(e){var i;const t=Gg(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((i=t==null?void 0:t.content)==null?void 0:i.dataType)==="package"?"package":zi(e):t==null?void 0:t.type}function qo(e){var t;return(t=$o(e))==null?void 0:t.previousTransaction}function Es(e){var t;return(t=$o(e))==null?void 0:t.owner}function Xg(e){var i;const t=(i=$o(e))==null?void 0:i.display;return t||{data:null,error:null}}function le(e){var i;const t=(i=gf(e))==null?void 0:i.fields;if(t)return"fields"in t?t.fields:t}function Jg(e,t){const i=zg(M(t));return Number(M(e).mul(i))}function ii(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function Ut(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function Zg(e,t,i){const n=R(e).name,r=R(t).name;return`${n}-${r}[${i}]`}function Aa(e){const t=zi(e),i=R(t),n=le(e);if(n==null)throw new W(`Pool id ${Li(e)} not exists.`,"InvalidPoolObject");const r=[];n.rewarder_manager.fields.rewarders.forEach(s=>{const{emissions_per_second:a}=s.fields,c=ve.fromX64(new A(a)),l=Math.floor(c.toNumber()*60*60*24);r.push({emissions_per_second:a,coinAddress:R(s.fields.reward_coin.fields.name).source_address,growth_global:s.fields.growth_global,emissionsEveryDay:l})});const o={poolAddress:Li(e),poolType:t,coinTypeA:i.type_arguments[0],coinTypeB:i.type_arguments[1],coinAmountA:n.coin_a,coinAmountB:n.coin_b,current_sqrt_price:n.current_sqrt_price,current_tick_index:Ut(BigInt(n.current_tick_index.fields.bits)),fee_growth_global_a:n.fee_growth_global_a,fee_growth_global_b:n.fee_growth_global_b,fee_protocol_coin_a:n.fee_protocol_coin_a,fee_protocol_coin_b:n.fee_protocol_coin_b,fee_rate:n.fee_rate,is_pause:n.is_pause,liquidity:n.liquidity,position_manager:{positions_handle:n.position_manager.fields.positions.fields.id.id,size:n.position_manager.fields.positions.fields.size},rewarder_infos:r,rewarder_last_updated_time:n.rewarder_manager.fields.last_updated_time,tickSpacing:n.tick_spacing,ticks_handle:n.tick_manager.fields.ticks.fields.id.id,uri:n.url,index:Number(n.index),name:""};return o.name=Zg(o.coinTypeA,o.coinTypeB,o.tickSpacing),o}function ea(e){const t=Xg(e).data,i={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(i.creator=t.creator,i.description=t.description,i.image_url=t.image_url,i.link=t.link,i.name=t.name,i.project_url=t.project_url),i}function $r(e){var s,a;if(e.error!=null||((a=(s=e.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`Position not exists. Get Position error:${e.error}`,"InvalidPositionObject");let t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},i={...t,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},n=le(e);if(n){const c=zi(e),l=Es(e);"nft"in n?(n=n.nft.fields,t.description=n.description,t.name=n.name,t.link=n.url):t=ea(e),i={...t,pos_object_id:n.id.id,owner:l.AddressOwner,type:c,liquidity:n.liquidity,coin_type_a:n.coin_type_a.fields.name,coin_type_b:n.coin_type_b.fields.name,tick_lower_index:Ut(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:Ut(BigInt(n.tick_upper_index.fields.bits)),index:n.index,pool:n.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const r=_f(e);r&&(i.pos_object_id=r.objectId,i.position_status="Deleted");const o=mf(e);return o&&(i.pos_object_id=o,i.position_status="NotExists"),i}function bf(e){const t={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};e="fields"in e?e.fields:e,e.rewards.forEach((o,s)=>{const{amount_owned:a,growth_inside:c}="fields"in o?o.fields:o;s===0?(t.reward_amount_owed_0=a,t.reward_growth_inside_0=c):s===1?(t.reward_amount_owed_1=a,t.reward_growth_inside_1=c):s===2&&(t.reward_amount_owed_2=a,t.reward_growth_inside_2=c)});const i="fields"in e.tick_lower_index?e.tick_lower_index.fields.bits:e.tick_lower_index.bits,n="fields"in e.tick_upper_index?e.tick_upper_index.fields.bits:e.tick_upper_index.bits;return{liquidity:e.liquidity,tick_lower_index:Ut(BigInt(i)),tick_upper_index:Ut(BigInt(n)),...t,fee_growth_inside_a:e.fee_growth_inside_a,fee_owed_a:e.fee_owned_a,fee_growth_inside_b:e.fee_growth_inside_b,fee_owed_b:e.fee_owned_b,pos_object_id:e.position_id}}function xa(e){var r,o;if(e.error!=null||((o=(r=e.data)==null?void 0:r.content)==null?void 0:o.dataType)!=="moveObject")throw new W(`Tick not exists. Get tick data error:${e.error}`,"InvalidTickObject");const i=le(e).value.fields.value.fields;return{objectId:Li(e),index:Ut(BigInt(i.index.fields.bits)),sqrtPrice:new A(i.sqrt_price),liquidityNet:new A(i.liquidity_net.fields.bits),liquidityGross:new A(i.liquidity_gross),feeGrowthOutsideA:new A(i.fee_growth_outside_a),feeGrowthOutsideB:new A(i.fee_growth_outside_b),rewardersGrowthOutside:i.rewards_growth_outside}}function Qg(e){if(!e||!e.index||!e.sqrt_price||!e.liquidity_net||!e.liquidity_gross||!e.fee_growth_outside_a||!e.fee_growth_outside_b)throw new W("Invalid tick fields.","InvalidTickFields");const t=Ut(BigInt(e.index.bits)),i=new A(e.sqrt_price),n=new A(e.liquidity_net.bits),r=new A(e.liquidity_gross),o=new A(e.fee_growth_outside_a),s=new A(e.fee_growth_outside_b),a=e.rewards_growth_outside||[];return{objectId:"",index:t,sqrtPrice:i,liquidityNet:n,liquidityGross:r,feeGrowthOutsideA:o,feeGrowthOutsideB:s,rewardersGrowthOutside:a}}var Zw=class{static getMinIndex(e){return nc+Math.abs(nc)%e}static getMaxIndex(e){return ic-ic%e}};function Qw(e,t){const i=Math.abs(e)%t;return e>0?i>t/2?e+t-i:e-i:i>t/2?e-t+i:e+i}function Yg(e,t,i,n,r,o){const s=e.rewarder_infos,a=[];for(let c=0;c<s.length;c+=1){let l=o[c];t!==null&&(e.current_tick_index<n?l=o[c].sub(new A(t.rewardersGrowthOutside[c])):l=t.rewardersGrowthOutside[c]);let u=new A(0);i!==null&&(e.current_tick_index>=r?u=o[c].sub(new A(i.rewardersGrowthOutside[c])):u=i.rewardersGrowthOutside[c]);const m=ve.subUnderflowU128(ve.subUnderflowU128(new A(o[c]),new A(l)),new A(u));a.push(m)}return a}function Bs(e){const t=Ue.isSuiCoin(e.coinTypeA),i=Ue.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:i}}function eb(e,t){return J.ceil(M(e).div(1+t)).toString()}var ce=class{static createCollectRewarderAndFeeParams(e,t,i,n,r,o){r===void 0&&(r=[...n]),o===void 0&&(o=[...n]);const s=Dt(i.coinTypeA),a=Dt(i.coinTypeB);if(i.collect_fee){const l=ce.buildCoinForAmount(t,r,BigInt(0),s,!1);r=l.remainCoins;const u=ce.buildCoinForAmount(t,o,BigInt(0),a,!1);o=u.remainCoins,t=e.Position.createCollectFeePaylod({pool_id:i.pool_id,pos_id:i.pos_id,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB},t,l.targetCoin,u.targetCoin)}const c=[];return i.rewarder_coin_types.forEach(l=>{switch(Dt(l)){case s:c.push(ce.buildCoinForAmount(t,r,BigInt(0),l,!1).targetCoin);break;case a:c.push(ce.buildCoinForAmount(t,o,BigInt(0),l,!1).targetCoin);break;default:c.push(ce.buildCoinForAmount(t,n,BigInt(0),l,!1).targetCoin);break}}),t=e.Rewarder.createCollectRewarderPaylod(i,t,c),t}static async adjustTransactionForGas(e,t,i,n){n.setSender(e.senderAddress);const r=Ue.selectCoinAssetGreaterThanOrEqual(t,i).selectedCoins;if(r.length===0)throw new W("Insufficient balance","InsufficientBalance");const o=Ue.calculateTotalBalance(t);if(o-i>1e9)return{fixAmount:i};const s=await e.fullClient.calculationTxGas(n);if(Ue.selectCoinAssetGreaterThanOrEqual(t,BigInt(s),r.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(s)+BigInt(500);if(o-i<c){if(i-=c,i<0)throw new W("gas Insufficient balance","InsufficientBalance");const l=new $;return{fixAmount:i,newTx:l}}}return{fixAmount:i}}static async buildAddLiquidityFixTokenForGas(e,t,i,n,r,o,s){r=await ce.buildAddLiquidityFixToken(e,t,i,r,o,s);const{isAdjustCoinA:a}=Bs(i),c=a?i.amount_a:i.amount_b,l=await ce.adjustTransactionForGas(e,Ue.getCoinAssets(a?i.coinTypeA:i.coinTypeB,t),BigInt(c),r),{fixAmount:u}=l,{newTx:m}=l;if(m!=null){let g,k;if(a)i.amount_a=Number(u),g=ce.buildAddLiquidityFixTokenCoinInput(m,!i.fix_amount_a,u.toString(),i.slippage,i.coinTypeA,t,!1),k=ce.buildAddLiquidityFixTokenCoinInput(m,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,t,!1);else return i.amount_b=Number(u),g=ce.buildAddLiquidityFixTokenCoinInput(m,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,t,!1),k=ce.buildAddLiquidityFixTokenCoinInput(m,i.fix_amount_a,u.toString(),i.slippage,i.coinTypeB,t,!1),i=ce.fixAddLiquidityFixTokenParams(i,n.slippage,n.curSqrtPrice),r=await ce.buildAddLiquidityFixTokenArgs(m,e,t,i,g,k),r}return r}static async buildAddLiquidityFixToken(e,t,i,n,r,o){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");n=n||new $;let s,a;return r==null||o==null?(s=ce.buildAddLiquidityFixTokenCoinInput(n,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,t,!1),a=ce.buildAddLiquidityFixTokenCoinInput(n,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,t,!1)):(s={targetCoin:r,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a={targetCoin:o,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),n=ce.buildAddLiquidityFixTokenArgs(n,e,t,i,s,a),n}static buildAddLiquidityFixTokenCoinInput(e,t,i,n,r,o,s=!0){return t?ce.buildCoinForAmountInterval(e,o,{amountSecond:BigInt(eb(i,n)),amountFirst:BigInt(i)},r,s):ce.buildCoinForAmount(e,o,BigInt(i),r,s)}static fixAddLiquidityFixTokenParams(e,t,i){const n=e.fix_amount_a?e.amount_a:e.amount_b,r=Jt.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new A(n),e.fix_amount_a,!0,t,i);return e.amount_a=e.fix_amount_a?e.amount_a:r.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?r.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,i,n,r,o){const s=[n.coinTypeA,n.coinTypeB],a=n.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:l}=t.sdkOptions;n.is_open||(e=ce.createCollectRewarderAndFeeParams(t,e,n,i,r.remainCoins,o.remainCoins));const u=j(c),m=n.is_open?[e.object(u.global_config_id),e.object(n.pool_id),e.pure.u32(Number(ii(BigInt(n.tick_lower)).toString())),e.pure.u32(Number(ii(BigInt(n.tick_upper)).toString())),r.targetCoin,o.targetCoin,e.pure.u64(n.amount_a),e.pure.u64(n.amount_b),e.pure.bool(n.fix_amount_a),e.object(L)]:[e.object(u.global_config_id),e.object(n.pool_id),e.object(n.pos_id),r.targetCoin,o.targetCoin,e.pure.u64(n.amount_a),e.pure.u64(n.amount_b),e.pure.bool(n.fix_amount_a),e.object(L)];return e.moveCall({target:`${l.published_at}::${Mn}::${a}`,typeArguments:s,arguments:m}),e}static async buildSwapTransactionForGas(e,t,i,n){let r=ce.buildSwapTransaction(e,t,i);r.setSender(e.senderAddress);const o=await ce.adjustTransactionForGas(e,Ue.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,i),BigInt(t.by_amount_in?t.amount:t.amount_limit),r),{fixAmount:s,newTx:a}=o;if(a!==void 0){a.setSender(e.senderAddress),t.by_amount_in?t.amount=s.toString():t.amount_limit=s.toString(),t=await ce.fixSwapParams(e,t,n);const c=ce.buildCoinForAmount(r,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA),l=ce.buildCoinForAmount(r,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB);r=ce.buildSwapTransactionArgs(a,t,e.sdkOptions,c,l)}return r}static buildSwapTransaction(e,t,i){let n=new $;n.setSender(e.senderAddress);const r=ce.buildCoinForAmount(n,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1),o=ce.buildCoinForAmount(n,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1);return n=ce.buildSwapTransactionArgs(n,t,e.sdkOptions,r,o),n}static buildSwapTransactionArgs(e,t,i,n,r){const{clmm_pool:o,integrate:s}=i,a=Xi.getDefaultSqrtPriceLimit(t.a2b),c=[t.coinTypeA,t.coinTypeB],{global_config_id:l}=j(o);if(l===void 0)throw Error("clmm.config.global_config_id is undefined");const u=t.swap_partner!==void 0,m=u?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",g=u?[e.object(l),e.object(t.pool_id),e.object(t.swap_partner),n.targetCoin,r.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(L)]:[e.object(l),e.object(t.pool_id),n.targetCoin,r.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(L)];return e.moveCall({target:`${s.published_at}::${Mn}::${m}`,typeArguments:c,arguments:g}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,t,i,n){let{tx:r,coinABs:o}=ce.buildSwapTransactionWithoutTransferCoins(e,t,i);r.setSender(e.senderAddress);const s=await ce.adjustTransactionForGas(e,Ue.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,i),BigInt(t.by_amount_in?t.amount:t.amount_limit),r),{fixAmount:a,newTx:c}=s;if(c!==void 0){c.setSender(e.senderAddress),t.by_amount_in?t.amount=a.toString():t.amount_limit=a.toString(),t=await ce.fixSwapParams(e,t,n);const l=ce.buildCoinForAmount(r,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),u=ce.buildCoinForAmount(r,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),m=ce.buildSwapTransactionWithoutTransferCoinArgs(e,c,t,e.sdkOptions,l,u);r=m.tx,o=m.txRes}return{tx:r,coinABs:o}}static buildSwapTransactionWithoutTransferCoins(e,t,i){const n=new $;n.setSender(e.senderAddress);const r=ce.buildCoinForAmount(n,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),o=ce.buildCoinForAmount(n,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),s=ce.buildSwapTransactionWithoutTransferCoinArgs(e,n,t,e.sdkOptions,r,o);return{tx:s.tx,coinABs:s.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,t,i,n,r,o){const{clmm_pool:s,integrate:a}=n,c=Xi.getDefaultSqrtPriceLimit(i.a2b),{global_config_id:l}=j(s);if(l===void 0)throw Error("clmm.config.global_config_id is undefined");const u=i.swap_partner!==void 0,m=u?"swap_with_partner":"swap",g=u?va:dr,k=u?[t.object(l),t.object(i.pool_id),t.object(i.swap_partner),r.targetCoin,o.targetCoin,t.pure.bool(i.a2b),t.pure.bool(i.by_amount_in),t.pure.u64(i.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(L)]:[t.object(l),t.object(i.pool_id),r.targetCoin,o.targetCoin,t.pure.bool(i.a2b),t.pure.bool(i.by_amount_in),t.pure.u64(i.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(L)],x=[i.coinTypeA,i.coinTypeB],T=t.moveCall({target:`${a.published_at}::${g}::${m}`,typeArguments:x,arguments:k});if(i.by_amount_in){const I=i.a2b?i.coinTypeB:i.coinTypeA,E=i.a2b?T[1]:T[0],B=Number(i.amount_limit);this.checkCoinThreshold(e,i.by_amount_in,t,E,B,I)}return{tx:t,txRes:T}}static async fixSwapParams(e,t,i){const{currentPool:n}=i;try{const r=await e.Swap.preswap({decimalsA:i.decimalsA,decimalsB:i.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:t.amount,pool:n,currentSqrtPrice:n.current_sqrt_price,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB}),o=i.byAmountIn?r.estimatedAmountOut:r.estimatedAmountIn,s=oc(o,i.slippage,!i.byAmountIn);t.amount_limit=s.toString()}catch(r){console.log("fixSwapParams",r)}return t}static async syncBuildCoinInputForAmount(e,t,i,n,r=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const o=await e.getOwnerCoinAssets(e.senderAddress,n);return ce.buildCoinForAmount(t,o,i,n,r).targetCoin}static buildCoinForAmount(e,t,i,n,r=!0,o=!1){const s=Ue.getCoinAssets(n,t);if(i===BigInt(0)&&s.length===0)return ce.buildZeroValueCoin(t,e,n,r);const a=Ue.calculateTotalBalance(s);if(a<i)throw new W(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `,"InsufficientBalance");return ce.buildCoin(e,t,s,i,n,r,o)}static buildCoin(e,t,i,n,r,o=!0,s=!1){if(Ue.isSuiCoin(r)){if(o){const B=e.splitCoins(e.gas,[e.pure.u64(n)]);return{targetCoin:e.makeMoveVec({elements:[B]}),remainCoins:t,tragetCoinAmount:n.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}if(n===0n&&i.length>1){const B=Ue.selectCoinObjectIdGreaterThanOrEqual(i,n);return{targetCoin:e.object(B.objectArray[0]),remainCoins:B.remainCoins,tragetCoinAmount:B.amountArray[0],isMintZeroCoin:!1}}const I=Ue.selectCoinObjectIdGreaterThanOrEqual(i,n);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(n)]),remainCoins:I.remainCoins,tragetCoinAmount:n.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const a=Ue.selectCoinObjectIdGreaterThanOrEqual(i,n),c=a.amountArray.reduce((I,E)=>Number(I)+Number(E),0).toString(),l=a.objectArray;if(o)return{targetCoin:e.makeMoveVec({elements:l.map(I=>e.object(I))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((I,E)=>Number(I)+Number(E),0).toString(),isMintZeroCoin:!1};const[u,...m]=l,g=e.object(u);let k=g,x=a.amountArray.reduce((I,E)=>Number(I)+Number(E),0).toString(),T;return m.length>0&&e.mergeCoins(g,m.map(I=>e.object(I))),s&&Number(c)>Number(n)&&(k=e.splitCoins(g,[e.pure.u64(n)]),x=n.toString(),T=g),{targetCoin:k,remainCoins:a.remainCoins,originalSplitedCoin:T,tragetCoinAmount:x,isMintZeroCoin:!1}}static buildZeroValueCoin(e,t,i,n=!0){const r=ce.callMintZeroValueCoin(t,i);let o;return n?o=t.makeMoveVec({elements:[r]}):o=r,{targetCoin:o,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,t,i,n,r=!0){const o=Ue.getCoinAssets(n,t);if(i.amountFirst===BigInt(0))return o.length>0?ce.buildCoin(e,[...t],[...o],i.amountFirst,n,r):ce.buildZeroValueCoin(t,e,n,r);const s=Ue.calculateTotalBalance(o);if(s>=i.amountFirst)return ce.buildCoin(e,[...t],[...o],i.amountFirst,n,r);if(s<i.amountSecond)throw new W(`The amount(${s}) is Insufficient balance for ${n} , expect ${i.amountSecond} `,"InsufficientBalance");return ce.buildCoin(e,[...t],[...o],i.amountSecond,n,r)}static async buildRouterSwapTransaction(e,t,i,n,r){let o=new $;return t.paths.length>1&&(t.partner=""),o=await this.buildRouterBasePathTx(e,t,i,n,o,r),o}static async buildRouterBasePathTx(e,t,i,n,r,o){const s=t.paths.filter(N=>N&&N.poolAddress),a=Number(s.reduce((N,F)=>N.add(F.amountIn),se).toString()),c=Number(s.reduce((N,F)=>N.add(F.amountOut),se).toString()),l=Math.round(i?Number(c.toString())*(1-t.priceSlippagePoint):Number(a.toString())*(1+t.priceSlippagePoint)),u=t.paths[0].coinType[0],m=t.paths[0].coinType[t.paths[0].coinType.length-1],g=ce.buildCoinForAmount(r,n,BigInt(i?a:l),u,!1,!0),k=g.originalSplitedCoin!==void 0,x=ce.buildCoinForAmount(r,n,0n,m,!1),T=await this.buildRouterBasePathReturnCoins(e,t,i,g,x,r),I=[],{toCoin:E,fromCoin:B}=T;if(r=T.tx,x.isMintZeroCoin?I.push({coinType:m,coin:E}):x.originalSplitedCoin!==void 0?r.mergeCoins(x.originalSplitedCoin,[E]):r.mergeCoins(x.targetCoin,[E]),k){const N=g==null?void 0:g.originalSplitedCoin;r.mergeCoins(N,[B])}else I.push({coinType:u,coin:B});for(let N=0;N<I.length;N++)this.buildTransferCoin(e,r,I[N].coin,I[N].coinType,o);return r}static async buildRouterBasePathReturnCoins(e,t,i,n,r,o){const{clmm_pool:s,integrate:a}=e.sdkOptions,c=j(s).global_config_id,l=t.paths.filter(N=>N&&N.poolAddress),u=Number(l.reduce((N,F)=>N.add(F.amountIn),se).toString()),m=Number(l.reduce((N,F)=>N.add(F.amountOut),se).toString()),g=Math.round(i?Number(m.toString())*(1-t.priceSlippagePoint):Number(u.toString())*(1+t.priceSlippagePoint)),k=t.paths[0].coinType[0],x=t.paths[0].coinType[t.paths[0].coinType.length-1];let T=n.targetCoin,I;r.isMintZeroCoin||r.originalSplitedCoin!==void 0?I=r.targetCoin:I=ce.callMintZeroValueCoin(o,x);const E=t.partner==="",B=E?dr:va;for(const N of l)if(N.poolAddress.length===1){const F=N.a2b[0],H={amount:Number(N.amountIn.toString()),amountLimit:g,poolCoinA:N.a2b[0]?k:x,poolCoinB:N.a2b[0]?x:k},K=E?"swap":"swap_with_partner",ee=F?T:I,me=F?I:T,be=i?N.amountIn.toString():N.amountOut.toString(),ie=Xi.getDefaultSqrtPriceLimit(F).toString(),z=E?[o.object(c),o.object(N.poolAddress[0]),ee,me,o.pure.bool(F),o.pure.bool(i),o.pure.u64(be),o.pure.u128(ie),o.pure.bool(!1),o.object(L)]:[o.object(c),o.object(N.poolAddress[0]),o.object(t.partner),ee,me,o.pure.bool(F),o.pure.bool(i),o.pure.u64(be),o.pure.u128(ie),o.pure.bool(!1),o.object(L)],te=[H.poolCoinA,H.poolCoinB],O=o.moveCall({target:`${e.sdkOptions.integrate.published_at}::${B}::${K}`,typeArguments:te,arguments:z});T=F?O[0]:O[1],I=F?O[1]:O[0]}else{const F=i?N.amountIn:N.rawAmountLimit[0],H=i?0:N.amountOut;let K="";N.a2b[0]?N.a2b[1]?K="swap_ab_bc":K="swap_ab_cb":N.a2b[1]?K="swap_ba_bc":K="swap_ba_cb",E||(K=`${K}_with_partner`);const ee=Xi.getDefaultSqrtPriceLimit(N.a2b[0]),me=Xi.getDefaultSqrtPriceLimit(N.a2b[1]),be=E?[o.object(c),o.object(N.poolAddress[0]),o.object(N.poolAddress[1]),T,I,o.pure.bool(i),o.pure.u64(F.toString()),o.pure.u64(H.toString()),o.pure.u128(ee.toString()),o.pure.u128(me.toString()),o.object(L)]:[o.object(c),o.object(N.poolAddress[0]),o.object(N.poolAddress[1]),o.object(t.partner),T,I,o.pure.bool(i),o.pure.u64(F.toString()),o.pure.u64(H.toString()),o.pure.u128(ee.toString()),o.pure.u128(me.toString()),o.object(L)],ie=[N.coinType[0],N.coinType[1],N.coinType[2]],z=o.moveCall({target:`${a.published_at}::${B}::${K}`,typeArguments:ie,arguments:be});T=z[0],I=z[1]}return this.checkCoinThreshold(e,i,o,I,g,x),{fromCoin:T,toCoin:I,tx:o}}static async buildAggregatorSwapReturnCoins(e,t,i,n,r,o,s,a){if(a==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=e.senderAddress}t.splitPaths.length>1&&(r="");let c,l;const u=t.splitPaths.some(m=>m.basePaths.some(g=>g.label==="Deepbook"));if((!t.byAmountIn||t.splitPaths.length===1)&&!u){const m=[];for(const x of t.splitPaths){const T=[],I=[],E=[],B=[];for(let F=0;F<x.basePaths.length;F+=1){const H=x.basePaths[F];T.push(H.direction),I.push(H.poolAddress),E.push(new A(H.inputAmount.toString())),F===0?B.push(H.fromCoin,H.toCoin):B.push(H.toCoin)}const N={amountIn:new A(x.inputAmount.toString()),amountOut:new A(x.outputAmount.toString()),poolAddress:I,a2b:T,rawAmountLimit:E,isExceed:!1,coinType:B};m.push(N)}const g={paths:m,partner:r,priceSlippagePoint:o},k=await this.buildRouterBasePathReturnCoins(e,g,t.byAmountIn,i,n,s);c=k.fromCoin,l=k.toCoin,s=k.tx}else{const m=Math.round(t.outputAmount*(1-o));c=i.targetCoin,n.isMintZeroCoin||n.originalSplitedCoin!==void 0?l=n.targetCoin:l=ce.callMintZeroValueCoin(s,t.toCoin);let g=!1,k;if(u){const[x,T]=Fl.createAccountCap(a,e.sdkOptions,s);s=T,k=x,g=!0}for(let x=0;x<t.splitPaths.length;x+=1){const T=t.splitPaths[x];let I;for(let E=0;E<T.basePaths.length;E+=1){const B=T.basePaths[E];if(B.label==="Deepbook")if(E===0)if(T.basePaths.length===1){const N=this.buildDeepbookBasePathTx(e,B,s,k,c,l,!1);c=N.from,l=N.to}else{I=ce.callMintZeroValueCoin(s,B.toCoin);const N=this.buildDeepbookBasePathTx(e,B,s,k,c,I,!1);c=N.from,I=N.to}else{const N=this.buildDeepbookBasePathTx(e,B,s,k,I,l,!0);I=N.from,l=N.to}if(B.label==="Cetus")if(E===0)if(T.basePaths.length===1){const N=this.buildClmmBasePathTx(e,B,s,t.byAmountIn,c,l,!1,r);c=N.from,l=N.to}else{I=ce.callMintZeroValueCoin(s,B.toCoin);const N=this.buildClmmBasePathTx(e,B,s,t.byAmountIn,c,I,!1,r);c=N.from,I=N.to}else{const N=this.buildClmmBasePathTx(e,B,s,t.byAmountIn,I,l,!0,r);I=N.from,l=N.to,s.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Dl}::send_coin`,typeArguments:[B.fromCoin],arguments:[I,s.pure.address(a)]})}}}this.checkCoinThreshold(e,t.byAmountIn,s,l,m,t.toCoin),g&&(s=Fl.deleteAccountCapByObject(k,e.sdkOptions,s))}return{fromCoin:c,toCoin:l,tx:s}}static async buildAggregatorSwapTransaction(e,t,i,n,r,o){let s=new $;const a=t.byAmountIn?Math.round(t.outputAmount*(1-r)):Math.round(t.inputAmount*(1+r)),c=ce.buildCoinForAmount(s,i,t.byAmountIn?BigInt(t.inputAmount):BigInt(a),t.fromCoin,!1,!0),l=c.originalSplitedCoin!=null,u=ce.buildCoinForAmount(s,i,0n,t.toCoin,!1),m=await this.buildAggregatorSwapReturnCoins(e,t,c,u,n,r,s,o),{fromCoin:g,toCoin:k}=m;s=m.tx;const x=[];if(u.isMintZeroCoin?x.push({coinType:t.toCoin,coin:k}):u.originalSplitedCoin!=null?s.mergeCoins(u.originalSplitedCoin,[k]):s.mergeCoins(u.targetCoin,[k]),l){const T=c.originalSplitedCoin;s.mergeCoins(T,[g])}else x.push({coinType:t.fromCoin,coin:g});for(let T=0;T<x.length;T++)this.buildTransferCoin(e,s,x[T].coin,x[T].coinType,o);return s}static checkCoinThreshold(e,t,i,n,r,o){t&&i.moveCall({target:`${e.sdkOptions.integrate.published_at}::${dr}::check_coin_threshold`,typeArguments:[o],arguments:[n,i.pure.u64(r)]})}static buildDeepbookBasePathTx(e,t,i,n,r,o,s){const a=t.direction?r:o,c=t.direction?o:r,l=[i.object(t.poolAddress),n,i.pure.u64(t.inputAmount),i.pure.u64(0),i.pure.bool(t.direction),a,c,i.pure.bool(s),i.object(L)],u=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],m=i.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:u,arguments:l});return r=t.direction?m[0]:m[1],o=t.direction?m[1]:m[0],{from:r,to:o,tx:i}}static buildClmmBasePathTx(e,t,i,n,r,o,s,a){const{clmm_pool:c,integrate:l}=e.sdkOptions,u=j(c).global_config_id;let m=t.direction?r:o,g=t.direction?o:r;const k=a==="",x=k?dr:va,T=k?"swap":"swap_with_partner",I=n?t.inputAmount.toString():t.outputAmount.toString(),E=Xi.getDefaultSqrtPriceLimit(t.direction),B=k?[i.object(u),i.object(t.poolAddress),m,g,i.pure.bool(t.direction),i.pure.bool(n),i.pure.u64(I),i.pure.u128(E.toString()),i.pure.bool(s),i.object(L)]:[i.object(u),i.object(t.poolAddress),i.object(a),m,g,i.pure.bool(t.direction),i.pure.bool(n),i.pure.u64(I),i.pure.u128(E.toString()),i.pure.bool(s),i.object(L)],N=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],F=i.moveCall({target:`${l.published_at}::${x}::${T}`,typeArguments:N,arguments:B});return m=F[0],g=F[1],r=t.direction?m:g,o=t.direction?g:m,{from:r,to:o,tx:i}}static buildCoinTypePair(e,t){const i=[];if(e.length===2){const n=[];n.push(e[0],e[1]),i.push(n)}else{const n=[];n.push(e[0],e[e.length-1]),i.push(n);for(let r=1;r<e.length-1;r+=1){if(t[r-1]===0)continue;const o=[];o.push(e[0],e[r],e[e.length-1]),i.push(o)}}return i}static buildTransferCoinToSender(e,t,i,n){t.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Dl}::transfer_coin_to_sender`,typeArguments:[n],arguments:[i]})}static buildTransferCoin(e,t,i,n,r){r!=null?t.transferObjects([i],t.pure.address(r)):ce.buildTransferCoinToSender(e,t,i,n)}},re=ce;_g(re,"callMintZeroValueCoin",(e,t)=>e.moveCall({target:"0x2::coin::zero",typeArguments:[t]}));function Xt(e){return!(!e.startsWith("0x")||e.length!==66)}var br=new A(1e9),Fl=class{static createAccountCap(e,t,i,n=!1){if(e.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:r}=t,[o]=i.moveCall({target:`${r.published_at}::${yg}::create_account`,typeArguments:[],arguments:[]});return n&&i.transferObjects([o],i.pure.address(e)),[o,i]}static deleteAccountCap(e,t,i){const{deepbook:n}=t,r=[i.object(e)];return i.moveCall({target:`${n.published_at}::${ka}::delete_account_cap`,typeArguments:[],arguments:r}),i}static deleteAccountCapByObject(e,t,i){const{deepbook:n}=t,r=[e];return i.moveCall({target:`${n.published_at}::${ka}::delete_account_cap`,typeArguments:[],arguments:r}),i}static async getAccountCap(e,t=!0){const i=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:t,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:ka}}});return i.data.length===0?"":i.data[0].data.objectId}static async getPools(e){const t=e.sdkOptions.deepbook.package_id,i=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${t}::clob_v2::PoolCreated`})).data.forEach(r=>{const o=r.parsedJson;o&&i.push({poolID:o.pool_id,tickSize:Number(o.tick_size),lotSize:Number(o.lot_size),takerFeeRate:Number(o.taker_fee_rate),makerRebateRate:Number(o.maker_rebate_rate),baseAsset:o.base_asset.name,quoteAsset:o.quote_asset.name})})}catch(n){console.log("getPoolImmutables",n)}return i}static async getPoolAsks(e,t,i,n){var g;const{simulationAccount:r}=e.sdkOptions,{deepbook_endpoint_v2:o}=e.sdkOptions,s=new $,a=[],c=[i,n],l=[s.object(t),s.pure.u64("0"),s.pure.u64("999999999999"),s.object(L)];s.moveCall({target:`${o.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:l,typeArguments:c});const m=(g=(await e.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:r.address})).events)==null?void 0:g.filter(k=>R(k.type).name==="BookStatus");if(m.length===0)return a;for(let k=0;k<m[0].parsedJson.depths.length;k++){const x=m[0].parsedJson.price[k],T=m[0].parsedJson.depths[k],I={price:parseInt(x,10),quantity:parseInt(T,10)};a.push(I)}return a}static async getPoolBids(e,t,i,n){var g;const{simulationAccount:r}=e.sdkOptions,{deepbook_endpoint_v2:o}=e.sdkOptions,s=new $,a=[],c=[i,n],l=[s.object(t),s.pure.u64("0"),s.pure.u64("999999999999"),s.object(L)];s.moveCall({target:`${o.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:l,typeArguments:c});const m=(g=(await e.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:r.address})).events)==null?void 0:g.filter(k=>R(k.type).name==="BookStatus");if(m.length===0)return a;for(let k=0;k<m[0].parsedJson.depths.length;k++){const x=m[0].parsedJson.price[k],T=m[0].parsedJson.depths[k],I={price:parseInt(x,10),quantity:parseInt(T,10)};a.push(I)}return a}static async preSwap(e,t,i,n){let r=!1,o=se,s=new A(n),a=se;const c=new A(n);if(i){let l=await this.getPoolBids(e,t.poolID,t.baseAsset,t.quoteAsset);l===null&&(r=!0),l=l.sort((u,m)=>m.price-u.price);for(let u=0;u<l.length;u+=1){const m=new A(l[u].quantity),g=new A(l[u].price),k=m.mul(new A(g)).mul(new A(t.takerFeeRate)).div(br).div(br);if(s.gt(m))s=s.sub(m),o=o.add(m.mul(g).div(br).sub(k)),a=a.add(k);else{const x=s.mul(new A(l[u].price)).div(br),T=x.mul(new A(t.takerFeeRate)).div(br);o=o.add(x.sub(T)),s=s.sub(s),a=a.add(T)}if(s.eq(se))break}}else{const l=await this.getPoolAsks(e,t.poolID,t.baseAsset,t.quoteAsset);l===null&&(r=!0);for(let u=0;u<l.length;u+=1){const m=new A(l[u].price).mul(new A(l[u].quantity)).div(new A(1e9)),g=m.mul(new A(t.takerFeeRate)).div(br),k=m.add(g);if(s.gt(m))o=o.add(new A(l[u].quantity)),s=s.sub(k),a=a.add(g);else{const x=new A(l[u].quantity).div(new A(t.lotSize)),T=k.div(x),I=s.div(T);o=o.add(I.muln(t.lotSize)),s=s.sub(I.mul(T)),a=a.add(I.div(x).mul(g))}if(s.eq(se))break}}return{poolAddress:t.poolID,estimatedAmountIn:c.sub(s).toNumber(),estimatedAmountOut:o.toNumber(),estimatedFeeAmount:a,isExceed:r,amount:Number(n),aToB:i,byAmountIn:!0}}static async simulateSwap(e,t,i,n,r,o){var H;const{deepbook_endpoint_v2:s}=e.sdkOptions;let a=new $;const c=await this.getAccountCap(e);let l;if(c===""){const K=this.createAccountCap(e.senderAddress,e.sdkOptions,a),ee=K[0];a=K[1],l=ee}else l=a.object(c);const u=await e.getOwnerCoinAssets(e.senderAddress),m=re.buildCoinForAmount(a,u,BigInt(o),i,!1),g=m==null?void 0:m.targetCoin,k=re.buildCoinForAmount(a,u,BigInt(o),n,!1),x=k==null?void 0:k.targetCoin,T=[i,n],I=[a.object(t),l,a.pure.u64(o),a.pure.u64(0),a.pure.bool(r),g,x,a.object(L)];a.moveCall({target:`${s.published_at}::${vg}::swap`,arguments:I,typeArguments:T});const{simulationAccount:E}=e.sdkOptions,N=(H=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:E.address})).events)==null?void 0:H.filter(K=>R(K.type).name==="DeepbookSwapEvent");if(N.length===0)return null;const F=N[0].parsedJson;return{poolAddress:F.pool,estimatedAmountIn:F.amount_in,estimatedAmountOut:F.amount_out,aToB:F.atob}}},tb=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPositionList(e,t="all"){const i={data:[],hasNextPage:!0},n=await this._sdk.fullClient.getDynamicFieldsByPage(e,t);i.hasNextPage=n.hasNextPage,i.nextCursor=n.nextCursor;const r=n.data.map(s=>{if(s.error!=null)throw new W(`when getPositionList get position objects error: ${s.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return s.name.value}),o=await this._sdk.Position.getSipmlePositionList(r);return i.data=o,i}async getPoolImmutables(e=[],t=0,i=100,n=!1){const{package_id:r}=this._sdk.sdkOptions.clmm_pool,o=`${r}_getInitPoolEvent`,s=this.getCache(o,n),a=[],c=[];if(s!==void 0&&a.push(...s),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`})).data.forEach(m=>{const g=m.parsedJson;g&&a.push({poolAddress:g.pool_id,tickSpacing:g.tick_spacing,coinTypeA:R(g.coin_type_a).full_address,coinTypeB:R(g.coin_type_b).full_address})}),this.updateCache(o,a,Q)}catch(u){console.log("getPoolImmutables",u)}const l=e.length>0;for(let u=0;u<a.length;u+=1){const m=a[u];l&&!e.includes(m.poolAddress)||!l&&(u<t||u>=t+i)||c.push(m)}return c}async getPools(e=[],t=0,i=100){var s,a,c;const n=[];let r=[];e.length>0?r=[...e]:(await this.getPoolImmutables([],t,i,!1)).forEach(u=>r.push(u.poolAddress));const o=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0,showType:!0});for(const l of o){if(l.error!=null||((a=(s=l.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`getPools error code: ${((c=l.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=Aa(l);n.push(u);const m=`${u.poolAddress}_getPoolObject`;this.updateCache(m,u,Q)}return n}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:i}=this._sdk.sdkOptions.clmm_pool,n=[],r={data:[],hasNextPage:!1},o=e==="all",s=`${i}_getPoolImmutables`;if(o){const a=this.getCache(s,t);a&&n.push(...a)}if(n.length===0)try{const a=`${i}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},e);r.hasNextPage=c.hasNextPage,r.nextCursor=c.nextCursor,c.data.forEach(l=>{const u=l.parsedJson;if(u){const m={poolAddress:u.pool_id,tickSpacing:u.tick_spacing,coinTypeA:R(u.coin_type_a).full_address,coinTypeB:R(u.coin_type_b).full_address};n.push(m)}})}catch(a){console.log("getPoolImmutables",a)}return r.data=n,o&&this.updateCache(`${i}_getPoolImmutables`,n,Q),r}async getPoolsWithPage(e=[],t="all",i=!1){var s,a,c;const n=[];let r=[];e.length>0?r=[...e]:(await this.getPoolImmutablesWithPage(t,i)).data.forEach(u=>r.push(u.poolAddress));const o=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0,showType:!0});for(const l of o){if(l.error!=null||((a=(s=l.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`getPoolWithPages error code: ${((c=l.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=Aa(l);n.push(u);const m=`${u.poolAddress}_getPoolObject`;this.updateCache(m,u,Q)}return n}async getPool(e,t=!0){var s,a,c;const i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if(r.error!=null||((a=(s=r.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`getPool error code: ${((c=r.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const o=Aa(r);return this.updateCache(i,o),o}async getPoolByCoins(e,t){if(e.length===0)return[];const i=this._sdk.sdkOptions.swapCountUrl,n=await fetch(i);let r;try{r=await n.json()}catch{throw new W(`Failed tp [arse response from ${i}].`,"InvalidSwapCountUrl")}const o=r.data.lp_list;if(!o||o.length===0)throw new W(`Failed tp [arse response from ${i}].`,"PoolsNotFound");const s=[];for(const a of o)e.includes(a.coin_a_address)&&e.includes(a.coin_b_address)&&(t!=null?a.object.feeRate===t&&s.push(a.address):s.push(a.address));return s.length>0?await this.getPools(s):[]}async creatPoolsTransactionPayload(e){for(const i of e)if(rc(pe(i.coinTypeA),pe(i.coinTypeB))){const n=i.coinTypeB;i.coinTypeB=i.coinTypeA,i.coinTypeA=n}return await this.creatPool(e)}async creatPoolTransactionPayload(e){if(rc(pe(e.coinTypeA),pe(e.coinTypeB))){const t=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=t}return"fix_amount_a"in e?await this.creatPoolAndAddLiquidity(e):await this.creatPool([e])}async getClmmConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.clmm_pool,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=qo(r),s=(await this._sdk.fullClient.queryEventsByPage({Transaction:o})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return s.length>0&&(s.forEach(c=>{const l=c.parsedJson;if(c.type)switch(R(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=l.global_config_id,a.admin_cap_id=l.admin_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break;case`${t}::rewarder::RewarderInitEvent`:a.global_vault_id=l.global_vault_id;break;case`${t}::partner::InitPartnerEvent`:a.partners_id=l.partners_id;break}}),this.updateCache(i,a,Q)),a}async getSuiTransactionResponse(e,t=!1){const i=`${e}_getSuiTransactionResponse`,n=this.getCache(i,t);if(n!==void 0)return n;let r;try{r=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{r=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(i,r,Q),r}async creatPool(e){const t=new $,{integrate:i,clmm_pool:n}=this.sdk.sdkOptions,r=j(n),o=r.global_config_id,s=r.pools_id;return e.forEach(a=>{const c=[t.object(o),t.object(s),t.pure.u32(a.tick_spacing),t.pure.u128(a.initialize_sqrt_price),t.pure.string(a.uri),t.object(L)];t.moveCall({target:`${i.published_at}::${wo}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),t}async creatPoolAndAddLiquidity(e){if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const t=new $,{integrate:i,clmm_pool:n}=this.sdk.sdkOptions,r=j(n),o=r.global_config_id,s=r.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=re.buildAddLiquidityFixTokenCoinInput(t,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,a,!1),l=re.buildAddLiquidityFixTokenCoinInput(t,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,a,!1),u=[t.object(o),t.object(s),t.pure.u32(e.tick_spacing),t.pure.u128(e.initialize_sqrt_price),t.pure.string(e.uri),c.targetCoin,l.targetCoin,t.pure.u32(Number(ii(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(ii(BigInt(e.tick_upper)).toString())),t.pure.u64(e.amount_a),t.pure.u64(e.amount_b),t.pure.bool(e.fix_amount_a),t.object(L)];return t.moveCall({target:`${i.published_at}::${Mn}::create_pool_with_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:u}),t}async fetchTicks(e){let t=[],i=[];for(;;){const r=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:i,limit:512});if(t=[...t,...r],r.length<512)break;i=[r[r.length-1].index]}return t}async getTicks(e){var l;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=[],r=[e.coinTypeA,e.coinTypeB],o=new $,s=o.makeMoveVec({elements:e.start.map(u=>o.pure.u32(u)),type:"u32"}),a=[o.object(e.pool_id),s,o.pure.u64(e.limit.toString())];if(o.moveCall({target:`${t.published_at}::${Vi}::fetch_ticks`,arguments:a,typeArguments:r}),!Xt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const c=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(c.error!=null)throw new W(`getTicks error code: ${c.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(l=c.events)==null||l.forEach(u=>{R(u.type).name==="FetchTicksResultEvent"&&u.parsedJson.ticks.forEach(m=>{n.push(Qg(m))})}),n}async fetchPositionRewardList(e){var s;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=[];let r=[];const o=512;for(;;){const a=[e.coinTypeA,e.coinTypeB],c=new $,l=c.makeMoveVec({elements:r.map(k=>c.pure.address(k)),type:void 0}),u=[c.object(e.pool_id),l,c.pure.u64(o)];if(c.moveCall({target:`${t.published_at}::${Vi}::fetch_positions`,arguments:u,typeArguments:a}),!Xt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const m=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:i.address});if(m.error!=null)throw new W(`fetch position reward error code: ${m.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const g=[];if((s=m==null?void 0:m.events)==null||s.forEach(k=>{R(k.type).name==="FetchPositionsEvent"&&k.parsedJson.positions.forEach(x=>{const T=bf(x);g.push(T)})}),n.push(...g),g.length<o)break;r=[g[g.length-1].pos_object_id]}return n}async fetchTicksByRpc(e){let t=[],i=null;const n=512;for(;;){const r=[],o=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:i,limit:n});if(i=o.nextCursor,o.data.forEach(s=>{R(s.objectType).module==="skip_list"&&r.push(s.objectId)}),t=[...t,...await this.getTicksByRpc(r)],i===null||o.data.length<n)break}return t}async getTicksByRpc(e){var n,r,o;const t=[],i=await this.sdk.fullClient.batchGetObjects(e,{showContent:!0,showType:!0});for(const s of i){if(s.error!=null||((r=(n=s.data)==null?void 0:n.content)==null?void 0:r.dataType)!=="moveObject")throw new W(`getTicksByRpc error code: ${((o=s.error)==null?void 0:o.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=xa(s);a!=null&&t.push(a)}return t}async getTickDataByIndex(e,t){var r,o;const i={type:"u64",value:ii(BigInt(Ig(t).toString())).toString()},n=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:i});if(n.error!=null||((o=(r=n.data)==null?void 0:r.content)==null?void 0:o.dataType)!=="moveObject")throw new W(`get tick by index: ${t} error: ${n.error}`,"InvalidTickIndex");return xa(n)}async getTickDataByObjectId(e){var i,n,r;const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});if(t.error!=null||((n=(i=t.data)==null?void 0:i.content)==null?void 0:n.dataType)!=="moveObject")throw new W(`getTicksByRpc error code: ${((r=t.error)==null?void 0:r.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return xa(t)}async getPartnerRefFeeAmount(e,t=!0){var c,l;const i=await this._sdk.fullClient.batchGetObjects([e],{showOwner:!0,showContent:!0,showDisplay:t,showType:!0});if(i[0].error!=null||((l=(c=i[0].data)==null?void 0:c.content)==null?void 0:l.dataType)!=="moveObject")throw new W(`get partner by object id: ${e} error: ${i[0].error}`,"NotFoundPartnerObject");const n=i[0].data.content.fields.balances,r=await this._sdk.fullClient.getDynamicFieldsByPage(n.fields.id.id),o=[];r.data.forEach(u=>{var m,g;if(u.error!=null||((g=(m=u.data)==null?void 0:m.content)==null?void 0:g.dataType)!=="moveObject")throw new W(`when getPartnerRefFeeAmount get partner object error: ${u.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");o.push(u.objectId)});const s=[];return(await this._sdk.fullClient.batchGetObjects(o,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(u=>{var g,k;if(u.error!=null||((k=(g=u.data)==null?void 0:g.content)==null?void 0:k.dataType)!=="moveObject")throw new W(`get coin by object id: ${u.data.objectId} error: ${u.error}`,"InvalidParnterRefFeeFields");const m={coinAddress:u.data.content.fields.name,coinObjectId:u.data.objectId,balance:BigInt(u.data.content.fields.value)};s.push(m)}),s}async claimPartnerRefFeePayload(e,t,i){const n=new $,{clmm_pool:r}=this.sdk.sdkOptions,{global_config_id:o}=j(r),s=[i],a=[n.object(o),n.object(e),n.object(t)];return n.moveCall({target:`${r.published_at}::${bg}::claim_ref_fee`,arguments:a,typeArguments:s}),n}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},ib=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(e,t=[],i=!0){const n=[],r=await this._sdk.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:i,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),o=t.length>0;for(const s of r.data)if(R(s.data.type).full_address===this.buildPositionType()){const c=$r(s),l=`${c.pos_object_id}_getPositionList`;this.updateCache(l,c,Q),o?t.includes(c.pool)&&n.push(c):n.push(c)}return n}async getPosition(e,t,i=!0,n=!0){let r=await this.getSimplePosition(t,n);return i&&(r=await this.updatePositionRewarders(e,r)),r}async getPositionById(e,t=!0,i=!0){const n=await this.getSimplePosition(e,i);if(t){const r=await this._sdk.Pool.getPool(n.pool,!1);return await this.updatePositionRewarders(r.position_manager.positions_handle,n)}return n}async getSimplePosition(e,t=!0){const i=`${e}_getPositionList`;let n=this.getSimplePositionByCache(e);if(n===void 0){const r=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0,showDisplay:t,showOwner:!0}});n=$r(r),this.updateCache(i,n,Q)}return n}getSimplePositionByCache(e){const t=`${e}_getPositionList`;return this.getCache(t)}async getSipmlePositionList(e,t=!0){const i=[],n=[];return e.forEach(r=>{const o=this.getSimplePositionByCache(r);o?i.push(o):n.push(r)}),n.length>0&&(await this._sdk.fullClient.batchGetObjects(n,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(o=>{if(o.error==null){const s=$r(o);i.push(s);const a=`${s.pos_object_id}_getPositionList`;this.updateCache(a,s,Q)}}),i}async updatePositionRewarders(e,t){const i=await this.getPositionRewarders(e,t.pos_object_id);return{...t,...i}}async getPositionRewarders(e,t){try{const i=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),r=le(i.data).value.fields.value;return bf(r)}catch(i){console.log(i);return}}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new $;for(const l of e){const u=[l.coinTypeA,l.coinTypeB],m=[r.object(j(t).global_config_id),r.object(l.poolAddress),r.pure.address(l.positionId)];r.moveCall({target:`${i.published_at}::${Vi}::fetch_position_fees`,arguments:m,typeArguments:u})}if(!Xt(n.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address});if(o.error!=null)throw new W(`fetch position fee error code: ${o.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const s=(c=o.events)==null?void 0:c.filter(l=>R(l.type).name==="FetchPositionFeesEvent");if(s.length===0)return[];const a=[];for(let l=0;l<s.length;l+=1){const{parsedJson:u}=s[l],m={feeOwedA:new A(u.fee_owned_a),feeOwedB:new A(u.fee_owned_b),position_id:u.position_id};a.push(m)}return a}async batchFetchPositionFees(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB})}const i={};if(t.length>0){const n=await this.fetchPosFeeAmount(t);for(const r of n)i[r.position_id]=r;return i}return i}async createAddLiquidityFixTokenPayload(e,t,i,n,r){if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:s,isAdjustCoinB:a}=Bs(e);if(e=e,e.fix_amount_a&&s||!e.fix_amount_a&&a)return i=await re.buildAddLiquidityFixTokenForGas(this._sdk,o,e,t,i,n,r),i}return re.buildAddLiquidityFixToken(this._sdk,o,e,i,n,r)}async createAddLiquidityPayload(e,t,i,n){const{integrate:r,clmm_pool:o}=this._sdk.sdkOptions;if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const s=ii(BigInt(e.tick_lower)).toString(),a=ii(BigInt(e.tick_upper)).toString(),c=[e.coinTypeA,e.coinTypeB];t=t||new $;const l=!Tr(e.pos_id),u=BigInt(e.max_amount_a),m=BigInt(e.max_amount_b);let g,k;if(i==null||n==null){const x=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);g=re.buildCoinForAmount(t,x,u,e.coinTypeA,!1),k=re.buildCoinForAmount(t,x,m,e.coinTypeB,!1)}else g={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},k={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"};if(l)t.moveCall({target:`${r.published_at}::${Mn}::open_position_with_liquidity`,typeArguments:c,arguments:[t.object(j(o).global_config_id),t.object(e.pool_id),t.pure.u32(Number(s)),t.pure.u32(Number(a)),g.targetCoin,k.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object(L)]});else{const x=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=re.createCollectRewarderAndFeeParams(this._sdk,t,e,x,g.remainCoins,k.remainCoins),t.moveCall({target:`${r.published_at}::${Mn}::add_liquidity`,typeArguments:c,arguments:[t.object(j(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),g.targetCoin,k.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object(L)]})}return t}async removeLiquidityTransactionPayload(e,t){if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions,r="remove_liquidity";t=t||new $;const o=[e.coinTypeA,e.coinTypeB],s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=re.createCollectRewarderAndFeeParams(this._sdk,t,e,s);const a=[t.object(j(i).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(L)];return t.moveCall({target:`${n.published_at}::${wo}::${r}`,typeArguments:o,arguments:a}),t}async closePositionTransactionPayload(e,t){if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions;t=t||new $;const r=[e.coinTypeA,e.coinTypeB],o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return t=re.createCollectRewarderAndFeeParams(this._sdk,t,e,o),t.moveCall({target:`${n.published_at}::${wo}::close_position`,typeArguments:r,arguments:[t.object(j(i).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(L)]}),t}openPositionTransactionPayload(e,t){const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions;t=t||new $;const r=[e.coinTypeA,e.coinTypeB],o=ii(BigInt(e.tick_lower)).toString(),s=ii(BigInt(e.tick_upper)).toString(),a=[t.object(j(i).global_config_id),t.object(e.pool_id),t.pure.u32(Number(o)),t.pure.u32(Number(s))];return t.moveCall({target:`${n.published_at}::${wo}::open_position`,typeArguments:r,arguments:a}),t}async collectFeeTransactionPayload(e,t,i,n){if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0);t=t||new $;const o=re.buildCoinForAmount(t,r,BigInt(0),e.coinTypeA,!1),s=re.buildCoinForAmount(t,r,BigInt(0),e.coinTypeB,!1),a=i??o.targetCoin,c=n??s.targetCoin;return this.createCollectFeePaylod(e,t,a,c),t}createCollectFeePaylod(e,t,i,n){const{clmm_pool:r,integrate:o}=this.sdk.sdkOptions,s=[e.coinTypeA,e.coinTypeB],a=[t.object(j(r).global_config_id),t.object(e.pool_id),t.object(e.pos_id),i,n];return t.moveCall({target:`${o.published_at}::${Mn}::collect_fee`,typeArguments:s,arguments:a}),t}createCollectFeeNoSendPaylod(e,t,i,n){const{clmm_pool:r,integrate:o}=this.sdk.sdkOptions,s=[e.coinTypeA,e.coinTypeB],a=[t.object(j(r).global_config_id),t.object(e.pool_id),t.object(e.pos_id),i,n];return t.moveCall({target:`${o.published_at}::${lf}::collect_fee`,typeArguments:s,arguments:a}),t}async calculateFee(e){const t=await this.collectFeeTransactionPayload(e);if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const i=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:t,sender:this._sdk.senderAddress});for(const n of i.events)if(R(n.type).name==="CollectFeeEvent"){const r=n.parsedJson;return{feeOwedA:r.amount_a,feeOwedB:r.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},nb=class{constructor(e){X(this,"_sdk");X(this,"growthGlobal");this._sdk=e,this.growthGlobal=[se,se,se]}get sdk(){return this._sdk}async emissionsEveryDay(e){const i=(await this.sdk.Pool.getPool(e)).rewarder_infos;if(!i)return null;const n=[];for(const r of i){const o=ve.fromX64(new A(r.emissions_per_second));n.push({emissions:Math.floor(o.toNumber()*60*60*24),coin_address:r.coinAddress})}return n}async updatePoolRewarder(e,t){const i=await this.sdk.Pool.getPool(e),n=i.rewarder_last_updated_time;if(i.rewarder_last_updated_time=t.toString(),Number(i.liquidity)===0||t.eq(new A(n)))return i;const r=t.div(new A(1e3)).sub(new A(n)).add(new A(15)),o=i.rewarder_infos;for(let s=0;s<o.length;s+=1){const a=o[s],c=ve.checkMulDivFloor(r,new A(a.emissions_per_second),new A(i.liquidity),128);this.growthGlobal[s]=new A(a.growth_global).add(new A(c))}return i}async posRewardersAmount(e,t,i){const n=Date.parse(new Date().toString()),r=await this.updatePoolRewarder(e,new A(n)),o=await this.sdk.Position.getPositionRewarders(t,i);if(o===void 0)return[];const s=r.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(s,o.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(s,o.tick_upper_index);return this.posRewardersAmountInternal(r,o,a,c)}async poolRewardersAmount(e,t){const i=Date.parse(new Date().toString()),n=await this.updatePoolRewarder(t,new A(i)),r=await this.sdk.Position.getPositionList(e,[t]),o=await this.getPoolLowerAndUpperTicks(n.ticks_handle,r),s=[se,se,se];for(let a=0;a<r.length;a+=1){const c=await this.posRewardersAmountInternal(n,r[a],o[0][a],o[1][a]);for(let l=0;l<3;l+=1)s[l]=s[l].add(c[l].amount_owed)}return s}posRewardersAmountInternal(e,t,i,n){const r=t.tick_lower_index,o=t.tick_upper_index,s=Yg(e,i,n,r,o,this.growthGlobal),a=[],c=[];if(s.length>0){let l=ve.subUnderflowU128(s[0],new A(t.reward_growth_inside_0));l.gt(new A("3402823669209384634633745948738404"))&&(l=Yi);const u=ve.checkMulShiftRight(new A(t.liquidity),l,64,128);a.push(s[0]),c.push({amount_owed:new A(t.reward_amount_owed_0).add(u),coin_address:e.rewarder_infos[0].coinAddress})}if(s.length>1){let l=ve.subUnderflowU128(s[1],new A(t.reward_growth_inside_1));l.gt(new A("3402823669209384634633745948738404"))&&(l=Yi);const u=ve.checkMulShiftRight(new A(t.liquidity),l,64,128);a.push(s[1]),c.push({amount_owed:new A(t.reward_amount_owed_1).add(u),coin_address:e.rewarder_infos[1].coinAddress})}if(s.length>2){let l=ve.subUnderflowU128(s[2],new A(t.reward_growth_inside_2));l.gt(new A("3402823669209384634633745948738404"))&&(l=Yi);const u=ve.checkMulShiftRight(new A(t.liquidity),l,64,128);a.push(s[2]),c.push({amount_owed:new A(t.reward_amount_owed_2).add(u),coin_address:e.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB,rewarderInfo:o.rewarder_infos})}const i={};if(t.length>0){const n=await this.fetchPosRewardersAmount(t);for(const r of n)i[r.positionId]=r.rewarderAmountOwed;return i}return i}async fetchPositionRewarders(e,t){const i={poolAddress:e.poolAddress,positionId:t,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,rewarderInfo:e.rewarder_infos};return(await this.fetchPosRewardersAmount([i]))[0].rewarderAmountOwed}async batchFetchPositionFees(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB})}const i={};if(t.length>0){const n=await this.fetchPosFeeAmount(t);for(const r of n)i[r.position_id]=r;return i}return i}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new $;for(const l of e){const u=[l.coinTypeA,l.coinTypeB],m=[r.object(j(t).global_config_id),r.object(l.poolAddress),r.pure.address(l.positionId)];r.moveCall({target:`${i.published_at}::${Vi}::fetch_position_fees`,arguments:m,typeArguments:u})}const s=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address})).events)==null?void 0:c.filter(l=>R(l.type).name==="FetchPositionFeesEvent");if(s.length===0)return[];const a=[];for(let l=0;l<s.length;l+=1){const{parsedJson:u}=s[l],m={feeOwedA:new A(u.fee_owned_a),feeOwedB:new A(u.fee_owned_b),position_id:u.position_id};a.push(m)}return a}async fetchPosRewardersAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new $;for(const l of e){const u=[l.coinTypeA,l.coinTypeB],m=[r.object(j(t).global_config_id),r.object(l.poolAddress),r.pure.address(l.positionId),r.object(L)];r.moveCall({target:`${i.published_at}::${Vi}::fetch_position_rewards`,arguments:m,typeArguments:u})}if(!Xt(n.address))throw new W(`this config simulationAccount: ${n.address} is not set right`,"InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address});if(o.error!=null)throw new W(`fetch position rewards error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const s=(c=o.events)==null?void 0:c.filter(l=>R(l.type).name==="FetchPositionRewardsEvent");if(s.length===0)return[];if(s.length!==e.length)throw new W("valueData.length !== params.pools.length");const a=[];for(let l=0;l<s.length;l+=1){const u={poolAddress:e[l].poolAddress,positionId:e[l].positionId,rewarderAmountOwed:[]};for(let m=0;m<e[l].rewarderInfo.length;m+=1)u.rewarderAmountOwed.push({amount_owed:new A(s[l].parsedJson.data[m]),coin_address:e[l].rewarderInfo[m].coinAddress});a.push(u)}return a}async fetchPoolRewardersAmount(e,t){const i=await this.sdk.Pool.getPool(t),n=await this.sdk.Position.getPositionList(e,[t]),r=[];for(const a of n)r.push({poolAddress:i.poolAddress,positionId:a.pos_object_id,rewarderInfo:i.rewarder_infos,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB});const o=await this.fetchPosRewardersAmount(r),s=[se,se,se];if(o!=null)for(const a of o)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)s[c]=s[c].add(a.rewarderAmountOwed[c].amount_owed);return s}async getPoolLowerAndUpperTicks(e,t){const i=[],n=[];for(const r of t){const o=await this.sdk.Pool.getTickDataByIndex(e,r.tick_lower_index),s=await this.sdk.Pool.getTickDataByIndex(e,r.tick_upper_index);i.push(o),n.push(s)}return[i,n]}async collectRewarderTransactionPayload(e){if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let i=new $;return i=re.createCollectRewarderAndFeeParams(this._sdk,i,e,t),i}async batchCollectRewardePayload(e,t,i,n){if(!Xt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);t=t||new $;const o={};return e.forEach(s=>{const a=Dt(s.coinTypeA),c=Dt(s.coinTypeB);if(s.collect_fee){let u=o[a];u==null&&(i==null?u=re.buildCoinForAmount(t,r,BigInt(0),a,!1):u={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},o[a]=u);let m=o[c];m==null&&(n==null?m=re.buildCoinForAmount(t,r,BigInt(0),c,!1):m={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},o[c]=m),t=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:s.pool_id,pos_id:s.pos_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB},t,u.targetCoin,m.targetCoin)}const l=[];s.rewarder_coin_types.forEach(u=>{const m=Dt(u);let g=o[u];g===void 0&&(g=re.buildCoinForAmount(t,r,BigInt(0),m,!1),o[m]=g),l.push(g.targetCoin)}),t=this.createCollectRewarderNoSendPaylod(s,t,l)}),Object.keys(o).forEach(s=>{const a=o[s];a.isMintZeroCoin&&re.buildTransferCoin(this._sdk,t,a.targetCoin,s,this._sdk.senderAddress)}),t}createCollectRewarderPaylod(e,t,i){const{clmm_pool:n,integrate:r}=this.sdk.sdkOptions,o=j(n),s=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${r.published_at}::${Mn}::collect_reward`,typeArguments:[...s,a],arguments:[t.object(o.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(o.global_vault_id),i[c],t.object(L)]})}),t}createCollectRewarderNoSendPaylod(e,t,i){const{clmm_pool:n,integrate:r}=this.sdk.sdkOptions,o=j(n),s=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${r.published_at}::${lf}::collect_reward`,typeArguments:[...s,a],arguments:[t.object(o.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(o.global_vault_id),i[c],t.object(L)]})}),t}};function Xo(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}var rb=class{constructor(e){X(this,"graph");X(this,"pathProviders");X(this,"coinProviders");X(this,"_coinAddressMap");X(this,"poolAddressMap");X(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new bh(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=e,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:i,reversePair:n}=Xo(e,t);let r=this.poolAddressMap.get(i);if(r!=null)return{addressMap:r,direction:!0};if(r=this.poolAddressMap.get(n),r!=null)return{addressMap:r,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinAddressMap.set(e.address,e)})}loadGraph(e,t){this.addCoinProvider(e),this.addPathProvider(t),this.setCoinList(),this.pathProviders.forEach(i=>{const{paths:n}=i;n.forEach(r=>{const o=this.graph.getVertexByKey(r.base)??new el(r.base),s=this.graph.getVertexByKey(r.quote)??new el(r.quote);this.graph.addEdge(new mh(o,s));const a=this._coinAddressMap.get(r.base),c=this._coinAddressMap.get(r.quote);if(a!=null&&c!=null){const l=Xo(r.base,r.quote).pair;this.poolAddressMap.set(l,r.addressMap)}})})}addPathProvider(e){for(let t=0;t<e.paths.length;t+=1){const{base:i,quote:n}=e.paths[t];i.localeCompare(n)<0&&(e.paths[t].base=n,e.paths[t].quote=i),i==="0x2::sui::SUI"&&(e.paths[t].base=n,e.paths[t].quote=i),n==="0x2::sui::SUI"&&(e.paths[t].base=i,e.paths[t].quote=n)}return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.get(e)}getFeeRate(e,t,i){const n=Xo(e,t).pair,r=this.poolAddressMap.get(n);if(r!=null){for(const[a,c]of r.entries())if(c===i)return a*100}const o=Xo(e,t).reversePair,s=this.poolAddressMap.get(o);if(s!=null){for(const[a,c]of s.entries())if(c===i)return a*100}return 0}async price(e,t,i,n,r,o,s){const a=this.tokenInfo(e),c=this.tokenInfo(t);if(a===void 0||c===void 0)throw new W("From/To coin is undefined","InvalidCoin");const l=this.graph.getVertexByKey(a.address),u=this.graph.getVertexByKey(c.address),m=this.graph.findAllPath(l,u),g=Array.from(m);if(g.length===0)throw new W("No find valid path in coin graph","NotFoundPath");let k=[];for(let ie=0;ie<g.length;ie+=1){const z=g[ie];if(z.length>3)continue;const te=[],O=[],f=[],d=[];for(let h=0;h<z.length-1;h+=1){const b=z[h].value.toString(),w=z[h+1].value.toString(),y=this.getPoolAddressMapAndDirection(b,w),C=y==null?void 0:y.addressMap,v=y==null?void 0:y.direction;C!=null&&v!=null&&(O.push(v),te.push(b),te.push(w),C.forEach(p=>{h===0?f.push(p):d.push(p)}))}for(const h of f)if(d.length>0)for(const b of d){const w={stepNums:2,poolAB:h,poolBC:b,a2b:O[0],b2c:O[1],amount:i,byAmountIn:n,coinTypeA:te[0],coinTypeB:te[1],coinTypeC:te[3]};k.push(w)}else{const b={stepNums:1,poolAB:h,poolBC:void 0,a2b:O[0],b2c:void 0,amount:i,byAmountIn:n,coinTypeA:te[0],coinTypeB:te[1],coinTypeC:void 0};k.push(b)}}const x=k.filter(ie=>ie.stepNums===1),T=k.filter(ie=>ie.stepNums!==1);let I=[];try{I=await this.getPoolWithTVL()}catch{I=[]}if(I.length>0){const ie=new Map(I.map(z=>[z.poolAddress,z]));T.sort((z,te)=>{let O=0,f=0;if(ie.has(z.poolAB)&&ie.has(z.poolBC)){const d=ie.get(z.poolAB),h=ie.get(z.poolBC);O=Math.min(d.tvl,h.tvl)}if(ie.has(te.poolAB)&&ie.has(te.poolBC)){const d=ie.get(te.poolAB),h=ie.get(te.poolBC);f=Math.min(d.tvl,h.tvl)}return f-O})}if(k=[...x,...T],k.length===0){if(s!=null){const ie=await this.sdk.Swap.preSwapWithMultiPool(s),z={amountIn:new A(ie.estimatedAmountIn),amountOut:new A(ie.estimatedAmountOut),poolAddress:[ie.poolAddress],a2b:[ie.aToB],rawAmountLimit:n?[ie.estimatedAmountOut]:[ie.estimatedAmountIn],isExceed:ie.isExceed,coinType:[e,t]},te={paths:[z],partner:o,priceSlippagePoint:r};return{amountIn:new A(ie.estimatedAmountIn),amountOut:new A(ie.estimatedAmountOut),paths:[z],a2b:ie.aToB,b2c:void 0,byAmountIn:n,isExceed:ie.isExceed,targetSqrtPrice:[ie.estimatedEndSqrtPrice],currentSqrtPrice:[ie.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:te}}throw new W("No parameters available for service downgrade","NoDowngradeNeedParams")}const E=await this.preRouterSwapA2B2C(k.slice(0,16));if(E==null){if(s!=null){const z=await this.sdk.Swap.preSwapWithMultiPool(s),te={amountIn:new A(z.estimatedAmountIn),amountOut:new A(z.estimatedAmountOut),poolAddress:[z.poolAddress],a2b:[z.aToB],rawAmountLimit:n?[z.estimatedAmountOut]:[z.estimatedAmountIn],isExceed:z.isExceed,coinType:[e,t]},O={paths:[te],partner:o,priceSlippagePoint:r};return{amountIn:new A(z.estimatedAmountIn),amountOut:new A(z.estimatedAmountOut),paths:[te],a2b:z.aToB,b2c:void 0,byAmountIn:n,isExceed:z.isExceed,targetSqrtPrice:[z.estimatedEndSqrtPrice],currentSqrtPrice:[z.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:O}}return{amountIn:se,amountOut:se,paths:[],a2b:!1,b2c:!1,byAmountIn:n,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const B=E.index,N=k[B].poolBC!=null?[k[B].poolAB,k[B].poolBC]:[k[B].poolAB],F=n?[E.amountMedium,E.amountOut]:[E.amountIn,E.amountMedium],H=[];H.push(k[B].a2b),E.stepNum>1&&H.push(k[B].b2c);const K=[];K.push(k[B].coinTypeA),K.push(k[B].coinTypeB),E.stepNum>1&&K.push(k[B].coinTypeC);const ee={amountIn:E.amountIn,amountOut:E.amountOut,poolAddress:N,a2b:H,rawAmountLimit:F,isExceed:E.isExceed,coinType:K},me={paths:[ee],partner:o,priceSlippagePoint:r};return{amountIn:E.amountIn,amountOut:E.amountOut,paths:[ee],a2b:k[B].a2b,b2c:E.stepNum>1?k[B].b2c:void 0,byAmountIn:n,isExceed:E.isExceed,targetSqrtPrice:E.targetSqrtPrice,currentSqrtPrice:E.currentSqrtPrice,coinTypeA:k[B].coinTypeA,coinTypeB:k[B].coinTypeB,coinTypeC:E.stepNum>1?k[B].coinTypeC:void 0,createTxParams:me}}async priceUseV1(e,t,i,n,r,o,s){if(s!=null){const a=await this.sdk.Swap.preSwapWithMultiPool(s),c={amountIn:new A(a.estimatedAmountIn),amountOut:new A(a.estimatedAmountOut),poolAddress:[a.poolAddress],a2b:[a.aToB],rawAmountLimit:n?[a.estimatedAmountOut]:[a.estimatedAmountIn],isExceed:a.isExceed,coinType:[e,t]},l={paths:[c],partner:o,priceSlippagePoint:r};return{amountIn:new A(a.estimatedAmountIn),amountOut:new A(a.estimatedAmountOut),paths:[c],a2b:a.aToB,b2c:void 0,byAmountIn:n,isExceed:a.isExceed,targetSqrtPrice:[a.estimatedEndSqrtPrice],currentSqrtPrice:[a.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:l}}throw new W("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(e){var m;if(e.length===0)return null;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new $;for(const g of e)if(g.stepNums>1){const k=[n.object(g.poolAB),n.object(g.poolBC),n.pure.bool(g.a2b),n.pure.bool(g.b2c),n.pure.bool(g.byAmountIn),n.pure.u64(g.amount.toString())],x=[];g.a2b?x.push(g.coinTypeA,g.coinTypeB):x.push(g.coinTypeB,g.coinTypeA),g.b2c?x.push(g.coinTypeB,g.coinTypeC):x.push(g.coinTypeC,g.coinTypeB),n.moveCall({target:`${t.published_at}::${dr}::calculate_router_swap_result`,typeArguments:x,arguments:k})}else{const k=[n.object(g.poolAB),n.pure.bool(g.a2b),n.pure.bool(g.byAmountIn),n.pure.u64(g.amount.toString())],x=g.a2b?[g.coinTypeA,g.coinTypeB]:[g.coinTypeB,g.coinTypeA];n.moveCall({target:`${t.published_at}::${wg}::get_expect_swap_result`,arguments:k,typeArguments:x})}if(!Xt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const o=(m=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address})).events)==null?void 0:m.filter(g=>R(g.type).name==="CalculatedRouterSwapResultEvent"||R(g.type).name==="ExpectSwapResultEvent");if(o.length===0)return null;let s=e[0].byAmountIn?se:Kr,a=0;for(let g=0;g<o.length;g+=1)if(!o[g].parsedJson.data.is_exceed)if(e[0].byAmountIn){const k=new A(o[g].parsedJson.data.amount_out);k.gt(s)&&(a=g,s=k)}else{const k=e[g].stepNums>1?new A(o[g].parsedJson.data.amount_in):new A(o[g].parsedJson.data.amount_in).add(new A(o[g].parsedJson.data.fee_amount));k.lt(s)&&(a=g,s=k)}const c=[],l=[];return e[a].stepNums>1?(l.push(o[a].parsedJson.data.target_sqrt_price_ab,o[a].parsedJson.data.target_sqrt_price_cd),c.push(o[a].parsedJson.data.current_sqrt_price_ab,o[a].parsedJson.data.current_sqrt_price_cd)):(l.push(o[a].parsedJson.data.after_sqrt_price),c.push(o[a].parsedJson.current_sqrt_price)),{index:a,amountIn:e[0].byAmountIn?e[a].amount:s,amountMedium:o[a].parsedJson.data.amount_medium,amountOut:e[0].byAmountIn?s:e[a].amount,targetSqrtPrice:l,currentSqrtPrice:c,isExceed:o[a].parsedJson.data.is_exceed,stepNum:e[a].stepNums}}async getPoolWithTVL(){const e=[],{swapCountUrl:t}=this._sdk.sdkOptions;if(!t)return e;let i;try{i=await fetch(t)}catch{throw new W(`Failed to get pool list with liquidity from ${t}.`,"InvalidSwapCountUrl")}let n;try{n=await i.json()}catch{throw new W(`Failed tp [arse response from ${t}].`,"InvalidSwapCountUrl")}if(n.code!==200)throw new W(`Failed to get pool list from ${t}. Statu code is ${n.code}.`,"InvalidSwapCountUrl");const{pools:r}=n.data;for(const o of r)e.push({poolAddress:o.swap_account,tvl:Number(o.tvl_in_usd)});return e}},ob=class{constructor(e){X(this,"_sdk");X(this,"calculateSingleImpact",(e,t)=>t.minus(e).div(t).mul(100));this._sdk=e}get sdk(){return this._sdk}calculateSwapFee(e){let t=M(0);return e.forEach(i=>{const n=i.basePaths.length;if(n>0){const r=i.basePaths[0],o=r.label==="Cetus"?new J(r.feeRate).div(10**6):new J(r.feeRate).div(10**9),s=M(r.inputAmount).div(10**r.fromDecimal).mul(o);if(t=t.add(s),n>1){const a=i.basePaths[1],c=r.direction?r.currentPrice:new J(1).div(r.currentPrice),l=a.direction?a.currentPrice:new J(1).div(a.currentPrice),u=a.label==="Cetus"?new J(a.feeRate).div(10**6):new J(a.feeRate).div(10**9),g=M(a.outputAmount).div(10**a.toDecimal).mul(u).div(c.mul(l));t=t.add(g)}}}),t.toString()}calculateSwapPriceImpact(e){let t=M(0);return e.forEach(i=>{const n=i.basePaths.length;if(n===1){const r=i.basePaths[0],o=M(r.outputAmount).div(10**r.toDecimal),s=M(r.inputAmount).div(10**r.fromDecimal),a=o.div(s),c=r.direction?new J(r.currentPrice):new J(1).div(r.currentPrice);t=t.add(this.calculateSingleImpact(a,c))}if(n===2){const r=i.basePaths[0],o=i.basePaths[1],s=r.direction?new J(r.currentPrice):new J(1).div(r.currentPrice),a=o.direction?new J(o.currentPrice):new J(1).div(o.currentPrice),c=s.mul(a),l=new J(o.outputAmount).div(10**o.toDecimal),u=new J(r.inputAmount).div(10**r.fromDecimal),m=l.div(u);t=t.add(this.calculateSingleImpact(m,c))}}),t.toString()}async preSwapWithMultiPool(e){var l;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new $,r=[e.coinTypeA,e.coinTypeB];for(let u=0;u<e.poolAddresses.length;u+=1){const m=[n.object(e.poolAddresses[u]),n.pure.bool(e.a2b),n.pure.bool(e.byAmountIn),n.pure.u64(e.amount)];n.moveCall({target:`${t.published_at}::${Vi}::calculate_swap_result`,arguments:m,typeArguments:r})}if(!Xt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address});if(o.error!=null)throw new W(`pre swap with multi pools error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const s=(l=o.events)==null?void 0:l.filter(u=>R(u.type).name==="CalculatedSwapResultEvent");if(s.length===0)return null;if(s.length!==e.poolAddresses.length)throw new W("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=e.byAmountIn?se:Kr,c=0;for(let u=0;u<s.length;u+=1)if(!s[u].parsedJson.data.is_exceed)if(e.byAmountIn){const m=new A(s[u].parsedJson.data.amount_out);m.gt(a)&&(c=u,a=m)}else{const m=new A(s[u].parsedJson.data.amount_out);m.lt(a)&&(c=u,a=m)}return this.transformSwapWithMultiPoolData({poolAddress:e.poolAddresses[c],a2b:e.a2b,byAmountIn:e.byAmountIn,amount:e.amount,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},s[c].parsedJson)}async preswap(e){var c;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new $,r=[e.coinTypeA,e.coinTypeB],o=[n.object(e.pool.poolAddress),n.pure.bool(e.a2b),n.pure.bool(e.byAmountIn),n.pure.u64(e.amount)];if(n.moveCall({target:`${t.published_at}::${Vi}::calculate_swap_result`,arguments:o,typeArguments:r}),!Xt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address});if(s.error!=null)throw new W(`preswap error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=s.events)==null?void 0:c.filter(l=>R(l.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const i=t.amount_in&&t.fee_amount?new A(t.amount_in).add(new A(t.fee_amount)).toString():"";return{poolAddress:e.pool.poolAddress,currentSqrtPrice:e.currentSqrtPrice,estimatedAmountIn:i,estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}transformSwapWithMultiPoolData(e,t){const{data:i}=t;console.log("json data. ",i);const n=i.amount_in&&i.fee_amount?new A(i.amount_in).add(new A(i.fee_amount)).toString():"";return{poolAddress:e.poolAddress,estimatedAmountIn:n,estimatedAmountOut:i.amount_out,estimatedEndSqrtPrice:i.after_sqrt_price,estimatedStartSqrtPrice:i.step_results[0].current_sqrt_price,estimatedFeeAmount:i.fee_amount,isExceed:i.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}calculateRates(e){const{currentPool:t}=e,i=gg(t);let n;e.a2b?n=e.swapTicks.sort((m,g)=>g.index-m.index):n=e.swapTicks.sort((m,g)=>m.index-g.index);const r=Bg(e.a2b,e.byAmountIn,e.amount,i,n);let o=!1;e.byAmountIn?o=r.amountIn.lt(e.amount):o=r.amountOut.lt(e.amount);const s=Xi.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&r.nextSqrtPrice.lt(s)&&(o=!0),!e.a2b&&r.nextSqrtPrice.gt(s)&&(o=!0);let a=0;r.crossTickNum>6&&r.crossTickNum<40&&(a=22e3*(r.crossTickNum-6)),r.crossTickNum>40&&(o=!0);const c=Y.sqrtPriceX64ToPrice(i.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),l=Y.sqrtPriceX64ToPrice(r.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),u=Math.abs(c-l)/c*100;return{estimatedAmountIn:r.amountIn,estimatedAmountOut:r.amountOut,estimatedEndSqrtPrice:r.nextSqrtPrice,estimatedFeeAmount:r.feeAmount,isExceed:o,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:u}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:n,isAdjustCoinB:r}=Bs(e);if(e.a2b&&n||!e.a2b&&r)return await re.buildSwapTransactionForGas(this._sdk,e,i,t)}return re.buildSwapTransaction(this.sdk,e,i)}async createSwapTransactionWithoutTransferCoinsPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:n,isAdjustCoinB:r}=Bs(e);if(e.a2b&&n||!e.a2b&&r)return await re.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,e,i,t)}return re.buildSwapTransactionWithoutTransferCoins(this.sdk,e,i)}},sb=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",i=!1){return await this.factchWarpPoolList(e,t,i)}async getTokenListByCoinTypes(e){const t={},i="getAllRegisteredTokenList",n=this.getCache(i);if(n!==void 0){const o=n;for(const s of e)for(const a of o)if(Dt(s)===Dt(a.address)){t[s]=a;continue}}const r=e.filter(o=>t[o]===void 0);for(const o of r){const s=`${o}_metadata`,a=this.getCache(s);if(a!==void 0)t[o]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:o});if(c){const l={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:o};t[o]=l,this.updateCache(s,l,Q)}}}return t}async factchTokenList(e="",t=!1){var m;const{simulationAccount:i,token:n}=this.sdk.sdkOptions,r="getAllRegisteredTokenList",o=this.getCache(r,t);if(o!==void 0)return o;const s=e.length>0,a=512;let c=0,l=[];if(n===void 0)throw Error("please config token ofsdkOptions");const u=j(n);for(;;){const g=new $;g.moveCall({target:`${n.published_at}::coin_list::${s?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:s?[g.pure.address(u.coin_registry_id),g.pure.address(e),g.pure.u64(c),g.pure.u64(a)]:[g.pure.address(u.coin_registry_id),g.pure.u64(c),g.pure.u64(a)]});const k=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:g,sender:i.address}),x=[];if((m=k.events)==null||m.forEach(T=>{R(T.type).full_address===`${n.published_at}::coin_list::FetchCoinListEvent`&&T.parsedJson.full_list.value_list.forEach(E=>{x.push(this.transformData(E,!1))})}),l=[...l,...x],x.length<a)break;c=l.length}return l}async factchPoolList(e="",t=!1){var m;const{simulationAccount:i,token:n}=this.sdk.sdkOptions,r="getAllRegisteredPoolList",o=this.getCache(r,t);if(o!==void 0)return o;let s=[];const a=512;let c=0;const l=e.length>0;if(n===void 0)throw Error("please config token ofsdkOptions");const u=j(n);for(;;){const g=new $;if(g.moveCall({target:`${n.published_at}::lp_list::${l?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:l?[g.pure.address(u.pool_registry_id),g.pure.address(e),g.pure.u64(c),g.pure.u64(a)]:[g.pure.address(u.pool_registry_id),g.pure.u64(c),g.pure.u64(a)]}),!Xt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const k=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:g,sender:i.address}),x=[];if((m=k.events)==null||m.forEach(T=>{R(T.type).full_address===`${n.published_at}::lp_list::FetchPoolListEvent`&&T.parsedJson.full_list.value_list.forEach(E=>{x.push(this.transformData(E,!0))})}),s=[...s,...x],x.length<a)break;c=s.length}return s}async factchWarpPoolList(e="",t="",i=!1){const n=await this.factchPoolList(e,i);if(n.length===0)return[];const r=await this.factchTokenList(t,i),o=[];for(const s of n){for(const a of r)a.address===s.coin_a_address&&(s.coinA=a),a.address===s.coin_b_address&&(s.coinB=a);o.push(s)}return o}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.token.package_id,i=`${t}_getTokenConfigEvent`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=qo(r),s=await this._sdk.fullClient.queryEventsByPage({Transaction:o}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return s.data.length>0&&s.data.forEach(c=>{const l=R(c.type);if(c.transactionModule==="coin_list")switch(l.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(l.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(i,a,Q),a}transformData(e,t){const i={...e};if(t)try{i.coin_a_address=R(i.coin_a_address).full_address,i.coin_b_address=R(i.coin_b_address).full_address}catch{}else i.address=R(i.address).full_address;if(e.extensions){const n=e.extensions.contents;for(const r of n){const{key:o}=r;let{value:s}=r;if(o==="labels")try{s=JSON.parse(decodeURIComponent(ts.decode(s)))}catch{}o==="pyth_id"&&(s=ze(s)),i[o]=s}delete i.extensions}return i}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},ab=class{constructor(e){X(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}calculatePrice(e,t,i,n,r){const o=n?t:i,s=n?i:t;return r==="Cetus"?Y.sqrtPriceX64ToPrice(e,o,s):new J(e.toString()).div(new J(10).pow(new J(s+9-o)))}parseJsonResult(e){return{isExceed:e.is_exceed,isTimeout:e.is_timeout,inputAmount:e.input_amount,outputAmount:e.output_amount,fromCoin:e.from_coin,toCoin:e.to_coin,byAmountIn:e.by_amount_in,splitPaths:e.split_paths.map(i=>({pathIndex:i.path_index,lastQuoteOutput:i.last_quote_output,percent:i.percent,basePaths:i.best_path.map(r=>({direction:r.direction,label:r.label,poolAddress:r.provider,fromCoin:r.from_coin,toCoin:r.to_coin,outputAmount:r.output_amount,inputAmount:r.input_amount,feeRate:r.fee_rate,currentSqrtPrice:new A(r.current_sqrt_price.toString()),afterSqrtPrice:r.label==="Cetus"?new A(r.after_sqrt_price.toString()):se,fromDecimal:r.from_decimal,toDecimal:r.to_decimal,currentPrice:this.calculatePrice(new A(r.current_sqrt_price.toString()),r.from_decimal,r.to_decimal,r.direction,r.label)})),inputAmount:i.input_amount,outputAmount:i.output_amount}))}}async fetchDataWithAxios(e,t,i){try{const n={...t,timeout:i},r=await eg(e,n);return r.status===200?this.parseJsonResult(r.data):null}catch(n){return console.error(n),null}}async getBestRouter(e,t,i,n,r,o,s,a,c=!1,l=!1,u=[]){let m=null,g="v2",k={},x=this.sdk.sdkOptions.aggregatorUrl;if(u.length>0){const T=new URL(x);x=`${T.protocol}//${T.hostname}/router_with_lp_changes`,k={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:i,by_amount_in:n,order_split:c,external_router:l,sender_address:"None",request_id:encodeURIComponent(zo()),lp_changes:u})}}else x=`
      ${x}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(i)}&by_amount_in=${encodeURIComponent(n)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(l)}&sender_address=''&request_id=${encodeURIComponent(zo())}
      `;if(m=await this.fetchDataWithAxios(x,k,6e3),m==null){const T=await this.sdk.Router.priceUseV1(e,t,new A(i),n,r,o,a),I=[];for(const B of T.paths){const N=[];if(B.poolAddress.length>1){const H=this.sdk.Router.tokenInfo(B.coinType[0]).decimals,K=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ee=B.a2b[0]?Y.sqrtPriceX64ToPrice(new A(T.currentSqrtPrice[0]),H,K):Y.sqrtPriceX64ToPrice(new A(T.currentSqrtPrice[0]),K,H),me={direction:B.a2b[0],label:"Cetus",poolAddress:B.poolAddress[0],fromCoin:B.coinType[0],toCoin:B.coinType[1],feeRate:this.sdk.Router.getFeeRate(B.coinType[0],B.coinType[1],B.poolAddress[0]),outputAmount:T.byAmountIn?B.rawAmountLimit[0].toString():B.rawAmountLimit[1].toString(),inputAmount:B.amountIn.toString(),currentSqrtPrice:T.currentSqrtPrice[0],currentPrice:ee,fromDecimal:H,toDecimal:K},be=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ie=this.sdk.Router.tokenInfo(B.coinType[2]).decimals,z=B.a2b[1]?Y.sqrtPriceX64ToPrice(new A(T.currentSqrtPrice[1]),be,ie):Y.sqrtPriceX64ToPrice(new A(T.currentSqrtPrice[1]),ie,be),te={direction:B.a2b[1],label:"Cetus",poolAddress:B.poolAddress[1],fromCoin:B.coinType[1],toCoin:B.coinType[2],feeRate:this.sdk.Router.getFeeRate(B.coinType[1],B.coinType[2],B.poolAddress[1]),outputAmount:B.amountOut.toString(),inputAmount:T.byAmountIn?B.rawAmountLimit[0].toString():B.rawAmountLimit[1].toString(),currentSqrtPrice:T.currentSqrtPrice[1],currentPrice:z,fromDecimal:be,toDecimal:ie};N.push(me,te)}else{const H=this.sdk.Router.tokenInfo(B.coinType[0]).decimals,K=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ee=B.a2b[0]?Y.sqrtPriceX64ToPrice(new A(T.currentSqrtPrice[0]),H,K):Y.sqrtPriceX64ToPrice(new A(T.currentSqrtPrice[0]),K,H),me={direction:B.a2b[0],label:"Cetus",poolAddress:B.poolAddress[0],fromCoin:B.coinType[0],toCoin:B.coinType[1],feeRate:this.sdk.Router.getFeeRate(B.coinType[0],B.coinType[1],B.poolAddress[0]),outputAmount:B.amountOut.toString(),inputAmount:B.amountIn.toString(),currentSqrtPrice:T.currentSqrtPrice[0],currentPrice:ee,fromDecimal:H,toDecimal:K};N.push(me)}const F={percent:Number(B.amountIn)/Number(T.amountIn)*100,inputAmount:Number(B.amountIn.toString()),outputAmount:Number(B.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:N};I.push(F)}const E={isExceed:T.isExceed,isTimeout:!0,inputAmount:Number(T.amountIn.toString()),outputAmount:Number(T.amountOut.toString()),fromCoin:T.coinTypeA,toCoin:T.coinTypeC!=null?T.coinTypeC:T.coinTypeB,byAmountIn:T.byAmountIn,splitPaths:I};g="v1",m=E}return{result:m,version:g}}async getBestRouterByServer(e,t,i,n,r,o=!1,s=!1,a=[]){let c=null,l={},u=this.sdk.sdkOptions.aggregatorUrl;if(a.length>0){const m=new URL(u);u=`${m.protocol}//${m.hostname}/router_with_lp_changes`,l={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:i,by_amount_in:n,order_split:o,external_router:s,sender_address:"None",request_id:encodeURIComponent(zo()),lp_changes:a})}}else u=`
      ${u}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(i)}&by_amount_in=${encodeURIComponent(n)}&order_split=${encodeURIComponent(o)}&external_router=${encodeURIComponent(s)}&sender_address=''&request_id=${encodeURIComponent(zo())}
      `;if(c=await this.fetchDataWithAxios(u,l,6e3),c==null)throw new W("Invalid server response","InvalidServerResponse");return c}async getBestRouterByRpc(e,t,i,n,r,o,s){const a=await this.sdk.Router.priceUseV1(e,t,new A(i),n,r,o,s),c=[];for(const u of a.paths){const m=[];if(u.poolAddress.length>1){const k=this.sdk.Router.tokenInfo(u.coinType[0]).decimals,x=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,T=u.a2b[0]?Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[0]),k,x):Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[0]),x,k),I={direction:u.a2b[0],label:"Cetus",poolAddress:u.poolAddress[0],fromCoin:u.coinType[0],toCoin:u.coinType[1],feeRate:this.sdk.Router.getFeeRate(u.coinType[0],u.coinType[1],u.poolAddress[0]),outputAmount:a.byAmountIn?u.rawAmountLimit[0].toString():u.rawAmountLimit[1].toString(),inputAmount:u.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:T,fromDecimal:k,toDecimal:x},E=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,B=this.sdk.Router.tokenInfo(u.coinType[2]).decimals,N=u.a2b[1]?Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[1]),E,B):Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[1]),B,E),F={direction:u.a2b[1],label:"Cetus",poolAddress:u.poolAddress[1],fromCoin:u.coinType[1],toCoin:u.coinType[2],feeRate:this.sdk.Router.getFeeRate(u.coinType[1],u.coinType[2],u.poolAddress[1]),outputAmount:u.amountOut.toString(),inputAmount:a.byAmountIn?u.rawAmountLimit[0].toString():u.rawAmountLimit[1].toString(),currentSqrtPrice:a.currentSqrtPrice[1],currentPrice:N,fromDecimal:E,toDecimal:B};m.push(I,F)}else{const k=this.sdk.Router.tokenInfo(u.coinType[0]).decimals,x=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,T=u.a2b[0]?Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[0]),k,x):Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[0]),x,k),I={direction:u.a2b[0],label:"Cetus",poolAddress:u.poolAddress[0],fromCoin:u.coinType[0],toCoin:u.coinType[1],feeRate:this.sdk.Router.getFeeRate(u.coinType[0],u.coinType[1],u.poolAddress[0]),outputAmount:u.amountOut.toString(),inputAmount:u.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:T,fromDecimal:k,toDecimal:x};m.push(I)}const g={percent:Number(u.amountIn)/Number(a.amountIn)*100,inputAmount:Number(u.amountIn.toString()),outputAmount:Number(u.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:m};c.push(g)}return{isExceed:a.isExceed,isTimeout:!0,inputAmount:Number(a.amountIn.toString()),outputAmount:Number(a.amountOut.toString()),fromCoin:a.coinTypeA,toCoin:a.coinTypeC!=null?a.coinTypeC:a.coinTypeB,byAmountIn:a.byAmountIn,splitPaths:c}}},cb=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}setTokenListCache(e){const{coin_list_handle:t}=j(this.sdk.sdkOptions.cetus_config),i=`${t}_getCoinConfigs`,n=this.getCache(i),r=n?[...n,...e]:e;this.updateCache(i,r,Q)}async getTokenListByCoinTypes(e){const t={},{coin_list_handle:i}=j(this.sdk.sdkOptions.cetus_config),n=`${i}_getCoinConfigs`,r=this.getCache(n);if(r!==void 0){const s=r;for(const a of e)for(const c of s)if(Dt(a)===Dt(c.address)){t[a]=c;continue}}const o=e.filter(s=>t[s]===void 0);for(const s of o){const a=`${s}_metadata`,c=this.getCache(a);if(c!==void 0)t[s]=c;else{const l=await this._sdk.fullClient.getCoinMetadata({coinType:s});if(l){const u={id:l.id,pyth_id:"",name:l.name,symbol:l.symbol,official_symbol:l.symbol,coingecko_id:"",decimals:l.decimals,project_url:"",logo_url:l.iconUrl,address:s};t[s]=u,this.updateCache(a,u,Q)}else console.log(`not found ${s}`)}}return t}async getCoinConfigs(e=!1,t=!0){const{coin_list_handle:i}=j(this.sdk.sdkOptions.cetus_config),n=`${i}_getCoinConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(l=>{var m,g;if(l.error!=null||((g=(m=l.data)==null?void 0:m.content)==null?void 0:g.dataType)!=="moveObject")throw new W(`when getCoinConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildCoinConfig(l,t);this.updateCache(`${i}_${u.address}_getCoinConfig`,u,Q),c.push({...u})}),this.updateCache(n,c,Q),c}async getCoinConfig(e,t=!1,i=!0){var c,l;const{coin_list_handle:n}=j(this.sdk.sdkOptions.cetus_config),r=`${n}_${e}_getCoinConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x1::type_name::TypeName",value:{name:qg(e)}}});if(s.error!=null||((l=(c=s.data)==null?void 0:c.content)==null?void 0:l.dataType)!=="moveObject")throw new W(`when getCoinConfig get object error: ${s.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(s,i);return this.updateCache(r,a,Q),a}buildCoinConfig(e,t=!0){let i=le(e);i=i.value.fields;const n={...i};return n.id=Li(e),n.address=R(i.coin_type.fields.name).full_address,i.pyth_id&&(n.pyth_id=ze(i.pyth_id)),this.transformExtensions(n,i.extension_fields.fields.contents,t),delete n.coin_type,n}async getClmmPoolConfigs(e=!1,t=!0){const{clmm_pools_handle:i}=j(this.sdk.sdkOptions.cetus_config),n=`${i}_getClmmPoolConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(l=>{var m,g;if(l.error!=null||((g=(m=l.data)==null?void 0:m.content)==null?void 0:g.dataType)!=="moveObject")throw new W(`when getClmmPoolsConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildClmmPoolConfig(l,t);this.updateCache(`${u.pool_address}_getClmmPoolConfig`,u,Q),c.push({...u})}),this.updateCache(n,c,Q),c}async getClmmPoolConfig(e,t=!1,i=!0){const{clmm_pools_handle:n}=j(this.sdk.sdkOptions.cetus_config),r=`${e}_getClmmPoolConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}}),a=this.buildClmmPoolConfig(s,i);return this.updateCache(r,a,Q),a}buildClmmPoolConfig(e,t=!0){let i=le(e);i=i.value.fields;const n={...i};return n.id=Li(e),n.pool_address=ze(i.pool_address),this.transformExtensions(n,i.extension_fields.fields.contents,t),n}async getLaunchpadPoolConfigs(e=!1,t=!0){const{launchpad_pools_handle:i}=j(this.sdk.sdkOptions.cetus_config),n=`${i}_getLaunchpadPoolConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(l=>l.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(l=>{var m,g;if(l.error!=null||((g=(m=l.data)==null?void 0:m.content)==null?void 0:g.dataType)!=="moveObject")throw new W(`when getCoinConfigs get objects error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildLaunchpadPoolConfig(l,t);this.updateCache(`${u.pool_address}_getLaunchpadPoolConfig`,u,Q),c.push({...u})}),this.updateCache(n,c,Q),c}async getLaunchpadPoolConfig(e,t=!1,i=!0){const{launchpad_pools_handle:n}=j(this.sdk.sdkOptions.cetus_config),r=`${e}_getLaunchpadPoolConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}}),a=this.buildLaunchpadPoolConfig(s,i);return this.updateCache(r,a,Q),a}buildLaunchpadPoolConfig(e,t=!0){let i=le(e);i=i.value.fields;const n={...i};n.id=Li(e),n.pool_address=ze(i.pool_address),this.transformExtensions(n,i.extension_fields.fields.contents,t);const r=[];i.social_media.fields.contents.forEach(o=>{r.push({name:o.fields.value.fields.name,link:o.fields.value.fields.link})}),n.social_media=r;try{n.regulation=decodeURIComponent(ts.decode(n.regulation).replace(/%/g,"%25"))}catch{n.regulation=ts.decode(n.regulation)}return n}transformExtensions(e,t,i=!0){const n=[];for(const r of t){const{key:o}=r.fields;let{value:s}=r.fields;if(o==="labels")try{const a=decodeURIComponent(ts.decode(s));try{s=JSON.parse(a)}catch{s=a}}catch{}i&&(e[o]=s),n.push({key:o,value:s})}delete e.extension_fields,i||(e.extensions=n)}async getCetusConfig(e=!1){const t=this._sdk.sdkOptions.cetus_config.package_id,i=`${t}_getCetusConfig`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=qo(r),s=await this._sdk.fullClient.queryEventsByPage({Transaction:o});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(s.data.length>0)for(const c of s.data)switch(R(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(i,a,Q),a}async getCetusConfigHandle(e){const t=[e.clmm_pools_id,e.coin_list_id,e.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:t,options:{showContent:!0}})).forEach(n=>{var s,a;if(n.error!=null||((a=(s=n.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`when getCetusConfigHandle get objects error: ${n.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const r=le(n),o=Vr(n);switch(R(o).name){case"ClmmPools":e.clmm_pools_handle=r.pools.fields.id.id;break;case"CoinList":e.coin_list_handle=r.coins.fields.id.id;break;case"LaunchpadPools":e.launchpad_pools_handle=r.pools.fields.id.id;break}}),e}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){try{const i=this._cache[e];if(!i)return;if(t||!i.isValid()){delete this._cache[e];return}return i.value}catch(i){console.error(`Error accessing cache for key ${e}:`,i);return}}},lb=class extends fs{async queryEventsByPage(e,t="all"){let i=[],n=!0;const r=t==="all";let o=r?null:t.cursor;do{const s=await this.queryEvents({query:e,cursor:o,limit:r?null:t.limit});s.data?(i=[...i,...s.data],n=s.hasNextPage,o=s.nextCursor):n=!1}while(r&&n);return{data:i,nextCursor:o,hasNextPage:n}}async getOwnedObjectsByPage(e,t,i="all"){let n=[],r=!0;const o=i==="all";let s=o?null:i.cursor;do{const a=await this.getOwnedObjects({owner:e,...t,cursor:s,limit:o?null:i.limit});a.data?(n=[...n,...a.data],r=a.hasNextPage,s=a.nextCursor):r=!1}while(o&&r);return{data:n,nextCursor:s,hasNextPage:r}}async getDynamicFieldsByPage(e,t="all"){let i=[],n=!0;const r=t==="all";let o=r?null:t.cursor;do{const s=await this.getDynamicFields({parentId:e,cursor:o,limit:r?null:t.limit});s.data?(i=[...i,...s.data],n=s.hasNextPage,o=s.nextCursor):n=!1}while(r&&n);return{data:i,nextCursor:o,hasNextPage:n}}async batchGetObjects(e,t,i=50){let n=[];try{for(let r=0;r<Math.ceil(e.length/i);r++){const o=await this.multiGetObjects({ids:e.slice(r*i,i*(r+1)),options:t});n=[...n,...o]}}catch(r){console.log(r)}return n}async calculationTxGas(e){const{sender:t}=e.blockData;if(t===void 0)throw Error("sdk sender is empty");const i=await this.devInspectTransactionBlock({transactionBlock:e,sender:t}),{gasUsed:n}=i.effects;return Number(n.computationCost)+Number(n.storageCost)-Number(n.storageRebate)}async sendTransaction(e,t){try{return await this.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(i){console.log("error: ",i)}}async sendSimulationTransaction(e,t,i=!0){try{if(i)return await this.devInspectTransactionBlock({transactionBlock:e,sender:t})}catch(n){console.log("devInspectTransactionBlock error",n)}}},db=class{constructor(e){X(this,"_cache",{});X(this,"_rpcModule");X(this,"_pool");X(this,"_position");X(this,"_swap");X(this,"_rewarder");X(this,"_router");X(this,"_router_v2");X(this,"_token");X(this,"_config");X(this,"_sdkOptions");X(this,"_senderAddress","");this._sdkOptions=e,this._rpcModule=new lb({url:e.fullRpcUrl}),this._swap=new ob(this),this._pool=new tb(this),this._position=new ib(this),this._rewarder=new nb(this),this._router=new rb(this),this._router_v2=new ab(this),this._token=new sb(this),this._config=new cb(this),Kc(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(e,t,i=!0){const n=[];let r=null;const o=`${this.sdkOptions.fullRpcUrl}_${e}_${t}_getOwnerCoinAssets`,s=this.getCache(o,i);if(s)return s;for(;;){const a=await(t?this.fullClient.getCoins({owner:e,coinType:t,cursor:r}):this.fullClient.getAllCoins({owner:e,cursor:r}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&n.push({coinAddress:R(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),r=a.nextCursor,!a.hasNextPage)break}return this.updateCache(o,n,30*1e3),n}async getOwnerCoinBalances(e,t){let i=[];return t?i=[await this.fullClient.getBalance({owner:e,coinType:t})]:i=[...await this.fullClient.getAllBalances({owner:e})],i}updateCache(e,t,i=Q){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},Yw=db;const ub=hc(e0),fb=hc(b_);var sc=ub,hb=fb,pb=Object.create,Vc=Object.defineProperty,_b=Object.defineProperties,mb=Object.getOwnPropertyDescriptor,gb=Object.getOwnPropertyDescriptors,wf=Object.getOwnPropertyNames,Ll=Object.getOwnPropertySymbols,bb=Object.getPrototypeOf,yf=Object.prototype.hasOwnProperty,wb=Object.prototype.propertyIsEnumerable,Ul=(e,t,i)=>t in e?Vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,yb=(e,t)=>{for(var i in t||(t={}))yf.call(t,i)&&Ul(e,i,t[i]);if(Ll)for(var i of Ll(t))wb.call(t,i)&&Ul(e,i,t[i]);return e},vb=(e,t)=>_b(e,gb(t)),kb=(e=>typeof mr<"u"?mr:typeof Proxy<"u"?new Proxy(e,{get:(t,i)=>(typeof mr<"u"?mr:t)[i]}):e)(function(e){if(typeof mr<"u")return mr.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Cb=(e,t)=>function(){return t||(0,e[wf(e)[0]])((t={exports:{}}).exports,t),t.exports},Ab=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of wf(t))!yf.call(e,r)&&r!==i&&Vc(e,r,{get:()=>t[r],enumerable:!(n=mb(t,r))||n.enumerable});return e},Yr=(e,t,i)=>(i=e!=null?pb(bb(e)):{},Ab(!e||!e.__esModule?Vc(i,"default",{value:e,enumerable:!0}):i,e)),He=(e,t,i)=>new Promise((n,r)=>{var o=c=>{try{a(i.next(c))}catch(l){r(l)}},s=c=>{try{a(i.throw(c))}catch(l){r(l)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,s);a((i=i.apply(e,t)).next())}),eo=Cb({"node_modules/bn.js/lib/bn.js"(e,t){(function(i,n){function r(f,d){if(!f)throw new Error(d||"Assertion failed")}function o(f,d){f.super_=d;var h=function(){};h.prototype=d.prototype,f.prototype=new h,f.prototype.constructor=f}function s(f,d,h){if(s.isBN(f))return f;this.negative=0,this.words=null,this.length=0,this.red=null,f!==null&&((d==="le"||d==="be")&&(h=d,d=10),this._init(f||0,d||10,h||"be"))}typeof i=="object"?i.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=kb("buffer").Buffer}catch{}s.isBN=function(d){return d instanceof s?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===s.wordSize&&Array.isArray(d.words)},s.max=function(d,h){return d.cmp(h)>0?d:h},s.min=function(d,h){return d.cmp(h)<0?d:h},s.prototype._init=function(d,h,b){if(typeof d=="number")return this._initNumber(d,h,b);if(typeof d=="object")return this._initArray(d,h,b);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),d=d.toString().replace(/\s+/g,"");var w=0;d[0]==="-"&&(w++,this.negative=1),w<d.length&&(h===16?this._parseHex(d,w,b):(this._parseBase(d,h,w),b==="le"&&this._initArray(this.toArray(),h,b)))},s.prototype._initNumber=function(d,h,b){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(r(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),h,b)},s.prototype._initArray=function(d,h,b){if(r(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var y,C,v=0;if(b==="be")for(w=d.length-1,y=0;w>=0;w-=3)C=d[w]|d[w-1]<<8|d[w-2]<<16,this.words[y]|=C<<v&67108863,this.words[y+1]=C>>>26-v&67108863,v+=24,v>=26&&(v-=26,y++);else if(b==="le")for(w=0,y=0;w<d.length;w+=3)C=d[w]|d[w+1]<<8|d[w+2]<<16,this.words[y]|=C<<v&67108863,this.words[y+1]=C>>>26-v&67108863,v+=24,v>=26&&(v-=26,y++);return this._strip()};function c(f,d){var h=f.charCodeAt(d);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+f)}function l(f,d,h){var b=c(f,h);return h-1>=d&&(b|=c(f,h-1)<<4),b}s.prototype._parseHex=function(d,h,b){this.length=Math.ceil((d.length-h)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var y=0,C=0,v;if(b==="be")for(w=d.length-1;w>=h;w-=2)v=l(d,h,w)<<y,this.words[C]|=v&67108863,y>=18?(y-=18,C+=1,this.words[C]|=v>>>26):y+=8;else{var p=d.length-h;for(w=p%2===0?h+1:h;w<d.length;w+=2)v=l(d,h,w)<<y,this.words[C]|=v&67108863,y>=18?(y-=18,C+=1,this.words[C]|=v>>>26):y+=8}this._strip()};function u(f,d,h,b){for(var w=0,y=0,C=Math.min(f.length,h),v=d;v<C;v++){var p=f.charCodeAt(v)-48;w*=b,p>=49?y=p-49+10:p>=17?y=p-17+10:y=p,r(p>=0&&y<b,"Invalid character"),w+=y}return w}s.prototype._parseBase=function(d,h,b){this.words=[0],this.length=1;for(var w=0,y=1;y<=67108863;y*=h)w++;w--,y=y/h|0;for(var C=d.length-b,v=C%w,p=Math.min(C,C-v)+b,_=0,S=b;S<p;S+=w)_=u(d,S,S+w,h),this.imuln(y),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(v!==0){var U=1;for(_=u(d,S,d.length,h),S=0;S<v;S++)U*=h;this.imuln(U),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},s.prototype.copy=function(d){d.words=new Array(this.length);for(var h=0;h<this.length;h++)d.words[h]=this.words[h];d.length=this.length,d.negative=this.negative,d.red=this.red};function m(f,d){f.words=d.words,f.length=d.length,f.negative=d.negative,f.red=d.red}if(s.prototype._move=function(d){m(d,this)},s.prototype.clone=function(){var d=new s(null);return this.copy(d),d},s.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{s.prototype.inspect=g}else s.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(d,h){d=d||10,h=h|0||1;var b;if(d===16||d==="hex"){b="";for(var w=0,y=0,C=0;C<this.length;C++){var v=this.words[C],p=((v<<w|y)&16777215).toString(16);y=v>>>24-w&16777215,w+=2,w>=26&&(w-=26,C--),y!==0||C!==this.length-1?b=k[6-p.length]+p+b:b=p+b}for(y!==0&&(b=y.toString(16)+b);b.length%h!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(d===(d|0)&&d>=2&&d<=36){var _=x[d],S=T[d];b="";var U=this.clone();for(U.negative=0;!U.isZero();){var V=U.modrn(S).toString(d);U=U.idivn(S),U.isZero()?b=V+b:b=k[_-V.length]+V+b}for(this.isZero()&&(b="0"+b);b.length%h!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(d,h){return this.toArrayLike(a,d,h)}),s.prototype.toArray=function(d,h){return this.toArrayLike(Array,d,h)};var I=function(d,h){return d.allocUnsafe?d.allocUnsafe(h):new d(h)};s.prototype.toArrayLike=function(d,h,b){this._strip();var w=this.byteLength(),y=b||Math.max(1,w);r(w<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0");var C=I(d,y),v=h==="le"?"LE":"BE";return this["_toArrayLike"+v](C,w),C},s.prototype._toArrayLikeLE=function(d,h){for(var b=0,w=0,y=0,C=0;y<this.length;y++){var v=this.words[y]<<C|w;d[b++]=v&255,b<d.length&&(d[b++]=v>>8&255),b<d.length&&(d[b++]=v>>16&255),C===6?(b<d.length&&(d[b++]=v>>24&255),w=0,C=0):(w=v>>>24,C+=2)}if(b<d.length)for(d[b++]=w;b<d.length;)d[b++]=0},s.prototype._toArrayLikeBE=function(d,h){for(var b=d.length-1,w=0,y=0,C=0;y<this.length;y++){var v=this.words[y]<<C|w;d[b--]=v&255,b>=0&&(d[b--]=v>>8&255),b>=0&&(d[b--]=v>>16&255),C===6?(b>=0&&(d[b--]=v>>24&255),w=0,C=0):(w=v>>>24,C+=2)}if(b>=0)for(d[b--]=w;b>=0;)d[b--]=0},Math.clz32?s.prototype._countBits=function(d){return 32-Math.clz32(d)}:s.prototype._countBits=function(d){var h=d,b=0;return h>=4096&&(b+=13,h>>>=13),h>=64&&(b+=7,h>>>=7),h>=8&&(b+=4,h>>>=4),h>=2&&(b+=2,h>>>=2),b+h},s.prototype._zeroBits=function(d){if(d===0)return 26;var h=d,b=0;return h&8191||(b+=13,h>>>=13),h&127||(b+=7,h>>>=7),h&15||(b+=4,h>>>=4),h&3||(b+=2,h>>>=2),h&1||b++,b},s.prototype.bitLength=function(){var d=this.words[this.length-1],h=this._countBits(d);return(this.length-1)*26+h};function E(f){for(var d=new Array(f.bitLength()),h=0;h<d.length;h++){var b=h/26|0,w=h%26;d[h]=f.words[b]>>>w&1}return d}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,h=0;h<this.length;h++){var b=this._zeroBits(this.words[h]);if(d+=b,b!==26)break}return d},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},s.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var h=0;h<d.length;h++)this.words[h]=this.words[h]|d.words[h];return this._strip()},s.prototype.ior=function(d){return r((this.negative|d.negative)===0),this.iuor(d)},s.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},s.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},s.prototype.iuand=function(d){var h;this.length>d.length?h=d:h=this;for(var b=0;b<h.length;b++)this.words[b]=this.words[b]&d.words[b];return this.length=h.length,this._strip()},s.prototype.iand=function(d){return r((this.negative|d.negative)===0),this.iuand(d)},s.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},s.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},s.prototype.iuxor=function(d){var h,b;this.length>d.length?(h=this,b=d):(h=d,b=this);for(var w=0;w<b.length;w++)this.words[w]=h.words[w]^b.words[w];if(this!==h)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=h.length,this._strip()},s.prototype.ixor=function(d){return r((this.negative|d.negative)===0),this.iuxor(d)},s.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},s.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},s.prototype.inotn=function(d){r(typeof d=="number"&&d>=0);var h=Math.ceil(d/26)|0,b=d%26;this._expand(h),b>0&&h--;for(var w=0;w<h;w++)this.words[w]=~this.words[w]&67108863;return b>0&&(this.words[w]=~this.words[w]&67108863>>26-b),this._strip()},s.prototype.notn=function(d){return this.clone().inotn(d)},s.prototype.setn=function(d,h){r(typeof d=="number"&&d>=0);var b=d/26|0,w=d%26;return this._expand(b+1),h?this.words[b]=this.words[b]|1<<w:this.words[b]=this.words[b]&~(1<<w),this._strip()},s.prototype.iadd=function(d){var h;if(this.negative!==0&&d.negative===0)return this.negative=0,h=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,h=this.isub(d),d.negative=1,h._normSign();var b,w;this.length>d.length?(b=this,w=d):(b=d,w=this);for(var y=0,C=0;C<w.length;C++)h=(b.words[C]|0)+(w.words[C]|0)+y,this.words[C]=h&67108863,y=h>>>26;for(;y!==0&&C<b.length;C++)h=(b.words[C]|0)+y,this.words[C]=h&67108863,y=h>>>26;if(this.length=b.length,y!==0)this.words[this.length]=y,this.length++;else if(b!==this)for(;C<b.length;C++)this.words[C]=b.words[C];return this},s.prototype.add=function(d){var h;return d.negative!==0&&this.negative===0?(d.negative=0,h=this.sub(d),d.negative^=1,h):d.negative===0&&this.negative!==0?(this.negative=0,h=d.sub(this),this.negative=1,h):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},s.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var h=this.iadd(d);return d.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var b=this.cmp(d);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,y;b>0?(w=this,y=d):(w=d,y=this);for(var C=0,v=0;v<y.length;v++)h=(w.words[v]|0)-(y.words[v]|0)+C,C=h>>26,this.words[v]=h&67108863;for(;C!==0&&v<w.length;v++)h=(w.words[v]|0)+C,C=h>>26,this.words[v]=h&67108863;if(C===0&&v<w.length&&w!==this)for(;v<w.length;v++)this.words[v]=w.words[v];return this.length=Math.max(this.length,v),w!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(d){return this.clone().isub(d)};function B(f,d,h){h.negative=d.negative^f.negative;var b=f.length+d.length|0;h.length=b,b=b-1|0;var w=f.words[0]|0,y=d.words[0]|0,C=w*y,v=C&67108863,p=C/67108864|0;h.words[0]=v;for(var _=1;_<b;_++){for(var S=p>>>26,U=p&67108863,V=Math.min(_,d.length-1),ne=Math.max(0,_-f.length+1);ne<=V;ne++){var we=_-ne|0;w=f.words[we]|0,y=d.words[ne]|0,C=w*y+U,S+=C/67108864|0,U=C&67108863}h.words[_]=U|0,p=S|0}return p!==0?h.words[_]=p|0:h.length--,h._strip()}var N=function(d,h,b){var w=d.words,y=h.words,C=b.words,v=0,p,_,S,U=w[0]|0,V=U&8191,ne=U>>>13,we=w[1]|0,fe=we&8191,Ze=we>>>13,et=w[2]|0,ke=et&8191,tt=et>>>13,it=w[3]|0,Ce=it&8191,nt=it>>>13,rt=w[4]|0,Ae=rt&8191,ot=rt>>>13,st=w[5]|0,xe=st&8191,at=st>>>13,ct=w[6]|0,Se=ct&8191,lt=ct>>>13,dt=w[7]|0,Te=dt&8191,ut=dt>>>13,ft=w[8]|0,Me=ft&8191,ht=ft>>>13,pt=w[9]|0,Oe=pt&8191,_t=pt>>>13,mt=y[0]|0,Ie=mt&8191,gt=mt>>>13,bt=y[1]|0,Pe=bt&8191,wt=bt>>>13,yt=y[2]|0,je=yt&8191,vt=yt>>>13,kt=y[3]|0,Ee=kt&8191,Ct=kt>>>13,At=y[4]|0,Be=At&8191,xt=At>>>13,St=y[5]|0,Ne=St&8191,Tt=St>>>13,Mt=y[6]|0,De=Mt&8191,Ot=Mt>>>13,It=y[7]|0,Re=It&8191,Pt=It>>>13,jt=y[8]|0,$e=jt&8191,Et=jt>>>13,Bt=y[9]|0,qe=Bt&8191,Qe=Bt>>>13;b.negative=d.negative^h.negative,b.length=19,p=Math.imul(V,Ie),_=Math.imul(V,gt),_=_+Math.imul(ne,Ie)|0,S=Math.imul(ne,gt);var En=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(En>>>26)|0,En&=67108863,p=Math.imul(fe,Ie),_=Math.imul(fe,gt),_=_+Math.imul(Ze,Ie)|0,S=Math.imul(Ze,gt),p=p+Math.imul(V,Pe)|0,_=_+Math.imul(V,wt)|0,_=_+Math.imul(ne,Pe)|0,S=S+Math.imul(ne,wt)|0;var Bn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,p=Math.imul(ke,Ie),_=Math.imul(ke,gt),_=_+Math.imul(tt,Ie)|0,S=Math.imul(tt,gt),p=p+Math.imul(fe,Pe)|0,_=_+Math.imul(fe,wt)|0,_=_+Math.imul(Ze,Pe)|0,S=S+Math.imul(Ze,wt)|0,p=p+Math.imul(V,je)|0,_=_+Math.imul(V,vt)|0,_=_+Math.imul(ne,je)|0,S=S+Math.imul(ne,vt)|0;var Nn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,p=Math.imul(Ce,Ie),_=Math.imul(Ce,gt),_=_+Math.imul(nt,Ie)|0,S=Math.imul(nt,gt),p=p+Math.imul(ke,Pe)|0,_=_+Math.imul(ke,wt)|0,_=_+Math.imul(tt,Pe)|0,S=S+Math.imul(tt,wt)|0,p=p+Math.imul(fe,je)|0,_=_+Math.imul(fe,vt)|0,_=_+Math.imul(Ze,je)|0,S=S+Math.imul(Ze,vt)|0,p=p+Math.imul(V,Ee)|0,_=_+Math.imul(V,Ct)|0,_=_+Math.imul(ne,Ee)|0,S=S+Math.imul(ne,Ct)|0;var Dn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,p=Math.imul(Ae,Ie),_=Math.imul(Ae,gt),_=_+Math.imul(ot,Ie)|0,S=Math.imul(ot,gt),p=p+Math.imul(Ce,Pe)|0,_=_+Math.imul(Ce,wt)|0,_=_+Math.imul(nt,Pe)|0,S=S+Math.imul(nt,wt)|0,p=p+Math.imul(ke,je)|0,_=_+Math.imul(ke,vt)|0,_=_+Math.imul(tt,je)|0,S=S+Math.imul(tt,vt)|0,p=p+Math.imul(fe,Ee)|0,_=_+Math.imul(fe,Ct)|0,_=_+Math.imul(Ze,Ee)|0,S=S+Math.imul(Ze,Ct)|0,p=p+Math.imul(V,Be)|0,_=_+Math.imul(V,xt)|0,_=_+Math.imul(ne,Be)|0,S=S+Math.imul(ne,xt)|0;var Rn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,p=Math.imul(xe,Ie),_=Math.imul(xe,gt),_=_+Math.imul(at,Ie)|0,S=Math.imul(at,gt),p=p+Math.imul(Ae,Pe)|0,_=_+Math.imul(Ae,wt)|0,_=_+Math.imul(ot,Pe)|0,S=S+Math.imul(ot,wt)|0,p=p+Math.imul(Ce,je)|0,_=_+Math.imul(Ce,vt)|0,_=_+Math.imul(nt,je)|0,S=S+Math.imul(nt,vt)|0,p=p+Math.imul(ke,Ee)|0,_=_+Math.imul(ke,Ct)|0,_=_+Math.imul(tt,Ee)|0,S=S+Math.imul(tt,Ct)|0,p=p+Math.imul(fe,Be)|0,_=_+Math.imul(fe,xt)|0,_=_+Math.imul(Ze,Be)|0,S=S+Math.imul(Ze,xt)|0,p=p+Math.imul(V,Ne)|0,_=_+Math.imul(V,Tt)|0,_=_+Math.imul(ne,Ne)|0,S=S+Math.imul(ne,Tt)|0;var $n=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+($n>>>26)|0,$n&=67108863,p=Math.imul(Se,Ie),_=Math.imul(Se,gt),_=_+Math.imul(lt,Ie)|0,S=Math.imul(lt,gt),p=p+Math.imul(xe,Pe)|0,_=_+Math.imul(xe,wt)|0,_=_+Math.imul(at,Pe)|0,S=S+Math.imul(at,wt)|0,p=p+Math.imul(Ae,je)|0,_=_+Math.imul(Ae,vt)|0,_=_+Math.imul(ot,je)|0,S=S+Math.imul(ot,vt)|0,p=p+Math.imul(Ce,Ee)|0,_=_+Math.imul(Ce,Ct)|0,_=_+Math.imul(nt,Ee)|0,S=S+Math.imul(nt,Ct)|0,p=p+Math.imul(ke,Be)|0,_=_+Math.imul(ke,xt)|0,_=_+Math.imul(tt,Be)|0,S=S+Math.imul(tt,xt)|0,p=p+Math.imul(fe,Ne)|0,_=_+Math.imul(fe,Tt)|0,_=_+Math.imul(Ze,Ne)|0,S=S+Math.imul(Ze,Tt)|0,p=p+Math.imul(V,De)|0,_=_+Math.imul(V,Ot)|0,_=_+Math.imul(ne,De)|0,S=S+Math.imul(ne,Ot)|0;var qn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(qn>>>26)|0,qn&=67108863,p=Math.imul(Te,Ie),_=Math.imul(Te,gt),_=_+Math.imul(ut,Ie)|0,S=Math.imul(ut,gt),p=p+Math.imul(Se,Pe)|0,_=_+Math.imul(Se,wt)|0,_=_+Math.imul(lt,Pe)|0,S=S+Math.imul(lt,wt)|0,p=p+Math.imul(xe,je)|0,_=_+Math.imul(xe,vt)|0,_=_+Math.imul(at,je)|0,S=S+Math.imul(at,vt)|0,p=p+Math.imul(Ae,Ee)|0,_=_+Math.imul(Ae,Ct)|0,_=_+Math.imul(ot,Ee)|0,S=S+Math.imul(ot,Ct)|0,p=p+Math.imul(Ce,Be)|0,_=_+Math.imul(Ce,xt)|0,_=_+Math.imul(nt,Be)|0,S=S+Math.imul(nt,xt)|0,p=p+Math.imul(ke,Ne)|0,_=_+Math.imul(ke,Tt)|0,_=_+Math.imul(tt,Ne)|0,S=S+Math.imul(tt,Tt)|0,p=p+Math.imul(fe,De)|0,_=_+Math.imul(fe,Ot)|0,_=_+Math.imul(Ze,De)|0,S=S+Math.imul(Ze,Ot)|0,p=p+Math.imul(V,Re)|0,_=_+Math.imul(V,Pt)|0,_=_+Math.imul(ne,Re)|0,S=S+Math.imul(ne,Pt)|0;var Fn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,p=Math.imul(Me,Ie),_=Math.imul(Me,gt),_=_+Math.imul(ht,Ie)|0,S=Math.imul(ht,gt),p=p+Math.imul(Te,Pe)|0,_=_+Math.imul(Te,wt)|0,_=_+Math.imul(ut,Pe)|0,S=S+Math.imul(ut,wt)|0,p=p+Math.imul(Se,je)|0,_=_+Math.imul(Se,vt)|0,_=_+Math.imul(lt,je)|0,S=S+Math.imul(lt,vt)|0,p=p+Math.imul(xe,Ee)|0,_=_+Math.imul(xe,Ct)|0,_=_+Math.imul(at,Ee)|0,S=S+Math.imul(at,Ct)|0,p=p+Math.imul(Ae,Be)|0,_=_+Math.imul(Ae,xt)|0,_=_+Math.imul(ot,Be)|0,S=S+Math.imul(ot,xt)|0,p=p+Math.imul(Ce,Ne)|0,_=_+Math.imul(Ce,Tt)|0,_=_+Math.imul(nt,Ne)|0,S=S+Math.imul(nt,Tt)|0,p=p+Math.imul(ke,De)|0,_=_+Math.imul(ke,Ot)|0,_=_+Math.imul(tt,De)|0,S=S+Math.imul(tt,Ot)|0,p=p+Math.imul(fe,Re)|0,_=_+Math.imul(fe,Pt)|0,_=_+Math.imul(Ze,Re)|0,S=S+Math.imul(Ze,Pt)|0,p=p+Math.imul(V,$e)|0,_=_+Math.imul(V,Et)|0,_=_+Math.imul(ne,$e)|0,S=S+Math.imul(ne,Et)|0;var Ln=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,p=Math.imul(Oe,Ie),_=Math.imul(Oe,gt),_=_+Math.imul(_t,Ie)|0,S=Math.imul(_t,gt),p=p+Math.imul(Me,Pe)|0,_=_+Math.imul(Me,wt)|0,_=_+Math.imul(ht,Pe)|0,S=S+Math.imul(ht,wt)|0,p=p+Math.imul(Te,je)|0,_=_+Math.imul(Te,vt)|0,_=_+Math.imul(ut,je)|0,S=S+Math.imul(ut,vt)|0,p=p+Math.imul(Se,Ee)|0,_=_+Math.imul(Se,Ct)|0,_=_+Math.imul(lt,Ee)|0,S=S+Math.imul(lt,Ct)|0,p=p+Math.imul(xe,Be)|0,_=_+Math.imul(xe,xt)|0,_=_+Math.imul(at,Be)|0,S=S+Math.imul(at,xt)|0,p=p+Math.imul(Ae,Ne)|0,_=_+Math.imul(Ae,Tt)|0,_=_+Math.imul(ot,Ne)|0,S=S+Math.imul(ot,Tt)|0,p=p+Math.imul(Ce,De)|0,_=_+Math.imul(Ce,Ot)|0,_=_+Math.imul(nt,De)|0,S=S+Math.imul(nt,Ot)|0,p=p+Math.imul(ke,Re)|0,_=_+Math.imul(ke,Pt)|0,_=_+Math.imul(tt,Re)|0,S=S+Math.imul(tt,Pt)|0,p=p+Math.imul(fe,$e)|0,_=_+Math.imul(fe,Et)|0,_=_+Math.imul(Ze,$e)|0,S=S+Math.imul(Ze,Et)|0,p=p+Math.imul(V,qe)|0,_=_+Math.imul(V,Qe)|0,_=_+Math.imul(ne,qe)|0,S=S+Math.imul(ne,Qe)|0;var Un=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,p=Math.imul(Oe,Pe),_=Math.imul(Oe,wt),_=_+Math.imul(_t,Pe)|0,S=Math.imul(_t,wt),p=p+Math.imul(Me,je)|0,_=_+Math.imul(Me,vt)|0,_=_+Math.imul(ht,je)|0,S=S+Math.imul(ht,vt)|0,p=p+Math.imul(Te,Ee)|0,_=_+Math.imul(Te,Ct)|0,_=_+Math.imul(ut,Ee)|0,S=S+Math.imul(ut,Ct)|0,p=p+Math.imul(Se,Be)|0,_=_+Math.imul(Se,xt)|0,_=_+Math.imul(lt,Be)|0,S=S+Math.imul(lt,xt)|0,p=p+Math.imul(xe,Ne)|0,_=_+Math.imul(xe,Tt)|0,_=_+Math.imul(at,Ne)|0,S=S+Math.imul(at,Tt)|0,p=p+Math.imul(Ae,De)|0,_=_+Math.imul(Ae,Ot)|0,_=_+Math.imul(ot,De)|0,S=S+Math.imul(ot,Ot)|0,p=p+Math.imul(Ce,Re)|0,_=_+Math.imul(Ce,Pt)|0,_=_+Math.imul(nt,Re)|0,S=S+Math.imul(nt,Pt)|0,p=p+Math.imul(ke,$e)|0,_=_+Math.imul(ke,Et)|0,_=_+Math.imul(tt,$e)|0,S=S+Math.imul(tt,Et)|0,p=p+Math.imul(fe,qe)|0,_=_+Math.imul(fe,Qe)|0,_=_+Math.imul(Ze,qe)|0,S=S+Math.imul(Ze,Qe)|0;var Kn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,p=Math.imul(Oe,je),_=Math.imul(Oe,vt),_=_+Math.imul(_t,je)|0,S=Math.imul(_t,vt),p=p+Math.imul(Me,Ee)|0,_=_+Math.imul(Me,Ct)|0,_=_+Math.imul(ht,Ee)|0,S=S+Math.imul(ht,Ct)|0,p=p+Math.imul(Te,Be)|0,_=_+Math.imul(Te,xt)|0,_=_+Math.imul(ut,Be)|0,S=S+Math.imul(ut,xt)|0,p=p+Math.imul(Se,Ne)|0,_=_+Math.imul(Se,Tt)|0,_=_+Math.imul(lt,Ne)|0,S=S+Math.imul(lt,Tt)|0,p=p+Math.imul(xe,De)|0,_=_+Math.imul(xe,Ot)|0,_=_+Math.imul(at,De)|0,S=S+Math.imul(at,Ot)|0,p=p+Math.imul(Ae,Re)|0,_=_+Math.imul(Ae,Pt)|0,_=_+Math.imul(ot,Re)|0,S=S+Math.imul(ot,Pt)|0,p=p+Math.imul(Ce,$e)|0,_=_+Math.imul(Ce,Et)|0,_=_+Math.imul(nt,$e)|0,S=S+Math.imul(nt,Et)|0,p=p+Math.imul(ke,qe)|0,_=_+Math.imul(ke,Qe)|0,_=_+Math.imul(tt,qe)|0,S=S+Math.imul(tt,Qe)|0;var Vn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,p=Math.imul(Oe,Ee),_=Math.imul(Oe,Ct),_=_+Math.imul(_t,Ee)|0,S=Math.imul(_t,Ct),p=p+Math.imul(Me,Be)|0,_=_+Math.imul(Me,xt)|0,_=_+Math.imul(ht,Be)|0,S=S+Math.imul(ht,xt)|0,p=p+Math.imul(Te,Ne)|0,_=_+Math.imul(Te,Tt)|0,_=_+Math.imul(ut,Ne)|0,S=S+Math.imul(ut,Tt)|0,p=p+Math.imul(Se,De)|0,_=_+Math.imul(Se,Ot)|0,_=_+Math.imul(lt,De)|0,S=S+Math.imul(lt,Ot)|0,p=p+Math.imul(xe,Re)|0,_=_+Math.imul(xe,Pt)|0,_=_+Math.imul(at,Re)|0,S=S+Math.imul(at,Pt)|0,p=p+Math.imul(Ae,$e)|0,_=_+Math.imul(Ae,Et)|0,_=_+Math.imul(ot,$e)|0,S=S+Math.imul(ot,Et)|0,p=p+Math.imul(Ce,qe)|0,_=_+Math.imul(Ce,Qe)|0,_=_+Math.imul(nt,qe)|0,S=S+Math.imul(nt,Qe)|0;var zn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(zn>>>26)|0,zn&=67108863,p=Math.imul(Oe,Be),_=Math.imul(Oe,xt),_=_+Math.imul(_t,Be)|0,S=Math.imul(_t,xt),p=p+Math.imul(Me,Ne)|0,_=_+Math.imul(Me,Tt)|0,_=_+Math.imul(ht,Ne)|0,S=S+Math.imul(ht,Tt)|0,p=p+Math.imul(Te,De)|0,_=_+Math.imul(Te,Ot)|0,_=_+Math.imul(ut,De)|0,S=S+Math.imul(ut,Ot)|0,p=p+Math.imul(Se,Re)|0,_=_+Math.imul(Se,Pt)|0,_=_+Math.imul(lt,Re)|0,S=S+Math.imul(lt,Pt)|0,p=p+Math.imul(xe,$e)|0,_=_+Math.imul(xe,Et)|0,_=_+Math.imul(at,$e)|0,S=S+Math.imul(at,Et)|0,p=p+Math.imul(Ae,qe)|0,_=_+Math.imul(Ae,Qe)|0,_=_+Math.imul(ot,qe)|0,S=S+Math.imul(ot,Qe)|0;var Wn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,p=Math.imul(Oe,Ne),_=Math.imul(Oe,Tt),_=_+Math.imul(_t,Ne)|0,S=Math.imul(_t,Tt),p=p+Math.imul(Me,De)|0,_=_+Math.imul(Me,Ot)|0,_=_+Math.imul(ht,De)|0,S=S+Math.imul(ht,Ot)|0,p=p+Math.imul(Te,Re)|0,_=_+Math.imul(Te,Pt)|0,_=_+Math.imul(ut,Re)|0,S=S+Math.imul(ut,Pt)|0,p=p+Math.imul(Se,$e)|0,_=_+Math.imul(Se,Et)|0,_=_+Math.imul(lt,$e)|0,S=S+Math.imul(lt,Et)|0,p=p+Math.imul(xe,qe)|0,_=_+Math.imul(xe,Qe)|0,_=_+Math.imul(at,qe)|0,S=S+Math.imul(at,Qe)|0;var Gn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,p=Math.imul(Oe,De),_=Math.imul(Oe,Ot),_=_+Math.imul(_t,De)|0,S=Math.imul(_t,Ot),p=p+Math.imul(Me,Re)|0,_=_+Math.imul(Me,Pt)|0,_=_+Math.imul(ht,Re)|0,S=S+Math.imul(ht,Pt)|0,p=p+Math.imul(Te,$e)|0,_=_+Math.imul(Te,Et)|0,_=_+Math.imul(ut,$e)|0,S=S+Math.imul(ut,Et)|0,p=p+Math.imul(Se,qe)|0,_=_+Math.imul(Se,Qe)|0,_=_+Math.imul(lt,qe)|0,S=S+Math.imul(lt,Qe)|0;var Hn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,p=Math.imul(Oe,Re),_=Math.imul(Oe,Pt),_=_+Math.imul(_t,Re)|0,S=Math.imul(_t,Pt),p=p+Math.imul(Me,$e)|0,_=_+Math.imul(Me,Et)|0,_=_+Math.imul(ht,$e)|0,S=S+Math.imul(ht,Et)|0,p=p+Math.imul(Te,qe)|0,_=_+Math.imul(Te,Qe)|0,_=_+Math.imul(ut,qe)|0,S=S+Math.imul(ut,Qe)|0;var Xn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,p=Math.imul(Oe,$e),_=Math.imul(Oe,Et),_=_+Math.imul(_t,$e)|0,S=Math.imul(_t,Et),p=p+Math.imul(Me,qe)|0,_=_+Math.imul(Me,Qe)|0,_=_+Math.imul(ht,qe)|0,S=S+Math.imul(ht,Qe)|0;var Jn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,p=Math.imul(Oe,qe),_=Math.imul(Oe,Qe),_=_+Math.imul(_t,qe)|0,S=Math.imul(_t,Qe);var ra=(v+p|0)+((_&8191)<<13)|0;return v=(S+(_>>>13)|0)+(ra>>>26)|0,ra&=67108863,C[0]=En,C[1]=Bn,C[2]=Nn,C[3]=Dn,C[4]=Rn,C[5]=$n,C[6]=qn,C[7]=Fn,C[8]=Ln,C[9]=Un,C[10]=Kn,C[11]=Vn,C[12]=zn,C[13]=Wn,C[14]=Gn,C[15]=Hn,C[16]=Xn,C[17]=Jn,C[18]=ra,v!==0&&(C[19]=v,b.length++),b};Math.imul||(N=B);function F(f,d,h){h.negative=d.negative^f.negative,h.length=f.length+d.length;for(var b=0,w=0,y=0;y<h.length-1;y++){var C=w;w=0;for(var v=b&67108863,p=Math.min(y,d.length-1),_=Math.max(0,y-f.length+1);_<=p;_++){var S=y-_,U=f.words[S]|0,V=d.words[_]|0,ne=U*V,we=ne&67108863;C=C+(ne/67108864|0)|0,we=we+v|0,v=we&67108863,C=C+(we>>>26)|0,w+=C>>>26,C&=67108863}h.words[y]=v,b=C,C=w}return b!==0?h.words[y]=b:h.length--,h._strip()}function H(f,d,h){return F(f,d,h)}s.prototype.mulTo=function(d,h){var b,w=this.length+d.length;return this.length===10&&d.length===10?b=N(this,d,h):w<63?b=B(this,d,h):w<1024?b=F(this,d,h):b=H(this,d,h),b},s.prototype.mul=function(d){var h=new s(null);return h.words=new Array(this.length+d.length),this.mulTo(d,h)},s.prototype.mulf=function(d){var h=new s(null);return h.words=new Array(this.length+d.length),H(this,d,h)},s.prototype.imul=function(d){return this.clone().mulTo(d,this)},s.prototype.imuln=function(d){var h=d<0;h&&(d=-d),r(typeof d=="number"),r(d<67108864);for(var b=0,w=0;w<this.length;w++){var y=(this.words[w]|0)*d,C=(y&67108863)+(b&67108863);b>>=26,b+=y/67108864|0,b+=C>>>26,this.words[w]=C&67108863}return b!==0&&(this.words[w]=b,this.length++),h?this.ineg():this},s.prototype.muln=function(d){return this.clone().imuln(d)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(d){var h=E(d);if(h.length===0)return new s(1);for(var b=this,w=0;w<h.length&&h[w]===0;w++,b=b.sqr());if(++w<h.length)for(var y=b.sqr();w<h.length;w++,y=y.sqr())h[w]!==0&&(b=b.mul(y));return b},s.prototype.iushln=function(d){r(typeof d=="number"&&d>=0);var h=d%26,b=(d-h)/26,w=67108863>>>26-h<<26-h,y;if(h!==0){var C=0;for(y=0;y<this.length;y++){var v=this.words[y]&w,p=(this.words[y]|0)-v<<h;this.words[y]=p|C,C=v>>>26-h}C&&(this.words[y]=C,this.length++)}if(b!==0){for(y=this.length-1;y>=0;y--)this.words[y+b]=this.words[y];for(y=0;y<b;y++)this.words[y]=0;this.length+=b}return this._strip()},s.prototype.ishln=function(d){return r(this.negative===0),this.iushln(d)},s.prototype.iushrn=function(d,h,b){r(typeof d=="number"&&d>=0);var w;h?w=(h-h%26)/26:w=0;var y=d%26,C=Math.min((d-y)/26,this.length),v=67108863^67108863>>>y<<y,p=b;if(w-=C,w=Math.max(0,w),p){for(var _=0;_<C;_++)p.words[_]=this.words[_];p.length=C}if(C!==0)if(this.length>C)for(this.length-=C,_=0;_<this.length;_++)this.words[_]=this.words[_+C];else this.words[0]=0,this.length=1;var S=0;for(_=this.length-1;_>=0&&(S!==0||_>=w);_--){var U=this.words[_]|0;this.words[_]=S<<26-y|U>>>y,S=U&v}return p&&S!==0&&(p.words[p.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(d,h,b){return r(this.negative===0),this.iushrn(d,h,b)},s.prototype.shln=function(d){return this.clone().ishln(d)},s.prototype.ushln=function(d){return this.clone().iushln(d)},s.prototype.shrn=function(d){return this.clone().ishrn(d)},s.prototype.ushrn=function(d){return this.clone().iushrn(d)},s.prototype.testn=function(d){r(typeof d=="number"&&d>=0);var h=d%26,b=(d-h)/26,w=1<<h;if(this.length<=b)return!1;var y=this.words[b];return!!(y&w)},s.prototype.imaskn=function(d){r(typeof d=="number"&&d>=0);var h=d%26,b=(d-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(h!==0&&b++,this.length=Math.min(b,this.length),h!==0){var w=67108863^67108863>>>h<<h;this.words[this.length-1]&=w}return this._strip()},s.prototype.maskn=function(d){return this.clone().imaskn(d)},s.prototype.iaddn=function(d){return r(typeof d=="number"),r(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<=d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},s.prototype._iaddn=function(d){this.words[0]+=d;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(d){if(r(typeof d=="number"),r(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},s.prototype.addn=function(d){return this.clone().iaddn(d)},s.prototype.subn=function(d){return this.clone().isubn(d)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(d,h,b){var w=d.length+b,y;this._expand(w);var C,v=0;for(y=0;y<d.length;y++){C=(this.words[y+b]|0)+v;var p=(d.words[y]|0)*h;C-=p&67108863,v=(C>>26)-(p/67108864|0),this.words[y+b]=C&67108863}for(;y<this.length-b;y++)C=(this.words[y+b]|0)+v,v=C>>26,this.words[y+b]=C&67108863;if(v===0)return this._strip();for(r(v===-1),v=0,y=0;y<this.length;y++)C=-(this.words[y]|0)+v,v=C>>26,this.words[y]=C&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(d,h){var b=this.length-d.length,w=this.clone(),y=d,C=y.words[y.length-1]|0,v=this._countBits(C);b=26-v,b!==0&&(y=y.ushln(b),w.iushln(b),C=y.words[y.length-1]|0);var p=w.length-y.length,_;if(h!=="mod"){_=new s(null),_.length=p+1,_.words=new Array(_.length);for(var S=0;S<_.length;S++)_.words[S]=0}var U=w.clone()._ishlnsubmul(y,1,p);U.negative===0&&(w=U,_&&(_.words[p]=1));for(var V=p-1;V>=0;V--){var ne=(w.words[y.length+V]|0)*67108864+(w.words[y.length+V-1]|0);for(ne=Math.min(ne/C|0,67108863),w._ishlnsubmul(y,ne,V);w.negative!==0;)ne--,w.negative=0,w._ishlnsubmul(y,1,V),w.isZero()||(w.negative^=1);_&&(_.words[V]=ne)}return _&&_._strip(),w._strip(),h!=="div"&&b!==0&&w.iushrn(b),{div:_||null,mod:w}},s.prototype.divmod=function(d,h,b){if(r(!d.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,y,C;return this.negative!==0&&d.negative===0?(C=this.neg().divmod(d,h),h!=="mod"&&(w=C.div.neg()),h!=="div"&&(y=C.mod.neg(),b&&y.negative!==0&&y.iadd(d)),{div:w,mod:y}):this.negative===0&&d.negative!==0?(C=this.divmod(d.neg(),h),h!=="mod"&&(w=C.div.neg()),{div:w,mod:C.mod}):this.negative&d.negative?(C=this.neg().divmod(d.neg(),h),h!=="div"&&(y=C.mod.neg(),b&&y.negative!==0&&y.isub(d)),{div:C.div,mod:y}):d.length>this.length||this.cmp(d)<0?{div:new s(0),mod:this}:d.length===1?h==="div"?{div:this.divn(d.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modrn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new s(this.modrn(d.words[0]))}:this._wordDiv(d,h)},s.prototype.div=function(d){return this.divmod(d,"div",!1).div},s.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},s.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},s.prototype.divRound=function(d){var h=this.divmod(d);if(h.mod.isZero())return h.div;var b=h.div.negative!==0?h.mod.isub(d):h.mod,w=d.ushrn(1),y=d.andln(1),C=b.cmp(w);return C<0||y===1&&C===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modrn=function(d){var h=d<0;h&&(d=-d),r(d<=67108863);for(var b=(1<<26)%d,w=0,y=this.length-1;y>=0;y--)w=(b*w+(this.words[y]|0))%d;return h?-w:w},s.prototype.modn=function(d){return this.modrn(d)},s.prototype.idivn=function(d){var h=d<0;h&&(d=-d),r(d<=67108863);for(var b=0,w=this.length-1;w>=0;w--){var y=(this.words[w]|0)+b*67108864;this.words[w]=y/d|0,b=y%d}return this._strip(),h?this.ineg():this},s.prototype.divn=function(d){return this.clone().idivn(d)},s.prototype.egcd=function(d){r(d.negative===0),r(!d.isZero());var h=this,b=d.clone();h.negative!==0?h=h.umod(d):h=h.clone();for(var w=new s(1),y=new s(0),C=new s(0),v=new s(1),p=0;h.isEven()&&b.isEven();)h.iushrn(1),b.iushrn(1),++p;for(var _=b.clone(),S=h.clone();!h.isZero();){for(var U=0,V=1;!(h.words[0]&V)&&U<26;++U,V<<=1);if(U>0)for(h.iushrn(U);U-- >0;)(w.isOdd()||y.isOdd())&&(w.iadd(_),y.isub(S)),w.iushrn(1),y.iushrn(1);for(var ne=0,we=1;!(b.words[0]&we)&&ne<26;++ne,we<<=1);if(ne>0)for(b.iushrn(ne);ne-- >0;)(C.isOdd()||v.isOdd())&&(C.iadd(_),v.isub(S)),C.iushrn(1),v.iushrn(1);h.cmp(b)>=0?(h.isub(b),w.isub(C),y.isub(v)):(b.isub(h),C.isub(w),v.isub(y))}return{a:C,b:v,gcd:b.iushln(p)}},s.prototype._invmp=function(d){r(d.negative===0),r(!d.isZero());var h=this,b=d.clone();h.negative!==0?h=h.umod(d):h=h.clone();for(var w=new s(1),y=new s(0),C=b.clone();h.cmpn(1)>0&&b.cmpn(1)>0;){for(var v=0,p=1;!(h.words[0]&p)&&v<26;++v,p<<=1);if(v>0)for(h.iushrn(v);v-- >0;)w.isOdd()&&w.iadd(C),w.iushrn(1);for(var _=0,S=1;!(b.words[0]&S)&&_<26;++_,S<<=1);if(_>0)for(b.iushrn(_);_-- >0;)y.isOdd()&&y.iadd(C),y.iushrn(1);h.cmp(b)>=0?(h.isub(b),w.isub(y)):(b.isub(h),y.isub(w))}var U;return h.cmpn(1)===0?U=w:U=y,U.cmpn(0)<0&&U.iadd(d),U},s.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var h=this.clone(),b=d.clone();h.negative=0,b.negative=0;for(var w=0;h.isEven()&&b.isEven();w++)h.iushrn(1),b.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;b.isEven();)b.iushrn(1);var y=h.cmp(b);if(y<0){var C=h;h=b,b=C}else if(y===0||b.cmpn(1)===0)break;h.isub(b)}while(!0);return b.iushln(w)},s.prototype.invm=function(d){return this.egcd(d).a.umod(d)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(d){return this.words[0]&d},s.prototype.bincn=function(d){r(typeof d=="number");var h=d%26,b=(d-h)/26,w=1<<h;if(this.length<=b)return this._expand(b+1),this.words[b]|=w,this;for(var y=w,C=b;y!==0&&C<this.length;C++){var v=this.words[C]|0;v+=y,y=v>>>26,v&=67108863,this.words[C]=v}return y!==0&&(this.words[C]=y,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(d){var h=d<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var b;if(this.length>1)b=1;else{h&&(d=-d),r(d<=67108863,"Number is too big");var w=this.words[0]|0;b=w===d?0:w<d?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var h=this.ucmp(d);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var h=0,b=this.length-1;b>=0;b--){var w=this.words[b]|0,y=d.words[b]|0;if(w!==y){w<y?h=-1:w>y&&(h=1);break}}return h},s.prototype.gtn=function(d){return this.cmpn(d)===1},s.prototype.gt=function(d){return this.cmp(d)===1},s.prototype.gten=function(d){return this.cmpn(d)>=0},s.prototype.gte=function(d){return this.cmp(d)>=0},s.prototype.ltn=function(d){return this.cmpn(d)===-1},s.prototype.lt=function(d){return this.cmp(d)===-1},s.prototype.lten=function(d){return this.cmpn(d)<=0},s.prototype.lte=function(d){return this.cmp(d)<=0},s.prototype.eqn=function(d){return this.cmpn(d)===0},s.prototype.eq=function(d){return this.cmp(d)===0},s.red=function(d){return new te(d)},s.prototype.toRed=function(d){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(d){return this.red=d,this},s.prototype.forceRed=function(d){return r(!this.red,"Already a number in reduction context"),this._forceRed(d)},s.prototype.redAdd=function(d){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},s.prototype.redIAdd=function(d){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},s.prototype.redSub=function(d){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},s.prototype.redISub=function(d){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},s.prototype.redShl=function(d){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},s.prototype.redMul=function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},s.prototype.redIMul=function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(d){return r(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var K={k256:null,p224:null,p192:null,p25519:null};function ee(f,d){this.name=f,this.p=new s(d,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ee.prototype._tmp=function(){var d=new s(null);return d.words=new Array(Math.ceil(this.n/13)),d},ee.prototype.ireduce=function(d){var h=d,b;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),b=h.bitLength();while(b>this.n);var w=b<this.n?-1:h.ucmp(this.p);return w===0?(h.words[0]=0,h.length=1):w>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},ee.prototype.split=function(d,h){d.iushrn(this.n,0,h)},ee.prototype.imulK=function(d){return d.imul(this.k)};function me(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(me,ee),me.prototype.split=function(d,h){for(var b=4194303,w=Math.min(d.length,9),y=0;y<w;y++)h.words[y]=d.words[y];if(h.length=w,d.length<=9){d.words[0]=0,d.length=1;return}var C=d.words[9];for(h.words[h.length++]=C&b,y=10;y<d.length;y++){var v=d.words[y]|0;d.words[y-10]=(v&b)<<4|C>>>22,C=v}C>>>=22,d.words[y-10]=C,C===0&&d.length>10?d.length-=10:d.length-=9},me.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var h=0,b=0;b<d.length;b++){var w=d.words[b]|0;h+=w*977,d.words[b]=h&67108863,h=w*64+(h/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function be(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(be,ee);function ie(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(ie,ee);function z(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(z,ee),z.prototype.imulK=function(d){for(var h=0,b=0;b<d.length;b++){var w=(d.words[b]|0)*19+h,y=w&67108863;w>>>=26,d.words[b]=y,h=w}return h!==0&&(d.words[d.length++]=h),d},s._prime=function(d){if(K[d])return K[d];var h;if(d==="k256")h=new me;else if(d==="p224")h=new be;else if(d==="p192")h=new ie;else if(d==="p25519")h=new z;else throw new Error("Unknown prime "+d);return K[d]=h,h};function te(f){if(typeof f=="string"){var d=s._prime(f);this.m=d.p,this.prime=d}else r(f.gtn(1),"modulus must be greater than 1"),this.m=f,this.prime=null}te.prototype._verify1=function(d){r(d.negative===0,"red works only with positives"),r(d.red,"red works only with red numbers")},te.prototype._verify2=function(d,h){r((d.negative|h.negative)===0,"red works only with positives"),r(d.red&&d.red===h.red,"red works only with red numbers")},te.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):(m(d,d.umod(this.m)._forceRed(this)),d)},te.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},te.prototype.add=function(d,h){this._verify2(d,h);var b=d.add(h);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},te.prototype.iadd=function(d,h){this._verify2(d,h);var b=d.iadd(h);return b.cmp(this.m)>=0&&b.isub(this.m),b},te.prototype.sub=function(d,h){this._verify2(d,h);var b=d.sub(h);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},te.prototype.isub=function(d,h){this._verify2(d,h);var b=d.isub(h);return b.cmpn(0)<0&&b.iadd(this.m),b},te.prototype.shl=function(d,h){return this._verify1(d),this.imod(d.ushln(h))},te.prototype.imul=function(d,h){return this._verify2(d,h),this.imod(d.imul(h))},te.prototype.mul=function(d,h){return this._verify2(d,h),this.imod(d.mul(h))},te.prototype.isqr=function(d){return this.imul(d,d.clone())},te.prototype.sqr=function(d){return this.mul(d,d)},te.prototype.sqrt=function(d){if(d.isZero())return d.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(d,b)}for(var w=this.m.subn(1),y=0;!w.isZero()&&w.andln(1)===0;)y++,w.iushrn(1);r(!w.isZero());var C=new s(1).toRed(this),v=C.redNeg(),p=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new s(2*_*_).toRed(this);this.pow(_,p).cmp(v)!==0;)_.redIAdd(v);for(var S=this.pow(_,w),U=this.pow(d,w.addn(1).iushrn(1)),V=this.pow(d,w),ne=y;V.cmp(C)!==0;){for(var we=V,fe=0;we.cmp(C)!==0;fe++)we=we.redSqr();r(fe<ne);var Ze=this.pow(S,new s(1).iushln(ne-fe-1));U=U.redMul(Ze),S=Ze.redSqr(),V=V.redMul(S),ne=fe}return U},te.prototype.invm=function(d){var h=d._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},te.prototype.pow=function(d,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return d.clone();var b=4,w=new Array(1<<b);w[0]=new s(1).toRed(this),w[1]=d;for(var y=2;y<w.length;y++)w[y]=this.mul(w[y-1],d);var C=w[0],v=0,p=0,_=h.bitLength()%26;for(_===0&&(_=26),y=h.length-1;y>=0;y--){for(var S=h.words[y],U=_-1;U>=0;U--){var V=S>>U&1;if(C!==w[0]&&(C=this.sqr(C)),V===0&&v===0){p=0;continue}v<<=1,v|=V,p++,!(p!==b&&(y!==0||U!==0))&&(C=this.mul(C,w[v]),p=0,v=0)}_=26}return C},te.prototype.convertTo=function(d){var h=d.umod(this.m);return h===d?h.clone():h},te.prototype.convertFrom=function(d){var h=d.clone();return h.red=null,h},s.mont=function(d){return new O(d)};function O(f){te.call(this,f),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(O,te),O.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},O.prototype.convertFrom=function(d){var h=this.imod(d.mul(this.rinv));return h.red=null,h},O.prototype.imul=function(d,h){if(d.isZero()||h.isZero())return d.words[0]=0,d.length=1,d;var b=d.imul(h),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=b.isub(w).iushrn(this.shift),C=y;return y.cmp(this.m)>=0?C=y.isub(this.m):y.cmpn(0)<0&&(C=y.iadd(this.m)),C._forceRed(this)},O.prototype.mul=function(d,h){if(d.isZero()||h.isZero())return new s(0)._forceRed(this);var b=d.mul(h),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=b.isub(w).iushrn(this.shift),C=y;return y.cmp(this.m)>=0?C=y.isub(this.m):y.cmpn(0)<0&&(C=y.iadd(this.m)),C._forceRed(this)},O.prototype.invm=function(d){var h=this.imod(d._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(typeof t>"u"||t,e)}}),Pr=9e15,jn=1e9,ac="0123456789abcdef",Ns="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ds="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",cc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Pr,maxE:Pr,crypto:!1},vf,fn,_e=!0,ta="[DecimalError] ",In=ta+"Invalid argument: ",kf=ta+"Precision limit exceeded",Cf=ta+"crypto unavailable",Af="[object Decimal]",ai=Math.floor,Gt=Math.pow,xb=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Sb=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Tb=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,xf=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui=1e7,ue=7,Mb=9007199254740991,Ob=Ns.length-1,lc=Ds.length-1,q={toStringTag:Af};q.absoluteValue=q.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),ae(e)};q.ceil=function(){return ae(new this.constructor(this),this.e+1,2)};q.clampedTo=q.clamp=function(e,t){var i,n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(In+t);return i=n.cmp(e),i<0?e:n.cmp(t)>0?t:new r(n)};q.comparedTo=q.cmp=function(e){var t,i,n,r,o=this,s=o.d,a=(e=new o.constructor(e)).d,c=o.s,l=e.s;if(!s||!a)return!c||!l?NaN:c!==l?c:s===a?0:!s^c<0?1:-1;if(!s[0]||!a[0])return s[0]?c:a[0]?-l:0;if(c!==l)return c;if(o.e!==e.e)return o.e>e.e^c<0?1:-1;for(n=s.length,r=a.length,t=0,i=n<r?n:r;t<i;++t)if(s[t]!==a[t])return s[t]>a[t]^c<0?1:-1;return n===r?0:n>r^c<0?1:-1};q.cosine=q.cos=function(){var e,t,i=this,n=i.constructor;return i.d?i.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+ue,n.rounding=1,i=Ib(n,If(n,i)),n.precision=e,n.rounding=t,ae(fn==2||fn==3?i.neg():i,e,t,!0)):new n(1):new n(NaN)};q.cubeRoot=q.cbrt=function(){var e,t,i,n,r,o,s,a,c,l,u=this,m=u.constructor;if(!u.isFinite()||u.isZero())return new m(u);for(_e=!1,o=u.s*Gt(u.s*u,1/3),!o||Math.abs(o)==1/0?(i=ni(u.d),e=u.e,(o=(e-i.length+1)%3)&&(i+=o==1||o==-2?"0":"00"),o=Gt(i,1/3),e=ai((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?i="5e"+e:(i=o.toExponential(),i=i.slice(0,i.indexOf("e")+1)+e),n=new m(i),n.s=u.s):n=new m(o.toString()),s=(e=m.precision)+3;;)if(a=n,c=a.times(a).times(a),l=c.plus(u),n=Je(l.plus(u).times(a),l.plus(c),s+2,1),ni(a.d).slice(0,s)===(i=ni(n.d)).slice(0,s))if(i=i.slice(s-3,s+1),i=="9999"||!r&&i=="4999"){if(!r&&(ae(a,e+1,0),a.times(a).times(a).eq(u))){n=a;break}s+=4,r=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(ae(n,e+1,1),t=!n.times(n).times(n).eq(u));break}return _e=!0,ae(n,e,m.rounding,t)};q.decimalPlaces=q.dp=function(){var e,t=this.d,i=NaN;if(t){if(e=t.length-1,i=(e-ai(this.e/ue))*ue,e=t[e],e)for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i};q.dividedBy=q.div=function(e){return Je(this,new this.constructor(e))};q.dividedToIntegerBy=q.divToInt=function(e){var t=this,i=t.constructor;return ae(Je(t,new i(e),0,1,1),i.precision,i.rounding)};q.equals=q.eq=function(e){return this.cmp(e)===0};q.floor=function(){return ae(new this.constructor(this),this.e+1,3)};q.greaterThan=q.gt=function(e){return this.cmp(e)>0};q.greaterThanOrEqualTo=q.gte=function(e){var t=this.cmp(e);return t==1||t===0};q.hyperbolicCosine=q.cosh=function(){var e,t,i,n,r,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;i=s.precision,n=s.rounding,s.precision=i+Math.max(o.e,o.sd())+4,s.rounding=1,r=o.d.length,r<32?(e=Math.ceil(r/3),t=(1/na(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=zr(s,1,o.times(t),new s(1),!0);for(var c,l=e,u=new s(8);l--;)c=o.times(o),o=a.minus(c.times(u.minus(c.times(u))));return ae(o,s.precision=i,s.rounding=n,!0)};q.hyperbolicSine=q.sinh=function(){var e,t,i,n,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(t=o.precision,i=o.rounding,o.precision=t+Math.max(r.e,r.sd())+4,o.rounding=1,n=r.d.length,n<3)r=zr(o,2,r,r,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,r=r.times(1/na(5,e)),r=zr(o,2,r,r,!0);for(var s,a=new o(5),c=new o(16),l=new o(20);e--;)s=r.times(r),r=r.times(a.plus(s.times(c.times(s).plus(l))))}return o.precision=t,o.rounding=i,ae(r,t,i,!0)};q.hyperbolicTangent=q.tanh=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,Je(i.sinh(),i.cosh(),n.precision=e,n.rounding=t)):new n(i.s)};q.inverseCosine=q.acos=function(){var e,t=this,i=t.constructor,n=t.abs().cmp(1),r=i.precision,o=i.rounding;return n!==-1?n===0?t.isNeg()?$i(i,r,o):new i(0):new i(NaN):t.isZero()?$i(i,r+4,o).times(.5):(i.precision=r+6,i.rounding=1,t=t.asin(),e=$i(i,r+4,o).times(.5),i.precision=r,i.rounding=o,e.minus(t))};q.inverseHyperbolicCosine=q.acosh=function(){var e,t,i=this,n=i.constructor;return i.lte(1)?new n(i.eq(1)?0:NaN):i.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(i.e),i.sd())+4,n.rounding=1,_e=!1,i=i.times(i).minus(1).sqrt().plus(i),_e=!0,n.precision=e,n.rounding=t,i.ln()):new n(i)};q.inverseHyperbolicSine=q.asinh=function(){var e,t,i=this,n=i.constructor;return!i.isFinite()||i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,n.rounding=1,_e=!1,i=i.times(i).plus(1).sqrt().plus(i),_e=!0,n.precision=e,n.rounding=t,i.ln())};q.inverseHyperbolicTangent=q.atanh=function(){var e,t,i,n,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=o.precision,t=o.rounding,n=r.sd(),Math.max(n,e)<2*-r.e-1?ae(new o(r),e,t,!0):(o.precision=i=n-r.e,r=Je(r.plus(1),new o(1).minus(r),i+e,1),o.precision=e+4,o.rounding=1,r=r.ln(),o.precision=e,o.rounding=t,r.times(.5))):new o(NaN)};q.inverseSine=q.asin=function(){var e,t,i,n,r=this,o=r.constructor;return r.isZero()?new o(r):(t=r.abs().cmp(1),i=o.precision,n=o.rounding,t!==-1?t===0?(e=$i(o,i+4,n).times(.5),e.s=r.s,e):new o(NaN):(o.precision=i+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=i,o.rounding=n,r.times(2)))};q.inverseTangent=q.atan=function(){var e,t,i,n,r,o,s,a,c,l=this,u=l.constructor,m=u.precision,g=u.rounding;if(l.isFinite()){if(l.isZero())return new u(l);if(l.abs().eq(1)&&m+4<=lc)return s=$i(u,m+4,g).times(.25),s.s=l.s,s}else{if(!l.s)return new u(NaN);if(m+4<=lc)return s=$i(u,m+4,g).times(.5),s.s=l.s,s}for(u.precision=a=m+10,u.rounding=1,i=Math.min(28,a/ue+2|0),e=i;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(_e=!1,t=Math.ceil(a/ue),n=1,c=l.times(l),s=new u(l),r=l;e!==-1;)if(r=r.times(c),o=s.minus(r.div(n+=2)),r=r.times(c),s=o.plus(r.div(n+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return i&&(s=s.times(2<<i-1)),_e=!0,ae(s,u.precision=m,u.rounding=g,!0)};q.isFinite=function(){return!!this.d};q.isInteger=q.isInt=function(){return!!this.d&&ai(this.e/ue)>this.d.length-2};q.isNaN=function(){return!this.s};q.isNegative=q.isNeg=function(){return this.s<0};q.isPositive=q.isPos=function(){return this.s>0};q.isZero=function(){return!!this.d&&this.d[0]===0};q.lessThan=q.lt=function(e){return this.cmp(e)<0};q.lessThanOrEqualTo=q.lte=function(e){return this.cmp(e)<1};q.logarithm=q.log=function(e){var t,i,n,r,o,s,a,c,l=this,u=l.constructor,m=u.precision,g=u.rounding,k=5;if(e==null)e=new u(10),t=!0;else{if(e=new u(e),i=e.d,e.s<0||!i||!i[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(i=l.d,l.s<0||!i||!i[0]||l.eq(1))return new u(i&&!i[0]?-1/0:l.s!=1?NaN:i?0:1/0);if(t)if(i.length>1)o=!0;else{for(r=i[0];r%10===0;)r/=10;o=r!==1}if(_e=!1,a=m+k,s=xn(l,a),n=t?Rs(u,a+10):xn(e,a),c=Je(s,n,a,1),Eo(c.d,r=m,g))do if(a+=10,s=xn(l,a),n=t?Rs(u,a+10):xn(e,a),c=Je(s,n,a,1),!o){+ni(c.d).slice(r+1,r+15)+1==1e14&&(c=ae(c,m+1,0));break}while(Eo(c.d,r+=10,g));return _e=!0,ae(c,m,g)};q.minus=q.sub=function(e){var t,i,n,r,o,s,a,c,l,u,m,g,k=this,x=k.constructor;if(e=new x(e),!k.d||!e.d)return!k.s||!e.s?e=new x(NaN):k.d?e.s=-e.s:e=new x(e.d||k.s!==e.s?k:NaN),e;if(k.s!=e.s)return e.s=-e.s,k.plus(e);if(l=k.d,g=e.d,a=x.precision,c=x.rounding,!l[0]||!g[0]){if(g[0])e.s=-e.s;else if(l[0])e=new x(k);else return new x(c===3?-0:0);return _e?ae(e,a,c):e}if(i=ai(e.e/ue),u=ai(k.e/ue),l=l.slice(),o=u-i,o){for(m=o<0,m?(t=l,o=-o,s=g.length):(t=g,i=u,s=l.length),n=Math.max(Math.ceil(a/ue),s)+2,o>n&&(o=n,t.length=1),t.reverse(),n=o;n--;)t.push(0);t.reverse()}else{for(n=l.length,s=g.length,m=n<s,m&&(s=n),n=0;n<s;n++)if(l[n]!=g[n]){m=l[n]<g[n];break}o=0}for(m&&(t=l,l=g,g=t,e.s=-e.s),s=l.length,n=g.length-s;n>0;--n)l[s++]=0;for(n=g.length;n>o;){if(l[--n]<g[n]){for(r=n;r&&l[--r]===0;)l[r]=Ui-1;--l[r],l[n]+=Ui}l[n]-=g[n]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--i;return l[0]?(e.d=l,e.e=ia(l,i),_e?ae(e,a,c):e):new x(c===3?-0:0)};q.modulo=q.mod=function(e){var t,i=this,n=i.constructor;return e=new n(e),!i.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||i.d&&!i.d[0]?ae(new n(i),n.precision,n.rounding):(_e=!1,n.modulo==9?(t=Je(i,e.abs(),0,3,1),t.s*=e.s):t=Je(i,e,0,n.modulo,1),t=t.times(e),_e=!0,i.minus(t))};q.naturalExponential=q.exp=function(){return dc(this)};q.naturalLogarithm=q.ln=function(){return xn(this)};q.negated=q.neg=function(){var e=new this.constructor(this);return e.s=-e.s,ae(e)};q.plus=q.add=function(e){var t,i,n,r,o,s,a,c,l,u,m=this,g=m.constructor;if(e=new g(e),!m.d||!e.d)return!m.s||!e.s?e=new g(NaN):m.d||(e=new g(e.d||m.s===e.s?m:NaN)),e;if(m.s!=e.s)return e.s=-e.s,m.minus(e);if(l=m.d,u=e.d,a=g.precision,c=g.rounding,!l[0]||!u[0])return u[0]||(e=new g(m)),_e?ae(e,a,c):e;if(o=ai(m.e/ue),n=ai(e.e/ue),l=l.slice(),r=o-n,r){for(r<0?(i=l,r=-r,s=u.length):(i=u,n=o,s=l.length),o=Math.ceil(a/ue),s=o>s?o+1:s+1,r>s&&(r=s,i.length=1),i.reverse();r--;)i.push(0);i.reverse()}for(s=l.length,r=u.length,s-r<0&&(r=s,i=u,u=l,l=i),t=0;r;)t=(l[--r]=l[r]+u[r]+t)/Ui|0,l[r]%=Ui;for(t&&(l.unshift(t),++n),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=ia(l,n),_e?ae(e,a,c):e};q.precision=q.sd=function(e){var t,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(In+e);return i.d?(t=Sf(i.d),e&&i.e+1>t&&(t=i.e+1)):t=NaN,t};q.round=function(){var e=this,t=e.constructor;return ae(new t(e),e.e+1,t.rounding)};q.sine=q.sin=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+ue,n.rounding=1,i=jb(n,If(n,i)),n.precision=e,n.rounding=t,ae(fn>2?i.neg():i,e,t,!0)):new n(NaN)};q.squareRoot=q.sqrt=function(){var e,t,i,n,r,o,s=this,a=s.d,c=s.e,l=s.s,u=s.constructor;if(l!==1||!a||!a[0])return new u(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);for(_e=!1,l=Math.sqrt(+s),l==0||l==1/0?(t=ni(a),(t.length+c)%2==0&&(t+="0"),l=Math.sqrt(t),c=ai((c+1)/2)-(c<0||c%2),l==1/0?t="5e"+c:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),n=new u(t)):n=new u(l.toString()),i=(c=u.precision)+3;;)if(o=n,n=o.plus(Je(s,o,i+2,1)).times(.5),ni(o.d).slice(0,i)===(t=ni(n.d)).slice(0,i))if(t=t.slice(i-3,i+1),t=="9999"||!r&&t=="4999"){if(!r&&(ae(o,c+1,0),o.times(o).eq(s))){n=o;break}i+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ae(n,c+1,1),e=!n.times(n).eq(s));break}return _e=!0,ae(n,c,u.rounding,e)};q.tangent=q.tan=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,i=i.sin(),i.s=1,i=Je(i,new n(1).minus(i.times(i)).sqrt(),e+10,0),n.precision=e,n.rounding=t,ae(fn==2||fn==4?i.neg():i,e,t,!0)):new n(NaN)};q.times=q.mul=function(e){var t,i,n,r,o,s,a,c,l,u=this,m=u.constructor,g=u.d,k=(e=new m(e)).d;if(e.s*=u.s,!g||!g[0]||!k||!k[0])return new m(!e.s||g&&!g[0]&&!k||k&&!k[0]&&!g?NaN:!g||!k?e.s/0:e.s*0);for(i=ai(u.e/ue)+ai(e.e/ue),c=g.length,l=k.length,c<l&&(o=g,g=k,k=o,s=c,c=l,l=s),o=[],s=c+l,n=s;n--;)o.push(0);for(n=l;--n>=0;){for(t=0,r=c+n;r>n;)a=o[r]+k[n]*g[r-n-1]+t,o[r--]=a%Ui|0,t=a/Ui|0;o[r]=(o[r]+t)%Ui|0}for(;!o[--s];)o.pop();return t?++i:o.shift(),e.d=o,e.e=ia(o,i),_e?ae(e,m.precision,m.rounding):e};q.toBinary=function(e,t){return zc(this,2,e,t)};q.toDecimalPlaces=q.toDP=function(e,t){var i=this,n=i.constructor;return i=new n(i),e===void 0?i:(_i(e,0,jn),t===void 0?t=n.rounding:_i(t,0,8),ae(i,e+i.e+1,t))};q.toExponential=function(e,t){var i,n=this,r=n.constructor;return e===void 0?i=en(n,!0):(_i(e,0,jn),t===void 0?t=r.rounding:_i(t,0,8),n=ae(new r(n),e+1,t),i=en(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+i:i};q.toFixed=function(e,t){var i,n,r=this,o=r.constructor;return e===void 0?i=en(r):(_i(e,0,jn),t===void 0?t=o.rounding:_i(t,0,8),n=ae(new o(r),e+r.e+1,t),i=en(n,!1,e+n.e+1)),r.isNeg()&&!r.isZero()?"-"+i:i};q.toFraction=function(e){var t,i,n,r,o,s,a,c,l,u,m,g,k=this,x=k.d,T=k.constructor;if(!x)return new T(k);if(l=i=new T(1),n=c=new T(0),t=new T(n),o=t.e=Sf(x)-k.e-1,s=o%ue,t.d[0]=Gt(10,s<0?ue+s:s),e==null)e=o>0?t:l;else{if(a=new T(e),!a.isInt()||a.lt(l))throw Error(In+a);e=a.gt(t)?o>0?t:l:a}for(_e=!1,a=new T(ni(x)),u=T.precision,T.precision=o=x.length*ue*2;m=Je(a,t,0,1,1),r=i.plus(m.times(n)),r.cmp(e)!=1;)i=n,n=r,r=l,l=c.plus(m.times(r)),c=r,r=t,t=a.minus(m.times(r)),a=r;return r=Je(e.minus(i),n,0,1,1),c=c.plus(r.times(l)),i=i.plus(r.times(n)),c.s=l.s=k.s,g=Je(l,n,o,1).minus(k).abs().cmp(Je(c,i,o,1).minus(k).abs())<1?[l,n]:[c,i],T.precision=u,_e=!0,g};q.toHexadecimal=q.toHex=function(e,t){return zc(this,16,e,t)};q.toNearest=function(e,t){var i=this,n=i.constructor;if(i=new n(i),e==null){if(!i.d)return i;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:_i(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(_e=!1,i=Je(i,e,0,t,1).times(e),_e=!0,ae(i)):(e.s=i.s,i=e),i};q.toNumber=function(){return+this};q.toOctal=function(e,t){return zc(this,8,e,t)};q.toPower=q.pow=function(e){var t,i,n,r,o,s,a=this,c=a.constructor,l=+(e=new c(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new c(Gt(+a,l));if(a=new c(a),a.eq(1))return a;if(n=c.precision,o=c.rounding,e.eq(1))return ae(a,n,o);if(t=ai(e.e/ue),t>=e.d.length-1&&(i=l<0?-l:l)<=Mb)return r=Tf(c,a,i,n),e.s<0?new c(1).div(r):ae(r,n,o);if(s=a.s,s<0){if(t<e.d.length-1)return new c(NaN);if(e.d[t]&1||(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return i=Gt(+a,l),t=i==0||!isFinite(i)?ai(l*(Math.log("0."+ni(a.d))/Math.LN10+a.e+1)):new c(i+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?s/0:0):(_e=!1,c.rounding=a.s=1,i=Math.min(12,(t+"").length),r=dc(e.times(xn(a,n+i)),n),r.d&&(r=ae(r,n+5,1),Eo(r.d,n,o)&&(t=n+10,r=ae(dc(e.times(xn(a,t+i)),t),t+5,1),+ni(r.d).slice(n+1,n+15)+1==1e14&&(r=ae(r,n+1,0)))),r.s=s,_e=!0,c.rounding=o,ae(r,n,o))};q.toPrecision=function(e,t){var i,n=this,r=n.constructor;return e===void 0?i=en(n,n.e<=r.toExpNeg||n.e>=r.toExpPos):(_i(e,1,jn),t===void 0?t=r.rounding:_i(t,0,8),n=ae(new r(n),e,t),i=en(n,e<=n.e||n.e<=r.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+i:i};q.toSignificantDigits=q.toSD=function(e,t){var i=this,n=i.constructor;return e===void 0?(e=n.precision,t=n.rounding):(_i(e,1,jn),t===void 0?t=n.rounding:_i(t,0,8)),ae(new n(i),e,t)};q.toString=function(){var e=this,t=e.constructor,i=en(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i};q.truncated=q.trunc=function(){return ae(new this.constructor(this),this.e+1,1)};q.valueOf=q.toJSON=function(){var e=this,t=e.constructor,i=en(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+i:i};function ni(e){var t,i,n,r=e.length-1,o="",s=e[0];if(r>0){for(o+=s,t=1;t<r;t++)n=e[t]+"",i=ue-n.length,i&&(o+=An(i)),o+=n;s=e[t],n=s+"",i=ue-n.length,i&&(o+=An(i))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function _i(e,t,i){if(e!==~~e||e<t||e>i)throw Error(In+e)}function Eo(e,t,i,n){var r,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=ue,r=0):(r=Math.ceil((t+1)/ue),t%=ue),o=Gt(10,ue-t),a=e[r]%o|0,n==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),s=i<4&&a==99999||i>3&&a==49999||a==5e4||a==0):s=(i<4&&a+1==o||i>3&&a+1==o/2)&&(e[r+1]/o/100|0)==Gt(10,t-2)-1||(a==o/2||a==0)&&(e[r+1]/o/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),s=(n||i<4)&&a==9999||!n&&i>3&&a==4999):s=((n||i<4)&&a+1==o||!n&&i>3&&a+1==o/2)&&(e[r+1]/o/1e3|0)==Gt(10,t-3)-1,s}function hs(e,t,i){for(var n,r=[0],o,s=0,a=e.length;s<a;){for(o=r.length;o--;)r[o]*=t;for(r[0]+=ac.indexOf(e.charAt(s++)),n=0;n<r.length;n++)r[n]>i-1&&(r[n+1]===void 0&&(r[n+1]=0),r[n+1]+=r[n]/i|0,r[n]%=i)}return r.reverse()}function Ib(e,t){var i,n,r;if(t.isZero())return t;n=t.d.length,n<32?(i=Math.ceil(n/3),r=(1/na(4,i)).toString()):(i=16,r="2.3283064365386962890625e-10"),e.precision+=i,t=zr(e,1,t.times(r),new e(1));for(var o=i;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=i,t}var Je=function(){function e(n,r,o){var s,a=0,c=n.length;for(n=n.slice();c--;)s=n[c]*r+a,n[c]=s%o|0,a=s/o|0;return a&&n.unshift(a),n}function t(n,r,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(n[a]!=r[a]){c=n[a]>r[a]?1:-1;break}return c}function i(n,r,o,s){for(var a=0;o--;)n[o]-=a,a=n[o]<r[o]?1:0,n[o]=a*s+n[o]-r[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,r,o,s,a,c){var l,u,m,g,k,x,T,I,E,B,N,F,H,K,ee,me,be,ie,z,te,O=n.constructor,f=n.s==r.s?1:-1,d=n.d,h=r.d;if(!d||!d[0]||!h||!h[0])return new O(!n.s||!r.s||(d?h&&d[0]==h[0]:!h)?NaN:d&&d[0]==0||!h?f*0:f/0);for(c?(k=1,u=n.e-r.e):(c=Ui,k=ue,u=ai(n.e/k)-ai(r.e/k)),z=h.length,be=d.length,E=new O(f),B=E.d=[],m=0;h[m]==(d[m]||0);m++);if(h[m]>(d[m]||0)&&u--,o==null?(K=o=O.precision,s=O.rounding):a?K=o+(n.e-r.e)+1:K=o,K<0)B.push(1),x=!0;else{if(K=K/k+2|0,m=0,z==1){for(g=0,h=h[0],K++;(m<be||g)&&K--;m++)ee=g*c+(d[m]||0),B[m]=ee/h|0,g=ee%h|0;x=g||m<be}else{for(g=c/(h[0]+1)|0,g>1&&(h=e(h,g,c),d=e(d,g,c),z=h.length,be=d.length),me=z,N=d.slice(0,z),F=N.length;F<z;)N[F++]=0;te=h.slice(),te.unshift(0),ie=h[0],h[1]>=c/2&&++ie;do g=0,l=t(h,N,z,F),l<0?(H=N[0],z!=F&&(H=H*c+(N[1]||0)),g=H/ie|0,g>1?(g>=c&&(g=c-1),T=e(h,g,c),I=T.length,F=N.length,l=t(T,N,I,F),l==1&&(g--,i(T,z<I?te:h,I,c))):(g==0&&(l=g=1),T=h.slice()),I=T.length,I<F&&T.unshift(0),i(N,T,F,c),l==-1&&(F=N.length,l=t(h,N,z,F),l<1&&(g++,i(N,z<F?te:h,F,c))),F=N.length):l===0&&(g++,N=[0]),B[m++]=g,l&&N[0]?N[F++]=d[me]||0:(N=[d[me]],F=1);while((me++<be||N[0]!==void 0)&&K--);x=N[0]!==void 0}B[0]||B.shift()}if(k==1)E.e=u,vf=x;else{for(m=1,g=B[0];g>=10;g/=10)m++;E.e=m+u*k-1,ae(E,a?o+E.e+1:o,s,x)}return E}}();function ae(e,t,i,n){var r,o,s,a,c,l,u,m,g,k=e.constructor;e:if(t!=null){if(m=e.d,!m)return e;for(r=1,a=m[0];a>=10;a/=10)r++;if(o=t-r,o<0)o+=ue,s=t,u=m[g=0],c=u/Gt(10,r-s-1)%10|0;else if(g=Math.ceil((o+1)/ue),a=m.length,g>=a)if(n){for(;a++<=g;)m.push(0);u=c=0,r=1,o%=ue,s=o-ue+1}else break e;else{for(u=a=m[g],r=1;a>=10;a/=10)r++;o%=ue,s=o-ue+r,c=s<0?0:u/Gt(10,r-s-1)%10|0}if(n=n||t<0||m[g+1]!==void 0||(s<0?u:u%Gt(10,r-s-1)),l=i<4?(c||n)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||n||i==6&&(o>0?s>0?u/Gt(10,r-s):0:m[g-1])%10&1||i==(e.s<0?8:7)),t<1||!m[0])return m.length=0,l?(t-=e.e+1,m[0]=Gt(10,(ue-t%ue)%ue),e.e=-t||0):m[0]=e.e=0,e;if(o==0?(m.length=g,a=1,g--):(m.length=g+1,a=Gt(10,ue-o),m[g]=s>0?(u/Gt(10,r-s)%Gt(10,s)|0)*a:0),l)for(;;)if(g==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,m[0]==Ui&&(m[0]=1));break}else{if(m[g]+=a,m[g]!=Ui)break;m[g--]=0,a=1}for(o=m.length;m[--o]===0;)m.pop()}return _e&&(e.e>k.maxE?(e.d=null,e.e=NaN):e.e<k.minE&&(e.e=0,e.d=[0])),e}function en(e,t,i){if(!e.isFinite())return Of(e);var n,r=e.e,o=ni(e.d),s=o.length;return t?(i&&(n=i-s)>0?o=o.charAt(0)+"."+o.slice(1)+An(n):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):r<0?(o="0."+An(-r-1)+o,i&&(n=i-s)>0&&(o+=An(n))):r>=s?(o+=An(r+1-s),i&&(n=i-r-1)>0&&(o=o+"."+An(n))):((n=r+1)<s&&(o=o.slice(0,n)+"."+o.slice(n)),i&&(n=i-s)>0&&(r+1===s&&(o+="."),o+=An(n))),o}function ia(e,t){var i=e[0];for(t*=ue;i>=10;i/=10)t++;return t}function Rs(e,t,i){if(t>Ob)throw _e=!0,i&&(e.precision=i),Error(kf);return ae(new e(Ns),t,1,!0)}function $i(e,t,i){if(t>lc)throw Error(kf);return ae(new e(Ds),t,i,!0)}function Sf(e){var t=e.length-1,i=t*ue+1;if(t=e[t],t){for(;t%10==0;t/=10)i--;for(t=e[0];t>=10;t/=10)i++}return i}function An(e){for(var t="";e--;)t+="0";return t}function Tf(e,t,i,n){var r,o=new e(1),s=Math.ceil(n/ue+4);for(_e=!1;;){if(i%2&&(o=o.times(t),Vl(o.d,s)&&(r=!0)),i=ai(i/2),i===0){i=o.d.length-1,r&&o.d[i]===0&&++o.d[i];break}t=t.times(t),Vl(t.d,s)}return _e=!0,o}function Kl(e){return e.d[e.d.length-1]&1}function Mf(e,t,i){for(var n,r=new e(t[0]),o=0;++o<t.length;)if(n=new e(t[o]),n.s)r[i](n)&&(r=n);else{r=n;break}return r}function dc(e,t){var i,n,r,o,s,a,c,l=0,u=0,m=0,g=e.constructor,k=g.rounding,x=g.precision;if(!e.d||!e.d[0]||e.e>17)return new g(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(_e=!1,c=x):c=t,a=new g(.03125);e.e>-2;)e=e.times(a),m+=5;for(n=Math.log(Gt(2,m))/Math.LN10*2+5|0,c+=n,i=o=s=new g(1),g.precision=c;;){if(o=ae(o.times(e),c,1),i=i.times(++u),a=s.plus(Je(o,i,c,1)),ni(a.d).slice(0,c)===ni(s.d).slice(0,c)){for(r=m;r--;)s=ae(s.times(s),c,1);if(t==null)if(l<3&&Eo(s.d,c-n,k,l))g.precision=c+=10,i=o=a=new g(1),u=0,l++;else return ae(s,g.precision=x,k,_e=!0);else return g.precision=x,s}s=a}}function xn(e,t){var i,n,r,o,s,a,c,l,u,m,g,k=1,x=10,T=e,I=T.d,E=T.constructor,B=E.rounding,N=E.precision;if(T.s<0||!I||!I[0]||!T.e&&I[0]==1&&I.length==1)return new E(I&&!I[0]?-1/0:T.s!=1?NaN:I?0:T);if(t==null?(_e=!1,u=N):u=t,E.precision=u+=x,i=ni(I),n=i.charAt(0),Math.abs(o=T.e)<15e14){for(;n<7&&n!=1||n==1&&i.charAt(1)>3;)T=T.times(e),i=ni(T.d),n=i.charAt(0),k++;o=T.e,n>1?(T=new E("0."+i),o++):T=new E(n+"."+i.slice(1))}else return l=Rs(E,u+2,N).times(o+""),T=xn(new E(n+"."+i.slice(1)),u-x).plus(l),E.precision=N,t==null?ae(T,N,B,_e=!0):T;for(m=T,c=s=T=Je(T.minus(1),T.plus(1),u,1),g=ae(T.times(T),u,1),r=3;;){if(s=ae(s.times(g),u,1),l=c.plus(Je(s,new E(r),u,1)),ni(l.d).slice(0,u)===ni(c.d).slice(0,u))if(c=c.times(2),o!==0&&(c=c.plus(Rs(E,u+2,N).times(o+""))),c=Je(c,new E(k),u,1),t==null)if(Eo(c.d,u-x,B,a))E.precision=u+=x,l=s=T=Je(m.minus(1),m.plus(1),u,1),g=ae(T.times(T),u,1),r=a=1;else return ae(c,E.precision=N,B,_e=!0);else return E.precision=N,c;c=l,r+=2}}function Of(e){return String(e.s*e.s/0)}function uc(e,t){var i,n,r;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length),n=0;t.charCodeAt(n)===48;n++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(n,r),t){if(r-=n,e.e=i=i-n-1,e.d=[],n=(i+1)%ue,i<0&&(n+=ue),n<r){for(n&&e.d.push(+t.slice(0,n)),r-=ue;n<r;)e.d.push(+t.slice(n,n+=ue));t=t.slice(n),n=ue-t.length}else n-=r;for(;n--;)t+="0";e.d.push(+t),_e&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Pb(e,t){var i,n,r,o,s,a,c,l,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),xf.test(t))return uc(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Sb.test(t))i=16,t=t.toLowerCase();else if(xb.test(t))i=2;else if(Tb.test(t))i=8;else throw Error(In+t);for(o=t.search(/p/i),o>0?(c=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,n=e.constructor,s&&(t=t.replace(".",""),a=t.length,o=a-o,r=Tf(n,new n(i),o,o*2)),l=hs(t,i,Ui),u=l.length-1,o=u;l[o]===0;--o)l.pop();return o<0?new n(e.s*0):(e.e=ia(l,u),e.d=l,_e=!1,s&&(e=Je(e,r,a*4)),c&&(e=e.times(Math.abs(c)<54?Gt(2,c):Fo.pow(2,c))),_e=!0,e)}function jb(e,t){var i,n=t.d.length;if(n<3)return t.isZero()?t:zr(e,2,t,t);i=1.4*Math.sqrt(n),i=i>16?16:i|0,t=t.times(1/na(5,i)),t=zr(e,2,t,t);for(var r,o=new e(5),s=new e(16),a=new e(20);i--;)r=t.times(t),t=t.times(o.plus(r.times(s.times(r).minus(a))));return t}function zr(e,t,i,n,r){var o,s,a,c,l=e.precision,u=Math.ceil(l/ue);for(_e=!1,c=i.times(i),a=new e(n);;){if(s=Je(a.times(c),new e(t++*t++),l,1),a=r?n.plus(s):n.minus(s),n=Je(s.times(c),new e(t++*t++),l,1),s=a.plus(n),s.d[u]!==void 0){for(o=u;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=n,n=s,s=o}return _e=!0,s.d.length=u+1,s}function na(e,t){for(var i=e;--t;)i*=e;return i}function If(e,t){var i,n=t.s<0,r=$i(e,e.precision,1),o=r.times(.5);if(t=t.abs(),t.lte(o))return fn=n?4:1,t;if(i=t.divToInt(r),i.isZero())fn=n?3:2;else{if(t=t.minus(i.times(r)),t.lte(o))return fn=Kl(i)?n?2:3:n?4:1,t;fn=Kl(i)?n?1:4:n?3:2}return t.minus(r).abs()}function zc(e,t,i,n){var r,o,s,a,c,l,u,m,g,k=e.constructor,x=i!==void 0;if(x?(_i(i,1,jn),n===void 0?n=k.rounding:_i(n,0,8)):(i=k.precision,n=k.rounding),!e.isFinite())u=Of(e);else{for(u=en(e),s=u.indexOf("."),x?(r=2,t==16?i=i*4-3:t==8&&(i=i*3-2)):r=t,s>=0&&(u=u.replace(".",""),g=new k(1),g.e=u.length-s,g.d=hs(en(g),10,r),g.e=g.d.length),m=hs(u,10,r),o=c=m.length;m[--c]==0;)m.pop();if(!m[0])u=x?"0p+0":"0";else{if(s<0?o--:(e=new k(e),e.d=m,e.e=o,e=Je(e,g,i,n,0,r),m=e.d,o=e.e,l=vf),s=m[i],a=r/2,l=l||m[i+1]!==void 0,l=n<4?(s!==void 0||l)&&(n===0||n===(e.s<0?3:2)):s>a||s===a&&(n===4||l||n===6&&m[i-1]&1||n===(e.s<0?8:7)),m.length=i,l)for(;++m[--i]>r-1;)m[i]=0,i||(++o,m.unshift(1));for(c=m.length;!m[c-1];--c);for(s=0,u="";s<c;s++)u+=ac.charAt(m[s]);if(x){if(c>1)if(t==16||t==8){for(s=t==16?4:3,--c;c%s;c++)u+="0";for(m=hs(u,r,t),c=m.length;!m[c-1];--c);for(s=1,u="1.";s<c;s++)u+=ac.charAt(m[s])}else u=u.charAt(0)+"."+u.slice(1);u=u+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)u="0"+u;u="0."+u}else if(++o>c)for(o-=c;o--;)u+="0";else o<c&&(u=u.slice(0,o)+"."+u.slice(o))}u=(t==16?"0x":t==2?"0b":t==8?"0o":"")+u}return e.s<0?"-"+u:u}function Vl(e,t){if(e.length>t)return e.length=t,!0}function Eb(e){return new this(e).abs()}function Bb(e){return new this(e).acos()}function Nb(e){return new this(e).acosh()}function Db(e,t){return new this(e).plus(t)}function Rb(e){return new this(e).asin()}function $b(e){return new this(e).asinh()}function qb(e){return new this(e).atan()}function Fb(e){return new this(e).atanh()}function Lb(e,t){e=new this(e),t=new this(t);var i,n=this.precision,r=this.rounding,o=n+4;return!e.s||!t.s?i=new this(NaN):!e.d&&!t.d?(i=$i(this,o,1).times(t.s>0?.25:.75),i.s=e.s):!t.d||e.isZero()?(i=t.s<0?$i(this,n,r):new this(0),i.s=e.s):!e.d||t.isZero()?(i=$i(this,o,1).times(.5),i.s=e.s):t.s<0?(this.precision=o,this.rounding=1,i=this.atan(Je(e,t,o,1)),t=$i(this,o,1),this.precision=n,this.rounding=r,i=e.s<0?i.minus(t):i.plus(t)):i=this.atan(Je(e,t,o,1)),i}function Ub(e){return new this(e).cbrt()}function Kb(e){return ae(e=new this(e),e.e+1,2)}function Vb(e,t,i){return new this(e).clamp(t,i)}function zb(e){if(!e||typeof e!="object")throw Error(ta+"Object expected");var t,i,n,r=e.defaults===!0,o=["precision",1,jn,"rounding",0,8,"toExpNeg",-Pr,0,"toExpPos",0,Pr,"maxE",0,Pr,"minE",-Pr,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(i=o[t],r&&(this[i]=cc[i]),(n=e[i])!==void 0)if(ai(n)===n&&n>=o[t+1]&&n<=o[t+2])this[i]=n;else throw Error(In+i+": "+n);if(i="crypto",r&&(this[i]=cc[i]),(n=e[i])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[i]=!0;else throw Error(Cf);else this[i]=!1;else throw Error(In+i+": "+n);return this}function Wb(e){return new this(e).cos()}function Gb(e){return new this(e).cosh()}function Pf(e){var t,i,n;function r(o){var s,a,c,l=this;if(!(l instanceof r))return new r(o);if(l.constructor=r,zl(o)){l.s=o.s,_e?!o.d||o.e>r.maxE?(l.e=NaN,l.d=null):o.e<r.minE?(l.e=0,l.d=[0]):(l.e=o.e,l.d=o.d.slice()):(l.e=o.e,l.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){l.s=1/o<0?-1:1,l.e=0,l.d=[0];return}if(o<0?(o=-o,l.s=-1):l.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;_e?s>r.maxE?(l.e=NaN,l.d=null):s<r.minE?(l.e=0,l.d=[0]):(l.e=s,l.d=[o]):(l.e=s,l.d=[o]);return}else if(o*0!==0){o||(l.s=NaN),l.e=NaN,l.d=null;return}return uc(l,o.toString())}else if(c!=="string")throw Error(In+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),l.s=-1):(a===43&&(o=o.slice(1)),l.s=1),xf.test(o)?uc(l,o):Pb(l,o)}if(r.prototype=q,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=zb,r.clone=Pf,r.isDecimal=zl,r.abs=Eb,r.acos=Bb,r.acosh=Nb,r.add=Db,r.asin=Rb,r.asinh=$b,r.atan=qb,r.atanh=Fb,r.atan2=Lb,r.cbrt=Ub,r.ceil=Kb,r.clamp=Vb,r.cos=Wb,r.cosh=Gb,r.div=Hb,r.exp=Xb,r.floor=Jb,r.hypot=Zb,r.ln=Qb,r.log=Yb,r.log10=t1,r.log2=e1,r.max=i1,r.min=n1,r.mod=r1,r.mul=o1,r.pow=s1,r.random=a1,r.round=c1,r.sign=l1,r.sin=d1,r.sinh=u1,r.sqrt=f1,r.sub=h1,r.sum=p1,r.tan=_1,r.tanh=m1,r.trunc=g1,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(i=n[t++])||(e[i]=this[i]);return r.config(e),r}function Hb(e,t){return new this(e).div(t)}function Xb(e){return new this(e).exp()}function Jb(e){return ae(e=new this(e),e.e+1,3)}function Zb(){var e,t,i=new this(0);for(_e=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)i.d&&(i=i.plus(t.times(t)));else{if(t.s)return _e=!0,new this(1/0);i=t}return _e=!0,i.sqrt()}function zl(e){return e instanceof Fo||e&&e.toStringTag===Af||!1}function Qb(e){return new this(e).ln()}function Yb(e,t){return new this(e).log(t)}function e1(e){return new this(e).log(2)}function t1(e){return new this(e).log(10)}function i1(){return Mf(this,arguments,"lt")}function n1(){return Mf(this,arguments,"gt")}function r1(e,t){return new this(e).mod(t)}function o1(e,t){return new this(e).mul(t)}function s1(e,t){return new this(e).pow(t)}function a1(e){var t,i,n,r,o=0,s=new this(1),a=[];if(e===void 0?e=this.precision:_i(e,1,jn),n=Math.ceil(e/ue),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));o<n;)r=t[o],r>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);o<n;)r=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(r%1e7),o+=4);o=n/4}else throw Error(Cf);else for(;o<n;)a[o++]=Math.random()*1e7|0;for(n=a[--o],e%=ue,n&&e&&(r=Gt(10,ue-e),a[o]=(n/r|0)*r);a[o]===0;o--)a.pop();if(o<0)i=0,a=[0];else{for(i=-1;a[0]===0;i-=ue)a.shift();for(n=1,r=a[0];r>=10;r/=10)n++;n<ue&&(i-=ue-n)}return s.e=i,s.d=a,s}function c1(e){return ae(e=new this(e),e.e+1,this.rounding)}function l1(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function d1(e){return new this(e).sin()}function u1(e){return new this(e).sinh()}function f1(e){return new this(e).sqrt()}function h1(e,t){return new this(e).sub(t)}function p1(){var e=0,t=arguments,i=new this(t[e]);for(_e=!1;i.s&&++e<t.length;)i=i.plus(t[e]);return _e=!0,ae(i,this.precision,this.rounding)}function _1(e){return new this(e).tan()}function m1(e){return new this(e).tanh()}function g1(e){return ae(e=new this(e),e.e+1,1)}q[Symbol.for("nodejs.util.inspect.custom")]=q.toString;q[Symbol.toStringTag]="Decimal";var Fo=q.constructor=Pf(cc);Ns=new Fo(Ns);Ds=new Fo(Ds);var ps=Fo,un=Yr(eo()),Sa=Yr(eo()),b1=class{constructor(e){if(e!==0)throw new Error("Aftermath only supported on mainnet");this.slippage="900000000000000000",this.poolRegistry="0xfcc774493db2c45c79f688f88d28023a3e7d98e4ee9f48bbf5c7990f651577ae",this.protocolFeeVault="0xf194d9b1bcad972e45a7dd67dd49b3ee1e3357a00a50850c52cd51bb450e13b4",this.treasury="0x28e499dff5e864a2eafe476269a4f5035f1c16f338da7be18b103499abf271ce",this.insuranceFund="0xf0c40d67b078000e18032334c3325c47b9ec9f3d9ae4128be820d54663d14e3b",this.referrealVault="0x35d35b0e5b177593d8c3a801462485572fc30861e6ce96a55af6dc4730709278"}amountLimit(e){return Number(new Sa.default(e).mul(new Sa.default(this.slippage)).div(new Sa.default("1000000000000000000")).toString())}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["swap_a2b",o,s]:["swap_b2a",s,o];if(i.extendedDetails==null)throw new Error("Extended details not supported");if(i.extendedDetails.aftermathLpSupplyType==null)throw new Error("LP supply type not supported");const u=[t.object(i.id),t.object(this.poolRegistry),t.object(this.protocolFeeVault),t.object(this.treasury),t.object(this.insuranceFund),t.object(this.referrealVault),t.pure.u64(this.amountLimit(i.amountOut)),t.pure.u64(this.slippage),n];return t.moveCall({target:`${e.publishedAt()}::aftermath::${a}`,typeArguments:[c,l,i.extendedDetails.aftermathLpSupplyType],arguments:u})})}},Wl="0x000000000000000000000000000000000000000000000000000000000000dee9",w1=class{constructor(e){if(e!==0)throw new Error("Aftermath only supported on mainnet")}getAccountCap(e,t){return He(this,null,function*(){let i=50,n=null;for(;;){const r=e.getOwnedObjects({owner:t,cursor:n,limit:i,filter:{MoveModule:{package:Wl,module:"custodian_v2"}}});if(r!=null&&r.data!=null){if(r.data.length!==0)return r.data[0].data.objectId;if(r.data.length<50)break}else break}return null})}getOrCreateAccountCap(e,t,i){return He(this,null,function*(){let n=yield this.getAccountCap(t,i);return n!==null?{accountCap:e.object(n),isCreate:!1}:{accountCap:e.moveCall({target:`${Wl}::clob_v2::create_account`,typeArguments:[],arguments:[]}),isCreate:!0}})}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=yield this.getOrCreateAccountCap(t,e.client,e.signer),m=[t.object(i.id),n,u.accountCap,t.object(Wr)],g=t.moveCall({target:`${e.publishedAt()}::deepbook::${a}`,typeArguments:[c,l],arguments:m});return u.isCreate&&t.transferObjects([u.accountCap],e.signer),g})}},y1=class{constructor(e){if(e!==0)throw new Error("Kriya amm only supported on mainnet")}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(i.id),n];return t.moveCall({target:`${e.publishedAt()}::kriya_amm::${a}`,typeArguments:[c,l],arguments:u})})}},v1=class{constructor(e){if(e!==0)throw new Error("Flowx only supported on mainnet");this.container="0xb65dcbf63fd3ad5d0ebfbf334780dc9f785eff38a4459e37ab08fa79576ee511"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(this.container),n];return t.moveCall({target:`${e.publishedAt()}::flowx_amm::${a}`,typeArguments:[c,l],arguments:u})})}},k1=class{constructor(e){if(e!==0)throw new Error("Turbos only supported on mainnet");this.versioned="0xf1cf0e81048df168ebeb1b8030fad24b3e0b53ae827c25053fff0779c1445b6f"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["swap_a2b",o,s]:["swap_b2a",s,o];if(i.extendedDetails==null)throw new Error("Extended details not supported");if(i.extendedDetails.turbosFeeType==null)throw new Error("Turbos fee type not supported");const u=[t.object(i.id),n,t.object(Wr),t.object(this.versioned)];return t.moveCall({target:`${e.publishedAt()}::turbos::${a}`,typeArguments:[c,l,i.extendedDetails.turbosFeeType],arguments:u})})}},Gl=class{constructor(e,t){this.globalConfig=e===0?"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f":"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",this.partner=t??e===0?"0x639b5e433da31739e800cd085f356e64cae222966d0f1b11bd9dc76b322ff58b":"0x8e0b7668a79592f70fbfb1ae0aebaf9e2019a7049783b9a4b6fe7c6ae038b528"}flash_swap(e,t,i,n){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["flash_swap_a2b",o,s]:["flash_swap_b2a",s,o];let u=n?i.amountIn:i.amountOut;const m=[t.object(this.globalConfig),t.object(i.id),t.object(this.partner),t.pure.u64(u),t.pure.bool(n),t.object(Wr)],g=t.moveCall({target:`${e.publishedAt()}::cetus::${a}`,typeArguments:[c,l],arguments:m});return{targetCoin:g[0],flashReceipt:g[1],payAmount:g[2]}}repay_flash_swap(e,t,i,n,r){const{direction:o,from:s,target:a}=i,[c,l,u]=o?["repay_flash_swap_a2b",s,a]:["repay_flash_swap_b2a",a,s],m=[t.object(this.globalConfig),t.object(i.id),t.object(this.partner),n,r];return t.moveCall({target:`${e.publishedAt()}::cetus::${c}`,typeArguments:[l,u],arguments:m})[0]}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(this.globalConfig),t.object(i.id),t.object(this.partner),n,t.object(Wr)];return t.moveCall({target:`${e.publishedAt()}::cetus::${a}`,typeArguments:[c,l],arguments:u})})}};function Hl(e,...t){const i=Array.isArray(t[t.length-1])?t.pop():[];let r=[e,...t].filter(Boolean).join("::");return i&&i.length&&(r+=`<${i.join(", ")}>`),r}function qr(e){var t;try{let i=e.replace(/\s/g,"");const n=i.match(/(<.+>)$/),r=(t=n==null?void 0:n[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r){i=i.slice(0,i.indexOf("<"));const c=qr(i),l=vb(yb({},c),{type_arguments:r.map(u=>qr(u).source_address)});return l.type_arguments=l.type_arguments.map(u=>nr.isSuiCoin(u)?u:qr(u).source_address),l.source_address=Hl(l.full_address,l.type_arguments),l}const o=i.split("::"),a={full_address:i,address:i===jf||i===x1?"0x2":sc.normalizeSuiObjectId(o[0]),module:o[1],name:o[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=Hl(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function Xl(e){return qr(e).source_address}var C1="0x2::coin::Coin",A1=/^0x2::coin::Coin<(.+)>$/,jf="0x2::sui::SUI",x1="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",nr=class kn{static getCoinTypeArg(t){const i=t.type.match(A1);return i?i[1]:null}static isSUI(t){const i=kn.getCoinTypeArg(t);return i?kn.getCoinSymbol(i)==="SUI":!1}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getBalance(t){return BigInt(t.fields.balance)}static totalBalance(t,i){let n=BigInt(0);return t.forEach(r=>{i===r.coinAddress&&(n+=BigInt(r.balance))}),n}static getID(t){return t.fields.id.id}static getCoinTypeFromArg(t){return`${C1}<${t}>`}static getCoinAssets(t,i){const n=[];return i.forEach(r=>{Xl(r.coinAddress)===Xl(t)&&n.push(r)}),n}static isSuiCoin(t){return qr(t).full_address===jf}static selectCoinObjectIdGreaterThanOrEqual(t,i,n=[]){const r=kn.selectCoinAssetGreaterThanOrEqual(t,i,n),o=r.selectedCoins.map(c=>c.coinObjectId),s=r.remainingCoins,a=r.selectedCoins.map(c=>c.balance.toString());return{objectArray:o,remainCoins:s,amountArray:a}}static selectCoinAssetGreaterThanOrEqual(t,i,n=[]){const r=kn.sortByBalance(t.filter(l=>!n.includes(l.coinObjectId))),o=kn.calculateTotalBalance(r);if(o<i)return{selectedCoins:[],remainingCoins:r};if(o===i)return{selectedCoins:r,remainingCoins:[]};let s=BigInt(0);const a=[],c=[...r];for(;s<o;){const l=i-s,u=c.findIndex(g=>g.balance>=l);if(u!==-1){a.push(c[u]),c.splice(u,1);break}const m=c.pop();m.balance>0&&(a.push(m),s+=m.balance)}return{selectedCoins:kn.sortByBalance(a),remainingCoins:kn.sortByBalance(c)}}static sortByBalance(t){return t.sort((i,n)=>i.balance<n.balance?-1:i.balance>n.balance?1:0)}static sortByBalanceDes(t){return t.sort((i,n)=>i.balance>n.balance?-1:i.balance<n.balance?0:1)}static calculateTotalBalance(t){return t.reduce((i,n)=>i+n.balance,BigInt(0))}};function Jl(e){switch(e){case 1e4:return"Calculate error";case 10001:return"Input number too large can not fit in target type";case 10002:return"No router";case 10003:return"Insufficient Liquidity";default:return"Unknown error"}}function Pn(e){const t=e.indexOf("::");if(t===-1)return e;const i=e.substring(0,t),n=e.substring(t);if(!i.startsWith("0x"))return e;const r=i.substring(2);return r.length>64?e:`0x${r.padStart(64,"0")}${n}`}function S1(e,t){e=Pn(e),t=Pn(t);const i=Math.min(e.length,t.length);for(let n=0;n<i;n++){if(e[n]>t[n])return!0;if(e[n]<t[n])return!1}return!0}function T1(e,t){return e.moveCall({target:"0x2::coin::zero",typeArguments:[t]})}function Zl(e,t,i,n){const r=nr.getCoinAssets(n,t);if(i===BigInt(0)&&r.length===0)return{targetCoin:T1(e,n),isMintZeroCoin:!0,targetCoinAmount:0};if(nr.calculateTotalBalance(r)<i)throw new AggregateError("Insufficient balance when build merge coin","InsufficientBalance");if(nr.isSuiCoin(n))return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(i.toString())]),isMintZeroCoin:!0,targetCoinAmount:Number(i.toString())};let s=nr.sortByBalance(r);s.slice(0,3).reduce((m,g)=>m+g.balance,BigInt(0))<BigInt(i)&&(s=nr.sortByBalanceDes(r));let c=nr.selectCoinObjectIdGreaterThanOrEqual(s,i);const[l,...u]=c.objectArray;return u.length>0&&e.mergeCoins(l,u.map(m=>e.object(m))),{targetCoin:e.object(l),isMintZeroCoin:!1,targetCoinAmount:Number(i.toString())}}function M1(e){return!(!e.startsWith("0x")||e.length!==66)}var wr=Yr(eo()),Jo=Yr(eo()),Lo=Yr(eo()),jr=new Lo.default(0);new Lo.default(1);var O1=new Lo.default(2);O1.pow(new Lo.default(128));var I1=new Lo.default("18446744073709551615"),yr=1e9;function Ql(e,t,i){let n=jr;return t?n=e.mul(new Jo.default(yr-i*yr)).div(new Jo.default(yr)):n=e.mul(new Jo.default(yr+i*yr)).div(new Jo.default(yr)),Number(n.toString())}function P1(e,t,i){return new ps(e).mul(ps.pow(2,-64)).pow(2).mul(ps.pow(10,t-i))}function j1(e,t,i){return He(this,null,function*(){var n,r,o,s,a;const{from:c,target:l,amount:u,byAmountIn:m,pools:g}=t,k=Pn(c),x=Pn(l),T=new hb.Transaction,I=S1(k,x),E="0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee",B=I?k:x,N=I?x:k,F=[B,N];for(let h=0;h<g.length;h++){const b=[T.object(g[h]),T.pure.bool(I),T.pure.bool(m),T.pure.u64(u.toString())];T.moveCall({target:`${E}::fetcher_script::calculate_swap_result`,arguments:b,typeArguments:F})}if(!M1(i))throw new AggregateError("Aggregator package not set","InvalidWallet");const H=yield e.devInspectTransactionBlock({transactionBlock:T,sender:i});if(H.error!=null)throw new AggregateError("Aggregator package not set","SimulateError");const K=(n=H.events)==null?void 0:n.filter(h=>h.type.includes("CalculatedSwapResultEvent"));if(K.length===0||K.length!==g.length)throw new AggregateError("Simulate event result error","simulateEventError");let ee=m?jr:I1,me=0;for(let h=0;h<K.length;h+=1)if(!K[h].parsedJson.data.is_exceed)if(t.byAmountIn){const b=new wr.BN(K[h].parsedJson.data.amount_out);b.gt(ee)&&(me=h,ee=b)}else{const b=new wr.BN(K[h].parsedJson.data.amount_out);b.lt(ee)&&(me=h,ee=b)}const be=K[me].parsedJson.data;console.log("event",JSON.stringify(be,null,2));const ie=be.step_results[0].current_sqrt_price,[z,te]=yield Promise.all([e.getCoinMetadata({coinType:B}).then(h=>h==null?void 0:h.decimals),e.getCoinMetadata({coinType:N}).then(h=>h==null?void 0:h.decimals)]);if(z==null||te==null)throw new AggregateError("Simulate event result error","CannotGetDecimals");const O=P1(ie,z,te),f={amountIn:new wr.BN((r=be.amount_in)!=null?r:0),amountOut:new wr.BN((o=be.amount_out)!=null?o:0),routes:[{path:[{id:g[me],direction:I,provider:"CETUS",from:k,target:x,feeRate:be.fee_rate,amountIn:be.amount_in,amountOut:be.amount_out,extendedDetails:{afterSqrtPrice:be.after_sqrt_price}}],amountIn:new wr.BN((s=be.amount_in)!=null?s:0),amountOut:new wr.BN((a=be.amount_out)!=null?a:0),initialPrice:O}],insufficientLiquidity:!1};return{isExceed:be.is_exceed,routeData:f}})}var E1=class{constructor(e){if(e!==0)throw new Error("Kriya clmm only supported on mainnet");this.version="0xf5145a7ac345ca8736cf8c76047d00d6d378f30e81be6f6eb557184d9de93c78"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(i.id),n,t.object(this.version),t.object(Wr)];return t.moveCall({target:`${e.publishedAt()}::kriya_clmm::${a}`,typeArguments:[c,l],arguments:u})})}},B1=class{constructor(e){if(e!==0)throw new Error("Haedal only supported on mainnet")}swap(e,t,i,n){return He(this,null,function*(){const{direction:r}=i;if(!r)throw new Error("Haedal not support b2a swap");const o="swap_a2b",s=[t.object(i.id),t.object("0x5"),n];return t.moveCall({target:`${e.publishedAt()}::haedal::${o}`,typeArguments:[],arguments:s})})}},N1=class{constructor(e){if(e!==0)throw new Error("Afsui only supported on mainnet");this.stakedSuiVault="0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",this.safe="0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",this.referVault="0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",this.validator="0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r}=i;if(!r)throw new Error("Afsui not support b2a swap");const o="swap_a2b",s=[t.object(this.stakedSuiVault),t.object(this.safe),t.object("0x5"),t.object(this.referVault),t.object(this.validator),n];return t.moveCall({target:`${e.publishedAt()}::afsui::${o}`,typeArguments:[],arguments:s})})}},D1=class{constructor(e){if(e!==0)throw new Error("Volo only supported on mainnet");this.nativePool="0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",this.metadata="0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r}=i;if(!r)throw new Error("Volo not support b2a swap");const o="swap_a2b",s=[t.object(this.nativePool),t.object(this.metadata),t.object("0x5"),n];return t.moveCall({target:`${e.publishedAt()}::volo::${o}`,typeArguments:[],arguments:s})})}},R1=class{constructor(e){if(e!==0)throw new Error("Flowx clmm only supported on mainnet");this.versioned="0x67624a1533b5aff5d0dfcf5e598684350efd38134d2d245f475524c03a64e656",this.poolRegistry="0x27565d24a4cd51127ac90e4074a841bbe356cca7bf5759ddc14a975be1632abc"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,l]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(this.poolRegistry),t.pure.u64(i.feeRate*1e6),n,t.object(this.versioned),t.object(Wr)];return t.moveCall({target:`${e.publishedAt()}::flowx_clmm::${a}`,typeArguments:[c,l],arguments:u})})}},Ef="CETUS",$1="DEEPBOOK",q1="KRIYA",F1="FLOWX",L1="FLOWXV3",U1="KRIYAV3",Bf="TURBOS",fc="AFTERMATH",K1="HAEDAL",V1="VOLO",z1="AFSUI",W1=class{constructor(e,t,i,n){this.endpoint=e,this.client=i,this.signer=t,this.env=n,this.allCoins=[]}getAllCoins(){return He(this,null,function*(){let e=null,t=50;const i=[];for(;;){const n=yield this.client.getAllCoins({owner:this.signer,cursor:e,limit:t});for(const r of n.data)i.push({coinAddress:qr(r.coinType).source_address,coinObjectId:r.coinObjectId,balance:BigInt(r.balance)});if(n.data.length<t)break;e=n.data[t-1].coinObjectId}return i})}findRouters(e){return He(this,null,function*(){return H1(this.endpoint,e)})}expectInputSwap(e,t,i,n,r){return He(this,null,function*(){if(i.length===0)throw new Error("No router found");const o=i.map(m=>m.amountIn.toString()),s=i[0].path[0].from,a=i[0].path[i[0].path.length-1].target,c=e.splitCoins(t,o),l=[];for(let m=0;m<i.length;m++){if(i[m].path.length===0)throw new Error("Empty path");let g=c[m];for(const k of i[m].path)g=yield this.newDex(k.provider,r).swap(this,e,k,g);l.push(g)}return this.transferOrDestoryCoin(e,t,s),this.checkCoinThresholdAndMergeCoin(e,l,a,n)})}expectOutputSwap(e,t,i,n){return He(this,null,function*(){const r=[],o=[],s=[],a=new Gl(this.env,n);for(let l=0;l<i.length;l++){const u=i[l];for(let g=u.path.length-1;g>=0;g--){const k=u.path[g],x=a.flash_swap(this,e,k,!1);r.unshift(x.targetCoin),o.unshift(x.flashReceipt)}let m=t;for(let g=0;g<u.path.length;g++){const k=u.path[g],x=a.repay_flash_swap(this,e,k,m,o[g]);m=r[g],g===0?t=x:this.transferOrDestoryCoin(e,x,k.from),g===u.path.length-1&&s.push(m)}}const c=i[0].path[0].from;if(this.transferOrDestoryCoin(e,t,c),s.length>1){const l=e.makeMoveVec({elements:s.slice(1)});e.moveCall({target:`${sc.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[i[0].path[i[0].path.length-1].target],arguments:[s[0],l]})}return s[0]})}swapInPools(e){return He(this,null,function*(){let t;try{t=yield j1(this.client,e,this.signer)}catch(i){return console.error("swapInPools error:",i),null}return t})}routerSwap(e){return He(this,null,function*(){const{routers:t,inputCoin:i,slippage:n,byAmountIn:r,txb:o,partner:s}=e,a=t.reduce((g,k)=>g.add(k.amountIn),new un.default(0)),c=t.reduce((g,k)=>g.add(k.amountOut),new un.default(0)),l=Ql(r?c:a,r,n);if(r)return yield this.expectInputSwap(o,i,t,new un.default(l),s);const u=o.splitCoins(i,[l.toString()]);return this.transferOrDestoryCoin(o,i,t[0].path[0].from),yield this.expectOutputSwap(o,u[0],t,s)})}fastRouterSwap(e){return He(this,null,function*(){const{routers:t,byAmountIn:i,slippage:n,txb:r,partner:o,isMergeTragetCoin:s,refreshAllCoins:a}=e;(a||this.allCoins.length===0)&&(this.allCoins=yield this.getAllCoins());const c=t[0].path[0].from,l=t[0].path[t[0].path.length-1].target,u=t.reduce((I,E)=>I.add(E.amountIn),new un.default(0)),m=t.reduce((I,E)=>I.add(E.amountOut),new un.default(0)),g=Ql(i?m:u,i,n),k=i?u:g,x=Zl(r,this.allCoins,BigInt(k.toString()),c),T=yield this.routerSwap({routers:t,inputCoin:x.targetCoin,slippage:n,byAmountIn:i,txb:r,partner:o});if(s){const I=Zl(r,this.allCoins,BigInt(0),l);r.mergeCoins(I.targetCoin,[T]),I.isMintZeroCoin&&this.transferOrDestoryCoin(r,I.targetCoin,l)}else this.transferOrDestoryCoin(r,T,l)})}publishedAt(){return this.env===0?"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302":"0x6cbaa3e9fbe902d90191b12f315932bc58079cba422bafbd4b4369f80e61f595"}transferOrDestoryCoin(e,t,i){e.moveCall({target:`${this.publishedAt()}::utils::transfer_or_destroy_coin`,typeArguments:[i],arguments:[t]})}checkCoinThresholdAndMergeCoin(e,t,i,n){let r=t[0];if(t.length>1){let o=e.makeMoveVec({elements:t.slice(1)});e.moveCall({target:`${sc.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[i],arguments:[t[0],o]}),r=t[0]}return e.moveCall({target:`${this.publishedAt()}::utils::check_coin_threshold`,typeArguments:[i],arguments:[r,e.pure.u64(n.toString())]}),r}newDex(e,t){switch(e){case Ef:return new Gl(this.env,t);case $1:return new w1(this.env);case q1:return new y1(this.env);case U1:return new E1(this.env);case F1:return new v1(this.env);case L1:return new R1(this.env);case Bf:return new k1(this.env);case fc:return new b1(this.env);case K1:return new B1(this.env);case z1:return new N1(this.env);case V1:return new D1(this.env);default:throw new Error(`Unsupported dex ${e}`)}}signAndExecuteTransaction(e,t){return He(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:t,options:{showEffects:!0,showEvents:!0,showInput:!0,showBalanceChanges:!0}})})}devInspectTransactionBlock(e){return He(this,null,function*(){return yield this.client.devInspectTransactionBlock({transactionBlock:e,sender:this.signer})})}sendTransaction(e,t){return He(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:t})})}};function G1(e){return{amountIn:new un.default(e.amount_in.toString()),amountOut:new un.default(e.amount_out.toString()),insufficientLiquidity:!1,routes:e.routes.map(t=>({path:t.path.map(i=>{var n,r,o;let s;i.provider===fc&&(s=i.extended_details.aftermath_pool_flatness===0?"v2":"v3");let a;return(i.provider===Bf||i.provider===fc||i.provider===Ef)&&(a={aftermathLpSupplyType:(n=i.extended_details)==null?void 0:n.aftermath_lp_supply_type,turbosFeeType:(r=i.extended_details)==null?void 0:r.turbos_fee_type,afterSqrtPrice:(o=i.extended_details)==null?void 0:o.after_sqrt_price}),{id:i.id,direction:i.direction,provider:i.provider,from:i.from,target:i.target,feeRate:i.fee_rate,amountIn:i.amount_in,amountOut:i.amount_out,extendedDetails:a,version:s}}),amountIn:new un.default(t.amount_in.toString()),amountOut:new un.default(t.amount_out.toString()),initialPrice:new ps(t.initial_price.toString())}))}}var Wr="0x0000000000000000000000000000000000000000000000000000000000000006";Yr(eo());function H1(e,t){return He(this,null,function*(){let i;if(t.liquidityChanges&&t.liquidityChanges.length>0?i=yield J1(e,t):i=yield X1(e,t),!i)return null;if(!i.ok)return{amountIn:jr,amountOut:jr,routes:[],insufficientLiquidity:!1,error:{code:10001,msg:Jl(10001)}};const n=yield i.json();if(n.data!=null)return G1(n.data);const r=n.msg==="liquidity is not enough";return{amountIn:jr,amountOut:jr,routes:[],insufficientLiquidity:r,error:{code:10003,msg:Jl(10003)}}})}function X1(e,t){return He(this,null,function*(){try{const{from:i,target:n,amount:r,byAmountIn:o,depth:s,splitAlgorithm:a,splitFactor:c,splitCount:l,providers:u}=t,m=Pn(i),g=Pn(n);let k=`${e}?from=${m}&target=${g}&amount=${r.toString()}&by_amount_in=${o}`;return s&&(k+=`&depth=${s}`),a&&(k+=`&split_algorithm=${a}`),c&&(k+=`&split_factor=${c}`),l&&(k+=`&split_count=${l}`),u&&u.length>0&&(k+=`&providers=${u.join(",")}`),yield fetch(k)}catch(i){return console.error(i),null}})}function J1(e,t){return He(this,null,function*(){const{from:i,target:n,amount:r,byAmountIn:o,depth:s,splitAlgorithm:a,splitFactor:c,splitCount:l,providers:u,liquidityChanges:m}=t,g=Pn(i),k=Pn(n),x=`${e}`,T=u==null?void 0:u.join(","),I={from:g,target:k,amount:Number(r.toString()),by_amount_in:o,depth:s,split_algorithm:a,split_factor:c,split_count:l,providers:T,liquidity_changes:m.map(E=>({pool:E.poolID,tick_lower:E.ticklower,tick_upper:E.tickUpper,delta_liquidity:E.deltaLiquidity}))};console.log("requestData",JSON.stringify(I,null,2));try{return yield fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})}catch(E){return console.error("Error:",E),null}})}var Nf=(e=>(e[e.Mainnet=0]="Mainnet",e[e.Testnet=1]="Testnet",e))(Nf||{}),Ta=W1,ey=Nf,Ma="router",Er=1e4,gn=class{static buildPoolImmutables(e){let{fields:t}=e.value.fields.value;return{clmm_pool_id:R(t.clmm_pool_id).address,booster_type:R(t.booster_type.fields.name).source_address,pool_id:R(t.pool_id).address,coinTypeA:R(t.coin_type_a.fields.name).source_address,coinTypeB:R(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){let t=le(e),i=[];return t.config.fields.contents.forEach(n=>{i.push({lock_day:Number(n.fields.key),multiplier:Number(M(n.fields.value).div(Er))})}),{basic_percent:Number(M(t.basic_percent).div(Er)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:i,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:Li(e)}}static buildLockNFT(e){let t=R(Li(e)).address;return{lock_clmm_position:$r(e),locked_nft_id:t}}static buildLockPositionInfo(e){let t=le(e),{value:i}=t.value.fields;return{type:i.type,position_id:i.fields.position_id,start_time:Number(i.fields.start_time),lock_period:Number(i.fields.lock_period),end_time:Number(i.fields.end_time),growth_rewarder:i.fields.growth_rewarder,rewarder_owned:i.fields.rewarder_owned,is_settled:i.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},Z1=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;let{booster:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i,e),r=[];if(n!==void 0)r.push(...n);else{let s=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(j(t).booster_pool_handle)).data)==null||o.forEach(c=>{s.push(c.objectId)});let a=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showContent:!0});for(let c of a){let l=le(c);if(l){let u=gn.buildPoolImmutables(l);this.updateCache(`${u.pool_id}_getPoolImmutable`,u,Q),r.push(u)}}}return this.updateCache(i,r,Q),r}async getPoolImmutable(e){let{booster:t}=this._sdk.sdkOptions,i=`${e}_getPoolImmutable`,n=this.getCache(i);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:j(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=le(r),s=gn.buildPoolImmutables(o);return this.updateCache(i,s,Q),s}async getPools(){let e=[],t=(await this.getPoolImmutables()).map(n=>n.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(t,{showType:!0,showContent:!0});for(let n of i){let r=gn.buildPoolState(n);if(r){let o={...await this.getPoolImmutable(r.pool_id),...r};e.push(o);let s=`${o.pool_id}_getPoolObject`;this.updateCache(s,o,Q)}}return e}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t),r=await this.getPoolImmutable(e);if(n!==void 0)return{...r,...n};let o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=gn.buildPoolState(o),a={...r,...s};return this.updateCache(i,a,Q),a}async getPoolHandleId(e){let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=le(t);return i?i.list.fields.id.id:""}async getBoosterInitConfigs(){var n;let{package_id:e}=this.sdk.sdkOptions.booster,t=(n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:n.data,i={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(r=>{let o=r.parsedJson;o&&(i.booster_config_id=o.config_id)}),i.booster_pool_handle=await this.getPoolHandleId(i.booster_config_id),i}async getOwnerBoosterPositions(e,t,i){let{booster:n}=this.sdk.sdkOptions,r=[],o=[],s=`${n.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:s}});for(let l of a.data)if(R(zi(l)).source_address===s&&l.data){let u=gn.buildLockNFT(l);this.updateCache(`${u.locked_nft_id}_getBoosterPositionById`,u,Q),u&&(t===void 0||t===u.lock_clmm_position.pool)&&r.push(u)}let c=await this.getLockPositionInfos(i,r.map(l=>l.locked_nft_id));for(let l of r)for(let u of c)if(l.lock_clmm_position.pos_object_id===u.position_id){o.push({...l,...u});break}return o}async getBoosterPosition(e,t){let i=`${t}_getBoosterPositionById`,n=this.getCache(i),r;if(n!==void 0)r=n;else{let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});r=gn.buildLockNFT(s),this.updateCache(i,r,Q)}let o=await this.getLockPositionInfo(e,t);return{...r,...o}}async getLockPositionInfos(e,t=[]){var o;let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),n=[],r=[];return(o=i.data)==null||o.forEach(s=>{t.length>0?t.includes(s.name.value)&&n.push(s.objectId):n.push(s.objectId)}),n.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showContent:!0})).forEach(s=>{let a=gn.buildLockPositionInfo(s);a&&r.push(a)}),r}async getLockPositionInfo(e,t){let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return gn.buildLockPositionInfo(i)}calculateXCetusRewarder(e,t,i){let n=t.basic_percent,r="0";e.forEach(s=>{s.coin_address===t.booster_type&&(r=s.amount_owed.toString())}),i.is_settled||t.config.forEach(s=>{s.lock_day===i.lock_period&&(n=s.multiplier)});let o=M(r).sub(i.growth_rewarder).mul(n);return M(i.rewarder_owned).add(o).toString()}lockPositionPayload(e){let{booster:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,n=new $;return n.moveCall({target:`${t.published_at}::${Ma}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[n.object(j(t).booster_config_id),n.object(j(i).global_config_id),n.object(e.booster_pool_id),n.object(e.clmm_pool_id),n.object(e.clmm_position_id),n.pure.u16(e.lock_day),n.object(L)]}),n}canceLockPositionPayload(e){let{booster:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${Ma}::cancel_lock`,typeArguments:[e.booster_type],arguments:[i.object(j(t).booster_config_id),i.object(e.booster_pool_id),i.object(e.lock_nft_id),i.object(L)]}),i}redeemPayload(e){let{booster:t,xcetus:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,r=new $,o=j(i);return r.moveCall({target:`${t.published_at}::${Ma}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[r.object(j(t).booster_config_id),r.object(j(n).global_config_id),r.object(e.booster_pool_id),r.object(e.lock_nft_id),r.object(e.clmm_pool_id),r.object(o.lock_manager_id),r.object(o.xcetus_manager_id),r.object(e.ve_nft_id),r.object(L)]}),r}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},fi="router",Df=1e9,Q1=(e=>(e.Upcoming="Upcoming",e.Live="Live",e.Settle="Settle",e.Ended="Ended",e.Failed="Failed",e.Canceled="Canceled",e))(Q1||{}),Ji=class{static priceRealToFix(e,t,i){let n=M(t-i).toNumber();return Number(M(e).div(M(10).pow(M(n))).toString())}static priceFixToReal(e,t,i){let n=M(t-i).toNumber();return Number(M(e).mul(M(10).pow(M(n))).toString())}static raiseTotalAmount(e,t,i){let n=M(t-i).abs().toNumber();return t>i?Number(M(e.total_supply).mul(e.current_price).div(M(10).pow(M(n))).toString()):Number(M(e.total_supply).mul(e.current_price).mul(M(10).pow(M(n))).toString())}static buildLaunchPadPool(e){let t=zi(e),i=R(t),n=le(e),r={coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],pool_address:ze(Li(e)),is_settle:n.is_settle,current_price:M(n.initialize_price).div(M(Df)).toString(),price:n.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:n.sale_coin,raise_coin_amount:n.raise_coin,total_purchase_amount:n.reality_raise_total,total_supply:n.sale_total,min_purchase:n.min_purchase,max_purchase:n.max_purchase,complete_raise_limit:n.least_raise_amount,softcap:n.softcap,max_raise_amount:n.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(n.liquidity_rate)/1e4,is_cancel:n.is_cancel,duration_summary:{start_time:Number(n.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(n.duration_manager.fields.activity_duration),settle_duration:Number(n.duration_manager.fields.settle_duration),lock_up_duration:Number(n.duration_manager.fields.locked_duration)},white_summary:{white_handle:n.white_list.fields.users.fields.id.id,protection_hard_cap:n.white_list.fields.hard_cap_total,protection_limit_used:n.white_list.fields.purchase_total,size:Number(n.white_list.fields.users.fields.size)},unused_sale:n.unused_sale,harvest_raise:n.harvest_raise,tick_spacing:Number(n.tick_spacing),owner:n.recipient,purchase_summary:{purchase_handle:n.purchase_list.fields.id.id,size:Number(n.purchase_list.fields.size)},pool_status:"Failed"};return Ji.updatePoolStatus(r),r}static updatePoolStatus(e){let t=Number(M(Date.now()/1e3).toFixed(0)),{duration_summary:i}=e,n=i.start_time+i.purchase_duration,r=n+i.settle_duration;if(i.end_time=n,i.settle_end_time=r,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<i.start_time)e.pool_status="Upcoming";else if(t>i.start_time&&t<n)e.pool_status="Live";else if(t>n&&t<r){let o=e.raise_coin_amount;Number(o)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,t){let i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),n=i[t.coin_type_sale].decimals,r=i[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(M(t.softcap).div(M(t.total_supply))),n,r).toString(),t.max_price=this.priceFixToReal(Number(M(t.max_raise_amount).div(M(t.total_supply))),n,r).toString(),t.current_price=this.priceFixToReal(Number(t.current_price),n,r).toString(),t.sale_decimals=n,t.raise_decimals=r}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(M(t.harvest_raise).equals(M(0))){let n=await e.Launchpad.getSettleEvent(t.pool_address);n&&(t.harvest_raise=n.unused_raise)}let i=A.min(new A(t.total_purchase_amount),new A(t.max_raise_amount));return M(i.toString()).mul(1-t.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){let i=await e.Launchpad.getSettleEvent(t.pool_address);return i&&(t.unused_sale=i.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){let i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(i.length>0){let n=i[0].purchased_raise_amount,r=(await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:o}=t.white_summary;return M(n).sub(r).div(M(t.total_purchase_amount).sub(o)).mul(M(t.total_purchase_amount).sub(t.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,t){let i=await Ji.getOverrecruitReverseAmount(e,t),n=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(n){let r=n[0].purchased_raise_amount;M(r).sub(i).div(t.current_price)}return"0"}},Y1=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,i=100,n=!1){var u;let{package_id:r}=this._sdk.sdkOptions.launchpad;if(r===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");let o=`${r}_getPoolImmutables`,s=this.getCache(o,n),a=[],c=[];if(s!==void 0&&a.push(...s),a.length===0)try{((u=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`}))==null?void 0:u.data).forEach(m=>{let g=m.parsedJson;g&&a.push({pool_address:g.pool_id,coin_type_sale:R(g.sale_coin.name).full_address,coin_type_raise:R(g.raise_coin.name).full_address})}),this.updateCache(o,a,Q)}catch(m){console.log("getPoolImmutables",m)}let l=e.length>0;for(let m=0;m<a.length;m+=1){let g=a[m];if(!(l&&!e.includes(g.pool_address))){if(!l){let k=m;if(k<t||k>=t+i)continue}c.push(g)}}return c}async getPoolImmutablesWithPage(e="all",t=!1){let{package_id:i}=this._sdk.sdkOptions.launchpad,n=`${i}_getPoolImmutables`,r=[],o={data:[],hasNextPage:!1},s=e==="all";if(s){let a=this.getCache(n,t);a&&r.push(...a)}if(r.length===0)try{let a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::factory::CreatePoolEvent`},e);o.hasNextPage=a.hasNextPage,o.nextCursor=a.nextCursor,a.data.forEach(c=>{let l=c.parsedJson;l&&r.push({pool_address:l.pool_id,coin_type_sale:R(l.sale_coin.name).full_address,coin_type_raise:R(l.raise_coin.name).full_address})})}catch(a){console.log("getPoolImmutables",a)}return o.data=r,s&&this.updateCache(n,r,Q),o}async getPools(e=[],t=0,i=100){let n=[],r=[];e.length>0?r=[...e]:(await this.getPoolImmutables([],t,i,!1)).forEach(s=>{r.push(s.pool_address)});let o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0});for(let s of o){let a=Ji.buildLaunchPadPool(s);await Ji.calculatePoolPrice(this._sdk,a),n.push(a);let c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,Q)}return n}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0){let s=n;return Ji.updatePoolStatus(s),s}let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=Ji.buildLaunchPadPool(r);return await Ji.calculatePoolPrice(this._sdk,o),this.updateCache(i,o),o}async getInitConfig(e=!1){var c;let t=this._sdk.sdkOptions.launchpad.package_id,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=qo(r),s=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return s.length>0&&(s.forEach(l=>{let u=l.parsedJson;if(u)switch(R(l.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.config_cap_id=u.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(i,a,Q)),a}async getLockNFT(e,t=!1){let i=`${e}_getLockNFT`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!r.error)return $r(r)}async getLockNFTList(e){var r;let{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:i}=this._sdk,n=[];try{let o=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:r.data;for(let s of o){let a=s.parsedJson;if(a){let c={locked_time:Number(a.locked_time),end_lock_time:Number(a.end_lock_time),nft_type:a.nft_type_name.name,lock_nft_id:a.lock_nft_id,recipient:a.recipient};if(e===c.recipient&&`${t}`===R(c.nft_type).address){let l=await this.getLockNFT(c.lock_nft_id);if(l){let u=R(l.coin_type_a).full_address,m=R(l.coin_type_b).full_address;n.push({...l,coin_type_a:u,coin_type_b:m,...c})}}}}return n}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPoolTransactionPayload(e){let{launchpad:t}=this.sdk.sdkOptions,i=j(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let n=Ji.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),r=new $,o=M(e.total_supply).add(M(e.total_supply).mul(M(e.liquidity_rate))).toNumber(),s=await re.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,r,BigInt(o),e.coin_type_sale),a=[r.object(i.admin_cap_id),r.object(i.config_cap_id),r.object(i.pools_id),r.object(pe(e.recipient)),r.pure.u128((n*Df).toString()),s,r.pure.u64(e.total_supply.toString()),r.pure.u64(e.min_purchase.toString()),r.pure.u64(e.max_purchase.toString()),r.pure.u64(e.least_raise_amount.toString()),r.pure.u64(e.hardcap.toString()),r.pure.u64((e.liquidity_rate*1e3).toString()),r.pure.u64(e.start_time.toString()),r.pure.u64(e.activity_duration.toString()),r.pure.u64(e.settle_duration.toString()),r.pure.u64(e.locked_duration.toString()),r.pure.u32(e.tick_spacing),r.object(L)],c=[e.coin_type_sale,e.coin_type_raise];return r.moveCall({target:`${t.published_at}::${fi}::create_launch_pool`,typeArguments:c,arguments:a}),r}async creatPurchasePayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=new $,n=await re.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.purchase_amount),e.coin_type_raise),r=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],o=[e.coin_type_sale,e.coin_type_raise],s;return r?s=[i.object(e.pool_address),i.object(j(t).config_cap_id),i.object(r.id),n,i.pure.u64(e.purchase_amount.toString()),i.object(L)]:s=[i.object(e.pool_address),i.object(j(t).config_cap_id),n,i.pure.u64(e.purchase_amount.toString()),i.object(L)],i.moveCall({target:`${t.published_at}::${fi}::${r===void 0?"create_and_purchase":"purchase"}`,typeArguments:o,arguments:s}),i}async creatClaimPayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],n=new $,r=[e.coin_type_sale,e.coin_type_raise],o=[n.object(e.pool_address),n.object(j(t).config_cap_id),n.object(i==null?void 0:i.id),n.object(L)];return n.moveCall({target:`${t.published_at}::${fi}::claim`,typeArguments:r,arguments:o}),n}async creatSettlePayload(e){let{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();let n=j(i),{clmm_args:r}=e,o=new $;o.setSender(this.sdk.ClmmSDK.senderAddress);let s=[e.coin_type_sale,e.coin_type_raise];if(r){let a=r.opposite?Y.priceToSqrtPriceX64(M(1).div(r.current_price),r.raise_decimals,r.sale_decimals).toString():Y.priceToSqrtPriceX64(M(r.current_price),r.sale_decimals,r.raise_decimals).toString(),c=BigInt(a)<BigInt(r.clmm_sqrt_price),l=r.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,u=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,l),m=Ue.calculateTotalBalance(u);Ue.isSuiCoin(l)&&(m-=BigInt(2e8));let g=re.buildCoinForAmount(o,u,m,l).targetCoin,k=r.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",x=[o.object(e.pool_address),o.object(j(t).config_cap_id),o.object(r.clmm_pool_address),o.object(n.global_config_id),o.pure.u128(a),g,o.object(L)];o.moveCall({target:`${t.published_at}::${fi}::${k}`,typeArguments:s,arguments:x})}else o.moveCall({target:`${t.published_at}::${fi}::settle`,typeArguments:s,arguments:[o.object(e.pool_address),o.object(j(t).config_cap_id),o.object(L)]});return o}creatWithdrawPayload(e){let{launchpad:t}=this.sdk.sdkOptions,i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(e.pool_address),i.object(j(t).config_cap_id),i.object(L)];return e.sale_amount>BigInt(0)&&i.moveCall({target:`${t.published_at}::${fi}::withdraw_sale`,typeArguments:n,arguments:r}),e.raise_amount>BigInt(0)&&i.moveCall({target:`${t.published_at}::${fi}::withdraw_raise`,typeArguments:n,arguments:r}),i}addUserToWhitelisPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(r=>{let o=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.object(r),i.pure.u64(e.safe_limit_amount),i.object(L)];i.moveCall({target:`${t.published_at}::${fi}::add_user_to_whitelist`,typeArguments:n,arguments:o})}),i}updateWhitelistCapPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&i.moveCall({target:`${t.published_at}::${fi}::update_whitelist_member_safe_limit_amount`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.pure.address(e.white_list_member),i.pure.u64(e.safe_limit_amount),i.object(L)]}),e.hard_cap_total>0&&i.moveCall({target:`${t.published_at}::${fi}::update_whitelist_hard_cap_total`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.pure.u64(e.hard_cap_total),i.object(L)]}),i}creatRemoveWhitelistPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(r=>{let o=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.object(r),i.object(L)];i.moveCall({target:`${t.published_at}::${fi}::remove_user_from_whitelist`,typeArguments:n,arguments:o})}),i}creatCancelPoolPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.object(L)];return i.moveCall({target:`${t.published_at}::${fi}::cancel`,typeArguments:n,arguments:r}),i}updateRecipientPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.object(e.new_recipient),i.object(L)];return i.moveCall({target:`${t.published_at}::${fi}::update_recipient_address`,typeArguments:n,arguments:r}),i}updatePoolDuractionPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.pure.u64(e.activity_duration),i.pure.u64(e.settle_duration),i.pure.u64(e.lock_duration),i.object(L)];return i.moveCall({target:`${t.published_at}::${fi}::update_pool_duration`,typeArguments:n,arguments:r}),i}creatUnlockNftPayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(j(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");let i=new $,n=[e.nft_type],r=[i.object(e.lock_nft),i.object(L)];return i.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:n,arguments:r}),i}async isAdminCap(e){let{launchpad:t}=this._sdk.sdkOptions;if(j(t)===void 0)throw Error("launchpad config is empty");let i=`${e}_isAdminCap`,n=this.getCache(i);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:j(t).admin_cap_id,options:{showType:!0,showOwner:!0}}),o=Vr(r),s=Es(r),a=!1;return s&&o&&R(o).source_address===`${t.package_id}::config::AdminCap`&&(a=pe(s.AddressOwner)===pe(e)),this.updateCache(i,a,Q),a}async isWhiteListUser(e,t){let i={type:"address",value:t};try{let n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i});return!!(n&&n.data)}catch{return!1}}async getPurchaseAmount(e,t){var n;let i={type:"address",value:t};try{let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),o=le(r);if(o)return(n=o==null?void 0:o.value)==null?void 0:n.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],i=!0){let{launchpad:n}=this._sdk.sdkOptions,r=`${t}_getPurchaseMark`,o=this.getCache(r,i);if(!i&&o!==void 0)return o;let s=null,a=[];for(;;){let c=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:s});for(let l of c.data){let{fields:u}=l.data.content;if(R(zi(l)).source_address===`${n.package_id}::pool::PurchaseMark`){console.log("fields: ",u);let m={id:u.id.id,pool_id:R(u.pool_id).address,purchased_raise_amount:u.purchase_total,obtain_sale_amount:u.obtain_sale_amount,used_raise_amount:u.used_raise_amount};t.length>0?t.includes(m.pool_id)&&a.push(m):a.push(m)}}if(c.hasNextPage)s=c.nextCursor;else break}return this.updateCache(r,a,Q),a}async getSettleEvent(e){let{launchpad:t}=this._sdk.sdkOptions,i=`${e}_getPurchaseMark`,n=this.getCache(i);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(let o of r.data){let s=o.parsedJson;if(e===ze(s.pool_id)){let a={pool_id:s.pool_id,settle_price:s.settle_price,unused_sale:s.unused_sale,unused_raise:s.unused_raise,white_purchase_total:s.white_purchase_total};return this.updateCache(i,a,Q),a}}}buildLaunchpadCoinType(e,t){return Ps(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,t])}assertLuanchpadConfig(){let{launchpad:e}=this.sdk.sdkOptions;if(j(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},bn=class{static buildPoolImmutables(e){let{fields:t}=e.value.fields.value;return{clmm_pool_id:R(t.clmm_pool_id).address,bonus_type:R(t.bonus_type.fields.name).source_address,pool_id:R(t.pool_id).address,coinTypeA:R(t.coin_type_a.fields.name).source_address,coinTypeB:R(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){let t=le(e),i=[];return t.config.fields.contents.forEach(n=>{i.push({rate:Number(M(n.fields.key).div(Er)),multiplier:Number(M(n.fields.value).div(Er))})}),{balance:t.balance,config:i,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(M(t.minimum_percent_to_reward).div(Er)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){let{contents:t}=e.value.fields.value.fields,i=[],n=e.id.id;return t.forEach(r=>{let{key:o,value:s}=r.fields,a={id:o,period_id:n,bonus_num:s.fields.bonus_num,point:s.fields.point,is_burn:s.fields.is_burn,point_after_multiplier:s.fields.point_after_multiplier,percent:Number(M(s.fields.percent).div(Er)),fee_share_rate:0,is_redeemed:s.fields.is_redeemed};i.push(a)}),i}static buildPoolBonusInfo(e){let{fields:t,type:i}=e.value.fields.value;return{type:i,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let i=0;for(let n of e)t>=n.rate&&n.rate>i&&(i=n.multiplier);return i}},Yl="router",ew=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;let{maker_bonus:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i,e),r=[];if(n!==void 0)r.push(...n);else{let s=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(j(t).maker_pool_handle)).data)==null||o.forEach(c=>{s.push(c.objectId)});let a=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showContent:!0});for(let c of a){let l=le(c);l&&r.push(bn.buildPoolImmutables(l))}}return r}async getPoolImmutable(e){let{maker_bonus:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i);if(n!==void 0){let s=n.filter(a=>e===a.pool_id);if(s.length>0)return s[0]}let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:j(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=le(r);return bn.buildPoolImmutables(o)}async getPools(){let e=[],t=await this.getPoolImmutables(),i=t.map(o=>o.pool_id),n=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0}),r=0;for(let o of n){let s=bn.buildPoolState(o);if(s){let a={...t[r],...s};e.push(a);let c=`${a.pool_id}_getPoolObject`;this.updateCache(c,a,Q)}r+=1}return e}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t),r=await this.getPoolImmutable(e);if(n!==void 0)return n;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=bn.buildPoolState(o),a={...r,...s};return this.updateCache(i,a,Q),a}async getPoolHandleId(e){let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=le(t);return i?i.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){let i=[],n=`${e.pool_id}_getMakerPoolPeriods`,r=this.getCache(n,t);return r!==void 0?r:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(o=>{let s={id:o.objectId,start_time:0,end_time:0,period:Number(o.name.value)};s.start_time=Number(M(e.start_time).add(M(e.interval_day).mul(24*3600).mul(s.period)).toFixed(0,J.ROUND_DOWN)),s.end_time=Number(M(s.start_time).add(M(e.interval_day).mul(24*3600)).toFixed(0,J.ROUND_DOWN)),i.push(s)}),this.updateCache(n,i,Q),i)}async getMakerBonusInitConfigs(){var n;let{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:n.data,i={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(r=>{let o=r.parsedJson;o&&(i.maker_config_id=o.config_id)}),i.maker_pool_handle=await this.getPoolHandleId(i.maker_config_id),i}async getPoolMarkerPositionList(e,t,i=!1){let n={},r=[];i||t.forEach(o=>{let s=`${e}_${o.period}_getPoolMarkerPositionList`,a=this.getCache(s);a!==void 0?n[o.period]=a:(n[o.period]=[],r.push(o))});try{r.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(r.map(s=>s.id),{showContent:!0})).forEach(s=>{let a=le(s),c=bn.buildMarkerPositions(a);if(c.length>0){let{period_id:l}=c[0],u=t.filter(m=>m.id===l)[0];n[u.period]=c}});let o=[];for(let s in n)n[s].forEach(a=>{o.push(a)});if(o.length>0){let s=await this._sdk.ClmmSDK.Position.getSipmlePositionList(o.map(a=>a.id));for(let a of o)for(let c of s)if(a.id===c.pos_object_id){a.clmm_position=c;break}}}catch(o){console.log(o)}for(let o in n){let s=`${e}_${o}_getPoolMarkerPositionList`;this.updateCache(s,n[o],Q)}return n}async updateXCetusRewarderAndFee(e,t,i){let n=await this.calculateTotalPointsAfterMultiper(e,i);for(let r of t)await this.calculateXCetusRewarder(e,r,i.period,n);return t}async calculateXCetusRewarder(e,t,i,n){let r=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,i),{fee_share_rate:o}=this.calculateFeeShareRate(e,t,n),s=M(o).mul(r.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=s.toString(),t.bonus_num}calculateFeeShareRate(e,t,i){let n=bn.getBonusPercent(e.config,t.percent),r=M(t.point).mul(n),o=M(r).div(i);return t.point_after_multiplier=r.toString(),t.fee_share_rate=Number(o),{fee_share_rate:Number(o),points_after_multiper:r.toString()}}async calculateTotalPointsAfterMultiper(e,t){let i=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]),n=M(0),r=i[t.period];for(let o of r){let s=bn.getBonusPercent(e.config,o.percent),a=M(o.point).mul(s);n=n.add(a)}return n.toString()}async calculateAllXCetusRewarder(e){let t=this._sdk.ClmmSDK.senderAddress,i=M(0),n=[];for(let r of e){let o=await this._sdk.MakerModule.getMakerPoolPeriods(r),s=await this._sdk.MakerModule.getPoolMarkerPositionList(r.whale_nfts.whale_nfts_handle,o),a=[];for(let c of o){let l=s[c.period].filter(u=>{var m;return t.length===0?!1:((m=u.clmm_position)==null?void 0:m.owner)===t});l.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(r,l,c),l.forEach(u=>{var m;((m=u.clmm_position)==null?void 0:m.position_status)===df.Exists&&M(u.bonus_num).greaterThan(0)&&(i=i.add(u.bonus_num),a.includes(u.clmm_position.pos_object_id)||a.push(u.clmm_position.pos_object_id))}))}n.push({bonus_type:r.bonus_type,pool_id:r.pool_id,nft_ids:a})}return{claimtotal:i,claimRecord:n}}async getPoolBonusInfo(e,t,i=!1){let n=`${e}_${t}_getPoolBonusInfo`,r=this.getCache(n,i);if(r!==void 0)return r;let o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),s=le(o),a=bn.buildPoolBonusInfo(s);return this.updateCache(n,a,ki),a}claimPayload(e){let{maker_bonus:t,xcetus:i}=this.sdk.sdkOptions,n=new $;return n.moveCall({target:`${t.published_at}::${Yl}::claim`,typeArguments:[e.bonus_type],arguments:[n.object(j(t).maker_config_id),n.object(e.market_pool_id),n.object(e.position_nft_id),n.pure.u8(e.phase),n.object(j(i).lock_manager_id),n.object(j(i).xcetus_manager_id),n.object(e.ve_nft_id)]}),n}claimAllPayload(e){let{maker_bonus:t,xcetus:i}=this.sdk.sdkOptions,n=new $;return e.whale_nfts.forEach(r=>{r.nft_ids.forEach(o=>{n.moveCall({target:`${t.published_at}::${Yl}::claim_all`,typeArguments:[r.bonus_type],arguments:[n.object(j(t).maker_config_id),n.object(r.pool_id),n.object(o),n.object(j(i).lock_manager_id),n.object(j(i).xcetus_manager_id),n.object(e.ve_nft_id)]})})}),n}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},vr="router",Zo="router",vo=24*3600,$s=1e3,Si=1e11,rr=class{static buildVeNFTDividendInfo(e){let t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{let n=[];i.fields.value.fields.contents.forEach(r=>{n.push({coin_type:R(r.fields.key.fields.name).source_address,amount:r.fields.value})}),t.rewards.push({period:Number(i.fields.key),rewards:n,vesrion:"v1"})}),t}static buildDividendManager(e){let t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{t.bonus_types.push(R(i.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:Dt(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){let t=e.fields,i={id:t.id.id,type:R(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/vo,i}static getAvailableXCetus(e,t){let i=M(0);return t.forEach(n=>{i=i.add(n.xcetus_amount)}),M(e.xcetus_balance).sub(i).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!rr.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>rr.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e,t){let i=new Set;return e==null||e.forEach(n=>{n.rewards.forEach(r=>{i.add(r.coin_type)})}),t==null||t.forEach(n=>{n.rewards.forEach(r=>{i.add(r.coin_type)})}),Array.from(i)}static buildDividendRewardTypeListV2(e){let t={};return e==null||e.forEach(i=>{i.vesrion==="v2"&&i.rewards.forEach(n=>{t[n.coin_type]||(t[n.coin_type]=[]),t[n.coin_type].push(i.period)})}),t}static getNextStartTime(e){let t=Date.now()/1e3,{start_time:i,interval_day:n}=e,r=Math.ceil((t-i)/(n*vo));return i+r*n*vo}},tw=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){let{xcetus:i}=this.sdk.sdkOptions,n=`${e}_getLockUpManagerEvent`,r=this.getCache(n,t);if(r!==void 0)return r;let o,s=`${i.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:s}})).data.forEach(a=>{let c=R(zi(a)).source_address;if(c===s&&a.data&&a.data.content){let{fields:l}=a.data.content;o={...ea(a),id:l.id.id,index:l.index,type:c,xcetus_balance:l.xcetus_balance},this.updateCache(n,o,Q)}}),o}async getOwnerLockCetuss(e){let{xcetus:t}=this.sdk.sdkOptions,i=[],n=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:n}});for(let o of r.data)if(R(zi(o)).source_address===n&&o.data){let s=rr.buildLockCetus(o.data.content);s.xcetus_amount=await this.getXCetusAmount(s.id),i.push(s)}return i}async getLockCetus(e){var i;let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=t.data)!=null&&i.content){let n=rr.buildLockCetus(t.data.content);return n.xcetus_amount=await this.getXCetusAmount(n.id),n}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){let{xcetus:e}=this.sdk.sdkOptions,t=new $;return t.moveCall({target:`${e.published_at}::${vr}::mint_venft`,typeArguments:[],arguments:[t.object(j(e).xcetus_manager_id)]}),t}async convertPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new $,n=this.buileCetusCoinType(),r=await re.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.amount),n);return e.venft_id===void 0?i.moveCall({target:`${t.published_at}::${vr}::mint_and_convert`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),r,i.pure.u64(e.amount)]}):i.moveCall({target:`${t.published_at}::${vr}::convert`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),r,i.pure.u64(e.amount),i.object(e.venft_id)]}),i}redeemLockPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${vr}::redeem_lock`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),i.object(e.venft_id),i.pure.u64(e.amount),i.pure.u64(e.lock_day),i.object(L)]}),i}redeemPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${vr}::redeem`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(L)]}),i}redeemDividendPayload(e,t){let{xcetus:i,xcetus_dividends:n}=this.sdk.sdkOptions,r=new $;return t.forEach(o=>{r.moveCall({target:`${i.published_at}::${Zo}::redeem`,typeArguments:[o],arguments:[r.object(j(n).dividend_manager_id),r.object(e)]})}),r}redeemDividendV2Payload(e,t,i){let{xcetus_dividends:n}=this.sdk.sdkOptions,r=new $;return t.filter(o=>i.includes(o)).length>0&&(r=this.redeemDividendXTokenPayload(e,r)),t.forEach(o=>{i.includes(o)||r.moveCall({target:`${n.published_at}::${Zo}::redeem_v2`,typeArguments:[o],arguments:[r.object(j(n).dividend_manager_id),r.object(e),r.object(L)]})}),r}redeemDividendV3Payload(e,t,i,n,r){let{xcetus_dividends:o}=this.sdk.sdkOptions,s=new $;return i.filter(a=>r.includes(a)).length>0&&(s=this.redeemDividendXTokenPayload(t,s)),i.forEach(a=>{s.moveCall({target:`${o.published_at}::${Zo}::redeem_v3`,typeArguments:[a],arguments:[s.object(j(o).dividend_manager_id),s.object(j(o).venft_dividends_id),s.makeMoveVec({elements:n[a].map(c=>s.pure.u64(c)),type:"u64"}),s.object(t),s.object(L)]})}),s}redeemDividendXTokenPayload(e,t){let{xcetus_dividends:i,xcetus:n}=this.sdk.sdkOptions,{xcetus_manager_id:r,lock_manager_id:o}=j(n),{dividend_manager_id:s}=j(i);return t=t===void 0?new $:t,t.moveCall({target:`${i.published_at}::${Zo}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(r),t.object(s),t.object(e),t.object(L)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",i="XCETUS"){return`${e}::${t}::${i}`}cancelRedeemPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${vr}::cancel_redeem_lock`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(L)]}),i}async getInitConfigs(){var s,a;let{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:s.data,r={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};n.length>0&&n.forEach(c=>{let l=c.parsedJson;l&&(r.xcetus_manager_id=l.xcetus_manager)});let o=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return o.length>0&&o.forEach(c=>{let l=c.parsedJson;l&&(r.lock_manager_id=l.lock_manager)}),r.lock_manager_id.length>0&&(r.lock_handle_id=(await this.getLockUpManager(r.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(t,r,Q),r}async getLockUpManager(e=j(this.sdk.sdkOptions.xcetus).lock_manager_id,t=!1){let i=`${e}_getLockUpManager`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=rr.buildLockUpManager(le(r));return this.updateCache(i,o,Q),o}async getDividendConfigs(){var l,u,m;let{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,{dividend_manager_id:t,venft_dividends_id:i}=j(this._sdk.sdkOptions.xcetus_dividends),n=`${e}_getDividendManagerEvent`,r=this.getCache(n);if(r!==void 0)return r;let o=(l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:l.data,s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x1::string::String",value:"VeNFTDividends"}}),a={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:"",venft_dividends_id:"",venft_dividends_id_v2:""};o.length>0&&o.forEach(g=>{let k=g.parsedJson;k&&(a.dividend_manager_id=k.manager_id,a.dividend_admin_id=k.admin_id,a.dividend_settle_id=k.settle_id,this.updateCache(n,a,Q))}),s&&s.data&&s.data.content&&(a.venft_dividends_id=(m=(u=s.data.content)==null?void 0:u.fields)==null?void 0:m.value,this.updateCache(n,a,Q));let c=await this._sdk.ClmmSDK.fullClient.getObject({id:i,options:{showContent:!0}});return a.venft_dividends_id_v2=c.data.content.fields.venft_dividends.fields.id.id,a}async getDividendManager(e=!1){let{dividend_manager_id:t}=j(this._sdk.sdkOptions.xcetus_dividends),i=`${t}_getDividendManager`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=le(r),s=rr.buildDividendManager(o);return this.updateCache(i,s,Q),s}async getXcetusManager(e=!0){let{xcetus_manager_id:t}=j(this._sdk.sdkOptions.xcetus),i=`${t}_getXcetusManager`,n=this.getCache(i,e);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=le(r),s={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(i,s),s}async getVeNFTDividendInfo(e,t,i){let n,r={id:"",ve_nft_id:i,rewards:[]};try{n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:i}});let s=le(n);r=rr.buildVeNFTDividendInfo(s)}catch{n=void 0}let o=[];try{let s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:i}}),a=le(s).value.fields.value.fields.dividends.fields.id.id,c=null,l=50,u=[];for(;;){let m=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:a,cursor:c,limit:l});if(m.data.forEach(g=>{u.push(g.objectId)}),c=m.nextCursor,c===null||m.data.length<l)break}console.log("🚀🚀🚀 ~ file: xcetusModule.ts:662 ~ XCetusModule ~ tableIdList:",u),(await this._sdk.ClmmSDK.fullClient.batchGetObjects(u,{showType:!0,showContent:!0})).forEach(m=>{o.push({period:Number(m.data.content.fields.name),vesrion:"v2",rewards:m.data.content.fields.value.fields.contents.map(g=>({coin_type:R(g.fields.key.fields.name).source_address,amount:g.fields.value}))})}),console.log("🚀🚀🚀 ~ file: xcetusModule.ts:680 ~ XCetusModule ~ objects.forEach ~ rewards:",o)}catch(s){console.log("🚀🚀🚀 ~ file: xcetusModule.ts:637 ~ XCetusModule ~ error:",s)}return{...r,rewards:[...r.rewards,...o]}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(j(this._sdk.sdkOptions.xcetus).lock_manager_id),n=M(Si).mul(M(i.max_lock_day).sub(M(t))).mul(M(i.max_percent_numerator).sub(M(i.min_percent_numerator))).div(M(i.max_lock_day).sub(M(i.min_lock_day))),r=M(Si).mul(M(i.max_percent_numerator)).sub(n).div(M($s)).div(Si);return{amountOut:M(r).mul(M(e)).round().toString(),percent:r.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(j(this._sdk.sdkOptions.xcetus).lock_manager_id),n=M(Si).mul(M(i.max_lock_day).sub(M(t))).mul(M(i.max_percent_numerator).sub(M(i.min_percent_numerator))).div(M(i.max_lock_day).sub(M(i.min_lock_day))),r=M(Si).mul(M(i.max_percent_numerator)).sub(n).div(M($s)).div(Si);return{amountOut:M(e).div(r).toFixed(0,J.ROUND_UP),percent:r.toString()}}async getXCetusAmount(e){let{lock_handle_id:t}=j(this._sdk.sdkOptions.xcetus),i=`${e}_getXCetusAmount`,n=this.getCache(i);if(n!==void 0)return n;try{let r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=le(r);if(o){let{xcetus_amount:s}=o.value.fields.value.fields;return this.updateCache(i,s,Q),s}}catch{}return"0"}async getVeNftAmount(e,t){try{let i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=le(i);if(n){let{lock_amount:r,xcetus_amount:o}=n.value.fields.value.fields;return{lock_amount:r,xcetus_amount:o}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){let i=(await this.getDividendManager()).dividends.id,n=`${i}_${e}_getPhaseDividendInfo`,r=this._sdk.getCache(n,t);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),s=le(o),a=s.value.fields.value.fields,c=a.redeemed_num.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),l=a.bonus_types.map(g=>g.fields.name),u=a.bonus.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),m={id:Li(o),phase:s.name,settled_num:a.settled_num,register_time:a.register_time,redeemed_num:c,is_settled:a.is_settled,bonus_types:l,bonus:u,phase_end_time:""};return this.updateCache(n,m),m}catch{}}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},iw="factory",Ci="oversubscribe_pool",Rf=1e6,Sr=1e18,nw=(e=>(e.Upcoming="Upcoming",e.Live="Live",e.Ended="Ended",e.Failed="Failed",e.Canceled="Canceled",e))(nw||{}),kr="router",Oa="router",Qo="router",rw=(e=>(e.BOTH="both",e.LEFT="left",e.Right="right",e))(rw||{}),ow=(e=>(e[e.CURVE=3]="CURVE",e[e.BID_ASK=4]="BID_ASK",e))(ow||{}),ed={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function sw(e){return"master_address"in e}var aw="router",cw="vaults",lw=1e4,dw=(e=>(e.STATUS_RUNNING="STATUS_RUNNING",e.STATUS_REBALANCING="STATUS_REBALANCING",e))(dw||{}),uw=(e=>(e.Haedal="Haedal",e.Volo="Volo",e.Aftermath="aftermath",e))(uw||{}),fw=(e=>(e.Running="Running",e.PartialCompleted="PartialCompleted",e.Completed="Completed",e.Cancelled="Cancelled",e))(fw||{}),li=class{static buildIdoPoolImmutables(e){return{pool_address:ze(e.pool_id),coin_type_sale:R(e.sale_coin_type.name).full_address,coin_type_raise:R(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){let t=zi(e),i=R(t),n=le(e),r={pool_address:ze(n.id.id),coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],tick_spacing:Number(n.tick_spacing),total_supply:n.total_supply,min_purchase:n.min_purchase_amount,max_purchase:n.max_purchase_amount},o={start_time:Number(n.duration_manager.fields.start_time),lock_up_duration:Number(n.duration_manager.fields.lock_up_duration),purchase_duration:Number(n.duration_manager.fields.purchase_duration),end_time:0};o.end_time=o.start_time+o.purchase_duration;let s={complete_raise_limit:n.complete_raise_limit,liquidity_injection_ratio:M(n.liquidity_injection_ratio).div(Rf).toNumber(),current_sqrt_price_min:n.current_sqrt_price_min,current_sqrt_price_max:n.current_sqrt_price_max,owner:n.owner,sale_coin_amount:n.sale_coin,raise_coin_amount:n.raise_coin,price:n.price,current_price:n.price,duration_summary:o,is_cancelled:n.is_cancelled,is_liquidity_injected:n.is_liquidity_injected,liquidity_used_raise_amount:n.liquidity_used_raise_amount,liquidity_used_sale_amount:n.liquidity_used_sale_amount,purchase_summary:{size:Number(n.purchase_manager.fields.purchases.fields.size),purchase_handle:n.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:n.total_purchase_amount,white_summary:{white_list_id:n.white_list.fields.id.id,protection_limit_used:n.white_list.fields.protection_limit_used,protection_hard_cap:n.white_list.fields.protection_hard_cap,white_handle:n.white_list.fields.addresses.fields.id.id,size:Number(n.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:n.is_withdrawn};return li.updatePoolStatus(s),{...r,...s}}static is_init_period(e){return Number(M(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){let t=Number(M(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){let t=Number(M(Date.now()/1e3).toFixed(0)),i=e.start_time+e.purchase_duration;return t>i}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&li.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:li.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&li.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||li.is_claim_period(e.duration_summary)&&M(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let i,n;if(li.is_sale_failed(e))i="0",n="0";else if(t.is_redeemed)i=t.obtained_sale_amount,n=t.used_raise_amount;else if(M(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))i=M(t.purchased_raise_amount).mul(Sr).div(e.price).toString(),n=t.purchased_raise_amount;else{let o=li.redeemForSaleOversubcribeV2(e,t);i=o.user_obtained_sale_amount,n=o.user_used_raise_amount_ceil}i=J.floor(i);let r=J.floor(M(t.purchased_raise_amount).sub(n).toString());return{obtained_sale_amount:i,refunded_raise_amount:r}}static calculateWithdrawAmount(e){let t,i,n=M(e.total_supply).mul(e.liquidity_injection_ratio);if(li.is_sale_failed(e))t="0",i=M(n).add(e.total_supply);else{let{max_raise_amount:r}=e;M(e.total_purchase_amount).greaterThanOrEqualTo(r)?(t=M(r).sub(e.liquidity_used_raise_amount).toString(),i="0"):(t=M(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),i=M(e.total_supply).add(n).sub(e.liquidity_used_sale_amount).sub(li.get_sold_amount(e)))}return{obtained_raise_amount:J.floor(t).toString(),refunded_sale_amount:J.ceil(i).toString()}}static get_sold_amount(e){return M(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:M(e.total_purchase_amount).mul(Sr).div(e.price)}static redeemForSaleOversubcribe(e,t){let i=t.protection_raise_amount,n=M(t.purchased_raise_amount).sub(i),r=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,s=M(r).sub(o),a=M(e.total_purchase_amount).sub(o),c=J.ceil(n.mul(s).div(a).add(i)),l=J.floor(n.mul(s).div(a).add(i));return{user_obtained_sale_amount:J.floor(M(e.total_supply).mul(l).div(r)),user_used_raise_amount_ceil:c}}static redeemForSaleOversubcribeV2(e,t){let i=t.protection_raise_amount,n=M(t.purchased_raise_amount).sub(i),r=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,s=M(r).sub(o),a=M(e.total_purchase_amount).sub(o),c=M(i).mul(a).add(M(n).mul(s)).mul(Sr).div(M(a).mul(e.price)),l=J.ceil(c.mul(e.price).div(Sr));return{user_obtained_sale_amount:c,user_used_raise_amount_ceil:l}}static raiseTotalAmount(e){let t=M(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?M(e.total_supply).mul(e.current_price).div(M(10).pow(M(t))).toString():M(e.total_supply).mul(e.current_price).mul(M(10).pow(M(t))).toString()}static updatePoolStatus(e){let t=Number(M(Date.now()/1e3).toFixed(0)),i=e.duration_summary,n=i.start_time+i.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<i.start_time?e.pool_status="Upcoming":t>i.start_time&&t<n?e.pool_status="Live":M(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){let i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),n=i[t.coin_type_sale].decimals,r=i[t.coin_type_raise].decimals;t.current_price=Ji.priceFixToReal(Number(M(t.price).div(M(Sr)).toString()),n,r).toString(),t.sale_decimals=n,t.raise_decimals=r,t.max_raise_amount=this.raiseTotalAmount(t)}},hw=(e=>(e.V1="1",e.V2="2",e))(hw||{}),or=class{static buildVeNFTDividendInfo(e){let t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{let n=[];i.fields.value.fields.contents.forEach(r=>{n.push({coin_type:R(r.fields.key.fields.name).source_address,amount:r.fields.value})}),t.rewards.push({period:Number(i.fields.key),rewards:n})}),t}static buildDividendManager(e){let t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{t.bonus_types.push(R(i.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:Dt(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){let t=e.fields,i={id:t.id.id,type:R(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/vo,i}static getAvailableXToken(e,t){let i=M(0);return t.forEach(n=>{i=i.add(n.xtoken_amount)}),M(e.xtoken_balance).sub(i).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!or.isLocked(t))}static getLockingTokens(e){return e.filter(t=>or.isLocked(t))}static buildDividendRewardTypeList(e){let t=new Set;return e.forEach(i=>{i.rewards.forEach(n=>{t.add(n.coin_type)})}),Array.from(t)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=vo){let i=Date.now()/1e3,{start_time:n,interval_day:r}=e,o=Math.ceil((i-n)/(r*t));return n+o*r*t}},an=class{static getDefaultStrategyConfig(e){let t;switch(e){case 4:t=ed.bidAsk;break;default:t=ed.curve;break}return t}static geTickIndexRange(e,t,i,n){let r,o;switch(e=Y.getInitializableTickIndex(e,t),n){case"left":e>0?(o=M(e).sub(t).toNumber(),r=M(e).mul(M(1).add(i)).toDecimalPlaces(0).toNumber()):(o=M(e).sub(t).toNumber(),r=M(e).mul(M(1).sub(i)).toDecimalPlaces(0).toNumber());break;case"right":e>0?(o=M(e).mul(M(1).add(i)).toDecimalPlaces(0).toNumber(),r=M(e).add(t).toNumber()):(o=M(e).mul(M(1).sub(i)).toDecimalPlaces(0).toNumber(),r=M(e).add(t).toNumber());break;default:e>0?(r=M(e).mul(M(1).sub(i)).toDecimalPlaces(0).toNumber(),o=M(e).mul(M(1).add(i)).toDecimalPlaces(0).toNumber()):(r=M(e).mul(M(1).add(i)).toDecimalPlaces(0).toNumber(),o=M(e).mul(M(1).sub(i)).toDecimalPlaces(0).toNumber());break}if(r=Y.getInitializableTickIndex(r,t),o=Y.getInitializableTickIndex(o,t),r<nc)throw Error("Tick lower value is below the minimum allowed value.");if(o>ic)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:r,tick_upper:o}}static getCreateLiquidityBins(e,t){let i=[];switch(t){case 4:i=an.getCreateBidAskLiquidityBins(e);break;default:i=an.getCreateCurveLiquidityBins(e);break}return i}static getCreateBidAskLiquidityBins(e){let t=M(Math.floor(M(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),i=[],n=e.ratios,r,o;for(let s=0;s<n.length;s++){let a,c;e.tick_upper<=e.curr_tick?(c=M(e.tick_upper).sub(t.mul(s)).toNumber(),a=M(c).sub(t).toNumber()):e.tick_lower>=e.curr_tick?(a=M(e.tick_lower).add(t.mul(s)).toNumber(),c=M(e.tick_lower).add(t.mul(s+1)).toNumber()):s===4?(a=M(e.tick_lower).add(t.mul(s)).toNumber(),c=M(a).add(t.mul(2)).toNumber()):s>4?(a=M(e.tick_lower).add(t.mul(s+1)).toNumber(),c=M(a).add(t).toNumber()):(a=M(e.tick_lower).add(t.mul(s)).toNumber(),c=M(a).add(t).toNumber()),r=Y.getInitializableTickIndex(a,e.tick_spacing),o=Y.getInitializableTickIndex(c,e.tick_spacing),i.push({tick_lower:r,tick_upper:o,ratio:n[s],liquidity:"0"})}return i}static getCreateCurveLiquidityBins(e){let t=M(Math.floor(M(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),i=[],n=e.ratios;for(let r=0;r<n.length;r++){let o,s;e.tick_upper<=e.curr_tick?(s=e.tick_upper,o=M(e.tick_upper).sub(t.mul(r+1)).toNumber()):e.tick_lower>=e.curr_tick?(o=e.tick_lower,s=M(o).add(t.mul(r+1)).toNumber()):(o=M(e.curr_tick).sub(t.mul(r+1)).toNumber(),s=M(e.curr_tick).add(t.mul(r+1)).toNumber()),i.push({tick_lower:Y.getInitializableTickIndex(o,e.tick_spacing),tick_upper:Y.getInitializableTickIndex(s,e.tick_spacing),ratio:n[r],liquidity:"0"})}return i}static calculateAddLiquidityInputs(e){let t=new A(Y.tickIndexToSqrtPriceX64(e.curr_tick)),i=an.calculateCoinRatios(e.curr_tick,e.liquidity_bins),n=e.liquidity_bins.map((r,o)=>{let s=i[o],a=M(e.coin_amount).mul(e.fix_amount_a?s.coinRatioA:s.coinRatioB).toFixed(0).toString();try{return{...Jt.estLiquidityAndcoinAmountFromOneAmounts(r.tick_lower,r.tick_upper,new A(a),e.fix_amount_a,!0,e.slippage,t),...r}}catch{return{coinAmountA:new A(0),coinAmountB:new A(0),tokenMaxA:new A(0),tokenMaxB:new A(0),liquidityAmount:new A(0),fix_amount_a:!e.fix_amount_a,...r}}});return an.fixLiquidityInputs(t,e.slippage,n,!0)}static fixLiquidityInputs(e,t,i,n){let r=i.filter(s=>s.liquidityAmount.gt(se));if(r.length===0)return[];let o=r[0];return i.map(s=>{if(s.liquidityAmount.eq(se)){let a=M(o.liquidityAmount.toString()).mul(s.ratio).div(o.ratio).toFixed(0),c=Y.tickIndexToSqrtPriceX64(s.tick_lower),l=Y.tickIndexToSqrtPriceX64(s.tick_upper),u=Jt.getCoinAmountFromLiquidity(new A(a.toString()),e,c,l,!1);return{coinAmountA:u.coinA,coinAmountB:u.coinB,liquidityAmount:new A(a.toString()),fix_amount_a:s.fix_amount_a,...Ca(u,yo.fromDecimal(M(t).mul(100)),n)}}return s})}static calculateCoinRatios(e,t){let i=new A(Y.tickIndexToSqrtPriceX64(e)),n=[],r=M(0),o=M(0),s=t.map(l=>{let u=M(Jg(100,6).toString()).mul(l.ratio).toFixed(0).toString(),m=Y.tickIndexToSqrtPriceX64(l.tick_lower),g=Y.tickIndexToSqrtPriceX64(l.tick_upper),k=Jt.getCoinAmountFromLiquidity(new A(u),i,m,g,!0);return r=r.add(k.coinA.toString()),o=o.add(k.coinB.toString()),{...k,liquidity:u}}),a=[],c=[];return s.forEach((l,u)=>{let m={coinRatioA:r.eq(M(0))?0:M(l.coinA.toString()).div(r).toNumber(),coinRatioB:o.eq(M(0))?0:M(l.coinB.toString()).div(o).toNumber(),liquiditys:l.liquidity,tick_lower:t[u].tick_lower,tick_upper:t[u].tick_upper};n.push(m),a.push(r.eq(M(0))?0:M(l.coinA.toString()).div(r).toNumber()),c.push(o.eq(M(0))?0:M(l.coinB.toString()).div(o).toNumber())}),n}static calculateCloseMasterLiquidityInputs(e){let t=new A(Y.tickIndexToSqrtPriceX64(e.curr_tick));return e.positions.map(i=>{let n=new A(i.liquidity),r=Y.tickIndexToSqrtPriceX64(i.tick_lower_index),o=Y.tickIndexToSqrtPriceX64(i.tick_upper_index),s=Jt.getCoinAmountFromLiquidity(n,t,r,o,!1),a=yo.fromDecimal(M(e.slippage).mul(100)),{tokenMaxA:c,tokenMaxB:l}=Ca(s,a,!1);return{coinAmountA:s.coinA,coinAmountB:s.coinB,tokenMaxA:c,tokenMaxB:l,liquidityAmount:n,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(e){let t=new A(Y.tickIndexToSqrtPriceX64(e.curr_tick)),{fix_token:i}=e;if(i){let n=e.positions.map((s,a)=>({tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,ratio:e.ratios[a]})),r=an.calculateCoinRatios(e.curr_tick,n),o=e.positions.map((s,a)=>{let c=r[a],l=M(i.coin_amount).mul(i.fix_amount_a?c.coinRatioA:c.coinRatioB).toFixed(0).toString();try{let u=Jt.estLiquidityAndcoinAmountFromOneAmounts(s.tick_lower_index,s.tick_upper_index,new A(l),i.fix_amount_a,!1,e.slippage,t);return{...u,tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,liquidity:u.liquidityAmount.toString(),ratio:e.ratios[a]}}catch{return{coinAmountA:new A(0),coinAmountB:new A(0),tokenMaxA:new A(0),tokenMaxB:new A(0),liquidityAmount:new A(0),fix_amount_a:!i.fix_amount_a,tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,liquidity:"0",ratio:e.ratios[a]}}});return an.fixLiquidityInputs(t,e.slippage,o,!1)}return e.positions.map((n,r)=>{let o=e.ratios[r],s=M(e.liquidity).mul(o).toFixed(0);M(s).greaterThan(n.liquidity)&&(s=n.liquidity);let a=Y.tickIndexToSqrtPriceX64(n.tick_lower_index),c=Y.tickIndexToSqrtPriceX64(n.tick_upper_index),l=Jt.getCoinAmountFromLiquidity(new A(s),t,a,c,!1),u=yo.fromDecimal(M(e.slippage).mul(100)),{tokenMaxA:m,tokenMaxB:g}=Ca(l,u,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,tokenMaxA:m,tokenMaxB:g,liquidityAmount:new A(s),fix_amount_a:!1}})}static buildMasterPosition(e){return{coin_type_a:R(e.coin_type_a.fields.name).full_address,coin_type_b:R(e.coin_type_b.fields.name).full_address,description:e.description,id:e.id.id,index:e.index,liquidity:e.liquidity,name:e.name,pool:e.pool,tick_lower_index:Ut(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:Ut(BigInt(e.tick_upper_index.fields.bits)),url:e.url}}static buildMasterNFT(e){let t=le(e);if(t){let i={id:t.id.id,pool_id:t.pool_id,index:Number(t.index),strategy:Number(t.strategy),tick_lower_index:Ut(BigInt(t.tick_lower_index)),tick_upper_index:Ut(BigInt(t.tick_upper_index)),positions:[],...ea(e)};return i.positions=t.positions.map(n=>an.buildMasterPosition(n.fields)),i}}},mi=class{static generateNextTickRange(e,t,i){let n=e-t/2,r=e+t/2;return{new_tick_lower:mi.getValidTickIndex(n,i),new_tick_upper:mi.getValidTickIndex(r,i)}}static calculateDepositRatio(e,t,i){let n=Y.sqrtPriceX64ToTickIndex(i);if(n<e)return{ratioA:new J(1),ratioB:new J(0)};if(n>t)return{ratioA:new J(0),ratioB:new J(1)};let r=new A(1e8),{coinAmountB:o}=Jt.estLiquidityAndcoinAmountFromOneAmounts(e,t,r,!0,!0,0,i),s=Y.sqrtPriceX64ToPrice(i,0,0),a=M(r.toString()).mul(s),c=a.add(o.toString()),l=a.div(c),u=M(o.toString()).div(c);return{ratioA:l,ratioB:u}}static getValidTickIndex(e,t){if(e%t===0)return e;let i;if(e>0?i=e-e%t+t:e<0?i=e+Math.abs(e)%t-t:i=e,i%t!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(i)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return i}static get_lp_amount_by_liquidity(e,t){return e.total_supply==="0"?"0":M(e.total_supply).mul(t).div(e.liquidity).toFixed(0,J.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,t){return e.total_supply==="0"?"0":M(t).mul(e.liquidity).div(e.total_supply).toFixed(0,J.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,t){return M(t).mul(e.protocol_fee_rate).div(lw).toFixed(0,J.ROUND_CEIL)}static buildFramsPositionNFT(e){let t=e.clmm_postion.fields;return{id:e.id.id,url:t.url,pool_id:e.pool_id,coinTypeA:R(t.coin_type_a.fields.name).full_address,coinTypeB:R(t.coin_type_b.fields.name).full_address,description:t.description,name:t.name,liquidity:t.liquidity,clmm_position_id:t.id.id,clmm_pool_id:t.pool,tick_lower_index:Ut(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:Ut(BigInt(t.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){let t=le(e),i=Vr(e),{positions:n}=t;if(t&&n.length>0){let r=mi.buildFramsPositionNFT(n[0].fields);return{id:t.id.id,pool_id:t.pool,protocol_fee_rate:t.protocol_fee_rate,is_pause:t.is_pause,harvest_assets:{harvest_assets_handle:t.harvest_assets.fields.id.id,size:Number(t.harvest_assets.fields.size)},lp_token_type:R(i).type_arguments[0],total_supply:t.lp_token_treasury.fields.total_supply.fields.value,liquidity:t.liquidity,max_quota:t.max_quota,status:t.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:t.quota_based_type.fields.name,position:r}}}static async getSuiCoin(e,t,i){let n=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),js);i=i||new $;let r;if(t>95e10){let[o,...s]=n;s.length>0&&i.mergeCoins(i.object(o.coinObjectId),s.map(a=>i.object(a.coinObjectId))),r=i.splitCoins(i.object(o.coinObjectId),[t])}else r=re.buildCoinForAmount(i,n,BigInt(t),js,!1,!0).targetCoin;return r}},Yo=class{static calculatePositionShare(e,t,i,n,r,o,s){if(t<=r||e>=o)return"0";let a=0;e<r?a=r:a=e;let c=0;t<o?c=t:c=o;let l=Y.tickIndexToSqrtPriceX64(a),u=Y.tickIndexToSqrtPriceX64(c),{coinA:m,coinB:g}=Jt.getCoinAmountFromLiquidity(new A(i),new A(s),l,u,!0);return M(m.toString()).mul(n).div(1e12).add(g.toString()).toString()}static buildFramsPool(e){let t=le(e);if(t)try{let i=[];return t.rewarders.forEach(n=>{i.push({reward_coin:R(n.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:t.id.id,clmm_pool_id:t.clmm_pool_id,effective_tick_lower:Ut(BigInt(t.effective_tick_lower.fields.bits)),effective_tick_upper:Ut(BigInt(t.effective_tick_upper.fields.bits)),total_share:t.total_share,rewarders:i,positions:{positions_handle:t.positions.fields.id.id,size:t.positions.fields.size},sqrt_price:t.sqrt_price}}catch(i){console.log(i)}}static buildFramsPositionNFT(e){let t=le(e);if(t){let i=t.clmm_postion.fields;return{id:t.id.id,url:i.url,pool_id:t.pool_id,coinTypeA:R(i.coin_type_a.fields.name).full_address,coinTypeB:R(i.coin_type_b.fields.name).full_address,description:i.description,name:i.name,liquidity:i.liquidity,clmm_position_id:i.id.id,clmm_pool_id:i.pool,tick_lower_index:Ut(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:Ut(BigInt(i.tick_upper_index.fields.bits)),rewards:[]}}}},ao=class{static buildOrderLimitEvent(e,t){let{events:i}=e,n=[];return i&&i.forEach(r=>{let o=R(r.type).name;if(t.includes(o)){let s={digest:e.digest,type:o,timestampMs:e.timestampMs,parsedJson:r.parsedJson};n.push(s)}}),n}static buildLimitOrderInfo(e){let t=le(e),i=Vr(e);if(t&&i)try{let n=R(i),r={pay_coin_type:n.type_arguments[0],target_coin_type:n.type_arguments[1],canceled_ts:t.canceled_ts==="18446744073709551615"?0:Number(t.canceled_ts),id:t.id.id,obtained_amount:t.obtained_amount,owner:t.owner,rate:t.rate,rate_order_indexer_id:t.rate_order_indexer_id,expire_ts:Number(t.expire_ts),total_pay_amount:t.total_pay_amount,pay_balance:t.pay_balance,target_balance:t.target_balance,claimed_amount:t.claimed_amount,status:"Running",created_ts:Number(t.created_ts)};return r.canceled_ts===0?(r.status="Running",M(r.pay_balance).eq(0)?r.status="Completed":M(r.pay_balance).lessThan(r.total_pay_amount)&&(r.status="PartialCompleted")):r.status="Cancelled",r}catch(n){console.log(n)}}static rateToPrice(e,t,i){let n=18+t-i;return M(10**n).div(e).toString()}static priceToRate(e,t,i){let n=18+t-i;return M(10).pow(n).div(M(e)).toFixed(0).toString()}},Ia=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{haedal:r}=j(n);if(r===void 0)throw Error("the haedal config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{staking_id:s}=j(r);try{let a=new $;t?await this.requestStake(e,i||1e9,a):a.moveCall({target:`${r.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[a.object(s)]});let c=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let u=c.events.find(k=>k.type.includes("UserStaked")),{sui_amount:m,st_amount:g}=u.parsedJson;return M(m).div(g).toString()}let l=c.results[0].returnValues[0][0];return M(de.u64().parse(Uint8Array.from(l))).div(1e6).toString()}catch(a){console.log("getExchangeRateForHaedal",a)}return"0"}static async requestStake(e,t,i){var o,s;let{vaults:n}=e.sdkOptions;i=i||new $;let r=await mi.getSuiCoin(e,t,i);return i.moveCall({target:`${(s=(o=n.config)==null?void 0:o.haedal)==null?void 0:s.published_at}::interface::request_stake`,typeArguments:[],arguments:[i.object(ze("0x5")),i.object(n.config.haedal.config.staking_id),r,i.pure.address(ze("0x0"))]}),i}static requestStakeCoin(e,t,i){let{haedal:n}=e.sdkOptions.vaults.config;return t.moveCall({target:`${n.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[t.object(ze("0x5")),t.object(n.config.staking_id),i,t.pure.address(ze("0x0"))]})}},Pa=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=j(n);if(r===void 0)throw Error("the volo config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{native_pool:s,vsui_metadata:a}=j(r);try{let c=new $;t?await this.requestStake(e,i||1e9,c):c.moveCall({target:`${r.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[c.object(s),c.object(a)]});let l=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let g=l.events.find(T=>T.type.includes("StakedEvent")),{cert_amount:k,sui_amount:x}=g.parsedJson;return M(x).div(k).toString()}let u=l.results[0].returnValues[0][0],m=M(de.u256().parse(Uint8Array.from(u))).div("1000000000000000000").toNumber();return M(1).div(m).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=j(n);if(r===void 0)throw Error("the volo config is undefined");i=i||new $;let{native_pool:o,vsui_metadata:s}=j(r),a=await mi.getSuiCoin(e,t,i);return i.moveCall({target:`${r.published_at}::native_pool::stake`,typeArguments:[],arguments:[i.object(o),i.object(s),i.object(ze("0x5")),a]}),i}static requestStakeCoin(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=j(n);if(r===void 0)throw Error("the volo config is undefined");t=t||new $;let{native_pool:o,vsui_metadata:s}=j(r);return t.moveCall({target:`${r.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[t.object(o),t.object(s),t.object(ze("0x5")),i]})}},ja=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=j(n);if(r===void 0)throw Error("the aftermath config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{staked_sui_vault:s,safe:a}=j(r);try{let c=new $;t?await this.requestStake(e,i||1e9,c):c.moveCall({target:`${r.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[c.object(s),c.object(a)]});let l=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let m=l.events.find(x=>x.type.includes("StakedEvent")),{afsui_amount:g,sui_amount:k}=m.parsedJson;return M(k).div(g).toString()}let u=l.results[0].returnValues[0][0];return M(de.u128().parse(Uint8Array.from(u))).div(1e18).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=j(n);if(r===void 0)throw Error("the aftermath config is undefined");i=i||new $;let{staked_sui_vault:o,referral_vault:s,safe:a,validator_address:c}=j(r),l=await mi.getSuiCoin(e,t,i);return i.moveCall({target:`${r.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[i.object(o),i.object(a),i.object(ze("0x5")),i.object(s),l,i.pure.address(ze(c))]}),i}static requestStakeCoin(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=j(n);if(r===void 0)throw Error("the aftermath config is undefined");t=t||new $;let{staked_sui_vault:o,referral_vault:s,safe:a,validator_address:c}=j(r);return t.moveCall({target:`${r.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[t.object(o),t.object(a),t.object(ze("0x5")),t.object(s),i,t.pure.address(ze(c))]})}},pw=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){let{package_id:i}=this._sdk.sdkOptions.ido,n=`${i}_getPoolImmutables`,r=this.getCache(n,t),o={data:[],hasNextPage:!1},s=[];if(r!==void 0&&s.push(...r),s.length===0)try{let a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::oversubscribe_pool::CreatePoolEvent`},e);a.data.forEach(c=>{let l=c.parsedJson;if(l){let u=li.buildIdoPoolImmutables(l);s.push(u)}}),o.hasNextPage=a.hasNextPage,o.nextCursor=a.nextCursor,this.updateCache(n,s,Q)}catch(a){console.log("getPoolImmutables",a)}return o.data=s,o}async getPools(e=[],t=!1){let i=[],n=[];e.length>0?n=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(o=>{n.push(o.pool_address)});let r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(let o of r){let s=li.buildIdoPool(o);await li.calculatePoolUiPrice(this._sdk,s),i.push(s);let a=`${s.pool_address}_getPoolObject`;this.updateCache(a,s,Q)}return i}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=li.buildIdoPool(r);return await li.calculatePoolUiPrice(this._sdk,o),this.updateCache(i,o),o}async getIdoConfigs(e=!1){var c;let{package_id:t}=this._sdk.sdkOptions.ido,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=qo(r),s=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",package_version_id:""};return s.length>0&&(s.forEach(l=>{let u=l.parsedJson;if(u)switch(R(l.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.package_version_id=u.package_version_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(i,a,Q)),a}async getPurchaseInfo(e,t,i=!0){let n=`${e}_${t}_getPurchaseInfo`,r=this.getCache(n,i);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),s=li.buildPurchaseInfo(le(o));return this.updateCache(n,s,ki),s}catch{return}}async getLockNFT(e,t=!1){let i=`${e}_getLockNFT`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!r.error)return $r(r)}async getLockNFTList(e){var r;let{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:i}=this._sdk.sdkOptions,n=[];try{let o=(r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${i.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:r.data;for(let s of o){let a=le(s);if(a){let c=a.nft.fields,l={locked_at:Number(a.locked_at),lock_duration:Number(a.lock_duration),lock_nft_id:a.id.id,type:a.nft.type,...c};l.end_lock_time=l.locked_at+l.lock_duration,l.coin_type_a=R(c.coin_type_a.fields.name).full_address,l.coin_type_b=R(c.coin_type_b.fields.name).full_address,l.id=c.id.id,l.tick_lower_index=Ut(BigInt(c.tick_lower_index.fields.bits)),l.tick_upper_index=Ut(BigInt(c.tick_upper_index.fields.bits)),n.push(l)}}return n}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPool(e){let{ido:t}=this.sdk.sdkOptions;rc(pe(e.coin_type_sale),pe(e.coin_type_raise))&&(e.price_min=M(1).div(e.price_max).toNumber(),e.price_max=M(1).div(e.price_min).toNumber());let i=Ji.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),n=Y.priceToSqrtPriceX64(M(e.price_min),e.sale_decimals,e.raise_decimals).toString(),r=Y.priceToSqrtPriceX64(M(e.price_max),e.sale_decimals,e.raise_decimals).toString(),o=new $,s=M(e.total_supply).add(M(e.total_supply).mul(M(e.liquidity_injection_ratio))).toNumber(),a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),c=re.buildCoinForAmount(o,a,BigInt(s),e.coin_type_sale,!1),l=[o.object(j(t).admin_cap_id),o.object(j(t).package_version_id),o.object(j(t).pools_id),o.object(pe(e.owner)),o.pure.u128(M(i).mul(Sr).toString()),o.pure.u64(e.total_supply),o.pure.u64(e.complete_raise_limit),o.pure.u64(e.min_purchase_amount),o.pure.u64(e.max_purchase_amount),o.pure.u64(e.start_time),o.pure.u64(e.purchase_duration),o.pure.u64(e.lock_up_duration),o.pure.u64((e.liquidity_injection_ratio*Rf).toString()),o.pure.u128(n),o.pure.u128(r),o.pure.u32(e.tick_spacing),c.targetCoin,o.pure.u64(e.protection_hard_cap.toString()),o.object(L)],u=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.published_at}::${iw}::create_oversubscribe_pool`,typeArguments:u,arguments:l}),o}async creatPurchasePayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),o=re.buildCoinForAmount(i,r,BigInt(e.raise_amount),e.coin_type_raise,!1),s=[e.coin_type_sale,e.coin_type_raise],a,c;return n?(c="purchase",a=[i.object(j(t).package_version_id),i.object(e.pool_address),i.object(n.purchase_certificate_id),i.pure.u64(e.raise_amount.toString()),o.targetCoin,i.object(L)]):(c="create_certificate_and_purchase",a=[i.object(j(t).package_version_id),i.object(e.pool_address),i.pure.u64(e.raise_amount.toString()),o.targetCoin,i.object(L)]),i.moveCall({target:`${t.published_at}::${Ci}::${c}`,typeArguments:s,arguments:a}),i}async redeemPayload(e){let{ido:t}=this.sdk.sdkOptions,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(i===void 0)throw Error("get purchase certificate fail");let n=new $,r=[e.coin_type_sale,e.coin_type_raise],o=[n.object(j(t).package_version_id),n.object(e.pool_address),n.object(i.purchase_certificate_id),n.object(L)];return n.moveCall({target:`${t.published_at}::${Ci}::redeem`,typeArguments:r,arguments:o}),n}injectLiquidityPayload(e){let{ido:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,n=new $,r=[e.coin_type_sale,e.coin_type_raise],o=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",s=[n.object(j(t).package_version_id),n.object(e.pool_address),n.object(j(i).global_config_id),n.object(e.clmm_pool_address),n.object(L)];return n.moveCall({target:`${t.published_at}::${Ci}::${o}`,typeArguments:r,arguments:s}),n}unPauseInjectLiquidity(e){let{ido:t}=this.sdk.sdkOptions,{integrate:i,clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,r=new $;r.moveCall({target:`${i.published_at}::${wo}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[r.object(j(n).global_config_id),r.object(e.clmm_pool_address)]});let o=[e.coin_type_sale,e.coin_type_raise],s=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[r.object(j(t).package_version_id),r.object(e.pool_address),r.object(j(n).global_config_id),r.object(e.clmm_pool_address),r.object(L)];return r.moveCall({target:`${t.published_at}::${Ci}::${s}`,typeArguments:o,arguments:a}),r}async findClmmPoolForLiquidity(e){let t=null,i=!1,n=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(let r of n){if(r.coinTypeA===e.coin_type_sale&&r.coinTypeB===e.coin_type_raise&&Number(r.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(r.poolAddress);break}if(r.coinTypeA===e.coin_type_raise&&r.coinTypeB===e.coin_type_sale&&Number(r.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(r.poolAddress),i=!0;break}}return t&&(M(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||M(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?{is_reverse:i,clmmPool:null}:{is_reverse:i,clmmPool:t}}withdrawPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).package_version_id),i.object(e.pool_address),i.object(L)];return i.moveCall({target:`${t.published_at}::${Ci}::withdraw`,typeArguments:n,arguments:r}),i}updateWhitelistCapPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&i.moveCall({target:`${t.published_at}::${Ci}::add_white_listed_addresses`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(r=>i.pure.address(ze(r)))}),i.pure.u64(e.add_whites.protection_limit),i.object(L)]}),e.remove_whites&&e.remove_whites.length>0&&i.moveCall({target:`${t.published_at}::${Ci}::remove_white_listed_addresses`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",elements:e.remove_whites.map(r=>i.pure.address(ze(r)))}),i.object(L)]}),e.update_whites&&e.update_whites.forEach(r=>{i.moveCall({target:`${t.published_at}::${Ci}::update_white_listed_address`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).package_version_id),i.object(e.pool_address),i.object(r.address),i.pure.u64(r.protection_limit),i.object(L)]})}),i}creatCancelPoolPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).admin_cap_id),i.object(j(t).package_version_id),i.object(e.pool_address),i.object(L)];return i.moveCall({target:`${t.published_at}::${Ci}::cancel`,typeArguments:n,arguments:r}),i}updatePoolOwnerPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new $:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(j(i).admin_cap_id),t.object(j(i).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object(L)];return t.moveCall({target:`${i.published_at}::${Ci}::update_pool_owner`,typeArguments:n,arguments:r}),t}updatePoolDuractionPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new $:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(j(i).admin_cap_id),t.object(j(i).package_version_id),t.object(e.pool_address),t.pure.u64(e.start_time),t.pure.u64(e.purchase_duration),t.pure.u64(e.lock_duration),t.object(L)];return t.moveCall({target:`${i.published_at}::${Ci}::update_pool_duration`,typeArguments:n,arguments:r}),t}updateProtectionHardCapPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new $:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(j(i).admin_cap_id),t.object(j(i).package_version_id),t.object(e.pool_address),t.pure.u64(e.protection_hard_cap),t.object(L)];return t.moveCall({target:`${i.published_at}::${Ci}::update_protection_hard_cap`,typeArguments:n,arguments:r}),t}unlockNftPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=[e.nft_type],r=[i.object(e.lock_nft_id),i.object(L)];return i.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:n,arguments:r}),i}async isAdminCap(e){let{ido:t}=this._sdk.sdkOptions,i=`${t.package_id}_${e}_isAdminCap`,n=this.getCache(i);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:j(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(r);let o=Vr(r),s=Es(r),a=!1;return s&&o&&R(o).source_address===`${t.package_id}::config::AdminCap`&&(a=pe(s.AddressOwner)===pe(e)),this.updateCache(i,a,Q),a}async getWhiteProtectionLimit(e,t,i=!0){let n=`${e}_${t}_getWhiteProtectionLimit`,r=this._sdk.getCache(n,i);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(o&&o.data){let s=le(o);return this._sdk.updateCache(n,s.value),s.value}return}catch{return}}async getWhiteList(e,t){var n;let i={type:"address",value:t};try{let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),o=le(r);if(console.log(o),o)return(n=o==null?void 0:o.value)==null?void 0:n.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){let{ido:e}=this._sdk.sdkOptions,t=`${j(e).admin_cap_id}_getAdminAddress`,i=this.getCache(t);if(i)return i;let n=await this._sdk.ClmmSDK.fullClient.getObject({id:j(e).admin_cap_id,options:{showType:!0,showOwner:!0}}),r=Vr(n),o=Es(n);if(o&&r&&R(r).source_address===`${e.package_id}::config::AdminCap`){let s=pe(o.AddressOwner);return this.updateCache(t,s,Q),s}return""}updateCache(e,t,i=Q){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},_w=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){let{xtoken:i}=this.sdk.sdkOptions,n=`${e}_getLockUpManagerEvent`,r=this.getCache(n,t);if(r!==void 0)return r;let o,s=`${i.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:s}})).data.forEach(a=>{let c=R(zi(a)).source_address;if(c===s&&a.data&&a.data.content){let{fields:l}=a.data.content;o={...ea(a),id:l.id.id,index:l.index,type:c,xtoken_balance:l.xtoken_balance},this.updateCache(n,o,Q)}}),o}async getOwnerLockTokens(e){let{xtoken:t}=this.sdk.sdkOptions,i=[],n=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:n}});for(let o of r.data)if(R(zi(o)).source_address===n&&o.data){let s=or.buildLockToken(o.data.content),a=await this.getLockXToken(s.id);a&&(s.xtoken_amount=a.xtoken_amount),i.push(s)}return i}async getLockToken(e){var i;let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=t.data)!=null&&i.content){let n=or.buildLockToken(t.data.content),r=await this.getLockXToken(n.id);return r&&(n.xtoken_amount=r.xtoken_amount),n}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){let{xtoken:e}=this.sdk.sdkOptions,t=new $;return t.moveCall({target:`${e.published_at}::${kr}::mint_venft`,typeArguments:[],arguments:[t.object(j(e).xtoken_manager_id)]}),t}async convertPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new $,n=this.buileTokenCoinType(),r=await re.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.amount),n);return e.venft_id===void 0?i.moveCall({target:`${t.published_at}::${kr}::mint_and_convert`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),r,i.pure.u64(e.amount)]}):i.moveCall({target:`${t.published_at}::${kr}::convert`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),r,i.pure.u64(e.amount),i.object(e.venft_id)]}),i}redeemLockPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${kr}::redeem_lock`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),i.object(e.venft_id),i.pure.u64(e.amount),i.pure.u64(e.lock_day),i.object(L)]}),i}redeemPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${kr}::redeem`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(L)]}),i}redeemDividendPayload(e,t){let{xtoken_dividends:i}=this.sdk.sdkOptions,n=new $;return t.forEach(r=>{n.moveCall({target:`${i.published_at}::${Oa}::redeem`,typeArguments:[r],arguments:[n.object(j(i).dividend_manager_id),n.object(e)]})}),n}redeemDividendV2Payload(e,t,i){let{xtoken_dividends:n}=this.sdk.sdkOptions,r=new $;return t.filter(o=>i.includes(o)).length>0&&(r=this.redeemDividendXTokenPayload(e,r)),t.forEach(o=>{i.includes(o)||r.moveCall({target:`${n.published_at}::${Oa}::redeem_v2`,typeArguments:[o],arguments:[r.object(j(n).dividend_manager_id),r.object(e),r.object(L)]})}),r}redeemDividendXTokenPayload(e,t){let{xtoken_dividends:i,xtoken:n}=this.sdk.sdkOptions,{xtoken_manager_id:r,lock_manager_id:o}=j(n),{dividend_manager_id:s}=j(i);return t=t===void 0?new $:t,t.moveCall({target:`${i.published_at}::${Oa}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(r),t.object(s),t.object(e),t.object(L)]}),t}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,t="xtoken",i="XTOKEN"){return`${e}::${t}::${i}`}cancelRedeemPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${kr}::cancel_redeem_lock`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(L)]}),i}async getInitConfigs(){var s,a;let{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:s.data,r={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};n.length>0&&n.forEach(c=>{let l=c.parsedJson;l&&(r.xtoken_manager_id=l.xtoken_manager)});let o=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return o.length>0&&o.forEach(c=>{let l=c.parsedJson;l&&(r.lock_manager_id=l.lock_manager)}),r.lock_handle_id=(await this.getLockUpManager(r.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(t,r,Q),r}async getLockUpManager(e=j(this.sdk.sdkOptions.xtoken).lock_manager_id,t=!1){let i=`${e}_getLockUpManagerEvent`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=or.buildLockUpManager(le(r));return this.updateCache(i,o,Q),o}async getLockInfoHandle(e){let t=`${e}_getLockInfoHandle`,i=this.getCache(t);if(i!==void 0)return i;let n="",r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=le(r);return o&&(n=o.lock_infos.fields.id.id,this.updateCache(t,n,Q)),n}async getDividendConfigs(){var o;let{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:o.data,r={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return n.length>0&&n.forEach(s=>{let a=s.parsedJson;a&&(r.dividend_manager_id=a.manager_id,r.dividend_admin_id=a.admin_id,r.dividend_settle_id=a.settle_id,this.updateCache(t,r,Q))}),r}async getDividendManager(e=!1){let{dividend_manager_id:t}=j(this.sdk.sdkOptions.xtoken_dividends),i=`${t}_getDividendManager`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=le(r),s=or.buildDividendManager(o);return this.updateCache(i,s,Q),s}async getXcetusManager(e=!0){let{xtoken_manager_id:t}=j(this.sdk.sdkOptions.xtoken),i=`${t}_getXcetusManager`,n=this.getCache(i,e);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=le(r),s={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(i,s),s}async getVeNFTDividendInfo(e,t){try{let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=le(i);return or.buildVeNFTDividendInfo(n)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(),n=M(Si).mul(M(i.max_lock_day).sub(M(t))).mul(M(i.max_percent_numerator).sub(M(i.min_percent_numerator))).div(M(i.max_lock_day).sub(M(i.min_lock_day))),r=M(Si).mul(M(i.max_percent_numerator)).sub(n).div(M($s)).div(Si);return{amountOut:M(r).mul(M(e)).round().toString(),percent:r.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(),n=M(Si).mul(M(i.max_lock_day).sub(M(t))).mul(M(i.max_percent_numerator).sub(M(i.min_percent_numerator))).div(M(i.max_lock_day).sub(M(i.min_lock_day))),r=M(Si).mul(M(i.max_percent_numerator)).sub(n).div(M($s)).div(Si);return{amountOut:M(e).div(r).toFixed(0,J.ROUND_UP),percent:r.toString()}}async getLockXToken(e){let{lock_handle_id:t}=j(this._sdk.sdkOptions.xtoken),i=`${e}_getXTokenAmount`,n=this.getCache(i);if(n)return n;try{let r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=le(r);if(o){let s=o.value.fields.value.fields;return this.updateCache(i,s,Q),s}}catch{}}async getVeNftAmount(e,t){try{let i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=le(i);if(n){let{lock_amount:r,xtoken_amount:o}=n.value.fields.value.fields;return{lock_amount:r,xtoken_amount:o}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){let i=(await this.getDividendManager()).dividends.id,n=`${i}_${e}_getPhaseDividendInfo`,r=this._sdk.getCache(n,t);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),s=le(o),a=s.value.fields.value.fields,c=a.redeemed_num.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),l=a.bonus_types.map(g=>g.fields.name),u=a.bonus.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),m={id:Li(o),phase:s.name,settled_num:a.settled_num,register_time:a.register_time,redeemed_num:c,is_settled:a.is_settled,bonus_types:l,bonus:u,phase_end_time:""};return this.updateCache(n,m),m}catch{}}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},mw=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async addMasterLiquidity(e){var T,I;let{liquidity_stratefy:t}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,n=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),r=M(0),o=M(0),s=[],a=[],c=[],l=[],u=[];e.liquidity_bins.forEach((E,B)=>{let N=e.amounts_a[B],F=e.amounts_b[B],H=e.bins_fix_amount_a[B];r=r.add(N),o=o.add(F),s.push(N),a.push(F),c.push(ii(BigInt(E.tick_lower)).toString()),l.push(ii(BigInt(E.tick_upper)).toString()),u.push(H)});let m=[e.coinTypeA,e.coinTypeB],g=new $,k=(T=re.buildAddLiquidityFixTokenCoinInput(g,!e.fix_amount_a,r.toString(),e.slippage,e.coinTypeA,n,!1))==null?void 0:T.targetCoin,x=(I=re.buildAddLiquidityFixTokenCoinInput(g,e.fix_amount_a,o.toString(),e.slippage,e.coinTypeB,n,!1))==null?void 0:I.targetCoin;return sw(e)?g.moveCall({target:`${t.published_at}::router::increase_liquidity`,typeArguments:m,arguments:[g.object(j(t).master_manger_id),g.object(e.master_address),g.object(j(i).global_config_id),g.object(e.pool_address),k,x,g.makeMoveVec({elements:s.map(E=>g.pure.u64(E))}),g.makeMoveVec({elements:a.map(E=>g.pure.u64(E))}),g.makeMoveVec({elements:u.map(E=>g.pure.bool(E))}),g.object(L)]}):g.moveCall({target:`${t.published_at}::router::create_master_liquidity`,typeArguments:m,arguments:[g.object(j(t).master_manger_id),g.object(j(i).global_config_id),g.object(e.pool_address),k,x,g.makeMoveVec({elements:c.map(E=>g.pure.u32(Number(E)))}),g.makeMoveVec({elements:l.map(E=>g.pure.u32(Number(E)))}),g.makeMoveVec({elements:s.map(E=>g.pure.u64(E))}),g.makeMoveVec({elements:a.map(E=>g.pure.u64(E))}),g.makeMoveVec({elements:u.map(E=>g.pure.bool(E))}),g.pure.u8(e.strategy),g.pure.u32(Number(ii(BigInt(e.tick_lower)).toString())),g.pure.u32(Number(ii(BigInt(e.tick_upper)).toString())),g.object(L)]}),g}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(e,t=[]){let i=[],n=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),r=t.length>0;for(let o of n.data)if(R(o.data.type).full_address===this.buildMasterNFTType()){let s=an.buildMasterNFT(o);if(s){let a=`${s.id}_masterNFT`;this.updateCache(a,s,Q),r?t.includes(s.pool_id)&&i.push(s):i.push(s)}}return i}async getMasterNFT(e,t=!1){let i="$masterId}_masterNFT",n=this.getCache(i,t);if(n)return n;try{let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(R(r.data.type).full_address===this.buildMasterNFTType()){let o=an.buildMasterNFT(r);return o&&this.updateCache(i,o,Q),o}}catch(r){console.log(r)}}async fetchMasterPositionInfos(e){var s;let t={},{clmm_pool:i,integrate:n,simulationAccount:r}=this.sdk.ClmmSDK.sdkOptions,o=new $;return e.forEach(a=>{a.position_ids.forEach(c=>{let l=[a.coinTypeA,a.coinTypeB],u=[o.object(j(i).global_config_id),o.object(a.pool_id),o.object(c)];o.moveCall({target:`${n.published_at}::${Vi}::fetch_position_fees`,arguments:u,typeArguments:l}),o.moveCall({target:`${n.published_at}::${Vi}::fetch_position_rewards`,arguments:[...u,o.object(L)],typeArguments:l})})}),(s=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:r.address})).events)==null||s.forEach(a=>{let{parsedJson:c}=a,{position_id:l}=c,u=t[l];switch(u===void 0&&(u={position_id:l,feeOwedA:"0",feeOwedB:"0",rewarders:[]},t[l]=u),R(a.type).name){case"FetchPositionFeesEvent":u.feeOwedA=c.fee_owned_a,u.feeOwedB=c.fee_owned_b;break;case"FetchPositionRewardsEvent":u.rewarders=c.data;break}}),t}async getLiquidityStrategyConfigs(e=!1){let{package_id:t}=this._sdk.sdkOptions.liquidity_stratefy,i=`${t}_getLiquidityStrategyConfigst`,n=this.getCache(i,e);if(n!==void 0)return n;let r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,o={master_manger_id:"",master_liquidity_handle:""};if(r.length>0){for(let s of r){let a=s.parsedJson;o.master_manger_id=a.id;let c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),l=le(c);o.master_liquidity_handle=l.position_maps.fields.id.id;break}this.updateCache(i,o,Q)}return o}removeMasterLiquidity(e){let{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions,n=new $,r=[e.coinTypeA,e.coinTypeB];this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},n);let o=[n.object(j(i).master_manger_id),n.object(e.pool_address),n.object(e.master_address),n.object(j(t).global_config_id),n.makeMoveVec({elements:e.delta_liquidities.map(s=>n.pure.u128(s))}),n.makeMoveVec({elements:e.min_amounts_a.map(s=>n.pure.u64(s))}),n.makeMoveVec({elements:e.min_amounts_a.map(s=>n.pure.u64(s))}),n.object(L)];return n.moveCall({target:`${i.published_at}::${Qo}::remove_liquidity`,typeArguments:r,arguments:o}),n}closeMasterLiquidity(e){let{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions,n=new $,r=[e.coinTypeA,e.coinTypeB];return this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},n),n.moveCall({target:`${i.published_at}::${Qo}::close_master_liquidity`,typeArguments:r,arguments:[n.object(j(i).master_manger_id),n.object(e.master_address),n.object(j(t).global_config_id),n.object(e.pool_address),n.makeMoveVec({elements:e.min_amounts_a.map(o=>n.pure.u64(o))}),n.makeMoveVec({elements:e.min_amounts_a.map(o=>n.pure.u64(o))}),n.object(L)]}),n}collectFee(e,t){let{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions;t=t===void 0?new $:t;let r=[e.coinTypeA,e.coinTypeB],o=[t.object(j(n).master_manger_id),t.object(e.master_address),t.object(j(i).global_config_id),t.object(e.pool_address)];return t.moveCall({target:`${n.published_at}::${Qo}::collect_fee`,typeArguments:r,arguments:o}),t}collectReward(e,t){let{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions;return t=t===void 0?new $:t,e.collect_fee&&this.collectFee({...e},t),e.rewarder_coin_types.forEach(r=>{let o=[e.coinTypeA,e.coinTypeB,r];if(t){let s=[t.object(j(n).master_manger_id),t.object(e.master_address),t.object(j(i).global_config_id),t.object(e.pool_address),t.object(j(i).global_vault_id),t.object(L)];t.moveCall({target:`${n.published_at}::${Qo}::collect_reward`,typeArguments:o,arguments:s})}}),t}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},gw=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildCoinInput(e,t,i,n,r){let{selectedCoins:o,remainingCoins:s}=Ue.selectCoinAssetGreaterThanOrEqual(t,BigInt(n)),a=Ue.calculateTotalBalance(o);if(a<BigInt(n))throw new Error(`The amount(${a}) is Insufficient balance for ${i} , expect ${n} `);let c=a-BigInt(n),l;if(Ue.isSuiCoin(i))l=e.splitCoins(e.gas,[e.pure.u64(n)]);else{let[u,...m]=o.map(g=>g.coinObjectId);l=e.object(u),m.length>0?r?e.mergeCoins(l,[...m.map(g=>e.object(g)),r]):e.mergeCoins(l,[...m.map(g=>e.object(g))]):r&&e.mergeCoins(l,[r])}return{selectedUnusedAmount:c,coinInput:l,remainingCoins:s}}async deposit(e){var m,g;let{vaults:t,frams:i}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),o=new $,s,a;if(e.swapParams){let k=await this.handleDepositSwap(e,o,r);s=k.primaryCoinAInputs,a=k.primaryCoinBInputs}else s=(m=re.buildAddLiquidityFixTokenCoinInput(o,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,r,!1))==null?void 0:m.targetCoin,a=(g=re.buildAddLiquidityFixTokenCoinInput(o,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,r,!1))==null?void 0:g.targetCoin;let c=j(t),l=j(i),u=j(n);return o.moveCall({target:`${t.published_at}::${aw}::deposit`,typeArguments:[e.coinTypeA,e.coinTypeB,e.lp_token_type],arguments:[o.object(c.vaults_manager_id),o.object(e.vault_id),o.object(l.rewarder_manager_id),o.object(l.global_config_id),o.object(e.farming_pool),o.object(u.global_config_id),o.object(e.clmm_pool),s,a,o.pure.u64(e.amount_a),o.pure.u64(e.amount_b),o.pure.bool(e.fix_amount_a),o.object(L)]}),o}async handleDepositSwap(e,t,i){let{clmm_pool:n,integrate:r}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:o,a2b:s,route_obj:a,stakeProtocol:c}=e.swapParams,l=s?e.coinTypeA:e.coinTypeB,u=re.buildCoinForAmount(t,i,BigInt(o),l,!1),m=BigInt(u.tragetCoinAmount)-BigInt(o),g=[];if(c){let E=this.requestStakeCoin(c,t,u.targetCoin),B=re.buildCoinForAmount(t,u.remainCoins,BigInt(0),l,!1).targetCoin;g=s?[B,E]:[E,B]}else if(a){let E=re.buildCoinForAmount(t,i,BigInt(o),s?e.coinTypeA:e.coinTypeB,!1,!0),B={routers:a.routes,byAmountIn:!0,txb:t,slippage:e.slippage,inputCoin:E.targetCoin},N=`${e.aggregatorConfig.walletAddress}_getAggregatorClient`,F=this.getCache(N,!1),H;if(F!==void 0)H=F;else{let ee=new fs({url:this.sdk.ClmmSDK.sdkOptions.fullRpcUrl});H=new Ta(e.aggregatorConfig.endPoint,e.aggregatorConfig.walletAddress,ee,e.aggregatorConfig.env)}let K=await H.routerSwap(B);g=s?[E.originalSplitedCoin,K]:[K,E.originalSplitedCoin]}else{let E=re.buildCoinForAmount(t,i,0n,s?e.coinTypeB:e.coinTypeA,!1),B=Xi.getDefaultSqrtPriceLimit(s).toString();g=t.moveCall({target:`${r.published_at}::${dr}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(j(n).global_config_id),t.object(e.clmm_pool),s?u.targetCoin:E.targetCoin,s?E.targetCoin:u.targetCoin,t.pure.bool(s),t.pure.bool(!0),t.pure.u64(o),t.pure.u128(B),t.pure.bool(!1),t.object(L)]})}let k,x,T=g[0],I=g[1];if(s){let E=BigInt(e.amount_a)-m;Ue.isSuiCoin(l)?(a||t.transferObjects([T],t.pure.address(this._sdk.getVerifySenderAddress())),k=t.splitCoins(t.gas,[t.pure.u64(e.amount_a)])):E>0n?k=this.buildCoinInput(t,u.remainCoins,l,E,u.targetCoin).coinInput:k=T,x=I}else{k=T;let E=BigInt(e.amount_b)-m;Ue.isSuiCoin(l)?(a||t.transferObjects([I],t.pure.address(this._sdk.getVerifySenderAddress())),x=t.splitCoins(t.gas,[t.pure.u64(e.amount_b)])):E>0n?x=this.buildCoinInput(t,u.remainCoins,l,E,u.targetCoin).coinInput:x=I}return{primaryCoinAInputs:k,primaryCoinBInputs:x}}async remove(e){let{vaults:t,frams:i}=this.sdk.sdkOptions,{clmm_pool:n,integrate:r}=this._sdk.ClmmSDK.sdkOptions,o=new $,s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),e.lp_token_type),a=re.buildCoinForAmount(o,s,BigInt(e.lp_token_amount),e.lp_token_type,!1).targetCoin,c=j(t),l=j(i),u=j(n),m=[e.coinTypeA,e.coinTypeB,e.lp_token_type],g=o.moveCall({target:`${t.published_at}::${cw}::remove`,typeArguments:m,arguments:[o.object(c.vaults_manager_id),o.object(e.vault_id),o.object(l.rewarder_manager_id),o.object(l.global_config_id),o.object(e.farming_pool),o.object(u.global_config_id),o.object(e.clmm_pool),a,o.pure.u64(e.lp_token_amount),o.pure.u64(e.min_amount_a),o.pure.u64(e.min_amount_b),o.object(L)]}),k=g[0],x=g[1];if(e.swapParams){let{a2b:T,swap_amount:I,route_obj:E}=e.swapParams;if(E){let B={targetCoin:T?k:x,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},N={routers:E.routes,byAmountIn:!0,txb:o,slippage:e.slippage,inputCoin:B.targetCoin},F=`${e.aggregatorConfig.walletAddress}_getAggregatorClient`,H=this.getCache(F,!1),K;if(H!==void 0)K=H;else{let be=new fs({url:this.sdk.ClmmSDK.sdkOptions.fullRpcUrl});K=new Ta(e.aggregatorConfig.endPoint,e.aggregatorConfig.walletAddress,be,e.aggregatorConfig.env)}let ee=await K.routerSwap(N),me=T?[B.targetCoin,ee]:[ee,B.targetCoin];T?o.mergeCoins(me[1],[x]):o.mergeCoins(me[0],[k]),o.transferObjects([ee],o.pure.address(this._sdk.getVerifySenderAddress()))}else{let B=Xi.getDefaultSqrtPriceLimit(T).toString(),N=o.moveCall({target:`${r.published_at}::${dr}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[o.object(j(n).global_config_id),o.object(e.clmm_pool),k,x,o.pure.bool(T),o.pure.bool(!0),o.pure.u64(I),o.pure.u128(B),o.pure.bool(!0),o.object(L)]});o.transferObjects([N[0],N[1]],o.pure.address(this._sdk.getVerifySenderAddress()))}}else o.transferObjects([k,x],o.pure.address(this._sdk.getVerifySenderAddress()));return o}async getVaultList(e="all"){let{vaults:t}=this._sdk.sdkOptions,i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::vaults::CreateEvent`},e),n=i.data.map(s=>s.parsedJson.id),r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),o=[];return r.forEach(s=>{let a=mi.buildPool(s);a&&(a.stake_protocol=this.findStakeProtocol(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),o.push(a))}),i.data=o,i}findStakeProtocol(e,t){let{haedal:i,volo:n,aftermath:r}=j(this._sdk.sdkOptions.vaults),o=R(e).full_address,s=R(t).full_address;if(Ue.isSuiCoin(o)||Ue.isSuiCoin(s)){if(i){let a=R(j(i).coin_type).full_address;if(o===a||s===a)return"Haedal"}if(n){let a=R(j(n).coin_type).full_address;if(o===a||s===a)return"Volo"}if(r){let a=R(j(r).coin_type).full_address;if(o===a||s===a)return"aftermath"}}}savePoolToCache(e){let t=`${e.id}_mirrorPool`;this.updateCache(t,e,Q)}readPoolFromCache(e,t=!1){let i=`${e}_mirrorPool`;return this.getCache(i,t)}async calculateMaxAvailable(e){var x;let{integrate:t,simulationAccount:i}=this.sdk.ClmmSDK.sdkOptions,n=new $,r=Y.tickIndexToSqrtPriceX64(e.lowerTick),o=Y.tickIndexToSqrtPriceX64(e.upperTick),s=new A(e.curSqrtPrice),a=Jt.getCoinAmountFromLiquidity(new A(e.input_amount),s,r,o,!1),c=[e.coinTypeA,e.coinTypeB];n.moveCall({target:`${t.published_at}::${Vi}::calculate_swap_result`,arguments:[n.object(e.clmm_pool),n.pure.bool(!0),n.pure.bool(!0),n.pure.u64(a.coinA.toString())],typeArguments:c}),n.moveCall({target:`${t.published_at}::${Vi}::calculate_swap_result`,arguments:[n.object(e.clmm_pool),n.pure.bool(!1),n.pure.bool(!0),n.pure.u64(a.coinB.toString())],typeArguments:c});let l=(x=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address})).events)==null?void 0:x.filter(T=>R(T.type).name==="CalculatedSwapResultEvent");if(l.length===0)return null;let u=l[0].parsedJson.data,m=l[1].parsedJson.data,g=M(a.coinB.toString()).add(u.amount_out),k=M(a.coinA.toString()).add(m.amount_out);return{maxAmountB:g,maxAmountA:k}}async calculateRemoveSwapAmount(e,t){let i=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(e.curSqrtPrice)),n=e.fix_amount_a?i.ratioA:i.ratioB,r=M(e.receive_amount).mul(n),o,s;if(e.removeLiquidity){let T=Y.tickIndexToSqrtPriceX64(e.lowerTick),I=Y.tickIndexToSqrtPriceX64(e.upperTick),E=Jt.getCoinAmountFromLiquidity(new A(e.removeLiquidity),new A(e.curSqrtPrice),T,I,!1);s=e.removeLiquidity,o=e.fix_amount_a?E.coinB.toString():E.coinA.toString(),r=e.fix_amount_a?M(E.coinA.toString()):M(E.coinB.toString())}else{let T=Jt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new A(r.toFixed(0)),e.fix_amount_a,!1,.2,new A(e.curSqrtPrice));s=T.liquidityAmount.toString(),o=e.fix_amount_a?T.coinAmountB.toString():T.coinAmountA.toString()}let a=!e.fix_amount_a,c=await this.findRouters(e.clmm_pool,e.curSqrtPrice,e.fix_amount_a?e.coinTypeB:e.coinTypeA,e.fix_amount_a?e.coinTypeA:e.coinTypeB,M(o),!0,e.aggregatorConfig,e.pools,{poolID:e.clmm_pool,ticklower:e.lowerTick,tickUpper:e.upperTick,deltaLiquidity:Number(s)}),l=r.add(c.amount_out),u=M(e.receive_amount),m=u.sub(l);if((!e.removeLiquidity||e.removeLiquidity&&t)&&m.abs().greaterThan(u.mul(.01))){let T=l.lessThan(u),I,E;t?T?(I=M(s),E=t.right):(I=t.left,E=M(s)):(I=M(T?s:0),E=M(T?e.maxLiquidity:s));let B=M(I).add(E).div(2).toFixed(0);if(!t||t&&t.count<15&&I<E)return await this.calculateRemoveSwapAmount({...e,removeLiquidity:B},{left:I,right:E,count:t?t.count+1:0})}let g=c.amount_in&&c.fee_amount?new A(c.amount_in).add(new A(c.fee_amount)).toString():c.amount_in,k=c.amount_out,{is_exceed:x}=c;return{swapInAmount:g,swapOutAmount:k,liquidity:s,is_exceed:x,routeObj:c.route_obj,request_id:e.request_id,a2b:a,byamountIn:c.byAmountIn}}async calculateStakeDepositFixSui(e){let t=e.inputSuiAmount.mul(e.remainRate),i=e.inputSuiAmount.sub(e.swapSuiAmount),n=e.exchangeRate?e.exchangeRate:await this.getExchangeRateForStake(e.stakeProtocol,e.shouldRequestStake,Number(e.swapSuiAmount.toFixed(0))),r=e.swapSuiAmount.div(n).toFixed(0),o=Jt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new A(r.toString()),!e.fixCoinA,!0,0,new A(e.curSqrtPrice)),s=e.fixCoinA?o.coinAmountA.toString():o.coinAmountB.toString(),a=M(i).sub(s);return a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(t)||e.rebalanceCount>12||e.leftSuiAmount.greaterThanOrEqualTo(e.rightSuiAmount)?{swapInAmount:e.swapSuiAmount.toFixed(0),swapOutAmount:r,afterSqrtPrice:e.curSqrtPrice,fixAmountA:!e.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:e.stakeProtocol}:a.lessThan(0)?await this.calculateStakeDepositFixSui({...e,rightSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.leftSuiAmount).div(2),exchangeRate:n,rebalanceCount:e.rebalanceCount+1}):a.greaterThan(t)?await this.calculateStakeDepositFixSui({...e,leftSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.rightSuiAmount).div(2),exchangeRate:n,rebalanceCount:e.rebalanceCount+1}):null}async calculateDepositSwapAmount(e,t=!1){let i=Y.sqrtPriceX64ToTickIndex(new A(e.curSqrtPrice)),{ratioA:n,ratioB:r}=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(e.curSqrtPrice)),o=M(e.input_amount).mul(e.fix_amount_a?n:r),s=M(e.input_amount).sub(o),a=e.fix_amount_a;if(s.toFixed(0)==="0")return null;if(e.stakeProtocol){if(Ue.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||Ue.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){let H=await this.calculateStakeDepositFixSui({inputSuiAmount:M(e.input_amount),swapSuiAmount:s,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:a?new J(s.toFixed(0)):new J(0),rightSuiAmount:a?new J(e.input_amount):new J(s.toFixed(0)),stakeProtocol:e.stakeProtocol});return H?{...H,request_id:e.request_id}:null}throw Error("Only support fix sui")}let c=i<e.lowerTick||i>e.upperTick,l={clmm_pool:e.clmm_pool,curSqrtPrice:e.curSqrtPrice,a2b:a,amount_a:a?new J(e.input_amount):new J(0),amount_b:a?new J(0):new J(e.input_amount),amount_left:a?new J(s.toFixed(0)):new J(0),amount_right:a?new J(e.input_amount):new J(s.toFixed(0)),lowerTick:e.lowerTick,upperTick:e.upperTick,tick_spacing:2,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,useRoute:e.use_route,remainRate:e.remainRate?e.remainRate:.01,priceSplitPoint:e.priceSplitPoint,aggregatorConfig:e.aggregatorConfig,pools:e.pools},u=t&&i<=e.upperTick,m=u?await this.calculateRebalance(l):await this.findRouters(e.clmm_pool,e.curSqrtPrice,e.coinTypeA,e.coinTypeB,s,a,e.aggregatorConfig,e.pools),g=m.after_sqrt_price,k=Y.sqrtPriceX64ToTickIndex(new A(g)),x=k<e.lowerTick||k>e.upperTick;if(c!==x&&!u&&k<=e.upperTick){let{ratioA:H,ratioB:K}=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(g));s=M(e.input_amount).sub(M(e.input_amount).mul(e.fix_amount_a?H:K)),l.amount_left=a?new J(s.toFixed(0)):new J(0),l.amount_right=a?new J(e.input_amount):new J(s.toFixed(0)),m=await this.calculateRebalance(l),g=m.after_sqrt_price,k=Y.sqrtPriceX64ToTickIndex(new A(g))}let{ratioA:T,ratioB:I}=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(g)),E=I.div(T).sub(r.div(n)).greaterThan("0"),B=m.amount_in&&m.fee_amount?new A(m.amount_in).add(new A(m.fee_amount)).toString():m.amount_in,N=m.amount_out,{is_exceed:F}=m;if(k<e.lowerTick)E=!0;else if(k>e.upperTick)E=!1;else{let H=E===a?new A(M(e.input_amount).sub(B).toString()):new A(N),K=Jt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,H,E,!0,0,new A(g)),ee=K.coinAmountA,me=K.coinAmountB;M(e.fix_amount_a?ee.toString():me.toString()).add(B).greaterThanOrEqualTo(e.input_amount)&&(E=!E)}return{swapInAmount:B,swapOutAmount:N,afterSqrtPrice:g,is_exceed:F,fixAmountA:E,routeObj:m.route_obj,request_id:e.request_id,use_Haedal_stake:!1}}async calculateHaedalDepositSwapAmount(e){Y.sqrtPriceX64ToTickIndex(new A(e.curSqrtPrice));let{ratioA:t,ratioB:i}=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(e.curSqrtPrice)),n=M(e.input_amount).mul(e.fix_amount_a?t:i),r=M(e.input_amount).sub(n),o=e.fix_amount_a;if(r.toFixed(0)==="0")return null;if(e.stakeProtocol){if(Ue.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||Ue.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){let s=await this.calculateStakeDepositFixSui({inputSuiAmount:M(e.input_amount),swapSuiAmount:r,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:o?new J(r.toFixed(0)):new J(0),rightSuiAmount:o?new J(e.input_amount):new J(r.toFixed(0)),stakeProtocol:e.stakeProtocol});return s?{...s,request_id:e.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(e){let{clmm_pool:t,a2b:i,curSqrtPrice:n,amount_a:r,amount_b:o,lowerTick:s,upperTick:a,amount_left:c,amount_right:l,coinTypeA:u,coinTypeB:m,useRoute:g,priceSplitPoint:k,remainRate:x,aggregatorConfig:T,pools:I}=e,E=async(B,N,F)=>{let H=B.plus(N).div(2),K=await this.findRouters(t,n,u,m,H,i,T,I);if(K.amount_out==="0")return K;if(K.after_sqrt_price||(K.after_sqrt_price=e.curSqrtPrice),K.is_exceed)return N=H,E(B,N);let ee=i?r.sub(K.amount_in):r.add(K.amount_out),me=i?o.add(K.amount_out):o.sub(K.amount_in);Y.sqrtPriceX64ToTickIndex(new A(K.after_sqrt_price));let be=Jt.estLiquidityAndcoinAmountFromOneAmounts(s,a,new A(ee.toString()),!0,!0,1,new A(K.after_sqrt_price)),ie=new J(be.coinAmountA.toString()),z=new J(be.coinAmountB.toString());if(ie.toString()!==ee.toString())throw new Error("usedA does not match afterA");if(me.lessThan(z))i?B=H:N=H;else{i?N=H:B=H;let te=me.sub(z);if(me.mul(x).sub(te).greaterThanOrEqualTo(0))return{...K,remainingB:te}}return B.greaterThan(N)||N.sub(B).lessThan(10)?K:E(B,N)};return c.greaterThanOrEqualTo(l)?E(new J(0),c):E(c,l)}async findRouters(e,t,i,n,r,o,s,a,c,l=!1){var k,x;let u=`${s.walletAddress}_getAggregatorClient`,m=this.getCache(u,l),g;if(m!==void 0)g=m;else{let T=new fs({url:this.sdk.ClmmSDK.sdkOptions.fullRpcUrl});g=new Ta(s.endPoint,s.walletAddress,T,s.env)}try{let T={from:i,target:n,amount:new A(r.toFixed(0).toString()),byAmountIn:o,depth:3,providers:s.providers,liquidityChanges:c},I=await g.findRouters(T);if(((k=I==null?void 0:I.error)==null?void 0:k.code)===10001)return{...I,is_exceed:I.insufficientLiquidity};if(I!=null&&I.insufficientLiquidity)return{...I,is_exceed:I.insufficientLiquidity};if(!(I!=null&&I.routes)||((x=I==null?void 0:I.routes)==null?void 0:x.length)===0)throw Error("Aggregator no router");let E=t;return I.routes.forEach(B=>{let N=B.path.find(F=>F.id.toLowerCase()===e.toLowerCase());N&&(E=String(N.extendedDetails.afterSqrtPrice))}),{amount_in:I.amountIn.toString(),amount_out:I.amountOut.toString(),is_exceed:I.insufficientLiquidity,after_sqrt_price:E,route_obj:I,byAmountIn:!0,liquidity:c==null?void 0:c.deltaLiquidity}}catch{try{if(a){let T=await g.swapInPools({from:i,target:n,amount:new A(r.toFixed(0).toString()),byAmountIn:o,pools:a});if(T){let I=t;return T.routeData.routes.forEach(E=>{let B=E.path.find(N=>N.id.toLowerCase()===e.toLowerCase());B&&(I=String(B.extendedDetails.afterSqrtPrice))}),{amount_in:T.routeData.amountIn.toString(),amount_out:T.routeData.amountOut.toString(),is_exceed:T.isExceed,after_sqrt_price:I,route_obj:T.routeData,byAmountIn:!0,liquidity:c==null?void 0:c.deltaLiquidity}}return null}return null}catch{return null}}}async getVault(e,t=!1){let i=this.readPoolFromCache(e,t);if(i)return i;try{let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),r=mi.buildPool(n);if(r)return r.stake_protocol=this.findStakeProtocol(r.position.coinTypeA,r.position.coinTypeB),this.savePoolToCache(r),r}catch(n){console.log(n)}}async getVaultsConfigs(e=!1){let{package_id:t}=this._sdk.sdkOptions.vaults,i=`${t}_getMirrorPoolConfigs`,n=this.getCache(i,e);if(n!==void 0)return n;let r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::vaults::InitEvent`})).data,o={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(r.length>0){for(let s of r){let a=s.parsedJson;o.admin_cap_id=a.admin_cap_id,o.vaults_manager_id=a.manager_id;let c=await this._sdk.ClmmSDK.fullClient.getObject({id:o.vaults_manager_id,options:{showContent:!0}}),l=le(c);o.vaults_pool_handle=l.vault_to_pool_maps.fields.id.id;break}this.updateCache(i,o,Q)}return o}async getExchangeRateForStake(e,t,i){return e==="Haedal"?await Ia.getExchangeRateForStake(this._sdk,t,i):e==="Volo"?await Pa.getExchangeRateForStake(this._sdk,t,i):e==="aftermath"?await ja.getExchangeRateForStake(this._sdk,t,i):"0"}requestStakeCoin(e,t,i){if(e==="Haedal")return Ia.requestStakeCoin(this._sdk,t,i);if(e==="Volo")return Pa.requestStakeCoin(this._sdk,t,i);if(e==="aftermath")return ja.requestStakeCoin(this._sdk,t,i)}async requestStake(e,t,i){if(e==="Haedal")return await Ia.requestStake(this._sdk,t,i);if(e==="Volo")return await Pa.requestStake(this._sdk,t,i);if(e==="aftermath")return await ja.requestStake(this._sdk,t,i)}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},bw=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getLimitOrderTokenList(){let{limit_order:e}=this._sdk.sdkOptions,{token_list_handle:t}=j(e),{fullClient:i}=this._sdk.ClmmSDK,n=(await i.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await i.batchGetObjects(n,{showContent:!0})).map(r=>{let{fields:o}=r.data.content;return{coin_type:R(o.name.fields.name).full_address,min_trade_amount:Number(o.value)}})}async getLimitOrderPoolList(){let{limit_order:e}=this._sdk.sdkOptions,{rate_orders_indexer_handle:t}=j(e),{fullClient:i}=this._sdk.ClmmSDK,n=(await i.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await i.batchGetObjects(n,{showContent:!0})).map(r=>{let{fields:o}=r.data.content.fields.value,s={pay_coin_type:R(o.pay_coin.fields.name).full_address,target_coin_type:R(o.target_coin.fields.name).full_address,indexer_id:o.indexer_id};return this._sdk.updateCache(`${s.pay_coin_type}_${s.target_coin_type}`,s.indexer_id),s})}async getPoolIndexerId(e,t){let i=this._sdk.getCache(`${e}_${t}`);try{if(i===void 0){let n=(await this.getLimitOrderPoolList()).filter(r=>R(r.pay_coin_type).full_address===R(e).full_address&&R(r.target_coin_type).full_address===R(t).full_address);if(n.length>0)return n[0].indexer_id}}catch{}return i}async getOwnerLimitOrderList(e,t){let{fullClient:i}=this._sdk.ClmmSDK,n={data:[],hasNextPage:!1};try{let r=await this.getUserIndexerHandle(e);if(!r)return n;let o=await i.getDynamicFieldsByPage(r,t);n.hasNextPage=o.hasNextPage,n.nextCursor=o.nextCursor;let s=o.data.map(c=>c.name.value),a=(await i.batchGetObjects(s,{showContent:!0})).map(c=>ao.buildLimitOrderInfo(c)).filter(c=>c!==void 0);n.data=a}catch(r){console.log("Error in getOwnerLimitOrderList:",r)}return n}async getLimitOrderConfigs(){let{package_id:e}=this._sdk.sdkOptions.limit_order,t={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::limit_order::InitEvent`})).data;if(i.length>0){let r=i[0].parsedJson;t.rate_orders_indexer_id=r.rate_orders_indexer_id,t.user_orders_indexer_id=r.user_orders_indexer_id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rate_orders_indexer_id,options:{showContent:!0}});t.rate_orders_indexer_handle=le(o).list.fields.id.id;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.user_orders_indexer_id,options:{showContent:!0}});t.user_orders_indexer_handle=le(s).indexer.fields.id.id}let n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitFactoryEvent`})).data;if(n.length>0){let r=n[0].parsedJson;t.global_config_id=r.global_config_id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showContent:!0}}),s=le(o);t.token_list_handle=s.token_white_list.fields.id.id}return t}async getLimitOrder(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.getObject({id:e,options:{showContent:!0}});return ao.buildLimitOrderInfo(i)}catch(i){console.log("Error in getLimitOrder:",i);return}}async getLimitOrderLogs(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),n=[];return i.data.forEach(r=>{n.push(...ao.buildOrderLimitEvent(r,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),n}catch(i){return console.log("Error in getLimitOrderLogs:",i),[]}}async getLimitOrderClaimLogs(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),n=[];return i.data.forEach(r=>{n.push(...ao.buildOrderLimitEvent(r,["ClaimTargetCoinEvent"]))}),n}catch(i){return console.log("Error in getLimitOrderLogs:",i),[]}}buildRateOrdersIndexerType(e){let{limit_order:t}=this._sdk.sdkOptions;return Ps(`${t.package_id}::limit_order::RateOrdersIndexer`,[e.pay_coin_type,e.target_coin_type])}async placeLimitOrder(e){let{limit_order:t}=this._sdk.sdkOptions,{user_orders_indexer_id:i,global_config_id:n,rate_orders_indexer_id:r}=j(t),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.pay_coin_type),s=new $,a=await this.getPoolIndexerId(e.pay_coin_type,e.target_coin_type),c=re.buildCoinForAmount(s,o,BigInt(e.pay_coin_amount),e.pay_coin_type,!1,!0);return s.moveCall({target:`${t.published_at}::limit_order::${a===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[s.object(n),a===void 0?s.object(r):s.object(a),s.object(i),c.targetCoin,s.pure.u128(ao.priceToRate(e.price,e.pay_decimal,e.target_decimal)),s.pure.u64(e.expired_ts),s.object(L)]}),s}async claimTargetCoin(e){let{limit_order:t}=this._sdk.sdkOptions,{global_config_id:i}=j(t),n=new $;return n.moveCall({target:`${t.published_at}::limit_order::claim_target_coin`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[n.object(i),n.object(e.order_id)]}),n}async cancelOrdersByOwner(e){let{limit_order:t}=this._sdk.sdkOptions,{global_config_id:i}=j(t),n=new $,r={};for(let o=0;o<e.length;o++){let s=e[o],a=await this.getPoolIndexerId(s.pay_coin_type,s.target_coin_type);if(a===void 0)throw Error("not found indexerId");r[s.order_id]=a}return e.forEach(o=>{n.moveCall({target:`${t.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[o.pay_coin_type,o.target_coin_type],arguments:[n.object(i),n.object(r[o.order_id]),n.object(o.order_id),n.object(L)]})}),n}async getUserIndexerHandle(e){let{fullClient:t}=this._sdk.ClmmSDK,{limit_order:i}=this._sdk.sdkOptions,n=this.getUserIndexerHandleByCache(e);if(n===void 0){let r=new $;r.moveCall({target:`${i.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[r.pure.address(e),r.object(j(i).user_orders_indexer_id)]}),n=(await t.devInspectTransactionBlock({transactionBlock:r,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,n&&this.saveUserIndexerHandleByCache(e,n)}return n}getUserIndexerHandleByCache(e){let t=`getUserIndexerHandleByCache_${e}`;return this.getCache(t)}saveUserIndexerHandleByCache(e,t){let i=`getUserIndexerHandleByCache_${e}`;return this.updateCache(i,t)}updateCache(e,t,i=Q){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},ww=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){let{package_id:t}=this._sdk.sdkOptions.frams,i={data:[],hasNextPage:!1};try{let n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::pool::CreatePoolEvent`},e),r=n.data.map(o=>o.parsedJson.pool_id);if(i.hasNextPage=n.hasNextPage,i.nextCursor=n.nextCursor,r.length>0){let o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0});for(let s of o){let a=Yo.buildFramsPool(s);a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(c=>c.reward_coin)),i.data.push(a),this.updateCache(a.id,a))}}}catch(n){console.log("getFramsPoolList error ",n)}return i}async getFramsPool(e,t=!1){let i=this.getCache(e,t);if(i)return i;let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),r=Yo.buildFramsPool(n.data);return r&&(r.rewarders=await this.getFramsRewarderConfig(r.clmm_pool_id,r.rewarders.map(o=>o.reward_coin)),this.updateCache(r.id,r)),r}async getFramsRewarderConfig(e,t,i=!1){let{frams:n}=this._sdk.sdkOptions,r=[];for(let o of t){let s=`getFramsRewarderConfig_${o}_${e}`,a=this.getCache(s,i);if(a)r.push(a);else try{let c=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:j(n).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:hf(o)}}),{fields:l}=c.data.content.fields.value.fields.value,u={reward_coin:o,last_reward_time:l.last_reward_time,emission_per_second:l.emission_per_second,total_allocate_point:l.total_allocate_point,allocate_point:""},m=l.pools.fields.id.id,g=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:m,name:{type:"0x2::object::ID",value:e}}),{allocate_point:k}=g.data.content.fields.value.fields.value.fields;u.allocate_point=k,this.updateCache(s,u),r.push(u)}catch(c){console.log(c)}}return r}async getOwnedFramsPositionNFTList(e,t=[],i=!1,n="all"){let{package_id:r}=this._sdk.sdkOptions.frams,o={data:[],hasNextPage:!1},s={},a=[],c=t.length>0,l=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${r}::pool::WrappedPositionNFT`},options:{showContent:!0}},n);o.hasNextPage=l.hasNextPage,o.nextCursor=l.nextCursor;for(let u of l.data){let m=Yo.buildFramsPositionNFT(u);if(m)if(c){if(t.includes(m.pool_id)){a.push(m);let g=s[m.pool_id];g?g.push(m):g=[m],s[m.pool_id]=g}}else a.push(m)}if(i&&a.length>0){let u=await this.calculateFarmingRewards(a.map(m=>({pool_id:m.pool_id,position_nft_id:m.id,clmm_pool_id:m.clmm_pool_id})));c?(s={},a.forEach(m=>{u[m.id]&&(m.rewards=u[m.id]);let g=s[m.pool_id];g?g.push(m):g=[m],s[m.pool_id]=g})):a.forEach(m=>{u[m.id]&&(m.rewards=u[m.id])})}return c?s:(o.data=a,o)}async getFramsPositionNFT(e,t=!0){let i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),n=Yo.buildFramsPositionNFT(i);if(t&&n){let r=await this.calculateFarmingRewards([{pool_id:n.pool_id,position_nft_id:n.id}]);r[n.id]&&(n.rewards=r[n.id])}return n}async calculateFarmingRewards(e){var s,a;let{frams:t}=this._sdk.sdkOptions,i=new $,{rewarder_manager_id:n,global_config_id:r}=j(t);e.forEach(c=>{i.moveCall({target:`${t.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[i.object(r),i.object(n),i.object(c.pool_id),i.pure.address(c.position_nft_id),i.object(L)]})});let o={};try{let c=(a=(s=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:this.sdk.ClmmSDK.senderAddress}))==null?void 0:s.events)==null?void 0:a.filter(l=>R(l.type).name==="AccumulatedPositionRewardsEvent");if(c&&c.length>0)for(let l=0;l<c.length;l+=1){let{parsedJson:u}=c[l],m=[];u.rewards.contents.forEach(g=>{m.push({rewarder_type:R(g.key.name).full_address,rewarder_amount:g.value})}),o[u.wrapped_position_id]=m}}catch(c){console.log(c)}return o}depositPayload(e,t){let{frams:i}=this.sdk.sdkOptions;t=t||new $;let{global_config_id:n,rewarder_manager_id:r}=j(i);return t.moveCall({target:`${i.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(n),t.object(r),t.object(e.pool_id),t.object(e.clmm_position_id),t.object(L)]}),t}async withdrawPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{global_config_id:n,rewarder_manager_id:r}=j(i);return t=t||new $,t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},t),t.moveCall({target:`${i.published_at}::router::withdraw`,typeArguments:[],arguments:[t.object(n),t.object(r),t.object(e.pool_id),t.object(e.position_nft_id),t.object(L)]}),t}async batchHarvestPayload(e,t){t=t||new $;for(let i of e)await this.harvestPayload(i,t);return t}async batchHarvestAndClmmFeePayload(e,t){if(!Xt(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");let i=new $,n={},r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(let c of t)this.collectClmmFeeInternal(c,n,i,r),this.collectClmmRewardInternal(c,n,i,r);let{frams:o}=this.sdk.sdkOptions,{global_config_id:s,rewarder_manager_id:a}=j(o);for(let c of e){let l=await this.getFramsPool(c.pool_id,!1);if(l===void 0)throw Error(`not found ${c.pool_id}`);c.collect_fee&&this.collectFeeInternal(c,n,i,r),c.clmm_rewarder_types.length>0&&await this.collectRewardInternal(c,n,i,r),c.collect_frams_rewarder&&l.rewarders.forEach(u=>{i&&i.moveCall({target:`${o.published_at}::router::harvest`,typeArguments:[u.reward_coin],arguments:[i.object(s),i.object(a),i.object(c.pool_id),i.object(c.position_nft_id),i.object(L)]})})}return Object.keys(n).forEach(c=>{let l=n[c],{originalSplitedCoin:u}=l;(l.isMintZeroCoin||u&&(u==null?void 0:u.$kind)==="GasCoin")&&re.buildTransferCoin(this._sdk.ClmmSDK,i,l.targetCoin,c,this._sdk.ClmmSDK.senderAddress)}),i}async collectRewardInternal(e,t,i,n){let r=[];e.clmm_rewarder_types.forEach(o=>{let s=Dt(o),a=t[o];a===void 0&&(a=re.buildCoinForAmount(i,n,BigInt(0),s,!1),t[s]=a),r.push(a.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,i)}collectFeeInternal(e,t,i,n){let{frams:r}=this.sdk.sdkOptions,{global_config_id:o}=j(r),{clmm_pool:s,integrate:a}=this.sdk.ClmmSDK.sdkOptions,c=j(s),l=Dt(e.coinTypeA),u=Dt(e.coinTypeB),m=t[l];m===void 0&&(m=re.buildCoinForAmount(i,n,BigInt(0),l,!1),t[l]=m);let g=t[u];g===void 0&&(g=re.buildCoinForAmount(i,n,BigInt(0),u,!1),t[u]=g),i.moveCall({target:`${a.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[i.object(o),i.object(c.global_config_id),i.object(e.clmm_pool_id),i.object(e.position_nft_id),m.targetCoin,g.targetCoin]})}collectClmmRewardInternal(e,t,i,n){let r=[];e.rewarder_coin_types.forEach(o=>{let s=Dt(o),a=t[o];a===void 0&&(a=re.buildCoinForAmount(i,n,BigInt(0),s,!1),t[s]=a),r.push(a.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,i,r)}collectClmmFeeInternal(e,t,i,n){if(e.collect_fee){let r=Dt(e.coinTypeA),o=Dt(e.coinTypeB),s=t[r];s===void 0&&(s=re.buildCoinForAmount(i,n,BigInt(0),r,!1),t[r]=s);let a=t[o];a===void 0&&(a=re.buildCoinForAmount(i,n,BigInt(0),o,!1),t[o]=a),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},i,s.targetCoin,a.targetCoin)}}async harvestPayload(e,t){let{frams:i}=this.sdk.sdkOptions;t=t||new $;let n=await this.getFramsPool(e.pool_id,!1);if(n===void 0)throw Error(`not found ${e.pool_id}`);let{global_config_id:r,rewarder_manager_id:o}=j(i);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){let s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,s)}return n.rewarders.forEach(s=>{t&&t.moveCall({target:`${i.published_at}::router::harvest`,typeArguments:[s.reward_coin],arguments:[t.object(r),t.object(o),t.object(e.pool_id),t.object(e.position_nft_id),t.object(L)]})}),t}async claimFeeAndClmmReward(e){let t=new $,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,i),t}async openPositionAddLiquidityStakePaylod(e){let t=new $,{clmm_pool:i,integrate:n}=this._sdk.ClmmSDK.sdkOptions,r=j(i),o=t.moveCall({target:`${i.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(e.clmm_pool_id),t.pure.u32(Number(ii(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(ii(BigInt(e.tick_upper)).toString()))]}),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=re.buildCoinForAmount(t,s,BigInt(e.amount_a),e.coinTypeA,!1),c=re.buildCoinForAmount(t,s,BigInt(e.amount_b),e.coinTypeB,!1);t.moveCall({target:`${n.published_at}::${Mn}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(e.clmm_pool_id),o,a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(L)]});let{frams:l}=this.sdk.sdkOptions,{global_config_id:u,rewarder_manager_id:m}=j(l);return t.moveCall({target:`${l.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(u),t.object(m),t.object(e.pool_id),o,t.object(L)]}),t}async addLiquidityPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=j(i),o=j(n),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=re.buildCoinForAmount(t,s,BigInt(e.amount_limit_a),e.coinTypeA,!1),c=re.buildCoinForAmount(t,s,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){let l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,l,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${i.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_limit_a),t.pure.u64(e.amount_limit_b),t.pure.u128(e.delta_liquidity),t.object(L)]}),t}async addLiquidityFixCoinPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=j(i),o=j(n),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=re.buildCoinForAmount(t,s,BigInt(e.amount_a),e.coinTypeA,!1),c=re.buildCoinForAmount(t,s,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){let l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,l,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${i.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(L)]}),t}async removeLiquidityPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=j(i),o=j(n);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.clmm_rewarder_types.length>0){let s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},t,s)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");t.moveCall({target:`${i.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(L)]})}else t.moveCall({target:`${i.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(L)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return t}async buildCollectRewarderAndFeeParams(e,t,i,n,r){n===void 0&&(n=[...i]),r===void 0&&(r=[...i]);let o=Dt(e.coinTypeA),s=Dt(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},t);let a=[];return e.clmm_rewarder_types.forEach(c=>{switch(Dt(c)){case o:a.push(re.buildCoinForAmount(t,n,BigInt(0),c,!1).targetCoin);break;case s:a.push(re.buildCoinForAmount(t,r,BigInt(0),c,!1).targetCoin);break;default:a.push(re.buildCoinForAmount(t,i,BigInt(0),c,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:a},t),t}collectFeePayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=j(i),o=j(n);return t.moveCall({target:`${i.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id)]}),t}async collectClmmRewardPayload(e,t){var a;let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=e.reward_coins;if(e.clmm_rewarder_types.length>0&&r===void 0){r=[];let c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(l=>{r.push(re.buildCoinForAmount(t,c,BigInt(0),l,!1).targetCoin)})}let o=j(i),s=j(n);return(a=e.clmm_rewarder_types)==null||a.forEach((c,l)=>{t&&t.moveCall({target:`${i.published_at}::router::collect_clmm_reward`,typeArguments:[c,e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(s.global_vault_id),r[l],t.object(L)]})}),t}async collectClmmRewardNoSendPayload(e,t){var c;let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n,integrate:r}=this.sdk.ClmmSDK.sdkOptions,o=e.reward_coins;if(e.clmm_rewarder_types.length>0&&o===void 0){o=[];let l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(u=>{o.push(re.buildCoinForAmount(t,l,BigInt(0),u,!1).targetCoin)})}let s=j(i),a=j(n);return(c=e.clmm_rewarder_types)==null||c.forEach((l,u)=>{t&&t.moveCall({target:`${r.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[l,e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(a.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(a.global_vault_id),o[u],t.object(L)]})}),t}async getFrarmsConfigs(){let{package_id:e}=this._sdk.sdkOptions.frams,t={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(i.length>0){let r=i[0].parsedJson;t.global_config_id=r.global_config_id,t.admin_cap_id=r.admin_cap_id}let n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(n.length>0){let r=n[0].parsedJson;t.rewarder_manager_id=r.id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rewarder_manager_id,options:{showContent:!0}});t.rewarder_manager_handle=o.data.content.fields.rewarders.fields.id.id}return t}updateCache(e,t,i=Q){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},td=class{static buildDcaOrderList(e){let{parsedJson:t}=e;if(t&&t.order_id)return{created_at:t.created_at,cycle_count:t.cycle_count,cycle_frequency:t.cycle_frequency,in_coin:R(t.in_coin.name).full_address,in_deposited:t.in_deposited,order_id:t.order_id,out_coin:R(t.out_coin.name).full_address,per_cycle_in_amount_limit:t.per_cycle_in_amount_limit,per_cycle_max_out_amount:t.per_cycle_max_out_amount,per_cycle_min_out_amount:t.per_cycle_min_out_amount}}static buildDcaGlobalConfig(e){if(e&&e.id.id)return{min_cycle_count:e.min_cycle_count,min_cycle_frequency:e.min_cycle_frequency,whitelist_mode:e.whitelist_mode}}static buildOrderHistoryList(e,t){let{events:i}=e,n=[];return i&&i.forEach(r=>{let o=R(r.type).name;if(t.includes(o)){let s={digest:e.digest,type:o,timestampMs:e.timestampMs,parsedJson:r.parsedJson};n.push(s)}}),n}},yw=class{constructor(e){X(this,"_sdk");X(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async dcaOpenOrderPayload(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i,indexer_id:n}=j(t),r=new $,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.in_coin_type),s=re.buildCoinForAmount(r,o,BigInt(e.in_coin_amount),e.in_coin_type,!1,!0);return r.moveCall({target:`${t.published_at}::order::open_order`,typeArguments:[e.in_coin_type,e.out_coin_type],arguments:[r.object(i),s.targetCoin,r.pure.u64(e.cycle_frequency),r.pure.u64(e.cycle_count),r.pure.u64(e.per_cycle_min_out_amount),r.pure.u64(e.per_cycle_max_out_amount),r.pure.u64(e.per_cycle_in_amount_limit),r.pure.u64(e.fee_rate),r.pure.u64(e.timestamp),r.pure.string(e.signature),r.object(L),r.object(n)]}),r}dcaCloseOrderPayload(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i,indexer_id:n}=j(t),r=new $;return e.forEach(o=>{let s=r.moveCall({target:`${t.published_at}::order::cancle_order`,typeArguments:[o.in_coin_type,o.out_coin_type],arguments:[r.object(i),r.object(o.order_id),r.object(n),r.object(L)]});r.transferObjects([s[0],s[1]],r.pure.address(this._sdk.getVerifySenderAddress()))}),r}async getDcaOrders(e){let t={data:[],hasNextPage:!1},{dca:i}=this._sdk.sdkOptions,{user_indexer_id:n}=j(i);try{let r,o=this.getCache(`${e}_dca_table_id`);if(o)r=o;else{let u=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}});r=le(u).value.fields.id.id,this.updateCache(`${e}_dca_table_id`,r)}let s=null,a=50,c=[];for(;;){let u=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:r,cursor:s,limit:a});if(u.data.forEach(m=>{c.push(m.name.value)}),s=u.nextCursor,s===null||u.data.length<a)break}let l=[];for(let u=0;u<c.length;u++){let m=await this._sdk.ClmmSDK.fullClient.getObject({id:c[u],options:{showType:!0,showContent:!0}}),g=R(m.data.type),k=g.type_arguments[0],x=g.type_arguments[1];l.push({in_coin_type:k,out_coin_type:x,...m.data.content.fields,id:m.data.content.fields.id.id,version:m.data.version})}return t.data=l,t}catch{return t}}async withdraw(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i}=j(t),n=new $,r=n.moveCall({target:`${t.published_at}::order::withdraw`,typeArguments:[e.in_coin_type,e.out_coin_type],arguments:[n.object(i),n.object(e.order_id),n.object(L)]});return n.transferObjects([r[0]],n.pure.address(this._sdk.getVerifySenderAddress())),n}async getDcaOrdersMakeDeal(e){let t=this.getCache(`${e}_tx`),i=[],n=null,r=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.queryTransactionBlocks({filter:{ChangedObject:e},limit:r});if(a.data.forEach(c=>{i.push(c.digest)}),n=a.nextCursor,n===null||a.data.length<r)break}if(this.updateCache(`${e}_tx`,i),t&&t.length===i.length)return this.getCache(`${e}_history_list`);let o=await this._sdk.ClmmSDK.fullClient.multiGetTransactionBlocks({digests:i,options:{showInput:!0,showEffects:!0,showEvents:!0}}),s=[];return o.forEach(a=>{s.push(...td.buildOrderHistoryList(a,["MakeDealEvent"]))}),this.updateCache(`${e}_history_list`,s),s}async getDcaCoinWhiteList(e){let{in_coin_whitelist_id:t,out_coin_whitelist_id:i}=j(this._sdk.sdkOptions.dca),n=[],r=[];if(e===1||e===3){let o=null,s=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:t,cursor:o,limit:s});if(a.data.forEach(c=>{n.push(R(c.name.value.name).full_address)}),o=a.nextCursor,o===null||a.data.length<s)break}}if(e===2||e===3){let o=null,s=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:i,cursor:o,limit:s});if(a.data.forEach(c=>{r.push(R(c.name.value.name).full_address)}),o=a.nextCursor,o===null||a.data.length<s)break}}return{inCoinList:n,outCoinList:r}}async getDcaGlobalConfig(){let{global_config_id:e}=j(this._sdk.sdkOptions.dca),t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});return td.buildDcaGlobalConfig(t.data.content.fields)}async getDcaConfigs(){var r;let{package_id:e}=this._sdk.sdkOptions.dca,t={admin_cap_id:"",global_config_id:"",indexer_id:"",user_indexer_id:"",in_coin_whitelist_id:"",out_coin_whitelist_id:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`})).data,n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::order::InitEvent`})).data;if(i&&i.length>0){let{parsedJson:o}=i[0];t.admin_cap_id=o.admin_cap_id,t.global_config_id=o.global_config_id}if(n&&n.length>0){let{parsedJson:o}=n[0];t.indexer_id=o.indexer_id;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:o.indexer_id,options:{showType:!0,showContent:!0}});t.user_indexer_id=(r=s.data)==null?void 0:r.content.fields.user_orders.fields.id.id}if(t.global_config_id){let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showType:!0,showContent:!0}});t.in_coin_whitelist_id=o.data.content.fields.in_coin_whitelist.fields.id.id,t.out_coin_whitelist_id=o.data.content.fields.out_coin_whitelist.fields.id.id}return t}updateCache(e,t,i=Q){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},vw=class{constructor(e,t){X(this,"_cache",{});X(this,"_sdkOptions");X(this,"_launchpad");X(this,"_ido");X(this,"_xcetusModule");X(this,"_xtokenModule");X(this,"_boosterModule");X(this,"_makerModule");X(this,"_clmmSDK");X(this,"_liquidityStrategy");X(this,"_vaults");X(this,"_limitOrder");X(this,"_farmsModule");X(this,"_dcaModule");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new Y1(this),this._ido=new pw(this),this._xcetusModule=new tw(this),this._xtokenModule=new _w(this),this._boosterModule=new Z1(this),this._makerModule=new ew(this),this._vaults=new gw(this),this._limitOrder=new bw(this),this._farmsModule=new ww(this),this._dcaModule=new yw(this),this._liquidityStrategy=new mw(this),Kc(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}get Dca(){return this._dcaModule}getVerifySenderAddress(){let{senderAddress:e}=this.ClmmSDK;if(e.length===0||!Bi(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,t,i=Q){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},ty=vw;export{fs as $,Zw as A,Pw as B,db as C,Ho as D,Go as E,vw as F,Jt as G,Dw as H,Lw as I,Mw as J,wn as K,rc as L,mr as M,Wf as N,ts as O,bh as P,el as Q,mi as R,mh as S,Y as T,md as U,Hw as V,Xw as W,Jw as X,re as Y,$r as Z,Yo as _,Kw as a,$ as a0,Dt as a1,Ta as a2,ey as a3,Fw as a4,Ww as a5,rr as a6,j as a7,ao as a8,zw as a9,Vw as aa,qg as ab,ze as ac,Bi as ad,pe as ae,de as af,zo as ag,gs as b,Sw as c,Hi as d,R as e,Gw as f,ms as g,ty as h,Ow as i,Uw as j,kh as k,Nw as l,A as m,Tw as n,jw as o,M as p,Rw as q,$w as r,Yw as s,qw as t,xw as u,Iw as v,gd as w,Ew as x,Qw as y,Bw as z};
