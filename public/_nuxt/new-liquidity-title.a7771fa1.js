import{a as Q,r as b,L as te,m as P,A as B,e as X,o as v,f as A,h as l,x as _,i as z,w as W,y as H,S as ce,G as E,K as de,q as me,B as fe,j as J,z as Pe,a2 as _e,a3 as Se,C as Ce,c as K,I as $e,u as x,O as Ie,a4 as Te,p as pe,k as ve,N as se,P as we,s as Ne,b as Ae}from"./entry.77c88c5a.js";import"./index.c3f9a5df.js";/* empty css              */import{d as oe,a as F,z as ge,c as ie,y as ue,e as Me}from"./common.84762dba.js";import"./decimal.a2826370.js";import{u as Y,b as be,a as ae}from"./index.e09e6140.js";import{D as N}from"./decimal.765d8738.js";import{i as ee}from"./import-icon.de3e6c66.js";import{_ as ke}from"./token-warning.35edd8d4.js";/* empty css              */import{u as Oe,b as ne}from"./index.56bf34fb.js";import{u as je}from"./useDebounceFunction.bf6b8467.js";/* empty css              */import{_ as Be}from"./swap-setting.71bf9c26.js";const Re=Q({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,t){const u=b(""),f=b("");let k=b(""),c=b("");const a=te(),g=Y(),d=P(()=>g),M=P(()=>d.value.chainName?be(d.value.chainName):{}),S=()=>{var o,r,y,j;if(!(Number.isNaN(u.value)||Number(u.value)!==0&&!u.value||!e.poolInfo.tickSpacing))try{const{TickUtil:p,TickMath:R,getNearestTickByTick:I}=M.value,$=R.priceToTickIndex(new N(u.value.toString()),(o=m.value.token_a)==null?void 0:o.decimals,(r=m.value.token_b)==null?void 0:r.decimals),T=I($,Number(m.value.tickSpacing),!0);let i;if(i=R.tickIndexToPrice(T+Number(m.value.tickSpacing),(y=m.value.token_a)==null?void 0:y.decimals,(j=m.value.token_b)==null?void 0:j.decimals),e.pType=="Min"&&Number(i.toString())>Number(c.value.toString()))return;const s=i.toString();t.emit("onInput",s)}catch{t.emit("onInput","")}},V=()=>{var o,r,y,j;try{if(Number.isNaN(u.value)||!u.value||!e.poolInfo.tickSpacing)return;const{TickUtil:p,TickMath:R,getNearestTickByTick:I}=M.value,$=R.priceToTickIndex(new N(u.value.toString()),(o=m.value.token_a)==null?void 0:o.decimals,(r=m.value.token_b)==null?void 0:r.decimals),T=I($,Number(m.value.tickSpacing),!0);let i;i=R.tickIndexToPrice(T-Number(m.value.tickSpacing),(y=m.value.token_a)==null?void 0:y.decimals,(j=m.value.token_b)==null?void 0:j.decimals);const s=i.toString();if(e.pType=="Max"&&Number(i)<Number(k.value))return;t.emit("onInput",s)}catch{t.emit("onInput","")}},C=o=>{let r=o.toString().replace(/[^\d.]/g,"");const y=/^\d+(\.\d+)?$/;r.split(".").length>2&&!y.exec(r)&&(r=r.substr(0,r.length-1)),f.value=String(r)},h=o=>{if(o&&o!=="0"&&o!=="âˆž"){u.value=o;const y=o.toString().split(".")[1];f.value=o!=="0"&&o!=="âˆž"&&y&&y.length>6?oe(o.toString(),6):o.toString()}else(o=="0"||o=="âˆž"||a.query.action)&&(f.value=o)},O=o=>{var I,$,T,i;const{TickUtil:r,TickMath:y,getNearestTickByTick:j}=M.value,p=o.target.value;let R;if(p==="0"){R=-443636,t.emit("onInput","0");return}else if(p!=="0"&&p){const s=y.priceToTickIndex(new N(p),(I=m.value.token_a)==null?void 0:I.decimals,($=m.value.token_b)==null?void 0:$.decimals);R=j(Number(s),Number(m.value.tickSpacing),!0);const q=y.tickIndexToPrice(new N(R),(T=m.value.token_a)==null?void 0:T.decimals,(i=m.value.token_b)==null?void 0:i.decimals);h(q.toString()),t.emit("onInput",q.toString())}else t.emit("onInput")};B(()=>e.defaultMinPrice,(o,r)=>{o!==r&&(k.value=e.defaultMinPrice)},{immediate:!0}),B(()=>e.defaultMaxPrice,(o,r)=>{o!==r&&(c.value=e.defaultMaxPrice)},{immediate:!0}),B(()=>[e.inputValue,a.query.action],([o])=>{h(o)},{immediate:!0});const m=b({});B(()=>e.poolInfo,(o,r)=>{o&&(m.value=o)},{immediate:!0});const n=b("");return B(()=>e.currentPriceTab,o=>{n.value=o},{immediate:!0}),{addPrice:S,minusPrice:V,oValue:f,changeValue:C,isDisabled:n,route:a,onBlur:O}}});const qe={class:"set-price-item"},Le={class:"title"},Ve={class:"input-box"},De={key:0,class:"minus-btn"},Fe={key:1,class:"plus-btn"};function Ue(e,t,u,f,k,c){const a=de,g=ce;return v(),A("div",qe,[l("div",Le,_(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),z(g,{loading:e.loading,active:"",paragraph:!1},{default:W(()=>[l("div",Ve,[e.currentPriceTab!=="full range"?(v(),A("a",De,[l("div",{class:H(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),onClick:t[0]||(t[0]=(...d)=>e.minusPrice&&e.minusPrice(...d))},"-",2)])):E("",!0),z(a,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=d=>e.oValue=d),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:t[2]||(t[2]=d=>e.changeValue(d.target.value)),onBlur:t[3]||(t[3]=d=>e.onBlur(d))},null,8,["value","disabled"]),e.currentPriceTab!=="full range"?(v(),A("a",Fe,[l("div",{class:H(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:t[4]||(t[4]=(...d)=>e.addPrice&&e.addPrice(...d))},"+",2)])):E("",!0)])]),_:1},8,["loading"]),l("p",{class:H(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},_(e.toCoin&&e.toCoin.symbol)+" per "+_(e.fromCoin&&e.fromCoin.symbol),3)])}const ye=X(Re,[["render",Ue],["__scopeId","data-v-c24339c0"]]),Ee=Q({components:{NewLiquiditySetPrice:ye},props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,t){let u=b(""),f=b(""),k=b(),c=b(!1),a=b(!1);const g=b({}),d=Y(),M=P(()=>d);me(()=>{u.value=e.min,f.value=e.max}),B(()=>e.currentPriceTab,(n,o)=>{n!==o&&(k.value=e.currentPriceTab)},{immediate:!0}),B(()=>e.min,(n,o)=>{n!==o&&(u.value=n)}),B(()=>e.max,(n,o)=>{n!==o&&(f.value=n)}),B(()=>e.poolInfo,(n,o)=>{n&&(g.value=n)},{immediate:!0});const S=b("");B(()=>e.intPrice,n=>{S.value=n},{immediate:!0,deep:!0});const V=n=>{u.value=n,t.emit("onChangeMinPrice",n)},C=n=>{f.value=n,t.emit("onChangeMaxPrice",n)};B(c,(n,o)=>{n!==o&&t.emit("onChangeFullRange",n)});const h=()=>{u.value=e.defaultMinPrice,f.value=e.defaultMaxPrice,a.value=!1,c.value=!1},O=()=>{a.value=!1,u.value="0",f.value="âˆž"};return B(c,(n,o)=>{n!==o&&t.emit("onChangeFullRange",n)}),{store:M,changeMinPrice:V,changeMaxPrice:C,importIcon:ee,resetPrice:h,changeShowUnderStand:()=>{c.value=!c.value,c.value?a.value=!0:h(),a.value||(u.value=e.defaultMinPrice,f.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:u,maxPrice:f,understand:O,isRadio:c,initPirce:S}}});const ze={class:"set-price"},We={class:"card-container"},He={key:0,class:"card"},Ge={key:1,class:"understand"},Ke={class:"left"},Je={class:"right"};function Qe(e,t,u,f,k,c){const a=ye,g=fe;return v(),A("div",ze,[l("div",We,[e.showUnderStand?(v(),A("div",Ge,[l("div",Ke,[l("p",null,_(e.$t("common.lowerEfficiency")),1),l("p",null,_(e.$t("common.lowerEfficiencyTips")),1)]),l("div",Je,[z(g,{onClick:e.understand},{default:W(()=>[J(_(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(v(),A("div",He,[z(a,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=d=>e.minPrice=d),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),z(a,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=d=>e.maxPrice=d),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"])]))])])}const Kt=X(Ee,[["render",Qe],["__scopeId","data-v-76a94eb9"]]),Xe=Q({components:{TokenWarning:ke},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,t){const{t:u,locale:f}=Pe(),k=Y(),c=P(()=>k),a=P(()=>new N(Number(e.balance)).div(2)),g=_e(Se,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function d(){this.$emit("onSelect")}const M=je(i=>{t.emit("onInput",i),t.emit("onInputLoading",!1)},500),S=b(""),V=i=>{const s=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(p==null?void 0:p.value)&&(p==null?void 0:p.value)}})?).*$`),q=i.target.value.replace(/,/g,"").replace(s,"$1");t.emit("onInputLoading",!0),M(q)},C=i=>{var re;const s=i.target.selectionStart,q=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(p==null?void 0:p.value)&&(p==null?void 0:p.value)}})?).*$`);console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.target.value:",i.target.value);let w=i.target.value.replace(/,/g,"").replace(q,"$1");console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ value:",w);let L=w.includes(".")&&String(F(w))==="0"?w:String(F(w));const D=ue(i.target.value),U=ue(L),Z=U.length-D.length;let G=s+Z;if((re=i==null?void 0:i.inputType)!=null&&re.includes("delete")&&Z>0&&s===U[U.length-1]){const he=i.target.value.slice(0,s-1)+i.target.value.slice(s);L=String(F(he.replace(/,/g,""))),G=G-2}console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ fValue:",L),S.value=L,setTimeout(()=>{i.target.setSelectionRange(G<0?0:G,G<0?0:G)},0)};B(()=>e.inputValue,i=>{console.log("ðŸš€ ~ file: assets-card.vue:287 ~ setup ~ newValue:",i);const s=i.includes(".")&&String(F(i))==="0"?i:String(F(i));console.log("ðŸš€ ~ file: assets-card.vue:287 ~ setup ~ fValue:",s),console.log("ðŸš€ ~ file: assets-card.vue:287 ~ setup ~ addCommom(newValue):",F(i)),s!==S.value&&(S.value=s)},{immediate:!0});const h=Oe(),O=P(()=>h),m=ae(),n=P(()=>m),o=P(()=>n.value.tokensWarningObj);let r=b({});B(()=>n.value.RATES,i=>{i&&(r.value=i)},{immediate:!0,deep:!0});const y=P(()=>{var i,s,q;return Me(Number(e.inputValue)*Number((r==null?void 0:r.value)&&((i=r==null?void 0:r.value)==null?void 0:i[e.address])&&((q=(s=r==null?void 0:r.value)==null?void 0:s[e.address])==null?void 0:q.price)),2)}),j=P(()=>{var i,s;return n.value.tokensObj&&e.address&&n.value.tokensObj[e.address]&&((i=n.value.tokensObj[e.address])==null?void 0:i.labels)&&((s=n.value.tokensObj[e.address])==null?void 0:s.labels[0])}),p=P(()=>{var i;return n.value.tokensObj&&e.address&&n.value.tokensObj[e.address]&&((i=n.value.tokensObj[e.address])==null?void 0:i.decimals)}),R=P(()=>{var i,s,q,w;return e.coinIcon||((s=(i=n==null?void 0:n.value)==null?void 0:i.tokensObj[e.address])==null?void 0:s.logo_url)||((w=(q=n==null?void 0:n.value)==null?void 0:q.tokensObj[e.address])==null?void 0:w.logoURI)||(c.value.theme==="default"?ee("/image/coins/unknown.png"):ee("/image/coins/sui-unknown.png"))}),I=P(()=>n.value.tokensObj),$=P(()=>c.value.theme);return{route:te(),theme:$,currentIcon:R,tokensObj:I,pool:n,halfBalance:a,coinLabels:j,t:u,addCommom:F,store:c,wallet:O,indicator:g,inputChange:V,importIcon:ee,selectCoin:d,amountPirce:y,coinDecimals:p,formatNumber:ge,tokensWarningObj:o,checkNullObj:ie,handleInput:C,formattedValue:S}}});const Ye=e=>(pe("data-v-2cb78902"),e=e(),ve(),e),Ze={class:"card"},xe={class:"top"},et={key:1,class:"input-div"},tt={key:0},nt={class:"loading-token"},ot={key:1},it={key:0},at=Ye(()=>l("use",{"xlink:href":"#icon-icon_on"},null,-1)),lt=[at],rt={class:"bottom"},st={key:0,class:"amount-price"},ut={key:1},ct={class:"top"},dt={class:"right"},mt={class:"balance"};function ft(e,t,u,f,k,c){const a=de,g=Ie,d=Te,M=ke,S=ce,V=fe,C=Ce("image");return v(),A("div",Ze,[l("div",xe,[e.inputDisabled?(v(),A("div",et,[e.inputValue?(v(),A("span",tt,_(e.inputValue),1)):(v(),K(g,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(v(),K(a,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.formattedValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:e.handleInput,onFocus:t[0]||(t[0]=h=>e.$emit("onFocus"))},null,8,["value","disabled","onChange","onInput"])),l("div",{class:H(["left",[e.hasArrow?"":"nohands",e.route.name=="swap"?"left-opcity":""].join("")]),onClick:t[1]||(t[1]=h=>e.pool.isTokenLoading?"":e.selectCoin())},[l("div",nt,[e.pool.isTokenLoading?(v(),K(d,{key:0,active:"",size:"small",paragraph:!1})):e.address?$e((v(),A("img",ot,null,512)),[[C,e.currentIcon]]):E("",!0),z(M,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),z(S,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:W(()=>[l("div",null,[l("p",null,_(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(v(),A("p",it,_(e.coinLabels),1)):E("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(v(),A("svg",{key:0,class:H(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},lt,2)):E("",!0)],2)]),l("div",rt,[e.inputValue&&e.amountPirce!="--"?(v(),A("div",st," $"+_(("formatNumber"in e?e.formatNumber:x(ge))(e.amountPirce)),1)):(v(),A("div",ut)),l("div",ct,[l("div",dt,[J(_(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),l("span",mt,_(e.wallet.connected?("addCommom"in e?e.addCommom:x(F))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(v(),K(V,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:x(F))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:t[2]||(t[2]=h=>e.$emit("onHalf"))},{default:W(()=>[J(_("Half"))]),_:1},8,["disabled"])):E("",!0),e.havemax&&e.wallet.connected?(v(),K(V,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:x(F))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:t[3]||(t[3]=h=>e.$emit("onMax"))},{default:W(()=>[J(_(e.$t("button.max")),1)]),_:1},8,["disabled"])):E("",!0)])])])])}const Jt=X(Xe,[["render",ft],["__scopeId","data-v-2cb78902"]]),pt=Q({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fixedFromCoin:{type:Boolean,defalut:!0},isInputTotalAmount:{type:Boolean,default:!1},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},createPoolInfo:{type:Object,default:()=>({})},currentPrice:{type:Number,default:0},currentPriceReverse:{type:Number,default:0},currentPriceTab:{type:String,default:""}},setup(e){const t=ae(),u=P(()=>t),f=Y(),k=P(()=>f),c=te(),a=P(()=>{let C=null;if(c.name=="liquidity-create")C=e.createPoolInfo;else for(const h in u.value.poolsObj){const O=u.value.poolsObj[h];O.address==c.query.poolAddress&&(C=O)}return C}),g=P(()=>k.value.chainName?be(k.value.chainName):{}),d=P(()=>k.value.slippage),M=b(),S=b(),V=async()=>{var q;if(!e.minPrice&&!e.maxPrice)return;console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-deposit-ratio.vue:170 ~ getRatio ~ poolInfo.value:",a.value);const{TickUtil:C,TickMath:h,getNearestTickByTick:O}=g.value,m=a.value.token_a.decimals,n=a.value.token_b.decimals;let o,r,y,j,p,R,I,$=1,T=1;const i=a.value.current_tick_index;let s=u.value.poolPriceConfigObj&&u.value.poolPriceConfigObj[a.value.address]&&u.value.poolPriceConfigObj[a.value.address].recommend_ranges||{};if(a.value.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&a.value.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?I=!0:I=!1,e.minPrice==="0"&&e.maxPrice==="âˆž")y=C.getMinIndex(a.value.tickSpacing),j=C.getMaxIndex(a.value.tickSpacing);else if(e.currentPriceTab=="custom"){I?(o=e.minPrice,r=e.maxPrice):(o=e.maxPrice!=="âˆž"?new N(1).div(e.maxPrice).toString():1/0,r=new N(1).div(e.minPrice).toString());try{p=h.priceToTickIndex(new N(o),m,n)}catch{p=-443636}try{R=h.priceToTickIndex(new N(r),m,n)}catch{R=443636}o==0&&(p=-443636),y=O(p,Number(a.value.tickSpacing),!0),j=O(R,Number(a.value.tickSpacing),!0)}else y=s&&s[e.currentPriceTab]&&s[e.currentPriceTab].lower,j=s&&s[e.currentPriceTab]&&s[e.currentPriceTab].upper;if(e.maxPrice==="âˆž"||i>=y&&i<=j){let w;if(e.fixedFromCoin){const U=new N(Number(e.fromCoinAmount)==0?1:e.fromCoinAmount).mul(Math.pow(10,e.fromCoin.decimals)).toString();w=new ne(U)}else{const U=new N(Number(e.toCoinAmount)==0?1:e.toCoinAmount).mul(Math.pow(10,e.toCoin.decimals)).toString();w=new ne(U)}if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-deposit-ratio.vue:262 ~ getRatio ~ poolInfo.value.current_sqrt_price:",a.value.current_sqrt_price),((q=a==null?void 0:a.value)==null?void 0:q.current_sqrt_price)<=0)return!1;const{tokenMaxA:L,tokenMaxB:D}=await g.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value.token_a,tokenB:a.value.token_b,lowerTick:y,upperTick:j,coinAmount:w,iscoinA:I?e.fixedFromCoin:!e.fixedFromCoin,roundUp:!0,slippage:Number(d.value)/100,curSqrtPrice:new ne(a.value.current_sqrt_price)});I?e.fixedFromCoin?(T=Number(D)>0?D:"",$=Number(L)>0?L:""):($=Number(L)>0?L:"",T=Number(D)>0?D:""):(e.fixedFromCoin,T=L,$=D)}else i>j?I?(T=1,$=0):($=1,T=0):i<y&&(I?(T=0,$=1):(T=1,$=0));if(e.minPrice=="0"&&e.maxPrice=="âˆž")M.value=50,S.value=50;else{const w=$?Number($):0,L=T?Number(T):0,D=new N(L).add(new N(I?new N(w*e.currentPrice):new N(w*e.currentPriceReverse))),U=oe(new N(w).mul(new N(I?e.currentPrice:e.currentPriceReverse)).div(D).mul(100).toNumber().toFixed(2),2),Z=oe(new N(L).div(D).mul(100).toNumber().toFixed(2),2);M.value=U,S.value=Z}};return B(()=>[a.value,e.minPrice,e.maxPrice,e.fromCoinAmount,e.toCoinAmount,e.isInputTotalAmount],([C,h,O,m,n])=>{h&&O&&C&&!ie(C)&&(h!=="0"||O!=="0")?V():(M.value="",S.value="")},{immediate:!0,deep:!0}),{fromCoinRatio:M,toCoinRatio:S}}});const vt={class:"deposit-ratio"},gt={class:"deposit-ratio-text"},bt=l("span",null,"Deposit Ratio",-1),kt=l("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-icon-tips1"})],-1),yt={class:"deposit-ratio-content"},ht={class:"coin-ratio"},Pt={class:"coin-a-ratio"},_t={class:"coin-b-ratio"},St={class:"ratio-progress"};function Ct(e,t,u,f,k,c){var g,d;const a=we;return v(),A("div",vt,[l("div",gt,[bt,z(a,{placement:"bottom","arrow-point-at-center":""},{title:W(()=>[l("span",null,_(e.$t("newAdd.depositRatioTips")),1)]),default:W(()=>[kt]),_:1})]),l("div",yt,[l("div",ht,[l("div",Pt,[l("span",null,_((g=e.fromCoin)==null?void 0:g.symbol),1),J(" "+_(e.fromCoinRatio)+"% ",1)]),l("div",_t,[l("span",null,_((d=e.toCoin)==null?void 0:d.symbol),1),J(" "+_(e.toCoinRatio)+"% ",1)])]),l("div",St,[l("div",{class:"from-percent",style:se({width:e.fromCoinRatio+"%"})},null,4),l("div",{class:"to-percent",style:se({width:e.toCoinRatio+"%"})},null,4)])])])}const Qt=X(pt,[["render",Ct]]),$t=Q({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const u=b(!1),f=b(null),k=b(0);let c=b(!1);const a=b(20),g=ae(),d=Y(),M=b(!1);me(()=>{}),Ne(()=>{clearInterval(f.value)});const S=()=>{c.value=!1,f.value=setInterval(()=>{var n;M.value||k.value<a.value&&(k.value+=1,k.value===a.value&&(c.value=!0,(n=e==null?void 0:e.poolInfo)!=null&&n.poolAddress&&g.updateCurrentPools(e.poolInfo.poolAddress,d.chainName),k.value=0,setTimeout(()=>{c.value=!1},1e3)))},1e3)},V=P(()=>d.slippage),C=()=>{t.emit("clearAll")},h=()=>{c.value||(c.value=!0,k.value=0,t.emit("clickRefresh"),setTimeout(()=>{c.value=!1,S()},1e3))};B(()=>e.poolInfo,n=>{n&&!f.value&&S()},{immediate:!0});const O=Ae(),m=te();return{refresh:c,clickRefresh:h,isShowSwapSetting:u,countdown:k,autoRefreshTime:a,slippage:V,clearAll:C,checkNullObj:ie,router:O,route:m}}});const le=e=>(pe("data-v-906fb979"),e=e(),ve(),e),It={class:"title"},Tt=le(()=>l("div",{class:"left"},[l("span",null,"Deposit Amounts")],-1)),wt=le(()=>l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Nt={key:0,class:"deposit-progress"},At=le(()=>l("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Mt=[At];function Ot(e,t,u,f,k,c){const a=Be;return v(),A("div",It,[Tt,l("div",{class:H(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[l("div",{class:"slippage-icon",onClick:t[0]||(t[0]=g=>e.isShowSwapSetting=!0)},[wt,l("span",null,_(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(v(),A("div",Nt,[(v(),A("svg",{"aria-hidden":"true",class:H(e.refresh?"refresh-icon refresh":"refresh-icon"),onClick:t[1]||(t[1]=(...g)=>e.clickRefresh&&e.clickRefresh(...g))},Mt,2))])):E("",!0)],2),e.isShowSwapSetting?(v(),K(a,{key:0,onOnClose:t[2]||(t[2]=g=>e.isShowSwapSetting=!1)})):E("",!0)])}const Xt=X($t,[["render",Ot],["__scopeId","data-v-906fb979"]]);export{Xt as _,Qt as a,Jt as b,Kt as c};
