import{_ as wa}from"./token-warning.2239555f.js";import{m as w,N as Da,a5 as Fa,r as f,E as ja,D as ae,a as ce,q as Dt,o as u,f as y,h as e,t as le,i as N,v as o,x as D,u as a,G as dt,z as Q,J as $t,p as Te,k as Ie,e as de,c as F,w as j,j as U,Y as Qt,I as Xt,B as lt,a2 as ot,a3 as za,l as Wa,y as Va,C as Ya,a7 as qt,b as Ka,f9 as ra,Z as qa,K as Bt,H as Jt,F as G,s as Ue,L as ea,A as Ja,$ as Ga}from"./entry.362421f1.js";/* empty css              */import{D as h}from"./decimal.0bdeb344.js";import{g as H,W as Za,K as Qa,u as Be,aL as Xa,c as Ae,aM as ua,aN as ge,s as qe,b as A,aO as ca,l as Ge,aK as It}from"./index.42df0035.js";import{u as xt,a as mt,b as Ft,p as da,j as ta}from"./pool.6a1066ec.js";import{_ as es}from"./token-warning-modal.fc780da1.js";/* empty css              *//* empty css              */import{_ as ts}from"./refresh-icon.07d653ac.js";import{_ as as}from"./coin-select.32d54ba4.js";import{U as $a}from"./underline-tab.560f8f57.js";import{N as va}from"./new-assets-card.4fde475f.js";import{B as _a}from"./bignumber.266e6c56.js";import{_ as ss}from"./img-no-Positions_2x.65c89538.js";import{_ as ns}from"./img-connect-wallet_2x.9412a060.js";import{S as ls}from"./data.712deea2.js";/* empty css              */const is=""+globalThis.__publicAssetsURL("sui-image/img-no-data@2x.png");function He(t){const c={fullRpcUrl:localStorage.getItem(`${t}-currentRpclocal2`)||H[t||"Sui"].fullRpcUrl,simulationAccount:H[t||"Sui"].simulationAccount,cetus_config:H[t||"Sui"].cetus_config,clmm_pool:H[t||"Sui"].clmm_pool,integrate:H[t||"Sui"].integrate,deepbook:H[t||"Sui"].deepbook,deepbook_endpoint_v2:H[t||"Sui"].deepbook_endpoint_v2,aggregatorUrl:H[t||"Sui"].aggregatorUrl,swapCountUrl:H[t||"Sui"].swapCountUrl},n={launchpad:H[t||"Sui"].launchpad,ido:H[t||"Sui"].ido,xcetus:H[t||"Sui"].xcetus,xcetus_dividends:H[t||"Sui"].xcetus_dividends,cetus_faucet:H[t||"Sui"].cetus_faucet,xtoken:H[t||"Sui"].xtoken,xtoken_dividends:H[t||"Sui"].xtoken_dividends,token_faucet:H[t||"Sui"].token_faucet,booster:H[t||"Sui"].booster,maker_bonus:H[t||"Sui"].maker_bonus,liquidity_stratefy:H[t||"Sui"].liquidity_stratefy,vaults:H[t||"Sui"].vaults,frams:H[t||"Sui"].frams,limit_order:H[t||"Sui"].limit_order};console.log("defaultNetworkOptions####",c);const _=new Za(c),g=new Qa(n,_),$=Be(),m=w(()=>$);Da(()=>{m.value.address&&(_.senderAddress=m.value.address)});const v=async()=>await g.LimitOrder.getLimitOrderTokenList(),l=async()=>await g.LimitOrder.getLimitOrderPoolList(),C=async()=>{try{return await g.LimitOrder.getOwnerLimitOrderList(g.ClmmSDK.senderAddress,"all")}catch(S){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useLimitOrder.ts:71 ~ getOwnerLimitOrderList ~ error:",S)}},r=S=>({transactionBlock:S,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),i=async S=>{const{pay_coin_amount:k,price:M,expired_ts:z,pay_coin_type:L,target_coin_type:X,pay_decimal:re,target_decimal:ue}=S,fe=new h(k).mul(Math.pow(10,re)).toNumber();console.log("useLimitOrder placeLimitOrder params##",S);const ee=await g.LimitOrder.placeLimitOrder({pay_coin_amount:fe,price:M,expired_ts:z,pay_coin_type:L=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":L,target_coin_type:X=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":X,pay_decimal:re,target_decimal:ue});return console.log("useLimitOrder placeLimitOrder payload##",ee),r(ee)},I=async S=>{console.log("cancelOrdersByOwner params",S);const k=await g.LimitOrder.cancelOrdersByOwner(S);return r(k)},T=async S=>await g.LimitOrder.getLimitOrderLogs(S),d=async S=>{const k=await g.LimitOrder.claimTargetCoin({order_id:S.order_id,pay_coin_type:S.pay_coin_type,target_coin_type:S.target_coin_type});return r(k)},O=async S=>await g.LimitOrder.getLimitOrderClaimLogs(S);return{getLimitOrderTokenList:v,getLimitOrderPoolList:l,getOwnerLimitOrderList:C,placeLimitOrder:i,rateToPrice:Xa.rateToPrice,cancelOrdersByOwner:I,getLimitOrderLogs:T,claimTargetCoin:d,getLimitOrderClaimLogs:O}}const Mt="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Me=Fa("LimitOrder",{state:()=>({limitTokenList:[],limitTokenObj:{},limitOrderPoolList:[],limitOrderList:[],orderNum:0,orderListLoading:!1,limitTokenMinAmountObj:{},limitOrderHistoryList:[],historyNum:0,orderHistoryObj:{},cancelOrderId:"",orderHistoryLoading:!1,currentOrderClaimHistory:[],claimHistoryLoading:!0,RATES:{},marketPriceLoading:!0,haveMarket:!0,isShowChart:JSON.parse(localStorage.getItem("isShowChart"))||!1}),actions:{async getTokenMinAmount(){const c=await He("Sui").getLimitOrderTokenList();this.limitTokenMinAmountObj=Object.fromEntries(c.map((n,_)=>[n.coin_type==Mt?"0x2::sui::SUI":n.coin_type,n])),console.log(c,"store limitorder getLimitgetTokenMinAmount###")},async getPoolList(){const c=await He("Sui").getLimitOrderPoolList();this.limitOrderPoolList=c.map(n=>({indexer_id:n.indexer_id,pay_coin_type:n.pay_coin_type==Mt?"0x2::sui::SUI":n.pay_coin_type,target_coin_type:n.target_coin_type==Mt?"0x2::sui::SUI":n.target_coin_type})),console.log(c,"store limitorder getLimitOrderPoolList###")},async getOrderList(){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:42 ~ getOrderList ~ getOrderList:");const t=He("Sui");this.orderListLoading=!0;try{const c=await t.getOwnerLimitOrderList();console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:46 ~ getOrderList ~ result:",c);const n=c.data.filter(_=>_.status=="PartialCompleted"||_.status=="Running")||[];this.limitOrderList=n.sort((_,g)=>g.created_ts-_.created_ts),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:52 ~ getOrderList ~ this.limitOrderList:",this.limitOrderList),this.orderListLoading=!1,this.cancelOrderId=""}catch(c){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:53 ~ getOrderList ~ e:",c),this.orderListLoading=!1,this.cancelOrderId=""}},async getTokenList(){const c=(await fetch(`${H.Sui.api}/v2/sui/coin_metadata`,{method:"POST",body:JSON.stringify({})}).then(n=>n.json())).data.list||[];this.limitTokenList=c,this.limitTokenObj=Object.fromEntries(c.map((n,_)=>[n.coin_type==Mt?"0x2::sui::SUI":n.coin_type,n])),console.log(c,"store limitorder getLimitOrderTokenList###")},async getLimitOrderLogs(){},async getLimitOrderHistory(t){this.orderHistoryLoading=!0;const{data:c}=await fetch(`${H.Sui.api}/v2/sui/limit_order?wallet_address=${t}`).then(_=>_.json()),n=c.list||[];this.limitOrderHistoryList=n||[],this.orderHistoryLoading=!1},async getLimitOrderClaimHistory(t){this.currentOrderClaimHistory=[],this.claimHistoryLoading=!0;const n=await He("Sui").getLimitOrderClaimLogs(t.id);this.currentOrderClaimHistory=n.map(_=>{const g=new h(_.parsedJson.claimed_amount).div(Math.pow(10,t.target_coin_info.decimals));return{..._,..._.parsedJson,claimed_amount:g}}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:105 ~ getLimitOrderClaimHistory ~ currentOrderClaimHistory:",this.currentOrderClaimHistory),this.claimHistoryLoading=!1},setOrderNum(t){this.orderNum=t},setHistoryNum(t){this.historyNum=t},setLimitOrderLoading(t){this.cancelOrderId=t},async setRates(t){this.marketPriceLoading=!0;let c={};if(t&&t.includes("Sui"))try{c=await $fetch(`${H.Sui.api}/v2/sui/price`)}catch(g){console.log("sui pric api error ###",g),c={data:{prices:ls}}}else c=await $fetch(`${H.Aptos.api}/v2/price`);const n=c.data.prices||[],_=[];n.forEach(g=>{g.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?_.push({...g},{...g,base_symbol:"0x2::sui::SUI"}):_.push(g)}),this.RATES=Object.fromEntries(_.map(g=>[g.base_symbol,g])),this.marketPriceLoading=!1},setHaveMarket(t){this.haveMarket=t},setIsShowChart(t){localStorage.setItem("isShowChart",JSON.stringify(t)),this.isShowChart=t},limitOrderLogOut(){this.limitOrderHistoryList=[],this.limitOrderList=[]}}}),b=f(),x=f(),os=xt(),xa=w(()=>os),Sa=mt(),rs=w(()=>Sa),ma=w(()=>rs.value.chainName),Le=Ft("Sui"),us=ja(),ka=f(!0);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:53 ~ route:",us);ae(()=>[xa.value.tokensObj,ka.value],async([t,c])=>{if(!Ae(t)){const n=ua("from"),_=ua("to");console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:61 ~ routerCoinTo:",n,_),n&&_?b.value=t[n]||await Le.getTokenBySymbol(t,n):!n&&!b.value&&(b.value=t[H[ma.value].swapDefaultPair.fromCoin]),n&&_?x.value=t[_]||await Le.getTokenBySymbol(t,_):!_&&!x.value&&(x.value=t[H[ma.value].swapDefaultPair.toCoin])}},{});const{setTransactionTxid:cs,setIsShowWaiting:Nt,setIsShowSuccess:ds,setIsShowRejected:pa,setTransactionDesc:vs}=Sa,ga=f(!1),nt=Me(),aa=w(()=>nt),_s=w(()=>aa.value.limitOrderList),ms=Be(),Zt=w(()=>ms),sa=async(t,c=!1)=>{const n=He("Sui");try{vs("Canceling order"),Nt(!0);const g=c?_s.value.map(l=>({order_id:l.id,pay_coin_type:l.pay_coin_type,target_coin_type:l.target_coin_type})):[{order_id:t.id,pay_coin_type:t.pay_coin_type,target_coin_type:t.target_coin_type}];nt.setLimitOrderLoading(c?"all":t.id),console.log("cacelLimitOrder parmas",g);const $=await n.cancelOrdersByOwner(g),m=await Le.signAndExecuteTransactionBlock(Zt.value.currentWallet,$),v=Le.handleTx(m);if(v&&v.hash){cs(v.hash),Nt(!1),ds(!0),ga.value=!1;const l={title:"Transaction",desc:"Order cancelled successfully",hash:v.hash,icon:"icon-icon-Increased"};l.res=v.res,Le.showTransitionPending(l),await Le.watchTransaction(l)&&setTimeout(()=>{Le.getAccount(Zt.value.address),nt.getOrderList()},2e3)}else Nt(!1),pa(!0),nt.setLimitOrderLoading("")}catch(_){Nt(!1),pa(!0),ga.value=!1,nt.setLimitOrderLoading(""),console.log("trade-data.ts cancel error##",_)}},fa=f(!1),W=f(!0),E=f(),R=f();function ha(){fa.value=!0;const t=b.value;b.value=x.value,x.value=t,W.value=!W.value;const c=E.value,n=R.value;W.value?(E.value=R.value,R.value=c):(R.value=E.value,E.value=n),setTimeout(()=>{fa.value=!1},300)}ae(()=>ka.value,()=>{E.value="",R.value=""},{immediate:!0});const rt=f("orders"),ht=f(1),Pt=f(10),J=f([]),yt=f([]),ps=f(1),ut=f(),ft=w(()=>aa.value.limitOrderList),Rt=w(()=>xa.value.tokensObj),gs=He("Sui"),ct=f(),fs=t=>{ct.value={...ct.value,[t.id]:t}},Gt=f(!1),ya=w(()=>aa.value.cancelOrderId),hs=async()=>{const t=Pt.value*ht.value-Pt.value;let c=ht.value*Pt.value;c=c>ft.value.length?ft.value.length:c;const n=ft.value;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:147 ~ updateOrderList ~ ordersList.value:",ft.value),console.log("trade-card updateOrderList tokenObj",Rt.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:257 ~ updateOrderList ~ orderDirectObj.value:",ct.value),n.length>0){const _=[],g=n.filter((m,v)=>v>=t&&v<c);for(let m=0;m<g.length;m++){const v=g[m];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:176 ~ updateOrderList ~ order.pay_coin_type:",await Le.getTokenListByCoinType[v.pay_coin_type]);const l=Rt.value[v.pay_coin_type]||(await Le.getTokenListByCoinType([v.pay_coin_type]))[0],C=Rt.value[v.target_coin_type]||(await Le.getTokenListByCoinType([v.target_coin_type]))[0];console.log(v,"order###"),console.log(l.decimals,"##pay_coin_info.decimals");const r=ge(gs.rateToPrice(v.rate,l.decimals,C.decimals).toString(),l.decimals),i=new h(v.total_pay_amount).div(Math.pow(10,l.decimals)).toString(),I=new h(v.total_pay_amount).mul(new h(Math.pow(10,18))).div(new h(v.rate)).ceil().div(new h(Math.pow(10,C.decimals))).toString(),T=new h(v.total_pay_amount).mul(new h(r)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:166 ~ updateOrderList ~ totalBuyNum:",I,T);const d=new h(v.obtained_amount).div(Math.pow(10,C.decimals)).toString(),O=qe(new h(d).div(new h(I)).mul(100).toString(),2),S=new h(v.target_balance).div(Math.pow(10,C.decimals)).toString(),k=ge(new h(1).div(new h(r)).toString());console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:217 ~ updateOrderList ~ new Decimal(1).div(new Decimal(rate)).toString():",new h(1).div(new h(r)).toString()),_.push({...v,pay_coin_info:l,target_coin_info:C,total_pay_amount:i,rate:r,totalBuyNum:I,obtained_amount:d,obtainedRatio:O,target_balance:S,reseverRate:k,direction:ct.value&&ct.value[v.id]&&ct.value[v.id].direction||!1})}J.value=_,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:255 ~ updateOrderList ~ pageList.value:",J.value),ps.value==1;const $=_.filter(m=>{var v;return m.id==((v=ut==null?void 0:ut.value)==null?void 0:v.id)});ut.value=$&&$.length>0?$[0]:""}yt.value=n,nt.setOrderNum(n.length),console.log("allList",yt.value),console.log("pageList",J.value)};ae(()=>[ft.value,ht.value,Rt.value,Zt.value.address],([t,c,n,_])=>{t&&t.length>0&&n&&!Ae(n)&&_?hs():(J.value=[],yt.value=[],nt.setOrderNum(0))},{immediate:!0});const ys=t=>(Te("data-v-cb6734b1"),t=t(),Ie(),t),bs={class:"switch-direction"},ws={class:"left"},$s={key:0,class:"token-info"},xs={key:0},Ss={key:1,class:"token-info"},ks={alt:""},Cs={alt:""},Os={key:0,class:"chart-no-data"},Ls=ys(()=>e("img",{src:is,alt:""},null,-1)),Ts={class:"iframe-box"},Is=["src","onload"],Ms=ce({__name:"trade-chart",setup(t){const c=f(!0);f(!0),f(),f(),f();const n=Me(),_=w(()=>n);w(()=>_.value.RATES),w(()=>_.value.marketPriceLoading);const g=w(()=>_.value.haveMarket);f(),f();const $=mt(),m=w(()=>$),v=w(()=>m.value.addressLpTokens),l=xt(),C=w(()=>l),r=w(()=>C.value.openPool),i=f(),I=()=>{var d;const T=[];if((d=r==null?void 0:r.value)==null||d.forEach(O=>{var S,k,M,z,L,X,re,ue;if(O.coinA.address.toUpperCase()===((k=(S=b==null?void 0:b.value)==null?void 0:S.address)==null?void 0:k.toUpperCase())&&O.coinB.address.toUpperCase()===((z=(M=x==null?void 0:x.value)==null?void 0:M.address)==null?void 0:z.toUpperCase())||O.coinB.address.toUpperCase()===((X=(L=b==null?void 0:b.value)==null?void 0:L.address)==null?void 0:X.toUpperCase())&&O.coinA.address.toUpperCase()===((ue=(re=x==null?void 0:x.value)==null?void 0:re.address)==null?void 0:ue.toUpperCase())){const fe=(v==null?void 0:v.value[O.address])||{};fe&&!Ae(fe)&&T.push({...O,pure_tvl_in_usd:fe.pure_tvl_in_usd})}}),T&&T.length>0){const O=T.sort((S,k)=>S.pure_tvl_in_usd-k.pure_tvl_in_usd)[0];return i.value=O,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-chart.vue:327 ~ poolInfo ~ result:",O),!1}i.value=null};return ae(()=>[r.value,v.value,b.value,x.value],([T,d])=>{T&&T.length>0&&d&&!Ae(d)&&I()},{immediate:!0}),(T,d)=>{var M,z,L,X,re,ue,fe,ee,xe,Se,V,se,be,he,Fe,Ne,ie,ve,je,_e,et,ze,tt,ke,at,We,st,Ee,me,ne,Y,oe,pe,we,Z,ye,Ve,Pe,Ct;const O=wa,S=$t,k=Dt("image");return u(),y("div",{class:Q(["trade-chart",!c.value&&!i.value?"trade-chart-no-pool":""])},[e("div",bs,[e("div",ws,[i.value?(u(),y("div",$s,[e("div",null,[le(e("img",null,null,512),[[k,(M=i.value)!=null&&M.needReverse?(L=(z=i.value)==null?void 0:z.token_b)==null?void 0:L.logo_url:(re=(X=i.value)==null?void 0:X.token_a)==null?void 0:re.logo_url]]),N(O,{address:(ue=i.value)!=null&&ue.needReverse?(ee=(fe=i.value)==null?void 0:fe.token_b)==null?void 0:ee.address:(Se=(xe=i.value)==null?void 0:xe.token_a)==null?void 0:Se.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[le(e("img",null,null,512),[[k,(V=i.value)!=null&&V.needReverse?(be=(se=i.value)==null?void 0:se.token_a)==null?void 0:be.logo_url:(Fe=(he=i.value)==null?void 0:he.token_b)==null?void 0:Fe.logo_url]]),N(O,{address:(Ne=i.value)!=null&&Ne.needReverse?(ve=(ie=i.value)==null?void 0:ie.token_a)==null?void 0:ve.address:(_e=(je=i.value)==null?void 0:je.token_b)==null?void 0:_e.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),i.value?(u(),y("span",xs,o((et=i.value)!=null&&et.needReverse?(tt=(ze=i.value)==null?void 0:ze.token_b)==null?void 0:tt.symbol:(at=(ke=i.value)==null?void 0:ke.token_a)==null?void 0:at.symbol)+" / "+o((We=i.value)!=null&&We.needReverse?(Ee=(st=i.value)==null?void 0:st.token_a)==null?void 0:Ee.symbol:(ne=(me=i.value)==null?void 0:me.token_b)==null?void 0:ne.symbol),1)):D("",!0)])):a(b)&&a(x)?(u(),y("div",Ss,[e("div",null,[le(e("img",ks,null,512),[[k,(Y=a(b))==null?void 0:Y.logo_url]]),N(O,{address:(oe=a(b))==null?void 0:oe.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[le(e("img",Cs,null,512),[[k,(pe=a(x))==null?void 0:pe.logo_url]]),N(O,{address:(we=a(x))==null?void 0:we.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o((Z=a(b))==null?void 0:Z.symbol)+" / "+o((ye=a(x))==null?void 0:ye.symbol),1)])):D("",!0)])]),!c.value&&!i.value?(u(),y("div",Os,[Ls,e("span",null,o(g.value?"Price chart is currently not available for this pair, but you can still place your limit orders.":"No data avaliable"),1)])):D("",!0),e("div",Ts,[le(e("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",src:`https://birdeye.so/tv-widget/${(Pe=(Ve=i.value)==null?void 0:Ve.token_a)==null?void 0:Pe.address}/${(Ct=i.value)==null?void 0:Ct.address}?chain=sui`,onload:()=>{c.value=!1}},null,8,Is),[[dt,!c.value&&i.value]]),le(N(S,null,null,512),[[dt,c.value]])])],2)}}});const Jo=de(Ms,[["__scopeId","data-v-cb6734b1"]]),Ca=t=>(Te("data-v-2c8f9476"),t=t(),Ie(),t),Ns={class:"custom-expiry"},Es={class:"input-box"},Ps=Ca(()=>e("div",{class:"minutes"},"Hours",-1)),Rs={class:"input-box"},As=Ca(()=>e("div",{class:"minutes"},"Minutes",-1)),Hs=ce({__name:"custom-expires-modal",setup(t){const c=f(),n=f(),_=f({}),g=(l,C)=>{const r=(l||0)*60+Number(C||0),i=Math.floor(r/(60*24)),I=Math.floor(r%(60*24)/60),T=r%60;let d="";i>0&&(d+=i+"d "),I>0&&(d+=I+"h "),T>0&&(d+=T+"m "),_.value={timeText:d.trim()||"0 m",time:r*60*1e3}};ae(()=>[c.value,n.value],([l,C])=>{g(l,C)},{immediate:!0});const $=l=>{const C=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");l.target.value=l.target.value.replace(C,"$1"),c.value=l.target.value,console.log(c.value,"##inputChange")},m=l=>{const C=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");l.target.value=l.target.value.replace(C,"$1"),n.value=l.target.value},v=w(()=>!c.value&&!n.value||Number(c.value)==0&&!n.value||Number(n.value)==0&&!c.value||Number(c.value)==0&&Number(n.value)==0);return(l,C)=>{const r=Xt,i=lt;return u(),F(a(Qt),{title:"Custom Expiry Period",visible:!0,width:"440px",footer:null,onCancel:C[3]||(C[3]=I=>l.$emit("closeModal"))},{default:j(()=>[e("div",Ns,[e("div",Es,[N(r,{value:c.value,"onUpdate:value":C[0]||(C[0]=I=>c.value=I),placeholder:"0",onChange:$},null,8,["value"]),Ps]),e("div",Rs,[N(r,{value:n.value,"onUpdate:value":C[1]||(C[1]=I=>n.value=I),placeholder:"0",onChange:m},null,8,["value"]),As]),N(i,{class:"set-period",disabled:v.value,onClick:C[2]||(C[2]=I=>l.$emit("sendTime",_.value))},{default:j(()=>[U("Set Period")]),_:1},8,["disabled"])])]),_:1})}}});const Us=de(Hs,[["__scopeId","data-v-2c8f9476"]]),Ze=t=>(Te("data-v-8d8c006a"),t=t(),Ie(),t),Bs=Ze(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Ds=[Bs],Fs={class:"trade-cofirm-content"},js={class:"coin-info"},zs={class:"from-coin-info"},Ws={class:"left"},Vs={class:"coin-amount"},Ys={class:"coin-symbol"},Ks={class:"right"},qs={class:"to-coin-info"},Js={class:"left"},Gs={class:"coin-amount"},Zs={class:"coin-symbol"},Qs={class:"right"},Xs=Ze(()=>e("div",{class:"to-swap-logo"},null,-1)),en={class:"trade-info"},tn={class:"price"},an=Ze(()=>e("div",{class:"label"},"Pirce",-1)),sn={class:"text"},nn={key:0},ln={key:1},on=Ze(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),rn=Ze(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),un=[on,rn],cn={class:"expires-in"},dn=Ze(()=>e("div",{class:"label"},"Expires in",-1)),vn={class:"text"},_n=Ze(()=>e("div",{class:"trade-tips1"}," You will receive exactly what you have specified if your order is fully filled in the end. ",-1)),mn=Ze(()=>e("div",{class:"trade-tips2"}," Please note that your order may not be filled immediately after the price is triggered, depending on pending sequence and liquidity depth. ",-1)),pn=ce({__name:"trade-confirm",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},direction:{type:Boolean,default:!1},price:{type:String,default:""},currentExpires:{type:String,default:""}},emits:["to-trade","close"],setup(t,{emit:c}){const n=t,_=c,g=f(!1),$=w(()=>new h(1).div(new h(n.price)).toString()),m=async()=>{_("to-trade")};return(v,l)=>{const C=lt,r=Dt("image");return u(),F(a(Qt),{title:"Review your order",width:"440px",footer:null,visible:!0,class:"trade-confirm-modal"},{closeIcon:j(()=>[(u(),y("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:l[0]||(l[0]=i=>_("close"))},Ds))]),default:j(()=>{var i,I,T,d,O,S,k,M;return[e("div",Fs,[e("div",js,[e("div",zs,[e("div",Ws,[e("div",Vs,o(t.fromCoinAmount&&a(A)(t.fromCoinAmount)),1),e("div",Ys,o(t.fromCoin&&t.fromCoin.symbol),1)]),e("div",Ks,[le(e("img",null,null,512),[[r,t.fromCoin&&t.fromCoin.logo_url]])])]),e("div",qs,[e("div",Js,[e("div",Gs,o(t.toCoinAmount&&a(A)(t.toCoinAmount)),1),e("div",Zs,o(t.toCoin&&t.toCoin.symbol),1)]),e("div",Qs,[le(e("img",null,null,512),[[r,t.toCoin&&t.toCoin.logo_url]])]),Xs])]),e("div",en,[e("div",tn,[an,e("div",sn,[t.direction?(u(),y("span",ln,o(a(A)(a(ge)(g.value?$.value:t.price,9)))+" "+o(g.value?(S=t.fromCoin)==null?void 0:S.symbol:(O=t.toCoin)==null?void 0:O.symbol)+" per "+o(g.value?(M=t.toCoin)==null?void 0:M.symbol:(k=t.fromCoin)==null?void 0:k.symbol),1)):(u(),y("span",nn,o(a(A)(a(ge)(g.value?$.value:t.price,9)))+" "+o(g.value?(I=t.toCoin)==null?void 0:I.symbol:(i=t.fromCoin)==null?void 0:i.symbol)+" per "+o(g.value?(d=t.fromCoin)==null?void 0:d.symbol:(T=t.toCoin)==null?void 0:T.symbol),1)),e("div",{class:"right",onClick:l[1]||(l[1]=z=>g.value=!g.value)},un)])]),e("div",cn,[dn,e("div",vn,o(t.currentExpires),1)])]),_n,mn]),N(C,{class:"big-btn trade-confirm-btn",onClick:l[2]||(l[2]=z=>m())},{default:j(()=>[U(" Place Order ")]),_:1})]}),_:1})}}});const gn=de(pn,[["__scopeId","data-v-8d8c006a"]]),St=t=>(Te("data-v-e45c9e33"),t=t(),Ie(),t),fn={class:"trade-card"},hn={class:"trade-content"},yn={class:"trade-card-title"},bn={class:"tit-icon-box"},wn={class:"new-style-tooltip-text"},$n={class:"icon-bg"},xn=St(()=>e("use",{"xlink:href":"#icon-icon_kline"},null,-1)),Sn=[xn],kn={class:"icon-bg"},Cn={class:"trade-card-content"},On=Ja('<div class="exchange-new" data-v-e45c9e33><svg class="icon icon-down" aria-hidden="true" data-v-e45c9e33><use xlink:href="#icon-icon_swap1" data-v-e45c9e33></use></svg><svg class="icon icon-swap" aria-hidden="true" data-v-e45c9e33><use xlink:href="#icon-tx_swap1" data-v-e45c9e33></use></svg></div>',1),Ln=[On],Tn={class:"sell-setting"},In={class:"sell-rate"},Mn={class:"top"},Nn={key:0,class:"direction-text"},En={key:1,class:"direction-text"},Pn={class:"bottom"},Rn={class:"coin-symbol"},An=St(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),Hn=[An],Un={class:"top"},Bn=St(()=>e("span",null,"Expiry in",-1)),Dn=St(()=>e("use",{"xlink:href":"#icon-icon_tips1"},null,-1)),Fn=[Dn],jn={class:"bottom"},zn=St(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Wn=[zn],Vn=["onClick"],Yn={class:"market-price-tips"},Kn=ce({__name:"trade-card",setup(t){const c=ot(za,{style:{fontSize:"14px",marginLeft:"4px",color:"#75c8ff"},spin:!0}),{t:n}=Wa(),_=[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}];f("Limit");const g=Be(),$=w(()=>g),m=w(()=>$.value.assets&&b.value&&$.value.assets[b.value.address]?da($.value.assets[b.value.address].balance,b.value.decimals):0),v=w(()=>$.value.assets&&x.value&&$.value.assets[x.value.address]?da($.value.assets[x.value.address].balance,x.value.decimals):0),l=p=>{p==="fromCoin"?(W.value=!0,E.value=m.value>0?b.value.symbol=="SUI"?new h(Number(m.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(m.value)).sub(new h(.05)).toString():String(m.value):""):(W.value=!1,R.value=v.value>0?x.value.symbol=="SUI"?new h(Number(v.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(v.value)).sub(new h(.05)).toString():String(v.value):"")},C=p=>{p==="fromCoin"?(W.value=!0,E.value=m.value>0?qe(new h(Number(m.value)).div(2).toString(),b.value.decimals).toString():""):(W.value=!1,R.value=v.value>0?qe(new h(Number(v.value)).div(2).toString(),x.value.decimals).toString():"")},r=f(""),i=f(""),I=f(""),T=f(!1),d=p=>{var s,B,K,te;r.value=p,p==="fromCoin"?(i.value=((s=x.value)==null?void 0:s.address)||"",I.value=((B=b.value)==null?void 0:B.address)||""):(i.value=((K=b.value)==null?void 0:K.address)||"",I.value=((te=x.value)==null?void 0:te.address)||""),T.value=!0},O=["5 Minutes","10 Minutes","30 Minutes","1 Hour","1 Day","3 Days","7 Days","1 Month","Custom"],S=p=>{switch(p){case"5 Minutes":return 3e5;case"10 Minutes":return 6e5;case"30 Minutes":return 18e5;case"1 Hour":return 36e5;case"1 Day":return 864e5;case"7 Days":return 6048e5;case"1 Month":return 2592e6;default:return 0}},k=f(!1),M=f("7 Days"),z=f(!1),L=f(),X=f(0),re=p=>{M.value=p.timeText,X.value=p.time,z.value=!1},ue=f(),fe=p=>{ue.value=r.value==="fromCoin"?b.value:x.value;let s=!1;r.value==="fromCoin"?(E.value="",x.value&&p.address.toLowerCase()===(x==null?void 0:x.value.address.toLowerCase())&&(x.value=b.value,s=!0),b.value=p):(b.value&&(R.value="",p.address.toLowerCase()===(b==null?void 0:b.value.address.toLowerCase())&&(b.value=x.value,s=!0)),x.value=p),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:416 ~ onCoinSelect ~ toCoin.value:",x.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:453 ~ onCoinSelect ~ fromCoin.value:",b.value),s||(Y.value=!1),T.value=!1},ee=f(20),xe=f(0),Se=f(null),V=f(!1),se=()=>{V.value||(clearInterval(Se.value),$.value.address&&(_e.getOrderList(),me.getAccount($.value.address)),pe.value||Z.value?Wt():Ot(!1),xe.value=0,V.value=!0,setTimeout(()=>{V.value=!1,be()},1e3))},be=()=>{Se.value=setInterval(()=>{V.value=!1,xe.value<ee.value&&(xe.value+=1,xe.value===ee.value&&se())},1e3)};Va(()=>{be(),window.addEventListener("click",()=>{k.value=!1})}),Ya(()=>{clearInterval(Se.value)});const he=()=>{if(W.value&&(!E.value||E.value==0)||!W.value&&(!R.value||R.value==0))return!1;if(L.value<=0&&it.value)return W.value?R.value="":E.value="",!1;if(Number(E.value)<=0&&Number(R.value)<=0)return!1;if(L.value<=0&&!it.value&&E.value>0&&R.value>0)return console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:480 ~ updateAmounts ~ fromCoinAmount.value&&toCoinAmount.value:",E.value>0&&R.value>0),L.value=Y.value?ge(new h(R.value||0).div(new h(E.value||0)).toString()):ge(new h(E.value||0).div(new h(R.value||0)).toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:497 ~ updateAmounts ~ fixedFromCoin.value :",W.value),!1;if(L.value<=0&&!it.value)return!1;W.value?Y.value?R.value=qe(new h(E.value).mul(new h(L.value||0)).toString(),x.value.decimals):R.value=qe(new h(E.value).div(new h(L.value||0)).toString(),x.value.decimals):Y.value?E.value=qe(new h(R.value).div(new h(L.value||0)).toString(),b.value.decimals):E.value=qe(new h(R.value).mul(new h(L.value||0)).toString(),b.value.decimals)};ae(E,qt((p,s)=>{p&&p!==0&&W.value&&he(),p==""&&W.value&&(R.value="")},100)),ae(L,qt((p,s)=>{p&&p!==0&&he(),p==""&&W.value&&(R.value="")},100)),ae(R,qt((p,s)=>{p&&p!==0&&!W.value&&he(),p==""&&!W.value&&(E.value="")},100));const Fe=xt(),Ne=w(()=>Fe),ie=w(()=>{var K;const s=(K=Ne.value.RATES[b.value.address])==null?void 0:K.price,B=new h(s||0).mul(E.value||0).toNumber();if(s){if(B<5&&s)return!0}else return!1;return!1}),ve=w(()=>!b.value||!x.value?n("modal.selectTokenModalTitle"):Pe.value?!Number(E.value)||!Number(R.value)?n("button.enterAmount"):ie.value?"Order size should be higher than $5":Number(E.value)>Number(m.value)?n("button.insufficientBalance",{name:b.value.symbol}):"Place Limit Order":"No Available Route"),je=w(()=>!!(!b.value||!x.value||!L.value||ie.value||!Number(E.value)&&!Number(R.value)||Number(E.value)>Number(m.value)||Number(E.value)==0||Number(R.value)==0||!Pe.value)),_e=Me(),et=w(()=>_e),ze=mt(),{setTransactionTxid:tt,setIsShowWaiting:ke,setIsShowSuccess:at,setIsShowRejected:We,setTransactionDesc:st}=ze,Ee=f(!1),me=Ft("Sui"),ne=async()=>{Tt.value=!1;const p=He("Sui"),s=Date.parse(new Date().toString())+(S(M.value)||X.value);try{st("Creating order"),ke(!0);const K={pay_coin_amount:E.value,price:Y.value?L.value:new h(1).div(new h(L.value)).toString(),expired_ts:s,pay_coin_type:b.value.address,target_coin_type:x.value.address,pay_decimal:b.value.decimals,target_decimal:x.value.decimals};console.log("placeLimitOrder parmas",K);const te=await p.placeLimitOrder(K),gt=await me.signAndExecuteTransactionBlock($.value.currentWallet,te),Ce=me.handleTx(gt);if(Ce&&Ce.hash){tt(Ce.hash),ke(!1),at(!0),Ee.value=!1;const Re={title:"Transaction",desc:"Order placed successfully",hash:Ce.hash,icon:"icon-icon-Increased"};Re.res=Ce.res,me.showTransitionPending(Re),await me.watchTransaction(Re)&&setTimeout(()=>{me.getAccount($.value.address),_e.getOrderList()},1e3)}else ke(!1),We(!0)}catch(B){ke(!1),We(!0),Ee.value=!1,console.log("trade-card openOrder error##",B)}},Y=f(!1),oe=f(),pe=f(""),we=f(),Z=f("0"),ye=f(""),Ve=f(),Pe=f(!0),Ct=async()=>{var B,K;let p;if(W.value){const te=new h(1).mul(Math.pow(10,(B=b==null?void 0:b.value)==null?void 0:B.decimals)).toString();p=new _a(te)}else{const te=new h(1).mul(Math.pow(10,(K=x==null?void 0:x.value)==null?void 0:K.decimals)).toString();p=new _a(te)}const s=await me.getBestRouterByServer(b,x,p,W.value,$.value.address,!1,!1);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:805 ~ getTokenRouter ~ res:",s),s&&s.splitPaths&&s.splitPaths.length>0?(Pe.value=!0,_e.setHaveMarket(!0)):(Pe.value=!1,_e.setHaveMarket(!1))},Pa=async()=>{var Ce,Re;const s=(await $fetch(`${H.Sui.api}/v2/sui/price?base_symbol_address_pair=${ca(b.value.address)},${ca(x.value.address)}`)).data.prices||[],B=[];s.forEach(Oe=>{Oe.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?B.push({...Oe,base_symbol:"0x2::sui::SUI"}):B.push(Oe)});const K=Object.fromEntries(B.map(Oe=>[Oe.base_symbol,Oe]));console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:872 ~ setMarketPriceFromRate ~ RATES:",K);const te=new h((Ce=K[x.value.address])==null?void 0:Ce.price),gt=new h((Re=K[b.value.address])==null?void 0:Re.price);return{inputAmount:te,outputAmount:gt}},jt=f(!1),Ot=async p=>{p||(jt.value=!0);let s;try{s=await Pa()}catch(B){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:787 ~ setMarketPrice ~ error:",B)}if(Z.value="",console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:794 ~ setMarketPrice ~ res:",s),!s||s.outputAmount.toNumber()<=0&&s.inputAmount.toNumber()<=0)return Ve.value=!1,ye.value="",pe.value="",Z.value="",!1;Ve.value=!0,p?oe.value=Y.value?ge(s.outputAmount.div(s.inputAmount).toString()):ge(s.inputAmount.div(s.outputAmount).toString()):L.value=Y.value?ge(s.outputAmount.div(s.inputAmount).toString()):ge(s.inputAmount.div(s.outputAmount).toString()),setTimeout(()=>{jt.value=!1},1e3)},zt=f(!1),Wt=async()=>{zt.value=!0,await Ot(!0),ye.value="",pe.value="",Z.value="";const p=new h(L.value).sub(new h(oe.value)).div(new h(oe.value)).mul(100);Z.value=p.toNumber().toFixed(2);const s=Math.abs(p.toNumber()).toFixed(2);pe.value=`Limit order price is ${s}% ${Z.value>0?"higher":"lower"} than the market.`,Y.value?L.value>oe.value?(ye.value="",we.value="#68FFD8"):oe.value>L.value&&(ye.value=`Your limit order price is ${s}% ${Z.value>0?"higher":"lower"} than market. You are selling at a much higher rate. We recommend you to use`,we.value="#ffb62d"):L.value>oe.value?(ye.value=`Your limit order price is ${s}% ${Z.value>0?"higher":"lower"} than market. You are buying at a much lower rate. We recommend you to use`,we.value="#ffb62d"):oe.value>L.value&&(ye.value="",we.value="#68FFD8"),zt.value=!1};ae(()=>[b.value,x.value],([p,s])=>{p&&s&&(L.value="",Ot(!1))},{immediate:!0});const it=f(!1),Ra=p=>{const s=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,18})?).*$");p.target.value=p.target.value.replace(s,"$1"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1002 ~ priceChange ~ e.target.value:",p.target.value),L.value=p.target.value,ye.value="",pe.value="",Z.value="",it.value=!0,L.value&&L.value>0&&Pe.value&&Wt()},Aa=()=>{Y.value=!Y.value,L.value=ge(new h(1).div(new h(L.value)).toString()),L.value>0&&Pe.value&&Wt()},Ye=f(),Ke=f(),Lt=f(!1),la=(p,s)=>{var K,te;const B=ze.importTokenListObj;p&&!Ae(p)&&p!=null&&p.isSelfBuilt&&!(B!=null&&B.hasOwnProperty(p==null?void 0:p.address))&&(r.value="fromCoin",Ye.value=p),s&&!Ae(s)&&s!=null&&s.isSelfBuilt&&!(B!=null&&B.hasOwnProperty(s==null?void 0:s.address))&&(r.value="toCoin",Ke.value=s),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1034 ~ getTokenSource ~ warningFromCoin.value:",Ye.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1046 ~ getTokenSource ~ warningToCoin.value:",Ke.value),((K=Ye==null?void 0:Ye.value)!=null&&K.address||(te=Ke==null?void 0:Ke.value)!=null&&te.address)&&(Lt.value=!0)};ae(()=>[b.value,x.value],([p,s])=>{p&&!Ae(p)&&la(p,{}),s&&!Ae(s)&&la({},s)},{immediate:!0});const Ha=()=>{r.value==="fromCoin"?b.value=ue.value:x.value=ue.value,Lt.value=!1,Ye.value="",Ke.value=""},Ua=w(()=>{var p,s;return`/swap?from=${(p=b==null?void 0:b.value)==null?void 0:p.address}&to=${(s=x==null?void 0:x.value)==null?void 0:s.address}`}),Ba=Ka();ae(()=>[b.value,x.value],([p,s])=>{if(p&&s){if(Ct(),he(),p||s){const B=`/limit/${p==null?void 0:p.address}-${s==null?void 0:s.address}`;Ba.push(B)}}else _e.setHaveMarket(!1)},{immediate:!0});const Tt=f(!1),Vt=w(()=>et.value.isShowChart),Yt=f(!0),Kt=f(!1);return(p,s)=>{var Re,Oe,ia,oa;const B=ea,K=$t,te=lt,gt=Xt,Ce=es;return u(),y("div",fn,[e("div",hn,[e("div",yn,[N($a,{"tab-list":_,"current-tab":"limit",onClickTab:s[0]||(s[0]=P=>p.$router.push(P.link))}),e("div",bn,[N(B,{"overlay-class-name":"new-style-tooltip"},{title:j(()=>[e("div",wn,o(Vt.value?"Hide reference price":"View reference price"),1)]),default:j(()=>[e("div",$n,[(u(),y("svg",{class:Q(["chart-icon",Vt.value?"active-chart-icon":""]),"aria-hidden":"true",onClick:s[1]||(s[1]=P=>a(_e).setIsShowChart(!Vt.value))},Sn,2))])]),_:1}),e("div",kn,[N(ts,{loading:V.value,"auto-refresh-time":ee.value,countdown:xe.value,"tooltip-placement":"left",onClickRefresh:se},null,8,["loading","auto-refresh-time","countdown"])])])]),e("div",Cn,[e("div",{class:Q(["card-container",[Yt.value?"input-block-add-top":"",Kt.value?"input-block-add-bottom":""]])},[N(va,{modelValue:a(E),"onUpdate:modelValue":s[2]||(s[2]=P=>ra(E)?E.value=P:null),"input-value":a(E),"coin-symbol":a(b)?a(b).symbol:null,"coin-name":a(b)?a(b).name:null,balance:m.value,"coin-icon":a(b)?a(b).logo_url:"",address:a(b)?a(b).address:"","swap-direction":"From",title:"Sell",onOnMax:s[3]||(s[3]=P=>l("fromCoin")),onOnHalf:s[4]||(s[4]=P=>C("fromCoin")),onOnInput:s[5]||(s[5]=P=>{E.value=P,W.value=!0,it.value=!1}),onOnFocus:s[6]||(s[6]=()=>{Yt.value=!0,Kt.value=!1}),onOnSelect:s[7]||(s[7]=P=>d("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),N(va,{modelValue:a(R),"onUpdate:modelValue":s[8]||(s[8]=P=>ra(R)?R.value=P:null),"input-value":a(R),havemax:!1,"coin-symbol":a(x)?a(x).symbol:null,"coin-name":a(x)?a(x).name:null,balance:v.value,"swap-direction":"To","coin-icon":a(x)?a(x).logo_url:"",address:a(x)?a(x).address:"",havehalf:!1,title:"Buy",onOnInput:s[9]||(s[9]=P=>{R.value=P,W.value=!1,it.value=!1}),onOnFocus:s[10]||(s[10]=()=>{Yt.value=!1,Kt.value=!0}),onOnSelect:s[11]||(s[11]=P=>d("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),e("div",{class:"exchange new-sui-exchange",onClick:s[12]||(s[12]=(...P)=>a(ha)&&a(ha)(...P))},Ln)]),e("div",Tn,[e("div",In,[e("div",Mn,[e("div",null,[Y.value?(u(),y("div",Nn," Sell "+o((Re=a(b))==null?void 0:Re.symbol)+" at rate",1)):(u(),y("div",En,"Buy "+o((Oe=a(x))==null?void 0:Oe.symbol)+" at rate ",1)),zt.value?(u(),F(K,{key:2,indicator:a(c)},null,8,["indicator"])):(u(),F(B,{key:3},qa({default:j(()=>[L.value&&oe.value&&Ve.value&&Number(Z.value)!==0?(u(),y("div",{key:0,class:"rate",style:Jt({color:we.value})},o(Number(Z.value)>0&&Number(Z.value)<1e4?`+${Z.value}`:Number(Z.value)>1e4?">10000":Z.value)+"% ",5)):D("",!0)]),_:2},[pe.value?{name:"title",fn:j(()=>[U(o(pe.value),1)]),key:"0"}:void 0]),1024))]),Ve.value?(u(),F(te,{key:0,loading:jt.value,class:"set-market max-btn",onClick:s[13]||(s[13]=P=>Ot(!1))},{default:j(()=>[U("Market")]),_:1},8,["loading"])):D("",!0)]),e("div",Pn,[N(gt,{value:L.value,"onUpdate:value":s[14]||(s[14]=P=>L.value=P),placeholder:"0.0",onOnInput:s[15]||(s[15]=()=>{W.value=!0}),onChange:Ra},null,8,["value"]),e("div",Rn,[e("span",null,o(Y.value?(ia=a(x))==null?void 0:ia.symbol:(oa=a(b))==null?void 0:oa.symbol),1),e("div",{class:"right",onClick:Aa},Hn)])])]),e("div",{class:"sell-expires",onClick:s[17]||(s[17]=Bt(P=>k.value=!k.value,["stop"]))},[e("div",Un,[Bn,N(B,{"overlay-class-name":"expiry-tooltip",placement:"left"},{title:j(()=>[U("No extra cancellation fee will be charged for order expiry or cancellation. Gas will be consumed upon manual cancellation.")]),default:j(()=>[(u(),y("svg",{class:"icon","aria-hidden":"true",onClick:s[16]||(s[16]=Bt(()=>{},["stop"]))},Fn))]),_:1})]),e("div",jn,[e("span",null,o(M.value),1),(u(),y("svg",{class:"icon","aria-hidden":"true",style:Jt(k.value?{transform:"rotate(180deg)"}:{})},Wn,4))]),e("div",{class:"expires-list",style:Jt(k.value?{display:"block"}:{})},[(u(),y(G,null,Ue(O,P=>e("div",{key:P,class:Q(["expirer-item",P==M.value?"expirer-item-active":""]),onClick:Io=>P=="Custom"?z.value=!0:M.value=P},o(P),11,Vn)),64))],4)])]),le(e("div",Yn,[U(o(ye.value)+" ",1),e("span",{onClick:s[18]||(s[18]=P=>p.$router.push(Ua.value))},"Cetus Swap"),U(" instead. ")],512),[[dt,L.value&&oe.value&&Number(Z.value)!==0&&ye.value&&Ve.value]])]),$.value&&$.value.address?(u(),F(te,{key:0,disabled:je.value,class:Q(["place-order-btn",ve.value&&ve.value.length>40?"place-order-btn-size":""]),loading:Ee.value,onClick:s[19]||(s[19]=P=>Tt.value=!0)},{default:j(()=>[U(o(ve.value),1)]),_:1},8,["disabled","class","loading"])):(u(),F(te,{key:1,class:"place-order-btn",onClick:s[20]||(s[20]=P=>$.value.setIsShowWalletModal(!0))},{default:j(()=>[U("Connect wallet")]),_:1})),z.value?(u(),F(Us,{key:2,onCloseModal:s[21]||(s[21]=P=>z.value=!1),onSendTime:re})):D("",!0),T.value?(u(),F(as,{key:3,"existing-coins":i.value,"last-select-coin":I.value,"have-import-btn":!0,onOnSelect:fe,onOnClose:s[22]||(s[22]=P=>T.value=!1)},null,8,["existing-coins","last-select-coin"])):D("",!0),Lt.value?(u(),F(Ce,{key:4,"from-coin":Ye.value,"to-coin":Ke.value,"is-import-modal":!0,onClose:Ha,onClickContinue:s[23]||(s[23]=()=>{Lt.value=!1,Ye.value="",Ke.value=""})},null,8,["from-coin","to-coin"])):D("",!0),Tt.value?(u(),F(gn,{key:5,"from-coin":a(b),"to-coin":a(x),"from-coin-amount":a(E),"to-coin-amount":a(R),direction:Y.value,price:L.value,"current-expires":M.value,onClose:s[24]||(s[24]=P=>Tt.value=!1),onToTrade:ne},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","direction","price","current-expires"])):D("",!0)])}}});const Go=de(Kn,[["__scopeId","data-v-e45c9e33"]]),Oa=t=>(Te("data-v-5890ec9c"),t=t(),Ie(),t),qn={key:0,class:"no-data"},Jn=Oa(()=>e("img",{src:ss,alt:""},null,-1)),Gn={key:1,class:"no-data"},Zn=Oa(()=>e("img",{src:ns,alt:""},null,-1)),Qn=ce({__name:"trade-no-data",props:{platform:{type:String,default:"platform"}},setup(t){const c=Be(),n=g=>{switch(g){case"orders":return"You don't have any open orders yet.";case"history":return"You don't have any order history.";case"claim":return"No History."}},_=w(()=>c);return(g,$)=>{const m=lt;return _.value&&_.value.address?(u(),y("div",qn,[Jn,e("span",null,o(n(t.platform)),1)])):(u(),y("div",Gn,[Zn,N(m,{class:"connect-wallet",onClick:$[0]||($[0]=v=>_.value.setIsShowWalletModal(!0))},{default:j(()=>[U("Connect Wallet")]),_:1})]))}}});const na=de(Qn,[["__scopeId","data-v-5890ec9c"]]),Xn={class:"trade-info"},el={alt:""},tl={alt:""},al=ce({__name:"trade-info",props:{order:{type:Object,default:()=>({})}},setup(t){return(c,n)=>{var $,m,v,l,C,r,i,I,T,d,O,S,k,M;const _=wa,g=Dt("image");return u(),y("div",Xn,[e("div",null,[le(e("img",el,null,512),[[g,(m=($=t.order)==null?void 0:$.pay_coin_info)==null?void 0:m.logo_url]]),N(_,{address:(l=(v=t.order)==null?void 0:v.pay_coin_info)==null?void 0:l.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[le(e("img",tl,null,512),[[g,(r=(C=t.order)==null?void 0:C.target_coin_info)==null?void 0:r.logo_url]]),N(_,{address:(I=(i=t.order)==null?void 0:i.target_coin_info)==null?void 0:I.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o(a(A)((T=t.order)==null?void 0:T.total_pay_amount))+" "+o((O=(d=t.order)==null?void 0:d.pay_coin_info)==null?void 0:O.symbol)+" â†’ "+o(a(A)((S=t.order)==null?void 0:S.totalBuyNum))+" "+o((M=(k=t.order)==null?void 0:k.target_coin_info)==null?void 0:M.symbol),1)])}}});const kt=de(al,[["__scopeId","data-v-bb33266f"]]),Qe=t=>(Te("data-v-34840059"),t=t(),Ie(),t),sl={class:"claim-modal-content"},nl=Qe(()=>e("div",{class:"desc"}," For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ",-1)),ll={class:"order-info-detail"},il={class:"order-info"},ol=Qe(()=>e("div",{class:"label"},"Price",-1)),rl={class:"text"},ul=Qe(()=>e("div",{class:"label"},"Filled size",-1)),cl={class:"text"},dl=Qe(()=>e("div",{class:"label"},"Expiry",-1)),vl={class:"text"},_l={class:"tab"},ml=["onClick"],pl={key:0,class:"claim-content"},gl={class:"inp-box"},fl=Qe(()=>e("div",{class:"top"},[e("div",{class:"avalibale-claim"},"Avalibale to claim")],-1)),hl={class:"bottom"},yl={class:"token-info"},bl={alt:""},wl={key:1,class:"history-list"},$l={class:"amount"},xl=Qe(()=>e("div",{class:"label"},"Amount",-1)),Sl={class:"text"},kl={alt:""},Cl={class:"time"},Ol=Qe(()=>e("div",{class:"label"},"Time",-1)),Ll={class:"text"},Tl=["href"],Il=Qe(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),Ml=[Il],Nl={key:2,class:"loading-box"},El=ce({__name:"trade-claim-modal",props:{order:{type:Object,default:()=>({})}},emits:["closeModal"],setup(t,{emit:c}){const n=t,_=["Claim","History"],g=f("Claim"),$=f(),m=V=>{const se=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${n.order.target_coin_info.decimals}})?).*$`);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ props.order.target_coin_info.decimals:",n.order.target_coin_info.decimals),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ reg:",se),$.value=V.target.value.replace(se,"$1")},v=f(!0);ae(()=>n.order.target_balance,V=>{V&&V>0&&v.value?($.value=V,v.value=!1):$.value=0},{immediate:!0});const l=w(()=>!!($.value>n.order.target_balance||X.value||!$.value||n.order.target_balance==0)),C=w(()=>$.value>n.order.target_balance?"Maximum amount that can be withdrawn":$.value?"Confirm Claim":"Claim"),r=mt(),i=w(()=>r),I=Be(),T=w(()=>I),d=He("Sui"),{setTransactionTxid:O,setIsShowWaiting:S,setIsShowSuccess:k,setIsShowRejected:M,setTransactionDesc:z}=r,L=Ft("Sui"),X=f(!1),re=Me(),ue=w(()=>re),fe=async()=>{var V,se;X.value=!0;try{const be=`Claim ${A($.value)} ${(se=(V=n.order)==null?void 0:V.target_coin_info)==null?void 0:se.symbol}`;z(be),S(!0);const he={order_id:n.order.id,pay_coin_type:n.order.pay_coin_type,target_coin_type:n.order.target_coin_type};console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:194 ~ confirmClaim ~ params:",he);const Fe=await d.claimTargetCoin(he),Ne=await L.signAndExecuteTransactionBlock(T.value.currentWallet,Fe),ie=L.handleTx(Ne);if(ie&&ie.hash){O(ie.hash),S(!1),k(!0);const ve={title:"Transaction",desc:"Claim successfully",hash:ie.hash,icon:"icon-icon-Increased"};ve.res=ie.res,L.showTransitionPending(ve),await L.watchTransaction(ve)&&(setTimeout(()=>{L.getAccount(T.value.address),re.getOrderList()},2e3),setTimeout(()=>{$.value=0,X.value=!1},4e3))}else S(!1),M(!0)}catch(be){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:222 ~ confirmClaim ~ error:",be),S(!1),M(!0),X.value=!1}};ae(()=>g.value,V=>{V=="History"&&re.getLimitOrderClaimHistory(n.order)},{immediate:!0});const ee=w(()=>ue.value.currentOrderClaimHistory),xe=w(()=>i.value.currentExplorer),Se=w(()=>ue.value.claimHistoryLoading);return(V,se)=>{const be=Xt,he=lt,Fe=$t,Ne=Dt("image");return u(),F(a(Qt),{title:"Claim",visible:!0,width:"440px",footer:null,onCancel:se[1]||(se[1]=ie=>V.$emit("closeModal"))},{default:j(()=>{var ie,ve,je,_e,et,ze,tt,ke,at,We,st,Ee,me;return[e("div",sl,[nl,e("div",ll,[N(kt,{order:t.order},null,8,["order"]),e("div",il,[e("div",null,[ol,e("div",rl,o(a(A)(t.order.reseverRate))+" "+o((ve=(ie=t.order)==null?void 0:ie.pay_coin_info)==null?void 0:ve.symbol)+" per "+o((_e=(je=t.order)==null?void 0:je.target_coin_info)==null?void 0:_e.symbol),1)]),e("div",null,[ul,e("div",cl,[U(o(a(A)((et=t.order)==null?void 0:et.obtained_amount))+"/"+o(a(A)((ze=t.order)==null?void 0:ze.totalBuyNum))+" "+o((ke=(tt=t.order)==null?void 0:tt.target_coin_info)==null?void 0:ke.symbol)+" ",1),e("span",null,"("+o((at=t.order)==null?void 0:at.obtainedRatio)+"%)",1)])]),e("div",null,[dl,e("div",vl,o(a(Ge)(t.order.expire_ts,""))+" (UTC) ",1)])])]),e("div",_l,[(u(),y(G,null,Ue(_,ne=>e("div",{key:ne,class:Q(["tab-item",g.value==ne?"tab-item-active":""]),onClick:Y=>g.value=ne},o(ne),11,ml)),64))]),g.value=="Claim"?(u(),y("div",pl,[e("div",gl,[fl,e("div",hl,[N(be,{value:$.value,"onUpdate:value":se[0]||(se[0]=ne=>$.value=ne),disabled:"",onChange:m},null,8,["value"]),e("div",yl,[le(e("img",bl,null,512),[[Ne,(st=(We=t.order)==null?void 0:We.target_coin_info)==null?void 0:st.logo_url]]),e("span",null,o((me=(Ee=t.order)==null?void 0:Ee.target_coin_info)==null?void 0:me.symbol),1)])])]),N(he,{disabled:l.value,class:"claim-btn",loading:X.value,onClick:fe},{default:j(()=>[U(o(C.value),1)]),_:1},8,["disabled","loading"])])):(u(),y("div",wl,[!Se.value&&ee.value&&ee.value.length>0?(u(!0),y(G,{key:0},Ue(ee.value,ne=>{var Y,oe,pe,we;return u(),y("div",{key:ne.digest,class:"history-item"},[e("div",$l,[xl,e("div",Sl,[le(e("img",kl,null,512),[[Ne,(oe=(Y=t.order)==null?void 0:Y.target_coin_info)==null?void 0:oe.logo_url]]),e("span",null,o(a(A)(ne.claimed_amount))+" "+o((we=(pe=t.order)==null?void 0:pe.target_coin_info)==null?void 0:we.symbol),1)])]),e("div",Cl,[Ol,e("div",Ll,[e("span",null,o(a(Ge)(Number(ne.timestampMs),""))+" (UTC)",1),e("a",{target:"_blank",href:a(ta)(xe.value,"tx",ne.digest)},Ml,8,Tl)])])])}),128)):!Se.value&&ee.value&&ee.value.length==0?(u(),F(na,{key:1,platform:"claim"})):Se.value&&ee.value&&ee.value.length==0?(u(),y("div",Nl,[N(Fe)])):D("",!0)]))])]}),_:1})}}});const La=de(El,[["__scopeId","data-v-34840059"]]),pt=t=>(Te("data-v-dfbe78bf"),t=t(),Ie(),t),Pl={class:"trade-order-card-list"},Rl={class:"order-info"},Al=pt(()=>e("div",{class:"label"},"Price",-1)),Hl={class:"text"},Ul=["onClick"],Bl=pt(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Dl=pt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Fl=[Bl,Dl],jl=pt(()=>e("div",{class:"label"},"Filled size",-1)),zl={class:"text"},Wl=pt(()=>e("div",{class:"label"},"Expiry",-1)),Vl={class:"text"},Yl=pt(()=>e("div",{class:"trade-claim-btn trade-claim-btn-disabled"},"Claim",-1)),Kl=ce({__name:"trade-order-card",props:{pageList:{type:Object,default:()=>({})}},setup(t){const c=f(),n=f(!1),_=Me(),g=w(()=>_),$=w(()=>g.value.cancelOrderId);return(m,v)=>{const l=ea,C=lt,r=La;return u(),y("div",Pl,[(u(!0),y(G,null,Ue(t.pageList,i=>{var I,T,d,O,S;return u(),y("div",{key:i.id,class:"trade-order-card"},[N(kt,{order:i},null,8,["order"]),e("div",Rl,[e("div",null,[Al,e("div",Hl,[i.direction?(u(),y(G,{key:0},[U(o(a(A)(i==null?void 0:i.rate))+" "+o((I=i==null?void 0:i.target_coin_info)==null?void 0:I.symbol)+" per "+o((T=i==null?void 0:i.pay_coin_info)==null?void 0:T.symbol),1)],64)):(u(),y(G,{key:1},[U(o(a(A)(i==null?void 0:i.reseverRate))+" "+o((d=i==null?void 0:i.pay_coin_info)==null?void 0:d.symbol)+" per "+o((O=i==null?void 0:i.target_coin_info)==null?void 0:O.symbol),1)],64)),e("div",{class:"right",onClick:k=>i.direction=!i.direction},Fl,8,Ul)])]),e("div",null,[jl,e("div",zl,[U(o(a(A)(i==null?void 0:i.obtained_amount))+"/"+o(a(A)(i==null?void 0:i.totalBuyNum))+" "+o((S=i==null?void 0:i.target_coin_info)==null?void 0:S.symbol)+" ",1),e("span",null,"("+o(i==null?void 0:i.obtainedRatio)+"%)",1)])]),e("div",null,[Wl,e("div",Vl,o(a(Ge)(i.created_ts,""))+" (UTC)",1)])]),i.target_balance==0&&i.obtained_amount==0?(u(),F(l,{key:0},{title:j(()=>[U(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:j(()=>[Yl]),_:1})):(u(),F(C,{key:1,class:"trade-claim-btn",onClick:()=>{c.value=i,n.value=!0}},{default:j(()=>[U("Claim")]),_:2},1032,["onClick"])),N(C,{class:"trade-cancel-btn",loading:$.value=="all"||$.value==i.id,onClick:k=>a(sa)(i)},{default:j(()=>[U("Cancel")]),_:2},1032,["loading","onClick"])])}),128)),n.value?(u(),F(r,{key:0,order:c.value,onCloseModal:v[0]||(v[0]=i=>n.value=!1)},null,8,["order"])):D("",!0)])}}});const ql=de(Kl,[["__scopeId","data-v-dfbe78bf"]]),Jl=ce({props:{currentPageNum:{type:Number,default:null},pageSize:{type:[Number,String],default:""},total:{type:Number,default:null}},setup(t){return{itemRender:(n,_,g)=>(n==null?void 0:n.type)==="page"?ot("span",{},`Page ${t.currentPageNum} of ${Math.ceil(t.total/t.pageSize)}`):(n==null?void 0:n.type)==="prev"?ot("svg",{class:"icon icon-prev","aria-hidden":"true"},[ot("use",{"xlink:href":"#icon-icon_left"})]):(n==null?void 0:n.type)==="next"?ot("svg",{class:"icon icon-next","aria-hidden":"true"},[ot("use",{"xlink:href":"#icon-icon_right"})]):g}}});function Gl(t,c,n,_,g,$){const m=Ga;return u(),F(m,{current:t.currentPageNum,"page-size":t.pageSize,"item-render":t.itemRender,total:t.allList&&t.allList.length,onChange:c[0]||(c[0]=v=>{t.$emit("change",v)})},null,8,["current","page-size","item-render","total"])}const Ta=de(Jl,[["render",Gl]]),Ia=t=>(Te("data-v-4e5494d6"),t=t(),Ie(),t),Zl={class:"trade-orders"},Ql={key:0},Xl=Ia(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Price"),e("th",null,"Filled size"),e("th",null,"Expiry"),e("th",null,"Action")])],-1)),ei={class:"order-price"},ti=["onClick"],ai=Ia(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),si=[ai],ni={class:"filled-size"},li={class:"action"},ii={key:4,class:"loading-box"},oi=ce({__name:"trade-orders",setup(t){const c=Be(),n=w(()=>c),_=Me(),g=w(()=>_);w(()=>g.value.limitOrderList);const $=xt(),m=w(()=>$);w(()=>m.value.tokensObj),ae(()=>n.value.address,C=>{C&&_.getOrderList()},{immediate:!0});const v=w(()=>g.value.orderListLoading),l=(C,r)=>{console.log(C,"page"),ht.value=C};return(C,r)=>{const i=lt,I=ea,T=$t;return u(),y("div",Zl,[n.value&&n.value.address&&a(J)&&a(J).length>0?(u(),y("table",Ql,[Xl,e("tbody",null,[(u(!0),y(G,null,Ue(a(J),d=>{var O,S,k,M,z;return u(),y("tr",{key:d.id},[e("td",null,[N(kt,{order:d},null,8,["order"])]),e("td",null,[e("div",ei,[d.direction?(u(),y(G,{key:0},[U(o(a(A)(d==null?void 0:d.rate))+" "+o((O=d==null?void 0:d.target_coin_info)==null?void 0:O.symbol)+" per "+o((S=d==null?void 0:d.pay_coin_info)==null?void 0:S.symbol),1)],64)):(u(),y(G,{key:1},[U(o(a(A)(d==null?void 0:d.reseverRate))+" "+o((k=d==null?void 0:d.pay_coin_info)==null?void 0:k.symbol)+" per "+o((M=d==null?void 0:d.target_coin_info)==null?void 0:M.symbol),1)],64)),e("div",{class:"right",onClick:()=>{d.direction=!d.direction,a(fs)(d)}},si,8,ti)])]),e("td",null,[e("div",ni,[U(o(a(A)(d==null?void 0:d.obtained_amount))+"/"+o(a(A)(d==null?void 0:d.totalBuyNum))+" "+o((z=d==null?void 0:d.target_coin_info)==null?void 0:z.symbol)+" ",1),e("span",null,"("+o(d==null?void 0:d.obtainedRatio)+"%)",1)])]),e("td",null,o(a(Ge)(d==null?void 0:d.expire_ts,""))+" (UTC)",1),e("td",null,[e("div",li,[N(I,{"overlay-class-name":"expiry-tooltip new-tooltip-border-radius"},{title:j(()=>[U(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:j(()=>[N(i,{class:"trade-claim-btn",disabled:d.target_balance==0&&d.obtained_amount==0,onClick:()=>{ut.value=d,Gt.value=!0}},{default:j(()=>[U("Claim")]),_:2},1032,["disabled","onClick"])]),_:2},1024),N(i,{class:"trade-cancel-btn",loading:a(ya)=="all"||a(ya)==d.id,onClick:L=>a(sa)(d)},{default:j(()=>[U("Cancel")]),_:2},1032,["loading","onClick"])])])])}),128))])])):D("",!0),n.value&&n.value.address&&a(J)&&a(J).length>0?(u(),F(ql,{key:1,"page-list":a(J)},null,8,["page-list"])):D("",!0),(a(J)&&a(J).length==0||!n.value.address)&&!v.value?(u(),F(na,{key:2,platform:"orders"})):D("",!0),a(J)&&a(J).length>0?(u(),y("div",{key:3,class:Q(["pagination",a(J)&&a(J).length>0&&v.value?"loading-pagination":""])},[N(Ta,{"page-size":a(Pt),total:a(yt)&&a(yt).length,"current-page-num":a(ht),onChange:l},null,8,["page-size","total","current-page-num"])],2)):D("",!0),a(J)&&a(J).length==0&&v.value?(u(),y("div",ii,[N(T)])):D("",!0),a(J)&&a(J).length>0&&v.value?(u(),F(T,{key:5,class:"order-spin"})):D("",!0),a(Gt)?(u(),F(La,{key:6,order:a(ut),onCloseModal:r[0]||(r[0]=d=>Gt.value=!1)},null,8,["order"])):D("",!0)])}}});const ri=de(oi,[["__scopeId","data-v-4e5494d6"]]),vt=t=>{switch(t){case"Running":return{class:"order-running",path:"#icon-icon_completed"};case"Completed":return{class:"order-running",path:"#icon-icon_completed"};case"Cancelled":return{class:"order-cancelled",path:"#icon-icon_cancelled"};default:return{class:"",path:""}}},Je=t=>{switch(t){case"OrderPlacedEvent":return{path:"#icon-tx_add1",class:"order-status-create",text:"Create"};case"OrderCanceledEvent":return{path:"#icon-icon_cancelled",class:"order-status-cancel",text:"Cancel"};case"FlashLoanEvent":return{path:"#icon-tx_swap1",class:"order-status-trade",text:"Trade"};default:return{path:"",class:"",text:""}}},_t=Me(),$e=f({}),Ma=(t,c)=>{$e.value[c]?$e.value[c]=!1:($e.value[c]=!0,_t.getLimitOrderLogs()),console.log($e.value,"##isShowPosition.value")},ui=Be(),Na=w(()=>ui),ci=xt(),di=w(()=>ci),At=w(()=>di.value.tokensObj),Ea=w(()=>_t),Ht=w(()=>Ea.value.limitOrderHistoryList),ba=Ft("Sui"),vi=He("Sui"),bt=f(1),Ut=f(10),q=f([]),wt=f([]),_i=async()=>{const t=Ut.value*bt.value-Ut.value;let c=bt.value*Ut.value;c=c>Ht.value.length?Ht.value.length:c;const n=Ht.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:174 ~ updateOrderList ~ result:",n),console.log("trade-card updateOrderList tokenObj",At.value);const _=[];if(n.length>0){const g=n.filter(($,m)=>m>=t&&m<c);for(let $=0;$<g.length;$++){const m=g[$];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:188 ~ updateOrderList ~ order:",m,m.order_id);const v=At.value[It(m.pay_coin,!1)]||await ba.getTokenBySymbol({},It(m.pay_coin,!1)),l=At.value[It(m.target_coin,!1)]||await ba.getTokenBySymbol({},It(m.target_coin,!1)),C=ge(vi.rateToPrice(m.rate,v.decimals,l.decimals).toString(),v.decimals);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:211 ~ updateOrderList ~ rate:",C);const r=new h(m.total_pay_amount).div(Math.pow(10,v.decimals)).toString(),i=new h(m.remaining_amount).div(Math.pow(10,v.decimals)).toString(),I=new h(r).sub(new h(i)).toString(),T=new h(m.total_pay_amount).mul(new h(Math.pow(10,18))).div(new h(m.rate)).ceil().div(new h(Math.pow(10,l.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:226 ~ updateOrderList ~ order.rate:",m.rate);const d=ge(new h(1).div(new h(C)).toString()),O=m.events.map(S=>{const k=S.event_type.split("::")[2];let M="";return k=="OrderPlacedEvent"?M=new h(S.amount).div(Math.pow(10,v.decimals)).toString():k=="FlashLoanEvent"?M=new h(S.amount).div(Math.pow(10,l.decimals)).toString():k=="OrderCanceledEvent"&&(M=new h(S.amount).div(Math.pow(10,v.decimals)).toString()),{...S,amount:M,type:k}}).sort((S,k)=>k.block_time-S.block_time);_.push({...m,pay_coin_info:v,target_coin_info:l,total_pay_amount:r,rate:C,remaining_amount:i,transaction_ratio:qe(new h(m.total_pay_amount).sub(new h(m.remaining_amount)).div(new h(m.total_pay_amount)).mul(100).toString(),2),transaction_volume:I,status:m.cancel_reason==0?"Completed":"Cancelled",events:O,totalBuyNum:T,reseverRate:d,direction:!0})}q.value=_}wt.value=n,_t.setHistoryNum(n.length),console.log("allList",wt.value),console.log("pageList",q.value)},mi=(t,c)=>{console.log(t,"page"),bt.value=t};ae(()=>[Ht.value,bt.value,At.value,Na.value.address],([t,c,n,_])=>{t&&t.length>0&&n&&!Ae(n)&&_?_i():(q.value=[],wt.value=[],_t.setHistoryNum(0))},{immediate:!0});ae(()=>Na.value.address,t=>{t&&(_t.getLimitOrderLogs(),_t.getLimitOrderHistory(t))},{immediate:!0});const Et=w(()=>Ea.value.orderHistoryLoading),De=t=>(Te("data-v-c7971788"),t=t(),Ie(),t),pi={class:"history-card-list"},gi={class:"history-info"},fi=De(()=>e("div",{class:"label"},"Limit price",-1)),hi={class:"text"},yi=["onClick"],bi=De(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),wi=De(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),$i=[bi,wi],xi=De(()=>e("div",{class:"label"},"Expiry",-1)),Si={class:"text"},ki=De(()=>e("div",{class:"label"},"Filled size",-1)),Ci={class:"text"},Oi=De(()=>e("div",{class:"label"},"Status",-1)),Li={class:"text"},Ti=["onClick"],Ii=["xlink:href"],Mi=De(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Ni=[Mi],Ei={class:"order-log-num"},Pi={class:"order-status"},Ri=["xlink:href"],Ai={class:"create-ts"},Hi={key:0},Ui={key:1},Bi={class:"view-trans"},Di=["href"],Fi=De(()=>e("span",null,"View Txn.",-1)),ji=De(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),zi=[Fi,ji],Wi=ce({__name:"trade-history-card",props:{pageList:{type:Object,default:()=>[]}},setup(t){const c=mt(),n=w(()=>c),_=w(()=>n.value.currentExplorer),g=Me(),$=w(()=>g);return w(()=>$.value.orderHistoryObj),(m,v)=>(u(),y("div",pi,[(u(!0),y(G,null,Ue(t.pageList,(l,C)=>{var r,i,I,T,d;return u(),y("div",{key:l.expire_ts,class:"history-card-item"},[N(kt,{order:l},null,8,["order"]),e("div",gi,[e("div",null,[fi,e("div",hi,[l.direction?(u(),y(G,{key:1},[U(o(a(A)(l==null?void 0:l.reseverRate))+" "+o((I=l==null?void 0:l.pay_coin_info)==null?void 0:I.symbol)+" per "+o((T=l==null?void 0:l.target_coin_info)==null?void 0:T.symbol),1)],64)):(u(),y(G,{key:0},[U(o(a(A)(l==null?void 0:l.rate))+" "+o((r=l==null?void 0:l.target_coin_info)==null?void 0:r.symbol)+" per "+o((i=l==null?void 0:l.pay_coin_info)==null?void 0:i.symbol),1)],64)),e("div",{class:"right",onClick:Bt(O=>l.direction=!l.direction,["stop"])},$i,8,yi)])]),e("div",null,[xi,e("div",Si,o(a(Ge)(l==null?void 0:l.expire_ts,""))+" (UTC)",1)]),e("div",null,[ki,e("div",Ci,[U(o(a(A)(l==null?void 0:l.transaction_volume))+"/"+o(a(A)(l==null?void 0:l.total_pay_amount))+" "+o((d=l==null?void 0:l.pay_coin_info)==null?void 0:d.symbol)+" ",1),e("span",null,"("+o(l==null?void 0:l.transaction_ratio)+"%)",1)])]),e("div",null,[Oi,e("div",Li,[e("div",{class:"order-status",onClick:O=>a(Ma)(l,C)},[(u(),y("svg",{class:Q(["order-status-icon",a(vt)(l.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(vt)(l.status).path},null,8,Ii)],2)),e("span",{class:Q(a(vt)(l.status).class)},o(l.status),3),(u(),y("svg",{class:Q(["arrow-icon",a($e)[C]?"open-arrow":""]),"aria-hidden":"true"},Ni,2))],8,Ti)])])]),a($e)[C]?(u(!0),y(G,{key:0},Ue(l.events,O=>{var S,k,M;return u(),y("div",{key:O,class:"order-log"},[e("div",Ei,[e("div",Pi,[e("div",null,[(u(),y("svg",{class:Q(["status-icon",a(Je)(O.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Je)(O.type).path},null,8,Ri)],2)),e("span",{class:Q(["text-status",a(Je)(O.type).class])},o(a(Je)(O.type).text),3)]),e("div",Ai,o(a(Ge)(Number(O.block_time),""))+" (UTC) ",1)]),e("div",null,[O.type=="FlashLoanEvent"?(u(),y("span",Hi,"+"+o(a(A)(O.amount))+" "+o((S=l==null?void 0:l.buy_coin_info)==null?void 0:S.symbol)+" "+o((k=l==null?void 0:l.target_coin_info)==null?void 0:k.symbol),1)):(u(),y("span",Ui,o(O.type=="OrderPlacedEvent"?"-":"+")+o(a(A)(O.amount))+" "+o((M=l==null?void 0:l.pay_coin_info)==null?void 0:M.symbol),1)),e("div",Bi,[e("a",{href:a(ta)(_.value,"tx",O.tx),target:"_blank"},zi,8,Di)])])])])}),128)):D("",!0)])}),128))]))}});const Vi=de(Wi,[["__scopeId","data-v-c7971788"]]),Xe=t=>(Te("data-v-a0a3a578"),t=t(),Ie(),t),Yi={class:"trade-history"},Ki={key:0},qi=Xe(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Limit price"),e("th",null,"Expiry"),e("th",null,"Filled size"),e("th",null,"Status")])],-1)),Ji=["onClick"],Gi={class:"order-price"},Zi=["onClick"],Qi=Xe(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Xi=Xe(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),eo=[Qi,Xi],to={class:"order-status"},ao=["xlink:href"],so=Xe(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),no=[so],lo={class:"order-log"},io={class:"order-log-num"},oo=["xlink:href"],ro={key:0},uo={key:1},co=Xe(()=>e("td",null,null,-1)),vo=Xe(()=>e("td",null,null,-1)),_o={class:"create-ts"},mo={class:"view-trans"},po=["href"],go=Xe(()=>e("span",null,"View Transaction",-1)),fo=Xe(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),ho=[go,fo],yo={style:{height:"4px",background:"unset"}},bo={class:"tr-line",style:{height:"24px",background:"unset"}},wo={key:4,class:"loading-box"},$o=ce({__name:"trade-history",setup(t){const c=mt(),n=w(()=>c),_=w(()=>n.value.currentExplorer),g=Me();w(()=>g);const $=Be(),m=w(()=>$);return ae(()=>m.value.address,v=>{v&&(g.getLimitOrderLogs(),g.getLimitOrderHistory(v))},{immediate:!0}),(v,l)=>{const C=$t;return u(),y("div",Yi,[m.value&&m.value.address&&a(q)&&a(q).length>0?(u(),y("table",Ki,[qi,e("tbody",null,[(u(!0),y(G,null,Ue(a(q),(r,i)=>{var I,T,d,O,S;return u(),y(G,{key:r.id},[e("tr",{class:Q(["order",i!==a(q).length-1?"order-border":""]),onClick:k=>a(Ma)(r,i)},[e("td",null,[N(kt,{order:r},null,8,["order"])]),e("td",null,[e("div",Gi,[r.direction?(u(),y(G,{key:1},[U(o(a(A)(r==null?void 0:r.reseverRate))+" "+o((d=r==null?void 0:r.pay_coin_info)==null?void 0:d.symbol)+" per "+o((O=r==null?void 0:r.target_coin_info)==null?void 0:O.symbol),1)],64)):(u(),y(G,{key:0},[U(o(a(A)(r==null?void 0:r.rate))+" "+o((I=r==null?void 0:r.target_coin_info)==null?void 0:I.symbol)+" per "+o((T=r==null?void 0:r.pay_coin_info)==null?void 0:T.symbol),1)],64)),e("div",{class:"right",onClick:Bt(k=>r.direction=!r.direction,["stop"])},eo,8,Zi)])]),e("td",null,o(a(Ge)(r==null?void 0:r.expire_ts,""))+" (UTC)",1),e("td",null,[U(o(a(A)(r==null?void 0:r.transaction_volume))+"/"+o(a(A)(r==null?void 0:r.total_pay_amount))+" "+o((S=r==null?void 0:r.pay_coin_info)==null?void 0:S.symbol)+" ",1),e("span",null,"("+o(r==null?void 0:r.transaction_ratio)+"%)",1)]),e("td",null,[e("div",to,[(u(),y("svg",{class:Q(["order-status-icon",a(vt)(r.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(vt)(r.status).path},null,8,ao)],2)),e("span",{class:Q(a(vt)(r.status).class)},o(r.status),3),(u(),y("svg",{class:Q(["arrow-icon",a($e)[i]?"open-arrow":""]),"aria-hidden":"true"},no,2))])])],10,Ji),a($e)[i]?(u(),y(G,{key:0},[(u(!0),y(G,null,Ue(r.events,k=>{var M,z,L;return u(),y(G,{key:k},[le(e("tr",lo,[e("td",null,[e("div",io,[(u(),y("svg",{class:Q(["status-icon",a(Je)(k.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Je)(k.type).path},null,8,oo)],2)),e("span",{class:Q(["text-status",a(Je)(k.type).class])},o(a(Je)(k.type).text),3),k.type=="FlashLoanEvent"?(u(),y("span",ro,"+"+o(a(A)(k.amount))+" "+o((M=r==null?void 0:r.buy_coin_info)==null?void 0:M.symbol)+" "+o((z=r==null?void 0:r.target_coin_info)==null?void 0:z.symbol),1)):(u(),y("span",uo,o(k.type=="OrderPlacedEvent"?"-":"+")+o(a(A)(k.amount))+" "+o((L=r==null?void 0:r.pay_coin_info)==null?void 0:L.symbol),1))])]),co,vo,e("td",null,[e("span",_o,o(a(Ge)(Number(k.block_time),""))+" (UTC)",1)]),e("td",null,[e("div",mo,[e("a",{href:a(ta)(_.value,"tx",k.tx),target:"_blank"},ho,8,po)])])],512),[[dt,a($e)[i]]]),le(e("tr",yo,null,512),[[dt,a($e)[i]]])],64)}),128)),le(e("tr",bo,null,512),[[dt,a($e)[i]]])],64)):D("",!0)],64)}),128))])])):D("",!0),m.value&&m.value.address&&a(q)&&a(q).length>0?(u(),F(Vi,{key:1,"page-list":a(q)},null,8,["page-list"])):D("",!0),a(q)&&a(q).length==0&&!a(Et)?(u(),F(na,{key:2,platform:"history"})):D("",!0),a(q)&&a(q).length>0?(u(),y("div",{key:3,class:Q(["pagination",a(q)&&a(q).length>0&&a(Et)?"loading-pagination":""])},[N(Ta,{"page-size":a(Ut),total:a(wt)&&a(wt).length,"current-page-num":a(bt),onChange:a(mi)},null,8,["page-size","total","current-page-num","onChange"])],2)):D("",!0),a(q)&&a(q).length==0&&a(Et)?(u(),y("div",wo,[N(C)])):D("",!0),a(q)&&a(q).length>0&&a(Et)?(u(),F(C,{key:5,class:"order-spin"})):D("",!0)])}}});const xo=de($o,[["__scopeId","data-v-a0a3a578"]]),So={class:"order-or-history"},ko={class:"tab-list"},Co=ce({__name:"trade-tab",setup(t){const c=Me(),n=w(()=>c),_=w(()=>n.value.orderNum),g=w(()=>n.value.historyNum),$=Be(),m=w(()=>$),v=[{value:"orders",label:"Open Orders",numValue:rt.value=="orders"&&m.value&&m.value.address?_:""},{value:"history",label:"Order History",numValue:rt.value=="history"&&m.value&&m.value.address?g:""}];return(l,C)=>(u(),y("div",So,[e("div",ko,[N($a,{"tab-list":v,"current-tab":a(rt),onClickTab:C[0]||(C[0]=r=>rt.value=r.value)},null,8,["current-tab"])]),a(rt)=="orders"&&m.value&&m.value.address&&_.value>0?(u(),y("div",{key:0,class:"clear-all",onClick:C[1]||(C[1]=r=>a(sa)({},!0))},"Cancel All")):D("",!0)]))}});const Oo=de(Co,[["__scopeId","data-v-36f646e0"]]),Lo={class:"trade-order"},To=ce({__name:"trade-record",setup(t){return(c,n)=>(u(),y("div",Lo,[N(Oo),a(rt)=="orders"?(u(),F(ri,{key:0})):(u(),F(xo,{key:1}))]))}});const Zo=de(To,[["__scopeId","data-v-646f8c44"]]);export{Ta as N,kt as T,ql as _,ya as a,sa as b,ut as c,Pt as d,yt as e,ht as f,na as g,La as h,Gt as i,q as j,Vi as k,Ut as l,wt as m,bt as n,Et as o,J as p,mi as q,Oo as r,rt as s,ka as t,Me as u,Go as v,Na as w,Jo as x,Zo as y};
