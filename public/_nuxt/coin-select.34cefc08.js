import{i as $}from"./import-icon.de3e6c66.js";import{i as ie,u as re,b as se,a as ce,p as ue,B as de}from"./pool.e0c10d34.js";import{a as pe,M as ve,a5 as _e,l as be,m as L,r as C,y as me,D,ab as fe,e as he,L as Z,q as ke,o as i,c as V,w as _,h as l,t as z,a3 as ge,f as r,x as U,F as X,s as Y,z as x,v,i as T,u as I,j as ee,G as Ce,ac as we,K as ye,p as Se,k as Le}from"./entry.4c32ee27.js";/* empty css              *//* empty css              */import{u as oe}from"./index.7398ae13.js";import{_ as Te,a as Ie}from"./img-no-Positions_2x.68e0bcc7.js";const $e=pe({components:{Modal:ve,LoadingOutlined:_e},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(o,d){const{t:a,locale:te}=be(),q=ie(),b=L(()=>q),y=re(),c=L(()=>y),B=oe(),m=L(()=>B),A=L(()=>{var n;return(n=m.value)==null?void 0:n.filterCreatePoolCoin}),M=C([a("tab.all"),a("tab.native"),a("tab.layerZero"),a("tab.wormhole"),a("tab.celer")]),u=C(a("tab.all")),t=C(a("tab.all")),S=oe(),N=L(()=>S.chainName),f=C([]);console.log(f,"===>tokenList");const O=C(null);me(()=>{});const j=C(!1);D(u,n=>{n!==a("tab.all")&&(j.value=!1),n==a("tab.all")?t.value=a("tab.all"):n==a("tab.layerZero")?t.value=a("tab.layerZero"):n==a("tab.wormhole")?t.value=a("tab.wormhole"):n==a("tab.celer")?t.value=a("tab.celer"):n==a("tab.native")&&(t.value=a("tab.native")),R(O.value)});const R=async n=>{var K,E,G,W,H,J,Q;let P=[],k=c.value.tokens;if(!(m.value.chainName&&k&&k[0]&&m.value.chainName.toLowerCase().includes((K=k[0])==null?void 0:K.chain))){f.value=[];return}let F=k;if(n&&n.split("::")&&n.split("::").length==3&&N.value=="Sui"){const s=ce("Sui");try{const e=c.value.tokensObj[n]||await s.getTokenBySymbol(c.value.tokens,n);e&&((E=k.filter(p=>(p==null?void 0:p.address)===(e==null?void 0:e.address)))==null?void 0:E.length)<1&&(y.setNewTokens({[n]:e}),F=k.concat(e))}catch(e){console.log("searchToken##err##",e)}}for(const s of Object.keys(F)){let e=fe(F[s]);const p=b.value.assets[e.address]&&b.value.assets[e.address].balance?ue(b.value.assets&&b.value.assets[e.address].balance,e.decimals):0;o.lastSelectCoin&&e&&e.address===o.lastSelectCoin?e.unusable=!0:e.unusable=!1;const ae=((G=c.value.tokensObj[e.address])==null?void 0:G.labels)&&((W=c.value.tokensObj[e.address])==null?void 0:W.labels[0]),le=c.value.tokensObj[e.address]?(H=c.value.tokensObj[e.address])==null?void 0:H.name:e.name;e={...e,balance:p,labels:ae,name:le,sort:(m.value.chainName==="Aptos"?e.symbol=="APT":e.symbol=="SUI")?1:-1},P.push(e)}let g;b.value.address?g=P.sort((s,e)=>e.balance-s.balance):g=P;let h=[];if(n){console.log(g,"sortResult=====>");const s=g.filter(e=>e.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||e.address.toLowerCase().indexOf(n.toLowerCase())!==-1||e.address.toLowerCase().indexOf(de(n).full_address.toLowerCase())!==-1);console.log(s,"===>result"),u.value!==a("tab.all")?h=s.filter(p=>u.value==a("tab.native")?!p.labels:p.labels&&p.labels.toLowerCase()==u.value.toLowerCase()):h=s}else console.log(u.value,"===>currentTab.value"),u.value!==a("tab.all")?h=g.filter(e=>u.value==a("tab.native")?!e.labels:e.labels&&e.labels.toLowerCase()==u.value.toLowerCase()):h=g;o.isCreatePoolToCoin?f.value=(J=h.filter(s=>A.value[s==null?void 0:s.address]))==null?void 0:J.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable):f.value=h.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable),o.isCreatePoolFromCoin&&(f.value=(Q=h.filter(s=>!A.value[s==null?void 0:s.address]))==null?void 0:Q.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable)),console.log(f.value,"tokenList.value===>322")},ne=n=>{n.unusable||(d.emit("onSelect",n),d.emit("onClose"))};return D(()=>[O.value,j.value],([n,P])=>{console.log(n,"===>keyword"),R(n)},{immediate:!0}),D(()=>c.value.tokens,n=>{n&&(console.log(c.value.tokens,"===>pools.value.tokens"),R(O.value))},{immediate:!0}),{pools:c,t:a,chainName:N,tabList:M,currentTab:u,addCommom:se,tokenList:f,importIcon:$,keyword:O,wallet:b,toSelect:ne,store:m,isShowAll:j}}}),Ae=""+globalThis.__publicAssetsURL("image/warning@2x.png");const w=o=>(Se("data-v-ef581b23"),o=o(),Le(),o),Ne=w(()=>l("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Oe={class:"coin-select-modal"},Pe={class:"search-input"},Be=["placeholder"],Me=w(()=>l("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),je=[Me],Re={key:0,class:"tab-list"},Fe=["onClick"],De={class:"item"},Ze=w(()=>l("div",{class:"line"},null,-1)),ze={class:"coin-list-box"},Ue={key:0,class:"coin-list"},qe=["onClick"],Ke={class:"left"},Ee={key:0},Ge={key:1,alt:""},We={class:"name-box"},He=w(()=>l("img",{src:Ae,alt:""},null,-1)),Je={class:"balance-box"},Qe={class:"balance"},Ve={key:0},Xe={key:1},Ye={key:2},xe={key:3},eo=w(()=>l("p",null,null,-1)),oo={key:1,class:"no-data"},so={key:0,class:"token-loading"},to={key:1,class:"no-data-content"},no={key:0,src:Te},ao={key:1,src:Ie},lo=w(()=>l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-icon-information"})],-1));function io(o,d,a,te,q,b){const y=Ce,c=Z("loading-outlined"),B=we,m=ye,A=Z("vue-scroll"),M=Z("Modal"),u=ke("image");return i(),V(M,{title:o.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=t=>o.$emit("onClose"))},{closeIcon:_(()=>[Ne]),default:_(()=>[l("div",Oe,[l("div",Pe,[z(l("input",{"onUpdate:modelValue":d[0]||(d[0]=t=>o.keyword=t),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:o.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Be),[[ge,o.keyword]]),o.keyword?(i(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=t=>o.keyword="")},je)):U("",!0)]),o.chainName!=="Sui"?(i(),r("div",Re,[(i(!0),r(X,null,Y(o.tabList,(t,S)=>(i(),r("div",{key:S,class:x(["item-container",o.currentTab==t?"item-container-active item-container":"item-container"]),onClick:N=>o.currentTab=t},[l("div",De,v(t),1)],10,Fe))),128))])):U("",!0),Ze,l("div",ze,[T(A,null,{default:_(()=>[o.tokenList&&o.tokenList.length>0?(i(),r("ul",Ue,[(i(!0),r(X,null,Y(o.tokenList,(t,S)=>(i(),r("li",{key:S,class:x(t.unusable?"unusable":""),onClick:N=>o.toSelect(t)},[l("div",Ke,[t.isChinaToken?z((i(),r("img",Ge,null,512)),[[u,o.store.theme=="default"?("importIcon"in o?o.importIcon:I($))("/image/coins/unknown.png"):("importIcon"in o?o.importIcon:I($))("/image/coins/sui-unknown.png")]]):z((i(),r("img",Ee,null,512)),[[u,t.icon||t.logo_url||(o.store.theme=="default"?("importIcon"in o?o.importIcon:I($))("/image/coins/unknown.png"):("importIcon"in o?o.importIcon:I($))("/image/coins/sui-unknown.png"))]]),l("div",We,[l("span",null,[ee(v(t.symbol)+" ",1),t.isSelfBuilt?(i(),V(y,{key:0,placement:"right","arrow-point-at-center":""},{title:_(()=>[l("span",null,v(o.t("newAdd.notCetusTokenList")),1)]),default:_(()=>[He]),_:1})):U("",!0)]),l("p",null,v(t.name)+" "+v(t.labels?`(${t.labels})`:""),1)])]),l("div",Je,[l("div",Qe,[o.wallet.loading?(i(),r("div",Ve,[T(B,null,{default:_(()=>[T(c)]),_:1})])):t.balance&&o.wallet.connected?(i(),r("div",Xe,v(("addCommom"in o?o.addCommom:I(se))(t.balance,t.decimals)),1)):!t.balance&&o.wallet.connected?(i(),r("div",Ye,"0")):(i(),r("div",xe))]),eo])],10,qe))),128))])):(i(),r("div",oo,[o.pools.isTokenLoading?(i(),r("div",so,[T(m)])):(i(),r("div",to,[o.store.theme=="default"?(i(),r("img",no)):(i(),r("img",ao)),l("p",null,v(o.t("newAdd.noTokensFound")),1),l("div",null,[ee(v(o.t("newAdd.enterCoinType"))+" ",1),T(y,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[l("span",null,v(o.t("newAdd.uniqueIdOfCoin")),1)]),default:_(()=>[lo]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const mo=he($e,[["render",io],["__scopeId","data-v-ef581b23"]]);export{mo as _};
