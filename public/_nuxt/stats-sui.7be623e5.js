import{a as B,r as h,m as w,D as j,y as E,C as Pt,o as p,f as S,h as l,v as C,F as at,s as nt,i as u,x as Q,a1 as At,d7 as Nt,J as Rt,z as lt,e as Y,u as Ht,c as M,S as Ut,M as A,w as q,p as rt,k as it,b as Wt}from"./entry.6fece5f9.js";/* empty css              */import"./index.e0510e5d.js";import{a as ct,y as z,c as Z}from"./pool.7cb19b71.js";import{c as st}from"./index.723f7524.js";import{l as zt}from"./lodash.2cdb693e.js";import{u as G}from"./stats.28babfcc.js";import{f as Bt}from"./formatter.3be22401.js";import"./index.6fb2c779.js";import{i as Yt}from"./import-icon.de3e6c66.js";import{_ as ut}from"./no-data.8e9b6d78.js";import{R as pt,A as Ft,P as Mt}from"./apr-tips.20d13160.js";import{u as tt}from"./useToken.64c2f487.js";import{T as dt,N as mt}from"./no-data.02548140.js";import{C as Et}from"./coin-single.e8ee9a24.js";import{S as Jt}from"./select-tab.e9e40dea.js";import{u as Ot}from"./useStatsData.8eca2cc8.js";import"./install.b2f1e5e4.js";import"./decimal.765d8738.js";import"./decimal.a2826370.js";/* empty css              */import"./coin-img.808f3f05.js";import"./token-warning_2x.edd59b82.js";import"./token.a208ca56.js";import"./token-warning-new.2fbfd9a4.js";import"./nuxt-link.23c4e35d.js";import"./icon_farms_2x.1a9236c6.js";import"./farms.75ba582d.js";import"./icon_autopools_2x.22ed2241.js";import"./icon_autopools_2x.5d7406a0.js";import"./icon_fee_2x.9019525b.js";import"./icon_rewards_2x.06fc0728.js";import"./useSDK.4d215c7d.js";const jt={class:"stats-chart-container"},qt={class:"chart-top"},Gt={class:"trading-vol"},Kt={class:"title"},Qt={class:"text"},Xt=["innerHTML"],Zt={class:"time-list"},te=["onClick"],ee={key:0,class:"loading-box"},oe={class:"chart-content"},se=["id"];var X=(t=>(t.D="day",t.W="wek",t.M="mon",t))(X||{}),vt=(t=>(t[t.D=40]="D",t[t.W=30]="W",t[t.M=20]="M",t))(vt||{}),U=(t=>(t[t.Jan=1]="Jan",t[t.Feb=2]="Feb",t[t.Mar=3]="Mar",t[t.Apr=4]="Apr",t[t.May=5]="May",t[t.Jun=6]="Jun",t[t.Jul=7]="Jul",t[t.Aug=8]="Aug",t[t.Sep=9]="Sep",t[t.Oct=10]="Oct",t[t.Nov=11]="Nov",t[t.Dec=12]="Dec",t))(U||{}),_t=(t=>(t[t.D=1]="D",t[t.W=4]="W",t[t.M=12]="M",t))(_t||{}),ht=(t=>(t[t.D=1]="D",t[t.W=2]="W",t[t.M=4]="M",t))(ht||{});const ae=B({__name:"stats-sui-chart",props:{chartType:{type:String,default:"tvl"}},setup(t){const i=t,a=h("D"),y=["D","W","M"],_=h(""),T=h("24H"),d=ct();w(()=>d);const m=h(),s=h(),f=h(""),L=h(!1),D=G(),n=w(()=>D),I=w(()=>n.value.overallStatistics);j(()=>[I.value,i.chartType,f.value],([r,b,V])=>{!Z(r)&&!V&&(f.value=b=="tvl"?r.totalValueLockedDisplay:r.volInUsd24h)},{immediate:!0});const c=async()=>{L.value=!0;try{const r=vt[a.value],{data:b}=i.chartType=="tvl"?await fetch(`${st.Sui.api}/v2/sui/histogram/all?date_type=${X[a.value]}&typ=pure_tvl`).then(v=>v.json()):await fetch(`${st.Sui.api}/v2/sui/histogram/all?date_type=${X[a.value]}&typ=vol`).then(v=>v.json());console.log("ðŸš€ ~ getHistogram ~ data:",b);const V=b.list.map(v=>v.num),$=b.list.map(v=>v.date);m.value=V,s.value=$,e(V,$,r),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:70 ~ getHistogram ~ data:",b)}catch(r){console.info("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:50 ~ getHistogram ~ error:",r)}},g=h(),e=(r,b,V)=>{const $=document.getElementById(`stats-chart-${i.chartType}`),v=At($);g.value=v;let R={tooltip:{trigger:"axis",position:function(P,F,H,W,J){return[P[0]-50,"10%"]},backgroundColor:"#28353F",borderColor:"transparent",formatter:function(P){N(P)},padding:0,axisPointer:{type:"line",lineStyle:{width:a.value=="D"?1:a.value=="W"?2:4,type:"solid",color:"#456D89"}}},xAxis:{type:"category",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},splitArea:{show:!1},data:b.reverse(),inverse:!0,axisLabel:{interval:parseInt(Number(r.length)/6),formatter:(P,F)=>{const H=z(Date.parse(P)-288e5,"YMD")||"";let W,J=H.slice(5,7),K=U[Number(J)];return a.value=="M"?W=K:W=H.slice(8,10),`${W}`}}},yAxis:{show:!1,max:function(P){return P.max}},series:[{data:r.reverse(),inverse:!0,type:i.chartType=="tvl"?"line":"bar",symbol:"none",itemStyle:{normal:{barBorderRadius:1,color:"#72C1F7"}},areaStyle:{color:new Nt(0,0,0,1,[{offset:0,color:"rgba(0, 128, 255, 0.3)"},{offset:1,color:"rgba(0, 128, 255, 0)"}])},barWidth:o.value?_t[a.value]:ht[a.value]}],grid:{left:0,top:0,bottom:24,right:20}};L.value=!1,R&&v.setOption(R),v&&v.resize(),v.on("globalout",P=>{f.value=i.chartType=="tvl"?I.value.totalValueLockedDisplay:I.value.volInUsd24h,T.value="24H",x()})};j(()=>a.value,(r,b)=>{(!b||r!==b)&&c()},{immediate:!0});const o=h(!0),k=zt.debounce(()=>{document.body.clientWidth>750?o.value=!0:o.value=!1,!m.value&&!s.value?c():g.value&&g.value.resize()},300);E(()=>{window.addEventListener("resize",k),x()}),Pt(()=>{window.removeEventListener("resize",k)});const x=()=>{const r=z(Date.parse(new Date().toUTCString()),"YMD")||"";let b=r.slice(5,7),V=U[Number(b)];const $=r.slice(8,10),v=V,R=r.slice(0,4);_.value=v+"&nbsp;"+$+",&nbsp;"+R+"&nbsp;(UTC)"},N=r=>{f.value=Bt(r[0].value,2),T.value=a.value=="D"?"24H":a.value=="W"?"7D":"30D";const b=Date.parse(r[0].axisValue),V=new Date(b);V.setDate(V.getDate()+7);const $=new Date(b);$.setDate($.getDate()+31);const v=V.toUTCString(),R=$.toUTCString(),P=z(Date.parse(R),"YMD")||"",F=z(Date.parse(new Date().toUTCString()),"YMD")||"",H=Date.parse(v)>Date.parse(new Date().toUTCString())?z(Date.parse(new Date().toUTCString()),"YMD")||"":z(Date.parse(v),"YMD")||"";let W=F.slice(5,7),J=U[Number(W)];const K=F.slice(8,10),yt=J,Tt=F.slice(0,4);let et=r[0].axisValue.slice(5,7),kt=U[Number(et)];const ot=r[0].axisValue.slice(8,10),O=kt,Dt=r[0].axisValue.slice(0,4);let $t=H.slice(5,7),wt=U[Number($t)];const Ct=H.slice(8,10),Lt=wt,It=H.slice(0,4),Vt=U[Number(et)+1],xt=P.slice(0,4);a.value=="D"?_.value=O+"&nbsp;"+ot+",&nbsp;"+Dt+"&nbsp;(UTC)":a.value=="W"?_.value=ot+"&nbsp;"+O+"-"+Ct+"&nbsp;"+Lt+"&nbsp;,&nbsp;"+It+"&nbsp;(UTC)":_.value=Date.parse(R)>=Date.parse(new Date().toUTCString())?O+"&nbsp;01-"+yt+"&nbsp;"+K+",&nbsp;"+Tt+"&nbsp;(UTC)":O+"&nbsp;01-"+Vt+"&nbsp;01,&nbsp;"+xt+"&nbsp;(UTC)"};return(r,b)=>{const V=Rt;return p(),S("div",jt,[l("div",qt,[l("div",Gt,[l("div",Kt,"Trading Volume ("+C(T.value)+")",1),l("div",Qt," $"+C(f.value===""?"--":Number(f.value)==0?0:f.value),1),l("span",{innerHTML:_.value},null,8,Xt)]),l("div",Zt,[(p(),S(at,null,nt(y,$=>l("div",{key:$,class:lt(["time-item",$==a.value?"time-item-active":""]),onClick:v=>a.value=$},C($),11,te)),64))])]),L.value?(p(),S("div",ee,[u(V)])):Q("",!0),l("div",oe,[l("div",{id:`stats-chart-${t.chartType}`,class:"stats-chart"},null,8,se)])])}}});const ft=Y(ae,[["__scopeId","data-v-cf492d50"]]),ne=B({setup(){const t=G(),i=w(()=>t),a=w(()=>i.value.overallStatistics),y=w(()=>[{img_url:"/sui-image/icon_cumulativevolume@2x.png",label:"Cumulative Volume",value:a.value.cumulativeVolumeDisplay},{img_url:"/sui-image/icon_totalvaluelocked@2x.png",label:"Total Value Locked",value:a.value.totalValueLockedDisplay},{img_url:"/sui-image/icon_cumulativetransactions@2x.png",label:"Cumulative Transactions",value:a.value.cumulativeTransactionsDisplay},{img_url:"/sui-image/icon_accounts@2x.png",label:"Total Accounts",value:a.value.totalAccountsDisplay}]);return{checkNullObj:Z,overallStatistics:a,statisticsList:y}}});const le={class:"stats-sui-statistics"},re=["src"],ie={class:"label"},ce={key:1,class:"value"};function ue(t,i,a,y,_,T){const d=Ut;return p(),S("div",le,[(p(!0),S(at,null,nt(t.statisticsList,m=>(p(),S("div",{key:m.label,class:"item"},[l("img",{src:m.img_url},null,8,re),l("div",ie,C(m.label),1),("checkNullObj"in t?t.checkNullObj:Ht(Z))(t.overallStatistics)?(p(),M(d,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(p(),S("div",ce,"$"+C(m.value),1))]))),128))])}const gt=Y(ne,[["render",ue],["__scopeId","data-v-93df7ab8"]]),pe=B({components:{RankIcon:pt,StatsAprTips:Ft,TableLoading:dt,NoData:mt},setup(){const{getToken:t}=tt(),i=G(),a=w(()=>i),y=w(()=>a.value.poolsStatsList),_=h(!0),T=h(null);E(()=>{window.scroller=T.value});const d=h([]),m=w(()=>d.value.map(I=>Object.assign({},{random:Math.random()},I))),s=h({label:"Volume (24H)",sort:"desc"}),f=n=>{s.value=n,L(y.value)},L=async n=>{let I=[];for(let e=0;e<n.length;e++){const o=n[e],k=await t(n[e].displayTokenAAddress),x=await t(n[e].displayTokenBAddress),N=[];k!=null&&k.labels&&N.push(...k.labels),x!=null&&x.labels&&N.push(...x.labels);const r={...o,tokenA:k,tokenB:x,labels:[...new Set(N)]};I.push(r)}let c=I,g=[];s.value.label=="Volume (24H)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.volume24-e.volume24):c.sort((e,o)=>e.volume24-o.volume24)),s.value.label=="Volume (7D)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.volume7d-e.volume7d):c.sort((e,o)=>e.volume7d-o.volume7d)),s.value.label=="Liquidity"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.tvl-e.tvl):c.sort((e,o)=>e.tvl-o.tvl)),s.value.label=="Fees (24H)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.fees24-e.fees24):c.sort((e,o)=>e.fees24-o.fees24)),s.value.label=="APR (24H)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.totalApr-e.totalApr):c.sort((e,o)=>e.totalApr-o.totalApr)),d.value=g,console.log("ðŸš€ ~ buildPoolList ~ pageList:",d.value,g),_.value=!1};return j(()=>y.value,n=>{n&&n.length>0&&L(n)},{immediate:!0}),{pageList:d,tableColumns:[{title:"Pools",hasSort:!1,tdWidth:"330px"},{title:"Liquidity",hasSort:!0,tdWidth:"200px"},{title:"Volume (24H)",hasSort:!0,tdWidth:"200px"},{title:"Volume (7D)",hasSort:!0,tdWidth:"200px"},{title:"Fees (24H)",hasSort:!0,tdWidth:"175px"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"175px"}],scroller:T,list:m,isPoolLoading:_,sortInfo:s,changeSort:f}}});const de=t=>(rt("data-v-8f33e291"),t=t(),it(),t),me={class:"stats-sui-pools-table"},ve={key:2,class:"virtual-table"},_e=de(()=>l("th",null,"Pool",-1));function he(t,i,a,y,_,T){const d=A("TableLoading"),m=ut,s=A("RankIcon"),f=Mt,L=A("StatsAprTips"),D=A("RecycleScroller");return p(),S("div",me,[t.isPoolLoading?(p(),M(d,{key:0,columns:t.tableColumns,"data-source-length":10},null,8,["columns"])):t.pageList&&t.pageList.length==0?(p(),M(m,{key:1,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):(p(),S("table",ve,[u(D,{ref:"scroller",class:"scroller",items:t.list,"item-size":80,"page-mode":"","key-field":"poolAddress"},{before:q(()=>[l("thead",null,[_e,u(s,{label:"Liquidity","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Volume (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Volume (7D)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Fees (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"])])]),default:q(({item:n})=>[(p(),S("tr",{key:n==null?void 0:n.poolAddress},[l("td",null,[u(f,{"pool-info":n},null,8,["pool-info"])]),l("td",null,C(n.tvlDisplay||"--"),1),l("td",null,C(n.volume24Display||"--"),1),l("td",null,C(n.volume7dDisplay||"--"),1),l("td",null,C(n.fees24Display||"--"),1),l("td",null,[u(L,{"pool-info":n},null,8,["pool-info"])])]))]),_:1},8,["items"])]))])}const bt=Y(pe,[["render",he],["__scopeId","data-v-8f33e291"]]),fe=B({components:{TokenBlock:Et,RankIcon:pt,TableLoading:dt,NoData:mt},setup(){const{getToken:t}=tt(),i=G(),a=w(()=>i),y=w(()=>a.value.tokensStatsList),_=h(!0),T=h(null);E(()=>{window.scroller=T.value});const d=h([]),m=w(()=>d.value.map(I=>Object.assign({},{random:Math.random()},I))),s=h({label:"Volume (24H)",sort:"desc"}),f=n=>{s.value=n,L(y.value)},L=async n=>{let I=[];for(let e=0;e<n.length;e++){const o=n[e],k=await t(o==null?void 0:o.address),x=[];k!=null&&k.labels&&x.push(...k.labels);const N={...o,logoURI:k==null?void 0:k.logo_url,labels:[...new Set(x)]};I.push(N)}let c=I,g=[];s.value.label=="Price"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.price-e.price):c.sort((e,o)=>e.price-o.price)),s.value.label=="Price Change"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.priceChange-e.priceChange):c.sort((e,o)=>e.priceChange-o.priceChange)),s.value.label=="Volume (24H)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.volume24-e.volume24):c.sort((e,o)=>e.volume24-o.volume24)),s.value.label=="TVL"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.tvl-e.tvl):c.sort((e,o)=>e.tvl-o.tvl)),d.value=g,_.value=!1};return j(()=>y.value,n=>{n&&n.length>0&&L(n)},{immediate:!0}),{pageList:d,tableColumns:[{title:"Token",hasSort:!1,tdWidth:"370px"},{title:"Price",hasSort:!0,tdWidth:"240px"},{title:"Price Change",hasSort:!0,tdWidth:"215px"},{title:"Volume (24H)",hasSort:!0,tdWidth:"240px"},{title:"TVL",hasSort:!0,tdWidth:"215px"}],scroller:T,list:m,isTokenLoading:_,sortInfo:s,changeSort:f}}});const ge=t=>(rt("data-v-d792072b"),t=t(),it(),t),be={class:"stats-sui-pools-table"},Se={key:2,class:"virtual-table"},ye=ge(()=>l("th",null,"Token",-1));function Te(t,i,a,y,_,T){const d=A("TableLoading"),m=ut,s=A("RankIcon"),f=A("TokenBlock"),L=A("RecycleScroller");return p(),S("div",be,[t.isTokenLoading?(p(),M(d,{key:0,columns:t.tableColumns,"data-source-length":10},null,8,["columns"])):t.pageList&&t.pageList.length==0?(p(),M(m,{key:1,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):(p(),S("table",Se,[u(L,{ref:"scroller",class:"scroller",items:t.list,"item-size":80,"page-mode":"","key-field":"address"},{before:q(()=>[l("thead",null,[ye,u(s,{label:"Price","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Price Change","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Volume (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"TVL","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"])])]),default:q(({item:D})=>[(p(),S("tr",{key:D==null?void 0:D.address},[l("td",null,[u(f,{"token-info":D,"justify-content":"flex-start","is-have-label":!0},null,8,["token-info"])]),l("td",null,"$"+C(D.priceDisplay||"--"),1),l("td",null,[l("p",{class:lt(D.priceChangeDisplay.includes("-")?"redecue-change-price":"add-change-price")},C(D.priceChangeDisplay||"--"),3)]),l("td",null,C(D.volume24Display||"--"),1),l("td",null,C(D.tvlDisplay||"--"),1)]))]),_:1},8,["items"])]))])}const St=Y(fe,[["render",Te],["__scopeId","data-v-d792072b"]]),ke=B({components:{StatsTab:Jt,StatsPoolsTable:bt,StatsTokensTable:St},setup(){const{getTokenList:t}=tt(),i=[{name:"Pools",logo:"/sui-image/icon_pools@2x.png"},{name:"Tokens",logo:"/sui-image/icon_tokens@2x.png"}],a=h("Pools");return E(()=>{t()}),{currentTab:a,tabList:i}}});const De={class:"pools-tokens-transitions"},$e={class:"tab-box"},we={key:0,class:"table-box"},Ce={key:1,class:"table-box"};function Le(t,i,a,y,_,T){const d=A("StatsTab"),m=bt,s=St;return p(),S("div",De,[l("div",$e,[u(d,{"tab-list":t.tabList,"current-tab":t.currentTab,onOnClick:i[0]||(i[0]=f=>{t.currentTab=f.name})},null,8,["tab-list","current-tab"])]),t.currentTab=="Pools"?(p(),S("div",we,[u(m)])):Q("",!0),t.currentTab=="Tokens"?(p(),S("div",Ce,[u(s)])):Q("",!0)])}const Ie=Y(ke,[["render",Le],["__scopeId","data-v-3b2ca04d"]]),Ve=B({components:{StatsSuiChart:ft,StatsSuiStatistics:gt,PoolsTokensTransitions:Ie},setup(){const t=ct(),i=w(()=>t),a=Wt(),y=w(()=>i.value.chainName),{getStatusData:_}=Ot();E(async()=>{_()});const T=w(()=>i.value.theme);return{chainName:y,theme:T,store:i,importIcon:Yt,router:a}}});const xe={class:"stats-sui-container"},Pe={class:"content"},Ae={class:"title"},Ne={class:"chart-box"};function Re(t,i,a,y,_,T){const d=ft,m=gt,s=A("PoolsTokensTransitions");return p(),S("div",xe,[l("div",Pe,[l("div",Ae,C(t.$t("menu.stats")),1),l("div",Ne,[u(d,{"chart-type":"tvl"}),u(d,{"chart-type":"vol"})]),u(m),u(s)])])}const fo=Y(Ve,[["render",Re],["__scopeId","data-v-753e1153"]]);export{fo as default};
