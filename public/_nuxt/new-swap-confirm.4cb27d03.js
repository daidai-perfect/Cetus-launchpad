import{c as he,b as K,d as se,s as ne,g as Fe,i as Oe,k as fe}from"./index.2cc90f5b.js";import{a as Ae,r as v,m as N,D as Q,q as ye,o as i,c as Y,w as ee,h as o,f as s,F as oe,t as L,v as a,s as ve,x as E,L as Ie,p as ke,k as be,e as _e,a3 as Be,a4 as Le,M as Se,j as P,z as H,i as Ce,u as J,J as je,S as Pe,a2 as De,Y as Me,B as Te}from"./entry.784129f4.js";import"./index.f49203fc.js";/* empty css              */import{u as pe,a as we,r as Ee,b as Ue,q as qe,j as ze}from"./pool.28071dc9.js";import{D as y}from"./decimal.0bdeb344.js";import{i as le}from"./import-icon.de3e6c66.js";import{u as Ge,g as We,a as He,_ as Ke,b as Ye,d as Je,e as Qe}from"./confetti.module.a5bed601.js";/* empty css              */import{i as Xe}from"./install.27b1bc7f.js";const ce=e=>(ke("data-v-f4595809"),e=e(),be(),e),Ze={class:"price-impact-tips"},Ve=ce(()=>o("div",{class:"text"}," The difference between the market price and estimated price due to trade size. ",-1)),xe={class:"market-price-rate"},eo=ce(()=>o("div",null,"Market Price Rate",-1)),oo={key:0},no=ce(()=>o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})],-1)),to=ce(()=>o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})],-1)),io=[no,to],ao={key:1,class:"price-unknown"},so={key:0,class:"market-price-sources"},lo=ce(()=>o("span",null,"Market price sources:",-1)),ro=ce(()=>o("svg",{class:"icon tips-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_tips"})],-1)),co=Ae({__name:"price-impact-tooltip",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},impact:{type:String,defualt:"",requires:!0}},setup(e){const l=e,c=v([]),n=v(),D=v(),O=v(!0),j=pe(),S=N(()=>j),_=m=>{switch(m){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},b=m=>{var z,U,q,r,C,I,u,g,w,d;const f=((U=m[(z=l==null?void 0:l.fromCoin)==null?void 0:z.address])==null?void 0:U.price)||0,$=((r=m[(q=l==null?void 0:l.toCoin)==null?void 0:q.address])==null?void 0:r.price)||0,p=(I=m[(C=l==null?void 0:l.fromCoin)==null?void 0:C.address])==null?void 0:I.market,T=(g=m[(u=l==null?void 0:l.toCoin)==null?void 0:u.address])==null?void 0:g.market;n.value=K(se(new y(f).div(new y($)).toString(),(w=l.toCoin)==null?void 0:w.decimals)),D.value=K(se(new y($).div(new y(f)).toString(),(d=l.fromCoin)==null?void 0:d.decimals)),c.value=p==T?[_(p)]:[_(p),_(T)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",n.value,D.value,c.value)};Q(()=>[S.value.RATES,l.fromCoinAmount,l.toCoinAmount,l.fromCoin,l.toCoin],([m])=>{m&&!he(m)&&b(m)},{immediate:!0});const M=we(),A=m=>{var f;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((f=S.value.tokensObj[m==null?void 0:m.address])==null?void 0:f.logo_url)||(M.theme==="default"?le("/image/coins/unknown.png"):le("/image/coins/sui-unknown.png"))};return(m,f)=>{const $=Ie,p=ye("image");return i(),Y($,{"overlay-class-name":"price-impact-tooltip"},{title:ee(()=>{var T,z,U,q;return[o("div",Ze,[Ve,o("div",xe,[eo,e.impact!=="Incalculable"?(i(),s("div",oo,[O.value?(i(),s(oe,{key:0},[L(o("img",null,null,512),[[p,A(e.fromCoin)]]),o("span",null,"1 "+a((T=e.fromCoin)==null?void 0:T.symbol)+" = "+a(n.value)+" "+a((z=e.toCoin)==null?void 0:z.symbol),1),L(o("img",null,null,512),[[p,A(e.toCoin)]])],64)):(i(),s(oe,{key:1},[L(o("img",null,null,512),[[p,A(e.toCoin)]]),o("span",null,"1 "+a((U=e.toCoin)==null?void 0:U.symbol)+" = "+a(D.value)+" "+a((q=e.fromCoin)==null?void 0:q.symbol),1),L(o("img",null,null,512),[[p,A(e.fromCoin)]])],64)),o("div",{class:"right",onClick:f[0]||(f[0]=r=>O.value=!O.value)},io)])):(i(),s("div",ao,"Price is unknown"))]),c.value&&c.value.length>0&&e.impact!=="Incalculable"?(i(),s("div",so,[lo,(i(!0),s(oe,null,ve(c.value,r=>(i(),s("span",{key:r==null?void 0:r.name},a(r==null?void 0:r.name),1))),128))])):E("",!0)])]}),default:ee(()=>[ro]),_:1})}}});const Re=_e(co,[["__scopeId","data-v-f4595809"]]);const mo=Ae({components:{PriceImpactTooltip:Re},props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1},formCoinMarket:{type:String,default:""},toCoinMarket:{type:String,default:""}},setup(e){const{getTokenInfo:l}=Ge(),c=Ee(),n=N(()=>c==null?void 0:c.tokensObj),D=Be(Le,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),O=v(!1),j=we(),S=N(()=>j),_=N(()=>{var t;return(t=S==null?void 0:S.value)==null?void 0:t.liquiditySourceObj}),b=N(()=>S.value.slippage),M=N(()=>S.isShowRouterModal),A=pe(),m=N(()=>A);Ue("Sui");const f=v(0),$=v([]),p=v({}),T=v(""),z=async t=>{var h,B,k,F,R,W,de,me,ue,ge;if(((h=t==null?void 0:t.routes)==null?void 0:h.length)===1)if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:462 ~ getOnlyOneRouteText ~ suiPreSwapdata?.routes:",t==null?void 0:t.routes),((F=(k=(B=t==null?void 0:t.routes)==null?void 0:B[0])==null?void 0:k.path)==null?void 0:F.length)>1){const ie=[(R=e==null?void 0:e.fromCoin)==null?void 0:R.symbol],re=(de=(W=t==null?void 0:t.routes)==null?void 0:W[0])==null?void 0:de.path;for(let ae=0;ae<re.length;ae++){const x=re[ae];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:467 ~ getOnlyOneRouteText ~ path[i]:",re[ae]);const $e=((me=n==null?void 0:n.value)==null?void 0:me[x==null?void 0:x.target])||await l(x==null?void 0:x.target);ie.push($e==null?void 0:$e.symbol)}T.value=ie==null?void 0:ie.join(" > ")}else T.value=`${(ue=e==null?void 0:e.fromCoin)==null?void 0:ue.symbol} > ${(ge=e==null?void 0:e.toCoin)==null?void 0:ge.symbol}`};Q(()=>e.suiPreSwapdata,async t=>{var h;if(t&&!he(t)){let B=[];(h=t==null?void 0:t.routes)==null||h.forEach(R=>{R==null||R.path.forEach(async W=>{B.push(W.provider)})});const{routes:k}=t,F=k&&k[0]&&k[0].path;if(k&&k.length==1&&F&&F.length==2){const R=F[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":F[0].target;p.value=m.value.tokensObj[R]||await l(R)}else p.value="";$.value=Array.from(new Set(B)),f.value=$.value.length,z(t)}},{immediate:!0});const U=v(0),q=v(0);Q(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,b.value],([t,h,B,k,F,R])=>{if(t&&h&&B&&k&&R)if(F){const W=new y(h).mul(new y(R/100));q.value=new y(h).sub(W).toString()}else{const W=new y(t).mul(new y(R/100));U.value=new y(t).add(W).toString()}},{immediate:!0});const r=t=>{var h;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((h=m.value.tokensObj[t==null?void 0:t.address])==null?void 0:h.logo_url)||(S.theme==="default"?le("/image/coins/unknown.png"):le("/image/coins/sui-unknown.png"))},C=v(""),I=async()=>{const t=m.value.tokenExternalPriceObj[e.fromCoin.address],h=m.value.tokenExternalPriceObj[e.toCoin.address];if(t&&h){const B=new y(t).div(new y(h)),k=new y(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(B).div(B).mul(100);let F=Math.abs(ne(k,2));B.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?C.value="":(C.value=k>0&&k<=.01?"0.01":F,console.log(t,h,k.toString(),"##367"))}else C.value=""},u=t=>{if(t<5)return"color-s";if(t>=5&&t<10)return"color-w";if(t>=10)return"color-e"};Q(()=>[e.oneToAmount,m.value.tokenExternalPriceObj],([t,h])=>{t&&h&&!he(h)&&I()},{immediate:!0,deep:!0});const g=v([]),w=v(),d=v(),Z=v(!0),G=t=>{switch(t){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},V=t=>{var R,W,de,me,ue,ge,ie,re,ae,x;const h=((W=t[(R=e==null?void 0:e.fromCoin)==null?void 0:R.address])==null?void 0:W.price)||0,B=((me=t[(de=e==null?void 0:e.toCoin)==null?void 0:de.address])==null?void 0:me.price)||0,k=(ge=t[(ue=e==null?void 0:e.fromCoin)==null?void 0:ue.address])==null?void 0:ge.market,F=(re=t[(ie=e==null?void 0:e.toCoin)==null?void 0:ie.address])==null?void 0:re.market;w.value=se(new y(h).div(new y(B)).toString(),(ae=e.toCoin)==null?void 0:ae.decimals),d.value=se(new y(B).div(new y(h)).toString(),(x=e.fromCoin)==null?void 0:x.decimals),g.value=k==F?[G(k)]:[G(k),G(F)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",w.value,d.value,g.value)};return Q(()=>[m.value.RATES,e.fromCoinAmount,e.toCoinAmount],([t])=>{t&&!he(t)&&V(t)},{immediate:!0}),{sFixD:ne,getCoinIcon:r,indicator:D,rateChange:O,slippage:b,isShowRouterModal:M,indexStore:j,maximumSold:U,minimumReceived:q,addCommom:K,pathLength:f,sourcesArr:$,coinTypeB:p,priceExangeRate:C,getTextColor:u,liquiditySourceObj:_,onlyOneRouteText:T,marketPriceA2B:w,marketPriceA2BResever:d,marketPriceSource:g,isA2B:Z}}}),te=e=>(ke("data-v-ceba5189"),e=e(),be(),e),uo={key:0,class:"swap-info"},go={class:"loading-swap"},ho={class:"loading-swap-content"},fo={key:1,class:"swap-rate"},vo={key:0},Co={key:0,class:"after-amount"},yo={key:1},ko={key:0,class:"after-amount"},bo=te(()=>o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})],-1)),_o=te(()=>o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})],-1)),po=[bo,_o],wo={key:2},$o={key:0,class:"price-impact"},So=te(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Ao=[So],Io=te(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Ro=[Io],No=te(()=>o("div",null,"Be cautious before submitting your order.",-1)),Fo={class:"trade-info"},Oo={class:"trade-block"},Bo={class:"label"},Lo=te(()=>o("span",null,"Price Impact",-1)),jo={key:0,class:"text impact-w"},Po=["src"],Do={class:"trade-block"},Mo={class:"label"},To={key:0,class:"text"},Eo={key:0,class:"trade-block"},Uo=te(()=>o("div",{class:"label"},"Route",-1)),qo={key:0,class:"text text-box"},zo=["alt"],Go={key:1,class:"text text-box"},Wo=["alt"],Ho=te(()=>o("svg",{class:"icon route-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_expand"})],-1));function Ko(e,l,c,n,D,O){var M,A,m;const j=je,S=Se("PriceImpactTooltip"),_=Pe,b=ye("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(i(),s("div",uo,[o("div",go,[o("div",ho,[e.swapLoading||e.swapRouterLoading?(i(),Y(j,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):E("",!0),!e.swapRouterLoading&&e.fromCoinAmount&&e.toCoinAmount&&e.oneToAmount&&e.fromCoinAmount?(i(),s("div",fo,[e.rateChange?(i(),s("span",yo,[e.fromCoinAmount&&e.toCoinAmount?(i(),s("span",ko,[L(o("img",null,null,512),[[b,e.getCoinIcon(e.toCoin)]]),P(" 1 "+a(e.toCoin.symbol)+" â‰ˆ ",1),L(o("img",null,null,512),[[b,e.getCoinIcon(e.fromCoin)]]),P(" "+a(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+a(e.fromCoin.symbol),1)])):(i(),Y(j,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(i(),s("span",vo,[L(o("img",null,null,512),[[b,e.getCoinIcon(e.fromCoin)]]),P(" 1 "+a(e.fromCoin.symbol)+" â‰ˆ ",1),e.fromCoinAmount&&e.toCoinAmount?(i(),s("span",Co,[L(o("img",null,null,512),[[b,e.getCoinIcon(e.toCoin)]]),P(" "+a(e.oneToAmount==1/0?0:e.oneToAmount)+" "+a(e.toCoin.symbol),1)])):(i(),Y(j,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:l[0]||(l[0]=f=>e.rateChange=!e.rateChange)},po)])):e.swapLoading||e.swapRouterLoading?(i(),s("span",wo,"Best route and price")):E("",!0)]),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading&&!e.swapRouterLoading?(i(),s("div",$o,[(i(),s("svg",{class:H(["icon warning-icon pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},Ao,2)),o("span",{class:H(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),o("span",{class:H(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[o("div",null,[(i(),s("svg",{class:H(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},Ro,2)),P(" Price Impact Alert. ")]),No],2)])):E("",!0)]),o("div",Fo,[o("div",Oo,[o("div",Bo,[Lo,Ce(S,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),!e.swapRouterLoading&&e.impact==="Incalculable"?(i(),s("div",jo,a(e.impact),1)):e.swapRouterLoading?(i(),Y(_,{key:2,paragraph:!1,active:""})):(i(),s("div",{key:1,class:H(["text",e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[P(a(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(M=e.impact)==null?void 0:M.replace("-","")}`)+"% ",1),(i(!0),s(oe,null,ve(e.marketPriceSource,f=>(i(),s("img",{key:f,src:f==null?void 0:f.logo},null,8,Po))),128))],2))]),o("div",Do,[o("div",Mo,a(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(i(),Y(_,{key:1,paragraph:!1,active:""})):(i(),s("div",To,a(e.fixedFromCoin?("addCommom"in e?e.addCommom:J(K))(("sFixD"in e?e.sFixD:J(ne))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:J(K))(("sFixD"in e?e.sFixD:J(ne))(e.maximumSold,e.fromCoin.decimals)))+" "+a(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),e.insufficientLiquidity?E("",!0):(i(),s("div",Eo,[Uo,e.swapRouterLoading?(i(),Y(_,{key:1,paragraph:!1,active:""})):(i(),s("div",{key:0,class:"text text-bg",onClick:l[1]||(l[1]=f=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.routes&&e.suiPreSwapdata.routes.length==1?(i(),s("div",qo,[o("span",null,a(e.onlyOneRouteText),1),(i(!0),s(oe,null,ve(e.sourcesArr,f=>{var $,p;return L((i(),s("img",{key:f,alt:f},null,8,zo)),[[b,(p=($=e.liquiditySourceObj)==null?void 0:$[f])==null?void 0:p.logo]])}),128))])):e.swapRouterLoading?E("",!0):(i(),s("div",Go,[P(a((m=(A=e.suiPreSwapdata)==null?void 0:A.routes)==null?void 0:m.length)+" Streams ",1),(i(!0),s(oe,null,ve(e.sourcesArr,f=>{var $,p;return L((i(),s("img",{key:f,alt:f},null,8,Wo)),[[b,(p=($=e.liquiditySourceObj)==null?void 0:$[f])==null?void 0:p.logo]])}),128))])),Ho]))]))])])):E("",!0)}const Nt=_e(mo,[["render",Ko],["__scopeId","data-v-ceba5189"]]),Yo={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,l){const{$echarts:c}=De(),n=qe();let D=null,O;const j=v(!0),S=we(),_=N(()=>S),b=N(()=>_.value.chainName),M=N(()=>Fe[b.value]),A=pe(),m=N(()=>A),f=(u,g,w)=>{O={xAxis:{type:"category",boundaryGap:!1,show:!1,data:g},yAxis:{type:"value",show:!1,min:function(d){return d.min-d.min*.1},max:function(d){return d.max+d.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:_.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(d){return`<div class="chart-tip">
              <div>${d&&d[0]&&d[0].name}</div>
              <div>$${se(d&&d[0]&&d[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:_.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:_.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:u,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:_.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},O&&D.clear(),O&&D.setOption(O,!0),D.resize(),j.value=!1},$=v(""),p=v(""),T=async u=>{var t,h,B;const g=[],w=[],{price:d,daily_rate:Z}=b.value==="Aptos"?await We(u):await He(u,e.market);b.value=="Sui"&&A.setTokenExternalPrice(e.coin.address,(t=d[d.length-1])==null?void 0:t.price),$.value=Z;const G=d&&d.length>=1&&d[d.length-1].price;p.value=G,n.setCurrentCoinPairRate({[u]:G}),b.value==="Aptos"?d.forEach(k=>{g.push(k.price);const F=fe(Number(k.timestamp),"MD"),R=fe(Number(k.timestamp),"HM");w.push(F+" "+R)}):d.forEach(k=>{g.push(k.price);const F=fe(new y(k.timestamp).mul(1e3).toNumber(),"MD"),R=fe(new y(k.timestamp).mul(1e3).toNumber(),"HM");w.push(F+" "+R)});let V=document.getElementById(`main${(h=e.coin)==null?void 0:h.name}`);D=c.init(V),c.use([Xe]),f(g,w,(B=e.coin)==null?void 0:B.name)};Q(()=>e.id,(u,g)=>{u&&($.value="",p.value="",setTimeout(()=>{T(u)},1e3))},{immediate:!0});const z=v(""),U=v(""),q=v(""),r=v("");Q(()=>[m.value.tokensObj,e.coin],([u,g])=>{var w,d;u&&g&&u[g.address]&&(U.value=((w=u[g.address])==null?void 0:w.labels)&&((d=u[g.address])==null?void 0:d.labels[0]),z.value=u[g.address].name,q.value=u[g.address].symbol,r.value=u[g.address].address)},{immediate:!0,deep:!0}),Q(()=>e.refresh,u=>{u&&T(e.id)});const C=N(()=>_.value.theme),I=N(()=>_.value.currentExplorer);return{getExplorerUrl:ze,currentExplorer:I,theme:C,store:S,importIcon:le,fixD:Oe,config:M,price_rate_24h:$,nowPrice:p,coinName:z,coinLabels:U,coinSymbol:q,address:r,decimalUi:se,addCommom:K}}};const Ne=e=>(ke("data-v-7ca08fca"),e=e(),be(),e),Jo={class:"token-info"},Qo={class:"token-info-padding"},Xo={class:"token-info-header"},Zo={class:"left"},Vo=["onerror"],xo={class:"name"},en={class:"desc"},on={key:0},nn={class:"right"},tn={class:"new-style-tooltip-text"},an={class:"price-info"},sn={key:0,src:Ke,alt:""},ln={key:1,src:Ye,alt:""},rn={key:2,src:Je,alt:""},cn={class:"token-info-footer"},dn={class:"left"},mn={class:"address"},un={key:0,class:"pc-address"},gn={key:1,class:"pc-address"},hn={class:"h5-address"},fn=Ne(()=>o("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),vn=[fn],Cn=["href"],yn=Ne(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_link"})],-1)),kn=[yn],bn={class:"right"},_n=["id"];function pn(e,l,c,n,D,O){var _;const j=Ie,S=ye("image");return i(),s("div",Jo,[o("div",Qo,[o("div",Xo,[o("div",Zo,[L(o("img",{onerror:n.theme=="default"?n.importIcon("/image/coins/unknown.png"):n.importIcon("/image/coins/sui-unknown.png")},null,8,Vo),[[S,c.coin.logoURI||n.importIcon(`/image/coins/${c.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",xo,a(n.coinSymbol),1),o("div",en,[o("span",null,[P(a(n.coinName)+" ",1),n.theme!=="sui"?(i(),s("span",on,a(n.coinLabels?`(${n.coinLabels})`:""),1)):E("",!0)])])])]),o("div",nn,[Ce(j,{"overlay-class-name":"new-style-tooltip",placement:"top","arrow-point-at-center":""},{title:ee(()=>[o("div",tn,a(c.market==="pyth"?"Data source: Pyth Network":c.market==="coingecko"?"Data source: CoinGecko":"Data source: Birdeye"),1)]),default:ee(()=>[o("div",an,[c.market==="pyth"?(i(),s("img",sn)):c.market==="coingecko"?(i(),s("img",ln)):c.market==="birdeye"?(i(),s("img",rn)):E("",!0),o("span",null,"$"+a(n.nowPrice?Number(n.nowPrice)<1?n.decimalUi(n.nowPrice,4):n.addCommom(n.fixD(n.nowPrice,2)):"--"),1),n.price_rate_24h?(i(),s("i",{key:3,class:H(n.price_rate_24h>0?"up":n.price_rate_24h<0?"down":"up")},a(n.price_rate_24h>0?`+ ${n.fixD(n.price_rate_24h,2)}`:n.price_rate_24h<0?+`${n.fixD(n.price_rate_24h,2)}`:`+${n.fixD(n.price_rate_24h,2)}`)+"%",3)):E("",!0)])]),_:1})])]),o("div",cn,[o("div",dn,[o("div",mn,[c.coin&&n.address!=="0x2::sui::SUI"?(i(),s("span",un,a(c.coin&&c.coin.address.substr(0,8))+" ... "+a(c.coin&&c.coin.address.substr(c.coin.address.length-8,8)),1)):(i(),s("span",gn,a(c.coin&&c.coin.address),1)),o("span",hn,a(c.coin&&c.coin.address.substr(0,4))+" ... "+a(c.coin&&c.coin.address.substr(c.coin.address.length-4,4)),1),(i(),s("svg",{class:"icon","aria-hidden":"true",onClick:l[0]||(l[0]=b=>n.store.copy(c.coin&&c.coin.address))},vn)),o("a",{href:n.getExplorerUrl(n.currentExplorer,"coin",c.coin&&c.coin.address),target:"_blank"},kn,8,Cn)])]),o("div",bn,[o("div",{id:`main${(_=c.coin)==null?void 0:_.name}`,class:"main"},null,8,_n)])])])])}const Ft=_e(Yo,[["render",pn],["__scopeId","data-v-7ca08fca"]]),wn=Ae({components:{Modal:Me,PriceImpactTooltip:Re},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,default:0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,l){const c=pe(),n=N(()=>c),D=we(),O=N(()=>D),j=r=>{var C;return(r==null?void 0:r.logoURI)||(r==null?void 0:r.logo_url)||((C=n.value.tokensObj[r==null?void 0:r.address])==null?void 0:C.logo_url)||(O.value.theme==="default"?le("/image/coins/unknown.png"):le("/image/coins/sui-unknown.png"))},S=v(!1),_=N(()=>O.value.chainName),b=async()=>{l.emit("to-swap")};v([]);const M=v(0),A=v(""),m=v(""),f=N(()=>O.value.slippage);Q(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,f.value],([r,C,I,u,g,w])=>{if(r&&C&&I&&u&&w)if(g){const d=new y(C).mul(new y(w/100));m.value=new y(C).sub(d).toString()}else{const d=new y(r).mul(new y(w/100));A.value=new y(r).add(d).toString()}},{immediate:!0});const $=v(""),p=N(()=>{var r,C,I,u,g,w,d,Z,G,V,t,h;return(I=(C=n==null?void 0:n.value)==null?void 0:C.tokensObj[(r=e==null?void 0:e.fromCoin)==null?void 0:r.address])!=null&&I.pyth_id&&((w=(g=n==null?void 0:n.value)==null?void 0:g.tokensObj[(u=e==null?void 0:e.fromCoin)==null?void 0:u.address])==null?void 0:w.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(G=(Z=n==null?void 0:n.value)==null?void 0:Z.tokensObj[(d=e==null?void 0:e.fromCoin)==null?void 0:d.address])!=null&&G.coingecko_id?"coingecko":(h=(t=n==null?void 0:n.value)==null?void 0:t.tokensObj[(V=e==null?void 0:e.fromCoin)==null?void 0:V.address])!=null&&h.birdeyeid?"birdeye":null}),T=N(()=>{var r,C,I,u,g,w,d,Z,G,V,t,h;return(I=(C=n==null?void 0:n.value)==null?void 0:C.tokensObj[(r=e==null?void 0:e.toCoin)==null?void 0:r.address])!=null&&I.pyth_id&&((w=(g=n==null?void 0:n.value)==null?void 0:g.tokensObj[(u=e==null?void 0:e.toCoin)==null?void 0:u.address])==null?void 0:w.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(G=(Z=n==null?void 0:n.value)==null?void 0:Z.tokensObj[(d=e==null?void 0:e.toCoin)==null?void 0:d.address])!=null&&G.coingecko_id?"coingecko":(h=(t=n==null?void 0:n.value)==null?void 0:t.tokensObj[(V=e==null?void 0:e.toCoin)==null?void 0:V.address])!=null&&h.birdeyeid?"birdeye":null}),z=async()=>{const r=n.value.tokenExternalPriceObj[e.fromCoin.address],C=n.value.tokenExternalPriceObj[e.toCoin.address];if(r&&C){const I=new y(r).div(new y(C)),u=new y(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(I).div(I).mul(100);let g=Math.abs(ne(u,2));I.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?$.value="":$.value=u>0&&u<=.01?"0.01":g}else $.value=""},U=r=>{if(r<5)return"color-s";if(r>=5&&r<10)return"color-w";if(r>=10)return"color-e"};Q(()=>[e.oneToAmount,n.value.tokenExternalPriceObj,_.value],([r,C,I])=>{r&&C&&!he(C)&&I!=="Aptos"&&z()},{immediate:!0,deep:!0});const q=v(!1);return{getCoinIcon:j,addCommom:K,sFixD:ne,rateChange:S,chainName:_,clickNextBtn:b,pathLength:M,maximumSold:A,minimumReceived:m,decimalUi:se,getTextColor:U,priceExangeRate:$,formCoinMarket:p,toCoinMarket:T,readWithin:q}}});const X=e=>(ke("data-v-2c6669c3"),e=e(),be(),e),$n=X(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Sn={class:"new-swap-contnet"},An={class:"coin-info"},In={class:"from-coin-info"},Rn={class:"left"},Nn={class:"coin-amount"},Fn={class:"coin-symbol"},On={class:"right"},Bn={class:"to-coin-info"},Ln={class:"left"},jn={class:"coin-amount"},Pn={class:"coin-symbol"},Dn={class:"right"},Mn=X(()=>o("div",{class:"to-swap-logo"},null,-1)),Tn={class:"coin-rate"},En={key:0,class:"coin-rate-box"},Un={class:"left"},qn=X(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),zn=X(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Gn=[qn,zn],Wn={key:1,class:"coin-rate-box"},Hn={class:"left"},Kn=X(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Yn=X(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Jn=[Kn,Yn],Qn={key:2,class:"price-impact"},Xn=X(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Zn=[Xn],Vn=X(()=>o("br",null,null,-1)),xn={class:"bottom"},et={class:"induction"},ot={class:"item"},nt={class:"induction-text"},tt={class:"induction-value"},it={class:"item"},at={class:"induction-text"},st={class:"induction-value"},lt={class:"item"},rt={class:"induction-text"},ct={key:0,class:"item"},dt={class:"induction-text"},mt={key:0,class:"induction-value"},ut={key:1,class:"induction-value"},gt={key:0,class:"within-desc"},ht=X(()=>o("div",{class:"within-top"},[o("img",{src:Qe,alt:""}),o("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),ft={class:"within-bottom"},vt={key:0,class:"price-updated"},Ct=X(()=>o("span",null,"Price updated",-1));function yt(e,l,c,n,D,O){const j=Se("PriceImpactTooltip"),S=Te,_=Se("Modal"),b=ye("image");return i(),Y(_,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:l[7]||(l[7]=M=>e.$emit("on-close"))},{closeIcon:ee(()=>[$n]),default:ee(()=>{var M;return[o("div",Sn,[o("div",An,[o("div",In,[o("div",Rn,[o("div",Nn,a(e.fromCoinAmount&&("addCommom"in e?e.addCommom:J(K))(e.fromCoinAmount)),1),o("div",Fn,a(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",On,[L(o("img",null,null,512),[[b,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",Bn,[o("div",Ln,[o("div",jn,a(e.toCoinAmount&&("addCommom"in e?e.addCommom:J(K))(e.toCoinAmount)),1),o("div",Pn,a(e.toCoin&&e.toCoin.symbol),1)]),o("div",Dn,[L(o("img",null,null,512),[[b,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),Mn]),o("div",Tn,[e.rateChange?(i(),s("div",Wn,[o("div",Hn,[L(o("img",null,null,512),[[b,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+a(e.toCoin&&e.toCoin.symbol)+" â‰ˆ",1),L(o("img",null,null,512),[[b,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,a(e.oneFromAmount)+" "+a(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:l[1]||(l[1]=A=>e.rateChange=!e.rateChange)},Jn)])):(i(),s("div",En,[o("div",Un,[L(o("img",null,null,512),[[b,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+a(e.fromCoin&&e.fromCoin.symbol)+" â‰ˆ",1),L(o("img",null,null,512),[[b,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,a(e.oneToAmount)+" "+a(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:l[0]||(l[0]=A=>e.rateChange=!e.rateChange)},Gn)])),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(i(),s("div",Qn,[(i(),s("svg",{class:H(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},Zn,2)),o("span",{class:H(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),o("span",{class:H(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[P("Price Impact Alert."),Vn,P(" Be cautious before submitting your order.")],2)])):E("",!0)])]),o("div",xn,[o("div",et,[o("div",ot,[o("div",nt,a(e.$t("modal.slippageTolerance")),1),o("div",tt,a(e.slippage)+"%",1)]),o("div",it,[o("div",at,a(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",st,a(e.fixedFromCoin?("addCommom"in e?e.addCommom:J(K))(("sFixD"in e?e.sFixD:J(ne))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:J(K))(("sFixD"in e?e.sFixD:J(ne))(e.maximumSold,e.fromCoin.decimals)))+" "+a(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",lt,[o("div",rt,[P(" Price Impact "),Ce(j,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),o("div",{class:H(["induction-value",e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[e.chainName=="Aptos"?(i(),s(oe,{key:0},[P(a(e.impact<.01?"<0.01":e.impact>100?">100":e.impact)+"% ",1)],64)):(i(),s(oe,{key:1},[P(a(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(M=String(e.impact))==null?void 0:M.replace("-","")}`)+"% ",1)],64))],2)]),e.chainName=="Aptos"?(i(),s("div",ct,[o("div",dt,a(e.$t("common.fee")),1),e.chainName=="Aptos"?(i(),s("div",mt,a(e.formatFee)+" "+a(e.fromCoin.symbol)+" ("+a(e.fee*100)+"%) ",1)):(i(),s("div",ut,a(e.fee)+" "+a(e.fromCoin.symbol),1))])):E("",!0)])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),s("div",gt,[ht,o("div",ft,[o("div",{class:H(["within-btn",e.readWithin?"within-btn-active":""]),onClick:l[2]||(l[2]=A=>e.readWithin=!0)}," Yes, please continue. ",2),o("div",{class:"within-btn",onClick:l[3]||(l[3]=A=>e.$emit("on-close"))},"No, cancel it.")])])):E("",!0)]),e.isShowAccept?(i(),s("div",vt,[Ct,Ce(S,{class:"accept-btn",loading:e.swapLoading,onClick:l[4]||(l[4]=A=>e.$emit("accept"))},{default:ee(()=>[P("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(i(),Y(S,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:l[5]||(l[5]=A=>e.clickNextBtn())},{default:ee(()=>[P(a(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):e.chainName=="Aptos"?(i(),Y(S,{key:2,class:"big-btn swap-confirm-btn",onClick:l[6]||(l[6]=A=>e.clickNextBtn())},{default:ee(()=>[P(a(e.$t("button.confirmSwap")),1)]),_:1})):E("",!0)]}),_:1},8,["title"])}const Ot=_e(wn,[["render",yt],["__scopeId","data-v-2c6669c3"]]);export{Nt as _,Ft as a,Ot as b};
