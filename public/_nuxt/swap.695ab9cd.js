import{_ as rn,a as dn}from"./token-warning-modal.4566e88b.js";import{_ as cn}from"./assets-card.58c4187e.js";import{u as Ie,a as Bo,c as we,D as m,s as Y,b as E,i as Fo,g as eo,y as ko,f as pe,v as $o,p as he,e as be,d as Ee}from"./pool.93e3442c.js";import{e as Te,a as De,a4 as Oo,a5 as Po,r as p,m as S,D as J,q as Ne,o as a,f as g,h as o,c as W,x as P,t as Z,j as z,v as s,z as de,u as L,K as _o,S as Uo,p as Be,k as Fe,M as no,l as Ro,L as so,w as te,i as ve,B as ao,a6 as mn,F as oo,s as Io,b as To,y as vn,C as pn,a9 as qe,G as fn}from"./entry.498536d1.js";/* empty css              *//* empty css              */import{u as $e,_ as We}from"./index.b4474164.js";import"./decimal.d455b6dc.js";import{i as ue}from"./import-icon.de3e6c66.js";import{a as gn,_ as Cn}from"./network-tips.f01384cc.js";import{_ as hn}from"./coin-select.3f304d8a.js";/* empty css              */import{u as bn}from"./swapRouter.6b747fef.js";import{_ as wn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.58f95af8.js";/* empty css              */import"./img-no-Positions_2x.21b63493.js";const yn=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const An=De({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const u=Oo(Po,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),w=p(!1),b=$e(),N=S(()=>b),U=S(()=>N.value.slippage),v=S(()=>N.isShowRouterModal);J(()=>e,I=>{console.log(I,"==>newValue")},{immediate:!0,deep:!0});const _=Ie(),k=S(()=>_),F=Bo("Sui"),O=p({}),H=p({}),X=p({});J(()=>[e.suiPreSwapdata,k.value.tokensObj],async([I,f])=>{I&&!we(I)&&f&&!we(f)&&(I.coinTypeA&&(O.value=f[I.coinTypeA]||(await F.getTokenListByCoinType([I.coinTypeA]))[0]),I.coinTypeB&&(H.value=f[I.coinTypeB]||(await F.getTokenListByCoinType([I.coinTypeB]))[0]),I.coinTypeC&&(X.value=f[I.coinTypeC]||(await F.getTokenListByCoinType([I.coinTypeC]))[0]))},{immediate:!0});const j=p(0),Q=p(0);return J(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,U.value],([I,f,re,B,V,t])=>{if(I&&f&&re&&B&&t)if(V){const d=new m(f).mul(new m(t/100));Q.value=new m(f).sub(d).toString()}else{const d=new m(I).mul(new m(t/100));j.value=new m(I).sub(d).toString()}},{immediate:!0}),{sFixD:Y,getCoinIcon:I=>{var f;return(I==null?void 0:I.logoURI)||(I==null?void 0:I.logo_url)||((f=k.value.tokensObj[I==null?void 0:I.address])==null?void 0:f.logo_url)||(N.theme==="default"?ue("/image/coins/unknown.png"):ue("/image/coins/sui-unknown.png"))},indicator:u,rateChange:w,slippage:U,isShowRouterModal:v,indexStore:b,coinTypeA:O,coinTypeB:H,coinTypeC:X,maximumSold:j,minimumReceived:Q,addCommom:E}}}),ye=e=>(Be("data-v-fd74e509"),e=e(),Fe(),e),Sn={key:0,class:"swap-info"},kn={class:"loading-swap"},$n={key:1,class:"swap-rate"},In={key:0},Tn={key:0},Nn={key:1},Bn={key:0},Fn=ye(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),On=ye(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Pn=[Fn,On],_n={key:2},Un={class:"trade-info"},Rn={class:"trade-block"},Dn=ye(()=>o("div",{class:"lebal"},"Price Impact",-1)),Ln={key:0,class:"icon","aria-hidden":"true"},jn=ye(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Mn=[jn],En={class:"trade-block"},qn={class:"lebal"},Wn={key:0,class:"text"},Xn={class:"trade-block"},Qn=ye(()=>o("div",{class:"lebal"},"Fee",-1)),Hn={key:0,class:"text"},Kn={key:0,class:"trade-block"},Zn=ye(()=>o("div",{class:"lebal"},"Route",-1)),zn={key:0,class:"text"},Jn={key:0},Yn={key:1},Gn={key:2},Vn=ye(()=>o("img",{src:yn,alt:""},null,-1));function xn(e,u,w,b,N,U){const v=_o,_=Uo,k=Ne("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(a(),g("div",Sn,[o("div",kn,[e.swapLoading||e.swapRouterLoading?(a(),W(v,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):P("",!0),e.swapLoading?e.swapLoading?(a(),g("span",_n,"Best route and price")):P("",!0):(a(),g("div",$n,[e.rateChange?(a(),g("span",Nn,[e.fromCoinAmount&&e.toCoinAmount?(a(),g("span",Bn,[Z(o("img",null,null,512),[[k,e.getCoinIcon(e.toCoin)]]),z(" 1 "+s(e.toCoin.symbol)+" ≈ ",1),Z(o("img",null,null,512),[[k,e.getCoinIcon(e.fromCoin)]]),z(s(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+s(e.fromCoin.symbol),1)])):(a(),W(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),g("span",In,[Z(o("img",null,null,512),[[k,e.getCoinIcon(e.fromCoin)]]),z(" 1 "+s(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(a(),g("span",Tn,[Z(o("img",null,null,512),[[k,e.getCoinIcon(e.toCoin)]]),z(s(e.oneToAmount==1/0?0:e.oneToAmount)+" "+s(e.toCoin.symbol),1)])):(a(),W(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:u[0]||(u[0]=F=>e.rateChange=!e.rateChange)},Pn)]))]),o("div",Un,[o("div",Rn,[Dn,e.swapRouterLoading?(a(),W(_,{key:1,paragraph:!1,active:""})):(a(),g("div",{key:0,class:de(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[z(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),g("svg",Ln,Mn)):P("",!0)],2))]),o("div",En,[o("div",qn,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(a(),W(_,{key:1,paragraph:!1,active:""})):(a(),g("div",Wn,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(e.maximumSold,e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",Xn,[Qn,e.swapRouterLoading?(a(),W(_,{key:1,paragraph:!1,active:""})):(a(),g("div",Hn,s(e.suiSwapFee),1))]),e.insufficientLiquidity?P("",!0):(a(),g("div",Kn,[Zn,e.swapRouterLoading?(a(),W(_,{key:1,paragraph:!1,active:""})):(a(),g("div",{key:0,class:"text",onClick:u[1]||(u[1]=F=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[e.swapRouterLoading?P("",!0):(a(),g("div",zn,[e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeA?(a(),g("span",Jn,s(e.coinTypeA.symbol)+" "+s(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?"> ":""),1)):P("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?(a(),g("span",Yn,s(e.coinTypeB.symbol)+" "+s(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?"> ":""),1)):P("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?(a(),g("span",Gn,s(e.coinTypeC.symbol),1)):P("",!0)])),Vn]))]))])])):P("",!0)}const es=Te(An,[["render",xn],["__scopeId","data-v-fd74e509"]]),No={SUI:{symbol:"SUI",name:"Sui Coin",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sBTC:{symbol:"sBTC",name:"Wrapped BTC",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sETH:{symbol:"sETH",name:"Wrapped Ether",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::ETH"},USDC:{symbol:"USDC",name:"USDC Coin",decimals:6,balance:12e3,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC"},USDT:{symbol:"USDT",name:"Tether USD",decimals:6,balance:1e4,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT"}},os={"USDT-USDC":{symbol:"USDT-USDC",name:"USDT-USDC",decimals:6,coinA:No.USDT,coinB:No.USDC,feeDenominator:"10000",feeNumerator:"1",fee:"0.01",address:"0x1ce98d89494e9d3d7935bc3bd5fc714fc2abb99db3f024162552c4ba172f4d28::amm_swap::PoolLiquidityCoin<0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT,0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC>"}};function ns(e,u){const w=Object.values(os).filter(b=>e===b.coinA.symbol&&u===b.coinB.symbol||e===b.coinB.symbol&&u===b.coinA.symbol);return w&&w[0]||null}const ss=De({components:{Modal:no},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},impact:{type:Number,required:!0},fee:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},formatFee:{type:String,default:""}},emits:["to-swap","on-close"],setup(e,u){const{t:w,locale:b}=Ro(),N=$e(),U=Fo();S(()=>U);const v=S(()=>{const B=ns(e.fromCoin.symbol,e.toCoin.symbol);return eo(ko(e.fromCoinAmount).mul(ko(B.fee).div(100)).toString(),e.fromCoin.decimals)}),_=p(N.slippage||.5),k=p(!0),F=p(!1);function O(B){k.value=B}const H=async()=>{u.emit("to-swap")},X=Ie(),j=S(()=>X),Q=S(()=>j.value.tokensObj&&e.fromCoin.address&&j.value.tokensObj[e.fromCoin.address]&&j.value.tokensObj[e.fromCoin.address].logoURI),G=S(()=>j.value.tokensObj&&e.toCoin.address&&j.value.tokensObj[e.toCoin.address]&&j.value.tokensObj[e.toCoin.address].logoURI),I=$e(),f=S(()=>I);return{fromCoinUrl:Q,toCoinUrl:G,t:w,importIcon:ue,fixD:pe,decimalFormat:eo,direct:k,changeDirect:O,rateChange:F,clickNextBtn:H,slippage:_,liquidityProviderFee:v,getCoinIcon:B=>{var V;return(B==null?void 0:B.logoURI)||(B==null?void 0:B.logo_url)||((V=j.value.tokensObj[B==null?void 0:B.address])==null?void 0:V.logo_url)||(f.value.theme==="default"?ue("/image/coins/unknown.png"):ue("/image/coins/sui-unknown.png"))},addCommom:E,sFixD:Y}}});const Xe=e=>(Be("data-v-1213bea7"),e=e(),Fe(),e),as=Xe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ts={class:"swap-confirm-container"},is={class:"card-content"},ls={class:"top"},us={class:"coin"},rs=Xe(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-swap2"})])],-1)),ds={class:"coin"},cs={class:"bottom"},ms={class:"induction"},vs={class:"item"},ps={class:"induction-text"},fs={class:"induction-value induction-value-change"},gs={key:0},Cs={key:1},hs=Xe(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),bs=[hs],ws={class:"item"},ys={class:"induction-text"},As={class:"induction-value"},Ss={class:"item"},ks={class:"induction-text"},$s={class:"induction-value"},Is={key:0,class:"item"},Ts={class:"induction-text"},Ns={key:0,class:"icon","aria-hidden":"true"},Bs=Xe(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Fs=[Bs],Os={key:1,class:"item"},Ps={class:"induction-text"},_s={key:0,class:"induction-value"},Us={key:1,class:"induction-value"};function Rs(e,u,w,b,N,U){const v=ao,_=so("Modal"),k=Ne("image");return a(),W(_,{width:"440px",visible:!0,footer:null,title:e.$t("modal.swapConfirmTitle"),class:"swap-confirm-modal",onCancel:u[2]||(u[2]=F=>e.$emit("on-close"))},{closeIcon:te(()=>[as]),default:te(()=>[o("div",ts,[o("div",is,[o("div",ls,[o("div",us,[Z(o("img",null,null,512),[[k,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("p",null,s(e.fromCoinAmount),1),z("    "),o("p",null,s(e.fromCoin.symbol),1)]),rs,o("div",ds,[Z(o("img",null,null,512),[[k,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),o("p",null,s(e.toCoinAmount),1),z("    "),o("p",null,s(e.toCoin.symbol),1)])]),o("div",cs,[o("div",ms,[o("div",vs,[o("div",ps,s(e.$t("common.rate")),1),o("div",fs,[e.rateChange?(a(),g("span",Cs," 1 "+s(e.toCoin.symbol)+" ≈ "+s(("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.toCoin.decimals)))+" "+s(e.fromCoin.symbol),1)):(a(),g("span",gs," 1 "+s(e.fromCoin.symbol)+" ≈ "+s(("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals)))+" "+s(e.toCoin.symbol),1)),(a(),g("svg",{class:"icon-change","aria-hidden":"true",onClick:u[0]||(u[0]=F=>e.rateChange=!e.rateChange)},bs))])]),o("div",ws,[o("div",ys,s(e.$t("modal.slippageTolerance")),1),o("div",As,s(e.slippage)+"%",1)]),o("div",Ss,[o("div",ks,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",$s,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),e.chainName=="Sui"?(a(),g("div",Is,[o("div",Ts,s(e.$t("common.priceImpact")),1),o("div",{class:de(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},[z(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),g("svg",Ns,Fs)):P("",!0)],2)])):P("",!0),e.fee?(a(),g("div",Os,[o("div",Ps,s(e.$t("common.fee")),1),e.chainName=="Aptos"?(a(),g("div",_s,s(e.formatFee)+" "+s(e.fromCoin.symbol)+" ("+s(e.fee*100)+"%) ",1)):(a(),g("div",Us,s(e.fee),1))])):P("",!0)])])])]),ve(v,{class:"big-btn swap-confirm-btn",onClick:u[1]||(u[1]=F=>e.clickNextBtn())},{default:te(()=>[z(s(e.$t("button.confirmSwap")),1)]),_:1})]),_:1},8,["title"])}const Ds=Te(ss,[["render",Rs],["__scopeId","data-v-1213bea7"]]);async function Ls(e){const{prices:u}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}});return u}const js={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""}},setup(e,u){const{$echarts:w}=mn();let b=null,N;const U=p(!0),v=(t,d,ee)=>{N={xAxis:{type:"category",boundaryGap:!1,show:!1,data:d},yAxis:{type:"value",show:!1,min:function(C){return C.min-C.min*.1},max:function(C){return C.max+C.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:j.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(C){return`<div class="chart-tip">
              <div>${C&&C[0]&&C[0].name}</div>
              <div>$${pe(C&&C[0]&&C[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:j.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:j.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:t,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:j.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},N&&b.clear(),N&&b.setOption(N,!0),b.resize(),U.value=!1},_=Ie(),k=S(()=>_),F=p(""),O=p(""),H=async t=>{var oe,Ce;const d=[],ee=[],C=await Ls(t);F.value=C&&C.length>1&&(C[C.length-1][1]-C[0][1])/C[0][1]*100,O.value=C&&C.length>1&&C[C.length-1][1],C.forEach(M=>{d.push(M[1]);const K=$o(M[0],"MD"),l=$o(M[0],"HM");ee.push(K+" "+l)});let Ae=document.getElementById(`main${(oe=e.coin)==null?void 0:oe.name}`);b=w.init(Ae),v(d,ee,(Ce=e.coin)==null?void 0:Ce.name)},X=$e(),j=S(()=>X),Q=S(()=>j.value.chainName),G=S(()=>We[Q.value]);J(()=>e.id,(t,d)=>{console.log(t,d,"===>oldValue"),console.log(!U.value,"!isFirst.value"),t&&(F.value="",O.value="",setTimeout(()=>{H(t)},1e3))},{immediate:!0});const I=p(""),f=p(""),re=p(""),B=p("");J(()=>[k.value.tokensObj,e.coin],([t,d])=>{var ee,C;t&&d&&t[d.address]&&(console.log(t[d.address],"===>newValue[coin.address]"),f.value=((ee=t[d.address])==null?void 0:ee.labels)&&((C=t[d.address])==null?void 0:C.labels[0]),I.value=t[d.address].name,re.value=t[d.address].symbol,B.value=t[d.address].address)},{immediate:!0,deep:!0}),J(()=>e.refresh,t=>{t&&H(e.id)});const V=S(()=>j.value.theme);return console.log(e.coin.address=="0x2::sui::SUI","0x2::sui::SUI"),{theme:V,store:X,importIcon:ue,fixD:pe,config:G,price_rate_24h:F,nowPrice:O,coinName:I,coinLabels:f,coinSymbol:re,address:B}}};const Ms=e=>(Be("data-v-2d274d28"),e=e(),Fe(),e),Es={class:"token-info"},qs={class:"token-info-padding"},Ws={class:"token-info-header"},Xs={class:"left"},Qs=["onerror"],Hs={class:"name"},Ks={class:"desc"},Zs={class:"right"},zs={class:"price"},Js={class:"token-info-footer"},Ys={class:"left"},Gs={class:"address"},Vs={key:0,class:"pc-address"},xs={key:1,class:"pc-address"},ea={class:"h5-address"},oa=Ms(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),na=[oa],sa={class:"right"},aa=["id"];function ta(e,u,w,b,N,U){var _;const v=Ne("image");return a(),g("div",Es,[o("div",qs,[o("div",Ws,[o("div",Xs,[Z(o("img",{onerror:b.theme=="default"?b.importIcon("/image/coins/unknown.png"):b.importIcon("/image/coins/sui-unknown.png")},null,8,Qs),[[v,w.coin.logoURI||b.importIcon(`/image/coins/${w.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",Hs,s(b.coinSymbol),1),o("div",Ks,[o("span",null,s(b.coinName)+" "+s(b.coinLabels?`(${b.coinLabels})`:""),1)])])]),o("div",Zs,[o("div",zs,"$"+s(b.fixD(b.nowPrice,2)),1),b.price_rate_24h?(a(),g("div",{key:0,class:de(b.price_rate_24h>0?"increase up":b.price_rate_24h<0?"increase down":"increase up")},s(b.price_rate_24h>0?`+ ${b.fixD(b.price_rate_24h,2)}`:b.price_rate_24h<0?+`${b.fixD(b.price_rate_24h,2)}`:`+${b.fixD(b.price_rate_24h,2)}`)+"% ",3)):P("",!0)])]),o("div",Js,[o("div",Ys,[o("div",Gs,[w.coin&&b.address!=="0x2::sui::SUI"?(a(),g("span",Vs,s(w.coin&&w.coin.address.substr(0,13))+" ... "+s(w.coin&&w.coin.address.substr(w.coin.address.length-13,13)),1)):(a(),g("span",xs,s(w.coin&&w.coin.address),1)),o("span",ea,s(w.coin&&w.coin.address.substr(0,4))+" ... "+s(w.coin&&w.coin.address.substr(w.coin.address.length-4,4)),1),(a(),g("svg",{class:"icon","aria-hidden":"true",onClick:u[0]||(u[0]=k=>b.store.copy(w.coin&&w.coin.address))},na))])]),o("div",sa,[o("div",{id:`main${(_=w.coin)==null?void 0:_.name}`,class:"main"},null,8,aa)])])])])}const ia=Te(js,[["render",ta],["__scopeId","data-v-2d274d28"]]);const la=De({components:{Modal:no},props:{routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},routerTotalAmounts:{type:String,default:""}},setup(e){const u=Ie(),w=S(()=>u),b=p([]);return J(()=>[e.routerPool,w.value.poolConfigObj,e.routerTotalAmounts,e.fromCoin,e.toCoin],([N,U,v,_,k])=>{if(console.log(e,"props=====>100"),N&&N.length>0&&U&&!we(U)&&v){const F=[];N.forEach(O=>{console.log(v,"===>routerTotalAmounts"),console.log(O,"ele.amountIn===>");const H="100",X=O.amountIn.toString(),j=he(O.amountOut.toString(),k.decimals),Q=O.poolAddress.map((G,I)=>{const f=U&&U[G];return console.log(O,"ele===>118"),{...f}});F.push({percent:H,...O,amountIn:X,amountOut:j,poolAddress:Q})}),console.log(F,"result===>"),b.value=F}},{immediate:!0}),S(()=>{var N,U;return(U=(N=w.value)==null?void 0:N.poolInfo)==null?void 0:U.needReverse}),{addCommom:E,routerStep:b}}}),Qe=e=>(Be("data-v-963af6cc"),e=e(),Fe(),e),ua=Qe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ra={class:"route-top"},da={class:"token-a"},ca={alt:""},ma={class:"token-num"},va={class:"token-symbol"},pa={class:"token-b"},fa={class:"token-num"},ga={class:"token-symbol"},Ca={alt:""},ha={class:"route-bottom"},ba=Qe(()=>o("div",{class:"left-round"},null,-1)),wa=Qe(()=>o("div",{class:"right-round"},null,-1)),ya={class:"percent"},Aa={class:"pool-info"},Sa={class:"token-a-img",alt:""},ka={class:"token-b-img",alt:""},$a={key:0,class:"icon","aria-hidden":"true"},Ia=Qe(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Ta=[Ia];function Na(e,u,w,b,N,U){const v=so("Modal"),_=Ne("image");return a(),W(v,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:u[0]||(u[0]=k=>e.$emit("onClose"))},{closeIcon:te(()=>[ua]),default:te(()=>{var k,F,O,H;return[o("div",ra,[o("div",da,[Z(o("img",ca,null,512),[[_,(k=e.fromCoin)==null?void 0:k.logo_url]]),o("span",ma,s(("addCommom"in e?e.addCommom:L(E))(e.fromCoinAmount)),1),o("span",va,s((F=e.fromCoin)==null?void 0:F.symbol),1)]),o("div",pa,[o("span",fa,s(("addCommom"in e?e.addCommom:L(E))(e.toCoinAmount)),1),o("span",ga,s((O=e.toCoin)==null?void 0:O.symbol),1),Z(o("img",Ca,null,512),[[_,(H=e.toCoin)==null?void 0:H.logo_url]])])]),o("div",ha,[ba,wa,(a(!0),g(oo,null,Io(e.routerStep,(X,j)=>(a(),g("div",{key:X,class:de(["route-path",j!==0?"route-path-active":""])},[o("div",ya,[o("span",null,s(X.percent)+"%",1),o("span",null,s(("addCommom"in e?e.addCommom:L(E))(X.amountOut))+" "+s(e.toCoin.symbol),1)]),(a(!0),g(oo,null,Io(X.poolAddress,(Q,G)=>(a(),g("div",{key:G,class:"pool-info-box"},[o("div",Aa,[Z(o("img",Sa,null,512),[[_,Q.needReverse?Q.coinB.logo_url:Q.coinA.logo_url]]),Z(o("img",ka,null,512),[[_,Q.needReverse?Q.coinA.logo_url:Q.coinB.logo_url]]),o("span",null,s(Q.fee*100)+"%",1)]),G!==X.poolAddress.length-1?(a(),g("svg",$a,Ta)):P("",!0)]))),128))],2))),128))])]}),_:1})}const Ba=Te(la,[["render",Na],["__scopeId","data-v-963af6cc"]]),Fa=De({components:{Modal:no},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"998041.711793"},slippage:{type:String,default:""},impact:{type:Number,required:!0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!0},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!0},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""}},setup(e,u){const w=Ie(),b=S(()=>w),N=$e(),U=S(()=>N),v=O=>{var H;return(O==null?void 0:O.logoURI)||(O==null?void 0:O.logo_url)||((H=b.value.tokensObj[O==null?void 0:O.address])==null?void 0:H.logo_url)||(U.value.theme==="default"?ue("/image/coins/unknown.png"):ue("/image/coins/sui-unknown.png"))},_=p(!1),k=S(()=>U.value.chainName),F=async()=>{u.emit("to-swap")};return console.log(e.swapLoading,"swapLoading===>"),{getCoinIcon:v,addCommom:E,sFixD:Y,rateChange:_,chainName:k,clickNextBtn:F}}});const fe=e=>(Be("data-v-af63f672"),e=e(),Fe(),e),Oa=fe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Pa={class:"new-swap-contnet"},_a={class:"coin-info"},Ua={class:"from-coin-info"},Ra={class:"left"},Da={class:"coin-amount"},La={class:"coin-symbol"},ja={class:"right"},Ma={class:"to-coin-info"},Ea={class:"left"},qa={class:"coin-amount"},Wa={class:"coin-symbol"},Xa={class:"right"},Qa=fe(()=>o("div",{class:"to-swap-logo"},null,-1)),Ha={class:"coin-rate"},Ka={key:0},Za={class:"left"},za=fe(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ja=fe(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ya=[za,Ja],Ga={key:1},Va={class:"left"},xa=fe(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),et=fe(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ot=[xa,et],nt={class:"bottom"},st={class:"induction"},at={class:"item"},tt={class:"induction-text"},it={class:"induction-value"},lt={class:"item"},ut={class:"induction-text"},rt={class:"induction-value"},dt={key:0,class:"item"},ct={class:"induction-text"},mt={key:0,class:"icon","aria-hidden":"true"},vt=fe(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),pt=[vt],ft={key:1,class:"item"},gt={class:"induction-text"},Ct={key:0,class:"induction-value"},ht={key:1,class:"induction-value"},bt={key:0,class:"price-updated"},wt=fe(()=>o("span",null,"Price updated",-1));function yt(e,u,w,b,N,U){const v=ao,_=so("Modal"),k=Ne("image");return a(),W(_,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:u[4]||(u[4]=F=>e.$emit("on-close"))},{closeIcon:te(()=>[Oa]),default:te(()=>[o("div",Pa,[o("div",_a,[o("div",Ua,[o("div",Ra,[o("div",Da,s(e.fromCoinAmount&&("addCommom"in e?e.addCommom:L(E))(e.fromCoinAmount)),1),o("div",La,s(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",ja,[Z(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",Ma,[o("div",Ea,[o("div",qa,s(e.toCoinAmount&&("addCommom"in e?e.addCommom:L(E))(e.toCoinAmount)),1),o("div",Wa,s(e.toCoin&&e.toCoin.symbol),1)]),o("div",Xa,[Z(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),Qa]),o("div",Ha,[e.rateChange?(a(),g("div",Ga,[o("div",Va,[Z(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+s(e.toCoin&&e.toCoin.symbol)+" ≈",1),Z(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,s(e.oneFromAmount)+" "+s(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:u[1]||(u[1]=F=>e.rateChange=!e.rateChange)},ot)])):(a(),g("div",Ka,[o("div",Za,[Z(o("img",null,null,512),[[k,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+s(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),Z(o("img",null,null,512),[[k,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,s(e.oneToAmount)+" "+s(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:u[0]||(u[0]=F=>e.rateChange=!e.rateChange)},Ya)]))])]),o("div",nt,[o("div",st,[o("div",at,[o("div",tt,s(e.$t("modal.slippageTolerance")),1),o("div",it,s(e.slippage)+"%",1)]),o("div",lt,[o("div",ut,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",rt,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),e.chainName=="Sui"?(a(),g("div",dt,[o("div",ct,s(e.$t("common.priceImpact")),1),o("div",{class:de(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[z(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),g("svg",mt,pt)):P("",!0)],2)])):P("",!0),e.fee?(a(),g("div",ft,[o("div",gt,s(e.$t("common.fee")),1),e.chainName=="Aptos"?(a(),g("div",Ct,s(e.formatFee)+" "+s(e.fromCoin.symbol)+" ("+s(e.fee*100)+"%) ",1)):(a(),g("div",ht,s(e.fee),1))])):P("",!0)])])]),e.isShowAccept?(a(),g("div",bt,[wt,ve(v,{class:"accept-btn",loading:e.swapLoading,onClick:u[2]||(u[2]=F=>e.$emit("accept"))},{default:te(()=>[z("Accept")]),_:1},8,["loading"])])):(a(),W(v,{key:1,class:"big-btn swap-confirm-btn",onClick:u[3]||(u[3]=F=>e.clickNextBtn())},{default:te(()=>[z(s(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const At=Te(Fa,[["render",yt],["__scopeId","data-v-af63f672"]]),St=De({setup(){const e=To(),u=Oo(Po,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:w,locale:b}=Ro(),N=$e(),U=Ie(),v=S(()=>U);let _=p(!1),k=p(!1),F=p(!1),O=p(!1),H=p(!1),X=p(!1);const j=p("fromCoin"),Q=p(""),G=p(""),I=p(!1),f=p(!0),re=p(!1),B=p(!1),V=p(!1),t=p(""),d=p(""),ee=p(20),C=p(0),Ae=p(null),oe=p(!1),Ce=S(()=>N.slippage),M=S(()=>N.chainName),K=S(()=>M.value?Bo(M.value):{}),l=p(),c=p(),He=S(()=>We&&We[M.value]&&We[M.value].hasRouter),to=S(()=>U.getPoolInfoSuccess),Do=S(()=>{var n;return T.value&&((n=T.value)!=null&&n.is_pause)?"Pool Closed":!l.value||!c.value?w("modal.selectTokenModalTitle"):!Number(t.value)&&!Number(d.value)?w("button.enterAmount"):!He.value&&!T.value&&to.value?"Pool Not Found":He.value&&_e.value?"No Available Route":(console.log(oe.value,"===>insufficientLiquidity.value"),oe.value?w("button.insufficientLiquidity"):Number(t.value)>Number(ae.value)?w("button.insufficientBalance",{name:l.value.symbol}):w("button.swap"))}),Lo=n=>{var r,i,h,y;j.value=n,n==="fromCoin"?(Q.value=((r=c.value)==null?void 0:r.address)||"",G.value=((i=l.value)==null?void 0:i.address)||""):(Q.value=((h=l.value)==null?void 0:h.address)||"",G.value=((y=c.value)==null?void 0:y.address)||""),I.value=!0},Ke=p({}),Ze=p({}),jo=n=>{j.value==="fromCoin"?(Ke.value=n,Je(n)):(Ze.value=n,Je(n))},Mo=n=>{n==="fromCoin"?(f.value=!0,M.value==="Aptos"?t.value=ae.value>0?l.value.symbol=="APT"?new m(Number(ae.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(ae.value)).sub(new m(.1)).toString():String(ae.value):"":t.value=ae.value>0?l.value.symbol=="SUI"?new m(Number(ae.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(ae.value)).sub(new m(.05)).toString():String(ae.value):""):(f.value=!1,M.value==="Aptos"?d.value=le.value>0?c.value.symbol=="APT"?new m(Number(le.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(le.value)).sub(new m(.1)).toString():String(le.value):"":d.value=le.value>0?c.value.symbol=="SUI"?new m(Number(le.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(le.value)).sub(new m(.05)).toString():String(le.value):"")},Eo=n=>{n==="fromCoin"?(f.value=!0,t.value=ae.value>0?Y(new m(Number(ae.value)).div(2).toString(),l.value.decimals).toString():""):(f.value=!1,d.value=le.value>0?Y(new m(Number(le.value)).div(2).toString(),c.value.decimals).toString():"")};vn(()=>{lo()}),pn(()=>{clearInterval(Ae.value)});const ze=S(()=>N),io=()=>{!T.value&&!He.value||(clearInterval(Ae.value),U.setPoolConfigList(ze.value.chainName,ze.value.filterCoinsObj),C.value=0,k.value=!0,T.value&&U.updateCurrentPools(T.value.poolAddress,M.value),ke(f.value?t.value:d.value),se.value.address&&K.value.getAccount(se.value.address),N.getStatsData(M.value,ze.value.filterCoinsObj),setTimeout(()=>{k.value=!1,lo()},1e3))},lo=()=>{Ae.value=setInterval(()=>{k.value=!1,re.value||C.value<ee.value&&(C.value+=1,C.value===ee.value&&(M.value=="Aptos"?T.value&&T.value.poolAddress&&U.updateCurrentPools(T.value.poolAddress,M.value):X.value||io(),C.value=0,k.value=!0))},1e3)};J(f,qe((n,r)=>{f.value=n},500));const Se=p(!1);J(t,qe((n,r)=>{n&&n!==0&&f.value&&ke(n),n==""&&f.value&&(d.value="")},500)),J(d,qe((n,r)=>{n&&n!==0&&!f.value&&ke(n),n==""&&!f.value&&(t.value="")},500));const ce=p(1e-4),uo=async n=>{let r=n;if(console.log(r,"poolInfo====>"),M.value==="Aptos"&&!r.current_sqrt_price&&t.value&&d.value){const i=await K.value.getPools([r.address]);i&&i[0]&&(r={...n,...i[0],fee:Number(i[0].fee_rate)/1e6})}if(r.current_sqrt_price&&t.value&&d.value){const h=(l.value.address===r.coinA.address&&c.value.address===r.coinB.address?0:1)==0,y=new m(t.value),A=new m(d.value),R=y.sub(y.mul(new m(r.fee)));console.log("getImpact###poolInfo.fee####",r.fee),console.log("getImpact###fAmount####",y.toString()),console.log("getImpact###tAmount####",A.toString()),console.log("getImpact###f####",R.toString());const q=A.div(R);console.log("getImpact####rates####",q.toString());const $=K.value.getPriceImpactPct(r,q.toString(),h);return console.log($,"t===>"),$}return"--"},ro=p(0),co=p(0),qo=p(),ie=p({}),Wo=async n=>{if(T.value&&(console.log(Number(t.value)==0,"===>Number(fromCoinAmount.value)==0"),!(f.value&&Number(t.value)==0)&&!(!f.value&&Number(d.value)==0)))if(l.value&&c.value&&(t.value||d.value)){B.value=!0,V.value=!0,oe.value=!1;const r=l.value.address===T.value.coinA.address&&c.value.address===T.value.coinB.address?0:1;console.log(T.value,"poolInfo=====>451"),console.log(f.value?t.value:d.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(r,"===>direct");try{let i=await K.value.preSwap({pool:T.value,a2b:r==0,byAmountIn:f.value,amount:f.value?t.value:d.value});console.log(i,"preSwapRespreSwapRes"),oe.value=i==null?void 0:i.isExceed,qo.value=i==null?void 0:i.estimatedFeeAmount,f.value?(d.value=i.estimatedAmountOut,H.value?Oe.value=(n/Number(i.estimatedAmountOut)).toString():Pe.value=(Number(i.estimatedAmountOut)/n).toString()):(t.value=i.estimatedAmountIn,H.value?Oe.value=(Number(i.estimatedAmountIn)/n).toString():Pe.value=(n/Number(i.estimatedAmountIn)).toString()),ro.value=new m(d.value).div(t.value).toString(),co.value=new m(t.value).div(d.value).toString(),console.log("0524###getAmount###toAddLiquidiPoolInfo.value ###",ie.value),console.log("0524###getAmount###poolInfo.value ###",T.value),ce.value=M.value=="Aptos"?await uo(T.value):await uo(ie.value||T.value),B.value=!1,V.value=!1}catch(i){console.log("pre swap error",i),B.value=!1,V.value=!1}}else f.value?d.value="":t.value="",B.value=!1,V.value=!1},Xo=Fo(),se=S(()=>Xo),Qo=p({}),Oe=p(""),Pe=p(""),ae=S(()=>se.value.assets&&l.value&&se.value.assets[l.value.address]?he(se.value.assets[l.value.address].balance,l.value.decimals):0),le=S(()=>se.value.assets&&c.value&&se.value.assets[c.value.address]?he(se.value.assets[c.value.address].balance,c.value.decimals):0),Ho=To();J(()=>v.value.tokensObj,async n=>{if(!we(n)){console.log(n,"===>newValue626"),console.log(Ho,"===>route625");const r=e?e.currentRoute.value.query.to:"",i=e?e.currentRoute.value.query.from:"";i?l.value=await K.value.getTokenBySymbol(n,i):!i&&!l.value&&(l.value=await K.value.getTokenBySymbol(n,N.chainName==="Aptos"?"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC"),console.log(l.value,"===>fromCoin.value")),r?c.value=await K.value.getTokenBySymbol(n,r):!r&&!c.value&&(c.value=await K.value.getTokenBySymbol(n,N.chainName==="Aptos"?"0x1::aptos_coin::AptosCoin":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdt::USDT")),!i&&r&&(l.value="")}},{immediate:!0});const T=S(()=>{var n,r,i,h,y;if(l.value&&c.value){let A=null,R={};if(console.log(c.value.address,"===>toCoin.value.address930"),Object.values(v.value.poolConfigList).forEach($=>{var D,x,ne,me;($.coinA.address.toUpperCase()===((D=l.value.address)==null?void 0:D.toUpperCase())&&$.coinB.address.toUpperCase()===((x=c.value.address)==null?void 0:x.toUpperCase())||$.coinB.address.toUpperCase()===((ne=l.value.address)==null?void 0:ne.toUpperCase())&&$.coinA.address.toUpperCase()===((me=c.value.address)==null?void 0:me.toUpperCase()))&&(console.log($,"p===>"),R[$.address]={...$})}),M.value=="Aptos"&&v.value.poolsObj&&!we(v.value.poolsObj))for(const $ in v.value.poolsObj){const D=v.value.poolsObj[$];(D.token_a.address.toUpperCase()===((n=l.value.address)==null?void 0:n.toUpperCase())&&D.token_b.address.toUpperCase()===((r=c.value.address)==null?void 0:r.toUpperCase())||D.token_b.address.toUpperCase()===((i=l.value.address)==null?void 0:i.toUpperCase())&&D.token_a.address.toUpperCase()===((h=c.value.address)==null?void 0:h.toUpperCase()))&&(R[D.address]={...D})}console.log(R,"===>currentPoolsObj");const q=Object.values(R).sort(($,D)=>$.fee-D.fee);console.log("0507####swap###poolInfo###poolSortList###",q);for(let $=0;$<q.length;$++)if(!((y=q[$])!=null&&y.is_pause)){A=q[$];break}return A=Object.values(R).sort(($,D)=>$.fee-D.fee)[0],console.log(R,"currentPoolsObj===>"),console.log("0507####swap###poolInfo###info###",A),A&&!we(A)?A:null}return null}),mo=p(!0),vo=p(!1),Ko=async n=>{n&&M.value=="Aptos"&&(ke(f.value?t.value:d.value),vo.value=!0,n.coinA.symbol.toLowerCase()===l.value.symbol.toLowerCase()&&n.coinB.symbol.toLowerCase()===c.value.symbol.toLowerCase()?mo.value=!0:mo.value=!1,oe.value=!1)};J(()=>T.value,(n,r)=>{n&&(!r||n.address!==r.address||n.current_sqrt_price!==r.current_sqrt_price)&&Ko(n)},{immediate:!0,deep:!0});const Zo=S(()=>v.value.tokensObj&&l.value&&l.value.address&&v.value.tokensObj[l.value.address]&&v.value.tokensObj[l.value.address].logoURI),zo=S(()=>(console.log(v.value.tokensObj,"===>pools.value.tokensObj"),v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].logoURI)),Jo=S(()=>v.value.tokensObj&&l.value&&l.value.address&&v.value.tokensObj[l.value.address]&&v.value.tokensObj[l.value.address].coingecko_id||null),Yo=S(()=>v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].coingecko_id||null),Go=S(()=>{var h,y,A;const n=new m(t.value);console.log(ie.value,"===>toAddLiquidiPoolInfo"),console.log((h=ie==null?void 0:ie.value)==null?void 0:h.fee,"toAddLiquidiPoolInfo?.value?.fee");const r=new m(M.value=="Aptos"?(y=T==null?void 0:T.value)==null?void 0:y.fee:(A=ie==null?void 0:ie.value)==null?void 0:A.fee),i=n.mul(r).toString();return console.log(i,"===>fee"),Number(i)<1/Math.pow(10,l.value.decimals)?`<${new m(1).div(new m(Math.pow(10,l.value.decimals))).toString()}`:Y(i,l.value.decimals)}),{setIsShowSuccess:Vo,setIsShowRejected:po,setIsShowWaiting:Le,setTransactionDesc:xo,setTransactionTxid:fo}=N,en=async()=>{var r,i,h,y,A,R,q,$;X.value=!1,B.value=!0,clearInterval(Re),window.clearInterval(Re),fo(""),xo(w("tips.swapping",{from:`${t.value} ${(r=l.value)==null?void 0:r.symbol}`,to:`${d.value} ${(i=c.value)==null?void 0:i.symbol}`})),Le(!0);let n;M.value=="Aptos"&&(n=l.value.address===T.value.token_a.address&&c.value.address===T.value.token_b.address?0:1);try{console.log("0221####swap start####",M.value,"###",K),console.log("0412###toSwap###poolInfo.value###",T.value);let D;M.value=="Aptos"?D=await K.value.getSwapTransactionPayload({pool:T.value,a2b:n==0,byAmountIn:f.value,amount:f.value?t.value:d.value,slippage:Number(Ce.value)/100}):(console.log(ie.value,"===>toAddLiquidiPoolInfo.value"),D=await je.value.swapRouterContract.getSwapRouterPayload(f.value,Me.value.createTxParams)),console.log("0221####swap###swapPayload###",D);let x;if(M.value==="Aptos")x=await se.value.currentWallet.signAndSubmitTransaction(D);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",M.value,"###swapPayload###",D);const ne=await se.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",ne),x=K.value.handleTx(ne),console.log("0221###swap###sui##tx###",x)}if(x&&x.hash){fo(x.hash),Le(!1),Vo(!0);const ne={title:w("tips.swap"),desc:w("tips.swapSuccessText",{from:`${t.value} ${(h=l.value)==null?void 0:h.symbol}`,to:`${d.value} ${(y=c.value)==null?void 0:y.symbol}`}),hash:x.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(A=l.value)==null?void 0:A.address}`,numa:`- ${t.value}`,logoa:v.value.tokensObj&&l.value&&l.value.address&&v.value.tokensObj[l.value.address]&&v.value.tokensObj[l.value.address].logoURI,tokenb:`${(R=c.value)==null?void 0:R.address}`,numb:`+ ${d.value}`,logob:v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].logoURI},text:`Pay ${t.value} ${(q=l.value)==null?void 0:q.symbol} to receive ${d.value} ${($=c.value)==null?void 0:$.symbol}`};M.value!=="Aptos"&&(ne.res=x.res),K.value.showTransitionPending(ne);const me=await K.value.watchTransaction(ne);console.log("0221###swap###transitionStatus####",me),me&&setTimeout(()=>{M.value=="Aptos"&&U.updateCurrentPools(T.value.poolAddress,M.value),K.value.getAccount(se.value.address)},1e3)}else Le(!1),po(!0);t.value="",d.value="",B.value=!1}catch(D){t.value="",d.value="",console.log("Swap Error###",D),B.value=!1,Le(!1),po(!0)}},on=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=v.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(N.theme==="default"?ue("/image/coins/unknown.png"):ue("/image/coins/sui-unknown.png"))},go=p([]);J(()=>[l.value,c.value,v.value.poolConfigList],([n,r,i])=>{if(i&&i.length>0&&n&&r){const h=[];i.forEach(y=>{var A,R,q,$;(y.coinA.address.toUpperCase()===((A=n.address)==null?void 0:A.toUpperCase())&&y.coinB.address.toUpperCase()===((R=r.address)==null?void 0:R.toUpperCase())||y.coinB.address.toUpperCase()===((q=n.address)==null?void 0:q.toUpperCase())&&y.coinA.address.toUpperCase()===(($=r.address)==null?void 0:$.toUpperCase()))&&(y!=null&&y.is_pause||h.push(y.address))}),console.log(h,"result===>"),go.value=h}},{immediate:!0});const Je=n=>{console.log(j.value,"===>currentCoinKey.value"),console.log(n);const r=localStorage.getItem(n.address);console.log(v.value.tokensObj,"===>pools.value.tokensObj"),console.log(r,"===>coinLocak"),v.value.tokensObj&&v.value.tokensObj[n.address]&&v.value.tokensObj[n.address].isSelfBuilt&&!r?Ye.value=!0:(j.value==="fromCoin"?(t.value="",c.value&&n.address.toLowerCase()===(c==null?void 0:c.value.address.toLowerCase())&&(c.value=null),l.value=n):(l.value&&(d.value="",n.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null)),c.value=n),Co())},Ye=p(!1),Co=()=>{Ze.value={},Ke.value={},Ye.value=!1},nn=S(()=>N.isShowRouterModal),Ge=p([]),Ve=p(""),sn=p(!1),ho=bn(),je=S(()=>ho),_e=p(!1),Me=p({}),xe=p(""),bo=n=>{if(n&&n.paths&&n.paths.length>0){const r=n.paths[0];if(n.coinTypeA&&n.coinTypeB&&n.coinTypeC){const i=v.value.poolConfigObj[r.poolAddress[0]],h=v.value.poolConfigObj[r.poolAddress[1]],y=he(n.paths[0].amountIn.toString(),l.value.decimals)*i.fee;let A,R=h.token_a.address==c.value.address?h.token_b.decimals:h.token_a.decimals;f.value?A=he(r.rawAmountLimit[0].toString(),R)*h.fee:A=he(r.rawAmountLimit[1].toString(),R)*h.fee;let q;console.log(h.token_a.address,c.value.address,"===>toCoin.value.address"),i.token_a.address==l.value.address?q=!1:q=!0;let $;q?$=K.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],i.token_a.decimals,i.token_b.decimals).toString():$=1/K.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],i.token_a.decimals,i.token_b.decimals).toString(),console.log(i,"===>1398 poolA"),console.log(R,"===>1398feeBDecimals"),console.log(q,"a2b1398"),console.log($,1/$,A,"===>1398");const D=y+A*$;i.fee*100+"",xe.value=D>0&&D<1e-6?`<0.000001 ${l.value.symbol}`:E(Y(D,l.value.decimals))+` ${l.value.symbol}`}else{const i=v.value.poolConfigObj[r.poolAddress[0]],h=he(n.paths[0].amountIn.toString(),l.value.decimals)*i.fee;xe.value=h>0&&h<1e-6?`<0.000001 ${l.value.symbol} (${i.fee*100}%)`:E(Y(h,l.value.decimals))+` ${l.value.symbol} (${i.fee*100}%)`}}},wo=async n=>{if(console.log(n,"==>swapRouter"),ce.value=1e-5,n&&n.paths&&n.paths.length>0){console.log("这里执行了吗1");const r=n.paths[0];if(console.log(n.coinTypeA,"===>swapRouter.coinTypeA"),console.log(l.value.address,"===>fromCoin.value.address"),console.log(n.coinTypeC,"====>toCoin.value.address"),console.log(c.value.address,"===>toCoin.value.address"),n.coinTypeA&&n.coinTypeB&&n.coinTypeC&&n.coinTypeA==l.value.address&&n.coinTypeC==c.value.address){const i=v.value.poolConfigObj[r.poolAddress[0]],h=K.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],i.coinA.decimals,i.coinB.decimals).toNumber(),y=v.value.poolConfigObj[r.poolAddress[1]],A=K.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[1],y.coinA.decimals,y.coinB.decimals).toNumber();console.log(i,"poolA"),console.log(l.value.address,c.value.address,"===>1343"),console.log(i.token_a.address,i.token_b.address,"poolA1465"),console.log(y.token_a.address,y.token_b.address,"poolB1465");let R,q;i.token_a.address==l.value.address?R=!0:R=!1,y.token_b.address==c.value.address?q=!0:q=!1,console.log(R,q,"a2bb2c"),new m(t.value).div(d.value).toNumber();const $=new m(d.value).div(t.value).toNumber();console.log(h,A,"池子A当前价格 池子A交易后价格 池子B当前价格 池子B交易后价格");let D;const x=R?new m(h):new m(1).div(new m(h)),ne=q?new m(A):new m(1).div(new m(A));console.log(x.toString(),ne.toString(),$,"==>currentPriceDirectA");const me=new m(x.mul(ne)).sub($).div(new m(x.mul(ne))).mul(new m(100)).toNumber();D=me,console.log(me,"==>priceImpact"),D>100&&(console.log("我大于100了"),ce.value=100),ce.value=Number(pe(Math.abs(D),2))}else if(n&&n.currentSqrtPrice&&n.currentSqrtPrice.length==1&&r&&!we(r)){const i=v.value.poolConfigObj[r.poolAddress[0]],h=K.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],i.coinA.decimals,i.coinB.decimals).toNumber();let y;i.token_a.address==l.value.address?y=!0:y=!1;const A=y?new m(h):new m(1).div(new m(h)),R=new m(d.value).div(t.value).toNumber(),q=new m(A).sub(R).div(new m(A)).mul(new m(100)).toNumber(),$=q;console.log(q,"==>priceImpact"),$>100&&(console.log("我大于100了"),ce.value=100),ce.value=Number(pe(Math.abs($),2)),console.log(q,"这里执行了吗"),console.log(i,"pool===>"),console.log(ce.value,"==>impact.value")}}},yo=async n=>{if(l.value&&c.value&&(Number(t.value)>0||Number(d.value)>0)){console.log(new Date().getTime(),"开始计算时间戳"),console.log("执行吧"),(!t.value&&d.value||t.value&&!d.value)&&(B.value=!0),Se.value=!0,_e.value=!1,console.log(T.value,"==>poolInfo.value.");let r;T.value&&(r=l.value.address===T.value.coinA.address&&c.value.address===T.value.coinB.address?0:1);try{let i;if(f.value){const R=new m(t.value).mul(Math.pow(10,l.value.decimals)).toString();i=new Ee(R)}else{const R=new m(d.value).mul(Math.pow(10,c.value.decimals)).toString();i=new Ee(R)}console.log(i.toString(),"====>1498");const h=Number(Ce.value)/100;console.log(je.value,"===>swapRouterContract.value");const y=T.value?{poolAddresses:go.value,coinTypeA:T.value.coin_a_address,coinTypeB:T.value.coin_b_address,decimalsA:T.value.coinA.decimals,decimalsB:T.value.coinB.decimals,a2b:r==0,byAmountIn:f.value,amount:f.value?t.value:d.value}:"",A=await je.value.swapRouterContract.getSwapRouter(l,c,i,f.value,h,"",T.value?y:"");console.log(new Date().getTime(),"计算完成时间戳"),console.log(A,"===> swapRouter1454"),A?(Me.value=A,Ge.value=A.paths,oe.value=A.isExceed,console.log(A.isExceed,oe.value,"===>swapRouter.isExceed"),Ve.value=A.amountIn,bo(A),f.value?t.value&&(d.value=A.amountOut):d.value&&(t.value=A.amountIn),Oe.value=E(be(new m(t.value).div(new m(d.value).toString()),l.value.decimals)),Pe.value=E(be(new m(d.value).div(t.value).toString(),c.value.decimals)),wo(A),B.value=!1,_e.value=!1,Se.value=!1):(B.value=!1,_e.value=!0,Se.value=!1)}catch(i){console.log("pre swap error",i),B.value=!1,Se.value=!1}}else f.value?d.value="":t.value="",B.value=!1,Se.value=!1;console.log(B.value,"====>routerSwaping")},Ue=p(!1),Ao=async n=>{console.log("3s执行一次");try{let r;if(f.value){const y=new m(t.value).mul(Math.pow(10,l.value.decimals)).toString();r=new Ee(y)}else{const y=new m(d.value).mul(Math.pow(10,c.value.decimals)).toString();r=new Ee(y)}const i=Number(Ce.value)/100,h=await je.value.swapRouterContract.getSwapRouter(l,c,r,f.value,i,"");h&&(Me.value=h,Ge.value=h.paths,oe.value=h.isExceed,console.log(h.isExceed,oe.value,"===>swapRouter.isExceed"),Ve.value=h.amountIn,bo(h),Oe.value=E(be(new m(t.value).div(new m(d.value).toString()),l.value.decimals)),Pe.value=E(be(new m(d.value).div(t.value).toString(),c.value.decimals)),wo(h),f.value?d.value!==h.amountOut&&(Ue.value=!0,d.value=h.amountOut):t.value!==h.amountIn&&(Ue.value=!0,t.value=h.amountIn))}catch(r){console.log("pre swap error",r)}};let Re=p(null);J(()=>X.value,n=>{n?(console.log("我开启了"),Re.value=setInterval(()=>{Ao(f.value)},3e3)):(console.log("我关闭了"),clearInterval(Re.value),window.clearInterval(Re.value))},{immediate:!0});const ke=async n=>{M.value=="Aptos"?Wo(n):(console.log("调用sui"),yo())},an=S(()=>ho),tn=S(()=>an.value.isInitRouter);J(()=>tn.value,n=>{n||ke(f.value?t.value:d.value)},{immediate:!0}),J(()=>[l.value,c.value],([n,r])=>{if(n&&r&&ke(f.value?t.value:d.value),n||r){const i=`/swap?from=${n==null?void 0:n.address}&to=${r==null?void 0:r.address}`;e.push(i)}},{immediate:!0});function ln(n,r=500){let i=null;return function(...h){clearTimeout(i),i=setTimeout(()=>{n.call(this,...h)},r)}}const un=ln(So);function So(){console.log("====>调用了几次");const n=l.value;l.value=c.value,c.value=n,_.value=!0,f.value=!f.value,f.value?(t.value=d.value,d.value=""):(d.value=t.value,t.value=""),setTimeout(()=>{_.value=!1},300)}return{closeSwapConfirmModal:()=>{X.value=!1,Ue.value=!1},updateAccept:()=>{Ue.value=!1},clickExchange:So,debounceClickExchange:un,closeTokenWarning:Co,isShowTokenWarning:Ye,getTokenSource:Je,hasPool:vo,getPoolInfoSuccess:to,halfBtnSelect:Eo,formCoinId:Jo,toCoinId:Yo,fromCoinUrl:Zo,toCoinUrl:zo,t:w,indicator:u,wallet:se,currentLpInfo:Qo,fixD:pe,decimalFormat:eo,impact:ce,oneFromAmount:Oe,oneToAmount:Pe,importIcon:ue,clickRefresh:io,refresh:k,change:_,isShowAddress:F,isShowSwapSetting:O,fromCoin:l,toCoin:c,slippage:Ce,openCoinSelect:Lo,onCoinSelect:jo,existingCoins:Q,lastSelectCoin:G,currentCoinKey:j,showCoinSelect:I,fromCoinAmount:t,toCoinAmount:d,maxBtnSelect:Mo,fixedFromCoin:f,swapBtnText:Do,toSwap:en,loading:re,swaping:B,autoRefreshTime:ee,countdown:C,marketTimer:Ae,rateChange:H,isSwapConfirmMpdal:X,fromCoinBlance:ae,toCoinBlance:le,poolInfo:T,chainName:M,swapRouterLoading:Se,formatFee:Go,calculating:V,currentRate:ro,currentRateReverse:co,getCoinIcon:on,toAddLiquidiPoolInfo:ie,decimalUi:be,warningToCoin:Ze,warningFromCoin:Ke,isShowRouterModal:nn,toSwapLoading:sn,insufficientLiquidity:oe,routerPool:Ge,routerTotalAmounts:Ve,store:N,suiPreSwapdata:Me,suiSwapFee:xe,addCommom:E,debounce:qe,notFoundRouter:_e,getSuiAmountAccept:Ao,isShowAccept:Ue,getSuiAmount:yo}}}),kt="data:image/png;base64,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";const ge=e=>(Be("data-v-7f946578"),e=e(),Fe(),e),$t={class:"swap-container"},It={class:"title"},Tt={class:"left"},Nt={class:"right title-right"},Bt=ge(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Ft={class:"swap-card"},Ot={class:"card-container"},Pt={class:"card-item"},_t={class:"card-item"},Ut=ge(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Rt=[Ut],Dt={key:1,class:"induction"},Lt={key:0,class:"exchange-rate-btn"},jt={key:0},Mt={key:0},Et={key:0},qt={key:1},Wt={key:0},Xt=ge(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Qt=[Xt],Ht={class:"item"},Kt={class:"induction-text"},Zt={key:0,class:"icon","aria-hidden":"true"},zt=ge(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Jt=[zt],Yt={class:"item"},Gt={class:"induction-text"},Vt={key:0,class:"induction-value"},xt={class:"item"},ei={class:"induction-text"},oi={key:0,class:"induction-value"},ni={key:0,class:"icon","aria-hidden":"true"},si=ge(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),ai=[si],ti={key:3,class:"token-info-container"},ii={class:"token-info-title"},li=ge(()=>o("span",{class:"coingecko"},"Ref. CoinGecko",-1)),ui=ge(()=>o("img",{src:kt,alt:""},null,-1)),ri=ge(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function di(e,u,w,b,N,U){var d,ee;const v=rn,_=cn,k=es,F=_o,O=Uo,H=ao,X=gn,j=hn,Q=Cn,G=Ds,I=fn,f=ia,re=dn,B=Ba,V=At,t=Ne("image");return a(),g("div",$t,[o("div",It,[o("div",Tt,s(e.$t("menu.swap")),1),o("div",Nt,[o("div",{class:"slippage-icon",onClick:u[0]||(u[0]=C=>e.isShowSwapSetting=!0)},[Bt,o("span",null,s(e.slippage)+"%",1)]),ve(v,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Ft,[o("div",Ot,[o("div",Pt,[ve(_,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":u[1]||(u[1]=C=>e.fromCoinAmount=C),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:u[2]||(u[2]=C=>e.maxBtnSelect("fromCoin")),onOnHalf:u[3]||(u[3]=C=>e.halfBtnSelect("fromCoin")),onOnInput:u[4]||(u[4]=C=>{e.fromCoinAmount=C,e.fixedFromCoin=!0}),onOnSelect:u[5]||(u[5]=C=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",_t,[ve(_,{modelValue:e.toCoinAmount,"onUpdate:modelValue":u[6]||(u[6]=C=>e.toCoinAmount=C),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:u[7]||(u[7]=C=>{e.toCoinAmount=C,e.fixedFromCoin=!1}),onOnSelect:u[8]||(u[8]=C=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:de(e.change?"gang animationex":"gang"),src:wn,alt:""},null,2),o("div",{class:de(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:u[9]||(u[9]=(...C)=>e.debounceClickExchange&&e.debounceClickExchange(...C))},[(a(),g("svg",{class:de(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Rt,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(a(),W(k,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(a(),g("div",Dt,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(a(),g("div",Lt,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(a(),g("span",qt,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),g("span",Wt,[Z(o("img",null,null,512),[[t,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),z(" 1 "+s(e.toCoin.symbol)+" ≈ ",1),Z(o("img",null,null,512),[[t,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,s(("addCommom"in e?e.addCommom:L(E))(("decimalUi"in e?e.decimalUi:L(be))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),z("  "+s(e.fromCoin.symbol),1)])):(a(),W(F,{key:1,indicator:e.indicator},null,8,["indicator"]))])):P("",!0):(a(),g("span",jt,[Z(o("img",null,null,512),[[t,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),z(" 1 "+s(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),g("span",Mt,[Z(o("img",null,null,512),[[t,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?P("",!0):(a(),g("span",Et,s(("addCommom"in e?e.addCommom:L(E))(("decimalUi"in e?e.decimalUi:L(be))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(a(),W(F,{key:1,indicator:e.indicator},null,8,["indicator"])):P("",!0),z("  "+s(e.toCoin.symbol),1)])):(a(),W(F,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(a(),g("svg",{class:"icon-change","aria-hidden":"true",onClick:u[10]||(u[10]=C=>e.rateChange=!e.rateChange)},Qt))])):P("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(a(),g(oo,{key:1},[o("div",Ht,[o("div",Kt,s(e.$t("common.priceImpact")),1),e.swaping?(a(),W(O,{key:1,paragraph:!1,active:""})):(a(),g("div",{key:0,class:de(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[z(s(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),g("svg",Zt,Jt)):P("",!0)],2))]),o("div",Yt,[o("div",Gt,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(a(),W(O,{key:1,paragraph:!1,active:""})):(a(),g("div",Vt,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:L(E))(("fixD"in e?e.fixD:L(pe))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:L(E))(("fixD"in e?e.fixD:L(pe))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",xt,[o("div",ei,s(e.$t("common.fee")),1),e.swaping?(a(),W(O,{key:1,paragraph:!1,active:""})):(a(),g("div",oi,s(("addCommom"in e?e.addCommom:L(E))(e.formatFee,e.fromCoin.decimals))+" "+s(e.fromCoin.symbol)+" ("+s(e.chainName=="Aptos"?e.poolInfo.fee*100:((d=e.toAddLiquidiPoolInfo)==null?void 0:d.fee)*100)+"%) ",1))])],64)):P("",!0)])):P("",!0)]),ve(H,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((ee=e.poolInfo)==null?void 0:ee.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:u[11]||(u[11]=C=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:te(()=>[e.wallet.connected?(a(),g("svg",ni,ai)):P("",!0),o("span",null,s(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),ve(X),e.showCoinSelect?(a(),W(j,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:u[12]||(u[12]=C=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):P("",!0),e.isShowSwapSetting?(a(),W(Q,{key:1,onOnClose:u[13]||(u[13]=C=>e.isShowSwapSetting=!1)})):P("",!0),e.isSwapConfirmMpdal&&e.chainName=="Aptos"?(a(),W(G,{key:2,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,impact:e.impact,fee:e.chainName=="Aptos"?e.poolInfo.fee:e.suiSwapFee,"format-fee":e.chainName=="Aptos"?e.formatFee:e.suiSwapFee,onOnClose:u[14]||(u[14]=C=>e.isSwapConfirmMpdal=!1),onToSwap:e.toSwap},null,8,["fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","impact","fee","format-fee","onToSwap"])):P("",!0),e.chainName&&(e.formCoinId||e.toCoinId)?(a(),g("div",ti,[o("div",ii,[li,ui,ve(I,{placement:"top","arrow-point-at-center":""},{title:te(()=>[z(" The following price is only an external reference from CoinGecko, which may not reflect actual data on Cetus. ")]),default:te(()=>[ri]),_:1})]),e.fromCoin&&e.formCoinId?(a(),W(f,{key:0,id:e.formCoinId,coin:e.fromCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):P("",!0),e.toCoin&&e.toCoinId?(a(),W(f,{key:1,id:e.toCoinId,coin:e.toCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):P("",!0)])):P("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(a(),W(re,{key:4,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):P("",!0),e.isShowRouterModal?(a(),W(B,{key:5,"router-pool":e.routerPool,"routertotal-percents":e.routertotalPercents,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"router-total-amounts":e.routerTotalAmounts,onOnClose:u[15]||(u[15]=C=>e.store.setIsShowRouterModal(!1))},null,8,["router-pool","routertotal-percents","from-coin","to-coin","from-coin-amount","to-coin-amount","router-total-amounts"])):P("",!0),e.isSwapConfirmMpdal&&e.chainName=="Sui"?(a(),W(V,{key:6,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.suiSwapFee,"format-fee":e.suiSwapFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):P("",!0)])}const Pi=Te(St,[["render",di],["__scopeId","data-v-7f946578"]]);export{Pi as default};
