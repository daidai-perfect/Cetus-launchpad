import{a as z,C as pe,o as i,f as n,F as Q,E as X,G as D,h as e,I as le,x as v,u as f,e as M,p as Z,k as ee,m as w,r as p,A as Ce,c as H,w as O,i as k,y as be,j as q,D as ke,$ as he,Y as $e,K as Se,P as Pe,B as ie,N as Le,S as Ye}from"./entry.41ea690b.js";import"./index.4014d28e.js";import{u as ae}from"./pool.fb156510.js";import{s as re}from"./formatter.622c02db.js";import{V as $,h as b,a as xe}from"./common.2aa2b559.js";import{_ as Ae}from"./coin-pair-name.cf518590.js";import{_ as Ue}from"./no-data.7aca01c4.js";/* empty css              *//* empty css              *//* empty css              */import{u as De,c as Te,b as Ie}from"./index.46f67f5f.js";import{u as Re}from"./index.e4df0a82.js";import{a as Fe,b as Oe,c as Ne,u as Be}from"./usePositionList.0855810a.js";const je={key:0,class:"claim-list"},Ee={class:"left"},He={alt:""},qe={class:"right"},ze=z({__name:"claim-list",props:{myClaimList:{type:Object,default:()=>[]}},setup(s){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: claim-list.vue:25 ~ myClaimList:",s.myClaimList),(h,S)=>{const g=pe("image");return s.myClaimList&&s.myClaimList.length>0?(i(),n("div",je,[(i(!0),n(Q,null,X(s.myClaimList,l=>(i(),n("div",{key:l,class:"claim-item"},[e("div",Ee,[le(e("img",He,null,512),[[g,l.tokenInfo.logo_url]]),e("span",null,v(l.tokenInfo.symbol),1)]),e("div",qe,[e("span",null,v(f($)(l.amount,l.decimals,!0,!1,!1)),1),e("span",null,v(f($)(l.amountUSD,2,!1,!1)),1)])]))),128))])):D("",!0)}}});const ge=M(ze,[["__scopeId","data-v-ec8774e2"]]),ye=s=>(Z("data-v-237b921c"),s=s(),ee(),s),Me={class:"fees-and-reward"},Ve={key:0,class:"fees"},We={class:"fees-title"},Ke=ye(()=>e("div",null,"Fees",-1)),Ge={alt:""},Je={class:"symbol"},Qe={class:"amount"},Xe={class:"amount-usd"},Ze={key:1,class:"fees"},es={class:"fees-title"},ss=ye(()=>e("div",null,"Mining rewards",-1)),ts={alt:""},os={class:"symbol"},ls={class:"amount"},is={class:"amount-usd"},as=z({__name:"fees-and-reward",props:{pendingRewarderList:{type:Object,default:()=>[]},pendingFeesList:{type:Object,default:()=>[]},rewarderUsd:{type:String,default:""},feeOwedUsd:{type:String,default:""}},setup(s){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: fees-and-reward.vue:63 ~ props:",s),(h,S)=>{const g=pe("image");return i(),n("div",Me,[s.feeOwedUsd&&s.feeOwedUsd>0?(i(),n("div",Ve,[e("div",We,[Ke,e("div",null,v(f($)(s.feeOwedUsd,2,!1,!1)),1)]),(i(!0),n(Q,null,X(s.pendingFeesList,l=>(i(),n("div",{key:l,class:"fees-details"},[e("div",null,[le(e("img",Ge,null,512),[[g,l.tokenInfo.logo_url]]),e("span",Je,v(l.tokenInfo.symbol),1)]),e("div",null,[e("span",Qe,v(f($)(l.amount,l.tokenInfo.decimals,!0,!1,!1)),1),e("span",Xe,"("+v(f($)(l.amountUSD,2,!1,!1))+")",1)])]))),128))])):D("",!0),s.rewarderUsd&&s.rewarderUsd>0?(i(),n("div",Ze,[e("div",es,[ss,e("div",null,v(f($)(s.rewarderUsd,2,!1,!1)),1)]),(i(!0),n(Q,null,X(s.pendingRewarderList,l=>(i(),n("div",{key:l,class:"fees-details"},[e("div",null,[le(e("img",ts,null,512),[[g,l.tokenInfo.logo_url]]),e("span",os,v(l.tokenInfo.symbol),1)]),e("div",null,[e("span",ls,v(f($)(l.amount,l.tokenInfo.decimals,!0,!1,!1)),1),e("span",is,"("+v(f($)(l.amountUSD,2,!1,!1))+")",1)])]))),128))])):D("",!0)])}}});const ns=M(as,[["__scopeId","data-v-237b921c"]]),R=s=>(Z("data-v-e25d90e6"),s=s(),ee(),s),ds={class:"yield-details-box"},cs={class:"yield-details"},us={class:"total-claim"},rs=R(()=>e("div",null,"Pending Yield",-1)),_s={class:"total-claim-usd"},ms={class:"position-detail"},vs={class:"position-detail-top"},fs=R(()=>e("div",{class:"left"},"Position",-1)),ps={class:"right plus-switch plus-liquidity-switch"},hs=R(()=>e("span",null,"Hide yield < ",-1)),gs={class:"position-detail-bottom"},ys={class:"item-top"},ws={class:"left"},Cs={class:"bottom"},bs={class:"right"},ks=["onClick"],$s={key:0,"aria-hidden":"true"},Ss=R(()=>e("use",{"xlink:href":"#icon-icon_sel"},null,-1)),Ps=[Ss],Ls={class:"item-bottom"},Ys=R(()=>e("div",{class:"left"}," Pending Yield ",-1)),xs={class:"right"},As={key:0,class:"yield-amount"},Us={key:1,class:"yield-amount-zero"},Ds={class:"select"},Ts={class:"all"},Is=R(()=>e("use",{"xlink:href":"#icon-icon_sel"},null,-1)),Rs=[Is],Fs=R(()=>e("span",null,"Select all",-1)),Os={class:"amount-selected"},Ns=R(()=>e("div",null,"Amount selected",-1)),Bs=z({__name:"yield-details",props:{pendingYieldPositionList:{type:Object,default:()=>[]},isShowYiedlDetails:{type:Boolean,default:!1}},emits:["showClaimYield","close"],setup(s,{emit:c}){const h=c,S=s,g=ae(),l=w(()=>g.positionPendingFees),a=w(()=>g.positionPendingRewards),y=p([]),T=p({}),V=p(),A=p(!0),E=t=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:364 ~ watchPositionList ~ list:",t);const o=[];let r=b(0);for(let m=0;m<t.length;m++){const d=t[m],Y=l==null?void 0:l.value[d==null?void 0:d.positionId],x=a==null?void 0:a.value[d==null?void 0:d.positionId],j=(Y==null?void 0:Y.feesAmountUSD)||b(0),_=(x==null?void 0:x.rewardsAmount)||b(0),F=j.add(_).toString();U.value&&F>L.value?o.push({totalRewardUsd:F,...d,positionPendingFees:Y,positionPendingRewards:x,positionName:`Cetus LP | ${d==null?void 0:d.positionName}`}):U.value||o.push({totalRewardUsd:F,...d,positionPendingFees:Y,positionPendingRewards:x,positionName:`Cetus LP | ${d==null?void 0:d.positionName}`}),r=r.add(F)}y.value=o.sort((m,d)=>d.totalRewardUsd-m.totalRewardUsd),T.value=Object.fromEntries(o.map(m=>[m==null?void 0:m.positionId,m])),V.value=r,(A.value||P.value=="all")&&(u.value=y.value.map(m=>m.positionId),A.value=!1)},u=p([]),P=p("all"),N=t=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:414 ~ selectPosition ~ selectList.value:",u.value);const o=u.value.indexOf(t);P.value=="all"&&u.value.length==0?y.value.forEach(r=>{r.positionId!==t&&u.value.push(t)}):o>-1?u.value.splice(o,1):u.value.push(t),u.value.length!==y.value.length?P.value="":P.value="all",console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:429 ~ selectPosition ~ selectList:",u.value)},U=p(!0),L=p(.01),W=t=>{const o=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");t.target.value=t.target.value.replace(o,"$1"),L.value=t.target.value},te=()=>{(!L.value||L.value<.01)&&(L.value=.01)};Ce(()=>[S.pendingYieldPositionList,U.value,L.value],([t])=>{t&&t.length>0&&E(t)},{immediate:!0});const B=w(()=>{let t=b(0);return u.value.forEach(o=>{var m;const r=((m=T.value[o])==null?void 0:m.totalRewardUsd)||0;t=t.add(r)}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:447 ~ amountSelected ~ selectedTotalAmount.toString():",t.toString()),t.toString()}),C=()=>{P.value="all",y.value.forEach(t=>{u.value.includes(t.positionId)||u.value.push(t.positionId)})},I=()=>{const t=[];y.value.forEach(o=>{u.value.includes(o.positionId)&&t.push(o)}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:494 ~ showClaimYield ~ result:",t),h("showClaimYield",t)};return(t,o)=>{const r=$e,m=Se,d=Ae,Y=Pe,x=Ue,j=ie;return i(),H(f(he),{title:"Details",footer:null,visible:s.isShowYiedlDetails,width:"440px","wrap-class-name":"details-modal",class:"new-modal-have-btn",onCancel:o[2]||(o[2]=_=>t.$emit("close"))},{default:O(()=>[e("div",ds,[e("div",cs,[e("div",us,[rs,e("div",_s,[e("span",null,v(f($)(V.value,2,!1,!1)),1)])]),e("div",ms,[e("div",vs,[fs,e("div",ps,[k(r,{class:"range-alerts-switch",checked:U.value,onClick:o[0]||(o[0]=()=>{U.value=!U.value,A.value=!1})},null,8,["checked"]),hs,k(m,{value:`$${L.value}`,onChange:W,onBlur:te},null,8,["value"])])]),e("div",gs,[y.value&&y.value.length>0?(i(!0),n(Q,{key:0},X(y.value,_=>{var F;return i(),n("div",{key:_,class:"position-item"},[e("div",ys,[e("div",ws,[k(d,{"from-coin":_.coinA,"to-coin":_.coinB,"fee-tier":(F=_.feeRate)==null?void 0:F.replace("%","")},null,8,["from-coin","to-coin","fee-tier"]),e("div",Cs,v(_.positionName),1)]),e("div",bs,[e("div",{class:be(["radio",_.totalRewardUsd<=0?"radio-disable":""]),onClick:oe=>_.totalRewardUsd>0?N(_.positionId):""},[(P.value=="all"||u.value.includes(_.positionId))&&_.totalRewardUsd>0?(i(),n("svg",$s,Ps)):D("",!0)],10,ks)])]),e("div",Ls,[Ys,e("div",xs,[_.totalRewardUsd>0?(i(),n("div",As,[k(Y,{placement:"bottomRight","overlay-class-name":"yield-amount-tooltip"},{title:O(()=>{var oe,de,ce,ue;return[k(ns,{"pending-fees-list":(oe=_.positionPendingFees)==null?void 0:oe.feesList,"pending-rewarder-list":(de=_.positionPendingRewards)==null?void 0:de.rewarderAmountOwed,"rewarder-usd":(ce=_.positionPendingRewards)==null?void 0:ce.rewardsAmount,"fee-owed-usd":(ue=_.positionPendingFees)==null?void 0:ue.feesAmountUSD},null,8,["pending-fees-list","pending-rewarder-list","rewarder-usd","fee-owed-usd"])]}),default:O(()=>[q(v(f($)(_.totalRewardUsd,2,!1,!1))+" ",1)]),_:2},1024)])):(i(),n("div",Us,v(f($)(_.totalRewardUsd,2,!1,!1)),1))])])])}),128)):(i(),H(x,{key:1,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found"}))])])]),e("div",Ds,[e("div",Ts,[e("div",{class:"radio",onClick:C},[P.value=="all"?(i(),n("svg",{key:0,"aria-hidden":"true",onClick:o[1]||(o[1]=ke(()=>{u.value=[],P.value=""},["stop"]))},Rs)):D("",!0)]),Fs]),e("div",Os,[Ns,e("div",null,v(f($)(B.value,2,!1,!1)),1)])]),k(j,{class:"claim-yield-btn modal-bottom-btn",disabled:B.value=="0",onClick:I},{default:O(()=>[q("Claim Yield")]),_:1},8,["disabled"])])]),_:1},8,["visible"])}}});const js=M(Bs,[["__scopeId","data-v-e25d90e6"]]),_e=p(!1),J=p(!1),we=De(),{setIsShowSuccess:Es,setIsShowRejected:me,setIsShowWaiting:K,setTransactionDesc:Hs,setTransactionTxid:ve}=we,qs=Te("Sui"),G=Ie("Sui"),zs=Re(),fe=w(()=>zs),Ms=ae(),Vs=w(()=>Ms.poolsObj);w(()=>we);Fe();Oe();Ne();const{getPositionList:Ws}=Be(),Ks=async s=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:32 ~ batchHarvestAndClmmFee ~ positionList:",s),J.value=!0;try{const c=[],h=[];s.forEach(a=>{const y=Vs.value[a.pool].miningRewardList.filter(T=>T.emissionsEveryDay>0).map(T=>T.coinType);console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:66 ~ batchHarvestAndClmmFee ~ position:",a),a.positionSource=="clmm"?c.push({pool_id:a.pool,pos_id:a.positionId,collect_fee:!0,rewarder_coin_types:y,coinTypeA:a.defaultCoinaAddress,coinTypeB:a.defaultCoinbAddress}):h.push({pool_id:a.farm_pool_id,position_nft_id:a.farmPositionId,clmm_pool_id:a.pool,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:y,coinTypeA:a.defaultCoinaAddress,coinTypeB:a.defaultCoinbAddress})}),ve(""),Hs("Claim Yield"),K(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:71 ~ batchHarvestAndClmmFee ~ clmmPositionList:",c),console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:71 ~ batchHarvestAndClmmFee ~ framsPositionList:",h);const S=await qs.batchHarvestAndClmmFee(h,c),g=await G.signAndExecuteTransactionBlock(fe.value.currentWallet,S.txb,S.payloadParams),l=G.handleTx(g);if(l&&l.hash){ve(l.hash),K(!1),Es(!0);const a={title:"Claim",desc:"Claim Yield",hash:l.hash};a.res=l.res,G.showTransitionPending(a),await G.watchTransaction(a)&&setTimeout(()=>{Ws(fe.value.address)},1e3)}else K(!1),me(!0);J.value=!1,_e.value=!1}catch(c){J.value=!1,K(!1),me(!0),_e.value=!1,console.log("batchHarvestAndClmmFee error:",c)}},ne=s=>(Z("data-v-c84b105c"),s=s(),ee(),s),Gs={class:"claim-yield-content"},Js={class:"total-claim"},Qs=ne(()=>e("div",null,"Total Claim",-1)),Xs={class:"total-claim-usd"},Zs=ne(()=>e("svg",{"aria-hidden":"true",class:"back-icon"},[e("use",{"xlink:href":"#icon-icon-back"})],-1)),et=ne(()=>e("span",null,"Back",-1)),st=[Zs,et],tt=z({__name:"claim-yield",props:{pendingYield:{type:Number,default:0},myClaimList:{type:Object,default:()=>[]},myClaimPositionList:{type:Object,default:()=>[]}},setup(s){return(c,h)=>{const S=ie;return i(),H(f(he),{class:"new-modal-have-btn",title:"Claim Yield",visible:!0,footer:null,width:"440px",onCancel:h[2]||(h[2]=g=>c.$emit("close"))},{default:O(()=>[e("div",Gs,[e("div",Js,[Qs,e("div",Xs,v(s.pendingYield>0&&s.pendingYield<.01?"<$0.01":`$${f(xe)(s.pendingYield,2)}`),1)]),k(ge,{"my-claim-list":s.myClaimList},null,8,["my-claim-list"]),e("div",{class:"choose-amount",onClick:h[0]||(h[0]=g=>c.$emit("chooseAmount"))},st),k(S,{class:"confirm-btn modal-bottom-btn",loading:f(J),onClick:h[1]||(h[1]=g=>f(Ks)(s.myClaimPositionList))},{default:O(()=>[q("Confirm")]),_:1},8,["loading"])])]),_:1})}}});const ot=M(tt,[["__scopeId","data-v-c84b105c"]]),se=s=>(Z("data-v-201a7747"),s=s(),ee(),s),lt={class:"total-info"},it={class:"total-liquidity"},at=se(()=>e("span",{class:"total-liquidity-text"},"Total Liquidity",-1)),nt={key:0,class:"skeleton-box"},dt={key:1,class:"total-liquidity-usd"},ct={class:"pending-yield"},ut=se(()=>e("div",{class:"pending-yield-text"},"Pending Yield",-1)),rt={key:0,class:"skeleton-box"},_t={key:1,class:"pending-yield-show-value"},mt={class:"pending-yield-value-box"},vt={key:0,class:"claim-list-box"},ft={class:"claim-list-content"},pt=se(()=>e("use",{"xlink:href":"#icon-icon_expand"},null,-1)),ht=[pt],gt=se(()=>e("use",{"xlink:href":"#icon-icon_expand"},null,-1)),yt=[gt],wt=z({__name:"total-position",setup(s){const c=ae(),h=w(()=>c.isPositionLoading),S=w(()=>c.positionTotalPrice),g=w(()=>c.positionTotalPendingFees),l=w(()=>c.positionTotalPendingRewards),a=w(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:64 ~ pendingYield ~ positionTotalPendingFees.value:",g.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:65 ~ pendingYield ~ positionTotalPendingRewards.value:",l.value),g.value==="--"||l.value==="--"?0:b(g.value||0).add(l.value||0).toNumber())),y=w(()=>c.pendingYieldLoading),T=w(()=>c.pendingYieldTokenList),V=p(!1),A=p(!1),E=p(1),u=()=>{a.value>0&&(A.value=!0,E.value=E.value==1?2:1)},P=w(()=>c.pendingYieldPositionList),N=p(!1),U=p(),L=p(),W=p(),te=B=>{A.value=!1,N.value=!0;let C=b(0);const I=[],t={};B.forEach(o=>{var d,Y,x,j;console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:352 ~ showClaimYield ~ ele:",o);const r=((d=o.positionPendingRewards)==null?void 0:d.rewardsAmount)||0,m=((Y=o.positionPendingFees)==null?void 0:Y.feesAmountUSD)||0;C=C.add(b(r)).add(b(m)),I.push(...(x=o.positionPendingFees)==null?void 0:x.feesList),I.push(...(j=o.positionPendingRewards)==null?void 0:j.rewarderAmountOwed)}),I.forEach(o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:369 ~ showClaimYield ~ claimItem:",o);const r=o.tokenInfo.address;t[r]?t[r]={...o,amountUSD:b(t[r].amountUSD).add(o.amountUSD).toString(),amount:b(t[r].amount).add(o.amount).toString()}:(t[r]={},t[r]={...o,amountUSD:b(0).add(o.amountUSD).toString(),amount:b(0).add(o.amount).toString()})}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:362 ~ showClaimYield ~ claimObj:",t),U.value=C.toNumber(),W.value=Object.values(t).filter(o=>o.amount>0).sort((o,r)=>r.amountUSD-o.amountUSD),L.value=B};return(B,C)=>{const I=Ye,t=ie;return i(),n("div",lt,[e("div",it,[at,h.value?(i(),n("div",nt,[k(I,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(i(),n("span",dt,v(f(re)(S.value||0)),1))]),e("div",ct,[ut,y.value?(i(),n("div",rt,[k(I,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(i(),n("div",_t,[e("div",mt,[e("span",{class:"pending-yield-usd",style:Le(a.value<=0?{border:"none"}:{}),onClick:u},[q(v(f(re)(a.value||0))+" ",1),a.value>0?(i(),n("div",vt,[e("div",ft,[k(ge,{"my-claim-list":T.value},null,8,["my-claim-list"])])])):D("",!0)],4),a.value>0?(i(),n("svg",{key:0,class:"icon route-icon pc-icon","aria-hidden":"true",onClick:u},ht)):D("",!0),k(t,{class:"claim-all-btn",disabled:a.value<=0,loading:V.value,onClick:u},{default:O(()=>[q("Claim All")]),_:1},8,["disabled","loading"])]),a.value>0?(i(),n("svg",{key:0,class:"icon route-icon h5-icon","aria-hidden":"true",onClick:u},yt)):D("",!0)]))]),N.value?(i(),H(ot,{key:0,"pending-yield":U.value,"my-claim-list":W.value,"my-claim-position-list":L.value,onClose:C[0]||(C[0]=o=>N.value=!1),onChooseAmount:C[1]||(C[1]=()=>{N.value=!1,A.value=!0})},null,8,["pending-yield","my-claim-list","my-claim-position-list"])):D("",!0),(i(),H(js,{key:E.value,"pending-yield-position-list":P.value,"is-show-yiedl-details":A.value,onClose:C[2]||(C[2]=()=>A.value=!1),onShowClaimYield:te},null,8,["pending-yield-position-list","is-show-yiedl-details"]))])}}});const It=M(wt,[["__scopeId","data-v-201a7747"]]);export{It as T};
