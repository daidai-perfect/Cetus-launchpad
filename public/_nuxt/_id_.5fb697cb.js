import{_ as ct}from"./token-warning.46afeeae.js";import{r as C,C as Yt,D as Jt,m as u,E as yt,G as Ce,a as de,q as qe,o as a,f as l,h as t,t as pe,i as v,v as $,x as P,u as o,H as Pt,z as be,S as Xe,p as we,k as De,e as he,F as xe,s as Be,j as _e,I as Zt,J as $t,c as ee,w as le,B as Ct,K as Xt,y as Ye,L as ea,l as kt,M as ht,N as ta,O as st,P as Ht,Q as wt,R as aa,T as oa,U as Oe,V as Bt,W as sa,X as na,Y as la,Z as Et,$ as ra,b as ia,a0 as ca}from"./entry.7dcfbd3d.js";/* empty css              */import{_ as ua}from"./img-no-data_2x.f055bb1a.js";import{a as da,u as ut,b as Le,c as dt,p as Wt,g as Ut}from"./pool.3fc49680.js";import{e as qt,u as We,c as Fe,d as A,s as va,h as ma,a as At,b as $e,t as Qe,f as _a,g as G,i as Ee,j as Rt,k as ha,l as fa,m as ga}from"./index.33b6d0c7.js";import{D as ne}from"./decimal.0bdeb344.js";import{i as nt}from"./import-icon.de3e6c66.js";import{u as ba}from"./useSDK.a5239ede.js";import{u as pa}from"./useToken.60f7c7c1.js";import{_ as ya}from"./limit-beta.de903a1d.js";import{_ as Ft}from"./no-data.282cd813.js";/* empty css              *//* empty css              */import{C as $a}from"./coin-select.8582e2b7.js";import{_ as Ca}from"./token-warning-modal.7292ab7b.js";/* empty css              */import{_ as ka}from"./img-no-Positions_2x.7d45aeda.js";import"./index.c581952a.js";import{_ as wa}from"./assets-card.19e93df4.js";import{_ as Da}from"./icon-error_2x.5132dee7.js";/* empty css              */import{u as Sa}from"./useSuiAggregator.c36fc06e.js";import{T as Oa}from"./trade-menu-tab.7f21c21b.js";import{u as xa}from"./useTheme.f7d39642.js";import"./fetchFun.ff4aae28.js";import"./token-warning_2x.96e85c9b.js";import"./img-no-Positions_2x.d87b6ca1.js";import"./icon-selected_3x.09e9a6f0.js";import"./useDebounceFunction.ae1c5629.js";import"./vesrion-beta.299af925.js";function Ia(e){const n=da(),c=C(0);return Yt(()=>{c.value=n.getRate(qt(e).full_address)}),c.value}const Te=Jt("SuiDcaStore",{state:()=>({dcaActiveOrderList:[],dcaPastOrderList:[],dcaConfig:{},dcaOrderListLoading:!0,dcaOrderHistoryLoadingObj:{},dcaOrderHistoryObj:{},dcaQuoteConfig:[],isShowChart:!1,isShowOrder:!0,autoRefreshOrderHistoryObj:{},dcaCoinListLoading:!0,inCoinWhiteList:[],outCoinWhiteList:[]}),actions:{setDcaActiveOrderList(e){this.dcaActiveOrderList=e,this.dcaOrderListLoading=!1},setDcaPastOrderList(e){this.dcaPastOrderList=e},setDcaConfig(e){this.dcaConfig=e},setDcaOrderListLoading(e){this.dcaOrderListLoading=e},setDcaOrderHistToryLoadingObj(e,n){this.dcaOrderHistoryLoadingObj={...this.dcaOrderHistoryLoadingObj,[e]:n}},setDcaOrderHistoryObj(e,n){this.dcaOrderHistoryObj={...this.dcaOrderHistoryObj,[e]:n}},setDcaQuoteConfig(e){this.dcaQuoteConfig=e},logOut(){this.dcaPastOrderList=[],this.dcaActiveOrderList=[],this.dcaOrderHistoryLoadingObj={},this.dcaOrderHistoryObj={},this.autoRefreshOrderHistoryObj={}},setIsShowChart(e){this.isShowChart=e},setIsShowOrder(e){this.isShowOrder=e},setAutoRefreshOrderHistoryObj(e,n=!1){if(n)this.autoRefreshOrderHistoryObj={};else{const{orderID:c}=e;this.autoRefreshOrderHistoryObj[c]?delete this.autoRefreshOrderHistoryObj[c]:e.orderStatus=="Active"&&(this.autoRefreshOrderHistoryObj[c]=e)}},setDcaCoinWhiteList(e,n){this.inCoinWhiteList=e,this.outCoinWhiteList=n},setDcaCoinListLoading(e){this.dcaCoinListLoading=e}},persist:!0}),Ta="0x0000000000000000000000000000000000000000000000000000000000000000";function Ue(){const e=ba(),{getToken:n}=pa(),c=We(),m=u(()=>c),{setDcaActiveOrderList:d,setDcaPastOrderList:p,setDcaConfig:T,setDcaOrderListLoading:x,setDcaOrderHistToryLoadingObj:E,setDcaOrderHistoryObj:D,setDcaQuoteConfig:R,setDcaCoinWhiteList:k,setDcaCoinListLoading:z}=Te(),N=async i=>{const s=[],S=[],B=i;console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:18 ~ buildDcaOrderList ~ orderList:",B);for(let M=0;M<B.length;M++){const h=B[M],oe=await n(h.in_coin_type),O=await n(h.out_coin_type),f=ne.pow(10,oe==null?void 0:oe.decimals),w=ne.pow(10,O==null?void 0:O.decimals),U=A(h.in_deposited).div(f),I=A(h.in_deposited).div(h.in_amount_per_cycle).floor().toString(),Z=A(h.in_amount_per_cycle).div(f).toString(),K=A(h.in_balance).div(f),se=A(h.in_amount_per_cycle).div(f).div(A(h.max_out_amount_per_cycle).div(w)).toString(),ie=A(h.in_amount_per_cycle).div(f).div(A(h.min_out_amount_per_cycle).div(w)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:47 ~ buildDcaOrderList ~ maxPrice:",h.in_amount_per_cycle,h.min_out_amount_per_cycle,ie);const ue=A(1).div(A(ie)).toString(),Y=A(1).div(A(se)).toString(),fe=A(h.out_balance).gt(0)?A(h.out_balance).div(w).toString():0,ye=A(h.out_withdrawn).div(w).toString(),Pe=$e(U.div(I).toString(),oe.decimals),ke=A(h.in_withdrawn).div(f).toString(),b=A(K).div(Z).floor().toNumber();let Ae=!1;const Re=Date.now()/1e3;A(Re).sub(h.created_at).div(h.cycle_frequency).gt(3)&&Number(fe)<=0&&Number(ye)<=0&&(Ae=!0);let ge;h.in_withdrawn>0&&h.in_withdrawn==h.in_deposited?ge="Close":h.in_withdrawn>0&&h.out_withdrawn>0?ge="PartialDeal":h.amount_left_next_cycle==0&&h.next_cycle_at==0?ge="AllDeal":ge="Active";let Ne,Se,ce=A(0);ge=="Close"?(Se="--",Ne=0,ce=A(0)):ge=="PartialDeal"?(Se=A(U).sub(A(ke)).div(A(ye)).toString(),Ne=U.sub(ke).div(U).mul(100).toDP(2,ne.ROUND_HALF_UP).toString(),ce=A(h.in_deposited).sub(A(h.in_withdrawn)).div(f)):ge=="AllDeal"?(Ne=100,Se=A(U).div(A(ye)).toString(),ce=A(h.in_deposited).sub(A(h.in_balance)).div(f)):(Se=Number(fe)>0||Number(ye)>0?A(U).sub(K).div(A(fe).add(A(ye))).toString():"--",Ne=U.sub(K).div(U).mul(100).toDP(2,ne.ROUND_HALF_UP).toString(),ce=A(h.in_deposited).sub(A(h.in_balance)).div(f));let Ve="--";const ot=Math.ceil((Re-h.created_at)/h.cycle_frequency);b!=0&&(Ve=Qe(h.created_at*1e3+ot*h.cycle_frequency*1e3,"YMDHM"));const Lt={createAt:Qe(h.created_at*1e3,"YMDHM"),cycleFrequency:h.cycle_frequency,orderID:h.id,inAmountPerCycle:Z,nextCycleAt:Ve,inDeposited:U.toString(),cycleCount:I,inDepositedOut:ce.toString(),inBalance:K.toString(),minPrice:$e(se,O.decimals),maxPrice:$e(ie,O.decimals),minPriceResever:$e(ue,oe.decimals),maxPriceResever:$e(Y,oe.decimals),inCoin:oe,outCoin:O,outBalance:fe,inBalanceRatio:ge=="Close"?0:$e(Ne,2),outWithdraw:ye,investEvery:_a(h.cycle_frequency),eachOrderSize:Pe,currentAvgPrice:ge=="Close"||Se=="--"?"--":$e(Se,O.decimals),currentAvgPriceResever:ge=="Close"||Se=="--"?"--":$e(A(1).div(Se).toString(),oe.decimals),orderStatus:ge,inWithdrawn:ke,ofOrderLeft:b,isShowTradeTips:Ae,next_cycle_at:h.created_at+b*h.cycle_frequency,created_at:h.created_at,version:h.version};ge=="Active"?s.push(Lt):S.push(Lt)}console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:95 ~ buildDcaOrderList ~ pastResult:",S),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:95 ~ buildDcaOrderList ~ activeResult:",s),d(s.sort((M,h)=>h.created_at-M.created_at)),p(S.sort((M,h)=>h.version-M.version))},ae=async(i,s=!1)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:150 ~ getDcaOrderList ~ getDcaOrderList:");try{x(!s);const S=await e.peripherySdk.Dca.getDcaOrders(i);S&&S.data&&m.value.address&&N(S.data)}catch{x(!1)}},Q=async()=>{try{const i=await e.peripherySdk.Dca.getDcaGlobalConfig(),{data:s}=await fetch(`${Fe.Sui.api}/dca/quote_config`).then(S=>S.json());if(i){const S={minCycleAmountInUsd:s.min_amount_in_usd,minCycleCount:i.min_cycle_count,minCycleFrequency:i.min_cycle_frequency,whitelistMode:i.whitelist_mode};console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:193 ~ getDcaGlobalConfig ~ data:",S),T(S)}}catch(i){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:146 ~ getDcaGlobalConfig ~ error:",i)}},J=async(i,s,S)=>{try{const{data:B}=await fetch(`${Fe.Sui.api}/dca/quote?in_coin=${i}&freq=${s}&count=${S}&sender=${e.clmmSdk.senderAddress||Ta}`).then(M=>M.json());return B}catch(B){console.log("ðŸš€ðŸš€ðŸš€ ~ file: DcaModule.ts:99 ~ DcaModule ~ dcaQuote ~ error:",B)}},F=async()=>{try{const{data:i}=await fetch(`${Fe.Sui.api}/dca/quote_config`).then(s=>s.json());console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:156 ~ getDcaQuoteConfig ~ data:",i),i&&i.fee_rules&&R(i.fee_rules)}catch(i){console.log("ðŸš€ðŸš€ðŸš€ ~ file: DcaModule.ts:99 ~ DcaModule ~ dcaQuote ~ error:",i)}},j=i=>({transactionBlock:i,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),_=async i=>{const{inCoin:s,outCoin:S,inCoinAmount:B,ordersCount:M,minPrice:h,maxPrce:oe,freq:O}=i,f=await J(s.address,O,M);if(!f)throw new Error("Request timed out");console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:245 ~ getDcaOpenOrderPayload ~ quote:",f);const w=new ne(B).mul(ne.pow(10,s.decimals)),U=w.div(M);let I,Z,K;const se=A(U).div(A(h));console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:244 ~ getDcaOpenOrderPayload ~ maxAmount:",se.toString());const ie=A(U).div(A(oe));console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:246 ~ getDcaOpenOrderPayload ~ minAmount:",ie.toString());const ue=A("18446744073709551614");s.decimals>S.decimals?(I=ne.pow(10,s.decimals-S.decimals),Z=ie.div(I).ceil().toString(),K=se.div(I).ceil().toString()):s.decimals<S.decimals?(I=ne.pow(10,S.decimals-s.decimals),Z=ie.mul(I).ceil().toString(),K=se.mul(I).ceil().toString()):(Z=ie.ceil().toString(),K=se.ceil().toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:258 ~ getDcaOpenOrderPayload ~ perCycleMinOutAmount:",Z),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:260 ~ getDcaOpenOrderPayload ~ perCycleMaxOutAmount:",K);const Y={in_coin_type:s.address,out_coin_type:S.address,in_coin_amount:w.toString(),cycle_frequency:O,cycle_count:M,per_cycle_min_out_amount:Z,per_cycle_max_out_amount:K,per_cycle_in_amount_limit:f.amount_in_limit_per_cycle,fee_rate:f.fee_rate,timestamp:f.timestamp,signature:f.signature};if(A(f==null?void 0:f.amount_in_limit_per_cycle).gt(A(U)))throw new Error("Each order size should be higher than $10");if(A(K).gt(ue))throw new Error("minPrice error");console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:258 ~ getDcaOpenOrderPayload ~ openOrderParams:",Y);const fe=await e.peripherySdk.Dca.dcaOpenOrderPayload(Y);return j(fe)},L=async i=>{const s=await e.peripherySdk.Dca.dcaCloseOrderPayload(i);return j(s)},H=async i=>{const s=await e.peripherySdk.Dca.withdraw(i);return j(s)},W=async(i,s)=>{const S=[];for(let B=0;B<i.length;B++){const M=i[B];console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:219 ~ buildDcaOrderHistory ~ history:",M);const{inCoin:h,outCoin:oe}=s,O=ne.pow(10,h.decimals),f=ne.pow(10,oe.decimals),w=A(M.parsedJson.in_amount).div(O),U=A(M.parsedJson.out_amount).div(f),I=$e(w.div(U).toString(),h.decimals),Z=$e(A(1).div(I).toString(),oe.decimals),K=Qe(Number(M.timestampMs),"YMDHM"),se={inAmount:G(w.toString()),outAmount:G(U.toString()),rate:G(I),rateResever:G(Z),timestampMs:K,inCoin:h,outCoin:oe,digest:M.digest};S.push(se)}D(s.orderID,S),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:163 ~ buildDcaOrderHistory ~ history:",S)},V=async i=>{E(i.orderID,!0);const s={...e.clmmSdkOptions,fullRpcUrl:Fe.Sui.queryTxsBlocksRpcUrl},S=new va(s),M=await new ma(e.peripherySDKOptions,S).Dca.getDcaOrdersMakeDeal(i.orderID);M&&M.length>0?W(M,i):(D(i.orderID,[]),E(i.orderID,!1))};return{fetchDcaOrderList:ae,getDcaGlobalConfig:Q,getDcaQuote:J,getDcaOpenOrderPayload:_,dcaCloseOrderPayload:L,dcaWithdrawPayload:H,getDcaOrderHistory:V,getDcaQuoteConfig:F,updateDcaOrderHistory:i=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:334 ~ updateDcaOrderHistory ~ refreshObj:",i),Object.values(i).forEach(s=>{V(s)})},getDcaCoinWhiteList:async i=>{var h,oe;z(!0);const{inCoinList:s,outCoinList:S}=await e.peripherySdk.Dca.getDcaCoinWhiteList(i),B=[],M=[];for(let O=0;O<s.length;O++){const f=await n(s[O]);console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:344 ~ getDcaCoinWhiteList ~ tokenInfo:",f),B.push({...f,labels:((h=f==null?void 0:f.labels)==null?void 0:h.length)>0?f.labels:"",address:At(s[O])})}for(let O=0;O<S.length;O++){const f=await n(S[O]);console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:374 ~ getDcaCoinWhiteList ~ tokenInfo:",f),M.push({...f,labels:((oe=f==null?void 0:f.labels)==null?void 0:oe.length)>0?f.labels:"",address:At(S[O])})}console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:351 ~ getDcaCoinWhiteList ~ outList:",M),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDca.ts:351 ~ getDcaCoinWhiteList ~ inList:",B),k(B,M),z(!1)}}}const{getDcaQuote:La}=Ue(),r=C(),y=C(),re=C(1),te=C("2"),X=C(""),ve=C(""),me=C(""),Ie=C("Hour"),ze=C(0);yt(()=>{re.value=1,te.value="2",X.value="",ve.value="",me.value="",Ie.value="Hour",ze.value=0});const Pa=Te(),Aa=u(()=>Pa),Ra=u(()=>Aa.value.dcaConfig),Dt=C(),Je=C(),Na=C();Ce(()=>Ra.value,e=>{e&&!Ee(e)&&(Dt.value=e.minCycleAmountInUsd,Je.value=e.minCycleCount,Na.value=e.minCycleFrequency)},{immediate:!0});const lt=C(0);Ce(()=>{var e;return(e=r.value)==null?void 0:e.address},e=>{e?lt.value=Ia(e)||0:lt.value=0});const vt=u(()=>X.value&&te.value&&Number(te.value)>0?new ne(X.value).div(te.value):0),ja=u(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-data.ts:77 ~ sellPerOrderUSD ~ sellCoinPrice.value:",lt.value),X.value&&Number(X.value)>0&&te.value&&Number(te.value)>0?new ne(X.value).div(te.value).mul(lt.value).toString():0)),ft=u(()=>X.value&&te.value&&Number(vt.value)<Ot.value?{status:!0,tips:`Each order size should be higher than $${Dt.value}.`}:X.value&&te.value&&Number(ja.value)>1e4?{status:!0,tips:"Each order size should be less than $10000"}:{status:!1,tips:""}),gt=u(()=>te.value&&Number(te.value)<Je.value?{status:!0,tips:`Number of Orders cannot be lower than ${Je.value}.`}:te.value&&Number(re.value)<=0?{status:!0,tips:"Please enter an interval above 0"}:te.value&&re.value&&Number(re.value)>1e4?{status:!0,tips:"The maximum interval is 10,000."}:{status:!1,tips:""}),rt=C(!1),bt=u(()=>ve.value&&Number(ve.value)==0||me.value&&Number(me.value)==0?{status:!0,tips:"Please enter a Minimum Price greater than 0."}:ve.value&&me.value&&Number(ve.value)>=Number(me.value)?{status:!0,tips:"The max price should be higher than min price."}:{status:!1,tips:""}),Nt=u(()=>Ke.value.connected?!r.value||!y.value?{isDisabled:!0,text:"Select a token"}:!X.value||Number(X.value)==0?{isDisabled:!0,text:"Enter an amount"}:Number(Me.value)<Number(X.value)?{isDisabled:!0,text:`Insufficient ${r==null?void 0:r.value.symbol} balance`}:te.value&&Number(te.value)<Je.value?{isDisabled:!0,text:`Minimum ${Je.value} orders`}:X.value&&te.value&&Number(vt.value)<Ot.value?{isDisabled:!0,text:`Minimum $${Dt.value} USD per order`}:ft.value.status||gt.value.status||bt.value.status||!r.value||!y.value||!X.value||re.value<=0||re.value>1e4||!te.value||!ve.value||!me.value||Ze.value.status?{isDisabled:!0,text:"Create DCA Order"}:rt.value?{isDisabled:!0,text:"No Available Route"}:{isDisabled:!1,text:"Create DCA Order"}:{isDisabled:!1,text:"Connect Wallet"}),Ma=ut(),Ge=u(()=>Ma),Ha=We(),Ke=u(()=>Ha),Ba=Le(),zt=u(()=>Ba),jt=u(()=>zt.value.chainName),Mt=dt("Sui");Ce(()=>[Ge.value.tokensObj],async([e])=>{if(!Ee(e)){const n=Rt("from"),c=Rt("to");console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-data.ts:189 ~ routerCoinFrom:",n,c),n&&c?r.value=e[n]||await Mt.getTokenBySymbol(e,n):!n&&!r.value&&(r.value=e[Fe[jt.value].swapDefaultPair.fromCoin]),n&&c?y.value=e[c]||await Mt.getTokenBySymbol(e,c):!c&&!y.value&&(y.value=e[Fe[jt.value].swapDefaultPair.toCoin])}},{immediate:!0});const Me=u(()=>{var e,n,c;return Ke.value.assets&&r.value&&Ke.value.assets[(e=r.value)==null?void 0:e.address]?Wt(Ke.value.assets[(n=r.value)==null?void 0:n.address].balance,(c=r.value)==null?void 0:c.decimals):0});u(()=>{var e,n,c;return Ge.value.tokensObj&&r.value.address&&Ge.value.tokensObj[(e=r.value)==null?void 0:e.address]&&((c=Ge.value.tokensObj[(n=r.value)==null?void 0:n.address])==null?void 0:c.decimals)});const He=e=>{var n;return(e==null?void 0:e.logoURI)||(e==null?void 0:e.logo_url)||((n=Ge.value.tokensObj[e==null?void 0:e.address])==null?void 0:n.logo_url)||(zt.value.theme==="default"?nt("/image/coins/unknown.png"):nt("/image/coins/sui-unknown.png"))},it=C(),Ze=C(),Ea=()=>{const e=new Date().getTime();let n=0;switch(console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-detail.vue:34 ~ estEndDate ~ currentTime.value:",Ie.value),Ie.value){case"Minute":n=re.value*60*1e3*(Number(te.value)-1)+6e4;break;case"Hour":n=re.value*60*60*1e3*(Number(te.value)-1)+6e4;break;case"Day":n=re.value*60*60*24*1e3*(Number(te.value)-1)+6e4;break;case"Week":n=re.value*60*60*24*7*1e3*(Number(te.value)-1)+6e4;break;case"Month":n=re.value*60*60*24*30*1e3*(Number(te.value)-1)+6e4;break}console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-detail.vue:46 ~ estEndDate ~ date + investTime:",te.value,e,n);const c=Qe(e+n,"YMDHM");console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-data.ts:303 ~ getEstEndDate ~ result:",c),it.value=c,c=="NaN-NaN-NaN NaN:NaN"&&(it.value="--"),n>60*60*24*365*1e3?Ze.value={status:!0,tips:"The maximum execution period is 1 year"}:Ze.value={status:!1,tips:"The maximum execution period is 1 year"}};Ce(()=>[X.value,re.value,te.value,ve.value,me.value,Ie.value],()=>{Ea()},{immediate:!0});const Qt=u(()=>{let e=0;switch(Ie.value){case"Minute":e=re.value*60;break;case"Hour":e=re.value*60*60;break;case"Day":e=re.value*60*60*24;break;case"Week":e=re.value*60*60*24*7;break;case"Month":e=re.value*60*60*24*30;break}return console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-data.ts:333 ~ cycleFrequency ~ investTime:",e),e}),St=C(),Ot=C(),Wa=async(e,n,c)=>{var m;try{const d=await La(e,n,c);St.value=A(d.fee_rate).div(ne.pow(10,6)).mul(100),Ot.value=A(d.amount_in_limit_per_cycle).div(ne.pow(10,(m=r==null?void 0:r.value)==null?void 0:m.decimals)).toNumber()}catch(d){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-data.ts:344 ~ queryDcaQuote ~ error:",d)}};Ce(()=>[r.value,Qt.value,te.value,Ke.value.address,X.value],([e,n,c,m])=>{e&&n&&c&&Wa(e.address,n,c)},{immediate:!0});Ce(()=>[r.value,y.value],()=>{ve.value="",me.value=""},{immediate:!0});const Ua=()=>{X.value=Me.value>0?r.value.symbol=="SUI"?new ne(Number(Me.value)).sub(new ne(.05)).lt(new ne(0))?"0":new ne(Number(Me.value)).sub(new ne(.5)).toString():String(Me.value):""},qa=()=>{var e;X.value=Me.value>0?ha(new ne(Number(Me.value)).div(2).toString(),(e=r==null?void 0:r.value)==null?void 0:e.decimals).toString():""},je=C(!0),Fa=e=>(we("data-v-26cf6120"),e=e(),De(),e),za={class:"switch-direction"},Qa={class:"left"},Va={key:0,class:"token-info"},Ga={key:0},Ka={key:1,class:"token-info"},Ya={alt:""},Ja={alt:""},Za={key:0,class:"chart-no-data"},Xa=Fa(()=>t("img",{src:ua,alt:""},null,-1)),eo=["src","onload"],to=de({__name:"dca-chart",setup(e){const n=C(!0),c=Te(),m=u(()=>c),d=u(()=>m.value.haveMarket),p=Le(),T=u(()=>p),x=u(()=>T.value.addressLpTokens),E=ut(),D=u(()=>E),R=u(()=>D.value.openPool),k=C(),z=()=>{var ae;const N=[];if((ae=R==null?void 0:R.value)==null||ae.forEach(Q=>{var J,F,j,_,L,H,W,V;if(Q.coinA.address.toUpperCase()===((F=(J=r==null?void 0:r.value)==null?void 0:J.address)==null?void 0:F.toUpperCase())&&Q.coinB.address.toUpperCase()===((_=(j=y==null?void 0:y.value)==null?void 0:j.address)==null?void 0:_.toUpperCase())||Q.coinB.address.toUpperCase()===((H=(L=r==null?void 0:r.value)==null?void 0:L.address)==null?void 0:H.toUpperCase())&&Q.coinA.address.toUpperCase()===((V=(W=y==null?void 0:y.value)==null?void 0:W.address)==null?void 0:V.toUpperCase())){const q=(x==null?void 0:x.value[Q.address])||{};q&&!Ee(q)&&N.push({...Q,pure_tvl_in_usd:q.pure_tvl_in_usd})}}),N&&N.length>0){const Q=N.sort((J,F)=>J.pure_tvl_in_usd-F.pure_tvl_in_usd)[0];return k.value=Q,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-chart.vue:327 ~ poolInfo ~ result:",Q),!1}k.value=null};return Ce(()=>[R.value,x.value,r.value,y.value],([N,ae])=>{N&&N.length>0&&ae&&!Ee(ae)&&z()},{immediate:!0}),(N,ae)=>{var j,_,L,H,W,V,q,g,i,s,S,B,M,h,oe,O,f,w,U,I,Z,K,se,ie,ue,Y,fe,ye,Pe,ke,b,Ae,Re,ge,Ne,Se,ce,Ve,ot;const Q=ct,J=Xe,F=qe("image");return a(),l("div",{class:be(["trade-chart",!n.value&&!k.value?"trade-chart-no-pool":""])},[t("div",za,[t("div",Qa,[k.value?(a(),l("div",Va,[t("div",null,[pe(t("img",null,null,512),[[F,(j=k.value)!=null&&j.needReverse?(L=(_=k.value)==null?void 0:_.token_b)==null?void 0:L.logo_url:(W=(H=k.value)==null?void 0:H.token_a)==null?void 0:W.logo_url]]),v(Q,{address:(V=k.value)!=null&&V.needReverse?(g=(q=k.value)==null?void 0:q.token_b)==null?void 0:g.address:(s=(i=k.value)==null?void 0:i.token_a)==null?void 0:s.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),t("div",null,[pe(t("img",null,null,512),[[F,(S=k.value)!=null&&S.needReverse?(M=(B=k.value)==null?void 0:B.token_a)==null?void 0:M.logo_url:(oe=(h=k.value)==null?void 0:h.token_b)==null?void 0:oe.logo_url]]),v(Q,{address:(O=k.value)!=null&&O.needReverse?(w=(f=k.value)==null?void 0:f.token_a)==null?void 0:w.address:(I=(U=k.value)==null?void 0:U.token_b)==null?void 0:I.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),k.value?(a(),l("span",Ga,$((Z=k.value)!=null&&Z.needReverse?(se=(K=k.value)==null?void 0:K.token_b)==null?void 0:se.symbol:(ue=(ie=k.value)==null?void 0:ie.token_a)==null?void 0:ue.symbol)+" / "+$((Y=k.value)!=null&&Y.needReverse?(ye=(fe=k.value)==null?void 0:fe.token_a)==null?void 0:ye.symbol:(ke=(Pe=k.value)==null?void 0:Pe.token_b)==null?void 0:ke.symbol),1)):P("",!0)])):o(r)&&o(y)?(a(),l("div",Ka,[t("div",null,[pe(t("img",Ya,null,512),[[F,(b=o(r))==null?void 0:b.logo_url]]),v(Q,{address:(Ae=o(r))==null?void 0:Ae.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),t("div",null,[pe(t("img",Ja,null,512),[[F,(Re=o(y))==null?void 0:Re.logo_url]]),v(Q,{address:(ge=o(y))==null?void 0:ge.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),t("span",null,$((Ne=o(r))==null?void 0:Ne.symbol)+" / "+$((Se=o(y))==null?void 0:Se.symbol),1)])):P("",!0)])]),!n.value&&!k.value?(a(),l("div",Za,[Xa,t("span",null,$(d.value?"Price chart is currently not available for this pair, but you can still place your limit orders.":"No data avaliable"),1)])):P("",!0),pe(t("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",src:`https://birdeye.so/tv-widget/${(Ve=(ce=k.value)==null?void 0:ce.token_a)==null?void 0:Ve.address}/${(ot=k.value)==null?void 0:ot.address}?chain=sui`,onload:()=>{n.value=!1}},null,8,eo),[[Pt,!n.value&&k.value]]),pe(v(J,null,null,512),[[Pt,n.value]])],2)}}});const ao=he(to,[["__scopeId","data-v-26cf6120"]]),oo={class:"title-tab"},so=["onClick"],no={key:0,src:ya,class:"beta",alt:""},lo={key:1,class:"text"},ro=de({__name:"dca-title-tab",props:{tabList:{type:Object,default:()=>[]},currentTab:{type:String,default:()=>""},numValue:{type:Number,default:()=>null}},emits:["clickTab"],setup(e,{emit:n}){return(c,m)=>(a(),l("div",oo,[(a(!0),l(xe,null,Be(e.tabList,d=>(a(),l("div",{key:d.link,class:be(e.currentTab==d.value?"tab-active tab":"tab"),onClick:p=>c.$emit("clickTab",d)},[_e($(d.label)+" ",1),d!=null&&d.isHaveBeta?(a(),l("img",no)):P("",!0),(d==null?void 0:d.numValue)>0?(a(),l("div",lo,$(d==null?void 0:d.numValue),1)):P("",!0)],10,so))),128))]))}});const io=he(ro,[["__scopeId","data-v-af0ef41e"]]),co=e=>(we("data-v-e3ca7ea9"),e=e(),De(),e),uo=co(()=>t("svg",{"aria-hidden":"true",class:"refresh-icon"},[t("use",{"xlink:href":"#icon-icon-refresh2"})],-1)),vo=[uo],mo=de({__name:"dca-refresh",setup(e){const n=We(),c=u(()=>n),m=Te(),d=u(()=>m),{fetchDcaOrderList:p,updateDcaOrderHistory:T}=Ue(),x=u(()=>d.value.autoRefreshOrderHistoryObj),E=()=>{D.value||(ze.value=0,p(c.value.address,!1),x.value&&!Ee(x.value)&&T(x.value))},D=u(()=>d.value.dcaOrderListLoading);return(R,k)=>(a(),l("div",{class:be(D.value?"refresh fresh-box":"fresh-box"),onClick:E},vo,2))}});const _o=he(mo,[["__scopeId","data-v-e3ca7ea9"]]),ho=e=>(we("data-v-21583392"),e=e(),De(),e),fo={class:"dca-coin-pair"},go={class:"img-box"},bo={class:"coin-a"},po={alt:""},yo={class:"coin-b"},$o={alt:""},Co={class:"text"},ko=["href"],wo=ho(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_link"})],-1)),Do=[wo],So=de({__name:"dca-coin-pair",props:{tokenA:{type:Object,default:()=>({})},tokenB:{type:Object,default:()=>({})},link:{type:String,default:()=>""}},setup(e){const n=Le(),c=u(()=>n),m=u(()=>c.value.currentExplorer);return(d,p)=>{var E,D;const T=ct,x=qe("image");return a(),l("div",fo,[t("div",go,[t("div",bo,[pe(t("img",po,null,512),[[x,o(He)(e.tokenA)]]),v(T,{address:e.tokenA.address,"style-params":{width:"12px",height:"12px",right:"0",bottom:"0px"}},null,8,["address"])]),t("div",yo,[pe(t("img",$o,null,512),[[x,o(He)(e.tokenB)]]),v(T,{address:e.tokenB.address,"style-params":{width:"12px",height:"12px",right:"0",bottom:"0px"}},null,8,["address"])])]),t("div",Co,$((E=e.tokenA)==null?void 0:E.symbol)+" â†’ "+$((D=e.tokenB)==null?void 0:D.symbol),1),t("a",{href:("getExplorerUrl"in d?d.getExplorerUrl:o(Ut))(m.value,"poolAddress",e.link),target:"_blank"},Do,8,ko)])}}});const Oo=he(So,[["__scopeId","data-v-21583392"]]),xo={class:"title-tab"},Io=["onClick"],To=de({__name:"dca-square-tab",props:{tabList:{type:Object,default:()=>[]},currentTab:{type:String,default:()=>""}},emits:["clickTab"],setup(e,{emit:n}){return(c,m)=>(a(),l("div",xo,[(a(!0),l(xe,null,Be(e.tabList,d=>(a(),l("div",{key:d.value,class:be(e.currentTab==(d==null?void 0:d.value)?"tab-active tab":"tab"),onClick:p=>c.$emit("clickTab",d)},$(d.label)+" "+$(d.numValue?`(${d.numValue})`:""),11,Io))),128))]))}});const Lo=he(To,[["__scopeId","data-v-90748a89"]]),Vt=e=>(we("data-v-f443ad2b"),e=e(),De(),e),Po={class:"dca-h-label"},Ao={class:"left"},Ro={key:0,class:"right"},No={key:1,class:"right"},jo=Vt(()=>t("svg",{class:"icon icon-up","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Mo=Vt(()=>t("svg",{class:"icon icon-down","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Ho=[jo,Mo],Bo=de({__name:"dca-h-label",props:{leftText:{type:String,default:()=>""},rightText:{type:String,default:()=>""},isSlot:{type:Boolean,default:()=>!1},hasChangeDirect:{type:Boolean,default:!1},defaultDirect:{type:Boolean,default:!0}},setup(e){return(n,c)=>(a(),l("div",Po,[t("div",Ao,$(e.leftText),1),e.isSlot?(a(),l("div",Ro,[Zt(n.$slots,"right-text",{},()=>[_e($(e.rightText),1)],!0)])):(a(),l("div",No,[t("span",null,$(e.rightText),1),e.hasChangeDirect?(a(),l("div",{key:0,class:"change-direct",onClick:c[0]||(c[0]=m=>n.$emit("changeDirect",!e.defaultDirect))},Ho)):P("",!0)]))]))}});const xt=he(Bo,[["__scopeId","data-v-f443ad2b"]]),Eo={key:0,class:"top"},Wo=t("svg",{class:"icon icon-up","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_up1"})],-1),Uo=t("svg",{class:"icon icon-down","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_down1"})],-1),qo=[Wo,Uo],Fo=["href"],zo=t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_link"})],-1),Qo=[zo],Vo=de({__name:"dca-v-label",props:{label:{type:String,default:()=>""},value:{type:String,default:()=>""},link:{type:String,default:()=>""},alignItem:{type:String,default:()=>"flex-start"},hasChange:{type:Boolean,default:!1},direct:{type:Boolean,default:!1}},setup(e){const n=Le(),c=u(()=>n),m=u(()=>c.value.currentExplorer);return(d,p)=>(a(),l("div",{class:"dca-v-label",style:$t({alignItems:e.alignItem})},[e.label?(a(),l("div",Eo,[t("div",null,$(e.label),1),e.hasChange?(a(),l("div",{key:0,class:"right",onClick:p[0]||(p[0]=T=>d.$emit("changeDirect",!e.direct))},qo)):P("",!0)])):P("",!0),t("div",{class:be(["bottom",e.link?"link-bottom":""])},[t("span",null,$(e.value),1),e.link?(a(),l("a",{key:0,href:("getExplorerUrl"in d?d.getExplorerUrl:o(Ut))(m.value,"tx",e.link),target:"_blank"},Qo,8,Fo)):P("",!0)],2)],4))}});const mt=e=>(we("data-v-a0299033"),e=e(),De(),e),Go={class:"dca-order-detail"},Ko={class:"show-top"},Yo={class:"left"},Jo={class:"btn-box"},Zo=mt(()=>t("span",null,"Details",-1)),Xo=mt(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),es=[Xo],ts={class:"progress"},as={class:"text"},os={key:0,class:"details-con"},ss={class:"tab"},ns={key:0,class:"loading"},ls={key:1,class:"no-data"},rs={key:2},is={key:0,class:"overview-con"},cs={key:0,class:"warning-tips"},us=mt(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-warning"})],-1)),ds=mt(()=>t("div",{class:"text"},[t("span",null,[_e(" The system tried to execute your order multiple times but did not get it through. This is possibly because:"),t("br"),_e(" Â· The market price is not in your required price range"),t("br"),_e(" Â· The market no longer exsit"),t("br"),_e(" Â· The market is extremely volatile"),t("br")]),t("span",null," This DCA will continue to be attempted and the estimated end date may be extended until your order is fully executed. ")],-1)),vs=[us,ds],ms={class:"claim-box"},_s={class:"claim-text"},hs={class:"claim-text"},fs={key:0},gs={key:1},bs={key:0},ps={class:"show-info"},ys={key:4},$s={key:5},Cs={key:6},ks={key:7},ws={key:8},Ds={key:1,class:"order-con"},Ss={key:0,class:"pc-order-history"},Os={class:"order-title"},xs={class:"order-list"},Is={key:1,class:"h5-order-history"},Ts={class:"order-list"},Ls={key:2,class:"order-history-loading"},Ps={key:1,class:"line"},As=de({__name:"dca-order-card",props:{isPastTab:{type:Boolean,default:()=>!1},detailInfo:{type:Object,default:()=>({})},orderInfo:{type:Object,default:()=>({})},isLast:{type:Boolean,default:!0}},setup(e){const n=C(!1),c=C("overview"),m=e,d=C(!1),p=We(),T=u(()=>p),x=Le(),E=u(()=>x),D=u(()=>E.value.chainName),R=u(()=>D.value?dt(D.value):{}),{dcaCloseOrderPayload:k,fetchDcaOrderList:z,dcaWithdrawPayload:N,getDcaOrderHistory:ae}=Ue(),{setIsShowSuccess:Q,setIsShowRejected:J,setIsShowWaiting:F,setTransactionDesc:j,setTransactionTxid:_}=x,L=C(),H=async f=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:266 ~ closeOrder ~ orderInfo:",f),L.value={...L.value,[f.orderID]:!0},_(""),j("Closing DCA order"),F(!0);try{let w;const U=[{order_id:f.orderID,in_coin_type:f.inCoin.address,out_coin_type:f.outCoin.address}];console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:280 ~ closeOrder ~ closeOrderParams:",U);const I=await k(U),Z=await R.value.signAndExecuteTransactionBlock(T.value.currentWallet,I,{action:"DcaClosedOrder"});if(w=R.value.handleTx(Z),w&&w.hash){_(w.hash),F(!1),Q(!0);const K={title:"DCA Order Closed",desc:"",hash:w.hash};K.res=w.res,R.value.showTransitionPending(K),await R.value.watchTransaction(K)&&(setTimeout(()=>{z(T.value.address),R.value.getAccount(T.value.address)},1e3),setTimeout(()=>{R.value.getAccount(T.value.address)},3e3),setTimeout(()=>{L.value={...L.value,[f.orderID]:!1}},5e3))}}catch{L.value={...L.value,[f.orderID]:!1},F(!1),J(!0)}},W=C(),V=async f=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:266 ~ closeOrder ~ orderInfo:",f),W.value={...W.value,[f.orderID]:!0},_(""),j(`Claim ${f.outCoin.symbol}`),F(!0);try{let w;const U={order_id:f.orderID,in_coin_type:f.inCoin.address,out_coin_type:f.outCoin.address},I=await N(U),Z=await R.value.signAndExecuteTransactionBlock(T.value.currentWallet,I,{action:"DcaClaim"});if(w=R.value.handleTx(Z),w&&w.hash){_(w.hash),F(!1),Q(!0);const K={title:`${f.outCoin.symbol} Claimed`,desc:"",hash:w.hash};K.res=w.res,R.value.showTransitionPending(K),await R.value.watchTransaction(K)&&(setTimeout(()=>{z(T.value.address),R.value.getAccount(T.value.address)},1e3),setTimeout(()=>{W.value={...W.value,[f.orderID]:!1}},5e3))}}catch(w){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:375 ~ withdraw ~ error:",w),W.value={...W.value,[f.orderID]:!1},F(!1),J(!0)}};C(),C(0);const q=(f,w)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:384 ~ changeDcaSquareTab ~ value:",w),c.value=w,w=="orders"&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:389 ~ changeDcaSquareTab ~ orderInfo.orderID:",f.orderID),ae(f))},g=Te(),i=u(()=>g),s=u(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:414",i.value.dcaOrderHistoryObj&&i.value.dcaOrderHistoryObj[m.orderInfo.orderID]),i.value.dcaOrderHistoryObj&&i.value.dcaOrderHistoryObj[m.orderInfo.orderID])),S=u(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:418 ~ dcaOrderHistoryLoading",i.value.dcaOrderHistoryLoadingObj&&i.value.dcaOrderHistoryLoadingObj[m.orderInfo.orderID]),i.value.dcaOrderHistoryLoadingObj&&i.value.dcaOrderHistoryLoadingObj[m.orderInfo.orderID])),{setAutoRefreshOrderHistoryObj:B}=g,M=f=>{n.value=!n.value,B(f),ae(f)},h=C(!0),oe=u(()=>[{label:"Overview",value:"overview"},{label:"Orders",value:"orders",numValue:s.value&&s.value.length}]),O=C(!0);return(f,w)=>{var fe,ye,Pe,ke;const U=Oo,I=Ct,Z=Xt,K=Lo,se=Xe,ie=Ft,ue=xt,Y=Vo;return a(),l("div",Go,[t("div",Ko,[t("div",Yo,[v(U,{"token-a":e.orderInfo.inCoin,"token-b":e.orderInfo.outCoin,link:e.orderInfo.orderID},null,8,["token-a","token-b","link"]),t("div",Jo,[e.isPastTab?P("",!0):(a(),ee(I,{key:0,class:"dca-close-withdraw-btn",loading:L.value&&L.value[e.orderInfo.orderID],onClick:w[0]||(w[0]=b=>H(e.orderInfo))},{default:le(()=>[_e($(e.orderInfo.outBalance<=0?"Close":"Close and Withdraw"),1)]),_:1},8,["loading"])),v(I,{class:"dca-details-btn",onClick:w[1]||(w[1]=b=>M(e.orderInfo))},{default:le(()=>[Zo,(a(),l("svg",{class:be(["icon",n.value?"icon-active":""]),"aria-hidden":"true"},es,2))]),_:1})])]),t("div",ts,[t("div",as,[_e($(o(G)(e.orderInfo.inDepositedOut))+" "+$((ye=(fe=e.orderInfo)==null?void 0:fe.inCoin)==null?void 0:ye.symbol)+" / ",1),t("span",null,$(o(G)(e.orderInfo.inDeposited))+" "+$((Pe=e.orderInfo.inCoin)==null?void 0:Pe.symbol)+" ("+$(e.orderInfo.inBalanceRatio)+"%)",1)]),v(Z,{class:"dca-detail-progress",percent:Number(e.orderInfo.inBalanceRatio),"stroke-color":{"0%":"#76C8FF","100%":"#76C8FF"},"show-info":!1,"trail-color":"#282828"},null,8,["percent"])])]),n.value?(a(),l("div",os,[t("div",ss,[v(K,{"tab-list":oe.value,"current-tab":c.value,onClickTab:w[2]||(w[2]=b=>{q(e.orderInfo,b.value)})},null,8,["tab-list","current-tab"])]),d.value?(a(),l("div",ns,[v(se)])):e.detailInfo?(a(),l("div",rs,[c.value=="overview"?(a(),l("div",is,[e.orderInfo.isShowTradeTips&&e.orderInfo.orderStatus=="Active"?(a(),l("div",cs,vs)):P("",!0),t("div",ms,[v(ue,{"left-text":`DCA ${e.orderInfo.inCoin.symbol} Balance`,"right-text":`${o(G)(e.orderInfo.inBalance,2)||"0"} ${((ke=e.orderInfo.inCoin)==null?void 0:ke.symbol)||""}`},null,8,["left-text","right-text"]),v(ue,{"left-text":`DCA ${e.orderInfo.outCoin.symbol} Balance`,"is-slot":!0},{"right-text":le(()=>[t("div",_s,[t("span",null,$(e.orderInfo.outBalance>0?o(G)(e.orderInfo.outBalance):e.orderInfo.outBalance)+" "+$(e.orderInfo.outCoin.symbol),1),e.isPastTab?P("",!0):(a(),ee(I,{key:0,disabled:e.orderInfo.outBalance<=0,loading:W.value&&W.value[e.orderInfo.orderID],class:"dca-close-withdraw-btn dca-cliam-btn",onClick:w[3]||(w[3]=b=>V(e.orderInfo))},{default:le(()=>[_e("Claim â†‘")]),_:1},8,["disabled","loading"]))])]),_:1},8,["left-text"]),v(ue,{"left-text":"Amount Withdrawn","is-slot":!0},{"right-text":le(()=>[t("div",hs,[e.isPastTab?P("",!0):(a(),l("span",fs,$(o(G)(e.orderInfo.outWithdraw,2))+" "+$(e.orderInfo.outCoin.symbol),1)),e.isPastTab?(a(),l("div",gs,[e.orderInfo.orderStatus=="PartialDeal"||e.orderInfo.orderStatus=="Close"?(a(),l("span",bs,$(o(G)(e.orderInfo.inWithdrawn,2))+" "+$(e.orderInfo.inCoin.symbol),1)):P("",!0),t("span",null,$(o(G)(e.orderInfo.outWithdraw,2))+" "+$(e.orderInfo.outCoin.symbol),1)])):P("",!0)])]),_:1})]),t("div",ps,[v(Y,{label:"Invest Every",value:e.orderInfo.investEvery},null,8,["value"]),v(Y,{label:"# of Orders Left",value:e.orderInfo.ofOrderLeft},null,8,["value"]),v(Y,{label:"Each Order Size",value:`${o(G)(e.orderInfo.eachOrderSize)} ${e.orderInfo.inCoin.symbol}`,"align-item":"flex-end"},null,8,["value"]),O.value?(a(),ee(Y,{key:0,"has-change":"",direct:O.value,label:"Minimum Price",value:`${o(G)(e.orderInfo.minPrice)} ${e.orderInfo.inCoin.symbol} per ${e.orderInfo.outCoin.symbol}`,onChangeDirect:w[4]||(w[4]=b=>{O.value=b})},null,8,["direct","value"])):P("",!0),O.value?(a(),ee(Y,{key:1,"has-change":"",direct:O.value,label:"Maximum Price",value:`${o(G)(e.orderInfo.maxPrice)} ${e.orderInfo.inCoin.symbol} per ${e.orderInfo.outCoin.symbol}`,onChangeDirect:w[5]||(w[5]=b=>{O.value=b})},null,8,["direct","value"])):P("",!0),O.value?P("",!0):(a(),ee(Y,{key:2,"has-change":"",direct:O.value,label:"Minimum Price",value:`${o(G)(e.orderInfo.minPriceResever)} ${e.orderInfo.outCoin.symbol} per ${e.orderInfo.inCoin.symbol}`,onChangeDirect:w[6]||(w[6]=b=>{O.value=b})},null,8,["direct","value"])),O.value?P("",!0):(a(),ee(Y,{key:3,"has-change":"",direct:O.value,label:"Maximum Price",value:`${o(G)(e.orderInfo.maxPriceResever)} ${e.orderInfo.outCoin.symbol} per ${e.orderInfo.inCoin.symbol}`,onChangeDirect:w[7]||(w[7]=b=>{O.value=b})},null,8,["direct","value"])),!e.isPastTab&&O.value?(a(),l("div",ys,[v(Y,{direct:O.value,"has-change":"",label:"Current Avg. Price",value:`${o(G)(e.orderInfo.currentAvgPrice)} ${e.orderInfo.inCoin.symbol} per ${e.orderInfo.outCoin.symbol}`,"align-item":"flex-end",onChangeDirect:w[8]||(w[8]=b=>{O.value=b})},null,8,["direct","value"])])):P("",!0),e.isPastTab&&e.orderInfo.currentAvgPrice!=="--"&&O.value?(a(),l("div",$s,[v(Y,{direct:O.value,"has-change":"",label:"Avg. Price",value:`${o(G)(e.orderInfo.currentAvgPrice)} ${e.orderInfo.inCoin.symbol} per ${e.orderInfo.outCoin.symbol}`,"align-item":"flex-end",onChangeDirect:w[9]||(w[9]=b=>{O.value=b})},null,8,["direct","value"])])):P("",!0),!e.isPastTab&&!O.value?(a(),l("div",Cs,[v(Y,{direct:O.value,"has-change":"",label:"Current Avg. Price",value:`${o(G)(e.orderInfo.currentAvgPriceResever)} ${e.orderInfo.outCoin.symbol} per ${e.orderInfo.inCoin.symbol}`,"align-item":"flex-end",onChangeDirect:w[10]||(w[10]=b=>{O.value=b})},null,8,["direct","value"])])):P("",!0),e.isPastTab&&e.orderInfo.currentAvgPriceResever!=="--"&&!O.value?(a(),l("div",ks,[v(Y,{direct:O.value,"has-change":"",label:"Avg. Price",value:`${o(G)(e.orderInfo.currentAvgPriceResever)} ${e.orderInfo.outCoin.symbol} per ${e.orderInfo.inCoin.symbol}`,"align-item":"flex-end",onChangeDirect:w[11]||(w[11]=b=>{O.value=b})},null,8,["direct","value"])])):P("",!0),e.isPastTab?P("",!0):(a(),l("div",ws,[v(Y,{label:"Next Order (UTC)",value:e.orderInfo.nextCycleAt},null,8,["value"])])),v(Y,{label:"Created (UTC)","align-item":e.isPastTab&&e.orderInfo.currentAvgPrice=="--"?"flex-end":"flex-start",value:e.orderInfo.createAt},null,8,["align-item","value"])])])):(a(),l("div",Ds,[s.value&&s.value.length>0?(a(),l("div",Ss,[t("div",Os,[v(Y,{label:"Order info"}),v(Y,{label:"Rate","has-change":"",direct:h.value,onChangeDirect:w[12]||(w[12]=b=>{h.value=b})},null,8,["direct"]),v(Y,{label:"Time (UTC)","align-item":"flex-end"})]),t("div",xs,[(a(!0),l(xe,null,Be(s.value,b=>(a(),l("div",{key:b.timestampMs,class:"order-history-item"},[v(Y,{label:"",value:`${b.inAmount} ${b.inCoin.symbol} â†’ ${b.outAmount} ${b.outCoin.symbol}`},null,8,["value"]),h.value?(a(),ee(Y,{key:0,label:"",value:`${b.rate} ${b.inCoin.symbol} per ${b.outCoin.symbol}`},null,8,["value"])):(a(),ee(Y,{key:1,label:"",value:`${b.rateResever} ${b.outCoin.symbol} per ${b.inCoin.symbol}`},null,8,["value"])),v(Y,{label:"",value:b.timestampMs,link:b.digest,"align-item":"flex-end"},null,8,["value","link"])]))),128))])])):P("",!0),s.value&&s.value.length>0?(a(),l("div",Is,[t("div",Ts,[(a(!0),l(xe,null,Be(s.value,b=>(a(),l("div",{key:b.timestampMs,class:"order-history-item"},[v(ue,{"left-text":"Order info","right-text":`${b.inAmount} ${b.inCoin.symbol} â†’ ${b.outAmount} ${b.outCoin.symbol}`},null,8,["right-text"]),h.value?(a(),ee(ue,{key:0,"left-text":"Rate","right-text":`${b.rate} ${b.inCoin.symbol} per ${b.outCoin.symbol}`},null,8,["right-text"])):(a(),ee(ue,{key:1,"left-text":"Rate","right-text":`${b.rateResever} ${b.outCoin.symbol} per ${b.inCoin.symbol}`},null,8,["right-text"])),_e(),v(ue,{"left-text":"Time (UTC)","right-text":b.timestampMs,link:b.digest,"align-item":"flex-end"},null,8,["right-text","link"])]))),128))])])):S.value?(a(),l("div",Ls,[v(se)])):!S.value&&s.value&&s.value.length==0?(a(),ee(ie,{key:3,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No orders",platform:"dca"})):P("",!0)])),!e.isPastTab&&c.value=="overview"?(a(),ee(I,{key:2,class:"dca-close-withdraw-btn h5-btn",loading:L.value&&L.value[e.orderInfo.orderID],onClick:w[13]||(w[13]=b=>H(e.orderInfo))},{default:le(()=>[_e($(e.orderInfo.outBalance<=0?"Close":"Close and Withdraw"),1)]),_:1},8,["loading"])):P("",!0)])):(a(),l("div",ls,[v(ie,{"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No closed orders",platform:"dca",type:"dca"})]))])):P("",!0),e.isLast?P("",!0):(a(),l("div",Ps))])}}});const Rs=he(As,[["__scopeId","data-v-a0299033"]]),Ns={class:"dca-order"},js={class:"tab-box"},Ms={class:"order-list-box"},Hs={key:0,class:"no-data-box"},Bs={key:2,class:"no-data-box"},Es={key:3,class:"order-list"},Ws={key:0,class:"panation"},Us=de({__name:"dca-order-list",setup(e){const n=Te(),c=u(()=>n),m=u(()=>c.value.dcaActiveOrderList),d=u(()=>c.value.dcaPastOrderList),p=C("acitive"),T=u(()=>c.value.dcaOrderListLoading),x=C([]),E=u(()=>[{label:"Acitive DCAs",value:"acitive",numValue:m.value.length},{label:"Past DCAs",value:"past",numValue:d.value.length}]),D=C(!1);Ye(async()=>{D.value=!0});const R=C(1),k=(g,i)=>{R.value=g;const s=p.value=="past"?d.value:m.value;if(s&&s.length>0)if(s.length<10)x.value=s.slice(0,i);else{const S=R.value*i;x.value=s.slice(S-10,S)}else x.value=[]};Ce(()=>[m.value,d.value,D.value,p.value],([g,i])=>{i&&k(R.value,10)},{immediate:!0});const z=We(),N=u(()=>z),ae=Le(),{dcaCloseOrderPayload:Q,fetchDcaOrderList:J}=Ue(),{setIsShowSuccess:F,setIsShowRejected:j,setIsShowWaiting:_,setTransactionDesc:L,setTransactionTxid:H}=ae,W=C(),V=dt("Sui"),q=async()=>{H(""),L("Close all DCA orders"),_(!0);const g=[];try{let i;m.value.forEach(B=>{W.value={...W.value,[B.orderID]:!0},g.push({order_id:B.orderID,in_coin_type:B.inCoin.address,out_coin_type:B.outCoin.address})}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:280 ~ closeOrder ~ closeOrderParams:",g);const s=await Q(g),S=await V.signAndExecuteTransactionBlock(N.value.currentWallet,s,{action:"DcaClosedOrder"});if(i=V.handleTx(S),i&&i.hash){H(i.hash),_(!1),F(!0);const B={title:"DCA Order Closed",desc:"",hash:i.hash};B.res=i.res,V.showTransitionPending(B),await V.watchTransaction(B)&&(setTimeout(()=>{J(N.value.address),V.value.getAccount(N.value.address)},1e3),setTimeout(()=>{V.value.getAccount(N.value.address)},3e3),setTimeout(()=>{W.value={}},5e3))}}catch(i){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-list.vue:216 ~ closeAllOrder ~ error:",i),W.value={},_(!1),j(!0)}};return(g,i)=>{const s=io,S=_o,B=Ft,M=Xe,h=Rs,oe=ea;return a(),l("div",Ns,[t("div",js,[v(s,{"tab-list":E.value,"current-tab":p.value,onClickTab:i[0]||(i[0]=O=>p.value=O.value)},null,8,["tab-list","current-tab"]),t("div",null,[p.value=="acitive"&&N.value&&N.value.address&&x.value.length>0?(a(),l("div",{key:0,class:"close-all-order",onClick:q},"Cancel All")):P("",!0),N.value.address?(a(),ee(S,{key:1})):P("",!0)])]),t("div",Ms,[N.value.address?T.value?(a(),ee(M,{key:1})):x.value.length==0?(a(),l("div",Bs,[v(B,{"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:p.value=="acitive"?"No active orders":"No closed orders",platform:"dca",type:"dca"},null,8,["desc"])])):(a(),l("div",Es,[(a(!0),l(xe,null,Be(x.value,(O,f)=>(a(),l("div",{key:O.orderID,class:be(["order-detail-box",f==x.value.length-1?"last-order-detail-box":""])},[v(h,{"order-info":O,"is-past-tab":p.value=="past","is-last":f==x.value.length-1},null,8,["order-info","is-past-tab","is-last"])],2))),128)),(p.value=="past"?d.value.length>10:m.value.length>10)?(a(),l("div",Ws,[v(oe,{current:R.value,"onUpdate:current":i[1]||(i[1]=O=>R.value=O),"page-size":10,simple:"",total:p.value=="past"?d.value.length:m.value.length,onChange:k},null,8,["current","total"])])):P("",!0)])):(a(),l("div",Hs,[v(B,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",desc:"",platform:"dca",type:"connectWallet"})]))])])}}});const qs=he(Us,[["__scopeId","data-v-0870de7e"]]),et=e=>(we("data-v-3cc164d0"),e=e(),De(),e),Fs=et(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),zs={class:"coin-select-modal"},Qs={class:"search-input"},Vs=["placeholder"],Gs=et(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Ks=[Gs],Ys=et(()=>t("div",{class:"line"},null,-1)),Js={key:0,class:"type-list"},Zs=["onClick"],Xs={key:0,class:"type"},en={class:"coin-list-box"},tn={key:0,class:"coin-list"},an=["onClick"],on={class:"left"},sn={class:"token-icon",alt:""},nn={class:"name-box"},ln={key:1,class:"symbol"},rn=["onClick"],cn=et(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_copy1"})],-1)),un={class:"balance-box"},dn={class:"balance"},vn={key:0},mn={key:1},_n={key:1,class:"balance-num"},hn={key:2,class:"balance-num"},fn={key:3},gn={key:1,class:"no-data"},bn={key:0,class:"token-loading"},pn={key:1,class:"no-data-content"},yn=et(()=>t("img",{src:ka},null,-1)),$n=de({__name:"dca-token-select",props:{currentCoinKey:{type:String,default:""},lastSelectCoin:{type:String,default:""}},emits:["onSelect","onClose"],setup(e,{emit:n}){const c=e,m=C(""),d=We(),p=u(()=>d),T=Te(),x=u(()=>T.dcaCoinListLoading),E=u(()=>T.inCoinWhiteList),D=u(()=>T.outCoinWhiteList),R=n,{t:k}=kt(),z=C(k("tab.all")),N=u(()=>{const _=[k("tab.all"),k("tab.native")],L=Array.from(new Set((c.currentCoinKey=="sellCoin"?E.value:D.value).flatMap(H=>H.labels?H.labels:null)));return _.concat(L)}),ae=Le(),Q=_=>{R("onSelect",_),R("onClose")},J=C(),F=_=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-token-select.vue:238 ~ updateTokenList ~ keyword:",_);const L=c.currentCoinKey=="sellCoin"?E.value:D.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-token-select.vue:234 ~ updateTokenList ~ tokenList:",L);let H=c.currentCoinKey=="sellCoin"?E.value:D.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-token-select.vue:222 ~ updateTokenList ~ filterList:",H),_?H=L.filter(g=>{var i,s,S,B,M,h,oe,O;return((s=(i=g==null?void 0:g.symbol)==null?void 0:i.toLowerCase())==null?void 0:s.indexOf(_.toLowerCase()))!==-1||((B=(S=g==null?void 0:g.address)==null?void 0:S.toLowerCase())==null?void 0:B.indexOf(_.toLowerCase()))!==-1||((h=(M=g==null?void 0:g.address)==null?void 0:M.toLowerCase())==null?void 0:h.indexOf(qt(_).full_address.toLowerCase()))!==-1||((O=(oe=g==null?void 0:g.name)==null?void 0:oe.toLowerCase())==null?void 0:O.indexOf(_.toLowerCase()))!==-1}):(z.value!==k("tab.all")?H=L.filter(g=>{var i;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-token-select.vue:263 ~ newResult ~ ele:",g),z.value==k("tab.native")?!g.labels||(g==null?void 0:g.labels)=="Native":g.labels&&((i=g==null?void 0:g.labels[0])==null?void 0:i.toLowerCase())==z.value.toLowerCase()}):H=L,console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-token-select.vue:277 ~ updateTokenList ~ filterList:",H));const W=[];for(const q of Object.keys(H)){let g=oa(H[q]);const i=p.value.assets[g.address]&&p.value.assets[g.address].balance?Wt(p.value.assets&&p.value.assets[g.address].balance,g.decimals):0;c.lastSelectCoin&&g&&g.address===c.lastSelectCoin?g.unusable=!0:g.unusable=!1,g={...g,balance:i,sort:g.symbol=="SUI"?1:-1},W.push(g)}console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-token-select.vue:289 ~ updateTokenList ~ list:",W);let V=[];p.value.address?V=W.sort((q,g)=>Number(g.balance)-Number(q.balance)):V=W,J.value=V.sort((q,g)=>g.sort-q.sort).sort((q,g)=>g.unusable-q.unusable)},j=C(k("tab.all"));return Ce(z,_=>{j.value=_,F(m.value)}),Ce(m,_=>{F(_)}),Ce(()=>[c.currentCoinKey,E.value,D.value],([_,L,H])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-token-select.vue:313 ~ newVal:",_,L,H),(_=="sellCoin"&&L&&L.length>0||_=="buyCoin"&&H&&H.length>0)&&F(m.value)},{immediate:!0}),console.log(c,"props##"),(_,L)=>{const H=wt,W=ht("loading-outlined"),V=aa,q=Xe,g=ht("vue-scroll"),i=qe("image");return a(),ee(o(Ht),{title:_.$t("modal.selectTokenModalTitle"),class:"select-mod",width:460,centered:"",visible:!0,footer:null,onCancel:L[2]||(L[2]=s=>_.$emit("onClose"))},{closeIcon:le(()=>[Fs]),default:le(()=>[t("div",zs,[t("div",Qs,[pe(t("input",{"onUpdate:modelValue":L[0]||(L[0]=s=>m.value=s),onkeyup:"value=value.replace(/[^[a-zA-Z0-9\\s]+$/g,'')",placeholder:_.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Vs),[[ta,m.value]]),m.value?(a(),l("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:L[1]||(L[1]=s=>m.value="")},Ks)):P("",!0)]),Ys,m.value?P("",!0):(a(),l("div",Js,[(a(!0),l(xe,null,Be(N.value,(s,S)=>(a(),l("div",{key:S,class:be(["type-container",z.value==s?"type-container-active type-container":"type-container"]),onClick:B=>z.value=s},[s!==null&&s!=="test"?(a(),l("div",Xs,$(s),1)):P("",!0)],10,Zs))),128))])),t("div",en,[v(g,null,{default:le(()=>[J.value&&J.value.length>0?(a(),l("ul",tn,[(a(!0),l(xe,null,Be(J.value,s=>{var S,B;return a(),l("li",{key:s.address,class:be(s.unusable?"unusable":""),onClick:M=>Q(s)},[t("div",on,[pe(t("img",sn,null,512),[[i,s.logo_url||o(nt)("/image/coins/sui-unknown.png")]]),t("div",nn,[t("div",null,[((S=s==null?void 0:s.symbol)==null?void 0:S.length)>12?(a(),ee(H,{key:0,placement:"top","arrow-point-at-center":""},{title:le(()=>[t("span",null,$(s.symbol),1)]),default:le(()=>{var M;return[t("div",{class:be(["symbol",((M=s.symbol)==null?void 0:M.length)>12?"symbol-length":""])},$(s.symbol),3)]}),_:2},1024)):(a(),l("div",ln,$(s.symbol),1)),t("p",{class:"copy-text",onClick:st(M=>o(ae).copy(s&&s.address),["stop"])},[t("span",null,$(s.address&&s.address.substr(0,4))+" ... "+$(s.address&&s.address.substr(s.address.length-4,4)),1),cn],8,rn)]),t("p",null,$(s.name),1)])]),t("div",un,[t("div",dn,[p.value.loading?(a(),l("div",vn,[v(V,null,{default:le(()=>[v(W)]),_:1})])):s.balance&&p.value.connected?(a(),l("div",mn,[((B=o(G)(s.balance,s.decimals))==null?void 0:B.length)>20?(a(),ee(H,{key:0,placement:"top","arrow-point-at-center":""},{title:le(()=>[t("span",null,$(o(G)(s.balance,s.decimals)),1)]),default:le(()=>{var M;return[t("div",{class:be(["balance-num",((M=o(G)(s.balance,s.decimals))==null?void 0:M.length)>20?"balance-length":""])},$(o(G)(s.balance,s.decimals)),3)]}),_:2},1024)):(a(),l("div",_n,$(o(G)(s.balance,s.decimals)),1))])):!s.balance&&p.value.connected?(a(),l("div",hn," 0 ")):(a(),l("div",fn))])])],10,an)}),128))])):(a(),l("div",gn,[x.value?(a(),l("div",bn,[v(q)])):(a(),l("div",pn,[yn,t("p",null,$(o(k)("newAdd.noTokensFound")),1)]))]))]),_:1})])])]),_:1},8,["title"])}}});const Cn=he($n,[["__scopeId","data-v-3cc164d0"]]),kn=de({components:{TokenWarning:ct},props:{coinSymbol:{type:String,default:""},coinIcon:{type:String,default:""},hasArrow:{type:Boolean,default:!0},hasOpcity:{type:Boolean,default:!1},address:{type:String,default:""}},setup(e,n){const{t:c,locale:m}=kt(),d=Le(),p=u(()=>d),T=Oe(Bt,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function x(){this.$emit("onSelect")}const E=ut(),D=u(()=>E),R=u(()=>D.value.tokensWarningObj),k=u(()=>{var _,L;return D.value.tokensObj&&e.address&&D.value.tokensObj[e.address]&&((_=D.value.tokensObj[e.address])==null?void 0:_.labels)&&((L=D.value.tokensObj[e.address])==null?void 0:L.labels[0])}),z=u(()=>{var _;return D.value.tokensObj&&e.address&&D.value.tokensObj[e.address]&&((_=D.value.tokensObj[e.address])==null?void 0:_.decimals)}),N=u(()=>{var _,L,H,W;return e.coinIcon||((L=(_=D==null?void 0:D.value)==null?void 0:_.tokensObj[e.address])==null?void 0:L.logo_url)||((W=(H=D==null?void 0:D.value)==null?void 0:H.tokensObj[e.address])==null?void 0:W.logoURI)||""}),ae=u(()=>D.value.tokensObj),Q=u(()=>p.value.theme),J=Te();u(()=>J);const F=u(()=>D.value.isTokenLoading);return{route:sa(),theme:Q,currentIcon:N,tokensObj:ae,pool:D,coinLabels:k,t:c,addCommom:G,store:p,indicator:T,importIcon:nt,selectCoin:x,coinDecimals:z,formatNumber:fa,tokensWarningObj:R,checkNullObj:Ee,isTokenLoading:F}}});const wn=e=>(we("data-v-bcf8b34f"),e=e(),De(),e),Dn={class:"loading-token"},Sn={key:1},On={key:0},xn=wn(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),In=[xn];function Tn(e,n,c,m,d,p){const T=na,x=ct,E=la,D=qe("image");return a(),l("div",{class:be(["dca-select-token",[e.hasArrow?"":"nohands",e.route.name=="swap"||e.route.name=="limit"||e.hasOpcity?" left-opcity":""].join("")]),onClick:n[0]||(n[0]=R=>e.hasArrow&&!e.isTokenLoading?e.selectCoin():"")},[t("div",Dn,[e.isTokenLoading?(a(),ee(T,{key:0,active:"",size:"small",paragraph:!1})):e.address?pe((a(),l("img",Sn,null,512)),[[D,e.currentIcon]]):P("",!0),v(x,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),v(E,{loading:e.isTokenLoading,active:"",paragraph:!1},{default:le(()=>[t("div",null,[t("p",null,$(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(a(),l("p",On,$(e.coinLabels),1)):P("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(a(),l("svg",{key:0,class:be(["icon",e.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},In,2)):P("",!0)],2)}const pt=he(kn,[["render",Tn],["__scopeId","data-v-bcf8b34f"]]),It=e=>(we("data-v-83aafab4"),e=e(),De(),e),Ln={class:"dca-sell-buy"},Pn={class:"item sell"},An=It(()=>t("div",{class:"tit"},"Sell",-1)),Rn=It(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-swap1"})],-1)),Nn=[Rn],jn={class:"item buy"},Mn=It(()=>t("div",{class:"tit"},"Buy",-1)),Hn=de({__name:"dca-sell-buy",setup(e){const n=C(!1),c=C(!1),m=C("sellCoin"),d=C(""),p=C(""),T=j=>{var _,L,H,W;m.value=j,j==="sellCoin"?(d.value=((_=y.value)==null?void 0:_.address)||"",p.value=((L=r.value)==null?void 0:L.address)||""):(d.value=((H=r.value)==null?void 0:H.address)||"",p.value=((W=y.value)==null?void 0:W.address)||""),rt.value=!1,console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-sell-buy.vue:69 ~ openCoinSelect ~ dcaConfig.value.whitelistMode:",F.value.whitelistMode),F.value.whitelistMode==0?n.value=!0:F.value.whitelistMode==3?c.value=!0:j==="sellCoin"?F.value.whitelistMode==1?c.value=!0:n.value=!0:F.value.whitelistMode==2?c.value=!0:n.value=!0},x=j=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-sell-buy.vue:101 ~ onCoinSelect ~ currentCoinKey.value:",m.value),m.value==="sellCoin"?(k.value=j,R(j)):(z.value=j,R(j))},E=Le(),D=C(!1),R=j=>{console.log("ðŸš€ ~ getTokenSource ~ token:",j);const _=E.importTokenListObj;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(_!=null&&_.hasOwnProperty(j==null?void 0:j.address))),j!=null&&j.isSelfBuilt&&!(_!=null&&_.hasOwnProperty(j==null?void 0:j.address))?D.value=!0:(m.value==="sellCoin"?(y.value&&j.address.toLowerCase()===(y==null?void 0:y.value.address.toLowerCase())&&(y.value=null),r.value=j):(r.value&&j.address.toLowerCase()===(r==null?void 0:r.value.address.toLowerCase())&&(r.value=null),y.value=j),N())},k=C({}),z=C({}),N=()=>{z.value={},k.value={},D.value=!1},ae=()=>{const j=r==null?void 0:r.value;r.value=y==null?void 0:y.value,y.value=j},Q=Te(),J=u(()=>Q),F=u(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-sell-buy.vue:121 ~ constdcaConfig:any=computed ~ dcaConfig:",F),J.value.dcaConfig));return(j,_)=>{var W,V,q,g,i,s;const L=$a,H=Ca;return a(),l("div",Ln,[t("div",Pn,[An,v(pt,{"coin-symbol":o(r)?(W=o(r))==null?void 0:W.symbol:null,"coin-icon":o(r)?(V=o(r))==null?void 0:V.logo_url:"",address:o(r)?(q=o(r))==null?void 0:q.address:"","has-arrow":!0,"has-opcity":!0,onOnSelect:_[0]||(_[0]=S=>T("sellCoin"))},null,8,["coin-symbol","coin-icon","address"])]),t("div",{class:"exchange sui-exchange",onClick:_[1]||(_[1]=st(S=>ae(),["stop"]))},Nn),t("div",jn,[Mn,v(pt,{"coin-symbol":o(y)?(g=o(y))==null?void 0:g.symbol:null,"coin-icon":o(y)?(i=o(y))==null?void 0:i.logo_url:"",address:o(y)?(s=o(y))==null?void 0:s.address:"","has-arrow":!0,"has-opcity":!0,onOnSelect:_[2]||(_[2]=S=>T("buyCoin"))},null,8,["coin-symbol","coin-icon","address"])]),c.value?(a(),ee(Cn,{key:0,"last-select-coin":p.value,"current-coin-key":m.value,onOnSelect:x,onOnClose:_[3]||(_[3]=S=>c.value=!1)},null,8,["last-select-coin","current-coin-key"])):P("",!0),n.value?(a(),ee(L,{key:1,"last-select-coin":p.value,"have-import-btn":!0,onOnSelect:x,onOnClose:_[4]||(_[4]=S=>n.value=!1)},null,8,["last-select-coin"])):P("",!0),D.value?(a(),ee(H,{key:2,"from-coin":k.value,"to-coin":z.value,"is-import-modal":!0,onClose:N,onClickContinue:R},null,8,["from-coin","to-coin"])):P("",!0)])}}});const Bn=he(Hn,[["__scopeId","data-v-83aafab4"]]),En=e=>(we("data-v-1ccc5fc4"),e=e(),De(),e),Wn={class:"error-tips"},Un=En(()=>t("img",{src:Da,alt:""},null,-1)),qn={class:"error"},Fn=de({__name:"dca-error-tips",props:{tips:{type:String,default:()=>""}},setup(e){return(n,c)=>(a(),l("div",Wn,[Un,t("p",qn,$(e.tips),1)]))}});const Tt=he(Fn,[["__scopeId","data-v-1ccc5fc4"]]),tt=e=>(we("data-v-6f86c64b"),e=e(),De(),e),zn={class:"dca-invest-orders"},Qn={class:"invest-orders"},Vn={class:"item invest"},Gn=tt(()=>t("div",{class:"tit"},"Invest Every",-1)),Kn={class:"bottom"},Yn={class:"text"},Jn=tt(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Zn=[Jn],Xn=["onClick"],el={class:"item orders"},tl={class:"tit"},al=tt(()=>t("div",{class:"new-style-tooltip-text"}," How many orders your want to repeat in total. ",-1)),ol=tt(()=>t("div",null,[t("span",null,"Number of Orders"),t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_tips"})])],-1)),sl={class:"bottom"},nl=tt(()=>t("div",{class:"text"},"Orders",-1)),ll={key:0},rl={key:1},il=de({__name:"dca-invest-orders",setup(e){C(!1),C("sellCoin"),C(""),C("");const n=C(!1),c=["Minute","Hour","Day","Week","Month"];Ye(()=>{window.addEventListener("click",()=>{n.value=!1})});const m=d=>{d.target.value=d.target.value.replace(/[^\d]/g,"")};return(d,p)=>{var D,R,k,z;const T=Et,x=wt,E=Tt;return a(),l("div",zn,[t("div",Qn,[t("div",Vn,[Gn,t("div",Kn,[v(T,{value:o(re),placeholder:"0.0",onChange:m,onInput:p[0]||(p[0]=N=>re.value=N.target.value)},null,8,["value"]),t("div",{class:"time-box",onClick:p[1]||(p[1]=st(()=>n.value=!n.value,["stop"]))},[t("div",Yn,$(o(Ie)),1),(a(),l("svg",{class:be(["icon",n.value?"icon-active":""]),"aria-hidden":"true"},Zn,2))]),t("div",{class:"invest-list",style:$t(n.value?{display:"block"}:{})},[(a(),l(xe,null,Be(c,N=>t("div",{key:N,class:be(["invest-item",N==o(Ie)?"invest-item-active":""]),onClick:st(()=>{n.value=!1,Ie.value=N},["stop"])},$(N),11,Xn)),64))],4)])]),t("div",el,[t("div",tl,[v(x,{"overlay-class-name":"new-style-tooltip",placement:"top","arrow-point-at-center":""},{title:le(()=>[al]),default:le(()=>[ol]),_:1})]),t("div",sl,[v(T,{value:o(te),placeholder:"0.0",onChange:m,onInput:p[2]||(p[2]=N=>te.value=N.target.value)},null,8,["value"]),nl])])]),(D=o(gt))!=null&&D.status?(a(),l("div",ll,[v(E,{tips:(R=o(gt))==null?void 0:R.tips},null,8,["tips"])])):P("",!0),(k=o(Ze))!=null&&k.status?(a(),l("div",rl,[v(E,{tips:(z=o(Ze))==null?void 0:z.tips},null,8,["tips"])])):P("",!0)])}}});const cl=he(il,[["__scopeId","data-v-6f86c64b"]]),Gt=e=>(we("data-v-bdf116db"),e=e(),De(),e),ul={class:"swap-rate"},dl={key:0},vl={key:0,class:"after-amount"},ml={key:1},_l={key:0,class:"after-amount"},hl=Gt(()=>t("svg",{class:"icon icon-up","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_up1"})],-1)),fl=Gt(()=>t("svg",{class:"icon icon-down","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_down1"})],-1)),gl=[hl,fl],bl=de({__name:"dca-current-price",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},oneToAmount:{type:String,default:()=>""},oneFromAmount:{type:String,default:()=>""},direct:{type:Boolean,default:!0},isGetPrice:{type:Boolean,default:!1}},setup(e){const n=ut();u(()=>n),Le();const c=Oe(Bt,{style:{fontSize:"16px",color:"#75C8FF"},spin:!0});return(m,d)=>{var x,E,D,R;const p=Xe,T=qe("image");return a(),l("div",ul,[e.direct?(a(),l("span",ml,[pe(t("img",null,null,512),[[T,o(He)(e.toCoin)]]),_e(" 1 "+$((D=e.toCoin)==null?void 0:D.symbol)+" â‰ˆ ",1),e.isGetPrice?(a(),ee(p,{key:1,indicator:o(c)},null,8,["indicator"])):(a(),l("span",_l,[pe(t("img",null,null,512),[[T,o(He)(e.fromCoin)]]),_e(" "+$(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+$((R=e.fromCoin)==null?void 0:R.symbol),1)]))])):(a(),l("span",dl,[pe(t("img",null,null,512),[[T,o(He)(e.fromCoin)]]),_e(" 1 "+$((x=e.fromCoin)==null?void 0:x.symbol)+" â‰ˆ ",1),e.isGetPrice?(a(),ee(p,{key:1,indicator:o(c)},null,8,["indicator"])):(a(),l("span",vl,[pe(t("img",null,null,512),[[T,o(He)(e.toCoin)]]),_e(" "+$(e.oneToAmount==1/0?0:e.oneToAmount)+" "+$((E=e.toCoin)==null?void 0:E.symbol),1)]))])),t("div",{class:"right",onClick:d[0]||(d[0]=k=>m.$emit("changeDirect",!e.direct))},gl)])}}});const pl=he(bl,[["__scopeId","data-v-bdf116db"]]),Kt=e=>(we("data-v-ed009061"),e=e(),De(),e),yl={class:"dca-price-block"},$l={class:"price-block"},Cl={class:"item min"},kl=Kt(()=>t("div",{class:"tit"},"Min Price",-1)),wl={key:0,class:"tit-symbol"},Dl={class:"item max"},Sl=Kt(()=>t("div",{class:"tit"},"Max Price",-1)),Ol={key:0,class:"tit-symbol"},xl={key:0},Il=de({__name:"dca-price-block",props:{direct:{type:Boolean,default:!0}},setup(e){const n=c=>{const m=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,18})?).*$");c.target.value=c.target.value.replace(m,"$1")};return(c,m)=>{var T,x,E,D,R,k,z,N,ae,Q;const d=Et,p=Tt;return a(),l("div",yl,[t("div",$l,[t("div",Cl,[kl,v(d,{value:o(ve),placeholder:"0.0",onChange:n,onInput:m[0]||(m[0]=J=>ve.value=J.target.value)},null,8,["value"]),o(y)&&o(r)?(a(),l("div",wl,[e.direct?(a(),l(xe,{key:0},[_e($((T=o(r))==null?void 0:T.symbol)+" per "+$((x=o(y))==null?void 0:x.symbol),1)],64)):(a(),l(xe,{key:1},[_e($((E=o(y))==null?void 0:E.symbol)+" per "+$((D=o(r))==null?void 0:D.symbol),1)],64))])):P("",!0)]),t("div",Dl,[Sl,v(d,{value:o(me),placeholder:"0.0",onChange:n,onInput:m[1]||(m[1]=J=>me.value=J.target.value)},null,8,["value"]),o(y)&&o(r)?(a(),l("div",Ol,[e.direct?(a(),l(xe,{key:0},[_e($((R=o(r))==null?void 0:R.symbol)+" per "+$((k=o(y))==null?void 0:k.symbol),1)],64)):(a(),l(xe,{key:1},[_e($((z=o(y))==null?void 0:z.symbol)+" per "+$((N=o(r))==null?void 0:N.symbol),1)],64))])):P("",!0)])]),(ae=o(bt))!=null&&ae.status?(a(),l("div",xl,[v(p,{tips:(Q=o(bt))==null?void 0:Q.tips},null,8,["tips"])])):P("",!0)])}}});const Tl=he(Il,[["__scopeId","data-v-ed009061"]]),Ll=""+globalThis.__publicAssetsURL("sui-image/jiantou.png");const Pl=de({components:{Modal:Ht},setup(e,n){const c=C(!0),m=u(()=>{var p,T;return $e(A(1).div(me.value).toString(),je.value?(p=r==null?void 0:r.value)==null?void 0:p.decimals:(T=y==null?void 0:y.value)==null?void 0:T.decimals)}),d=u(()=>{var p,T;return $e(A(1).div(ve.value).toString(),je.value?(p=r==null?void 0:r.value)==null?void 0:p.decimals:(T=y==null?void 0:y.value)==null?void 0:T.decimals)});return{sellCoin:r,buyCoin:y,currentTime:Ie,getCoinIcon:He,sellCoinAmount:X,sellPerOrder:vt,investInputValue:re,estEndDate:it,minPriceInput:ve,maxPriceInput:me,timeFormatUTC:Qe,platformFee:St,addCommom:G,direct:je,defaultDirect:c,minPriceInputResever:m,maxPriceInputResever:d}}}),_t=e=>(we("data-v-dbba33b8"),e=e(),De(),e),Al={class:"dca-modal-conetnt"},Rl={class:"sell-buy-token"},Nl={class:"item sell"},jl=_t(()=>t("div",{class:"tit"},"Sell",-1)),Ml={key:0,class:"token"},Hl=_t(()=>t("img",{class:"jiantou",src:Ll,alt:""},null,-1)),Bl={class:"item buy"},El=_t(()=>t("div",{class:"tit"},"Buy",-1)),Wl={key:0,class:"token"},Ul={class:"info"},ql={class:"receive-text"},Fl={alt:""},zl={class:"text"},Ql=_t(()=>t("span",null,"Create DCA Order",-1));function Vl(e,n,c,m,d,p){const T=pt,x=xt,E=Ct,D=ht("Modal"),R=qe("image");return a(),ee(D,{width:"440px",visible:!0,footer:null,"mask-closable":!0,title:"Review your order",onCancel:n[3]||(n[3]=k=>e.$emit("close"))},{default:le(()=>{var k,z,N,ae,Q,J,F,j,_,L,H,W;return[t("div",Al,[t("div",Rl,[t("div",Nl,[jl,e.sellCoin?(a(),l("div",Ml,[v(T,{"coin-symbol":e.sellCoin?(k=e.sellCoin)==null?void 0:k.symbol:null,"coin-icon":e.sellCoin?(z=e.sellCoin)==null?void 0:z.logo_url:"",address:e.sellCoin?(N=e.sellCoin)==null?void 0:N.address:"","has-arrow":!1},null,8,["coin-symbol","coin-icon","address"])])):P("",!0)]),Hl,t("div",Bl,[El,e.buyCoin?(a(),l("div",Wl,[v(T,{"coin-symbol":e.buyCoin?(ae=e.buyCoin)==null?void 0:ae.symbol:null,"coin-icon":e.buyCoin?(Q=e.buyCoin)==null?void 0:Q.logo_url:"",address:e.buyCoin?(J=e.buyCoin)==null?void 0:J.address:"","has-arrow":!1},null,8,["coin-symbol","coin-icon","address"])])):P("",!0)])]),t("div",Ul,[v(x,{"left-text":"Sell total","right-text":`${("addCommom"in e?e.addCommom:o(G))(e.sellCoinAmount,e.sellCoin.decimals)||"--"} ${((F=e.sellCoin)==null?void 0:F.symbol)||""}`},null,8,["right-text"]),v(x,{"left-text":"Sell per order","right-text":`${("addCommom"in e?e.addCommom:o(G))(e.sellPerOrder,e.sellCoin.decimals)||"--"} ${((j=e.sellCoin)==null?void 0:j.symbol)||""}`},null,8,["right-text"]),v(x,{"left-text":"Receive","is-slot":!0},{"right-text":le(()=>{var V;return[t("div",ql,[pe(t("img",Fl,null,512),[[R,e.getCoinIcon(e.buyCoin)]]),t("div",zl,$((V=e.buyCoin)==null?void 0:V.symbol),1)])]}),_:1}),e.defaultDirect?(a(),ee(x,{key:0,"has-change-direct":!0,"default-direct":e.defaultDirect,"left-text":"Price range","right-text":`${("addCommom"in e?e.addCommom:o(G))(e.direct?e.minPriceInput:e.minPriceInputResever)}~${("addCommom"in e?e.addCommom:o(G))(e.direct?e.maxPriceInput:e.maxPriceInputResever)} ${(_=e.sellCoin)==null?void 0:_.symbol} per ${(L=e.buyCoin)==null?void 0:L.symbol}`,onChangeDirect:n[0]||(n[0]=V=>{e.defaultDirect=V})},null,8,["default-direct","right-text"])):(a(),ee(x,{key:1,"left-text":"Price range","has-change-direct":!0,"default-direct":e.defaultDirect,"right-text":`${("addCommom"in e?e.addCommom:o(G))(e.direct?e.minPriceInputResever:e.minPriceInput)}~${("addCommom"in e?e.addCommom:o(G))(e.direct?e.maxPriceInputResever:e.maxPriceInput)} ${(H=e.buyCoin)==null?void 0:H.symbol} per ${(W=e.sellCoin)==null?void 0:W.symbol}`,onChangeDirect:n[1]||(n[1]=V=>{e.defaultDirect=V})},null,8,["default-direct","right-text"])),v(x,{"left-text":"Invest every","right-text":`${e.investInputValue>0?Number(e.investInputValue):""} ${e.currentTime}${e.investInputValue>1?"s":""}`},null,8,["right-text"]),v(x,{"left-text":"Start date","right-text":("timeFormatUTC"in e?e.timeFormatUTC:o(Qe))(Date.now(),"YMDHM")},null,8,["right-text"]),v(x,{"left-text":" Est. end date (UTC)","right-text":e.estEndDate},null,8,["right-text"]),v(x,{"left-text":"Platform fee","right-text":`${e.platformFee}%`},null,8,["right-text"])]),v(E,{class:"big-btn",onClick:n[2]||(n[2]=V=>e.$emit("openDcaOrder"))},{default:le(()=>[Ql]),_:1})])]}),_:1})}const Gl=he(Pl,[["render",Vl],["__scopeId","data-v-dbba33b8"]]),at=e=>(we("data-v-c3a4169e"),e=e(),De(),e),Kl={class:"dca-card"},Yl={class:"tab-box"},Jl={class:"tab-right"},Zl={class:"new-style-tooltip-text"},Xl={class:"icon-bg"},er=at(()=>t("use",{"xlink:href":"#icon-icon_kline"},null,-1)),tr=[er],ar={class:"new-style-tooltip-text"},or={class:"icon-bg icon-bg-order"},sr=at(()=>t("use",{"xlink:href":"#icon-icon_order"},null,-1)),nr=[sr],lr={class:"asset-card-box"},rr={key:0},ir={class:"price-range"},cr=at(()=>t("div",{class:"tit"},"Set Price Range",-1)),ur=at(()=>t("div",{class:"desc"}," DCA will only be executed if the price falls within the range of your pricing strategy. ",-1)),dr={key:0,class:"current-price"},vr=at(()=>t("div",{class:"text"},"Current Price",-1)),mr=de({__name:"dca-card",setup(e){const{$notify:n}=ra();ia();const c=We(),m=u(()=>c),d=C(!1),p=C([{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",hasBeta:!0}]),T=()=>{d.value=!0};kt();const x=Le(),E=u(()=>x),D=u(()=>E.value.chainName),R=u(()=>D.value?dt(D.value):{}),{setIsShowSuccess:k,setIsShowRejected:z,setIsShowWaiting:N,setTransactionDesc:ae,setTransactionTxid:Q}=x,{getDcaQuote:J,getDcaOpenOrderPayload:F,fetchDcaOrderList:j}=Ue(),_=C(!1),L=async()=>{d.value=!1,_.value=!0,Q(""),ae("Creating DCA Order"),N(!0);try{const U={inCoin:r.value,outCoin:y.value,inCoinAmount:X.value,ordersCount:te.value,minPrice:je.value?ve.value:1/me.value,maxPrce:je.value?me.value:1/ve.value,freq:Qt.value};console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-card.vue:150 ~ openDcaOrder ~ openOrderParams:",U);let I;const Z=await F(U),K=await R.value.signAndExecuteTransactionBlock(m.value.currentWallet,Z,{action:"DcaOpenOrder"});if(I=R.value.handleTx(K),I&&I.hash){Q(I.hash),N(!1),k(!0);const se={title:"DCA Order Created",desc:`DCA created for ${G(X.value)} ${r.value.symbol} to ${y.value.symbol} over ${te.value} orders`,hash:I.hash};se.res=I.res,R.value.showTransitionPending(se),await R.value.watchTransaction(se)&&(setTimeout(()=>{R.value.getAccount(m.value.address)},1e3),setTimeout(()=>{j(m.value.address)},3e3))}}catch(U){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-card.vue:179 ~ openDcaOrder ~ error:",String(U)),String(U)==="Error: Each order size should be higher than $10"&&n.error({icon:Oe("svg",{class:{icon:!0},"aria-hidden":!0},[Oe("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Oe("div",{class:"notification-title"},[Oe("span",{innerHTML:"Transaction Submission Error"},null)]),description:"Each order size should be higher than $10",duration:4.5,class:"ant-notification-copy ant-notification-error"}),String(U)==="Error: Request timed out"&&n.error({icon:Oe("svg",{class:{icon:!0},"aria-hidden":!0},[Oe("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Oe("div",{class:"notification-title"},[Oe("span",{innerHTML:"Request timed out"},null)]),description:"Please confirm the network status and resubmit the transaction.",duration:4.5,class:"ant-notification-copy ant-notification-error"}),String(U)==="Error: minPrice error"&&n.error({icon:Oe("svg",{class:{icon:!0},"aria-hidden":!0},[Oe("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Oe("div",{class:"notification-title"},[Oe("span",{innerHTML:"DCA order submission failed"},null)]),description:"Your nominated prices are out of scope. Please modify your accepted price range and submit it again.",duration:4.5,class:"ant-notification-copy ant-notification-error"}),String(U)!=="Error: Each order size should be higher than $10"&&String(U)!=="Error: Request timed out"&&String(U)!=="Error: minPrice error"&&z(!0),N(!1)}},H=u(()=>Sa()),W=u(()=>E.value.slippage),V=C(0),q=C(),g=C(),i=C(!1),s=async U=>{var I,Z,K,se,ie,ue,Y;console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-card.vue:275 ~ getAggregatorPrice ~ amountIn:",typeof U,U),i.value=!0,rt.value=!1;try{const fe=new ne(U).mul(Math.pow(10,(I=r==null?void 0:r.value)==null?void 0:I.decimals)).ceil().toString(),ye=new ga(fe),Pe=Number(W.value)/100,ke=V.value+1;V.value=ke;const b=await((Z=H==null?void 0:H.value)==null?void 0:Z.getFindRouter(r,y,ye.toString(),!0,Pe,"",ke));(!b||!(b!=null&&b.routes)||((K=b==null?void 0:b.routes)==null?void 0:K.length)==0)&&(rt.value=!0);const Ae=A(b.amountIn).div(ne.pow(10,(se=r==null?void 0:r.value)==null?void 0:se.decimals)),Re=A(b.amountOut).div(ne.pow(10,(ie=y==null?void 0:y.value)==null?void 0:ie.decimals));q.value=G($e(new ne(Ae).div(new ne(Re).toString()),(ue=r==null?void 0:r.value)==null?void 0:ue.decimals)),g.value=G($e(new ne(Re).div(Ae).toString(),(Y=y==null?void 0:y.value)==null?void 0:Y.decimals)),console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-card.vue:220 ~ getAggregatorPrice ~ oneFromAmount.value:",q.value,g.value)}catch(fe){q.value="",g.value="",console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-card.vue:224 ~ getAggregatorPrice ~ error:",fe)}i.value=!1};Ce(()=>[X.value,te.value,r.value,y.value],([U,I])=>{if(U&&I){const Z=A(U).div(I).toNumber();Z>0&&s(Z)}else q.value="",g.value=""},{immediate:!0});const S=Te(),B=u(()=>S),M=u(()=>B.value.isShowChart),h=u(()=>B.value.isShowOrder),oe=C(),O=C(20),f=C(0);Ye(()=>{X.value&&w()}),yt(()=>{clearInterval(oe.value),re.value=1,te.value="2",X.value="",ve.value="",me.value="",Ie.value="Hour",f.value=0});const w=()=>{oe.value=setInterval(()=>{f.value<O.value&&(i.value||(f.value+=1,f.value===O.value&&(X.value&&s(X.value),f.value=0)))},1e3)};return Ce(()=>je.value,(U,I)=>{var Z,K,se,ie;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-card.vue:390 ~ watch ~ minPriceInput.value&&maxPriceInput.value:",ve.value,me.value),ve.value&&me.value){const ue=ve.value,Y=me.value;ve.value=$e(A(1).div(Y).toString(),je.value?(Z=r==null?void 0:r.value)==null?void 0:Z.decimals:(K=y==null?void 0:y.value)==null?void 0:K.decimals),me.value=$e(A(1).div(ue).toString(),je.value?(se=r==null?void 0:r.value)==null?void 0:se.decimals:(ie=y==null?void 0:y.value)==null?void 0:ie.decimals)}},{immediate:!0}),(U,I)=>{var ke,b,Ae,Re,ge,Ne,Se;const Z=wt,K=Bn,se=wa,ie=Tt,ue=cl,Y=pl,fe=Tl,ye=Ct,Pe=Gl;return a(),l("div",Kl,[t("div",Yl,[v(Oa,{"trade-tab-list":p.value,"current-trade-tab":"DCA"},null,8,["trade-tab-list"]),t("div",Jl,[v(Z,{"overlay-class-name":"new-style-tooltip"},{title:le(()=>[t("div",Zl,$(M.value?"Hide reference price":"View reference price"),1)]),default:le(()=>[t("div",Xl,[(a(),l("svg",{class:be(["chart-icon",M.value?"active-chart-icon":""]),"aria-hidden":"true",onClick:I[0]||(I[0]=ce=>o(S).setIsShowChart(!M.value))},tr,2))])]),_:1}),v(Z,{"overlay-class-name":"new-style-tooltip"},{title:le(()=>[t("div",ar,$(h.value?"Hide Orders":"View Orders"),1)]),default:le(()=>[t("div",or,[(a(),l("svg",{class:be(["chart-icon",h.value?"active-chart-icon":""]),"aria-hidden":"true",onClick:I[1]||(I[1]=ce=>o(S).setIsShowOrder(!h.value))},nr,2))])]),_:1})])]),v(K),t("div",lr,[v(se,{modelValue:o(X),"onUpdate:modelValue":I[2]||(I[2]=ce=>ca(X)?X.value=ce:null),"input-value":o(X),havemax:!0,"coin-symbol":o(r)?(ke=o(r))==null?void 0:ke.symbol:null,"coin-name":o(r)?(b=o(r))==null?void 0:b.name:null,balance:o(Me),"coin-icon":o(r)?(Ae=o(r))==null?void 0:Ae.logo_url:"",address:o(r)?(Re=o(r))==null?void 0:Re.address:"",havehalf:!0,"has-arrow":!1,"is-dca-input":!0,onOnMax:I[3]||(I[3]=ce=>o(Ua)()),onOnHalf:I[4]||(I[4]=ce=>o(qa)()),onOnInput:I[5]||(I[5]=ce=>{X.value=ce})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),(ge=o(ft))!=null&&ge.status?(a(),l("div",rr,[v(ie,{tips:(Ne=o(ft))==null?void 0:Ne.tips},null,8,["tips"])])):P("",!0)]),v(ue),t("div",ir,[cr,ur,o(X)&&o(te)&&g.value&&q.value?(a(),l("div",dr,[vr,g.value&&q.value?(a(),ee(Y,{key:0,"from-coin":o(r),"to-coin":o(y),"one-to-amount":g.value,"one-from-amount":q.value,"is-get-price":i.value,direct:o(je),onChangeDirect:I[6]||(I[6]=ce=>{je.value=ce})},null,8,["from-coin","to-coin","one-to-amount","one-from-amount","is-get-price","direct"])):P("",!0)])):P("",!0)]),v(fe,{direct:o(je)},null,8,["direct"]),v(ye,{class:"big-btn",disabled:(Se=o(Nt))==null?void 0:Se.isDisabled,onClick:I[7]||(I[7]=ce=>m.value.connected?T():m.value.setIsShowWalletModal(!0))},{default:le(()=>{var ce;return[t("span",null,$((ce=o(Nt))==null?void 0:ce.text),1)]}),_:1},8,["disabled"]),d.value?(a(),ee(Pe,{key:0,onOpenDcaOrder:L,onClose:I[8]||(I[8]=()=>d.value=!1)})):P("",!0)])}}});const _r=he(mr,[["__scopeId","data-v-c3a4169e"]]),hr=e=>(we("data-v-383e15af"),e=e(),De(),e),fr={class:"dca-detail"},gr=hr(()=>t("div",{class:"head"},[t("div",{class:"tit"},"Details"),t("div",{class:"text"},"Your first invest cycle will begin immediately")],-1)),br={class:"info"},pr={class:"receive-text"},yr={alt:""},$r={class:"text"},Cr=de({__name:"dca-detail",setup(e){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-detail.vue:28 ~ currentTime:",Ie),(n,c)=>{var p,T,x,E;const m=xt,d=qe("image");return a(),l("div",fr,[gr,t("div",br,[v(m,{"left-text":"Sell total","right-text":`${o(G)(o(X),(p=o(r))==null?void 0:p.decimals)||"--"} ${((T=o(r))==null?void 0:T.symbol)||""}`},null,8,["right-text"]),v(m,{"left-text":"Sell per order","right-text":`${o(G)(o(vt),(x=o(r))==null?void 0:x.decimals)||"--"} ${((E=o(r))==null?void 0:E.symbol)||""}`},null,8,["right-text"]),v(m,{"left-text":"Receive","is-slot":!0},{"right-text":le(()=>{var D;return[t("div",pr,[pe(t("img",yr,null,512),[[d,o(He)(o(y))]]),t("div",$r,$((D=o(y))==null?void 0:D.symbol),1)])]}),_:1}),v(m,{"left-text":"Invest every","right-text":`${o(re)>0?Number(o(re)):""} ${o(Ie)}${o(re)>1?"s":""}`},null,8,["right-text"]),v(m,{"left-text":"Est. end date (UTC)","right-text":o(it)},null,8,["right-text"]),v(m,{"left-text":"Platform fee","right-text":`${o(St)}%`},null,8,["right-text"])])])}}});const kr=he(Cr,[["__scopeId","data-v-383e15af"]]),wr={class:"pc-order-list"},Dr={class:"right"},Sr={class:"h5-order-list"},Or=de({__name:"[id]",setup(e){const n=xa(),c=Le(),m=u(()=>c),{fetchDcaOrderList:d,getDcaGlobalConfig:p,getDcaQuoteConfig:T}=Ue(),x=We(),E=u(()=>x);Ye(()=>{p()});const{setDcaOrderListLoading:D,logOut:R}=Te();Ce(()=>E.value.address,q=>{q?d(q,!1):(D(!1),R())},{immediate:!0});const k=Te(),z=u(()=>k),N=u(()=>z.value.isShowOrder),ae=u(()=>z.value.isShowChart),Q=C(),J=C(20),{updateDcaOrderHistory:F,getDcaCoinWhiteList:j}=Ue(),_=()=>{Q.value=setInterval(()=>{ze.value<J.value&&(H.value||(ze.value+=1,ze.value===J.value&&(E.value.address&&d(E.value.address,!0),W.value&&!Ee(W.value)&&F(W.value),ze.value=0)))},1e3)},{setAutoRefreshOrderHistoryObj:L}=k,H=u(()=>z.value.dcaOrderListLoading),W=u(()=>z.value.autoRefreshOrderHistoryObj),V=u(()=>z.value.dcaConfig);return Ce(()=>V.value,q=>{q&&!Ee(q)&&j(q.whitelistMode)},{immediate:!0}),Ce(()=>m.value.theme,(q,g)=>{q!=="sui"&&n.selectSuiTheme()},{immediate:!0}),Ye(()=>{E.value.address&&_()}),yt(()=>{clearInterval(Q.value),L({},!0)}),(q,g)=>{const i=ao,s=qs,S=_r,B=kr;return a(),l("div",{class:be(["dca-container",!ae.value&&!N.value?"dca-container-center":""])},[t("div",{class:"chart-and-order",style:$t({background:ae.value?"":"#121212"})},[ae.value?(a(),ee(i,{key:0})):P("",!0),t("div",wr,[N.value?(a(),ee(s,{key:0})):P("",!0)])],4),t("div",Dr,[v(S),o(X)?(a(),ee(B,{key:0})):P("",!0)]),t("div",Sr,[N.value?(a(),ee(s,{key:0})):P("",!0)])],2)}}});const ni=he(Or,[["__scopeId","data-v-64000f52"]]);export{ni as default};
