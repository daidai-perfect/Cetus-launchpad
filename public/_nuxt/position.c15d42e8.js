import{_ as Ee}from"./upgrade-select-input.bb416c71.js";import{_ as Ve}from"./upgrade-loading.3501cb36.js";import{_ as He}from"./status-block.5ab5e1a0.js";import{h as me,a as Ge,u as ye,s as qe,f as z,b as g,k as We,g as Me,c as ue,e as h,D as ze,i as Je}from"./pool.a567b30c.js";import{a as he,l as ke,m as k,e as be,o as n,f as t,h as s,i as V,u as i,v as a,c as Re,w as ve,x as y,j as X,z as ne,G as Ke,p as ge,k as Ie,b as $e,r as U,D as M,y as Ne,q as Ze,t as T,F as Z,s as Q,S as Qe,C as Xe,N as Ye,V as xe,T as fe,B as es}from"./entry.ea57915f.js";/* empty css              */import{u as we,_ as Ue}from"./index.4cb2b268.js";/* empty css              */import{i as te}from"./import-icon.de3e6c66.js";import{_ as Se}from"./icon-arrow_2x.948aedb2.js";import{_ as Ce}from"./icon-arrow_2x.4ffddb8e.js";import{u as ss}from"./notifi.70d0b7dc.js";import{_ as Ae}from"./icon_on_2x.5e96733d.js";import{_ as os,a as as}from"./img-no-Positions_2x.69a95868.js";import{_ as ns,a as ts}from"./img-connect-wallet_2x.782bc5d0.js";import"./coin-select.49459360.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const rs=he({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(e){const{t:b}=ke(),L=we(),S=k(()=>L),I=k(()=>S.value.chainName);console.log(e.pItem,"pItempItem121221");const j=k(()=>Ue[I.value]);return{getExplorerUrl:me,store:S,config:j,t:b}}});const Oe=e=>(ge("data-v-11d29c4d"),e=e(),Ie(),e),is={class:"status-block-box"},ds={key:0,class:"owner-addres"},ls=["href"],ms=["href"],us={class:"copy-link"},ps=Oe(()=>s("use",{"xlink:href":"#icon-icon-copy"},null,-1)),cs=["href"],vs=Oe(()=>s("svg",{class:"icon","aria-hidden":"true"},[X(" > "),s("use",{"xlink:href":"#icon-icon-link"})],-1)),hs=[vs];function ks(e,b,L,S,I,j){const R=He,p=Ke;return n(),t("div",{class:ne(["position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[s("div",is,[V(R,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"])]),e.pItem.tokenName?(n(),t("div",ds,[e.pItem.tokenName.length<=24?(n(),t("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:i(me))("nftAddress",e.pItem.nftHash),target:"_blank"},a(e.pItem.tokenName.split("|")[1]),9,ls)):(n(),Re(p,{key:1,placement:"bottom","arrow-point-at-center":""},{title:ve(()=>[s("span",null,a(e.pItem.tokenName),1)]),default:ve(()=>[s("a",{target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:i(me))("nftAddress",e.pItem.nftHash)},a(e.pItem.tokenName.substr(0,4))+" ... "+a(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,ms)]),_:1}))])):y("",!0),s("div",us,[(n(),t("svg",{class:"icon","aria-hidden":"true",onClick:b[0]||(b[0]=v=>e.store.copy(e.pItem.nftHash))},[X(" > "),ps])),e.pItem.tokenName.length<=24?(n(),t("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:i(me))("nftAddress",e.pItem.nftHash),target:"_blank"},hs,8,cs)):y("",!0)])],2)}const bs=be(rs,[["render",ks],["__scopeId","data-v-11d29c4d"]]),gs=he({props:{pItem:{type:Object,required:!0}},setup(e){const{t:b}=ke(),L=$e(),S=we(),I=k(()=>S),j=k(()=>I.value.chainName?Ge(I.value.chainName):{}),R=ye(),p=k(()=>R),v=()=>{I.value.chainName==="Aptos"?L.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):L.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},C=k(()=>p.value.allTokenObj&&e.pItem.token_a.address&&p.value.allTokenObj[e.pItem.token_a.address]&&p.value.allTokenObj[e.pItem.token_a.address].logo_url),o=k(()=>p.value.allTokenObj&&e.pItem.token_b.address&&p.value.allTokenObj[e.pItem.token_b.address]&&p.value.allTokenObj[e.pItem.token_b.address].logo_url),H=k(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feeOwed),B=k(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feesResult),Y=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarder),G=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),x=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),J=U(0),pe=U();M(()=>p.value.RATES,l=>{l&&(pe.value=l)},{immediate:!0});const re=l=>{var N;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((N=p.value.tokensObj[l==null?void 0:l.address])==null?void 0:N.logo_url)||(I.value.theme==="default"?te("/image/coins/unknown.png"):te("/image/coins/sui-unknown.png"))},ee=k(()=>p.value.tokensObj);Ne(()=>{ce(e.pItem),q(e.pItem.minPrice,e.pItem.maxPrice)});const se=U("--"),q=(l,N)=>{l!=="0"&&N!=="∞"?se.value=qe(1/(1-Number((l/N)**.25)),2)+"x":se.value=1},$=U(30),_=U(null),ce=async l=>{var P,F,W;let N;e.pItem.needReverse?N=!1:N=!0;const A=N?Number(e.pItem.minPrice):e.pItem.maxPrice=="∞"?1/2**50:1/Number(e.pItem.maxPrice),O=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:N?Number(e.pItem.maxPrice):1/Number(e.pItem.minPrice);let f=[];f=I.value&&I.value.addressHistTokens&&I.value.addressHistTokens[l.poolAddress]&&I.value.addressHistTokens[l.poolAddress].data&&I.value.addressHistTokens[l.poolAddress].data.length>0&&Object.fromEntries(I.value.addressHistTokens[l.poolAddress].data.map(E=>[E.key,E.value]));const K=Number(Number($.value==7?f.before_7_d_contract_price_lowest:$.value==24?f.before_24_h_contract_price_lowest:f.before_30_d_contract_price_lowest)),d=Number(Number($.value==7?f.before_7_d_contract_price_highest:$.value==24?f.before_24_h_contract_price_highest:f.before_30_d_contract_price_highest)),r=p.value.tokensObj,m=await j.value.getEstPositionAPRWithMulti(A,O,K,d),c=Number(m.toString()),u=I.value.newTopPoolsObj[l.poolAddress];let w;if(u){$.value==7?w=u.apr_7day?Number(u.apr_7day.substring(0,u.apr_7day.length-1)):0:$.value==24?w=u.apr_24h?Number(u.apr_24h.substring(0,u.apr_24h.length-1)):0:w=u.apr_30day?Number(u.apr_30day.substring(0,u.apr_30day.length-1)):0;const E=u.rewarder_apr[0]?Number(u.rewarder_apr[0].substring(0,u.rewarder_apr[0].length-1)):0,De=u.rewarder_apr[1]?Number(u.rewarder_apr[1].substring(0,u.rewarder_apr[1].length-1)):0,Le=u.rewarder_apr[2]?Number(u.rewarder_apr[2].substring(0,u.rewarder_apr[2].length-1)):0,oe=Number(c*w),ie=Number(c*E),de=Number(c*De),le=Number(c*Le),ae=oe+(l.rewarder_display1?ie:0)+(l.rewarder_display2?de:0)+(l.rewarder_display3?le:0),je=l.rewarder_infos[0]?(P=r[l.rewarder_infos[0].coinAddress])==null?void 0:P.symbol:"--",Te=l.rewarder_infos[1]?(F=r[l.rewarder_infos[1].coinAddress])==null?void 0:F.symbol:"--",Be=l.rewarder_infos[2]?(W=r[l.rewarder_infos[2].coinAddress])==null?void 0:W.symbol:"--",Fe={aprFee:oe==1/0||isNaN(oe)?0:oe,rewardAprList:[{rewarder_name:je,rewarder_apr:ie==1/0||isNaN(ie)?0:ie,styleName:"one",rewarder_display:l.rewarder_display1},{rewarder_name:Te,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"two",rewarder_display:l.rewarder_display2},{rewarder_name:Be,rewarder_apr:le==1/0||isNaN(le)?0:le,styleName:"three",rewarder_display:l.rewarder_display2}],aprPercentageTotal:ae==1/0||isNaN(ae)||ae===0?0:ae,aprPercentage:z(oe/ae,2),is_display_rewarder:l.is_display_rewarder};_.value=Fe}};return{aprNum:k(()=>{var l,N,A,O,f,K,d,r,m,c,u,w;return _.value?_.value.is_display_rewarder?(l=_.value)!=null&&l.aprPercentageTotal?((N=_.value)==null?void 0:N.aprPercentageTotal)>1e4?">10,000":((A=_.value)==null?void 0:A.aprPercentageTotal)<.01&&((O=_.value)==null?void 0:O.aprPercentageTotal)>0?"<0.01":z((f=_.value)==null?void 0:f.aprPercentageTotal,2):(K=_.value)!=null&&K.rewardAprList?"0":"--":(d=_.value)!=null&&d.aprFee?((r=_.value)==null?void 0:r.aprFee)>1e4?">10,000":((m=_.value)==null?void 0:m.aprFee)<.01&&((c=_.value)==null?void 0:c.aprFee)>0?"<0.01":g((u=_.value)==null?void 0:u.aprFee,2):(w=_.value)!=null&&w.rewardAprList?"0":"--":"--"}),lever:se,tokensObj:ee,showNum:We,fromCoinUrl:C,toCoinUrl:o,decimalFormat:Me,clickDetails:v,t:b,addCommom:g,importIcon:te,router:L,store:I,pendingRewarder:Y,pendingFees:H,pendingRewarderArr:x,pendingFeesArr:B,checkNullObj:ue,fixD:z,decimalUi:h,pendingRewarderView:G,aprAmount:J,getCoinIcon:re,Decimal:ze}}});const D=e=>(ge("data-v-778aced7"),e=e(),Ie(),e),Is={class:"upgrade-position-item"},ws={class:"card-content"},_s={class:"left"},fs={class:"top card-header"},ys={class:"token-item"},Rs={class:"item"},$s={key:0,class:"token-warning"},Ns={class:"item"},Us={key:0,class:"token-warning"},Ss={class:"card-header-right"},Cs={class:"item"},As=D(()=>s("span",null,"Leverage",-1)),Os={class:"item"},Ps=D(()=>s("span",null,"Estimated APR",-1)),Ds=D(()=>s("div",{class:"more-img"},null,-1)),Ls={class:"bottom"},js={class:"info-block-container"},Ts={class:"info-block"},Bs=D(()=>s("div",{class:"leabl"},"Fee",-1)),Fs={class:"text"},Es={class:"info-block"},Vs=D(()=>s("div",{class:"leabl"},"Price range",-1)),Hs={class:"text"},Gs={class:"min-and-max"},qs={class:"text"},Ws={key:0,src:Se,alt:""},Ms={key:1,src:Ce,alt:""},zs={class:"text"},Js={class:"leabl"},Ks={class:"text"},Zs={key:0,class:"hover-rewarder"},Qs={class:"rewarder-info"},Xs={class:"left-rewarder"},Ys={alt:""},xs={class:"right-rewarder"},eo={class:"amount"},so={key:0,class:"amount-usd"},oo={key:1,class:"amount-usd"},ao={class:"rewarder-info"},no={class:"left-rewarder"},to={alt:""},ro={class:"right-rewarder"},io={class:"amount"},lo={key:0,class:"amount-usd"},mo={key:1,class:"amount-usd"},uo={class:"leabl"},po={key:0,class:"text"},co={key:1,class:"text"},vo={key:2,class:"text"},ho={key:3,class:"hover-rewarder"},ko={class:"left-rewarder"},bo={alt:""},go={class:"right-rewarder"},Io={class:"amount"},wo={class:"amount-usd"},_o={class:"leabl"},fo={key:0,class:"text"},yo={key:1,class:"text"},Ro={key:2,class:"hover-rewarder"},$o={class:"left-rewarder"},No={alt:""},Uo={class:"right-rewarder"},So={class:"amount"},Co={class:"amount-usd"},Ao={class:"h5-bottom"},Oo={class:"item"},Po=D(()=>s("span",null,"Leverage",-1)),Do={class:"item"},Lo=D(()=>s("span",null,"Estimated APR",-1)),jo=D(()=>s("div",{class:"more-img"},null,-1)),To={class:"info"},Bo={class:"info-item"},Fo=D(()=>s("div",{class:"left"},"Fee",-1)),Eo={class:"right"},Vo={class:"info-item range-item"},Ho={class:"left"},Go={class:"right"},qo={class:"min-and-max"},Wo={class:"text"},Mo={key:0,src:Se,alt:""},zo={key:1,src:Ce,alt:""},Jo={class:"text"},Ko={class:"info-item"},Zo=D(()=>s("div",{class:"left"},"Liquidity",-1)),Qo={class:"right"},Xo={key:0,class:"hover-rewarder"},Yo={class:"rewarder-info"},xo={class:"left-rewarder"},ea={alt:""},sa={class:"right-rewarder"},oa={class:"amount"},aa={key:0,class:"amount-usd"},na={key:1,class:"amount-usd"},ta={class:"rewarder-info"},ra={class:"left-rewarder"},ia={alt:""},da={class:"right-rewarder"},la={class:"amount"},ma={key:0,class:"amount-usd"},ua={key:1,class:"amount-usd"},pa={class:"info-item"},ca=D(()=>s("div",{class:"left"},"Pending Fees",-1)),va={key:0,class:"right"},ha={key:1,class:"right"},ka={key:2,class:"right"},ba={key:3,class:"hover-rewarder"},ga={class:"left-rewarder"},Ia={alt:""},wa={class:"right-rewarder"},_a={class:"amount"},fa={class:"amount-usd"},ya={key:0,class:"info-item"},Ra={class:"left"},$a={key:0,class:"right"},Na={key:1,class:"right"},Ua={key:2,class:"hover-rewarder"},Sa={class:"left-rewarder"},Ca={alt:""},Aa={class:"right-rewarder"},Oa={class:"amount"},Pa={class:"amount-usd"};function Da(e,b,L,S,I,j){var C;const R=bs,p=Qe,v=Ze("image");return n(),t("div",Is,[s("div",ws,[s("div",_s,[V(R,{"p-item":e.pItem,"current-status":((C=e.pItem)==null?void 0:C.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:b[0]||(b[0]=(...o)=>e.clickDetails&&e.clickDetails(...o))},[s("div",fs,[s("div",ys,[s("div",Rs,[s("div",null,[T(s("img",null,null,512),[[v,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(n(),t("div",$s)):y("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,a(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+a(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)]),s("div",Ns,[s("div",null,[T(s("img",null,null,512),[[v,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(n(),t("div",Us)):y("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,a(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+a(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])]),s("div",Ss,[s("div",Cs,[s("p",null,a(e.lever),1),As]),s("div",Os,[s("p",null,a(e.aprNum)+"%",1),Ps]),Ds])]),s("div",Ls,[s("div",js,[s("div",Ts,[Bs,s("div",Fs,a(e.pItem.fee*100)+"%",1)]),s("div",Es,[Vs,s("div",Hs,[s("div",Gs,[s("div",qs,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(n(),t("img",Ws)):(n(),t("img",Ms)),s("div",zs,[X(a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(e.pItem.maxPrice,6)))+" ",1),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])])]),s("div",{class:ne(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",Js,a(e.$t("common.liquidity")),1),s("div",Ks," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:i(g))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",Zs,[s("div",Qs,[s("div",Xs,[T(s("img",Ys,null,512),[[v,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",xs,[s("div",eo,a(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(h))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:i(h))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",oo,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:i(z))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",so,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:i(z))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",ao,[s("div",no,[T(s("img",to,null,512),[[v,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",ro,[s("div",io,a(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(h))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:i(h))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",mo,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:i(h))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",lo,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:i(h))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):y("",!0)],2),s("div",{class:ne(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",uo,a(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(n(),t("div",po,"$ --")):isNaN(e.pendingFees)?(n(),t("div",vo,[V(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",co,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:i(g))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",ho,[(n(!0),t(Z,null,Q(e.pendingFeesArr,o=>(n(),t("div",{key:o,class:"rewarder-info"},[s("div",ko,[T(s("img",bo,null,512),[[v,e.getCoinIcon(o)]]),s("span",null,a(o.symbol),1)]),s("div",go,[s("div",Io,a(Number(o.amount)==0?0:Number(o.amount)>1e-6?("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(o.amount,o.decimals),o.decimals):"<0.000001"),1),s("div",wo,a(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i(g))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:i(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",{key:0,class:ne(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",_o,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",fo," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",yo,[V(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(n(),t("div",Ro,[(n(!0),t(Z,null,Q(e.pendingRewarderArr,o=>(n(),t("div",{key:o,class:"rewarder-info"},[s("div",$o,[T(s("img",No,null,512),[[v,o.logoURI]]),s("span",null,a(o.symbol),1)]),s("div",Uo,[s("div",So,a(("decimalUi"in e?e.decimalUi:i(h))(o.amount,o.decimals)),1),s("div",Co,a(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i(g))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)],2)):y("",!0)])])])]),s("div",Ao,[s("div",{class:"card-header-right",onClick:b[1]||(b[1]=(...o)=>e.clickDetails&&e.clickDetails(...o))},[s("div",Oo,[s("p",null,a(e.lever),1),Po]),s("div",Do,[s("p",null,a(e.aprNum)+"%",1),Lo]),jo]),s("div",To,[s("div",Bo,[Fo,s("div",Eo,a(e.pItem.fee*100)+"%",1)]),s("div",Vo,[s("div",Ho,[X("Price range ("),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",Go,[s("div",qo,[s("div",Wo,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(n(),t("img",Mo)):(n(),t("img",zo)),s("div",Jo,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(e.pItem.maxPrice,6))),1)])])]),s("div",Ko,[Zo,s("div",Qo," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:i(g))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",Xo,[s("div",Yo,[s("div",xo,[T(s("img",ea,null,512),[[v,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",sa,[s("div",oa,a(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(h))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:i(h))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",na,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:i(z))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",aa,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:i(z))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",ta,[s("div",ra,[T(s("img",ia,null,512),[[v,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",da,[s("div",la,a(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(h))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:i(h))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",ua,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:i(h))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",ma,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:i(h))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):y("",!0)]),s("div",pa,[ca,e.pendingFees==="--"?(n(),t("div",va,"$ --")):isNaN(e.pendingFees)?(n(),t("div",ka,[V(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",ha,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:i(g))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",ba,[(n(!0),t(Z,null,Q(e.pendingFeesArr,o=>(n(),t("div",{key:o,class:"rewarder-info"},[s("div",ga,[T(s("img",Ia,null,512),[[v,e.getCoinIcon(o)]]),s("span",null,a(o.symbol),1)]),s("div",wa,[s("div",_a,a(Number(o.amount)==0?0:Number(o.amount)>1e-6?("addCommom"in e?e.addCommom:i(g))(("decimalUi"in e?e.decimalUi:i(h))(o.amount,o.decimals),o.decimals):"<0.000001"),1),s("div",fa,a(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i(g))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:i(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",ya,[s("div",Ra,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",$a," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",Na,[V(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(n(),t("div",Ua,[(n(!0),t(Z,null,Q(e.pendingRewarderArr,o=>(n(),t("div",{key:o,class:"rewarder-info"},[s("div",Sa,[T(s("img",Ca,null,512),[[v,o.logoURI]]),s("span",null,a(o.symbol),1)]),s("div",Aa,[s("div",Oa,a(("decimalUi"in e?e.decimalUi:i(h))(o.amount,o.decimals)),1),s("div",Pa,a(Number(o.amountUSD)==0?"$0":Number(o.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i(g))(o.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)])):y("",!0)])])])}const La=be(gs,[["render",Da],["__scopeId","data-v-778aced7"]]),ja=he({setup(){const e=U(!1),{t:b}=ke(),L=U(["position"]),S=$e(),I=U(""),j=we(),R=k(()=>j),p=k(()=>R.value.chainName?Ue[R.value.chainName]:{});let v=U([]);const C=ye(),o=k(()=>C),H=Je(),B=k(()=>H),Y=U(!1),G=U(b("tab.all")),x=U([b("tab.layerZero"),b("tab.wormhole"),b("tab.celer")]),J=U(!0),pe=U("TVL"),re=()=>{e.value=!0,v.value=[],B.value.address&&C.getMyPositons(B.value.address,o.value.poolsObj,R.value.chainName),setTimeout(()=>{e.value=!1},1e3)};M(()=>R.value.isRefresh,d=>{var r;d&&((r=S==null?void 0:S.currentRoute)==null?void 0:r.value.name.split("-")[1])=="position"&&re()}),Ne(()=>{v.value=[],document.addEventListener("click",()=>{Y.value=!1}),C.setMyPositionsLoading(!0)}),Xe(()=>{document.addEventListener("click",()=>{Y.value=!1})}),Ye(()=>{B.value.connected||(v.value=[])});const ee=()=>{e.value=!0;let d=[];o.value.myPositions.forEach(r=>{var P,F,W,E;let m,c;const u=r.amountA*((P=o.value.RATES[r.token_a.address])==null?void 0:P.price),w=r.amountB*((F=o.value.RATES[r.token_b.address])==null?void 0:F.price);(W=o.value.RATES[r.token_a.address])!=null&&W.price&&((E=o.value.RATES[r.token_b.address])!=null&&E.price)?(m=u+w,c=u+w):(m=" --",c=0),d.push({...r,amountUSD:m,amountUSDOrigin:c,tokenARates:u,tokenBRates:w})}),G.value!="All"?J.value?(v.value=d.sort((r,m)=>Number(m.amountUSDOrigin)-Number(r.amountUSDOrigin)),e.value=!1):(v.value=d.sort((r,m)=>Number(r.amountUSDOrigin)-Number(m.amountUSDOrigin)),e.value=!1):J.value?(v.value=d.sort((r,m)=>m.amountUSDOrigin-r.amountUSDOrigin),e.value=!1):(v.value=d.sort((r,m)=>r.amountUSDOrigin-m.amountUSDOrigin),e.value=!1),console.log(v.value,"list.value========>")};M(()=>[o.value.myPositions,o.value.RATES],([d,r])=>{d&&r&&ee()},{immediate:!0}),M(()=>[B.value.address,o.value.poolConfigList,o.value.poolsObj,R.value.chainName],([d,r,m,c])=>{var u,w,P;d&&r&&r.length>0&&c&&(c!=null&&c.toLowerCase().includes((u=r[0])==null?void 0:u.chain))&&!ue(m)&&(c==="Aptos"?r.length===Object.values(m).length:(P=(w=Object.values(m)[0])==null?void 0:w.chain)!=null&&P.includes("sui"))&&C.getMyPositons(B.value.address,m,c)},{immediate:!0,deep:!0}),M(()=>G.value,d=>{ee()}),M(()=>J.value,d=>{ee()});const se=d=>{const r=[];x.value.forEach((m,c)=>{m==d?r[c]=G.value:r[c]=m}),x.value=r,G.value=d},q=ss(),$=k(()=>q),_=k(()=>C),ce=async d=>{await q.getSourceGroups();const r=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let m=0;m<r.length;m++){const{pool_address:c,position_index:u}=JSON.parse(r[m].blockchainAddress);let w=!1,P;for(let F=0;F<d.length;F++){const{poolAddress:W,index:E}=d[F];c==W&&Number(E)==Number(u)&&(w=!0),P={pool_address:c,position_index:u}}w||await q.subscribePosition(P,"",!1,!1)}},_e=async()=>{await q.getSourceGroups();const d=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let r=0;r<d.length;r++){const{pool_address:m,position_index:c}=JSON.parse(d[r].blockchainAddress),{name:u}=d[r],w={pool_address:m,position_index:c};await q.subscribePosition(w,u,!1,!1)}},l=k(()=>_.value.myPositionsLoading);M(()=>_.value.myPositions,(d,r)=>{p.value.hasNotifi&&(d&&d.length>0&&r&&r.length!==d.length?ce(d):d&&d.length==0&&!l.value&&_e())},{immediate:!0});const N=d=>{var r;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((r=o.value.tokensObj[d==null?void 0:d.address])==null?void 0:r.logo_url)||(R.value.theme==="default"?te("/image/coins/unknown.png"):te("/image/coins/sui-unknown.png"))},A=U(null),O=k(()=>A.value&&A.value.firstToken?A.value.firstToken:null),f=k(()=>A.value&&A.value.lastToken?A.value.lastToken:null),K=k(()=>{let d=[];d=v.value;const r=d.filter((m,c)=>O.value&&f.value?m.coinA.symbol.toLowerCase().includes(O.value.symbol.toLowerCase())&&m.coinB.symbol.toLowerCase().includes(f.value.symbol.toLowerCase())||m.coinA.symbol.toLowerCase().includes(f.value.symbol.toLowerCase())&&m.coinB.symbol.toLowerCase().includes(O.value.symbol.toLowerCase()):O.value?m.coinA.symbol.toLowerCase().includes(O.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(O.value.symbol.toLowerCase()):f.value?m.coinA.symbol.toLowerCase().includes(f.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(f.value.symbol.toLowerCase()):d);return o.value.myPositionsLoading||j.setPositiomAmount(r.length),r});return xe(()=>{j.setPositiomAmount("--")}),{showList:K,childTokenSelectRef:A,firstToken:O,lastToken:f,getCoinIcon:N,changeSortLabel:se,label:Y,labelList:x,labelValue:G,select:J,selectValue:pe,t:b,pools:o,store:R,wallet:B,list:v,clickRefresh:re,refresh:e,current:L,router:S,searchKey:I}}});const Pe=e=>(ge("data-v-70871030"),e=e(),Ie(),e),Ta={class:"upgrade-position-list-container"},Ba={class:"content-top"},Fa={class:"content-top-left"},Ea={class:"content-top-right"},Va={class:"value"},Ha=Pe(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ga=[Ha],qa={key:0,class:"select-item"},Wa=["onClick"],Ma={class:"search-select-box"},za=Pe(()=>s("span",null,"TVL",-1)),Ja={key:0,src:Ae,alt:""},Ka={key:1,class:"fan-img",src:Ae,alt:""},Za={key:0,class:"upgrade-loading"},Qa={key:1,class:"position-list"},Xa={key:2,class:"no-data"},Ya={key:0,src:os,alt:""},xa={key:1,src:as,alt:""},en={key:3,class:"no-data"},sn={key:0,src:ns,alt:""},on={key:1,src:ts,alt:""};function an(e,b,L,S,I,j){const R=Ee,p=Ve,v=La,C=es;return n(),t("div",Ta,[s("div",Ba,[s("div",Fa,[V(R,{ref:"childTokenSelectRef"},null,512)]),s("div",Ea,[e.store.theme=="default"?(n(),t("div",{key:0,class:"search-label",onClick:b[0]||(b[0]=fe(o=>e.label=!e.label,["stop"]))},[s("span",null,a(e.$t("newAdd.label")),1),s("div",Va,a(e.labelValue),1),(n(),t("svg",{"aria-hidden":"true",class:ne(e.label?"show-icon icon":"icon")},Ga,2)),e.label?(n(),t("div",qa,[(n(!0),t(Z,null,Q(e.labelList,(o,H)=>(n(),t("div",{key:H,class:"select-menu-item",onClick:B=>e.changeSortLabel(o)},a(o),9,Wa))),128))])):y("",!0)])):y("",!0),s("div",Ma,[s("div",{class:"search-select",onClick:b[1]||(b[1]=fe(o=>e.select=!e.select,["stop"]))},[X(a(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[za,e.select?(n(),t("img",Ja)):(n(),t("img",Ka))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",Za,[V(p,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):y("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),t("div",Qa,[(n(!0),t(Z,null,Q(e.showList,(o,H)=>(n(),Re(v,{key:H,"p-item":o},null,8,["p-item"]))),128))])):y("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",Xa,[e.store.theme=="default"?(n(),t("img",Ya)):(n(),t("img",xa)),s("span",null,a(e.$t("common.noLiquidityPositions")),1)])):y("",!0),e.wallet.connected?y("",!0):(n(),t("div",en,[e.store.theme=="default"?(n(),t("img",sn)):(n(),t("img",on)),V(C,{class:"connect-wallet",onClick:b[2]||(b[2]=o=>e.wallet.setIsShowWalletModal(!0))},{default:ve(()=>[X(a(e.$t("button.connectWallet")),1)]),_:1})]))])}const Rn=be(ja,[["render",an],["__scopeId","data-v-70871030"]]);export{Rn as default};
