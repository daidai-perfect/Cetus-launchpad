import{_ as ca}from"./refresh-icon.d563a57a.js";import{_ as pa}from"./assets-card.cb1846f2.js";import{_ as fa,a as ga,b as wa}from"./new-swap-confirm.78a54137.js";import{_ as Ca}from"./network-tips.bde923e4.js";import{_ as ha}from"./coin-select.820658b8.js";import{_ as ba}from"./swap-setting.83470d3c.js";import{_ as Sa}from"./token-warning-modal.15025ce1.js";import{a as Aa,u as ka,N as ya,l as ao,e as Ia,d as le,f as B,s as _e,c as Re,b as Na,p as Io,k as ke,O as No}from"./pool.bc7b9a37.js";import{a as Ta,b as Oa,a3 as Ma,a4 as Ra,l as Fa,m as y,r as v,y as Ua,C as $a,D as _,a8 as To,e as La,M as xe,q as Ba,o as C,f as T,h as m,F as eo,s as Pa,j as Ce,v as U,i as x,w as ne,x as R,z,c as L,t as De,u as se,L as ja,J as Ea,B as qa,p as Da,k as Wa,W as Ha,S as za}from"./entry.8a717f77.js";import"./index.5b44d27d.js";/* empty css              *//* empty css              *//* empty css              */import{i as oo}from"./import-icon.de3e6c66.js";import{u as Ja,c as ce,b as We}from"./index.601bad75.js";import"./decimal.a2826370.js";import{A as Ka,R as Ga,c as Fe,u as Qa}from"./confetti.module.47b396eb.js";import{V as Va}from"./vesrion-beta.8521d344.js";import{D as p}from"./decimal.765d8738.js";import{_ as Xa}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.ef52baec.js";/* empty css              */import"./useDebounceFunction.d716b9ab.js";import"./install.793d3f05.js";import"./token-warning_2x.3b853c19.js";import"./img-no-Positions_2x.4e567c5d.js";import"./img-no-Positions_2x.a8fa131c.js";import"./icon-error_2x.6f15e478.js";import"./icon-selected_3x.09e9a6f0.js";import"./coin-img.57ce3dd8.js";const Ya=Ta({components:{AggregatorSettingModal:Ka,VesrionBeta:Va,RouterModal:Ga},setup(){const e=Oa(),g=Ma(Ra,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:Q,locale:Oo}=Fa(),D=Aa(),ye=ka(),t=y(()=>ye);let Ie=v(!1),J=v(!0),He=v(!1),Ue=v(!1),ze=v(!1),ee=v(!1);const te=v("fromCoin"),Ne=v(""),Te=v(""),$e=v(!1),c=v(!0),Oe=v(!1),N=v(!1),V=v(!1),u=v(""),i=v(""),ue=v(20),j=v(0),pe=v(null),w=v(!1),he=y(()=>D.slippage),S=y(()=>D.chainName),E=y(()=>S.value?Na(S.value):{}),oe=y(()=>Qa()),n=v(),s=v(),Je=y(()=>ce&&ce[S.value]&&ce[S.value].hasRouter),no=y(()=>ye.getPoolInfoSuccess),Mo=y(()=>{var o;return h.value&&((o=h.value)!=null&&o.is_pause)?"Pool Closed":!n.value||!s.value?Q("modal.selectTokenModalTitle"):!Number(u.value)&&!Number(i.value)?Q("button.enterAmount"):!Je.value&&!h.value&&no.value?"Pool Not Found":Je.value&&Se.value?"No Available Route":w.value?Q("button.insufficientLiquidity"):Number(u.value)>Number(H.value)?Q("button.insufficientBalance",{name:n.value.symbol}):Q("button.swap")}),Ro=o=>{var l,a,f,d;te.value=o,o==="fromCoin"?(Ne.value=((l=s.value)==null?void 0:l.address)||"",Te.value=((a=n.value)==null?void 0:a.address)||""):(Ne.value=((f=n.value)==null?void 0:f.address)||"",Te.value=((d=s.value)==null?void 0:d.address)||""),$e.value=!0},Ke=v({}),Ge=v({}),Fo=o=>{te.value==="fromCoin"?(Ke.value=o,Ve(o)):(Ge.value=o,Ve(o))},Uo=o=>{o==="fromCoin"?(c.value=!0,S.value==="Aptos"?u.value=H.value>0?n.value.symbol=="APT"?new p(Number(H.value)).sub(new p(.1)).lt(new p(0))?"0":new p(Number(H.value)).sub(new p(.1)).toString():String(H.value):"":u.value=H.value>0?n.value.symbol=="SUI"?new p(Number(H.value)).sub(new p(.05)).lt(new p(0))?"0":new p(Number(H.value)).sub(new p(.05)).toString():String(H.value):""):(c.value=!1,S.value==="Aptos"?i.value=K.value>0?s.value.symbol=="APT"?new p(Number(K.value)).sub(new p(.1)).lt(new p(0))?"0":new p(Number(K.value)).sub(new p(.1)).toString():String(K.value):"":i.value=K.value>0?s.value.symbol=="SUI"?new p(Number(K.value)).sub(new p(.05)).lt(new p(0))?"0":new p(Number(K.value)).sub(new p(.05)).toString():String(K.value):"")},$o=o=>{o==="fromCoin"?(c.value=!0,u.value=H.value>0?_e(new p(Number(H.value)).div(2).toString(),n.value.decimals).toString():""):(c.value=!1,i.value=K.value>0?_e(new p(Number(K.value)).div(2).toString(),s.value.decimals).toString():"")},Qe=v(!1);Ua(()=>{so(),window.addEventListener("updateSwapParams",o=>{Qe.value=!Qe.value})}),$a(()=>{clearInterval(pe.value)}),y(()=>D);const Le=()=>{var o,l,a,f,d;console.log("ðŸš€ ~ file: swap-sui.vue:785 ~ clickRefresh ~:"),!J.value&&(!h.value&&!Je.value||(clearInterval(pe.value),j.value=0,J.value=!0,X.value||we(c.value?u.value:i.value),W.value.address&&E.value.getAccount(W.value.address),setTimeout(()=>{J.value=!1,so()},1e3),console.log("ðŸš€ ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES11111:",(o=t==null?void 0:t.value)==null?void 0:o.RATES),(!((l=t==null?void 0:t.value)!=null&&l.RATES)||Re((a=t==null?void 0:t.value)==null?void 0:a.RATES))&&(console.log("ðŸš€ ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES2222:",(f=t==null?void 0:t.value)==null?void 0:f.RATES),(d=t==null?void 0:t.value)==null||d.setRates("Sui"))))};console.log("ðŸš€ ~ file: swap-sui.vue:811 ~ clickRefresh ~ clickRefresh:",Le);const so=()=>{pe.value=setInterval(()=>{J.value=!1,Oe.value||j.value<ue.value&&(j.value+=1,j.value===ue.value&&(S.value=="Aptos"?(h.value&&h.value.poolAddress&&ye.updateCurrentPools(h.value.poolAddress,S.value),Le()):ee.value||Le(),j.value=0,J.value=!0))},1e3)};_(c,To((o,l)=>{c.value=o},500));const ae=v(!1);_(u,(o,l)=>{o&&o!==0&&c.value&&(j.value=0,qe(we(o),800)),o==""&&c.value&&(i.value="")}),_(i,(o,l)=>{o&&o!==0&&!c.value&&(j.value=0,qe(we(o),800)),o==""&&!c.value&&(u.value="")});const Be=v(1e-4),Pe=async o=>{let l=o;if(S.value==="Aptos"&&!l.current_sqrt_price&&u.value&&i.value){const a=await E.value.getPools([l.address]);a&&a[0]&&(l={...o,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(l.current_sqrt_price&&u.value&&i.value){const f=(n.value.address===l.coinA.address&&s.value.address===l.coinB.address?0:1)==0,d=new p(u.value),b=new p(i.value),A=d.sub(d.mul(new p(l.fee))),I=b.div(A);return E.value.getPriceImpactPct(l,I.toString(),f)}return"--"},lo=v(0),to=v(0),uo=v(),be=v({}),Lo=async o=>{if(h.value&&(X.value=!0,!(c.value&&Number(u.value)==0)&&!(!c.value&&Number(i.value)==0))){if(n.value&&s.value&&(u.value||i.value)){N.value=!0,V.value=!0,w.value=!1;const l=n.value.address===h.value.coinA.address&&s.value.address===h.value.coinB.address?0:1;try{let a=await E.value.preSwap({pool:h.value,a2b:l==0,byAmountIn:c.value,amount:c.value?u.value:i.value});w.value=a==null?void 0:a.isExceed,uo.value=a==null?void 0:a.estimatedFeeAmount,c.value?(i.value=a.estimatedAmountOut,re.value=(Number(a.estimatedAmountOut)/o).toString(),ie.value=(o/Number(a.estimatedAmountOut)).toString()):(u.value=a.estimatedAmountIn,re.value=(o/Number(a.estimatedAmountIn)).toString(),ie.value=(Number(a.estimatedAmountIn)/o).toString()),lo.value=new p(i.value).div(u.value).toString(),to.value=new p(u.value).div(i.value).toString(),Be.value=S.value=="Aptos"?await Pe(h.value):await Pe(be.value||h.value),N.value=!1,V.value=!1}catch(a){console.log("pre swap error1",a),N.value=!1,V.value=!1}}else c.value?i.value="":u.value="",N.value=!1,V.value=!1;X.value=!1}},Bo=Ja(),W=y(()=>Bo),Po=v({}),ie=v(""),re=v(""),H=y(()=>W.value.assets&&n.value&&W.value.assets[n.value.address]?Io(W.value.assets[n.value.address].balance,n.value.decimals):0),K=y(()=>W.value.assets&&s.value&&W.value.assets[s.value.address]?Io(W.value.assets[s.value.address].balance,s.value.decimals):0);_(()=>t.value.tokensObj,async o=>{if(o&&!Re(o)){const l=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?n.value=o[a]||await E.value.getTokenBySymbol(o,a):!a&&!n.value&&(n.value=o[ce[S.value].swapDefaultPair.fromCoin]),l?s.value=o[l]||await E.value.getTokenBySymbol(o,l):!l&&!s.value&&(s.value=o[ce[S.value].swapDefaultPair.toCoin],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ newValue:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",ce[S.value].swapDefaultPair.toCoin)),!a&&l&&(n.value="")}},{immediate:!0});const h=y(()=>{var o,l,a,f,d;if(n.value&&s.value){let b=null,A={};if(Object.values(t.value.poolConfigList).forEach(r=>{var k,$,F,M;(r.coinA.address.toUpperCase()===((k=n.value.address)==null?void 0:k.toUpperCase())&&r.coinB.address.toUpperCase()===(($=s.value.address)==null?void 0:$.toUpperCase())||r.coinB.address.toUpperCase()===((F=n.value.address)==null?void 0:F.toUpperCase())&&r.coinA.address.toUpperCase()===((M=s.value.address)==null?void 0:M.toUpperCase()))&&(A[r.address]={...r})}),S.value=="Aptos"&&t.value.poolsObj&&!Re(t.value.poolsObj))for(const r in t.value.poolsObj){const k=t.value.poolsObj[r];(k.token_a.address.toUpperCase()===((o=n.value.address)==null?void 0:o.toUpperCase())&&k.token_b.address.toUpperCase()===((l=s.value.address)==null?void 0:l.toUpperCase())||k.token_b.address.toUpperCase()===((a=n.value.address)==null?void 0:a.toUpperCase())&&k.token_a.address.toUpperCase()===((f=s.value.address)==null?void 0:f.toUpperCase()))&&(A[k.address]={...k})}const I=Object.values(A).sort((r,k)=>r.fee-k.fee);for(let r=0;r<I.length;r++)if(!((d=I[r])!=null&&d.is_pause)){b=I[r];break}return b&&!Re(b)?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1094 ~ poolInfo ~ info:",b),b):null}return null}),io=v(!0),ro=v(!1),jo=async o=>{o&&S.value=="Aptos"&&(we(c.value?u.value:i.value),ro.value=!0,o.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&o.coinB.symbol.toLowerCase()===s.value.symbol.toLowerCase()?io.value=!0:io.value=!1,w.value=!1)};_(()=>h.value,(o,l)=>{o&&(!l||o.address!==l.address||o.current_sqrt_price!==l.current_sqrt_price)&&jo(o)},{immediate:!0,deep:!0});const Eo=y(()=>t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].logoURI),qo=y(()=>t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].logoURI),Do=y(()=>S.value==="Aptos"?t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].coingecko_id||null:t.value.tokensObj&&n.value&&n.value.address||null),Wo=y(()=>S.value==="Aptos"?t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].coingecko_id||null:t.value.tokensObj&&s.value&&s.value.address||null),Ho=y(()=>{var o,l,a,f,d,b,A,I,r,k,$,F,M;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1222 ~ formCoinMarket ~ pools?.value?.tokensObj:",(o=t==null?void 0:t.value)==null?void 0:o.tokensObj),(f=(a=t==null?void 0:t.value)==null?void 0:a.tokensObj[(l=n==null?void 0:n.value)==null?void 0:l.address])!=null&&f.pyth_id&&((A=(b=t==null?void 0:t.value)==null?void 0:b.tokensObj[(d=n==null?void 0:n.value)==null?void 0:d.address])==null?void 0:A.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(k=(r=t==null?void 0:t.value)==null?void 0:r.tokensObj[(I=n==null?void 0:n.value)==null?void 0:I.address])!=null&&k.coingecko_id?"coingecko":(M=(F=t==null?void 0:t.value)==null?void 0:F.tokensObj[($=n==null?void 0:n.value)==null?void 0:$.address])!=null&&M.birdeyeid?"birdeye":null}),zo=y(()=>{var o,l,a,f,d,b,A,I,r,k,$,F;return(a=(l=t==null?void 0:t.value)==null?void 0:l.tokensObj[(o=s==null?void 0:s.value)==null?void 0:o.address])!=null&&a.pyth_id&&((b=(d=t==null?void 0:t.value)==null?void 0:d.tokensObj[(f=s==null?void 0:s.value)==null?void 0:f.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(r=(I=t==null?void 0:t.value)==null?void 0:I.tokensObj[(A=s==null?void 0:s.value)==null?void 0:A.address])!=null&&r.coingecko_id?"coingecko":(F=($=t==null?void 0:t.value)==null?void 0:$.tokensObj[(k=s==null?void 0:s.value)==null?void 0:k.address])!=null&&F.birdeyeid?"birdeye":null}),Jo=y(()=>{var f,d;const o=new p(u.value),l=new p(S.value=="Aptos"?(f=h==null?void 0:h.value)==null?void 0:f.fee:(d=be==null?void 0:be.value)==null?void 0:d.fee),a=o.mul(l).toString();return Number(a)<1/Math.pow(10,n.value.decimals)?`<${new p(1).div(new p(Math.pow(10,n.value.decimals))).toString()}`:_e(a,n.value.decimals)}),{setIsShowSuccess:Ko,setIsShowRejected:vo,setIsShowWaiting:je,setTransactionDesc:Go,setTransactionTxid:mo}=D,Qo=async()=>{var l,a,f,d,b,A,I,r,k,$;ee.value=!1,N.value=!0,clearInterval(Me),window.clearInterval(Me),mo(""),Go(Q("tips.swapping",{from:`${B(u.value)} ${(l=n.value)==null?void 0:l.symbol}`,to:`${B(i.value)} ${(a=s.value)==null?void 0:a.symbol}`})),je(!0);let o;S.value=="Aptos"&&(o=n.value.address===h.value.token_a.address&&s.value.address===h.value.token_b.address?0:1);try{let F;if(S.value=="Aptos")F=await E.value.getSwapTransactionPayload({pool:h.value,a2b:o==0,byAmountIn:c.value,amount:c.value?u.value:i.value,slippage:Number(he.value)/100});else{const G=c.value,de=Number(he.value)/100;F=await((f=oe==null?void 0:oe.value)==null?void 0:f.getRouterSwapPayload(O.value,G,de,n,s))}console.log("0221####swap###swapPayload###",F);let M;if(S.value==="Aptos")M=await W.value.currentWallet.signAndSubmitTransaction(F);else{const G=await E.value.signAndExecuteTransactionBlock(W.value.currentWallet,F,{action:"AggregatorSwap"});console.log("0221###sui swap res###",G),M=E.value.handleTx(G),console.log("0221###swap###sui##tx###",M)}if(M&&M.hash){mo(M.hash),je(!1),Ko(!0);const G={title:Q("tips.swap"),desc:Q("tips.swapSuccessText",{from:`${B(u.value)} ${(d=n.value)==null?void 0:d.symbol}`,to:`${B(i.value)} ${(b=s.value)==null?void 0:b.symbol}`}),hash:M.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:n.value.address==ce[S.value].currentChainTokenAddress||s.value.address==ce[S.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(A=n.value)==null?void 0:A.address}`,numa:`- ${u.value}`,logoa:t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].logoURI,tokenb:`${(I=s.value)==null?void 0:I.address}`,numb:`+ ${i.value}`,logob:t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].logoURI},text:`Pay ${u.value} ${(r=n.value)==null?void 0:r.symbol} to receive ${i.value} ${(k=s.value)==null?void 0:k.symbol}`,excecuteTime:($=M==null?void 0:M.res)==null?void 0:$.excecuteTime};S.value!=="Aptos"&&(G.res=M.res),E.value.showTransitionPending(G);const de=await E.value.watchTransaction(G);console.log("0221###swap###transitionStatus####",de),de&&setTimeout(()=>{S.value=="Aptos"&&ye.updateCurrentPools(h.value.poolAddress,S.value),E.value.getAccount(W.value.address)},1e3)}else je(!1),vo(!0);u.value="",i.value="",N.value=!1}catch(F){u.value="",i.value="",console.log("Swap Error###",F),N.value=!1,je(!1),vo(!0)}},Vo=o=>{var l;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((l=t.value.tokensObj[o==null?void 0:o.address])==null?void 0:l.logo_url)||(D.theme==="default"?oo("/image/coins/unknown.png"):oo("/image/coins/sui-unknown.png"))},co=v([]);_(()=>[n.value,s.value,t.value.poolConfigList],([o,l,a])=>{if(a&&a.length>0&&o&&l){const f=[];a.forEach(d=>{var b,A,I,r;(d.coinA.address.toUpperCase()===((b=o.address)==null?void 0:b.toUpperCase())&&d.coinB.address.toUpperCase()===((A=l.address)==null?void 0:A.toUpperCase())||d.coinB.address.toUpperCase()===((I=o.address)==null?void 0:I.toUpperCase())&&d.coinA.address.toUpperCase()===((r=l.address)==null?void 0:r.toUpperCase()))&&(d!=null&&d.is_pause||f.push(d.address))}),co.value=f}},{immediate:!0});const Ve=o=>{console.log("ðŸš€ ~ getTokenSource ~ token:",o);const l=D.importTokenListObj;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(l!=null&&l.hasOwnProperty(o==null?void 0:o.address))),o!=null&&o.isSelfBuilt&&!(l!=null&&l.hasOwnProperty(o==null?void 0:o.address))?Xe.value=!0:(te.value==="fromCoin"?(s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null),n.value=o,u.value=u.value>0?le(u.value,o==null?void 0:o.decimals):""):(n.value&&o.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null),s.value=o,i.value=i.value>0?le(i.value,o==null?void 0:o.decimals):""),po())},Xe=v(!1),po=()=>{Ge.value={},Ke.value={},Xe.value=!1},Xo=y(()=>D.isShowRouterModal),fe=v([]),fo=v(""),Yo=v(!1),go=ya();y(()=>go);const Se=v(!1),O=v({}),Zo=v(""),_o=v(),X=v(!1),Ee=v(0),Ye=async o=>{var l,a;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),X.value=!0,w.value=!1,n.value&&s.value&&(Number(u.value)>0&&c.value||Number(i.value)>0&&!c.value)){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!u.value&&i.value||u.value&&!i.value)&&(N.value=!0),ie.value="",re.value="",ae.value=!0,Se.value=!1;let f;h.value&&(f=n.value.address===h.value.coinA.address&&s.value.address===h.value.coinB.address?0:1);try{let d;if(c.value){const k=new p(u.value).mul(Math.pow(10,n.value.decimals)).toString();d=new We(k)}else{const k=new p(i.value).mul(Math.pow(10,s.value.decimals)).toString();d=new We(k)}const b=Number(he.value)/100,A=h.value?{poolAddresses:co.value,coinTypeA:h.value.coin_a_address,coinTypeB:h.value.coin_b_address,decimalsA:h.value.coinA.decimals,decimalsB:h.value.coinB.decimals,a2b:f==0,byAmountIn:c.value,amount:d.toString()}:"";console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fromCoin:",n),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ toCoin:",s),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ coinAmount:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",c.value);const I=Ee.value+1;Ee.value=I;const r=await((l=oe==null?void 0:oe.value)==null?void 0:l.getFindRouter(n,s,d.toString(),c.value,b,h.value?A:"",I));if(console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter:",r),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter JSON:",JSON.stringify(r,null,2)),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ suiAmountId.value:",Ee.value),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter.id:",r==null?void 0:r.id),Ee.value!==(r==null?void 0:r.id)){ae.value=!1,X.value=!1,N.value=!1,O.value={},fe.value=[],c.value?i.value="":u.value="";return}if(r!=null&&r.insufficientLiquidity){w.value=!0,ae.value=!1,X.value=!1,N.value=!1,O.value={},fe.value=[],c.value?i.value="":u.value="";return}if(!r||!(r!=null&&r.routes)||((a=r==null?void 0:r.routes)==null?void 0:a.length)==0){N.value=!1,Se.value=!0,ae.value=!1,X.value=!1,O.value={},fe.value=[],u.value?i.value="":u.value="";return}if(r.fromCoinAddress!==n.value.address||r.toCoinAddress!==s.value.address){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1861 ~ getSuiAmount ~",r.fromCoinAddress!==n.value.address||r.toCoinAddress!==s.value.address),O.value={},fe.value=[];return}r?(O.value=r,fe.value=r.routes,w.value=!1,c.value?u.value&&(i.value=new p(r.amountOut).div(new p(Math.pow(10,s.value.decimals))).toString()):i.value&&(u.value=new p(r.amountIn).div(new p(Math.pow(10,n.value.decimals))).toString()),console.log(i.value,"###toCoinAmount.value"),ie.value=B(le(new p(u.value).div(new p(i.value).toString()),n.value.decimals)),re.value=B(le(new p(i.value).div(u.value).toString(),s.value.decimals)),N.value=!1,Se.value=!1,ae.value=!1):(N.value=!1,Se.value=!0,ae.value=!1)}catch(d){console.log("pre swap error2",d),N.value=!1,ae.value=!1,X.value=!1}}else c.value?i.value="":u.value="",N.value=!1,ae.value=!1;X.value=!1,console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1926 ~ getSuiAmount ~ isRoutrProgress.value:",X.value)},ge=v(!1),wo=async o=>{var l;try{let a;if(c.value){const b=new p(u.value).mul(Math.pow(10,n.value.decimals)).toString();a=new We(b)}else{const b=new p(i.value).mul(Math.pow(10,s.value.decimals)).toString();a=new We(b)}const f=Number(he.value)/100,d=await((l=oe==null?void 0:oe.value)==null?void 0:l.getFindRouter(n,s,a.toString(),c.value,f,""));if(d){O.value=d,fe.value=d.routes,w.value=!1,fo.value=d.amountIn,ie.value=B(le(new p(u.value).div(new p(i.value).toString()),n.value.decimals)),re.value=B(le(new p(i.value).div(u.value).toString(),s.value.decimals));const b=new p(d.amountOut).div(new p(Math.pow(10,s.value.decimals))).toString(),A=new p(d.amountIn).div(new p(Math.pow(10,n.value.decimals))).toString();c.value?i.value!==b&&(ge.value=!0,i.value=b):u.value!==A&&(ge.value=!0,u.value=A)}}catch(a){console.log("pre swap error3",a)}},xo=async o=>{if(n.value&&s.value&&(u.value||i.value)){const l=n.value.address===h.value.coinA.address&&s.value.address===h.value.coinB.address?0:1;try{let a=await E.value.preSwap({pool:h.value,a2b:l==0,byAmountIn:c.value,amount:c.value?u.value:i.value});w.value=a==null?void 0:a.isExceed,uo.value=a==null?void 0:a.estimatedFeeAmount,c.value?(re.value=(Number(a.estimatedAmountOut)/a.estimatedAmountIn).toString(),ie.value=(a.estimatedAmountIn/Number(a.estimatedAmountOut)).toString()):(re.value=(Number(a.estimatedAmountOut)/Number(a.estimatedAmountIn)).toString(),ie.value=(Number(a.estimatedAmountIn)/Number(a.estimatedAmountOut)).toString()),c.value?i.value!==a.estimatedAmountOut&&(ge.value=!0,i.value=a.estimatedAmountOut):u.value!==a.estimatedAmountIn&&(ge.value=!0,u.value=a.estimatedAmountIn),Be.value=S.value=="Aptos"?await Pe(h.value):await Pe(be.value||h.value),N.value=!1,V.value=!1}catch(a){console.log("pre swap error4",a),N.value=!1,V.value=!1}}else N.value=!1,V.value=!1};let Me=v(null);_(()=>ee.value,o=>{o?Me.value=setInterval(()=>{S.value=="Aptos"?xo(c.value):wo(c.value)},3e3):(clearInterval(Me.value),window.clearInterval(Me.value))},{immediate:!0});const we=async o=>{S.value=="Aptos"?Lo(o):Ye()};_(()=>Qe.value,o=>{(Number(u.value)>0||Number(i.value)>0)&&we(c.value?u.value:i.value)},{immediate:!0});const ea=y(()=>go),Co=y(()=>ea.value.isInitRouter);_(()=>Co.value,o=>{o||(j.value=0,we(c.value?u.value:i.value))},{immediate:!0});function qe(o,l=500){let a=null;return function(...f){clearTimeout(a),a=setTimeout(()=>{o.call(this,...f)},l)}}_(()=>[n.value,s.value],([o,l])=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2181 ~ setup ~ fromCoin && toCoin:",o&&l),o&&l&&(j.value=0,qe(we(c.value?u.value:i.value))),o||l){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1965 ~ setup ~ fromCoin:",o);const a=`/swap?from=${o==null?void 0:o.address}&to=${l==null?void 0:l.address}`;e.push(a)}},{immediate:!0,deep:!0});const oa=qe(ho);function ho(){const o=n.value;n.value=s.value,s.value=o,Ie.value=!0,ve.value=="open"?c.value=!0:c.value=!c.value,c.value?(u.value=i.value,i.value=""):(i.value=u.value,u.value=""),setTimeout(()=>{Ie.value=!1},300)}const aa=()=>{ge.value=!1},na=()=>{ee.value=!1,ge.value=!1},sa=[{label:"Swap",link:"/swap"},{label:"Limit",link:"/limit"}],la=v("Swap"),bo=v(!1),Ze=y(()=>{var o,l,a,f,d,b,A,I,r,k,$,F,M,G;try{if((o=n==null?void 0:n.value)!=null&&o.address&&((l=s==null?void 0:s.value)!=null&&l.address)&&(O!=null&&O.value)&&!Re(O==null?void 0:O.value)){const de=ke((a=O==null?void 0:O.value)==null?void 0:a.amountIn).div(Math.pow(10,(f=n.value)==null?void 0:f.decimals)),ma=ke((d=O==null?void 0:O.value)==null?void 0:d.amountOut).div(Math.pow(10,(b=s.value)==null?void 0:b.decimals)),me=ke(ma).div(de);console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",me==null?void 0:me.toString());const Y=(r=(A=t==null?void 0:t.value)==null?void 0:A.RATES)==null?void 0:r[(I=n==null?void 0:n.value)==null?void 0:I.address];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",Y);const Z=(F=(k=t==null?void 0:t.value)==null?void 0:k.RATES)==null?void 0:F[($=s==null?void 0:s.value)==null?void 0:$.address];if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",Z),!(Y!=null&&Y.price)||!(Z!=null&&Z.price)||ke(Y==null?void 0:Y.price).lte(0)||ke(Z==null?void 0:Z.price).lte(0))throw Error("rate invalid");const Ae=ke(Y==null?void 0:Y.price).div(Z==null?void 0:Z.price);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",Ae==null?void 0:Ae.toString()),me.gt(Ae)){const q=me.minus(Ae).div(me).mul(100);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ result1:",q==null?void 0:q.toString()),No((M=q==null?void 0:q.negated())==null?void 0:M.toString(),2)}else{const q=me.minus(Ae).div(me).mul(100);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ result2:",q==null?void 0:q.toString()),No((G=q==null?void 0:q.abs())==null?void 0:G.toString(),2)}}return}catch(de){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",de),"Incalculable"}}),ta=y(()=>(S==null?void 0:S.value)==="Aptos"?Be.value:Ze==null?void 0:Ze.value),ve=v(localStorage.getItem("plusChecked1"))||v("close"),ua=y(()=>D.liquiditySourceList),ia=o=>{console.log("ðŸš€ ~ modalConfirm ~ result121:",o),o&&o.length>0?o.every(a=>a.name=="Cetus"?!0:a.status==="close")?ve.value="close":(ve.value="open",i.value=""):ve.value="close",bo.value=!1},ra=y(()=>D.includeRoutes),So=o=>{ve.value=ve.value=="open"?"close":"open",localStorage.setItem("plusChecked1",ve.value);const l=ra.value,a=ua.value;a.forEach(f=>{o?f.status="open":f.name!=="Cetus"?f.status="close":f.status="open"}),console.log("ðŸš€ ~ //clickCheckedresult ~ arr:",a,l),D.setAggregatorSetting(a,l)},Ao=()=>{const o=window.innerWidth,l=window.innerHeight,a=document.getElementById("plusModeSwitch"),f=a==null?void 0:a.getBoundingClientRect(),d=f==null?void 0:f.left,b=f==null?void 0:f.top;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ x:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ y:",b),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportWidth:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportHeight:",l);const A=2,I=Fe.shapeFromText({text:"ðŸŸ¢",scalar:A}),r=Fe.shapeFromText({text:"ðŸ”µ",scalar:A}),k=Fe.shapeFromText({text:"ðŸ’š",scalar:A}),$=Fe.shapeFromText({text:"ðŸ’™",scalar:A});Fe({particleCount:40,spread:60,shapes:[I,r,k,$],scalar:A,origin:{x:d/o,y:b*1.2/l}})},va=o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2264 ~ handleSwitchPlusMode ~ value:",o),u.value="",i.value="",o&&Ao(),So(o),setTimeout(()=>{Ye()},500)},ko=v(!1),da=o=>{ko.value=o},yo=v(!1);return{modalConfirm:ia,clickChecked:So,currentTradeTab:la,plusChecked:ve,closeSwapConfirmModal:na,updateAccept:aa,clickExchange:ho,debounceClickExchange:oa,closeTokenWarning:po,isShowTokenWarning:Xe,getTokenSource:Ve,hasPool:ro,getPoolInfoSuccess:no,halfBtnSelect:$o,formCoinId:Do,toCoinId:Wo,formCoinMarket:Ho,toCoinMarket:zo,fromCoinUrl:Eo,toCoinUrl:qo,t:Q,indicator:g,wallet:W,currentLpInfo:Po,fixD:ao,decimalFormat:Ia,impact:Be,oneFromAmount:ie,oneToAmount:re,importIcon:oo,clickRefresh:Le,refresh:J,change:Ie,isShowAddress:He,isShowSwapSetting:Ue,fromCoin:n,toCoin:s,slippage:he,openCoinSelect:Ro,onCoinSelect:Fo,existingCoins:Ne,lastSelectCoin:Te,currentCoinKey:te,showCoinSelect:$e,fromCoinAmount:u,toCoinAmount:i,maxBtnSelect:Uo,fixedFromCoin:c,swapBtnText:Mo,toSwap:Qo,loading:Oe,swaping:N,autoRefreshTime:ue,countdown:j,marketTimer:pe,rateChange:ze,isSwapConfirmMpdal:ee,fromCoinBlance:H,toCoinBlance:K,poolInfo:h,chainName:S,swapRouterLoading:ae,formatFee:Jo,calculating:V,currentRate:lo,currentRateReverse:to,getCoinIcon:Vo,toAddLiquidiPoolInfo:be,decimalUi:le,warningToCoin:Ge,warningFromCoin:Ke,isShowRouterModal:Xo,toSwapLoading:Yo,insufficientLiquidity:w,routerPool:fe,routerTotalAmounts:fo,store:D,suiPreSwapdata:O,suiSwapFee:_o,suiSwapFeeUi:Zo,addCommom:B,debounce:To,notFoundRouter:Se,getSuiAmountAccept:wo,isShowAccept:ge,getSuiAmount:Ye,tradeTabList:sa,isInitSwapRouter:Co,isShowAggregatorModal:bo,priceImpact:ta,triggerConfettiAnimation:Ao,handleSwitchPlusMode:va,assetLoading:ko,onInputLoading:da,onInputToCoinLoading:o=>{console.log("ðŸš€ ~ file: swap-sui.vue:2341 ~ onInputToCoinLoading ~ status:",o),yo.value=o},assetToCoinLoading:yo}}});const P=e=>(Da("data-v-251484d8"),e=e(),Wa(),e),Za={class:"swap-container"},_a={class:"left"},xa=["onClick"],en={class:"right title-right"},on=P(()=>m("div",{class:"price-reference-text"}," The Plus Mode will aggregate external liquidity sources ",-1)),an={key:0,class:z("icon-bg plus-switch")},nn=P(()=>m("p",null,[m("span",null,"Plus Mode")],-1)),sn={class:"setting-right"},ln=P(()=>m("div",{class:"new-style-tooltip-text"},"Swap Settings",-1)),tn=P(()=>m("svg",{"aria-hidden":"true",class:"icon"},[m("use",{"xlink:href":"#icon-icon_set"})],-1)),un=[tn],rn=P(()=>m("div",{class:"new-style-tooltip-text"},"Slippage Settings",-1)),vn=P(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),dn={class:"swap-card"},mn={class:"card-container"},cn=P(()=>m("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),pn=[cn],fn={key:1,class:"induction"},gn={key:0,class:"exchange-rate-btn"},wn={key:0},Cn={key:0},hn={key:0},bn={key:1},Sn={key:0},An=P(()=>m("div",null,[m("svg",{class:"icon icon-up","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),kn=P(()=>m("div",null,[m("svg",{class:"icon icon-down","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),yn=[An,kn],In={class:"item"},Nn={class:"induction-text"},Tn={key:0,class:"icon","aria-hidden":"true"},On=P(()=>m("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Mn=[On],Rn={class:"item"},Fn={class:"induction-text"},Un={key:0,class:"induction-value"},$n={class:"item"},Ln={class:"induction-text"},Bn={key:0,class:"induction-value"},Pn={key:0,class:"icon","aria-hidden":"true"},jn=P(()=>m("use",{"xlink:href":"#icon-icon-swap"},null,-1)),En=[jn],qn={key:2,class:"token-info-container"},Dn={class:"token-info-title"},Wn=P(()=>m("span",{class:"coingecko"},"Price Reference",-1)),Hn=P(()=>m("div",{class:"price-reference-text"}," The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ",-1)),zn=P(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_tips"})],-1));function Jn(e,g,Q,Oo,D,ye){var j,pe;const t=xe("VesrionBeta"),Ie=Ha,J=ja,He=ca,Ue=pa,ze=fa,ee=Ea,te=za,Ne=qa,Te=Ca,$e=ha,c=ba,Oe=ga,N=Sa,V=xe("RouterModal"),u=wa,i=xe("AggregatorSettingModal"),ue=Ba("image");return C(),T("div",Za,[m("div",{class:z(e.chainName=="Sui"?"sui-title swap-title":"swap-title")},[m("div",_a,[e.chainName=="Sui"?(C(!0),T(eo,{key:0},Pa(e.tradeTabList,w=>(C(),T("div",{key:w,class:z(["trade-tab",e.currentTradeTab==w.label?"trade-tab-active":""]),onClick:he=>e.$router.push(w.link)},[Ce(U(w.label)+" ",1),w.label=="Limit"?(C(),L(t,{key:0,top:"15px"})):R("",!0)],10,xa))),128)):(C(),T(eo,{key:1},[Ce(U(e.$t("menu.swap")),1)],64))]),m("div",en,[x(J,{"overlay-class-name":"price-impact-tooltip"},{title:ne(()=>[on]),default:ne(()=>[e.chainName=="Sui"?(C(),T("div",an,[nn,x(Ie,{id:"plusModeSwitch",class:"liquidity-switch",checked:e.plusChecked=="open",onClick:g[0]||(g[0]=w=>{e.handleSwitchPlusMode(w)})},null,8,["checked"])])):R("",!0)]),_:1}),m("div",sn,[e.chainName=="Sui"?(C(),T("div",{key:0,class:"aggregator-setting",onClick:g[1]||(g[1]=w=>e.isShowAggregatorModal=!0)},[x(J,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[ln]),default:ne(()=>[m("div",{class:z(e.chainName=="Sui"?"icon-bg":"")},un,2)]),_:1})])):R("",!0),x(J,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[rn]),default:ne(()=>[m("div",{class:"slippage-icon",onClick:g[2]||(g[2]=w=>e.isShowSwapSetting=!0)},[m("div",{class:z(e.chainName=="Sui"?"icon-bg":"")},[vn,m("span",null,U(e.slippage)+"%",1)],2)])]),_:1}),m("div",{class:z(e.chainName=="Sui"?"icon-bg":"")},[x(He,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])],2)])])],2),m("div",dn,[m("div",mn,[m("div",{class:z(["card-item",!e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[x(Ue,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":g[3]||(g[3]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From","swap-loading":!e.fixedFromCoin&&e.fromCoin&&(e.swapRouterLoading||e.assetToCoinLoading),title:"Sell",onOnInputLoading:e.onInputLoading,onOnMax:g[4]||(g[4]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:g[5]||(g[5]=w=>e.halfBtnSelect("fromCoin")),onOnInput:g[6]||(g[6]=w=>{e.fromCoinAmount=w}),onOnFocus:g[7]||(g[7]=()=>{e.fixedFromCoin=!0}),onOnSelect:g[8]||(g[8]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","swap-loading","onOnInputLoading"])],2),m("div",{class:z(["card-item",e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[x(Ue,{modelValue:e.toCoinAmount,"onUpdate:modelValue":g[9]||(g[9]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,title:"Buy","input-disabled":e.chainName!=="Aptos"&&e.plusChecked=="open","swap-loading":e.fixedFromCoin&&e.toCoin&&(e.swapRouterLoading||e.assetLoading),onOnInputLoading:e.onInputToCoinLoading,onOnInput:g[10]||(g[10]=w=>{e.toCoinAmount=w}),onOnFocus:g[11]||(g[11]=()=>{e.fixedFromCoin=!1}),onOnSelect:g[12]||(g[12]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","input-disabled","swap-loading","onOnInputLoading"])],2),m("img",{class:z(e.change?"gang animationex":"gang"),src:Xa,alt:""},null,2),m("div",{class:z(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:g[13]||(g[13]=(...w)=>e.debounceClickExchange&&e.debounceClickExchange(...w))},[(C(),T("svg",{class:z(e.change?"icon animationex":"icon"),"aria-hidden":"true"},pn,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter&&e.fromCoin&&e.toCoin&&!e.insufficientLiquidity?(C(),L(ze,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"form-coin-market":e.formCoinMarket,"to-coin-market":e.toCoinMarket,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.priceImpact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","form-coin-market","to-coin-market","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(C(),T("div",fn,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(C(),T("div",gn,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(C(),T("span",bn,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(C(),T("span",Sn,[De(m("img",null,null,512),[[ue,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),Ce(" 1 "+U(e.toCoin.symbol)+" â‰ˆ ",1),De(m("img",null,null,512),[[ue,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),m("span",null,U(("addCommom"in e?e.addCommom:se(B))(("decimalUi"in e?e.decimalUi:se(le))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),Ce(" Â "+U(e.fromCoin.symbol),1)])):(C(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"]))])):R("",!0):(C(),T("span",wn,[De(m("img",null,null,512),[[ue,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),Ce(" 1 "+U(e.fromCoin.symbol)+" â‰ˆ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(C(),T("span",Cn,[De(m("img",null,null,512),[[ue,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?R("",!0):(C(),T("span",hn,U(("addCommom"in e?e.addCommom:se(B))(("decimalUi"in e?e.decimalUi:se(le))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(C(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"])):R("",!0),Ce(" Â "+U(e.toCoin.symbol),1)])):(C(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"]))])),m("div",{class:"icon-change",onClick:g[14]||(g[14]=w=>e.rateChange=!e.rateChange)},yn)])):R("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(C(),T(eo,{key:1},[m("div",In,[m("div",Nn,U(e.$t("common.priceImpact")),1),e.swaping?(C(),L(te,{key:1,paragraph:!1,active:""})):(C(),T("div",{key:0,class:z(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[Ce(U(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(C(),T("svg",Tn,Mn)):R("",!0)],2))]),m("div",Rn,[m("div",Fn,U(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(C(),L(te,{key:1,paragraph:!1,active:""})):(C(),T("div",Un,U(e.fixedFromCoin?("addCommom"in e?e.addCommom:se(B))(("fixD"in e?e.fixD:se(ao))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:se(B))(("fixD"in e?e.fixD:se(ao))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+U(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),m("div",$n,[m("div",Ln,U(e.$t("common.fee")),1),e.swaping?(C(),L(te,{key:1,paragraph:!1,active:""})):(C(),T("div",Bn,U(("addCommom"in e?e.addCommom:se(B))(e.formatFee,e.fromCoin.decimals))+" "+U(e.fromCoin.symbol)+" ("+U(e.chainName=="Aptos"?e.poolInfo.fee*100:((j=e.toAddLiquidiPoolInfo)==null?void 0:j.fee)*100)+"%) ",1))])],64)):R("",!0)])):R("",!0)]),x(Ne,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((pe=e.poolInfo)==null?void 0:pe.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.swaping,onClick:g[15]||(g[15]=w=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ne(()=>[e.wallet.connected?(C(),T("svg",Pn,En)):R("",!0),m("span",null,U(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),x(Te),e.showCoinSelect?(C(),L($e,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:g[16]||(g[16]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):R("",!0),e.isShowSwapSetting?(C(),L(c,{key:1,onOnClose:g[17]||(g[17]=w=>e.isShowSwapSetting=!1)})):R("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(C(),T("div",qn,[m("div",Dn,[Wn,x(J,{"overlay-class-name":"price-impact-tooltip",placement:"top","arrow-point-at-center":""},{title:ne(()=>[Hn]),default:ne(()=>[zn]),_:1})]),e.fromCoin&&e.formCoinMarket?(C(),L(Oe,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):R("",!0),e.toCoin&&e.toCoinMarket?(C(),L(Oe,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):R("",!0)])):R("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(C(),L(N,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):R("",!0),e.isShowRouterModal?(C(),L(V,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:g[18]||(g[18]=w=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):R("",!0),e.isSwapConfirmMpdal?(C(),L(u,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.priceImpact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):R("",!0),e.isShowAggregatorModal?(C(),L(i,{key:6,onClose:g[19]||(g[19]=w=>e.isShowAggregatorModal=!1),onModalConfirm:g[20]||(g[20]=w=>{e.modalConfirm(w)})})):R("",!0)])}const ks=La(Ya,[["render",Jn],["__scopeId","data-v-251484d8"]]);export{ks as default};
