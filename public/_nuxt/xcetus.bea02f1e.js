import{u as Le,_ as pt}from"./xwhale-header.fdc14214.js";import{r as p,T as ze,D as M,e as te,o as c,f as w,h as n,v as k,j as U,l as _e,m as i,q as Ge,x as Y,t as $e,c as O,S as Je,p as re,k as de,i as H,F as Re,s as Ee,w as J,B as we,M as Ke,u as De,z as ge,a as Ue,a3 as _t,a4 as wt,I as bt,Y as Ct,y as yt,C as St,aa as Xe,a9 as Tt}from"./entry.a4db0d61.js";import"./index.b10985b1.js";import{u as he}from"./index.6288ac24.js";import{i as ie}from"./import-icon.de3e6c66.js";import{f as R,s as Ie,a as be,b as We,u as Me,c as ue,p as se,E as Ye,w as ke}from"./pool.2587b8e2.js";import{u as Oe}from"./useWhale.9b99d963.js";import{_ as Qe}from"./xWHALE-icon.2df34cd4.js";import{_ as Ze}from"./WHALE-icon.28f954ba.js";import{_ as kt}from"./head-switch.9b935998.js";/* empty css              */import{u as It}from"./useDebounceFunction.2335f32c.js";import{_ as $t}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import"./decimal.a2826370.js";import{u as At}from"./useTheme.a3c8c143.js";import{D as je}from"./decimal.765d8738.js";import{_ as qe}from"./img-leverage_2x.1c577303.js";const xt={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const s=p("--"),a=p("--"),$=p("--"),T=p("--");let m=null;ze(()=>{window.clearInterval(m)});const S=()=>{const b=new Date().getTime()/1e3;Number(b)<=Number(e.startTime)&&I(e.startTime),Number(b)>Number(e.startTime)&&Number(b)<=Number(e.endTime)&&I(e.endTime)},I=b=>{clearInterval(m),window.clearInterval(m),m=setInterval(()=>{let h=new Date().getTime()/1e3,d=b-parseInt(String(h));if(d==0){t.emit("countDown"),clearInterval(m),window.clearInterval(m),m=null;return}else d<0&&(clearInterval(m),window.clearInterval(m),t.emit("countDown"),m=null);d--;let f=parseInt(String(d/60/60/24));f=(f<10,f);let l=parseInt(String(d/60/60%24));l=(l<10,l);let _=parseInt(String(d/60%60));_=(_<10,_);let E=parseInt(String(d%60));E=E<10?+E:E,s.value=f,a.value=l,$.value=_,T.value=E},1e3)};return M(()=>e.startTime,(b,h)=>{b!==h&&S()},{immediate:!0}),{day:s,hour:a,min:$,sec:T}}};const Bt={class:"count-time"};function Nt(e,t,s,a,$,T){return c(),w("div",Bt,[n("p",null,k(a.day)+"d",1),U(" : "),n("p",null,k(a.hour)+"h",1),U(" : "),n("p",null,k(a.min)+"m",1),U(" : "),n("p",null,k(a.sec)+"s",1)])}const Pt=te(xt,[["render",Nt],["__scopeId","data-v-ce10c596"]]),Rt={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"},tokenSymbol:{type:String,default:""},logo:{type:String,default:""}},setup(e){const{t}=_e(),s=he(),a=i(()=>s);return{t,wallet:a}}};const Et=e=>(re("data-v-8a513e95"),e=e(),de(),e),Dt={class:"table-rewards"},Lt={key:0,class:"logo"},Ut=["src"],Wt={class:"text-top-all"},Mt={key:0,class:"icon-hover-box"},Ot=Et(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1)),Vt={class:"tips-text-box"},Ft={key:0},Ht={key:0,alt:""},Xt={key:2};function Yt(e,t,s,a,$,T){const m=Je,S=Ge("image");return c(),w("div",Dt,[s.logo?(c(),w("div",Lt,[n("img",{src:s.logo,alt:""},null,8,Ut)])):Y("",!0),n("div",null,[n("div",Wt,[n("p",null,k(s.titleText),1),s.tipsText?(c(),w("div",Mt,[Ot,n("div",Vt,k(s.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):Y("",!0)]),n("span",null,[s.value!=="--"?(c(),w("p",Ft,[s.imgIcon?$e((c(),w("img",Ht,null,512)),[[S,s.imgIcon]]):Y("",!0),U(k(s.value)+" ",1),n("span",null,k(s.tokenSymbol),1)])):s.value=="--"&&a.wallet&&a.wallet.address?(c(),O(m,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})):(c(),w("p",Xt,"--"))])])])}const jt=te(Rt,[["render",Yt],["__scopeId","data-v-8a513e95"]]),qt={setup(e){const{t}=_e(),s=Le(),a=i(()=>s),$=i(()=>a.value.pendingAmount),T=i(()=>a.value.newPendingAmount),m=i(()=>a.value.rewardCoinAmount),S=i(()=>a.value.nextStartTime),I=i(()=>1683094391),b=i(()=>a.value.xcetusShare&&R(a.value.xcetusShare,3)),h=he(),u=i(()=>h),d=i(()=>a.value.cetusApr&&a.value.cetusApr>.01?R(Ie(a.value.cetusApr,2),2):R(a.value.cetusApr,2)),f=i(()=>a.value.pendingCoinInfo),l=i(()=>a.value.newPendingCoinInfo),_=i(()=>a.value.rewardCoin),E=p("");M(()=>f.value,y=>{y&&ue(y),E.value="Pending yield"},{immediate:!0});const v=p("");M(()=>l.value,y=>{y&&!ue(y)?v.value=`Pending yield (${y.symbol})`:v.value="Pending yield"},{immediate:!0});const D=p();M(()=>_.value,y=>{y&&!ue(y)?D.value=`Pending yield (${y.symbol})`:D.value="Pending yield"},{immediate:!0});const ne=()=>{setTimeout(()=>{s.getDividendManager()},3e3)},X=i(()=>a.value.dividendManagerInfo),Z=i(()=>{const y=parseInt(String(new Date().getTime()/1e3)),W=X.value.interval_day,N=(y-Number(X.value.start_time))/(W*60);return parseInt(String(N))>0}),z=be(),ee=i(()=>z),{setIsShowSuccess:G,setIsShowRejected:j,setIsShowWaiting:K,setTransactionDesc:P,setTransactionTxid:ae}=z,xe=Oe("Sui"),oe=p(!1),Be=i(()=>a.value.venft_id),B=i(()=>ee.value.chainName?We(ee.value.chainName):{}),Q=async()=>{oe.value=!0,K(!0),ae("");let y=`${t("tips.claimingPendingYield")} `,W="";x.value.forEach((N,A)=>{W=W+`${R(N.amount)} ${N.symbol} ${A==x.value.length-1?"":"and "}`}),P(y+W);try{let N;const A=await xe.getRedeemDividendV2Payload(Be.value),le=await B.value.signAndExecuteTransactionBlock(u.value.currentWallet,A.txb,A.payloadParams);if(N=B.value.handleTx(le),N&&N.hash){ae(N.hash),K(!1),G(!0);const V={title:"Claim",desc:`Claimed ${W} successfully.`,hash:N.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:f.value.symbol,numa:`+ ${$.value}`,logoa:f.value.logo_url}};B.value.showTransitionPending(V);const me=await B.value.watchTransaction(V);console.log("0221###swap###transitionStatus####",me),me&&setTimeout(()=>{s.getVeNFTDividendInfo(),oe.value=!1},3e3),s.getOwnerLockCetuss(u.value.address)}else K(!1),j(!0),oe.value=!1}catch(N){K(!1),j(!0),oe.value=!1,console.log(N,"error===>")}},ye=Me(),C=i(()=>ye),Se=y=>{var W;return(y==null?void 0:y.logoURI)||(y==null?void 0:y.logo_url)||((W=C.value.tokensObj[y==null?void 0:y.address])==null?void 0:W.logo_url)},x=i(()=>a.value.xcetusRewardList);return{t,pendingAmount:$,nextStartTime:S,wallet:u,myShare:b,importIcon:ie,nextEndTime:I,pendingYieldText:E,cetusApr:d,pendingCoinInfo:f,getNextEpoch:ne,canClaim:Z,claimPendingYield:Q,claimLoading:oe,addCommom:R,newPendingCoinInfo:l,newPendingAmount:T,newPendingYieldText:v,rewardCoin:_,rewardCoinAmount:m,rewardCoinYieldText:D,getCoinIcon:Se,xcetusRewardList:x}}},zt=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,Gt=""+globalThis.__publicAssetsURL("sui-image/icon_pendingyield@2x.png");const Ce=e=>(re("data-v-788866e7"),e=e(),de(),e),Jt={class:"top-banner"},Kt=Ce(()=>n("img",{src:zt,alt:""},null,-1)),Qt=Ce(()=>n("p",null,"Convert CETUS to xCETUS to start earning",-1)),Zt={class:"bot-count"},en=Ce(()=>n("span",null,"Reward distribution in ",-1)),tn={class:"holder-rewards"},nn=Ce(()=>n("div",{class:"title"},[n("div",{class:"left"},[n("span",null,"xCETUS Staking Rewards")])],-1)),an={class:"rewards-value"},on={key:0,class:"pending-yield"},ln=Ce(()=>n("div",{class:"pending-yield-title"},[n("img",{src:Gt,alt:""}),n("span",null,"Pending Yield")],-1)),sn={class:"pending-yield-list"},un={alt:""},rn={class:"claim-btn-box"};function dn(e,t,s,a,$,T){const m=Pt,S=jt,I=we,b=Ge("image");return c(),w("div",null,[n("div",Jt,[Kt,Qt,n("div",Zt,[en,H(m,{"start-time":a.nextStartTime,onCountDown:t[0]||(t[0]=h=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),n("div",tn,[nn,n("div",an,[H(S,{"title-text":"est.APR","tips-text":"good",value:"≈"+a.cetusApr+"%",logo:"/sui-image/icon_estapr@2x.png"},null,8,["title-text","value"]),H(S,{"title-text":"My share",value:a.myShare!=="--"?"≈"+a.myShare+"%":"--",logo:"/sui-image/icon_myshare@2x.png"},null,8,["value"]),a.xcetusRewardList&&a.xcetusRewardList.length==0?(c(),O(S,{key:0,"title-text":"Pending yield",value:a.wallet&&a.wallet.address?"0":"--",logo:"/sui-image/icon_pendingyield@2x.png"},null,8,["value"])):Y("",!0)]),a.wallet&&a.wallet.address&&a.xcetusRewardList&&a.xcetusRewardList.length>0?(c(),w("div",on,[ln,n("div",sn,[(c(!0),w(Re,null,Ee(a.xcetusRewardList,(h,u)=>(c(),w("div",{key:u,class:"pending-yield-item"},[n("div",null,[$e(n("img",un,null,512),[[b,a.getCoinIcon(h)]]),n("span",null,k(h.symbol),1)]),n("div",null,k(a.addCommom(h.amount,6)),1)]))),128)),n("div",rn,[a.wallet&&a.wallet.address&&a.xcetusRewardList&&a.xcetusRewardList.length>0?(c(),O(I,{key:0,class:"claim-btn",loading:a.claimLoading,disabled:!a.canClaim||a.xcetusRewardList&&a.xcetusRewardList.length==0,onClick:a.claimPendingYield},{default:J(()=>[U(" Claim ")]),_:1},8,["loading","disabled","onClick"])):Y("",!0)])])])):Y("",!0)])])}const cn=te(qt,[["render",dn],["__scopeId","data-v-788866e7"]]),mn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const s=p("--"),a=p("--"),$=p("--"),T=p("--");let m=null;ze(()=>{window.clearInterval(m)});const S=()=>{const b=new Date().getTime()/1e3;Number(b)<=Number(e.startTime)&&I(e.startTime),Number(b)>Number(e.startTime)&&Number(b)<=Number(e.endTime)&&I(e.endTime)},I=b=>{m=setInterval(()=>{let h=new Date().getTime()/1e3,d=b-parseInt(String(h));if(d==0){t.emit("countDown"),clearInterval(m),window.clearInterval(m),m=null;return}else d<0&&(clearInterval(m),window.clearInterval(m),t.emit("countDown"),m=null);d--;let f=parseInt(String(d/60/60/24));f=f<10?"0"+f:f;let l=parseInt(String(d/60/60%24));l=l<10?"0"+l:l;let _=parseInt(String(d/60%60));_=_<10?"0"+_:_;let E=parseInt(String(d%60));E=E<10?"0"+E:E,s.value=f,a.value=l,$.value=_,T.value=E},1e3)};return M(()=>e.startTime,(b,h)=>{b!==h&&S()},{immediate:!0}),{day:s,hour:a,min:$,sec:T}}};const Ae=e=>(re("data-v-131b3f4e"),e=e(),de(),e),vn={class:"count-down"},gn=Ae(()=>n("span",null,"D : ",-1)),hn=Ae(()=>n("span",null,"H : ",-1)),fn=Ae(()=>n("span",null,"M : ",-1)),pn=Ae(()=>n("span",null,"S",-1));function _n(e,t,s,a,$,T){return c(),w("div",vn,[U(k(a.day)+" ",1),gn,U(" "+k(a.hour)+" ",1),hn,U(" "+k(a.min)+" ",1),fn,U(" "+k(a.sec)+" ",1),pn])}const wn=te(mn,[["render",_n],["__scopeId","data-v-131b3f4e"]]),bn={components:{WcountDown:wn},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,t){const{t:s}=_e(),a=Le(),$=be(),T=i(()=>$),m=f=>{t.emit("claim",f),a.setClaimLoading(f.id)},S=i(()=>a),I=i(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),b=f=>{t.emit("cancelRedeemPayload",f),a.setClaimLoading(f.id)};i(()=>T.value.chainName),Oe("Sui");const h=he();return i(()=>h),i(()=>S.value.venft_id),i(()=>T.value.chainName?We(T.value.chainName):{}),{t:s,prettyAmount:se,claimBoolean:I,toClaim:m,toCancel:b,claimWhale:f=>{t.emit("claimWhale",f)},cancelRedeemPayload:f=>{t.emit("cancelRedeemPayload",f)}}}};const Ve=e=>(re("data-v-67fc6972"),e=e(),de(),e),Cn={class:"vesting-box"},yn={class:"left"},Sn=Ve(()=>n("img",{src:Qe,alt:""},null,-1)),Tn=Ve(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-swap2"})],-1)),kn=Ve(()=>n("img",{src:Ze,alt:""},null,-1)),In={class:"available-all"},$n={class:"available"},An={key:0},xn={key:1};function Bn(e,t,s,a,$,T){const m=Ke("WcountDown"),S=we;return c(),w("div",Cn,[n("div",yn,[n("p",null,[n("span",null,[Sn,U(" "+k(("addCommom"in e?e.addCommom:De(R))(a.prettyAmount(s.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),Tn,n("span",null,[kn,U(" "+k(("addCommom"in e?e.addCommom:De(R))(a.prettyAmount(s.vItem.cetus_amount,9),9))+" CETUS ",1)])]),n("div",In,[n("div",$n,[n("span",null,k(a.claimBoolean?"Available":"Available in"),1),a.claimBoolean?Y("",!0):(c(),O(m,{key:0,"start-time":s.vItem.locked_start_time,"end-time":s.vItem.locked_until_time,onCountDown:t[0]||(t[0]=I=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),n("div",{class:ge(a.claimBoolean?"highlight right-h5":"right-h5")},[a.claimBoolean?(c(),w("span",An,"Claim")):(c(),w("span",xn,"Cancel"))],2)])]),a.claimBoolean?(c(),O(S,{key:0,disabled:!a.claimBoolean||s.loading,loading:s.loading,onClick:t[1]||(t[1]=I=>a.claimWhale(s.vItem))},{default:J(()=>[U(k(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(c(),O(S,{key:1,type:"text",class:"right",disabled:s.loading,loading:s.loading,onClick:t[2]||(t[2]=I=>a.cancelRedeemPayload(s.vItem))},{default:J(()=>[U(k(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const Nn=te(bn,[["render",Bn],["__scopeId","data-v-67fc6972"]]),Pn=Ue({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,t){const{t:s,locale:a}=_e(),$=be(),T=i(()=>$),m=_t(wt,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),S=he(),I=i(()=>S),b=Me(),h=i(()=>b),u=It(v=>{t.emit("onInput",v),t.emit("onInputLoading",!1)},500),d=p(""),f=v=>{const ne=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$"),X=v.target.value.replace(/,/g,"").replace(ne,"$1");t.emit("onInputLoading",!0),u(X)},l=v=>{var K;const D=v.target.selectionStart,ne=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(_==null?void 0:_.value)&&(_==null?void 0:_.value)}})?).*$`);console.log("🚀 ~ file: assets-card.vue:287 ~ handleInput ~ event.target.value:",v.target.value);let X=v.target.value.replace(/,/g,"").replace(ne,"$1");console.log("🚀 ~ file: assets-card.vue:287 ~ handleInput ~ value:",X);let Z=X.includes(".")&&String(R(X))==="0"?X:String(R(X));const z=Ye(v.target.value),ee=Ye(Z),G=ee.length-z.length;let j=D+G;if((K=v==null?void 0:v.inputType)!=null&&K.includes("delete")&&G>0&&D===ee[ee.length-1]){const P=v.target.value.slice(0,D-1)+v.target.value.slice(D);Z=String(R(P.replace(/,/g,""))),j=j-2}console.log("🚀 ~ file: assets-card.vue:287 ~ handleInput ~ fValue:",Z),d.value=Z,setTimeout(()=>{v.target.setSelectionRange(j<0?0:j,j<0?0:j)},0)};M(()=>e.inputValue,v=>{console.log("🚀 ~ file: assets-card.vue:287 ~ setup ~ newValue:",v);const D=v.includes(".")?v:String(R(v));console.log("🚀 ~ file: assets-card.vue:287 ~ setup ~ fValue:",D),D!==d.value&&(d.value=D)},{immediate:!0}),M(()=>e.inputValue,v=>{console.log("🚀 ~ file: assets-card.vue:287 ~ setup ~ newValue:",v);const D=v.includes(".")&&String(R(v))==="0"?v:String(R(v));console.log("🚀 ~ file: assets-card.vue:287 ~ setup ~ fValue:",D),D!==d.value&&(d.value=D)},{immediate:!0});const _=i(()=>{var v;return h.value.tokensObj&&e.address&&h.value.tokensObj[e.address]&&((v=h.value.tokensObj[e.address])==null?void 0:v.decimals)});let E=p({});return M(()=>h.value.RATES,v=>{v&&(E.value=v)},{immediate:!0}),{pool:h,t:s,addCommom:R,store:T,wallet:I,indicator:m,inputChange:f,importIcon:ie,coinDecimals:_,handleInput:l,formattedValue:d}}});const Rn=e=>(re("data-v-7bb30d80"),e=e(),de(),e),En={class:"card"},Dn={class:"top"},Ln={class:"left"},Un={class:"loading-token"},Wn={key:0,src:Ze,alt:""},Mn={key:1,src:Qe,alt:""},On={class:"bottom"},Vn=Rn(()=>n("div",null,null,-1)),Fn={class:"top"},Hn={class:"right"},Xn={key:0,class:"balance"},Yn={key:2,class:"balance"};function jn(e,t,s,a,$,T){var b,h;const m=bt,S=Je,I=we;return c(),w("div",En,[n("div",Dn,[H(m,{value:e.formattedValue,placeholder:"0.0",onChange:e.inputChange,onInput:e.handleInput,onFocus:t[0]||(t[0]=u=>e.$emit("onFocus"))},null,8,["value","onChange","onInput"]),n("div",Ln,[n("div",Un,[e.coinSymbol=="CETUS"?(c(),w("img",Wn)):(c(),w("img",Mn)),n("div",null,[n("p",null,k(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),n("div",On,[Vn,n("div",Fn,[n("div",Hn,[n("span",null,k(e.$t("common.balance")),1),e.balance!=="--"?(c(),w("span",Xn,k(e.balance>1?("addCommom"in e?e.addCommom:De(R))(e.balance):e.balance),1)):e.balance=="--"&&e.wallet&&e.wallet.address?(c(),O(S,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})):(c(),w("span",Yn,"--")),e.whaleDirection=="From"?(c(),O(I,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((b=e.wallet)!=null&&b.address),onClick:t[1]||(t[1]=u=>e.$emit("halfBalanne"))},{default:J(()=>[U(k("Half"))]),_:1},8,["disabled"])):Y("",!0),e.whaleDirection=="From"?(c(),O(I,{key:4,class:"max-btn",disabled:!e.balance||e.balance==0||!((h=e.wallet)!=null&&h.address),onClick:t[2]||(t[2]=u=>e.$emit("maxBalanne"))},{default:J(()=>[U(k(e.$t("button.max")),1)]),_:1},8,["disabled"])):Y("",!0)])])])])}const qn=te(Pn,[["render",jn],["__scopeId","data-v-7bb30d80"]]);const zn=Ue({components:{Modal:Ct},setup(e,t){const s=be(),a=p(!1);i(()=>s);const $=he(),T=i(()=>$);return{store:s,isSelect:a,clickConvert:()=>{a.value&&localStorage.setItem(`notRemind${T.value.address}`,!0),t.emit("clickConvert")}}}}),Fe=e=>(re("data-v-ee04003a"),e=e(),de(),e),Gn=Fe(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Jn=[Gn],Kn={class:"token-waring-conetnt"},Qn=Fe(()=>n("div",{class:"tips-text"},[U(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),n("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),Zn={class:"read-text"},ea={key:0,src:$t},ta=Fe(()=>n("span",null," Do not remind again. ",-1));function na(e,t,s,a,$,T){const m=we,S=Ke("Modal");return c(),O(S,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:t[3]||(t[3]=I=>e.$emit("close"))},{closeIcon:J(()=>[(c(),w("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:t[0]||(t[0]=I=>e.$emit("close"))},Jn))]),default:J(()=>[n("div",Kn,[Qn,n("div",Zn,[n("div",{class:"radio",onClick:t[1]||(t[1]=I=>e.isSelect=!e.isSelect)},[e.isSelect?(c(),w("img",ea)):Y("",!0)]),ta]),H(m,{class:"big-btn continue",onClick:t[2]||(t[2]=()=>e.clickConvert())},{default:J(()=>[U("Convert")]),_:1})])]),_:1})}const aa=te(zn,[["render",na],["__scopeId","data-v-ee04003a"]]),oa=Ue({setup(){const e=Le(),t=i(()=>e),s=i(()=>t.value.venft_id),a=i(()=>t.value.venftInfo),$=Me(),T=i(()=>$),m=be(),S=i(()=>m),I=At();i(()=>T.value.tokensObj&&T.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const b=p("");let h=p(!1);const u=p(""),d=p(""),f=p(!1),l=p("convert"),{t:_}=_e(),E=p([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),v=p([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),D=p([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),ne=p([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),X=window.setInterval(()=>{e.getXcetusApr(),C.value.address&&(e.getMyShare(C.value.address),e.getVeNFTDividendInfo())},6e4),Z=window.setInterval(async()=>{await e.getAccountWhaleBalance(C.value.address)},1e4);yt(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getDividendManager()}),St(()=>{window.clearInterval(X),window.clearInterval(Z),document.removeEventListener("visibilitychange",()=>{console.log("removeEventListener visibilitychange")})}),M(()=>S.value.theme,(o,r)=>{o!=="sui"&&I.selectSuiTheme(),r&&o!==r&&$.setChainPoolConfigList([])},{immediate:!0});const z=i(()=>(console.log(t.value.whaleBalance,"==>xcetus.value.whaleBalance"),t.value.whaleBalance)),ee=i(()=>t.value.xWhaleBalance),G=i(()=>t.value.availableXwhale),j=i(()=>t.value.redeemingXwhale),K=i(()=>{if(l.value=="convert"){if(Number(u.value)>Number(z.value))return!0}else if(Number(u.value)>Number(G.value))return!0;return!u.value||!d.value||Number(u.value)==0||Number(d.value)==0}),P=p("180"),ae=i(()=>(console.log(l.value=="convert","===>1212211"),l.value=="convert"&&Number(u.value)>Number(z.value)?_("button.insufficientBalance",{name:"CETUS"}):l.value!=="convert"&&Number(u.value)>Number(G.value)?_("button.insufficientBalance",{name:"xCETUS"}):Number(P.value)<15?"Minimum vesting duration is 15 days":l.value=="convert"&&s?"Convert":l.value!=="convert"&&s?"Redeem":"Convert"));console.log(ae.value,"btnText.value===>");const xe=o=>{u.value="",d.value="",l.value=o},oe=()=>{h.value=!0,setTimeout(()=>{h.value=!1},300)},Be=o=>{P.value=o},B=p(!1),Q=Oe("Sui"),ye=he(),C=i(()=>ye),Se=i(()=>t.value.ownerLocks);M(()=>C.value.address,o=>{o?(e.getOwnerVeNFT(o),e.getAccountWhaleBalance(o),e.getOwnerLockCetuss(o),e.getMyShare(o),e.getAccountWhaleBalance(o)):e.loginOut()},{immediate:!0});const x=i(()=>S.value.chainName?We(S.value.chainName):{}),y=i(()=>S.value.chainName),{setIsShowSuccess:W,setIsShowRejected:N,setIsShowWaiting:A,setTransactionDesc:le,setTransactionTxid:V}=m,me=async()=>{B.value=!0,A(!0),V(""),le(_("tips.converting",{from:`${R(u.value,9)} CETUS`,and:"to",to:`${R(u.value,9)} xCETUS`}));try{let o;const r=ke(u.value,9);console.log(s.value,"===>venft_id.value");const g=await Q.depositCetus(r,s.value);console.log(g,"payload==>");const F=await x.value.signAndExecuteTransactionBlock(C.value.currentWallet,g.txb,g.payloadParams);if(o=x.value.handleTx(F),o&&o.hash){V(o.hash),A(!1),W(!0);const L={title:"Converted",desc:`Converted ${R(u.value,9)} xCETUS successfully`,hash:o.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${u.value}`,logoa:ie("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${u.value}`,logob:ie("/sui-image/xWHALE-icon.png")}};y.value!=="Aptos"&&(L.res=o.res),x.value.showTransitionPending(L);const q=await x.value.watchTransaction(L);console.log("0221###swap###transitionStatus####",q),q&&setTimeout(()=>{e.getAccountWhaleBalance(C.value.address),e.getOwnerVeNFT(C.value.address),e.getOwnerLockCetuss(C.value.address),e.getMyShare(C.value.address)},3e3),B.value=!1}else A(!1),N(!0),B.value=!1;u.value=""}catch(o){A(!1),N(!0),B.value=!1,u.value="",console.log(o,"error===>")}},ve=p(!0),Ne=p("0"),et=async()=>{const o=ke(u.value,9),r=await Q.redeemNum(o,Number(P.value));d.value=se(r.amountOut,9),console.log("===>amount2222"),Ne.value=r.percent},tt=async()=>{const o=ke(d.value,9),r=await Q.reverseRedeemNum(o,Number(P.value));console.log(r,"===>amount111"),u.value=se(r.amountOut,9),Ne.value=r.percent};M(()=>[u.value,P.value,ve.value],([o,r,g])=>{console.log(o,"===>>>>>>>fromCoinAmount",typeof o),o&&r&&g&&Number(r)>=15&&et(),!o&&g&&(d.value="")},{immediate:!0}),M(()=>[d.value,P.value,ve.value],([o,r,g])=>{o&&r&&!g&&Number(r)>=15&&(tt(),console.log(o,"===>toCoinAmount")),!o&&!g&&(u.value="")},{immediate:!0}),M(()=>[P.value,ve.value],([o,r])=>{Number(o)>180?P.value="180":Number(o)<15?r?d.value="":u.value="":o||(r?u.value="":d.value="")},{immediate:!0});const nt=()=>{ve.value=!0,u.value=Ie(new je(l.value!=="convert"?G.value:z.value).div(new je(2)).toString(),9)},at=()=>{ve.value=!0,u.value=l.value!=="convert"?Ie(G.value,9):Ie(z.value,9)},He=async()=>{B.value=!0,A(!0),V(""),le(_("tips.redeeming",{from:`${R(u.value,9)} xCETUS`,to:`${R(d.value,9)} CETUS`}));try{let o;const r=ke(u.value,9);console.log(r.toString(),"538====>");const g=await Q.getRedeemLockPayload(r,s.value,Number(P.value));console.log(g,"payload==>");const F=await x.value.signAndExecuteTransactionBlock(C.value.currentWallet,g.txb,g.payloadParams);if(o=x.value.handleTx(F),o&&o.hash){V(o.hash),A(!1),W(!0);const L={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:o.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${u.value}`,logoa:ie("/sui-image/xWHALE-icon.png")}};y.value!=="Aptos"&&(L.res=o.res),x.value.showTransitionPending(L);const q=await x.value.watchTransaction(L);console.log("0221###swap###transitionStatus####",q),q&&setTimeout(()=>{e.getAccountWhaleBalance(C.value.address),e.getOwnerVeNFT(C.value.address),e.getOwnerLockCetuss(C.value.address),e.getMyShare(C.value.address)},3e3),B.value=!1}else A(!1),N(!0),B.value=!1;u.value="",d.value=""}catch(o){A(!1),N(!0),B.value=!1,u.value="",d.value="",console.log(o,"error===>")}};M(()=>[s.value,Se.value,a.value,C.value.address],([o,r,g,F])=>{F&&(o&&e.getVeNFTDividendInfo(),o&&!ue(g)&&e.getAvailableXCetus())},{immediate:!0,deep:!0});const ot=async o=>{B.value=!0,A(!0),V(""),le("");try{let r;console.log(o.id,"==>vItem.id");const g=await Q.getCancelRedeemPayload(o.id,s.value);console.log(g,"payload==>");const F=await x.value.signAndExecuteTransactionBlock(C.value.currentWallet,g==null?void 0:g.txb,g==null?void 0:g.payloadParams);if(r=x.value.handleTx(F),r&&r.hash){V(r.hash),A(!1),W(!0);const L={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:r.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${se(o.xcetus_amount,9)}`,logoa:ie("/sui-image/xWHALE-icon.png")}};y.value!=="Aptos"&&(L.res=r.res),x.value.showTransitionPending(L);const q=await x.value.watchTransaction(L);console.log("0221###swap###transitionStatus####",q),q&&setTimeout(()=>{e.getOwnerVeNFT(C.value.address),e.getOwnerLockCetuss(C.value.address),B.value=!1},3e3)}else A(!1),N(!0),B.value=!1;u.value="",d.value=""}catch(r){A(!1),N(!0),B.value=!1,u.value="",d.value="",e.setClaimLoading(""),console.log(r,"error===>")}},lt=p({}),st=()=>{e.getOwnerLockCetuss(C.value.address)},it=async o=>{console.log(o,"vItem===>"),B.value=!0,A(!0),V(""),le(`${_("tips.claimingPendingYield")} ${R(se(o.cetus_amount,9),9)} CETUS`);try{let r;const g=await Q.getRedeemPayload(o.id,s.value);console.log(g,"payload==>");const F=await x.value.signAndExecuteTransactionBlock(C.value.currentWallet,g==null?void 0:g.txb,g==null?void 0:g.payloadParams);if(r=x.value.handleTx(F),r&&r.hash){V(r.hash),A(!1),W(!0);const L={title:"Claimed",desc:`Claimed ${R(se(o.cetus_amount,9),9)} CETUS successfully.`,hash:r.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${se(o.cetus_amount,9)}`,logoa:ie("/sui-image/WHALE-icon.png")}};y.value!=="Aptos"&&(L.res=r.res),x.value.showTransitionPending(L);const q=await x.value.watchTransaction(L);console.log("0221###swap###transitionStatus####",q),q&&setTimeout(()=>{e.getOwnerLockCetuss(C.value.address),e.getAccountWhaleBalance(C.value.address),e.getOwnerVeNFT(C.value.address),e.getMyShare(C.value.address),e.getAvailableXCetus(),B.value=!1},3e3)}else A(!1),N(!0),B.value=!1;u.value="",d.value=""}catch(r){A(!1),N(!0),B.value=!1,u.value="",d.value="",e.setClaimLoading(""),console.log(r,"error===>")}},Pe=p(!1),ut=()=>{!localStorage.getItem(`notRemind${C.value.address}`)&&ae.value=="Convert"?Pe.value=!0:ae.value=="Redeem"?He():me()},rt=()=>{Pe.value=!1,me()},fe=i(()=>t.value.pendingCoinInfo),pe=i(()=>t.value.pendingAmount),Te=p(!1),dt=async()=>{Te.value=!0,A(!0),V(""),le(`${_("tips.claimingPendingYield")} ${pe.value} ${fe.value.symbol}`),console.log(`${_("tips.claimingPendingYield")} ${pe.value} ${fe.value.symbol}`,"dsadas");try{let o;const r=await Q.getRedeemDividendV2Payload(s.value);console.log(r,"payload==>");const g=await x.value.signAndExecuteTransactionBlock(C.value.currentWallet,r.txb,r.payloadParams);if(o=x.value.handleTx(g),o&&o.hash){V(o.hash),A(!1),W(!0);const F={title:"Claim",desc:`Claimed ${pe.value} ${fe.value.symbol} successfully.`,hash:o.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:fe.value.symbol,numa:`+ ${pe.value}`,logoa:fe.value.logo_url}};y.value!=="Aptos"&&(F.res=o.res),x.value.showTransitionPending(F);const L=await x.value.watchTransaction(F);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getVeNFTDividendInfo(),Te.value=!1},3e3),e.getOwnerLockCetuss(C.value.address)}else A(!1),N(!0),Te.value=!1,B.value=!1}catch(o){A(!1),N(!0),Te.value=!1,console.log(o,"error===>")}},ct=()=>{Number(P.value)<15&&(P.value="15")},mt=()=>{P.value&&(P.value=P.value.replace(/[^\d]/g,""),P.value.charAt(0)==="0"&&(P.value=P.value.slice(1)))},vt=()=>{e.getDividendManager()},gt=i(()=>T.value.tokensObj||{}),ht=i(()=>T.value.RATES||{}),ft=i(()=>t.value.dividendManagerInfo||{});return M(()=>[gt.value,ht.value,ft.value],([o,r,g])=>{!ue(o)&&!ue(r)&&!ue(g)&&e.getXcetusApr()},{immediate:!0}),{clickModalConvert:rt,openConfirmModal:Pe,validateInput:mt,countDown:st,value:b,change:h,clickExchange:oe,fromCoinAmount:u,toCoinAmount:d,showCoinSelect:f,headSwitchValue:l,headSwitchChange:xe,vestingDateList:E,vestingParameter:P,vestingTab:Be,holderList:v,lockupList:D,leaderboardList:ne,whaleBalance:z,depositCetus:me,btnText:ae,loading:B,redeemRatio:Ne,halfBalanne:nt,maxBalanne:at,xWhaleBalance:ee,availableXwhale:G,redeemingXwhale:j,withdrawWhale:He,ownerLocks:Se,cancelRedeemPayload:ot,holderInfo:lt,btnDisabled:K,fixedFromCoin:ve,walletStore:ye,claimWhale:it,wallet:C,depositOrWithdraw:ut,pendingAmount:pe,claimPendingYield:dt,inputBlur:ct,getNextEpoch:vt}}});const ce=e=>(re("data-v-72e2ec7f"),e=e(),de(),e),la={class:"dashboard-all"},sa={class:"dashboard-content"},ia={class:"content-left"},ua={key:0,class:"vesting"},ra=ce(()=>n("p",null,"Vesting",-1)),da={class:"content-right"},ca={key:0,class:"card-container"},ma={class:"card-item"},va={class:"card-item"},ga={class:"exchange"},ha=ce(()=>n("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),fa=[ha],pa={key:1,class:"card-redeem"},_a={class:"card-item"},wa={class:"vesting-duration"},ba={class:"vesting-title"},Ca=ce(()=>n("p",null,"Vesting duration",-1)),ya={class:"vesting-left h5-vesting-left"},Sa={class:"value-days"},Ta=ce(()=>n("span",null,"days",-1)),ka={class:"vesting-content"},Ia={class:"vesting-left pc-vesting-left"},$a={class:"value-days"},Aa=ce(()=>n("span",null,"days",-1)),xa={class:"vesting-right"},Ba=["onClick"],Na={class:"card-item"},Pa={class:"redeem-ratio"},Ra=ce(()=>n("span",null,"Redeem ratio",-1)),Ea={class:"exchange"},Da=ce(()=>n("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),La=[Da];function Ua(e,t,s,a,$,T){const m=pt,S=cn,I=Nn,b=kt,h=qn,u=Tt,d=we,f=aa;return c(),w("div",la,[H(m,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),n("div",sa,[n("div",ia,[H(S,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(c(),w("div",ua,[ra,(c(!0),w(Re,null,Ee(e.ownerLocks,l=>(c(),O(I,{key:l,"v-item":l,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):Y("",!0)]),n("div",da,[H(b,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:t[0]||(t[0]=l=>{e.headSwitchChange(l)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(c(),w("div",ca,[n("div",ma,[H(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[2]||(t[2]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",va,[H(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:t[4]||(t[4]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),n("img",{class:ge(e.change?"gang animationex":"gang"),src:qe,alt:""},null,2),n("div",ga,[(c(),w("svg",{class:ge(e.change?"icon animationex":"icon"),"aria-hidden":"true"},fa,2))])])):(c(),w("div",pa,[n("div",_a,[H(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[6]||(t[6]=l=>{e.fixedFromCoin=!0,e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",wa,[n("div",ba,[Ca,n("div",ya,[n("div",Sa,[$e(n("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>e.vestingParameter=l),onInput:t[8]||(t[8]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:t[9]||(t[9]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[Xe,e.vestingParameter]])]),Ta])]),n("div",ka,[n("div",Ia,[n("div",$a,[$e(n("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>e.vestingParameter=l),onInput:t[11]||(t[11]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:t[12]||(t[12]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[Xe,e.vestingParameter]])]),Aa]),n("div",xa,[(c(!0),w(Re,null,Ee(e.vestingDateList,l=>(c(),w("div",{key:l.time,class:ge(["box-table",{"box-table-active":l.num===Number(e.vestingParameter)}]),onClick:_=>e.vestingTab(l.num)},k(l.time),11,Ba))),128))])]),H(u,{value:e.vestingParameter,"onUpdate:value":t[13]||(t[13]=l=>e.vestingParameter=l),max:180,min:15},null,8,["value"])]),n("div",Na,[H(h,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[14]||(t[14]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:t[15]||(t[15]=l=>{e.fixedFromCoin=!1,e.toCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),n("div",Pa,[Ra,n("p",null,k(e.redeemRatio)+"%",1)]),n("img",{class:ge(e.change?"gang animationex":"gang"),src:qe,alt:""},null,2),n("div",Ea,[(c(),w("svg",{class:ge(e.change?"icon animationex":"icon"),"aria-hidden":"true"},La,2))])])),e.wallet&&e.wallet.address?(c(),O(d,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:J(()=>[n("span",null,k(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(c(),O(d,{key:3,class:"big-btn",onClick:t[16]||(t[16]=l=>e.walletStore.setIsShowWalletModal(!0))},{default:J(()=>[n("span",null,k(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(c(),O(f,{key:0,onClickConvert:e.clickModalConvert,onClose:t[17]||(t[17]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):Y("",!0)])}const ao=te(oa,[["render",Ua],["__scopeId","data-v-72e2ec7f"]]);export{ao as default};
