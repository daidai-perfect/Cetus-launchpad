import{_ as ya}from"./token-warning.e63c2885.js";import{m as b,t as Ha,aa as Ua,r as f,L as Da,A as se,a as ve,C as Ht,o as u,f as y,h as e,I as oe,i as I,x as o,G as D,u as a,M as ut,y as ee,O as bt,p as Ce,k as Le,e as _e,c as B,w as F,j as H,$ as Kt,K as Gt,B as et,a2 as mt,a3 as Ba,z as Fa,q as ja,s as za,fg as Vt,b as Wa,fh as ia,a0 as Va,D as Qt,N as Yt,F as G,E as Ue,P as Xt,J as Ya,H as qa}from"./entry.ec51292c.js";/* empty css              */import"./decimal.a2826370.js";import{c as Ae,Q as oa,R as pe,b as it,a as R,U as ra,p as ua,r as We,o as Zt}from"./common.923681a5.js";import{a as wt,u as vt,b as Ut}from"./index.5ec39a2c.js";import{_ as Ja}from"./token-warning-modal.7871bfe5.js";/* empty css              *//* empty css              */import{_ as Ka}from"./refresh-icon.5b1f5ed4.js";import{c as A,s as Ga,i as Qa,u as De,ak as Xa,aj as Lt}from"./index.1602a5cd.js";import{_ as Za}from"./coin-select.9edf4f53.js";import{D as k}from"./decimal.765d8738.js";import{U as ba}from"./underline-tab.712edb8a.js";import{T as ca}from"./token-input-block.d550157b.js";import{I as es}from"./icon-tooltip.7a57c664.js";import{B as da}from"./bignumber.266e6c56.js";import{_ as ts}from"./img-no-Positions_2x.9e24c205.js";import{_ as as}from"./img-connect-wallet_2x.0715fc8f.js";import{S as ss}from"./data.712deea2.js";/* empty css              */const ns=""+globalThis.__publicAssetsURL("sui-image/img-no-data@2x.png");function He(t){const c={fullRpcUrl:localStorage.getItem(`${t}-currentRpclocal2`)||A[t||"Sui"].fullRpcUrl,simulationAccount:A[t||"Sui"].simulationAccount,cetus_config:A[t||"Sui"].cetus_config,clmm_pool:A[t||"Sui"].clmm_pool,integrate:A[t||"Sui"].integrate,deepbook:A[t||"Sui"].deepbook,deepbook_endpoint_v2:A[t||"Sui"].deepbook_endpoint_v2,aggregatorUrl:A[t||"Sui"].aggregatorUrl,swapCountUrl:A[t||"Sui"].swapCountUrl},n={launchpad:A[t||"Sui"].launchpad,ido:A[t||"Sui"].ido,xcetus:A[t||"Sui"].xcetus,xcetus_dividends:A[t||"Sui"].xcetus_dividends,cetus_faucet:A[t||"Sui"].cetus_faucet,xtoken:A[t||"Sui"].xtoken,xtoken_dividends:A[t||"Sui"].xtoken_dividends,token_faucet:A[t||"Sui"].token_faucet,booster:A[t||"Sui"].booster,maker_bonus:A[t||"Sui"].maker_bonus,liquidity_stratefy:A[t||"Sui"].liquidity_stratefy,vaults:A[t||"Sui"].vaults,frams:A[t||"Sui"].frams,limit_order:A[t||"Sui"].limit_order};console.log("defaultNetworkOptions####",c);const m=new Ga(c),p=new Qa(n,m),w=De(),h=b(()=>w);Ha(()=>{h.value.address&&(m.senderAddress=h.value.address)});const _=async()=>await p.LimitOrder.getLimitOrderTokenList(),s=async()=>await p.LimitOrder.getLimitOrderPoolList(),x=async()=>{try{return await p.LimitOrder.getOwnerLimitOrderList(p.ClmmSDK.senderAddress,"all")}catch($){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useLimitOrder.ts:71 ~ getOwnerLimitOrderList ~ error:",$)}},r=$=>({transactionBlock:$,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),i=async $=>{const{pay_coin_amount:v,price:M,expired_ts:Q,pay_coin_type:j,target_coin_type:ne,pay_decimal:le,target_decimal:ie}=$,de=new k(v).mul(Math.pow(10,le)).toNumber();console.log("useLimitOrder placeLimitOrder params##",$);const X=await p.LimitOrder.placeLimitOrder({pay_coin_amount:de,price:M,expired_ts:Q,pay_coin_type:j=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":j,target_coin_type:ne=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":ne,pay_decimal:le,target_decimal:ie});return console.log("useLimitOrder placeLimitOrder payload##",X),r(X)},T=async $=>{console.log("cancelOrdersByOwner params",$);const v=await p.LimitOrder.cancelOrdersByOwner($);return r(v)},L=async $=>await p.LimitOrder.getLimitOrderLogs($),d=async $=>{const v=await p.LimitOrder.claimTargetCoin({order_id:$.order_id,pay_coin_type:$.pay_coin_type,target_coin_type:$.target_coin_type});return r(v)},S=async $=>await p.LimitOrder.getLimitOrderClaimLogs($);return{getLimitOrderTokenList:_,getLimitOrderPoolList:s,getOwnerLimitOrderList:x,placeLimitOrder:i,rateToPrice:Xa.rateToPrice,cancelOrdersByOwner:T,getLimitOrderLogs:L,claimTargetCoin:d,getLimitOrderClaimLogs:S}}const Tt="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Te=Ua("LimitOrder",{state:()=>({limitTokenList:[],limitTokenObj:{},limitOrderPoolList:[],limitOrderList:[],orderNum:0,orderListLoading:!1,limitTokenMinAmountObj:{},limitOrderHistoryList:[],historyNum:0,orderHistoryObj:{},cancelOrderId:"",orderHistoryLoading:!1,currentOrderClaimHistory:[],claimHistoryLoading:!0,RATES:{},marketPriceLoading:!0,haveMarket:!0,isShowChart:JSON.parse(localStorage.getItem("isShowChart"))||!1}),actions:{async getTokenMinAmount(){const c=await He("Sui").getLimitOrderTokenList();this.limitTokenMinAmountObj=Object.fromEntries(c.map((n,m)=>[n.coin_type==Tt?"0x2::sui::SUI":n.coin_type,n])),console.log(c,"store limitorder getLimitgetTokenMinAmount###")},async getPoolList(){const c=await He("Sui").getLimitOrderPoolList();this.limitOrderPoolList=c.map(n=>({indexer_id:n.indexer_id,pay_coin_type:n.pay_coin_type==Tt?"0x2::sui::SUI":n.pay_coin_type,target_coin_type:n.target_coin_type==Tt?"0x2::sui::SUI":n.target_coin_type})),console.log(c,"store limitorder getLimitOrderPoolList###")},async getOrderList(){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:42 ~ getOrderList ~ getOrderList:");const t=He("Sui");this.orderListLoading=!0;try{const c=await t.getOwnerLimitOrderList();console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:46 ~ getOrderList ~ result:",c);const n=c.data.filter(m=>m.status=="PartialCompleted"||m.status=="Running")||[];this.limitOrderList=n.sort((m,p)=>p.created_ts-m.created_ts),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:52 ~ getOrderList ~ this.limitOrderList:",this.limitOrderList),this.orderListLoading=!1,this.cancelOrderId=""}catch(c){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:53 ~ getOrderList ~ e:",c),this.orderListLoading=!1,this.cancelOrderId=""}},async getTokenList(){const c=(await fetch(`${A.Sui.api}/v2/sui/coin_metadata`,{method:"POST",body:JSON.stringify({})}).then(n=>n.json())).data.list||[];this.limitTokenList=c,this.limitTokenObj=Object.fromEntries(c.map((n,m)=>[n.coin_type==Tt?"0x2::sui::SUI":n.coin_type,n])),console.log(c,"store limitorder getLimitOrderTokenList###")},async getLimitOrderLogs(){},async getLimitOrderHistory(t){this.orderHistoryLoading=!0;const{data:c}=await fetch(`${A.Sui.api}/v2/sui/limit_order?wallet_address=${t}`).then(m=>m.json()),n=c.list||[];this.limitOrderHistoryList=n||[],this.orderHistoryLoading=!1},async getLimitOrderClaimHistory(t){this.currentOrderClaimHistory=[],this.claimHistoryLoading=!0;const n=await He("Sui").getLimitOrderClaimLogs(t.id);this.currentOrderClaimHistory=n.map(m=>{const p=new k(m.parsedJson.claimed_amount).div(Math.pow(10,t.target_coin_info.decimals));return{...m,...m.parsedJson,claimed_amount:p}}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:105 ~ getLimitOrderClaimHistory ~ currentOrderClaimHistory:",this.currentOrderClaimHistory),this.claimHistoryLoading=!1},setOrderNum(t){this.orderNum=t},setHistoryNum(t){this.historyNum=t},setLimitOrderLoading(t){this.cancelOrderId=t},async setRates(t){this.marketPriceLoading=!0;let c={};if(t&&t.includes("Sui"))try{c=await $fetch(`${A.Sui.api}/v2/sui/price`)}catch(p){console.log("sui pric api error ###",p),c={data:{prices:ss}}}else c=await $fetch(`${A.Aptos.api}/v2/price`);const n=c.data.prices||[],m=[];n.forEach(p=>{p.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?m.push({...p},{...p,base_symbol:"0x2::sui::SUI"}):m.push(p)}),this.RATES=Object.fromEntries(m.map(p=>[p.base_symbol,p])),this.marketPriceLoading=!1},setHaveMarket(t){this.haveMarket=t},setIsShowChart(t){localStorage.setItem("isShowChart",JSON.stringify(t)),this.isShowChart=t},limitOrderLogOut(){this.limitOrderHistoryList=[],this.limitOrderList=[]}}}),O=f(),C=f(),ls=wt(),wa=b(()=>ls),$a=vt(),is=b(()=>$a),va=b(()=>is.value.chainName),Oe=Ut("Sui"),os=Da(),xa=f(!0);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:53 ~ route:",os);se(()=>[wa.value.tokensObj,xa.value],async([t,c])=>{if(!Ae(t)){const n=oa("from"),m=oa("to");console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:61 ~ routerCoinTo:",n,m),n&&m?O.value=t[n]||await Oe.getTokenBySymbol(t,n):!n&&!O.value&&(O.value=t[A[va.value].swapDefaultPair.fromCoin]),n&&m?C.value=t[m]||await Oe.getTokenBySymbol(t,m):!m&&!C.value&&(C.value=t[A[va.value].swapDefaultPair.toCoin])}},{});const{setTransactionTxid:rs,setIsShowWaiting:It,setIsShowSuccess:us,setIsShowRejected:_a,setTransactionDesc:cs}=$a,ma=f(!1),Ze=Te(),ea=b(()=>Ze),ds=b(()=>ea.value.limitOrderList),vs=De(),Jt=b(()=>vs),ta=async(t,c=!1)=>{const n=He("Sui");try{cs("Canceling order"),It(!0);const p=c?ds.value.map(s=>({order_id:s.id,pay_coin_type:s.pay_coin_type,target_coin_type:s.target_coin_type})):[{order_id:t.id,pay_coin_type:t.pay_coin_type,target_coin_type:t.target_coin_type}];Ze.setLimitOrderLoading(c?"all":t.id),console.log("cacelLimitOrder parmas",p);const w=await n.cancelOrdersByOwner(p),h=await Oe.signAndExecuteTransactionBlock(Jt.value.currentWallet,w),_=Oe.handleTx(h);if(_&&_.hash){rs(_.hash),It(!1),us(!0),ma.value=!1;const s={title:"Transaction",desc:"Order cancelled successfully",hash:_.hash,icon:"icon-icon-Increased"};s.res=_.res,Oe.showTransitionPending(s),await Oe.watchTransaction(s)&&setTimeout(()=>{Oe.getAccount(Jt.value.address),Ze.getOrderList()},2e3)}else It(!1),_a(!0),Ze.setLimitOrderLoading("")}catch(m){It(!1),_a(!0),ma.value=!1,Ze.setLimitOrderLoading(""),console.log("trade-data.ts cancel error##",m)}},pa=f(!1),te=f(!0),E=f(),N=f();function fa(){pa.value=!0;const t=O.value;O.value=C.value,C.value=t,te.value=!te.value;const c=E.value,n=N.value;te.value?(E.value=N.value,N.value=c):(N.value=E.value,E.value=n),setTimeout(()=>{pa.value=!1},300)}se(()=>xa.value,()=>{E.value="",N.value=""},{immediate:!0});const lt=f("orders"),ft=f(1),Et=f(10),K=f([]),gt=f([]),_s=f(1),ot=f(),pt=b(()=>ea.value.limitOrderList),Rt=b(()=>wa.value.tokensObj),ms=He("Sui"),rt=f(),ps=t=>{rt.value={...rt.value,[t.id]:t}},qt=f(!1),ga=b(()=>ea.value.cancelOrderId),fs=async()=>{const t=Et.value*ft.value-Et.value;let c=ft.value*Et.value;c=c>pt.value.length?pt.value.length:c;const n=pt.value;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:147 ~ updateOrderList ~ ordersList.value:",pt.value),console.log("trade-card updateOrderList tokenObj",Rt.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:257 ~ updateOrderList ~ orderDirectObj.value:",rt.value),n.length>0){const m=[],p=n.filter((h,_)=>_>=t&&_<c);for(let h=0;h<p.length;h++){const _=p[h];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:176 ~ updateOrderList ~ order.pay_coin_type:",await Oe.getTokenListByCoinType[_.pay_coin_type]);const s=Rt.value[_.pay_coin_type]||(await Oe.getTokenListByCoinType([_.pay_coin_type]))[0],x=Rt.value[_.target_coin_type]||(await Oe.getTokenListByCoinType([_.target_coin_type]))[0];console.log(_,"order###"),console.log(s.decimals,"##pay_coin_info.decimals");const r=pe(ms.rateToPrice(_.rate,s.decimals,x.decimals).toString(),s.decimals),i=new k(_.total_pay_amount).div(Math.pow(10,s.decimals)).toString(),T=new k(_.total_pay_amount).mul(new k(Math.pow(10,18))).div(new k(_.rate)).ceil().div(new k(Math.pow(10,x.decimals))).toString(),L=new k(_.total_pay_amount).mul(new k(r)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:166 ~ updateOrderList ~ totalBuyNum:",T,L);const d=new k(_.obtained_amount).div(Math.pow(10,x.decimals)).toString(),S=it(new k(d).div(new k(T)).mul(100).toString(),2),$=new k(_.target_balance).div(Math.pow(10,x.decimals)).toString(),v=pe(new k(1).div(new k(r)).toString());console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:217 ~ updateOrderList ~ new Decimal(1).div(new Decimal(rate)).toString():",new k(1).div(new k(r)).toString()),m.push({..._,pay_coin_info:s,target_coin_info:x,total_pay_amount:i,rate:r,totalBuyNum:T,obtained_amount:d,obtainedRatio:S,target_balance:$,reseverRate:v,direction:rt.value&&rt.value[_.id]&&rt.value[_.id].direction||!1})}K.value=m,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:255 ~ updateOrderList ~ pageList.value:",K.value),_s.value==1;const w=m.filter(h=>{var _;return h.id==((_=ot==null?void 0:ot.value)==null?void 0:_.id)});ot.value=w&&w.length>0?w[0]:""}gt.value=n,Ze.setOrderNum(n.length),console.log("allList",gt.value),console.log("pageList",K.value)};se(()=>[pt.value,ft.value,Rt.value,Jt.value.address],([t,c,n,m])=>{t&&t.length>0&&n&&!Ae(n)&&m?fs():(K.value=[],gt.value=[],Ze.setOrderNum(0))},{immediate:!0});const gs=t=>(Ce("data-v-fa5a04b3"),t=t(),Le(),t),hs={class:"switch-direction"},ys={class:"left"},bs={key:0,class:"token-info"},ws={key:0},$s={key:1,class:"token-info"},xs={alt:""},ks={alt:""},Ss={class:"iframe-chart-box"},Os={key:0,class:"chart-no-data"},Cs=gs(()=>e("img",{src:ns,alt:""},null,-1)),Ls=["src","onload"],Ts=ve({__name:"trade-chart",setup(t){const c=f(!0);f(!0),f(),f(),f();const n=Te(),m=b(()=>n);b(()=>m.value.RATES),b(()=>m.value.marketPriceLoading);const p=b(()=>m.value.haveMarket);f(),f();const w=vt(),h=b(()=>w),_=b(()=>h.value.addressLpTokens),s=wt(),x=b(()=>s),r=b(()=>x.value.openPool),i=f(),T=()=>{var d;const L=[];if((d=r==null?void 0:r.value)==null||d.forEach(S=>{var $,v,M,Q,j,ne,le,ie;if(S.coinA.address.toUpperCase()===((v=($=O==null?void 0:O.value)==null?void 0:$.address)==null?void 0:v.toUpperCase())&&S.coinB.address.toUpperCase()===((Q=(M=C==null?void 0:C.value)==null?void 0:M.address)==null?void 0:Q.toUpperCase())||S.coinB.address.toUpperCase()===((ne=(j=O==null?void 0:O.value)==null?void 0:j.address)==null?void 0:ne.toUpperCase())&&S.coinA.address.toUpperCase()===((ie=(le=C==null?void 0:C.value)==null?void 0:le.address)==null?void 0:ie.toUpperCase())){const de=(_==null?void 0:_.value[S.address])||{};de&&!Ae(de)&&L.push({...S,pure_tvl_in_usd:de.pure_tvl_in_usd})}}),L&&L.length>0){const S=L.sort(($,v)=>$.pure_tvl_in_usd-v.pure_tvl_in_usd)[0];return i.value=S,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-chart.vue:327 ~ poolInfo ~ result:",S),!1}i.value=null};return se(()=>[r.value,_.value,O.value,C.value],([L,d])=>{L&&L.length>0&&d&&!Ae(d)&&T()},{immediate:!0}),(L,d)=>{var M,Q,j,ne,le,ie,de,X,qe,Ie,Y,re,be,we,$e,Me,V,ge,Ee,Je,xe,Ke,Be,Ge,Re,me,Qe,Z,ue,z,fe,W,ce,he,Pe,kt,St,st,Xe;const S=ya,$=bt,v=Ht("image");return u(),y("div",{class:ee(["trade-chart",!c.value&&!i.value?"trade-chart-no-pool":""])},[e("div",hs,[e("div",ys,[i.value?(u(),y("div",bs,[e("div",null,[oe(e("img",null,null,512),[[v,(M=i.value)!=null&&M.needReverse?(j=(Q=i.value)==null?void 0:Q.token_b)==null?void 0:j.logo_url:(le=(ne=i.value)==null?void 0:ne.token_a)==null?void 0:le.logo_url]]),I(S,{address:(ie=i.value)!=null&&ie.needReverse?(X=(de=i.value)==null?void 0:de.token_b)==null?void 0:X.address:(Ie=(qe=i.value)==null?void 0:qe.token_a)==null?void 0:Ie.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[oe(e("img",null,null,512),[[v,(Y=i.value)!=null&&Y.needReverse?(be=(re=i.value)==null?void 0:re.token_a)==null?void 0:be.logo_url:($e=(we=i.value)==null?void 0:we.token_b)==null?void 0:$e.logo_url]]),I(S,{address:(Me=i.value)!=null&&Me.needReverse?(ge=(V=i.value)==null?void 0:V.token_a)==null?void 0:ge.address:(Je=(Ee=i.value)==null?void 0:Ee.token_b)==null?void 0:Je.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),i.value?(u(),y("span",ws,o((xe=i.value)!=null&&xe.needReverse?(Be=(Ke=i.value)==null?void 0:Ke.token_b)==null?void 0:Be.symbol:(Re=(Ge=i.value)==null?void 0:Ge.token_a)==null?void 0:Re.symbol)+" / "+o((me=i.value)!=null&&me.needReverse?(Z=(Qe=i.value)==null?void 0:Qe.token_a)==null?void 0:Z.symbol:(z=(ue=i.value)==null?void 0:ue.token_b)==null?void 0:z.symbol),1)):D("",!0)])):a(O)&&a(C)?(u(),y("div",$s,[e("div",null,[oe(e("img",xs,null,512),[[v,(fe=a(O))==null?void 0:fe.logo_url]]),I(S,{address:(W=a(O))==null?void 0:W.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[oe(e("img",ks,null,512),[[v,(ce=a(C))==null?void 0:ce.logo_url]]),I(S,{address:(he=a(C))==null?void 0:he.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o((Pe=a(O))==null?void 0:Pe.symbol)+" / "+o((kt=a(C))==null?void 0:kt.symbol),1)])):D("",!0)])]),e("div",Ss,[!c.value&&!i.value?(u(),y("div",Os,[Cs,e("span",null,o(p.value?"Price chart is currently not available for this pair, but you can still place your limit orders.":"No data avaliable"),1)])):D("",!0),oe(e("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",src:`https://birdeye.so/tv-widget/${(st=(St=i.value)==null?void 0:St.token_a)==null?void 0:st.address}/${(Xe=i.value)==null?void 0:Xe.address}?chain=sui`,onload:()=>{c.value=!1}},null,8,Ls),[[ut,!c.value&&i.value]]),oe(I($,null,null,512),[[ut,c.value]])])],2)}}});const zo=_e(Ts,[["__scopeId","data-v-fa5a04b3"]]),ka=t=>(Ce("data-v-424fa68d"),t=t(),Le(),t),Is={class:"custom-expiry"},Ms={class:"input-box"},Es=ka(()=>e("div",{class:"minutes"},"Hours",-1)),Rs={class:"input-box"},Ps=ka(()=>e("div",{class:"minutes"},"Minutes",-1)),Ns=ve({__name:"custom-expires-modal",setup(t){const c=f(),n=f(),m=f({}),p=(s,x)=>{const r=(s||0)*60+Number(x||0),i=Math.floor(r/(60*24)),T=Math.floor(r%(60*24)/60),L=r%60;let d="";i>0&&(d+=i+"d "),T>0&&(d+=T+"h "),L>0&&(d+=L+"m "),m.value={timeText:d.trim()||"0 m",time:r*60*1e3}};se(()=>[c.value,n.value],([s,x])=>{p(s,x)},{immediate:!0});const w=s=>{const x=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");s.target.value=s.target.value.replace(x,"$1"),c.value=s.target.value,console.log(c.value,"##inputChange")},h=s=>{const x=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");s.target.value=s.target.value.replace(x,"$1"),n.value=s.target.value},_=b(()=>!c.value&&!n.value||Number(c.value)==0&&!n.value||Number(n.value)==0&&!c.value||Number(c.value)==0&&Number(n.value)==0);return(s,x)=>{const r=Gt,i=et;return u(),B(a(Kt),{class:"new-modal-have-btn",title:"Custom Expiry Period",visible:!0,width:"400px",footer:null,onCancel:x[3]||(x[3]=T=>s.$emit("closeModal"))},{default:F(()=>[e("div",Is,[e("div",Ms,[I(r,{value:c.value,"onUpdate:value":x[0]||(x[0]=T=>c.value=T),placeholder:"0",onChange:w},null,8,["value"]),Es]),e("div",Rs,[I(r,{value:n.value,"onUpdate:value":x[1]||(x[1]=T=>n.value=T),placeholder:"0",onChange:h},null,8,["value"]),Ps]),I(i,{class:"set-period modal-bottom-btn",disabled:_.value,onClick:x[2]||(x[2]=T=>s.$emit("sendTime",m.value))},{default:F(()=>[H("Set Period")]),_:1},8,["disabled"])])]),_:1})}}});const As=_e(Ns,[["__scopeId","data-v-424fa68d"]]),tt=t=>(Ce("data-v-cd0718ea"),t=t(),Le(),t),Hs=tt(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Us=[Hs],Ds={class:"trade-cofirm-content"},Bs={class:"coin-info"},Fs={class:"from-coin-info"},js={class:"left"},zs={class:"coin-amount"},Ws={class:"coin-symbol"},Vs={class:"right"},Ys={class:"to-coin-info"},qs={class:"left"},Js={class:"coin-amount"},Ks={class:"coin-symbol"},Gs={class:"right"},Qs=tt(()=>e("div",{class:"new-sui-exchange to-swap-logo"},[e("div",{class:"exchange-new"},[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap1"})])])],-1)),Xs={class:"trade-info"},Zs={class:"price"},en=tt(()=>e("div",{class:"label"},"Pirce",-1)),tn={class:"text"},an={key:0},sn={key:1},nn=tt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),ln=[nn],on={class:"expires-in"},rn=tt(()=>e("div",{class:"label"},"Expires in",-1)),un={class:"text"},cn=tt(()=>e("div",{class:"trade-tips1"}," You will receive exactly what you have specified if your order is fully filled in the end. ",-1)),dn=tt(()=>e("div",{class:"trade-tips2"}," Please note that your order may not be filled immediately after the price is triggered, depending on pending sequence and liquidity depth. ",-1)),vn=ve({__name:"trade-confirm",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},direction:{type:Boolean,default:!1},price:{type:String,default:""},currentExpires:{type:String,default:""}},emits:["to-trade","close"],setup(t,{emit:c}){const n=t,m=c,p=f(!1),w=b(()=>new k(1).div(new k(n.price)).toString()),h=async()=>{m("to-trade")};return(_,s)=>{const x=et,r=Ht("image");return u(),B(a(Kt),{title:"Review your order",width:"440px",footer:null,visible:!0,class:"trade-confirm-modal new-modal-have-btn"},{closeIcon:F(()=>[(u(),y("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:s[0]||(s[0]=i=>m("close"))},Us))]),default:F(()=>{var i,T,L,d,S,$,v,M;return[e("div",Ds,[e("div",Bs,[e("div",Fs,[e("div",js,[e("div",zs,o(t.fromCoinAmount&&a(R)(t.fromCoinAmount)),1),e("div",Ws,o(t.fromCoin&&t.fromCoin.symbol),1)]),e("div",Vs,[oe(e("img",null,null,512),[[r,t.fromCoin&&t.fromCoin.logo_url]])])]),e("div",Ys,[e("div",qs,[e("div",Js,o(t.toCoinAmount&&a(R)(t.toCoinAmount)),1),e("div",Ks,o(t.toCoin&&t.toCoin.symbol),1)]),e("div",Gs,[oe(e("img",null,null,512),[[r,t.toCoin&&t.toCoin.logo_url]])]),Qs])]),e("div",Xs,[e("div",Zs,[en,e("div",tn,[t.direction?(u(),y("span",sn,o(a(R)(a(pe)(p.value?w.value:t.price,9)))+" "+o(p.value?($=t.fromCoin)==null?void 0:$.symbol:(S=t.toCoin)==null?void 0:S.symbol)+" per "+o(p.value?(M=t.toCoin)==null?void 0:M.symbol:(v=t.fromCoin)==null?void 0:v.symbol),1)):(u(),y("span",an,o(a(R)(a(pe)(p.value?w.value:t.price,9)))+" "+o(p.value?(T=t.toCoin)==null?void 0:T.symbol:(i=t.fromCoin)==null?void 0:i.symbol)+" per "+o(p.value?(d=t.fromCoin)==null?void 0:d.symbol:(L=t.toCoin)==null?void 0:L.symbol),1)),e("div",{class:"right",onClick:s[1]||(s[1]=Q=>p.value=!p.value)},ln)])]),e("div",on,[rn,e("div",un,o(t.currentExpires),1)])]),cn,dn]),I(x,{class:"big-btn trade-confirm-btn modal-bottom-btn",onClick:s[2]||(s[2]=Q=>h())},{default:F(()=>[H(" Place Order ")]),_:1})]}),_:1})}}});const _n=_e(vn,[["__scopeId","data-v-cd0718ea"]]),Dt=t=>(Ce("data-v-9ab5dec1"),t=t(),Le(),t),mn={class:"trade-card"},pn={class:"trade-content"},fn={class:"trade-card-title"},gn={class:"tit-icon-box"},hn={class:"icon-bg"},yn=Dt(()=>e("use",{"xlink:href":"#icon-icon_kline"},null,-1)),bn=[yn],wn={class:"icon-bg"},$n={class:"trade-card-content"},xn=Ya('<div class="exchange-new" data-v-9ab5dec1><svg class="icon icon-down" aria-hidden="true" data-v-9ab5dec1><use xlink:href="#icon-icon_swap1" data-v-9ab5dec1></use></svg><svg class="icon icon-swap" aria-hidden="true" data-v-9ab5dec1><use xlink:href="#icon-tx_swap1" data-v-9ab5dec1></use></svg></div>',1),kn=[xn],Sn={class:"sell-setting"},On={class:"sell-rate"},Cn={class:"top"},Ln={key:0,class:"direction-text"},Tn={key:1,class:"direction-text"},In={class:"bottom"},Mn={class:"coin-symbol"},En=Dt(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),Rn=[En],Pn={class:"top"},Nn=Dt(()=>e("span",null,"Expiry in",-1)),An={class:"bottom"},Hn=Dt(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Un=[Hn],Dn=["onClick"],Bn={class:"market-price-tips"},Fn=ve({__name:"trade-card",setup(t){const c=mt(Ba,{style:{fontSize:"14px",marginLeft:"4px",color:"#75c8ff"},spin:!0}),{t:n}=Fa(),m=[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}];f("Limit");const p=De(),w=b(()=>p),h=b(()=>w.value.assets&&O.value&&w.value.assets[O.value.address]?ua(w.value.assets[O.value.address].balance,O.value.decimals):0);b(()=>w.value.assets&&C.value&&w.value.assets[C.value.address]?ua(w.value.assets[C.value.address].balance,C.value.decimals):0);const _=f(""),s=f(""),x=f(""),r=f(!1),i=g=>{var l,U,q,ae;_.value=g,g==="fromCoin"?(s.value=((l=C.value)==null?void 0:l.address)||"",x.value=((U=O.value)==null?void 0:U.address)||""):(s.value=((q=O.value)==null?void 0:q.address)||"",x.value=((ae=C.value)==null?void 0:ae.address)||""),r.value=!0},T=["5 Minutes","10 Minutes","30 Minutes","1 Hour","1 Day","3 Days","7 Days","1 Month","Custom"],L=g=>{switch(g){case"5 Minutes":return 3e5;case"10 Minutes":return 6e5;case"30 Minutes":return 18e5;case"1 Hour":return 36e5;case"1 Day":return 864e5;case"7 Days":return 6048e5;case"1 Month":return 2592e6;default:return 0}},d=f(!1),S=f("7 Days"),$=f(!1),v=f(),M=f(0),Q=g=>{S.value=g.timeText,M.value=g.time,$.value=!1},j=f(),ne=g=>{j.value=_.value==="fromCoin"?O.value:C.value;let l=!1;_.value==="fromCoin"?(E.value="",C.value&&g.address.toLowerCase()===(C==null?void 0:C.value.address.toLowerCase())&&(C.value=O.value,l=!0),O.value=g):(O.value&&(N.value="",g.address.toLowerCase()===(O==null?void 0:O.value.address.toLowerCase())&&(O.value=C.value,l=!0)),C.value=g),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:416 ~ onCoinSelect ~ toCoin.value:",C.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:453 ~ onCoinSelect ~ fromCoin.value:",O.value),l||(Z.value=!1),r.value=!1},le=f(20),ie=f(0),de=f(null),X=f(!1),qe=()=>{X.value||(clearInterval(de.value),w.value.address&&(V.getOrderList(),V.getLimitOrderHistory(w.value.address),me.getAccount(w.value.address)),z.value||W.value?Ft():Xe(!1),ie.value=0,X.value=!0,setTimeout(()=>{X.value=!1,Ie()},1e3))},Ie=()=>{de.value=setInterval(()=>{X.value=!1,ie.value<le.value&&(ie.value+=1,ie.value===le.value&&qe())},1e3)};ja(()=>{Ie(),window.addEventListener("click",()=>{d.value=!1})}),za(()=>{clearInterval(de.value)});const Y=()=>{if(te.value&&(!E.value||E.value==0)||!te.value&&(!N.value||N.value==0))return!1;if(v.value<=0&&nt.value)return te.value?N.value="":E.value="",!1;if(Number(E.value)<=0&&Number(N.value)<=0)return!1;if(v.value<=0&&!nt.value&&E.value>0&&N.value>0)return console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:480 ~ updateAmounts ~ fromCoinAmount.value&&toCoinAmount.value:",E.value>0&&N.value>0),v.value=Z.value?pe(new k(N.value||0).div(new k(E.value||0)).toString()):pe(new k(E.value||0).div(new k(N.value||0)).toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:497 ~ updateAmounts ~ fixedFromCoin.value :",te.value),!1;if(v.value<=0&&!nt.value)return!1;te.value?Z.value?N.value=it(new k(E.value).mul(new k(v.value||0)).toString(),C.value.decimals):N.value=it(new k(E.value).div(new k(v.value||0)).toString(),C.value.decimals):Z.value?E.value=it(new k(N.value).div(new k(v.value||0)).toString(),O.value.decimals):E.value=it(new k(N.value).mul(new k(v.value||0)).toString(),O.value.decimals)};se(E,Vt((g,l)=>{g&&g!==0&&te.value&&Y(),g==""&&te.value&&(N.value="")},100)),se(v,Vt((g,l)=>{g&&g!==0&&Y(),g==""&&te.value&&(N.value="")},100)),se(N,Vt((g,l)=>{g&&g!==0&&!te.value&&Y(),g==""&&!te.value&&(E.value="")},100));const re=wt(),be=b(()=>re),we=b(()=>{var q;const l=(q=be.value.RATES[O.value.address])==null?void 0:q.price,U=new k(l||0).mul(E.value||0).toNumber();if(l){if(U<5&&l)return!0}else return!1;return!1}),$e=b(()=>!O.value||!C.value?n("modal.selectTokenModalTitle"):Pe.value?!Number(E.value)||!Number(N.value)?n("button.enterAmount"):we.value?"Order size should be higher than $5":Number(E.value)>Number(h.value)?n("button.insufficientBalance",{name:O.value.symbol}):"Place Limit Order":"No Available Route"),Me=b(()=>!!(!O.value||!C.value||!v.value||we.value||!Number(E.value)&&!Number(N.value)||Number(E.value)>Number(h.value)||Number(E.value)==0||Number(N.value)==0||!Pe.value)),V=Te(),ge=b(()=>V),Ee=vt(),{setTransactionTxid:Je,setIsShowWaiting:xe,setIsShowSuccess:Ke,setIsShowRejected:Be,setTransactionDesc:Ge}=Ee,Re=f(!1),me=Ut("Sui"),Qe=async()=>{Ct.value=!1;const g=He("Sui"),l=Date.parse(new Date().toString())+(L(S.value)||M.value);try{Ge("Creating order"),xe(!0);const q={pay_coin_amount:E.value,price:Z.value?v.value:new k(1).div(new k(v.value)).toString(),expired_ts:l,pay_coin_type:O.value.address,target_coin_type:C.value.address,pay_decimal:O.value.decimals,target_decimal:C.value.decimals};console.log("placeLimitOrder parmas",q);const ae=await g.placeLimitOrder(q),_t=await me.signAndExecuteTransactionBlock(w.value.currentWallet,ae),ke=me.handleTx(_t);if(ke&&ke.hash){Je(ke.hash),xe(!1),Ke(!0),Re.value=!1;const Ne={title:"Transaction",desc:"Order placed successfully",hash:ke.hash,icon:"icon-icon-Increased"};Ne.res=ke.res,me.showTransitionPending(Ne),await me.watchTransaction(Ne)&&setTimeout(()=>{me.getAccount(w.value.address),V.getOrderList()},1e3)}else xe(!1),Be(!0)}catch(U){xe(!1),Be(!0),Re.value=!1,console.log("trade-card openOrder error##",U)}},Z=f(!1),ue=f(),z=f(""),fe=f(),W=f("0"),ce=f(""),he=f(),Pe=f(!0),kt=async()=>{var U,q;let g;if(te.value){const ae=new k(1).mul(Math.pow(10,(U=O==null?void 0:O.value)==null?void 0:U.decimals)).toString();g=new da(ae)}else{const ae=new k(1).mul(Math.pow(10,(q=C==null?void 0:C.value)==null?void 0:q.decimals)).toString();g=new da(ae)}const l=await me.getBestRouterByServer(O,C,g,te.value,w.value.address,!1,!1);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:805 ~ getTokenRouter ~ res:",l),l&&l.splitPaths&&l.splitPaths.length>0?(Pe.value=!0,V.setHaveMarket(!0)):(Pe.value=!1,V.setHaveMarket(!1))},St=async()=>{var ke,Ne;const l=(await $fetch(`${A.Sui.api}/v2/sui/price?base_symbol_address_pair=${ra(O.value.address)},${ra(C.value.address)}`)).data.prices||[],U=[];l.forEach(Se=>{Se.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?U.push({...Se,base_symbol:"0x2::sui::SUI"}):U.push(Se)});const q=Object.fromEntries(U.map(Se=>[Se.base_symbol,Se]));console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:872 ~ setMarketPriceFromRate ~ RATES:",q);const ae=new k((ke=q[C.value.address])==null?void 0:ke.price),_t=new k((Ne=q[O.value.address])==null?void 0:Ne.price);return{inputAmount:ae,outputAmount:_t}},st=f(!1),Xe=async g=>{g||(st.value=!0);let l;try{l=await St()}catch(U){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:787 ~ setMarketPrice ~ error:",U)}if(W.value="",console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:794 ~ setMarketPrice ~ res:",l),!l||l.outputAmount.toNumber()<=0&&l.inputAmount.toNumber()<=0)return he.value=!1,ce.value="",z.value="",W.value="",!1;he.value=!0,g?ue.value=Z.value?pe(l.outputAmount.div(l.inputAmount).toString()):pe(l.inputAmount.div(l.outputAmount).toString()):v.value=Z.value?pe(l.outputAmount.div(l.inputAmount).toString()):pe(l.inputAmount.div(l.outputAmount).toString()),setTimeout(()=>{st.value=!1},1e3)},Bt=f(!1),Ft=async()=>{Bt.value=!0,await Xe(!0),ce.value="",z.value="",W.value="";const g=new k(v.value).sub(new k(ue.value)).div(new k(ue.value)).mul(100);W.value=g.toNumber().toFixed(2);const l=Math.abs(g.toNumber()).toFixed(2);z.value=`Limit order price is ${l}% ${W.value>0?"higher":"lower"} than the market.`,Z.value?v.value>ue.value?(ce.value="",fe.value="#68FFD8"):ue.value>v.value&&(ce.value=`Your limit order price is ${l}% ${W.value>0?"higher":"lower"} than market. You are selling at a much higher rate. We recommend you to use`,fe.value="#ffb62d"):v.value>ue.value?(ce.value=`Your limit order price is ${l}% ${W.value>0?"higher":"lower"} than market. You are buying at a much lower rate. We recommend you to use`,fe.value="#ffb62d"):ue.value>v.value&&(ce.value="",fe.value="#68FFD8"),Bt.value=!1};se(()=>[O.value,C.value],([g,l])=>{g&&l&&(v.value="",Xe(!1))},{immediate:!0});const nt=f(!1),Ea=g=>{const l=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,18})?).*$");g.target.value=g.target.value.replace(l,"$1"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1002 ~ priceChange ~ e.target.value:",g.target.value),v.value=g.target.value,ce.value="",z.value="",W.value="",nt.value=!0,v.value&&v.value>0&&Pe.value&&Ft()},Ra=()=>{Z.value=!Z.value,v.value=pe(new k(1).div(new k(v.value)).toString()),v.value>0&&Pe.value&&Ft()},Fe=f(),je=f(),Ot=f(!1),sa=(g,l)=>{var q,ae;const U=Ee.importTokenListObj;g&&!Ae(g)&&g!=null&&g.isSelfBuilt&&!(U!=null&&U.hasOwnProperty(g==null?void 0:g.address))&&(_.value="fromCoin",Fe.value=g),l&&!Ae(l)&&l!=null&&l.isSelfBuilt&&!(U!=null&&U.hasOwnProperty(l==null?void 0:l.address))&&(_.value="toCoin",je.value=l),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1034 ~ getTokenSource ~ warningFromCoin.value:",Fe.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1046 ~ getTokenSource ~ warningToCoin.value:",je.value),((q=Fe==null?void 0:Fe.value)!=null&&q.address||(ae=je==null?void 0:je.value)!=null&&ae.address)&&(Ot.value=!0)};se(()=>[O.value,C.value],([g,l])=>{g&&!Ae(g)&&sa(g,{}),l&&!Ae(l)&&sa({},l)},{immediate:!0});const Pa=()=>{_.value==="fromCoin"?O.value=j.value:C.value=j.value,Ot.value=!1,Fe.value="",je.value=""},Na=b(()=>{var g,l;return`/swap?from=${(g=O==null?void 0:O.value)==null?void 0:g.address}&to=${(l=C==null?void 0:C.value)==null?void 0:l.address}`}),Aa=Wa();se(()=>[O.value,C.value],([g,l])=>{if(g&&l){if(kt(),Y(),g||l){const U=`/limit/${g==null?void 0:g.address}-${l==null?void 0:l.address}`;Aa.push(U)}}else V.setHaveMarket(!1)},{immediate:!0});const Ct=f(!1),jt=b(()=>ge.value.isShowChart),zt=f(!0),Wt=f(!1);return(g,l)=>{var Ne,Se,na,la;const U=Xt,q=bt,ae=et,_t=Gt,ke=Ja;return u(),y("div",mn,[e("div",pn,[e("div",fn,[I(ba,{"tab-list":m,"current-tab":"limit",onClickTab:l[0]||(l[0]=P=>g.$router.push(P.link))}),e("div",gn,[I(U,{"overlay-class-name":"ant-tooltip-text-color"},{title:F(()=>[H(o(jt.value?"Hide reference price":"View reference price"),1)]),default:F(()=>[e("div",hn,[(u(),y("svg",{class:ee(["chart-icon",jt.value?"active-chart-icon":""]),"aria-hidden":"true",onClick:l[1]||(l[1]=P=>a(V).setIsShowChart(!jt.value))},bn,2))])]),_:1}),e("div",wn,[I(Ka,{loading:X.value,"auto-refresh-time":le.value,countdown:ie.value,"tooltip-placement":"left",onClickRefresh:qe},null,8,["loading","auto-refresh-time","countdown"])])])]),e("div",$n,[e("div",{class:ee(["card-container",[zt.value?"input-block-add-top":"",Wt.value?"input-block-add-bottom":""]])},[I(ca,{modelValue:a(E),"onUpdate:modelValue":l[2]||(l[2]=P=>ia(E)?E.value=P:null),"input-value":a(E),"token-info":a(O)||null,"title-text":"Sell",onOnInput:l[3]||(l[3]=P=>{E.value=P,te.value=!0,nt.value=!1}),onOnFocus:l[4]||(l[4]=()=>{zt.value=!0,Wt.value=!1}),onOnSelect:l[5]||(l[5]=P=>i("fromCoin"))},null,8,["modelValue","input-value","token-info"]),I(ca,{modelValue:a(N),"onUpdate:modelValue":l[6]||(l[6]=P=>ia(N)?N.value=P:null),"input-value":a(N),"token-info":a(C)||null,"have-max":!1,"have-half":!1,"title-text":"Buy",onOnInput:l[7]||(l[7]=P=>{N.value=P,te.value=!1,nt.value=!1}),onOnFocus:l[8]||(l[8]=()=>{zt.value=!1,Wt.value=!0}),onOnSelect:l[9]||(l[9]=P=>i("toCoin"))},null,8,["modelValue","input-value","token-info"])],2),e("div",{class:"exchange new-sui-exchange",onClick:l[10]||(l[10]=(...P)=>a(fa)&&a(fa)(...P))},kn)]),e("div",Sn,[e("div",On,[e("div",Cn,[e("div",null,[Z.value?(u(),y("div",Ln," Sell "+o((Ne=a(O))==null?void 0:Ne.symbol)+" at rate",1)):(u(),y("div",Tn,"Buy "+o((Se=a(C))==null?void 0:Se.symbol)+" at rate ",1)),Bt.value?(u(),B(q,{key:2,indicator:a(c)},null,8,["indicator"])):(u(),B(U,{key:3,"overlay-class-name":"ant-tooltip-text-color"},Va({default:F(()=>[v.value&&ue.value&&he.value&&Number(W.value)!==0?(u(),y("div",{key:0,class:"rate",style:Yt({color:fe.value})},o(Number(W.value)>0&&Number(W.value)<1e4?`+${W.value}`:Number(W.value)>1e4?">10000":W.value)+"% ",5)):D("",!0)]),_:2},[z.value?{name:"title",fn:F(()=>[H(o(z.value),1)]),key:"0"}:void 0]),1024))]),he.value?(u(),B(ae,{key:0,loading:st.value,class:"set-market max-btn",onClick:l[11]||(l[11]=P=>Xe(!1))},{default:F(()=>[H("Market")]),_:1},8,["loading"])):D("",!0)]),e("div",In,[I(_t,{value:v.value,"onUpdate:value":l[12]||(l[12]=P=>v.value=P),placeholder:"0.0",onOnInput:l[13]||(l[13]=()=>{te.value=!0}),onChange:Ea},null,8,["value"]),e("div",Mn,[e("span",null,o(Z.value?(na=a(C))==null?void 0:na.symbol:(la=a(O))==null?void 0:la.symbol),1),e("div",{class:"right",onClick:Ra},Rn)])])]),e("div",{class:"sell-expires",onClick:l[14]||(l[14]=Qt(P=>d.value=!d.value,["stop"]))},[e("div",Pn,[Nn,I(es,{type:"expiryIn","xlink-href":"#icon-icon_tips"})]),e("div",An,[e("span",null,o(S.value),1),(u(),y("svg",{class:"icon","aria-hidden":"true",style:Yt(d.value?{transform:"rotate(180deg)"}:{})},Un,4))]),e("div",{class:"expires-list",style:Yt(d.value?{display:"block"}:{})},[(u(),y(G,null,Ue(T,P=>e("div",{key:P,class:ee(["expirer-item",P==S.value?"expirer-item-active":""]),onClick:wo=>P=="Custom"?$.value=!0:S.value=P},o(P),11,Dn)),64))],4)])]),oe(e("div",Bn,[H(o(ce.value)+" ",1),e("span",{onClick:l[15]||(l[15]=P=>g.$router.push(Na.value))},"Cetus Swap"),H(" instead. ")],512),[[ut,v.value&&ue.value&&Number(W.value)!==0&&ce.value&&he.value]])]),w.value&&w.value.address?(u(),B(ae,{key:0,disabled:Me.value,class:ee(["place-order-btn",$e.value&&$e.value.length>40?"place-order-btn-size":""]),loading:Re.value,onClick:l[16]||(l[16]=P=>Ct.value=!0)},{default:F(()=>[H(o($e.value),1)]),_:1},8,["disabled","class","loading"])):(u(),B(ae,{key:1,class:"place-order-btn",onClick:l[17]||(l[17]=P=>w.value.setIsShowWalletModal(!0))},{default:F(()=>[H("Connect wallet")]),_:1})),$.value?(u(),B(As,{key:2,onCloseModal:l[18]||(l[18]=P=>$.value=!1),onSendTime:Q})):D("",!0),r.value?(u(),B(Za,{key:3,"existing-coins":s.value,"last-select-coin":x.value,"have-import-btn":!0,onOnSelect:ne,onOnClose:l[19]||(l[19]=P=>r.value=!1)},null,8,["existing-coins","last-select-coin"])):D("",!0),Ot.value?(u(),B(ke,{key:4,"from-coin":Fe.value,"to-coin":je.value,"is-import-modal":!0,onClose:Pa,onClickContinue:l[20]||(l[20]=()=>{Ot.value=!1,Fe.value="",je.value=""})},null,8,["from-coin","to-coin"])):D("",!0),Ct.value?(u(),B(_n,{key:5,"from-coin":a(O),"to-coin":a(C),"from-coin-amount":a(E),"to-coin-amount":a(N),direction:Z.value,price:v.value,"current-expires":S.value,onClose:l[21]||(l[21]=P=>Ct.value=!1),onToTrade:Qe},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","direction","price","current-expires"])):D("",!0)])}}});const Wo=_e(Fn,[["__scopeId","data-v-9ab5dec1"]]),Sa=t=>(Ce("data-v-a8dd45fb"),t=t(),Le(),t),jn={key:0,class:"no-data"},zn=Sa(()=>e("img",{src:ts,alt:""},null,-1)),Wn={key:1,class:"no-data"},Vn=Sa(()=>e("img",{src:as,alt:""},null,-1)),Yn=ve({__name:"trade-no-data",props:{platform:{type:String,default:"platform"}},setup(t){const c=De(),n=p=>{switch(p){case"orders":return"You don't have any open orders yet.";case"history":return"You don't have any order history.";case"claim":return"No History."}},m=b(()=>c);return(p,w)=>{const h=et;return m.value&&m.value.address?(u(),y("div",jn,[zn,e("span",null,o(n(t.platform)),1)])):(u(),y("div",Wn,[Vn,I(h,{class:"connect-wallet",onClick:w[0]||(w[0]=_=>m.value.setIsShowWalletModal(!0))},{default:F(()=>[H("Connect Wallet")]),_:1})]))}}});const aa=_e(Yn,[["__scopeId","data-v-a8dd45fb"]]),qn={class:"trade-info"},Jn={alt:""},Kn={alt:""},Gn=ve({__name:"trade-info",props:{order:{type:Object,default:()=>({})}},setup(t){return(c,n)=>{var w,h,_,s,x,r,i,T,L,d,S,$,v,M;const m=ya,p=Ht("image");return u(),y("div",qn,[e("div",null,[oe(e("img",Jn,null,512),[[p,(h=(w=t.order)==null?void 0:w.pay_coin_info)==null?void 0:h.logo_url]]),I(m,{address:(s=(_=t.order)==null?void 0:_.pay_coin_info)==null?void 0:s.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[oe(e("img",Kn,null,512),[[p,(r=(x=t.order)==null?void 0:x.target_coin_info)==null?void 0:r.logo_url]]),I(m,{address:(T=(i=t.order)==null?void 0:i.target_coin_info)==null?void 0:T.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o(a(R)((L=t.order)==null?void 0:L.total_pay_amount))+" "+o((S=(d=t.order)==null?void 0:d.pay_coin_info)==null?void 0:S.symbol)+" â†’ "+o(a(R)(($=t.order)==null?void 0:$.totalBuyNum))+" "+o((M=(v=t.order)==null?void 0:v.target_coin_info)==null?void 0:M.symbol),1)])}}});const $t=_e(Gn,[["__scopeId","data-v-d1826e2f"]]),Ve=t=>(Ce("data-v-55e5ca76"),t=t(),Le(),t),Qn={class:"claim-modal-content"},Xn=Ve(()=>e("div",{class:"desc"}," For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ",-1)),Zn={class:"order-info-detail"},el={class:"order-info"},tl=Ve(()=>e("div",{class:"label"},"Price",-1)),al={class:"text"},sl=Ve(()=>e("div",{class:"label"},"Filled size",-1)),nl={class:"text"},ll=Ve(()=>e("div",{class:"label"},"Expiry",-1)),il={class:"text"},ol={class:"tab"},rl=["onClick"],ul={key:0,class:"claim-content"},cl={class:"inp-box"},dl=Ve(()=>e("div",{class:"top"},[e("div",{class:"avalibale-claim"},"Avalibale to claim")],-1)),vl={class:"bottom"},_l={class:"token-info"},ml={alt:""},pl={key:1,class:"history-list"},fl={class:"amount"},gl=Ve(()=>e("div",{class:"label"},"Amount",-1)),hl={class:"text"},yl={alt:""},bl={class:"time"},wl=Ve(()=>e("div",{class:"label"},"Time",-1)),$l={class:"text"},xl=["href"],kl=Ve(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),Sl=[kl],Ol={key:2,class:"loading-box"},Cl=ve({__name:"trade-claim-modal",props:{order:{type:Object,default:()=>({})}},emits:["closeModal"],setup(t,{emit:c}){const n=t,m=["Claim","History"],p=f("Claim"),w=f(),h=Y=>{const re=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${n.order.target_coin_info.decimals}})?).*$`);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ props.order.target_coin_info.decimals:",n.order.target_coin_info.decimals),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ reg:",re),w.value=Y.target.value.replace(re,"$1")},_=f(!0);se(()=>n.order.target_balance,Y=>{Y&&Y>0&&_.value?(w.value=Y,_.value=!1):w.value=0},{immediate:!0});const s=b(()=>!!(w.value>n.order.target_balance||ne.value||!w.value||n.order.target_balance==0)),x=b(()=>w.value>n.order.target_balance?"Maximum amount that can be withdrawn":w.value?"Confirm Claim":"Claim"),r=vt(),i=b(()=>r),T=De(),L=b(()=>T),d=He("Sui"),{setTransactionTxid:S,setIsShowWaiting:$,setIsShowSuccess:v,setIsShowRejected:M,setTransactionDesc:Q}=r,j=Ut("Sui"),ne=f(!1),le=Te(),ie=b(()=>le),de=async()=>{var Y,re;ne.value=!0;try{const be=`Claim ${R(w.value)} ${(re=(Y=n.order)==null?void 0:Y.target_coin_info)==null?void 0:re.symbol}`;Q(be),$(!0);const we={order_id:n.order.id,pay_coin_type:n.order.pay_coin_type,target_coin_type:n.order.target_coin_type};console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:194 ~ confirmClaim ~ params:",we);const $e=await d.claimTargetCoin(we),Me=await j.signAndExecuteTransactionBlock(L.value.currentWallet,$e),V=j.handleTx(Me);if(V&&V.hash){S(V.hash),$(!1),v(!0);const ge={title:"Transaction",desc:"Claim successfully",hash:V.hash,icon:"icon-icon-Increased"};ge.res=V.res,j.showTransitionPending(ge),await j.watchTransaction(ge)&&(setTimeout(()=>{j.getAccount(L.value.address),le.getOrderList()},2e3),setTimeout(()=>{w.value=0,ne.value=!1},4e3))}else $(!1),M(!0)}catch(be){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:222 ~ confirmClaim ~ error:",be),$(!1),M(!0),ne.value=!1}};se(()=>p.value,Y=>{Y=="History"&&le.getLimitOrderClaimHistory(n.order)},{immediate:!0});const X=b(()=>ie.value.currentOrderClaimHistory),qe=b(()=>i.value.currentExplorer),Ie=b(()=>ie.value.claimHistoryLoading);return(Y,re)=>{const be=Gt,we=et,$e=bt,Me=Ht("image");return u(),B(a(Kt),{title:"Claim",visible:!0,width:"440px",footer:null,onCancel:re[1]||(re[1]=V=>Y.$emit("closeModal"))},{default:F(()=>{var V,ge,Ee,Je,xe,Ke,Be,Ge,Re,me,Qe,Z,ue;return[e("div",Qn,[Xn,e("div",Zn,[I($t,{order:t.order},null,8,["order"]),e("div",el,[e("div",null,[tl,e("div",al,o(a(R)(t.order.reseverRate))+" "+o((ge=(V=t.order)==null?void 0:V.pay_coin_info)==null?void 0:ge.symbol)+" per "+o((Je=(Ee=t.order)==null?void 0:Ee.target_coin_info)==null?void 0:Je.symbol),1)]),e("div",null,[sl,e("div",nl,[H(o(a(R)((xe=t.order)==null?void 0:xe.obtained_amount))+"/"+o(a(R)((Ke=t.order)==null?void 0:Ke.totalBuyNum))+" "+o((Ge=(Be=t.order)==null?void 0:Be.target_coin_info)==null?void 0:Ge.symbol)+" ",1),e("span",null,"("+o((Re=t.order)==null?void 0:Re.obtainedRatio)+"%)",1)])]),e("div",null,[ll,e("div",il,o(a(We)(t.order.expire_ts,""))+" (UTC) ",1)])])]),e("div",ol,[(u(),y(G,null,Ue(m,z=>e("div",{key:z,class:ee(["tab-item",p.value==z?"tab-item-active":""]),onClick:fe=>p.value=z},o(z),11,rl)),64))]),p.value=="Claim"?(u(),y("div",ul,[e("div",cl,[dl,e("div",vl,[I(be,{value:w.value,"onUpdate:value":re[0]||(re[0]=z=>w.value=z),disabled:"",onChange:h},null,8,["value"]),e("div",_l,[oe(e("img",ml,null,512),[[Me,(Qe=(me=t.order)==null?void 0:me.target_coin_info)==null?void 0:Qe.logo_url]]),e("span",null,o((ue=(Z=t.order)==null?void 0:Z.target_coin_info)==null?void 0:ue.symbol),1)])])]),I(we,{disabled:s.value,class:"claim-btn",loading:ne.value,onClick:de},{default:F(()=>[H(o(x.value),1)]),_:1},8,["disabled","loading"])])):(u(),y("div",pl,[!Ie.value&&X.value&&X.value.length>0?(u(!0),y(G,{key:0},Ue(X.value,z=>{var fe,W,ce,he;return u(),y("div",{key:z.digest,class:"history-item"},[e("div",fl,[gl,e("div",hl,[oe(e("img",yl,null,512),[[Me,(W=(fe=t.order)==null?void 0:fe.target_coin_info)==null?void 0:W.logo_url]]),e("span",null,o(a(R)(z.claimed_amount))+" "+o((he=(ce=t.order)==null?void 0:ce.target_coin_info)==null?void 0:he.symbol),1)])]),e("div",bl,[wl,e("div",$l,[e("span",null,o(a(We)(Number(z.timestampMs),""))+" (UTC)",1),e("a",{target:"_blank",href:a(Zt)(qe.value,"tx",z.digest)},Sl,8,xl)])])])}),128)):!Ie.value&&X.value&&X.value.length==0?(u(),B(aa,{key:1,platform:"claim"})):Ie.value&&X.value&&X.value.length==0?(u(),y("div",Ol,[I($e)])):D("",!0)]))])]}),_:1})}}});const Oa=_e(Cl,[["__scopeId","data-v-55e5ca76"]]),xt=t=>(Ce("data-v-0f062fdc"),t=t(),Le(),t),Ll={class:"trade-order-card-list"},Tl={class:"order-info"},Il=xt(()=>e("div",{class:"label"},"Price",-1)),Ml={class:"text"},El=["onClick"],Rl=xt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Pl=[Rl],Nl=xt(()=>e("div",{class:"label"},"Filled size",-1)),Al={class:"text"},Hl=xt(()=>e("div",{class:"label"},"Expiry",-1)),Ul={class:"text"},Dl=xt(()=>e("div",{class:"trade-claim-btn trade-claim-btn-disabled"},"Claim",-1)),Bl=ve({__name:"trade-order-card",props:{pageList:{type:Object,default:()=>({})}},setup(t){const c=f(),n=f(!1),m=Te(),p=b(()=>m),w=b(()=>p.value.cancelOrderId);return(h,_)=>{const s=Xt,x=et,r=Oa;return u(),y("div",Ll,[(u(!0),y(G,null,Ue(t.pageList,i=>{var T,L,d,S,$;return u(),y("div",{key:i.id,class:"trade-order-card"},[I($t,{order:i},null,8,["order"]),e("div",Tl,[e("div",null,[Il,e("div",Ml,[i.direction?(u(),y(G,{key:0},[H(o(a(R)(i==null?void 0:i.rate))+" "+o((T=i==null?void 0:i.target_coin_info)==null?void 0:T.symbol)+" per "+o((L=i==null?void 0:i.pay_coin_info)==null?void 0:L.symbol),1)],64)):(u(),y(G,{key:1},[H(o(a(R)(i==null?void 0:i.reseverRate))+" "+o((d=i==null?void 0:i.pay_coin_info)==null?void 0:d.symbol)+" per "+o((S=i==null?void 0:i.target_coin_info)==null?void 0:S.symbol),1)],64)),e("div",{class:"right",onClick:v=>i.direction=!i.direction},Pl,8,El)])]),e("div",null,[Nl,e("div",Al,[H(o(a(R)(i==null?void 0:i.obtained_amount))+"/"+o(a(R)(i==null?void 0:i.totalBuyNum))+" "+o(($=i==null?void 0:i.target_coin_info)==null?void 0:$.symbol)+" ",1),e("span",null,"("+o(i==null?void 0:i.obtainedRatio)+"%)",1)])]),e("div",null,[Hl,e("div",Ul,o(a(We)(i.created_ts,""))+" (UTC)",1)])]),i.target_balance==0&&i.obtained_amount==0?(u(),B(s,{key:0,"overlay-class-name":"ant-tooltip-text-color"},{title:F(()=>[H(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:F(()=>[Dl]),_:1})):(u(),B(x,{key:1,class:"trade-claim-btn",onClick:()=>{c.value=i,n.value=!0}},{default:F(()=>[H("Claim")]),_:2},1032,["onClick"])),I(x,{class:"trade-cancel-btn cancel-btn",loading:w.value=="all"||w.value==i.id,onClick:v=>a(ta)(i)},{default:F(()=>[H("Cancel")]),_:2},1032,["loading","onClick"])])}),128)),n.value?(u(),B(r,{key:0,order:c.value,onCloseModal:_[0]||(_[0]=i=>n.value=!1)},null,8,["order"])):D("",!0)])}}});const Fl=_e(Bl,[["__scopeId","data-v-0f062fdc"]]),jl=ve({props:{currentPageNum:{type:Number,default:null},pageSize:{type:[Number,String],default:""},total:{type:Number,default:null}},setup(t){return{itemRender:(n,m,p)=>(n==null?void 0:n.type)==="prev"?mt("svg",{class:"icon icon-prev","aria-hidden":"true"},[mt("use",{"xlink:href":"#icon-icon_left"})]):(n==null?void 0:n.type)==="next"?mt("svg",{class:"icon icon-next","aria-hidden":"true"},[mt("use",{"xlink:href":"#icon-icon_right"})]):p}}});function zl(t,c,n,m,p,w){const h=qa;return u(),B(h,{current:t.currentPageNum,"page-size":t.pageSize,"item-render":t.itemRender,total:t.total,simple:"",onChange:c[0]||(c[0]=_=>{t.$emit("change",_)})},null,8,["current","page-size","item-render","total"])}const Ca=_e(jl,[["render",zl]]),La=t=>(Ce("data-v-e96066e0"),t=t(),Le(),t),Wl={class:"trade-orders"},Vl={key:0},Yl=La(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Price"),e("th",null,"Filled size"),e("th",null,"Expiry"),e("th",null,"Action")])],-1)),ql={class:"order-price"},Jl=["onClick"],Kl=La(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Gl=[Kl],Ql={class:"filled-size"},Xl={class:"action"},Zl={key:4,class:"loading-box"},ei=ve({__name:"trade-orders",setup(t){const c=De(),n=b(()=>c),m=Te(),p=b(()=>m);b(()=>p.value.limitOrderList);const w=wt(),h=b(()=>w);b(()=>h.value.tokensObj),se(()=>n.value.address,x=>{x&&m.getOrderList()},{immediate:!0});const _=b(()=>p.value.orderListLoading),s=(x,r)=>{console.log(x,"page"),ft.value=x};return(x,r)=>{const i=et,T=Xt,L=bt;return u(),y("div",Wl,[n.value&&n.value.address&&a(K)&&a(K).length>0?(u(),y("table",Vl,[Yl,e("tbody",null,[(u(!0),y(G,null,Ue(a(K),d=>{var S,$,v,M,Q;return u(),y("tr",{key:d.id},[e("td",null,[I($t,{order:d},null,8,["order"])]),e("td",null,[e("div",ql,[d.direction?(u(),y(G,{key:0},[H(o(a(R)(d==null?void 0:d.rate))+" "+o((S=d==null?void 0:d.target_coin_info)==null?void 0:S.symbol)+" per "+o(($=d==null?void 0:d.pay_coin_info)==null?void 0:$.symbol),1)],64)):(u(),y(G,{key:1},[H(o(a(R)(d==null?void 0:d.reseverRate))+" "+o((v=d==null?void 0:d.pay_coin_info)==null?void 0:v.symbol)+" per "+o((M=d==null?void 0:d.target_coin_info)==null?void 0:M.symbol),1)],64)),e("div",{class:"right",onClick:()=>{d.direction=!d.direction,a(ps)(d)}},Gl,8,Jl)])]),e("td",null,[e("div",Ql,[H(o(a(R)(d==null?void 0:d.obtained_amount))+"/"+o(a(R)(d==null?void 0:d.totalBuyNum))+" "+o((Q=d==null?void 0:d.target_coin_info)==null?void 0:Q.symbol)+" ",1),e("span",null,"("+o(d==null?void 0:d.obtainedRatio)+"%)",1)])]),e("td",null,o(a(We)(d==null?void 0:d.expire_ts,""))+" (UTC)",1),e("td",null,[e("div",Xl,[I(T,{"overlay-class-name":"expiry-tooltip ant-tooltip-text-color"},{title:F(()=>[H(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:F(()=>[I(i,{class:"trade-claim-btn",disabled:d.target_balance==0&&d.obtained_amount==0,onClick:()=>{ot.value=d,qt.value=!0}},{default:F(()=>[H("Claim")]),_:2},1032,["disabled","onClick"])]),_:2},1024),I(i,{class:"trade-cancel-btn cancel-btn",loading:a(ga)=="all"||a(ga)==d.id,onClick:j=>a(ta)(d)},{default:F(()=>[H("Cancel")]),_:2},1032,["loading","onClick"])])])])}),128))])])):D("",!0),n.value&&n.value.address&&a(K)&&a(K).length>0?(u(),B(Fl,{key:1,"page-list":a(K)},null,8,["page-list"])):D("",!0),(a(K)&&a(K).length==0||!n.value.address)&&!_.value?(u(),B(aa,{key:2,platform:"orders"})):D("",!0),a(K)&&a(K).length>0?(u(),y("div",{key:3,class:ee(["pagination",a(K)&&a(K).length>0&&_.value?"loading-pagination":""])},[I(Ca,{"page-size":a(Et),total:a(gt)&&a(gt).length,"current-page-num":a(ft),onChange:s},null,8,["page-size","total","current-page-num"])],2)):D("",!0),a(K)&&a(K).length==0&&_.value?(u(),y("div",Zl,[I(L)])):D("",!0),a(K)&&a(K).length>0&&_.value?(u(),B(L,{key:5,class:"order-spin"})):D("",!0),a(qt)?(u(),B(Oa,{key:6,order:a(ot),onCloseModal:r[0]||(r[0]=d=>qt.value=!1)},null,8,["order"])):D("",!0)])}}});const ti=_e(ei,[["__scopeId","data-v-e96066e0"]]),ct=t=>{switch(t){case"Running":return{class:"order-running",path:"#icon-icon_completed"};case"Completed":return{class:"order-running",path:"#icon-icon_completed"};case"Cancelled":return{class:"order-cancelled",path:"#icon-icon_cancelled"};default:return{class:"",path:""}}},ze=t=>{switch(t){case"OrderPlacedEvent":return{path:"#icon-tx_add1",class:"order-status-create",text:"Create"};case"OrderCanceledEvent":return{path:"#icon-icon_cancelled",class:"order-status-cancel",text:"Cancel"};case"FlashLoanEvent":return{path:"#icon-tx_swap1",class:"order-status-trade",text:"Trade"};default:return{path:"",class:"",text:""}}},dt=Te(),ye=f({}),Ta=(t,c)=>{ye.value[c]?ye.value[c]=!1:(ye.value[c]=!0,dt.getLimitOrderLogs()),console.log(ye.value,"##isShowPosition.value")},ai=De(),Ia=b(()=>ai),si=wt(),ni=b(()=>si),Pt=b(()=>ni.value.tokensObj),Ma=b(()=>dt),Nt=b(()=>Ma.value.limitOrderHistoryList),ha=Ut("Sui"),li=He("Sui"),ht=f(1),At=f(10),J=f([]),yt=f([]),ii=async()=>{const t=At.value*ht.value-At.value;let c=ht.value*At.value;c=c>Nt.value.length?Nt.value.length:c;const n=Nt.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:174 ~ updateOrderList ~ result:",n),console.log("trade-card updateOrderList tokenObj",Pt.value);const m=[];if(n.length>0){const p=n.filter((w,h)=>h>=t&&h<c);for(let w=0;w<p.length;w++){const h=p[w];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:188 ~ updateOrderList ~ order:",h,h.order_id);const _=Pt.value[Lt(h.pay_coin,!1)]||await ha.getTokenBySymbol({},Lt(h.pay_coin,!1)),s=Pt.value[Lt(h.target_coin,!1)]||await ha.getTokenBySymbol({},Lt(h.target_coin,!1)),x=pe(li.rateToPrice(h.rate,_.decimals,s.decimals).toString(),_.decimals);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:211 ~ updateOrderList ~ rate:",x);const r=new k(h.total_pay_amount).div(Math.pow(10,_.decimals)).toString(),i=new k(h.remaining_amount).div(Math.pow(10,_.decimals)).toString(),T=new k(r).sub(new k(i)).toString(),L=new k(h.total_pay_amount).mul(new k(Math.pow(10,18))).div(new k(h.rate)).ceil().div(new k(Math.pow(10,s.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:226 ~ updateOrderList ~ order.rate:",h.rate);const d=pe(new k(1).div(new k(x)).toString()),S=h.events.map($=>{const v=$.event_type.split("::")[2];let M="";return v=="OrderPlacedEvent"?M=new k($.amount).div(Math.pow(10,_.decimals)).toString():v=="FlashLoanEvent"?M=new k($.amount).div(Math.pow(10,s.decimals)).toString():v=="OrderCanceledEvent"&&(M=new k($.amount).div(Math.pow(10,_.decimals)).toString()),{...$,amount:M,type:v}}).sort(($,v)=>v.block_time-$.block_time);m.push({...h,pay_coin_info:_,target_coin_info:s,total_pay_amount:r,rate:x,remaining_amount:i,transaction_ratio:it(new k(h.total_pay_amount).sub(new k(h.remaining_amount)).div(new k(h.total_pay_amount)).mul(100).toString(),2),transaction_volume:T,status:h.cancel_reason==0?"Completed":"Cancelled",events:S,totalBuyNum:L,reseverRate:d,direction:!0})}J.value=m}yt.value=n,dt.setHistoryNum(n.length),console.log("allList",yt.value),console.log("pageList",J.value)},oi=(t,c)=>{console.log(t,"page"),ht.value=t};se(()=>[Nt.value,ht.value,Pt.value,Ia.value.address],([t,c,n,m])=>{t&&t.length>0&&n&&!Ae(n)&&m?ii():(J.value=[],yt.value=[],dt.setHistoryNum(0))},{immediate:!0});se(()=>Ia.value.address,t=>{t&&(dt.getLimitOrderLogs(),dt.getLimitOrderHistory(t))},{immediate:!0});const Mt=b(()=>Ma.value.orderHistoryLoading),Ye=t=>(Ce("data-v-c0f555a8"),t=t(),Le(),t),ri={class:"history-card-list"},ui={class:"history-info"},ci=Ye(()=>e("div",{class:"label"},"Limit price",-1)),di={class:"text"},vi=["onClick"],_i=Ye(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),mi=[_i],pi=Ye(()=>e("div",{class:"label"},"Expiry",-1)),fi={class:"text"},gi=Ye(()=>e("div",{class:"label"},"Filled size",-1)),hi={class:"text"},yi=Ye(()=>e("div",{class:"label"},"Status",-1)),bi={class:"text"},wi=["onClick"],$i=["xlink:href"],xi=Ye(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),ki=[xi],Si={class:"order-log-num"},Oi={class:"order-status"},Ci=["xlink:href"],Li={class:"create-ts"},Ti={key:0},Ii={key:1},Mi={class:"view-trans"},Ei=["href"],Ri=Ye(()=>e("span",null,"View Txn.",-1)),Pi=Ye(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),Ni=[Ri,Pi],Ai=ve({__name:"trade-history-card",props:{pageList:{type:Object,default:()=>[]}},setup(t){const c=vt(),n=b(()=>c),m=b(()=>n.value.currentExplorer),p=Te(),w=b(()=>p);return b(()=>w.value.orderHistoryObj),(h,_)=>(u(),y("div",ri,[(u(!0),y(G,null,Ue(t.pageList,(s,x)=>{var r,i,T,L,d;return u(),y("div",{key:s.expire_ts,class:"history-card-item"},[I($t,{order:s},null,8,["order"]),e("div",ui,[e("div",null,[ci,e("div",di,[s.direction?(u(),y(G,{key:1},[H(o(a(R)(s==null?void 0:s.reseverRate))+" "+o((T=s==null?void 0:s.pay_coin_info)==null?void 0:T.symbol)+" per "+o((L=s==null?void 0:s.target_coin_info)==null?void 0:L.symbol),1)],64)):(u(),y(G,{key:0},[H(o(a(R)(s==null?void 0:s.rate))+" "+o((r=s==null?void 0:s.target_coin_info)==null?void 0:r.symbol)+" per "+o((i=s==null?void 0:s.pay_coin_info)==null?void 0:i.symbol),1)],64)),e("div",{class:"right",onClick:Qt(S=>s.direction=!s.direction,["stop"])},mi,8,vi)])]),e("div",null,[pi,e("div",fi,o(a(We)(s==null?void 0:s.expire_ts,""))+" (UTC)",1)]),e("div",null,[gi,e("div",hi,[H(o(a(R)(s==null?void 0:s.transaction_volume))+"/"+o(a(R)(s==null?void 0:s.total_pay_amount))+" "+o((d=s==null?void 0:s.pay_coin_info)==null?void 0:d.symbol)+" ",1),e("span",null,"("+o(s==null?void 0:s.transaction_ratio)+"%)",1)])]),e("div",null,[yi,e("div",bi,[e("div",{class:"order-status",onClick:S=>a(Ta)(s,x)},[(u(),y("svg",{class:ee(["order-status-icon",a(ct)(s.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(ct)(s.status).path},null,8,$i)],2)),e("span",{class:ee(a(ct)(s.status).class)},o(s.status),3),(u(),y("svg",{class:ee(["arrow-icon",a(ye)[x]?"open-arrow":""]),"aria-hidden":"true"},ki,2))],8,wi)])])]),a(ye)[x]?(u(!0),y(G,{key:0},Ue(s.events,S=>{var $,v,M;return u(),y("div",{key:S,class:"order-log"},[e("div",Si,[e("div",Oi,[e("div",null,[(u(),y("svg",{class:ee(["status-icon",a(ze)(S.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(ze)(S.type).path},null,8,Ci)],2)),e("span",{class:ee(["text-status",a(ze)(S.type).class])},o(a(ze)(S.type).text),3)]),e("div",Li,o(a(We)(Number(S.block_time),""))+" (UTC) ",1)]),e("div",null,[S.type=="FlashLoanEvent"?(u(),y("span",Ti,"+"+o(a(R)(S.amount))+" "+o(($=s==null?void 0:s.buy_coin_info)==null?void 0:$.symbol)+" "+o((v=s==null?void 0:s.target_coin_info)==null?void 0:v.symbol),1)):(u(),y("span",Ii,o(S.type=="OrderPlacedEvent"?"-":"+")+o(a(R)(S.amount))+" "+o((M=s==null?void 0:s.pay_coin_info)==null?void 0:M.symbol),1)),e("div",Mi,[e("a",{href:a(Zt)(m.value,"tx",S.tx),target:"_blank"},Ni,8,Ei)])])])])}),128)):D("",!0)])}),128))]))}});const Hi=_e(Ai,[["__scopeId","data-v-c0f555a8"]]),at=t=>(Ce("data-v-7924f4ec"),t=t(),Le(),t),Ui={class:"trade-history"},Di={key:0},Bi=at(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Limit price"),e("th",null,"Expiry"),e("th",null,"Filled size"),e("th",null,"Status")])],-1)),Fi=["onClick"],ji={class:"order-price"},zi=["onClick"],Wi=at(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Vi=[Wi],Yi={class:"order-status"},qi=["xlink:href"],Ji=at(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Ki=[Ji],Gi={class:"order-log"},Qi={class:"order-log-num"},Xi=["xlink:href"],Zi={key:0},eo={key:1},to=at(()=>e("td",null,null,-1)),ao=at(()=>e("td",null,null,-1)),so={class:"create-ts"},no={class:"view-trans"},lo=["href"],io=at(()=>e("span",null,"View Transaction",-1)),oo=at(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),ro=[io,oo],uo={style:{height:"4px",background:"unset"}},co={class:"tr-line",style:{height:"24px",background:"unset"}},vo={key:4,class:"loading-box"},_o=ve({__name:"trade-history",setup(t){const c=vt(),n=b(()=>c),m=b(()=>n.value.currentExplorer),p=Te();b(()=>p);const w=De(),h=b(()=>w);return se(()=>h.value.address,_=>{_&&(p.getLimitOrderLogs(),p.getLimitOrderHistory(_))},{immediate:!0}),(_,s)=>{const x=bt;return u(),y("div",Ui,[h.value&&h.value.address&&a(J)&&a(J).length>0?(u(),y("table",Di,[Bi,e("tbody",null,[(u(!0),y(G,null,Ue(a(J),(r,i)=>{var T,L,d,S,$;return u(),y(G,{key:r.id},[e("tr",{class:ee(["order",i!==a(J).length-1?"order-border":""]),onClick:v=>a(Ta)(r,i)},[e("td",null,[I($t,{order:r},null,8,["order"])]),e("td",null,[e("div",ji,[r.direction?(u(),y(G,{key:1},[H(o(a(R)(r==null?void 0:r.reseverRate))+" "+o((d=r==null?void 0:r.pay_coin_info)==null?void 0:d.symbol)+" per "+o((S=r==null?void 0:r.target_coin_info)==null?void 0:S.symbol),1)],64)):(u(),y(G,{key:0},[H(o(a(R)(r==null?void 0:r.rate))+" "+o((T=r==null?void 0:r.target_coin_info)==null?void 0:T.symbol)+" per "+o((L=r==null?void 0:r.pay_coin_info)==null?void 0:L.symbol),1)],64)),e("div",{class:"right",onClick:Qt(v=>r.direction=!r.direction,["stop"])},Vi,8,zi)])]),e("td",null,o(a(We)(r==null?void 0:r.expire_ts,""))+" (UTC)",1),e("td",null,[H(o(a(R)(r==null?void 0:r.transaction_volume))+"/"+o(a(R)(r==null?void 0:r.total_pay_amount))+" "+o(($=r==null?void 0:r.pay_coin_info)==null?void 0:$.symbol)+" ",1),e("span",null,"("+o(r==null?void 0:r.transaction_ratio)+"%)",1)]),e("td",null,[e("div",Yi,[(u(),y("svg",{class:ee(["order-status-icon",a(ct)(r.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(ct)(r.status).path},null,8,qi)],2)),e("span",{class:ee(a(ct)(r.status).class)},o(r.status),3),(u(),y("svg",{class:ee(["arrow-icon",a(ye)[i]?"open-arrow":""]),"aria-hidden":"true"},Ki,2))])])],10,Fi),a(ye)[i]?(u(),y(G,{key:0},[(u(!0),y(G,null,Ue(r.events,v=>{var M,Q,j;return u(),y(G,{key:v},[oe(e("tr",Gi,[e("td",null,[e("div",Qi,[(u(),y("svg",{class:ee(["status-icon",a(ze)(v.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(ze)(v.type).path},null,8,Xi)],2)),e("span",{class:ee(["text-status",a(ze)(v.type).class])},o(a(ze)(v.type).text),3),v.type=="FlashLoanEvent"?(u(),y("span",Zi,"+"+o(a(R)(v.amount))+" "+o((M=r==null?void 0:r.buy_coin_info)==null?void 0:M.symbol)+" "+o((Q=r==null?void 0:r.target_coin_info)==null?void 0:Q.symbol),1)):(u(),y("span",eo,o(v.type=="OrderPlacedEvent"?"-":"+")+o(a(R)(v.amount))+" "+o((j=r==null?void 0:r.pay_coin_info)==null?void 0:j.symbol),1))])]),to,ao,e("td",null,[e("span",so,o(a(We)(Number(v.block_time),""))+" (UTC)",1)]),e("td",null,[e("div",no,[e("a",{href:a(Zt)(m.value,"tx",v.tx),target:"_blank"},ro,8,lo)])])],512),[[ut,a(ye)[i]]]),oe(e("tr",uo,null,512),[[ut,a(ye)[i]]])],64)}),128)),oe(e("tr",co,null,512),[[ut,a(ye)[i]]])],64)):D("",!0)],64)}),128))])])):D("",!0),h.value&&h.value.address&&a(J)&&a(J).length>0?(u(),B(Hi,{key:1,"page-list":a(J)},null,8,["page-list"])):D("",!0),a(J)&&a(J).length==0&&!a(Mt)?(u(),B(aa,{key:2,platform:"history"})):D("",!0),a(J)&&a(J).length>0?(u(),y("div",{key:3,class:ee(["pagination",a(J)&&a(J).length>0&&a(Mt)?"loading-pagination":""])},[I(Ca,{"page-size":a(At),total:a(yt)&&a(yt).length,"current-page-num":a(ht),onChange:a(oi)},null,8,["page-size","total","current-page-num","onChange"])],2)):D("",!0),a(J)&&a(J).length==0&&a(Mt)?(u(),y("div",vo,[I(x)])):D("",!0),a(J)&&a(J).length>0&&a(Mt)?(u(),B(x,{key:5,class:"order-spin"})):D("",!0)])}}});const mo=_e(_o,[["__scopeId","data-v-7924f4ec"]]),po={class:"order-or-history"},fo={class:"tab-list"},go=ve({__name:"trade-tab",setup(t){const c=Te(),n=b(()=>c),m=b(()=>n.value.orderNum),p=b(()=>n.value.historyNum),w=De(),h=b(()=>w),_=b(()=>[{value:"orders",label:"Open Orders",numValue:lt.value=="orders"&&h.value&&h.value.address?m:""},{value:"history",label:"Order History",numValue:lt.value=="history"&&h.value&&h.value.address?p:""}]);return(s,x)=>(u(),y("div",po,[e("div",fo,[I(ba,{"tab-list":_.value,"current-tab":a(lt),onClickTab:x[0]||(x[0]=r=>lt.value=r.value)},null,8,["tab-list","current-tab"])]),a(lt)=="orders"&&h.value&&h.value.address&&m.value>0?(u(),y("div",{key:0,class:"clear-all",onClick:x[1]||(x[1]=r=>a(ta)({},!0))},"Cancel All")):D("",!0)]))}});const ho=_e(go,[["__scopeId","data-v-b27fb2b8"]]),yo={class:"trade-order"},bo=ve({__name:"trade-record",setup(t){return(c,n)=>(u(),y("div",yo,[I(ho),a(lt)=="orders"?(u(),B(ti,{key:0})):(u(),B(mo,{key:1}))]))}});const Vo=_e(bo,[["__scopeId","data-v-a8fdd16c"]]);export{Ca as N,$t as T,Fl as _,ga as a,ta as b,ot as c,Et as d,gt as e,ft as f,aa as g,Oa as h,qt as i,J as j,Hi as k,At as l,yt as m,ht as n,Mt as o,K as p,oi as q,ho as r,lt as s,xa as t,Te as u,Wo as v,Ia as w,zo as x,Vo as y};
