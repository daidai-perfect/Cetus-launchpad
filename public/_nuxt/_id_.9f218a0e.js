import{_ as an}from"./back.73871274.js";import{_ as ln}from"./refresh-icon.b25f9e4c.js";import{a as Fe,P as wo,l as yo,r as S,at as un,e as Oe,M as Ke,o as s,c as B,w as oe,h as o,i as F,j as me,v as i,f as p,F as _e,s as Io,z as $e,x as E,au as rn,Z as dn,B as bo,p as Ve,k as je,y as Co,E as Oo,m as y,G as be,b as Do,W as Xe,q as ho,t as ke,u as P,Q as Vo,Y as ko,a6 as jo,J as To,a5 as go,U as fo,V as vn,$ as mn,O as Eo,S as pn}from"./entry.1afe32c4.js";/* empty css              */import{a as cn,_ as fn}from"./icon-warning_2x.e4f91c80.js";import{u as Ze,a as Wo,A as oo}from"./autoPool.66db7e85.js";import{_ as gn}from"./icon-error_2x.b4924e70.js";import{u as Je,b as vo,g as Lo,p as Fo,c as Ho,m as yn,j as bn}from"./pool.83f6439f.js";import{i as Ye,h as N,f as Re,k as D,u as So,T as qo,m as Le,B as Bo,d as hn}from"./index.c41a185a.js";import{_ as mo}from"./token-warning.7014f9c6.js";import{_ as Yo}from"./auto-pool-apy-tips.ea5587ec.js";/* empty css              */import"./index.fa5ab6c5.js";import{i as Ge}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as zo}from"./assets-card.63e9b367.js";import{_ as Go}from"./coin-lock.9b7a4e87.js";import{D as v}from"./decimal.0bdeb344.js";/* empty css              */import{u as kn}from"./useSuiAggregator.7adf1542.js";/* empty css              */import"./index.08ca7d22.js";import"./index.3f134baf.js";import"./useDebounceFunction.6fcad2ee.js";import"./img-lock_2x.a28135f4.js";const $n=Fe({components:{Modal:wo},setup(e,t){const{t:H,locale:V}=yo(),T=Ze(),$=["0.1","0.5","1"],u=S(T.slippage||.1),{setSlippage:b}=T,g=un(),A=S(!1);function a(r,d){A.value=!1,u.value=d}function m(){b(u.value),t.emit("onClose",!1)}return{settingArr:$,changeActiveIndex:a,confirm:m,emit:g,slippage:u,t:H,isInput:A,inputChange:r=>{const d=new RegExp(/[^\d^\.]+/g);r.target.value=r.target.value.replace(d,""),u.value=r.target.value}}}});const Xo=e=>(Ve("data-v-ec8759be"),e=e(),je(),e),_n=Xo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),In={class:"setting-container"},wn={class:"title"},Cn=Xo(()=>o("img",{src:fn,alt:""},null,-1)),Sn={class:"tag-list"},An={key:0,src:cn,alt:""},Pn={key:1,src:gn,alt:""},Rn={class:"footer"};function Nn(e,t,H,V,T,$){const u=rn,b=dn,g=bo,A=Ke("Modal");return s(),B(A,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:t[3]||(t[3]=a=>e.$emit("onClose"))},{closeIcon:oe(()=>[_n]),footer:oe(()=>[o("div",Rn,[F(g,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:t[2]||(t[2]=a=>e.$emit("onClose"))},{default:oe(()=>[me(i(e.$t("button.cancel")),1)]),_:1}),F(g,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:oe(()=>[me(i(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:oe(()=>[o("div",In,[o("div",wn,[Cn,o("span",null,i(e.$t("modal.slippageTolerance")),1)]),o("div",Sn,[(s(!0),p(_e,null,Io(e.settingArr,(a,m)=>(s(),B(u,{key:m,class:$e(!e.isInput&&a==e.slippage?"tag-active":""),onClick:n=>e.changeActiveIndex(m,a)},{default:oe(()=>[me(i(a)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),F(u,{class:$e(["input-tag",e.isInput?"tag-active":""]),onClick:t[1]||(t[1]=a=>e.isInput=!0)},{default:oe(()=>[F(b,{value:e.slippage,"onUpdate:value":t[0]||(t[0]=a=>e.slippage=a),placeholder:"",suffix:"%",class:$e(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(s(),p("div",{key:0,class:$e(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(s(),p("img",An)):E("",!0),Number(e.slippage)>1?(s(),p("img",Pn)):E("",!0),o("p",null,i(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):E("",!0)]),_:1})}const Tn=Oe($n,[["render",Nn],["__scopeId","data-v-ec8759be"]]),Ln=Fe({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const H=S(!1),V=S(null),T=S(0);let $=S(!1);const u=S(20);Je();const b=Ze(),g=S(!1);Co(()=>{}),Oo(()=>{clearInterval(V.value)});const A=()=>{$.value=!1,V.value=setInterval(()=>{var f;g.value||T.value<u.value&&(T.value+=1,T.value===u.value&&((f=e==null?void 0:e.poolInfo)!=null&&f.address&&n(),T.value=0))},1e3)},a=y(()=>b.slippage),m=()=>{t.emit("clearAll")},n=()=>{$.value||($.value=!0,T.value=0,t.emit("clickRefresh"),setTimeout(()=>{$.value=!1},1e3))};be(()=>e.poolInfo,f=>{f&&!V.value&&A()},{immediate:!0});const r=Do(),d=Xe();return{refresh:$,clickRefresh:n,isShowSwapSetting:H,countdown:T,autoRefreshTime:u,slippage:a,clearAll:m,checkNullObj:Ye,router:r,route:d}}});const qn=e=>(Ve("data-v-41ba3d57"),e=e(),je(),e),Bn={class:"title"},On={class:"left"},Dn=qn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Un={key:0,class:"deposit-progress"};function Mn(e,t,H,V,T,$){const u=an,b=ln,g=Tn;return s(),p("div",Bn,[o("div",On,[F(u)]),o("div",{class:$e(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:t[0]||(t[0]=A=>e.isShowSwapSetting=!0)},[Dn,o("span",null,i(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(s(),p("div",Un,[F(b,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):E("",!0)],2),e.isShowSwapSetting?(s(),B(g,{key:0,onOnClose:t[1]||(t[1]=A=>e.isShowSwapSetting=!1)})):E("",!0)])}const Fn=Oe(Ln,[["render",Mn],["__scopeId","data-v-41ba3d57"]]),Vn=Fe({components:{AutoPoolApyTips:Yo},setup(){const e=vo(),t=y(()=>e),H=Je(),V=y(()=>H),T=Ze(),$=y(()=>T),u=y(()=>t.value.theme),b=Xe(),g=S();be(()=>[$.value.positionInfoObj,b.params.id],([h,c])=>{h&&!Ye(h)&&c&&(g.value=h[c])},{immediate:!0,deep:!0});const A=y(()=>{var h;return(h=g.value)==null?void 0:h.needReverse}),a=h=>{var c;return(h==null?void 0:h.logoURI)||(h==null?void 0:h.logo_url)||((c=V.value.tokensObj[h==null?void 0:h.address])==null?void 0:c.logo_url)||(u.value==="default"?Ge("/image/coins/unknown.png"):Ge("/image/coins/sui-unknown.png"))},m=y(()=>{var h,c;return $.value.apyObj&&((c=$.value.apyObj[(h=g.value)==null?void 0:h.id])==null?void 0:c.tvl)||"--"}),n=y(()=>{var h,c;return $.value.apyObj&&((c=$.value.apyObj[(h=g.value)==null?void 0:h.id])==null?void 0:c.apr)||"--"}),r=y(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-info.vue:399 ~ apyObj ~ autoPool.value.apyObj:",$.value.apyObj),$.value.apyObj)),d=y(()=>t.value.currentExplorer),f=y(()=>$.value.autoPoolLoading);return{positionInfo:g,needReverse:A,getCoinIcon:a,tvl:m,apy:n,addCommom:N,getExplorerUrl:Lo,currentExplorer:d,autoPoolLoading:f,apyObj:r,checkNullObj:Ye}}});const Ee=e=>(Ve("data-v-21f00ade"),e=e(),je(),e),jn={class:"auto-pool-v2-info"},En={class:"pool-info"},Wn={class:"left"},Hn={class:"coin-a"},Yn={alt:""},zn={class:"coin-b"},Gn={alt:""},Xn={class:"position-name"},Zn={key:0,class:"pool-fee"},Jn=Ee(()=>o("span",null,"Fee tier",-1)),Qn={key:1,class:"vault-address"},Kn=["href"],xn=Ee(()=>o("span",null,"Vault Address",-1)),et=Ee(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),ot=[xn,et],nt={class:"apy-and-tvl"},tt={class:"apy"},st=Ee(()=>o("div",{class:"apy-title"},"APY",-1)),at={key:0,class:"apy-text"},lt={class:"reward-coin"},it=Ee(()=>o("div",{class:"reward"},"Rewards",-1)),ut={class:"right"},rt={alt:""},dt={class:"tvl"},vt=Ee(()=>o("div",{class:"tvl-title"},"TVL",-1)),mt={key:0,class:"tvl-text"},pt={class:"pool-info h5-pool-info"},ct={class:"left"},ft={class:"coin-a"},gt={alt:""},yt={class:"coin-b"},bt={alt:""},ht={class:"position-name"},kt={key:0,class:"pool-fee"},$t=Ee(()=>o("span",null,"Fee tier",-1)),_t={class:"left"},It={class:"vault-address"},wt=["href"],Ct=Ee(()=>o("span",null,"Vault Address",-1)),St=Ee(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),At=[Ct,St],Pt={class:"apy-and-tvl"},Rt={class:"apy"},Nt=Ee(()=>o("div",{class:"apy-title"},"APY",-1)),Tt={key:0,class:"apy-text"},Lt={class:"reward-coin"},qt=Ee(()=>o("div",{class:"reward"},"Rewards",-1)),Bt={class:"right"},Ot={alt:""},Dt={class:"tvl"},Ut=Ee(()=>o("div",{class:"tvl-title"},"TVL",-1)),Mt={key:0,class:"tvl-text"};function Ft(e,t,H,V,T,$){var m,n,r,d,f,h,c,_,q,U,M,Z,ne,k,I,z,G,K,le,O,J,se,ae,ue,w,L,ie,ve,re,C,X,We,fe,De,Ue,we,Se,qe,Ce,po,no,eo,Ae,lo,io,to;const u=mo,b=ko,g=Yo,A=Vo,a=ho("image");return s(),p("div",jn,[o("div",En,[o("div",Wn,[o("div",Hn,[ke(o("img",Yn,null,512),[[a,e.needReverse?e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_b):e.getCoinIcon((m=e.positionInfo)==null?void 0:m.token_a)]]),F(u,{address:e.needReverse?(h=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:h.address:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",zn,[ke(o("img",Gn,null,512),[[a,e.needReverse?e.getCoinIcon((_=e.positionInfo)==null?void 0:_.token_a):e.getCoinIcon((c=e.positionInfo)==null?void 0:c.token_b)]]),F(u,{address:e.needReverse?(Z=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:Z.address:(U=(q=e.positionInfo)==null?void 0:q.token_b)==null?void 0:U.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Xn,[e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[me(i(e.needReverse?(k=(ne=e.positionInfo)==null?void 0:ne.token_b)==null?void 0:k.symbol:(z=(I=e.positionInfo)==null?void 0:I.token_a)==null?void 0:z.symbol)+" - "+i(e.needReverse?(K=(G=e.positionInfo)==null?void 0:G.token_a)==null?void 0:K.symbol:(O=(le=e.positionInfo)==null?void 0:le.token_b)==null?void 0:O.symbol),1)],64))]),(J=e.positionInfo)!=null&&J.fee?(s(),p("div",Zn,[Jn,me(" "+i(((se=e.positionInfo)==null?void 0:se.fee)*100)+"% ",1)])):E("",!0),e.autoPoolLoading?E("",!0):(s(),p("div",Qn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:P(Lo))(e.currentExplorer,"poolAddress",(ae=e.positionInfo)==null?void 0:ae.id),target:"_blank"},ot,8,Kn)]))]),o("div",nt,[o("div",tt,[st,e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p("div",at,[me(i(e.apy)+" ",1),F(g)]))]),o("div",lt,[it,e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),B(A,{key:0,"overlay-class-name":"reward-coin-tips"},{title:oe(()=>[me("Rewards will be auto harvested and compounded to your position.")]),default:oe(()=>{var ze;return[o("div",ut,[(s(!0),p(_e,null,Io((ze=e.positionInfo)==null?void 0:ze.rewardList,He=>(s(),p("div",{key:He,class:"coin-a"},[ke(o("img",rt,null,512),[[a,e.getCoinIcon({address:He})]]),F(u,{address:He,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1}))]),o("div",dt,[vt,e.tvl?(s(),p("div",mt,"$"+i(("addCommom"in e?e.addCommom:P(N))(e.tvl,2)),1)):(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1}))])])]),o("div",pt,[o("div",ct,[o("div",ft,[ke(o("img",gt,null,512),[[a,e.needReverse?e.getCoinIcon((w=e.positionInfo)==null?void 0:w.token_b):e.getCoinIcon((ue=e.positionInfo)==null?void 0:ue.token_a)]]),F(u,{address:e.needReverse?(re=(ve=e.positionInfo)==null?void 0:ve.token_b)==null?void 0:re.address:(ie=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:ie.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",yt,[ke(o("img",bt,null,512),[[a,e.needReverse?e.getCoinIcon((X=e.positionInfo)==null?void 0:X.token_a):e.getCoinIcon((C=e.positionInfo)==null?void 0:C.token_b)]]),F(u,{address:e.needReverse?(Ue=(De=e.positionInfo)==null?void 0:De.token_a)==null?void 0:Ue.address:(fe=(We=e.positionInfo)==null?void 0:We.token_b)==null?void 0:fe.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ht,i(e.needReverse?(Se=(we=e.positionInfo)==null?void 0:we.token_b)==null?void 0:Se.symbol:(Ce=(qe=e.positionInfo)==null?void 0:qe.token_a)==null?void 0:Ce.symbol)+" - "+i(e.needReverse?(no=(po=e.positionInfo)==null?void 0:po.token_a)==null?void 0:no.symbol:(Ae=(eo=e.positionInfo)==null?void 0:eo.token_b)==null?void 0:Ae.symbol),1),(lo=e.positionInfo)!=null&&lo.fee?(s(),p("div",kt,[$t,me(" "+i(((io=e.positionInfo)==null?void 0:io.fee)*100)+"% ",1)])):E("",!0)]),o("div",_t,[o("div",It,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:P(Lo))(e.currentExplorer,"poolAddress",(to=e.positionInfo)==null?void 0:to.id),target:"_blank"},At,8,wt)])]),o("div",Pt,[o("div",Rt,[Nt,e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p("div",Tt,[me(i(e.apy)+" ",1),F(g)]))]),o("div",Lt,[qt,e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),B(A,{key:0,"overlay-class-name":"reward-coin-tips"},{title:oe(()=>[me("Rewards will be auto harvested and compounded to your position.")]),default:oe(()=>{var ze;return[o("div",Bt,[(s(!0),p(_e,null,Io((ze=e.positionInfo)==null?void 0:ze.rewardList,He=>(s(),p("div",{key:He,class:"coin-a"},[ke(o("img",Ot,null,512),[[a,e.getCoinIcon({address:He})]]),F(u,{address:He,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1}))]),o("div",Dt,[Ut,e.tvl?(s(),p("div",Mt,"$"+i(("addCommom"in e?e.addCommom:P(N))(e.tvl,2)),1)):(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1}))])])])])}const Zo=Oe(Vn,[["render",Ft],["__scopeId","data-v-21f00ade"]]),Vt=Fe({components:{Slider:jo},setup(){const e=S(!0),t=Je(),H=y(()=>t),V=Ze(),T=y(()=>V),$=Xe(),u=S();be(()=>[T.value.positionInfoObj,$.params.id],([n,r])=>{n&&!Ye(n)&&r&&(u.value=n[r])},{immediate:!0,deep:!0});const b=y(()=>{var n;return(n=u.value)==null?void 0:n.needReverse}),g=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=H.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||Ge("/image/coins/sui-unknown.png")},A=y(()=>{var h,c,_,q,U,M,Z;const n=e.value?((h=u.value)==null?void 0:h.minPrice)&&D(u==null?void 0:u.value.minPrice,6):((c=u.value)==null?void 0:c.maxPrice)&&D(1/(u==null?void 0:u.value.maxPrice),6),r=e.value?((_=u.value)==null?void 0:_.maxPrice)&&D((q=u.value)==null?void 0:q.maxPrice,6):((U=u.value)==null?void 0:U.minPrice)&&D(1/(u==null?void 0:u.value.minPrice),6),d=(b.value?!e.value:e.value)?D((M=u.value)==null?void 0:M.price,6):D(1/((Z=u.value)==null?void 0:Z.price),6);let f={};return f[n]={label:"Min Price"},f[r]={label:"Max Price"},d>n&&d<r?f[d]={label:"Current Price"}:d<n?f[Number(n)+1e-9]={label:"Current Price"}:d>r&&(f[Number(r)-1e-9]={label:"Current Price"}),f}),a=y(()=>{var r,d;return(b.value?!e.value:e.value)?Re((r=u.value)==null?void 0:r.price,6):Re(1/((d=u.value)==null?void 0:d.price),6)}),m=y(()=>{var r,d;return(b.value?!e.value:e.value)?Re((r=u.value)==null?void 0:r.price,6):Re(1/((d=u.value)==null?void 0:d.price),6)});return{direct:e,positionInfo:u,needReverse:b,getCoinIcon:g,decimalUi:Re,addCommom:N,sFixD:D,marks:A,currentPrice:a,currentPriceResever:m}}});const Ao=e=>(Ve("data-v-d45875e4"),e=e(),je(),e),jt={class:"v2-position-range"},Et={class:"position-range-top"},Wt=Ao(()=>o("div",null,"Position Range",-1)),Ht={class:"base-coin"},Yt={key:0},zt={alt:""},Gt={key:1},Xt={alt:""},Zt={key:2},Jt={key:3},Qt=Ao(()=>o("p",null,"Base coin",-1)),Kt={class:"coin-rate"},xt=Ao(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),es=Ao(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),os=[xt,es],ns={class:"position-range-bottom"},ts={class:"price-range"},ss={class:"price-range-bg"},as={key:0,class:"min-price"},ls={key:0},is={key:1},us={key:1,class:"max-price"},rs={key:0},ds={key:1},vs={key:0,class:"min-price"},ms={key:0},ps={key:1},cs={key:1,class:"max-price"},fs={key:0},gs={key:1};function ys(e,t,H,V,T,$){var A,a,m,n,r,d,f,h,c,_,q,U,M,Z,ne,k,I,z,G,K,le,O,J,se,ae,ue,w,L;const u=mo,b=Ke("Slider"),g=ho("image");return s(),p("div",jt,[o("div",Et,[Wt,o("div",Ht,[e.needReverse?(s(),p("div",Gt,[ke(o("img",Xt,null,512),[[g,e.direct?e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_b):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_a)]]),F(u,{address:e.direct?(U=(q=e.positionInfo)==null?void 0:q.token_b)==null?void 0:U.address:(_=(c=e.positionInfo)==null?void 0:c.token_a)==null?void 0:_.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(s(),p("div",Yt,[ke(o("img",zt,null,512),[[g,e.direct?e.getCoinIcon((A=e.positionInfo)==null?void 0:A.token_a):e.getCoinIcon((a=e.positionInfo)==null?void 0:a.token_b)]]),F(u,{address:e.direct?(n=(m=e.positionInfo)==null?void 0:m.token_a)==null?void 0:n.address:(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(s(),p("span",Jt,i(e.direct?(z=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:z.symbol:(K=(G=e.positionInfo)==null?void 0:G.token_a)==null?void 0:K.symbol),1)):(s(),p("span",Zt,i(e.direct?(Z=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:Z.symbol:(k=(ne=e.positionInfo)==null?void 0:ne.token_b)==null?void 0:k.symbol),1)),Qt,o("div",Kt,[o("div",{onClick:t[0]||(t[0]=ie=>e.direct=!e.direct)},os)])])]),o("div",ns,[o("div",ts,[o("div",ss,[e.direct?(s(),B(b,{key:0,value:e.currentPrice,class:$e(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:P(D))((le=e.positionInfo)==null?void 0:le.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:P(D))((O=e.positionInfo)==null?void 0:O.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:P(Re))((J=e.positionInfo)==null?void 0:J.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:P(Re))((se=e.positionInfo)==null?void 0:se.maxPrice,6))},{mark:oe(({label:ie})=>{var ve,re,C,X,We,fe,De,Ue,we,Se,qe,Ce;return[ie=="Min Price"?(s(),p("div",as,[o("div",null,i(ie),1),e.direct?(s(),p("div",ls,i(((ve=e.positionInfo)==null?void 0:ve.minPrice)&&("sFixD"in e?e.sFixD:P(D))((re=e.positionInfo)==null?void 0:re.minPrice,6)),1)):(s(),p("div",is,i(((C=e.positionInfo)==null?void 0:C.maxPrice)&&("sFixD"in e?e.sFixD:P(D))(1/((X=e.positionInfo)==null?void 0:X.maxPrice),6)),1))])):E("",!0),ie=="Max Price"?(s(),p("div",us,[o("div",null,i(ie),1),e.direct?(s(),p("div",rs,i(((We=e.positionInfo)==null?void 0:We.maxPrice)&&("sFixD"in e?e.sFixD:P(D))((fe=e.positionInfo)==null?void 0:fe.maxPrice,6)),1)):(s(),p("div",ds,i(((De=e.positionInfo)==null?void 0:De.minPrice)&&("sFixD"in e?e.sFixD:P(D))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):E("",!0),ie=="Current Price"?(s(),p("div",{key:2,class:$e(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:P(D))((we=e.positionInfo)==null?void 0:we.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:P(D))((Se=e.positionInfo)==null?void 0:Se.maxPrice,6))?"current-price-right":""])},[o("div",null,i(ie),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(s(),p(_e,{key:0},[me(i(("addCommom"in e?e.addCommom:P(N))(("decimalUi"in e?e.decimalUi:P(Re))((qe=e.positionInfo)==null?void 0:qe.price,6))),1)],64)):(s(),p(_e,{key:1},[me(i(("addCommom"in e?e.addCommom:P(N))(("decimalUi"in e?e.decimalUi:P(Re))(1/((Ce=e.positionInfo)==null?void 0:Ce.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","marks","min","max"])):(s(),B(b,{key:1,value:e.currentPriceResever,class:$e(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:P(D))(1/((ae=e.positionInfo)==null?void 0:ae.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:P(D))(1/((ue=e.positionInfo)==null?void 0:ue.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:P(Re))(1/((w=e.positionInfo)==null?void 0:w.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:P(Re))(1/((L=e.positionInfo)==null?void 0:L.minPrice),6)),marks:e.marks,disabled:!0},{mark:oe(({label:ie})=>{var ve,re,C,X,We,fe,De,Ue,we,Se,qe,Ce;return[ie=="Min Price"?(s(),p("div",vs,[o("div",null,i(ie),1),e.direct?(s(),p("div",ms,i(((ve=e.positionInfo)==null?void 0:ve.minPrice)&&("sFixD"in e?e.sFixD:P(D))((re=e.positionInfo)==null?void 0:re.minPrice,6)),1)):(s(),p("div",ps,i(((C=e.positionInfo)==null?void 0:C.maxPrice)&&("sFixD"in e?e.sFixD:P(D))(1/((X=e.positionInfo)==null?void 0:X.maxPrice),6)),1))])):E("",!0),ie=="Max Price"?(s(),p("div",cs,[o("div",null,i(ie),1),e.direct?(s(),p("div",fs,i(((We=e.positionInfo)==null?void 0:We.maxPrice)&&("sFixD"in e?e.sFixD:P(D))((fe=e.positionInfo)==null?void 0:fe.maxPrice,6)),1)):(s(),p("div",gs,i(((De=e.positionInfo)==null?void 0:De.minPrice)&&("sFixD"in e?e.sFixD:P(D))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):E("",!0),ie=="Current Price"?(s(),p("div",{key:2,class:$e(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:P(D))(1/((we=e.positionInfo)==null?void 0:we.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:P(D))(1/((Se=e.positionInfo)==null?void 0:Se.minPrice),6))?"current-price-right":""])},[o("div",null,i(ie),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(s(),p(_e,{key:0},[me(i(("addCommom"in e?e.addCommom:P(N))(("decimalUi"in e?e.decimalUi:P(Re))((qe=e.positionInfo)==null?void 0:qe.price,6))),1)],64)):(s(),p(_e,{key:1},[me(i(("addCommom"in e?e.addCommom:P(N))(("decimalUi"in e?e.decimalUi:P(Re))(1/((Ce=e.positionInfo)==null?void 0:Ce.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const Jo=Oe(Vt,[["render",ys],["__scopeId","data-v-d45875e4"]]),bs=Fe({components:{Modal:wo},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const t=y(()=>{var u,b;const $=Math.ceil(((u=e.positionInfo)==null?void 0:u.poolUSD)/((b=e.positionInfo)==null?void 0:b.quoteUSD)*100);return Number($)}),H=Ze(),V=y(()=>H),T=y(()=>{var $,u;return V.value.apyObj&&((u=V.value.apyObj[($=e.positionInfo)==null?void 0:$.id])==null?void 0:u.tvl)||"--"});return{sFixD:D,addCommom:N,ratio:t,tvl:T}}});const Uo=e=>(Ve("data-v-654fad62"),e=e(),je(),e),hs=Uo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ks={class:"deposit-slider"},$s={class:"info-block"},_s=Uo(()=>o("div",{class:"leabl"},"Current Depositï¼š",-1)),Is={class:"text"},ws={class:"info-block"},Cs=Uo(()=>o("div",{class:"leabl"},"Max Capacityï¼š",-1)),Ss={class:"text"};function As(e,t,H,V,T,$){const u=Ke("Modal");return s(),B(u,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:t[0]||(t[0]=b=>e.$emit("onClose"))},{closeIcon:oe(()=>[hs]),default:oe(()=>{var b,g,A,a;return[o("div",ks,[o("div",{class:"current-deposit",style:To({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",$s,[_s,o("div",Is,i(("addCommom"in e?e.addCommom:P(N))(("sFixD"in e?e.sFixD:P(D))((b=e.positionInfo)==null?void 0:b.currentDeposit,2)))+" "+i((g=e.positionInfo)==null?void 0:g.quoteCoinInfo.symbol),1)]),o("div",ws,[Cs,o("div",Ss,i(("addCommom"in e?e.addCommom:P(N))(("sFixD"in e?e.sFixD:P(D))((A=e.positionInfo)==null?void 0:A.quoteUSD,2)))+" "+i((a=e.positionInfo)==null?void 0:a.quoteCoinInfo.symbol),1)])]}),_:1})}const Qo=Oe(bs,[["render",As],["__scopeId","data-v-654fad62"]]),Ps=Fe({components:{AutoPoolV2PoolCapacity:Qo},setup(){const e=Je(),t=y(()=>e),H=Ze(),V=y(()=>H),T=Xe(),$=S();be(()=>[V.value.positionInfoObj,T.params.id],([m,n])=>{m&&!Ye(m)&&n&&($.value=m[n])},{immediate:!0,deep:!0});const u=y(()=>{var m;return(m=$.value)==null?void 0:m.needReverse}),b=m=>{var n;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((n=t.value.tokensObj[m==null?void 0:m.address])==null?void 0:n.logo_url)||Ge("/image/coins/sui-unknown.png")},g=y(()=>V.value.autoPoolLoading),A=S(!1),a=y(()=>{var m,n;return V.value.apyObj&&((n=V.value.apyObj[(m=$.value)==null?void 0:m.id])==null?void 0:n.tvl)||0});return{needReverse:u,positionInfo:$,getCoinIcon:b,addCommom:N,isShowModal:A,autoPoolLoading:g,tvl:a}}});const Rs=e=>(Ve("data-v-02f21a44"),e=e(),je(),e),Ns={class:"pool-composition"},Ts={class:"pool-composition-top"},Ls=Rs(()=>o("span",null,"Vault Composition",-1)),qs={class:"pool-composition-bottom"},Bs={class:"token-ratio"},Os={class:"before-coin"},Ds={alt:""},Us={class:"after-coin"},Ms={alt:""},Fs={class:"token-num"},Vs={class:"num-box"},js={class:"num-box"};function Es(e,t,H,V,T,$){var a,m,n,r,d,f,h,c,_,q,U,M,Z,ne,k,I,z,G,K,le,O,J,se,ae,ue,w,L,ie,ve;const u=mo,b=ko,g=Qo,A=ho("image");return s(),p("div",Ns,[o("div",Ts,[Ls,Number((a=e.positionInfo)==null?void 0:a.quoteUSD)>0?(s(),p("div",{key:0,class:"pool-capacity",onClick:t[0]||(t[0]=re=>e.isShowModal=!0)},"Vault Capacity")):E("",!0)]),o("div",qs,[o("div",Bs,[o("div",Os,[o("div",null,[F(u,{address:e.needReverse?(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address:(n=(m=e.positionInfo)==null?void 0:m.token_a)==null?void 0:n.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),ke(o("img",Ds,null,512),[[A,e.needReverse?e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_b):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_a)]])]),o("span",null,[e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[me(i((c=e.positionInfo)==null?void 0:c.poolCoinARatio)+"% ",1)],64))])]),o("div",Us,[o("span",null,[e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[me(i((_=e.positionInfo)==null?void 0:_.poolCoinBRatio)+"% ",1)],64))]),o("div",null,[ke(o("img",Ms,null,512),[[A,e.needReverse?e.getCoinIcon((U=e.positionInfo)==null?void 0:U.token_a):e.getCoinIcon((q=e.positionInfo)==null?void 0:q.token_b)]]),F(u,{address:e.needReverse?(k=(ne=e.positionInfo)==null?void 0:ne.token_a)==null?void 0:k.address:(Z=(M=e.positionInfo)==null?void 0:M.token_b)==null?void 0:Z.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Fs,[o("div",{class:"token-a-bg",style:To({width:`${(I=e.positionInfo)==null?void 0:I.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:To({width:`${(z=e.positionInfo)==null?void 0:z.poolCoinBRatio}%`})},null,4),o("div",Vs,[e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[o("div",null,i(("addCommom"in e?e.addCommom:P(N))((G=e.positionInfo)==null?void 0:G.poolCoinANum))+" "+i(e.needReverse?(J=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:J.symbol:(le=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:le.symbol),1),o("div",null,"$"+i(("addCommom"in e?e.addCommom:P(N))((se=e.positionInfo)==null?void 0:se.poolCoinAUSD)),1)],64))]),o("div",js,[e.autoPoolLoading?(s(),B(b,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[o("div",null,i(("addCommom"in e?e.addCommom:P(N))((ae=e.positionInfo)==null?void 0:ae.poolCoinBNum))+" "+i(e.needReverse?(ie=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:ie.symbol:(w=(ue=e.positionInfo)==null?void 0:ue.token_b)==null?void 0:w.symbol),1),o("div",null,"$"+i(("addCommom"in e?e.addCommom:P(N))((ve=e.positionInfo)==null?void 0:ve.poolCoinBUSD)),1)],64))])])]),e.isShowModal?(s(),B(g,{key:0,"position-info":e.positionInfo,onOnClose:t[1]||(t[1]=re=>e.isShowModal=!1)},null,8,["position-info"])):E("",!0)])}const Ko=Oe(Ps,[["render",Es],["__scopeId","data-v-02f21a44"]]),Ws=Fe({setup(){const e=Je(),t=y(()=>e),H=Ze(),V=y(()=>H),T=Xe(),$=S();be(()=>[V.value.positionInfoObj,T.params.id],([m,n])=>{m&&!Ye(m)&&n&&($.value=m[n])},{immediate:!0,deep:!0});const u=y(()=>{var m;return(m=$.value)==null?void 0:m.needReverse}),b=m=>{var n;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((n=t.value.tokensObj[m==null?void 0:m.address])==null?void 0:n.logo_url)||Ge("/image/coins/sui-unknown.png")},g=So(),A=y(()=>g),a=y(()=>V.value.autoPoolLoading);return{needReverse:u,positionInfo:$,getCoinIcon:b,addCommom:N,wallet:A,autoPoolLoading:a}}});const $o=e=>(Ve("data-v-3cde2b77"),e=e(),je(),e),Hs={class:"my-liquidity"},Ys={class:"my-liquidity-top"},zs=$o(()=>o("div",null,"My Liquidity",-1)),Gs=$o(()=>o("p",null,"My share of pool",-1)),Xs={class:"my-liquidity-bottom"},Zs={class:"lp-token"},Js=$o(()=>o("div",null,[o("span",null,"LP Token BalanceÂ ")],-1)),Qs={class:"lp-balance"},Ks={class:"token-num-content"},xs={class:"token-num token-a-num"},ea={class:"logo"},oa=["src"],na={class:"text"},ta={class:"lp-logo"},sa=["src"],aa=$o(()=>o("div",null,"Pooled Assets",-1)),la={class:"token-num"},ia={class:"logo"},ua=["src"],ra={class:"text"},da=$o(()=>o("div",{class:"token-num-content-bg"},null,-1));function va(e,t,H,V,T,$){var g,A,a,m,n,r,d,f,h,c,_,q,U,M,Z,ne,k,I,z,G,K,le,O,J,se,ae,ue,w,L;const u=ko,b=mo;return s(),p("div",Hs,[o("div",Ys,[zs,o("div",null,[Gs,o("p",null,[e.autoPoolLoading?(s(),B(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[me(i(e.wallet.connected?(g=e.positionInfo)==null?void 0:g.myShare:"--")+"%",1)],64))])])]),o("div",Xs,[o("div",Zs,[Js,o("div",null,[e.autoPoolLoading?(s(),B(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[o("span",Qs,i(e.wallet.connected?("addCommom"in e?e.addCommom:P(N))((A=e.positionInfo)==null?void 0:A.myLiquidity):"--")+" LP",1),o("span",null,i(e.wallet.connected?((a=e.positionInfo)==null?void 0:a.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:P(N))((m=e.positionInfo)==null?void 0:m.myLiquidityUSD)}`:"<$0.01":"--"),1)],64))])]),o("div",Ks,[o("div",xs,[o("div",ea,[o("img",{src:e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_a),alt:""},null,8,oa),F(b,{address:e.needReverse?(c=(h=e.positionInfo)==null?void 0:h.token_b)==null?void 0:c.address:(f=(d=e.positionInfo)==null?void 0:d.token_a)==null?void 0:f.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",na,[e.autoPoolLoading?(s(),B(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:P(N))((_=e.positionInfo)==null?void 0:_.amountA):"--")+" "+i(e.needReverse?(Z=(M=e.positionInfo)==null?void 0:M.token_b)==null?void 0:Z.symbol:(U=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:U.symbol),1),o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:P(N))((ne=e.positionInfo)==null?void 0:ne.myAmountAUSD):"--"),1)],64))])]),o("div",ta,[o("img",{src:e.getCoinIcon((k=e.positionInfo)==null?void 0:k.lpInfo),alt:""},null,8,sa),aa]),o("div",la,[o("div",ia,[o("img",{src:e.needReverse?e.getCoinIcon((z=e.positionInfo)==null?void 0:z.token_a):e.getCoinIcon((I=e.positionInfo)==null?void 0:I.token_b),alt:""},null,8,ua),F(b,{address:e.needReverse?(O=(le=e.positionInfo)==null?void 0:le.token_a)==null?void 0:O.address:(K=(G=e.positionInfo)==null?void 0:G.token_b)==null?void 0:K.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ra,[e.autoPoolLoading?(s(),B(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(s(),p(_e,{key:0},[o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:P(N))((J=e.positionInfo)==null?void 0:J.amountB):"--")+" "+i(e.needReverse?(w=(ue=e.positionInfo)==null?void 0:ue.token_a)==null?void 0:w.symbol:(ae=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ae.symbol),1),o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:P(N))((L=e.positionInfo)==null?void 0:L.myAmountBUSD):"--"),1)],64))])]),da])])])}const xo=Oe(Ws,[["render",va],["__scopeId","data-v-3cde2b77"]]),ma=Fe({components:{Modal:wo},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""},isOnlyA:{type:Boolean,default:!1},isOnlyB:{type:Boolean,default:!1}},setup(e,t){const{t:H}=yo(),V=y(()=>{var n,r,d;return((n=e==null?void 0:e.poolInfo)==null?void 0:n.needReverse)||((d=(r=e==null?void 0:e.poolInfo)==null?void 0:r.poolInfo)==null?void 0:d.needReverse)}),T=Je(),$=y(()=>T),u=vo(),b=y(()=>u),g=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=$.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(b.value.theme==="default"?Ge("/image/coins/unknown.png"):Ge("/image/coins/sui-unknown.png"))},A=Xe(),a=S(!1);return{needReverse:V,getCoinIcon:g,addCommom:N,t:H,route:A,checked:a,decimalUi:Re,clickSubmit:()=>{t.emit("toAdd")}}}});const Po=e=>(Ve("data-v-9d7ef3bf"),e=e(),je(),e),pa=Po(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ca={class:"modal-content"},fa={class:"pool-info"},ga={class:"left"},ya={alt:""},ba={alt:""},ha={class:"pool-name"},ka={class:"right"},$a={class:"coin-info"},_a={key:0,class:"from-coin-info"},Ia={class:"left"},wa={class:"coin-amount"},Ca={class:"coin-symbol"},Sa={class:"right"},Aa={key:1,class:"to-coin-info"},Pa={class:"left"},Ra={class:"coin-amount"},Na={class:"coin-symbol"},Ta={class:"right"},La={key:0,class:"to-swap-logo"},qa={class:"add-info"},Ba={class:"total-amount"},Oa=Po(()=>o("span",null,"Total Amount",-1)),Da={class:"total-amount"},Ua=Po(()=>o("span",null,"Share of Pool",-1)),Ma={key:0,class:"total-amount"},Fa=Po(()=>o("span",null,"Minimum Received LP",-1));function Va(e,t,H,V,T,$){const u=mo,b=bo,g=Ke("Modal"),A=ho("image");return s(),B(g,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:t[0]||(t[0]=a=>e.$emit("onClose"))},{closeIcon:oe(()=>[pa]),default:oe(()=>{var a,m,n,r,d,f,h,c,_,q,U,M,Z,ne,k,I,z,G,K,le,O,J,se,ae;return[o("div",ca,[o("div",fa,[o("div",ga,[o("div",null,[ke(o("img",ya,null,512),[[A,e.needReverse?(r=(n=e.poolInfo)==null?void 0:n.token_b)==null?void 0:r.logo_url:(m=(a=e.poolInfo)==null?void 0:a.token_a)==null?void 0:m.logo_url]]),F(u,{address:e.needReverse?(c=(h=e.poolInfo)==null?void 0:h.token_b)==null?void 0:c.address:(f=(d=e.poolInfo)==null?void 0:d.token_a)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",null,[ke(o("img",ba,null,512),[[A,e.needReverse?(M=(U=e.poolInfo)==null?void 0:U.token_a)==null?void 0:M.logo_url:(q=(_=e.poolInfo)==null?void 0:_.token_b)==null?void 0:q.logo_url]]),F(u,{address:e.needReverse?(I=(k=e.poolInfo)==null?void 0:k.token_a)==null?void 0:I.address:(ne=(Z=e.poolInfo)==null?void 0:Z.token_b)==null?void 0:ne.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",ha,[o("span",null,i(e.needReverse?(le=(K=e.poolInfo)==null?void 0:K.token_b)==null?void 0:le.symbol:(G=(z=e.poolInfo)==null?void 0:z.token_a)==null?void 0:G.symbol),1),me(" - "),o("span",null,i(e.needReverse?(ae=(se=e.poolInfo)==null?void 0:se.token_a)==null?void 0:ae.symbol:(J=(O=e.poolInfo)==null?void 0:O.token_b)==null?void 0:J.symbol),1)])]),o("div",ka,[me(" Fee tier "),o("span",null,i(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),o("div",$a,[e.isOnlyA||!e.isOnlyA&&!e.isOnlyB?(s(),p("div",_a,[o("div",Ia,[o("div",wa,i(("addCommom"in e?e.addCommom:P(N))(e.fromCoinAmount)||0),1),o("div",Ca,i(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Sa,[ke(o("img",null,null,512),[[A,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),F(u,{address:e.fromCoin&&e.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])])):E("",!0),e.isOnlyB||!e.isOnlyA&&!e.isOnlyB?(s(),p("div",Aa,[o("div",Pa,[o("div",Ra,i(("addCommom"in e?e.addCommom:P(N))(e.toCoinAmount)||0),1),o("div",Na,i(e.toCoin&&e.toCoin.symbol),1)]),o("div",Ta,[ke(o("img",null,null,512),[[A,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),F(u,{address:e.toCoin&&e.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),!e.isOnlyA&&!e.isOnlyB?(s(),p("div",La)):E("",!0)])):E("",!0)]),o("div",qa,[o("div",Ba,[Oa,o("span",null,i(Number(e.totalAmount)>0&&Number(e.totalAmount)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:P(N))(e.totalAmount,2)}`),1)]),o("div",Da,[Ua,o("span",null,i(e.shareOfPool)+"%",1)]),e.minimumReceivedLP?(s(),p("div",Ma,[Fa,o("span",null,i(("addCommom"in e?e.addCommom:P(N))(e.minimumReceivedLP))+" "+i(e.fromCoin.symbol)+"-"+i(e.toCoin.symbol),1)])):E("",!0)])]),F(b,{class:"big-btn liquidity-btn",onClick:e.clickSubmit},{default:oe(()=>[me(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const en=Oe(ma,[["render",Va],["__scopeId","data-v-9d7ef3bf"]]),ja=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Ea={},on=e=>(Ve("data-v-fcbc716b"),e=e(),je(),e),Wa={class:"status"},Ha=on(()=>o("img",{src:ja,alt:""},null,-1)),Ya=on(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),za=[Ha,Ya];function Ga(e,t){return s(),p("div",Wa,za)}const nn=Oe(Ea,[["render",Ga],["__scopeId","data-v-fcbc716b"]]),{$notify:Xa}=mn(),Za=Fe({components:{AutoPoolAddModal:en,AutoPoolV2PoolStatus:nn},setup(){const e=So(),t=S(!1),H=vo(),V=y(()=>H),T=y(()=>V.value.chainName),$=y(()=>e),u=Ze(),b=y(()=>u),g=Je(),A=y(()=>g),a=S(),m=Xe(),n=S(!1),r=S(!1);be(()=>[b.value.positionInfoObj,m.params.id],([R,te])=>{R&&!Ye(R)&&te&&(a.value=R[te])},{immediate:!0,deep:!0});const d=y(()=>{var R;return(R=a.value)==null?void 0:R.needReverse}),f=S(),h=S(),c=S(),_=S(),q=S(!0),U=y(()=>$.value.assets&&f.value&&$.value.assets[f.value.address]?Fo($.value.assets[f.value.address].balance,f.value.decimals):0),M=y(()=>$.value.assets&&h.value&&$.value.assets[h.value.address]?Fo($.value.assets[h.value.address].balance,h.value.decimals):0),Z=R=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:358 ~ maxBtnSelect ~ maxBtnSelect:",f.value.symbol=="SUI",h.value.symbol=="SUI",R),R==="fromCoin"?(q.value=!0,c.value=U.value>0?f.value.symbol=="SUI"?new v(Number(U.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(U.value)).sub(new v(.5)).lt(new v(0))?new v(Number(U.value)).sub(new v(.5)).lt(new v(0)).toString():"":String(U.value):""):(q.value=!1,_.value=M.value>0?h.value.symbol=="SUI"?new v(Number(M.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(M.value)).sub(new v(.5)).lt(new v(0))?"":new v(Number(M.value)).sub(new v(.5)).toString():String(M.value):"")},ne=R=>{R==="fromCoin"?(q.value=!0,c.value=U.value>0?D(new v(Number(U.value)).div(2).toString(),f.value.decimals).toString():""):(q.value=!1,_.value=M.value>0?D(new v(Number(M.value)).div(2).toString(),h.value.decimals).toString():"")},k=y(()=>T.value?Ho(T.value):{}),I=y(()=>b.value.slippage),z=S("--"),G=S("--"),K=R=>{const te=new v(a.value.autoPoolPositionInfo.liquidity),ce=new v(R.toString());if(te.toNumber()>0&&ce.toNumber()>0){const Q=ce.add(te);console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:438 ~ getShareOfPool ~ liquidity:",ce.toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:439 ~ getShareOfPool ~ totalLiquidity:",te.toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:442 ~ getShareOfPool ~ liquidityTotalSupply:",Q.toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:465 ~ getShareOfPool ~ liquidity.div(liquidityTotalSupply).toString():",ce.div(Q).toString());const he=ce.div(Q).mul(100).toString(),Pe=yn(he),l=Pe==-1?2:Pe+2,j=D(ce.div(Q).mul(100).toString(),l),pe=new v(1).div(new v(Math.pow(10,a.value.lpInfo.decimals))).toString();Number(j)<Number(pe)?z.value=`<${pe}`:z.value=j}else ce.toNumber()>0&&te.toNumber()<=0?z.value="100":z.value="--"},le=R=>{if(a.value.total_supply==0){G.value="";return}new v(R.toString());const te=new v(I.value).div(100),ce=Bo.get_lp_amount_by_liquidity({liquidity:a.value.liquidity,total_supply:a.value.total_supply},R.toString()),Q=new v(Math.pow(10,a.value.lpInfo.decimals)),he=new v(ce).div(Q).toString(),Pe=new v(he).mul(te),l=new v(he).sub(Pe);G.value=D(l.toString(),a.value.decimals)},O=S(!1),J=S(!1),se=S("");S();const ae=S(!1),ue=S(!1),w=S(!1),L=S(!1),ie=R=>{if(R=="Haedal")return"Haedal";if(R=="Volo")return"Volo";if(R=="aftermath")return"Aftermath"},ve=async()=>{if(!a.value)return;if(a.value.supportHaedalStake&&L.value&&_.value<10){ue.value=!0;return}if(w.value&&Number(c.value)==0)return;r.value=!1,ae.value=!0;const R=a.value.autoPoolPositionInfo.tick_lower_index,te=a.value.autoPoolPositionInfo.tick_upper_index,ce=qo.sqrtPriceX64ToTickIndex(new Le(a.value.current_sqrt_price));ce<R&&(d.value?O.value=!0:J.value=!0),ce>te&&(d.value?J.value=!0:O.value=!0);let Q;if(c.value||_.value){q.value?Q=new v(c.value).mul(Math.pow(10,f.value.decimals)).toString():Q=new v(_.value).mul(Math.pow(10,h.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:569 ~ updateAmounts ~ coinAmount:",Q);let he,Pe=q.value;if(w.value||L.value){const W=await Ae.calculateDepositAmount({vault_id:a.value.id,fix_amount_a:Pe,input_amount:Q,slippage:Number(I.value)/100,side:oo.OneSide,decimals:w.value?f.value.decimals:h.value.decimals});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:584 ~ updateAmounts ~ swapResult:",W),W=="HaedalStakeSuiAmountError"){n.value=!1,ue.value=!0;return}else if(W){if(W.request_id!==Q)return;he=new Le(W.afterSqrtPrice),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:605 ~ updateAmounts ~ swapResult.afterSqrtPrice:",W.afterSqrtPrice),ue.value=!1,console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:607 ~ updateAmounts ~ positionInfo.value.supportHaedalStake:",a.value.supportHaedalStake),n.value=a.value.supportHaedalStake?!1:W.is_exceed;const de=a.value.token_a.decimals,ee=a.value.token_b.decimals,ge=new v(W.swapInAmount).div(new v(Math.pow(10,de))).toString(),Be=D(new v(W.swapOutAmountLimit).div(new v(Math.pow(10,ee))).toString(),ee),x=d.value?a.value.token_b.symbol:a.value.token_a.symbol,Ie=d.value?a.value.token_a.symbol:a.value.token_b.symbol,Me=`By depositing ${N(w.value?c.value:_.value)} ${w.value?x:Ie},
                    ${N(ge)} ${w.value?x:Ie}  will be traded for ${N(Be)} ${w.value?Ie:x} and then added to the pool together.`,so=`By depositing ${N(_.value)} ${Ie}, ${N(Be)} ${Ie} will be converted to ${x} via ${ie(a.value.stakeProtocol)}
                    liquid staking and added to the pool together.`;se.value=a.value.supportHaedalStake&&L.value?so:Me}else he=a.value.current_sqrt_price,Q=new Le(Q)}else he=a.value.current_sqrt_price,Q=new Le(Q);let l,j,pe;const Y=k.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:f.value,tokenB:h.value,lowerTick:R,upperTick:te,coinAmount:new Le(Q),iscoinA:Pe,roundUp:!0,slippage:Number(I.value)/100,curSqrtPrice:new Le(he)});l=Y.liquidityAmount,j=Y.tokenMaxA,pe=Y.tokenMaxB,!w.value&&!L.value&&(q.value?_.value=Number(pe)>0?pe:"":c.value=Number(j)>0?j:""),K(l),le(l),ae.value=!1}};be(()=>a.value,R=>{R&&!Ye(R)&&(f.value=R==null?void 0:R.token_a,h.value=R==null?void 0:R.token_b,O.value=!1,J.value=!1,ve())},{immediate:!0});const re=y(()=>A.value.RATES),C=y(()=>{var R,te,ce,Q,he,Pe,l,j;if((te=re.value[(R=f.value)==null?void 0:R.address])!=null&&te.price&&((Q=re.value[(ce=h.value)==null?void 0:ce.address])!=null&&Q.price)){const pe=new v(c.value||0).mul(new v((Pe=re.value[(he=f.value)==null?void 0:he.address])==null?void 0:Pe.price)),Y=new v(_.value||0).mul(new v((j=re.value[(l=h.value)==null?void 0:l.address])==null?void 0:j.price));return pe.add(Y).toString()}else return"--"});be(()=>c.value,go((R,te)=>{R?ve():(z.value="--",_.value="",G.value="--")},500),{immediate:!0}),be(()=>_.value,go((R,te)=>{R?ve():(c.value="",z.value="--",G.value="--")},500),{immediate:!0});const{t:X,locale:We}=yo(),fe=y(()=>{var R,te;if(w.value||L.value){const ce=w.value?c.value:_.value,Q=w.value?f.value:h.value;if((R=re.value[Q==null?void 0:Q.address])!=null&&R.price)return new v(ce||0).mul(new v((te=re.value[Q==null?void 0:Q.address])==null?void 0:te.price)).toNumber()}return 0}),De=y(()=>{const R=Number(c.value)>Number(U.value),te=Number(_.value)>Number(M.value);return!c.value&&!_.value?X("button.enterAmount"):a.value.supportHaedalStake&&L.value&&_.value<10?"Minimum deposit 10 SUI":R?X("button.insufficientBalance",{name:f.value.symbol}):te?X("button.insufficientBalance",{name:h.value.symbol}):n.value?X("button.insufficientLiquidity"):Number(a.value.remainingTokenUSD)!==0&&Number(a.value.quoteUSD)>0&&Number(C.value)>Number(a.value.remainingTokenUSD)?"Exceeded the max capacity":r.value?X("button.enterAmount"):"Add Liquidity"}),Ue=y(()=>{const R=Number(c.value)>Number(U.value),te=Number(_.value)>Number(M.value);return!!(!c.value&&!_.value||R||te||c.value<=0&&_.value<=0||n.value||to.value!=="STATUS_RUNNING"||Number(a.value.remainingTokenUSD)!==0&&Number(a.value.quoteUSD)>0&&Number(C.value)>Number(a.value.remainingTokenUSD)||r.value||a.value.supportHaedalStake&&!L.value&&fe.value>1e4||!a.value.supportHaedalStake&&fe.value>1e4||ue.value||a.value.supportHaedalStake&&L.value&&_.value<10)}),we=S(!1),{setIsShowSuccess:Se,setIsShowRejected:qe,setIsShowWaiting:Ce,setTransactionDesc:po,setTransactionTxid:no,setPositiomNum:eo}=H,Ae=Wo("Sui"),lo=async()=>{var he,Pe;t.value=!1,we.value=!0,no("");const R=`${N(c.value)} ${(he=f.value)==null?void 0:he.symbol}`,te=`${N(_.value)} ${(Pe=h.value)==null?void 0:Pe.symbol}`;po(`Deposit ${c.value>0?R:""} ${_.value>0&&c.value>0?"and":""} ${_.value>0?te:""}`),Ce(!0);const ce=q.value;let Q;q.value?Q=new v(c.value).mul(Math.pow(10,f.value.decimals)).toString():Q=new v(_.value).mul(Math.pow(10,h.value.decimals)).toString();try{const l={vault_id:a.value.id,fix_amount_a:ce,input_amount:Q,slippage:Number(I.value)/100,side:w.value||L.value?oo.OneSide:oo.Both};console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:1063 ~ toAdd ~ params:",l);const j=await Ae.deposit(l),pe=await k.value.signAndExecuteTransactionBlock($.value.currentWallet,j);let Y=k.value.handleTx(pe);if(console.log("toAdd###tx###",Y),Y&&Y.hash){no(Y.hash),Ce(!1),Se(!0);const W={title:"Supplied",desc:`Deposit ${c.value>0?R:""} ${_.value>0&&c.value>0?"and":""} ${_.value>0?te:""}`,hash:Y.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${c.value>0?R:""} ${_.value>0&&c.value>0?"and":""} ${_.value>0?te:""}`,isOnlyToken:w.value||L.value,isOnlyTokenInfo:w.value?f.value:h.value};T.value!=="Aptos"&&(W.res=Y.res),k.value.showTransitionPending(W),await k.value.watchTransaction(W)&&setTimeout(()=>{u.updatePositionItem(a.value.id),k.value.getAccount($.value.address)},1e3),eo()}else Ce(!1),qe(!0);c.value="",_.value="",we.value=!1}catch(l){c.value="",_.value="",console.log("addError###",l),String(l).indexOf('Identifier("balance")')>-1?Xa.error({icon:fo("svg",{class:{icon:!0},"aria-hidden":!0},[fo("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:fo("div",{class:"notification-title"},[fo("span",{innerHTML:"Transaction failed"},null)]),description:"Exceeded price slippage.",duration:4.5,class:"ant-notification-copy ant-notification-error"}):qe(!0),we.value=!1,Ce(!1)}},io=R=>{c.value="",_.value="",se.value="",ue.value=!1,R=="only-a-b"?(w.value=!1,L.value=!1):R=="only-a"?(w.value=!0,L.value=!1):(L.value=!0,w.value=!1)},to=y(()=>b.value.currentAutoPoolStatus),ze=S(),He=()=>{ze.value=window.setInterval(()=>{(c.value||_.value)&&ve()},2e4)};Co(()=>{He()}),Oo(()=>{window.clearInterval(ze.value)});const Ro=fo(vn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),No="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",ye=y(()=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${f.value.symbol} via ${ie(a.value.stakeProtocol)} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`),co=y(()=>b.value.autoPoolLoading);return{currentAutoPoolStatus:to,wallet:$,positionInfo:a,isShowAddModal:t,needReverse:d,fromCoin:f,toCoin:h,fromCoinAmount:c,toCoinAmount:_,fromCoinBlance:U,toCoinBlance:M,fixedFromCoin:q,maxBtnSelect:Z,halfBtnSelect:ne,totalAmountUSD:C,addCommom:N,shareOfPool:z,minimumReceivedLP:G,addLiquidityBtnText:De,addLiquidityBtnDisabled:Ue,toAdd:lo,showToCoinLock:J,showFromCoinLock:O,isOnlyA:w,isOnlyB:L,onlyToken:io,onlyText:se,onlyTokenUSD:fe,calculateLoading:ae,indicator:Ro,depositTokenTips:No,depositHaedalTokenTips:ye,loading:we,autoPoolLoading:co}}});const xe=e=>(Ve("data-v-e1843de6"),e=e(),je(),e),Ja={class:"auto-pool-add"},Qa={class:"auto-pool-add-content"},Ka={class:"liquidity-action-tab"},xa=xe(()=>o("div",{class:"increase tab-active"},"Add",-1)),el={class:"only-token"},ol=xe(()=>o("div",null,"Deposit Amounts",-1)),nl={key:0},tl=xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),sl=xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),al={key:0,class:"card-item"},ll={key:1,class:"card-item"},il=xe(()=>o("span",null,"Pool Closed",-1)),ul={key:0,class:"add-info"},rl={key:0,class:"only-text"},dl={class:"total-amount"},vl=xe(()=>o("span",null,"Total Amount",-1)),ml={key:0},pl={class:"total-amount"},cl=xe(()=>o("span",null,"Share of Pool",-1)),fl={key:0},gl={key:1,class:"total-amount"},yl=xe(()=>o("span",null,"Minimum Received LP",-1)),bl={key:0},hl={key:1,class:"add-info only-add-info"},kl=xe(()=>o("div",{class:"only-text"}," Single-asset deposit can't be higher than $10,000 at a time. ",-1)),$l=[kl];function _l(e,t,H,V,T,$){var r,d,f,h,c,_,q,U,M,Z,ne,k,I,z,G,K,le,O,J,se,ae,ue,w;const u=Vo,b=zo,g=Go,A=Ke("AutoPoolV2PoolStatus"),a=bo,m=ko,n=en;return s(),p("div",Ja,[o("div",Qa,[o("div",Ka,[xa,o("div",{class:"remove",onClick:t[0]||(t[0]=Eo(L=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",el,[ol,e.autoPoolLoading?E("",!0):(s(),p("div",nl,[o("div",{class:$e(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:t[1]||(t[1]=L=>e.onlyToken("only-a-b"))},[o("span",null,i(e.needReverse?(h=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:h.symbol:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.symbol)+" + "+i(e.needReverse?(U=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:U.symbol:(_=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:_.symbol),1)],2),o("div",{class:$e(["only-a",e.isOnlyA?"active-only":""]),onClick:t[2]||(t[2]=L=>e.onlyToken("only-a"))},[o("span",null,i(e.needReverse?(k=(ne=e.positionInfo)==null?void 0:ne.token_b)==null?void 0:k.symbol:(Z=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:Z.symbol)+" only",1),F(u,{placement:"bottom","arrow-point-at-center":""},{title:oe(()=>[o("span",null,i(e.depositTokenTips),1)]),default:oe(()=>[tl]),_:1})],2),o("div",{class:$e(["only-b",e.isOnlyB?"active-only":""]),onClick:t[3]||(t[3]=L=>e.onlyToken("only-b"))},[o("span",null,i(e.needReverse?(K=(G=e.positionInfo)==null?void 0:G.token_a)==null?void 0:K.symbol:(z=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:z.symbol)+" only",1),F(u,{placement:"bottom","arrow-point-at-center":""},{title:oe(()=>[o("span",null,i(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:oe(()=>[sl]),_:1})],2)]))]),o("div",{class:$e(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(s(),p("div",al,[F(b,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=L=>e.fromCoinAmount=L),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[5]||(t[5]=L=>e.maxBtnSelect("fromCoin")),onOnHalf:t[6]||(t[6]=L=>e.halfBtnSelect("fromCoin")),onOnInput:t[7]||(t[7]=L=>{e.fromCoinAmount=L}),onOnFocus:t[8]||(t[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(s(),B(g,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(s(),p("div",ll,[F(b,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[9]||(t[9]=L=>e.toCoinAmount=L),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[10]||(t[10]=L=>e.maxBtnSelect("toCoin")),onOnHalf:t[11]||(t[11]=L=>e.halfBtnSelect("toCoin")),onOnInput:t[12]||(t[12]=L=>{e.toCoinAmount=L}),onOnFocus:t[13]||(t[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(s(),B(g,{key:0})):E("",!0)])):E("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(s(),B(A,{key:0})):E("",!0),(le=e.positionInfo)!=null&&le.is_pause?(s(),B(a,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:oe(()=>[il]),_:1})):e.wallet.connected?(s(),B(a,{key:2,class:"big-btn liquidity-btn",disabled:e.loading||e.addLiquidityBtnDisabled,loading:e.loading,onClick:t[14]||(t[14]=L=>e.isShowAddModal=!0)},{default:oe(()=>[o("span",null,i(e.addLiquidityBtnText),1)]),_:1},8,["disabled","loading"])):(s(),B(a,{key:3,class:"big-btn liquidity-btn",onClick:t[15]||(t[15]=L=>e.wallet.setIsShowWalletModal(!0))},{default:oe(()=>[o("span",null,i(e.$t("button.connectWallet")),1)]),_:1})),(((O=e.positionInfo)==null?void 0:O.quoteUSD)==0||Number((J=e.positionInfo)==null?void 0:J.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(s(),p(_e,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(s(),p("div",ul,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(s(),p("div",rl,i(e.onlyText),1)):E("",!0),o("div",dl,[vl,e.calculateLoading?(s(),B(m,{key:1,paragraph:!1,active:""})):(s(),p("span",ml,i(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:P(N))(e.totalAmountUSD,2)}`),1))]),o("div",pl,[cl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),p("span",fl,i(e.shareOfPool)+"%",1)):(s(),B(m,{key:1,paragraph:!1,active:""}))]),e.minimumReceivedLP?(s(),p("div",gl,[yl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),p("span",bl,i(("addCommom"in e?e.addCommom:P(N))(e.minimumReceivedLP))+" "+i(e.needReverse?(se=e.toCoin)==null?void 0:se.symbol:(ae=e.fromCoin)==null?void 0:ae.symbol)+"-"+i(e.needReverse?(ue=e.fromCoin)==null?void 0:ue.symbol:(w=e.toCoin)==null?void 0:w.symbol),1)):(s(),B(m,{key:1,paragraph:!1,active:""}))])):E("",!0)])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(s(),p("div",hl,$l)):E("",!0)],64)):E("",!0),e.isShowAddModal?(s(),B(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:t[16]||(t[16]=L=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):E("",!0)])}const Il=Oe(Za,[["render",_l],["__scopeId","data-v-e1843de6"]]),wl=Fe({components:{Modal:wo},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(e,t){const{t:H}=yo(),V=y(()=>{var n,r,d;return((n=e==null?void 0:e.poolInfo)==null?void 0:n.needReverse)||((d=(r=e==null?void 0:e.poolInfo)==null?void 0:r.poolInfo)==null?void 0:d.needReverse)}),T=Je(),$=y(()=>T),u=vo(),b=y(()=>u),g=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=$.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(b.value.theme==="default"?Ge("/image/coins/unknown.png"):Ge("/image/coins/sui-unknown.png"))},A=Xe(),a=S(!1);return{needReverse:V,getCoinIcon:g,addCommom:N,t:H,route:A,checked:a,decimalUi:Re,clickSubmit:()=>{t.emit("toAdd")}}}});const ao=e=>(Ve("data-v-1327bdf7"),e=e(),je(),e),Cl=ao(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Sl={class:"modal-content"},Al={class:"pool-info"},Pl={class:"left"},Rl={alt:""},Nl={alt:""},Tl={class:"pool-name"},Ll={class:"right"},ql=ao(()=>o("div",{class:"lp-info"},[o("div",{class:"lp-num"},[o("p",null,"1,126,122.123456"),o("span",null,"USDT-USDC LP")]),o("div",{class:"lp-bg"})],-1)),Bl={class:"est-receive"},Ol=ao(()=>o("div",{class:"est-receive-title"},"Estimated Receive",-1)),Dl={class:"token-a"},Ul=ao(()=>o("div",null,"0.941824",-1)),Ml={alt:""},Fl=ao(()=>o("span",null,"USDT",-1)),Vl={class:"token-a"},jl=ao(()=>o("div",null,"0.941824",-1)),El={alt:""},Wl=ao(()=>o("span",null,"USDC",-1));function Hl(e,t,H,V,T,$){const u=mo,b=bo,g=Ke("Modal"),A=ho("image");return s(),B(g,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:t[0]||(t[0]=a=>e.$emit("onClose"))},{closeIcon:oe(()=>[Cl]),default:oe(()=>{var a,m,n,r,d,f,h,c,_,q,U,M,Z,ne,k,I,z,G,K,le,O,J,se,ae;return[o("div",Sl,[o("div",Al,[o("div",Pl,[o("div",null,[ke(o("img",Rl,null,512),[[A,e.needReverse?(r=(n=e.poolInfo)==null?void 0:n.token_b)==null?void 0:r.logo_url:(m=(a=e.poolInfo)==null?void 0:a.token_a)==null?void 0:m.logo_url]]),F(u,{address:e.needReverse?(c=(h=e.poolInfo)==null?void 0:h.token_b)==null?void 0:c.address:(f=(d=e.poolInfo)==null?void 0:d.token_a)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",null,[ke(o("img",Nl,null,512),[[A,e.needReverse?(M=(U=e.poolInfo)==null?void 0:U.token_a)==null?void 0:M.logo_url:(q=(_=e.poolInfo)==null?void 0:_.token_b)==null?void 0:q.logo_url]]),F(u,{address:e.needReverse?(I=(k=e.poolInfo)==null?void 0:k.token_a)==null?void 0:I.address:(ne=(Z=e.poolInfo)==null?void 0:Z.token_b)==null?void 0:ne.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",Tl,[o("span",null,i(e.needReverse?(le=(K=e.poolInfo)==null?void 0:K.token_b)==null?void 0:le.symbol:(G=(z=e.poolInfo)==null?void 0:z.token_a)==null?void 0:G.symbol),1),me(" - "),o("span",null,i(e.needReverse?(ae=(se=e.poolInfo)==null?void 0:se.token_a)==null?void 0:ae.symbol:(J=(O=e.poolInfo)==null?void 0:O.token_b)==null?void 0:J.symbol),1)])]),o("div",Ll,[me(" Fee tier "),o("span",null,i(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),ql,o("div",Bl,[Ol,o("div",Dl,[Ul,o("div",null,[ke(o("img",Ml,null,512),[[A,"1"]]),Fl])]),o("div",Vl,[jl,o("div",null,[ke(o("img",El,null,512),[[A,"1"]]),Wl])])])]),F(b,{class:"big-btn liquidity-btn",onClick:e.clickSubmit},{default:oe(()=>[me(i(e.isIncrease?"Increase Liquidity":e.title==e.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const tn=Oe(wl,[["render",Hl],["__scopeId","data-v-1327bdf7"]]),Yl=Fe({components:{AutoPoolRemoveModal:tn,AutoPoolV2PoolStatus:nn},setup(){const e=So(),t=y(()=>e),H=vo(),V=y(()=>H),T=y(()=>m.value.slippage),$=y(()=>V.value.chainName),u=bn();y(()=>u);const b=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],g=S(0),A=Xe(),a=Ze(),m=y(()=>a),n=y(()=>m.value.positionInfoObj[A.params.id]),r=y(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),d=S(),f=S(),h=S(!1),c=S(),_=y(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),q=S(!0),U=y(()=>$.value?Ho($.value):{}),M=S(),Z=S(),ne=Wo("Sui"),k=S(""),I=S(""),z=S("--"),G=S(!1),K=S(!1),le=S(),O=S(!0),J=S(),se=Je(),ae=y(()=>se),ue=y(()=>ae.value.RATES),w=S(!1),L=async()=>{if(q.value||!n.value||n.value.positionLiquidity==0)return;Z.value=!1,w.value=!0;const l=n.value.autoPoolPositionInfo.tick_lower_index,j=n.value.autoPoolPositionInfo.tick_upper_index,pe=qo.sqrtPriceX64ToTickIndex(new Le(n.value.current_sqrt_price));pe<l&&(r.value?G.value=!0:K.value=!0),pe>j&&(r.value?K.value=!0:G.value=!0);let Y;if(k.value||I.value){if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:365 ~ updateAmounts ~ fixedFromCoin.value:",O.value,k.value,I.value),O.value?(Y=new v(k.value).mul(Math.pow(10,d.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:368 ~ updateAmounts ~ coinAmount:",Y,k.value)):(Y=new v(I.value).mul(Math.pow(10,f.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:374 ~ updateAmounts ~ coinAmount:",Y)),Y<=0)return!1;let W,de=O.value;if(C.value||X.value){const x=await ne.calculateWithdrawAmount({vault_id:n.value.id,fix_amount_a:de,input_amount:Y,slippage:Number(T.value)/100,side:oo.OneSide,decimals:C.value?d.value.decimals:f.value.decimals});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:408 ~ updateAmounts ~ swapResult:",x),x){if(x.request_id!==Y)return;M.value=x.is_exceed,Y=new Le(x.swapOutAmount),W=n.value.current_sqrt_price,le.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!de,route_obj:x.route_obj},de=!de;const Ie=n.value.token_a.decimals,Me=n.value.token_b.decimals,so=new v(x.swapInAmount).div(new v(Math.pow(10,Ie))).toString(),Ne=D(new v(x.swapOutAmountLimit).div(new v(Math.pow(10,Me))).toString(),Me),Te=r.value?n.value.token_b.symbol:n.value.token_a.symbol,Qe=r.value?n.value.token_a.symbol:n.value.token_b.symbol;J.value=k.value==ye.value||I.value==ye.value?`To withdraw ${N(C.value?k.value:I.value)} ${C.value?Te:Qe},
                          ${N(C.value?n.value.amountB:n.value.amountA)} ${C.value?Qe:Te}
                           in the pool will be traded for ${so} ${C.value?Te:Qe}`:`To withdraw ${N(C.value?k.value:I.value)} ${C.value?Te:Qe},
                          ${N(so)} ${C.value?Qe:Te}  in the pool will be traded for ${N(Ne)} ${C.value?Te:Qe}`}else{Z.value=!0,J.value="";return}}else M.value=!1,W=n.value.current_sqrt_price,Y=new Le(Y);const{liquidityAmount:ee,tokenMaxA:ge,tokenMaxB:Be}=U.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:f.value,lowerTick:l,upperTick:j,coinAmount:Y,iscoinA:de,roundUp:!1,slippage:Number(T.value)/100,curSqrtPrice:new Le(W)});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:484 ~ updateAmounts ~ coinAmount:",Y.toString()),!C.value&&!X.value&&(O.value?I.value=Number(Be)>0?Be:"":k.value=Number(ge)>0?ge:""),(C.value||X.value)&&(Number(k.value)>=Number(ye.value)||Number(I.value)>=Number(ye.value))){c.value=n.value.myLiquidity;const x=new v(100);z.value=new v(n.value.myLiquidity).mul(new v(Math.pow(10,n.value.lpInfo.decimals))).toString(),ie.value=ee.toString(),g.value=x.toNumber()}else{const x=Bo.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ee.toString()),Ie=new v(x).div(new v(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:518 ~ updateAmounts ~ result:",Ie);const Me=new v(Ie).div(new v(_.value)).mul(100);c.value=new v(_.value).mul(Me.toString()).div(100).toString(),z.value=x,ie.value=ee.toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:518 ~ updateAmounts ~ ratio:",Me.toString()),g.value=Me.toNumber()}w.value=!1}},ie=S(),ve=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),re=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),C=S(!1),X=S(!1),We=y(()=>{var de,ee,ge,Be;const l=((ee=ue.value[(de=d==null?void 0:d.value)==null?void 0:de.address])==null?void 0:ee.price)||0,j=((Be=ue.value[(ge=f==null?void 0:f.value)==null?void 0:ge.address])==null?void 0:Be.price)||0;let pe=k.value!=="--"&&k.value!==""?k.value:0,Y=I.value!=="--"&&I.value!==""?I.value:0,W="0";return l&&j&&(C.value||X.value?W=new v(C.value?pe:Y).mul(new v(C.value?l:j)).toString():W=new v(pe).mul(new v(l)).add(new v(Y).mul(new v(j))).toString()),W>0&&W<.01?"<$0.01":`$${N(D(W,2))}`}),fe=async l=>{var Be,x,Ie,Me,so;if(!q.value)return;console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:798 ~ setPercent ~ setPercent:",q.value),q.value=!0,Z.value=!1;const j=(x=(Be=n.value)==null?void 0:Be.autoPoolPositionInfo)==null?void 0:x.tick_lower_index,pe=(Me=(Ie=n.value)==null?void 0:Ie.autoPoolPositionInfo)==null?void 0:Me.tick_upper_index,Y=qo.sqrtPriceX64ToTickIndex(new Le((so=n==null?void 0:n.value)==null?void 0:so.current_sqrt_price));Y<j&&(r.value?G.value=!0:K.value=!0),Y>pe&&(r.value?K.value=!0:G.value=!0);let W="",de,ee;C.value?O.value=!0:X.value&&(O.value=!1);let ge=O.value;if(C.value||X.value&&!G.value&&!K.value){if(C.value){const Te=new v(ye.value).mul(Math.pow(10,d.value.decimals)).mul(l.value).toString();ee=D(Te,0),k.value=ye.value>0&&l.value?D(new v(ye.value).mul(l.value).toString(),d.value.decimals):""}if(X.value){const Te=new v(ye.value).mul(l.value).mul(Math.pow(10,f.value.decimals)).toString();ee=D(Te,0),I.value=ye.value>0&&l.value>0?D(new v(ye.value).mul(l.value).toString(),f.value.decimals):""}if(ee<=0)return!1;const Ne=await ne.calculateWithdrawAmount({vault_id:n.value.id,fix_amount_a:ge,input_amount:ee,slippage:Number(T.value)/100,side:C.value||X.value?oo.OneSide:oo.Both,decimals:C.value?d.value.decimals:f.value.decimals});if(Ne){if(Ne.request_id!==ee)return;M.value=Ne.is_exceed,ee=new Le(Ne.swapOutAmount),n.value.current_sqrt_price,le.value={swap_amount:Ne.swapInAmount,liquidity:Ne.liquidity,route_obj:Ne.route_obj,a2b:!ge},ge=!ge;const Te=n.value.token_a.decimals,Qe=n.value.token_b.decimals,sn=new v(Ne.swapInAmount).div(new v(Math.pow(10,Te))).toString(),Mo=D(new v(Ne.swapOutAmountLimit).div(new v(Math.pow(10,Qe))).toString(),Qe),uo=r.value?n.value.token_b.symbol:n.value.token_a.symbol,ro=r.value?n.value.token_a.symbol:n.value.token_b.symbol;J.value=l.value==1?`To withdraw ${N(C.value?k.value:I.value)} ${C.value?uo:ro},
          ${N(C.value?n.value.amountB:n.value.amountA)} ${C.value?ro:uo}  in the pool will be traded for ${N(Mo)} ${C.value?uo:ro}`:`To withdraw ${N(C.value?k.value:I.value)} ${C.value?uo:ro},
          ${N(sn)} ${C.value?ro:uo}  in the pool will be traded for ${N(Mo)} ${C.value?uo:ro}`,W=Ne.liquidity}else n.value.current_sqrt_price,ee=new Le(ee),J.value="",Z.value=!0;z.value=new v(n.value.myLiquidity).mul(new v(l.value)).toString(),c.value=new v(z.value),ie.value=W}else{M.value=!1;const Ne=new v(ve.value).mul(Math.pow(10,d.value.decimals)).mul(l.value).toString();ee=D(Ne,0),k.value=l.value>0?D(new v(ve.value).mul(l.value).toString(),d.value.decimals):"";const Te=new v(re.value).mul(l.value).mul(Math.pow(10,f.value.decimals)).toString();ee=D(Te,0),I.value=l.value>0?D(new v(re.value).mul(l.value).toString(),f.value.decimals):"",n.value.current_sqrt_price,ee=new Le(ee),l.value!==1?de=new v(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():de=new v(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),c.value=new v(de).div(Math.pow(10,n.value.lpInfo.decimals)),W=Bo.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},de),z.value=D(de,0),ie.value=D(W,0)}};be(g,go((l,j)=>{l!==j&&q.value&&(Number(l)>100?g.value=100:l&&n.value?(g.value=l,fe({value:g.value/100})):(k.value="",I.value=""))},300)),be(()=>k.value,go((l,j)=>{l?L():!C.value&&!X.value&&(I.value="",g.value=0)},500),{immediate:!0}),be(()=>I.value,go((l,j)=>{l?L():!C.value&&!X.value&&(k.value="",g.value=0)},500),{immediate:!0});const De=Do(),{setIsShowSuccess:Ue,setIsShowRejected:we,setIsShowWaiting:Se,setTransactionDesc:qe,setTransactionTxid:Ce,setPositiomNum:po,setTransactionDescText:no}=H,eo=S(!1),{t:Ae}=yo(),lo=async()=>{var de,ee;eo.value=!0,Ce("");const l=Number(k.value)>0?`${N(k.value,d.value.decimals)} ${d.value.symbol}`:"",j=Number(I.value)>0?`${N(I.value,f.value.decimals)} ${f.value.symbol}`:"";qe(Ae("tips.removeLiquidiyText",{from:r.value?j:l,and:Number(k.value)>0&&Number(I.value)>0?"and":"",to:r.value?l:j})),Se(!0);const pe=Ae("modal.removeLiquidityText2");no(pe),n.value.autoPoolPositionInfo.tick_lower_index,n.value.autoPoolPositionInfo.tick_upper_index;let Y;(k.value||I.value)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:909 ~ toRemove ~ fixedFromCoin.value:",O.value),O.value?Y=new v(k.value).mul(Math.pow(10,d.value.decimals)).toString():Y=new v(I.value).mul(Math.pow(10,f.value.decimals)).toString());let W;if(C.value||X.value)g.value==100?W={vault_id:n.value.id,fix_amount_a:O.value,is_ft_input:!0,slippage:Number(T.value)/100,input_amount:n.value.balance,max_ft_amount:n.value.balance}:W={vault_id:n.value.id,fix_amount_a:O.value,is_ft_input:!1,slippage:Number(T.value)/100,input_amount:Y,max_ft_amount:n.value.balance};else if(g.value==100)W={vault_id:n.value.id,fix_amount_a:O.value,slippage:Number(T.value)/100,ft_amount:n.value.balance,max_ft_amount:n.value.balance};else{const ge=await ne.calculateWithdrawAmount({vault_id:n.value.id,fix_amount_a:O.value,input_amount:Y,slippage:Number(T.value)/100,side:C.value||X.value?oo.OneSide:oo.Both,decimals:C.value?d.value.decimals:f.value.decimals});W={vault_id:n.value.id,fix_amount_a:O.value,slippage:Number(T.value)/100,ft_amount:ge.burn_ft_amount,max_ft_amount:n.value.balance}}console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:911 ~ toRemove ~ params:",W);try{const ge=await ne.withdraw(W),Be=await U.value.signAndExecuteTransactionBlock(t.value.currentWallet,ge);let x=U.value.handleTx(Be);if(console.log("0331###remove###tx####",x),x&&x.hash){Ce(x.hash),Se(!1),Ue(!0);const Ie={title:Ae("common.removeLiquidity"),desc:"",hash:x.hash,descTransactions:`Remove ${l} ${Number(k.value)>0&&Number(I.value)>0?"and":""} ${j} from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${k.value} ${(de=d.value)==null?void 0:de.symbol} and ${I.value} ${(ee=f.value)==null?void 0:ee.symbol}`};Ie.res=x.res,U.value.showTransitionPending(Ie),await U.value.watchTransaction(Ie)&&(k.value="",I.value="",c.value="",g.value=0,setTimeout(()=>{a.updatePositionItem(n.value.id),U.value.getAccount(t.value.address)},1e3),Number(g.value)==100&&A.name=="auto-pool-detail"&&De.push("/vaults"))}else Se(!1),we(!0);eo.value=!1}catch(ge){console.log("Remove error",ge),eo.value=!1,Se(!1),we(!0)}};be(()=>n.value,(l,j)=>{l&&!Ye(l)&&(d.value=l==null?void 0:l.token_a,f.value=l==null?void 0:l.token_b,(!j||j&&j.address!==l.address)&&(g.value=g.value>0?g.value:0,fe({value:g.value/100})),j&&j.current_sqrt_price!==l.current_sqrt_price&&(q.value?fe({value:g.value/100}):L()))},{immediate:!0});const io=y(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const l=Number(c.value)>Number(_.value);return!k.value&&!I.value||!c.value||c.value<=0||!k.value&&C.value||!I.value&&X.value?Ae("button.enterAmount"):l?"Invalid Amount":M.value?Ae("button.insufficientLiquidity"):Z.value?Ae("button.enterAmount"):C.value&&Number(k.value)>Number(ye.value)||X.value&&Number(I.value)>Number(ye.value)?"Invalid Amount":Ae("button.remove")}),to=y(()=>{var j;if(((j=n==null?void 0:n.value)==null?void 0:j.positionLiquidity)==0)return!0;const l=Number(c.value)>Number(_.value);return!k.value&&!I.value||Number(k.value)<=0&&C.value||Number(I.value)<=0&&X.value?!0:!c.value||c.value<=0?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1109 ~ removeLiquidityBtnDisabled ~ lpAmount.value:",c.value),!0):!!(l||M.value||Q.value!=="STATUS_RUNNING"||Z.value||C.value&&Number(k.value)>Number(ye.value)||X.value&&Number(I.value)>Number(ye.value))}),ze=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||Ge("/image/coins/sui-unknown.png"),He=l=>{k.value="",I.value="",q.value=!0,g.value=0,J.value="",l=="only-a-b"?(C.value=!1,X.value=!1,fe({value:g.value/100})):l=="only-a"?(C.value=!0,X.value=!1):(X.value=!0,C.value=!1)},Ro=l=>{q.value=!0,g.value=100,l==="fromCoin"?O.value=!0:O.value=!1},No=l=>{q.value=!0,g.value=50,l==="fromCoin"?O.value=!0:O.value=!1},ye=S(),co=S(!1),R=y(()=>kn()),te=async()=>{co.value=!0;const l=n.value.token_a.decimals,j=n.value.token_b.decimals,pe=new v(ve.value).mul(new v(Math.pow(10,l))).toNumber(),Y=new v(re.value).mul(new v(Math.pow(10,j))).toNumber(),W=C.value?Y:pe;C.value?(f.value.address,n.value.token_a.address):(d.value.address,n.value.token_a.address);try{const de=await R.value.getFindRouter(C.value?f:d,C.value?d:f,W,!0,Number(T.value)/100,"",W,[{poolID:n.value.address,ticklower:n.value.autoPoolPositionInfo.tick_lower_index,tickUpper:n.value.autoPoolPositionInfo.tick_upper_index,deltaLiquidity:Number(n.value.positionLiquidity)}]);console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1242 ~ convertAssets ~ swapRouter:",de);const ee=new v(de.amountOut).div(Math.pow(10,f.value.decimals));ye.value=ee.sub(ee.mul(Number(T.value)/100)).add(new v(C.value?ve.value:re.value)).toString()}catch(de){const ee=hn(0);ye.value=ee.sub(ee.mul(Number(T.value)/100)).add(new v(C.value?ve.value:re.value)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1179 ~ convertAssets ~ e:",de)}co.value=!1,fe({value:g.value/100})};be(()=>[C.value,X.value,ve.value,re.value],([l,j])=>{(l||j)&&te()},{immediate:!0});const ce=l=>`${l}%`,Q=y(()=>m.value.currentAutoPoolStatus),he=S(),Pe=()=>{he.value=window.setInterval(()=>{(k.value||I.value)&&!q.value?L():fe({value:g.value/100})},2e4)};return Co(()=>{Pe()}),Oo(()=>{window.clearInterval(he.value)}),{removeLiquidityBtnText:io,removeLiquidityBtnDisabled:to,wallet:t,ratioArr:b,positionInfo:n,isShowRemoveModal:h,needReverse:r,fromCoin:d,toCoin:f,lpAmount:c,lpBalance:_,sliderVal:g,sFixD:D,isSlider:q,fromCoinAmount:k,toCoinAmount:I,setPercent:fe,toRemove:lo,addCommom:N,getCoinIcon:ze,isOnlyA:C,isOnlyB:X,onlyToken:He,fixedFromCoin:O,maxBtnSelect:Ro,halfBtnSelect:No,fromCoinBlance:ve,toCoinBlance:re,showFromCoinLock:G,showToCoinLock:K,removeText:J,onlyTokenBalance:ye,totalWithdraw:We,formatter:ce,currentAutoPoolStatus:Q,calculateLoading:w,convertAssetsLoading:co}}});const _o=e=>(Ve("data-v-fd47fed9"),e=e(),je(),e),zl={class:"auto-pool-add"},Gl={class:"auto-pool-add-content"},Xl={class:"liquidity-action-tab"},Zl=_o(()=>o("div",{class:"remove tab-active"},"Remove",-1)),Jl={key:0,class:"only-token"},Ql=_o(()=>o("div",null,"Remove Amounts",-1)),Kl={key:0,class:"card-item"},xl={key:1,class:"card-item"},ei={class:"remove-ratio"},oi={class:"remove-ratio-select"},ni={key:0,class:"ratio"},ti={key:1,class:"ratio"},si={class:"ratio-list"},ai=["onClick"],li=_o(()=>o("span",null,"Pool Closed",-1)),ii={key:4,class:"remove-info"},ui={key:0,class:"remove-text total-amount"},ri={class:"total-amount"},di=_o(()=>o("span",null,"Total Withdraw",-1)),vi={key:0},mi={class:"total-amount"},pi=_o(()=>o("span",null,"LP Burn Amount",-1)),ci={key:0};function fi(e,t,H,V,T,$){var r,d,f,h,c,_,q,U,M,Z,ne,k,I,z,G,K,le,O,J,se,ae,ue;const u=zo,b=Go,g=jo,A=Ke("AutoPoolV2PoolStatus"),a=bo,m=ko,n=tn;return s(),p("div",zl,[o("div",Gl,[o("div",Xl,[o("div",{class:"increase",onClick:t[0]||(t[0]=Eo(w=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Zl]),!e.showFromCoinLock&&!e.showToCoinLock?(s(),p("div",Jl,[Ql,o("div",null,[o("div",{class:$e(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:t[1]||(t[1]=w=>e.onlyToken("only-a-b"))},[o("span",null,i(e.needReverse?(h=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:h.symbol:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.symbol)+" + "+i(e.needReverse?(U=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:U.symbol:(_=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:_.symbol),1)],2),o("div",{class:$e(["only-a",e.isOnlyA?"active-only":""]),onClick:t[2]||(t[2]=w=>e.onlyToken("only-a"))},[o("span",null,i(e.needReverse?(k=(ne=e.positionInfo)==null?void 0:ne.token_b)==null?void 0:k.symbol:(Z=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:Z.symbol)+" only",1)],2),o("div",{class:$e(["only-b",e.isOnlyB?"active-only":""]),onClick:t[3]||(t[3]=w=>e.onlyToken("only-b"))},[o("span",null,i(e.needReverse?(K=(G=e.positionInfo)==null?void 0:G.token_a)==null?void 0:K.symbol:(z=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:z.symbol)+" only",1)],2)])])):E("",!0),o("div",{class:$e(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(s(),p("div",Kl,[F(u,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","convert-assets-loading":e.convertAssetsLoading,"has-arrow":!1,onOnMax:t[5]||(t[5]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:t[6]||(t[6]=w=>e.halfBtnSelect("fromCoin")),onOnInput:t[7]||(t[7]=w=>{e.isSlider=!1,e.fromCoinAmount=w}),onOnFocus:t[8]||(t[8]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","convert-assets-loading"]),e.showFromCoinLock?(s(),B(b,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(s(),p("div",xl,[F(u,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[9]||(t[9]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","convert-assets-loading":e.convertAssetsLoading,"import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[10]||(t[10]=w=>e.maxBtnSelect("toCoin")),onOnHalf:t[11]||(t[11]=w=>e.halfBtnSelect("toCoin")),onOnInput:t[12]||(t[12]=w=>{e.isSlider=!1,e.toCoinAmount=w}),onOnFocus:t[13]||(t[13]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","convert-assets-loading"]),e.showToCoinLock?(s(),B(b,{key:0})):E("",!0)])):E("",!0)],2),o("div",ei,[o("div",oi,[Number(e.lpBalance)>=Number(e.lpAmount)?(s(),p("div",ni,i(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:P(D))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:P(D))(e.sliderVal,2))+"% ",1)):(s(),p("div",ti,"--")),o("div",si,[(s(!0),p(_e,null,Io(e.ratioArr,(w,L)=>(s(),p("div",{key:L,class:$e(["ratio-item",e.sliderVal==w.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=w.value}},i(w.name),11,ai))),128))])]),F(g,{value:e.sliderVal,"onUpdate:value":t[14]||(t[14]=w=>e.sliderVal=w),"tip-formatter":e.formatter,onChange:t[15]||(t[15]=w=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(s(),B(A,{key:0})):E("",!0),(le=e.positionInfo)!=null&&le.is_pause?(s(),B(a,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:oe(()=>[li]),_:1})):e.wallet&&e.wallet.address?(s(),B(a,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:t[16]||(t[16]=w=>e.toRemove())},{default:oe(()=>[o("span",null,i(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(s(),B(a,{key:3,class:"big-btn liquidity-btn",onClick:t[17]||(t[17]=w=>e.wallet.setIsShowWalletModal(!0))},{default:oe(()=>[o("span",null,i(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?E("",!0):(s(),p("div",ii,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(s(),p("div",ui,i(e.removeText),1)):E("",!0),o("div",ri,[di,e.calculateLoading?(s(),B(m,{key:1,paragraph:!1,active:""})):(s(),p("span",vi,i(e.totalWithdraw),1))]),o("div",mi,[pi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(s(),p("span",ci,i(("addCommom"in e?e.addCommom:P(N))(("sFixD"in e?e.sFixD:P(D))(e.lpAmount,(O=e.positionInfo)==null?void 0:O.decimals)))+" "+i(e.needReverse?(J=e.toCoin)==null?void 0:J.symbol:(se=e.fromCoin)==null?void 0:se.symbol)+"-"+i(e.needReverse?(ae=e.fromCoin)==null?void 0:ae.symbol:(ue=e.toCoin)==null?void 0:ue.symbol),1)):(s(),B(m,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(s(),B(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:t[18]||(t[18]=w=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):E("",!0)])}const gi=Oe(Yl,[["render",fi],["__scopeId","data-v-fd47fed9"]]),yi=Fe({components:{AutoPoolV2Info:Zo,AutoPoolV2PositionRange:Jo,AutoPoolV2PoolComposition:Ko,AutoPoolV2PoolLiquidity:xo,AutoPoolV2PoolAdd:Il,AutoPoolV2PoolRemove:gi},setup(){const e=Ze(),t=Je(),H=y(()=>t),V=vo(),T=y(()=>V),$=y(()=>e),u=Xe(),b=S();be(()=>[$.value.positionInfoObj,u.params.id],([r,d])=>{r&&!Ye(r)&&d&&(b.value=r[d],console.log(b.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const g=async()=>{e.getAutoPoolAPY(),e.getVault(u.params.id,"refresh")},A=S();be(()=>u.query.action,r=>{r&&(A.value=r)},{immediate:!0}),Co(()=>{e.getAutoPoolAPY()}),be(()=>[H.value.poolConfigList,$.value.autoPoolList],([r,d])=>{r&&r.length>0&&d&&d.length==0&&e.getAutoPoolList()},{immediate:!0}),be(()=>[$.value.autoPoolList,H.value.poolConfigObj],([r,d])=>{r&&r.length>0&&d&&!Ye(d)&&e.getMyAutoPoolPosition()},{immediate:!0}),y(()=>T.value.chainName),Do();const a=So(),m=y(()=>a);be(()=>m.value.address,r=>{r||e.logout()},{immediate:!0});const n=y(()=>$.value.autoPoolLoading);return{clickRefresh:g,currentTab:A,positionInfo:b,autoPoolLoading:n}}});const bi={class:"auto-pool-detail-v2"},hi={class:"detail-top"},ki={class:"detail-bottom pc-detail"},$i={class:"detail-bottom-left"},_i={class:"detail-bottom-right"},Ii={class:"h5-detail"},wi={key:0,class:"loading-global"};function Ci(e,t,H,V,T,$){const u=Fn,b=Zo,g=Jo,A=Ko,a=xo,m=Ke("AutoPoolV2PoolAdd"),n=Ke("AutoPoolV2PoolRemove"),r=pn;return s(),p("div",bi,[o("div",hi,[F(u,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),F(b)]),o("div",ki,[o("div",$i,[F(g),F(A),F(a)]),o("div",_i,[e.currentTab=="deposit"?(s(),B(m,{key:0,onChangeCurrentTab:t[0]||(t[0]=d=>e.currentTab="remove")})):(s(),B(n,{key:1,onChangeCurrentTab:t[1]||(t[1]=d=>e.currentTab="deposit")}))])]),o("div",Ii,[e.currentTab=="deposit"?(s(),B(m,{key:0,onChangeCurrentTab:t[2]||(t[2]=d=>e.currentTab="remove")})):(s(),B(n,{key:1,onChangeCurrentTab:t[3]||(t[3]=d=>e.currentTab="deposit")})),F(g),F(A),F(a)]),e.autoPoolLoading?(s(),p("div",wi,[F(r)])):E("",!0)])}const Qi=Oe(yi,[["render",Ci],["__scopeId","data-v-c68a26ef"]]);export{Qi as default};
