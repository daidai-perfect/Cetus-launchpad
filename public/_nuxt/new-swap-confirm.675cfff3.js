import{c as he,b as K,d as se,s as te,g as Fe,i as Le,k as Ce}from"./index.5d1ebf04.js";import{a as Ie,r as f,m as O,D as J,q as _e,o as i,c as oe,w as ee,h as o,f as r,F as ne,t as U,v as a,s as ye,x as P,L as Re,p as be,k as pe,e as we,a2 as Be,a3 as je,M as ke,i as fe,z as H,j as G,u as Y,J as Pe,S as De,a1 as Me,Y as Te,B as Ee}from"./entry.604b55fb.js";import"./index.2e59eebc.js";/* empty css              */import{C as Ue,u as qe,g as ze,a as Ge,_ as We,b as He,d as Ke,e as Ye}from"./confetti.module.180984c8.js";import{u as Se,a as $e,q as Je,b as Qe,o as Xe,j as Ze}from"./pool.1cf61252.js";import{D as C}from"./decimal.0bdeb344.js";import{i as re}from"./import-icon.de3e6c66.js";/* empty css              */import{i as Ve}from"./install.13601262.js";const ve=e=>(be("data-v-1a639565"),e=e(),pe(),e),xe={class:"price-impact-tips"},eo=ve(()=>o("div",{class:"text"}," The difference between the market price and estimated price due to trade size. ",-1)),oo={class:"market-price-rate"},no=ve(()=>o("div",null,"Market Price Rate",-1)),to={key:0},io=ve(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),ao=[io],so={key:1,class:"price-unknown"},ro={key:0,class:"market-price-sources"},co=ve(()=>o("span",null,"Market price sources:",-1)),lo=ve(()=>o("svg",{class:"icon tips-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_tips"})],-1)),mo=Ie({__name:"price-impact-tooltip",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},impact:{type:String,defualt:"",requires:!0}},setup(e){const s=e,l=f([]),n=f(),j=f(),L=f(!0),D=Se(),S=O(()=>D),k=m=>{switch(m){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},p=m=>{var q,T,E,c,v,R,u,h,b,d;const N=((T=m[(q=s==null?void 0:s.fromCoin)==null?void 0:q.address])==null?void 0:T.price)||0,g=((c=m[(E=s==null?void 0:s.toCoin)==null?void 0:E.address])==null?void 0:c.price)||0,_=(R=m[(v=s==null?void 0:s.fromCoin)==null?void 0:v.address])==null?void 0:R.market,I=(h=m[(u=s==null?void 0:s.toCoin)==null?void 0:u.address])==null?void 0:h.market;n.value=K(se(new C(N).div(new C(g)).toString(),(b=s.toCoin)==null?void 0:b.decimals)),j.value=K(se(new C(g).div(new C(N)).toString(),(d=s.fromCoin)==null?void 0:d.decimals)),l.value=_==I?[k(_)]:[k(_),k(I)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",n.value,j.value,l.value)};J(()=>[S.value.RATES,s.fromCoinAmount,s.toCoinAmount,s.fromCoin,s.toCoin],([m])=>{m&&!he(m)&&p(m)},{immediate:!0});const M=$e(),$=m=>{var N;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((N=S.value.tokensObj[m==null?void 0:m.address])==null?void 0:N.logo_url)||(M.theme==="default"?re("/image/coins/unknown.png"):re("/image/coins/sui-unknown.png"))};return(m,N)=>{const g=Re,_=_e("image");return i(),oe(g,{"overlay-class-name":"price-impact-tooltip"},{title:ee(()=>{var I,q,T,E;return[o("div",xe,[eo,o("div",oo,[no,e.impact!=="Incalculable"?(i(),r("div",to,[L.value?(i(),r(ne,{key:0},[U(o("img",null,null,512),[[_,$(e.fromCoin)]]),o("span",null,"1 "+a((I=e.fromCoin)==null?void 0:I.symbol)+" = "+a(n.value)+" "+a((q=e.toCoin)==null?void 0:q.symbol),1),U(o("img",null,null,512),[[_,$(e.toCoin)]])],64)):(i(),r(ne,{key:1},[U(o("img",null,null,512),[[_,$(e.toCoin)]]),o("span",null,"1 "+a((T=e.toCoin)==null?void 0:T.symbol)+" = "+a(j.value)+" "+a((E=e.fromCoin)==null?void 0:E.symbol),1),U(o("img",null,null,512),[[_,$(e.fromCoin)]])],64)),o("div",{class:"right",onClick:N[0]||(N[0]=c=>L.value=!L.value)},ao)])):(i(),r("div",so,"Price is unknown"))]),l.value&&l.value.length>0&&e.impact!=="Incalculable"?(i(),r("div",ro,[co,(i(!0),r(ne,null,ye(l.value,c=>(i(),r("span",{key:c==null?void 0:c.name},a(c==null?void 0:c.name),1))),128))])):P("",!0)])]}),default:ee(()=>[lo]),_:1})}}});const Oe=we(mo,[["__scopeId","data-v-1a639565"]]);const uo=Ie({components:{PriceImpactTooltip:Oe,CurrentPrice:Ue},props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1},formCoinMarket:{type:String,default:""},toCoinMarket:{type:String,default:""}},setup(e){const{getTokenInfo:s}=qe(),l=Je(),n=O(()=>l==null?void 0:l.tokensObj),j=Be(je,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),L=f(!1),D=$e(),S=O(()=>D),k=O(()=>{var t;return(t=S==null?void 0:S.value)==null?void 0:t.liquiditySourceObj}),p=O(()=>S.value.slippage),M=O(()=>S.isShowRouterModal),$=Se(),m=O(()=>$);Qe("Sui");const N=f(0),g=f([]),_=f({}),I=f(""),q=async t=>{var y,A,w,F,B,W,de,me,ue,ge;if(((y=t==null?void 0:t.routes)==null?void 0:y.length)===1)if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:462 ~ getOnlyOneRouteText ~ suiPreSwapdata?.routes:",t==null?void 0:t.routes),((F=(w=(A=t==null?void 0:t.routes)==null?void 0:A[0])==null?void 0:w.path)==null?void 0:F.length)>1){const ie=[(B=e==null?void 0:e.fromCoin)==null?void 0:B.symbol],ce=(de=(W=t==null?void 0:t.routes)==null?void 0:W[0])==null?void 0:de.path;for(let ae=0;ae<ce.length;ae++){const x=ce[ae];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:467 ~ getOnlyOneRouteText ~ path[i]:",ce[ae]);const Ae=((me=n==null?void 0:n.value)==null?void 0:me[x==null?void 0:x.target])||await s(x==null?void 0:x.target);ie.push(Ae==null?void 0:Ae.symbol)}I.value=ie==null?void 0:ie.join(" > ")}else I.value=`${(ue=e==null?void 0:e.fromCoin)==null?void 0:ue.symbol} > ${(ge=e==null?void 0:e.toCoin)==null?void 0:ge.symbol}`};J(()=>e.suiPreSwapdata,async t=>{var y;if(t&&!he(t)){let A=[];(y=t==null?void 0:t.routes)==null||y.forEach(B=>{B==null||B.path.forEach(async W=>{A.push(W.provider)})});const{routes:w}=t,F=w&&w[0]&&w[0].path;if(w&&w.length==1&&F&&F.length==2){const B=F[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":F[0].target;_.value=m.value.tokensObj[B]||await s(B)}else _.value="";g.value=Array.from(new Set(A)),N.value=g.value.length,q(t)}},{immediate:!0});const T=f(0),E=f(0);J(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,p.value],([t,y,A,w,F,B])=>{if(t&&y&&A&&w&&B)if(F){const W=new C(y).mul(new C(B/100));E.value=new C(y).sub(W).toString()}else{const W=new C(t).mul(new C(B/100));T.value=new C(t).add(W).toString()}},{immediate:!0});const c=t=>{var y;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((y=m.value.tokensObj[t==null?void 0:t.address])==null?void 0:y.logo_url)||(S.theme==="default"?re("/image/coins/unknown.png"):re("/image/coins/sui-unknown.png"))},v=f(""),R=async()=>{const t=m.value.tokenExternalPriceObj[e.fromCoin.address],y=m.value.tokenExternalPriceObj[e.toCoin.address];if(t&&y){const A=new C(t).div(new C(y)),w=new C(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(A).div(A).mul(100);let F=Math.abs(te(w,2));A.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?v.value="":(v.value=w>0&&w<=.01?"0.01":F,console.log(t,y,w.toString(),"##367"))}else v.value=""},u=t=>{if(t<5)return"color-s";if(t>=5&&t<10)return"color-w";if(t>=10)return"color-e"};J(()=>[e.oneToAmount,m.value.tokenExternalPriceObj],([t,y])=>{t&&y&&!he(y)&&R()},{immediate:!0,deep:!0});const h=f([]),b=f(),d=f(),X=f(!0),z=t=>{switch(t){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},Z=t=>{var B,W,de,me,ue,ge,ie,ce,ae,x;const y=((W=t[(B=e==null?void 0:e.fromCoin)==null?void 0:B.address])==null?void 0:W.price)||0,A=((me=t[(de=e==null?void 0:e.toCoin)==null?void 0:de.address])==null?void 0:me.price)||0,w=(ge=t[(ue=e==null?void 0:e.fromCoin)==null?void 0:ue.address])==null?void 0:ge.market,F=(ce=t[(ie=e==null?void 0:e.toCoin)==null?void 0:ie.address])==null?void 0:ce.market;b.value=se(new C(y).div(new C(A)).toString(),(ae=e.toCoin)==null?void 0:ae.decimals),d.value=se(new C(A).div(new C(y)).toString(),(x=e.fromCoin)==null?void 0:x.decimals),h.value=w==F?[z(w)]:[z(w),z(F)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",b.value,d.value,h.value)};return J(()=>[m.value.RATES,e.fromCoinAmount,e.toCoinAmount],([t])=>{t&&!he(t)&&Z(t)},{immediate:!0}),{isOpen:f(!0),sFixD:te,getCoinIcon:c,indicator:j,rateChange:L,slippage:p,isShowRouterModal:M,indexStore:D,maximumSold:T,minimumReceived:E,addCommom:K,pathLength:N,sourcesArr:g,coinTypeB:_,priceExangeRate:v,getTextColor:u,liquiditySourceObj:k,onlyOneRouteText:I,marketPriceA2B:b,marketPriceA2BResever:d,marketPriceSource:h,isA2B:X}}}),le=e=>(be("data-v-e065c3ed"),e=e(),pe(),e),go={key:0,class:"swap-info"},ho={class:"loading-swap"},fo={class:"loading-swap-content"},vo={key:1,class:"price"},Co={key:2,class:"best-route"},yo={key:0,class:"price-impact"},ko=le(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),_o=[ko],bo=le(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),po=[bo],wo=le(()=>o("div",null,"Be cautious before submitting your order.",-1)),So={key:1,class:"price-impact-info"},$o={class:"label"},Ao=le(()=>o("span",null,"Price Impact",-1)),Io={key:0,class:"text impact-w"},Ro=["src"],Oo={class:"trade-info"},No={class:"trade-block"},Fo={class:"label"},Lo={key:0,class:"text"},Bo={key:0,class:"trade-block"},jo=le(()=>o("div",{class:"label"},"Route",-1)),Po={key:0,class:"text text-box"},Do=["alt"],Mo={key:1,class:"text text-box"},To=["alt"],Eo=le(()=>o("svg",{class:"icon route-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_expand"})],-1));function Uo(e,s,l,n,j,L){var $,m,N;const D=Pe,S=ke("CurrentPrice"),k=ke("PriceImpactTooltip"),p=De,M=_e("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(i(),r("div",go,[o("div",ho,[o("div",fo,[e.swapLoading||e.swapRouterLoading?(i(),oe(D,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):P("",!0),!e.swapRouterLoading&&e.fromCoinAmount&&e.toCoinAmount&&e.oneToAmount&&e.fromCoinAmount?(i(),r("div",vo,[fe(S,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"])])):e.swapLoading||e.swapRouterLoading?(i(),r("span",Co,"Best route and price")):P("",!0)]),e.isOpen&&e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading&&!e.swapRouterLoading?(i(),r("div",yo,[(i(),r("svg",{class:H(["icon warning-icon pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},_o,2)),o("span",{class:H(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),o("span",{class:H(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[o("div",null,[(i(),r("svg",{class:H(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},po,2)),G(" Price Impact Alert. ")]),wo],2)])):P("",!0),e.isOpen?(i(),r("div",So,[o("div",$o,[Ao,fe(k,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),!e.swapRouterLoading&&e.impact==="Incalculable"?(i(),r("div",Io,a(e.impact),1)):e.swapRouterLoading?(i(),oe(p,{key:2,paragraph:!1,active:""})):(i(),r("div",{key:1,class:H(["text",e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[G(a(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${($=e.impact)==null?void 0:$.replace("-","")}`)+"% ",1),(i(!0),r(ne,null,ye(e.marketPriceSource,g=>(i(),r("img",{key:g,src:g==null?void 0:g.logo},null,8,Ro))),128))],2))])):P("",!0)]),o("div",Oo,[o("div",No,[o("div",Fo,a(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(i(),oe(p,{key:1,paragraph:!1,active:""})):(i(),r("div",Lo,a(e.fixedFromCoin?("addCommom"in e?e.addCommom:Y(K))(("sFixD"in e?e.sFixD:Y(te))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Y(K))(("sFixD"in e?e.sFixD:Y(te))(e.maximumSold,e.fromCoin.decimals)))+" "+a(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),e.insufficientLiquidity?P("",!0):(i(),r("div",Bo,[jo,e.swapRouterLoading?(i(),oe(p,{key:1,paragraph:!1,active:""})):(i(),r("div",{key:0,class:"text text-bg",onClick:s[0]||(s[0]=g=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.routes&&e.suiPreSwapdata.routes.length==1?(i(),r("div",Po,[o("span",null,a(e.onlyOneRouteText),1),(i(!0),r(ne,null,ye(e.sourcesArr,g=>{var _,I;return U((i(),r("img",{key:g,alt:g},null,8,Do)),[[M,(I=(_=e.liquiditySourceObj)==null?void 0:_[g])==null?void 0:I.logo]])}),128))])):e.swapRouterLoading?P("",!0):(i(),r("div",Mo,[G(a((N=(m=e.suiPreSwapdata)==null?void 0:m.routes)==null?void 0:N.length)+" Streams ",1),(i(!0),r(ne,null,ye(e.sourcesArr,g=>{var _,I;return U((i(),r("img",{key:g,alt:g},null,8,To)),[[M,(I=(_=e.liquiditySourceObj)==null?void 0:_[g])==null?void 0:I.logo]])}),128))])),Eo]))]))])])):P("",!0)}const wt=we(uo,[["render",Uo],["__scopeId","data-v-e065c3ed"]]),qo={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,s){const{$echarts:l}=Me(),n=Xe();let j=null,L;const D=f(!0),S=$e(),k=O(()=>S),p=O(()=>k.value.chainName),M=O(()=>Fe[p.value]),$=Se(),m=O(()=>$),N=(u,h,b)=>{L={xAxis:{type:"category",boundaryGap:!1,show:!1,data:h},yAxis:{type:"value",show:!1,min:function(d){return d.min-d.min*.1},max:function(d){return d.max+d.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:k.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(d){return`<div class="chart-tip">
              <div>${d&&d[0]&&d[0].name}</div>
              <div>$${se(d&&d[0]&&d[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:k.value.chainName=="Aptos"?"#0C4535":"transparent"},{offset:1,color:k.value.chainName=="Aptos"?"#151817":"transparent"}]},series:[{data:u,type:"line",smooth:k.value.chainName!="Aptos",showSymbol:!1,areaStyle:{},lineStyle:k.value.chainName=="Aptos"?"#68FFD8":{color:{type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:"#75C8FF"},{offset:1,color:"#68FFD8"}]},width:2,type:"solid"}}]},L&&j.clear(),L&&j.setOption(L,!0),j.resize(),D.value=!1},g=f(""),_=f(""),I=async u=>{var V,t,y;const h=[],b=[],{price:d,daily_rate:X}=p.value==="Aptos"?await ze(u):await Ge(u,e.market);p.value=="Sui"&&$.setTokenExternalPrice(e.coin.address,(V=d[d.length-1])==null?void 0:V.price),g.value=X;const z=d&&d.length>=1&&d[d.length-1].price;_.value=z,n.setCurrentCoinPairRate({[u]:z}),p.value==="Aptos"?d.forEach(A=>{h.push(A.price);const w=Ce(Number(A.timestamp),"MD"),F=Ce(Number(A.timestamp),"HM");b.push(w+" "+F)}):d.forEach(A=>{h.push(A.price);const w=Ce(new C(A.timestamp).mul(1e3).toNumber(),"MD"),F=Ce(new C(A.timestamp).mul(1e3).toNumber(),"HM");b.push(w+" "+F)});let Z=document.getElementById(`main${(t=e.coin)==null?void 0:t.name}`);j=l.init(Z),l.use([Ve]),N(h,b,(y=e.coin)==null?void 0:y.name)};J(()=>e.id,(u,h)=>{u&&(g.value="",_.value="",setTimeout(()=>{I(u)},1e3))},{immediate:!0});const q=f(""),T=f(""),E=f(""),c=f("");J(()=>[m.value.tokensObj,e.coin],([u,h])=>{var b,d;u&&h&&u[h.address]&&(T.value=((b=u[h.address])==null?void 0:b.labels)&&((d=u[h.address])==null?void 0:d.labels[0]),q.value=u[h.address].name,E.value=u[h.address].symbol,c.value=u[h.address].address)},{immediate:!0,deep:!0}),J(()=>e.refresh,u=>{u&&I(e.id)});const v=O(()=>k.value.theme),R=O(()=>k.value.currentExplorer);return{getExplorerUrl:Ze,currentExplorer:R,theme:v,store:S,importIcon:re,fixD:Le,config:M,price_rate_24h:g,nowPrice:_,coinName:q,coinLabels:T,coinSymbol:E,address:c,decimalUi:se,addCommom:K}}};const Ne=e=>(be("data-v-5e88eb3e"),e=e(),pe(),e),zo={class:"token-info"},Go={class:"token-info-padding"},Wo={class:"token-info-header"},Ho={class:"left"},Ko=["onerror"],Yo={class:"name"},Jo={class:"desc"},Qo={key:0},Xo={class:"right"},Zo={class:"new-style-tooltip-text"},Vo={class:"price-info"},xo={key:0,src:We,alt:""},en={key:1,src:He,alt:""},on={key:2,src:Ke,alt:""},nn={class:"token-info-footer"},tn={class:"left"},an={class:"address"},sn={key:0,class:"pc-address"},rn={key:1,class:"pc-address"},cn={class:"h5-address"},ln=Ne(()=>o("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),dn=[ln],mn=["href"],un=Ne(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_link"})],-1)),gn=[un],hn={class:"right"},fn=["id"];function vn(e,s,l,n,j,L){var k;const D=Re,S=_e("image");return i(),r("div",zo,[o("div",Go,[o("div",Wo,[o("div",Ho,[U(o("img",{onerror:n.theme=="default"?n.importIcon("/image/coins/unknown.png"):n.importIcon("/image/coins/sui-unknown.png")},null,8,Ko),[[S,l.coin.logoURI||n.importIcon(`/image/coins/${l.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",Yo,a(n.coinSymbol),1),o("div",Jo,[o("span",null,[G(a(n.coinName)+" ",1),n.theme!=="sui"?(i(),r("span",Qo,a(n.coinLabels?`(${n.coinLabels})`:""),1)):P("",!0)])])])]),o("div",Xo,[fe(D,{"overlay-class-name":"new-style-tooltip",placement:"top","arrow-point-at-center":""},{title:ee(()=>[o("div",Zo,a(l.market==="pyth"?"Data source: Pyth Network":l.market==="coingecko"?"Data source: CoinGecko":"Data source: Birdeye"),1)]),default:ee(()=>[o("div",Vo,[l.market==="pyth"?(i(),r("img",xo)):l.market==="coingecko"?(i(),r("img",en)):l.market==="birdeye"?(i(),r("img",on)):P("",!0),o("span",null,"$"+a(n.nowPrice?Number(n.nowPrice)<1?n.decimalUi(n.nowPrice,4):n.addCommom(n.fixD(n.nowPrice,2)):"--"),1),n.price_rate_24h?(i(),r("i",{key:3,class:H(n.price_rate_24h>0?"up":n.price_rate_24h<0?"down":"up")},a(n.price_rate_24h>0?`+ ${n.fixD(n.price_rate_24h,2)}`:n.price_rate_24h<0?+`${n.fixD(n.price_rate_24h,2)}`:`+${n.fixD(n.price_rate_24h,2)}`)+"%",3)):P("",!0)])]),_:1})])]),o("div",nn,[o("div",tn,[o("div",an,[l.coin&&n.address!=="0x2::sui::SUI"?(i(),r("span",sn,a(l.coin&&l.coin.address.substr(0,8))+" ... "+a(l.coin&&l.coin.address.substr(l.coin.address.length-8,8)),1)):(i(),r("span",rn,a(l.coin&&l.coin.address),1)),o("span",cn,a(l.coin&&l.coin.address.substr(0,4))+" ... "+a(l.coin&&l.coin.address.substr(l.coin.address.length-4,4)),1),(i(),r("svg",{class:"icon","aria-hidden":"true",onClick:s[0]||(s[0]=p=>n.store.copy(l.coin&&l.coin.address))},dn)),o("a",{href:n.getExplorerUrl(n.currentExplorer,"coin",l.coin&&l.coin.address),target:"_blank"},gn,8,mn)])]),o("div",hn,[o("div",{id:`main${(k=l.coin)==null?void 0:k.name}`,class:"main"},null,8,fn)])])])])}const St=we(qo,[["render",vn],["__scopeId","data-v-5e88eb3e"]]),Cn=Ie({components:{Modal:Te,PriceImpactTooltip:Oe},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,default:0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,s){const l=Se(),n=O(()=>l),j=$e(),L=O(()=>j),D=c=>{var v;return(c==null?void 0:c.logoURI)||(c==null?void 0:c.logo_url)||((v=n.value.tokensObj[c==null?void 0:c.address])==null?void 0:v.logo_url)||(L.value.theme==="default"?re("/image/coins/unknown.png"):re("/image/coins/sui-unknown.png"))},S=f(!1),k=O(()=>L.value.chainName),p=async()=>{s.emit("to-swap")};f([]);const M=f(0),$=f(""),m=f(""),N=O(()=>L.value.slippage);J(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,N.value],([c,v,R,u,h,b])=>{if(c&&v&&R&&u&&b)if(h){const d=new C(v).mul(new C(b/100));m.value=new C(v).sub(d).toString()}else{const d=new C(c).mul(new C(b/100));$.value=new C(c).add(d).toString()}},{immediate:!0});const g=f(""),_=O(()=>{var c,v,R,u,h,b,d,X,z,Z,V,t;return(R=(v=n==null?void 0:n.value)==null?void 0:v.tokensObj[(c=e==null?void 0:e.fromCoin)==null?void 0:c.address])!=null&&R.pyth_id&&((b=(h=n==null?void 0:n.value)==null?void 0:h.tokensObj[(u=e==null?void 0:e.fromCoin)==null?void 0:u.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(z=(X=n==null?void 0:n.value)==null?void 0:X.tokensObj[(d=e==null?void 0:e.fromCoin)==null?void 0:d.address])!=null&&z.coingecko_id?"coingecko":(t=(V=n==null?void 0:n.value)==null?void 0:V.tokensObj[(Z=e==null?void 0:e.fromCoin)==null?void 0:Z.address])!=null&&t.birdeyeid?"birdeye":null}),I=O(()=>{var c,v,R,u,h,b,d,X,z,Z,V,t;return(R=(v=n==null?void 0:n.value)==null?void 0:v.tokensObj[(c=e==null?void 0:e.toCoin)==null?void 0:c.address])!=null&&R.pyth_id&&((b=(h=n==null?void 0:n.value)==null?void 0:h.tokensObj[(u=e==null?void 0:e.toCoin)==null?void 0:u.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(z=(X=n==null?void 0:n.value)==null?void 0:X.tokensObj[(d=e==null?void 0:e.toCoin)==null?void 0:d.address])!=null&&z.coingecko_id?"coingecko":(t=(V=n==null?void 0:n.value)==null?void 0:V.tokensObj[(Z=e==null?void 0:e.toCoin)==null?void 0:Z.address])!=null&&t.birdeyeid?"birdeye":null}),q=async()=>{const c=n.value.tokenExternalPriceObj[e.fromCoin.address],v=n.value.tokenExternalPriceObj[e.toCoin.address];if(c&&v){const R=new C(c).div(new C(v)),u=new C(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(R).div(R).mul(100);let h=Math.abs(te(u,2));R.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?g.value="":g.value=u>0&&u<=.01?"0.01":h}else g.value=""},T=c=>{if(c<5)return"color-s";if(c>=5&&c<10)return"color-w";if(c>=10)return"color-e"};J(()=>[e.oneToAmount,n.value.tokenExternalPriceObj,k.value],([c,v,R])=>{c&&v&&!he(v)&&R!=="Aptos"&&q()},{immediate:!0,deep:!0});const E=f(!1);return{getCoinIcon:D,addCommom:K,sFixD:te,rateChange:S,chainName:k,clickNextBtn:p,pathLength:M,maximumSold:$,minimumReceived:m,decimalUi:se,getTextColor:T,priceExangeRate:g,formCoinMarket:_,toCoinMarket:I,readWithin:E}}});const Q=e=>(be("data-v-2c6669c3"),e=e(),pe(),e),yn=Q(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),kn={class:"new-swap-contnet"},_n={class:"coin-info"},bn={class:"from-coin-info"},pn={class:"left"},wn={class:"coin-amount"},Sn={class:"coin-symbol"},$n={class:"right"},An={class:"to-coin-info"},In={class:"left"},Rn={class:"coin-amount"},On={class:"coin-symbol"},Nn={class:"right"},Fn=Q(()=>o("div",{class:"to-swap-logo"},null,-1)),Ln={class:"coin-rate"},Bn={key:0,class:"coin-rate-box"},jn={class:"left"},Pn=Q(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Dn=Q(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Mn=[Pn,Dn],Tn={key:1,class:"coin-rate-box"},En={class:"left"},Un=Q(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),qn=Q(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),zn=[Un,qn],Gn={key:2,class:"price-impact"},Wn=Q(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Hn=[Wn],Kn=Q(()=>o("br",null,null,-1)),Yn={class:"bottom"},Jn={class:"induction"},Qn={class:"item"},Xn={class:"induction-text"},Zn={class:"induction-value"},Vn={class:"item"},xn={class:"induction-text"},et={class:"induction-value"},ot={class:"item"},nt={class:"induction-text"},tt={key:0,class:"item"},it={class:"induction-text"},at={key:0,class:"induction-value"},st={key:1,class:"induction-value"},rt={key:0,class:"within-desc"},ct=Q(()=>o("div",{class:"within-top"},[o("img",{src:Ye,alt:""}),o("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),lt={class:"within-bottom"},dt={key:0,class:"price-updated"},mt=Q(()=>o("span",null,"Price updated",-1));function ut(e,s,l,n,j,L){const D=ke("PriceImpactTooltip"),S=Ee,k=ke("Modal"),p=_e("image");return i(),oe(k,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:s[7]||(s[7]=M=>e.$emit("on-close"))},{closeIcon:ee(()=>[yn]),default:ee(()=>{var M;return[o("div",kn,[o("div",_n,[o("div",bn,[o("div",pn,[o("div",wn,a(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Y(K))(e.fromCoinAmount)),1),o("div",Sn,a(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",$n,[U(o("img",null,null,512),[[p,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",An,[o("div",In,[o("div",Rn,a(e.toCoinAmount&&("addCommom"in e?e.addCommom:Y(K))(e.toCoinAmount)),1),o("div",On,a(e.toCoin&&e.toCoin.symbol),1)]),o("div",Nn,[U(o("img",null,null,512),[[p,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),Fn]),o("div",Ln,[e.rateChange?(i(),r("div",Tn,[o("div",En,[U(o("img",null,null,512),[[p,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+a(e.toCoin&&e.toCoin.symbol)+" â‰ˆ",1),U(o("img",null,null,512),[[p,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,a(e.oneFromAmount)+" "+a(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:s[1]||(s[1]=$=>e.rateChange=!e.rateChange)},zn)])):(i(),r("div",Bn,[o("div",jn,[U(o("img",null,null,512),[[p,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+a(e.fromCoin&&e.fromCoin.symbol)+" â‰ˆ",1),U(o("img",null,null,512),[[p,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,a(e.oneToAmount)+" "+a(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:s[0]||(s[0]=$=>e.rateChange=!e.rateChange)},Mn)])),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(i(),r("div",Gn,[(i(),r("svg",{class:H(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},Hn,2)),o("span",{class:H(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),o("span",{class:H(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[G("Price Impact Alert."),Kn,G(" Be cautious before submitting your order.")],2)])):P("",!0)])]),o("div",Yn,[o("div",Jn,[o("div",Qn,[o("div",Xn,a(e.$t("modal.slippageTolerance")),1),o("div",Zn,a(e.slippage)+"%",1)]),o("div",Vn,[o("div",xn,a(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",et,a(e.fixedFromCoin?("addCommom"in e?e.addCommom:Y(K))(("sFixD"in e?e.sFixD:Y(te))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Y(K))(("sFixD"in e?e.sFixD:Y(te))(e.maximumSold,e.fromCoin.decimals)))+" "+a(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",ot,[o("div",nt,[G(" Price Impact "),fe(D,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),o("div",{class:H(["induction-value",e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[e.chainName=="Aptos"?(i(),r(ne,{key:0},[G(a(e.impact<.01?"<0.01":e.impact>100?">100":e.impact)+"% ",1)],64)):(i(),r(ne,{key:1},[G(a(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(M=String(e.impact))==null?void 0:M.replace("-","")}`)+"% ",1)],64))],2)]),e.chainName=="Aptos"?(i(),r("div",tt,[o("div",it,a(e.$t("common.fee")),1),e.chainName=="Aptos"?(i(),r("div",at,a(e.formatFee)+" "+a(e.fromCoin.symbol)+" ("+a(e.fee*100)+"%) ",1)):(i(),r("div",st,a(e.fee)+" "+a(e.fromCoin.symbol),1))])):P("",!0)])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(i(),r("div",rt,[ct,o("div",lt,[o("div",{class:H(["within-btn",e.readWithin?"within-btn-active":""]),onClick:s[2]||(s[2]=$=>e.readWithin=!0)}," Yes, please continue. ",2),o("div",{class:"within-btn",onClick:s[3]||(s[3]=$=>e.$emit("on-close"))},"No, cancel it.")])])):P("",!0)]),e.isShowAccept?(i(),r("div",dt,[mt,fe(S,{class:"accept-btn",loading:e.swapLoading,onClick:s[4]||(s[4]=$=>e.$emit("accept"))},{default:ee(()=>[G("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(i(),oe(S,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:s[5]||(s[5]=$=>e.clickNextBtn())},{default:ee(()=>[G(a(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):e.chainName=="Aptos"?(i(),oe(S,{key:2,class:"big-btn swap-confirm-btn",onClick:s[6]||(s[6]=$=>e.clickNextBtn())},{default:ee(()=>[G(a(e.$t("button.confirmSwap")),1)]),_:1})):P("",!0)]}),_:1},8,["title"])}const $t=we(Cn,[["render",ut],["__scopeId","data-v-2c6669c3"]]);export{wt as _,St as a,$t as b};
