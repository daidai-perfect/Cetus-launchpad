var id=Object.defineProperty;var od=(e,t,n)=>t in e?id(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>(od(e,typeof t!="symbol"?t+"":t,n),n);import{a6 as sd,ae as rd,ad,af as cd}from"./entry.a4db0d61.js";import{D as K}from"./decimal.765d8738.js";const Cr=5,s_=sd("wallet",{state:()=>({loading:!1,autoRefreshTime:Cr,countdown:0,connected:!1,aptosConnected:!1,suiConnected:!1,address:"",aptosAddress:"",suiAddress:"",platform:"",isShowWalletModal:!1,walletName:"",aptosWalletName:"",suiWalletName:"",currentWallet:null,aptosCurrentWallet:null,suiCurrentWallet:null,walletIcon:"",aptosWalletIcon:"",suiWalletIcon:"",switchWallet:!1,assets:{},walletIconName:"",aptosWalletIconName:"",suiWalletIconName:"",walletNetwork:"",isShowWalletCard:"",accountObj:null,firstGetAssetLoading:!1}),actions:{setLoading(e){e&&(this.countdown=Cr),this.loading=e,e||(this.countdown=0)},setCountdown(e){this.countdown=e},setWalletStatus(){this.connected=!0},setSwitchWallet(e){this.switchWallet=e},setIsShowWalletModal(e){this.isShowWalletModal=e},setWalletInfo(e,t){this.connected=e,this.platform=t},setCurrentWallet(e){e.wallet?(this.currentWallet=e.wallet,this.connected=e.isConnected,this.address=e.account,this.walletIcon=e.icon,this.walletName=e.wallet.name,e.platform==="Sui"?(this.suiCurrentWallet=e.wallet,this.suiConnected=e.isConnected,this.suiAddress=e.account,this.suiWalletIcon=e.icon,this.suiWalletName=e.wallet.name,this.walletName=e.walletName,this.accountObj=e.accountObj):(this.aptosCurrentWallet=e.wallet,this.aptosConnected=e.isConnected,this.aptosAddress=e.account,this.aptosWalletIcon=e.icon,this.aptosWalletName=e.wallet.name)):(this.currentWallet=null,this.connected=!1,this.address="",this.walletIcon="",this.walletName="",e.platform==="Sui"?(this.suiCurrentWallet=null,this.suiConnected=!1,this.suiAddress="",this.suiWalletIcon="",this.suiWalletName="",this.accountObj=null):(this.aptosCurrentWallet=null,this.aptosConnected=!1,this.aptosAddress="",this.aptosWalletIcon="",this.aptosWalletName=""))},setAssets(e){this.assets=e},setWalletIconName(e){this.walletIconName=e,localStorage.setItem("walletIconName",e)},setNetwork(e){this.walletNetwork=e,console.log(this.walletNetwork,"====>this.walletNetwork")},setIsShowWalletCard(e){this.isShowWalletCard=e},setFirstGetAssetLoading(e){this.firstGetAssetLoading=e}}}),dd={},ld=Object.freeze(Object.defineProperty({__proto__:null,default:dd},Symbol.toStringTag,{value:"Module"})),ud=rd(ld);var g={},fd={get exports(){return g},set exports(e){g=e}};(function(e){(function(t,n){function i(A,u){if(!A)throw new Error(u||"Assertion failed")}function o(A,u){A.super_=u;var p=function(){};p.prototype=u.prototype,A.prototype=new p,A.prototype.constructor=A}function s(A,u,p){if(s.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(A||0,u||10,p||"be"))}typeof t=="object"?t.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var r;try{typeof window<"u"&&typeof window.Buffer<"u"?r=window.Buffer:r=ud.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,p){return u.cmp(p)>0?u:p},s.min=function(u,p){return u.cmp(p)<0?u:p},s.prototype._init=function(u,p,b){if(typeof u=="number")return this._initNumber(u,p,b);if(typeof u=="object")return this._initArray(u,p,b);p==="hex"&&(p=16),i(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var k=0;u[0]==="-"&&(k++,this.negative=1),k<u.length&&(p===16?this._parseHex(u,k,b):(this._parseBase(u,p,k),b==="le"&&this._initArray(this.toArray(),p,b)))},s.prototype._initNumber=function(u,p,b){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(i(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),p,b)},s.prototype._initArray=function(u,p,b){if(i(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var S,P,E=0;if(b==="be")for(k=u.length-1,S=0;k>=0;k-=3)P=u[k]|u[k-1]<<8|u[k-2]<<16,this.words[S]|=P<<E&67108863,this.words[S+1]=P>>>26-E&67108863,E+=24,E>=26&&(E-=26,S++);else if(b==="le")for(k=0,S=0;k<u.length;k+=3)P=u[k]|u[k+1]<<8|u[k+2]<<16,this.words[S]|=P<<E&67108863,this.words[S+1]=P>>>26-E&67108863,E+=24,E>=26&&(E-=26,S++);return this._strip()};function a(A,u){var p=A.charCodeAt(u);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;i(!1,"Invalid character in "+A)}function c(A,u,p){var b=a(A,p);return p-1>=u&&(b|=a(A,p-1)<<4),b}s.prototype._parseHex=function(u,p,b){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var S=0,P=0,E;if(b==="be")for(k=u.length-1;k>=p;k-=2)E=c(u,p,k)<<S,this.words[P]|=E&67108863,S>=18?(S-=18,P+=1,this.words[P]|=E>>>26):S+=8;else{var v=u.length-p;for(k=v%2===0?p+1:p;k<u.length;k+=2)E=c(u,p,k)<<S,this.words[P]|=E&67108863,S>=18?(S-=18,P+=1,this.words[P]|=E>>>26):S+=8}this._strip()};function d(A,u,p,b){for(var k=0,S=0,P=Math.min(A.length,p),E=u;E<P;E++){var v=A.charCodeAt(E)-48;k*=b,v>=49?S=v-49+10:v>=17?S=v-17+10:S=v,i(v>=0&&S<b,"Invalid character"),k+=S}return k}s.prototype._parseBase=function(u,p,b){this.words=[0],this.length=1;for(var k=0,S=1;S<=67108863;S*=p)k++;k--,S=S/p|0;for(var P=u.length-b,E=P%k,v=Math.min(P,P-E)+b,f=0,C=b;C<v;C+=k)f=d(u,C,C+k,p),this.imuln(S),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(E!==0){var te=1;for(f=d(u,C,u.length,p),C=0;C<E;C++)te*=p;this.imuln(te),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red};function l(A,u){A.words=u.words,A.length=u.length,A.negative=u.negative,A.red=u.red}if(s.prototype._move=function(u){l(u,this)},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,p){u=u||10,p=p|0||1;var b;if(u===16||u==="hex"){b="";for(var k=0,S=0,P=0;P<this.length;P++){var E=this.words[P],v=((E<<k|S)&16777215).toString(16);S=E>>>24-k&16777215,k+=2,k>=26&&(k-=26,P--),S!==0||P!==this.length-1?b=_[6-v.length]+v+b:b=v+b}for(S!==0&&(b=S.toString(16)+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(u===(u|0)&&u>=2&&u<=36){var f=m[u],C=y[u];b="";var te=this.clone();for(te.negative=0;!te.isZero();){var ee=te.modrn(C).toString(u);te=te.idivn(C),te.isZero()?b=ee+b:b=_[f-ee.length]+ee+b}for(this.isZero()&&(b="0"+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16,2)},r&&(s.prototype.toBuffer=function(u,p){return this.toArrayLike(r,u,p)}),s.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)};var T=function(u,p){return u.allocUnsafe?u.allocUnsafe(p):new u(p)};s.prototype.toArrayLike=function(u,p,b){this._strip();var k=this.byteLength(),S=b||Math.max(1,k);i(k<=S,"byte array longer than desired length"),i(S>0,"Requested array length <= 0");var P=T(u,S),E=p==="le"?"LE":"BE";return this["_toArrayLike"+E](P,k),P},s.prototype._toArrayLikeLE=function(u,p){for(var b=0,k=0,S=0,P=0;S<this.length;S++){var E=this.words[S]<<P|k;u[b++]=E&255,b<u.length&&(u[b++]=E>>8&255),b<u.length&&(u[b++]=E>>16&255),P===6?(b<u.length&&(u[b++]=E>>24&255),k=0,P=0):(k=E>>>24,P+=2)}if(b<u.length)for(u[b++]=k;b<u.length;)u[b++]=0},s.prototype._toArrayLikeBE=function(u,p){for(var b=u.length-1,k=0,S=0,P=0;S<this.length;S++){var E=this.words[S]<<P|k;u[b--]=E&255,b>=0&&(u[b--]=E>>8&255),b>=0&&(u[b--]=E>>16&255),P===6?(b>=0&&(u[b--]=E>>24&255),k=0,P=0):(k=E>>>24,P+=2)}if(b>=0)for(u[b--]=k;b>=0;)u[b--]=0},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var p=u,b=0;return p>=4096&&(b+=13,p>>>=13),p>=64&&(b+=7,p>>>=7),p>=8&&(b+=4,p>>>=4),p>=2&&(b+=2,p>>>=2),b+p},s.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,b=0;return p&8191||(b+=13,p>>>=13),p&127||(b+=7,p>>>=7),p&15||(b+=4,p>>>=4),p&3||(b+=2,p>>>=2),p&1||b++,b},s.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function O(A){for(var u=new Array(A.bitLength()),p=0;p<u.length;p++){var b=p/26|0,k=p%26;u[p]=A.words[b]>>>k&1}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var b=this._zeroBits(this.words[p]);if(u+=b,b!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this._strip()},s.prototype.ior=function(u){return i((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var b=0;b<p.length;b++)this.words[b]=this.words[b]&u.words[b];return this.length=p.length,this._strip()},s.prototype.iand=function(u){return i((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var p,b;this.length>u.length?(p=this,b=u):(p=u,b=this);for(var k=0;k<b.length;k++)this.words[k]=p.words[k]^b.words[k];if(this!==p)for(;k<p.length;k++)this.words[k]=p.words[k];return this.length=p.length,this._strip()},s.prototype.ixor=function(u){return i((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){i(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,b=u%26;this._expand(p),b>0&&p--;for(var k=0;k<p;k++)this.words[k]=~this.words[k]&67108863;return b>0&&(this.words[k]=~this.words[k]&67108863>>26-b),this._strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,p){i(typeof u=="number"&&u>=0);var b=u/26|0,k=u%26;return this._expand(b+1),p?this.words[b]=this.words[b]|1<<k:this.words[b]=this.words[b]&~(1<<k),this._strip()},s.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var b,k;this.length>u.length?(b=this,k=u):(b=u,k=this);for(var S=0,P=0;P<k.length;P++)p=(b.words[P]|0)+(k.words[P]|0)+S,this.words[P]=p&67108863,S=p>>>26;for(;S!==0&&P<b.length;P++)p=(b.words[P]|0)+S,this.words[P]=p&67108863,S=p>>>26;if(this.length=b.length,S!==0)this.words[this.length]=S,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},s.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var b=this.cmp(u);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var k,S;b>0?(k=this,S=u):(k=u,S=this);for(var P=0,E=0;E<S.length;E++)p=(k.words[E]|0)-(S.words[E]|0)+P,P=p>>26,this.words[E]=p&67108863;for(;P!==0&&E<k.length;E++)p=(k.words[E]|0)+P,P=p>>26,this.words[E]=p&67108863;if(P===0&&E<k.length&&k!==this)for(;E<k.length;E++)this.words[E]=k.words[E];return this.length=Math.max(this.length,E),k!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function j(A,u,p){p.negative=u.negative^A.negative;var b=A.length+u.length|0;p.length=b,b=b-1|0;var k=A.words[0]|0,S=u.words[0]|0,P=k*S,E=P&67108863,v=P/67108864|0;p.words[0]=E;for(var f=1;f<b;f++){for(var C=v>>>26,te=v&67108863,ee=Math.min(f,u.length-1),ne=Math.max(0,f-A.length+1);ne<=ee;ne++){var vt=f-ne|0;k=A.words[vt]|0,S=u.words[ne]|0,P=k*S+te,C+=P/67108864|0,te=P&67108863}p.words[f]=te|0,v=C|0}return v!==0?p.words[f]=v|0:p.length--,p._strip()}var M=function(u,p,b){var k=u.words,S=p.words,P=b.words,E=0,v,f,C,te=k[0]|0,ee=te&8191,ne=te>>>13,vt=k[1]|0,ye=vt&8191,ve=vt>>>13,sr=k[2]|0,Te=sr&8191,xe=sr>>>13,rr=k[3]|0,Ie=rr&8191,Pe=rr>>>13,ar=k[4]|0,Oe=ar&8191,je=ar>>>13,cr=k[5]|0,Me=cr&8191,Ee=cr>>>13,dr=k[6]|0,Be=dr&8191,De=dr>>>13,lr=k[7]|0,Re=lr&8191,Ne=lr>>>13,ur=k[8]|0,qe=ur&8191,$e=ur>>>13,fr=k[9]|0,Le=fr&8191,Fe=fr>>>13,hr=S[0]|0,Ue=hr&8191,Ke=hr>>>13,pr=S[1]|0,Ve=pr&8191,ze=pr>>>13,_r=S[2]|0,Ge=_r&8191,We=_r>>>13,br=S[3]|0,Xe=br&8191,He=br>>>13,mr=S[4]|0,Je=mr&8191,Ze=mr>>>13,gr=S[5]|0,Qe=gr&8191,Ye=gr>>>13,yr=S[6]|0,et=yr&8191,tt=yr>>>13,wr=S[7]|0,nt=wr&8191,it=wr>>>13,vr=S[8]|0,ot=vr&8191,st=vr>>>13,kr=S[9]|0,rt=kr&8191,at=kr>>>13;b.negative=u.negative^p.negative,b.length=19,v=Math.imul(ee,Ue),f=Math.imul(ee,Ke),f=f+Math.imul(ne,Ue)|0,C=Math.imul(ne,Ke);var Co=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Co>>>26)|0,Co&=67108863,v=Math.imul(ye,Ue),f=Math.imul(ye,Ke),f=f+Math.imul(ve,Ue)|0,C=Math.imul(ve,Ke),v=v+Math.imul(ee,Ve)|0,f=f+Math.imul(ee,ze)|0,f=f+Math.imul(ne,Ve)|0,C=C+Math.imul(ne,ze)|0;var Ao=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Ao>>>26)|0,Ao&=67108863,v=Math.imul(Te,Ue),f=Math.imul(Te,Ke),f=f+Math.imul(xe,Ue)|0,C=Math.imul(xe,Ke),v=v+Math.imul(ye,Ve)|0,f=f+Math.imul(ye,ze)|0,f=f+Math.imul(ve,Ve)|0,C=C+Math.imul(ve,ze)|0,v=v+Math.imul(ee,Ge)|0,f=f+Math.imul(ee,We)|0,f=f+Math.imul(ne,Ge)|0,C=C+Math.imul(ne,We)|0;var So=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(So>>>26)|0,So&=67108863,v=Math.imul(Ie,Ue),f=Math.imul(Ie,Ke),f=f+Math.imul(Pe,Ue)|0,C=Math.imul(Pe,Ke),v=v+Math.imul(Te,Ve)|0,f=f+Math.imul(Te,ze)|0,f=f+Math.imul(xe,Ve)|0,C=C+Math.imul(xe,ze)|0,v=v+Math.imul(ye,Ge)|0,f=f+Math.imul(ye,We)|0,f=f+Math.imul(ve,Ge)|0,C=C+Math.imul(ve,We)|0,v=v+Math.imul(ee,Xe)|0,f=f+Math.imul(ee,He)|0,f=f+Math.imul(ne,Xe)|0,C=C+Math.imul(ne,He)|0;var To=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(To>>>26)|0,To&=67108863,v=Math.imul(Oe,Ue),f=Math.imul(Oe,Ke),f=f+Math.imul(je,Ue)|0,C=Math.imul(je,Ke),v=v+Math.imul(Ie,Ve)|0,f=f+Math.imul(Ie,ze)|0,f=f+Math.imul(Pe,Ve)|0,C=C+Math.imul(Pe,ze)|0,v=v+Math.imul(Te,Ge)|0,f=f+Math.imul(Te,We)|0,f=f+Math.imul(xe,Ge)|0,C=C+Math.imul(xe,We)|0,v=v+Math.imul(ye,Xe)|0,f=f+Math.imul(ye,He)|0,f=f+Math.imul(ve,Xe)|0,C=C+Math.imul(ve,He)|0,v=v+Math.imul(ee,Je)|0,f=f+Math.imul(ee,Ze)|0,f=f+Math.imul(ne,Je)|0,C=C+Math.imul(ne,Ze)|0;var xo=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(xo>>>26)|0,xo&=67108863,v=Math.imul(Me,Ue),f=Math.imul(Me,Ke),f=f+Math.imul(Ee,Ue)|0,C=Math.imul(Ee,Ke),v=v+Math.imul(Oe,Ve)|0,f=f+Math.imul(Oe,ze)|0,f=f+Math.imul(je,Ve)|0,C=C+Math.imul(je,ze)|0,v=v+Math.imul(Ie,Ge)|0,f=f+Math.imul(Ie,We)|0,f=f+Math.imul(Pe,Ge)|0,C=C+Math.imul(Pe,We)|0,v=v+Math.imul(Te,Xe)|0,f=f+Math.imul(Te,He)|0,f=f+Math.imul(xe,Xe)|0,C=C+Math.imul(xe,He)|0,v=v+Math.imul(ye,Je)|0,f=f+Math.imul(ye,Ze)|0,f=f+Math.imul(ve,Je)|0,C=C+Math.imul(ve,Ze)|0,v=v+Math.imul(ee,Qe)|0,f=f+Math.imul(ee,Ye)|0,f=f+Math.imul(ne,Qe)|0,C=C+Math.imul(ne,Ye)|0;var Io=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Io>>>26)|0,Io&=67108863,v=Math.imul(Be,Ue),f=Math.imul(Be,Ke),f=f+Math.imul(De,Ue)|0,C=Math.imul(De,Ke),v=v+Math.imul(Me,Ve)|0,f=f+Math.imul(Me,ze)|0,f=f+Math.imul(Ee,Ve)|0,C=C+Math.imul(Ee,ze)|0,v=v+Math.imul(Oe,Ge)|0,f=f+Math.imul(Oe,We)|0,f=f+Math.imul(je,Ge)|0,C=C+Math.imul(je,We)|0,v=v+Math.imul(Ie,Xe)|0,f=f+Math.imul(Ie,He)|0,f=f+Math.imul(Pe,Xe)|0,C=C+Math.imul(Pe,He)|0,v=v+Math.imul(Te,Je)|0,f=f+Math.imul(Te,Ze)|0,f=f+Math.imul(xe,Je)|0,C=C+Math.imul(xe,Ze)|0,v=v+Math.imul(ye,Qe)|0,f=f+Math.imul(ye,Ye)|0,f=f+Math.imul(ve,Qe)|0,C=C+Math.imul(ve,Ye)|0,v=v+Math.imul(ee,et)|0,f=f+Math.imul(ee,tt)|0,f=f+Math.imul(ne,et)|0,C=C+Math.imul(ne,tt)|0;var Po=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Po>>>26)|0,Po&=67108863,v=Math.imul(Re,Ue),f=Math.imul(Re,Ke),f=f+Math.imul(Ne,Ue)|0,C=Math.imul(Ne,Ke),v=v+Math.imul(Be,Ve)|0,f=f+Math.imul(Be,ze)|0,f=f+Math.imul(De,Ve)|0,C=C+Math.imul(De,ze)|0,v=v+Math.imul(Me,Ge)|0,f=f+Math.imul(Me,We)|0,f=f+Math.imul(Ee,Ge)|0,C=C+Math.imul(Ee,We)|0,v=v+Math.imul(Oe,Xe)|0,f=f+Math.imul(Oe,He)|0,f=f+Math.imul(je,Xe)|0,C=C+Math.imul(je,He)|0,v=v+Math.imul(Ie,Je)|0,f=f+Math.imul(Ie,Ze)|0,f=f+Math.imul(Pe,Je)|0,C=C+Math.imul(Pe,Ze)|0,v=v+Math.imul(Te,Qe)|0,f=f+Math.imul(Te,Ye)|0,f=f+Math.imul(xe,Qe)|0,C=C+Math.imul(xe,Ye)|0,v=v+Math.imul(ye,et)|0,f=f+Math.imul(ye,tt)|0,f=f+Math.imul(ve,et)|0,C=C+Math.imul(ve,tt)|0,v=v+Math.imul(ee,nt)|0,f=f+Math.imul(ee,it)|0,f=f+Math.imul(ne,nt)|0,C=C+Math.imul(ne,it)|0;var Oo=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Oo>>>26)|0,Oo&=67108863,v=Math.imul(qe,Ue),f=Math.imul(qe,Ke),f=f+Math.imul($e,Ue)|0,C=Math.imul($e,Ke),v=v+Math.imul(Re,Ve)|0,f=f+Math.imul(Re,ze)|0,f=f+Math.imul(Ne,Ve)|0,C=C+Math.imul(Ne,ze)|0,v=v+Math.imul(Be,Ge)|0,f=f+Math.imul(Be,We)|0,f=f+Math.imul(De,Ge)|0,C=C+Math.imul(De,We)|0,v=v+Math.imul(Me,Xe)|0,f=f+Math.imul(Me,He)|0,f=f+Math.imul(Ee,Xe)|0,C=C+Math.imul(Ee,He)|0,v=v+Math.imul(Oe,Je)|0,f=f+Math.imul(Oe,Ze)|0,f=f+Math.imul(je,Je)|0,C=C+Math.imul(je,Ze)|0,v=v+Math.imul(Ie,Qe)|0,f=f+Math.imul(Ie,Ye)|0,f=f+Math.imul(Pe,Qe)|0,C=C+Math.imul(Pe,Ye)|0,v=v+Math.imul(Te,et)|0,f=f+Math.imul(Te,tt)|0,f=f+Math.imul(xe,et)|0,C=C+Math.imul(xe,tt)|0,v=v+Math.imul(ye,nt)|0,f=f+Math.imul(ye,it)|0,f=f+Math.imul(ve,nt)|0,C=C+Math.imul(ve,it)|0,v=v+Math.imul(ee,ot)|0,f=f+Math.imul(ee,st)|0,f=f+Math.imul(ne,ot)|0,C=C+Math.imul(ne,st)|0;var jo=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(jo>>>26)|0,jo&=67108863,v=Math.imul(Le,Ue),f=Math.imul(Le,Ke),f=f+Math.imul(Fe,Ue)|0,C=Math.imul(Fe,Ke),v=v+Math.imul(qe,Ve)|0,f=f+Math.imul(qe,ze)|0,f=f+Math.imul($e,Ve)|0,C=C+Math.imul($e,ze)|0,v=v+Math.imul(Re,Ge)|0,f=f+Math.imul(Re,We)|0,f=f+Math.imul(Ne,Ge)|0,C=C+Math.imul(Ne,We)|0,v=v+Math.imul(Be,Xe)|0,f=f+Math.imul(Be,He)|0,f=f+Math.imul(De,Xe)|0,C=C+Math.imul(De,He)|0,v=v+Math.imul(Me,Je)|0,f=f+Math.imul(Me,Ze)|0,f=f+Math.imul(Ee,Je)|0,C=C+Math.imul(Ee,Ze)|0,v=v+Math.imul(Oe,Qe)|0,f=f+Math.imul(Oe,Ye)|0,f=f+Math.imul(je,Qe)|0,C=C+Math.imul(je,Ye)|0,v=v+Math.imul(Ie,et)|0,f=f+Math.imul(Ie,tt)|0,f=f+Math.imul(Pe,et)|0,C=C+Math.imul(Pe,tt)|0,v=v+Math.imul(Te,nt)|0,f=f+Math.imul(Te,it)|0,f=f+Math.imul(xe,nt)|0,C=C+Math.imul(xe,it)|0,v=v+Math.imul(ye,ot)|0,f=f+Math.imul(ye,st)|0,f=f+Math.imul(ve,ot)|0,C=C+Math.imul(ve,st)|0,v=v+Math.imul(ee,rt)|0,f=f+Math.imul(ee,at)|0,f=f+Math.imul(ne,rt)|0,C=C+Math.imul(ne,at)|0;var Mo=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,v=Math.imul(Le,Ve),f=Math.imul(Le,ze),f=f+Math.imul(Fe,Ve)|0,C=Math.imul(Fe,ze),v=v+Math.imul(qe,Ge)|0,f=f+Math.imul(qe,We)|0,f=f+Math.imul($e,Ge)|0,C=C+Math.imul($e,We)|0,v=v+Math.imul(Re,Xe)|0,f=f+Math.imul(Re,He)|0,f=f+Math.imul(Ne,Xe)|0,C=C+Math.imul(Ne,He)|0,v=v+Math.imul(Be,Je)|0,f=f+Math.imul(Be,Ze)|0,f=f+Math.imul(De,Je)|0,C=C+Math.imul(De,Ze)|0,v=v+Math.imul(Me,Qe)|0,f=f+Math.imul(Me,Ye)|0,f=f+Math.imul(Ee,Qe)|0,C=C+Math.imul(Ee,Ye)|0,v=v+Math.imul(Oe,et)|0,f=f+Math.imul(Oe,tt)|0,f=f+Math.imul(je,et)|0,C=C+Math.imul(je,tt)|0,v=v+Math.imul(Ie,nt)|0,f=f+Math.imul(Ie,it)|0,f=f+Math.imul(Pe,nt)|0,C=C+Math.imul(Pe,it)|0,v=v+Math.imul(Te,ot)|0,f=f+Math.imul(Te,st)|0,f=f+Math.imul(xe,ot)|0,C=C+Math.imul(xe,st)|0,v=v+Math.imul(ye,rt)|0,f=f+Math.imul(ye,at)|0,f=f+Math.imul(ve,rt)|0,C=C+Math.imul(ve,at)|0;var Eo=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Eo>>>26)|0,Eo&=67108863,v=Math.imul(Le,Ge),f=Math.imul(Le,We),f=f+Math.imul(Fe,Ge)|0,C=Math.imul(Fe,We),v=v+Math.imul(qe,Xe)|0,f=f+Math.imul(qe,He)|0,f=f+Math.imul($e,Xe)|0,C=C+Math.imul($e,He)|0,v=v+Math.imul(Re,Je)|0,f=f+Math.imul(Re,Ze)|0,f=f+Math.imul(Ne,Je)|0,C=C+Math.imul(Ne,Ze)|0,v=v+Math.imul(Be,Qe)|0,f=f+Math.imul(Be,Ye)|0,f=f+Math.imul(De,Qe)|0,C=C+Math.imul(De,Ye)|0,v=v+Math.imul(Me,et)|0,f=f+Math.imul(Me,tt)|0,f=f+Math.imul(Ee,et)|0,C=C+Math.imul(Ee,tt)|0,v=v+Math.imul(Oe,nt)|0,f=f+Math.imul(Oe,it)|0,f=f+Math.imul(je,nt)|0,C=C+Math.imul(je,it)|0,v=v+Math.imul(Ie,ot)|0,f=f+Math.imul(Ie,st)|0,f=f+Math.imul(Pe,ot)|0,C=C+Math.imul(Pe,st)|0,v=v+Math.imul(Te,rt)|0,f=f+Math.imul(Te,at)|0,f=f+Math.imul(xe,rt)|0,C=C+Math.imul(xe,at)|0;var Bo=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Bo>>>26)|0,Bo&=67108863,v=Math.imul(Le,Xe),f=Math.imul(Le,He),f=f+Math.imul(Fe,Xe)|0,C=Math.imul(Fe,He),v=v+Math.imul(qe,Je)|0,f=f+Math.imul(qe,Ze)|0,f=f+Math.imul($e,Je)|0,C=C+Math.imul($e,Ze)|0,v=v+Math.imul(Re,Qe)|0,f=f+Math.imul(Re,Ye)|0,f=f+Math.imul(Ne,Qe)|0,C=C+Math.imul(Ne,Ye)|0,v=v+Math.imul(Be,et)|0,f=f+Math.imul(Be,tt)|0,f=f+Math.imul(De,et)|0,C=C+Math.imul(De,tt)|0,v=v+Math.imul(Me,nt)|0,f=f+Math.imul(Me,it)|0,f=f+Math.imul(Ee,nt)|0,C=C+Math.imul(Ee,it)|0,v=v+Math.imul(Oe,ot)|0,f=f+Math.imul(Oe,st)|0,f=f+Math.imul(je,ot)|0,C=C+Math.imul(je,st)|0,v=v+Math.imul(Ie,rt)|0,f=f+Math.imul(Ie,at)|0,f=f+Math.imul(Pe,rt)|0,C=C+Math.imul(Pe,at)|0;var Do=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Do>>>26)|0,Do&=67108863,v=Math.imul(Le,Je),f=Math.imul(Le,Ze),f=f+Math.imul(Fe,Je)|0,C=Math.imul(Fe,Ze),v=v+Math.imul(qe,Qe)|0,f=f+Math.imul(qe,Ye)|0,f=f+Math.imul($e,Qe)|0,C=C+Math.imul($e,Ye)|0,v=v+Math.imul(Re,et)|0,f=f+Math.imul(Re,tt)|0,f=f+Math.imul(Ne,et)|0,C=C+Math.imul(Ne,tt)|0,v=v+Math.imul(Be,nt)|0,f=f+Math.imul(Be,it)|0,f=f+Math.imul(De,nt)|0,C=C+Math.imul(De,it)|0,v=v+Math.imul(Me,ot)|0,f=f+Math.imul(Me,st)|0,f=f+Math.imul(Ee,ot)|0,C=C+Math.imul(Ee,st)|0,v=v+Math.imul(Oe,rt)|0,f=f+Math.imul(Oe,at)|0,f=f+Math.imul(je,rt)|0,C=C+Math.imul(je,at)|0;var Ro=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Ro>>>26)|0,Ro&=67108863,v=Math.imul(Le,Qe),f=Math.imul(Le,Ye),f=f+Math.imul(Fe,Qe)|0,C=Math.imul(Fe,Ye),v=v+Math.imul(qe,et)|0,f=f+Math.imul(qe,tt)|0,f=f+Math.imul($e,et)|0,C=C+Math.imul($e,tt)|0,v=v+Math.imul(Re,nt)|0,f=f+Math.imul(Re,it)|0,f=f+Math.imul(Ne,nt)|0,C=C+Math.imul(Ne,it)|0,v=v+Math.imul(Be,ot)|0,f=f+Math.imul(Be,st)|0,f=f+Math.imul(De,ot)|0,C=C+Math.imul(De,st)|0,v=v+Math.imul(Me,rt)|0,f=f+Math.imul(Me,at)|0,f=f+Math.imul(Ee,rt)|0,C=C+Math.imul(Ee,at)|0;var No=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(No>>>26)|0,No&=67108863,v=Math.imul(Le,et),f=Math.imul(Le,tt),f=f+Math.imul(Fe,et)|0,C=Math.imul(Fe,tt),v=v+Math.imul(qe,nt)|0,f=f+Math.imul(qe,it)|0,f=f+Math.imul($e,nt)|0,C=C+Math.imul($e,it)|0,v=v+Math.imul(Re,ot)|0,f=f+Math.imul(Re,st)|0,f=f+Math.imul(Ne,ot)|0,C=C+Math.imul(Ne,st)|0,v=v+Math.imul(Be,rt)|0,f=f+Math.imul(Be,at)|0,f=f+Math.imul(De,rt)|0,C=C+Math.imul(De,at)|0;var qo=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(qo>>>26)|0,qo&=67108863,v=Math.imul(Le,nt),f=Math.imul(Le,it),f=f+Math.imul(Fe,nt)|0,C=Math.imul(Fe,it),v=v+Math.imul(qe,ot)|0,f=f+Math.imul(qe,st)|0,f=f+Math.imul($e,ot)|0,C=C+Math.imul($e,st)|0,v=v+Math.imul(Re,rt)|0,f=f+Math.imul(Re,at)|0,f=f+Math.imul(Ne,rt)|0,C=C+Math.imul(Ne,at)|0;var $o=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+($o>>>26)|0,$o&=67108863,v=Math.imul(Le,ot),f=Math.imul(Le,st),f=f+Math.imul(Fe,ot)|0,C=Math.imul(Fe,st),v=v+Math.imul(qe,rt)|0,f=f+Math.imul(qe,at)|0,f=f+Math.imul($e,rt)|0,C=C+Math.imul($e,at)|0;var Lo=(E+v|0)+((f&8191)<<13)|0;E=(C+(f>>>13)|0)+(Lo>>>26)|0,Lo&=67108863,v=Math.imul(Le,rt),f=Math.imul(Le,at),f=f+Math.imul(Fe,rt)|0,C=Math.imul(Fe,at);var Fo=(E+v|0)+((f&8191)<<13)|0;return E=(C+(f>>>13)|0)+(Fo>>>26)|0,Fo&=67108863,P[0]=Co,P[1]=Ao,P[2]=So,P[3]=To,P[4]=xo,P[5]=Io,P[6]=Po,P[7]=Oo,P[8]=jo,P[9]=Mo,P[10]=Eo,P[11]=Bo,P[12]=Do,P[13]=Ro,P[14]=No,P[15]=qo,P[16]=$o,P[17]=Lo,P[18]=Fo,E!==0&&(P[19]=E,b.length++),b};Math.imul||(M=j);function B(A,u,p){p.negative=u.negative^A.negative,p.length=A.length+u.length;for(var b=0,k=0,S=0;S<p.length-1;S++){var P=k;k=0;for(var E=b&67108863,v=Math.min(S,u.length-1),f=Math.max(0,S-A.length+1);f<=v;f++){var C=S-f,te=A.words[C]|0,ee=u.words[f]|0,ne=te*ee,vt=ne&67108863;P=P+(ne/67108864|0)|0,vt=vt+E|0,E=vt&67108863,P=P+(vt>>>26)|0,k+=P>>>26,P&=67108863}p.words[S]=E,b=P,P=k}return b!==0?p.words[S]=b:p.length--,p._strip()}function $(A,u,p){return B(A,u,p)}s.prototype.mulTo=function(u,p){var b,k=this.length+u.length;return this.length===10&&u.length===10?b=M(this,u,p):k<63?b=j(this,u,p):k<1024?b=B(this,u,p):b=$(this,u,p),b},s.prototype.mul=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},s.prototype.mulf=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),$(this,u,p)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){var p=u<0;p&&(u=-u),i(typeof u=="number"),i(u<67108864);for(var b=0,k=0;k<this.length;k++){var S=(this.words[k]|0)*u,P=(S&67108863)+(b&67108863);b>>=26,b+=S/67108864|0,b+=P>>>26,this.words[k]=P&67108863}return b!==0&&(this.words[k]=b,this.length++),p?this.ineg():this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var p=O(u);if(p.length===0)return new s(1);for(var b=this,k=0;k<p.length&&p[k]===0;k++,b=b.sqr());if(++k<p.length)for(var S=b.sqr();k<p.length;k++,S=S.sqr())p[k]!==0&&(b=b.mul(S));return b},s.prototype.iushln=function(u){i(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26,k=67108863>>>26-p<<26-p,S;if(p!==0){var P=0;for(S=0;S<this.length;S++){var E=this.words[S]&k,v=(this.words[S]|0)-E<<p;this.words[S]=v|P,P=E>>>26-p}P&&(this.words[S]=P,this.length++)}if(b!==0){for(S=this.length-1;S>=0;S--)this.words[S+b]=this.words[S];for(S=0;S<b;S++)this.words[S]=0;this.length+=b}return this._strip()},s.prototype.ishln=function(u){return i(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,p,b){i(typeof u=="number"&&u>=0);var k;p?k=(p-p%26)/26:k=0;var S=u%26,P=Math.min((u-S)/26,this.length),E=67108863^67108863>>>S<<S,v=b;if(k-=P,k=Math.max(0,k),v){for(var f=0;f<P;f++)v.words[f]=this.words[f];v.length=P}if(P!==0)if(this.length>P)for(this.length-=P,f=0;f<this.length;f++)this.words[f]=this.words[f+P];else this.words[0]=0,this.length=1;var C=0;for(f=this.length-1;f>=0&&(C!==0||f>=k);f--){var te=this.words[f]|0;this.words[f]=C<<26-S|te>>>S,C=te&E}return v&&C!==0&&(v.words[v.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(u,p,b){return i(this.negative===0),this.iushrn(u,p,b)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){i(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26,k=1<<p;if(this.length<=b)return!1;var S=this.words[b];return!!(S&k)},s.prototype.imaskn=function(u){i(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(p!==0&&b++,this.length=Math.min(b,this.length),p!==0){var k=67108863^67108863>>>p<<p;this.words[this.length-1]&=k}return this._strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return i(typeof u=="number"),i(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(u){if(i(typeof u=="number"),i(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,p,b){var k=u.length+b,S;this._expand(k);var P,E=0;for(S=0;S<u.length;S++){P=(this.words[S+b]|0)+E;var v=(u.words[S]|0)*p;P-=v&67108863,E=(P>>26)-(v/67108864|0),this.words[S+b]=P&67108863}for(;S<this.length-b;S++)P=(this.words[S+b]|0)+E,E=P>>26,this.words[S+b]=P&67108863;if(E===0)return this._strip();for(i(E===-1),E=0,S=0;S<this.length;S++)P=-(this.words[S]|0)+E,E=P>>26,this.words[S]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(u,p){var b=this.length-u.length,k=this.clone(),S=u,P=S.words[S.length-1]|0,E=this._countBits(P);b=26-E,b!==0&&(S=S.ushln(b),k.iushln(b),P=S.words[S.length-1]|0);var v=k.length-S.length,f;if(p!=="mod"){f=new s(null),f.length=v+1,f.words=new Array(f.length);for(var C=0;C<f.length;C++)f.words[C]=0}var te=k.clone()._ishlnsubmul(S,1,v);te.negative===0&&(k=te,f&&(f.words[v]=1));for(var ee=v-1;ee>=0;ee--){var ne=(k.words[S.length+ee]|0)*67108864+(k.words[S.length+ee-1]|0);for(ne=Math.min(ne/P|0,67108863),k._ishlnsubmul(S,ne,ee);k.negative!==0;)ne--,k.negative=0,k._ishlnsubmul(S,1,ee),k.isZero()||(k.negative^=1);f&&(f.words[ee]=ne)}return f&&f._strip(),k._strip(),p!=="div"&&b!==0&&k.iushrn(b),{div:f||null,mod:k}},s.prototype.divmod=function(u,p,b){if(i(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var k,S,P;return this.negative!==0&&u.negative===0?(P=this.neg().divmod(u,p),p!=="mod"&&(k=P.div.neg()),p!=="div"&&(S=P.mod.neg(),b&&S.negative!==0&&S.iadd(u)),{div:k,mod:S}):this.negative===0&&u.negative!==0?(P=this.divmod(u.neg(),p),p!=="mod"&&(k=P.div.neg()),{div:k,mod:P.mod}):this.negative&u.negative?(P=this.neg().divmod(u.neg(),p),p!=="div"&&(S=P.mod.neg(),b&&S.negative!==0&&S.isub(u)),{div:P.div,mod:S}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modrn(u.words[0]))}:this._wordDiv(u,p)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var b=p.div.negative!==0?p.mod.isub(u):p.mod,k=u.ushrn(1),S=u.andln(1),P=b.cmp(k);return P<0||S===1&&P===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(u){var p=u<0;p&&(u=-u),i(u<=67108863);for(var b=(1<<26)%u,k=0,S=this.length-1;S>=0;S--)k=(b*k+(this.words[S]|0))%u;return p?-k:k},s.prototype.modn=function(u){return this.modrn(u)},s.prototype.idivn=function(u){var p=u<0;p&&(u=-u),i(u<=67108863);for(var b=0,k=this.length-1;k>=0;k--){var S=(this.words[k]|0)+b*67108864;this.words[k]=S/u|0,b=S%u}return this._strip(),p?this.ineg():this},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){i(u.negative===0),i(!u.isZero());var p=this,b=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var k=new s(1),S=new s(0),P=new s(0),E=new s(1),v=0;p.isEven()&&b.isEven();)p.iushrn(1),b.iushrn(1),++v;for(var f=b.clone(),C=p.clone();!p.isZero();){for(var te=0,ee=1;!(p.words[0]&ee)&&te<26;++te,ee<<=1);if(te>0)for(p.iushrn(te);te-- >0;)(k.isOdd()||S.isOdd())&&(k.iadd(f),S.isub(C)),k.iushrn(1),S.iushrn(1);for(var ne=0,vt=1;!(b.words[0]&vt)&&ne<26;++ne,vt<<=1);if(ne>0)for(b.iushrn(ne);ne-- >0;)(P.isOdd()||E.isOdd())&&(P.iadd(f),E.isub(C)),P.iushrn(1),E.iushrn(1);p.cmp(b)>=0?(p.isub(b),k.isub(P),S.isub(E)):(b.isub(p),P.isub(k),E.isub(S))}return{a:P,b:E,gcd:b.iushln(v)}},s.prototype._invmp=function(u){i(u.negative===0),i(!u.isZero());var p=this,b=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var k=new s(1),S=new s(0),P=b.clone();p.cmpn(1)>0&&b.cmpn(1)>0;){for(var E=0,v=1;!(p.words[0]&v)&&E<26;++E,v<<=1);if(E>0)for(p.iushrn(E);E-- >0;)k.isOdd()&&k.iadd(P),k.iushrn(1);for(var f=0,C=1;!(b.words[0]&C)&&f<26;++f,C<<=1);if(f>0)for(b.iushrn(f);f-- >0;)S.isOdd()&&S.iadd(P),S.iushrn(1);p.cmp(b)>=0?(p.isub(b),k.isub(S)):(b.isub(p),S.isub(k))}var te;return p.cmpn(1)===0?te=k:te=S,te.cmpn(0)<0&&te.iadd(u),te},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),b=u.clone();p.negative=0,b.negative=0;for(var k=0;p.isEven()&&b.isEven();k++)p.iushrn(1),b.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;b.isEven();)b.iushrn(1);var S=p.cmp(b);if(S<0){var P=p;p=b,b=P}else if(S===0||b.cmpn(1)===0)break;p.isub(b)}while(!0);return b.iushln(k)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){i(typeof u=="number");var p=u%26,b=(u-p)/26,k=1<<p;if(this.length<=b)return this._expand(b+1),this.words[b]|=k,this;for(var S=k,P=b;S!==0&&P<this.length;P++){var E=this.words[P]|0;E+=S,S=E>>>26,E&=67108863,this.words[P]=E}return S!==0&&(this.words[P]=S,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var b;if(this.length>1)b=1;else{p&&(u=-u),i(u<=67108863,"Number is too big");var k=this.words[0]|0;b=k===u?0:k<u?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,b=this.length-1;b>=0;b--){var k=this.words[b]|0,S=u.words[b]|0;if(k!==S){k<S?p=-1:k>S&&(p=1);break}}return p},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new W(u)},s.prototype.toRed=function(u){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return i(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return i(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var J={k256:null,p224:null,p192:null,p25519:null};function z(A,u){this.name=A,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},z.prototype.ireduce=function(u){var p=u,b;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),b=p.bitLength();while(b>this.n);var k=b<this.n?-1:p.ucmp(this.p);return k===0?(p.words[0]=0,p.length=1):k>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},z.prototype.split=function(u,p){u.iushrn(this.n,0,p)},z.prototype.imulK=function(u){return u.imul(this.k)};function re(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(re,z),re.prototype.split=function(u,p){for(var b=4194303,k=Math.min(u.length,9),S=0;S<k;S++)p.words[S]=u.words[S];if(p.length=k,u.length<=9){u.words[0]=0,u.length=1;return}var P=u.words[9];for(p.words[p.length++]=P&b,S=10;S<u.length;S++){var E=u.words[S]|0;u.words[S-10]=(E&b)<<4|P>>>22,P=E}P>>>=22,u.words[S-10]=P,P===0&&u.length>10?u.length-=10:u.length-=9},re.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,b=0;b<u.length;b++){var k=u.words[b]|0;p+=k*977,u.words[b]=p&67108863,p=k*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ge(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(ge,z);function bt(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(bt,z);function Q(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(Q,z),Q.prototype.imulK=function(u){for(var p=0,b=0;b<u.length;b++){var k=(u.words[b]|0)*19+p,S=k&67108863;k>>>=26,u.words[b]=S,p=k}return p!==0&&(u.words[u.length++]=p),u},s._prime=function(u){if(J[u])return J[u];var p;if(u==="k256")p=new re;else if(u==="p224")p=new ge;else if(u==="p192")p=new bt;else if(u==="p25519")p=new Q;else throw new Error("Unknown prime "+u);return J[u]=p,p};function W(A){if(typeof A=="string"){var u=s._prime(A);this.m=u.p,this.prime=u}else i(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}W.prototype._verify1=function(u){i(u.negative===0,"red works only with positives"),i(u.red,"red works only with red numbers")},W.prototype._verify2=function(u,p){i((u.negative|p.negative)===0,"red works only with positives"),i(u.red&&u.red===p.red,"red works only with red numbers")},W.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(l(u,u.umod(this.m)._forceRed(this)),u)},W.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},W.prototype.add=function(u,p){this._verify2(u,p);var b=u.add(p);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},W.prototype.iadd=function(u,p){this._verify2(u,p);var b=u.iadd(p);return b.cmp(this.m)>=0&&b.isub(this.m),b},W.prototype.sub=function(u,p){this._verify2(u,p);var b=u.sub(p);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},W.prototype.isub=function(u,p){this._verify2(u,p);var b=u.isub(p);return b.cmpn(0)<0&&b.iadd(this.m),b},W.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},W.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},W.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},W.prototype.isqr=function(u){return this.imul(u,u.clone())},W.prototype.sqr=function(u){return this.mul(u,u)},W.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(i(p%2===1),p===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(u,b)}for(var k=this.m.subn(1),S=0;!k.isZero()&&k.andln(1)===0;)S++,k.iushrn(1);i(!k.isZero());var P=new s(1).toRed(this),E=P.redNeg(),v=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,v).cmp(E)!==0;)f.redIAdd(E);for(var C=this.pow(f,k),te=this.pow(u,k.addn(1).iushrn(1)),ee=this.pow(u,k),ne=S;ee.cmp(P)!==0;){for(var vt=ee,ye=0;vt.cmp(P)!==0;ye++)vt=vt.redSqr();i(ye<ne);var ve=this.pow(C,new s(1).iushln(ne-ye-1));te=te.redMul(ve),C=ve.redSqr(),ee=ee.redMul(C),ne=ye}return te},W.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},W.prototype.pow=function(u,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var b=4,k=new Array(1<<b);k[0]=new s(1).toRed(this),k[1]=u;for(var S=2;S<k.length;S++)k[S]=this.mul(k[S-1],u);var P=k[0],E=0,v=0,f=p.bitLength()%26;for(f===0&&(f=26),S=p.length-1;S>=0;S--){for(var C=p.words[S],te=f-1;te>=0;te--){var ee=C>>te&1;if(P!==k[0]&&(P=this.sqr(P)),ee===0&&E===0){v=0;continue}E<<=1,E|=ee,v++,!(v!==b&&(S!==0||te!==0))&&(P=this.mul(P,k[E]),v=0,E=0)}f=26}return P},W.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},W.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},s.mont=function(u){return new ue(u)};function ue(A){W.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(ue,W),ue.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},ue.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},ue.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var b=u.imul(p),k=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=b.isub(k).iushrn(this.shift),P=S;return S.cmp(this.m)>=0?P=S.isub(this.m):S.cmpn(0)<0&&(P=S.iadd(this.m)),P._forceRed(this)},ue.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new s(0)._forceRed(this);var b=u.mul(p),k=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=b.isub(k).iushrn(this.shift),P=S;return S.cmp(this.m)>=0?P=S.isub(this.m):S.cmpn(0)<0&&(P=S.iadd(this.m)),P._forceRed(this)},ue.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(e,ad)})(fd);const da="3.7.5",hd=da,pd=typeof atob=="function",_d=typeof btoa=="function",Yn=typeof Buffer=="function",Ar=typeof TextDecoder=="function"?new TextDecoder:void 0,Sr=typeof TextEncoder=="function"?new TextEncoder:void 0,bd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ri=Array.prototype.slice.call(bd),Pi=(e=>{let t={};return e.forEach((n,i)=>t[n]=i),t})(ri),md=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,yt=String.fromCharCode.bind(String),Tr=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),la=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),ua=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),fa=e=>{let t,n,i,o,s="";const r=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|o,s+=ri[t>>18&63]+ri[t>>12&63]+ri[t>>6&63]+ri[t&63]}return r?s.slice(0,r-3)+"===".substring(r):s},Es=_d?e=>btoa(e):Yn?e=>Buffer.from(e,"binary").toString("base64"):fa,ls=Yn?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let i=0,o=e.length;i<o;i+=4096)n.push(yt.apply(null,e.subarray(i,i+4096)));return Es(n.join(""))},$i=(e,t=!1)=>t?la(ls(e)):ls(e),gd=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?yt(192|t>>>6)+yt(128|t&63):yt(224|t>>>12&15)+yt(128|t>>>6&63)+yt(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return yt(240|t>>>18&7)+yt(128|t>>>12&63)+yt(128|t>>>6&63)+yt(128|t&63)}},yd=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ha=e=>e.replace(yd,gd),xr=Yn?e=>Buffer.from(e,"utf8").toString("base64"):Sr?e=>ls(Sr.encode(e)):e=>Es(ha(e)),zn=(e,t=!1)=>t?la(xr(e)):xr(e),Ir=e=>zn(e,!0),wd=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,vd=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return yt((n>>>10)+55296)+yt((n&1023)+56320);case 3:return yt((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return yt((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},pa=e=>e.replace(wd,vd),_a=e=>{if(e=e.replace(/\s+/g,""),!md.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",i,o;for(let s=0;s<e.length;)t=Pi[e.charAt(s++)]<<18|Pi[e.charAt(s++)]<<12|(i=Pi[e.charAt(s++)])<<6|(o=Pi[e.charAt(s++)]),n+=i===64?yt(t>>16&255):o===64?yt(t>>16&255,t>>8&255):yt(t>>16&255,t>>8&255,t&255);return n},Bs=pd?e=>atob(ua(e)):Yn?e=>Buffer.from(e,"base64").toString("binary"):_a,ba=Yn?e=>Tr(Buffer.from(e,"base64")):e=>Tr(Bs(e).split("").map(t=>t.charCodeAt(0))),ma=e=>ba(ga(e)),kd=Yn?e=>Buffer.from(e,"base64").toString("utf8"):Ar?e=>Ar.decode(ba(e)):e=>pa(Bs(e)),ga=e=>ua(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),us=e=>kd(ga(e)),Cd=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},ya=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),wa=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,ya(n));e("fromBase64",function(){return us(this)}),e("toBase64",function(t){return zn(this,t)}),e("toBase64URI",function(){return zn(this,!0)}),e("toBase64URL",function(){return zn(this,!0)}),e("toUint8Array",function(){return ma(this)})},va=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,ya(n));e("toBase64",function(t){return $i(this,t)}),e("toBase64URI",function(){return $i(this,!0)}),e("toBase64URL",function(){return $i(this,!0)})},Ad=()=>{wa(),va()},Li={version:da,VERSION:hd,atob:Bs,atobPolyfill:_a,btoa:Es,btoaPolyfill:fa,fromBase64:us,toBase64:zn,encode:zn,encodeURI:Ir,encodeURL:Ir,utob:ha,btou:pa,decode:us,isValid:Cd,fromUint8Array:$i,toUint8Array:ma,extendString:wa,extendUint8Array:va,extendBuiltins:Ad};function Uo(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(d){return function(l){return c([d,l])}}function c(d){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,d[0]&&(n=0)),n;)try{if(i=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(l){d=[6,l],o=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var An;(function(e){e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS"})(An||(An={}));var Sd=function(){function e(t){this.compare=t||e.defaultCompareFunction}return e.defaultCompareFunction=function(t,n){return t===n?An.EQUAL:t<n?An.LESS:An.GREATER},e.prototype.equal=function(t,n){return this.compare(t,n)===An.EQUAL},e.prototype.lessThan=function(t,n){return this.compare(t,n)===An.LESS},e.prototype.greaterThan=function(t,n){return this.compare(t,n)===An.GREATER},e.prototype.lessThanOrEqual=function(t,n){return this.lessThan(t,n)||this.equal(t,n)},e.prototype.greaterThanOrEqual=function(t,n){return this.greaterThan(t,n)||this.equal(t,n)},e.prototype.reverse=function(){var t=this.compare;this.compare=function(n,i){return t(i,n)}},e}(),Pr=function(){function e(t){this.value=t,this.next=null}return e}(),Or=function(){function e(t){this.value=t,this.next=null,this.prev=null}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fs=function(e,t){return fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},fs(e,t)};function ei(e,t){fs(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function mi(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(d){return function(l){return c([d,l])}}function c(d){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(l){d=[6,l],o=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Td(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function Wt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Td(arguments[t]));return e}var xd="obfuse error occur";function Hi(e,t){if(!e)throw new Error("[linked-list] "+(t||xd))}var Id=-1,ka=function(){function e(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._head=null,this._tail=null,this._length=0,this.compare=new Sd,n.length>0&&n.forEach(function(o){t.append(o)})}return Object.defineProperty(e.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopLength",{get:function(){var t=!1,n=1;if(!this._head)return 0;for(var i=this._head,o=this._head;o.next&&o.next.next;)if(o=o.next.next,i=i.next,i===o){t=!0;break}if(t){for(o=o.next;i!==o;)n++,o=o.next;return n}else return 0},enumerable:!0,configurable:!0}),e.prototype.getNode=function(t){var n=this._length;Hi(n>0&&t>=0&&t<n,"[linked-list] index "+t+" out of scope of list, which length is "+n);for(var i=this._head,o=0;o<t;)i=i.next,o++;return i},e.prototype.get=function(t){var n=this.getNode(t);return n?n.value:null},e.prototype.find=function(t){var n=t.value,i=t.callback;if(!this._head)return null;for(var o=this._head;o;){if(i&&i(o.value)||n!==void 0&&this.compare.equal(o.value,n))return o;o=o.next}return null},e.prototype.indexOf=function(t){if(!this._head)return Id;for(var n=this._head,i=-1;n.next;){if(i++,this.compare.equal(n.value,t))return i;n=n.next}return n===this._tail&&this.compare.equal(n.value,t)&&(i+=1),i},e.prototype.first=function(t){Hi(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var n=this.iterator(),i=[],o=Math.min(t,this.length),s=0;s<o;s++){var r=n.next();i.push(r.value)}return i},e.prototype.toArray=function(){return Wt(this)},e.prototype.isEmpty=function(){return this._head===null},e.prototype.iterator=function(){var t;return mi(this,function(n){switch(n.label){case 0:t=this._head,n.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return n.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e}(),gi=function(e){ei(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.apply(this,Wt(n))||this}return t.prototype.append=function(n){var i=new Pr(n);return this._tail?(this._tail.next=i,this._tail=i):this._head=this._tail=i,this._length++,!0},t.prototype.prepend=function(n){var i=new Pr(n);return this._head?(i.next=this._head,this._head=i):this._head=this._tail=i,this._length++,!0},t.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,i.next=null):this._head=this._tail=null,this._length--,n;for(var o=i;;){if(this.compare.equal(i.value,n))return i.next?o.next=i.next:(this._tail=o,this._tail.next=null),i.next=null,this._length--,n;if(i.next)o=i,i=i.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n){if(!this._head.next)this._head=null,this._tail=null;else{for(var i=this._head;i.next!==n;)i=i.next;i.next=null,this._tail=i}return this._length--,n.value}},t.prototype.reverse=function(){if(this._head){var n=this._head,i=null,o;for(this._tail=this._head;n!==null;)o=n.next,n.next=i,i=n,n=o;this._head=i}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Wt([void 0],n)))},t}(ka),Pd=function(e){ei(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Wt(n))||this;return o.cyclization(),o}return t.prototype.iterator=function(){var n;return mi(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return mi(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this.breakCircle();var s=e.prototype[n].apply(this,i);return this.cyclization(),s},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){Hi(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),o=[],s=0;s<n;s++){var r=i.next();o.push(r.value)}return o},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(gi);(function(e){ei(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Wt(n))||this;return o.cyclization(),o}return t.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},t.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Wt([void 0],n)))},t})(Pd);var Od=function(e){ei(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.apply(this,Wt(n))||this}return t.prototype.append=function(n){var i=new Or(n);return this._tail?(this._tail.next=i,i.prev=this._tail,this._tail=i):this._head=this._tail=i,this._length++,!0},t.prototype.prepend=function(n){var i=new Or(n);return this._head?(i.next=this._head,this._head.prev=i,this._head=i):this._head=this._tail=i,this._length++,!0},t.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,this._head.prev=null,i.next=i.prev=null):this._head=this._tail=null,this._length--,n;for(;;){if(this.compare.equal(i.value,n))return i.next?(i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null):(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null),this._length--,i.value;if(i.next)i=i.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(n.next.prev=null,this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n)return this._head.next?(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.reverse=function(){if(this._head){var n=this._head,i=null,o;for(this._tail=this._head;n!==null;)o=n.next,n.next=i,n.prev=o,i=n,n=o;this._head=i}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Wt([void 0],n)))},t}(ka),jd=function(e){ei(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Wt(n))||this;return o.cyclization(),o}return t.prototype.iterator=function(){var n;return mi(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return mi(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this.breakCircle();var s=e.prototype[n].apply(this,i);return this.cyclization(),s},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){Hi(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),o=[],s=0;s<n;s++){var r=i.next();o.push(r.value)}return o},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(Od);(function(e){ei(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Wt(n))||this;return o.cyclization(),o}return t.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},t.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Wt([void 0],n)))},t})(jd);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Md(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function Ed(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Md(arguments[t]));return e}var Bd=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.queue=new(gi.bind.apply(gi,Ed([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.queue.isEmpty()},e.prototype.enqueue=function(t){return this.queue.append(t)},e.prototype.dequeue=function(){var t=this.queue.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.queue.toArray()},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Dd(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function Rd(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Dd(arguments[t]));return e}var Ko=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.stack=new(gi.bind.apply(gi,Rd([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.stack.isEmpty()},e.prototype.push=function(t){return this.stack.append(t)},e.prototype.pop=function(){var t=this.stack.removeTail();return typeof t<"u"?t:void 0},e.prototype.popBottom=function(){var t=this.stack.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.stack.toArray()},e}(),Nd=function(){function e(t,n,i){i===void 0&&(i=0),this.startVertex=t,this.endVertex=n,this.weight=i}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),n=this.endVertex.getKey();return t+"_"+n},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function hs(e,t,n){if(n===void 0&&(n="cc-graph"),!e)throw new Error((n?"["+n+"]":"")+" Invariant failed: "+t)}function qd(e,t){t===void 0&&(t=!0);var n=typeof e<"u"&&e!==null;return t?n&&e!=="undefined"&&e!=="null":n}var jr=function(){function e(t){hs(qd(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,n=this.getEdges(),i=function(o){return o.startVertex===t?o.endVertex:o.startVertex};return n.map(i)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var n=this.getEdges().find(function(i){return i===t});return!!n},e.prototype.hasNeighbor=function(t){var n=this.getEdges().find(function(i){return i.startVertex===t||i.endVertex===t});return!!n},e.prototype.findEdge=function(t){var n=function(o){return o.startVertex===t||o.endVertex===t},i=this.getEdges().find(n);return i||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(n){return t.deleteEdge(n)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();function Mr(e,t,n,i){if(e){t.push(e),i.set(e.getKey(),!0);var o=e.getNeighbors().filter(function(s){return!i.get(s.getKey())});n.push(o)}}function Er(e,t,n){var i=e.pop();i&&n.set(i.getKey(),!1),t.pop()}var $d=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,n){if(n===void 0&&(n=!1),this.edges[t.getKey()]){if(n)return this;hs(!1,"Edge has already been added before")}var i=this.getVertexByKey(t.startVertex.getKey()),o=this.getVertexByKey(t.endVertex.getKey());if(i||(this.addVertex(t.startVertex),i=this.getVertexByKey(t.startVertex.getKey())),o||(this.addVertex(t.endVertex),o=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)i.addEdge(t);else{i.addEdge(t);var s=t.clone();o.addEdge(s.reverse())}return this},e.prototype.deleteEdge=function(t,n){if(n===void 0&&(n=!1),!this.edges[t.getKey()]){if(n)return this;hs(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var i=this.getVertexByKey(t.startVertex.getKey()),o=this.getVertexByKey(t.endVertex.getKey());return i.deleteEdge(t),o.deleteEdge(t),this},e.prototype.findEdge=function(t,n){var i=this.getVertexByKey(t.getKey());return i?i.findEdge(n):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,n){return t+n.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(n){t.deleteEdge(n),n.reverse(),t.addEdge(n)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(n,i){t[n.getKey()]=i}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,n=this.getAllVertices(),i=this.getVerticesIndices(),o=Array(n.length).fill(null).map(function(){return Array(n.length).fill(1/0)});return n.forEach(function(s,r){s.getNeighbors().forEach(function(a){var c=i[a.getKey()],d=t.findEdge(s,a);d&&(o[r][c]=d.weight)})}),o},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var n,i,o;return Uo(this,function(s){switch(s.label){case 0:n=new Map,i=new Bd,i.enqueue(t),s.label=1;case 1:return i.isEmpty()?[3,4]:(o=i.dequeue(),o&&!n.has(o.getKey())?[4,o]:[3,3]);case 2:s.sent(),n.set(o.getKey(),o),o.getNeighbors().forEach(function(r){return i.enqueue(r)}),s.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var n,i,o;return Uo(this,function(s){switch(s.label){case 0:n=new Map,i=new Ko,i.push(t),s.label=1;case 1:return i.isEmpty()?[3,4]:(o=i.pop(),o&&!n.has(o.getKey())?[4,o]:[3,3]);case 2:s.sent(),n.set(o.getKey(),o),o.getNeighbors().forEach(function(r){return i.push(r)}),s.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,n){var i,o,s,r,a,c,d;return Uo(this,function(l){switch(l.label){case 0:return i=[],t!==n?[3,2]:(i.push(t),[4,i]);case 1:return l.sent(),[2];case 2:o=new Map,s=new Ko,r=new Ko,Mr(t,s,r,o),l.label=3;case 3:if(s.isEmpty())return[3,6];if(a=r.pop(),a&&a.length)c=a.shift(),r.push(a),c&&Mr(c,s,r,o);else return r.push(a),Er(s,r,o),[3,3];return d=s.peek,d!==n?[3,5]:[4,s.toArray()];case 4:l.sent(),Er(s,r,o),l.label=5;case 5:return[3,3];case 6:return[2]}})},e}();const Ld=cd(),Ca=Ld.public.appEnv;console.log("config env: ",Ca);const Fd={pro:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0x4fb259302630bf727f1b489e0597131fe4d8ccba12074bb7fedba3886c008945",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://alpha.cetus.zone",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui.cetus.zone/router_v2",aggregatorV2:{package_id:"0x640d44dbdc0ede165c7cc417d7f57f1b09648083109de7132c6b3fb15861f5ee",published_at:"0x640d44dbdc0ede165c7cc417d7f57f1b09648083109de7132c6b3fb15861f5ee"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xcec352932edc6663a118e8d64ed54da6b8107e8719603bf728f80717592cd9e8",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},pre:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui.cetus.zone/router_v2",aggregatorV2:{package_id:"0x640d44dbdc0ede165c7cc417d7f57f1b09648083109de7132c6b3fb15861f5ee",published_at:"0x640d44dbdc0ede165c7cc417d7f57f1b09648083109de7132c6b3fb15861f5ee"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xcec352932edc6663a118e8d64ed54da6b8107e8719603bf728f80717592cd9e8",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!1,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},preRoute:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xfa36bcb799278bddaf295991b2d3ce039013b1dd60dfd7183dee135fdadbc4be",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7",published_at:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7"},aggregatorUrl:"https://api-sui.cetus.zone/router1",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x7cc8461d20ad82d3851123a64bed22883199b465763ee53b1b529fba1f4e15cc",published_at:"0x9f63e8926719bcb45df55fb60b4444f4d50309bff2e85cccc1fdb91c3e4653a2",config:{pools_id:"0x68b4b6bd15aa086df8f8d94f62fb5b38817a02cc288802d1637e1febae46f545",admin_cap_id:"0x5a304d63a5421a3fbc190b3d124f7ea3cdf56b1cb8fd3e0bf4855d129075caef",package_version_id:"0xceab2289e0968f0e7172ce702af8f28a678570afa6b139e97bc344f0290672d6"}},xcetus:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"}}},test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.testnet.sui.io",fullRpcUrl:"https://fullnode.testnet.sui.io",faucetURL:"",explorerUrl:"https://explorer.sui.io/",explorerUrl1:"https://testnet.suivision.xyz",network:"testnet",networkTip:"Testnet",api:"https://api-sui.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count/v3",faucet:{faucet_display:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",faucet_router:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc"},simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x084dbc14f8f6b50e4e1d6828ebf1f93fd1b1d2502b121bc787937893793417b0",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699"}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xe26cb89a7c3bb9a00b396e278f4f1f90aae02d0da37cd4b0c4b4977ca95568ef"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",aggregatorv2Url:"https://api-sui.devcetus.com/router_v2",aggregatorV2:{package_id:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0",published_at:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0"},launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetusTokenAddress:"0x04792c459e2c20d1d48c85ab2eed98ef115d5b3e36ccf6ce8d0d3c79ca548c91::xtoken::XTOKEN",xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x20d948d640edd0c749f533d41efc5f843f212d441220324ad7959c6e1d281828",published_at:"0x20d948d640edd0c749f533d41efc5f843f212d441220324ad7959c6e1d281828",config:{dividend_manager_id:"0x13b7facb704fae1d199ff0038b8acabc253415a77d142b39189dee97d457e442",dividend_admin_id:"0x5eb78463007422d4130b21f61c180bcd190819b7792f56e00a61df3b8fb928ef",dividend_settle_id:"0x495095e13a170ff494d242ae44ac2c7453011ca6c33cff27498010105e10e4b4"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"0xb58a7b66d3d007d9977940598187104084951bd8fdabb74f03f68151a3e27710",published_at:"0x72eefdfad9c79ef4c69748f9fcaf47874779704475d9ce35a29cc0ff1b9ce29f",config:{xtoken_manager_id:"0x51c6f72ecbc819aeee851b5e2d79cf6100e8e2b44e7ca55b06bd81bd163f677f",lock_manager_id:"0x92cb9f128ae2f823401c2104136a96cde6c201d6a133a1c7b5c67f4400711a10",lock_handle_id:"0x5cc82e84cf911a2d904997c7ef3e2e98eb3fea0bc43308f7b8c52bf0aff478b9"}},xtoken_dividends:{package_id:"0xdc899c0b05327036990f08cd70b99ef92c4288b784cbb82088c099d109a30226",published_at:"0x4677c8990eab6036d7059be96ad82173efd88775be36e277f4543155da4cbb9e",config:{dividend_manager_id:"0xaf17350657fb26a972d088bfb9db4491d11bf5533b7a5272ab6aa4a1badee749",dividend_admin_id:"0x8c0993c6ea9574cf6a3743698a0d6a46c7bbc4bab668d28b51aa947ad34edfc2",dividend_settle_id:"0xd938930b4ad7ef0cd85d8ae640d6ed7fd5cfcb64101994b69b88aa240dba1cb0"}},token_faucet:{package_id:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5",published_at:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5"},booster:{package_id:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",published_at:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",config:{booster_config_id:"0xeba41bf99086b0140713d7dd102e1374281a608bf524cc38f62c1d2bd792715c",booster_pool_handle:"0x01f9ba86234f661157366b8393eaeba82c8b78bf40fd9728604c3cc142811629"}},liquidity_stratefy:{package_id:"0x9b894cff0422a6acc41dadab3c8e2f52da7b5f0b366821a80d62eaf650565c3f",published_at:"0xc76c30d0a7b3e0a4372b6e7f24d73ef4d7740eaf920789e658795502c2fd252a",config:{master_manger_id:"0x562f2c9a90ffc3cdbe492b8cedb2e911954c81e8d20b47c4d2b0b2782bd7cad2",master_liquidity_handle:"0x323179fcd8fc2c01f146a902aaec56221e791fb0f1965907c97b25cba5eac515"}},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0xe1fb9fc8542a9e7768b0a701bf0c11b595201fb2492791a03eb9c0bb319297f3",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a",haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",version:1,config:{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:"::cert::CERT"}},aftermath:{package_id:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",published_at:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",version:1,config:{staked_sui_vault:"0xe498a8c07ec62200c519a0092eda233abdab879e8f332c11bdc1819eb7b12fbb",referral_vault:"0x8d357115058f22976cd01c5415116d9aca806d1ded37eecd75d87978f404e927",safe:"0x38710a6e0bd885c158e52ec7a42c8a9a1826c6696b626b4a5e2d1dcb15cfd9b7",validator_address:"0x9336c4c9d891e263cfac99adc397853a7392e5cf84cbd5df92207a57c7fbdadc",coin_type:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4::afsui::AFSUI"}}}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC",toCoin:"0x2::sui::SUI"},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xc4c250fa155fb27668650fd96aeaade6a3e7c669395f147b05747a5d9eb35795",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",config:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"}},cetus_integrate2:{package_id:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c",published_at:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c"}}},pre_test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},token:{token_display:"0x481fb627bf18bc93c02c41ada3cc8b574744ef23c9d5e3136637ae3076e71562",config:{coin_registry_id:"0xe0b8cb7e56d465965cac5c5fe26cba558de35d88b9ec712c40f131f72c600151",pool_registry_id:"0xab40481f926e686455edf819b4c6485fbbf147a42cf3b95f72ed88c94577e67a",coin_list_owner:"0x1f6510ee7d8e2b39261bad012f0be0adbecfd75199450b7cbf28efab42dad083",pool_list_owner:"0x6de133b609ea815e1f6a4d50785b798b134f567ec1f4ee113ae73f6900b4012d"}},clmm:{clmm_display:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",clmm_router:"0x780e590a9354f5bcb429af4578c742aaa0ee20ab942bb2bbd161fbde4b64b08c",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},launchpad:{ido_display:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",ido_router:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",config_display:"0xc9b958492e4be73e0af4daa48101bc7ab2a7ab7c67585938ea3535929fc193fa",config:{pools_id:"0x7b96aea4d695996635265e2cc41d5c5f5c4cd70f36763e41b2abf2fa1eff866f",admin_cap_id:"0x342f4b272ff5abcaacc770a5972728b154a5e74835fa36b2340ad94895184acb",config_cap_id:"0xef2a813b8c1bbaf9470fff7df0fd0febebdc6e2bbd3d7bf9a917734af7893428",config_pools_id:"0x04b6e8de80f325bdf5963dc54f324c3319b471f2f93163ebc982bee0d9b38336"}},xcetus:{xcetus_display:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",xcetus_router:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",dividends_display:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",dividends_router:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",cetus_faucet:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49",dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5"}},hasCreatePool:!1,hasNotifi:!1}},testnet_external:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0xc7c40602f81eee198f472e14c87cb9c7186496064adba06cef1768c8b1785512",config:{coin_registry_id:"0xde9a5123749136ca9fe05b88777e322f2161fe4aa71e9c575d5e27a31b815d40",pool_registry_id:"0x7b7b399344838363ec96611f133c77b98042404559e326fd289885b88848a3c5",coin_list_owner:"0xc93e168a9361b5443fef27dbbb95a023337c6bfd082fdd920d658f4f9147d801",pool_list_owner:"0x36d796de9529007373fd2e34311511a8ca4eaef2bf7ea65f65ab68a1bc1de092"}},clmm:{clmm_display:"0x837dddad95c6741474cde3e414a2eebccbeae81d0b378f193d00381bdaf0da62",clmm_router:"0x32ba8c0298964e26161b3b44375ac39eeab6b29207e00c5f44368426096eb902",config:{pools_id:"0xc8407fc5dfec8d7b7014ee4d244dbe4eb456bfa6a7878e88c9d4bc947b2c2d87",global_config_id:"0x43e2925f7c5bed04b612cc66c53a850e280a46704ce12cd2f25420b537e23f9d",global_vault_id:"0x435c9725c4026206002a5a4004762316a53891f21a10c695311074482e52757e"}},launchpad:{ido_display:"",ido_router:"",lock_display:"",lock_router:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:"",lock_manager_id:""}},xcetus:{xcetus_display:"",xcetus_router:"",dividends_display:"",dividends_router:"",cetus_faucet:"",config:{xcetus_manager_id:"",lock_manager_id:"",dividend_manager_id:""}},hasCreatePool:!0,hasNotifi:!1}},local:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"http://192.168.1.41:9000",faucetURL:"http://192.168.1.41:9123/gas",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x61353a797a3d7f9c5522641bf824d730272260bcf66c7fcaf36a50243418caca",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"",config:{coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""}},clmm:{clmm_display:"0x33e0056fdbd9444c20302ce4141eaf5ec66fe864b62d8c0e3ee3bb1d138ee445",clmm_router:"0x306efa18b1a70af5007aaccd3b228e4f97f5596bf20c3a2d7b6321dfe8e30765",config:{pools_id:"0xae24565ffac1eb9f2fcb03b1dc21c21d1ce2a992d13a1a58e51d28293249d21c",global_config_id:"0xb8bd0870a43a75c55690a8ffbc13682ae7e0a8254348524963657474342c20b4",global_vault_id:"0x639c2d2d068df99602a9ef014b000df26b0312c07cb06065992cac911e1c376d"}},launchpad:{ido_display:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",ido_router:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",lock_display:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",lock_router:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",config:{pools_id:"0x1b3a62d143ac08dee37670eea58e714ab7cd501a396060bd2caf7a77fee88dfa",admin_cap_id:"0x0cb7daf2484c38e4a183813b8ad51b6ed664d135b7897e72be095768c90df911",config_cap_id:"0x40f0cee72c6e86d5a7b0e013a18cad8bf567bb70075b4a0f1c63eab8953a3dfd",lock_manager_id:"0x23954bf7d5c7880b50a369ee439a11ab771b7e0079a042645c4920d5e618b898"}},xwhale:{xwhale_display:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",xwhale_router:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",dividends_display:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",dividends_router:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",booster_display:"",booster_router:"",whale_faucet:"0xb0845bcf2f985e6ea5b401218598212e11f915a0c4d7afd1ed6e04b83e7d6310",config:{xwhale_manager_id:"0x46b2a60ee784180534ea2a6568ca510b488ea190f822cab8a9d38fb01b8e6421",lock_manager_id:"0x253e34da0542134e39b3c5dade1f5437d1b6ef6e90adfaa014186b456b6d7ffd",dividend_manager_id:"0xced885ada26d894f30efc236303caa500c994a25db5b18ee01e7664729cb983c"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},dev:{Aptos:{liquidswapDeployer:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37",faucetObjectId:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29",fetcher:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",clmmIntegrate:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",TokenDeployer:"0xc50b243a7180dfad9afd7dff8451c7b16cf27a92b6816f521b1f3c6d0c5397e3",IntegerMate:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.devnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"devnet",networkTip:"Devnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{liquidswapDeployer:"0x2b8f54bf724fa62789299569210d6c94758dd636",globalPauseStatusObjectId:"0x877cd08c02a2faa110a020f4f203304b114d76d2",faucetObjectId:"0x61df0e8caaf7b241d137fdc97906e3ca6bd68cca",rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",ammSite:"https://cetus-pre.netlify.app",api:"https://api.devcetus.zone",currentChainTokenAddress:"0x2::sui::SUI",hasCreatePool:!0,hasNotifi:!1}}},r_={...Fd[Ca]};function Ud(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var r=e.length,a=e.charAt(0),c=Math.log(r)/Math.log(256),d=Math.log(256)/Math.log(r);function l(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var y=0,T=0,O=0,j=m.length;O!==j&&m[O]===0;)O++,y++;for(var M=(j-O)*d+1>>>0,B=new Uint8Array(M);O!==j;){for(var $=m[O],J=0,z=M-1;($!==0||J<T)&&z!==-1;z--,J++)$+=256*B[z]>>>0,B[z]=$%r>>>0,$=$/r>>>0;if($!==0)throw new Error("Non-zero carry");T=J,O++}for(var re=M-T;re!==M&&B[re]===0;)re++;for(var ge=a.repeat(y);re<M;++re)ge+=e.charAt(B[re]);return ge}function h(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var y=0,T=0,O=0;m[y]===a;)T++,y++;for(var j=(m.length-y)*c+1>>>0,M=new Uint8Array(j);m[y];){var B=t[m.charCodeAt(y)];if(B===255)return;for(var $=0,J=j-1;(B!==0||$<O)&&J!==-1;J--,$++)B+=r*M[J]>>>0,M[J]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");O=$,y++}for(var z=j-O;z!==j&&M[z]===0;)z++;for(var re=new Uint8Array(T+(j-z)),ge=T;z!==j;)re[ge++]=M[z++];return re}function _(m){var y=h(m);if(y)return y;throw new Error("Non-base"+r+" character")}return{encode:l,decodeUnsafe:h,decode:_}}var Kd=Ud;const Vd=Kd,zd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Aa=Vd(zd);function Gn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Gd(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Sa(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Wd(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Gn(e.outputLen),Gn(e.blockLen)}function ps(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ta(e,t){Sa(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Xd={number:Gn,bool:Gd,bytes:Sa,hash:Wd,exists:ps,output:Ta},a_=Xd,Vo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ds=e=>e instanceof Uint8Array,Ji=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),c_=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),d_=(e,t)=>e<<32-t|e>>>t,Hd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Hd)throw new Error("Non little-endian hardware is not supported");const Jd=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l_(e){if(!Ds(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Jd[e[n]];return t}function u_(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let i=0;i<n.length;i++){const o=i*2,s=e.slice(o,o+2),r=Number.parseInt(s,16);if(Number.isNaN(r)||r<0)throw new Error("Invalid byte sequence");n[i]=r}return n}function Zd(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Wn(e){if(typeof e=="string"&&(e=Zd(e)),!Ds(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function f_(...e){const t=new Uint8Array(e.reduce((i,o)=>i+o.length,0));let n=0;return e.forEach(i=>{if(!Ds(i))throw new Error("Uint8Array expected");t.set(i,n),n+=i.length}),t}class Qd{clone(){return this._cloneInto()}}const Yd={}.toString;function h_(e,t){if(t!==void 0&&Yd.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function p_(e){const t=i=>e().update(Wn(i)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function el(e){const t=(i,o)=>e(o).update(Wn(i)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=i=>e(i),t}function __(e=32){if(Vo&&typeof Vo.getRandomValues=="function")return Vo.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const tl=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class nl extends Qd{constructor(t,n,i={},o,s,r){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Gn(t),Gn(n),Gn(o),n<0||n>o)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>o))throw new Error(`key must be up 1..${o} byte long or undefined`);if(i.salt!==void 0&&i.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(i.personalization!==void 0&&i.personalization.length!==r)throw new Error(`personalization must be ${r} byte long or undefined`);this.buffer32=Ji(this.buffer=new Uint8Array(t))}update(t){ps(this);const{blockLen:n,buffer:i,buffer32:o}=this;t=Wn(t);const s=t.length,r=t.byteOffset,a=t.buffer;for(let c=0;c<s;){this.pos===n&&(this.compress(o,0,!1),this.pos=0);const d=Math.min(n-this.pos,s-c),l=r+c;if(d===n&&!(l%4)&&c+d<s){const h=new Uint32Array(a,l,Math.floor((s-c)/4));for(let _=0;c+n<s;_+=o.length,c+=n)this.length+=n,this.compress(h,_,!1);continue}i.set(t.subarray(c,c+d),this.pos),this.pos+=d,this.length+=d,c+=d}return this}digestInto(t){ps(this),Ta(t,this);const{pos:n,buffer32:i}=this;this.finished=!0,this.buffer.subarray(n).fill(0),this.compress(i,0,!0);const o=Ji(t);this.get().forEach((s,r)=>o[r]=s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){const{buffer:n,length:i,finished:o,destroyed:s,outputLen:r,pos:a}=this;return t||(t=new this.constructor({dkLen:r})),t.set(...this.get()),t.length=i,t.finished=o,t.destroyed=s,t.outputLen=r,t.buffer.set(n),t.pos=a,t}}const Oi=BigInt(2**32-1),_s=BigInt(32);function xa(e,t=!1){return t?{h:Number(e&Oi),l:Number(e>>_s&Oi)}:{h:Number(e>>_s&Oi)|0,l:Number(e&Oi)|0}}function il(e,t=!1){let n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:r}=xa(e[o],t);[n[o],i[o]]=[s,r]}return[n,i]}const ol=(e,t)=>BigInt(e>>>0)<<_s|BigInt(t>>>0),sl=(e,t,n)=>e>>>n,rl=(e,t,n)=>e<<32-n|t>>>n,al=(e,t,n)=>e>>>n|t<<32-n,cl=(e,t,n)=>e<<32-n|t>>>n,dl=(e,t,n)=>e<<64-n|t>>>n-32,ll=(e,t,n)=>e>>>n-32|t<<64-n,ul=(e,t)=>t,fl=(e,t)=>e,hl=(e,t,n)=>e<<n|t>>>32-n,pl=(e,t,n)=>t<<n|e>>>32-n,_l=(e,t,n)=>t<<n-32|e>>>64-n,bl=(e,t,n)=>e<<n-32|t>>>64-n;function ml(e,t,n,i){const o=(t>>>0)+(i>>>0);return{h:e+n+(o/2**32|0)|0,l:o|0}}const gl=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),yl=(e,t,n,i)=>t+n+i+(e/2**32|0)|0,wl=(e,t,n,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),vl=(e,t,n,i,o)=>t+n+i+o+(e/2**32|0)|0,kl=(e,t,n,i,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0)+(o>>>0),Cl=(e,t,n,i,o,s)=>t+n+i+o+s+(e/2**32|0)|0,Al={fromBig:xa,split:il,toBig:ol,shrSH:sl,shrSL:rl,rotrSH:al,rotrSL:cl,rotrBH:dl,rotrBL:ll,rotr32H:ul,rotr32L:fl,rotlSH:hl,rotlSL:pl,rotlBH:_l,rotlBL:bl,add:ml,add3L:gl,add3H:yl,add4L:wl,add4H:vl,add5H:Cl,add5L:kl},St=Al,lt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),U=new Uint32Array(32);function bn(e,t,n,i,o,s){const r=o[s],a=o[s+1];let c=U[2*e],d=U[2*e+1],l=U[2*t],h=U[2*t+1],_=U[2*n],m=U[2*n+1],y=U[2*i],T=U[2*i+1],O=St.add3L(c,l,r);d=St.add3H(O,d,h,a),c=O|0,{Dh:T,Dl:y}={Dh:T^d,Dl:y^c},{Dh:T,Dl:y}={Dh:St.rotr32H(T,y),Dl:St.rotr32L(T,y)},{h:m,l:_}=St.add(m,_,T,y),{Bh:h,Bl:l}={Bh:h^m,Bl:l^_},{Bh:h,Bl:l}={Bh:St.rotrSH(h,l,24),Bl:St.rotrSL(h,l,24)},U[2*e]=c,U[2*e+1]=d,U[2*t]=l,U[2*t+1]=h,U[2*n]=_,U[2*n+1]=m,U[2*i]=y,U[2*i+1]=T}function mn(e,t,n,i,o,s){const r=o[s],a=o[s+1];let c=U[2*e],d=U[2*e+1],l=U[2*t],h=U[2*t+1],_=U[2*n],m=U[2*n+1],y=U[2*i],T=U[2*i+1],O=St.add3L(c,l,r);d=St.add3H(O,d,h,a),c=O|0,{Dh:T,Dl:y}={Dh:T^d,Dl:y^c},{Dh:T,Dl:y}={Dh:St.rotrSH(T,y,16),Dl:St.rotrSL(T,y,16)},{h:m,l:_}=St.add(m,_,T,y),{Bh:h,Bl:l}={Bh:h^m,Bl:l^_},{Bh:h,Bl:l}={Bh:St.rotrBH(h,l,63),Bl:St.rotrBL(h,l,63)},U[2*e]=c,U[2*e+1]=d,U[2*t]=l,U[2*t+1]=h,U[2*n]=_,U[2*n+1]=m,U[2*i]=y,U[2*i+1]=T}class Sl extends nl{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=lt[0]|0,this.v0h=lt[1]|0,this.v1l=lt[2]|0,this.v1h=lt[3]|0,this.v2l=lt[4]|0,this.v2h=lt[5]|0,this.v3l=lt[6]|0,this.v3h=lt[7]|0,this.v4l=lt[8]|0,this.v4h=lt[9]|0,this.v5l=lt[10]|0,this.v5h=lt[11]|0,this.v6l=lt[12]|0,this.v6h=lt[13]|0,this.v7l=lt[14]|0,this.v7h=lt[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|65536|1<<24,t.salt){const i=Ji(Wn(t.salt));this.v4l^=i[0],this.v4h^=i[1],this.v5l^=i[2],this.v5h^=i[3]}if(t.personalization){const i=Ji(Wn(t.personalization));this.v6l^=i[0],this.v6h^=i[1],this.v7l^=i[2],this.v7h^=i[3]}if(t.key){const i=new Uint8Array(this.blockLen);i.set(Wn(t.key)),this.update(i)}}get(){let{v0l:t,v0h:n,v1l:i,v1h:o,v2l:s,v2h:r,v3l:a,v3h:c,v4l:d,v4h:l,v5l:h,v5h:_,v6l:m,v6h:y,v7l:T,v7h:O}=this;return[t,n,i,o,s,r,a,c,d,l,h,_,m,y,T,O]}set(t,n,i,o,s,r,a,c,d,l,h,_,m,y,T,O){this.v0l=t|0,this.v0h=n|0,this.v1l=i|0,this.v1h=o|0,this.v2l=s|0,this.v2h=r|0,this.v3l=a|0,this.v3h=c|0,this.v4l=d|0,this.v4h=l|0,this.v5l=h|0,this.v5h=_|0,this.v6l=m|0,this.v6h=y|0,this.v7l=T|0,this.v7h=O|0}compress(t,n,i){this.get().forEach((c,d)=>U[d]=c),U.set(lt,16);let{h:o,l:s}=St.fromBig(BigInt(this.length));U[24]=lt[8]^s,U[25]=lt[9]^o,i&&(U[28]=~U[28],U[29]=~U[29]);let r=0;const a=tl;for(let c=0;c<12;c++)bn(0,4,8,12,t,n+2*a[r++]),mn(0,4,8,12,t,n+2*a[r++]),bn(1,5,9,13,t,n+2*a[r++]),mn(1,5,9,13,t,n+2*a[r++]),bn(2,6,10,14,t,n+2*a[r++]),mn(2,6,10,14,t,n+2*a[r++]),bn(3,7,11,15,t,n+2*a[r++]),mn(3,7,11,15,t,n+2*a[r++]),bn(0,5,10,15,t,n+2*a[r++]),mn(0,5,10,15,t,n+2*a[r++]),bn(1,6,11,12,t,n+2*a[r++]),mn(1,6,11,12,t,n+2*a[r++]),bn(2,7,8,13,t,n+2*a[r++]),mn(2,7,8,13,t,n+2*a[r++]),bn(3,4,9,14,t,n+2*a[r++]),mn(3,4,9,14,t,n+2*a[r++]);this.v0l^=U[0]^U[16],this.v0h^=U[1]^U[17],this.v1l^=U[2]^U[18],this.v1h^=U[3]^U[19],this.v2l^=U[4]^U[20],this.v2h^=U[5]^U[21],this.v3l^=U[6]^U[22],this.v3h^=U[7]^U[23],this.v4l^=U[8]^U[24],this.v4h^=U[9]^U[25],this.v5l^=U[10]^U[26],this.v5h^=U[11]^U[27],this.v6l^=U[12]^U[28],this.v6h^=U[13]^U[29],this.v7l^=U[14]^U[30],this.v7h^=U[15]^U[31],U.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Tl=el(e=>new Sl(e)),fo=e=>Aa.encode(e),yi=e=>Aa.decode(e);function tn(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const zo=8192;function Ct(e){if(e.length<zo)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=zo){const i=e.slice(n,n+zo);t+=String.fromCharCode(...i)}return btoa(t)}function Ia(e){var o;const t=e.startsWith("0x")?e.slice(2):e,i=((o=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:o.map(s=>parseInt(s,16)))??[];return Uint8Array.from(i)}function wi(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function Rs(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function xl(e){let t=0,n=0,i=0;for(;;){let o=e[i];if(i+=1,t|=(o&127)<<n,!(o&128))break;n+=7}return{value:t,length:i}}class Il{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),i=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+i).toString(10)}read128(){let t=BigInt(this.read64()),i=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+i).toString(10)}read256(){let t=BigInt(this.read128()),i=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+i).toString(10)}readBytes(t){let n=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,n,t);return this.shift(t),i}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t),{value:i,length:o}=xl(n);return this.shift(o),i}readVec(t){let n=this.readULEB(),i=[];for(let o=0;o<n;o++)i.push(t(this,o,n));return i}}function Pl(e,t){switch(t){case"base58":return fo(e);case"base64":return Ct(e);case"hex":return wi(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Pa(e,t=["<",">"]){const[n,i]=t,o=[];let s="",r=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===n&&r++,c===i&&r--,r===0&&c===","){o.push(s.trim()),s="";continue}s+=c}return o.push(s.trim()),o}class Ol{constructor({initialSize:t=1024,maxSize:n=1/0,allocateSize:i=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=n,this.allocateSize=i,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const n=this.bytePosition+t;if(n>this.size){const i=Math.min(this.maxSize,this.size+this.allocateSize);if(n>i)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=i;const o=new ArrayBuffer(this.size);new Uint8Array(o).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(o)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return Go(BigInt(t),8).forEach(n=>this.write8(n)),this}write128(t){return Go(BigInt(t),16).forEach(n=>this.write8(n)),this}write256(t){return Go(BigInt(t),32).forEach(n=>this.write8(n)),this}writeULEB(t){return Rs(t).forEach(n=>this.write8(n)),this}writeVec(t,n){return this.writeULEB(t.length),Array.from(t).forEach((i,o)=>n(this,i,o,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return Pl(this.toBytes(),t)}}function Go(e,t){let n=new Uint8Array(t),i=0;for(;e>0;)n[i]=Number(e%BigInt(256)),e=e/BigInt(256),i+=1;return n}var Oa=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ut=(e,t,n)=>(Oa(e,t,"read from private field"),n?n.call(e):t.get(e)),Zi=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Qi=(e,t,n,i)=>(Oa(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Ln,ai,Fi,Cn;const ja=class{constructor(e){Zi(this,Ln,void 0),Zi(this,ai,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Qi(this,Ln,e.write),Qi(this,ai,e.serialize??((t,n)=>{const i=new Ol({initialSize:this.serializedSize(t)??void 0,...n});return Ut(this,Ln).call(this,t,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),Ut(this,Ln).call(this,e,t)}serialize(e,t){return this.validate(e),new jl(this,Ut(this,ai).call(this,e,t))}parse(e){const t=new Il(e);return this.read(t)}fromHex(e){return this.parse(Ia(e))}fromBase58(e){return this.parse(yi(e))}fromBase64(e){return this.parse(tn(e))}transform({name:e,input:t,output:n,validate:i}){return new ja({name:e??this.name,read:o=>n(this.read(o)),write:(o,s)=>Ut(this,Ln).call(this,t(o),s),serializedSize:o=>this.serializedSize(t(o)),serialize:(o,s)=>Ut(this,ai).call(this,t(o),s),validate:o=>{i==null||i(o),this.validate(t(o))}})}};let un=ja;Ln=new WeakMap;ai=new WeakMap;const Ma=Symbol.for("@mysten/serialized-bcs");function Ea(e){return!!e&&typeof e=="object"&&e[Ma]===!0}class jl{constructor(t,n){Zi(this,Fi,void 0),Zi(this,Cn,void 0),Qi(this,Fi,t),Qi(this,Cn,n)}get[Ma](){return!0}toBytes(){return Ut(this,Cn)}toHex(){return wi(Ut(this,Cn))}toBase64(){return Ct(Ut(this,Cn))}toBase58(){return fo(Ut(this,Cn))}parse(){return Ut(this,Fi).parse(Ut(this,Cn))}}Fi=new WeakMap;Cn=new WeakMap;function Yi({size:e,...t}){return new un({...t,serializedSize:()=>e})}function Wo({readMethod:e,writeMethod:t,...n}){return Yi({...n,read:i=>i[e](),write:(i,o)=>o[t](i),validate:i=>{var o;if(i<0||i>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${i}. Expected value in range 0-${n.maxValue}`);(o=n.validate)==null||o.call(n,i)}})}function Xo({readMethod:e,writeMethod:t,...n}){return Yi({...n,read:i=>i[e](),write:(i,o)=>o[t](BigInt(i)),validate:i=>{var s;const o=BigInt(i);if(o<0||o>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${o}. Expected value in range 0-${n.maxValue}`);(s=n.validate)==null||s.call(n,o)}})}function Ml({serialize:e,...t}){const n=new un({...t,serialize:e,write:(i,o)=>{for(const s of n.serialize(i).toBytes())o.write8(s)}});return n}function El({toBytes:e,fromBytes:t,...n}){return new un({...n,read:i=>{const o=i.readULEB(),s=i.readBytes(o);return t(s)},write:(i,o)=>{const s=e(i);o.writeULEB(s.length);for(let r=0;r<s.length;r++)o.write8(s[r])},serialize:i=>{const o=e(i),s=Rs(o.length),r=new Uint8Array(s.length+o.length);return r.set(s,0),r.set(o,s.length),r},validate:i=>{var o;if(typeof i!="string")throw new TypeError(`Invalid ${n.name} value: ${i}. Expected string`);(o=n.validate)==null||o.call(n,i)}})}function Bl(e){let t=null;function n(){return t||(t=e()),t}return new un({name:"lazy",read:i=>n().read(i),serializedSize:i=>n().serializedSize(i),write:(i,o)=>n().write(i,o),serialize:(i,o)=>n().serialize(i,o).toBytes()})}const x={u8(e){return Wo({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return Wo({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return Wo({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return Xo({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return Xo({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return Xo({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return Yi({name:"bool",size:1,read:t=>t.read8()===1,write:(t,n)=>n.write8(t?1:0),...e,validate:t=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return Ml({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(Rs(t)),...e})},bytes(e,t){return Yi({name:`bytes[${e}]`,size:e,read:n=>n.readBytes(e),write:(n,i)=>{for(let o=0;o<e;o++)i.write8(n[o]??0)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},string(e){return El({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,n){return new un({name:`${t.name}[${e}]`,read:i=>{const o=new Array(e);for(let s=0;s<e;s++)o[s]=t.read(i);return o},write:(i,o)=>{for(const s of i)t.write(s,o)},...n,validate:i=>{var o;if((o=n==null?void 0:n.validate)==null||o.call(n,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e)throw new TypeError(`Expected array of length ${e}, found ${i.length}`)}})},option(e){return x.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>t.$kind==="Some"?t.Some:null})},vector(e,t){return new un({name:`vector<${e.name}>`,read:n=>{const i=n.readULEB(),o=new Array(i);for(let s=0;s<i;s++)o[s]=e.read(n);return o},write:(n,i)=>{i.writeULEB(n.length);for(const o of n)e.write(o,i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(e,t){return new un({name:`(${e.map(n=>n.name).join(", ")})`,serializedSize:n=>{let i=0;for(let o=0;o<e.length;o++){const s=e[o].serializedSize(n[o]);if(s==null)return null;i+=s}return i},read:n=>{const i=[];for(const o of e)i.push(o.read(n));return i},write:(n,i)=>{for(let o=0;o<e.length;o++)e[o].write(n[o],i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}})},struct(e,t,n){const i=Object.entries(t);return new un({name:e,serializedSize:o=>{let s=0;for(const[r,a]of i){const c=a.serializedSize(o[r]);if(c==null)return null;s+=c}return s},read:o=>{const s={};for(const[r,a]of i)s[r]=a.read(o);return s},write:(o,s)=>{for(const[r,a]of i)a.write(o[r],s)},...n,validate:o=>{var s;if((s=n==null?void 0:n.validate)==null||s.call(n,o),typeof o!="object"||o==null)throw new TypeError(`Expected object, found ${typeof o}`)}})},enum(e,t,n){const i=Object.entries(t);return new un({name:e,read:o=>{const s=o.readULEB(),[r,a]=i[s];return{[r]:(a==null?void 0:a.read(o))??!0,$kind:r}},write:(o,s)=>{const[r,a]=Object.entries(o).filter(([c])=>Object.hasOwn(t,c))[0];for(let c=0;c<i.length;c++){const[d,l]=i[c];if(d===r){s.writeULEB(c),l==null||l.write(a,s);return}}},...n,validate:o=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,o),typeof o!="object"||o==null)throw new TypeError(`Expected object, found ${typeof o}`);const s=Object.keys(o).filter(c=>o[c]!==void 0&&Object.hasOwn(t,c));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${e}}`);const[r]=s;if(!Object.hasOwn(t,r))throw new TypeError(`Invalid enum variant ${r}`)}})},map(e,t){return x.vector(x.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:n=>[...n.entries()],output:n=>{const i=new Map;for(const[o,s]of n)i.set(o,s);return i}})},lazy(e){return Bl(e)}},Dl=32;function Br(e){try{return yi(e).length===Dl}catch{return!1}}const Ns=32;function Zt(e){return ql(e)&&$l(e)===Ns}function ci(e){return Zt(e)}function Rl(e){return e.includes("::")?Ba(e):e}function Ba(e){const[t,n]=e.split("::"),i=e.slice(t.length+n.length+4),o=i.includes("<")?i.slice(0,i.indexOf("<")):i,s=i.includes("<")?Pa(i.slice(i.indexOf("<")+1,i.lastIndexOf(">"))).map(r=>Rl(r.trim())):[];return{address:oe(t),module:n,name:o,typeParams:s}}function Nl(e){const{address:t,module:n,name:i,typeParams:o}=typeof e=="string"?Ba(e):e,s=(o==null?void 0:o.length)>0?`<${o.map(r=>typeof r=="string"?r:Nl(r)).join(",")}>`:"";return`${t}::${n}::${i}${s}`}function oe(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(Ns*2,"0")}`}function he(e,t=!1){return oe(e,t)}function ql(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function $l(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const Da=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Ra=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,Ll=235;function b_(e){return e.length>Ll?!1:e.includes("@")?Da.test(e):Ra.test(e)}function Fl(e,t="at"){const n=e.toLowerCase();let i;if(n.includes("@")){if(!Da.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[o,s]=n.split("@");i=[...o?o.split("."):[],s]}else{if(!Ra.test(n))throw new Error(`Invalid SuiNS name ${e}`);i=n.split(".").slice(0,-1)}return t==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}const m_=9,g_=BigInt(1e9),Ul="0x1",Na="0x2",y_="0x3",w_=he("0x6"),v_="sui_system",Kl=`${Na}::sui::SUI`,k_=he("0x5"),Vl=/^vector<(.+)>$/,zl=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Yt{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const i=t.match(Vl);if(i)return{vector:Yt.parseFromStr(i[1],n)};const o=t.match(zl);if(o)return{struct:{address:n?oe(o[1]):o[1],module:o[2],name:o[3],typeParams:o[5]===void 0?[]:Yt.parseStructTypeArgs(o[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return Pa(t).map(i=>Yt.parseFromStr(i,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${Yt.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,i=n.typeParams.map(Yt.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}}function Gl(e){return x.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function Wl(e){return x.enum("Option",{None:null,Some:e})}const Se=x.bytes(Ns).transform({validate:e=>{const t=typeof e=="string"?e:wi(e);if(!t||!Zt(oe(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?Ia(oe(e)):e,output:e=>oe(wi(e))}),zt=x.vector(x.u8()).transform({name:"ObjectDigest",input:e=>yi(e),output:e=>fo(new Uint8Array(e)),validate:e=>{if(yi(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Bt=x.struct("SuiObjectRef",{objectId:Se,version:x.u64(),digest:zt}),qa=x.struct("SharedObjectRef",{objectId:Se,initialSharedVersion:x.u64(),mutable:x.bool()}),$a=x.enum("ObjectArg",{ImmOrOwnedObject:Bt,SharedObject:qa,Receiving:Bt}),La=x.enum("CallArg",{Pure:x.struct("Pure",{bytes:x.vector(x.u8()).transform({input:e=>typeof e=="string"?tn(e):e,output:e=>Ct(new Uint8Array(e))})}),Object:$a}),qs=x.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:x.lazy(()=>qs),struct:x.lazy(()=>Ga),u16:null,u32:null,u256:null}),$s=qs.transform({input:e=>typeof e=="string"?Yt.parseFromStr(e,!0):e,output:e=>Yt.tagToString(e)}),Jt=x.enum("Argument",{GasCoin:null,Input:x.u16(),Result:x.u16(),NestedResult:x.tuple([x.u16(),x.u16()])}),Fa=x.struct("ProgrammableMoveCall",{package:Se,module:x.string(),function:x.string(),typeArguments:x.vector($s),arguments:x.vector(Jt)}),Ua=x.enum("Command",{MoveCall:Fa,TransferObjects:x.struct("TransferObjects",{objects:x.vector(Jt),address:Jt}),SplitCoins:x.struct("SplitCoins",{coin:Jt,amounts:x.vector(Jt)}),MergeCoins:x.struct("MergeCoins",{destination:Jt,sources:x.vector(Jt)}),Publish:x.struct("Publish",{modules:x.vector(x.vector(x.u8()).transform({input:e=>typeof e=="string"?tn(e):e,output:e=>Ct(new Uint8Array(e))})),dependencies:x.vector(Se)}),MakeMoveVec:x.struct("MakeMoveVec",{type:Wl($s).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:x.vector(Jt)}),Upgrade:x.struct("Upgrade",{modules:x.vector(x.vector(x.u8()).transform({input:e=>typeof e=="string"?tn(e):e,output:e=>Ct(new Uint8Array(e))})),dependencies:x.vector(Se),package:Se,ticket:Jt})}),Ka=x.struct("ProgrammableTransaction",{inputs:x.vector(La),commands:x.vector(Ua)}),Va=x.enum("TransactionKind",{ProgrammableTransaction:Ka,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),za=x.enum("TransactionExpiration",{None:null,Epoch:Gl()}),Ga=x.struct("StructTag",{address:Se,module:x.string(),name:x.string(),typeParams:x.vector(qs)}),Wa=x.struct("GasData",{payment:x.vector(Bt),owner:Se,price:x.u64(),budget:x.u64()}),Xa=x.struct("TransactionDataV1",{kind:Va,sender:Se,gasData:Wa,expiration:za}),Ha=x.enum("TransactionData",{V1:Xa}),Ja=x.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Za=x.enum("IntentVersion",{V0:null}),Qa=x.enum("AppId",{Sui:null}),Ya=x.struct("Intent",{scope:Ja,version:Za,appId:Qa});function ec(e){return x.struct(`IntentMessage<${e.name}>`,{intent:Ya,value:e})}const tc=x.enum("CompressedSignature",{ED25519:x.fixedArray(64,x.u8()),Secp256k1:x.fixedArray(64,x.u8()),Secp256r1:x.fixedArray(64,x.u8()),ZkLogin:x.vector(x.u8())}),nc=x.enum("PublicKey",{ED25519:x.fixedArray(32,x.u8()),Secp256k1:x.fixedArray(33,x.u8()),Secp256r1:x.fixedArray(33,x.u8()),ZkLogin:x.vector(x.u8())}),ic=x.struct("MultiSigPkMap",{pubKey:nc,weight:x.u8()}),oc=x.struct("MultiSigPublicKey",{pk_map:x.vector(ic),threshold:x.u16()}),Xl=x.struct("MultiSig",{sigs:x.vector(tc),bitmap:x.u16(),multisig_pk:oc}),Hl=x.vector(x.u8()).transform({input:e=>typeof e=="string"?tn(e):e,output:e=>Ct(new Uint8Array(e))}),sc=x.struct("SenderSignedTransaction",{intentMessage:ec(Ha),txSignatures:x.vector(Hl)}),Jl=x.vector(sc,{name:"SenderSignedData"}),Zl=x.enum("PackageUpgradeError",{UnableToFetchPackage:x.struct("UnableToFetchPackage",{packageId:Se}),NotAPackage:x.struct("NotAPackage",{objectId:Se}),IncompatibleUpgrade:null,DigestDoesNotMatch:x.struct("DigestDoesNotMatch",{digest:x.vector(x.u8())}),UnknownUpgradePolicy:x.struct("UnknownUpgradePolicy",{policy:x.u8()}),PackageIDDoesNotMatch:x.struct("PackageIDDoesNotMatch",{packageId:Se,ticketId:Se})}),Ql=x.struct("ModuleId",{address:Se,name:x.string()}),Dr=x.struct("MoveLocation",{module:Ql,function:x.u16(),instruction:x.u16(),functionName:x.option(x.string())}),Yl=x.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:x.struct("IndexOutOfBounds",{idx:x.u16()}),SecondaryIndexOutOfBounds:x.struct("SecondaryIndexOutOfBounds",{resultIdx:x.u16(),secondaryIdx:x.u16()}),InvalidResultArity:x.struct("InvalidResultArity",{resultIdx:x.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),eu=x.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),tu=x.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:x.struct("MoveObjectTooBig",{objectSize:x.u64(),maxObjectSize:x.u64()}),MovePackageTooBig:x.struct("MovePackageTooBig",{objectSize:x.u64(),maxObjectSize:x.u64()}),CircularObjectOwnership:x.struct("CircularObjectOwnership",{object:Se}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:x.option(Dr),MoveAbort:x.tuple([Dr,x.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:x.struct("CommandArgumentError",{argIdx:x.u16(),kind:Yl}),TypeArgumentError:x.struct("TypeArgumentError",{argumentIdx:x.u16(),kind:eu}),UnusedValueWithoutDrop:x.struct("UnusedValueWithoutDrop",{resultIdx:x.u16(),secondaryIdx:x.u16()}),InvalidPublicFunctionReturnType:x.struct("InvalidPublicFunctionReturnType",{idx:x.u16()}),InvalidTransferObject:null,EffectsTooLarge:x.struct("EffectsTooLarge",{currentSize:x.u64(),maxSize:x.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:x.struct("PackageUpgradeError",{upgradeError:Zl}),WrittenObjectsTooLarge:x.struct("WrittenObjectsTooLarge",{currentSize:x.u64(),maxSize:x.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),rc=x.enum("ExecutionStatus",{Success:null,Failed:x.struct("ExecutionFailed",{error:tu,command:x.option(x.u64())})}),ac=x.struct("GasCostSummary",{computationCost:x.u64(),storageCost:x.u64(),storageRebate:x.u64(),nonRefundableStorageFee:x.u64()}),Un=x.enum("Owner",{AddressOwner:Se,ObjectOwner:Se,Shared:x.struct("Shared",{initialSharedVersion:x.u64()}),Immutable:null}),nu=x.struct("TransactionEffectsV1",{status:rc,executedEpoch:x.u64(),gasUsed:ac,modifiedAtVersions:x.vector(x.tuple([Se,x.u64()])),sharedObjects:x.vector(Bt),transactionDigest:zt,created:x.vector(x.tuple([Bt,Un])),mutated:x.vector(x.tuple([Bt,Un])),unwrapped:x.vector(x.tuple([Bt,Un])),deleted:x.vector(Bt),unwrappedThenDeleted:x.vector(Bt),wrapped:x.vector(Bt),gasObject:x.tuple([Bt,Un]),eventsDigest:x.option(zt),dependencies:x.vector(zt)}),Ls=x.tuple([x.u64(),zt]),iu=x.enum("ObjectIn",{NotExist:null,Exist:x.tuple([Ls,Un])}),ou=x.enum("ObjectOut",{NotExist:null,ObjectWrite:x.tuple([zt,Un]),PackageWrite:Ls}),su=x.enum("IDOperation",{None:null,Created:null,Deleted:null}),ru=x.struct("EffectsObjectChange",{inputState:iu,outputState:ou,idOperation:su}),au=x.enum("UnchangedSharedKind",{ReadOnlyRoot:Ls,MutateDeleted:x.u64(),ReadDeleted:x.u64()}),cu=x.struct("TransactionEffectsV2",{status:rc,executedEpoch:x.u64(),gasUsed:ac,transactionDigest:zt,gasObjectIndex:x.option(x.u32()),eventsDigest:x.option(zt),dependencies:x.vector(zt),lamportVersion:x.u64(),changedObjects:x.vector(x.tuple([Se,ru])),unchangedSharedObjects:x.vector(x.tuple([Se,au])),auxDataDigest:x.option(zt)}),du=x.enum("TransactionEffects",{V1:nu,V2:cu}),le={...x,U8:x.u8(),U16:x.u16(),U32:x.u32(),U64:x.u64(),U128:x.u128(),U256:x.u256(),ULEB128:x.uleb128(),Bool:x.bool(),String:x.string(),Address:Se,AppId:Qa,Argument:Jt,CallArg:La,CompressedSignature:tc,GasData:Wa,Intent:Ya,IntentMessage:ec,IntentScope:Ja,IntentVersion:Za,MultiSig:Xl,MultiSigPkMap:ic,MultiSigPublicKey:oc,ObjectArg:$a,ObjectDigest:zt,ProgrammableMoveCall:Fa,ProgrammableTransaction:Ka,PublicKey:nc,SenderSignedData:Jl,SenderSignedTransaction:sc,SharedObjectRef:qa,StructTag:Ga,SuiObjectRef:Bt,Command:Ua,TransactionData:Ha,TransactionDataV1:Xa,TransactionExpiration:za,TransactionKind:Va,TypeTag:$s,TransactionEffects:du},lu="object",uu="ID",fu="ascii",hu="String",pu="string",_u="String",bu="option",mu="Option";function gu(e){const t=typeof e.body=="object"&&"datatype"in e.body?e.body.datatype:null;return!!t&&oe(t.package)===oe("0x2")&&t.module==="tx_context"&&t.type==="TxContext"}function bs(e){if(typeof e=="string")switch(e){case"address":return le.Address;case"bool":return le.Bool;case"u8":return le.U8;case"u16":return le.U16;case"u32":return le.U32;case"u64":return le.U64;case"u128":return le.U128;case"u256":return le.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if(e.vector==="u8")return le.vector(le.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const t=bs(e.vector);return t?le.vector(t):null}if("datatype"in e){const t=oe(e.datatype.package);if(t===oe(Ul)){if(e.datatype.module===fu&&e.datatype.type===hu||e.datatype.module===pu&&e.datatype.type===_u)return le.String;if(e.datatype.module===bu&&e.datatype.type===mu){const n=bs(e.datatype.typeParameters[0]);return n?le.vector(n):null}}if(t===oe(Na)&&e.datatype.module===lu&&e.datatype.type===uu)return le.Address}return null}function yu(e){return typeof e=="object"&&"Reference"in e?{ref:"&",body:ui(e.Reference)}:typeof e=="object"&&"MutableReference"in e?{ref:"&mut",body:ui(e.MutableReference)}:{ref:null,body:ui(e)}}function ui(e){if(typeof e=="string")switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:ui(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(ui)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}function wu(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?Ct(e):e.toBase64()}}}const fn={Pure:wu,ObjectRef({objectId:e,digest:t,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:n,objectId:oe(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:n,objectId:oe(e)}}}},ReceivingRef({objectId:e,digest:t,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:n,objectId:oe(e)}}}}};var cc=class extends Error{constructor(t){super(t[0].message);F(this,"issues");this.name="ValiError",this.issues=t}};function dc(e){return typeof e=="function"?e():e}function Fs(e,t,n,i,o){return{issues:[{validation:e,message:dc(t),input:n,requirement:i,path:o}]}}function Us(e){return{output:e}}function Xt(e,t){return Array.isArray(e)?[void 0,e]:[e,t]}function on(e,t,n){return{typed:e,output:t,issues:n}}function lc(e,t,n){if(!e||typeof e=="object"&&!Array.isArray(e)){const[s,r]=Xt(t,n);return[e,s,r]}const[i,o]=Xt(e,t);return[void 0,i,o]}function vu(e,t){return{reason:e==null?void 0:e.reason,validation:t.validation,origin:(e==null?void 0:e.origin)||"value",message:t.message,input:t.input,requirement:t==null?void 0:t.requirement,path:t.path,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}}function ku(e,t){return{reason:t,origin:e==null?void 0:e.origin,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}}function Lt(e,t,n,i,o){let s,r=e;if(t!=null&&t.length&&!(n!=null&&n.skipPipe))for(const a of t){const c=a._parse(r);if(c.issues){s=s||ku(n,i);for(const d of c.issues){const l=vu(s,d);o?o.push(l):o=[l]}if(s.abortEarly||s.abortPipeEarly)break}else r=c.output}return on(!0,r,o)}function $t(e,t,n,i,o,s,r){return{typed:!1,output:o,issues:[{reason:t,validation:n,origin:(e==null?void 0:e.origin)||"value",message:dc(i),input:o,path:s,issues:r,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}]}}function Ks(e){return typeof e.default=="function"?e.default():e.default}function ms(e,t,n){return!e._parse(t,{abortEarly:!0,skipPipe:n==null?void 0:n.skipPipe}).issues}function _e(e,t,n){const[i="Invalid type",o]=Xt(t,n);return{type:"array",async:!1,item:e,message:i,pipe:o,_parse(s,r){if(!Array.isArray(s))return $t(r,"type","array",this.message,s);let a=!0,c;const d=[];for(let l=0;l<s.length;l++){const h=s[l],_=this.item._parse(h,r);if(_.issues){const m={type:"array",input:s,key:l,value:h};for(const y of _.issues)y.path?y.path.unshift(m):y.path=[m],c==null||c.push(y);if(c||(c=_.issues),r!=null&&r.abortEarly){a=!1;break}}_.typed||(a=!1),d.push(_.output)}return a?Lt(d,this.pipe,r,"array",c):on(!1,d,c)}}}function Cu(e,t){const[n="Invalid type",i]=Xt(e,t);return{type:"bigint",async:!1,message:n,pipe:i,_parse(o,s){return typeof o!="bigint"?$t(s,"type","bigint",this.message,o):Lt(o,this.pipe,s,"bigint")}}}function Vs(e,t){const[n="Invalid type",i]=Xt(e,t);return{type:"boolean",async:!1,message:n,pipe:i,_parse(o,s){return typeof o!="boolean"?$t(s,"type","boolean",this.message,o):Lt(o,this.pipe,s,"boolean")}}}function ft(e,t="Invalid type"){return{type:"literal",async:!1,literal:e,message:t,_parse(n,i){return n!==this.literal?$t(i,"type","literal",this.message,n):on(!0,n)}}}function _t(e,t){return{type:"nullable",async:!1,wrapped:e,default:t,_parse(n,i){if(n===null){const o=Ks(this);if(o===void 0)return on(!0,n);n=o}return this.wrapped._parse(n,i)}}}function eo(e,t){return{type:"nullish",async:!1,wrapped:e,default:t,_parse(n,i){if(n==null){const o=Ks(this);if(o===void 0)return on(!0,n);n=o}return this.wrapped._parse(n,i)}}}function Pt(e,t){const[n="Invalid type",i]=Xt(e,t);return{type:"number",async:!1,message:n,pipe:i,_parse(o,s){return typeof o!="number"||isNaN(o)?$t(s,"type","number",this.message,o):Lt(o,this.pipe,s,"number")}}}function ie(e,t,n,i){const[o,s="Invalid type",r]=lc(t,n,i);let a;return{type:"object",async:!1,entries:e,rest:o,message:s,pipe:r,_parse(c,d){if(!c||typeof c!="object")return $t(d,"type","object",this.message,c);a=a||Object.entries(this.entries);let l=!0,h;const _={};for(const[m,y]of a){const T=c[m],O=y._parse(T,d);if(O.issues){const j={type:"object",input:c,key:m,value:T};for(const M of O.issues)M.path?M.path.unshift(j):M.path=[j],h==null||h.push(M);if(h||(h=O.issues),d!=null&&d.abortEarly){l=!1;break}}O.typed||(l=!1),(O.output!==void 0||m in c)&&(_[m]=O.output)}if(this.rest&&!(d!=null&&d.abortEarly&&h)){for(const m in c)if(!(m in this.entries)){const y=c[m],T=this.rest._parse(y,d);if(T.issues){const O={type:"object",input:c,key:m,value:y};for(const j of T.issues)j.path?j.path.unshift(O):j.path=[O],h==null||h.push(j);if(h||(h=T.issues),d!=null&&d.abortEarly){l=!1;break}}T.typed||(l=!1),_[m]=T.output}}return l?Lt(_,this.pipe,d,"object",h):on(!1,_,h)}}}function hn(e,t){return{type:"optional",async:!1,wrapped:e,default:t,_parse(n,i){if(n===void 0){const o=Ks(this);if(o===void 0)return on(!0,n);n=o}return this.wrapped._parse(n,i)}}}function me(e,t){const[n="Invalid type",i]=Xt(e,t);return{type:"string",async:!1,message:n,pipe:i,_parse(o,s){return typeof o!="string"?$t(s,"type","string",this.message,o):Lt(o,this.pipe,s,"string")}}}function Au(e,t,n,i){if(typeof t=="object"&&!Array.isArray(t)){const[r,a]=Xt(n,i);return[e,t,r,a]}const[o,s]=Xt(t,n);return[me(),e,o,s]}var Su=["__proto__","prototype","constructor"];function to(e,t,n,i){const[o,s,r="Invalid type",a]=Au(e,t,n,i);return{type:"record",async:!1,key:o,value:s,message:r,pipe:a,_parse(c,d){if(!c||typeof c!="object")return $t(d,"type","record",this.message,c);let l=!0,h;const _={};for(const[m,y]of Object.entries(c))if(!Su.includes(m)){let T;const O=this.key._parse(m,{origin:"key",abortEarly:d==null?void 0:d.abortEarly,abortPipeEarly:d==null?void 0:d.abortPipeEarly,skipPipe:d==null?void 0:d.skipPipe});if(O.issues){T={type:"record",input:c,key:m,value:y};for(const M of O.issues)M.path=[T],h==null||h.push(M);if(h||(h=O.issues),d!=null&&d.abortEarly){l=!1;break}}const j=this.value._parse(y,d);if(j.issues){T=T||{type:"record",input:c,key:m,value:y};for(const M of j.issues)M.path?M.path.unshift(T):M.path=[T],h==null||h.push(M);if(h||(h=j.issues),d!=null&&d.abortEarly){l=!1;break}}(!O.typed||!j.typed)&&(l=!1),O.typed&&(_[O.output]=j.output)}return l?Lt(_,this.pipe,d,"record",h):on(!1,_,h)}}}function Rr(e){return{type:"recursive",async:!1,getter:e,_parse(t,n){return this.getter()._parse(t,n)}}}function uc(e,t,n,i){const[o,s="Invalid type",r]=lc(t,n,i);return{type:"tuple",async:!1,items:e,rest:o,message:s,pipe:r,_parse(a,c){if(!Array.isArray(a)||this.items.length>a.length)return $t(c,"type","tuple",this.message,a);let d=!0,l;const h=[];for(let _=0;_<this.items.length;_++){const m=a[_],y=this.items[_]._parse(m,c);if(y.issues){const T={type:"tuple",input:a,key:_,value:m};for(const O of y.issues)O.path?O.path.unshift(T):O.path=[T],l==null||l.push(O);if(l||(l=y.issues),c!=null&&c.abortEarly){d=!1;break}}y.typed||(d=!1),h[_]=y.output}if(this.rest&&!(c!=null&&c.abortEarly&&l))for(let _=this.items.length;_<a.length;_++){const m=a[_],y=this.rest._parse(m,c);if(y.issues){const T={type:"tuple",input:a,key:_,value:m};for(const O of y.issues)O.path?O.path.unshift(T):O.path=[T],l==null||l.push(O);if(l||(l=y.issues),c!=null&&c.abortEarly){d=!1;break}}y.typed||(d=!1),h[_]=y.output}return d?Lt(h,this.pipe,c,"tuple",l):on(!1,h,l)}}}function _n(e,t,n){const[i="Invalid type",o]=Xt(t,n);return{type:"union",async:!1,options:e,message:i,pipe:o,_parse(s,r){let a,c;for(const d of this.options){const l=d._parse(s,r);if(l.issues)if(a)for(const h of l.issues)a.push(h);else a=l.issues;else{c=[l.output];break}}return c?Lt(c[0],this.pipe,r,"union"):$t(r,"type","union",this.message,s,void 0,a)}}}function ho(e){return{type:"unknown",async:!1,pipe:e,_parse(t,n){return Lt(t,this.pipe,n,"unknown")}}}function C_(e,t,n,i){const[o="Invalid type",s]=Xt(n,i);return{type:"variant",async:!1,key:e,options:t,message:o,pipe:s,_parse(r,a){if(!r||typeof r!="object")return $t(a,"type","variant",this.message,r);if(this.key in r){let c,d;const l=h=>{for(const _ of h)if(_.type==="object"){if(!_.entries[this.key]._parse(r[this.key],a).issues){const y=_._parse(r,a);if(y.issues)c=y.issues;else{d=[y.output];break}}}else if(_.type==="variant"&&(l(_.options),d))break};if(l(this.options),d)return Lt(d[0],this.pipe,a,"variant");if(c)return on(!1,d,c)}return $t(a,"type","variant",this.message,r,[{type:"object",input:r,key:this.key,value:void 0}])}}}function Ae(e,t,n){const i=e._parse(t,n);if(i.issues)throw new cc(i.issues);return i.output}function A_(e,t,n){const i=e._parse(t,n);return{typed:i.typed,success:!i.issues,data:i.output,output:i.output,error:i.issues&&new cc(i.issues),issues:i.issues}}function zs(e,t,n){return{...e,_parse(i,o){const s=e._parse(i,o);return s.typed?(s.output=t(s.output,{issues:s.issues}),s.issues||!n?s:Array.isArray(n)?Lt(s.output,n,o,typeof s.output):n._parse(s.output,o)):s}}}var Tu=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function fc(e,t="Invalid input"){return{type:"custom",async:!1,message:t,requirement:e,_parse(n){return this.requirement(n)?Us(n):Fs(this.type,this.message,n,this.requirement)}}}function Ot(e="Invalid integer"){return{type:"integer",async:!1,message:e,requirement:Number.isInteger,_parse(t){return this.requirement(t)?Us(t):Fs(this.type,this.message,t,this.requirement)}}}function S_(e="Invalid UUID"){return{type:"uuid",async:!1,message:e,requirement:Tu,_parse(t){return this.requirement.test(t)?Us(t):Fs(this.type,this.message,t,this.requirement)}}}function Rn(e){const t=Object.entries(e).map(([n,i])=>ie({[n]:i}));return zs(_n(t),n=>({...n,$kind:Object.keys(n)[0]}))}const ti=zs(me(),e=>oe(e),[fc(Zt)]),jt=ti,Bn=me(),xt=_n([me(),Pt([Ot()])],[fc(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}},"Invalid u64")]),Tn=ie({objectId:ti,version:xt,digest:me()}),we=zs(_n([ie({GasCoin:ft(!0)}),ie({Input:Pt([Ot()]),type:hn(ft("pure"))}),ie({Input:Pt([Ot()]),type:hn(ft("object"))}),ie({Result:Pt([Ot()])}),ie({NestedResult:uc([Pt([Ot()]),Pt([Ot()])])})]),e=>({...e,$kind:Object.keys(e)[0]})),xu=ie({budget:_t(xt),price:_t(xt),owner:_t(ti),payment:_t(_e(Tn))}),gs=_n([ft("address"),ft("bool"),ft("u8"),ft("u16"),ft("u32"),ft("u64"),ft("u128"),ft("u256"),ie({vector:Rr(()=>gs)}),ie({datatype:ie({package:me(),module:me(),type:me(),typeParameters:_e(Rr(()=>gs))})}),ie({typeParameter:Pt([Ot()])})]),Iu=ie({ref:_t(_n([ft("&"),ft("&mut")])),body:gs}),Pu=ie({package:jt,module:me(),function:me(),typeArguments:_e(me()),arguments:_e(we),_argumentTypes:hn(_t(_e(Iu)))}),Ou=ie({name:me(),inputs:to(me(),_n([we,_e(we)])),data:to(me(),ho())}),ju=Rn({MoveCall:Pu,TransferObjects:ie({objects:_e(we),address:we}),SplitCoins:ie({coin:we,amounts:_e(we)}),MergeCoins:ie({destination:we,sources:_e(we)}),Publish:ie({modules:_e(Bn),dependencies:_e(jt)}),MakeMoveVec:ie({type:_t(me()),elements:_e(we)}),Upgrade:ie({modules:_e(Bn),dependencies:_e(jt),package:jt,ticket:we}),$Intent:Ou}),hc=Rn({ImmOrOwnedObject:Tn,SharedObject:ie({objectId:jt,initialSharedVersion:xt,mutable:Vs()}),Receiving:Tn}),Mu=Rn({Object:hc,Pure:ie({bytes:Bn}),UnresolvedPure:ie({value:ho()}),UnresolvedObject:ie({objectId:jt,version:hn(_t(xt)),digest:hn(_t(me())),initialSharedVersion:hn(_t(xt))})}),Nr=Rn({Object:hc,Pure:ie({bytes:Bn})}),pc=Rn({None:ft(!0),Epoch:xt}),Ui=ie({version:ft(2),sender:eo(ti),expiration:eo(pc),gasData:xu,inputs:_e(Mu),commands:_e(ju)});var Eu=(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(Eu||{});const xn={MoveCall(e){const[t,n="",i=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:n,function:i,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects(e,t){return{$kind:"TransferObjects",TransferObjects:{objects:e.map(n=>Ae(we,n)),address:Ae(we,t)}}},SplitCoins(e,t){return{$kind:"SplitCoins",SplitCoins:{coin:Ae(we,e),amounts:t.map(n=>Ae(we,n))}}},MergeCoins(e,t){return{$kind:"MergeCoins",MergeCoins:{destination:Ae(we,e),sources:t.map(n=>Ae(we,n))}}},Publish({modules:e,dependencies:t}){return{$kind:"Publish",Publish:{modules:e.map(n=>typeof n=="string"?n:Ct(new Uint8Array(n))),dependencies:t.map(n=>he(n))}}},Upgrade({modules:e,dependencies:t,package:n,ticket:i}){return{$kind:"Upgrade",Upgrade:{modules:e.map(o=>typeof o=="string"?o:Ct(new Uint8Array(o))),dependencies:t.map(o=>he(o)),package:n,ticket:Ae(we,i)}}},MakeMoveVec({type:e,elements:t}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(n=>Ae(we,n))}}},Intent({name:e,inputs:t={},data:n={}}){return{$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([i,o])=>[i,Array.isArray(o)?o.map(s=>Ae(we,s)):Ae(we,o)])),data:n}}}},qr=ie({digest:me(),objectId:me(),version:_n([Pt([Ot()]),me(),Cu()])}),Bu=Rn({ImmOrOwned:qr,Shared:ie({objectId:jt,initialSharedVersion:xt,mutable:Vs()}),Receiving:qr}),$r=Rn({Object:Bu,Pure:_e(Pt([Ot()]))});function Lr(e){var n;const t=e.inputs.map((i,o)=>{if(i.Object)return{kind:"Input",index:o,value:{Object:i.Object.ImmOrOwnedObject?{ImmOrOwned:i.Object.ImmOrOwnedObject}:i.Object.Receiving?{Receiving:{digest:i.Object.Receiving.digest,version:i.Object.Receiving.version,objectId:i.Object.Receiving.objectId}}:{Shared:{mutable:i.Object.SharedObject.mutable,initialSharedVersion:i.Object.SharedObject.initialSharedVersion,objectId:i.Object.SharedObject.objectId}}},type:"object"};if(i.Pure)return{kind:"Input",index:o,value:{Pure:Array.from(tn(i.Pure.bytes))},type:"pure"};if(i.UnresolvedPure)return{kind:"Input",type:"pure",index:o,value:i.UnresolvedPure.value};if(i.UnresolvedObject)return{kind:"Input",type:"object",index:o,value:i.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:((n=e.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(i=>{if(i.MakeMoveVec)return{kind:"MakeMoveVec",type:i.MakeMoveVec.type===null?{None:!0}:{Some:Yt.parseFromStr(i.MakeMoveVec.type)},objects:i.MakeMoveVec.elements.map(o=>rn(o,t))};if(i.MergeCoins)return{kind:"MergeCoins",destination:rn(i.MergeCoins.destination,t),sources:i.MergeCoins.sources.map(o=>rn(o,t))};if(i.MoveCall)return{kind:"MoveCall",target:`${i.MoveCall.package}::${i.MoveCall.module}::${i.MoveCall.function}`,typeArguments:i.MoveCall.typeArguments,arguments:i.MoveCall.arguments.map(o=>rn(o,t))};if(i.Publish)return{kind:"Publish",modules:i.Publish.modules.map(o=>Array.from(tn(o))),dependencies:i.Publish.dependencies};if(i.SplitCoins)return{kind:"SplitCoins",coin:rn(i.SplitCoins.coin,t),amounts:i.SplitCoins.amounts.map(o=>rn(o,t))};if(i.TransferObjects)return{kind:"TransferObjects",objects:i.TransferObjects.objects.map(o=>rn(o,t)),address:rn(i.TransferObjects.address,t)};if(i.Upgrade)return{kind:"Upgrade",modules:i.Upgrade.modules.map(o=>Array.from(tn(o))),dependencies:i.Upgrade.dependencies,packageId:i.Upgrade.package,ticket:rn(i.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(i)}`)})}}function rn(e,t){if(e.$kind==="GasCoin")return{kind:"GasCoin"};if(e.$kind==="Result")return{kind:"Result",index:e.Result};if(e.$kind==="NestedResult")return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if(e.$kind==="Input")return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function Du(e){var t,n,i;return Ae(Ui,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:((t=e.gasConfig.budget)==null?void 0:t.toString())??null,price:((n=e.gasConfig.price)==null?void 0:n.toString())??null,payment:((i=e.gasConfig.payment)==null?void 0:i.map(o=>({digest:o.digest,objectId:o.objectId,version:o.version.toString()})))??null},inputs:e.inputs.map(o=>{if(o.kind==="Input"){if(ms($r,o.value)){const s=Ae($r,o.value);if(s.Object){if(s.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:s.Object.ImmOrOwned.objectId,version:String(s.Object.ImmOrOwned.version),digest:s.Object.ImmOrOwned.digest}}};if(s.Object.Shared)return{Object:{SharedObject:{mutable:s.Object.Shared.mutable??null,initialSharedVersion:s.Object.Shared.initialSharedVersion,objectId:s.Object.Shared.objectId}}};if(s.Object.Receiving)return{Object:{Receiving:{digest:s.Object.Receiving.digest,version:String(s.Object.Receiving.version),objectId:s.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Ct(new Uint8Array(s.Pure))}}}return o.type==="object"?{UnresolvedObject:{objectId:o.value}}:{UnresolvedPure:{value:o.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(o=>{switch(o.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in o.type?Yt.tagToString(o.type.Some):null,elements:o.objects.map(s=>an(s))}};case"MergeCoins":return{MergeCoins:{destination:an(o.destination),sources:o.sources.map(s=>an(s))}};case"MoveCall":{const[s,r,a]=o.target.split("::");return{MoveCall:{package:s,module:r,function:a,typeArguments:o.typeArguments,arguments:o.arguments.map(c=>an(c))}}}case"Publish":return{Publish:{modules:o.modules.map(s=>Ct(Uint8Array.from(s))),dependencies:o.dependencies}};case"SplitCoins":return{SplitCoins:{coin:an(o.coin),amounts:o.amounts.map(s=>an(s))}};case"TransferObjects":return{TransferObjects:{objects:o.objects.map(s=>an(s)),address:an(o.address)}};case"Upgrade":return{Upgrade:{modules:o.modules.map(s=>Ct(Uint8Array.from(s))),dependencies:o.dependencies,package:o.packageId,ticket:an(o.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(o)}`)})})}function an(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function Ci(e){return _n(Object.entries(e).map(([t,n])=>ie({[t]:n})))}const Ft=Ci({GasCoin:ft(!0),Input:Pt([Ot()]),Result:Pt([Ot()]),NestedResult:uc([Pt([Ot()]),Pt([Ot()])])}),Ru=ie({budget:_t(xt),price:_t(xt),owner:_t(ti),payment:_t(_e(Tn))}),Nu=ie({package:jt,module:me(),function:me(),typeArguments:_e(me()),arguments:_e(Ft)}),qu=ie({name:me(),inputs:to(me(),_n([Ft,_e(Ft)])),data:to(me(),ho())}),$u=Ci({MoveCall:Nu,TransferObjects:ie({objects:_e(Ft),address:Ft}),SplitCoins:ie({coin:Ft,amounts:_e(Ft)}),MergeCoins:ie({destination:Ft,sources:_e(Ft)}),Publish:ie({modules:_e(Bn),dependencies:_e(jt)}),MakeMoveVec:ie({type:_t(me()),elements:_e(Ft)}),Upgrade:ie({modules:_e(Bn),dependencies:_e(jt),package:jt,ticket:Ft}),$Intent:qu}),Lu=Ci({ImmOrOwnedObject:Tn,SharedObject:ie({objectId:jt,initialSharedVersion:xt,mutable:Vs()}),Receiving:Tn}),Fu=Ci({Object:Lu,Pure:ie({bytes:Bn}),UnresolvedPure:ie({value:ho()}),UnresolvedObject:ie({objectId:jt,version:hn(_t(xt)),digest:hn(_t(me())),initialSharedVersion:hn(_t(xt))})}),Uu=Ci({None:ft(!0),Epoch:xt}),Ku=ie({version:ft(2),sender:eo(ti),expiration:eo(Uu),gasData:Ru,inputs:_e(Fu),commands:_e($u)}),Vu=50,zu=1000n,Gu=5e10;async function Wu(e,t,n){return await Qu(e,t),await Zu(e,t),t.onlyTransactionKind||(await Xu(e,t),await Hu(e,t),await Ju(e,t)),await Yu(e),await n()}async function Xu(e,t){e.gasConfig.price||(e.gasConfig.price=String(await Ai(t).getReferenceGasPrice()))}async function Hu(e,t){if(e.gasConfig.budget)return;const n=await Ai(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(Gu),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const i=zu*BigInt(e.gasConfig.price||1n),o=BigInt(n.effects.gasUsed.computationCost)+i,s=o+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>o?s:o)}async function Ju(e,t){if(!e.gasConfig.payment){const i=(await Ai(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:Kl})).data.filter(o=>!e.inputs.find(r=>{var a;return(a=r.Object)!=null&&a.ImmOrOwnedObject?o.coinObjectId===r.Object.ImmOrOwnedObject.objectId:!1})).map(o=>({objectId:o.coinObjectId,digest:o.digest,version:o.version}));if(!i.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=i.map(o=>Ae(Tn,o))}}async function Zu(e,t){const n=e.inputs.filter(l=>{var h;return l.UnresolvedObject&&!(l.UnresolvedObject.version||(h=l.UnresolvedObject)!=null&&h.initialSharedVersion)}),i=[...new Set(n.map(l=>he(l.UnresolvedObject.objectId)))],o=i.length?of(i,Vu):[],s=(await Promise.all(o.map(l=>Ai(t).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat(),r=new Map(i.map((l,h)=>[l,s[h]])),a=Array.from(r).filter(([l,h])=>h.error).map(([l,h])=>JSON.stringify(h.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=s.map(l=>{if(l.error||!l.data)throw new Error(`Failed to fetch object: ${l.error}`);const h=l.data.owner,_=h&&typeof h=="object"&&"Shared"in h?h.Shared.initial_shared_version:null;return{objectId:l.data.objectId,digest:l.data.digest,version:l.data.version,initialSharedVersion:_}}),d=new Map(i.map((l,h)=>[l,c[h]]));for(const[l,h]of e.inputs.entries()){if(!h.UnresolvedObject)continue;let _;const m=oe(h.UnresolvedObject.objectId),y=d.get(m);h.UnresolvedObject.initialSharedVersion??(y==null?void 0:y.initialSharedVersion)?_=fn.SharedObjectRef({objectId:m,initialSharedVersion:h.UnresolvedObject.initialSharedVersion||(y==null?void 0:y.initialSharedVersion),mutable:ef(e,l)}):tf(e,l)&&(_=fn.ReceivingRef({objectId:m,digest:h.UnresolvedObject.digest??(y==null?void 0:y.digest),version:h.UnresolvedObject.version??(y==null?void 0:y.version)})),e.inputs[e.inputs.indexOf(h)]=_??fn.ObjectRef({objectId:m,digest:h.UnresolvedObject.digest??(y==null?void 0:y.digest),version:h.UnresolvedObject.version??(y==null?void 0:y.version)})}}async function Qu(e,t){const{inputs:n,commands:i}=e,o=[],s=new Set;i.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(l=>l.$kind==="Input"?e.inputs[l.Input]:null).some(l=>(l==null?void 0:l.UnresolvedPure)||(l==null?void 0:l.UnresolvedObject))){const l=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;s.add(l),o.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(c=>{Fr(c,le.U64,e)});break;case"TransferObjects":Fr(a.TransferObjects.address,le.Address,e);break}});const r=new Map;if(s.size>0){const a=Ai(t);await Promise.all([...s].map(async c=>{const[d,l,h]=c.split("::"),_=await a.getNormalizedMoveFunction({package:d,module:l,function:h});r.set(c,_.parameters.map(m=>yu(m)))}))}o.length&&await Promise.all(o.map(async a=>{const c=r.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const l=c.length>0&&gu(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=l})),i.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,d=`${c.package}::${c.module}::${c.function}`,l=c._argumentTypes;if(l){if(l.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${d}`);l.forEach((h,_)=>{var M,B;const m=c.arguments[_];if(m.$kind!=="Input")return;const y=n[m.Input];if(!y.UnresolvedPure&&!y.UnresolvedObject)return;const T=((M=y.UnresolvedPure)==null?void 0:M.value)??((B=y.UnresolvedObject)==null?void 0:B.objectId),O=bs(h.body);if(O){m.type="pure",n[n.indexOf(y)]=fn.Pure(O.serialize(T));return}if(typeof T!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(T,null,2)}`);m.type="object";const j=y.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:T}}:y;n[m.Input]=j})}})}function Yu(e){e.inputs.forEach((t,n)=>{if(t.$kind!=="Object"&&t.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(t)}`)})}function Fr(e,t,n){if(e.$kind!=="Input")return;const i=n.inputs[e.Input];i.$kind==="UnresolvedPure"&&(n.inputs[e.Input]=fn.Pure(t.serialize(i.UnresolvedPure.value)))}function ef(e,t){let n=!1;return e.getInputUses(t,(i,o)=>{if(o.MoveCall&&o.MoveCall._argumentTypes){const s=o.MoveCall.arguments.indexOf(i);n=o.MoveCall._argumentTypes[s].ref!=="&"||n}}),n}function tf(e,t){let n=!1;return e.getInputUses(t,(i,o)=>{if(o.MoveCall&&o.MoveCall._argumentTypes){const s=o.MoveCall.arguments.indexOf(i);n=nf(o.MoveCall._argumentTypes[s])||n}}),n}function nf(e){return typeof e.body!="object"||!("datatype"in e.body)?!1:e.body.datatype.package==="0x2"&&e.body.datatype.module==="transfer"&&e.body.datatype.type==="Receiving"}function Ai(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function of(e,t){return Array.from({length:Math.ceil(e.length/t)},(n,i)=>e.slice(i*t,i*t+t))}function sf(e){function t(n){return e(n)}return t.u8=n=>e(le.U8.serialize(n)),t.u16=n=>e(le.U16.serialize(n)),t.u32=n=>e(le.U32.serialize(n)),t.u64=n=>e(le.U64.serialize(n)),t.u128=n=>e(le.U128.serialize(n)),t.u256=n=>e(le.U256.serialize(n)),t.bool=n=>e(le.Bool.serialize(n)),t.string=n=>e(le.String.serialize(n)),t.address=n=>e(le.Address.serialize(n)),t.id=t.address,t}function rf(e,t){const n=Array.from(`${e}::`).map(o=>o.charCodeAt(0)),i=new Uint8Array(n.length+t.length);return i.set(n),i.set(t,n.length),Tl(i,{dkLen:32})}function Ur(e){return oe(e).replace("0x","")}class Vt{constructor(t){this.version=2,this.sender=(t==null?void 0:t.sender)??null,this.expiration=(t==null?void 0:t.expiration)??null,this.inputs=(t==null?void 0:t.inputs)??[],this.commands=(t==null?void 0:t.commands)??[],this.gasData=(t==null?void 0:t.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(t){const i=le.TransactionKind.parse(t).ProgrammableTransaction;if(!i)throw new Error("Unable to deserialize from bytes.");return Vt.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:i.inputs,commands:i.commands})}static fromBytes(t){const n=le.TransactionData.parse(t),i=n==null?void 0:n.V1,o=i.kind.ProgrammableTransaction;if(!i||!o)throw new Error("Unable to deserialize from bytes.");return Vt.restore({version:2,sender:i.sender,expiration:i.expiration,gasData:i.gasData,inputs:o.inputs,commands:o.commands})}static restore(t){return t.version===2?new Vt(Ae(Ui,t)):new Vt(Ae(Ui,Du(t)))}static getDigestFromBytes(t){const n=rf("TransactionData",t);return fo(n)}get gasConfig(){return this.gasData}set gasConfig(t){this.gasData=t}build({maxSizeBytes:t=1/0,overrides:n,onlyTransactionKind:i}={}){const o=this.inputs,s=this.commands,r={ProgrammableTransaction:{inputs:o,commands:s}};if(i)return le.TransactionKind.serialize(r,{maxSize:t}).toBytes();const a=(n==null?void 0:n.expiration)??this.expiration,c=(n==null?void 0:n.sender)??this.sender,d={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!c)throw new Error("Missing transaction sender");if(!d.budget)throw new Error("Missing gas budget");if(!d.payment)throw new Error("Missing gas payment");if(!d.price)throw new Error("Missing gas price");const l={sender:Ur(c),expiration:a||{None:!0},gasData:{payment:d.payment,owner:Ur(this.gasData.owner??c),price:BigInt(d.price),budget:BigInt(d.budget)},kind:{ProgrammableTransaction:{inputs:o,commands:s}}};return le.TransactionData.serialize({V1:l},{maxSize:t}).toBytes()}addInput(t,n){const i=this.inputs.length;return this.inputs.push(n),{Input:i,type:t,$kind:"Input"}}getInputUses(t,n){this.mapArguments((i,o)=>(i.$kind==="Input"&&i.Input===t&&n(i,o),i))}mapArguments(t){for(const n of this.commands)switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map(o=>t(o,n));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map(o=>t(o,n)),n.TransferObjects.address=t(n.TransferObjects.address,n);break;case"SplitCoins":n.SplitCoins.coin=t(n.SplitCoins.coin,n),n.SplitCoins.amounts=n.SplitCoins.amounts.map(o=>t(o,n));break;case"MergeCoins":n.MergeCoins.destination=t(n.MergeCoins.destination,n),n.MergeCoins.sources=n.MergeCoins.sources.map(o=>t(o,n));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map(o=>t(o,n));break;case"Upgrade":n.Upgrade.ticket=t(n.Upgrade.ticket,n);break;case"$Intent":const i=n.$Intent.inputs;n.$Intent.inputs={};for(const[o,s]of Object.entries(i))n.$Intent.inputs[o]=Array.isArray(s)?s.map(r=>t(r,n)):t(s,n);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${n.$kind}`)}}replaceCommand(t,n){if(!Array.isArray(n)){this.commands[t]=n;return}const i=n.length-1;this.commands.splice(t,1,...n),i!==0&&this.mapArguments(o=>{switch(o.$kind){case"Result":o.Result>t&&(o.Result+=i);break;case"NestedResult":o.NestedResult[0]>t&&(o.NestedResult[0]+=i);break}return o})}getDigest(){const t=this.build({onlyTransactionKind:!1});return Vt.getDigestFromBytes(t)}snapshot(){return Ae(Ui,this)}}function Kr(e){if(typeof e=="string")return oe(e);if(e.Object)return e.Object.ImmOrOwnedObject?oe(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?oe(e.Object.Receiving.objectId):oe(e.Object.SharedObject.objectId);if(e.UnresolvedObject)return oe(e.UnresolvedObject.objectId)}var Gs=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},fe=(e,t,n)=>(Gs(e,t,"read from private field"),n?n.call(e):t.get(e)),gn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ii=(e,t,n,i)=>(Gs(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),cn=(e,t,n)=>(Gs(e,t,"access private method"),n),Ki,no,In,be,di,Vi,io,Ws,zi,ys,oo,Xs;function af(e){const t={$kind:"Result",Result:e},n=[],i=o=>n[o]??(n[o]={$kind:"NestedResult",NestedResult:[e,o]});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(o,s){if(s in o)return Reflect.get(o,s);if(s===Symbol.iterator)return function*(){let a=0;for(;;)yield i(a),a++};if(typeof s=="symbol")return;const r=parseInt(s,10);if(!(Number.isNaN(r)||r<0))return i(r)}})}const _c=Symbol.for("@mysten/transaction");function bc(e){return!!e&&typeof e=="object"&&e[_c]===!0}const ws=class{constructor(){gn(this,di),gn(this,io),gn(this,zi),gn(this,oo),gn(this,Ki,[]),gn(this,no,[]),gn(this,In,new Map),gn(this,be,void 0),ii(this,be,new Vt)}static fromKind(e){const t=new ws;return ii(t,be,Vt.fromKindBytes(typeof e=="string"?tn(e):e)),t}static from(e){const t=new ws;return bc(e)?ii(t,be,new Vt(e.getData())):typeof e!="string"||!e.startsWith("{")?ii(t,be,Vt.fromBytes(typeof e=="string"?tn(e):e)):ii(t,be,Vt.restore(JSON.parse(e))),t}addSerializationPlugin(e){fe(this,Ki).push(e)}addBuildPlugin(e){fe(this,no).push(e)}addIntentResolver(e,t){if(fe(this,In).has(e)&&fe(this,In).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);fe(this,In).set(e,t)}setSender(e){fe(this,be).sender=e}setSenderIfNotSet(e){fe(this,be).sender||(fe(this,be).sender=e)}setExpiration(e){fe(this,be).expiration=e?Ae(pc,e):null}setGasPrice(e){fe(this,be).gasConfig.price=String(e)}setGasBudget(e){fe(this,be).gasConfig.budget=String(e)}setGasOwner(e){fe(this,be).gasConfig.owner=e}setGasPayment(e){fe(this,be).gasConfig.payment=e.map(t=>Ae(Tn,t))}get blockData(){return Lr(fe(this,be).snapshot())}getData(){return fe(this,be).snapshot()}get[_c](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:sf(e=>Ea(e)?fe(this,be).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):fe(this,be).addInput("pure",ms(Nr,e)?Ae(Nr,e):e instanceof Uint8Array?fn.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}object(e){var i,o;if(typeof e=="function")return this.object(e(this));if(typeof e=="object"&&ms(we,e))return e;const t=Kr(e),n=fe(this,be).inputs.find(s=>t===Kr(s));return(i=n==null?void 0:n.Object)!=null&&i.SharedObject&&typeof e=="object"&&((o=e.Object)!=null&&o.SharedObject)&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||e.Object.SharedObject.mutable),n?{$kind:"Input",Input:fe(this,be).inputs.indexOf(n),type:"object"}:fe(this,be).addInput("object",typeof e=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:oe(e)}}:e)}objectRef(...e){return this.object(fn.ObjectRef(...e))}receivingRef(...e){return this.object(fn.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(fn.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const t=fe(this,be).commands.push(e);return af(t-1)}splitCoins(e,t){return this.add(xn.SplitCoins(typeof e=="string"?this.object(e):cn(this,io,Ws).call(this,e),t.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):cn(this,di,Vi).call(this,n))))}mergeCoins(e,t){return this.add(xn.MergeCoins(this.object(e),t.map(n=>this.object(n))))}publish({modules:e,dependencies:t}){return this.add(xn.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:n,ticket:i}){return this.add(xn.Upgrade({modules:e,dependencies:t,package:n,ticket:this.object(i)}))}moveCall({arguments:e,...t}){return this.add(xn.MoveCall({...t,arguments:e==null?void 0:e.map(n=>cn(this,di,Vi).call(this,n))}))}transferObjects(e,t){return this.add(xn.TransferObjects(e.map(n=>this.object(n)),typeof t=="string"?this.pure.address(t):cn(this,di,Vi).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(xn.MakeMoveVec({type:e,elements:t.map(n=>this.object(n))}))}serialize(){return JSON.stringify(Lr(fe(this,be).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(Ae(Ku,fe(this,be).snapshot()),(t,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){const{signer:t,...n}=e,i=await this.build(n);return t.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await cn(this,zi,ys).call(this,e),fe(this,be).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await cn(this,zi,ys).call(this,e),fe(this,be).getDigest()}async prepareForSerialization(e){var i;const t=new Set;for(const o of fe(this,be).commands)o.$Intent&&t.add(o.$Intent.name);const n=[...fe(this,Ki)];for(const o of t)if(!((i=e.supportedIntents)!=null&&i.includes(o))){if(!fe(this,In).has(o))throw new Error(`Missing intent resolver for ${o}`);n.push(fe(this,In).get(o))}await cn(this,oo,Xs).call(this,n,e)}};let N=ws;Ki=new WeakMap;no=new WeakMap;In=new WeakMap;be=new WeakMap;di=new WeakSet;Vi=function(e){return Ea(e)?this.pure(e):cn(this,io,Ws).call(this,e)};io=new WeakSet;Ws=function(e){return typeof e=="function"?Ae(we,e(this)):Ae(we,e)};zi=new WeakSet;ys=async function(e){if(!e.onlyTransactionKind&&!fe(this,be).sender)throw new Error("Missing transaction sender");await cn(this,oo,Xs).call(this,[...fe(this,no),Wu],e)};oo=new WeakSet;Xs=async function(e,t){const n=i=>{if(i>=e.length)return()=>{};const o=e[i];return async()=>{const s=n(i+1);let r=!1,a=!1;if(await o(fe(this,be),t,async()=>{if(r)throw new Error(`next() was call multiple times in TransactionPlugin ${i}`);r=!0,await s(),a=!0}),!r)throw new Error(`next() was not called in TransactionPlugin ${i}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${i}`)}};await n(0)()};let ji;const cf=new Uint8Array(16);function df(){if(!ji&&(ji=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ji))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ji(cf)}const mt=[];for(let e=0;e<256;++e)mt.push((e+256).toString(16).slice(1));function lf(e,t=0){return mt[e[t+0]]+mt[e[t+1]]+mt[e[t+2]]+mt[e[t+3]]+"-"+mt[e[t+4]]+mt[e[t+5]]+"-"+mt[e[t+6]]+mt[e[t+7]]+"-"+mt[e[t+8]]+mt[e[t+9]]+"-"+mt[e[t+10]]+mt[e[t+11]]+mt[e[t+12]]+mt[e[t+13]]+mt[e[t+14]]+mt[e[t+15]]}const uf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vr={randomUUID:uf};function Mi(e,t,n){if(Vr.randomUUID&&!t&&!e)return Vr.randomUUID();e=e||{};const i=e.random||(e.rng||df)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let o=0;o<16;++o)t[n+o]=i[o];return t}return lf(i)}function mc(e,t){return function(){return e.apply(t,arguments)}}const{toString:ff}=Object.prototype,{getPrototypeOf:Hs}=Object,po=(e=>t=>{const n=ff.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),sn=e=>(e=e.toLowerCase(),t=>po(t)===e),_o=e=>t=>typeof t===e,{isArray:ni}=Array,vi=_o("undefined");function hf(e){return e!==null&&!vi(e)&&e.constructor!==null&&!vi(e.constructor)&&Nt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gc=sn("ArrayBuffer");function pf(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gc(e.buffer),t}const _f=_o("string"),Nt=_o("function"),yc=_o("number"),bo=e=>e!==null&&typeof e=="object",bf=e=>e===!0||e===!1,Gi=e=>{if(po(e)!=="object")return!1;const t=Hs(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mf=sn("Date"),gf=sn("File"),yf=sn("Blob"),wf=sn("FileList"),vf=e=>bo(e)&&Nt(e.pipe),kf=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Nt(e.append)&&((t=po(e))==="formdata"||t==="object"&&Nt(e.toString)&&e.toString()==="[object FormData]"))},Cf=sn("URLSearchParams"),Af=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Si(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),ni(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let a;for(i=0;i<r;i++)a=s[i],t.call(null,e[a],a,e)}}function wc(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const vc=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),kc=e=>!vi(e)&&e!==vc;function vs(){const{caseless:e}=kc(this)&&this||{},t={},n=(i,o)=>{const s=e&&wc(t,o)||o;Gi(t[s])&&Gi(i)?t[s]=vs(t[s],i):Gi(i)?t[s]=vs({},i):ni(i)?t[s]=i.slice():t[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Si(arguments[i],n);return t}const Sf=(e,t,n,{allOwnKeys:i}={})=>(Si(t,(o,s)=>{n&&Nt(o)?e[s]=mc(o,n):e[s]=o},{allOwnKeys:i}),e),Tf=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xf=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},If=(e,t,n,i)=>{let o,s,r;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)r=o[s],(!i||i(r,e,t))&&!a[r]&&(t[r]=e[r],a[r]=!0);e=n!==!1&&Hs(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Pf=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},Of=e=>{if(!e)return null;if(ni(e))return e;let t=e.length;if(!yc(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},jf=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Hs(Uint8Array)),Mf=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=i.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},Ef=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},Bf=sn("HTMLFormElement"),Df=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),zr=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Rf=sn("RegExp"),Cc=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Si(n,(o,s)=>{let r;(r=t(o,s,e))!==!1&&(i[s]=r||o)}),Object.defineProperties(e,i)},Nf=e=>{Cc(e,(t,n)=>{if(Nt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Nt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},qf=(e,t)=>{const n={},i=o=>{o.forEach(s=>{n[s]=!0})};return ni(e)?i(e):i(String(e).split(t)),n},$f=()=>{},Lf=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Ho="abcdefghijklmnopqrstuvwxyz",Gr="0123456789",Ac={DIGIT:Gr,ALPHA:Ho,ALPHA_DIGIT:Ho+Ho.toUpperCase()+Gr},Ff=(e=16,t=Ac.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function Uf(e){return!!(e&&Nt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Kf=e=>{const t=new Array(10),n=(i,o)=>{if(bo(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;const s=ni(i)?[]:{};return Si(i,(r,a)=>{const c=n(r,o+1);!vi(c)&&(s[a]=c)}),t[o]=void 0,s}}return i};return n(e,0)},Vf=sn("AsyncFunction"),zf=e=>e&&(bo(e)||Nt(e))&&Nt(e.then)&&Nt(e.catch),R={isArray:ni,isArrayBuffer:gc,isBuffer:hf,isFormData:kf,isArrayBufferView:pf,isString:_f,isNumber:yc,isBoolean:bf,isObject:bo,isPlainObject:Gi,isUndefined:vi,isDate:mf,isFile:gf,isBlob:yf,isRegExp:Rf,isFunction:Nt,isStream:vf,isURLSearchParams:Cf,isTypedArray:jf,isFileList:wf,forEach:Si,merge:vs,extend:Sf,trim:Af,stripBOM:Tf,inherits:xf,toFlatObject:If,kindOf:po,kindOfTest:sn,endsWith:Pf,toArray:Of,forEachEntry:Mf,matchAll:Ef,isHTMLForm:Bf,hasOwnProperty:zr,hasOwnProp:zr,reduceDescriptors:Cc,freezeMethods:Nf,toObjectSet:qf,toCamelCase:Df,noop:$f,toFiniteNumber:Lf,findKey:wc,global:vc,isContextDefined:kc,ALPHABET:Ac,generateString:Ff,isSpecCompliantForm:Uf,toJSONObject:Kf,isAsyncFn:Vf,isThenable:zf};function de(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}R.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Sc=de.prototype,Tc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Tc[e]={value:e}});Object.defineProperties(de,Tc);Object.defineProperty(Sc,"isAxiosError",{value:!0});de.from=(e,t,n,i,o,s)=>{const r=Object.create(Sc);return R.toFlatObject(e,r,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),de.call(r,e.message,t,n,i,o),r.cause=e,r.name=e.name,s&&Object.assign(r,s),r};const Gf=null;function ks(e){return R.isPlainObject(e)||R.isArray(e)}function xc(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function Wr(e,t,n){return e?e.concat(t).map(function(o,s){return o=xc(o),!n&&s?"["+o+"]":o}).join(n?".":""):t}function Wf(e){return R.isArray(e)&&!e.some(ks)}const Xf=R.toFlatObject(R,{},null,function(t){return/^is[A-Z]/.test(t)});function mo(e,t,n){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=R.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,O){return!R.isUndefined(O[T])});const i=n.metaTokens,o=n.visitor||l,s=n.dots,r=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(t);if(!R.isFunction(o))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(R.isDate(y))return y.toISOString();if(!c&&R.isBlob(y))throw new de("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(y)||R.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function l(y,T,O){let j=y;if(y&&!O&&typeof y=="object"){if(R.endsWith(T,"{}"))T=i?T:T.slice(0,-2),y=JSON.stringify(y);else if(R.isArray(y)&&Wf(y)||(R.isFileList(y)||R.endsWith(T,"[]"))&&(j=R.toArray(y)))return T=xc(T),j.forEach(function(B,$){!(R.isUndefined(B)||B===null)&&t.append(r===!0?Wr([T],$,s):r===null?T:T+"[]",d(B))}),!1}return ks(y)?!0:(t.append(Wr(O,T,s),d(y)),!1)}const h=[],_=Object.assign(Xf,{defaultVisitor:l,convertValue:d,isVisitable:ks});function m(y,T){if(!R.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+T.join("."));h.push(y),R.forEach(y,function(j,M){(!(R.isUndefined(j)||j===null)&&o.call(t,j,R.isString(M)?M.trim():M,T,_))===!0&&m(j,T?T.concat(M):[M])}),h.pop()}}if(!R.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Xr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Js(e,t){this._pairs=[],e&&mo(e,this,t)}const Ic=Js.prototype;Ic.append=function(t,n){this._pairs.push([t,n])};Ic.toString=function(t){const n=t?function(i){return t.call(this,i,Xr)}:Xr;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Hf(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pc(e,t,n){if(!t)return e;const i=n&&n.encode||Hf,o=n&&n.serialize;let s;if(o?s=o(t,n):s=R.isURLSearchParams(t)?t.toString():new Js(t,n).toString(i),s){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Jf{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){R.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Hr=Jf,Oc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zf=typeof URLSearchParams<"u"?URLSearchParams:Js,Qf=typeof FormData<"u"?FormData:null,Yf=typeof Blob<"u"?Blob:null,eh={isBrowser:!0,classes:{URLSearchParams:Zf,FormData:Qf,Blob:Yf},protocols:["http","https","file","blob","url","data"]},jc=typeof window<"u"&&typeof document<"u",th=(e=>jc&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),nh=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ih=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jc,hasStandardBrowserEnv:th,hasStandardBrowserWebWorkerEnv:nh},Symbol.toStringTag,{value:"Module"})),en={...ih,...eh};function oh(e,t){return mo(e,new en.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,s){return en.isNode&&R.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function sh(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function rh(e){const t={},n=Object.keys(e);let i;const o=n.length;let s;for(i=0;i<o;i++)s=n[i],t[s]=e[s];return t}function Mc(e){function t(n,i,o,s){let r=n[s++];const a=Number.isFinite(+r),c=s>=n.length;return r=!r&&R.isArray(o)?o.length:r,c?(R.hasOwnProp(o,r)?o[r]=[o[r],i]:o[r]=i,!a):((!o[r]||!R.isObject(o[r]))&&(o[r]=[]),t(n,i,o[r],s)&&R.isArray(o[r])&&(o[r]=rh(o[r])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const n={};return R.forEachEntry(e,(i,o)=>{t(sh(i),o,n,0)}),n}return null}function ah(e,t,n){if(R.isString(e))try{return(t||JSON.parse)(e),R.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Zs={transitional:Oc,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,s=R.isObject(t);if(s&&R.isHTMLForm(t)&&(t=new FormData(t)),R.isFormData(t))return o&&o?JSON.stringify(Mc(t)):t;if(R.isArrayBuffer(t)||R.isBuffer(t)||R.isStream(t)||R.isFile(t)||R.isBlob(t))return t;if(R.isArrayBufferView(t))return t.buffer;if(R.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return oh(t,this.formSerializer).toString();if((a=R.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return mo(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),ah(t)):t}],transformResponse:[function(t){const n=this.transitional||Zs.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&R.isString(t)&&(i&&!this.responseType||o)){const r=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?de.from(a,de.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:en.classes.FormData,Blob:en.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],e=>{Zs.headers[e]={}});const Qs=Zs,ch=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dh=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(r){o=r.indexOf(":"),n=r.substring(0,o).trim().toLowerCase(),i=r.substring(o+1).trim(),!(!n||t[n]&&ch[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Jr=Symbol("internals");function oi(e){return e&&String(e).trim().toLowerCase()}function Wi(e){return e===!1||e==null?e:R.isArray(e)?e.map(Wi):String(e)}function lh(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const uh=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Jo(e,t,n,i,o){if(R.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!R.isString(t)){if(R.isString(i))return t.indexOf(i)!==-1;if(R.isRegExp(i))return i.test(t)}}function fh(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function hh(e,t){const n=R.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,s,r){return this[i].call(this,t,o,s,r)},configurable:!0})})}class go{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function s(a,c,d){const l=oi(c);if(!l)throw new Error("header name must be a non-empty string");const h=R.findKey(o,l);(!h||o[h]===void 0||d===!0||d===void 0&&o[h]!==!1)&&(o[h||c]=Wi(a))}const r=(a,c)=>R.forEach(a,(d,l)=>s(d,l,c));return R.isPlainObject(t)||t instanceof this.constructor?r(t,n):R.isString(t)&&(t=t.trim())&&!uh(t)?r(dh(t),n):t!=null&&s(n,t,i),this}get(t,n){if(t=oi(t),t){const i=R.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return lh(o);if(R.isFunction(n))return n.call(this,o,i);if(R.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=oi(t),t){const i=R.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Jo(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function s(r){if(r=oi(r),r){const a=R.findKey(i,r);a&&(!n||Jo(i,i[a],a,n))&&(delete i[a],o=!0)}}return R.isArray(t)?t.forEach(s):s(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const s=n[i];(!t||Jo(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const n=this,i={};return R.forEach(this,(o,s)=>{const r=R.findKey(i,s);if(r){n[r]=Wi(o),delete n[s];return}const a=t?fh(s):String(s).trim();a!==s&&delete n[s],n[a]=Wi(o),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return R.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&R.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[Jr]=this[Jr]={accessors:{}}).accessors,o=this.prototype;function s(r){const a=oi(r);i[a]||(hh(o,r),i[a]=!0)}return R.isArray(t)?t.forEach(s):s(t),this}}go.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(go.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});R.freezeMethods(go);const pn=go;function Zo(e,t){const n=this||Qs,i=t||n,o=pn.from(i.headers);let s=i.data;return R.forEach(e,function(a){s=a.call(n,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function Ec(e){return!!(e&&e.__CANCEL__)}function Ti(e,t,n){de.call(this,e??"canceled",de.ERR_CANCELED,t,n),this.name="CanceledError"}R.inherits(Ti,de,{__CANCEL__:!0});function ph(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new de("Request failed with status code "+n.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const _h=en.hasStandardBrowserEnv?function(){return{write:function(n,i,o,s,r,a){const c=[];c.push(n+"="+encodeURIComponent(i)),R.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),R.isString(s)&&c.push("path="+s),R.isString(r)&&c.push("domain="+r),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function bh(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function mh(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Bc(e,t){return e&&!bh(t)?mh(e,t):t}const gh=en.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function o(s){let r=s;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(r){const a=R.isString(r)?o(r):r;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function yh(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function wh(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,s=0,r;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),l=i[s];r||(r=d),n[o]=c,i[o]=d;let h=s,_=0;for(;h!==o;)_+=n[h++],h=h%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),d-r<t)return;const m=l&&d-l;return m?Math.round(_*1e3/m):void 0}}function Zr(e,t){let n=0;const i=wh(50,250);return o=>{const s=o.loaded,r=o.lengthComputable?o.total:void 0,a=s-n,c=i(a),d=s<=r;n=s;const l={loaded:s,total:r,progress:r?s/r:void 0,bytes:a,rate:c||void 0,estimated:c&&r&&d?(r-s)/c:void 0,event:o};l[t?"download":"upload"]=!0,e(l)}}const vh=typeof XMLHttpRequest<"u",kh=vh&&function(e){return new Promise(function(n,i){let o=e.data;const s=pn.from(e.headers).normalize(),r=e.responseType;let a;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let d;if(R.isFormData(o)){if(en.hasStandardBrowserEnv||en.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((d=s.getContentType())!==!1){const[y,...T]=d?d.split(";").map(O=>O.trim()).filter(Boolean):[];s.setContentType([y||"multipart/form-data",...T].join("; "))}}let l=new XMLHttpRequest;if(e.auth){const y=e.auth.username||"",T=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+T))}const h=Bc(e.baseURL,e.url);l.open(e.method.toUpperCase(),Pc(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function _(){if(!l)return;const y=pn.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),O={data:!r||r==="text"||r==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:y,config:e,request:l};ph(function(M){n(M),c()},function(M){i(M),c()},O),l=null}if("onloadend"in l?l.onloadend=_:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(_)},l.onabort=function(){l&&(i(new de("Request aborted",de.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new de("Network Error",de.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let T=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const O=e.transitional||Oc;e.timeoutErrorMessage&&(T=e.timeoutErrorMessage),i(new de(T,O.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,e,l)),l=null},en.hasStandardBrowserEnv){const y=gh(h)&&e.xsrfCookieName&&_h.read(e.xsrfCookieName);y&&s.set(e.xsrfHeaderName,y)}o===void 0&&s.setContentType(null),"setRequestHeader"in l&&R.forEach(s.toJSON(),function(T,O){l.setRequestHeader(O,T)}),R.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),r&&r!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",Zr(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Zr(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=y=>{l&&(i(!y||y.type?new Ti(null,e,l):y),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const m=yh(h);if(m&&en.protocols.indexOf(m)===-1){i(new de("Unsupported protocol "+m+":",de.ERR_BAD_REQUEST,e));return}l.send(o||null)})},Cs={http:Gf,xhr:kh};R.forEach(Cs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Qr=e=>`- ${e}`,Ch=e=>R.isFunction(e)||e===null||e===!1,Dc={getAdapter:e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let n,i;const o={};for(let s=0;s<t;s++){n=e[s];let r;if(i=n,!Ch(n)&&(i=Cs[(r=String(n)).toLowerCase()],i===void 0))throw new de(`Unknown adapter '${r}'`);if(i)break;o[r||"#"+s]=i}if(!i){const s=Object.entries(o).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let r=t?s.length>1?`since :
`+s.map(Qr).join(`
`):" "+Qr(s[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:Cs};function Qo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ti(null,e)}function Yr(e){return Qo(e),e.headers=pn.from(e.headers),e.data=Zo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Dc.getAdapter(e.adapter||Qs.adapter)(e).then(function(i){return Qo(e),i.data=Zo.call(e,e.transformResponse,i),i.headers=pn.from(i.headers),i},function(i){return Ec(i)||(Qo(e),i&&i.response&&(i.response.data=Zo.call(e,e.transformResponse,i.response),i.response.headers=pn.from(i.response.headers))),Promise.reject(i)})}const ea=e=>e instanceof pn?e.toJSON():e;function Zn(e,t){t=t||{};const n={};function i(d,l,h){return R.isPlainObject(d)&&R.isPlainObject(l)?R.merge.call({caseless:h},d,l):R.isPlainObject(l)?R.merge({},l):R.isArray(l)?l.slice():l}function o(d,l,h){if(R.isUndefined(l)){if(!R.isUndefined(d))return i(void 0,d,h)}else return i(d,l,h)}function s(d,l){if(!R.isUndefined(l))return i(void 0,l)}function r(d,l){if(R.isUndefined(l)){if(!R.isUndefined(d))return i(void 0,d)}else return i(void 0,l)}function a(d,l,h){if(h in t)return i(d,l);if(h in e)return i(void 0,d)}const c={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(d,l)=>o(ea(d),ea(l),!0)};return R.forEach(Object.keys(Object.assign({},e,t)),function(l){const h=c[l]||o,_=h(e[l],t[l],l);R.isUndefined(_)&&h!==a||(n[l]=_)}),n}const Rc="1.6.1",Ys={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ys[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const ta={};Ys.transitional=function(t,n,i){function o(s,r){return"[Axios v"+Rc+"] Transitional option '"+s+"'"+r+(i?". "+i:"")}return(s,r,a)=>{if(t===!1)throw new de(o(r," has been removed"+(n?" in "+n:"")),de.ERR_DEPRECATED);return n&&!ta[r]&&(ta[r]=!0,console.warn(o(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,r,a):!0}};function Ah(e,t,n){if(typeof e!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const s=i[o],r=t[s];if(r){const a=e[s],c=a===void 0||r(a,s,e);if(c!==!0)throw new de("option "+s+" must be "+c,de.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new de("Unknown option "+s,de.ERR_BAD_OPTION)}}const As={assertOptions:Ah,validators:Ys},yn=As.validators;class so{constructor(t){this.defaults=t,this.interceptors={request:new Hr,response:new Hr}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Zn(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:s}=n;i!==void 0&&As.assertOptions(i,{silentJSONParsing:yn.transitional(yn.boolean),forcedJSONParsing:yn.transitional(yn.boolean),clarifyTimeoutError:yn.transitional(yn.boolean)},!1),o!=null&&(R.isFunction(o)?n.paramsSerializer={serialize:o}:As.assertOptions(o,{encode:yn.function,serialize:yn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=s&&R.merge(s.common,s[n.method]);s&&R.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=pn.concat(r,s);const a=[];let c=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(c=c&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});const d=[];this.interceptors.response.forEach(function(T){d.push(T.fulfilled,T.rejected)});let l,h=0,_;if(!c){const y=[Yr.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,d),_=y.length,l=Promise.resolve(n);h<_;)l=l.then(y[h++],y[h++]);return l}_=a.length;let m=n;for(h=0;h<_;){const y=a[h++],T=a[h++];try{m=y(m)}catch(O){T.call(this,O);break}}try{l=Yr.call(this,m)}catch(y){return Promise.reject(y)}for(h=0,_=d.length;h<_;)l=l.then(d[h++],d[h++]);return l}getUri(t){t=Zn(this.defaults,t);const n=Bc(t.baseURL,t.url);return Pc(n,t.params,t.paramsSerializer)}}R.forEach(["delete","get","head","options"],function(t){so.prototype[t]=function(n,i){return this.request(Zn(i||{},{method:t,url:n,data:(i||{}).data}))}});R.forEach(["post","put","patch"],function(t){function n(i){return function(s,r,a){return this.request(Zn(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}so.prototype[t]=n(),so.prototype[t+"Form"]=n(!0)});const Xi=so;class er{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s;const r=new Promise(a=>{i.subscribe(a),s=a}).then(o);return r.cancel=function(){i.unsubscribe(s)},r},t(function(s,r,a){i.reason||(i.reason=new Ti(s,r,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new er(function(o){t=o}),cancel:t}}}const Sh=er;function Th(e){return function(n){return e.apply(null,n)}}function xh(e){return R.isObject(e)&&e.isAxiosError===!0}const Ss={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ss).forEach(([e,t])=>{Ss[t]=e});const Ih=Ss;function Nc(e){const t=new Xi(e),n=mc(Xi.prototype.request,t);return R.extend(n,Xi.prototype,t,{allOwnKeys:!0}),R.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return Nc(Zn(e,o))},n}const dt=Nc(Qs);dt.Axios=Xi;dt.CanceledError=Ti;dt.CancelToken=Sh;dt.isCancel=Ec;dt.VERSION=Rc;dt.toFormData=mo;dt.AxiosError=de;dt.Cancel=dt.CanceledError;dt.all=function(t){return Promise.all(t)};dt.spread=Th;dt.isAxiosError=xh;dt.mergeConfig=Zn;dt.AxiosHeaders=pn;dt.formToJSON=e=>Mc(R.isHTMLForm(e)?new FormData(e):e);dt.getAdapter=Dc.getAdapter;dt.HttpStatusCode=Ih;dt.default=dt;const Ph=dt,Oh="1.2.1",jh="1.29.0",Mh={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class qc extends Error{}class $c extends qc{constructor(t,n){super(t),this.code=n,this.type=Mh[n]??"ServerError"}}class Eh extends qc{constructor(t,n,i){super(t),this.status=n,this.statusText=i}}var tr=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ce=(e,t,n)=>(tr(e,t,"read from private field"),n?n.call(e):t.get(e)),wn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Xn=(e,t,n,i)=>(tr(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Bh=(e,t,n,i)=>({set _(o){Xn(e,t,o,n)},get _(){return Ce(e,t,i)}}),Lc=(e,t,n)=>(tr(e,t,"access private method"),n),Pn,fi,ln,Mn,ki,Hn,Ts,Fc,nr,Uc;function Dh(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const Rh={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Nh{constructor(t,n={}){if(wn(this,Ts),wn(this,nr),wn(this,Pn,0),wn(this,fi,0),wn(this,ln,null),wn(this,Mn,null),wn(this,ki,new Set),wn(this,Hn,new Map),this.endpoint=t,this.options={...Rh,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Dh(this.endpoint))}async makeRequest(t,n){const i=await Lc(this,Ts,Fc).call(this);return new Promise((o,s)=>{Xn(this,Pn,Ce(this,Pn)+1),Ce(this,Hn).set(Ce(this,Pn),{resolve:o,reject:s,timeout:setTimeout(()=>{Ce(this,Hn).delete(Ce(this,Pn)),s(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),i.send(JSON.stringify({jsonrpc:"2.0",id:Ce(this,Pn),method:t,params:n}))}).then(({error:o,result:s})=>{if(o)throw new $c(o.message,o.code);return s})}async subscribe(t){const n=new qh(t);return Ce(this,ki).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}Pn=new WeakMap;fi=new WeakMap;ln=new WeakMap;Mn=new WeakMap;ki=new WeakMap;Hn=new WeakMap;Ts=new WeakSet;Fc=function(){return Ce(this,Mn)?Ce(this,Mn):(Xn(this,Mn,new Promise(e=>{var t;(t=Ce(this,ln))==null||t.close(),Xn(this,ln,new this.options.WebSocketConstructor(this.endpoint)),Ce(this,ln).addEventListener("open",()=>{Xn(this,fi,0),e(Ce(this,ln))}),Ce(this,ln).addEventListener("close",()=>{Bh(this,fi)._++,Ce(this,fi)<=this.options.maxReconnects&&setTimeout(()=>{Lc(this,nr,Uc).call(this)},this.options.reconnectTimeout)}),Ce(this,ln).addEventListener("message",({data:n})=>{let i;try{i=JSON.parse(n)}catch(o){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:o}));return}if("id"in i&&i.id!=null&&Ce(this,Hn).has(i.id)){const{resolve:o,timeout:s}=Ce(this,Hn).get(i.id);clearTimeout(s),o(i)}else if("params"in i){const{params:o}=i;Ce(this,ki).forEach(s=>{s.subscriptionId===o.subscription&&o.subscription===s.subscriptionId&&s.onMessage(o.result)})}})})),Ce(this,Mn))};nr=new WeakSet;Uc=async function(){var e;return(e=Ce(this,ln))==null||e.close(),Xn(this,Mn,null),Promise.allSettled([...Ce(this,ki)].map(t=>t.subscribe(this)))};class qh{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[n]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const n=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=n)}}var ir=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Dt=(e,t,n)=>(ir(e,t,"read from private field"),n?n.call(e):t.get(e)),Ei=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},xs=(e,t,n,i)=>(ir(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),$h=(e,t,n)=>(ir(e,t,"access private method"),n),li,Kt,hi,Is,Kc;class Lh{constructor(t){Ei(this,Is),Ei(this,li,0),Ei(this,Kt,void 0),Ei(this,hi,void 0),xs(this,Kt,t)}fetch(t,n){const i=Dt(this,Kt).fetch??fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(t,n)}async request(t){var o,s;xs(this,li,Dt(this,li)+1);const n=await this.fetch(((o=Dt(this,Kt).rpc)==null?void 0:o.url)??Dt(this,Kt).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Oh,"Client-Target-Api-Version":jh,...(s=Dt(this,Kt).rpc)==null?void 0:s.headers},body:JSON.stringify({jsonrpc:"2.0",id:Dt(this,li),method:t.method,params:t.params})});if(!n.ok)throw new Eh(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&i.error!=null)throw new $c(i.error.message,i.error.code);return i.result}async subscribe(t){const n=await $h(this,Is,Kc).call(this).subscribe(t);return async()=>!!await n()}}li=new WeakMap;Kt=new WeakMap;hi=new WeakMap;Is=new WeakSet;Kc=function(){var e;if(!Dt(this,hi)){const t=Dt(this,Kt).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");xs(this,hi,new Nh(((e=Dt(this,Kt).websocket)==null?void 0:e.url)??Dt(this,Kt).url,{WebSocketConstructor:t,...Dt(this,Kt).websocket}))}return Dt(this,hi)};const Vc=Symbol.for("@mysten/SuiClient");function T_(e){return typeof e=="object"&&e!==null&&e[Vc]===!0}class Fh{get[Vc](){return!0}constructor(t){this.transport=t.transport??new Lh({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!Zt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!Zt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!Zt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!Zt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,n){return await this.transport.request({method:t,params:n})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!Zt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!ci(he(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(i=>{if(!i||!ci(he(i)))throw new Error(`Invalid Sui Object id ${i}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!Br(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(i=>{if(!Br(i))throw new Error(`Invalid Transaction digest ${i}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock(t){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Ct(t.transactionBlock),Array.isArray(t.signature)?t.signature:[t.signature],t.options,t.requestType]})}async signAndExecuteTransaction({transaction:t,signer:n,...i}){let o;t instanceof Uint8Array?o=t:(t.setSenderIfNotSet(n.toSuiAddress()),o=await t.build({client:this}));const{signature:s,bytes:r}=await n.signTransaction(o);return this.executeTransactionBlock({transactionBlock:r,signature:s,...i})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!Zt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(n=>{if(!n||!ci(he(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var i;let n;if(bc(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=Ct(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")n=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)n=Ct(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,(i=t.gasPrice)==null?void 0:i.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Ct(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!ci(he(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),n=yi(t.digest);return wi(n.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...n}){const{nextCursor:i,hasNextPage:o,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:o,nextCursor:i,data:s.map(r=>Fl(r,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransaction({signal:t,timeout:n=60*1e3,pollInterval:i=2*1e3,...o}){const s=AbortSignal.timeout(n),r=new Promise((a,c)=>{s.addEventListener("abort",()=>c(s.reason))});for(r.catch(()=>{});!s.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(o)}catch{await Promise.race([new Promise(c=>setTimeout(c,i)),r])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}var Uh=Object.defineProperty,Kh=(e,t,n)=>t in e?Uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vh=(e,t,n)=>(Kh(e,typeof t!="symbol"?t+"":t,n),n),Mt=5*60*1e3,V=24*60*60*1e3;function pe(e){return Date.parse(new Date().toString())+e}var At=class{constructor(e,t=0){F(this,"overdueTime");F(this,"value");this.overdueTime=t,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};K.config({precision:64,rounding:K.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var gt=K,L=class extends Error{constructor(t,n){super(t);F(this,"message");F(this,"errorCode");this.message=t,this.errorCode=n}static isClmmpoolsErrorCode(t,n){return t instanceof L&&t.errorCode===n}},H=new g(0),nn=new g(1),yo=new g(2);yo.pow(new g(128));var Qn=yo.pow(new g(64)).sub(nn),zh=yo.pow(new g(128)).sub(nn),se=class{static toX64_BN(e){return e.mul(new g(2).pow(new g(64)))}static toX64_Decimal(e){return e.mul(gt.pow(2,64))}static toX64(e){return new g(e.mul(gt.pow(2,64)).floor().toFixed())}static fromX64(e){return new gt(e.toString()).mul(gt.pow(2,-64))}static fromX64_Decimal(e){return e.mul(gt.pow(2,-64))}static fromX64_BN(e){return e.div(new g(2).pow(new g(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(Qn).gt(H)&&(t=t.add(nn)),t}static divRoundUp(e,t){return e.mod(t).eq(H)?e.div(t):e.div(t).add(new g(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(zh):e.sub(t)}static checkUnsignedSub(e,t){const n=e.sub(t);if(n.isNeg())throw new L("Unsigned integer sub overflow","UnsignedIntegerOverflow");return n}static checkMul(e,t,n){const i=e.mul(t);if(this.isOverflow(i,n))throw new L("Multiplication overflow","MultiplicationOverflow");return i}static checkMulDivFloor(e,t,n,i){if(n.eq(H))throw new L("Devide by zero","DivideByZero");const o=e.mul(t).div(n);if(this.isOverflow(o,i))throw new L("Multiplication div overflow","MulDivOverflow");return o}static checkMulDivCeil(e,t,n,i){if(n.eq(H))throw new L("Devide by zero","DivideByZero");const o=e.mul(t).add(n.sub(nn)).div(n);if(this.isOverflow(o,i))throw new L("Multiplication div overflow","MulDivOverflow");return o}static checkMulDivRound(e,t,n,i){if(n.eq(H))throw new L("Devide by zero","DivideByZero");const o=e.mul(t.add(n.shrn(1))).div(n);if(this.isOverflow(o,i))throw new L("Multiplication div overflow","MulDivOverflow");return o}static checkMulShiftRight(e,t,n,i){const o=e.mul(t).div(new g(2).pow(new g(n)));if(this.isOverflow(o,i))throw new L("Multiplication shift right overflow","MulShiftRightOverflow");return o}static checkMulShiftRight64RoundUpIf(e,t,n,i){const o=e.mul(t),r=i&&o.and(Qn).gt(H)?o.shrn(64).add(nn):o.shrn(64);if(this.isOverflow(r,n))throw new L("Multiplication shift right overflow","MulShiftRightOverflow");return r}static checkMulShiftLeft(e,t,n,i){const o=e.mul(t).shln(n);if(this.isOverflow(o,i))throw new L("Multiplication shift left overflow","MulShiftLeftOverflow");return o}static checkDivRoundUpIf(e,t,n){if(t.eq(H))throw new L("Devide by zero","DivideByZero");return n?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(yo.pow(new g(t)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(H)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new g("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new g(1)))}static neg_from(e){return e.eq(H)?e:this.u128_neg(e).add(new g(1)).or(new g(1).shln(127))}};function Gh(e){return{coinA:e.coinTypeA,coinB:e.coinTypeB,currentSqrtPrice:new g(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new g(e.fee_growth_global_a),feeGrowthGlobalB:new g(e.fee_growth_global_b),feeProtocolCoinA:new g(e.fee_protocol_coin_a),feeProtocolCoinB:new g(e.fee_protocol_coin_b),feeRate:new g(e.fee_rate),liquidity:new g(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:""}}var Ps=443636,Os=-443636,wo="79226673515401279992447579055",vo="4295048016",Kn=new g(1e6),q="0x0000000000000000000000000000000000000000000000000000000000000006",Wh="partner",pi="pool_script",Sn="pool_script_v2",zc="pool_script_v3",En="router",Yo="router_with_partner",qt="fetcher_script",Xh="expect_swap",na="utils",es="custodian_v2",Hh="clob_v2",Jh="endpoints_v2",Gc=(e=>(e.Deleted="Deleted",e.Exists="Exists",e.NotExists="NotExists",e))(Gc||{});function I(e){if(e.config===void 0)throw new L(`package: ${e.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return e.config}var Zh=14,Qh="59543866431248",Yh="184467440737095516",ep="15793534762490258745",tp=443636;function np(e,t,n){const i=e.toTwos(n).shln(t);return i.imaskn(n+1),i.fromTwos(n)}function ae(e,t,n){const i=e.toTwos(n).shrn(t);return i.imaskn(n-t+1),i.fromTwos(n-t)}function ip(e){let t;return e&1?t=new g("79232123823359799118286999567"):t=new g("79228162514264337593543950336"),e&2&&(t=ae(t.mul(new g("79236085330515764027303304731")),96,256)),e&4&&(t=ae(t.mul(new g("79244008939048815603706035061")),96,256)),e&8&&(t=ae(t.mul(new g("79259858533276714757314932305")),96,256)),e&16&&(t=ae(t.mul(new g("79291567232598584799939703904")),96,256)),e&32&&(t=ae(t.mul(new g("79355022692464371645785046466")),96,256)),e&64&&(t=ae(t.mul(new g("79482085999252804386437311141")),96,256)),e&128&&(t=ae(t.mul(new g("79736823300114093921829183326")),96,256)),e&256&&(t=ae(t.mul(new g("80248749790819932309965073892")),96,256)),e&512&&(t=ae(t.mul(new g("81282483887344747381513967011")),96,256)),e&1024&&(t=ae(t.mul(new g("83390072131320151908154831281")),96,256)),e&2048&&(t=ae(t.mul(new g("87770609709833776024991924138")),96,256)),e&4096&&(t=ae(t.mul(new g("97234110755111693312479820773")),96,256)),e&8192&&(t=ae(t.mul(new g("119332217159966728226237229890")),96,256)),e&16384&&(t=ae(t.mul(new g("179736315981702064433883588727")),96,256)),e&32768&&(t=ae(t.mul(new g("407748233172238350107850275304")),96,256)),e&65536&&(t=ae(t.mul(new g("2098478828474011932436660412517")),96,256)),e&131072&&(t=ae(t.mul(new g("55581415166113811149459800483533")),96,256)),e&262144&&(t=ae(t.mul(new g("38992368544603139932233054999993551")),96,256)),ae(t,32,256)}function op(e){const t=Math.abs(e);let n;return t&1?n=new g("18445821805675392311"):n=new g("18446744073709551616"),t&2&&(n=ae(n.mul(new g("18444899583751176498")),64,256)),t&4&&(n=ae(n.mul(new g("18443055278223354162")),64,256)),t&8&&(n=ae(n.mul(new g("18439367220385604838")),64,256)),t&16&&(n=ae(n.mul(new g("18431993317065449817")),64,256)),t&32&&(n=ae(n.mul(new g("18417254355718160513")),64,256)),t&64&&(n=ae(n.mul(new g("18387811781193591352")),64,256)),t&128&&(n=ae(n.mul(new g("18329067761203520168")),64,256)),t&256&&(n=ae(n.mul(new g("18212142134806087854")),64,256)),t&512&&(n=ae(n.mul(new g("17980523815641551639")),64,256)),t&1024&&(n=ae(n.mul(new g("17526086738831147013")),64,256)),t&2048&&(n=ae(n.mul(new g("16651378430235024244")),64,256)),t&4096&&(n=ae(n.mul(new g("15030750278693429944")),64,256)),t&8192&&(n=ae(n.mul(new g("12247334978882834399")),64,256)),t&16384&&(n=ae(n.mul(new g("8131365268884726200")),64,256)),t&32768&&(n=ae(n.mul(new g("3584323654723342297")),64,256)),t&65536&&(n=ae(n.mul(new g("696457651847595233")),64,256)),t&131072&&(n=ae(n.mul(new g("26294789957452057")),64,256)),t&262144&&(n=ae(n.mul(new g("37481735321082")),64,256)),n}var G=class{static priceToSqrtPriceX64(e,t,n){return se.toX64(e.mul(gt.pow(10,n-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,n){return se.fromX64(e).pow(2).mul(gt.pow(10,t-n))}static tickIndexToSqrtPriceX64(e){return e>0?new g(ip(e)):new g(op(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new g(wo))||e.lt(new g(vo)))throw new L("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const t=e.bitLength()-1,n=new g(t-64),i=np(n,32,128);let o=new g("8000000000000000","hex"),s=0,r=new g(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;o.gt(new g(0))&&s<Zh;){a=a.mul(a);const y=a.shrn(127);a=a.shrn(63+y.toNumber()),r=r.add(o.mul(y)),o=o.shrn(1),s+=1}const c=r.shrn(32),l=i.add(c).mul(new g(Qh)),h=ae(l.sub(new g(Yh)),64,128).toNumber(),_=ae(l.add(new g(ep)),64,128).toNumber();return h===_?h:G.tickIndexToSqrtPriceX64(_).lte(e)?_:h}static tickIndexToPrice(e,t,n){return G.sqrtPriceX64ToPrice(G.tickIndexToSqrtPriceX64(e),t,n)}static priceToTickIndex(e,t,n){return G.sqrtPriceX64ToTickIndex(G.priceToSqrtPriceX64(e,t,n))}static priceToInitializableTickIndex(e,t,n,i){return G.getInitializableTickIndex(G.priceToTickIndex(e,t,n),i)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return G.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return G.getInitializableTickIndex(e,t)-t}};function x_(e){const t=[];for(const n of e){const i={objectId:n.objectId,index:Number(ct(BigInt(n.index)).toString()),sqrtPrice:n.sqrtPrice,liquidityNet:new g(BigInt.asIntN(128,BigInt(BigInt(n.liquidityNet.toString()))).toString()),liquidityGross:n.liquidityGross,feeGrowthOutsideA:n.feeGrowthOutsideA,feeGrowthOutsideB:n.feeGrowthOutsideB,rewardersGrowthOutside:[new g(n.rewardersGrowthOutside[0]),new g(n.rewardersGrowthOutside[1]),new g(n.rewardersGrowthOutside[2])]};t.push(i)}return t}function sp(e){return w(e).add(w(tp))}new g(365);new g(24);new g(3600);new g(.5);function I_(e,t,n,i){const o=Math.max(e,n),r=Math.min(t,i)-o,a=t-e,c=i-n,d=new K(a.toString()),l=new K(c.toString()),h=new K(r.toString());let _=new K("0");return r<0?_=new K("0"):a===r?_=l.div(h):c===r?_=h.div(d):_=h.mul(h).div(l).div(d),_}var Qt=class{static getDefaultSqrtPriceLimit(e){return new g(e?vo:wo)}static getDefaultOtherAmountThreshold(e){return e?H:Qn}};function Wc(e,t,n,i){if(n.eq(H))return e;const o=se.checkMulShiftLeft(e,t,64,256),s=t.shln(64),r=se.checkMul(e,n,256);if(!i&&s.lte(r))throw new L("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=i?se.checkDivRoundUpIf(o,s.add(r),!0):se.checkDivRoundUpIf(o,s.sub(r),!0);if(a.lt(new g(vo)))throw new L("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new g(wo)))throw new L("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function Xc(e,t,n,i){const o=se.checkDivRoundUpIf(n.shln(64),t,!i),s=i?e.add(o):e.sub(o);if(s.lt(new g(vo))||s.gt(new g(wo)))throw new L("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return s}function rp(e,t,n,i){return i?Wc(e,t,n,!0):Xc(e,t,n,!0)}function ap(e,t,n,i){return i?Xc(e,t,n,!1):Wc(e,t,n,!1)}function ia(e,t,n,i){const o=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(H)||o.eq(H))return H;let s;if(i){const r=new g(n).mul(new g(o)).shln(64),a=t.mul(e),c=r.div(a);s=r.mod(a).eq(H)?c:c.add(nn)}else{const r=new g(n).mul(new g(o));s=r.and(Qn).gt(H)?r.shrn(64).add(nn):r.shrn(64)}return s}function oa(e,t,n,i){const o=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(H)||o.eq(H))return H;let s;if(i)s=n.mul(o).shrn(64);else{const r=n.mul(o).shln(64),a=t.mul(e);s=r.div(a)}return s}function cp(e,t,n,i,o,s){if(n===H)return{amountIn:H,amountOut:H,nextSqrtPrice:t,feeAmount:H};const r=e.gte(t);let a,c,d,l;if(s){const h=se.checkMulDivFloor(i,se.checkUnsignedSub(Kn,o),Kn,64),_=ia(e,t,n,r);_.gt(h)?(a=h,l=se.checkUnsignedSub(i,h),d=rp(e,n,h,r)):(a=_,l=se.checkMulDivCeil(a,o,Kn.sub(o),64),d=t),c=oa(e,d,n,r)}else{const h=oa(e,t,n,r);h.gt(i)?(c=i,d=ap(e,n,i,r)):(c=h,d=t),a=ia(e,d,n,r),l=se.checkMulDivCeil(a,o,Kn.sub(o),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:d,feeAmount:l}}function dp(e,t,n,i,o){let s=n,r=i.liquidity,{currentSqrtPrice:a}=i;const c={amountIn:H,amountOut:H,feeAmount:H,refAmount:H,nextSqrtPrice:H,crossTickNum:0};let d,l;const h=Qt.getDefaultSqrtPriceLimit(e);for(const _ of o){if(e&&i.currentTickIndex<_.index||!e&&i.currentTickIndex>=_.index||_===null)continue;e&&h.gt(_.sqrtPrice)||!e&&h.lt(_.sqrtPrice)?d=h:d=_.sqrtPrice;const m=cp(a,d,r,s,i.feeRate,t);if(m.amountIn.eq(H)||(s=t?s.sub(m.amountIn.add(m.feeAmount)):s.sub(m.amountOut)),c.amountIn=c.amountIn.add(m.amountIn),c.amountOut=c.amountOut.add(m.amountOut),c.feeAmount=c.feeAmount.add(m.feeAmount),m.nextSqrtPrice.eq(_.sqrtPrice)?(l=_.liquidityNet.mul(new g(-1)),e?se.is_neg(l)?r=r.add(new g(wt(BigInt(l.toString()),128))):r=r.add(l):se.is_neg(l)?r=r.sub(new g(wt(BigInt(l.toString()),128))):r=r.sub(l),a=_.sqrtPrice):a=m.nextSqrtPrice,c.crossTickNum+=1,s.eq(H))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function Bi(e,t,n){const i=g.min(e,t),o=g.max(e,t),s=se.fromX64_BN(n.mul(o).mul(i)),r=o.sub(i);return s.div(r)}function Di(e,t,n){const i=g.min(e,t),s=g.max(e,t).sub(i);return n.shln(64).div(s)}var pt=class{static updateFeeRate(e,t,n,i,o){const s=se.checkMulDivCeil(t,new g(i),Kn,64),r=n===0?H:se.checkMulDivFloor(t,new g(n),Kn,64),a=t.mul(s).mul(r);if(o?e.feeProtocolCoinA=e.feeProtocolCoinA.add(s):e.feeProtocolCoinB=e.feeProtocolCoinB.add(s),a.eq(H)||e.liquidity.eq(H))return{refFee:r,clmm:e};const c=a.shln(64).div(e.liquidity);return o?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:r,clmm:e}}static getCoinAmountFromLiquidity(e,t,n,i,o){const s=new gt(e.toString()),r=new gt(t.toString()),a=new gt(n.toString()),c=new gt(i.toString());let d,l;return t.lt(n)?(d=se.toX64_Decimal(s).mul(c.sub(a)).div(a.mul(c)),l=new gt(0)):t.lt(i)?(d=se.toX64_Decimal(s).mul(c.sub(r)).div(r.mul(c)),l=se.fromX64_Decimal(s.mul(r.sub(a)))):(d=new gt(0),l=se.fromX64_Decimal(s.mul(c.sub(a)))),o?{coinA:new g(d.ceil().toString()),coinB:new g(l.ceil().toString())}:{coinA:new g(d.floor().toString()),coinB:new g(l.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,t,n,i,o,s,r){const a=G.sqrtPriceX64ToTickIndex(r),c=G.tickIndexToSqrtPriceX64(e),d=G.tickIndexToSqrtPriceX64(t);let l;if(a<e){if(!i)throw new L("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");l=Bi(c,d,n)}else if(a>t){if(i)throw new L("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");l=Di(d,c,n)}else i?l=Bi(r,d,n):l=Di(r,c,n);const h=pt.getCoinAmountFromLiquidity(l,r,c,d,o),_=o?w(h.coinA.toString()).mul(1+s).toString():w(h.coinA.toString()).mul(1-s).toString(),m=o?w(h.coinB.toString()).mul(1+s).toString():w(h.coinB.toString()).mul(1-s).toString();return{coinAmountA:h.coinA,coinAmountB:h.coinB,tokenMaxA:o?new g(gt.ceil(_).toString()):new g(gt.floor(_).toString()),tokenMaxB:o?new g(gt.ceil(m).toString()):new g(gt.floor(m).toString()),liquidityAmount:l,fix_amount_a:i}}static estimateLiquidityFromcoinAmounts(e,t,n,i){if(t>n)throw new L("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const o=G.sqrtPriceX64ToTickIndex(e),s=G.tickIndexToSqrtPriceX64(t),r=G.tickIndexToSqrtPriceX64(n);if(o<t)return Bi(s,r,i.coinA);if(o>=n)return Di(r,s,i.coinB);const a=Bi(e,r,i.coinA),c=Di(e,s,i.coinB);return g.min(a,c)}static estCoinAmountsFromTotalAmount(e,t,n,i,o,s){const{ratioA:r,ratioB:a}=pt.calculateDepositRatioFixTokenA(e,t,n),c=w(i).mul(r).div(o),d=w(i).mul(a).div(s);return{amountA:c,amountB:d}}static calculateDepositRatioFixTokenA(e,t,n){const i=new g(1e8),{coinAmountB:o}=pt.estLiquidityAndcoinAmountFromOneAmounts(e,t,i,!0,!0,0,n),s=G.sqrtPriceX64ToPrice(n,0,0),r=w(i.toString()).mul(s),a=r.add(o.toString()),c=r.div(a),d=w(o.toString()).div(a);return{ratioA:c,ratioB:d}}};function Hc(e){return e.startsWith("0x")?`${e.slice(2)}`:e}var lp=0,Jc=1,up=2;function sa(e,t){return e===t?lp:e<t?Jc:up}function fp(e,t){let n=0;const i=e.length<=t.length?e.length:t.length,o=sa(e.length,t.length);for(;n<i;){const s=sa(e.charCodeAt(n),t.charCodeAt(n));if(n+=1,s!==0)return s}return o}function js(e,t){return fp(e,t)===Jc}function ro(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let o=[e,...t].filter(Boolean).join("::");return n&&n.length&&(o+=`<${n.join(", ")}>`),o}function D(e){var t;try{let n=e.replace(/\s/g,"");const i=n.match(/(<.+>)$/),o=(t=i==null?void 0:i[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(o){n=n.slice(0,n.indexOf("<"));const d={...D(n),type_arguments:o.map(l=>D(l).source_address)};return d.type_arguments=d.type_arguments.map(l=>ce.isSuiCoin(l)?l:D(l).source_address),d.source_address=ro(d.full_address,d.type_arguments),d}const s=n.split("::"),a={full_address:n,address:n===ao||n===mp?"0x2":he(s[0]),module:s[1],name:s[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=ro(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function ke(e){return D(e).source_address}function hp(e){return e.toLowerCase().startsWith("0x")?he(e):e}var pp=(e,t=!0)=>{const n=e.split("::"),i=n.shift();let o=he(i);return t&&(o=Hc(o)),`${o}::${n.join("::")}`};function or(e){for(const t in e){const n=typeof e[t];if(n==="object")or(e[t]);else if(n==="string"){const i=e[t];i&&!i.includes("::")&&(e[t]=hp(i))}}}var _p="0x2::coin::Coin",bp=/^0x2::coin::Coin<(.+)>$/,ao="0x2::sui::SUI",mp="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",ce=class{static getCoinTypeArg(e){const t=e.type.match(bp);return t?t[1]:null}static isSUI(e){const t=ce.getCoinTypeArg(e);return t?ce.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let n=BigInt(0);return e.forEach(i=>{t===i.coinAddress&&(n+=BigInt(i.balance))}),n}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${_p}<${e}>`}static getFaucetCoins(e){const{events:t}=e,n=[];return t==null||t.forEach(i=>{const{type:o}=i;if(D(o).name==="InitEvent"){const s=i.parsedJson;n.push({transactionModule:i.transactionModule,suplyID:s.suplyID,decimals:s.decimals})}}),n}static getCoinAssets(e,t){const n=[];return t.forEach(i=>{ke(i.coinAddress)===ke(e)&&n.push(i)}),n}static isSuiCoin(e){return D(e).full_address===ao}static selectCoinObjectIdGreaterThanOrEqual(e,t,n=[]){const i=ce.selectCoinAssetGreaterThanOrEqual(e,t,n),o=i.selectedCoins.map(a=>a.coinObjectId),s=i.remainingCoins,r=i.selectedCoins.map(a=>a.balance.toString());return{objectArray:o,remainCoins:s,amountArray:r}}static selectCoinAssetGreaterThanOrEqual(e,t,n=[]){const i=ce.sortByBalance(e.filter(c=>!n.includes(c.coinObjectId))),o=ce.calculateTotalBalance(i);if(o<t)return{selectedCoins:[],remainingCoins:i};if(o===t)return{selectedCoins:i,remainingCoins:[]};let s=BigInt(0);const r=[],a=[...i];for(;s<o;){const c=t-s,d=a.findIndex(h=>h.balance>=c);if(d!==-1){r.push(a[d]),a.splice(d,1);break}const l=a.pop();l.balance>0&&(r.push(l),s+=l.balance)}return{selectedCoins:ce.sortByBalance(r),remainingCoins:ce.sortByBalance(a)}}static sortByBalance(e){return e.sort((t,n)=>t.balance<n.balance?-1:t.balance>n.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,n)=>t.balance>n.balance?-1:t.balance<n.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,n)=>t+n.balance,BigInt(0))}};function gp(e,t,n){let i=new g(0),o=new g(0);e.current_tick_index<t.index?(i=se.subUnderflowU128(new g(e.fee_growth_global_a),new g(t.feeGrowthOutsideA)),o=se.subUnderflowU128(new g(e.fee_growth_global_b),new g(t.feeGrowthOutsideB))):(i=new g(t.feeGrowthOutsideA),o=new g(t.feeGrowthOutsideB));let s=new g(0),r=new g(0);e.current_tick_index<n.index?(s=new g(n.feeGrowthOutsideA),r=new g(n.feeGrowthOutsideB)):(s=se.subUnderflowU128(new g(e.fee_growth_global_a),new g(n.feeGrowthOutsideA)),r=se.subUnderflowU128(new g(e.fee_growth_global_b),new g(n.feeGrowthOutsideB)));const a=se.subUnderflowU128(se.subUnderflowU128(new g(e.fee_growth_global_a),i),s),c=se.subUnderflowU128(se.subUnderflowU128(new g(e.fee_growth_global_b),o),r);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function yp(e,t,n){const i=se.subUnderflowU128(t,new g(e.fee_growth_inside_a)),o=new g(e.liquidity).mul(i).shrn(64),s=se.subUnderflowU128(n,new g(e.fee_growth_inside_b)),r=new g(e.liquidity).mul(s).shrn(64),a=new g(e.fee_owed_a).add(o),c=new g(e.fee_owed_b).add(r);return{position_id:e.pos_object_id,feeOwedA:a,feeOwedB:c}}function P_(e){const{fee_growth_inside_a:t,fee_growth_inside_b:n}=gp(e.clmmpool,e.tickLower,e.tickUpper);return yp(e.position,t,n)}var _i=class{constructor(e,t){F(this,"numerator");F(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return _i.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const n=typeof e=="number"?new g(e.toString()):e,i=typeof t=="number"?new g(t.toString()):t;return new _i(n,i)}};function Ms(e,{numerator:t,denominator:n},i){return i?e.mul(n.add(t)).div(n):e.mul(n).div(n.add(t))}function ts(e,t,n){return{tokenMaxA:Ms(e.coinA,t,n),tokenMaxB:Ms(e.coinB,t,n)}}function w(e){return K.isDecimal(e)?e:new K(e===void 0?0:e)}function wp(e){return w(10).pow(w(e).abs())}function xi(e){return e.data}function Zc(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const{error:t}=e;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function Qc(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function vp(e){if("reference"in e)return e.reference;const t=xi(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:Zc(e)}function Gt(e){var t;return"objectId"in e?e.objectId:((t=vp(e))==null?void 0:t.objectId)??Qc(e)}function kp(e){return e.data!==void 0}function Cp(e){return e.content!==void 0}function Yc(e){const t="data"in e?xi(e):e;if(!(!t||!Cp(t)||t.content.dataType!=="moveObject"))return t.content}function Ht(e){var t;return(t=Yc(e))==null?void 0:t.type}function Dn(e){var n;const t=kp(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((n=t==null?void 0:t.content)==null?void 0:n.dataType)==="package"?"package":Ht(e):t==null?void 0:t.type}function Ii(e){var t;return(t=xi(e))==null?void 0:t.previousTransaction}function co(e){var t;return(t=xi(e))==null?void 0:t.owner}function Ap(e){var n;const t=(n=xi(e))==null?void 0:n.display;return t||{data:null,error:null}}function Y(e){var n;const t=(n=Yc(e))==null?void 0:n.fields;if(t)return"fields"in t?t.fields:t}function Sp(e,t){const n=wp(w(t));return Number(w(e).mul(n))}function wt(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function ct(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function Tp(e,t,n){const i=D(e).name,o=D(t).name;return`${i}-${o}[${n}]`}function ns(e){const t=Ht(e),n=D(t),i=Y(e);if(i==null)throw new L(`Pool id ${Gt(e)} not exists.`,"InvalidPoolObject");const o=[];i.rewarder_manager.fields.rewarders.forEach(r=>{const{emissions_per_second:a}=r.fields,c=se.fromX64(new g(a)),d=Math.floor(c.toNumber()*60*60*24);o.push({emissions_per_second:a,coinAddress:D(r.fields.reward_coin.fields.name).source_address,growth_global:r.fields.growth_global,emissionsEveryDay:d})});const s={poolAddress:Gt(e),poolType:t,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:i.coin_a,coinAmountB:i.coin_b,current_sqrt_price:i.current_sqrt_price,current_tick_index:ct(BigInt(i.current_tick_index.fields.bits)),fee_growth_global_a:i.fee_growth_global_a,fee_growth_global_b:i.fee_growth_global_b,fee_protocol_coin_a:i.fee_protocol_coin_a,fee_protocol_coin_b:i.fee_protocol_coin_b,fee_rate:i.fee_rate,is_pause:i.is_pause,liquidity:i.liquidity,position_manager:{positions_handle:i.position_manager.fields.positions.fields.id.id,size:i.position_manager.fields.positions.fields.size},rewarder_infos:o,rewarder_last_updated_time:i.rewarder_manager.fields.last_updated_time,tickSpacing:i.tick_spacing,ticks_handle:i.tick_manager.fields.ticks.fields.id.id,uri:i.url,index:Number(i.index),name:""};return s.name=Tp(s.coinTypeA,s.coinTypeB,s.tickSpacing),s}function ko(e){const t=Ap(e).data,n={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(n.creator=t.creator,n.description=t.description,n.image_url=t.image_url,n.link=t.link,n.name=t.name,n.project_url=t.project_url),n}function Jn(e){var r,a;if(e.error!=null||((a=(r=e.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new L(`Position not exists. Get Position error:${e.error}`,"InvalidPositionObject");let t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},n={...t,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},i=Y(e);if(i){const c=Ht(e),d=co(e);"nft"in i?(i=i.nft.fields,t.description=i.description,t.name=i.name,t.link=i.url):t=ko(e),n={...t,pos_object_id:i.id.id,owner:d.AddressOwner,type:c,liquidity:i.liquidity,coin_type_a:i.coin_type_a.fields.name,coin_type_b:i.coin_type_b.fields.name,tick_lower_index:ct(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:ct(BigInt(i.tick_upper_index.fields.bits)),index:i.index,pool:i.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const o=Zc(e);o&&(n.pos_object_id=o.objectId,n.position_status="Deleted");const s=Qc(e);return s&&(n.pos_object_id=s,n.position_status="NotExists"),n}function ed(e){const t={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};e="fields"in e?e.fields:e,e.rewards.forEach((s,r)=>{const{amount_owned:a,growth_inside:c}="fields"in s?s.fields:s;r===0?(t.reward_amount_owed_0=a,t.reward_growth_inside_0=c):r===1?(t.reward_amount_owed_1=a,t.reward_growth_inside_1=c):r===2&&(t.reward_amount_owed_2=a,t.reward_growth_inside_2=c)});const n="fields"in e.tick_lower_index?e.tick_lower_index.fields.bits:e.tick_lower_index.bits,i="fields"in e.tick_upper_index?e.tick_upper_index.fields.bits:e.tick_upper_index.bits;return{liquidity:e.liquidity,tick_lower_index:ct(BigInt(n)),tick_upper_index:ct(BigInt(i)),...t,fee_growth_inside_a:e.fee_growth_inside_a,fee_owed_a:e.fee_owned_a,fee_growth_inside_b:e.fee_growth_inside_b,fee_owed_b:e.fee_owned_b,pos_object_id:e.position_id}}function is(e){var o,s;if(e.error!=null||((s=(o=e.data)==null?void 0:o.content)==null?void 0:s.dataType)!=="moveObject")throw new L(`Tick not exists. Get tick data error:${e.error}`,"InvalidTickObject");const n=Y(e).value.fields.value.fields;return{objectId:Gt(e),index:ct(BigInt(n.index.fields.bits)),sqrtPrice:new g(n.sqrt_price),liquidityNet:new g(n.liquidity_net.fields.bits),liquidityGross:new g(n.liquidity_gross),feeGrowthOutsideA:new g(n.fee_growth_outside_a),feeGrowthOutsideB:new g(n.fee_growth_outside_b),rewardersGrowthOutside:n.rewards_growth_outside}}function xp(e){if(!e||!e.index||!e.sqrt_price||!e.liquidity_net||!e.liquidity_gross||!e.fee_growth_outside_a||!e.fee_growth_outside_b)throw new L("Invalid tick fields.","InvalidTickFields");const t=ct(BigInt(e.index.bits)),n=new g(e.sqrt_price),i=new g(e.liquidity_net.bits),o=new g(e.liquidity_gross),s=new g(e.fee_growth_outside_a),r=new g(e.fee_growth_outside_b),a=e.rewards_growth_outside||[];return{objectId:"",index:t,sqrtPrice:n,liquidityNet:i,liquidityGross:o,feeGrowthOutsideA:s,feeGrowthOutsideB:r,rewardersGrowthOutside:a}}var O_=class{static getMinIndex(e){return Os+Math.abs(Os)%e}static getMaxIndex(e){return Ps-Ps%e}};function j_(e,t){const n=Math.abs(e)%t;return e>0?n>t/2?e+t-n:e-n:n>t/2?e-t+n:e+n}function Ip(e,t,n,i,o,s){const r=e.rewarder_infos,a=[];for(let c=0;c<r.length;c+=1){let d=s[c];t!==null&&(e.current_tick_index<i?d=s[c].sub(new g(t.rewardersGrowthOutside[c])):d=t.rewardersGrowthOutside[c]);let l=new g(0);n!==null&&(e.current_tick_index>=o?l=s[c].sub(new g(n.rewardersGrowthOutside[c])):l=n.rewardersGrowthOutside[c]);const h=se.subUnderflowU128(se.subUnderflowU128(new g(s[c]),new g(d)),new g(l));a.push(h)}return a}function lo(e){const t=ce.isSuiCoin(e.coinTypeA),n=ce.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:n}}function Pp(e,t){return K.ceil(w(e).div(1+t)).toString()}var Z=class{static createCollectRewarderAndFeeParams(e,t,n,i,o,s){o===void 0&&(o=[...i]),s===void 0&&(s=[...i]);const r=ke(n.coinTypeA),a=ke(n.coinTypeB);if(n.collect_fee){const d=Z.buildCoinForAmount(t,o,BigInt(0),r,!1);o=d.remainCoins;const l=Z.buildCoinForAmount(t,s,BigInt(0),a,!1);s=l.remainCoins,t=e.Position.createCollectFeePaylod({pool_id:n.pool_id,pos_id:n.pos_id,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB},t,d.targetCoin,l.targetCoin)}const c=[];return n.rewarder_coin_types.forEach(d=>{switch(ke(d)){case r:c.push(Z.buildCoinForAmount(t,o,BigInt(0),d,!1).targetCoin);break;case a:c.push(Z.buildCoinForAmount(t,s,BigInt(0),d,!1).targetCoin);break;default:c.push(Z.buildCoinForAmount(t,i,BigInt(0),d,!1).targetCoin);break}}),t=e.Rewarder.createCollectRewarderPaylod(n,t,c),t}static async adjustTransactionForGas(e,t,n,i){i.setSender(e.senderAddress);const o=ce.selectCoinAssetGreaterThanOrEqual(t,n).selectedCoins;if(o.length===0)throw new L("Insufficient balance","InsufficientBalance");const s=ce.calculateTotalBalance(t);if(s-n>1e9)return{fixAmount:n};const r=await e.fullClient.calculationTxGas(i);if(ce.selectCoinAssetGreaterThanOrEqual(t,BigInt(r),o.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(r)+BigInt(500);if(s-n<c){if(n-=c,n<0)throw new L("gas Insufficient balance","InsufficientBalance");const d=new N;return{fixAmount:n,newTx:d}}}return{fixAmount:n}}static async buildAddLiquidityFixTokenForGas(e,t,n,i,o,s,r){o=await Z.buildAddLiquidityFixToken(e,t,n,o,s,r);const{isAdjustCoinA:a}=lo(n),c=a?n.amount_a:n.amount_b,d=await Z.adjustTransactionForGas(e,ce.getCoinAssets(a?n.coinTypeA:n.coinTypeB,t),BigInt(c),o),{fixAmount:l}=d,{newTx:h}=d;if(h!=null){let _,m;if(a)n.amount_a=Number(l),_=Z.buildAddLiquidityFixTokenCoinInput(h,!n.fix_amount_a,l.toString(),n.slippage,n.coinTypeA,t,!1),m=Z.buildAddLiquidityFixTokenCoinInput(h,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,t,!1);else return n.amount_b=Number(l),_=Z.buildAddLiquidityFixTokenCoinInput(h,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,t,!1),m=Z.buildAddLiquidityFixTokenCoinInput(h,n.fix_amount_a,l.toString(),n.slippage,n.coinTypeB,t,!1),n=Z.fixAddLiquidityFixTokenParams(n,i.slippage,i.curSqrtPrice),o=await Z.buildAddLiquidityFixTokenArgs(h,e,t,n,_,m),o}return o}static async buildAddLiquidityFixToken(e,t,n,i,o,s){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");i=i||new N;let r,a;return o==null||s==null?(r=Z.buildAddLiquidityFixTokenCoinInput(i,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,t,!1),a=Z.buildAddLiquidityFixTokenCoinInput(i,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,t,!1)):(r={targetCoin:o,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a={targetCoin:s,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),i=Z.buildAddLiquidityFixTokenArgs(i,e,t,n,r,a),i}static buildAddLiquidityFixTokenCoinInput(e,t,n,i,o,s,r=!0){return t?Z.buildCoinForAmountInterval(e,s,{amountSecond:BigInt(Pp(n,i)),amountFirst:BigInt(n)},o,r):Z.buildCoinForAmount(e,s,BigInt(n),o,r)}static fixAddLiquidityFixTokenParams(e,t,n){const i=e.fix_amount_a?e.amount_a:e.amount_b,o=pt.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new g(i),e.fix_amount_a,!0,t,n);return e.amount_a=e.fix_amount_a?e.amount_a:o.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?o.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,n,i,o,s){const r=[i.coinTypeA,i.coinTypeB],a=i.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:d}=t.sdkOptions;i.is_open||(e=Z.createCollectRewarderAndFeeParams(t,e,i,n,o.remainCoins,s.remainCoins));const l=I(c),h=i.is_open?[e.object(l.global_config_id),e.object(i.pool_id),e.pure.u32(Number(wt(BigInt(i.tick_lower)).toString())),e.pure.u32(Number(wt(BigInt(i.tick_upper)).toString())),o.targetCoin,s.targetCoin,e.pure.u64(i.amount_a),e.pure.u64(i.amount_b),e.pure.bool(i.fix_amount_a),e.object(q)]:[e.object(l.global_config_id),e.object(i.pool_id),e.object(i.pos_id),o.targetCoin,s.targetCoin,e.pure.u64(i.amount_a),e.pure.u64(i.amount_b),e.pure.bool(i.fix_amount_a),e.object(q)];return e.moveCall({target:`${d.published_at}::${Sn}::${a}`,typeArguments:r,arguments:h}),e}static async buildSwapTransactionForGas(e,t,n,i){let o=Z.buildSwapTransaction(e,t,n);o.setSender(e.senderAddress);const s=await Z.adjustTransactionForGas(e,ce.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),o),{fixAmount:r,newTx:a}=s;if(a!==void 0){a.setSender(e.senderAddress),t.by_amount_in?t.amount=r.toString():t.amount_limit=r.toString(),t=await Z.fixSwapParams(e,t,i);const c=Z.buildCoinForAmount(o,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA),d=Z.buildCoinForAmount(o,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB);o=Z.buildSwapTransactionArgs(a,t,e.sdkOptions,c,d)}return o}static buildSwapTransaction(e,t,n){let i=new N;i.setSender(e.senderAddress);const o=Z.buildCoinForAmount(i,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1),s=Z.buildCoinForAmount(i,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1);return i=Z.buildSwapTransactionArgs(i,t,e.sdkOptions,o,s),i}static buildSwapTransactionArgs(e,t,n,i,o){const{clmm_pool:s,integrate:r}=n,a=Qt.getDefaultSqrtPriceLimit(t.a2b),c=[t.coinTypeA,t.coinTypeB],{global_config_id:d}=I(s);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const l=t.swap_partner!==void 0,h=l?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",_=l?[e.object(d),e.object(t.pool_id),e.object(t.swap_partner),i.targetCoin,o.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(q)]:[e.object(d),e.object(t.pool_id),i.targetCoin,o.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(q)];return e.moveCall({target:`${r.published_at}::${Sn}::${h}`,typeArguments:c,arguments:_}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,t,n,i){let{tx:o,coinABs:s}=Z.buildSwapTransactionWithoutTransferCoins(e,t,n);o.setSender(e.senderAddress);const r=await Z.adjustTransactionForGas(e,ce.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),o),{fixAmount:a,newTx:c}=r;if(c!==void 0){c.setSender(e.senderAddress),t.by_amount_in?t.amount=a.toString():t.amount_limit=a.toString(),t=await Z.fixSwapParams(e,t,i);const d=Z.buildCoinForAmount(o,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),l=Z.buildCoinForAmount(o,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),h=Z.buildSwapTransactionWithoutTransferCoinArgs(e,c,t,e.sdkOptions,d,l);o=h.tx,s=h.txRes}return{tx:o,coinABs:s}}static buildSwapTransactionWithoutTransferCoins(e,t,n){const i=new N;i.setSender(e.senderAddress);const o=Z.buildCoinForAmount(i,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),s=Z.buildCoinForAmount(i,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),r=Z.buildSwapTransactionWithoutTransferCoinArgs(e,i,t,e.sdkOptions,o,s);return{tx:r.tx,coinABs:r.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,t,n,i,o,s){const{clmm_pool:r,integrate:a}=i,c=Qt.getDefaultSqrtPriceLimit(n.a2b),{global_config_id:d}=I(r);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const l=n.swap_partner!==void 0,h=l?"swap_with_partner":"swap",_=l?Yo:En,m=l?[t.object(d),t.object(n.pool_id),t.object(n.swap_partner),o.targetCoin,s.targetCoin,t.pure.bool(n.a2b),t.pure.bool(n.by_amount_in),t.pure.u64(n.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(q)]:[t.object(d),t.object(n.pool_id),o.targetCoin,s.targetCoin,t.pure.bool(n.a2b),t.pure.bool(n.by_amount_in),t.pure.u64(n.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(q)],y=[n.coinTypeA,n.coinTypeB],T=t.moveCall({target:`${a.published_at}::${_}::${h}`,typeArguments:y,arguments:m});if(n.by_amount_in){const O=n.a2b?n.coinTypeB:n.coinTypeA,j=n.a2b?T[1]:T[0],M=Number(n.amount_limit);this.checkCoinThreshold(e,n.by_amount_in,t,j,M,O)}return{tx:t,txRes:T}}static async fixSwapParams(e,t,n){const{currentPool:i}=n;try{const o=await e.Swap.preswap({decimalsA:n.decimalsA,decimalsB:n.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:t.amount,pool:i,currentSqrtPrice:i.current_sqrt_price,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB}),s=n.byAmountIn?o.estimatedAmountOut:o.estimatedAmountIn,r=Ms(s,n.slippage,!n.byAmountIn);t.amount_limit=r.toString()}catch(o){console.log("fixSwapParams",o)}return t}static async syncBuildCoinInputForAmount(e,t,n,i,o=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const s=await e.getOwnerCoinAssets(e.senderAddress,i);return Z.buildCoinForAmount(t,s,n,i,o).targetCoin}static buildCoinForAmount(e,t,n,i,o=!0,s=!1){const r=ce.getCoinAssets(i,t);if(n===BigInt(0)&&r.length===0)return Z.buildZeroValueCoin(t,e,i,o);const a=ce.calculateTotalBalance(r);if(a<n)throw new L(`The amount(${a}) is Insufficient balance for ${i} , expect ${n} `,"InsufficientBalance");return Z.buildCoin(e,t,r,n,i,o,s)}static buildCoin(e,t,n,i,o,s=!0,r=!1){if(ce.isSuiCoin(o)){if(s){const M=e.splitCoins(e.gas,[e.pure.u64(i)]);return{targetCoin:e.makeMoveVec({elements:[M]}),remainCoins:t,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}if(i===0n&&n.length>1){const M=ce.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.object(M.objectArray[0]),remainCoins:M.remainCoins,tragetCoinAmount:M.amountArray[0],isMintZeroCoin:!1}}const O=ce.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(i)]),remainCoins:O.remainCoins,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const a=ce.selectCoinObjectIdGreaterThanOrEqual(n,i),c=a.amountArray.reduce((O,j)=>Number(O)+Number(j),0).toString(),d=a.objectArray;if(s)return{targetCoin:e.makeMoveVec({elements:d.map(O=>e.object(O))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((O,j)=>Number(O)+Number(j),0).toString(),isMintZeroCoin:!1};const[l,...h]=d,_=e.object(l);let m=_,y=a.amountArray.reduce((O,j)=>Number(O)+Number(j),0).toString(),T;return h.length>0&&e.mergeCoins(_,h.map(O=>e.object(O))),r&&Number(c)>Number(i)&&(m=e.splitCoins(_,[e.pure.u64(i)]),y=i.toString(),T=_),{targetCoin:m,remainCoins:a.remainCoins,originalSplitedCoin:T,tragetCoinAmount:y,isMintZeroCoin:!1}}static buildZeroValueCoin(e,t,n,i=!0){const o=Z.callMintZeroValueCoin(t,n);let s;return i?s=t.makeMoveVec({elements:[o]}):s=o,{targetCoin:s,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,t,n,i,o=!0){const s=ce.getCoinAssets(i,t);if(n.amountFirst===BigInt(0))return s.length>0?Z.buildCoin(e,[...t],[...s],n.amountFirst,i,o):Z.buildZeroValueCoin(t,e,i,o);const r=ce.calculateTotalBalance(s);if(r>=n.amountFirst)return Z.buildCoin(e,[...t],[...s],n.amountFirst,i,o);if(r<n.amountSecond)throw new L(`The amount(${r}) is Insufficient balance for ${i} , expect ${n.amountSecond} `,"InsufficientBalance");return Z.buildCoin(e,[...t],[...s],n.amountSecond,i,o)}static async buildRouterSwapTransaction(e,t,n,i,o){let s=new N;return t.paths.length>1&&(t.partner=""),s=await this.buildRouterBasePathTx(e,t,n,i,s,o),s}static async buildRouterBasePathTx(e,t,n,i,o,s){const r=t.paths.filter(B=>B&&B.poolAddress),a=Number(r.reduce((B,$)=>B.add($.amountIn),H).toString()),c=Number(r.reduce((B,$)=>B.add($.amountOut),H).toString()),d=Math.round(n?Number(c.toString())*(1-t.priceSlippagePoint):Number(a.toString())*(1+t.priceSlippagePoint)),l=t.paths[0].coinType[0],h=t.paths[0].coinType[t.paths[0].coinType.length-1],_=Z.buildCoinForAmount(o,i,BigInt(n?a:d),l,!1,!0),m=_.originalSplitedCoin!==void 0,y=Z.buildCoinForAmount(o,i,0n,h,!1),T=await this.buildRouterBasePathReturnCoins(e,t,n,_,y,o),O=[],{toCoin:j,fromCoin:M}=T;if(o=T.tx,y.isMintZeroCoin?O.push({coinType:h,coin:j}):y.originalSplitedCoin!==void 0?o.mergeCoins(y.originalSplitedCoin,[j]):o.mergeCoins(y.targetCoin,[j]),m){const B=_==null?void 0:_.originalSplitedCoin;o.mergeCoins(B,[M])}else O.push({coinType:l,coin:M});for(let B=0;B<O.length;B++)this.buildTransferCoin(e,o,O[B].coin,O[B].coinType,s);return o}static async buildRouterBasePathReturnCoins(e,t,n,i,o,s){const{clmm_pool:r,integrate:a}=e.sdkOptions,c=I(r).global_config_id,d=t.paths.filter(B=>B&&B.poolAddress),l=Number(d.reduce((B,$)=>B.add($.amountIn),H).toString()),h=Number(d.reduce((B,$)=>B.add($.amountOut),H).toString()),_=Math.round(n?Number(h.toString())*(1-t.priceSlippagePoint):Number(l.toString())*(1+t.priceSlippagePoint)),m=t.paths[0].coinType[0],y=t.paths[0].coinType[t.paths[0].coinType.length-1];let T=i.targetCoin,O;o.isMintZeroCoin||o.originalSplitedCoin!==void 0?O=o.targetCoin:O=Z.callMintZeroValueCoin(s,y);const j=t.partner==="",M=j?En:Yo;for(const B of d)if(B.poolAddress.length===1){const $=B.a2b[0],J={amount:Number(B.amountIn.toString()),amountLimit:_,poolCoinA:B.a2b[0]?m:y,poolCoinB:B.a2b[0]?y:m},z=j?"swap":"swap_with_partner",re=$?T:O,ge=$?O:T,bt=n?B.amountIn.toString():B.amountOut.toString(),Q=Qt.getDefaultSqrtPriceLimit($).toString(),W=j?[s.object(c),s.object(B.poolAddress[0]),re,ge,s.pure.bool($),s.pure.bool(n),s.pure.u64(bt),s.pure.u128(Q),s.pure.bool(!1),s.object(q)]:[s.object(c),s.object(B.poolAddress[0]),s.object(t.partner),re,ge,s.pure.bool($),s.pure.bool(n),s.pure.u64(bt),s.pure.u128(Q),s.pure.bool(!1),s.object(q)],ue=[J.poolCoinA,J.poolCoinB],A=s.moveCall({target:`${e.sdkOptions.integrate.published_at}::${M}::${z}`,typeArguments:ue,arguments:W});T=$?A[0]:A[1],O=$?A[1]:A[0]}else{const $=n?B.amountIn:B.rawAmountLimit[0],J=n?0:B.amountOut;let z="";B.a2b[0]?B.a2b[1]?z="swap_ab_bc":z="swap_ab_cb":B.a2b[1]?z="swap_ba_bc":z="swap_ba_cb",j||(z=`${z}_with_partner`);const re=Qt.getDefaultSqrtPriceLimit(B.a2b[0]),ge=Qt.getDefaultSqrtPriceLimit(B.a2b[1]),bt=j?[s.object(c),s.object(B.poolAddress[0]),s.object(B.poolAddress[1]),T,O,s.pure.bool(n),s.pure.u64($.toString()),s.pure.u64(J.toString()),s.pure.u128(re.toString()),s.pure.u128(ge.toString()),s.object(q)]:[s.object(c),s.object(B.poolAddress[0]),s.object(B.poolAddress[1]),s.object(t.partner),T,O,s.pure.bool(n),s.pure.u64($.toString()),s.pure.u64(J.toString()),s.pure.u128(re.toString()),s.pure.u128(ge.toString()),s.object(q)],Q=[B.coinType[0],B.coinType[1],B.coinType[2]],W=s.moveCall({target:`${a.published_at}::${M}::${z}`,typeArguments:Q,arguments:bt});T=W[0],O=W[1]}return this.checkCoinThreshold(e,n,s,O,_,y),{fromCoin:T,toCoin:O,tx:s}}static async buildAggregatorSwapReturnCoins(e,t,n,i,o,s,r,a){if(a==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=e.senderAddress}t.splitPaths.length>1&&(o="");let c,d;const l=t.splitPaths.some(h=>h.basePaths.some(_=>_.label==="Deepbook"));if((!t.byAmountIn||t.splitPaths.length===1)&&!l){const h=[];for(const y of t.splitPaths){const T=[],O=[],j=[],M=[];for(let $=0;$<y.basePaths.length;$+=1){const J=y.basePaths[$];T.push(J.direction),O.push(J.poolAddress),j.push(new g(J.inputAmount.toString())),$===0?M.push(J.fromCoin,J.toCoin):M.push(J.toCoin)}const B={amountIn:new g(y.inputAmount.toString()),amountOut:new g(y.outputAmount.toString()),poolAddress:O,a2b:T,rawAmountLimit:j,isExceed:!1,coinType:M};h.push(B)}const _={paths:h,partner:o,priceSlippagePoint:s},m=await this.buildRouterBasePathReturnCoins(e,_,t.byAmountIn,n,i,r);c=m.fromCoin,d=m.toCoin,r=m.tx}else{const h=Math.round(t.outputAmount*(1-s));c=n.targetCoin,i.isMintZeroCoin||i.originalSplitedCoin!==void 0?d=i.targetCoin:d=Z.callMintZeroValueCoin(r,t.toCoin);let _=!1,m;if(l){const[y,T]=ra.createAccountCap(a,e.sdkOptions,r);r=T,m=y,_=!0}for(let y=0;y<t.splitPaths.length;y+=1){const T=t.splitPaths[y];let O;for(let j=0;j<T.basePaths.length;j+=1){const M=T.basePaths[j];if(M.label==="Deepbook")if(j===0)if(T.basePaths.length===1){const B=this.buildDeepbookBasePathTx(e,M,r,m,c,d,!1);c=B.from,d=B.to}else{O=Z.callMintZeroValueCoin(r,M.toCoin);const B=this.buildDeepbookBasePathTx(e,M,r,m,c,O,!1);c=B.from,O=B.to}else{const B=this.buildDeepbookBasePathTx(e,M,r,m,O,d,!0);O=B.from,d=B.to}if(M.label==="Cetus")if(j===0)if(T.basePaths.length===1){const B=this.buildClmmBasePathTx(e,M,r,t.byAmountIn,c,d,!1,o);c=B.from,d=B.to}else{O=Z.callMintZeroValueCoin(r,M.toCoin);const B=this.buildClmmBasePathTx(e,M,r,t.byAmountIn,c,O,!1,o);c=B.from,O=B.to}else{const B=this.buildClmmBasePathTx(e,M,r,t.byAmountIn,O,d,!0,o);O=B.from,d=B.to,r.moveCall({target:`${e.sdkOptions.integrate.published_at}::${na}::send_coin`,typeArguments:[M.fromCoin],arguments:[O,r.pure.address(a)]})}}}this.checkCoinThreshold(e,t.byAmountIn,r,d,h,t.toCoin),_&&(r=ra.deleteAccountCapByObject(m,e.sdkOptions,r))}return{fromCoin:c,toCoin:d,tx:r}}static async buildAggregatorSwapTransaction(e,t,n,i,o,s){let r=new N;const a=t.byAmountIn?Math.round(t.outputAmount*(1-o)):Math.round(t.inputAmount*(1+o)),c=Z.buildCoinForAmount(r,n,t.byAmountIn?BigInt(t.inputAmount):BigInt(a),t.fromCoin,!1,!0),d=c.originalSplitedCoin!=null,l=Z.buildCoinForAmount(r,n,0n,t.toCoin,!1),h=await this.buildAggregatorSwapReturnCoins(e,t,c,l,i,o,r,s),{fromCoin:_,toCoin:m}=h;r=h.tx;const y=[];if(l.isMintZeroCoin?y.push({coinType:t.toCoin,coin:m}):l.originalSplitedCoin!=null?r.mergeCoins(l.originalSplitedCoin,[m]):r.mergeCoins(l.targetCoin,[m]),d){const T=c.originalSplitedCoin;r.mergeCoins(T,[_])}else y.push({coinType:t.fromCoin,coin:_});for(let T=0;T<y.length;T++)this.buildTransferCoin(e,r,y[T].coin,y[T].coinType,s);return r}static checkCoinThreshold(e,t,n,i,o,s){t&&n.moveCall({target:`${e.sdkOptions.integrate.published_at}::${En}::check_coin_threshold`,typeArguments:[s],arguments:[i,n.pure.u64(o)]})}static buildDeepbookBasePathTx(e,t,n,i,o,s,r){const a=t.direction?o:s,c=t.direction?s:o,d=[n.object(t.poolAddress),i,n.pure.u64(t.inputAmount),n.pure.u64(0),n.pure.bool(t.direction),a,c,n.pure.bool(r),n.object(q)],l=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],h=n.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:l,arguments:d});return o=t.direction?h[0]:h[1],s=t.direction?h[1]:h[0],{from:o,to:s,tx:n}}static buildClmmBasePathTx(e,t,n,i,o,s,r,a){const{clmm_pool:c,integrate:d}=e.sdkOptions,l=I(c).global_config_id;let h=t.direction?o:s,_=t.direction?s:o;const m=a==="",y=m?En:Yo,T=m?"swap":"swap_with_partner",O=i?t.inputAmount.toString():t.outputAmount.toString(),j=Qt.getDefaultSqrtPriceLimit(t.direction),M=m?[n.object(l),n.object(t.poolAddress),h,_,n.pure.bool(t.direction),n.pure.bool(i),n.pure.u64(O),n.pure.u128(j.toString()),n.pure.bool(r),n.object(q)]:[n.object(l),n.object(t.poolAddress),n.object(a),h,_,n.pure.bool(t.direction),n.pure.bool(i),n.pure.u64(O),n.pure.u128(j.toString()),n.pure.bool(r),n.object(q)],B=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],$=n.moveCall({target:`${d.published_at}::${y}::${T}`,typeArguments:B,arguments:M});return h=$[0],_=$[1],o=t.direction?h:_,s=t.direction?_:h,{from:o,to:s,tx:n}}static buildCoinTypePair(e,t){const n=[];if(e.length===2){const i=[];i.push(e[0],e[1]),n.push(i)}else{const i=[];i.push(e[0],e[e.length-1]),n.push(i);for(let o=1;o<e.length-1;o+=1){if(t[o-1]===0)continue;const s=[];s.push(e[0],e[o],e[e.length-1]),n.push(s)}}return n}static buildTransferCoinToSender(e,t,n,i){t.moveCall({target:`${e.sdkOptions.integrate.published_at}::${na}::transfer_coin_to_sender`,typeArguments:[i],arguments:[n]})}static buildTransferCoin(e,t,n,i,o){o!=null?t.transferObjects([n],t.pure.address(o)):Z.buildTransferCoinToSender(e,t,n,i)}},X=Z;Vh(X,"callMintZeroValueCoin",(e,t)=>e.moveCall({target:"0x2::coin::zero",typeArguments:[t]}));function ht(e){return!(!e.startsWith("0x")||e.length!==66)}var Nn=new g(1e9),ra=class{static createAccountCap(e,t,n,i=!1){if(e.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:o}=t,[s]=n.moveCall({target:`${o.published_at}::${Hh}::create_account`,typeArguments:[],arguments:[]});return i&&n.transferObjects([s],n.pure.address(e)),[s,n]}static deleteAccountCap(e,t,n){const{deepbook:i}=t,o=[n.object(e)];return n.moveCall({target:`${i.published_at}::${es}::delete_account_cap`,typeArguments:[],arguments:o}),n}static deleteAccountCapByObject(e,t,n){const{deepbook:i}=t,o=[e];return n.moveCall({target:`${i.published_at}::${es}::delete_account_cap`,typeArguments:[],arguments:o}),n}static async getAccountCap(e,t=!0){const n=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:t,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:es}}});return n.data.length===0?"":n.data[0].data.objectId}static async getPools(e){const t=e.sdkOptions.deepbook.package_id,n=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${t}::clob_v2::PoolCreated`})).data.forEach(o=>{const s=o.parsedJson;s&&n.push({poolID:s.pool_id,tickSize:Number(s.tick_size),lotSize:Number(s.lot_size),takerFeeRate:Number(s.taker_fee_rate),makerRebateRate:Number(s.maker_rebate_rate),baseAsset:s.base_asset.name,quoteAsset:s.quote_asset.name})})}catch(i){console.log("getPoolImmutables",i)}return n}static async getPoolAsks(e,t,n,i){var _;const{simulationAccount:o}=e.sdkOptions,{deepbook_endpoint_v2:s}=e.sdkOptions,r=new N,a=[],c=[n,i],d=[r.object(t),r.pure.u64("0"),r.pure.u64("999999999999"),r.object(q)];r.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:d,typeArguments:c});const h=(_=(await e.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:o.address})).events)==null?void 0:_.filter(m=>D(m.type).name==="BookStatus");if(h.length===0)return a;for(let m=0;m<h[0].parsedJson.depths.length;m++){const y=h[0].parsedJson.price[m],T=h[0].parsedJson.depths[m],O={price:parseInt(y,10),quantity:parseInt(T,10)};a.push(O)}return a}static async getPoolBids(e,t,n,i){var _;const{simulationAccount:o}=e.sdkOptions,{deepbook_endpoint_v2:s}=e.sdkOptions,r=new N,a=[],c=[n,i],d=[r.object(t),r.pure.u64("0"),r.pure.u64("999999999999"),r.object(q)];r.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:d,typeArguments:c});const h=(_=(await e.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:o.address})).events)==null?void 0:_.filter(m=>D(m.type).name==="BookStatus");if(h.length===0)return a;for(let m=0;m<h[0].parsedJson.depths.length;m++){const y=h[0].parsedJson.price[m],T=h[0].parsedJson.depths[m],O={price:parseInt(y,10),quantity:parseInt(T,10)};a.push(O)}return a}static async preSwap(e,t,n,i){let o=!1,s=H,r=new g(i),a=H;const c=new g(i);if(n){let d=await this.getPoolBids(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(o=!0),d=d.sort((l,h)=>h.price-l.price);for(let l=0;l<d.length;l+=1){const h=new g(d[l].quantity),_=new g(d[l].price),m=h.mul(new g(_)).mul(new g(t.takerFeeRate)).div(Nn).div(Nn);if(r.gt(h))r=r.sub(h),s=s.add(h.mul(_).div(Nn).sub(m)),a=a.add(m);else{const y=r.mul(new g(d[l].price)).div(Nn),T=y.mul(new g(t.takerFeeRate)).div(Nn);s=s.add(y.sub(T)),r=r.sub(r),a=a.add(T)}if(r.eq(H))break}}else{const d=await this.getPoolAsks(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(o=!0);for(let l=0;l<d.length;l+=1){const h=new g(d[l].price).mul(new g(d[l].quantity)).div(new g(1e9)),_=h.mul(new g(t.takerFeeRate)).div(Nn),m=h.add(_);if(r.gt(h))s=s.add(new g(d[l].quantity)),r=r.sub(m),a=a.add(_);else{const y=new g(d[l].quantity).div(new g(t.lotSize)),T=m.div(y),O=r.div(T);s=s.add(O.muln(t.lotSize)),r=r.sub(O.mul(T)),a=a.add(O.div(y).mul(_))}if(r.eq(H))break}}return{poolAddress:t.poolID,estimatedAmountIn:c.sub(r).toNumber(),estimatedAmountOut:s.toNumber(),estimatedFeeAmount:a,isExceed:o,amount:Number(i),aToB:n,byAmountIn:!0}}static async simulateSwap(e,t,n,i,o,s){var J;const{deepbook_endpoint_v2:r}=e.sdkOptions;let a=new N;const c=await this.getAccountCap(e);let d;if(c===""){const z=this.createAccountCap(e.senderAddress,e.sdkOptions,a),re=z[0];a=z[1],d=re}else d=a.object(c);const l=await e.getOwnerCoinAssets(e.senderAddress),h=X.buildCoinForAmount(a,l,BigInt(s),n,!1),_=h==null?void 0:h.targetCoin,m=X.buildCoinForAmount(a,l,BigInt(s),i,!1),y=m==null?void 0:m.targetCoin,T=[n,i],O=[a.object(t),d,a.pure.u64(s),a.pure.u64(0),a.pure.bool(o),_,y,a.object(q)];a.moveCall({target:`${r.published_at}::${Jh}::swap`,arguments:O,typeArguments:T});const{simulationAccount:j}=e.sdkOptions,B=(J=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:j.address})).events)==null?void 0:J.filter(z=>D(z.type).name==="DeepbookSwapEvent");if(B.length===0)return null;const $=B[0].parsedJson;return{poolAddress:$.pool,estimatedAmountIn:$.amount_in,estimatedAmountOut:$.amount_out,aToB:$.atob}}},Op=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPositionList(e,t="all"){const n={data:[],hasNextPage:!0},i=await this._sdk.fullClient.getDynamicFieldsByPage(e,t);n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor;const o=i.data.map(r=>{if(r.error!=null)throw new L(`when getPositionList get position objects error: ${r.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return r.name.value}),s=await this._sdk.Position.getSipmlePositionList(o);return n.data=s,n}async getPoolImmutables(e=[],t=0,n=100,i=!1){const{package_id:o}=this._sdk.sdkOptions.clmm_pool,s=`${o}_getInitPoolEvent`,r=this.getCache(s,i),a=[],c=[];if(r!==void 0&&a.push(...r),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${o}::factory::CreatePoolEvent`})).data.forEach(h=>{const _=h.parsedJson;_&&a.push({poolAddress:_.pool_id,tickSpacing:_.tick_spacing,coinTypeA:D(_.coin_type_a).full_address,coinTypeB:D(_.coin_type_b).full_address})}),this.updateCache(s,a,V)}catch(l){console.log("getPoolImmutables",l)}const d=e.length>0;for(let l=0;l<a.length;l+=1){const h=a[l];d&&!e.includes(h.poolAddress)||!d&&(l<t||l>=t+n)||c.push(h)}return c}async getPools(e=[],t=0,n=100){var r,a,c;const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(l=>o.push(l.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0,showType:!0});for(const d of s){if(d.error!=null||((a=(r=d.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new L(`getPools error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const l=ns(d);i.push(l);const h=`${l.poolAddress}_getPoolObject`;this.updateCache(h,l,V)}return i}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.clmm_pool,i=[],o={data:[],hasNextPage:!1},s=e==="all",r=`${n}_getPoolImmutables`;if(s){const a=this.getCache(r,t);a&&i.push(...a)}if(i.length===0)try{const a=`${n}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},e);o.hasNextPage=c.hasNextPage,o.nextCursor=c.nextCursor,c.data.forEach(d=>{const l=d.parsedJson;if(l){const h={poolAddress:l.pool_id,tickSpacing:l.tick_spacing,coinTypeA:D(l.coin_type_a).full_address,coinTypeB:D(l.coin_type_b).full_address};i.push(h)}})}catch(a){console.log("getPoolImmutables",a)}return o.data=i,s&&this.updateCache(`${n}_getPoolImmutables`,i,V),o}async getPoolsWithPage(e=[],t="all",n=!1){var r,a,c;const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutablesWithPage(t,n)).data.forEach(l=>o.push(l.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0,showType:!0});for(const d of s){if(d.error!=null||((a=(r=d.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new L(`getPoolWithPages error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const l=ns(d);i.push(l);const h=`${l.poolAddress}_getPoolObject`;this.updateCache(h,l,V)}return i}async getPool(e,t=!0){var r,a,c;const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if(o.error!=null||((a=(r=o.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new L(`getPool error code: ${((c=o.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const s=ns(o);return this.updateCache(n,s),s}async creatPoolsTransactionPayload(e){for(const n of e)if(js(oe(n.coinTypeA),oe(n.coinTypeB))){const i=n.coinTypeB;n.coinTypeB=n.coinTypeA,n.coinTypeA=i}return await this.creatPool(e)}async creatPoolTransactionPayload(e){if(js(oe(e.coinTypeA),oe(e.coinTypeB))){const t=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=t}return"fix_amount_a"in e?await this.creatPoolAndAddLiquidity(e):await this.creatPool([e])}async getClmmConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.clmm_pool,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Ii(o),r=(await this._sdk.fullClient.queryEventsByPage({Transaction:s})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return r.length>0&&(r.forEach(c=>{const d=c.parsedJson;if(c.type)switch(D(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=d.global_config_id,a.admin_cap_id=d.admin_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=d.pools_id;break;case`${t}::rewarder::RewarderInitEvent`:a.global_vault_id=d.global_vault_id;break;case`${t}::partner::InitPartnerEvent`:a.partners_id=d.partners_id;break}}),this.updateCache(n,a,V)),a}async getSuiTransactionResponse(e,t=!1){const n=`${e}_getSuiTransactionResponse`,i=this.getCache(n,t);if(i!==void 0)return i;let o;try{o=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{o=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(n,o,V),o}async creatPool(e){const t=new N,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,o=I(i),s=o.global_config_id,r=o.pools_id;return e.forEach(a=>{const c=[t.object(s),t.object(r),t.pure.u32(a.tick_spacing),t.pure.u128(a.initialize_sqrt_price),t.pure.string(a.uri),t.object(q)];t.moveCall({target:`${n.published_at}::${pi}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),t}async creatPoolAndAddLiquidity(e){if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const t=new N,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,o=I(i),s=o.global_config_id,r=o.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=X.buildAddLiquidityFixTokenCoinInput(t,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,a,!1),d=X.buildAddLiquidityFixTokenCoinInput(t,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,a,!1),l=[t.object(s),t.object(r),t.pure.u32(e.tick_spacing),t.pure.u128(e.initialize_sqrt_price),t.pure.string(e.uri),c.targetCoin,d.targetCoin,t.pure.u32(Number(wt(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(wt(BigInt(e.tick_upper)).toString())),t.pure.u64(e.amount_a),t.pure.u64(e.amount_b),t.pure.bool(e.fix_amount_a),t.object(q)];return t.moveCall({target:`${n.published_at}::${Sn}::create_pool_with_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:l}),t}async fetchTicks(e){let t=[],n=[];for(;;){const o=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:n,limit:512});if(t=[...t,...o],o.length<512)break;n=[o[o.length-1].index]}return t}async getTicks(e){var d;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=[],o=[e.coinTypeA,e.coinTypeB],s=new N,r=s.makeMoveVec({elements:e.start.map(l=>s.pure.u32(l)),type:"u32"}),a=[s.object(e.pool_id),r,s.pure.u64(e.limit.toString())];if(s.moveCall({target:`${t.published_at}::${qt}::fetch_ticks`,arguments:a,typeArguments:o}),!ht(n.address))throw new L("this config simulationAccount is not set right","InvalidSimulateAccount");const c=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:n.address});if(c.error!=null)throw new L(`getTicks error code: ${c.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(d=c.events)==null||d.forEach(l=>{D(l.type).name==="FetchTicksResultEvent"&&l.parsedJson.ticks.forEach(h=>{i.push(xp(h))})}),i}async fetchPositionRewardList(e){var r;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=[];let o=[];const s=512;for(;;){const a=[e.coinTypeA,e.coinTypeB],c=new N,d=c.makeMoveVec({elements:o.map(m=>c.pure.address(m)),type:void 0}),l=[c.object(e.pool_id),d,c.pure.u64(s)];if(c.moveCall({target:`${t.published_at}::${qt}::fetch_positions`,arguments:l,typeArguments:a}),!ht(n.address))throw new L("this config simulationAccount is not set right","InvalidSimulateAccount");const h=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:n.address});if(h.error!=null)throw new L(`fetch position reward error code: ${h.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const _=[];if((r=h==null?void 0:h.events)==null||r.forEach(m=>{D(m.type).name==="FetchPositionsEvent"&&m.parsedJson.positions.forEach(y=>{const T=ed(y);_.push(T)})}),i.push(..._),_.length<s)break;o=[_[_.length-1].pos_object_id]}return i}async fetchTicksByRpc(e){let t=[],n=null;const i=512;for(;;){const o=[],s=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:n,limit:i});if(n=s.nextCursor,s.data.forEach(r=>{D(r.objectType).module==="skip_list"&&o.push(r.objectId)}),t=[...t,...await this.getTicksByRpc(o)],n===null||s.data.length<i)break}return t}async getTicksByRpc(e){var i,o,s;const t=[],n=await this.sdk.fullClient.batchGetObjects(e,{showContent:!0,showType:!0});for(const r of n){if(r.error!=null||((o=(i=r.data)==null?void 0:i.content)==null?void 0:o.dataType)!=="moveObject")throw new L(`getTicksByRpc error code: ${((s=r.error)==null?void 0:s.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=is(r);a!=null&&t.push(a)}return t}async getTickDataByIndex(e,t){var o,s;const n={type:"u64",value:wt(BigInt(sp(t).toString())).toString()},i=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:n});if(i.error!=null||((s=(o=i.data)==null?void 0:o.content)==null?void 0:s.dataType)!=="moveObject")throw new L(`get tick by index: ${t} error: ${i.error}`,"InvalidTickIndex");return is(i)}async getTickDataByObjectId(e){var n,i,o;const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});if(t.error!=null||((i=(n=t.data)==null?void 0:n.content)==null?void 0:i.dataType)!=="moveObject")throw new L(`getTicksByRpc error code: ${((o=t.error)==null?void 0:o.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return is(t)}async getPartnerRefFeeAmount(e,t=!0){var c,d;const n=await this._sdk.fullClient.batchGetObjects([e],{showOwner:!0,showContent:!0,showDisplay:t,showType:!0});if(n[0].error!=null||((d=(c=n[0].data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new L(`get partner by object id: ${e} error: ${n[0].error}`,"NotFoundPartnerObject");const i=n[0].data.content.fields.balances,o=await this._sdk.fullClient.getDynamicFieldsByPage(i.fields.id.id),s=[];o.data.forEach(l=>{var h,_;if(l.error!=null||((_=(h=l.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new L(`when getPartnerRefFeeAmount get partner object error: ${l.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");s.push(l.objectId)});const r=[];return(await this._sdk.fullClient.batchGetObjects(s,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(l=>{var _,m;if(l.error!=null||((m=(_=l.data)==null?void 0:_.content)==null?void 0:m.dataType)!=="moveObject")throw new L(`get coin by object id: ${l.data.objectId} error: ${l.error}`,"InvalidParnterRefFeeFields");const h={coinAddress:l.data.content.fields.name,coinObjectId:l.data.objectId,balance:BigInt(l.data.content.fields.value)};r.push(h)}),r}async claimPartnerRefFeePayload(e,t,n){const i=new N,{clmm_pool:o}=this.sdk.sdkOptions,{global_config_id:s}=I(o),r=[n],a=[i.object(s),i.object(e),i.object(t)];return i.moveCall({target:`${o.published_at}::${Wh}::claim_ref_fee`,arguments:a,typeArguments:r}),i}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},jp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(e,t=[],n=!0){const i=[],o=await this._sdk.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:n,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),s=t.length>0;for(const r of o.data)if(D(r.data.type).full_address===this.buildPositionType()){const c=Jn(r),d=`${c.pos_object_id}_getPositionList`;this.updateCache(d,c,V),s?t.includes(c.pool)&&i.push(c):i.push(c)}return i}async getPosition(e,t,n=!0,i=!0){let o=await this.getSimplePosition(t,i);return n&&(o=await this.updatePositionRewarders(e,o)),o}async getPositionById(e,t=!0,n=!0){const i=await this.getSimplePosition(e,n);if(t){const o=await this._sdk.Pool.getPool(i.pool,!1);return await this.updatePositionRewarders(o.position_manager.positions_handle,i)}return i}async getSimplePosition(e,t=!0){const n=`${e}_getPositionList`;let i=this.getSimplePositionByCache(e);if(i===void 0){const o=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0,showDisplay:t,showOwner:!0}});i=Jn(o),this.updateCache(n,i,V)}return i}getSimplePositionByCache(e){const t=`${e}_getPositionList`;return this.getCache(t)}async getSipmlePositionList(e,t=!0){const n=[],i=[];return e.forEach(o=>{const s=this.getSimplePositionByCache(o);s?n.push(s):i.push(o)}),i.length>0&&(await this._sdk.fullClient.batchGetObjects(i,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(s=>{if(s.error==null){const r=Jn(s);n.push(r);const a=`${r.pos_object_id}_getPositionList`;this.updateCache(a,r,V)}}),n}async updatePositionRewarders(e,t){const n=await this.getPositionRewarders(e,t.pos_object_id);return{...t,...n}}async getPositionRewarders(e,t){try{const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),o=Y(n.data).value.fields.value;return ed(o)}catch(n){console.log(n);return}}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new N;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[o.object(I(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId)];o.moveCall({target:`${n.published_at}::${qt}::fetch_position_fees`,arguments:h,typeArguments:l})}if(!ht(i.address))throw new L("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(s.error!=null)throw new L(`fetch position fee error code: ${s.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const r=(c=s.events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionFeesEvent");if(r.length===0)return[];const a=[];for(let d=0;d<r.length;d+=1){const{parsedJson:l}=r[d],h={feeOwedA:new g(l.fee_owned_a),feeOwedB:new g(l.fee_owned_b),position_id:l.position_id};a.push(h)}return a}async batchFetchPositionFees(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const n={};if(t.length>0){const i=await this.fetchPosFeeAmount(t);for(const o of i)n[o.position_id]=o;return n}return n}async createAddLiquidityFixTokenPayload(e,t,n,i,o){if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:r,isAdjustCoinB:a}=lo(e);if(e=e,e.fix_amount_a&&r||!e.fix_amount_a&&a)return n=await X.buildAddLiquidityFixTokenForGas(this._sdk,s,e,t,n,i,o),n}return X.buildAddLiquidityFixToken(this._sdk,s,e,n,i,o)}async createAddLiquidityPayload(e,t,n,i){const{integrate:o,clmm_pool:s}=this._sdk.sdkOptions;if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const r=wt(BigInt(e.tick_lower)).toString(),a=wt(BigInt(e.tick_upper)).toString(),c=[e.coinTypeA,e.coinTypeB];t=t||new N;const d=!ci(e.pos_id),l=BigInt(e.max_amount_a),h=BigInt(e.max_amount_b);let _,m;if(n==null||i==null){const y=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);_=X.buildCoinForAmount(t,y,l,e.coinTypeA,!1),m=X.buildCoinForAmount(t,y,h,e.coinTypeB,!1)}else _={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},m={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"};if(d)t.moveCall({target:`${o.published_at}::${Sn}::open_position_with_liquidity`,typeArguments:c,arguments:[t.object(I(s).global_config_id),t.object(e.pool_id),t.pure.u32(Number(r)),t.pure.u32(Number(a)),_.targetCoin,m.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object(q)]});else{const y=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,y,_.remainCoins,m.remainCoins),t.moveCall({target:`${o.published_at}::${Sn}::add_liquidity`,typeArguments:c,arguments:[t.object(I(s).global_config_id),t.object(e.pool_id),t.object(e.pos_id),_.targetCoin,m.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object(q)]})}return t}async removeLiquidityTransactionPayload(e,t){if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions,o="remove_liquidity";t=t||new N;const s=[e.coinTypeA,e.coinTypeB],r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,r);const a=[t.object(I(n).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(q)];return t.moveCall({target:`${i.published_at}::${pi}::${o}`,typeArguments:s,arguments:a}),t}async closePositionTransactionPayload(e,t){if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions;t=t||new N;const o=[e.coinTypeA,e.coinTypeB],s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,s),t.moveCall({target:`${i.published_at}::${pi}::close_position`,typeArguments:o,arguments:[t.object(I(n).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(q)]}),t}openPositionTransactionPayload(e,t){const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions;t=t||new N;const o=[e.coinTypeA,e.coinTypeB],s=wt(BigInt(e.tick_lower)).toString(),r=wt(BigInt(e.tick_upper)).toString(),a=[t.object(I(n).global_config_id),t.object(e.pool_id),t.pure.u32(Number(s)),t.pure.u32(Number(r))];return t.moveCall({target:`${i.published_at}::${pi}::open_position`,typeArguments:o,arguments:a}),t}async collectFeeTransactionPayload(e,t,n,i){if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0);t=t||new N;const s=X.buildCoinForAmount(t,o,BigInt(0),e.coinTypeA,!1),r=X.buildCoinForAmount(t,o,BigInt(0),e.coinTypeB,!1),a=n??s.targetCoin,c=i??r.targetCoin;return this.createCollectFeePaylod(e,t,a,c),t}createCollectFeePaylod(e,t,n,i){const{clmm_pool:o,integrate:s}=this.sdk.sdkOptions,r=[e.coinTypeA,e.coinTypeB],a=[t.object(I(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),n,i];return t.moveCall({target:`${s.published_at}::${Sn}::collect_fee`,typeArguments:r,arguments:a}),t}createCollectFeeNoSendPaylod(e,t,n,i){const{clmm_pool:o,integrate:s}=this.sdk.sdkOptions,r=[e.coinTypeA,e.coinTypeB],a=[t.object(I(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),n,i];return t.moveCall({target:`${s.published_at}::${zc}::collect_fee`,typeArguments:r,arguments:a}),t}async calculateFee(e){const t=await this.collectFeeTransactionPayload(e);if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const n=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:t,sender:this._sdk.senderAddress});for(const i of n.events)if(D(i.type).name==="CollectFeeEvent"){const o=i.parsedJson;return{feeOwedA:o.amount_a,feeOwedB:o.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},Mp=class{constructor(e){F(this,"_sdk");F(this,"growthGlobal");this._sdk=e,this.growthGlobal=[H,H,H]}get sdk(){return this._sdk}async emissionsEveryDay(e){const n=(await this.sdk.Pool.getPool(e)).rewarder_infos;if(!n)return null;const i=[];for(const o of n){const s=se.fromX64(new g(o.emissions_per_second));i.push({emissions:Math.floor(s.toNumber()*60*60*24),coin_address:o.coinAddress})}return i}async updatePoolRewarder(e,t){const n=await this.sdk.Pool.getPool(e),i=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=t.toString(),Number(n.liquidity)===0||t.eq(new g(i)))return n;const o=t.div(new g(1e3)).sub(new g(i)).add(new g(15)),s=n.rewarder_infos;for(let r=0;r<s.length;r+=1){const a=s[r],c=se.checkMulDivFloor(o,new g(a.emissions_per_second),new g(n.liquidity),128);this.growthGlobal[r]=new g(a.growth_global).add(new g(c))}return n}async posRewardersAmount(e,t,n){const i=Date.parse(new Date().toString()),o=await this.updatePoolRewarder(e,new g(i)),s=await this.sdk.Position.getPositionRewarders(t,n);if(s===void 0)return[];const r=o.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(r,s.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(r,s.tick_upper_index);return this.posRewardersAmountInternal(o,s,a,c)}async poolRewardersAmount(e,t){const n=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(t,new g(n)),o=await this.sdk.Position.getPositionList(e,[t]),s=await this.getPoolLowerAndUpperTicks(i.ticks_handle,o),r=[H,H,H];for(let a=0;a<o.length;a+=1){const c=await this.posRewardersAmountInternal(i,o[a],s[0][a],s[1][a]);for(let d=0;d<3;d+=1)r[d]=r[d].add(c[d].amount_owed)}return r}posRewardersAmountInternal(e,t,n,i){const o=t.tick_lower_index,s=t.tick_upper_index,r=Ip(e,n,i,o,s,this.growthGlobal),a=[],c=[];if(r.length>0){let d=se.subUnderflowU128(r[0],new g(t.reward_growth_inside_0));d.gt(new g("3402823669209384634633745948738404"))&&(d=nn);const l=se.checkMulShiftRight(new g(t.liquidity),d,64,128);a.push(r[0]),c.push({amount_owed:new g(t.reward_amount_owed_0).add(l),coin_address:e.rewarder_infos[0].coinAddress})}if(r.length>1){let d=se.subUnderflowU128(r[1],new g(t.reward_growth_inside_1));d.gt(new g("3402823669209384634633745948738404"))&&(d=nn);const l=se.checkMulShiftRight(new g(t.liquidity),d,64,128);a.push(r[1]),c.push({amount_owed:new g(t.reward_amount_owed_1).add(l),coin_address:e.rewarder_infos[1].coinAddress})}if(r.length>2){let d=se.subUnderflowU128(r[2],new g(t.reward_growth_inside_2));d.gt(new g("3402823669209384634633745948738404"))&&(d=nn);const l=se.checkMulShiftRight(new g(t.liquidity),d,64,128);a.push(r[2]),c.push({amount_owed:new g(t.reward_amount_owed_2).add(l),coin_address:e.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB,rewarderInfo:s.rewarder_infos})}const n={};if(t.length>0){const i=await this.fetchPosRewardersAmount(t);for(const o of i)n[o.positionId]=o.rewarderAmountOwed;return n}return n}async fetchPositionRewarders(e,t){const n={poolAddress:e.poolAddress,positionId:t,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,rewarderInfo:e.rewarder_infos};return(await this.fetchPosRewardersAmount([n]))[0].rewarderAmountOwed}async batchFetchPositionFees(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const n={};if(t.length>0){const i=await this.fetchPosFeeAmount(t);for(const o of i)n[o.position_id]=o;return n}return n}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new N;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[o.object(I(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId)];o.moveCall({target:`${n.published_at}::${qt}::fetch_position_fees`,arguments:h,typeArguments:l})}const r=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address})).events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionFeesEvent");if(r.length===0)return[];const a=[];for(let d=0;d<r.length;d+=1){const{parsedJson:l}=r[d],h={feeOwedA:new g(l.fee_owned_a),feeOwedB:new g(l.fee_owned_b),position_id:l.position_id};a.push(h)}return a}async fetchPosRewardersAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new N;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[o.object(I(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId),o.object(q)];o.moveCall({target:`${n.published_at}::${qt}::fetch_position_rewards`,arguments:h,typeArguments:l})}if(!ht(i.address))throw new L(`this config simulationAccount: ${i.address} is not set right`,"InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(s.error!=null)throw new L(`fetch position rewards error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const r=(c=s.events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionRewardsEvent");if(r.length===0)return[];if(r.length!==e.length)throw new L("valueData.length !== params.pools.length");const a=[];for(let d=0;d<r.length;d+=1){const l={poolAddress:e[d].poolAddress,positionId:e[d].positionId,rewarderAmountOwed:[]};for(let h=0;h<e[d].rewarderInfo.length;h+=1)l.rewarderAmountOwed.push({amount_owed:new g(r[d].parsedJson.data[h]),coin_address:e[d].rewarderInfo[h].coinAddress});a.push(l)}return a}async fetchPoolRewardersAmount(e,t){const n=await this.sdk.Pool.getPool(t),i=await this.sdk.Position.getPositionList(e,[t]),o=[];for(const a of i)o.push({poolAddress:n.poolAddress,positionId:a.pos_object_id,rewarderInfo:n.rewarder_infos,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB});const s=await this.fetchPosRewardersAmount(o),r=[H,H,H];if(s!=null)for(const a of s)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)r[c]=r[c].add(a.rewarderAmountOwed[c].amount_owed);return r}async getPoolLowerAndUpperTicks(e,t){const n=[],i=[];for(const o of t){const s=await this.sdk.Pool.getTickDataByIndex(e,o.tick_lower_index),r=await this.sdk.Pool.getTickDataByIndex(e,o.tick_upper_index);n.push(s),i.push(r)}return[n,i]}async collectRewarderTransactionPayload(e){if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let n=new N;return n=X.createCollectRewarderAndFeeParams(this._sdk,n,e,t),n}async batchCollectRewardePayload(e,t,n,i){if(!ht(this._sdk.senderAddress))throw new L("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);t=t||new N;const s={};return e.forEach(r=>{const a=ke(r.coinTypeA),c=ke(r.coinTypeB);if(r.collect_fee){let l=s[a];l==null&&(n==null?l=X.buildCoinForAmount(t,o,BigInt(0),a,!1):l={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},s[a]=l);let h=s[c];h==null&&(i==null?h=X.buildCoinForAmount(t,o,BigInt(0),c,!1):h={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},s[c]=h),t=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:r.pool_id,pos_id:r.pos_id,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB},t,l.targetCoin,h.targetCoin)}const d=[];r.rewarder_coin_types.forEach(l=>{const h=ke(l);let _=s[l];_===void 0&&(_=X.buildCoinForAmount(t,o,BigInt(0),h,!1),s[h]=_),d.push(_.targetCoin)}),t=this.createCollectRewarderNoSendPaylod(r,t,d)}),Object.keys(s).forEach(r=>{const a=s[r];a.isMintZeroCoin&&X.buildTransferCoin(this._sdk,t,a.targetCoin,r,this._sdk.senderAddress)}),t}createCollectRewarderPaylod(e,t,n){const{clmm_pool:i,integrate:o}=this.sdk.sdkOptions,s=I(i),r=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${o.published_at}::${Sn}::collect_reward`,typeArguments:[...r,a],arguments:[t.object(s.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(s.global_vault_id),n[c],t.object(q)]})}),t}createCollectRewarderNoSendPaylod(e,t,n){const{clmm_pool:i,integrate:o}=this.sdk.sdkOptions,s=I(i),r=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${o.published_at}::${zc}::collect_reward`,typeArguments:[...r,a],arguments:[t.object(s.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(s.global_vault_id),n[c],t.object(q)]})}),t}};function Ri(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}var Ep=class{constructor(e){F(this,"graph");F(this,"pathProviders");F(this,"coinProviders");F(this,"_coinAddressMap");F(this,"poolAddressMap");F(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new $d(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=e,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:n,reversePair:i}=Ri(e,t);let o=this.poolAddressMap.get(n);if(o!=null)return{addressMap:o,direction:!0};if(o=this.poolAddressMap.get(i),o!=null)return{addressMap:o,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinAddressMap.set(e.address,e)})}loadGraph(e,t){this.addCoinProvider(e),this.addPathProvider(t),this.setCoinList(),this.pathProviders.forEach(n=>{const{paths:i}=n;i.forEach(o=>{const s=this.graph.getVertexByKey(o.base)??new jr(o.base),r=this.graph.getVertexByKey(o.quote)??new jr(o.quote);this.graph.addEdge(new Nd(s,r));const a=this._coinAddressMap.get(o.base),c=this._coinAddressMap.get(o.quote);if(a!=null&&c!=null){const d=Ri(o.base,o.quote).pair;this.poolAddressMap.set(d,o.addressMap)}})})}addPathProvider(e){for(let t=0;t<e.paths.length;t+=1){const{base:n,quote:i}=e.paths[t];n.localeCompare(i)<0&&(e.paths[t].base=i,e.paths[t].quote=n),n==="0x2::sui::SUI"&&(e.paths[t].base=i,e.paths[t].quote=n),i==="0x2::sui::SUI"&&(e.paths[t].base=n,e.paths[t].quote=i)}return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.get(e)}getFeeRate(e,t,n){const i=Ri(e,t).pair,o=this.poolAddressMap.get(i);if(o!=null){for(const[a,c]of o.entries())if(c===n)return a*100}const s=Ri(e,t).reversePair,r=this.poolAddressMap.get(s);if(r!=null){for(const[a,c]of r.entries())if(c===n)return a*100}return 0}async price(e,t,n,i,o,s,r){const a=this.tokenInfo(e),c=this.tokenInfo(t);if(a===void 0||c===void 0)throw new L("From/To coin is undefined","InvalidCoin");const d=this.graph.getVertexByKey(a.address),l=this.graph.getVertexByKey(c.address),h=this.graph.findAllPath(d,l),_=Array.from(h);if(_.length===0)throw new L("No find valid path in coin graph","NotFoundPath");let m=[];for(let Q=0;Q<_.length;Q+=1){const W=_[Q];if(W.length>3)continue;const ue=[],A=[],u=[],p=[];for(let b=0;b<W.length-1;b+=1){const k=W[b].value.toString(),S=W[b+1].value.toString(),P=this.getPoolAddressMapAndDirection(k,S),E=P==null?void 0:P.addressMap,v=P==null?void 0:P.direction;E!=null&&v!=null&&(A.push(v),ue.push(k),ue.push(S),E.forEach(f=>{b===0?u.push(f):p.push(f)}))}for(const b of u)if(p.length>0)for(const k of p){const S={stepNums:2,poolAB:b,poolBC:k,a2b:A[0],b2c:A[1],amount:n,byAmountIn:i,coinTypeA:ue[0],coinTypeB:ue[1],coinTypeC:ue[3]};m.push(S)}else{const k={stepNums:1,poolAB:b,poolBC:void 0,a2b:A[0],b2c:void 0,amount:n,byAmountIn:i,coinTypeA:ue[0],coinTypeB:ue[1],coinTypeC:void 0};m.push(k)}}const y=m.filter(Q=>Q.stepNums===1),T=m.filter(Q=>Q.stepNums!==1);let O=[];try{O=await this.getPoolWithTVL()}catch{O=[]}if(O.length>0){const Q=new Map(O.map(W=>[W.poolAddress,W]));T.sort((W,ue)=>{let A=0,u=0;if(Q.has(W.poolAB)&&Q.has(W.poolBC)){const p=Q.get(W.poolAB),b=Q.get(W.poolBC);A=Math.min(p.tvl,b.tvl)}if(Q.has(ue.poolAB)&&Q.has(ue.poolBC)){const p=Q.get(ue.poolAB),b=Q.get(ue.poolBC);u=Math.min(p.tvl,b.tvl)}return u-A})}if(m=[...y,...T],m.length===0){if(r!=null){const Q=await this.sdk.Swap.preSwapWithMultiPool(r),W={amountIn:new g(Q.estimatedAmountIn),amountOut:new g(Q.estimatedAmountOut),poolAddress:[Q.poolAddress],a2b:[Q.aToB],rawAmountLimit:i?[Q.estimatedAmountOut]:[Q.estimatedAmountIn],isExceed:Q.isExceed,coinType:[e,t]},ue={paths:[W],partner:s,priceSlippagePoint:o};return{amountIn:new g(Q.estimatedAmountIn),amountOut:new g(Q.estimatedAmountOut),paths:[W],a2b:Q.aToB,b2c:void 0,byAmountIn:i,isExceed:Q.isExceed,targetSqrtPrice:[Q.estimatedEndSqrtPrice],currentSqrtPrice:[Q.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:ue}}throw new L("No parameters available for service downgrade","NoDowngradeNeedParams")}const j=await this.preRouterSwapA2B2C(m.slice(0,16));if(j==null){if(r!=null){const W=await this.sdk.Swap.preSwapWithMultiPool(r),ue={amountIn:new g(W.estimatedAmountIn),amountOut:new g(W.estimatedAmountOut),poolAddress:[W.poolAddress],a2b:[W.aToB],rawAmountLimit:i?[W.estimatedAmountOut]:[W.estimatedAmountIn],isExceed:W.isExceed,coinType:[e,t]},A={paths:[ue],partner:s,priceSlippagePoint:o};return{amountIn:new g(W.estimatedAmountIn),amountOut:new g(W.estimatedAmountOut),paths:[ue],a2b:W.aToB,b2c:void 0,byAmountIn:i,isExceed:W.isExceed,targetSqrtPrice:[W.estimatedEndSqrtPrice],currentSqrtPrice:[W.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:A}}return{amountIn:H,amountOut:H,paths:[],a2b:!1,b2c:!1,byAmountIn:i,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const M=j.index,B=m[M].poolBC!=null?[m[M].poolAB,m[M].poolBC]:[m[M].poolAB],$=i?[j.amountMedium,j.amountOut]:[j.amountIn,j.amountMedium],J=[];J.push(m[M].a2b),j.stepNum>1&&J.push(m[M].b2c);const z=[];z.push(m[M].coinTypeA),z.push(m[M].coinTypeB),j.stepNum>1&&z.push(m[M].coinTypeC);const re={amountIn:j.amountIn,amountOut:j.amountOut,poolAddress:B,a2b:J,rawAmountLimit:$,isExceed:j.isExceed,coinType:z},ge={paths:[re],partner:s,priceSlippagePoint:o};return{amountIn:j.amountIn,amountOut:j.amountOut,paths:[re],a2b:m[M].a2b,b2c:j.stepNum>1?m[M].b2c:void 0,byAmountIn:i,isExceed:j.isExceed,targetSqrtPrice:j.targetSqrtPrice,currentSqrtPrice:j.currentSqrtPrice,coinTypeA:m[M].coinTypeA,coinTypeB:m[M].coinTypeB,coinTypeC:j.stepNum>1?m[M].coinTypeC:void 0,createTxParams:ge}}async priceUseV1(e,t,n,i,o,s,r){if(r!=null){const a=await this.sdk.Swap.preSwapWithMultiPool(r),c={amountIn:new g(a.estimatedAmountIn),amountOut:new g(a.estimatedAmountOut),poolAddress:[a.poolAddress],a2b:[a.aToB],rawAmountLimit:i?[a.estimatedAmountOut]:[a.estimatedAmountIn],isExceed:a.isExceed,coinType:[e,t]},d={paths:[c],partner:s,priceSlippagePoint:o};return{amountIn:new g(a.estimatedAmountIn),amountOut:new g(a.estimatedAmountOut),paths:[c],a2b:a.aToB,b2c:void 0,byAmountIn:i,isExceed:a.isExceed,targetSqrtPrice:[a.estimatedEndSqrtPrice],currentSqrtPrice:[a.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:d}}throw new L("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(e){var h;if(e.length===0)return null;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new N;for(const _ of e)if(_.stepNums>1){const m=[i.object(_.poolAB),i.object(_.poolBC),i.pure.bool(_.a2b),i.pure.bool(_.b2c),i.pure.bool(_.byAmountIn),i.pure.u64(_.amount.toString())],y=[];_.a2b?y.push(_.coinTypeA,_.coinTypeB):y.push(_.coinTypeB,_.coinTypeA),_.b2c?y.push(_.coinTypeB,_.coinTypeC):y.push(_.coinTypeC,_.coinTypeB),i.moveCall({target:`${t.published_at}::${En}::calculate_router_swap_result`,typeArguments:y,arguments:m})}else{const m=[i.object(_.poolAB),i.pure.bool(_.a2b),i.pure.bool(_.byAmountIn),i.pure.u64(_.amount.toString())],y=_.a2b?[_.coinTypeA,_.coinTypeB]:[_.coinTypeB,_.coinTypeA];i.moveCall({target:`${t.published_at}::${Xh}::get_expect_swap_result`,arguments:m,typeArguments:y})}if(!ht(n.address))throw new L("this config simulationAccount is not set right","InvalidSimulateAccount");const s=(h=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:h.filter(_=>D(_.type).name==="CalculatedRouterSwapResultEvent"||D(_.type).name==="ExpectSwapResultEvent");if(s.length===0)return null;let r=e[0].byAmountIn?H:Qn,a=0;for(let _=0;_<s.length;_+=1)if(!s[_].parsedJson.data.is_exceed)if(e[0].byAmountIn){const m=new g(s[_].parsedJson.data.amount_out);m.gt(r)&&(a=_,r=m)}else{const m=e[_].stepNums>1?new g(s[_].parsedJson.data.amount_in):new g(s[_].parsedJson.data.amount_in).add(new g(s[_].parsedJson.data.fee_amount));m.lt(r)&&(a=_,r=m)}const c=[],d=[];return e[a].stepNums>1?(d.push(s[a].parsedJson.data.target_sqrt_price_ab,s[a].parsedJson.data.target_sqrt_price_cd),c.push(s[a].parsedJson.data.current_sqrt_price_ab,s[a].parsedJson.data.current_sqrt_price_cd)):(d.push(s[a].parsedJson.data.after_sqrt_price),c.push(s[a].parsedJson.current_sqrt_price)),{index:a,amountIn:e[0].byAmountIn?e[a].amount:r,amountMedium:s[a].parsedJson.data.amount_medium,amountOut:e[0].byAmountIn?r:e[a].amount,targetSqrtPrice:d,currentSqrtPrice:c,isExceed:s[a].parsedJson.data.is_exceed,stepNum:e[a].stepNums}}async getPoolWithTVL(){const e=[],{swapCountUrl:t}=this._sdk.sdkOptions;if(!t)return e;let n;try{n=await fetch(t)}catch{throw new L(`Failed to get pool list with liquidity from ${t}.`,"InvalidSwapCountUrl")}let i;try{i=await n.json()}catch{throw new L(`Failed tp [arse response from ${t}].`,"InvalidSwapCountUrl")}if(i.code!==200)throw new L(`Failed to get pool list from ${t}. Statu code is ${i.code}.`,"InvalidSwapCountUrl");const{pools:o}=i.data;for(const s of o)e.push({poolAddress:s.swap_account,tvl:Number(s.tvl_in_usd)});return e}},Bp=class{constructor(e){F(this,"_sdk");F(this,"calculateSingleImpact",(e,t)=>t.minus(e).div(t).mul(100));this._sdk=e}get sdk(){return this._sdk}calculateSwapFee(e){let t=w(0);return e.forEach(n=>{const i=n.basePaths.length;if(i>0){const o=n.basePaths[0],s=o.label==="Cetus"?new K(o.feeRate).div(10**6):new K(o.feeRate).div(10**9),r=w(o.inputAmount).div(10**o.fromDecimal).mul(s);if(t=t.add(r),i>1){const a=n.basePaths[1],c=o.direction?o.currentPrice:new K(1).div(o.currentPrice),d=a.direction?a.currentPrice:new K(1).div(a.currentPrice),l=a.label==="Cetus"?new K(a.feeRate).div(10**6):new K(a.feeRate).div(10**9),_=w(a.outputAmount).div(10**a.toDecimal).mul(l).div(c.mul(d));t=t.add(_)}}}),t.toString()}calculateSwapPriceImpact(e){let t=w(0);return e.forEach(n=>{const i=n.basePaths.length;if(i===1){const o=n.basePaths[0],s=w(o.outputAmount).div(10**o.toDecimal),r=w(o.inputAmount).div(10**o.fromDecimal),a=s.div(r),c=o.direction?new K(o.currentPrice):new K(1).div(o.currentPrice);t=t.add(this.calculateSingleImpact(a,c))}if(i===2){const o=n.basePaths[0],s=n.basePaths[1],r=o.direction?new K(o.currentPrice):new K(1).div(o.currentPrice),a=s.direction?new K(s.currentPrice):new K(1).div(s.currentPrice),c=r.mul(a),d=new K(s.outputAmount).div(10**s.toDecimal),l=new K(o.inputAmount).div(10**o.fromDecimal),h=d.div(l);t=t.add(this.calculateSingleImpact(h,c))}}),t.toString()}async preSwapWithMultiPool(e){var d;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new N,o=[e.coinTypeA,e.coinTypeB];for(let l=0;l<e.poolAddresses.length;l+=1){const h=[i.object(e.poolAddresses[l]),i.pure.bool(e.a2b),i.pure.bool(e.byAmountIn),i.pure.u64(e.amount)];i.moveCall({target:`${t.published_at}::${qt}::calculate_swap_result`,arguments:h,typeArguments:o})}if(!ht(n.address))throw new L("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(s.error!=null)throw new L(`pre swap with multi pools error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const r=(d=s.events)==null?void 0:d.filter(l=>D(l.type).name==="CalculatedSwapResultEvent");if(r.length===0)return null;if(r.length!==e.poolAddresses.length)throw new L("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=e.byAmountIn?H:Qn,c=0;for(let l=0;l<r.length;l+=1)if(!r[l].parsedJson.data.is_exceed)if(e.byAmountIn){const h=new g(r[l].parsedJson.data.amount_out);h.gt(a)&&(c=l,a=h)}else{const h=new g(r[l].parsedJson.data.amount_out);h.lt(a)&&(c=l,a=h)}return this.transformSwapWithMultiPoolData({poolAddress:e.poolAddresses[c],a2b:e.a2b,byAmountIn:e.byAmountIn,amount:e.amount,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},r[c].parsedJson)}async preswap(e){var c;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new N,o=[e.coinTypeA,e.coinTypeB],s=[i.object(e.pool.poolAddress),i.pure.bool(e.a2b),i.pure.bool(e.byAmountIn),i.pure.u64(e.amount)];if(i.moveCall({target:`${t.published_at}::${qt}::calculate_swap_result`,arguments:s,typeArguments:o}),!ht(n.address))throw new L("this config simulationAccount is not set right","InvalidSimulateAccount");const r=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(r.error!=null)throw new L(`preswap error code: ${r.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=r.events)==null?void 0:c.filter(d=>D(d.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const n=t.amount_in&&t.fee_amount?new g(t.amount_in).add(new g(t.fee_amount)).toString():"";return{poolAddress:e.pool.poolAddress,currentSqrtPrice:e.currentSqrtPrice,estimatedAmountIn:n,estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}transformSwapWithMultiPoolData(e,t){const{data:n}=t;console.log("json data. ",n);const i=n.amount_in&&n.fee_amount?new g(n.amount_in).add(new g(n.fee_amount)).toString():"";return{poolAddress:e.poolAddress,estimatedAmountIn:i,estimatedAmountOut:n.amount_out,estimatedEndSqrtPrice:n.after_sqrt_price,estimatedStartSqrtPrice:n.step_results[0].current_sqrt_price,estimatedFeeAmount:n.fee_amount,isExceed:n.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}calculateRates(e){const{currentPool:t}=e,n=Gh(t);let i;e.a2b?i=e.swapTicks.sort((h,_)=>_.index-h.index):i=e.swapTicks.sort((h,_)=>h.index-_.index);const o=dp(e.a2b,e.byAmountIn,e.amount,n,i);let s=!1;e.byAmountIn?s=o.amountIn.lt(e.amount):s=o.amountOut.lt(e.amount);const r=Qt.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&o.nextSqrtPrice.lt(r)&&(s=!0),!e.a2b&&o.nextSqrtPrice.gt(r)&&(s=!0);let a=0;o.crossTickNum>6&&o.crossTickNum<40&&(a=22e3*(o.crossTickNum-6)),o.crossTickNum>40&&(s=!0);const c=G.sqrtPriceX64ToPrice(n.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),d=G.sqrtPriceX64ToPrice(o.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),l=Math.abs(c-d)/c*100;return{estimatedAmountIn:o.amountIn,estimatedAmountOut:o.amountOut,estimatedEndSqrtPrice:o.nextSqrtPrice,estimatedFeeAmount:o.feeAmount,isExceed:s,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:l}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:o}=lo(e);if(e.a2b&&i||!e.a2b&&o)return await X.buildSwapTransactionForGas(this._sdk,e,n,t)}return X.buildSwapTransaction(this.sdk,e,n)}async createSwapTransactionWithoutTransferCoinsPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:o}=lo(e);if(e.a2b&&i||!e.a2b&&o)return await X.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,e,n,t)}return X.buildSwapTransactionWithoutTransferCoins(this.sdk,e,n)}},Dp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",n=!1){return await this.factchWarpPoolList(e,t,n)}async getTokenListByCoinTypes(e){const t={},n="getAllRegisteredTokenList",i=this.getCache(n);if(i!==void 0){const s=i;for(const r of e)for(const a of s)if(ke(r)===ke(a.address)){t[r]=a;continue}}const o=e.filter(s=>t[s]===void 0);for(const s of o){const r=`${s}_metadata`,a=this.getCache(r);if(a!==void 0)t[s]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:s});if(c){const d={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:s};t[s]=d,this.updateCache(r,d,V)}}}return t}async factchTokenList(e="",t=!1){var h;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,o="getAllRegisteredTokenList",s=this.getCache(o,t);if(s!==void 0)return s;const r=e.length>0,a=512;let c=0,d=[];if(i===void 0)throw Error("please config token ofsdkOptions");const l=I(i);for(;;){const _=new N;_.moveCall({target:`${i.published_at}::coin_list::${r?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:r?[_.pure.address(l.coin_registry_id),_.pure.address(e),_.pure.u64(c),_.pure.u64(a)]:[_.pure.address(l.coin_registry_id),_.pure.u64(c),_.pure.u64(a)]});const m=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:n.address}),y=[];if((h=m.events)==null||h.forEach(T=>{D(T.type).full_address===`${i.published_at}::coin_list::FetchCoinListEvent`&&T.parsedJson.full_list.value_list.forEach(j=>{y.push(this.transformData(j,!1))})}),d=[...d,...y],y.length<a)break;c=d.length}return d}async factchPoolList(e="",t=!1){var h;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,o="getAllRegisteredPoolList",s=this.getCache(o,t);if(s!==void 0)return s;let r=[];const a=512;let c=0;const d=e.length>0;if(i===void 0)throw Error("please config token ofsdkOptions");const l=I(i);for(;;){const _=new N;if(_.moveCall({target:`${i.published_at}::lp_list::${d?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:d?[_.pure.address(l.pool_registry_id),_.pure.address(e),_.pure.u64(c),_.pure.u64(a)]:[_.pure.address(l.pool_registry_id),_.pure.u64(c),_.pure.u64(a)]}),!ht(n.address))throw new L("this config simulationAccount is not set right","InvalidSimulateAccount");const m=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:n.address}),y=[];if((h=m.events)==null||h.forEach(T=>{D(T.type).full_address===`${i.published_at}::lp_list::FetchPoolListEvent`&&T.parsedJson.full_list.value_list.forEach(j=>{y.push(this.transformData(j,!0))})}),r=[...r,...y],y.length<a)break;c=r.length}return r}async factchWarpPoolList(e="",t="",n=!1){const i=await this.factchPoolList(e,n);if(i.length===0)return[];const o=await this.factchTokenList(t,n),s=[];for(const r of i){for(const a of o)a.address===r.coin_a_address&&(r.coinA=a),a.address===r.coin_b_address&&(r.coinB=a);s.push(r)}return s}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.token.package_id,n=`${t}_getTokenConfigEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Ii(o),r=await this._sdk.fullClient.queryEventsByPage({Transaction:s}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return r.data.length>0&&r.data.forEach(c=>{const d=D(c.type);if(c.transactionModule==="coin_list")switch(d.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(d.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(n,a,V),a}transformData(e,t){const n={...e};if(t)try{n.coin_a_address=D(n.coin_a_address).full_address,n.coin_b_address=D(n.coin_b_address).full_address}catch{}else n.address=D(n.address).full_address;if(e.extensions){const i=e.extensions.contents;for(const o of i){const{key:s}=o;let{value:r}=o;if(s==="labels")try{r=JSON.parse(decodeURIComponent(Li.decode(r)))}catch{}s==="pyth_id"&&(r=he(r)),n[s]=r}delete n.extensions}return n}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},Rp=class{constructor(e){F(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}calculatePrice(e,t,n,i,o){const s=i?t:n,r=i?n:t;return o==="Cetus"?G.sqrtPriceX64ToPrice(e,s,r):new K(e.toString()).div(new K(10).pow(new K(r+9-s)))}parseJsonResult(e){return{isExceed:e.is_exceed,isTimeout:e.is_timeout,inputAmount:e.input_amount,outputAmount:e.output_amount,fromCoin:e.from_coin,toCoin:e.to_coin,byAmountIn:e.by_amount_in,splitPaths:e.split_paths.map(n=>({pathIndex:n.path_index,lastQuoteOutput:n.last_quote_output,percent:n.percent,basePaths:n.best_path.map(o=>({direction:o.direction,label:o.label,poolAddress:o.provider,fromCoin:o.from_coin,toCoin:o.to_coin,outputAmount:o.output_amount,inputAmount:o.input_amount,feeRate:o.fee_rate,currentSqrtPrice:new g(o.current_sqrt_price.toString()),afterSqrtPrice:o.label==="Cetus"?new g(o.after_sqrt_price.toString()):H,fromDecimal:o.from_decimal,toDecimal:o.to_decimal,currentPrice:this.calculatePrice(new g(o.current_sqrt_price.toString()),o.from_decimal,o.to_decimal,o.direction,o.label)})),inputAmount:n.input_amount,outputAmount:n.output_amount}))}}async fetchDataWithAxios(e,t,n){try{const i={...t,timeout:n},o=await Ph(e,i);return o.status===200?this.parseJsonResult(o.data):null}catch(i){return console.error(i),null}}async getBestRouter(e,t,n,i,o,s,r,a,c=!1,d=!1,l=[]){let h=null,_="v2",m={},y=this.sdk.sdkOptions.aggregatorUrl;if(l.length>0){const T=new URL(y);y=`${T.protocol}//${T.hostname}/router_with_lp_changes`,m={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:n,by_amount_in:i,order_split:c,external_router:d,sender_address:"None",request_id:encodeURIComponent(Mi()),lp_changes:l})}}else y=`
      ${y}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(d)}&sender_address=''&request_id=${encodeURIComponent(Mi())}
      `;if(h=await this.fetchDataWithAxios(y,m,6e3),h==null){const T=await this.sdk.Router.priceUseV1(e,t,new g(n),i,o,s,a),O=[];for(const M of T.paths){const B=[];if(M.poolAddress.length>1){const J=this.sdk.Router.tokenInfo(M.coinType[0]).decimals,z=this.sdk.Router.tokenInfo(M.coinType[1]).decimals,re=M.a2b[0]?G.sqrtPriceX64ToPrice(new g(T.currentSqrtPrice[0]),J,z):G.sqrtPriceX64ToPrice(new g(T.currentSqrtPrice[0]),z,J),ge={direction:M.a2b[0],label:"Cetus",poolAddress:M.poolAddress[0],fromCoin:M.coinType[0],toCoin:M.coinType[1],feeRate:this.sdk.Router.getFeeRate(M.coinType[0],M.coinType[1],M.poolAddress[0]),outputAmount:T.byAmountIn?M.rawAmountLimit[0].toString():M.rawAmountLimit[1].toString(),inputAmount:M.amountIn.toString(),currentSqrtPrice:T.currentSqrtPrice[0],currentPrice:re,fromDecimal:J,toDecimal:z},bt=this.sdk.Router.tokenInfo(M.coinType[1]).decimals,Q=this.sdk.Router.tokenInfo(M.coinType[2]).decimals,W=M.a2b[1]?G.sqrtPriceX64ToPrice(new g(T.currentSqrtPrice[1]),bt,Q):G.sqrtPriceX64ToPrice(new g(T.currentSqrtPrice[1]),Q,bt),ue={direction:M.a2b[1],label:"Cetus",poolAddress:M.poolAddress[1],fromCoin:M.coinType[1],toCoin:M.coinType[2],feeRate:this.sdk.Router.getFeeRate(M.coinType[1],M.coinType[2],M.poolAddress[1]),outputAmount:M.amountOut.toString(),inputAmount:T.byAmountIn?M.rawAmountLimit[0].toString():M.rawAmountLimit[1].toString(),currentSqrtPrice:T.currentSqrtPrice[1],currentPrice:W,fromDecimal:bt,toDecimal:Q};B.push(ge,ue)}else{const J=this.sdk.Router.tokenInfo(M.coinType[0]).decimals,z=this.sdk.Router.tokenInfo(M.coinType[1]).decimals,re=M.a2b[0]?G.sqrtPriceX64ToPrice(new g(T.currentSqrtPrice[0]),J,z):G.sqrtPriceX64ToPrice(new g(T.currentSqrtPrice[0]),z,J),ge={direction:M.a2b[0],label:"Cetus",poolAddress:M.poolAddress[0],fromCoin:M.coinType[0],toCoin:M.coinType[1],feeRate:this.sdk.Router.getFeeRate(M.coinType[0],M.coinType[1],M.poolAddress[0]),outputAmount:M.amountOut.toString(),inputAmount:M.amountIn.toString(),currentSqrtPrice:T.currentSqrtPrice[0],currentPrice:re,fromDecimal:J,toDecimal:z};B.push(ge)}const $={percent:Number(M.amountIn)/Number(T.amountIn)*100,inputAmount:Number(M.amountIn.toString()),outputAmount:Number(M.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:B};O.push($)}const j={isExceed:T.isExceed,isTimeout:!0,inputAmount:Number(T.amountIn.toString()),outputAmount:Number(T.amountOut.toString()),fromCoin:T.coinTypeA,toCoin:T.coinTypeC!=null?T.coinTypeC:T.coinTypeB,byAmountIn:T.byAmountIn,splitPaths:O};_="v1",h=j}return{result:h,version:_}}async getBestRouterByServer(e,t,n,i,o,s=!1,r=!1,a=[]){let c=null,d={},l=this.sdk.sdkOptions.aggregatorUrl;if(a.length>0){const h=new URL(l);l=`${h.protocol}//${h.hostname}/router_with_lp_changes`,d={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:n,by_amount_in:i,order_split:s,external_router:r,sender_address:"None",request_id:encodeURIComponent(Mi()),lp_changes:a})}}else l=`
      ${l}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(s)}&external_router=${encodeURIComponent(r)}&sender_address=''&request_id=${encodeURIComponent(Mi())}
      `;if(c=await this.fetchDataWithAxios(l,d,6e3),c==null)throw new L("Invalid server response","InvalidServerResponse");return c}async getBestRouterByRpc(e,t,n,i,o,s,r){const a=await this.sdk.Router.priceUseV1(e,t,new g(n),i,o,s,r),c=[];for(const l of a.paths){const h=[];if(l.poolAddress.length>1){const m=this.sdk.Router.tokenInfo(l.coinType[0]).decimals,y=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,T=l.a2b[0]?G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[0]),m,y):G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[0]),y,m),O={direction:l.a2b[0],label:"Cetus",poolAddress:l.poolAddress[0],fromCoin:l.coinType[0],toCoin:l.coinType[1],feeRate:this.sdk.Router.getFeeRate(l.coinType[0],l.coinType[1],l.poolAddress[0]),outputAmount:a.byAmountIn?l.rawAmountLimit[0].toString():l.rawAmountLimit[1].toString(),inputAmount:l.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:T,fromDecimal:m,toDecimal:y},j=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,M=this.sdk.Router.tokenInfo(l.coinType[2]).decimals,B=l.a2b[1]?G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[1]),j,M):G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[1]),M,j),$={direction:l.a2b[1],label:"Cetus",poolAddress:l.poolAddress[1],fromCoin:l.coinType[1],toCoin:l.coinType[2],feeRate:this.sdk.Router.getFeeRate(l.coinType[1],l.coinType[2],l.poolAddress[1]),outputAmount:l.amountOut.toString(),inputAmount:a.byAmountIn?l.rawAmountLimit[0].toString():l.rawAmountLimit[1].toString(),currentSqrtPrice:a.currentSqrtPrice[1],currentPrice:B,fromDecimal:j,toDecimal:M};h.push(O,$)}else{const m=this.sdk.Router.tokenInfo(l.coinType[0]).decimals,y=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,T=l.a2b[0]?G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[0]),m,y):G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[0]),y,m),O={direction:l.a2b[0],label:"Cetus",poolAddress:l.poolAddress[0],fromCoin:l.coinType[0],toCoin:l.coinType[1],feeRate:this.sdk.Router.getFeeRate(l.coinType[0],l.coinType[1],l.poolAddress[0]),outputAmount:l.amountOut.toString(),inputAmount:l.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:T,fromDecimal:m,toDecimal:y};h.push(O)}const _={percent:Number(l.amountIn)/Number(a.amountIn)*100,inputAmount:Number(l.amountIn.toString()),outputAmount:Number(l.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:h};c.push(_)}return{isExceed:a.isExceed,isTimeout:!0,inputAmount:Number(a.amountIn.toString()),outputAmount:Number(a.amountOut.toString()),fromCoin:a.coinTypeA,toCoin:a.coinTypeC!=null?a.coinTypeC:a.coinTypeB,byAmountIn:a.byAmountIn,splitPaths:c}}},Np=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}setTokenListCache(e){const{coin_list_handle:t}=I(this.sdk.sdkOptions.cetus_config),n=`${t}_getCoinConfigs`,i=this.getCache(n),o=i?[...i,...e]:e;this.updateCache(n,o,V)}async getTokenListByCoinTypes(e){const t={},{coin_list_handle:n}=I(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,o=this.getCache(i);if(o!==void 0){const r=o;for(const a of e)for(const c of r)if(ke(a)===ke(c.address)){t[a]=c;continue}}const s=e.filter(r=>t[r]===void 0);for(const r of s){const a=`${r}_metadata`,c=this.getCache(a);if(c!==void 0)t[r]=c;else{const d=await this._sdk.fullClient.getCoinMetadata({coinType:r});if(d){const l={id:d.id,pyth_id:"",name:d.name,symbol:d.symbol,official_symbol:d.symbol,coingecko_id:"",decimals:d.decimals,project_url:"",logo_url:d.iconUrl,address:r};t[r]=l,this.updateCache(a,l,V)}else console.log(`not found ${r}`)}}return t}async getCoinConfigs(e=!1,t=!0){const{coin_list_handle:n}=I(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new L(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildCoinConfig(d,t);this.updateCache(`${n}_${l.address}_getCoinConfig`,l,V),c.push({...l})}),this.updateCache(i,c,V),c}async getCoinConfig(e,t=!1,n=!0){var c,d;const{coin_list_handle:i}=I(this.sdk.sdkOptions.cetus_config),o=`${i}_${e}_getCoinConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"0x1::type_name::TypeName",value:{name:pp(e)}}});if(r.error!=null||((d=(c=r.data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new L(`when getCoinConfig get object error: ${r.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(r,n);return this.updateCache(o,a,V),a}buildCoinConfig(e,t=!0){let n=Y(e);n=n.value.fields;const i={...n};return i.id=Gt(e),i.address=D(n.coin_type.fields.name).full_address,n.pyth_id&&(i.pyth_id=he(n.pyth_id)),this.transformExtensions(i,n.extension_fields.fields.contents,t),delete i.coin_type,i}async getClmmPoolConfigs(e=!1,t=!0){const{clmm_pools_handle:n}=I(this.sdk.sdkOptions.cetus_config),i=`${n}_getClmmPoolConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new L(`when getClmmPoolsConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildClmmPoolConfig(d,t);this.updateCache(`${l.pool_address}_getClmmPoolConfig`,l,V),c.push({...l})}),this.updateCache(i,c,V),c}async getClmmPoolConfig(e,t=!1,n=!0){const{clmm_pools_handle:i}=I(this.sdk.sdkOptions.cetus_config),o=`${e}_getClmmPoolConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}}),a=this.buildClmmPoolConfig(r,n);return this.updateCache(o,a,V),a}buildClmmPoolConfig(e,t=!0){let n=Y(e);n=n.value.fields;const i={...n};return i.id=Gt(e),i.pool_address=he(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,t),i}async getLaunchpadPoolConfigs(e=!1,t=!0){const{launchpad_pools_handle:n}=I(this.sdk.sdkOptions.cetus_config),i=`${n}_getLaunchpadPoolConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new L(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildLaunchpadPoolConfig(d,t);this.updateCache(`${l.pool_address}_getLaunchpadPoolConfig`,l,V),c.push({...l})}),this.updateCache(i,c,V),c}async getLaunchpadPoolConfig(e,t=!1,n=!0){const{launchpad_pools_handle:i}=I(this.sdk.sdkOptions.cetus_config),o=`${e}_getLaunchpadPoolConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}}),a=this.buildLaunchpadPoolConfig(r,n);return this.updateCache(o,a,V),a}buildLaunchpadPoolConfig(e,t=!0){let n=Y(e);n=n.value.fields;const i={...n};i.id=Gt(e),i.pool_address=he(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,t);const o=[];n.social_media.fields.contents.forEach(s=>{o.push({name:s.fields.value.fields.name,link:s.fields.value.fields.link})}),i.social_media=o;try{i.regulation=decodeURIComponent(Li.decode(i.regulation).replace(/%/g,"%25"))}catch{i.regulation=Li.decode(i.regulation)}return i}transformExtensions(e,t,n=!0){const i=[];for(const o of t){const{key:s}=o.fields;let{value:r}=o.fields;if(s==="labels")try{r=JSON.parse(decodeURIComponent(Li.decode(r)))}catch{}n&&(e[s]=r),i.push({key:s,value:r})}delete e.extension_fields,n||(e.extensions=i)}async getCetusConfig(e=!1){const t=this._sdk.sdkOptions.cetus_config.package_id,n=`${t}_getCetusConfig`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Ii(o),r=await this._sdk.fullClient.queryEventsByPage({Transaction:s});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(r.data.length>0)for(const c of r.data)switch(D(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(n,a,V),a}async getCetusConfigHandle(e){const t=[e.clmm_pools_id,e.coin_list_id,e.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:t,options:{showContent:!0}})).forEach(i=>{var r,a;if(i.error!=null||((a=(r=i.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new L(`when getCetusConfigHandle get objects error: ${i.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const o=Y(i),s=Dn(i);switch(D(s).name){case"ClmmPools":e.clmm_pools_handle=o.pools.fields.id.id;break;case"CoinList":e.coin_list_handle=o.coins.fields.id.id;break;case"LaunchpadPools":e.launchpad_pools_handle=o.pools.fields.id.id;break}}),e}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){try{const n=this._cache[e];if(!n)return;if(t||!n.isValid()){delete this._cache[e];return}return n.value}catch(n){console.error(`Error accessing cache for key ${e}:`,n);return}}},qp=class extends Fh{async queryEventsByPage(e,t="all"){let n=[],i=!0;const o=t==="all";let s=o?null:t.cursor;do{const r=await this.queryEvents({query:e,cursor:s,limit:o?null:t.limit});r.data?(n=[...n,...r.data],i=r.hasNextPage,s=r.nextCursor):i=!1}while(o&&i);return{data:n,nextCursor:s,hasNextPage:i}}async getOwnedObjectsByPage(e,t,n="all"){let i=[],o=!0;const s=n==="all";let r=s?null:n.cursor;do{const a=await this.getOwnedObjects({owner:e,...t,cursor:r,limit:s?null:n.limit});a.data?(i=[...i,...a.data],o=a.hasNextPage,r=a.nextCursor):o=!1}while(s&&o);return{data:i,nextCursor:r,hasNextPage:o}}async getDynamicFieldsByPage(e,t="all"){let n=[],i=!0;const o=t==="all";let s=o?null:t.cursor;do{const r=await this.getDynamicFields({parentId:e,cursor:s,limit:o?null:t.limit});r.data?(n=[...n,...r.data],i=r.hasNextPage,s=r.nextCursor):i=!1}while(o&&i);return{data:n,nextCursor:s,hasNextPage:i}}async batchGetObjects(e,t,n=50){let i=[];try{for(let o=0;o<Math.ceil(e.length/n);o++){const s=await this.multiGetObjects({ids:e.slice(o*n,n*(o+1)),options:t});i=[...i,...s]}}catch(o){console.log(o)}return i}async calculationTxGas(e){const{sender:t}=e.blockData;if(t===void 0)throw Error("sdk sender is empty");const n=await this.devInspectTransactionBlock({transactionBlock:e,sender:t}),{gasUsed:i}=n.effects;return Number(i.computationCost)+Number(i.storageCost)-Number(i.storageRebate)}async sendTransaction(e,t){try{return await this.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(n){console.log("error: ",n)}}async sendSimulationTransaction(e,t,n=!0){try{if(n)return await this.devInspectTransactionBlock({transactionBlock:e,sender:t})}catch(i){console.log("devInspectTransactionBlock error",i)}}},$p=class{constructor(e){F(this,"_cache",{});F(this,"_rpcModule");F(this,"_pool");F(this,"_position");F(this,"_swap");F(this,"_rewarder");F(this,"_router");F(this,"_router_v2");F(this,"_token");F(this,"_config");F(this,"_sdkOptions");F(this,"_senderAddress","");this._sdkOptions=e,this._rpcModule=new qp({url:e.fullRpcUrl}),this._swap=new Bp(this),this._pool=new Op(this),this._position=new jp(this),this._rewarder=new Mp(this),this._router=new Ep(this),this._router_v2=new Rp(this),this._token=new Dp(this),this._config=new Np(this),or(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(e,t,n=!0){const i=[];let o=null;const s=`${this.sdkOptions.fullRpcUrl}_${e}_${t}_getOwnerCoinAssets`,r=this.getCache(s,n);if(r)return r;for(;;){const a=await(t?this.fullClient.getCoins({owner:e,coinType:t,cursor:o}):this.fullClient.getAllCoins({owner:e,cursor:o}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&i.push({coinAddress:D(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),o=a.nextCursor,!a.hasNextPage)break}return this.updateCache(s,i,30*1e3),i}async getOwnerCoinBalances(e,t){let n=[];return t?n=[await this.fullClient.getBalance({owner:e,coinType:t})]:n=[...await this.fullClient.getAllBalances({owner:e})],n}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},M_=$p,os="router",Vn=1e4,vn=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:D(t.clmm_pool_id).address,booster_type:D(t.booster_type.fields.name).source_address,pool_id:D(t.pool_id).address,coinTypeA:D(t.coin_type_a.fields.name).source_address,coinTypeB:D(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=Y(e),n=[];return t.config.fields.contents.forEach(o=>{n.push({lock_day:Number(o.fields.key),multiplier:Number(w(o.fields.value).div(Vn))})}),{basic_percent:Number(w(t.basic_percent).div(Vn)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:n,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:Gt(e)}}static buildLockNFT(e){const t=D(Gt(e)).address;return{lock_clmm_position:Jn(e),locked_nft_id:t}}static buildLockPositionInfo(e){const t=Y(e),{value:n}=t.value.fields;return{type:n.type,position_id:n.fields.position_id,start_time:Number(n.fields.start_time),lock_period:Number(n.fields.lock_period),end_time:Number(n.fields.end_time),growth_rewarder:n.fields.growth_rewarder,rewarder_owned:n.fields.rewarder_owned,is_settled:n.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},Lp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var s;const{booster:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n,e),o=[];if(i!==void 0)o.push(...i);else{const r=[];(s=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(I(t).booster_pool_handle)).data)==null||s.forEach(d=>{r.push(d.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showContent:!0});for(const d of c){const l=Y(d);if(l){const h=vn.buildPoolImmutables(l);this.updateCache(`${h.pool_id}_getPoolImmutable`,h,V),o.push(h)}}}return this.updateCache(n,o,V),o}async getPoolImmutable(e){const{booster:t}=this._sdk.sdkOptions,n=`${e}_getPoolImmutable`,i=this.getCache(n);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:I(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),s=Y(o),r=vn.buildPoolImmutables(s);return this.updateCache(n,r,V),r}async getPools(){const e=[],n=(await this.getPoolImmutables()).map(o=>o.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(const o of i){const s=vn.buildPoolState(o);if(s){const r={...await this.getPoolImmutable(s.pool_id),...s};e.push(r);const a=`${r.pool_id}_getPoolObject`;this.updateCache(a,r,V)}}return e}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t),o=await this.getPoolImmutable(e);if(i!==void 0)return{...o,...i};const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=vn.buildPoolState(s),a={...o,...r};return this.updateCache(n,a,V),a}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),n=Y(t);return n?n.list.fields.id.id:""}async getBoosterInitConfigs(){var i;const{package_id:e}=this.sdk.sdkOptions.booster,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,n={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(o=>{const s=o.parsedJson;s&&(n.booster_config_id=s.config_id)}),n.booster_pool_handle=await this.getPoolHandleId(n.booster_config_id),n}async getOwnerBoosterPositions(e,t,n){const{booster:i}=this.sdk.sdkOptions,o=[],s=[],r=`${i.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:r}});for(const d of a.data)if(D(Ht(d)).source_address===r&&d.data){const h=vn.buildLockNFT(d);this.updateCache(`${h.locked_nft_id}_getBoosterPositionById`,h,V),h&&(t===void 0||t===h.lock_clmm_position.pool)&&o.push(h)}const c=await this.getLockPositionInfos(n,o.map(d=>d.locked_nft_id));for(const d of o)for(const l of c)if(d.lock_clmm_position.pos_object_id===l.position_id){s.push({...d,...l});break}return s}async getBoosterPosition(e,t){const n=`${t}_getBoosterPositionById`,i=this.getCache(n);let o;if(i!==void 0)o=i;else{const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});o=vn.buildLockNFT(r),this.updateCache(n,o,V)}const s=await this.getLockPositionInfo(e,t);return{...o,...s}}async getLockPositionInfos(e,t=[]){var s;const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),i=[],o=[];return(s=n.data)==null||s.forEach(r=>{t.length>0?t.includes(r.name.value)&&i.push(r.objectId):i.push(r.objectId)}),i.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showContent:!0})).forEach(a=>{const c=vn.buildLockPositionInfo(a);c&&o.push(c)}),o}async getLockPositionInfo(e,t){const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return vn.buildLockPositionInfo(n)}calculateXCetusRewarder(e,t,n){let i=t.basic_percent,o="0";e.forEach(a=>{a.coin_address===t.booster_type&&(console.log("find ",t.booster_type),o=a.amount_owed.toString())}),n.is_settled||t.config.forEach(a=>{a.lock_day===n.lock_period&&(i=a.multiplier)});const s=w(o).sub(n.growth_rewarder).mul(i);return w(n.rewarder_owned).add(s).toString()}lockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new N;return i.moveCall({target:`${t.published_at}::${os}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[i.object(I(t).booster_config_id),i.object(I(n).global_config_id),i.object(e.booster_pool_id),i.object(e.clmm_pool_id),i.object(e.clmm_position_id),i.pure.u16(e.lock_day),i.object(q)]}),i}canceLockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${os}::cancel_lock`,typeArguments:[e.booster_type],arguments:[n.object(I(t).booster_config_id),n.object(e.booster_pool_id),n.object(e.lock_nft_id),n.object(q)]}),n}redeemPayload(e){const{booster:t,xcetus:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,o=new N,s=I(n);return o.moveCall({target:`${t.published_at}::${os}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[o.object(I(t).booster_config_id),o.object(I(i).global_config_id),o.object(e.booster_pool_id),o.object(e.lock_nft_id),o.object(e.clmm_pool_id),o.object(s.lock_manager_id),o.object(s.xcetus_manager_id),o.object(e.ve_nft_id),o.object(q)]}),o}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},Tt="router",td=1e9,kt=class{static priceRealToFix(e,t,n){const i=w(t-n).toNumber();return Number(w(e).div(w(10).pow(w(i))).toString())}static priceFixToReal(e,t,n){const i=w(t-n).toNumber();return Number(w(e).mul(w(10).pow(w(i))).toString())}static raiseTotalAmount(e,t,n){const i=w(t-n).abs().toNumber();return t>n?Number(w(e.total_supply).mul(e.current_price).div(w(10).pow(w(i))).toString()):Number(w(e.total_supply).mul(e.current_price).mul(w(10).pow(w(i))).toString())}static buildLaunchPadPool(e){const t=Ht(e),n=D(t),i=Y(e),o={coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],pool_address:he(Gt(e)),is_settle:i.is_settle,current_price:w(i.initialize_price).div(w(td)).toString(),price:i.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,total_purchase_amount:i.reality_raise_total,total_supply:i.sale_total,min_purchase:i.min_purchase,max_purchase:i.max_purchase,complete_raise_limit:i.least_raise_amount,softcap:i.softcap,max_raise_amount:i.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(i.liquidity_rate)/1e4,is_cancel:i.is_cancel,duration_summary:{start_time:Number(i.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(i.duration_manager.fields.activity_duration),settle_duration:Number(i.duration_manager.fields.settle_duration),lock_up_duration:Number(i.duration_manager.fields.locked_duration)},white_summary:{white_handle:i.white_list.fields.users.fields.id.id,protection_hard_cap:i.white_list.fields.hard_cap_total,protection_limit_used:i.white_list.fields.purchase_total,size:Number(i.white_list.fields.users.fields.size)},unused_sale:i.unused_sale,harvest_raise:i.harvest_raise,tick_spacing:Number(i.tick_spacing),owner:i.recipient,purchase_summary:{purchase_handle:i.purchase_list.fields.id.id,size:Number(i.purchase_list.fields.size)},pool_status:"Failed"};return kt.updatePoolStatus(o),o}static updatePoolStatus(e){const t=Number(w(Date.now()/1e3).toFixed(0)),{duration_summary:n}=e,i=n.start_time+n.purchase_duration,o=i+n.settle_duration;if(n.end_time=i,n.settle_end_time=o,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<n.start_time)e.pool_status="Upcoming";else if(t>n.start_time&&t<i)e.pool_status="Live";else if(t>i&&t<o){const s=e.raise_coin_amount;Number(s)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,t){const n=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=n[t.coin_type_sale].decimals,o=n[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(w(t.softcap).div(w(t.total_supply))),i,o).toString(),t.max_price=this.priceFixToReal(Number(w(t.max_raise_amount).div(w(t.total_supply))),i,o).toString(),t.current_price=this.priceFixToReal(Number(t.current_price),i,o).toString(),t.sale_decimals=i,t.raise_decimals=o}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(w(t.harvest_raise).equals(w(0))){const i=await e.Launchpad.getSettleEvent(t.pool_address);i&&(t.harvest_raise=i.unused_raise)}const n=g.min(new g(t.total_purchase_amount),new g(t.max_raise_amount));return w(n.toString()).mul(1-t.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){const n=await e.Launchpad.getSettleEvent(t.pool_address);return n&&(t.unused_sale=n.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){const n=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(n.length>0){const i=n[0].purchased_raise_amount,o=(await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:s}=t.white_summary;return w(i).sub(o).div(w(t.total_purchase_amount).sub(s)).mul(w(t.total_purchase_amount).sub(t.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,t){const n=await kt.getOverrecruitReverseAmount(e,t),i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(i){const o=i[0].purchased_raise_amount;w(o).sub(n).div(t.current_price)}return"0"}},Fp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,n=100,i=!1){var l;const{package_id:o}=this._sdk.sdkOptions.launchpad;if(o===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");const s=`${o}_getPoolImmutables`,r=this.getCache(s,i),a=[],c=[];if(r!==void 0&&a.push(...r),a.length===0)try{((l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${o}::factory::CreatePoolEvent`}))==null?void 0:l.data).forEach(_=>{const m=_.parsedJson;m&&a.push({pool_address:m.pool_id,coin_type_sale:D(m.sale_coin.name).full_address,coin_type_raise:D(m.raise_coin.name).full_address})}),this.updateCache(s,a,V)}catch(h){console.log("getPoolImmutables",h)}const d=e.length>0;for(let h=0;h<a.length;h+=1){const _=a[h];if(!(d&&!e.includes(_.pool_address))){if(!d){const m=h;if(m<t||m>=t+n)continue}c.push(_)}}return c}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.launchpad,i=`${n}_getPoolImmutables`,o=[],s={data:[],hasNextPage:!1},r=e==="all";if(r){const a=this.getCache(i,t);a&&o.push(...a)}if(o.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::factory::CreatePoolEvent`},e);s.hasNextPage=a.hasNextPage,s.nextCursor=a.nextCursor,a.data.forEach(c=>{const d=c.parsedJson;d&&o.push({pool_address:d.pool_id,coin_type_sale:D(d.sale_coin.name).full_address,coin_type_raise:D(d.raise_coin.name).full_address})})}catch(a){console.log("getPoolImmutables",a)}return s.data=o,r&&this.updateCache(i,o,V),s}async getPools(e=[],t=0,n=100){const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(a=>{o.push(a.pool_address)});const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showType:!0,showContent:!0});for(const r of s){const a=kt.buildLaunchPadPool(r);await kt.calculatePoolPrice(this._sdk,a),i.push(a);const c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,V)}return i}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0){const r=i;return kt.updatePoolStatus(r),r}const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=kt.buildLaunchPadPool(o);return await kt.calculatePoolPrice(this._sdk,s),this.updateCache(n,s),s}async getInitConfig(e=!1){var c;const t=this._sdk.sdkOptions.launchpad.package_id,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Ii(o),r=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:s}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return r.length>0&&(r.forEach(d=>{const l=d.parsedJson;if(l)switch(D(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=l.admin_cap_id,a.config_cap_id=l.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break}}),this.updateCache(n,a,V)),a}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!o.error)return Jn(o)}async getLockNFTList(e){var o;const{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:n}=this._sdk,i=[];try{const s=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:o.data;for(const r of s){const a=r.parsedJson;if(a){const c={locked_time:Number(a.locked_time),end_lock_time:Number(a.end_lock_time),nft_type:a.nft_type_name.name,lock_nft_id:a.lock_nft_id,recipient:a.recipient};if(e===c.recipient&&`${t}`===D(c.nft_type).address){const d=await this.getLockNFT(c.lock_nft_id);if(d){const l=D(d.coin_type_a).full_address,h=D(d.coin_type_b).full_address;i.push({...d,coin_type_a:l,coin_type_b:h,...c})}}}}return i}catch(s){return console.log("getLockNFTList:",s),[]}}async creatPoolTransactionPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=I(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=kt.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),o=new N,s=w(e.total_supply).add(w(e.total_supply).mul(w(e.liquidity_rate))).toNumber(),r=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,o,BigInt(s),e.coin_type_sale),a=[o.object(n.admin_cap_id),o.object(n.config_cap_id),o.object(n.pools_id),o.object(oe(e.recipient)),o.pure.u128((i*td).toString()),r,o.pure.u64(e.total_supply.toString()),o.pure.u64(e.min_purchase.toString()),o.pure.u64(e.max_purchase.toString()),o.pure.u64(e.least_raise_amount.toString()),o.pure.u64(e.hardcap.toString()),o.pure.u64((e.liquidity_rate*1e3).toString()),o.pure.u64(e.start_time.toString()),o.pure.u64(e.activity_duration.toString()),o.pure.u64(e.settle_duration.toString()),o.pure.u64(e.locked_duration.toString()),o.pure.u32(e.tick_spacing),o.object(q)],c=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.published_at}::${Tt}::create_launch_pool`,typeArguments:c,arguments:a}),o}async creatPurchasePayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=new N,i=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.purchase_amount),e.coin_type_raise),o=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],s=[e.coin_type_sale,e.coin_type_raise];let r;return o?r=[n.object(e.pool_address),n.object(I(t).config_cap_id),n.object(o.id),i,n.pure.u64(e.purchase_amount.toString()),n.object(q)]:r=[n.object(e.pool_address),n.object(I(t).config_cap_id),i,n.pure.u64(e.purchase_amount.toString()),n.object(q)],n.moveCall({target:`${t.published_at}::${Tt}::${o===void 0?"create_and_purchase":"purchase"}`,typeArguments:s,arguments:r}),n}async creatClaimPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],i=new N,o=[e.coin_type_sale,e.coin_type_raise],s=[i.object(e.pool_address),i.object(I(t).config_cap_id),i.object(n==null?void 0:n.id),i.object(q)];return i.moveCall({target:`${t.published_at}::${Tt}::claim`,typeArguments:o,arguments:s}),i}async creatSettlePayload(e){const{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();const i=I(n),{clmm_args:o}=e,s=new N;s.setSender(this.sdk.ClmmSDK.senderAddress);const r=[e.coin_type_sale,e.coin_type_raise];if(o){const a=o.opposite?G.priceToSqrtPriceX64(w(1).div(o.current_price),o.raise_decimals,o.sale_decimals).toString():G.priceToSqrtPriceX64(w(o.current_price),o.sale_decimals,o.raise_decimals).toString(),c=BigInt(a)<BigInt(o.clmm_sqrt_price),d=o.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,d);let h=ce.calculateTotalBalance(l);ce.isSuiCoin(d)&&(h-=BigInt(2e8));const m=X.buildCoinForAmount(s,l,h,d).targetCoin,y=o.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",T=[s.object(e.pool_address),s.object(I(t).config_cap_id),s.object(o.clmm_pool_address),s.object(i.global_config_id),s.pure.u128(a),m,s.object(q)];s.moveCall({target:`${t.published_at}::${Tt}::${y}`,typeArguments:r,arguments:T})}else s.moveCall({target:`${t.published_at}::${Tt}::settle`,typeArguments:r,arguments:[s.object(e.pool_address),s.object(I(t).config_cap_id),s.object(q)]});return s}creatWithdrawPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(e.pool_address),n.object(I(t).config_cap_id),n.object(q)];return e.sale_amount>BigInt(0)&&n.moveCall({target:`${t.published_at}::${Tt}::withdraw_sale`,typeArguments:i,arguments:o}),e.raise_amount>BigInt(0)&&n.moveCall({target:`${t.published_at}::${Tt}::withdraw_raise`,typeArguments:i,arguments:o}),n}addUserToWhitelisPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(o=>{const s=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.object(o),n.pure.u64(e.safe_limit_amount),n.object(q)];n.moveCall({target:`${t.published_at}::${Tt}::add_user_to_whitelist`,typeArguments:i,arguments:s})}),n}updateWhitelistCapPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&n.moveCall({target:`${t.published_at}::${Tt}::update_whitelist_member_safe_limit_amount`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.pure.address(e.white_list_member),n.pure.u64(e.safe_limit_amount),n.object(q)]}),e.hard_cap_total>0&&n.moveCall({target:`${t.published_at}::${Tt}::update_whitelist_hard_cap_total`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.pure.u64(e.hard_cap_total),n.object(q)]}),n}creatRemoveWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(o=>{const s=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.object(o),n.object(q)];n.moveCall({target:`${t.published_at}::${Tt}::remove_user_from_whitelist`,typeArguments:i,arguments:s})}),n}creatCancelPoolPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.object(q)];return n.moveCall({target:`${t.published_at}::${Tt}::cancel`,typeArguments:i,arguments:o}),n}updateRecipientPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.object(e.new_recipient),n.object(q)];return n.moveCall({target:`${t.published_at}::${Tt}::update_recipient_address`,typeArguments:i,arguments:o}),n}updatePoolDuractionPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.pure.u64(e.activity_duration),n.pure.u64(e.settle_duration),n.pure.u64(e.lock_duration),n.object(q)];return n.moveCall({target:`${t.published_at}::${Tt}::update_pool_duration`,typeArguments:i,arguments:o}),n}creatUnlockNftPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(I(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");const n=new N,i=[e.nft_type],o=[n.object(e.lock_nft),n.object(q)];return n.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:o}),n}async isAdminCap(e){const{launchpad:t}=this._sdk.sdkOptions;if(I(t)===void 0)throw Error("launchpad config is empty");const n=`${e}_isAdminCap`,i=this.getCache(n);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:I(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(o);const s=Dn(o),r=co(o);let a=!1;return r&&s&&D(s).source_address===`${t.package_id}::config::AdminCap`&&(a=oe(r.AddressOwner)===oe(e)),this.updateCache(n,a,V),a}async isWhiteListUser(e,t){const n={type:"address",value:t};try{const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n});return!!(i&&i.data)}catch{return!1}}async getPurchaseAmount(e,t){var i;const n={type:"address",value:t};try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n}),s=Y(o);if(console.log(s),s)return(i=s==null?void 0:s.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],n=!0){const{launchpad:i}=this._sdk.sdkOptions,o=`${t}_getPurchaseMark`,s=this.getCache(o,n);if(!n&&s!==void 0)return s;let r=null;const a=[];for(;;){const c=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:r});for(const d of c.data){const{fields:l}=d.data.content;if(D(Ht(d)).source_address===`${i.package_id}::pool::PurchaseMark`){console.log("fields: ",l);const _={id:l.id.id,pool_id:D(l.pool_id).address,purchased_raise_amount:l.purchase_total,obtain_sale_amount:l.obtain_sale_amount,used_raise_amount:l.used_raise_amount};t.length>0?t.includes(_.pool_id)&&a.push(_):a.push(_)}}if(c.hasNextPage)r=c.nextCursor;else break}return this.updateCache(o,a,V),a}async getSettleEvent(e){const{launchpad:t}=this._sdk.sdkOptions,n=`${e}_getPurchaseMark`,i=this.getCache(n);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(const s of o.data){const r=s.parsedJson;if(e===he(r.pool_id)){const a={pool_id:r.pool_id,settle_price:r.settle_price,unused_sale:r.unused_sale,unused_raise:r.unused_raise,white_purchase_total:r.white_purchase_total};return this.updateCache(n,a,V),a}}}buildLaunchpadCoinType(e,t){return ro(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,t])}assertLuanchpadConfig(){const{launchpad:e}=this.sdk.sdkOptions;if(I(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},kn=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:D(t.clmm_pool_id).address,bonus_type:D(t.bonus_type.fields.name).source_address,pool_id:D(t.pool_id).address,coinTypeA:D(t.coin_type_a.fields.name).source_address,coinTypeB:D(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=Y(e),n=[];return t.config.fields.contents.forEach(o=>{n.push({rate:Number(w(o.fields.key).div(Vn)),multiplier:Number(w(o.fields.value).div(Vn))})}),{balance:t.balance,config:n,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(w(t.minimum_percent_to_reward).div(Vn)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){const{contents:t}=e.value.fields.value.fields,n=[],i=e.id.id;return t.forEach(o=>{const{key:s,value:r}=o.fields,a={id:s,period_id:i,bonus_num:r.fields.bonus_num,point:r.fields.point,is_burn:r.fields.is_burn,point_after_multiplier:r.fields.point_after_multiplier,percent:Number(w(r.fields.percent).div(Vn)),fee_share_rate:0,is_redeemed:r.fields.is_redeemed};n.push(a)}),n}static buildPoolBonusInfo(e){const{fields:t,type:n}=e.value.fields.value;return{type:n,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let n=0;for(const i of e)t>=i.rate&&i.rate>n&&(n=i.multiplier);return n}},aa="router",Up=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var s;const{maker_bonus:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n,e),o=[];if(i!==void 0)o.push(...i);else{const r=[];(s=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(I(t).maker_pool_handle)).data)==null||s.forEach(d=>{r.push(d.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showContent:!0});for(const d of c){const l=Y(d);l&&o.push(kn.buildPoolImmutables(l))}}return o}async getPoolImmutable(e){const{maker_bonus:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n);if(i!==void 0){const r=i.filter(a=>e===a.pool_id);if(r.length>0)return r[0]}const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:I(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),s=Y(o);return kn.buildPoolImmutables(s)}async getPools(){const e=[],t=await this.getPoolImmutables(),n=t.map(s=>s.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});let o=0;for(const s of i){const r=kn.buildPoolState(s);if(r){const a={...t[o],...r};e.push(a);const c=`${a.pool_id}_getPoolObject`;this.updateCache(c,a,V)}o+=1}return e}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t),o=await this.getPoolImmutable(e);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=kn.buildPoolState(s),a={...o,...r};return this.updateCache(n,a,V),a}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),n=Y(t);return n?n.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){const n=[],i=`${e.pool_id}_getMakerPoolPeriods`,o=this.getCache(i,t);return o!==void 0?o:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(r=>{const a={id:r.objectId,start_time:0,end_time:0,period:Number(r.name.value)};a.start_time=Number(w(e.start_time).add(w(e.interval_day).mul(24*3600).mul(a.period)).toFixed(0,K.ROUND_DOWN)),a.end_time=Number(w(a.start_time).add(w(e.interval_day).mul(24*3600)).toFixed(0,K.ROUND_DOWN)),n.push(a)}),this.updateCache(i,n,V),n)}async getMakerBonusInitConfigs(){var i;const{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,n={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(o=>{const s=o.parsedJson;s&&(n.maker_config_id=s.config_id)}),n.maker_pool_handle=await this.getPoolHandleId(n.maker_config_id),n}async getPoolMarkerPositionList(e,t,n=!1){const i={},o=[];n||t.forEach(s=>{const r=`${e}_${s.period}_getPoolMarkerPositionList`,a=this.getCache(r);a!==void 0?i[s.period]=a:(i[s.period]=[],o.push(s))});try{o.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(o.map(a=>a.id),{showContent:!0})).forEach(a=>{const c=Y(a),d=kn.buildMarkerPositions(c);if(d.length>0){const{period_id:l}=d[0],h=t.filter(_=>_.id===l)[0];i[h.period]=d}});const s=[];for(const r in i)i[r].forEach(c=>{s.push(c)});if(s.length>0){const r=await this._sdk.ClmmSDK.Position.getSipmlePositionList(s.map(a=>a.id));for(const a of s)for(const c of r)if(a.id===c.pos_object_id){a.clmm_position=c;break}}}catch(s){console.log(s)}for(const s in i){const r=`${e}_${s}_getPoolMarkerPositionList`;this.updateCache(r,i[s],V)}return i}async updateXCetusRewarderAndFee(e,t,n){const i=await this.calculateTotalPointsAfterMultiper(e,n);for(const o of t)await this.calculateXCetusRewarder(e,o,n.period,i);return t}async calculateXCetusRewarder(e,t,n,i){const o=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,n),{fee_share_rate:s}=this.calculateFeeShareRate(e,t,i),r=w(s).mul(o.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=r.toString(),t.bonus_num}calculateFeeShareRate(e,t,n){const i=kn.getBonusPercent(e.config,t.percent),o=w(t.point).mul(i),s=w(o).div(n);return t.point_after_multiplier=o.toString(),t.fee_share_rate=Number(s),{fee_share_rate:Number(s),points_after_multiper:o.toString()}}async calculateTotalPointsAfterMultiper(e,t){const n=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]);let i=w(0);const o=n[t.period];for(const s of o){const r=kn.getBonusPercent(e.config,s.percent),a=w(s.point).mul(r);i=i.add(a)}return i.toString()}async calculateAllXCetusRewarder(e){const t=this._sdk.ClmmSDK.senderAddress;let n=w(0);const i=[];for(const o of e){const s=await this._sdk.MakerModule.getMakerPoolPeriods(o),r=await this._sdk.MakerModule.getPoolMarkerPositionList(o.whale_nfts.whale_nfts_handle,s),a=[];for(const c of s){const d=r[c.period].filter(l=>{var h;return t.length===0?!1:((h=l.clmm_position)==null?void 0:h.owner)===t});d.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(o,d,c),d.forEach(l=>{var h;((h=l.clmm_position)==null?void 0:h.position_status)===Gc.Exists&&w(l.bonus_num).greaterThan(0)&&(n=n.add(l.bonus_num),a.includes(l.clmm_position.pos_object_id)||a.push(l.clmm_position.pos_object_id))}))}i.push({bonus_type:o.bonus_type,pool_id:o.pool_id,nft_ids:a})}return{claimtotal:n,claimRecord:i}}async getPoolBonusInfo(e,t,n=!1){const i=`${e}_${t}_getPoolBonusInfo`,o=this.getCache(i,n);if(o!==void 0)return o;const s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),r=Y(s),a=kn.buildPoolBonusInfo(r);return this.updateCache(i,a,Mt),a}claimPayload(e){const{maker_bonus:t,xcetus:n}=this.sdk.sdkOptions,i=new N;return i.moveCall({target:`${t.published_at}::${aa}::claim`,typeArguments:[e.bonus_type],arguments:[i.object(I(t).maker_config_id),i.object(e.market_pool_id),i.object(e.position_nft_id),i.pure.u8(e.phase),i.object(I(n).lock_manager_id),i.object(I(n).xcetus_manager_id),i.object(e.ve_nft_id)]}),i}claimAllPayload(e){const{maker_bonus:t,xcetus:n}=this.sdk.sdkOptions,i=new N;return e.whale_nfts.forEach(o=>{o.nft_ids.forEach(s=>{i.moveCall({target:`${t.published_at}::${aa}::claim_all`,typeArguments:[o.bonus_type],arguments:[i.object(I(t).maker_config_id),i.object(o.pool_id),i.object(s),i.object(I(n).lock_manager_id),i.object(I(n).xcetus_manager_id),i.object(e.ve_nft_id)]})})}),i}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},qn="router",ss="router",bi=24*3600,uo=1e3,Rt=1e11,On=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(o=>{i.push({coin_type:D(o.fields.key.fields.name).source_address,amount:o.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:i})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(n=>{t.bonus_types.push(D(n.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:ke(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){const t=e.fields,n={id:t.id.id,type:D(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/bi,n}static getAvailableXCetus(e,t){let n=w(0);return t.forEach(i=>{n=n.add(i.xcetus_amount)}),w(e.xcetus_balance).sub(n).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!On.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>On.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e){const t=new Set;return e.forEach(n=>{n.rewards.forEach(i=>{t.add(i.coin_type)})}),Array.from(t)}static getNextStartTime(e){const t=Date.now()/1e3,{start_time:n,interval_day:i}=e,o=Math.ceil((t-n)/(i*bi));return n+o*i*bi}},Kp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xcetus:n}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,o=this.getCache(i,t);if(o!==void 0)return o;let s;const r=`${n.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:r}})).data.forEach(c=>{const d=D(Ht(c)).source_address;if(d===r&&c.data&&c.data.content){const{fields:l}=c.data.content;s={...ko(c),id:l.id.id,index:l.index,type:d,xcetus_balance:l.xcetus_balance},this.updateCache(i,s,V)}}),s}async getOwnerLockCetuss(e){const{xcetus:t}=this.sdk.sdkOptions,n=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const s of o.data)if(D(Ht(s)).source_address===i&&s.data){const a=On.buildLockCetus(s.data.content);a.xcetus_amount=await this.getXCetusAmount(a.id),n.push(a)}return n}async getLockCetus(e){var n;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const i=On.buildLockCetus(t.data.content);return i.xcetus_amount=await this.getXCetusAmount(i.id),i}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){const{xcetus:e}=this.sdk.sdkOptions,t=new N;return t.moveCall({target:`${e.published_at}::${qn}::mint_venft`,typeArguments:[],arguments:[t.object(I(e).xcetus_manager_id)]}),t}async convertPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new N,i=this.buileCetusCoinType(),o=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),i);return e.venft_id===void 0?n.moveCall({target:`${t.published_at}::${qn}::mint_and_convert`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),o,n.pure.u64(e.amount)]}):n.moveCall({target:`${t.published_at}::${qn}::convert`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),o,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${qn}::redeem_lock`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),n.object(e.venft_id),n.pure.u64(e.amount),n.pure.u64(e.lock_day),n.object(q)]}),n}redeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${qn}::redeem`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(q)]}),n}redeemDividendPayload(e,t){const{xcetus:n,xcetus_dividends:i}=this.sdk.sdkOptions,o=new N;return t.forEach(s=>{o.moveCall({target:`${n.published_at}::${ss}::redeem`,typeArguments:[s],arguments:[o.object(I(i).dividend_manager_id),o.object(e)]})}),o}redeemDividendV2Payload(e,t,n){const{xcetus_dividends:i}=this.sdk.sdkOptions;let o=new N;return t.filter(r=>n.includes(r)).length>0&&(o=this.redeemDividendXTokenPayload(e,o)),t.forEach(r=>{n.includes(r)||o.moveCall({target:`${i.published_at}::${ss}::redeem_v2`,typeArguments:[r],arguments:[o.object(I(i).dividend_manager_id),o.object(e),o.object(q)]})}),o}redeemDividendXTokenPayload(e,t){const{xcetus_dividends:n,xcetus:i}=this.sdk.sdkOptions,{xcetus_manager_id:o,lock_manager_id:s}=I(i),{dividend_manager_id:r}=I(n);return t=t===void 0?new N:t,t.moveCall({target:`${n.published_at}::${ss}::redeem_xtoken`,typeArguments:[],arguments:[t.object(s),t.object(o),t.object(r),t.object(e),t.object(q)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",n="XCETUS"){return`${e}::${t}::${n}`}cancelRedeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${qn}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(q)]}),n}async getInitConfigs(){var r,a;const{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:r.data,o={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const d=c.parsedJson;d&&(o.xcetus_manager_id=d.xcetus_manager)});const s=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return s.length>0&&s.forEach(c=>{const d=c.parsedJson;d&&(o.lock_manager_id=d.lock_manager)}),o.lock_manager_id.length>0&&(o.lock_handle_id=(await this.getLockUpManager(o.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(t,o,V),o}async getLockUpManager(e=I(this.sdk.sdkOptions.xcetus).lock_manager_id,t=!1){const n=`${e}_getLockUpManager`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=On.buildLockUpManager(Y(o));return this.updateCache(n,s,V),s}async getDividendConfigs(){var s;const{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,t=`${e}_getDividendManagerEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:s.data,o={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(r=>{const a=r.parsedJson;a&&(o.dividend_manager_id=a.manager_id,o.dividend_admin_id=a.admin_id,o.dividend_settle_id=a.settle_id,this.updateCache(t,o,V))}),o}async getDividendManager(e=!1){const{dividend_manager_id:t}=I(this._sdk.sdkOptions.xcetus_dividends),n=`${t}_getDividendManager`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Y(o),r=On.buildDividendManager(s);return this.updateCache(n,r,V),r}async getXcetusManager(e=!0){const{xcetus_manager_id:t}=I(this._sdk.sdkOptions.xcetus),n=`${t}_getXcetusManager`,i=this.getCache(n,e);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Y(o),r={id:s.id.id,index:Number(s.index),has_venft:{handle:s.has_venft.fields.id.id,size:s.has_venft.fields.size},nfts:{handle:s.nfts.fields.id.id,size:s.nfts.fields.size},total_locked:s.total_locked,treasury:s.treasury.fields.total_supply.fields.value};return this.updateCache(n,r),r}async getVeNFTDividendInfo(e,t){try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=Y(n);return On.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(I(this._sdk.sdkOptions.xcetus).lock_manager_id),i=w(Rt).mul(w(n.max_lock_day).sub(w(t))).mul(w(n.max_percent_numerator).sub(w(n.min_percent_numerator))).div(w(n.max_lock_day).sub(w(n.min_lock_day))),o=w(Rt).mul(w(n.max_percent_numerator)).sub(i).div(w(uo)).div(Rt);return{amountOut:w(o).mul(w(e)).round().toString(),percent:o.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(I(this._sdk.sdkOptions.xcetus).lock_manager_id),i=w(Rt).mul(w(n.max_lock_day).sub(w(t))).mul(w(n.max_percent_numerator).sub(w(n.min_percent_numerator))).div(w(n.max_lock_day).sub(w(n.min_lock_day))),o=w(Rt).mul(w(n.max_percent_numerator)).sub(i).div(w(uo)).div(Rt);return{amountOut:w(e).div(o).toFixed(0,K.ROUND_UP),percent:o.toString()}}async getXCetusAmount(e){const{lock_handle_id:t}=I(this._sdk.sdkOptions.xcetus),n=`${e}_getXCetusAmount`,i=this.getCache(n);if(i!==void 0)return i;try{const o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),s=Y(o);if(s){const{xcetus_amount:r}=s.value.fields.value.fields;return this.updateCache(n,r,V),r}}catch{}return"0"}async getVeNftAmount(e,t){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=Y(n);if(i){const{lock_amount:o,xcetus_amount:s}=i.value.fields.value.fields;return{lock_amount:o,xcetus_amount:s}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const i=(await this.getDividendManager()).dividends.id,o=`${i}_${e}_getPhaseDividendInfo`,s=this._sdk.getCache(o,t);if(s)return s;try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),a=Y(r),c=a.value.fields.value.fields,d=c.redeemed_num.fields.contents.map(m=>({name:m.fields.key.fields.name,value:m.fields.value})),l=c.bonus_types.map(m=>m.fields.name),h=c.bonus.fields.contents.map(m=>({name:m.fields.key.fields.name,value:m.fields.value})),_={id:Gt(r),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:d,is_settled:c.is_settled,bonus_types:l,bonus:h,phase_end_time:""};return this.updateCache(o,_),_}catch{}}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},Vp="factory",Et="oversubscribe_pool",nd=1e6,Fn=1e18,$n="router",rs="router",Ni="router",ca={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function zp(e){return"master_address"in e}var Gp="router",Wp="vaults",Xp=1e4,ut=class{static buildIdoPoolImmutables(e){return{pool_address:he(e.pool_id),coin_type_sale:D(e.sale_coin_type.name).full_address,coin_type_raise:D(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){const t=Ht(e),n=D(t),i=Y(e);console.log("fields:",i);const o={pool_address:he(i.id.id),coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],tick_spacing:Number(i.tick_spacing),total_supply:i.total_supply,min_purchase:i.min_purchase_amount,max_purchase:i.max_purchase_amount},s={start_time:Number(i.duration_manager.fields.start_time),lock_up_duration:Number(i.duration_manager.fields.lock_up_duration),purchase_duration:Number(i.duration_manager.fields.purchase_duration),end_time:0};s.end_time=s.start_time+s.purchase_duration;const r={complete_raise_limit:i.complete_raise_limit,liquidity_injection_ratio:w(i.liquidity_injection_ratio).div(nd).toNumber(),current_sqrt_price_min:i.current_sqrt_price_min,current_sqrt_price_max:i.current_sqrt_price_max,owner:i.owner,sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,price:i.price,current_price:i.price,duration_summary:s,is_cancelled:i.is_cancelled,is_liquidity_injected:i.is_liquidity_injected,liquidity_used_raise_amount:i.liquidity_used_raise_amount,liquidity_used_sale_amount:i.liquidity_used_sale_amount,purchase_summary:{size:Number(i.purchase_manager.fields.purchases.fields.size),purchase_handle:i.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:i.total_purchase_amount,white_summary:{white_list_id:i.white_list.fields.id.id,protection_limit_used:i.white_list.fields.protection_limit_used,protection_hard_cap:i.white_list.fields.protection_hard_cap,white_handle:i.white_list.fields.addresses.fields.id.id,size:Number(i.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:i.is_withdrawn};return ut.updatePoolStatus(r),{...o,...r}}static is_init_period(e){return Number(w(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){const t=Number(w(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){const t=Number(w(Date.now()/1e3).toFixed(0)),n=e.start_time+e.purchase_duration;return t>n}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&ut.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:ut.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&ut.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||ut.is_claim_period(e.duration_summary)&&w(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let n,i;if(ut.is_sale_failed(e))n="0",i="0";else if(t.is_redeemed)n=t.obtained_sale_amount,i=t.used_raise_amount;else if(w(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))n=w(t.purchased_raise_amount).mul(Fn).div(e.price).toString(),i=t.purchased_raise_amount;else{const s=ut.redeemForSaleOversubcribeV2(e,t);n=s.user_obtained_sale_amount,i=s.user_used_raise_amount_ceil}n=K.floor(n);const o=K.floor(w(t.purchased_raise_amount).sub(i).toString());return{obtained_sale_amount:n,refunded_raise_amount:o}}static calculateWithdrawAmount(e){let t,n;const i=w(e.total_supply).mul(e.liquidity_injection_ratio);if(ut.is_sale_failed(e))t="0",n=w(i).add(e.total_supply);else{const{max_raise_amount:o}=e;w(e.total_purchase_amount).greaterThanOrEqualTo(o)?(t=w(o).sub(e.liquidity_used_raise_amount).toString(),n="0"):(t=w(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),n=w(e.total_supply).add(i).sub(e.liquidity_used_sale_amount).sub(ut.get_sold_amount(e)))}return{obtained_raise_amount:K.floor(t).toString(),refunded_sale_amount:K.ceil(n).toString()}}static get_sold_amount(e){return w(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:w(e.total_purchase_amount).mul(Fn).div(e.price)}static redeemForSaleOversubcribe(e,t){const n=t.protection_raise_amount,i=w(t.purchased_raise_amount).sub(n),o=e.max_raise_amount,{protection_limit_used:s}=e.white_summary,r=w(o).sub(s),a=w(e.total_purchase_amount).sub(s),c=K.ceil(i.mul(r).div(a).add(n)),d=K.floor(i.mul(r).div(a).add(n));return{user_obtained_sale_amount:K.floor(w(e.total_supply).mul(d).div(o)),user_used_raise_amount_ceil:c}}static redeemForSaleOversubcribeV2(e,t){const n=t.protection_raise_amount,i=w(t.purchased_raise_amount).sub(n),o=e.max_raise_amount,{protection_limit_used:s}=e.white_summary,r=w(o).sub(s),a=w(e.total_purchase_amount).sub(s),c=w(n).mul(a).add(w(i).mul(r)).mul(Fn).div(w(a).mul(e.price)),d=K.ceil(c.mul(e.price).div(Fn));return{user_obtained_sale_amount:c,user_used_raise_amount_ceil:d}}static raiseTotalAmount(e){const t=w(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?w(e.total_supply).mul(e.current_price).div(w(10).pow(w(t))).toString():w(e.total_supply).mul(e.current_price).mul(w(10).pow(w(t))).toString()}static updatePoolStatus(e){const t=Number(w(Date.now()/1e3).toFixed(0)),n=e.duration_summary,i=n.start_time+n.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<n.start_time?e.pool_status="Upcoming":t>n.start_time&&t<i?e.pool_status="Live":w(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){const n=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=n[t.coin_type_sale].decimals,o=n[t.coin_type_raise].decimals;t.current_price=kt.priceFixToReal(Number(w(t.price).div(w(Fn)).toString()),i,o).toString(),t.sale_decimals=i,t.raise_decimals=o,t.max_raise_amount=this.raiseTotalAmount(t)}},E_=class{constructor(e){F(this,"_sdk");this._sdk=e}async getPools(e=[],t=!1){const n=[];if(e.length>0){if(e.filter(o=>{const s=`${o}_getPool`,r=this._sdk.getCache(s,t);return r?(n.push(r),!1):!0}).length>0){const o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(e,{showType:!0,showContent:!0});for(const s of o){const r=await this.buildIdoWarpPool(s);r&&n.push(r)}}}else(await this._sdk.Ido.getPools()).forEach(o=>{n.push({...o,version:"2"})});return n.forEach(i=>{const o=`${i.pool_address}_getPool`;this._sdk.updateCache(o,i)}),n}async getPool(e,t=!0){const n=`${e}_getPool`,i=this._sdk.getCache(n,t);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=await this.buildIdoWarpPool(o);return this._sdk.updateCache(n,s),s}async getJoinPools(e,t){const n=[],i=t.filter(s=>s.version==="1"),o=t.filter(s=>s.version==="2");if(i.length>0){const s=await this._sdk.Launchpad.getPurchaseMarks(e,i.map(r=>r.pool_address),!1);i.forEach(r=>{for(const a of s)if(a.pool_id===r.pool_address){n.push(r);break}})}for(const s of o)await this._sdk.Ido.getPurchaseInfo(s.purchase_summary.purchase_handle,e,!1)&&n.push(s);return n}async getOwnerPools(e,t){return t.filter(n=>n.owner===oe(e))}async creatPurchasePayload(e,t){return e.version==="1"?await this._sdk.Launchpad.creatPurchasePayload({pool_address:e.pool_address,purchase_amount:t,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.creatPurchasePayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle,raise_amount:t.toString()})}async creatRedeemPayload(e){return e.version==="1"?await this._sdk.Launchpad.creatClaimPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.redeemPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle})}async creatWithdrawPayload(e){if(e.version==="1"){const n=await kt.getWithdrawSale(e),i=await kt.getWithdrawRaise(e);return this._sdk.Launchpad.creatWithdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,sale_amount:BigInt(n),raise_amount:BigInt(i)})}return this._sdk.Ido.withdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise})}unlockNftPayload(e,t){return e.version==="1"?this._sdk.Launchpad.creatUnlockNftPayload(t):this._sdk.Ido.unlockNftPayload({lock_nft_id:t.lock_nft,nft_type:t.nft_type})}async getLockNFTList(e){let t=[];return e.version==="1"&&(t=await this._sdk.Launchpad.getLockNFTList(e.owner)),t=await this._sdk.Ido.getLockNFTList(e.owner),t.filter(i=>{const o=D(i.coin_type_a).full_address,s=D(i.coin_type_b).full_address,r=D(e.coin_type_sale).full_address,a=D(e.coin_type_raise).full_address;return o===r&&s===a||o===a&&s===r})}async isWhiteListUser(e,t){return t.version==="1"?await this._sdk.Launchpad.isWhiteListUser(t.white_summary.white_handle,e):!!await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e)}async getPurchaseInfo(e,t){if(t.version==="1"){const i=await this._sdk.Launchpad.getPurchaseMarks(e,[t.pool_address]);return i.length>0?i[0]:void 0}return await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e)}async getwhiteProtectionInfo(e,t,n=!1){if(t.version==="1")return await this._sdk.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e);const i=await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e,n);if(i)return{safe_limit_amount:i.protection_raise_limit,safe_purchased_amount:i.protection_raise_amount};const o=await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e,!1);return o?{safe_limit_amount:o,safe_purchased_amount:"0"}:{safe_limit_amount:"0",safe_purchased_amount:"0"}}async calculateWithdrawAmount(e){if(e.version==="1"){const t=await kt.getHistoryWithdrawRaise(this._sdk,e),n=await kt.getHistoryWithdrawSale(this._sdk,e);return{obtained_raise_amount:t,refunded_sale_amount:n}}return ut.calculateWithdrawAmount(e)}async buildIdoWarpPool(e){const t=Dn(e);if(console.log(this._sdk.sdkOptions.ido.package_id,D(t).address,"buildIdoWarpPool"),D(t).address===this._sdk.sdkOptions.ido.package_id){const n=ut.buildIdoPool(e);return await ut.calculatePoolUiPrice(this._sdk,n),{...n,version:"2"}}if(D(t).address===this._sdk.sdkOptions.launchpad.package_id){const n=kt.buildLaunchPadPool(e);return await kt.calculatePoolPrice(this._sdk,n),{...n,version:"1"}}}},jn=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(o=>{i.push({coin_type:D(o.fields.key.fields.name).source_address,amount:o.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:i})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(n=>{t.bonus_types.push(D(n.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:ke(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){const t=e.fields,n={id:t.id.id,type:D(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/bi,n}static getAvailableXToken(e,t){let n=w(0);return t.forEach(i=>{n=n.add(i.xtoken_amount)}),w(e.xtoken_balance).sub(n).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!jn.isLocked(t))}static getLockingTokens(e){return e.filter(t=>jn.isLocked(t))}static buildDividendRewardTypeList(e){const t=new Set;return e.forEach(n=>{n.rewards.forEach(i=>{t.add(i.coin_type)})}),Array.from(t)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=bi){const n=Date.now()/1e3,{start_time:i,interval_day:o}=e,s=Math.ceil((n-i)/(o*t));return i+s*o*t}},dn=class{static getDefaultStrategyConfig(e){let t;switch(e){case 4:t=ca.bidAsk;break;default:t=ca.curve;break}return t}static geTickIndexRange(e,t,n,i){let o,s;switch(e=G.getInitializableTickIndex(e,t),i){case"left":e>0?(s=w(e).sub(t).toNumber(),o=w(e).mul(w(1).add(n)).toDecimalPlaces(0).toNumber()):(s=w(e).sub(t).toNumber(),o=w(e).mul(w(1).sub(n)).toDecimalPlaces(0).toNumber());break;case"right":e>0?(s=w(e).mul(w(1).add(n)).toDecimalPlaces(0).toNumber(),o=w(e).add(t).toNumber()):(s=w(e).mul(w(1).sub(n)).toDecimalPlaces(0).toNumber(),o=w(e).add(t).toNumber());break;default:e>0?(o=w(e).mul(w(1).sub(n)).toDecimalPlaces(0).toNumber(),s=w(e).mul(w(1).add(n)).toDecimalPlaces(0).toNumber()):(o=w(e).mul(w(1).add(n)).toDecimalPlaces(0).toNumber(),s=w(e).mul(w(1).sub(n)).toDecimalPlaces(0).toNumber());break}if(o=G.getInitializableTickIndex(o,t),s=G.getInitializableTickIndex(s,t),o<Os)throw Error("Tick lower value is below the minimum allowed value.");if(s>Ps)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:o,tick_upper:s}}static getCreateLiquidityBins(e,t){let n=[];switch(t){case 4:n=dn.getCreateBidAskLiquidityBins(e);break;default:n=dn.getCreateCurveLiquidityBins(e);break}return n}static getCreateBidAskLiquidityBins(e){const t=w(Math.floor(w(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),n=[],i=e.ratios;let o,s;for(let r=0;r<i.length;r++){let a,c;e.tick_upper<=e.curr_tick?(c=w(e.tick_upper).sub(t.mul(r)).toNumber(),a=w(c).sub(t).toNumber()):e.tick_lower>=e.curr_tick?(a=w(e.tick_lower).add(t.mul(r)).toNumber(),c=w(e.tick_lower).add(t.mul(r+1)).toNumber()):r===4?(a=w(e.tick_lower).add(t.mul(r)).toNumber(),c=w(a).add(t.mul(2)).toNumber()):r>4?(a=w(e.tick_lower).add(t.mul(r+1)).toNumber(),c=w(a).add(t).toNumber()):(a=w(e.tick_lower).add(t.mul(r)).toNumber(),c=w(a).add(t).toNumber()),o=G.getInitializableTickIndex(a,e.tick_spacing),s=G.getInitializableTickIndex(c,e.tick_spacing),n.push({tick_lower:o,tick_upper:s,ratio:i[r],liquidity:"0"})}return n}static getCreateCurveLiquidityBins(e){const t=w(Math.floor(w(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),n=[],i=e.ratios;for(let o=0;o<i.length;o++){let s,r;e.tick_upper<=e.curr_tick?(r=e.tick_upper,s=w(e.tick_upper).sub(t.mul(o+1)).toNumber()):e.tick_lower>=e.curr_tick?(s=e.tick_lower,r=w(s).add(t.mul(o+1)).toNumber()):(s=w(e.curr_tick).sub(t.mul(o+1)).toNumber(),r=w(e.curr_tick).add(t.mul(o+1)).toNumber()),n.push({tick_lower:G.getInitializableTickIndex(s,e.tick_spacing),tick_upper:G.getInitializableTickIndex(r,e.tick_spacing),ratio:i[o],liquidity:"0"})}return n}static calculateAddLiquidityInputs(e){const t=new g(G.tickIndexToSqrtPriceX64(e.curr_tick)),n=dn.calculateCoinRatios(e.curr_tick,e.liquidity_bins),i=e.liquidity_bins.map((o,s)=>{const r=n[s],a=w(e.coin_amount).mul(e.fix_amount_a?r.coinRatioA:r.coinRatioB).toFixed(0).toString();try{return{...pt.estLiquidityAndcoinAmountFromOneAmounts(o.tick_lower,o.tick_upper,new g(a),e.fix_amount_a,!0,e.slippage,t),...o}}catch{return{coinAmountA:new g(0),coinAmountB:new g(0),tokenMaxA:new g(0),tokenMaxB:new g(0),liquidityAmount:new g(0),fix_amount_a:!e.fix_amount_a,...o}}});return dn.fixLiquidityInputs(t,e.slippage,i,!0)}static fixLiquidityInputs(e,t,n,i){const o=n.filter(r=>r.liquidityAmount.gt(H));if(o.length===0)return[];const s=o[0];return n.map(r=>{if(r.liquidityAmount.eq(H)){const a=w(s.liquidityAmount.toString()).mul(r.ratio).div(s.ratio).toFixed(0),c=G.tickIndexToSqrtPriceX64(r.tick_lower),d=G.tickIndexToSqrtPriceX64(r.tick_upper),l=pt.getCoinAmountFromLiquidity(new g(a.toString()),e,c,d,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,liquidityAmount:new g(a.toString()),fix_amount_a:r.fix_amount_a,...ts(l,_i.fromDecimal(w(t).mul(100)),i)}}return r})}static calculateCoinRatios(e,t){const n=new g(G.tickIndexToSqrtPriceX64(e)),i=[];let o=w(0),s=w(0);const r=t.map(d=>{const l=w(Sp(100,6).toString()).mul(d.ratio).toFixed(0).toString(),h=G.tickIndexToSqrtPriceX64(d.tick_lower),_=G.tickIndexToSqrtPriceX64(d.tick_upper),m=pt.getCoinAmountFromLiquidity(new g(l),n,h,_,!0);return o=o.add(m.coinA.toString()),s=s.add(m.coinB.toString()),{...m,liquidity:l}}),a=[],c=[];return r.forEach((d,l)=>{const h={coinRatioA:o.eq(w(0))?0:w(d.coinA.toString()).div(o).toNumber(),coinRatioB:s.eq(w(0))?0:w(d.coinB.toString()).div(s).toNumber(),liquiditys:d.liquidity,tick_lower:t[l].tick_lower,tick_upper:t[l].tick_upper};i.push(h),a.push(o.eq(w(0))?0:w(d.coinA.toString()).div(o).toNumber()),c.push(s.eq(w(0))?0:w(d.coinB.toString()).div(s).toNumber())}),i}static calculateCloseMasterLiquidityInputs(e){const t=new g(G.tickIndexToSqrtPriceX64(e.curr_tick));return e.positions.map(i=>{const o=new g(i.liquidity),s=G.tickIndexToSqrtPriceX64(i.tick_lower_index),r=G.tickIndexToSqrtPriceX64(i.tick_upper_index),a=pt.getCoinAmountFromLiquidity(o,t,s,r,!1),c=_i.fromDecimal(w(e.slippage).mul(100)),{tokenMaxA:d,tokenMaxB:l}=ts(a,c,!1);return{coinAmountA:a.coinA,coinAmountB:a.coinB,tokenMaxA:d,tokenMaxB:l,liquidityAmount:o,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(e){const t=new g(G.tickIndexToSqrtPriceX64(e.curr_tick)),{fix_token:n}=e;if(n){const o=e.positions.map((a,c)=>({tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,ratio:e.ratios[c]})),s=dn.calculateCoinRatios(e.curr_tick,o),r=e.positions.map((a,c)=>{const d=s[c],l=w(n.coin_amount).mul(n.fix_amount_a?d.coinRatioA:d.coinRatioB).toFixed(0).toString();try{const h=pt.estLiquidityAndcoinAmountFromOneAmounts(a.tick_lower_index,a.tick_upper_index,new g(l),n.fix_amount_a,!1,e.slippage,t);return{...h,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:h.liquidityAmount.toString(),ratio:e.ratios[c]}}catch{return{coinAmountA:new g(0),coinAmountB:new g(0),tokenMaxA:new g(0),tokenMaxB:new g(0),liquidityAmount:new g(0),fix_amount_a:!n.fix_amount_a,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:"0",ratio:e.ratios[c]}}});return dn.fixLiquidityInputs(t,e.slippage,r,!1)}return e.positions.map((o,s)=>{const r=e.ratios[s];let a=w(e.liquidity).mul(r).toFixed(0);w(a).greaterThan(o.liquidity)&&(a=o.liquidity);const c=G.tickIndexToSqrtPriceX64(o.tick_lower_index),d=G.tickIndexToSqrtPriceX64(o.tick_upper_index),l=pt.getCoinAmountFromLiquidity(new g(a),t,c,d,!1),h=_i.fromDecimal(w(e.slippage).mul(100)),{tokenMaxA:_,tokenMaxB:m}=ts(l,h,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,tokenMaxA:_,tokenMaxB:m,liquidityAmount:new g(a),fix_amount_a:!1}})}static buildMasterPosition(e){return{coin_type_a:D(e.coin_type_a.fields.name).full_address,coin_type_b:D(e.coin_type_b.fields.name).full_address,description:e.description,id:e.id.id,index:e.index,liquidity:e.liquidity,name:e.name,pool:e.pool,tick_lower_index:ct(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:ct(BigInt(e.tick_upper_index.fields.bits)),url:e.url}}static buildMasterNFT(e){const t=Y(e);if(t){const n={id:t.id.id,pool_id:t.pool_id,index:Number(t.index),strategy:Number(t.strategy),tick_lower_index:ct(BigInt(t.tick_lower_index)),tick_upper_index:ct(BigInt(t.tick_upper_index)),positions:[],...ko(e)};return n.positions=t.positions.map(i=>dn.buildMasterPosition(i.fields)),n}}},It=class{static generateNextTickRange(e,t,n){const i=e-t/2,o=e+t/2;return{new_tick_lower:It.getValidTickIndex(i,n),new_tick_upper:It.getValidTickIndex(o,n)}}static calculateDepositRatio(e,t,n){const i=G.sqrtPriceX64ToTickIndex(n);if(i<e)return{ratioA:new K(1),ratioB:new K(0)};if(i>t)return{ratioA:new K(0),ratioB:new K(1)};const o=new g(1e8),{coinAmountB:s}=pt.estLiquidityAndcoinAmountFromOneAmounts(e,t,o,!0,!0,0,n),r=G.sqrtPriceX64ToPrice(n,0,0),a=w(o.toString()).mul(r),c=a.add(s.toString()),d=a.div(c),l=w(s.toString()).div(c);return{ratioA:d,ratioB:l}}static getValidTickIndex(e,t){if(e%t===0)return e;let n;if(e>0?n=e-e%t+t:e<0?n=e+Math.abs(e)%t-t:n=e,n%t!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(n)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return n}static get_lp_amount_by_liquidity(e,t){return e.total_supply==="0"?"0":w(e.total_supply).mul(t).div(e.liquidity).toFixed(0,K.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,t){return e.total_supply==="0"?"0":w(t).mul(e.liquidity).div(e.total_supply).toFixed(0,K.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,t){return w(t).mul(e.protocol_fee_rate).div(Xp).toFixed(0,K.ROUND_CEIL)}static buildFramsPositionNFT(e){const t=e.clmm_postion.fields;return{id:e.id.id,url:t.url,pool_id:e.pool_id,coinTypeA:D(t.coin_type_a.fields.name).full_address,coinTypeB:D(t.coin_type_b.fields.name).full_address,description:t.description,name:t.name,liquidity:t.liquidity,clmm_position_id:t.id.id,clmm_pool_id:t.pool,tick_lower_index:ct(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:ct(BigInt(t.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){const t=Y(e),n=Dn(e),{positions:i}=t;if(t&&i.length>0){const o=It.buildFramsPositionNFT(i[0].fields);return{id:t.id.id,pool_id:t.pool,protocol_fee_rate:t.protocol_fee_rate,is_pause:t.is_pause,harvest_assets:{harvest_assets_handle:t.harvest_assets.fields.id.id,size:Number(t.harvest_assets.fields.size)},lp_token_type:D(n).type_arguments[0],total_supply:t.lp_token_treasury.fields.total_supply.fields.value,liquidity:t.liquidity,max_quota:t.max_quota,status:t.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:t.quota_based_type.fields.name,position:o,current_sqrt_price:t.current_sqrt_price}}}static async getSuiCoin(e,t,n){const i=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),ao);n=n||new N;let o;if(t>95e10){const[s,...r]=i;r.length>0&&n.mergeCoins(n.object(s.coinObjectId),r.map(a=>n.object(a.coinObjectId))),o=n.splitCoins(n.object(s.coinObjectId),[t])}else o=X.buildCoinForAmount(n,i,BigInt(t),ao,!1,!0).targetCoin;return o}},qi=class{static calculatePositionShare(e,t,n,i,o,s,r){if(t<=o||e>=s)return"0";let a=0;e<o?a=o:a=e;let c=0;t<s?c=t:c=s;const d=G.tickIndexToSqrtPriceX64(a),l=G.tickIndexToSqrtPriceX64(c),{coinA:h,coinB:_}=pt.getCoinAmountFromLiquidity(new g(n),new g(r),d,l,!0);return w(h.toString()).mul(i).div(1e12).add(_.toString()).toString()}static buildFramsPool(e){const t=Y(e);if(t)try{const n=[];return t.rewarders.forEach(o=>{n.push({reward_coin:D(o.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:t.id.id,clmm_pool_id:t.clmm_pool_id,effective_tick_lower:ct(BigInt(t.effective_tick_lower.fields.bits)),effective_tick_upper:ct(BigInt(t.effective_tick_upper.fields.bits)),total_share:t.total_share,rewarders:n,positions:{positions_handle:t.positions.fields.id.id,size:t.positions.fields.size},sqrt_price:t.sqrt_price}}catch(n){console.log(n)}}static buildFramsPositionNFT(e){const t=Y(e);if(t){const n=t.clmm_postion.fields;return{id:t.id.id,url:n.url,pool_id:t.pool_id,coinTypeA:D(n.coin_type_a.fields.name).full_address,coinTypeB:D(n.coin_type_b.fields.name).full_address,description:n.description,name:n.name,liquidity:n.liquidity,clmm_position_id:n.id.id,clmm_pool_id:n.pool,tick_lower_index:ct(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:ct(BigInt(n.tick_upper_index.fields.bits)),rewards:[]}}}},si=class{static buildOrderLimitEvent(e,t){const{events:n}=e,i=[];return n&&n.forEach(o=>{const s=D(o.type).name;if(t.includes(s)){const r={digest:e.digest,type:s,timestampMs:e.timestampMs,parsedJson:o.parsedJson};i.push(r)}}),i}static buildLimitOrderInfo(e){const t=Y(e),n=Dn(e);if(t&&n)try{const i=D(n),o={pay_coin_type:i.type_arguments[0],target_coin_type:i.type_arguments[1],canceled_ts:t.canceled_ts==="18446744073709551615"?0:Number(t.canceled_ts),id:t.id.id,obtained_amount:t.obtained_amount,owner:t.owner,rate:t.rate,rate_order_indexer_id:t.rate_order_indexer_id,expire_ts:Number(t.expire_ts),total_pay_amount:t.total_pay_amount,pay_balance:t.pay_balance,target_balance:t.target_balance,claimed_amount:t.claimed_amount,status:"Running",created_ts:Number(t.created_ts)};return o.canceled_ts===0?(o.status="Running",w(o.pay_balance).eq(0)?o.status="Completed":w(o.pay_balance).lessThan(o.total_pay_amount)&&(o.status="PartialCompleted")):o.status="Cancelled",o}catch(i){console.log(i)}}static rateToPrice(e,t,n){const i=18+t-n;return w(10**i).div(e).toString()}static priceToRate(e,t,n){const i=18+t-n;return w(10).pow(i).div(w(e)).toFixed(0).toString()}},as=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{haedal:o}=I(i);if(o===void 0)throw Error("the haedal config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{staking_id:r}=I(o);try{const a=new N;t?await this.requestStake(e,n||1e9,a):a.moveCall({target:`${o.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[a.object(r)]});const c=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:t?e.ClmmSDK.senderAddress:s.address});if(console.log("getExchangeRateForStake res: ",c),t){const h=c.events.find(T=>T.type.includes("UserStaked")),{sui_amount:_,st_amount:m}=h.parsedJson,y=w(_).div(m).toString();return console.log({st_amount:m,sui_amount:_,rate:y}),y}const d=c.results[0].returnValues[0][0];return w(le.u64().parse(Uint8Array.from(d))).div(1e6).toString()}catch(a){console.log("getExchangeRateForHaedal",a)}return"0"}static async requestStake(e,t,n){var s,r;const{vaults:i}=e.sdkOptions;n=n||new N;const o=await It.getSuiCoin(e,t,n);return n.moveCall({target:`${(r=(s=i.config)==null?void 0:s.haedal)==null?void 0:r.published_at}::interface::request_stake`,typeArguments:[],arguments:[n.object(he("0x5")),n.object(i.config.haedal.config.staking_id),o,n.pure.address(he("0x0"))]}),n}static requestStakeCoin(e,t,n){const{haedal:i}=e.sdkOptions.vaults.config;return t.moveCall({target:`${i.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[t.object(he("0x5")),t.object(i.config.staking_id),n,t.pure.address(he("0x0"))]})}},cs=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=I(i);if(o===void 0)throw Error("the volo config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{native_pool:r,vsui_metadata:a}=I(o);try{const c=new N;t?await this.requestStake(e,n||1e9,c):c.moveCall({target:`${o.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[c.object(r),c.object(a)]});const d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:s.address});if(t){const _=d.events.find(T=>T.type.includes("StakedEvent")),{cert_amount:m,sui_amount:y}=_.parsedJson;return w(y).div(m).toString()}const l=d.results[0].returnValues[0][0];console.log({returnValues:l});const h=w(le.u256().parse(Uint8Array.from(l))).div(1e18).toNumber();return w(1).div(h).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=I(i);if(o===void 0)throw Error("the volo config is undefined");n=n||new N;const{native_pool:s,vsui_metadata:r}=I(o),a=await It.getSuiCoin(e,t,n);return n.moveCall({target:`${o.published_at}::native_pool::stake`,typeArguments:[],arguments:[n.object(s),n.object(r),n.object(he("0x5")),a]}),n}static requestStakeCoin(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=I(i);if(o===void 0)throw Error("the volo config is undefined");t=t||new N;const{native_pool:s,vsui_metadata:r}=I(o);return t.moveCall({target:`${o.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[t.object(s),t.object(r),t.object(he("0x5")),n]})}},ds=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=I(i);if(o===void 0)throw Error("the aftermath config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{staked_sui_vault:r,safe:a}=I(o);try{const c=new N;t?await this.requestStake(e,n||1e9,c):c.moveCall({target:`${o.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[c.object(r),c.object(a)]});const d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:s.address});if(t){const _=d.events.find(T=>T.type.includes("StakedEvent")),{afsui_amount:m,sui_amount:y}=_.parsedJson;return w(y).div(m).toString()}const l=d.results[0].returnValues[0][0];return w(le.u128().parse(Uint8Array.from(l))).div(1e18).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=I(i);if(o===void 0)throw Error("the aftermath config is undefined");n=n||new N;const{staked_sui_vault:s,referral_vault:r,safe:a,validator_address:c}=I(o),d=await It.getSuiCoin(e,t,n);return n.moveCall({target:`${o.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[n.object(s),n.object(a),n.object(he("0x5")),n.object(r),d,n.pure.address(he(c))]}),n}static requestStakeCoin(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=I(i);if(o===void 0)throw Error("the aftermath config is undefined");t=t||new N;const{staked_sui_vault:s,referral_vault:r,safe:a,validator_address:c}=I(o);return t.moveCall({target:`${o.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[t.object(s),t.object(a),t.object(he("0x5")),t.object(r),n,t.pure.address(he(c))]})}},Hp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.ido,i=`${n}_getPoolImmutables`,o=this.getCache(i,t),s={data:[],hasNextPage:!1},r=[];if(o!==void 0&&r.push(...o),r.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::oversubscribe_pool::CreatePoolEvent`},e);a.data.forEach(c=>{const d=c.parsedJson;if(d){const l=ut.buildIdoPoolImmutables(d);r.push(l)}}),s.hasNextPage=a.hasNextPage,s.nextCursor=a.nextCursor,this.updateCache(i,r,V)}catch(a){console.log("getPoolImmutables",a)}return s.data=r,s}async getPools(e=[],t=!1){const n=[];let i=[];e.length>0?i=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(r=>{i.push(r.pool_address)});const o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0});for(const s of o){const r=ut.buildIdoPool(s);await ut.calculatePoolUiPrice(this._sdk,r),n.push(r);const a=`${r.pool_address}_getPoolObject`;this.updateCache(a,r,V)}return n}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=ut.buildIdoPool(o);return await ut.calculatePoolUiPrice(this._sdk,s),this.updateCache(n,s),s}async getIdoConfigs(e=!1){var c;const{package_id:t}=this._sdk.sdkOptions.ido,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Ii(o),r=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:s}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",package_version_id:""};return r.length>0&&(r.forEach(d=>{console.log("item: ",d);const l=d.parsedJson;if(l)switch(D(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=l.admin_cap_id,a.package_version_id=l.package_version_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break}}),this.updateCache(n,a,V)),a}async getPurchaseInfo(e,t,n=!0){const i=`${e}_${t}_getPurchaseInfo`,o=this.getCache(i,n);if(o)return o;try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),r=ut.buildPurchaseInfo(Y(s));return this.updateCache(i,r,Mt),r}catch{return}}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!o.error)return Jn(o)}async getLockNFTList(e){var o;const{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:n}=this._sdk.sdkOptions,i=[];try{const s=(o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${n.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:o.data;for(const r of s){const a=Y(r);if(a){const c=a.nft.fields,d={locked_at:Number(a.locked_at),lock_duration:Number(a.lock_duration),lock_nft_id:a.id.id,type:a.nft.type,...c};d.end_lock_time=d.locked_at+d.lock_duration,d.coin_type_a=D(c.coin_type_a.fields.name).full_address,d.coin_type_b=D(c.coin_type_b.fields.name).full_address,d.id=c.id.id,d.tick_lower_index=ct(BigInt(c.tick_lower_index.fields.bits)),d.tick_upper_index=ct(BigInt(c.tick_upper_index.fields.bits)),i.push(d)}}return i}catch(s){return console.log("getLockNFTList:",s),[]}}async creatPool(e){const{ido:t}=this.sdk.sdkOptions;js(oe(e.coin_type_sale),oe(e.coin_type_raise))&&(e.price_min=w(1).div(e.price_max).toNumber(),e.price_max=w(1).div(e.price_min).toNumber());const i=kt.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),o=G.priceToSqrtPriceX64(w(e.price_min),e.sale_decimals,e.raise_decimals).toString(),s=G.priceToSqrtPriceX64(w(e.price_max),e.sale_decimals,e.raise_decimals).toString(),r=new N,a=w(e.total_supply).add(w(e.total_supply).mul(w(e.liquidity_injection_ratio))).toNumber(),c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),d=X.buildCoinForAmount(r,c,BigInt(a),e.coin_type_sale,!1),l=[r.object(I(t).admin_cap_id),r.object(I(t).package_version_id),r.object(I(t).pools_id),r.object(oe(e.owner)),r.pure.u128(w(i).mul(Fn).toString()),r.pure.u64(e.total_supply),r.pure.u64(e.complete_raise_limit),r.pure.u64(e.min_purchase_amount),r.pure.u64(e.max_purchase_amount),r.pure.u64(e.start_time),r.pure.u64(e.purchase_duration),r.pure.u64(e.lock_up_duration),r.pure.u64((e.liquidity_injection_ratio*nd).toString()),r.pure.u128(o),r.pure.u128(s),r.pure.u32(e.tick_spacing),d.targetCoin,r.pure.u64(e.protection_hard_cap.toString()),r.object(q)],h=[e.coin_type_sale,e.coin_type_raise];return r.moveCall({target:`${t.published_at}::${Vp}::create_oversubscribe_pool`,typeArguments:h,arguments:l}),r}async creatPurchasePayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),s=X.buildCoinForAmount(n,o,BigInt(e.raise_amount),e.coin_type_raise,!1),r=[e.coin_type_sale,e.coin_type_raise];let a,c;return i?(c="purchase",a=[n.object(I(t).package_version_id),n.object(e.pool_address),n.object(i.purchase_certificate_id),n.pure.u64(e.raise_amount.toString()),s.targetCoin,n.object(q)]):(c="create_certificate_and_purchase",a=[n.object(I(t).package_version_id),n.object(e.pool_address),n.pure.u64(e.raise_amount.toString()),s.targetCoin,n.object(q)]),n.moveCall({target:`${t.published_at}::${Et}::${c}`,typeArguments:r,arguments:a}),n}async redeemPayload(e){const{ido:t}=this.sdk.sdkOptions,n=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(n===void 0)throw Error("get purchase certificate fail");const i=new N,o=[e.coin_type_sale,e.coin_type_raise],s=[i.object(I(t).package_version_id),i.object(e.pool_address),i.object(n.purchase_certificate_id),i.object(q)];return i.moveCall({target:`${t.published_at}::${Et}::redeem`,typeArguments:o,arguments:s}),i}injectLiquidityPayload(e){const{ido:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new N,o=[e.coin_type_sale,e.coin_type_raise],s=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",r=[i.object(I(t).package_version_id),i.object(e.pool_address),i.object(I(n).global_config_id),i.object(e.clmm_pool_address),i.object(q)];return i.moveCall({target:`${t.published_at}::${Et}::${s}`,typeArguments:o,arguments:r}),i}unPauseInjectLiquidity(e){const{ido:t}=this.sdk.sdkOptions,{integrate:n,clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,o=new N;o.moveCall({target:`${n.published_at}::${pi}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[o.object(I(i).global_config_id),o.object(e.clmm_pool_address)]});const s=[e.coin_type_sale,e.coin_type_raise],r=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[o.object(I(t).package_version_id),o.object(e.pool_address),o.object(I(i).global_config_id),o.object(e.clmm_pool_address),o.object(q)];return o.moveCall({target:`${t.published_at}::${Et}::${r}`,typeArguments:s,arguments:a}),o}async findClmmPoolForLiquidity(e){let t=null,n=!1;const i=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(const o of i){if(o.coinTypeA===e.coin_type_sale&&o.coinTypeB===e.coin_type_raise&&Number(o.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(o.poolAddress);break}if(o.coinTypeA===e.coin_type_raise&&o.coinTypeB===e.coin_type_sale&&Number(o.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(o.poolAddress),n=!0;break}}return t&&(w(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||w(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?(console.log("clmmPool: ",t.poolAddress),{is_reverse:n,clmmPool:null}):{is_reverse:n,clmmPool:t}}withdrawPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).package_version_id),n.object(e.pool_address),n.object(q)];return n.moveCall({target:`${t.published_at}::${Et}::withdraw`,typeArguments:i,arguments:o}),n}updateWhitelistCapPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&n.moveCall({target:`${t.published_at}::${Et}::add_white_listed_addresses`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).package_version_id),n.object(e.pool_address),n.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(o=>n.pure.address(he(o)))}),n.pure.u64(e.add_whites.protection_limit),n.object(q)]}),e.remove_whites&&e.remove_whites.length>0&&n.moveCall({target:`${t.published_at}::${Et}::remove_white_listed_addresses`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).package_version_id),n.object(e.pool_address),n.makeMoveVec({type:"address",elements:e.remove_whites.map(o=>n.pure.address(he(o)))}),n.object(q)]}),e.update_whites&&e.update_whites.forEach(o=>{n.moveCall({target:`${t.published_at}::${Et}::update_white_listed_address`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).package_version_id),n.object(e.pool_address),n.object(o.address),n.pure.u64(o.protection_limit),n.object(q)]})}),n}creatCancelPoolPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).admin_cap_id),n.object(I(t).package_version_id),n.object(e.pool_address),n.object(q)];return n.moveCall({target:`${t.published_at}::${Et}::cancel`,typeArguments:i,arguments:o}),n}updatePoolOwnerPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new N:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(I(n).admin_cap_id),t.object(I(n).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object(q)];return t.moveCall({target:`${n.published_at}::${Et}::update_pool_owner`,typeArguments:i,arguments:o}),t}updatePoolDuractionPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new N:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(I(n).admin_cap_id),t.object(I(n).package_version_id),t.object(e.pool_address),t.pure.u64(e.start_time),t.pure.u64(e.purchase_duration),t.pure.u64(e.lock_duration),t.object(q)];return t.moveCall({target:`${n.published_at}::${Et}::update_pool_duration`,typeArguments:i,arguments:o}),t}updateProtectionHardCapPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new N:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(I(n).admin_cap_id),t.object(I(n).package_version_id),t.object(e.pool_address),t.pure.u64(e.protection_hard_cap),t.object(q)];return t.moveCall({target:`${n.published_at}::${Et}::update_protection_hard_cap`,typeArguments:i,arguments:o}),t}unlockNftPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=[e.nft_type],o=[n.object(e.lock_nft_id),n.object(q)];return n.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:o}),n}async isAdminCap(e){const{ido:t}=this._sdk.sdkOptions,n=`${t.package_id}_${e}_isAdminCap`,i=this.getCache(n);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:I(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(o);const s=Dn(o),r=co(o);let a=!1;return r&&s&&D(s).source_address===`${t.package_id}::config::AdminCap`&&(a=oe(r.AddressOwner)===oe(e)),this.updateCache(n,a,V),a}async getWhiteProtectionLimit(e,t,n=!0){const i=`${e}_${t}_getWhiteProtectionLimit`,o=this._sdk.getCache(i,n);if(o)return o;try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(s&&s.data){const r=Y(s);return this._sdk.updateCache(i,r.value),r.value}return}catch{return}}async getWhiteList(e,t){var i;const n={type:"address",value:t};try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n}),s=Y(o);if(console.log(s),s)return(i=s==null?void 0:s.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){const{ido:e}=this._sdk.sdkOptions,t=`${I(e).admin_cap_id}_getAdminAddress`,n=this.getCache(t);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:I(e).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(i);const o=Dn(i),s=co(i);if(s&&o&&D(o).source_address===`${e.package_id}::config::AdminCap`){const a=oe(s.AddressOwner);return this.updateCache(t,a,V),a}return""}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},Jp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xtoken:n}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,o=this.getCache(i,t);if(o!==void 0)return o;let s;const r=`${n.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:r}})).data.forEach(c=>{const d=D(Ht(c)).source_address;if(d===r&&c.data&&c.data.content){const{fields:l}=c.data.content;s={...ko(c),id:l.id.id,index:l.index,type:d,xtoken_balance:l.xtoken_balance},this.updateCache(i,s,V)}}),s}async getOwnerLockTokens(e){const{xtoken:t}=this.sdk.sdkOptions,n=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const s of o.data)if(D(Ht(s)).source_address===i&&s.data){const a=jn.buildLockToken(s.data.content),c=await this.getLockXToken(a.id);c&&(a.xtoken_amount=c.xtoken_amount),n.push(a)}return n}async getLockToken(e){var n;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const i=jn.buildLockToken(t.data.content),o=await this.getLockXToken(i.id);return o&&(i.xtoken_amount=o.xtoken_amount),i}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){const{xtoken:e}=this.sdk.sdkOptions,t=new N;return t.moveCall({target:`${e.published_at}::${$n}::mint_venft`,typeArguments:[],arguments:[t.object(I(e).xtoken_manager_id)]}),t}async convertPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new N,i=this.buileTokenCoinType(),o=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),i);return e.venft_id===void 0?n.moveCall({target:`${t.published_at}::${$n}::mint_and_convert`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),o,n.pure.u64(e.amount)]}):n.moveCall({target:`${t.published_at}::${$n}::convert`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),o,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${$n}::redeem_lock`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),n.object(e.venft_id),n.pure.u64(e.amount),n.pure.u64(e.lock_day),n.object(q)]}),n}redeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${$n}::redeem`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(q)]}),n}redeemDividendPayload(e,t){const{xtoken_dividends:n}=this.sdk.sdkOptions,i=new N;return t.forEach(o=>{i.moveCall({target:`${n.published_at}::${rs}::redeem`,typeArguments:[o],arguments:[i.object(I(n).dividend_manager_id),i.object(e)]})}),i}redeemDividendV2Payload(e,t,n){const{xtoken_dividends:i}=this.sdk.sdkOptions;let o=new N;return t.filter(r=>n.includes(r)).length>0&&(o=this.redeemDividendXTokenPayload(e,o)),t.forEach(r=>{n.includes(r)||o.moveCall({target:`${i.published_at}::${rs}::redeem_v2`,typeArguments:[r],arguments:[o.object(I(i).dividend_manager_id),o.object(e),o.object(q)]})}),o}redeemDividendXTokenPayload(e,t){const{xtoken_dividends:n,xtoken:i}=this.sdk.sdkOptions,{xtoken_manager_id:o,lock_manager_id:s}=I(i),{dividend_manager_id:r}=I(n);return t=t===void 0?new N:t,t.moveCall({target:`${n.published_at}::${rs}::redeem_xtoken`,typeArguments:[],arguments:[t.object(s),t.object(o),t.object(r),t.object(e),t.object(q)]}),t}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,t="xtoken",n="XTOKEN"){return`${e}::${t}::${n}`}cancelRedeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${$n}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(q)]}),n}async getInitConfigs(){var r,a;const{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:r.data,o={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const d=c.parsedJson;d&&(o.xtoken_manager_id=d.xtoken_manager)});const s=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return s.length>0&&s.forEach(c=>{const d=c.parsedJson;d&&(o.lock_manager_id=d.lock_manager)}),o.lock_handle_id=(await this.getLockUpManager(o.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(t,o,V),o}async getLockUpManager(e=I(this.sdk.sdkOptions.xtoken).lock_manager_id,t=!1){const n=`${e}_getLockUpManagerEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=jn.buildLockUpManager(Y(o));return this.updateCache(n,s,V),s}async getLockInfoHandle(e){const t=`${e}_getLockInfoHandle`,n=this.getCache(t);if(n!==void 0)return n;let i="";const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=Y(o);return s&&(i=s.lock_infos.fields.id.id,this.updateCache(t,i,V)),i}async getDividendConfigs(){var s;const{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:s.data,o={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(r=>{const a=r.parsedJson;a&&(o.dividend_manager_id=a.manager_id,o.dividend_admin_id=a.admin_id,o.dividend_settle_id=a.settle_id,this.updateCache(t,o,V))}),o}async getDividendManager(e=!1){const{dividend_manager_id:t}=I(this.sdk.sdkOptions.xtoken_dividends),n=`${t}_getDividendManager`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Y(o),r=jn.buildDividendManager(s);return this.updateCache(n,r,V),r}async getXcetusManager(e=!0){const{xtoken_manager_id:t}=I(this.sdk.sdkOptions.xtoken),n=`${t}_getXcetusManager`,i=this.getCache(n,e);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Y(o),r={id:s.id.id,index:Number(s.index),has_venft:{handle:s.has_venft.fields.id.id,size:s.has_venft.fields.size},nfts:{handle:s.nfts.fields.id.id,size:s.nfts.fields.size},total_locked:s.total_locked,treasury:s.treasury.fields.total_supply.fields.value};return this.updateCache(n,r),r}async getVeNFTDividendInfo(e,t){try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=Y(n);return jn.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=w(Rt).mul(w(n.max_lock_day).sub(w(t))).mul(w(n.max_percent_numerator).sub(w(n.min_percent_numerator))).div(w(n.max_lock_day).sub(w(n.min_lock_day))),o=w(Rt).mul(w(n.max_percent_numerator)).sub(i).div(w(uo)).div(Rt);return{amountOut:w(o).mul(w(e)).round().toString(),percent:o.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=w(Rt).mul(w(n.max_lock_day).sub(w(t))).mul(w(n.max_percent_numerator).sub(w(n.min_percent_numerator))).div(w(n.max_lock_day).sub(w(n.min_lock_day))),o=w(Rt).mul(w(n.max_percent_numerator)).sub(i).div(w(uo)).div(Rt);return{amountOut:w(e).div(o).toFixed(0,K.ROUND_UP),percent:o.toString()}}async getLockXToken(e){const{lock_handle_id:t}=I(this._sdk.sdkOptions.xtoken),n=`${e}_getXTokenAmount`,i=this.getCache(n);if(i)return i;try{const o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),s=Y(o);if(s){const r=s.value.fields.value.fields;return this.updateCache(n,r,V),r}}catch{}}async getVeNftAmount(e,t){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=Y(n);if(i){const{lock_amount:o,xtoken_amount:s}=i.value.fields.value.fields;return{lock_amount:o,xtoken_amount:s}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const i=(await this.getDividendManager()).dividends.id,o=`${i}_${e}_getPhaseDividendInfo`,s=this._sdk.getCache(o,t);if(s)return s;try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),a=Y(r),c=a.value.fields.value.fields,d=c.redeemed_num.fields.contents.map(m=>({name:m.fields.key.fields.name,value:m.fields.value})),l=c.bonus_types.map(m=>m.fields.name),h=c.bonus.fields.contents.map(m=>({name:m.fields.key.fields.name,value:m.fields.value})),_={id:Gt(r),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:d,is_settled:c.is_settled,bonus_types:l,bonus:h,phase_end_time:""};return this.updateCache(o,_),_}catch{}}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},Zp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async addMasterLiquidity(e){var T,O;const{liquidity_stratefy:t}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);let o=w(0),s=w(0);const r=[],a=[],c=[],d=[],l=[];e.liquidity_bins.forEach((j,M)=>{const B=e.amounts_a[M],$=e.amounts_b[M],J=e.bins_fix_amount_a[M];o=o.add(B),s=s.add($),r.push(B),a.push($),c.push(wt(BigInt(j.tick_lower)).toString()),d.push(wt(BigInt(j.tick_upper)).toString()),l.push(J)});const h=[e.coinTypeA,e.coinTypeB],_=new N,m=(T=X.buildAddLiquidityFixTokenCoinInput(_,!e.fix_amount_a,o.toString(),e.slippage,e.coinTypeA,i,!1))==null?void 0:T.targetCoin,y=(O=X.buildAddLiquidityFixTokenCoinInput(_,e.fix_amount_a,s.toString(),e.slippage,e.coinTypeB,i,!1))==null?void 0:O.targetCoin;return zp(e)?_.moveCall({target:`${t.published_at}::router::increase_liquidity`,typeArguments:h,arguments:[_.object(I(t).master_manger_id),_.object(e.master_address),_.object(I(n).global_config_id),_.object(e.pool_address),m,y,_.makeMoveVec({elements:r.map(j=>_.pure.u64(j))}),_.makeMoveVec({elements:a.map(j=>_.pure.u64(j))}),_.makeMoveVec({elements:l.map(j=>_.pure.bool(j))}),_.object(q)]}):_.moveCall({target:`${t.published_at}::router::create_master_liquidity`,typeArguments:h,arguments:[_.object(I(t).master_manger_id),_.object(I(n).global_config_id),_.object(e.pool_address),m,y,_.makeMoveVec({elements:c.map(j=>_.pure.u32(Number(j)))}),_.makeMoveVec({elements:d.map(j=>_.pure.u32(Number(j)))}),_.makeMoveVec({elements:r.map(j=>_.pure.u64(j))}),_.makeMoveVec({elements:a.map(j=>_.pure.u64(j))}),_.makeMoveVec({elements:l.map(j=>_.pure.bool(j))}),_.pure.u8(e.strategy),_.pure.u32(Number(wt(BigInt(e.tick_lower)).toString())),_.pure.u32(Number(wt(BigInt(e.tick_upper)).toString())),_.object(q)]}),_}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(e,t=[]){const n=[],i=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),o=t.length>0;for(const s of i.data)if(D(s.data.type).full_address===this.buildMasterNFTType()){const a=dn.buildMasterNFT(s);if(a){const c=`${a.id}_masterNFT`;this.updateCache(c,a,V),o?t.includes(a.pool_id)&&n.push(a):n.push(a)}}return n}async getMasterNFT(e,t=!1){const n="$masterId}_masterNFT",i=this.getCache(n,t);if(i)return i;try{const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(D(o.data.type).full_address===this.buildMasterNFTType()){const r=dn.buildMasterNFT(o);return r&&this.updateCache(n,r,V),r}}catch(o){console.log(o)}}async fetchMasterPositionInfos(e){var a;const t={},{clmm_pool:n,integrate:i,simulationAccount:o}=this.sdk.ClmmSDK.sdkOptions,s=new N;return e.forEach(c=>{c.position_ids.forEach(d=>{const l=[c.coinTypeA,c.coinTypeB],h=[s.object(I(n).global_config_id),s.object(c.pool_id),s.object(d)];s.moveCall({target:`${i.published_at}::${qt}::fetch_position_fees`,arguments:h,typeArguments:l}),s.moveCall({target:`${i.published_at}::${qt}::fetch_position_rewards`,arguments:[...h,s.object(q)],typeArguments:l})})}),(a=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:o.address})).events)==null||a.forEach(c=>{const{parsedJson:d}=c,{position_id:l}=d;let h=t[l];switch(h===void 0&&(h={position_id:l,feeOwedA:"0",feeOwedB:"0",rewarders:[]},t[l]=h),D(c.type).name){case"FetchPositionFeesEvent":h.feeOwedA=d.fee_owned_a,h.feeOwedB=d.fee_owned_b;break;case"FetchPositionRewardsEvent":h.rewarders=d.data;break}}),t}async getLiquidityStrategyConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.liquidity_stratefy,n=`${t}_getLiquidityStrategyConfigst`,i=this.getCache(n,e);if(i!==void 0)return i;const o=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,s={master_manger_id:"",master_liquidity_handle:""};if(o.length>0){for(const r of o){const a=r.parsedJson;s.master_manger_id=a.id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),d=Y(c);s.master_liquidity_handle=d.position_maps.fields.id.id;break}this.updateCache(n,s,V)}return s}removeMasterLiquidity(e){const{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new N,o=[e.coinTypeA,e.coinTypeB];this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},i);const s=[i.object(I(n).master_manger_id),i.object(e.pool_address),i.object(e.master_address),i.object(I(t).global_config_id),i.makeMoveVec({elements:e.delta_liquidities.map(r=>i.pure.u128(r))}),i.makeMoveVec({elements:e.min_amounts_a.map(r=>i.pure.u64(r))}),i.makeMoveVec({elements:e.min_amounts_a.map(r=>i.pure.u64(r))}),i.object(q)];return i.moveCall({target:`${n.published_at}::${Ni}::remove_liquidity`,typeArguments:o,arguments:s}),i}closeMasterLiquidity(e){const{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new N,o=[e.coinTypeA,e.coinTypeB];return this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},i),i.moveCall({target:`${n.published_at}::${Ni}::close_master_liquidity`,typeArguments:o,arguments:[i.object(I(n).master_manger_id),i.object(e.master_address),i.object(I(t).global_config_id),i.object(e.pool_address),i.makeMoveVec({elements:e.min_amounts_a.map(s=>i.pure.u64(s))}),i.makeMoveVec({elements:e.min_amounts_a.map(s=>i.pure.u64(s))}),i.object(q)]}),i}collectFee(e,t){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;t=t===void 0?new N:t;const o=[e.coinTypeA,e.coinTypeB],s=[t.object(I(i).master_manger_id),t.object(e.master_address),t.object(I(n).global_config_id),t.object(e.pool_address)];return t.moveCall({target:`${i.published_at}::${Ni}::collect_fee`,typeArguments:o,arguments:s}),t}collectReward(e,t){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;return t=t===void 0?new N:t,e.collect_fee&&this.collectFee({...e},t),e.rewarder_coin_types.forEach(o=>{const s=[e.coinTypeA,e.coinTypeB,o];if(t){const r=[t.object(I(i).master_manger_id),t.object(e.master_address),t.object(I(n).global_config_id),t.object(e.pool_address),t.object(I(n).global_vault_id),t.object(q)];t.moveCall({target:`${i.published_at}::${Ni}::collect_reward`,typeArguments:s,arguments:r})}}),t}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},Qp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildCoinInput(e,t,n,i,o){const{selectedCoins:s,remainingCoins:r}=ce.selectCoinAssetGreaterThanOrEqual(t,BigInt(i)),a=ce.calculateTotalBalance(s);if(a<BigInt(i))throw new Error(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `);const c=a-BigInt(i);let d;if(ce.isSuiCoin(n))d=e.splitCoins(e.gas,[e.pure.u64(i)]);else{const[l,...h]=s.map(_=>_.coinObjectId);d=e.object(l),h.length>0?o?e.mergeCoins(d,[...h.map(_=>e.object(_)),o]):e.mergeCoins(d,[...h.map(_=>e.object(_))]):o&&e.mergeCoins(d,[o])}return{selectedUnusedAmount:c,coinInput:d,remainingCoins:r}}async deposit(e){var h,_;console.log("1110 deposit : ",{params:e});const{vaults:t,frams:n}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),s=new N;let r,a;if(e.swapParams){const m=await this.handleDepositSwap(e,s,o);r=m.primaryCoinAInputs,a=m.primaryCoinBInputs}else r=(h=X.buildAddLiquidityFixTokenCoinInput(s,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,o,!1))==null?void 0:h.targetCoin,a=(_=X.buildAddLiquidityFixTokenCoinInput(s,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,o,!1))==null?void 0:_.targetCoin;const c=I(t),d=I(n),l=I(i);return s.moveCall({target:`${t.published_at}::${Gp}::deposit`,typeArguments:[e.coinTypeA,e.coinTypeB,e.lp_token_type],arguments:[s.object(c.vaults_manager_id),s.object(e.vault_id),s.object(d.rewarder_manager_id),s.object(d.global_config_id),s.object(e.farming_pool),s.object(l.global_config_id),s.object(e.clmm_pool),r,a,s.pure.u64(e.amount_a),s.pure.u64(e.amount_b),s.pure.bool(e.fix_amount_a),s.object(q)]}),s}async handleDepositSwap(e,t,n){const{clmm_pool:i,integrate:o}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:s,a2b:r,route_obj:a,stakeProtocol:c}=e.swapParams,d=r?e.coinTypeA:e.coinTypeB,l=X.buildCoinForAmount(t,n,BigInt(s),d,!1),h=BigInt(l.tragetCoinAmount)-BigInt(s);let _=[];if(c){const j=this.requestStakeCoin(c,t,l.targetCoin),M=X.buildCoinForAmount(t,l.remainCoins,BigInt(0),d,!1).targetCoin;_=r?[M,j]:[j,M]}else if(a){const j=X.buildCoinForAmount(t,n,0n,r?e.coinTypeB:e.coinTypeA,!1),M=await X.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,a,l,j,"",e.slippage,t);_=r?[M.fromCoin,M.toCoin]:[M.toCoin,M.fromCoin],console.log("swapCoinInputTo.isMintZeroCoin: ",j),!j.isMintZeroCoin&&j.originalSplitedCoin===void 0&&t.transferObjects([j.targetCoin],t.pure.address(this._sdk.getVerifySenderAddress()))}else{const j=X.buildCoinForAmount(t,n,0n,r?e.coinTypeB:e.coinTypeA,!1),M=Qt.getDefaultSqrtPriceLimit(r).toString();_=t.moveCall({target:`${o.published_at}::${En}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(I(i).global_config_id),t.object(e.clmm_pool),r?l.targetCoin:j.targetCoin,r?j.targetCoin:l.targetCoin,t.pure.bool(r),t.pure.bool(!0),t.pure.u64(s),t.pure.u128(M),t.pure.bool(!1),t.object(q)]})}let m,y;const T=_[0],O=_[1];if(r){const j=BigInt(e.amount_a)-h;ce.isSuiCoin(d)?(t.transferObjects([T],t.pure.address(this._sdk.getVerifySenderAddress())),m=t.splitCoins(t.gas,[t.pure.u64(e.amount_a)])):j>0n?m=this.buildCoinInput(t,l.remainCoins,d,j,T).coinInput:m=T,y=O}else{m=T;const j=BigInt(e.amount_b)-h;ce.isSuiCoin(d)?(t.transferObjects([O],t.pure.address(this._sdk.getVerifySenderAddress())),y=t.splitCoins(t.gas,[t.pure.u64(e.amount_b)])):j>0n?y=this.buildCoinInput(t,l.remainCoins,d,j,O).coinInput:y=O}return{primaryCoinAInputs:m,primaryCoinBInputs:y}}async remove(e){console.log({params:e});const{vaults:t,frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:o}=this._sdk.ClmmSDK.sdkOptions,s=new N,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),e.lp_token_type),a=X.buildCoinForAmount(s,r,BigInt(e.lp_token_amount),e.lp_token_type,!1).targetCoin,c=I(t),d=I(n),l=I(i),h=[e.coinTypeA,e.coinTypeB,e.lp_token_type],_=s.moveCall({target:`${t.published_at}::${Wp}::remove`,typeArguments:h,arguments:[s.object(c.vaults_manager_id),s.object(e.vault_id),s.object(d.rewarder_manager_id),s.object(d.global_config_id),s.object(e.farming_pool),s.object(l.global_config_id),s.object(e.clmm_pool),a,s.pure.u64(e.lp_token_amount),s.pure.u64(e.min_amount_a),s.pure.u64(e.min_amount_b),s.object(q)]}),m=_[0],y=_[1];if(e.swapParams){const{a2b:T,swap_amount:O,route_obj:j}=e.swapParams;if(j){const M={targetCoin:T?m:y,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},B={targetCoin:T?y:m,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},$=await X.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,j,M,B,"",e.slippage,s),J=T?[$.fromCoin,$.toCoin]:[$.toCoin,$.fromCoin];T?s.mergeCoins(J[1],[y]):s.mergeCoins(J[0],[m]),s.transferObjects([...J],s.pure.address(this._sdk.getVerifySenderAddress()))}else{const M=Qt.getDefaultSqrtPriceLimit(T).toString(),B=s.moveCall({target:`${o.published_at}::${En}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[s.object(I(i).global_config_id),s.object(e.clmm_pool),m,y,s.pure.bool(T),s.pure.bool(!0),s.pure.u64(O),s.pure.u128(M),s.pure.bool(!0),s.object(q)]});s.transferObjects([B[0],B[1]],s.pure.address(this._sdk.getVerifySenderAddress()))}}else s.transferObjects([m,y],s.pure.address(this._sdk.getVerifySenderAddress()));return s}async getVaultList(e="all"){const{vaults:t}=this._sdk.sdkOptions,n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::vaults::CreateEvent`},e),i=n.data.map(r=>r.parsedJson.id),o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),s=[];return o.forEach(r=>{const a=It.buildPool(r);a&&(a.stake_protocol=this.findStakeProtocol(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),s.push(a))}),n.data=s,n}findStakeProtocol(e,t){const{haedal:n,volo:i,aftermath:o}=I(this._sdk.sdkOptions.vaults),s=D(e).full_address,r=D(t).full_address;if(ce.isSuiCoin(s)||ce.isSuiCoin(r)){if(n){const a=D(I(n).coin_type).full_address;if(s===a||r===a)return"Haedal"}if(i){const a=D(I(i).coin_type).full_address;if(s===a||r===a)return"Volo"}if(o){const a=D(I(o).coin_type).full_address;if(s===a||r===a)return"aftermath"}}}savePoolToCache(e){const t=`${e.id}_mirrorPool`;this.updateCache(t,e,V)}readPoolFromCache(e,t=!1){const n=`${e}_mirrorPool`;return this.getCache(n,t)}async calculateMaxAvailable(e){var T;const{integrate:t,simulationAccount:n}=this.sdk.ClmmSDK.sdkOptions,i=new N,o=G.tickIndexToSqrtPriceX64(e.lowerTick),s=G.tickIndexToSqrtPriceX64(e.upperTick),r=new g(e.curSqrtPrice),a=pt.getCoinAmountFromLiquidity(new g(e.input_amount),r,o,s,!1),c=[e.coinTypeA,e.coinTypeB];i.moveCall({target:`${t.published_at}::${qt}::calculate_swap_result`,arguments:[i.object(e.clmm_pool),i.pure.bool(!0),i.pure.bool(!0),i.pure.u64(a.coinA.toString())],typeArguments:c}),i.moveCall({target:`${t.published_at}::${qt}::calculate_swap_result`,arguments:[i.object(e.clmm_pool),i.pure.bool(!1),i.pure.bool(!0),i.pure.u64(a.coinB.toString())],typeArguments:c});const l=(T=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:T.filter(O=>D(O.type).name==="CalculatedSwapResultEvent");if(l.length===0)return null;const h=l[0].parsedJson.data,_=l[1].parsedJson.data,m=w(a.coinB.toString()).add(h.amount_out),y=w(a.coinA.toString()).add(_.amount_out);return{maxAmountB:m,maxAmountA:y}}async calculateRemoveSwapAmount(e,t){const n=It.calculateDepositRatio(e.lowerTick,e.upperTick,new g(e.curSqrtPrice)),i=e.fix_amount_a?n.ratioA:n.ratioB;console.log({fixRatio:i});let o=w(e.receive_amount).mul(i),s,r;if(e.removeLiquidity){const T=G.tickIndexToSqrtPriceX64(e.lowerTick),O=G.tickIndexToSqrtPriceX64(e.upperTick),j=pt.getCoinAmountFromLiquidity(new g(e.removeLiquidity),new g(e.curSqrtPrice),T,O,!1);r=e.removeLiquidity,s=e.fix_amount_a?j.coinB.toString():j.coinA.toString(),o=e.fix_amount_a?w(j.coinA.toString()):w(j.coinB.toString())}else{const T=pt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new g(o.toFixed(0)),e.fix_amount_a,!1,.2,new g(e.curSqrtPrice));r=T.liquidityAmount.toString(),s=e.fix_amount_a?T.coinAmountB.toString():T.coinAmountA.toString()}console.log({fixAmount:o,otherSideAmount:s});const a=!e.fix_amount_a,c=await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,w(s),e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route,[{pool_id:e.clmm_pool,tick_lower:e.lowerTick,tick_upper:e.upperTick,delta_liquidity:Number(r),is_increase:!1}]);console.log({data:c,range:t});const d=o.add(c.amount_out),l=w(e.receive_amount),h=l.sub(d);if(console.log(`: ${d.toString()} , : ${e.receive_amount}, : ${h.toString()} `),(!e.removeLiquidity||e.removeLiquidity&&t)&&h.abs().greaterThan(l.mul(.01))){const T=d.lessThan(l);let O,j;t?T?(O=w(r),j=t.right):(O=t.left,j=w(r)):(O=w(T?r:0),j=w(T?e.maxLiquidity:r));const M=w(O).add(j).div(2).toFixed(0);if(console.log({left:O.toString(),right:j.toString(),midLiquidity:M.toString()}),!t||t&&t.count<15&&O<j)return await this.calculateRemoveSwapAmount({...e,removeLiquidity:M},{left:O,right:j,count:t?t.count+1:0})}const _=c.amount_in&&c.fee_amount?new g(c.amount_in).add(new g(c.fee_amount)).toString():c.amount_in,m=c.amount_out,{is_exceed:y}=c;return{swapInAmount:_,swapOutAmount:m,liquidity:r,is_exceed:y,routeObj:c.route_obj,request_id:e.request_id}}async calculateStakeDepositFixSui(e){const t=e.inputSuiAmount.mul(e.remainRate),n=e.inputSuiAmount.sub(e.swapSuiAmount),i=e.exchangeRate?e.exchangeRate:await this.getExchangeRateForStake(e.stakeProtocol,e.shouldRequestStake,Number(e.swapSuiAmount.toFixed(0))),o=e.swapSuiAmount.div(i).toFixed(0);console.log({swapAmount:e.swapSuiAmount.toString(),hasuiAmount:o.toString(),leftSuiAmount:e.leftSuiAmount.toString(),rightSuiAmount:e.rightSuiAmount.toString(),exchangeRate:i});const s=pt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new g(o.toString()),!e.fixCoinA,!0,0,new g(e.curSqrtPrice)),r=e.fixCoinA?s.coinAmountA.toString():s.coinAmountB.toString(),a=w(n).sub(r);return console.log({useSuiAmount:r.toString(),hasuiAmount:o.toString(),remainSui:n.toString(),remainSuiLimit:t.toString(),actRemainSui:a.toString(),rebalanceCount:e.rebalanceCount}),a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(t)||e.rebalanceCount>12||e.leftSuiAmount.greaterThanOrEqualTo(e.rightSuiAmount)?{swapInAmount:e.swapSuiAmount.toFixed(0),swapOutAmount:o,afterSqrtPrice:e.curSqrtPrice,fixAmountA:!e.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:e.stakeProtocol}:a.lessThan(0)?await this.calculateStakeDepositFixSui({...e,rightSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.leftSuiAmount).div(2),exchangeRate:i,rebalanceCount:e.rebalanceCount+1}):a.greaterThan(t)?await this.calculateStakeDepositFixSui({...e,leftSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.rightSuiAmount).div(2),exchangeRate:i,rebalanceCount:e.rebalanceCount+1}):null}async calculateDepositSwapAmount(e,t=!1){const n=G.sqrtPriceX64ToTickIndex(new g(e.curSqrtPrice)),{ratioA:i,ratioB:o}=It.calculateDepositRatio(e.lowerTick,e.upperTick,new g(e.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...e,currentTick:n,adjustBestAmount:t});const s=w(e.input_amount).mul(e.fix_amount_a?i:o);let r=w(e.input_amount).sub(s);console.log("1110 ",{fixAmount:s.toString(),swapAmount:r.toString()});const a=e.fix_amount_a;if(r.toFixed(0)==="0")return null;if(e.stakeProtocol){if(ce.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||ce.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){const z=await this.calculateStakeDepositFixSui({inputSuiAmount:w(e.input_amount),swapSuiAmount:r,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:a?new K(r.toFixed(0)):new K(0),rightSuiAmount:a?new K(e.input_amount):new K(r.toFixed(0)),stakeProtocol:e.stakeProtocol});return z?{...z,request_id:e.request_id}:null}throw Error("Only support fix sui")}const c=n<e.lowerTick||n>e.upperTick,d={clmm_pool:e.clmm_pool,curSqrtPrice:e.curSqrtPrice,a2b:a,amount_a:a?new K(e.input_amount):new K(0),amount_b:a?new K(0):new K(e.input_amount),amount_left:a?new K(r.toFixed(0)):new K(0),amount_right:a?new K(e.input_amount):new K(r.toFixed(0)),lowerTick:e.lowerTick,upperTick:e.upperTick,tick_spacing:2,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,useRoute:e.use_route,remainRate:e.remainRate?e.remainRate:.01,priceSplitPoint:e.priceSplitPoint},l=t&&n<=e.upperTick;let h=l?await this.calculateRebalance(d):await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,r,e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route),_=h.after_sqrt_price;const m=G.sqrtPriceX64ToTickIndex(new g(_));console.log("1110  : ",{...h,currentTick:m},null,2);const y=m<e.lowerTick||m>e.upperTick;if(c!==y&&!l&&m<=e.upperTick){console.log("1110 , swap: ");const{ratioA:z,ratioB:re}=It.calculateDepositRatio(e.lowerTick,e.upperTick,new g(_));console.log("1110 ",{newAfterRatioA:z,newAfterRatioB:re}),r=w(e.input_amount).sub(w(e.input_amount).mul(e.fix_amount_a?z:re)),d.amount_left=a?new K(r.toFixed(0)):new K(0),d.amount_right=a?new K(e.input_amount):new K(r.toFixed(0)),h=await this.calculateRebalance(d),_=h.after_sqrt_price;const ge=G.sqrtPriceX64ToTickIndex(new g(_));console.log("1110 : ",{lowerTick:e.lowerTick,upperTick:e.upperTick,currentTick:ge,afterSqrtPrice:_})}const{ratioA:T,ratioB:O}=It.calculateDepositRatio(e.lowerTick,e.upperTick,new g(_));console.log("1110 1",{afterRatioA:T,afterRatioB:O,data:h});let j=O.div(T).sub(o.div(i)).greaterThan("0");const M=h.amount_in&&h.fee_amount?new g(h.amount_in).add(new g(h.fee_amount)).toString():h.amount_in,B=h.amount_out,{is_exceed:$}=h;if(m<e.lowerTick)j=!0;else if(m>e.upperTick)j=!1;else{const z=j===a?new g(w(e.input_amount).sub(M).toString()):new g(B),re=pt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,z,j,!0,0,new g(_)),ge=re.coinAmountA,bt=re.coinAmountB,Q=w(e.fix_amount_a?ge.toString():bt.toString()).add(M);console.log("1110 :",{preAmountTotal:Q.toString(),fixAmountA:j}),Q.greaterThanOrEqualTo(e.input_amount)&&(j=!j)}const J={swapInAmount:M,swapOutAmount:B,afterSqrtPrice:_,is_exceed:$,fixAmountA:j,routeObj:h.route_obj,request_id:e.request_id,use_Haedal_stake:!1};return console.log(J),J}async calculateHaedalDepositSwapAmount(e){const t=G.sqrtPriceX64ToTickIndex(new g(e.curSqrtPrice)),{ratioA:n,ratioB:i}=It.calculateDepositRatio(e.lowerTick,e.upperTick,new g(e.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...e,currentTick:t});const o=w(e.input_amount).mul(e.fix_amount_a?n:i),s=w(e.input_amount).sub(o);console.log("1110 ",{fixAmount:o.toString(),swapAmount:s.toString()});const r=e.fix_amount_a;if(s.toFixed(0)==="0")return null;if(e.stakeProtocol){if(ce.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||ce.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){const a=await this.calculateStakeDepositFixSui({inputSuiAmount:w(e.input_amount),swapSuiAmount:s,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:r?new K(s.toFixed(0)):new K(0),rightSuiAmount:r?new K(e.input_amount):new K(s.toFixed(0)),stakeProtocol:e.stakeProtocol});return a?{...a,request_id:e.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(e){const{clmm_pool:t,a2b:n,curSqrtPrice:i,amount_a:o,amount_b:s,lowerTick:r,upperTick:a,amount_left:c,amount_right:d,coinTypeA:l,coinTypeB:h,useRoute:_,priceSplitPoint:m,remainRate:y}=e,T=async(O,j,M)=>{const B=O.plus(j).div(2),$=await this.clmmPreSwap(t,i,n,B,l,h,!0,m,_);if($.amount_out==="0")return $;if($.after_sqrt_price||($.after_sqrt_price=e.curSqrtPrice),$.is_exceed)return j=B,T(O,j,M+1);const J=n?o.sub($.amount_in):o.add($.amount_out),z=n?s.add($.amount_out):s.sub($.amount_in),re=G.sqrtPriceX64ToTickIndex(new g($.after_sqrt_price)),ge=pt.estLiquidityAndcoinAmountFromOneAmounts(r,a,new g(J.toString()),!0,!0,1,new g($.after_sqrt_price)),bt=new K(ge.coinAmountA.toString()),Q=new K(ge.coinAmountB.toString());if(console.log("1110 swap ",{preRes:$,left:O.toString(),right:j.toString(),mid:B.toString(),afterPoolTickIndex:re,afterA:J.toString(),afterB:z.toString(),usedA:bt.toString(),usedB:toString(),count:M}),bt.toString()!==J.toString())throw new Error("usedA does not match afterA");if(z.lessThan(Q))n?O=B:j=B;else{n?j=B:O=B;const W=z.sub(Q),ue=z.mul(y);if(console.log("1110 amount ",{remainingB:W.toString(),maxRemainingB:ue.toString(),remainRate:y,count:M}),ue.sub(W).greaterThanOrEqualTo(0))return console.log("break"),{...$,remainingB:W}}return O.greaterThan(j)||j.sub(O).lessThan(10)?$:T(O,j,M+1)};return c.greaterThanOrEqualTo(d)?T(new K(0),c,0):T(c,d,0)}async clmmPreSwap(e,t,n,i,o,s,r,a,c,d){var j;if(c)try{const M=await this._sdk.ClmmSDK.RouterV2.getBestRouter(n?o:s,n?s:o,Number(i.toFixed(0)),r,a,"",void 0,void 0,!0,!1,d);if(!M.result)throw new Error("route unavailable");const{result:B}=M;let $=t;return B.splitPaths.forEach(J=>{const z=J.basePaths.find(re=>re.poolAddress.toLowerCase()===e.toLowerCase());z&&($=z.afterSqrtPrice.toString())}),{amount_in:B.inputAmount.toString(),amount_out:B.outputAmount.toString(),after_sqrt_price:$,is_exceed:B.isExceed,route_obj:B}}catch{throw new Error("route unavailable")}const{integrate:l,simulationAccount:h}=this.sdk.ClmmSDK.sdkOptions,_=new N,m=[o,s],y=[_.object(e),_.pure.bool(n),_.pure.bool(r),_.pure.u64(i.toFixed(0))];_.moveCall({target:`${l.published_at}::${qt}::calculate_swap_result`,arguments:y,typeArguments:m});const O=(j=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:h.address})).events)==null?void 0:j.filter(M=>D(M.type).name==="CalculatedSwapResultEvent");return O.length===0?null:O[0].parsedJson.data}async getVault(e,t=!1){const n=this.readPoolFromCache(e,t);if(n)return n;try{const i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),o=It.buildPool(i);if(o)return o.stake_protocol=this.findStakeProtocol(o.position.coinTypeA,o.position.coinTypeB),this.savePoolToCache(o),o}catch(i){console.log(i)}}async getVaultsConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.vaults,n=`${t}_getMirrorPoolConfigs`,i=this.getCache(n,e);if(i!==void 0)return i;const o=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::vaults::InitEvent`})).data,s={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(o.length>0){for(const r of o){const a=r.parsedJson;s.admin_cap_id=a.admin_cap_id,s.vaults_manager_id=a.manager_id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:s.vaults_manager_id,options:{showContent:!0}}),d=Y(c);s.vaults_pool_handle=d.vault_to_pool_maps.fields.id.id;break}this.updateCache(n,s,V)}return s}async getExchangeRateForStake(e,t,n){return e==="Haedal"?await as.getExchangeRateForStake(this._sdk,t,n):e==="Volo"?await cs.getExchangeRateForStake(this._sdk,t,n):e==="aftermath"?await ds.getExchangeRateForStake(this._sdk,t,n):"0"}requestStakeCoin(e,t,n){if(e==="Haedal")return as.requestStakeCoin(this._sdk,t,n);if(e==="Volo")return cs.requestStakeCoin(this._sdk,t,n);if(e==="aftermath")return ds.requestStakeCoin(this._sdk,t,n)}async requestStake(e,t,n){if(e==="Haedal")return await as.requestStake(this._sdk,t,n);if(e==="Volo")return await cs.requestStake(this._sdk,t,n);if(e==="aftermath")return await ds.requestStake(this._sdk,t,n)}updateCache(e,t,n=Mt){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},Yp=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getLimitOrderTokenList(){const{limit_order:e}=this._sdk.sdkOptions,{token_list_handle:t}=I(e),{fullClient:n}=this._sdk.ClmmSDK,o=(await n.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await n.batchGetObjects(o,{showContent:!0})).map(r=>{const{fields:a}=r.data.content;return{coin_type:D(a.name.fields.name).full_address,min_trade_amount:Number(a.value)}})}async getLimitOrderPoolList(){const{limit_order:e}=this._sdk.sdkOptions,{rate_orders_indexer_handle:t}=I(e),{fullClient:n}=this._sdk.ClmmSDK,o=(await n.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await n.batchGetObjects(o,{showContent:!0})).map(r=>{const{fields:a}=r.data.content.fields.value,c={pay_coin_type:D(a.pay_coin.fields.name).full_address,target_coin_type:D(a.target_coin.fields.name).full_address,indexer_id:a.indexer_id};return this._sdk.updateCache(`${c.pay_coin_type}_${c.target_coin_type}`,c.indexer_id),c})}async getPoolIndexerId(e,t){const n=this._sdk.getCache(`${e}_${t}`);try{if(n===void 0){const o=(await this.getLimitOrderPoolList()).filter(s=>D(s.pay_coin_type).full_address===D(e).full_address&&D(s.target_coin_type).full_address===D(t).full_address);if(o.length>0)return o[0].indexer_id}}catch{}return n}async getOwnerLimitOrderList(e,t){const{fullClient:n}=this._sdk.ClmmSDK,i={data:[],hasNextPage:!1};try{const o=await this.getUserIndexerHandle(e);if(!o)return i;const s=await n.getDynamicFieldsByPage(o,t);i.hasNextPage=s.hasNextPage,i.nextCursor=s.nextCursor;const r=s.data.map(d=>d.name.value),c=(await n.batchGetObjects(r,{showContent:!0})).map(d=>si.buildLimitOrderInfo(d)).filter(d=>d!==void 0);i.data=c}catch(o){console.log("Error in getOwnerLimitOrderList:",o)}return i}async getLimitOrderConfigs(){const{package_id:e}=this._sdk.sdkOptions.limit_order,t={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::limit_order::InitEvent`})).data;if(n.length>0){const o=n[0].parsedJson;t.rate_orders_indexer_id=o.rate_orders_indexer_id,t.user_orders_indexer_id=o.user_orders_indexer_id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rate_orders_indexer_id,options:{showContent:!0}});t.rate_orders_indexer_handle=Y(s).list.fields.id.id;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t.user_orders_indexer_id,options:{showContent:!0}});t.user_orders_indexer_handle=Y(r).indexer.fields.id.id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitFactoryEvent`})).data;if(i.length>0){const o=i[0].parsedJson;t.global_config_id=o.global_config_id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showContent:!0}}),r=Y(s);t.token_list_handle=r.token_white_list.fields.id.id}return t}async getLimitOrder(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.getObject({id:e,options:{showContent:!0}});return si.buildLimitOrderInfo(n)}catch(n){console.log("Error in getLimitOrder:",n);return}}async getLimitOrderLogs(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return n.data.forEach(o=>{i.push(...si.buildOrderLimitEvent(o,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}async getLimitOrderClaimLogs(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return n.data.forEach(o=>{i.push(...si.buildOrderLimitEvent(o,["ClaimTargetCoinEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}buildRateOrdersIndexerType(e){const{limit_order:t}=this._sdk.sdkOptions;return ro(`${t.package_id}::limit_order::RateOrdersIndexer`,[e.pay_coin_type,e.target_coin_type])}async placeLimitOrder(e){const{limit_order:t}=this._sdk.sdkOptions,{user_orders_indexer_id:n,global_config_id:i,rate_orders_indexer_id:o}=I(t),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.pay_coin_type),r=new N,a=await this.getPoolIndexerId(e.pay_coin_type,e.target_coin_type),c=X.buildCoinForAmount(r,s,BigInt(e.pay_coin_amount),e.pay_coin_type,!1,!0);return r.moveCall({target:`${t.published_at}::limit_order::${a===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[r.object(i),a===void 0?r.object(o):r.object(a),r.object(n),c.targetCoin,r.pure.u128(si.priceToRate(e.price,e.pay_decimal,e.target_decimal)),r.pure.u64(e.expired_ts),r.object(q)]}),r}async claimTargetCoin(e){const{limit_order:t}=this._sdk.sdkOptions,{global_config_id:n}=I(t),i=new N;return i.moveCall({target:`${t.published_at}::limit_order::claim_target_coin`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[i.object(n),i.object(e.order_id)]}),i}async cancelOrdersByOwner(e){const{limit_order:t}=this._sdk.sdkOptions,{global_config_id:n}=I(t),i=new N,o={};for(let s=0;s<e.length;s++){const r=e[s],a=await this.getPoolIndexerId(r.pay_coin_type,r.target_coin_type);if(a===void 0)throw Error("not found indexerId");o[r.order_id]=a}return e.forEach(s=>{i.moveCall({target:`${t.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[s.pay_coin_type,s.target_coin_type],arguments:[i.object(n),i.object(o[s.order_id]),i.object(s.order_id),i.object(q)]})}),i}async getUserIndexerHandle(e){const{fullClient:t}=this._sdk.ClmmSDK,{limit_order:n}=this._sdk.sdkOptions;let i=this.getUserIndexerHandleByCache(e);if(i===void 0){const o=new N;o.moveCall({target:`${n.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[o.pure.address(e),o.object(I(n).user_orders_indexer_id)]}),i=(await t.devInspectTransactionBlock({transactionBlock:o,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,i&&this.saveUserIndexerHandleByCache(e,i)}return i}getUserIndexerHandleByCache(e){const t=`getUserIndexerHandleByCache_${e}`;return this.getCache(t)}saveUserIndexerHandleByCache(e,t){const n=`getUserIndexerHandleByCache_${e}`;return this.updateCache(n,t)}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},e_=class{constructor(e){F(this,"_sdk");F(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){const{package_id:t}=this._sdk.sdkOptions.frams,n={data:[],hasNextPage:!1};try{const i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::pool::CreatePoolEvent`},e),o=i.data.map(s=>s.parsedJson.pool_id);if(n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor,o.length>0){const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showType:!0,showContent:!0});for(const r of s){const a=qi.buildFramsPool(r);a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(c=>c.reward_coin)),n.data.push(a),this.updateCache(a.id,a))}}}catch(i){console.log("getFramsPoolList error ",i)}return n}async getFramsPool(e,t=!1){const n=this.getCache(e,t);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),o=qi.buildFramsPool(i.data);return o&&(o.rewarders=await this.getFramsRewarderConfig(o.clmm_pool_id,o.rewarders.map(s=>s.reward_coin)),this.updateCache(o.id,o)),o}async getFramsRewarderConfig(e,t,n=!1){const{frams:i}=this._sdk.sdkOptions,o=[];for(const s of t){const r=`getFramsRewarderConfig_${s}_${e}`,a=this.getCache(r,n);if(a)o.push(a);else try{const c=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:I(i).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:Hc(s)}}),{fields:d}=c.data.content.fields.value.fields.value,l={reward_coin:s,last_reward_time:d.last_reward_time,emission_per_second:d.emission_per_second,total_allocate_point:d.total_allocate_point,allocate_point:""},h=d.pools.fields.id.id,_=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:h,name:{type:"0x2::object::ID",value:e}}),{allocate_point:m}=_.data.content.fields.value.fields.value.fields;l.allocate_point=m,this.updateCache(r,l),o.push(l)}catch(c){console.log(c)}}return o}async getOwnedFramsPositionNFTList(e,t=[],n=!1,i="all"){const{package_id:o}=this._sdk.sdkOptions.frams,s={data:[],hasNextPage:!1};let r={};const a=[],c=t.length>0,d=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${o}::pool::WrappedPositionNFT`},options:{showContent:!0}},i);s.hasNextPage=d.hasNextPage,s.nextCursor=d.nextCursor;for(const l of d.data){const h=qi.buildFramsPositionNFT(l);if(h)if(c){if(t.includes(h.pool_id)){a.push(h);let _=r[h.pool_id];_?_.push(h):_=[h],r[h.pool_id]=_}}else a.push(h)}if(n&&a.length>0){const l=await this.calculateFarmingRewards(a.map(h=>({pool_id:h.pool_id,position_nft_id:h.id,clmm_pool_id:h.clmm_pool_id})));c?(r={},a.forEach(h=>{l[h.id]&&(h.rewards=l[h.id]);let m=r[h.pool_id];m?m.push(h):m=[h],r[h.pool_id]=m})):a.forEach(h=>{l[h.id]&&(h.rewards=l[h.id])})}return c?r:(s.data=a,s)}async getFramsPositionNFT(e,t=!0){const n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),i=qi.buildFramsPositionNFT(n);if(t&&i){const o=await this.calculateFarmingRewards([{pool_id:i.pool_id,position_nft_id:i.id}]);o[i.id]&&(i.rewards=o[i.id])}return i}async calculateFarmingRewards(e){var r;const{frams:t}=this._sdk.sdkOptions,n=new N,{rewarder_manager_id:i,global_config_id:o}=I(t);e.forEach(a=>{n.moveCall({target:`${t.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[n.object(o),n.object(i),n.object(a.pool_id),n.pure.address(a.position_nft_id),n.object(q)]})});const s={};try{const a=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:this.sdk.ClmmSDK.senderAddress});console.log({simulateRes:a});const c=(r=a==null?void 0:a.events)==null?void 0:r.filter(d=>D(d.type).name==="AccumulatedPositionRewardsEvent");if(c&&c.length>0)for(let d=0;d<c.length;d+=1){const{parsedJson:l}=c[d],h=[];l.rewards.contents.forEach(_=>{h.push({rewarder_type:D(_.key.name).full_address,rewarder_amount:_.value})}),s[l.wrapped_position_id]=h}}catch(a){console.log(a)}return s}depositPayload(e,t){const{frams:n}=this.sdk.sdkOptions;t=t||new N;const{global_config_id:i,rewarder_manager_id:o}=I(n);return t.moveCall({target:`${n.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(i),t.object(o),t.object(e.pool_id),t.object(e.clmm_position_id),t.object(q)]}),t}async withdrawPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{global_config_id:i,rewarder_manager_id:o}=I(n);return t=t||new N,t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},t),t.moveCall({target:`${n.published_at}::router::withdraw`,typeArguments:[],arguments:[t.object(i),t.object(o),t.object(e.pool_id),t.object(e.position_nft_id),t.object(q)]}),t}async batchHarvestPayload(e,t){t=t||new N;for(const n of e)await this.harvestPayload(n,t);return t}async batchHarvestAndClmmFeePayload(e,t){if(!ht(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");const n=new N,i={},o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(const c of t)this.collectClmmFeeInternal(c,i,n,o),this.collectClmmRewardInternal(c,i,n,o);const{frams:s}=this.sdk.sdkOptions,{global_config_id:r,rewarder_manager_id:a}=I(s);for(const c of e){const d=await this.getFramsPool(c.pool_id,!1);if(d===void 0)throw Error(`not found ${c.pool_id}`);c.collect_fee&&this.collectFeeInternal(c,i,n,o),c.clmm_rewarder_types.length>0&&await this.collectRewardInternal(c,i,n,o),c.collect_frams_rewarder&&d.rewarders.forEach(l=>{n&&n.moveCall({target:`${s.published_at}::router::harvest`,typeArguments:[l.reward_coin],arguments:[n.object(r),n.object(a),n.object(c.pool_id),n.object(c.position_nft_id),n.object(q)]})})}return Object.keys(i).forEach(c=>{const d=i[c],l=d.originalSplitedCoin;(d.isMintZeroCoin||l&&(l==null?void 0:l.$kind)==="GasCoin")&&X.buildTransferCoin(this._sdk.ClmmSDK,n,d.targetCoin,c,this._sdk.ClmmSDK.senderAddress)}),n}async collectRewardInternal(e,t,n,i){const o=[];e.clmm_rewarder_types.forEach(s=>{const r=ke(s);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),r,!1),t[r]=a),o.push(a.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,n)}collectFeeInternal(e,t,n,i){const{frams:o}=this.sdk.sdkOptions,{global_config_id:s}=I(o),{clmm_pool:r,integrate:a}=this.sdk.ClmmSDK.sdkOptions,c=I(r),d=ke(e.coinTypeA),l=ke(e.coinTypeB);let h=t[d];h===void 0&&(h=X.buildCoinForAmount(n,i,BigInt(0),d,!1),t[d]=h);let _=t[l];_===void 0&&(_=X.buildCoinForAmount(n,i,BigInt(0),l,!1),t[l]=_),n.moveCall({target:`${a.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(s),n.object(c.global_config_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),h.targetCoin,_.targetCoin]})}collectClmmRewardInternal(e,t,n,i){const o=[];e.rewarder_coin_types.forEach(s=>{const r=ke(s);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),r,!1),t[r]=a),o.push(a.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,n,o)}collectClmmFeeInternal(e,t,n,i){if(e.collect_fee){const o=ke(e.coinTypeA),s=ke(e.coinTypeB);let r=t[o];r===void 0&&(r=X.buildCoinForAmount(n,i,BigInt(0),o,!1),t[o]=r);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),s,!1),t[s]=a),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},n,r.targetCoin,a.targetCoin)}}async harvestPayload(e,t){const{frams:n}=this.sdk.sdkOptions;t=t||new N;const i=await this.getFramsPool(e.pool_id,!1);if(i===void 0)throw Error(`not found ${e.pool_id}`);const{global_config_id:o,rewarder_manager_id:s}=I(n);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){const a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,a)}return i.rewarders.forEach(a=>{t&&t.moveCall({target:`${n.published_at}::router::harvest`,typeArguments:[a.reward_coin],arguments:[t.object(o),t.object(s),t.object(e.pool_id),t.object(e.position_nft_id),t.object(q)]})}),t}async claimFeeAndClmmReward(e){const t=new N,n=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,n),t}async openPositionAddLiquidityStakePaylod(e){const t=new N,{clmm_pool:n,integrate:i}=this._sdk.ClmmSDK.sdkOptions,o=I(n),s=t.moveCall({target:`${n.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(e.clmm_pool_id),t.pure.u32(Number(wt(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(wt(BigInt(e.tick_upper)).toString()))]}),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_b),e.coinTypeB,!1);t.moveCall({target:`${i.published_at}::${Sn}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(e.clmm_pool_id),s,a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(q)]});const{frams:d}=this.sdk.sdkOptions,{global_config_id:l,rewarder_manager_id:h}=I(d);return t.moveCall({target:`${d.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(l),t.object(h),t.object(e.pool_id),s,t.object(q)]}),t}async addLiquidityPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;const o=I(n),s=I(i),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_limit_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${n.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_limit_a),t.pure.u64(e.amount_limit_b),t.pure.u128(e.delta_liquidity),t.object(q)]}),t}async addLiquidityFixCoinPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;const o=I(n),s=I(i),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${n.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(q)]}),t}async removeLiquidityPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;const o=I(n),s=I(i);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.clmm_rewarder_types.length>0){const r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},t,r)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");t.moveCall({target:`${n.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(q)]})}else t.moveCall({target:`${n.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(q)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return t}async buildCollectRewarderAndFeeParams(e,t,n,i,o){i===void 0&&(i=[...n]),o===void 0&&(o=[...n]);const s=ke(e.coinTypeA),r=ke(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},t);const a=[];return e.clmm_rewarder_types.forEach(c=>{switch(ke(c)){case s:a.push(X.buildCoinForAmount(t,i,BigInt(0),c,!1).targetCoin);break;case r:a.push(X.buildCoinForAmount(t,o,BigInt(0),c,!1).targetCoin);break;default:a.push(X.buildCoinForAmount(t,n,BigInt(0),c,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:a},t),t}collectFeePayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;const o=I(n),s=I(i);return t.moveCall({target:`${n.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id)]}),t}async collectClmmRewardPayload(e,t){var a;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;let o=e.reward_coins;if(e.clmm_rewarder_types.length>0&&o===void 0){o=[];const c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(d=>{o.push(X.buildCoinForAmount(t,c,BigInt(0),d,!1).targetCoin)})}const s=I(n),r=I(i);return(a=e.clmm_rewarder_types)==null||a.forEach((c,d)=>{t&&t.moveCall({target:`${n.published_at}::router::collect_clmm_reward`,typeArguments:[c,e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(r.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(r.global_vault_id),o[d],t.object(q)]})}),t}async collectClmmRewardNoSendPayload(e,t){var c;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:o}=this.sdk.ClmmSDK.sdkOptions;let s=e.reward_coins;if(e.clmm_rewarder_types.length>0&&s===void 0){s=[];const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(l=>{s.push(X.buildCoinForAmount(t,d,BigInt(0),l,!1).targetCoin)})}const r=I(n),a=I(i);return(c=e.clmm_rewarder_types)==null||c.forEach((d,l)=>{t&&t.moveCall({target:`${o.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[d,e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(a.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(a.global_vault_id),s[l],t.object(q)]})}),t}async getFrarmsConfigs(){const{package_id:e}=this._sdk.sdkOptions.frams,t={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(n.length>0){const o=n[0].parsedJson;t.global_config_id=o.global_config_id,t.admin_cap_id=o.admin_cap_id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(i.length>0){const o=i[0].parsedJson;t.rewarder_manager_id=o.id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rewarder_manager_id,options:{showContent:!0}});t.rewarder_manager_handle=s.data.content.fields.rewarders.fields.id.id}return t}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},t_=class{constructor(e,t){F(this,"_cache",{});F(this,"_sdkOptions");F(this,"_launchpad");F(this,"_ido");F(this,"_xcetusModule");F(this,"_xtokenModule");F(this,"_boosterModule");F(this,"_makerModule");F(this,"_clmmSDK");F(this,"_liquidityStrategy");F(this,"_vaults");F(this,"_limitOrder");F(this,"_farmsModule");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new Fp(this),this._ido=new Hp(this),this._xcetusModule=new Kp(this),this._xtokenModule=new Jp(this),this._boosterModule=new Lp(this),this._makerModule=new Up(this),this._vaults=new Qp(this),this._limitOrder=new Yp(this),this._farmsModule=new e_(this),this._liquidityStrategy=new Zp(this),or(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}getVerifySenderAddress(){const{senderAddress:e}=this.ClmmSDK;if(e.length===0||!Zt(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new At(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},B_=t_;export{wi as $,Ul as A,w_ as B,pt as C,m_ as D,Na as E,qi as F,$d as G,y_ as H,v_ as I,k_ as J,Kl as K,tn as L,g_ as M,Ia as N,Zt as O,b_ as P,ci as Q,Br as R,Ns as S,G as T,Nl as U,oe as V,Fl as W,On as X,he as Y,Ba as Z,Ct as _,$p as a,Mi as a$,bc as a0,le as a1,N as a2,Vt as a3,xn as a4,Ae as a5,Ai as a6,fn as a7,ie as a8,me as a9,d_ as aA,St as aB,a_ as aC,__ as aD,f_ as aE,Zd as aF,zs as aG,fc as aH,_n as aI,ft as aJ,Pt as aK,hn as aL,uc as aM,_e as aN,_t as aO,Vs as aP,ho as aQ,eo as aR,Ot as aS,to as aT,Rr as aU,ms as aV,C_ as aW,S_ as aX,A_ as aY,l_ as aZ,u_ as a_,Cu as aa,Eu as ab,bs as ac,yu as ad,$c as ae,Fh as af,Eh as ag,Lh as ah,qc as ai,T_ as aj,ke as ak,ut as al,E_ as am,pp as an,si as ao,It as ap,Qd as aq,Wd as ar,Wn as as,ps as at,Sa as au,c_ as av,h_ as aw,Gn as ax,Ta as ay,p_ as az,g as b,r_ as c,t_ as d,Di as e,Bi as f,j_ as g,Li as h,jr as i,Nd as j,Ca as k,Aa as l,Tl as m,O_ as n,x_ as o,w as p,D as q,ud as r,B_ as s,I_ as t,s_ as u,P_ as v,js as w,X as x,Jn as y,M_ as z};
