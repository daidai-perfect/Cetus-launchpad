import{p as R,c as g}from"./index.9e94cc31.js";import{ab as b,m as h}from"./entry.bd76aa8a.js";import{h as S,R as T}from"./common.d439d58b.js";import{f as y}from"./fetchFun.ff4aae28.js";const d=b("SuiRateStore",{state:()=>({allRateObj:{},allRateList:[]}),getters:{getTokenRate:e=>r=>{var t,s;return(s=(t=e.allRateObj)==null?void 0:t[r])==null?void 0:s.price}},actions:{setRateObj(e){this.allRateObj={...this.allRateObj,...e}},setRateList(e){this.allRateList=e;const r=Object.fromEntries(e.map(t=>{var o;return[(o=R(t.base_symbol))==null?void 0:o.full_address,t]}));this.setRateObj(r)}}});function v(){const e=d(),{setRateList:r}=e,t=h(()=>e.allRateObj),s=async()=>{try{const{prices:a}=await y(`${g.Sui.api}/v2/sui/market_price`);return a}catch(a){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:13 ~ fetchRates ~ error:",a)}};return{getRateList:async()=>{const a=await s();a&&r(a)},getTokenRatePrice:(a,i,f)=>{var c,u,l;if(!i)return"--";const m=(c=R(a))==null?void 0:c.full_address,n=(l=(u=t==null?void 0:t.value)==null?void 0:u[m])==null?void 0:l.price;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:37 ~ getTokenRatePrice ~ allRateObj?.value:",t==null?void 0:t.value),!n)return"--";const p=S(i).mul(n).toString();return T(p,f??2,!1)}}}export{v as u};
