import{l as k,m as w,e as L,o as l,f as c,x as m,h as s,v as x,i as r,Y as X,D as A,z as B,w as S,j as y,B as I,p as T,k as D}from"./entry.7dcfbd3d.js";import"./index.c581952a.js";import{u as M,d as N,c as W,g as U}from"./index.33b6d0c7.js";import{u as E,p as f,c as R}from"./pool.3fc49680.js";import{u as _}from"./useWhale.d0286035.js";import{D as b}from"./decimal.0bdeb344.js";import{_ as C}from"./xWHALE-icon.2df34cd4.js";const V={props:{haveLoading:{type:Boolean,default:!1,require:!1},icon:{type:String,default:""},label:{type:String,default:""},value:{type:String,default:"--"},symbolName:{type:String,default:""}},setup(t){const{t:n}=k(),e=M(),a=w(()=>e);return{t:n,wallet:a}}},F=""+new URL("icon-My-total-xWHALE_2x.a8c79cfa.png",import.meta.url).href,O=""+new URL("icon-Available-xWHALE_2x.26264052.png",import.meta.url).href,q=""+new URL("icon-Redeeming-xWHALE_2x.12af0f21.png",import.meta.url).href;const P={class:"icon-text"},j={key:0,src:F,alt:""},H={key:1,src:O,alt:""},G={key:2,src:q,alt:""},z={class:"text"},Y={class:"label"},J={key:0,class:"text-loading"},K={key:1};function Q(t,n,e,a,d,h){const o=X;return l(),c("div",P,[e.label.includes("My total xCETUS")?(l(),c("img",j)):e.label.includes("Available")?(l(),c("img",H)):e.label.includes("Redeeming")?(l(),c("img",G)):m("",!0),s("div",z,[s("span",Y,x(e.label),1),e.value=="--"&&a.wallet.address?(l(),c("div",J,[r(o,{loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})])):(l(),c("p",K,x(e.value?e.value:"")+" "+x(e.symbolName),1))])])}const Z=L(V,[["render",Q],["__scopeId","data-v-14e56b37"]]),$=A("xcetus",{state:()=>({venft_id:"",xWhaleBalance:"--",venftInfo:{},pendingAmount:"--",newPendingAmount:"--",whaleBalance:"--",ownerLocks:[],availableXwhale:"--",redeemingXwhale:"--",nextStartTime:"",xcetusShare:"--",pendingCoinInfo:{},newPendingCoinInfo:{},cetusApr:"",claimLoading:"",dividendManagerInfo:{},rewardCoin:{},rewardCoinAmount:"--",xcetusRewardList:[],phaseDividendInfoBonus:[],treasury:"",isSuccessForGetVeNFTDividendInfo:!1}),getters:{getPoolStore(){return E()}},actions:{async getOwnerVeNFT(t){const n=_("Sui");try{const e=await n.getOwnerVeNFT(t);console.log("ðŸš€ ~ file: xcetus.ts:46 ~ getOwnerVeNFT ~ result:",e),e?(this.venft_id=e.id,this.xWhaleBalance=f(e.xcetus_balance,9),this.venftInfo={id:e.id,type:e.type,index:e.index,xcetus_balance:e.xcetus_balance},this.getOwnerLockCetuss(t)):(this.xWhaleBalance="0",this.availableXwhale="0",this.redeemingXwhale="0",this.pendingAmount="0",this.newPendingAmount="0")}catch(e){console.log("ðŸš€ ~ file: xcetus.ts:65 ~ getOwnerVeNFT ~ e:",e),this.xWhaleBalance="--",this.availableXwhale="--",this.redeemingXwhale="--",this.pendingAmount="--",this.newPendingAmount="--"}},async getVeNFTDividendInfo(){const t=_("Sui"),n=R("Sui");try{const e=await t.getVeNFTDividendInfo(this.venft_id,this.dividendManagerInfo),a=await t.getPeriod(this.dividendManagerInfo),d=await n.getSuiTokenObj();this.isSuccessForGetVeNFTDividendInfo=!0,console.log(a,"===>period"),console.log(e,"===>result");const h=[];if(e&&e.rewards&&e.rewards.length>0){for(let o=0;o<e.rewards.length;o++)if(e.rewards[o].period<a){const i=e.rewards[o].rewards;for(let u=0;u<i.length;u++){const g=i[u];Number(g.amount)>0&&h.push({...g})}}if(h&&h.length>0){const o={};for(let u=0;u<h.length;u++){const g=h[u];if(o[g.coin_type])o[g.coin_type].amount=new b(o[g.coin_type].amount).add(new b(g.amount)).toString();else{let p=d[g.coin_type];p||(console.log("ðŸš€ ~ file: xcetus.ts:131 ~ getVeNFTDividendInfo ~ tokenInfo:",p),p=(await n.getTokenListByCoinType([g.coin_type]))[0]),o[g.coin_type]={...g,...p}}}const i=Object.values(o).map(u=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: xcetus.ts:141 ~ constrewardArr:any=Object.values ~ ele:",u),{...u,amount:N(u.amount).div(Math.pow(10,u.decimals))}));this.xcetusRewardList=i,console.log(i,"===>rewardArr")}else this.xcetusRewardList=[]}else this.xcetusRewardList=[]}catch(e){console.log("ðŸš€ðŸš€ðŸš€ ~ file: xcetus.ts:184 ~ getVeNFTDividendInfo ~ e:",e),this.isSuccessForGetVeNFTDividendInfo=!1,this.xcetusRewardList=[]}},async getDividendManager(){console.log("ðŸš€ðŸš€ðŸš€ ~ file: xcetus.ts:190 ~ getDividendManager ~ getDividendManager:");const n=await _("Sui").getDividendManager();this.nextStartTime=n.nextStartTime,this.dividendManagerInfo=n},async getAccountWhaleBalance(t){const e=await _("Sui").getOwnerCetusCoins(t);if(console.log(e,"==>assets"),e&&e.length>0){let a=new b(0);e.forEach(d=>{console.log(f(d.balance.toString(),9),"===>prettyAmount(ele.balance.toString(), 9)"),a=a.add(f(d.balance.toString(),9))}),console.log(this.whaleBalance,"===>this.whaleBalance"),this.whaleBalance=a}else this.whaleBalance="0"},async getOwnerLockCetuss(t){const e=await _("Sui").getOwnerLockCetuss(t);console.log(e,"assets===>");const a=e.sort((d,h)=>d.locked_until_time-h.locked_until_time);this.ownerLocks=a,console.log(this.ownerLocks,"===>this.ownerLocks"),this.setClaimLoading(""),this.getAvailableXCetus()},async getAvailableXCetus(){const t=_("Sui");console.log(this.ownerLocks,"==>this.ownerLocks");const n=await t.getAvailableXCetus(this.venftInfo,this.ownerLocks);console.log(n,"==>result1111"),console.log(this.ownerLocks&&this.ownerLocks.length==0,this.venftInfo,"##this.ownerLocks&&this.ownerLocks.length== 0"),this.availableXwhale=this.ownerLocks&&this.ownerLocks.length==0?f(this.venftInfo.xcetus_balance,9):f(n,9),console.log(this.xWhaleBalance,"===>this.xWhaleBalance"),console.log(this.availableXwhale,"===>this.availableXwhale"),this.redeemingXwhale=this.xWhaleBalance!=="--"?new b(this.xWhaleBalance).sub(new b(this.availableXwhale)).toString():"0"},async getMyShare(t){const n=_("Sui");try{const e=await n.getMyShare(t);e?(this.xcetusShare=Number(e)>0&&Number(e)<.01?"<0.01":e,console.log(e,"result===>124")):this.xcetusShare="0"}catch(e){console.log(e,"e===>"),this.xcetusShare=""}},async getXcetusApr(){console.log("ðŸš€ ~ file: xcetus.ts:269 ~ getXcetusApr ~ getXcetusApr start:");try{const t=_("Sui"),n=await t.getPhaseDividendInfo(this.dividendManagerInfo);if(n&&n.bonus&&n.bonus.length>0){this.phaseDividendInfoBonus=n.bonus;const e=await t.getXcetusManager();this.treasury=e.treasury}}catch(t){console.log("getXcetusApr error",t);const{data:n}=await fetch(`${W.Sui.api}/v2/sui/storm/dividend_rewards`).then(a=>a.json()),e=n.apr&&n.apr.replace("%","");this.cetusApr=Number(e)>0&&Number(e)<.01?"<0.01":e}},loginOut(){this.venft_id="",this.xWhaleBalance="--",this.venftInfo={},this.pendingAmount="--",this.whaleBalance="--",this.ownerLocks=[],this.availableXwhale="--",this.redeemingXwhale="--",this.xcetusShare="--",this.xcetusRewardList=[]},setClaimLoading(t){this.claimLoading=t},setCetusApr(t){this.cetusApr=t}}}),ee={props:{title:{type:String,default:""}},setup(t){const{t:n}=k(),e=w(()=>t.title=="LP Leaderboard"?"50% of the platform fee dividend is used for bonus distribution":t.title=="Dashboard"?"Manage your CETUS and xCETUS":t.title=="Liquidity Lockup"?"Lock your position, boost liquidity mining yield up to 2.5x.":""),a=$(),d=w(()=>a),h=w(()=>d.value.redeemingXwhale),o=w(()=>d.value.availableXwhale),i=w(()=>d.value.xWhaleBalance);return{t:n,headTitle:e,xWhaleBalance:i,availableXwhale:o,redeemingXwhale:h,addCommom:U}}},te=""+new URL("img-H5banner-leaderboard.61effe4e.png",import.meta.url).href,ae=""+new URL("img-Liquidity-Lockup.48471df1.png",import.meta.url).href,ne=""+new URL("banner-Dashboard-h5.8a7678c2.png",import.meta.url).href;const v=t=>(T("data-v-bdb29549"),t=t(),D(),t),se={class:"leaderboard-banner"},ie={key:0,src:te,alt:""},oe={key:1,src:ae,alt:""},le={key:2,src:ne,alt:""},ce={class:"navigation-top"},re={class:"title-lage"},de=["href"],ue=v(()=>s("div",{class:"more"},"Learn more",-1)),he=v(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on1"})],-1)),ge=[ue,he],_e={key:0,class:"leaderboard-bot"},me={class:"bot-left"},we=v(()=>s("img",{src:C,alt:""},null,-1)),ve=v(()=>s("div",{class:"pending-bonus"},[s("p",null,"My pending bonus"),s("span",null,"55.431 xCETUS")],-1)),fe=v(()=>s("div",{class:"bot-right"},[s("p",null,"Next epoch"),s("div",{class:"epoch-time"},[s("span",null,"12"),y(" : "),s("span",null,"23"),y(" : "),s("span",null,"22"),y(" : "),s("span",null,"45")])],-1)),be={key:1,class:"navigation-bot"},xe={key:2,class:"liquidity-bot"},ye={key:0,class:"navigation-bot-h5"},pe={key:1,class:"eaderboard-bot-h5"},Se=v(()=>s("div",null,[s("img",{src:C,alt:""}),s("div",{class:"pending-bonus"},[s("p",null,"My pending bonus"),s("span",null,"55.431 xCETUS")])],-1)),ke={key:2,class:"liquidity-bot-h5"};function Le(t,n,e,a,d,h){const o=I,i=Z;return l(),c("div",null,[s("div",se,[e.title.includes("Leaderboard")?(l(),c("img",ie)):e.title.includes("Liquidity")?(l(),c("img",oe)):(l(),c("img",le)),s("div",{class:B(["navigation",e.title.includes("Leaderboard")?"leaderboard":e.title.includes("Liquidity")?"liquidity":e.title])},[s("div",ce,[s("p",null,x(e.title),1),s("div",re,x(a.headTitle),1),s("a",{href:e.title.includes("Dashboard")?"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus":"##",class:"link",target:"_blank"},ge,8,de)]),e.title.includes("Leaderboard")?(l(),c("div",_e,[s("div",me,[we,ve,r(o,{loading:!1},{default:S(()=>[y(" Claim All ")]),_:1})]),fe])):m("",!0),e.title.includes("Dashboard")?(l(),c("div",be,[r(i,{label:"My total xCETUS",value:a.xWhaleBalance>0?a.addCommom(a.xWhaleBalance):a.xWhaleBalance},null,8,["value"]),r(i,{label:"Available xCETUS",value:a.availableXwhale>0?a.addCommom(a.availableXwhale):a.availableXwhale},null,8,["value"]),r(i,{label:"Redeeming xCETUS",value:a.redeemingXwhale>0?a.addCommom(a.redeemingXwhale):a.redeemingXwhale},null,8,["value"])])):m("",!0),e.title.includes("Liquidity")?(l(),c("div",xe,[r(i,{label:"My total locked",value:"$100.12"}),r(i,{label:"Pending rewards (xCETUS)",value:"55.431"})])):m("",!0)],2)]),e.title.includes("Dashboard")?(l(),c("div",ye,[r(i,{label:"My total xCETUS",value:a.xWhaleBalance},null,8,["value"]),r(i,{label:"Available xCETUS",value:a.availableXwhale},null,8,["value"]),r(i,{label:"Redeeming xCETUS",value:a.redeemingXwhale},null,8,["value"])])):m("",!0),e.title.includes("Leaderboard")?(l(),c("div",pe,[Se,r(o,{loading:!1},{default:S(()=>[y(" Claim All ")]),_:1})])):m("",!0),e.title.includes("Liquidity")?(l(),c("div",ke,[r(i,{label:"My total locked",value:"$100.12"}),r(i,{label:"Pending rewards (xCETUS)",value:"55.431"})])):m("",!0)])}const Me=L(ee,[["render",Le],["__scopeId","data-v-bdb29549"]]);export{Me as _,$ as u};
