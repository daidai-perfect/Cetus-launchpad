import{_ as ka}from"./back.e6ace76c.js";import{_ as wa,a as Ca}from"./token-warning-modal.6cbe14cd.js";import{_ as Pa,a as _a}from"./network-tips.6b6801d1.js";import{u as bn,_ as Qt}from"./index.81c50e20.js";import{u as Nt,c as Nn,D,a as Yo,d as Be,b as $t,n as qo,e as Ve,t as $o,g as Uo,f as Ia,s as Vt,p as Ni,h as Wn,i as Mi}from"./pool.eb3e226c.js";import{a as kn,r as R,y as vo,C as $a,m as te,D as Ie,b as Go,e as wn,o as w,f as S,h as m,v as $,i as be,z as Me,c as we,x as B,p as tt,k as ot,q as mo,t as vn,I as hr,E as gr,w as Oe,S as yr,u as ye,j as ze,B as Qo,G as Aa,H as Li,F as Kn,s as Ct,J as br,M as kr,K as wr,l as Sa,L as Ta}from"./entry.07e73a81.js";import{i as Qe}from"./import-icon.de3e6c66.js";import{_ as Na}from"./assets-card.b8e67621.js";import{_ as Cr,a as Pr,b as Ma,c as La}from"./add-or-create.f0b4bb0c.js";/* empty css              *//* empty css              */import{_ as Ra}from"./apr-tab.742867bf.js";import{_ as qa}from"./apr-tips.fb7f0203.js";/* empty css              */import{p as Ua}from"./precision.a7a6c57b.js";import{_ as Oa}from"./coin-select.736f3662.js";import{_ as Ba}from"./status-block.81e3c9dd.js";import{_ as _r}from"./icon-arrow_2x.948aedb2.js";import{_ as Ir}from"./icon-arrow_2x.4ffddb8e.js";/* empty css              */import{u as Ea}from"./notifi.a07d8053.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.db1d5178.js";/* empty css              */import"./index.ce51a602.js";import"./img-no-Positions_2x.e6d7f657.js";const Fa=kn({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const t=R(!1),o=R(null),i=R(0),r=R(20),a=Nt(),l=bn(),s=R(!1);vo(()=>{}),$a(()=>{clearInterval(o.value)});const u=()=>{o.value=setInterval(()=>{var _;s.value||i.value<r.value&&(i.value+=1,i.value===r.value&&((_=e==null?void 0:e.poolInfo)!=null&&_.poolAddress&&a.updateCurrentPools(e.poolInfo.poolAddress,l.chainName),i.value=0))},1e3)},v=te(()=>l.slippage),h=()=>{n.emit("clearAll")},k=()=>{i.value=0,n.emit("clickRefresh")};Ie(()=>e.poolInfo,_=>{_&&!o.value&&u()},{immediate:!0});const q=Go();return{clickRefresh:k,isShowSwapSetting:t,countdown:i,autoRefreshTime:r,slippage:v,clearAll:h,checkNullObj:Nn,router:q}}});const Da=e=>(tt("data-v-f484e6e0"),e=e(),ot(),e),ja={class:"title"},Ha={class:"left"},Xa=Da(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),za={class:"deposit-progress"};function Va(e,n,t,o,i,r){var s,u;const a=wa,l=Pa;return w(),S("div",ja,[m("div",Ha,[m("span",null,$(e.poolInfo?e.$t("common.concentratedLiquidity"):(u=(s=e.$route)==null?void 0:s.query)!=null&&u.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),m("div",{class:Me(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[m("div",{class:"slippage-icon",onClick:n[0]||(n[0]=v=>e.isShowSwapSetting=!0)},[Xa,m("span",null,$(e.slippage)+"%",1)]),m("div",za,[be(a,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])],2),e.isShowSwapSetting?(w(),we(l,{key:0,onOnClose:n[1]||(n[1]=v=>e.isShowSwapSetting=!1)})):B("",!0)])}const Wa=wn(Fa,[["render",Va],["__scopeId","data-v-f484e6e0"]]);const Ka=kn({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const n=bn(),t=te(()=>n),o=R(""),i=R(""),r=R(""),a=Nt(),l=te(()=>a);Ie(()=>[e.coin,l.value.tokensObj],([u,v])=>{var h;u?(i.value=v&&v[u.address]&&((h=v[u.address])==null?void 0:h.labels),o.value=u.name,r.value=u.symbol):(i.value="",o.value="",r.value="")},{immediate:!0,deep:!0});const s=te(()=>{var u,v,h;return e.coinIcon||((h=(v=l==null?void 0:l.value)==null?void 0:v.tokensObj[(u=e.coin)==null?void 0:u.address])==null?void 0:h.logo_url)||(t.value.theme==="default"?Qe("/image/coins/unknown.png"):Qe("/image/coins/sui-unknown.png"))});return{store:t,importIcon:Qe,coinName:o,coinLabels:i,coinSymbol:r,currentIcon:s}}}),Ya=e=>(tt("data-v-1d5b1b83"),e=e(),ot(),e),Ga={class:"coin-block"},Qa={class:"coin-info"},Ja={class:"symbol"},Za={key:0,class:"name"},xa=Ya(()=>m("div",null,[m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_on"})])],-1));function el(e,n,t,o,i,r){const a=mo("image");return w(),S("div",Ga,[m("div",null,[vn(m("img",null,null,512),[[a,e.currentIcon]]),m("div",Qa,[m("div",Ja,$(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(w(),S("div",Za,$(e.coin.name)+" "+$(e.coinLabels?`(${e.coinLabels})`:""),1)):B("",!0)])]),xa])}const nl=wn(Ka,[["render",el],["__scopeId","data-v-1d5b1b83"]]),tl=kn({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})}},setup(){const e=bn();return{storeIndex:te(()=>e)}}});const ol={class:"unilateral"},il={key:0,src:Cr,alt:""},rl={key:1,src:Pr,alt:""},al={key:2};function ll(e,n,t,o,i,r){return w(),S("div",ol,[m("div",null,[e.storeIndex.theme=="default"?(w(),S("img",il)):(w(),S("img",rl)),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),S("p",al,$(e.$t("tips.marketprice")),1)):B("",!0)])])}const sl=wn(tl,[["render",ll],["__scopeId","data-v-d81a96c0"]]),ul=kn({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=bn();return{storeIndex:te(()=>e)}}});const cl={class:"create-pool-lock"},dl={key:0,src:Cr,alt:""},fl={key:1,src:Pr,alt:""};function pl(e,n,t,o,i,r){return w(),S("div",cl,[m("div",null,[e.storeIndex.theme=="default"?(w(),S("img",dl)):(w(),S("img",fl))])])}const vl=wn(ul,[["render",pl],["__scopeId","data-v-5d070e17"]]),ml=kn({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,n){const t=R("");return{inpValue:t,changecurrentPrice:i=>{var a;console.log(i.target.value,"e.target.value"),console.log((a=e.fromCoin)==null?void 0:a.decimals,"==>props.fromCoin?.decimals");const r=new RegExp("[^\\d-]*(\\d*(?:\\.\\d*)?).*$");i.target.value=i.target.value.replace(r,"$1"),t.value=i.target.value,console.log(t.value,"===>inpValue.value"),n.emit("changecurrentPrice",t.value)}}}});const hl={class:"set-init-price"},gl={class:"init-price-tips"};function yl(e,n,t,o,i,r){var l,s,u,v;const a=hr;return w(),S("div",hl,[be(a,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((s=(l=e.$route)==null?void 0:l.query)!=null&&s.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),m("div",gl,$((u=e.toCoin)==null?void 0:u.symbol)+" per "+$((v=e.fromCoin)==null?void 0:v.symbol),1)])}const bl=wn(ml,[["render",yl],["__scopeId","data-v-9e71be9e"]]),kl=-443636;function Ri(e,n){const t=wl(e),o=(t-kl)%n;return o>n/2?t-o+n:t-o}const $r=new D("1.0001");function wl(e){return e.log($r).toDP(0,D.ROUND_HALF_UP).toNumber()}function qi(e){return $r.pow(e)}const Cl=kn({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const t=R(""),o=R("");let i=R(""),r=R("");const a=gr(),l=bn(),s=te(()=>l),u=te(()=>s.value.chainName?Yo(s.value.chainName):{}),v=()=>{if(Number.isNaN(t.value)||Number(t.value)!==0&&!t.value||!e.poolInfo.tickSpacing)return;const f=Ri(new D(t.value.toString()),Number(_.value.tickSpacing)),A=qi(f+Number(_.value.tickSpacing));if(e.pType=="Min"&&Number(A.toString())>=Number(r.value.toString()))return;const C=A.toString();n.emit("onInput",C)},h=()=>{if(Number.isNaN(t.value)||!t.value||!e.poolInfo.tickSpacing)return;const f=Ri(new D(t.value),Number(_.value.tickSpacing)),A=qi(f-Number(_.value.tickSpacing)),C=A.toString();e.pType=="Max"&&Number(A)<=Number(i.value)||n.emit("onInput",C)},k=f=>{let A=f.toString().replace(/[^\d.]/g,"");const C=/^\d+(\.\d+)?$/;A.split(".").length>2&&!C.exec(A)&&(A=A.substr(0,A.length-1)),o.value=String(A),console.log(A,"v===>")},q=f=>{var G,ne,me,ee;const{TickUtil:A,TickMath:C,getNearestTickByTick:y}=u.value;console.log("0519###onBlur###event###",f);const p=f.target.value;console.log("0519###onBlur###value###",p);let b;if(p==="0"){b=-443636,n.emit("onInput","0");return}else{const T=C.priceToTickIndex(new D(p),(G=_.value.token_a)==null?void 0:G.decimals,(ne=_.value.token_b)==null?void 0:ne.decimals);console.log("0519###onBlur###t###",T),b=y(Number(T),Number(_.value.tickSpacing))}console.log("0519###onBlur###tick###",b);const O=C.tickIndexToPrice(new D(b),(me=_.value.token_a)==null?void 0:me.decimals,(ee=_.value.token_b)==null?void 0:ee.decimals);console.log("0519###onBlur###price###",O.toString()),n.emit("onInput",O.toString())};Ie(()=>e.defaultMinPrice,(f,A)=>{f!==A&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),i.value=e.defaultMinPrice,console.log(i.value,"props.minPrice.value===>"))},{immediate:!0}),Ie(()=>e.defaultMaxPrice,(f,A)=>{f!==A&&(r.value=e.defaultMaxPrice)},{immediate:!0}),Ie(()=>o.value,f=>{console.log(f,"=sdajlaksjdkldas")},{immediate:!0}),Ie(()=>[e.inputValue,a.query.action],([f])=>{if(console.log(f,"==>newValue"),f&&f!=="0"&&f!=="∞"){t.value=f;const C=f.toString().split(".")[1];o.value=f!=="0"&&f!=="∞"&&C&&C.length>6?Be(f.toString(),6):f.toString()}else(f=="0"||f=="∞"||a.query.action)&&(o.value=f);console.log(o.value,"===> oValue.value")},{immediate:!0});const _=R({});Ie(()=>e.poolInfo,(f,A)=>{f&&(_.value=f)},{immediate:!0});const ce=R("");return Ie(()=>e.currentPriceTab,f=>{ce.value=f},{immediate:!0}),console.log(e,"props=======>"),{addPrice:v,minusPrice:h,oValue:o,changeValue:k,isDisabled:ce,route:a,onBlur:q}}});const Pl={class:"set-price-item"},_l={class:"title"},Il={class:"input-box"},$l={class:"minus-btn"},Al=["disabled"],Sl={class:"plus-btn"};function Tl(e,n,t,o,i,r){const a=hr,l=yr;return w(),S("div",Pl,[m("div",_l,$(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),be(l,{loading:e.loading,active:"",paragraph:!1},{default:Oe(()=>[m("div",Il,[m("a",$l,[m("div",{class:Me(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:n[0]||(n[0]=(...s)=>e.minusPrice&&e.minusPrice(...s))},null,10,Al)]),be(a,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=s=>e.oValue=s),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=s=>e.changeValue(s.target.value)),onBlur:n[3]||(n[3]=s=>e.onBlur(s))},null,8,["value","disabled"]),m("a",Sl,[m("div",{class:Me(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[4]||(n[4]=(...s)=>e.addPrice&&e.addPrice(...s))},null,2)])])]),_:1},8,["loading"]),m("p",{class:Me(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},$(e.toCoin&&e.toCoin.symbol)+" per "+$(e.fromCoin&&e.fromCoin.symbol),3)])}const Ui=wn(Cl,[["render",Tl],["__scopeId","data-v-b9504efe"]]),Nl=kn({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let t=R(""),o=R(""),i=R(),r=R(!1),a=R(!1);const l=R({}),s=bn(),u=te(()=>s);vo(()=>{t.value=e.min,o.value=e.max}),Ie(()=>e.currentPriceTab,(f,A)=>{f!==A&&(i.value=e.currentPriceTab)},{immediate:!0}),Ie(()=>e.min,(f,A)=>{f!==A&&(t.value=f,console.log(e.min,"===> props.min"))}),Ie(()=>e.max,(f,A)=>{f!==A&&(o.value=f)}),Ie(()=>e.poolInfo,(f,A)=>{f&&(l.value=f)},{immediate:!0});const v=R("");Ie(()=>e.intPrice,f=>{console.log(e.intPrice,"===>props.intPrice"),v.value=f},{immediate:!0,deep:!0});const h=f=>{console.log(f,"val===>123"),t.value=f,n.emit("onChangeMinPrice",f)},k=f=>{o.value=f,n.emit("onChangeMaxPrice",f)};Ie(r,(f,A)=>{f!==A&&n.emit("onChangeFullRange",f)});const q=()=>{t.value=e.defaultMinPrice,o.value=e.defaultMaxPrice,a.value=!1,r.value=!1},_=()=>{a.value=!1,t.value="0",o.value="∞"};return Ie(r,(f,A)=>{f!==A&&n.emit("onChangeFullRange",f)}),{store:u,changeMinPrice:h,changeMaxPrice:k,importIcon:Qe,resetPrice:q,changeShowUnderStand:()=>{r.value=!r.value,r.value?a.value=!0:q(),a.value||(t.value=e.defaultMinPrice,o.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:t,maxPrice:o,understand:_,isRadio:r,initPirce:v}}});const Ml={class:"set-price"},Ll={class:"card-container"},Rl={key:0,class:"card"},ql=["src"],Ul={key:1,class:"understand"},Ol={class:"left"},Bl={class:"right"};function El(e,n,t,o,i,r){const a=Ui,l=Ui,s=Qo;return w(),S("div",Ml,[m("div",Ll,[e.showUnderStand?(w(),S("div",Ul,[m("div",Ol,[m("p",null,$(e.$t("common.lowerEfficiency")),1),m("p",null,$(e.$t("common.lowerEfficiencyTips")),1)]),m("div",Bl,[be(s,{onClick:e.understand},{default:Oe(()=>[ze($(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(w(),S("div",Rl,[be(a,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),be(l,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),m("img",{src:("importIcon"in e?e.importIcon:ye(Qe))("/image/lmg-line@2x.png"),alt:""},null,8,ql)]))])])}const Fl=wn(Nl,[["render",El],["__scopeId","data-v-d07618c3"]]);function Jt(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Dl(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Ar(e){let n,t,o;e.length!==2?(n=Jt,t=(l,s)=>Jt(e(l),s),o=(l,s)=>e(l)-s):(n=e===Jt||e===Dl?e:jl,t=e,o=e);function i(l,s,u=0,v=l.length){if(u<v){if(n(s,s)!==0)return v;do{const h=u+v>>>1;t(l[h],s)<0?u=h+1:v=h}while(u<v)}return u}function r(l,s,u=0,v=l.length){if(u<v){if(n(s,s)!==0)return v;do{const h=u+v>>>1;t(l[h],s)<=0?u=h+1:v=h}while(u<v)}return u}function a(l,s,u=0,v=l.length){const h=i(l,s,u,v-1);return h>u&&o(l[h-1],s)>-o(l[h],s)?h-1:h}return{left:i,center:a,right:r}}function jl(){return 0}function Hl(e){return e===null?NaN:+e}const Xl=Ar(Jt),zl=Xl.right;Ar(Hl).center;const Vl=zl;class Oi extends Map{constructor(n,t=Yl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),n!=null)for(const[o,i]of n)this.set(o,i)}get(n){return super.get(Bi(this,n))}has(n){return super.has(Bi(this,n))}set(n,t){return super.set(Wl(this,n),t)}delete(n){return super.delete(Kl(this,n))}}function Bi({_intern:e,_key:n},t){const o=n(t);return e.has(o)?e.get(o):t}function Wl({_intern:e,_key:n},t){const o=n(t);return e.has(o)?e.get(o):(e.set(o,t),t)}function Kl({_intern:e,_key:n},t){const o=n(t);return e.has(o)&&(t=e.get(o),e.delete(o)),t}function Yl(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Gl=Math.sqrt(50),Ql=Math.sqrt(10),Jl=Math.sqrt(2);function to(e,n,t){const o=(n-e)/Math.max(0,t),i=Math.floor(Math.log10(o)),r=o/Math.pow(10,i),a=r>=Gl?10:r>=Ql?5:r>=Jl?2:1;let l,s,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(e*u),s=Math.round(n*u),l/u<e&&++l,s/u>n&&--s,u=-u):(u=Math.pow(10,i)*a,l=Math.round(e/u),s=Math.round(n/u),l*u<e&&++l,s*u>n&&--s),s<l&&.5<=t&&t<2?to(e,n,t*2):[l,s,u]}function Zl(e,n,t){if(n=+n,e=+e,t=+t,!(t>0))return[];if(e===n)return[e];const o=n<e,[i,r,a]=o?to(n,e,t):to(e,n,t);if(!(r>=i))return[];const l=r-i+1,s=new Array(l);if(o)if(a<0)for(let u=0;u<l;++u)s[u]=(r-u)/-a;else for(let u=0;u<l;++u)s[u]=(r-u)*a;else if(a<0)for(let u=0;u<l;++u)s[u]=(i+u)/-a;else for(let u=0;u<l;++u)s[u]=(i+u)*a;return s}function Oo(e,n,t){return n=+n,e=+e,t=+t,to(e,n,t)[2]}function xl(e,n,t){n=+n,e=+e,t=+t;const o=n<e,i=o?Oo(n,e,t):Oo(e,n,t);return(o?-1:1)*(i<0?1/-i:i)}function es(e,n){let t;if(n===void 0)for(const o of e)o!=null&&(t<o||t===void 0&&o>=o)&&(t=o);else{let o=-1;for(let i of e)(i=n(i,++o,e))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function ns(e,n,t){e=+e,n=+n,t=(i=arguments.length)<2?(n=e,e=0,1):i<3?1:+t;for(var o=-1,i=Math.max(0,Math.ceil((n-e)/t))|0,r=new Array(i);++o<i;)r[o]=e+o*t;return r}var ts={value:()=>{}};function Jo(){for(var e=0,n=arguments.length,t={},o;e<n;++e){if(!(o=arguments[e]+"")||o in t||/[\s.]/.test(o))throw new Error("illegal type: "+o);t[o]=[]}return new Zt(t)}function Zt(e){this._=e}function os(e,n){return e.trim().split(/^|\s+/).map(function(t){var o="",i=t.indexOf(".");if(i>=0&&(o=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:o}})}Zt.prototype=Jo.prototype={constructor:Zt,on:function(e,n){var t=this._,o=os(e+"",t),i,r=-1,a=o.length;if(arguments.length<2){for(;++r<a;)if((i=(e=o[r]).type)&&(i=is(t[i],e.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++r<a;)if(i=(e=o[r]).type)t[i]=Ei(t[i],e.name,n);else if(n==null)for(i in t)t[i]=Ei(t[i],e.name,null);return this},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new Zt(e)},call:function(e,n){if((i=arguments.length-2)>0)for(var t=new Array(i),o=0,i,r;o<i;++o)t[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(n,t)}};function is(e,n){for(var t=0,o=e.length,i;t<o;++t)if((i=e[t]).name===n)return i.value}function Ei(e,n,t){for(var o=0,i=e.length;o<i;++o)if(e[o].name===n){e[o]=ts,e=e.slice(0,o).concat(e.slice(o+1));break}return t!=null&&e.push({name:n,value:t}),e}var Bo="http://www.w3.org/1999/xhtml";const Fi={svg:"http://www.w3.org/2000/svg",xhtml:Bo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ho(e){var n=e+="",t=n.indexOf(":");return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),Fi.hasOwnProperty(n)?{space:Fi[n],local:e}:e}function rs(e){return function(){var n=this.ownerDocument,t=this.namespaceURI;return t===Bo&&n.documentElement.namespaceURI===Bo?n.createElement(e):n.createElementNS(t,e)}}function as(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Sr(e){var n=ho(e);return(n.local?as:rs)(n)}function ls(){}function Zo(e){return e==null?ls:function(){return this.querySelector(e)}}function ss(e){typeof e!="function"&&(e=Zo(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,l=o[i]=new Array(a),s,u,v=0;v<a;++v)(s=r[v])&&(u=e.call(s,s.__data__,v,r))&&("__data__"in s&&(u.__data__=s.__data__),l[v]=u);return new mn(o,this._parents)}function us(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cs(){return[]}function Tr(e){return e==null?cs:function(){return this.querySelectorAll(e)}}function ds(e){return function(){return us(e.apply(this,arguments))}}function fs(e){typeof e=="function"?e=ds(e):e=Tr(e);for(var n=this._groups,t=n.length,o=[],i=[],r=0;r<t;++r)for(var a=n[r],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(o.push(e.call(s,s.__data__,u,a)),i.push(s));return new mn(o,i)}function Nr(e){return function(){return this.matches(e)}}function Mr(e){return function(n){return n.matches(e)}}var ps=Array.prototype.find;function vs(e){return function(){return ps.call(this.children,e)}}function ms(){return this.firstElementChild}function hs(e){return this.select(e==null?ms:vs(typeof e=="function"?e:Mr(e)))}var gs=Array.prototype.filter;function ys(){return Array.from(this.children)}function bs(e){return function(){return gs.call(this.children,e)}}function ks(e){return this.selectAll(e==null?ys:bs(typeof e=="function"?e:Mr(e)))}function ws(e){typeof e!="function"&&(e=Nr(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,l=o[i]=[],s,u=0;u<a;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&l.push(s);return new mn(o,this._parents)}function Lr(e){return new Array(e.length)}function Cs(){return new mn(this._enter||this._groups.map(Lr),this._parents)}function oo(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}oo.prototype={constructor:oo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ps(e){return function(){return e}}function _s(e,n,t,o,i,r){for(var a=0,l,s=n.length,u=r.length;a<u;++a)(l=n[a])?(l.__data__=r[a],o[a]=l):t[a]=new oo(e,r[a]);for(;a<s;++a)(l=n[a])&&(i[a]=l)}function Is(e,n,t,o,i,r,a){var l,s,u=new Map,v=n.length,h=r.length,k=new Array(v),q;for(l=0;l<v;++l)(s=n[l])&&(k[l]=q=a.call(s,s.__data__,l,n)+"",u.has(q)?i[l]=s:u.set(q,s));for(l=0;l<h;++l)q=a.call(e,r[l],l,r)+"",(s=u.get(q))?(o[l]=s,s.__data__=r[l],u.delete(q)):t[l]=new oo(e,r[l]);for(l=0;l<v;++l)(s=n[l])&&u.get(k[l])===s&&(i[l]=s)}function $s(e){return e.__data__}function As(e,n){if(!arguments.length)return Array.from(this,$s);var t=n?Is:_s,o=this._parents,i=this._groups;typeof e!="function"&&(e=Ps(e));for(var r=i.length,a=new Array(r),l=new Array(r),s=new Array(r),u=0;u<r;++u){var v=o[u],h=i[u],k=h.length,q=Ss(e.call(v,v&&v.__data__,u,o)),_=q.length,ce=l[u]=new Array(_),f=a[u]=new Array(_),A=s[u]=new Array(k);t(v,h,ce,f,A,q,n);for(var C=0,y=0,p,b;C<_;++C)if(p=ce[C]){for(C>=y&&(y=C+1);!(b=f[y])&&++y<_;);p._next=b||null}}return a=new mn(a,o),a._enter=l,a._exit=s,a}function Ss(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ts(){return new mn(this._exit||this._groups.map(Lr),this._parents)}function Ns(e,n,t){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(i=n(i),i&&(i=i.selection())),t==null?r.remove():t(r),o&&i?o.merge(i).order():i}function Ms(e){for(var n=e.selection?e.selection():e,t=this._groups,o=n._groups,i=t.length,r=o.length,a=Math.min(i,r),l=new Array(i),s=0;s<a;++s)for(var u=t[s],v=o[s],h=u.length,k=l[s]=new Array(h),q,_=0;_<h;++_)(q=u[_]||v[_])&&(k[_]=q);for(;s<i;++s)l[s]=t[s];return new mn(l,this._parents)}function Ls(){for(var e=this._groups,n=-1,t=e.length;++n<t;)for(var o=e[n],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function Rs(e){e||(e=qs);function n(h,k){return h&&k?e(h.__data__,k.__data__):!h-!k}for(var t=this._groups,o=t.length,i=new Array(o),r=0;r<o;++r){for(var a=t[r],l=a.length,s=i[r]=new Array(l),u,v=0;v<l;++v)(u=a[v])&&(s[v]=u);s.sort(n)}return new mn(i,this._parents).order()}function qs(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Us(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Os(){return Array.from(this)}function Bs(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function Es(){let e=0;for(const n of this)++e;return e}function Fs(){return!this.node()}function Ds(e){for(var n=this._groups,t=0,o=n.length;t<o;++t)for(var i=n[t],r=0,a=i.length,l;r<a;++r)(l=i[r])&&e.call(l,l.__data__,r,i);return this}function js(e){return function(){this.removeAttribute(e)}}function Hs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xs(e,n){return function(){this.setAttribute(e,n)}}function zs(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function Vs(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function Ws(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function Ks(e,n){var t=ho(e);if(arguments.length<2){var o=this.node();return t.local?o.getAttributeNS(t.space,t.local):o.getAttribute(t)}return this.each((n==null?t.local?Hs:js:typeof n=="function"?t.local?Ws:Vs:t.local?zs:Xs)(t,n))}function Rr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ys(e){return function(){this.style.removeProperty(e)}}function Gs(e,n,t){return function(){this.style.setProperty(e,n,t)}}function Qs(e,n,t){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,t)}}function Js(e,n,t){return arguments.length>1?this.each((n==null?Ys:typeof n=="function"?Qs:Gs)(e,n,t??"")):vt(this.node(),e)}function vt(e,n){return e.style.getPropertyValue(n)||Rr(e).getComputedStyle(e,null).getPropertyValue(n)}function Zs(e){return function(){delete this[e]}}function xs(e,n){return function(){this[e]=n}}function eu(e,n){return function(){var t=n.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function nu(e,n){return arguments.length>1?this.each((n==null?Zs:typeof n=="function"?eu:xs)(e,n)):this.node()[e]}function qr(e){return e.trim().split(/^|\s+/)}function xo(e){return e.classList||new Ur(e)}function Ur(e){this._node=e,this._names=qr(e.getAttribute("class")||"")}Ur.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Or(e,n){for(var t=xo(e),o=-1,i=n.length;++o<i;)t.add(n[o])}function Br(e,n){for(var t=xo(e),o=-1,i=n.length;++o<i;)t.remove(n[o])}function tu(e){return function(){Or(this,e)}}function ou(e){return function(){Br(this,e)}}function iu(e,n){return function(){(n.apply(this,arguments)?Or:Br)(this,e)}}function ru(e,n){var t=qr(e+"");if(arguments.length<2){for(var o=xo(this.node()),i=-1,r=t.length;++i<r;)if(!o.contains(t[i]))return!1;return!0}return this.each((typeof n=="function"?iu:n?tu:ou)(t,n))}function au(){this.textContent=""}function lu(e){return function(){this.textContent=e}}function su(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function uu(e){return arguments.length?this.each(e==null?au:(typeof e=="function"?su:lu)(e)):this.node().textContent}function cu(){this.innerHTML=""}function du(e){return function(){this.innerHTML=e}}function fu(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function pu(e){return arguments.length?this.each(e==null?cu:(typeof e=="function"?fu:du)(e)):this.node().innerHTML}function vu(){this.nextSibling&&this.parentNode.appendChild(this)}function mu(){return this.each(vu)}function hu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gu(){return this.each(hu)}function yu(e){var n=typeof e=="function"?e:Sr(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function bu(){return null}function ku(e,n){var t=typeof e=="function"?e:Sr(e),o=n==null?bu:typeof n=="function"?n:Zo(n);return this.select(function(){return this.insertBefore(t.apply(this,arguments),o.apply(this,arguments)||null)})}function wu(){var e=this.parentNode;e&&e.removeChild(this)}function Cu(){return this.each(wu)}function Pu(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function _u(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Iu(e){return this.select(e?_u:Pu)}function $u(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Au(e){return function(n){e.call(this,n,this.__data__)}}function Su(e){return e.trim().split(/^|\s+/).map(function(n){var t="",o=n.indexOf(".");return o>=0&&(t=n.slice(o+1),n=n.slice(0,o)),{type:n,name:t}})}function Tu(e){return function(){var n=this.__on;if(n){for(var t=0,o=-1,i=n.length,r;t<i;++t)r=n[t],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):n[++o]=r;++o?n.length=o:delete this.__on}}}function Nu(e,n,t){return function(){var o=this.__on,i,r=Au(n);if(o){for(var a=0,l=o.length;a<l;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=t),i.value=n;return}}this.addEventListener(e.type,r,t),i={type:e.type,name:e.name,value:n,listener:r,options:t},o?o.push(i):this.__on=[i]}}function Mu(e,n,t){var o=Su(e+""),i,r=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,v;s<u;++s)for(i=0,v=l[s];i<r;++i)if((a=o[i]).type===v.type&&a.name===v.name)return v.value}return}for(l=n?Nu:Tu,i=0;i<r;++i)this.each(l(o[i],n,t));return this}function Er(e,n,t){var o=Rr(e),i=o.CustomEvent;typeof i=="function"?i=new i(n,t):(i=o.document.createEvent("Event"),t?(i.initEvent(n,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(n,!1,!1)),e.dispatchEvent(i)}function Lu(e,n){return function(){return Er(this,e,n)}}function Ru(e,n){return function(){return Er(this,e,n.apply(this,arguments))}}function qu(e,n){return this.each((typeof n=="function"?Ru:Lu)(e,n))}function*Uu(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}var Fr=[null];function mn(e,n){this._groups=e,this._parents=n}function Mt(){return new mn([[document.documentElement]],Fr)}function Ou(){return this}mn.prototype=Mt.prototype={constructor:mn,select:ss,selectAll:fs,selectChild:hs,selectChildren:ks,filter:ws,data:As,enter:Cs,exit:Ts,join:Ns,merge:Ms,selection:Ou,order:Ls,sort:Rs,call:Us,nodes:Os,node:Bs,size:Es,empty:Fs,each:Ds,attr:Ks,style:Js,property:nu,classed:ru,text:uu,html:pu,raise:mu,lower:gu,append:yu,insert:ku,remove:Cu,clone:Iu,datum:$u,on:Mu,dispatch:qu,[Symbol.iterator]:Uu};function An(e){return typeof e=="string"?new mn([[document.querySelector(e)]],[document.documentElement]):new mn([[e]],Fr)}function Bu(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Di(e,n){if(e=Bu(e),n===void 0&&(n=e.currentTarget),n){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[e.clientX-i.left-n.clientLeft,e.clientY-i.top-n.clientTop]}}return[e.pageX,e.pageY]}const Eo={capture:!0,passive:!1};function Fo(e){e.preventDefault(),e.stopImmediatePropagation()}function Eu(e){var n=e.document.documentElement,t=An(e).on("dragstart.drag",Fo,Eo);"onselectstart"in n?t.on("selectstart.drag",Fo,Eo):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Fu(e,n){var t=e.document.documentElement,o=An(e).on("dragstart.drag",null);n&&(o.on("click.drag",Fo,Eo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in t?o.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function ei(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function Dr(e,n){var t=Object.create(e.prototype);for(var o in n)t[o]=n[o];return t}function Lt(){}var At=.7,io=1/At,pt="\\s*([+-]?\\d+)\\s*",St="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Du=/^#([0-9a-f]{3,8})$/,ju=new RegExp(`^rgb\\(${pt},${pt},${pt}\\)$`),Hu=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),Xu=new RegExp(`^rgba\\(${pt},${pt},${pt},${St}\\)$`),zu=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${St}\\)$`),Vu=new RegExp(`^hsl\\(${St},${Mn},${Mn}\\)$`),Wu=new RegExp(`^hsla\\(${St},${Mn},${Mn},${St}\\)$`),ji={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ei(Lt,et,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Hi,formatHex:Hi,formatHex8:Ku,formatHsl:Yu,formatRgb:Xi,toString:Xi});function Hi(){return this.rgb().formatHex()}function Ku(){return this.rgb().formatHex8()}function Yu(){return jr(this).formatHsl()}function Xi(){return this.rgb().formatRgb()}function et(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=Du.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?zi(n):t===3?new dn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?Wt(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?Wt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=ju.exec(e))?new dn(n[1],n[2],n[3],1):(n=Hu.exec(e))?new dn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Xu.exec(e))?Wt(n[1],n[2],n[3],n[4]):(n=zu.exec(e))?Wt(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Vu.exec(e))?Ki(n[1],n[2]/100,n[3]/100,1):(n=Wu.exec(e))?Ki(n[1],n[2]/100,n[3]/100,n[4]):ji.hasOwnProperty(e)?zi(ji[e]):e==="transparent"?new dn(NaN,NaN,NaN,0):null}function zi(e){return new dn(e>>16&255,e>>8&255,e&255,1)}function Wt(e,n,t,o){return o<=0&&(e=n=t=NaN),new dn(e,n,t,o)}function Gu(e){return e instanceof Lt||(e=et(e)),e?(e=e.rgb(),new dn(e.r,e.g,e.b,e.opacity)):new dn}function Do(e,n,t,o){return arguments.length===1?Gu(e):new dn(e,n,t,o??1)}function dn(e,n,t,o){this.r=+e,this.g=+n,this.b=+t,this.opacity=+o}ei(dn,Do,Dr(Lt,{brighter(e){return e=e==null?io:Math.pow(io,e),new dn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new dn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dn(xn(this.r),xn(this.g),xn(this.b),ro(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vi,formatHex:Vi,formatHex8:Qu,formatRgb:Wi,toString:Wi}));function Vi(){return`#${Zn(this.r)}${Zn(this.g)}${Zn(this.b)}`}function Qu(){return`#${Zn(this.r)}${Zn(this.g)}${Zn(this.b)}${Zn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wi(){const e=ro(this.opacity);return`${e===1?"rgb(":"rgba("}${xn(this.r)}, ${xn(this.g)}, ${xn(this.b)}${e===1?")":`, ${e})`}`}function ro(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zn(e){return e=xn(e),(e<16?"0":"")+e.toString(16)}function Ki(e,n,t,o){return o<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new Sn(e,n,t,o)}function jr(e){if(e instanceof Sn)return new Sn(e.h,e.s,e.l,e.opacity);if(e instanceof Lt||(e=et(e)),!e)return new Sn;if(e instanceof Sn)return e;e=e.rgb();var n=e.r/255,t=e.g/255,o=e.b/255,i=Math.min(n,t,o),r=Math.max(n,t,o),a=NaN,l=r-i,s=(r+i)/2;return l?(n===r?a=(t-o)/l+(t<o)*6:t===r?a=(o-n)/l+2:a=(n-t)/l+4,l/=s<.5?r+i:2-r-i,a*=60):l=s>0&&s<1?0:a,new Sn(a,l,s,e.opacity)}function Ju(e,n,t,o){return arguments.length===1?jr(e):new Sn(e,n,t,o??1)}function Sn(e,n,t,o){this.h=+e,this.s=+n,this.l=+t,this.opacity=+o}ei(Sn,Ju,Dr(Lt,{brighter(e){return e=e==null?io:Math.pow(io,e),new Sn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new Sn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,o=t+(t<.5?t:1-t)*n,i=2*t-o;return new dn(Ao(e>=240?e-240:e+120,i,o),Ao(e,i,o),Ao(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Sn(Yi(this.h),Kt(this.s),Kt(this.l),ro(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ro(this.opacity);return`${e===1?"hsl(":"hsla("}${Yi(this.h)}, ${Kt(this.s)*100}%, ${Kt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yi(e){return e=(e||0)%360,e<0?e+360:e}function Kt(e){return Math.max(0,Math.min(1,e||0))}function Ao(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}const ni=e=>()=>e;function Zu(e,n){return function(t){return e+t*n}}function xu(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(o){return Math.pow(e+o*n,t)}}function ec(e){return(e=+e)==1?Hr:function(n,t){return t-n?xu(n,t,e):ni(isNaN(n)?t:n)}}function Hr(e,n){var t=n-e;return t?Zu(e,t):ni(isNaN(e)?n:e)}const ao=function e(n){var t=ec(n);function o(i,r){var a=t((i=Do(i)).r,(r=Do(r)).r),l=t(i.g,r.g),s=t(i.b,r.b),u=Hr(i.opacity,r.opacity);return function(v){return i.r=a(v),i.g=l(v),i.b=s(v),i.opacity=u(v),i+""}}return o.gamma=e,o}(1);function nc(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,o=n.slice(),i;return function(r){for(i=0;i<t;++i)o[i]=e[i]*(1-r)+n[i]*r;return o}}function tc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function oc(e,n){var t=n?n.length:0,o=e?Math.min(t,e.length):0,i=new Array(o),r=new Array(t),a;for(a=0;a<o;++a)i[a]=go(e[a],n[a]);for(;a<t;++a)r[a]=n[a];return function(l){for(a=0;a<o;++a)r[a]=i[a](l);return r}}function ic(e,n){var t=new Date;return e=+e,n=+n,function(o){return t.setTime(e*(1-o)+n*o),t}}function $n(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function rc(e,n){var t={},o={},i;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in e?t[i]=go(e[i],n[i]):o[i]=n[i];return function(r){for(i in t)o[i]=t[i](r);return o}}var jo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,So=new RegExp(jo.source,"g");function ac(e){return function(){return e}}function lc(e){return function(n){return e(n)+""}}function Xr(e,n){var t=jo.lastIndex=So.lastIndex=0,o,i,r,a=-1,l=[],s=[];for(e=e+"",n=n+"";(o=jo.exec(e))&&(i=So.exec(n));)(r=i.index)>t&&(r=n.slice(t,r),l[a]?l[a]+=r:l[++a]=r),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:$n(o,i)})),t=So.lastIndex;return t<n.length&&(r=n.slice(t),l[a]?l[a]+=r:l[++a]=r),l.length<2?s[0]?lc(s[0].x):ac(n):(n=s.length,function(u){for(var v=0,h;v<n;++v)l[(h=s[v]).i]=h.x(u);return l.join("")})}function go(e,n){var t=typeof n,o;return n==null||t==="boolean"?ni(n):(t==="number"?$n:t==="string"?(o=et(n))?(n=o,ao):Xr:n instanceof et?ao:n instanceof Date?ic:tc(n)?nc:Array.isArray(n)?oc:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?rc:$n)(e,n)}function sc(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var Gi=180/Math.PI,Ho={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zr(e,n,t,o,i,r){var a,l,s;return(a=Math.sqrt(e*e+n*n))&&(e/=a,n/=a),(s=e*t+n*o)&&(t-=e*s,o-=n*s),(l=Math.sqrt(t*t+o*o))&&(t/=l,o/=l,s/=l),e*o<n*t&&(e=-e,n=-n,s=-s,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(n,e)*Gi,skewX:Math.atan(s)*Gi,scaleX:a,scaleY:l}}var Yt;function uc(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Ho:zr(n.a,n.b,n.c,n.d,n.e,n.f)}function cc(e){return e==null||(Yt||(Yt=document.createElementNS("http://www.w3.org/2000/svg","g")),Yt.setAttribute("transform",e),!(e=Yt.transform.baseVal.consolidate()))?Ho:(e=e.matrix,zr(e.a,e.b,e.c,e.d,e.e,e.f))}function Vr(e,n,t,o){function i(u){return u.length?u.pop()+" ":""}function r(u,v,h,k,q,_){if(u!==h||v!==k){var ce=q.push("translate(",null,n,null,t);_.push({i:ce-4,x:$n(u,h)},{i:ce-2,x:$n(v,k)})}else(h||k)&&q.push("translate("+h+n+k+t)}function a(u,v,h,k){u!==v?(u-v>180?v+=360:v-u>180&&(u+=360),k.push({i:h.push(i(h)+"rotate(",null,o)-2,x:$n(u,v)})):v&&h.push(i(h)+"rotate("+v+o)}function l(u,v,h,k){u!==v?k.push({i:h.push(i(h)+"skewX(",null,o)-2,x:$n(u,v)}):v&&h.push(i(h)+"skewX("+v+o)}function s(u,v,h,k,q,_){if(u!==h||v!==k){var ce=q.push(i(q)+"scale(",null,",",null,")");_.push({i:ce-4,x:$n(u,h)},{i:ce-2,x:$n(v,k)})}else(h!==1||k!==1)&&q.push(i(q)+"scale("+h+","+k+")")}return function(u,v){var h=[],k=[];return u=e(u),v=e(v),r(u.translateX,u.translateY,v.translateX,v.translateY,h,k),a(u.rotate,v.rotate,h,k),l(u.skewX,v.skewX,h,k),s(u.scaleX,u.scaleY,v.scaleX,v.scaleY,h,k),u=v=null,function(q){for(var _=-1,ce=k.length,f;++_<ce;)h[(f=k[_]).i]=f.x(q);return h.join("")}}}var dc=Vr(uc,"px, ","px)","deg)"),fc=Vr(cc,", ",")",")"),mt=0,Pt=0,wt=0,Wr=1e3,lo,_t,so=0,nt=0,yo=0,Tt=typeof performance=="object"&&performance.now?performance:Date,Kr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ti(){return nt||(Kr(pc),nt=Tt.now()+yo)}function pc(){nt=0}function uo(){this._call=this._time=this._next=null}uo.prototype=Yr.prototype={constructor:uo,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?ti():+t)+(n==null?0:+n),!this._next&&_t!==this&&(_t?_t._next=this:lo=this,_t=this),this._call=e,this._time=t,Xo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xo())}};function Yr(e,n,t){var o=new uo;return o.restart(e,n,t),o}function vc(){ti(),++mt;for(var e=lo,n;e;)(n=nt-e._time)>=0&&e._call.call(void 0,n),e=e._next;--mt}function Qi(){nt=(so=Tt.now())+yo,mt=Pt=0;try{vc()}finally{mt=0,hc(),nt=0}}function mc(){var e=Tt.now(),n=e-so;n>Wr&&(yo-=n,so=e)}function hc(){for(var e,n=lo,t,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:lo=t);_t=e,Xo(o)}function Xo(e){if(!mt){Pt&&(Pt=clearTimeout(Pt));var n=e-nt;n>24?(e<1/0&&(Pt=setTimeout(Qi,e-Tt.now()-yo)),wt&&(wt=clearInterval(wt))):(wt||(so=Tt.now(),wt=setInterval(mc,Wr)),mt=1,Kr(Qi))}}function Ji(e,n,t){var o=new uo;return n=n==null?0:+n,o.restart(i=>{o.stop(),e(i+n)},n,t),o}var gc=Jo("start","end","cancel","interrupt"),yc=[],Gr=0,Zi=1,zo=2,xt=3,xi=4,Vo=5,eo=6;function bo(e,n,t,o,i,r){var a=e.__transition;if(!a)e.__transition={};else if(t in a)return;bc(e,t,{name:n,index:o,group:i,on:gc,tween:yc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Gr})}function oi(e,n){var t=Tn(e,n);if(t.state>Gr)throw new Error("too late; already scheduled");return t}function Ln(e,n){var t=Tn(e,n);if(t.state>xt)throw new Error("too late; already running");return t}function Tn(e,n){var t=e.__transition;if(!t||!(t=t[n]))throw new Error("transition not found");return t}function bc(e,n,t){var o=e.__transition,i;o[n]=t,t.timer=Yr(r,0,t.time);function r(u){t.state=Zi,t.timer.restart(a,t.delay,t.time),t.delay<=u&&a(u-t.delay)}function a(u){var v,h,k,q;if(t.state!==Zi)return s();for(v in o)if(q=o[v],q.name===t.name){if(q.state===xt)return Ji(a);q.state===xi?(q.state=eo,q.timer.stop(),q.on.call("interrupt",e,e.__data__,q.index,q.group),delete o[v]):+v<n&&(q.state=eo,q.timer.stop(),q.on.call("cancel",e,e.__data__,q.index,q.group),delete o[v])}if(Ji(function(){t.state===xt&&(t.state=xi,t.timer.restart(l,t.delay,t.time),l(u))}),t.state=zo,t.on.call("start",e,e.__data__,t.index,t.group),t.state===zo){for(t.state=xt,i=new Array(k=t.tween.length),v=0,h=-1;v<k;++v)(q=t.tween[v].value.call(e,e.__data__,t.index,t.group))&&(i[++h]=q);i.length=h+1}}function l(u){for(var v=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(s),t.state=Vo,1),h=-1,k=i.length;++h<k;)i[h].call(e,v);t.state===Vo&&(t.on.call("end",e,e.__data__,t.index,t.group),s())}function s(){t.state=eo,t.timer.stop(),delete o[n];for(var u in o)return;delete e.__transition}}function Wo(e,n){var t=e.__transition,o,i,r=!0,a;if(t){n=n==null?null:n+"";for(a in t){if((o=t[a]).name!==n){r=!1;continue}i=o.state>zo&&o.state<Vo,o.state=eo,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete t[a]}r&&delete e.__transition}}function kc(e){return this.each(function(){Wo(this,e)})}function wc(e,n){var t,o;return function(){var i=Ln(this,e),r=i.tween;if(r!==t){o=t=r;for(var a=0,l=o.length;a<l;++a)if(o[a].name===n){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function Cc(e,n,t){var o,i;if(typeof t!="function")throw new Error;return function(){var r=Ln(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var l={name:n,value:t},s=0,u=i.length;s<u;++s)if(i[s].name===n){i[s]=l;break}s===u&&i.push(l)}r.tween=i}}function Pc(e,n){var t=this._id;if(e+="",arguments.length<2){for(var o=Tn(this.node(),t).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((n==null?wc:Cc)(t,e,n))}function ii(e,n,t){var o=e._id;return e.each(function(){var i=Ln(this,o);(i.value||(i.value={}))[n]=t.apply(this,arguments)}),function(i){return Tn(i,o).value[n]}}function Qr(e,n){var t;return(typeof n=="number"?$n:n instanceof et?ao:(t=et(n))?(n=t,ao):Xr)(e,n)}function _c(e){return function(){this.removeAttribute(e)}}function Ic(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $c(e,n,t){var o,i=t+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=n(o=a,t)}}function Ac(e,n,t){var o,i=t+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=n(o=a,t)}}function Sc(e,n,t){var o,i,r;return function(){var a,l=t(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===o&&s===i?r:(i=s,r=n(o=a,l)))}}function Tc(e,n,t){var o,i,r;return function(){var a,l=t(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===o&&s===i?r:(i=s,r=n(o=a,l)))}}function Nc(e,n){var t=ho(e),o=t==="transform"?fc:Qr;return this.attrTween(e,typeof n=="function"?(t.local?Tc:Sc)(t,o,ii(this,"attr."+e,n)):n==null?(t.local?Ic:_c)(t):(t.local?Ac:$c)(t,o,n))}function Mc(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}function Lc(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}function Rc(e,n){var t,o;function i(){var r=n.apply(this,arguments);return r!==o&&(t=(o=r)&&Lc(e,r)),t}return i._value=n,i}function qc(e,n){var t,o;function i(){var r=n.apply(this,arguments);return r!==o&&(t=(o=r)&&Mc(e,r)),t}return i._value=n,i}function Uc(e,n){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;var o=ho(e);return this.tween(t,(o.local?Rc:qc)(o,n))}function Oc(e,n){return function(){oi(this,e).delay=+n.apply(this,arguments)}}function Bc(e,n){return n=+n,function(){oi(this,e).delay=n}}function Ec(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Oc:Bc)(n,e)):Tn(this.node(),n).delay}function Fc(e,n){return function(){Ln(this,e).duration=+n.apply(this,arguments)}}function Dc(e,n){return n=+n,function(){Ln(this,e).duration=n}}function jc(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Fc:Dc)(n,e)):Tn(this.node(),n).duration}function Hc(e,n){if(typeof n!="function")throw new Error;return function(){Ln(this,e).ease=n}}function Xc(e){var n=this._id;return arguments.length?this.each(Hc(n,e)):Tn(this.node(),n).ease}function zc(e,n){return function(){var t=n.apply(this,arguments);if(typeof t!="function")throw new Error;Ln(this,e).ease=t}}function Vc(e){if(typeof e!="function")throw new Error;return this.each(zc(this._id,e))}function Wc(e){typeof e!="function"&&(e=Nr(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,l=o[i]=[],s,u=0;u<a;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&l.push(s);return new jn(o,this._parents,this._name,this._id)}function Kc(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,t=e._groups,o=n.length,i=t.length,r=Math.min(o,i),a=new Array(o),l=0;l<r;++l)for(var s=n[l],u=t[l],v=s.length,h=a[l]=new Array(v),k,q=0;q<v;++q)(k=s[q]||u[q])&&(h[q]=k);for(;l<o;++l)a[l]=n[l];return new jn(a,this._parents,this._name,this._id)}function Yc(e){return(e+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||n==="start"})}function Gc(e,n,t){var o,i,r=Yc(n)?oi:Ln;return function(){var a=r(this,e),l=a.on;l!==o&&(i=(o=l).copy()).on(n,t),a.on=i}}function Qc(e,n){var t=this._id;return arguments.length<2?Tn(this.node(),t).on.on(e):this.each(Gc(t,e,n))}function Jc(e){return function(){var n=this.parentNode;for(var t in this.__transition)if(+t!==e)return;n&&n.removeChild(this)}}function Zc(){return this.on("end.remove",Jc(this._id))}function xc(e){var n=this._name,t=this._id;typeof e!="function"&&(e=Zo(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var l=o[a],s=l.length,u=r[a]=new Array(s),v,h,k=0;k<s;++k)(v=l[k])&&(h=e.call(v,v.__data__,k,l))&&("__data__"in v&&(h.__data__=v.__data__),u[k]=h,bo(u[k],n,t,k,u,Tn(v,t)));return new jn(r,this._parents,n,t)}function ed(e){var n=this._name,t=this._id;typeof e!="function"&&(e=Tr(e));for(var o=this._groups,i=o.length,r=[],a=[],l=0;l<i;++l)for(var s=o[l],u=s.length,v,h=0;h<u;++h)if(v=s[h]){for(var k=e.call(v,v.__data__,h,s),q,_=Tn(v,t),ce=0,f=k.length;ce<f;++ce)(q=k[ce])&&bo(q,n,t,ce,k,_);r.push(k),a.push(v)}return new jn(r,a,n,t)}var nd=Mt.prototype.constructor;function td(){return new nd(this._groups,this._parents)}function od(e,n){var t,o,i;return function(){var r=vt(this,e),a=(this.style.removeProperty(e),vt(this,e));return r===a?null:r===t&&a===o?i:i=n(t=r,o=a)}}function Jr(e){return function(){this.style.removeProperty(e)}}function id(e,n,t){var o,i=t+"",r;return function(){var a=vt(this,e);return a===i?null:a===o?r:r=n(o=a,t)}}function rd(e,n,t){var o,i,r;return function(){var a=vt(this,e),l=t(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),vt(this,e))),a===s?null:a===o&&s===i?r:(i=s,r=n(o=a,l))}}function ad(e,n){var t,o,i,r="style."+n,a="end."+r,l;return function(){var s=Ln(this,e),u=s.on,v=s.value[r]==null?l||(l=Jr(n)):void 0;(u!==t||i!==v)&&(o=(t=u).copy()).on(a,i=v),s.on=o}}function ld(e,n,t){var o=(e+="")=="transform"?dc:Qr;return n==null?this.styleTween(e,od(e,o)).on("end.style."+e,Jr(e)):typeof n=="function"?this.styleTween(e,rd(e,o,ii(this,"style."+e,n))).each(ad(this._id,e)):this.styleTween(e,id(e,o,n),t).on("end.style."+e,null)}function sd(e,n,t){return function(o){this.style.setProperty(e,n.call(this,o),t)}}function ud(e,n,t){var o,i;function r(){var a=n.apply(this,arguments);return a!==i&&(o=(i=a)&&sd(e,a,t)),o}return r._value=n,r}function cd(e,n,t){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,ud(e,n,t??""))}function dd(e){return function(){this.textContent=e}}function fd(e){return function(){var n=e(this);this.textContent=n??""}}function pd(e){return this.tween("text",typeof e=="function"?fd(ii(this,"text",e)):dd(e==null?"":e+""))}function vd(e){return function(n){this.textContent=e.call(this,n)}}function md(e){var n,t;function o(){var i=e.apply(this,arguments);return i!==t&&(n=(t=i)&&vd(i)),n}return o._value=e,o}function hd(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,md(e))}function gd(){for(var e=this._name,n=this._id,t=Zr(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var v=Tn(s,n);bo(s,e,t,u,a,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new jn(o,this._parents,e,t)}function yd(){var e,n,t=this,o=t._id,i=t.size();return new Promise(function(r,a){var l={value:a},s={value:function(){--i===0&&r()}};t.each(function(){var u=Ln(this,o),v=u.on;v!==e&&(n=(e=v).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(s)),u.on=n}),i===0&&r()})}var bd=0;function jn(e,n,t,o){this._groups=e,this._parents=n,this._name=t,this._id=o}function Zr(){return++bd}var Fn=Mt.prototype;jn.prototype={constructor:jn,select:xc,selectAll:ed,selectChild:Fn.selectChild,selectChildren:Fn.selectChildren,filter:Wc,merge:Kc,selection:td,transition:gd,call:Fn.call,nodes:Fn.nodes,node:Fn.node,size:Fn.size,empty:Fn.empty,each:Fn.each,on:Qc,attr:Nc,attrTween:Uc,style:ld,styleTween:cd,text:pd,textTween:hd,remove:Zc,tween:Pc,delay:Ec,duration:jc,ease:Xc,easeVarying:Vc,end:yd,[Symbol.iterator]:Fn[Symbol.iterator]};function kd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wd={time:null,delay:0,duration:250,ease:kd};function Cd(e,n){for(var t;!(t=e.__transition)||!(t=t[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return t}function Pd(e){var n,t;e instanceof jn?(n=e._id,e=e._name):(n=Zr(),(t=wd).time=ti(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],l=a.length,s,u=0;u<l;++u)(s=a[u])&&bo(s,e,n,u,a,t||Cd(s,n));return new jn(o,this._parents,e,n)}Mt.prototype.interrupt=kc;Mt.prototype.transition=Pd;const To=e=>()=>e;function _d(e,{sourceEvent:n,target:t,selection:o,mode:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},selection:{value:o,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Id(e){e.stopImmediatePropagation()}function No(e){e.preventDefault(),e.stopImmediatePropagation()}var er={name:"drag"},Mo={name:"space"},ct={name:"handle"},dt={name:"center"};const{abs:nr,max:nn,min:tn}=Math;function tr(e){return[+e[0],+e[1]]}function or(e){return[tr(e[0]),tr(e[1])]}var no={name:"x",handles:["w","e"].map(co),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Lo={name:"y",handles:["n","s"].map(co),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Dn={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ir={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},rr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},$d={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ad={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function co(e){return{type:e}}function Sd(e){return!e.ctrlKey&&!e.button}function Td(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Nd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ro(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Md(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Ld(){return Rd(no)}function Rd(e){var n=Td,t=Sd,o=Nd,i=!0,r=Jo("start","brush","end"),a=6,l;function s(f){var A=f.property("__brush",ce).selectAll(".overlay").data([co("overlay")]);A.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Dn.overlay).merge(A).each(function(){var y=Ro(this).extent;An(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),f.selectAll(".selection").data([co("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Dn.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var C=f.selectAll(".handle").data(e.handles,function(y){return y.type});C.exit().remove(),C.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return Dn[y.type]}),f.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",k).filter(o).on("touchstart.brush",k).on("touchmove.brush",q).on("touchend.brush touchcancel.brush",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(f,A,C){f.tween?f.on("start.brush",function(y){v(this,arguments).beforestart().start(y)}).on("interrupt.brush end.brush",function(y){v(this,arguments).end(y)}).tween("brush",function(){var y=this,p=y.__brush,b=v(y,arguments),O=p.selection,G=e.input(typeof A=="function"?A.apply(this,arguments):A,p.extent),ne=go(O,G);function me(ee){p.selection=ee===1&&G===null?null:ne(ee),u.call(y),b.brush()}return O!==null&&G!==null?me:me(1)}):f.each(function(){var y=this,p=arguments,b=y.__brush,O=e.input(typeof A=="function"?A.apply(y,p):A,b.extent),G=v(y,p).beforestart();Wo(y),b.selection=O===null?null:O,u.call(y),G.start(C).brush(C).end(C)})},s.clear=function(f,A){s.move(f,null,A)};function u(){var f=An(this),A=Ro(this).selection;A?(f.selectAll(".selection").style("display",null).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1]),f.selectAll(".handle").style("display",null).attr("x",function(C){return C.type[C.type.length-1]==="e"?A[1][0]-a/2:A[0][0]-a/2}).attr("y",function(C){return C.type[0]==="s"?A[1][1]-a/2:A[0][1]-a/2}).attr("width",function(C){return C.type==="n"||C.type==="s"?A[1][0]-A[0][0]+a:a}).attr("height",function(C){return C.type==="e"||C.type==="w"?A[1][1]-A[0][1]+a:a})):f.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function v(f,A,C){var y=f.__brush.emitter;return y&&(!C||!y.clean)?y:new h(f,A,C)}function h(f,A,C){this.that=f,this.args=A,this.state=f.__brush,this.active=0,this.clean=C}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(f,A){return this.starting?(this.starting=!1,this.emit("start",f,A)):this.emit("brush",f),this},brush:function(f,A){return this.emit("brush",f,A),this},end:function(f,A){return--this.active===0&&(delete this.state.emitter,this.emit("end",f,A)),this},emit:function(f,A,C){var y=An(this.that).datum();r.call(f,this.that,new _d(f,{sourceEvent:A,target:s,selection:e.output(this.state.selection),mode:C,dispatch:r}),y)}};function k(f){if(l&&!f.touches||!t.apply(this,arguments))return;var A=this,C=f.target.__data__.type,y=(i&&f.metaKey?C="overlay":C)==="selection"?er:i&&f.altKey?dt:ct,p=e===Lo?null:$d[C],b=e===no?null:Ad[C],O=Ro(A),G=O.extent,ne=O.selection,me=G[0][0],ee,T,oe=G[0][1],j,Y,Pe=G[1][0],W,ie,fe=G[1][1],re,ae,he=0,Q=0,V,fn=p&&b&&i&&f.shiftKey,X,We,Fe=Array.from(f.touches||[f],Z=>{const Le=Z.identifier;return Z=Di(Z,A),Z.point0=Z.slice(),Z.identifier=Le,Z});Wo(A);var pn=v(A,arguments,!0).beforestart();if(C==="overlay"){ne&&(V=!0);const Z=[Fe[0],Fe[1]||Fe[0]];O.selection=ne=[[ee=e===Lo?me:tn(Z[0][0],Z[1][0]),j=e===no?oe:tn(Z[0][1],Z[1][1])],[W=e===Lo?Pe:nn(Z[0][0],Z[1][0]),re=e===no?fe:nn(Z[0][1],Z[1][1])]],Fe.length>1&&Ue(f)}else ee=ne[0][0],j=ne[0][1],W=ne[1][0],re=ne[1][1];T=ee,Y=j,ie=W,ae=re;var hn=An(A).attr("pointer-events","none"),un=hn.selectAll(".overlay").attr("cursor",Dn[C]);if(f.touches)pn.moved=Je,pn.ended=gn;else{var Hn=An(f.view).on("mousemove.brush",Je,!0).on("mouseup.brush",gn,!0);i&&Hn.on("keydown.brush",Cn,!0).on("keyup.brush",De,!0),Eu(f.view)}u.call(A),pn.start(f,y.name);function Je(Z){for(const Le of Z.changedTouches||[Z])for(const on of Fe)on.identifier===Le.identifier&&(on.cur=Di(Le,A));if(fn&&!X&&!We&&Fe.length===1){const Le=Fe[0];nr(Le.cur[0]-Le[0])>nr(Le.cur[1]-Le[1])?We=!0:X=!0}for(const Le of Fe)Le.cur&&(Le[0]=Le.cur[0],Le[1]=Le.cur[1]);V=!0,No(Z),Ue(Z)}function Ue(Z){const Le=Fe[0],on=Le.point0;var U;switch(he=Le[0]-on[0],Q=Le[1]-on[1],y){case Mo:case er:{p&&(he=nn(me-ee,tn(Pe-W,he)),T=ee+he,ie=W+he),b&&(Q=nn(oe-j,tn(fe-re,Q)),Y=j+Q,ae=re+Q);break}case ct:{Fe[1]?(p&&(T=nn(me,tn(Pe,Fe[0][0])),ie=nn(me,tn(Pe,Fe[1][0])),p=1),b&&(Y=nn(oe,tn(fe,Fe[0][1])),ae=nn(oe,tn(fe,Fe[1][1])),b=1)):(p<0?(he=nn(me-ee,tn(Pe-ee,he)),T=ee+he,ie=W):p>0&&(he=nn(me-W,tn(Pe-W,he)),T=ee,ie=W+he),b<0?(Q=nn(oe-j,tn(fe-j,Q)),Y=j+Q,ae=re):b>0&&(Q=nn(oe-re,tn(fe-re,Q)),Y=j,ae=re+Q));break}case dt:{p&&(T=nn(me,tn(Pe,ee-he*p)),ie=nn(me,tn(Pe,W+he*p))),b&&(Y=nn(oe,tn(fe,j-Q*b)),ae=nn(oe,tn(fe,re+Q*b)));break}}ie<T&&(p*=-1,U=ee,ee=W,W=U,U=T,T=ie,ie=U,C in ir&&un.attr("cursor",Dn[C=ir[C]])),ae<Y&&(b*=-1,U=j,j=re,re=U,U=Y,Y=ae,ae=U,C in rr&&un.attr("cursor",Dn[C=rr[C]])),O.selection&&(ne=O.selection),X&&(T=ne[0][0],ie=ne[1][0]),We&&(Y=ne[0][1],ae=ne[1][1]),(ne[0][0]!==T||ne[0][1]!==Y||ne[1][0]!==ie||ne[1][1]!==ae)&&(O.selection=[[T,Y],[ie,ae]],u.call(A),pn.brush(Z,y.name))}function gn(Z){if(Id(Z),Z.touches){if(Z.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else Fu(Z.view,V),Hn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);hn.attr("pointer-events","all"),un.attr("cursor",Dn.overlay),O.selection&&(ne=O.selection),Md(ne)&&(O.selection=null,u.call(A)),pn.end(Z,y.name)}function Cn(Z){switch(Z.keyCode){case 16:{fn=p&&b;break}case 18:{y===ct&&(p&&(W=ie-he*p,ee=T+he*p),b&&(re=ae-Q*b,j=Y+Q*b),y=dt,Ue(Z));break}case 32:{(y===ct||y===dt)&&(p<0?W=ie-he:p>0&&(ee=T-he),b<0?re=ae-Q:b>0&&(j=Y-Q),y=Mo,un.attr("cursor",Dn.selection),Ue(Z));break}default:return}No(Z)}function De(Z){switch(Z.keyCode){case 16:{fn&&(X=We=fn=!1,Ue(Z));break}case 18:{y===dt&&(p<0?W=ie:p>0&&(ee=T),b<0?re=ae:b>0&&(j=Y),y=ct,Ue(Z));break}case 32:{y===Mo&&(Z.altKey?(p&&(W=ie-he*p,ee=T+he*p),b&&(re=ae-Q*b,j=Y+Q*b),y=dt):(p<0?W=ie:p>0&&(ee=T),b<0?re=ae:b>0&&(j=Y),y=ct),un.attr("cursor",Dn[C]),Ue(Z));break}default:return}No(Z)}}function q(f){v(this,arguments).moved(f)}function _(f){v(this,arguments).ended(f)}function ce(){var f=this.__brush||{selection:null};return f.extent=or(n.apply(this,arguments)),f.dim=e,f}return s.extent=function(f){return arguments.length?(n=typeof f=="function"?f:To(or(f)),s):n},s.filter=function(f){return arguments.length?(t=typeof f=="function"?f:To(!!f),s):t},s.touchable=function(f){return arguments.length?(o=typeof f=="function"?f:To(!!f),s):o},s.handleSize=function(f){return arguments.length?(a=+f,s):a},s.keyModifiers=function(f){return arguments.length?(i=!!f,s):i},s.on=function(){var f=r.on.apply(r,arguments);return f===r?s:f},s}function qd(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fo(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,o=e.slice(0,t);return[o.length>1?o[0]+o.slice(2):o,+e.slice(t+1)]}function ht(e){return e=fo(Math.abs(e)),e?e[1]:NaN}function Ud(e,n){return function(t,o){for(var i=t.length,r=[],a=0,l=e[0],s=0;i>0&&l>0&&(s+l+1>o&&(l=Math.max(1,o-s)),r.push(t.substring(i-=l,i+l)),!((s+=l+1)>o));)l=e[a=(a+1)%e.length];return r.reverse().join(n)}}function Od(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var Bd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function po(e){if(!(n=Bd.exec(e)))throw new Error("invalid format: "+e);var n;return new ri({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}po.prototype=ri.prototype;function ri(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ri.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ed(e){e:for(var n=e.length,t=1,o=-1,i;t<n;++t)switch(e[t]){case".":o=i=t;break;case"0":o===0&&(o=t),i=t;break;default:if(!+e[t])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(i+1):e}var xr;function Fd(e,n){var t=fo(e,n);if(!t)return e+"";var o=t[0],i=t[1],r=i-(xr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return r===a?o:r>a?o+new Array(r-a+1).join("0"):r>0?o.slice(0,r)+"."+o.slice(r):"0."+new Array(1-r).join("0")+fo(e,Math.max(0,n+r-1))[0]}function ar(e,n){var t=fo(e,n);if(!t)return e+"";var o=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}const lr={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qd,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>ar(e*100,n),r:ar,s:Fd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sr(e){return e}var ur=Array.prototype.map,cr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Dd(e){var n=e.grouping===void 0||e.thousands===void 0?sr:Ud(ur.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?sr:Od(ur.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(h){h=po(h);var k=h.fill,q=h.align,_=h.sign,ce=h.symbol,f=h.zero,A=h.width,C=h.comma,y=h.precision,p=h.trim,b=h.type;b==="n"?(C=!0,b="g"):lr[b]||(y===void 0&&(y=12),p=!0,b="g"),(f||k==="0"&&q==="=")&&(f=!0,k="0",q="=");var O=ce==="$"?t:ce==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",G=ce==="$"?o:/[%p]/.test(b)?a:"",ne=lr[b],me=/[defgprs%]/.test(b);y=y===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function ee(T){var oe=O,j=G,Y,Pe,W;if(b==="c")j=ne(T)+j,T="";else{T=+T;var ie=T<0||1/T<0;if(T=isNaN(T)?s:ne(Math.abs(T),y),p&&(T=Ed(T)),ie&&+T==0&&_!=="+"&&(ie=!1),oe=(ie?_==="("?_:l:_==="-"||_==="("?"":_)+oe,j=(b==="s"?cr[8+xr/3]:"")+j+(ie&&_==="("?")":""),me){for(Y=-1,Pe=T.length;++Y<Pe;)if(W=T.charCodeAt(Y),48>W||W>57){j=(W===46?i+T.slice(Y+1):T.slice(Y))+j,T=T.slice(0,Y);break}}}C&&!f&&(T=n(T,1/0));var fe=oe.length+T.length+j.length,re=fe<A?new Array(A-fe+1).join(k):"";switch(C&&f&&(T=n(re+T,re.length?A-j.length:1/0),re=""),q){case"<":T=oe+T+j+re;break;case"=":T=oe+re+T+j;break;case"^":T=re.slice(0,fe=re.length>>1)+oe+T+j+re.slice(fe);break;default:T=re+oe+T+j;break}return r(T)}return ee.toString=function(){return h+""},ee}function v(h,k){var q=u((h=po(h),h.type="f",h)),_=Math.max(-8,Math.min(8,Math.floor(ht(k)/3)))*3,ce=Math.pow(10,-_),f=cr[8+_/3];return function(A){return q(ce*A)+f}}return{format:u,formatPrefix:v}}var Gt,ea,na;jd({thousands:",",grouping:[3],currency:["$",""]});function jd(e){return Gt=Dd(e),ea=Gt.format,na=Gt.formatPrefix,Gt}function Hd(e){return Math.max(0,-ht(Math.abs(e)))}function Xd(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ht(n)/3)))*3-ht(Math.abs(e)))}function zd(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,ht(n)-ht(e))+1}function ai(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const dr=Symbol("implicit");function ta(){var e=new Oi,n=[],t=[],o=dr;function i(r){let a=e.get(r);if(a===void 0){if(o!==dr)return o;e.set(r,a=n.push(r)-1)}return t[a%t.length]}return i.domain=function(r){if(!arguments.length)return n.slice();n=[],e=new Oi;for(const a of r)e.has(a)||e.set(a,n.push(a)-1);return i},i.range=function(r){return arguments.length?(t=Array.from(r),i):t.slice()},i.unknown=function(r){return arguments.length?(o=r,i):o},i.copy=function(){return ta(n,t).unknown(o)},ai.apply(i,arguments),i}function oa(){var e=ta().unknown(void 0),n=e.domain,t=e.range,o=0,i=1,r,a,l=!1,s=0,u=0,v=.5;delete e.unknown;function h(){var k=n().length,q=i<o,_=q?i:o,ce=q?o:i;r=(ce-_)/Math.max(1,k-s+u*2),l&&(r=Math.floor(r)),_+=(ce-_-r*(k-s))*v,a=r*(1-s),l&&(_=Math.round(_),a=Math.round(a));var f=ns(k).map(function(A){return _+r*A});return t(q?f.reverse():f)}return e.domain=function(k){return arguments.length?(n(k),h()):n()},e.range=function(k){return arguments.length?([o,i]=k,o=+o,i=+i,h()):[o,i]},e.rangeRound=function(k){return[o,i]=k,o=+o,i=+i,l=!0,h()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(k){return arguments.length?(l=!!k,h()):l},e.padding=function(k){return arguments.length?(s=Math.min(1,u=+k),h()):s},e.paddingInner=function(k){return arguments.length?(s=Math.min(1,k),h()):s},e.paddingOuter=function(k){return arguments.length?(u=+k,h()):u},e.align=function(k){return arguments.length?(v=Math.max(0,Math.min(1,k)),h()):v},e.copy=function(){return oa(n(),[o,i]).round(l).paddingInner(s).paddingOuter(u).align(v)},ai.apply(h(),arguments)}function Vd(e){return function(){return e}}function Wd(e){return+e}var fr=[0,1];function ft(e){return e}function Ko(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:Vd(isNaN(n)?NaN:.5)}function Kd(e,n){var t;return e>n&&(t=e,e=n,n=t),function(o){return Math.max(e,Math.min(n,o))}}function Yd(e,n,t){var o=e[0],i=e[1],r=n[0],a=n[1];return i<o?(o=Ko(i,o),r=t(a,r)):(o=Ko(o,i),r=t(r,a)),function(l){return r(o(l))}}function Gd(e,n,t){var o=Math.min(e.length,n.length)-1,i=new Array(o),r=new Array(o),a=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++a<o;)i[a]=Ko(e[a],e[a+1]),r[a]=t(n[a],n[a+1]);return function(l){var s=Vl(e,l,1,o)-1;return r[s](i[s](l))}}function Qd(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jd(){var e=fr,n=fr,t=go,o,i,r,a=ft,l,s,u;function v(){var k=Math.min(e.length,n.length);return a!==ft&&(a=Kd(e[0],e[k-1])),l=k>2?Gd:Yd,s=u=null,h}function h(k){return k==null||isNaN(k=+k)?r:(s||(s=l(e.map(o),n,t)))(o(a(k)))}return h.invert=function(k){return a(i((u||(u=l(n,e.map(o),$n)))(k)))},h.domain=function(k){return arguments.length?(e=Array.from(k,Wd),v()):e.slice()},h.range=function(k){return arguments.length?(n=Array.from(k),v()):n.slice()},h.rangeRound=function(k){return n=Array.from(k),t=sc,v()},h.clamp=function(k){return arguments.length?(a=k?!0:ft,v()):a!==ft},h.interpolate=function(k){return arguments.length?(t=k,v()):t},h.unknown=function(k){return arguments.length?(r=k,h):r},function(k,q){return o=k,i=q,v()}}function Zd(){return Jd()(ft,ft)}function xd(e,n,t,o){var i=xl(e,n,t),r;switch(o=po(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(n));return o.precision==null&&!isNaN(r=Xd(i,a))&&(o.precision=r),na(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(r=zd(i,Math.max(Math.abs(e),Math.abs(n))))&&(o.precision=r-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(r=Hd(i))&&(o.precision=r-(o.type==="%")*2);break}}return ea(o)}function ef(e){var n=e.domain;return e.ticks=function(t){var o=n();return Zl(o[0],o[o.length-1],t??10)},e.tickFormat=function(t,o){var i=n();return xd(i[0],i[i.length-1],t??10,o)},e.nice=function(t){t==null&&(t=10);var o=n(),i=0,r=o.length-1,a=o[i],l=o[r],s,u,v=10;for(l<a&&(u=a,a=l,l=u,u=i,i=r,r=u);v-- >0;){if(u=Oo(a,l,t),u===s)return o[i]=a,o[r]=l,n(o);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function ia(){var e=Zd();return e.copy=function(){return Qd(e,ia())},ai.apply(e,arguments),ef(e)}function It(e,n,t){this.k=e,this.x=n,this.y=t}It.prototype={constructor:It,scale:function(e){return e===1?this:new It(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new It(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};It.prototype;function pr(e,n,t){const o=new D(10).pow(n-t);return new D(1.0001).pow(e).mul(o)}const nf=kn({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,n){const t=R(1),o=R(""),i=R(""),r=te(()=>{var p,b,O;return h.sqrtPriceX64ToPrice((p=e.poolInfo)==null?void 0:p.current_sqrt_price,(b=e.poolInfo)==null?void 0:b.coinA.decimals,(O=e.poolInfo)==null?void 0:O.coinB.decimals).toString()}),a=te(()=>{let p=0;return e.direction?p=(Number(e.minPrice)/Number(r.value)-1)*100:p=(Number(e.minPrice)/Number(1/Number(r.value))-1)*100,p=p>0&&p<.1?.1:p,p=p<0&&p>-.1?-.1:p,p}),l=te(()=>{let p=0;return e.direction?p=(Number(e.maxPrice)/Number(r.value)-1)*100:p=(Number(e.maxPrice)/Number(1/Number(r.value))-1)*100,p=p>0&&p<.1?.1:p,p=p<0&&p>-.1?-.1:p,p}),s=bn(),u=te(()=>s),v=te(()=>u.value.chainName?Yo(u.value.chainName):{}),{TickMath:h,getNearestTickByTick:k}=v.value,q=()=>{const p=t.value/2;t.value=p,f(e.poolInfo,p)},_=()=>{const p=t.value*2;t.value=p,f(e.poolInfo,p)},ce=(p=[])=>{let b=6;const O=Math.abs(Number(p[0])-Number(p[p.length-1]));return O>=6?b=0:O>=1?b=1:O>=.1?b=2:O>=.01?b=3:O>=.001?b=4:O>=1e-4?b=5:O>=1e-5?b=6:O>=1e-6?b=7:O>=1e-7&&(b=8),b},f=(p,b=1)=>{if(p&&p.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const O=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",O),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let G=O+100*b,ne=O-100*b,me,ee;if(e.maxPrice==="∞")ee=v.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ee=h.priceToTickIndex(new D(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ee=h.priceToTickIndex(new D(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ee=443636}if(e.minPrice==="0")me=v.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?me=h.priceToTickIndex(new D(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):me=h.priceToTickIndex(new D(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{me=-443636}let T=0;if(e.currentPriceTab!=="full range"){if(O>=me&&O<=ee){const Q=O-me,V=ee-O;T=Math.max(Math.abs(Q),Math.abs(V))}else O<me?T=Math.abs(ee-O):T=Math.abs(O-me);G=O+T+100*b,ne=O-T-100*b}else{const Q=(Math.abs(O)>5e3,2e4);G=O+Q*b,ne=O-Q*b}ne<-443636&&(ne=-443636),G>443636&&(G=443636);const oe=new D(p.liquidity).div(Math.pow(10,8)).toString(),j=e.tickList;console.log("0117####drawChart####tick_info_array####",j);const Y=[],Pe=[];let W={};for(let Q=0;Q<j.length;Q++){if(W=j[Q],W.index<=O&&W.index>=ne){if(Y.length<1&&Q!==0){const V=j[Q-1];Y.unshift({...V,index:ne})}Y.unshift(W)}else if(W.index>O&&W.index<=G&&(Pe.push(W),Y.length<1&&Q!==0)){const V=j[Q-1];Y.push({...V,index:ne})}if(W.index>G){const V=j[Q];if(Pe.push({...V,index:G}),Y.length<1&&Q!==0){const fn=j[Q-1];Y.push({...fn,index:ne})}break}}let ie="0";for(let Q=Y.length-1;Q>=0;Q--)ie=new D(ie).plus(new D(Y[Q].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Y[Q].liquityAmount=ie;let fe=oe;for(let Q=0;Q<Pe.length;Q++)fe=new D(fe).plus(new D(Pe[Q].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Pe[Q].liquityAmount=fe;let re=[];const ae=j&&j.length>0?{index:O,liquityAmount:Number(oe)}:{index:O,liquityAmount:0};(Y.length>0||Pe.length>0)&&(re=[...Y.reverse(),ae,...Pe],e.direction||(re=re.reverse()));const he=[];j.forEach(Q=>{he.push({...Q,liquidityGross:Q.liquidityGross.toString(),liquidityNet:Q.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",he),console.log("0117####drawChart####currentLiquity####",oe),C(re,ne,G,me,ee,O)}};let A=R(!1);vo(()=>{document.body.clientWidth<750?A.value=!1:A.value=!0,window.onresize=()=>{document.body.clientWidth<750?A.value=!1:A.value=!0,f(e.poolInfo,t.value)}});const C=(p,b,O,G,ne,me)=>{console.log("0117####drawChart####chartData####",p),console.log("0117####drawChart####tickMin####",b),console.log("0117####drawChart####tickMax####",O),console.log("0117####drawChart####minPriceTick####",G),console.log("0117####drawChart####maxPriceTick####",ne),console.log("0117####drawChart####currentTick####",me),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let ee,T;e.direction?(ee=e.before7dContractPriceLowest?h.priceToTickIndex(new D(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",T=e.before7dContractPriceHighest?h.priceToTickIndex(new D(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(ee=e.before7dContractPriceLowest?h.priceToTickIndex(new D(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",T=e.before7dContractPriceHighest?h.priceToTickIndex(new D(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const oe={top:30,right:35,bottom:20,left:55};let j,Y;A.value?(j=460-oe.left-oe.right,Y=205-oe.top-oe.bottom):(j=340-oe.left-oe.right,Y=205-oe.top-oe.bottom);const Pe=O-b,W=parseInt(String(Pe/4));let ie=[b+W/4,b+W,b+2*W,O-W,O-W/4];const fe=b,re=O,ae=j/(re-fe);e.currentPriceTab==="full range"&&(ie=[b,b+2*W,O]),console.log("0117####drawChart####xArr####",ie),console.log("0117####drawChart####utickMin####",fe),console.log("0117####drawChart####utickMax####",re),console.log("0117####drawChart####unit####",ae);const he=ie.map(U=>e.direction?pr(U,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new D(1).div(pr(U,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),Q=ce(he);An("#chart").selectAll("*").remove();const V=An("#chart").attr("width",j+oe.left+oe.right).attr("height",Y+oe.top+oe.bottom).append("g").attr("transform",`translate(${oe.left},${oe.right})`),fn=es(p,function(U){return Number(Math.abs(U.liquityAmount))})||0,X=ia().range([0,Y]).domain([fn,0]);oa().rangeRound([0,j]).padding(.1);const Fe=V.append("g").attr("id","barsBox").selectAll("rect").data(p).enter().append("rect");u.value.theme=="default"?Fe.attr("x",function(U,J){return J===0?0:e.direction?Math.abs(U.index-fe)*ae:Math.abs(re-U.index)*ae}).attr("y",function(U,J){return e.direction?J===p.length-1?0:X(U.liquityAmount):J===p.length-1?0:X(p[J+1].liquityAmount)}).attr("width",function(U,J){return J===0&&p.length===1&&U.liquityAmount>0?j:(e.direction,J!==p.length-1?Math.abs(p[J+1].index-U.index)*ae:0)}).attr("height",function(U,J){return J===0&&p.length===1&&U.liquityAmount>0?Y:e.direction?J===p.length-1?0:Y-X(U.liquityAmount):J===p.length-1?0:Y-X(p[J+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Fe.attr("x",function(U,J){return J===0?0:e.direction?Math.abs(U.index-fe)*ae:Math.abs(re-U.index)*ae}).attr("y",function(U,J){return e.direction?J===p.length-1?0:X(Math.abs(U.liquityAmount)):J===p.length-1?0:X(Math.abs(p[J+1].liquityAmount))}).attr("width",function(U,J){return J===0&&p.length===1&&U.liquityAmount>0?j:(e.direction,J!==p.length-1?Math.abs(p[J+1].index-U.index)*ae:0)}).attr("height",function(U,J){if(J===0&&p.length===1&&U.liquityAmount>0)return Y;if(e.direction)return J===p.length-1?0:Number(U.liquityAmount)?Y-X(Math.abs(U.liquityAmount)):0;{if(J===p.length-1)return 0;const Ze=Y-X(Math.abs(p[J+1].liquityAmount));return Number(p[J+1].liquityAmount)?Ze:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const pn=V.append("g");pn.append("line").attr("x1",0).attr("y1",155).attr("x2",j).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const hn=pn.append("g");let un=0;if(e.direction){for(let U=0;U<ie.length;U++){const J=Be(he[U],Q)||"0";console.log("0423####price####",J),he.push(J);const Ze=Math.abs(ie[U]-fe)*ae;let $e=0;for(let g=0;g<J.length;g++)J[g]==="1"?$e+=4.02:J[g]==="."?$e+=2.64:J[g]==="7"?$e+=5.48:$e+=6;console.log(Ze,"x=>>>"),hn.append("text").text(J).attr("x",Ze-$e/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}un=Math.abs(me-fe)*ae}else{for(let U=ie.length-1;U>=0;U--){const J=Be(he[U],Q)||0;he.push(J);const Ze=Math.abs(ie[U]-re)*ae;let $e=0;for(let g=0;g<J.length;g++)J[g]==="1"?$e+=4.02:J[g]==="."?$e+=2.64:J[g]==="7"?$e+=5.48:$e+=6;hn.append("text").text(J).attr("x",Ze-$e/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}un=Math.abs(me-re)*ae}(u.value.theme=="default"?V.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):V.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+un+", 0)");let Je,Ue,gn,Cn;e.direction?(console.log("0525###d3###select###minPriceTick###",G),console.log("0525###d3###select###maxPriceTick###",ne),console.log("0525###d3###select###props.minPrice###",e.minPrice),console.log("0525###d3###select###props.maxPrice###",e.maxPrice),Je=G<fe?-100:parseInt(String(Math.abs(G-fe)*ae)),Ue=ne<fe?-100:parseInt(String(Math.abs(ne-fe)*ae)),gn=ee<fe?-100:Math.abs(ee-fe)*ae,Cn=T<fe?-100:Math.abs(T-fe)*ae):(Ue=G<fe?-100:Math.abs(re-G)*ae,Je=ne<fe?-100:Math.abs(re-ne)*ae,Cn=ee<fe?-100:Math.abs(re-ee)*ae,gn=T<fe?-100:Math.abs(re-T)*ae),e.minPrice==="0"&&(Je=0),e.maxPrice==="∞"&&(Ue=j),A.value?o.value=j-Je+60+"px":o.value=j-Je+52+"px",i.value=Ue+74+"px",ee&&gn<j&&V.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+gn+", 0)"),T&&Cn<j&&V.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Cn+", 0)");const De=V.append("g").attr("id","left-handle"),Z=V.append("g").attr("id","right-handle");u.value.theme=="default"?(De.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),De.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),De.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),De.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),Z.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Z.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Z.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),Z.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(De.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),De.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),De.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),De.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),Z.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Z.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Z.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),Z.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",Je),console.log("0525###d3###select###maxPriceTickX###",Ue),De.attr("transform","translate("+Je+", 0)"),Z.attr("transform","translate("+Ue+", 0)");const Le=Ld().extent([[0,0],[j,Y]]).handleSize(30).on("end",on);V.append("g").attr("class","brush").call(Le).call(Le.move,[Je,Ue]);function on(U){if(!U.sourceEvent||!U.selection)return;De.attr("transform","translate("+U.selection[0]+", 0)"),Z.attr("transform","translate("+U.selection[1]+", 0)"),A.value?o.value=j-U.selection[0]+60+"px":o.value=j-U.selection[0]+52+"px",i.value=U.selection[1]+74+"px";let J,Ze;console.log("0525###d3###select###e.selection[0]###",U.selection[0]),console.log("0525###d3###select###e.selection[0]###",U.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",j),console.log("0525###d3###select###unit###",ae),console.log("0525###d3###select###utickMin###",fe),console.log("0525###d3###select###utickMax###",re),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let $e=0,g=0;e.direction?($e=k(parseInt(String(U.selection[0]/ae+fe)),Number(e.poolInfo.tickSpacing)),J=h.tickIndexToPrice($e,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),g=k(parseInt(String(U.selection[1]/ae+fe)),Number(e.poolInfo.tickSpacing)),Ze=h.tickIndexToPrice(g,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("0525###d3###select###minTick###",$e),console.log("0525###d3###select###maxTick###",g),console.log("0525###d3###select###minPrice###",J),console.log("0525###d3###select###maxPrice###",Ze)):(g=k(re-U.selection[0]/ae,Number(e.poolInfo.tickSpacing)),J=1/h.tickIndexToPrice(g,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),$e=k(re-U.selection[1]/ae,Number(e.poolInfo.tickSpacing)),Ze=1/h.tickIndexToPrice($e,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),n.emit("onChangeMinPrice",String(Be(String(J),6))),n.emit("onChangeMaxPrice",String(Be(String(Ze),6)))}u.value.theme=="default"?An(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):An(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};R(""),Ie(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([p,b,O,G])=>{console.log(p,b,O,O>b,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),p&&b&&O&&(O=="∞"||Number(O)>Number(b))&&f(p,t.value)},{immediate:!0});const y=R(!0);return Ie(()=>e.chartLoading,(p,b)=>{p!==b&&(y.value=p)},{immediate:!0,deep:!0}),{store:u,loading:y,zoomOut:q,zoomIn:_,rangeSizeLower:a,rangeSizeUpper:l,rangeSizeLowerPosition:o,rangeSizeUpperPosition:i,decimalFormat:$t,numberformat:qo}}});const tf=e=>(tt("data-v-f69ce771"),e=e(),ot(),e),of={class:"chart-box"},rf={class:"chart"},af={class:"zoom"},lf=tf(()=>m("svg",{id:"chart"},null,-1));function sf(e,n,t,o,i,r){return w(),S("div",of,[vn(m("div",rf,[m("div",af,[m("div",{class:"amplification",onClick:n[0]||(n[0]=(...a)=>e.zoomOut&&e.zoomOut(...a))}),m("div",{class:"narrow",onClick:n[1]||(n[1]=(...a)=>e.zoomIn&&e.zoomIn(...a))})]),e.currentPriceTab!=="full range"?(w(),S("div",{key:0,class:"range-size range-size-lower",style:Li({right:e.rangeSizeLowerPosition})},$(("numberformat"in e?e.numberformat:ye(qo))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):B("",!0),e.currentPriceTab!=="full range"?(w(),S("div",{key:1,class:"range-size range-size-upper",style:Li({left:e.rangeSizeUpperPosition})},$(("numberformat"in e?e.numberformat:ye(qo))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):B("",!0),lf],512),[[Aa,!e.loading]])])}const uf=wn(nf,[["render",sf],["__scopeId","data-v-f69ce771"]]),cf=kn({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,n){const t=R(""),o=R(""),i=R(""),r=bn(),a=te(()=>r);console.log(e,"props124====>");const l=Nt(),s=te(()=>l),u=(y,p)=>y&&p?Ua.plus($o(y),$o(p)):y>0?y:0,v=y=>{let p=0;return y&&y.forEach(b=>{p+=$o(String(b))}),String(p)},h=R([]),k=R([]),q=R(""),_=R(""),ce=R(!0);Ie(()=>[a.value.newTopPoolsObj,e.poolInfo,s.value.tokensObj,e.aprRewardsParameter],async([y,p,b])=>{var O;if(y&&p&&b){const G=y[p==null?void 0:p.poolAddress];if(G){console.log(G,"===>stats"),t.value=G&&G.apr_7day&&G.apr_7day.replace("%","")||"0",_.value=v(G&&G.rewarder_apr),q.value=u(G&&G.apr_7day,G&&v(G.rewarder_apr)),console.log(e.poolInfo,"===>props.poolInfo"),console.log(q.value,"===> rewardApr.value"),o.value=Ve(G.tvl_in_usd,2),i.value=Ve(G.vol_in_usd_24h,2);const ne=p&&e.poolInfo.rewarder_infos||[],me=[];for(let T=0;T<ne.length;T++){const oe=ne[T];if(b[oe.coinAddress]){const j=b[oe.coinAddress].decimals,Y=$t(oe.emissionsEveryDay/Math.pow(10,j),4),Pe=Number(Y)>0?Ve(Y):Y,W=$t(Number(Y)*((O=s.value.RATES[oe.coinAddress])==null?void 0:O.price),4);me.push({...oe,logoUrl:b[oe.coinAddress].logoURI,day:Pe,dayUSD:W,symbol:b[oe.coinAddress].symbol,rewarder_display:p&&p[`rewarder_display${T+1}`]?p[`rewarder_display${T+1}`]:!1})}}console.log(me,"mockArr206===>"),h.value=me.filter(T=>T.rewarder_display);const ee=[];me.forEach((T,oe)=>{b[T.coinAddress]&&ee.push({...T,symbol:b[T.coinAddress].symbol,rewarderApr:G.rewarder_apr[oe]&&G.rewarder_apr[oe].replace("%","")})}),k.value=ee.filter(T=>T.rewarder_display)}else t.value="0",o.value="--",i.value="--",q.value=="0";console.log(k.value,"===>rewarderArr.value"),ce.value=!1}},{immediate:!0,deep:!0});const f=()=>{n.emit("reviseValue")},A=y=>{var p;return(y==null?void 0:y.logoURI)||(y==null?void 0:y.logo_url)||((p=s.value.tokensObj[y==null?void 0:y.address])==null?void 0:p.logo_url)||(a.value.theme==="default"?Qe("/image/coins/unknown.png"):Qe("/image/coins/sui-unknown.png"))},C=te(()=>s.value.tokensWarningObj);return console.log(C.value,"==>tokensObj"),console.log(e.poolInfo,"props.poolInfo====>"),{tokensWarningObj:C,rewarderInfo:h,rewarderArr:k,rewardApr:q,rewardAprList:_,apr:t,liquidityTvl:o,vol24:i,addCommom:Ve,reviseValue:f,loading:ce,getCoinIcon:A,store:r}}});const ko=e=>(tt("data-v-139d055a"),e=e(),ot(),e),df={key:0,class:"pool-info"},ff=ko(()=>m("use",{"xlink:href":"#icon-icon_on"},null,-1)),pf=[ff],vf={key:0,class:"info-block-container"},mf={class:"info-block"},hf={class:"coin-tips"},gf={class:"left"},yf={alt:""},bf={class:"address"},kf={key:0,class:"pool-warning"},wf=ko(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Cf=[wf],Pf={class:"info-block"},_f={class:"coin-tips"},If={class:"left"},$f={alt:""},Af={class:"address"},Sf={key:0,class:"pool-warning"},Tf=ko(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Nf=[Tf],Mf={class:"info-block"},Lf={class:"leabl"},Rf={class:"text"},qf={class:"apr-hover-content"},Uf={class:"info-block"},Of={class:"leabl"},Bf={class:"text"},Ef={class:"info-block"},Ff={class:"leabl"},Df={class:"text"},jf={class:"info-block"},Hf={class:"leabl"},Xf={class:"text"},zf={key:1,class:"pool-rewards-info"},Vf={class:"rewards-list-all"},Wf=ko(()=>m("div",{class:"icon-sign"},null,-1)),Kf={alt:""},Yf={class:"rewards-value"};function Gf(e,n,t,o,i,r){const a=qa,l=br,s=mo("image");return e.poolInfo?(w(),S("div",df,[e.loading?(w(),we(l,{key:1})):(w(),S(Kn,{key:0},[m("div",{class:Me(e.label?"pool-info-border pool-info-title":"pool-info-title")},[ze($(e.$t("newAdd.poolInfo"))+" ",1),(w(),S("svg",{class:Me(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:n[0]||(n[0]=u=>e.reviseValue())},pf,2))],2),e.label?(w(),S("div",vf,[m("div",mf,[m("div",hf,[m("div",gf,[vn(m("img",yf,null,512),[[s,e.getCoinIcon(e.poolInfo.token_a)]]),m("div",bf,$(e.poolInfo.token_a.address),1),e.tokensWarningObj&&e.poolInfo&&e.poolInfo.coin_a_address&&!e.tokensWarningObj[e.poolInfo.coin_a_address]?(w(),S("div",kf)):B("",!0),(w(),S("svg",{class:"icon","aria-hidden":"true",onClick:n[1]||(n[1]=u=>e.store.copy(e.poolInfo.token_a.address&&e.poolInfo.token_a.address))},Cf))])])]),m("div",Pf,[m("div",_f,[m("div",If,[vn(m("img",$f,null,512),[[s,e.getCoinIcon(e.poolInfo.token_b)]]),m("div",Af,$(e.poolInfo.token_b.address),1),e.tokensWarningObj&&e.poolInfo&&e.poolInfo.coin_b_address&&!e.tokensWarningObj[e.poolInfo.coin_b_address]?(w(),S("div",Sf)):B("",!0),(w(),S("svg",{class:"icon","aria-hidden":"true",onClick:n[2]||(n[2]=u=>e.store.copy(e.poolInfo.token_b.address&&e.poolInfo.token_b.address))},Nf))])])]),m("div",Mf,[m("div",Lf,$(e.$t("common.apr")),1),m("div",Rf,[ze($(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:ye(Ve))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:ye(Ve))(e.apr,2))+"% ",1),m("div",qf,[be(a,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),m("div",Uf,[m("div",Of,$(e.$t("common.liquidity")),1),m("div",Bf,"$"+$(e.liquidityTvl),1)]),m("div",Ef,[m("div",Ff,$(e.$t("common.volume24h")),1),m("div",Df,"$"+$(e.vol24),1)]),m("div",jf,[m("div",Hf,$(e.$t("newAdd.tickSpacing")),1),m("div",Xf,$(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):B("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(w(),S("div",zf,[ze($("Farming Bonus")+" "),m("div",Vf,[(w(!0),S(Kn,null,Ct(e.rewarderInfo,u=>(w(),S("div",{key:u,class:Me(["rewards-list",u.day==0?"rewards-none":""])},[Wf,vn(m("img",Kf,null,512),[[s,u.logoUrl]]),m("div",Yf,[m("p",null,$(u.day)+" "+$(u.symbol)+" / "+$(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):B("",!0)],64))])):B("",!0)}const Qf=wn(cf,[["render",Gf],["__scopeId","data-v-139d055a"]]),Jf=kn({components:{Modal:kr},props:{poolInfo:{type:Object,required:!0}},setup(e){const n=R({}),t=bn(),o=te(()=>t),i=te(()=>o.value.chainName),r=te(()=>Qt[i.value]);let a=R(!0);const l=Nt(),s=te(()=>l),u=Go(),v=te(()=>e.poolInfo.needReverse);return Ie(()=>s.value.currentPositionInfo,k=>{console.log(k,"==>newVal111111"),k&&(n.value=k)},{immediate:!0}),{getExplorerUrl:Uo,addCommom:Ve,router:u,pools:s,positionInfo:n,decimalFormat:$t,rateChange:a,config:r,importIcon:Qe,store:o,chainName:i,checkNullObj:Nn,needReverse:v,getCoinIcon:k=>{var q;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((q=s.value.tokensObj[k==null?void 0:k.address])==null?void 0:q.logo_url)||(o.value.theme==="default"?Qe("/image/coins/unknown.png"):Qe("/image/coins/sui-unknown.png"))},decimalUi:Be}}});const wo=e=>(tt("data-v-e3466cf5"),e=e(),ot(),e),Zf=wo(()=>m("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),xf={class:"rejected-container"},ep={class:"coin-pair"},np=wo(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),tp=[np],op=["href"],ip=wo(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-jump"})],-1)),rp=[ip],ap={class:"coin-pair"},lp={class:"fee"},sp={class:"status"},up={class:"min-and-max"},cp={key:0},dp={class:"text"},fp={key:0,src:_r,alt:""},pp={key:1,src:Ir,alt:""},vp={class:"text"},mp={key:1},hp={class:"text"},gp={key:0,src:_r,alt:""},yp={key:1,src:Ir,alt:""},bp={class:"text"},kp=wo(()=>m("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),wp=[kp];function Cp(e,n,t,o,i,r){const a=yr,l=Ba,s=Qo,u=wr("Modal"),v=mo("image");return w(),we(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:n[3]||(n[3]=h=>e.$emit("onClose"))},{closeIcon:Oe(()=>[Zf]),default:Oe(()=>[m("div",xf,[be(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Oe(()=>[m("div",ep,[ze($(e.positionInfo.tokenName)+" ",1),(w(),S("svg",{class:"icon","aria-hidden":"true",onClick:n[0]||(n[0]=h=>e.store.copy(e.positionInfo.nftHash))},tp)),m("a",{href:e.chainName==="Aptos"?("getExplorerUrl"in e?e.getExplorerUrl:ye(Uo))("nftAddress",e.positionInfo.nftHash):("getExplorerUrl"in e?e.getExplorerUrl:ye(Uo))("nftAddress",e.positionInfo.pos_object_id),target:"_blank"},rp,8,op)])]),_:1},8,["loading"]),m("div",{class:Me(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[be(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Oe(()=>{var h,k,q,_,ce,f,A,C,y,p,b,O;return[m("div",ap,[m("div",null,[vn(m("img",null,null,512),[[v,e.getCoinIcon(e.needReverse?(k=e.positionInfo)==null?void 0:k.token_b:(h=e.positionInfo)==null?void 0:h.token_a)]]),vn(m("img",null,null,512),[[v,e.getCoinIcon(e.needReverse?(_=e.positionInfo)==null?void 0:_.token_a:(q=e.positionInfo)==null?void 0:q.token_b)]])]),m("span",null,$(e.needReverse?(C=(A=e.positionInfo)==null?void 0:A.token_b)==null?void 0:C.symbol:(f=(ce=e.positionInfo)==null?void 0:ce.token_a)==null?void 0:f.symbol)+" - "+$(e.needReverse?(O=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:O.symbol:(p=(y=e.positionInfo)==null?void 0:y.token_b)==null?void 0:p.symbol),1)]),m("div",lp,$(e.$t("common.fee"))+" "+$(e.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),m("div",sp,[be(l,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),be(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Oe(()=>{var h,k,q,_,ce,f,A,C;return[m("div",up,[(e.needReverse?!e.rateChange:e.rateChange)?(w(),S("div",cp,[m("div",dp,$(("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(w(),S("img",fp)):(w(),S("img",pp)),m("div",vp,$(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+$((k=(h=e.positionInfo)==null?void 0:h.token_b)==null?void 0:k.symbol)+" per "+$((_=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:_.symbol),1)])):(w(),S("div",mp,[m("div",hp,$(("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(w(),S("img",gp)):(w(),S("img",yp)),m("div",bp,$(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+$((f=(ce=e.positionInfo)==null?void 0:ce.token_a)==null?void 0:f.symbol)+" per "+$((C=(A=e.positionInfo)==null?void 0:A.token_b)==null?void 0:C.symbol),1)])),(w(),S("svg",{class:"icon-change","aria-hidden":"true",onClick:n[1]||(n[1]=y=>e.rateChange=!e.rateChange)},wp))])]}),_:1},8,["loading"])]),be(s,{disabled:("checkNullObj"in e?e.checkNullObj:ye(Nn))(e.positionInfo),onClick:n[2]||(n[2]=h=>e.router.push(`/position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:Oe(()=>[ze($(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])}const Pp=wn(Jf,[["render",Cp],["__scopeId","data-v-e3466cf5"]]),_p=kn({components:{Modal:kr},setup(){const e=bn(),n=te(()=>e);return{importIcon:Qe,store:n}}}),Ip=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,$p=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const Ap=e=>(tt("data-v-d7a9ceb3"),e=e(),ot(),e),Sp=Ap(()=>m("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Tp={class:"create-success-container"},Np={key:0,src:Ip,alt:""},Mp={key:1,src:$p,alt:""},Lp={class:"waiting-title"};function Rp(e,n,t,o,i,r){const a=wr("Modal");return w(),we(a,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:n[0]||(n[0]=l=>e.$emit("onClose"))},{closeIcon:Oe(()=>[Sp]),default:Oe(()=>[m("div",Tp,[e.store.theme=="default"?(w(),S("img",Np)):(w(),S("img",Mp)),m("p",Lp,$(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const qp=wn(_p,[["render",Rp],["__scopeId","data-v-d7a9ceb3"]]),Up={1e-4:2,5e-4:10,.002:60,.006:200},Op={1e-4:2,5e-4:10,.0025:60,.01:200},Bp=kn({setup(){let e=R(!1);const{t:n,locale:t}=Sa(),o=Ia(),i=te(()=>o),r=bn(),a=R(0),l=R(!1),s=R(!1),u=R(!1),v=R("fromCoin"),h=R(""),k=R(""),q=R(!1),_=R(!0),ce=R(!1),f=R(!0),A=R(!1),C=R(""),y=R(""),p=R(""),b=R(""),O=R(""),G=R(""),ne=R(!1),me=R(!1),ee=R(!1),T=R(""),oe=R(0),j=R(!0),Y=R(!1),Pe=R([]),W=R(""),ie=R(30),fe=R("30D"),re=R("Estimated APR"),ae=R([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),he=R(!0),Q=bn(),V=te(()=>Q),fn=te(()=>{var c;return!!((c=N==null?void 0:N.query)!=null&&c.action&&(!g.value||!P.value||!T.value))}),X=te(()=>V.value.chainName?Yo(V.value.chainName):{}),We=te(()=>{var c;return(c=V.value)==null?void 0:c.filterCreatePoolCoin}),Fe=c=>{console.log(c,"====>>>>item",c.num,ie.value),an.updateCurrentPools(x.value.poolAddress,V.value.chainName),fe.value=c.time,ie.value=c.num},pn=()=>{console.log("reviseValue==>"),he.value=!he.value},hn=R([]),un=()=>{a.value=0,N.query.action!=="create-pool"&&N.query.actions!=="new-position"&&(bt(),_n(),an.updateCurrentPools(x.value.poolAddress,V.value.chainName)),an.setPoolConfigList(zt.value,V.value.filterCoinsObj)},Hn=te(()=>Number(p.value)>0&&Number(b.value)>0&&Number(p.value)>Number(b.value)),Je=c=>{ce.value=c,p.value="0",b.value="∞"},Ue=te(()=>{if(z.value.poolConfigList&&g.value&&P.value){const c=z.value.poolConfigList.filter(I=>{var M,E,F,K;return I.token_a.address.toUpperCase()===((M=g.value.address)==null?void 0:M.toUpperCase())&&I.token_b.address.toUpperCase()===((E=P.value.address)==null?void 0:E.toUpperCase())||I.token_b.address.toUpperCase()===((F=g.value.address)==null?void 0:F.toUpperCase())&&I.token_a.address.toUpperCase()===((K=P.value.address)==null?void 0:K.toUpperCase())});console.log(c,"===>info");const d=[];return c.forEach(I=>{d.push(Number(I.fee))}),console.log(d,"===>>result"),d}else return[]}),gn=te(()=>{if(z.value.poolConfigList&&g.value&&P.value){const c=z.value.poolConfigList.filter(M=>{var K,de,ue,le;const E=M.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":M.coin_a_address,F=M.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":M.coin_b_address;return console.log(M,"p===>1334"),E.toUpperCase()===((K=g.value.address)==null?void 0:K.toUpperCase())&&F.toUpperCase()===((de=P.value.address)==null?void 0:de.toUpperCase())||F.toUpperCase()===((ue=g.value.address)==null?void 0:ue.toUpperCase())&&E.toUpperCase()===((le=P.value.address)==null?void 0:le.toUpperCase())}),d={};let I=new D(0);return console.log(c,"info===>"),c.forEach(M=>{I=I.add(new D(M.object.liquidity))}),c.forEach(M=>{const E=new D(M.object.liquidity),F=E.gt(0)?new D(E).div(I).mul(100).toString():0;d[M.fee]={rateText:(F>0&&F<.01?"<0.01":F==0?0:Vt(F,2))+"% select",rate:F}}),console.log(d,"===>1356"),console.log(I.toString(),"totalTvl.toString()"),d}}),Cn=te(()=>[{label:.01+"% "+n("common.feeTier"),title:.01+"% ",fee:1e-4,text:n("newAdd.bestVeryStablePairs")},{label:.05+"% "+n("common.feeTier"),title:.05+"% ",fee:5e-4,text:n("newAdd.bestStablePairs")},V.value.chainName=="Aptos"?{label:.2+"% "+n("common.feeTier"),title:.2+"% ",fee:.002,text:n("newAdd.bestMostPairs")}:{label:.25+"% "+n("common.feeTier"),title:.25+"% ",fee:.0025,text:n("newAdd.bestMostPairs")},V.value.chainName=="Aptos"?{label:.6+"% "+n("common.feeTier"),title:.6+"% ",fee:.006,text:n("newAdd.besteExoticPairs")}:{label:"1% "+n("common.feeTier"),title:"1% ",fee:.01,text:n("newAdd.besteExoticPairs")}]),De=te(()=>r.slippage),Z=te(()=>!g.value||!P.value),Le=te(()=>{var c,d;return!C.value&&!y.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(C.value)>Number(xe.value)||Number(y.value)>Number(en.value)?(console.log("addLiquidityBtnDisabled22222"),!0):on.value!==n("button.addLiquidity")&&on.value!==n("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",on.value),!0):x.value&&x.value&&x.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):(c=N==null?void 0:N.query)!=null&&c.action&&!H.value&&!((d=H.value)!=null&&d.currentPrice)?(console.log("addLiquidityBtnDisabled55555"),!0):!!(Number(C.value)<=0&&Number(y.value)<=0||!Ae.value&&Number(C.value)==0||!Se.value&&Number(y.value)==0||ee.value)}),on=te(()=>{var c,d,I;return x.value&&x.value.is_pause?"Pool Closed":!g.value||!P.value?n("modal.selectTokenModalTitle"):zt.value=="Sui"&&!Ue.value.includes(1e-4)&&!Ue.value.includes(5e-4)&&!Ue.value.includes(.0025)&&!Ue.value.includes(.01)&&!We.value[g==null?void 0:g.value.address]&&!We.value[(c=P.value)==null?void 0:c.address]?"Invalid Pool":(N.query.action||N.query.actions)&&!T.value&&Qt[V.value.chainName].hasCreatePool?(console.log("addLiquidityBtnDisabled11111"),"Select fee tier"):Z.value?n("modal.selectTokenModalTitle"):!Qt[V.value.chainName].hasCreatePool&&!x.value?n("button.poolNotFound"):Number(C.value)>Number(xe.value)?n("button.insufficientBalance",{name:g.value.symbol}):Number(y.value)>Number(en.value)?n("button.insufficientBalance",{name:P.value.symbol}):A.value?n("modal.selectTokenModalTitle"):(console.log(x.value,"==>poolInfo.value"),console.log(!x.value&&((d=N==null?void 0:N.query)==null?void 0:d.action),"===>!poolInfo.value && route?.query?.action"),!x.value&&g.value&&P.value&&((I=N==null?void 0:N.query)==null?void 0:I.action)=="create-pool"?n("newAdd.preview"):!Number(C.value)&&!Number(y.value)?n("button.enterAmount"):b.value!=="∞"&&Number(p.value)>=Number(b.value)?n("newAdd.invalidRange"):n("button.addLiquidity"))}),U=te(()=>{var c,d,I;return!x.value||Nn(V.value.addressHistTokens)||!V.value.addressHistTokens[(c=x.value)==null?void 0:c.poolAddress]?null:Object.fromEntries((I=V.value.addressHistTokens[(d=x.value)==null?void 0:d.poolAddress])==null?void 0:I.data.map(M=>[M.key,M.value]))}),J=te(()=>_.value?U.value&&Be(ie.value==7?U.value.before_7_d_contract_price_lowest:ie.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest,6)||0:U.value&&Be(new D(1).div(ie.value==7?U.value.before_7_d_contract_price_highest:ie.value==24?U.value.before_24_h_contract_price_highest:U.value.before_30_d_contract_price_highest).toString(),6)||0),Ze=te(()=>_.value?U.value&&Be(ie.value==7?U.value.before_7_d_contract_price_highest:ie.value==24?U.value.before_24_h_contract_price_highest:U.value.before_30_d_contract_price_highest,6)||0:(U.value&&Be(1/Number(ie.value==7?U.value.before_7_d_contract_price_lowest:ie.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest),6))==1/0?0:U.value&&Be(1/Number(ie.value==7?U.value.before_7_d_contract_price_lowest:ie.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest),6)||0),$e=Go(),g=R(),P=R();vo(()=>{document.body.clientWidth<750?(he.value=!1,e.value=!1):(he.value=!0,e.value=!0)});const Rt=c=>{var d,I;(d=x.value)==null||d.token_a.decimals,(I=x.value)==null||I.token_b.decimals,c!==p.value&&W.value=="full range"?(jt({key:"custom",...cn.value.custom}),console.log(cn.value.custom.min,"priceConfigObj.value[custom].min")):(W.value!=="full range"&&W.value!=="custom"&&(W.value="custom"),p.value=c)},qt=c=>{c!==b.value&&W.value=="full range"?jt({key:"custom",...cn.value.custom}):(W.value!=="full range"&&W.value!=="custom"&&(W.value="custom"),b.value=c)},Ut=()=>{var d;if(N.query.action)_.value=!_.value,H.value&&Po(Be(new D(1).div(H.value.currentPrice).toString(),(d=P==null?void 0:P.value)==null?void 0:d.decimals));else if(j.value=!0,j.value=!1,_.value=!_.value,p.value!==""&&b.value!==""&&p.value!=="0"&&b.value!=="∞"){const I=p.value,M=b.value;p.value=new D(1).div(M).toString(),b.value=new D(1).div(I).toString();const E=O.value,F=G.value;O.value=new D(1).div(F).toString(),G.value=new D(1).div(E).toString(),Y.value=!1}const c=g.value;g.value=P.value,P.value=c,f.value?C.value=y.value:y.value=C.value};Ie([p,b],([c,d])=>{console.log(c,d,"==>minPrice,maxPrice"),Number(c)!==0&&Number(d)!==0&&_n(),d!=="∞"&&Number(c)!==0&&Number(d)!==0&&Number(c)>=Number(d)?ee.value=!0:ee.value=!1,Number(c)==0&&Number(d)==0&&Ke.value&&(ee.value=!0,console.log("价格区间错误"))});const Yn=R(!1),Gn=R(!1),Ot=c=>{var d,I,M,E,F,K,de,ue,le;v.value=c,c==="fromCoin"?(h.value=((d=P.value)==null?void 0:d.address)||"",k.value=((I=g.value)==null?void 0:I.address)||"",((M=N==null?void 0:N.query)==null?void 0:M.action)=="create-pool"&&((E=N==null?void 0:N.query)==null?void 0:E.from)==="pool"?Gn.value=!0:Gn.value=!1,Yn.value=!1):(h.value=((F=g.value)==null?void 0:F.address)||"",k.value=((K=P.value)==null?void 0:K.address)||"",((de=N==null?void 0:N.query)==null?void 0:de.action)=="create-pool"&&((ue=N==null?void 0:N.query)==null?void 0:ue.from)==="pool"&&!We[(le=g.value)==null?void 0:le.address]?(console.log("0515###这里这里##fromCoin.value###",g.value),Yn.value=!0):Yn.value=!1,Gn.value=!1),q.value=!0},Re=R(null),qe=R(null),gt=R({}),yt=R({}),Bt=c=>{var d,I,M,E;A.value=!1,v.value==="fromCoin"?(((d=g.value)==null?void 0:d.address)===((I=Re.value)==null?void 0:I.address)?(P.value&&c.address.toLowerCase()===(P==null?void 0:P.value.address.toLowerCase())&&(P.value=null,qe.value=null,T.value=""),g.value=c):(g.value&&c.address.toLowerCase()===(g==null?void 0:g.value.address.toLowerCase())&&(g.value=null,Re.value=null,T.value=""),P.value=c),Re.value=c,N.query.action||(N.query.fee="")):(((M=P.value)==null?void 0:M.address)===((E=qe.value)==null?void 0:E.address)?(g.value&&c.address.toLowerCase()===(g==null?void 0:g.value.address.toLowerCase())&&(g.value=null,Re.value=null,T.value=""),P.value=c):(P.value&&c.address.toLowerCase()===(P==null?void 0:P.value.address.toLowerCase())&&(P.value=null,qe.value=null,T.value=""),g.value=c),qe.value=c,N.query.action||(N.query.fee="")),Po(""),q.value=!1},Et=c=>{c==="fromCoin"?(f.value=!0,V.value.chainName==="Aptos"?C.value=Number(xe.value)>0?g.value.symbol=="APT"?new D(Number(xe.value)).sub(new D(.1)).lt(new D(0))?"0":new D(Number(xe.value)).sub(new D(.1)).toString():String(xe.value):"":C.value=Number(xe.value)>0?g.value.symbol=="SUI"?new D(Number(xe.value)).sub(new D(.05)).lt(new D(0))?"0":new D(Number(xe.value)).sub(new D(.05)).toString():String(xe.value):""):(f.value=!1,V.value.chainName==="Aptos"?y.value=Number(en.value)>0?P.value.symbol=="APT"?new D(Number(en.value)).sub(new D(.1)).lt(new D(0))?"0":new D(Number(en.value)).sub(new D(.1)).toString():String(en.value):"":y.value=Number(en.value)>0?P.value.symbol=="SUI"?new D(Number(en.value)).sub(new D(.05)).lt(new D(0))?"0":new D(Number(en.value)).sub(new D(.05)).toString():String(en.value):"")},Ft=c=>{c==="fromCoin"?(f.value=!0,C.value=Number(xe.value)>0?Vt(new D(Number(xe.value)).div(2).toString(),g.value.decimals).toString():""):(f.value=!1,y.value=Number(en.value)>0?Vt(new D(Number(en.value)).div(2).toString(),P.value.decimals).toString():"")};Ie(C,(c,d)=>{console.log(C,"===>fromCoinAmount"),c==""&&f.value&&(y.value=""),c&&f.value&&_n()}),Ie(y,(c,d)=>{console.log(c,"===>>>>newValsda"),c==""&&!f.value&&(C.value=""),c&&!f.value&&_n()});const Dt=()=>{g.value=null,P.value=null,p.value="0",b.value="0",C.value="",y.value="",A.value=!0,T.value="",ne.value=!1,Ae.value=!0,Se.value=!0,j.value=!1},Pn=R(!1),{setIsShowSuccess:qn,setIsShowRejected:Un,setIsShowWaiting:rn,setTransactionDesc:it,setTransactionTxid:On,setPositiomNum:rt}=r,N=gr(),an=Nt(),Xn=te(()=>Qt[V.value.chainName].hasCreatePool);Ie(()=>[T.value,N.query.action,g.value,P.value,N.query.actions,Xn.value],([c,d,I,M,E,F])=>{!c&&(d=="create-pool"||E=="new-position")&&I&&M&&F?(ne.value=!0,j.value=!1):(!I||!M)&&(ne.value=!1)},{immediate:!0});const z=te(()=>an);Ie(()=>z.value.tokens,async c=>{if(c&&c.length>0){const d=c;if(N&&N.query&&N.query.tokena&&(console.log("0410###deposite###watch###route.query.tokena####",N.query.tokena),N.query.tokena)){const I=await X.value.getTokenBySymbol(d,N.query.tokena);g.value=I,Re.value=I}if(N&&N.query&&N.query.tokenb&&N.query.tokenb){const I=await X.value.getTokenBySymbol(d,N.query.tokenb);P.value=I,qe.value=I}}},{immediate:!0});const Bn=R({}),Ae=R(!1),Se=R(!1),at=R(),lt=R(),Ke=R(),yn=R(),_n=async()=>{var je,Ce,ln,Xe,Ne,He;if(!p.value&&!b.value)return!1;if(!C.value&&!y.value&&!p.value&&!b.value)return;const c=x.value?x.value:H.value;if(console.log(c,"===>poolInfos"),Nn(c))return;console.log("添加流动性预计算=====>");const{TickUtil:d,TickMath:I,getNearestTickByTick:M}=X.value,E=c==null?void 0:c.token_a.decimals,F=c==null?void 0:c.token_b.decimals;let K,de,ue,le,se,pe,ke,Te,ge=c.current_tick_index,ve;if(c.token_a.address.toLowerCase()===g.value.address.toLowerCase()&&c.token_b.address.toLowerCase()===P.value.address.toLowerCase()?ve=!0:ve=!1,console.log(ve,"=====>directs"),console.log("currentTickIndex####",ge),console.log("currentTickIndex####",ge),console.log("currentTickIndex####",ge),p.value==="0"&&b.value==="∞")ue=d.getMinIndex(Number(c.tickSpacing)),le=d.getMaxIndex(Number(c.tickSpacing)),se=I.tickIndexToSqrtPriceX64(ue),pe=I.tickIndexToSqrtPriceX64(le);else if(W.value=="custom"||N.query.action){console.log(ve,"===>directs1866"),ve?(K=Number(p.value),de=Number(b.value)):(K=new D(1).div(b.value).toString(),de=new D(1).div(p.value).toString()),console.log("0518###pre###directs###",ve),console.log("0518###pre###minPrice###",p.value),console.log("0518###pre###maxPrice###",b.value),console.log("0518###pre###poolInfos###",c),console.log("0518###pre###decimalsA###",E),console.log("0518###pre###decimalsB###",F),console.log("0518###pre###currentTickIndex###",ge),console.log(K,de,"min max1875"),console.log(p.value,b.value,"===>maxPrice.value");try{ke=K==0?-443636:I.priceToTickIndex(new D(K),E,F)}catch{ke=-443636}try{Te=I.priceToTickIndex(new D(de),E,F)}catch{Te=443636}ue=M(ke,Number(c.tickSpacing)),le=M(Te,Number(c.tickSpacing)),console.log("0523####min####",K),console.log("0523####max####",de),se=I.priceToSqrtPriceX64(new D(K),E,F);try{pe=I.priceToSqrtPriceX64(new D(de),E,F)}catch{console.log("0523###test###max###",de),de===1/0&&(console.log("0523###test###max###11111"),pe=I.tickIndexToSqrtPriceX64(d.getMaxIndex(Number(c.tickSpacing))))}console.log(ue,"===>tick_lower"),console.log(le,"===>tick_upper"),console.log("0518###pre###tick_lower###",ue),console.log("0518###pre###tick_upper###",le)}else ue=(je=cn.value[W.value])==null?void 0:je.lower,le=(Ce=cn.value[W.value])==null?void 0:Ce.upper,se=I.tickIndexToSqrtPriceX64(ue),pe=I.tickIndexToSqrtPriceX64(le);if(b.value!=="∞"&&ue>=le){Ae.value=!0,C.value="",Se.value=!0,y.value="";return}if(console.log(le,ge,ue,"1922"),b.value==="∞"||ge>ue&&ge<le){Ae.value=!1,Se.value=!1;let Ee;if(C.value||y.value){if(f.value){const En=new D(C.value).mul(Math.pow(10,g.value.decimals)).toString();Ee=new Wn(En)}else{const En=new D(y.value).mul(Math.pow(10,P.value.decimals)).toString();Ee=new Wn(En)}console.log(ve,"======>directs");const{liquidityAmount:_e,tokenMaxA:sn,tokenMaxB:Ye,tokenMaxAOrigin:Ge,tokenMaxBOrigin:In}=X.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:c.token_a,tokenB:c.token_b,lowerTick:ue,upperTick:le,coinAmount:Ee,iscoinA:ve?f.value:!f.value,roundUp:!0,slippage:Number(De.value)/100,curSqrtPrice:new Wn(c.current_sqrt_price)});Bn.value={liquidityAmount:_e,tokenMaxA:sn,tokenMaxB:Ye,tokenMaxAOrigin:Ge,tokenMaxBOrigin:In},console.log(_e,sn,Ye,Ge,In,"preAdd"),ve?f.value?y.value=Number(Ye)>0?Ye:"":C.value=Number(sn)>0?sn:"":f.value?y.value=sn:C.value=Ye}}else if(ge>=le){if(ve?C.value="":y.value="",Ae.value=ve,Se.value=!ve,(ln=N==null?void 0:N.query)!=null&&ln.action&&(Ae.value=!0,Se.value=!0),C.value||y.value){let Ee;if(ve){const _e=new D(y.value).mul(Math.pow(10,(Xe=P.value)==null?void 0:Xe.decimals)).toString();Ee=new Wn(_e),Bn.value={liquidityAmount:X.value.estimateLiquidityForCoinB(se,pe,Ee),tokenMaxA:0,tokenMaxB:y.value}}else{const _e=new D(C.value).mul(Math.pow(10,(Ne=g.value)==null?void 0:Ne.decimals)).toString();Ee=new Wn(_e),Bn.value={liquidityAmount:X.value.estimateLiquidityForCoinB(se,pe,Ee),tokenMaxA:0,tokenMaxB:C.value}}}}else if(ge<=ue){if(Ae.value=!ve,Se.value=ve,(He=N==null?void 0:N.query)!=null&&He.action&&(Ae.value=!0,Se.value=!0),ve?y.value="":C.value="",C.value||y.value){let Ee;if(ve){const _e=new D(C.value).mul(Math.pow(10,g.value.decimals)).toString();Ee=new Wn(_e),console.log(se,"minPriceX64===>"),console.log(pe,"maxPriceX64===>maxPriceX64"),console.log(_e,"===>amount"),Bn.value={liquidityAmount:X.value.estimateLiquidityForCoinA(se,pe,Ee),tokenMaxA:C.value,tokenMaxB:0}}else{const _e=new D(y.value).mul(Math.pow(10,P.value.decimals)).toString();Ee=new Wn(_e),Bn.value={liquidityAmount:X.value.estimateLiquidityForCoinA(se,pe,Ee),tokenMaxA:y.value,tokenMaxB:0}}}}else Ae.value=!0,C.value="",Se.value=!0,y.value=""},zn=R(0);Ie(()=>{var c;return(c=N.query)==null?void 0:c.fee},c=>{c&&(zn.value=c,T.value=Number(c)*100+"% "+n("common.feeTier"))},{immediate:!0,deep:!0});const st=te(()=>{var E,F,K,de,ue;const c=(E=N==null?void 0:N.query)==null?void 0:E.fee,d=(F=N==null?void 0:N.query)==null?void 0:F.tokena,I=(K=N==null?void 0:N.query)==null?void 0:K.tokenb;let M=null;console.log("0501###basePoolInfo###tokena###",d),console.log("0501###basePoolInfo###tokenb###",I),console.log("0501###basePoolInfo###fromCoin###",(de=g==null?void 0:g.value)==null?void 0:de.address),console.log("0501###basePoolInfo###toCoin###",(ue=P==null?void 0:P.value)==null?void 0:ue.address),console.log("0501###basePoolInfo###fee###",c),console.log(z.value.poolConfigList,"===>pools.value.poolConfigList");for(let le=0;le<z.value.poolConfigList.length;le++){const se=z.value.poolConfigList[le];console.log(se,"p===>"),!d||!I?M={}:(se.token_a.address.toUpperCase()===(d==null?void 0:d.toUpperCase())&&se.token_b.address.toUpperCase()===(I==null?void 0:I.toUpperCase())||se.token_b.address.toUpperCase()===(d==null?void 0:d.toUpperCase())&&se.token_a.address.toUpperCase()===(I==null?void 0:I.toUpperCase()))&&(M=se)}return console.log("0501###baseInfo###",M),M}),x=te(()=>{var d,I,M,E,F,K,de,ue,le,se,pe,ke,Te;const c=(d=N==null?void 0:N.query)==null?void 0:d.fee;if(g.value&&P.value){let ge=null;if(c)for(const je in z.value.poolsObj){const Ce=z.value.poolsObj[je];(Ce.token_a.address.toUpperCase()===((M=(I=g==null?void 0:g.value)==null?void 0:I.address)==null?void 0:M.toUpperCase())&&Ce.token_b.address.toUpperCase()===((F=(E=P==null?void 0:P.value)==null?void 0:E.address)==null?void 0:F.toUpperCase())&&Number(Ce.fee)==Number(zn.value)||Ce.token_b.address.toUpperCase()===((K=g==null?void 0:g.value.address)==null?void 0:K.toUpperCase())&&Ce.token_a.address.toUpperCase()===((ue=(de=P==null?void 0:P.value)==null?void 0:de.address)==null?void 0:ue.toUpperCase())&&Number(Ce.fee)==Number(zn.value))&&(ge=Ce)}const ve=[];if(!((le=N==null?void 0:N.query)!=null&&le.action)&&(!c||!ge)){for(const je in z.value.poolsObj){const Ce=z.value.poolsObj[je];(Ce.token_a.address.toUpperCase()===((se=g==null?void 0:g.value.address)==null?void 0:se.toUpperCase())&&Ce.token_b.address.toUpperCase()===((pe=P.value.address)==null?void 0:pe.toUpperCase())||Ce.token_b.address.toUpperCase()===((ke=g==null?void 0:g.value.address)==null?void 0:ke.toUpperCase())&&Ce.token_a.address.toUpperCase()===((Te=P.value.address)==null?void 0:Te.toUpperCase()))&&ve.push(Ce)}console.log(ve,"result2408===>"),ve&&ve.length>0&&(ge=ve.sort((je,Ce)=>{const ln=je.coinAmountA+je.coinAmountB;return Ce.coinAmountA+Ce.coinAmountB-ln})[0]),console.log(ve,"result===>2351")}return ge&&!Nn(ge)?ge:null}return null}),L=te(()=>{var M,E;const c=(M=g==null?void 0:g.value)==null?void 0:M.address,d=(E=P==null?void 0:P.value)==null?void 0:E.address;let I=null;for(let F=0;F<z.value.poolConfigList.length;F++){const K=z.value.poolConfigList[F];!c||!d?I={}:(K.token_a.address.toUpperCase()===(c==null?void 0:c.toUpperCase())&&K.token_b.address.toUpperCase()===(d==null?void 0:d.toUpperCase())||K.token_b.address.toUpperCase()===(c==null?void 0:c.toUpperCase())&&K.token_a.address.toUpperCase()===(d==null?void 0:d.toUpperCase()))&&(I=K)}return console.log("0501###baseInfo###",I),I});Ie(()=>[st.value,x.value,z.value.recommendRangesObj],(c,d)=>{var I,M,E,F,K;c[0]&&!c[1]&&c[2]&&!Nn(c[2])&&(!d||c[0]&&((I=c[0])==null?void 0:I.address)!==d[0]&&((M=d[0])!=null&&M.address))&&(E=c[0])!=null&&E.address&&!((F=N==null?void 0:N.query)!=null&&F.action)&&an.setSinglePool(c[0],c[2][(K=c[0])==null?void 0:K.address],V.value.chainName)},{immediate:!0,deep:!0});const cn=R({}),Qn=async(c,d)=>{var I,M,E,F;if(console.log("deposit##poolInfoWatch###value####",c),c){const{TickMath:K,getNearestTickByTick:de}=X.value;d&&(j.value=!0,Ae.value=!1,Se.value=!1),c.token_a.address.toLowerCase()===g.value.address.toLowerCase()&&c.token_b.address.toLowerCase()===P.value.address.toLowerCase()?_.value=!0:_.value=!1,Y.value=!0;const ue=c.token_a.decimals,le=c.token_b.decimals;T.value=c.fee*100+"% "+n("common.feeTier");const se=c.current_tick_index;Ke.value=K.sqrtPriceX64ToPrice(c.current_sqrt_price,ue,le).toString(),yn.value=String(1/Ke.value);const pe=await X.value.getTicks(c);if(Pe.value=pe?X.value.getTickDataFromUrlData(pe):[],d){let ke=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[c.address]&&z.value.poolPriceConfigObj[c.address].recommend_ranges||{};const Te=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[c.address]&&z.value.poolPriceConfigObj[c.address].type||"",ge=se-Number(Te=="unstable"?Number(c.tickSpacing)*2:Number(c.tickSpacing)*3),ve=se+Number(Te=="unstable"?Number(c.tickSpacing)*2:Number(c.tickSpacing)*3),je=(M=(I=x==null?void 0:x.value)==null?void 0:I.token_a)==null?void 0:M.decimals,Ce=(F=(E=x==null?void 0:x.value)==null?void 0:E.token_b)==null?void 0:F.decimals,ln=X.value.TickMath.tickIndexToPrice(ge,je,Ce).toString(),Xe=X.value.TickMath.tickIndexToPrice(ve,je,Ce).toString();ke["full range"]={lower:-443636,upper:443636},ke.custom={lower:ge,upper:ve,minPrice:ln,maxPrice:Xe};const Ne=[];for(let He in ke)ke[He]&&Ne.push({...ke[He],key:He});hn.value=Ne,Te?c.isSelfBuilt?W.value="custom":Te=="stable"?W.value="suggested":W.value="passive":W.value="custom",cn.value=ke,jt({key:W.value,...ke[W.value]}),console.log(hn,"===>currentPriceTabList")}j.value=!1}else j.value=!1},ut=te(()=>an.getPoolInfoSuccess);Ie(()=>x.value,(c,d)=>{var I,M,E,F,K,de,ue,le,se,pe,ke,Te;console.log("0419###poolInfo###watch###",c),console.log("0419###poolInfo###pools.value.poolsObj###",z.value.poolsObj),c?((!d||c.poolAddress!==d.poolAddress||c.current_sqrt_price!==d.current_sqrt_price)&&Qn(c,!d||c.poolAddress!==d.poolAddress),(N==null?void 0:N.name)=="deposit"&&$e.push(`/deposit?poolAddress=${c==null?void 0:c.address}&tokena=${(I=g==null?void 0:g.value)==null?void 0:I.address}&tokenb=${(M=P==null?void 0:P.value)==null?void 0:M.address}&fee=${c==null?void 0:c.fee}`)):((E=N==null?void 0:N.query)==null?void 0:E.actions)=="new-position"||(!L.value&&Xn.value&&((F=g==null?void 0:g.value)!=null&&F.address||(K=P==null?void 0:P.value)!=null&&K.address)?(T.value="",p.value="0",b.value="0",Ae.value=!1,Se.value=!1,j.value=!1,Ke.value="",yn.value="",console.log("0501####333333",g==null?void 0:g.value),(N==null?void 0:N.name)=="deposit"&&$e.push(`/deposit?action=create-pool&tokena=${(de=g==null?void 0:g.value)==null?void 0:de.address}&tokenb=${(ue=P==null?void 0:P.value)==null?void 0:ue.address}&from=${(le=N==null?void 0:N.query)==null?void 0:le.from}`)):Xn.value&&!c&&!((se=N==null?void 0:N.query)!=null&&se.action)&&ut.value&&!st.value?(T.value="",p.value="0",b.value="0",Ae.value=!1,Se.value=!1,j.value=!1,Ke.value="",yn.value="",console.log("0501####222222"),(N==null?void 0:N.name)=="deposit"&&$e.push(`/deposit?action=create-pool&tokena=${(pe=g==null?void 0:g.value)==null?void 0:pe.address}&tokenb=${(ke=P==null?void 0:P.value)==null?void 0:ke.address}&from=${(Te=N==null?void 0:N.query)==null?void 0:Te.from}`)):(Ae.value=!1,Se.value=!1,j.value=!1,Ke.value="",yn.value="")),console.log(!st.value,"===>getPoolInfoSuccess.value&& !basePoolInfo.value")},{immediate:!0});const xe=te(()=>i.value.assets&&g.value&&i.value.assets[g.value.address]?Ni(i.value.assets[g.value.address].balance,g.value.decimals):"0"),en=te(()=>i.value.assets&&P.value&&i.value.assets[P.value.address]?Ni(i.value.assets[P.value.address].balance,P.value.decimals):"0"),bt=async()=>{console.log("0412###resetTickList####");const c=await X.value.getTicks(x.value);console.log("0412###resetTickList###result####",c);const d=c?X.value.getTickDataFromUrlData(c):[];Pe.value=d,console.log("0412###resetTickList###tickList####",d)},Co=Ea(),Jn=te(()=>z.value.currentPositionInfo),la=async c=>{var se,pe,ke,Te,ge,ve,je,Ce,ln,Xe;console.log(x.value,"===> poolInfo.value"),Pn.value=!1,z.value.currentPositionInfo={},On(""),it(n("tips.increaseLiquiditySuccess",{from:Ae.value?"":`${C.value} ${(se=g.value)==null?void 0:se.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(pe=P.value)==null?void 0:pe.symbol}`})),rn(!0);const d=_.value?f.value:!f.value;let I,M,E,F,K,de;const ue=x.value.token_a.decimals,le=x.value.token_b.decimals;if(p.value==="0"&&b.value==="∞")E=X.value.TickUtil.getMinIndex(Number(x.value.tickSpacing)),F=X.value.TickUtil.getMaxIndex(Number(x.value.tickSpacing));else if(W.value=="custom"){_.value?(I=Number(p.value),M=Number(b.value)):(I=new D(1).div(b.value).toString(),M=new D(1).div(p.value).toString()),console.log("0519###toAdd###min###",I),console.log("0519###toAdd###max###",M),console.log("0519###toAdd###minPrice.value###",p.value),console.log("0519###toAdd###maxPrice.value###",b.value);try{K=I==0?X.value.TickUtil.getMinIndex(Number(x.value.tickSpacing)):X.value.TickMath.priceToTickIndex(new D(I),ue,le)}catch{K=X.value.TickUtil.getMinIndex(Number(x.value.tickSpacing))}try{de=X.value.TickMath.priceToTickIndex(new D(M),ue,le)}catch{de=X.value.TickUtil.getMaxIndex(Number(x.value.tickSpacing))}E=X.value.getNearestTickByTick(K,Number(x.value.tickSpacing)),F=X.value.getNearestTickByTick(de,Number(x.value.tickSpacing))}else E=cn.value[W.value].lower,F=cn.value[W.value].upper;try{const Ne=await X.value.getAddLiquidityTransactionPayload({pool:{poolAddress:x.value.poolAddress,token_a:x.value.token_a,token_b:x.value.token_b},amount:f.value?C.value:y.value,fix_amount_a:d,tick_lower:E,tick_upper:F,index:0,slippage:Number(De.value)/100,roundUp:!0});let He;if(V.value.chainName==="Aptos")He=await i.value.currentWallet.signAndSubmitTransaction(Ne);else{const Ee=await i.value.currentWallet.signAndExecuteTransactionBlock(Ne);He=X.value.handleTx(Ee)}if(console.log("0410###tx###",He),He&&He.hash){On(He.hash),rn(!1),qn(!0);const Ee=li();let _e;x.value.needReverse?x.value.token_a.address.toLowerCase()===g.value.address.toLowerCase()&&x.value.token_b.address.toLowerCase()===P.value.address.toLowerCase()?_e=!1:_e=!0:x.value.token_a.address.toLowerCase()===g.value.address.toLowerCase()&&x.value.token_b.address.toLowerCase()===P.value.address.toLowerCase()?_e=!0:_e=!1,console.log(_e,"===>directs");const sn={title:"Supplied",desc:n("tips.addLiquiditySuccessText",{from:Ae.value?"":`${C.value} ${(ke=g.value)==null?void 0:ke.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(Te=P.value)==null?void 0:Te.symbol}`}),hash:He.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:_e?(ge=g.value)==null?void 0:ge.address:(ve=P.value)==null?void 0:ve.address,numa:_e?C.value:y.value,logoa:_e?z.value.tokensObj&&g.value&&g.value.address&&z.value.tokensObj[g.value.address]&&z.value.tokensObj[g.value.address].logoURI:z.value.tokensObj&&P.value&&P.value.address&&z.value.tokensObj[P.value.address]&&z.value.tokensObj[P.value.address].logoURI,tokenb:_e?(Ce=P.value)==null?void 0:Ce.address:(je=g.value)==null?void 0:je.address,numb:_e?y.value:C.value,logob:_e?z.value.tokensObj&&P.value&&P.value.address&&z.value.tokensObj[P.value.address]&&z.value.tokensObj[P.value.address].logoURI:z.value.tokensObj&&g.value&&g.value.address&&z.value.tokensObj[g.value.address]&&z.value.tokensObj[g.value.address].logoURI},text:`Deopsit ${Ae.value?"":`${C.value} ${(ln=g.value)==null?void 0:ln.symbol}`} ${!Ae.value&&!Se.value?"and":""} ${Se.value?"":`${y.value} ${(Xe=P.value)==null?void 0:Xe.symbol}`}`};V.value.chainName!=="Aptos"&&(sn.res=He.res),X.value.showTransitionPending(sn);const Ye=await X.value.watchTransaction(sn,!0);if(Ye.status){if(qn(!1),z.value.setCurrentPositionLoading(!0),s.value=!0,console.log(Ye.nftInfo,"===> watchInfo.nftInfo"),V.value.chainName==="Aptos")await z.value.setCurrentPositionInfo(Ye.nftInfo[0].data.id.creator,Ye.nftInfo[0].data.id.collection,Ye.nftInfo[0].data.name,V.value.chainName),c&&await Co.subscribePosition({pool_address:Jn.value.poolAddress,position_index:Jn.value.index},Jn.value.nftHash);else{const Ge=Ye.nftInfo,In=await Mi(2e3);await z.value.setCurrentPositionInfo(Ge==null?void 0:Ge.pool,"","",V.value.chainName,Ge==null?void 0:Ge.position),await Mi(1e3),console.log("0529###nftInfo###",Ge),console.log("0529###currentPositionInfo.value.index###",Jn.value.index),c&&await Co.subscribePosition({pool_address:Jn.value.poolAddress,position_index:Jn.value.index},Jn.value.nftHash)}setTimeout(()=>{an.updateCurrentPools(x.value.poolAddress,V.value.chainName),X.value.getAccount(i.value.address)},3e3),setTimeout(async()=>{bt()},3e3)}rt()}else rn(!1),Un(!0);C.value="",y.value=""}catch(Ne){C.value="",y.value="",console.log("0330###Add liquidity Error###",Ne),rn(!1),Un(!0)}},sa=c=>{switch(c){case"active":return n("newAdd.activeTips");case"passive":return n("newAdd.passiveTips");case"full range":return n("newAdd.fullRangTips");case"suggested":return n("newAdd.suggestedTips");case"custom":return n("newAdd.customTips")}},ua=c=>{switch(c){case"suggested":return n("newAdd.suggested");case"active":return n("newAdd.active");case"passive":return n("newAdd.conservative");case"full range":return n("newAdd.fullRange");case"custom":return n("newAdd.custom")}},jt=c=>{console.log("priceTab====>",c),console.log("priceTab###poolInfo###",x.value),W.value=c.key.toLowerCase();const d=x.value.token_a.decimals,I=x.value.token_b.decimals,{lower:M,upper:E}=c,F=X.value.TickMath.tickIndexToPrice(M,d,I).toString(),K=X.value.TickMath.tickIndexToPrice(E,d,I).toString();if(c.key=="full range"){at.value=M,lt.value=E,Je(!0),_n();return}console.log(_.value,"===>direct.value"),_.value?(O.value=String(F),p.value=String(F),G.value=String(K),b.value=String(K),at.value=M,lt.value=E,_n()):(O.value=String(1/Number(K)),p.value=String(1/Number(K)),G.value=String(1/Number(F)),b.value=String(1/Number(F)),at.value=X.value.TickMath.priceToTickIndex(new D(1/Number(K)),d,I),lt.value=X.value.TickMath.priceToTickIndex(new D(1/Number(F)),d,I),_n())},ca=te(()=>z.value.tokensObj&&g.value.address&&z.value.tokensObj[g.value.address]&&z.value.tokensObj[g.value.address].logoURI),da=te(()=>z.value.tokensObj&&P.value.address&&z.value.tokensObj[P.value.address]&&z.value.tokensObj[P.value.address].logoURI),li=()=>{var I,M,E,F,K,de,ue,le;let c=null;const d=z.value.poolConfigList;for(let se=0;se<d.length;se++){const pe=d[se];if(pe.token_a.address.toUpperCase()===((M=(I=g==null?void 0:g.value)==null?void 0:I.address)==null?void 0:M.toUpperCase())&&pe.token_b.address.toUpperCase()===((F=(E=P==null?void 0:P.value)==null?void 0:E.address)==null?void 0:F.toUpperCase())||pe.token_b.address.toUpperCase()===((de=(K=g==null?void 0:g.value)==null?void 0:K.address)==null?void 0:de.toUpperCase())&&pe.token_a.address.toUpperCase()===((le=(ue=P==null?void 0:P.value)==null?void 0:ue.address)==null?void 0:le.toUpperCase())){c=pe;break}}return c},fa=c=>{var I,M,E,F,K,de,ue,le,se,pe;const d=li();if(d&&(Re.value=d.needReverse?d==null?void 0:d.token_b:d==null?void 0:d.token_a,qe.value=d.needReverse?d==null?void 0:d.token_a:d==null?void 0:d.token_b,g.value=d.needReverse?d==null?void 0:d.token_b:d==null?void 0:d.token_a,P.value=d.needReverse?d==null?void 0:d.token_a:d==null?void 0:d.token_b,console.log("0524###test###11111###samePoolInfo###",d),_.value=g.value.address===((I=d==null?void 0:d.token_a)==null?void 0:I.address)),Ue.value.includes(c.fee))T.value=c.label,zn.value=c.fee,$e.push(`/deposit?tokena=${d?d.needReverse?(E=d==null?void 0:d.token_b)==null?void 0:E.address:(M=d==null?void 0:d.token_a)==null?void 0:M.address:_.value?g.value.address:P.value.address}&tokenb=${d?d.needReverse?(K=d==null?void 0:d.token_a)==null?void 0:K.address:(F=d==null?void 0:d.token_b)==null?void 0:F.address:_.value?P.value.address:g.value.address}&fee=${c.fee}`);else{if(console.log(We[g.value.address],"filterCreatePoolCoin[fromCoin.value.address]"),console.log(We[P.value.address],"filterCreatePoolCoin[toCoin.value.address]"),console.log(We.value,"filterCreatePoolCoin===>"),V.value.chainName!=="Aptos"&&!We.value[g.value.address]&&!We.value[P.value.address])return;zn.value=c.fee,T.value=c.label,x.value&&(p.value="",b.value=""),C.value="",y.value="",Ke.value="",yn.value="",p.value="",b.value="",Ht.value="",Xt.value="",$e.push(`/deposit?action=create-pool&tokena=${d?d.needReverse?(ue=d==null?void 0:d.token_b)==null?void 0:ue.address:(de=d==null?void 0:d.token_a)==null?void 0:de.address:_.value?g.value.address:P.value.address}&tokenb=${d?d.needReverse?(se=d==null?void 0:d.token_a)==null?void 0:se.address:(le=d==null?void 0:d.token_b)==null?void 0:le.address:_.value?P.value.address:g.value.address}&fee=${c.fee}&from=${(pe=N==null?void 0:N.query)==null?void 0:pe.from}`)}},pa=R(!1),va=()=>{x.value,Pn.value=!0},H=R(null),Ht=R(""),Xt=R(""),Po=c=>{var de,ue,le,se,pe,ke,Te,ge,ve,je,Ce,ln;if(c?(Ht.value=c,Ke.value=c,yn.value=c,Xt.value=yn.value,j.value=!1):(Ht.value="",Ke.value="",yn.value="",Xt.value=""),!((de=Re.value)!=null&&de.address)||!((ue=qe.value)!=null&&ue.address))return;let d=!1;const I=z.value.poolConfigList;let M=null;for(let Xe=0;Xe<I.length;Xe++){const Ne=I[Xe];if(Ne.token_a.address.toUpperCase()===((se=(le=Re==null?void 0:Re.value)==null?void 0:le.address)==null?void 0:se.toUpperCase())&&Ne.token_b.address.toUpperCase()===((ke=(pe=qe==null?void 0:qe.value)==null?void 0:pe.address)==null?void 0:ke.toUpperCase())){d=Ne.needReverse,M=Ne;break}else if(Ne.token_b.address.toUpperCase()===((ge=(Te=Re==null?void 0:Re.value)==null?void 0:Te.address)==null?void 0:ge.toUpperCase())&&Ne.token_a.address.toUpperCase()===((je=(ve=qe==null?void 0:qe.value)==null?void 0:ve.address)==null?void 0:je.toUpperCase())){d=Ne.needReverse,M=Ne;break}}let E=!1;X.value.getIsSortedSymbols((Ce=Re.value)==null?void 0:Ce.address,(ln=qe.value)==null?void 0:ln.address)&&(E=!0);let F;E&&!_.value?F=!0:E&&_.value||!E&&_.value?F=!1:F=!0,console.log("0518###c####direct.value####",_.value),console.log("0518###c####createPoolNeedReverse####",E),console.log("0518###c####newDirect####",F);const K=V.value.chainName=="Aptos"?Up:Op;if(g.value&&P.value&&c){const Xe=M?M==null?void 0:M.token_a.decimals:E?qe.value.decimals:Re.value.decimals,Ne=M?M==null?void 0:M.token_b.decimals:E?Re.value.decimals:qe.value.decimals,He=c&&X.value.TickMath.priceToSqrtPriceX64(F?new D(1/c):new D(c),Xe,Ne);console.log(He,"===>current_sqrt_price");const Ee=c&&X.value.TickMath.priceToSqrtPriceX64(new D(1).div(c),g.value.decimals,P.value.decimals),_e=X.value.TickMath.priceToTickIndex(F?new D(1).div(c):new D(c),Xe,Ne,K[N.query.fee]),sn=_e-K[N.query.fee]*5,Ye=_e+K[N.query.fee]*5,Ge=X.value.TickMath.tickIndexToPrice(sn,Xe,Ne).toString(),In=X.value.TickMath.tickIndexToPrice(Ye,Xe,Ne).toString();F?(p.value=String(1/In),b.value=String(1/Ge),O.value=String(1/In),G.value=String(1/Ge)):(p.value=Ge,b.value=In,O.value=Ge,G.value=In),console.log("0518###c####createPoolFromCoin.value####",Re.value),console.log("0518###c####createPoolToCoin.value####",qe.value),console.log("0518###c####createPoolNeedReverse####",E);const En={token_a:M?M.token_a:E?qe.value:Re.value,token_b:M?M.token_b:E?Re.value:qe.value,isCreate:!0,tickSpacing:K[N.query.fee],currentPrice:c,current_sqrt_price:He,tick_lower:sn,tick_upper:Ye,current_tick_index:_e,currentPriceReverse:$t(String(1/c),6),reverse_current_sqrt_price:Ee,needReverse:d,fee:N.query.fee};H.value=En,console.log("0518###c####poolInfos####",En),_n()}else H.value=null,p.value="",b.value=""},ma=async()=>{var le,se,pe,ke;if(V.value.chainName!=="Aptos"){si();return}Pn.value=!1;let c,d,I,M,E,F;const K=Re.value.decimals,de=qe.value.decimals;On(""),it(n("tips.increaseLiquiditySuccess",{from:Ae.value?"":`${C.value} ${(le=g.value)==null?void 0:le.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(se=P.value)==null?void 0:se.symbol}`})),rn(!0),p.value==="0"&&b.value==="∞"?(I=X.value.TickUtil.getMinIndex(Number(H.value.tickSpacing)),M=X.value.TickUtil.getMaxIndex(Number(H.value.tickSpacing))):(_.value?(c=Number(p.value),d=Number(b.value)):(c=1/Number(b.value),d=1/Number(p.value)),E=c==0?-443636:X.value.TickMath.priceToTickIndex(new D(c),K,de),F=X.value.TickMath.priceToTickIndex(new D(d),K,de),I=X.value.getNearestTickByTick(E,Number(H.value.tickSpacing)),M=X.value.getNearestTickByTick(F,Number(H.value.tickSpacing)));const ue=_.value?f.value:!f.value;try{const Te=await X.value.getCreatPoolTransactionPayload({coinTypeA:Re.value.address,coinTypeB:qe.value.address,tick_spacing:Number(H.value.tickSpacing),initialize_sqrt_price:new Wn(H.value.current_sqrt_price),uri:"",current_tick_index:H.value.current_tick_index,max_amount_a:_.value?C.value:y.value,max_amount_b:_.value?y.value:C.value,tick_lower:I,tick_upper:M,slippage:Number(De.value)/100,decimalsA:K,decimalsB:de,fix_amount_a:ue,liquidityInput:Bn.value});let ge;if(console.log(JSON.stringify(Te),"===>creatPoolPayload"),V.value.chainName==="Aptos")ge=await i.value.currentWallet.signAndSubmitTransaction(Te);else{const ve=await i.value.currentWallet.signAndExecuteTransactionBlock(Te);ge=X.value.handleTx(ve)}if(ge&&ge.hash){On(ge.hash),rn(!1),qn(!0);const ve={title:"Created pool",desc:"Pool created successfully ",hash:ge.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(pe=g.value)==null?void 0:pe.address}`,numa:Ae.value?"":`- ${C.value}`,logoa:z.value.tokensObj&&g.value&&g.value.address&&z.value.tokensObj[g.value.address]&&z.value.tokensObj[g.value.address].logoURI,tokenb:`${(ke=P.value)==null?void 0:ke.address}`,numb:Se.value?"":`- ${y.value}`,logob:z.value.tokensObj&&P.value&&P.value.address&&z.value.tokensObj[P.value.address]&&z.value.tokensObj[P.value.address].logoURI},text:"Pool created successfully"};V.value.chainName!=="Aptos"&&(ve.res=ge.res),X.value.showTransitionPending(ve),(await X.value.watchTransaction(ve,!0)).status&&(qn(!1),l.value=!0,setTimeout(()=>{an.setPoolConfigList(V.value.chainName,V.value.filterCoinsObj),X.value.getAccount(i.value.address)},1e3)),rt()}else rn(!1),Un(!0);C.value="",y.value=""}catch(Te){an.setPoolConfigList(V.value.chainName,V.value.filterCoinsObj),Pn.value=!1,console.log(Te,"error===>"),C.value="",y.value="",rn(!1),Un(!0)}},si=async()=>{var Te,ge,ve,je,Ce,ln,Xe,Ne,He,Ee,_e,sn,Ye,Ge,In,En,ci,di,fi,pi,vi,mi,hi,gi,yi,bi,ki,wi,Ci,Pi,_i,Ii,$i,Ai,Si,Ti;Pn.value=!1;let c=!1;X.value.getIsSortedSymbols(Re.value.address,qe.value.address)&&(c=!0),On("");const d=Ae.value?"":`${C.value} ${(Te=g.value)==null?void 0:Te.symbol}`,I=Se.value?"":`${y.value} ${(ge=P.value)==null?void 0:ge.symbol}`;console.log("0424###createPoolFromCoin###",Re.value),console.log("0424###createPoolToCoin###",qe.value),console.log("0424###needReverse###",c),console.log("0424###createPoolInfo?.value?.needReverse###",(ve=H==null?void 0:H.value)==null?void 0:ve.needReverse),it(n("tips.increaseLiquiditySuccess",{from:!c&&!((je=H==null?void 0:H.value)!=null&&je.needReverse)||c&&((Ce=H==null?void 0:H.value)!=null&&Ce.needReverse)?d:I,and:!Ae.value&&!Se.value?"and":"",to:!c&&!((ln=H==null?void 0:H.value)!=null&&ln.needReverse)||c&&((Xe=H==null?void 0:H.value)!=null&&Xe.needReverse)?I:d})),rn(!0);let M="",E="",F="",K="",de="",ue="",le=0,se=0,pe=!1,ke;if(c||(Ne=H==null?void 0:H.value)!=null&&Ne.needReverse){const Vn=c&&!((He=H==null?void 0:H.value)!=null&&He.needReverse);M=Vn?(Ye=(sn=H==null?void 0:H.value)==null?void 0:sn.token_b)==null?void 0:Ye.address:(_e=(Ee=H==null?void 0:H.value)==null?void 0:Ee.token_a)==null?void 0:_e.address,E=Vn?(ci=(En=H==null?void 0:H.value)==null?void 0:En.token_a)==null?void 0:ci.address:(In=(Ge=H==null?void 0:H.value)==null?void 0:Ge.token_b)==null?void 0:In.address,F=Vn?(vi=(pi=H==null?void 0:H.value)==null?void 0:pi.token_b)==null?void 0:vi.decimals:(fi=(di=H==null?void 0:H.value)==null?void 0:di.token_a)==null?void 0:fi.decimals,K=Vn?(yi=(gi=H==null?void 0:H.value)==null?void 0:gi.token_a)==null?void 0:yi.decimals:(hi=(mi=H==null?void 0:H.value)==null?void 0:mi.token_b)==null?void 0:hi.decimals,(bi=H==null?void 0:H.value)!=null&&bi.needReverse?(de=_.value?C.value:y.value,ue=_.value?y.value:C.value,le=_.value?Number(p.value):1/Number(b.value),se=_.value?Number(b.value):1/Number(p.value),pe=_.value?f.value:!f.value,ke=_.value?Ke.value:1/Number(Ke.value)):(de=_.value?y.value:C.value,ue=_.value?C.value:y.value,le=_.value?1/Number(b.value):Number(p.value),se=_.value?1/Number(p.value):Number(b.value),pe=_.value?!f.value:f.value,ke=_.value?1/Number(Ke.value):Ke.value)}else M=(wi=(ki=H==null?void 0:H.value)==null?void 0:ki.token_a)==null?void 0:wi.address,E=(Pi=(Ci=H==null?void 0:H.value)==null?void 0:Ci.token_b)==null?void 0:Pi.address,F=(Ii=(_i=H==null?void 0:H.value)==null?void 0:_i.token_a)==null?void 0:Ii.decimals,K=(Ai=($i=H==null?void 0:H.value)==null?void 0:$i.token_b)==null?void 0:Ai.decimals,de=_.value?C.value:y.value,ue=_.value?y.value:C.value,le=_.value?Number(p.value):1/Number(b.value),se=_.value?Number(b.value):1/Number(p.value),pe=_.value?f.value:!f.value,ke=_.value?Ke.value:1/Number(Ke.value);try{console.log("0501###toCreatePool###params###",{coinTypeA:M,coinTypeB:E,decimalsA:F,decimalsB:K,amountA:de,amountB:ue,minPrice:le,maxPrice:se,fix_amount_a:pe,tick_spacing:Number(H.value.tickSpacing),slippage:Number(De.value)/100,price:ke});const Vn=await X.value.getCreatPoolTransactionPayload({coinTypeA:M,coinTypeB:E,decimalsA:F,decimalsB:K,amountA:de,amountB:ue,minPrice:le,maxPrice:se,fix_amount_a:pe,tick_spacing:Number(H.value.tickSpacing),slippage:Number(De.value)/100,price:ke}),ba=await i.value.currentWallet.signAndExecuteTransactionBlock(Vn),kt=X.value.handleTx(ba);if(kt&&kt.hash){On(kt.hash),rn(!1),qn(!0);const Io={title:"Created pool",desc:"Pool created successfully ",hash:kt.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(Si=g.value)==null?void 0:Si.address}`,numa:Ae.value?"":`- ${C.value}`,logoa:z.value.tokensObj&&g.value&&g.value.address&&z.value.tokensObj[g.value.address]&&z.value.tokensObj[g.value.address].logoURI,tokenb:`${(Ti=P.value)==null?void 0:Ti.address}`,numb:Se.value?"":`- ${y.value}`,logob:z.value.tokensObj&&P.value&&P.value.address&&z.value.tokensObj[P.value.address]&&z.value.tokensObj[P.value.address].logoURI},text:"Pool created successfully"};V.value.chainName!=="Aptos"&&(Io.res=kt.res),X.value.showTransitionPending(Io),(await X.value.watchTransaction(Io,!0)).status&&(qn(!1),l.value=!0,setTimeout(()=>{an.setPoolConfigList(V.value.chainName,V.value.filterCoinsObj),X.value.getAccount(i.value.address)},1e3)),rt()}else rn(!1),Un(!0);C.value="",y.value=""}catch(Vn){console.log("0407###createPool###error##",Vn),Pn.value=!1,an.setPoolConfigList(V.value.chainName,V.value.filterCoinsObj),C.value="",y.value="",rn(!1),Un(!0)}},ha=te(()=>{var c,d,I,M,E,F;return((c=g.value)==null?void 0:c.isSelfBuilt)||((d=P.value)==null?void 0:d.isSelfBuilt)||((M=z.value.tokensObj[(I=g.value)==null?void 0:I.address])==null?void 0:M.isSelfBuilt)||((F=z.value.tokensObj[(E=P.value)==null?void 0:E.address])==null?void 0:F.isSelfBuilt)}),ga=c=>{var d;return(c==null?void 0:c.logoURI)||(c==null?void 0:c.logo_url)||((d=z.value.tokensObj[c==null?void 0:c.address])==null?void 0:d.logo_url)||(V.value.theme==="default"?Qe("/image/coins/unknown.png"):Qe("/image/coins/sui-unknown.png"))},_o=(c,d)=>{console.log(v.value,"===>currentCoinKey.value"),console.log(c);const I=localStorage.getItem(c.address);console.log(z.value.tokensObj,"===>pools.value.tokensObj"),console.log(I,"===>coinLocak"),z.value.tokensObj&&z.value.tokensObj[c.address]&&z.value.tokensObj[c.address].isSelfBuilt&&!I&&(d=="fromCoin"&&(gt.value=c),d=="toCoin"&&(yt.value=c),ui.value=!0)};Ie(()=>[g.value,P.value],([c,d])=>{c&&!Nn(c)&&_o(c,"fromCoin"),d&&!Nn(d)&&_o(d,"toCoin")},{immediate:!0});const ui=R(!1),ya=()=>{zt.value!=="Aptos"?$e.push("/pool/list"):$e.push("/pools")},zt=te(()=>V.value.chainName);return Ie(()=>[V.value.chainName,V.value.filterCoinsObj],([c,d])=>{c&&d&&an.setPoolConfigList(c,d)},{immediate:!0}),Ie(()=>[Ue.value,We.value,g.value,P.value,Xn.value],([c,d,I,M,E])=>{console.log(c.value,"==>isCreatePool.value"),console.log(d.value,"===>filterCreatePoolCoin.value"),console.log(I,"===>fromCoin"),console.log(M,"===>toCoin"),E&&c&&d&&!c.includes(1e-4)&&!c.includes(5e-4)&&!c.includes(.0025)&&!c.includes(.01)&&!d[I==null?void 0:I.address]&&!d[M==null?void 0:M.address]&&(T.value="")},{immediate:!0}),{warningToCoin:yt,warningFromCoin:gt,getTokenSource:_o,closeTokenWarning:ya,isShowTokenWarning:ui,chainName:zt,hasCreatePool:Xn,isCreateSuccess:l,intPriceReverse:Xt,isShowMask:fn,isPc:e,intPrice:Ht,createPoolToCoin:qe,createPoolFromCoin:Re,getPoolInfoSuccess:ut,toCreatePool:ma,createPoolInfo:H,changecurrentPrice:Po,isShowCreatePoolModal:pa,addOrCreate:va,halfBtnSelect:Ft,selectFee:fa,isViewDetail:s,addCommom:Ve,decimalUi:Be,fromCoinUrl:ca,toCoinUrl:da,t:n,wallet:i,toAdd:la,chartLoading:j,currentTick:oe,tickList:Pe,poolInfo:x,storeIndex:V,importIcon:Qe,addLiquidityBtnText:on,slippage:De,countdown:a,loading:u,fromCoin:g,toCoin:P,openCoinSelect:Ot,onCoinSelect:Bt,existingCoins:h,lastSelectCoin:k,currentCoinKey:v,showCoinSelect:q,fromCoinAmount:C,toCoinAmount:y,maxBtnSelect:Et,fixedFromCoin:f,isShowLiquidityModal:Pn,direct:_,toggle:Ut,edit:ne,inputValue:T,feeTierList:Cn,minPrice:p,maxPrice:b,invalidPriceRange:Hn,defaultMinPrice:O,defaultMaxPrice:G,priceRangeChangeMin:Rt,priceRangeChangeMax:qt,toFullRange:Je,clearAll:Dt,clickClear:A,positionError:ee,positionTips:me,router:$e,clickRefresh:un,fromCoinBlance:xe,toCoinBlance:en,showToCoinLock:Se,showFromCoinLock:Ae,currentPriceReverse:yn,currentPrice:Ke,getPirceText:sa,currentPriceTab:W,currentPriceTabList:hn,getPirceKey:ua,priceTab:jt,aprRewardsParameter:ie,aprRewardsDateList:ae,aprTab:Fe,reviseValue:pn,label:he,aprTitle:re,isCreatePool:Ue,before7dContractPriceLowest:J,before7dContractPriceHighest:Ze,aprRewardsTime:fe,addLiquidityBtnDisabled:Le,checkNullObj:Nn,sFixD:Vt,toCreateSuiPool:si,isSelfBuilt:ha,getCoinIcon:ga,isCreatePoolToCoin:Yn,isCreatePoolFromCoin:Gn,filterCreatePoolCoin:We,poolTvl:gn}}}),vr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",mr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",ra=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,aa=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const Rn=e=>(tt("data-v-38b2cfb4"),e=e(),ot(),e),Ep={class:"pools-container"},Fp={key:0,class:"content pc-content"},Dp={class:"content-left"},jp={class:"content-left-bg"},Hp={class:"content-left-title"},Xp={key:0,class:"pool-warning"},zp={class:"coin-select"},Vp={key:0,class:"icon","aria-hidden":"true"},Wp=Rn(()=>m("use",{"xlink:href":"#icon-edit"},null,-1)),Kp=[Wp],Yp={key:0,class:"fee-container"},Gp=["onClick"],Qp={key:0,class:"icon fee-disabled","aria-hidden":"true"},Jp=Rn(()=>m("use",{"xlink:href":"#icon-icon-disable"},null,-1)),Zp=[Jp],xp={key:1},ev={key:2},nv={key:0},tv={key:1,class:"text-active"},ov={class:"deposit-title"},iv={class:"card-container"},rv={class:"card-item"},av={class:"card-item"},lv={key:0,class:"icon","aria-hidden":"true"},sv=Rn(()=>m("use",{"xlink:href":"#icon-icon-add"},null,-1)),uv=[sv],cv={class:"pc-network"},dv={class:"content-right"},fv={key:0,class:"initPrice-mask"},pv={class:"content-right-title"},vv=Rn(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),mv={class:"content-right-bg"},hv={key:1,class:"price-tab"},gv=["onClick"],yv={key:2,class:"create-pool-tips"},bv={key:3,class:"set-price-range"},kv={key:0},wv={key:1,class:"coin"},Cv={key:2,class:"coin"},Pv={key:3,class:"no-price"},_v={alt:""},Iv={alt:""},$v={key:6,class:"position-tips"},Av={alt:""},Sv={class:"tips"},Tv={key:7,class:"position-tips"},Nv={alt:""},Mv={class:"error"},Lv={key:8,class:"d3-chart-box"},Rv={key:9,class:"day-7-price-range"},qv=Rn(()=>m("i",null,null,-1)),Uv={class:"gray"},Ov={key:11,class:"create-pool-tips"},Bv={key:12,class:"create-pool-warning"},Ev={key:1,class:"no-data"},Fv={key:0,src:ra,alt:""},Dv={key:1,src:aa,alt:""},jv={key:1,class:"content h5-content"},Hv={class:"content-left"},Xv={class:"content-left-bg"},zv={class:"content-left-title"},Vv={key:0,class:"pool-warning"},Wv={class:"coin-select"},Kv={key:0,class:"icon","aria-hidden":"true"},Yv=Rn(()=>m("use",{"xlink:href":"#icon-edit"},null,-1)),Gv=[Yv],Qv={key:0,class:"fee-container"},Jv=["onClick"],Zv={key:0},xv={key:1},em={key:0},nm={key:1,class:"text-active"},tm={class:"content-right"},om={key:0,class:"initPrice-mask"},im={class:"content-right-title"},rm=Rn(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),am={class:"content-right-bg"},lm={key:1,class:"price-tab"},sm=["onClick"],um={key:2,class:"create-pool-tips"},cm={key:3,class:"set-price-range"},dm={key:0},fm={key:1,class:"coin"},pm={key:2,class:"coin"},vm={key:3,class:"no-price"},mm={alt:""},hm={alt:""},gm={key:6,class:"position-tips"},ym=["src"],bm={class:"tips"},km={key:7,class:"position-tips"},wm=["src"],Cm={class:"error"},Pm={key:8,class:"d3-chart-box"},_m={key:9,class:"day-7-price-range"},Im=Rn(()=>m("i",null,null,-1)),$m={class:"gray"},Am={key:11,class:"create-pool-tips"},Sm={key:1,class:"no-data"},Tm={key:0,src:ra,alt:""},Nm={key:1,src:aa,alt:""},Mm={key:0,class:"icon","aria-hidden":"true"},Lm=Rn(()=>m("use",{"xlink:href":"#icon-icon-add"},null,-1)),Rm=[Lm],qm={class:"pc-network"},Um={class:"new-right"},Om={class:"deposit-title"},Bm={class:"card-container"},Em={class:"card-item"},Fm={class:"card-item"},Dm={key:0,class:"icon","aria-hidden":"true"},jm=Rn(()=>m("use",{"xlink:href":"#icon-icon-add"},null,-1)),Hm=[jm],Xm={class:"h5-network"};function zm(e,n,t,o,i,r){var oe,j,Y,Pe,W,ie,fe,re,ae,he,Q,V,fn,X,We,Fe,pn,hn,un,Hn,Je,Ue,gn,Cn,De,Z,Le,on,U,J,Ze,$e,g,P,Rt,qt,Ut,Yn,Gn,Ot,Re,qe,gt,yt,Bt,Et,Ft,Dt,Pn,qn,Un,rn,it,On,rt,N,an,Xn,z,Bn,Ae,Se,at,lt,Ke,yn,_n,zn,st,x;const a=ka,l=Wa,s=Ta,u=nl,v=Na,h=sl,k=vl,q=Ma,_=Qo,ce=_a,f=bl,A=Fl,C=uf,y=br,p=Ra,b=Qf,O=Oa,G=Pp,ne=qp,me=Ca,ee=La,T=mo("image");return w(),S("div",Ep,[be(a,{url:e.storeIndex.theme=="default"?"/pools":"/pool/list"},null,8,["url"]),be(l,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(w(),S("div",Fp,[m("div",Dp,[m("div",jp,[m("div",Hp,[ze($(e.$t("common.selectPool"))+" ",1),be(s,{placement:"bottom","arrow-point-at-center":""},{title:Oe(()=>[m("span",null,$(e.t("newAdd.poolWarning")),1)]),default:Oe(()=>[e.isSelfBuilt?(w(),S("div",Xp)):B("",!0)]),_:1})]),m("div",zp,[be(u,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[0]||(n[0]=L=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),be(u,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:n[1]||(n[1]=L=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),m("div",{class:Me(["pool-fee",e.edit?"pool-fee-edit":""])},[m("div",{class:"pool-fee-header",onClick:n[2]||(n[2]=L=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[m("span",{class:Me(e.inputValue?"":"fee-span")},$(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(w(),S("svg",Vp,Kp)):B("",!0)]),e.edit?(w(),S("div",Yp,[(w(!0),S(Kn,null,Ct(e.feeTierList,(L,cn)=>{var Qn,ut,xe,en,bt;return w(),S("div",{key:cn,class:Me(["fee-item",[e.inputValue&&e.inputValue==L.label?"fee-item-active":"",e.isCreatePool.includes(L.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(L.fee)&&!e.filterCreatePoolCoin[(Qn=e.fromCoin)==null?void 0:Qn.address]&&!e.filterCreatePoolCoin[(ut=e.toCoin)==null?void 0:ut.address]?"disabled":""]]),onClick:Co=>e.selectFee(L)},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(L.fee)&&!e.filterCreatePoolCoin[(xe=e.fromCoin)==null?void 0:xe.address]&&!e.filterCreatePoolCoin[(en=e.toCoin)==null?void 0:en.address]?(w(),S("svg",Qp,Zp)):B("",!0),e.$route.query.action=="create-pool"?(w(),S("div",xp,[m("p",null,$(L.title),1),m("p",{class:Me(e.isCreatePool&&e.isCreatePool.includes(L.fee)?"text-default":"text-theme")},$(e.isCreatePool&&e.isCreatePool.includes(L.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(w(),S("div",ev,[m("p",{class:Me(e.isCreatePool&&e.isCreatePool.includes(L.fee)?"text-active":"text-default")},$(L.title),3),e.isCreatePool&&!e.isCreatePool.includes(L.fee)?(w(),S("p",nv,$(e.$t("newAdd.notCreated")),1)):B("",!0),e.isCreatePool&&e.isCreatePool.includes(L.fee)?(w(),S("p",tv,$(e.poolTvl&&e.poolTvl[L.fee]&&((bt=e.poolTvl[L.fee])==null?void 0:bt.rateText)),1)):B("",!0)])),m("span",null,$(L.text),1)],10,Gp)}),128))])):B("",!0)],2),m("div",ov,$(e.$t("newAdd.depositAmounts")),1),m("div",iv,[m("div",rv,[be(v,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=L=>e.fromCoinAmount=L),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[4]||(n[4]=L=>e.maxBtnSelect("fromCoin")),onOnHalf:n[5]||(n[5]=L=>e.halfBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=L=>{e.fromCoinAmount=L,e.fixedFromCoin=!0}),onOnSelect:n[7]||(n[7]=L=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(w(),we(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):B("",!0)]),m("div",av,[be(v,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=L=>e.toCoinAmount=L),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[9]||(n[9]=L=>e.maxBtnSelect("toCoin")),onOnHalf:n[10]||(n[10]=L=>e.halfBtnSelect("toCoin")),onOnInput:n[11]||(n[11]=L=>{e.toCoinAmount=L,e.fixedFromCoin=!1}),onOnSelect:n[12]||(n[12]=L=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(w(),we(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):B("",!0)]),((j=(oe=e.$route)==null?void 0:oe.query)==null?void 0:j.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock||!e.filterCreatePoolCoin[(Y=e.fromCoin)==null?void 0:Y.address]&&!e.filterCreatePoolCoin[(Pe=e.toCoin)==null?void 0:Pe.address])?(w(),we(k,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):B("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(w(),S("img",{key:1,class:"add",src:vr,alt:"",onClick:n[13]||(n[13]=(...L)=>e.toggle&&e.toggle(...L))})):B("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(w(),S("img",{key:2,class:"add",src:mr,alt:"",onClick:n[14]||(n[14]=(...L)=>e.toggle&&e.toggle(...L))})):B("",!0)]),e.poolInfo?(w(),we(q,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):B("",!0)]),be(_,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[15]||(n[15]=L=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Oe(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(w(),S("svg",lv,uv)):B("",!0),m("span",null,$(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",cv,[be(ce)])]),m("div",dv,[e.isShowMask?(w(),S("div",fv)):B("",!0),m("div",pv,[ze($((W=e.$route)!=null&&W.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(w(),we(s,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Oe(()=>[m("span",null,$(e.$t("newAdd.selectRangeTips")),1)]),default:Oe(()=>[vv]),_:1})):B("",!0)]),m("div",mv,[!((fe=(ie=e.$route)==null?void 0:ie.query)!=null&&fe.action)&&e.poolInfo||(ae=(re=e.$route)==null?void 0:re.query)!=null&&ae.action?(w(),S(Kn,{key:0},[(Q=(he=e.$route)==null?void 0:he.query)!=null&&Q.action&&!e.poolInfo?(w(),we(f,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):B("",!0),e.poolInfo?(w(),S("div",hv,[(w(!0),S(Kn,null,Ct(e.currentPriceTabList,L=>(w(),S("div",{key:L,class:Me(["price-item",{"price-item-active":L.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:cn=>e.priceTab(L)},[be(s,{placement:"bottom","arrow-point-at-center":""},{title:Oe(()=>[m("span",null,$(e.getPirceText(L.key)),1)]),default:Oe(()=>[ze(" "+$(e.getPirceKey(L.key)),1)]),_:2},1024)],10,gv))),128))])):B("",!0),(fn=(V=e.$route)==null?void 0:V.query)!=null&&fn.action&&!e.poolInfo?(w(),S("div",yv,$(e.$t("newAdd.createPoolInitialText")),1)):B("",!0),!e.poolInfo&&((We=(X=e.$route)==null?void 0:X.query)!=null&&We.action)?(w(),S("div",bv,$(e.$t("common.setPriceRange")),1)):B("",!0),e.poolInfo||(pn=(Fe=e.$route)==null?void 0:Fe.query)!=null&&pn.action?(w(),S("div",{key:4,class:Me(["current-price",(un=(hn=e.$route)==null?void 0:hn.query)!=null&&un.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(w(),S("span",kv,$(e.$t("common.currentPrice")),1)):B("",!0),e.fromCoin&&e.toCoin&&e.direct?(w(),S("div",wv,[m("span",null,$(e.$t("common.currentPrice")),1),ze(" "+$(e.currentPrice===""?"--":("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(e.currentPrice,6)))+" "+$((Hn=e.toCoin)==null?void 0:Hn.symbol)+" per "+$((Je=e.fromCoin)==null?void 0:Je.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(w(),S("div",Cv,[m("span",null,$(e.$t("common.currentPrice")),1),ze(" "+$(e.currentPriceReverse===""?"--":("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(e.currentPriceReverse,6)))+" "+$((Ue=e.toCoin)==null?void 0:Ue.symbol)+" per "+$((gn=e.fromCoin)==null?void 0:gn.symbol),1)])):(w(),S("div",Pv,"0.0")),e.fromCoin&&e.toCoin?(w(),S("div",{key:4,class:Me(e.poolInfo&&((Cn=e.poolInfo)!=null&&Cn.needReverse)||e.createPoolInfo&&((De=e.createPoolInfo)!=null&&De.needReverse)?"toggle reverse":"toggle")},[m("div",{class:Me(e.direct?"item active-item":"item"),onClick:n[16]||(n[16]=L=>e.direct?"":e.toggle())},[vn(m("img",_v,null,512),[[T,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),ze(" "+$(e.direct?(Z=e.fromCoin)==null?void 0:Z.symbol:(Le=e.toCoin)==null?void 0:Le.symbol),1)],2),m("div",{class:Me(e.direct?"item ":"item active-item"),onClick:n[17]||(n[17]=L=>e.direct?e.toggle():"")},[vn(m("img",Iv,null,512),[[T,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),ze(" "+$(e.direct?(on=e.toCoin)==null?void 0:on.symbol:(U=e.fromCoin)==null?void 0:U.symbol),1)],2)],2)):B("",!0)],2)):B("",!0),e.poolInfo||(Ze=(J=e.$route)==null?void 0:J.query)!=null&&Ze.action?(w(),we(A,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):B("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(w(),S("div",$v,[vn(m("img",Av,null,512),[[T,("importIcon"in e?e.importIcon:ye(Qe))("/image/icon-tips@2x.png")]]),m("p",Sv,$(e.$t("tips.positionTips")),1)])):B("",!0),e.positionError&&(e.poolInfo||(g=($e=e.$route)==null?void 0:$e.query)!=null&&g.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(w(),S("div",Tv,[vn(m("img",Nv,null,512),[[T,("importIcon"in e?e.importIcon:ye(Qe))("/image/icon-tips-error@2x.png")]]),m("p",Mv,$(e.$t("tips.positionError")),1)])):B("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),S("div",Lv,[e.fromCoin&&e.toCoin&&e.poolInfo?(w(),we(C,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):B("",!0),e.chartLoading?(w(),we(y,{key:1})):B("",!0)])):B("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(w(),S("div",Rv,[qv,m("span",Uv,$(e.aprRewardsTime)+" Price Range",1),m("span",null,$(("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(e.before7dContractPriceLowest,6)))+" - "+$(("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(e.before7dContractPriceHighest,6))),1)])):B("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(w(),we(p,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):B("",!0),(Rt=(P=e.$route)==null?void 0:P.query)!=null&&Rt.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(w(),S("div",Ov,$(e.$t("newAdd.createPoolText")),1)):B("",!0),((Ut=(qt=e.$route)==null?void 0:qt.query)==null?void 0:Ut.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(w(),S("div",Bv," To create a new pool, the initial price you set must be within your price range. ")):B("",!0)],64)):(w(),S("div",Ev,[e.storeIndex.theme=="default"?(w(),S("img",Fv)):(w(),S("img",Dv)),m("p",null,$(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(w(),we(b,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):B("",!0)])])):B("",!0),e.isPc?B("",!0):(w(),S("div",jv,[m("div",Hv,[m("div",Xv,[m("div",zv,[ze($(e.$t("common.selectPool"))+" ",1),be(s,{placement:"bottom","arrow-point-at-center":""},{title:Oe(()=>[m("span",null,$(e.t("newAdd.poolWarning")),1)]),default:Oe(()=>[e.poolInfo&&e.isSelfBuilt?(w(),S("div",Vv)):B("",!0)]),_:1})]),m("div",Wv,[be(u,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[18]||(n[18]=L=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),be(u,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:n[19]||(n[19]=L=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),m("div",{class:Me(["pool-fee",e.edit?"pool-fee-edit":""])},[m("div",{class:"pool-fee-header",onClick:n[20]||(n[20]=L=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[m("span",{class:Me(e.inputValue?"":"fee-span")},$(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(w(),S("svg",Kv,Gv)):B("",!0)]),e.edit?(w(),S("div",Qv,[e.getPoolInfoSuccess?(w(!0),S(Kn,{key:1},Ct(e.feeTierList,(L,cn)=>{var Qn;return w(),S("div",{key:cn,class:Me(["fee-item",[e.inputValue&&e.inputValue==L.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(L.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:ut=>e.selectFee(L)},[e.$route.query.action=="create-pool"?(w(),S("div",Zv,[m("p",null,$(L.title),1),m("p",{class:Me(e.isCreatePool.includes(L.fee)?"text-default":"text-theme")},$(e.isCreatePool.includes(L.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(w(),S("div",xv,[m("p",{class:Me(e.isCreatePool.includes(L.fee)?"text-active":"text-default")},$(L.title),3),e.isCreatePool&&!e.isCreatePool.includes(L.fee)?(w(),S("p",em,$(e.$t("newAdd.notCreated")),1)):B("",!0),e.isCreatePool&&e.isCreatePool.includes(L.fee)?(w(),S("p",nm,$(e.poolTvl&&e.poolTvl[L.fee]&&((Qn=e.poolTvl[L.fee])==null?void 0:Qn.rateText)),1)):B("",!0)])),m("span",null,$(L.text),1)],10,Jv)}),128)):(w(),we(y,{key:0}))])):B("",!0)],2)]),m("div",tm,[e.isShowMask?(w(),S("div",om)):B("",!0),m("div",im,[ze($((Yn=e.$route)!=null&&Yn.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(w(),we(s,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Oe(()=>[m("span",null,$(e.$t("newAdd.selectRangeTips")),1)]),default:Oe(()=>[rm]),_:1})):B("",!0)]),m("div",am,[!((Ot=(Gn=e.$route)==null?void 0:Gn.query)!=null&&Ot.action)&&e.poolInfo||(qe=(Re=e.$route)==null?void 0:Re.query)!=null&&qe.action?(w(),S(Kn,{key:0},[(yt=(gt=e.$route)==null?void 0:gt.query)!=null&&yt.action&&!e.poolInfo?(w(),we(f,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):B("",!0),e.poolInfo?(w(),S("div",lm,[(w(!0),S(Kn,null,Ct(e.currentPriceTabList,L=>(w(),S("div",{key:L,class:Me(["price-item",{"price-item-active":L.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:cn=>e.priceTab(L)},[be(s,{placement:"bottom","arrow-point-at-center":""},{title:Oe(()=>[m("span",null,$(e.getPirceText(L.key)),1)]),default:Oe(()=>[ze(" "+$(e.getPirceKey(L.key)),1)]),_:2},1024)],10,sm))),128))])):B("",!0),(Et=(Bt=e.$route)==null?void 0:Bt.query)!=null&&Et.action&&!e.poolInfo?(w(),S("div",um,$(e.$t("newAdd.createPoolInitialText")),1)):B("",!0),!e.poolInfo&&((Dt=(Ft=e.$route)==null?void 0:Ft.query)!=null&&Dt.action)?(w(),S("div",cm,$(e.$t("common.setPriceRange")),1)):B("",!0),e.poolInfo||(qn=(Pn=e.$route)==null?void 0:Pn.query)!=null&&qn.action?(w(),S("div",{key:4,class:Me(["current-price",(rn=(Un=e.$route)==null?void 0:Un.query)!=null&&rn.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(w(),S("span",dm,$(e.$t("common.currentPrice")),1)):B("",!0),e.fromCoin&&e.toCoin&&e.direct?(w(),S("div",fm,[m("span",null,$(e.$t("common.currentPrice")),1),ze(" "+$(("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(e.currentPrice,6)))+" "+$((it=e.toCoin)==null?void 0:it.symbol)+" per "+$((On=e.fromCoin)==null?void 0:On.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(w(),S("div",pm,[m("span",null,$(e.$t("common.currentPrice")),1),ze(" "+$(("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(e.currentPriceReverse,6)))+" "+$((rt=e.toCoin)==null?void 0:rt.symbol)+" per "+$((N=e.fromCoin)==null?void 0:N.symbol),1)])):(w(),S("div",vm,"0.0")),e.fromCoin&&e.toCoin?(w(),S("div",{key:4,class:Me(e.poolInfo&&((an=e.poolInfo)!=null&&an.needReverse)||e.createPoolInfo&&((Xn=e.createPoolInfo)!=null&&Xn.needReverse)?"toggle reverse":"toggle")},[m("div",{class:Me(e.direct?"item active-item":"item"),onClick:n[21]||(n[21]=L=>e.direct?"":e.toggle())},[vn(m("img",mm,null,512),[[T,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),ze(" "+$(e.direct?(z=e.fromCoin)==null?void 0:z.symbol:(Bn=e.toCoin)==null?void 0:Bn.symbol),1)],2),m("div",{class:Me(e.direct?"item ":"item active-item"),onClick:n[22]||(n[22]=L=>e.direct?e.toggle():"")},[vn(m("img",hm,null,512),[[T,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),ze(" "+$(e.direct?(Ae=e.toCoin)==null?void 0:Ae.symbol:(Se=e.fromCoin)==null?void 0:Se.symbol),1)],2)],2)):B("",!0)],2)):B("",!0),e.poolInfo||(lt=(at=e.$route)==null?void 0:at.query)!=null&&lt.action?(w(),we(A,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):B("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(w(),S("div",gm,[m("img",{src:("importIcon"in e?e.importIcon:ye(Qe))("/image/icon-tips@2x.png"),alt:""},null,8,ym),m("p",bm,$(e.$t("tips.positionTips")),1)])):B("",!0),e.positionError&&(e.poolInfo||(yn=(Ke=e.$route)==null?void 0:Ke.query)!=null&&yn.action)?(w(),S("div",km,[m("img",{src:("importIcon"in e?e.importIcon:ye(Qe))("/image/icon-tips-error@2x.png"),alt:""},null,8,wm),m("p",Cm,$(e.$t("tips.positionError")),1)])):B("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),S("div",Pm,[e.fromCoin&&e.toCoin&&e.poolInfo?(w(),we(C,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):B("",!0),e.chartLoading?(w(),we(y,{key:1})):B("",!0)])):B("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(w(),S("div",_m,[Im,m("span",$m,$(e.aprRewardsTime)+" Price Range",1),m("span",null,$(("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(e.before7dContractPriceLowest,6)))+" - "+$(("addCommom"in e?e.addCommom:ye(Ve))(("decimalUi"in e?e.decimalUi:ye(Be))(e.before7dContractPriceHighest,6))),1)])):B("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(w(),we(p,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):B("",!0),(zn=(_n=e.$route)==null?void 0:_n.query)!=null&&zn.action&&!e.poolInfo?(w(),S("div",Am,$(e.$t("newAdd.createPoolText")),1)):B("",!0)],64)):(w(),S("div",Sm,[e.storeIndex.theme=="default"?(w(),S("img",Tm)):(w(),S("img",Nm)),m("p",null,$(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(w(),we(b,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):B("",!0)]),be(_,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[23]||(n[23]=L=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Oe(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(w(),S("svg",Mm,Rm)):B("",!0),m("span",null,$(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",qm,[be(ce)])]),m("div",Um,[m("div",Om,$(e.$t("newAdd.depositAmounts")),1),m("div",Bm,[m("div",Em,[be(v,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[24]||(n[24]=L=>e.fromCoinAmount=L),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[25]||(n[25]=L=>e.maxBtnSelect("fromCoin")),onOnHalf:n[26]||(n[26]=L=>e.halfBtnSelect("fromCoin")),onOnInput:n[27]||(n[27]=L=>{e.fromCoinAmount=L,e.fixedFromCoin=!0}),onOnSelect:n[28]||(n[28]=L=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(w(),we(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):B("",!0)]),m("div",Fm,[be(v,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[29]||(n[29]=L=>e.toCoinAmount=L),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[30]||(n[30]=L=>e.maxBtnSelect("toCoin")),onOnHalf:n[31]||(n[31]=L=>e.halfBtnSelect("toCoin")),onOnInput:n[32]||(n[32]=L=>{e.toCoinAmount=L,e.fixedFromCoin=!1}),onOnSelect:n[33]||(n[33]=L=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(w(),we(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):B("",!0)]),(x=(st=e.$route)==null?void 0:st.query)!=null&&x.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(w(),we(k,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):B("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(w(),S("img",{key:1,class:"add",src:vr,alt:"",onClick:n[34]||(n[34]=(...L)=>e.toggle&&e.toggle(...L))})):B("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(w(),S("img",{key:2,class:"add",src:mr,alt:"",onClick:n[35]||(n[35]=(...L)=>e.toggle&&e.toggle(...L))})):B("",!0)]),e.poolInfo||e.createPoolInfo?(w(),we(q,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):B("",!0)])])),be(_,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:n[36]||(n[36]=L=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Oe(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(w(),S("svg",Dm,Hm)):B("",!0),m("span",null,$(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",Xm,[be(ce)]),e.showCoinSelect?(w(),we(O,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:n[37]||(n[37]=L=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):B("",!0),e.isViewDetail?(w(),we(G,{key:3,"pool-info":e.poolInfo,onOnClose:n[38]||(n[38]=L=>e.isViewDetail=!1)},null,8,["pool-info"])):B("",!0),e.isCreateSuccess?(w(),we(ne,{key:4,onOnClose:n[39]||(n[39]=L=>e.isCreateSuccess=!1)})):B("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(w(),we(me,{key:5,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:n[40]||(n[40]=L=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):B("",!0),e.isShowLiquidityModal?(w(),we(ee,{key:6,"pool-info":e.poolInfo||e.createPoolInfo,title:e.$route.query.action=="create-pool"?e.$t("newAdd.preview"):e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direct,onCreatePool:e.toCreatePool,onToAdd:e.toAdd,onOnClose:n[41]||(n[41]=L=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onCreatePool","onToAdd"])):B("",!0)])}const bh=wn(Bp,[["render",zm],["__scopeId","data-v-38b2cfb4"]]);export{bh as default};
