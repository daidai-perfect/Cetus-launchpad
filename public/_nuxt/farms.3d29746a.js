import{b as io,u as $o,s as X,a as T,i as Mo,d as ao,j as Ao,c as Z,t as Oo}from"./sha256.91c60824.js";import{a as x,l as i,r as z,e as oo,o as t,f as e,h as s,i as I,v as h,u as $,c as D,w as M,S as Vo,B as wo,j as F,p as lo,k as ro,s as yo,t as eo,x as q,b as So,A as _o,F as H,E as to,P as cs,q as bo,z as vo,N as Wo,M as Ro,H as qo,Q as us}from"./entry.a6654d09.js";/* empty css              */import{e as ko,a as Io,u as fo}from"./pool.58e56ed3.js";import{u as co}from"./farms.0602fe26.js";import{_ as ms,a as Ho}from"./farms-valid-range.667f38c7.js";import{_ as zo}from"./apr-tips.db2354eb.js";import{i as Lo}from"./import-icon.de3e6c66.js";/* empty css              */import{N as Qo}from"./no-data.9a3a604d.js";import"./index.43c7dce9.js";import{_ as Go}from"./img-connect-wallet_2x.a172a4d4.js";import{_ as Jo}from"./img-no-Positions_2x.ea7d491d.js";import{_ as ps}from"./upgrade-loading.0a5a88f9.js";import{p as _s}from"./precision.a7a6c57b.js";import"./decimal.0bdeb344.js";import"./icon_rewards_2x.90e463e8.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const fs=x({setup(){const o=io(),r=i(()=>o),_=co(),u=i(()=>_),f=i(()=>Object.values(u.value.farmsRewardObj)),a=i(()=>f.value.reduce(function(J,A){const j=A&&A.amountUsd?A.amountUsd:0;return Number(j)>.01?Mo(Number(J)).plus(X(Number(j),2)).toString():Mo(Number(J)).plus(Number(j)).toString()},0)),l=i(()=>u.value.farmsPositionList),d=i(()=>u.value.farmsAllPositionLoading),v=i(()=>u.value.farmsPoolListLoading),y=$o(),m=ko("Sui"),p=Io("Sui"),{setIsShowSuccess:k,setIsShowRejected:C,setIsShowWaiting:n,setTransactionDesc:B,setTransactionTxid:P}=y,L=z(!1);return{farmsPoolListLoading:v,wallet:r,farms:u,totalRwadrdUsd:a,sFixD:X,claimAllPoolReward:async Y=>{L.value=!0;const J=[];l.value.forEach(A=>{A.positionSource=="farming"&&J.push({pool_id:A.pool_id,position_nft_id:A.id})}),P(""),B("Claim Rewards"),n(!0);try{const A=await m.batchHarvest(J),j={txbParams:A.payloadParams.txbParams,action:"FarmingBatchHarvest"},R=await p.signAndExecuteTransactionBlock(r.value.currentWallet,A.txb,j);console.log("0221###sui swap res###",R);let O=p.handleTx(R);if(O&&O.hash){P(O.hash),n(!1),k(!0);let g={res:O.res,title:"Claim",hash:O.hash};p.showTransitionPending(g),await p.watchTransaction(g)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else n(!1),C(!0);L.value=!1}catch(A){console.log("Claim all error",A),n(!1),C(!0),L.value=!1}},loading:L,addCommom:T,farmsAllPositionLoading:d}}});const Ko=o=>(lo("data-v-3e8320d5"),o=o(),ro(),o),hs={class:"farms-banner-bg"},vs={class:"farms-banner"},gs={class:"farms-banner-center"},bs=Ko(()=>s("div",{class:"title"},"Farms",-1)),$s=Ko(()=>s("div",{class:"desc"},"Stake your positions to earn higher yield.",-1)),ws={class:"claim-rewards"},ys={class:"claim-title"},ks={key:0,class:"loading-spin"},Is={key:1},Ps={key:2},Ss={class:"claim-content"};function Ls(o,r,_,u,f,a){const l=Vo,d=wo;return t(),e("div",hs,[s("div",vs,[s("div",gs,[bs,$s,s("div",ws,[s("div",ys,[o.farmsAllPositionLoading||o.farmsPoolListLoading?(t(),e("span",ks,[I(l)])):o.wallet.address?(t(),e("span",Is,h(Number(o.totalRwadrdUsd)>0&&Number(o.totalRwadrdUsd)<.01?"<$0.01":`$${("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.totalRwadrdUsd||0,2))}`),1)):(t(),e("span",Ps,"--"))]),s("div",Ss,[o.wallet.address?(t(),D(d,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:M(()=>[F(" Claim All Rewards ")]),_:1},8,["loading","disabled","onClick"])):(t(),D(d,{key:1,class:"claim-btn",onClick:r[0]||(r[0]=v=>o.wallet.setIsShowWalletModal(!0))},{default:M(()=>[F("Connect")]),_:1}))])])])])])}const Xo=oo(fs,[["render",Ls],["__scopeId","data-v-3e8320d5"]]),Cs=x({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Ts={class:"pool"},Us={class:"pool-info"},js={class:"token-logo"},Os={alt:""},As={alt:""},Rs={class:"token-symbol"},Fs={class:"symbol"},Ds={class:"fee-rate"};function Ns(o,r,_,u,f,a){var v,y,m,p;const l=ms,d=yo("image");return t(),e("div",Ts,[s("div",Us,[s("div",js,[eo(s("img",Os,null,512),[[d,(v=o.poolInfo.coinA)==null?void 0:v.logo_url]]),eo(s("img",As,null,512),[[d,(y=o.poolInfo.coinB)==null?void 0:y.logo_url]])]),s("div",Rs,[s("div",Fs,h((m=o.poolInfo.coinA)==null?void 0:m.symbol)+" - "+h((p=o.poolInfo.coinB)==null?void 0:p.symbol),1),s("div",Ds,h(o.poolInfo.fee),1)])]),I(l,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Yo=oo(Cs,[["render",Ns],["__scopeId","data-v-c027f63c"]]),Bs=x({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=fo(),r=i(()=>o);return{sFixD:X,addCommom:T,getCoinIcon:u=>{var f;return((f=r.value.tokensObj[u])==null?void 0:f.logo_url)||Lo("/image/coins/sui-unknown.png")}}}});const Es={key:0,class:"rewards-day"},Ms={class:"rewards-day-box"},Vs={alt:""};function Ws(o,r,_,u,f,a){const l=yo("image");return o.rewardInfo.allocate_point>0||o.currentTab!=="Live"?(t(),e("div",Es,[s("div",null,[s("div",Ms,[eo(s("img",Vs,null,512),[[l,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,h(("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.rewardInfo.emission_per_day,4)))+" "+h(o.rewardInfo.symbol),1)])])])):q("",!0)}const Zo=oo(Bs,[["render",Ws],["__scopeId","data-v-48e4e83a"]]),qs=x({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const r=fo(),_=i(()=>r);return{addCommom:T,decimalUi:ao,fixD:Ao,getCoinIcon:f=>{var a;return((a=_.value.tokensObj[f])==null?void 0:a.logo_url)||Lo("/image/coins/sui-unknown.png")}}}});const Hs={class:"hover-rewarder"},zs={class:"rewarder-info"},Qs={class:"left-rewarder"},Gs={alt:""},Js={class:"right-rewarder"},Ks={class:"amount"},Xs={key:0,class:"amount-usd"},Ys={key:1,class:"amount-usd"},Zs={class:"rewarder-info"},xs={class:"left-rewarder"},on={alt:""},sn={class:"right-rewarder"},nn={class:"amount"},tn={key:0,class:"amount-usd"},en={key:1,class:"amount-usd"};function an(o,r,_,u,f,a){const l=yo("image");return t(),e("div",Hs,[s("div",zs,[s("div",Qs,[eo(s("img",Gs,null,512),[[l,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,h(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Js,[s("div",Ks,h(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(t(),e("div",Ys,h(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:$(Ao))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(t(),e("div",Xs,h(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:$(Ao))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",Zs,[s("div",xs,[eo(s("img",on,null,512),[[l,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,h(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",sn,[s("div",nn,h(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(t(),e("div",en,h(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(t(),e("div",tn,h(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:$(T))(("decimalUi"in o?o.decimalUi:$(ao))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const xo=oo(qs,[["render",an],["__scopeId","data-v-9f1dd3a2"]]),ln=x({components:{FarmsPositionAmountTips:xo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const r=io(),_=i(()=>r),u=co(),f=i(()=>u),a=Io("Sui"),l=ko("Sui"),d=z(!1),v=$o();i(()=>v);const y=So(),{setIsShowSuccess:m,setIsShowRejected:p,setIsShowWaiting:k,setTransactionDesc:C,setTransactionTxid:n}=v,B=async()=>{d.value=!0,n(""),C(`Stake ${o.positionInfo.name}`),k(!0);const g={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},w=j.value[o.positionInfo.clmmPool||o.positionInfo.poolAddress].id;try{const U=await l.farmsDeposit(g,w),V=await a.signAndExecuteTransactionBlock(_.value.currentWallet,U.txb,U.payloadParams);console.log("0221###sui swap res###",V),u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let E=a.handleTx(V);if(E&&E.hash){n(E.hash),k(!1),m(!0);let no={res:E.res,title:"Staked",hash:E.hash};a.showTransitionPending(no),await a.watchTransaction(no)&&setTimeout(()=>{u.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else k(!1),p(!0)}catch(U){console.log("farmsDeposit error",U),k(!1),p(!0),d.value=!1}},P=async()=>{d.value=!0,n(""),C(`Unstake ${o.positionInfo.name}`),k(!0);const g=j.value[o.positionInfo.clmmPool].id,w=o.positionInfo.id;try{const U=await l.farmsWithdraw(g,w),V=await a.signAndExecuteTransactionBlock(_.value.currentWallet,U.txb,U.payloadParams);console.log("0221###sui swap res###",V),u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let E=a.handleTx(V);if(console.log(E,"unStaketx##"),E&&E.hash){n(E.hash),k(!1),m(!0);let no={res:E.res,title:"Unstaked",hash:E.hash};a.showTransitionPending(no),await a.watchTransaction(no)&&setTimeout(()=>{u.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else k(!1),p(!0)}catch(U){console.log("farmsDeposit error",U),k(!1),p(!0),d.value=!1}},L=async()=>{d.value=!0,n(""),C("Claim rewards"),k(!0);const g={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const w=await l.harvestFarms(g),U=await a.signAndExecuteTransactionBlock(_.value.currentWallet,w.txb,w.payloadParams);u.setFarmsLoadingObj(o.positionInfo.clmm_pool_id),console.log("0221###sui swap res###",U);let V=a.handleTx(U);if(V&&V.hash){n(V.hash),k(!1),m(!0);let E={title:"Claim",res:V.res,hash:V.hash};a.showTransitionPending(E),await a.watchTransaction(E)&&setTimeout(()=>{u.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else k(!1),p(!0);d.value=!1}catch(w){console.log("farmsDeposit error",w),k(!1),p(!0),d.value=!1}},W=i(()=>f.value.farmsRewardObj),Y=fo(),J=i(()=>Y),A=i(()=>f.value.farmsLoadingObj),j=i(()=>f.value.farmsPoolObj);return{sFixD:X,stake:B,loading:d,unStake:P,router:y,claim:L,farmsRewardObj:W,getCoinIcon:g=>{var w;return((w=J.value.tokensObj[g])==null?void 0:w.logo_url)||Lo("/image/coins/sui-unknown.png")},toPositionDetails:g=>{g.positionSource=="clmm"?y.push(`/new-position-detail?collect=${g.collectionName}&token=${g.name}&address=${g.pool}&pos=${g.pos_object_id}`):y.push(`/new-position-detail?position_nft_id=${g.id}&positionSource=farming`)},farmsLoadingObj:A,addCommom:T}}}),os=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const Co=o=>(lo("data-v-13189896"),o=o(),ro(),o),rn={class:"farms-position-item"},dn=Co(()=>s("thead",null,[s("tr",null,[s("th",null,"Position"),s("th",null,"Liquidity"),s("th",null,"Earnings"),s("th")])],-1)),cn={class:"position-info"},un={key:0,class:"status-bg"},mn=Co(()=>s("img",{src:os,alt:""},null,-1)),pn=[mn],_n={class:"status-text"},fn={class:"name-range"},hn=Co(()=>s("span",null,"Details",-1)),vn=Co(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),gn=[hn,vn],bn={class:"liquidity"},$n={class:"rewards-day-box"},wn={alt:""},yn={key:1,class:"rewards-day"},kn={class:"action-btn"};function In(o,r,_,u,f,a){const l=Ho,d=xo,v=wo,y=cs,m=yo("image");return t(),e("div",rn,[s("table",null,[dn,s("tbody",null,[s("tr",null,[s("td",null,[s("div",cn,[s("div",{class:_o(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(t(),e("div",un,pn)):q("",!0),s("div",_n,h(o.positionInfo.positionStatus),1)],2),s("div",fn,[s("span",null,h(o.positionInfo.name),1),I(l,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:r[0]||(r[0]=p=>o.toPositionDetails(o.positionInfo))},gn)])]),s("td",null,[s("div",bn,[s("span",null,[F(h(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.positionInfo.positionUSD,2))}`)+" ",1),I(d,{"position-info":o.positionInfo},null,8,["position-info"])])])]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(t(!0),e(H,{key:0},to(o.positionInfo.rewards,p=>(t(),e("div",{key:p.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",$n,[eo(s("img",wn,null,512),[[m,o.getCoinIcon(p.rewarder_type)]]),s("span",null,h(p.rewarderAmount),1)])])]))),128)):(t(),e("div",yn,"0"))]),s("td",null,[s("div",kn,[o.positionInfo.positionSource=="clmm"?(t(),e(H,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(t(),D(y,{key:0},{title:M(()=>[F("Farming rewards are only available for active positions.")]),default:M(()=>[I(v,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:M(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(t(),D(v,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:M(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(t(),D(v,{key:1,class:"unstake-btn",onClick:o.unStake},{default:M(()=>[F("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(t(),D(v,{key:2,class:"claim-btn",disabled:!0},{default:M(()=>[F("↑ Claim")]),_:1})):(t(),D(v,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:M(()=>[F("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const ss=oo(ln,[["render",In],["__scopeId","data-v-13189896"]]),Pn=x({components:{FarmsPositionItem:ss},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const r=z({}),_=io(),u=i(()=>_),f=co(),a=i(()=>f),l=i(()=>a.value.farmsPoolList),d=i(()=>a.value.farmsPoolList),v=$o(),y=i(()=>v),m=i(()=>y.value.addressLpTokens),p=z([]),k=i(()=>a.value.myFarmsPoolList),C=Q=>{let K,G;o.currentTab=="My Farms"&&(K=u.value.address?k.value:[]),o.currentTab=="Ended"&&(K=a.value.farmsPoolList.filter(c=>c.status=="Ended")),o.currentTab=="Live"&&(K=a.value.farmsPoolList.filter(c=>c.status=="Live")),Q=="APR"?G=K.sort((c,b)=>b.stable_farming.apr-c.stable_farming.apr):G=K.sort((c,b)=>b.stable_farming.tvl-c.stable_farming.tvl),p.value=G.map(c=>{var b;return{...c,needReverse:c.is_forward===!1,coinA:c.coin_a,coinB:c.coin_b,liquidity:c.tvl_in_usd,vol:c.vol_in_usd_24h,stableFarmingApr:c.stable_farming&&c.stable_farming.apr*100,apr:c.apr_24h.replace("%",""),is_display_rewarder:(b=c==null?void 0:c.rewarder)==null?void 0:b.is_display_rewarder}})};bo(()=>[d.value,o.sortValue,o.currentTab,k.value],([Q,K])=>{Q&&Q.length>0&&K&&C(K)},{immediate:!0});const n=Q=>{if(r.value[Q.clmm_pool_id])r.value[Q.clmm_pool_id]=!1;else{if(r.value[Q.clmm_pool_id]=!0,!u.value.address)return!1;f.getPositionByPool(u.value.address,Q.clmm_pool_id,Q.id)}},B=i(()=>a.value.farmsPositionObj),P=i(()=>a.value.farmsLoadingObj),L=i(()=>a.value.farmsUserUsd),W=i(()=>a.value.farmsRewardObj),Y=i(()=>a.value.farmsPositionList),J=i(()=>a.value.farmsAllPositionLoading),A=So(),j=ko("Sui"),R=Io("Sui"),{setIsShowSuccess:O,setIsShowRejected:g,setIsShowWaiting:w,setTransactionDesc:U,setTransactionTxid:V}=v,E=async Q=>{const K=[];Y.value.forEach(G=>{Q==G.clmm_pool_id&&K.push({pool_id:G.pool_id,position_nft_id:G.id})}),V(""),U("Claim rewards"),w(!0);try{const G=await j.batchHarvest(K),c=await R.signAndExecuteTransactionBlock(u.value.currentWallet,G.txb,G.payloadParams);console.log("0221###sui swap res###",c);let b=R.handleTx(c);if(b&&b.hash){V(b.hash),w(!1),O(!0);let S={res:b.res,title:"Claim",hash:b.hash};R.showTransitionPending(S),await R.watchTransaction(S)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else w(!1),g(!0)}catch(G){console.log("Claim all error",G),w(!1),g(!0)}},no=fo(),mo=i(()=>no),To=i(()=>mo.value.poolsObj);i(()=>mo.value.tokensObj);const Uo=z({}),ho=i(()=>a.value.farmsPoolObj);return{wallet:u,walletStore:_,farmsPoolList:l,openMore:n,openMoreObj:r,checkNullObj:Z,router:A,farmsPositionObj:B,farmsLoadingObj:P,farmsUserUsd:L,sFixD:X,farmsRewardObj:W,claimPoolReward:E,farmsAllPositionLoading:J,addCommom:T,addressLpTokens:m,poolsObj:To,rewardInfoObj:Uo,pageList:p,farmsPoolObj:ho}}});const uo=o=>(lo("data-v-b13d80ac"),o=o(),ro(),o),Sn={class:"farms-table"},Ln=uo(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px"}})],-1)),Cn={key:0},Tn=["onClick"],Un={class:"staked-tvl"},jn={class:"apr"},On={key:0,class:"apr-hover-box"},An={class:"farms-reward-box"},Rn={key:0,class:"my-staked"},Fn={key:0,class:"my-staked-loading"},Dn={key:0,class:"position-usd"},Nn={key:1,class:"position-usd"},Bn={key:2,class:"position-usd"},En={key:3,class:"position-num"},Mn={key:1,class:"my-staked"},Vn=uo(()=>s("div",{class:"position-usd"},"--",-1)),Wn=[Vn],qn={class:"earned"},Hn={key:0,class:"my-staked-loading"},zn={key:0,class:"ratio-bg"},Qn=uo(()=>s("div",{class:"ratio"},null,-1)),Gn=[Qn],Jn={key:1},Kn={key:2},Xn={key:3},Yn={key:2},Zn={class:"actions"},xn={class:"actions-btn"},ot=["onClick"],st=uo(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),nt=[st],tt={colspan:"7",style:{padding:"0 16px 16px"}},et={key:0,class:"farm-position-list"},at={key:0,class:"farm-position-loading"},it={key:1,class:"farm-position-list"},lt=uo(()=>s("tr",{style:{height:"8px"}},null,-1)),rt={key:1},dt={colspan:"7"},ct={key:0,class:"no-data"},ut=uo(()=>s("img",{src:Go,alt:""},null,-1)),mt={key:1,class:"no-data"},pt=uo(()=>s("img",{src:Jo,alt:""},null,-1)),_t=uo(()=>s("span",null,"No farms found",-1)),ft=[pt,_t];function ht(o,r,_,u,f,a){const l=Yo,d=zo,v=Zo,y=Ro,m=wo,p=Vo,k=ss,C=Qo;return t(),e("div",Sn,[s("table",null,[Ln,o.pageList&&o.pageList.length>0?(t(),e("tbody",Cn,[(t(!0),e(H,null,to(o.pageList,n=>{var B;return t(),e(H,{key:n.id},[s("tr",{onClick:P=>o.openMore(n)},[s("td",null,[I(l,{"pool-info":n},null,8,["pool-info"])]),s("td",null,[s("div",Un," $"+h(("addCommom"in o?o.addCommom:$(T))(n.stable_farming.tvl,2)),1)]),s("td",null,[s("div",jn,[n.isStableFarming||n.rewarderInfo&&n.rewarderInfo.length>0||(B=n==null?void 0:n.stable_farming)!=null&&B.stable_farming_pool?(t(),e("div",On,[I(d,{"l-item":n,"rewarder-info":n.rewarder.rewardList,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])])):q("",!0),s("span",null,h((n==null?void 0:n.total_apr)>0&&n.total_apr<1e-4?"<0.01%":`${("addCommom"in o?o.addCommom:$(T))(n.total_apr*100,2)}%`),1)])]),s("td",null,[s("div",An,[(t(!0),e(H,null,to(n.rewarders,P=>(t(),D(v,{key:P.reward_coin,"reward-info":P,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("td",null,[o.wallet.address?(t(),e("div",Rn,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(t(),e("div",Fn,[I(y,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),e(H,{key:1},[o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount>0&&o.farmsUserUsd[n.clmm_pool_id].amount>.01?(t(),e("div",Dn,h(Number(o.farmsUserUsd[n.clmm_pool_id].amount)>0&&Number(o.farmsUserUsd[n.clmm_pool_id].amount)<.01?"<$0.01":"$"+("addCommom"in o?o.addCommom:$(T))(o.farmsUserUsd[n.clmm_pool_id].amount,2)),1)):o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount>0&&o.farmsUserUsd[n.clmm_pool_id].amount<.01?(t(),e("div",Nn," <$0.01 ")):(t(),e("div",Bn,"0")),o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].positionNum?(t(),e("div",En,h(o.farmsUserUsd[n.clmm_pool_id].positionNum)+" "+h(o.farmsUserUsd[n.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):q("",!0)],64))])):(t(),e("div",Mn,Wn))]),s("td",null,[s("div",qn,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(t(),e("div",Hn,[I(y,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd?(t(),e(H,{key:1},[o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd>0?(t(),e("div",zn,Gn)):q("",!0),Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)>.01?(t(),e("span",Jn,"$"+h(("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.farmsRewardObj[n.clmm_pool_id].amountUsd||0,2))),1)):Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)>0&&Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)<.01?(t(),e("span",Kn,"<$0.01")):(t(),e("span",Xn,"0"))],64)):(t(),e("span",Yn,"0"))])]),s("td",null,[s("div",Zn,[s("div",xn,[I(m,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[n.clmm_pool_id]||!o.farmsRewardObj[n.clmm_pool_id].amountUsd||o.farmsRewardObj[n.clmm_pool_id].amountUsd<=0||o.farmsLoadingObj[n.clmm_pool_id],onClick:vo(P=>o.claimPoolReward(n.clmm_pool_id),["stop"])},{default:M(()=>[F("Claim")]),_:2},1032,["disabled","onClick"]),I(m,{class:"add-liquidity-btn",onClick:vo(P=>o.router.push(`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`),["stop"])},{default:M(()=>[F("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:vo(P=>o.openMore(n),["stop"])},[(t(),e("svg",{class:_o(["arrow-icon",o.openMoreObj[n.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},nt,2))],8,ot)])])],8,Tn),eo(s("tr",null,[s("td",tt,[o.wallet.address?(t(),e("div",et,[!("checkNullObj"in o?o.checkNullObj:$(Z))(o.farmsLoadingObj)&&o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(t(),e("div",at,[I(p)])):o.farmsPositionObj[n.clmm_pool_id]&&o.farmsPositionObj[n.clmm_pool_id].length>0?(t(!0),e(H,{key:1},to(o.farmsPositionObj[n.clmm_pool_id],P=>(t(),D(k,{key:P.clmm_position_id,"current-tab":o.currentTab,"position-info":{...P,clmm_pool_id:n.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(t(),D(C,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(t(),e("div",it,[I(C,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Wo,!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]]]),lt],64)}),128))])):(t(),e("tbody",rt,[s("tr",null,[s("td",dt,[!o.wallet.connected&&o.currentTab=="My Farms"?(t(),e("div",ct,[ut,I(m,{class:"connect-wallet",onClick:r[0]||(r[0]=n=>o.wallet.setIsShowWalletModal(!0))},{default:M(()=>[F(h(o.$t("button.connectWallet")),1)]),_:1})])):o.pageList.length==0?(t(),e("div",mt,ft)):q("",!0)])])]))])])}const ns=oo(Pn,[["render",ht],["__scopeId","data-v-b13d80ac"]]),vt=x({props:{currentTab:{type:String,default:""}},setup(){const o=z(!1),r=io(),_=i(()=>r),u=co(),f=i(()=>u),a=i(()=>f.value.farmsPoolList);return{isShowMore:o,wallet:_,walletStore:r,farmsPoolList:a}}});const ts=o=>(lo("data-v-f521ea67"),o=o(),ro(),o),gt={class:"farms-table"},bt=ts(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px",background:"unset"}})],-1)),$t={class:"pool"},wt={class:"staked-tvl"},yt={class:"apr"},kt={class:"my-staked"},It={class:"actions"},Pt={class:"actions"},St={class:"actions"},Lt=ts(()=>s("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function Ct(o,r,_,u,f,a){const l=Ro;return t(),e("div",gt,[s("table",null,[bt,s("tbody",null,[(t(),e(H,null,to(4,(d,v)=>(t(),e(H,{key:v},[s("tr",null,[s("td",null,[s("div",$t,[I(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),I(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",wt,[I(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",yt,[s("span",null,[I(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",kt,[I(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",It,[I(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Pt,[I(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",St,[I(l,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),Lt],64))),64))])])])}const Tt=oo(vt,[["render",Ct],["__scopeId","data-v-f521ea67"]]),Ut=x({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const jt=o=>(lo("data-v-882c76c0"),o=o(),ro(),o),Ot={class:"position-info"},At={key:0,class:"status-bg"},Rt=jt(()=>s("img",{src:os,alt:""},null,-1)),Ft=[Rt],Dt={class:"status-text"},Nt={class:"name-range"};function Bt(o,r,_,u,f,a){const l=Ho;return t(),e("div",Ot,[s("div",{class:_o(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(t(),e("div",At,Ft)):q("",!0),s("div",Dt,h(o.positionStatus),1)],2),s("div",Nt,[s("span",null,h(o.positionInfo.name),1),o.positionStatus=="Active"?(t(),D(l,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):q("",!0)])])}const Et=oo(Ut,[["render",Bt],["__scopeId","data-v-882c76c0"]]),Mt=x({props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const r=fo(),_=i(()=>r),u=So(),f=j=>{var R;return((R=_.value.tokensObj[j])==null?void 0:R.logo_url)||Lo("/image/coins/sui-unknown.png")},a=Io("Sui"),l=ko("Sui"),d=z(!1),v=$o(),y=io(),m=co(),p=i(()=>y),{setIsShowSuccess:k,setIsShowRejected:C,setIsShowWaiting:n,setTransactionDesc:B,setTransactionTxid:P}=v,L=async()=>{d.value=!0,P(""),B("Claim rewards"),n(!0);const j={pool_id:A.value[o.positionInfo.clmmPool].id,position_nft_id:o.positionInfo.id};try{const R=await l.harvestFarms(j),O=await a.signAndExecuteTransactionBlock(p.value.currentWallet,R.txb,R.payloadParams);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id);let g=a.handleTx(O);if(g&&g.hash){P(g.hash),n(!1),k(!0);let w={title:"Claim",res:g.res,hash:g.hash};a.showTransitionPending(w),await a.watchTransaction(w)&&setTimeout(()=>{m.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else n(!1),C(!0);d.value=!1}catch(R){console.log("farmsDeposit error",R),n(!1),C(!0),d.value=!1}},W=async()=>{d.value=!0,P(""),B(`Unstake ${o.positionInfo.name}`),n(!0);const j=A.value[o.positionInfo.clmmPool].id,R=o.positionInfo.id;try{const O=await l.farmsWithdraw(j,R),g=await a.signAndExecuteTransactionBlock(p.value.currentWallet,O.txb,O.payloadParams);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id),console.log("0221###sui swap res###",g);let w=a.handleTx(g);if(w&&w.hash){P(w.hash),n(!1),k(!0);let U={res:w.res,title:"Unstaked",hash:w.hash};a.showTransitionPending(U),await a.watchTransaction(U)&&setTimeout(()=>{m.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else n(!1),C(!0)}catch(O){console.log("farmsDeposit error",O),n(!1),C(!0),d.value=!1}},Y=async()=>{d.value=!0,P(""),B(`Stake ${o.positionInfo.name}`),n(!0);const j={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},R=A.value[o.positionInfo.clmmPool].id;try{const O=await l.farmsDeposit(j,R),g=await a.signAndExecuteTransactionBlock(p.value.currentWallet,O.txb,O.payloadParams);m.setFarmsLoadingObj(o.positionInfo.clmm_pool_id),console.log("0221###sui swap res###",g);let w=a.handleTx(g);if(w&&w.hash){P(w.hash),n(!1),k(!0);let U={res:w.res,title:"Staked",hash:w.hash};a.showTransitionPending(U),await a.watchTransaction(U)&&setTimeout(()=>{m.getPositionByPool(p.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else n(!1),C(!0)}catch(O){console.log("farmsDeposit error",O),n(!1),C(!0),d.value=!1}},J=i(()=>m),A=i(()=>J.value.farmsPoolObj);return{getCoinIcon:f,router:u,claim:L,unStake:W,loading:d,stake:Y,sFixD:X,addCommom:T}}});const es=o=>(lo("data-v-a09e88b2"),o=o(),ro(),o),Vt={class:"farms-position"},Wt={class:"farms-position-box"},qt={class:"position-info-block"},Ht={class:"block-item"},zt=es(()=>s("div",{class:"leabl"},"Liquidity",-1)),Qt={class:"text"},Gt={class:"earnings"},Jt={class:"block-item"},Kt=es(()=>s("div",{class:"leabl"},"Earnings",-1)),Xt={class:"text"},Yt={key:0},Zt={alt:""},xt={key:1,class:"rewards-day"},oe={class:"unstake-btn-box"};function se(o,r,_,u,f,a){const l=Et,d=wo,v=yo("image");return t(),e("div",Vt,[s("div",Wt,[I(l,{"position-info":o.positionInfo},null,8,["position-info"])]),s("div",qt,[s("div",Ht,[zt,s("div",Qt,h(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.positionInfo.positionUSD,2))}`),1)])]),s("div",Gt,[s("div",Jt,[Kt,s("div",Xt,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(t(!0),e(H,{key:0},to(o.positionInfo.rewards,y=>(t(),e("div",{key:y.rewarder_type,class:"rewards-day"},[y.rewarderAmount>0?(t(),e("div",Yt,[eo(s("img",Zt,null,512),[[v,o.getCoinIcon(y.rewarder_type)]]),s("span",null,h(y.rewarderAmount),1)])):q("",!0)]))),128)):(t(),e("div",xt,"--"))])]),o.positionInfo.positionSource=="clmm"?(t(),D(d,{key:0,class:"add-liquidity-btn claim-btn",onClick:r[0]||(r[0]=y=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&token=${o.positionInfo.name}&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:M(()=>[F("+ Add liquidity")]),_:1})):(t(),D(d,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:M(()=>[F("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",oe,[s("div",null,[o.positionInfo.positionSource=="clmm"?(t(),D(d,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:M(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"])):(t(),D(d,{key:1,class:"unstake-btn",onClick:o.unStake},{default:M(()=>[F("Unstake")]),_:1},8,["onClick"]))])])])}const as=oo(Mt,[["render",se],["__scopeId","data-v-a09e88b2"]]),ne=x({components:{FarmsH5Position:as},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const r=z(!1),_=io(),u=i(()=>_),f=co(),a=i(()=>f),l=i(()=>o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(c=>c.status=="Ended"):a.value.farmsPoolList.filter(c=>c.status=="Live")),d=z([]),v=$o(),y=i(()=>v),m=i(()=>y.value.addressLpTokens),p=c=>{const b=l.value.map(S=>{const{stable_farming:N}=m.value[S.clmm_pool_id];return{...S,apr:N.apr,tvl:N.tvl}});c=="APR"?d.value=b.sort((S,N)=>N.apr-S.apr):d.value=b.sort((S,N)=>N.tvl-S.tvl)};bo(()=>[l.value,o.sortValue,m.value],([c,b,S])=>{c&&c.length>0&&b&&S&&!Z(S)&&p(b)},{immediate:!0});const k=i(()=>a.value.farmsUserUsd),C=i(()=>a.value.farmsRewardObj),n=i(()=>a.value.farmsPositionObj),B=i(()=>a.value.farmsPoolListLoading),P=i(()=>a.value.farmsPositionList),L=i(()=>a.value.farmsLoadingObj),W=i(()=>a.value.farmsAllPositionLoading),Y=z({}),J=c=>{if(Y.value[c.clmm_pool_id])Y.value[c.clmm_pool_id]=!1;else{if(Y.value[c.clmm_pool_id]=!0,!u.value.address)return!1;f.getPositionByPool(u.value.address,c.clmm_pool_id,c.id)}},A=ko("Sui"),j=Io("Sui"),{setIsShowSuccess:R,setIsShowRejected:O,setIsShowWaiting:g,setTransactionDesc:w,setTransactionTxid:U}=v,V=async c=>{const b=[];P.value.forEach(S=>{c==S.clmm_pool_id&&b.push({pool_id:S.pool_id,position_nft_id:S.id})}),U(""),w("Claim rewards"),g(!0);try{const S=await A.batchHarvest(b),N=await j.signAndExecuteTransactionBlock(u.value.currentWallet,S.txb,S.payloadParams);let po=j.handleTx(N);if(po&&po.hash){U(po.hash),g(!1),R(!0);let Po={res:po.res,title:"Claim",hash:po.hash};j.showTransitionPending(Po),await j.watchTransaction(Po)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else g(!1),O(!0)}catch(S){console.log("Claim all error",S),g(!1),O(!0)}},E=So(),no=fo(),mo=i(()=>no),To=i(()=>mo.value.poolsObj),Uo=i(()=>mo.value.tokensObj),ho=z({}),Q=(c,b)=>c&&b?_s.plus(Oo(c),Oo(b)):c||0,K=c=>{let b=0;return c&&c.forEach(S=>{b+=Oo(String(S))}),String(ao(String(b),2))},G=(c,b,S)=>{Object.keys(c).forEach(N=>{var jo,Fo,Do;const po=(jo=b[N])==null?void 0:jo.apr_7day,Po=Q((Fo=b[N])==null?void 0:Fo.apr_7day,K((Do=b[N])==null?void 0:Do.rewarder_apr));ho.value[N]={...c[N],apr:String(po).replace("%",""),aprTotal:Po},ho.value[N].rewards=[],c[N].rewarderInfo.forEach((ls,No)=>{var Bo,Eo;const rs=(Bo=S[ls.coinAddress])==null?void 0:Bo.symbol,ds=(Eo=b[N])==null?void 0:Eo.rewarder_apr[No];ho.value[N].rewards.push({symbol:rs,rewarderApr:ds,rewarder_display:c[N][`rewarder_display${No+1}`]})})})};return bo(()=>[To.value,m.value,Uo.value],([c,b,S])=>{c&&!Z(c)&&b&&!Z(b)&&S&&!Z(S)&&G(c,b,S)},{immediate:!0}),{isShowMore:r,wallet:u,farmsPoolList:d,farmsUserUsd:k,sFixD:X,farmsRewardObj:C,farmsPositionObj:n,openMore:J,checkNullObj:Z,openMoreObj:Y,farmsPoolListLoading:B,claimPoolReward:V,router:E,addCommom:T,farmsLoadingObj:L,farmsAllPositionLoading:W,addressLpTokens:m,rewardInfoObj:ho}}});const so=o=>(lo("data-v-2450ccdd"),o=o(),ro(),o),te={key:0,class:"farms-pool-list"},ee={class:"farms-block"},ae={class:"item-block"},ie=so(()=>s("div",{class:"leabl"},"Staked TVL",-1)),le={class:"text"},re={class:"item-block apr"},de=so(()=>s("div",{class:"leabl"},"APR",-1)),ce={class:"text"},ue={class:"apr-hover-box"},me={class:"item-block"},pe=so(()=>s("div",{class:"leabl"},"Rewards / day",-1)),_e={class:"text"},fe={class:"item-block my-staked"},he=so(()=>s("div",{class:"leabl"},"My Staked",-1)),ve={key:0,class:"text"},ge={class:"position-usd"},be={key:0,class:"position-num"},$e={key:1,class:"text"},we=so(()=>s("div",{class:"position-usd"},"--",-1)),ye=[we],ke={class:"item-block"},Ie=so(()=>s("div",{class:"leabl"},"Earned",-1)),Pe={class:"text earned-box"},Se={class:"earned"},Le={key:0,class:"my-staked-loading"},Ce=so(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Te={key:0},Ue={key:1},je={key:2},Oe={key:2},Ae={class:"add-liquidity-box"},Re=["onClick"],Fe=so(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),De=[Fe],Ne={key:1,class:"upgrade-loading"},Be={key:2,class:"no-data"},Ee=so(()=>s("img",{src:Go,alt:""},null,-1)),Me={key:3,class:"no-data"},Ve=so(()=>s("img",{src:Jo,alt:""},null,-1)),We=so(()=>s("span",null,"No Data",-1)),qe=[Ve,We];function He(o,r,_,u,f,a){const l=Yo,d=zo,v=Zo,y=Ro,m=wo,p=as,k=Qo,C=ps;return t(),e(H,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(t(),e("div",Ne,[I(C,{type:"poolsCard",loading:!0})])):q("",!0):(t(),e("div",te,[(t(!0),e(H,null,to(o.farmsPoolList,n=>{var B,P,L;return t(),e("div",{key:n.id,class:"farms-item"},[I(l,{"pool-info":n},null,8,["pool-info"]),s("div",ee,[s("div",ae,[ie,s("div",le,"$"+h(("addCommom"in o?o.addCommom:$(T))(n.tvl,2)),1)]),s("div",re,[de,s("div",ce,[F(h(n.total_apr>0&&n.total_apr<1e-4?"<0.01%":("addCommom"in o?o.addCommom:$(T))(n.total_apr*100,2))+"% ",1),s("div",ue,[n.isStableFarming||n.rewarderInfo&&n.rewarderInfo.length>0||(B=n==null?void 0:n.stable_farming)!=null&&B.stable_farming_pool?(t(),D(d,{key:0,"l-item":n,"rewarder-info":n.rewarder.rewardList,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):q("",!0)])])]),s("div",me,[pe,s("div",_e,[(t(!0),e(H,null,to(n.rewarders,W=>(t(),D(v,{key:W.reward_coin,"reward-info":W,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",fe,[he,o.wallet.address?(t(),e("div",ve,[s("div",ge,h(Number((P=o.farmsUserUsd[n.clmm_pool_id])==null?void 0:P.amount)>0&&Number((L=o.farmsUserUsd[n.clmm_pool_id])==null?void 0:L.amount)<.01?"<$0.01":"$"+("addCommom"in o?o.addCommom:$(T))(o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].positionNum?(t(),e("div",be,h(o.farmsUserUsd[n.clmm_pool_id].positionNum)+" "+h(o.farmsUserUsd[n.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):q("",!0)])):(t(),e("div",$e,ye))]),s("div",ke,[Ie,s("div",Pe,[s("div",Se,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(t(),e("div",Le,[I(y,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd?(t(),e(H,{key:1},[Ce,o.farmsRewardObj[n.clmm_pool_id].amountUsd>.01?(t(),e("span",Te,"$"+h(("addCommom"in o?o.addCommom:$(T))(("sFixD"in o?o.sFixD:$(X))(o.farmsRewardObj[n.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[n.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[n.clmm_pool_id].amountUsd<.01?(t(),e("span",Ue,"<$0.01")):(t(),e("span",je,"0"))],64)):(t(),e("span",Oe,"--"))]),I(m,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[n.clmm_pool_id]||o.farmsRewardObj[n.clmm_pool_id].amountUsd<=0,onClick:vo(W=>o.claimPoolReward(n.clmm_pool_id),["stop"])},{default:M(()=>[F("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",Ae,[I(m,{class:"add-liquidity-btn",onClick:vo(W=>o.router.push(`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`),["stop"])},{default:M(()=>[F("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:W=>o.openMore(n)},[(t(),e("svg",{class:_o(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},De,2))],8,Re),(t(!0),e(H,null,to(o.farmsPositionObj[n.clmm_pool_id],W=>eo((t(),D(p,{key:W.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...W,clmm_pool_id:n.clmm_pool_id}},null,8,["current-tab","position-info"])),[[Wo,!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[n.clmm_pool_id]&&o.farmsPositionObj[n.clmm_pool_id].length==0?(t(),D(k,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`},null,8,["add-liquidity-url"])):q("",!0),o.wallet.address?q("",!0):(t(),D(k,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))])}),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(t(),e("div",Be,[Ee,I(m,{class:"connect-wallet",onClick:r[0]||(r[0]=n=>o.wallet.setIsShowWalletModal(!0))},{default:M(()=>[F(h(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(t(),e("div",Me,qe)):q("",!0)],64)}const is=oo(ne,[["render",He],["__scopeId","data-v-2450ccdd"]]),ze=x({setup(o,r){const _=z("Live"),u=z("TVL"),f=z(!1),a=z(!1),l=co(),d=i(()=>l),v=io(),y=i(()=>v),m=i(()=>_.value=="My Farms"?y.value.address?d.value.myFarmsPoolList:[]:_.value=="Ended"?d.value.farmsPoolList.filter(L=>L.status=="Ended"):d.value.farmsPoolList.filter(L=>L.status=="Live")),p=i(()=>d.value.farmsPoolList.filter(L=>L.status=="Ended")),k=i(()=>p.value.length>0?["Live","Ended","My Farms"]:["Live","My Farms"]),C=L=>m.value.length,n=()=>{f.value=!0,l.getFarmsPoolList(),setTimeout(()=>{f.value=!1},1e3)},B=L=>{_.value=L,r.emit("changeTab",L)},P=L=>{u.value=L,r.emit("changeSortValue",L)};return qo(()=>{document.addEventListener("click",()=>{a.value=!1})}),{isOpenList:a,tabList:k,currentTab:_,sortValue:u,clickRefresh:n,isRefresh:f,farmsPoolList:m,getListNum:C,changeTab:B,changeSortValue:P}}});const go=o=>(lo("data-v-29027bb0"),o=o(),ro(),o),Qe={class:"farms-tab"},Ge={class:"tab-left"},Je=["onClick"],Ke={key:0},Xe={class:"tab-right"},Ye={class:"sort-select"},Ze=go(()=>s("div",null,"Sort by",-1)),xe={class:"showSort"},oa=go(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),sa=go(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),na=[sa],ta={key:0,class:"sort-list"},ea=go(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),aa=go(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),ia={class:"refresh"},la=go(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),ra=[la];function da(o,r,_,u,f,a){return t(),e("div",Qe,[s("div",Ge,[(t(!0),e(H,null,to(o.tabList,l=>(t(),e("div",{key:l,class:_o(["tab-item",o.currentTab==l?"tab-item-active":""]),onClick:d=>o.changeTab(l)},[s("span",null,h(l=="Ended"?"Finished":l),1),o.currentTab==l&&o.getListNum(l)?(t(),e("p",Ke,h(o.getListNum(l)),1)):q("",!0)],10,Je))),128))]),s("div",Xe,[s("div",Ye,[s("div",{class:"sort-select-box",onClick:r[0]||(r[0]=vo(l=>o.isOpenList=!o.isOpenList,["stop"]))},[Ze,s("div",xe,[s("span",null,h(o.sortValue),1),oa,(t(),e("svg",{class:_o(["arrow-icon",o.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},na,2))])]),o.isOpenList?(t(),e("div",ta,[s("div",{class:"sort-item",onClick:r[1]||(r[1]=l=>o.changeSortValue("APR"))},[F("APR "),ea]),s("div",{class:"sort-item",onClick:r[2]||(r[2]=l=>o.changeSortValue("TVL"))},[F("TVL "),aa])])):q("",!0)]),s("div",ia,[(t(),e("svg",{"aria-hidden":"true",class:_o(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:r[3]||(r[3]=(...l)=>o.clickRefresh&&o.clickRefresh(...l))},ra,2))])])])}const ca=oo(ze,[["render",da],["__scopeId","data-v-29027bb0"]]),ua=x({components:{FarmsBanner:Xo,FarmsTabs:ca,FarmsTable:ns,FarmsH5List:is},setup(){const o=co(),r=i(()=>o),_=i(()=>r.value.farmsPoolListLoading),u=z("TVL"),f=i(()=>r.value.farmsPoolList),a=io(),l=i(()=>a),d=fo(),v=i(()=>d);bo(()=>[l.value.address,f.value,v.value.tokensObj,v.value.RATES],([m,p,k,C])=>{m&&p.length>0&&!Z(k)&&!Z(C)&&o.getPositionByAllPool(m)},{immediate:!0}),qo(()=>{o.getFarmsPoolList()}),bo(()=>l.value.address,m=>{m||o.logOut()},{immediate:!0});const y=z("Live");return{farmsPoolListLoading:_,currentTab:y,sortValue:u}}});const ma={class:"farm-container"},pa={class:"farm-container-center"};function _a(o,r,_,u,f,a){const l=Xo,d=us("FarmsTabs"),v=ns,y=Tt,m=is;return t(),e("div",ma,[I(l),s("div",pa,[I(d,{onChangeTab:r[0]||(r[0]=p=>{o.currentTab=p}),onChangeSortValue:r[1]||(r[1]=p=>{o.sortValue=p})}),o.farmsPoolListLoading?(t(),D(y,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(t(),D(v,{key:0,"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])),I(m,{"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])])])}const Ra=oo(ua,[["render",_a],["__scopeId","data-v-656fe488"]]);export{Ra as default};
