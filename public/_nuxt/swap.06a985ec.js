import{_ as dn}from"./refresh-icon.1dd6f82a.js";import{_ as mn}from"./assets-card.e0fc1841.js";import{u as Te,e as io,c as $e,s as ae,a as Q,o as Ze,d as ce,z as He,g as Ro,j as vn,b as ze,p as Io}from"./pool.c7bdc0b4.js";import{e as Fe,a as Ge,C as No,L as Oo,r as p,l as N,q as te,s as Me,o as r,f,h as o,c as Z,x as D,t as ee,j as K,v as u,A as me,F as Ke,u as z,S as Bo,M as To,p as Ue,k as je,a4 as pn,i as be,w as ve,P as Fo,$ as Mo,Q as Uo,E as $o,B as jo,b as Po,y as gn,H as fn,K as hn,D as Ye}from"./entry.61500d5d.js";/* empty css              *//* empty css              */import{c as Ce,u as Ee,a as Cn}from"./sha256.7f09dfa8.js";import{i as pe}from"./import-icon.de3e6c66.js";import{D as l}from"./decimal.0bdeb344.js";import{_ as wn}from"./network-tips.0495b556.js";import{_ as bn}from"./coin-select.69595517.js";import{_ as kn}from"./swap-setting.790eb90f.js";/* empty css              */import{_ as yn}from"./token-warning-modal.cda7de73.js";import{u as An}from"./swapRouter.99a171b5.js";import{_ as Sn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.9ebb122a.js";/* empty css              */import"./token-warning_2x.28d81f1f.js";import"./img-no-Positions_2x.1c41be11.js";import"./img-no-Positions_2x.074135fe.js";/* empty css              */import"./icon-error_2x.539d1e6a.js";import"./icon-selected_3x.09e9a6f0.js";async function _n(e,g){var W,q,v;const $=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,A=`${Ce.Sui.api}/v2/sui/coin/kline?coin_address=${$}&interval=day&market=${g}`;try{const P=await $fetch(A);return console.log("0621###getprice###res###",P),{price:((q=(W=P==null?void 0:P.data)==null?void 0:W.list)==null?void 0:q.reverse())||[],daily_rate:(v=P==null?void 0:P.data)==null?void 0:v.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function In(e){try{const{prices:g}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),A=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,W=[];return g.forEach(q=>{W.push({price:new l(q[1]).toString(),timestamp:q[0]})}),{price:W,daily_rate:A}}catch{return{price:[],daily_rate:""}}}const $n=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const Pn=Ge({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const g=No(Oo,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),$=p(!1),A=Ee(),W=N(()=>A),q=N(()=>W.value.slippage),v=N(()=>W.isShowRouterModal);te(()=>e,n=>{console.log(n,"==>newValue")},{immediate:!0,deep:!0});const P=Te(),C=N(()=>P),Y=io("Sui"),V=p(0),x=p([]),_=p({});te(()=>e.suiPreSwapdata,async n=>{var s;if(console.log(n,"===>suiPreSwapdata"),n&&!$e(n)){let S=[];(s=n==null?void 0:n.splitPaths)==null||s.forEach(j=>{j==null||j.basePaths.forEach(async J=>{S.push(J.label),console.log(J.toCoin,"==>basePath.toCoin"),console.log(J.fromCoin,"==>basePath.fromCoin")})});const{splitPaths:h}=n,F=h&&h[0]&&h[0].basePaths;if(h&&h.length==1&&F&&F.length==2){const j=F[0].toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":F[0].toCoin;_.value=C.value.tokensObj[j]||(await Y.getTokenListByCoinType[j])[0],console.log(_.value,"===>coinTypeB.value")}else _.value="";x.value=Array.from(new Set(S)),V.value=x.value.length,console.log(x.value,"===>sourcesArr.value"),console.log(_.value,"===>coinTypeB")}},{immediate:!0});const U=p(0),a=p(0);te(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,q.value],([n,s,S,h,F,j])=>{if(n&&s&&S&&h&&j)if(F){const J=new l(s).mul(new l(j/100));a.value=new l(s).sub(J).toString()}else{const J=new l(n).mul(new l(j/100));U.value=new l(n).add(J).toString()}},{immediate:!0});const H=n=>{var s;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((s=C.value.tokensObj[n==null?void 0:n.address])==null?void 0:s.logo_url)||(W.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},oe=N(()=>{var n,s,S,h,F,j,J,I,E;return(S=(s=C==null?void 0:C.value)==null?void 0:s.tokensObj[(n=e.fromCoin)==null?void 0:n.address])!=null&&S.pyth_id&&((j=(F=C==null?void 0:C.value)==null?void 0:F.tokensObj[(h=e.fromCoin)==null?void 0:h.address])==null?void 0:j.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(E=(I=C==null?void 0:C.value)==null?void 0:I.tokensObj[(J=e.fromCoin)==null?void 0:J.address])!=null&&E.coingecko_id?"coingecko":null}),w=N(()=>{var n,s,S,h,F,j,J,I,E;return(S=(s=C==null?void 0:C.value)==null?void 0:s.tokensObj[(n=e.toCoin)==null?void 0:n.address])!=null&&S.pyth_id&&((j=(F=C==null?void 0:C.value)==null?void 0:F.tokensObj[(h=e.toCoin)==null?void 0:h.address])==null?void 0:j.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(E=(I=C==null?void 0:C.value)==null?void 0:I.tokensObj[(J=e.toCoin)==null?void 0:J.address])!=null&&E.coingecko_id?"coingecko":null}),G=p(""),T=async()=>{console.log("##result400");const n=C.value.tokenExternalPriceObj[e.fromCoin.address],s=C.value.tokenExternalPriceObj[e.toCoin.address];if(n&&s){console.log("fromCoin价格:",n),console.log("toCoin价格",s),console.log("当前价格:",e.oneToAmount.replace(",",""));const S=new l(n).div(new l(s)),h=new l(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(S).div(S).mul(100);console.log(oe.value,w.value,"##417");let F=Math.abs(ae(h,2));S.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?G.value="":(G.value=h>0&&h<=.01?"0.01":F,console.log(n,s,h.toString(),"##367"))}else G.value=""},R=n=>{if(n<5)return"color-s";if(n>=5&&n<10)return"color-w";if(n>=10)return"color-e"};return te(()=>[e.oneToAmount,C.value.tokenExternalPriceObj],([n,s])=>{n&&s&&!$e(s)&&(console.log(n,s,"##newVal"),T())},{immediate:!0,deep:!0}),{sFixD:ae,getCoinIcon:H,indicator:g,rateChange:$,slippage:q,isShowRouterModal:v,indexStore:A,maximumSold:U,minimumReceived:a,addCommom:Q,pathLength:V,sourcesArr:x,coinTypeB:_,priceExangeRate:G,getTextColor:R,formCoinMarket:oe,toCoinMarket:w}}}),ie=e=>(Ue("data-v-976188e4"),e=e(),je(),e),Rn={key:0,class:"swap-info"},Nn={class:"loading-swap"},On={key:1,class:"swap-rate"},Bn={key:0},Tn={key:0,class:"after-amount"},Fn={key:1},Mn={key:0,class:"after-amount"},Un=ie(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),jn=ie(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),En=[Un,jn],Ln={key:2,class:"swap-exchange-rate"},Dn={class:"swap-exchange-rate-content"},Wn={key:0},qn=["href"],Jn=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),Qn=[Jn],Xn={key:1},Hn=["href"],zn=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),Yn=[zn],Zn={key:0},Kn=["href"],Gn=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),Vn=[Gn],xn={key:1},et=["href"],ot=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),nt=[ot],tt={key:2},st=["href"],at=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),it=[at],lt={key:3},ut=["href"],rt=ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),ct=[rt],dt={key:3},mt={class:"trade-info"},vt={class:"trade-block"},pt=ie(()=>o("div",{class:"lebal"},"Price Impact",-1)),gt={key:0,class:"icon","aria-hidden":"true"},ft=ie(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),ht=[ft],Ct={class:"trade-block"},wt={class:"lebal"},bt={key:0,class:"text"},kt={class:"trade-block"},yt=ie(()=>o("div",{class:"lebal"},"Fee",-1)),At={key:0,class:"text"},St={key:0,class:"trade-block"},_t=ie(()=>o("div",{class:"lebal"},"Route",-1)),It={key:0,class:"text text-box"},$t=["src"],Pt=["src"],Rt={key:1,class:"text text-box"},Nt=["src"],Ot=["src"],Bt=ie(()=>o("img",{src:$n,alt:""},null,-1));function Tt(e,g,$,A,W,q){var Y,V,x,_;const v=Bo,P=To,C=Me("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(r(),f("div",Rn,[o("div",Nn,[e.swapLoading||e.swapRouterLoading?(r(),Z(v,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):D("",!0),e.swapLoading?D("",!0):(r(),f("div",On,[e.rateChange?(r(),f("span",Fn,[e.fromCoinAmount&&e.toCoinAmount?(r(),f("span",Mn,[ee(o("img",null,null,512),[[C,e.getCoinIcon(e.toCoin)]]),K(" 1 "+u(e.toCoin.symbol)+" ≈ ",1),ee(o("img",null,null,512),[[C,e.getCoinIcon(e.fromCoin)]]),K(u(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+u(e.fromCoin.symbol),1)])):(r(),Z(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(r(),f("span",Bn,[ee(o("img",null,null,512),[[C,e.getCoinIcon(e.fromCoin)]]),K(" 1 "+u(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(r(),f("span",Tn,[ee(o("img",null,null,512),[[C,e.getCoinIcon(e.toCoin)]]),K(u(e.oneToAmount==1/0?0:e.oneToAmount)+" "+u(e.toCoin.symbol),1)])):(r(),Z(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:g[0]||(g[0]=U=>e.rateChange=!e.rateChange)},En)])),!e.swapLoading&&e.priceExangeRate!==""&&e.priceExangeRate>10?(r(),f("div",Ln,[o("div",Dn,[o("p",null,[o("span",{class:me(e.getTextColor(e.priceExangeRate))},"Within ~"+u(e.priceExangeRate)+"% of",3)]),e.formCoinMarket=="pyth"&&e.toCoinMarket=="pyth"?(r(),f("span",Wn,[K("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}&ids[]=${e.toCoin.pyth_id}`,target:"_blank"},Qn,8,qn)])):e.formCoinMarket=="coingecko"&&e.toCoinMarket=="coingecko"?(r(),f("span",Xn,[K("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id},${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},Yn,8,Hn)])):e.formCoinMarket!==e.toCoinMarket?(r(),f(Ke,{key:2},[e.formCoinMarket=="pyth"?(r(),f("span",Zn,[K("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.fromCoin.pyth_id}`,target:"_blank"},Vn,8,Kn)])):e.formCoinMarket=="coingecko"?(r(),f("span",xn,[K("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.fromCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},nt,8,et)])):D("",!0),e.toCoinMarket=="coingecko"?(r(),f("span",tt,[K("CoinGecko "),o("a",{href:`https://api.coingecko.com/api/v3/simple/price?ids=${e.toCoin.coingecko_id}&vs_currencies=usd`,target:"_blank"},it,8,st)])):e.toCoinMarket=="pyth"?(r(),f("span",lt,[K("Pyth Network "),o("a",{href:`https://xc-mainnet.pyth.network/api/latest_price_feeds?ids[]=${e.toCoin.pyth_id}`,target:"_blank"},ct,8,ut)])):D("",!0)],64)):D("",!0)])])):e.swapLoading?(r(),f("span",dt,"Best route and price")):D("",!0)]),o("div",mt,[o("div",vt,[pt,e.swapRouterLoading?(r(),Z(P,{key:1,paragraph:!1,active:""})):(r(),f("div",{key:0,class:me(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[K(u(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),f("svg",gt,ht)):D("",!0)],2))]),o("div",Ct,[o("div",wt,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(r(),Z(P,{key:1,paragraph:!1,active:""})):(r(),f("div",bt,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:z(Q))(("sFixD"in e?e.sFixD:z(ae))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:z(Q))(("sFixD"in e?e.sFixD:z(ae))(e.maximumSold,e.fromCoin.decimals)))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",kt,[yt,e.swapRouterLoading?(r(),Z(P,{key:1,paragraph:!1,active:""})):(r(),f("div",At,u(e.suiSwapFee)+" "+u(e.fromCoin.symbol),1))]),e.insufficientLiquidity?D("",!0):(r(),f("div",St,[_t,e.swapRouterLoading?(r(),Z(P,{key:1,paragraph:!1,active:""})):(r(),f("div",{key:0,class:"text",onClick:g[1]||(g[1]=U=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[!e.swapRouterLoading&&e.suiPreSwapdata&&e.suiPreSwapdata.splitPaths&&e.suiPreSwapdata.splitPaths.length==1?(r(),f("div",It,[o("span",null,u(e.fromCoin.symbol)+" "+u(e.coinTypeB&&((Y=e.coinTypeB)!=null&&Y.symbol)?`> ${(V=e.coinTypeB)==null?void 0:V.symbol}`:"")+" > "+u(e.toCoin.symbol),1),o("img",{src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,$t),e.sourcesArr[1]?(r(),f("img",{key:0,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Pt)):D("",!0)])):e.swapRouterLoading?D("",!0):(r(),f("div",Rt,[K(u((_=(x=e.suiPreSwapdata)==null?void 0:x.splitPaths)==null?void 0:_.length)+" Streams ",1),e.sourcesArr[0]?(r(),f("img",{key:0,src:e.sourcesArr[0]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Nt)):D("",!0),e.sourcesArr[1]?(r(),f("img",{key:1,src:e.sourcesArr[1]=="Deepbook"?"/sui-image/logo_deepbook@2x.png":"/sui-image/logo_cetus@2x.png",alt:""},null,8,Ot)):D("",!0)])),Bt]))]))])])):D("",!0)}const Ft=Fe(Pn,[["render",Tt],["__scopeId","data-v-976188e4"]]),Mt={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,g){const{$echarts:$}=pn();let A=null,W;const q=p(!0),v=Ee(),P=N(()=>v),C=N(()=>P.value.chainName),Y=N(()=>Ce[C.value]),V=Te(),x=N(()=>V),_=(n,s,S)=>{W={xAxis:{type:"category",boundaryGap:!1,show:!1,data:s},yAxis:{type:"value",show:!1,min:function(h){return h.min-h.min*.1},max:function(h){return h.max+h.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:P.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(h){return`<div class="chart-tip">
              <div>${h&&h[0]&&h[0].name}</div>
              <div>$${ce(h&&h[0]&&h[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:P.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:P.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:n,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:P.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},W&&A.clear(),W&&A.setOption(W,!0),A.resize(),q.value=!1},U=p(""),a=p(""),H=async n=>{var J,I;const s=[],S=[],{price:h,daily_rate:F}=C.value==="Aptos"?await In(n):await _n(n,e.market);C.value=="Sui"&&V.setTokenExternalPrice(e.coin.address,h[h.length-1].price),U.value=F,a.value=h&&h.length>1&&h[h.length-1].price,C.value==="Aptos"?h.forEach(E=>{s.push(E.price);const c=He(Number(E.timestamp),"MD"),d=He(Number(E.timestamp),"HM");S.push(c+" "+d)}):h.forEach(E=>{s.push(E.price);const c=He(new l(E.timestamp).mul(1e3).toNumber(),"MD"),d=He(new l(E.timestamp).mul(1e3).toNumber(),"HM");S.push(c+" "+d)});let j=document.getElementById(`main${(J=e.coin)==null?void 0:J.name}`);A=$.init(j),_(s,S,(I=e.coin)==null?void 0:I.name)};te(()=>e.id,(n,s)=>{console.log(n,s,"===>oldValue"),console.log(!q.value,"!isFirst.value"),n&&(U.value="",a.value="",setTimeout(()=>{H(n)},1e3))},{immediate:!0});const oe=p(""),w=p(""),G=p(""),T=p("");te(()=>[x.value.tokensObj,e.coin],([n,s])=>{var S,h;n&&s&&n[s.address]&&(console.log(n[s.address],"===>newValue[coin.address]"),w.value=((S=n[s.address])==null?void 0:S.labels)&&((h=n[s.address])==null?void 0:h.labels[0]),oe.value=n[s.address].name,G.value=n[s.address].symbol,T.value=n[s.address].address)},{immediate:!0,deep:!0}),te(()=>e.refresh,n=>{n&&H(e.id)});const R=N(()=>P.value.theme);return console.log(e.coin.address=="0x2::sui::SUI","0x2::sui::SUI"),{theme:R,store:v,importIcon:pe,fixD:Ze,config:Y,price_rate_24h:U,nowPrice:a,coinName:oe,coinLabels:w,coinSymbol:G,address:T,decimalUi:ce}}},Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAACM9JREFUWEeVV2lwU9cV/u59i1YLWZItb9iWw2JWsxXCQMIyJAOdkJSEtsDQhE7Slpl2OoXOdJpf4R/9kU7STtqmDBm2pnQaICkOZUoISUigQFhM7BhsTGUbGyNbsqzNT09v69yr2IjdOfr3dO493znnO8slGKO8H/6VV8vY3tDM1OpMbtCTMzKiZir8tETskESX7pZ9SYl6GiWXumVN6M2hsVxNHqW0/8ovlpqaeWBguMOnG9oj9dl9oiBZJY4Jg1Sma9dPeevTh9l44IV7el70y/FxF26lr1Ybps71iiQ7JrjLEHKVwinKcIs2WDQABW5kDBWdyXZcS1xBMpfiNgUqWkH35G6tODn3paq9sfsBuS+A/c2bl6azQ8cTuYjADpU7vFgenAGf5IIJi/9GxLJMECKCCAEIci0EsQoxpRUfd7+H3kwfV/PIQaPI7l2xfsbb90TjHgB7mjZtTeUGX89qKSJTAasqZqPa6YdhmgB5WAYMwLIAIoBIdRDFIG4kzuLIjRNQTQ12yW15pODWF2fvfLMwEnfcuK/5laVJpf+EoqXIOMmOF6oeh1O0ca/HLkyXgRFBpUooRhaHOhsRz6U5CL+jcnlhJEYBvHVljd+WcUQSap/gkWzYWLsEhBBYzKsCoYSA/ZiwVFAA7JtpWdDv0GXnLEAoBhUq8bdrOzGUS2OcrcyQXdngS1Pe55wYBfDu5Z939qVbayQqYEPNYrhF+2iuiUVAKYEJE9FsGmlN4eDsooyYQtE3nEPI48SEIgdM04Q1miqLp4VItVDhxN62PyNn6qhwT+3a0PCn2lEALPSxTPcJVmYry2diYlEFDMvkDjDDWUPD1UQPwul+JHQFqqFy5DKRoFoibmQsdKUFrAjWYl1dBWQWuVHXGAgKqehphOOncbjzIAQqWWXuOp4Krrbv8uZoJN3mL5ad2Fj7ZN44Cy0IwukIzsU6ENeGkTMMeB1VaChdBYHK6IidRmfiS5hEQFYHRCpjeTCEKZ4KOEQ7yGgMdRBpEiTHdLzb+hoGlBjK3PWxjQ1/CZBdl77nTanZwZyhkjVV30G5w8dzJxCKrxPdOBvtQMrIgqXB7wxhofeXOHbkJEzdwvxFM9HrPIxw/DxEIoLBZudkKqLS6UPIVYIqlx8OKnOHZM9z6E83YX/7TkiCzaoOlvnIrgs/2RXLdmyyURE/m/gUdNPgnverCXx0qxlRNcUvZTmfV7IRXx3N4vMvTnLSzZw+CwvXetGaakROz4AQRsl8NfL8AXAIEuqLKjHXXw2HYzYkeQLebv4NFD2LcteU3WTfV5ujkVSbv9YVwOrKeTz8IhXwef8VNA12ceIx45RQLCh9GV8c7MPZc2d4cKdMmoYl6ypwTT2C4dwQKOF9q0DyLcswDcwqrsEC/zR4fD/Ev9u3oy3ZgfHemTGyu+nlXDTzP+mJkslo8Nbymmdl9WHPeXSk+zmYvBBUu+cimF6JwwePcw/nLZgF14xWXI19AkKF0fIcQSAQietppgaZUKyqmI6JZT9FS/+/cKznOEpcdRrZcf4HZlIdIM9VzuP5YpA1S0dj7wXcyMRuA+AVIaCh9Bl4zalQVQ1mURTn+/ZDM4ZB7vJeIDJqPHOgGml0JS9CpjJWVczEpMB30ZfpwD+uH4DHVmKRP5xZaWqGSn4UWgIPYy4BhnUVH/ZexE0lXhCBfOMxTR0O2QOR2pDKRkEpY0w+9yPC9NiIDhUvgKIn0BE/izpnOZaW18PvrEfOVPHXq3/nRCR/PLPSZBWwoWYRim1uTsB4LsMBxHJ5At4t+cxa3DADfFezzKtTBlaDqgAOswjPPjYT1R4fTAhQLQPvXPsPJMFukR3n15lJNUJWljfwUcsIN5BN4sjNi0how5x8DxTLQk6hkGQLgs3i/GFtWlcJlEERhga4XAKeqK3DrMB40G+aU68Sxwc9X8JjK7XInqZXcgOZ69Kc4hosCtQDhOLmcAxHbl7CsJHjhHyYaAowHJGRSwswTAIqmJCcJuxeA04HxeKKiZgWqIAAgc8VFuFL8TBORdtR4npMI//8eku0e6jJX2IrwvraRZyE11MRHL15CQbz6BEAYFrQNQJDZ3XCeh+byBZcdgGLg5NR76n8hiP5viASioM3zoJFodo7K0Y+uPLaro7Bk5tEQvDjumVwCDKah7pw7FYL2GAasxQEihXk44GJvKzZ58J5yhza0fERNNPEBN+Tu8kn4W3elv5zg6qukPn+EGYX1+FUtA1N8S6I9zSWMcBhHdI7HotLpxQOW36QAbs8FMbJgXbYRIc1vXS+j+N+r+XX0a7ERb9dEPF0WQNOD7QhoibvWwEPJiR416x0+PBM5RxIRCwY9vn0sC67N/wphg0NNePmxL4//fcBDuBoePvS9shnJ1g/KBJFpHX9W+1A7A5GMIlQrKmejxLZc8/6xsj8WaQFzYleXv+TgkuWrwq9mh/HTA62/rYzHD9bw2pbN7N83H4b0Q0DcwIhLPRPhHBX6lgptye78XGkDYZlsAbV9cLU391eSJihQz2v+pP9tyJRpVPIg8ixtXpMGNhkFEHxfPUClNqY97ePMeOx7BAO9Vzgy2nAUWt4SsuCz1dtv3MlG0lFV+z8ibQ6SCgoNEMBpfIjS1G3DExyl2NZcBrsgpTfFQnlaWkZ6sR/Y2HkTA1um8+q8c/joR+BeE+XaWzbtrU31fw6B0EEsOcXZXv/Xf2+MDRsz1scmIzZvhAvXbYXDKlpnOpvRZeSgGHp3HiFe8bWZ+u3PXgtH7mUkTISv3Y8qoRHG4Fh5UBRAKQAOgPwVHAGphWPR1RJoiURxvX0IA85Exb2YPGkFYWePzACI38wTlhJ60JP8nK1ZmS5OUYuxg0+jPgEYp/ZtmygWHbzMtMswuc/EzZsqjwN3cRD5o7k/G5SPfKxyaKRHo4duJVu9bFmNRZWsiZT5p466Hb6197P68I7xnQhO8A6ZiJrvaGZ6dWKnvSoelpUtPwL3CF5YRPdukP0JCXqbhxnJ1uWhbaN6Xn+f1F23aMaO2HeAAAAAElFTkSuQmCC";const Et=e=>(Ue("data-v-cab5b536"),e=e(),je(),e),Lt={class:"token-info"},Dt={class:"token-info-padding"},Wt={class:"token-info-header"},qt={class:"left"},Jt=["onerror"],Qt={class:"name"},Xt={class:"desc"},Ht={key:0},zt={class:"right"},Yt={class:"price-info"},Zt={key:0,src:Ut,alt:""},Kt={key:1,src:jt,alt:""},Gt={class:"token-info-footer"},Vt={class:"left"},xt={class:"address"},es={key:0,class:"pc-address"},os={key:1,class:"pc-address"},ns={class:"h5-address"},ts=Et(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),ss=[ts],as={class:"right"},is=["id"];function ls(e,g,$,A,W,q){var C;const v=Fo,P=Me("image");return r(),f("div",Lt,[o("div",Dt,[o("div",Wt,[o("div",qt,[ee(o("img",{onerror:A.theme=="default"?A.importIcon("/image/coins/unknown.png"):A.importIcon("/image/coins/sui-unknown.png")},null,8,Jt),[[P,$.coin.logoURI||A.importIcon(`/image/coins/${$.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",Qt,u(A.coinSymbol),1),o("div",Xt,[o("span",null,[K(u(A.coinName)+" ",1),A.theme!=="sui"?(r(),f("span",Ht,u(A.coinLabels?`(${A.coinLabels})`:""),1)):D("",!0)])])])]),o("div",zt,[be(v,{placement:"top","arrow-point-at-center":""},{title:ve(()=>[K(u($.market==="pyth"?"Data source: Pyth Network":"Data source: CoinGecko"),1)]),default:ve(()=>[o("div",Yt,[$.market==="pyth"?(r(),f("img",Zt)):(r(),f("img",Kt)),o("span",null,"$"+u(A.nowPrice?Number(A.nowPrice)<1?A.decimalUi(A.nowPrice,4):A.fixD(A.nowPrice,2):"--"),1),A.price_rate_24h?(r(),f("i",{key:2,class:me(A.price_rate_24h>0?"up":A.price_rate_24h<0?"down":"up")},u(A.price_rate_24h>0?`+ ${A.fixD(A.price_rate_24h,2)}`:A.price_rate_24h<0?+`${A.fixD(A.price_rate_24h,2)}`:`+${A.fixD(A.price_rate_24h,2)}`)+"%",3)):D("",!0)])]),_:1})])]),o("div",Gt,[o("div",Vt,[o("div",xt,[$.coin&&A.address!=="0x2::sui::SUI"?(r(),f("span",es,u($.coin&&$.coin.address.substr(0,13))+" ... "+u($.coin&&$.coin.address.substr($.coin.address.length-13,13)),1)):(r(),f("span",os,u($.coin&&$.coin.address),1)),o("span",ns,u($.coin&&$.coin.address.substr(0,4))+" ... "+u($.coin&&$.coin.address.substr($.coin.address.length-4,4)),1),(r(),f("svg",{class:"icon","aria-hidden":"true",onClick:g[0]||(g[0]=Y=>A.store.copy($.coin&&$.coin.address))},ss))])]),o("div",as,[o("div",{id:`main${(C=$.coin)==null?void 0:C.name}`,class:"main"},null,8,is)])])])])}const us=Fe(Mt,[["render",ls],["__scopeId","data-v-cab5b536"]]);const rs=Ge({components:{Modal:Mo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const g=Te(),$=io("Sui"),A=N(()=>g);N(()=>{var _,U;return(U=(_=A.value)==null?void 0:_.poolInfo)==null?void 0:U.needReverse});const W=p([]),q=p({});te(()=>[e.suiPreSwapdata,e.fromCoin,e.toCoin],async([_,U,a])=>{if(_&&!$e(_)){let H=[];_.splitPaths.sort((R,n)=>n.outputAmount-R.outputAmount);for(let R=0;R<_.splitPaths.length;R++){const n=_.splitPaths[R];console.log(n,"###splitPath");const s={...n,amountIn:new l(n.inputAmount).div(new l(Math.pow(10,U.decimals))).toString(),amountOut:new l(n.outputAmount).div(new l(Math.pow(10,a.decimals))).toString()};let S=[];for(let h=0;h<n.basePaths.length;h++){const F=n.basePaths[h];console.log(F,"###basePath");const j=F.fromCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":F.fromCoin,J=F.toCoin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":F.toCoin,I=A.value.tokensObj[j]||(await $.getTokenListByCoinType([j]))[0],E=A.value.tokensObj[J]||(await $.getTokenListByCoinType([J]))[0];console.log(I,E,"###coin_a coin_b"),(F==null?void 0:F.label)=="Deepbook"?S.push({...F,...A.value.routerPoolConfigObj[F.poolAddress],feeRate:new l(F.feeRate).div(new l(Math.pow(10,9))),coin_a:I,coin_b:E}):S.push({...F,...A.value.routerPoolConfigObj[F.poolAddress],feeRate:new l(F.feeRate).div(new l(Math.pow(10,6)))})}H.push({...s,basePaths:S})}W.value=H;const oe=[];let w=new l(0);H.forEach(R=>{const n=new l(R.percent).gt(0)?new l(R.percent).div(100).mul(100).toString():0,s=ae(n,2);w=w.plus(s);const S=s.split(".");oe.push({value:s,int:S[0],decimal:S[1],pathIndex:R.pathIndex})});let G=new l(100).minus(w).toNumber();const T=oe.sort((R,n)=>Number(n.decimal)-Number(R.decimal));if(G)for(let R=0;R<T.length&&G;R++)T[R].value=new l(T[R].value).plus(.01).toString(),G=new l(G).minus(.01).toNumber();q.value=Object.fromEntries(T.map((R,n)=>[R.pathIndex,R])),console.log(T,"===>sortByDecimalPart"),console.log(H,"===>routerArr")}},{immediate:!0});const v=Ee(),P=N(()=>v),C=_=>{var U;return console.log("获取logo"),console.log(A.value.tokensObj,"==>pools.value.tokensObj217"),(_==null?void 0:_.logoURI)||(_==null?void 0:_.logo_url)||((U=A.value.tokensObj[(_==null?void 0:_.address)=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":_==null?void 0:_.address])==null?void 0:U.logo_url)||(P.value.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},Y=async _=>{const U=(await $.getTokenListByCoinType([_]))[0];return console.log(U,"###tokenInfo"),U&&!$e(U)?U==null?void 0:U.logo_url:""},V=N(()=>A.value.tokensObj),x=N(()=>P.value.currentExplorer);return{addCommom:Q,routerStep:W,getCoinIcon:C,getDeepBookLogo:Y,percentObj:q,tokensObj:V,store:P,getExplorerUrl:Ro,currentExplorer:x}}}),ke=e=>(Ue("data-v-dc1c7246"),e=e(),je(),e),cs=ke(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ds={class:"route-top"},ms={class:"token-a"},vs={alt:""},ps={class:"token-num"},gs={class:"token-symbol"},fs={class:"token-b"},hs={class:"token-num"},Cs={class:"token-symbol"},ws={alt:""},bs={class:"route-bottom"},ks=ke(()=>o("div",{class:"left-round"},null,-1)),ys=ke(()=>o("div",{class:"right-round"},null,-1)),As={class:"percent-text"},Ss={class:"amount"},_s={class:"symbol"},Is={class:"percent-ratio"},$s={class:"percent-text"},Ps={class:"amount"},Rs={class:"symbol"},Ns={class:"pool-info-box"},Os={key:0,class:"icon","aria-hidden":"true"},Bs=ke(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Ts=[Bs],Fs={class:"pool-info"},Ms={class:"pool-info-top"},Us={class:"token-a-img",alt:""},js={class:"token-b-img",alt:""},Es={class:"source"},Ls=["src"],Ds={class:"pool-info-detail"},Ws={class:"pool-address"},qs=ke(()=>o("span",null,"Pool Address",-1)),Js=["href"],Qs=["onClick"],Xs=ke(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),Hs=[Xs],zs={key:0,class:"token-info-detail"},Ys={alt:""},Zs={class:"token-name"},Ks={class:"token-address"},Gs=["onClick"],Vs=ke(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),xs=[Vs],ea={class:"token-symbol"},oa={class:"token-info-detail"},na={alt:""},ta={class:"token-name"},sa={class:"token-address"},aa=["onClick"],ia=ke(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),la=[ia],ua={class:"token-symbol"};function ra(e,g,$,A,W,q){const v=Uo("Modal"),P=Me("image");return r(),Z(v,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:g[0]||(g[0]=C=>e.$emit("onClose"))},{closeIcon:ve(()=>[cs]),default:ve(()=>{var C,Y,V,x;return[o("div",ds,[o("div",ms,[ee(o("img",vs,null,512),[[P,(C=e.fromCoin)==null?void 0:C.logo_url]]),o("span",ps,u(("addCommom"in e?e.addCommom:z(Q))(e.fromCoinAmount)),1),o("span",gs,u((Y=e.fromCoin)==null?void 0:Y.symbol),1)]),o("div",fs,[o("span",hs,u(("addCommom"in e?e.addCommom:z(Q))(e.toCoinAmount)),1),o("span",Cs,u((V=e.toCoin)==null?void 0:V.symbol),1),ee(o("img",ws,null,512),[[P,(x=e.toCoin)==null?void 0:x.logo_url]])])]),o("div",bs,[ks,ys,(r(!0),f(Ke,null,$o(e.routerStep,(_,U)=>(r(),f("div",{key:U,class:me(["route-path",U!==0?"route-path-active":""])},[o("div",{class:me(["percent",U!==0?"percent-active":""])},[o("div",As,[o("div",Ss,u(("addCommom"in e?e.addCommom:z(Q))(_.amountIn)),1),o("div",_s,u(e.fromCoin.symbol),1),o("span",Is,"("+u(e.percentObj&&e.percentObj[_.pathIndex].value)+"%)",1)]),o("div",$s,[o("div",Ps,u(("addCommom"in e?e.addCommom:z(Q))(_.amountOut)),1),o("div",Rs,u(e.toCoin.symbol),1)])],2),o("div",Ns,[_.basePaths&&_.basePaths.length>1?(r(),f("svg",Os,Ts)):D("",!0),(r(!0),f(Ke,null,$o(_.basePaths,(a,H)=>{var oe,w,G,T,R,n,s,S,h,F,j,J,I,E,c,d,Pe,Oe,Le,De;return r(),f("div",{key:H},[o("div",Fs,[o("div",Ms,[ee(o("img",Us,null,512),[[P,a.label=="Cetus"?e.getCoinIcon({address:a.fromCoin}):(oe=a==null?void 0:a.coin_a)==null?void 0:oe.logo_url]]),ee(o("img",js,null,512),[[P,a.label=="Cetus"?e.getCoinIcon({address:a.toCoin}):(w=a==null?void 0:a.coin_b)==null?void 0:w.logo_url]]),o("span",null,u((a==null?void 0:a.feeRate)*100)+"%",1)]),o("div",Es,[o("img",{src:a.label=="Cetus"?"/sui-image/logo_cetus@2x.png":"/sui-image/logo_deepbook@2x.png",alt:""},null,8,Ls),o("span",null,u(a.label=="Cetus"?"Cetus":"DeepBook"),1)]),o("div",{class:me(["pool-info-detail-box",_.basePaths.length==1?"pool-info-detail-box-center":H==0?"pool-info-detail-box-left":"pool-info-detail-box-right"])},[o("div",Ds,[o("div",Ws,[qs,o("p",null,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:z(Ro))(e.currentExplorer,"poolAddress",a==null?void 0:a.poolAddress),target:"_blank"},u(a&&((G=a==null?void 0:a.poolAddress)==null?void 0:G.substr(0,6)))+" ... "+u(a&&((T=a==null?void 0:a.poolAddress)==null?void 0:T.substr(a.poolAddress.length-6,6))),9,Js),(r(),f("svg",{class:"copy-icon","aria-hidden":"true",onClick:Re=>e.store.copy(a==null?void 0:a.poolAddress)},Hs,8,Qs))])]),a.coin_a&&a.coin_a?(r(),f("div",zs,[ee(o("img",Ys,null,512),[[P,(R=a==null?void 0:a.coin_a)==null?void 0:R.logo_url]]),o("div",null,[o("div",null,[o("span",Zs,u((n=a==null?void 0:a.coin_a)==null?void 0:n.symbol),1),o("p",Ks,[o("span",null,u((S=(s=a==null?void 0:a.coin_a)==null?void 0:s.address)==null?void 0:S.substr(0,4))+" ... "+u(a&&((j=(h=a==null?void 0:a.coin_a)==null?void 0:h.address)==null?void 0:j.substr(((F=a==null?void 0:a.coin_a)==null?void 0:F.address.length)-4,4))),1),(r(),f("svg",{class:"copy-icon","aria-hidden":"true",onClick:Re=>{var ge;return e.store.copy((ge=a==null?void 0:a.coin_a)==null?void 0:ge.address)}},xs,8,Gs))])]),o("div",ea,u((J=a==null?void 0:a.coin_a)==null?void 0:J.name),1)])])):D("",!0),o("div",oa,[ee(o("img",na,null,512),[[P,(I=a==null?void 0:a.coin_b)==null?void 0:I.logo_url]]),o("div",null,[o("div",null,[o("span",ta,u((E=a==null?void 0:a.coin_b)==null?void 0:E.symbol),1),o("p",sa,[o("span",null,u((d=(c=a==null?void 0:a.coin_b)==null?void 0:c.address)==null?void 0:d.substr(0,4))+" ... "+u(a&&((Le=(Pe=a==null?void 0:a.coin_b)==null?void 0:Pe.address)==null?void 0:Le.substr(((Oe=a==null?void 0:a.coin_b)==null?void 0:Oe.address.length)-4,4))),1),(r(),f("svg",{class:"copy-icon","aria-hidden":"true",onClick:Re=>{var ge;return e.store.copy((ge=a==null?void 0:a.coin_b)==null?void 0:ge.address)}},la,8,aa))])]),o("div",ua,u((De=a==null?void 0:a.coin_b)==null?void 0:De.name),1)])])])],2)])])}),128))])],2))),128))])]}),_:1})}const ca=Fe(rs,[["render",ra],["__scopeId","data-v-dc1c7246"]]),da=Ge({components:{Modal:Mo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,required:!1},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,g){const $=Te(),A=N(()=>$),W=Ee(),q=N(()=>W),v=a=>{var H;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((H=A.value.tokensObj[a==null?void 0:a.address])==null?void 0:H.logo_url)||(q.value.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},P=p(!1),C=N(()=>q.value.chainName),Y=async()=>{g.emit("to-swap")};p([]);const V=p(0),x=p(""),_=p(""),U=N(()=>q.value.slippage);return te(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,U.value],([a,H,oe,w,G,T])=>{if(console.log(H,a,T,"===>"),a&&H&&oe&&w&&T)if(G){const R=new l(H).mul(new l(T/100));_.value=new l(H).sub(R).toString()}else{const R=new l(a).mul(new l(T/100));x.value=new l(a).add(R).toString()}},{immediate:!0}),console.log(e,"swapLoading===>"),{getCoinIcon:v,addCommom:Q,sFixD:ae,rateChange:P,chainName:C,clickNextBtn:Y,pathLength:V,maximumSold:x,minimumReceived:_,decimalUi:ce}}});const ye=e=>(Ue("data-v-ce681136"),e=e(),je(),e),ma=ye(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),va={class:"new-swap-contnet"},pa={class:"coin-info"},ga={class:"from-coin-info"},fa={class:"left"},ha={class:"coin-amount"},Ca={class:"coin-symbol"},wa={class:"right"},ba={class:"to-coin-info"},ka={class:"left"},ya={class:"coin-amount"},Aa={class:"coin-symbol"},Sa={class:"right"},_a=ye(()=>o("div",{class:"to-swap-logo"},null,-1)),Ia={class:"coin-rate"},$a={key:0},Pa={class:"left"},Ra=ye(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Na=ye(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Oa=[Ra,Na],Ba={key:1},Ta={class:"left"},Fa=ye(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ma=ye(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ua=[Fa,Ma],ja={class:"bottom"},Ea={class:"induction"},La={class:"item"},Da={class:"induction-text"},Wa={class:"induction-value"},qa={class:"item"},Ja={class:"induction-text"},Qa={class:"induction-value"},Xa={class:"item"},Ha={class:"induction-text"},za={key:0,class:"icon","aria-hidden":"true"},Ya=ye(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Za=[Ya],Ka={class:"item"},Ga={class:"induction-text"},Va={key:0,class:"induction-value"},xa={key:1,class:"induction-value"},ei={key:0,class:"price-updated"},oi=ye(()=>o("span",null,"Price updated",-1));function ni(e,g,$,A,W,q){const v=jo,P=Uo("Modal"),C=Me("image");return r(),Z(P,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:g[4]||(g[4]=Y=>e.$emit("on-close"))},{closeIcon:ve(()=>[ma]),default:ve(()=>[o("div",va,[o("div",pa,[o("div",ga,[o("div",fa,[o("div",ha,u(e.fromCoinAmount&&("addCommom"in e?e.addCommom:z(Q))(e.fromCoinAmount)),1),o("div",Ca,u(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",wa,[ee(o("img",null,null,512),[[C,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",ba,[o("div",ka,[o("div",ya,u(e.toCoinAmount&&("addCommom"in e?e.addCommom:z(Q))(e.toCoinAmount)),1),o("div",Aa,u(e.toCoin&&e.toCoin.symbol),1)]),o("div",Sa,[ee(o("img",null,null,512),[[C,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),_a]),o("div",Ia,[e.rateChange?(r(),f("div",Ba,[o("div",Ta,[ee(o("img",null,null,512),[[C,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+u(e.toCoin&&e.toCoin.symbol)+" ≈",1),ee(o("img",null,null,512),[[C,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,u(("decimalUi"in e?e.decimalUi:z(ce))(e.oneFromAmount,e.fromCoin.decimals))+" "+u(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:g[1]||(g[1]=Y=>e.rateChange=!e.rateChange)},Ua)])):(r(),f("div",$a,[o("div",Pa,[ee(o("img",null,null,512),[[C,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+u(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),ee(o("img",null,null,512),[[C,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,u(("decimalUi"in e?e.decimalUi:z(ce))(e.oneToAmount,e.toCoin.decimals))+" "+u(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:g[0]||(g[0]=Y=>e.rateChange=!e.rateChange)},Oa)]))])]),o("div",ja,[o("div",Ea,[o("div",La,[o("div",Da,u(e.$t("modal.slippageTolerance")),1),o("div",Wa,u(e.slippage)+"%",1)]),o("div",qa,[o("div",Ja,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",Qa,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:z(Q))(("sFixD"in e?e.sFixD:z(ae))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:z(Q))(("sFixD"in e?e.sFixD:z(ae))(e.maximumSold,e.fromCoin.decimals)))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",Xa,[o("div",Ha,u(e.$t("common.priceImpact")),1),o("div",{class:me(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[K(u(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),f("svg",za,Za)):D("",!0)],2)]),o("div",Ka,[o("div",Ga,u(e.$t("common.fee")),1),e.chainName=="Aptos"?(r(),f("div",Va,u(e.formatFee)+" "+u(e.fromCoin.symbol)+" ("+u(e.fee*100)+"%) ",1)):(r(),f("div",xa,u(e.fee)+" "+u(e.fromCoin.symbol),1))])])])]),e.isShowAccept?(r(),f("div",ei,[oi,be(v,{class:"accept-btn",loading:e.swapLoading,onClick:g[2]||(g[2]=Y=>e.$emit("accept"))},{default:ve(()=>[K("Accept")]),_:1},8,["loading"])])):(r(),Z(v,{key:1,class:"big-btn swap-confirm-btn",onClick:g[3]||(g[3]=Y=>e.clickNextBtn())},{default:ve(()=>[K(u(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const ti=Fe(da,[["render",ni],["__scopeId","data-v-ce681136"]]),si=Ge({setup(){const e=Po(),g=No(Oo,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:$,locale:A}=gn(),W=Ee(),q=Te(),v=N(()=>q);let P=p(!1),C=p(!1),Y=p(!1),V=p(!1),x=p(!1),_=p(!1);const U=p("fromCoin"),a=p(""),H=p(""),oe=p(!1),w=p(!0),G=p(!1),T=p(!1),R=p(!1),n=p(""),s=p(""),S=p(20),h=p(0),F=p(null),j=p(!1),J=N(()=>W.slippage),I=N(()=>W.chainName),E=N(()=>I.value?io(I.value):{}),c=p(),d=p(),Pe=N(()=>Ce&&Ce[I.value]&&Ce[I.value].hasRouter),Oe=N(()=>q.getPoolInfoSuccess),Le=N(()=>{var t;return O.value&&((t=O.value)!=null&&t.is_pause)?"Pool Closed":!c.value||!d.value?$("modal.selectTokenModalTitle"):!Number(n.value)&&!Number(s.value)?$("button.enterAmount"):!Pe.value&&!O.value&&Oe.value?"Pool Not Found":Pe.value&&Se.value?"No Available Route":(console.log(j.value,"===>insufficientLiquidity.value"),j.value?$("button.insufficientLiquidity"):Number(n.value)>Number(re.value)?$("button.insufficientBalance",{name:c.value.symbol}):$("button.swap"))}),De=t=>{var m,i,b,y;U.value=t,t==="fromCoin"?(a.value=((m=d.value)==null?void 0:m.address)||"",H.value=((i=c.value)==null?void 0:i.address)||""):(a.value=((b=c.value)==null?void 0:b.address)||"",H.value=((y=d.value)==null?void 0:y.address)||""),oe.value=!0},Re=p({}),ge=p({}),Eo=t=>{U.value==="fromCoin"?(Re.value=t,oo(t)):(ge.value=t,oo(t))},Lo=t=>{t==="fromCoin"?(w.value=!0,I.value==="Aptos"?n.value=re.value>0?c.value.symbol=="APT"?new l(Number(re.value)).sub(new l(.1)).lt(new l(0))?"0":new l(Number(re.value)).sub(new l(.1)).toString():String(re.value):"":n.value=re.value>0?c.value.symbol=="SUI"?new l(Number(re.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(re.value)).sub(new l(.05)).toString():String(re.value):""):(w.value=!1,I.value==="Aptos"?s.value=de.value>0?d.value.symbol=="APT"?new l(Number(de.value)).sub(new l(.1)).lt(new l(0))?"0":new l(Number(de.value)).sub(new l(.1)).toString():String(de.value):"":s.value=de.value>0?d.value.symbol=="SUI"?new l(Number(de.value)).sub(new l(.05)).lt(new l(0))?"0":new l(Number(de.value)).sub(new l(.05)).toString():String(de.value):"")},Do=t=>{t==="fromCoin"?(w.value=!0,n.value=re.value>0?ae(new l(Number(re.value)).div(2).toString(),c.value.decimals).toString():""):(w.value=!1,s.value=de.value>0?ae(new l(Number(de.value)).div(2).toString(),d.value.decimals).toString():"")},Ve=p(!1);fn(()=>{lo(),window.addEventListener("updateSwapParams",t=>{Ve.value=!Ve.value})}),hn(()=>{clearInterval(F.value)});const xe=N(()=>W),eo=()=>{C.value||!O.value&&!Pe.value||(clearInterval(F.value),q.setPoolConfigList(xe.value.chainName,xe.value.filterCoinsObj),h.value=0,C.value=!0,O.value&&q.updateCurrentPools(O.value.poolAddress,I.value),_e(w.value?n.value:s.value),ue.value.address&&E.value.getAccount(ue.value.address),W.getStatsData(I.value,xe.value.filterCoinsObj),setTimeout(()=>{C.value=!1,lo()},1e3))},lo=()=>{F.value=setInterval(()=>{C.value=!1,G.value||h.value<S.value&&(h.value+=1,h.value===S.value&&(I.value=="Aptos"?(O.value&&O.value.poolAddress&&q.updateCurrentPools(O.value.poolAddress,I.value),eo()):_.value||eo(),h.value=0,C.value=!0))},1e3)};te(w,Ye((t,m)=>{w.value=t},500));const Ne=p(!1);te(n,Ye((t,m)=>{t&&t!==0&&w.value&&(h.value=0,_e(t)),t==""&&w.value&&(s.value="")},500)),te(s,Ye((t,m)=>{t&&t!==0&&!w.value&&(h.value=0,_e(t)),t==""&&!w.value&&(n.value="")},500));const We=p(1e-4),qe=async t=>{let m=t;if(console.log(m,"poolInfo====>"),I.value==="Aptos"&&!m.current_sqrt_price&&n.value&&s.value){const i=await E.value.getPools([m.address]);i&&i[0]&&(m={...t,...i[0],fee:Number(i[0].fee_rate)/1e6})}if(m.current_sqrt_price&&n.value&&s.value){const b=(c.value.address===m.coinA.address&&d.value.address===m.coinB.address?0:1)==0,y=new l(n.value),k=new l(s.value),M=y.sub(y.mul(new l(m.fee)));console.log("getImpact###poolInfo.fee####",m.fee),console.log("getImpact###fAmount####",y.toString()),console.log("getImpact###tAmount####",k.toString()),console.log("getImpact###f####",M.toString());const X=k.div(M);console.log("getImpact####rates####",X.toString());const B=E.value.getPriceImpactPct(m,X.toString(),b);return console.log(B,"t===>"),B}return"--"},uo=p(0),ro=p(0),co=p(),le=p({}),Wo=async t=>{if(O.value&&(console.log(Number(n.value)==0,"===>Number(fromCoinAmount.value)==0"),!(w.value&&Number(n.value)==0)&&!(!w.value&&Number(s.value)==0)))if(c.value&&d.value&&(n.value||s.value)){T.value=!0,R.value=!0,j.value=!1;const m=c.value.address===O.value.coinA.address&&d.value.address===O.value.coinB.address?0:1;console.log(O.value,"poolInfo=====>451"),console.log(w.value?n.value:s.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(m,"===>direct");try{let i=await E.value.preSwap({pool:O.value,a2b:m==0,byAmountIn:w.value,amount:w.value?n.value:s.value});console.log(i,"preSwapRespreSwapRes"),j.value=i==null?void 0:i.isExceed,co.value=i==null?void 0:i.estimatedFeeAmount,w.value?(s.value=i.estimatedAmountOut,he.value=(Number(i.estimatedAmountOut)/t).toString(),fe.value=(t/Number(i.estimatedAmountOut)).toString()):(n.value=i.estimatedAmountIn,he.value=(t/Number(i.estimatedAmountIn)).toString(),fe.value=(Number(i.estimatedAmountIn)/t).toString()),console.log(fe.value,he.value,"===>831"),uo.value=new l(s.value).div(n.value).toString(),ro.value=new l(n.value).div(s.value).toString(),console.log("0524###getAmount###toAddLiquidiPoolInfo.value ###",le.value),console.log("0524###getAmount###poolInfo.value ###",O.value),We.value=I.value=="Aptos"?await qe(O.value):await qe(le.value||O.value),T.value=!1,R.value=!1}catch(i){console.log("pre swap error",i),T.value=!1,R.value=!1}}else w.value?s.value="":n.value="",T.value=!1,R.value=!1},qo=Cn(),ue=N(()=>qo),Jo=p({}),fe=p(""),he=p(""),re=N(()=>ue.value.assets&&c.value&&ue.value.assets[c.value.address]?Io(ue.value.assets[c.value.address].balance,c.value.decimals):0),de=N(()=>ue.value.assets&&d.value&&ue.value.assets[d.value.address]?Io(ue.value.assets[d.value.address].balance,d.value.decimals):0),Qo=Po();te(()=>v.value.tokensObj,async t=>{if(!$e(t)){console.log(t,"===>newValue626"),console.log(Qo,"===>route625");const m=e?e.currentRoute.value.query.to:"",i=e?e.currentRoute.value.query.from:"";i?c.value=await E.value.getTokenBySymbol(t,i):!i&&!c.value&&(c.value=await E.value.getTokenBySymbol(t,Ce[I.value].swapDefaultPair.fromCoin),console.log(c.value,"===>fromCoin.value")),m?d.value=await E.value.getTokenBySymbol(t,m):!m&&!d.value&&(d.value=await E.value.getTokenBySymbol(t,Ce[I.value].swapDefaultPair.toCoin)),!i&&m&&(c.value="",console.log("我清空了fromCoin"))}},{immediate:!0});const O=N(()=>{var t,m,i,b,y;if(c.value&&d.value){let k=null,M={};if(console.log(d.value.address,"===>toCoin.value.address930"),Object.values(v.value.poolConfigList).forEach(B=>{var L,ne,se,Ie;(B.coinA.address.toUpperCase()===((L=c.value.address)==null?void 0:L.toUpperCase())&&B.coinB.address.toUpperCase()===((ne=d.value.address)==null?void 0:ne.toUpperCase())||B.coinB.address.toUpperCase()===((se=c.value.address)==null?void 0:se.toUpperCase())&&B.coinA.address.toUpperCase()===((Ie=d.value.address)==null?void 0:Ie.toUpperCase()))&&(console.log(B,"p===>"),M[B.address]={...B})}),I.value=="Aptos"&&v.value.poolsObj&&!$e(v.value.poolsObj))for(const B in v.value.poolsObj){const L=v.value.poolsObj[B];(L.token_a.address.toUpperCase()===((t=c.value.address)==null?void 0:t.toUpperCase())&&L.token_b.address.toUpperCase()===((m=d.value.address)==null?void 0:m.toUpperCase())||L.token_b.address.toUpperCase()===((i=c.value.address)==null?void 0:i.toUpperCase())&&L.token_a.address.toUpperCase()===((b=d.value.address)==null?void 0:b.toUpperCase()))&&(M[L.address]={...L})}console.log(M,"===>currentPoolsObj");const X=Object.values(M).sort((B,L)=>B.fee-L.fee);console.log("0507####swap###poolInfo###poolSortList###",X);for(let B=0;B<X.length;B++)if(!((y=X[B])!=null&&y.is_pause)){k=X[B];break}return k=Object.values(M).sort((B,L)=>B.fee-L.fee)[0],console.log(M,"currentPoolsObj===>"),console.log("0507####swap###poolInfo###info###",k),k&&!$e(k)?k:null}return null}),mo=p(!0),vo=p(!1),Xo=async t=>{t&&I.value=="Aptos"&&(_e(w.value?n.value:s.value),vo.value=!0,t.coinA.symbol.toLowerCase()===c.value.symbol.toLowerCase()&&t.coinB.symbol.toLowerCase()===d.value.symbol.toLowerCase()?mo.value=!0:mo.value=!1,j.value=!1)};te(()=>O.value,(t,m)=>{t&&(!m||t.address!==m.address||t.current_sqrt_price!==m.current_sqrt_price)&&Xo(t)},{immediate:!0,deep:!0});const Ho=N(()=>v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].logoURI),zo=N(()=>(console.log(v.value.tokensObj,"===>pools.value.tokensObj"),v.value.tokensObj&&d.value&&d.value.address&&v.value.tokensObj[d.value.address]&&v.value.tokensObj[d.value.address].logoURI)),Yo=N(()=>I.value==="Aptos"?v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].coingecko_id||null:v.value.tokensObj&&c.value&&c.value.address||null),Zo=N(()=>I.value==="Aptos"?v.value.tokensObj&&d.value&&d.value.address&&v.value.tokensObj[d.value.address]&&v.value.tokensObj[d.value.address].coingecko_id||null:v.value.tokensObj&&d.value&&d.value.address||null),Ko=N(()=>{var t,m,i,b,y,k,M,X,B;return(i=(m=v==null?void 0:v.value)==null?void 0:m.tokensObj[(t=c==null?void 0:c.value)==null?void 0:t.address])!=null&&i.pyth_id&&((k=(y=v==null?void 0:v.value)==null?void 0:y.tokensObj[(b=c==null?void 0:c.value)==null?void 0:b.address])==null?void 0:k.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(B=(X=v==null?void 0:v.value)==null?void 0:X.tokensObj[(M=c==null?void 0:c.value)==null?void 0:M.address])!=null&&B.coingecko_id?"coingecko":null}),Go=N(()=>{var t,m,i,b,y,k,M,X,B;return(i=(m=v==null?void 0:v.value)==null?void 0:m.tokensObj[(t=d==null?void 0:d.value)==null?void 0:t.address])!=null&&i.pyth_id&&((k=(y=v==null?void 0:v.value)==null?void 0:y.tokensObj[(b=d==null?void 0:d.value)==null?void 0:b.address])==null?void 0:k.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(B=(X=v==null?void 0:v.value)==null?void 0:X.tokensObj[(M=d==null?void 0:d.value)==null?void 0:M.address])!=null&&B.coingecko_id?"coingecko":null}),Vo=N(()=>{var b,y,k;const t=new l(n.value);console.log(le.value,"===>toAddLiquidiPoolInfo"),console.log((b=le==null?void 0:le.value)==null?void 0:b.fee,"toAddLiquidiPoolInfo?.value?.fee");const m=new l(I.value=="Aptos"?(y=O==null?void 0:O.value)==null?void 0:y.fee:(k=le==null?void 0:le.value)==null?void 0:k.fee),i=t.mul(m).toString();return console.log(i,"===>fee"),Number(i)<1/Math.pow(10,c.value.decimals)?`<${new l(1).div(new l(Math.pow(10,c.value.decimals))).toString()}`:ae(i,c.value.decimals)}),{setIsShowSuccess:xo,setIsShowRejected:po,setIsShowWaiting:Je,setTransactionDesc:en,setTransactionTxid:go}=W,on=async()=>{var m,i,b,y,k,M,X,B;_.value=!1,T.value=!0,clearInterval(Be),window.clearInterval(Be),go(""),en($("tips.swapping",{from:`${Q(n.value)} ${(m=c.value)==null?void 0:m.symbol}`,to:`${Q(s.value)} ${(i=d.value)==null?void 0:i.symbol}`})),Je(!0);let t;I.value=="Aptos"&&(t=c.value.address===O.value.token_a.address&&d.value.address===O.value.token_b.address?0:1);try{console.log("0221####swap start####",I.value,"###",E),console.log("0412###toSwap###poolInfo.value###",O.value);let L;I.value=="Aptos"?L=await E.value.getSwapTransactionPayload({pool:O.value,a2b:t==0,byAmountIn:w.value,amount:w.value?n.value:s.value,slippage:Number(J.value)/100}):(console.log(le.value,"===>toAddLiquidiPoolInfo.value"),L=await Qe.value.swapRouterContract.getSwapRouterPayload(Xe.value,Number(J.value)/100)),console.log("0221####swap###swapPayload###",L);let ne;if(I.value==="Aptos")ne=await ue.value.currentWallet.signAndSubmitTransaction(L);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",I.value,"###swapPayload###",L);const se=await ue.value.currentWallet.signAndExecuteTransactionBlock(L);console.log("0221###sui swap res###",se),ne=E.value.handleTx(se),console.log("0221###swap###sui##tx###",ne)}if(ne&&ne.hash){go(ne.hash),Je(!1),xo(!0);const se={title:$("tips.swap"),desc:$("tips.swapSuccessText",{from:`${Q(n.value)} ${(b=c.value)==null?void 0:b.symbol}`,to:`${Q(s.value)} ${(y=d.value)==null?void 0:y.symbol}`}),hash:ne.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:c.value.address==Ce[I.value].currentChainTokenAddress||d.value.address==Ce[I.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(k=c.value)==null?void 0:k.address}`,numa:`- ${n.value}`,logoa:v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].logoURI,tokenb:`${(M=d.value)==null?void 0:M.address}`,numb:`+ ${s.value}`,logob:v.value.tokensObj&&d.value&&d.value.address&&v.value.tokensObj[d.value.address]&&v.value.tokensObj[d.value.address].logoURI},text:`Pay ${n.value} ${(X=c.value)==null?void 0:X.symbol} to receive ${s.value} ${(B=d.value)==null?void 0:B.symbol}`};I.value!=="Aptos"&&(se.res=ne.res),E.value.showTransitionPending(se);const Ie=await E.value.watchTransaction(se);console.log("0221###swap###transitionStatus####",Ie),Ie&&setTimeout(()=>{I.value=="Aptos"&&q.updateCurrentPools(O.value.poolAddress,I.value),E.value.getAccount(ue.value.address)},1e3)}else Je(!1),po(!0);n.value="",s.value="",T.value=!1}catch(L){n.value="",s.value="",console.log("Swap Error###",L),T.value=!1,Je(!1),po(!0)}},nn=t=>{var m;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((m=v.value.tokensObj[t==null?void 0:t.address])==null?void 0:m.logo_url)||(W.theme==="default"?pe("/image/coins/unknown.png"):pe("/image/coins/sui-unknown.png"))},fo=p([]);te(()=>[c.value,d.value,v.value.poolConfigList],([t,m,i])=>{if(i&&i.length>0&&t&&m){const b=[];i.forEach(y=>{var k,M,X,B;(y.coinA.address.toUpperCase()===((k=t.address)==null?void 0:k.toUpperCase())&&y.coinB.address.toUpperCase()===((M=m.address)==null?void 0:M.toUpperCase())||y.coinB.address.toUpperCase()===((X=t.address)==null?void 0:X.toUpperCase())&&y.coinA.address.toUpperCase()===((B=m.address)==null?void 0:B.toUpperCase()))&&(y!=null&&y.is_pause||b.push(y.address))}),console.log(b,"result===>"),fo.value=b}},{immediate:!0});const oo=t=>{console.log(U.value,"===>currentCoinKey.value"),console.log(t);const m=localStorage.getItem(t.address);console.log(v.value.tokensObj,"===>pools.value.tokensObj"),console.log(m,"===>coinLocak"),v.value.tokensObj&&v.value.tokensObj[t.address]&&v.value.tokensObj[t.address].isSelfBuilt&&!m?no.value=!0:(U.value==="fromCoin"?(n.value="",d.value&&t.address.toLowerCase()===(d==null?void 0:d.value.address.toLowerCase())&&(d.value=null),c.value=t):(c.value&&(s.value="",t.address.toLowerCase()===(c==null?void 0:c.value.address.toLowerCase())&&(c.value=null)),d.value=t),ho())},no=p(!1),ho=()=>{ge.value={},Re.value={},no.value=!1},tn=N(()=>W.isShowRouterModal),to=p([]),Co=p(""),sn=p(!1),wo=An(),Qe=N(()=>wo),Se=p(!1),Xe=p({}),bo=p(""),ko=t=>{console.log("0711###getSuiSwapFee###swapRouter###",t);const{splitPaths:m}=t;let i=new l(0);m.forEach((y,k)=>{const M=y.basePaths[0],X=M.label==="Cetus"?new l(M.feeRate).div(Math.pow(10,6)):new l(M.feeRate).div(Math.pow(10,9)),B=new l(M.inputAmount).div(Math.pow(10,c.value.decimals)).mul(X);if(i=i.add(B),console.log(i.toString(),"1431"),console.log(k,"@0711getSuiSwapFee#####","ele.basePaths[0]###",y.basePaths[0].currentPrice.toString()),y.basePaths[1]){const L=y.basePaths[1];console.log(k,"@0711getSuiSwapFee#####","ele.basePaths[1]###",y.basePaths[1].currentPrice.toString());const ne=M.direction?M.currentPrice:new l(1).div(M.currentPrice),se=L.direction?L.currentPrice:new l(1).div(y.basePaths[1].currentPrice),Ie=L.label==="Cetus"?new l(L.feeRate).div(Math.pow(10,6)):new l(L.feeRate).div(Math.pow(10,9)),ao=new l(L.outputAmount).div(Math.pow(10,d.value.decimals)).mul(Ie).div(ne.mul(se));console.log(k,"@0711getSuiSwapFee#####","price1###",ne.toString()),console.log(k,"@0711getSuiSwapFee#####","price2###",se.toString()),console.log(k,"@0711getSuiSwapFee#####","price1.mul(price2)###",ne.mul(se).toString()),console.log(k,"@0711getSuiSwapFee#####","new Decimal(1).div(price1.mul(price2))###",new l(1).div(ne.mul(se)).toString()),console.log(k,"@0711getSuiSwapFee#####","fee2###",ao.toString()),console.log(ao.toString(),144611),i=i.add(ao)}});const b=i.toNumber();console.log(b,"===>feeText"),bo.value=b>0&&b<1e-6?"<0.000001":Q(ae(b,c.value.decimals))},so=(t,m)=>m.minus(t).div(m).mul(100),yo=async t=>{console.log("0711###getSuiPriceImpact####swapRouter###",t);const{splitPaths:m}=t;let i=new l(0);m.forEach((b,y)=>{if(b.basePaths.length===1){const k=b.basePaths[0],M=new l(k.outputAmount).div(Math.pow(10,k.toDecimal)),X=new l(k.inputAmount).div(Math.pow(10,k.fromDecimal)),B=M.div(X),L=k.direction?new l(k.currentPrice):new l(1).div(k.currentPrice);console.log("getSuiPriceImpact###",y,"####outputAmount###",M.toString()),console.log("getSuiPriceImpact###",y,"####inputAmount###",X.toString()),console.log("getSuiPriceImpact###",y,"####rate###",B.toString()),console.log("getSuiPriceImpact###",y,"####cprice###",L.toString()),console.log("getSuiPriceImpact###",y,"####path.currentPrice###",k.currentPrice.toString()),console.log("getSuiPriceImpact###",y,"####calculateSingleImpact(rate, cprice)###",so(B,L)),i=i.add(so(B,L)),console.log("getSuiPriceImpact###",y,"####impactValue###",i.toString())}else{console.log("####getSuiPriceImpact 多路径计算");const k=b.basePaths[0].direction?new l(b.basePaths[0].currentPrice):new l(1).div(b.basePaths[0].currentPrice),M=b.basePaths[1].direction?new l(b.basePaths[1].currentPrice):new l(1).div(b.basePaths[1].currentPrice),X=k.mul(M),B=new l(b.basePaths[1].outputAmount).div(Math.pow(10,b.basePaths[1].toDecimal)),L=new l(b.basePaths[0].inputAmount).div(Math.pow(10,b.basePaths[0].fromDecimal)),ne=B.div(L);i=i.add(so(ne,X)),console.log("getSuiPriceImpact###",y,"####cprice1###",k.toString()),console.log("getSuiPriceImpact###",y,"####ele.basePaths[0].currentPrice###",b.basePaths[0].currentPrice.toString()),console.log("getSuiPriceImpact###",y,"####cprice2###",M.toString()),console.log("getSuiPriceImpact###",y,"####ele.basePaths[1].currentPrice###",b.basePaths[1].currentPrice.toString()),console.log("getSuiPriceImpact###",y,"####cprice###",X.toString()),console.log("getSuiPriceImpact###",y,"####rate###",ne.toString()),console.log("getSuiPriceImpact###",y,"####impactValue###",i.toString())}}),console.log("0711###getSuiPriceImpact###impactValue.toNumber()####",i.toNumber()),We.value=Number(ae(i.toNumber(),2))},Ao=async t=>{if(c.value&&d.value&&(Number(n.value)>0||Number(s.value)>0)){console.log(new Date().getTime(),"开始计算时间戳"),console.log("执行吧"),(!n.value&&s.value||n.value&&!s.value)&&(T.value=!0),Ne.value=!0,Se.value=!1,console.log(O.value,"==>poolInfo.value.");let m;O.value&&(m=c.value.address===O.value.coinA.address&&d.value.address===O.value.coinB.address?0:1);try{let i;if(w.value){const M=new l(n.value).mul(Math.pow(10,c.value.decimals)).toString();i=new ze(M)}else{const M=new l(s.value).mul(Math.pow(10,d.value.decimals)).toString();i=new ze(M)}console.log(i.toString(),"====>1498");const b=Number(J.value)/100;console.log(Qe.value,"===>swapRouterContract.value");const y=O.value?{poolAddresses:fo.value,coinTypeA:O.value.coin_a_address,coinTypeB:O.value.coin_b_address,decimalsA:O.value.coinA.decimals,decimalsB:O.value.coinB.decimals,a2b:m==0,byAmountIn:w.value,amount:i.toString()}:"",k=await Qe.value.swapRouterContract.getSwapRouter(c,d,i,w.value,b,"",O.value?y:"");if(console.log(new Date().getTime(),"计算完成时间戳"),console.log(k,"===> swapRouter1454"),k&&!k.isExceed&&k.splitPaths&&k.splitPaths.length==0){Se.value=!0;return}if(k){if(Xe.value=k,to.value=k.paths,console.log("build"),j.value=k.isExceed,console.log(k.isExceed,j.value,"===>swapRouter.isExceed"),k.isExceed){T.value=!1,Se.value=!1,w.value?s.value="":n.value="";return}ko(k),w.value?n.value&&(s.value=new l(k.outputAmount).div(new l(Math.pow(10,d.value.decimals))).toString()):s.value&&(n.value=new l(k.inputAmount).div(new l(Math.pow(10,c.value.decimals))).toString()),console.log(s.value,"###toCoinAmount.value"),fe.value=Q(ce(new l(n.value).div(new l(s.value).toString()),c.value.decimals)),he.value=Q(ce(new l(s.value).div(n.value).toString(),d.value.decimals)),yo(k),T.value=!1,Se.value=!1,Ne.value=!1}else T.value=!1,Se.value=!0,Ne.value=!1}catch(i){console.log("pre swap error",i),T.value=!1,Ne.value=!1}}else w.value?s.value="":n.value="",T.value=!1,Ne.value=!1;console.log(T.value,"====>routerSwaping")},we=p(!1),So=async t=>{console.log("3s执行一次");try{let m;if(w.value){const y=new l(n.value).mul(Math.pow(10,c.value.decimals)).toString();m=new ze(y)}else{const y=new l(s.value).mul(Math.pow(10,d.value.decimals)).toString();m=new ze(y)}const i=Number(J.value)/100,b=await Qe.value.swapRouterContract.getSwapRouter(c,d,m,w.value,i,"");b&&(Xe.value=b,to.value=b.paths,j.value=b.isExceed,console.log(b.isExceed,j.value,"===>swapRouter.isExceed"),Co.value=b.amountIn,ko(b),fe.value=Q(ce(new l(n.value).div(new l(s.value).toString()),c.value.decimals)),he.value=Q(ce(new l(s.value).div(n.value).toString(),d.value.decimals)),yo(b),w.value?s.value!==b.amountOut&&(we.value=!0,s.value=b.amountOut):n.value!==b.amountIn&&(we.value=!0,n.value=b.amountIn))}catch(m){console.log("pre swap error",m)}},an=async t=>{if(c.value&&d.value&&(n.value||s.value)){const m=c.value.address===O.value.coinA.address&&d.value.address===O.value.coinB.address?0:1;try{let i=await E.value.preSwap({pool:O.value,a2b:m==0,byAmountIn:w.value,amount:w.value?n.value:s.value});console.log(i,"preSwapRespreSwapRes"),j.value=i==null?void 0:i.isExceed,co.value=i==null?void 0:i.estimatedFeeAmount,w.value?(he.value=(Number(i.estimatedAmountOut)/i.estimatedAmountIn).toString(),fe.value=(i.estimatedAmountIn/Number(i.estimatedAmountOut)).toString()):(he.value=(Number(i.estimatedAmountOut)/Number(i.estimatedAmountIn)).toString(),fe.value=(Number(i.estimatedAmountIn)/Number(i.estimatedAmountOut)).toString()),w.value?s.value!==i.estimatedAmountOut&&(we.value=!0,s.value=i.estimatedAmountOut):n.value!==i.estimatedAmountIn&&(we.value=!0,n.value=i.estimatedAmountIn),console.log(fe.value,he.value,"===>831"),console.log(we.value,"==>isShowAccept.value"),We.value=I.value=="Aptos"?await qe(O.value):await qe(le.value||O.value),T.value=!1,R.value=!1}catch(i){console.log("pre swap error",i),T.value=!1,R.value=!1}}else T.value=!1,R.value=!1};let Be=p(null);te(()=>_.value,t=>{t?(console.log("我开启了"),Be.value=setInterval(()=>{I.value=="Aptos"?an(w.value):So(w.value)},3e3)):(console.log("我关闭了"),clearInterval(Be.value),window.clearInterval(Be.value))},{immediate:!0});const _e=async t=>{I.value=="Aptos"?Wo(t):(console.log("调用sui"),Ao())};te(()=>Ve.value,t=>{(Number(n.value)>0||Number(s.value)>0)&&_e(w.value?n.value:s.value)},{immediate:!0});const ln=N(()=>wo),un=N(()=>ln.value.isInitRouter);te(()=>un.value,t=>{t||(h.value=0,_e(w.value?n.value:s.value))},{immediate:!0}),te(()=>[c.value,d.value],([t,m])=>{if(t&&m&&(h.value=0,_e(w.value?n.value:s.value)),t||m){const i=`/swap?from=${t==null?void 0:t.address}&to=${m==null?void 0:m.address}`;e.push(i)}},{immediate:!0});function rn(t,m=500){let i=null;return function(...b){clearTimeout(i),i=setTimeout(()=>{t.call(this,...b)},m)}}const cn=rn(_o);function _o(){console.log("====>调用了几次");const t=c.value;c.value=d.value,d.value=t,P.value=!0,w.value=!w.value,w.value?(n.value=s.value,s.value=""):(s.value=n.value,n.value=""),setTimeout(()=>{P.value=!1},300)}return{closeSwapConfirmModal:()=>{_.value=!1,we.value=!1},updateAccept:()=>{we.value=!1},clickExchange:_o,debounceClickExchange:cn,closeTokenWarning:ho,isShowTokenWarning:no,getTokenSource:oo,hasPool:vo,getPoolInfoSuccess:Oe,halfBtnSelect:Do,formCoinId:Yo,toCoinId:Zo,formCoinMarket:Ko,toCoinMarket:Go,fromCoinUrl:Ho,toCoinUrl:zo,t:$,indicator:g,wallet:ue,currentLpInfo:Jo,fixD:Ze,decimalFormat:vn,impact:We,oneFromAmount:fe,oneToAmount:he,importIcon:pe,clickRefresh:eo,refresh:C,change:P,isShowAddress:Y,isShowSwapSetting:V,fromCoin:c,toCoin:d,slippage:J,openCoinSelect:De,onCoinSelect:Eo,existingCoins:a,lastSelectCoin:H,currentCoinKey:U,showCoinSelect:oe,fromCoinAmount:n,toCoinAmount:s,maxBtnSelect:Lo,fixedFromCoin:w,swapBtnText:Le,toSwap:on,loading:G,swaping:T,autoRefreshTime:S,countdown:h,marketTimer:F,rateChange:x,isSwapConfirmMpdal:_,fromCoinBlance:re,toCoinBlance:de,poolInfo:O,chainName:I,swapRouterLoading:Ne,formatFee:Vo,calculating:R,currentRate:uo,currentRateReverse:ro,getCoinIcon:nn,toAddLiquidiPoolInfo:le,decimalUi:ce,warningToCoin:ge,warningFromCoin:Re,isShowRouterModal:tn,toSwapLoading:sn,insufficientLiquidity:j,routerPool:to,routerTotalAmounts:Co,store:W,suiPreSwapdata:Xe,suiSwapFee:bo,addCommom:Q,debounce:Ye,notFoundRouter:Se,getSuiAmountAccept:So,isShowAccept:we,getSuiAmount:Ao}}});const Ae=e=>(Ue("data-v-b21a1327"),e=e(),je(),e),ai={class:"swap-container"},ii={class:"title"},li={class:"left"},ui={class:"right title-right"},ri=Ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),ci={class:"swap-card"},di={class:"card-container"},mi={class:"card-item"},vi={class:"card-item"},pi=Ae(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),gi=[pi],fi={key:1,class:"induction"},hi={key:0,class:"exchange-rate-btn"},Ci={key:0},wi={key:0},bi={key:0},ki={key:1},yi={key:0},Ai=Ae(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Si=Ae(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),_i=[Ai,Si],Ii={class:"item"},$i={class:"induction-text"},Pi={key:0,class:"icon","aria-hidden":"true"},Ri=Ae(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Ni=[Ri],Oi={class:"item"},Bi={class:"induction-text"},Ti={key:0,class:"induction-value"},Fi={class:"item"},Mi={class:"induction-text"},Ui={key:0,class:"induction-value"},ji={key:0,class:"icon","aria-hidden":"true"},Ei=Ae(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),Li=[Ei],Di={key:2,class:"token-info-container"},Wi={class:"token-info-title"},qi=Ae(()=>o("span",{class:"coingecko"},"Price Reference",-1)),Ji=Ae(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function Qi(e,g,$,A,W,q){var n,s;const v=dn,P=mn,C=Ft,Y=Bo,V=To,x=jo,_=wn,U=bn,a=kn,H=Fo,oe=us,w=yn,G=ca,T=ti,R=Me("image");return r(),f("div",ai,[o("div",ii,[o("div",li,u(e.$t("menu.swap")),1),o("div",ui,[o("div",{class:"slippage-icon",onClick:g[0]||(g[0]=S=>e.isShowSwapSetting=!0)},[ri,o("span",null,u(e.slippage)+"%",1)]),be(v,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",ci,[o("div",di,[o("div",mi,[be(P,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":g[1]||(g[1]=S=>e.fromCoinAmount=S),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:g[2]||(g[2]=S=>e.maxBtnSelect("fromCoin")),onOnHalf:g[3]||(g[3]=S=>e.halfBtnSelect("fromCoin")),onOnInput:g[4]||(g[4]=S=>{e.fromCoinAmount=S,e.fixedFromCoin=!0}),onOnSelect:g[5]||(g[5]=S=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",vi,[be(P,{modelValue:e.toCoinAmount,"onUpdate:modelValue":g[6]||(g[6]=S=>e.toCoinAmount=S),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,onOnInput:g[7]||(g[7]=S=>{e.toCoinAmount=S,e.fixedFromCoin=!1}),onOnSelect:g[8]||(g[8]=S=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:me(e.change?"gang animationex":"gang"),src:Sn,alt:""},null,2),o("div",{class:me(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:g[9]||(g[9]=(...S)=>e.debounceClickExchange&&e.debounceClickExchange(...S))},[(r(),f("svg",{class:me(e.change?"icon animationex":"icon"),"aria-hidden":"true"},gi,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(r(),Z(C,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(r(),f("div",fi,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(r(),f("div",hi,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(r(),f("span",ki,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(r(),f("span",yi,[ee(o("img",null,null,512),[[R,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),K(" 1 "+u(e.toCoin.symbol)+" ≈ ",1),ee(o("img",null,null,512),[[R,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,u(("addCommom"in e?e.addCommom:z(Q))(("decimalUi"in e?e.decimalUi:z(ce))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),K("  "+u(e.fromCoin.symbol),1)])):(r(),Z(Y,{key:1,indicator:e.indicator},null,8,["indicator"]))])):D("",!0):(r(),f("span",Ci,[ee(o("img",null,null,512),[[R,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),K(" 1 "+u(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(r(),f("span",wi,[ee(o("img",null,null,512),[[R,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?D("",!0):(r(),f("span",bi,u(("addCommom"in e?e.addCommom:z(Q))(("decimalUi"in e?e.decimalUi:z(ce))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(r(),Z(Y,{key:1,indicator:e.indicator},null,8,["indicator"])):D("",!0),K("  "+u(e.toCoin.symbol),1)])):(r(),Z(Y,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"icon-change",onClick:g[10]||(g[10]=S=>e.rateChange=!e.rateChange)},_i)])):D("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(r(),f(Ke,{key:1},[o("div",Ii,[o("div",$i,u(e.$t("common.priceImpact")),1),e.swaping?(r(),Z(V,{key:1,paragraph:!1,active:""})):(r(),f("div",{key:0,class:me(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[K(u(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),f("svg",Pi,Ni)):D("",!0)],2))]),o("div",Oi,[o("div",Bi,u(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(r(),Z(V,{key:1,paragraph:!1,active:""})):(r(),f("div",Ti,u(e.fixedFromCoin?("addCommom"in e?e.addCommom:z(Q))(("fixD"in e?e.fixD:z(Ze))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:z(Q))(("fixD"in e?e.fixD:z(Ze))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+u(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",Fi,[o("div",Mi,u(e.$t("common.fee")),1),e.swaping?(r(),Z(V,{key:1,paragraph:!1,active:""})):(r(),f("div",Ui,u(("addCommom"in e?e.addCommom:z(Q))(e.formatFee,e.fromCoin.decimals))+" "+u(e.fromCoin.symbol)+" ("+u(e.chainName=="Aptos"?e.poolInfo.fee*100:((n=e.toAddLiquidiPoolInfo)==null?void 0:n.fee)*100)+"%) ",1))])],64)):D("",!0)])):D("",!0)]),be(x,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((s=e.poolInfo)==null?void 0:s.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:g[11]||(g[11]=S=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ve(()=>[e.wallet.connected?(r(),f("svg",ji,Li)):D("",!0),o("span",null,u(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),be(_),e.showCoinSelect?(r(),Z(U,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:g[12]||(g[12]=S=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):D("",!0),e.isShowSwapSetting?(r(),Z(a,{key:1,onOnClose:g[13]||(g[13]=S=>e.isShowSwapSetting=!1)})):D("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(r(),f("div",Di,[o("div",Wi,[qi,be(H,{placement:"top","arrow-point-at-center":""},{title:ve(()=>[K(" The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ")]),default:ve(()=>[Ji]),_:1})]),e.fromCoin&&e.formCoinMarket?(r(),Z(oe,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):D("",!0),e.toCoin&&e.toCoinMarket?(r(),Z(oe,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):D("",!0)])):D("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(r(),Z(w,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):D("",!0),e.isShowRouterModal?(r(),Z(G,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:g[14]||(g[14]=S=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):D("",!0),e.isSwapConfirmMpdal?(r(),Z(T,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFee:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFee:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):D("",!0)])}const wl=Fe(si,[["render",Qi],["__scopeId","data-v-b21a1327"]]);export{wl as default};
