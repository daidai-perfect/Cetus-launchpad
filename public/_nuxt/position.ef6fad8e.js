import{a as G,e as T,o as l,f as c,h as t,F as q,E as B,i as n,S as H,p as x,k as I,z as K,L as Q,m as u,A as N,r as U,q as X,G as S,x as O,w as Y,B as Z,c as M,j as oo}from"./entry.6a22eb5c.js";import"./index.f5eaad7a.js";import{_ as eo}from"./img-no-Positions_2x.8cad0ecf.js";import{_ as so}from"./img-connect-wallet_2x.58d4b329.js";import{c as L}from"./common.27d82c7e.js";import{u as to,c as io}from"./index.931efb95.js";import{N as ao}from"./sui-my-position-item.7a66e2c7.js";import{u as no}from"./pool.60377385.js";import{u as lo}from"./usePositionList.00eabe69.js";import{u as ro}from"./token.26574884.js";import{u as uo}from"./usePoolList.21545b61.js";import{u as co}from"./notifi.6712e44b.js";import"./decimal.a2826370.js";import"./decimal.765d8738.js";/* empty css              */import"./icon_farms_2x.2497cfaf.js";import"./icon_rewards_2x.1b1dab77.js";import"./index.3e36085b.js";import"./sui-position-range.e1b7acd4.js";import"./formatter.9c9178e2.js";import"./useRate.6dddd94a.js";import"./fetchFun.ff4aae28.js";import"./useSDK.2049b8d7.js";import"./useToken.caa279df.js";import"./useWhale.e61c8414.js";const po=G({props:{loading:{type:Boolean,required:!0},source:{type:String,default:""}},setup(e){return{positionList:[{},{},{}]}}});const go=e=>(x("data-v-ac88b320"),e=e(),I(),e),_o={class:"sui-pool-position-list"},vo={class:"position-list"},fo={class:"card-content"},mo={class:"pos-name"},ho={class:"bottom-info"},ko={class:"pos-valid-range"},bo={class:"info-block"},So={class:"info-block"},Lo={class:"info-block"},yo=go(()=>t("div",{class:"info-block"},null,-1));function Po(e,y,j,r,v,w){const i=H;return l(),c("div",_o,[t("div",vo,[(l(!0),c(q,null,B(e.positionList,(P,f)=>(l(),c("div",{key:f,class:"new-my-position-item"},[t("div",fo,[t("div",mo,[n(i,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),t("div",ho,[t("div",ko,[n(i,{class:"upgrade-long-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),t("div",bo,[n(i,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),n(i,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),t("div",So,[n(i,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),n(i,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),t("div",Lo,[n(i,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),n(i,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),yo])])]))),128))])])}const $o=T(po,[["render",Po],["__scopeId","data-v-ac88b320"]]),C=e=>(x("data-v-7db6212d"),e=e(),I(),e),No={class:"sui-liquidity-container"},jo={key:0,class:"upgrade-loading"},wo={key:1,class:"position-list"},Oo={key:2,class:"no-data"},Go=C(()=>t("img",{src:eo,alt:""},null,-1)),To={key:3,class:"no-data"},qo=C(()=>t("img",{src:so,alt:""},null,-1)),Bo=G({__name:"position",setup(e){K();const y=Q(),j=to(),r=u(()=>j),v=no(),w=ro(),i=u(()=>v.poolPositionsObj),P=u(()=>v.poolsObj),f=u(()=>r.value.address?v.liquidityPositionLoading:!1),A=u(()=>w.allTokensObj),k=u(()=>y.query.poolAddress),{getPoolList:V}=uo();N(()=>P.value,o=>{L(o)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:462 ~ watch ~ newVal:",o,L(o)),V())},{immediate:!0}),console.log("ðŸš€ ~ poolPositionsObj ~ suiPoolStore.poolPositionsObj:",v.poolPositionsObj);const{getPositionListByPool:W}=lo();N(()=>[r.value.address,P.value,A.value],([o,s,a])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:451 ~ watch ~ allTokensObj:",k.value,a,s,o),o&&!L(s)&&!L(a)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:453 ~ watch ~ getPositionList:"),W(o,k.value))},{immediate:!0});let E=U([]);X(()=>{E.value=[]});const b=u(()=>{var o;return console.log("ðŸš€ ~ showList ~ poolPositionsObj.value:",i.value),k.value&&r.value.address?(o=i.value[k.value])==null?void 0:o.positionList:[]}),F=u(()=>v.positionList),h=co(),d=u(()=>h),J=async o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:569 ~ getNftTransfer ~ getNftTransfer:"),await h.getSourceGroups();const s=d.value.sourceGroups&&d.value.sourceGroups.length>0&&d.value.sourceGroups[0]&&d.value.sourceGroups[0].sources||[];console.log(s,"####source"),console.log(o,"###myPositions");for(let a=0;a<s.length;a++){const{pool_address:m,position_index:g}=JSON.parse(s[a].blockchainAddress);console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:604 ~ getNftTransfer ~ source[j]:",s[a]);let _=!1,p;for(let $=0;$<o.length;$++){const{pool:D,positionIndex:R}=o[$];m==D&&R==g&&(_=!0),p={pool_address:m,position_index:g}}_||await h.subscribePosition(p,"",!1,!1)}},z=async()=>{await h.getSourceGroups();const o=d.value.sourceGroups&&d.value.sourceGroups.length>0&&d.value.sourceGroups[0]&&d.value.sourceGroups[0].sources||[];for(let s=0;s<o.length;s++){const{pool_address:a,position_index:m}=JSON.parse(o[s].blockchainAddress),{name:g}=o[s],_={pool_address:a,position_index:m};await h.subscribePosition(_,g,!1,!1)}};return N(()=>F.value,(o,s)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:628 ~ newMyPositions:",o),io.Sui.hasNotifi&&(o&&o.length>0&&s&&s.length!==o.length?J(o):o&&o.length==0&&!f.value&&z())},{immediate:!0}),(o,s)=>{var g,_;const a=$o,m=Z;return l(),c("div",No,[f.value&&r.value.connected?(l(),c("div",jo,[n(a,{loading:o.isPositionLoading,type:"position"},null,8,["loading"])])):S("",!0),((g=b.value)==null?void 0:g.length)>0&&r.value.connected&&!f.value?(l(),c("div",wo,[(l(!0),c(q,null,B(b.value,p=>(l(),M(ao,{key:p==null?void 0:p.name,"p-item":p},null,8,["p-item"]))),128))])):S("",!0),(!b.value||((_=b.value)==null?void 0:_.length)==0)&&!f.value&&r.value.connected?(l(),c("div",Oo,[Go,t("span",null,O(o.$t("common.noLiquidityPositions")),1)])):S("",!0),r.value.connected?S("",!0):(l(),c("div",To,[qo,n(m,{class:"connect-wallet",onClick:s[0]||(s[0]=p=>r.value.setIsShowWalletModal(!0))},{default:Y(()=>[oo(O(o.$t("button.connectWallet")),1)]),_:1})]))])}}});const ae=T(Bo,[["__scopeId","data-v-7db6212d"]]);export{ae as default};
