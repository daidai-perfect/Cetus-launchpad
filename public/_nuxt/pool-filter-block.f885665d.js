import{u as A,F as Z}from"./filter-pool-by-coin.d3a4b944.js";import{I as ee}from"./to-add.8f2f3143.js";import{a as I,e as C,o as _,f as d,h as u,z as w,v as O,m as $,r as b,y as G,T as W,M as oe,ff as J,K as Q,F,s as X,i as L,p as x,k as E,H as se,j as ne,x as j,D as z,u as B,a0 as le}from"./entry.dc8b6a1f.js";import{_ as re}from"./icon-selected_3x.09e9a6f0.js";import{s as q}from"./pool.96df1dae.js";import{g as ie,h as D,P as te,aH as H,S as ce}from"./index.23703e15.js";import{u as ue,f as pe}from"./useSDK.07cb8d4c.js";import{u as _e}from"./useToken.37e343be.js";import{D as K}from"./decimal.0bdeb344.js";const de=I({name:"Checkbox",props:{modelValue:{type:Boolean,default:!1},label:{type:String,default:""}},setup(o,i){return{toggleSelect:()=>{i.emit("update:modelValue",!o.modelValue)}}}});const fe={class:"checkbox-button"},ve={class:"label"};function ae(o,i,p,m,f,v){return _(),d("div",{class:"checkbox-container",onClick:i[0]||(i[0]=(...t)=>o.toggleSelect&&o.toggleSelect(...t))},[u("div",fe,[u("img",{class:w({show:o.modelValue}),src:re},null,2)]),u("span",ve,O(o.label),1)])}const he=C(de,[["render",ae],["__scopeId","data-v-c6e355bc"]]),me=I({name:"Dropdown",components:{CheckBox:he},props:{options:{type:Array,required:!0},modelValue:{type:Array,required:!0},label:{type:String,default:""},iconUrl:{type:String,default:""},num:{type:[String,Number],default:""}},setup(o,i){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown-checkbox.vue:112 ~ setup ~ props.options:",o.options);const p=A(),m=$(()=>p),f=$(()=>m.value.isOpenSelectLabel),{setIsOpenSelectType:v,setIsOpenSelectLabel:t}=p,c=b(null);b(null);const g=()=>{v(!1),t(!f.value)},y=$(()=>{const s=o.modelValue;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown-checkbox.vue:65 ~ optionList ~ modelValueArr:",s),o.options.map(l=>({...l,value:s==null?void 0:s.includes(l.label)}))}),e=s=>{const l={};y.value.forEach(a=>{a.value&&(l[a.label]=!0)}),l[s.label]=s.value;const n=Object.keys(l).filter(a=>l[a]);console.log("ðŸš€ ~ file: dropdownCheckbox.vue:83 ~ selectOption ~ newValue:",n),i.emit("update:modelValue",n)},r=s=>{t(!1),v(!1)};return G(()=>{document.addEventListener("click",r)}),W(()=>{document.removeEventListener("click",r)}),{isOpen:f,selectedOption:c,selectOption:e,toggleDropdown:g,optionList:y}}});const ge=o=>(x("data-v-07de3997"),o=o(),E(),o),ye={class:"current-info"},be={class:"icon-box"},ke={class:"icon","aria-hidden":"true"},we=["xlink:href"],Se={class:"label"},$e=ge(()=>u("use",{"xlink:href":"#icon-icon_on"},null,-1)),Le=[$e],Oe={key:1,class:"num"},Ve=["onClick"];function Ce(o,i,p,m,f,v){const t=oe("CheckBox");return _(),d("div",{class:w(["dropdown-container",{open:o.isOpen}])},[u("div",{class:"dropdown-toggle",onClick:i[0]||(i[0]=Q((...c)=>o.toggleDropdown&&o.toggleDropdown(...c),["stop"]))},[J(o.$slots,"toggle",{},()=>[u("div",ye,[u("div",be,[(_(),d("svg",ke,[u("use",{"xlink:href":o.iconUrl},null,8,we)]))]),u("span",Se,O(o.label),1)])],!0),o.num?(_(),d("div",Oe,O(o.num),1)):(_(),d("svg",{key:0,"aria-hidden":"true",class:w(["dropdown-icon",{open:o.isOpen}])},Le,2))]),u("ul",{class:w(["dropdown-list",{open:o.isOpen}])},[(_(!0),d(F,null,X(o.optionList,c=>(_(),d("li",{key:c.value,onClick:g=>o.selectOption(c)},[L(t,{modelValue:c.value,"onUpdate:modelValue":g=>c.value=g,label:c.label},null,8,["modelValue","onUpdate:modelValue","label"])],8,Ve))),128))],2)],2)}const Ae=C(me,[["render",Ce],["__scopeId","data-v-07de3997"]]),Ie=I({name:"Dropdown",props:{options:{type:Array,required:!0},modelValue:{type:[String,Number],default:null},label:{type:String,default:"Label"},hasIcon:{type:Boolean,default:!1},iconUrl:{type:String,default:""}},setup(o,i){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown.vue:55 ~ setup ~ props:",o);const p=A(),m=$(()=>p),f=$(()=>m.value.isOpenSelectType),{setIsOpenSelectType:v,setIsOpenSelectLabel:t}=p,c=b(null),g=()=>{v(!f.value),t(!1)},y=s=>{c.value=s,i.emit("update:modelValue",s.value),v(!1)},e=()=>{c.value=o.options.find(s=>s.value===o.modelValue)||{label:"",value:null}},r=s=>{v(!1),t(!1)};return G(()=>{document.addEventListener("click",r),e()}),W(()=>{document.removeEventListener("click",r)}),{isOpen:f,selectedOption:c,selectOption:y,toggleDropdown:g}}});const Y=o=>(x("data-v-cf76a60c"),o=o(),E(),o),Pe={class:"current-info"},Te={class:"icon-box"},Be={class:"icon","aria-hidden":"true"},De=["xlink:href"],Fe={class:"label"},xe={class:"value"},Ee=Y(()=>u("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ne=[Ee],Me=["onClick"],Ue={key:0,"aria-hidden":"true",class:"icon"},Re=Y(()=>u("use",{"xlink:href":"#icon-icon_on-pool"},null,-1)),je=[Re];function ze(o,i,p,m,f,v){return _(),d("div",{class:w(["dropdown-container",{open:o.isOpen}])},[u("div",{class:"dropdown-toggle",onClick:i[0]||(i[0]=Q((...t)=>o.toggleDropdown&&o.toggleDropdown(...t),["stop"]))},[J(o.$slots,"toggle",{},()=>{var t;return[u("div",Pe,[u("div",Te,[(_(),d("svg",Be,[u("use",{"xlink:href":o.iconUrl},null,8,De)]))]),u("span",Fe,O(o.label),1),u("span",xe,O((t=o.selectedOption)==null?void 0:t.value),1)])]},!0),(_(),d("svg",{"aria-hidden":"true",class:w(["dropdown-icon",{open:o.isOpen}])},Ne,2))]),u("ul",{class:w(["dropdown-list",{open:o.isOpen}])},[(_(!0),d(F,null,X(o.options,t=>(_(),d(F,{key:t.value},[t.value!==o.modelValue?(_(),d("li",{key:0,style:se({color:t.color}),onClick:c=>o.selectOption(t)},[ne(O(t.value)+" ",1),o.hasIcon?(_(),d("svg",Ue,je)):j("",!0)],12,Me)):j("",!0)],64))),128))],2)],2)}const qe=C(Ie,[["render",ze],["__scopeId","data-v-cf76a60c"]]);function He(){const o=ue();_e();const{poolList:i,setPoolList:p,setPoolListLoading:m}=A(),f=(e,r)=>!!ce(q(e),q(r)),v=async e=>{var a,k,P;const r=(e==null?void 0:e.is_forward)===!1,s=(e==null?void 0:e.is_display_rewarder)&&((e==null?void 0:e.rewarder_display1)||(e==null?void 0:e.rewarder_display2)||(e==null?void 0:e.rewarder_display3)),l=[];if(s){const S=(P=(k=(a=e==null?void 0:e.object)==null?void 0:a.rewarder_manager)==null?void 0:k.fields)==null?void 0:P.rewarders;S==null||S.forEach((h,T)=>{var N,M,U,R;const V=D((N=h==null?void 0:h.fields)==null?void 0:N.emissions_per_second).mul(K.pow(2,-64));e!=null&&e[`rewarder_display${T+1}`]&&V.gt(0)&&l.push({coinType:te((R=(U=(M=h==null?void 0:h.fields)==null?void 0:M.reward_coin)==null?void 0:U.fields)==null?void 0:R.name).source_address,emissionsEveryDay:H(V.mul(60*60*24).toString(),0)})})}return{...e,poolAddress:e==null?void 0:e.address,tokenAAddress:e==null?void 0:e.coin_a_address,tokenBAddress:e==null?void 0:e.coin_b_address,displayTokenAAddress:r?e==null?void 0:e.coin_b_address:e==null?void 0:e.coin_a_address,displayTokenBAddress:r?e==null?void 0:e.coin_a_address:e==null?void 0:e.coin_b_address,isReverse:r,tickSpacing:Number(e==null?void 0:e.tick_spacing),isClosed:e==null?void 0:e.is_closed,haveMining:s&&(l==null?void 0:l.length)>0,miningRewardList:l}},t=async(e,r)=>{const s=e==null?void 0:e.poolAddress,l=f(e==null?void 0:e.coinTypeA,e==null?void 0:e.coinTypeB),n=r[s],a=n&&(n==null?void 0:n.is_show_rewarder)&&((n==null?void 0:n.show_rewarder_1)||(n==null?void 0:n.show_rewarder_2)||(n==null?void 0:n.show_rewarder_3)),k=[];if(a){const S=e==null?void 0:e.rewarder_infos;S==null||S.forEach((h,T)=>{const V=D(h==null?void 0:h.emissions_per_second).mul(K.pow(2,-64));n!=null&&n[`show_rewarder_${T+1}`]&&V.gt(0)&&k.push({coinType:h==null?void 0:h.coinAddress,emissionsEveryDay:H(V.mul(60*60*24).toString(),0)})})}return{poolAddress:s,tokenAAddress:e==null?void 0:e.coinTypeA,tokenBAddress:e==null?void 0:e.coinTypeB,displayTokenAAddress:l?e==null?void 0:e.coinTypeB:e==null?void 0:e.coinTypeA,displayTokenBAddress:l?e==null?void 0:e.coinTypeA:e==null?void 0:e.coinTypeB,isReverse:l,tickSpacing:e.tickSpacing,isClosed:(n==null?void 0:n.is_closed)||!1,haveMining:a,miningRewardList:k,fee:D(e==null?void 0:e.fee_rate).div(Math.pow(10,6)).toString()}},c=async e=>{try{if(!e&&i&&(i==null?void 0:i.length)>0)return i;const r=await pe(`${ie.Sui.api}/v2/sui/pools_info/v3`);console.log("ðŸš€ ~ file: usePoolList.ts:10 ~ fetchPoolList ~ res:",r);const s=r==null?void 0:r.lp_list;if(s){const l=[];for(let n=0;n<(s==null?void 0:s.length);n++){const a=s[n];if(!s[n].object.is_pause&&!s[n].is_closed){const k=await v(a);l.push(k)}}return console.log("ðŸš€ ~ file: usePoolList.ts:61 ~ result ~ result:",l),l}}catch(r){if(console.error("ðŸš€ ~ file: usePoolList.ts:130 ~ fetchPoolList ~ error:",r),i)return i;try{return await g()||[]}catch(s){return console.error("ðŸš€ ~ file: usePoolList.ts:133 ~ fetchPoolList ~ e:",s),[]}}},g=async()=>{try{const e=await o.clmmSdk.CetusConfig.getClmmPoolConfigs()||[],r=Object.fromEntries(e.map(l=>[l==null?void 0:l.pool_address,l])),s=await o.clmmSdk.Pool.getPools([],0,9999);if(s){const l=[];for(let n=0;n<(s==null?void 0:s.length);n++){const a=s[n],k=await t(a,r);l.push(k)}return l}}catch(e){return console.error("ðŸš€ ~ file: usePoolList.ts:157 ~ getPoolListFromContract ~ error:",e),[]}};return{getPoolList:async()=>{m(!0);const e=await c();e&&p(e)}}}const Ke=o=>(x("data-v-e8cc00a3"),o=o(),E(),o),Ge={class:"icon-box"},We=Ke(()=>u("use",{"xlink:href":"#icon-icon_refresh"},null,-1)),Je=[We],Qe={__name:"pool-list-refresh-icon",setup(o){const{getPoolList:i}=He(),p=b(!1),m=()=>{p.value=!0,i(),setTimeout(()=>{p.value=!1},1e3)};return(f,v)=>(_(),d("div",{class:"pool-list-refresh-icon",onClick:m},[u("div",Ge,[(_(),d("svg",{class:w(["icon",{refresh:p.value}]),"aria-hidden":"true"},Je,2))])]))}},Xe=C(Qe,[["__scopeId","data-v-e8cc00a3"]]),Ye={class:"pool-filter-block"},Ze=I({__name:"pool-filter-block",emits:["sort","filterPoolByCoin"],setup(o,{emit:i}){const p=b([{label:"Mining"},{label:"Farming"},{label:"No incentives"}]),m=b([{label:"Option 1",value:"All"},{label:"Option 2",value:"Wormhole",color:"#72C1F7"},{label:"Option 3",value:"Celer",color:"#6F86FF"}]);b([{label:"Option 1",value:"VOL"},{label:"Option 2",value:"APR"},{label:"Option 3",value:"TVL"}]);const f=A(),v=$(()=>f),t=$(()=>v.value.incentiveTypeList),c=t.value?b(t.value):b(["Mining","Farming","No incentives"]);z(()=>[c.value],([y])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-filter-block.vue:68 ~ newValue:",y),c.value=y,f.setIncentiveTypeList(y)},{immediate:!0});const g=b("All");return z(()=>g.value,y=>{f.setLabel(y)}),(y,e)=>(_(),d("div",Ye,[L(Z,{"is-allow-ban":!0,"have-import-btn":!0}),u("div",null,[L(ee),L(Ae,{modelValue:B(c),"onUpdate:modelValue":e[0]||(e[0]=r=>le(c)?c.value=r:null),options:p.value,"icon-url":"#icon-icon_type_1",num:B(c)&&B(c).length,label:"Incentive type"},null,8,["modelValue","options","num"]),L(qe,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=r=>g.value=r),options:m.value,label:"Label","icon-url":"#icon-icon_label"},null,8,["modelValue","options"]),L(Xe)])]))}});const uo=C(Ze,[["__scopeId","data-v-38fc47bc"]]);export{uo as P,He as u};
