import{_ as go,$ as po,a0 as vo,a1 as mo,a2 as wo,a3 as Mo,a4 as yo,a5 as Ao,a6 as _o,a7 as bo,a8 as So,a9 as Co,aa as Io,ab as To,ac as Eo,ad as Oo,ae as kr,af as An,ag as ko,ah as Bo,ai as No,aj as Br,ak as Ro,al as Nr,am as dn,an as Rr,ao as wi,ap as On,aq as Fo,ar as Lo,as as vr,at as Po,au as Uo,av as Do,aw as jo,ax as qo,ay as Wo,az as Zo,aA as Vo,aB as Ho,aC as zo,aD as xo,aE as Yo,g as ye,u as Ko,e as we,h as ie,s as Go,aF as ni,b as mr,aG as Mi,aH as Xo}from"./index.2cc90f5b.js";import{D as yi}from"./decimal.0bdeb344.js";import{ae as Fr,m as Zt,af as Jo,a as Dn,r as Se,D as on,q as $o,o as Ht,c as kn,w as Le,u as sn,h as D,f as te,i as Wt,F as _n,s as bn,t as Qo,v as Qt,x as wr,j as ri,Y as Ai,L as ts,W as es,B as ns,p as jn,k as qn,e as Wn,l as rs,a2 as is,a3 as wn,y as os,M as Mn,z as ss}from"./entry.784129f4.js";/* empty css              *//* empty css              */import{n as De,r as _i,a as Zn,q as as,b as ls,j as bi}from"./pool.28071dc9.js";import{C as us}from"./coin-img.0e829539.js";const Si="â€¦";function cs(t){if(t.length<=6)return t;const e=t.startsWith("0x")?2:0;return`0x${t.slice(e,e+4)}${Si}${t.slice(-4)}`}function hs(t){return`${t.slice(0,10)}${Si}`}const fs=Object.freeze(Object.defineProperty({__proto__:null,MIST_PER_SUI:go,MOVE_STDLIB_ADDRESS:po,SUI_ADDRESS_LENGTH:vo,SUI_CLOCK_OBJECT_ID:mo,SUI_DECIMALS:wo,SUI_FRAMEWORK_ADDRESS:Mo,SUI_SYSTEM_ADDRESS:yo,SUI_SYSTEM_MODULE_NAME:Ao,SUI_SYSTEM_STATE_OBJECT_ID:_o,SUI_TYPE_ARG:bo,formatAddress:cs,formatDigest:hs,fromB64:So,fromHEX:Co,isValidSuiAddress:Io,isValidSuiNSName:To,isValidSuiObjectId:Eo,isValidTransactionDigest:Oo,normalizeStructTag:kr,normalizeSuiAddress:An,normalizeSuiNSName:ko,normalizeSuiObjectId:Bo,parseStructTag:No,toB64:Br,toHEX:Ro},Symbol.toStringTag,{value:"Module"}));var Ci=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Vt=(t,e,n)=>(Ci(t,e,"read from private field"),n?n.call(t):e.get(t)),Ii=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ds=(t,e,n,i)=>(Ci(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Ne,Kt;class Ti{async getObject(e){const[n,i]=await Promise.all([this.get("OwnedObject",e),this.get("SharedOrImmutableObject",e)]);return n??i??null}async getObjects(e){return Promise.all([...e.map(n=>this.getObject(n))])}async addObject(e){return e.owner?await this.set("OwnedObject",e.objectId,e):await this.set("SharedOrImmutableObject",e.objectId,e),e}async addObjects(e){await Promise.all(e.map(async n=>this.addObject(n)))}async deleteObject(e){await Promise.all([this.delete("OwnedObject",e),this.delete("SharedOrImmutableObject",e)])}async deleteObjects(e){await Promise.all(e.map(n=>this.deleteObject(n)))}async getMoveFunctionDefinition(e){const n=`${An(e.package)}::${e.module}::${e.function}`;return this.get("MoveFunction",n)}async addMoveFunctionDefinition(e){const n=An(e.package),i=`${n}::${e.module}::${e.function}`,o={...e,package:n};return await this.set("MoveFunction",i,o),o}async deleteMoveFunctionDefinition(e){const n=`${An(e.package)}::${e.module}::${e.function}`;await this.delete("MoveFunction",n)}async getCustom(e){return this.get("Custom",e)}async setCustom(e,n){return this.set("Custom",e,n)}async deleteCustom(e){return this.delete("Custom",e)}}class gs extends Ti{constructor(){super(...arguments),Ii(this,Ne,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(e,n){return Vt(this,Ne)[e].get(n)??null}async set(e,n,i){Vt(this,Ne)[e].set(n,i)}async delete(e,n){Vt(this,Ne)[e].delete(n)}async clear(e){if(e)Vt(this,Ne)[e].clear();else for(const n of Object.values(Vt(this,Ne)))n.clear()}}Ne=new WeakMap;class Ei{constructor({cache:e=new gs}){Ii(this,Kt,void 0),ds(this,Kt,e)}asPlugin(){return async(e,n,i)=>{const o=e.inputs.filter(c=>c.UnresolvedObject).map(c=>c.UnresolvedObject.objectId),l=(await Vt(this,Kt).getObjects(o)).filter(c=>c!==null),a=new Map(l.map(c=>[c.objectId,c]));for(const c of e.inputs){if(!c.UnresolvedObject)continue;const p=a.get(c.UnresolvedObject.objectId);p&&(p.initialSharedVersion&&!c.UnresolvedObject.initialSharedVersion?c.UnresolvedObject.initialSharedVersion=p.initialSharedVersion:(p.version&&!c.UnresolvedObject.version&&(c.UnresolvedObject.version=p.version),p.digest&&!c.UnresolvedObject.digest&&(c.UnresolvedObject.digest=p.digest)))}await Promise.all(e.commands.map(async c=>{if(c.MoveCall){const p=await this.getMoveFunctionDefinition({package:c.MoveCall.package,module:c.MoveCall.module,function:c.MoveCall.function});p&&(c.MoveCall._argumentTypes=p.parameters)}})),await i(),await Promise.all(e.commands.map(async c=>{var p;(p=c.MoveCall)!=null&&p._argumentTypes&&await Vt(this,Kt).addMoveFunctionDefinition({package:c.MoveCall.package,module:c.MoveCall.module,function:c.MoveCall.function,parameters:c.MoveCall._argumentTypes})}))}}async clear(){await Vt(this,Kt).clear()}async getMoveFunctionDefinition(e){return Vt(this,Kt).getMoveFunctionDefinition(e)}async getObjects(e){return Vt(this,Kt).getObjects(e)}async deleteObjects(e){return Vt(this,Kt).deleteObjects(e)}async clearOwnedObjects(){await Vt(this,Kt).clear("OwnedObject")}async clearCustom(){await Vt(this,Kt).clear("Custom")}async getCustom(e){return Vt(this,Kt).getCustom(e)}async setCustom(e,n){return Vt(this,Kt).setCustom(e,n)}async deleteCustom(e){return Vt(this,Kt).deleteCustom(e)}async applyEffects(e){if(!e.V2)throw new Error(`Unsupported transaction effects version ${e.$kind}`);const{lamportVersion:n,changedObjects:i}=e.V2,o=[],l=[];i.map(async([a,c])=>{var p;if(c.outputState.NotExist)await Vt(this,Kt).deleteObject(a);else if(c.outputState.ObjectWrite){const[v,A]=c.outputState.ObjectWrite;l.push({objectId:a,digest:v,version:n,owner:A.AddressOwner??A.ObjectOwner??null,initialSharedVersion:((p=A.Shared)==null?void 0:p.initialSharedVersion)??null})}}),await Promise.all([Vt(this,Kt).addObjects(l),Vt(this,Kt).deleteObjects(o)])}}Kt=new WeakMap;var Oi=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},ii=(t,e,n)=>(Oi(t,e,"read from private field"),n?n.call(t):e.get(t)),ps=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},vs=(t,e,n,i)=>(Oi(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),en;class ki{constructor({client:e,...n}){ps(this,en,void 0),vs(this,en,e),this.cache=new Ei(n)}async reset(){await this.cache.clearOwnedObjects(),await this.cache.clearCustom()}async buildTransaction({transaction:e,...n}){return e.addBuildPlugin(this.cache.asPlugin()),e.build({client:ii(this,en),...n})}async executeTransaction({transaction:e,options:n,...i}){const o=Nr(e)?await this.buildTransaction({transaction:e}):e,l=await ii(this,en).executeTransactionBlock({...i,transactionBlock:o,options:{...n,showRawEffects:!0}});if(l.rawEffects){const a=dn.TransactionEffects.parse(Uint8Array.from(l.rawEffects));await this.applyEffects(a)}return l}async signAndExecuteTransaction({options:e,transaction:n,...i}){n.setSenderIfNotSet(i.signer.toSuiAddress());const o=await this.buildTransaction({transaction:n}),{signature:l}=await i.signer.signTransaction(o);return await this.executeTransaction({transaction:o,signature:l,options:e})}async applyEffects(e){await this.cache.applyEffects(e)}}en=new WeakMap;var ms=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},le=(t,e,n)=>(ms(t,e,"read from private field"),n?n.call(t):e.get(t)),Bi=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ae,Re;class Ni{constructor(){Bi(this,Ae,[])}async runTask(e){return new Promise((n,i)=>{le(this,Ae).push(()=>{e().finally(()=>{le(this,Ae).shift(),le(this,Ae).length>0&&le(this,Ae)[0]()}).then(n,i)}),le(this,Ae).length===1&&le(this,Ae)[0]()})}}Ae=new WeakMap;class ws{constructor(e){Bi(this,Re,[]),this.activeTasks=0,this.maxTasks=e}runTask(e){return new Promise((n,i)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,e().finally(()=>{le(this,Re).length>0?le(this,Re).shift()():this.activeTasks--}).then(n,i)):le(this,Re).push(()=>{e().finally(()=>{le(this,Re).length>0?le(this,Re).shift()():this.activeTasks--}).then(n,i)})})}}Re=new WeakMap;var Lr=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Gt=(t,e,n)=>(Lr(t,e,"read from private field"),n?n.call(t):e.get(t)),Me=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},nn=(t,e,n,i)=>(Lr(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Ms=(t,e,n)=>(Lr(t,e,"access private method"),n),Sn,rn,he,Bn,ze,Mr,Cn,yr,Ri;class ys{constructor({signer:e,...n}){Me(this,yr),Me(this,Sn,new Ni),Me(this,rn,void 0),Me(this,he,void 0),Me(this,Bn,void 0),Me(this,ze,null),Me(this,Mr,async i=>{if(!i.V2)return;const o=Pr(i).ref;o?Gt(this,he).cache.setCustom("gasCoin",o):Gt(this,he).cache.deleteCustom("gasCoin")}),Me(this,Cn,async i=>{const o=await Gt(this,he).cache.getCustom("gasCoin"),l=Rr.from(i);return o&&l.setGasPayment([o]),l.setSenderIfNotSet(Gt(this,rn).toSuiAddress()),Gt(this,he).buildTransaction({transaction:l})}),nn(this,rn,e),nn(this,Bn,n.client),nn(this,he,new ki({client:n.client,cache:n.cache}))}async applyEffects(e){return Promise.all([Gt(this,Mr).call(this,e),Gt(this,he).cache.applyEffects(e)])}async buildTransaction(e){return Gt(this,Sn).runTask(()=>Gt(this,Cn).call(this,e))}resetCache(){return Promise.all([Gt(this,he).reset(),Ms(this,yr,Ri).call(this)])}executeTransaction(e){return Gt(this,Sn).runTask(async()=>{const n=Nr(e)?await Gt(this,Cn).call(this,e):e,{signature:i}=await Gt(this,rn).signTransaction(n),o=await Gt(this,he).executeTransaction({signature:i,transaction:n}).catch(async c=>{throw await this.resetCache(),c}),l=Uint8Array.from(o.rawEffects),a=dn.TransactionEffects.parse(l);return await this.applyEffects(a),nn(this,ze,o.digest),{digest:o.digest,effects:Br(l)}})}}Sn=new WeakMap;rn=new WeakMap;he=new WeakMap;Bn=new WeakMap;ze=new WeakMap;Mr=new WeakMap;Cn=new WeakMap;yr=new WeakSet;Ri=async function(){Gt(this,ze)&&(await Gt(this,Bn).waitForTransaction({digest:Gt(this,ze)}),nn(this,ze,null))};function Pr(t){if(!t.V2)throw new Error("Unexpected effects version");const e=t.V2.changedObjects[t.V2.gasObjectIndex];if(!e)throw new Error("Gas object not found in effects");const[n,{outputState:i}]=e;if(!i.ObjectWrite)throw new Error("Unexpected gas object state");const[o,l]=i.ObjectWrite;return{ref:{objectId:n,digest:o,version:t.V2.lamportVersion},owner:l.AddressOwner||l.ObjectOwner}}var Ur=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},W=(t,e,n)=>(Ur(t,e,"read from private field"),n?n.call(t):e.get(t)),Mt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},At=(t,e,n,i)=>(Ur(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),oi=(t,e,n,i)=>({set _(o){At(t,e,o,n)},get _(){return W(t,e,i)}}),oe=(t,e,n)=>(Ur(t,e,"access private method"),n),Ie,fe,Nn,ln,an,un,Rn,xe,ee,Te,Ue,Pe,Dr,In,cn,We,Ke,ge,Ar,Fi,_r,Li,Ge,hn,Vn,jr,qr,Pi,Hn,br,Wr,Ui;const tn={coinBatchSize:20,initialCoinBalance:200000000n,minimumCoinBalance:50000000n,maxPoolSize:50,epochBoundaryWindow:1e3};class As{constructor(e){Mt(this,Ar),Mt(this,_r),Mt(this,Ge),Mt(this,Vn),Mt(this,qr),Mt(this,Hn),Mt(this,Wr),Mt(this,Ie,void 0),Mt(this,fe,void 0),Mt(this,Nn,void 0),Mt(this,ln,void 0),Mt(this,an,void 0),Mt(this,un,void 0),Mt(this,Rn,void 0),Mt(this,xe,void 0),Mt(this,ee,void 0),Mt(this,Te,[]),Mt(this,Ue,void 0),Mt(this,Pe,new Map),Mt(this,Dr,new Ni),Mt(this,In,void 0),Mt(this,cn,null),Mt(this,We,null),Mt(this,Ke,0),Mt(this,ge,null),At(this,Ie,e.signer),At(this,fe,e.client),At(this,Nn,e.coinBatchSize??tn.coinBatchSize),At(this,ln,e.initialCoinBalance??tn.initialCoinBalance),At(this,an,e.minimumCoinBalance??tn.minimumCoinBalance),At(this,Rn,e.defaultGasBudget??W(this,an)),At(this,un,e.epochBoundaryWindow??tn.epochBoundaryWindow),At(this,xe,e.maxPoolSize??tn.maxPoolSize),At(this,Ue,new ki({client:e.client,cache:e.cache})),At(this,In,new ws(W(this,xe))),At(this,ee,e.sourceCoins?new Map(e.sourceCoins.map(n=>[n,null])):null)}resetCache(){return At(this,ge,null),oe(this,Ge,hn).call(this,()=>W(this,Ue).reset())}async executeTransaction(e){const{promise:n,resolve:i,reject:o}=_s(),l=await oe(this,Ar,Fi).call(this,e),a=()=>{W(this,In).runTask(()=>oe(this,_r,Li).call(this,e,l).then(i,o))},c=new Set;return l.forEach(p=>{W(this,Pe).get(p)?(c.add(p),W(this,Pe).get(p).push(()=>{c.delete(p),c.size===0&&a()})):W(this,Pe).set(p,[])}),c.size===0&&a(),n}}Ie=new WeakMap;fe=new WeakMap;Nn=new WeakMap;ln=new WeakMap;an=new WeakMap;un=new WeakMap;Rn=new WeakMap;xe=new WeakMap;ee=new WeakMap;Te=new WeakMap;Ue=new WeakMap;Pe=new WeakMap;Dr=new WeakMap;In=new WeakMap;cn=new WeakMap;We=new WeakMap;Ke=new WeakMap;ge=new WeakMap;Ar=new WeakSet;Fi=async function(t){const e=new Set;let n=!1;return t.addSerializationPlugin(async(i,o,l)=>{await l(),!n&&(n=!0,i.inputs.forEach(a=>{var c,p,v,A,_;(p=(c=a.Object)==null?void 0:c.ImmOrOwnedObject)!=null&&p.objectId?e.add(a.Object.ImmOrOwnedObject.objectId):(A=(v=a.Object)==null?void 0:v.Receiving)!=null&&A.objectId?e.add(a.Object.Receiving.objectId):(_=a.UnresolvedObject)!=null&&_.objectId&&!a.UnresolvedObject.initialSharedVersion&&e.add(a.UnresolvedObject.objectId)}))}),await t.prepareForSerialization({client:W(this,fe)}),e};_r=new WeakSet;Li=async function(t,e){var i;let n;try{t.setSenderIfNotSet(W(this,Ie).toSuiAddress()),await W(this,Dr).runTask(async()=>{const _=t.getData();_.gasData.price||t.setGasPrice(await oe(this,Hn,br).call(this)),_.gasData.budget||t.setGasBudget(W(this,Rn)),await oe(this,Ge,hn).call(this),n=await oe(this,qr,Pi).call(this),oi(this,Ke)._++,t.setGasPayment([{objectId:n.id,version:n.version,digest:n.digest}]),await W(this,Ue).buildTransaction({transaction:t,onlyTransactionKind:!0})});const o=await t.build({client:W(this,fe)}),{signature:l}=await W(this,Ie).signTransaction(o),a=await W(this,Ue).executeTransaction({transaction:o,signature:l,options:{showEffects:!0}}),c=Uint8Array.from(a.rawEffects),p=dn.TransactionEffects.parse(c),v=Pr(p),A=(i=p.V2)==null?void 0:i.gasUsed;if(n&&A&&v.owner===W(this,Ie).toSuiAddress()){const _=BigInt(A.computationCost)+BigInt(A.storageCost)+BigInt(A.storageCost)-BigInt(A.storageRebate);let b=!1;new wi(t.getData()).mapArguments(C=>(C.$kind==="GasCoin"&&(b=!0),C)),!b&&n.balance>=W(this,an)?W(this,Te).push({id:v.ref.objectId,version:v.ref.version,digest:v.ref.digest,balance:n.balance-_}):(W(this,ee)||At(this,ee,new Map),W(this,ee).set(v.ref.objectId,v.ref))}return At(this,cn,a.digest),{digest:a.digest,effects:Br(c)}}catch(o){throw n&&(W(this,ee)||At(this,ee,new Map),W(this,ee).set(n.id,null)),await oe(this,Ge,hn).call(this,async()=>{await Promise.all([W(this,Ue).cache.deleteObjects([...e]),oe(this,Vn,jr).call(this)])}),o}finally{e.forEach(o=>{const l=W(this,Pe).get(o);l&&l.length>0?l.shift()():l&&W(this,Pe).delete(o)}),oi(this,Ke)._--}};Ge=new WeakSet;hn=async function(t){W(this,We)&&await W(this,We),At(this,We,(t==null?void 0:t().then(()=>{At(this,We,null)},()=>{}))??null)};Vn=new WeakSet;jr=async function(){const t=W(this,cn);t&&(At(this,cn,null),await W(this,fe).waitForTransaction({digest:t}))};qr=new WeakSet;Pi=async function(){if(W(this,Te).length===0&&W(this,Ke)<=W(this,xe)&&await oe(this,Wr,Ui).call(this),W(this,Te).length===0)throw new Error("No coins available");return W(this,Te).shift()};Hn=new WeakSet;br=async function(){if((W(this,ge)?W(this,ge).expiration-W(this,un)-Date.now():0)>0)return W(this,ge).price;if(W(this,ge)){const n=Math.max(W(this,ge).expiration+W(this,un)-Date.now(),1e3);await new Promise(i=>setTimeout(i,n))}const e=await W(this,fe).getLatestSuiSystemState();return At(this,ge,{price:BigInt(e.referenceGasPrice),expiration:Number.parseInt(e.epochStartTimestampMs,10)+Number.parseInt(e.epochDurationMs,10)}),oe(this,Hn,br).call(this)};Wr=new WeakSet;Ui=async function(){var v;const t=Math.min(W(this,Nn),W(this,xe)-(W(this,Te).length+W(this,Ke))+1);if(t===0)return;const e=new Rr,n=W(this,Ie).toSuiAddress();if(e.setSender(n),W(this,ee)){const A=[],_=[];for(const[b,C]of W(this,ee))C?A.push(C):_.push(b);if(_.length>0){const b=await W(this,fe).multiGetObjects({ids:_});A.push(...b.filter(C=>C.data!==null).map(({data:C})=>({objectId:C.objectId,version:C.version,digest:C.digest})))}e.setGasPayment(A),At(this,ee,new Map)}const i=new Array(t).fill(W(this,ln)),o=e.splitCoins(e.gas,i),l=[];for(let A=0;A<i.length;A++)l.push(o[A]);e.transferObjects(l,n),await oe(this,Ge,hn).call(this,()=>oe(this,Vn,jr).call(this));const a=await W(this,fe).signAndExecuteTransaction({transaction:e,signer:W(this,Ie),options:{showRawEffects:!0}}),c=dn.TransactionEffects.parse(Uint8Array.from(a.rawEffects));(v=c.V2)==null||v.changedObjects.forEach(([A,{outputState:_}],b)=>{var C;b===((C=c.V2)==null?void 0:C.gasObjectIndex)||!_.ObjectWrite||W(this,Te).push({id:A,version:c.V2.lamportVersion,digest:_.ObjectWrite[0],balance:BigInt(W(this,ln))})}),W(this,ee)||At(this,ee,new Map);const p=Pr(c).ref;W(this,ee).set(p.objectId,p),await W(this,fe).waitForTransaction({digest:a.digest})};function _s(){let t,e;return{promise:new Promise((i,o)=>{t=i,e=o}),resolve:t,reject:e}}const Fn="CoinWithBalance",si=kr("0x2::sui::SUI");function bs({type:t=si,balance:e,useGasCoin:n=!0}){return i=>{i.addIntentResolver(Fn,Cs);const o=t==="gas"?t:kr(t);return i.add(On.Intent({name:Fn,inputs:{},data:{type:o===si&&n?"gas":o,balance:BigInt(e)}}))}}const Ss=Po({type:Uo(),balance:Do()});async function Cs(t,e,n){var v,A;const i=new Set,o=new Map;if(!t.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const _ of t.commands)if(_.$kind==="$Intent"&&_.$Intent.name===Fn){const{type:b,balance:C}=Fo(Ss,_.$Intent.data);b!=="gas"&&i.add(b),o.set(b,(o.get(b)??0n)+C)}const l=new Set;for(const _ of t.inputs)(v=_.Object)!=null&&v.ImmOrOwnedObject&&l.add(_.Object.ImmOrOwnedObject.objectId),(A=_.UnresolvedObject)!=null&&A.objectId&&l.add(_.UnresolvedObject.objectId);const a=new Map,c=Lo(e);await Promise.all([...i].map(async _=>{a.set(_,await Is({coinType:_,balance:o.get(_),client:c,owner:t.sender,usedIds:l}))}));const p=new Map;p.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[_,b]of t.commands.entries()){if(b.$kind!=="$Intent"||b.$Intent.name!==Fn)continue;const{type:C,balance:k}=b.$Intent.data,B=[];if(!p.has(C)){const[S,...q]=a.get(C).map(I=>t.addInput("object",vr.ObjectRef({objectId:I.coinObjectId,digest:I.digest,version:I.version})));q.length>0&&B.push(On.MergeCoins(S,q)),p.set(C,S)}B.push(On.SplitCoins(p.get(C),[t.addInput("pure",vr.Pure(dn.u64().serialize(k)))])),t.replaceCommand(_,B),t.mapArguments(S=>S.$kind==="Result"&&S.Result===_?{$kind:"NestedResult",NestedResult:[_+B.length-1,0]}:S)}return n()}async function Is({coinType:t,balance:e,client:n,owner:i,usedIds:o}){let l=e;const a=[];return c();async function c(p=null){const{data:v,hasNextPage:A,nextCursor:_}=await n.getCoins({owner:i,coinType:t,cursor:p}),b=v.sort((C,k)=>Number(BigInt(k.balance)-BigInt(C.balance)));for(const C of b){if(o.has(C.coinObjectId))continue;const k=BigInt(C.balance);if(a.push(C),l-=k,l<=0)return a}if(A)return c(_);throw new Error(`Not enough coins of type ${t} to satisfy requested balance`)}}const Ts=Object.freeze(Object.defineProperty({__proto__:null,AsyncCache:Ti,Commands:On,Inputs:vr,ObjectCache:Ei,ParallelTransactionExecutor:As,SerialTransactionExecutor:ys,Transaction:Rr,TransactionDataBuilder:wi,UpgradePolicy:jo,coinWithBalance:bs,getPureBcsSchema:qo,isTransaction:Nr,normalizedTypeToMoveTypeSignature:Wo},Symbol.toStringTag,{value:"Module"}));function Es(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}const Os=Object.freeze(Object.defineProperty({__proto__:null,JsonRpcError:Zo,SuiClient:Vo,SuiHTTPStatusError:Ho,SuiHTTPTransport:zo,SuiHTTPTransportError:xo,getFullnodeUrl:Es,isSuiClient:Yo},Symbol.toStringTag,{value:"Module"}));async function Oc(t,e){var o,l,a;const n=t==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":t,i=`${ye.Sui.api}/v2/sui/coin/kline?coin_address=${n}&interval=day&market=${e}`;try{const c=await $fetch(i);return{price:((l=(o=c==null?void 0:c.data)==null?void 0:o.list)==null?void 0:l.reverse())||[],daily_rate:(a=c==null?void 0:c.data)==null?void 0:a.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function kc(t){try{const{prices:e}=await $fetch(`https://api.coingecko.com/api/v3/coins/${t}/market_chart?vs_currency=usd&id=${t}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),i=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${t}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,o=[];return e.forEach(l=>{o.push({price:new yi(l[1]).toString(),timestamp:l[0]})}),{price:o,daily_rate:i}}catch{return{price:[],daily_rate:""}}}const ks=Fr(Os),Bs=Fr(fs),Ns=Fr(Ts);var Rs=ks,Zr=Bs,Di=Ns,Fs=Object.create,Vr=Object.defineProperty,Ls=Object.defineProperties,Ps=Object.getOwnPropertyDescriptor,Us=Object.getOwnPropertyDescriptors,ji=Object.getOwnPropertyNames,ai=Object.getOwnPropertySymbols,Ds=Object.getPrototypeOf,qi=Object.prototype.hasOwnProperty,js=Object.prototype.propertyIsEnumerable,li=(t,e,n)=>e in t?Vr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qs=(t,e)=>{for(var n in e||(e={}))qi.call(e,n)&&li(t,n,e[n]);if(ai)for(var n of ai(e))js.call(e,n)&&li(t,n,e[n]);return t},Ws=(t,e)=>Ls(t,Us(e)),Zs=(t=>typeof De<"u"?De:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof De<"u"?De:e)[n]}):t)(function(t){if(typeof De<"u")return De.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),Vs=(t,e)=>function(){return e||(0,t[ji(t)[0]])((e={exports:{}}).exports,e),e.exports},Hs=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ji(e))!qi.call(t,o)&&o!==n&&Vr(t,o,{get:()=>e[o],enumerable:!(i=Ps(e,o))||i.enumerable});return t},zn=(t,e,n)=>(n=t!=null?Fs(Ds(t)):{},Hs(!t||!t.__esModule?Vr(n,"default",{value:t,enumerable:!0}):n,t)),xt=(t,e,n)=>new Promise((i,o)=>{var l=p=>{try{c(n.next(p))}catch(v){o(v)}},a=p=>{try{c(n.throw(p))}catch(v){o(v)}},c=p=>p.done?i(p.value):Promise.resolve(p.value).then(l,a);c((n=n.apply(t,e)).next())}),xn=Vs({"node_modules/bn.js/lib/bn.js"(t,e){(function(n,i){function o(w,r){if(!w)throw new Error(r||"Assertion failed")}function l(w,r){w.super_=r;var u=function(){};u.prototype=r.prototype,w.prototype=new u,w.prototype.constructor=w}function a(w,r,u){if(a.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((r==="le"||r==="be")&&(u=r,r=10),this._init(w||0,r||10,u||"be"))}typeof n=="object"?n.exports=a:i.BN=a,a.BN=a,a.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=Zs("buffer").Buffer}catch{}a.isBN=function(r){return r instanceof a?!0:r!==null&&typeof r=="object"&&r.constructor.wordSize===a.wordSize&&Array.isArray(r.words)},a.max=function(r,u){return r.cmp(u)>0?r:u},a.min=function(r,u){return r.cmp(u)<0?r:u},a.prototype._init=function(r,u,d){if(typeof r=="number")return this._initNumber(r,u,d);if(typeof r=="object")return this._initArray(r,u,d);u==="hex"&&(u=16),o(u===(u|0)&&u>=2&&u<=36),r=r.toString().replace(/\s+/g,"");var M=0;r[0]==="-"&&(M++,this.negative=1),M<r.length&&(u===16?this._parseHex(r,M,d):(this._parseBase(r,u,M),d==="le"&&this._initArray(this.toArray(),u,d)))},a.prototype._initNumber=function(r,u,d){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[r&67108863],this.length=1):r<4503599627370496?(this.words=[r&67108863,r/67108864&67108863],this.length=2):(o(r<9007199254740992),this.words=[r&67108863,r/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),u,d)},a.prototype._initArray=function(r,u,d){if(o(typeof r.length=="number"),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var y,f,h=0;if(d==="be")for(M=r.length-1,y=0;M>=0;M-=3)f=r[M]|r[M-1]<<8|r[M-2]<<16,this.words[y]|=f<<h&67108863,this.words[y+1]=f>>>26-h&67108863,h+=24,h>=26&&(h-=26,y++);else if(d==="le")for(M=0,y=0;M<r.length;M+=3)f=r[M]|r[M+1]<<8|r[M+2]<<16,this.words[y]|=f<<h&67108863,this.words[y+1]=f>>>26-h&67108863,h+=24,h>=26&&(h-=26,y++);return this._strip()};function p(w,r){var u=w.charCodeAt(r);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;o(!1,"Invalid character in "+w)}function v(w,r,u){var d=p(w,u);return u-1>=r&&(d|=p(w,u-1)<<4),d}a.prototype._parseHex=function(r,u,d){this.length=Math.ceil((r.length-u)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var y=0,f=0,h;if(d==="be")for(M=r.length-1;M>=u;M-=2)h=v(r,u,M)<<y,this.words[f]|=h&67108863,y>=18?(y-=18,f+=1,this.words[f]|=h>>>26):y+=8;else{var g=r.length-u;for(M=g%2===0?u+1:u;M<r.length;M+=2)h=v(r,u,M)<<y,this.words[f]|=h&67108863,y>=18?(y-=18,f+=1,this.words[f]|=h>>>26):y+=8}this._strip()};function A(w,r,u,d){for(var M=0,y=0,f=Math.min(w.length,u),h=r;h<f;h++){var g=w.charCodeAt(h)-48;M*=d,g>=49?y=g-49+10:g>=17?y=g-17+10:y=g,o(g>=0&&y<d,"Invalid character"),M+=y}return M}a.prototype._parseBase=function(r,u,d){this.words=[0],this.length=1;for(var M=0,y=1;y<=67108863;y*=u)M++;M--,y=y/u|0;for(var f=r.length-d,h=f%M,g=Math.min(f,f-h)+d,s=0,m=d;m<g;m+=M)s=A(r,m,m+M,u),this.imuln(y),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(h!==0){var L=1;for(s=A(r,m,r.length,u),m=0;m<h;m++)L*=u;this.imuln(L),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},a.prototype.copy=function(r){r.words=new Array(this.length);for(var u=0;u<this.length;u++)r.words[u]=this.words[u];r.length=this.length,r.negative=this.negative,r.red=this.red};function _(w,r){w.words=r.words,w.length=r.length,w.negative=r.negative,w.red=r.red}if(a.prototype._move=function(r){_(r,this)},a.prototype.clone=function(){var r=new a(null);return this.copy(r),r},a.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{a.prototype.inspect=b}else a.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(r,u){r=r||10,u=u|0||1;var d;if(r===16||r==="hex"){d="";for(var M=0,y=0,f=0;f<this.length;f++){var h=this.words[f],g=((h<<M|y)&16777215).toString(16);y=h>>>24-M&16777215,M+=2,M>=26&&(M-=26,f--),y!==0||f!==this.length-1?d=C[6-g.length]+g+d:d=g+d}for(y!==0&&(d=y.toString(16)+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(r===(r|0)&&r>=2&&r<=36){var s=k[r],m=B[r];d="";var L=this.clone();for(L.negative=0;!L.isZero();){var P=L.modrn(m).toString(r);L=L.idivn(m),L.isZero()?d=P+d:d=C[s-P.length]+P+d}for(this.isZero()&&(d="0"+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}o(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var r=this.words[0];return this.length===2?r+=this.words[1]*67108864:this.length===3&&this.words[2]===1?r+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-r:r},a.prototype.toJSON=function(){return this.toString(16,2)},c&&(a.prototype.toBuffer=function(r,u){return this.toArrayLike(c,r,u)}),a.prototype.toArray=function(r,u){return this.toArrayLike(Array,r,u)};var S=function(r,u){return r.allocUnsafe?r.allocUnsafe(u):new r(u)};a.prototype.toArrayLike=function(r,u,d){this._strip();var M=this.byteLength(),y=d||Math.max(1,M);o(M<=y,"byte array longer than desired length"),o(y>0,"Requested array length <= 0");var f=S(r,y),h=u==="le"?"LE":"BE";return this["_toArrayLike"+h](f,M),f},a.prototype._toArrayLikeLE=function(r,u){for(var d=0,M=0,y=0,f=0;y<this.length;y++){var h=this.words[y]<<f|M;r[d++]=h&255,d<r.length&&(r[d++]=h>>8&255),d<r.length&&(r[d++]=h>>16&255),f===6?(d<r.length&&(r[d++]=h>>24&255),M=0,f=0):(M=h>>>24,f+=2)}if(d<r.length)for(r[d++]=M;d<r.length;)r[d++]=0},a.prototype._toArrayLikeBE=function(r,u){for(var d=r.length-1,M=0,y=0,f=0;y<this.length;y++){var h=this.words[y]<<f|M;r[d--]=h&255,d>=0&&(r[d--]=h>>8&255),d>=0&&(r[d--]=h>>16&255),f===6?(d>=0&&(r[d--]=h>>24&255),M=0,f=0):(M=h>>>24,f+=2)}if(d>=0)for(r[d--]=M;d>=0;)r[d--]=0},Math.clz32?a.prototype._countBits=function(r){return 32-Math.clz32(r)}:a.prototype._countBits=function(r){var u=r,d=0;return u>=4096&&(d+=13,u>>>=13),u>=64&&(d+=7,u>>>=7),u>=8&&(d+=4,u>>>=4),u>=2&&(d+=2,u>>>=2),d+u},a.prototype._zeroBits=function(r){if(r===0)return 26;var u=r,d=0;return u&8191||(d+=13,u>>>=13),u&127||(d+=7,u>>>=7),u&15||(d+=4,u>>>=4),u&3||(d+=2,u>>>=2),u&1||d++,d},a.prototype.bitLength=function(){var r=this.words[this.length-1],u=this._countBits(r);return(this.length-1)*26+u};function q(w){for(var r=new Array(w.bitLength()),u=0;u<r.length;u++){var d=u/26|0,M=u%26;r[u]=w.words[d]>>>M&1}return r}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,u=0;u<this.length;u++){var d=this._zeroBits(this.words[u]);if(r+=d,d!==26)break}return r},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(r){return this.negative!==0?this.abs().inotn(r).iaddn(1):this.clone()},a.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var u=0;u<r.length;u++)this.words[u]=this.words[u]|r.words[u];return this._strip()},a.prototype.ior=function(r){return o((this.negative|r.negative)===0),this.iuor(r)},a.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},a.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},a.prototype.iuand=function(r){var u;this.length>r.length?u=r:u=this;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]&r.words[d];return this.length=u.length,this._strip()},a.prototype.iand=function(r){return o((this.negative|r.negative)===0),this.iuand(r)},a.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},a.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},a.prototype.iuxor=function(r){var u,d;this.length>r.length?(u=this,d=r):(u=r,d=this);for(var M=0;M<d.length;M++)this.words[M]=u.words[M]^d.words[M];if(this!==u)for(;M<u.length;M++)this.words[M]=u.words[M];return this.length=u.length,this._strip()},a.prototype.ixor=function(r){return o((this.negative|r.negative)===0),this.iuxor(r)},a.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},a.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},a.prototype.inotn=function(r){o(typeof r=="number"&&r>=0);var u=Math.ceil(r/26)|0,d=r%26;this._expand(u),d>0&&u--;for(var M=0;M<u;M++)this.words[M]=~this.words[M]&67108863;return d>0&&(this.words[M]=~this.words[M]&67108863>>26-d),this._strip()},a.prototype.notn=function(r){return this.clone().inotn(r)},a.prototype.setn=function(r,u){o(typeof r=="number"&&r>=0);var d=r/26|0,M=r%26;return this._expand(d+1),u?this.words[d]=this.words[d]|1<<M:this.words[d]=this.words[d]&~(1<<M),this._strip()},a.prototype.iadd=function(r){var u;if(this.negative!==0&&r.negative===0)return this.negative=0,u=this.isub(r),this.negative^=1,this._normSign();if(this.negative===0&&r.negative!==0)return r.negative=0,u=this.isub(r),r.negative=1,u._normSign();var d,M;this.length>r.length?(d=this,M=r):(d=r,M=this);for(var y=0,f=0;f<M.length;f++)u=(d.words[f]|0)+(M.words[f]|0)+y,this.words[f]=u&67108863,y=u>>>26;for(;y!==0&&f<d.length;f++)u=(d.words[f]|0)+y,this.words[f]=u&67108863,y=u>>>26;if(this.length=d.length,y!==0)this.words[this.length]=y,this.length++;else if(d!==this)for(;f<d.length;f++)this.words[f]=d.words[f];return this},a.prototype.add=function(r){var u;return r.negative!==0&&this.negative===0?(r.negative=0,u=this.sub(r),r.negative^=1,u):r.negative===0&&this.negative!==0?(this.negative=0,u=r.sub(this),this.negative=1,u):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},a.prototype.isub=function(r){if(r.negative!==0){r.negative=0;var u=this.iadd(r);return r.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var d=this.cmp(r);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,y;d>0?(M=this,y=r):(M=r,y=this);for(var f=0,h=0;h<y.length;h++)u=(M.words[h]|0)-(y.words[h]|0)+f,f=u>>26,this.words[h]=u&67108863;for(;f!==0&&h<M.length;h++)u=(M.words[h]|0)+f,f=u>>26,this.words[h]=u&67108863;if(f===0&&h<M.length&&M!==this)for(;h<M.length;h++)this.words[h]=M.words[h];return this.length=Math.max(this.length,h),M!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(r){return this.clone().isub(r)};function I(w,r,u){u.negative=r.negative^w.negative;var d=w.length+r.length|0;u.length=d,d=d-1|0;var M=w.words[0]|0,y=r.words[0]|0,f=M*y,h=f&67108863,g=f/67108864|0;u.words[0]=h;for(var s=1;s<d;s++){for(var m=g>>>26,L=g&67108863,P=Math.min(s,r.length-1),N=Math.max(0,s-w.length+1);N<=P;N++){var Z=s-N|0;M=w.words[Z]|0,y=r.words[N]|0,f=M*y+L,m+=f/67108864|0,L=f&67108863}u.words[s]=L|0,g=m|0}return g!==0?u.words[s]=g|0:u.length--,u._strip()}var T=function(r,u,d){var M=r.words,y=u.words,f=d.words,h=0,g,s,m,L=M[0]|0,P=L&8191,N=L>>>13,Z=M[1]|0,H=Z&8191,G=Z>>>13,lt=M[2]|0,X=lt&8191,et=lt>>>13,nt=M[3]|0,rt=nt&8191,it=nt>>>13,Yt=M[4]|0,st=Yt&8191,ut=Yt>>>13,Jt=M[5]|0,gt=Jt&8191,pt=Jt>>>13,Be=M[6]|0,ft=Be&8191,vt=Be>>>13,me=M[7]|0,mt=me&8191,wt=me>>>13,ae=M[8]|0,at=ae&8191,Q=ae>>>13,ot=M[9]|0,ct=ot&8191,yt=ot>>>13,ne=y[0]|0,dt=ne&8191,_t=ne>>>13,Yr=y[1]|0,bt=Yr&8191,St=Yr>>>13,Kr=y[2]|0,Ct=Kr&8191,It=Kr>>>13,Gr=y[3]|0,Tt=Gr&8191,Et=Gr>>>13,Xr=y[4]|0,Ot=Xr&8191,kt=Xr>>>13,Jr=y[5]|0,Bt=Jr&8191,Nt=Jr>>>13,$r=y[6]|0,Rt=$r&8191,Ft=$r>>>13,Qr=y[7]|0,Lt=Qr&8191,Pt=Qr>>>13,ti=y[8]|0,Ut=ti&8191,Dt=ti>>>13,ei=y[9]|0,jt=ei&8191,qt=ei>>>13;d.negative=r.negative^u.negative,d.length=19,g=Math.imul(P,dt),s=Math.imul(P,_t),s=s+Math.imul(N,dt)|0,m=Math.imul(N,_t);var Xn=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,g=Math.imul(H,dt),s=Math.imul(H,_t),s=s+Math.imul(G,dt)|0,m=Math.imul(G,_t),g=g+Math.imul(P,bt)|0,s=s+Math.imul(P,St)|0,s=s+Math.imul(N,bt)|0,m=m+Math.imul(N,St)|0;var Jn=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,g=Math.imul(X,dt),s=Math.imul(X,_t),s=s+Math.imul(et,dt)|0,m=Math.imul(et,_t),g=g+Math.imul(H,bt)|0,s=s+Math.imul(H,St)|0,s=s+Math.imul(G,bt)|0,m=m+Math.imul(G,St)|0,g=g+Math.imul(P,Ct)|0,s=s+Math.imul(P,It)|0,s=s+Math.imul(N,Ct)|0,m=m+Math.imul(N,It)|0;var $n=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,g=Math.imul(rt,dt),s=Math.imul(rt,_t),s=s+Math.imul(it,dt)|0,m=Math.imul(it,_t),g=g+Math.imul(X,bt)|0,s=s+Math.imul(X,St)|0,s=s+Math.imul(et,bt)|0,m=m+Math.imul(et,St)|0,g=g+Math.imul(H,Ct)|0,s=s+Math.imul(H,It)|0,s=s+Math.imul(G,Ct)|0,m=m+Math.imul(G,It)|0,g=g+Math.imul(P,Tt)|0,s=s+Math.imul(P,Et)|0,s=s+Math.imul(N,Tt)|0,m=m+Math.imul(N,Et)|0;var Qn=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,g=Math.imul(st,dt),s=Math.imul(st,_t),s=s+Math.imul(ut,dt)|0,m=Math.imul(ut,_t),g=g+Math.imul(rt,bt)|0,s=s+Math.imul(rt,St)|0,s=s+Math.imul(it,bt)|0,m=m+Math.imul(it,St)|0,g=g+Math.imul(X,Ct)|0,s=s+Math.imul(X,It)|0,s=s+Math.imul(et,Ct)|0,m=m+Math.imul(et,It)|0,g=g+Math.imul(H,Tt)|0,s=s+Math.imul(H,Et)|0,s=s+Math.imul(G,Tt)|0,m=m+Math.imul(G,Et)|0,g=g+Math.imul(P,Ot)|0,s=s+Math.imul(P,kt)|0,s=s+Math.imul(N,Ot)|0,m=m+Math.imul(N,kt)|0;var tr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,g=Math.imul(gt,dt),s=Math.imul(gt,_t),s=s+Math.imul(pt,dt)|0,m=Math.imul(pt,_t),g=g+Math.imul(st,bt)|0,s=s+Math.imul(st,St)|0,s=s+Math.imul(ut,bt)|0,m=m+Math.imul(ut,St)|0,g=g+Math.imul(rt,Ct)|0,s=s+Math.imul(rt,It)|0,s=s+Math.imul(it,Ct)|0,m=m+Math.imul(it,It)|0,g=g+Math.imul(X,Tt)|0,s=s+Math.imul(X,Et)|0,s=s+Math.imul(et,Tt)|0,m=m+Math.imul(et,Et)|0,g=g+Math.imul(H,Ot)|0,s=s+Math.imul(H,kt)|0,s=s+Math.imul(G,Ot)|0,m=m+Math.imul(G,kt)|0,g=g+Math.imul(P,Bt)|0,s=s+Math.imul(P,Nt)|0,s=s+Math.imul(N,Bt)|0,m=m+Math.imul(N,Nt)|0;var er=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(er>>>26)|0,er&=67108863,g=Math.imul(ft,dt),s=Math.imul(ft,_t),s=s+Math.imul(vt,dt)|0,m=Math.imul(vt,_t),g=g+Math.imul(gt,bt)|0,s=s+Math.imul(gt,St)|0,s=s+Math.imul(pt,bt)|0,m=m+Math.imul(pt,St)|0,g=g+Math.imul(st,Ct)|0,s=s+Math.imul(st,It)|0,s=s+Math.imul(ut,Ct)|0,m=m+Math.imul(ut,It)|0,g=g+Math.imul(rt,Tt)|0,s=s+Math.imul(rt,Et)|0,s=s+Math.imul(it,Tt)|0,m=m+Math.imul(it,Et)|0,g=g+Math.imul(X,Ot)|0,s=s+Math.imul(X,kt)|0,s=s+Math.imul(et,Ot)|0,m=m+Math.imul(et,kt)|0,g=g+Math.imul(H,Bt)|0,s=s+Math.imul(H,Nt)|0,s=s+Math.imul(G,Bt)|0,m=m+Math.imul(G,Nt)|0,g=g+Math.imul(P,Rt)|0,s=s+Math.imul(P,Ft)|0,s=s+Math.imul(N,Rt)|0,m=m+Math.imul(N,Ft)|0;var nr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,g=Math.imul(mt,dt),s=Math.imul(mt,_t),s=s+Math.imul(wt,dt)|0,m=Math.imul(wt,_t),g=g+Math.imul(ft,bt)|0,s=s+Math.imul(ft,St)|0,s=s+Math.imul(vt,bt)|0,m=m+Math.imul(vt,St)|0,g=g+Math.imul(gt,Ct)|0,s=s+Math.imul(gt,It)|0,s=s+Math.imul(pt,Ct)|0,m=m+Math.imul(pt,It)|0,g=g+Math.imul(st,Tt)|0,s=s+Math.imul(st,Et)|0,s=s+Math.imul(ut,Tt)|0,m=m+Math.imul(ut,Et)|0,g=g+Math.imul(rt,Ot)|0,s=s+Math.imul(rt,kt)|0,s=s+Math.imul(it,Ot)|0,m=m+Math.imul(it,kt)|0,g=g+Math.imul(X,Bt)|0,s=s+Math.imul(X,Nt)|0,s=s+Math.imul(et,Bt)|0,m=m+Math.imul(et,Nt)|0,g=g+Math.imul(H,Rt)|0,s=s+Math.imul(H,Ft)|0,s=s+Math.imul(G,Rt)|0,m=m+Math.imul(G,Ft)|0,g=g+Math.imul(P,Lt)|0,s=s+Math.imul(P,Pt)|0,s=s+Math.imul(N,Lt)|0,m=m+Math.imul(N,Pt)|0;var rr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,g=Math.imul(at,dt),s=Math.imul(at,_t),s=s+Math.imul(Q,dt)|0,m=Math.imul(Q,_t),g=g+Math.imul(mt,bt)|0,s=s+Math.imul(mt,St)|0,s=s+Math.imul(wt,bt)|0,m=m+Math.imul(wt,St)|0,g=g+Math.imul(ft,Ct)|0,s=s+Math.imul(ft,It)|0,s=s+Math.imul(vt,Ct)|0,m=m+Math.imul(vt,It)|0,g=g+Math.imul(gt,Tt)|0,s=s+Math.imul(gt,Et)|0,s=s+Math.imul(pt,Tt)|0,m=m+Math.imul(pt,Et)|0,g=g+Math.imul(st,Ot)|0,s=s+Math.imul(st,kt)|0,s=s+Math.imul(ut,Ot)|0,m=m+Math.imul(ut,kt)|0,g=g+Math.imul(rt,Bt)|0,s=s+Math.imul(rt,Nt)|0,s=s+Math.imul(it,Bt)|0,m=m+Math.imul(it,Nt)|0,g=g+Math.imul(X,Rt)|0,s=s+Math.imul(X,Ft)|0,s=s+Math.imul(et,Rt)|0,m=m+Math.imul(et,Ft)|0,g=g+Math.imul(H,Lt)|0,s=s+Math.imul(H,Pt)|0,s=s+Math.imul(G,Lt)|0,m=m+Math.imul(G,Pt)|0,g=g+Math.imul(P,Ut)|0,s=s+Math.imul(P,Dt)|0,s=s+Math.imul(N,Ut)|0,m=m+Math.imul(N,Dt)|0;var ir=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ct,dt),s=Math.imul(ct,_t),s=s+Math.imul(yt,dt)|0,m=Math.imul(yt,_t),g=g+Math.imul(at,bt)|0,s=s+Math.imul(at,St)|0,s=s+Math.imul(Q,bt)|0,m=m+Math.imul(Q,St)|0,g=g+Math.imul(mt,Ct)|0,s=s+Math.imul(mt,It)|0,s=s+Math.imul(wt,Ct)|0,m=m+Math.imul(wt,It)|0,g=g+Math.imul(ft,Tt)|0,s=s+Math.imul(ft,Et)|0,s=s+Math.imul(vt,Tt)|0,m=m+Math.imul(vt,Et)|0,g=g+Math.imul(gt,Ot)|0,s=s+Math.imul(gt,kt)|0,s=s+Math.imul(pt,Ot)|0,m=m+Math.imul(pt,kt)|0,g=g+Math.imul(st,Bt)|0,s=s+Math.imul(st,Nt)|0,s=s+Math.imul(ut,Bt)|0,m=m+Math.imul(ut,Nt)|0,g=g+Math.imul(rt,Rt)|0,s=s+Math.imul(rt,Ft)|0,s=s+Math.imul(it,Rt)|0,m=m+Math.imul(it,Ft)|0,g=g+Math.imul(X,Lt)|0,s=s+Math.imul(X,Pt)|0,s=s+Math.imul(et,Lt)|0,m=m+Math.imul(et,Pt)|0,g=g+Math.imul(H,Ut)|0,s=s+Math.imul(H,Dt)|0,s=s+Math.imul(G,Ut)|0,m=m+Math.imul(G,Dt)|0,g=g+Math.imul(P,jt)|0,s=s+Math.imul(P,qt)|0,s=s+Math.imul(N,jt)|0,m=m+Math.imul(N,qt)|0;var or=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ct,bt),s=Math.imul(ct,St),s=s+Math.imul(yt,bt)|0,m=Math.imul(yt,St),g=g+Math.imul(at,Ct)|0,s=s+Math.imul(at,It)|0,s=s+Math.imul(Q,Ct)|0,m=m+Math.imul(Q,It)|0,g=g+Math.imul(mt,Tt)|0,s=s+Math.imul(mt,Et)|0,s=s+Math.imul(wt,Tt)|0,m=m+Math.imul(wt,Et)|0,g=g+Math.imul(ft,Ot)|0,s=s+Math.imul(ft,kt)|0,s=s+Math.imul(vt,Ot)|0,m=m+Math.imul(vt,kt)|0,g=g+Math.imul(gt,Bt)|0,s=s+Math.imul(gt,Nt)|0,s=s+Math.imul(pt,Bt)|0,m=m+Math.imul(pt,Nt)|0,g=g+Math.imul(st,Rt)|0,s=s+Math.imul(st,Ft)|0,s=s+Math.imul(ut,Rt)|0,m=m+Math.imul(ut,Ft)|0,g=g+Math.imul(rt,Lt)|0,s=s+Math.imul(rt,Pt)|0,s=s+Math.imul(it,Lt)|0,m=m+Math.imul(it,Pt)|0,g=g+Math.imul(X,Ut)|0,s=s+Math.imul(X,Dt)|0,s=s+Math.imul(et,Ut)|0,m=m+Math.imul(et,Dt)|0,g=g+Math.imul(H,jt)|0,s=s+Math.imul(H,qt)|0,s=s+Math.imul(G,jt)|0,m=m+Math.imul(G,qt)|0;var sr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(sr>>>26)|0,sr&=67108863,g=Math.imul(ct,Ct),s=Math.imul(ct,It),s=s+Math.imul(yt,Ct)|0,m=Math.imul(yt,It),g=g+Math.imul(at,Tt)|0,s=s+Math.imul(at,Et)|0,s=s+Math.imul(Q,Tt)|0,m=m+Math.imul(Q,Et)|0,g=g+Math.imul(mt,Ot)|0,s=s+Math.imul(mt,kt)|0,s=s+Math.imul(wt,Ot)|0,m=m+Math.imul(wt,kt)|0,g=g+Math.imul(ft,Bt)|0,s=s+Math.imul(ft,Nt)|0,s=s+Math.imul(vt,Bt)|0,m=m+Math.imul(vt,Nt)|0,g=g+Math.imul(gt,Rt)|0,s=s+Math.imul(gt,Ft)|0,s=s+Math.imul(pt,Rt)|0,m=m+Math.imul(pt,Ft)|0,g=g+Math.imul(st,Lt)|0,s=s+Math.imul(st,Pt)|0,s=s+Math.imul(ut,Lt)|0,m=m+Math.imul(ut,Pt)|0,g=g+Math.imul(rt,Ut)|0,s=s+Math.imul(rt,Dt)|0,s=s+Math.imul(it,Ut)|0,m=m+Math.imul(it,Dt)|0,g=g+Math.imul(X,jt)|0,s=s+Math.imul(X,qt)|0,s=s+Math.imul(et,jt)|0,m=m+Math.imul(et,qt)|0;var ar=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,g=Math.imul(ct,Tt),s=Math.imul(ct,Et),s=s+Math.imul(yt,Tt)|0,m=Math.imul(yt,Et),g=g+Math.imul(at,Ot)|0,s=s+Math.imul(at,kt)|0,s=s+Math.imul(Q,Ot)|0,m=m+Math.imul(Q,kt)|0,g=g+Math.imul(mt,Bt)|0,s=s+Math.imul(mt,Nt)|0,s=s+Math.imul(wt,Bt)|0,m=m+Math.imul(wt,Nt)|0,g=g+Math.imul(ft,Rt)|0,s=s+Math.imul(ft,Ft)|0,s=s+Math.imul(vt,Rt)|0,m=m+Math.imul(vt,Ft)|0,g=g+Math.imul(gt,Lt)|0,s=s+Math.imul(gt,Pt)|0,s=s+Math.imul(pt,Lt)|0,m=m+Math.imul(pt,Pt)|0,g=g+Math.imul(st,Ut)|0,s=s+Math.imul(st,Dt)|0,s=s+Math.imul(ut,Ut)|0,m=m+Math.imul(ut,Dt)|0,g=g+Math.imul(rt,jt)|0,s=s+Math.imul(rt,qt)|0,s=s+Math.imul(it,jt)|0,m=m+Math.imul(it,qt)|0;var lr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(lr>>>26)|0,lr&=67108863,g=Math.imul(ct,Ot),s=Math.imul(ct,kt),s=s+Math.imul(yt,Ot)|0,m=Math.imul(yt,kt),g=g+Math.imul(at,Bt)|0,s=s+Math.imul(at,Nt)|0,s=s+Math.imul(Q,Bt)|0,m=m+Math.imul(Q,Nt)|0,g=g+Math.imul(mt,Rt)|0,s=s+Math.imul(mt,Ft)|0,s=s+Math.imul(wt,Rt)|0,m=m+Math.imul(wt,Ft)|0,g=g+Math.imul(ft,Lt)|0,s=s+Math.imul(ft,Pt)|0,s=s+Math.imul(vt,Lt)|0,m=m+Math.imul(vt,Pt)|0,g=g+Math.imul(gt,Ut)|0,s=s+Math.imul(gt,Dt)|0,s=s+Math.imul(pt,Ut)|0,m=m+Math.imul(pt,Dt)|0,g=g+Math.imul(st,jt)|0,s=s+Math.imul(st,qt)|0,s=s+Math.imul(ut,jt)|0,m=m+Math.imul(ut,qt)|0;var ur=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(ur>>>26)|0,ur&=67108863,g=Math.imul(ct,Bt),s=Math.imul(ct,Nt),s=s+Math.imul(yt,Bt)|0,m=Math.imul(yt,Nt),g=g+Math.imul(at,Rt)|0,s=s+Math.imul(at,Ft)|0,s=s+Math.imul(Q,Rt)|0,m=m+Math.imul(Q,Ft)|0,g=g+Math.imul(mt,Lt)|0,s=s+Math.imul(mt,Pt)|0,s=s+Math.imul(wt,Lt)|0,m=m+Math.imul(wt,Pt)|0,g=g+Math.imul(ft,Ut)|0,s=s+Math.imul(ft,Dt)|0,s=s+Math.imul(vt,Ut)|0,m=m+Math.imul(vt,Dt)|0,g=g+Math.imul(gt,jt)|0,s=s+Math.imul(gt,qt)|0,s=s+Math.imul(pt,jt)|0,m=m+Math.imul(pt,qt)|0;var cr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(cr>>>26)|0,cr&=67108863,g=Math.imul(ct,Rt),s=Math.imul(ct,Ft),s=s+Math.imul(yt,Rt)|0,m=Math.imul(yt,Ft),g=g+Math.imul(at,Lt)|0,s=s+Math.imul(at,Pt)|0,s=s+Math.imul(Q,Lt)|0,m=m+Math.imul(Q,Pt)|0,g=g+Math.imul(mt,Ut)|0,s=s+Math.imul(mt,Dt)|0,s=s+Math.imul(wt,Ut)|0,m=m+Math.imul(wt,Dt)|0,g=g+Math.imul(ft,jt)|0,s=s+Math.imul(ft,qt)|0,s=s+Math.imul(vt,jt)|0,m=m+Math.imul(vt,qt)|0;var hr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(hr>>>26)|0,hr&=67108863,g=Math.imul(ct,Lt),s=Math.imul(ct,Pt),s=s+Math.imul(yt,Lt)|0,m=Math.imul(yt,Pt),g=g+Math.imul(at,Ut)|0,s=s+Math.imul(at,Dt)|0,s=s+Math.imul(Q,Ut)|0,m=m+Math.imul(Q,Dt)|0,g=g+Math.imul(mt,jt)|0,s=s+Math.imul(mt,qt)|0,s=s+Math.imul(wt,jt)|0,m=m+Math.imul(wt,qt)|0;var fr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(fr>>>26)|0,fr&=67108863,g=Math.imul(ct,Ut),s=Math.imul(ct,Dt),s=s+Math.imul(yt,Ut)|0,m=Math.imul(yt,Dt),g=g+Math.imul(at,jt)|0,s=s+Math.imul(at,qt)|0,s=s+Math.imul(Q,jt)|0,m=m+Math.imul(Q,qt)|0;var dr=(h+g|0)+((s&8191)<<13)|0;h=(m+(s>>>13)|0)+(dr>>>26)|0,dr&=67108863,g=Math.imul(ct,jt),s=Math.imul(ct,qt),s=s+Math.imul(yt,jt)|0,m=Math.imul(yt,qt);var gr=(h+g|0)+((s&8191)<<13)|0;return h=(m+(s>>>13)|0)+(gr>>>26)|0,gr&=67108863,f[0]=Xn,f[1]=Jn,f[2]=$n,f[3]=Qn,f[4]=tr,f[5]=er,f[6]=nr,f[7]=rr,f[8]=ir,f[9]=or,f[10]=sr,f[11]=ar,f[12]=lr,f[13]=ur,f[14]=cr,f[15]=hr,f[16]=fr,f[17]=dr,f[18]=gr,h!==0&&(f[19]=h,d.length++),d};Math.imul||(T=I);function E(w,r,u){u.negative=r.negative^w.negative,u.length=w.length+r.length;for(var d=0,M=0,y=0;y<u.length-1;y++){var f=M;M=0;for(var h=d&67108863,g=Math.min(y,r.length-1),s=Math.max(0,y-w.length+1);s<=g;s++){var m=y-s,L=w.words[m]|0,P=r.words[s]|0,N=L*P,Z=N&67108863;f=f+(N/67108864|0)|0,Z=Z+h|0,h=Z&67108863,f=f+(Z>>>26)|0,M+=f>>>26,f&=67108863}u.words[y]=h,d=f,f=M}return d!==0?u.words[y]=d:u.length--,u._strip()}function Y(w,r,u){return E(w,r,u)}a.prototype.mulTo=function(r,u){var d,M=this.length+r.length;return this.length===10&&r.length===10?d=T(this,r,u):M<63?d=I(this,r,u):M<1024?d=E(this,r,u):d=Y(this,r,u),d},a.prototype.mul=function(r){var u=new a(null);return u.words=new Array(this.length+r.length),this.mulTo(r,u)},a.prototype.mulf=function(r){var u=new a(null);return u.words=new Array(this.length+r.length),Y(this,r,u)},a.prototype.imul=function(r){return this.clone().mulTo(r,this)},a.prototype.imuln=function(r){var u=r<0;u&&(r=-r),o(typeof r=="number"),o(r<67108864);for(var d=0,M=0;M<this.length;M++){var y=(this.words[M]|0)*r,f=(y&67108863)+(d&67108863);d>>=26,d+=y/67108864|0,d+=f>>>26,this.words[M]=f&67108863}return d!==0&&(this.words[M]=d,this.length++),u?this.ineg():this},a.prototype.muln=function(r){return this.clone().imuln(r)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(r){var u=q(r);if(u.length===0)return new a(1);for(var d=this,M=0;M<u.length&&u[M]===0;M++,d=d.sqr());if(++M<u.length)for(var y=d.sqr();M<u.length;M++,y=y.sqr())u[M]!==0&&(d=d.mul(y));return d},a.prototype.iushln=function(r){o(typeof r=="number"&&r>=0);var u=r%26,d=(r-u)/26,M=67108863>>>26-u<<26-u,y;if(u!==0){var f=0;for(y=0;y<this.length;y++){var h=this.words[y]&M,g=(this.words[y]|0)-h<<u;this.words[y]=g|f,f=h>>>26-u}f&&(this.words[y]=f,this.length++)}if(d!==0){for(y=this.length-1;y>=0;y--)this.words[y+d]=this.words[y];for(y=0;y<d;y++)this.words[y]=0;this.length+=d}return this._strip()},a.prototype.ishln=function(r){return o(this.negative===0),this.iushln(r)},a.prototype.iushrn=function(r,u,d){o(typeof r=="number"&&r>=0);var M;u?M=(u-u%26)/26:M=0;var y=r%26,f=Math.min((r-y)/26,this.length),h=67108863^67108863>>>y<<y,g=d;if(M-=f,M=Math.max(0,M),g){for(var s=0;s<f;s++)g.words[s]=this.words[s];g.length=f}if(f!==0)if(this.length>f)for(this.length-=f,s=0;s<this.length;s++)this.words[s]=this.words[s+f];else this.words[0]=0,this.length=1;var m=0;for(s=this.length-1;s>=0&&(m!==0||s>=M);s--){var L=this.words[s]|0;this.words[s]=m<<26-y|L>>>y,m=L&h}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(r,u,d){return o(this.negative===0),this.iushrn(r,u,d)},a.prototype.shln=function(r){return this.clone().ishln(r)},a.prototype.ushln=function(r){return this.clone().iushln(r)},a.prototype.shrn=function(r){return this.clone().ishrn(r)},a.prototype.ushrn=function(r){return this.clone().iushrn(r)},a.prototype.testn=function(r){o(typeof r=="number"&&r>=0);var u=r%26,d=(r-u)/26,M=1<<u;if(this.length<=d)return!1;var y=this.words[d];return!!(y&M)},a.prototype.imaskn=function(r){o(typeof r=="number"&&r>=0);var u=r%26,d=(r-u)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(u!==0&&d++,this.length=Math.min(d,this.length),u!==0){var M=67108863^67108863>>>u<<u;this.words[this.length-1]&=M}return this._strip()},a.prototype.maskn=function(r){return this.clone().imaskn(r)},a.prototype.iaddn=function(r){return o(typeof r=="number"),o(r<67108864),r<0?this.isubn(-r):this.negative!==0?this.length===1&&(this.words[0]|0)<=r?(this.words[0]=r-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},a.prototype._iaddn=function(r){this.words[0]+=r;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},a.prototype.isubn=function(r){if(o(typeof r=="number"),o(r<67108864),r<0)return this.iaddn(-r);if(this.negative!==0)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},a.prototype.addn=function(r){return this.clone().iaddn(r)},a.prototype.subn=function(r){return this.clone().isubn(r)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(r,u,d){var M=r.length+d,y;this._expand(M);var f,h=0;for(y=0;y<r.length;y++){f=(this.words[y+d]|0)+h;var g=(r.words[y]|0)*u;f-=g&67108863,h=(f>>26)-(g/67108864|0),this.words[y+d]=f&67108863}for(;y<this.length-d;y++)f=(this.words[y+d]|0)+h,h=f>>26,this.words[y+d]=f&67108863;if(h===0)return this._strip();for(o(h===-1),h=0,y=0;y<this.length;y++)f=-(this.words[y]|0)+h,h=f>>26,this.words[y]=f&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(r,u){var d=this.length-r.length,M=this.clone(),y=r,f=y.words[y.length-1]|0,h=this._countBits(f);d=26-h,d!==0&&(y=y.ushln(d),M.iushln(d),f=y.words[y.length-1]|0);var g=M.length-y.length,s;if(u!=="mod"){s=new a(null),s.length=g+1,s.words=new Array(s.length);for(var m=0;m<s.length;m++)s.words[m]=0}var L=M.clone()._ishlnsubmul(y,1,g);L.negative===0&&(M=L,s&&(s.words[g]=1));for(var P=g-1;P>=0;P--){var N=(M.words[y.length+P]|0)*67108864+(M.words[y.length+P-1]|0);for(N=Math.min(N/f|0,67108863),M._ishlnsubmul(y,N,P);M.negative!==0;)N--,M.negative=0,M._ishlnsubmul(y,1,P),M.isZero()||(M.negative^=1);s&&(s.words[P]=N)}return s&&s._strip(),M._strip(),u!=="div"&&d!==0&&M.iushrn(d),{div:s||null,mod:M}},a.prototype.divmod=function(r,u,d){if(o(!r.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var M,y,f;return this.negative!==0&&r.negative===0?(f=this.neg().divmod(r,u),u!=="mod"&&(M=f.div.neg()),u!=="div"&&(y=f.mod.neg(),d&&y.negative!==0&&y.iadd(r)),{div:M,mod:y}):this.negative===0&&r.negative!==0?(f=this.divmod(r.neg(),u),u!=="mod"&&(M=f.div.neg()),{div:M,mod:f.mod}):this.negative&r.negative?(f=this.neg().divmod(r.neg(),u),u!=="div"&&(y=f.mod.neg(),d&&y.negative!==0&&y.isub(r)),{div:f.div,mod:y}):r.length>this.length||this.cmp(r)<0?{div:new a(0),mod:this}:r.length===1?u==="div"?{div:this.divn(r.words[0]),mod:null}:u==="mod"?{div:null,mod:new a(this.modrn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new a(this.modrn(r.words[0]))}:this._wordDiv(r,u)},a.prototype.div=function(r){return this.divmod(r,"div",!1).div},a.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},a.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},a.prototype.divRound=function(r){var u=this.divmod(r);if(u.mod.isZero())return u.div;var d=u.div.negative!==0?u.mod.isub(r):u.mod,M=r.ushrn(1),y=r.andln(1),f=d.cmp(M);return f<0||y===1&&f===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},a.prototype.modrn=function(r){var u=r<0;u&&(r=-r),o(r<=67108863);for(var d=(1<<26)%r,M=0,y=this.length-1;y>=0;y--)M=(d*M+(this.words[y]|0))%r;return u?-M:M},a.prototype.modn=function(r){return this.modrn(r)},a.prototype.idivn=function(r){var u=r<0;u&&(r=-r),o(r<=67108863);for(var d=0,M=this.length-1;M>=0;M--){var y=(this.words[M]|0)+d*67108864;this.words[M]=y/r|0,d=y%r}return this._strip(),u?this.ineg():this},a.prototype.divn=function(r){return this.clone().idivn(r)},a.prototype.egcd=function(r){o(r.negative===0),o(!r.isZero());var u=this,d=r.clone();u.negative!==0?u=u.umod(r):u=u.clone();for(var M=new a(1),y=new a(0),f=new a(0),h=new a(1),g=0;u.isEven()&&d.isEven();)u.iushrn(1),d.iushrn(1),++g;for(var s=d.clone(),m=u.clone();!u.isZero();){for(var L=0,P=1;!(u.words[0]&P)&&L<26;++L,P<<=1);if(L>0)for(u.iushrn(L);L-- >0;)(M.isOdd()||y.isOdd())&&(M.iadd(s),y.isub(m)),M.iushrn(1),y.iushrn(1);for(var N=0,Z=1;!(d.words[0]&Z)&&N<26;++N,Z<<=1);if(N>0)for(d.iushrn(N);N-- >0;)(f.isOdd()||h.isOdd())&&(f.iadd(s),h.isub(m)),f.iushrn(1),h.iushrn(1);u.cmp(d)>=0?(u.isub(d),M.isub(f),y.isub(h)):(d.isub(u),f.isub(M),h.isub(y))}return{a:f,b:h,gcd:d.iushln(g)}},a.prototype._invmp=function(r){o(r.negative===0),o(!r.isZero());var u=this,d=r.clone();u.negative!==0?u=u.umod(r):u=u.clone();for(var M=new a(1),y=new a(0),f=d.clone();u.cmpn(1)>0&&d.cmpn(1)>0;){for(var h=0,g=1;!(u.words[0]&g)&&h<26;++h,g<<=1);if(h>0)for(u.iushrn(h);h-- >0;)M.isOdd()&&M.iadd(f),M.iushrn(1);for(var s=0,m=1;!(d.words[0]&m)&&s<26;++s,m<<=1);if(s>0)for(d.iushrn(s);s-- >0;)y.isOdd()&&y.iadd(f),y.iushrn(1);u.cmp(d)>=0?(u.isub(d),M.isub(y)):(d.isub(u),y.isub(M))}var L;return u.cmpn(1)===0?L=M:L=y,L.cmpn(0)<0&&L.iadd(r),L},a.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var u=this.clone(),d=r.clone();u.negative=0,d.negative=0;for(var M=0;u.isEven()&&d.isEven();M++)u.iushrn(1),d.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;d.isEven();)d.iushrn(1);var y=u.cmp(d);if(y<0){var f=u;u=d,d=f}else if(y===0||d.cmpn(1)===0)break;u.isub(d)}while(!0);return d.iushln(M)},a.prototype.invm=function(r){return this.egcd(r).a.umod(r)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(r){return this.words[0]&r},a.prototype.bincn=function(r){o(typeof r=="number");var u=r%26,d=(r-u)/26,M=1<<u;if(this.length<=d)return this._expand(d+1),this.words[d]|=M,this;for(var y=M,f=d;y!==0&&f<this.length;f++){var h=this.words[f]|0;h+=y,y=h>>>26,h&=67108863,this.words[f]=h}return y!==0&&(this.words[f]=y,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(r){var u=r<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var d;if(this.length>1)d=1;else{u&&(r=-r),o(r<=67108863,"Number is too big");var M=this.words[0]|0;d=M===r?0:M<r?-1:1}return this.negative!==0?-d|0:d},a.prototype.cmp=function(r){if(this.negative!==0&&r.negative===0)return-1;if(this.negative===0&&r.negative!==0)return 1;var u=this.ucmp(r);return this.negative!==0?-u|0:u},a.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var u=0,d=this.length-1;d>=0;d--){var M=this.words[d]|0,y=r.words[d]|0;if(M!==y){M<y?u=-1:M>y&&(u=1);break}}return u},a.prototype.gtn=function(r){return this.cmpn(r)===1},a.prototype.gt=function(r){return this.cmp(r)===1},a.prototype.gten=function(r){return this.cmpn(r)>=0},a.prototype.gte=function(r){return this.cmp(r)>=0},a.prototype.ltn=function(r){return this.cmpn(r)===-1},a.prototype.lt=function(r){return this.cmp(r)===-1},a.prototype.lten=function(r){return this.cmpn(r)<=0},a.prototype.lte=function(r){return this.cmp(r)<=0},a.prototype.eqn=function(r){return this.cmpn(r)===0},a.prototype.eq=function(r){return this.cmp(r)===0},a.red=function(r){return new U(r)},a.prototype.toRed=function(r){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),r.convertTo(this)._forceRed(r)},a.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(r){return this.red=r,this},a.prototype.forceRed=function(r){return o(!this.red,"Already a number in reduction context"),this._forceRed(r)},a.prototype.redAdd=function(r){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},a.prototype.redIAdd=function(r){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},a.prototype.redSub=function(r){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},a.prototype.redISub=function(r){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},a.prototype.redShl=function(r){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},a.prototype.redMul=function(r){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},a.prototype.redIMul=function(r){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},a.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(r){return o(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var z={k256:null,p224:null,p192:null,p25519:null};function x(w,r){this.name=w,this.p=new a(r,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}x.prototype._tmp=function(){var r=new a(null);return r.words=new Array(Math.ceil(this.n/13)),r},x.prototype.ireduce=function(r){var u=r,d;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),d=u.bitLength();while(d>this.n);var M=d<this.n?-1:u.ucmp(this.p);return M===0?(u.words[0]=0,u.length=1):M>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},x.prototype.split=function(r,u){r.iushrn(this.n,0,u)},x.prototype.imulK=function(r){return r.imul(this.k)};function j(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(j,x),j.prototype.split=function(r,u){for(var d=4194303,M=Math.min(r.length,9),y=0;y<M;y++)u.words[y]=r.words[y];if(u.length=M,r.length<=9){r.words[0]=0,r.length=1;return}var f=r.words[9];for(u.words[u.length++]=f&d,y=10;y<r.length;y++){var h=r.words[y]|0;r.words[y-10]=(h&d)<<4|f>>>22,f=h}f>>>=22,r.words[y-10]=f,f===0&&r.length>10?r.length-=10:r.length-=9},j.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var u=0,d=0;d<r.length;d++){var M=r.words[d]|0;u+=M*977,r.words[d]=u&67108863,u=M*64+(u/67108864|0)}return r.words[r.length-1]===0&&(r.length--,r.words[r.length-1]===0&&r.length--),r};function F(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(F,x);function R(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(R,x);function $(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l($,x),$.prototype.imulK=function(r){for(var u=0,d=0;d<r.length;d++){var M=(r.words[d]|0)*19+u,y=M&67108863;M>>>=26,r.words[d]=y,u=M}return u!==0&&(r.words[r.length++]=u),r},a._prime=function(r){if(z[r])return z[r];var u;if(r==="k256")u=new j;else if(r==="p224")u=new F;else if(r==="p192")u=new R;else if(r==="p25519")u=new $;else throw new Error("Unknown prime "+r);return z[r]=u,u};function U(w){if(typeof w=="string"){var r=a._prime(w);this.m=r.p,this.prime=r}else o(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}U.prototype._verify1=function(r){o(r.negative===0,"red works only with positives"),o(r.red,"red works only with red numbers")},U.prototype._verify2=function(r,u){o((r.negative|u.negative)===0,"red works only with positives"),o(r.red&&r.red===u.red,"red works only with red numbers")},U.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):(_(r,r.umod(this.m)._forceRed(this)),r)},U.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},U.prototype.add=function(r,u){this._verify2(r,u);var d=r.add(u);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},U.prototype.iadd=function(r,u){this._verify2(r,u);var d=r.iadd(u);return d.cmp(this.m)>=0&&d.isub(this.m),d},U.prototype.sub=function(r,u){this._verify2(r,u);var d=r.sub(u);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},U.prototype.isub=function(r,u){this._verify2(r,u);var d=r.isub(u);return d.cmpn(0)<0&&d.iadd(this.m),d},U.prototype.shl=function(r,u){return this._verify1(r),this.imod(r.ushln(u))},U.prototype.imul=function(r,u){return this._verify2(r,u),this.imod(r.imul(u))},U.prototype.mul=function(r,u){return this._verify2(r,u),this.imod(r.mul(u))},U.prototype.isqr=function(r){return this.imul(r,r.clone())},U.prototype.sqr=function(r){return this.mul(r,r)},U.prototype.sqrt=function(r){if(r.isZero())return r.clone();var u=this.m.andln(3);if(o(u%2===1),u===3){var d=this.m.add(new a(1)).iushrn(2);return this.pow(r,d)}for(var M=this.m.subn(1),y=0;!M.isZero()&&M.andln(1)===0;)y++,M.iushrn(1);o(!M.isZero());var f=new a(1).toRed(this),h=f.redNeg(),g=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new a(2*s*s).toRed(this);this.pow(s,g).cmp(h)!==0;)s.redIAdd(h);for(var m=this.pow(s,M),L=this.pow(r,M.addn(1).iushrn(1)),P=this.pow(r,M),N=y;P.cmp(f)!==0;){for(var Z=P,H=0;Z.cmp(f)!==0;H++)Z=Z.redSqr();o(H<N);var G=this.pow(m,new a(1).iushln(N-H-1));L=L.redMul(G),m=G.redSqr(),P=P.redMul(m),N=H}return L},U.prototype.invm=function(r){var u=r._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},U.prototype.pow=function(r,u){if(u.isZero())return new a(1).toRed(this);if(u.cmpn(1)===0)return r.clone();var d=4,M=new Array(1<<d);M[0]=new a(1).toRed(this),M[1]=r;for(var y=2;y<M.length;y++)M[y]=this.mul(M[y-1],r);var f=M[0],h=0,g=0,s=u.bitLength()%26;for(s===0&&(s=26),y=u.length-1;y>=0;y--){for(var m=u.words[y],L=s-1;L>=0;L--){var P=m>>L&1;if(f!==M[0]&&(f=this.sqr(f)),P===0&&h===0){g=0;continue}h<<=1,h|=P,g++,!(g!==d&&(y!==0||L!==0))&&(f=this.mul(f,M[h]),g=0,h=0)}s=26}return f},U.prototype.convertTo=function(r){var u=r.umod(this.m);return u===r?u.clone():u},U.prototype.convertFrom=function(r){var u=r.clone();return u.red=null,u},a.mont=function(r){return new tt(r)};function tt(w){U.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(tt,U),tt.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},tt.prototype.convertFrom=function(r){var u=this.imod(r.mul(this.rinv));return u.red=null,u},tt.prototype.imul=function(r,u){if(r.isZero()||u.isZero())return r.words[0]=0,r.length=1,r;var d=r.imul(u),M=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=d.isub(M).iushrn(this.shift),f=y;return y.cmp(this.m)>=0?f=y.isub(this.m):y.cmpn(0)<0&&(f=y.iadd(this.m)),f._forceRed(this)},tt.prototype.mul=function(r,u){if(r.isZero()||u.isZero())return new a(0)._forceRed(this);var d=r.mul(u),M=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=d.isub(M).iushrn(this.shift),f=y;return y.cmp(this.m)>=0?f=y.isub(this.m):y.cmpn(0)<0&&(f=y.iadd(this.m)),f._forceRed(this)},tt.prototype.invm=function(r){var u=this.imod(r._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof e>"u"||e,t)}}),Ze=9e15,Oe=1e9,Sr="0123456789abcdef",Ln="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Pn="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Cr={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ze,maxE:Ze,crypto:!1},Wi,pe,J=!0,Yn="[DecimalError] ",Ee=Yn+"Invalid argument: ",Zi=Yn+"Precision limit exceeded",Vi=Yn+"crypto unavailable",Hi="[object Decimal]",$t=Math.floor,zt=Math.pow,zs=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,xs=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Ys=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,zi=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ce=1e7,K=7,Ks=9007199254740991,Gs=Ln.length-1,Ir=Pn.length-1,O={toStringTag:Hi};O.absoluteValue=O.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),V(t)};O.ceil=function(){return V(new this.constructor(this),this.e+1,2)};O.clampedTo=O.clamp=function(t,e){var n,i=this,o=i.constructor;if(t=new o(t),e=new o(e),!t.s||!e.s)return new o(NaN);if(t.gt(e))throw Error(Ee+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new o(i)};O.comparedTo=O.cmp=function(t){var e,n,i,o,l=this,a=l.d,c=(t=new l.constructor(t)).d,p=l.s,v=t.s;if(!a||!c)return!p||!v?NaN:p!==v?p:a===c?0:!a^p<0?1:-1;if(!a[0]||!c[0])return a[0]?p:c[0]?-v:0;if(p!==v)return p;if(l.e!==t.e)return l.e>t.e^p<0?1:-1;for(i=a.length,o=c.length,e=0,n=i<o?i:o;e<n;++e)if(a[e]!==c[e])return a[e]>c[e]^p<0?1:-1;return i===o?0:i>o^p<0?1:-1};O.cosine=O.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+K,i.rounding=1,n=Xs(i,Xi(i,n)),i.precision=t,i.rounding=e,V(pe==2||pe==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};O.cubeRoot=O.cbrt=function(){var t,e,n,i,o,l,a,c,p,v,A=this,_=A.constructor;if(!A.isFinite()||A.isZero())return new _(A);for(J=!1,l=A.s*zt(A.s*A,1/3),!l||Math.abs(l)==1/0?(n=Xt(A.d),t=A.e,(l=(t-n.length+1)%3)&&(n+=l==1||l==-2?"0":"00"),l=zt(n,1/3),t=$t((t+1)/3)-(t%3==(t<0?-1:2)),l==1/0?n="5e"+t:(n=l.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new _(n),i.s=A.s):i=new _(l.toString()),a=(t=_.precision)+3;;)if(c=i,p=c.times(c).times(c),v=p.plus(A),i=ht(v.plus(A).times(c),v.plus(p),a+2,1),Xt(c.d).slice(0,a)===(n=Xt(i.d)).slice(0,a))if(n=n.slice(a-3,a+1),n=="9999"||!o&&n=="4999"){if(!o&&(V(c,t+1,0),c.times(c).times(c).eq(A))){i=c;break}a+=4,o=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(V(i,t+1,1),e=!i.times(i).times(i).eq(A));break}return J=!0,V(i,t,_.rounding,e)};O.decimalPlaces=O.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-$t(this.e/K))*K,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};O.dividedBy=O.div=function(t){return ht(this,new this.constructor(t))};O.dividedToIntegerBy=O.divToInt=function(t){var e=this,n=e.constructor;return V(ht(e,new n(t),0,1,1),n.precision,n.rounding)};O.equals=O.eq=function(t){return this.cmp(t)===0};O.floor=function(){return V(new this.constructor(this),this.e+1,3)};O.greaterThan=O.gt=function(t){return this.cmp(t)>0};O.greaterThanOrEqualTo=O.gte=function(t){var e=this.cmp(t);return e==1||e===0};O.hyperbolicCosine=O.cosh=function(){var t,e,n,i,o,l=this,a=l.constructor,c=new a(1);if(!l.isFinite())return new a(l.s?1/0:NaN);if(l.isZero())return c;n=a.precision,i=a.rounding,a.precision=n+Math.max(l.e,l.sd())+4,a.rounding=1,o=l.d.length,o<32?(t=Math.ceil(o/3),e=(1/Gn(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),l=Xe(a,1,l.times(e),new a(1),!0);for(var p,v=t,A=new a(8);v--;)p=l.times(l),l=c.minus(p.times(A.minus(p.times(A))));return V(l,a.precision=n,a.rounding=i,!0)};O.hyperbolicSine=O.sinh=function(){var t,e,n,i,o=this,l=o.constructor;if(!o.isFinite()||o.isZero())return new l(o);if(e=l.precision,n=l.rounding,l.precision=e+Math.max(o.e,o.sd())+4,l.rounding=1,i=o.d.length,i<3)o=Xe(l,2,o,o,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,o=o.times(1/Gn(5,t)),o=Xe(l,2,o,o,!0);for(var a,c=new l(5),p=new l(16),v=new l(20);t--;)a=o.times(o),o=o.times(c.plus(a.times(p.times(a).plus(v))))}return l.precision=e,l.rounding=n,V(o,e,n,!0)};O.hyperbolicTangent=O.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,ht(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};O.inverseCosine=O.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),o=n.precision,l=n.rounding;return i!==-1?i===0?e.isNeg()?ue(n,o,l):new n(0):new n(NaN):e.isZero()?ue(n,o+4,l).times(.5):(n.precision=o+6,n.rounding=1,e=e.asin(),t=ue(n,o+4,l).times(.5),n.precision=o,n.rounding=l,t.minus(e))};O.inverseHyperbolicCosine=O.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,J=!1,n=n.times(n).minus(1).sqrt().plus(n),J=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};O.inverseHyperbolicSine=O.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,J=!1,n=n.times(n).plus(1).sqrt().plus(n),J=!0,i.precision=t,i.rounding=e,n.ln())};O.inverseHyperbolicTangent=O.atanh=function(){var t,e,n,i,o=this,l=o.constructor;return o.isFinite()?o.e>=0?new l(o.abs().eq(1)?o.s/0:o.isZero()?o:NaN):(t=l.precision,e=l.rounding,i=o.sd(),Math.max(i,t)<2*-o.e-1?V(new l(o),t,e,!0):(l.precision=n=i-o.e,o=ht(o.plus(1),new l(1).minus(o),n+t,1),l.precision=t+4,l.rounding=1,o=o.ln(),l.precision=t,l.rounding=e,o.times(.5))):new l(NaN)};O.inverseSine=O.asin=function(){var t,e,n,i,o=this,l=o.constructor;return o.isZero()?new l(o):(e=o.abs().cmp(1),n=l.precision,i=l.rounding,e!==-1?e===0?(t=ue(l,n+4,i).times(.5),t.s=o.s,t):new l(NaN):(l.precision=n+6,l.rounding=1,o=o.div(new l(1).minus(o.times(o)).sqrt().plus(1)).atan(),l.precision=n,l.rounding=i,o.times(2)))};O.inverseTangent=O.atan=function(){var t,e,n,i,o,l,a,c,p,v=this,A=v.constructor,_=A.precision,b=A.rounding;if(v.isFinite()){if(v.isZero())return new A(v);if(v.abs().eq(1)&&_+4<=Ir)return a=ue(A,_+4,b).times(.25),a.s=v.s,a}else{if(!v.s)return new A(NaN);if(_+4<=Ir)return a=ue(A,_+4,b).times(.5),a.s=v.s,a}for(A.precision=c=_+10,A.rounding=1,n=Math.min(28,c/K+2|0),t=n;t;--t)v=v.div(v.times(v).plus(1).sqrt().plus(1));for(J=!1,e=Math.ceil(c/K),i=1,p=v.times(v),a=new A(v),o=v;t!==-1;)if(o=o.times(p),l=a.minus(o.div(i+=2)),o=o.times(p),a=l.plus(o.div(i+=2)),a.d[e]!==void 0)for(t=e;a.d[t]===l.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),J=!0,V(a,A.precision=_,A.rounding=b,!0)};O.isFinite=function(){return!!this.d};O.isInteger=O.isInt=function(){return!!this.d&&$t(this.e/K)>this.d.length-2};O.isNaN=function(){return!this.s};O.isNegative=O.isNeg=function(){return this.s<0};O.isPositive=O.isPos=function(){return this.s>0};O.isZero=function(){return!!this.d&&this.d[0]===0};O.lessThan=O.lt=function(t){return this.cmp(t)<0};O.lessThanOrEqualTo=O.lte=function(t){return this.cmp(t)<1};O.logarithm=O.log=function(t){var e,n,i,o,l,a,c,p,v=this,A=v.constructor,_=A.precision,b=A.rounding,C=5;if(t==null)t=new A(10),e=!0;else{if(t=new A(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new A(NaN);e=t.eq(10)}if(n=v.d,v.s<0||!n||!n[0]||v.eq(1))return new A(n&&!n[0]?-1/0:v.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)l=!0;else{for(o=n[0];o%10===0;)o/=10;l=o!==1}if(J=!1,c=_+C,a=Ce(v,c),i=e?Un(A,c+10):Ce(t,c),p=ht(a,i,c,1),fn(p.d,o=_,b))do if(c+=10,a=Ce(v,c),i=e?Un(A,c+10):Ce(t,c),p=ht(a,i,c,1),!l){+Xt(p.d).slice(o+1,o+15)+1==1e14&&(p=V(p,_+1,0));break}while(fn(p.d,o+=10,b));return J=!0,V(p,_,b)};O.minus=O.sub=function(t){var e,n,i,o,l,a,c,p,v,A,_,b,C=this,k=C.constructor;if(t=new k(t),!C.d||!t.d)return!C.s||!t.s?t=new k(NaN):C.d?t.s=-t.s:t=new k(t.d||C.s!==t.s?C:NaN),t;if(C.s!=t.s)return t.s=-t.s,C.plus(t);if(v=C.d,b=t.d,c=k.precision,p=k.rounding,!v[0]||!b[0]){if(b[0])t.s=-t.s;else if(v[0])t=new k(C);else return new k(p===3?-0:0);return J?V(t,c,p):t}if(n=$t(t.e/K),A=$t(C.e/K),v=v.slice(),l=A-n,l){for(_=l<0,_?(e=v,l=-l,a=b.length):(e=b,n=A,a=v.length),i=Math.max(Math.ceil(c/K),a)+2,l>i&&(l=i,e.length=1),e.reverse(),i=l;i--;)e.push(0);e.reverse()}else{for(i=v.length,a=b.length,_=i<a,_&&(a=i),i=0;i<a;i++)if(v[i]!=b[i]){_=v[i]<b[i];break}l=0}for(_&&(e=v,v=b,b=e,t.s=-t.s),a=v.length,i=b.length-a;i>0;--i)v[a++]=0;for(i=b.length;i>l;){if(v[--i]<b[i]){for(o=i;o&&v[--o]===0;)v[o]=ce-1;--v[o],v[i]+=ce}v[i]-=b[i]}for(;v[--a]===0;)v.pop();for(;v[0]===0;v.shift())--n;return v[0]?(t.d=v,t.e=Kn(v,n),J?V(t,c,p):t):new k(p===3?-0:0)};O.modulo=O.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?V(new i(n),i.precision,i.rounding):(J=!1,i.modulo==9?(e=ht(n,t.abs(),0,3,1),e.s*=t.s):e=ht(n,t,0,i.modulo,1),e=e.times(t),J=!0,n.minus(e))};O.naturalExponential=O.exp=function(){return Tr(this)};O.naturalLogarithm=O.ln=function(){return Ce(this)};O.negated=O.neg=function(){var t=new this.constructor(this);return t.s=-t.s,V(t)};O.plus=O.add=function(t){var e,n,i,o,l,a,c,p,v,A,_=this,b=_.constructor;if(t=new b(t),!_.d||!t.d)return!_.s||!t.s?t=new b(NaN):_.d||(t=new b(t.d||_.s===t.s?_:NaN)),t;if(_.s!=t.s)return t.s=-t.s,_.minus(t);if(v=_.d,A=t.d,c=b.precision,p=b.rounding,!v[0]||!A[0])return A[0]||(t=new b(_)),J?V(t,c,p):t;if(l=$t(_.e/K),i=$t(t.e/K),v=v.slice(),o=l-i,o){for(o<0?(n=v,o=-o,a=A.length):(n=A,i=l,a=v.length),l=Math.ceil(c/K),a=l>a?l+1:a+1,o>a&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(a=v.length,o=A.length,a-o<0&&(o=a,n=A,A=v,v=n),e=0;o;)e=(v[--o]=v[o]+A[o]+e)/ce|0,v[o]%=ce;for(e&&(v.unshift(e),++i),a=v.length;v[--a]==0;)v.pop();return t.d=v,t.e=Kn(v,i),J?V(t,c,p):t};O.precision=O.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ee+t);return n.d?(e=xi(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};O.round=function(){var t=this,e=t.constructor;return V(new e(t),t.e+1,e.rounding)};O.sine=O.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+K,i.rounding=1,n=$s(i,Xi(i,n)),i.precision=t,i.rounding=e,V(pe>2?n.neg():n,t,e,!0)):new i(NaN)};O.squareRoot=O.sqrt=function(){var t,e,n,i,o,l,a=this,c=a.d,p=a.e,v=a.s,A=a.constructor;if(v!==1||!c||!c[0])return new A(!v||v<0&&(!c||c[0])?NaN:c?a:1/0);for(J=!1,v=Math.sqrt(+a),v==0||v==1/0?(e=Xt(c),(e.length+p)%2==0&&(e+="0"),v=Math.sqrt(e),p=$t((p+1)/2)-(p<0||p%2),v==1/0?e="5e"+p:(e=v.toExponential(),e=e.slice(0,e.indexOf("e")+1)+p),i=new A(e)):i=new A(v.toString()),n=(p=A.precision)+3;;)if(l=i,i=l.plus(ht(a,l,n+2,1)).times(.5),Xt(l.d).slice(0,n)===(e=Xt(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!o&&e=="4999"){if(!o&&(V(l,p+1,0),l.times(l).eq(a))){i=l;break}n+=4,o=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(V(i,p+1,1),t=!i.times(i).eq(a));break}return J=!0,V(i,p,A.rounding,t)};O.tangent=O.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=ht(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,V(pe==2||pe==4?n.neg():n,t,e,!0)):new i(NaN)};O.times=O.mul=function(t){var e,n,i,o,l,a,c,p,v,A=this,_=A.constructor,b=A.d,C=(t=new _(t)).d;if(t.s*=A.s,!b||!b[0]||!C||!C[0])return new _(!t.s||b&&!b[0]&&!C||C&&!C[0]&&!b?NaN:!b||!C?t.s/0:t.s*0);for(n=$t(A.e/K)+$t(t.e/K),p=b.length,v=C.length,p<v&&(l=b,b=C,C=l,a=p,p=v,v=a),l=[],a=p+v,i=a;i--;)l.push(0);for(i=v;--i>=0;){for(e=0,o=p+i;o>i;)c=l[o]+C[i]*b[o-i-1]+e,l[o--]=c%ce|0,e=c/ce|0;l[o]=(l[o]+e)%ce|0}for(;!l[--a];)l.pop();return e?++n:l.shift(),t.d=l,t.e=Kn(l,n),J?V(t,_.precision,_.rounding):t};O.toBinary=function(t,e){return Hr(this,2,t,e)};O.toDecimalPlaces=O.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(re(t,0,Oe),e===void 0?e=i.rounding:re(e,0,8),V(n,t+n.e+1,e))};O.toExponential=function(t,e){var n,i=this,o=i.constructor;return t===void 0?n=de(i,!0):(re(t,0,Oe),e===void 0?e=o.rounding:re(e,0,8),i=V(new o(i),t+1,e),n=de(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};O.toFixed=function(t,e){var n,i,o=this,l=o.constructor;return t===void 0?n=de(o):(re(t,0,Oe),e===void 0?e=l.rounding:re(e,0,8),i=V(new l(o),t+o.e+1,e),n=de(i,!1,t+i.e+1)),o.isNeg()&&!o.isZero()?"-"+n:n};O.toFraction=function(t){var e,n,i,o,l,a,c,p,v,A,_,b,C=this,k=C.d,B=C.constructor;if(!k)return new B(C);if(v=n=new B(1),i=p=new B(0),e=new B(i),l=e.e=xi(k)-C.e-1,a=l%K,e.d[0]=zt(10,a<0?K+a:a),t==null)t=l>0?e:v;else{if(c=new B(t),!c.isInt()||c.lt(v))throw Error(Ee+c);t=c.gt(e)?l>0?e:v:c}for(J=!1,c=new B(Xt(k)),A=B.precision,B.precision=l=k.length*K*2;_=ht(c,e,0,1,1),o=n.plus(_.times(i)),o.cmp(t)!=1;)n=i,i=o,o=v,v=p.plus(_.times(o)),p=o,o=e,e=c.minus(_.times(o)),c=o;return o=ht(t.minus(n),i,0,1,1),p=p.plus(o.times(v)),n=n.plus(o.times(i)),p.s=v.s=C.s,b=ht(v,i,l,1).minus(C).abs().cmp(ht(p,n,l,1).minus(C).abs())<1?[v,i]:[p,n],B.precision=A,J=!0,b};O.toHexadecimal=O.toHex=function(t,e){return Hr(this,16,t,e)};O.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:re(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(J=!1,n=ht(n,t,0,e,1).times(t),J=!0,V(n)):(t.s=n.s,n=t),n};O.toNumber=function(){return+this};O.toOctal=function(t,e){return Hr(this,8,t,e)};O.toPower=O.pow=function(t){var e,n,i,o,l,a,c=this,p=c.constructor,v=+(t=new p(t));if(!c.d||!t.d||!c.d[0]||!t.d[0])return new p(zt(+c,v));if(c=new p(c),c.eq(1))return c;if(i=p.precision,l=p.rounding,t.eq(1))return V(c,i,l);if(e=$t(t.e/K),e>=t.d.length-1&&(n=v<0?-v:v)<=Ks)return o=Yi(p,c,n,i),t.s<0?new p(1).div(o):V(o,i,l);if(a=c.s,a<0){if(e<t.d.length-1)return new p(NaN);if(t.d[e]&1||(a=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=a,c}return n=zt(+c,v),e=n==0||!isFinite(n)?$t(v*(Math.log("0."+Xt(c.d))/Math.LN10+c.e+1)):new p(n+"").e,e>p.maxE+1||e<p.minE-1?new p(e>0?a/0:0):(J=!1,p.rounding=c.s=1,n=Math.min(12,(e+"").length),o=Tr(t.times(Ce(c,i+n)),i),o.d&&(o=V(o,i+5,1),fn(o.d,i,l)&&(e=i+10,o=V(Tr(t.times(Ce(c,e+n)),e),e+5,1),+Xt(o.d).slice(i+1,i+15)+1==1e14&&(o=V(o,i+1,0)))),o.s=a,J=!0,p.rounding=l,V(o,i,l))};O.toPrecision=function(t,e){var n,i=this,o=i.constructor;return t===void 0?n=de(i,i.e<=o.toExpNeg||i.e>=o.toExpPos):(re(t,1,Oe),e===void 0?e=o.rounding:re(e,0,8),i=V(new o(i),t,e),n=de(i,t<=i.e||i.e<=o.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};O.toSignificantDigits=O.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(re(t,1,Oe),e===void 0?e=i.rounding:re(e,0,8)),V(new i(n),t,e)};O.toString=function(){var t=this,e=t.constructor,n=de(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};O.truncated=O.trunc=function(){return V(new this.constructor(this),this.e+1,1)};O.valueOf=O.toJSON=function(){var t=this,e=t.constructor,n=de(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function Xt(t){var e,n,i,o=t.length-1,l="",a=t[0];if(o>0){for(l+=a,e=1;e<o;e++)i=t[e]+"",n=K-i.length,n&&(l+=be(n)),l+=i;a=t[e],i=a+"",n=K-i.length,n&&(l+=be(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return l+a}function re(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ee+t)}function fn(t,e,n,i){var o,l,a,c;for(l=t[0];l>=10;l/=10)--e;return--e<0?(e+=K,o=0):(o=Math.ceil((e+1)/K),e%=K),l=zt(10,K-e),c=t[o]%l|0,i==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),a=n<4&&c==99999||n>3&&c==49999||c==5e4||c==0):a=(n<4&&c+1==l||n>3&&c+1==l/2)&&(t[o+1]/l/100|0)==zt(10,e-2)-1||(c==l/2||c==0)&&(t[o+1]/l/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),a=(i||n<4)&&c==9999||!i&&n>3&&c==4999):a=((i||n<4)&&c+1==l||!i&&n>3&&c+1==l/2)&&(t[o+1]/l/1e3|0)==zt(10,e-3)-1,a}function Tn(t,e,n){for(var i,o=[0],l,a=0,c=t.length;a<c;){for(l=o.length;l--;)o[l]*=e;for(o[0]+=Sr.indexOf(t.charAt(a++)),i=0;i<o.length;i++)o[i]>n-1&&(o[i+1]===void 0&&(o[i+1]=0),o[i+1]+=o[i]/n|0,o[i]%=n)}return o.reverse()}function Xs(t,e){var n,i,o;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),o=(1/Gn(4,n)).toString()):(n=16,o="2.3283064365386962890625e-10"),t.precision+=n,e=Xe(t,1,e.times(o),new t(1));for(var l=n;l--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}var ht=function(){function t(i,o,l){var a,c=0,p=i.length;for(i=i.slice();p--;)a=i[p]*o+c,i[p]=a%l|0,c=a/l|0;return c&&i.unshift(c),i}function e(i,o,l,a){var c,p;if(l!=a)p=l>a?1:-1;else for(c=p=0;c<l;c++)if(i[c]!=o[c]){p=i[c]>o[c]?1:-1;break}return p}function n(i,o,l,a){for(var c=0;l--;)i[l]-=c,c=i[l]<o[l]?1:0,i[l]=c*a+i[l]-o[l];for(;!i[0]&&i.length>1;)i.shift()}return function(i,o,l,a,c,p){var v,A,_,b,C,k,B,S,q,I,T,E,Y,z,x,j,F,R,$,U,tt=i.constructor,w=i.s==o.s?1:-1,r=i.d,u=o.d;if(!r||!r[0]||!u||!u[0])return new tt(!i.s||!o.s||(r?u&&r[0]==u[0]:!u)?NaN:r&&r[0]==0||!u?w*0:w/0);for(p?(C=1,A=i.e-o.e):(p=ce,C=K,A=$t(i.e/C)-$t(o.e/C)),$=u.length,F=r.length,q=new tt(w),I=q.d=[],_=0;u[_]==(r[_]||0);_++);if(u[_]>(r[_]||0)&&A--,l==null?(z=l=tt.precision,a=tt.rounding):c?z=l+(i.e-o.e)+1:z=l,z<0)I.push(1),k=!0;else{if(z=z/C+2|0,_=0,$==1){for(b=0,u=u[0],z++;(_<F||b)&&z--;_++)x=b*p+(r[_]||0),I[_]=x/u|0,b=x%u|0;k=b||_<F}else{for(b=p/(u[0]+1)|0,b>1&&(u=t(u,b,p),r=t(r,b,p),$=u.length,F=r.length),j=$,T=r.slice(0,$),E=T.length;E<$;)T[E++]=0;U=u.slice(),U.unshift(0),R=u[0],u[1]>=p/2&&++R;do b=0,v=e(u,T,$,E),v<0?(Y=T[0],$!=E&&(Y=Y*p+(T[1]||0)),b=Y/R|0,b>1?(b>=p&&(b=p-1),B=t(u,b,p),S=B.length,E=T.length,v=e(B,T,S,E),v==1&&(b--,n(B,$<S?U:u,S,p))):(b==0&&(v=b=1),B=u.slice()),S=B.length,S<E&&B.unshift(0),n(T,B,E,p),v==-1&&(E=T.length,v=e(u,T,$,E),v<1&&(b++,n(T,$<E?U:u,E,p))),E=T.length):v===0&&(b++,T=[0]),I[_++]=b,v&&T[0]?T[E++]=r[j]||0:(T=[r[j]],E=1);while((j++<F||T[0]!==void 0)&&z--);k=T[0]!==void 0}I[0]||I.shift()}if(C==1)q.e=A,Wi=k;else{for(_=1,b=I[0];b>=10;b/=10)_++;q.e=_+A*C-1,V(q,c?l+q.e+1:l,a,k)}return q}}();function V(t,e,n,i){var o,l,a,c,p,v,A,_,b,C=t.constructor;t:if(e!=null){if(_=t.d,!_)return t;for(o=1,c=_[0];c>=10;c/=10)o++;if(l=e-o,l<0)l+=K,a=e,A=_[b=0],p=A/zt(10,o-a-1)%10|0;else if(b=Math.ceil((l+1)/K),c=_.length,b>=c)if(i){for(;c++<=b;)_.push(0);A=p=0,o=1,l%=K,a=l-K+1}else break t;else{for(A=c=_[b],o=1;c>=10;c/=10)o++;l%=K,a=l-K+o,p=a<0?0:A/zt(10,o-a-1)%10|0}if(i=i||e<0||_[b+1]!==void 0||(a<0?A:A%zt(10,o-a-1)),v=n<4?(p||i)&&(n==0||n==(t.s<0?3:2)):p>5||p==5&&(n==4||i||n==6&&(l>0?a>0?A/zt(10,o-a):0:_[b-1])%10&1||n==(t.s<0?8:7)),e<1||!_[0])return _.length=0,v?(e-=t.e+1,_[0]=zt(10,(K-e%K)%K),t.e=-e||0):_[0]=t.e=0,t;if(l==0?(_.length=b,c=1,b--):(_.length=b+1,c=zt(10,K-l),_[b]=a>0?(A/zt(10,o-a)%zt(10,a)|0)*c:0),v)for(;;)if(b==0){for(l=1,a=_[0];a>=10;a/=10)l++;for(a=_[0]+=c,c=1;a>=10;a/=10)c++;l!=c&&(t.e++,_[0]==ce&&(_[0]=1));break}else{if(_[b]+=c,_[b]!=ce)break;_[b--]=0,c=1}for(l=_.length;_[--l]===0;)_.pop()}return J&&(t.e>C.maxE?(t.d=null,t.e=NaN):t.e<C.minE&&(t.e=0,t.d=[0])),t}function de(t,e,n){if(!t.isFinite())return Gi(t);var i,o=t.e,l=Xt(t.d),a=l.length;return e?(n&&(i=n-a)>0?l=l.charAt(0)+"."+l.slice(1)+be(i):a>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(t.e<0?"e":"e+")+t.e):o<0?(l="0."+be(-o-1)+l,n&&(i=n-a)>0&&(l+=be(i))):o>=a?(l+=be(o+1-a),n&&(i=n-o-1)>0&&(l=l+"."+be(i))):((i=o+1)<a&&(l=l.slice(0,i)+"."+l.slice(i)),n&&(i=n-a)>0&&(o+1===a&&(l+="."),l+=be(i))),l}function Kn(t,e){var n=t[0];for(e*=K;n>=10;n/=10)e++;return e}function Un(t,e,n){if(e>Gs)throw J=!0,n&&(t.precision=n),Error(Zi);return V(new t(Ln),e,1,!0)}function ue(t,e,n){if(e>Ir)throw Error(Zi);return V(new t(Pn),e,n,!0)}function xi(t){var e=t.length-1,n=e*K+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function be(t){for(var e="";t--;)e+="0";return e}function Yi(t,e,n,i){var o,l=new t(1),a=Math.ceil(i/K+4);for(J=!1;;){if(n%2&&(l=l.times(e),ci(l.d,a)&&(o=!0)),n=$t(n/2),n===0){n=l.d.length-1,o&&l.d[n]===0&&++l.d[n];break}e=e.times(e),ci(e.d,a)}return J=!0,l}function ui(t){return t.d[t.d.length-1]&1}function Ki(t,e,n){for(var i,o=new t(e[0]),l=0;++l<e.length;)if(i=new t(e[l]),i.s)o[n](i)&&(o=i);else{o=i;break}return o}function Tr(t,e){var n,i,o,l,a,c,p,v=0,A=0,_=0,b=t.constructor,C=b.rounding,k=b.precision;if(!t.d||!t.d[0]||t.e>17)return new b(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(J=!1,p=k):p=e,c=new b(.03125);t.e>-2;)t=t.times(c),_+=5;for(i=Math.log(zt(2,_))/Math.LN10*2+5|0,p+=i,n=l=a=new b(1),b.precision=p;;){if(l=V(l.times(t),p,1),n=n.times(++A),c=a.plus(ht(l,n,p,1)),Xt(c.d).slice(0,p)===Xt(a.d).slice(0,p)){for(o=_;o--;)a=V(a.times(a),p,1);if(e==null)if(v<3&&fn(a.d,p-i,C,v))b.precision=p+=10,n=l=c=new b(1),A=0,v++;else return V(a,b.precision=k,C,J=!0);else return b.precision=k,a}a=c}}function Ce(t,e){var n,i,o,l,a,c,p,v,A,_,b,C=1,k=10,B=t,S=B.d,q=B.constructor,I=q.rounding,T=q.precision;if(B.s<0||!S||!S[0]||!B.e&&S[0]==1&&S.length==1)return new q(S&&!S[0]?-1/0:B.s!=1?NaN:S?0:B);if(e==null?(J=!1,A=T):A=e,q.precision=A+=k,n=Xt(S),i=n.charAt(0),Math.abs(l=B.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)B=B.times(t),n=Xt(B.d),i=n.charAt(0),C++;l=B.e,i>1?(B=new q("0."+n),l++):B=new q(i+"."+n.slice(1))}else return v=Un(q,A+2,T).times(l+""),B=Ce(new q(i+"."+n.slice(1)),A-k).plus(v),q.precision=T,e==null?V(B,T,I,J=!0):B;for(_=B,p=a=B=ht(B.minus(1),B.plus(1),A,1),b=V(B.times(B),A,1),o=3;;){if(a=V(a.times(b),A,1),v=p.plus(ht(a,new q(o),A,1)),Xt(v.d).slice(0,A)===Xt(p.d).slice(0,A))if(p=p.times(2),l!==0&&(p=p.plus(Un(q,A+2,T).times(l+""))),p=ht(p,new q(C),A,1),e==null)if(fn(p.d,A-k,I,c))q.precision=A+=k,v=a=B=ht(_.minus(1),_.plus(1),A,1),b=V(B.times(B),A,1),o=c=1;else return V(p,q.precision=T,I,J=!0);else return q.precision=T,p;p=v,o+=2}}function Gi(t){return String(t.s*t.s/0)}function Er(t,e){var n,i,o;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(o=e.length;e.charCodeAt(o-1)===48;--o);if(e=e.slice(i,o),e){if(o-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%K,n<0&&(i+=K),i<o){for(i&&t.d.push(+e.slice(0,i)),o-=K;i<o;)t.d.push(+e.slice(i,i+=K));e=e.slice(i),i=K-e.length}else i-=o;for(;i--;)e+="0";t.d.push(+e),J&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Js(t,e){var n,i,o,l,a,c,p,v,A;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),zi.test(e))return Er(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(xs.test(e))n=16,e=e.toLowerCase();else if(zs.test(e))n=2;else if(Ys.test(e))n=8;else throw Error(Ee+e);for(l=e.search(/p/i),l>0?(p=+e.slice(l+1),e=e.substring(2,l)):e=e.slice(2),l=e.indexOf("."),a=l>=0,i=t.constructor,a&&(e=e.replace(".",""),c=e.length,l=c-l,o=Yi(i,new i(n),l,l*2)),v=Tn(e,n,ce),A=v.length-1,l=A;v[l]===0;--l)v.pop();return l<0?new i(t.s*0):(t.e=Kn(v,A),t.d=v,J=!1,a&&(t=ht(t,o,c*4)),p&&(t=t.times(Math.abs(p)<54?zt(2,p):gn.pow(2,p))),J=!0,t)}function $s(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Xe(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/Gn(5,n)),e=Xe(t,2,e,e);for(var o,l=new t(5),a=new t(16),c=new t(20);n--;)o=e.times(e),e=e.times(l.plus(o.times(a.times(o).minus(c))));return e}function Xe(t,e,n,i,o){var l,a,c,p,v=t.precision,A=Math.ceil(v/K);for(J=!1,p=n.times(n),c=new t(i);;){if(a=ht(c.times(p),new t(e++*e++),v,1),c=o?i.plus(a):i.minus(a),i=ht(a.times(p),new t(e++*e++),v,1),a=c.plus(i),a.d[A]!==void 0){for(l=A;a.d[l]===c.d[l]&&l--;);if(l==-1)break}l=c,c=i,i=a,a=l}return J=!0,a.d.length=A+1,a}function Gn(t,e){for(var n=t;--e;)n*=t;return n}function Xi(t,e){var n,i=e.s<0,o=ue(t,t.precision,1),l=o.times(.5);if(e=e.abs(),e.lte(l))return pe=i?4:1,e;if(n=e.divToInt(o),n.isZero())pe=i?3:2;else{if(e=e.minus(n.times(o)),e.lte(l))return pe=ui(n)?i?2:3:i?4:1,e;pe=ui(n)?i?1:4:i?3:2}return e.minus(o).abs()}function Hr(t,e,n,i){var o,l,a,c,p,v,A,_,b,C=t.constructor,k=n!==void 0;if(k?(re(n,1,Oe),i===void 0?i=C.rounding:re(i,0,8)):(n=C.precision,i=C.rounding),!t.isFinite())A=Gi(t);else{for(A=de(t),a=A.indexOf("."),k?(o=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):o=e,a>=0&&(A=A.replace(".",""),b=new C(1),b.e=A.length-a,b.d=Tn(de(b),10,o),b.e=b.d.length),_=Tn(A,10,o),l=p=_.length;_[--p]==0;)_.pop();if(!_[0])A=k?"0p+0":"0";else{if(a<0?l--:(t=new C(t),t.d=_,t.e=l,t=ht(t,b,n,i,0,o),_=t.d,l=t.e,v=Wi),a=_[n],c=o/2,v=v||_[n+1]!==void 0,v=i<4?(a!==void 0||v)&&(i===0||i===(t.s<0?3:2)):a>c||a===c&&(i===4||v||i===6&&_[n-1]&1||i===(t.s<0?8:7)),_.length=n,v)for(;++_[--n]>o-1;)_[n]=0,n||(++l,_.unshift(1));for(p=_.length;!_[p-1];--p);for(a=0,A="";a<p;a++)A+=Sr.charAt(_[a]);if(k){if(p>1)if(e==16||e==8){for(a=e==16?4:3,--p;p%a;p++)A+="0";for(_=Tn(A,o,e),p=_.length;!_[p-1];--p);for(a=1,A="1.";a<p;a++)A+=Sr.charAt(_[a])}else A=A.charAt(0)+"."+A.slice(1);A=A+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)A="0"+A;A="0."+A}else if(++l>p)for(l-=p;l--;)A+="0";else l<p&&(A=A.slice(0,l)+"."+A.slice(l))}A=(e==16?"0x":e==2?"0b":e==8?"0o":"")+A}return t.s<0?"-"+A:A}function ci(t,e){if(t.length>e)return t.length=e,!0}function Qs(t){return new this(t).abs()}function ta(t){return new this(t).acos()}function ea(t){return new this(t).acosh()}function na(t,e){return new this(t).plus(e)}function ra(t){return new this(t).asin()}function ia(t){return new this(t).asinh()}function oa(t){return new this(t).atan()}function sa(t){return new this(t).atanh()}function aa(t,e){t=new this(t),e=new this(e);var n,i=this.precision,o=this.rounding,l=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=ue(this,l,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?ue(this,i,o):new this(0),n.s=t.s):!t.d||e.isZero()?(n=ue(this,l,1).times(.5),n.s=t.s):e.s<0?(this.precision=l,this.rounding=1,n=this.atan(ht(t,e,l,1)),e=ue(this,l,1),this.precision=i,this.rounding=o,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(ht(t,e,l,1)),n}function la(t){return new this(t).cbrt()}function ua(t){return V(t=new this(t),t.e+1,2)}function ca(t,e,n){return new this(t).clamp(e,n)}function ha(t){if(!t||typeof t!="object")throw Error(Yn+"Object expected");var e,n,i,o=t.defaults===!0,l=["precision",1,Oe,"rounding",0,8,"toExpNeg",-Ze,0,"toExpPos",0,Ze,"maxE",0,Ze,"minE",-Ze,0,"modulo",0,9];for(e=0;e<l.length;e+=3)if(n=l[e],o&&(this[n]=Cr[n]),(i=t[n])!==void 0)if($t(i)===i&&i>=l[e+1]&&i<=l[e+2])this[n]=i;else throw Error(Ee+n+": "+i);if(n="crypto",o&&(this[n]=Cr[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Vi);else this[n]=!1;else throw Error(Ee+n+": "+i);return this}function fa(t){return new this(t).cos()}function da(t){return new this(t).cosh()}function Ji(t){var e,n,i;function o(l){var a,c,p,v=this;if(!(v instanceof o))return new o(l);if(v.constructor=o,hi(l)){v.s=l.s,J?!l.d||l.e>o.maxE?(v.e=NaN,v.d=null):l.e<o.minE?(v.e=0,v.d=[0]):(v.e=l.e,v.d=l.d.slice()):(v.e=l.e,v.d=l.d?l.d.slice():l.d);return}if(p=typeof l,p==="number"){if(l===0){v.s=1/l<0?-1:1,v.e=0,v.d=[0];return}if(l<0?(l=-l,v.s=-1):v.s=1,l===~~l&&l<1e7){for(a=0,c=l;c>=10;c/=10)a++;J?a>o.maxE?(v.e=NaN,v.d=null):a<o.minE?(v.e=0,v.d=[0]):(v.e=a,v.d=[l]):(v.e=a,v.d=[l]);return}else if(l*0!==0){l||(v.s=NaN),v.e=NaN,v.d=null;return}return Er(v,l.toString())}else if(p!=="string")throw Error(Ee+l);return(c=l.charCodeAt(0))===45?(l=l.slice(1),v.s=-1):(c===43&&(l=l.slice(1)),v.s=1),zi.test(l)?Er(v,l):Js(v,l)}if(o.prototype=O,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=ha,o.clone=Ji,o.isDecimal=hi,o.abs=Qs,o.acos=ta,o.acosh=ea,o.add=na,o.asin=ra,o.asinh=ia,o.atan=oa,o.atanh=sa,o.atan2=aa,o.cbrt=la,o.ceil=ua,o.clamp=ca,o.cos=fa,o.cosh=da,o.div=ga,o.exp=pa,o.floor=va,o.hypot=ma,o.ln=wa,o.log=Ma,o.log10=Aa,o.log2=ya,o.max=_a,o.min=ba,o.mod=Sa,o.mul=Ca,o.pow=Ia,o.random=Ta,o.round=Ea,o.sign=Oa,o.sin=ka,o.sinh=Ba,o.sqrt=Na,o.sub=Ra,o.sum=Fa,o.tan=La,o.tanh=Pa,o.trunc=Ua,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return o.config(t),o}function ga(t,e){return new this(t).div(e)}function pa(t){return new this(t).exp()}function va(t){return V(t=new this(t),t.e+1,3)}function ma(){var t,e,n=new this(0);for(J=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return J=!0,new this(1/0);n=e}return J=!0,n.sqrt()}function hi(t){return t instanceof gn||t&&t.toStringTag===Hi||!1}function wa(t){return new this(t).ln()}function Ma(t,e){return new this(t).log(e)}function ya(t){return new this(t).log(2)}function Aa(t){return new this(t).log(10)}function _a(){return Ki(this,arguments,"lt")}function ba(){return Ki(this,arguments,"gt")}function Sa(t,e){return new this(t).mod(e)}function Ca(t,e){return new this(t).mul(e)}function Ia(t,e){return new this(t).pow(e)}function Ta(t){var e,n,i,o,l=0,a=new this(1),c=[];if(t===void 0?t=this.precision:re(t,1,Oe),i=Math.ceil(t/K),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));l<i;)o=e[l],o>=429e7?e[l]=crypto.getRandomValues(new Uint32Array(1))[0]:c[l++]=o%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);l<i;)o=e[l]+(e[l+1]<<8)+(e[l+2]<<16)+((e[l+3]&127)<<24),o>=214e7?crypto.randomBytes(4).copy(e,l):(c.push(o%1e7),l+=4);l=i/4}else throw Error(Vi);else for(;l<i;)c[l++]=Math.random()*1e7|0;for(i=c[--l],t%=K,i&&t&&(o=zt(10,K-t),c[l]=(i/o|0)*o);c[l]===0;l--)c.pop();if(l<0)n=0,c=[0];else{for(n=-1;c[0]===0;n-=K)c.shift();for(i=1,o=c[0];o>=10;o/=10)i++;i<K&&(n-=K-i)}return a.e=n,a.d=c,a}function Ea(t){return V(t=new this(t),t.e+1,this.rounding)}function Oa(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function ka(t){return new this(t).sin()}function Ba(t){return new this(t).sinh()}function Na(t){return new this(t).sqrt()}function Ra(t,e){return new this(t).sub(e)}function Fa(){var t=0,e=arguments,n=new this(e[t]);for(J=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return J=!0,V(n,this.precision,this.rounding)}function La(t){return new this(t).tan()}function Pa(t){return new this(t).tanh()}function Ua(t){return V(t=new this(t),t.e+1,1)}O[Symbol.for("nodejs.util.inspect.custom")]=O.toString;O[Symbol.toStringTag]="Decimal";var gn=O.constructor=Ji(Cr);Ln=new gn(Ln);Pn=new gn(Pn);var En=gn,Da="0x2::coin::Coin",ja=/^0x2::coin::Coin<(.+)>$/,$i="0x2::sui::SUI",qa="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Fe=class _e{static getCoinTypeArg(e){const n=e.type.match(ja);return n?n[1]:null}static isSUI(e){const n=_e.getCoinTypeArg(e);return n?_e.getCoinSymbol(n)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,n){let i=BigInt(0);return e.forEach(o=>{n===o.coinAddress&&(i+=BigInt(o.balance))}),i}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${Da}<${e}>`}static getCoinAssets(e,n){const i=[];return n.forEach(o=>{di(o.coinAddress)===di(e)&&i.push(o)}),i}static isSuiCoin(e){return Ye(e).full_address===$i}static selectCoinObjectIdGreaterThanOrEqual(e,n,i=[]){const o=_e.selectCoinAssetGreaterThanOrEqual(e,n,i),l=o.selectedCoins.map(p=>p.coinObjectId),a=o.remainingCoins,c=o.selectedCoins.map(p=>p.balance.toString());return{objectArray:l,remainCoins:a,amountArray:c}}static selectCoinAssetGreaterThanOrEqual(e,n,i=[]){const o=_e.sortByBalance(e.filter(v=>!i.includes(v.coinObjectId))),l=_e.calculateTotalBalance(o);if(l<n)return{selectedCoins:[],remainingCoins:o};if(l===n)return{selectedCoins:o,remainingCoins:[]};let a=BigInt(0);const c=[],p=[...o];for(;a<l;){const v=n-a,A=p.findIndex(b=>b.balance>=v);if(A!==-1){c.push(p[A]),p.splice(A,1);break}const _=p.pop();_.balance>0&&(c.push(_),a+=_.balance)}return{selectedCoins:_e.sortByBalance(c),remainingCoins:_e.sortByBalance(p)}}static sortByBalance(e){return e.sort((n,i)=>n.balance<i.balance?-1:n.balance>i.balance?1:0)}static sortByBalanceDes(e){return e.sort((n,i)=>n.balance>i.balance?-1:n.balance<i.balance?0:1)}static calculateTotalBalance(e){return e.reduce((n,i)=>n+i.balance,BigInt(0))}};function fi(t,...e){const n=Array.isArray(e[e.length-1])?e.pop():[];let o=[t,...e].filter(Boolean).join("::");return n&&n.length&&(o+=`<${n.join(", ")}>`),o}function Ye(t){var e;try{let n=t.replace(/\s/g,"");const i=n.match(/(<.+>)$/),o=(e=i==null?void 0:i[0])==null?void 0:e.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(o){n=n.slice(0,n.indexOf("<"));const p=Ye(n),v=Ws(qs({},p),{type_arguments:o.map(A=>Ye(A).source_address)});return v.type_arguments=v.type_arguments.map(A=>Fe.isSuiCoin(A)?A:Ye(A).source_address),v.source_address=fi(v.full_address,v.type_arguments),v}const l=n.split("::"),c={full_address:n,address:n===$i||n===qa?"0x2":Zr.normalizeSuiObjectId(l[0]),module:l[1],name:l[2],type_arguments:[],source_address:""};return c.full_address=`${c.address}::${c.module}::${c.name}`,c.source_address=fi(c.full_address,c.type_arguments),c}catch{return{full_address:t,address:"",module:"",name:"",type_arguments:[],source_address:t}}}function di(t){return Ye(t).source_address}function se(t,e,n){return`${t}::${e}::${n}`}var pn=zn(xn()),Je="0x0000000000000000000000000000000000000000000000000000000000000006",Wa="0x2::coin::zero",ve="aggregator",Qi="CETUS",Za="DEEPBOOK",Va="KRIYA",Ha="FLOWX",to="TURBOS",Or="AFTERMATH",za="integrate",eo="cetus",gi="deepbook",xa="kriya",no="utils",ro="pay",Ya="flowx_amm",Ka="turbos",Ga="aftermath",Xa="custodian_v2",Ja="clob_v2",$a="flash_swap_a2b",Qa="flash_swap_b2a",tl="flash_swap_with_partner_a2b",el="flash_swap_with_partner_b2a",nl="repay_flash_swap_a2b",rl="repay_flash_swap_b2a",il="repay_flash_swap_with_partner_a2b",ol="repay_flash_swap_with_partner_b2a",vn="swap_a2b",mn="swap_b2a",sl="transfer_or_destroy_coin",al="check_coins_threshold",io="join_vec",ll="transfer_account_cap",ul="0x000000000000000000000000000000000000000000000000000000000000dee9",cl="0x000000000000000000000000000000000000000000000000000000000000dee9",oo="0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",so="0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",Ve=new pn.default(0);new pn.default(1);var hl=new pn.default(2);hl.pow(new pn.default(128));var fl=new pn.default("18446744073709551615"),dl="18446744073709551615",je=1e9,gl="0xb65dcbf63fd3ad5d0ebfbf334780dc9f785eff38a4459e37ab08fa79576ee511",pl="",pi="0xf1cf0e81048df168ebeb1b8030fad24b3e0b53ae827c25053fff0779c1445b6f",vl="0xfcc774493db2c45c79f688f88d28023a3e7d98e4ee9f48bbf5c7990f651577ae",ml="",wl="0xf194d9b1bcad972e45a7dd67dd49b3ee1e3357a00a50850c52cd51bb450e13b4",Ml="",yl="0x28e499dff5e864a2eafe476269a4f5035f1c16f338da7be18b103499abf271ce",Al="",_l="0xf0c40d67b078000e18032334c3325c47b9ec9f3d9ae4128be820d54663d14e3b",bl="",Sl="0x35d35b0e5b177593d8c3a801462485572fc30861e6ce96a55af6dc4730709278",Cl="";function vi(t){switch(t){case 1e4:return"Calculate error";case 10001:return"Input number too large can not fit in target type";case 10002:return"No router";case 10003:return"Insufficient Liquidity";default:return"Unknown error"}}function ao(t,e){return t.moveCall({target:Wa,typeArguments:[e]})}function pr(t,e,n,i){const o=Fe.getCoinAssets(i,e);if(n===BigInt(0)&&o.length===0)return{targetCoin:ao(t,i),isMintZeroCoin:!0,targetCoinAmount:0};console.log("used coin asests",o);let l=Fe.calculateTotalBalance(o);if(console.log("totalCoinBalance",l),console.log("amount",n),l<n)throw new AggregateError("Insufficient balance when build merge coin","InsufficientBalance");if(Fe.isSuiCoin(i)&&n<=BigInt(95e10))return{targetCoin:t.splitCoins(t.gas,[t.pure.u64(n.toString())]),isMintZeroCoin:!0,targetCoinAmount:Number(n.toString())};let a=Fe.sortByBalance(o);a.slice(0,3).reduce((_,b)=>_+b.balance,BigInt(0))<BigInt(n)&&(a=Fe.sortByBalanceDes(o));let p=Fe.selectCoinObjectIdGreaterThanOrEqual(a,n);const[v,...A]=p.objectArray;return A.length>0&&t.mergeCoins(v,A.map(_=>t.object(_))),{targetCoin:t.object(v),isMintZeroCoin:!1,targetCoinAmount:Number(n.toString())}}function $e(t,e,n,i){const o=i.getPackage(ve);if(o==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const l=o.publishedAt;t.moveCall({target:se(l,no,sl),typeArguments:[n],arguments:[e]})}function Il(t,e,n,i,o){const l=o.getPackage(ve);if(l==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const a=l.publishedAt,c=t.makeMoveVec({elements:e});t.moveCall({target:se(a,no,al),typeArguments:[n],arguments:[c,t.pure.u64(i)]});const p=ao(t,n);return t.moveCall({target:se(Zr.SUI_FRAMEWORK_ADDRESS,ro,io),typeArguments:[n],arguments:[p,c]}),p}function Tl(t,e,n){return xt(this,null,function*(){let i=yield El(e,n);return i!==null?{accountCap:t.object(i),isCreate:!1}:{accountCap:t.moveCall({target:`${cl}::${Ja}::create_account`,typeArguments:[],arguments:[]}),isCreate:!0}})}function El(t,e){return xt(this,null,function*(){let n=50,i=null;for(;;){const o=t.getOwnedObjects({owner:e,cursor:i,limit:n,filter:{MoveModule:{package:ul,module:Xa}}});if(o!=null&&o.data!=null){if(o.data.length!==0)return o.data[0].data.objectId;if(o.data.length<50)break}else break}return null})}function Ol(t,e,n,i){return xt(this,null,function*(){const o=yield Tl(n,e,i.getWallet()),l=o.accountCap,a=i.getPackage(ve);if(a==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const c=a.publishedAt;if(t.a2b){if(t.coinA==null)throw new AggregateError("coinA is required","MissCoinA")}else if(t.coinB==null)throw new AggregateError("coinB is required","MissCoinB");const p=t.a2b?[n.object(t.poolId),t.amount,n.pure.u64(t.amountLimit),t.coinA,l,n.pure.bool(t.useFullInputCoinAmount),n.object(Je)]:[n.object(t.poolId),t.amount,n.pure.u64(t.amountLimit),t.coinB,l,n.pure.bool(t.useFullInputCoinAmount),n.object(Je)];let v=t.a2b?vn:mn;const A=se(c,gi,v),_=n.moveCall({target:A,typeArguments:[t.coinAType,t.coinBType],arguments:p});if(o.isCreate){const b=se(c,gi,ll);n.moveCall({target:b,typeArguments:[],arguments:[l]})}return{targetCoin:_[0],amountIn:_[1],amountOut:_[2],txb:n}})}function kl(t,e,n){return xt(this,null,function*(){const i=n.getPackage(ve);if(i==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const o=i.publishedAt;if(t.a2b){if(t.coinA==null)throw new AggregateError("coinA is required","MissCoinA")}else if(t.coinB==null)throw new AggregateError("coinB is required","MissCoinB");const l=t.a2b?[e.object(t.poolId),t.amount,e.pure.u64(t.amountLimit),t.coinA,e.pure.bool(t.useFullInputCoinAmount)]:[e.object(t.poolId),t.amount,e.pure.u64(t.amountLimit),t.coinB,e.pure.bool(t.useFullInputCoinAmount)],a=t.a2b?vn:mn,c=se(o,xa,a),p=e.moveCall({target:c,typeArguments:[t.coinAType,t.coinBType],arguments:l});return{targetCoin:p[0],amountIn:p[1],amountOut:p[2],txb:e}})}var lo=(t=>(t[t.MAINNET=0]="MAINNET",t[t.TESTNET=1]="TESTNET",t))(lo||{}),Bl=class{constructor(t,e,n,i,o){this.aggregatorUrl=t,this.fullNodeUrl=e,this.wallet=n,this.packages=i,this.env=o}getAggregatorUrl(){return this.aggregatorUrl}getFullNodeUrl(){return this.fullNodeUrl}getWallet(){return this.wallet}getENV(){return this.env}getPackages(){return this.packages}getPackage(t){return this.packages.find(e=>e.packageName===t)}addPackage(t){if(!t.packageName||!t.packageId||!t.publishedAt)throw new Error("Invalid package data");this.packages.push(t)}removePackageById(t){this.packages=this.packages.filter(e=>e.packageId!==t)}findPackageById(t){return this.packages.find(e=>e.packageId===t)}};function uo(t,e,n){const i=n.getPackage(ve);if(i==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const o=i.publishedAt,l=n.getENV()===0?oo:so,a=t.partner!=null&&t.partner.length>0,c=a?[e.object(l),e.object(t.poolId),t.amount,e.pure.u64(t.amountLimit),e.pure.bool(t.byAmountIn),e.pure.u128(t.sqrtPriceLimit.toString()),e.object(t.partner.toString()),e.object(Je)]:[e.object(l),e.object(t.poolId),t.amount,e.pure.u64(t.amountLimit),e.pure.bool(t.byAmountIn),e.pure.u128(t.sqrtPriceLimit.toString()),e.object(Je)];let p;a?t.a2b?p=tl:p=el:t.a2b?p=$a:p=Qa;const v=se(o,eo,p),A=e.moveCall({target:v,typeArguments:[t.coinAType,t.coinBType],arguments:c});return{targetCoin:A[0],flashReceipt:A[1],payAmount:A[2],swapedAmount:A[3],txb:e}}function co(t,e,n){return xt(this,null,function*(){const i=n.getPackage(ve);if(i==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const o=i.publishedAt,l=n.getENV()===0?oo:so,a=t.partner!=null&&t.partner.length>0;if(t.a2b){if(t.coinA==null)throw new AggregateError("coinA is required","MissCoinA")}else if(t.coinB==null)throw new AggregateError("coinB is required","MissCoinB");let c;a?t.a2b?c=[e.object(l),e.object(t.poolId),t.coinA,t.receipt,e.object(t.partner)]:c=[e.object(l),e.object(t.poolId),t.coinB,t.receipt,e.object(t.partner)]:t.a2b?c=[e.object(l),e.object(t.poolId),t.coinA,t.receipt]:c=[e.object(l),e.object(t.poolId),t.coinB,t.receipt];let p;a?t.a2b?p=il:p=ol:t.a2b?p=nl:p=rl;const v=se(o,eo,p);return{repayTargetCoin:e.moveCall({target:v,typeArguments:[t.coinAType,t.coinBType],arguments:c})[0]}})}function Nl(t,e,n,i){return xt(this,null,function*(){const o=uo(t,n,i),l=t.a2b?e:void 0,a=t.a2b?void 0:e,c={poolId:t.poolId,a2b:t.a2b,coinA:l,coinB:a,receipt:o.flashReceipt,coinAType:t.coinAType,coinBType:t.coinBType,partner:t.partner};let p;t.byAmountIn?p=o.swapedAmount:p=o.payAmount;const v=yield co(c,n,i);return{flashTargetCoin:o.targetCoin,repayTargetCoin:v.repayTargetCoin,nextInputAmount:p}})}var He=zn(xn());function Rl(t,e,n){let i=Ve;return e?i=t.mul(new He.default(je-n*je)).div(new He.default(je)):i=t.mul(new He.default(je+n*je)).div(new He.default(je)),Number(i.toString())}var Fl="79226673515401279992447579055",Ll="4295048016";function ho(t){return t?new He.default(Ll):new He.default(Fl)}function Pl(t,e,n){return new En(t).mul(En.pow(2,-64)).pow(2).mul(En.pow(10,e-n))}function Ul(t,e,n){return xt(this,null,function*(){const i=n.getPackage(ve);if(i==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const o=i.publishedAt;if(t.a2b){if(t.coinA==null)throw new AggregateError("coinA is required","MissCoinA")}else if(t.coinB==null)throw new AggregateError("coinB is required","MissCoinB");const l=n.getENV()===0?gl:pl,a=t.a2b?t.coinA:t.coinB,c=[e.object(l),t.amount,e.pure.u64(t.amountLimit),a,e.pure.bool(t.useFullInputCoinAmount)],p=t.a2b?vn:mn,v=se(o,Ya,p),A=e.moveCall({target:v,typeArguments:[t.coinAType,t.coinBType],arguments:c});return{targetCoin:A[0],amountIn:A[1],amountOut:A[2],txb:e}})}function Dl(t,e,n){return xt(this,null,function*(){const i=n.getPackage(ve);if(i==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const o=i.publishedAt;if(t.a2b){if(t.coinA==null)throw new AggregateError("coinA is required","MissCoinA")}else if(t.coinB==null)throw new AggregateError("coinB is required","MissCoinB");const l=t.a2b?"4295048016":"79226673515401279992447579055",a=t.a2b?[e.object(t.poolId),t.amount,e.pure.u64(t.amountLimit),t.coinA,e.pure.bool(t.useFullInputCoinAmount),e.pure.u128(l),e.object(Je),e.object(pi)]:[e.object(t.poolId),t.amount,e.pure.u64(t.amountLimit),t.coinB,e.pure.bool(t.useFullInputCoinAmount),e.pure.u128(l),e.object(Je),e.object(pi)],c=t.a2b?vn:mn,p=se(o,Ka,c),v=e.moveCall({target:p,typeArguments:[t.coinAType,t.coinBType,t.feeType],arguments:a});return{targetCoin:v[0],amountIn:v[1],amountOut:v[2],txb:e}})}function jl(t,e,n){return xt(this,null,function*(){const i=n.getPackage(ve);if(i==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const o=i.publishedAt;if(t.a2b){if(t.coinA==null)throw new AggregateError("coinA is required","MissCoinA")}else if(t.coinB==null)throw new AggregateError("coinB is required","MissCoinB");const l=n.getENV()===0?vl:ml,a=n.getENV()===0?wl:Ml,c=n.getENV()===0?yl:Al,p=n.getENV()===0?_l:bl,v=n.getENV()===0?Sl:Cl,A=t.a2b?t.coinA:t.coinB,_=(1-t.slippage)*1e18,b=[e.object(t.poolId),e.object(l),e.object(a),e.object(c),e.object(p),e.object(v),t.amount,e.pure.u64(t.amountLimit),e.pure.u64(t.amountOut),e.pure.u64(_),A,e.pure.bool(t.useFullInputCoinAmount)],C=t.a2b?vn:mn,k=se(o,Ga,C),B=e.moveCall({target:k,typeArguments:[t.coinAType,t.coinBType,t.lpSupplyType],arguments:b});return{targetCoin:B[0],amountIn:B[1],amountOut:B[2],txb:e}})}function ql(t,e,n,i,o,l){return xt(this,null,function*(){const a=e.routers.map(v=>v.amountIn.toString()),c=[],p=n.splitCoins(i,a);for(let v=0;v<e.routers.length;v++){const A=e.routers[v];let _,b=p[v],C=n.pure.u64(a[v]);for(let k=0;k<A.path.length;k++){const B=k===0,S=A.path[k];if(S.provider===Qi){const q={poolId:S.id,amount:C,amountLimit:"0",a2b:S.a2b,byAmountIn:!0,sqrtPriceLimit:ho(S.a2b),partner:l,coinAType:S.a2b?S.from:S.target,coinBType:S.a2b?S.target:S.from};B&&A.path.length>1;const I=yield Nl(q,b,n,o);$e(n,I.repayTargetCoin,S.from,o),_=I.flashTargetCoin,b=_,C=I.nextInputAmount}if(S.provider===Za){const q=S.a2b?b:void 0,I=S.a2b?void 0:b,T={poolId:S.id,a2b:S.a2b,amount:C,amountLimit:0,coinA:q,coinB:I,useFullInputCoinAmount:!B,coinAType:S.a2b?S.from:S.target,coinBType:S.a2b?e.targetCoinType:S.from},E=yield Ol(T,t,n,o);_=E.targetCoin,b=_,C=E.amountOut}if(S.provider===Va){const q=S.a2b?b:void 0,I=S.a2b?void 0:b,T={poolId:S.id,amount:C,amountLimit:0,a2b:S.a2b,byAmountIn:!0,coinA:q,coinB:I,useFullInputCoinAmount:!B,coinAType:S.a2b?S.from:S.target,coinBType:S.a2b?S.target:S.from},E=yield kl(T,n,o);_=E.targetCoin,b=_,C=E.amountOut}if(S.provider===Ha){const q=S.a2b?b:void 0,I=S.a2b?void 0:b,T={amount:C,amountLimit:0,a2b:S.a2b,byAmountIn:!0,coinA:q,coinB:I,useFullInputCoinAmount:!B,coinAType:S.a2b?S.from:S.target,coinBType:S.a2b?S.target:S.from},E=yield Ul(T,n,o);_=E.targetCoin,b=_,C=E.amountOut}if(S.provider===to){const q=S.a2b?b:void 0,I=S.a2b?void 0:b;let T="";if(S.extendedDetails!=null&&S.extendedDetails.turbosFeeType!=null)T=S.extendedDetails.turbosFeeType;else throw new AggregateError("Build turbos swap movecall error: ","MissTurbosFeeType");const E={poolId:S.id,amount:C,amountLimit:0,a2b:S.a2b,byAmountIn:!0,coinA:q,coinB:I,useFullInputCoinAmount:!B,coinAType:S.a2b?S.from:S.target,coinBType:S.a2b?S.target:S.from,feeType:T},Y=yield Dl(E,n,o);_=Y.targetCoin,b=_,C=Y.amountOut}if(S.provider===Or){const q=S.a2b?b:void 0,I=S.a2b?void 0:b;let T="";if(S.extendedDetails!=null&&S.extendedDetails.aftermathLpSupplyType!=null)T=S.extendedDetails.aftermathLpSupplyType;else throw new AggregateError("Build aftermath swap movecall error: ","MissAftermathLpSupplyType");const E={poolId:S.id,amount:C,amountOut:S.amountOut,amountLimit:0,a2b:S.a2b,byAmountIn:!0,coinA:q,coinB:I,useFullInputCoinAmount:!B,coinAType:S.a2b?S.from:S.target,coinBType:S.a2b?S.target:S.from,slippage:e.slippage,lpSupplyType:T},Y=yield jl(E,n,o);_=Y.targetCoin,b=_,C=Y.amountOut}}c.push(b)}return $e(n,i,e.fromCoinType,o),c})}function Wl(t,e,n,i,o){return xt(this,null,function*(){const l=t.routers.map(v=>v.amountOut.toString()),a=[],c=[],p=[];for(let v=0;v<t.routers.length;v++){const A=t.routers[v];let _=e.pure.u64(l[v]);for(let C=A.path.length-1;C>=0;C--){const k=A.path[C],B=k.a2b?k.from:k.target,S=k.a2b?k.target:k.from,q={poolId:k.id,amount:_,amountLimit:dl,a2b:k.a2b,byAmountIn:!1,sqrtPriceLimit:ho(k.a2b),partner:o,coinAType:B,coinBType:S},I=uo(q,e,i);_=I.payAmount,a.unshift(I.targetCoin),c.unshift(I.flashReceipt)}let b=n;for(let C=0;C<A.path.length;C++){const k=A.path[C],B=k.a2b?k.from:k.target,S=k.a2b?k.target:k.from,q={poolId:k.id,a2b:k.a2b,partner:o,coinA:k.a2b?b:void 0,coinB:k.a2b?void 0:b,receipt:c[C],coinAType:B,coinBType:S},I=yield co(q,e,i);b=a[C],C===0?n=I.repayTargetCoin:$e(e,I.repayTargetCoin,k.from,i),C===A.path.length-1&&p.push(b)}}return $e(e,n,t.fromCoinType,i),p})}var yn=zn(xn());function Qe(t){const e=t.indexOf("::");if(e===-1)return t;const n=t.substring(0,e),i=t.substring(e);if(!n.startsWith("0x"))return t;const o=n.substring(2);return o.length>64?t:`0x${o.padStart(64,"0")}${i}`}function Zl(t,e){t=Qe(t),e=Qe(e);const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){if(t[i]>e[i])return!0;if(t[i]<e[i])return!1}return!0}function Vl(t){return!(!t.startsWith("0x")||t.length!==66)}var qe=zn(xn());function Hl(t,e,n){return xt(this,null,function*(){var i,o,l,a,c;const{from:p,target:v,amount:A,byAmountIn:_,pools:b}=e,C=Qe(p),k=Qe(v),B=new Di.Transaction,S=Zl(C,k),q=n.getPackage(za);if(q==null)throw new AggregateError("Aggregator package not set","MissAggregatorPackage");const I=q.publishedAt,T=S?C:k,E=S?k:C,Y=[T,E];for(let d=0;d<b.length;d++){const M=[B.object(b[d]),B.pure.bool(S),B.pure.bool(_),B.pure.u64(A.toString())];B.moveCall({target:`${I}::fetcher_script::calculate_swap_result`,arguments:M,typeArguments:Y})}if(!Vl(n.getWallet()))throw new AggregateError("Aggregator package not set","InvalidWallet");const z=yield t.devInspectTransactionBlock({transactionBlock:B,sender:n.getWallet()});if(z.error!=null)throw new AggregateError("Aggregator package not set","SimulateError");const x=(i=z.events)==null?void 0:i.filter(d=>d.type.includes("CalculatedSwapResultEvent"));if(x.length===0||x.length!==b.length)throw new AggregateError("Simulate event result error","simulateEventError");let j=_?Ve:fl,F=0;for(let d=0;d<x.length;d+=1)if(!x[d].parsedJson.data.is_exceed)if(e.byAmountIn){const M=new qe.BN(x[d].parsedJson.data.amount_out);M.gt(j)&&(F=d,j=M)}else{const M=new qe.BN(x[d].parsedJson.data.amount_out);M.lt(j)&&(F=d,j=M)}const R=x[F].parsedJson.data,$=R.step_results[0].current_sqrt_price,[U,tt]=yield Promise.all([t.getCoinMetadata({coinType:T}).then(d=>d==null?void 0:d.decimals),t.getCoinMetadata({coinType:E}).then(d=>d==null?void 0:d.decimals)]);if(U==null||tt==null)throw new AggregateError("Simulate event result error","CannotGetDecimals");const w=Pl($,U,tt),r={amountIn:new qe.BN((o=R.amount_in)!=null?o:0),amountOut:new qe.BN((l=R.amount_out)!=null?l:0),routes:[{path:[{id:b[F],a2b:S,provider:Qi,from:C,target:k,feeRate:0,amountIn:0,amountOut:0}],amountIn:new qe.BN((a=R.amount_in)!=null?a:0),amountOut:new qe.BN((c=R.amount_out)!=null?c:0),initialPrice:w}],insufficientLiquidity:!1};return{isExceed:R.is_exceed,routeData:r}})}var zl=class{constructor(t){this.config=t,this.client=new Rs.SuiClient({url:t.getFullNodeUrl()}),this.wallet=t.getWallet(),this.allCoins=[]}getAllCoins(){return xt(this,null,function*(){let t=null,e=50;const n=[];for(;;){const i=yield this.client.getAllCoins({owner:this.wallet,cursor:t,limit:e});for(const o of i.data)n.push({coinAddress:Ye(o.coinType).source_address,coinObjectId:o.coinObjectId,balance:BigInt(o.balance)});if(i.data.length<e)break;t=i.data[e-1].coinObjectId}return n})}findRouter(t){return xt(this,null,function*(){const{from:e,target:n,amount:i,byAmountIn:o,depth:l,splitAlgorithm:a,splitFactor:c,splitCount:p,providers:v}=t,A=Qe(e),_=Qe(n);let b=this.config.getAggregatorUrl()+`/find_routes?from=${A}&target=${_}&amount=${i.toString()}&by_amount_in=${o}`;l&&(b+=`&depth=${l}`),a&&(b+=`&split_algorithm=${a}`),c&&(b+=`&split_factor=${c}`),p&&(b+=`&split_count=${p}`),v&&v.length>0&&(b+=`&providers=${v.join(",")}`);const C=yield fetch(b);if(!C.ok)return{amountIn:Ve,amountOut:Ve,routes:[],insufficientLiquidity:!1,error:{code:10001,msg:vi(10001)}};const k=yield C.json();if(k.data!=null)return xl(k.data);const B=k.msg==="liquidity is not enough";return{amountIn:Ve,amountOut:Ve,routes:[],insufficientLiquidity:B,error:{code:10003,msg:vi(10003)}}})}swapInPools(t){return xt(this,null,function*(){let e;try{e=yield Hl(this.client,t,this.config)}catch(n){return console.error("swapInPools error:",n),null}return e})}routerSwap(t){return xt(this,null,function*(){const{routers:e,amountIn:n,amountOut:i,byAmountIn:o,slippage:l,fromCoinType:a,targetCoinType:c,partner:p,isMergeTragetCoin:v,refreshAllCoins:A}=t,_=Rl(o?i:n,o,l),b=new Di.Transaction;(A||this.allCoins.length===0)&&(this.allCoins=yield this.getAllCoins());const C=this.allCoins;let k=[];if(o){const S=pr(b,C,BigInt(n.toString()),a).targetCoin,q=yield ql(this.client,t,b,S,this.config,p),I=Il(b,q,c,_,this.config);k.push(I)}else{const B=pr(b,C,BigInt(_),a).targetCoin,S=yield Wl(t,b,B,this.config,p);k.push(...S)}if(v){const B=pr(b,C,BigInt(0),c);b.mergeCoins(B.targetCoin,k),B.isMintZeroCoin&&$e(b,B.targetCoin,c,this.config)}else{if(k.length>1){const B=b.makeMoveVec({elements:k.slice(1)});b.moveCall({target:se(Zr.SUI_FRAMEWORK_ADDRESS,ro,io),typeArguments:[c],arguments:[k[0],B]})}$e(b,k[0],c,this.config)}return b})}signAndExecuteTransaction(t,e){return xt(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0,showInput:!0,showBalanceChanges:!0}})})}devInspectTransactionBlock(t){return xt(this,null,function*(){return yield this.client.devInspectTransactionBlock({transactionBlock:t,sender:this.wallet})})}sendTransaction(t,e){return xt(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:t,signer:e})})}};function xl(t){return{amountIn:new yn.default(t.amount_in.toString()),amountOut:new yn.default(t.amount_out.toString()),insufficientLiquidity:!1,routes:t.routes.map(e=>({path:e.path.map(n=>{var i,o;let l;n.provider===Or&&(l=n.extended_details.aftermath_pool_flatness===0?"v2":"v3");let a;return(n.provider===to||n.provider===Or)&&(a={aftermathLpSupplyType:(i=n.extended_details)==null?void 0:i.aftermath_lp_supply_type,turbosFeeType:(o=n.extended_details)==null?void 0:o.turbos_fee_type}),{id:n.id,a2b:n.direction,provider:n.provider,from:n.from,target:n.target,feeRate:n.fee_rate,amountIn:n.amount_in,amountOut:n.amount_out,extendedDetails:a,version:l}}),amountIn:new yn.default(e.amount_in.toString()),amountOut:new yn.default(e.amount_out.toString()),initialPrice:new En(e.initial_price.toString())}))}}var Yl=zl,Kl=Bl,mi=lo;const Gl=Jo(),fo=Gl.public.appEnv;console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:14 ~ env:",fo);function Xl(){const{tokensObj:t,setTokensObj:e}=_i(),n=Ko(),i=Zt(()=>n),o=Zn(),l=Zt(()=>o),a=ye.Sui.aggregatorv2Url,c=localStorage.getItem("Sui-currentRpclocal4")||ye.Sui.fullRpcUrl,p=ye.Sui.simulationAccount,v={packageName:"aggregator",packageId:ye.Sui.aggregatorV2.package_id,publishedAt:ye.Sui.aggregatorV2.published_at},A={packageName:"integrate",packageId:ye.Sui.integrate.package_id,publishedAt:ye.Sui.integrate.published_at},_=Zt(()=>new Kl(a,c,i.value.address||p,[v,A],fo=="test"?mi.TESTNET:mi.MAINNET)),b=Zt(()=>new Yl(_.value)),C=as(),k=Zt(()=>C),B=F=>({transactionBlock:F,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),S=(F,R)=>R.minus(F).div(R).mul(100),q=(F,R,$)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:71 ~ getPriceImpact ~ routerData:",F);const{routes:U}=F;let tt=ie(0);return U==null||U.forEach(w=>{const r=ie(w.amountOut).div(Math.pow(10,$)),u=ie(w.amountIn).div(Math.pow(10,R)),d=r.div(u),M=ie(w==null?void 0:w.amountIn).div(F==null?void 0:F.amountIn),y=S(d,ie(w.initialPrice.toString())).mul(new yi(M));tt=tt.add(y)}),Number(Go(tt.toNumber(),2))},I=F=>ni(F)==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":ni(F),T=(F,R,$)=>{var tt,w,r;const U=F.filter(u=>{const d=I(R),M=I($),y=I(u==null?void 0:u.base),f=I(u==null?void 0:u.quote);return d===y&&M===f||M===y&&d===f});return(U==null?void 0:U.length)>0?(Object.values((tt=U==null?void 0:U[0])==null?void 0:tt.addressMap),Array.from((r=(w=U==null?void 0:U[0])==null?void 0:w.addressMap)==null?void 0:r.values())):null},E=F=>F==null?void 0:F.map(R=>{var $,U;return{...R,amountIn:($=R==null?void 0:R.amountIn)==null?void 0:$.toString(),amountOut:(U=R==null?void 0:R.amountOut)==null?void 0:U.toString(),initialPrice:(R==null?void 0:R.initial_price)||(R==null?void 0:R.initialPrice)}}),Y=async(F,R,$,U,tt,w,r)=>{var u,d,M,y,f,h,g,s,m,L,P,N,Z,H,G,lt,X,et,nt,rt,it,Yt,st,ut,Jt,gt,pt,Be,ft,vt,me,mt,wt;console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:131 ~ getFindRouter ~ index?.value?.liquiditySourceList:",(u=l==null?void 0:l.value)==null?void 0:u.liquiditySourceList),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:131 ~ getFindRouter ~ index?.value?.includeRoutes:",(d=l==null?void 0:l.value)==null?void 0:d.includeRoutes);try{const ae=(y=(M=l==null?void 0:l.value)==null?void 0:M.liquiditySourceList)==null?void 0:y.filter(ne=>(ne==null?void 0:ne.status)==="open"),at=(f=ae==null?void 0:ae.filter(ne=>{var dt;return((dt=ne==null?void 0:ne.name)==null?void 0:dt.toUpperCase())!=="CETUS"}))==null?void 0:f.map(ne=>{var dt;return(dt=ne==null?void 0:ne.name)==null?void 0:dt.toUpperCase()}),Q={from:I((h=F==null?void 0:F.value)==null?void 0:h.address),target:I((g=R==null?void 0:R.value)==null?void 0:g.address),amount:new we($),byAmountIn:U,depth:3,splitAlgorithm:null,splitFactor:null,splitCount:((s=l==null?void 0:l.value)==null?void 0:s.includeRoutes)==="open"?null:1,providers:["CETUS",...at]};console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:145 ~ getFindRouter ~ findRouterParams:",Q);const ot=await b.value.findRouter(Q);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:163 ~ function ~ res:",ot),((m=ot==null?void 0:ot.error)==null?void 0:m.code)==10001)return{...ot,id:r};if(ot!=null&&ot.insufficientLiquidity)return{...ot,id:r};if(!(ot!=null&&ot.routes)||((L=ot==null?void 0:ot.routes)==null?void 0:L.length)===0)throw Error("Aggregator no router");console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:156 ~ getFindRouter ~ findRouter res Before formatting:",JSON.stringify(ot,null,2));const ct={amountIn:(P=ot==null?void 0:ot.amountIn)==null?void 0:P.toString(),amountOut:(N=ot==null?void 0:ot.amountOut)==null?void 0:N.toString(),routes:E(ot==null?void 0:ot.routes)};console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:159 ~ getFindRouter ~ findRouter formatRes:",JSON.stringify(ct,null,2));const yt=q(ct,(Z=F==null?void 0:F.value)==null?void 0:Z.decimals,(H=R==null?void 0:R.value)==null?void 0:H.decimals);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:170 ~ getFindRouter ~ priceImpact:",yt),{...ct,priceImpact:yt,fromCoinAddress:(G=F==null?void 0:F.value)==null?void 0:G.address,toCoinAddress:(lt=R==null?void 0:R.value)==null?void 0:lt.address,id:r}}catch(ae){try{console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ error:",ae),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ swapRouterStore?.value?.poolListGroupByTokenAB:",(X=k==null?void 0:k.value)==null?void 0:X.poolListGroupByTokenAB);const at=T((et=k==null?void 0:k.value)==null?void 0:et.poolListGroupByTokenAB,(nt=F==null?void 0:F.value)==null?void 0:nt.address,(rt=R==null?void 0:R.value)==null?void 0:rt.address);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ pools:",at),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ params:",{from:I((it=F==null?void 0:F.value)==null?void 0:it.address),target:I((Yt=R==null?void 0:R.value)==null?void 0:Yt.address),amount:$,byAmountIn:U,pools:at}),at){const Q=await b.value.swapInPools({from:I((st=F==null?void 0:F.value)==null?void 0:st.address),target:I((ut=R==null?void 0:R.value)==null?void 0:ut.address),amount:new we($),byAmountIn:U,pools:at});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ res:",Q),Q){const ot={isExceed:Q==null?void 0:Q.isExceed,amountIn:(gt=(Jt=Q==null?void 0:Q.routeData)==null?void 0:Jt.amountIn)==null?void 0:gt.toString(),amountOut:(Be=(pt=Q==null?void 0:Q.routeData)==null?void 0:pt.amountOut)==null?void 0:Be.toString(),routes:E((ft=Q==null?void 0:Q.routeData)==null?void 0:ft.routes)};console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ forMatRes:",ot);const ct=q(ot,(vt=F==null?void 0:F.value)==null?void 0:vt.decimals,(me=R==null?void 0:R.value)==null?void 0:me.decimals);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ priceImpact:",ct),{...ot,priceImpact:ct,fromCoinAddress:(mt=F==null?void 0:F.value)==null?void 0:mt.address,toCoinAddress:(wt=R==null?void 0:R.value)==null?void 0:wt.address,id:r}}return null}return null}catch(at){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ e:",at),null}}},z=async(F,R,$,U,tt)=>{var w,r;try{const u=F.routes.map(y=>({...y,amountIn:new we(y.amountIn),amountOut:new we(y.amountOut),routes:y.path.map(f=>({...f,amountIn:new we(f.amountIn),amountOut:new we(f.amountOut)}))}));console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:246 ~ getRouterSwapPayload ~ client:",b);const d={routers:u,amountIn:new we(F.amountIn),amountOut:new we(F.amountOut),byAmountIn:R,slippage:$,fromCoinType:I((w=U==null?void 0:U.value)==null?void 0:w.address),targetCoinType:I((r=tt==null?void 0:tt.value)==null?void 0:r.address),partner:void 0,isMergeTragetCoin:!0,refreshAllCoins:!0};console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:258 ~ getRouterSwapPayload ~ routerParams:",JSON.stringify(d,null,2));const M=await b.value.routerSwap(d);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:122 ~ function ~ res:",M),B(M)}catch(u){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:49 ~ function ~ error:",u)}},{getTokenBySymbol:x}=ls("Sui");return{getFindRouter:Y,getRouterSwapPayload:z,getTokenInfo:async F=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:288 ~ getTokenInfo ~ address:",F),t[F])return t[F];{const R=await x(t,F),$={[F]:R},U={...t,...$};e(U);try{localStorage.setItem("SuiTokenObj",JSON.stringify(U))}catch(tt){console.log("ðŸš€ ~ file: useSuiAggregator.ts:295 ~ getTokenInfo ~ err:",tt)}return R}}}}const Bc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",Nc="data:image/png;base64,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",Rc="data:image/png;base64,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",Fc=""+globalThis.__publicAssetsURL("sui-image/within-error.png"),Jl=""+globalThis.__publicAssetsURL("sui-image/icon_Router@2x.png"),ke=t=>(jn("data-v-f4451afa"),t=t(),qn(),t),$l={class:"aggregator-setting-content"},Ql={key:0,class:"liquidity-source"},tu={class:"liquidity-source-title"},eu={class:"title-left"},nu=ke(()=>D("svg",{"aria-hidden":"true",class:"icon"},[D("use",{"xlink:href":"#icon-icon_liquidity"})],-1)),ru=ke(()=>D("span",null,"Liquidity Sources",-1)),iu=ke(()=>D("div",{class:"price-reference-text"}," Your trade is routed through one or more of these liquidity sources. ",-1)),ou=ke(()=>D("svg",{"aria-hidden":"true",class:"icon"},[D("use",{"xlink:href":"#icon-icon_tips"})],-1)),su={class:"title-right plus-switch plus-liquidity-switch"},au=ke(()=>D("span",null,"Select all",-1)),lu={class:"liquidity-source-content"},uu=ke(()=>D("div",{class:"liquidity-source-text"},"Disable/Enable Liquidity Sources",-1)),cu={class:"liquidity-source-list"},hu={class:"left"},fu={alt:""},du={class:"right plus-switch plus-liquidity-switch"},gu={key:1,class:"no-allowed"},pu={class:"routing-preference"},vu=ke(()=>D("div",{class:"routing-preference-title"},[D("img",{src:Jl,alt:""}),D("span",null,"Routing Preference")],-1)),mu={class:"routing-preference-content"},wu={class:"routing-preference-list"},Mu={class:"routing-preference-item plus-switch plus-liquidity-switch"},yu=ke(()=>D("span",null,"Support order split",-1)),Au={class:"action-btn"},_u=Dn({__name:"aggregator-setting-modal",emits:["close","modalConfirm"],setup(t,{emit:e}){const n=e,i=Zn(),o=Zt(()=>i),l=Zt(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: aggregator-setting-modal.vue:121 ~ constliquiditySourceList:any=computed ~ store.value.liquiditySourceList:",o.value.liquiditySourceList),o.value.liquiditySourceList)),a=Zt(()=>o.value.includeRoutes),c=Zt(()=>o.value.supportDepth3),p=Se([]),v=Se(),A=Se(),_=Se(),b=I=>{const T={};I.forEach(E=>{T[E.name]=E.status}),_.value=T};on(()=>[l.value,a.value],([I,T])=>{I&&I.length>0&&(p.value=I,console.log("ðŸš€ ~ file: aggregator-setting-modal.vue:144 ~ liquiditySourceList:",I),b(I)),T&&(v.value=T)},{immediate:!0,deep:!0}),on(()=>c.value,I=>{I&&(A.value=I)},{immediate:!0});const C=I=>{v.value=I},k=I=>{const T=_.value[I.name]=="open"?"close":"open";_.value[I.name]=T},B=()=>{const I=p.value.map(Y=>({...Y,status:_.value[Y.name]}));console.log("ðŸš€ðŸš€ðŸš€ ~ file: aggregator-setting-modal.vue:192 ~ result ~ result:",I);const T=I.filter(Y=>Y.status=="open"||Y.status=="Open");T&&T.length>1?localStorage.setItem("plusChecked1","open"):localStorage.setItem("plusChecked1","close"),i.setAggregatorSetting(I,v.value,A.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: aggregator-setting-modal.vue:195 ~ confirm ~ result:",I);const E=new Event("updateSwapParams");window.dispatchEvent(E),n("modalConfirm",I)},S=Se(!0),q=I=>{S.value=!S.value,p.value.forEach(T=>{const E=(T==null?void 0:T.name)=="Cetus"||I?"open":"close";_.value[T==null?void 0:T.name]=E})};return on(_.value,I=>{I&&(console.log("ðŸš€ ~ watch ~ newValue:",I),Object.keys(I).filter(E=>E!=="Cetus").every(E=>I[E]==="open")?S.value=!0:S.value=!1)},{immediate:!0}),(I,T)=>{const E=ts,Y=es,z=ns,x=$o("image");return Ht(),kn(sn(Ai),{title:"Customize Routing",footer:null,visible:!0,width:"420px",onCancel:T[3]||(T[3]=j=>I.$emit("close"))},{default:Le(()=>[D("div",$l,[p.value&&p.value.length>0?(Ht(),te("div",Ql,[D("div",tu,[D("div",eu,[nu,ru,Wt(E,{"overlay-class-name":"price-impact-tooltip"},{title:Le(()=>[iu]),default:Le(()=>[ou]),_:1})]),D("div",su,[au,Wt(Y,{class:"liquidity-switch",checked:S.value,onClick:T[0]||(T[0]=j=>{q(j)})},null,8,["checked"])])]),D("div",lu,[uu,D("div",cu,[(Ht(!0),te(_n,null,bn(p.value,j=>(Ht(),te("div",{key:j.name,class:"liquidity-source-item"},[D("div",hu,[Qo(D("img",fu,null,512),[[x,j.logo]]),D("span",null,Qt(j.name),1)]),D("div",du,[j.name!=="Cetus"?(Ht(),kn(Y,{key:0,checked:_.value[j.name]=="open",onClick:F=>k(j)},null,8,["checked","onClick"])):(Ht(),te("div",gu,[Wt(Y,{class:"lock-switch",checked:!0})]))])]))),128))])])])):wr("",!0),D("div",pu,[vu,D("div",mu,[D("div",wu,[D("div",Mu,[yu,Wt(Y,{checked:v.value=="open",onChange:T[1]||(T[1]=j=>C(v.value=="open"?"close":"open"))},null,8,["checked"])])])])]),D("div",Au,[Wt(z,{class:"max-btn cancels-btn",onClick:T[2]||(T[2]=j=>I.$emit("close"))},{default:Le(()=>[ri("Cancel")]),_:1}),Wt(z,{class:"confirm-btn",onClick:B},{default:Le(()=>[ri("Confirm")]),_:1})])])]),_:1})}}});const Lc=Wn(_u,[["__scopeId","data-v-f4451afa"]]),bu=Dn({props:{text:{type:String,default:""}},setup(t){const{t:e}=rs(),{$notify:n}=is();return{handleCopy:o=>{if(navigator.clipboard)navigator.clipboard.writeText(o);else{const l=document.createElement("input");l.readOnly=!0,document.body.appendChild(l),l.value=o,l.select(),document.execCommand("Copy"),document.body.removeChild(l)}n.success({icon:wn("svg",{class:{icon:!0},"aria-hidden":!0},[wn("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:wn("div",{class:"notification-title"},[wn("span",{innerHTML:e("tips.copySuccess")},null)]),class:"ant-notification-copy"})}}}});const Su=t=>(jn("data-v-58075ffa"),t=t(),qn(),t),Cu=Su(()=>D("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),Iu=[Cu];function Tu(t,e,n,i,o,l){return Ht(),te("svg",{class:"copy-icon","aria-hidden":"true",onClick:e[0]||(e[0]=a=>t.handleCopy(t.text))},Iu)}const Eu=Wn(bu,[["render",Tu],["__scopeId","data-v-58075ffa"]]),Ou=Dn({props:{type:{type:String,default:""},value:{type:String,default:""}},setup(t){const e=Zn(),n=Zt(()=>e),i=Zt(()=>n.value.currentExplorer);return{getExplorerUrl:bi,currentExplorer:i}}});const ku=t=>(jn("data-v-881ee3f4"),t=t(),qn(),t),Bu=["href"],Nu=ku(()=>D("svg",{class:"icon icon-up","aria-hidden":"true"},[D("use",{"xlink:href":"#icon-icon_link"})],-1)),Ru=[Nu];function Fu(t,e,n,i,o,l){return Ht(),te("a",{target:"_blank",class:"jump-icon",href:("getExplorerUrl"in t?t.getExplorerUrl:sn(bi))(t.currentExplorer,t.type,t.value)},Ru,8,Bu)}const Lu=Wn(Ou,[["render",Fu],["__scopeId","data-v-881ee3f4"]]),Pu={CETUS:"Cetus",DEEPBOOK:"DeepBook",KRIYA:"Kriya",FLOWX:"FlowX",TURBOS:"Turbos",AFTERMATH:"Aftermath"},Uu=Dn({components:{Modal:Ai,CoinImg:us,CopyBtn:Eu,ExplorerLink:Lu},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(t){const{getTokenInfo:e}=Xl(),n=_i(),i=Zt(()=>n==null?void 0:n.tokensObj),o=Zn(),l=Zt(()=>o==null?void 0:o.liquiditySourceObj),a=Se(!1);os(()=>{a.value=!0});const c=Se([]),p=Se({}),v=async I=>{for(let T=0;T<(I==null?void 0:I.length);T++){const E=I[T].path;for(let Y=0;Y<(E==null?void 0:E.length);Y++){const z=E[Y];console.log(z,"path##");const x=await e(z==null?void 0:z.from),j=await e(z==null?void 0:z.target),F=(x==null?void 0:x.logoURI)||(x==null?void 0:x.logo_url)||"",R=(j==null?void 0:j.logoURI)||(j==null?void 0:j.logo_url)||"";p.value[z==null?void 0:z.from]={...x,coinImg:F},p.value[z==null?void 0:z.target]={...j,coinImg:R},console.log(p.value,"##routerTokenMap.value")}}console.log("ðŸš€ðŸš€ðŸš€ ~ file: router-modal.vue:189 ~ setup ~ routerTokenMap:",p)};on(()=>{var I;return[a.value,(I=t==null?void 0:t.suiPreSwapdata)==null?void 0:I.routes]},([I,T])=>{I&&(A(T),v(T))},{immediate:!0,deep:!0});const A=async I=>{var E,Y,z,x,j;const T=[];for(let F=0;F<(I==null?void 0:I.length);F++){const R=I[F],$=[];for(let tt=0;tt<((E=R==null?void 0:R.path)==null?void 0:E.length);tt++){const w=R==null?void 0:R.path[tt];console.log("ðŸš€ ~ file: router-modal.vue:241 ~ path ~ p:",w);const r=(w==null?void 0:w.feeRate)&&Number(w==null?void 0:w.feeRate)&&ie(w==null?void 0:w.feeRate).mul(100).toString()+"%"||void 0,u=r;$.push({poolAddress:w==null?void 0:w.id,fee:r,provider:Pu[w==null?void 0:w.provider],providerImg:(x=(z=l==null?void 0:l.value)==null?void 0:z[(Y=w==null?void 0:w.provider)==null?void 0:Y.toUpperCase()])==null?void 0:x.logo,from:w==null?void 0:w.from,to:w==null?void 0:w.target,displayFeeOrVersion:u})}const U=Xo(ie(R==null?void 0:R.amountIn).div((j=t==null?void 0:t.suiPreSwapdata)==null?void 0:j.amountIn).mul(100).toString(),1);T.push({path:$,proportion:U,amountOut:R==null?void 0:R.amountOut})}if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: router-modal.vue:182 ~ routerList ~ result:",T),(T==null?void 0:T.length)<2){c.value=T;return}c.value=T==null?void 0:T.sort((F,R)=>ie(F==null?void 0:F.amountOut).minus(R==null?void 0:R.amountOut).lt(0))};on(()=>[c.value],([I])=>{console.log("ðŸš€ ~ file: router-modal.vue:284 ~ watch ~ routerList:",I)});const _=Zt(()=>{var I,T;return((I=t==null?void 0:t.fromCoin)==null?void 0:I.logoURI)||((T=t==null?void 0:t.fromCoin)==null?void 0:T.logo_url)||""}),b=Zt(()=>{var I,T;return((I=t==null?void 0:t.toCoin)==null?void 0:I.logoURI)||((T=t==null?void 0:t.toCoin)==null?void 0:T.logo_url)||""}),C=Zt(()=>{var x;const I=[];let T=ie(0);(x=c==null?void 0:c.value)==null||x.forEach((j,F)=>{T=T.plus(j.proportion);const R=j.proportion.split(".");I.push({value:j.proportion,int:R[0],decimal:R[1],pathIndex:F})});let E=ie(100).minus(T).toNumber();const Y=I.sort((j,F)=>Number(F.decimal)-Number(j.decimal));if(E)for(let j=0;j<Y.length&&E;j++)Y[j].value=ie(Y[j].value).plus(.1).toString(),E=ie(E).minus(.1).toNumber();return console.log("ðŸš€ðŸš€ðŸš€ ~ file: router-modal.vue:182 ~ routerList ~ sortByDecimalPart:",Y),Object.fromEntries(Y.map(j=>[j.pathIndex,j]))}),k=Zt(()=>{var I;return((I=c==null?void 0:c.value)==null?void 0:I.length)===1}),B=Zt(()=>{var T;const I={};return(T=c==null?void 0:c.value)==null||T.forEach(E=>{var Y;(Y=E==null?void 0:E.path)==null||Y.forEach(z=>{var x,j,F;I[z==null?void 0:z.provider]=(F=(j=l==null?void 0:l.value)==null?void 0:j[(x=z==null?void 0:z.provider)==null?void 0:x.toUpperCase()])==null?void 0:F.logo})}),Object.values(I)}),S=Zt(()=>{var I,T,E,Y,z,x,j,F,R,$,U,tt,w;if(((T=(I=t==null?void 0:t.suiPreSwapdata)==null?void 0:I.routes)==null?void 0:T.length)===1)if(((x=(z=(Y=(E=t==null?void 0:t.suiPreSwapdata)==null?void 0:E.routes)==null?void 0:Y[0])==null?void 0:z.path)==null?void 0:x.length)>1){const r=[(j=t==null?void 0:t.fromCoin)==null?void 0:j.symbol];return(U=($=(R=(F=t==null?void 0:t.suiPreSwapdata)==null?void 0:F.routes)==null?void 0:R[0])==null?void 0:$.path)==null||U.forEach((u,d)=>{var M,y;r.push((y=(M=i==null?void 0:i.value)==null?void 0:M[u==null?void 0:u.target])==null?void 0:y.symbol)}),r==null?void 0:r.join(" > ")}else return`${(tt=t==null?void 0:t.fromCoin)==null?void 0:tt.symbol} > ${(w=t==null?void 0:t.toCoin)==null?void 0:w.symbol}`;return""}),q=Zt(()=>{var I;return(I=c==null?void 0:c.value)==null?void 0:I.length});return{fromCoinImg:_,toCoinImg:b,routerList:c,proportionObj:C,isSingleRoute:k,onlyOneRouteText:S,routeNum:q,providerList:B,addCommom:mr,addressAbridge:Mi,routerTokenMap:p}}});const zr=t=>(jn("data-v-eed0a95c"),t=t(),qn(),t),Du=zr(()=>D("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[D("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ju={class:"swap-router-modal-content"},qu={class:"simple-path"},Wu={key:0},Zu={key:1},Vu={class:"provider-img-list"},Hu=zr(()=>D("div",null,null,-1)),zu={class:"top"},xu={class:"from-token"},Yu={class:"num"},Ku={class:"symbol"},Gu={class:"to-token"},Xu={class:"num"},Ju={class:"symbol"},$u={class:"from-coin-img"},Qu={class:"to-coin-img"},tc={class:"router-box"},ec={class:"proportion"},nc={class:"pools"},rc={class:"coin-pair"},ic={class:"name"},oc={key:0,class:"fee"},sc={key:1,class:"pool-detail-box"},ac={class:"pool-info"},lc=zr(()=>D("div",{class:"title"},"Pool Address",-1)),uc={class:"right"},cc={class:"pool-address"},hc={class:"coin-info"},fc={class:"symbol-and-name"},dc={class:"symbol"},gc={class:"name"},pc={class:"right"},vc={class:"coin-info"},mc={class:"symbol-and-name"},wc={class:"symbol"},Mc={class:"name"},yc={class:"right"};function Ac(t,e,n,i,o,l){const a=Mn("CoinImg"),c=Mn("CopyBtn"),p=Mn("ExplorerLink"),v=Mn("Modal");return Ht(),kn(v,{class:"swap-route-modal",title:"Route",width:"880px",visible:!0,footer:null,onCancel:e[0]||(e[0]=A=>t.$emit("onClose"))},{closeIcon:Le(()=>[Du]),default:Le(()=>{var A,_,b,C,k,B;return[D("div",ju,[D("div",qu,[t.routeNum===1?(Ht(),te("span",Wu,Qt(t.onlyOneRouteText),1)):(Ht(),te("span",Zu,Qt(t.routeNum)+" Steams",1)),D("div",Vu,[(Ht(!0),te(_n,null,bn(t.providerList,S=>(Ht(),kn(a,{key:S,url:S},null,8,["url"]))),128))]),Hu]),D("div",zu,[D("div",xu,[Wt(a,{url:(A=t.fromCoin)==null?void 0:A.logo_url},null,8,["url"]),D("span",Yu,Qt(("addCommom"in t?t.addCommom:sn(mr))(t.fromCoinAmount)),1),D("span",Ku,Qt((_=t.fromCoin)==null?void 0:_.symbol),1)]),D("div",Gu,[D("span",Xu,Qt(("addCommom"in t?t.addCommom:sn(mr))(t.toCoinAmount)),1),D("span",Ju,Qt((b=t.toCoin)==null?void 0:b.symbol),1),Wt(a,{url:(C=t.toCoin)==null?void 0:C.logo_url},null,8,["url"])])]),D("div",{class:ss(t.isSingleRoute?"router-content is-single":"router-content")},[D("div",$u,[Wt(a,{url:(k=t.fromCoin)==null?void 0:k.logo_url},null,8,["url"])]),D("div",Qu,[Wt(a,{url:(B=t.toCoin)==null?void 0:B.logo_url},null,8,["url"])]),D("div",tc,[(Ht(!0),te(_n,null,bn(t.routerList,(S,q)=>{var I,T;return Ht(),te("div",{key:`route-${q}`,class:"router"},[D("div",ec,Qt((T=(I=t.proportionObj)==null?void 0:I[q])==null?void 0:T.value)+"%",1),D("div",nc,[(Ht(!0),te(_n,null,bn(S.path,(E,Y)=>{var z,x,j,F,R,$,U,tt,w,r,u,d;return Ht(),te("div",{key:`route-pool-${Y}`,class:"pool-item"},[D("div",rc,[Wt(a,{url:t.routerTokenMap&&((z=t.routerTokenMap[E.from])==null?void 0:z.coinImg)},null,8,["url"]),Wt(a,{url:t.routerTokenMap&&((x=t.routerTokenMap[E.to])==null?void 0:x.coinImg)},null,8,["url"])]),D("span",ic,Qt(E==null?void 0:E.provider),1),E!=null&&E.displayFeeOrVersion?(Ht(),te("span",oc,Qt(E==null?void 0:E.displayFeeOrVersion),1)):wr("",!0),t.routerTokenMap&&t.routerTokenMap[E.from]&&t.routerTokenMap&&t.routerTokenMap[E.to]?(Ht(),te("div",sc,[D("div",ac,[lc,D("div",uc,[D("span",cc,Qt(("addressAbridge"in t?t.addressAbridge:sn(Mi))(E==null?void 0:E.poolAddress)),1),Wt(c,{text:E==null?void 0:E.poolAddress},null,8,["text"]),Wt(p,{type:"poolAddress",value:E==null?void 0:E.poolAddress},null,8,["value"])])]),D("div",hc,[Wt(a,{url:t.routerTokenMap&&((j=t.routerTokenMap[E.from])==null?void 0:j.coinImg)},null,8,["url"]),D("div",fc,[D("div",dc,Qt(t.routerTokenMap&&((F=t.routerTokenMap[E.from])==null?void 0:F.symbol)),1),D("div",gc,Qt(t.routerTokenMap&&((R=t.routerTokenMap[E.from])==null?void 0:R.name)),1)]),D("div",pc,[Wt(c,{text:t.routerTokenMap&&(($=t.routerTokenMap[E.from])==null?void 0:$.address)},null,8,["text"]),Wt(p,{type:"coin",value:t.routerTokenMap&&((U=t.routerTokenMap[E.from])==null?void 0:U.address)},null,8,["value"])])]),D("div",vc,[Wt(a,{url:t.routerTokenMap&&((tt=t.routerTokenMap[E.to])==null?void 0:tt.coinImg)},null,8,["url"]),D("div",mc,[D("div",wc,Qt(t.routerTokenMap&&((w=t.routerTokenMap[E.to])==null?void 0:w.symbol)),1),D("div",Mc,Qt(t.routerTokenMap&&((r=t.routerTokenMap[E.to])==null?void 0:r.name)),1)]),D("div",yc,[Wt(c,{text:t.routerTokenMap&&((u=t.routerTokenMap[E.to])==null?void 0:u.address)},null,8,["text"]),Wt(p,{type:"coin",value:t.routerTokenMap&&((d=t.routerTokenMap[E.to])==null?void 0:d.address)},null,8,["value"])])])])):wr("",!0)])}),128))])])}),128))])],2)])]}),_:1})}const Pc=Wn(Uu,[["render",Ac],["__scopeId","data-v-eed0a95c"]]);var xr={};(function t(e,n,i,o){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!e.OffscreenCanvas)return!1;var f=new OffscreenCanvas(1,1),h=f.getContext("2d");h.fillRect(0,0,1,1);var g=f.transferToImageBitmap();try{h.createPattern(g,"no-repeat")}catch{return!1}return!0}();function p(){}function v(f){var h=n.exports.Promise,g=h!==void 0?h:e.Promise;return typeof g=="function"?new g(f):(f(p,p),null)}var A=function(f,h){return{transform:function(g){if(f)return g;if(h.has(g))return h.get(g);var s=new OffscreenCanvas(g.width,g.height),m=s.getContext("2d");return m.drawImage(g,0,0),h.set(g,s),s},clear:function(){h.clear()}}}(c,new Map),_=function(){var f=Math.floor(16.666666666666668),h,g,s={},m=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(L){var P=Math.random();return s[P]=requestAnimationFrame(function N(Z){m===Z||m+f-1<Z?(m=Z,delete s[P],L()):s[P]=requestAnimationFrame(N)}),P},g=function(L){s[L]&&cancelAnimationFrame(s[L])}):(h=function(L){return setTimeout(L,f)},g=function(L){return clearTimeout(L)}),{frame:h,cancel:g}}(),b=function(){var f,h,g={};function s(m){function L(P,N){m.postMessage({options:P||{},callback:N})}m.init=function(N){var Z=N.transferControlToOffscreen();m.postMessage({canvas:Z},[Z])},m.fire=function(N,Z,H){if(h)return L(N,null),h;var G=Math.random().toString(36).slice(2);return h=v(function(lt){function X(et){et.data.callback===G&&(delete g[G],m.removeEventListener("message",X),h=null,A.clear(),H(),lt())}m.addEventListener("message",X),L(N,G),g[G]=X.bind(null,{data:{callback:G}})}),h},m.reset=function(){m.postMessage({reset:!0});for(var N in g)g[N](),delete g[N]}}return function(){if(f)return f;if(!i&&l){var m=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{f=new Worker(URL.createObjectURL(new Blob([m])))}catch(L){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",L),null}s(f)}return f}}(),C={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function k(f,h){return h?h(f):f}function B(f){return f!=null}function S(f,h,g){return k(f&&B(f[h])?f[h]:C[h],g)}function q(f){return f<0?0:Math.floor(f)}function I(f,h){return Math.floor(Math.random()*(h-f))+f}function T(f){return parseInt(f,16)}function E(f){return f.map(Y)}function Y(f){var h=String(f).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:T(h.substring(0,2)),g:T(h.substring(2,4)),b:T(h.substring(4,6))}}function z(f){var h=S(f,"origin",Object);return h.x=S(h,"x",Number),h.y=S(h,"y",Number),h}function x(f){f.width=document.documentElement.clientWidth,f.height=document.documentElement.clientHeight}function j(f){var h=f.getBoundingClientRect();f.width=h.width,f.height=h.height}function F(f){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=f,h}function R(f,h,g,s,m,L,P,N,Z){f.save(),f.translate(h,g),f.rotate(L),f.scale(s,m),f.arc(0,0,1,P,N,Z),f.restore()}function $(f){var h=f.angle*(Math.PI/180),g=f.spread*(Math.PI/180);return{x:f.x,y:f.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:f.startVelocity*.5+Math.random()*f.startVelocity,angle2D:-h+(.5*g-Math.random()*g),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:f.color,shape:f.shape,tick:0,totalTicks:f.ticks,decay:f.decay,drift:f.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:f.gravity*3,ovalScalar:.6,scalar:f.scalar,flat:f.flat}}function U(f,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var g=h.tick++/h.totalTicks,s=h.x+h.random*h.tiltCos,m=h.y+h.random*h.tiltSin,L=h.wobbleX+h.random*h.tiltCos,P=h.wobbleY+h.random*h.tiltSin;if(f.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-g)+")",f.beginPath(),a&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))f.fill(d(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(L-s)*.1,Math.abs(P-m)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var N=Math.PI/10*h.wobble,Z=Math.abs(L-s)*.1,H=Math.abs(P-m)*.1,G=h.shape.bitmap.width*h.scalar,lt=h.shape.bitmap.height*h.scalar,X=new DOMMatrix([Math.cos(N)*Z,Math.sin(N)*Z,-Math.sin(N)*H,Math.cos(N)*H,h.x,h.y]);X.multiplySelf(new DOMMatrix(h.shape.matrix));var et=f.createPattern(A.transform(h.shape.bitmap),"no-repeat");et.setTransform(X),f.globalAlpha=1-g,f.fillStyle=et,f.fillRect(h.x-G/2,h.y-lt/2,G,lt),f.globalAlpha=1}else if(h.shape==="circle")f.ellipse?f.ellipse(h.x,h.y,Math.abs(L-s)*h.ovalScalar,Math.abs(P-m)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):R(f,h.x,h.y,Math.abs(L-s)*h.ovalScalar,Math.abs(P-m)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var nt=Math.PI/2*3,rt=4*h.scalar,it=8*h.scalar,Yt=h.x,st=h.y,ut=5,Jt=Math.PI/ut;ut--;)Yt=h.x+Math.cos(nt)*it,st=h.y+Math.sin(nt)*it,f.lineTo(Yt,st),nt+=Jt,Yt=h.x+Math.cos(nt)*rt,st=h.y+Math.sin(nt)*rt,f.lineTo(Yt,st),nt+=Jt;else f.moveTo(Math.floor(h.x),Math.floor(h.y)),f.lineTo(Math.floor(h.wobbleX),Math.floor(m)),f.lineTo(Math.floor(L),Math.floor(P)),f.lineTo(Math.floor(s),Math.floor(h.wobbleY));return f.closePath(),f.fill(),h.tick<h.totalTicks}function tt(f,h,g,s,m){var L=h.slice(),P=f.getContext("2d"),N,Z,H=v(function(G){function lt(){N=Z=null,P.clearRect(0,0,s.width,s.height),A.clear(),m(),G()}function X(){i&&!(s.width===o.width&&s.height===o.height)&&(s.width=f.width=o.width,s.height=f.height=o.height),!s.width&&!s.height&&(g(f),s.width=f.width,s.height=f.height),P.clearRect(0,0,s.width,s.height),L=L.filter(function(et){return U(P,et)}),L.length?N=_.frame(X):lt()}N=_.frame(X),Z=lt});return{addFettis:function(G){return L=L.concat(G),H},canvas:f,promise:H,reset:function(){N&&_.cancel(N),Z&&Z()}}}function w(f,h){var g=!f,s=!!S(h||{},"resize"),m=!1,L=S(h,"disableForReducedMotion",Boolean),P=l&&!!S(h||{},"useWorker"),N=P?b():null,Z=g?x:j,H=f&&N?!!f.__confetti_initialized:!1,G=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,lt;function X(nt,rt,it){for(var Yt=S(nt,"particleCount",q),st=S(nt,"angle",Number),ut=S(nt,"spread",Number),Jt=S(nt,"startVelocity",Number),gt=S(nt,"decay",Number),pt=S(nt,"gravity",Number),Be=S(nt,"drift",Number),ft=S(nt,"colors",E),vt=S(nt,"ticks",Number),me=S(nt,"shapes"),mt=S(nt,"scalar"),wt=!!S(nt,"flat"),ae=z(nt),at=Yt,Q=[],ot=f.width*ae.x,ct=f.height*ae.y;at--;)Q.push($({x:ot,y:ct,angle:st,spread:ut,startVelocity:Jt,color:ft[at%ft.length],shape:me[I(0,me.length)],ticks:vt,decay:gt,gravity:pt,drift:Be,scalar:mt,flat:wt}));return lt?lt.addFettis(Q):(lt=tt(f,Q,Z,rt,it),lt.promise)}function et(nt){var rt=L||S(nt,"disableForReducedMotion",Boolean),it=S(nt,"zIndex",Number);if(rt&&G)return v(function(Jt){Jt()});g&&lt?f=lt.canvas:g&&!f&&(f=F(it),document.body.appendChild(f)),s&&!H&&Z(f);var Yt={width:f.width,height:f.height};N&&!H&&N.init(f),H=!0,N&&(f.__confetti_initialized=!0);function st(){if(N){var Jt={getBoundingClientRect:function(){if(!g)return f.getBoundingClientRect()}};Z(Jt),N.postMessage({resize:{width:Jt.width,height:Jt.height}});return}Yt.width=Yt.height=null}function ut(){lt=null,s&&(m=!1,e.removeEventListener("resize",st)),g&&f&&(document.body.contains(f)&&document.body.removeChild(f),f=null,H=!1)}return s&&!m&&(m=!0,e.addEventListener("resize",st,!1)),N?N.fire(nt,Yt,ut):X(nt,Yt,ut)}return et.reset=function(){N&&N.reset(),lt&&lt.reset()},et}var r;function u(){return r||(r=w(null,{useWorker:!0,resize:!0})),r}function d(f,h,g,s,m,L,P){var N=new Path2D(f),Z=new Path2D;Z.addPath(N,new DOMMatrix(h));var H=new Path2D;return H.addPath(Z,new DOMMatrix([Math.cos(P)*m,Math.sin(P)*m,-Math.sin(P)*L,Math.cos(P)*L,g,s])),H}function M(f){if(!a)throw new Error("path confetti are not supported in this browser");var h,g;typeof f=="string"?h=f:(h=f.path,g=f.matrix);var s=new Path2D(h),m=document.createElement("canvas"),L=m.getContext("2d");if(!g){for(var P=1e3,N=P,Z=P,H=0,G=0,lt,X,et=0;et<P;et+=2)for(var nt=0;nt<P;nt+=2)L.isPointInPath(s,et,nt,"nonzero")&&(N=Math.min(N,et),Z=Math.min(Z,nt),H=Math.max(H,et),G=Math.max(G,nt));lt=H-N,X=G-Z;var rt=10,it=Math.min(rt/lt,rt/X);g=[it,0,0,it,-Math.round(lt/2+N)*it,-Math.round(X/2+Z)*it]}return{type:"path",path:h,matrix:g}}function y(f){var h,g=1,s="#000000",m='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof f=="string"?h=f:(h=f.text,g="scalar"in f?f.scalar:g,m="fontFamily"in f?f.fontFamily:m,s="color"in f?f.color:s);var L=10*g,P=""+L+"px "+m,N=new OffscreenCanvas(L,L),Z=N.getContext("2d");Z.font=P;var H=Z.measureText(h),G=Math.ceil(H.actualBoundingBoxRight+H.actualBoundingBoxLeft),lt=Math.ceil(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent),X=2,et=H.actualBoundingBoxLeft+X,nt=H.actualBoundingBoxAscent+X;G+=X+X,lt+=X+X,N=new OffscreenCanvas(G,lt),Z=N.getContext("2d"),Z.font=P,Z.fillStyle=s,Z.fillText(h,et,nt);var rt=1/g;return{type:"bitmap",bitmap:N.transferToImageBitmap(),matrix:[rt,0,0,rt,-G*rt/2,-lt*rt/2]}}n.exports=function(){return u().apply(this,arguments)},n.exports.reset=function(){u().reset()},n.exports.create=w,n.exports.shapeFromPath=M,n.exports.shapeFromText=y})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),xr,!1);const Uc=xr.exports;xr.exports.create;export{Lc as A,Pc as R,Bc as _,Oc as a,Nc as b,Uc as c,Rc as d,Fc as e,kc as g,Xl as u};
