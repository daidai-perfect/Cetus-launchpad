import{i as Z}from"./import-icon.de3e6c66.js";import{m as Te,b as U,A as ge,p as Re}from"./index.b055e222.js";import{a as Ke,Y as ze,a3 as Ze,l as qe,m as I,r as y,y as Je,D as Y,ag as We,e as Ye,M as G,q as Ge,o as a,c as H,w,z as S,h as n,t as te,a9 as He,f as r,x as C,F as Q,s as V,u as E,v as f,K as z,i as M,j as le,L as Qe,ah as Ve,B as Xe,J as xe,p as eo,k as oo}from"./entry.e26a72a9.js";/* empty css              *//* empty css              */import{u as so,m as to}from"./index.88b8bf28.js";import{u as lo,a as we,b as no}from"./pool.7d99f86d.js";import{I as ao}from"./icon-tooltip.2b423703.js";import{_ as ro}from"./token-warning_2x.41f1001e.js";import{_ as io}from"./img-no-Positions_2x.50b42499.js";import{_ as co}from"./img-no-Positions_2x.1c4afc3e.js";const uo=Ke({components:{Modal:ze,LoadingOutlined:Ze,IconTooltip:ao},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},haveImportBtn:{type:Boolean,default:!1},isAllowBan:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,h){const{t:u,locale:Le}=qe(),ne=so(),D=I(()=>ne),F=lo(),v=I(()=>F),X=we(),p=I(()=>X),N=y(!1),R=I(()=>{var o;return(o=p.value)==null?void 0:o.filterCreatePoolCoin}),T=y("Default"),x=I(()=>{const o=[u("tab.all"),u("tab.native")],i=Array.from(new Set(v.value.tokens.flatMap(d=>d.labels?d.labels:null)));return p.value.theme=="default"?o.concat(i):[u("tab.all"),u("tab.native"),u("tab.wormhole"),u("tab.celer")]}),A=y(u("tab.all")),L=y(u("tab.all")),q=we(),s=I(()=>q.chainName),b=y([]),O=I(()=>p.value.importTokenList),m=y(null);Je(()=>{});const ee=y(!1);Y(A,o=>{o!==u("tab.all")&&(ee.value=!1),o==u("tab.all")?L.value=u("tab.all"):o==u("tab.layerZero")?L.value=u("tab.layerZero"):o==u("tab.wormhole")?L.value=u("tab.wormhole"):o==u("tab.celer")?L.value=u("tab.celer"):o==u("tab.native")&&(L.value=u("tab.native")),K(m.value)});const oe=y(!1),K=async o=>{var ie,de,ce,ue,ve,pe,ke,fe,he;o||(oe.value=!1),console.log("ðŸš€ ~ updateTokenList ~ updateTokenList:");let i=[];const d=Object.fromEntries((ie=v.value.tokens)==null?void 0:ie.map(l=>[l.address,l]));let c=T.value=="Default"?v.value.tokens:O.value;if(console.log("ðŸš€ ~ updateTokenList ~ tokens:",c),T.value=="Default"&&!(p.value.chainName&&c&&c[0]&&p.value.chainName.toLowerCase().includes((de=c[0])==null?void 0:de.chain))){b.value=[];return}let P=c;if(console.log("ðŸš€ ~ updateTokenList ~ allTokenList:",P),console.log("ðŸš€ ~ updateTokenList ~ keyword:",o),o&&o.split("::")&&o.split("::").length==3&&!(d!=null&&d.hasOwnProperty(o))){if(s.value=="Sui"){const l=no("Sui");try{let t=v.value.tokensObj[ge(o)]||v.value.notTrustedObj[ge(o)]||await l.getTokenBySymbol(v.value.tokens,o);t&&((ce=c.filter(k=>(k==null?void 0:k.address)===(t==null?void 0:t.address)))==null?void 0:ce.length)<1&&((ue=p.value.importTokenListObj)!=null&&ue.hasOwnProperty(t==null?void 0:t.address)?(T.value="Imported",N.value=!0):e.haveImportBtn&&(oe.value=!0),t={...t,address:(t==null?void 0:t.address.toLowerCase())=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::sui"?"0x2::sui::SUI":t==null?void 0:t.address},P=c.concat(t),console.log("ðŸš€ ~ updateTokenList ~ allTokenList:",P))}catch(t){console.log("searchToken##err##",t)}}}else N.value=!1;console.log("ðŸš€ ~ updateTokenList ~ showDefaultTip.value:",N.value);for(const l of Object.keys(P)){let t=We(P[l]);const k=D.value.assets[t.address]&&D.value.assets[t.address].balance?Re(D.value.assets&&D.value.assets[t.address].balance,t.decimals):0;e.lastSelectCoin&&t&&t.address===e.lastSelectCoin?t.unusable=!0:t.unusable=!1;const $=((ve=v.value.tokensObj[t.address])==null?void 0:ve.labels)&&((pe=v.value.tokensObj[t.address])==null?void 0:pe.labels[0]),W=v.value.tokensObj[t.address]?(ke=v.value.tokensObj[t.address])==null?void 0:ke.name:t.name;t={...t,balance:k,labels:$,name:W,sort:(p.value.chainName==="Aptos"?t.symbol=="APT":t.symbol=="SUI")?1:-1},i.push(t)}let _;D.value.address?_=i.sort((l,t)=>t.balance-l.balance):_=i;let j=[];if(o){const l=o.toLowerCase();console.log("ðŸš€ ~ file: coin-select.vue:548 ~ updateTokenList ~ keyword:",o);const t=_.filter(k=>k.symbol.toLowerCase().indexOf(l)!==-1||k.address.toLowerCase().indexOf(l)!==-1||k.address.toLowerCase().indexOf(to(o).full_address.toLowerCase())!==-1||k.name.toLowerCase().indexOf(l)!==-1);console.log("ðŸš€ ~ file: coin-select.vue:556 ~ updateTokenList ~ result:",t),j=t}else A.value!==u("tab.all")?j=_.filter(t=>A.value==u("tab.native")?!t.labels||t.labels=="Native":t.labels&&t.labels.toLowerCase()==A.value.toLowerCase()):j=_;if(console.log("ðŸš€ ~ file: coin-select.vue:556 ~ updateTokenList ~ props.isCreatePoolToCoin:",e.isCreatePoolToCoin),console.log("ðŸš€ ~ file: coin-select.vue:556 ~ updateTokenList ~ props.isCreatePoolFromCoin:",e.isCreatePoolFromCoin),e.isCreatePoolToCoin?b.value=(fe=j.filter(l=>R.value[l==null?void 0:l.address]))==null?void 0:fe.sort((l,t)=>t.sort-l.sort).sort((l,t)=>t.unusable-l.unusable):b.value=j.sort((l,t)=>t.sort-l.sort).sort((l,t)=>t.unusable-l.unusable),e.isCreatePoolFromCoin&&(b.value=(he=j.filter(l=>!R.value[l==null?void 0:l.address]))==null?void 0:he.sort((l,t)=>t.sort-l.sort).sort((l,t)=>t.unusable-l.unusable)),console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:575 ~ updateTokenList ~  tokenList.value:",b.value),o){const l=o.toLowerCase(),t=j.sort((k,$)=>{const W=k.symbol.toLowerCase()===l,De=$.symbol.toLowerCase()===l,be=k.name.toLowerCase()===l,je=$.name.toLowerCase()===l,me=k.address.toLowerCase()===l,Ne=$.address.toLowerCase()===l,Ce=k.symbol.toLowerCase().includes(l),Me=$.symbol.toLowerCase().includes(l),_e=k.name.toLowerCase().includes(l),Ue=$.name.toLowerCase().includes(l),ye=k.address.toLowerCase().includes(l),Fe=$.address.toLowerCase().includes(l);return W!==De?W?-1:1:be!==je?be?-1:1:me!==Ne?me?-1:1:Ce!==Me?Ce?-1:1:_e!==Ue?_e?-1:1:ye!==Fe?ye?-1:1:0});b.value=t}},Ie=o=>{e.isAllowBan&&o.unusable||(o.unusable&&!m.value&&h.emit("onClose"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:589 ~ toSelect ~ props.isAllowBan:",e.isAllowBan,o),h.emit("onSelect",o),h.emit("onClose"))};Y(()=>[m.value,ee.value,T.value],([o,i,d])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:601 ~ setup ~ currentTokenTab:",d),K(o)});const J=I(()=>s.value=="Aptos"?p.value.collectTokenListAptos:(console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:610 ~ collectList ~ store.value.collectTokenListSui:",p.value.collectTokenListSui),p.value.collectTokenListSui)),ae=y([]),B=y({}),se=y(!0);Y(()=>[v.value.tokens,O.value,se.value],([o,i,d])=>{if(o&&o.length>0&&i&&i.length>0&&d){const c=Se(i,o);p.value.setImportTokenList(c),se.value=!1,console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:614 ~ watch ~ isUpdateImportList:",se)}},{immediate:!0}),Y(()=>[v.value.tokens,s.value,J.value],([o,i,d])=>{o&&o[0]&&o[0].chain!==(i==null?void 0:i.toLowerCase())||(o&&o.length>0&&(K(m.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:632 ~ watch ~ updateTokenList:")),d&&d.length>0?(ae.value=d.filter(c=>R.value[c==null?void 0:c.address]),B.value=Object.fromEntries(d==null?void 0:d.map(c=>[c.address,c]))):B.value={})},{immediate:!0});function Se(o,i){return o.filter(d=>!i.some(c=>d.address===c.address))}function Ae(o,i){const d=new Set(i==null?void 0:i.map(c=>c.address));return o==null?void 0:o.filter(c=>d.has(c.address))}const re=o=>{let i=J.value;const d=o.address;let c;console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:716 ~ clickCollectIcon ~ collectListObj:",B),B!=null&&B.value.hasOwnProperty(d)?c=i.filter(_=>(_==null?void 0:_.address)!==d):(i.push(o),c=i),console.log("ðŸš€ ~ clickCollectIcon ~ list:",c),p.value.setCollectTokenList(c,s.value)},Oe=o=>{let i=O.value;const d=o.address,P=i.filter(_=>(_==null?void 0:_.address)!==d);p.value.setImportTokenList(P),B.value[o.address]&&re(o),T.value!=="Default"&&K(m.value)},Be=()=>{p.value.setImportTokenList([]);const o=Ae(J.value,v.value.tokens);p.value.setCollectTokenList(o,s.value),T.value!=="Default"&&K(m.value)},Pe=o=>{var i;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((i=v.value.tokensObj[o==null?void 0:o.address])==null?void 0:i.logo_url)||(p.value.theme==="default"?Z("/image/coins/unknown.png"):Z("/image/coins/sui-unknown.png"))},$e=o=>{var i,d;return v.value.tokensObj&&o.address&&v.value.tokensObj[o.address]&&((i=v.value.tokensObj[o.address])==null?void 0:i.labels)&&((d=v.value.tokensObj[o.address])==null?void 0:d.labels[0])},Ee=I(()=>p.value.currentExplorer);return{h5Edit:y(!1),getExplorerUrl:Te,currentExplorer:Ee,showDefaultTip:N,isCreatePoolToCoinCollectList:ae,showImportBtn:oe,deleteImportToken:Oe,clearAllImportToken:Be,importList:O,currentTokenTab:T,coinLabels:$e,collectListObj:B,clickCollectIcon:re,getCoinIcon:Pe,collectList:J,pools:v,t:u,chainName:s,tabList:x,currentTab:A,addCommom:U,tokenList:b,importIcon:Z,keyword:m,wallet:D,toSelect:Ie,store:p,isShowAll:ee}}});const g=e=>(eo("data-v-23c14797"),e=e(),oo(),e),vo=g(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),po={class:"coin-select-modal"},ko={class:"search-input"},fo=["placeholder"],ho=g(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),bo=[ho],mo={key:0,class:"popular"},Co=["onClick"],_o={class:"name-symbol"},yo=["onClick"],go=g(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_cancelled"})],-1)),wo=[go],To=g(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_edit"})],-1)),Lo=[To],Io={key:1,class:"tab-list"},So=["onClick"],Ao={key:0,class:"item"},Oo=g(()=>n("span",null," No tokens found ",-1)),Bo=g(()=>n("div",null,"Default",-1)),Po={key:1},$o=g(()=>n("div",{class:"line"},null,-1)),Eo={key:2,class:"type-list"},Do=["onClick"],jo={key:0,class:"type"},No={key:3,class:"type-list import-type"},Mo={class:"type-container"},Uo={class:"type"},Fo=g(()=>n("div",{class:"type"},f("Clear All"),-1)),Ro=[Fo],Ko={class:"coin-list-box"},zo={key:0,class:"coin-list"},Zo=["onClick"],qo={class:"left"},Jo={class:"token-icon",alt:""},Wo={key:0,class:"token-waring",src:ro,alt:""},Yo={class:"name-box"},Go={class:"symbol"},Ho={key:0,class:"label"},Qo={class:"copy-text"},Vo=["href"],Xo=["onClick"],xo=g(()=>n("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),es=[xo],os={class:"balance-box"},ss={class:"balance"},ts={key:0},ls={key:1},ns={key:1,class:"balance-num"},as={key:2,class:"balance-num"},rs={key:3},is=g(()=>n("p",null,null,-1)),ds=["onClick"],cs=g(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_del"})],-1)),us=[cs],vs=["onClick"],ps=g(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_filled_sel"})],-1)),ks=[ps],fs={key:1,class:"no-data"},hs={key:0,class:"token-loading"},bs={key:1,class:"no-data-content"},ms={key:0,src:io},Cs={key:1,src:co},_s={key:2},ys={key:3},gs={key:4};function ws(e,h,u,Le,ne,D){const F=Qe,v=G("loading-outlined"),X=Ve,p=Xe,N=xe,R=G("IconTooltip"),T=G("vue-scroll"),x=G("Modal"),A=Ge("image");return a(),H(x,{title:e.$t("modal.selectTokenModalTitle"),class:S(["select-mod",e.store.theme=="default"?"":"new-modal-have-radius"]),width:460,centered:"",visible:!0,footer:null,onCancel:h[5]||(h[5]=L=>e.$emit("onClose"))},{closeIcon:w(()=>[vo]),default:w(()=>{var L,q;return[n("div",po,[n("div",ko,[te(n("input",{"onUpdate:modelValue":h[0]||(h[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^[a-zA-Z0-9\\s]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,fo),[[He,e.keyword]]),e.keyword?(a(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:h[1]||(h[1]=s=>e.keyword="")},bo)):C("",!0)]),e.collectList&&e.collectList.length>0?(a(),r("div",mo,[(a(!0),r(Q,null,V(e.isCreatePoolToCoin?e.isCreatePoolToCoinCollectList:e.collectList,s=>(a(),r("div",{key:s.address,class:S(["img-box",s.address===e.lastSelectCoin&&e.isAllowBan?"img-box-unusable":"img-box-usable"]),onClick:b=>e.toSelect(s)},[te(n("img",null,null,512),[[A,s.icon||s.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:E(Z))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:E(Z))("/image/coins/sui-unknown.png"))]]),n("div",_o,[n("span",null,f(s.symbol),1),n("p",null,f((s==null?void 0:s.address)=="0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN"||(s==null?void 0:s.address)=="0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN"?"Portal from Ethereum":e.coinLabels(s)),1)]),n("div",{class:S(["delete-collect-icon",e.h5Edit?"h5-show-delete-collect-icon":""]),onClick:z(b=>e.clickCollectIcon(s),["stop"])},wo,10,yo)],10,Co))),128)),n("div",{class:S(["h5-edit",e.h5Edit?"h5-edit-active":""]),onClick:h[2]||(h[2]=z(s=>e.h5Edit=!e.h5Edit,["stop"]))},Lo,2)])):C("",!0),(!e.haveImportBtn&&e.keyword?e.store.importTokenListObj.hasOwnProperty(e.keyword):!e.showImportBtn||!e.keyword)?(a(),r("div",Io,[(a(),r(Q,null,V(["Default","Imported"],(s,b)=>n("div",{key:b,class:S(["item-container",e.currentTokenTab==s?"item-container-active item-container":"item-container"]),onClick:()=>{e.currentTab=e.t("tab.all"),e.currentTokenTab=s}},[e.chainName=="Sui"||e.chainName=="Aptos"&&s!=="Imported"?(a(),r("div",Ao,[e.showDefaultTip&&s=="Default"&&e.currentTokenTab=="Imported"?(a(),H(F,{key:0,placement:"top","arrow-point-at-center":""},{title:w(()=>[Oo]),default:w(()=>[Bo]),_:1})):(a(),r("div",Po,f(s),1))])):C("",!0)],10,So)),64))])):C("",!0),$o,e.currentTokenTab=="Default"&&!e.keyword?(a(),r("div",Eo,[(a(!0),r(Q,null,V(e.tabList,(s,b)=>(a(),r("div",{key:b,class:S(["type-container",e.currentTab==s?"type-container-active type-container":"type-container"]),onClick:O=>e.currentTab=s},[s!==null&&s!=="test"?(a(),r("div",jo,f(s),1)):C("",!0)],10,Do))),128))])):C("",!0),((L=e.tokenList)==null?void 0:L.length)>0&&e.currentTokenTab!=="Default"&&!e.keyword?(a(),r("div",No,[n("div",Mo,[n("div",Uo,f(((q=e.tokenList)==null?void 0:q.length)+" Custom Tokens"),1)]),n("div",{class:"type-container type-clear",onClick:h[3]||(h[3]=s=>e.clearAllImportToken())},Ro)])):C("",!0),n("div",Ko,[M(T,null,{default:w(()=>[e.tokenList&&e.tokenList.length>0?(a(),r("ul",zo,[(a(!0),r(Q,null,V(e.tokenList,s=>{var b,O;return a(),r("li",{key:s.address,class:S(s.unusable&&e.isAllowBan?"unusable":""),onClick:m=>e.toSelect(s)},[n("div",qo,[te(n("img",Jo,null,512),[[A,e.getCoinIcon(s)]]),s.isSelfBuilt?(a(),H(F,{key:0,placement:"right","arrow-point-at-center":""},{title:w(()=>[n("span",null,f(e.t("newAdd.notCetusTokenList")),1)]),default:w(()=>[e.showImportBtn?(a(),r("img",Wo)):C("",!0)]),_:1})):C("",!0),n("div",Yo,[n("div",null,[n("div",Go,f(s.symbol),1)]),n("p",null,[le(f(s.name)+" ",1),e.chainName!=="Sui"?(a(),r("span",Ho,f(s.labels?`(${s.labels})`:""),1)):C("",!0)]),n("p",Qo,[n("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:E(Te))(e.currentExplorer,"coin",s.address),target:"_blank"},[n("span",null,f(s.address&&s.address.substr(0,4))+" ... "+f(s.address&&s.address.substr(s.address.length-4,4)),1)],8,Vo),(a(),r("svg",{class:"icon","aria-hidden":"true",onClick:z(m=>e.store.copy(s&&s.address),["stop"])},es,8,Xo))])])]),n("div",os,[n("div",ss,[e.wallet.loading?(a(),r("div",ts,[M(X,null,{default:w(()=>[M(v)]),_:1})])):s.balance&&e.wallet.connected?(a(),r("div",ls,[((b=("addCommom"in e?e.addCommom:E(U))(s.balance,s.decimals))==null?void 0:b.length)>20?(a(),H(F,{key:0,placement:"top","arrow-point-at-center":""},{title:w(()=>[n("span",null,f(("addCommom"in e?e.addCommom:E(U))(s.balance,s.decimals)),1)]),default:w(()=>{var m;return[n("div",{class:S(["balance-num",((m=("addCommom"in e?e.addCommom:E(U))(s.balance,s.decimals))==null?void 0:m.length)>20?"balance-length":""])},f(("addCommom"in e?e.addCommom:E(U))(s.balance,s.decimals)),3)]}),_:2},1024)):(a(),r("div",ns,f(("addCommom"in e?e.addCommom:E(U))(s.balance,s.decimals)),1))])):!s.balance&&e.wallet.connected?(a(),r("div",as,"0")):(a(),r("div",rs))]),is,!e.keyword&&e.currentTokenTab!=="Default"?(a(),r("div",{key:0,class:"delete-icon",onClick:z(m=>e.deleteImportToken(s),["stop"])},us,8,ds)):C("",!0),!e.keyword||!e.showImportBtn?(a(),r("div",{key:1,class:S(["collect-icon",(O=e.collectListObj)!=null&&O.hasOwnProperty(s.address)?"collect-icon-active":""]),onClick:z(m=>e.clickCollectIcon(s),["stop"])},ks,10,vs)):C("",!0)])],10,Zo)}),128)),e.showImportBtn?(a(),r("div",{key:0,class:"import-btn",onClick:h[4]||(h[4]=s=>e.toSelect(e.tokenList&&e.tokenList[0]))},[M(p,null,{default:w(()=>[le("Import")]),_:1})])):C("",!0)])):(a(),r("div",fs,[e.pools.isContractTokenLoaing?(a(),r("div",hs,[M(N)])):(a(),r("div",bs,[e.store.theme=="default"?(a(),r("img",ms)):(a(),r("img",Cs)),e.currentTokenTab=="Default"||e.keyword?(a(),r("p",_s,f(e.t("newAdd.noTokensFound")),1)):(a(),r("p",ys,"No Imported Tokens")),e.currentTokenTab=="Default"?(a(),r("div",gs,[le(f(e.t("newAdd.enterCoinType"))+" ",1),M(R,{type:"uniqueIdOfCoin","xlink-href":"#icon-icon_tips"})])):C("",!0)]))]))]),_:1})])])]}),_:1},8,["title","class"])}const Ns=Ye(uo,[["render",ws],["__scopeId","data-v-23c14797"]]);export{Ns as _};
