import{_ as it}from"./back.1469d5a6.js";import{_ as at}from"./refresh-icon.64571c8f.js";import{a as je,i as Je,b as De,o as l,e as p,f as o,h as O,t as a,p as Qe,j as Ye,r as i,k as Ue,l as E,m as ro,w as W,q as j,s as Q,v as ge,B as uo,x as Ge,D as F,y as Me,z as lt,A as st,M as rt,C as No,E as Lo,F as ut,G as ct,c as ye,H as Fe,S as dt,I as mt,J as ft,K as vt,L as pt,N as gt,O as $e,P as Io,Q as So,T as Po,R as _e,U as To,V as $o,W as Ke,X as Ao,Y as ao,Z as _o,$ as kt,a0 as ht,a1 as bt,a2 as Ct}from"./entry.b2a8e1c0.js";import{_ as yt,a as wt}from"./coin-select.5bc6435f.js";import{_ as Mo,s as lo,m as It,l as St,b as Pt,a as Tt,c as $t,d as At,e as _t,f as Mt}from"./img-no-data_2x.52db0f3a.js";import{_ as Nt}from"./swap-setting.b2ce57aa.js";import{_ as Bo,a as Ro,b as Lt}from"./img-lock_2x.8d4493cd.js";import{_ as Bt}from"./status-block.3e14cd96.js";/* empty css              */import{_ as qo,a as Oo}from"./icon-arrow_2x.db44c7c5.js";import"./img-no-Positions_2x.3a4bda32.js";import"./index.6bbd15ef.js";import"./coin-pair-name.13e123eb.js";import"./precision.ce0280e5.js";const Rt=je({props:{coinName:{type:String,default:""},coinIcon:{type:String,default:""}},setup(e){return{importIcon:Je}}}),qt=e=>(Qe("data-v-a4993db8"),e=e(),Ye(),e),Ot={class:"coin-block"},Ft=["src"],Ut=qt(()=>o("div",null,[o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on"})])],-1));function jt(e,t,I,$,Z,D){return l(),p("div",Ot,[o("div",null,[e.coinIcon?(l(),p("img",{key:0,src:e.coinIcon||e.importIcon(`/image/coins/${e.coinName.toLowerCase()}.png`)},null,8,Ft)):O("",!0),o("span",null,a(e.coinName?e.coinName:e.$t("modal.selectTokenModalTitle")),1)]),Ut])}const Dt=De(Rt,[["render",jt],["__scopeId","data-v-a4993db8"]]),Et=je({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object},currentPriceTab:{type:String},loading:{type:Boolean,default:!1}},setup(e,t){let I=i(""),$=i(""),Z=i(),D=i(!1),h=i(!1);const ee=i({}),oe=Ue(),b=E(()=>oe);console.log(e,"props===>"),ro(()=>{I.value=e.min,$.value=e.max,console.log(I,"===>minPrice122")}),W(()=>e.currentPriceTab,(T,r)=>{T!==r&&(Z.value=e.currentPriceTab)},{immediate:!0}),W(()=>e.min,(T,r)=>{T!==r&&(I.value=e.min)},{immediate:!0}),W(()=>e.max,(T,r)=>{T!==r&&($.value=e.max)},{immediate:!0}),W(()=>e.poolInfo,(T,r)=>{T&&(ee.value=T)},{immediate:!0}),W(I,(T,r)=>{T!==r&&t.emit("onChangeMinPrice",T)}),W($,(T,r)=>{T!==r&&t.emit("onChangeMaxPrice",T)}),W(D,(T,r)=>{T!==r&&t.emit("onChangeFullRange",T)});const V=()=>{I.value=e.defaultMinPrice,$.value=e.defaultMaxPrice,h.value=!1,D.value=!1},ce=()=>{h.value=!1,I.value="0",$.value="\u221E"};return W(D,(T,r)=>{T!==r&&t.emit("onChangeFullRange",T)}),{store:b,importIcon:Je,resetPrice:V,changeShowUnderStand:()=>{D.value=!D.value,D.value?h.value=!0:V(),h.value||(I.value=e.defaultMinPrice,$.value=e.defaultMaxPrice)},showUnderStand:h,minPrice:I,maxPrice:$,understand:ce,isRadio:D,poolInfo:ee,currentPriceTab:Z}}});const Vt={class:"set-price"},Xt={class:"card-container"},zt={key:0,class:"card"},Wt=["src"],Ht={key:1,class:"understand"},Zt={class:"left"},Kt={class:"right"};function Gt(e,t,I,$,Z,D){const h=Mo,ee=Mo,oe=uo;return l(),p("div",Vt,[o("div",Xt,[e.showUnderStand?(l(),p("div",Ht,[o("div",Zt,[o("p",null,a(e.$t("common.lowerEfficiency")),1),o("p",null,a(e.$t("common.lowerEfficiencyTips")),1)]),o("div",Kt,[j(oe,{onClick:e.understand},{default:Q(()=>[ge(a(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(l(),p("div",zt,[j(h,{modelValue:e.minPrice,"onUpdate:modelValue":t[0]||(t[0]=b=>e.minPrice=b),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:t[1]||(t[1]=b=>e.minPrice=b),onAddValue:t[2]||(t[2]=b=>e.minPrice=b),onDelValue:t[3]||(t[3]=b=>e.minPrice=b)},null,8,["modelValue","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab"]),j(ee,{modelValue:e.maxPrice,"onUpdate:modelValue":t[4]||(t[4]=b=>e.maxPrice=b),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:t[5]||(t[5]=b=>e.maxPrice=b),onAddValue:t[6]||(t[6]=b=>e.maxPrice=b),onDelValue:t[7]||(t[7]=b=>e.maxPrice=b)},null,8,["modelValue","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab"]),o("img",{src:e.importIcon("/image/lmg-line@2x.png"),alt:""},null,8,Wt)]))])])}const Jt=De(Et,[["render",Gt],["__scopeId","data-v-0f7583bc"]]);function so(e,t,I){const $=new F(10).pow(t-I);return new F(1.0001).pow(e).mul($)}const Qt=je({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String}},setup(e,t){const I=i(1),$=Ue(),Z=E(()=>$),D=Ge(),{TickMath:h}=D,ee=()=>{if(I.value<.015625)return;const r=I.value/2;I.value=r,b(e.poolInfo,r)},oe=()=>{if(I.value>32)return;const r=I.value*2;I.value=r,b(e.poolInfo,r)},b=(r,X=1)=>{if(r&&r.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const _=Number(e.poolInfo.current_tick_index);let ae=_+100*X,le=_-100*X,q,M;e.maxPrice==="\u221E"?M=0:e.direction?M=h.priceToTickIndex(new F(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):M=h.priceToTickIndex(new F(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?q=0:e.direction?q=h.priceToTickIndex(new F(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):q=h.priceToTickIndex(new F(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);const c=Number(r.liquidity)/Math.pow(10,6),d=e.tickList,u=[],s=[];let B={};for(let U=0;U<d.length;U++)B=d[U],B.index<=_&&B.index>=le?u.unshift(B):B.index>_&&B.index<=ae&&s.push(B);let N=Number(c);for(let U=0;U<u.length;U++)u[U].liquityAmount=N-Number(u[U].liquidityGross.toString()/Math.pow(10,6));let se=Number(c);for(let U=0;U<s.length;U++)s[U].liquityAmount=se-Number(s[U].liquidityGross.toString()/Math.pow(10,6));let m=[];m=[...u.reverse(),{index:_,liquityAmount:Number(c)},...s],e.direction||(m=m.reverse()),ce(m,le,ae,q,M,_)}};let V=i(!1);ro(()=>{document.body.clientWidth<750?V.value=!1:V.value=!0,window.onresize=()=>{document.body.clientWidth<750?V.value=!1:V.value=!0,b(e.poolInfo,I.value)}});const ce=(r,X,_,ae,le,q)=>{console.log("1021####drawChart####chartData####",r),console.log("1021####drawChart####tickMin####",X),console.log("1021####drawChart####tickMax####",_),console.log("1021####drawChart####minPriceTick####",ae),console.log("1021####drawChart####maxPriceTick####",le),console.log("1021####drawChart####currentTick####",q);const M={top:30,right:35,bottom:20,left:55};let c,d;V.value?(c=460-M.left-M.right,d=205-M.top-M.bottom):(c=340-M.left-M.right,d=205-M.top-M.bottom);let u=[X,q-(q-X)/2,q,q+(_-q)/2,_];const s=u[0]-(u[1]-u[0]),B=u[4]+(u[4]-u[3]),N=c/(B-s);lo("#chart").selectAll("*").remove();const se=lo("#chart").attr("width",c+M.left+M.right).attr("height",d+M.top+M.bottom).append("g").attr("transform",`translate(${M.left},${M.right})`),m=It(r,function(S){return Number(S.liquityAmount)})||0,U=St().range([0,d]).domain([m,0]);Pt().rangeRound([0,c]).padding(.1),se.append("g").attr("id","barsBox").selectAll("rect").data(r).enter().append("rect").attr("x",function(S,y){return y===0?0:e.direction?Math.abs(r[y-1].index-s)*N:Math.abs(B-r[y-1].index)*N}).attr("y",function(S,y){return y===0?0:e.direction?U(r[y-1].liquityAmount):U(S.liquityAmount)}).attr("width",function(S,y){return y===0?0:e.direction?Math.abs(S.index-r[y-1].index)*N:Math.abs(r[y-1].index-S.index)*N}).attr("height",function(S,y){return y===0?0:e.direction?d-U(r[y-1].liquityAmount):d-U(S.liquityAmount)}).attr("fill","#213F37").attr("class","bars");const be=se.append("g");be.append("line").attr("x1",0).attr("y1",155).attr("x2",420).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const Ae=be.append("g");if(e.direction)for(let S=0;S<u.length;S++){const y=Me(String(so(u[S],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),so(u[S],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()>1e3?4:6)||"0",ke=Math.abs(u[S]-s)*N;let de=0;for(let me=0;me<y.length;me++)y[me]==="1"?de+=4.02:y[me]==="."?de+=2.64:y[me]==="7"?de+=5.48:de+=6;console.log(ke,"x=>>>"),Ae.append("text").text(y).attr("x",ke-de/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}else for(let S=u.length-1;S>=0;S--){const y=Me(String(1/so(u[S],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),6)||"0",ke=Math.abs(u[S]-B)*N;let de=0;for(let me=0;me<y.length;me++)y[me]==="1"?de+=4.02:y[me]==="."?de+=2.64:y[me]==="7"?de+=5.48:de+=6;Ae.append("text").text(y).attr("x",ke-de/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}const te=se.append("g").attr("id","left-handle"),C=se.append("g").attr("id","right-handle");Z.value.theme=="default"?(te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),te.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),te.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),te.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#68FFD8"),te.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#68FFD8"),C.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),C.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),C.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),C.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#68FFD8"),C.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#68FFD8")):(te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),te.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),te.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),te.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#76C8FF"),te.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#76C8FF"),C.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),C.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),C.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),C.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#76C8FF"),C.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#76C8FF"));const Le=Tt().extent([[0,0],[c,d]]).handleSize(30).on("end",Ve);let we,Ie;e.direction?(we=ae<s?-100:Math.abs(ae-s)*N,Ie=le<s?-100:Math.abs(le-s)*N):(Ie=ae<s?-100:Math.abs(B-ae)*N,we=le<s?-100:Math.abs(B-le)*N),e.minPrice==="0"&&(we=0),e.maxPrice==="\u221E"&&(Ie=c),se.append("g").attr("class","brush").call(Le).call(Le.move,[we,Ie]),console.log(Ie,"====>maxPriceTickX"),console.log(we,"====>minPriceTickX"),te.attr("transform","translate("+we+", 0)"),C.attr("transform","translate("+Ie+", 0)");function Ve(S){if(!S.sourceEvent||!S.selection||he.value!=="Custom")return;te.attr("transform","translate("+S.selection[0]+", 0)"),C.attr("transform","translate("+S.selection[1]+", 0)");let y,ke;e.direction?(y=h.tickIndexToPrice(S.selection[0]/N+s,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),ke=h.tickIndexToPrice(S.selection[1]/N+s,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(y=1/h.tickIndexToPrice(B-S.selection[0]/N,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),ke=1/h.tickIndexToPrice(B-S.selection[1]/N,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(Me(String(y),6))),t.emit("onChangeMaxPrice",String(Me(String(ke),6)))}lo(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#333")},he=i("");W(()=>[e.poolInfo,e.tickList,e.minPrice,e.maxPrice],([r,X,_,ae])=>{r&&X&&X.length>0&&_&&ae&&(e.currentPriceTab!=="Custom"?(I.value=32,b(r,32)):(I.value=1,b(r,I.value)))},{immediate:!0});const T=i(!0);return W(()=>e.chartLoading,(r,X)=>{r!==X&&(T.value=r)},{immediate:!0,deep:!0}),{store:Z,loading:T,zoomOut:ee,zoomIn:oe}}});const Yt=e=>(Qe("data-v-aa375082"),e=e(),Ye(),e),xt={class:"chart-box"},en={class:"chart"},on={class:"zoom"},tn=Yt(()=>o("svg",{id:"chart"},null,-1));function nn(e,t,I,$,Z,D){return l(),p("div",xt,[lt(o("div",en,[o("div",on,[o("div",{class:"amplification",onClick:t[0]||(t[0]=(...h)=>e.zoomOut&&e.zoomOut(...h))}),o("div",{class:"narrow",onClick:t[1]||(t[1]=(...h)=>e.zoomIn&&e.zoomIn(...h))})]),tn],512),[[st,!e.loading]])])}const an=De(Qt,[["render",nn],["__scopeId","data-v-aa375082"]]),ln=je({components:{Modal:rt},props:{},setup(e,t){const I=i({}),$=Ue(),Z=E(()=>$),D=E(()=>Z.value.chainName),h=E(()=>ut[D.value]);let ee=i(!0);const oe=No(),b=E(()=>oe),V=Lo();return W(()=>b.value.currentPositionInfo,ce=>{ce&&(I.value=ce)}),{router:V,pools:b,positionInfo:I,decimalFormat:Me,rateChange:ee,config:h,importIcon:Je,store:Z}}});const xe=e=>(Qe("data-v-27509cd4"),e=e(),Ye(),e),sn=xe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),rn={class:"rejected-container"},un={class:"coin-pair"},cn=xe(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),dn=[cn],mn=["href"],fn=xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-jump"})],-1)),vn=[fn],pn={class:"coin-pair"},gn=["src"],kn=["src"],hn={class:"fee"},bn={class:"status"},Cn={class:"min-and-max"},yn={key:0},wn={class:"text"},In={key:0,src:qo,alt:""},Sn={key:1,src:Oo,alt:""},Pn={class:"text"},Tn={key:1},$n={class:"text"},An={key:0,src:qo,alt:""},_n={key:1,src:Oo,alt:""},Mn={class:"text"},Nn=xe(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Ln=[Nn];function Bn(e,t,I,$,Z,D){const h=dt,ee=Bt,oe=uo,b=ct("Modal");return l(),ye(b,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=V=>e.$emit("onClose"))},{closeIcon:Q(()=>[sn]),default:Q(()=>[o("div",rn,[j(h,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Q(()=>[o("div",un,[ge(a(e.positionInfo.tokenName)+" ",1),(l(),p("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=V=>e.store.copy(e.positionInfo.nftHash))},dn)),o("a",{href:`https://explorer.aptoslabs.com/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},vn,8,mn)])]),_:1},8,["loading"]),o("div",{class:Fe(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[j(h,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Q(()=>[o("div",pn,[o("div",null,[o("img",{src:e.fromCoinUrl||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,gn),o("img",{src:e.toCoinUrl||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,kn)]),o("span",null,a(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+a(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),o("div",hn,a(e.$t("common.fee"))+" "+a(e.positionInfo.fee)+"% ",1)]),_:1},8,["loading"])],2),o("div",bn,[j(ee,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),j(h,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Q(()=>[o("div",Cn,[e.rateChange?(l(),p("div",yn,[o("div",wn,a(e.decimalFormat(String(e.positionInfo&&e.positionInfo.minPrice),6)),1),e.store.theme=="default"?(l(),p("img",In)):(l(),p("img",Sn)),o("div",Pn,a(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.decimalFormat(String(e.positionInfo&&e.positionInfo.maxPrice),6))+" "+a(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+a(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):(l(),p("div",Tn,[o("div",$n,a(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6)),1),e.store.theme=="default"?(l(),p("img",An)):(l(),p("img",_n)),o("div",Mn,a(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6))+" "+a(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+a(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),(l(),p("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=V=>e.rateChange=!e.rateChange)},Ln))])]),_:1},8,["loading"])]),j(oe,{onClick:t[2]||(t[2]=V=>e.router.push(`/position-detail/1?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}`))},{default:Q(()=>[ge(a(e.$t("newAdd.viewDetail")),1)]),_:1})]),_:1},8,["title"])}const Rn=De(ln,[["render",Bn],["__scopeId","data-v-27509cd4"]]),qn=je({setup(){const{t:e,locale:t}=mt(),I=ft(),$=E(()=>I),Z=Ue(),D=i(20),h=i(0),ee=i(null),oe=i(!1),b=i(!1),V=i(!1),ce=i(!1),he=i("fromCoin"),T=i(""),r=i(""),X=i(!1),_=i(!0),ae=i(!1),le=i(!1),q=i(!0),M=i(!1),c=i(""),d=i(""),u=i(""),s=i(""),B=i(""),N=i(""),se=i(!1),m=i(!1),U=i(!1);i(!1);const Ne=i("0.01% "+e("common.feeTier")),co=i(0),be=i(!0),Ae=i(!1),te=i([]),C=i(""),Le=i([]),we=()=>{h.value=0,le.value=!0,setTimeout(()=>{le.value=!1},1e3),Re()},Ie=E(()=>Number(u.value)>Number(s.value)),Ve=n=>{ae.value=n,u.value="0",s.value="\u221E"},S=E(()=>[{label:"0.01% "+e("common.feeTier"),title:"0.01% fee",text:"Best for extremely stable pairs."},{label:"0.05% "+e("common.feeTier"),title:"0.05% fee",text:"Best for stable pairs."},{label:"0.2% "+e("common.feeTier"),title:"0.2% fee",text:"Best for most pairs."},{label:"0.6% "+e("common.feeTier"),title:"0.6% fee",text:"Best for exotic pairs."}]),y=E(()=>Z.slippage),ke=E(()=>!g.value||!k.value),de=E(()=>v.value&&v.value.is_pause?"Pool Closed":ke.value?e("newAdd.invalidPair"):v.value?Number(c.value)>Number(qe.value)?e("button.insufficientBalance",{name:g.value.symbol}):Number(d.value)>Number(Oe.value)?e("button.insufficientBalance",{name:k.value.symbol}):M.value?e("modal.selectTokenModalTitle"):s.value!=="\u221E"&&Number(u.value)>=Number(s.value)?e("newAdd.invalidRange"):!Number(c.value)&&!Number(d.value)?e("button.enterAmount"):e("button.addLiquidity"):e("button.poolNotFound")),me=Ue(),Fo=E(()=>me),Uo=Lo(),g=i(),k=i();ro(()=>{mo()});const jo=n=>{u.value=n},Do=n=>{s.value=n},Eo=()=>{be.value=!0;const n=g.value;if(g.value=k.value,k.value=n,console.log(g.value,"fromCoin.value===?"),console.log(k.value,"====>toCoin.value"),_.value=!_.value,console.log(_.value,"===>direct.value"),c.value=d.value,be.value=!1,u.value!==""&&s.value!==""&&u.value!=="0"&&s.value!=="\u221E"){const f=u.value,A=s.value;(!Ae.value||!_.value)&&(u.value=String(1/Number(A)),s.value=String(1/Number(f)));const w=B.value,P=N.value;B.value=String(1/Number(P)),N.value=String(1/Number(w)),no({key:C.value,...ho.value[C.value]}),Ae.value=!1}};W([u,s],([n],[f])=>{Re(),v.value&&s.value!=="\u221E"&&Number(u.value)>=Number(s.value)?U.value=!0:U.value=!1});const Vo=n=>{var f,A,w,P;he.value=n,n==="fromCoin"?(T.value=((f=k.value)==null?void 0:f.address)||"",r.value=((A=g.value)==null?void 0:A.address)||""):(T.value=((w=g.value)==null?void 0:w.address)||"",r.value=((P=k.value)==null?void 0:P.address)||""),X.value=!0},Xo=n=>{M.value=!1,he.value==="fromCoin"?(k.value&&n.address.toLowerCase()===(k==null?void 0:k.value.address.toLowerCase())&&(k.value=null),g.value=n):(g.value&&n.address.toLowerCase()===(g==null?void 0:g.value.address.toLowerCase())&&(g.value=null),k.value=n),X.value=!1},zo=n=>{n==="fromCoin"?(q.value=!0,c.value=qe.value>0?g.value.symbol=="APT"?new F(Number(qe.value)).sub(new F(.2)).toString():String(qe.value):""):(q.value=!1,d.value=Oe.value>0?k.value.symbol=="APT"?new F(Number(Oe.value)).sub(new F(.2)).toString():String(Oe.value):"")},mo=()=>{ee.value=setInterval(()=>{b.value||h.value<D.value&&(h.value+=1,h.value===D.value&&(h.value=0))},1e3)};W(c,(n,f)=>{n&&Re()}),W(d,(n,f)=>{n&&Re()});const Wo=()=>{g.value=null,k.value=null,u.value="0",s.value="0",c.value="",d.value="",M.value=!0,Ne.value="",se.value=!1,ne.value=!0,ie.value=!0,be.value=!1},fo=i(!1);vt();const{setIsShowSuccess:vo,setIsShowRejected:po,setIsShowWaiting:Xe,setTransactionDesc:Ho,setTransactionTxid:go,setPositiomNum:Zo}=Z,Se=pt(),Ko=No(),fe=E(()=>Ko);W(()=>fe.value.newTokenObj,n=>{$o(n)||(Se&&Se.query&&Se.query.from?g.value=Ke(n,Se.query.from):g.value=Ke(n,"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDT"),Se&&Se.query&&Se.query.from?k.value=Ke(n,Se.query.to):k.value=Ke(n,"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC"))},{immediate:!0});const Be=i({}),ne=i(!1),ie=i(!1),ze=i(),We=i(),Pe=Ge(),eo=i(),ko=i(),oo=i(),to=i(),Re=async()=>{var Te,Ce;if(!v.value||(console.log("\u6DFB\u52A0\u6D41\u52A8\u6027\u9884\u8BA1\u7B97=====>"),!c.value&&!d.value&&!u.value&&!s.value))return;const{TickUtil:n,TickMath:f,getNearestTickByTick:A}=Ge(),w=v.value.token_a.decimals,P=v.value.token_b.decimals;let R,H,L,z,Y,K,re,pe;const ue=v.value.current_tick_index,ve=v.value.priceConfigObj;console.log(v.value,"====>poolInfo.value.current_tick_index;");let G;if(v.value.token_a.address.toLowerCase()===g.value.address.toLowerCase()&&v.value.token_b.address.toLowerCase()===k.value.address.toLowerCase()?G=!0:G=!1,u.value==="0"&&s.value==="\u221E"?(L=n.getMinIndex(v.value.tickSpacing),z=n.getMaxIndex(v.value.tickSpacing),Y=f.tickIndexToSqrtPriceX64(L),K=f.tickIndexToSqrtPriceX64(z)):C.value=="Custom"?(G?(R=Number(u.value),H=Number(s.value)):(R=1/Number(s.value),H=1/Number(u.value)),re=f.priceToTickIndex(new F(R),w,P),pe=f.priceToTickIndex(new F(H),w,P),L=A(re,v.value.tickSpacing),z=A(pe,v.value.tickSpacing),console.log(L,"===>tick_lower"),console.log(z,"===>tick_upper"),Y=f.priceToSqrtPriceX64(new F(R),w,P),K=f.priceToSqrtPriceX64(new F(H),w,P)):(console.log(ve[C.value],"===>priceConfigObj[currentPriceTab.value]"),L=ve[C.value].lower,z=ve[C.value].upper,Y=f.tickIndexToSqrtPriceX64(L),K=f.tickIndexToSqrtPriceX64(z)),s.value!=="\u221E"&&L>=z){ne.value=!0,c.value="",ie.value=!0,d.value="";return}if(console.log(ue,L,z,"===>currentTickIndex"),s.value==="\u221E"||ue>L&&ue<z){ne.value=!1,ie.value=!1;let x;if(c.value||d.value){if(q.value){const io=new F(c.value).mul(Math.pow(10,g.value.decimals)).toString();x=new $e(io)}else{const io=new F(d.value).mul(Math.pow(10,k.value.decimals)).toString();x=new $e(io)}console.log(G,"======>directs");const{liquidityAmount:J,tokenMaxA:He,tokenMaxB:Ze,tokenMaxAOrigin:tt,tokenMaxBOrigin:nt}=Pe.estLiquidityAndcoinAmountFromOneAmounts({tokenA:v.value.token_a,tokenB:v.value.token_b,lowerTick:L,upperTick:z,coinAmount:x,iscoinA:G?q.value:!q.value,roundUp:!0,slippage:Number(y.value)/100,curSqrtPrice:new $e(v.value.current_sqrt_price)});Be.value={liquidityAmount:J,tokenMaxA:He,tokenMaxB:Ze,tokenMaxAOrigin:tt,tokenMaxBOrigin:nt},G?q.value?d.value=Number(Ze)>0?Ze:"":c.value=Number(He)>0?He:"":q.value?d.value=He:c.value=Ze}}else if(ue>=z){if(G?c.value="":d.value="",ne.value=G,ie.value=!G,c.value||d.value){let x;if(G){const J=new F(d.value).mul(Math.pow(10,(Te=k.value)==null?void 0:Te.decimals)).toString();x=new $e(J),Be.value={liquidityAmount:Io(Y,K,x),tokenMaxA:0,tokenMaxB:d.value}}else{const J=new F(c.value).mul(Math.pow(10,(Ce=g.value)==null?void 0:Ce.decimals)).toString();x=new $e(J),Be.value={liquidityAmount:Io(Y,K,x),tokenMaxA:0,tokenMaxB:c.value}}}}else if(ue<=L){if(ne.value=!G,ie.value=G,G?d.value="":c.value="",c.value||d.value){let x;if(G){const J=new F(c.value).mul(Math.pow(10,g.value.decimals)).toString();x=new $e(J),console.log(Y,"minPriceX64===>"),console.log(K,"maxPriceX64===>maxPriceX64"),console.log(J,"===>amount"),Be.value={liquidityAmount:So(Y,K,x),tokenMaxA:c.value,tokenMaxB:0}}else{const J=new F(d.value).mul(Math.pow(10,k.value.decimals)).toString();x=new $e(J),Be.value={liquidityAmount:So(Y,K,x),tokenMaxA:d.value,tokenMaxB:0}}}}else ne.value=!0,c.value="",ie.value=!0,d.value=""},v=E(()=>{if(fe.value.newTokenObj&&g.value&&k.value){const n=Object.values(fe.value.pools).find(f=>{var A,w,P,R;return f.token_a.address.toUpperCase()===((A=g.value.address)==null?void 0:A.toUpperCase())&&f.token_b.address.toUpperCase()===((w=k.value.address)==null?void 0:w.toUpperCase())||f.token_b.address.toUpperCase()===((P=g.value.address)==null?void 0:P.toUpperCase())&&f.token_a.address.toUpperCase()===((R=k.value.address)==null?void 0:R.toUpperCase())});return n&&!$o(n)?n:null}return null}),ho=i({}),Go=async n=>{if(n){console.log(n,"poolInfo======>");const{TickMath:f,getNearestTickByTick:A}=Ge();be.value=!0,n.token_a.address.toLowerCase()===g.value.address.toLowerCase()&&n.token_b.address.toLowerCase()===k.value.address.toLowerCase()?_.value=!0:_.value=!1,console.log(_.value,"direct.value===>direct.value"),Ae.value=!0;const w=n.token_a.decimals,P=n.token_b.decimals;ne.value=!1,ie.value=!1,Ne.value=n.fee+"% "+e("common.feeTier");const R=n.current_tick_index;eo.value=ao(f.sqrtPriceX64ToPrice(n.current_sqrt_price,w,P).toString(),6),ko.value=Me(String(1/eo.value),6);const H=await Pe.getTicks(n);te.value=Pe.getTickDataFromUrlData(H);let L=n.priceConfigObj;const z=R-Number(v.value=="unstable"?v.value.tickSpacing*2:v.value.tickSpacing*3),Y=R+Number(v.value=="unstable"?v.value.tickSpacing*2:v.value.tickSpacing*3);L["Full Range"]={lower:-443630,upper:443630},L.Custom={lower:z,upper:Y};const K=[];for(let re in L)K.push({...L[re],key:re});if(Le.value=K,n.type=="stable"?C.value="suggested":C.value="active",ho.value=L,no({key:C.value,...L[C.value]}),_.value){const re=L[C.value].lower,pe=L[C.value].upper,ue=f.tickIndexToPrice(re,w,P).toString(),ve=f.tickIndexToPrice(pe,w,P).toString();B.value=String(ue),u.value=String(ue),N.value=String(ve),s.value=String(ve)}else{const re=L[C.value].lower,pe=L[C.value].upper,ue=f.tickIndexToPrice(re,w,P).toString(),ve=f.tickIndexToPrice(pe,w,P).toString();B.value=String(1/Number(ve)),u.value=String(1/Number(ve)),N.value=String(1/Number(ue)),s.value=String(1/Number(ue))}be.value=!1}},bo=i();W(()=>fe.value.RATES,n=>{n&&(bo.value=n)},{immediate:!0}),W(()=>[v.value,c.value,d.value,bo.value,C.value],([n,f,A,w])=>{var P,R;if(n&&(A||f)&&w&&w[n.token_a.name.toUpperCase()]&&w[n.token_b.name.toUpperCase()]){const H=f?Number(f):0,L=A?Number(A):0,z=H*((P=w[n.token_a.name.toUpperCase()])==null?void 0:P.price),Y=L*((R=w[n.token_b.name.toUpperCase()])==null?void 0:R.price),K=z+Y,re=(z/K*100).toFixed(0),pe=(Y/K*100).toFixed(0);oo.value=re,to.value=pe}else n&&w&&(oo.value="--",to.value="--")}),W(()=>v.value,n=>{n?Go(n):(u.value="0",s.value="0",c.value="",d.value="",Ne.value="",se.value=!1,ne.value=!1,ie.value=!1)},{immediate:!0});const qe=E(()=>$.value.assets&&g.value&&$.value.assets[g.value.address]?Ao($.value.assets[g.value.address].balance,g.value.decimals):0),Oe=E(()=>$.value.assets&&k.value&&$.value.assets[k.value.address]?Ao($.value.assets[k.value.address].balance,k.value.decimals):0),Jo=async()=>{var K,re,pe,ue,ve,G;fo.value=!1,fe.value.currentPositionInfo={},go(""),Ho(e("tips.increaseLiquiditySuccess",{from:ne.value?"":`${c.value} ${(K=g.value)==null?void 0:K.symbol}`,and:!ne.value&&!ie.value?"and":"",to:ie.value?"":`${d.value} ${(re=k.value)==null?void 0:re.symbol}`})),Xe(!0);const n=_.value?q.value:!q.value;console.log(ze.value,"tickLower.value1397"),console.log(We.value,"tickLower.value1397");const f=v.value.priceConfigObj;let A,w,P,R,H,L;const z=v.value.token_a.decimals,Y=v.value.token_b.decimals;u.value==="0"&&s.value==="\u221E"?(P=Po.getMinIndex(v.value.tickSpacing),R=Po.getMaxIndex(v.value.tickSpacing)):C.value=="Custom"?(_.value?(A=Number(u.value),w=Number(s.value)):(A=1/Number(s.value),w=1/Number(u.value)),H=_e.priceToTickIndex(new F(A),z,Y),L=_e.priceToTickIndex(new F(w),z,Y),P=To(H,v.value.tickSpacing),R=To(L,v.value.tickSpacing)):(P=f[C.value].lower,R=f[C.value].upper),console.log(P,"===>tick_lower"),console.log(R,"===>tick_upper"),console.log(v.value.current_tick_index,"===>currentTick1429");try{const Te=await Pe.getAddLiquidityTransactionPayload({pool:{poolAddress:v.value.poolAddress,token_a:v.value.token_a,token_b:v.value.token_b},amount:q.value?c.value:d.value,fix_amount_a:n,tick_lower:P,tick_upper:R,index:0,slippage:Number(y.value)/100,roundUp:!0});console.log(Te,"===>payload");let Ce;if(Ce=await $.value.currentWallet.signAndSubmitTransaction(Te),Ce&&Ce.hash){go(Ce.hash),Xe(!1),vo(!0),console.log(Ce,"tx====>");const x={title:e("button.addLiquidity"),desc:e("tips.addLiquiditySuccessText",{from:ne.value?"":`${c.value} ${(pe=g.value)==null?void 0:pe.symbol}`,and:!ne.value&&!ie.value?"and":"",to:ie.value?"":`${d.value} ${(ue=k.value)==null?void 0:ue.symbol}`}),hash:Ce.hash,tit:`Opened Position: ${v.value.symbol}`,text:`Deopsit ${ne.value?"":`${c.value} ${(ve=g.value)==null?void 0:ve.symbol}`} ${!ne.value&&!ie.value?"and":""} ${ie.value?"":`${d.value} ${(G=k.value)==null?void 0:G.symbol}`}`};Pe.showTransitionPending(x);const J=await Pe.watchTransaction(x,!0);console.log("1219###watchInfo####",J,J.nftInfo[0].data),J.status&&(vo(!1),fe.value.setCurrentPositionLoading(!0),fe.value.setCurrentPositionInfo(J.nftInfo[0].data.id.creator,J.nftInfo[0].data.id.collection,J.nftInfo[0].data.name),oe.value=!0,setTimeout(()=>{Pe.getAccount($.value.address)},1e3)),Zo()}else Xe(!1),po(!0);c.value="",d.value=""}catch(Te){c.value="",d.value="",console.log("Swap Error###",Te),Xe(!1),po(!0)}},Qo=n=>{switch(n){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"Full Range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"Custom":return e("newAdd.customTips")}},Yo=n=>{switch(n){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"Full Range":return e("newAdd.fullRange");case"Custom":return e("newAdd.custom")}},no=n=>{C.value=n.key;const f=v.value.token_a.decimals,A=v.value.token_b.decimals,{lower:w,upper:P}=n;console.log(n,"===>item");const R=_e.tickIndexToPrice(w,f,A).toString(),H=_e.tickIndexToPrice(P,f,A).toString();if(console.log(R,H,"min=====>max"),n.key=="Full Range"){ze.value=w,We.value=P,Ve(!0);return}_.value?(B.value=String(R),u.value=String(R),N.value=String(H),s.value=String(H),ze.value=w,We.value=P):(B.value=String(1/Number(H)),u.value=String(1/Number(H)),N.value=String(1/Number(R)),s.value=String(1/Number(R)),ze.value=_e.priceToTickIndex(new F(1/Number(H)),f,A),We.value=_e.priceToTickIndex(new F(1/Number(R)),f,A)),Re()},Co=i(""),yo=i(""),wo=i(""),xo=E(()=>Z);W(()=>[xo.value.newTopPoolsObj,v.value],([n,f])=>{if(console.log(f,"===>poolInfo"),console.log(n,"newValue========>"),n&&f&&n[f.poolAddress]){const A=n[f.poolAddress];Co.value=A.apr_7day,yo.value=ao(A.tvl_in_usd,2),wo.value=ao(A.vol_in_usd_24h,2)}},{immediate:!0,deep:!0});const et=E(()=>fe.value.newTokenObj&&g.value.address&&fe.value.newTokenObj[g.value.address]&&fe.value.newTokenObj[g.value.address].logoURI),ot=E(()=>fe.value.newTokenObj&&k.value.address&&fe.value.newTokenObj[k.value.address]&&fe.value.newTokenObj[k.value.address].logoURI);return{isViewDetail:oe,addCommom:gt,fromCoinUrl:et,toCoinUrl:ot,t:e,wallet:$,toAdd:Jo,chartLoading:be,currentTick:co,tickList:te,poolInfo:v,storeIndex:Fo,importIcon:Je,refresh:le,addLiquidityBtnText:de,slippage:y,isShowSwapSetting:V,autoRefreshTime:D,countdown:h,setMarketTimer:mo,marketTimer:ee,loading:b,fromCoin:g,toCoin:k,openCoinSelect:Vo,onCoinSelect:Xo,existingCoins:T,lastSelectCoin:r,currentCoinKey:he,showCoinSelect:X,fromCoinAmount:c,toCoinAmount:d,maxBtnSelect:zo,fixedFromCoin:q,isShowLiquidityModal:fo,direct:_,toggle:Eo,edit:se,inputValue:Ne,feeTierList:S,minPrice:u,maxPrice:s,invalidPriceRange:Ie,defaultMinPrice:B,defaultMaxPrice:N,priceRangeChangeMin:jo,priceRangeChangeMax:Do,toFullRange:Ve,unilateral:ce,clearAll:Wo,clickClear:M,positionError:U,positionTips:m,router:Uo,clickRefresh:we,fromCoinBlance:qe,toCoinBlance:Oe,showToCoinLock:ie,showFromCoinLock:ne,currentPriceReverse:ko,currentPrice:eo,getPirceText:Qo,currentPriceTab:C,currentPriceTabList:Le,getPirceKey:Yo,priceTab:no,apr:Co,liquidityTvl:yo,vol24:wo,fromCoinRatio:oo,toCoinRatio:to}}});const Ee=e=>(Qe("data-v-9ce0081e"),e=e(),Ye(),e),On={class:"pools-container"},Fn={class:"title"},Un={class:"left"},jn={class:"right title-right"},Dn=Ee(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),En={class:"content"},Vn={class:"content-left"},Xn={class:"content-left-bg"},zn={class:"content-left-title"},Wn={class:"coin-select"},Hn={class:"deposit-title"},Zn={class:"card-container"},Kn={class:"card-item"},Gn={key:0,class:"unilateral"},Jn={key:0,src:Bo,alt:""},Qn={key:1,src:Ro,alt:""},Yn={key:2},xn={class:"card-item"},ei={key:0,class:"unilateral"},oi={key:0,src:Bo,alt:""},ti={key:1,src:Ro,alt:""},ni={key:2},ii={key:0,class:"deposit-ratio"},ai={class:"lebal"},li=Ee(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),si={class:"text"},ri=Ee(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-add"})],-1)),ui={class:"content-right"},ci={class:"content-right-title"},di=Ee(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),mi={key:0,class:"price-tab"},fi=["onClick"],vi={key:1,class:"current-price"},pi={key:0,class:"coin"},gi={key:1,class:"coin"},ki={key:2,class:"toggle"},hi=["src"],bi=["src"],Ci={key:3,class:"position-tips"},yi=["src"],wi={class:"tips"},Ii={key:4,class:"position-tips"},Si=["src"],Pi={class:"error"},Ti={class:"d3-chart-box"},$i={key:0},Ai={key:0,class:"noDataImg",src:_t},_i={key:1,class:"noDataImg",src:Mt},Mi={key:2,class:"not-select-mask"},Ni={key:0,class:"pool-info"},Li={class:"pool-info-title"},Bi={class:"info-block-container"},Ri={class:"info-block"},qi={class:"leabl"},Oi={class:"text"},Fi={class:"info-block"},Ui={class:"leabl"},ji={class:"text"},Di={class:"info-block"},Ei={class:"leabl"},Vi={class:"text"},Xi={class:"info-block"},zi={class:"leabl"},Wi={class:"text"},Hi=Ee(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-add"})],-1));function Zi(e,t,I,$,Z,D){var M,c,d,u,s,B,N,se;const h=it,ee=at,oe=Dt,b=ht,V=yt,ce=bt,he=uo,T=Jt,r=an,X=Ct,_=wt,ae=Nt,le=Lt,q=Rn;return l(),p("div",On,[j(h),o("div",Fn,[o("div",Un,[o("span",null,a(e.$t("common.concentratedLiquidity")),1)]),o("div",jn,[o("span",{class:"clear",onClick:t[0]||(t[0]=(...m)=>e.clearAll&&e.clearAll(...m))},a(e.$t("common.clearAll")),1),o("div",{class:"slippage-icon",onClick:t[1]||(t[1]=m=>e.isShowSwapSetting=!0)},[Dn,o("span",null,a(e.slippage)+"%",1)]),j(ee,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:t[2]||(t[2]=m=>e.clickRefresh())},null,8,["loading","auto-refresh-time","countdown"])])]),o("div",En,[o("div",Vn,[o("div",Xn,[o("div",zn,a(e.$t("common.selectPool")),1),o("div",Wn,[j(oe,{"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","coin-name":e.fromCoin&&e.fromCoin.symbol,onClick:t[3]||(t[3]=m=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name"]),j(oe,{"coin-icon":e.toCoin?e.toCoin.logoURI:"","coin-name":e.toCoin&&e.toCoin.symbol,onClick:t[4]||(t[4]=m=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name"])]),j(b,{placeholder:e.$t("common.feeTier"),value:e.inputValue,disabled:""},null,8,["placeholder","value"]),o("div",Hn,a(e.$t("newAdd.depositAmounts")),1),o("div",Zn,[o("div",Kn,[j(V,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=m=>e.fromCoinAmount=m),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[6]||(t[6]=m=>e.maxBtnSelect("fromCoin")),onOnInput:t[7]||(t[7]=m=>{e.fromCoinAmount=m,e.fixedFromCoin=!0}),onOnSelect:t[8]||(t[8]=m=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon"]),e.showFromCoinLock?(l(),p("div",Gn,[o("div",null,[e.storeIndex.theme=="default"?(l(),p("img",Jn)):(l(),p("img",Qn)),e.fromCoin&&e.toCoin?(l(),p("p",Yn,a(e.$t("tips.marketprice")),1)):O("",!0)])])):O("",!0)]),o("div",xn,[j(V,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[9]||(t[9]=m=>e.toCoinAmount=m),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"","import-page":"deposit","has-arrow":!1,onOnMax:t[10]||(t[10]=m=>e.maxBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=m=>{e.toCoinAmount=m,e.fixedFromCoin=!1}),onOnSelect:t[12]||(t[12]=m=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon"]),e.showToCoinLock?(l(),p("div",ei,[o("div",null,[e.storeIndex.theme=="default"?(l(),p("img",oi)):(l(),p("img",ti)),e.fromCoin&&e.toCoin?(l(),p("p",ni,a(e.$t("tips.marketprice")),1)):O("",!0)])])):O("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(l(),p("img",{key:0,class:"add",src:$t,alt:"",onClick:t[13]||(t[13]=(...m)=>e.toggle&&e.toggle(...m))})):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(l(),p("img",{key:1,class:"add",src:At,alt:"",onClick:t[14]||(t[14]=(...m)=>e.toggle&&e.toggle(...m))})):O("",!0)]),e.poolInfo?(l(),p("div",ii,[o("div",ai,[ge(a(e.$t("newAdd.depositRatio"))+" ",1),j(ce,{placement:"bottom","arrow-point-at-center":""},{title:Q(()=>[o("span",null,a(e.$t("newAdd.depositRatioTips")),1)]),default:Q(()=>[li]),_:1})]),o("div",si,a(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+a(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+a(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+a(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)])):O("",!0)]),j(he,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.addLiquidityBtnText!==e.$t("button.addLiquidity")||e.poolInfo.is_pause:!1,class:"big-btn",onClick:t[15]||(t[15]=m=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Q(()=>[ri,o("span",null,a(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"])]),o("div",ui,[o("div",ci,[ge(a(e.$t("newAdd.selectRange"))+" ",1),j(ce,{placement:"bottom","arrow-point-at-center":""},{title:Q(()=>[o("span",null,a(e.$t("newAdd.selectRangeTips")),1)]),default:Q(()=>[di]),_:1})]),o("div",{class:Fe(e.clickClear||!e.fromCoin||!e.toCoin||!e.poolInfo?"content-right-bg content-right-bg-height":"content-right-bg")},[e.poolInfo&&e.minPrice&&e.maxPrice?(l(),p("div",mi,[(l(!0),p(_o,null,kt(e.currentPriceTabList,m=>(l(),p("div",{key:m,class:Fe(["price-item",{"price-item-active":m.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:U=>e.priceTab(m)},[j(ce,{placement:"bottom","arrow-point-at-center":""},{title:Q(()=>[o("span",null,a(e.getPirceText(m.key)),1)]),default:Q(()=>[ge(" "+a(e.getPirceKey(m.key)),1)]),_:2},1024)],10,fi))),128))])):O("",!0),e.poolInfo?(l(),p("div",vi,[e.fromCoin&&e.toCoin&&e.direct?(l(),p("div",pi,[o("span",null,a(e.$t("common.currentPrice")),1),ge(" "+a(e.addCommom(e.currentPrice))+" "+a((M=e.toCoin)==null?void 0:M.symbol)+" per "+a((c=e.fromCoin)==null?void 0:c.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(l(),p("div",gi,[o("span",null,a(e.$t("common.currentPrice")),1),ge(" "+a(e.addCommom(e.currentPriceReverse))+" "+a((d=e.toCoin)==null?void 0:d.symbol)+" per "+a((u=e.fromCoin)==null?void 0:u.symbol),1)])):O("",!0),e.fromCoin&&e.toCoin?(l(),p("div",ki,[o("div",{class:Fe(e.direct?"item active-item":"item"),onClick:t[16]||(t[16]=m=>e.direct?"":e.toggle())},[o("img",{src:e.direct?e.fromCoin.logoURI:e.toCoin.logoURI,alt:""},null,8,hi),ge(" "+a(e.direct?(s=e.fromCoin)==null?void 0:s.symbol:(B=e.toCoin)==null?void 0:B.symbol),1)],2),o("div",{class:Fe(e.direct?"item ":"item active-item"),onClick:t[17]||(t[17]=m=>e.direct?e.toggle():"")},[o("img",{src:e.direct?e.toCoin.logoURI:e.fromCoin.logoURI,alt:""},null,8,bi),ge(" "+a(e.direct?(N=e.toCoin)==null?void 0:N.symbol:(se=e.fromCoin)==null?void 0:se.symbol),1)],2)])):O("",!0)])):O("",!0),e.poolInfo?(l(),ye(T,{key:2,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):O("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(l(),p("div",Ci,[o("img",{src:e.importIcon("/image/icon-tips@2x.png"),alt:""},null,8,yi),o("p",wi,a(e.$t("tips.positionTips")),1)])):O("",!0),e.positionError&&!e.clickClear&&e.poolInfo?(l(),p("div",Ii,[o("img",{src:e.importIcon("/image/icon-tips-error@2x.png"),alt:""},null,8,Si),o("p",Pi,a(e.$t("tips.positionError")),1)])):O("",!0),o("div",Ti,[(e.clickClear||!e.poolInfo)&&!e.chartLoading?(l(),p("div",$i,[e.storeIndex.theme=="default"?(l(),p("img",Ai)):(l(),p("img",_i)),o("p",null,a(e.$t("newAdd.positionAppear")),1)])):O("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(l(),ye(r,{key:1,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","onOnChangeMinPrice","onOnChangeMaxPrice"])):O("",!0),e.currentPriceTab!=="Custom"?(l(),p("div",Mi)):O("",!0),e.chartLoading?(l(),ye(X,{key:3})):O("",!0)])],2),e.poolInfo?(l(),p("div",Ni,[e.apr&&e.liquidityTvl&&e.vol24?(l(),p(_o,{key:0},[o("div",Li,a(e.$t("newAdd.poolInfo")),1),o("div",Bi,[o("div",Ri,[o("div",qi,a(e.$t("common.apr")),1),o("div",Oi,[j(ce,{placement:"bottom","arrow-point-at-center":""},{title:Q(()=>[o("span",null,a(e.$t("tips.aprTipsTest")),1)]),default:Q(()=>[ge(" "+a(e.apr),1)]),_:1})])]),o("div",Fi,[o("div",Ui,a(e.$t("common.liquidity")),1),o("div",ji,"$ "+a(e.liquidityTvl),1)]),o("div",Di,[o("div",Ei,a(e.$t("common.volume24h")),1),o("div",Vi,"$ "+a(e.vol24),1)]),o("div",Xi,[o("div",zi,a(e.$t("newAdd.tickSpacing")),1),o("div",Wi,a(e.poolInfo&&e.poolInfo.tick_spacing),1)])])],64)):(l(),ye(X,{key:1}))])):O("",!0)])]),j(he,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.poolInfo.is_pause:!1,class:"big-btn h5-btn",onClick:t[18]||(t[18]=m=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Q(()=>[Hi,o("span",null,a(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(l(),ye(_,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[19]||(t[19]=m=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):O("",!0),e.isShowSwapSetting?(l(),ye(ae,{key:1,onOnClose:t[20]||(t[20]=m=>e.isShowSwapSetting=!1)})):O("",!0),e.isShowLiquidityModal?(l(),ye(le,{key:2,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,onToAdd:e.toAdd,onOnClose:t[21]||(t[21]=m=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","onToAdd"])):O("",!0),e.isViewDetail?(l(),ye(q,{key:3,onOnClose:t[22]||(t[22]=m=>e.isViewDetail=!1)})):O("",!0)])}const ra=De(qn,[["render",Zi],["__scopeId","data-v-9ce0081e"]]);export{ra as default};
