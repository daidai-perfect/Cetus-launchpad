import{_ as Se}from"./pool-position-tab.ff87fa47.js";import{_ as Ae}from"./upgrade-select-input.b624dd9d.js";import{_ as Ne}from"./upgrade-loading.0c1dc335.js";import{a as oe,m as v,o as i,f as r,h as o,i as C,v as a,j as ee,e as se,r as y,D as q,u as l,p as de,k as me,K as ue,M as Y,x as N,z as ae,l as we,b as $e,y as ye,q as Oe,w as z,Z as je,L as Te,S as Le,t as ne,F as x,s as ie,N as De,T as Be,c as ke,B as Fe}from"./entry.0caab9e0.js";import{a as ve,j as fe,u as Re,b as Ee}from"./pool.e34b56ac.js";import{u as Ge}from"./notifi.ff7ec4d6.js";import{b as k,d as $,s as he,c as le,j as Me,a as qe,i as He,B as Ce,u as Ve,g as ze}from"./index.98582d64.js";import{i as re}from"./import-icon.de3e6c66.js";import{T as We}from"./total-position.36c99cf6.js";import{C as be}from"./coin-img.917fccf4.js";import{T as Ie}from"./token-warning-new.3218fc05.js";import"./index.d2b47555.js";/* empty css              */import{D as te}from"./decimal.0bdeb344.js";import{u as Je}from"./farms.cb506725.js";import{_ as Pe}from"./icon_farms_2x.e2b5c79d.js";import{_ as Ke}from"./icon_rewards_2x.f4af5f96.js";import{_ as Ze}from"./img-no-Positions_2x.c0c7e203.js";import{_ as Qe}from"./img-no-Positions_2x.fcf627ba.js";import{_ as Xe}from"./img-connect-wallet_2x.9d91c2fb.js";import{_ as Ye}from"./img-connect-wallet_2x.b6d7505d.js";import"./pool.ad26182a.js";import"./select-tab.24cd0dcc.js";import"./coin-select.63842474.js";/* empty css              */import"./token-warning_2x.5b1c434d.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./useWhale.5c8f7203.js";/* empty css              *//* empty css              */import"./icon-selected_3x.09e9a6f0.js";import"./coin-pair-name.bc91ea3f.js";import"./token-warning.68c422cb.js";import"./no-data.72439221.js";import"./token.0cd1db4c.js";const xe={class:"pool-symbol-name-block"},eo={class:"coin-info-fee"},oo={class:"coin-logo"},so={class:"logo-token-warning"},no={class:"logo-token-warning"},to={class:"symbol-label"},ao={class:"pool-name"},io={class:"pool-fee"},ro={class:"name"},lo=oe({__name:"pool-symbol-name-block",props:{poolInfo:{type:Object,default:()=>({})}},setup(e){const d=e,b=v(()=>{var _,I,n,f;return console.log("ðŸš€ ~ tokenA ~ props.poolInfo?.is_forward:props.poolInfoprops.poolInfo",(_=d.poolInfo)==null?void 0:_.is_forward),(I=d.poolInfo)!=null&&I.is_forward?(n=d.poolInfo)==null?void 0:n.token_a:(f=d.poolInfo)==null?void 0:f.token_b}),w=v(()=>{var _,I,n,f;return console.log("ðŸš€ ~ tokenA ~ props.poolInfo?.is_forward:props.poolInfoprops.poolInfo",(_=d.poolInfo)==null?void 0:_.is_forward),(I=d.poolInfo)!=null&&I.is_forward?(f=d.poolInfo)==null?void 0:f.token_b:(n=d.poolInfo)==null?void 0:n.token_a});return console.log(b.value,w.value,d.poolInfo,"props.poolInfoprops.poolInfo"),(_,I)=>{var n,f,c,u,g,D;return i(),r("div",xe,[o("div",eo,[o("div",oo,[o("div",so,[C(be,{url:(n=b.value)==null?void 0:n.logo_url,size:"36px"},null,8,["url"]),C(Ie,{token:b.value,"style-params":{width:"16px",height:"16px"}},null,8,["token"])]),o("div",no,[C(be,{url:(f=w.value)==null?void 0:f.logo_url,size:"36px"},null,8,["url"]),C(Ie,{token:w.value,"style-params":{width:"16px",height:"16px"}},null,8,["token"])]),o("div",to,[o("div",ao,[o("span",null,a((c=b.value)==null?void 0:c.symbol),1),ee(" Â -Â  "),o("span",null,a((u=w.value)==null?void 0:u.symbol),1),o("div",io,a(e.poolInfo.fee*100)+"%",1)]),o("div",ro,[o("span",null,a((g=b.value)==null?void 0:g.name),1),ee(" Â -Â  "),o("span",null,a((D=w.value)==null?void 0:D.name),1)])])])])])}}});const mo=se(lo,[["__scopeId","data-v-a6a9e521"]]),uo=oe({props:{poolInfo:{type:Object,default:()=>null}},setup(e){const d=y(),b=y(),w=v(()=>{var u;return(u=e.poolInfo)==null?void 0:u.needReverse}),_=ve(),I=v(()=>_),n=v(()=>I.value.currentExplorer),f=v(()=>I.value.theme),c=y(!0);return q(()=>[e.poolInfo],([u])=>{u&&(d.value=u.token_a,b.value=u.token_b)},{immediate:!0}),{needReverse:w,theme:f,indexStore:_,direct:c,addCommom:k,decimalUi:$,fromCoin:d,toCoin:b,getExplorerUrl:fe,currentExplorer:n}}});const ge=e=>(de("data-v-324b926c"),e=e(),me(),e),co={class:"pos-current-price"},po=ge(()=>o("span",{class:"tit"},"Current Price",-1)),vo={key:0},fo={class:"text"},ho={key:1},go={class:"text"},_o={class:"coin-rate"},ko=ge(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),bo=ge(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Io=[ko,bo];function wo(e,d,b,w,_,I){var n,f,c,u;return i(),r("div",co,[po,(e.needReverse?!e.direct:e.direct)?(i(),r("div",vo,[ee(a(("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.poolInfo.currentPrice,6)))+" Â  ",1),o("span",fo,a((n=e.toCoin)==null?void 0:n.symbol)+" per "+a((f=e.fromCoin)==null?void 0:f.symbol),1)])):(i(),r("div",ho,[ee(a(("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.poolInfo.currentPriceReverse,6)))+" Â  ",1),o("span",go,a((c=e.fromCoin)==null?void 0:c.symbol)+" per "+a((u=e.toCoin)==null?void 0:u.symbol),1)])),o("div",_o,[o("div",{onClick:d[0]||(d[0]=g=>e.direct=!e.direct)},Io)])])}const $o=se(uo,[["render",wo],["__scopeId","data-v-324b926c"]]),yo=oe({props:{poolInfo:{type:Object,default:()=>({})},usePropsDirect:{type:Boolean,require:!1,default:!1},propDirect:{type:Boolean,require:!1,default:!1}},setup(e,d){const b=y(!0),w=y(e.usePropsDirect),_=y(e.propDirect);q(()=>e.propDirect,c=>{_.value=c},{immediate:!0});const I=y(),n=y();return q(()=>e.poolInfo,c=>{c&&!le(c)&&(c.maxPrice!=="âˆž"&&(I.value=new te(1).div(new te(c.maxPrice)).toString()),c.minPrice>0&&(n.value=new te(1).div(new te(c.minPrice)).toString()))},{immediate:!0}),{sFixD:he,direct:b,isUsepropsDirect:w,propsDirect:_,clickChange:()=>{b.value=!b.value,w.value&&d.emit("clickChange")},minPriceResever:I,maxPriceResever:n,decimalUi:$,addCommom:k}}});const Ue=e=>(de("data-v-7b4b5969"),e=e(),me(),e),Ro={class:"new-range"},Co={key:0},Po={class:"num"},Uo={class:"num"},So={class:"per"},Ao={key:1},No={class:"num"},Oo={class:"num"},jo={class:"per"},To=Ue(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Lo=Ue(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Do=[To,Lo];function Bo(e,d,b,w,_,I){var n,f,c,u;return i(),r("div",Ro,[(e.isUsepropsDirect?e.propsDirect:e.direct)?(i(),r("p",Co,[o("span",Po,a(("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.poolInfo.minPrice,6)))+"Â -",1),o("span",Uo,"Â "+a(("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.poolInfo.maxPrice,6)))+"Â ",1),o("span",So,a((n=e.poolInfo.coinB)==null?void 0:n.symbol)+" per "+a((f=e.poolInfo.coinA)==null?void 0:f.symbol),1)])):(i(),r("p",Ao,[o("span",No,a(e.poolInfo.maxPrice!=="âˆž"?("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.minPriceResever,6)):"0")+"Â -",1),o("span",Oo,"Â "+a(e.poolInfo.minPrice>0?("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.maxPriceResever,6)):"âˆž")+"Â ",1),o("span",jo,a((c=e.poolInfo.coinA)==null?void 0:c.symbol)+" per "+a((u=e.poolInfo.coinB)==null?void 0:u.symbol),1)])),o("div",{class:"icon-change",onClick:d[0]||(d[0]=ue(()=>e.clickChange(),["stop"]))},Do)])}const Fo=se(yo,[["render",Bo],["__scopeId","data-v-7b4b5969"]]),Eo=oe({components:{NewFarmsRange:Fo},props:{poolInfo:{type:Object,default:()=>({})}},setup(){const e=y(!0);return{sFixD:he,direct:e}}});const Go=e=>(de("data-v-18bcb54c"),e=e(),me(),e),Mo={class:"pos-valid-range"},qo=["src"],Ho={class:"status-text"},Vo={class:"right"},zo=Go(()=>o("div",{class:"title"},"Price Range",-1));function Wo(e,d,b,w,_,I){var f,c,u,g;const n=Y("NewFarmsRange");return i(),r("div",Mo,[o("div",{class:ae(["status-box",((f=e.poolInfo)==null?void 0:f.currentStatus)=="Active"?"active-box":"inactive-box"])},[(c=e.poolInfo)!=null&&c.currentStatus?(i(),r("img",{key:0,src:((u=e.poolInfo)==null?void 0:u.currentStatus)=="Active"?"/sui-image/icon_pos_active@2x.png":"/sui-image/img_inactive@2x.png",alt:""},null,8,qo)):N("",!0),o("span",Ho,a((g=e.poolInfo)==null?void 0:g.currentStatus),1)],2),o("div",Vo,[zo,C(n,{"pool-info":e.poolInfo},null,8,["pool-info"])])])}const Jo=se(Eo,[["render",Wo],["__scopeId","data-v-18bcb54c"]]),Ko=oe({components:{PosValidRange:Jo},props:{pItem:{type:Object,required:!0}},setup(e){const{t:d}=we(),b=$e(),w=ve(),_=v(()=>w);v(()=>_.value.chainName?Ee(_.value.chainName):{});const I=Re(),n=v(()=>I),f=()=>{I.setPositionDetailCurrentTab("increase"),_.value.chainName==="Aptos"?b.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):e.pItem.positionSource=="clmm"?b.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`):b.push(`/new-position-detail?position_nft_id=${e.pItem.id}&positionSource=farming`)},c=v(()=>n.value.allTokenObj&&e.pItem.token_a.address&&n.value.allTokenObj[e.pItem.token_a.address]&&n.value.allTokenObj[e.pItem.token_a.address].logo_url),u=v(()=>n.value.allTokenObj&&e.pItem.token_b.address&&n.value.allTokenObj[e.pItem.token_b.address]&&n.value.allTokenObj[e.pItem.token_b.address].logo_url),g=v(()=>n.value.feeOwedObj[e.pItem.tokenName]&&n.value.feeOwedObj[e.pItem.tokenName].feeOwed),D=v(()=>n.value.feeOwedObj[e.pItem.tokenName]&&n.value.feeOwedObj[e.pItem.tokenName].feesResult),A=v(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarder||0),H=v(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarderView||0),P=v(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),F=v(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].farmingRewardList),O=y(0),j=y();q(()=>n.value.RATES,s=>{s&&(j.value=s)},{immediate:!0});const T=s=>{var t;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((t=n.value.tokensObj[s==null?void 0:s.address])==null?void 0:t.logo_url)||(_.value.theme==="default"?re("/image/coins/unknown.png"):re("/image/coins/sui-unknown.png"))},V=v(()=>n.value.tokensObj);ye(()=>{X(e.pItem.minPrice,e.pItem.maxPrice)});const m=y("--"),X=(s,t)=>{s!=="0"&&t!=="âˆž"?m.value=he(1/(1-Number((s/t)**.25)),2)+"x":m.value="1x"};y(30);const S=y(null),pe=v(()=>{var s,t,p,h,R,U,L,B,W,J,K,Z;return S.value?S.value.is_display_rewarder?(s=S.value)!=null&&s.aprPercentageTotal?((t=S.value)==null?void 0:t.aprPercentageTotal)>1e4?">10,000":((p=S.value)==null?void 0:p.aprPercentageTotal)<.01&&((h=S.value)==null?void 0:h.aprPercentageTotal)>0?"<0.01":k((R=S.value)==null?void 0:R.aprPercentageTotal,2):(U=S.value)!=null&&U.rewardAprList?"0":"--":(L=S.value)!=null&&L.aprFee?((B=S.value)==null?void 0:B.aprFee)>1e4?">10,000":((W=S.value)==null?void 0:W.aprFee)<.01&&((J=S.value)==null?void 0:J.aprFee)>0?"<0.01":k((K=S.value)==null?void 0:K.aprFee,2):(Z=S.value)!=null&&Z.rewardAprList?"0":"--":"--"}),E=Je(),G=v(()=>E),M=v(()=>G.value.farmsPoolObj);return{currentExplorer:v(()=>_.value.currentExplorer),getExplorerUrl:fe,aprNum:pe,lever:m,tokensObj:V,showNum:Me,fromCoinUrl:c,toCoinUrl:u,decimalFormat:qe,clickDetails:f,t:d,addCommom:k,importIcon:re,router:b,store:_,pendingRewarder:A,pendingFees:g,pendingRewarderArr:P,pendingFeesArr:D,checkNullObj:le,fixD:He,decimalUi:$,pendingRewarderView:H,aprAmount:O,getCoinIcon:T,Decimal:te,farmsPoolObj:M,farmingRewardList:F,formatCurrency:Ce}}});const Q=e=>(de("data-v-c7b4da13"),e=e(),me(),e),Zo={class:"card-content"},Qo={class:"pos-name"},Xo={class:"pos"},Yo=Q(()=>o("span",null,"Position NFT ",-1)),xo=["href"],es=Q(()=>o("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),os=[es],ss={class:"bottom-info"},ns={class:"bottom"},ts={class:"info-block-container"},as={class:"leabl"},is={class:"text"},rs={key:0,class:"hover-rewarder"},ls={class:"rewarder-info"},ds={class:"left-rewarder"},ms={alt:""},us={class:"right-rewarder"},cs={class:"amount"},ps={key:0,class:"amount-usd"},vs={key:1,class:"amount-usd"},fs={class:"rewarder-info"},hs={class:"left-rewarder"},gs={alt:""},_s={class:"right-rewarder"},ks={class:"amount"},bs={key:0,class:"amount-usd"},Is={key:1,class:"amount-usd"},ws={class:"leabl"},$s={key:0,class:"text"},ys={key:1,class:"text"},Rs={class:"hover-rewarder"},Cs={class:"left-rewarder"},Ps={alt:""},Us={class:"right-rewarder"},Ss={class:"amount"},As={class:"amount-usd"},Ns={key:2,class:"text"},Os={class:"label-box"},js={key:0,class:"text"},Ts={class:"img-text"},Ls={key:0,class:"leabl"},Ds=Q(()=>o("img",{class:"img-default",src:Pe,alt:""},null,-1)),Bs=[Ds],Fs={key:1,class:"leabl"},Es=Q(()=>o("img",{class:"img-default",src:Ke,alt:""},null,-1)),Gs=[Es],Ms={class:"hover-rewarder"},qs=Q(()=>o("div",{class:"title"},"Mining Rewards",-1)),Hs={class:"left-rewarder"},Vs={alt:""},zs={class:"right-rewarder"},Ws={class:"amount"},Js={class:"amount-usd"},Ks=Q(()=>o("div",{class:"title"},"Farming Rewards",-1)),Zs={class:"left-rewarder"},Qs={alt:""},Xs={class:"right-rewarder"},Ys={class:"amount"},xs={class:"amount-usd"},en={key:1,class:"text"},on=Q(()=>o("div",{class:"more-box"},[o("div",{class:"more"},[o("svg",{class:"arrow-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_arrow"})])])],-1));function sn(e,d,b,w,_,I){var g,D,A,H,P,F,O,j,T,V;const n=Y("PosValidRange"),f=Te,c=Le,u=Oe("image");return i(),r("div",{class:"new-my-position-item",onClick:d[2]||(d[2]=(...m)=>e.clickDetails&&e.clickDetails(...m))},[o("div",Zo,[o("div",Qo,[o("div",Xo,a(e.pItem.tokenName.split("|")[1]),1),Yo,(g=e.pItem)!=null&&g.nftHash?(i(),r("a",{key:0,target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:l(fe))(e.currentExplorer,"nftAddress",e.pItem.nftHash)}," Â "+a((A=(D=e.pItem)==null?void 0:D.nftHash)==null?void 0:A.substr(0,4))+" ... "+a((O=(H=e.pItem)==null?void 0:H.nftHash)==null?void 0:O.substr(((F=(P=e.pItem)==null?void 0:P.nftHash)==null?void 0:F.length)-4,4))+"Â  ",9,xo)):N("",!0),(j=e.pItem)!=null&&j.nftHash?(i(),r("svg",{key:1,class:"icon","aria-hidden":"true",onClick:d[0]||(d[0]=ue(m=>e.store.copy(e.pItem.nftHash),["stop"]))},os)):N("",!0)]),o("div",ss,[o("div",ns,[o("div",ts,[o("div",{class:"info-block",onClick:d[1]||(d[1]=ue(()=>{},["stop"]))},[C(n,{"pool-info":{...e.pItem,minPrice:e.pItem.needReverse?e.pItem.maxPrice==="âˆž"?"0":("decimalUi"in e?e.decimalUi:l($))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6):("decimalUi"in e?e.decimalUi:l($))(e.pItem.minPrice,6),maxPrice:(e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="âˆž")?"âˆž":e.pItem.needReverse?("decimalUi"in e?e.decimalUi:l($))(1/e.pItem.minPrice,6):("decimalUi"in e?e.decimalUi:l($))(e.pItem.maxPrice,6)}},null,8,["pool-info"])]),o("div",{class:ae(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[o("div",as,a(e.$t("common.liquidity")),1),o("div",is,[C(f,{"overlay-class-name":"position-tooltip"},{title:z(()=>[e.pItem.amountUSD>0?(i(),r("div",rs,[o("div",ls,[o("div",ds,[ne(o("img",ms,null,512),[[u,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),o("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),o("div",us,[o("div",cs,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(i(),r("div",vs,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:l(k))(e.pItem.tokenBRates,2):"<$0.01"),1)):(i(),r("div",ps,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:l(k))(e.pItem.tokenARates,2):"<$0.01"),1))])]),o("div",fs,[o("div",hs,[ne(o("img",gs,null,512),[[u,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),o("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),o("div",_s,[o("div",ks,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(i(),r("div",Is,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.pItem.tokenARates,2)):"<$0.01"),1)):(i(),r("div",bs,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):N("",!0)]),default:z(()=>[o("span",null," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:l(k))(e.pItem.amountUSD,2)),1)]),_:1})])],2),o("div",{class:ae(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[o("div",ws,a(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(i(),r("div",$s,"$ --")):isNaN(e.pendingFees)?(i(),r("div",Ns,[C(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(i(),r("div",ys,[C(f,{"overlay-class-name":"position-tooltip"},{title:z(()=>[o("div",Rs,[(i(!0),r(x,null,ie(e.pendingFeesArr,m=>(i(),r("div",{key:m,class:"rewarder-info"},[o("div",Cs,[ne(o("img",Ps,null,512),[[u,e.getCoinIcon(m)]]),o("span",null,a(m.symbol),1)]),o("div",Us,[o("div",Ss,a(Number(m.amount)==0?0:("formatCurrency"in e?e.formatCurrency:l(Ce))(m.amount,m.decimals,!0,!1,!1)),1),o("div",As,a(Number(m.amountUSD)==0?"$0":Number(m.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:l(k))(m.amountUSD,2):"<$0.01"),1)])]))),128))])]),default:z(()=>[o("span",null,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:l(k))(e.pendingFees,2)),1)]),_:1})]))],2),e.pItem.is_display_rewarder&&((T=e.pItem)!=null&&T.rewarder_infos)&&!("checkNullObj"in e?e.checkNullObj:l(le))((V=e.pItem)==null?void 0:V.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0||e.pItem.rewards&&e.pItem.rewards.length>0?(i(),r("div",{key:0,class:ae(["info-block cursor-block",[e.pendingRewarder==0&&e.pItem.rewards&&e.pItem.rewards.length==0?"block-none ":"",Number(e.pendingRewarder)==0?" block-none-reward":""].join(",")])},[o("div",Os,[o("span",null,a(e.$t("newAdd.pendingRewards")),1)]),e.pendingRewarder||e.pendingRewarder==0||e.pItem.farmingRewardTotalUsd?(i(),r("div",js,[C(f,{"overlay-class-name":"position-tooltip"},je({default:z(()=>{var m,X;return[o("div",Ts,[e.pItem.rewards&&e.pItem.rewards.length>0?(i(),r("div",Ls,Bs)):N("",!0),e.pItem.is_display_rewarder&&((m=e.pItem)!=null&&m.rewarder_infos)&&!("checkNullObj"in e?e.checkNullObj:l(le))((X=e.pItem)==null?void 0:X.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(i(),r("div",Fs,Gs)):N("",!0),o("span",null,a(e.pendingRewarder+e.pItem.farmingRewardTotalUsd>0&&e.pendingRewarder+e.pItem.farmingRewardTotalUsd>.01?`$${("addCommom"in e?e.addCommom:l(k))(e.pendingRewarder+e.pItem.farmingRewardTotalUsd,2)}`:e.pendingRewarder+e.pItem.farmingRewardTotalUsd>0&&e.pendingRewarder+e.pItem.farmingRewardTotalUsd<=.01?"<$0.01":"$0"),1)])]}),_:2},[e.pendingRewarder>0?{name:"title",fn:z(()=>[o("div",Ms,[qs,(i(!0),r(x,null,ie(e.pendingRewarderArr,m=>(i(),r("div",{key:m,class:"rewarder-info"},[o("div",Hs,[ne(o("img",Vs,null,512),[[u,e.getCoinIcon(m)]]),o("span",null,a(m.symbol),1)]),o("div",zs,[o("div",Ws,a(("addCommom"in e?e.addCommom:l(k))(("decimalUi"in e?e.decimalUi:l($))(m.amount,m.decimals))),1),o("div",Js,a(Number(m.amountUSD)==0?"$0":Number(m.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:l(k))(m.amountUSD,2):"<$0.01"),1)])]))),128)),e.pItem.rewards&&e.pItem.rewards.length>0?(i(),r(x,{key:0},[Ks,(i(!0),r(x,null,ie(e.pItem.rewards,m=>(i(),r("div",{key:m,class:"rewarder-info"},[o("div",Zs,[ne(o("img",Qs,null,512),[[u,e.getCoinIcon(m)]]),o("span",null,a(m.symbol),1)]),o("div",Xs,[o("div",Ys,a(("decimalUi"in e?e.decimalUi:l($))(m.amount,m.decimals)),1),o("div",xs,a(Number(m.rewarderAmountUsd)==0?"$0":Number(m.rewarderAmountUsd)>.01?"$"+("addCommom"in e?e.addCommom:l(k))(m.rewarderAmountUsd,2):"<$0.01"),1)])]))),128))],64)):N("",!0)])]),key:"0"}:void 0]),1024)])):(i(),r("div",en,[C(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})]))],2)):N("",!0)])])])]),on])}const nn=se(Ko,[["render",sn],["__scopeId","data-v-c7b4da13"]]),tn=oe({components:{TotalPosition:We,PoolSymbolNameBlock:mo,NewMyPositionItem:nn,PosCurrentPrice:$o},setup(){const e=y(!1),{t:d}=we(),b=y(["position"]),w=$e(),_=y(""),I=ve(),n=v(()=>I),f=v(()=>n.value.chainName?ze[n.value.chainName]:{});let c=y([]);const u=Re(),g=v(()=>u),D=Ve(),A=v(()=>D);y(!0);const H=y("TVL"),P=()=>{e.value=!0,c.value=[],A.value.address&&(u.setPools(V.value.poolConfigList,n.value.chainName),u.getMyPositons(A.value.address,g.value.poolsObj,n.value.chainName)),setTimeout(()=>{e.value=!1},1e3)},F=v(()=>{const s=Array.from(new Set(g.value.poolConfigList.flatMap(t=>!(t!=null&&t.category)||(t==null?void 0:t.category)==""?"All":t==null?void 0:t.category)));return console.log(s,"newArr"),s.length<=1?[]:s});q(()=>n.value.isRefresh,s=>{var t,p,h,R;s&&((R=(h=(p=(t=w==null?void 0:w.currentRoute)==null?void 0:t.value)==null?void 0:p.name)==null?void 0:h.split("-"))==null?void 0:R[1])=="position"&&P()}),ye(()=>{c.value=[],u.setMyPositionsLoading(!0)}),De(()=>{A.value.connected||(c.value=[])});const O=()=>{e.value=!0;let s=[];g.value.myPositions.forEach(p=>{var W,J,K,Z;let h=p.positionSource=="farming",R,U;const L=p.amountA*((W=g.value.RATES[p.token_a.address])==null?void 0:W.price),B=p.amountB*((J=g.value.RATES[p.token_b.address])==null?void 0:J.price);(K=g.value.RATES[p.token_a.address])!=null&&K.price&&((Z=g.value.RATES[p.token_b.address])!=null&&Z.price)?(R=L+B,U=L+B):(R=" --",U=0),console.log(g.value.currentPoolTab,"##pools.value.currentPoolTab"),s.push({...p,amountUSD:R,amountUSDOrigin:U,tokenARates:L,tokenBRates:B,isStableFarming:h})});const t={};s.forEach(p=>{t[p.address]?t[p.address].positionList.push(p):(t[p.address]={},t[p.address].poolInfo=p,t[p.address].positionList=[p])}),c.value=Object.values(t)||[],console.log(c.value,"list.value========>")};q(()=>[g.value.myPositions,g.value.RATES],([s,t])=>{s&&t&&(console.log("0605==>updateLpList9099999"),O())},{immediate:!0}),q(()=>[A.value.address,g.value.poolConfigList,g.value.poolsObj,n.value.chainName],([s,t,p,h])=>{var R,U,L;s&&t&&t.length>0&&h&&(h!=null&&h.toLowerCase().includes((R=t[0])==null?void 0:R.chain))&&!le(p)&&(h==="Aptos"?t.length===Object.values(p).length:(L=(U=Object.values(p)[0])==null?void 0:U.chain)!=null&&L.includes("sui"))&&(console.log(p,t,"0605==>getMyPositons9099999"),u.getMyPositons(A.value.address,p,h))},{immediate:!0,deep:!0}),q(()=>A.value.address,s=>{s||u.setMyPositions()},{immediate:!0});const j=Ge(),T=v(()=>j),V=v(()=>u),m=async s=>{await j.getSourceGroups();const t=T.value.sourceGroups&&T.value.sourceGroups.length>0&&T.value.sourceGroups[0]&&T.value.sourceGroups[0].sources||[];console.log(t,"####source"),console.log(s,"###myPositions");for(let p=0;p<t.length;p++){const{pool_address:h,position_index:R}=JSON.parse(t[p].blockchainAddress);let U=!1,L;for(let B=0;B<s.length;B++){const{poolAddress:W,index:J,positionSource:K,name:Z}=s[B];h==W&&Number(K=="clmm"?J:Z.split("-")[1])==Number(R)&&(U=!0),L={pool_address:h,position_index:R}}U||await j.subscribePosition(L,"",!1,!1)}},X=async()=>{await j.getSourceGroups();const s=T.value.sourceGroups&&T.value.sourceGroups.length>0&&T.value.sourceGroups[0]&&T.value.sourceGroups[0].sources||[];for(let t=0;t<s.length;t++){const{pool_address:p,position_index:h}=JSON.parse(s[t].blockchainAddress),{name:R}=s[t],U={pool_address:p,position_index:h};await j.subscribePosition(U,R,!1,!1)}},S=v(()=>V.value.myPositionsLoading);q(()=>V.value.myPositions,(s,t)=>{f.value.hasNotifi&&(s&&s.length>0&&t&&t.length!==s.length?m(s):s&&s.length==0&&!S.value&&X())},{immediate:!0});const pe=s=>{var t;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((t=g.value.tokensObj[s==null?void 0:s.address])==null?void 0:t.logo_url)||(n.value.theme==="default"?re("/image/coins/unknown.png"):re("/image/coins/sui-unknown.png"))},E=y(null),G=v(()=>E.value&&E.value.firstToken?E.value.firstToken:null),M=v(()=>E.value&&E.value.lastToken?E.value.lastToken:null),_e=v(()=>{let s=[];s=c.value;const t=s.filter((h,R)=>G.value&&M.value?h.poolInfo.coinA.symbol==G.value.symbol&&h.poolInfo.coinB.symbol==M.value.symbol||h.poolInfo.coinA.symbol==M.value.symbol&&h.poolInfo.coinB.symbol==G.value.symbol:G.value?h.poolInfo.coinA.symbol.toLowerCase().includes(G.value.symbol.toLowerCase())||h.poolInfo.coinB.symbol.toLowerCase().includes(G.value.symbol.toLowerCase()):M.value?h.poolInfo.coinA.symbol.toLowerCase().includes(M.value.symbol.toLowerCase())||h.poolInfo.coinB.symbol.toLowerCase().includes(M.value.symbol.toLowerCase()):s);return g.value.myPositionsLoading||(I.setPositiomAmount(t.length),u.setPositionShowList(t)),t.filter((h,R)=>{var U;return((U=h.positionList)==null?void 0:U.length)>0})});return Be(()=>{I.setPositiomAmount("--"),u.setPositionShowList([])}),{tabArr:F,showList:_e,childTokenSelectRef:E,firstToken:G,lastToken:M,getCoinIcon:pe,selectValue:H,t:d,pools:g,store:n,wallet:A,list:c,clickRefresh:P,refresh:e,current:b,router:w,searchKey:_}}});const ce=e=>(de("data-v-6fe361bb"),e=e(),me(),e),an={class:"new-position-list-container"},rn={class:"filter-refresh"},ln={class:"icon-box"},dn=ce(()=>o("use",{"xlink:href":"#icon-icon_refresh"},null,-1)),mn=[dn],un={class:"position-card-top"},cn={key:0,class:"upgrade-loading"},pn={key:1,class:"position-list"},vn={class:"name-price"},fn={class:"price-other-info"},hn=ce(()=>o("img",{class:"img-default",src:Pe,alt:""},null,-1)),gn=ce(()=>o("span",null,"Farm",-1)),_n=ce(()=>o("svg",{class:"arrow-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_arrow"})],-1)),kn=[hn,gn,_n],bn={key:2,class:"no-data"},In={key:0,src:Ze,alt:""},wn={key:1,src:Qe,alt:""},$n={key:3,class:"no-data"},yn={key:0,src:Xe,alt:""},Rn={key:1,src:Ye,alt:""};function Cn(e,d,b,w,_,I){const n=Se,f=Ae,c=Y("TotalPosition"),u=Ne,g=Y("PoolSymbolNameBlock"),D=Y("PosCurrentPrice"),A=Fe,H=Y("NewMyPositionItem");return i(),r("div",an,[C(n,{"current-tab":"My Positions"}),o("div",rn,[C(f,{ref:"childTokenSelectRef"},null,512),o("div",{class:"refresh-icon",onClick:d[0]||(d[0]=(...P)=>e.clickRefresh&&e.clickRefresh(...P))},[o("div",ln,[(i(),r("svg",{class:ae(["icon",{refresh:e.isRefresh}]),"aria-hidden":"true"},mn,2))])])]),o("div",un,[e.wallet&&e.wallet.address?(i(),ke(c,{key:0})):N("",!0)]),e.pools.myPositionsLoading&&e.wallet.connected?(i(),r("div",cn,[C(u,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):N("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(i(),r("div",pn,[(i(!0),r(x,null,ie(e.showList,P=>{var F;return i(),r("div",{key:(F=P.poolInfo)==null?void 0:F.address,class:"item-box"},[o("div",vn,[C(g,{"pool-info":P.poolInfo},null,8,["pool-info"]),o("div",fn,[C(D,{"pool-info":P.poolInfo},null,8,["pool-info"]),P.poolInfo.isStableFarming?(i(),r("div",{key:0,class:"farming-logo",onClick:d[1]||(d[1]=ue(O=>e.$router.push("/farms"),["stop"]))},kn)):N("",!0),C(A,{class:"ghost-btn create",onClick:O=>{var j;return e.$router.push(`/liquidity/deposit?poolAddress=${(j=P.poolInfo)==null?void 0:j.poolAddress}`)}},{default:z(()=>[ee("Create new position")]),_:2},1032,["onClick"])])]),(i(!0),r(x,null,ie(P.positionList,O=>(i(),ke(H,{key:O==null?void 0:O.name,"p-item":O},null,8,["p-item"]))),128))])}),128))])):N("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(i(),r("div",bn,[e.store.theme=="default"?(i(),r("img",In)):(i(),r("img",wn)),o("span",null,a(e.$t("common.noLiquidityPositions")),1)])):N("",!0),e.wallet.connected?N("",!0):(i(),r("div",$n,[e.store.theme=="default"?(i(),r("img",yn)):(i(),r("img",Rn)),C(A,{class:"connect-wallet",onClick:d[2]||(d[2]=P=>e.wallet.setIsShowWalletModal(!0))},{default:z(()=>[ee(a(e.$t("button.connectWallet")),1)]),_:1})]))])}const dt=se(tn,[["render",Cn],["__scopeId","data-v-6fe361bb"]]);export{dt as default};
