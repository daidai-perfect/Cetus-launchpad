import{_ as wa}from"./refresh-icon.b25f9e4c.js";import{_ as Ca}from"./assets-card.63e9b367.js";import{A as ha,R as ba,c as Ue,_ as Sa,a as Aa,b as ka,d as ya}from"./confetti.module.8c791a99.js";import{C as Ia}from"./coin-select.1f300d63.js";import{_ as Ta}from"./swap-setting.a82a0c56.js";import{_ as Na}from"./token-warning-modal.08fbfc75.js";import{u as Oa,n as so,w as Ma,f as le,h as B,k as oo,i as Fe,c as ce,m as He,d as Se,aF as Oo}from"./index.c41a185a.js";import{a as Ra,b as Ua,U as Fa,V as $a,l as La,m as y,r as v,y as Ba,E as Pa,G as _,a5 as Mo,e as ja,M as ao,q as Da,o as h,f as R,h as m,c as L,F as Ro,j as Ae,v as F,i as x,w as ne,x as U,z as K,t as ze,u as se,Q as Ea,S as qa,B as Wa,p as Ha,k as za,a2 as Ja,Y as Ga}from"./entry.1afe32c4.js";import"./index.fa5ab6c5.js";/* empty css              *//* empty css              *//* empty css              */import{i as no}from"./import-icon.de3e6c66.js";import{b as Ka,u as Qa,j as Ya,c as Xa,p as Uo}from"./pool.83f6439f.js";import{D as p}from"./decimal.0bdeb344.js";import{u as Za}from"./useSuiAggregator.7adf1542.js";import{T as Va}from"./trade-menu-tab.71e41ab0.js";import{_ as _a}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.7014f9c6.js";/* empty css              */import"./useDebounceFunction.6fcad2ee.js";import"./coin-img.c319baa5.js";import"./token-warning_2x.68c70fba.js";import"./img-no-Positions_2x.514f203f.js";import"./img-no-Positions_2x.51b74fe4.js";import"./icon-warning_2x.e4f91c80.js";import"./icon-error_2x.b4924e70.js";import"./icon-selected_3x.09e9a6f0.js";import"./index.08ca7d22.js";import"./index.3f134baf.js";import"./vesrion-beta.87bdb614.js";const xa=Ra({components:{AggregatorSettingModal:ha,RouterModal:ba,TradeMenuTab:Va},setup(){const e=Ua(),g=Fa($a,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:Q,locale:Fo}=La(),q=Ka(),ke=Qa(),t=y(()=>ke);let ye=v(!1),J=v(!0),Je=v(!1),$e=v(!1),Ge=v(!1),ee=v(!1);const te=v("fromCoin"),Ie=v(""),Te=v(""),Le=v(!1),c=v(!0),Ne=v(!1),N=v(!1),Y=v(!1),u=v(""),i=v(""),ue=v(20),j=v(0),pe=v(null),w=v(!1),Oe=y(()=>q.slippage),S=y(()=>q.chainName),D=y(()=>S.value?Xa(S.value):{}),oe=y(()=>Za()),n=v(),l=v(),Ke=y(()=>ce&&ce[S.value]&&ce[S.value].hasRouter),lo=y(()=>ke.getPoolInfoSuccess),$o=y(()=>{var o;return C.value&&((o=C.value)!=null&&o.is_pause)?"Pool Closed":!n.value||!l.value?Q("modal.selectTokenModalTitle"):!Number(u.value)&&!Number(i.value)?Q("button.enterAmount"):!Ke.value&&!C.value&&lo.value?"Pool Not Found":Ke.value&&he.value?"No Available Route":w.value?Q("button.insufficientLiquidity"):Number(u.value)>Number(H.value)?Q("button.insufficientBalance",{name:n.value.symbol}):Q("button.swap")}),Lo=o=>{var s,a,f,d;te.value=o,o==="fromCoin"?(Ie.value=((s=l.value)==null?void 0:s.address)||"",Te.value=((a=n.value)==null?void 0:a.address)||""):(Ie.value=((f=n.value)==null?void 0:f.address)||"",Te.value=((d=l.value)==null?void 0:d.address)||""),Le.value=!0},Qe=v({}),Ye=v({}),Bo=o=>{te.value==="fromCoin"?(Qe.value=o,Ze(o)):(Ye.value=o,Ze(o))},Po=o=>{o==="fromCoin"?(c.value=!0,S.value==="Aptos"?u.value=H.value>0?n.value.symbol=="APT"?new p(Number(H.value)).sub(new p(.1)).lt(new p(0))?"0":new p(Number(H.value)).sub(new p(.1)).toString():String(H.value):"":u.value=H.value>0?n.value.symbol=="SUI"?new p(Number(H.value)).sub(new p(.05)).lt(new p(0))?"0":new p(Number(H.value)).sub(new p(.05)).toString():String(H.value):""):(c.value=!1,S.value==="Aptos"?i.value=G.value>0?l.value.symbol=="APT"?new p(Number(G.value)).sub(new p(.1)).lt(new p(0))?"0":new p(Number(G.value)).sub(new p(.1)).toString():String(G.value):"":i.value=G.value>0?l.value.symbol=="SUI"?new p(Number(G.value)).sub(new p(.05)).lt(new p(0))?"0":new p(Number(G.value)).sub(new p(.05)).toString():String(G.value):"")},jo=o=>{o==="fromCoin"?(c.value=!0,u.value=H.value>0?oo(new p(Number(H.value)).div(2).toString(),n.value.decimals).toString():""):(c.value=!1,i.value=G.value>0?oo(new p(Number(G.value)).div(2).toString(),l.value.decimals).toString():"")},Xe=v(!1);Ba(()=>{console.log("æ‰§è¡Œæ¬¡æ•°"),to(),window.addEventListener("updateSwapParams",o=>{Xe.value=!Xe.value})}),Pa(()=>{clearInterval(pe.value)}),y(()=>q);const Be=()=>{var o,s,a,f,d;console.log("ðŸš€ ~ file: swap-sui.vue:785 ~ clickRefresh ~:"),!J.value&&(!C.value&&!Ke.value||(clearInterval(pe.value),j.value=0,J.value=!0,X.value||we(c.value?u.value:i.value),W.value.address&&D.value.getAccount(W.value.address),setTimeout(()=>{J.value=!1,to()},1e3),console.log("ðŸš€ ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES11111:",(o=t==null?void 0:t.value)==null?void 0:o.RATES),(!((s=t==null?void 0:t.value)!=null&&s.RATES)||Fe((a=t==null?void 0:t.value)==null?void 0:a.RATES))&&(console.log("ðŸš€ ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES2222:",(f=t==null?void 0:t.value)==null?void 0:f.RATES),(d=t==null?void 0:t.value)==null||d.setRates("Sui"))))};console.log("ðŸš€ ~ file: swap-sui.vue:811 ~ clickRefresh ~ clickRefresh:",Be);const to=()=>{pe.value=setInterval(()=>{J.value=!1,Ne.value||j.value<ue.value&&(j.value+=1,j.value===ue.value&&(S.value=="Aptos"?(C.value&&C.value.poolAddress&&ke.updateCurrentPools(C.value.poolAddress,S.value),Be()):ee.value||Be(),j.value=0,J.value=!0))},1e3)};_(c,Mo((o,s)=>{c.value=o},500));const ae=v(!1);_(u,(o,s)=>{o&&o!==0&&c.value&&(j.value=0,qe(we(o),800)),o==""&&c.value&&(i.value="")}),_(i,(o,s)=>{o&&o!==0&&!c.value&&(j.value=0,qe(we(o),800)),o==""&&!c.value&&(u.value="")});const Pe=v(1e-4),je=async o=>{let s=o;if(S.value==="Aptos"&&!s.current_sqrt_price&&u.value&&i.value){const a=await D.value.getPools([s.address]);a&&a[0]&&(s={...o,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(s.current_sqrt_price&&u.value&&i.value){const f=(n.value.address===s.coinA.address&&l.value.address===s.coinB.address?0:1)==0,d=new p(u.value),b=new p(i.value),A=d.sub(d.mul(new p(s.fee))),I=b.div(A);return D.value.getPriceImpactPct(s,I.toString(),f)}return"--"},uo=v(0),io=v(0),ro=v(),Ce=v({}),Do=async o=>{if(C.value&&(X.value=!0,!(c.value&&Number(u.value)==0)&&!(!c.value&&Number(i.value)==0))){if(n.value&&l.value&&(u.value||i.value)){N.value=!0,Y.value=!0,w.value=!1;const s=n.value.address===C.value.coinA.address&&l.value.address===C.value.coinB.address?0:1;try{let a=await D.value.preSwap({pool:C.value,a2b:s==0,byAmountIn:c.value,amount:c.value?u.value:i.value});w.value=a==null?void 0:a.isExceed,ro.value=a==null?void 0:a.estimatedFeeAmount,c.value?(i.value=a.estimatedAmountOut,re.value=(Number(a.estimatedAmountOut)/o).toString(),ie.value=(o/Number(a.estimatedAmountOut)).toString()):(u.value=a.estimatedAmountIn,re.value=(o/Number(a.estimatedAmountIn)).toString(),ie.value=(Number(a.estimatedAmountIn)/o).toString()),uo.value=new p(i.value).div(u.value).toString(),io.value=new p(u.value).div(i.value).toString(),Pe.value=S.value=="Aptos"?await je(C.value):await je(Ce.value||C.value),N.value=!1,Y.value=!1}catch(a){console.log("pre swap error1",a),N.value=!1,Y.value=!1}}else c.value?i.value="":u.value="",N.value=!1,Y.value=!1;X.value=!1}},Eo=Oa(),W=y(()=>Eo),qo=v({}),ie=v(""),re=v(""),H=y(()=>W.value.assets&&n.value&&W.value.assets[n.value.address]?Uo(W.value.assets[n.value.address].balance,n.value.decimals):0),G=y(()=>W.value.assets&&l.value&&W.value.assets[l.value.address]?Uo(W.value.assets[l.value.address].balance,l.value.decimals):0);_(()=>t.value.tokensObj,async o=>{if(o&&!Fe(o)){const s=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?n.value=o[a]||await D.value.getTokenBySymbol(o,a):!a&&!n.value&&(n.value=o[ce[S.value].swapDefaultPair.fromCoin]),s?l.value=o[s]||await D.value.getTokenBySymbol(o,s):!s&&!l.value&&(l.value=o[ce[S.value].swapDefaultPair.toCoin],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ newValue:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",ce[S.value].swapDefaultPair.toCoin)),!a&&s&&(n.value="")}},{immediate:!0});const C=y(()=>{var o,s,a,f,d;if(n.value&&l.value){let b=null,A={};if(Object.values(t.value.poolConfigList).forEach(r=>{var k,$,T,M;(r.coinA.address.toUpperCase()===((k=n.value.address)==null?void 0:k.toUpperCase())&&r.coinB.address.toUpperCase()===(($=l.value.address)==null?void 0:$.toUpperCase())||r.coinB.address.toUpperCase()===((T=n.value.address)==null?void 0:T.toUpperCase())&&r.coinA.address.toUpperCase()===((M=l.value.address)==null?void 0:M.toUpperCase()))&&(A[r.address]={...r})}),S.value=="Aptos"&&t.value.poolsObj&&!Fe(t.value.poolsObj))for(const r in t.value.poolsObj){const k=t.value.poolsObj[r];(k.token_a.address.toUpperCase()===((o=n.value.address)==null?void 0:o.toUpperCase())&&k.token_b.address.toUpperCase()===((s=l.value.address)==null?void 0:s.toUpperCase())||k.token_b.address.toUpperCase()===((a=n.value.address)==null?void 0:a.toUpperCase())&&k.token_a.address.toUpperCase()===((f=l.value.address)==null?void 0:f.toUpperCase()))&&(A[k.address]={...k})}const I=Object.values(A).sort((r,k)=>r.fee-k.fee);for(let r=0;r<I.length;r++)if(!((d=I[r])!=null&&d.is_pause)){b=I[r];break}return b&&!Fe(b)?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1094 ~ poolInfo ~ info:",b),b):null}return null}),vo=v(!0),mo=v(!1),Wo=async o=>{o&&S.value=="Aptos"&&(we(c.value?u.value:i.value),mo.value=!0,o.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&o.coinB.symbol.toLowerCase()===l.value.symbol.toLowerCase()?vo.value=!0:vo.value=!1,w.value=!1)};_(()=>C.value,(o,s)=>{o&&(!s||o.address!==s.address||o.current_sqrt_price!==s.current_sqrt_price)&&Wo(o)},{immediate:!0,deep:!0});const Ho=y(()=>t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].logoURI),zo=y(()=>t.value.tokensObj&&l.value&&l.value.address&&t.value.tokensObj[l.value.address]&&t.value.tokensObj[l.value.address].logoURI),Jo=y(()=>S.value==="Aptos"?t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].coingecko_id||null:t.value.tokensObj&&n.value&&n.value.address||null),Go=y(()=>S.value==="Aptos"?t.value.tokensObj&&l.value&&l.value.address&&t.value.tokensObj[l.value.address]&&t.value.tokensObj[l.value.address].coingecko_id||null:t.value.tokensObj&&l.value&&l.value.address||null),Ko=y(()=>{var o,s,a,f,d,b,A,I,r,k,$,T,M;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1222 ~ formCoinMarket ~ pools?.value?.tokensObj:",(o=t==null?void 0:t.value)==null?void 0:o.tokensObj),(f=(a=t==null?void 0:t.value)==null?void 0:a.tokensObj[(s=n==null?void 0:n.value)==null?void 0:s.address])!=null&&f.pyth_id&&((A=(b=t==null?void 0:t.value)==null?void 0:b.tokensObj[(d=n==null?void 0:n.value)==null?void 0:d.address])==null?void 0:A.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(k=(r=t==null?void 0:t.value)==null?void 0:r.tokensObj[(I=n==null?void 0:n.value)==null?void 0:I.address])!=null&&k.coingecko_id?"coingecko":(M=(T=t==null?void 0:t.value)==null?void 0:T.tokensObj[($=n==null?void 0:n.value)==null?void 0:$.address])!=null&&M.birdeyeid?"birdeye":null}),Qo=y(()=>{var o,s,a,f,d,b,A,I,r,k,$,T;return(a=(s=t==null?void 0:t.value)==null?void 0:s.tokensObj[(o=l==null?void 0:l.value)==null?void 0:o.address])!=null&&a.pyth_id&&((b=(d=t==null?void 0:t.value)==null?void 0:d.tokensObj[(f=l==null?void 0:l.value)==null?void 0:f.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(r=(I=t==null?void 0:t.value)==null?void 0:I.tokensObj[(A=l==null?void 0:l.value)==null?void 0:A.address])!=null&&r.coingecko_id?"coingecko":(T=($=t==null?void 0:t.value)==null?void 0:$.tokensObj[(k=l==null?void 0:l.value)==null?void 0:k.address])!=null&&T.birdeyeid?"birdeye":null}),Yo=y(()=>{var f,d;const o=new p(u.value),s=new p(S.value=="Aptos"?(f=C==null?void 0:C.value)==null?void 0:f.fee:(d=Ce==null?void 0:Ce.value)==null?void 0:d.fee),a=o.mul(s).toString();return Number(a)<1/Math.pow(10,n.value.decimals)?`<${new p(1).div(new p(Math.pow(10,n.value.decimals))).toString()}`:oo(a,n.value.decimals)}),{setIsShowSuccess:Xo,setIsShowRejected:co,setIsShowWaiting:Me,setTransactionDesc:Zo,setTransactionTxid:po}=q,Vo=o=>{var s;return(s=Ee.value.filter(a=>a.uuid===o))==null?void 0:s[0]},_o=async()=>{var s,a,f,d,b,A,I,r,k,$;ee.value=!1,N.value=!0,clearInterval(Re),window.clearInterval(Re),po(""),Zo(Q("tips.swapping",{from:`${B(u.value)} ${(s=n.value)==null?void 0:s.symbol}`,to:`${B(i.value)} ${(a=l.value)==null?void 0:a.symbol}`})),Me(!0);let o;S.value=="Aptos"&&(o=n.value.address===C.value.token_a.address&&l.value.address===C.value.token_b.address?0:1);try{let T;if(S.value=="Aptos")T=await D.value.getSwapTransactionPayload({pool:C.value,a2b:o==0,byAmountIn:c.value,amount:c.value?u.value:i.value,slippage:Number(Oe.value)/100});else{const z=c.value,de=Number(Oe.value)/100;console.log("toSwap Test UI and submission dont match ~ routersArr:",Ee.value),console.log("toSwap Test UI and submission dont match ~ currentDisplayRouterUUID:",_e.value),console.log("toSwap Test UI and submission dont match ~ suiPreSwapdata.value:",O.value);const We=Vo(_e.value);console.log("toSwap Test UI and submission dont match ~ currentPreSwapData:",We),T=await((f=oe==null?void 0:oe.value)==null?void 0:f.getRouterSwapPayload(We,z,de,n,l))}console.log("0221####swap###swapPayload###",T);let M;if(S.value==="Aptos")M=await W.value.currentWallet.signAndSubmitTransaction(T);else{const z=await D.value.signAndExecuteTransactionBlock(W.value.currentWallet,T==null?void 0:T.txb,T==null?void 0:T.payloadParams,!0);if(z==="errorIsReturned"){N.value=!1,Me(!1);return}console.log("0221###sui swap res###",z),M=D.value.handleTx(z),console.log("0221###swap###sui##tx###",M)}if(M&&M.hash){po(M.hash),Me(!1),Xo(!0);const z={title:Q("tips.swap"),desc:Q("tips.swapSuccessText",{from:`${B(u.value)} ${(d=n.value)==null?void 0:d.symbol}`,to:`${B(i.value)} ${(b=l.value)==null?void 0:b.symbol}`}),hash:M.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:n.value.address==ce[S.value].currentChainTokenAddress||l.value.address==ce[S.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(A=n.value)==null?void 0:A.address}`,numa:`- ${u.value}`,logoa:t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].logoURI,tokenb:`${(I=l.value)==null?void 0:I.address}`,numb:`+ ${i.value}`,logob:t.value.tokensObj&&l.value&&l.value.address&&t.value.tokensObj[l.value.address]&&t.value.tokensObj[l.value.address].logoURI},text:`Pay ${u.value} ${(r=n.value)==null?void 0:r.symbol} to receive ${i.value} ${(k=l.value)==null?void 0:k.symbol}`,excecuteTime:($=M==null?void 0:M.res)==null?void 0:$.excecuteTime};S.value!=="Aptos"&&(z.res=M.res),D.value.showTransitionPending(z);const de=await D.value.watchTransaction(z);console.log("0221###swap###transitionStatus####",de),de&&setTimeout(()=>{S.value=="Aptos"&&ke.updateCurrentPools(C.value.poolAddress,S.value),D.value.getAccount(W.value.address)},1e3)}else Me(!1),co(!0);u.value="",i.value="",N.value=!1}catch(T){u.value="",i.value="",console.log("Swap Error###",T),N.value=!1,Me(!1),co(!0)}},xo=o=>{var s;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((s=t.value.tokensObj[o==null?void 0:o.address])==null?void 0:s.logo_url)||(q.theme==="default"?no("/image/coins/unknown.png"):no("/image/coins/sui-unknown.png"))},fo=v([]);_(()=>[n.value,l.value,t.value.poolConfigList],([o,s,a])=>{if(a&&a.length>0&&o&&s){const f=[];a.forEach(d=>{var b,A,I,r;(d.coinA.address.toUpperCase()===((b=o.address)==null?void 0:b.toUpperCase())&&d.coinB.address.toUpperCase()===((A=s.address)==null?void 0:A.toUpperCase())||d.coinB.address.toUpperCase()===((I=o.address)==null?void 0:I.toUpperCase())&&d.coinA.address.toUpperCase()===((r=s.address)==null?void 0:r.toUpperCase()))&&(d!=null&&d.is_pause||f.push(d.address))}),fo.value=f}},{immediate:!0});const Ze=o=>{console.log("ðŸš€ ~ getTokenSource ~ token:",o);const s=q.importTokenListObj;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(s!=null&&s.hasOwnProperty(o==null?void 0:o.address))),o!=null&&o.isSelfBuilt&&!(s!=null&&s.hasOwnProperty(o==null?void 0:o.address))?Ve.value=!0:(te.value==="fromCoin"?(l.value&&o.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null),n.value=o,u.value=u.value>0?le(u.value,o==null?void 0:o.decimals):""):(n.value&&o.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null),l.value=o,i.value=i.value>0?le(i.value,o==null?void 0:o.decimals):""),go())},Ve=v(!1),go=()=>{Ye.value={},Qe.value={},Ve.value=!1},ea=y(()=>q.isShowRouterModal),fe=v([]),wo=v(""),oa=v(!1),Co=Ya();y(()=>Co);const he=v(!1),O=v({}),aa=v(""),na=v(),X=v(!1),De=v(0),_e=v(""),Ee=v([]),ho=o=>{_e.value=o.uuid;const s=[...Ee.value];s.length>20&&s.shift(),s.push(o),Ee.value=[...s]},xe=async o=>{var s,a;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),X.value=!0,w.value=!1,n.value&&l.value&&(Number(u.value)>0&&c.value||Number(i.value)>0&&!c.value)){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!u.value&&i.value||u.value&&!i.value)&&(N.value=!0),ie.value="",re.value="",ae.value=!0,he.value=!1;let f;C.value&&(f=n.value.address===C.value.coinA.address&&l.value.address===C.value.coinB.address?0:1);try{let d;if(c.value){const k=new p(u.value).mul(Math.pow(10,n.value.decimals)).toString();d=new He(k)}else{const k=new p(i.value).mul(Math.pow(10,l.value.decimals)).toString();d=new He(k)}const b=Number(Oe.value)/100,A=C.value?{poolAddresses:fo.value,coinTypeA:C.value.coin_a_address,coinTypeB:C.value.coin_b_address,decimalsA:C.value.coinA.decimals,decimalsB:C.value.coinB.decimals,a2b:f==0,byAmountIn:c.value,amount:d.toString()}:"";console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fromCoin:",n),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ toCoin:",l),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ coinAmount:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",c.value);const I=De.value+1;De.value=I;const r=await((s=oe==null?void 0:oe.value)==null?void 0:s.getFindRouter(n,l,d.toString(),c.value,b,C.value?A:"",I));if(console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter:",r),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter JSON:",JSON.stringify(r,null,2)),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ suiAmountId.value:",De.value),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter.id:",r==null?void 0:r.id),De.value!==(r==null?void 0:r.id)){ae.value=!1,X.value=!1,N.value=!1,O.value={},fe.value=[],c.value?i.value="":u.value="";return}if(r!=null&&r.insufficientLiquidity){w.value=!0,ae.value=!1,X.value=!1,N.value=!1,O.value={},fe.value=[],c.value?i.value="":u.value="";return}if(!r||!(r!=null&&r.routes)||((a=r==null?void 0:r.routes)==null?void 0:a.length)==0){N.value=!1,he.value=!0,ae.value=!1,X.value=!1,O.value={},fe.value=[],u.value?i.value="":u.value="";return}if(r.fromCoinAddress!==n.value.address||r.toCoinAddress!==l.value.address){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1861 ~ getSuiAmount ~",r.fromCoinAddress!==n.value.address||r.toCoinAddress!==l.value.address),O.value={},fe.value=[];return}r?(O.value=r,fe.value=r.routes,w.value=!1,c.value?u.value&&(i.value=new p(r.amountOut).div(new p(Math.pow(10,l.value.decimals))).toString()):i.value&&(u.value=new p(r.amountIn).div(new p(Math.pow(10,n.value.decimals))).toString()),console.log(i.value,"###toCoinAmount.value"),ie.value=B(le(new p(u.value).div(new p(i.value).toString()),n.value.decimals)),re.value=B(le(new p(i.value).div(u.value).toString(),l.value.decimals)),ho(r),N.value=!1,he.value=!1,ae.value=!1):(N.value=!1,he.value=!0,ae.value=!1)}catch(d){console.log("pre swap error2",d),N.value=!1,ae.value=!1,X.value=!1}}else c.value?i.value="":u.value="",N.value=!1,ae.value=!1;X.value=!1,console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1926 ~ getSuiAmount ~ isRoutrProgress.value:",X.value)},ge=v(!1),bo=async o=>{var s;try{let a;if(c.value){const b=new p(u.value).mul(Math.pow(10,n.value.decimals)).toString();a=new He(b)}else{const b=new p(i.value).mul(Math.pow(10,l.value.decimals)).toString();a=new He(b)}const f=Number(Oe.value)/100,d=await((s=oe==null?void 0:oe.value)==null?void 0:s.getFindRouter(n,l,a.toString(),c.value,f,""));if(d){O.value=d,fe.value=d.routes,w.value=!1,wo.value=d.amountIn,ie.value=B(le(new p(u.value).div(new p(i.value).toString()),n.value.decimals)),re.value=B(le(new p(i.value).div(u.value).toString(),l.value.decimals));const b=new p(d.amountOut).div(new p(Math.pow(10,l.value.decimals))).toString(),A=new p(d.amountIn).div(new p(Math.pow(10,n.value.decimals))).toString();ho(d),c.value?i.value!==b&&(ge.value=!0,i.value=b):u.value!==A&&(ge.value=!0,u.value=A)}}catch(a){console.log("pre swap error3",a)}},sa=async o=>{if(n.value&&l.value&&(u.value||i.value)){const s=n.value.address===C.value.coinA.address&&l.value.address===C.value.coinB.address?0:1;try{let a=await D.value.preSwap({pool:C.value,a2b:s==0,byAmountIn:c.value,amount:c.value?u.value:i.value});w.value=a==null?void 0:a.isExceed,ro.value=a==null?void 0:a.estimatedFeeAmount,c.value?(re.value=(Number(a.estimatedAmountOut)/a.estimatedAmountIn).toString(),ie.value=(a.estimatedAmountIn/Number(a.estimatedAmountOut)).toString()):(re.value=(Number(a.estimatedAmountOut)/Number(a.estimatedAmountIn)).toString(),ie.value=(Number(a.estimatedAmountIn)/Number(a.estimatedAmountOut)).toString()),c.value?i.value!==a.estimatedAmountOut&&(ge.value=!0,i.value=a.estimatedAmountOut):u.value!==a.estimatedAmountIn&&(ge.value=!0,u.value=a.estimatedAmountIn),Pe.value=S.value=="Aptos"?await je(C.value):await je(Ce.value||C.value),N.value=!1,Y.value=!1}catch(a){console.log("pre swap error4",a),N.value=!1,Y.value=!1}}else N.value=!1,Y.value=!1};let Re=v(null);_(()=>ee.value,o=>{o?Re.value=setInterval(()=>{S.value=="Aptos"?sa(c.value):bo(c.value)},3e3):(clearInterval(Re.value),window.clearInterval(Re.value))},{immediate:!0});const we=async o=>{S.value=="Aptos"?Do(o):xe()};_(()=>Xe.value,o=>{(Number(u.value)>0||Number(i.value)>0)&&we(c.value?u.value:i.value)},{immediate:!0});const la=y(()=>Co),So=y(()=>la.value.isInitRouter);_(()=>So.value,o=>{o||(j.value=0,we(c.value?u.value:i.value))},{immediate:!0});function qe(o,s=500){let a=null;return function(...f){clearTimeout(a),a=setTimeout(()=>{o.call(this,...f)},s)}}_(()=>[n.value,l.value],([o,s])=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2181 ~ setup ~ fromCoin && toCoin:",o&&s),o&&s&&(j.value=0,qe(we(c.value?u.value:i.value))),o||s){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1965 ~ setup ~ fromCoin:",o);const a=`/swap?from=${o==null?void 0:o.address}&to=${s==null?void 0:s.address}`;e.push(a)}},{immediate:!0,deep:!0});const ta=qe(Ao);function Ao(){const o=n.value;n.value=l.value,l.value=o,ye.value=!0,ve.value=="open"?c.value=!0:c.value=!c.value,c.value?(u.value=i.value,i.value=""):(i.value=u.value,u.value=""),setTimeout(()=>{ye.value=!1},300)}const ua=()=>{ge.value=!1},ia=()=>{ee.value=!1,ge.value=!1},ra=[{label:"Swap",link:"/swap"},{label:"Limit",link:"/limit"},{label:"DCA",link:"/dca",hasBeta:!0}],va=v("Swap"),ko=v(!1),eo=y(()=>{var o,s,a,f,d,b,A,I,r,k,$,T,M,z;try{if((o=n==null?void 0:n.value)!=null&&o.address&&((s=l==null?void 0:l.value)!=null&&s.address)&&(O!=null&&O.value)&&!Fe(O==null?void 0:O.value)){const de=Se((a=O==null?void 0:O.value)==null?void 0:a.amountIn).div(Math.pow(10,(f=n.value)==null?void 0:f.decimals)),We=Se((d=O==null?void 0:O.value)==null?void 0:d.amountOut).div(Math.pow(10,(b=l.value)==null?void 0:b.decimals)),me=Se(We).div(de);console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",me==null?void 0:me.toString());const Z=(r=(A=t==null?void 0:t.value)==null?void 0:A.RATES)==null?void 0:r[(I=n==null?void 0:n.value)==null?void 0:I.address];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",Z);const V=(T=(k=t==null?void 0:t.value)==null?void 0:k.RATES)==null?void 0:T[($=l==null?void 0:l.value)==null?void 0:$.address];if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",V),!(Z!=null&&Z.price)||!(V!=null&&V.price)||Se(Z==null?void 0:Z.price).lte(0)||Se(V==null?void 0:V.price).lte(0))throw Error("rate invalid");const be=Se(Z==null?void 0:Z.price).div(V==null?void 0:V.price);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",be==null?void 0:be.toString()),me.gt(be)){const E=me.minus(be).div(me).mul(100);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ result1:",E==null?void 0:E.toString()),Oo((M=E==null?void 0:E.negated())==null?void 0:M.toString(),2)}else{const E=me.minus(be).div(me).mul(100);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ result2:",E==null?void 0:E.toString()),Oo((z=E==null?void 0:E.abs())==null?void 0:z.toString(),2)}}return}catch(de){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",de),"Incalculable"}}),da=y(()=>(S==null?void 0:S.value)==="Aptos"?Pe.value:eo==null?void 0:eo.value),ve=v(localStorage.getItem("plusChecked1"))||v("close"),ma=y(()=>q.liquiditySourceList),ca=o=>{console.log("ðŸš€ ~ modalConfirm ~ result121:",o),o&&o.length>0?o.every(a=>a.name=="Cetus"?!0:a.status==="close")?ve.value="close":(ve.value="open",i.value=""):ve.value="close",ko.value=!1},pa=y(()=>q.includeRoutes),yo=o=>{ve.value=ve.value=="open"?"close":"open",localStorage.setItem("plusChecked1",ve.value);const s=pa.value,a=ma.value;a.forEach(f=>{o?f.status="open":f.name!=="Cetus"?f.status="close":f.status="open"}),console.log("ðŸš€ ~ //clickCheckedresult ~ arr:",a,s),q.setAggregatorSetting(a,s)},Io=()=>{const o=window.innerWidth,s=window.innerHeight,a=document.getElementById("plusModeSwitch"),f=a==null?void 0:a.getBoundingClientRect(),d=f==null?void 0:f.left,b=f==null?void 0:f.top;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ x:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ y:",b),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportWidth:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportHeight:",s);const A=2,I=Ue.shapeFromText({text:"ðŸŸ¢",scalar:A}),r=Ue.shapeFromText({text:"ðŸ”µ",scalar:A}),k=Ue.shapeFromText({text:"ðŸ’š",scalar:A}),$=Ue.shapeFromText({text:"ðŸ’™",scalar:A});Ue({particleCount:40,spread:60,shapes:[I,r,k,$],scalar:A,origin:{x:d/o,y:b*1.2/s}})},fa=o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2264 ~ handleSwitchPlusMode ~ value:",o),u.value="",i.value="",o&&Io(),yo(o),setTimeout(()=>{xe()},500)},To=v(!1),ga=o=>{To.value=o},No=v(!1);return{modalConfirm:ca,clickChecked:yo,currentTradeTab:va,plusChecked:ve,closeSwapConfirmModal:ia,updateAccept:ua,clickExchange:Ao,debounceClickExchange:ta,closeTokenWarning:go,isShowTokenWarning:Ve,getTokenSource:Ze,hasPool:mo,getPoolInfoSuccess:lo,halfBtnSelect:jo,formCoinId:Jo,toCoinId:Go,formCoinMarket:Ko,toCoinMarket:Qo,fromCoinUrl:Ho,toCoinUrl:zo,t:Q,indicator:g,wallet:W,currentLpInfo:qo,fixD:so,decimalFormat:Ma,impact:Pe,oneFromAmount:ie,oneToAmount:re,importIcon:no,clickRefresh:Be,refresh:J,change:ye,isShowAddress:Je,isShowSwapSetting:$e,fromCoin:n,toCoin:l,slippage:Oe,openCoinSelect:Lo,onCoinSelect:Bo,existingCoins:Ie,lastSelectCoin:Te,currentCoinKey:te,showCoinSelect:Le,fromCoinAmount:u,toCoinAmount:i,maxBtnSelect:Po,fixedFromCoin:c,swapBtnText:$o,toSwap:_o,loading:Ne,swaping:N,autoRefreshTime:ue,countdown:j,marketTimer:pe,rateChange:Ge,isSwapConfirmMpdal:ee,fromCoinBlance:H,toCoinBlance:G,poolInfo:C,chainName:S,swapRouterLoading:ae,formatFee:Yo,calculating:Y,currentRate:uo,currentRateReverse:io,getCoinIcon:xo,toAddLiquidiPoolInfo:Ce,decimalUi:le,warningToCoin:Ye,warningFromCoin:Qe,isShowRouterModal:ea,toSwapLoading:oa,insufficientLiquidity:w,routerPool:fe,routerTotalAmounts:wo,store:q,suiPreSwapdata:O,suiSwapFee:na,suiSwapFeeUi:aa,addCommom:B,debounce:Mo,notFoundRouter:he,getSuiAmountAccept:bo,isShowAccept:ge,getSuiAmount:xe,tradeTabList:ra,isInitSwapRouter:So,isShowAggregatorModal:ko,priceImpact:da,triggerConfettiAnimation:Io,handleSwitchPlusMode:fa,assetLoading:To,onInputLoading:ga,onInputToCoinLoading:o=>{console.log("ðŸš€ ~ file: swap-sui.vue:2341 ~ onInputToCoinLoading ~ status:",o),No.value=o},assetToCoinLoading:No}}});const P=e=>(Ha("data-v-cb7e705c"),e=e(),za(),e),en={class:"swap-container"},on={class:"left"},an={class:"right title-right"},nn=P(()=>m("div",{class:"price-reference-text"}," The Plus Mode will aggregate external liquidity sources ",-1)),sn={key:0,class:K("icon-bg plus-switch")},ln=P(()=>m("p",null,[m("span",null,"Plus Mode")],-1)),tn={class:"setting-right"},un=P(()=>m("div",{class:"new-style-tooltip-text"},"Swap Settings",-1)),rn=P(()=>m("svg",{"aria-hidden":"true",class:"icon"},[m("use",{"xlink:href":"#icon-icon_set"})],-1)),vn=[rn],dn=P(()=>m("div",{class:"new-style-tooltip-text"},"Slippage Settings",-1)),mn=P(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),cn={class:"swap-card"},pn={class:"card-container"},fn=P(()=>m("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),gn=[fn],wn={key:1,class:"induction"},Cn={key:0,class:"exchange-rate-btn"},hn={key:0},bn={key:0},Sn={key:0},An={key:1},kn={key:0},yn=P(()=>m("div",null,[m("svg",{class:"icon icon-up","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),In=P(()=>m("div",null,[m("svg",{class:"icon icon-down","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Tn=[yn,In],Nn={class:"item"},On={class:"induction-text"},Mn={key:0,class:"icon","aria-hidden":"true"},Rn=P(()=>m("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Un=[Rn],Fn={class:"item"},$n={class:"induction-text"},Ln={key:0,class:"induction-value"},Bn={class:"item"},Pn={class:"induction-text"},jn={key:0,class:"induction-value"},Dn={key:0,class:"icon","aria-hidden":"true"},En=P(()=>m("use",{"xlink:href":"#icon-icon-swap"},null,-1)),qn=[En],Wn={key:2,class:"token-info-container"},Hn={class:"token-info-title"},zn=P(()=>m("span",{class:"coingecko"},"Price Reference",-1)),Jn=P(()=>m("div",{class:"price-reference-text"}," The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ",-1)),Gn=P(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_tips"})],-1));function Kn(e,g,Q,Fo,q,ke){var j,pe;const t=ao("TradeMenuTab"),ye=Ja,J=Ea,Je=wa,$e=Ca,Ge=Sa,ee=qa,te=Ga,Ie=Wa,Te=Aa,Le=Ia,c=Ta,Ne=ka,N=Na,Y=ao("RouterModal"),u=ya,i=ao("AggregatorSettingModal"),ue=Da("image");return h(),R("div",en,[m("div",{class:K(e.chainName=="Sui"?"sui-title swap-title":"swap-title")},[m("div",on,[e.chainName=="Sui"?(h(),L(t,{key:0,"trade-tab-list":e.tradeTabList,"current-trade-tab":e.currentTradeTab},null,8,["trade-tab-list","current-trade-tab"])):(h(),R(Ro,{key:1},[Ae(F(e.$t("menu.swap")),1)],64))]),m("div",an,[x(J,{"overlay-class-name":"price-impact-tooltip"},{title:ne(()=>[nn]),default:ne(()=>[e.chainName=="Sui"?(h(),R("div",sn,[ln,x(ye,{id:"plusModeSwitch",class:"liquidity-switch",checked:e.plusChecked=="open",onClick:g[0]||(g[0]=w=>{e.handleSwitchPlusMode(w)})},null,8,["checked"])])):U("",!0)]),_:1}),m("div",tn,[e.chainName=="Sui"?(h(),R("div",{key:0,class:"aggregator-setting",onClick:g[1]||(g[1]=w=>e.isShowAggregatorModal=!0)},[x(J,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[un]),default:ne(()=>[m("div",{class:K(e.chainName=="Sui"?"icon-bg":"")},vn,2)]),_:1})])):U("",!0),x(J,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[dn]),default:ne(()=>[m("div",{class:"slippage-icon",onClick:g[2]||(g[2]=w=>e.isShowSwapSetting=!0)},[m("div",{class:K(e.chainName=="Sui"?"icon-bg":"")},[mn,m("span",null,F(e.slippage)+"%",1)],2)])]),_:1}),m("div",{class:K(e.chainName=="Sui"?"icon-bg":"")},[x(Je,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])],2)])])],2),m("div",cn,[m("div",pn,[m("div",{class:K(["card-item",!e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[x($e,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":g[3]||(g[3]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From","swap-loading":!e.fixedFromCoin&&e.fromCoin&&(e.swapRouterLoading||e.assetToCoinLoading),title:"Sell",onOnInputLoading:e.onInputLoading,onOnMax:g[4]||(g[4]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:g[5]||(g[5]=w=>e.halfBtnSelect("fromCoin")),onOnInput:g[6]||(g[6]=w=>{e.fromCoinAmount=w}),onOnFocus:g[7]||(g[7]=()=>{e.fixedFromCoin=!0}),onOnSelect:g[8]||(g[8]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","swap-loading","onOnInputLoading"])],2),m("div",{class:K(["card-item",e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[x($e,{modelValue:e.toCoinAmount,"onUpdate:modelValue":g[9]||(g[9]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,title:"Buy","input-disabled":e.chainName!=="Aptos"&&e.plusChecked=="open","swap-loading":e.fixedFromCoin&&e.toCoin&&(e.swapRouterLoading||e.assetLoading),onOnInputLoading:e.onInputToCoinLoading,onOnInput:g[10]||(g[10]=w=>{e.toCoinAmount=w}),onOnFocus:g[11]||(g[11]=()=>{e.fixedFromCoin=!1}),onOnSelect:g[12]||(g[12]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","input-disabled","swap-loading","onOnInputLoading"])],2),m("img",{class:K(e.change?"gang animationex":"gang"),src:_a,alt:""},null,2),m("div",{class:K(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:g[13]||(g[13]=(...w)=>e.debounceClickExchange&&e.debounceClickExchange(...w))},[(h(),R("svg",{class:K(e.change?"icon animationex":"icon"),"aria-hidden":"true"},gn,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter&&e.fromCoin&&e.toCoin&&!e.insufficientLiquidity?(h(),L(Ge,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"form-coin-market":e.formCoinMarket,"to-coin-market":e.toCoinMarket,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.priceImpact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","form-coin-market","to-coin-market","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(h(),R("div",wn,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(h(),R("div",Cn,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(h(),R("span",An,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(h(),R("span",kn,[ze(m("img",null,null,512),[[ue,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),Ae(" 1 "+F(e.toCoin.symbol)+" â‰ˆ ",1),ze(m("img",null,null,512),[[ue,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),m("span",null,F(("addCommom"in e?e.addCommom:se(B))(("decimalUi"in e?e.decimalUi:se(le))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),Ae(" Â "+F(e.fromCoin.symbol),1)])):(h(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"]))])):U("",!0):(h(),R("span",hn,[ze(m("img",null,null,512),[[ue,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),Ae(" 1 "+F(e.fromCoin.symbol)+" â‰ˆ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(h(),R("span",bn,[ze(m("img",null,null,512),[[ue,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?U("",!0):(h(),R("span",Sn,F(("addCommom"in e?e.addCommom:se(B))(("decimalUi"in e?e.decimalUi:se(le))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(h(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"])):U("",!0),Ae(" Â "+F(e.toCoin.symbol),1)])):(h(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"]))])),m("div",{class:"icon-change",onClick:g[14]||(g[14]=w=>e.rateChange=!e.rateChange)},Tn)])):U("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(h(),R(Ro,{key:1},[m("div",Nn,[m("div",On,F(e.$t("common.priceImpact")),1),e.swaping?(h(),L(te,{key:1,paragraph:!1,active:""})):(h(),R("div",{key:0,class:K(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[Ae(F(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(h(),R("svg",Mn,Un)):U("",!0)],2))]),m("div",Fn,[m("div",$n,F(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(h(),L(te,{key:1,paragraph:!1,active:""})):(h(),R("div",Ln,F(e.fixedFromCoin?("addCommom"in e?e.addCommom:se(B))(("fixD"in e?e.fixD:se(so))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:se(B))(("fixD"in e?e.fixD:se(so))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+F(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),m("div",Bn,[m("div",Pn,F(e.$t("common.fee")),1),e.swaping?(h(),L(te,{key:1,paragraph:!1,active:""})):(h(),R("div",jn,F(("addCommom"in e?e.addCommom:se(B))(e.formatFee,e.fromCoin.decimals))+" "+F(e.fromCoin.symbol)+" ("+F(e.chainName=="Aptos"?e.poolInfo.fee*100:((j=e.toAddLiquidiPoolInfo)==null?void 0:j.fee)*100)+"%) ",1))])],64)):U("",!0)])):U("",!0)]),x(Ie,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((pe=e.poolInfo)==null?void 0:pe.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.swaping,onClick:g[15]||(g[15]=w=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ne(()=>[e.wallet.connected?(h(),R("svg",Dn,qn)):U("",!0),m("span",null,F(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),x(Te),e.showCoinSelect?(h(),L(Le,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:g[16]||(g[16]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):U("",!0),e.isShowSwapSetting?(h(),L(c,{key:1,onOnClose:g[17]||(g[17]=w=>e.isShowSwapSetting=!1)})):U("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(h(),R("div",Wn,[m("div",Hn,[zn,x(J,{"overlay-class-name":"price-impact-tooltip",placement:"top","arrow-point-at-center":""},{title:ne(()=>[Jn]),default:ne(()=>[Gn]),_:1})]),e.fromCoin&&e.formCoinMarket?(h(),L(Ne,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):U("",!0),e.toCoin&&e.toCoinMarket?(h(),L(Ne,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):U("",!0)])):U("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(h(),L(N,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):U("",!0),e.isShowRouterModal?(h(),L(Y,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:g[18]||(g[18]=w=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):U("",!0),e.isSwapConfirmMpdal?(h(),L(u,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.priceImpact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):U("",!0),e.isShowAggregatorModal?(h(),L(i,{key:6,onClose:g[19]||(g[19]=w=>e.isShowAggregatorModal=!1),onModalConfirm:g[20]||(g[20]=w=>{e.modalConfirm(w)})})):U("",!0)])}const Ts=ja(xa,[["render",Kn],["__scopeId","data-v-cb7e705c"]]);export{Ts as default};
