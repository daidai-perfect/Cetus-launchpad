import{_ as Fe}from"./upgrade-select-input.f99d0b2f.js";import{_ as Ve}from"./upgrade-loading.be794bb0.js";import{_ as He}from"./status-block.4ffac746.js";import{g as le,a as Ge,u as _e,s as qe,j as me,e as u,i as Me,b as We,c as ue,d as v,D as ze}from"./pool.57af0916.js";import{a as he,l as ke,m as g,e as ge,o as t,f as r,h as s,i as V,u as o,v as a,c as Re,w as ve,x as I,j as J,z as ae,N as Je,p as be,k as Ie,b as $e,r as U,D as z,y as Ue,q as Ke,t as T,F as Z,s as Q,S as Ze,C as Qe,O as Xe,W as Ye,L as ye,B as xe}from"./entry.648a14ec.js";/* empty css              */import{u as we,c as Ne,a as es}from"./sha256.d159b85d.js";/* empty css              */import{i as ne}from"./import-icon.de3e6c66.js";import{_ as Ce}from"./icon-arrow_2x.948aedb2.js";import{_ as Pe}from"./icon-arrow_2x.4ffddb8e.js";import{u as ss}from"./notifi.63d29e2f.js";import{_ as Se}from"./icon_on_2x.5e96733d.js";import{_ as os,a as as}from"./img-no-Positions_2x.2d3aa827.js";import{_ as ns,a as ts}from"./img-connect-wallet_2x.664227ec.js";import"./coin-select.31b89a68.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./useWhale.c5886074.js";import"./index.5ae9c93c.js";const rs=he({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(e){const{t:b}=ke(),D=we(),P=g(()=>D),w=g(()=>P.value.chainName);console.log(e.pItem,"pItempItem121221");const L=g(()=>Ne[w.value]);return{getExplorerUrl:le,store:P,config:L,t:b}}});const Oe=e=>(be("data-v-4530e4e6"),e=e(),Ie(),e),is={class:"status-block-box"},ds={key:0,class:"owner-addres"},ls=["href"],ms=["href"],us={class:"copy-link"},ps=Oe(()=>s("use",{"xlink:href":"#icon-icon-copy"},null,-1)),cs=["href"],vs=Oe(()=>s("svg",{class:"icon","aria-hidden":"true"},[J(" > "),s("use",{"xlink:href":"#icon-icon-link"})],-1)),hs=[vs];function ks(e,b,D,P,w,L){const R=He,c=Je;return t(),r("div",{class:ae(["upgrade-position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[s("div",is,[V(R,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"])]),e.pItem.tokenName?(t(),r("div",ds,[e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash),target:"_blank"},a(e.pItem.tokenName.split("|")[1]),9,ls)):(t(),Re(c,{key:1,placement:"bottom","arrow-point-at-center":""},{title:ve(()=>[s("span",null,a(e.pItem.tokenName),1)]),default:ve(()=>[s("a",{target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash)},a(e.pItem.tokenName.substr(0,4))+" ... "+a(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,ms)]),_:1}))])):I("",!0),s("div",us,[(t(),r("svg",{class:"icon","aria-hidden":"true",onClick:b[0]||(b[0]=k=>e.store.copy(e.pItem.nftHash))},[J(" > "),ps])),e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash),target:"_blank"},hs,8,cs)):I("",!0)])],2)}const gs=ge(rs,[["render",ks],["__scopeId","data-v-4530e4e6"]]),bs=he({props:{pItem:{type:Object,required:!0}},setup(e){const{t:b}=ke(),D=$e(),P=we(),w=g(()=>P),L=g(()=>w.value.chainName?Ge(w.value.chainName):{}),R=_e(),c=g(()=>R),k=()=>{w.value.chainName==="Aptos"?D.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):D.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},S=g(()=>c.value.allTokenObj&&e.pItem.token_a.address&&c.value.allTokenObj[e.pItem.token_a.address]&&c.value.allTokenObj[e.pItem.token_a.address].logo_url),n=g(()=>c.value.allTokenObj&&e.pItem.token_b.address&&c.value.allTokenObj[e.pItem.token_b.address]&&c.value.allTokenObj[e.pItem.token_b.address].logo_url),H=g(()=>c.value.feeOwedObj[e.pItem.tokenName]&&c.value.feeOwedObj[e.pItem.tokenName].feeOwed),B=g(()=>c.value.feeOwedObj[e.pItem.tokenName]&&c.value.feeOwedObj[e.pItem.tokenName].feesResult),X=g(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarder),G=g(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),Y=g(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),K=U(0),pe=U();z(()=>c.value.RATES,l=>{l&&(pe.value=l)},{immediate:!0});const te=l=>{var O;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((O=c.value.tokensObj[l==null?void 0:l.address])==null?void 0:O.logo_url)||(w.value.theme==="default"?ne("/image/coins/unknown.png"):ne("/image/coins/sui-unknown.png"))},x=g(()=>c.value.tokensObj);Ue(()=>{ce(e.pItem),q(e.pItem.minPrice,e.pItem.maxPrice)});const ee=U("--"),q=(l,O)=>{l!=="0"&&O!=="∞"?ee.value=qe(1/(1-Number((l/O)**.25)),2)+"x":ee.value=1},$=U(30),y=U(null),ce=async l=>{var A,E,W;console.log("0607###list###aprPercentageObj###poolInfo###",l),console.log("0607###list###aprPercentageObj###props.pItem###",e.pItem),console.log("0607###list###aprPercentageObj###directs###",!0);const N=Number(e.pItem.minPrice),C=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:Number(e.pItem.maxPrice);let _=[];_=w.value&&w.value.addressHistTokens&&w.value.addressHistTokens[l.poolAddress]&&w.value.addressHistTokens[l.poolAddress].data&&w.value.addressHistTokens[l.poolAddress].data.length>0&&Object.fromEntries(w.value.addressHistTokens[l.poolAddress].data.map(F=>[F.key,F.value]));const M=Number(Number($.value==7?_.before_7_d_contract_price_lowest:$.value==24?_.before_24_h_contract_price_lowest:_.before_30_d_contract_price_lowest)),d=Number(Number($.value==7?_.before_7_d_contract_price_highest:$.value==24?_.before_24_h_contract_price_highest:_.before_30_d_contract_price_highest));console.log("0607###list###aprPercentageObj###lowerUserPrice###",N),console.log("0607###list###aprPercentageObj###upperUserPrice###",C),console.log("0607###list###aprPercentageObj###lowerHistPrice###",M),console.log("0607###list###aprPercentageObj###upperHistPrice###",d);const i=c.value.tokensObj,m=await L.value.getEstPositionAPRWithMulti(N,C,M,d);console.log("0607###lis###resMulti####",m.toString());const h=Number(m.toString()),p=w.value.newTopPoolsObj[l.poolAddress];let f;if(p){$.value==7?f=p.apr_7day?Number(p.apr_7day.substring(0,p.apr_7day.length-1)):0:$.value==24?f=p.apr_24h?Number(p.apr_24h.substring(0,p.apr_24h.length-1)):0:f=p.apr_30day?Number(p.apr_30day.substring(0,p.apr_30day.length-1)):0;const F=p.rewarder_apr[0]?Number(p.rewarder_apr[0].substring(0,p.rewarder_apr[0].length-1)):0,je=p.rewarder_apr[1]?Number(p.rewarder_apr[1].substring(0,p.rewarder_apr[1].length-1)):0,De=p.rewarder_apr[2]?Number(p.rewarder_apr[2].substring(0,p.rewarder_apr[2].length-1)):0,se=Number(h*f),re=Number(h*F),ie=Number(h*je),de=Number(h*De),oe=se+(l.rewarder_display1?re:0)+(l.rewarder_display2?ie:0)+(l.rewarder_display3?de:0),Le=l.rewarder_infos[0]?(A=i[l.rewarder_infos[0].coinAddress])==null?void 0:A.symbol:"--",Te=l.rewarder_infos[1]?(E=i[l.rewarder_infos[1].coinAddress])==null?void 0:E.symbol:"--",Be=l.rewarder_infos[2]?(W=i[l.rewarder_infos[2].coinAddress])==null?void 0:W.symbol:"--",Ee={aprFee:se==1/0||isNaN(se)?0:se,rewardAprList:[{rewarder_name:Le,rewarder_apr:re==1/0||isNaN(re)?0:re,styleName:"one",rewarder_display:l.rewarder_display1},{rewarder_name:Te,rewarder_apr:ie==1/0||isNaN(ie)?0:ie,styleName:"two",rewarder_display:l.rewarder_display2},{rewarder_name:Be,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"three",rewarder_display:l.rewarder_display2}],aprPercentageTotal:oe==1/0||isNaN(oe)||oe===0?0:oe,aprPercentage:me(se/oe,2),is_display_rewarder:l.is_display_rewarder};y.value=Ee}};return{aprNum:g(()=>{var l,O,N,C,_,M,d,i,m,h,p,f;return y.value?y.value.is_display_rewarder?(l=y.value)!=null&&l.aprPercentageTotal?((O=y.value)==null?void 0:O.aprPercentageTotal)>1e4?">10,000":((N=y.value)==null?void 0:N.aprPercentageTotal)<.01&&((C=y.value)==null?void 0:C.aprPercentageTotal)>0?"<0.01":u((_=y.value)==null?void 0:_.aprPercentageTotal,2):(M=y.value)!=null&&M.rewardAprList?"0":"--":(d=y.value)!=null&&d.aprFee?((i=y.value)==null?void 0:i.aprFee)>1e4?">10,000":((m=y.value)==null?void 0:m.aprFee)<.01&&((h=y.value)==null?void 0:h.aprFee)>0?"<0.01":u((p=y.value)==null?void 0:p.aprFee,2):(f=y.value)!=null&&f.rewardAprList?"0":"--":"--"}),lever:ee,tokensObj:x,showNum:Me,fromCoinUrl:S,toCoinUrl:n,decimalFormat:We,clickDetails:k,t:b,addCommom:u,importIcon:ne,router:D,store:w,pendingRewarder:X,pendingFees:H,pendingRewarderArr:Y,pendingFeesArr:B,checkNullObj:ue,fixD:me,decimalUi:v,pendingRewarderView:G,aprAmount:K,getCoinIcon:te,Decimal:ze}}});const j=e=>(be("data-v-1080e810"),e=e(),Ie(),e),Is={class:"upgrade-position-item"},ws={class:"card-content"},fs={class:"left"},ys={class:"top card-header"},_s={class:"token-item"},Rs={class:"item"},$s={key:0,class:"token-warning"},Us={key:0},Ns={class:"item"},Cs={key:0,class:"token-warning"},Ps={key:0},Ss={class:"card-header-right"},Os={key:0,class:"item"},As=j(()=>s("span",null,"Leverage",-1)),js={class:"item"},Ds=j(()=>s("span",null,"Estimated APR",-1)),Ls=j(()=>s("div",{class:"more-img"},null,-1)),Ts={class:"bottom"},Bs={class:"info-block-container"},Es={class:"info-block"},Fs=j(()=>s("div",{class:"leabl"},"Fee Tier",-1)),Vs={class:"text"},Hs={class:"info-block"},Gs=j(()=>s("div",{class:"leabl"},"Price Range",-1)),qs={class:"text"},Ms={class:"min-and-max"},Ws={class:"left-text"},zs={class:"text"},Js={class:"hover-text"},Ks={key:0,src:Ce,alt:""},Zs={key:1,src:Pe,alt:""},Qs={class:"right-text"},Xs={class:"text"},Ys={class:"hover-text"},xs={class:"leabl"},eo={class:"text"},so={key:0,class:"hover-rewarder"},oo={class:"rewarder-info"},ao={class:"left-rewarder"},no={alt:""},to={class:"right-rewarder"},ro={class:"amount"},io={key:0,class:"amount-usd"},lo={key:1,class:"amount-usd"},mo={class:"rewarder-info"},uo={class:"left-rewarder"},po={alt:""},co={class:"right-rewarder"},vo={class:"amount"},ho={key:0,class:"amount-usd"},ko={key:1,class:"amount-usd"},go={class:"leabl"},bo={key:0,class:"text"},Io={key:1,class:"text"},wo={key:2,class:"text"},fo={key:3,class:"hover-rewarder"},yo={class:"left-rewarder"},_o={alt:""},Ro={class:"right-rewarder"},$o={class:"amount"},Uo={class:"amount-usd"},No={class:"leabl"},Co={key:0,class:"text"},Po={key:1,class:"text"},So={key:2,class:"hover-rewarder"},Oo={class:"left-rewarder"},Ao={alt:""},jo={class:"right-rewarder"},Do={class:"amount"},Lo={class:"amount-usd"},To={class:"h5-bottom"},Bo={class:"item"},Eo=j(()=>s("span",null,"Leverage",-1)),Fo={class:"item"},Vo=j(()=>s("span",null,"Estimated APR",-1)),Ho=j(()=>s("div",{class:"more-img"},null,-1)),Go={class:"info"},qo={class:"info-item"},Mo=j(()=>s("div",{class:"left"},"Fee Tier",-1)),Wo={class:"right"},zo={class:"info-item range-item"},Jo={class:"left"},Ko={class:"right"},Zo={class:"min-and-max"},Qo={class:"text"},Xo={key:0,src:Ce,alt:""},Yo={key:1,src:Pe,alt:""},xo={class:"text"},ea={class:"info-item"},sa=j(()=>s("div",{class:"left"},"Liquidity",-1)),oa={class:"right"},aa={key:0,class:"hover-rewarder"},na={class:"rewarder-info"},ta={class:"left-rewarder"},ra={alt:""},ia={class:"right-rewarder"},da={class:"amount"},la={key:0,class:"amount-usd"},ma={key:1,class:"amount-usd"},ua={class:"rewarder-info"},pa={class:"left-rewarder"},ca={alt:""},va={class:"right-rewarder"},ha={class:"amount"},ka={key:0,class:"amount-usd"},ga={key:1,class:"amount-usd"},ba={class:"info-item"},Ia=j(()=>s("div",{class:"left"},"Pending Fees",-1)),wa={key:0,class:"right"},fa={key:1,class:"right"},ya={key:2,class:"right"},_a={key:3,class:"hover-rewarder"},Ra={class:"left-rewarder"},$a={alt:""},Ua={class:"right-rewarder"},Na={class:"amount"},Ca={class:"amount-usd"},Pa={key:0,class:"info-item"},Sa={class:"left"},Oa={key:0,class:"right"},Aa={key:1,class:"right"},ja={key:2,class:"hover-rewarder"},Da={class:"left-rewarder"},La={alt:""},Ta={class:"right-rewarder"},Ba={class:"amount"},Ea={class:"amount-usd"};function Fa(e,b,D,P,w,L){var S;const R=gs,c=Ze,k=Ke("image");return t(),r("div",Is,[s("div",ws,[s("div",fs,[V(R,{"p-item":e.pItem,"current-status":((S=e.pItem)==null?void 0:S.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:b[0]||(b[0]=(...n)=>e.clickDetails&&e.clickDetails(...n))},[s("div",ys,[s("div",_s,[s("div",Rs,[s("div",null,[T(s("img",null,null,512),[[k,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(t(),r("div",$s)):I("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,[J(a(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" ",1),e.store.theme=="default"?(t(),r("span",Us,a(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)):I("",!0)])]),s("div",Ns,[s("div",null,[T(s("img",null,null,512),[[k,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(t(),r("div",Cs)):I("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,[J(a(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" ",1),e.store.theme=="default"?(t(),r("span",Ps,a(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)):I("",!0)])])]),s("div",Ss,[e.pItem.minPrice!=="0"&&e.pItem.maxPrice!=="∞"?(t(),r("div",Os,[s("p",null,a(e.lever),1),As])):I("",!0),s("div",js,[s("p",null,a(e.aprNum)+"%",1),Ds]),Ls])]),s("div",Ts,[s("div",Bs,[s("div",Es,[Fs,s("div",Vs,a(e.pItem.fee*100)+"%",1)]),s("div",Hs,[Gs,s("div",qs,[s("div",Ms,[s("div",Ws,[s("div",zs,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1),s("div",Js,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1)]),e.store.theme=="default"?(t(),r("img",Ks)):(t(),r("img",Zs)),s("div",Qs,[s("div",Xs,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1),s("div",Ys,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1)]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])]),s("div",{class:ae(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",xs,a(e.$t("common.liquidity")),1),s("div",eo," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:o(u))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",so,[s("div",oo,[s("div",ao,[T(s("img",no,null,512),[[k,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",to,[s("div",ro,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",lo,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:o(me))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",io,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:o(me))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",mo,[s("div",uo,[T(s("img",po,null,512),[[k,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",co,[s("div",vo,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",ko,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",ho,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):I("",!0)],2),s("div",{class:ae(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",go,a(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(t(),r("div",bo,"$ --")):isNaN(e.pendingFees)?(t(),r("div",wo,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",Io,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:o(u))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",fo,[(t(!0),r(Z,null,Q(e.pendingFeesArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",yo,[T(s("img",_o,null,512),[[k,e.getCoinIcon(n)]]),s("span",null,a(n.symbol),1)]),s("div",Ro,[s("div",$o,a(Number(n.amount)==0?0:Number(n.amount)>1e-6?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals),n.decimals):"<0.000001"),1),s("div",Uo,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(u))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:o(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",{key:0,class:ae(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",No,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",Co," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Po,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",So,[(t(!0),r(Z,null,Q(e.pendingRewarderArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Oo,[T(s("img",Ao,null,512),[[k,n.logoURI]]),s("span",null,a(n.symbol),1)]),s("div",jo,[s("div",Do,a(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals)),1),s("div",Lo,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(u))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)],2)):I("",!0)])])])]),s("div",To,[s("div",{class:"card-header-right",onClick:b[1]||(b[1]=(...n)=>e.clickDetails&&e.clickDetails(...n))},[s("div",Bo,[s("p",null,a(e.lever),1),Eo]),s("div",Fo,[s("p",null,a(e.aprNum)+"%",1),Vo]),Ho]),s("div",Go,[s("div",qo,[Mo,s("div",Wo,a(e.pItem.fee*100)+"%",1)]),s("div",zo,[s("div",Jo,[J("Price Range ("),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",Ko,[s("div",Zo,[s("div",Qo,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(t(),r("img",Xo)):(t(),r("img",Yo)),s("div",xo,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1)])])]),s("div",ea,[sa,s("div",oa," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:o(u))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",aa,[s("div",na,[s("div",ta,[T(s("img",ra,null,512),[[k,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ia,[s("div",da,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",ma,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",la,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",ua,[s("div",pa,[T(s("img",ca,null,512),[[k,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",va,[s("div",ha,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",ga,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",ka,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):I("",!0)]),s("div",ba,[Ia,e.pendingFees==="--"?(t(),r("div",wa,"$ --")):isNaN(e.pendingFees)?(t(),r("div",ya,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",fa,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:o(u))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",_a,[(t(!0),r(Z,null,Q(e.pendingFeesArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Ra,[T(s("img",$a,null,512),[[k,e.getCoinIcon(n)]]),s("span",null,a(n.symbol),1)]),s("div",Ua,[s("div",Na,a(Number(n.amount)==0?0:Number(n.amount)>1e-6?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals),n.decimals):"<0.000001"),1),s("div",Ca,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(u))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:o(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",Pa,[s("div",Sa,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",Oa," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Aa,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",ja,[(t(!0),r(Z,null,Q(e.pendingRewarderArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Da,[T(s("img",La,null,512),[[k,n.logoURI]]),s("span",null,a(n.symbol),1)]),s("div",Ta,[s("div",Ba,a(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals)),1),s("div",Ea,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(u))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)])):I("",!0)])])])}const Va=ge(bs,[["render",Fa],["__scopeId","data-v-1080e810"]]),Ha=he({setup(){const e=U(!1),{t:b}=ke(),D=U(["position"]),P=$e(),w=U(""),L=we(),R=g(()=>L),c=g(()=>R.value.chainName?Ne[R.value.chainName]:{});let k=U([]);const S=_e(),n=g(()=>S),H=es(),B=g(()=>H),X=U(!1),G=U(b("tab.all")),Y=U([b("tab.layerZero"),b("tab.wormhole"),b("tab.celer")]),K=U(!0),pe=U("TVL"),te=()=>{e.value=!0,k.value=[],B.value.address&&S.getMyPositons(B.value.address,n.value.poolsObj,R.value.chainName),setTimeout(()=>{e.value=!1},1e3)};z(()=>R.value.isRefresh,d=>{var i;d&&((i=P==null?void 0:P.currentRoute)==null?void 0:i.value.name.split("-")[1])=="position"&&te()}),Ue(()=>{k.value=[],document.addEventListener("click",()=>{X.value=!1}),S.setMyPositionsLoading(!0)}),Qe(()=>{document.addEventListener("click",()=>{X.value=!1})}),Xe(()=>{B.value.connected||(k.value=[])});const x=()=>{e.value=!0;let d=[];n.value.myPositions.forEach(i=>{var A,E,W,F;let m,h;const p=i.amountA*((A=n.value.RATES[i.token_a.address])==null?void 0:A.price),f=i.amountB*((E=n.value.RATES[i.token_b.address])==null?void 0:E.price);(W=n.value.RATES[i.token_a.address])!=null&&W.price&&((F=n.value.RATES[i.token_b.address])!=null&&F.price)?(m=p+f,h=p+f):(m=" --",h=0),d.push({...i,amountUSD:m,amountUSDOrigin:h,tokenARates:p,tokenBRates:f})}),G.value!="All"?K.value?(k.value=d.sort((i,m)=>Number(m.amountUSDOrigin)-Number(i.amountUSDOrigin)),e.value=!1):(k.value=d.sort((i,m)=>Number(i.amountUSDOrigin)-Number(m.amountUSDOrigin)),e.value=!1):K.value?(k.value=d.sort((i,m)=>m.amountUSDOrigin-i.amountUSDOrigin),e.value=!1):(k.value=d.sort((i,m)=>i.amountUSDOrigin-m.amountUSDOrigin),e.value=!1),console.log(k.value,"list.value========>")};z(()=>[n.value.myPositions,n.value.RATES],([d,i])=>{d&&i&&(console.log("0605==>updateLpList9099999"),x())},{immediate:!0}),z(()=>[B.value.address,n.value.poolConfigList,n.value.poolsObj,R.value.chainName],([d,i,m,h])=>{var p,f,A;d&&i&&i.length>0&&h&&(h!=null&&h.toLowerCase().includes((p=i[0])==null?void 0:p.chain))&&!ue(m)&&(h==="Aptos"?i.length===Object.values(m).length:(A=(f=Object.values(m)[0])==null?void 0:f.chain)!=null&&A.includes("sui"))&&(console.log("0605==>getMyPositons9099999"),S.getMyPositons(B.value.address,m,h))},{immediate:!0,deep:!0}),z(()=>G.value,d=>{x()}),z(()=>K.value,d=>{x()});const ee=d=>{const i=[];Y.value.forEach((m,h)=>{m==d?i[h]=G.value:i[h]=m}),Y.value=i,G.value=d},q=ss(),$=g(()=>q),y=g(()=>S),ce=async d=>{await q.getSourceGroups();const i=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let m=0;m<i.length;m++){const{pool_address:h,position_index:p}=JSON.parse(i[m].blockchainAddress);let f=!1,A;for(let E=0;E<d.length;E++){const{poolAddress:W,index:F}=d[E];h==W&&Number(F)==Number(p)&&(f=!0),A={pool_address:h,position_index:p}}f||await q.subscribePosition(A,"",!1,!1)}},fe=async()=>{await q.getSourceGroups();const d=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let i=0;i<d.length;i++){const{pool_address:m,position_index:h}=JSON.parse(d[i].blockchainAddress),{name:p}=d[i],f={pool_address:m,position_index:h};await q.subscribePosition(f,p,!1,!1)}},l=g(()=>y.value.myPositionsLoading);z(()=>y.value.myPositions,(d,i)=>{c.value.hasNotifi&&(d&&d.length>0&&i&&i.length!==d.length?ce(d):d&&d.length==0&&!l.value&&fe())},{immediate:!0});const O=d=>{var i;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((i=n.value.tokensObj[d==null?void 0:d.address])==null?void 0:i.logo_url)||(R.value.theme==="default"?ne("/image/coins/unknown.png"):ne("/image/coins/sui-unknown.png"))},N=U(null),C=g(()=>N.value&&N.value.firstToken?N.value.firstToken:null),_=g(()=>N.value&&N.value.lastToken?N.value.lastToken:null),M=g(()=>{let d=[];d=k.value;const i=d.filter((m,h)=>C.value&&_.value?m.coinA.symbol==C.value.symbol&&m.coinB.symbol==_.value.symbol||m.coinA.symbol==_.value.symbol&&m.coinB.symbol==C.value.symbol:C.value?m.coinA.symbol.toLowerCase().includes(C.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(C.value.symbol.toLowerCase()):_.value?m.coinA.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(_.value.symbol.toLowerCase()):d);return n.value.myPositionsLoading||L.setPositiomAmount(i.length),i});return Ye(()=>{L.setPositiomAmount("--")}),{showList:M,childTokenSelectRef:N,firstToken:C,lastToken:_,getCoinIcon:O,changeSortLabel:ee,label:X,labelList:Y,labelValue:G,select:K,selectValue:pe,t:b,pools:n,store:R,wallet:B,list:k,clickRefresh:te,refresh:e,current:D,router:P,searchKey:w}}});const Ae=e=>(be("data-v-a9330e48"),e=e(),Ie(),e),Ga={class:"upgrade-position-list-container"},qa={class:"content-top"},Ma={class:"content-top-left"},Wa={class:"content-top-right"},za={class:"value"},Ja=Ae(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ka=[Ja],Za={key:0,class:"select-item"},Qa=["onClick"],Xa={class:"search-select-box"},Ya=Ae(()=>s("span",null,"TVL",-1)),xa={key:0,src:Se,alt:""},en={key:1,class:"fan-img",src:Se,alt:""},sn={key:0,class:"upgrade-loading"},on={key:1,class:"position-list"},an={key:2,class:"no-data"},nn={key:0,src:os,alt:""},tn={key:1,src:as,alt:""},rn={key:3,class:"no-data"},dn={key:0,src:ns,alt:""},ln={key:1,src:ts,alt:""};function mn(e,b,D,P,w,L){const R=Fe,c=Ve,k=Va,S=xe;return t(),r("div",Ga,[s("div",qa,[s("div",Ma,[V(R,{ref:"childTokenSelectRef"},null,512)]),s("div",Wa,[e.store.theme=="default"?(t(),r("div",{key:0,class:"search-label",onClick:b[0]||(b[0]=ye(n=>e.label=!e.label,["stop"]))},[s("span",null,a(e.$t("newAdd.label")),1),s("div",za,a(e.labelValue),1),(t(),r("svg",{"aria-hidden":"true",class:ae(e.label?"show-icon icon":"icon")},Ka,2)),e.label?(t(),r("div",Za,[(t(!0),r(Z,null,Q(e.labelList,(n,H)=>(t(),r("div",{key:H,class:"select-menu-item",onClick:B=>e.changeSortLabel(n)},a(n),9,Qa))),128))])):I("",!0)])):I("",!0),s("div",Xa,[s("div",{class:"search-select",onClick:b[1]||(b[1]=ye(n=>e.select=!e.select,["stop"]))},[J(a(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[Ya,e.select?(t(),r("img",xa)):(t(),r("img",en))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",sn,[V(c,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):I("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(t(),r("div",on,[(t(!0),r(Z,null,Q(e.showList,(n,H)=>(t(),Re(k,{key:H,"p-item":n},null,8,["p-item"]))),128))])):I("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",an,[e.store.theme=="default"?(t(),r("img",nn)):(t(),r("img",tn)),s("span",null,a(e.$t("common.noLiquidityPositions")),1)])):I("",!0),e.wallet.connected?I("",!0):(t(),r("div",rn,[e.store.theme=="default"?(t(),r("img",dn)):(t(),r("img",ln)),V(S,{class:"connect-wallet",onClick:b[2]||(b[2]=n=>e.wallet.setIsShowWalletModal(!0))},{default:ve(()=>[J(a(e.$t("button.connectWallet")),1)]),_:1})]))])}const An=ge(Ha,[["render",mn],["__scopeId","data-v-a9330e48"]]);export{An as default};
