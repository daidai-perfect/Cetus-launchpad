import{u as Pe,_ as gt}from"./xwhale-header.7fb0cee9.js";import{r as _,V as Ye,A as W,e as te,o as c,f as w,h as n,x as T,j as L,z as fe,m as i,C as qe,G as Y,I as Te,c as O,S as Ge,p as ue,k as re,i as V,F as xe,E as Ne,w as z,B as pe,l as Re,u as Ee,y as ge,a as De,a2 as ht,a3 as ft,K as pt,$ as _t,q as wt,s as bt,fb as Fe,fi as Ct}from"./entry.72cf903d.js";import"./index.5fe47a1e.js";import{u as he}from"./index.79763a93.js";import{i as se}from"./import-icon.de3e6c66.js";import{a as x,b as Se,c as ie,p as le,y as He,m as ye}from"./common.f2e8d2dc.js";import{u as _e,a as Le,b as Ue}from"./index.8e642dee.js";import{u as We}from"./useWhale.efe2daab.js";import{_ as ze}from"./xWHALE-icon.2df34cd4.js";import{_ as Ke}from"./WHALE-icon.28f954ba.js";import{_ as yt}from"./head-switch.64238164.js";/* empty css              */import{u as St}from"./useDebounceFunction.0e5faf7f.js";import{C as Tt}from"./check-box.095f2b9f.js";/* empty css              *//* empty css              */import"./decimal.a2826370.js";import{u as kt}from"./useTheme.8a8cc515.js";import{D as Xe}from"./decimal.765d8738.js";import{_ as je}from"./img-leverage_2x.1c577303.js";const It={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const s=_("--"),a=_("--"),k=_("--"),S=_("--");let m=null;Ye(()=>{window.clearInterval(m)});const b=()=>{const h=new Date().getTime()/1e3;Number(h)<=Number(e.startTime)&&I(e.startTime),Number(h)>Number(e.startTime)&&Number(h)<=Number(e.endTime)&&I(e.endTime)},I=h=>{clearInterval(m),window.clearInterval(m),m=setInterval(()=>{let g=new Date().getTime()/1e3,r=h-parseInt(String(g));if(r==0){t.emit("countDown"),clearInterval(m),window.clearInterval(m),m=null;return}else r<0&&(clearInterval(m),window.clearInterval(m),t.emit("countDown"),m=null);r--;let f=parseInt(String(r/60/60/24));f=(f<10,f);let o=parseInt(String(r/60/60%24));o=(o<10,o);let C=parseInt(String(r/60%60));C=(C<10,C);let P=parseInt(String(r%60));P=P<10?+P:P,s.value=f,a.value=o,k.value=C,S.value=P},1e3)};return W(()=>e.startTime,(h,g)=>{h!==g&&b()},{immediate:!0}),{day:s,hour:a,min:k,sec:S}}};const $t={class:"count-time"};function Bt(e,t,s,a,k,S){return c(),w("div",$t,[n("p",null,T(a.day)+"d",1),L(" : "),n("p",null,T(a.hour)+"h",1),L(" : "),n("p",null,T(a.min)+"m",1),L(" : "),n("p",null,T(a.sec)+"s",1)])}const At=te(It,[["render",Bt],["__scopeId","data-v-ce10c596"]]),xt={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"},tokenSymbol:{type:String,default:""},logo:{type:String,default:""}},setup(e){const{t}=fe(),s=he(),a=i(()=>s);return{t,wallet:a}}};const Nt=e=>(ue("data-v-16905b90"),e=e(),re(),e),Rt={class:"table-rewards"},Et={key:0,class:"logo"},Pt=["src"],Dt={class:"text-top-all"},Lt={key:0,class:"icon-hover-box"},Ut=Nt(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1)),Wt={class:"tips-text-box"},Mt={key:0},Vt={key:0,alt:""},Ot={key:2};function Ft(e,t,s,a,k,S){const m=Ge,b=qe("image");return c(),w("div",Rt,[s.logo?(c(),w("div",Et,[n("img",{src:s.logo,alt:""},null,8,Pt)])):Y("",!0),n("div",null,[n("div",Dt,[n("p",null,T(s.titleText),1),s.tipsText?(c(),w("div",Lt,[Ut,n("div",Wt,T(s.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):Y("",!0)]),n("span",null,[s.value!=="--"?(c(),w("p",Mt,[s.imgIcon?Te((c(),w("img",Vt,null,512)),[[b,s.imgIcon]]):Y("",!0),L(T(s.value)+" ",1),n("span",null,T(s.tokenSymbol),1)])):s.value=="--"&&a.wallet&&a.wallet.address?(c(),O(m,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})):(c(),w("p",Ot,"--"))])])])}const Ht=te(xt,[["render",Ft],["__scopeId","data-v-16905b90"]]),Xt={setup(e){const{t}=fe(),s=Pe(),a=i(()=>s),k=i(()=>a.value.pendingAmount),S=i(()=>a.value.newPendingAmount),m=i(()=>a.value.rewardCoinAmount),b=i(()=>a.value.nextStartTime),I=i(()=>1683094391),h=i(()=>a.value.xcetusShare&&x(a.value.xcetusShare,3)),g=he(),u=i(()=>g),r=i(()=>a.value.cetusApr&&a.value.cetusApr>.01?x(Se(a.value.cetusApr,2),2):x(a.value.cetusApr,2)),f=i(()=>a.value.pendingCoinInfo),o=i(()=>a.value.newPendingCoinInfo),C=i(()=>a.value.rewardCoin),P=_("");W(()=>f.value,y=>{y&&ie(y),P.value="Pending yield"},{immediate:!0});const v=_("");W(()=>o.value,y=>{y&&!ie(y)?v.value=`Pending yield (${y.symbol})`:v.value="Pending yield"},{immediate:!0});const D=_();W(()=>C.value,y=>{y&&!ie(y)?D.value=`Pending yield (${y.symbol})`:D.value="Pending yield"},{immediate:!0});const ne=()=>{setTimeout(()=>{s.getDividendManager()},3e3)},F=i(()=>a.value.dividendManagerInfo),Q=i(()=>{const y=parseInt(String(new Date().getTime()/1e3)),M=F.value.interval_day,N=(y-Number(F.value.start_time))/(M*60);return parseInt(String(N))>0}),q=_e(),Z=i(()=>q),{setIsShowSuccess:G,setIsShowRejected:H,setIsShowWaiting:K,setTransactionDesc:B,setTransactionTxid:ae}=q,Ie=We("Sui"),oe=_(!1),$e=i(()=>a.value.venft_id),A=i(()=>Z.value.chainName?Ue(Z.value.chainName):{}),ee=async()=>{oe.value=!0,K(!0),ae("");let y=`${t("tips.claimingPendingYield")} `,M="";E.value.forEach((N,R)=>{M=M+`${x(N.amount)} ${N.symbol} ${R==E.value.length-1?"":"and "}`}),B(y+M);try{let N;const R=await Ie.getRedeemDividendV2Payload($e.value),ce=await A.value.signAndExecuteTransactionBlock(u.value.currentWallet,R.txb,R.payloadParams);if(N=A.value.handleTx(ce),N&&N.hash){ae(N.hash),K(!1),G(!0);const X={title:"Claim",desc:`Claimed ${M} successfully.`,hash:N.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:f.value.symbol,numa:`+ ${k.value}`,logoa:f.value.logo_url}};A.value.showTransitionPending(X);const me=await A.value.watchTransaction(X);console.log("0221###swap###transitionStatus####",me),me&&setTimeout(()=>{s.getVeNFTDividendInfo(),oe.value=!1},3e3),s.getOwnerLockCetuss(u.value.address)}else K(!1),H(!0),oe.value=!1}catch(N){K(!1),H(!0),oe.value=!1,console.log(N,"error===>")}},be=Le(),$=i(()=>be),Ce=y=>{var M;return(y==null?void 0:y.logoURI)||(y==null?void 0:y.logo_url)||((M=$.value.tokensObj[y==null?void 0:y.address])==null?void 0:M.logo_url)},E=i(()=>a.value.xcetusRewardList);return{t,pendingAmount:k,nextStartTime:b,wallet:u,myShare:h,importIcon:se,nextEndTime:I,pendingYieldText:P,cetusApr:r,pendingCoinInfo:f,getNextEpoch:ne,canClaim:Q,claimPendingYield:ee,claimLoading:oe,addCommom:x,newPendingCoinInfo:o,newPendingAmount:S,newPendingYieldText:v,rewardCoin:C,rewardCoinAmount:m,rewardCoinYieldText:D,getCoinIcon:Ce,xcetusRewardList:E}}},jt=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,Yt=""+globalThis.__publicAssetsURL("sui-image/icon_pendingyield@2x.png");const we=e=>(ue("data-v-47dbd3bd"),e=e(),re(),e),qt={class:"top-banner"},Gt=we(()=>n("img",{src:jt,alt:""},null,-1)),zt=we(()=>n("p",null,"Convert CETUS to xCETUS to start earning",-1)),Kt={class:"bot-count"},Jt=we(()=>n("span",null,"Reward distribution in ",-1)),Qt={class:"holder-rewards"},Zt=we(()=>n("div",{class:"title"},[n("div",{class:"left"},[n("span",null,"xCETUS Staking Rewards")])],-1)),en={class:"rewards-value"},tn={key:0,class:"pending-yield"},nn=we(()=>n("div",{class:"pending-yield-title"},[n("img",{src:Yt,alt:""}),n("span",null,"Pending Yield")],-1)),an={class:"pending-yield-list"},on={alt:""},ln={class:"claim-btn-box"};function sn(e,t,s,a,k,S){const m=At,b=Ht,I=pe,h=qe("image");return c(),w("div",null,[n("div",qt,[Gt,zt,n("div",Kt,[Jt,V(m,{"start-time":a.nextStartTime,onCountDown:t[0]||(t[0]=g=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),n("div",Qt,[Zt,n("div",en,[V(b,{"title-text":"est.APR","tips-text":"good",value:"≈"+a.cetusApr+"%",logo:"/sui-image/icon_estapr@2x.png"},null,8,["value"]),V(b,{"title-text":"My share",value:a.myShare!=="--"?"≈"+a.myShare+"%":"--",logo:"/sui-image/icon_myshare@2x.png"},null,8,["value"]),a.xcetusRewardList&&a.xcetusRewardList.length==0?(c(),O(b,{key:0,"title-text":"Pending yield",value:a.wallet&&a.wallet.address?"0":"--",logo:"/sui-image/icon_pendingyield@2x.png"},null,8,["value"])):Y("",!0)]),a.wallet&&a.wallet.address&&a.xcetusRewardList&&a.xcetusRewardList.length>0?(c(),w("div",tn,[nn,n("div",an,[(c(!0),w(xe,null,Ne(a.xcetusRewardList,(g,u)=>(c(),w("div",{key:u,class:"pending-yield-item"},[n("div",null,[Te(n("img",on,null,512),[[h,a.getCoinIcon(g)]]),n("span",null,T(g.symbol),1)]),n("div",null,T(a.addCommom(g.amount,6)),1)]))),128)),n("div",ln,[a.wallet&&a.wallet.address&&a.xcetusRewardList&&a.xcetusRewardList.length>0?(c(),O(I,{key:0,class:"claim-btn",loading:a.claimLoading,disabled:!a.canClaim||a.xcetusRewardList&&a.xcetusRewardList.length==0,onClick:a.claimPendingYield},{default:z(()=>[L(" Claim ")]),_:1},8,["loading","disabled","onClick"])):Y("",!0)])])])):Y("",!0)])])}const un=te(Xt,[["render",sn],["__scopeId","data-v-47dbd3bd"]]),rn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const s=_("--"),a=_("--"),k=_("--"),S=_("--");let m=null;Ye(()=>{window.clearInterval(m)});const b=()=>{const h=new Date().getTime()/1e3;Number(h)<=Number(e.startTime)&&I(e.startTime),Number(h)>Number(e.startTime)&&Number(h)<=Number(e.endTime)&&I(e.endTime)},I=h=>{m=setInterval(()=>{let g=new Date().getTime()/1e3,r=h-parseInt(String(g));if(r==0){t.emit("countDown"),clearInterval(m),window.clearInterval(m),m=null;return}else r<0&&(clearInterval(m),window.clearInterval(m),t.emit("countDown"),m=null);r--;let f=parseInt(String(r/60/60/24));f=f<10?"0"+f:f;let o=parseInt(String(r/60/60%24));o=o<10?"0"+o:o;let C=parseInt(String(r/60%60));C=C<10?"0"+C:C;let P=parseInt(String(r%60));P=P<10?"0"+P:P,s.value=f,a.value=o,k.value=C,S.value=P},1e3)};return W(()=>e.startTime,(h,g)=>{h!==g&&b()},{immediate:!0}),{day:s,hour:a,min:k,sec:S}}};const ke=e=>(ue("data-v-131b3f4e"),e=e(),re(),e),dn={class:"count-down"},cn=ke(()=>n("span",null,"D : ",-1)),mn=ke(()=>n("span",null,"H : ",-1)),vn=ke(()=>n("span",null,"M : ",-1)),gn=ke(()=>n("span",null,"S",-1));function hn(e,t,s,a,k,S){return c(),w("div",dn,[L(T(a.day)+" ",1),cn,L(" "+T(a.hour)+" ",1),mn,L(" "+T(a.min)+" ",1),vn,L(" "+T(a.sec)+" ",1),gn])}const fn=te(rn,[["render",hn],["__scopeId","data-v-131b3f4e"]]),pn={components:{WcountDown:fn},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,t){const{t:s}=fe(),a=Pe(),k=_e(),S=i(()=>k),m=f=>{t.emit("claim",f),a.setClaimLoading(f.id)},b=i(()=>a),I=i(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),h=f=>{t.emit("cancelRedeemPayload",f),a.setClaimLoading(f.id)};i(()=>S.value.chainName),We("Sui");const g=he();return i(()=>g),i(()=>b.value.venft_id),i(()=>S.value.chainName?Ue(S.value.chainName):{}),{t:s,prettyAmount:le,claimBoolean:I,toClaim:m,toCancel:h,claimWhale:f=>{t.emit("claimWhale",f)},cancelRedeemPayload:f=>{t.emit("cancelRedeemPayload",f)}}}};const Me=e=>(ue("data-v-6f4aa7a5"),e=e(),re(),e),_n={class:"vesting-box"},wn={class:"left"},bn=Me(()=>n("img",{src:ze,alt:""},null,-1)),Cn=Me(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-swap2"})],-1)),yn=Me(()=>n("img",{src:Ke,alt:""},null,-1)),Sn={class:"available-all"},Tn={class:"available"},kn={key:0},In={key:1};function $n(e,t,s,a,k,S){const m=Re("WcountDown"),b=pe;return c(),w("div",_n,[n("div",wn,[n("p",null,[n("span",null,[bn,L(" "+T(("addCommom"in e?e.addCommom:Ee(x))(a.prettyAmount(s.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),Cn,n("span",null,[yn,L(" "+T(("addCommom"in e?e.addCommom:Ee(x))(a.prettyAmount(s.vItem.cetus_amount,9),9))+" CETUS ",1)])]),n("div",Sn,[n("div",Tn,[n("span",null,T(a.claimBoolean?"Available":"Available in"),1),a.claimBoolean?Y("",!0):(c(),O(m,{key:0,"start-time":s.vItem.locked_start_time,"end-time":s.vItem.locked_until_time,onCountDown:t[0]||(t[0]=I=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),n("div",{class:ge(a.claimBoolean?"highlight right-h5":"right-h5")},[a.claimBoolean?(c(),w("span",kn,"Claim")):(c(),w("span",In,"Cancel"))],2)])]),a.claimBoolean?(c(),O(b,{key:0,disabled:!a.claimBoolean||s.loading,loading:s.loading,onClick:t[1]||(t[1]=I=>a.claimWhale(s.vItem))},{default:z(()=>[L(T(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(c(),O(b,{key:1,type:"text",class:"right",disabled:s.loading,loading:s.loading,onClick:t[2]||(t[2]=I=>a.cancelRedeemPayload(s.vItem))},{default:z(()=>[L(T(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const Bn=te(pn,[["render",$n],["__scopeId","data-v-6f4aa7a5"]]),An=De({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,t){const{t:s,locale:a}=fe(),k=_e(),S=i(()=>k),m=ht(ft,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),b=he(),I=i(()=>b),h=Le(),g=i(()=>h),u=St(v=>{t.emit("onInput",v),t.emit("onInputLoading",!1)},500),r=_(""),f=v=>{const ne=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$"),F=v.target.value.replace(/,/g,"").replace(ne,"$1");t.emit("onInputLoading",!0),u(F)},o=v=>{var K;const D=v.target.selectionStart,ne=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(C==null?void 0:C.value)&&(C==null?void 0:C.value)}})?).*$`);console.log("🚀 ~ file: assets-card.vue:287 ~ handleInput ~ event.target.value:",v.target.value);let F=v.target.value.replace(/,/g,"").replace(ne,"$1");console.log("🚀 ~ file: assets-card.vue:287 ~ handleInput ~ value:",F);let Q=F.includes(".")&&String(x(F))==="0"?F:String(x(F));const q=He(v.target.value),Z=He(Q),G=Z.length-q.length;let H=D+G;if((K=v==null?void 0:v.inputType)!=null&&K.includes("delete")&&G>0&&D===Z[Z.length-1]){const B=v.target.value.slice(0,D-1)+v.target.value.slice(D);Q=String(x(B.replace(/,/g,""))),H=H-2}console.log("🚀 ~ file: assets-card.vue:287 ~ handleInput ~ fValue:",Q),r.value=Q,setTimeout(()=>{v.target.setSelectionRange(H<0?0:H,H<0?0:H)},0)};W(()=>e.inputValue,v=>{console.log("🚀 ~ file: assets-card.vue:287 ~ setup ~ newValue:",v);const D=v.includes(".")?v:String(x(v));console.log("🚀 ~ file: assets-card.vue:287 ~ setup ~ fValue:",D),D!==r.value&&(r.value=D)},{immediate:!0}),W(()=>e.inputValue,v=>{console.log("🚀 ~ file: assets-card.vue:287 ~ setup ~ newValue:",v);const D=v.includes(".")&&String(x(v))==="0"?v:String(x(v));console.log("🚀 ~ file: assets-card.vue:287 ~ setup ~ fValue:",D),D!==r.value&&(r.value=D)},{immediate:!0});const C=i(()=>{var v;return g.value.tokensObj&&e.address&&g.value.tokensObj[e.address]&&((v=g.value.tokensObj[e.address])==null?void 0:v.decimals)});let P=_({});return W(()=>g.value.RATES,v=>{v&&(P.value=v)},{immediate:!0}),{pool:g,t:s,addCommom:x,store:S,wallet:I,indicator:m,inputChange:f,importIcon:se,coinDecimals:C,handleInput:o,formattedValue:r}}});const xn=e=>(ue("data-v-7bb30d80"),e=e(),re(),e),Nn={class:"card"},Rn={class:"top"},En={class:"left"},Pn={class:"loading-token"},Dn={key:0,src:Ke,alt:""},Ln={key:1,src:ze,alt:""},Un={class:"bottom"},Wn=xn(()=>n("div",null,null,-1)),Mn={class:"top"},Vn={class:"right"},On={key:0,class:"balance"},Fn={key:2,class:"balance"};function Hn(e,t,s,a,k,S){var h,g;const m=pt,b=Ge,I=pe;return c(),w("div",Nn,[n("div",Rn,[V(m,{value:e.formattedValue,placeholder:"0.0",onChange:e.inputChange,onInput:e.handleInput,onFocus:t[0]||(t[0]=u=>e.$emit("onFocus"))},null,8,["value","onChange","onInput"]),n("div",En,[n("div",Pn,[e.coinSymbol=="CETUS"?(c(),w("img",Dn)):(c(),w("img",Ln)),n("div",null,[n("p",null,T(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),n("div",Un,[Wn,n("div",Mn,[n("div",Vn,[n("span",null,T(e.$t("common.balance")),1),e.balance!=="--"?(c(),w("span",On,T(e.balance>1?("addCommom"in e?e.addCommom:Ee(x))(e.balance):e.balance),1)):e.balance=="--"&&e.wallet&&e.wallet.address?(c(),O(b,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})):(c(),w("span",Fn,"--")),e.whaleDirection=="From"?(c(),O(I,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((h=e.wallet)!=null&&h.address),onClick:t[1]||(t[1]=u=>e.$emit("halfBalanne"))},{default:z(()=>[L(T("Half"))]),_:1},8,["disabled"])):Y("",!0),e.whaleDirection=="From"?(c(),O(I,{key:4,class:"max-btn",disabled:!e.balance||e.balance==0||!((g=e.wallet)!=null&&g.address),onClick:t[2]||(t[2]=u=>e.$emit("maxBalanne"))},{default:z(()=>[L(T(e.$t("button.max")),1)]),_:1},8,["disabled"])):Y("",!0)])])])])}const Xn=te(An,[["render",Hn],["__scopeId","data-v-7bb30d80"]]);const jn=De({components:{Modal:_t,CheckBox:Tt},setup(e,t){const s=_e(),a=_(!1);i(()=>s);const k=he(),S=i(()=>k);return{store:s,isSelect:a,clickConvert:()=>{a.value&&localStorage.setItem(`notRemind${S.value.address}`,!0),t.emit("clickConvert")}}}}),Ve=e=>(ue("data-v-0e35feda"),e=e(),re(),e),Yn=Ve(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),qn=[Yn],Gn={class:"token-waring-conetnt"},zn=Ve(()=>n("div",{class:"tips-text"},[L(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),n("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),Kn={class:"read-text"},Jn=Ve(()=>n("span",null," Do not remind again. ",-1));function Qn(e,t,s,a,k,S){const m=Re("CheckBox"),b=pe,I=Re("Modal");return c(),O(I,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:t[3]||(t[3]=h=>e.$emit("close"))},{closeIcon:z(()=>[(c(),w("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:t[0]||(t[0]=h=>e.$emit("close"))},qn))]),default:z(()=>[n("div",Gn,[zn,n("div",Kn,[V(m,{checked:e.isSelect,onClickCheckBox:t[1]||(t[1]=h=>e.isSelect=!e.isSelect)},null,8,["checked"]),Jn]),V(b,{class:"big-btn continue",onClick:t[2]||(t[2]=()=>e.clickConvert())},{default:z(()=>[L("Convert")]),_:1})])]),_:1})}const Zn=te(jn,[["render",Qn],["__scopeId","data-v-0e35feda"]]),ea=De({setup(){const e=Pe(),t=i(()=>e),s=i(()=>t.value.venft_id),a=i(()=>t.value.venftInfo),k=Le(),S=i(()=>k),m=_e(),b=i(()=>m),I=kt();i(()=>S.value.tokensObj&&S.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const h=_("");let g=_(!1);const u=_(""),r=_(""),f=_(!1),o=_("convert"),{t:C}=fe(),P=_([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),v=_([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),D=_([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),ne=_([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),F=window.setInterval(()=>{e.getXcetusApr(),$.value.address&&(e.getMyShare($.value.address),e.getVeNFTDividendInfo())},6e4),Q=window.setInterval(async()=>{await e.getAccountWhaleBalance($.value.address)},1e4);wt(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getDividendManager()}),bt(()=>{window.clearInterval(F),window.clearInterval(Q),document.removeEventListener("visibilitychange",()=>{console.log("removeEventListener visibilitychange")})}),W(()=>b.value.theme,(l,d)=>{l!=="sui"&&I.selectSuiTheme(),d&&l!==d&&k.setChainPoolConfigList([])},{immediate:!0});const q=i(()=>(console.log(t.value.whaleBalance,"==>xcetus.value.whaleBalance"),t.value.whaleBalance)),Z=i(()=>t.value.xWhaleBalance),G=i(()=>t.value.availableXwhale),H=i(()=>t.value.redeemingXwhale),K=i(()=>{if(o.value=="convert"){if(Number(u.value)>Number(q.value))return!0}else if(Number(u.value)>Number(G.value))return!0;return!u.value||!r.value||Number(u.value)==0||Number(r.value)==0}),B=_("180"),ae=i(()=>(console.log(o.value=="convert","===>1212211"),o.value=="convert"&&Number(u.value)>Number(q.value)?C("button.insufficientBalance",{name:"CETUS"}):o.value!=="convert"&&Number(u.value)>Number(G.value)?C("button.insufficientBalance",{name:"xCETUS"}):Number(B.value)<15?"Minimum vesting duration is 15 days":o.value=="convert"&&s?"Convert":o.value!=="convert"&&s?"Redeem":"Convert"));console.log(ae.value,"btnText.value===>");const Ie=l=>{u.value="",r.value="",o.value=l},oe=()=>{g.value=!0,setTimeout(()=>{g.value=!1},300)},$e=l=>{B.value=l},A=_(!1),ee=We("Sui"),be=he(),$=i(()=>be),Ce=i(()=>t.value.ownerLocks);W(()=>$.value.address,l=>{l?(e.getOwnerVeNFT(l),e.getAccountWhaleBalance(l),e.getMyShare(l),e.getAccountWhaleBalance(l)):e.loginOut()},{immediate:!0});const E=i(()=>b.value.chainName?Ue(b.value.chainName):{}),y=i(()=>b.value.chainName),{setIsShowSuccess:M,setIsShowRejected:N,setIsShowWaiting:R,setTransactionDesc:ce,setTransactionTxid:X}=m,me=async()=>{A.value=!0,R(!0),X(""),ce(C("tips.converting",{from:`${x(u.value,9)} CETUS`,and:"to",to:`${x(u.value,9)} xCETUS`}));try{let l;const d=ye(u.value,9);console.log(s.value,"===>venft_id.value");const p=await ee.depositCetus(d,s.value);console.log(p,"payload==>");const J=await E.value.signAndExecuteTransactionBlock($.value.currentWallet,p.txb,p.payloadParams);if(l=E.value.handleTx(J),l&&l.hash){X(l.hash),R(!1),M(!0);const U={title:"Converted",desc:`Converted ${x(u.value,9)} xCETUS successfully`,hash:l.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${u.value}`,logoa:se("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${u.value}`,logob:se("/sui-image/xWHALE-icon.png")}};y.value!=="Aptos"&&(U.res=l.res),E.value.showTransitionPending(U);const j=await E.value.watchTransaction(U);console.log("0221###swap###transitionStatus####",j),j&&setTimeout(()=>{e.getAccountWhaleBalance($.value.address),e.getOwnerVeNFT($.value.address),e.getMyShare($.value.address)},3e3),A.value=!1}else R(!1),N(!0),A.value=!1;u.value=""}catch(l){R(!1),N(!0),A.value=!1,u.value="",console.log(l,"error===>")}},ve=_(!0),Be=_("0"),Je=async()=>{const l=ye(u.value,9),d=await ee.redeemNum(l,Number(B.value));r.value=le(d.amountOut,9),console.log("===>amount2222"),Be.value=d.percent},Qe=async()=>{const l=ye(r.value,9),d=await ee.reverseRedeemNum(l,Number(B.value));console.log(d,"===>amount111"),u.value=le(d.amountOut,9),Be.value=d.percent};W(()=>[u.value,B.value,ve.value],([l,d,p])=>{console.log(l,"===>>>>>>>fromCoinAmount",typeof l),l&&d&&p&&Number(d)>=15&&Je(),!l&&p&&(r.value="")},{immediate:!0}),W(()=>[r.value,B.value,ve.value],([l,d,p])=>{l&&d&&!p&&Number(d)>=15&&(Qe(),console.log(l,"===>toCoinAmount")),!l&&!p&&(u.value="")},{immediate:!0}),W(()=>[B.value,ve.value],([l,d])=>{Number(l)>180?B.value="180":Number(l)<15?d?r.value="":u.value="":l||(d?u.value="":r.value="")},{immediate:!0});const Ze=()=>{ve.value=!0,u.value=Se(new Xe(o.value!=="convert"?G.value:q.value).div(new Xe(2)).toString(),9)},et=()=>{ve.value=!0,u.value=o.value!=="convert"?Se(G.value,9):Se(q.value,9)},Oe=async()=>{A.value=!0,R(!0),X(""),ce(C("tips.redeeming",{from:`${x(u.value,9)} xCETUS`,to:`${x(r.value,9)} CETUS`}));try{let l;const d=ye(u.value,9);console.log(d.toString(),"538====>");const p=await ee.getRedeemLockPayload(d,s.value,Number(B.value));console.log(p,"payload==>");const J=await E.value.signAndExecuteTransactionBlock($.value.currentWallet,p.txb,p.payloadParams);if(l=E.value.handleTx(J),l&&l.hash){X(l.hash),R(!1),M(!0);const U={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:l.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${u.value}`,logoa:se("/sui-image/xWHALE-icon.png")}};y.value!=="Aptos"&&(U.res=l.res),E.value.showTransitionPending(U);const j=await E.value.watchTransaction(U);console.log("0221###swap###transitionStatus####",j),j&&setTimeout(()=>{e.getAccountWhaleBalance($.value.address),e.getOwnerVeNFT($.value.address),e.getMyShare($.value.address)},3e3),A.value=!1}else R(!1),N(!0),A.value=!1;u.value="",r.value=""}catch(l){R(!1),N(!0),A.value=!1,u.value="",r.value="",console.log(l,"error===>")}};W(()=>[s.value,Ce.value,a.value,$.value.address],([l,d,p,J])=>{J&&(l&&e.getVeNFTDividendInfo(),l&&!ie(p)&&e.getAvailableXCetus())},{immediate:!0,deep:!0});const tt=async l=>{A.value=!0,R(!0),X(""),ce("");try{let d;console.log(l.id,"==>vItem.id");const p=await ee.getCancelRedeemPayload(l.id,s.value);console.log(p,"payload==>");const J=await E.value.signAndExecuteTransactionBlock($.value.currentWallet,p==null?void 0:p.txb,p==null?void 0:p.payloadParams);if(d=E.value.handleTx(J),d&&d.hash){X(d.hash),R(!1),M(!0);const U={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:d.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${le(l.xcetus_amount,9)}`,logoa:se("/sui-image/xWHALE-icon.png")}};y.value!=="Aptos"&&(U.res=d.res),E.value.showTransitionPending(U);const j=await E.value.watchTransaction(U);console.log("0221###swap###transitionStatus####",j),j&&setTimeout(()=>{e.getOwnerVeNFT($.value.address),A.value=!1},3e3)}else R(!1),N(!0),A.value=!1;u.value="",r.value=""}catch(d){R(!1),N(!0),A.value=!1,u.value="",r.value="",e.setClaimLoading(""),console.log(d,"error===>")}},nt=_({}),at=()=>{e.getOwnerLockCetuss($.value.address)},ot=async l=>{console.log(l,"vItem===>"),A.value=!0,R(!0),X(""),ce(`${C("tips.claimingPendingYield")} ${x(le(l.cetus_amount,9),9)} CETUS`);try{let d;const p=await ee.getRedeemPayload(l.id,s.value);console.log(p,"payload==>");const J=await E.value.signAndExecuteTransactionBlock($.value.currentWallet,p==null?void 0:p.txb,p==null?void 0:p.payloadParams);if(d=E.value.handleTx(J),d&&d.hash){X(d.hash),R(!1),M(!0);const U={title:"Claimed",desc:`Claimed ${x(le(l.cetus_amount,9),9)} CETUS successfully.`,hash:d.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${le(l.cetus_amount,9)}`,logoa:se("/sui-image/WHALE-icon.png")}};y.value!=="Aptos"&&(U.res=d.res),E.value.showTransitionPending(U);const j=await E.value.watchTransaction(U);console.log("0221###swap###transitionStatus####",j),j&&setTimeout(()=>{e.getAccountWhaleBalance($.value.address),e.getOwnerVeNFT($.value.address),e.getMyShare($.value.address),e.getAvailableXCetus(),A.value=!1},3e3)}else R(!1),N(!0),A.value=!1;u.value="",r.value=""}catch(d){R(!1),N(!0),A.value=!1,u.value="",r.value="",e.setClaimLoading(""),console.log(d,"error===>")}},Ae=_(!1),lt=()=>{!localStorage.getItem(`notRemind${$.value.address}`)&&ae.value=="Convert"?Ae.value=!0:ae.value=="Redeem"?Oe():me()},st=()=>{Ae.value=!1,me()};i(()=>t.value.pendingCoinInfo);const it=i(()=>t.value.pendingAmount),ut=()=>{Number(B.value)<15&&(B.value="15")},rt=()=>{B.value&&(B.value=B.value.replace(/[^\d]/g,""),B.value.charAt(0)==="0"&&(B.value=B.value.slice(1)))},dt=()=>{e.getDividendManager()},ct=i(()=>S.value.tokensObj||{}),mt=i(()=>S.value.RATES||{}),vt=i(()=>t.value.dividendManagerInfo||{});return W(()=>[ct.value,mt.value,vt.value],([l,d,p])=>{!ie(l)&&!ie(d)&&!ie(p)&&e.getXcetusApr()},{immediate:!0}),{clickModalConvert:st,openConfirmModal:Ae,validateInput:rt,countDown:at,value:h,change:g,clickExchange:oe,fromCoinAmount:u,toCoinAmount:r,showCoinSelect:f,headSwitchValue:o,headSwitchChange:Ie,vestingDateList:P,vestingParameter:B,vestingTab:$e,holderList:v,lockupList:D,leaderboardList:ne,whaleBalance:q,depositCetus:me,btnText:ae,loading:A,redeemRatio:Be,halfBalanne:Ze,maxBalanne:et,xWhaleBalance:Z,availableXwhale:G,redeemingXwhale:H,withdrawWhale:Oe,ownerLocks:Ce,cancelRedeemPayload:tt,holderInfo:nt,btnDisabled:K,fixedFromCoin:ve,walletStore:be,claimWhale:ot,wallet:$,depositOrWithdraw:lt,pendingAmount:it,inputBlur:ut,getNextEpoch:dt}}});const de=e=>(ue("data-v-bffb5611"),e=e(),re(),e),ta={class:"dashboard-all"},na={class:"dashboard-content"},aa={class:"content-left"},oa={key:0,class:"vesting"},la=de(()=>n("p",null,"Vesting",-1)),sa={class:"content-right"},ia={key:0,class:"card-container"},ua={class:"card-item"},ra={class:"card-item"},da={class:"exchange"},ca=de(()=>n("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),ma=[ca],va={key:1,class:"card-redeem"},ga={class:"card-item"},ha={class:"vesting-duration"},fa={class:"vesting-title"},pa=de(()=>n("p",null,"Vesting duration",-1)),_a={class:"vesting-left h5-vesting-left"},wa={class:"value-days"},ba=de(()=>n("span",null,"days",-1)),Ca={class:"vesting-content"},ya={class:"vesting-left pc-vesting-left"},Sa={class:"value-days"},Ta=de(()=>n("span",null,"days",-1)),ka={class:"vesting-right"},Ia=["onClick"],$a={class:"card-item"},Ba={class:"redeem-ratio"},Aa=de(()=>n("span",null,"Redeem ratio",-1)),xa={class:"exchange"},Na=de(()=>n("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Ra=[Na];function Ea(e,t,s,a,k,S){const m=gt,b=un,I=Bn,h=yt,g=Xn,u=Ct,r=pe,f=Zn;return c(),w("div",ta,[V(m,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),n("div",na,[n("div",aa,[V(b,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(c(),w("div",oa,[la,(c(!0),w(xe,null,Ne(e.ownerLocks,o=>(c(),O(I,{key:o,"v-item":o,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):Y("",!0)]),n("div",sa,[V(h,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:t[0]||(t[0]=o=>{e.headSwitchChange(o)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(c(),w("div",ia,[n("div",ua,[V(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[2]||(t[2]=o=>{e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",ra,[V(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:t[4]||(t[4]=o=>{e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance"])]),n("img",{class:ge(e.change?"gang animationex":"gang"),src:je,alt:""},null,2),n("div",da,[(c(),w("svg",{class:ge(e.change?"icon animationex":"icon"),"aria-hidden":"true"},ma,2))])])):(c(),w("div",va,[n("div",ga,[V(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[6]||(t[6]=o=>{e.fixedFromCoin=!0,e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",ha,[n("div",fa,[pa,n("div",_a,[n("div",wa,[Te(n("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>e.vestingParameter=o),onInput:t[8]||(t[8]=(...o)=>e.validateInput&&e.validateInput(...o)),onBlur:t[9]||(t[9]=(...o)=>e.inputBlur&&e.inputBlur(...o))},null,544),[[Fe,e.vestingParameter]])]),ba])]),n("div",Ca,[n("div",ya,[n("div",Sa,[Te(n("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>e.vestingParameter=o),onInput:t[11]||(t[11]=(...o)=>e.validateInput&&e.validateInput(...o)),onBlur:t[12]||(t[12]=(...o)=>e.inputBlur&&e.inputBlur(...o))},null,544),[[Fe,e.vestingParameter]])]),Ta]),n("div",ka,[(c(!0),w(xe,null,Ne(e.vestingDateList,o=>(c(),w("div",{key:o.time,class:ge(["box-table",{"box-table-active":o.num===Number(e.vestingParameter)}]),onClick:C=>e.vestingTab(o.num)},T(o.time),11,Ia))),128))])]),V(u,{value:e.vestingParameter,"onUpdate:value":t[13]||(t[13]=o=>e.vestingParameter=o),max:180,min:15},null,8,["value"])]),n("div",$a,[V(g,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[14]||(t[14]=o=>e.toCoinAmount=o),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:t[15]||(t[15]=o=>{e.fixedFromCoin=!1,e.toCoinAmount=o})},null,8,["modelValue","input-value","balance"])]),n("div",Ba,[Aa,n("p",null,T(e.redeemRatio)+"%",1)]),n("img",{class:ge(e.change?"gang animationex":"gang"),src:je,alt:""},null,2),n("div",xa,[(c(),w("svg",{class:ge(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Ra,2))])])),e.wallet&&e.wallet.address?(c(),O(r,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:z(()=>[n("span",null,T(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(c(),O(r,{key:3,class:"big-btn",onClick:t[16]||(t[16]=o=>e.walletStore.setIsShowWalletModal(!0))},{default:z(()=>[n("span",null,T(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(c(),O(f,{key:0,onClickConvert:e.clickModalConvert,onClose:t[17]||(t[17]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):Y("",!0)])}const eo=te(ea,[["render",Ea],["__scopeId","data-v-bffb5611"]]);export{eo as default};
