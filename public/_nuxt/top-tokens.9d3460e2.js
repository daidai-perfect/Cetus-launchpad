import{_ as he}from"./back.12f85f43.js";import{_ as be}from"./upgrade-loading.7fc4ec39.js";import{i as U}from"./import-icon.de3e6c66.js";import{u as ke,a as k,d as W,L as _e,c as A,k as F,p as Q,q as X}from"./pool.a41eef8c.js";import{a as ge,y as we,l as S,b as Ce,r as T,H as Oe,q as Y,e as Te,s as ye,o as u,f as c,h as o,v as t,i as E,j as N,z as D,A as C,F as q,E as M,x as P,a3 as je,t as Z,u as p,w as x,p as fe,k as Ne,B as $e}from"./entry.ca8aaecf.js";/* empty css              */import{u as Ae}from"./sha256.840517cc.js";import{p as Se}from"./precision.a7a6c57b.js";const Le=ge({props:{isAll:{type:Boolean,default:!1}},setup(){const e=ke(),{t:h,locale:ee}=we(),i=S(()=>e),G=S(()=>(console.log(i.value.allTokenObj,"===>pools.value.allTokenObj"),i.value.allTokenObj||{})),J=S(()=>(console.log(i.value.tokensObj,"===>pools.value.tokensObj"),i.value.tokensObj||{})),I=Ae(),g=S(()=>I),V=Ce(),L=T(1),y=T("vol"),s=T("desc");let O=T(!1);Oe(()=>{const n=document.body.clientWidth;n<750?O.value=!1:O.value=!0,window.onresize=()=>{n<750?O.value=!1:O.value=!0}});const se=T(!1),oe=S(()=>g.value.chainName),ne=T(!1),re=T("Volume (24H)"),le=T(["Price","TVL","Volume (24H)","Price Change"]);let z=T(null);const H=S(()=>{const n=g.value.topTokensList,l=[];for(let r=0;r<n.length;r++){const a=n[r];l.push({...a,priceHour:a?Number(a.price_rate_24h.substring(0,a.price_rate_24h.length-1)):"0",address:a.symbol=="SUI"?"0x2::sui::SUI":a.address})}return Array.from(l).sort((r,a)=>Number(a.vol_in_usd_24h)-Number(r.vol_in_usd_24h))}),K=n=>{const l=Array.from(H.value).sort((r,a)=>{if(n==y.value)if(s.value=="desc"){if(n=="price")return Number(a.price)-Number(r.price);if(n=="priceChange")return Number(a.priceHour)-Number(r.priceHour);if(n=="vol")return Number(a.vol_in_usd_24h)-Number(r.vol_in_usd_24h);if(n=="tvl")return Number(a.tvl_in_usd)-Number(r.tvl_in_usd)}else{if(n=="tvl")return Number(r.tvl_in_usd)-Number(a.tvl_in_usd);if(n=="vol")return Number(r.vol_in_usd_24h)-Number(a.vol_in_usd_24h);if(n=="price")return Number(r.price)-Number(a.price);if(n=="priceChange")return Number(r.priceHour)-Number(a.priceHour)}else{if(n=="tvl")return Number(r.tvl_in_usd)-Number(a.tvl_in_usd);if(n=="vol")return Number(r.vol_in_usd_24h)-Number(a.vol_in_usd_24h);if(n=="price")return Number(r.price)-Number(a.price);if(n=="priceChange")return Number(r.priceHour)-Number(a.priceHour)}});if(console.log(l,"resultresultresult0919919"),l.length<10)z.value=l.slice(0,10);else{const r=L.value*10;z.value=l.slice(r-10,r)}},ae=n=>{console.log(n,y.value,s.value," currentSortOrder.value"),n==y.value?s.value=s.value=="desc"?"asc":"desc":(y.value=n,s.value="desc"),K(n)},R=(n,l)=>{console.log(n,H.value,"page1"),L.value=n,H.value&&H.value.length>0&&K(y.value)};Y(H,n=>{O.value,R(L.value)},{immediate:!0});const de=n=>{var l,r,a,j,v,d;if(g.value.theme=="sui"){const m=n.needReverse?((r=i.value.tokensObj[n.token_b_address])==null?void 0:r.labels)||[]:((l=i.value.tokensObj[n.token_a_address])==null?void 0:l.labels)||[],w=n.needReverse?((a=i.value.tokensObj[n.token_a_address])==null?void 0:a.labels)||[]:((j=i.value.tokensObj[n.token_b_address])==null?void 0:j.labels)||[],_=m.concat(w);return[...new Set(_)]}else{const m=((v=i.value.tokensObj[n.token_a_address])==null?void 0:v.labels)||[],w=((d=i.value.tokensObj[n.token_b_address])==null?void 0:d.labels)||[],_=m.concat(w);return[...new Set(_)]}},te=n=>{if(!A(n)&&!A(i.value.addressLpTokens)&&!A(i.value.tokensObj)){const l=n.swap_account,r=i.value.addressLpTokens[l];let a=(r==null?void 0:r.rewarder_infos)||[];const j=[];for(let d=0;d<a.length;d++){const m=a[d];console.log("0418####item####",n),console.log("0418####ele####",m),i.value.tokensObj[m==null?void 0:m.coinAddress]&&(console.log("0418####item####pools.value.tokensObj[item.coinAddress]####",i.value.tokensObj[m==null?void 0:m.coinAddress]),j.push({...m,symbol:i.value.tokensObj[m.coinAddress].symbol,rewarderApr:n.rewarder_apr[d],logoUrl:i.value.tokensObj[m.coinAddress].logoURI,rewarder_display:r[`rewarder_display${d+1}`]}))}let v=[];return v=j.filter(d=>d.rewarder_display),console.log("0419###stats###rewardList###",v),v}},ie=(n,l)=>n&&l?Se.plus(F(n),F(l)):n>0&&n<.01?"<0.01":0,ue=n=>{let l=0;return n&&n.forEach(r=>{console.log(r,"===>ele"),r.rewarder_display&&(l+=F(String(r.rewarders)))}),String(l)},ce=()=>{V&&V.push("/stats-tokens")},B=T({});Y(()=>[i.value.poolConfigObj,i.value.tokensObj,g.value.topPoolsList,g.value.chainName,i.value.addressLpTokens],([n,l,r,a,j])=>{a=="Sui"?n&&!A(n)&&r&&r.length>0&&l&&!A(l)&&(r.forEach(v=>{var w;const d=n[v.swap_account],m=(w=d==null?void 0:d.rewarderInfo)==null?void 0:w.map((_,b)=>{const f=l[_.coinAddress];return{..._,emissionsEveryDay:Q(_.emissionsEveryDay,f==null?void 0:f.decimals),rewarder_display:d[`rewarder_display${b+1}`],rewarders:v.rewarder_apr[b]&&v.rewarder_apr[b].replace("%",""),logoUrl:f==null?void 0:f.logo_url,symbol:f==null?void 0:f.symbol,rewarderApr:v.rewarder_apr[b]&&v.rewarder_apr[b].replace("%","")}});console.log(d,"poolInfo===>"),d!=null&&d.is_display_rewarder&&(B.value={...B.value,[v.swap_account]:m})}),console.log(B.value,"rewardObj.value")):n&&!A(n)&&r&&r.length>0&&l&&!A(l)&&j&&!A(j)&&r.forEach(v=>{const d=j[v.swap_account];if(console.log(d,"===>poolInfo"),d){const m=d.rewarder_infos.map((w,_)=>{console.log(w,"===>reward");const b=l[w.coinAddress];return{...w,emissionsEveryDay:Q(w.emissionsEveryDay,b==null?void 0:b.decimals),rewarder_display:d[`rewarder_display${_+1}`],rewarders:X(v.rewarder_apr[_]&&v.rewarder_apr[_].replace("%",""),2),logoUrl:b==null?void 0:b.logo_url,symbol:b==null?void 0:b.symbol,rewarderApr:X(v.rewarder_apr[_]&&v.rewarder_apr[_].replace("%",""),2)}});console.log(d,"poolInfo===>"),d!=null&&d.is_display_rewarder&&(B.value={...B.value,[v.swap_account]:m})}})},{immediate:!0,deep:!0});const pe=n=>{var l;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((l=i.value.tokensObj[n==null?void 0:n.address])==null?void 0:l.logo_url)||(g.value.theme==="default"?U("/image/coins/unknown.png"):U("/image/coins/sui-unknown.png"))},ve=S(()=>g.value.theme),me=S(()=>i.value.tokensWarningObj);return{currentSortColumn:y,currentSortOrder:s,sortTable:ae,tokensWarningObj:me,theme:ve,getCoinIcon:pe,addCommom:k,store:g,importIcon:U,addressTokens:G,onChangeTokens:R,currentTokens:L,currentTopTokensList:z,topTokensList:H,router:V,isPc:O,getAprTotal:ie,getRewarderApr:ue,toTokensList:ce,labelToken:ne,select:se,tokenValue:re,tokensList:le,getLabel:de,rewardApr:te,tokensObj:J,rewardObj:B,t:h,decimalUi:W,chainName:oe,formatNumberAddCommom:_e}}});const $=e=>(fe("data-v-a3cd90a4"),e=e(),Ne(),e),Ue={key:0,class:"title"},Ve={key:1,class:"title view-all-title"},He={class:"sort-by"},Be=$(()=>o("use",{"xlink:href":"#icon-icon_on-pool"},null,-1)),Ee=[Be],De=$(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Pe=[De],We={key:0,class:"select-item"},Ie=["onClick"],ze=$(()=>o("svg",{"aria-hidden":"true",class:"pools-icon"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Re={class:"table-contianer"},Fe={class:"pools-table"},qe={class:"table-header"},Me=$(()=>o("th",null,"Tokens",-1)),Ge=$(()=>o("use",{"xlink:href":"#icon-icon_on-pool"},null,-1)),Je=[Ge],Ke=$(()=>o("use",{"xlink:href":"#icon-icon_on-pool"},null,-1)),Qe=[Ke],Xe=$(()=>o("use",{"xlink:href":"#icon-icon_on-pool"},null,-1)),Ye=[Xe],Ze=$(()=>o("use",{"xlink:href":"#icon-icon_on-pool"},null,-1)),xe=[Ze],es=$(()=>o("th",null,null,-1)),ss={class:"table-body"},os={key:0},ns={colspan:"6"},rs={class:"upgrade-loading"},ls={class:"token"},as={class:"left"},ds=["onerror"],ts={key:0,class:"pool-warning"},is={class:"right"},us={class:"name"},cs={key:0,class:"label-all"},ps={class:"price onlyPrice"},vs={class:"price"},ms={class:"volume"},hs={class:"tvl"},bs={class:"btn-box"},ks={class:"h5-item-container"},_s={key:0,class:"upgrade-loading"},gs={class:"top"},ws={class:"token"},Cs=["onerror"],Os={key:0,class:"pool-warning"},Ts={class:"right"},ys={class:"name"},js={key:0,class:"label-all"},fs={class:"middle"},Ns={class:"item-pools"},$s={class:"price"},As={class:"item-pools"},Ss={class:"item-pools"},Ls={class:"item-pools"},Us={class:"bottom"},Vs={class:"panation"};function Hs(e,h,ee,i,G,J){const I=he,g=be,V=$e,L=je,y=ye("image");return u(),c("div",{class:C(["top-tokens-table",e.isAll?"top-tokens-table-all":""])},[e.isAll?(u(),c("div",Ve,[E(I),N(" "+t(e.$t("common.tokens")),1)])):(u(),c("div",Ue,[o("div",null,t(e.$t("common.topTokens")),1),o("div",{class:"view-all",onClick:h[0]||(h[0]=(...s)=>e.toTokensList&&e.toTokensList(...s))},t(e.$t("newAdd.viewAll"))+"   > ",1)])),o("div",He,[o("div",null,t(e.$t("newAdd.sortBy")),1),o("div",{class:"search-select",onClick:h[1]||(h[1]=D(s=>e.labelToken=!e.labelToken,["stop"]))},[o("div",null,[N(t(e.tokenValue)+" ",1),(u(),c("svg",{"aria-hidden":"true",class:C(["pools-icon",e.currentSortOrder=="desc"?"desc-svg":"asc-svg"])},Ee,2))]),(u(),c("svg",{"aria-hidden":"true",class:C(e.labelToken?"show-icon icon":"icon")},Pe,2))]),e.labelToken?(u(),c("div",We,[(u(!0),c(q,null,M(e.tokensList,(s,O)=>(u(),c("div",{key:O,class:"select-menu-item",onClick:D(()=>{e.labelToken=!1,e.tokenValue=s,e.sortTable(s=="Price"?"price":s=="Volume (24H)"?"vol":s=="TVL"?"tvl":"priceChange")},["stop"])},[N(t(s)+" ",1),ze],8,Ie))),128))])):P("",!0)]),o("div",Re,[o("table",Fe,[o("thead",qe,[o("tr",null,[Me,o("th",null,[o("span",{onClick:h[2]||(h[2]=D(s=>e.sortTable("price"),["stop"]))},[N(" Price "),(u(),c("svg",{"aria-hidden":"true",class:C(["pools-icon",e.currentSortColumn=="price"?e.currentSortOrder=="desc"?"desc-svg active-svg":"asc-svg active-svg":""])},Je,2))])]),o("th",null,[o("span",{onClick:h[3]||(h[3]=D(s=>e.sortTable("priceChange"),["stop"]))},[N(" Price Change "),(u(),c("svg",{"aria-hidden":"true",class:C(["pools-icon",e.currentSortColumn=="priceChange"?e.currentSortOrder=="desc"?"desc-svg active-svg":"asc-svg active-svg":""])},Qe,2))])]),o("th",null,[o("span",{onClick:h[4]||(h[4]=D(s=>e.sortTable("vol"),["stop"]))},[N(" Volume (24H) "),(u(),c("svg",{"aria-hidden":"true",class:C(["pools-icon",e.currentSortColumn=="vol"?e.currentSortOrder=="desc"?"desc-svg active-svg":"asc-svg active-svg":""])},Ye,2))])]),o("th",null,[o("span",{class:"hover-box",onClick:h[5]||(h[5]=D(s=>e.sortTable("tvl"),["stop"]))},[N(" TVL "),(u(),c("svg",{"aria-hidden":"true",class:C(["pools-icon",e.currentSortColumn=="tvl"?e.currentSortOrder=="desc"?"desc-svg active-svg":"asc-svg active-svg":""])},xe,2))])]),es])]),o("tbody",ss,[e.currentTopTokensList?P("",!0):(u(),c("tr",os,[o("td",ns,[o("div",rs,[E(g,{loading:!0,type:"statsPools"})])])])),(u(!0),c(q,null,M(e.currentTopTokensList,s=>(u(),c("tr",{key:s.address},[o("td",null,[o("div",ls,[o("div",as,[o("div",null,[Z(o("img",{onerror:e.theme=="default"?("importIcon"in e?e.importIcon:p(U))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:p(U))("/image/coins/sui-unknown.png"),alt:""},null,8,ds),[[y,e.getCoinIcon(e.addressTokens&&e.addressTokens[s.address])]]),e.tokensWarningObj&&!e.tokensWarningObj[s.address]?(u(),c("div",ts)):P("",!0)])]),o("div",is,[o("div",us,[o("p",null,t(s.symbol),1),o("span",null,t(s.name),1)]),e.tokensObj&&e.tokensObj[s.address]&&e.tokensObj[s.address].labels&&e.tokensObj[s.address].labels[0]?(u(),c("div",cs,[o("div",{class:C(["label",e.tokensObj&&e.tokensObj[s.address]&&e.tokensObj[s.address].labels&&e.tokensObj[s.address].labels[0]])},[o("span",null,t(e.tokensObj&&e.tokensObj[s.address]&&e.tokensObj[s.address].labels&&e.tokensObj[s.address].labels[0]?`${e.tokensObj[s.address].labels[0]}`:""),1)],2)])):P("",!0)])])]),o("td",null,[o("div",ps,[o("p",null,t(s.price?"$"+(Number(s.price)>1?("addCommom"in e?e.addCommom:p(k))(("decimalUi"in e?e.decimalUi:p(W))(s.price,2)):("addCommom"in e?e.addCommom:p(k))(("decimalUi"in e?e.decimalUi:p(W))(s.price,4))):"--"),1)])]),o("td",null,[o("div",vs,[o("p",{class:C(s.price_rate_24h.includes("-")?"redecue-change-price":"add-change-price")},t(s.price_rate_24h!=="0%"&&!s.price_rate_24h.includes("-")?`+${s.price_rate_24h}`:s.price_rate_24h),3)])]),o("td",null,[o("div",ms," $"+t(("addCommom"in e?e.addCommom:p(k))(s.vol_in_usd_24h,2)=="0.00"?0:("addCommom"in e?e.addCommom:p(k))(s.vol_in_usd_24h,2)?("addCommom"in e?e.addCommom:p(k))(s.vol_in_usd_24h,2):"--"),1)]),o("td",null,[o("div",hs," $"+t(("addCommom"in e?e.addCommom:p(k))(s.tvl_in_usd,2)=="0.00"?0:("addCommom"in e?e.addCommom:p(k))(s.tvl_in_usd,2)?("addCommom"in e?e.addCommom:p(k))(s.tvl_in_usd,2):"--"),1)]),o("td",null,[o("div",bs,[E(V,{class:"cancel-btn",onClick:O=>e.router.push(`/swap?to=${s.address}`)},{default:x(()=>[N(t(e.$t("button.swap")),1)]),_:2},1032,["onClick"])])])]))),128))])])]),o("div",ks,[e.currentTopTokensList?(u(!0),c(q,{key:1},M(e.currentTopTokensList,s=>(u(),c("div",{key:s.address,class:"item h5-item"},[o("div",gs,[o("div",ws,[o("div",null,[Z(o("img",{onerror:e.theme=="default"?("importIcon"in e?e.importIcon:p(U))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:p(U))("/image/coins/sui-unknown.png"),alt:""},null,8,Cs),[[y,e.getCoinIcon(e.addressTokens&&e.addressTokens[s.address])]]),e.tokensWarningObj&&!e.tokensWarningObj[s.address]?(u(),c("div",Os)):P("",!0)]),o("div",Ts,[o("div",ys,[o("p",null,t(e.addressTokens&&e.addressTokens[s.address]&&e.addressTokens[s.address].symbol),1),o("span",null,t(e.tokensObj&&e.tokensObj[s.address]&&e.tokensObj[s.address].name),1)]),e.tokensObj&&e.tokensObj[s.address]&&e.tokensObj[s.address].labels&&e.tokensObj[s.address].labels[0]?(u(),c("div",js,[o("div",{class:C(["label",e.tokensObj&&e.tokensObj[s.address]&&e.tokensObj[s.address].labels&&e.tokensObj[s.address].labels[0]])},[o("span",null,t(e.tokensObj&&e.tokensObj[s.address]&&e.tokensObj[s.address].labels&&e.tokensObj[s.address].labels[0]?`${e.tokensObj[s.address].labels[0]}`:""),1)],2)])):P("",!0)])])]),o("div",fs,[o("div",Ns,[o("span",null,t(e.$t("common.price")),1),o("div",$s,[o("p",null,t(s.price?"$"+(Number(s.price)>1?("addCommom"in e?e.addCommom:p(k))(("decimalUi"in e?e.decimalUi:p(W))(s.price,2)):("addCommom"in e?e.addCommom:p(k))(("decimalUi"in e?e.decimalUi:p(W))(s.price,4))):"--"),1)])]),o("div",As,[o("span",null,t(e.$t("newAdd.priceChange")),1),o("p",{class:C(s.price_rate_24h.includes("-")?"redecue-change-price":"add-change-price")},t(s.price_rate_24h),3)]),o("div",Ss,[o("span",null,t(e.$t("common.volume24h")),1),o("p",null," $"+t(("addCommom"in e?e.addCommom:p(k))(s.vol_in_usd_24h,2)=="0.00"?0:("addCommom"in e?e.addCommom:p(k))(s.vol_in_usd_24h,2)),1)]),o("div",Ls,[o("span",null,t(e.$t("common.tvl")),1),o("p",null," $"+t(("addCommom"in e?e.addCommom:p(k))(s.tvl_in_usd,2)=="0.00"?0:("addCommom"in e?e.addCommom:p(k))(s.tvl_in_usd,2)),1)])]),o("div",Us,[E(V,{class:"cancel-btn",onClick:O=>e.router.push(`/swap?to=${s.address}`)},{default:x(()=>[N(t(e.$t("button.swap")),1)]),_:2},1032,["onClick"])])]))),128)):(u(),c("div",_s,[E(g,{loading:!0,type:"statsPoolH5"})]))]),o("div",Vs,[E(L,{current:e.currentTokens,"onUpdate:current":h[6]||(h[6]=s=>e.currentTokens=s),"page-size":(e.isPc,10),simple:"",total:e.isAll?e.topTokensList.length:e.topTokensList.length>20?20:e.topTokensList.length,onChange:e.onChangeTokens},null,8,["current","page-size","total","onChange"])])],2)}const Fs=Te(Le,[["render",Hs],["__scopeId","data-v-a3cd90a4"]]);export{Fs as T};
