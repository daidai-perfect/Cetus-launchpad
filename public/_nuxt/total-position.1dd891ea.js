import{a as q,C as pe,o as i,f as n,F as J,E as Q,G as A,h as e,I as le,x as m,u as v,e as z,p as X,k as Z,m as w,r as p,A as Ce,c as E,w as O,i as k,y as be,j as H,D as ke,$ as he,Y as $e,K as Se,P as Pe,B as ie,N as Le,S as Ye}from"./entry.9ddfbff1.js";import"./index.944397c1.js";import{u as ae}from"./pool.6f07197c.js";import{s as re}from"./formatter.45894253.js";import{V as $,h as b,a as xe}from"./common.669f604e.js";import{_ as Ae}from"./coin-pair-name.154aa8b6.js";import{_ as Ue}from"./no-data.cee14bca.js";/* empty css              *//* empty css              *//* empty css              */import{u as De,c as Te,b as Ie}from"./index.5370856a.js";import{u as Re}from"./index.5794af6a.js";import{a as Fe,b as Oe,c as Ne,u as Be}from"./usePositionList.7d180b98.js";const je={key:0,class:"claim-list"},Ee={class:"left"},He={alt:""},qe={class:"right"},ze=q({__name:"claim-list",props:{myClaimList:{type:Object,default:()=>[]}},setup(s){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: claim-list.vue:25 ~ myClaimList:",s.myClaimList),(h,S)=>{const g=pe("image");return s.myClaimList&&s.myClaimList.length>0?(i(),n("div",je,[(i(!0),n(J,null,Q(s.myClaimList,l=>(i(),n("div",{key:l,class:"claim-item"},[e("div",Ee,[le(e("img",He,null,512),[[g,l.tokenInfo.logo_url]]),e("span",null,m(l.tokenInfo.symbol),1)]),e("div",qe,[e("span",null,m(v($)(l.amount,l.decimals,!0,!1,!1)),1),e("span",null,m(v($)(l.amountUSD,2,!1,!1)),1)])]))),128))])):A("",!0)}}});const ge=z(ze,[["__scopeId","data-v-ec8774e2"]]),ye=s=>(X("data-v-237b921c"),s=s(),Z(),s),Me={class:"fees-and-reward"},Ve={key:0,class:"fees"},We={class:"fees-title"},Ke=ye(()=>e("div",null,"Fees",-1)),Ge={alt:""},Je={class:"symbol"},Qe={class:"amount"},Xe={class:"amount-usd"},Ze={key:1,class:"fees"},es={class:"fees-title"},ss=ye(()=>e("div",null,"Mining rewards",-1)),ts={alt:""},os={class:"symbol"},ls={class:"amount"},is={class:"amount-usd"},as=q({__name:"fees-and-reward",props:{pendingRewarderList:{type:Object,default:()=>[]},pendingFeesList:{type:Object,default:()=>[]},rewarderUsd:{type:String,default:""},feeOwedUsd:{type:String,default:""}},setup(s){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: fees-and-reward.vue:63 ~ props:",s),(h,S)=>{const g=pe("image");return i(),n("div",Me,[s.feeOwedUsd&&s.feeOwedUsd>0?(i(),n("div",Ve,[e("div",We,[Ke,e("div",null,m(v($)(s.feeOwedUsd,2,!1,!1)),1)]),(i(!0),n(J,null,Q(s.pendingFeesList,l=>(i(),n("div",{key:l,class:"fees-details"},[e("div",null,[le(e("img",Ge,null,512),[[g,l.tokenInfo.logo_url]]),e("span",Je,m(l.tokenInfo.symbol),1)]),e("div",null,[e("span",Qe,m(v($)(l.amount,l.tokenInfo.decimals,!0,!1,!1)),1),e("span",Xe,"("+m(v($)(l.amountUSD,2,!1,!1))+")",1)])]))),128))])):A("",!0),s.rewarderUsd&&s.rewarderUsd>0?(i(),n("div",Ze,[e("div",es,[ss,e("div",null,m(v($)(s.rewarderUsd,2,!1,!1)),1)]),(i(!0),n(J,null,Q(s.pendingRewarderList,l=>(i(),n("div",{key:l,class:"fees-details"},[e("div",null,[le(e("img",ts,null,512),[[g,l.tokenInfo.logo_url]]),e("span",os,m(l.tokenInfo.symbol),1)]),e("div",null,[e("span",ls,m(v($)(l.amount,l.tokenInfo.decimals,!0,!1,!1)),1),e("span",is,"("+m(v($)(l.amountUSD,2,!1,!1))+")",1)])]))),128))])):A("",!0)])}}});const ns=z(as,[["__scopeId","data-v-237b921c"]]),T=s=>(X("data-v-e25d90e6"),s=s(),Z(),s),ds={class:"yield-details-box"},cs={class:"yield-details"},us={class:"total-claim"},rs=T(()=>e("div",null,"Pending Yield",-1)),_s={class:"total-claim-usd"},ms={class:"position-detail"},vs={class:"position-detail-top"},fs=T(()=>e("div",{class:"left"},"Position",-1)),ps={class:"right plus-switch plus-liquidity-switch"},hs=T(()=>e("span",null,"Hide yield < ",-1)),gs={class:"position-detail-bottom"},ys={class:"item-top"},ws={class:"left"},Cs={class:"bottom"},bs={class:"right"},ks=["onClick"],$s={key:0,"aria-hidden":"true"},Ss=T(()=>e("use",{"xlink:href":"#icon-icon_sel"},null,-1)),Ps=[Ss],Ls={class:"item-bottom"},Ys=T(()=>e("div",{class:"left"}," Pending Yield ",-1)),xs={class:"right"},As={key:0,class:"yield-amount"},Us={key:1,class:"yield-amount-zero"},Ds={class:"select"},Ts={class:"all"},Is=T(()=>e("use",{"xlink:href":"#icon-icon_sel"},null,-1)),Rs=[Is],Fs=T(()=>e("span",null,"Select all",-1)),Os={class:"amount-selected"},Ns=T(()=>e("div",null,"Amount selected",-1)),Bs=q({__name:"yield-details",props:{pendingYieldPositionList:{type:Object,default:()=>[]},isShowYiedlDetails:{type:Boolean,default:!1}},emits:["showClaimYield","close"],setup(s,{emit:d}){const h=d,S=s,g=ae(),l=w(()=>g.positionPendingFees),a=w(()=>g.positionPendingRewards),y=p([]),U=p({}),M=p(),Y=p(!0),j=t=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:364 ~ watchPositionList ~ list:",t);const o=[];let u=b(0);for(let _=0;_<t.length;_++){const f=t[_],I=l==null?void 0:l.value[f==null?void 0:f.positionId],R=a==null?void 0:a.value[f==null?void 0:f.positionId],te=(I==null?void 0:I.feesAmountUSD)||b(0),r=(R==null?void 0:R.rewardsAmount)||b(0),F=te.add(r).toString();x.value&&F>L.value?o.push({totalRewardUsd:F,...f,positionPendingFees:I,positionPendingRewards:R,positionName:`Cetus LP | ${f==null?void 0:f.positionName}`}):x.value||o.push({totalRewardUsd:F,...f,positionPendingFees:I,positionPendingRewards:R,positionName:`Cetus LP | ${f==null?void 0:f.positionName}`}),u=u.add(F)}y.value=o.sort((_,f)=>f.totalRewardUsd-_.totalRewardUsd),U.value=Object.fromEntries(o.map(_=>[_==null?void 0:_.positionId,_])),M.value=u,(Y.value||P.value=="all")&&(c.value=y.value.map(_=>_.positionId),Y.value=!1)},c=p([]),P=p("all"),N=t=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:414 ~ selectPosition ~ selectList.value:",c.value);const o=c.value.indexOf(t);P.value=="all"&&c.value.length==0?y.value.forEach(u=>{u.positionId!==t&&c.value.push(t)}):o>-1?c.value.splice(o,1):c.value.push(t),c.value.length!==y.value.length?P.value="":P.value="all",console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:429 ~ selectPosition ~ selectList:",c.value)},x=p(!0),L=p(.01),V=t=>{const o=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");t.target.value=t.target.value.replace(o,"$1"),L.value=t.target.value},se=()=>{(!L.value||L.value<.01)&&(L.value=.01)};Ce(()=>[S.pendingYieldPositionList,x.value,L.value],([t])=>{t&&t.length>0&&j(t)},{immediate:!0});const B=w(()=>{let t=b(0);return c.value.forEach(o=>{var _;const u=((_=U.value[o])==null?void 0:_.totalRewardUsd)||0;t=t.add(u)}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:447 ~ amountSelected ~ selectedTotalAmount.toString():",t.toString()),t.toString()}),C=()=>{P.value="all",y.value.forEach(t=>{c.value.includes(t.positionId)||c.value.push(t.positionId)})},D=()=>{const t=[];y.value.forEach(o=>{c.value.includes(o.positionId)&&t.push(o)}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:494 ~ showClaimYield ~ result:",t),h("showClaimYield",t)};return(t,o)=>{const u=$e,_=Se,f=Ae,I=Pe,R=Ue,te=ie;return i(),E(v(he),{title:"Details",footer:null,visible:s.isShowYiedlDetails,width:"440px","wrap-class-name":"details-modal",class:"new-modal-have-btn",onCancel:o[2]||(o[2]=r=>t.$emit("close"))},{default:O(()=>[e("div",ds,[e("div",cs,[e("div",us,[rs,e("div",_s,[e("span",null,m(v($)(M.value,2,!1,!1)),1)])]),e("div",ms,[e("div",vs,[fs,e("div",ps,[k(u,{class:"range-alerts-switch",checked:x.value,onClick:o[0]||(o[0]=()=>{x.value=!x.value,Y.value=!1})},null,8,["checked"]),hs,k(_,{value:`$${L.value}`,onChange:V,onBlur:se},null,8,["value"])])]),e("div",gs,[y.value&&y.value.length>0?(i(!0),n(J,{key:0},Q(y.value,r=>{var F;return i(),n("div",{key:r,class:"position-item"},[e("div",ys,[e("div",ws,[k(f,{"from-coin":r.coinA,"to-coin":r.coinB,"fee-tier":(F=r.feeRate)==null?void 0:F.replace("%","")},null,8,["from-coin","to-coin","fee-tier"]),e("div",Cs,m(r.positionName),1)]),e("div",bs,[e("div",{class:be(["radio",r.totalRewardUsd<=0?"radio-disable":""]),onClick:oe=>r.totalRewardUsd>0?N(r.positionId):""},[(P.value=="all"||c.value.includes(r.positionId))&&r.totalRewardUsd>0?(i(),n("svg",$s,Ps)):A("",!0)],10,ks)])]),e("div",Ls,[Ys,e("div",xs,[r.totalRewardUsd>0?(i(),n("div",As,[k(I,{placement:"bottomRight","overlay-class-name":"yield-amount-tooltip"},{title:O(()=>{var oe,de,ce,ue;return[k(ns,{"pending-fees-list":(oe=r.positionPendingFees)==null?void 0:oe.feesList,"pending-rewarder-list":(de=r.positionPendingRewards)==null?void 0:de.rewarderAmountOwed,"rewarder-usd":(ce=r.positionPendingRewards)==null?void 0:ce.rewardsAmount,"fee-owed-usd":(ue=r.positionPendingFees)==null?void 0:ue.feesAmountUSD},null,8,["pending-fees-list","pending-rewarder-list","rewarder-usd","fee-owed-usd"])]}),default:O(()=>[H(m(v($)(r.totalRewardUsd,2,!1,!1))+" ",1)]),_:2},1024)])):(i(),n("div",Us,m(v($)(r.totalRewardUsd,2,!1,!1)),1))])])])}),128)):(i(),E(R,{key:1,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found"}))])])]),e("div",Ds,[e("div",Ts,[e("div",{class:"radio",onClick:C},[P.value=="all"?(i(),n("svg",{key:0,"aria-hidden":"true",onClick:o[1]||(o[1]=ke(()=>{c.value=[],P.value=""},["stop"]))},Rs)):A("",!0)]),Fs]),e("div",Os,[Ns,e("div",null,m(v($)(B.value,2,!1,!1)),1)])]),k(te,{class:"claim-yield-btn modal-bottom-btn",disabled:B.value=="0",onClick:D},{default:O(()=>[H("Claim Yield")]),_:1},8,["disabled"])])]),_:1},8,["visible"])}}});const js=z(Bs,[["__scopeId","data-v-e25d90e6"]]),_e=p(!1),G=p(!1),we=De(),{setIsShowSuccess:Es,setIsShowRejected:me,setIsShowWaiting:W,setTransactionDesc:Hs,setTransactionTxid:ve}=we,qs=Te("Sui"),K=Ie("Sui"),zs=Re(),fe=w(()=>zs),Ms=ae(),Vs=w(()=>Ms.poolsObj);w(()=>we);Fe();Oe();Ne();const{getPositionList:Ws}=Be(),Ks=async s=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:32 ~ batchHarvestAndClmmFee ~ positionList:",s),G.value=!0;try{const d=[],h=[];s.forEach(a=>{const y=Vs.value[a.pool].miningRewardList.filter(U=>U.emissionsEveryDay>0).map(U=>U.coinType);console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:66 ~ batchHarvestAndClmmFee ~ position:",a),a.positionSource=="clmm"?d.push({pool_id:a.pool,pos_id:a.positionId,collect_fee:!0,rewarder_coin_types:y,coinTypeA:a.defaultCoinaAddress,coinTypeB:a.defaultCoinbAddress}):h.push({pool_id:a.farm_pool_id,position_nft_id:a.farmPositionId,clmm_pool_id:a.pool,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:y,coinTypeA:a.defaultCoinaAddress,coinTypeB:a.defaultCoinbAddress})}),ve(""),Hs("Claim Yield"),W(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:71 ~ batchHarvestAndClmmFee ~ clmmPositionList:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:71 ~ batchHarvestAndClmmFee ~ framsPositionList:",h);const S=await qs.batchHarvestAndClmmFee(h,d),g=await K.signAndExecuteTransactionBlock(fe.value.currentWallet,S.txb,S.payloadParams),l=K.handleTx(g);if(l&&l.hash){ve(l.hash),W(!1),Es(!0);const a={title:"Claim",desc:"Claim Yield",hash:l.hash};a.res=l.res,K.showTransitionPending(a),await K.watchTransaction(a)&&setTimeout(()=>{Ws(fe.value.address)},1e3)}else W(!1),me(!0);G.value=!1,_e.value=!1}catch(d){G.value=!1,W(!1),me(!0),_e.value=!1,console.log("batchHarvestAndClmmFee error:",d)}},ne=s=>(X("data-v-c84b105c"),s=s(),Z(),s),Gs={class:"claim-yield-content"},Js={class:"total-claim"},Qs=ne(()=>e("div",null,"Total Claim",-1)),Xs={class:"total-claim-usd"},Zs=ne(()=>e("svg",{"aria-hidden":"true",class:"back-icon"},[e("use",{"xlink:href":"#icon-icon-back"})],-1)),et=ne(()=>e("span",null,"Back",-1)),st=[Zs,et],tt=q({__name:"claim-yield",props:{pendingYield:{type:Number,default:0},myClaimList:{type:Object,default:()=>[]},myClaimPositionList:{type:Object,default:()=>[]}},setup(s){return(d,h)=>{const S=ie;return i(),E(v(he),{class:"new-modal-have-btn",title:"Claim Yield",visible:!0,footer:null,width:"440px",onCancel:h[2]||(h[2]=g=>d.$emit("close"))},{default:O(()=>[e("div",Gs,[e("div",Js,[Qs,e("div",Xs,m(s.pendingYield>0&&s.pendingYield<.01?"<$0.01":`$${v(xe)(s.pendingYield,2)}`),1)]),k(ge,{"my-claim-list":s.myClaimList},null,8,["my-claim-list"]),e("div",{class:"choose-amount",onClick:h[0]||(h[0]=g=>d.$emit("chooseAmount"))},st),k(S,{class:"confirm-btn modal-bottom-btn",loading:v(G),onClick:h[1]||(h[1]=g=>v(Ks)(s.myClaimPositionList))},{default:O(()=>[H("Confirm")]),_:1},8,["loading"])])]),_:1})}}});const ot=z(tt,[["__scopeId","data-v-c84b105c"]]),ee=s=>(X("data-v-8d7b7375"),s=s(),Z(),s),lt={class:"total-info"},it={class:"total-liquidity"},at=ee(()=>e("span",{class:"total-liquidity-text"},"Total Liquidity",-1)),nt={key:0,class:"skeleton-box"},dt={key:1,class:"total-liquidity-usd"},ct={class:"pending-yield"},ut=ee(()=>e("div",{class:"pending-yield-text"},"Pending Yield",-1)),rt={key:0,class:"skeleton-box"},_t={key:1,class:"pending-yield-show-value"},mt={class:"pending-yield-value-box"},vt={key:0,class:"claim-list-box"},ft={class:"claim-list-content"},pt=ee(()=>e("use",{"xlink:href":"#icon-icon_expand"},null,-1)),ht=[pt],gt=ee(()=>e("use",{"xlink:href":"#icon-icon_expand"},null,-1)),yt=[gt],wt=q({__name:"total-position",setup(s){const d=ae(),h=w(()=>d.isPositionLoading),S=w(()=>d.positionTotalPrice),g=w(()=>d.positionTotalPendingFees),l=w(()=>d.positionTotalPendingRewards),a=w(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:64 ~ pendingYield ~ positionTotalPendingFees.value:",g.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:65 ~ pendingYield ~ positionTotalPendingRewards.value:",l.value),g.value==="--"||l.value==="--"?0:b(g.value||0).add(l.value||0).toNumber())),y=w(()=>d.pendingYieldLoading),U=w(()=>d.pendingYieldTokenList),M=p(!1),Y=p(!1),j=p(1),c=()=>{a.value>0&&(Y.value=!0,j.value=j.value==1?2:1)},P=w(()=>d.pendingYieldPositionList),N=p(!1),x=p(),L=p(),V=p(),se=B=>{Y.value=!1,N.value=!0;let C=b(0);const D=[],t={};B.forEach(o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:352 ~ showClaimYield ~ ele:",o);const u=o.positionPendingRewards.rewardsAmount||0,_=o.positionPendingFees.feesAmountUSD||0;C=C.add(b(u)).add(b(_)),D.push(...o.positionPendingFees.feesList),D.push(...o.positionPendingRewards.rewarderAmountOwed)}),D.forEach(o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:369 ~ showClaimYield ~ claimItem:",o);const u=o.tokenInfo.address;t[u]?t[u]={...o,amountUSD:b(t[u].amountUSD).add(o.amountUSD).toString(),amount:b(t[u].amount).add(o.amount).toString()}:(t[u]={},t[u]={...o,amountUSD:b(0).add(o.amountUSD).toString(),amount:b(0).add(o.amount).toString()})}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:362 ~ showClaimYield ~ claimObj:",t),x.value=C.toNumber(),V.value=Object.values(t).filter(o=>o.amount>0).sort((o,u)=>u.amountUSD-o.amountUSD),L.value=B};return(B,C)=>{const D=Ye,t=ie;return i(),n("div",lt,[e("div",it,[at,h.value?(i(),n("div",nt,[k(D,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(i(),n("span",dt,m(v(re)(S.value||0)),1))]),e("div",ct,[ut,y.value?(i(),n("div",rt,[k(D,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(i(),n("div",_t,[e("div",mt,[e("span",{class:"pending-yield-usd",style:Le(a.value<=0?{border:"none"}:{}),onClick:c},[H(m(v(re)(a.value||0))+" ",1),a.value>0?(i(),n("div",vt,[e("div",ft,[k(ge,{"my-claim-list":U.value},null,8,["my-claim-list"])])])):A("",!0)],4),a.value>0?(i(),n("svg",{key:0,class:"icon route-icon pc-icon","aria-hidden":"true",onClick:c},ht)):A("",!0),k(t,{class:"claim-all-btn",disabled:a.value<=0,loading:M.value,onClick:c},{default:O(()=>[H("Claim All")]),_:1},8,["disabled","loading"])]),a.value>0?(i(),n("svg",{key:0,class:"icon route-icon h5-icon","aria-hidden":"true",onClick:c},yt)):A("",!0)]))]),N.value?(i(),E(ot,{key:0,"pending-yield":x.value,"my-claim-list":V.value,"my-claim-position-list":L.value,onClose:C[0]||(C[0]=o=>N.value=!1),onChooseAmount:C[1]||(C[1]=()=>{N.value=!1,Y.value=!0})},null,8,["pending-yield","my-claim-list","my-claim-position-list"])):A("",!0),(i(),E(js,{key:j.value,"pending-yield-position-list":P.value,"is-show-yiedl-details":Y.value,onClose:C[2]||(C[2]=()=>Y.value=!1),onShowClaimYield:se},null,8,["pending-yield-position-list","is-show-yiedl-details"]))])}}});const It=z(wt,[["__scopeId","data-v-8d7b7375"]]);export{It as T};
