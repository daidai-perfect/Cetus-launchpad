import{C as ci}from"./coin-img.5bcdd2aa.js";import{a as dr,r as at,e as gr,M as tr,o as fe,f as Se,h as F,c as bt,x as _t,j as Br,v as Ae,p as pr,k as vr,ae as hi,ac as Lt,m as Ie,af as es,D as $t,q as ts,w as nr,u as ir,i as _e,F as sr,s as or,t as Vn,Y as fi,W as rs,B as ns,l as is,a1 as ss,a2 as _r,y as os,z as $n}from"./entry.9f1d8bf2.js";import{M as as,A as ls,S as us,B as cs,D as hs,E as fs,H as ds,I as gs,J as ps,K as vs,L as ms,N as ws,O as ys,P as Ms,Q as bs,R as _s,U as An,V as Sr,W as As,Y as Cs,Z as Ss,_ as Cn,$ as Is,a0 as Sn,a1 as mr,a2 as Dr,a3 as di,a4 as Rr,a5 as Os,a6 as Es,a7 as fn,a8 as ks,a9 as Ts,aa as Bs,ab as Rs,ac as Ns,ad as Ps,ae as js,c as mt,u as Ls,af as Fs,b as Zn,ag as Kn}from"./index.8db8d6d5.js";import"./decimal.a2826370.js";import{D as gi}from"./decimal.765d8738.js";/* empty css              */import{f as pi,a as Ur,e as qs,b as Ds,A as Ar}from"./pool.50412446.js";import{I as Us}from"./icon-tooltip.a301dfd5.js";import{f as it,s as xs,m as vi,b as dn,P as mi,Q as Ws}from"./index.7ae3cf46.js";const wi="…";function Vs(e){if(e.length<=6)return e;const t=e.startsWith("0x")?2:0;return`0x${e.slice(t,t+4)}${wi}${e.slice(-4)}`}function $s(e){return`${e.slice(0,10)}${wi}`}const Zs=Object.freeze(Object.defineProperty({__proto__:null,MIST_PER_SUI:as,MOVE_STDLIB_ADDRESS:ls,SUI_ADDRESS_LENGTH:us,SUI_CLOCK_OBJECT_ID:cs,SUI_DECIMALS:hs,SUI_FRAMEWORK_ADDRESS:fs,SUI_SYSTEM_ADDRESS:ds,SUI_SYSTEM_MODULE_NAME:gs,SUI_SYSTEM_STATE_OBJECT_ID:ps,SUI_TYPE_ARG:vs,formatAddress:Vs,formatDigest:$s,fromB64:ms,fromHEX:ws,isValidSuiAddress:ys,isValidSuiNSName:Ms,isValidSuiObjectId:bs,isValidTransactionDigest:_s,normalizeStructTag:An,normalizeSuiAddress:Sr,normalizeSuiNSName:As,normalizeSuiObjectId:Cs,parseStructTag:Ss,toB64:Cn,toHEX:Is},Symbol.toStringTag,{value:"Module"}));var yi=e=>{throw TypeError(e)},Mi=(e,t,r)=>t.has(e)||yi("Cannot "+r),ze=(e,t,r)=>(Mi(e,t,"read from private field"),r?r.call(e):t.get(e)),bi=(e,t,r)=>t.has(e)?yi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ks=(e,t,r,i)=>(Mi(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Bt,Je;class _i{async getObject(t){const[r,i]=await Promise.all([this.get("OwnedObject",t),this.get("SharedOrImmutableObject",t)]);return r??i??null}async getObjects(t){return Promise.all([...t.map(r=>this.getObject(r))])}async addObject(t){return t.owner?await this.set("OwnedObject",t.objectId,t):await this.set("SharedOrImmutableObject",t.objectId,t),t}async addObjects(t){await Promise.all(t.map(async r=>this.addObject(r)))}async deleteObject(t){await Promise.all([this.delete("OwnedObject",t),this.delete("SharedOrImmutableObject",t)])}async deleteObjects(t){await Promise.all(t.map(r=>this.deleteObject(r)))}async getMoveFunctionDefinition(t){const r=`${Sr(t.package)}::${t.module}::${t.function}`;return this.get("MoveFunction",r)}async addMoveFunctionDefinition(t){const r=Sr(t.package),i=`${r}::${t.module}::${t.function}`,s={...t,package:r};return await this.set("MoveFunction",i,s),s}async deleteMoveFunctionDefinition(t){const r=`${Sr(t.package)}::${t.module}::${t.function}`;await this.delete("MoveFunction",r)}async getCustom(t){return this.get("Custom",t)}async setCustom(t,r){return this.set("Custom",t,r)}async deleteCustom(t){return this.delete("Custom",t)}}class zs extends _i{constructor(){super(...arguments),bi(this,Bt,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(t,r){return ze(this,Bt)[t].get(r)??null}async set(t,r,i){ze(this,Bt)[t].set(r,i)}async delete(t,r){ze(this,Bt)[t].delete(r)}async clear(t){if(t)ze(this,Bt)[t].clear();else for(const r of Object.values(ze(this,Bt)))r.clear()}}Bt=new WeakMap;class Ai{constructor({cache:t=new zs}){bi(this,Je),Ks(this,Je,t)}asPlugin(){return async(t,r,i)=>{const s=t.inputs.filter(c=>c.UnresolvedObject).map(c=>c.UnresolvedObject.objectId),l=(await ze(this,Je).getObjects(s)).filter(c=>c!==null),a=new Map(l.map(c=>[c.objectId,c]));for(const c of t.inputs){if(!c.UnresolvedObject)continue;const p=a.get(c.UnresolvedObject.objectId);p&&(p.initialSharedVersion&&!c.UnresolvedObject.initialSharedVersion?c.UnresolvedObject.initialSharedVersion=p.initialSharedVersion:(p.version&&!c.UnresolvedObject.version&&(c.UnresolvedObject.version=p.version),p.digest&&!c.UnresolvedObject.digest&&(c.UnresolvedObject.digest=p.digest)))}await Promise.all(t.commands.map(async c=>{if(c.MoveCall){const p=await this.getMoveFunctionDefinition({package:c.MoveCall.package,module:c.MoveCall.module,function:c.MoveCall.function});p&&(c.MoveCall._argumentTypes=p.parameters)}})),await i(),await Promise.all(t.commands.map(async c=>{var p;(p=c.MoveCall)!=null&&p._argumentTypes&&await ze(this,Je).addMoveFunctionDefinition({package:c.MoveCall.package,module:c.MoveCall.module,function:c.MoveCall.function,parameters:c.MoveCall._argumentTypes})}))}}async clear(){await ze(this,Je).clear()}async getMoveFunctionDefinition(t){return ze(this,Je).getMoveFunctionDefinition(t)}async getObjects(t){return ze(this,Je).getObjects(t)}async deleteObjects(t){return ze(this,Je).deleteObjects(t)}async clearOwnedObjects(){await ze(this,Je).clear("OwnedObject")}async clearCustom(){await ze(this,Je).clear("Custom")}async getCustom(t){return ze(this,Je).getCustom(t)}async setCustom(t,r){return ze(this,Je).setCustom(t,r)}async deleteCustom(t){return ze(this,Je).deleteCustom(t)}async applyEffects(t){if(!t.V2)throw new Error(`Unsupported transaction effects version ${t.$kind}`);const{lamportVersion:r,changedObjects:i}=t.V2,s=[],l=[];i.map(async([a,c])=>{var p;if(c.outputState.NotExist)await ze(this,Je).deleteObject(a);else if(c.outputState.ObjectWrite){const[v,M]=c.outputState.ObjectWrite;l.push({objectId:a,digest:v,version:r,owner:M.AddressOwner??M.ObjectOwner??null,initialSharedVersion:((p=M.Shared)==null?void 0:p.initialSharedVersion)??null})}}),await Promise.all([ze(this,Je).addObjects(l),ze(this,Je).deleteObjects(s)])}}Je=new WeakMap;var Ci=e=>{throw TypeError(e)},Si=(e,t,r)=>t.has(e)||Ci("Cannot "+r),Gt=(e,t,r)=>(Si(e,t,"read from private field"),r?r.call(e):t.get(e)),zn=(e,t,r)=>t.has(e)?Ci("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),cn=(e,t,r,i)=>(Si(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Dt,Ut;class Ii{constructor({client:t,...r}){zn(this,Dt),zn(this,Ut,null),cn(this,Dt,t),this.cache=new Ai(r)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:t,...r}){return t.addBuildPlugin(this.cache.asPlugin()),t.build({client:Gt(this,Dt),...r})}async executeTransaction({transaction:t,options:r,...i}){const s=Sn(t)?await this.buildTransaction({transaction:t}):t,l=await Gt(this,Dt).executeTransactionBlock({...i,transactionBlock:s,options:{...r,showRawEffects:!0}});if(l.rawEffects){const a=mr.TransactionEffects.parse(Uint8Array.from(l.rawEffects));await this.applyEffects(a)}return l}async signAndExecuteTransaction({options:t,transaction:r,...i}){r.setSenderIfNotSet(i.signer.toSuiAddress());const s=await this.buildTransaction({transaction:r}),{signature:l}=await i.signer.signTransaction(s);return await this.executeTransaction({transaction:s,signature:l,options:t})}async applyEffects(t){var r;cn(this,Ut,((r=t.V2)==null?void 0:r.transactionDigest)??null),await this.cache.applyEffects(t)}async waitForLastTransaction(){Gt(this,Ut)&&(await Gt(this,Dt).waitForTransaction({digest:Gt(this,Ut)}),cn(this,Ut,null))}}Dt=new WeakMap;Ut=new WeakMap;var Oi=e=>{throw TypeError(e)},Xs=(e,t,r)=>t.has(e)||Oi("Cannot "+r),lt=(e,t,r)=>(Xs(e,t,"read from private field"),r?r.call(e):t.get(e)),Ei=(e,t,r)=>t.has(e)?Oi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),wt,Rt;class ki{constructor(){Ei(this,wt,[])}async runTask(t){return new Promise((r,i)=>{lt(this,wt).push(()=>{t().finally(()=>{lt(this,wt).shift(),lt(this,wt).length>0&&lt(this,wt)[0]()}).then(r,i)}),lt(this,wt).length===1&&lt(this,wt)[0]()})}}wt=new WeakMap;class Ys{constructor(t){Ei(this,Rt,[]),this.activeTasks=0,this.maxTasks=t}runTask(t){return new Promise((r,i)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,t().finally(()=>{lt(this,Rt).length>0?lt(this,Rt).shift()():this.activeTasks--}).then(r,i)):lt(this,Rt).push(()=>{t().finally(()=>{lt(this,Rt).length>0?lt(this,Rt).shift()():this.activeTasks--}).then(r,i)})})}}Rt=new WeakMap;var Ti=e=>{throw TypeError(e)},Bi=(e,t,r)=>t.has(e)||Ti("Cannot "+r),et=(e,t,r)=>(Bi(e,t,"read from private field"),r?r.call(e):t.get(e)),Qt=(e,t,r)=>t.has(e)?Ti("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Xn=(e,t,r,i)=>(Bi(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Ir,rr,ot,gn,Or;class Js{constructor({signer:t,...r}){Qt(this,Ir,new ki),Qt(this,rr),Qt(this,ot),Qt(this,gn,async i=>{if(!i.V2)return;const s=In(i).ref;s?et(this,ot).cache.setCustom("gasCoin",s):et(this,ot).cache.deleteCustom("gasCoin")}),Qt(this,Or,async i=>{const s=await et(this,ot).cache.getCustom("gasCoin"),l=Dr.from(i);return s&&l.setGasPayment([s]),l.setSenderIfNotSet(et(this,rr).toSuiAddress()),et(this,ot).buildTransaction({transaction:l})}),Xn(this,rr,t),Xn(this,ot,new Ii({client:r.client,cache:r.cache}))}async applyEffects(t){return Promise.all([et(this,gn).call(this,t),et(this,ot).cache.applyEffects(t)])}async buildTransaction(t){return et(this,Ir).runTask(()=>et(this,Or).call(this,t))}resetCache(){return et(this,ot).reset()}waitForLastTransaction(){return et(this,ot).waitForLastTransaction()}executeTransaction(t){return et(this,Ir).runTask(async()=>{const r=Sn(t)?await et(this,Or).call(this,t):t,{signature:i}=await et(this,rr).signTransaction(r),s=await et(this,ot).executeTransaction({signature:i,transaction:r}).catch(async c=>{throw await this.resetCache(),c}),l=Uint8Array.from(s.rawEffects),a=mr.TransactionEffects.parse(l);return await this.applyEffects(a),{digest:s.digest,effects:Cn(l)}})}}Ir=new WeakMap;rr=new WeakMap;ot=new WeakMap;gn=new WeakMap;Or=new WeakMap;function In(e){if(!e.V2)throw new Error("Unexpected effects version");const t=e.V2.changedObjects[e.V2.gasObjectIndex];if(!t)throw new Error("Gas object not found in effects");const[r,{outputState:i}]=t;if(!i.ObjectWrite)throw new Error("Unexpected gas object state");const[s,l]=i.ObjectWrite;return{ref:{objectId:r,digest:s,version:e.V2.lamportVersion},owner:l.AddressOwner||l.ObjectOwner}}var Ri=e=>{throw TypeError(e)},On=(e,t,r)=>t.has(e)||Ri("Cannot "+r),V=(e,t,r)=>(On(e,t,"read from private field"),r?r.call(e):t.get(e)),Ke=(e,t,r)=>t.has(e)?Ri("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ce=(e,t,r,i)=>(On(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),st=(e,t,r)=>(On(e,t,"access private method"),r),Yn=(e,t,r,i)=>({set _(s){Ce(e,t,s,r)},get _(){return V(e,t,i)}}),Ct,ht,Nr,lr,ar,ur,Pr,Zt,tt,St,jt,Pt,En,Er,cr,xt,zt,dt,rt,Ni,Pi,hr,kn,ji,pn,Li;const er={coinBatchSize:20,initialCoinBalance:200000000n,minimumCoinBalance:50000000n,maxPoolSize:50,epochBoundaryWindow:1e3};class Hs{constructor(t){Ke(this,rt),Ke(this,Ct),Ke(this,ht),Ke(this,Nr),Ke(this,lr),Ke(this,ar),Ke(this,ur),Ke(this,Pr),Ke(this,Zt),Ke(this,tt),Ke(this,St,[]),Ke(this,jt),Ke(this,Pt,new Map),Ke(this,En,new ki),Ke(this,Er),Ke(this,cr,null),Ke(this,xt,null),Ke(this,zt,0),Ke(this,dt,null),Ce(this,Ct,t.signer),Ce(this,ht,t.client),Ce(this,Nr,t.coinBatchSize??er.coinBatchSize),Ce(this,lr,t.initialCoinBalance??er.initialCoinBalance),Ce(this,ar,t.minimumCoinBalance??er.minimumCoinBalance),Ce(this,Pr,t.defaultGasBudget??V(this,ar)),Ce(this,ur,t.epochBoundaryWindow??er.epochBoundaryWindow),Ce(this,Zt,t.maxPoolSize??er.maxPoolSize),Ce(this,jt,new Ii({client:t.client,cache:t.cache})),Ce(this,Er,new Ys(V(this,Zt))),Ce(this,tt,t.sourceCoins?new Map(t.sourceCoins.map(r=>[r,null])):null)}resetCache(){return Ce(this,dt,null),st(this,rt,hr).call(this,()=>V(this,jt).reset())}async waitForLastTransaction(){await st(this,rt,hr).call(this,()=>st(this,rt,kn).call(this))}async executeTransaction(t){const{promise:r,resolve:i,reject:s}=Gs(),l=await st(this,rt,Ni).call(this,t),a=()=>{V(this,Er).runTask(()=>st(this,rt,Pi).call(this,t,l).then(i,s))},c=new Set;return l.forEach(p=>{V(this,Pt).get(p)?(c.add(p),V(this,Pt).get(p).push(()=>{c.delete(p),c.size===0&&a()})):V(this,Pt).set(p,[])}),c.size===0&&a(),r}}Ct=new WeakMap;ht=new WeakMap;Nr=new WeakMap;lr=new WeakMap;ar=new WeakMap;ur=new WeakMap;Pr=new WeakMap;Zt=new WeakMap;tt=new WeakMap;St=new WeakMap;jt=new WeakMap;Pt=new WeakMap;En=new WeakMap;Er=new WeakMap;cr=new WeakMap;xt=new WeakMap;zt=new WeakMap;dt=new WeakMap;rt=new WeakSet;Ni=async function(e){const t=new Set;let r=!1;return e.addSerializationPlugin(async(i,s,l)=>{await l(),!r&&(r=!0,i.inputs.forEach(a=>{var c,p,v,M,_;(p=(c=a.Object)==null?void 0:c.ImmOrOwnedObject)!=null&&p.objectId?t.add(a.Object.ImmOrOwnedObject.objectId):(M=(v=a.Object)==null?void 0:v.Receiving)!=null&&M.objectId?t.add(a.Object.Receiving.objectId):(_=a.UnresolvedObject)!=null&&_.objectId&&!a.UnresolvedObject.initialSharedVersion&&t.add(a.UnresolvedObject.objectId)}))}),await e.prepareForSerialization({client:V(this,ht)}),t};Pi=async function(e,t){var i;let r;try{e.setSenderIfNotSet(V(this,Ct).toSuiAddress()),await V(this,En).runTask(async()=>{const _=e.getData();_.gasData.price||e.setGasPrice(await st(this,rt,pn).call(this)),_.gasData.budget||e.setGasBudget(V(this,Pr)),await st(this,rt,hr).call(this),r=await st(this,rt,ji).call(this),Yn(this,zt)._++,e.setGasPayment([{objectId:r.id,version:r.version,digest:r.digest}]),await V(this,jt).buildTransaction({transaction:e,onlyTransactionKind:!0})});const s=await e.build({client:V(this,ht)}),{signature:l}=await V(this,Ct).signTransaction(s),a=await V(this,jt).executeTransaction({transaction:s,signature:l,options:{showEffects:!0}}),c=Uint8Array.from(a.rawEffects),p=mr.TransactionEffects.parse(c),v=In(p),M=(i=p.V2)==null?void 0:i.gasUsed;if(r&&M&&v.owner===V(this,Ct).toSuiAddress()){const _=BigInt(M.computationCost)+BigInt(M.storageCost)+BigInt(M.storageCost)-BigInt(M.storageRebate);let A=!1;new di(e.getData()).mapArguments(S=>(S.$kind==="GasCoin"&&(A=!0),S)),!A&&r.balance>=V(this,ar)?V(this,St).push({id:v.ref.objectId,version:v.ref.version,digest:v.ref.digest,balance:r.balance-_}):(V(this,tt)||Ce(this,tt,new Map),V(this,tt).set(v.ref.objectId,v.ref))}return Ce(this,cr,a.digest),{digest:a.digest,effects:Cn(c)}}catch(s){throw r&&(V(this,tt)||Ce(this,tt,new Map),V(this,tt).set(r.id,null)),await st(this,rt,hr).call(this,async()=>{await Promise.all([V(this,jt).cache.deleteObjects([...t]),st(this,rt,kn).call(this)])}),s}finally{t.forEach(s=>{const l=V(this,Pt).get(s);l&&l.length>0?l.shift()():l&&V(this,Pt).delete(s)}),Yn(this,zt)._--}};hr=async function(e){V(this,xt)&&await V(this,xt),Ce(this,xt,(e==null?void 0:e().then(()=>{Ce(this,xt,null)},()=>{}))??null)};kn=async function(){const e=V(this,cr);e&&(Ce(this,cr,null),await V(this,ht).waitForTransaction({digest:e}))};ji=async function(){if(V(this,St).length===0&&V(this,zt)<=V(this,Zt)&&await st(this,rt,Li).call(this),V(this,St).length===0)throw new Error("No coins available");return V(this,St).shift()};pn=async function(){if((V(this,dt)?V(this,dt).expiration-V(this,ur)-Date.now():0)>0)return V(this,dt).price;if(V(this,dt)){const r=Math.max(V(this,dt).expiration+V(this,ur)-Date.now(),1e3);await new Promise(i=>setTimeout(i,r))}const t=await V(this,ht).getLatestSuiSystemState();return Ce(this,dt,{price:BigInt(t.referenceGasPrice),expiration:Number.parseInt(t.epochStartTimestampMs,10)+Number.parseInt(t.epochDurationMs,10)}),st(this,rt,pn).call(this)};Li=async function(){var v;const e=Math.min(V(this,Nr),V(this,Zt)-(V(this,St).length+V(this,zt))+1);if(e===0)return;const t=new Dr,r=V(this,Ct).toSuiAddress();if(t.setSender(r),V(this,tt)){const M=[],_=[];for(const[A,S]of V(this,tt))S?M.push(S):_.push(A);if(_.length>0){const A=await V(this,ht).multiGetObjects({ids:_});M.push(...A.filter(S=>S.data!==null).map(({data:S})=>({objectId:S.objectId,version:S.version,digest:S.digest})))}t.setGasPayment(M),Ce(this,tt,new Map)}const i=new Array(e).fill(V(this,lr)),s=t.splitCoins(t.gas,i),l=[];for(let M=0;M<i.length;M++)l.push(s[M]);t.transferObjects(l,r),await this.waitForLastTransaction();const a=await V(this,ht).signAndExecuteTransaction({transaction:t,signer:V(this,Ct),options:{showRawEffects:!0}}),c=mr.TransactionEffects.parse(Uint8Array.from(a.rawEffects));(v=c.V2)==null||v.changedObjects.forEach(([M,{outputState:_}],A)=>{var S;A===((S=c.V2)==null?void 0:S.gasObjectIndex)||!_.ObjectWrite||V(this,St).push({id:M,version:c.V2.lamportVersion,digest:_.ObjectWrite[0],balance:BigInt(V(this,lr))})}),V(this,tt)||Ce(this,tt,new Map);const p=In(c).ref;V(this,tt).set(p.objectId,p),await V(this,ht).waitForTransaction({digest:a.digest})};function Gs(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}const jr="CoinWithBalance",Jn=An("0x2::sui::SUI");function Qs({type:e=Jn,balance:t,useGasCoin:r=!0}){return i=>{i.addIntentResolver(jr,to);const s=e==="gas"?e:An(e);return i.add(Rr.Intent({name:jr,inputs:{},data:{type:s===Jn&&r?"gas":s,balance:BigInt(t)}}))}}const eo=ks({type:Ts(),balance:Bs()});async function to(e,t,r){var v,M;const i=new Set,s=new Map;if(!e.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const _ of e.commands)if(_.$kind==="$Intent"&&_.$Intent.name===jr){const{type:A,balance:S}=Os(eo,_.$Intent.data);A!=="gas"&&i.add(A),s.set(A,(s.get(A)??0n)+S)}const l=new Set;for(const _ of e.inputs)(v=_.Object)!=null&&v.ImmOrOwnedObject&&l.add(_.Object.ImmOrOwnedObject.objectId),(M=_.UnresolvedObject)!=null&&M.objectId&&l.add(_.UnresolvedObject.objectId);const a=new Map,c=Es(t);await Promise.all([...i].map(async _=>{a.set(_,await ro({coinType:_,balance:s.get(_),client:c,owner:e.sender,usedIds:l}))}));const p=new Map;p.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[_,A]of e.commands.entries()){if(A.$kind!=="$Intent"||A.$Intent.name!==jr)continue;const{type:S,balance:D}=A.$Intent.data,j=[];if(!p.has(S)){const[P,...H]=a.get(S).map(L=>e.addInput("object",fn.ObjectRef({objectId:L.coinObjectId,digest:L.digest,version:L.version})));H.length>0&&j.push(Rr.MergeCoins(P,H)),p.set(S,P)}j.push(Rr.SplitCoins(p.get(S),[e.addInput("pure",fn.Pure(mr.u64().serialize(D)))])),e.replaceCommand(_,j),e.mapArguments(P=>P.$kind==="Result"&&P.Result===_?{$kind:"NestedResult",NestedResult:[_+j.length-1,0]}:P)}return r()}async function ro({coinType:e,balance:t,client:r,owner:i,usedIds:s}){let l=t;const a=[];return c();async function c(p=null){const{data:v,hasNextPage:M,nextCursor:_}=await r.getCoins({owner:i,coinType:e,cursor:p}),A=v.sort((S,D)=>Number(BigInt(D.balance)-BigInt(S.balance)));for(const S of A){if(s.has(S.coinObjectId))continue;const D=BigInt(S.balance);if(a.push(S),l-=D,l<=0)return a}if(M)return c(_);throw new Error(`Not enough coins of type ${e} to satisfy requested balance`)}}const no={pure:Rs(e=>t=>t.pure(e)),object:e=>t=>t.object(e),sharedObjectRef:(...e)=>t=>t.sharedObjectRef(...e),objectRef:(...e)=>t=>t.objectRef(...e),receivingRef:(...e)=>t=>t.receivingRef(...e)},io=Object.freeze(Object.defineProperty({__proto__:null,Arguments:no,AsyncCache:_i,Commands:Rr,Inputs:fn,ObjectCache:Ai,ParallelTransactionExecutor:Hs,SerialTransactionExecutor:Js,Transaction:Dr,TransactionDataBuilder:di,UpgradePolicy:Ns,coinWithBalance:Qs,getPureBcsSchema:Ps,isTransaction:Sn,normalizedTypeToMoveTypeSignature:js},Symbol.toStringTag,{value:"Module"})),so=dr({components:{CoinImg:ci},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},oneToAmount:{type:String,default:()=>""},oneFromAmount:{type:String,default:()=>""}},setup(e){return{rateChange:at(!1)}}});const oo=e=>(pr("data-v-bab4e257"),e=e(),vr(),e),ao={class:"swap-rate"},lo={key:0},uo={class:"after-amount"},co={key:1},ho={class:"after-amount"},fo=oo(()=>F("svg",{class:"icon","aria-hidden":"true"},[F("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),go=[fo];function po(e,t,r,i,s,l){var c,p,v,M,_,A,S,D,j,P,H,L;const a=tr("CoinImg");return fe(),Se("div",ao,[e.rateChange?(fe(),Se("span",co,[F("span",ho,[(S=e.toCoin)!=null&&S.address?(fe(),bt(a,{key:0,url:(D=e.toCoin)==null?void 0:D.logoURI,size:"16px"},null,8,["url"])):_t("",!0),Br(" 1 "+Ae((j=e.toCoin)==null?void 0:j.symbol)+" ≈ "+Ae(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+Ae((P=e.fromCoin)==null?void 0:P.symbol)+"  ",1),(H=e.fromCoin)!=null&&H.address?(fe(),bt(a,{key:1,url:(L=e.fromCoin)==null?void 0:L.logoURI,size:"16px"},null,8,["url"])):_t("",!0)])])):(fe(),Se("span",lo,[F("span",uo,[(c=e.fromCoin)!=null&&c.address?(fe(),bt(a,{key:0,url:(p=e.fromCoin)==null?void 0:p.logoURI,size:"16px"},null,8,["url"])):_t("",!0),Br(" 1 "+Ae((v=e.fromCoin)==null?void 0:v.symbol)+" ≈ "+Ae(e.oneToAmount==1/0?0:e.oneToAmount)+" "+Ae((M=e.toCoin)==null?void 0:M.symbol)+"  ",1),(_=e.toCoin)!=null&&_.address?(fe(),bt(a,{key:1,url:(A=e.toCoin)==null?void 0:A.logoURI,size:"16px"},null,8,["url"])):_t("",!0)])])),F("div",{class:"right",onClick:t[0]||(t[0]=q=>e.rateChange=!e.rateChange)},go)])}const Zu=gr(so,[["render",po],["__scopeId","data-v-bab4e257"]]);async function Ku(e,t){var s,l,a;const r=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,i=`${mt.Sui.api}/v2/sui/coin/kline?coin_address=${r}&interval=day&market=${t}`;try{const c=await $fetch(i);return{price:((l=(s=c==null?void 0:c.data)==null?void 0:s.list)==null?void 0:l.reverse())||[],daily_rate:(a=c==null?void 0:c.data)==null?void 0:a.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function zu(e){try{const{prices:t}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),i=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${e}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,s=[];return t.forEach(l=>{s.push({price:new gi(l[1]).toString(),timestamp:l[0]})}),{price:s,daily_rate:i}}catch{return{price:[],daily_rate:""}}}const vo=hi(Zs),mo=hi(io);var vn=vo,wo=mo,yo=Object.create,Tn=Object.defineProperty,Mo=Object.defineProperties,bo=Object.getOwnPropertyDescriptor,_o=Object.getOwnPropertyDescriptors,Fi=Object.getOwnPropertyNames,Hn=Object.getOwnPropertySymbols,Ao=Object.getPrototypeOf,qi=Object.prototype.hasOwnProperty,Co=Object.prototype.propertyIsEnumerable,Gn=(e,t,r)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,So=(e,t)=>{for(var r in t||(t={}))qi.call(t,r)&&Gn(e,r,t[r]);if(Hn)for(var r of Hn(t))Co.call(t,r)&&Gn(e,r,t[r]);return e},Io=(e,t)=>Mo(e,_o(t)),Oo=(e=>typeof Lt<"u"?Lt:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof Lt<"u"?Lt:t)[r]}):e)(function(e){if(typeof Lt<"u")return Lt.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Eo=(e,t)=>function(){return t||(0,e[Fi(e)[0]])((t={exports:{}}).exports,t),t.exports},ko=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Fi(t))!qi.call(e,s)&&s!==r&&Tn(e,s,{get:()=>t[s],enumerable:!(i=bo(t,s))||i.enumerable});return e},wr=(e,t,r)=>(r=e!=null?yo(Ao(e)):{},ko(!e||!e.__esModule?Tn(r,"default",{value:e,enumerable:!0}):r,e)),Me=(e,t,r)=>new Promise((i,s)=>{var l=p=>{try{c(r.next(p))}catch(v){s(v)}},a=p=>{try{c(r.throw(p))}catch(v){s(v)}},c=p=>p.done?i(p.value):Promise.resolve(p.value).then(l,a);c((r=r.apply(e,t)).next())}),yr=Eo({"node_modules/bn.js/lib/bn.js"(e,t){(function(r,i){function s(w,n){if(!w)throw new Error(n||"Assertion failed")}function l(w,n){w.super_=n;var u=function(){};u.prototype=n.prototype,w.prototype=new u,w.prototype.constructor=w}function a(w,n,u){if(a.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((n==="le"||n==="be")&&(u=n,n=10),this._init(w||0,n||10,u||"be"))}typeof r=="object"?r.exports=a:i.BN=a,a.BN=a,a.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=Oo("buffer").Buffer}catch{}a.isBN=function(n){return n instanceof a?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===a.wordSize&&Array.isArray(n.words)},a.max=function(n,u){return n.cmp(u)>0?n:u},a.min=function(n,u){return n.cmp(u)<0?n:u},a.prototype._init=function(n,u,d){if(typeof n=="number")return this._initNumber(n,u,d);if(typeof n=="object")return this._initArray(n,u,d);u==="hex"&&(u=16),s(u===(u|0)&&u>=2&&u<=36),n=n.toString().replace(/\s+/g,"");var y=0;n[0]==="-"&&(y++,this.negative=1),y<n.length&&(u===16?this._parseHex(n,y,d):(this._parseBase(n,u,y),d==="le"&&this._initArray(this.toArray(),u,d)))},a.prototype._initNumber=function(n,u,d){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(s(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),u,d)},a.prototype._initArray=function(n,u,d){if(s(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var b,f,h=0;if(d==="be")for(y=n.length-1,b=0;y>=0;y-=3)f=n[y]|n[y-1]<<8|n[y-2]<<16,this.words[b]|=f<<h&67108863,this.words[b+1]=f>>>26-h&67108863,h+=24,h>=26&&(h-=26,b++);else if(d==="le")for(y=0,b=0;y<n.length;y+=3)f=n[y]|n[y+1]<<8|n[y+2]<<16,this.words[b]|=f<<h&67108863,this.words[b+1]=f>>>26-h&67108863,h+=24,h>=26&&(h-=26,b++);return this._strip()};function p(w,n){var u=w.charCodeAt(n);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;s(!1,"Invalid character in "+w)}function v(w,n,u){var d=p(w,u);return u-1>=n&&(d|=p(w,u-1)<<4),d}a.prototype._parseHex=function(n,u,d){this.length=Math.ceil((n.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var b=0,f=0,h;if(d==="be")for(y=n.length-1;y>=u;y-=2)h=v(n,u,y)<<b,this.words[f]|=h&67108863,b>=18?(b-=18,f+=1,this.words[f]|=h>>>26):b+=8;else{var g=n.length-u;for(y=g%2===0?u+1:u;y<n.length;y+=2)h=v(n,u,y)<<b,this.words[f]|=h&67108863,b>=18?(b-=18,f+=1,this.words[f]|=h>>>26):b+=8}this._strip()};function M(w,n,u,d){for(var y=0,b=0,f=Math.min(w.length,u),h=n;h<f;h++){var g=w.charCodeAt(h)-48;y*=d,g>=49?b=g-49+10:g>=17?b=g-17+10:b=g,s(g>=0&&b<d,"Invalid character"),y+=b}return y}a.prototype._parseBase=function(n,u,d){this.words=[0],this.length=1;for(var y=0,b=1;b<=67108863;b*=u)y++;y--,b=b/u|0;for(var f=n.length-d,h=f%y,g=Math.min(f,f-h)+d,o=0,m=d;m<g;m+=y)o=M(n,m,m+y,u),this.imuln(b),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(h!==0){var R=1;for(o=M(n,m,n.length,u),m=0;m<h;m++)R*=u;this.imuln(R),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},a.prototype.copy=function(n){n.words=new Array(this.length);for(var u=0;u<this.length;u++)n.words[u]=this.words[u];n.length=this.length,n.negative=this.negative,n.red=this.red};function _(w,n){w.words=n.words,w.length=n.length,w.negative=n.negative,w.red=n.red}if(a.prototype._move=function(n){_(n,this)},a.prototype.clone=function(){var n=new a(null);return this.copy(n),n},a.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{a.prototype.inspect=A}else a.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(n,u){n=n||10,u=u|0||1;var d;if(n===16||n==="hex"){d="";for(var y=0,b=0,f=0;f<this.length;f++){var h=this.words[f],g=((h<<y|b)&16777215).toString(16);b=h>>>24-y&16777215,y+=2,y>=26&&(y-=26,f--),b!==0||f!==this.length-1?d=S[6-g.length]+g+d:d=g+d}for(b!==0&&(d=b.toString(16)+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(n===(n|0)&&n>=2&&n<=36){var o=D[n],m=j[n];d="";var R=this.clone();for(R.negative=0;!R.isZero();){var N=R.modrn(m).toString(n);R=R.idivn(m),R.isZero()?d=N+d:d=S[o-N.length]+N+d}for(this.isZero()&&(d="0"+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},a.prototype.toJSON=function(){return this.toString(16,2)},c&&(a.prototype.toBuffer=function(n,u){return this.toArrayLike(c,n,u)}),a.prototype.toArray=function(n,u){return this.toArrayLike(Array,n,u)};var P=function(n,u){return n.allocUnsafe?n.allocUnsafe(u):new n(u)};a.prototype.toArrayLike=function(n,u,d){this._strip();var y=this.byteLength(),b=d||Math.max(1,y);s(y<=b,"byte array longer than desired length"),s(b>0,"Requested array length <= 0");var f=P(n,b),h=u==="le"?"LE":"BE";return this["_toArrayLike"+h](f,y),f},a.prototype._toArrayLikeLE=function(n,u){for(var d=0,y=0,b=0,f=0;b<this.length;b++){var h=this.words[b]<<f|y;n[d++]=h&255,d<n.length&&(n[d++]=h>>8&255),d<n.length&&(n[d++]=h>>16&255),f===6?(d<n.length&&(n[d++]=h>>24&255),y=0,f=0):(y=h>>>24,f+=2)}if(d<n.length)for(n[d++]=y;d<n.length;)n[d++]=0},a.prototype._toArrayLikeBE=function(n,u){for(var d=n.length-1,y=0,b=0,f=0;b<this.length;b++){var h=this.words[b]<<f|y;n[d--]=h&255,d>=0&&(n[d--]=h>>8&255),d>=0&&(n[d--]=h>>16&255),f===6?(d>=0&&(n[d--]=h>>24&255),y=0,f=0):(y=h>>>24,f+=2)}if(d>=0)for(n[d--]=y;d>=0;)n[d--]=0},Math.clz32?a.prototype._countBits=function(n){return 32-Math.clz32(n)}:a.prototype._countBits=function(n){var u=n,d=0;return u>=4096&&(d+=13,u>>>=13),u>=64&&(d+=7,u>>>=7),u>=8&&(d+=4,u>>>=4),u>=2&&(d+=2,u>>>=2),d+u},a.prototype._zeroBits=function(n){if(n===0)return 26;var u=n,d=0;return u&8191||(d+=13,u>>>=13),u&127||(d+=7,u>>>=7),u&15||(d+=4,u>>>=4),u&3||(d+=2,u>>>=2),u&1||d++,d},a.prototype.bitLength=function(){var n=this.words[this.length-1],u=this._countBits(n);return(this.length-1)*26+u};function H(w){for(var n=new Array(w.bitLength()),u=0;u<n.length;u++){var d=u/26|0,y=u%26;n[u]=w.words[d]>>>y&1}return n}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,u=0;u<this.length;u++){var d=this._zeroBits(this.words[u]);if(n+=d,d!==26)break}return n},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},a.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var u=0;u<n.length;u++)this.words[u]=this.words[u]|n.words[u];return this._strip()},a.prototype.ior=function(n){return s((this.negative|n.negative)===0),this.iuor(n)},a.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},a.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},a.prototype.iuand=function(n){var u;this.length>n.length?u=n:u=this;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]&n.words[d];return this.length=u.length,this._strip()},a.prototype.iand=function(n){return s((this.negative|n.negative)===0),this.iuand(n)},a.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},a.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},a.prototype.iuxor=function(n){var u,d;this.length>n.length?(u=this,d=n):(u=n,d=this);for(var y=0;y<d.length;y++)this.words[y]=u.words[y]^d.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this._strip()},a.prototype.ixor=function(n){return s((this.negative|n.negative)===0),this.iuxor(n)},a.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},a.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},a.prototype.inotn=function(n){s(typeof n=="number"&&n>=0);var u=Math.ceil(n/26)|0,d=n%26;this._expand(u),d>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return d>0&&(this.words[y]=~this.words[y]&67108863>>26-d),this._strip()},a.prototype.notn=function(n){return this.clone().inotn(n)},a.prototype.setn=function(n,u){s(typeof n=="number"&&n>=0);var d=n/26|0,y=n%26;return this._expand(d+1),u?this.words[d]=this.words[d]|1<<y:this.words[d]=this.words[d]&~(1<<y),this._strip()},a.prototype.iadd=function(n){var u;if(this.negative!==0&&n.negative===0)return this.negative=0,u=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,u=this.isub(n),n.negative=1,u._normSign();var d,y;this.length>n.length?(d=this,y=n):(d=n,y=this);for(var b=0,f=0;f<y.length;f++)u=(d.words[f]|0)+(y.words[f]|0)+b,this.words[f]=u&67108863,b=u>>>26;for(;b!==0&&f<d.length;f++)u=(d.words[f]|0)+b,this.words[f]=u&67108863,b=u>>>26;if(this.length=d.length,b!==0)this.words[this.length]=b,this.length++;else if(d!==this)for(;f<d.length;f++)this.words[f]=d.words[f];return this},a.prototype.add=function(n){var u;return n.negative!==0&&this.negative===0?(n.negative=0,u=this.sub(n),n.negative^=1,u):n.negative===0&&this.negative!==0?(this.negative=0,u=n.sub(this),this.negative=1,u):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},a.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var u=this.iadd(n);return n.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var d=this.cmp(n);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,b;d>0?(y=this,b=n):(y=n,b=this);for(var f=0,h=0;h<b.length;h++)u=(y.words[h]|0)-(b.words[h]|0)+f,f=u>>26,this.words[h]=u&67108863;for(;f!==0&&h<y.length;h++)u=(y.words[h]|0)+f,f=u>>26,this.words[h]=u&67108863;if(f===0&&h<y.length&&y!==this)for(;h<y.length;h++)this.words[h]=y.words[h];return this.length=Math.max(this.length,h),y!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(n){return this.clone().isub(n)};function L(w,n,u){u.negative=n.negative^w.negative;var d=w.length+n.length|0;u.length=d,d=d-1|0;var y=w.words[0]|0,b=n.words[0]|0,f=y*b,h=f&67108863,g=f/67108864|0;u.words[0]=h;for(var o=1;o<d;o++){for(var m=g>>>26,R=g&67108863,N=Math.min(o,n.length-1),k=Math.max(0,o-w.length+1);k<=N;k++){var $=o-k|0;y=w.words[$]|0,b=n.words[k]|0,f=y*b+R,m+=f/67108864|0,R=f&67108863}u.words[o]=R|0,g=m|0}return g!==0?u.words[o]=g|0:u.length--,u._strip()}var q=function(n,u,d){var y=n.words,b=u.words,f=d.words,h=0,g,o,m,R=y[0]|0,N=R&8191,k=R>>>13,$=y[1]|0,K=$&8191,G=$>>>13,le=y[2]|0,Q=le&8191,re=le>>>13,ne=y[3]|0,ie=ne&8191,se=ne>>>13,Ye=y[4]|0,oe=Ye&8191,ue=Ye>>>13,Ge=y[5]|0,me=Ge&8191,we=Ge>>>13,kt=y[6]|0,pe=kt&8191,ye=kt>>>13,vt=y[7]|0,he=vt&8191,ae=vt>>>13,de=y[8]|0,z=de&8191,ce=de>>>13,Tt=y[9]|0,X=Tt&8191,ve=Tt>>>13,Ht=b[0]|0,be=Ht&8191,Oe=Ht>>>13,Pn=b[1]|0,Ee=Pn&8191,ke=Pn>>>13,jn=b[2]|0,Te=jn&8191,Be=jn>>>13,Ln=b[3]|0,Re=Ln&8191,Ne=Ln>>>13,Fn=b[4]|0,Pe=Fn&8191,je=Fn>>>13,qn=b[5]|0,Le=qn&8191,Fe=qn>>>13,Dn=b[6]|0,qe=Dn&8191,De=Dn>>>13,Un=b[7]|0,Ue=Un&8191,xe=Un>>>13,xn=b[8]|0,We=xn&8191,Ve=xn>>>13,Wn=b[9]|0,$e=Wn&8191,Ze=Wn>>>13;d.negative=n.negative^u.negative,d.length=19,g=Math.imul(N,be),o=Math.imul(N,Oe),o=o+Math.imul(k,be)|0,m=Math.imul(k,Oe);var $r=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+($r>>>26)|0,$r&=67108863,g=Math.imul(K,be),o=Math.imul(K,Oe),o=o+Math.imul(G,be)|0,m=Math.imul(G,Oe),g=g+Math.imul(N,Ee)|0,o=o+Math.imul(N,ke)|0,o=o+Math.imul(k,Ee)|0,m=m+Math.imul(k,ke)|0;var Zr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,g=Math.imul(Q,be),o=Math.imul(Q,Oe),o=o+Math.imul(re,be)|0,m=Math.imul(re,Oe),g=g+Math.imul(K,Ee)|0,o=o+Math.imul(K,ke)|0,o=o+Math.imul(G,Ee)|0,m=m+Math.imul(G,ke)|0,g=g+Math.imul(N,Te)|0,o=o+Math.imul(N,Be)|0,o=o+Math.imul(k,Te)|0,m=m+Math.imul(k,Be)|0;var Kr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(ie,be),o=Math.imul(ie,Oe),o=o+Math.imul(se,be)|0,m=Math.imul(se,Oe),g=g+Math.imul(Q,Ee)|0,o=o+Math.imul(Q,ke)|0,o=o+Math.imul(re,Ee)|0,m=m+Math.imul(re,ke)|0,g=g+Math.imul(K,Te)|0,o=o+Math.imul(K,Be)|0,o=o+Math.imul(G,Te)|0,m=m+Math.imul(G,Be)|0,g=g+Math.imul(N,Re)|0,o=o+Math.imul(N,Ne)|0,o=o+Math.imul(k,Re)|0,m=m+Math.imul(k,Ne)|0;var zr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(oe,be),o=Math.imul(oe,Oe),o=o+Math.imul(ue,be)|0,m=Math.imul(ue,Oe),g=g+Math.imul(ie,Ee)|0,o=o+Math.imul(ie,ke)|0,o=o+Math.imul(se,Ee)|0,m=m+Math.imul(se,ke)|0,g=g+Math.imul(Q,Te)|0,o=o+Math.imul(Q,Be)|0,o=o+Math.imul(re,Te)|0,m=m+Math.imul(re,Be)|0,g=g+Math.imul(K,Re)|0,o=o+Math.imul(K,Ne)|0,o=o+Math.imul(G,Re)|0,m=m+Math.imul(G,Ne)|0,g=g+Math.imul(N,Pe)|0,o=o+Math.imul(N,je)|0,o=o+Math.imul(k,Pe)|0,m=m+Math.imul(k,je)|0;var Xr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,g=Math.imul(me,be),o=Math.imul(me,Oe),o=o+Math.imul(we,be)|0,m=Math.imul(we,Oe),g=g+Math.imul(oe,Ee)|0,o=o+Math.imul(oe,ke)|0,o=o+Math.imul(ue,Ee)|0,m=m+Math.imul(ue,ke)|0,g=g+Math.imul(ie,Te)|0,o=o+Math.imul(ie,Be)|0,o=o+Math.imul(se,Te)|0,m=m+Math.imul(se,Be)|0,g=g+Math.imul(Q,Re)|0,o=o+Math.imul(Q,Ne)|0,o=o+Math.imul(re,Re)|0,m=m+Math.imul(re,Ne)|0,g=g+Math.imul(K,Pe)|0,o=o+Math.imul(K,je)|0,o=o+Math.imul(G,Pe)|0,m=m+Math.imul(G,je)|0,g=g+Math.imul(N,Le)|0,o=o+Math.imul(N,Fe)|0,o=o+Math.imul(k,Le)|0,m=m+Math.imul(k,Fe)|0;var Yr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,g=Math.imul(pe,be),o=Math.imul(pe,Oe),o=o+Math.imul(ye,be)|0,m=Math.imul(ye,Oe),g=g+Math.imul(me,Ee)|0,o=o+Math.imul(me,ke)|0,o=o+Math.imul(we,Ee)|0,m=m+Math.imul(we,ke)|0,g=g+Math.imul(oe,Te)|0,o=o+Math.imul(oe,Be)|0,o=o+Math.imul(ue,Te)|0,m=m+Math.imul(ue,Be)|0,g=g+Math.imul(ie,Re)|0,o=o+Math.imul(ie,Ne)|0,o=o+Math.imul(se,Re)|0,m=m+Math.imul(se,Ne)|0,g=g+Math.imul(Q,Pe)|0,o=o+Math.imul(Q,je)|0,o=o+Math.imul(re,Pe)|0,m=m+Math.imul(re,je)|0,g=g+Math.imul(K,Le)|0,o=o+Math.imul(K,Fe)|0,o=o+Math.imul(G,Le)|0,m=m+Math.imul(G,Fe)|0,g=g+Math.imul(N,qe)|0,o=o+Math.imul(N,De)|0,o=o+Math.imul(k,qe)|0,m=m+Math.imul(k,De)|0;var Jr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,g=Math.imul(he,be),o=Math.imul(he,Oe),o=o+Math.imul(ae,be)|0,m=Math.imul(ae,Oe),g=g+Math.imul(pe,Ee)|0,o=o+Math.imul(pe,ke)|0,o=o+Math.imul(ye,Ee)|0,m=m+Math.imul(ye,ke)|0,g=g+Math.imul(me,Te)|0,o=o+Math.imul(me,Be)|0,o=o+Math.imul(we,Te)|0,m=m+Math.imul(we,Be)|0,g=g+Math.imul(oe,Re)|0,o=o+Math.imul(oe,Ne)|0,o=o+Math.imul(ue,Re)|0,m=m+Math.imul(ue,Ne)|0,g=g+Math.imul(ie,Pe)|0,o=o+Math.imul(ie,je)|0,o=o+Math.imul(se,Pe)|0,m=m+Math.imul(se,je)|0,g=g+Math.imul(Q,Le)|0,o=o+Math.imul(Q,Fe)|0,o=o+Math.imul(re,Le)|0,m=m+Math.imul(re,Fe)|0,g=g+Math.imul(K,qe)|0,o=o+Math.imul(K,De)|0,o=o+Math.imul(G,qe)|0,m=m+Math.imul(G,De)|0,g=g+Math.imul(N,Ue)|0,o=o+Math.imul(N,xe)|0,o=o+Math.imul(k,Ue)|0,m=m+Math.imul(k,xe)|0;var Hr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,g=Math.imul(z,be),o=Math.imul(z,Oe),o=o+Math.imul(ce,be)|0,m=Math.imul(ce,Oe),g=g+Math.imul(he,Ee)|0,o=o+Math.imul(he,ke)|0,o=o+Math.imul(ae,Ee)|0,m=m+Math.imul(ae,ke)|0,g=g+Math.imul(pe,Te)|0,o=o+Math.imul(pe,Be)|0,o=o+Math.imul(ye,Te)|0,m=m+Math.imul(ye,Be)|0,g=g+Math.imul(me,Re)|0,o=o+Math.imul(me,Ne)|0,o=o+Math.imul(we,Re)|0,m=m+Math.imul(we,Ne)|0,g=g+Math.imul(oe,Pe)|0,o=o+Math.imul(oe,je)|0,o=o+Math.imul(ue,Pe)|0,m=m+Math.imul(ue,je)|0,g=g+Math.imul(ie,Le)|0,o=o+Math.imul(ie,Fe)|0,o=o+Math.imul(se,Le)|0,m=m+Math.imul(se,Fe)|0,g=g+Math.imul(Q,qe)|0,o=o+Math.imul(Q,De)|0,o=o+Math.imul(re,qe)|0,m=m+Math.imul(re,De)|0,g=g+Math.imul(K,Ue)|0,o=o+Math.imul(K,xe)|0,o=o+Math.imul(G,Ue)|0,m=m+Math.imul(G,xe)|0,g=g+Math.imul(N,We)|0,o=o+Math.imul(N,Ve)|0,o=o+Math.imul(k,We)|0,m=m+Math.imul(k,Ve)|0;var Gr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,g=Math.imul(X,be),o=Math.imul(X,Oe),o=o+Math.imul(ve,be)|0,m=Math.imul(ve,Oe),g=g+Math.imul(z,Ee)|0,o=o+Math.imul(z,ke)|0,o=o+Math.imul(ce,Ee)|0,m=m+Math.imul(ce,ke)|0,g=g+Math.imul(he,Te)|0,o=o+Math.imul(he,Be)|0,o=o+Math.imul(ae,Te)|0,m=m+Math.imul(ae,Be)|0,g=g+Math.imul(pe,Re)|0,o=o+Math.imul(pe,Ne)|0,o=o+Math.imul(ye,Re)|0,m=m+Math.imul(ye,Ne)|0,g=g+Math.imul(me,Pe)|0,o=o+Math.imul(me,je)|0,o=o+Math.imul(we,Pe)|0,m=m+Math.imul(we,je)|0,g=g+Math.imul(oe,Le)|0,o=o+Math.imul(oe,Fe)|0,o=o+Math.imul(ue,Le)|0,m=m+Math.imul(ue,Fe)|0,g=g+Math.imul(ie,qe)|0,o=o+Math.imul(ie,De)|0,o=o+Math.imul(se,qe)|0,m=m+Math.imul(se,De)|0,g=g+Math.imul(Q,Ue)|0,o=o+Math.imul(Q,xe)|0,o=o+Math.imul(re,Ue)|0,m=m+Math.imul(re,xe)|0,g=g+Math.imul(K,We)|0,o=o+Math.imul(K,Ve)|0,o=o+Math.imul(G,We)|0,m=m+Math.imul(G,Ve)|0,g=g+Math.imul(N,$e)|0,o=o+Math.imul(N,Ze)|0,o=o+Math.imul(k,$e)|0,m=m+Math.imul(k,Ze)|0;var Qr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,g=Math.imul(X,Ee),o=Math.imul(X,ke),o=o+Math.imul(ve,Ee)|0,m=Math.imul(ve,ke),g=g+Math.imul(z,Te)|0,o=o+Math.imul(z,Be)|0,o=o+Math.imul(ce,Te)|0,m=m+Math.imul(ce,Be)|0,g=g+Math.imul(he,Re)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(ae,Re)|0,m=m+Math.imul(ae,Ne)|0,g=g+Math.imul(pe,Pe)|0,o=o+Math.imul(pe,je)|0,o=o+Math.imul(ye,Pe)|0,m=m+Math.imul(ye,je)|0,g=g+Math.imul(me,Le)|0,o=o+Math.imul(me,Fe)|0,o=o+Math.imul(we,Le)|0,m=m+Math.imul(we,Fe)|0,g=g+Math.imul(oe,qe)|0,o=o+Math.imul(oe,De)|0,o=o+Math.imul(ue,qe)|0,m=m+Math.imul(ue,De)|0,g=g+Math.imul(ie,Ue)|0,o=o+Math.imul(ie,xe)|0,o=o+Math.imul(se,Ue)|0,m=m+Math.imul(se,xe)|0,g=g+Math.imul(Q,We)|0,o=o+Math.imul(Q,Ve)|0,o=o+Math.imul(re,We)|0,m=m+Math.imul(re,Ve)|0,g=g+Math.imul(K,$e)|0,o=o+Math.imul(K,Ze)|0,o=o+Math.imul(G,$e)|0,m=m+Math.imul(G,Ze)|0;var en=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(en>>>26)|0,en&=67108863,g=Math.imul(X,Te),o=Math.imul(X,Be),o=o+Math.imul(ve,Te)|0,m=Math.imul(ve,Be),g=g+Math.imul(z,Re)|0,o=o+Math.imul(z,Ne)|0,o=o+Math.imul(ce,Re)|0,m=m+Math.imul(ce,Ne)|0,g=g+Math.imul(he,Pe)|0,o=o+Math.imul(he,je)|0,o=o+Math.imul(ae,Pe)|0,m=m+Math.imul(ae,je)|0,g=g+Math.imul(pe,Le)|0,o=o+Math.imul(pe,Fe)|0,o=o+Math.imul(ye,Le)|0,m=m+Math.imul(ye,Fe)|0,g=g+Math.imul(me,qe)|0,o=o+Math.imul(me,De)|0,o=o+Math.imul(we,qe)|0,m=m+Math.imul(we,De)|0,g=g+Math.imul(oe,Ue)|0,o=o+Math.imul(oe,xe)|0,o=o+Math.imul(ue,Ue)|0,m=m+Math.imul(ue,xe)|0,g=g+Math.imul(ie,We)|0,o=o+Math.imul(ie,Ve)|0,o=o+Math.imul(se,We)|0,m=m+Math.imul(se,Ve)|0,g=g+Math.imul(Q,$e)|0,o=o+Math.imul(Q,Ze)|0,o=o+Math.imul(re,$e)|0,m=m+Math.imul(re,Ze)|0;var tn=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(tn>>>26)|0,tn&=67108863,g=Math.imul(X,Re),o=Math.imul(X,Ne),o=o+Math.imul(ve,Re)|0,m=Math.imul(ve,Ne),g=g+Math.imul(z,Pe)|0,o=o+Math.imul(z,je)|0,o=o+Math.imul(ce,Pe)|0,m=m+Math.imul(ce,je)|0,g=g+Math.imul(he,Le)|0,o=o+Math.imul(he,Fe)|0,o=o+Math.imul(ae,Le)|0,m=m+Math.imul(ae,Fe)|0,g=g+Math.imul(pe,qe)|0,o=o+Math.imul(pe,De)|0,o=o+Math.imul(ye,qe)|0,m=m+Math.imul(ye,De)|0,g=g+Math.imul(me,Ue)|0,o=o+Math.imul(me,xe)|0,o=o+Math.imul(we,Ue)|0,m=m+Math.imul(we,xe)|0,g=g+Math.imul(oe,We)|0,o=o+Math.imul(oe,Ve)|0,o=o+Math.imul(ue,We)|0,m=m+Math.imul(ue,Ve)|0,g=g+Math.imul(ie,$e)|0,o=o+Math.imul(ie,Ze)|0,o=o+Math.imul(se,$e)|0,m=m+Math.imul(se,Ze)|0;var rn=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(rn>>>26)|0,rn&=67108863,g=Math.imul(X,Pe),o=Math.imul(X,je),o=o+Math.imul(ve,Pe)|0,m=Math.imul(ve,je),g=g+Math.imul(z,Le)|0,o=o+Math.imul(z,Fe)|0,o=o+Math.imul(ce,Le)|0,m=m+Math.imul(ce,Fe)|0,g=g+Math.imul(he,qe)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(ae,qe)|0,m=m+Math.imul(ae,De)|0,g=g+Math.imul(pe,Ue)|0,o=o+Math.imul(pe,xe)|0,o=o+Math.imul(ye,Ue)|0,m=m+Math.imul(ye,xe)|0,g=g+Math.imul(me,We)|0,o=o+Math.imul(me,Ve)|0,o=o+Math.imul(we,We)|0,m=m+Math.imul(we,Ve)|0,g=g+Math.imul(oe,$e)|0,o=o+Math.imul(oe,Ze)|0,o=o+Math.imul(ue,$e)|0,m=m+Math.imul(ue,Ze)|0;var nn=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(nn>>>26)|0,nn&=67108863,g=Math.imul(X,Le),o=Math.imul(X,Fe),o=o+Math.imul(ve,Le)|0,m=Math.imul(ve,Fe),g=g+Math.imul(z,qe)|0,o=o+Math.imul(z,De)|0,o=o+Math.imul(ce,qe)|0,m=m+Math.imul(ce,De)|0,g=g+Math.imul(he,Ue)|0,o=o+Math.imul(he,xe)|0,o=o+Math.imul(ae,Ue)|0,m=m+Math.imul(ae,xe)|0,g=g+Math.imul(pe,We)|0,o=o+Math.imul(pe,Ve)|0,o=o+Math.imul(ye,We)|0,m=m+Math.imul(ye,Ve)|0,g=g+Math.imul(me,$e)|0,o=o+Math.imul(me,Ze)|0,o=o+Math.imul(we,$e)|0,m=m+Math.imul(we,Ze)|0;var sn=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(sn>>>26)|0,sn&=67108863,g=Math.imul(X,qe),o=Math.imul(X,De),o=o+Math.imul(ve,qe)|0,m=Math.imul(ve,De),g=g+Math.imul(z,Ue)|0,o=o+Math.imul(z,xe)|0,o=o+Math.imul(ce,Ue)|0,m=m+Math.imul(ce,xe)|0,g=g+Math.imul(he,We)|0,o=o+Math.imul(he,Ve)|0,o=o+Math.imul(ae,We)|0,m=m+Math.imul(ae,Ve)|0,g=g+Math.imul(pe,$e)|0,o=o+Math.imul(pe,Ze)|0,o=o+Math.imul(ye,$e)|0,m=m+Math.imul(ye,Ze)|0;var on=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(on>>>26)|0,on&=67108863,g=Math.imul(X,Ue),o=Math.imul(X,xe),o=o+Math.imul(ve,Ue)|0,m=Math.imul(ve,xe),g=g+Math.imul(z,We)|0,o=o+Math.imul(z,Ve)|0,o=o+Math.imul(ce,We)|0,m=m+Math.imul(ce,Ve)|0,g=g+Math.imul(he,$e)|0,o=o+Math.imul(he,Ze)|0,o=o+Math.imul(ae,$e)|0,m=m+Math.imul(ae,Ze)|0;var an=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(an>>>26)|0,an&=67108863,g=Math.imul(X,We),o=Math.imul(X,Ve),o=o+Math.imul(ve,We)|0,m=Math.imul(ve,Ve),g=g+Math.imul(z,$e)|0,o=o+Math.imul(z,Ze)|0,o=o+Math.imul(ce,$e)|0,m=m+Math.imul(ce,Ze)|0;var ln=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(ln>>>26)|0,ln&=67108863,g=Math.imul(X,$e),o=Math.imul(X,Ze),o=o+Math.imul(ve,$e)|0,m=Math.imul(ve,Ze);var un=(h+g|0)+((o&8191)<<13)|0;return h=(m+(o>>>13)|0)+(un>>>26)|0,un&=67108863,f[0]=$r,f[1]=Zr,f[2]=Kr,f[3]=zr,f[4]=Xr,f[5]=Yr,f[6]=Jr,f[7]=Hr,f[8]=Gr,f[9]=Qr,f[10]=en,f[11]=tn,f[12]=rn,f[13]=nn,f[14]=sn,f[15]=on,f[16]=an,f[17]=ln,f[18]=un,h!==0&&(f[19]=h,d.length++),d};Math.imul||(q=L);function T(w,n,u){u.negative=n.negative^w.negative,u.length=w.length+n.length;for(var d=0,y=0,b=0;b<u.length-1;b++){var f=y;y=0;for(var h=d&67108863,g=Math.min(b,n.length-1),o=Math.max(0,b-w.length+1);o<=g;o++){var m=b-o,R=w.words[m]|0,N=n.words[o]|0,k=R*N,$=k&67108863;f=f+(k/67108864|0)|0,$=$+h|0,h=$&67108863,f=f+($>>>26)|0,y+=f>>>26,f&=67108863}u.words[b]=h,d=f,f=y}return d!==0?u.words[b]=d:u.length--,u._strip()}function te(w,n,u){return T(w,n,u)}a.prototype.mulTo=function(n,u){var d,y=this.length+n.length;return this.length===10&&n.length===10?d=q(this,n,u):y<63?d=L(this,n,u):y<1024?d=T(this,n,u):d=te(this,n,u),d},a.prototype.mul=function(n){var u=new a(null);return u.words=new Array(this.length+n.length),this.mulTo(n,u)},a.prototype.mulf=function(n){var u=new a(null);return u.words=new Array(this.length+n.length),te(this,n,u)},a.prototype.imul=function(n){return this.clone().mulTo(n,this)},a.prototype.imuln=function(n){var u=n<0;u&&(n=-n),s(typeof n=="number"),s(n<67108864);for(var d=0,y=0;y<this.length;y++){var b=(this.words[y]|0)*n,f=(b&67108863)+(d&67108863);d>>=26,d+=b/67108864|0,d+=f>>>26,this.words[y]=f&67108863}return d!==0&&(this.words[y]=d,this.length++),u?this.ineg():this},a.prototype.muln=function(n){return this.clone().imuln(n)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(n){var u=H(n);if(u.length===0)return new a(1);for(var d=this,y=0;y<u.length&&u[y]===0;y++,d=d.sqr());if(++y<u.length)for(var b=d.sqr();y<u.length;y++,b=b.sqr())u[y]!==0&&(d=d.mul(b));return d},a.prototype.iushln=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26,y=67108863>>>26-u<<26-u,b;if(u!==0){var f=0;for(b=0;b<this.length;b++){var h=this.words[b]&y,g=(this.words[b]|0)-h<<u;this.words[b]=g|f,f=h>>>26-u}f&&(this.words[b]=f,this.length++)}if(d!==0){for(b=this.length-1;b>=0;b--)this.words[b+d]=this.words[b];for(b=0;b<d;b++)this.words[b]=0;this.length+=d}return this._strip()},a.prototype.ishln=function(n){return s(this.negative===0),this.iushln(n)},a.prototype.iushrn=function(n,u,d){s(typeof n=="number"&&n>=0);var y;u?y=(u-u%26)/26:y=0;var b=n%26,f=Math.min((n-b)/26,this.length),h=67108863^67108863>>>b<<b,g=d;if(y-=f,y=Math.max(0,y),g){for(var o=0;o<f;o++)g.words[o]=this.words[o];g.length=f}if(f!==0)if(this.length>f)for(this.length-=f,o=0;o<this.length;o++)this.words[o]=this.words[o+f];else this.words[0]=0,this.length=1;var m=0;for(o=this.length-1;o>=0&&(m!==0||o>=y);o--){var R=this.words[o]|0;this.words[o]=m<<26-b|R>>>b,m=R&h}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(n,u,d){return s(this.negative===0),this.iushrn(n,u,d)},a.prototype.shln=function(n){return this.clone().ishln(n)},a.prototype.ushln=function(n){return this.clone().iushln(n)},a.prototype.shrn=function(n){return this.clone().ishrn(n)},a.prototype.ushrn=function(n){return this.clone().iushrn(n)},a.prototype.testn=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26,y=1<<u;if(this.length<=d)return!1;var b=this.words[d];return!!(b&y)},a.prototype.imaskn=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(u!==0&&d++,this.length=Math.min(d,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this._strip()},a.prototype.maskn=function(n){return this.clone().imaskn(n)},a.prototype.iaddn=function(n){return s(typeof n=="number"),s(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},a.prototype._iaddn=function(n){this.words[0]+=n;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},a.prototype.isubn=function(n){if(s(typeof n=="number"),s(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},a.prototype.addn=function(n){return this.clone().iaddn(n)},a.prototype.subn=function(n){return this.clone().isubn(n)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(n,u,d){var y=n.length+d,b;this._expand(y);var f,h=0;for(b=0;b<n.length;b++){f=(this.words[b+d]|0)+h;var g=(n.words[b]|0)*u;f-=g&67108863,h=(f>>26)-(g/67108864|0),this.words[b+d]=f&67108863}for(;b<this.length-d;b++)f=(this.words[b+d]|0)+h,h=f>>26,this.words[b+d]=f&67108863;if(h===0)return this._strip();for(s(h===-1),h=0,b=0;b<this.length;b++)f=-(this.words[b]|0)+h,h=f>>26,this.words[b]=f&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(n,u){var d=this.length-n.length,y=this.clone(),b=n,f=b.words[b.length-1]|0,h=this._countBits(f);d=26-h,d!==0&&(b=b.ushln(d),y.iushln(d),f=b.words[b.length-1]|0);var g=y.length-b.length,o;if(u!=="mod"){o=new a(null),o.length=g+1,o.words=new Array(o.length);for(var m=0;m<o.length;m++)o.words[m]=0}var R=y.clone()._ishlnsubmul(b,1,g);R.negative===0&&(y=R,o&&(o.words[g]=1));for(var N=g-1;N>=0;N--){var k=(y.words[b.length+N]|0)*67108864+(y.words[b.length+N-1]|0);for(k=Math.min(k/f|0,67108863),y._ishlnsubmul(b,k,N);y.negative!==0;)k--,y.negative=0,y._ishlnsubmul(b,1,N),y.isZero()||(y.negative^=1);o&&(o.words[N]=k)}return o&&o._strip(),y._strip(),u!=="div"&&d!==0&&y.iushrn(d),{div:o||null,mod:y}},a.prototype.divmod=function(n,u,d){if(s(!n.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,b,f;return this.negative!==0&&n.negative===0?(f=this.neg().divmod(n,u),u!=="mod"&&(y=f.div.neg()),u!=="div"&&(b=f.mod.neg(),d&&b.negative!==0&&b.iadd(n)),{div:y,mod:b}):this.negative===0&&n.negative!==0?(f=this.divmod(n.neg(),u),u!=="mod"&&(y=f.div.neg()),{div:y,mod:f.mod}):this.negative&n.negative?(f=this.neg().divmod(n.neg(),u),u!=="div"&&(b=f.mod.neg(),d&&b.negative!==0&&b.isub(n)),{div:f.div,mod:b}):n.length>this.length||this.cmp(n)<0?{div:new a(0),mod:this}:n.length===1?u==="div"?{div:this.divn(n.words[0]),mod:null}:u==="mod"?{div:null,mod:new a(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new a(this.modrn(n.words[0]))}:this._wordDiv(n,u)},a.prototype.div=function(n){return this.divmod(n,"div",!1).div},a.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},a.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},a.prototype.divRound=function(n){var u=this.divmod(n);if(u.mod.isZero())return u.div;var d=u.div.negative!==0?u.mod.isub(n):u.mod,y=n.ushrn(1),b=n.andln(1),f=d.cmp(y);return f<0||b===1&&f===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},a.prototype.modrn=function(n){var u=n<0;u&&(n=-n),s(n<=67108863);for(var d=(1<<26)%n,y=0,b=this.length-1;b>=0;b--)y=(d*y+(this.words[b]|0))%n;return u?-y:y},a.prototype.modn=function(n){return this.modrn(n)},a.prototype.idivn=function(n){var u=n<0;u&&(n=-n),s(n<=67108863);for(var d=0,y=this.length-1;y>=0;y--){var b=(this.words[y]|0)+d*67108864;this.words[y]=b/n|0,d=b%n}return this._strip(),u?this.ineg():this},a.prototype.divn=function(n){return this.clone().idivn(n)},a.prototype.egcd=function(n){s(n.negative===0),s(!n.isZero());var u=this,d=n.clone();u.negative!==0?u=u.umod(n):u=u.clone();for(var y=new a(1),b=new a(0),f=new a(0),h=new a(1),g=0;u.isEven()&&d.isEven();)u.iushrn(1),d.iushrn(1),++g;for(var o=d.clone(),m=u.clone();!u.isZero();){for(var R=0,N=1;!(u.words[0]&N)&&R<26;++R,N<<=1);if(R>0)for(u.iushrn(R);R-- >0;)(y.isOdd()||b.isOdd())&&(y.iadd(o),b.isub(m)),y.iushrn(1),b.iushrn(1);for(var k=0,$=1;!(d.words[0]&$)&&k<26;++k,$<<=1);if(k>0)for(d.iushrn(k);k-- >0;)(f.isOdd()||h.isOdd())&&(f.iadd(o),h.isub(m)),f.iushrn(1),h.iushrn(1);u.cmp(d)>=0?(u.isub(d),y.isub(f),b.isub(h)):(d.isub(u),f.isub(y),h.isub(b))}return{a:f,b:h,gcd:d.iushln(g)}},a.prototype._invmp=function(n){s(n.negative===0),s(!n.isZero());var u=this,d=n.clone();u.negative!==0?u=u.umod(n):u=u.clone();for(var y=new a(1),b=new a(0),f=d.clone();u.cmpn(1)>0&&d.cmpn(1)>0;){for(var h=0,g=1;!(u.words[0]&g)&&h<26;++h,g<<=1);if(h>0)for(u.iushrn(h);h-- >0;)y.isOdd()&&y.iadd(f),y.iushrn(1);for(var o=0,m=1;!(d.words[0]&m)&&o<26;++o,m<<=1);if(o>0)for(d.iushrn(o);o-- >0;)b.isOdd()&&b.iadd(f),b.iushrn(1);u.cmp(d)>=0?(u.isub(d),y.isub(b)):(d.isub(u),b.isub(y))}var R;return u.cmpn(1)===0?R=y:R=b,R.cmpn(0)<0&&R.iadd(n),R},a.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var u=this.clone(),d=n.clone();u.negative=0,d.negative=0;for(var y=0;u.isEven()&&d.isEven();y++)u.iushrn(1),d.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;d.isEven();)d.iushrn(1);var b=u.cmp(d);if(b<0){var f=u;u=d,d=f}else if(b===0||d.cmpn(1)===0)break;u.isub(d)}while(!0);return d.iushln(y)},a.prototype.invm=function(n){return this.egcd(n).a.umod(n)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(n){return this.words[0]&n},a.prototype.bincn=function(n){s(typeof n=="number");var u=n%26,d=(n-u)/26,y=1<<u;if(this.length<=d)return this._expand(d+1),this.words[d]|=y,this;for(var b=y,f=d;b!==0&&f<this.length;f++){var h=this.words[f]|0;h+=b,b=h>>>26,h&=67108863,this.words[f]=h}return b!==0&&(this.words[f]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(n){var u=n<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var d;if(this.length>1)d=1;else{u&&(n=-n),s(n<=67108863,"Number is too big");var y=this.words[0]|0;d=y===n?0:y<n?-1:1}return this.negative!==0?-d|0:d},a.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var u=this.ucmp(n);return this.negative!==0?-u|0:u},a.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var u=0,d=this.length-1;d>=0;d--){var y=this.words[d]|0,b=n.words[d]|0;if(y!==b){y<b?u=-1:y>b&&(u=1);break}}return u},a.prototype.gtn=function(n){return this.cmpn(n)===1},a.prototype.gt=function(n){return this.cmp(n)===1},a.prototype.gten=function(n){return this.cmpn(n)>=0},a.prototype.gte=function(n){return this.cmp(n)>=0},a.prototype.ltn=function(n){return this.cmpn(n)===-1},a.prototype.lt=function(n){return this.cmp(n)===-1},a.prototype.lten=function(n){return this.cmpn(n)<=0},a.prototype.lte=function(n){return this.cmp(n)<=0},a.prototype.eqn=function(n){return this.cmpn(n)===0},a.prototype.eq=function(n){return this.cmp(n)===0},a.red=function(n){return new U(n)},a.prototype.toRed=function(n){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(n){return this.red=n,this},a.prototype.forceRed=function(n){return s(!this.red,"Already a number in reduction context"),this._forceRed(n)},a.prototype.redAdd=function(n){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},a.prototype.redIAdd=function(n){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},a.prototype.redSub=function(n){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},a.prototype.redISub=function(n){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},a.prototype.redShl=function(n){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},a.prototype.redMul=function(n){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},a.prototype.redIMul=function(n){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(n){return s(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var W={k256:null,p224:null,p192:null,p25519:null};function E(w,n){this.name=w,this.p=new a(n,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var n=new a(null);return n.words=new Array(Math.ceil(this.n/13)),n},E.prototype.ireduce=function(n){var u=n,d;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),d=u.bitLength();while(d>this.n);var y=d<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},E.prototype.split=function(n,u){n.iushrn(this.n,0,u)},E.prototype.imulK=function(n){return n.imul(this.k)};function C(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(C,E),C.prototype.split=function(n,u){for(var d=4194303,y=Math.min(n.length,9),b=0;b<y;b++)u.words[b]=n.words[b];if(u.length=y,n.length<=9){n.words[0]=0,n.length=1;return}var f=n.words[9];for(u.words[u.length++]=f&d,b=10;b<n.length;b++){var h=n.words[b]|0;n.words[b-10]=(h&d)<<4|f>>>22,f=h}f>>>=22,n.words[b-10]=f,f===0&&n.length>10?n.length-=10:n.length-=9},C.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var u=0,d=0;d<n.length;d++){var y=n.words[d]|0;u+=y*977,n.words[d]=u&67108863,u=y*64+(u/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function I(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(I,E);function B(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(B,E);function J(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(J,E),J.prototype.imulK=function(n){for(var u=0,d=0;d<n.length;d++){var y=(n.words[d]|0)*19+u,b=y&67108863;y>>>=26,n.words[d]=b,u=y}return u!==0&&(n.words[n.length++]=u),n},a._prime=function(n){if(W[n])return W[n];var u;if(n==="k256")u=new C;else if(n==="p224")u=new I;else if(n==="p192")u=new B;else if(n==="p25519")u=new J;else throw new Error("Unknown prime "+n);return W[n]=u,u};function U(w){if(typeof w=="string"){var n=a._prime(w);this.m=n.p,this.prime=n}else s(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}U.prototype._verify1=function(n){s(n.negative===0,"red works only with positives"),s(n.red,"red works only with red numbers")},U.prototype._verify2=function(n,u){s((n.negative|u.negative)===0,"red works only with positives"),s(n.red&&n.red===u.red,"red works only with red numbers")},U.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(_(n,n.umod(this.m)._forceRed(this)),n)},U.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},U.prototype.add=function(n,u){this._verify2(n,u);var d=n.add(u);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},U.prototype.iadd=function(n,u){this._verify2(n,u);var d=n.iadd(u);return d.cmp(this.m)>=0&&d.isub(this.m),d},U.prototype.sub=function(n,u){this._verify2(n,u);var d=n.sub(u);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},U.prototype.isub=function(n,u){this._verify2(n,u);var d=n.isub(u);return d.cmpn(0)<0&&d.iadd(this.m),d},U.prototype.shl=function(n,u){return this._verify1(n),this.imod(n.ushln(u))},U.prototype.imul=function(n,u){return this._verify2(n,u),this.imod(n.imul(u))},U.prototype.mul=function(n,u){return this._verify2(n,u),this.imod(n.mul(u))},U.prototype.isqr=function(n){return this.imul(n,n.clone())},U.prototype.sqr=function(n){return this.mul(n,n)},U.prototype.sqrt=function(n){if(n.isZero())return n.clone();var u=this.m.andln(3);if(s(u%2===1),u===3){var d=this.m.add(new a(1)).iushrn(2);return this.pow(n,d)}for(var y=this.m.subn(1),b=0;!y.isZero()&&y.andln(1)===0;)b++,y.iushrn(1);s(!y.isZero());var f=new a(1).toRed(this),h=f.redNeg(),g=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new a(2*o*o).toRed(this);this.pow(o,g).cmp(h)!==0;)o.redIAdd(h);for(var m=this.pow(o,y),R=this.pow(n,y.addn(1).iushrn(1)),N=this.pow(n,y),k=b;N.cmp(f)!==0;){for(var $=N,K=0;$.cmp(f)!==0;K++)$=$.redSqr();s(K<k);var G=this.pow(m,new a(1).iushln(k-K-1));R=R.redMul(G),m=G.redSqr(),N=N.redMul(m),k=K}return R},U.prototype.invm=function(n){var u=n._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},U.prototype.pow=function(n,u){if(u.isZero())return new a(1).toRed(this);if(u.cmpn(1)===0)return n.clone();var d=4,y=new Array(1<<d);y[0]=new a(1).toRed(this),y[1]=n;for(var b=2;b<y.length;b++)y[b]=this.mul(y[b-1],n);var f=y[0],h=0,g=0,o=u.bitLength()%26;for(o===0&&(o=26),b=u.length-1;b>=0;b--){for(var m=u.words[b],R=o-1;R>=0;R--){var N=m>>R&1;if(f!==y[0]&&(f=this.sqr(f)),N===0&&h===0){g=0;continue}h<<=1,h|=N,g++,!(g!==d&&(b!==0||R!==0))&&(f=this.mul(f,y[h]),g=0,h=0)}o=26}return f},U.prototype.convertTo=function(n){var u=n.umod(this.m);return u===n?u.clone():u},U.prototype.convertFrom=function(n){var u=n.clone();return u.red=null,u},a.mont=function(n){return new x(n)};function x(w){U.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(x,U),x.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function(n){var u=this.imod(n.mul(this.rinv));return u.red=null,u},x.prototype.imul=function(n,u){if(n.isZero()||u.isZero())return n.words[0]=0,n.length=1,n;var d=n.imul(u),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=d.isub(y).iushrn(this.shift),f=b;return b.cmp(this.m)>=0?f=b.isub(this.m):b.cmpn(0)<0&&(f=b.iadd(this.m)),f._forceRed(this)},x.prototype.mul=function(n,u){if(n.isZero()||u.isZero())return new a(0)._forceRed(this);var d=n.mul(u),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=d.isub(y).iushrn(this.shift),f=b;return b.cmp(this.m)>=0?f=b.isub(this.m):b.cmpn(0)<0&&(f=b.iadd(this.m)),f._forceRed(this)},x.prototype.invm=function(n){var u=this.imod(n._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof t>"u"||t,e)}}),Wt=9e15,Ot=1e9,mn="0123456789abcdef",Lr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Fr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",wn={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Wt,maxE:Wt,crypto:!1},Di,pt,ee=!0,xr="[DecimalError] ",It=xr+"Invalid argument: ",Ui=xr+"Precision limit exceeded",xi=xr+"crypto unavailable",Wi="[object Decimal]",Qe=Math.floor,Xe=Math.pow,To=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Bo=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Ro=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Vi=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ct=1e7,Y=7,No=9007199254740991,Po=Lr.length-1,yn=Fr.length-1,O={toStringTag:Wi};O.absoluteValue=O.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Z(e)};O.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};O.clampedTo=O.clamp=function(e,t){var r,i=this,s=i.constructor;if(e=new s(e),t=new s(t),!e.s||!t.s)return new s(NaN);if(e.gt(t))throw Error(It+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new s(i)};O.comparedTo=O.cmp=function(e){var t,r,i,s,l=this,a=l.d,c=(e=new l.constructor(e)).d,p=l.s,v=e.s;if(!a||!c)return!p||!v?NaN:p!==v?p:a===c?0:!a^p<0?1:-1;if(!a[0]||!c[0])return a[0]?p:c[0]?-v:0;if(p!==v)return p;if(l.e!==e.e)return l.e>e.e^p<0?1:-1;for(i=a.length,s=c.length,t=0,r=i<s?i:s;t<r;++t)if(a[t]!==c[t])return a[t]>c[t]^p<0?1:-1;return i===s?0:i>s^p<0?1:-1};O.cosine=O.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+Y,i.rounding=1,r=jo(i,Xi(i,r)),i.precision=e,i.rounding=t,Z(pt==2||pt==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};O.cubeRoot=O.cbrt=function(){var e,t,r,i,s,l,a,c,p,v,M=this,_=M.constructor;if(!M.isFinite()||M.isZero())return new _(M);for(ee=!1,l=M.s*Xe(M.s*M,1/3),!l||Math.abs(l)==1/0?(r=He(M.d),e=M.e,(l=(e-r.length+1)%3)&&(r+=l==1||l==-2?"0":"00"),l=Xe(r,1/3),e=Qe((e+1)/3)-(e%3==(e<0?-1:2)),l==1/0?r="5e"+e:(r=l.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new _(r),i.s=M.s):i=new _(l.toString()),a=(e=_.precision)+3;;)if(c=i,p=c.times(c).times(c),v=p.plus(M),i=ge(v.plus(M).times(c),v.plus(p),a+2,1),He(c.d).slice(0,a)===(r=He(i.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!s&&r=="4999"){if(!s&&(Z(c,e+1,0),c.times(c).times(c).eq(M))){i=c;break}a+=4,s=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Z(i,e+1,1),t=!i.times(i).times(i).eq(M));break}return ee=!0,Z(i,e,_.rounding,t)};O.decimalPlaces=O.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Qe(this.e/Y))*Y,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};O.dividedBy=O.div=function(e){return ge(this,new this.constructor(e))};O.dividedToIntegerBy=O.divToInt=function(e){var t=this,r=t.constructor;return Z(ge(t,new r(e),0,1,1),r.precision,r.rounding)};O.equals=O.eq=function(e){return this.cmp(e)===0};O.floor=function(){return Z(new this.constructor(this),this.e+1,3)};O.greaterThan=O.gt=function(e){return this.cmp(e)>0};O.greaterThanOrEqualTo=O.gte=function(e){var t=this.cmp(e);return t==1||t===0};O.hyperbolicCosine=O.cosh=function(){var e,t,r,i,s,l=this,a=l.constructor,c=new a(1);if(!l.isFinite())return new a(l.s?1/0:NaN);if(l.isZero())return c;r=a.precision,i=a.rounding,a.precision=r+Math.max(l.e,l.sd())+4,a.rounding=1,s=l.d.length,s<32?(e=Math.ceil(s/3),t=(1/Vr(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),l=Xt(a,1,l.times(t),new a(1),!0);for(var p,v=e,M=new a(8);v--;)p=l.times(l),l=c.minus(p.times(M.minus(p.times(M))));return Z(l,a.precision=r,a.rounding=i,!0)};O.hyperbolicSine=O.sinh=function(){var e,t,r,i,s=this,l=s.constructor;if(!s.isFinite()||s.isZero())return new l(s);if(t=l.precision,r=l.rounding,l.precision=t+Math.max(s.e,s.sd())+4,l.rounding=1,i=s.d.length,i<3)s=Xt(l,2,s,s,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,s=s.times(1/Vr(5,e)),s=Xt(l,2,s,s,!0);for(var a,c=new l(5),p=new l(16),v=new l(20);e--;)a=s.times(s),s=s.times(c.plus(a.times(p.times(a).plus(v))))}return l.precision=t,l.rounding=r,Z(s,t,r,!0)};O.hyperbolicTangent=O.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,ge(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};O.inverseCosine=O.acos=function(){var e,t=this,r=t.constructor,i=t.abs().cmp(1),s=r.precision,l=r.rounding;return i!==-1?i===0?t.isNeg()?ut(r,s,l):new r(0):new r(NaN):t.isZero()?ut(r,s+4,l).times(.5):(r.precision=s+6,r.rounding=1,t=t.asin(),e=ut(r,s+4,l).times(.5),r.precision=s,r.rounding=l,e.minus(t))};O.inverseHyperbolicCosine=O.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,ee=!1,r=r.times(r).minus(1).sqrt().plus(r),ee=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};O.inverseHyperbolicSine=O.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,ee=!1,r=r.times(r).plus(1).sqrt().plus(r),ee=!0,i.precision=e,i.rounding=t,r.ln())};O.inverseHyperbolicTangent=O.atanh=function(){var e,t,r,i,s=this,l=s.constructor;return s.isFinite()?s.e>=0?new l(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=l.precision,t=l.rounding,i=s.sd(),Math.max(i,e)<2*-s.e-1?Z(new l(s),e,t,!0):(l.precision=r=i-s.e,s=ge(s.plus(1),new l(1).minus(s),r+e,1),l.precision=e+4,l.rounding=1,s=s.ln(),l.precision=e,l.rounding=t,s.times(.5))):new l(NaN)};O.inverseSine=O.asin=function(){var e,t,r,i,s=this,l=s.constructor;return s.isZero()?new l(s):(t=s.abs().cmp(1),r=l.precision,i=l.rounding,t!==-1?t===0?(e=ut(l,r+4,i).times(.5),e.s=s.s,e):new l(NaN):(l.precision=r+6,l.rounding=1,s=s.div(new l(1).minus(s.times(s)).sqrt().plus(1)).atan(),l.precision=r,l.rounding=i,s.times(2)))};O.inverseTangent=O.atan=function(){var e,t,r,i,s,l,a,c,p,v=this,M=v.constructor,_=M.precision,A=M.rounding;if(v.isFinite()){if(v.isZero())return new M(v);if(v.abs().eq(1)&&_+4<=yn)return a=ut(M,_+4,A).times(.25),a.s=v.s,a}else{if(!v.s)return new M(NaN);if(_+4<=yn)return a=ut(M,_+4,A).times(.5),a.s=v.s,a}for(M.precision=c=_+10,M.rounding=1,r=Math.min(28,c/Y+2|0),e=r;e;--e)v=v.div(v.times(v).plus(1).sqrt().plus(1));for(ee=!1,t=Math.ceil(c/Y),i=1,p=v.times(v),a=new M(v),s=v;e!==-1;)if(s=s.times(p),l=a.minus(s.div(i+=2)),s=s.times(p),a=l.plus(s.div(i+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===l.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),ee=!0,Z(a,M.precision=_,M.rounding=A,!0)};O.isFinite=function(){return!!this.d};O.isInteger=O.isInt=function(){return!!this.d&&Qe(this.e/Y)>this.d.length-2};O.isNaN=function(){return!this.s};O.isNegative=O.isNeg=function(){return this.s<0};O.isPositive=O.isPos=function(){return this.s>0};O.isZero=function(){return!!this.d&&this.d[0]===0};O.lessThan=O.lt=function(e){return this.cmp(e)<0};O.lessThanOrEqualTo=O.lte=function(e){return this.cmp(e)<1};O.logarithm=O.log=function(e){var t,r,i,s,l,a,c,p,v=this,M=v.constructor,_=M.precision,A=M.rounding,S=5;if(e==null)e=new M(10),t=!0;else{if(e=new M(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new M(NaN);t=e.eq(10)}if(r=v.d,v.s<0||!r||!r[0]||v.eq(1))return new M(r&&!r[0]?-1/0:v.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)l=!0;else{for(s=r[0];s%10===0;)s/=10;l=s!==1}if(ee=!1,c=_+S,a=At(v,c),i=t?qr(M,c+10):At(e,c),p=ge(a,i,c,1),fr(p.d,s=_,A))do if(c+=10,a=At(v,c),i=t?qr(M,c+10):At(e,c),p=ge(a,i,c,1),!l){+He(p.d).slice(s+1,s+15)+1==1e14&&(p=Z(p,_+1,0));break}while(fr(p.d,s+=10,A));return ee=!0,Z(p,_,A)};O.minus=O.sub=function(e){var t,r,i,s,l,a,c,p,v,M,_,A,S=this,D=S.constructor;if(e=new D(e),!S.d||!e.d)return!S.s||!e.s?e=new D(NaN):S.d?e.s=-e.s:e=new D(e.d||S.s!==e.s?S:NaN),e;if(S.s!=e.s)return e.s=-e.s,S.plus(e);if(v=S.d,A=e.d,c=D.precision,p=D.rounding,!v[0]||!A[0]){if(A[0])e.s=-e.s;else if(v[0])e=new D(S);else return new D(p===3?-0:0);return ee?Z(e,c,p):e}if(r=Qe(e.e/Y),M=Qe(S.e/Y),v=v.slice(),l=M-r,l){for(_=l<0,_?(t=v,l=-l,a=A.length):(t=A,r=M,a=v.length),i=Math.max(Math.ceil(c/Y),a)+2,l>i&&(l=i,t.length=1),t.reverse(),i=l;i--;)t.push(0);t.reverse()}else{for(i=v.length,a=A.length,_=i<a,_&&(a=i),i=0;i<a;i++)if(v[i]!=A[i]){_=v[i]<A[i];break}l=0}for(_&&(t=v,v=A,A=t,e.s=-e.s),a=v.length,i=A.length-a;i>0;--i)v[a++]=0;for(i=A.length;i>l;){if(v[--i]<A[i]){for(s=i;s&&v[--s]===0;)v[s]=ct-1;--v[s],v[i]+=ct}v[i]-=A[i]}for(;v[--a]===0;)v.pop();for(;v[0]===0;v.shift())--r;return v[0]?(e.d=v,e.e=Wr(v,r),ee?Z(e,c,p):e):new D(p===3?-0:0)};O.modulo=O.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?Z(new i(r),i.precision,i.rounding):(ee=!1,i.modulo==9?(t=ge(r,e.abs(),0,3,1),t.s*=e.s):t=ge(r,e,0,i.modulo,1),t=t.times(e),ee=!0,r.minus(t))};O.naturalExponential=O.exp=function(){return Mn(this)};O.naturalLogarithm=O.ln=function(){return At(this)};O.negated=O.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Z(e)};O.plus=O.add=function(e){var t,r,i,s,l,a,c,p,v,M,_=this,A=_.constructor;if(e=new A(e),!_.d||!e.d)return!_.s||!e.s?e=new A(NaN):_.d||(e=new A(e.d||_.s===e.s?_:NaN)),e;if(_.s!=e.s)return e.s=-e.s,_.minus(e);if(v=_.d,M=e.d,c=A.precision,p=A.rounding,!v[0]||!M[0])return M[0]||(e=new A(_)),ee?Z(e,c,p):e;if(l=Qe(_.e/Y),i=Qe(e.e/Y),v=v.slice(),s=l-i,s){for(s<0?(r=v,s=-s,a=M.length):(r=M,i=l,a=v.length),l=Math.ceil(c/Y),a=l>a?l+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=v.length,s=M.length,a-s<0&&(s=a,r=M,M=v,v=r),t=0;s;)t=(v[--s]=v[s]+M[s]+t)/ct|0,v[s]%=ct;for(t&&(v.unshift(t),++i),a=v.length;v[--a]==0;)v.pop();return e.d=v,e.e=Wr(v,i),ee?Z(e,c,p):e};O.precision=O.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(It+e);return r.d?(t=$i(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};O.round=function(){var e=this,t=e.constructor;return Z(new t(e),e.e+1,t.rounding)};O.sine=O.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+Y,i.rounding=1,r=Fo(i,Xi(i,r)),i.precision=e,i.rounding=t,Z(pt>2?r.neg():r,e,t,!0)):new i(NaN)};O.squareRoot=O.sqrt=function(){var e,t,r,i,s,l,a=this,c=a.d,p=a.e,v=a.s,M=a.constructor;if(v!==1||!c||!c[0])return new M(!v||v<0&&(!c||c[0])?NaN:c?a:1/0);for(ee=!1,v=Math.sqrt(+a),v==0||v==1/0?(t=He(c),(t.length+p)%2==0&&(t+="0"),v=Math.sqrt(t),p=Qe((p+1)/2)-(p<0||p%2),v==1/0?t="5e"+p:(t=v.toExponential(),t=t.slice(0,t.indexOf("e")+1)+p),i=new M(t)):i=new M(v.toString()),r=(p=M.precision)+3;;)if(l=i,i=l.plus(ge(a,l,r+2,1)).times(.5),He(l.d).slice(0,r)===(t=He(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!s&&t=="4999"){if(!s&&(Z(l,p+1,0),l.times(l).eq(a))){i=l;break}r+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Z(i,p+1,1),e=!i.times(i).eq(a));break}return ee=!0,Z(i,p,M.rounding,e)};O.tangent=O.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=ge(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,Z(pt==2||pt==4?r.neg():r,e,t,!0)):new i(NaN)};O.times=O.mul=function(e){var t,r,i,s,l,a,c,p,v,M=this,_=M.constructor,A=M.d,S=(e=new _(e)).d;if(e.s*=M.s,!A||!A[0]||!S||!S[0])return new _(!e.s||A&&!A[0]&&!S||S&&!S[0]&&!A?NaN:!A||!S?e.s/0:e.s*0);for(r=Qe(M.e/Y)+Qe(e.e/Y),p=A.length,v=S.length,p<v&&(l=A,A=S,S=l,a=p,p=v,v=a),l=[],a=p+v,i=a;i--;)l.push(0);for(i=v;--i>=0;){for(t=0,s=p+i;s>i;)c=l[s]+S[i]*A[s-i-1]+t,l[s--]=c%ct|0,t=c/ct|0;l[s]=(l[s]+t)%ct|0}for(;!l[--a];)l.pop();return t?++r:l.shift(),e.d=l,e.e=Wr(l,r),ee?Z(e,_.precision,_.rounding):e};O.toBinary=function(e,t){return Bn(this,2,e,t)};O.toDecimalPlaces=O.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(nt(e,0,Ot),t===void 0?t=i.rounding:nt(t,0,8),Z(r,e+r.e+1,t))};O.toExponential=function(e,t){var r,i=this,s=i.constructor;return e===void 0?r=ft(i,!0):(nt(e,0,Ot),t===void 0?t=s.rounding:nt(t,0,8),i=Z(new s(i),e+1,t),r=ft(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};O.toFixed=function(e,t){var r,i,s=this,l=s.constructor;return e===void 0?r=ft(s):(nt(e,0,Ot),t===void 0?t=l.rounding:nt(t,0,8),i=Z(new l(s),e+s.e+1,t),r=ft(i,!1,e+i.e+1)),s.isNeg()&&!s.isZero()?"-"+r:r};O.toFraction=function(e){var t,r,i,s,l,a,c,p,v,M,_,A,S=this,D=S.d,j=S.constructor;if(!D)return new j(S);if(v=r=new j(1),i=p=new j(0),t=new j(i),l=t.e=$i(D)-S.e-1,a=l%Y,t.d[0]=Xe(10,a<0?Y+a:a),e==null)e=l>0?t:v;else{if(c=new j(e),!c.isInt()||c.lt(v))throw Error(It+c);e=c.gt(t)?l>0?t:v:c}for(ee=!1,c=new j(He(D)),M=j.precision,j.precision=l=D.length*Y*2;_=ge(c,t,0,1,1),s=r.plus(_.times(i)),s.cmp(e)!=1;)r=i,i=s,s=v,v=p.plus(_.times(s)),p=s,s=t,t=c.minus(_.times(s)),c=s;return s=ge(e.minus(r),i,0,1,1),p=p.plus(s.times(v)),r=r.plus(s.times(i)),p.s=v.s=S.s,A=ge(v,i,l,1).minus(S).abs().cmp(ge(p,r,l,1).minus(S).abs())<1?[v,i]:[p,r],j.precision=M,ee=!0,A};O.toHexadecimal=O.toHex=function(e,t){return Bn(this,16,e,t)};O.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:nt(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(ee=!1,r=ge(r,e,0,t,1).times(e),ee=!0,Z(r)):(e.s=r.s,r=e),r};O.toNumber=function(){return+this};O.toOctal=function(e,t){return Bn(this,8,e,t)};O.toPower=O.pow=function(e){var t,r,i,s,l,a,c=this,p=c.constructor,v=+(e=new p(e));if(!c.d||!e.d||!c.d[0]||!e.d[0])return new p(Xe(+c,v));if(c=new p(c),c.eq(1))return c;if(i=p.precision,l=p.rounding,e.eq(1))return Z(c,i,l);if(t=Qe(e.e/Y),t>=e.d.length-1&&(r=v<0?-v:v)<=No)return s=Zi(p,c,r,i),e.s<0?new p(1).div(s):Z(s,i,l);if(a=c.s,a<0){if(t<e.d.length-1)return new p(NaN);if(e.d[t]&1||(a=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=a,c}return r=Xe(+c,v),t=r==0||!isFinite(r)?Qe(v*(Math.log("0."+He(c.d))/Math.LN10+c.e+1)):new p(r+"").e,t>p.maxE+1||t<p.minE-1?new p(t>0?a/0:0):(ee=!1,p.rounding=c.s=1,r=Math.min(12,(t+"").length),s=Mn(e.times(At(c,i+r)),i),s.d&&(s=Z(s,i+5,1),fr(s.d,i,l)&&(t=i+10,s=Z(Mn(e.times(At(c,t+r)),t),t+5,1),+He(s.d).slice(i+1,i+15)+1==1e14&&(s=Z(s,i+1,0)))),s.s=a,ee=!0,p.rounding=l,Z(s,i,l))};O.toPrecision=function(e,t){var r,i=this,s=i.constructor;return e===void 0?r=ft(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(nt(e,1,Ot),t===void 0?t=s.rounding:nt(t,0,8),i=Z(new s(i),e,t),r=ft(i,e<=i.e||i.e<=s.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};O.toSignificantDigits=O.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(nt(e,1,Ot),t===void 0?t=i.rounding:nt(t,0,8)),Z(new i(r),e,t)};O.toString=function(){var e=this,t=e.constructor,r=ft(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};O.truncated=O.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};O.valueOf=O.toJSON=function(){var e=this,t=e.constructor,r=ft(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function He(e){var t,r,i,s=e.length-1,l="",a=e[0];if(s>0){for(l+=a,t=1;t<s;t++)i=e[t]+"",r=Y-i.length,r&&(l+=Mt(r)),l+=i;a=e[t],i=a+"",r=Y-i.length,r&&(l+=Mt(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return l+a}function nt(e,t,r){if(e!==~~e||e<t||e>r)throw Error(It+e)}function fr(e,t,r,i){var s,l,a,c;for(l=e[0];l>=10;l/=10)--t;return--t<0?(t+=Y,s=0):(s=Math.ceil((t+1)/Y),t%=Y),l=Xe(10,Y-t),c=e[s]%l|0,i==null?t<3?(t==0?c=c/100|0:t==1&&(c=c/10|0),a=r<4&&c==99999||r>3&&c==49999||c==5e4||c==0):a=(r<4&&c+1==l||r>3&&c+1==l/2)&&(e[s+1]/l/100|0)==Xe(10,t-2)-1||(c==l/2||c==0)&&(e[s+1]/l/100|0)==0:t<4?(t==0?c=c/1e3|0:t==1?c=c/100|0:t==2&&(c=c/10|0),a=(i||r<4)&&c==9999||!i&&r>3&&c==4999):a=((i||r<4)&&c+1==l||!i&&r>3&&c+1==l/2)&&(e[s+1]/l/1e3|0)==Xe(10,t-3)-1,a}function kr(e,t,r){for(var i,s=[0],l,a=0,c=e.length;a<c;){for(l=s.length;l--;)s[l]*=t;for(s[0]+=mn.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}function jo(e,t){var r,i,s;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),s=(1/Vr(4,r)).toString()):(r=16,s="2.3283064365386962890625e-10"),e.precision+=r,t=Xt(e,1,t.times(s),new e(1));for(var l=r;l--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var ge=function(){function e(i,s,l){var a,c=0,p=i.length;for(i=i.slice();p--;)a=i[p]*s+c,i[p]=a%l|0,c=a/l|0;return c&&i.unshift(c),i}function t(i,s,l,a){var c,p;if(l!=a)p=l>a?1:-1;else for(c=p=0;c<l;c++)if(i[c]!=s[c]){p=i[c]>s[c]?1:-1;break}return p}function r(i,s,l,a){for(var c=0;l--;)i[l]-=c,c=i[l]<s[l]?1:0,i[l]=c*a+i[l]-s[l];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,l,a,c,p){var v,M,_,A,S,D,j,P,H,L,q,T,te,W,E,C,I,B,J,U,x=i.constructor,w=i.s==s.s?1:-1,n=i.d,u=s.d;if(!n||!n[0]||!u||!u[0])return new x(!i.s||!s.s||(n?u&&n[0]==u[0]:!u)?NaN:n&&n[0]==0||!u?w*0:w/0);for(p?(S=1,M=i.e-s.e):(p=ct,S=Y,M=Qe(i.e/S)-Qe(s.e/S)),J=u.length,I=n.length,H=new x(w),L=H.d=[],_=0;u[_]==(n[_]||0);_++);if(u[_]>(n[_]||0)&&M--,l==null?(W=l=x.precision,a=x.rounding):c?W=l+(i.e-s.e)+1:W=l,W<0)L.push(1),D=!0;else{if(W=W/S+2|0,_=0,J==1){for(A=0,u=u[0],W++;(_<I||A)&&W--;_++)E=A*p+(n[_]||0),L[_]=E/u|0,A=E%u|0;D=A||_<I}else{for(A=p/(u[0]+1)|0,A>1&&(u=e(u,A,p),n=e(n,A,p),J=u.length,I=n.length),C=J,q=n.slice(0,J),T=q.length;T<J;)q[T++]=0;U=u.slice(),U.unshift(0),B=u[0],u[1]>=p/2&&++B;do A=0,v=t(u,q,J,T),v<0?(te=q[0],J!=T&&(te=te*p+(q[1]||0)),A=te/B|0,A>1?(A>=p&&(A=p-1),j=e(u,A,p),P=j.length,T=q.length,v=t(j,q,P,T),v==1&&(A--,r(j,J<P?U:u,P,p))):(A==0&&(v=A=1),j=u.slice()),P=j.length,P<T&&j.unshift(0),r(q,j,T,p),v==-1&&(T=q.length,v=t(u,q,J,T),v<1&&(A++,r(q,J<T?U:u,T,p))),T=q.length):v===0&&(A++,q=[0]),L[_++]=A,v&&q[0]?q[T++]=n[C]||0:(q=[n[C]],T=1);while((C++<I||q[0]!==void 0)&&W--);D=q[0]!==void 0}L[0]||L.shift()}if(S==1)H.e=M,Di=D;else{for(_=1,A=L[0];A>=10;A/=10)_++;H.e=_+M*S-1,Z(H,c?l+H.e+1:l,a,D)}return H}}();function Z(e,t,r,i){var s,l,a,c,p,v,M,_,A,S=e.constructor;e:if(t!=null){if(_=e.d,!_)return e;for(s=1,c=_[0];c>=10;c/=10)s++;if(l=t-s,l<0)l+=Y,a=t,M=_[A=0],p=M/Xe(10,s-a-1)%10|0;else if(A=Math.ceil((l+1)/Y),c=_.length,A>=c)if(i){for(;c++<=A;)_.push(0);M=p=0,s=1,l%=Y,a=l-Y+1}else break e;else{for(M=c=_[A],s=1;c>=10;c/=10)s++;l%=Y,a=l-Y+s,p=a<0?0:M/Xe(10,s-a-1)%10|0}if(i=i||t<0||_[A+1]!==void 0||(a<0?M:M%Xe(10,s-a-1)),v=r<4?(p||i)&&(r==0||r==(e.s<0?3:2)):p>5||p==5&&(r==4||i||r==6&&(l>0?a>0?M/Xe(10,s-a):0:_[A-1])%10&1||r==(e.s<0?8:7)),t<1||!_[0])return _.length=0,v?(t-=e.e+1,_[0]=Xe(10,(Y-t%Y)%Y),e.e=-t||0):_[0]=e.e=0,e;if(l==0?(_.length=A,c=1,A--):(_.length=A+1,c=Xe(10,Y-l),_[A]=a>0?(M/Xe(10,s-a)%Xe(10,a)|0)*c:0),v)for(;;)if(A==0){for(l=1,a=_[0];a>=10;a/=10)l++;for(a=_[0]+=c,c=1;a>=10;a/=10)c++;l!=c&&(e.e++,_[0]==ct&&(_[0]=1));break}else{if(_[A]+=c,_[A]!=ct)break;_[A--]=0,c=1}for(l=_.length;_[--l]===0;)_.pop()}return ee&&(e.e>S.maxE?(e.d=null,e.e=NaN):e.e<S.minE&&(e.e=0,e.d=[0])),e}function ft(e,t,r){if(!e.isFinite())return zi(e);var i,s=e.e,l=He(e.d),a=l.length;return t?(r&&(i=r-a)>0?l=l.charAt(0)+"."+l.slice(1)+Mt(i):a>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(e.e<0?"e":"e+")+e.e):s<0?(l="0."+Mt(-s-1)+l,r&&(i=r-a)>0&&(l+=Mt(i))):s>=a?(l+=Mt(s+1-a),r&&(i=r-s-1)>0&&(l=l+"."+Mt(i))):((i=s+1)<a&&(l=l.slice(0,i)+"."+l.slice(i)),r&&(i=r-a)>0&&(s+1===a&&(l+="."),l+=Mt(i))),l}function Wr(e,t){var r=e[0];for(t*=Y;r>=10;r/=10)t++;return t}function qr(e,t,r){if(t>Po)throw ee=!0,r&&(e.precision=r),Error(Ui);return Z(new e(Lr),t,1,!0)}function ut(e,t,r){if(t>yn)throw Error(Ui);return Z(new e(Fr),t,r,!0)}function $i(e){var t=e.length-1,r=t*Y+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Mt(e){for(var t="";e--;)t+="0";return t}function Zi(e,t,r,i){var s,l=new e(1),a=Math.ceil(i/Y+4);for(ee=!1;;){if(r%2&&(l=l.times(t),ei(l.d,a)&&(s=!0)),r=Qe(r/2),r===0){r=l.d.length-1,s&&l.d[r]===0&&++l.d[r];break}t=t.times(t),ei(t.d,a)}return ee=!0,l}function Qn(e){return e.d[e.d.length-1]&1}function Ki(e,t,r){for(var i,s=new e(t[0]),l=0;++l<t.length;)if(i=new e(t[l]),i.s)s[r](i)&&(s=i);else{s=i;break}return s}function Mn(e,t){var r,i,s,l,a,c,p,v=0,M=0,_=0,A=e.constructor,S=A.rounding,D=A.precision;if(!e.d||!e.d[0]||e.e>17)return new A(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(ee=!1,p=D):p=t,c=new A(.03125);e.e>-2;)e=e.times(c),_+=5;for(i=Math.log(Xe(2,_))/Math.LN10*2+5|0,p+=i,r=l=a=new A(1),A.precision=p;;){if(l=Z(l.times(e),p,1),r=r.times(++M),c=a.plus(ge(l,r,p,1)),He(c.d).slice(0,p)===He(a.d).slice(0,p)){for(s=_;s--;)a=Z(a.times(a),p,1);if(t==null)if(v<3&&fr(a.d,p-i,S,v))A.precision=p+=10,r=l=c=new A(1),M=0,v++;else return Z(a,A.precision=D,S,ee=!0);else return A.precision=D,a}a=c}}function At(e,t){var r,i,s,l,a,c,p,v,M,_,A,S=1,D=10,j=e,P=j.d,H=j.constructor,L=H.rounding,q=H.precision;if(j.s<0||!P||!P[0]||!j.e&&P[0]==1&&P.length==1)return new H(P&&!P[0]?-1/0:j.s!=1?NaN:P?0:j);if(t==null?(ee=!1,M=q):M=t,H.precision=M+=D,r=He(P),i=r.charAt(0),Math.abs(l=j.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)j=j.times(e),r=He(j.d),i=r.charAt(0),S++;l=j.e,i>1?(j=new H("0."+r),l++):j=new H(i+"."+r.slice(1))}else return v=qr(H,M+2,q).times(l+""),j=At(new H(i+"."+r.slice(1)),M-D).plus(v),H.precision=q,t==null?Z(j,q,L,ee=!0):j;for(_=j,p=a=j=ge(j.minus(1),j.plus(1),M,1),A=Z(j.times(j),M,1),s=3;;){if(a=Z(a.times(A),M,1),v=p.plus(ge(a,new H(s),M,1)),He(v.d).slice(0,M)===He(p.d).slice(0,M))if(p=p.times(2),l!==0&&(p=p.plus(qr(H,M+2,q).times(l+""))),p=ge(p,new H(S),M,1),t==null)if(fr(p.d,M-D,L,c))H.precision=M+=D,v=a=j=ge(_.minus(1),_.plus(1),M,1),A=Z(j.times(j),M,1),s=c=1;else return Z(p,H.precision=q,L,ee=!0);else return H.precision=q,p;p=v,s+=2}}function zi(e){return String(e.s*e.s/0)}function bn(e,t){var r,i,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(s=t.length;t.charCodeAt(s-1)===48;--s);if(t=t.slice(i,s),t){if(s-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%Y,r<0&&(i+=Y),i<s){for(i&&e.d.push(+t.slice(0,i)),s-=Y;i<s;)e.d.push(+t.slice(i,i+=Y));t=t.slice(i),i=Y-t.length}else i-=s;for(;i--;)t+="0";e.d.push(+t),ee&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Lo(e,t){var r,i,s,l,a,c,p,v,M;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Vi.test(t))return bn(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Bo.test(t))r=16,t=t.toLowerCase();else if(To.test(t))r=2;else if(Ro.test(t))r=8;else throw Error(It+t);for(l=t.search(/p/i),l>0?(p=+t.slice(l+1),t=t.substring(2,l)):t=t.slice(2),l=t.indexOf("."),a=l>=0,i=e.constructor,a&&(t=t.replace(".",""),c=t.length,l=c-l,s=Zi(i,new i(r),l,l*2)),v=kr(t,r,ct),M=v.length-1,l=M;v[l]===0;--l)v.pop();return l<0?new i(e.s*0):(e.e=Wr(v,M),e.d=v,ee=!1,a&&(e=ge(e,s,c*4)),p&&(e=e.times(Math.abs(p)<54?Xe(2,p):Mr.pow(2,p))),ee=!0,e)}function Fo(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:Xt(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/Vr(5,r)),t=Xt(e,2,t,t);for(var s,l=new e(5),a=new e(16),c=new e(20);r--;)s=t.times(t),t=t.times(l.plus(s.times(a.times(s).minus(c))));return t}function Xt(e,t,r,i,s){var l,a,c,p,v=e.precision,M=Math.ceil(v/Y);for(ee=!1,p=r.times(r),c=new e(i);;){if(a=ge(c.times(p),new e(t++*t++),v,1),c=s?i.plus(a):i.minus(a),i=ge(a.times(p),new e(t++*t++),v,1),a=c.plus(i),a.d[M]!==void 0){for(l=M;a.d[l]===c.d[l]&&l--;);if(l==-1)break}l=c,c=i,i=a,a=l}return ee=!0,a.d.length=M+1,a}function Vr(e,t){for(var r=e;--t;)r*=e;return r}function Xi(e,t){var r,i=t.s<0,s=ut(e,e.precision,1),l=s.times(.5);if(t=t.abs(),t.lte(l))return pt=i?4:1,t;if(r=t.divToInt(s),r.isZero())pt=i?3:2;else{if(t=t.minus(r.times(s)),t.lte(l))return pt=Qn(r)?i?2:3:i?4:1,t;pt=Qn(r)?i?1:4:i?3:2}return t.minus(s).abs()}function Bn(e,t,r,i){var s,l,a,c,p,v,M,_,A,S=e.constructor,D=r!==void 0;if(D?(nt(r,1,Ot),i===void 0?i=S.rounding:nt(i,0,8)):(r=S.precision,i=S.rounding),!e.isFinite())M=zi(e);else{for(M=ft(e),a=M.indexOf("."),D?(s=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):s=t,a>=0&&(M=M.replace(".",""),A=new S(1),A.e=M.length-a,A.d=kr(ft(A),10,s),A.e=A.d.length),_=kr(M,10,s),l=p=_.length;_[--p]==0;)_.pop();if(!_[0])M=D?"0p+0":"0";else{if(a<0?l--:(e=new S(e),e.d=_,e.e=l,e=ge(e,A,r,i,0,s),_=e.d,l=e.e,v=Di),a=_[r],c=s/2,v=v||_[r+1]!==void 0,v=i<4?(a!==void 0||v)&&(i===0||i===(e.s<0?3:2)):a>c||a===c&&(i===4||v||i===6&&_[r-1]&1||i===(e.s<0?8:7)),_.length=r,v)for(;++_[--r]>s-1;)_[r]=0,r||(++l,_.unshift(1));for(p=_.length;!_[p-1];--p);for(a=0,M="";a<p;a++)M+=mn.charAt(_[a]);if(D){if(p>1)if(t==16||t==8){for(a=t==16?4:3,--p;p%a;p++)M+="0";for(_=kr(M,s,t),p=_.length;!_[p-1];--p);for(a=1,M="1.";a<p;a++)M+=mn.charAt(_[a])}else M=M.charAt(0)+"."+M.slice(1);M=M+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)M="0"+M;M="0."+M}else if(++l>p)for(l-=p;l--;)M+="0";else l<p&&(M=M.slice(0,l)+"."+M.slice(l))}M=(t==16?"0x":t==2?"0b":t==8?"0o":"")+M}return e.s<0?"-"+M:M}function ei(e,t){if(e.length>t)return e.length=t,!0}function qo(e){return new this(e).abs()}function Do(e){return new this(e).acos()}function Uo(e){return new this(e).acosh()}function xo(e,t){return new this(e).plus(t)}function Wo(e){return new this(e).asin()}function Vo(e){return new this(e).asinh()}function $o(e){return new this(e).atan()}function Zo(e){return new this(e).atanh()}function Ko(e,t){e=new this(e),t=new this(t);var r,i=this.precision,s=this.rounding,l=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=ut(this,l,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?ut(this,i,s):new this(0),r.s=e.s):!e.d||t.isZero()?(r=ut(this,l,1).times(.5),r.s=e.s):t.s<0?(this.precision=l,this.rounding=1,r=this.atan(ge(e,t,l,1)),t=ut(this,l,1),this.precision=i,this.rounding=s,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(ge(e,t,l,1)),r}function zo(e){return new this(e).cbrt()}function Xo(e){return Z(e=new this(e),e.e+1,2)}function Yo(e,t,r){return new this(e).clamp(t,r)}function Jo(e){if(!e||typeof e!="object")throw Error(xr+"Object expected");var t,r,i,s=e.defaults===!0,l=["precision",1,Ot,"rounding",0,8,"toExpNeg",-Wt,0,"toExpPos",0,Wt,"maxE",0,Wt,"minE",-Wt,0,"modulo",0,9];for(t=0;t<l.length;t+=3)if(r=l[t],s&&(this[r]=wn[r]),(i=e[r])!==void 0)if(Qe(i)===i&&i>=l[t+1]&&i<=l[t+2])this[r]=i;else throw Error(It+r+": "+i);if(r="crypto",s&&(this[r]=wn[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(xi);else this[r]=!1;else throw Error(It+r+": "+i);return this}function Ho(e){return new this(e).cos()}function Go(e){return new this(e).cosh()}function Yi(e){var t,r,i;function s(l){var a,c,p,v=this;if(!(v instanceof s))return new s(l);if(v.constructor=s,ti(l)){v.s=l.s,ee?!l.d||l.e>s.maxE?(v.e=NaN,v.d=null):l.e<s.minE?(v.e=0,v.d=[0]):(v.e=l.e,v.d=l.d.slice()):(v.e=l.e,v.d=l.d?l.d.slice():l.d);return}if(p=typeof l,p==="number"){if(l===0){v.s=1/l<0?-1:1,v.e=0,v.d=[0];return}if(l<0?(l=-l,v.s=-1):v.s=1,l===~~l&&l<1e7){for(a=0,c=l;c>=10;c/=10)a++;ee?a>s.maxE?(v.e=NaN,v.d=null):a<s.minE?(v.e=0,v.d=[0]):(v.e=a,v.d=[l]):(v.e=a,v.d=[l]);return}else if(l*0!==0){l||(v.s=NaN),v.e=NaN,v.d=null;return}return bn(v,l.toString())}else if(p!=="string")throw Error(It+l);return(c=l.charCodeAt(0))===45?(l=l.slice(1),v.s=-1):(c===43&&(l=l.slice(1)),v.s=1),Vi.test(l)?bn(v,l):Lo(v,l)}if(s.prototype=O,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Jo,s.clone=Yi,s.isDecimal=ti,s.abs=qo,s.acos=Do,s.acosh=Uo,s.add=xo,s.asin=Wo,s.asinh=Vo,s.atan=$o,s.atanh=Zo,s.atan2=Ko,s.cbrt=zo,s.ceil=Xo,s.clamp=Yo,s.cos=Ho,s.cosh=Go,s.div=Qo,s.exp=ea,s.floor=ta,s.hypot=ra,s.ln=na,s.log=ia,s.log10=oa,s.log2=sa,s.max=aa,s.min=la,s.mod=ua,s.mul=ca,s.pow=ha,s.random=fa,s.round=da,s.sign=ga,s.sin=pa,s.sinh=va,s.sqrt=ma,s.sub=wa,s.sum=ya,s.tan=Ma,s.tanh=ba,s.trunc=_a,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return s.config(e),s}function Qo(e,t){return new this(e).div(t)}function ea(e){return new this(e).exp()}function ta(e){return Z(e=new this(e),e.e+1,3)}function ra(){var e,t,r=new this(0);for(ee=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return ee=!0,new this(1/0);r=t}return ee=!0,r.sqrt()}function ti(e){return e instanceof Mr||e&&e.toStringTag===Wi||!1}function na(e){return new this(e).ln()}function ia(e,t){return new this(e).log(t)}function sa(e){return new this(e).log(2)}function oa(e){return new this(e).log(10)}function aa(){return Ki(this,arguments,"lt")}function la(){return Ki(this,arguments,"gt")}function ua(e,t){return new this(e).mod(t)}function ca(e,t){return new this(e).mul(t)}function ha(e,t){return new this(e).pow(t)}function fa(e){var t,r,i,s,l=0,a=new this(1),c=[];if(e===void 0?e=this.precision:nt(e,1,Ot),i=Math.ceil(e/Y),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));l<i;)s=t[l],s>=429e7?t[l]=crypto.getRandomValues(new Uint32Array(1))[0]:c[l++]=s%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);l<i;)s=t[l]+(t[l+1]<<8)+(t[l+2]<<16)+((t[l+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(t,l):(c.push(s%1e7),l+=4);l=i/4}else throw Error(xi);else for(;l<i;)c[l++]=Math.random()*1e7|0;for(i=c[--l],e%=Y,i&&e&&(s=Xe(10,Y-e),c[l]=(i/s|0)*s);c[l]===0;l--)c.pop();if(l<0)r=0,c=[0];else{for(r=-1;c[0]===0;r-=Y)c.shift();for(i=1,s=c[0];s>=10;s/=10)i++;i<Y&&(r-=Y-i)}return a.e=r,a.d=c,a}function da(e){return Z(e=new this(e),e.e+1,this.rounding)}function ga(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function pa(e){return new this(e).sin()}function va(e){return new this(e).sinh()}function ma(e){return new this(e).sqrt()}function wa(e,t){return new this(e).sub(t)}function ya(){var e=0,t=arguments,r=new this(t[e]);for(ee=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return ee=!0,Z(r,this.precision,this.rounding)}function Ma(e){return new this(e).tan()}function ba(e){return new this(e).tanh()}function _a(e){return Z(e=new this(e),e.e+1,1)}O[Symbol.for("nodejs.util.inspect.custom")]=O.toString;O[Symbol.toStringTag]="Decimal";var Mr=O.constructor=Yi(wn);Lr=new Mr(Lr);Fr=new Mr(Fr);var Tr=Mr,gt=wr(yr()),hn=wr(yr()),Aa=class{constructor(e){if(e!==0)throw new Error("Aftermath only supported on mainnet");this.slippage="900000000000000000",this.poolRegistry="0xfcc774493db2c45c79f688f88d28023a3e7d98e4ee9f48bbf5c7990f651577ae",this.protocolFeeVault="0xf194d9b1bcad972e45a7dd67dd49b3ee1e3357a00a50850c52cd51bb450e13b4",this.treasury="0x28e499dff5e864a2eafe476269a4f5035f1c16f338da7be18b103499abf271ce",this.insuranceFund="0xf0c40d67b078000e18032334c3325c47b9ec9f3d9ae4128be820d54663d14e3b",this.referrealVault="0x35d35b0e5b177593d8c3a801462485572fc30861e6ce96a55af6dc4730709278"}amountLimit(e){return Number(new hn.default(e).mul(new hn.default(this.slippage)).div(new hn.default("1000000000000000000")).toString())}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l];if(r.extendedDetails==null)throw new Error("Extended details not supported");if(r.extendedDetails.aftermathLpSupplyType==null)throw new Error("LP supply type not supported");const M=[t.object(r.id),t.object(this.poolRegistry),t.object(this.protocolFeeVault),t.object(this.treasury),t.object(this.insuranceFund),t.object(this.referrealVault),t.pure.u64(this.amountLimit(r.amountOut)),t.pure.u64(this.slippage),i];return t.moveCall({target:`${e.publishedAt()}::aftermath::${c}`,typeArguments:[p,v,r.extendedDetails.aftermathLpSupplyType],arguments:M})})}},ri="0x000000000000000000000000000000000000000000000000000000000000dee9",Ca=class{constructor(e){if(e!==0)throw new Error("Aftermath only supported on mainnet")}getAccountCap(e,t){return Me(this,null,function*(){let r=50,i=null;for(;;){const s=e.getOwnedObjects({owner:t,cursor:i,limit:r,filter:{MoveModule:{package:ri,module:"custodian_v2"}}});if(s!=null&&s.data!=null){if(s.data.length!==0)return s.data[0].data.objectId;if(s.data.length<50)break}else break}return null})}getOrCreateAccountCap(e,t,r){return Me(this,null,function*(){let i=yield this.getAccountCap(t,r);return i!==null?{accountCap:e.object(i),isCreate:!1}:{accountCap:e.moveCall({target:`${ri}::clob_v2::create_account`,typeArguments:[],arguments:[]}),isCreate:!0}})}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=yield this.getOrCreateAccountCap(t,e.client,e.signer),_=[t.object(r.id),i,M.accountCap,t.object(Jt)],A=t.moveCall({target:`${e.publishedAt()}::deepbook::${c}`,typeArguments:[p,v],arguments:_});return M.isCreate&&t.transferObjects([M.accountCap],e.signer),A})}},Sa=class{constructor(e){if(e!==0)throw new Error("Kriya amm only supported on mainnet")}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(r.id),i];return t.moveCall({target:`${e.publishedAt()}::kriya_amm::${c}`,typeArguments:[p,v],arguments:M})})}},Ia=class{constructor(e){if(e!==0)throw new Error("Flowx only supported on mainnet");this.container="0xb65dcbf63fd3ad5d0ebfbf334780dc9f785eff38a4459e37ab08fa79576ee511"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(this.container),i];return t.moveCall({target:`${e.publishedAt()}::flowx_amm::${c}`,typeArguments:[p,v],arguments:M})})}},Oa=class{constructor(e){if(e!==0)throw new Error("Turbos only supported on mainnet");this.versioned="0xf1cf0e81048df168ebeb1b8030fad24b3e0b53ae827c25053fff0779c1445b6f"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l];if(r.extendedDetails==null)throw new Error("Extended details not supported");if(r.extendedDetails.turbosFeeType==null)throw new Error("Turbos fee type not supported");const M=[t.object(r.id),i,t.object(Jt),t.object(this.versioned)];return t.moveCall({target:`${e.publishedAt()}::turbos::${c}`,typeArguments:[p,v,r.extendedDetails.turbosFeeType],arguments:M})})}},ni=class{constructor(e,t){this.globalConfig=e===0?"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f":"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",this.partner=t??"0x639b5e433da31739e800cd085f356e64cae222966d0f1b11bd9dc76b322ff58b"}flash_swap(e,t,r,i){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["flash_swap_a2b",l,a]:["flash_swap_b2a",a,l];let M=i?r.amountIn:r.amountOut;const _=[t.object(this.globalConfig),t.object(r.id),t.object(this.partner),t.pure.u64(M),t.pure.bool(i),t.object(Jt)],A=t.moveCall({target:`${e.publishedAt()}::cetus::${c}`,typeArguments:[p,v],arguments:_});return{targetCoin:A[0],flashReceipt:A[1],payAmount:A[2]}}repay_flash_swap(e,t,r,i,s){const{direction:l,from:a,target:c}=r,[p,v,M]=l?["repay_flash_swap_a2b",a,c]:["repay_flash_swap_b2a",c,a],_=[t.object(this.globalConfig),t.object(r.id),t.object(this.partner),i,s];return t.moveCall({target:`${e.publishedAt()}::cetus::${p}`,typeArguments:[v,M],arguments:_})[0]}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(this.globalConfig),t.object(r.id),t.object(this.partner),i,t.object(Jt)];return t.moveCall({target:`${e.publishedAt()}::cetus::${c}`,typeArguments:[p,v],arguments:M})})}};function ii(e,...t){const r=Array.isArray(t[t.length-1])?t.pop():[];let s=[e,...t].filter(Boolean).join("::");return r&&r.length&&(s+=`<${r.join(", ")}>`),s}function Kt(e){var t;try{let r=e.replace(/\s/g,"");const i=r.match(/(<.+>)$/),s=(t=i==null?void 0:i[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){r=r.slice(0,r.indexOf("<"));const p=Kt(r),v=Io(So({},p),{type_arguments:s.map(M=>Kt(M).source_address)});return v.type_arguments=v.type_arguments.map(M=>Nt.isSuiCoin(M)?M:Kt(M).source_address),v.source_address=ii(v.full_address,v.type_arguments),v}const l=r.split("::"),c={full_address:r,address:r===Ji||r===Ta?"0x2":vn.normalizeSuiObjectId(l[0]),module:l[1],name:l[2],type_arguments:[],source_address:""};return c.full_address=`${c.address}::${c.module}::${c.name}`,c.source_address=ii(c.full_address,c.type_arguments),c}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function si(e){return Kt(e).source_address}var Ea="0x2::coin::Coin",ka=/^0x2::coin::Coin<(.+)>$/,Ji="0x2::sui::SUI",Ta="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Nt=class yt{static getCoinTypeArg(t){const r=t.type.match(ka);return r?r[1]:null}static isSUI(t){const r=yt.getCoinTypeArg(t);return r?yt.getCoinSymbol(r)==="SUI":!1}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getBalance(t){return BigInt(t.fields.balance)}static totalBalance(t,r){let i=BigInt(0);return t.forEach(s=>{r===s.coinAddress&&(i+=BigInt(s.balance))}),i}static getID(t){return t.fields.id.id}static getCoinTypeFromArg(t){return`${Ea}<${t}>`}static getCoinAssets(t,r){const i=[];return r.forEach(s=>{si(s.coinAddress)===si(t)&&i.push(s)}),i}static isSuiCoin(t){return Kt(t).full_address===Ji}static selectCoinObjectIdGreaterThanOrEqual(t,r,i=[]){const s=yt.selectCoinAssetGreaterThanOrEqual(t,r,i),l=s.selectedCoins.map(p=>p.coinObjectId),a=s.remainingCoins,c=s.selectedCoins.map(p=>p.balance.toString());return{objectArray:l,remainCoins:a,amountArray:c}}static selectCoinAssetGreaterThanOrEqual(t,r,i=[]){const s=yt.sortByBalance(t.filter(v=>!i.includes(v.coinObjectId))),l=yt.calculateTotalBalance(s);if(l<r)return{selectedCoins:[],remainingCoins:s};if(l===r)return{selectedCoins:s,remainingCoins:[]};let a=BigInt(0);const c=[],p=[...s];for(;a<l;){const v=r-a,M=p.findIndex(A=>A.balance>=v);if(M!==-1){c.push(p[M]),p.splice(M,1);break}const _=p.pop();_.balance>0&&(c.push(_),a+=_.balance)}return{selectedCoins:yt.sortByBalance(c),remainingCoins:yt.sortByBalance(p)}}static sortByBalance(t){return t.sort((r,i)=>r.balance<i.balance?-1:r.balance>i.balance?1:0)}static sortByBalanceDes(t){return t.sort((r,i)=>r.balance>i.balance?-1:r.balance<i.balance?0:1)}static calculateTotalBalance(t){return t.reduce((r,i)=>r+i.balance,BigInt(0))}};function oi(e){switch(e){case 1e4:return"Calculate error";case 10001:return"Input number too large can not fit in target type";case 10002:return"No router";case 10003:return"Insufficient Liquidity";default:return"Unknown error"}}function Yt(e){const t=e.indexOf("::");if(t===-1)return e;const r=e.substring(0,t),i=e.substring(t);if(!r.startsWith("0x"))return e;const s=r.substring(2);return s.length>64?e:`0x${s.padStart(64,"0")}${i}`}function Ba(e,t){e=Yt(e),t=Yt(t);const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){if(e[i]>t[i])return!0;if(e[i]<t[i])return!1}return!0}function Ra(e,t){return e.moveCall({target:"0x2::coin::zero",typeArguments:[t]})}function ai(e,t,r,i){const s=Nt.getCoinAssets(i,t);if(r===BigInt(0)&&s.length===0)return{targetCoin:Ra(e,i),isMintZeroCoin:!0,targetCoinAmount:0};if(Nt.calculateTotalBalance(s)<r)throw new AggregateError("Insufficient balance when build merge coin","InsufficientBalance");if(Nt.isSuiCoin(i))return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(r.toString())]),isMintZeroCoin:!0,targetCoinAmount:Number(r.toString())};let a=Nt.sortByBalance(s);a.slice(0,3).reduce((_,A)=>_+A.balance,BigInt(0))<BigInt(r)&&(a=Nt.sortByBalanceDes(s));let p=Nt.selectCoinObjectIdGreaterThanOrEqual(a,r);const[v,...M]=p.objectArray;return M.length>0&&e.mergeCoins(v,M.map(_=>e.object(_))),{targetCoin:e.object(v),isMintZeroCoin:!1,targetCoinAmount:Number(r.toString())}}function Na(e){return!(!e.startsWith("0x")||e.length!==66)}var Ft=wr(yr()),Cr=wr(yr()),br=wr(yr()),Vt=new br.default(0);new br.default(1);var Pa=new br.default(2);Pa.pow(new br.default(128));var ja=new br.default("18446744073709551615"),qt=1e9;function li(e,t,r){let i=Vt;return t?i=e.mul(new Cr.default(qt-r*qt)).div(new Cr.default(qt)):i=e.mul(new Cr.default(qt+r*qt)).div(new Cr.default(qt)),Number(i.toString())}function La(e,t,r){return new Tr(e).mul(Tr.pow(2,-64)).pow(2).mul(Tr.pow(10,t-r))}function Fa(e,t,r){return Me(this,null,function*(){var i,s,l,a,c;const{from:p,target:v,amount:M,byAmountIn:_,pools:A}=t,S=Yt(p),D=Yt(v),j=new wo.Transaction,P=Ba(S,D),H="0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee",L=P?S:D,q=P?D:S,T=[L,q];for(let u=0;u<A.length;u++){const d=[j.object(A[u]),j.pure.bool(P),j.pure.bool(_),j.pure.u64(M.toString())];j.moveCall({target:`${H}::fetcher_script::calculate_swap_result`,arguments:d,typeArguments:T})}if(!Na(r))throw new AggregateError("Aggregator package not set","InvalidWallet");const te=yield e.devInspectTransactionBlock({transactionBlock:j,sender:r});if(te.error!=null)throw new AggregateError("Aggregator package not set","SimulateError");const W=(i=te.events)==null?void 0:i.filter(u=>u.type.includes("CalculatedSwapResultEvent"));if(W.length===0||W.length!==A.length)throw new AggregateError("Simulate event result error","simulateEventError");let E=_?Vt:ja,C=0;for(let u=0;u<W.length;u+=1)if(!W[u].parsedJson.data.is_exceed)if(t.byAmountIn){const d=new Ft.BN(W[u].parsedJson.data.amount_out);d.gt(E)&&(C=u,E=d)}else{const d=new Ft.BN(W[u].parsedJson.data.amount_out);d.lt(E)&&(C=u,E=d)}const I=W[C].parsedJson.data;console.log("event",JSON.stringify(I,null,2));const B=I.step_results[0].current_sqrt_price,[J,U]=yield Promise.all([e.getCoinMetadata({coinType:L}).then(u=>u==null?void 0:u.decimals),e.getCoinMetadata({coinType:q}).then(u=>u==null?void 0:u.decimals)]);if(J==null||U==null)throw new AggregateError("Simulate event result error","CannotGetDecimals");const x=La(B,J,U),w={amountIn:new Ft.BN((s=I.amount_in)!=null?s:0),amountOut:new Ft.BN((l=I.amount_out)!=null?l:0),routes:[{path:[{id:A[C],direction:P,provider:"CETUS",from:S,target:D,feeRate:I.fee_rate,amountIn:I.amount_in,amountOut:I.amount_out}],amountIn:new Ft.BN((a=I.amount_in)!=null?a:0),amountOut:new Ft.BN((c=I.amount_out)!=null?c:0),initialPrice:x}],insufficientLiquidity:!1};return{isExceed:I.is_exceed,routeData:w}})}var qa=class{constructor(e){if(e!==0)throw new Error("Kriya clmm only supported on mainnet");this.version="0xf5145a7ac345ca8736cf8c76047d00d6d378f30e81be6f6eb557184d9de93c78"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(r.id),i,t.object(this.version),t.object(Jt)];return t.moveCall({target:`${e.publishedAt()}::kriya_clmm::${c}`,typeArguments:[p,v],arguments:M})})}},Da=class{constructor(e){if(e!==0)throw new Error("Haedal only supported on mainnet")}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Haedal not support b2a swap");const l="swap_a2b",a=[t.object(r.id),t.object("0x5"),i];return t.moveCall({target:`${e.publishedAt()}::haedal::${l}`,typeArguments:[],arguments:a})})}},Ua=class{constructor(e){if(e!==0)throw new Error("Afsui only supported on mainnet");this.stakedSuiVault="0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",this.safe="0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",this.referVault="0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",this.validator="0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Afsui not support b2a swap");const l="swap_a2b",a=[t.object(this.stakedSuiVault),t.object(this.safe),t.object("0x5"),t.object(this.referVault),t.object(this.validator),i];return t.moveCall({target:`${e.publishedAt()}::afsui::${l}`,typeArguments:[],arguments:a})})}},xa=class{constructor(e){if(e!==0)throw new Error("Volo only supported on mainnet");this.nativePool="0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",this.metadata="0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Volo not support b2a swap");const l="swap_a2b",a=[t.object(this.nativePool),t.object(this.metadata),t.object("0x5"),i];return t.moveCall({target:`${e.publishedAt()}::volo::${l}`,typeArguments:[],arguments:a})})}},Wa=class{constructor(e){if(e!==0)throw new Error("Flowx clmm only supported on mainnet");this.versioned="0x67624a1533b5aff5d0dfcf5e598684350efd38134d2d245f475524c03a64e656",this.poolRegistry="0x27565d24a4cd51127ac90e4074a841bbe356cca7bf5759ddc14a975be1632abc"}swap(e,t,r,i){return Me(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],M=[t.object(this.poolRegistry),t.pure.u64(r.feeRate*1e6),i,t.object(this.versioned),t.object(Jt)];return t.moveCall({target:`${e.publishedAt()}::flowx_clmm::${c}`,typeArguments:[p,v],arguments:M})})}},Va="CETUS",$a="DEEPBOOK",Za="KRIYA",Ka="FLOWX",za="FLOWXV3",Xa="KRIYAV3",Hi="TURBOS",_n="AFTERMATH",Ya="HAEDAL",Ja="VOLO",Ha="AFSUI",Ga=class{constructor(e,t,r,i){this.endpoint=e,this.client=r,this.signer=t,this.env=i,this.allCoins=[]}getAllCoins(){return Me(this,null,function*(){let e=null,t=50;const r=[];for(;;){const i=yield this.client.getAllCoins({owner:this.signer,cursor:e,limit:t});for(const s of i.data)r.push({coinAddress:Kt(s.coinType).source_address,coinObjectId:s.coinObjectId,balance:BigInt(s.balance)});if(i.data.length<t)break;e=i.data[t-1].coinObjectId}return r})}findRouters(e){return Me(this,null,function*(){return el(this.endpoint,e)})}expectInputSwap(e,t,r,i,s){return Me(this,null,function*(){if(r.length===0)throw new Error("No router found");const l=r.map(_=>_.amountIn.toString()),a=r[0].path[0].from,c=r[0].path[r[0].path.length-1].target,p=e.splitCoins(t,l),v=[];for(let _=0;_<r.length;_++){if(r[_].path.length===0)throw new Error("Empty path");let A=p[_];for(const S of r[_].path)A=yield this.newDex(S.provider,s).swap(this,e,S,A);v.push(A)}return this.transferOrDestoryCoin(e,t,a),this.checkCoinThresholdAndMergeCoin(e,v,c,i)})}expectOutputSwap(e,t,r,i){return Me(this,null,function*(){const s=[],l=[],a=[],c=new ni(this.env,i);for(let v=0;v<r.length;v++){const M=r[v];for(let A=M.path.length-1;A>=0;A--){const S=M.path[A],D=c.flash_swap(this,e,S,!1);s.unshift(D.targetCoin),l.unshift(D.flashReceipt)}let _=t;for(let A=0;A<M.path.length;A++){const S=M.path[A],D=c.repay_flash_swap(this,e,S,_,l[A]);_=s[A],A===0?t=D:this.transferOrDestoryCoin(e,D,S.from),A===M.path.length-1&&a.push(_)}}const p=r[0].path[0].from;if(this.transferOrDestoryCoin(e,t,p),a.length>1){const v=e.makeMoveVec({elements:a.slice(1)});e.moveCall({target:`${vn.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[r[0].path[r[0].path.length-1].target],arguments:[a[0],v]})}return a[0]})}swapInPools(e){return Me(this,null,function*(){let t;try{t=yield Fa(this.client,e,this.signer)}catch(r){return console.error("swapInPools error:",r),null}return t})}routerSwap(e){return Me(this,null,function*(){const{routers:t,inputCoin:r,slippage:i,byAmountIn:s,txb:l,partner:a}=e,c=t.reduce((A,S)=>A.add(S.amountIn),new gt.default(0)),p=t.reduce((A,S)=>A.add(S.amountOut),new gt.default(0)),v=li(s?p:c,s,i);if(s)return yield this.expectInputSwap(l,r,t,new gt.default(v),a);const M=l.splitCoins(r,[v.toString()]);return this.transferOrDestoryCoin(l,r,t[0].path[0].from),yield this.expectOutputSwap(l,M[0],t,a)})}fastRouterSwap(e){return Me(this,null,function*(){const{routers:t,byAmountIn:r,slippage:i,txb:s,partner:l,isMergeTragetCoin:a,refreshAllCoins:c}=e;(c||this.allCoins.length===0)&&(this.allCoins=yield this.getAllCoins());const p=t[0].path[0].from,v=t[0].path[t[0].path.length-1].target,M=t.reduce((P,H)=>P.add(H.amountIn),new gt.default(0)),_=t.reduce((P,H)=>P.add(H.amountOut),new gt.default(0)),A=li(r?_:M,r,i),S=r?M:A,D=ai(s,this.allCoins,BigInt(S.toString()),p),j=yield this.routerSwap({routers:t,inputCoin:D.targetCoin,slippage:i,byAmountIn:r,txb:s,partner:l});if(a){const P=ai(s,this.allCoins,BigInt(0),v);s.mergeCoins(P.targetCoin,[j]),P.isMintZeroCoin&&this.transferOrDestoryCoin(s,P.targetCoin,v)}else this.transferOrDestoryCoin(s,j,v)})}publishedAt(){return this.env===0?"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302":"0x0"}transferOrDestoryCoin(e,t,r){e.moveCall({target:`${this.publishedAt()}::utils::transfer_or_destroy_coin`,typeArguments:[r],arguments:[t]})}checkCoinThresholdAndMergeCoin(e,t,r,i){let s=t[0];if(t.length>1){let l=e.makeMoveVec({elements:t.slice(1)});e.moveCall({target:`${vn.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[r],arguments:[t[0],l]}),s=t[0]}return e.moveCall({target:`${this.publishedAt()}::utils::check_coin_threshold`,typeArguments:[r],arguments:[s,e.pure.u64(i.toString())]}),s}newDex(e,t){switch(e){case Va:return new ni(this.env,t);case $a:return new Ca(this.env);case Za:return new Sa(this.env);case Xa:return new qa(this.env);case Ka:return new Ia(this.env);case za:return new Wa(this.env);case Hi:return new Oa(this.env);case _n:return new Aa(this.env);case Ya:return new Da(this.env);case Ha:return new Ua(this.env);case Ja:return new xa(this.env);default:throw new Error(`Unsupported dex ${e}`)}}signAndExecuteTransaction(e,t){return Me(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:t,options:{showEffects:!0,showEvents:!0,showInput:!0,showBalanceChanges:!0}})})}devInspectTransactionBlock(e){return Me(this,null,function*(){return yield this.client.devInspectTransactionBlock({transactionBlock:e,sender:this.signer})})}sendTransaction(e,t){return Me(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:t})})}};function Qa(e){return{amountIn:new gt.default(e.amount_in.toString()),amountOut:new gt.default(e.amount_out.toString()),insufficientLiquidity:!1,routes:e.routes.map(t=>({path:t.path.map(r=>{var i,s;let l;r.provider===_n&&(l=r.extended_details.aftermath_pool_flatness===0?"v2":"v3");let a;return(r.provider===Hi||r.provider===_n)&&(a={aftermathLpSupplyType:(i=r.extended_details)==null?void 0:i.aftermath_lp_supply_type,turbosFeeType:(s=r.extended_details)==null?void 0:s.turbos_fee_type}),{id:r.id,direction:r.direction,provider:r.provider,from:r.from,target:r.target,feeRate:r.fee_rate,amountIn:r.amount_in,amountOut:r.amount_out,extendedDetails:a,version:l}}),amountIn:new gt.default(t.amount_in.toString()),amountOut:new gt.default(t.amount_out.toString()),initialPrice:new Tr(t.initial_price.toString())}))}}var Jt="0x0000000000000000000000000000000000000000000000000000000000000006";function el(e,t){return Me(this,null,function*(){const{from:r,target:i,amount:s,byAmountIn:l,depth:a,splitAlgorithm:c,splitFactor:p,splitCount:v,providers:M}=t,_=Yt(r),A=Yt(i);let S=`${e}?from=${_}&target=${A}&amount=${s.toString()}&by_amount_in=${l}`;a&&(S+=`&depth=${a}`),c&&(S+=`&split_algorithm=${c}`),p&&(S+=`&split_factor=${p}`),v&&(S+=`&split_count=${v}`),M&&M.length>0&&(S+=`&providers=${M.join(",")}`);const D=yield fetch(S);if(!D.ok)return{amountIn:Vt,amountOut:Vt,routes:[],insufficientLiquidity:!1,error:{code:10001,msg:oi(10001)}};const j=yield D.json();if(j.data!=null)return Qa(j.data);const P=j.msg==="liquidity is not enough";return{amountIn:Vt,amountOut:Vt,routes:[],insufficientLiquidity:P,error:{code:10003,msg:oi(10003)}}})}var Gi=(e=>(e[e.Mainnet=0]="Mainnet",e[e.Testnet=1]="Testnet",e))(Gi||{}),tl=Ga,ui=Gi;const rl=es(),Qi=rl.public.appEnv;console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:14 ~ env:",Qi);function nl(){const{tokensObj:e,setTokensObj:t}=pi(),r=Ls(),i=Ie(()=>r),s=Ur(),l=Ie(()=>s),a=mt.Sui.aggregatorv2Url,c=localStorage.getItem("Sui-currentRpclocal4")||mt.Sui.fullRpcUrl,p=mt.Sui.simulationAccount;mt.Sui.aggregatorV2.package_id,mt.Sui.aggregatorV2.published_at,mt.Sui.integrate.package_id,mt.Sui.integrate.published_at;const v=new Fs({url:c}),M=Ie(()=>new tl(a,i.value.address||p,v,Qi=="test"?ui.Testnet:ui.Mainnet)),_=qs(),A=Ie(()=>_),S=E=>({transactionBlock:E,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),D=(E,C)=>C.minus(E).div(C).mul(100),j=(E,C,I)=>{console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:71 ~ getPriceImpact ~ routerData:",E);const{routes:B}=E;let J=it(0);return B==null||B.forEach(U=>{const x=it(U.amountOut).div(Math.pow(10,I)),w=it(U.amountIn).div(Math.pow(10,C)),n=x.div(w),u=it(U==null?void 0:U.amountIn).div(E==null?void 0:E.amountIn),d=D(n,it(U.initialPrice.toString())).mul(new gi(u));J=J.add(d)}),Number(xs(J.toNumber(),2))},P=E=>Kn(E)==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":Kn(E),H=(E,C,I)=>{var J,U,x;const B=E.filter(w=>{const n=P(C),u=P(I),d=P(w==null?void 0:w.base),y=P(w==null?void 0:w.quote);return n===d&&u===y||u===d&&n===y});return(B==null?void 0:B.length)>0?(Object.values((J=B==null?void 0:B[0])==null?void 0:J.addressMap),Array.from((x=(U=B==null?void 0:B[0])==null?void 0:U.addressMap)==null?void 0:x.values())):null},L=E=>E==null?void 0:E.map(C=>{var I,B;return{...C,amountIn:(I=C==null?void 0:C.amountIn)==null?void 0:I.toString(),amountOut:(B=C==null?void 0:C.amountOut)==null?void 0:B.toString(),initialPrice:(C==null?void 0:C.initial_price)||(C==null?void 0:C.initialPrice)}}),q=async(E,C,I,B,J,U,x)=>{var w,n,u,d,y,b,f,h,g,o,m,R,N,k,$,K,G,le,Q,re,ne,ie,se,Ye,oe,ue,Ge,me,we,kt,pe,ye,vt;console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:131 ~ getFindRouter ~ index?.value?.liquiditySourceList:",(w=l==null?void 0:l.value)==null?void 0:w.liquiditySourceList),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:131 ~ getFindRouter ~ index?.value?.includeRoutes:",(n=l==null?void 0:l.value)==null?void 0:n.includeRoutes);try{const he=(d=(u=l==null?void 0:l.value)==null?void 0:u.liquiditySourceList)==null?void 0:d.filter(X=>(X==null?void 0:X.status)==="open");console.log("🚀 ~ file: useSuiAggregator.ts:154 ~ function ~ liquiditySources:",he);const ae=(y=he==null?void 0:he.filter(X=>{var ve;return((ve=X==null?void 0:X.name)==null?void 0:ve.toUpperCase())!=="CETUS"}))==null?void 0:y.map(X=>{var ve,Ht,be;if(((ve=X==null?void 0:X.name)==null?void 0:ve.indexOf("Kriya"))>-1){if((X==null?void 0:X.name)==="Kriya V2")return"KRIYA";if((X==null?void 0:X.name)==="Kriya V3")return"KRIYAV3"}else{if((X==null?void 0:X.name)==="Aftermath LSD")return"AFSUI";if(((Ht=X==null?void 0:X.name)==null?void 0:Ht.indexOf("FlowX"))>-1){if((X==null?void 0:X.name)==="FlowX V2")return"FLOWX";if((X==null?void 0:X.name)==="FlowX V3")return"FLOWXV3"}else return(be=X==null?void 0:X.name)==null?void 0:be.toUpperCase()}});console.log("🚀 ~ file: useSuiAggregator.ts:155 ~ providers ~ providers:",ae);const de={from:P((b=E==null?void 0:E.value)==null?void 0:b.address),target:P((f=C==null?void 0:C.value)==null?void 0:f.address),amount:new Zn(I),byAmountIn:B,depth:3,providers:["CETUS",...ae]};((h=l==null?void 0:l.value)==null?void 0:h.includeRoutes)!=="open"&&(de.splitCount=1),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:145 ~ getFindRouter ~ findRouterParams:",de);const z=await M.value.findRouters(de);if(console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:163 ~ function ~ res:",z),((g=z==null?void 0:z.error)==null?void 0:g.code)==10001)return{...z,id:x};if(z!=null&&z.insufficientLiquidity)return{...z,id:x};if(!(z!=null&&z.routes)||((o=z==null?void 0:z.routes)==null?void 0:o.length)===0)throw Error("Aggregator no router");console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:156 ~ getFindRouter ~ findRouter res Before formatting:",JSON.stringify(z,null,2));const ce={...z,amountIn:(m=z==null?void 0:z.amountIn)==null?void 0:m.toString(),amountOut:(R=z==null?void 0:z.amountOut)==null?void 0:R.toString(),routes:L(z==null?void 0:z.routes),originRes:z};console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:159 ~ getFindRouter ~ findRouter formatRes:",JSON.stringify(ce,null,2));const Tt=j(ce,(N=E==null?void 0:E.value)==null?void 0:N.decimals,(k=C==null?void 0:C.value)==null?void 0:k.decimals);return console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:170 ~ getFindRouter ~ priceImpact:",Tt),{...ce,priceImpact:Tt,fromCoinAddress:($=E==null?void 0:E.value)==null?void 0:$.address,toCoinAddress:(K=C==null?void 0:C.value)==null?void 0:K.address,id:x}}catch(he){try{console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ error:",he),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ swapRouterStore?.value?.poolListGroupByTokenAB:",(G=A==null?void 0:A.value)==null?void 0:G.poolListGroupByTokenAB);const ae=H((le=A==null?void 0:A.value)==null?void 0:le.poolListGroupByTokenAB,(Q=E==null?void 0:E.value)==null?void 0:Q.address,(re=C==null?void 0:C.value)==null?void 0:re.address);if(console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ pools:",ae),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ params:",{from:P((ne=E==null?void 0:E.value)==null?void 0:ne.address),target:P((ie=C==null?void 0:C.value)==null?void 0:ie.address),amount:I,byAmountIn:B,pools:ae}),ae){const de=await M.value.swapInPools({from:P((se=E==null?void 0:E.value)==null?void 0:se.address),target:P((Ye=C==null?void 0:C.value)==null?void 0:Ye.address),amount:new Zn(I),byAmountIn:B,pools:ae});if(console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ res:",de),de){const z={isExceed:de==null?void 0:de.isExceed,amountIn:(ue=(oe=de==null?void 0:de.routeData)==null?void 0:oe.amountIn)==null?void 0:ue.toString(),amountOut:(me=(Ge=de==null?void 0:de.routeData)==null?void 0:Ge.amountOut)==null?void 0:me.toString(),routes:L((we=de==null?void 0:de.routeData)==null?void 0:we.routes)};console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ forMatRes:",z);const ce=j(z,(kt=E==null?void 0:E.value)==null?void 0:kt.decimals,(pe=C==null?void 0:C.value)==null?void 0:pe.decimals);return console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ priceImpact:",ce),{...z,priceImpact:ce,fromCoinAddress:(ye=E==null?void 0:E.value)==null?void 0:ye.address,toCoinAddress:(vt=C==null?void 0:C.value)==null?void 0:vt.address,id:x,originRes:de==null?void 0:de.routeData}}return null}return null}catch(ae){return console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ e:",ae),null}}},T=async(E,C,I,B,J)=>{try{console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:246 ~ getRouterSwapPayload ~ router:",E),console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:246 ~ getRouterSwapPayload ~ router.originRes:",E.originRes);const U=new Dr,x={routers:E.originRes.routes,byAmountIn:C,txb:U,slippage:I,isMergeTragetCoin:!0,refreshAllCoins:!0};console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:258 ~ getRouterSwapPayload ~ routerParams:",JSON.stringify(x,null,2));const w=await M.value.fastRouterSwap(x);return console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:122 ~ function ~ res:",U),S(U)}catch(U){console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:49 ~ function ~ error:",U)}},{getTokenBySymbol:te}=Ds("Sui");return{getFindRouter:q,getRouterSwapPayload:T,getTokenInfo:async E=>{if(console.log("🚀🚀🚀 ~ file: useSuiAggregator.ts:288 ~ getTokenInfo ~ address:",E),e[E])return e[E];{const C=await te(e,E),I={[E]:C},B={...e,...I};t(B);try{localStorage.setItem("SuiTokenObj",JSON.stringify(B))}catch(J){console.log("🚀 ~ file: useSuiAggregator.ts:295 ~ getTokenInfo ~ err:",J)}return C}}}}const Xu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",Yu="data:image/png;base64,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",Ju="data:image/png;base64,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",Et=e=>(pr("data-v-0fc2a392"),e=e(),vr(),e),il={class:"aggregator-setting-content"},sl={key:0,class:"liquidity-source"},ol={class:"liquidity-source-title"},al={class:"title-left"},ll=Et(()=>F("svg",{"aria-hidden":"true",class:"icon"},[F("use",{"xlink:href":"#icon-icon_liquiditysources2"})],-1)),ul=Et(()=>F("span",null,"Liquidity Sources",-1)),cl={class:"title-right plus-switch plus-liquidity-switch"},hl=Et(()=>F("span",null,"Select all",-1)),fl={class:"liquidity-source-content"},dl=Et(()=>F("div",{class:"liquidity-source-text"},"Disable/Enable Liquidity Sources",-1)),gl={class:"liquidity-source-list-box"},pl={class:"dex-source-box"},vl={class:"group-source-switch plus-switch plus-liquidity-switch"},ml=Et(()=>F("span",null,"DEX",-1)),wl={class:"liquidity-source-list"},yl={class:"left"},Ml={alt:""},bl={class:"right plus-switch plus-liquidity-switch"},_l={key:1,class:"no-allowed"},Al={class:"other-source-box"},Cl={class:"group-source-switch plus-switch plus-liquidity-switch"},Sl=Et(()=>F("span",null,"Other",-1)),Il={class:"liquidity-source-list"},Ol={class:"left"},El={alt:""},kl={class:"right plus-switch plus-liquidity-switch"},Tl={class:"routing-preference"},Bl=Et(()=>F("div",{class:"routing-preference-title"},[F("svg",{"aria-hidden":"true",class:"icon"},[F("use",{"xlink:href":"#icon-icon_routingpreference"})]),F("span",null,"Routing Preference")],-1)),Rl={class:"routing-preference-content"},Nl={class:"routing-preference-list"},Pl={class:"routing-preference-item plus-switch plus-liquidity-switch"},jl=Et(()=>F("span",null,"Support order split",-1)),Ll={class:"action-btn"},Fl=dr({__name:"aggregator-setting-modal",emits:["close","modalConfirm"],setup(e,{emit:t}){const r=t,i=Ur(),s=Ie(()=>i),l=Ie(()=>(console.log("🚀🚀🚀 ~ file: aggregator-setting-modal.vue:121 ~ constliquiditySourceList:any=computed ~ store.value.liquiditySourceList:",s.value.liquiditySourceList),s.value.liquiditySourceList)),a=Ie(()=>s.value.includeRoutes),c=Ie(()=>s.value.supportDepth3),p=at([]),v=at(),M=at(),_=at(),A=C=>{const I={};C.forEach(B=>{I[B.name]=B.status}),_.value=I};$t(()=>[l.value,a.value],([C,I])=>{C&&C.length>0&&(p.value=C,console.log("🚀 ~ file: aggregator-setting-modal.vue:144 ~ liquiditySourceList:",C),A(C)),I&&(v.value=I)},{immediate:!0,deep:!0});const S=Ie(()=>{var C;return(C=p.value)==null?void 0:C.filter(I=>(I==null?void 0:I.type)==="dex")}),D=Ie(()=>{var C;return(C=p.value)==null?void 0:C.filter(I=>(I==null?void 0:I.type)==="other")});$t(()=>c.value,C=>{C&&(M.value=C)},{immediate:!0});const j=C=>{v.value=C},P=C=>{const I=_.value[C.name]=="open"?"close":"open";_.value[C.name]=I},H=()=>{const C=p.value.map(J=>({...J,status:_.value[J.name]}));console.log("🚀🚀🚀 ~ file: aggregator-setting-modal.vue:192 ~ result ~ result:",C);const I=C.filter(J=>J.status=="open"||J.status=="Open");I&&I.length>1?localStorage.setItem("plusChecked1","open"):localStorage.setItem("plusChecked1","close"),i.setAggregatorSetting(C,v.value,M.value),console.log("🚀🚀🚀 ~ file: aggregator-setting-modal.vue:195 ~ confirm ~ result:",C);const B=new Event("updateSwapParams");window.dispatchEvent(B),r("modalConfirm",C)},L=at(!0),q=C=>{L.value=!L.value,p.value.forEach(I=>{const B=(I==null?void 0:I.name)=="Cetus"||C?"open":"close";_.value[I==null?void 0:I.name]=B})},T=at(!0),te=at(!0),W=C=>{T.value=!T.value,S.value.forEach(I=>{const B=(I==null?void 0:I.name)=="Cetus"||C?"open":"close";_.value[I==null?void 0:I.name]=B})},E=C=>{te.value=!te.value,D.value.forEach(I=>{const B=C?"open":"close";_.value[I==null?void 0:I.name]=B})};return $t(_.value,C=>{var I,B;if(C)if(console.log("🚀 ~ watch ~ newValue:",C),console.log("🚀 ~ watch ~ sourceList:",p.value),console.log("🚀 ~ watch ~ dexSourceList:",S.value),Object.keys(C).filter(U=>U!=="Cetus").every(U=>C[U]==="open"))L.value=!0,T.value=!0,te.value=!0;else{L.value=!1;const U=S.value.filter(w=>(C==null?void 0:C[w==null?void 0:w.name])==="open"),x=D.value.filter(w=>(C==null?void 0:C[w==null?void 0:w.name])==="open");(U==null?void 0:U.length)>0&&(U==null?void 0:U.length)===((I=S==null?void 0:S.value)==null?void 0:I.length)?T.value=!0:T.value=!1,(x==null?void 0:x.length)>0&&(x==null?void 0:x.length)===((B=D==null?void 0:D.value)==null?void 0:B.length)?te.value=!0:te.value=!1}},{immediate:!0}),(C,I)=>{const B=rs,J=ns,U=ts("image");return fe(),bt(ir(fi),{title:"Customize Routing",class:"new-modal-have-radius",footer:null,visible:!0,width:"460px",onCancel:I[5]||(I[5]=x=>C.$emit("close"))},{default:nr(()=>[F("div",il,[p.value&&p.value.length>0?(fe(),Se("div",sl,[F("div",ol,[F("div",al,[ll,ul,_e(Us,{type:"liquiditySources","xlink-href":"#icon-icon_tips"})]),F("div",cl,[hl,_e(B,{class:"liquidity-switch",checked:L.value,onClick:I[0]||(I[0]=x=>{q(x)})},null,8,["checked"])])]),F("div",fl,[dl,F("div",gl,[F("div",pl,[F("div",vl,[ml,_e(B,{class:"liquidity-switch",checked:T.value,onClick:I[1]||(I[1]=x=>{W(x)})},null,8,["checked"])]),F("div",wl,[(fe(!0),Se(sr,null,or(S.value,x=>(fe(),Se("div",{key:x.name,class:"liquidity-source-item"},[F("div",yl,[Vn(F("img",Ml,null,512),[[U,x.logo]]),F("span",null,Ae(x.name),1)]),F("div",bl,[x.name!=="Cetus"?(fe(),bt(B,{key:0,class:"liquidity-switch",checked:_.value[x.name]=="open",onClick:w=>P(x)},null,8,["checked","onClick"])):(fe(),Se("div",_l,[_e(B,{class:"liquidity-switch lock-switch",checked:!0})]))])]))),128))])]),F("div",Al,[F("div",Cl,[Sl,_e(B,{class:"liquidity-switch",checked:te.value,onClick:I[2]||(I[2]=x=>{E(x)})},null,8,["checked"])]),F("div",Il,[(fe(!0),Se(sr,null,or(D.value,x=>(fe(),Se("div",{key:x.name,class:"liquidity-source-item"},[F("div",Ol,[Vn(F("img",El,null,512),[[U,x.logo]]),F("span",null,Ae(x.name),1)]),F("div",kl,[_e(B,{class:"liquidity-switch",checked:_.value[x.name]=="open",onClick:w=>P(x)},null,8,["checked","onClick"])])]))),128))])])])])])):_t("",!0),F("div",Tl,[Bl,F("div",Rl,[F("div",Nl,[F("div",Pl,[jl,_e(B,{checked:v.value=="open",onChange:I[3]||(I[3]=x=>j(v.value=="open"?"close":"open"))},null,8,["checked"])])])])]),F("div",Ll,[_e(J,{class:"max-btn cancels-btn",onClick:I[4]||(I[4]=x=>C.$emit("close"))},{default:nr(()=>[Br("Cancel")]),_:1}),_e(J,{class:"confirm-btn",onClick:H},{default:nr(()=>[Br("Confirm")]),_:1})])])]),_:1})}}});const Hu=gr(Fl,[["__scopeId","data-v-0fc2a392"]]),ql=dr({props:{text:{type:String,default:""}},setup(e){const{t}=is(),{$notify:r}=ss();return{handleCopy:s=>{if(navigator.clipboard)navigator.clipboard.writeText(s);else{const l=document.createElement("input");l.readOnly=!0,document.body.appendChild(l),l.value=s,l.select(),document.execCommand("Copy"),document.body.removeChild(l)}r.success({icon:_r("svg",{class:{icon:!0},"aria-hidden":!0},[_r("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:_r("div",{class:"notification-title"},[_r("span",{innerHTML:t("tips.copySuccess")},null)]),class:"ant-notification-copy"})}}}});const Dl=e=>(pr("data-v-58075ffa"),e=e(),vr(),e),Ul=Dl(()=>F("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),xl=[Ul];function Wl(e,t,r,i,s,l){return fe(),Se("svg",{class:"copy-icon","aria-hidden":"true",onClick:t[0]||(t[0]=a=>e.handleCopy(e.text))},xl)}const Vl=gr(ql,[["render",Wl],["__scopeId","data-v-58075ffa"]]),$l=dr({props:{type:{type:String,default:""},value:{type:String,default:""}},setup(e){const t=Ur(),r=Ie(()=>t),i=Ie(()=>r.value.currentExplorer);return{getExplorerUrl:vi,currentExplorer:i}}});const Zl=e=>(pr("data-v-9f3037f6"),e=e(),vr(),e),Kl=["href"],zl=Zl(()=>F("svg",{class:"icon icon-up","aria-hidden":"true"},[F("use",{"xlink:href":"#icon-icon_link"})],-1)),Xl=[zl];function Yl(e,t,r,i,s,l){return fe(),Se("a",{target:"_blank",class:"jump-icon",href:("getExplorerUrl"in e?e.getExplorerUrl:ir(vi))(e.currentExplorer,e.type,e.value)},Xl,8,Kl)}const Jl=gr($l,[["render",Yl],["__scopeId","data-v-9f3037f6"]]),Hl={CETUS:"Cetus",DEEPBOOK:"DeepBook",KRIYA:"Kriya V2",KRIYAV3:"Kriya V3",FLOWX:"FlowX V2",FLOWXV3:"FlowX V3",TURBOS:"Turbos",AFTERMATH:"Aftermath",HAEDAL:"Haedal",VOLO:"Volo",AFSUI:"Aftermath LSD"},Gl=dr({components:{Modal:fi,CoinImg:ci,CopyBtn:Vl,ExplorerLink:Jl},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e){const{getTokenInfo:t}=nl(),r=pi(),i=Ie(()=>r==null?void 0:r.tokensObj),s=Ur(),l=Ie(()=>s==null?void 0:s.liquiditySourceObj),a=at(!1);os(()=>{a.value=!0});const c=at([]),p=at({}),v=async L=>{for(let q=0;q<(L==null?void 0:L.length);q++){const T=L[q].path;for(let te=0;te<(T==null?void 0:T.length);te++){const W=T[te];console.log(W,"path##");const E=await t(W==null?void 0:W.from),C=await t(W==null?void 0:W.target),I=(E==null?void 0:E.logoURI)||(E==null?void 0:E.logo_url)||"",B=(C==null?void 0:C.logoURI)||(C==null?void 0:C.logo_url)||"";p.value[W==null?void 0:W.from]={...E,coinImg:I},p.value[W==null?void 0:W.target]={...C,coinImg:B},console.log(p.value,"##routerTokenMap.value")}}console.log("🚀🚀🚀 ~ file: router-modal.vue:189 ~ setup ~ routerTokenMap:",p)};$t(()=>{var L;return[a.value,(L=e==null?void 0:e.suiPreSwapdata)==null?void 0:L.routes]},([L,q])=>{L&&(M(q),v(q))},{immediate:!0,deep:!0});const M=async L=>{var T,te,W,E,C;const q=[];for(let I=0;I<(L==null?void 0:L.length);I++){const B=L[I],J=[];for(let x=0;x<((T=B==null?void 0:B.path)==null?void 0:T.length);x++){const w=B==null?void 0:B.path[x];console.log("🚀 ~ file: router-modal.vue:241 ~ path ~ p:",w);const n=(w==null?void 0:w.feeRate)&&Number(w==null?void 0:w.feeRate)&&it(w==null?void 0:w.feeRate).mul(100).toString()+"%"||void 0,u=n;J.push({poolAddress:w==null?void 0:w.id,fee:n,provider:Hl[w==null?void 0:w.provider],providerImg:(E=(W=l==null?void 0:l.value)==null?void 0:W[(te=w==null?void 0:w.provider)==null?void 0:te.toUpperCase()])==null?void 0:E.logo,from:w==null?void 0:w.from,to:w==null?void 0:w.target,displayFeeOrVersion:u})}const U=Ws(it(B==null?void 0:B.amountIn).div((C=e==null?void 0:e.suiPreSwapdata)==null?void 0:C.amountIn).mul(100).toString(),1);q.push({path:J,proportion:U,amountOut:B==null?void 0:B.amountOut})}if(console.log("🚀🚀🚀 ~ file: router-modal.vue:182 ~ routerList ~ result:",q),(q==null?void 0:q.length)<2){c.value=q;return}c.value=q==null?void 0:q.sort((I,B)=>it(I==null?void 0:I.amountOut).minus(B==null?void 0:B.amountOut).lt(0))};$t(()=>[c.value],([L])=>{console.log("🚀 ~ file: router-modal.vue:284 ~ watch ~ routerList:",L)});const _=Ie(()=>{var L,q;return((L=e==null?void 0:e.fromCoin)==null?void 0:L.logoURI)||((q=e==null?void 0:e.fromCoin)==null?void 0:q.logo_url)||""}),A=Ie(()=>{var L,q;return((L=e==null?void 0:e.toCoin)==null?void 0:L.logoURI)||((q=e==null?void 0:e.toCoin)==null?void 0:q.logo_url)||""}),S=Ie(()=>{var E;const L=[];let q=it(0);(E=c==null?void 0:c.value)==null||E.forEach((C,I)=>{q=q.plus(C.proportion);const B=C.proportion.split(".");L.push({value:C.proportion,int:B[0],decimal:B[1],pathIndex:I})});let T=it(100).minus(q).toNumber();const te=L.sort((C,I)=>Number(I.decimal)-Number(C.decimal));if(T)for(let C=0;C<te.length&&T;C++)te[C].value=it(te[C].value).plus(.1).toString(),T=it(T).minus(.1).toNumber();return console.log("🚀🚀🚀 ~ file: router-modal.vue:182 ~ routerList ~ sortByDecimalPart:",te),Object.fromEntries(te.map(C=>[C.pathIndex,C]))}),D=Ie(()=>{var L;return((L=c==null?void 0:c.value)==null?void 0:L.length)===1}),j=Ie(()=>{var q;const L={};return(q=c==null?void 0:c.value)==null||q.forEach(T=>{var te;(te=T==null?void 0:T.path)==null||te.forEach(W=>{var E,C,I,B;console.log("🚀 ~ file: router-modal.vue:343 ~ route?.path?.forEach ~ p:",W),((E=W==null?void 0:W.provider)==null?void 0:E.indexOf("Kriya"))>-1?L.Kriya=Ar.KRIYA:((C=W==null?void 0:W.provider)==null?void 0:C.indexOf("Aftermath"))>-1?L.Aftermath=Ar.AFTERMATH:((I=W==null?void 0:W.provider)==null?void 0:I.indexOf("FlowX"))>-1?L.FlowX=Ar.FLOWX:L[W==null?void 0:W.provider]=Ar[(B=W==null?void 0:W.provider)==null?void 0:B.toUpperCase()]})}),Object.values(L)});$t(()=>j.value,L=>{console.log("providerList newValue: ",L)});const P=Ie(()=>{var L,q,T,te,W,E,C,I,B,J,U,x,w;if(((q=(L=e==null?void 0:e.suiPreSwapdata)==null?void 0:L.routes)==null?void 0:q.length)===1)if(((E=(W=(te=(T=e==null?void 0:e.suiPreSwapdata)==null?void 0:T.routes)==null?void 0:te[0])==null?void 0:W.path)==null?void 0:E.length)>1){const n=[(C=e==null?void 0:e.fromCoin)==null?void 0:C.symbol];return(U=(J=(B=(I=e==null?void 0:e.suiPreSwapdata)==null?void 0:I.routes)==null?void 0:B[0])==null?void 0:J.path)==null||U.forEach((u,d)=>{var y,b;n.push((b=(y=i==null?void 0:i.value)==null?void 0:y[u==null?void 0:u.target])==null?void 0:b.symbol)}),n==null?void 0:n.join(" > ")}else return`${(x=e==null?void 0:e.fromCoin)==null?void 0:x.symbol} > ${(w=e==null?void 0:e.toCoin)==null?void 0:w.symbol}`;return""}),H=Ie(()=>{var L;return(L=c==null?void 0:c.value)==null?void 0:L.length});return{fromCoinImg:_,toCoinImg:A,routerList:c,proportionObj:S,isSingleRoute:D,onlyOneRouteText:P,routeNum:H,providerList:j,addCommom:dn,addressAbridge:mi,routerTokenMap:p}}});const Rn=e=>(pr("data-v-e821bb40"),e=e(),vr(),e),Ql=Rn(()=>F("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[F("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),eu={class:"swap-router-modal-content"},tu={class:"simple-path"},ru={key:0},nu={key:1},iu={class:"provider-img-list"},su=Rn(()=>F("div",null,null,-1)),ou={class:"top"},au={class:"from-token"},lu={class:"num"},uu={class:"symbol"},cu={class:"to-token"},hu={class:"num"},fu={class:"symbol"},du={class:"from-coin-img"},gu={class:"to-coin-img"},pu={class:"router-box"},vu={class:"proportion"},mu={class:"pools"},wu={class:"coin-pair"},yu={class:"name"},Mu={key:0,class:"fee"},bu={key:0,class:"pool-info"},_u=Rn(()=>F("div",{class:"title"},"Pool Address",-1)),Au={class:"right"},Cu={class:"pool-address"},Su={class:"coin-info"},Iu={class:"symbol-and-name"},Ou={class:"symbol"},Eu={class:"name"},ku={class:"right"},Tu={class:"coin-info"},Bu={class:"symbol-and-name"},Ru={class:"symbol"},Nu={class:"name"},Pu={class:"right"};function ju(e,t,r,i,s,l){const a=tr("CoinImg"),c=tr("CopyBtn"),p=tr("ExplorerLink"),v=tr("Modal");return fe(),bt(v,{class:"swap-route-modal",title:"Route",width:"880px",visible:!0,footer:null,onCancel:t[0]||(t[0]=M=>e.$emit("onClose"))},{closeIcon:nr(()=>[Ql]),default:nr(()=>{var M,_,A,S,D,j;return[F("div",eu,[F("div",tu,[e.routeNum===1?(fe(),Se("span",ru,Ae(e.onlyOneRouteText),1)):(fe(),Se("span",nu,Ae(e.routeNum)+" Steams",1)),F("div",iu,[(fe(!0),Se(sr,null,or(e.providerList,P=>(fe(),bt(a,{key:P,url:P},null,8,["url"]))),128))]),su]),F("div",ou,[F("div",au,[_e(a,{url:(M=e.fromCoin)==null?void 0:M.logo_url},null,8,["url"]),F("span",lu,Ae(("addCommom"in e?e.addCommom:ir(dn))(e.fromCoinAmount)),1),F("span",uu,Ae((_=e.fromCoin)==null?void 0:_.symbol),1)]),F("div",cu,[F("span",hu,Ae(("addCommom"in e?e.addCommom:ir(dn))(e.toCoinAmount)),1),F("span",fu,Ae((A=e.toCoin)==null?void 0:A.symbol),1),_e(a,{url:(S=e.toCoin)==null?void 0:S.logo_url},null,8,["url"])])]),F("div",{class:$n(e.isSingleRoute?"router-content is-single":"router-content")},[F("div",du,[_e(a,{url:(D=e.fromCoin)==null?void 0:D.logo_url},null,8,["url"])]),F("div",gu,[_e(a,{url:(j=e.toCoin)==null?void 0:j.logo_url},null,8,["url"])]),F("div",pu,[(fe(!0),Se(sr,null,or(e.routerList,(P,H)=>{var L,q;return fe(),Se("div",{key:`route-${H}`,class:"router"},[F("div",vu,Ae((q=(L=e.proportionObj)==null?void 0:L[H])==null?void 0:q.value)+"%",1),F("div",mu,[(fe(!0),Se(sr,null,or(P.path,(T,te)=>{var W,E,C,I,B,J,U,x,w,n,u,d;return fe(),Se("div",{key:`route-pool-${te}`,class:"pool-item"},[F("div",wu,[_e(a,{url:e.routerTokenMap&&((W=e.routerTokenMap[T.from])==null?void 0:W.coinImg)},null,8,["url"]),_e(a,{url:e.routerTokenMap&&((E=e.routerTokenMap[T.to])==null?void 0:E.coinImg)},null,8,["url"])]),F("span",yu,Ae(T==null?void 0:T.provider),1),T!=null&&T.displayFeeOrVersion?(fe(),Se("span",Mu,Ae(T==null?void 0:T.displayFeeOrVersion),1)):_t("",!0),e.routerTokenMap&&e.routerTokenMap[T.from]&&e.routerTokenMap&&e.routerTokenMap[T.to]?(fe(),Se("div",{key:1,class:$n((T==null?void 0:T.provider)==="FlowX V2"?"pool-detail-box no-pool":"pool-detail-box")},[(T==null?void 0:T.provider)!=="FlowX V2"?(fe(),Se("div",bu,[_u,F("div",Au,[F("span",Cu,Ae(("addressAbridge"in e?e.addressAbridge:ir(mi))(T==null?void 0:T.poolAddress)),1),_e(c,{text:T==null?void 0:T.poolAddress},null,8,["text"]),_e(p,{type:"poolAddress",value:T==null?void 0:T.poolAddress},null,8,["value"])])])):_t("",!0),F("div",Su,[_e(a,{url:e.routerTokenMap&&((C=e.routerTokenMap[T.from])==null?void 0:C.coinImg)},null,8,["url"]),F("div",Iu,[F("div",Ou,Ae(e.routerTokenMap&&((I=e.routerTokenMap[T.from])==null?void 0:I.symbol)),1),F("div",Eu,Ae(e.routerTokenMap&&((B=e.routerTokenMap[T.from])==null?void 0:B.name)),1)]),F("div",ku,[_e(c,{text:e.routerTokenMap&&((J=e.routerTokenMap[T.from])==null?void 0:J.address)},null,8,["text"]),_e(p,{type:"coin",value:e.routerTokenMap&&((U=e.routerTokenMap[T.from])==null?void 0:U.address)},null,8,["value"])])]),F("div",Tu,[_e(a,{url:e.routerTokenMap&&((x=e.routerTokenMap[T.to])==null?void 0:x.coinImg)},null,8,["url"]),F("div",Bu,[F("div",Ru,Ae(e.routerTokenMap&&((w=e.routerTokenMap[T.to])==null?void 0:w.symbol)),1),F("div",Nu,Ae(e.routerTokenMap&&((n=e.routerTokenMap[T.to])==null?void 0:n.name)),1)]),F("div",Pu,[_e(c,{text:e.routerTokenMap&&((u=e.routerTokenMap[T.to])==null?void 0:u.address)},null,8,["text"]),_e(p,{type:"coin",value:e.routerTokenMap&&((d=e.routerTokenMap[T.to])==null?void 0:d.address)},null,8,["value"])])])],2)):_t("",!0)])}),128))])])}),128))])],2)])]}),_:1})}const Gu=gr(Gl,[["render",ju],["__scopeId","data-v-e821bb40"]]);var Nn={};(function e(t,r,i,s){var l=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!t.OffscreenCanvas)return!1;var f=new OffscreenCanvas(1,1),h=f.getContext("2d");h.fillRect(0,0,1,1);var g=f.transferToImageBitmap();try{h.createPattern(g,"no-repeat")}catch{return!1}return!0}();function p(){}function v(f){var h=r.exports.Promise,g=h!==void 0?h:t.Promise;return typeof g=="function"?new g(f):(f(p,p),null)}var M=function(f,h){return{transform:function(g){if(f)return g;if(h.has(g))return h.get(g);var o=new OffscreenCanvas(g.width,g.height),m=o.getContext("2d");return m.drawImage(g,0,0),h.set(g,o),o},clear:function(){h.clear()}}}(c,new Map),_=function(){var f=Math.floor(16.666666666666668),h,g,o={},m=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(R){var N=Math.random();return o[N]=requestAnimationFrame(function k($){m===$||m+f-1<$?(m=$,delete o[N],R()):o[N]=requestAnimationFrame(k)}),N},g=function(R){o[R]&&cancelAnimationFrame(o[R])}):(h=function(R){return setTimeout(R,f)},g=function(R){return clearTimeout(R)}),{frame:h,cancel:g}}(),A=function(){var f,h,g={};function o(m){function R(N,k){m.postMessage({options:N||{},callback:k})}m.init=function(k){var $=k.transferControlToOffscreen();m.postMessage({canvas:$},[$])},m.fire=function(k,$,K){if(h)return R(k,null),h;var G=Math.random().toString(36).slice(2);return h=v(function(le){function Q(re){re.data.callback===G&&(delete g[G],m.removeEventListener("message",Q),h=null,M.clear(),K(),le())}m.addEventListener("message",Q),R(k,G),g[G]=Q.bind(null,{data:{callback:G}})}),h},m.reset=function(){m.postMessage({reset:!0});for(var k in g)g[k](),delete g[k]}}return function(){if(f)return f;if(!i&&l){var m=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{f=new Worker(URL.createObjectURL(new Blob([m])))}catch(R){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",R),null}o(f)}return f}}(),S={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function D(f,h){return h?h(f):f}function j(f){return f!=null}function P(f,h,g){return D(f&&j(f[h])?f[h]:S[h],g)}function H(f){return f<0?0:Math.floor(f)}function L(f,h){return Math.floor(Math.random()*(h-f))+f}function q(f){return parseInt(f,16)}function T(f){return f.map(te)}function te(f){var h=String(f).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:q(h.substring(0,2)),g:q(h.substring(2,4)),b:q(h.substring(4,6))}}function W(f){var h=P(f,"origin",Object);return h.x=P(h,"x",Number),h.y=P(h,"y",Number),h}function E(f){f.width=document.documentElement.clientWidth,f.height=document.documentElement.clientHeight}function C(f){var h=f.getBoundingClientRect();f.width=h.width,f.height=h.height}function I(f){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=f,h}function B(f,h,g,o,m,R,N,k,$){f.save(),f.translate(h,g),f.rotate(R),f.scale(o,m),f.arc(0,0,1,N,k,$),f.restore()}function J(f){var h=f.angle*(Math.PI/180),g=f.spread*(Math.PI/180);return{x:f.x,y:f.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:f.startVelocity*.5+Math.random()*f.startVelocity,angle2D:-h+(.5*g-Math.random()*g),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:f.color,shape:f.shape,tick:0,totalTicks:f.ticks,decay:f.decay,drift:f.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:f.gravity*3,ovalScalar:.6,scalar:f.scalar,flat:f.flat}}function U(f,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var g=h.tick++/h.totalTicks,o=h.x+h.random*h.tiltCos,m=h.y+h.random*h.tiltSin,R=h.wobbleX+h.random*h.tiltCos,N=h.wobbleY+h.random*h.tiltSin;if(f.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-g)+")",f.beginPath(),a&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))f.fill(d(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(R-o)*.1,Math.abs(N-m)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var k=Math.PI/10*h.wobble,$=Math.abs(R-o)*.1,K=Math.abs(N-m)*.1,G=h.shape.bitmap.width*h.scalar,le=h.shape.bitmap.height*h.scalar,Q=new DOMMatrix([Math.cos(k)*$,Math.sin(k)*$,-Math.sin(k)*K,Math.cos(k)*K,h.x,h.y]);Q.multiplySelf(new DOMMatrix(h.shape.matrix));var re=f.createPattern(M.transform(h.shape.bitmap),"no-repeat");re.setTransform(Q),f.globalAlpha=1-g,f.fillStyle=re,f.fillRect(h.x-G/2,h.y-le/2,G,le),f.globalAlpha=1}else if(h.shape==="circle")f.ellipse?f.ellipse(h.x,h.y,Math.abs(R-o)*h.ovalScalar,Math.abs(N-m)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):B(f,h.x,h.y,Math.abs(R-o)*h.ovalScalar,Math.abs(N-m)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var ne=Math.PI/2*3,ie=4*h.scalar,se=8*h.scalar,Ye=h.x,oe=h.y,ue=5,Ge=Math.PI/ue;ue--;)Ye=h.x+Math.cos(ne)*se,oe=h.y+Math.sin(ne)*se,f.lineTo(Ye,oe),ne+=Ge,Ye=h.x+Math.cos(ne)*ie,oe=h.y+Math.sin(ne)*ie,f.lineTo(Ye,oe),ne+=Ge;else f.moveTo(Math.floor(h.x),Math.floor(h.y)),f.lineTo(Math.floor(h.wobbleX),Math.floor(m)),f.lineTo(Math.floor(R),Math.floor(N)),f.lineTo(Math.floor(o),Math.floor(h.wobbleY));return f.closePath(),f.fill(),h.tick<h.totalTicks}function x(f,h,g,o,m){var R=h.slice(),N=f.getContext("2d"),k,$,K=v(function(G){function le(){k=$=null,N.clearRect(0,0,o.width,o.height),M.clear(),m(),G()}function Q(){i&&!(o.width===s.width&&o.height===s.height)&&(o.width=f.width=s.width,o.height=f.height=s.height),!o.width&&!o.height&&(g(f),o.width=f.width,o.height=f.height),N.clearRect(0,0,o.width,o.height),R=R.filter(function(re){return U(N,re)}),R.length?k=_.frame(Q):le()}k=_.frame(Q),$=le});return{addFettis:function(G){return R=R.concat(G),K},canvas:f,promise:K,reset:function(){k&&_.cancel(k),$&&$()}}}function w(f,h){var g=!f,o=!!P(h||{},"resize"),m=!1,R=P(h,"disableForReducedMotion",Boolean),N=l&&!!P(h||{},"useWorker"),k=N?A():null,$=g?E:C,K=f&&k?!!f.__confetti_initialized:!1,G=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,le;function Q(ne,ie,se){for(var Ye=P(ne,"particleCount",H),oe=P(ne,"angle",Number),ue=P(ne,"spread",Number),Ge=P(ne,"startVelocity",Number),me=P(ne,"decay",Number),we=P(ne,"gravity",Number),kt=P(ne,"drift",Number),pe=P(ne,"colors",T),ye=P(ne,"ticks",Number),vt=P(ne,"shapes"),he=P(ne,"scalar"),ae=!!P(ne,"flat"),de=W(ne),z=Ye,ce=[],Tt=f.width*de.x,X=f.height*de.y;z--;)ce.push(J({x:Tt,y:X,angle:oe,spread:ue,startVelocity:Ge,color:pe[z%pe.length],shape:vt[L(0,vt.length)],ticks:ye,decay:me,gravity:we,drift:kt,scalar:he,flat:ae}));return le?le.addFettis(ce):(le=x(f,ce,$,ie,se),le.promise)}function re(ne){var ie=R||P(ne,"disableForReducedMotion",Boolean),se=P(ne,"zIndex",Number);if(ie&&G)return v(function(Ge){Ge()});g&&le?f=le.canvas:g&&!f&&(f=I(se),document.body.appendChild(f)),o&&!K&&$(f);var Ye={width:f.width,height:f.height};k&&!K&&k.init(f),K=!0,k&&(f.__confetti_initialized=!0);function oe(){if(k){var Ge={getBoundingClientRect:function(){if(!g)return f.getBoundingClientRect()}};$(Ge),k.postMessage({resize:{width:Ge.width,height:Ge.height}});return}Ye.width=Ye.height=null}function ue(){le=null,o&&(m=!1,t.removeEventListener("resize",oe)),g&&f&&(document.body.contains(f)&&document.body.removeChild(f),f=null,K=!1)}return o&&!m&&(m=!0,t.addEventListener("resize",oe,!1)),k?k.fire(ne,Ye,ue):Q(ne,Ye,ue)}return re.reset=function(){k&&k.reset(),le&&le.reset()},re}var n;function u(){return n||(n=w(null,{useWorker:!0,resize:!0})),n}function d(f,h,g,o,m,R,N){var k=new Path2D(f),$=new Path2D;$.addPath(k,new DOMMatrix(h));var K=new Path2D;return K.addPath($,new DOMMatrix([Math.cos(N)*m,Math.sin(N)*m,-Math.sin(N)*R,Math.cos(N)*R,g,o])),K}function y(f){if(!a)throw new Error("path confetti are not supported in this browser");var h,g;typeof f=="string"?h=f:(h=f.path,g=f.matrix);var o=new Path2D(h),m=document.createElement("canvas"),R=m.getContext("2d");if(!g){for(var N=1e3,k=N,$=N,K=0,G=0,le,Q,re=0;re<N;re+=2)for(var ne=0;ne<N;ne+=2)R.isPointInPath(o,re,ne,"nonzero")&&(k=Math.min(k,re),$=Math.min($,ne),K=Math.max(K,re),G=Math.max(G,ne));le=K-k,Q=G-$;var ie=10,se=Math.min(ie/le,ie/Q);g=[se,0,0,se,-Math.round(le/2+k)*se,-Math.round(Q/2+$)*se]}return{type:"path",path:h,matrix:g}}function b(f){var h,g=1,o="#000000",m='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof f=="string"?h=f:(h=f.text,g="scalar"in f?f.scalar:g,m="fontFamily"in f?f.fontFamily:m,o="color"in f?f.color:o);var R=10*g,N=""+R+"px "+m,k=new OffscreenCanvas(R,R),$=k.getContext("2d");$.font=N;var K=$.measureText(h),G=Math.ceil(K.actualBoundingBoxRight+K.actualBoundingBoxLeft),le=Math.ceil(K.actualBoundingBoxAscent+K.actualBoundingBoxDescent),Q=2,re=K.actualBoundingBoxLeft+Q,ne=K.actualBoundingBoxAscent+Q;G+=Q+Q,le+=Q+Q,k=new OffscreenCanvas(G,le),$=k.getContext("2d"),$.font=N,$.fillStyle=o,$.fillText(h,re,ne);var ie=1/g;return{type:"bitmap",bitmap:k.transferToImageBitmap(),matrix:[ie,0,0,ie,-G*ie/2,-le*ie/2]}}r.exports=function(){return u().apply(this,arguments)},r.exports.reset=function(){u().reset()},r.exports.create=w,r.exports.shapeFromPath=y,r.exports.shapeFromText=b})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Nn,!1);const Qu=Nn.exports;Nn.exports.create;export{Hu as A,Zu as C,Gu as R,Xu as _,Ku as a,Yu as b,Qu as c,Ju as d,zu as g,nl as u};
