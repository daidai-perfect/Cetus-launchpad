import{_ as _a}from"./back.9f4eeea8.js";import{_ as $a,a as Aa}from"./token-warning-modal.55431709.js";import{_ as Sa,a as Ta}from"./network-tips.cf7c6d17.js";import{u as yn,c as Zt,a as Na}from"./sha256.3f9dd0c2.js";import{u as Rt,c as Rn,D as U,a as Jo,d as Oe,b as St,n as Bo,e as Ve,t as So,g as Fo,p as qi,s as Ct,f as Vn,h as Ui}from"./pool.8ac244d9.js";import{a as bn,r as R,y as ho,C as Ma,m as re,D as _e,b as Zo,e as kn,o as w,f as T,h as m,v as A,i as ye,z as Pe,c as ke,x as O,p as ot,k as it,q as go,t as pn,j as He,I as kr,E as wr,w as Ue,S as Cr,u as ge,B as xo,G as Ra,H as Oi,F as Wn,s as Pt,J as Ir,M as Pr,K as _r,l as La,L as To,N as qa}from"./entry.a00a8559.js";import{i as Qe}from"./import-icon.de3e6c66.js";import{_ as Ua}from"./assets-card.015a21f4.js";import{_ as $r,a as Ar,b as Oa,c as Ba}from"./new-add-or-create.3d2759e7.js";/* empty css              *//* empty css              */import{_ as Fa}from"./apr-tab.95e57e14.js";import{_ as Ea}from"./token-warning.fec2d20c.js";import{_ as Da}from"./apr-tips.db2c78fc.js";/* empty css              */import{p as ja}from"./precision.a7a6c57b.js";import{_ as Ha}from"./coin-select.7d24da04.js";import{_ as Xa}from"./status-block.57999031.js";import{_ as Sr}from"./icon-arrow_2x.948aedb2.js";import{_ as Tr}from"./icon-arrow_2x.4ffddb8e.js";/* empty css              */import{u as za}from"./notifi.473e08fd.js";import{_ as Nr}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import"./index.dcdf32c1.js";import"./img-no-Positions_2x.ac488fcd.js";import"./useWhale.774fbe1a.js";import"./index.77e76edc.js";const Va=bn({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const t=R(!1),o=R(null),i=R(0),r=R(20),a=Rt(),s=yn(),u=R(!1);ho(()=>{}),Ma(()=>{clearInterval(o.value)});const c=()=>{o.value=setInterval(()=>{var $;u.value||i.value<r.value&&(i.value+=1,i.value===r.value&&(($=e==null?void 0:e.poolInfo)!=null&&$.poolAddress&&a.updateCurrentPools(e.poolInfo.poolAddress,s.chainName),i.value=0))},1e3)},p=re(()=>s.slippage),g=()=>{n.emit("clearAll")},k=()=>{i.value=0,n.emit("clickRefresh")};_e(()=>e.poolInfo,$=>{$&&!o.value&&c()},{immediate:!0});const q=Zo();return{clickRefresh:k,isShowSwapSetting:t,countdown:i,autoRefreshTime:r,slippage:p,clearAll:g,checkNullObj:Rn,router:q}}});const Wa=e=>(ot("data-v-f484e6e0"),e=e(),it(),e),Ka={class:"title"},Ya={class:"left"},Ga=Wa(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Qa={class:"deposit-progress"};function Ja(e,n,t,o,i,r){var u,c;const a=$a,s=Sa;return w(),T("div",Ka,[m("div",Ya,[m("span",null,A(e.poolInfo?e.$t("common.concentratedLiquidity"):(c=(u=e.$route)==null?void 0:u.query)!=null&&c.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),m("div",{class:Pe(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[m("div",{class:"slippage-icon",onClick:n[0]||(n[0]=p=>e.isShowSwapSetting=!0)},[Ga,m("span",null,A(e.slippage)+"%",1)]),m("div",Qa,[ye(a,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])],2),e.isShowSwapSetting?(w(),ke(s,{key:0,onOnClose:n[1]||(n[1]=p=>e.isShowSwapSetting=!1)})):O("",!0)])}const Za=kn(Va,[["render",Ja],["__scopeId","data-v-f484e6e0"]]);const xa=bn({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const n=yn(),t=re(()=>n),o=R(""),i=R(""),r=R(""),a=Rt(),s=re(()=>a);_e(()=>[e.coin,s.value.tokensObj],([c,p])=>{var g;c?(i.value=p&&p[c.address]&&((g=p[c.address])==null?void 0:g.labels),o.value=c.name,r.value=c.symbol):(i.value="",o.value="",r.value="")},{immediate:!0,deep:!0});const u=re(()=>{var c,p,g;return e.coinIcon||((g=(p=s==null?void 0:s.value)==null?void 0:p.tokensObj[(c=e.coin)==null?void 0:c.address])==null?void 0:g.logo_url)||(t.value.theme==="default"?Qe("/image/coins/unknown.png"):Qe("/image/coins/sui-unknown.png"))});return{store:t,importIcon:Qe,coinName:o,coinLabels:i,coinSymbol:r,currentIcon:u}}}),el=e=>(ot("data-v-d0bce36a"),e=e(),it(),e),nl={class:"coin-block"},tl={class:"coin-info"},ol={class:"symbol"},il={key:0,class:"name"},rl={key:0,class:"label"},al=el(()=>m("div",null,[m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_on"})])],-1));function ll(e,n,t,o,i,r){const a=go("image");return w(),T("div",nl,[m("div",null,[pn(m("img",null,null,512),[[a,e.currentIcon]]),m("div",tl,[m("div",ol,A(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(w(),T("div",il,[He(A(e.coin.name)+" ",1),e.store.theme=="default"?(w(),T("span",rl,A(e.coinLabels?`(${e.coinLabels})`:""),1)):O("",!0)])):O("",!0)])]),al])}const sl=kn(xa,[["render",ll],["__scopeId","data-v-d0bce36a"]]),ul=bn({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})}},setup(){const e=yn();return{storeIndex:re(()=>e)}}});const cl={class:"unilateral"},dl={key:0,src:$r,alt:""},fl={key:1,src:Ar,alt:""},pl={key:2};function vl(e,n,t,o,i,r){return w(),T("div",cl,[m("div",null,[e.storeIndex.theme=="default"?(w(),T("img",dl)):(w(),T("img",fl)),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),T("p",pl,A(e.$t("tips.marketprice")),1)):O("",!0)])])}const ml=kn(ul,[["render",vl],["__scopeId","data-v-d81a96c0"]]),hl=bn({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=yn();return{storeIndex:re(()=>e)}}});const gl={class:"create-pool-lock"},yl={key:0,src:$r,alt:""},bl={key:1,src:Ar,alt:""};function kl(e,n,t,o,i,r){return w(),T("div",gl,[m("div",null,[e.storeIndex.theme=="default"?(w(),T("img",yl)):(w(),T("img",bl))])])}const wl=kn(hl,[["render",kl],["__scopeId","data-v-5d070e17"]]),Cl=bn({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,n){const t=R("");return{inpValue:t,changecurrentPrice:i=>{var a;console.log(i.target.value,"e.target.value"),console.log((a=e.fromCoin)==null?void 0:a.decimals,"==>props.fromCoin?.decimals");const r=new RegExp("[^\\d-]*(\\d*(?:\\.\\d*)?).*$");i.target.value=i.target.value.replace(r,"$1"),t.value=i.target.value,console.log(t.value,"===>inpValue.value"),n.emit("changecurrentPrice",t.value)}}}});const Il={class:"set-init-price"},Pl={class:"init-price-tips"};function _l(e,n,t,o,i,r){var s,u,c,p;const a=kr;return w(),T("div",Il,[ye(a,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((u=(s=e.$route)==null?void 0:s.query)!=null&&u.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),m("div",Pl,A((c=e.toCoin)==null?void 0:c.symbol)+" per "+A((p=e.fromCoin)==null?void 0:p.symbol),1)])}const $l=kn(Cl,[["render",_l],["__scopeId","data-v-9e71be9e"]]),Al=-443636;function Bi(e,n){const t=Sl(e),o=(t-Al)%n;return o>n/2?t-o+n:t-o}const Mr=new U("1.0001");function Sl(e){return e.log(Mr).toDP(0,U.ROUND_HALF_UP).toNumber()}function Fi(e){return Mr.pow(e)}const Tl=bn({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const t=R(""),o=R("");let i=R(""),r=R("");const a=wr(),s=yn(),u=re(()=>s),c=re(()=>u.value.chainName?Jo(u.value.chainName):{}),p=()=>{if(!(Number.isNaN(t.value)||Number(t.value)!==0&&!t.value||!e.poolInfo.tickSpacing))try{const f=Bi(new U(t.value.toString()),Number($.value.tickSpacing)),S=Fi(f+Number($.value.tickSpacing));if(e.pType=="Min"&&Number(S.toString())>=Number(r.value.toString()))return;const I=S.toString();n.emit("onInput",I)}catch{n.emit("onInput","")}},g=()=>{try{if(Number.isNaN(t.value)||!t.value||!e.poolInfo.tickSpacing)return;const f=Bi(new U(t.value),Number($.value.tickSpacing)),S=Fi(f-Number($.value.tickSpacing)),I=S.toString();if(e.pType=="Max"&&Number(S)<=Number(i.value))return;n.emit("onInput",I)}catch{n.emit("onInput","")}},k=f=>{let S=f.toString().replace(/[^\d.]/g,"");const I=/^\d+(\.\d+)?$/;S.split(".").length>2&&!I.exec(S)&&(S=S.substr(0,S.length-1)),o.value=String(S),console.log(S,"v===>")},q=f=>{var x,ie,ve,te;const{TickUtil:S,TickMath:I,getNearestTickByTick:b}=c.value;console.log("0519###onBlur###event###",f);const v=f.target.value;console.log("0519###onBlur###value###",v);let y;if(v==="0"){y=-443636,n.emit("onInput","0");return}else{const M=I.priceToTickIndex(new U(v),(x=$.value.token_a)==null?void 0:x.decimals,(ie=$.value.token_b)==null?void 0:ie.decimals);console.log("0519###onBlur###t###",M),y=b(Number(M),Number($.value.tickSpacing))}console.log("0519###onBlur###tick###",y);const E=I.tickIndexToPrice(new U(y),(ve=$.value.token_a)==null?void 0:ve.decimals,(te=$.value.token_b)==null?void 0:te.decimals);console.log("0519###onBlur###price###",E.toString()),n.emit("onInput",E.toString())};_e(()=>e.defaultMinPrice,(f,S)=>{f!==S&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),i.value=e.defaultMinPrice,console.log(i.value,"props.minPrice.value===>"))},{immediate:!0}),_e(()=>e.defaultMaxPrice,(f,S)=>{f!==S&&(r.value=e.defaultMaxPrice)},{immediate:!0}),_e(()=>o.value,f=>{console.log(f,"=sdajlaksjdkldas")},{immediate:!0}),_e(()=>[e.inputValue,a.query.action],([f])=>{if(console.log(f,"==>newValue"),f&&f!=="0"&&f!=="∞"){t.value=f;const I=f.toString().split(".")[1];o.value=f!=="0"&&f!=="∞"&&I&&I.length>6?Oe(f.toString(),6):f.toString()}else(f=="0"||f=="∞"||a.query.action)&&(o.value=f);console.log(o.value,"===> oValue.value")},{immediate:!0});const $=R({});_e(()=>e.poolInfo,(f,S)=>{f&&($.value=f)},{immediate:!0});const ce=R("");return _e(()=>e.currentPriceTab,f=>{ce.value=f},{immediate:!0}),console.log(e,"props=======>"),{addPrice:p,minusPrice:g,oValue:o,changeValue:k,isDisabled:ce,route:a,onBlur:q}}});const Nl={class:"set-price-item"},Ml={class:"title"},Rl={class:"input-box"},Ll={class:"minus-btn"},ql=["disabled"],Ul={class:"plus-btn"};function Ol(e,n,t,o,i,r){const a=kr,s=Cr;return w(),T("div",Nl,[m("div",Ml,A(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ye(s,{loading:e.loading,active:"",paragraph:!1},{default:Ue(()=>[m("div",Rl,[m("a",Ll,[m("div",{class:Pe(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:n[0]||(n[0]=(...u)=>e.minusPrice&&e.minusPrice(...u))},null,10,ql)]),ye(a,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=u=>e.oValue=u),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=u=>e.changeValue(u.target.value)),onBlur:n[3]||(n[3]=u=>e.onBlur(u))},null,8,["value","disabled"]),m("a",Ul,[m("div",{class:Pe(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[4]||(n[4]=(...u)=>e.addPrice&&e.addPrice(...u))},null,2)])])]),_:1},8,["loading"]),m("p",{class:Pe(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},A(e.toCoin&&e.toCoin.symbol)+" per "+A(e.fromCoin&&e.fromCoin.symbol),3)])}const Ei=kn(Tl,[["render",Ol],["__scopeId","data-v-782725c6"]]),Bl=bn({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let t=R(""),o=R(""),i=R(),r=R(!1),a=R(!1);const s=R({}),u=yn(),c=re(()=>u);ho(()=>{t.value=e.min,o.value=e.max}),_e(()=>e.currentPriceTab,(f,S)=>{f!==S&&(i.value=e.currentPriceTab)},{immediate:!0}),_e(()=>e.min,(f,S)=>{f!==S&&(t.value=f,console.log(e.min,"===> props.min"))}),_e(()=>e.max,(f,S)=>{f!==S&&(o.value=f)}),_e(()=>e.poolInfo,(f,S)=>{f&&(s.value=f)},{immediate:!0});const p=R("");_e(()=>e.intPrice,f=>{console.log(e.intPrice,"===>props.intPrice"),p.value=f},{immediate:!0,deep:!0});const g=f=>{console.log(f,"val===>123"),t.value=f,n.emit("onChangeMinPrice",f)},k=f=>{o.value=f,n.emit("onChangeMaxPrice",f)};_e(r,(f,S)=>{f!==S&&n.emit("onChangeFullRange",f)});const q=()=>{t.value=e.defaultMinPrice,o.value=e.defaultMaxPrice,a.value=!1,r.value=!1},$=()=>{a.value=!1,t.value="0",o.value="∞"};return _e(r,(f,S)=>{f!==S&&n.emit("onChangeFullRange",f)}),{store:c,changeMinPrice:g,changeMaxPrice:k,importIcon:Qe,resetPrice:q,changeShowUnderStand:()=>{r.value=!r.value,r.value?a.value=!0:q(),a.value||(t.value=e.defaultMinPrice,o.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:t,maxPrice:o,understand:$,isRadio:r,initPirce:p}}});const Fl={class:"set-price"},El={class:"card-container"},Dl={key:0,class:"card"},jl=["src"],Hl={key:1,class:"understand"},Xl={class:"left"},zl={class:"right"};function Vl(e,n,t,o,i,r){const a=Ei,s=Ei,u=xo;return w(),T("div",Fl,[m("div",El,[e.showUnderStand?(w(),T("div",Hl,[m("div",Xl,[m("p",null,A(e.$t("common.lowerEfficiency")),1),m("p",null,A(e.$t("common.lowerEfficiencyTips")),1)]),m("div",zl,[ye(u,{onClick:e.understand},{default:Ue(()=>[He(A(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(w(),T("div",Dl,[ye(a,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=c=>e.minPrice=c),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),ye(s,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=c=>e.maxPrice=c),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),m("img",{src:("importIcon"in e?e.importIcon:ge(Qe))("/image/lmg-line@2x.png"),alt:""},null,8,jl)]))])])}const Wl=kn(Bl,[["render",Vl],["__scopeId","data-v-d07618c3"]]);function xt(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Kl(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Rr(e){let n,t,o;e.length!==2?(n=xt,t=(s,u)=>xt(e(s),u),o=(s,u)=>e(s)-u):(n=e===xt||e===Kl?e:Yl,t=e,o=e);function i(s,u,c=0,p=s.length){if(c<p){if(n(u,u)!==0)return p;do{const g=c+p>>>1;t(s[g],u)<0?c=g+1:p=g}while(c<p)}return c}function r(s,u,c=0,p=s.length){if(c<p){if(n(u,u)!==0)return p;do{const g=c+p>>>1;t(s[g],u)<=0?c=g+1:p=g}while(c<p)}return c}function a(s,u,c=0,p=s.length){const g=i(s,u,c,p-1);return g>c&&o(s[g-1],u)>-o(s[g],u)?g-1:g}return{left:i,center:a,right:r}}function Yl(){return 0}function Gl(e){return e===null?NaN:+e}const Ql=Rr(xt),Jl=Ql.right;Rr(Gl).center;const Zl=Jl;class Di extends Map{constructor(n,t=ns){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),n!=null)for(const[o,i]of n)this.set(o,i)}get(n){return super.get(ji(this,n))}has(n){return super.has(ji(this,n))}set(n,t){return super.set(xl(this,n),t)}delete(n){return super.delete(es(this,n))}}function ji({_intern:e,_key:n},t){const o=n(t);return e.has(o)?e.get(o):t}function xl({_intern:e,_key:n},t){const o=n(t);return e.has(o)?e.get(o):(e.set(o,t),t)}function es({_intern:e,_key:n},t){const o=n(t);return e.has(o)&&(t=e.get(o),e.delete(o)),t}function ns(e){return e!==null&&typeof e=="object"?e.valueOf():e}const ts=Math.sqrt(50),os=Math.sqrt(10),is=Math.sqrt(2);function io(e,n,t){const o=(n-e)/Math.max(0,t),i=Math.floor(Math.log10(o)),r=o/Math.pow(10,i),a=r>=ts?10:r>=os?5:r>=is?2:1;let s,u,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(e*c),u=Math.round(n*c),s/c<e&&++s,u/c>n&&--u,c=-c):(c=Math.pow(10,i)*a,s=Math.round(e/c),u=Math.round(n/c),s*c<e&&++s,u*c>n&&--u),u<s&&.5<=t&&t<2?io(e,n,t*2):[s,u,c]}function rs(e,n,t){if(n=+n,e=+e,t=+t,!(t>0))return[];if(e===n)return[e];const o=n<e,[i,r,a]=o?io(n,e,t):io(e,n,t);if(!(r>=i))return[];const s=r-i+1,u=new Array(s);if(o)if(a<0)for(let c=0;c<s;++c)u[c]=(r-c)/-a;else for(let c=0;c<s;++c)u[c]=(r-c)*a;else if(a<0)for(let c=0;c<s;++c)u[c]=(i+c)/-a;else for(let c=0;c<s;++c)u[c]=(i+c)*a;return u}function Eo(e,n,t){return n=+n,e=+e,t=+t,io(e,n,t)[2]}function as(e,n,t){n=+n,e=+e,t=+t;const o=n<e,i=o?Eo(n,e,t):Eo(e,n,t);return(o?-1:1)*(i<0?1/-i:i)}function ls(e,n){let t;if(n===void 0)for(const o of e)o!=null&&(t<o||t===void 0&&o>=o)&&(t=o);else{let o=-1;for(let i of e)(i=n(i,++o,e))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function ss(e,n,t){e=+e,n=+n,t=(i=arguments.length)<2?(n=e,e=0,1):i<3?1:+t;for(var o=-1,i=Math.max(0,Math.ceil((n-e)/t))|0,r=new Array(i);++o<i;)r[o]=e+o*t;return r}var us={value:()=>{}};function ei(){for(var e=0,n=arguments.length,t={},o;e<n;++e){if(!(o=arguments[e]+"")||o in t||/[\s.]/.test(o))throw new Error("illegal type: "+o);t[o]=[]}return new eo(t)}function eo(e){this._=e}function cs(e,n){return e.trim().split(/^|\s+/).map(function(t){var o="",i=t.indexOf(".");if(i>=0&&(o=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:o}})}eo.prototype=ei.prototype={constructor:eo,on:function(e,n){var t=this._,o=cs(e+"",t),i,r=-1,a=o.length;if(arguments.length<2){for(;++r<a;)if((i=(e=o[r]).type)&&(i=ds(t[i],e.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++r<a;)if(i=(e=o[r]).type)t[i]=Hi(t[i],e.name,n);else if(n==null)for(i in t)t[i]=Hi(t[i],e.name,null);return this},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new eo(e)},call:function(e,n){if((i=arguments.length-2)>0)for(var t=new Array(i),o=0,i,r;o<i;++o)t[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(n,t)}};function ds(e,n){for(var t=0,o=e.length,i;t<o;++t)if((i=e[t]).name===n)return i.value}function Hi(e,n,t){for(var o=0,i=e.length;o<i;++o)if(e[o].name===n){e[o]=us,e=e.slice(0,o).concat(e.slice(o+1));break}return t!=null&&e.push({name:n,value:t}),e}var Do="http://www.w3.org/1999/xhtml";const Xi={svg:"http://www.w3.org/2000/svg",xhtml:Do,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yo(e){var n=e+="",t=n.indexOf(":");return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),Xi.hasOwnProperty(n)?{space:Xi[n],local:e}:e}function fs(e){return function(){var n=this.ownerDocument,t=this.namespaceURI;return t===Do&&n.documentElement.namespaceURI===Do?n.createElement(e):n.createElementNS(t,e)}}function ps(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lr(e){var n=yo(e);return(n.local?ps:fs)(n)}function vs(){}function ni(e){return e==null?vs:function(){return this.querySelector(e)}}function ms(e){typeof e!="function"&&(e=ni(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,s=o[i]=new Array(a),u,c,p=0;p<a;++p)(u=r[p])&&(c=e.call(u,u.__data__,p,r))&&("__data__"in u&&(c.__data__=u.__data__),s[p]=c);return new vn(o,this._parents)}function hs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function gs(){return[]}function qr(e){return e==null?gs:function(){return this.querySelectorAll(e)}}function ys(e){return function(){return hs(e.apply(this,arguments))}}function bs(e){typeof e=="function"?e=ys(e):e=qr(e);for(var n=this._groups,t=n.length,o=[],i=[],r=0;r<t;++r)for(var a=n[r],s=a.length,u,c=0;c<s;++c)(u=a[c])&&(o.push(e.call(u,u.__data__,c,a)),i.push(u));return new vn(o,i)}function Ur(e){return function(){return this.matches(e)}}function Or(e){return function(n){return n.matches(e)}}var ks=Array.prototype.find;function ws(e){return function(){return ks.call(this.children,e)}}function Cs(){return this.firstElementChild}function Is(e){return this.select(e==null?Cs:ws(typeof e=="function"?e:Or(e)))}var Ps=Array.prototype.filter;function _s(){return Array.from(this.children)}function $s(e){return function(){return Ps.call(this.children,e)}}function As(e){return this.selectAll(e==null?_s:$s(typeof e=="function"?e:Or(e)))}function Ss(e){typeof e!="function"&&(e=Ur(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,s=o[i]=[],u,c=0;c<a;++c)(u=r[c])&&e.call(u,u.__data__,c,r)&&s.push(u);return new vn(o,this._parents)}function Br(e){return new Array(e.length)}function Ts(){return new vn(this._enter||this._groups.map(Br),this._parents)}function ro(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}ro.prototype={constructor:ro,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ns(e){return function(){return e}}function Ms(e,n,t,o,i,r){for(var a=0,s,u=n.length,c=r.length;a<c;++a)(s=n[a])?(s.__data__=r[a],o[a]=s):t[a]=new ro(e,r[a]);for(;a<u;++a)(s=n[a])&&(i[a]=s)}function Rs(e,n,t,o,i,r,a){var s,u,c=new Map,p=n.length,g=r.length,k=new Array(p),q;for(s=0;s<p;++s)(u=n[s])&&(k[s]=q=a.call(u,u.__data__,s,n)+"",c.has(q)?i[s]=u:c.set(q,u));for(s=0;s<g;++s)q=a.call(e,r[s],s,r)+"",(u=c.get(q))?(o[s]=u,u.__data__=r[s],c.delete(q)):t[s]=new ro(e,r[s]);for(s=0;s<p;++s)(u=n[s])&&c.get(k[s])===u&&(i[s]=u)}function Ls(e){return e.__data__}function qs(e,n){if(!arguments.length)return Array.from(this,Ls);var t=n?Rs:Ms,o=this._parents,i=this._groups;typeof e!="function"&&(e=Ns(e));for(var r=i.length,a=new Array(r),s=new Array(r),u=new Array(r),c=0;c<r;++c){var p=o[c],g=i[c],k=g.length,q=Us(e.call(p,p&&p.__data__,c,o)),$=q.length,ce=s[c]=new Array($),f=a[c]=new Array($),S=u[c]=new Array(k);t(p,g,ce,f,S,q,n);for(var I=0,b=0,v,y;I<$;++I)if(v=ce[I]){for(I>=b&&(b=I+1);!(y=f[b])&&++b<$;);v._next=y||null}}return a=new vn(a,o),a._enter=s,a._exit=u,a}function Us(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Os(){return new vn(this._exit||this._groups.map(Br),this._parents)}function Bs(e,n,t){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(i=n(i),i&&(i=i.selection())),t==null?r.remove():t(r),o&&i?o.merge(i).order():i}function Fs(e){for(var n=e.selection?e.selection():e,t=this._groups,o=n._groups,i=t.length,r=o.length,a=Math.min(i,r),s=new Array(i),u=0;u<a;++u)for(var c=t[u],p=o[u],g=c.length,k=s[u]=new Array(g),q,$=0;$<g;++$)(q=c[$]||p[$])&&(k[$]=q);for(;u<i;++u)s[u]=t[u];return new vn(s,this._parents)}function Es(){for(var e=this._groups,n=-1,t=e.length;++n<t;)for(var o=e[n],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function Ds(e){e||(e=js);function n(g,k){return g&&k?e(g.__data__,k.__data__):!g-!k}for(var t=this._groups,o=t.length,i=new Array(o),r=0;r<o;++r){for(var a=t[r],s=a.length,u=i[r]=new Array(s),c,p=0;p<s;++p)(c=a[p])&&(u[p]=c);u.sort(n)}return new vn(i,this._parents).order()}function js(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Hs(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Xs(){return Array.from(this)}function zs(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function Vs(){let e=0;for(const n of this)++e;return e}function Ws(){return!this.node()}function Ks(e){for(var n=this._groups,t=0,o=n.length;t<o;++t)for(var i=n[t],r=0,a=i.length,s;r<a;++r)(s=i[r])&&e.call(s,s.__data__,r,i);return this}function Ys(e){return function(){this.removeAttribute(e)}}function Gs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qs(e,n){return function(){this.setAttribute(e,n)}}function Js(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function Zs(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function xs(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function eu(e,n){var t=yo(e);if(arguments.length<2){var o=this.node();return t.local?o.getAttributeNS(t.space,t.local):o.getAttribute(t)}return this.each((n==null?t.local?Gs:Ys:typeof n=="function"?t.local?xs:Zs:t.local?Js:Qs)(t,n))}function Fr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function nu(e){return function(){this.style.removeProperty(e)}}function tu(e,n,t){return function(){this.style.setProperty(e,n,t)}}function ou(e,n,t){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,t)}}function iu(e,n,t){return arguments.length>1?this.each((n==null?nu:typeof n=="function"?ou:tu)(e,n,t??"")):vt(this.node(),e)}function vt(e,n){return e.style.getPropertyValue(n)||Fr(e).getComputedStyle(e,null).getPropertyValue(n)}function ru(e){return function(){delete this[e]}}function au(e,n){return function(){this[e]=n}}function lu(e,n){return function(){var t=n.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function su(e,n){return arguments.length>1?this.each((n==null?ru:typeof n=="function"?lu:au)(e,n)):this.node()[e]}function Er(e){return e.trim().split(/^|\s+/)}function ti(e){return e.classList||new Dr(e)}function Dr(e){this._node=e,this._names=Er(e.getAttribute("class")||"")}Dr.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function jr(e,n){for(var t=ti(e),o=-1,i=n.length;++o<i;)t.add(n[o])}function Hr(e,n){for(var t=ti(e),o=-1,i=n.length;++o<i;)t.remove(n[o])}function uu(e){return function(){jr(this,e)}}function cu(e){return function(){Hr(this,e)}}function du(e,n){return function(){(n.apply(this,arguments)?jr:Hr)(this,e)}}function fu(e,n){var t=Er(e+"");if(arguments.length<2){for(var o=ti(this.node()),i=-1,r=t.length;++i<r;)if(!o.contains(t[i]))return!1;return!0}return this.each((typeof n=="function"?du:n?uu:cu)(t,n))}function pu(){this.textContent=""}function vu(e){return function(){this.textContent=e}}function mu(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function hu(e){return arguments.length?this.each(e==null?pu:(typeof e=="function"?mu:vu)(e)):this.node().textContent}function gu(){this.innerHTML=""}function yu(e){return function(){this.innerHTML=e}}function bu(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function ku(e){return arguments.length?this.each(e==null?gu:(typeof e=="function"?bu:yu)(e)):this.node().innerHTML}function wu(){this.nextSibling&&this.parentNode.appendChild(this)}function Cu(){return this.each(wu)}function Iu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pu(){return this.each(Iu)}function _u(e){var n=typeof e=="function"?e:Lr(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function $u(){return null}function Au(e,n){var t=typeof e=="function"?e:Lr(e),o=n==null?$u:typeof n=="function"?n:ni(n);return this.select(function(){return this.insertBefore(t.apply(this,arguments),o.apply(this,arguments)||null)})}function Su(){var e=this.parentNode;e&&e.removeChild(this)}function Tu(){return this.each(Su)}function Nu(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Mu(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Ru(e){return this.select(e?Mu:Nu)}function Lu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function qu(e){return function(n){e.call(this,n,this.__data__)}}function Uu(e){return e.trim().split(/^|\s+/).map(function(n){var t="",o=n.indexOf(".");return o>=0&&(t=n.slice(o+1),n=n.slice(0,o)),{type:n,name:t}})}function Ou(e){return function(){var n=this.__on;if(n){for(var t=0,o=-1,i=n.length,r;t<i;++t)r=n[t],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):n[++o]=r;++o?n.length=o:delete this.__on}}}function Bu(e,n,t){return function(){var o=this.__on,i,r=qu(n);if(o){for(var a=0,s=o.length;a<s;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=t),i.value=n;return}}this.addEventListener(e.type,r,t),i={type:e.type,name:e.name,value:n,listener:r,options:t},o?o.push(i):this.__on=[i]}}function Fu(e,n,t){var o=Uu(e+""),i,r=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,p;u<c;++u)for(i=0,p=s[u];i<r;++i)if((a=o[i]).type===p.type&&a.name===p.name)return p.value}return}for(s=n?Bu:Ou,i=0;i<r;++i)this.each(s(o[i],n,t));return this}function Xr(e,n,t){var o=Fr(e),i=o.CustomEvent;typeof i=="function"?i=new i(n,t):(i=o.document.createEvent("Event"),t?(i.initEvent(n,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(n,!1,!1)),e.dispatchEvent(i)}function Eu(e,n){return function(){return Xr(this,e,n)}}function Du(e,n){return function(){return Xr(this,e,n.apply(this,arguments))}}function ju(e,n){return this.each((typeof n=="function"?Du:Eu)(e,n))}function*Hu(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}var zr=[null];function vn(e,n){this._groups=e,this._parents=n}function Lt(){return new vn([[document.documentElement]],zr)}function Xu(){return this}vn.prototype=Lt.prototype={constructor:vn,select:ms,selectAll:bs,selectChild:Is,selectChildren:As,filter:Ss,data:qs,enter:Ts,exit:Os,join:Bs,merge:Fs,selection:Xu,order:Es,sort:Ds,call:Hs,nodes:Xs,node:zs,size:Vs,empty:Ws,each:Ks,attr:eu,style:iu,property:su,classed:fu,text:hu,html:ku,raise:Cu,lower:Pu,append:_u,insert:Au,remove:Tu,clone:Ru,datum:Lu,on:Fu,dispatch:ju,[Symbol.iterator]:Hu};function Tn(e){return typeof e=="string"?new vn([[document.querySelector(e)]],[document.documentElement]):new vn([[e]],zr)}function zu(e){let n;for(;n=e.sourceEvent;)e=n;return e}function zi(e,n){if(e=zu(e),n===void 0&&(n=e.currentTarget),n){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[e.clientX-i.left-n.clientLeft,e.clientY-i.top-n.clientTop]}}return[e.pageX,e.pageY]}const jo={capture:!0,passive:!1};function Ho(e){e.preventDefault(),e.stopImmediatePropagation()}function Vu(e){var n=e.document.documentElement,t=Tn(e).on("dragstart.drag",Ho,jo);"onselectstart"in n?t.on("selectstart.drag",Ho,jo):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Wu(e,n){var t=e.document.documentElement,o=Tn(e).on("dragstart.drag",null);n&&(o.on("click.drag",Ho,jo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in t?o.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function oi(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function Vr(e,n){var t=Object.create(e.prototype);for(var o in n)t[o]=n[o];return t}function qt(){}var Tt=.7,ao=1/Tt,pt="\\s*([+-]?\\d+)\\s*",Nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ku=/^#([0-9a-f]{3,8})$/,Yu=new RegExp(`^rgb\\(${pt},${pt},${pt}\\)$`),Gu=new RegExp(`^rgb\\(${Ln},${Ln},${Ln}\\)$`),Qu=new RegExp(`^rgba\\(${pt},${pt},${pt},${Nt}\\)$`),Ju=new RegExp(`^rgba\\(${Ln},${Ln},${Ln},${Nt}\\)$`),Zu=new RegExp(`^hsl\\(${Nt},${Ln},${Ln}\\)$`),xu=new RegExp(`^hsla\\(${Nt},${Ln},${Ln},${Nt}\\)$`),Vi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oi(qt,nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wi,formatHex:Wi,formatHex8:ec,formatHsl:nc,formatRgb:Ki,toString:Ki});function Wi(){return this.rgb().formatHex()}function ec(){return this.rgb().formatHex8()}function nc(){return Wr(this).formatHsl()}function Ki(){return this.rgb().formatRgb()}function nt(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=Ku.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?Yi(n):t===3?new cn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?Yt(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?Yt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Yu.exec(e))?new cn(n[1],n[2],n[3],1):(n=Gu.exec(e))?new cn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Qu.exec(e))?Yt(n[1],n[2],n[3],n[4]):(n=Ju.exec(e))?Yt(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Zu.exec(e))?Ji(n[1],n[2]/100,n[3]/100,1):(n=xu.exec(e))?Ji(n[1],n[2]/100,n[3]/100,n[4]):Vi.hasOwnProperty(e)?Yi(Vi[e]):e==="transparent"?new cn(NaN,NaN,NaN,0):null}function Yi(e){return new cn(e>>16&255,e>>8&255,e&255,1)}function Yt(e,n,t,o){return o<=0&&(e=n=t=NaN),new cn(e,n,t,o)}function tc(e){return e instanceof qt||(e=nt(e)),e?(e=e.rgb(),new cn(e.r,e.g,e.b,e.opacity)):new cn}function Xo(e,n,t,o){return arguments.length===1?tc(e):new cn(e,n,t,o??1)}function cn(e,n,t,o){this.r=+e,this.g=+n,this.b=+t,this.opacity=+o}oi(cn,Xo,Vr(qt,{brighter(e){return e=e==null?ao:Math.pow(ao,e),new cn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Tt:Math.pow(Tt,e),new cn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cn(et(this.r),et(this.g),et(this.b),lo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gi,formatHex:Gi,formatHex8:oc,formatRgb:Qi,toString:Qi}));function Gi(){return`#${xn(this.r)}${xn(this.g)}${xn(this.b)}`}function oc(){return`#${xn(this.r)}${xn(this.g)}${xn(this.b)}${xn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qi(){const e=lo(this.opacity);return`${e===1?"rgb(":"rgba("}${et(this.r)}, ${et(this.g)}, ${et(this.b)}${e===1?")":`, ${e})`}`}function lo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function et(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xn(e){return e=et(e),(e<16?"0":"")+e.toString(16)}function Ji(e,n,t,o){return o<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new Nn(e,n,t,o)}function Wr(e){if(e instanceof Nn)return new Nn(e.h,e.s,e.l,e.opacity);if(e instanceof qt||(e=nt(e)),!e)return new Nn;if(e instanceof Nn)return e;e=e.rgb();var n=e.r/255,t=e.g/255,o=e.b/255,i=Math.min(n,t,o),r=Math.max(n,t,o),a=NaN,s=r-i,u=(r+i)/2;return s?(n===r?a=(t-o)/s+(t<o)*6:t===r?a=(o-n)/s+2:a=(n-t)/s+4,s/=u<.5?r+i:2-r-i,a*=60):s=u>0&&u<1?0:a,new Nn(a,s,u,e.opacity)}function ic(e,n,t,o){return arguments.length===1?Wr(e):new Nn(e,n,t,o??1)}function Nn(e,n,t,o){this.h=+e,this.s=+n,this.l=+t,this.opacity=+o}oi(Nn,ic,Vr(qt,{brighter(e){return e=e==null?ao:Math.pow(ao,e),new Nn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Tt:Math.pow(Tt,e),new Nn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,o=t+(t<.5?t:1-t)*n,i=2*t-o;return new cn(No(e>=240?e-240:e+120,i,o),No(e,i,o),No(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Nn(Zi(this.h),Gt(this.s),Gt(this.l),lo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lo(this.opacity);return`${e===1?"hsl(":"hsla("}${Zi(this.h)}, ${Gt(this.s)*100}%, ${Gt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zi(e){return e=(e||0)%360,e<0?e+360:e}function Gt(e){return Math.max(0,Math.min(1,e||0))}function No(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}const ii=e=>()=>e;function rc(e,n){return function(t){return e+t*n}}function ac(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(o){return Math.pow(e+o*n,t)}}function lc(e){return(e=+e)==1?Kr:function(n,t){return t-n?ac(n,t,e):ii(isNaN(n)?t:n)}}function Kr(e,n){var t=n-e;return t?rc(e,t):ii(isNaN(e)?n:e)}const so=function e(n){var t=lc(n);function o(i,r){var a=t((i=Xo(i)).r,(r=Xo(r)).r),s=t(i.g,r.g),u=t(i.b,r.b),c=Kr(i.opacity,r.opacity);return function(p){return i.r=a(p),i.g=s(p),i.b=u(p),i.opacity=c(p),i+""}}return o.gamma=e,o}(1);function sc(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,o=n.slice(),i;return function(r){for(i=0;i<t;++i)o[i]=e[i]*(1-r)+n[i]*r;return o}}function uc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cc(e,n){var t=n?n.length:0,o=e?Math.min(t,e.length):0,i=new Array(o),r=new Array(t),a;for(a=0;a<o;++a)i[a]=bo(e[a],n[a]);for(;a<t;++a)r[a]=n[a];return function(s){for(a=0;a<o;++a)r[a]=i[a](s);return r}}function dc(e,n){var t=new Date;return e=+e,n=+n,function(o){return t.setTime(e*(1-o)+n*o),t}}function Sn(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function fc(e,n){var t={},o={},i;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in e?t[i]=bo(e[i],n[i]):o[i]=n[i];return function(r){for(i in t)o[i]=t[i](r);return o}}var zo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mo=new RegExp(zo.source,"g");function pc(e){return function(){return e}}function vc(e){return function(n){return e(n)+""}}function Yr(e,n){var t=zo.lastIndex=Mo.lastIndex=0,o,i,r,a=-1,s=[],u=[];for(e=e+"",n=n+"";(o=zo.exec(e))&&(i=Mo.exec(n));)(r=i.index)>t&&(r=n.slice(t,r),s[a]?s[a]+=r:s[++a]=r),(o=o[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:Sn(o,i)})),t=Mo.lastIndex;return t<n.length&&(r=n.slice(t),s[a]?s[a]+=r:s[++a]=r),s.length<2?u[0]?vc(u[0].x):pc(n):(n=u.length,function(c){for(var p=0,g;p<n;++p)s[(g=u[p]).i]=g.x(c);return s.join("")})}function bo(e,n){var t=typeof n,o;return n==null||t==="boolean"?ii(n):(t==="number"?Sn:t==="string"?(o=nt(n))?(n=o,so):Yr:n instanceof nt?so:n instanceof Date?dc:uc(n)?sc:Array.isArray(n)?cc:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?fc:Sn)(e,n)}function mc(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var xi=180/Math.PI,Vo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gr(e,n,t,o,i,r){var a,s,u;return(a=Math.sqrt(e*e+n*n))&&(e/=a,n/=a),(u=e*t+n*o)&&(t-=e*u,o-=n*u),(s=Math.sqrt(t*t+o*o))&&(t/=s,o/=s,u/=s),e*o<n*t&&(e=-e,n=-n,u=-u,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(n,e)*xi,skewX:Math.atan(u)*xi,scaleX:a,scaleY:s}}var Qt;function hc(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Vo:Gr(n.a,n.b,n.c,n.d,n.e,n.f)}function gc(e){return e==null||(Qt||(Qt=document.createElementNS("http://www.w3.org/2000/svg","g")),Qt.setAttribute("transform",e),!(e=Qt.transform.baseVal.consolidate()))?Vo:(e=e.matrix,Gr(e.a,e.b,e.c,e.d,e.e,e.f))}function Qr(e,n,t,o){function i(c){return c.length?c.pop()+" ":""}function r(c,p,g,k,q,$){if(c!==g||p!==k){var ce=q.push("translate(",null,n,null,t);$.push({i:ce-4,x:Sn(c,g)},{i:ce-2,x:Sn(p,k)})}else(g||k)&&q.push("translate("+g+n+k+t)}function a(c,p,g,k){c!==p?(c-p>180?p+=360:p-c>180&&(c+=360),k.push({i:g.push(i(g)+"rotate(",null,o)-2,x:Sn(c,p)})):p&&g.push(i(g)+"rotate("+p+o)}function s(c,p,g,k){c!==p?k.push({i:g.push(i(g)+"skewX(",null,o)-2,x:Sn(c,p)}):p&&g.push(i(g)+"skewX("+p+o)}function u(c,p,g,k,q,$){if(c!==g||p!==k){var ce=q.push(i(q)+"scale(",null,",",null,")");$.push({i:ce-4,x:Sn(c,g)},{i:ce-2,x:Sn(p,k)})}else(g!==1||k!==1)&&q.push(i(q)+"scale("+g+","+k+")")}return function(c,p){var g=[],k=[];return c=e(c),p=e(p),r(c.translateX,c.translateY,p.translateX,p.translateY,g,k),a(c.rotate,p.rotate,g,k),s(c.skewX,p.skewX,g,k),u(c.scaleX,c.scaleY,p.scaleX,p.scaleY,g,k),c=p=null,function(q){for(var $=-1,ce=k.length,f;++$<ce;)g[(f=k[$]).i]=f.x(q);return g.join("")}}}var yc=Qr(hc,"px, ","px)","deg)"),bc=Qr(gc,", ",")",")"),mt=0,_t=0,It=0,Jr=1e3,uo,$t,co=0,tt=0,ko=0,Mt=typeof performance=="object"&&performance.now?performance:Date,Zr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ri(){return tt||(Zr(kc),tt=Mt.now()+ko)}function kc(){tt=0}function fo(){this._call=this._time=this._next=null}fo.prototype=xr.prototype={constructor:fo,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?ri():+t)+(n==null?0:+n),!this._next&&$t!==this&&($t?$t._next=this:uo=this,$t=this),this._call=e,this._time=t,Wo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wo())}};function xr(e,n,t){var o=new fo;return o.restart(e,n,t),o}function wc(){ri(),++mt;for(var e=uo,n;e;)(n=tt-e._time)>=0&&e._call.call(void 0,n),e=e._next;--mt}function er(){tt=(co=Mt.now())+ko,mt=_t=0;try{wc()}finally{mt=0,Ic(),tt=0}}function Cc(){var e=Mt.now(),n=e-co;n>Jr&&(ko-=n,co=e)}function Ic(){for(var e,n=uo,t,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:uo=t);$t=e,Wo(o)}function Wo(e){if(!mt){_t&&(_t=clearTimeout(_t));var n=e-tt;n>24?(e<1/0&&(_t=setTimeout(er,e-Mt.now()-ko)),It&&(It=clearInterval(It))):(It||(co=Mt.now(),It=setInterval(Cc,Jr)),mt=1,Zr(er))}}function nr(e,n,t){var o=new fo;return n=n==null?0:+n,o.restart(i=>{o.stop(),e(i+n)},n,t),o}var Pc=ei("start","end","cancel","interrupt"),_c=[],ea=0,tr=1,Ko=2,no=3,or=4,Yo=5,to=6;function wo(e,n,t,o,i,r){var a=e.__transition;if(!a)e.__transition={};else if(t in a)return;$c(e,t,{name:n,index:o,group:i,on:Pc,tween:_c,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:ea})}function ai(e,n){var t=Mn(e,n);if(t.state>ea)throw new Error("too late; already scheduled");return t}function qn(e,n){var t=Mn(e,n);if(t.state>no)throw new Error("too late; already running");return t}function Mn(e,n){var t=e.__transition;if(!t||!(t=t[n]))throw new Error("transition not found");return t}function $c(e,n,t){var o=e.__transition,i;o[n]=t,t.timer=xr(r,0,t.time);function r(c){t.state=tr,t.timer.restart(a,t.delay,t.time),t.delay<=c&&a(c-t.delay)}function a(c){var p,g,k,q;if(t.state!==tr)return u();for(p in o)if(q=o[p],q.name===t.name){if(q.state===no)return nr(a);q.state===or?(q.state=to,q.timer.stop(),q.on.call("interrupt",e,e.__data__,q.index,q.group),delete o[p]):+p<n&&(q.state=to,q.timer.stop(),q.on.call("cancel",e,e.__data__,q.index,q.group),delete o[p])}if(nr(function(){t.state===no&&(t.state=or,t.timer.restart(s,t.delay,t.time),s(c))}),t.state=Ko,t.on.call("start",e,e.__data__,t.index,t.group),t.state===Ko){for(t.state=no,i=new Array(k=t.tween.length),p=0,g=-1;p<k;++p)(q=t.tween[p].value.call(e,e.__data__,t.index,t.group))&&(i[++g]=q);i.length=g+1}}function s(c){for(var p=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(u),t.state=Yo,1),g=-1,k=i.length;++g<k;)i[g].call(e,p);t.state===Yo&&(t.on.call("end",e,e.__data__,t.index,t.group),u())}function u(){t.state=to,t.timer.stop(),delete o[n];for(var c in o)return;delete e.__transition}}function Go(e,n){var t=e.__transition,o,i,r=!0,a;if(t){n=n==null?null:n+"";for(a in t){if((o=t[a]).name!==n){r=!1;continue}i=o.state>Ko&&o.state<Yo,o.state=to,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete t[a]}r&&delete e.__transition}}function Ac(e){return this.each(function(){Go(this,e)})}function Sc(e,n){var t,o;return function(){var i=qn(this,e),r=i.tween;if(r!==t){o=t=r;for(var a=0,s=o.length;a<s;++a)if(o[a].name===n){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function Tc(e,n,t){var o,i;if(typeof t!="function")throw new Error;return function(){var r=qn(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var s={name:n,value:t},u=0,c=i.length;u<c;++u)if(i[u].name===n){i[u]=s;break}u===c&&i.push(s)}r.tween=i}}function Nc(e,n){var t=this._id;if(e+="",arguments.length<2){for(var o=Mn(this.node(),t).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((n==null?Sc:Tc)(t,e,n))}function li(e,n,t){var o=e._id;return e.each(function(){var i=qn(this,o);(i.value||(i.value={}))[n]=t.apply(this,arguments)}),function(i){return Mn(i,o).value[n]}}function na(e,n){var t;return(typeof n=="number"?Sn:n instanceof nt?so:(t=nt(n))?(n=t,so):Yr)(e,n)}function Mc(e){return function(){this.removeAttribute(e)}}function Rc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Lc(e,n,t){var o,i=t+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=n(o=a,t)}}function qc(e,n,t){var o,i=t+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=n(o=a,t)}}function Uc(e,n,t){var o,i,r;return function(){var a,s=t(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===o&&u===i?r:(i=u,r=n(o=a,s)))}}function Oc(e,n,t){var o,i,r;return function(){var a,s=t(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===o&&u===i?r:(i=u,r=n(o=a,s)))}}function Bc(e,n){var t=yo(e),o=t==="transform"?bc:na;return this.attrTween(e,typeof n=="function"?(t.local?Oc:Uc)(t,o,li(this,"attr."+e,n)):n==null?(t.local?Rc:Mc)(t):(t.local?qc:Lc)(t,o,n))}function Fc(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}function Ec(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}function Dc(e,n){var t,o;function i(){var r=n.apply(this,arguments);return r!==o&&(t=(o=r)&&Ec(e,r)),t}return i._value=n,i}function jc(e,n){var t,o;function i(){var r=n.apply(this,arguments);return r!==o&&(t=(o=r)&&Fc(e,r)),t}return i._value=n,i}function Hc(e,n){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;var o=yo(e);return this.tween(t,(o.local?Dc:jc)(o,n))}function Xc(e,n){return function(){ai(this,e).delay=+n.apply(this,arguments)}}function zc(e,n){return n=+n,function(){ai(this,e).delay=n}}function Vc(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Xc:zc)(n,e)):Mn(this.node(),n).delay}function Wc(e,n){return function(){qn(this,e).duration=+n.apply(this,arguments)}}function Kc(e,n){return n=+n,function(){qn(this,e).duration=n}}function Yc(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Wc:Kc)(n,e)):Mn(this.node(),n).duration}function Gc(e,n){if(typeof n!="function")throw new Error;return function(){qn(this,e).ease=n}}function Qc(e){var n=this._id;return arguments.length?this.each(Gc(n,e)):Mn(this.node(),n).ease}function Jc(e,n){return function(){var t=n.apply(this,arguments);if(typeof t!="function")throw new Error;qn(this,e).ease=t}}function Zc(e){if(typeof e!="function")throw new Error;return this.each(Jc(this._id,e))}function xc(e){typeof e!="function"&&(e=Ur(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,s=o[i]=[],u,c=0;c<a;++c)(u=r[c])&&e.call(u,u.__data__,c,r)&&s.push(u);return new jn(o,this._parents,this._name,this._id)}function ed(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,t=e._groups,o=n.length,i=t.length,r=Math.min(o,i),a=new Array(o),s=0;s<r;++s)for(var u=n[s],c=t[s],p=u.length,g=a[s]=new Array(p),k,q=0;q<p;++q)(k=u[q]||c[q])&&(g[q]=k);for(;s<o;++s)a[s]=n[s];return new jn(a,this._parents,this._name,this._id)}function nd(e){return(e+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||n==="start"})}function td(e,n,t){var o,i,r=nd(n)?ai:qn;return function(){var a=r(this,e),s=a.on;s!==o&&(i=(o=s).copy()).on(n,t),a.on=i}}function od(e,n){var t=this._id;return arguments.length<2?Mn(this.node(),t).on.on(e):this.each(td(t,e,n))}function id(e){return function(){var n=this.parentNode;for(var t in this.__transition)if(+t!==e)return;n&&n.removeChild(this)}}function rd(){return this.on("end.remove",id(this._id))}function ad(e){var n=this._name,t=this._id;typeof e!="function"&&(e=ni(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var s=o[a],u=s.length,c=r[a]=new Array(u),p,g,k=0;k<u;++k)(p=s[k])&&(g=e.call(p,p.__data__,k,s))&&("__data__"in p&&(g.__data__=p.__data__),c[k]=g,wo(c[k],n,t,k,c,Mn(p,t)));return new jn(r,this._parents,n,t)}function ld(e){var n=this._name,t=this._id;typeof e!="function"&&(e=qr(e));for(var o=this._groups,i=o.length,r=[],a=[],s=0;s<i;++s)for(var u=o[s],c=u.length,p,g=0;g<c;++g)if(p=u[g]){for(var k=e.call(p,p.__data__,g,u),q,$=Mn(p,t),ce=0,f=k.length;ce<f;++ce)(q=k[ce])&&wo(q,n,t,ce,k,$);r.push(k),a.push(p)}return new jn(r,a,n,t)}var sd=Lt.prototype.constructor;function ud(){return new sd(this._groups,this._parents)}function cd(e,n){var t,o,i;return function(){var r=vt(this,e),a=(this.style.removeProperty(e),vt(this,e));return r===a?null:r===t&&a===o?i:i=n(t=r,o=a)}}function ta(e){return function(){this.style.removeProperty(e)}}function dd(e,n,t){var o,i=t+"",r;return function(){var a=vt(this,e);return a===i?null:a===o?r:r=n(o=a,t)}}function fd(e,n,t){var o,i,r;return function(){var a=vt(this,e),s=t(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),vt(this,e))),a===u?null:a===o&&u===i?r:(i=u,r=n(o=a,s))}}function pd(e,n){var t,o,i,r="style."+n,a="end."+r,s;return function(){var u=qn(this,e),c=u.on,p=u.value[r]==null?s||(s=ta(n)):void 0;(c!==t||i!==p)&&(o=(t=c).copy()).on(a,i=p),u.on=o}}function vd(e,n,t){var o=(e+="")=="transform"?yc:na;return n==null?this.styleTween(e,cd(e,o)).on("end.style."+e,ta(e)):typeof n=="function"?this.styleTween(e,fd(e,o,li(this,"style."+e,n))).each(pd(this._id,e)):this.styleTween(e,dd(e,o,n),t).on("end.style."+e,null)}function md(e,n,t){return function(o){this.style.setProperty(e,n.call(this,o),t)}}function hd(e,n,t){var o,i;function r(){var a=n.apply(this,arguments);return a!==i&&(o=(i=a)&&md(e,a,t)),o}return r._value=n,r}function gd(e,n,t){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,hd(e,n,t??""))}function yd(e){return function(){this.textContent=e}}function bd(e){return function(){var n=e(this);this.textContent=n??""}}function kd(e){return this.tween("text",typeof e=="function"?bd(li(this,"text",e)):yd(e==null?"":e+""))}function wd(e){return function(n){this.textContent=e.call(this,n)}}function Cd(e){var n,t;function o(){var i=e.apply(this,arguments);return i!==t&&(n=(t=i)&&wd(i)),n}return o._value=e,o}function Id(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Cd(e))}function Pd(){for(var e=this._name,n=this._id,t=oa(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,u,c=0;c<s;++c)if(u=a[c]){var p=Mn(u,n);wo(u,e,t,c,a,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new jn(o,this._parents,e,t)}function _d(){var e,n,t=this,o=t._id,i=t.size();return new Promise(function(r,a){var s={value:a},u={value:function(){--i===0&&r()}};t.each(function(){var c=qn(this,o),p=c.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),c.on=n}),i===0&&r()})}var $d=0;function jn(e,n,t,o){this._groups=e,this._parents=n,this._name=t,this._id=o}function oa(){return++$d}var En=Lt.prototype;jn.prototype={constructor:jn,select:ad,selectAll:ld,selectChild:En.selectChild,selectChildren:En.selectChildren,filter:xc,merge:ed,selection:ud,transition:Pd,call:En.call,nodes:En.nodes,node:En.node,size:En.size,empty:En.empty,each:En.each,on:od,attr:Bc,attrTween:Hc,style:vd,styleTween:gd,text:kd,textTween:Id,remove:rd,tween:Nc,delay:Vc,duration:Yc,ease:Qc,easeVarying:Zc,end:_d,[Symbol.iterator]:En[Symbol.iterator]};function Ad(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Sd={time:null,delay:0,duration:250,ease:Ad};function Td(e,n){for(var t;!(t=e.__transition)||!(t=t[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return t}function Nd(e){var n,t;e instanceof jn?(n=e._id,e=e._name):(n=oa(),(t=Sd).time=ri(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,u,c=0;c<s;++c)(u=a[c])&&wo(u,e,n,c,a,t||Td(u,n));return new jn(o,this._parents,e,n)}Lt.prototype.interrupt=Ac;Lt.prototype.transition=Nd;const Ro=e=>()=>e;function Md(e,{sourceEvent:n,target:t,selection:o,mode:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},selection:{value:o,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Rd(e){e.stopImmediatePropagation()}function Lo(e){e.preventDefault(),e.stopImmediatePropagation()}var ir={name:"drag"},qo={name:"space"},ct={name:"handle"},dt={name:"center"};const{abs:rr,max:nn,min:tn}=Math;function ar(e){return[+e[0],+e[1]]}function lr(e){return[ar(e[0]),ar(e[1])]}var oo={name:"x",handles:["w","e"].map(po),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Uo={name:"y",handles:["n","s"].map(po),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Dn={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},sr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ur={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ld={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},qd={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function po(e){return{type:e}}function Ud(e){return!e.ctrlKey&&!e.button}function Od(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Bd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oo(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Fd(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Ed(){return Dd(oo)}function Dd(e){var n=Od,t=Ud,o=Bd,i=!0,r=ei("start","brush","end"),a=6,s;function u(f){var S=f.property("__brush",ce).selectAll(".overlay").data([po("overlay")]);S.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Dn.overlay).merge(S).each(function(){var b=Oo(this).extent;Tn(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),f.selectAll(".selection").data([po("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Dn.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var I=f.selectAll(".handle").data(e.handles,function(b){return b.type});I.exit().remove(),I.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Dn[b.type]}),f.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",k).filter(o).on("touchstart.brush",k).on("touchmove.brush",q).on("touchend.brush touchcancel.brush",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(f,S,I){f.tween?f.on("start.brush",function(b){p(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){p(this,arguments).end(b)}).tween("brush",function(){var b=this,v=b.__brush,y=p(b,arguments),E=v.selection,x=e.input(typeof S=="function"?S.apply(this,arguments):S,v.extent),ie=bo(E,x);function ve(te){v.selection=te===1&&x===null?null:ie(te),c.call(b),y.brush()}return E!==null&&x!==null?ve:ve(1)}):f.each(function(){var b=this,v=arguments,y=b.__brush,E=e.input(typeof S=="function"?S.apply(b,v):S,y.extent),x=p(b,v).beforestart();Go(b),y.selection=E===null?null:E,c.call(b),x.start(I).brush(I).end(I)})},u.clear=function(f,S){u.move(f,null,S)};function c(){var f=Tn(this),S=Oo(this).selection;S?(f.selectAll(".selection").style("display",null).attr("x",S[0][0]).attr("y",S[0][1]).attr("width",S[1][0]-S[0][0]).attr("height",S[1][1]-S[0][1]),f.selectAll(".handle").style("display",null).attr("x",function(I){return I.type[I.type.length-1]==="e"?S[1][0]-a/2:S[0][0]-a/2}).attr("y",function(I){return I.type[0]==="s"?S[1][1]-a/2:S[0][1]-a/2}).attr("width",function(I){return I.type==="n"||I.type==="s"?S[1][0]-S[0][0]+a:a}).attr("height",function(I){return I.type==="e"||I.type==="w"?S[1][1]-S[0][1]+a:a})):f.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function p(f,S,I){var b=f.__brush.emitter;return b&&(!I||!b.clean)?b:new g(f,S,I)}function g(f,S,I){this.that=f,this.args=S,this.state=f.__brush,this.active=0,this.clean=I}g.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(f,S){return this.starting?(this.starting=!1,this.emit("start",f,S)):this.emit("brush",f),this},brush:function(f,S){return this.emit("brush",f,S),this},end:function(f,S){return--this.active===0&&(delete this.state.emitter,this.emit("end",f,S)),this},emit:function(f,S,I){var b=Tn(this.that).datum();r.call(f,this.that,new Md(f,{sourceEvent:S,target:u,selection:e.output(this.state.selection),mode:I,dispatch:r}),b)}};function k(f){if(s&&!f.touches||!t.apply(this,arguments))return;var S=this,I=f.target.__data__.type,b=(i&&f.metaKey?I="overlay":I)==="selection"?ir:i&&f.altKey?dt:ct,v=e===Uo?null:Ld[I],y=e===oo?null:qd[I],E=Oo(S),x=E.extent,ie=E.selection,ve=x[0][0],te,M,ae=x[0][1],H,J,Ce=x[1][0],Y,le,de=x[1][1],se,ue,me=0,ee=0,K,dn=v&&y&&i&&f.shiftKey,z,We,Fe=Array.from(f.touches||[f],G=>{const Me=G.identifier;return G=zi(G,S),G.point0=G.slice(),G.identifier=Me,G});Go(S);var fn=p(S,arguments,!0).beforestart();if(I==="overlay"){ie&&(K=!0);const G=[Fe[0],Fe[1]||Fe[0]];E.selection=ie=[[te=e===Uo?ve:tn(G[0][0],G[1][0]),H=e===oo?ae:tn(G[0][1],G[1][1])],[Y=e===Uo?Ce:nn(G[0][0],G[1][0]),se=e===oo?de:nn(G[0][1],G[1][1])]],Fe.length>1&&qe(f)}else te=ie[0][0],H=ie[0][1],Y=ie[1][0],se=ie[1][1];M=te,J=H,le=Y,ue=se;var mn=Tn(S).attr("pointer-events","none"),sn=mn.selectAll(".overlay").attr("cursor",Dn[I]);if(f.touches)fn.moved=Ye,fn.ended=hn;else{var Hn=Tn(f.view).on("mousemove.brush",Ye,!0).on("mouseup.brush",hn,!0);i&&Hn.on("keydown.brush",Cn,!0).on("keyup.brush",Je,!0),Vu(f.view)}c.call(S),fn.start(f,b.name);function Ye(G){for(const Me of G.changedTouches||[G])for(const gn of Fe)gn.identifier===Me.identifier&&(gn.cur=zi(Me,S));if(dn&&!z&&!We&&Fe.length===1){const Me=Fe[0];rr(Me.cur[0]-Me[0])>rr(Me.cur[1]-Me[1])?We=!0:z=!0}for(const Me of Fe)Me.cur&&(Me[0]=Me.cur[0],Me[1]=Me.cur[1]);K=!0,Lo(G),qe(G)}function qe(G){const Me=Fe[0],gn=Me.point0;var V;switch(me=Me[0]-gn[0],ee=Me[1]-gn[1],b){case qo:case ir:{v&&(me=nn(ve-te,tn(Ce-Y,me)),M=te+me,le=Y+me),y&&(ee=nn(ae-H,tn(de-se,ee)),J=H+ee,ue=se+ee);break}case ct:{Fe[1]?(v&&(M=nn(ve,tn(Ce,Fe[0][0])),le=nn(ve,tn(Ce,Fe[1][0])),v=1),y&&(J=nn(ae,tn(de,Fe[0][1])),ue=nn(ae,tn(de,Fe[1][1])),y=1)):(v<0?(me=nn(ve-te,tn(Ce-te,me)),M=te+me,le=Y):v>0&&(me=nn(ve-Y,tn(Ce-Y,me)),M=te,le=Y+me),y<0?(ee=nn(ae-H,tn(de-H,ee)),J=H+ee,ue=se):y>0&&(ee=nn(ae-se,tn(de-se,ee)),J=H,ue=se+ee));break}case dt:{v&&(M=nn(ve,tn(Ce,te-me*v)),le=nn(ve,tn(Ce,Y+me*v))),y&&(J=nn(ae,tn(de,H-ee*y)),ue=nn(ae,tn(de,se+ee*y)));break}}le<M&&(v*=-1,V=te,te=Y,Y=V,V=M,M=le,le=V,I in sr&&sn.attr("cursor",Dn[I=sr[I]])),ue<J&&(y*=-1,V=H,H=se,se=V,V=J,J=ue,ue=V,I in ur&&sn.attr("cursor",Dn[I=ur[I]])),E.selection&&(ie=E.selection),z&&(M=ie[0][0],le=ie[1][0]),We&&(J=ie[0][1],ue=ie[1][1]),(ie[0][0]!==M||ie[0][1]!==J||ie[1][0]!==le||ie[1][1]!==ue)&&(E.selection=[[M,J],[le,ue]],c.call(S),fn.brush(G,b.name))}function hn(G){if(Rd(G),G.touches){if(G.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Wu(G.view,K),Hn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);mn.attr("pointer-events","all"),sn.attr("cursor",Dn.overlay),E.selection&&(ie=E.selection),Fd(ie)&&(E.selection=null,c.call(S)),fn.end(G,b.name)}function Cn(G){switch(G.keyCode){case 16:{dn=v&&y;break}case 18:{b===ct&&(v&&(Y=le-me*v,te=M+me*v),y&&(se=ue-ee*y,H=J+ee*y),b=dt,qe(G));break}case 32:{(b===ct||b===dt)&&(v<0?Y=le-me:v>0&&(te=M-me),y<0?se=ue-ee:y>0&&(H=J-ee),b=qo,sn.attr("cursor",Dn.selection),qe(G));break}default:return}Lo(G)}function Je(G){switch(G.keyCode){case 16:{dn&&(z=We=dn=!1,qe(G));break}case 18:{b===dt&&(v<0?Y=le:v>0&&(te=M),y<0?se=ue:y>0&&(H=J),b=ct,qe(G));break}case 32:{b===qo&&(G.altKey?(v&&(Y=le-me*v,te=M+me*v),y&&(se=ue-ee*y,H=J+ee*y),b=dt):(v<0?Y=le:v>0&&(te=M),y<0?se=ue:y>0&&(H=J),b=ct),sn.attr("cursor",Dn[I]),qe(G));break}default:return}Lo(G)}}function q(f){p(this,arguments).moved(f)}function $(f){p(this,arguments).ended(f)}function ce(){var f=this.__brush||{selection:null};return f.extent=lr(n.apply(this,arguments)),f.dim=e,f}return u.extent=function(f){return arguments.length?(n=typeof f=="function"?f:Ro(lr(f)),u):n},u.filter=function(f){return arguments.length?(t=typeof f=="function"?f:Ro(!!f),u):t},u.touchable=function(f){return arguments.length?(o=typeof f=="function"?f:Ro(!!f),u):o},u.handleSize=function(f){return arguments.length?(a=+f,u):a},u.keyModifiers=function(f){return arguments.length?(i=!!f,u):i},u.on=function(){var f=r.on.apply(r,arguments);return f===r?u:f},u}function jd(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vo(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,o=e.slice(0,t);return[o.length>1?o[0]+o.slice(2):o,+e.slice(t+1)]}function ht(e){return e=vo(Math.abs(e)),e?e[1]:NaN}function Hd(e,n){return function(t,o){for(var i=t.length,r=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>o&&(s=Math.max(1,o-u)),r.push(t.substring(i-=s,i+s)),!((u+=s+1)>o));)s=e[a=(a+1)%e.length];return r.reverse().join(n)}}function Xd(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var zd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mo(e){if(!(n=zd.exec(e)))throw new Error("invalid format: "+e);var n;return new si({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}mo.prototype=si.prototype;function si(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}si.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vd(e){e:for(var n=e.length,t=1,o=-1,i;t<n;++t)switch(e[t]){case".":o=i=t;break;case"0":o===0&&(o=t),i=t;break;default:if(!+e[t])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(i+1):e}var ia;function Wd(e,n){var t=vo(e,n);if(!t)return e+"";var o=t[0],i=t[1],r=i-(ia=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return r===a?o:r>a?o+new Array(r-a+1).join("0"):r>0?o.slice(0,r)+"."+o.slice(r):"0."+new Array(1-r).join("0")+vo(e,Math.max(0,n+r-1))[0]}function cr(e,n){var t=vo(e,n);if(!t)return e+"";var o=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}const dr={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:jd,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>cr(e*100,n),r:cr,s:Wd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function fr(e){return e}var pr=Array.prototype.map,vr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Kd(e){var n=e.grouping===void 0||e.thousands===void 0?fr:Hd(pr.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?fr:Xd(pr.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(g){g=mo(g);var k=g.fill,q=g.align,$=g.sign,ce=g.symbol,f=g.zero,S=g.width,I=g.comma,b=g.precision,v=g.trim,y=g.type;y==="n"?(I=!0,y="g"):dr[y]||(b===void 0&&(b=12),v=!0,y="g"),(f||k==="0"&&q==="=")&&(f=!0,k="0",q="=");var E=ce==="$"?t:ce==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x=ce==="$"?o:/[%p]/.test(y)?a:"",ie=dr[y],ve=/[defgprs%]/.test(y);b=b===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function te(M){var ae=E,H=x,J,Ce,Y;if(y==="c")H=ie(M)+H,M="";else{M=+M;var le=M<0||1/M<0;if(M=isNaN(M)?u:ie(Math.abs(M),b),v&&(M=Vd(M)),le&&+M==0&&$!=="+"&&(le=!1),ae=(le?$==="("?$:s:$==="-"||$==="("?"":$)+ae,H=(y==="s"?vr[8+ia/3]:"")+H+(le&&$==="("?")":""),ve){for(J=-1,Ce=M.length;++J<Ce;)if(Y=M.charCodeAt(J),48>Y||Y>57){H=(Y===46?i+M.slice(J+1):M.slice(J))+H,M=M.slice(0,J);break}}}I&&!f&&(M=n(M,1/0));var de=ae.length+M.length+H.length,se=de<S?new Array(S-de+1).join(k):"";switch(I&&f&&(M=n(se+M,se.length?S-H.length:1/0),se=""),q){case"<":M=ae+M+H+se;break;case"=":M=ae+se+M+H;break;case"^":M=se.slice(0,de=se.length>>1)+ae+M+H+se.slice(de);break;default:M=se+ae+M+H;break}return r(M)}return te.toString=function(){return g+""},te}function p(g,k){var q=c((g=mo(g),g.type="f",g)),$=Math.max(-8,Math.min(8,Math.floor(ht(k)/3)))*3,ce=Math.pow(10,-$),f=vr[8+$/3];return function(S){return q(ce*S)+f}}return{format:c,formatPrefix:p}}var Jt,ra,aa;Yd({thousands:",",grouping:[3],currency:["$",""]});function Yd(e){return Jt=Kd(e),ra=Jt.format,aa=Jt.formatPrefix,Jt}function Gd(e){return Math.max(0,-ht(Math.abs(e)))}function Qd(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ht(n)/3)))*3-ht(Math.abs(e)))}function Jd(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,ht(n)-ht(e))+1}function ui(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const mr=Symbol("implicit");function la(){var e=new Di,n=[],t=[],o=mr;function i(r){let a=e.get(r);if(a===void 0){if(o!==mr)return o;e.set(r,a=n.push(r)-1)}return t[a%t.length]}return i.domain=function(r){if(!arguments.length)return n.slice();n=[],e=new Di;for(const a of r)e.has(a)||e.set(a,n.push(a)-1);return i},i.range=function(r){return arguments.length?(t=Array.from(r),i):t.slice()},i.unknown=function(r){return arguments.length?(o=r,i):o},i.copy=function(){return la(n,t).unknown(o)},ui.apply(i,arguments),i}function sa(){var e=la().unknown(void 0),n=e.domain,t=e.range,o=0,i=1,r,a,s=!1,u=0,c=0,p=.5;delete e.unknown;function g(){var k=n().length,q=i<o,$=q?i:o,ce=q?o:i;r=(ce-$)/Math.max(1,k-u+c*2),s&&(r=Math.floor(r)),$+=(ce-$-r*(k-u))*p,a=r*(1-u),s&&($=Math.round($),a=Math.round(a));var f=ss(k).map(function(S){return $+r*S});return t(q?f.reverse():f)}return e.domain=function(k){return arguments.length?(n(k),g()):n()},e.range=function(k){return arguments.length?([o,i]=k,o=+o,i=+i,g()):[o,i]},e.rangeRound=function(k){return[o,i]=k,o=+o,i=+i,s=!0,g()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(k){return arguments.length?(s=!!k,g()):s},e.padding=function(k){return arguments.length?(u=Math.min(1,c=+k),g()):u},e.paddingInner=function(k){return arguments.length?(u=Math.min(1,k),g()):u},e.paddingOuter=function(k){return arguments.length?(c=+k,g()):c},e.align=function(k){return arguments.length?(p=Math.max(0,Math.min(1,k)),g()):p},e.copy=function(){return sa(n(),[o,i]).round(s).paddingInner(u).paddingOuter(c).align(p)},ui.apply(g(),arguments)}function Zd(e){return function(){return e}}function xd(e){return+e}var hr=[0,1];function ft(e){return e}function Qo(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:Zd(isNaN(n)?NaN:.5)}function ef(e,n){var t;return e>n&&(t=e,e=n,n=t),function(o){return Math.max(e,Math.min(n,o))}}function nf(e,n,t){var o=e[0],i=e[1],r=n[0],a=n[1];return i<o?(o=Qo(i,o),r=t(a,r)):(o=Qo(o,i),r=t(r,a)),function(s){return r(o(s))}}function tf(e,n,t){var o=Math.min(e.length,n.length)-1,i=new Array(o),r=new Array(o),a=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++a<o;)i[a]=Qo(e[a],e[a+1]),r[a]=t(n[a],n[a+1]);return function(s){var u=Zl(e,s,1,o)-1;return r[u](i[u](s))}}function of(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rf(){var e=hr,n=hr,t=bo,o,i,r,a=ft,s,u,c;function p(){var k=Math.min(e.length,n.length);return a!==ft&&(a=ef(e[0],e[k-1])),s=k>2?tf:nf,u=c=null,g}function g(k){return k==null||isNaN(k=+k)?r:(u||(u=s(e.map(o),n,t)))(o(a(k)))}return g.invert=function(k){return a(i((c||(c=s(n,e.map(o),Sn)))(k)))},g.domain=function(k){return arguments.length?(e=Array.from(k,xd),p()):e.slice()},g.range=function(k){return arguments.length?(n=Array.from(k),p()):n.slice()},g.rangeRound=function(k){return n=Array.from(k),t=mc,p()},g.clamp=function(k){return arguments.length?(a=k?!0:ft,p()):a!==ft},g.interpolate=function(k){return arguments.length?(t=k,p()):t},g.unknown=function(k){return arguments.length?(r=k,g):r},function(k,q){return o=k,i=q,p()}}function af(){return rf()(ft,ft)}function lf(e,n,t,o){var i=as(e,n,t),r;switch(o=mo(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(n));return o.precision==null&&!isNaN(r=Qd(i,a))&&(o.precision=r),aa(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(r=Jd(i,Math.max(Math.abs(e),Math.abs(n))))&&(o.precision=r-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(r=Gd(i))&&(o.precision=r-(o.type==="%")*2);break}}return ra(o)}function sf(e){var n=e.domain;return e.ticks=function(t){var o=n();return rs(o[0],o[o.length-1],t??10)},e.tickFormat=function(t,o){var i=n();return lf(i[0],i[i.length-1],t??10,o)},e.nice=function(t){t==null&&(t=10);var o=n(),i=0,r=o.length-1,a=o[i],s=o[r],u,c,p=10;for(s<a&&(c=a,a=s,s=c,c=i,i=r,r=c);p-- >0;){if(c=Eo(a,s,t),c===u)return o[i]=a,o[r]=s,n(o);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;u=c}return e},e}function ua(){var e=af();return e.copy=function(){return of(e,ua())},ui.apply(e,arguments),sf(e)}function At(e,n,t){this.k=e,this.x=n,this.y=t}At.prototype={constructor:At,scale:function(e){return e===1?this:new At(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new At(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};At.prototype;function gr(e,n,t){const o=new U(10).pow(n-t);return new U(1.0001).pow(e).mul(o)}const uf=bn({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,n){const t=R(1),o=R(""),i=R(""),r=re(()=>{var v,y,E;return g.sqrtPriceX64ToPrice((v=e.poolInfo)==null?void 0:v.current_sqrt_price,(y=e.poolInfo)==null?void 0:y.coinA.decimals,(E=e.poolInfo)==null?void 0:E.coinB.decimals).toString()}),a=re(()=>{let v=0;return e.direction?v=(Number(e.minPrice)/Number(r.value)-1)*100:v=(Number(e.minPrice)/Number(1/Number(r.value))-1)*100,v=v>0&&v<.1?.1:v,v=v<0&&v>-.1?-.1:v,v}),s=re(()=>{let v=0;return e.direction?v=(Number(e.maxPrice)/Number(r.value)-1)*100:v=(Number(e.maxPrice)/Number(1/Number(r.value))-1)*100,v=v>0&&v<.1?.1:v,v=v<0&&v>-.1?-.1:v,v}),u=yn(),c=re(()=>u),p=re(()=>c.value.chainName?Jo(c.value.chainName):{}),{TickMath:g,getNearestTickByTick:k}=p.value,q=()=>{const v=t.value/2;t.value=v,f(e.poolInfo,v)},$=()=>{const v=t.value*2;t.value=v,f(e.poolInfo,v)},ce=(v=[])=>{let y=6;const E=Math.abs(Number(v[0])-Number(v[v.length-1]));return E>=6?y=0:E>=1?y=1:E>=.1?y=2:E>=.01?y=3:E>=.001?y=4:E>=1e-4?y=5:E>=1e-5?y=6:E>=1e-6?y=7:E>=1e-7&&(y=8),y},f=(v,y=1)=>{if(v&&v.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const E=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",E),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let x=E+100*y,ie=E-100*y,ve,te;if(e.maxPrice==="∞")te=p.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?te=g.priceToTickIndex(new U(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):te=g.priceToTickIndex(new U(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{te=443636}if(e.minPrice==="0")ve=p.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ve=g.priceToTickIndex(new U(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ve=g.priceToTickIndex(new U(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ve=-443636}let M=0;if(e.currentPriceTab!=="full range"){if(E>=ve&&E<=te){const ee=E-ve,K=te-E;M=Math.max(Math.abs(ee),Math.abs(K))}else E<ve?M=Math.abs(te-E):M=Math.abs(E-ve);x=E+M+100*y,ie=E-M-100*y}else{const ee=(Math.abs(E)>5e3,2e4);x=E+ee*y,ie=E-ee*y}ie<-443636&&(ie=-443636),x>443636&&(x=443636);const ae=new U(v.liquidity).div(Math.pow(10,8)).toString(),H=e.tickList;console.log("0117####drawChart####tick_info_array####",H);const J=[],Ce=[];let Y={};for(let ee=0;ee<H.length;ee++){if(Y=H[ee],Y.index<=E&&Y.index>=ie){if(J.length<1&&ee!==0){const K=H[ee-1];J.unshift({...K,index:ie})}J.unshift(Y)}else if(Y.index>E&&Y.index<=x&&(Ce.push(Y),J.length<1&&ee!==0)){const K=H[ee-1];J.push({...K,index:ie})}if(Y.index>x){const K=H[ee];if(Ce.push({...K,index:x}),J.length<1&&ee!==0){const dn=H[ee-1];J.push({...dn,index:ie})}break}}let le="0";for(let ee=J.length-1;ee>=0;ee--)le=new U(le).plus(new U(J[ee].liquidityNet.toString()).div(Math.pow(10,8))).toString(),J[ee].liquityAmount=le;let de=ae;for(let ee=0;ee<Ce.length;ee++)de=new U(de).plus(new U(Ce[ee].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Ce[ee].liquityAmount=de;let se=[];const ue=H&&H.length>0?{index:E,liquityAmount:Number(ae)}:{index:E,liquityAmount:0};(J.length>0||Ce.length>0)&&(se=[...J.reverse(),ue,...Ce],e.direction||(se=se.reverse()));const me=[];H.forEach(ee=>{me.push({...ee,liquidityGross:ee.liquidityGross.toString(),liquidityNet:ee.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",me),console.log("0117####drawChart####currentLiquity####",ae),I(se,ie,x,ve,te,E)}};let S=R(!1);ho(()=>{document.body.clientWidth<750?S.value=!1:S.value=!0,window.onresize=()=>{document.body.clientWidth<750?S.value=!1:S.value=!0,f(e.poolInfo,t.value)}});const I=(v,y,E,x,ie,ve)=>{console.log("0117####drawChart####chartData####",v),console.log("0117####drawChart####tickMin####",y),console.log("0117####drawChart####tickMax####",E),console.log("0117####drawChart####minPriceTick####",x),console.log("0117####drawChart####maxPriceTick####",ie),console.log("0117####drawChart####currentTick####",ve),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let te,M;e.direction?(te=e.before7dContractPriceLowest?g.priceToTickIndex(new U(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",M=e.before7dContractPriceHighest?g.priceToTickIndex(new U(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(te=e.before7dContractPriceLowest?g.priceToTickIndex(new U(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",M=e.before7dContractPriceHighest?g.priceToTickIndex(new U(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const ae={top:30,right:35,bottom:20,left:55};let H,J;S.value?(H=460-ae.left-ae.right,J=205-ae.top-ae.bottom):(H=340-ae.left-ae.right,J=205-ae.top-ae.bottom);const Ce=E-y,Y=parseInt(String(Ce/4));let le=[y+Y/4,y+Y,y+2*Y,E-Y,E-Y/4];const de=y,se=E,ue=H/(se-de);e.currentPriceTab==="full range"&&(le=[y,y+2*Y,E]),console.log("0117####drawChart####xArr####",le),console.log("0117####drawChart####utickMin####",de),console.log("0117####drawChart####utickMax####",se),console.log("0117####drawChart####unit####",ue);const me=le.map(V=>e.direction?gr(V,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new U(1).div(gr(V,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),ee=ce(me);Tn("#chart").selectAll("*").remove();const K=Tn("#chart").attr("width",H+ae.left+ae.right).attr("height",J+ae.top+ae.bottom).append("g").attr("transform",`translate(${ae.left},${ae.right})`),dn=ls(v,function(V){return Number(Math.abs(V.liquityAmount))})||0,z=ua().range([0,J]).domain([dn,0]);sa().rangeRound([0,H]).padding(.1);const Fe=K.append("g").attr("id","barsBox").selectAll("rect").data(v).enter().append("rect");c.value.theme=="default"?Fe.attr("x",function(V,D){return D===0?0:e.direction?Math.abs(V.index-de)*ue:Math.abs(se-V.index)*ue}).attr("y",function(V,D){return e.direction?D===v.length-1?0:z(V.liquityAmount):D===v.length-1?0:z(v[D+1].liquityAmount)}).attr("width",function(V,D){return D===0&&v.length===1&&V.liquityAmount>0?H:(e.direction,D!==v.length-1?Math.abs(v[D+1].index-V.index)*ue:0)}).attr("height",function(V,D){return D===0&&v.length===1&&V.liquityAmount>0?J:e.direction?D===v.length-1?0:J-z(V.liquityAmount):D===v.length-1?0:J-z(v[D+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Fe.attr("x",function(V,D){return D===0?0:e.direction?Math.abs(V.index-de)*ue:Math.abs(se-V.index)*ue}).attr("y",function(V,D){return e.direction?D===v.length-1?0:z(Math.abs(V.liquityAmount)):D===v.length-1?0:z(Math.abs(v[D+1].liquityAmount))}).attr("width",function(V,D){return D===0&&v.length===1&&V.liquityAmount>0?H:(e.direction,D!==v.length-1?Math.abs(v[D+1].index-V.index)*ue:0)}).attr("height",function(V,D){if(D===0&&v.length===1&&V.liquityAmount>0)return J;if(e.direction)return D===v.length-1?0:Number(V.liquityAmount)?J-z(Math.abs(V.liquityAmount)):0;{if(D===v.length-1)return 0;const Ze=J-z(Math.abs(v[D+1].liquityAmount));return Number(v[D+1].liquityAmount)?Ze:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const fn=K.append("g");fn.append("line").attr("x1",0).attr("y1",155).attr("x2",H).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const mn=fn.append("g");let sn=0;if(e.direction){for(let V=0;V<le.length;V++){const D=Oe(me[V],ee)||"0";console.log("0423####price####",D),me.push(D);const Ze=Math.abs(le[V]-de)*ue;let Ee=0;for(let $e=0;$e<D.length;$e++)D[$e]==="1"?Ee+=4.02:D[$e]==="."?Ee+=2.64:D[$e]==="7"?Ee+=5.48:Ee+=6;console.log(Ze,"x=>>>"),mn.append("text").text(D).attr("x",Ze-Ee/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}sn=Math.abs(ve-de)*ue}else{for(let V=le.length-1;V>=0;V--){const D=Oe(me[V],ee)||0;me.push(D);const Ze=Math.abs(le[V]-se)*ue;let Ee=0;for(let $e=0;$e<D.length;$e++)D[$e]==="1"?Ee+=4.02:D[$e]==="."?Ee+=2.64:D[$e]==="7"?Ee+=5.48:Ee+=6;mn.append("text").text(D).attr("x",Ze-Ee/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}sn=Math.abs(ve-se)*ue}(c.value.theme=="default"?K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+sn+", 0)");let Ye,qe,hn,Cn;e.direction?(console.log("0525###d3###select###minPriceTick###",x),console.log("0525###d3###select###maxPriceTick###",ie),console.log("0525###d3###select###props.minPrice###",e.minPrice),console.log("0525###d3###select###props.maxPrice###",e.maxPrice),Ye=x<de?-100:parseInt(String(Math.abs(x-de)*ue)),qe=ie<de?-100:parseInt(String(Math.abs(ie-de)*ue)),hn=te<de?-100:Math.abs(te-de)*ue,Cn=M<de?-100:Math.abs(M-de)*ue):(qe=x<de?-100:Math.abs(se-x)*ue,Ye=ie<de?-100:Math.abs(se-ie)*ue,Cn=te<de?-100:Math.abs(se-te)*ue,hn=M<de?-100:Math.abs(se-M)*ue),e.minPrice==="0"&&(Ye=0),e.maxPrice==="∞"&&(qe=H),S.value?o.value=H-Ye+60+"px":o.value=H-Ye+52+"px",i.value=qe+74+"px",te&&hn<H&&K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+hn+", 0)"),M&&Cn<H&&K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Cn+", 0)");const Je=K.append("g").attr("id","left-handle"),G=K.append("g").attr("id","right-handle");c.value.theme=="default"?(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Je.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),G.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),G.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),G.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),G.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Je.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),G.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),G.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),G.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),G.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",Ye),console.log("0525###d3###select###maxPriceTickX###",qe),Je.attr("transform","translate("+Ye+", 0)"),G.attr("transform","translate("+qe+", 0)");const Me=Ed().extent([[0,0],[H,J]]).handleSize(30).on("end",gn);K.append("g").attr("class","brush").call(Me).call(Me.move,[Ye,qe]);function gn(V){if(!V.sourceEvent||!V.selection)return;Je.attr("transform","translate("+V.selection[0]+", 0)"),G.attr("transform","translate("+V.selection[1]+", 0)"),S.value?o.value=H-V.selection[0]+60+"px":o.value=H-V.selection[0]+52+"px",i.value=V.selection[1]+74+"px";let D,Ze;console.log("0525###d3###select###e.selection[0]###",V.selection[0]),console.log("0525###d3###select###e.selection[0]###",V.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",H),console.log("0525###d3###select###unit###",ue),console.log("0525###d3###select###utickMin###",de),console.log("0525###d3###select###utickMax###",se),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let Ee=0,$e=0;e.direction?(Ee=k(parseInt(String(V.selection[0]/ue+de)),Number(e.poolInfo.tickSpacing)),D=g.tickIndexToPrice(Ee,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),$e=k(parseInt(String(V.selection[1]/ue+de)),Number(e.poolInfo.tickSpacing)),Ze=g.tickIndexToPrice($e,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("0525###d3###select###minTick###",Ee),console.log("0525###d3###select###maxTick###",$e),console.log("0525###d3###select###minPrice###",D),console.log("0525###d3###select###maxPrice###",Ze)):($e=k(se-V.selection[0]/ue,Number(e.poolInfo.tickSpacing)),D=1/g.tickIndexToPrice($e,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Ee=k(se-V.selection[1]/ue,Number(e.poolInfo.tickSpacing)),Ze=1/g.tickIndexToPrice(Ee,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),n.emit("onChangeMinPrice",String(Oe(String(D),6))),n.emit("onChangeMaxPrice",String(Oe(String(Ze),6)))}c.value.theme=="default"?Tn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):Tn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};R(""),_e(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([v,y,E,x])=>{console.log(v,y,E,E>y,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),v&&y&&E&&f(v,t.value)},{immediate:!0});const b=R(!0);return _e(()=>e.chartLoading,(v,y)=>{v!==y&&(b.value=v)},{immediate:!0,deep:!0}),{store:c,loading:b,zoomOut:q,zoomIn:$,rangeSizeLower:a,rangeSizeUpper:s,rangeSizeLowerPosition:o,rangeSizeUpperPosition:i,decimalFormat:St,numberformat:Bo}}});const cf=e=>(ot("data-v-76038aa7"),e=e(),it(),e),df={class:"chart-box"},ff={class:"chart"},pf={class:"zoom"},vf=cf(()=>m("svg",{id:"chart"},null,-1));function mf(e,n,t,o,i,r){return w(),T("div",df,[pn(m("div",ff,[m("div",pf,[m("div",{class:"amplification",onClick:n[0]||(n[0]=(...a)=>e.zoomOut&&e.zoomOut(...a))}),m("div",{class:"narrow",onClick:n[1]||(n[1]=(...a)=>e.zoomIn&&e.zoomIn(...a))})]),e.currentPriceTab!=="full range"?(w(),T("div",{key:0,class:"range-size range-size-lower",style:Oi({right:e.rangeSizeLowerPosition})},A(("numberformat"in e?e.numberformat:ge(Bo))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):O("",!0),e.currentPriceTab!=="full range"?(w(),T("div",{key:1,class:"range-size range-size-upper",style:Oi({left:e.rangeSizeUpperPosition})},A(("numberformat"in e?e.numberformat:ge(Bo))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):O("",!0),vf],512),[[Ra,!e.loading]])])}const hf=kn(uf,[["render",mf],["__scopeId","data-v-76038aa7"]]),gf=bn({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,n){const t=R(""),o=R(""),i=R(""),r=yn(),a=re(()=>r);console.log(e,"props124====>");const s=Rt(),u=re(()=>s),c=(b,v)=>b&&v?ja.plus(So(b),So(v)):b>0?b:0,p=b=>{let v=0;return b&&b.forEach(y=>{v+=So(String(y))}),String(v)},g=R([]),k=R([]),q=R(""),$=R(""),ce=R(!0);_e(()=>[a.value.newTopPoolsObj,e.poolInfo,u.value.tokensObj,e.aprRewardsParameter],async([b,v,y])=>{var E;if(b&&v&&y){const x=b[v==null?void 0:v.poolAddress];if(x){console.log(x,"===>stats"),t.value=x&&x.apr_7day&&x.apr_7day.replace("%","")||"0",$.value=p(x&&x.rewarder_apr),q.value=c(x&&x.apr_7day,x&&p(x.rewarder_apr)),console.log(e.poolInfo,"===>props.poolInfo"),console.log(q.value,"===> rewardApr.value"),o.value=Ve(x.tvl_in_usd,2),i.value=Ve(x.vol_in_usd_24h,2);const ie=v&&e.poolInfo.rewarder_infos||[],ve=[];for(let M=0;M<ie.length;M++){const ae=ie[M];if(y[ae.coinAddress]){const H=y[ae.coinAddress].decimals,J=St(ae.emissionsEveryDay/Math.pow(10,H),4),Ce=Number(J)>0?Ve(J):J,Y=St(Number(J)*((E=u.value.RATES[ae.coinAddress])==null?void 0:E.price),4);ve.push({...ae,logoUrl:y[ae.coinAddress].logoURI,day:Ce,dayUSD:Y,symbol:y[ae.coinAddress].symbol,rewarder_display:v&&v[`rewarder_display${M+1}`]?v[`rewarder_display${M+1}`]:!1})}}console.log(ve,"mockArr206===>"),g.value=ve.filter(M=>M.rewarder_display);const te=[];ve.forEach((M,ae)=>{y[M.coinAddress]&&te.push({...M,symbol:y[M.coinAddress].symbol,rewarderApr:x.rewarder_apr[ae]&&x.rewarder_apr[ae].replace("%","")})}),k.value=te.filter(M=>M.rewarder_display)}else t.value="0",o.value="--",i.value="--",q.value=="0";console.log(k.value,"===>rewarderArr.value"),ce.value=!1}},{immediate:!0,deep:!0});const f=()=>{n.emit("reviseValue")},S=b=>{var v;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((v=u.value.tokensObj[b==null?void 0:b.address])==null?void 0:v.logo_url)||(a.value.theme==="default"?Qe("/image/coins/unknown.png"):Qe("/image/coins/sui-unknown.png"))},I=re(()=>u.value.tokensWarningObj);return console.log(I.value,"==>tokensObj"),console.log(e.poolInfo,"props.poolInfo====>"),{tokensWarningObj:I,rewarderInfo:g,rewarderArr:k,rewardApr:q,rewardAprList:$,apr:t,liquidityTvl:o,vol24:i,addCommom:Ve,reviseValue:f,loading:ce,getCoinIcon:S,store:r}}});const Co=e=>(ot("data-v-a02cd2f6"),e=e(),it(),e),yf={key:0,class:"pool-info"},bf=Co(()=>m("use",{"xlink:href":"#icon-icon_on"},null,-1)),kf=[bf],wf={key:0,class:"info-block-container"},Cf={class:"info-block"},If={class:"coin-tips"},Pf={class:"left"},_f={alt:""},$f={class:"address"},Af=Co(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Sf=[Af],Tf={class:"info-block"},Nf={class:"coin-tips"},Mf={class:"left"},Rf={alt:""},Lf={class:"address"},qf=Co(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Uf=[qf],Of={class:"info-block"},Bf={class:"leabl"},Ff={class:"text"},Ef={class:"apr-hover-content"},Df={class:"info-block"},jf={class:"leabl"},Hf={class:"text"},Xf={class:"info-block"},zf={class:"leabl"},Vf={class:"text"},Wf={class:"info-block"},Kf={class:"leabl"},Yf={class:"text"},Gf={key:1,class:"pool-rewards-info"},Qf={class:"rewards-list-all"},Jf=Co(()=>m("div",{class:"icon-sign"},null,-1)),Zf={alt:""},xf={class:"rewards-value"};function ep(e,n,t,o,i,r){const a=Ea,s=Da,u=Ir,c=go("image");return e.poolInfo?(w(),T("div",yf,[e.loading?(w(),ke(u,{key:1})):(w(),T(Wn,{key:0},[m("div",{class:Pe(e.label?"pool-info-border pool-info-title":"pool-info-title")},[He(A(e.$t("newAdd.poolInfo"))+" ",1),(w(),T("svg",{class:Pe(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:n[0]||(n[0]=p=>e.reviseValue())},kf,2))],2),e.label?(w(),T("div",wf,[m("div",Cf,[m("div",If,[m("div",Pf,[pn(m("img",_f,null,512),[[c,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a)]]),m("div",$f,A(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address),1),ye(a,{address:e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(w(),T("svg",{class:"icon","aria-hidden":"true",onClick:n[1]||(n[1]=p=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address))},Sf))])])]),m("div",Tf,[m("div",Nf,[m("div",Mf,[pn(m("img",Rf,null,512),[[c,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b)]]),m("div",Lf,A(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address),1),ye(a,{address:e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(w(),T("svg",{class:"icon","aria-hidden":"true",onClick:n[2]||(n[2]=p=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address))},Uf))])])]),m("div",Of,[m("div",Bf,A(e.$t("common.apr")),1),m("div",Ff,[He(A(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:ge(Ve))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:ge(Ve))(e.apr,2))+"% ",1),m("div",Ef,[ye(s,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),m("div",Df,[m("div",jf,A(e.$t("common.liquidity")),1),m("div",Hf,"$"+A(e.liquidityTvl),1)]),m("div",Xf,[m("div",zf,A(e.$t("common.volume24h")),1),m("div",Vf,"$"+A(e.vol24),1)]),m("div",Wf,[m("div",Kf,A(e.$t("newAdd.tickSpacing")),1),m("div",Yf,A(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):O("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(w(),T("div",Gf,[He(A("Farming Rewards")+" "),m("div",Qf,[(w(!0),T(Wn,null,Pt(e.rewarderInfo,p=>(w(),T("div",{key:p,class:Pe(["rewards-list",p.day==0?"rewards-none":""])},[Jf,pn(m("img",Zf,null,512),[[c,p.logoUrl]]),m("div",xf,[m("p",null,A(p.day)+" "+A(p.symbol)+" / "+A(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):O("",!0)],64))])):O("",!0)}const np=kn(gf,[["render",ep],["__scopeId","data-v-a02cd2f6"]]),tp=bn({components:{Modal:Pr},props:{poolInfo:{type:Object,required:!0}},setup(e){const n=R({}),t=yn(),o=re(()=>t),i=re(()=>o.value.chainName),r=re(()=>Zt[i.value]);let a=R(!0);const s=Rt(),u=re(()=>s),c=Zo(),p=re(()=>e.poolInfo.needReverse);return _e(()=>u.value.currentPositionInfo,k=>{console.log(k,"==>newVal111111"),k&&(n.value=k)},{immediate:!0}),{getExplorerUrl:Fo,addCommom:Ve,router:c,pools:u,positionInfo:n,decimalFormat:St,rateChange:a,config:r,importIcon:Qe,store:o,chainName:i,checkNullObj:Rn,needReverse:p,getCoinIcon:k=>{var q;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((q=u.value.tokensObj[k==null?void 0:k.address])==null?void 0:q.logo_url)||(o.value.theme==="default"?Qe("/image/coins/unknown.png"):Qe("/image/coins/sui-unknown.png"))},decimalUi:Oe}}});const Io=e=>(ot("data-v-e3466cf5"),e=e(),it(),e),op=Io(()=>m("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ip={class:"rejected-container"},rp={class:"coin-pair"},ap=Io(()=>m("use",{"xlink:href":"#icon-icon-copy"},null,-1)),lp=[ap],sp=["href"],up=Io(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-jump"})],-1)),cp=[up],dp={class:"coin-pair"},fp={class:"fee"},pp={class:"status"},vp={class:"min-and-max"},mp={key:0},hp={class:"text"},gp={key:0,src:Sr,alt:""},yp={key:1,src:Tr,alt:""},bp={class:"text"},kp={key:1},wp={class:"text"},Cp={key:0,src:Sr,alt:""},Ip={key:1,src:Tr,alt:""},Pp={class:"text"},_p=Io(()=>m("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),$p=[_p];function Ap(e,n,t,o,i,r){const a=Cr,s=Xa,u=xo,c=_r("Modal"),p=go("image");return w(),ke(c,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:n[3]||(n[3]=g=>e.$emit("onClose"))},{closeIcon:Ue(()=>[op]),default:Ue(()=>[m("div",ip,[ye(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ue(()=>[m("div",rp,[He(A(e.positionInfo.tokenName)+" ",1),(w(),T("svg",{class:"icon","aria-hidden":"true",onClick:n[0]||(n[0]=g=>e.store.copy(e.positionInfo.nftHash))},lp)),m("a",{href:e.chainName==="Aptos"?("getExplorerUrl"in e?e.getExplorerUrl:ge(Fo))("nftAddress",e.positionInfo.nftHash):("getExplorerUrl"in e?e.getExplorerUrl:ge(Fo))("nftAddress",e.positionInfo.pos_object_id),target:"_blank"},cp,8,sp)])]),_:1},8,["loading"]),m("div",{class:Pe(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[ye(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ue(()=>{var g,k,q,$,ce,f,S,I,b,v,y,E;return[m("div",dp,[m("div",null,[pn(m("img",null,null,512),[[p,e.getCoinIcon(e.needReverse?(k=e.positionInfo)==null?void 0:k.token_b:(g=e.positionInfo)==null?void 0:g.token_a)]]),pn(m("img",null,null,512),[[p,e.getCoinIcon(e.needReverse?($=e.positionInfo)==null?void 0:$.token_a:(q=e.positionInfo)==null?void 0:q.token_b)]])]),m("span",null,A(e.needReverse?(I=(S=e.positionInfo)==null?void 0:S.token_b)==null?void 0:I.symbol:(f=(ce=e.positionInfo)==null?void 0:ce.token_a)==null?void 0:f.symbol)+" - "+A(e.needReverse?(E=(y=e.positionInfo)==null?void 0:y.token_a)==null?void 0:E.symbol:(v=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:v.symbol),1)]),m("div",fp,A(e.$t("common.fee"))+" "+A(e.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),m("div",pp,[ye(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),ye(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ue(()=>{var g,k,q,$,ce,f,S,I;return[m("div",vp,[(e.needReverse?!e.rateChange:e.rateChange)?(w(),T("div",mp,[m("div",hp,A(("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(w(),T("img",gp)):(w(),T("img",yp)),m("div",bp,A(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+A((k=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:k.symbol)+" per "+A(($=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:$.symbol),1)])):(w(),T("div",kp,[m("div",wp,A(("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(w(),T("img",Cp)):(w(),T("img",Ip)),m("div",Pp,A(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+A((f=(ce=e.positionInfo)==null?void 0:ce.token_a)==null?void 0:f.symbol)+" per "+A((I=(S=e.positionInfo)==null?void 0:S.token_b)==null?void 0:I.symbol),1)])),(w(),T("svg",{class:"icon-change","aria-hidden":"true",onClick:n[1]||(n[1]=b=>e.rateChange=!e.rateChange)},$p))])]}),_:1},8,["loading"])]),ye(u,{disabled:("checkNullObj"in e?e.checkNullObj:ge(Rn))(e.positionInfo),onClick:n[2]||(n[2]=g=>e.router.push(`/position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:Ue(()=>[He(A(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])}const Sp=kn(tp,[["render",Ap],["__scopeId","data-v-e3466cf5"]]),Tp=bn({components:{Modal:Pr},setup(){const e=yn(),n=re(()=>e);return{importIcon:Qe,store:n}}}),Np=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,Mp=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const Rp=e=>(ot("data-v-d7a9ceb3"),e=e(),it(),e),Lp=Rp(()=>m("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),qp={class:"create-success-container"},Up={key:0,src:Np,alt:""},Op={key:1,src:Mp,alt:""},Bp={class:"waiting-title"};function Fp(e,n,t,o,i,r){const a=_r("Modal");return w(),ke(a,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:n[0]||(n[0]=s=>e.$emit("onClose"))},{closeIcon:Ue(()=>[Lp]),default:Ue(()=>[m("div",qp,[e.store.theme=="default"?(w(),T("img",Up)):(w(),T("img",Op)),m("p",Bp,A(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const Ep=kn(Tp,[["render",Fp],["__scopeId","data-v-d7a9ceb3"]]),Dp={1e-4:2,5e-4:10,.002:60,.006:200},jp={1e-4:2,5e-4:10,.0025:60,.01:200},Hp=bn({setup(){let e=R(!1);const{t:n,locale:t}=La(),o=Na(),i=re(()=>o),r=yn(),a=R(0),s=R(!1),u=R(!1),c=R(!1),p=R("fromCoin"),g=R(""),k=R(""),q=R(!1),$=R(!0),ce=R(!1),f=R(!0),S=R(!1),I=R(""),b=R(""),v=R(""),y=R(""),E=R(""),x=R(""),ie=R(!1),ve=R(!1),te=R(!1),M=R(""),ae=R(0),H=R(!0),J=R(!1),Ce=R([]),Y=R(""),le=R(30),de=R("30D"),se=R("Estimated APR"),ue=R([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),me=R(!0),ee=yn(),K=re(()=>ee),dn=re(()=>{var l;return!!((l=N==null?void 0:N.query)!=null&&l.action&&(!C.value||!P.value||!M.value))}),z=re(()=>K.value.chainName?Jo(K.value.chainName):{}),We=re(()=>{var l;return(l=K.value)==null?void 0:l.filterCreatePoolCoin}),Fe=l=>{console.log(l,"====>>>>item",l.num,le.value),rn.updateCurrentPools(h.value.poolAddress,K.value.chainName),de.value=l.time,le.value=l.num},fn=()=>{console.log("reviseValue==>"),me.value=!me.value},mn=R([]),sn=()=>{a.value=0,N.query.action!=="create-pool"&&N.query.actions!=="new-position"&&(Po(),_n(),rn.updateCurrentPools(h.value.poolAddress,K.value.chainName)),rn.setPoolConfigList(Kt.value,K.value.filterCoinsObj)},Hn=re(()=>Number(v.value)>0&&Number(y.value)>0&&Number(v.value)>Number(y.value)),Ye=l=>{ce.value=l,v.value="0",y.value="∞"},qe=re(()=>{if(W.value.poolConfigList&&C.value&&P.value){const l=W.value.poolConfigList.filter(_=>{var L,B,F,X;return _.token_a.address.toUpperCase()===((L=C.value.address)==null?void 0:L.toUpperCase())&&_.token_b.address.toUpperCase()===((B=P.value.address)==null?void 0:B.toUpperCase())||_.token_b.address.toUpperCase()===((F=C.value.address)==null?void 0:F.toUpperCase())&&_.token_a.address.toUpperCase()===((X=P.value.address)==null?void 0:X.toUpperCase())});console.log(l,"===>info");const d=[];return l.forEach(_=>{d.push(Number(_.fee))}),console.log(d,"===>>result"),d}else return[]}),hn=l=>{const d={};let _=new U(0);l.forEach(Q=>{_=_.add(new U(Q.object.liquidity))});const L=[];let B=new U(0);l.forEach(Q=>{const Z=new U(Q.object.liquidity),oe=Z.gt(0)?new U(Z).div(_).mul(100).toString():0,ne=Ct(oe,2);B=B.plus(ne);const fe=ne.split(".");L.push({value:ne,int:fe[0],decimal:fe[1],fee:Q.fee})});let F=new U(100).minus(B).toNumber();const X=L.sort((Q,Z)=>Number(Z.decimal)-Number(Q.decimal));if(F)for(let Q=0;Q<X.length&&F;Q++)X[Q].value=new U(X[Q].value).plus(.01).toString(),F=new U(F).minus(.01).toNumber();return l.forEach(Q=>{var oe;const Z=(oe=X.find(ne=>Q.fee===ne.fee))==null?void 0:oe.value;d[Q.fee]={rateText:(Z>0&&Z<.01?"<0.01":Z==0?0:Ct(Z,2))+"% select",rate:Z}}),d},Cn=re(()=>{if(W.value.poolConfigList&&C.value&&P.value){const l=W.value.poolConfigList.filter(_=>{var F,X,Q,Z;const L=_.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":_.coin_a_address,B=_.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":_.coin_b_address;return console.log(_,"p===>1334"),L.toUpperCase()===((F=C.value.address)==null?void 0:F.toUpperCase())&&B.toUpperCase()===((X=P.value.address)==null?void 0:X.toUpperCase())||B.toUpperCase()===((Q=C.value.address)==null?void 0:Q.toUpperCase())&&L.toUpperCase()===((Z=P.value.address)==null?void 0:Z.toUpperCase())});return hn(l)}}),Je=re(()=>[{label:.01+"% "+n("common.feeTier"),title:.01+"% ",fee:1e-4,text:n("newAdd.bestVeryStablePairs")},{label:.05+"% "+n("common.feeTier"),title:.05+"% ",fee:5e-4,text:n("newAdd.bestStablePairs")},K.value.chainName=="Aptos"?{label:.2+"% "+n("common.feeTier"),title:.2+"% ",fee:.002,text:n("newAdd.bestMostPairs")}:{label:.25+"% "+n("common.feeTier"),title:.25+"% ",fee:.0025,text:n("newAdd.bestMostPairs")},K.value.chainName=="Aptos"?{label:.6+"% "+n("common.feeTier"),title:.6+"% ",fee:.006,text:n("newAdd.besteExoticPairs")}:{label:"1% "+n("common.feeTier"),title:"1% ",fee:.01,text:n("newAdd.besteExoticPairs")}]),G=re(()=>r.slippage),Me=re(()=>!C.value||!P.value),gn=re(()=>{var l,d;return!I.value&&!b.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(I.value)>Number(xe.value)||Number(b.value)>Number(en.value)?(console.log("addLiquidityBtnDisabled22222"),!0):V.value!==n("button.addLiquidity")&&V.value!==n("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",V.value),!0):h.value&&h.value&&h.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):(l=N==null?void 0:N.query)!=null&&l.action&&!j.value&&!((d=j.value)!=null&&d.currentPrice)?(console.log("addLiquidityBtnDisabled55555"),!0):!!(Number(I.value)<=0&&Number(b.value)<=0||!Ae.value&&Number(I.value)==0||!Se.value&&Number(b.value)==0||te.value)}),V=re(()=>{var l,d,_;return h.value&&h.value.is_pause?"Pool Closed":!C.value||!P.value?n("modal.selectTokenModalTitle"):Kt.value=="Sui"&&!qe.value.includes(1e-4)&&!qe.value.includes(5e-4)&&!qe.value.includes(.0025)&&!qe.value.includes(.01)&&!We.value[C==null?void 0:C.value.address]&&!We.value[(l=P.value)==null?void 0:l.address]?"Invalid Pool":(N.query.action||N.query.actions)&&!M.value&&Zt[K.value.chainName].hasCreatePool?(console.log("addLiquidityBtnDisabled11111"),"Select fee tier"):Me.value?n("modal.selectTokenModalTitle"):!Zt[K.value.chainName].hasCreatePool&&!h.value?n("button.poolNotFound"):Number(I.value)>Number(xe.value)?n("button.insufficientBalance",{name:C.value.symbol}):Number(b.value)>Number(en.value)?n("button.insufficientBalance",{name:P.value.symbol}):S.value?n("modal.selectTokenModalTitle"):(console.log(h.value,"==>poolInfo.value"),console.log(!h.value&&((d=N==null?void 0:N.query)==null?void 0:d.action),"===>!poolInfo.value && route?.query?.action"),!h.value&&C.value&&P.value&&((_=N==null?void 0:N.query)==null?void 0:_.action)=="create-pool"?n("newAdd.preview"):!Number(I.value)&&!Number(b.value)?n("button.enterAmount"):y.value!=="∞"&&Number(v.value)>=Number(y.value)?n("newAdd.invalidRange"):n("button.addLiquidity"))}),D=re(()=>{var l,d,_;return!h.value||Rn(K.value.addressHistTokens)||!K.value.addressHistTokens[(l=h.value)==null?void 0:l.poolAddress]?null:Object.fromEntries((_=K.value.addressHistTokens[(d=h.value)==null?void 0:d.poolAddress])==null?void 0:_.data.map(L=>[L.key,L.value]))}),Ze=re(()=>$.value?D.value&&Oe(le.value==7?D.value.before_7_d_contract_price_lowest:le.value==24?D.value.before_24_h_contract_price_lowest:D.value.before_30_d_contract_price_lowest,6)||0:D.value&&Oe(new U(1).div(le.value==7?D.value.before_7_d_contract_price_highest:le.value==24?D.value.before_24_h_contract_price_highest:D.value.before_30_d_contract_price_highest).toString(),6)||0),Ee=re(()=>$.value?D.value&&Oe(le.value==7?D.value.before_7_d_contract_price_highest:le.value==24?D.value.before_24_h_contract_price_highest:D.value.before_30_d_contract_price_highest,6)||0:(D.value&&Oe(1/Number(le.value==7?D.value.before_7_d_contract_price_lowest:le.value==24?D.value.before_24_h_contract_price_lowest:D.value.before_30_d_contract_price_lowest),6))==1/0?0:D.value&&Oe(1/Number(le.value==7?D.value.before_7_d_contract_price_lowest:le.value==24?D.value.before_24_h_contract_price_lowest:D.value.before_30_d_contract_price_lowest),6)||0),$e=Zo(),C=R(),P=R();ho(()=>{document.body.clientWidth<750?(me.value=!1,e.value=!1):(me.value=!0,e.value=!0)});const Ut=l=>{var d,_;if((d=h.value)==null||d.token_a.decimals,(_=h.value)==null||_.token_b.decimals,console.log(l,"value1830===>"),N.query.action&&Zn.value&&l!==v.value){$o();return}l!==v.value&&Y.value=="full range"?(Xt({key:"custom",...un.value.custom}),console.log(un.value.custom.min,"priceConfigObj.value[custom].min")):(Y.value!=="full range"&&Y.value!=="custom"&&(Y.value="custom"),v.value=l)},Ot=l=>{if(N.query.action&&Zn.value&&l!==y.value){$o();return}l!==y.value&&Y.value=="full range"?Xt({key:"custom",...un.value.custom}):(Y.value!=="full range"&&Y.value!=="custom"&&(Y.value="custom"),y.value=l)},Bt=()=>{var d;if(N.query.action)$.value=!$.value,j.value&&Wt(Oe(new U(1).div(j.value.currentPrice).toString(),(d=P==null?void 0:P.value)==null?void 0:d.decimals));else if(H.value=!0,H.value=!1,$.value=!$.value,v.value!==""&&y.value!==""&&v.value!=="0"&&y.value!=="∞"){const _=v.value,L=y.value;v.value=new U(1).div(L).toString(),y.value=new U(1).div(_).toString();const B=E.value,F=x.value;E.value=new U(1).div(F).toString(),x.value=new U(1).div(B).toString(),J.value=!1}const l=C.value;C.value=P.value,P.value=l,f.value?I.value=b.value:b.value=I.value};_e([v,y],([l,d])=>{console.log(l,d,"==>minPrice,maxPrice"),Number(l)!==0&&Number(d)!==0&&_n(),d!=="∞"&&Number(l)!==0&&Number(d)!==0&&Number(l)>=Number(d)?te.value=!0:te.value=!1,Number(l)==0&&Number(d)==0&&Ke.value&&(te.value=!0,console.log("价格区间错误"))});const Kn=R(!1),Yn=R(!1),Ft=l=>{var d,_,L,B,F,X,Q,Z,oe;p.value=l,l==="fromCoin"?(g.value=((d=P.value)==null?void 0:d.address)||"",k.value=N.query.action=="create-pool"||N.query.actions=="new-position"?(_=C.value)==null?void 0:_.address:h.value.needReverse?h.value.token_b.address:h.value.token_a.address,((L=N==null?void 0:N.query)==null?void 0:L.action)=="create-pool"&&((B=N==null?void 0:N.query)==null?void 0:B.from)==="pool"?Yn.value=!0:Yn.value=!1,Kn.value=!1):(g.value=((F=C.value)==null?void 0:F.address)||"",k.value=N.query.action=="create-pool"||N.query.actions=="new-position"?(X=P.value)==null?void 0:X.address:h.value.needReverse?h.value.token_a.address:h.value.token_b.address,((Q=N==null?void 0:N.query)==null?void 0:Q.action)=="create-pool"&&((Z=N==null?void 0:N.query)==null?void 0:Z.from)==="pool"&&!We[(oe=C.value)==null?void 0:oe.address]?(console.log("0515###这里这里##fromCoin.value###",C.value),Kn.value=!0):Kn.value=!1,Yn.value=!1),q.value=!0},Re=R(null),Le=R(null),gt=R({}),yt=R({}),Et=l=>{var L,B,F,X;S.value=!1;const d=h.value?h.value.needReverse?h.value.token_b:h.value.token_a:Re.value,_=h.value?h.value.needReverse?h.value.token_a:h.value.token_b:Le.value;p.value==="fromCoin"?(((L=C.value)==null?void 0:L.address)===(d==null?void 0:d.address)||!((B=C.value)!=null&&B.address)?(P.value&&l.address.toLowerCase()===(P==null?void 0:P.value.address.toLowerCase())&&(P.value=null,Le.value=null,M.value=""),C.value=l):(C.value&&l.address.toLowerCase()===(C==null?void 0:C.value.address.toLowerCase())&&(C.value=null,Re.value=null,M.value=""),P.value=l),Re.value=l,N.query.action||(N.query.fee="")):(((F=P.value)==null?void 0:F.address)===(_==null?void 0:_.address)||!((X=P.value)!=null&&X.address)?(C.value&&l.address.toLowerCase()===(C==null?void 0:C.value.address.toLowerCase())&&(C.value=null,Re.value=null,M.value=""),P.value=l):(P.value&&l.address.toLowerCase()===(P==null?void 0:P.value.address.toLowerCase())&&(P.value=null,Le.value=null,M.value=""),C.value=l),Le.value=l,N.query.action||(N.query.fee="")),Wt(""),q.value=!1},Dt=l=>{l==="fromCoin"?(f.value=!0,K.value.chainName==="Aptos"?I.value=Number(xe.value)>0?C.value.symbol=="APT"?new U(Number(xe.value)).sub(new U(.1)).lt(new U(0))?"0":new U(Number(xe.value)).sub(new U(.1)).toString():String(xe.value):"":I.value=Number(xe.value)>0?C.value.symbol=="SUI"?new U(Number(xe.value)).sub(new U(.05)).lt(new U(0))?"0":new U(Number(xe.value)).sub(new U(.05)).toString():String(xe.value):""):(f.value=!1,K.value.chainName==="Aptos"?b.value=Number(en.value)>0?P.value.symbol=="APT"?new U(Number(en.value)).sub(new U(.1)).lt(new U(0))?"0":new U(Number(en.value)).sub(new U(.1)).toString():String(en.value):"":b.value=Number(en.value)>0?P.value.symbol=="SUI"?new U(Number(en.value)).sub(new U(.05)).lt(new U(0))?"0":new U(Number(en.value)).sub(new U(.05)).toString():String(en.value):"")},jt=l=>{l==="fromCoin"?(f.value=!0,I.value=Number(xe.value)>0?Ct(new U(Number(xe.value)).div(2).toString(),C.value.decimals).toString():""):(f.value=!1,b.value=Number(en.value)>0?Ct(new U(Number(en.value)).div(2).toString(),P.value.decimals).toString():"")};_e(I,(l,d)=>{console.log(I,"===>fromCoinAmount"),l==""&&f.value&&(b.value=""),l&&f.value&&_n()}),_e(b,(l,d)=>{console.log(l,"===>>>>newValsda"),l==""&&!f.value&&(I.value=""),l&&!f.value&&_n()});const Ht=()=>{C.value=null,P.value=null,v.value="0",y.value="0",I.value="",b.value="",S.value=!0,M.value="",ie.value=!1,Ae.value=!0,Se.value=!0,H.value=!1},In=R(!1),{setIsShowSuccess:Un,setIsShowRejected:On,setIsShowWaiting:on,setTransactionDesc:rt,setTransactionTxid:Bn,setPositiomNum:at}=r,N=wr(),rn=Rt(),Xn=re(()=>Zt[K.value.chainName].hasCreatePool);_e(()=>[M.value,N.query.action,C.value,P.value,N.query.actions,Xn.value],([l,d,_,L,B,F])=>{!l&&(d=="create-pool"||B=="new-position")&&_&&L&&F?(ie.value=!0,H.value=!1):(!_||!L)&&(ie.value=!1)},{immediate:!0});const W=re(()=>rn);_e(()=>W.value.tokens,async l=>{if(l&&l.length>0){const d=l;if(N&&N.query&&N.query.tokena&&(console.log("0410###deposite###watch###route.query.tokena####",N.query.tokena),N.query.tokena)){const _=await z.value.getTokenBySymbol(d,N.query.tokena);C.value=_,Re.value=_}if(N&&N.query&&N.query.tokenb&&N.query.tokenb){const _=await z.value.getTokenBySymbol(d,N.query.tokenb);P.value=_,Le.value=_}}},{immediate:!0});const Fn=R({}),Ae=R(!1),Se=R(!1),lt=R(),st=R(),Ke=R(),Pn=R(),_n=async()=>{var De,we,an,Xe,Ne,je;if(!v.value&&!y.value)return!1;if(!I.value&&!b.value&&!v.value&&!y.value)return;const l=h.value?h.value:j.value;if(console.log(l,"===>poolInfos"),Rn(l))return;console.log("添加流动性预计算=====>");const{TickUtil:d,TickMath:_,getNearestTickByTick:L}=z.value,B=l==null?void 0:l.token_a.decimals,F=l==null?void 0:l.token_b.decimals;let X,Q,Z,oe,ne,fe,be,Te,he=l.current_tick_index,pe;if(l.token_a.address.toLowerCase()===C.value.address.toLowerCase()&&l.token_b.address.toLowerCase()===P.value.address.toLowerCase()?pe=!0:pe=!1,console.log(pe,"=====>directs"),console.log("currentTickIndex####",he),console.log("currentTickIndex####",he),console.log("currentTickIndex####",he),v.value==="0"&&y.value==="∞")Z=d.getMinIndex(Number(l.tickSpacing)),oe=d.getMaxIndex(Number(l.tickSpacing)),ne=_.tickIndexToSqrtPriceX64(Z),fe=_.tickIndexToSqrtPriceX64(oe);else if(Y.value=="custom"||N.query.action){console.log(pe,"===>directs1866"),pe?(X=Number(v.value),Q=Number(y.value)):(X=new U(1).div(y.value).toString(),Q=new U(1).div(v.value).toString()),console.log("0518###pre###directs###",pe),console.log("0518###pre###minPrice###",v.value),console.log("0518###pre###maxPrice###",y.value),console.log("0518###pre###poolInfos###",l),console.log("0518###pre###decimalsA###",B),console.log("0518###pre###decimalsB###",F),console.log("0518###pre###currentTickIndex###",he),console.log(X,Q,"min max1875"),console.log(v.value,y.value,"===>maxPrice.value");try{be=X==0?-443636:_.priceToTickIndex(new U(X),B,F)}catch{be=-443636}try{Te=_.priceToTickIndex(new U(Q),B,F)}catch{Te=443636}Z=L(be,Number(l.tickSpacing)),oe=L(Te,Number(l.tickSpacing)),console.log("0523####min####",X),console.log("0523####max####",Q),ne=_.priceToSqrtPriceX64(new U(X),B,F);try{fe=_.priceToSqrtPriceX64(new U(Q),B,F)}catch{console.log("0523###test###max###",Q),Q===1/0&&(console.log("0523###test###max###11111"),fe=_.tickIndexToSqrtPriceX64(d.getMaxIndex(Number(l.tickSpacing))))}console.log(Z,"===>tick_lower"),console.log(oe,"===>tick_upper"),console.log("0518###pre###tick_lower###",Z),console.log("0518###pre###tick_upper###",oe)}else Z=(De=un.value[Y.value])==null?void 0:De.lower,oe=(we=un.value[Y.value])==null?void 0:we.upper,ne=_.tickIndexToSqrtPriceX64(Z),fe=_.tickIndexToSqrtPriceX64(oe);if(y.value!=="∞"&&Z>=oe){Ae.value=!0,I.value="",Se.value=!0,b.value="";return}if(console.log(oe,he,Z,"1922"),y.value==="∞"||he>Z&&he<oe){Ae.value=!1,Se.value=!1;let Be;if(I.value||b.value){if(f.value){const An=new U(I.value).mul(Math.pow(10,C.value.decimals)).toString();Be=new Vn(An)}else{const An=new U(b.value).mul(Math.pow(10,P.value.decimals)).toString();Be=new Vn(An)}console.log(pe,"======>directs");const{liquidityAmount:Ie,tokenMaxA:ln,tokenMaxB:Ge,tokenMaxAOrigin:ze,tokenMaxBOrigin:$n}=z.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.token_a,tokenB:l.token_b,lowerTick:Z,upperTick:oe,coinAmount:Be,iscoinA:pe?f.value:!f.value,roundUp:!0,slippage:Number(G.value)/100,curSqrtPrice:new Vn(l.current_sqrt_price)});Fn.value={liquidityAmount:Ie,tokenMaxA:ln,tokenMaxB:Ge,tokenMaxAOrigin:ze,tokenMaxBOrigin:$n},console.log(Ie,ln,Ge,ze,$n,"preAdd"),pe?f.value?b.value=Number(Ge)>0?Ge:"":I.value=Number(ln)>0?ln:"":f.value?b.value=ln:I.value=Ge}}else if(he>=oe){if(pe?I.value="":b.value="",Ae.value=pe,Se.value=!pe,(an=N==null?void 0:N.query)!=null&&an.action&&(Ae.value=!0,Se.value=!0),I.value||b.value){let Be;if(pe){const Ie=new U(b.value).mul(Math.pow(10,(Xe=P.value)==null?void 0:Xe.decimals)).toString();Be=new Vn(Ie),Fn.value={liquidityAmount:z.value.estimateLiquidityForCoinB(ne,fe,Be),tokenMaxA:0,tokenMaxB:b.value}}else{const Ie=new U(I.value).mul(Math.pow(10,(Ne=C.value)==null?void 0:Ne.decimals)).toString();Be=new Vn(Ie),Fn.value={liquidityAmount:z.value.estimateLiquidityForCoinB(ne,fe,Be),tokenMaxA:0,tokenMaxB:I.value}}}}else if(he<=Z){if(Ae.value=!pe,Se.value=pe,(je=N==null?void 0:N.query)!=null&&je.action&&(Ae.value=!0,Se.value=!0),pe?b.value="":I.value="",I.value||b.value){let Be;if(pe){const Ie=new U(I.value).mul(Math.pow(10,C.value.decimals)).toString();Be=new Vn(Ie),console.log(ne,"minPriceX64===>"),console.log(fe,"maxPriceX64===>maxPriceX64"),console.log(Ie,"===>amount"),Fn.value={liquidityAmount:z.value.estimateLiquidityForCoinA(ne,fe,Be),tokenMaxA:I.value,tokenMaxB:0}}else{const Ie=new U(b.value).mul(Math.pow(10,P.value.decimals)).toString();Be=new Vn(Ie),Fn.value={liquidityAmount:z.value.estimateLiquidityForCoinA(ne,fe,Be),tokenMaxA:b.value,tokenMaxB:0}}}}else Ae.value=!0,I.value="",Se.value=!0,b.value=""},Gn=R(0);_e(()=>{var l;return(l=N.query)==null?void 0:l.fee},l=>{l&&(Gn.value=l,M.value=Number(l)*100+"% "+n("common.feeTier"))},{immediate:!0,deep:!0});const ut=re(()=>{var B,F,X,Q,Z;const l=(B=N==null?void 0:N.query)==null?void 0:B.fee,d=(F=N==null?void 0:N.query)==null?void 0:F.tokena,_=(X=N==null?void 0:N.query)==null?void 0:X.tokenb;let L=null;console.log("0501###basePoolInfo###tokena###",d),console.log("0501###basePoolInfo###tokenb###",_),console.log("0501###basePoolInfo###fromCoin###",(Q=C==null?void 0:C.value)==null?void 0:Q.address),console.log("0501###basePoolInfo###toCoin###",(Z=P==null?void 0:P.value)==null?void 0:Z.address),console.log("0501###basePoolInfo###fee###",l),console.log(W.value.poolConfigList,"===>pools.value.poolConfigList");for(let oe=0;oe<W.value.poolConfigList.length;oe++){const ne=W.value.poolConfigList[oe];console.log(ne,"p===>"),!d||!_?L={}:(ne.token_a.address.toUpperCase()===(d==null?void 0:d.toUpperCase())&&ne.token_b.address.toUpperCase()===(_==null?void 0:_.toUpperCase())||ne.token_b.address.toUpperCase()===(d==null?void 0:d.toUpperCase())&&ne.token_a.address.toUpperCase()===(_==null?void 0:_.toUpperCase()))&&(L=ne)}return console.log("0501###baseInfo###",L),L}),h=re(()=>{var d,_,L,B,F,X,Q,Z,oe,ne,fe,be,Te;const l=(d=N==null?void 0:N.query)==null?void 0:d.fee;if(C.value&&P.value){let he=null;if(l)for(const De in W.value.poolsObj){const we=W.value.poolsObj[De];(we.token_a.address.toUpperCase()===((L=(_=C==null?void 0:C.value)==null?void 0:_.address)==null?void 0:L.toUpperCase())&&we.token_b.address.toUpperCase()===((F=(B=P==null?void 0:P.value)==null?void 0:B.address)==null?void 0:F.toUpperCase())&&Number(we.fee)==Number(Gn.value)||we.token_b.address.toUpperCase()===((X=C==null?void 0:C.value.address)==null?void 0:X.toUpperCase())&&we.token_a.address.toUpperCase()===((Z=(Q=P==null?void 0:P.value)==null?void 0:Q.address)==null?void 0:Z.toUpperCase())&&Number(we.fee)==Number(Gn.value))&&(he=we)}const pe=[];if(!((oe=N==null?void 0:N.query)!=null&&oe.action)&&(!l||!he)){for(const De in W.value.poolsObj){const we=W.value.poolsObj[De];(we.token_a.address.toUpperCase()===((ne=C==null?void 0:C.value.address)==null?void 0:ne.toUpperCase())&&we.token_b.address.toUpperCase()===((fe=P.value.address)==null?void 0:fe.toUpperCase())||we.token_b.address.toUpperCase()===((be=C==null?void 0:C.value.address)==null?void 0:be.toUpperCase())&&we.token_a.address.toUpperCase()===((Te=P.value.address)==null?void 0:Te.toUpperCase()))&&pe.push(we)}console.log(pe,"result2408===>"),pe&&pe.length>0&&(he=pe.sort((De,we)=>{const an=De.coinAmountA+De.coinAmountB;return we.coinAmountA+we.coinAmountB-an})[0]),console.log(pe,"result===>2351")}return he&&!Rn(he)?he:null}return null}),Qn=re(()=>{var L,B;const l=(L=C==null?void 0:C.value)==null?void 0:L.address,d=(B=P==null?void 0:P.value)==null?void 0:B.address;let _=null;for(let F=0;F<W.value.poolConfigList.length;F++){const X=W.value.poolConfigList[F];!l||!d?_={}:(X.token_a.address.toUpperCase()===(l==null?void 0:l.toUpperCase())&&X.token_b.address.toUpperCase()===(d==null?void 0:d.toUpperCase())||X.token_b.address.toUpperCase()===(l==null?void 0:l.toUpperCase())&&X.token_a.address.toUpperCase()===(d==null?void 0:d.toUpperCase()))&&(_=X)}return console.log("0501###baseInfo###",_),_});_e(()=>[ut.value,h.value,W.value.recommendRangesObj],(l,d)=>{var _,L,B,F,X;l[0]&&!l[1]&&l[2]&&!Rn(l[2])&&(!d||l[0]&&((_=l[0])==null?void 0:_.address)!==d[0]&&((L=d[0])!=null&&L.address))&&(B=l[0])!=null&&B.address&&!((F=N==null?void 0:N.query)!=null&&F.action)&&rn.setSinglePool(l[0],l[2][(X=l[0])==null?void 0:X.address],K.value.chainName)},{immediate:!0,deep:!0});const un=R({}),bt=async(l,d)=>{var _,L,B,F;if(console.log("deposit##poolInfoWatch###value####",l),l){const{TickMath:X,getNearestTickByTick:Q}=z.value;d&&(H.value=!0,Ae.value=!1,Se.value=!1),l.token_a.address.toLowerCase()===C.value.address.toLowerCase()&&l.token_b.address.toLowerCase()===P.value.address.toLowerCase()?$.value=!0:$.value=!1,J.value=!0;const Z=l.token_a.decimals,oe=l.token_b.decimals;M.value=l.fee*100+"% "+n("common.feeTier");const ne=l.current_tick_index;Ke.value=X.sqrtPriceX64ToPrice(l.current_sqrt_price,Z,oe).toString(),Pn.value=new U(1).div(new U(Ke.value)).toString();const fe=await z.value.getTicks(l);if(Ce.value=fe?z.value.getTickDataFromUrlData(fe):[],d){let be=W.value.poolPriceConfigObj&&W.value.poolPriceConfigObj[l.address]&&W.value.poolPriceConfigObj[l.address].recommend_ranges||{};const Te=W.value.poolPriceConfigObj&&W.value.poolPriceConfigObj[l.address]&&W.value.poolPriceConfigObj[l.address].type||"",he=ne-Number(Te=="unstable"?Number(l.tickSpacing)*2:Number(l.tickSpacing)*3),pe=ne+Number(Te=="unstable"?Number(l.tickSpacing)*2:Number(l.tickSpacing)*3),De=(L=(_=h==null?void 0:h.value)==null?void 0:_.token_a)==null?void 0:L.decimals,we=(F=(B=h==null?void 0:h.value)==null?void 0:B.token_b)==null?void 0:F.decimals,an=z.value.TickMath.tickIndexToPrice(he,De,we).toString(),Xe=z.value.TickMath.tickIndexToPrice(pe,De,we).toString();be["full range"]={lower:-443636,upper:443636},be.custom={lower:he,upper:pe,minPrice:an,maxPrice:Xe};const Ne=[];for(let je in be)be[je]&&Ne.push({...be[je],key:je});mn.value=Ne,Te?l.isSelfBuilt?Y.value="custom":Te=="stable"?Y.value="suggested":Y.value="passive":Y.value="custom",un.value=be,Xt({key:Y.value,...be[Y.value]}),console.log(mn,"===>currentPriceTabList")}H.value=!1}else H.value=!1},kt=re(()=>rn.getPoolInfoSuccess);_e(()=>h.value,(l,d)=>{var _,L,B,F,X,Q,Z,oe,ne,fe,be,Te;console.log("0419###poolInfo###watch###",l),console.log("0419###poolInfo###pools.value.poolsObj###",W.value.poolsObj),l?((!d||l.poolAddress!==d.poolAddress||l.current_sqrt_price!==d.current_sqrt_price)&&bt(l,!d||l.poolAddress!==d.poolAddress),(N==null?void 0:N.name)=="deposit"&&$e.push(`/deposit?poolAddress=${l==null?void 0:l.address}&tokena=${(_=C==null?void 0:C.value)==null?void 0:_.address}&tokenb=${(L=P==null?void 0:P.value)==null?void 0:L.address}&fee=${l==null?void 0:l.fee}`)):((B=N==null?void 0:N.query)==null?void 0:B.actions)=="new-position"||(!Qn.value&&Xn.value&&((F=C==null?void 0:C.value)!=null&&F.address||(X=P==null?void 0:P.value)!=null&&X.address)?(M.value="",v.value="0",y.value="∞",Ae.value=!1,Se.value=!1,H.value=!1,Ke.value="",Pn.value="",console.log("0501####333333",C==null?void 0:C.value),(N==null?void 0:N.name)=="deposit"&&$e.push(`/deposit?action=create-pool&tokena=${(Q=C==null?void 0:C.value)==null?void 0:Q.address}&tokenb=${(Z=P==null?void 0:P.value)==null?void 0:Z.address}&from=${(oe=N==null?void 0:N.query)==null?void 0:oe.from}`)):Xn.value&&!l&&!((ne=N==null?void 0:N.query)!=null&&ne.action)&&kt.value&&!ut.value?(M.value="",v.value="0",y.value="∞",Ae.value=!1,Se.value=!1,H.value=!1,Ke.value="",Pn.value="",console.log("0501####222222"),(N==null?void 0:N.name)=="deposit"&&$e.push(`/deposit?action=create-pool&tokena=${(fe=C==null?void 0:C.value)==null?void 0:fe.address}&tokenb=${(be=P==null?void 0:P.value)==null?void 0:be.address}&from=${(Te=N==null?void 0:N.query)==null?void 0:Te.from}`)):(Ae.value=!1,Se.value=!1,H.value=!1,Ke.value="",Pn.value="")),console.log(!ut.value,"===>getPoolInfoSuccess.value&& !basePoolInfo.value")},{immediate:!0});const xe=re(()=>i.value.assets&&C.value&&i.value.assets[C.value.address]?qi(i.value.assets[C.value.address].balance,C.value.decimals):"0"),en=re(()=>i.value.assets&&P.value&&i.value.assets[P.value.address]?qi(i.value.assets[P.value.address].balance,P.value.decimals):"0"),Po=async()=>{console.log("0412###resetTickList####");const l=await z.value.getTicks(h.value);console.log("0412###resetTickList###result####",l);const d=l?z.value.getTickDataFromUrlData(l):[];Ce.value=d,console.log("0412###resetTickList###tickList####",d)},ci=za(),Jn=re(()=>W.value.currentPositionInfo),fa=async l=>{var ne,fe,be,Te,he,pe,De,we,an,Xe;console.log(h.value,"===> poolInfo.value"),In.value=!1,W.value.currentPositionInfo={},Bn(""),rt(n("tips.increaseLiquiditySuccess",{from:Ae.value?"":`${I.value} ${(ne=C.value)==null?void 0:ne.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${b.value} ${(fe=P.value)==null?void 0:fe.symbol}`})),on(!0);const d=$.value?f.value:!f.value;let _,L,B,F,X,Q;const Z=h.value.token_a.decimals,oe=h.value.token_b.decimals;if(v.value==="0"&&y.value==="∞")B=z.value.TickUtil.getMinIndex(Number(h.value.tickSpacing)),F=z.value.TickUtil.getMaxIndex(Number(h.value.tickSpacing));else if(Y.value=="custom"){$.value?(_=Number(v.value),L=Number(y.value)):(_=new U(1).div(y.value).toString(),L=new U(1).div(v.value).toString()),console.log("0519###toAdd###min###",_),console.log("0519###toAdd###max###",L),console.log("0519###toAdd###minPrice.value###",v.value),console.log("0519###toAdd###maxPrice.value###",y.value);try{X=_==0?z.value.TickUtil.getMinIndex(Number(h.value.tickSpacing)):z.value.TickMath.priceToTickIndex(new U(_),Z,oe)}catch{X=z.value.TickUtil.getMinIndex(Number(h.value.tickSpacing))}try{Q=z.value.TickMath.priceToTickIndex(new U(L),Z,oe)}catch{Q=z.value.TickUtil.getMaxIndex(Number(h.value.tickSpacing))}B=z.value.getNearestTickByTick(X,Number(h.value.tickSpacing)),F=z.value.getNearestTickByTick(Q,Number(h.value.tickSpacing))}else B=un.value[Y.value].lower,F=un.value[Y.value].upper;try{const Ne=await z.value.getAddLiquidityTransactionPayload({pool:{poolAddress:h.value.poolAddress,token_a:h.value.token_a,token_b:h.value.token_b},amount:f.value?I.value:b.value,fix_amount_a:d,tick_lower:B,tick_upper:F,index:0,slippage:Number(G.value)/100,roundUp:!0});let je;if(K.value.chainName==="Aptos")je=await i.value.currentWallet.signAndSubmitTransaction(Ne);else{const Be=await i.value.currentWallet.signAndExecuteTransactionBlock(Ne);je=z.value.handleTx(Be)}if(console.log("0410###tx###",je),je&&je.hash){Bn(je.hash),on(!1),Un(!0);const Be=di();let Ie;h.value.needReverse?h.value.token_a.address.toLowerCase()===C.value.address.toLowerCase()&&h.value.token_b.address.toLowerCase()===P.value.address.toLowerCase()?Ie=!1:Ie=!0:h.value.token_a.address.toLowerCase()===C.value.address.toLowerCase()&&h.value.token_b.address.toLowerCase()===P.value.address.toLowerCase()?Ie=!0:Ie=!1,console.log(Ie,"===>directs");const ln={title:"Supplied",desc:n("tips.addLiquiditySuccessText",{from:Ae.value?"":`${I.value} ${(be=C.value)==null?void 0:be.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${b.value} ${(Te=P.value)==null?void 0:Te.symbol}`}),hash:je.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:Ie?(he=C.value)==null?void 0:he.address:(pe=P.value)==null?void 0:pe.address,numa:Ie?I.value:b.value,logoa:Ie?W.value.tokensObj&&C.value&&C.value.address&&W.value.tokensObj[C.value.address]&&W.value.tokensObj[C.value.address].logoURI:W.value.tokensObj&&P.value&&P.value.address&&W.value.tokensObj[P.value.address]&&W.value.tokensObj[P.value.address].logoURI,tokenb:Ie?(we=P.value)==null?void 0:we.address:(De=C.value)==null?void 0:De.address,numb:Ie?b.value:I.value,logob:Ie?W.value.tokensObj&&P.value&&P.value.address&&W.value.tokensObj[P.value.address]&&W.value.tokensObj[P.value.address].logoURI:W.value.tokensObj&&C.value&&C.value.address&&W.value.tokensObj[C.value.address]&&W.value.tokensObj[C.value.address].logoURI},text:`Deopsit ${Ae.value?"":`${I.value} ${(an=C.value)==null?void 0:an.symbol}`} ${!Ae.value&&!Se.value?"and":""} ${Se.value?"":`${b.value} ${(Xe=P.value)==null?void 0:Xe.symbol}`}`};K.value.chainName!=="Aptos"&&(ln.res=je.res),z.value.showTransitionPending(ln);const Ge=await z.value.watchTransaction(ln,!0);if(Ge.status){if(Un(!1),W.value.setCurrentPositionLoading(!0),u.value=!0,console.log(Ge.nftInfo,"===> watchInfo.nftInfo"),K.value.chainName==="Aptos"){if(await W.value.setCurrentPositionInfo(Ge.nftInfo[0].data.id.creator,Ge.nftInfo[0].data.id.collection,Ge.nftInfo[0].data.name,K.value.chainName),l)try{await ci.subscribePosition({pool_address:Jn.value.poolAddress,position_index:Jn.value.index},Jn.value.nftHash)}catch(ze){console.log(ze,"e")}}else{const ze=Ge.nftInfo,$n=await Ui(2e3);if(await W.value.setCurrentPositionInfo(ze==null?void 0:ze.pool,"","",K.value.chainName,ze==null?void 0:ze.position),await Ui(1e3),console.log("0529###nftInfo###",ze),console.log("0529###currentPositionInfo.value.index###",Jn.value.index),l)try{await ci.subscribePosition({pool_address:Jn.value.poolAddress,position_index:Jn.value.index},Jn.value.nftHash)}catch(An){console.log(An)}}setTimeout(()=>{rn.updateCurrentPools(h.value.poolAddress,K.value.chainName),z.value.getAccount(i.value.address)},3e3),setTimeout(async()=>{Po()},3e3)}at()}else on(!1),On(!0);I.value="",b.value=""}catch(Ne){I.value="",b.value="",console.log("0330###Add liquidity Error###",Ne),on(!1),On(!0)}},pa=l=>{switch(l){case"active":return n("newAdd.activeTips");case"passive":return n("newAdd.passiveTips");case"full range":return n("newAdd.fullRangTips");case"suggested":return n("newAdd.suggestedTips");case"custom":return n("newAdd.customTips")}},va=l=>{switch(l){case"suggested":return n("newAdd.suggested");case"active":return n("newAdd.active");case"passive":return n("newAdd.conservative");case"full range":return n("newAdd.fullRange");case"custom":return n("newAdd.custom")}},Xt=l=>{console.log("priceTab====>",l),console.log("priceTab###poolInfo###",h.value),Y.value=l.key.toLowerCase();const d=h.value.token_a.decimals,_=h.value.token_b.decimals,{lower:L,upper:B}=l,F=z.value.TickMath.tickIndexToPrice(L,d,_).toString(),X=z.value.TickMath.tickIndexToPrice(B,d,_).toString();if(l.key=="full range"){lt.value=L,st.value=B,Ye(!0),_n();return}console.log($.value,"===>direct.value"),$.value?(E.value=String(F),v.value=String(F),x.value=String(X),y.value=String(X),lt.value=L,st.value=B,_n()):(E.value=String(1/Number(X)),v.value=String(1/Number(X)),x.value=String(1/Number(F)),y.value=String(1/Number(F)),lt.value=z.value.TickMath.priceToTickIndex(new U(1/Number(X)),d,_),st.value=z.value.TickMath.priceToTickIndex(new U(1/Number(F)),d,_),_n())},ma=re(()=>W.value.tokensObj&&C.value.address&&W.value.tokensObj[C.value.address]&&W.value.tokensObj[C.value.address].logoURI),ha=re(()=>W.value.tokensObj&&P.value.address&&W.value.tokensObj[P.value.address]&&W.value.tokensObj[P.value.address].logoURI),di=()=>{var _,L,B,F,X,Q,Z,oe;let l=null;const d=W.value.poolConfigList;for(let ne=0;ne<d.length;ne++){const fe=d[ne];if(fe.token_a.address.toUpperCase()===((L=(_=C==null?void 0:C.value)==null?void 0:_.address)==null?void 0:L.toUpperCase())&&fe.token_b.address.toUpperCase()===((F=(B=P==null?void 0:P.value)==null?void 0:B.address)==null?void 0:F.toUpperCase())||fe.token_b.address.toUpperCase()===((Q=(X=C==null?void 0:C.value)==null?void 0:X.address)==null?void 0:Q.toUpperCase())&&fe.token_a.address.toUpperCase()===((oe=(Z=P==null?void 0:P.value)==null?void 0:Z.address)==null?void 0:oe.toUpperCase())){l=fe;break}}return l},ga=l=>{var _,L,B,F,X,Q,Z,oe,ne,fe;console.log(l,"item===>3480");const d=di();if(d&&(Re.value=d.needReverse?d==null?void 0:d.token_b:d==null?void 0:d.token_a,Le.value=d.needReverse?d==null?void 0:d.token_a:d==null?void 0:d.token_b,C.value=d.needReverse?d==null?void 0:d.token_b:d==null?void 0:d.token_a,P.value=d.needReverse?d==null?void 0:d.token_a:d==null?void 0:d.token_b,console.log("0524###test###11111###samePoolInfo###",d),$.value=C.value.address===((_=d==null?void 0:d.token_a)==null?void 0:_.address)),qe.value.includes(l.fee))M.value=l.label,Gn.value=l.fee,$e.push(`/deposit?tokena=${d?d.needReverse?(B=d==null?void 0:d.token_b)==null?void 0:B.address:(L=d==null?void 0:d.token_a)==null?void 0:L.address:$.value?C.value.address:P.value.address}&tokenb=${d?d.needReverse?(X=d==null?void 0:d.token_a)==null?void 0:X.address:(F=d==null?void 0:d.token_b)==null?void 0:F.address:$.value?P.value.address:C.value.address}&fee=${l.fee}`);else{if(console.log(We[C.value.address],"filterCreatePoolCoin[fromCoin.value.address]"),console.log(We[P.value.address],"filterCreatePoolCoin[toCoin.value.address]"),console.log(We.value,"filterCreatePoolCoin===>"),K.value.chainName!=="Aptos"&&!We.value[C.value.address]&&!We.value[P.value.address]){console.log(111,"===>111");return}M.value=l.label,h.value&&(v.value="",y.value=""),I.value="",b.value="",Ke.value="",Pn.value="",v.value="",y.value="",zt.value="",Vt.value="",console.log("====>3558"),$e.push(`/deposit?action=create-pool&tokena=${d?d.needReverse?(Z=d==null?void 0:d.token_b)==null?void 0:Z.address:(Q=d==null?void 0:d.token_a)==null?void 0:Q.address:$.value?C.value.address:P.value.address}&tokenb=${d?d.needReverse?(ne=d==null?void 0:d.token_a)==null?void 0:ne.address:(oe=d==null?void 0:d.token_b)==null?void 0:oe.address:$.value?P.value.address:C.value.address}&fee=${l.fee}&from=${(fe=N==null?void 0:N.query)==null?void 0:fe.from}`)}},ya=R(!1),ba=()=>{h.value,In.value=!0},j=R(null),zt=R(""),Vt=R(""),Wt=l=>{var Q,Z,oe,ne,fe,be,Te,he,pe,De,we,an;if(l?(zt.value=l,Ke.value=l,Pn.value=l,Vt.value=new U(1).div(new U(l)).toString(),H.value=!1):(zt.value="",Ke.value="",Pn.value="",Vt.value=""),!((Q=Re.value)!=null&&Q.address)||!((Z=Le.value)!=null&&Z.address))return;let d=!1;const _=W.value.poolConfigList;let L=null;for(let Xe=0;Xe<_.length;Xe++){const Ne=_[Xe];if(Ne.token_a.address.toUpperCase()===((ne=(oe=Re==null?void 0:Re.value)==null?void 0:oe.address)==null?void 0:ne.toUpperCase())&&Ne.token_b.address.toUpperCase()===((be=(fe=Le==null?void 0:Le.value)==null?void 0:fe.address)==null?void 0:be.toUpperCase())){d=Ne.needReverse,L=Ne;break}else if(Ne.token_b.address.toUpperCase()===((he=(Te=Re==null?void 0:Re.value)==null?void 0:Te.address)==null?void 0:he.toUpperCase())&&Ne.token_a.address.toUpperCase()===((De=(pe=Le==null?void 0:Le.value)==null?void 0:pe.address)==null?void 0:De.toUpperCase())){d=Ne.needReverse,L=Ne;break}}let B=!1;z.value.getIsSortedSymbols((we=Re.value)==null?void 0:we.address,(an=Le.value)==null?void 0:an.address)&&(B=!0);let F;B&&!$.value?F=!0:B&&$.value||!B&&$.value?F=!1:F=!0,console.log("0518###c####direct.value####",$.value),console.log("0518###c####createPoolNeedReverse####",B),console.log("0518###c####newDirect####",F);const X=K.value.chainName=="Aptos"?Dp:jp;if(C.value&&P.value&&l){const Xe=L?L==null?void 0:L.token_a.decimals:B?Le.value.decimals:Re.value.decimals,Ne=L?L==null?void 0:L.token_b.decimals:B?Re.value.decimals:Le.value.decimals,je=l&&z.value.TickMath.priceToSqrtPriceX64(F?new U(1/l):new U(l),Xe,Ne);console.log(je,"===>current_sqrt_price");const Be=l&&z.value.TickMath.priceToSqrtPriceX64(new U(1).div(l),C.value.decimals,P.value.decimals),Ie=z.value.TickMath.priceToTickIndex(F?new U(1).div(l):new U(l),Xe,Ne,X[N.query.fee]),ln=Ie-X[N.query.fee]*5,Ge=Ie+X[N.query.fee]*5,ze=z.value.TickMath.tickIndexToPrice(ln,Xe,Ne).toString(),$n=z.value.TickMath.tickIndexToPrice(Ge,Xe,Ne).toString();Zn.value?(v.value="0",y.value="∞"):F?(v.value=String(1/$n),y.value=String(1/ze),E.value=String(1/$n),x.value=String(1/ze)):(v.value=ze,y.value=$n,E.value=ze,x.value=$n),console.log("0518###c####createPoolFromCoin.value####",Re.value),console.log("0518###c####createPoolToCoin.value####",Le.value),console.log("0518###c####createPoolNeedReverse####",B);const An={token_a:L?L.token_a:B?Le.value:Re.value,token_b:L?L.token_b:B?Re.value:Le.value,isCreate:!0,tickSpacing:X[N.query.fee],currentPrice:l,current_sqrt_price:je,tick_lower:ln,tick_upper:Ge,current_tick_index:Ie,currentPriceReverse:St(String(1/l),6),reverse_current_sqrt_price:Be,needReverse:d,fee:N.query.fee};j.value=An,console.log("0518###c####poolInfos####",An),_n()}else j.value=null,v.value="",y.value=""},ka=async()=>{var oe,ne,fe,be;if(K.value.chainName!=="Aptos"){fi();return}In.value=!1;let l,d,_,L,B,F;const X=Re.value.decimals,Q=Le.value.decimals;Bn(""),rt(n("tips.increaseLiquiditySuccess",{from:Ae.value?"":`${I.value} ${(oe=C.value)==null?void 0:oe.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${b.value} ${(ne=P.value)==null?void 0:ne.symbol}`})),on(!0),v.value==="0"&&y.value==="∞"?(_=z.value.TickUtil.getMinIndex(Number(j.value.tickSpacing)),L=z.value.TickUtil.getMaxIndex(Number(j.value.tickSpacing))):($.value?(l=Number(v.value),d=Number(y.value)):(l=1/Number(y.value),d=1/Number(v.value)),B=l==0?-443636:z.value.TickMath.priceToTickIndex(new U(l),X,Q),F=z.value.TickMath.priceToTickIndex(new U(d),X,Q),_=z.value.getNearestTickByTick(B,Number(j.value.tickSpacing)),L=z.value.getNearestTickByTick(F,Number(j.value.tickSpacing)));const Z=$.value?f.value:!f.value;try{const Te=await z.value.getCreatPoolTransactionPayload({coinTypeA:Re.value.address,coinTypeB:Le.value.address,tick_spacing:Number(j.value.tickSpacing),initialize_sqrt_price:new Vn(j.value.current_sqrt_price),uri:"",current_tick_index:j.value.current_tick_index,max_amount_a:$.value?I.value:b.value,max_amount_b:$.value?b.value:I.value,tick_lower:_,tick_upper:L,slippage:Number(G.value)/100,decimalsA:X,decimalsB:Q,fix_amount_a:Z,liquidityInput:Fn.value});let he;if(console.log(JSON.stringify(Te),"===>creatPoolPayload"),K.value.chainName==="Aptos")he=await i.value.currentWallet.signAndSubmitTransaction(Te);else{const pe=await i.value.currentWallet.signAndExecuteTransactionBlock(Te);he=z.value.handleTx(pe)}if(he&&he.hash){Bn(he.hash),on(!1),Un(!0);const pe={title:"Created pool",desc:"Pool created successfully ",hash:he.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(fe=C.value)==null?void 0:fe.address}`,numa:Ae.value?"":`- ${I.value}`,logoa:W.value.tokensObj&&C.value&&C.value.address&&W.value.tokensObj[C.value.address]&&W.value.tokensObj[C.value.address].logoURI,tokenb:`${(be=P.value)==null?void 0:be.address}`,numb:Se.value?"":`- ${b.value}`,logob:W.value.tokensObj&&P.value&&P.value.address&&W.value.tokensObj[P.value.address]&&W.value.tokensObj[P.value.address].logoURI},text:"Pool created successfully"};K.value.chainName!=="Aptos"&&(pe.res=he.res),z.value.showTransitionPending(pe),(await z.value.watchTransaction(pe,!0)).status&&(Un(!1),s.value=!0,setTimeout(()=>{rn.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),z.value.getAccount(i.value.address)},1e3)),at()}else on(!1),On(!0);I.value="",b.value=""}catch(Te){rn.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),In.value=!1,console.log(Te,"error===>"),I.value="",b.value="",on(!1),On(!0)}},fi=async()=>{var Te,he,pe,De,we,an,Xe,Ne,je,Be,Ie,ln,Ge,ze,$n,An,vi,mi,hi,gi,yi,bi,ki,wi,Ci,Ii,Pi,_i,$i,Ai,Si,Ti,Ni,Mi,Ri,Li;In.value=!1,console.log("创建sui池子");let l=!1;z.value.getIsSortedSymbols(Re.value.address,Le.value.address)&&(l=!0),Bn("");const d=Ae.value?"":`${I.value} ${(Te=C.value)==null?void 0:Te.symbol}`,_=Se.value?"":`${b.value} ${(he=P.value)==null?void 0:he.symbol}`;console.log("0424###createPoolFromCoin###",Re.value),console.log("0424###createPoolToCoin###",Le.value),console.log("0424###needReverse###",l),console.log("0424###createPoolInfo?.value?.needReverse###",(pe=j==null?void 0:j.value)==null?void 0:pe.needReverse),rt(n("tips.increaseLiquiditySuccess",{from:!l&&!((De=j==null?void 0:j.value)!=null&&De.needReverse)||l&&((we=j==null?void 0:j.value)!=null&&we.needReverse)?d:_,and:!Ae.value&&!Se.value?"and":"",to:!l&&!((an=j==null?void 0:j.value)!=null&&an.needReverse)||l&&((Xe=j==null?void 0:j.value)!=null&&Xe.needReverse)?_:d})),on(!0);let L="",B="",F="",X="",Q="",Z="",oe=0,ne=0,fe=!1,be;if(l||(Ne=j==null?void 0:j.value)!=null&&Ne.needReverse){const zn=l&&!((je=j==null?void 0:j.value)!=null&&je.needReverse);L=zn?(Ge=(ln=j==null?void 0:j.value)==null?void 0:ln.token_b)==null?void 0:Ge.address:(Ie=(Be=j==null?void 0:j.value)==null?void 0:Be.token_a)==null?void 0:Ie.address,B=zn?(vi=(An=j==null?void 0:j.value)==null?void 0:An.token_a)==null?void 0:vi.address:($n=(ze=j==null?void 0:j.value)==null?void 0:ze.token_b)==null?void 0:$n.address,F=zn?(yi=(gi=j==null?void 0:j.value)==null?void 0:gi.token_b)==null?void 0:yi.decimals:(hi=(mi=j==null?void 0:j.value)==null?void 0:mi.token_a)==null?void 0:hi.decimals,X=zn?(Ci=(wi=j==null?void 0:j.value)==null?void 0:wi.token_a)==null?void 0:Ci.decimals:(ki=(bi=j==null?void 0:j.value)==null?void 0:bi.token_b)==null?void 0:ki.decimals,(Ii=j==null?void 0:j.value)!=null&&Ii.needReverse?(Q=$.value?I.value:b.value,Z=$.value?b.value:I.value,oe=$.value?Number(v.value):1/Number(y.value),ne=$.value?Number(y.value):1/Number(v.value),fe=$.value?f.value:!f.value,be=$.value?Ke.value:1/Number(Ke.value)):(Q=$.value?b.value:I.value,Z=$.value?I.value:b.value,oe=$.value?1/Number(y.value):Number(v.value),ne=$.value?1/Number(v.value):Number(y.value),fe=$.value?!f.value:f.value,be=$.value?1/Number(Ke.value):Ke.value)}else L=(_i=(Pi=j==null?void 0:j.value)==null?void 0:Pi.token_a)==null?void 0:_i.address,B=(Ai=($i=j==null?void 0:j.value)==null?void 0:$i.token_b)==null?void 0:Ai.address,F=(Ti=(Si=j==null?void 0:j.value)==null?void 0:Si.token_a)==null?void 0:Ti.decimals,X=(Mi=(Ni=j==null?void 0:j.value)==null?void 0:Ni.token_b)==null?void 0:Mi.decimals,Q=$.value?I.value:b.value,Z=$.value?b.value:I.value,oe=$.value?Number(v.value):1/Number(y.value),ne=$.value?Number(y.value):1/Number(v.value),fe=$.value?f.value:!f.value,be=$.value?Ke.value:1/Number(Ke.value);try{console.log("0501###toCreatePool###params###",{coinTypeA:L,coinTypeB:B,decimalsA:F,decimalsB:X,amountA:Q,amountB:Z,minPrice:oe,maxPrice:ne,fix_amount_a:fe,tick_spacing:Number(j.value.tickSpacing),slippage:Number(G.value)/100,price:be});const zn=await z.value.getCreatPoolTransactionPayload({coinTypeA:L,coinTypeB:B,decimalsA:F,decimalsB:X,amountA:Q,amountB:Z,minPrice:v.value=="0"&&y.value=="∞"?"0":oe,maxPrice:v.value=="0"&&y.value=="∞"?"∞":ne,fix_amount_a:fe,tick_spacing:Number(j.value.tickSpacing),slippage:Number(G.value)/100,price:be}),Pa=await i.value.currentWallet.signAndExecuteTransactionBlock(zn),wt=z.value.handleTx(Pa);if(wt&&wt.hash){Bn(wt.hash),on(!1),Un(!0);const Ao={title:"Created pool",desc:"Pool created successfully ",hash:wt.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(Ri=C.value)==null?void 0:Ri.address}`,numa:Ae.value?"":`- ${I.value}`,logoa:W.value.tokensObj&&C.value&&C.value.address&&W.value.tokensObj[C.value.address]&&W.value.tokensObj[C.value.address].logoURI,tokenb:`${(Li=P.value)==null?void 0:Li.address}`,numb:Se.value?"":`- ${b.value}`,logob:W.value.tokensObj&&P.value&&P.value.address&&W.value.tokensObj[P.value.address]&&W.value.tokensObj[P.value.address].logoURI},text:"Pool created successfully"};K.value.chainName!=="Aptos"&&(Ao.res=wt.res),z.value.showTransitionPending(Ao),(await z.value.watchTransaction(Ao,!0)).status&&(Un(!1),s.value=!0,setTimeout(()=>{rn.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),z.value.getAccount(i.value.address)},1e3)),at()}else on(!1),On(!0);I.value="",b.value=""}catch(zn){console.log("0407###createPool###error##",zn),In.value=!1,rn.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),I.value="",b.value="",on(!1),On(!0)}},wa=re(()=>{var l,d,_,L,B,F;return((l=C.value)==null?void 0:l.isSelfBuilt)||((d=P.value)==null?void 0:d.isSelfBuilt)||((L=W.value.tokensObj[(_=C.value)==null?void 0:_.address])==null?void 0:L.isSelfBuilt)||((F=W.value.tokensObj[(B=P.value)==null?void 0:B.address])==null?void 0:F.isSelfBuilt)}),Ca=l=>{var d;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((d=W.value.tokensObj[l==null?void 0:l.address])==null?void 0:d.logo_url)||(K.value.theme==="default"?Qe("/image/coins/unknown.png"):Qe("/image/coins/sui-unknown.png"))},_o=(l,d)=>{console.log(p.value,"===>currentCoinKey.value"),console.log(l);const _=localStorage.getItem(l.address);console.log(W.value.tokensObj,"===>pools.value.tokensObj"),console.log(_,"===>coinLocak"),W.value.tokensObj&&W.value.tokensObj[l.address]&&W.value.tokensObj[l.address].isSelfBuilt&&!_&&(d=="fromCoin"&&(gt.value=l),d=="toCoin"&&(yt.value=l),pi.value=!0)};_e(()=>[C.value,P.value],([l,d])=>{l&&!Rn(l)&&_o(l,"fromCoin"),d&&!Rn(d)&&_o(d,"toCoin")},{immediate:!0});const pi=R(!1),Ia=()=>{Kt.value!=="Aptos"?$e.push("/pool/list"):$e.push("/pools")},Kt=re(()=>K.value.chainName);_e(()=>[K.value.chainName,K.value.filterCoinsObj],([l,d])=>{l&&d&&rn.setPoolConfigList(l,d)},{immediate:!0}),_e(()=>[qe.value,We.value,C.value,P.value,Xn.value],([l,d,_,L,B])=>{console.log(l.value,"==>isCreatePool.value"),console.log(d.value,"===>filterCreatePoolCoin.value"),console.log(_,"===>fromCoin"),console.log(L,"===>toCoin"),B&&l&&d&&!l.includes(1e-4)&&!l.includes(5e-4)&&!l.includes(.0025)&&!l.includes(.01)&&!d[_==null?void 0:_.address]&&!d[L==null?void 0:L.address]&&(M.value="")},{immediate:!0});const Zn=R(!0),$o=()=>{Ye(!Zn.value),Zn.value=!Zn.value,Wt(j.value.currentPrice)};return{isFullRange:Zn,clickFullRange:$o,warningToCoin:yt,warningFromCoin:gt,getTokenSource:_o,closeTokenWarning:Ia,isShowTokenWarning:pi,chainName:Kt,hasCreatePool:Xn,isCreateSuccess:s,intPriceReverse:Vt,isShowMask:dn,isPc:e,intPrice:zt,createPoolToCoin:Le,createPoolFromCoin:Re,getPoolInfoSuccess:kt,toCreatePool:ka,createPoolInfo:j,changecurrentPrice:Wt,isShowCreatePoolModal:ya,addOrCreate:ba,halfBtnSelect:jt,selectFee:ga,isViewDetail:u,addCommom:Ve,decimalUi:Oe,fromCoinUrl:ma,toCoinUrl:ha,t:n,wallet:i,toAdd:fa,chartLoading:H,currentTick:ae,tickList:Ce,poolInfo:h,storeIndex:K,importIcon:Qe,addLiquidityBtnText:V,slippage:G,countdown:a,loading:c,fromCoin:C,toCoin:P,openCoinSelect:Ft,onCoinSelect:Et,existingCoins:g,lastSelectCoin:k,currentCoinKey:p,showCoinSelect:q,fromCoinAmount:I,toCoinAmount:b,maxBtnSelect:Dt,fixedFromCoin:f,isShowLiquidityModal:In,direct:$,toggle:Bt,edit:ie,inputValue:M,feeTierList:Je,minPrice:v,maxPrice:y,invalidPriceRange:Hn,defaultMinPrice:E,defaultMaxPrice:x,priceRangeChangeMin:Ut,priceRangeChangeMax:Ot,toFullRange:Ye,clearAll:Ht,clickClear:S,positionError:te,positionTips:ve,router:$e,clickRefresh:sn,fromCoinBlance:xe,toCoinBlance:en,showToCoinLock:Se,showFromCoinLock:Ae,currentPriceReverse:Pn,currentPrice:Ke,getPirceText:pa,currentPriceTab:Y,currentPriceTabList:mn,getPirceKey:va,priceTab:Xt,aprRewardsParameter:le,aprRewardsDateList:ue,aprTab:Fe,reviseValue:fn,label:me,aprTitle:se,isCreatePool:qe,before7dContractPriceLowest:Ze,before7dContractPriceHighest:Ee,aprRewardsTime:de,addLiquidityBtnDisabled:gn,checkNullObj:Rn,sFixD:Ct,toCreateSuiPool:fi,isSelfBuilt:wa,getCoinIcon:Ca,isCreatePoolToCoin:Kn,isCreatePoolFromCoin:Yn,filterCreatePoolCoin:We,poolTvl:Cn}}}),yr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",br="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",ca=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,da=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const wn=e=>(ot("data-v-19286104"),e=e(),it(),e),Xp={class:"pools-container"},zp={key:0,class:"content pc-content"},Vp={class:"content-left"},Wp={class:"content-left-bg"},Kp={class:"content-left-title"},Yp={key:0,class:"pool-warning"},Gp={class:"coin-select"},Qp={key:0,class:"icon","aria-hidden":"true"},Jp=wn(()=>m("use",{"xlink:href":"#icon-edit"},null,-1)),Zp=[Jp],xp={key:0,class:"fee-container"},ev=["onClick"],nv={key:0,class:"icon fee-disabled","aria-hidden":"true"},tv=wn(()=>m("use",{"xlink:href":"#icon-icon-disable"},null,-1)),ov=[tv],iv={key:1},rv={key:2},av={key:0},lv={key:1,class:"text-active"},sv={class:"deposit-title"},uv={class:"card-container"},cv={class:"card-item"},dv={class:"card-item"},fv={key:0,class:"icon","aria-hidden":"true"},pv=wn(()=>m("use",{"xlink:href":"#icon-icon-add"},null,-1)),vv=[pv],mv={class:"pc-network"},hv={class:"content-right"},gv={key:0,class:"initPrice-mask"},yv={class:"content-right-title"},bv=wn(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),kv={class:"content-right-bg"},wv={key:1,class:"price-tab"},Cv=["onClick"],Iv={key:2,class:"create-pool-tips"},Pv={key:3,class:"set-price-range"},_v={class:"radio"},$v={key:0,src:Nr},Av=wn(()=>m("span",null,"Full Range",-1)),Sv={key:0},Tv={key:1,class:"coin"},Nv={key:2,class:"coin"},Mv={key:3,class:"no-price"},Rv={alt:""},Lv={alt:""},qv={key:6,class:"position-tips"},Uv={alt:""},Ov={class:"tips"},Bv={key:7,class:"position-tips"},Fv={alt:""},Ev={class:"error"},Dv={key:8,class:"d3-chart-box"},jv={key:9,class:"day-7-price-range"},Hv=wn(()=>m("i",null,null,-1)),Xv={class:"gray"},zv={key:11,class:"create-pool-tips"},Vv={key:12,class:"create-pool-warning"},Wv={key:1,class:"no-data"},Kv={key:0,src:ca,alt:""},Yv={key:1,src:da,alt:""},Gv={key:1,class:"content h5-content"},Qv={class:"content-left"},Jv={class:"content-left-bg"},Zv={class:"content-left-title"},xv={key:0,class:"pool-warning"},em={class:"coin-select"},nm={key:0,class:"icon","aria-hidden":"true"},tm=wn(()=>m("use",{"xlink:href":"#icon-edit"},null,-1)),om=[tm],im={key:0,class:"fee-container"},rm=["onClick"],am={key:0},lm={key:1},sm={key:0},um={key:1,class:"text-active"},cm={class:"content-right"},dm={key:0,class:"initPrice-mask"},fm={class:"content-right-title"},pm=wn(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon-information"})],-1)),vm={class:"content-right-bg"},mm={key:1,class:"price-tab"},hm=["onClick"],gm={key:2,class:"create-pool-tips"},ym={key:3,class:"set-price-range"},bm={class:"radio"},km={key:0,src:Nr},wm=wn(()=>m("span",null,"Full Range",-1)),Cm={key:0},Im={key:1,class:"coin"},Pm={key:2,class:"coin"},_m={key:3,class:"no-price"},$m={alt:""},Am={alt:""},Sm={key:6,class:"position-tips"},Tm=["src"],Nm={class:"tips"},Mm={key:7,class:"position-tips"},Rm=["src"],Lm={class:"error"},qm={key:8,class:"d3-chart-box"},Um={key:9,class:"day-7-price-range"},Om=wn(()=>m("i",null,null,-1)),Bm={class:"gray"},Fm={key:11,class:"create-pool-tips"},Em={key:1,class:"no-data"},Dm={key:0,src:ca,alt:""},jm={key:1,src:da,alt:""},Hm={key:0,class:"icon","aria-hidden":"true"},Xm=wn(()=>m("use",{"xlink:href":"#icon-icon-add"},null,-1)),zm=[Xm],Vm={class:"pc-network"},Wm={class:"new-right"},Km={class:"deposit-title"},Ym={class:"card-container"},Gm={class:"card-item"},Qm={class:"card-item"},Jm={key:0,class:"icon","aria-hidden":"true"},Zm=wn(()=>m("use",{"xlink:href":"#icon-icon-add"},null,-1)),xm=[Zm],eh={class:"h5-network"};function nh(e,n,t,o,i,r){var ae,H,J,Ce,Y,le,de,se,ue,me,ee,K,dn,z,We,Fe,fn,mn,sn,Hn,Ye,qe,hn,Cn,Je,G,Me,gn,V,D,Ze,Ee,$e,C,P,Ut,Ot,Bt,Kn,Yn,Ft,Re,Le,gt,yt,Et,Dt,jt,Ht,In,Un,On,on,rt,Bn,at,N,rn,Xn,W,Fn,Ae,Se,lt,st,Ke,Pn,_n,Gn,ut;const a=_a,s=Za,u=qa,c=sl,p=Ua,g=ml,k=wl,q=Oa,$=xo,ce=Ta,f=$l,S=Wl,I=hf,b=Ir,v=Fa,y=np,E=Ha,x=Sp,ie=Ep,ve=Aa,te=Ba,M=go("image");return w(),T("div",Xp,[ye(a,{url:e.storeIndex.theme=="default"?"/pools":"/pool/list"},null,8,["url"]),ye(s,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(w(),T("div",zp,[m("div",Vp,[m("div",Wp,[m("div",Kp,[He(A(e.$t("common.selectPool"))+" ",1),ye(u,{placement:"bottom","arrow-point-at-center":""},{title:Ue(()=>[m("span",null,A(e.t("newAdd.poolWarning")),1)]),default:Ue(()=>[e.isSelfBuilt?(w(),T("div",Yp)):O("",!0)]),_:1})]),m("div",Gp,[ye(c,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[0]||(n[0]=h=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ye(c,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:n[1]||(n[1]=h=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),m("div",{class:Pe(["pool-fee",e.edit?"pool-fee-edit":""])},[m("div",{class:"pool-fee-header",onClick:n[2]||(n[2]=h=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[m("span",{class:Pe(e.inputValue?"":"fee-span")},A(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(w(),T("svg",Qp,Zp)):O("",!0)]),e.edit?(w(),T("div",xp,[(w(!0),T(Wn,null,Pt(e.feeTierList,(h,Qn)=>{var un,bt,kt,xe,en;return w(),T("div",{key:Qn,class:Pe(["fee-item",[e.inputValue&&e.inputValue==h.label?"fee-item-active":"",e.isCreatePool.includes(h.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(h.fee)&&!e.filterCreatePoolCoin[(un=e.fromCoin)==null?void 0:un.address]&&!e.filterCreatePoolCoin[(bt=e.toCoin)==null?void 0:bt.address]?"disabled":""]]),onClick:To(Po=>e.selectFee(h),["stop"])},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(h.fee)&&!e.filterCreatePoolCoin[(kt=e.fromCoin)==null?void 0:kt.address]&&!e.filterCreatePoolCoin[(xe=e.toCoin)==null?void 0:xe.address]?(w(),T("svg",nv,ov)):O("",!0),e.$route.query.action=="create-pool"?(w(),T("div",iv,[m("p",null,A(h.title),1),m("p",{class:Pe(e.isCreatePool&&e.isCreatePool.includes(h.fee)?"text-default":"text-theme")},A(e.isCreatePool&&e.isCreatePool.includes(h.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(w(),T("div",rv,[m("p",{class:Pe(e.isCreatePool&&e.isCreatePool.includes(h.fee)?"text-active":"text-default")},A(h.title),3),e.isCreatePool&&!e.isCreatePool.includes(h.fee)?(w(),T("p",av,A(e.$t("newAdd.notCreated")),1)):O("",!0),e.isCreatePool&&e.isCreatePool.includes(h.fee)?(w(),T("p",lv,A(e.poolTvl&&e.poolTvl[h.fee]&&((en=e.poolTvl[h.fee])==null?void 0:en.rateText)),1)):O("",!0)])),m("span",null,A(h.text),1)],10,ev)}),128))])):O("",!0)],2),m("div",sv,A(e.$t("newAdd.depositAmounts")),1),m("div",uv,[m("div",cv,[ye(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=h=>e.fromCoinAmount=h),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[4]||(n[4]=h=>e.maxBtnSelect("fromCoin")),onOnHalf:n[5]||(n[5]=h=>e.halfBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=h=>{e.fromCoinAmount=h,e.fixedFromCoin=!0}),onOnSelect:n[7]||(n[7]=h=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(w(),ke(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):O("",!0)]),m("div",dv,[ye(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=h=>e.toCoinAmount=h),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[9]||(n[9]=h=>e.maxBtnSelect("toCoin")),onOnHalf:n[10]||(n[10]=h=>e.halfBtnSelect("toCoin")),onOnInput:n[11]||(n[11]=h=>{e.toCoinAmount=h,e.fixedFromCoin=!1}),onOnSelect:n[12]||(n[12]=h=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(w(),ke(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):O("",!0)]),((H=(ae=e.$route)==null?void 0:ae.query)==null?void 0:H.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock||!e.filterCreatePoolCoin[(J=e.fromCoin)==null?void 0:J.address]&&!e.filterCreatePoolCoin[(Ce=e.toCoin)==null?void 0:Ce.address])?(w(),ke(k,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(w(),T("img",{key:1,class:"add",src:yr,alt:"",onClick:n[13]||(n[13]=(...h)=>e.toggle&&e.toggle(...h))})):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(w(),T("img",{key:2,class:"add",src:br,alt:"",onClick:n[14]||(n[14]=(...h)=>e.toggle&&e.toggle(...h))})):O("",!0)]),e.poolInfo?(w(),ke(q,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):O("",!0)]),ye($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[15]||(n[15]=h=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ue(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(w(),T("svg",fv,vv)):O("",!0),m("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",mv,[ye(ce)])]),m("div",hv,[e.isShowMask?(w(),T("div",gv)):O("",!0),m("div",yv,[He(A((Y=e.$route)!=null&&Y.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(w(),ke(u,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ue(()=>[m("span",null,A(e.$t("newAdd.selectRangeTips")),1)]),default:Ue(()=>[bv]),_:1})):O("",!0)]),m("div",kv,[!((de=(le=e.$route)==null?void 0:le.query)!=null&&de.action)&&e.poolInfo||(ue=(se=e.$route)==null?void 0:se.query)!=null&&ue.action?(w(),T(Wn,{key:0},[(ee=(me=e.$route)==null?void 0:me.query)!=null&&ee.action&&!e.poolInfo?(w(),ke(f,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):O("",!0),e.poolInfo?(w(),T("div",wv,[(w(!0),T(Wn,null,Pt(e.currentPriceTabList,h=>(w(),T("div",{key:h,class:Pe(["price-item",{"price-item-active":h.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Qn=>e.priceTab(h)},[ye(u,{placement:"bottom","arrow-point-at-center":""},{title:Ue(()=>[m("span",null,A(e.getPirceText(h.key)),1)]),default:Ue(()=>[He(" "+A(e.getPirceKey(h.key)),1)]),_:2},1024)],10,Cv))),128))])):O("",!0),(dn=(K=e.$route)==null?void 0:K.query)!=null&&dn.action&&!e.poolInfo?(w(),T("div",Iv,A(e.$t("newAdd.createPoolInitialText")),1)):O("",!0),!e.poolInfo&&((We=(z=e.$route)==null?void 0:z.query)!=null&&We.action)?(w(),T("div",Pv,[m("div",null,A(e.$t("common.setPriceRange")),1),m("div",null,[m("div",{class:Pe(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[16]||(n[16]=To(h=>e.clickFullRange(),["stop"]))},[m("div",_v,[e.isFullRange&&e.chainName=="Sui"?(w(),T("img",$v)):O("",!0)]),Av],2)])])):O("",!0),e.poolInfo||(fn=(Fe=e.$route)==null?void 0:Fe.query)!=null&&fn.action?(w(),T("div",{key:4,class:Pe(["current-price",(sn=(mn=e.$route)==null?void 0:mn.query)!=null&&sn.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(w(),T("span",Sv,A(e.$t("common.currentPrice")),1)):O("",!0),e.fromCoin&&e.toCoin&&e.direct?(w(),T("div",Tv,[m("span",null,A(e.$t("common.currentPrice")),1),He(" "+A(e.currentPrice===""?"--":("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(e.currentPrice,6)))+" "+A((Hn=e.toCoin)==null?void 0:Hn.symbol)+" per "+A((Ye=e.fromCoin)==null?void 0:Ye.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(w(),T("div",Nv,[m("span",null,A(e.$t("common.currentPrice")),1),He(" "+A(e.currentPriceReverse===""?"--":("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(e.currentPriceReverse,6)))+" "+A((qe=e.toCoin)==null?void 0:qe.symbol)+" per "+A((hn=e.fromCoin)==null?void 0:hn.symbol),1)])):(w(),T("div",Mv,"0.0")),e.fromCoin&&e.toCoin?(w(),T("div",{key:4,class:Pe(e.poolInfo&&((Cn=e.poolInfo)!=null&&Cn.needReverse)||e.createPoolInfo&&((Je=e.createPoolInfo)!=null&&Je.needReverse)?"toggle reverse":"toggle")},[m("div",{class:Pe(e.direct?"item active-item":"item"),onClick:n[17]||(n[17]=h=>e.direct?"":e.toggle())},[pn(m("img",Rv,null,512),[[M,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),He(" "+A(e.direct?(G=e.fromCoin)==null?void 0:G.symbol:(Me=e.toCoin)==null?void 0:Me.symbol),1)],2),m("div",{class:Pe(e.direct?"item ":"item active-item"),onClick:n[18]||(n[18]=h=>e.direct?e.toggle():"")},[pn(m("img",Lv,null,512),[[M,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),He(" "+A(e.direct?(gn=e.toCoin)==null?void 0:gn.symbol:(V=e.fromCoin)==null?void 0:V.symbol),1)],2)],2)):O("",!0)],2)):O("",!0),e.poolInfo||(Ze=(D=e.$route)==null?void 0:D.query)!=null&&Ze.action?(w(),ke(S,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):O("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(w(),T("div",qv,[pn(m("img",Uv,null,512),[[M,("importIcon"in e?e.importIcon:ge(Qe))("/image/icon-tips@2x.png")]]),m("p",Ov,A(e.$t("tips.positionTips")),1)])):O("",!0),e.positionError&&(e.poolInfo||($e=(Ee=e.$route)==null?void 0:Ee.query)!=null&&$e.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(w(),T("div",Bv,[pn(m("img",Fv,null,512),[[M,("importIcon"in e?e.importIcon:ge(Qe))("/image/icon-tips-error@2x.png")]]),m("p",Ev,A(e.$t("tips.positionError")),1)])):O("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),T("div",Dv,[e.fromCoin&&e.toCoin&&e.poolInfo?(w(),ke(I,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):O("",!0),e.chartLoading?(w(),ke(b,{key:1})):O("",!0)])):O("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(w(),T("div",jv,[Hv,m("span",Xv,A(e.aprRewardsTime)+" Price Range",1),m("span",null,A(("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(e.before7dContractPriceLowest,6)))+" - "+A(("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(e.before7dContractPriceHighest,6))),1)])):O("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(w(),ke(v,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):O("",!0),(P=(C=e.$route)==null?void 0:C.query)!=null&&P.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(w(),T("div",zv,A(e.$t("newAdd.createPoolText")),1)):O("",!0),((Ot=(Ut=e.$route)==null?void 0:Ut.query)==null?void 0:Ot.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(w(),T("div",Vv," To create a new pool, the initial price you set must be within your price range. ")):O("",!0)],64)):(w(),T("div",Wv,[e.storeIndex.theme=="default"?(w(),T("img",Kv)):(w(),T("img",Yv)),m("p",null,A(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(w(),ke(y,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):O("",!0)])])):O("",!0),e.isPc?O("",!0):(w(),T("div",Gv,[m("div",Qv,[m("div",Jv,[m("div",Zv,[He(A(e.$t("common.selectPool"))+" ",1),ye(u,{placement:"bottom","arrow-point-at-center":""},{title:Ue(()=>[m("span",null,A(e.t("newAdd.poolWarning")),1)]),default:Ue(()=>[e.poolInfo&&e.isSelfBuilt?(w(),T("div",xv)):O("",!0)]),_:1})]),m("div",em,[ye(c,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[19]||(n[19]=h=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ye(c,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:n[20]||(n[20]=h=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),m("div",{class:Pe(["pool-fee",e.edit?"pool-fee-edit":""])},[m("div",{class:"pool-fee-header",onClick:n[21]||(n[21]=h=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[m("span",{class:Pe(e.inputValue?"":"fee-span")},A(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(w(),T("svg",nm,om)):O("",!0)]),e.edit?(w(),T("div",im,[e.getPoolInfoSuccess?(w(!0),T(Wn,{key:1},Pt(e.feeTierList,(h,Qn)=>{var un;return w(),T("div",{key:Qn,class:Pe(["fee-item",[e.inputValue&&e.inputValue==h.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(h.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:bt=>e.selectFee(h)},[e.$route.query.action=="create-pool"?(w(),T("div",am,[m("p",null,A(h.title),1),m("p",{class:Pe(e.isCreatePool.includes(h.fee)?"text-default":"text-theme")},A(e.isCreatePool.includes(h.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(w(),T("div",lm,[m("p",{class:Pe(e.isCreatePool.includes(h.fee)?"text-active":"text-default")},A(h.title),3),e.isCreatePool&&!e.isCreatePool.includes(h.fee)?(w(),T("p",sm,A(e.$t("newAdd.notCreated")),1)):O("",!0),e.isCreatePool&&e.isCreatePool.includes(h.fee)?(w(),T("p",um,A(e.poolTvl&&e.poolTvl[h.fee]&&((un=e.poolTvl[h.fee])==null?void 0:un.rateText)),1)):O("",!0)])),m("span",null,A(h.text),1)],10,rm)}),128)):(w(),ke(b,{key:0}))])):O("",!0)],2)]),m("div",cm,[e.isShowMask?(w(),T("div",dm)):O("",!0),m("div",fm,[He(A((Bt=e.$route)!=null&&Bt.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(w(),ke(u,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ue(()=>[m("span",null,A(e.$t("newAdd.selectRangeTips")),1)]),default:Ue(()=>[pm]),_:1})):O("",!0)]),m("div",vm,[!((Yn=(Kn=e.$route)==null?void 0:Kn.query)!=null&&Yn.action)&&e.poolInfo||(Re=(Ft=e.$route)==null?void 0:Ft.query)!=null&&Re.action?(w(),T(Wn,{key:0},[(gt=(Le=e.$route)==null?void 0:Le.query)!=null&&gt.action&&!e.poolInfo?(w(),ke(f,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):O("",!0),e.poolInfo?(w(),T("div",mm,[(w(!0),T(Wn,null,Pt(e.currentPriceTabList,h=>(w(),T("div",{key:h,class:Pe(["price-item",{"price-item-active":h.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Qn=>e.priceTab(h)},[ye(u,{placement:"bottom","arrow-point-at-center":""},{title:Ue(()=>[m("span",null,A(e.getPirceText(h.key)),1)]),default:Ue(()=>[He(" "+A(e.getPirceKey(h.key)),1)]),_:2},1024)],10,hm))),128))])):O("",!0),(Et=(yt=e.$route)==null?void 0:yt.query)!=null&&Et.action&&!e.poolInfo?(w(),T("div",gm,A(e.$t("newAdd.createPoolInitialText")),1)):O("",!0),!e.poolInfo&&((jt=(Dt=e.$route)==null?void 0:Dt.query)!=null&&jt.action)?(w(),T("div",ym,[m("div",null,A(e.$t("common.setPriceRange")),1),m("div",null,[m("div",{class:Pe(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[22]||(n[22]=To(h=>e.clickFullRange(),["stop"]))},[m("div",bm,[e.isFullRange&&e.chainName=="Sui"?(w(),T("img",km)):O("",!0)]),wm],2)])])):O("",!0),e.poolInfo||(In=(Ht=e.$route)==null?void 0:Ht.query)!=null&&In.action?(w(),T("div",{key:4,class:Pe(["current-price",(On=(Un=e.$route)==null?void 0:Un.query)!=null&&On.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(w(),T("span",Cm,A(e.$t("common.currentPrice")),1)):O("",!0),e.fromCoin&&e.toCoin&&e.direct?(w(),T("div",Im,[m("span",null,A(e.$t("common.currentPrice")),1),He(" "+A(("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(e.currentPrice,6)))+" "+A((on=e.toCoin)==null?void 0:on.symbol)+" per "+A((rt=e.fromCoin)==null?void 0:rt.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(w(),T("div",Pm,[m("span",null,A(e.$t("common.currentPrice")),1),He(" "+A(("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(e.currentPriceReverse,6)))+" "+A((Bn=e.toCoin)==null?void 0:Bn.symbol)+" per "+A((at=e.fromCoin)==null?void 0:at.symbol),1)])):(w(),T("div",_m,"0.0")),e.fromCoin&&e.toCoin?(w(),T("div",{key:4,class:Pe(e.poolInfo&&((N=e.poolInfo)!=null&&N.needReverse)||e.createPoolInfo&&((rn=e.createPoolInfo)!=null&&rn.needReverse)?"toggle reverse":"toggle")},[m("div",{class:Pe(e.direct?"item active-item":"item"),onClick:n[23]||(n[23]=h=>e.direct?"":e.toggle())},[pn(m("img",$m,null,512),[[M,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),He(" "+A(e.direct?(Xn=e.fromCoin)==null?void 0:Xn.symbol:(W=e.toCoin)==null?void 0:W.symbol),1)],2),m("div",{class:Pe(e.direct?"item ":"item active-item"),onClick:n[24]||(n[24]=h=>e.direct?e.toggle():"")},[pn(m("img",Am,null,512),[[M,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),He(" "+A(e.direct?(Fn=e.toCoin)==null?void 0:Fn.symbol:(Ae=e.fromCoin)==null?void 0:Ae.symbol),1)],2)],2)):O("",!0)],2)):O("",!0),e.poolInfo||(lt=(Se=e.$route)==null?void 0:Se.query)!=null&&lt.action?(w(),ke(S,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):O("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(w(),T("div",Sm,[m("img",{src:("importIcon"in e?e.importIcon:ge(Qe))("/image/icon-tips@2x.png"),alt:""},null,8,Tm),m("p",Nm,A(e.$t("tips.positionTips")),1)])):O("",!0),e.positionError&&(e.poolInfo||(Ke=(st=e.$route)==null?void 0:st.query)!=null&&Ke.action)?(w(),T("div",Mm,[m("img",{src:("importIcon"in e?e.importIcon:ge(Qe))("/image/icon-tips-error@2x.png"),alt:""},null,8,Rm),m("p",Lm,A(e.$t("tips.positionError")),1)])):O("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(w(),T("div",qm,[e.fromCoin&&e.toCoin&&e.poolInfo?(w(),ke(I,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):O("",!0),e.chartLoading?(w(),ke(b,{key:1})):O("",!0)])):O("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(w(),T("div",Um,[Om,m("span",Bm,A(e.aprRewardsTime)+" Price Range",1),m("span",null,A(("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(e.before7dContractPriceLowest,6)))+" - "+A(("addCommom"in e?e.addCommom:ge(Ve))(("decimalUi"in e?e.decimalUi:ge(Oe))(e.before7dContractPriceHighest,6))),1)])):O("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(w(),ke(v,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):O("",!0),(_n=(Pn=e.$route)==null?void 0:Pn.query)!=null&&_n.action&&!e.poolInfo?(w(),T("div",Fm,A(e.$t("newAdd.createPoolText")),1)):O("",!0)],64)):(w(),T("div",Em,[e.storeIndex.theme=="default"?(w(),T("img",Dm)):(w(),T("img",jm)),m("p",null,A(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(w(),ke(y,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):O("",!0)]),ye($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[25]||(n[25]=h=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ue(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(w(),T("svg",Hm,zm)):O("",!0),m("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",Vm,[ye(ce)])]),m("div",Wm,[m("div",Km,A(e.$t("newAdd.depositAmounts")),1),m("div",Ym,[m("div",Gm,[ye(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[26]||(n[26]=h=>e.fromCoinAmount=h),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[27]||(n[27]=h=>e.maxBtnSelect("fromCoin")),onOnHalf:n[28]||(n[28]=h=>e.halfBtnSelect("fromCoin")),onOnInput:n[29]||(n[29]=h=>{e.fromCoinAmount=h,e.fixedFromCoin=!0}),onOnSelect:n[30]||(n[30]=h=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(w(),ke(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):O("",!0)]),m("div",Qm,[ye(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[31]||(n[31]=h=>e.toCoinAmount=h),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[32]||(n[32]=h=>e.maxBtnSelect("toCoin")),onOnHalf:n[33]||(n[33]=h=>e.halfBtnSelect("toCoin")),onOnInput:n[34]||(n[34]=h=>{e.toCoinAmount=h,e.fixedFromCoin=!1}),onOnSelect:n[35]||(n[35]=h=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(w(),ke(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):O("",!0)]),(ut=(Gn=e.$route)==null?void 0:Gn.query)!=null&&ut.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(w(),ke(k,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(w(),T("img",{key:1,class:"add",src:yr,alt:"",onClick:n[36]||(n[36]=(...h)=>e.toggle&&e.toggle(...h))})):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(w(),T("img",{key:2,class:"add",src:br,alt:"",onClick:n[37]||(n[37]=(...h)=>e.toggle&&e.toggle(...h))})):O("",!0)]),e.poolInfo||e.createPoolInfo?(w(),ke(q,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):O("",!0)])])),ye($,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:n[38]||(n[38]=h=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ue(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(w(),T("svg",Jm,xm)):O("",!0),m("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),m("div",eh,[ye(ce)]),e.showCoinSelect?(w(),ke(E,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:n[39]||(n[39]=h=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):O("",!0),e.isViewDetail?(w(),ke(x,{key:3,"pool-info":e.poolInfo,onOnClose:n[40]||(n[40]=h=>e.isViewDetail=!1)},null,8,["pool-info"])):O("",!0),e.isCreateSuccess?(w(),ke(ie,{key:4,onOnClose:n[41]||(n[41]=h=>e.isCreateSuccess=!1)})):O("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(w(),ke(ve,{key:5,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:n[42]||(n[42]=h=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):O("",!0),e.isShowLiquidityModal?(w(),ke(te,{key:6,"pool-info":e.poolInfo||e.createPoolInfo,title:e.$route.query.action=="create-pool"?e.$t("newAdd.preview"):e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direct,"is-increase":!1,onCreatePool:e.toCreatePool,onToAdd:e.toAdd,onOnClose:n[43]||(n[43]=h=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onCreatePool","onToAdd"])):O("",!0)])}const Rh=kn(Hp,[["render",nh],["__scopeId","data-v-19286104"]]);export{Rh as default};
