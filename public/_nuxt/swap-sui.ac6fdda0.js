import{_ as Lo}from"./refresh-icon.00bf2f16.js";import{_ as Po,a as Mo,b as Ro}from"./new-swap-confirm.9abaae5a.js";import{_ as Bo}from"./network-tips.0f999428.js";import{_ as jo}from"./coin-select.c2cd6475.js";import{_ as Fo}from"./swap-setting.51d0fdf5.js";import{_ as Uo}from"./token-warning-modal.47e07420.js";import{a as Pa,l as Ma,m as S,a3 as Ra,a4 as Ba,r as v,D as _,E as Eo,e as ja,q as qo,o as b,f as F,h as c,v as x,c as L,z as te,t as Ta,x as I,i as V,w as z,u as be,I as Wo,S as Do,B as Fa,j as Je,p as Ua,k as Ea,a5 as Ho,b as Vo,y as zo,C as Yo,a8 as $a,M as Xe,L as Jo,A as Xo,W as Ko}from"./entry.751b97a6.js";/* empty css              *//* empty css              */import{i as Ge}from"./import-icon.de3e6c66.js";import{a as qa,u as Wa,m as Oa,q as Go,b as Qo,p as Na}from"./pool.67fa1455.js";import{u as Da,b as M,q as la,c as Be,i as Ha,a as Zo,d as Oe,s as sa,g as Se,e as Ke,h as Re,_ as La}from"./index.ce4cd877.js";import{D as g}from"./decimal.0bdeb344.js";import{A as _o,R as xo,c as Ee,u as en}from"./limit-beta.6ffdd553.js";import{U as an}from"./underline-tab.a8bdbfef.js";import{_ as Va}from"./token-warning.0f193423.js";import"./index.e1bfc7dd.js";/* empty css              */import{u as on}from"./useDebounceFunction.6f28c558.js";/* empty css              *//* empty css              */import"./install.33c2a500.js";import"./token-warning_2x.8b07ce9d.js";import"./img-no-Positions_2x.726c3171.js";import"./img-no-Positions_2x.c3b92fe4.js";import"./icon-error_2x.e6998a2e.js";import"./icon-selected_3x.09e9a6f0.js";import"./coin-img.8c058801.js";const nn=Pa({components:{TokenWarning:Va},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},havehalf:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""},amountLeabl:{type:String,default:""},isShowAmountPrice:{type:Boolean,default:!0},convertAssetsLoading:{type:Boolean,default:!1},swapLoading:{type:Boolean,default:!1},title:{type:String,default:""}},setup(e,r){const{t:J,locale:Ze}=Ma(),D=qa(),ie=S(()=>D),u=S(()=>new g(Number(e.balance)).div(2)),E=Ra(Ba,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function q(){this.$emit("onSelect")}v("");const de=on(h=>{r.emit("onInput",h),r.emit("onInputLoading",!1)},500),Y=v(""),ve=h=>{const m=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(i==null?void 0:i.value)&&(i==null?void 0:i.value)}})?).*$`),O=h.target.value.replace(/,/g,"").replace(m,"$1");O>0&&r.emit("onInputLoading",!0),de(O)},U=h=>{var qe;const m=h.target.selectionStart,O=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(i==null?void 0:i.value)&&(i==null?void 0:i.value)}})?).*$`);console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.target.value:",h.target.value);let P=h.target.value.replace(/,/g,"").replace(O,"$1");console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ value:",P),console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.inputType:",h.inputType);let o=P.includes(".")&&String(M(P))==="0"?P:String(M(P));const s=Oa(h.target.value),Ae=Oa(o),Fe=Ae.length-s.length;let me=m+Fe;if((qe=h==null?void 0:h.inputType)!=null&&qe.includes("delete")&&Fe>0&&m===Ae[Ae.length-1]){const ye=h.target.value.slice(0,m-1)+h.target.value.slice(m);o=String(M(ye.replace(/,/g,""))),me=me-2}console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ fValue:",o),Y.value=o||"",setTimeout(()=>{try{h.target.setSelectionRange(me<0?0:me,me<0?0:me)}catch(ye){console.log("ðŸš€ ~ file: assets-card.vue:307 ~ setTimeout ~ error:",ye)}},0)};_(()=>e.inputValue,h=>{console.log("ðŸš€ ~ file: assets-card.vue:287 ~ setup ~ newValue:",h);const m=h.includes(".")&&String(M(h))==="0"?h:String(M(h));console.log("ðŸš€ ~ file: assets-card.vue:287 ~ setup ~ fValue:",m),m!==Y.value&&(Y.value=m)},{immediate:!0});const ce=Da(),Ce=S(()=>ce),ke=Wa(),$=S(()=>ke),f=S(()=>$.value.tokensWarningObj);let H=v({});_(()=>$.value.RATES,h=>{h&&(H.value=h)},{immediate:!0,deep:!0});const N=S(()=>{var O,P,o;const h=(H==null?void 0:H.value)&&((O=H==null?void 0:H.value)==null?void 0:O[e.address])&&((o=(P=H==null?void 0:H.value)==null?void 0:P[e.address])==null?void 0:o.price)||0,m=new g(e.inputValue||0).mul(h).toNumber();return h<=0?0:m>0&&m<.01?"<$0.01":Ha(m,2)}),K=S(()=>{var h,m;return $.value.tokensObj&&e.address&&$.value.tokensObj[e.address]&&((h=$.value.tokensObj[e.address])==null?void 0:h.labels)&&((m=$.value.tokensObj[e.address])==null?void 0:m.labels[0])}),i=S(()=>{var h;return $.value.tokensObj&&e.address&&$.value.tokensObj[e.address]&&((h=$.value.tokensObj[e.address])==null?void 0:h.decimals)}),l=S(()=>{var h,m,O,P;return e.coinIcon||((m=(h=$==null?void 0:$.value)==null?void 0:h.tokensObj[e.address])==null?void 0:m.logo_url)||((P=(O=$==null?void 0:$.value)==null?void 0:O.tokensObj[e.address])==null?void 0:P.logoURI)||""}),je=S(()=>$.value.tokensObj),G=S(()=>ie.value.theme),Ne=S(()=>$.value.isTokenLoading);return{route:Eo(),theme:G,currentIcon:l,tokensObj:je,pool:$,halfBalance:u,coinLabels:K,t:J,addCommom:M,store:ie,wallet:Ce,indicator:E,inputChange:ve,importIcon:Ge,selectCoin:q,amountPirce:N,coinDecimals:i,formatNumber:la,tokensWarningObj:f,checkNullObj:Be,isTokenLoading:Ne,formattedValue:Y,handleInput:U}}});const Qe=e=>(Ua("data-v-8f76db14"),e=e(),Ea(),e),sn={class:"card"},ln={class:"pc-card"},tn={class:"tit"},un={class:"card-top"},rn={class:"loading-token"},dn={key:1},vn={key:0},cn=Qe(()=>c("use",{"xlink:href":"#icon-icon_on"},null,-1)),mn=[cn],pn={class:"card-bottom"},fn={key:0,class:"amount-price"},gn={key:1},wn={class:"top"},hn={class:"right"},bn={key:0,class:"icon icon_wallet","aria-hidden":"true"},Sn=Qe(()=>c("use",{"xlink:href":"#icon-icon_wallet"},null,-1)),Cn=[Sn],kn={class:"balance"},An={key:1},yn={class:"h5-card"},In={class:"card-bottom"},Tn={class:"tit"},$n={class:"top"},On={class:"right"},Nn=Qe(()=>c("svg",{class:"icon icon_wallet","aria-hidden":"true"},[c("use",{"xlink:href":"#icon-icon_wallet"})],-1)),Ln={class:"balance"},Pn={key:1},Mn={class:"card-top"},Rn={class:"loading-token"},Bn={key:1},jn={key:0},Fn=Qe(()=>c("use",{"xlink:href":"#icon-icon_on"},null,-1)),Un=[Fn],En={key:0,class:"amount-price"},qn={key:1};function Wn(e,r,J,Ze,D,ie){const u=Wo,E=Do,q=Ho,de=Va,Y=Fa,ve=qo("image");return b(),F("div",sn,[c("div",ln,[c("div",tn,x(e.title),1),c("div",un,[e.swapLoading?(b(),L(E,{key:1,class:"input-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):(b(),L(u,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.formattedValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:e.handleInput,onFocus:r[0]||(r[0]=U=>e.$emit("onFocus"))},null,8,["value","disabled","onChange","onInput"])),c("div",{class:te(["left",[e.hasArrow?"":"nohands",e.route.name=="swap"||e.route.name=="limit"?"left-opcity":""].join("")]),onClick:r[1]||(r[1]=U=>e.hasArrow&&!e.isTokenLoading?e.selectCoin():"")},[c("div",rn,[e.isTokenLoading?(b(),L(q,{key:0,class:"token-img-loading-skeleton",active:"",size:"small",paragraph:!1})):e.address?Ta((b(),F("img",dn,null,512)),[[ve,e.currentIcon]]):I("",!0),V(de,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),V(E,{loading:e.isTokenLoading,class:"token-loading-skeleton",active:"",paragraph:!1},{default:z(()=>[c("div",null,[c("p",null,x(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(b(),F("p",vn,x(e.coinLabels),1)):I("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(b(),F("svg",{key:0,class:te(["icon",e.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},mn,2)):I("",!0)],2)]),c("div",pn,[e.inputValue&&e.amountPirce!="--"&&(Number(e.amountPirce)>0||e.amountPirce=="<$0.01")&&e.isShowAmountPrice&&!e.swapLoading?(b(),F("div",fn,x(e.amountPirce!=="<$0.01"?`$${("formatNumber"in e?e.formatNumber:be(la))(e.amountPirce)}`:`${e.amountPirce}`),1)):(b(),F("div",gn,[e.swapLoading?(b(),L(E,{key:0,class:"rate-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):I("",!0)])),c("div",wn,[c("div",hn,[e.wallet.connected?(b(),F("svg",bn,Cn)):I("",!0),c("span",kn,[e.convertAssetsLoading?(b(),L(E,{key:0,class:"token-loading-skeleton",loading:!0,active:"",paragraph:!1})):(b(),F("span",An,x(e.wallet.connected?("addCommom"in e?e.addCommom:be(M))(e.balance,e.coinDecimals):""),1))]),e.havehalf&&e.wallet.connected?(b(),L(Y,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:be(M))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:r[2]||(r[2]=U=>e.$emit("onHalf"))},{default:z(()=>[Je("HALF")]),_:1},8,["disabled"])):I("",!0),e.havemax&&e.wallet.connected?(b(),L(Y,{key:2,disabled:!e.coinName||("addCommom"in e?e.addCommom:be(M))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:r[3]||(r[3]=U=>e.$emit("onMax"))},{default:z(()=>[Je("MAX")]),_:1},8,["disabled"])):I("",!0)])])])]),c("div",yn,[c("div",In,[c("div",Tn,x(e.title=="You pay"?"Pay":e.title=="You receive"?"Receive":e.title),1),c("div",$n,[c("div",On,[Nn,c("span",Ln,[e.convertAssetsLoading?(b(),L(E,{key:0,class:"token-loading-skeleton",loading:!0,active:"",paragraph:!1})):(b(),F("span",Pn,x(e.wallet.connected?("addCommom"in e?e.addCommom:be(M))(e.balance,e.coinDecimals):"0"),1))]),e.havehalf&&e.wallet.connected?(b(),L(Y,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:be(M))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:r[4]||(r[4]=U=>e.$emit("onHalf"))},{default:z(()=>[Je("HALF")]),_:1},8,["disabled"])):I("",!0),e.havemax&&e.wallet.connected?(b(),L(Y,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:be(M))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:r[5]||(r[5]=U=>e.$emit("onMax"))},{default:z(()=>[Je("MAX")]),_:1},8,["disabled"])):I("",!0)])])]),c("div",Mn,[e.swapLoading?(b(),L(E,{key:1,class:"input-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):(b(),L(u,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.formattedValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:e.handleInput,onFocus:r[6]||(r[6]=U=>e.$emit("onFocus"))},null,8,["value","disabled","onChange","onInput"])),c("div",{class:te(["left",[e.hasArrow?"":"nohands",e.route.name=="swap"||e.route.name=="limit"?"left-opcity":""].join("")]),onClick:r[7]||(r[7]=U=>e.hasArrow&&!e.isTokenLoading?e.selectCoin():"")},[c("div",Rn,[e.isTokenLoading?(b(),L(q,{key:0,class:"token-img-loading-skeleton",active:"",size:"small",paragraph:!1})):e.address?Ta((b(),F("img",Bn,null,512)),[[ve,e.currentIcon]]):I("",!0),V(de,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),V(E,{loading:e.isTokenLoading,class:"token-loading-skeleton",active:"",paragraph:!1},{default:z(()=>[c("div",null,[c("p",null,x(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(b(),F("p",jn,x(e.coinLabels),1)):I("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(b(),F("svg",{key:0,class:te(["icon",e.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Un,2)):I("",!0)],2)]),e.inputValue&&e.amountPirce!="--"&&(Number(e.amountPirce)>0||e.amountPirce=="<$0.01")&&e.isShowAmountPrice&&!e.swapLoading?(b(),F("div",En,x(e.amountPirce!=="<$0.01"?`$${("formatNumber"in e?e.formatNumber:be(la))(e.amountPirce)}`:`${e.amountPirce}`),1)):(b(),F("div",qn,[e.swapLoading?(b(),L(E,{key:0,class:"rate-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):I("",!0)]))])])}const Dn=ja(nn,[["render",Wn],["__scopeId","data-v-8f76db14"]]),Hn=Pa({components:{AggregatorSettingModal:_o,RouterModal:xo,UnderlineTab:an,NewAssetsCard:Dn},setup(){const e=Vo(),r=Ra(Ba,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:J,locale:Ze}=Ma(),D=qa(),ie=Wa(),u=S(()=>ie);let E=v(!1),q=v(!0),de=v(!1),Y=v(!1),ve=v(!1),U=v(!1);const ce=v("fromCoin"),Ce=v(""),ke=v(""),$=v(!1),f=v(!0),H=v(!1),N=v(!1),K=v(!1),i=v(""),l=v(""),je=v(20),G=v(0),Ne=v(null),ee=v(!1),h=S(()=>D.slippage),m=S(()=>D.chainName),O=S(()=>m.value?Qo(m.value):{}),P=S(()=>en()),o=v(),s=v(),Ae=S(()=>Se&&Se[m.value]&&Se[m.value].hasRouter),Fe=S(()=>ie.getPoolInfoSuccess),me=S(()=>{var a;return C.value&&((a=C.value)!=null&&a.is_pause)?"Pool Closed":!o.value||!s.value?J("modal.selectTokenModalTitle"):!Number(i.value)&&!Number(l.value)?J("button.enterAmount"):!Ae.value&&!C.value&&Fe.value?"Pool Not Found":Ae.value&&Pe.value?"No Available Route":ee.value?J("button.insufficientLiquidity"):Number(i.value)>Number(Z.value)?J("button.insufficientBalance",{name:o.value.symbol}):J("button.swap")}),qe=a=>{var t,n,w,p;ce.value=a,a==="fromCoin"?(Ce.value=((t=s.value)==null?void 0:t.address)||"",ke.value=((n=o.value)==null?void 0:n.address)||""):(Ce.value=((w=o.value)==null?void 0:w.address)||"",ke.value=((p=s.value)==null?void 0:p.address)||""),$.value=!0},ye=v({}),_e=v({}),za=a=>{ce.value==="fromCoin"?(ye.value=a,ea(a)):(_e.value=a,ea(a))},Ya=a=>{a==="fromCoin"?(f.value=!0,m.value==="Aptos"?i.value=Z.value>0?o.value.symbol=="APT"?new g(Number(Z.value)).sub(new g(.1)).lt(new g(0))?"0":new g(Number(Z.value)).sub(new g(.1)).toString():String(Z.value):"":i.value=Z.value>0?o.value.symbol=="SUI"?new g(Number(Z.value)).sub(new g(.05)).lt(new g(0))?"0":new g(Number(Z.value)).sub(new g(.05)).toString():String(Z.value):""):(f.value=!1,m.value==="Aptos"?l.value=ae.value>0?s.value.symbol=="APT"?new g(Number(ae.value)).sub(new g(.1)).lt(new g(0))?"0":new g(Number(ae.value)).sub(new g(.1)).toString():String(ae.value):"":l.value=ae.value>0?s.value.symbol=="SUI"?new g(Number(ae.value)).sub(new g(.05)).lt(new g(0))?"0":new g(Number(ae.value)).sub(new g(.05)).toString():String(ae.value):"")},Ja=a=>{a==="fromCoin"?(f.value=!0,i.value=Z.value>0?sa(new g(Number(Z.value)).div(2).toString(),o.value.decimals).toString():""):(f.value=!1,l.value=ae.value>0?sa(new g(Number(ae.value)).div(2).toString(),s.value.decimals).toString():"")},xe=v(!1);zo(()=>{ta(),window.addEventListener("updateSwapParams",a=>{xe.value=!xe.value})}),Yo(()=>{clearInterval(Ne.value)}),S(()=>D);const We=()=>{var a,t,n,w,p;console.log("ðŸš€ ~ file: swap-sui.vue:785 ~ clickRefresh ~:"),!q.value&&(!C.value&&!Ae.value||(clearInterval(Ne.value),G.value=0,q.value=!0,ne.value||$e(f.value?i.value:l.value),Q.value.address&&O.value.getAccount(Q.value.address),setTimeout(()=>{q.value=!1,ta()},1e3),console.log("ðŸš€ ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES11111:",(a=u==null?void 0:u.value)==null?void 0:a.RATES),(!((t=u==null?void 0:u.value)!=null&&t.RATES)||Be((n=u==null?void 0:u.value)==null?void 0:n.RATES))&&(console.log("ðŸš€ ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES2222:",(w=u==null?void 0:u.value)==null?void 0:w.RATES),(p=u==null?void 0:u.value)==null||p.setRates("Sui"))))};console.log("ðŸš€ ~ file: swap-sui.vue:811 ~ clickRefresh ~ clickRefresh:",We);const ta=()=>{Ne.value=setInterval(()=>{q.value=!1,H.value||G.value<je.value&&(G.value+=1,G.value===je.value&&(m.value=="Aptos"?(C.value&&C.value.poolAddress&&ie.updateCurrentPools(C.value.poolAddress,m.value),We()):U.value||We(),G.value=0,q.value=!0))},1e3)};_(f,$a((a,t)=>{f.value=a},500));const re=v(!1);_(i,(a,t)=>{a&&a!==0&&f.value&&(G.value=0,Ye($e(a),800)),a==""&&f.value&&(l.value="")}),_(l,(a,t)=>{a&&a!==0&&!f.value&&(G.value=0,Ye($e(a),800)),a==""&&!f.value&&(i.value="")});const De=v(1e-4),He=async a=>{let t=a;if(m.value==="Aptos"&&!t.current_sqrt_price&&i.value&&l.value){const n=await O.value.getPools([t.address]);n&&n[0]&&(t={...a,...n[0],fee:Number(n[0].fee_rate)/1e6})}if(t.current_sqrt_price&&i.value&&l.value){const w=(o.value.address===t.coinA.address&&s.value.address===t.coinB.address?0:1)==0,p=new g(i.value),k=new g(l.value),A=p.sub(p.mul(new g(t.fee))),T=k.div(A);return O.value.getPriceImpactPct(t,T.toString(),w)}return"--"},ua=v(0),ia=v(0),ra=v(),Le=v({}),Xa=async a=>{if(C.value&&(ne.value=!0,!(f.value&&Number(i.value)==0)&&!(!f.value&&Number(l.value)==0))){if(o.value&&s.value&&(i.value||l.value)){N.value=!0,K.value=!0,ee.value=!1;const t=o.value.address===C.value.coinA.address&&s.value.address===C.value.coinB.address?0:1;try{let n=await O.value.preSwap({pool:C.value,a2b:t==0,byAmountIn:f.value,amount:f.value?i.value:l.value});ee.value=n==null?void 0:n.isExceed,ra.value=n==null?void 0:n.estimatedFeeAmount,f.value?(l.value=n.estimatedAmountOut,fe.value=(Number(n.estimatedAmountOut)/a).toString(),pe.value=(a/Number(n.estimatedAmountOut)).toString()):(i.value=n.estimatedAmountIn,fe.value=(a/Number(n.estimatedAmountIn)).toString(),pe.value=(Number(n.estimatedAmountIn)/a).toString()),ua.value=new g(l.value).div(i.value).toString(),ia.value=new g(i.value).div(l.value).toString(),De.value=m.value=="Aptos"?await He(C.value):await He(Le.value||C.value),N.value=!1,K.value=!1}catch(n){console.log("pre swap error1",n),N.value=!1,K.value=!1}}else f.value?l.value="":i.value="",N.value=!1,K.value=!1;ne.value=!1}},Ka=Da(),Q=S(()=>Ka),Ga=v({}),pe=v(""),fe=v(""),Z=S(()=>Q.value.assets&&o.value&&Q.value.assets[o.value.address]?Na(Q.value.assets[o.value.address].balance,o.value.decimals):0),ae=S(()=>Q.value.assets&&s.value&&Q.value.assets[s.value.address]?Na(Q.value.assets[s.value.address].balance,s.value.decimals):0);_(()=>u.value.tokensObj,async a=>{if(a&&!Be(a)){const t=e?e.currentRoute.value.query.to:"",n=e?e.currentRoute.value.query.from:"";n?o.value=a[n]||await O.value.getTokenBySymbol(a,n):!n&&!o.value&&(o.value=a[Se[m.value].swapDefaultPair.fromCoin]),t?s.value=a[t]||await O.value.getTokenBySymbol(a,t):!t&&!s.value&&(s.value=a[Se[m.value].swapDefaultPair.toCoin],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ newValue:",a),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",Se[m.value].swapDefaultPair.toCoin)),!n&&t&&(o.value="")}},{immediate:!0});const C=S(()=>{var a,t,n,w,p;if(o.value&&s.value){let k=null,A={};if(Object.values(u.value.poolConfigList).forEach(d=>{var y,W,j,B;(d.coinA.address.toUpperCase()===((y=o.value.address)==null?void 0:y.toUpperCase())&&d.coinB.address.toUpperCase()===((W=s.value.address)==null?void 0:W.toUpperCase())||d.coinB.address.toUpperCase()===((j=o.value.address)==null?void 0:j.toUpperCase())&&d.coinA.address.toUpperCase()===((B=s.value.address)==null?void 0:B.toUpperCase()))&&(A[d.address]={...d})}),m.value=="Aptos"&&u.value.poolsObj&&!Be(u.value.poolsObj))for(const d in u.value.poolsObj){const y=u.value.poolsObj[d];(y.token_a.address.toUpperCase()===((a=o.value.address)==null?void 0:a.toUpperCase())&&y.token_b.address.toUpperCase()===((t=s.value.address)==null?void 0:t.toUpperCase())||y.token_b.address.toUpperCase()===((n=o.value.address)==null?void 0:n.toUpperCase())&&y.token_a.address.toUpperCase()===((w=s.value.address)==null?void 0:w.toUpperCase()))&&(A[y.address]={...y})}const T=Object.values(A).sort((d,y)=>d.fee-y.fee);for(let d=0;d<T.length;d++)if(!((p=T[d])!=null&&p.is_pause)){k=T[d];break}return k&&!Be(k)?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1094 ~ poolInfo ~ info:",k),k):null}return null}),da=v(!0),va=v(!1),Qa=async a=>{a&&m.value=="Aptos"&&($e(f.value?i.value:l.value),va.value=!0,a.coinA.symbol.toLowerCase()===o.value.symbol.toLowerCase()&&a.coinB.symbol.toLowerCase()===s.value.symbol.toLowerCase()?da.value=!0:da.value=!1,ee.value=!1)};_(()=>C.value,(a,t)=>{a&&(!t||a.address!==t.address||a.current_sqrt_price!==t.current_sqrt_price)&&Qa(a)},{immediate:!0,deep:!0});const Za=S(()=>u.value.tokensObj&&o.value&&o.value.address&&u.value.tokensObj[o.value.address]&&u.value.tokensObj[o.value.address].logoURI),_a=S(()=>u.value.tokensObj&&s.value&&s.value.address&&u.value.tokensObj[s.value.address]&&u.value.tokensObj[s.value.address].logoURI),xa=S(()=>m.value==="Aptos"?u.value.tokensObj&&o.value&&o.value.address&&u.value.tokensObj[o.value.address]&&u.value.tokensObj[o.value.address].coingecko_id||null:u.value.tokensObj&&o.value&&o.value.address||null),eo=S(()=>m.value==="Aptos"?u.value.tokensObj&&s.value&&s.value.address&&u.value.tokensObj[s.value.address]&&u.value.tokensObj[s.value.address].coingecko_id||null:u.value.tokensObj&&s.value&&s.value.address||null),ao=S(()=>{var a,t,n,w,p,k,A,T,d,y,W,j,B;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1222 ~ formCoinMarket ~ pools?.value?.tokensObj:",(a=u==null?void 0:u.value)==null?void 0:a.tokensObj),(w=(n=u==null?void 0:u.value)==null?void 0:n.tokensObj[(t=o==null?void 0:o.value)==null?void 0:t.address])!=null&&w.pyth_id&&((A=(k=u==null?void 0:u.value)==null?void 0:k.tokensObj[(p=o==null?void 0:o.value)==null?void 0:p.address])==null?void 0:A.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(y=(d=u==null?void 0:u.value)==null?void 0:d.tokensObj[(T=o==null?void 0:o.value)==null?void 0:T.address])!=null&&y.coingecko_id?"coingecko":(B=(j=u==null?void 0:u.value)==null?void 0:j.tokensObj[(W=o==null?void 0:o.value)==null?void 0:W.address])!=null&&B.birdeyeid?"birdeye":null}),oo=S(()=>{var a,t,n,w,p,k,A,T,d,y,W,j;return(n=(t=u==null?void 0:u.value)==null?void 0:t.tokensObj[(a=s==null?void 0:s.value)==null?void 0:a.address])!=null&&n.pyth_id&&((k=(p=u==null?void 0:u.value)==null?void 0:p.tokensObj[(w=s==null?void 0:s.value)==null?void 0:w.address])==null?void 0:k.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(d=(T=u==null?void 0:u.value)==null?void 0:T.tokensObj[(A=s==null?void 0:s.value)==null?void 0:A.address])!=null&&d.coingecko_id?"coingecko":(j=(W=u==null?void 0:u.value)==null?void 0:W.tokensObj[(y=s==null?void 0:s.value)==null?void 0:y.address])!=null&&j.birdeyeid?"birdeye":null}),no=S(()=>{var w,p;const a=new g(i.value),t=new g(m.value=="Aptos"?(w=C==null?void 0:C.value)==null?void 0:w.fee:(p=Le==null?void 0:Le.value)==null?void 0:p.fee),n=a.mul(t).toString();return Number(n)<1/Math.pow(10,o.value.decimals)?`<${new g(1).div(new g(Math.pow(10,o.value.decimals))).toString()}`:sa(n,o.value.decimals)}),{setIsShowSuccess:so,setIsShowRejected:ca,setIsShowWaiting:Ve,setTransactionDesc:lo,setTransactionTxid:ma}=D,to=async()=>{var t,n,w,p,k,A,T,d,y,W;U.value=!1,N.value=!0,clearInterval(Ue),window.clearInterval(Ue),ma(""),lo(J("tips.swapping",{from:`${M(i.value)} ${(t=o.value)==null?void 0:t.symbol}`,to:`${M(l.value)} ${(n=s.value)==null?void 0:n.symbol}`})),Ve(!0);let a;m.value=="Aptos"&&(a=o.value.address===C.value.token_a.address&&s.value.address===C.value.token_b.address?0:1);try{let j;if(m.value=="Aptos")j=await O.value.getSwapTransactionPayload({pool:C.value,a2b:a==0,byAmountIn:f.value,amount:f.value?i.value:l.value,slippage:Number(h.value)/100});else{const oe=f.value,we=Number(h.value)/100;j=await((w=P==null?void 0:P.value)==null?void 0:w.getRouterSwapPayload(R.value,oe,we,o,s))}console.log("0221####swap###swapPayload###",j);let B;if(m.value==="Aptos")B=await Q.value.currentWallet.signAndSubmitTransaction(j);else{const oe=await O.value.signAndExecuteTransactionBlock(Q.value.currentWallet,j,{action:"AggregatorSwap"});console.log("0221###sui swap res###",oe),B=O.value.handleTx(oe),console.log("0221###swap###sui##tx###",B)}if(B&&B.hash){ma(B.hash),Ve(!1),so(!0);const oe={title:J("tips.swap"),desc:J("tips.swapSuccessText",{from:`${M(i.value)} ${(p=o.value)==null?void 0:p.symbol}`,to:`${M(l.value)} ${(k=s.value)==null?void 0:k.symbol}`}),hash:B.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:o.value.address==Se[m.value].currentChainTokenAddress||s.value.address==Se[m.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(A=o.value)==null?void 0:A.address}`,numa:`- ${i.value}`,logoa:u.value.tokensObj&&o.value&&o.value.address&&u.value.tokensObj[o.value.address]&&u.value.tokensObj[o.value.address].logoURI,tokenb:`${(T=s.value)==null?void 0:T.address}`,numb:`+ ${l.value}`,logob:u.value.tokensObj&&s.value&&s.value.address&&u.value.tokensObj[s.value.address]&&u.value.tokensObj[s.value.address].logoURI},text:`Pay ${i.value} ${(d=o.value)==null?void 0:d.symbol} to receive ${l.value} ${(y=s.value)==null?void 0:y.symbol}`,excecuteTime:(W=B==null?void 0:B.res)==null?void 0:W.excecuteTime};m.value!=="Aptos"&&(oe.res=B.res),O.value.showTransitionPending(oe);const we=await O.value.watchTransaction(oe);console.log("0221###swap###transitionStatus####",we),we&&setTimeout(()=>{m.value=="Aptos"&&ie.updateCurrentPools(C.value.poolAddress,m.value),O.value.getAccount(Q.value.address)},1e3)}else Ve(!1),ca(!0);i.value="",l.value="",N.value=!1}catch(j){i.value="",l.value="",console.log("Swap Error###",j),N.value=!1,Ve(!1),ca(!0)}},uo=a=>{var t;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((t=u.value.tokensObj[a==null?void 0:a.address])==null?void 0:t.logo_url)||(D.theme==="default"?Ge("/image/coins/unknown.png"):Ge("/image/coins/sui-unknown.png"))},pa=v([]);_(()=>[o.value,s.value,u.value.poolConfigList],([a,t,n])=>{if(n&&n.length>0&&a&&t){const w=[];n.forEach(p=>{var k,A,T,d;(p.coinA.address.toUpperCase()===((k=a.address)==null?void 0:k.toUpperCase())&&p.coinB.address.toUpperCase()===((A=t.address)==null?void 0:A.toUpperCase())||p.coinB.address.toUpperCase()===((T=a.address)==null?void 0:T.toUpperCase())&&p.coinA.address.toUpperCase()===((d=t.address)==null?void 0:d.toUpperCase()))&&(p!=null&&p.is_pause||w.push(p.address))}),pa.value=w}},{immediate:!0});const ea=a=>{console.log("ðŸš€ ~ getTokenSource ~ token:",a);const t=D.importTokenListObj;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(t!=null&&t.hasOwnProperty(a==null?void 0:a.address))),a!=null&&a.isSelfBuilt&&!(t!=null&&t.hasOwnProperty(a==null?void 0:a.address))?aa.value=!0:(ce.value==="fromCoin"?(s.value&&a.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null),o.value=a,i.value=i.value>0?Oe(i.value,a==null?void 0:a.decimals):""):(o.value&&a.address.toLowerCase()===(o==null?void 0:o.value.address.toLowerCase())&&(o.value=null),s.value=a,l.value=l.value>0?Oe(l.value,a==null?void 0:a.decimals):""),fa())},aa=v(!1),fa=()=>{_e.value={},ye.value={},aa.value=!1},io=S(()=>D.isShowRouterModal),Ie=v([]),ga=v(""),ro=v(!1),wa=Go();S(()=>wa);const Pe=v(!1),R=v({}),vo=v(""),co=v(),ne=v(!1),ze=v(0),oa=async a=>{var t,n;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),ne.value=!0,ee.value=!1,o.value&&s.value&&(Number(i.value)>0&&f.value||Number(l.value)>0&&!f.value)){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!i.value&&l.value||i.value&&!l.value)&&(N.value=!0),pe.value="",fe.value="",re.value=!0,Pe.value=!1;let w;C.value&&(w=o.value.address===C.value.coinA.address&&s.value.address===C.value.coinB.address?0:1);try{let p;if(f.value){const y=new g(i.value).mul(Math.pow(10,o.value.decimals)).toString();p=new Ke(y)}else{const y=new g(l.value).mul(Math.pow(10,s.value.decimals)).toString();p=new Ke(y)}const k=Number(h.value)/100,A=C.value?{poolAddresses:pa.value,coinTypeA:C.value.coin_a_address,coinTypeB:C.value.coin_b_address,decimalsA:C.value.coinA.decimals,decimalsB:C.value.coinB.decimals,a2b:w==0,byAmountIn:f.value,amount:p.toString()}:"";console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fromCoin:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ toCoin:",s),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ coinAmount:",p),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",f.value);const T=ze.value+1;ze.value=T;const d=await((t=P==null?void 0:P.value)==null?void 0:t.getFindRouter(o,s,p.toString(),f.value,k,C.value?A:"",T));if(console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter:",d),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter JSON:",JSON.stringify(d,null,2)),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ suiAmountId.value:",ze.value),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter.id:",d==null?void 0:d.id),ze.value!==(d==null?void 0:d.id)){re.value=!1,ne.value=!1,N.value=!1,R.value={},Ie.value=[],f.value?l.value="":i.value="";return}if(d!=null&&d.insufficientLiquidity){ee.value=!0,re.value=!1,ne.value=!1,N.value=!1,R.value={},Ie.value=[],f.value?l.value="":i.value="";return}if(!d||!(d!=null&&d.routes)||((n=d==null?void 0:d.routes)==null?void 0:n.length)==0){N.value=!1,Pe.value=!0,re.value=!1,ne.value=!1,R.value={},Ie.value=[],i.value?l.value="":i.value="";return}if(d.fromCoinAddress!==o.value.address||d.toCoinAddress!==s.value.address){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1861 ~ getSuiAmount ~",d.fromCoinAddress!==o.value.address||d.toCoinAddress!==s.value.address),R.value={},Ie.value=[];return}d?(R.value=d,Ie.value=d.routes,ee.value=!1,f.value?i.value&&(l.value=new g(d.amountOut).div(new g(Math.pow(10,s.value.decimals))).toString()):l.value&&(i.value=new g(d.amountIn).div(new g(Math.pow(10,o.value.decimals))).toString()),console.log(l.value,"###toCoinAmount.value"),pe.value=M(Oe(new g(i.value).div(new g(l.value).toString()),o.value.decimals)),fe.value=M(Oe(new g(l.value).div(i.value).toString(),s.value.decimals)),N.value=!1,Pe.value=!1,re.value=!1):(N.value=!1,Pe.value=!0,re.value=!1)}catch(p){console.log("pre swap error2",p),N.value=!1,re.value=!1,ne.value=!1}}else f.value?l.value="":i.value="",N.value=!1,re.value=!1;ne.value=!1,console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1926 ~ getSuiAmount ~ isRoutrProgress.value:",ne.value)},Te=v(!1),ha=async a=>{var t;try{let n;if(f.value){const k=new g(i.value).mul(Math.pow(10,o.value.decimals)).toString();n=new Ke(k)}else{const k=new g(l.value).mul(Math.pow(10,s.value.decimals)).toString();n=new Ke(k)}const w=Number(h.value)/100,p=await((t=P==null?void 0:P.value)==null?void 0:t.getFindRouter(o,s,n.toString(),f.value,w,""));if(p){R.value=p,Ie.value=p.routes,ee.value=!1,ga.value=p.amountIn,pe.value=M(Oe(new g(i.value).div(new g(l.value).toString()),o.value.decimals)),fe.value=M(Oe(new g(l.value).div(i.value).toString(),s.value.decimals));const k=new g(p.amountOut).div(new g(Math.pow(10,s.value.decimals))).toString(),A=new g(p.amountIn).div(new g(Math.pow(10,o.value.decimals))).toString();f.value?l.value!==k&&(Te.value=!0,l.value=k):i.value!==A&&(Te.value=!0,i.value=A)}}catch(n){console.log("pre swap error3",n)}},mo=async a=>{if(o.value&&s.value&&(i.value||l.value)){const t=o.value.address===C.value.coinA.address&&s.value.address===C.value.coinB.address?0:1;try{let n=await O.value.preSwap({pool:C.value,a2b:t==0,byAmountIn:f.value,amount:f.value?i.value:l.value});ee.value=n==null?void 0:n.isExceed,ra.value=n==null?void 0:n.estimatedFeeAmount,f.value?(fe.value=(Number(n.estimatedAmountOut)/n.estimatedAmountIn).toString(),pe.value=(n.estimatedAmountIn/Number(n.estimatedAmountOut)).toString()):(fe.value=(Number(n.estimatedAmountOut)/Number(n.estimatedAmountIn)).toString(),pe.value=(Number(n.estimatedAmountIn)/Number(n.estimatedAmountOut)).toString()),f.value?l.value!==n.estimatedAmountOut&&(Te.value=!0,l.value=n.estimatedAmountOut):i.value!==n.estimatedAmountIn&&(Te.value=!0,i.value=n.estimatedAmountIn),De.value=m.value=="Aptos"?await He(C.value):await He(Le.value||C.value),N.value=!1,K.value=!1}catch(n){console.log("pre swap error4",n),N.value=!1,K.value=!1}}else N.value=!1,K.value=!1};let Ue=v(null);_(()=>U.value,a=>{a?Ue.value=setInterval(()=>{m.value=="Aptos"?mo(f.value):ha(f.value)},3e3):(clearInterval(Ue.value),window.clearInterval(Ue.value))},{immediate:!0});const $e=async a=>{m.value=="Aptos"?Xa(a):oa()};_(()=>xe.value,a=>{(Number(i.value)>0||Number(l.value)>0)&&$e(f.value?i.value:l.value)},{immediate:!0});const po=S(()=>wa),ba=S(()=>po.value.isInitRouter);_(()=>ba.value,a=>{a||(G.value=0,$e(f.value?i.value:l.value))},{immediate:!0});function Ye(a,t=500){let n=null;return function(...w){clearTimeout(n),n=setTimeout(()=>{a.call(this,...w)},t)}}_(()=>[o.value,s.value],([a,t])=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2181 ~ setup ~ fromCoin && toCoin:",a&&t),a&&t&&(G.value=0,Ye($e(f.value?i.value:l.value))),a||t){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1965 ~ setup ~ fromCoin:",a);const n=`/swap?from=${a==null?void 0:a.address}&to=${t==null?void 0:t.address}`;e.push(n)}},{immediate:!0,deep:!0});const fo=Ye(Sa);function Sa(){const a=o.value;o.value=s.value,s.value=a,E.value=!0,ge.value=="open"?f.value=!0:f.value=!f.value,f.value?(i.value=l.value,l.value=""):(l.value=i.value,i.value=""),setTimeout(()=>{E.value=!1},300)}const go=()=>{Te.value=!1},wo=()=>{U.value=!1,Te.value=!1},ho=[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}],bo=v("Swap"),Ca=v(!1),na=S(()=>{var a,t,n,w,p,k,A,T,d,y,W,j,B,oe;try{if((a=o==null?void 0:o.value)!=null&&a.address&&((t=s==null?void 0:s.value)!=null&&t.address)&&(R!=null&&R.value)&&!Be(R==null?void 0:R.value)){const we=Re((n=R==null?void 0:R.value)==null?void 0:n.amountIn).div(Math.pow(10,(w=o.value)==null?void 0:w.decimals)),No=Re((p=R==null?void 0:R.value)==null?void 0:p.amountOut).div(Math.pow(10,(k=s.value)==null?void 0:k.decimals)),he=Re(No).div(we);console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",he==null?void 0:he.toString());const se=(d=(A=u==null?void 0:u.value)==null?void 0:A.RATES)==null?void 0:d[(T=o==null?void 0:o.value)==null?void 0:T.address];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",se);const le=(j=(y=u==null?void 0:u.value)==null?void 0:y.RATES)==null?void 0:j[(W=s==null?void 0:s.value)==null?void 0:W.address];if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",le),!(se!=null&&se.price)||!(le!=null&&le.price)||Re(se==null?void 0:se.price).lte(0)||Re(le==null?void 0:le.price).lte(0))throw Error("rate invalid");const Me=Re(se==null?void 0:se.price).div(le==null?void 0:le.price);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",Me==null?void 0:Me.toString()),he.gt(Me)){const X=he.minus(Me).div(he).mul(100);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ result1:",X==null?void 0:X.toString()),La((B=X==null?void 0:X.negated())==null?void 0:B.toString(),2)}else{const X=he.minus(Me).div(he).mul(100);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ result2:",X==null?void 0:X.toString()),La((oe=X==null?void 0:X.abs())==null?void 0:oe.toString(),2)}}return}catch(we){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",we),"Incalculable"}}),So=S(()=>(m==null?void 0:m.value)==="Aptos"?De.value:na==null?void 0:na.value),ge=v(localStorage.getItem("plusChecked1"))||v("close"),Co=S(()=>D.liquiditySourceList),ko=a=>{console.log("ðŸš€ ~ modalConfirm ~ result121:",a),a&&a.length>0?a.every(n=>n.name=="Cetus"?!0:n.status==="close")?ge.value="close":(ge.value="open",l.value=""):ge.value="close",Ca.value=!1},Ao=S(()=>D.includeRoutes),ka=a=>{ge.value=ge.value=="open"?"close":"open",localStorage.setItem("plusChecked1",ge.value);const t=Ao.value,n=Co.value;n.forEach(w=>{a?w.status="open":w.name!=="Cetus"?w.status="close":w.status="open"}),console.log("ðŸš€ ~ //clickCheckedresult ~ arr:",n,t),D.setAggregatorSetting(n,t)},Aa=()=>{const a=window.innerWidth,t=window.innerHeight,n=document.getElementById("plusModeSwitch"),w=n==null?void 0:n.getBoundingClientRect(),p=w==null?void 0:w.left,k=w==null?void 0:w.top;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ x:",p),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ y:",k),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportWidth:",a),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportHeight:",t);const A=2,T=Ee.shapeFromText({text:"ðŸŸ¢",scalar:A}),d=Ee.shapeFromText({text:"ðŸ”µ",scalar:A}),y=Ee.shapeFromText({text:"ðŸ’š",scalar:A}),W=Ee.shapeFromText({text:"ðŸ’™",scalar:A});Ee({particleCount:40,spread:60,shapes:[T,d,y,W],scalar:A,origin:{x:p/a,y:k*1.2/t}})},yo=a=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2264 ~ handleSwitchPlusMode ~ value:",a),i.value="",l.value="",a&&Aa(),ka(a),setTimeout(()=>{oa()},500)},ya=v(!1),Io=a=>{ya.value=a},Ia=v(!1),To=a=>{console.log("ðŸš€ ~ file: swap-sui.vue:2341 ~ onInputToCoinLoading ~ status:",a),Ia.value=a},$o=v(!0),Oo=v(!1);return{isAddCardTopPadding:$o,isAddCardBottomPadding:Oo,modalConfirm:ko,clickChecked:ka,currentTradeTab:bo,plusChecked:ge,closeSwapConfirmModal:wo,updateAccept:go,clickExchange:Sa,debounceClickExchange:fo,closeTokenWarning:fa,isShowTokenWarning:aa,getTokenSource:ea,hasPool:va,getPoolInfoSuccess:Fe,halfBtnSelect:Ja,formCoinId:xa,toCoinId:eo,formCoinMarket:ao,toCoinMarket:oo,fromCoinUrl:Za,toCoinUrl:_a,t:J,indicator:r,wallet:Q,currentLpInfo:Ga,fixD:Ha,decimalFormat:Zo,impact:De,oneFromAmount:pe,oneToAmount:fe,importIcon:Ge,clickRefresh:We,refresh:q,change:E,isShowAddress:de,isShowSwapSetting:Y,fromCoin:o,toCoin:s,slippage:h,openCoinSelect:qe,onCoinSelect:za,existingCoins:Ce,lastSelectCoin:ke,currentCoinKey:ce,showCoinSelect:$,fromCoinAmount:i,toCoinAmount:l,maxBtnSelect:Ya,fixedFromCoin:f,swapBtnText:me,toSwap:to,loading:H,swaping:N,autoRefreshTime:je,countdown:G,marketTimer:Ne,rateChange:ve,isSwapConfirmMpdal:U,fromCoinBlance:Z,toCoinBlance:ae,poolInfo:C,chainName:m,swapRouterLoading:re,formatFee:no,calculating:K,currentRate:ua,currentRateReverse:ia,getCoinIcon:uo,toAddLiquidiPoolInfo:Le,decimalUi:Oe,warningToCoin:_e,warningFromCoin:ye,isShowRouterModal:io,toSwapLoading:ro,insufficientLiquidity:ee,routerPool:Ie,routerTotalAmounts:ga,store:D,suiPreSwapdata:R,suiSwapFee:co,suiSwapFeeUi:vo,addCommom:M,debounce:$a,notFoundRouter:Pe,getSuiAmountAccept:ha,isShowAccept:Te,getSuiAmount:oa,tradeTabList:ho,isInitSwapRouter:ba,isShowAggregatorModal:Ca,priceImpact:So,triggerConfettiAnimation:Aa,handleSwitchPlusMode:yo,assetLoading:ya,onInputLoading:Io,onInputToCoinLoading:To,assetToCoinLoading:Ia}}});const ue=e=>(Ua("data-v-a7e535a5"),e=e(),Ea(),e),Vn={class:"swap-container pageHaveRadiusSkeleton"},zn={class:"sui-title"},Yn={class:"right title-right"},Jn=ue(()=>c("div",{class:"price-reference-text"}," The Plus Mode will aggregate external liquidity sources ",-1)),Xn={key:0,class:te("icon-bg plus-switch")},Kn=ue(()=>c("p",null,[c("span",null,"Plus Mode")],-1)),Gn={class:"setting-right"},Qn=ue(()=>c("div",{class:"new-style-tooltip-text"},"Swap Settings",-1)),Zn=ue(()=>c("svg",{"aria-hidden":"true",class:"icon"},[c("use",{"xlink:href":"#icon-icon_set"})],-1)),_n=[Zn],xn=ue(()=>c("div",{class:"new-style-tooltip-text"},"Slippage Settings",-1)),es=ue(()=>c("svg",{class:"icon","aria-hidden":"true"},[c("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),as={class:"swap-card"},os=Xo('<div class="exchange-new" data-v-a7e535a5><svg class="icon icon-down" aria-hidden="true" data-v-a7e535a5><use xlink:href="#icon-icon_swap1" data-v-a7e535a5></use></svg><svg class="icon icon-swap" aria-hidden="true" data-v-a7e535a5><use xlink:href="#icon-tx_swap1" data-v-a7e535a5></use></svg></div>',1),ns=[os],ss={key:0,class:"icon","aria-hidden":"true"},ls=ue(()=>c("use",{"xlink:href":"#icon-icon-swap"},null,-1)),ts=[ls],us={key:2,class:"token-info-container"},is={class:"token-info-title"},rs=ue(()=>c("span",{class:"coingecko"},"Price Reference",-1)),ds=ue(()=>c("div",{class:"price-reference-text",style:{color:"#909CA4"}}," The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ",-1)),vs=ue(()=>c("svg",{class:"icon","aria-hidden":"true"},[c("use",{"xlink:href":"#icon-icon_tips"})],-1));function cs(e,r,J,Ze,D,ie){var i;const u=Xe("UnderlineTab"),E=Ko,q=Jo,de=Lo,Y=Xe("NewAssetsCard"),ve=Fa,U=Po,ce=Bo,Ce=jo,ke=Fo,$=Mo,f=Uo,H=Xe("RouterModal"),N=Ro,K=Xe("AggregatorSettingModal");return b(),F("div",Vn,[c("div",zn,[V(u,{"tab-list":e.tradeTabList,"current-tab":"swap",onClickTab:r[0]||(r[0]=l=>e.$router.push(l.link))},null,8,["tab-list"]),c("div",Yn,[V(q,{"overlay-class-name":"price-impact-tooltip"},{title:z(()=>[Jn]),default:z(()=>[e.chainName=="Sui"?(b(),F("div",Xn,[Kn,V(E,{id:"plusModeSwitch",class:"liquidity-switch",checked:e.plusChecked=="open",onClick:r[1]||(r[1]=l=>{e.handleSwitchPlusMode(l)})},null,8,["checked"])])):I("",!0)]),_:1}),c("div",Gn,[e.chainName=="Sui"?(b(),F("div",{key:0,class:"aggregator-setting",onClick:r[2]||(r[2]=l=>e.isShowAggregatorModal=!0)},[V(q,{"overlay-class-name":"new-style-tooltip"},{title:z(()=>[Qn]),default:z(()=>[c("div",{class:te(e.chainName=="Sui"?"icon-bg":"")},_n,2)]),_:1})])):I("",!0),V(q,{"overlay-class-name":"new-style-tooltip"},{title:z(()=>[xn]),default:z(()=>[c("div",{class:"slippage-icon",onClick:r[3]||(r[3]=l=>e.isShowSwapSetting=!0)},[c("div",{class:te(e.chainName=="Sui"?"icon-bg":"")},[es,c("span",null,x(e.slippage)+"%",1)],2)])]),_:1}),c("div",{class:te(e.chainName=="Sui"?"icon-bg":"")},[V(de,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])],2)])])]),c("div",as,[c("div",{class:te(["card-container",[e.plusChecked=="open"?"toInputBlockDisabled input-block-add-top":"",e.isAddCardTopPadding?"input-block-add-top":"",e.isAddCardBottomPadding&&e.plusChecked!=="open"?"input-block-add-bottom":""]])},[V(Y,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":r[4]||(r[4]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From","swap-loading":!e.fixedFromCoin&&e.fromCoin&&(e.swapRouterLoading||e.assetToCoinLoading),title:"You pay",onOnInputLoading:e.onInputLoading,onOnMax:r[5]||(r[5]=l=>e.maxBtnSelect("fromCoin")),onOnHalf:r[6]||(r[6]=l=>e.halfBtnSelect("fromCoin")),onOnInput:r[7]||(r[7]=l=>{e.fromCoinAmount=l}),onOnFocus:r[8]||(r[8]=()=>{e.fixedFromCoin=!0,e.isAddCardTopPadding=!0,e.isAddCardBottomPadding=!1}),onOnSelect:r[9]||(r[9]=l=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","swap-loading","onOnInputLoading"]),V(Y,{modelValue:e.toCoinAmount,"onUpdate:modelValue":r[10]||(r[10]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,title:"You receive","input-disabled":e.chainName!=="Aptos"&&e.plusChecked=="open","swap-loading":e.fixedFromCoin&&e.toCoin&&(e.swapRouterLoading||e.assetLoading),onOnInputLoading:e.onInputToCoinLoading,onOnInput:r[11]||(r[11]=l=>{e.toCoinAmount=l}),onOnFocus:r[12]||(r[12]=()=>{e.fixedFromCoin=!1,e.isAddCardTopPadding=!1,e.isAddCardBottomPadding=!0}),onOnSelect:r[13]||(r[13]=l=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","input-disabled","swap-loading","onOnInputLoading"]),c("div",{class:"sui-exchange",onClick:r[14]||(r[14]=(...l)=>e.debounceClickExchange&&e.debounceClickExchange(...l))},ns)],2)]),c("div",{class:te(["btn-info",!e.notFoundRouter&&e.fromCoin&&e.toCoin&&!e.insufficientLiquidity?"":"no-border"])},[V(ve,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((i=e.poolInfo)==null?void 0:i.is_pause)||e.swapRouterLoading:!1,class:"big-btn swap-btn",loading:e.swaping,onClick:r[15]||(r[15]=l=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:z(()=>[e.wallet.connected?(b(),F("svg",ss,ts)):I("",!0),c("span",null,x(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),e.chainName=="Sui"&&!e.notFoundRouter&&e.fromCoin&&e.toCoin&&!e.insufficientLiquidity?(b(),L(U,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"form-coin-market":e.formCoinMarket,"to-coin-market":e.toCoinMarket,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.priceImpact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","form-coin-market","to-coin-market","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):I("",!0)],2),V(ce),e.showCoinSelect?(b(),L(Ce,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:r[16]||(r[16]=l=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):I("",!0),e.isShowSwapSetting?(b(),L(ke,{key:1,onOnClose:r[17]||(r[17]=l=>e.isShowSwapSetting=!1)})):I("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(b(),F("div",us,[c("div",is,[rs,V(q,{"overlay-class-name":"price-impact-tooltip",placement:"top","arrow-point-at-center":""},{title:z(()=>[ds]),default:z(()=>[vs]),_:1})]),e.fromCoin&&e.formCoinMarket?(b(),L($,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):I("",!0),e.toCoin&&e.toCoinMarket?(b(),L($,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):I("",!0)])):I("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(b(),L(f,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):I("",!0),e.isShowRouterModal?(b(),L(H,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:r[18]||(r[18]=l=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):I("",!0),e.isSwapConfirmMpdal?(b(),L(N,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.priceImpact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):I("",!0),e.isShowAggregatorModal?(b(),L(K,{key:6,onClose:r[19]||(r[19]=l=>e.isShowAggregatorModal=!1),onModalConfirm:r[20]||(r[20]=l=>{e.modalConfirm(l)})})):I("",!0)])}const Ds=ja(Hn,[["render",cs],["__scopeId","data-v-a7e535a5"]]);export{Ds as default};
