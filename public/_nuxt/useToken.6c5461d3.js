import{u as g}from"./token.93418b41.js";import{O as p,c as F,g as S}from"./index.694cb687.js";import{u as v,f as L}from"./fetchFun.3536bfb9.js";import{a1 as O,m as k}from"./entry.969cd3b1.js";function w(){const{$localforage:s}=O();return{setLocalForage:(e,n)=>{s.setItem(e,n).then(()=>{console.log(`${e} saved to localforage.`)}).catch(r=>{console.error(`Failed to save ${e}:`,r)})},getLocalForage:e=>s.getItem(e).then(n=>n).catch(n=>{console.error(`Failed to load ${e}:`,n)})}}const K="POOL_LIST",i="TOKEN_LIST";function b(){const{setLocalForage:s,getLocalForage:l}=w(),u=v(),{setAllTokensList:e,allTokensList:n}=g(),r=g(),m=k(()=>r),a=k(()=>m.value.allTokensObj),h=async()=>{const o=await L("/data/coins_info.json");return(o==null?void 0:o.list)||[]},d=async()=>{try{const o=await L(`${S.Sui.api}/v2/sui/coins_info`);if(!(o!=null&&o.list))throw Error("fetchTokenList list is null");return o==null?void 0:o.list}catch{try{const t=await l(i);if((t==null?void 0:t.length)>0)return t;throw new Error(`LocalForage have not ${i} data`)}catch(t){return console.log("ðŸš€ ~ file: useToken.ts:43 ~ fetchTokenList ~ err:",t),await h()}}},f=async()=>{const o=await d();o&&(e(o),s(i,o))},T=async o=>{const t=await u.clmmSdk.CetusConfig.getTokenListByCoinTypes([o]);if(t)return Object.values(t)[0]};return{getTokenList:f,getToken:async o=>{var c;const t=(c=p(o))==null?void 0:c.full_address;return a.value&&F(a.value)&&f(),a.value[t]?a.value[t]:await T(t)},getTokenBySdk:T}}export{K as P,w as a,b as u};
