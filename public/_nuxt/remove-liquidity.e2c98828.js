import{_ as ro}from"./back.028c7b32.js";import{_ as mo}from"./coin-pair-name.c1df6494.js";import{_ as vo}from"./status-block.5b017e67.js";import{_ as co}from"./swap-setting.dc4bad8c.js";import{a as po,J as fo,r as u,E as ho,v as I,K as Io,F as ko,aj as bo,z as _o,w as L,s as wo,ad as S,O as r,i as yo,P as z,Z as go,U as Q,aL as So,b as Co,o as k,e as O,l as b,f as e,t as s,q as Y,c as x,h as oo,$ as $o,a0 as No,y as eo,m as qo,A as Ao,C as To,I as Po,aM as Bo,B as Ro,p as Lo,j as Oo,a3 as Vo}from"./entry.22130561.js";import{p as Uo}from"./precision.ce0280e5.js";const jo=po({setup(){const{t:o,locale:d}=fo();let J=u(!1),_=u(!1);const $=u(!1),K=()=>{T(),$.value=!0,setTimeout(()=>{$.value=!1},1e3)},V=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],U=ho(),N=u(""),q=u(""),A=u(""),t=I(()=>U),a=u({}),l=u({}),n=u(t.value.currentPositionInfo||{}),j=Io(),w=I(()=>j),y=ko();bo(()=>{w.value.connected||y.push("/position-list")});const M=_o(),T=async()=>{t.value.setCurrentPositionLoading(!0);const i=y.currentRoute.value.query.token||"",p=y.currentRoute.value.query.collect||"";i&&p&&(N.value=p,q.value=y.currentRoute.value.query.address,A.value=i,t.value.setCurrentPositionInfo(q.value,N.value,A.value),n.value=t.value.currentPositionInfo)};L(()=>t.value.addressLpTokens,i=>{i&&T()},{immediate:!0}),L(()=>t.value.currentPositionInfo,i=>{i&&(n.value=t.value.currentPositionInfo,a.value=n.value.token_a,l.value=n.value.token_b,F({value:c.value/100}))});const c=u(50),m=u(0),v=u(0),W=u(0),D=wo(),no=I(()=>D),E=I(()=>D.slippage);L(c,i=>{i&&n.value&&(c.value=Math.ceil(i),F({value:c.value/100}))}),L(E,i=>{i&&n.value&&F({value:c.value/100})});const F=i=>{c.value=i.value*100;const p=n.value.token_a.decimals,B=n.value.token_b.decimals,R=n.value.tick_lower_index,h=n.value.tick_upper_index,X=Q.tickIndexToSqrtPriceX64(R),f=Q.tickIndexToSqrtPriceX64(h);W.value=n.value.liquidity*Number(i.value);const g=So.getCoinAmountFromLiquidity(new z(W.value),new z(n.value.current_sqrt_price),X,f,!0),H=Number(g.coinA.toString())/Math.pow(10,p),uo=Number(g.coinB.toString())/Math.pow(10,B);m.value=H,v.value=uo},{setIsShowSuccess:so,setIsShowRejected:Z,setIsShowWaiting:P,setTransactionDesc:io,setTransactionTxid:G,setPositiomNum:Ae}=D,to=async()=>{var i,p,B,R;_.value=!0,G(""),io(o("tips.removeLiquidiyText",{from:r(m.value,a.value.decimals)==0?"":`${S(r(m.value,a.value.decimals))} ${a.value.symbol}`,and:r(m.value,a.value.decimals)==0||r(v.value,l.value.decimals)==0?"":"and",to:r(v.value,l.value.decimals)==0?"":`${S(r(v.value,l.value.decimals))} ${l.value.symbol}`})),P(!0);try{const h=u({});h.value={pool:{...n.value.poolInfo,coinA:n.value.token_a,coinB:n.value.token_b},position:n.value,delta_liquidity:new z(go(W.value,0)),slippage:Number(E.value)};const X=await M.getRemoveLiquidityTransactionPayload(h.value);let f;if(f=await w.value.currentWallet.signAndSubmitTransaction(X),f&&f.hash){G(f.hash),P(!1),so(!0);const g={title:o("common.removeLiquidity"),desc:o("tips.removeSuccessText",{from:r(m.value,a.value.decimals)==0?"":`${S(r(m.value,a.value.decimals))} ${a.value.symbol}`,and:r(m.value,a.value.decimals)==0||r(v.value,l.value.decimals)==0?"":"and",to:r(v.value,l.value.decimals)==0?"":`${S(r(v.value,l.value.decimals))} ${l.value.symbol}`}),hash:f.hash,descTransactions:`Remove ${m.value} ${(i=a.value)==null?void 0:i.symbol} and ${v.value} ${(p=l.value)==null?void 0:p.symbol} 
             from the pool`,sender:w.value.address,chainName:no.value.chainName,tit:`${c.value==100?"Closed":"Modified"} Position: ${n.value.poolInfo.symbol}`,text:`Withdraw ${m.value} ${(B=a.value)==null?void 0:B.symbol} and ${v.value} ${(R=l.value)==null?void 0:R.symbol}`};M.showTransitionPending(g),await M.watchTransaction(g)&&(setTimeout(()=>{T()},3e3),setTimeout(()=>{T()},6e3),Number(c.value)==100&&y.push("/position-list"))}else P(!1),Z(!0);_.value=!1}catch(h){console.log("Remove error",h),_.value=!1,P(!1),Z(!0)}},ao=I(()=>t.value.tokensObj&&a.value.address&&t.value.tokensObj[a.value.address]&&t.value.tokensObj[a.value.address].logoURI),lo=I(()=>t.value.tokensObj&&l.value.address&&t.value.tokensObj[l.value.address]&&t.value.tokensObj[l.value.address].logoURI);return{showNum:S,fromCoinUrl:ao,toCoinUrl:lo,precision:Uo,addCommom:r,loading:_,wallet:w,toRemove:to,fromCoinAmount:m,toCoinAmount:v,pools:t,refresh:$,amountArr:V,sliderVal:c,positionInfo:n,slippage:E,importIcon:yo,clickRefresh:K,isShowSwapSetting:J}}});const C=o=>(Lo("data-v-d1e20d83"),o=o(),Oo(),o),Mo={class:"remove-liquidity"},Wo={class:"remove-liquidity-top"},Do={class:"remove-title"},Eo={class:"right title-right"},Fo=C(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Xo=C(()=>e("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),zo=[Xo],Jo={class:"remove-liquidity-center"},Ko={class:"top"},Zo={class:"left"},Go={class:"right"},Ho={class:"fee"},Qo={class:"bottom"},Yo={class:"add-amount"},xo={class:"add-amount-header"},oe={class:"amount-list"},ee=["onClick"],ne={class:"slider-box"},se={class:"receive"},ie={class:"receiveTit"},te={class:"item"},ae={class:"left"},le=["src"],ue={class:"right"},de={class:"item"},re={class:"left"},me=["src"],ve={class:"right"},ce={class:"induction remove-liquidity-bottom"},pe={class:"item"},fe={class:"induction-text"},he={class:"induction-value"},Ie={class:"item"},ke=C(()=>e("div",{class:"induction-text"},null,-1)),be={class:"induction-value"},_e={class:"item"},we={class:"induction-text"},ye={class:"induction-value"},ge={class:"item"},Se=C(()=>e("div",{class:"induction-text"},null,-1)),Ce={class:"induction-value"},$e=C(()=>e("svg",{"aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-Remove"})],-1)),Ne={class:"loading-global"};function qe(o,d,J,_,$,K){const V=ro,U=mo,N=vo,q=Po,A=Bo,t=Ro,a=co,l=Vo;return k(),O("div",Mo,[b(V),e("div",Wo,[e("div",Do,s(o.$t("common.removeLiquidity")),1),e("div",Eo,[e("div",{class:"slippage-icon",onClick:d[0]||(d[0]=n=>o.isShowSwapSetting=!0)},[Fo,e("span",null,s(o.slippage)+"%",1)]),(k(),O("svg",{"aria-hidden":"true",class:Y(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:d[1]||(d[1]=(...n)=>o.clickRefresh&&o.clickRefresh(...n))},zo,2))])]),e("div",Jo,[e("div",Ko,[e("div",Zo,[o.positionInfo?(k(),x(U,{key:0,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b},null,8,["from-coin","to-coin"])):oo("",!0),e("div",Go,[e("div",Ho,s(o.positionInfo.fee)+"%",1)])]),b(N,{"current-status":o.positionInfo.currentStatus||""},null,8,["current-status"])]),e("div",Qo,[e("div",Yo,[e("div",xo,[e("span",null,s(o.$t("common.amount")),1),e("div",oe,[(k(!0),O($o,null,No(o.amountArr,(n,j)=>(k(),O("div",{key:j,class:Y(["amount-item",o.sliderVal==n.value?"amount-item-active":""]),onClick:w=>o.sliderVal=n.value},s(n.name),11,ee))),128))])]),e("div",ne,[b(q,{value:o.sliderVal,"onUpdate:value":d[2]||(d[2]=n=>o.sliderVal=n),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),b(A,{value:o.sliderVal,"onUpdate:value":d[3]||(d[3]=n=>o.sliderVal=n)},null,8,["value"])])])])]),e("div",se,[e("div",ie,s(o.$t("newAdd.receive")),1),e("div",te,[e("div",ae,[e("img",{src:o.fromCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,le),eo(" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)]),e("div",ue,s(o.showNum(o.addCommom(o.fromCoinAmount,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals))),1)]),e("div",de,[e("div",re,[e("img",{src:o.toCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,me),eo(" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)]),e("div",ve,s(o.showNum(o.addCommom(o.toCoinAmount,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals))),1)])]),e("div",ce,[e("div",pe,[e("div",fe,s(o.$t("common.liquidity")),1),e("div",he,s(o.showNum(o.positionInfo.amountA))+" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" \u2192 "+s(o.showNum(o.addCommom(o.precision.minus(Number(o.positionInfo.amountA),Number(o.fromCoinAmount)),o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)))+" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)]),e("div",Ie,[ke,e("div",be,s(o.showNum(o.positionInfo.amountB))+" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" \u2192 "+s(o.showNum(o.addCommom(o.precision.minus(Number(o.positionInfo.amountB),Number(o.toCoinAmount)),o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)))+" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)]),e("div",_e,[e("div",we,s(o.$t("common.feesEarned")),1),e("div",ye,s(o.addCommom(o.positionInfo&&o.positionInfo.feeOwedA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)==0?0:o.showNum(o.addCommom(o.positionInfo&&o.positionInfo.feeOwedA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)))+" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)]),e("div",ge,[Se,e("div",Ce,s(o.addCommom(o.positionInfo&&o.positionInfo.feeOwedB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)==0?0:o.showNum(o.addCommom(o.positionInfo&&o.positionInfo.feeOwedB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)))+" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])]),b(t,{disabled:o.wallet.connected?Number(o.sliderVal)==0||o.loading:!1,class:"remove-btn big-btn",onClick:d[4]||(d[4]=n=>o.wallet.connected?o.toRemove():o.wallet.setIsShowWalletModal(!0))},{default:qo(()=>[$e,e("span",null,s(o.wallet.connected?o.$t("button.remove"):o.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),o.isShowSwapSetting?(k(),x(a,{key:0,onOnClose:d[5]||(d[5]=n=>o.isShowSwapSetting=!1)})):oo("",!0),Ao(e("div",Ne,[b(l)],512),[[To,o.pools.currentPositionLoading]])])}const Ve=Co(jo,[["render",qe],["__scopeId","data-v-d1e20d83"]]);export{Ve as default};
