import{_ as wa}from"./token-warning.2795a8d7.js";import{m as b,N as Da,a5 as Fa,r as g,E as ja,D as ae,a as ce,q as Ht,o as u,f as y,h as e,t as ne,i as N,v as o,x as D,u as a,G as ct,z as Q,J as wt,p as Te,k as Ie,e as de,c as F,w as j,j as H,Y as Zt,I as Qt,B as st,a2 as pt,a3 as za,l as Wa,y as Va,C as Ya,a7 as qt,b as qa,f9 as ra,Z as Ja,K as Xt,H as Jt,F as G,s as He,L as ea,A as Ka,$ as Ga}from"./entry.431efe71.js";/* empty css              */import"./decimal.a2826370.js";import{c as Ae,U as ua,V as fe,s as qe,b as A,W as ca,p as da,q as Ke,m as ta}from"./index.5e61be46.js";import{u as $t,a as _t,b as Bt}from"./pool.99bcacdb.js";import{_ as Za}from"./token-warning-modal.e9939757.js";/* empty css              *//* empty css              */import{_ as Qa}from"./refresh-icon.c455e54f.js";import{c as U,v as Xa,s as es,u as Be,ak as ts,aj as Tt}from"./index.3f649e82.js";import{_ as as}from"./coin-select.e9cbe97f.js";import{D as h}from"./decimal.765d8738.js";import{U as $a}from"./underline-tab.8097af69.js";import{N as va}from"./new-assets-card.fca6ef30.js";import{I as ss}from"./icon-tooltip.141ed00a.js";import{B as _a}from"./bignumber.266e6c56.js";import{_ as ls}from"./img-no-Positions_2x.30f09ca6.js";import{_ as ns}from"./img-connect-wallet_2x.d441b4ca.js";import{S as is}from"./data.712deea2.js";/* empty css              */const os=""+globalThis.__publicAssetsURL("sui-image/img-no-data@2x.png");function Ue(t){const c={fullRpcUrl:localStorage.getItem(`${t}-currentRpclocal2`)||U[t||"Sui"].fullRpcUrl,simulationAccount:U[t||"Sui"].simulationAccount,cetus_config:U[t||"Sui"].cetus_config,clmm_pool:U[t||"Sui"].clmm_pool,integrate:U[t||"Sui"].integrate,deepbook:U[t||"Sui"].deepbook,deepbook_endpoint_v2:U[t||"Sui"].deepbook_endpoint_v2,aggregatorUrl:U[t||"Sui"].aggregatorUrl,swapCountUrl:U[t||"Sui"].swapCountUrl},l={launchpad:U[t||"Sui"].launchpad,ido:U[t||"Sui"].ido,xcetus:U[t||"Sui"].xcetus,xcetus_dividends:U[t||"Sui"].xcetus_dividends,cetus_faucet:U[t||"Sui"].cetus_faucet,xtoken:U[t||"Sui"].xtoken,xtoken_dividends:U[t||"Sui"].xtoken_dividends,token_faucet:U[t||"Sui"].token_faucet,booster:U[t||"Sui"].booster,maker_bonus:U[t||"Sui"].maker_bonus,liquidity_stratefy:U[t||"Sui"].liquidity_stratefy,vaults:U[t||"Sui"].vaults,frams:U[t||"Sui"].frams,limit_order:U[t||"Sui"].limit_order};console.log("defaultNetworkOptions####",c);const _=new Xa(c),f=new es(l,_),$=Be(),m=b(()=>$);Da(()=>{m.value.address&&(_.senderAddress=m.value.address)});const v=async()=>await f.LimitOrder.getLimitOrderTokenList(),n=async()=>await f.LimitOrder.getLimitOrderPoolList(),C=async()=>{try{return await f.LimitOrder.getOwnerLimitOrderList(f.ClmmSDK.senderAddress,"all")}catch(x){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useLimitOrder.ts:71 ~ getOwnerLimitOrderList ~ error:",x)}},r=x=>({transactionBlock:x,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),i=async x=>{const{pay_coin_amount:k,price:M,expired_ts:z,pay_coin_type:L,target_coin_type:X,pay_decimal:re,target_decimal:ue}=x,ge=new h(k).mul(Math.pow(10,re)).toNumber();console.log("useLimitOrder placeLimitOrder params##",x);const ee=await f.LimitOrder.placeLimitOrder({pay_coin_amount:ge,price:M,expired_ts:z,pay_coin_type:L=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":L,target_coin_type:X=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":X,pay_decimal:re,target_decimal:ue});return console.log("useLimitOrder placeLimitOrder payload##",ee),r(ee)},I=async x=>{console.log("cancelOrdersByOwner params",x);const k=await f.LimitOrder.cancelOrdersByOwner(x);return r(k)},T=async x=>await f.LimitOrder.getLimitOrderLogs(x),d=async x=>{const k=await f.LimitOrder.claimTargetCoin({order_id:x.order_id,pay_coin_type:x.pay_coin_type,target_coin_type:x.target_coin_type});return r(k)},O=async x=>await f.LimitOrder.getLimitOrderClaimLogs(x);return{getLimitOrderTokenList:v,getLimitOrderPoolList:n,getOwnerLimitOrderList:C,placeLimitOrder:i,rateToPrice:ts.rateToPrice,cancelOrdersByOwner:I,getLimitOrderLogs:T,claimTargetCoin:d,getLimitOrderClaimLogs:O}}const It="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Me=Fa("LimitOrder",{state:()=>({limitTokenList:[],limitTokenObj:{},limitOrderPoolList:[],limitOrderList:[],orderNum:0,orderListLoading:!1,limitTokenMinAmountObj:{},limitOrderHistoryList:[],historyNum:0,orderHistoryObj:{},cancelOrderId:"",orderHistoryLoading:!1,currentOrderClaimHistory:[],claimHistoryLoading:!0,RATES:{},marketPriceLoading:!0,haveMarket:!0,isShowChart:JSON.parse(localStorage.getItem("isShowChart"))||!1}),actions:{async getTokenMinAmount(){const c=await Ue("Sui").getLimitOrderTokenList();this.limitTokenMinAmountObj=Object.fromEntries(c.map((l,_)=>[l.coin_type==It?"0x2::sui::SUI":l.coin_type,l])),console.log(c,"store limitorder getLimitgetTokenMinAmount###")},async getPoolList(){const c=await Ue("Sui").getLimitOrderPoolList();this.limitOrderPoolList=c.map(l=>({indexer_id:l.indexer_id,pay_coin_type:l.pay_coin_type==It?"0x2::sui::SUI":l.pay_coin_type,target_coin_type:l.target_coin_type==It?"0x2::sui::SUI":l.target_coin_type})),console.log(c,"store limitorder getLimitOrderPoolList###")},async getOrderList(){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:42 ~ getOrderList ~ getOrderList:");const t=Ue("Sui");this.orderListLoading=!0;try{const c=await t.getOwnerLimitOrderList();console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:46 ~ getOrderList ~ result:",c);const l=c.data.filter(_=>_.status=="PartialCompleted"||_.status=="Running")||[];this.limitOrderList=l.sort((_,f)=>f.created_ts-_.created_ts),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:52 ~ getOrderList ~ this.limitOrderList:",this.limitOrderList),this.orderListLoading=!1,this.cancelOrderId=""}catch(c){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:53 ~ getOrderList ~ e:",c),this.orderListLoading=!1,this.cancelOrderId=""}},async getTokenList(){const c=(await fetch(`${U.Sui.api}/v2/sui/coin_metadata`,{method:"POST",body:JSON.stringify({})}).then(l=>l.json())).data.list||[];this.limitTokenList=c,this.limitTokenObj=Object.fromEntries(c.map((l,_)=>[l.coin_type==It?"0x2::sui::SUI":l.coin_type,l])),console.log(c,"store limitorder getLimitOrderTokenList###")},async getLimitOrderLogs(){},async getLimitOrderHistory(t){this.orderHistoryLoading=!0;const{data:c}=await fetch(`${U.Sui.api}/v2/sui/limit_order?wallet_address=${t}`).then(_=>_.json()),l=c.list||[];this.limitOrderHistoryList=l||[],this.orderHistoryLoading=!1},async getLimitOrderClaimHistory(t){this.currentOrderClaimHistory=[],this.claimHistoryLoading=!0;const l=await Ue("Sui").getLimitOrderClaimLogs(t.id);this.currentOrderClaimHistory=l.map(_=>{const f=new h(_.parsedJson.claimed_amount).div(Math.pow(10,t.target_coin_info.decimals));return{..._,..._.parsedJson,claimed_amount:f}}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:105 ~ getLimitOrderClaimHistory ~ currentOrderClaimHistory:",this.currentOrderClaimHistory),this.claimHistoryLoading=!1},setOrderNum(t){this.orderNum=t},setHistoryNum(t){this.historyNum=t},setLimitOrderLoading(t){this.cancelOrderId=t},async setRates(t){this.marketPriceLoading=!0;let c={};if(t&&t.includes("Sui"))try{c=await $fetch(`${U.Sui.api}/v2/sui/price`)}catch(f){console.log("sui pric api error ###",f),c={data:{prices:is}}}else c=await $fetch(`${U.Aptos.api}/v2/price`);const l=c.data.prices||[],_=[];l.forEach(f=>{f.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?_.push({...f},{...f,base_symbol:"0x2::sui::SUI"}):_.push(f)}),this.RATES=Object.fromEntries(_.map(f=>[f.base_symbol,f])),this.marketPriceLoading=!1},setHaveMarket(t){this.haveMarket=t},setIsShowChart(t){localStorage.setItem("isShowChart",JSON.stringify(t)),this.isShowChart=t},limitOrderLogOut(){this.limitOrderHistoryList=[],this.limitOrderList=[]}}}),w=g(),S=g(),rs=$t(),Sa=b(()=>rs),xa=_t(),us=b(()=>xa),ma=b(()=>us.value.chainName),Le=Bt("Sui"),cs=ja(),ka=g(!0);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:53 ~ route:",cs);ae(()=>[Sa.value.tokensObj,ka.value],async([t,c])=>{if(!Ae(t)){const l=ua("from"),_=ua("to");console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:61 ~ routerCoinTo:",l,_),l&&_?w.value=t[l]||await Le.getTokenBySymbol(t,l):!l&&!w.value&&(w.value=t[U[ma.value].swapDefaultPair.fromCoin]),l&&_?S.value=t[_]||await Le.getTokenBySymbol(t,_):!_&&!S.value&&(S.value=t[U[ma.value].swapDefaultPair.toCoin])}},{});const{setTransactionTxid:ds,setIsShowWaiting:Mt,setIsShowSuccess:vs,setIsShowRejected:pa,setTransactionDesc:_s}=xa,fa=g(!1),at=Me(),aa=b(()=>at),ms=b(()=>aa.value.limitOrderList),ps=Be(),Gt=b(()=>ps),sa=async(t,c=!1)=>{const l=Ue("Sui");try{_s("Canceling order"),Mt(!0);const f=c?ms.value.map(n=>({order_id:n.id,pay_coin_type:n.pay_coin_type,target_coin_type:n.target_coin_type})):[{order_id:t.id,pay_coin_type:t.pay_coin_type,target_coin_type:t.target_coin_type}];at.setLimitOrderLoading(c?"all":t.id),console.log("cacelLimitOrder parmas",f);const $=await l.cancelOrdersByOwner(f),m=await Le.signAndExecuteTransactionBlock(Gt.value.currentWallet,$),v=Le.handleTx(m);if(v&&v.hash){ds(v.hash),Mt(!1),vs(!0),fa.value=!1;const n={title:"Transaction",desc:"Order cancelled successfully",hash:v.hash,icon:"icon-icon-Increased"};n.res=v.res,Le.showTransitionPending(n),await Le.watchTransaction(n)&&setTimeout(()=>{Le.getAccount(Gt.value.address),at.getOrderList()},2e3)}else Mt(!1),pa(!0),at.setLimitOrderLoading("")}catch(_){Mt(!1),pa(!0),fa.value=!1,at.setLimitOrderLoading(""),console.log("trade-data.ts cancel error##",_)}},ga=g(!1),W=g(!0),E=g(),P=g();function ha(){ga.value=!0;const t=w.value;w.value=S.value,S.value=t,W.value=!W.value;const c=E.value,l=P.value;W.value?(E.value=P.value,P.value=c):(P.value=E.value,E.value=l),setTimeout(()=>{ga.value=!1},300)}ae(()=>ka.value,()=>{E.value="",P.value=""},{immediate:!0});const ot=g("orders"),gt=g(1),Et=g(10),K=g([]),ht=g([]),fs=g(1),rt=g(),ft=b(()=>aa.value.limitOrderList),Rt=b(()=>Sa.value.tokensObj),gs=Ue("Sui"),ut=g(),hs=t=>{ut.value={...ut.value,[t.id]:t}},Kt=g(!1),ya=b(()=>aa.value.cancelOrderId),ys=async()=>{const t=Et.value*gt.value-Et.value;let c=gt.value*Et.value;c=c>ft.value.length?ft.value.length:c;const l=ft.value;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:147 ~ updateOrderList ~ ordersList.value:",ft.value),console.log("trade-card updateOrderList tokenObj",Rt.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:257 ~ updateOrderList ~ orderDirectObj.value:",ut.value),l.length>0){const _=[],f=l.filter((m,v)=>v>=t&&v<c);for(let m=0;m<f.length;m++){const v=f[m];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:176 ~ updateOrderList ~ order.pay_coin_type:",await Le.getTokenListByCoinType[v.pay_coin_type]);const n=Rt.value[v.pay_coin_type]||(await Le.getTokenListByCoinType([v.pay_coin_type]))[0],C=Rt.value[v.target_coin_type]||(await Le.getTokenListByCoinType([v.target_coin_type]))[0];console.log(v,"order###"),console.log(n.decimals,"##pay_coin_info.decimals");const r=fe(gs.rateToPrice(v.rate,n.decimals,C.decimals).toString(),n.decimals),i=new h(v.total_pay_amount).div(Math.pow(10,n.decimals)).toString(),I=new h(v.total_pay_amount).mul(new h(Math.pow(10,18))).div(new h(v.rate)).ceil().div(new h(Math.pow(10,C.decimals))).toString(),T=new h(v.total_pay_amount).mul(new h(r)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:166 ~ updateOrderList ~ totalBuyNum:",I,T);const d=new h(v.obtained_amount).div(Math.pow(10,C.decimals)).toString(),O=qe(new h(d).div(new h(I)).mul(100).toString(),2),x=new h(v.target_balance).div(Math.pow(10,C.decimals)).toString(),k=fe(new h(1).div(new h(r)).toString());console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:217 ~ updateOrderList ~ new Decimal(1).div(new Decimal(rate)).toString():",new h(1).div(new h(r)).toString()),_.push({...v,pay_coin_info:n,target_coin_info:C,total_pay_amount:i,rate:r,totalBuyNum:I,obtained_amount:d,obtainedRatio:O,target_balance:x,reseverRate:k,direction:ut.value&&ut.value[v.id]&&ut.value[v.id].direction||!1})}K.value=_,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:255 ~ updateOrderList ~ pageList.value:",K.value),fs.value==1;const $=_.filter(m=>{var v;return m.id==((v=rt==null?void 0:rt.value)==null?void 0:v.id)});rt.value=$&&$.length>0?$[0]:""}ht.value=l,at.setOrderNum(l.length),console.log("allList",ht.value),console.log("pageList",K.value)};ae(()=>[ft.value,gt.value,Rt.value,Gt.value.address],([t,c,l,_])=>{t&&t.length>0&&l&&!Ae(l)&&_?ys():(K.value=[],ht.value=[],at.setOrderNum(0))},{immediate:!0});const bs=t=>(Te("data-v-840fa60d"),t=t(),Ie(),t),ws={class:"switch-direction"},$s={class:"left"},Ss={key:0,class:"token-info"},xs={key:0},ks={key:1,class:"token-info"},Cs={alt:""},Os={alt:""},Ls={key:0,class:"chart-no-data"},Ts=bs(()=>e("img",{src:os,alt:""},null,-1)),Is={class:"iframe-box"},Ms=["src","onload"],Ns=ce({__name:"trade-chart",setup(t){const c=g(!0);g(!0),g(),g(),g();const l=Me(),_=b(()=>l);b(()=>_.value.RATES),b(()=>_.value.marketPriceLoading);const f=b(()=>_.value.haveMarket);g(),g();const $=_t(),m=b(()=>$),v=b(()=>m.value.addressLpTokens),n=$t(),C=b(()=>n),r=b(()=>C.value.openPool),i=g(),I=()=>{var d;const T=[];if((d=r==null?void 0:r.value)==null||d.forEach(O=>{var x,k,M,z,L,X,re,ue;if(O.coinA.address.toUpperCase()===((k=(x=w==null?void 0:w.value)==null?void 0:x.address)==null?void 0:k.toUpperCase())&&O.coinB.address.toUpperCase()===((z=(M=S==null?void 0:S.value)==null?void 0:M.address)==null?void 0:z.toUpperCase())||O.coinB.address.toUpperCase()===((X=(L=w==null?void 0:w.value)==null?void 0:L.address)==null?void 0:X.toUpperCase())&&O.coinA.address.toUpperCase()===((ue=(re=S==null?void 0:S.value)==null?void 0:re.address)==null?void 0:ue.toUpperCase())){const ge=(v==null?void 0:v.value[O.address])||{};ge&&!Ae(ge)&&T.push({...O,pure_tvl_in_usd:ge.pure_tvl_in_usd})}}),T&&T.length>0){const O=T.sort((x,k)=>x.pure_tvl_in_usd-k.pure_tvl_in_usd)[0];return i.value=O,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-chart.vue:327 ~ poolInfo ~ result:",O),!1}i.value=null};return ae(()=>[r.value,v.value,w.value,S.value],([T,d])=>{T&&T.length>0&&d&&!Ae(d)&&I()},{immediate:!0}),(T,d)=>{var M,z,L,X,re,ue,ge,ee,Se,xe,V,se,be,he,De,Ne,ie,ve,Fe,_e,Qe,je,Xe,ke,et,ze,tt,Ee,me,le,Y,oe,pe,we,Z,ye,We,Re,kt;const O=wa,x=wt,k=Ht("image");return u(),y("div",{class:Q(["trade-chart",!c.value&&!i.value?"trade-chart-no-pool":""])},[e("div",ws,[e("div",$s,[i.value?(u(),y("div",Ss,[e("div",null,[ne(e("img",null,null,512),[[k,(M=i.value)!=null&&M.needReverse?(L=(z=i.value)==null?void 0:z.token_b)==null?void 0:L.logo_url:(re=(X=i.value)==null?void 0:X.token_a)==null?void 0:re.logo_url]]),N(O,{address:(ue=i.value)!=null&&ue.needReverse?(ee=(ge=i.value)==null?void 0:ge.token_b)==null?void 0:ee.address:(xe=(Se=i.value)==null?void 0:Se.token_a)==null?void 0:xe.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ne(e("img",null,null,512),[[k,(V=i.value)!=null&&V.needReverse?(be=(se=i.value)==null?void 0:se.token_a)==null?void 0:be.logo_url:(De=(he=i.value)==null?void 0:he.token_b)==null?void 0:De.logo_url]]),N(O,{address:(Ne=i.value)!=null&&Ne.needReverse?(ve=(ie=i.value)==null?void 0:ie.token_a)==null?void 0:ve.address:(_e=(Fe=i.value)==null?void 0:Fe.token_b)==null?void 0:_e.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),i.value?(u(),y("span",xs,o((Qe=i.value)!=null&&Qe.needReverse?(Xe=(je=i.value)==null?void 0:je.token_b)==null?void 0:Xe.symbol:(et=(ke=i.value)==null?void 0:ke.token_a)==null?void 0:et.symbol)+" / "+o((ze=i.value)!=null&&ze.needReverse?(Ee=(tt=i.value)==null?void 0:tt.token_a)==null?void 0:Ee.symbol:(le=(me=i.value)==null?void 0:me.token_b)==null?void 0:le.symbol),1)):D("",!0)])):a(w)&&a(S)?(u(),y("div",ks,[e("div",null,[ne(e("img",Cs,null,512),[[k,(Y=a(w))==null?void 0:Y.logo_url]]),N(O,{address:(oe=a(w))==null?void 0:oe.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ne(e("img",Os,null,512),[[k,(pe=a(S))==null?void 0:pe.logo_url]]),N(O,{address:(we=a(S))==null?void 0:we.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o((Z=a(w))==null?void 0:Z.symbol)+" / "+o((ye=a(S))==null?void 0:ye.symbol),1)])):D("",!0)])]),!c.value&&!i.value?(u(),y("div",Ls,[Ts,e("span",null,o(f.value?"Price chart is currently not available for this pair, but you can still place your limit orders.":"No data avaliable"),1)])):D("",!0),e("div",Is,[ne(e("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",src:`https://birdeye.so/tv-widget/${(Re=(We=i.value)==null?void 0:We.token_a)==null?void 0:Re.address}/${(kt=i.value)==null?void 0:kt.address}?chain=sui`,onload:()=>{c.value=!1}},null,8,Ms),[[ct,!c.value&&i.value]]),ne(N(x,null,null,512),[[ct,c.value]])])],2)}}});const qo=de(Ns,[["__scopeId","data-v-840fa60d"]]),Ca=t=>(Te("data-v-e096234e"),t=t(),Ie(),t),Es={class:"custom-expiry"},Rs={class:"input-box"},Ps=Ca(()=>e("div",{class:"minutes"},"Hours",-1)),As={class:"input-box"},Us=Ca(()=>e("div",{class:"minutes"},"Minutes",-1)),Hs=ce({__name:"custom-expires-modal",setup(t){const c=g(),l=g(),_=g({}),f=(n,C)=>{const r=(n||0)*60+Number(C||0),i=Math.floor(r/(60*24)),I=Math.floor(r%(60*24)/60),T=r%60;let d="";i>0&&(d+=i+"d "),I>0&&(d+=I+"h "),T>0&&(d+=T+"m "),_.value={timeText:d.trim()||"0 m",time:r*60*1e3}};ae(()=>[c.value,l.value],([n,C])=>{f(n,C)},{immediate:!0});const $=n=>{const C=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");n.target.value=n.target.value.replace(C,"$1"),c.value=n.target.value,console.log(c.value,"##inputChange")},m=n=>{const C=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");n.target.value=n.target.value.replace(C,"$1"),l.value=n.target.value},v=b(()=>!c.value&&!l.value||Number(c.value)==0&&!l.value||Number(l.value)==0&&!c.value||Number(c.value)==0&&Number(l.value)==0);return(n,C)=>{const r=Qt,i=st;return u(),F(a(Zt),{class:"new-modal-have-btn",title:"Custom Expiry Period",visible:!0,width:"440px",footer:null,onCancel:C[3]||(C[3]=I=>n.$emit("closeModal"))},{default:j(()=>[e("div",Es,[e("div",Rs,[N(r,{value:c.value,"onUpdate:value":C[0]||(C[0]=I=>c.value=I),placeholder:"0",onChange:$},null,8,["value"]),Ps]),e("div",As,[N(r,{value:l.value,"onUpdate:value":C[1]||(C[1]=I=>l.value=I),placeholder:"0",onChange:m},null,8,["value"]),Us]),N(i,{class:"set-period modal-bottom-btn",disabled:v.value,onClick:C[2]||(C[2]=I=>n.$emit("sendTime",_.value))},{default:j(()=>[H("Set Period")]),_:1},8,["disabled"])])]),_:1})}}});const Bs=de(Hs,[["__scopeId","data-v-e096234e"]]),lt=t=>(Te("data-v-bb5f9485"),t=t(),Ie(),t),Ds=lt(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Fs=[Ds],js={class:"trade-cofirm-content"},zs={class:"coin-info"},Ws={class:"from-coin-info"},Vs={class:"left"},Ys={class:"coin-amount"},qs={class:"coin-symbol"},Js={class:"right"},Ks={class:"to-coin-info"},Gs={class:"left"},Zs={class:"coin-amount"},Qs={class:"coin-symbol"},Xs={class:"right"},el=lt(()=>e("div",{class:"to-swap-logo"},null,-1)),tl={class:"trade-info"},al={class:"price"},sl=lt(()=>e("div",{class:"label"},"Pirce",-1)),ll={class:"text"},nl={key:0},il={key:1},ol=lt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),rl=[ol],ul={class:"expires-in"},cl=lt(()=>e("div",{class:"label"},"Expires in",-1)),dl={class:"text"},vl=lt(()=>e("div",{class:"trade-tips1"}," You will receive exactly what you have specified if your order is fully filled in the end. ",-1)),_l=lt(()=>e("div",{class:"trade-tips2"}," Please note that your order may not be filled immediately after the price is triggered, depending on pending sequence and liquidity depth. ",-1)),ml=ce({__name:"trade-confirm",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},direction:{type:Boolean,default:!1},price:{type:String,default:""},currentExpires:{type:String,default:""}},emits:["to-trade","close"],setup(t,{emit:c}){const l=t,_=c,f=g(!1),$=b(()=>new h(1).div(new h(l.price)).toString()),m=async()=>{_("to-trade")};return(v,n)=>{const C=st,r=Ht("image");return u(),F(a(Zt),{title:"Review your order",width:"440px",footer:null,visible:!0,class:"trade-confirm-modal new-modal-have-btn"},{closeIcon:j(()=>[(u(),y("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:n[0]||(n[0]=i=>_("close"))},Fs))]),default:j(()=>{var i,I,T,d,O,x,k,M;return[e("div",js,[e("div",zs,[e("div",Ws,[e("div",Vs,[e("div",Ys,o(t.fromCoinAmount&&a(A)(t.fromCoinAmount)),1),e("div",qs,o(t.fromCoin&&t.fromCoin.symbol),1)]),e("div",Js,[ne(e("img",null,null,512),[[r,t.fromCoin&&t.fromCoin.logo_url]])])]),e("div",Ks,[e("div",Gs,[e("div",Zs,o(t.toCoinAmount&&a(A)(t.toCoinAmount)),1),e("div",Qs,o(t.toCoin&&t.toCoin.symbol),1)]),e("div",Xs,[ne(e("img",null,null,512),[[r,t.toCoin&&t.toCoin.logo_url]])]),el])]),e("div",tl,[e("div",al,[sl,e("div",ll,[t.direction?(u(),y("span",il,o(a(A)(a(fe)(f.value?$.value:t.price,9)))+" "+o(f.value?(x=t.fromCoin)==null?void 0:x.symbol:(O=t.toCoin)==null?void 0:O.symbol)+" per "+o(f.value?(M=t.toCoin)==null?void 0:M.symbol:(k=t.fromCoin)==null?void 0:k.symbol),1)):(u(),y("span",nl,o(a(A)(a(fe)(f.value?$.value:t.price,9)))+" "+o(f.value?(I=t.toCoin)==null?void 0:I.symbol:(i=t.fromCoin)==null?void 0:i.symbol)+" per "+o(f.value?(d=t.fromCoin)==null?void 0:d.symbol:(T=t.toCoin)==null?void 0:T.symbol),1)),e("div",{class:"right",onClick:n[1]||(n[1]=z=>f.value=!f.value)},rl)])]),e("div",ul,[cl,e("div",dl,o(t.currentExpires),1)])]),vl,_l]),N(C,{class:"big-btn trade-confirm-btn modal-bottom-btn",onClick:n[2]||(n[2]=z=>m())},{default:j(()=>[H(" Place Order ")]),_:1})]}),_:1})}}});const pl=de(ml,[["__scopeId","data-v-bb5f9485"]]),Dt=t=>(Te("data-v-c4ea3f38"),t=t(),Ie(),t),fl={class:"trade-card"},gl={class:"trade-content"},hl={class:"trade-card-title"},yl={class:"tit-icon-box"},bl={class:"new-style-tooltip-text"},wl={class:"icon-bg"},$l=Dt(()=>e("use",{"xlink:href":"#icon-icon_kline"},null,-1)),Sl=[$l],xl={class:"icon-bg"},kl={class:"trade-card-content"},Cl=Ka('<div class="exchange-new" data-v-c4ea3f38><svg class="icon icon-down" aria-hidden="true" data-v-c4ea3f38><use xlink:href="#icon-icon_swap1" data-v-c4ea3f38></use></svg><svg class="icon icon-swap" aria-hidden="true" data-v-c4ea3f38><use xlink:href="#icon-tx_swap1" data-v-c4ea3f38></use></svg></div>',1),Ol=[Cl],Ll={class:"sell-setting"},Tl={class:"sell-rate"},Il={class:"top"},Ml={key:0,class:"direction-text"},Nl={key:1,class:"direction-text"},El={class:"bottom"},Rl={class:"coin-symbol"},Pl=Dt(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),Al=[Pl],Ul={class:"top"},Hl=Dt(()=>e("span",null,"Expiry in",-1)),Bl={class:"bottom"},Dl=Dt(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Fl=[Dl],jl=["onClick"],zl={class:"market-price-tips"},Wl=ce({__name:"trade-card",setup(t){const c=pt(za,{style:{fontSize:"14px",marginLeft:"4px",color:"#75c8ff"},spin:!0}),{t:l}=Wa(),_=[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}];g("Limit");const f=Be(),$=b(()=>f),m=b(()=>$.value.assets&&w.value&&$.value.assets[w.value.address]?da($.value.assets[w.value.address].balance,w.value.decimals):0),v=b(()=>$.value.assets&&S.value&&$.value.assets[S.value.address]?da($.value.assets[S.value.address].balance,S.value.decimals):0),n=p=>{p==="fromCoin"?(W.value=!0,E.value=m.value>0?w.value.symbol=="SUI"?new h(Number(m.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(m.value)).sub(new h(.05)).toString():String(m.value):""):(W.value=!1,P.value=v.value>0?S.value.symbol=="SUI"?new h(Number(v.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(v.value)).sub(new h(.05)).toString():String(v.value):"")},C=p=>{p==="fromCoin"?(W.value=!0,E.value=m.value>0?qe(new h(Number(m.value)).div(2).toString(),w.value.decimals).toString():""):(W.value=!1,P.value=v.value>0?qe(new h(Number(v.value)).div(2).toString(),S.value.decimals).toString():"")},r=g(""),i=g(""),I=g(""),T=g(!1),d=p=>{var s,B,q,te;r.value=p,p==="fromCoin"?(i.value=((s=S.value)==null?void 0:s.address)||"",I.value=((B=w.value)==null?void 0:B.address)||""):(i.value=((q=w.value)==null?void 0:q.address)||"",I.value=((te=S.value)==null?void 0:te.address)||""),T.value=!0},O=["5 Minutes","10 Minutes","30 Minutes","1 Hour","1 Day","3 Days","7 Days","1 Month","Custom"],x=p=>{switch(p){case"5 Minutes":return 3e5;case"10 Minutes":return 6e5;case"30 Minutes":return 18e5;case"1 Hour":return 36e5;case"1 Day":return 864e5;case"7 Days":return 6048e5;case"1 Month":return 2592e6;default:return 0}},k=g(!1),M=g("7 Days"),z=g(!1),L=g(),X=g(0),re=p=>{M.value=p.timeText,X.value=p.time,z.value=!1},ue=g(),ge=p=>{ue.value=r.value==="fromCoin"?w.value:S.value;let s=!1;r.value==="fromCoin"?(E.value="",S.value&&p.address.toLowerCase()===(S==null?void 0:S.value.address.toLowerCase())&&(S.value=w.value,s=!0),w.value=p):(w.value&&(P.value="",p.address.toLowerCase()===(w==null?void 0:w.value.address.toLowerCase())&&(w.value=S.value,s=!0)),S.value=p),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:416 ~ onCoinSelect ~ toCoin.value:",S.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:453 ~ onCoinSelect ~ fromCoin.value:",w.value),s||(Y.value=!1),T.value=!1},ee=g(20),Se=g(0),xe=g(null),V=g(!1),se=()=>{V.value||(clearInterval(xe.value),$.value.address&&(_e.getOrderList(),me.getAccount($.value.address)),pe.value||Z.value?zt():Ct(!1),Se.value=0,V.value=!0,setTimeout(()=>{V.value=!1,be()},1e3))},be=()=>{xe.value=setInterval(()=>{V.value=!1,Se.value<ee.value&&(Se.value+=1,Se.value===ee.value&&se())},1e3)};Va(()=>{be(),window.addEventListener("click",()=>{k.value=!1})}),Ya(()=>{clearInterval(xe.value)});const he=()=>{if(W.value&&(!E.value||E.value==0)||!W.value&&(!P.value||P.value==0))return!1;if(L.value<=0&&it.value)return W.value?P.value="":E.value="",!1;if(Number(E.value)<=0&&Number(P.value)<=0)return!1;if(L.value<=0&&!it.value&&E.value>0&&P.value>0)return console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:480 ~ updateAmounts ~ fromCoinAmount.value&&toCoinAmount.value:",E.value>0&&P.value>0),L.value=Y.value?fe(new h(P.value||0).div(new h(E.value||0)).toString()):fe(new h(E.value||0).div(new h(P.value||0)).toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:497 ~ updateAmounts ~ fixedFromCoin.value :",W.value),!1;if(L.value<=0&&!it.value)return!1;W.value?Y.value?P.value=qe(new h(E.value).mul(new h(L.value||0)).toString(),S.value.decimals):P.value=qe(new h(E.value).div(new h(L.value||0)).toString(),S.value.decimals):Y.value?E.value=qe(new h(P.value).div(new h(L.value||0)).toString(),w.value.decimals):E.value=qe(new h(P.value).mul(new h(L.value||0)).toString(),w.value.decimals)};ae(E,qt((p,s)=>{p&&p!==0&&W.value&&he(),p==""&&W.value&&(P.value="")},100)),ae(L,qt((p,s)=>{p&&p!==0&&he(),p==""&&W.value&&(P.value="")},100)),ae(P,qt((p,s)=>{p&&p!==0&&!W.value&&he(),p==""&&!W.value&&(E.value="")},100));const De=$t(),Ne=b(()=>De),ie=b(()=>{var q;const s=(q=Ne.value.RATES[w.value.address])==null?void 0:q.price,B=new h(s||0).mul(E.value||0).toNumber();if(s){if(B<5&&s)return!0}else return!1;return!1}),ve=b(()=>!w.value||!S.value?l("modal.selectTokenModalTitle"):Re.value?!Number(E.value)||!Number(P.value)?l("button.enterAmount"):ie.value?"Order size should be higher than $5":Number(E.value)>Number(m.value)?l("button.insufficientBalance",{name:w.value.symbol}):"Place Limit Order":"No Available Route"),Fe=b(()=>!!(!w.value||!S.value||!L.value||ie.value||!Number(E.value)&&!Number(P.value)||Number(E.value)>Number(m.value)||Number(E.value)==0||Number(P.value)==0||!Re.value)),_e=Me(),Qe=b(()=>_e),je=_t(),{setTransactionTxid:Xe,setIsShowWaiting:ke,setIsShowSuccess:et,setIsShowRejected:ze,setTransactionDesc:tt}=je,Ee=g(!1),me=Bt("Sui"),le=async()=>{Lt.value=!1;const p=Ue("Sui"),s=Date.parse(new Date().toString())+(x(M.value)||X.value);try{tt("Creating order"),ke(!0);const q={pay_coin_amount:E.value,price:Y.value?L.value:new h(1).div(new h(L.value)).toString(),expired_ts:s,pay_coin_type:w.value.address,target_coin_type:S.value.address,pay_decimal:w.value.decimals,target_decimal:S.value.decimals};console.log("placeLimitOrder parmas",q);const te=await p.placeLimitOrder(q),mt=await me.signAndExecuteTransactionBlock($.value.currentWallet,te),Ce=me.handleTx(mt);if(Ce&&Ce.hash){Xe(Ce.hash),ke(!1),et(!0),Ee.value=!1;const Pe={title:"Transaction",desc:"Order placed successfully",hash:Ce.hash,icon:"icon-icon-Increased"};Pe.res=Ce.res,me.showTransitionPending(Pe),await me.watchTransaction(Pe)&&setTimeout(()=>{me.getAccount($.value.address),_e.getOrderList()},1e3)}else ke(!1),ze(!0)}catch(B){ke(!1),ze(!0),Ee.value=!1,console.log("trade-card openOrder error##",B)}},Y=g(!1),oe=g(),pe=g(""),we=g(),Z=g("0"),ye=g(""),We=g(),Re=g(!0),kt=async()=>{var B,q;let p;if(W.value){const te=new h(1).mul(Math.pow(10,(B=w==null?void 0:w.value)==null?void 0:B.decimals)).toString();p=new _a(te)}else{const te=new h(1).mul(Math.pow(10,(q=S==null?void 0:S.value)==null?void 0:q.decimals)).toString();p=new _a(te)}const s=await me.getBestRouterByServer(w,S,p,W.value,$.value.address,!1,!1);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:805 ~ getTokenRouter ~ res:",s),s&&s.splitPaths&&s.splitPaths.length>0?(Re.value=!0,_e.setHaveMarket(!0)):(Re.value=!1,_e.setHaveMarket(!1))},Ra=async()=>{var Ce,Pe;const s=(await $fetch(`${U.Sui.api}/v2/sui/price?base_symbol_address_pair=${ca(w.value.address)},${ca(S.value.address)}`)).data.prices||[],B=[];s.forEach(Oe=>{Oe.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?B.push({...Oe,base_symbol:"0x2::sui::SUI"}):B.push(Oe)});const q=Object.fromEntries(B.map(Oe=>[Oe.base_symbol,Oe]));console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:872 ~ setMarketPriceFromRate ~ RATES:",q);const te=new h((Ce=q[S.value.address])==null?void 0:Ce.price),mt=new h((Pe=q[w.value.address])==null?void 0:Pe.price);return{inputAmount:te,outputAmount:mt}},Ft=g(!1),Ct=async p=>{p||(Ft.value=!0);let s;try{s=await Ra()}catch(B){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:787 ~ setMarketPrice ~ error:",B)}if(Z.value="",console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:794 ~ setMarketPrice ~ res:",s),!s||s.outputAmount.toNumber()<=0&&s.inputAmount.toNumber()<=0)return We.value=!1,ye.value="",pe.value="",Z.value="",!1;We.value=!0,p?oe.value=Y.value?fe(s.outputAmount.div(s.inputAmount).toString()):fe(s.inputAmount.div(s.outputAmount).toString()):L.value=Y.value?fe(s.outputAmount.div(s.inputAmount).toString()):fe(s.inputAmount.div(s.outputAmount).toString()),setTimeout(()=>{Ft.value=!1},1e3)},jt=g(!1),zt=async()=>{jt.value=!0,await Ct(!0),ye.value="",pe.value="",Z.value="";const p=new h(L.value).sub(new h(oe.value)).div(new h(oe.value)).mul(100);Z.value=p.toNumber().toFixed(2);const s=Math.abs(p.toNumber()).toFixed(2);pe.value=`Limit order price is ${s}% ${Z.value>0?"higher":"lower"} than the market.`,Y.value?L.value>oe.value?(ye.value="",we.value="#68FFD8"):oe.value>L.value&&(ye.value=`Your limit order price is ${s}% ${Z.value>0?"higher":"lower"} than market. You are selling at a much higher rate. We recommend you to use`,we.value="#ffb62d"):L.value>oe.value?(ye.value=`Your limit order price is ${s}% ${Z.value>0?"higher":"lower"} than market. You are buying at a much lower rate. We recommend you to use`,we.value="#ffb62d"):oe.value>L.value&&(ye.value="",we.value="#68FFD8"),jt.value=!1};ae(()=>[w.value,S.value],([p,s])=>{p&&s&&(L.value="",Ct(!1))},{immediate:!0});const it=g(!1),Pa=p=>{const s=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,18})?).*$");p.target.value=p.target.value.replace(s,"$1"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1002 ~ priceChange ~ e.target.value:",p.target.value),L.value=p.target.value,ye.value="",pe.value="",Z.value="",it.value=!0,L.value&&L.value>0&&Re.value&&zt()},Aa=()=>{Y.value=!Y.value,L.value=fe(new h(1).div(new h(L.value)).toString()),L.value>0&&Re.value&&zt()},Ve=g(),Ye=g(),Ot=g(!1),na=(p,s)=>{var q,te;const B=je.importTokenListObj;p&&!Ae(p)&&p!=null&&p.isSelfBuilt&&!(B!=null&&B.hasOwnProperty(p==null?void 0:p.address))&&(r.value="fromCoin",Ve.value=p),s&&!Ae(s)&&s!=null&&s.isSelfBuilt&&!(B!=null&&B.hasOwnProperty(s==null?void 0:s.address))&&(r.value="toCoin",Ye.value=s),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1034 ~ getTokenSource ~ warningFromCoin.value:",Ve.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1046 ~ getTokenSource ~ warningToCoin.value:",Ye.value),((q=Ve==null?void 0:Ve.value)!=null&&q.address||(te=Ye==null?void 0:Ye.value)!=null&&te.address)&&(Ot.value=!0)};ae(()=>[w.value,S.value],([p,s])=>{p&&!Ae(p)&&na(p,{}),s&&!Ae(s)&&na({},s)},{immediate:!0});const Ua=()=>{r.value==="fromCoin"?w.value=ue.value:S.value=ue.value,Ot.value=!1,Ve.value="",Ye.value=""},Ha=b(()=>{var p,s;return`/swap?from=${(p=w==null?void 0:w.value)==null?void 0:p.address}&to=${(s=S==null?void 0:S.value)==null?void 0:s.address}`}),Ba=qa();ae(()=>[w.value,S.value],([p,s])=>{if(p&&s){if(kt(),he(),p||s){const B=`/limit/${p==null?void 0:p.address}-${s==null?void 0:s.address}`;Ba.push(B)}}else _e.setHaveMarket(!1)},{immediate:!0});const Lt=g(!1),Wt=b(()=>Qe.value.isShowChart),Vt=g(!0),Yt=g(!1);return(p,s)=>{var Pe,Oe,ia,oa;const B=ea,q=wt,te=st,mt=Qt,Ce=Za;return u(),y("div",fl,[e("div",gl,[e("div",hl,[N($a,{"tab-list":_,"current-tab":"limit",onClickTab:s[0]||(s[0]=R=>p.$router.push(R.link))}),e("div",yl,[N(B,{"overlay-class-name":"new-style-tooltip"},{title:j(()=>[e("div",bl,o(Wt.value?"Hide reference price":"View reference price"),1)]),default:j(()=>[e("div",wl,[(u(),y("svg",{class:Q(["chart-icon",Wt.value?"active-chart-icon":""]),"aria-hidden":"true",onClick:s[1]||(s[1]=R=>a(_e).setIsShowChart(!Wt.value))},Sl,2))])]),_:1}),e("div",xl,[N(Qa,{loading:V.value,"auto-refresh-time":ee.value,countdown:Se.value,"tooltip-placement":"left",onClickRefresh:se},null,8,["loading","auto-refresh-time","countdown"])])])]),e("div",kl,[e("div",{class:Q(["card-container",[Vt.value?"input-block-add-top":"",Yt.value?"input-block-add-bottom":""]])},[N(va,{modelValue:a(E),"onUpdate:modelValue":s[2]||(s[2]=R=>ra(E)?E.value=R:null),"input-value":a(E),"coin-symbol":a(w)?a(w).symbol:null,"coin-name":a(w)?a(w).name:null,balance:m.value,"coin-icon":a(w)?a(w).logo_url:"",address:a(w)?a(w).address:"","swap-direction":"From",title:"Sell",onOnMax:s[3]||(s[3]=R=>n("fromCoin")),onOnHalf:s[4]||(s[4]=R=>C("fromCoin")),onOnInput:s[5]||(s[5]=R=>{E.value=R,W.value=!0,it.value=!1}),onOnFocus:s[6]||(s[6]=()=>{Vt.value=!0,Yt.value=!1}),onOnSelect:s[7]||(s[7]=R=>d("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),N(va,{modelValue:a(P),"onUpdate:modelValue":s[8]||(s[8]=R=>ra(P)?P.value=R:null),"input-value":a(P),havemax:!1,"coin-symbol":a(S)?a(S).symbol:null,"coin-name":a(S)?a(S).name:null,balance:v.value,"swap-direction":"To","coin-icon":a(S)?a(S).logo_url:"",address:a(S)?a(S).address:"",havehalf:!1,title:"Buy",onOnInput:s[9]||(s[9]=R=>{P.value=R,W.value=!1,it.value=!1}),onOnFocus:s[10]||(s[10]=()=>{Vt.value=!1,Yt.value=!0}),onOnSelect:s[11]||(s[11]=R=>d("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])],2),e("div",{class:"exchange new-sui-exchange",onClick:s[12]||(s[12]=(...R)=>a(ha)&&a(ha)(...R))},Ol)]),e("div",Ll,[e("div",Tl,[e("div",Il,[e("div",null,[Y.value?(u(),y("div",Ml," Sell "+o((Pe=a(w))==null?void 0:Pe.symbol)+" at rate",1)):(u(),y("div",Nl,"Buy "+o((Oe=a(S))==null?void 0:Oe.symbol)+" at rate ",1)),jt.value?(u(),F(q,{key:2,indicator:a(c)},null,8,["indicator"])):(u(),F(B,{key:3},Ja({default:j(()=>[L.value&&oe.value&&We.value&&Number(Z.value)!==0?(u(),y("div",{key:0,class:"rate",style:Jt({color:we.value})},o(Number(Z.value)>0&&Number(Z.value)<1e4?`+${Z.value}`:Number(Z.value)>1e4?">10000":Z.value)+"% ",5)):D("",!0)]),_:2},[pe.value?{name:"title",fn:j(()=>[H(o(pe.value),1)]),key:"0"}:void 0]),1024))]),We.value?(u(),F(te,{key:0,loading:Ft.value,class:"set-market max-btn",onClick:s[13]||(s[13]=R=>Ct(!1))},{default:j(()=>[H("Market")]),_:1},8,["loading"])):D("",!0)]),e("div",El,[N(mt,{value:L.value,"onUpdate:value":s[14]||(s[14]=R=>L.value=R),placeholder:"0.0",onOnInput:s[15]||(s[15]=()=>{W.value=!0}),onChange:Pa},null,8,["value"]),e("div",Rl,[e("span",null,o(Y.value?(ia=a(S))==null?void 0:ia.symbol:(oa=a(w))==null?void 0:oa.symbol),1),e("div",{class:"right",onClick:Aa},Al)])])]),e("div",{class:"sell-expires",onClick:s[16]||(s[16]=Xt(R=>k.value=!k.value,["stop"]))},[e("div",Ul,[Hl,N(ss,{type:"expiryIn","xlink-href":"#icon-icon_tips"})]),e("div",Bl,[e("span",null,o(M.value),1),(u(),y("svg",{class:"icon","aria-hidden":"true",style:Jt(k.value?{transform:"rotate(180deg)"}:{})},Fl,4))]),e("div",{class:"expires-list",style:Jt(k.value?{display:"block"}:{})},[(u(),y(G,null,He(O,R=>e("div",{key:R,class:Q(["expirer-item",R==M.value?"expirer-item-active":""]),onClick:ko=>R=="Custom"?z.value=!0:M.value=R},o(R),11,jl)),64))],4)])]),ne(e("div",zl,[H(o(ye.value)+" ",1),e("span",{onClick:s[17]||(s[17]=R=>p.$router.push(Ha.value))},"Cetus Swap"),H(" instead. ")],512),[[ct,L.value&&oe.value&&Number(Z.value)!==0&&ye.value&&We.value]])]),$.value&&$.value.address?(u(),F(te,{key:0,disabled:Fe.value,class:Q(["place-order-btn",ve.value&&ve.value.length>40?"place-order-btn-size":""]),loading:Ee.value,onClick:s[18]||(s[18]=R=>Lt.value=!0)},{default:j(()=>[H(o(ve.value),1)]),_:1},8,["disabled","class","loading"])):(u(),F(te,{key:1,class:"place-order-btn",onClick:s[19]||(s[19]=R=>$.value.setIsShowWalletModal(!0))},{default:j(()=>[H("Connect wallet")]),_:1})),z.value?(u(),F(Bs,{key:2,onCloseModal:s[20]||(s[20]=R=>z.value=!1),onSendTime:re})):D("",!0),T.value?(u(),F(as,{key:3,"existing-coins":i.value,"last-select-coin":I.value,"have-import-btn":!0,onOnSelect:ge,onOnClose:s[21]||(s[21]=R=>T.value=!1)},null,8,["existing-coins","last-select-coin"])):D("",!0),Ot.value?(u(),F(Ce,{key:4,"from-coin":Ve.value,"to-coin":Ye.value,"is-import-modal":!0,onClose:Ua,onClickContinue:s[22]||(s[22]=()=>{Ot.value=!1,Ve.value="",Ye.value=""})},null,8,["from-coin","to-coin"])):D("",!0),Lt.value?(u(),F(pl,{key:5,"from-coin":a(w),"to-coin":a(S),"from-coin-amount":a(E),"to-coin-amount":a(P),direction:Y.value,price:L.value,"current-expires":M.value,onClose:s[23]||(s[23]=R=>Lt.value=!1),onToTrade:le},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","direction","price","current-expires"])):D("",!0)])}}});const Jo=de(Wl,[["__scopeId","data-v-c4ea3f38"]]),Oa=t=>(Te("data-v-f293de74"),t=t(),Ie(),t),Vl={key:0,class:"no-data"},Yl=Oa(()=>e("img",{src:ls,alt:""},null,-1)),ql={key:1,class:"no-data"},Jl=Oa(()=>e("img",{src:ns,alt:""},null,-1)),Kl=ce({__name:"trade-no-data",props:{platform:{type:String,default:"platform"}},setup(t){const c=Be(),l=f=>{switch(f){case"orders":return"You don't have any open orders yet.";case"history":return"You don't have any order history.";case"claim":return"No History."}},_=b(()=>c);return(f,$)=>{const m=st;return _.value&&_.value.address?(u(),y("div",Vl,[Yl,e("span",null,o(l(t.platform)),1)])):(u(),y("div",ql,[Jl,N(m,{class:"connect-wallet",onClick:$[0]||($[0]=v=>_.value.setIsShowWalletModal(!0))},{default:j(()=>[H("Connect Wallet")]),_:1})]))}}});const la=de(Kl,[["__scopeId","data-v-f293de74"]]),Gl={class:"trade-info"},Zl={alt:""},Ql={alt:""},Xl=ce({__name:"trade-info",props:{order:{type:Object,default:()=>({})}},setup(t){return(c,l)=>{var $,m,v,n,C,r,i,I,T,d,O,x,k,M;const _=wa,f=Ht("image");return u(),y("div",Gl,[e("div",null,[ne(e("img",Zl,null,512),[[f,(m=($=t.order)==null?void 0:$.pay_coin_info)==null?void 0:m.logo_url]]),N(_,{address:(n=(v=t.order)==null?void 0:v.pay_coin_info)==null?void 0:n.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ne(e("img",Ql,null,512),[[f,(r=(C=t.order)==null?void 0:C.target_coin_info)==null?void 0:r.logo_url]]),N(_,{address:(I=(i=t.order)==null?void 0:i.target_coin_info)==null?void 0:I.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,o(a(A)((T=t.order)==null?void 0:T.total_pay_amount))+" "+o((O=(d=t.order)==null?void 0:d.pay_coin_info)==null?void 0:O.symbol)+" â†’ "+o(a(A)((x=t.order)==null?void 0:x.totalBuyNum))+" "+o((M=(k=t.order)==null?void 0:k.target_coin_info)==null?void 0:M.symbol),1)])}}});const St=de(Xl,[["__scopeId","data-v-d1826e2f"]]),Ge=t=>(Te("data-v-c1c48986"),t=t(),Ie(),t),en={class:"claim-modal-content"},tn=Ge(()=>e("div",{class:"desc"}," For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ",-1)),an={class:"order-info-detail"},sn={class:"order-info"},ln=Ge(()=>e("div",{class:"label"},"Price",-1)),nn={class:"text"},on=Ge(()=>e("div",{class:"label"},"Filled size",-1)),rn={class:"text"},un=Ge(()=>e("div",{class:"label"},"Expiry",-1)),cn={class:"text"},dn={class:"tab"},vn=["onClick"],_n={key:0,class:"claim-content"},mn={class:"inp-box"},pn=Ge(()=>e("div",{class:"top"},[e("div",{class:"avalibale-claim"},"Avalibale to claim")],-1)),fn={class:"bottom"},gn={class:"token-info"},hn={alt:""},yn={key:1,class:"history-list"},bn={class:"amount"},wn=Ge(()=>e("div",{class:"label"},"Amount",-1)),$n={class:"text"},Sn={alt:""},xn={class:"time"},kn=Ge(()=>e("div",{class:"label"},"Time",-1)),Cn={class:"text"},On=["href"],Ln=Ge(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),Tn=[Ln],In={key:2,class:"loading-box"},Mn=ce({__name:"trade-claim-modal",props:{order:{type:Object,default:()=>({})}},emits:["closeModal"],setup(t,{emit:c}){const l=t,_=["Claim","History"],f=g("Claim"),$=g(),m=V=>{const se=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${l.order.target_coin_info.decimals}})?).*$`);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ props.order.target_coin_info.decimals:",l.order.target_coin_info.decimals),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ reg:",se),$.value=V.target.value.replace(se,"$1")},v=g(!0);ae(()=>l.order.target_balance,V=>{V&&V>0&&v.value?($.value=V,v.value=!1):$.value=0},{immediate:!0});const n=b(()=>!!($.value>l.order.target_balance||X.value||!$.value||l.order.target_balance==0)),C=b(()=>$.value>l.order.target_balance?"Maximum amount that can be withdrawn":$.value?"Confirm Claim":"Claim"),r=_t(),i=b(()=>r),I=Be(),T=b(()=>I),d=Ue("Sui"),{setTransactionTxid:O,setIsShowWaiting:x,setIsShowSuccess:k,setIsShowRejected:M,setTransactionDesc:z}=r,L=Bt("Sui"),X=g(!1),re=Me(),ue=b(()=>re),ge=async()=>{var V,se;X.value=!0;try{const be=`Claim ${A($.value)} ${(se=(V=l.order)==null?void 0:V.target_coin_info)==null?void 0:se.symbol}`;z(be),x(!0);const he={order_id:l.order.id,pay_coin_type:l.order.pay_coin_type,target_coin_type:l.order.target_coin_type};console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:194 ~ confirmClaim ~ params:",he);const De=await d.claimTargetCoin(he),Ne=await L.signAndExecuteTransactionBlock(T.value.currentWallet,De),ie=L.handleTx(Ne);if(ie&&ie.hash){O(ie.hash),x(!1),k(!0);const ve={title:"Transaction",desc:"Claim successfully",hash:ie.hash,icon:"icon-icon-Increased"};ve.res=ie.res,L.showTransitionPending(ve),await L.watchTransaction(ve)&&(setTimeout(()=>{L.getAccount(T.value.address),re.getOrderList()},2e3),setTimeout(()=>{$.value=0,X.value=!1},4e3))}else x(!1),M(!0)}catch(be){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:222 ~ confirmClaim ~ error:",be),x(!1),M(!0),X.value=!1}};ae(()=>f.value,V=>{V=="History"&&re.getLimitOrderClaimHistory(l.order)},{immediate:!0});const ee=b(()=>ue.value.currentOrderClaimHistory),Se=b(()=>i.value.currentExplorer),xe=b(()=>ue.value.claimHistoryLoading);return(V,se)=>{const be=Qt,he=st,De=wt,Ne=Ht("image");return u(),F(a(Zt),{title:"Claim",visible:!0,width:"440px",footer:null,onCancel:se[1]||(se[1]=ie=>V.$emit("closeModal"))},{default:j(()=>{var ie,ve,Fe,_e,Qe,je,Xe,ke,et,ze,tt,Ee,me;return[e("div",en,[tn,e("div",an,[N(St,{order:t.order},null,8,["order"]),e("div",sn,[e("div",null,[ln,e("div",nn,o(a(A)(t.order.reseverRate))+" "+o((ve=(ie=t.order)==null?void 0:ie.pay_coin_info)==null?void 0:ve.symbol)+" per "+o((_e=(Fe=t.order)==null?void 0:Fe.target_coin_info)==null?void 0:_e.symbol),1)]),e("div",null,[on,e("div",rn,[H(o(a(A)((Qe=t.order)==null?void 0:Qe.obtained_amount))+"/"+o(a(A)((je=t.order)==null?void 0:je.totalBuyNum))+" "+o((ke=(Xe=t.order)==null?void 0:Xe.target_coin_info)==null?void 0:ke.symbol)+" ",1),e("span",null,"("+o((et=t.order)==null?void 0:et.obtainedRatio)+"%)",1)])]),e("div",null,[un,e("div",cn,o(a(Ke)(t.order.expire_ts,""))+" (UTC) ",1)])])]),e("div",dn,[(u(),y(G,null,He(_,le=>e("div",{key:le,class:Q(["tab-item",f.value==le?"tab-item-active":""]),onClick:Y=>f.value=le},o(le),11,vn)),64))]),f.value=="Claim"?(u(),y("div",_n,[e("div",mn,[pn,e("div",fn,[N(be,{value:$.value,"onUpdate:value":se[0]||(se[0]=le=>$.value=le),disabled:"",onChange:m},null,8,["value"]),e("div",gn,[ne(e("img",hn,null,512),[[Ne,(tt=(ze=t.order)==null?void 0:ze.target_coin_info)==null?void 0:tt.logo_url]]),e("span",null,o((me=(Ee=t.order)==null?void 0:Ee.target_coin_info)==null?void 0:me.symbol),1)])])]),N(he,{disabled:n.value,class:"claim-btn",loading:X.value,onClick:ge},{default:j(()=>[H(o(C.value),1)]),_:1},8,["disabled","loading"])])):(u(),y("div",yn,[!xe.value&&ee.value&&ee.value.length>0?(u(!0),y(G,{key:0},He(ee.value,le=>{var Y,oe,pe,we;return u(),y("div",{key:le.digest,class:"history-item"},[e("div",bn,[wn,e("div",$n,[ne(e("img",Sn,null,512),[[Ne,(oe=(Y=t.order)==null?void 0:Y.target_coin_info)==null?void 0:oe.logo_url]]),e("span",null,o(a(A)(le.claimed_amount))+" "+o((we=(pe=t.order)==null?void 0:pe.target_coin_info)==null?void 0:we.symbol),1)])]),e("div",xn,[kn,e("div",Cn,[e("span",null,o(a(Ke)(Number(le.timestampMs),""))+" (UTC)",1),e("a",{target:"_blank",href:a(ta)(Se.value,"tx",le.digest)},Tn,8,On)])])])}),128)):!xe.value&&ee.value&&ee.value.length==0?(u(),F(la,{key:1,platform:"claim"})):xe.value&&ee.value&&ee.value.length==0?(u(),y("div",In,[N(De)])):D("",!0)]))])]}),_:1})}}});const La=de(Mn,[["__scopeId","data-v-c1c48986"]]),xt=t=>(Te("data-v-cee61343"),t=t(),Ie(),t),Nn={class:"trade-order-card-list"},En={class:"order-info"},Rn=xt(()=>e("div",{class:"label"},"Price",-1)),Pn={class:"text"},An=["onClick"],Un=xt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Hn=[Un],Bn=xt(()=>e("div",{class:"label"},"Filled size",-1)),Dn={class:"text"},Fn=xt(()=>e("div",{class:"label"},"Expiry",-1)),jn={class:"text"},zn=xt(()=>e("div",{class:"trade-claim-btn trade-claim-btn-disabled"},"Claim",-1)),Wn=ce({__name:"trade-order-card",props:{pageList:{type:Object,default:()=>({})}},setup(t){const c=g(),l=g(!1),_=Me(),f=b(()=>_),$=b(()=>f.value.cancelOrderId);return(m,v)=>{const n=ea,C=st,r=La;return u(),y("div",Nn,[(u(!0),y(G,null,He(t.pageList,i=>{var I,T,d,O,x;return u(),y("div",{key:i.id,class:"trade-order-card"},[N(St,{order:i},null,8,["order"]),e("div",En,[e("div",null,[Rn,e("div",Pn,[i.direction?(u(),y(G,{key:0},[H(o(a(A)(i==null?void 0:i.rate))+" "+o((I=i==null?void 0:i.target_coin_info)==null?void 0:I.symbol)+" per "+o((T=i==null?void 0:i.pay_coin_info)==null?void 0:T.symbol),1)],64)):(u(),y(G,{key:1},[H(o(a(A)(i==null?void 0:i.reseverRate))+" "+o((d=i==null?void 0:i.pay_coin_info)==null?void 0:d.symbol)+" per "+o((O=i==null?void 0:i.target_coin_info)==null?void 0:O.symbol),1)],64)),e("div",{class:"right",onClick:k=>i.direction=!i.direction},Hn,8,An)])]),e("div",null,[Bn,e("div",Dn,[H(o(a(A)(i==null?void 0:i.obtained_amount))+"/"+o(a(A)(i==null?void 0:i.totalBuyNum))+" "+o((x=i==null?void 0:i.target_coin_info)==null?void 0:x.symbol)+" ",1),e("span",null,"("+o(i==null?void 0:i.obtainedRatio)+"%)",1)])]),e("div",null,[Fn,e("div",jn,o(a(Ke)(i.created_ts,""))+" (UTC)",1)])]),i.target_balance==0&&i.obtained_amount==0?(u(),F(n,{key:0,"overlay-class-name":"new-tooltip-border-radius"},{title:j(()=>[H(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:j(()=>[zn]),_:1})):(u(),F(C,{key:1,class:"trade-claim-btn",onClick:()=>{c.value=i,l.value=!0}},{default:j(()=>[H("Claim")]),_:2},1032,["onClick"])),N(C,{class:"trade-cancel-btn",loading:$.value=="all"||$.value==i.id,onClick:k=>a(sa)(i)},{default:j(()=>[H("Cancel")]),_:2},1032,["loading","onClick"])])}),128)),l.value?(u(),F(r,{key:0,order:c.value,onCloseModal:v[0]||(v[0]=i=>l.value=!1)},null,8,["order"])):D("",!0)])}}});const Vn=de(Wn,[["__scopeId","data-v-cee61343"]]),Yn=ce({props:{currentPageNum:{type:Number,default:null},pageSize:{type:[Number,String],default:""},total:{type:Number,default:null}},setup(t){return{itemRender:(l,_,f)=>(l==null?void 0:l.type)==="prev"?pt("svg",{class:"icon icon-prev","aria-hidden":"true"},[pt("use",{"xlink:href":"#icon-icon_left"})]):(l==null?void 0:l.type)==="next"?pt("svg",{class:"icon icon-next","aria-hidden":"true"},[pt("use",{"xlink:href":"#icon-icon_right"})]):f}}});function qn(t,c,l,_,f,$){const m=Ga;return u(),F(m,{current:t.currentPageNum,"page-size":t.pageSize,"item-render":t.itemRender,total:t.total,simple:"",onChange:c[0]||(c[0]=v=>{t.$emit("change",v)})},null,8,["current","page-size","item-render","total"])}const Ta=de(Yn,[["render",qn]]),Ia=t=>(Te("data-v-03714e7a"),t=t(),Ie(),t),Jn={class:"trade-orders"},Kn={key:0},Gn=Ia(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Price"),e("th",null,"Filled size"),e("th",null,"Expiry"),e("th",null,"Action")])],-1)),Zn={class:"order-price"},Qn=["onClick"],Xn=Ia(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),ei=[Xn],ti={class:"filled-size"},ai={class:"action"},si={key:4,class:"loading-box"},li=ce({__name:"trade-orders",setup(t){const c=Be(),l=b(()=>c),_=Me(),f=b(()=>_);b(()=>f.value.limitOrderList);const $=$t(),m=b(()=>$);b(()=>m.value.tokensObj),ae(()=>l.value.address,C=>{C&&_.getOrderList()},{immediate:!0});const v=b(()=>f.value.orderListLoading),n=(C,r)=>{console.log(C,"page"),gt.value=C};return(C,r)=>{const i=st,I=ea,T=wt;return u(),y("div",Jn,[l.value&&l.value.address&&a(K)&&a(K).length>0?(u(),y("table",Kn,[Gn,e("tbody",null,[(u(!0),y(G,null,He(a(K),d=>{var O,x,k,M,z;return u(),y("tr",{key:d.id},[e("td",null,[N(St,{order:d},null,8,["order"])]),e("td",null,[e("div",Zn,[d.direction?(u(),y(G,{key:0},[H(o(a(A)(d==null?void 0:d.rate))+" "+o((O=d==null?void 0:d.target_coin_info)==null?void 0:O.symbol)+" per "+o((x=d==null?void 0:d.pay_coin_info)==null?void 0:x.symbol),1)],64)):(u(),y(G,{key:1},[H(o(a(A)(d==null?void 0:d.reseverRate))+" "+o((k=d==null?void 0:d.pay_coin_info)==null?void 0:k.symbol)+" per "+o((M=d==null?void 0:d.target_coin_info)==null?void 0:M.symbol),1)],64)),e("div",{class:"right",onClick:()=>{d.direction=!d.direction,a(hs)(d)}},ei,8,Qn)])]),e("td",null,[e("div",ti,[H(o(a(A)(d==null?void 0:d.obtained_amount))+"/"+o(a(A)(d==null?void 0:d.totalBuyNum))+" "+o((z=d==null?void 0:d.target_coin_info)==null?void 0:z.symbol)+" ",1),e("span",null,"("+o(d==null?void 0:d.obtainedRatio)+"%)",1)])]),e("td",null,o(a(Ke)(d==null?void 0:d.expire_ts,""))+" (UTC)",1),e("td",null,[e("div",ai,[N(I,{"overlay-class-name":"expiry-tooltip new-tooltip-border-radius-color"},{title:j(()=>[H(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:j(()=>[N(i,{class:"trade-claim-btn",disabled:d.target_balance==0&&d.obtained_amount==0,onClick:()=>{rt.value=d,Kt.value=!0}},{default:j(()=>[H("Claim")]),_:2},1032,["disabled","onClick"])]),_:2},1024),N(i,{class:"trade-cancel-btn",loading:a(ya)=="all"||a(ya)==d.id,onClick:L=>a(sa)(d)},{default:j(()=>[H("Cancel")]),_:2},1032,["loading","onClick"])])])])}),128))])])):D("",!0),l.value&&l.value.address&&a(K)&&a(K).length>0?(u(),F(Vn,{key:1,"page-list":a(K)},null,8,["page-list"])):D("",!0),(a(K)&&a(K).length==0||!l.value.address)&&!v.value?(u(),F(la,{key:2,platform:"orders"})):D("",!0),a(K)&&a(K).length>0?(u(),y("div",{key:3,class:Q(["pagination",a(K)&&a(K).length>0&&v.value?"loading-pagination":""])},[N(Ta,{"page-size":a(Et),total:a(ht)&&a(ht).length,"current-page-num":a(gt),onChange:n},null,8,["page-size","total","current-page-num"])],2)):D("",!0),a(K)&&a(K).length==0&&v.value?(u(),y("div",si,[N(T)])):D("",!0),a(K)&&a(K).length>0&&v.value?(u(),F(T,{key:5,class:"order-spin"})):D("",!0),a(Kt)?(u(),F(La,{key:6,order:a(rt),onCloseModal:r[0]||(r[0]=d=>Kt.value=!1)},null,8,["order"])):D("",!0)])}}});const ni=de(li,[["__scopeId","data-v-03714e7a"]]),dt=t=>{switch(t){case"Running":return{class:"order-running",path:"#icon-icon_completed"};case"Completed":return{class:"order-running",path:"#icon-icon_completed"};case"Cancelled":return{class:"order-cancelled",path:"#icon-icon_cancelled"};default:return{class:"",path:""}}},Je=t=>{switch(t){case"OrderPlacedEvent":return{path:"#icon-tx_add1",class:"order-status-create",text:"Create"};case"OrderCanceledEvent":return{path:"#icon-icon_cancelled",class:"order-status-cancel",text:"Cancel"};case"FlashLoanEvent":return{path:"#icon-tx_swap1",class:"order-status-trade",text:"Trade"};default:return{path:"",class:"",text:""}}},vt=Me(),$e=g({}),Ma=(t,c)=>{$e.value[c]?$e.value[c]=!1:($e.value[c]=!0,vt.getLimitOrderLogs()),console.log($e.value,"##isShowPosition.value")},ii=Be(),Na=b(()=>ii),oi=$t(),ri=b(()=>oi),Pt=b(()=>ri.value.tokensObj),Ea=b(()=>vt),At=b(()=>Ea.value.limitOrderHistoryList),ba=Bt("Sui"),ui=Ue("Sui"),yt=g(1),Ut=g(10),J=g([]),bt=g([]),ci=async()=>{const t=Ut.value*yt.value-Ut.value;let c=yt.value*Ut.value;c=c>At.value.length?At.value.length:c;const l=At.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:174 ~ updateOrderList ~ result:",l),console.log("trade-card updateOrderList tokenObj",Pt.value);const _=[];if(l.length>0){const f=l.filter(($,m)=>m>=t&&m<c);for(let $=0;$<f.length;$++){const m=f[$];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:188 ~ updateOrderList ~ order:",m,m.order_id);const v=Pt.value[Tt(m.pay_coin,!1)]||await ba.getTokenBySymbol({},Tt(m.pay_coin,!1)),n=Pt.value[Tt(m.target_coin,!1)]||await ba.getTokenBySymbol({},Tt(m.target_coin,!1)),C=fe(ui.rateToPrice(m.rate,v.decimals,n.decimals).toString(),v.decimals);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:211 ~ updateOrderList ~ rate:",C);const r=new h(m.total_pay_amount).div(Math.pow(10,v.decimals)).toString(),i=new h(m.remaining_amount).div(Math.pow(10,v.decimals)).toString(),I=new h(r).sub(new h(i)).toString(),T=new h(m.total_pay_amount).mul(new h(Math.pow(10,18))).div(new h(m.rate)).ceil().div(new h(Math.pow(10,n.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:226 ~ updateOrderList ~ order.rate:",m.rate);const d=fe(new h(1).div(new h(C)).toString()),O=m.events.map(x=>{const k=x.event_type.split("::")[2];let M="";return k=="OrderPlacedEvent"?M=new h(x.amount).div(Math.pow(10,v.decimals)).toString():k=="FlashLoanEvent"?M=new h(x.amount).div(Math.pow(10,n.decimals)).toString():k=="OrderCanceledEvent"&&(M=new h(x.amount).div(Math.pow(10,v.decimals)).toString()),{...x,amount:M,type:k}}).sort((x,k)=>k.block_time-x.block_time);_.push({...m,pay_coin_info:v,target_coin_info:n,total_pay_amount:r,rate:C,remaining_amount:i,transaction_ratio:qe(new h(m.total_pay_amount).sub(new h(m.remaining_amount)).div(new h(m.total_pay_amount)).mul(100).toString(),2),transaction_volume:I,status:m.cancel_reason==0?"Completed":"Cancelled",events:O,totalBuyNum:T,reseverRate:d,direction:!0})}J.value=_}bt.value=l,vt.setHistoryNum(l.length),console.log("allList",bt.value),console.log("pageList",J.value)},di=(t,c)=>{console.log(t,"page"),yt.value=t};ae(()=>[At.value,yt.value,Pt.value,Na.value.address],([t,c,l,_])=>{t&&t.length>0&&l&&!Ae(l)&&_?ci():(J.value=[],bt.value=[],vt.setHistoryNum(0))},{immediate:!0});ae(()=>Na.value.address,t=>{t&&(vt.getLimitOrderLogs(),vt.getLimitOrderHistory(t))},{immediate:!0});const Nt=b(()=>Ea.value.orderHistoryLoading),Ze=t=>(Te("data-v-6a19202f"),t=t(),Ie(),t),vi={class:"history-card-list"},_i={class:"history-info"},mi=Ze(()=>e("div",{class:"label"},"Limit price",-1)),pi={class:"text"},fi=["onClick"],gi=Ze(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),hi=[gi],yi=Ze(()=>e("div",{class:"label"},"Expiry",-1)),bi={class:"text"},wi=Ze(()=>e("div",{class:"label"},"Filled size",-1)),$i={class:"text"},Si=Ze(()=>e("div",{class:"label"},"Status",-1)),xi={class:"text"},ki=["onClick"],Ci=["xlink:href"],Oi=Ze(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Li=[Oi],Ti={class:"order-log-num"},Ii={class:"order-status"},Mi=["xlink:href"],Ni={class:"create-ts"},Ei={key:0},Ri={key:1},Pi={class:"view-trans"},Ai=["href"],Ui=Ze(()=>e("span",null,"View Txn.",-1)),Hi=Ze(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),Bi=[Ui,Hi],Di=ce({__name:"trade-history-card",props:{pageList:{type:Object,default:()=>[]}},setup(t){const c=_t(),l=b(()=>c),_=b(()=>l.value.currentExplorer),f=Me(),$=b(()=>f);return b(()=>$.value.orderHistoryObj),(m,v)=>(u(),y("div",vi,[(u(!0),y(G,null,He(t.pageList,(n,C)=>{var r,i,I,T,d;return u(),y("div",{key:n.expire_ts,class:"history-card-item"},[N(St,{order:n},null,8,["order"]),e("div",_i,[e("div",null,[mi,e("div",pi,[n.direction?(u(),y(G,{key:1},[H(o(a(A)(n==null?void 0:n.reseverRate))+" "+o((I=n==null?void 0:n.pay_coin_info)==null?void 0:I.symbol)+" per "+o((T=n==null?void 0:n.target_coin_info)==null?void 0:T.symbol),1)],64)):(u(),y(G,{key:0},[H(o(a(A)(n==null?void 0:n.rate))+" "+o((r=n==null?void 0:n.target_coin_info)==null?void 0:r.symbol)+" per "+o((i=n==null?void 0:n.pay_coin_info)==null?void 0:i.symbol),1)],64)),e("div",{class:"right",onClick:Xt(O=>n.direction=!n.direction,["stop"])},hi,8,fi)])]),e("div",null,[yi,e("div",bi,o(a(Ke)(n==null?void 0:n.expire_ts,""))+" (UTC)",1)]),e("div",null,[wi,e("div",$i,[H(o(a(A)(n==null?void 0:n.transaction_volume))+"/"+o(a(A)(n==null?void 0:n.total_pay_amount))+" "+o((d=n==null?void 0:n.pay_coin_info)==null?void 0:d.symbol)+" ",1),e("span",null,"("+o(n==null?void 0:n.transaction_ratio)+"%)",1)])]),e("div",null,[Si,e("div",xi,[e("div",{class:"order-status",onClick:O=>a(Ma)(n,C)},[(u(),y("svg",{class:Q(["order-status-icon",a(dt)(n.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(dt)(n.status).path},null,8,Ci)],2)),e("span",{class:Q(a(dt)(n.status).class)},o(n.status),3),(u(),y("svg",{class:Q(["arrow-icon",a($e)[C]?"open-arrow":""]),"aria-hidden":"true"},Li,2))],8,ki)])])]),a($e)[C]?(u(!0),y(G,{key:0},He(n.events,O=>{var x,k,M;return u(),y("div",{key:O,class:"order-log"},[e("div",Ti,[e("div",Ii,[e("div",null,[(u(),y("svg",{class:Q(["status-icon",a(Je)(O.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Je)(O.type).path},null,8,Mi)],2)),e("span",{class:Q(["text-status",a(Je)(O.type).class])},o(a(Je)(O.type).text),3)]),e("div",Ni,o(a(Ke)(Number(O.block_time),""))+" (UTC) ",1)]),e("div",null,[O.type=="FlashLoanEvent"?(u(),y("span",Ei,"+"+o(a(A)(O.amount))+" "+o((x=n==null?void 0:n.buy_coin_info)==null?void 0:x.symbol)+" "+o((k=n==null?void 0:n.target_coin_info)==null?void 0:k.symbol),1)):(u(),y("span",Ri,o(O.type=="OrderPlacedEvent"?"-":"+")+o(a(A)(O.amount))+" "+o((M=n==null?void 0:n.pay_coin_info)==null?void 0:M.symbol),1)),e("div",Pi,[e("a",{href:a(ta)(_.value,"tx",O.tx),target:"_blank"},Bi,8,Ai)])])])])}),128)):D("",!0)])}),128))]))}});const Fi=de(Di,[["__scopeId","data-v-6a19202f"]]),nt=t=>(Te("data-v-56657759"),t=t(),Ie(),t),ji={class:"trade-history"},zi={key:0},Wi=nt(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Limit price"),e("th",null,"Expiry"),e("th",null,"Filled size"),e("th",null,"Status")])],-1)),Vi=["onClick"],Yi={class:"order-price"},qi=["onClick"],Ji=nt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Ki=[Ji],Gi={class:"order-status"},Zi=["xlink:href"],Qi=nt(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Xi=[Qi],eo={class:"order-log"},to={class:"order-log-num"},ao=["xlink:href"],so={key:0},lo={key:1},no=nt(()=>e("td",null,null,-1)),io=nt(()=>e("td",null,null,-1)),oo={class:"create-ts"},ro={class:"view-trans"},uo=["href"],co=nt(()=>e("span",null,"View Transaction",-1)),vo=nt(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_link"})],-1)),_o=[co,vo],mo={style:{height:"4px",background:"unset"}},po={class:"tr-line",style:{height:"24px",background:"unset"}},fo={key:4,class:"loading-box"},go=ce({__name:"trade-history",setup(t){const c=_t(),l=b(()=>c),_=b(()=>l.value.currentExplorer),f=Me();b(()=>f);const $=Be(),m=b(()=>$);return ae(()=>m.value.address,v=>{v&&(f.getLimitOrderLogs(),f.getLimitOrderHistory(v))},{immediate:!0}),(v,n)=>{const C=wt;return u(),y("div",ji,[m.value&&m.value.address&&a(J)&&a(J).length>0?(u(),y("table",zi,[Wi,e("tbody",null,[(u(!0),y(G,null,He(a(J),(r,i)=>{var I,T,d,O,x;return u(),y(G,{key:r.id},[e("tr",{class:Q(["order",i!==a(J).length-1?"order-border":""]),onClick:k=>a(Ma)(r,i)},[e("td",null,[N(St,{order:r},null,8,["order"])]),e("td",null,[e("div",Yi,[r.direction?(u(),y(G,{key:1},[H(o(a(A)(r==null?void 0:r.reseverRate))+" "+o((d=r==null?void 0:r.pay_coin_info)==null?void 0:d.symbol)+" per "+o((O=r==null?void 0:r.target_coin_info)==null?void 0:O.symbol),1)],64)):(u(),y(G,{key:0},[H(o(a(A)(r==null?void 0:r.rate))+" "+o((I=r==null?void 0:r.target_coin_info)==null?void 0:I.symbol)+" per "+o((T=r==null?void 0:r.pay_coin_info)==null?void 0:T.symbol),1)],64)),e("div",{class:"right",onClick:Xt(k=>r.direction=!r.direction,["stop"])},Ki,8,qi)])]),e("td",null,o(a(Ke)(r==null?void 0:r.expire_ts,""))+" (UTC)",1),e("td",null,[H(o(a(A)(r==null?void 0:r.transaction_volume))+"/"+o(a(A)(r==null?void 0:r.total_pay_amount))+" "+o((x=r==null?void 0:r.pay_coin_info)==null?void 0:x.symbol)+" ",1),e("span",null,"("+o(r==null?void 0:r.transaction_ratio)+"%)",1)]),e("td",null,[e("div",Gi,[(u(),y("svg",{class:Q(["order-status-icon",a(dt)(r.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(dt)(r.status).path},null,8,Zi)],2)),e("span",{class:Q(a(dt)(r.status).class)},o(r.status),3),(u(),y("svg",{class:Q(["arrow-icon",a($e)[i]?"open-arrow":""]),"aria-hidden":"true"},Xi,2))])])],10,Vi),a($e)[i]?(u(),y(G,{key:0},[(u(!0),y(G,null,He(r.events,k=>{var M,z,L;return u(),y(G,{key:k},[ne(e("tr",eo,[e("td",null,[e("div",to,[(u(),y("svg",{class:Q(["status-icon",a(Je)(k.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Je)(k.type).path},null,8,ao)],2)),e("span",{class:Q(["text-status",a(Je)(k.type).class])},o(a(Je)(k.type).text),3),k.type=="FlashLoanEvent"?(u(),y("span",so,"+"+o(a(A)(k.amount))+" "+o((M=r==null?void 0:r.buy_coin_info)==null?void 0:M.symbol)+" "+o((z=r==null?void 0:r.target_coin_info)==null?void 0:z.symbol),1)):(u(),y("span",lo,o(k.type=="OrderPlacedEvent"?"-":"+")+o(a(A)(k.amount))+" "+o((L=r==null?void 0:r.pay_coin_info)==null?void 0:L.symbol),1))])]),no,io,e("td",null,[e("span",oo,o(a(Ke)(Number(k.block_time),""))+" (UTC)",1)]),e("td",null,[e("div",ro,[e("a",{href:a(ta)(_.value,"tx",k.tx),target:"_blank"},_o,8,uo)])])],512),[[ct,a($e)[i]]]),ne(e("tr",mo,null,512),[[ct,a($e)[i]]])],64)}),128)),ne(e("tr",po,null,512),[[ct,a($e)[i]]])],64)):D("",!0)],64)}),128))])])):D("",!0),m.value&&m.value.address&&a(J)&&a(J).length>0?(u(),F(Fi,{key:1,"page-list":a(J)},null,8,["page-list"])):D("",!0),a(J)&&a(J).length==0&&!a(Nt)?(u(),F(la,{key:2,platform:"history"})):D("",!0),a(J)&&a(J).length>0?(u(),y("div",{key:3,class:Q(["pagination",a(J)&&a(J).length>0&&a(Nt)?"loading-pagination":""])},[N(Ta,{"page-size":a(Ut),total:a(bt)&&a(bt).length,"current-page-num":a(yt),onChange:a(di)},null,8,["page-size","total","current-page-num","onChange"])],2)):D("",!0),a(J)&&a(J).length==0&&a(Nt)?(u(),y("div",fo,[N(C)])):D("",!0),a(J)&&a(J).length>0&&a(Nt)?(u(),F(C,{key:5,class:"order-spin"})):D("",!0)])}}});const ho=de(go,[["__scopeId","data-v-56657759"]]),yo={class:"order-or-history"},bo={class:"tab-list"},wo=ce({__name:"trade-tab",setup(t){const c=Me(),l=b(()=>c),_=b(()=>l.value.orderNum),f=b(()=>l.value.historyNum),$=Be(),m=b(()=>$),v=b(()=>[{value:"orders",label:"Open Orders",numValue:ot.value=="orders"&&m.value&&m.value.address?_:""},{value:"history",label:"Order History",numValue:ot.value=="history"&&m.value&&m.value.address?f:""}]);return(n,C)=>(u(),y("div",yo,[e("div",bo,[N($a,{"tab-list":v.value,"current-tab":a(ot),onClickTab:C[0]||(C[0]=r=>ot.value=r.value)},null,8,["tab-list","current-tab"])]),a(ot)=="orders"&&m.value&&m.value.address&&_.value>0?(u(),y("div",{key:0,class:"clear-all",onClick:C[1]||(C[1]=r=>a(sa)({},!0))},"Cancel All")):D("",!0)]))}});const $o=de(wo,[["__scopeId","data-v-b27fb2b8"]]),So={class:"trade-order"},xo=ce({__name:"trade-record",setup(t){return(c,l)=>(u(),y("div",So,[N($o),a(ot)=="orders"?(u(),F(ni,{key:0})):(u(),F(ho,{key:1}))]))}});const Ko=de(xo,[["__scopeId","data-v-646f8c44"]]);export{Ta as N,St as T,Vn as _,ya as a,sa as b,rt as c,Et as d,ht as e,gt as f,la as g,La as h,Kt as i,J as j,Fi as k,Ut as l,bt as m,yt as n,Nt as o,K as p,di as q,$o as r,ot as s,ka as t,Me as u,Jo as v,Na as w,qo as x,Ko as y};
