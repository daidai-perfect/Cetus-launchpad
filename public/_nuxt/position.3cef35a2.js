import{_ as Re}from"./position-status.1a9b5cdc.js";import{a as ye,u as ie,k as Ue,g as _e,b as f,c as H,f as x,e as k,D as Se,i as Ne}from"./pool.7985c69b.js";import{a as le,l as de,b as re,m as h,r as S,D as B,e as me,q as Oe,o as n,f as t,h as s,i as R,t as D,x as I,v as o,u as i,z as G,F as W,s as V,K as ue,p as pe,k as ce,y as Ae,C as Ce,N as De,L as te,w as E,T as ae,j as Z,W as je,B as Le,c as Pe,X as Te}from"./entry.2d393e12.js";/* empty css              */import{i as Y}from"./import-icon.de3e6c66.js";import{u as ve,_ as Fe}from"./index.99d006b3.js";import{_ as ke}from"./icon-arrow_2x.948aedb2.js";import{_ as be}from"./icon-arrow_2x.4ffddb8e.js";/* empty css              *//* empty css              */import{u as Ee}from"./notifi.b8826c81.js";import{_ as he}from"./icon_on_2x.5e96733d.js";import{_ as Be,a as We}from"./img-no-Positions_2x.194922ec.js";import{_ as Ve,a as Ge}from"./img-connect-wallet_2x.895a3a29.js";import"./status-block.13d98e72.js";const ze=le({props:{pItem:{type:Object,required:!0}},setup(e){const{t:u}=de(),j=re(),z=ve(),O=h(()=>z);h(()=>O.value.chainName?ye(O.value.chainName):{});const K=ie(),r=h(()=>K),y=()=>{O.value.chainName==="Aptos"?j.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):j.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},c=h(()=>r.value.allTokenObj&&e.pItem.token_a.address&&r.value.allTokenObj[e.pItem.token_a.address]&&r.value.allTokenObj[e.pItem.token_a.address].logo_url),$=h(()=>r.value.allTokenObj&&e.pItem.token_b.address&&r.value.allTokenObj[e.pItem.token_b.address]&&r.value.allTokenObj[e.pItem.token_b.address].logo_url),v=h(()=>r.value.feeOwedObj[e.pItem.tokenName]&&r.value.feeOwedObj[e.pItem.tokenName].feeOwed),a=h(()=>r.value.feeOwedObj[e.pItem.tokenName]&&r.value.feeOwedObj[e.pItem.tokenName].feesResult),N=h(()=>r.value.rewarderObj[e.pItem.tokenName]&&r.value.rewarderObj[e.pItem.tokenName].pendingRewarder),b=h(()=>r.value.rewarderObj[e.pItem.tokenName]&&r.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),w=h(()=>r.value.rewarderObj[e.pItem.tokenName]&&r.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr);console.log(w,"===>pendingRewarderArr");const P=S(0),L=S();B(()=>r.value.RATES,g=>{g&&(L.value=g)},{immediate:!0});const Q=g=>{var J;return(g==null?void 0:g.logoURI)||(g==null?void 0:g.logo_url)||((J=r.value.tokensObj[g==null?void 0:g.address])==null?void 0:J.logo_url)||(O.value.theme==="default"?Y("/image/coins/unknown.png"):Y("/image/coins/sui-unknown.png"))};return{tokensWarningObj:h(()=>r.value.tokensWarningObj),showNum:Ue,fromCoinUrl:c,toCoinUrl:$,decimalFormat:_e,clickDetails:y,t:u,addCommom:f,importIcon:Y,router:j,store:O,pendingRewarder:N,pendingFees:v,pendingRewarderArr:w,pendingFeesArr:a,checkNullObj:H,fixD:x,decimalUi:k,pendingRewarderView:b,aprAmount:P,getCoinIcon:Q,Decimal:Se}}});const ge=e=>(pe("data-v-42927f36"),e=e(),ce(),e),Ke={class:"position-item"},qe={class:"card-content"},Je={class:"left"},Me={class:"top card-header"},Xe={class:"token-item"},Ze={class:"item"},He={key:0,class:"token-warning"},Qe={class:"item"},Ye={key:0,class:"token-warning"},xe={class:"min-and-max"},es={class:"text"},ss={key:0,src:ke,alt:""},os={key:1,src:be,alt:""},ns={class:"text"},ts={class:"bottom"},as={class:"info-block-container"},is={class:"leabl"},ls={class:"text"},ds={key:0,class:"hover-rewarder"},rs={class:"rewarder-info"},ms={class:"left-rewarder"},us={alt:""},ps={class:"right-rewarder"},cs={class:"amount"},vs={key:0,class:"amount-usd"},ks={key:1,class:"amount-usd"},bs={class:"rewarder-info"},hs={class:"left-rewarder"},gs={alt:""},Is={class:"right-rewarder"},fs={class:"amount"},ws={key:0,class:"amount-usd"},$s={key:1,class:"amount-usd"},Rs={class:"leabl"},ys={key:0,class:"text"},Us={key:1,class:"text"},_s={key:2,class:"text"},Ss={key:3,class:"hover-rewarder"},Ns={class:"left-rewarder"},Os={alt:""},As={class:"right-rewarder"},Cs={class:"amount"},Ds={class:"amount-usd"},js={class:"leabl"},Ls={key:0,class:"text"},Ps={key:1,class:"text"},Ts={key:2,class:"hover-rewarder"},Fs={class:"left-rewarder"},Es={alt:""},Bs={class:"right-rewarder"},Ws={class:"amount"},Vs={class:"amount-usd"},Gs=ge(()=>s("div",{class:"more-img"},null,-1)),zs={class:"min-and-max"},Ks={class:"text"},qs={key:0,src:ke,alt:""},Js={key:1,src:be,alt:""},Ms={class:"text"},Xs={class:"info-block-container"},Zs={class:"left"},Hs={class:"info-block"},Qs={class:"leabl"},Ys={class:"text"},xs={class:"info-block cursor-block"},eo={class:"leabl"},so={key:0,class:"text"},oo={key:1,class:"text"},no={key:2,class:"hover-rewarder"},to={class:"left-rewarder"},ao={alt:""},io={class:"right-rewarder"},lo={class:"amount"},ro={class:"amount-usd"},mo={key:0,class:"info-block cursor-block"},uo={class:"leabl"},po={key:0,class:"text"},co={key:1,class:"text"},vo={key:2,class:"hover-rewarder"},ko={class:"left-rewarder"},bo={alt:""},ho={class:"right-rewarder"},go={class:"amount"},Io={class:"amount-usd"},fo=ge(()=>s("div",{class:"right"},[s("div",{class:"more-img"})],-1));function wo(e,u,j,z,O,K){var $,v;const r=Re,y=ue,c=Oe("image");return n(),t("div",Ke,[s("div",qe,[s("div",Je,[R(r,{"p-item":e.pItem,"current-status":(($=e.pItem)==null?void 0:$.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:u[0]||(u[0]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",Me,[s("div",Xe,[s("div",Ze,[D(s("img",null,null,512),[[c,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensWarningObj&&!e.tokensWarningObj[e.pItem.token_b.address]:e.tokensWarningObj&&!e.tokensWarningObj[e.pItem.token_a.address])?(n(),t("div",He)):I("",!0),s("div",null,[s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1),s("p",null,o(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+o(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)])]),s("div",Qe,[D(s("img",null,null,512),[[c,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensWarningObj&&!e.tokensWarningObj[e.pItem.token_a.address]:e.tokensWarningObj&&!e.tokensWarningObj[e.pItem.token_b.address])?(n(),t("div",Ye)):I("",!0),s("div",null,[s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1),s("p",null,o(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+o(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])])]),s("div",xe,[s("div",es,o(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:i(f))(("decimalUi"in e?e.decimalUi:i(k))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:i(f))(("decimalUi"in e?e.decimalUi:i(k))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(n(),t("img",ss)):(n(),t("img",os)),s("div",ns,o((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:i(f))(("decimalUi"in e?e.decimalUi:i(k))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:i(f))(("decimalUi"in e?e.decimalUi:i(k))(e.pItem.maxPrice,6)))+" "+o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])]),s("div",ts,[s("div",as,[s("div",{class:G(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",is,o(e.$t("common.liquidity")),1),s("div",ls," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:i(f))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",ds,[s("div",rs,[s("div",ms,[D(s("img",us,null,512),[[c,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ps,[s("div",cs,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(k))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:i(k))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",ks,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:i(x))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",vs,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:i(x))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",bs,[s("div",hs,[D(s("img",gs,null,512),[[c,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",Is,[s("div",fs,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(k))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:i(k))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",$s,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:i(k))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",ws,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:i(k))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):I("",!0)],2),s("div",{class:G(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",Rs,o(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(n(),t("div",ys," $ -- ")):isNaN(e.pendingFees)?(n(),t("div",_s,[R(y,{size:"small"})])):(n(),t("div",Us,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:i(f))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",Ss,[(n(!0),t(W,null,V(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",Ns,[D(s("img",Os,null,512),[[c,e.getCoinIcon(a)]]),s("span",null,o(a.symbol),1)]),s("div",As,[s("div",Cs,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:i(f))(("decimalUi"in e?e.decimalUi:i(k))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",Ds,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i(f))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:i(H))((v=e.pItem)==null?void 0:v.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",{key:0,class:G(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",js,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",Ls," $"+o(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",Ps,[R(y,{size:"small"})])),e.pendingRewarder>0?(n(),t("div",Ts,[(n(!0),t(W,null,V(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",Fs,[D(s("img",Es,null,512),[[c,a.logoURI]]),s("span",null,o(a.symbol),1)]),s("div",Bs,[s("div",Ws,o(("decimalUi"in e?e.decimalUi:i(k))(a.amount,a.decimals)),1),s("div",Vs,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i(f))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)],2)):I("",!0),Gs])])])]),s("div",{class:"h5-bottom",onClick:u[1]||(u[1]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",zs,[s("div",Ks,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(k))(1/e.pItem.minPrice,6):("decimalUi"in e?e.decimalUi:i(k))(e.pItem.minPrice,6)),1),e.store.theme=="default"?(n(),t("img",qs)):(n(),t("img",Js)),s("div",Ms,o(e.pItem.maxPrice.indexOf("+")>-1?"∞":e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(k))(1/e.pItem.maxPrice,6):("decimalUi"in e?e.decimalUi:i(k))(e.pItem.maxPrice,6))+" "+o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",Xs,[s("div",Zs,[s("div",Hs,[s("div",Qs,o(e.$t("common.liquidity")),1),s("div",Ys," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:i(f))(e.pItem.amountUSD,2)),1)]),s("div",xs,[s("div",eo,o(e.$t("newAdd.pendingFees")),1),isNaN(e.pendingFees)?(n(),t("div",oo,[R(y,{size:"small"})])):(n(),t("div",so,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:i(f))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",no,[(n(!0),t(W,null,V(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",to,[D(s("img",ao,null,512),[[c,e.getCoinIcon(a)]]),s("span",null,o(a.symbol),1)]),s("div",io,[s("div",lo,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:i(f))(("decimalUi"in e?e.decimalUi:i(k))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",ro,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i(f))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:i(H))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",mo,[s("div",uo,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",po," $"+o(e.pendingRewarder>0?("decimalUi"in e?e.decimalUi:i(k))(e.pendingRewarder,2):0),1)):(n(),t("div",co,[R(y,{size:"small"})])),e.pendingRewarder>0?(n(),t("div",vo,[(n(!0),t(W,null,V(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",ko,[D(s("img",bo,null,512),[[c,a.logoURI]]),s("span",null,o(a.symbol),1)]),s("div",ho,[s("div",go,o(a.amount),1),s("div",Io,"$"+o(("decimalUi"in e?e.decimalUi:i(k))(a.amountUSD,2)),1)])]))),128))])):I("",!0)])):I("",!0)]),fo])])])}const $o=me(ze,[["render",wo],["__scopeId","data-v-42927f36"]]),Ro=le({setup(){const e=S(!1),{t:u}=de(),j=S(["position"]),z=re(),O=S(""),K=ve(),r=h(()=>K),y=h(()=>r.value.chainName?Fe[r.value.chainName]:{});let c=S([]);const $=ie(),v=h(()=>$),a=Ne(),N=h(()=>a),b=S(!1),w=S(u("tab.all")),P=S([u("tab.layerZero"),u("tab.wormhole"),u("tab.celer")]),L=S(!0),Q=S("TVL"),ee=()=>{e.value=!0,c.value=[],N.value.address&&$.getMyPositons(N.value.address,v.value.poolsObj,r.value.chainName),setTimeout(()=>{e.value=!1},1e3)};Ae(()=>{c.value=[],document.addEventListener("click",()=>{b.value=!1}),$.setMyPositionsLoading(!0)}),Ce(()=>{document.addEventListener("click",()=>{b.value=!1})}),De(()=>{N.value.connected||(c.value=[])});const g=p=>{e.value=!0;let d=[];v.value.myPositions.forEach(l=>{var T,F,M,X,oe,ne;let m,U;const _=l.amountA*((T=v.value.RATES[l.token_a.address])==null?void 0:T.price),A=l.amountB*((F=v.value.RATES[l.token_b.address])==null?void 0:F.price);console.log("0330###updateLpList####ele.amountA##",l.amountA),console.log("0330###updateLpList####ele.amountB##",l.amountB),console.log("0330###updateLpList####ele.token_a.address##",l.token_a.address),console.log("0330###updateLpList####ele.token_b.address##",l.token_b.address),console.log("0330###updateLpList####pools.value.RATES[ele.token_a.address]?.price##",(M=v.value.RATES[l.token_a.address])==null?void 0:M.price),console.log("0330###updateLpList####pools.value.RATES[ele.token_b.address]?.price##",(X=v.value.RATES[l.token_b.address])==null?void 0:X.price),(oe=v.value.RATES[l.token_a.address])!=null&&oe.price&&((ne=v.value.RATES[l.token_b.address])!=null&&ne.price)?(m=_+A,U=_+A):(m=" --",U=0),d.push({...l,amountUSD:m,amountUSDOrigin:U,tokenARates:_,tokenBRates:A})}),console.log("0512###updateLpList###labelValue.value###",w.value),console.log("0512###updateLpList###newResult###",d),w.value!="All"?L.value?(c.value=d.sort((l,m)=>Number(m.amountUSDOrigin)-Number(l.amountUSDOrigin)),e.value=!1):(c.value=d.sort((l,m)=>Number(l.amountUSDOrigin)-Number(m.amountUSDOrigin)),e.value=!1):(console.log("0507###updateLpList###select.value###",L.value),console.log("0507###updateLpList###newResult###",d),L.value?(c.value=d.sort((l,m)=>m.amountUSDOrigin-l.amountUSDOrigin),e.value=!1):(c.value=d.sort((l,m)=>l.amountUSDOrigin-m.amountUSDOrigin),e.value=!1)),console.log(c.value,"list.value========>")};B(()=>[v.value.myPositions,v.value.RATES],([p,d])=>{p&&d&&g()},{immediate:!0}),B(()=>[N.value.address,v.value.poolConfigList,v.value.poolsObj,r.value.chainName],([p,d,l,m])=>{var U,_,A;p&&d&&d.length>0&&m&&(m!=null&&m.toLowerCase().includes((U=d[0])==null?void 0:U.chain))&&!H(l)&&(m==="Aptos"?d.length===Object.values(l).length:(A=(_=Object.values(l)[0])==null?void 0:_.chain)!=null&&A.includes("sui"))&&$.getMyPositons(N.value.address,l,m)},{immediate:!0,deep:!0}),B(()=>w.value,p=>{g()}),B(()=>L.value,p=>{g()});const J=p=>{const d=[];P.value.forEach((l,m)=>{l==p?d[m]=w.value:d[m]=l}),P.value=d,w.value=p},q=Ee(),C=h(()=>q),se=h(()=>$),fe=async p=>{console.log("执行了"),await q.getSourceGroups();const d=C.value.sourceGroups&&C.value.sourceGroups.length>0&&C.value.sourceGroups[0]&&C.value.sourceGroups[0].sources||[];let l;for(let m=0;m<d.length;m++){const{pool_address:U,position_index:_}=JSON.parse(d[m].blockchainAddress);let A=!1,T;for(let F=0;F<p.length;F++){const{poolAddress:M,index:X}=p[F];U==M&&Number(X)==Number(_)&&(A=!0),T={pool_address:U,position_index:_},console.log(l,"====>hasPositionInfo"),console.log(T,"","取消订阅的仓位")}A||await q.subscribePosition(T,"",!1,!1)}},we=async()=>{await q.getSourceGroups(),console.log("全部取消");const p=C.value.sourceGroups&&C.value.sourceGroups.length>0&&C.value.sourceGroups[0]&&C.value.sourceGroups[0].sources||[];for(let d=0;d<p.length;d++){const{pool_address:l,position_index:m}=JSON.parse(p[d].blockchainAddress),{name:U}=p[d],_={pool_address:l,position_index:m};await q.subscribePosition(_,U,!1,!1)}},$e=h(()=>se.value.myPositionsLoading);return B(()=>se.value.myPositions,(p,d)=>{console.log(p,d,"===>newMyPositions, oldMyposition"),y.value.hasNotifi&&(p&&p.length>0&&d&&d.length!==p.length?fe(p):p&&p.length==0&&!$e.value&&we())},{immediate:!0}),{changeSortLabel:J,label:b,labelList:P,labelValue:w,select:L,selectValue:Q,t:u,pools:v,store:r,wallet:N,list:c,clickRefresh:ee,refresh:e,current:j,router:z,searchKey:O}}});const Ie=e=>(pe("data-v-e860bab4"),e=e(),ce(),e),yo={class:"position-title"},Uo=Ie(()=>s("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),_o=[Uo],So={class:"position-tab"},No={class:"search-tab"},Oo={key:0,class:"positionNum"},Ao={class:"search-container"},Co={class:"value"},Do=Ie(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),jo=[Do],Lo={key:0,class:"select-item"},Po=["onClick"],To={key:0,src:he,alt:""},Fo={key:1,class:"fan-img",src:he,alt:""},Eo={key:0,class:"loading-global position-loading"},Bo={key:1,class:"position-list"},Wo={key:2,class:"no-data"},Vo={key:0,src:Be,alt:""},Go={key:1,src:We,alt:""},zo={key:3,class:"no-data"},Ko={key:0,src:Ve,alt:""},qo={key:1,src:Ge,alt:""};function Jo(e,u,j,z,O,K){const r=te("mail-outlined"),y=Te,c=te("appstore-outlined"),$=je,v=ue,a=$o,N=Le;return n(),t("div",{class:G(e.list&&e.list.length===0&&e.wallet.connected||!e.wallet.connected?"position-center position-list-container":"position-list-container")},[s("div",yo,[s("div",null,o(e.$t("common.concentratedPools")),1),(n(),t("svg",{"aria-hidden":"true",class:G(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:u[0]||(u[0]=(...b)=>e.clickRefresh&&e.clickRefresh(...b))},_o,2))]),s("div",So,[s("div",No,[R($,{selectedKeys:e.current,"onUpdate:selectedKeys":u[2]||(u[2]=b=>e.current=b),mode:"horizontal"},{default:E(()=>[R(y,{key:"pools",onClick:u[1]||(u[1]=b=>e.router.push("/pools"))},{icon:E(()=>[R(r)]),default:E(()=>[Z(" "+o(e.$t("menu.pools")),1)]),_:1}),R(y,{key:"position"},{icon:E(()=>[R(c)]),default:E(()=>[Z(" "+o(e.$t("common.myPosition")),1),e.list.length>0?(n(),t("span",Oo," ("+o(e.list.length)+")",1)):I("",!0)]),_:1})]),_:1},8,["selectedKeys"])]),s("div",Ao,[e.store.theme=="default"?(n(),t("div",{key:0,class:"search-label",onClick:u[3]||(u[3]=ae(b=>e.label=!e.label,["stop"]))},[s("span",null,o(e.$t("newAdd.label")),1),s("div",Co,o(e.labelValue),1),(n(),t("svg",{"aria-hidden":"true",class:G(e.label?"show-icon icon":"icon")},jo,2)),e.label?(n(),t("div",Lo,[(n(!0),t(W,null,V(e.labelList,(b,w)=>(n(),t("div",{key:w,class:"select-menu-item",onClick:P=>e.changeSortLabel(b)},o(b),9,Po))),128))])):I("",!0)])):I("",!0),s("div",{class:"search-select",onClick:u[4]||(u[4]=ae(b=>e.select=!e.select,["stop"]))},[s("div",null,[Z(" TVL "),e.select?(n(),t("img",To)):(n(),t("img",Fo))])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",Eo,[R(v)])):I("",!0),e.list&&e.list.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),t("div",Bo,[(n(!0),t(W,null,V(e.list,(b,w)=>(n(),Pe(a,{key:w,"p-item":b},null,8,["p-item"]))),128))])):I("",!0),e.list&&e.list.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",Wo,[e.store.theme=="default"?(n(),t("img",Vo)):(n(),t("img",Go)),s("span",null,o(e.$t("common.noLiquidityPositions")),1)])):I("",!0),e.wallet.connected?I("",!0):(n(),t("div",zo,[e.store.theme=="default"?(n(),t("img",Ko)):(n(),t("img",qo)),R(N,{class:"connect-wallet",onClick:u[5]||(u[5]=b=>e.wallet.setIsShowWalletModal(!0))},{default:E(()=>[Z(o(e.$t("button.connectWallet")),1)]),_:1})]))],2)}const rn=me(Ro,[["render",Jo],["__scopeId","data-v-e860bab4"]]);export{rn as default};
