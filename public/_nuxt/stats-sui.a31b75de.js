import{a as B,r as b,m as T,D as G,y as O,C as Ae,o as d,f as k,h as s,v as V,F as ae,s as ne,i as c,x as F,a0 as He,dh as Re,J as xe,z as le,e as M,u as Ue,c as E,S as We,M as N,w as K,p as re,k as ie,b as ze}from"./entry.9f1d8bf2.js";/* empty css              */import"./index.74a42cc2.js";import{a as ce}from"./pool.50412446.js";import{c as se}from"./index.8db8d6d5.js";import{l as Be}from"./lodash.c75446e1.js";import{o as z,c as j}from"./index.7ae3cf46.js";import{u as Q}from"./stats.9cd00e9d.js";import{f as Me}from"./formatter.cb76465a.js";import"./index.b8f06a80.js";import{i as Ye}from"./import-icon.de3e6c66.js";import{R as ue,A as Fe,P as Ee}from"./to-add.4503abb4.js";import{u as ee}from"./useToken.cfeb3859.js";import{T as pe,N as de,H as me,a as Oe}from"./h5-table-card.6fbf1eb9.js";import{u as ve}from"./token.4023bb6f.js";import{S as je}from"./select-tab.2a0b8693.js";import{u as Je}from"./useStatsData.c3b597de.js";import"./install.58dda1e0.js";import"./decimal.a2826370.js";import"./decimal.765d8738.js";/* empty css              */import"./coin-img.5bcdd2aa.js";import"./token-warning_2x.e7e03a66.js";import"./token-warning-new.6b924665.js";import"./nuxt-link.dbbc1b92.js";import"./icon_farms_2x.7ab35ea6.js";import"./farms.4b57add3.js";import"./icon_autopools_2x.d51e8d46.js";import"./icon_autopools_2x.12611a4c.js";import"./icon-tooltip.a301dfd5.js";import"./icon_fee_2x.38827d08.js";import"./icon_rewards_2x.7c681658.js";import"./pool.0edf735a.js";import"./fetchFun.e09bcb23.js";const qe={class:"stats-chart-container"},Ge={class:"chart-top"},Ke={class:"trading-vol"},Qe={class:"title"},Xe={class:"text"},Ze=["innerHTML"],et={class:"time-list"},tt=["onClick"],ot={key:0,class:"loading-box"},st={class:"chart-content"},at=["id"];var Z=(e=>(e.D="day",e.W="wek",e.M="mon",e))(Z||{}),_e=(e=>(e[e.D=40]="D",e[e.W=30]="W",e[e.M=20]="M",e))(_e||{}),U=(e=>(e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec",e))(U||{}),he=(e=>(e[e.D=1]="D",e[e.W=4]="W",e[e.M=12]="M",e))(he||{}),ge=(e=>(e[e.D=1]="D",e[e.W=2]="W",e[e.M=4]="M",e))(ge||{});const nt=B({__name:"stats-sui-chart",props:{chartType:{type:String,default:"tvl"}},setup(e){const r=e,a=b("D"),w=["D","W","M"],S=b(""),D=b("24H"),_=ce();T(()=>_);const m=b(),n=b(),$=b(""),u=b(!1),H=Q(),f=T(()=>H),C=T(()=>f.value.overallStatistics);G(()=>[C.value,r.chartType],([l,p])=>{j(l)||($.value=p=="tvl"?l.totalValueLockedDisplay:l.volInUsd24h)},{immediate:!0});const i=async()=>{u.value=!0;try{const l=_e[a.value],{data:p}=r.chartType=="tvl"?await fetch(`${se.Sui.api}/v2/sui/histogram/all?date_type=${Z[a.value]}&typ=pure_tvl`).then(g=>g.json()):await fetch(`${se.Sui.api}/v2/sui/histogram/all?date_type=${Z[a.value]}&typ=vol`).then(g=>g.json());console.log("ðŸš€ ~ getHistogram ~ data:",p);const P=p.list.map(g=>g.num),I=p.list.map(g=>g.date);m.value=P,n.value=I,v(P,I,l),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:70 ~ getHistogram ~ data:",p)}catch(l){console.info("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:50 ~ getHistogram ~ error:",l)}},h=b(),v=(l,p,P)=>{const I=document.getElementById(`stats-chart-${r.chartType}`),g=He(I);h.value=g;let R={animation:!1,tooltip:{trigger:"axis",position:function(A,Y,x,W,J){return[A[0]-50,"10%"]},backgroundColor:"#28353F",borderColor:"transparent",formatter:function(A){L(A)},padding:0,axisPointer:{type:"line",lineStyle:{width:a.value=="D"?1:a.value=="W"?2:4,type:"solid",color:"#456D89"}}},xAxis:{type:"category",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},splitArea:{show:!1},data:p.reverse(),inverse:!0,axisLabel:{interval:parseInt(Number(l.length)/6),formatter:(A,Y)=>{const x=z(Date.parse(A)-288e5,"YMD")||"";let W,J=x.slice(5,7),X=U[Number(J)];return a.value=="M"?W=X:W=x.slice(8,10),`${W}`}}},yAxis:{show:!1,max:function(A){return Math.ceil(A.max)}},series:[{data:l.reverse(),inverse:!0,type:r.chartType=="tvl"?"line":"bar",symbol:"none",itemStyle:{normal:{barBorderRadius:1,color:"#72C1F7"}},areaStyle:{color:new Re(0,0,0,1,[{offset:0,color:"rgba(0, 128, 255, 0.3)"},{offset:1,color:"rgba(0, 128, 255, 0)"}])},barWidth:y.value?he[a.value]:ge[a.value]}],grid:{left:20,top:5,bottom:24,right:20}};u.value=!1,R&&g.setOption(R),g&&g.resize(),g.on("globalout",A=>{$.value=r.chartType=="tvl"?C.value.totalValueLockedDisplay:C.value.volInUsd24h,D.value="24H",o()})};G(()=>a.value,(l,p)=>{(!p||l!==p)&&i()},{immediate:!0});const y=b(!0),t=Be.debounce(()=>{document.body.clientWidth>750?y.value=!0:y.value=!1,!m.value&&!n.value?i():h.value&&h.value.resize()},300);O(()=>{window.addEventListener("resize",t),o()}),Ae(()=>{window.removeEventListener("resize",t)});const o=()=>{const l=z(Date.parse(new Date().toUTCString()),"YMD")||"";let p=l.slice(5,7),P=U[Number(p)];const I=l.slice(8,10),g=P,R=l.slice(0,4);S.value=g+"&nbsp;"+I+",&nbsp;"+R+"&nbsp;(UTC)"},L=l=>{$.value=Me(l[0].value,2),D.value=a.value=="D"?"24H":a.value=="W"?"7D":"30D";const p=Date.parse(l[0].axisValue),P=new Date(p);P.setDate(P.getDate()+7);const I=new Date(p);I.setDate(I.getDate()+31);const g=P.toUTCString(),R=I.toUTCString(),A=z(Date.parse(R),"YMD")||"",Y=z(Date.parse(new Date().toUTCString()),"YMD")||"",x=Date.parse(g)>Date.parse(new Date().toUTCString())?z(Date.parse(new Date().toUTCString()),"YMD")||"":z(Date.parse(g),"YMD")||"";let W=Y.slice(5,7),J=U[Number(W)];const X=Y.slice(8,10),Te=J,ke=Y.slice(0,4);let te=l[0].axisValue.slice(5,7),De=U[Number(te)];const oe=l[0].axisValue.slice(8,10),q=De,$e=l[0].axisValue.slice(0,4);let we=x.slice(5,7),Ce=U[Number(we)];const Le=x.slice(8,10),Ie=Ce,Ve=x.slice(0,4),Ne=U[Number(te)+1],Pe=A.slice(0,4);a.value=="D"?S.value=q+"&nbsp;"+oe+",&nbsp;"+$e+"&nbsp;(UTC)":a.value=="W"?S.value=oe+"&nbsp;"+q+"-"+Le+"&nbsp;"+Ie+"&nbsp;,&nbsp;"+Ve+"&nbsp;(UTC)":S.value=Date.parse(R)>=Date.parse(new Date().toUTCString())?q+"&nbsp;01-"+Te+"&nbsp;"+X+",&nbsp;"+ke+"&nbsp;(UTC)":q+"&nbsp;01-"+Ne+"&nbsp;01,&nbsp;"+Pe+"&nbsp;(UTC)"};return(l,p)=>{const P=xe;return d(),k("div",qe,[s("div",Ge,[s("div",Ke,[s("div",Qe,V(e.chartType=="tvl"?"Total Value Locked":`Trading Volume  (${D.value})`),1),s("div",Xe," $"+V($.value===""?"--":Number($.value)==0?0:$.value),1),s("span",{innerHTML:S.value},null,8,Ze)]),s("div",et,[(d(),k(ae,null,ne(w,I=>s("div",{key:I,class:le(["time-item",I==a.value?"time-item-active":""]),onClick:g=>a.value=I},V(I),11,tt)),64))])]),u.value?(d(),k("div",ot,[c(P)])):F("",!0),s("div",st,[s("div",{id:`stats-chart-${e.chartType}`,class:"stats-chart"},null,8,at)])])}}});const fe=M(nt,[["__scopeId","data-v-5ddb5488"]]),lt=B({setup(){const e=Q(),r=T(()=>e),a=T(()=>r.value.overallStatistics),w=T(()=>[{img_url:"/sui-image/icon_cumulativevolume@2x.png",label:"Cumulative Volume",symbol:"$",value:a.value.cumulativeVolumeDisplay},{img_url:"/sui-image/icon_totalvaluelocked@2x.png",label:"Total Value Locked",symbol:"$",value:a.value.totalValueLockedDisplay},{img_url:"/sui-image/icon_cumulativetransactions@2x.png",label:"Cumulative Transactions",symbol:"",value:a.value.cumulativeTransactionsDisplay},{img_url:"/sui-image/icon_accounts@2x.png",label:"Total Accounts",symbol:"",value:a.value.totalAccountsDisplay}]);return{checkNullObj:j,overallStatistics:a,statisticsList:w}}});const rt={class:"stats-sui-statistics"},it={class:"img-label"},ct=["src"],ut={class:"label"},pt={key:1,class:"value"};function dt(e,r,a,w,S,D){const _=We;return d(),k("div",rt,[(d(!0),k(ae,null,ne(e.statisticsList,m=>(d(),k("div",{key:m.label,class:"item"},[s("div",it,[s("img",{src:m.img_url},null,8,ct),s("div",ut,V(m.label),1)]),("checkNullObj"in e?e.checkNullObj:Ue(j))(e.overallStatistics)?(d(),E(_,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(d(),k("div",pt,V(m.symbol)+V(m.value),1))]))),128))])}const be=M(lt,[["render",dt],["__scopeId","data-v-a6a15f4f"]]),mt=B({components:{RankIcon:ue,StatsAprTips:Fe,TableLoading:pe,StatsNoData:de,H5TableCard:me},setup(){const{getToken:e}=ee(),r=Q(),a=T(()=>r),w=ve(),S=T(()=>w.allTokensObj),D=T(()=>a.value.poolsStatsList),_=b(!0),m=b(null);O(()=>{window.scroller=m.value});const n=b([]),$=T(()=>n.value.map(h=>Object.assign({},{random:Math.random()},h))),u=b({label:"Volume (24H)",sort:"desc"}),H=i=>{u.value=i,f(D.value)},f=async i=>{let h=[];for(let t=0;t<i.length;t++){const o=i[t],L=await e(i[t].displayTokenAAddress),l=await e(i[t].displayTokenBAddress),p=[];L!=null&&L.labels&&p.push(...L.labels),l!=null&&l.labels&&p.push(...l.labels);const P={...o,tokenA:L,tokenB:l,labels:[...new Set(p)]};h.push(P)}let v=h,y=[];u.value.label=="Volume (24H)"&&(y=u.value.sort=="desc"?v.sort((t,o)=>o.volume24-t.volume24):v.sort((t,o)=>t.volume24-o.volume24)),u.value.label=="Volume (7D)"&&(y=u.value.sort=="desc"?v.sort((t,o)=>o.volume7d-t.volume7d):v.sort((t,o)=>t.volume7d-o.volume7d)),u.value.label=="Liquidity"&&(y=u.value.sort=="desc"?v.sort((t,o)=>o.tvl-t.tvl):v.sort((t,o)=>t.tvl-o.tvl)),u.value.label=="Fees (24H)"&&(y=u.value.sort=="desc"?v.sort((t,o)=>o.fees24-t.fees24):v.sort((t,o)=>t.fees24-o.fees24)),u.value.label=="APR (24H)"&&(y=u.value.sort=="desc"?v.sort((t,o)=>o.totalApr-t.totalApr):v.sort((t,o)=>t.totalApr-o.totalApr)),n.value=y,console.log("ðŸš€ ~ buildPoolList ~ pageList:",n.value,y),_.value=!1};return G(()=>[D.value,S.value],([i,h])=>{i&&i.length>0&&h&&!j(h)&&f(i)},{immediate:!0}),{pageList:n,tableColumns:[{title:"Pools",hasSort:!1,tdWidth:"330px",isNotShowTitle:!0,component:"pool-name-block"},{title:"Liquidity",hasSort:!0,tdWidth:"200px",value:"tvlDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"200px",value:"volume24Display"},{title:"Volume (7D)",hasSort:!0,tdWidth:"200px",value:"volume7dDisplay"},{title:"Fees (24H)",hasSort:!0,tdWidth:"175px",value:"fees24Display"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"175px",component:"apr-tips"}],scroller:m,list:$,isPoolLoading:_,sortInfo:u,changeSort:H}}});const vt=e=>(re("data-v-b1d82ea6"),e=e(),ie(),e),_t={class:"stats-sui-pools-table"},ht={class:"h5-table"},gt={class:"pc-table"},ft={key:1,class:"virtual-table"},bt=vt(()=>s("th",null,"Pool",-1));function St(e,r,a,w,S,D){const _=N("H5TableCard"),m=N("TableLoading"),n=N("RankIcon"),$=Ee,u=N("StatsAprTips"),H=N("RecycleScroller"),f=N("StatsNoData");return d(),k("div",_t,[s("div",ht,[c(_,{"h5-title":"Pools","key-field":"poolAddress","sort-info":e.sortInfo,"item-size":258,"data-source-length":10,loading:e.isPoolLoading,columns:e.tableColumns,"data-source":e.pageList,onChangeSort:e.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),s("div",gt,[e.isPoolLoading?(d(),E(m,{key:0,columns:e.tableColumns,"data-source-length":10},null,8,["columns"])):(d(),k("table",ft,[c(H,{ref:"scroller",class:"scroller",items:e.list,"item-size":86,"key-field":"poolAddress","page-mode":"",full:"",page:"",prerender:20,buffer:500},{before:K(()=>[s("thead",null,[bt,c(n,{label:"Liquidity","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(n,{label:"Volume (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(n,{label:"Volume (7D)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(n,{label:"Fees (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(n,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"])])]),default:K(({item:C})=>[(d(),k("tr",{key:C==null?void 0:C.poolAddress},[s("td",null,[c($,{"pool-info":C},null,8,["pool-info"])]),s("td",null,V(C.tvlDisplay||"--"),1),s("td",null,V(C.volume24Display||"--"),1),s("td",null,V(C.volume7dDisplay||"--"),1),s("td",null,V(C.fees24Display||"--"),1),s("td",null,[c(u,{"pool-info":C},null,8,["pool-info"])])]))]),_:1},8,["items"])]))]),!e.isPoolLoading&&e.pageList&&e.pageList.length==0?(d(),E(f,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):F("",!0)])}const Se=M(mt,[["render",St],["__scopeId","data-v-b1d82ea6"]]),yt=B({components:{TokenBlock:Oe,RankIcon:ue,TableLoading:pe,NoDataStats:de,H5TableCard:me},setup(){const{getToken:e}=ee(),r=Q(),a=T(()=>r),w=T(()=>a.value.tokensStatsList),S=b(!0),D=b(null);O(()=>{window.scroller=D.value});const _=b([]),m=T(()=>_.value.map(h=>Object.assign({},{random:Math.random()},h))),n=b({label:"Volume (24H)",sort:"desc"}),$=i=>{n.value=i,u(w.value)},u=async i=>{let h=[];for(let t=0;t<i.length;t++){const o=i[t],L=await e(o==null?void 0:o.address),l=[];L!=null&&L.labels&&l.push(...L.labels);const p={...o,logoURI:L==null?void 0:L.logo_url,labels:[...new Set(l)]};h.push(p)}let v=h,y=[];n.value.label=="Price"&&(y=n.value.sort=="desc"?v.sort((t,o)=>o.price-t.price):v.sort((t,o)=>t.price-o.price)),n.value.label=="Price Change"&&(y=n.value.sort=="desc"?v.sort((t,o)=>o.priceChange-t.priceChange):v.sort((t,o)=>t.priceChange-o.priceChange)),n.value.label=="Volume (24H)"&&(y=n.value.sort=="desc"?v.sort((t,o)=>o.volume24-t.volume24):v.sort((t,o)=>t.volume24-o.volume24)),n.value.label=="TVL"&&(y=n.value.sort=="desc"?v.sort((t,o)=>o.tvl-t.tvl):v.sort((t,o)=>t.tvl-o.tvl)),_.value=y,S.value=!1},H=ve(),f=T(()=>H.allTokensObj);return G(()=>[w.value,f.value],([i,h])=>{i&&i.length>0&&h&&!j(h)&&u(i)},{immediate:!0}),{pageList:_,tableColumns:[{title:"Token",hasSort:!1,tdWidth:"370px",isNotShowTitle:!0,component:"token-block"},{title:"Price",hasSort:!0,tdWidth:"240px",value:"priceDisplay"},{title:"Price Change",hasSort:!0,tdWidth:"215px",value:"priceChangeDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"240px",value:"volume24Display"},{title:"TVL",hasSort:!0,tdWidth:"215px",value:"tvlDisplay"}],scroller:D,list:m,isTokenLoading:S,sortInfo:n,changeSort:$}}});const Tt=e=>(re("data-v-5b2739ad"),e=e(),ie(),e),kt={class:"aptos-stats-sui-tokens-table"},Dt={class:"h5-table"},$t={class:"pc-table"},wt={key:1,class:"virtual-table"},Ct=Tt(()=>s("th",null,"Token",-1));function Lt(e,r,a,w,S,D){const _=N("H5TableCard"),m=N("TableLoading"),n=N("RankIcon"),$=N("TokenBlock"),u=N("RecycleScroller"),H=N("NoDataStats");return d(),k("div",kt,[s("div",Dt,[c(_,{"h5-title":"Tokens","key-field":"address","sort-info":e.sortInfo,"item-size":218,"data-source-length":10,loading:e.isTokenLoading,columns:e.tableColumns,"data-source":e.pageList,onChangeSort:e.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),s("div",$t,[e.isTokenLoading?(d(),E(m,{key:0,columns:e.tableColumns,"data-source-length":10},null,8,["columns"])):(d(),k("table",wt,[c(u,{ref:"scroller",class:"scroller",items:e.list,"item-size":86,"key-field":"address","page-mode":"",full:"",page:"",prerender:20,buffer:500},{before:K(()=>[s("thead",null,[Ct,c(n,{label:"Price","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(n,{label:"Price Change","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(n,{label:"Volume (24H)","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"]),c(n,{label:"TVL","sort-info":e.sortInfo,onSort:e.changeSort},null,8,["sort-info","onSort"])])]),default:K(({item:f})=>[(d(),k("tr",{key:f==null?void 0:f.address},[s("td",null,[c($,{"token-info":f,"justify-content":"flex-start","is-have-label":!0},null,8,["token-info"])]),s("td",null,"$"+V(f.priceDisplay||"--"),1),s("td",null,[s("span",{class:le(f.priceChangeDisplay.includes("-")?"redecue-change-price":"add-change-price")},V(f.priceChangeDisplay||"--"),3)]),s("td",null,V(f.volume24Display||"--"),1),s("td",null,V(f.tvlDisplay||"--"),1)]))]),_:1},8,["items"])]))]),!e.isTokenLoading&&e.pageList&&e.pageList.length==0?(d(),E(H,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No tokens found"})):F("",!0)])}const ye=M(yt,[["render",Lt],["__scopeId","data-v-5b2739ad"]]),It=B({components:{StatsTab:je,StatsPoolsTable:Se,StatsTokensTable:ye},setup(){const{getTokenList:e}=ee(),r=[{name:"Pools",logo:"/sui-image/icon_pools@2x.png"},{name:"Tokens",logo:"/sui-image/icon_tokens@2x.png"}],a=b("Pools");return O(()=>{e()}),{currentTab:a,tabList:r}}});const Vt={class:"pools-tokens-transitions"},Nt={class:"tab-box"},Pt={key:0,class:"table-box"},At={key:1,class:"table-box"};function Ht(e,r,a,w,S,D){const _=N("StatsTab"),m=Se,n=ye;return d(),k("div",Vt,[s("div",Nt,[c(_,{"tab-list":e.tabList,"current-tab":e.currentTab,onOnClick:r[0]||(r[0]=$=>{e.currentTab=$.name})},null,8,["tab-list","current-tab"])]),e.currentTab=="Pools"?(d(),k("div",Pt,[c(m)])):F("",!0),e.currentTab=="Tokens"?(d(),k("div",At,[c(n)])):F("",!0)])}const Rt=M(It,[["render",Ht],["__scopeId","data-v-496d4079"]]),xt=B({components:{StatsSuiChart:fe,StatsSuiStatistics:be,PoolsTokensTransitions:Rt},setup(){const e=ce(),r=T(()=>e),a=ze(),w=T(()=>r.value.chainName),{getStatusData:S}=Je();O(async()=>{S()});const D=T(()=>r.value.theme);return{chainName:w,theme:D,store:r,importIcon:Ye,router:a}}});const Ut={class:"stats-sui-container"},Wt={class:"title"},zt={class:"chart-box"};function Bt(e,r,a,w,S,D){const _=fe,m=be,n=N("PoolsTokensTransitions");return d(),k("div",Ut,[s("div",Wt,V(e.$t("menu.stats")),1),s("div",zt,[c(_,{"chart-type":"tvl"}),c(_,{"chart-type":"vol"})]),c(m),c(n)])}const ko=M(xt,[["render",Bt],["__scopeId","data-v-03e3c28a"]]);export{ko as default};
