import{_ as ka}from"./refresh-icon.13803e6f.js";import{P as ya,_ as Ia,a as Ta}from"./token-info.fdbb815a.js";import{_ as Oa}from"./network-tips.bfd7fa22.js";import{_ as Na}from"./coin-select.94faa9f1.js";import{_ as $a}from"./swap-setting.41512485.js";import{_ as Ra}from"./token-warning-modal.d847fb1a.js";import{a as $o,$ as Ma,m as A,r as d,A as _,e as Ro,l as ce,C as Pa,o as T,c as ae,w as Ne,h as r,x as N,u as Be,I as je,f as U,y as Se,j as ve,G as E,i as K,F as ao,B as Mo,p as Po,k as Fo,b as Fa,a2 as Ba,a3 as ja,z as Ua,q as La,s as Ea,fg as To,P as qa,J as Wa,Y as Da}from"./entry.acdca605.js";/* empty css              *//* empty css              */import{i as De}from"./import-icon.de3e6c66.js";import{a as Bo,u as jo,e as Ha,b as Ya}from"./index.694816b3.js";import{a as H,b as $e,d as be,c as Le,e as za,g as Ja,p as Oo,h as Ue,M as No}from"./common.f371ec22.js";import{u as Ga,c as he,b as Ke}from"./index.be8ffb7b.js";import"./decimal.a2826370.js";import{A as Ka,R as Qa,c as We,u as Xa}from"./confetti.module.cd5cb6c7.js";import{U as Za}from"./underline-tab.a5f6a1bc.js";import{N as Va}from"./new-assets-card.08a58b38.js";import{I as _a}from"./icon-tooltip.b455067c.js";import{D as m}from"./decimal.765d8738.js";import{I as xa}from"./icon-slippage.398e5b25.js";/* empty css              */import"./index.8f6ad64c.js";/* empty css              */import"./install.d2555671.js";import"./token-warning_2x.3177c444.js";import"./img-no-Positions_2x.a78979a7.js";import"./img-no-Positions_2x.908b2c24.js";/* empty css              */import"./icon-error_2x.51894fef.js";import"./check-box.c41d9c2e.js";import"./coin-img.3e1f734a.js";import"./limit-beta.9ef1a890.js";import"./token-warning.4623ef64.js";import"./useDebounceFunction.0382450c.js";const en=$o({components:{Modal:Ma,PriceImpactTooltip:ya},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,default:0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,c){const Y=Bo(),k=A(()=>Y),q=jo(),ne=A(()=>q),l=C=>{var i;return(C==null?void 0:C.logoURI)||(C==null?void 0:C.logo_url)||((i=k.value.tokensObj[C==null?void 0:C.address])==null?void 0:i.logo_url)||(ne.value.theme==="default"?De("/image/coins/unknown.png"):De("/image/coins/sui-unknown.png"))},te=d(!1),z=A(()=>ne.value.chainName),J=async()=>{c.emit("to-swap")};d([]);const re=d(0),Q=d(""),x=d(""),me=A(()=>ne.value.slippage);_(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,me.value],([C,i,u,j,w,D])=>{if(C&&i&&u&&j&&D)if(w){const R=new m(i).mul(new m(D/100));x.value=new m(i).sub(R).toString()}else{const R=new m(C).mul(new m(D/100));Q.value=new m(C).add(R).toString()}},{immediate:!0});const se=d(""),ke=A(()=>{var C,i,u,j,w,D,R,ee,h,F,W,n;return(u=(i=k==null?void 0:k.value)==null?void 0:i.tokensObj[(C=e==null?void 0:e.fromCoin)==null?void 0:C.address])!=null&&u.pyth_id&&((D=(w=k==null?void 0:k.value)==null?void 0:w.tokensObj[(j=e==null?void 0:e.fromCoin)==null?void 0:j.address])==null?void 0:D.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(h=(ee=k==null?void 0:k.value)==null?void 0:ee.tokensObj[(R=e==null?void 0:e.fromCoin)==null?void 0:R.address])!=null&&h.coingecko_id?"coingecko":(n=(W=k==null?void 0:k.value)==null?void 0:W.tokensObj[(F=e==null?void 0:e.fromCoin)==null?void 0:F.address])!=null&&n.birdeyeid?"birdeye":null}),Re=A(()=>{var C,i,u,j,w,D,R,ee,h,F,W,n;return(u=(i=k==null?void 0:k.value)==null?void 0:i.tokensObj[(C=e==null?void 0:e.toCoin)==null?void 0:C.address])!=null&&u.pyth_id&&((D=(w=k==null?void 0:k.value)==null?void 0:w.tokensObj[(j=e==null?void 0:e.toCoin)==null?void 0:j.address])==null?void 0:D.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(h=(ee=k==null?void 0:k.value)==null?void 0:ee.tokensObj[(R=e==null?void 0:e.toCoin)==null?void 0:R.address])!=null&&h.coingecko_id?"coingecko":(n=(W=k==null?void 0:k.value)==null?void 0:W.tokensObj[(F=e==null?void 0:e.toCoin)==null?void 0:F.address])!=null&&n.birdeyeid?"birdeye":null}),p=async()=>{const C=k.value.tokenExternalPriceObj[e.fromCoin.address],i=k.value.tokenExternalPriceObj[e.toCoin.address];if(C&&i){const u=new m(C).div(new m(i)),j=new m(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(u).div(u).mul(100);let w=Math.abs($e(j,2));u.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?se.value="":se.value=j>0&&j<=.01?"0.01":w}else se.value=""},ye=C=>{if(C<5)return"color-s";if(C>=5&&C<10)return"color-w";if(C>=10)return"color-e"};_(()=>[e.oneToAmount,k.value.tokenExternalPriceObj,z.value],([C,i,u])=>{C&&i&&!Le(i)&&u!=="Aptos"&&p()},{immediate:!0,deep:!0});const $=d(!1);return{getCoinIcon:l,addCommom:H,sFixD:$e,rateChange:te,chainName:z,clickNextBtn:J,pathLength:re,maximumSold:Q,minimumReceived:x,decimalUi:be,getTextColor:ye,priceExangeRate:se,formCoinMarket:ke,toCoinMarket:Re,readWithin:$}}});const Ae=e=>(Po("data-v-32f2300a"),e=e(),Fo(),e),on=Ae(()=>r("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),an={class:"new-swap-contnet"},nn={class:"coin-info"},tn={class:"from-coin-info"},sn={class:"left"},ln={class:"coin-amount"},un={class:"coin-symbol"},rn={class:"right"},dn={class:"to-coin-info"},vn={class:"left"},cn={class:"coin-amount"},mn={class:"coin-symbol"},fn={class:"right"},pn=Ae(()=>r("div",{class:"new-sui-exchange to-swap-logo"},[r("div",{class:"exchange-new"},[r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-icon_swap1"})])])],-1)),gn={class:"coin-rate"},wn={key:0,class:"coin-rate-box"},Cn={class:"left"},hn=Ae(()=>r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-icon_swap2"})],-1)),bn=[hn],Sn={key:1,class:"coin-rate-box"},An={class:"left"},kn=Ae(()=>r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-icon_swap2"})],-1)),yn=[kn],In={key:2,class:"price-impact"},Tn=Ae(()=>r("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),On=[Tn],Nn=Ae(()=>r("br",null,null,-1)),$n={class:"bottom"},Rn={class:"induction"},Mn={class:"item"},Pn={class:"induction-text"},Fn={class:"induction-value"},Bn={class:"item"},jn={class:"induction-text"},Un={class:"induction-value"},Ln={class:"item"},En={class:"induction-text"},qn={key:0,class:"item"},Wn={class:"induction-text"},Dn={key:0,class:"induction-value"},Hn={key:1,class:"induction-value"},Yn={key:0,class:"within-desc"},zn=Ae(()=>r("div",{class:"within-top"},[r("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Jn={class:"within-bottom"},Gn={key:0,class:"price-updated modal-bottom-btn"},Kn=Ae(()=>r("span",null,"Price updated",-1));function Qn(e,c,Y,k,q,ne){const l=ce("PriceImpactTooltip"),te=Mo,z=ce("Modal"),J=Pa("image");return T(),ae(z,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal new-modal-have-btn",onCancel:c[6]||(c[6]=re=>e.$emit("on-close"))},{closeIcon:Ne(()=>[on]),default:Ne(()=>{var re;return[r("div",an,[r("div",nn,[r("div",tn,[r("div",sn,[r("div",ln,N(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Be(H))(e.fromCoinAmount)),1),r("div",un,N(e.fromCoin&&e.fromCoin.symbol),1)]),r("div",rn,[je(r("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),r("div",dn,[r("div",vn,[r("div",cn,N(e.toCoinAmount&&("addCommom"in e?e.addCommom:Be(H))(e.toCoinAmount)),1),r("div",mn,N(e.toCoin&&e.toCoin.symbol),1)]),r("div",fn,[je(r("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),pn])]),r("div",gn,[e.rateChange?(T(),U("div",Sn,[r("div",An,[je(r("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),r("span",null,"1 "+N(e.toCoin&&e.toCoin.symbol)+" ≈",1),je(r("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),r("span",null,N(e.oneFromAmount)+" "+N(e.fromCoin.symbol),1)]),r("div",{class:"right",onClick:c[1]||(c[1]=Q=>e.rateChange=!e.rateChange)},yn)])):(T(),U("div",wn,[r("div",Cn,[je(r("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),r("span",null,"1 "+N(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),je(r("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),r("span",null,N(e.oneToAmount)+" "+N(e.toCoin.symbol),1)]),r("div",{class:"right",onClick:c[0]||(c[0]=Q=>e.rateChange=!e.rateChange)},bn)])),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(T(),U("div",In,[(T(),U("svg",{class:Se(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},On,2)),r("span",{class:Se(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),r("span",{class:Se(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[ve("Price Impact Alert."),Nn,ve(" Be cautious before submitting your order.")],2)])):E("",!0)]),r("div",$n,[r("div",Rn,[r("div",Mn,[r("div",Pn,N(e.$t("modal.slippageTolerance")),1),r("div",Fn,N(e.slippage)+"%",1)]),r("div",Bn,[r("div",jn,N(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),r("div",Un,N(e.fixedFromCoin?("addCommom"in e?e.addCommom:Be(H))(("sFixD"in e?e.sFixD:Be($e))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Be(H))(("sFixD"in e?e.sFixD:Be($e))(e.maximumSold,e.fromCoin.decimals)))+" "+N(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),r("div",Ln,[r("div",En,[ve(" Price Impact "),K(l,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),r("div",{class:Se(["induction-value",String(e.impact)==="Incalculable"?"impact-w":e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[e.chainName=="Aptos"?(T(),U(ao,{key:0},[ve(N(e.impact<.01?"<0.01":e.impact>100?">100":e.impact)+"% ",1)],64)):String(e.impact)=="Incalculable"?(T(),U(ao,{key:1},[ve(" Incalculable ")],64)):(T(),U(ao,{key:2},[ve(N(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(re=String(e.impact))==null?void 0:re.replace("-","")}`)+"% ",1)],64))],2)]),e.chainName=="Aptos"?(T(),U("div",qn,[r("div",Wn,N(e.$t("common.fee")),1),e.chainName=="Aptos"?(T(),U("div",Dn,N(e.formatFee)+" "+N(e.fromCoin.symbol)+" ("+N(e.fee*100)+"%) ",1)):(T(),U("div",Hn,N(e.fee)+" "+N(e.fromCoin.symbol),1))])):E("",!0)])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(T(),U("div",Yn,[zn,r("div",Jn,[r("div",{class:Se(["within-btn cancel-btn",e.readWithin?"within-btn-active":""]),onClick:c[2]||(c[2]=Q=>e.readWithin=!0)}," Yes, please continue. ",2),r("div",{class:"within-btn cancel-btn",onClick:c[3]||(c[3]=Q=>e.$emit("on-close"))},"No, cancel it.")])])):E("",!0)]),e.isShowAccept?(T(),U("div",Gn,[Kn,K(te,{class:"accept-btn",loading:e.swapLoading,onClick:c[4]||(c[4]=Q=>e.$emit("accept"))},{default:Ne(()=>[ve("Accept")]),_:1},8,["loading"])])):(T(),ae(te,{key:1,class:"big-btn swap-confirm-btn modal-bottom-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:c[5]||(c[5]=Q=>e.clickNextBtn())},{default:Ne(()=>[ve(N(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"]))]}),_:1},8,["title"])}const Xn=Ro(en,[["render",Qn],["__scopeId","data-v-32f2300a"]]),Zn=$o({components:{AggregatorSettingModal:Ka,RouterModal:Qa,UnderlineTab:Za,NewAssetsCard:Va,IconTooltip:_a,SuiSwapConfirm:Xn,IconSlippage:xa},setup(){const e=Fa(),c=Ba(ja,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:Y,locale:k}=Ua(),q=jo(),ne=Bo(),l=A(()=>ne);let te=d(!1),z=d(!0),J=d(!1),re=d(!1),Q=d(!1),x=d(!1);const me=d("fromCoin"),se=d(""),ke=d(""),Re=d(!1),p=d(!0),ye=d(!1),$=d(!1),C=d(!1),i=d(""),u=d(""),j=d(20),w=d(0),D=d(null),R=d(!1),ee=A(()=>q.slippage),h=A(()=>q.chainName),F=A(()=>h.value?Ya(h.value):{}),W=A(()=>Xa()),n=d(),t=d(),Qe=A(()=>he&&he[h.value]&&he[h.value].hasRouter),to=A(()=>ne.getPoolInfoSuccess),Uo=A(()=>{var o;return b.value&&((o=b.value)!=null&&o.is_pause)?"Pool Closed":!n.value||!t.value?Y("modal.selectTokenModalTitle"):!Number(i.value)&&!Number(u.value)?Y("button.enterAmount"):!Qe.value&&!b.value&&to.value?"Pool Not Found":Qe.value&&Pe.value?"No Available Route":R.value?Y("button.insufficientLiquidity"):Number(i.value)>Number(Z.value)?Y("button.insufficientBalance",{name:n.value.symbol}):Y("button.swap")}),Lo=o=>{var s,a,g,f;me.value=o,o==="fromCoin"?(se.value=((s=t.value)==null?void 0:s.address)||"",ke.value=((a=n.value)==null?void 0:a.address)||""):(se.value=((g=n.value)==null?void 0:g.address)||"",ke.value=((f=t.value)==null?void 0:f.address)||""),Re.value=!0},Xe=d({}),Ze=d({}),Eo=o=>{me.value==="fromCoin"?(Xe.value=o,_e(o)):(Ze.value=o,_e(o))},qo=o=>{o==="fromCoin"?(p.value=!0,h.value==="Aptos"?i.value=Z.value>0?n.value.symbol=="APT"?new m(Number(Z.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(Z.value)).sub(new m(.1)).toString():String(Z.value):"":i.value=Z.value>0?n.value.symbol=="SUI"?new m(Number(Z.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(Z.value)).sub(new m(.05)).toString():String(Z.value):""):(p.value=!1,h.value==="Aptos"?u.value=oe.value>0?t.value.symbol=="APT"?new m(Number(oe.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(oe.value)).sub(new m(.1)).toString():String(oe.value):"":u.value=oe.value>0?t.value.symbol=="SUI"?new m(Number(oe.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(oe.value)).sub(new m(.05)).toString():String(oe.value):"")},Wo=o=>{o==="fromCoin"?(p.value=!0,i.value=Z.value>0?$e(new m(Number(Z.value)).div(2).toString(),n.value.decimals).toString():""):(p.value=!1,u.value=oe.value>0?$e(new m(Number(oe.value)).div(2).toString(),t.value.decimals).toString():"")},Ve=d(!1);La(()=>{so(),window.addEventListener("updateSwapParams",o=>{Ve.value=!Ve.value})}),Ea(()=>{clearInterval(D.value)}),A(()=>q);const He=()=>{var o,s,a,g,f;console.log("🚀 ~ file: swap-sui.vue:785 ~ clickRefresh ~:"),!z.value&&(!b.value&&!Qe.value||(clearInterval(D.value),w.value=0,z.value=!0,le.value||Oe(p.value?i.value:u.value),X.value.address&&F.value.getAccount(X.value.address),setTimeout(()=>{z.value=!1,so()},1e3),console.log("🚀 ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES11111:",(o=l==null?void 0:l.value)==null?void 0:o.RATES),(!((s=l==null?void 0:l.value)!=null&&s.RATES)||Le((a=l==null?void 0:l.value)==null?void 0:a.RATES))&&(console.log("🚀 ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES2222:",(g=l==null?void 0:l.value)==null?void 0:g.RATES),(f=l==null?void 0:l.value)==null||f.setRates("Sui"))))};console.log("🚀 ~ file: swap-sui.vue:811 ~ clickRefresh ~ clickRefresh:",He);const so=()=>{D.value=setInterval(()=>{z.value=!1,ye.value||w.value<j.value&&(w.value+=1,w.value===j.value&&(h.value=="Aptos"?(b.value&&b.value.poolAddress&&ne.updateCurrentPools(b.value.poolAddress,h.value),He()):x.value||He(),w.value=0,z.value=!0))},1e3)};_(p,To((o,s)=>{p.value=o},500));const de=d(!1);_(i,(o,s)=>{o&&o!==0&&p.value&&(w.value=0,Ge(Oe(o),800)),o==""&&p.value&&(u.value="")}),_(u,(o,s)=>{o&&o!==0&&!p.value&&(w.value=0,Ge(Oe(o),800)),o==""&&!p.value&&(i.value="")});const Ye=d(1e-4),ze=async o=>{let s=o;if(h.value==="Aptos"&&!s.current_sqrt_price&&i.value&&u.value){const a=await F.value.getPools([s.address]);a&&a[0]&&(s={...o,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(s.current_sqrt_price&&i.value&&u.value){const g=(n.value.address===s.coinA.address&&t.value.address===s.coinB.address?0:1)==0,f=new m(i.value),S=new m(u.value),y=f.sub(f.mul(new m(s.fee))),O=S.div(y);return F.value.getPriceImpactPct(s,O.toString(),g)}return"--"},lo=d(0),io=d(0),uo=d(),Me=d({}),Do=async o=>{if(b.value&&(le.value=!0,!(p.value&&Number(i.value)==0)&&!(!p.value&&Number(u.value)==0))){if(n.value&&t.value&&(i.value||u.value)){$.value=!0,C.value=!0,R.value=!1;const s=n.value.address===b.value.coinA.address&&t.value.address===b.value.coinB.address?0:1;try{let a=await F.value.preSwap({pool:b.value,a2b:s==0,byAmountIn:p.value,amount:p.value?i.value:u.value});R.value=a==null?void 0:a.isExceed,uo.value=a==null?void 0:a.estimatedFeeAmount,p.value?(u.value=a.estimatedAmountOut,pe.value=(Number(a.estimatedAmountOut)/o).toString(),fe.value=(o/Number(a.estimatedAmountOut)).toString()):(i.value=a.estimatedAmountIn,pe.value=(o/Number(a.estimatedAmountIn)).toString(),fe.value=(Number(a.estimatedAmountIn)/o).toString()),lo.value=new m(u.value).div(i.value).toString(),io.value=new m(i.value).div(u.value).toString(),Ye.value=h.value=="Aptos"?await ze(b.value):await ze(Me.value||b.value),$.value=!1,C.value=!1}catch(a){console.log("pre swap error1",a),$.value=!1,C.value=!1}}else p.value?u.value="":i.value="",$.value=!1,C.value=!1;le.value=!1}},Ho=Ga(),X=A(()=>Ho),Yo=d({}),fe=d(""),pe=d(""),Z=A(()=>X.value.assets&&n.value&&X.value.assets[n.value.address]?Oo(X.value.assets[n.value.address].balance,n.value.decimals):0),oe=A(()=>X.value.assets&&t.value&&X.value.assets[t.value.address]?Oo(X.value.assets[t.value.address].balance,t.value.decimals):0);_(()=>l.value.tokensObj,async o=>{if(o&&!Le(o)){const s=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?n.value=o[a]||await F.value.getTokenBySymbol(o,a):!a&&!n.value&&(n.value=o[he[h.value].swapDefaultPair.fromCoin]),s?t.value=o[s]||await F.value.getTokenBySymbol(o,s):!s&&!t.value&&(t.value=o[he[h.value].swapDefaultPair.toCoin],console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ newValue:",o),console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",he[h.value].swapDefaultPair.toCoin)),!a&&s&&(n.value="")}},{immediate:!0});const b=A(()=>{var o,s,a,g,f;if(n.value&&t.value){let S=null,y={};if(Object.values(l.value.poolConfigList).forEach(v=>{var I,L,B,P;(v.coinA.address.toUpperCase()===((I=n.value.address)==null?void 0:I.toUpperCase())&&v.coinB.address.toUpperCase()===((L=t.value.address)==null?void 0:L.toUpperCase())||v.coinB.address.toUpperCase()===((B=n.value.address)==null?void 0:B.toUpperCase())&&v.coinA.address.toUpperCase()===((P=t.value.address)==null?void 0:P.toUpperCase()))&&(y[v.address]={...v})}),h.value=="Aptos"&&l.value.poolsObj&&!Le(l.value.poolsObj))for(const v in l.value.poolsObj){const I=l.value.poolsObj[v];(I.token_a.address.toUpperCase()===((o=n.value.address)==null?void 0:o.toUpperCase())&&I.token_b.address.toUpperCase()===((s=t.value.address)==null?void 0:s.toUpperCase())||I.token_b.address.toUpperCase()===((a=n.value.address)==null?void 0:a.toUpperCase())&&I.token_a.address.toUpperCase()===((g=t.value.address)==null?void 0:g.toUpperCase()))&&(y[I.address]={...I})}const O=Object.values(y).sort((v,I)=>v.fee-I.fee);for(let v=0;v<O.length;v++)if(!((f=O[v])!=null&&f.is_pause)){S=O[v];break}return S&&!Le(S)?(console.log("🚀🚀🚀 ~ file: swap.vue:1094 ~ poolInfo ~ info:",S),S):null}return null}),ro=d(!0),vo=d(!1),zo=async o=>{o&&h.value=="Aptos"&&(Oe(p.value?i.value:u.value),vo.value=!0,o.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&o.coinB.symbol.toLowerCase()===t.value.symbol.toLowerCase()?ro.value=!0:ro.value=!1,R.value=!1)};_(()=>b.value,(o,s)=>{o&&(!s||o.address!==s.address||o.current_sqrt_price!==s.current_sqrt_price)&&zo(o)},{immediate:!0,deep:!0});const Jo=A(()=>l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].logoURI),Go=A(()=>l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].logoURI),Ko=A(()=>h.value==="Aptos"?l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].coingecko_id||null:l.value.tokensObj&&n.value&&n.value.address||null),Qo=A(()=>h.value==="Aptos"?l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].coingecko_id||null:l.value.tokensObj&&t.value&&t.value.address||null),Xo=A(()=>{var o,s,a,g,f,S,y,O,v,I,L,B,P;return console.log("🚀🚀🚀 ~ file: swap.vue:1222 ~ formCoinMarket ~ pools?.value?.tokensObj:",(o=l==null?void 0:l.value)==null?void 0:o.tokensObj),(g=(a=l==null?void 0:l.value)==null?void 0:a.tokensObj[(s=n==null?void 0:n.value)==null?void 0:s.address])!=null&&g.pyth_id&&((y=(S=l==null?void 0:l.value)==null?void 0:S.tokensObj[(f=n==null?void 0:n.value)==null?void 0:f.address])==null?void 0:y.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(I=(v=l==null?void 0:l.value)==null?void 0:v.tokensObj[(O=n==null?void 0:n.value)==null?void 0:O.address])!=null&&I.coingecko_id?"coingecko":(P=(B=l==null?void 0:l.value)==null?void 0:B.tokensObj[(L=n==null?void 0:n.value)==null?void 0:L.address])!=null&&P.birdeyeid?"birdeye":null}),Zo=A(()=>{var o,s,a,g,f,S,y,O,v,I,L,B;return(a=(s=l==null?void 0:l.value)==null?void 0:s.tokensObj[(o=t==null?void 0:t.value)==null?void 0:o.address])!=null&&a.pyth_id&&((S=(f=l==null?void 0:l.value)==null?void 0:f.tokensObj[(g=t==null?void 0:t.value)==null?void 0:g.address])==null?void 0:S.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(v=(O=l==null?void 0:l.value)==null?void 0:O.tokensObj[(y=t==null?void 0:t.value)==null?void 0:y.address])!=null&&v.coingecko_id?"coingecko":(B=(L=l==null?void 0:l.value)==null?void 0:L.tokensObj[(I=t==null?void 0:t.value)==null?void 0:I.address])!=null&&B.birdeyeid?"birdeye":null}),Vo=A(()=>{var g,f;const o=new m(i.value),s=new m(h.value=="Aptos"?(g=b==null?void 0:b.value)==null?void 0:g.fee:(f=Me==null?void 0:Me.value)==null?void 0:f.fee),a=o.mul(s).toString();return Number(a)<1/Math.pow(10,n.value.decimals)?`<${new m(1).div(new m(Math.pow(10,n.value.decimals))).toString()}`:$e(a,n.value.decimals)}),{setIsShowSuccess:_o,setIsShowRejected:co,setIsShowWaiting:Ee,setTransactionDesc:xo,setTransactionTxid:mo}=q,ea=async()=>{var s,a,g,f,S,y,O,v,I,L;x.value=!1,$.value=!0,clearInterval(qe),window.clearInterval(qe),mo(""),xo(Y("tips.swapping",{from:`${H(i.value)} ${(s=n.value)==null?void 0:s.symbol}`,to:`${H(u.value)} ${(a=t.value)==null?void 0:a.symbol}`})),Ee(!0);let o;h.value=="Aptos"&&(o=n.value.address===b.value.token_a.address&&t.value.address===b.value.token_b.address?0:1);try{let B;if(h.value=="Aptos")B=await F.value.getSwapTransactionPayload({pool:b.value,a2b:o==0,byAmountIn:p.value,amount:p.value?i.value:u.value,slippage:Number(ee.value)/100});else{const V=p.value,we=Number(ee.value)/100;B=await((g=W==null?void 0:W.value)==null?void 0:g.getRouterSwapPayload(M.value,V,we,n,t))}console.log("0221####swap###swapPayload###",B);let P;if(h.value==="Aptos")P=await X.value.currentWallet.signAndSubmitTransaction(B);else{const V=await F.value.signAndExecuteTransactionBlock(X.value.currentWallet,B,{action:"AggregatorSwap"});if(V==="errorIsReturned"){$.value=!1,Ee(!1);return}console.log("0221###sui swap res###",V),P=F.value.handleTx(V),console.log("0221###swap###sui##tx###",P)}if(P&&P.hash){mo(P.hash),Ee(!1),_o(!0);const V={title:Y("tips.swap"),desc:Y("tips.swapSuccessText",{from:`${H(i.value)} ${(f=n.value)==null?void 0:f.symbol}`,to:`${H(u.value)} ${(S=t.value)==null?void 0:S.symbol}`}),hash:P.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:n.value.address==he[h.value].currentChainTokenAddress||t.value.address==he[h.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(y=n.value)==null?void 0:y.address}`,numa:`- ${i.value}`,logoa:l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].logoURI,tokenb:`${(O=t.value)==null?void 0:O.address}`,numb:`+ ${u.value}`,logob:l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].logoURI},text:`Pay ${i.value} ${(v=n.value)==null?void 0:v.symbol} to receive ${u.value} ${(I=t.value)==null?void 0:I.symbol}`,excecuteTime:(L=P==null?void 0:P.res)==null?void 0:L.excecuteTime};h.value!=="Aptos"&&(V.res=P.res),F.value.showTransitionPending(V);const we=await F.value.watchTransaction(V);console.log("0221###swap###transitionStatus####",we),we&&setTimeout(()=>{h.value=="Aptos"&&ne.updateCurrentPools(b.value.poolAddress,h.value),F.value.getAccount(X.value.address)},1e3)}else Ee(!1),co(!0);i.value="",u.value="",$.value=!1}catch(B){i.value="",u.value="",console.log("Swap Error###",B),$.value=!1,Ee(!1),co(!0)}},oa=o=>{var s;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((s=l.value.tokensObj[o==null?void 0:o.address])==null?void 0:s.logo_url)||(q.theme==="default"?De("/image/coins/unknown.png"):De("/image/coins/sui-unknown.png"))},fo=d([]);_(()=>[n.value,t.value,l.value.poolConfigList],([o,s,a])=>{if(a&&a.length>0&&o&&s){const g=[];a.forEach(f=>{var S,y,O,v;(f.coinA.address.toUpperCase()===((S=o.address)==null?void 0:S.toUpperCase())&&f.coinB.address.toUpperCase()===((y=s.address)==null?void 0:y.toUpperCase())||f.coinB.address.toUpperCase()===((O=o.address)==null?void 0:O.toUpperCase())&&f.coinA.address.toUpperCase()===((v=s.address)==null?void 0:v.toUpperCase()))&&(f!=null&&f.is_pause||g.push(f.address))}),fo.value=g}},{immediate:!0});const _e=o=>{console.log("🚀 ~ getTokenSource ~ token:",o);const s=q.importTokenListObj;console.log("🚀🚀🚀 ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(s!=null&&s.hasOwnProperty(o==null?void 0:o.address))),o!=null&&o.isSelfBuilt&&!(s!=null&&s.hasOwnProperty(o==null?void 0:o.address))?xe.value=!0:(me.value==="fromCoin"?(t.value&&o.address.toLowerCase()===(t==null?void 0:t.value.address.toLowerCase())&&(t.value=null),n.value=o,i.value=i.value>0?be(i.value,o==null?void 0:o.decimals):""):(n.value&&o.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null),t.value=o,u.value=u.value>0?be(u.value,o==null?void 0:o.decimals):""),po())},xe=d(!1),po=()=>{Ze.value={},Xe.value={},xe.value=!1},aa=A(()=>q.isShowRouterModal),Ie=d([]),go=d(""),na=d(!1),wo=Ha();A(()=>wo);const Pe=d(!1),M=d({}),ta=d(""),sa=d(),le=d(!1),Je=d(0),eo=async o=>{var s,a;if(console.log("🚀🚀🚀 ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),le.value=!0,R.value=!1,n.value&&t.value&&(Number(i.value)>0&&p.value||Number(u.value)>0&&!p.value)){console.log("🚀🚀🚀 ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!i.value&&u.value||i.value&&!u.value)&&($.value=!0),fe.value="",pe.value="",de.value=!0,Pe.value=!1;let g;b.value&&(g=n.value.address===b.value.coinA.address&&t.value.address===b.value.coinB.address?0:1);try{let f;if(p.value){const I=new m(i.value).mul(Math.pow(10,n.value.decimals)).toString();f=new Ke(I)}else{const I=new m(u.value).mul(Math.pow(10,t.value.decimals)).toString();f=new Ke(I)}const S=Number(ee.value)/100,y=b.value?{poolAddresses:fo.value,coinTypeA:b.value.coin_a_address,coinTypeB:b.value.coin_b_address,decimalsA:b.value.coinA.decimals,decimalsB:b.value.coinB.decimals,a2b:g==0,byAmountIn:p.value,amount:f.toString()}:"";console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ fromCoin:",n),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ toCoin:",t),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ coinAmount:",f),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",p.value);const O=Je.value+1;Je.value=O;const v=await((s=W==null?void 0:W.value)==null?void 0:s.getFindRouter(n,t,f.toString(),p.value,S,b.value?y:"",O));if(console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter:",v),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter JSON:",JSON.stringify(v,null,2)),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ suiAmountId.value:",Je.value),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter.id:",v==null?void 0:v.id),Je.value!==(v==null?void 0:v.id)){de.value=!1,le.value=!1,$.value=!1,M.value={},Ie.value=[],p.value?u.value="":i.value="";return}if(v!=null&&v.insufficientLiquidity){R.value=!0,de.value=!1,le.value=!1,$.value=!1,M.value={},Ie.value=[],p.value?u.value="":i.value="";return}if(!v||!(v!=null&&v.routes)||((a=v==null?void 0:v.routes)==null?void 0:a.length)==0){$.value=!1,Pe.value=!0,de.value=!1,le.value=!1,M.value={},Ie.value=[],i.value?u.value="":i.value="";return}if(v.fromCoinAddress!==n.value.address||v.toCoinAddress!==t.value.address){console.log("🚀🚀🚀 ~ file: swap.vue:1861 ~ getSuiAmount ~",v.fromCoinAddress!==n.value.address||v.toCoinAddress!==t.value.address),M.value={},Ie.value=[];return}v?(M.value=v,Ie.value=v.routes,R.value=!1,p.value?i.value&&(u.value=new m(v.amountOut).div(new m(Math.pow(10,t.value.decimals))).toString()):u.value&&(i.value=new m(v.amountIn).div(new m(Math.pow(10,n.value.decimals))).toString()),console.log(u.value,"###toCoinAmount.value"),fe.value=H(be(new m(i.value).div(new m(u.value).toString()),n.value.decimals)),pe.value=H(be(new m(u.value).div(i.value).toString(),t.value.decimals)),$.value=!1,Pe.value=!1,de.value=!1):($.value=!1,Pe.value=!0,de.value=!1)}catch(f){console.log("pre swap error2",f),$.value=!1,de.value=!1,le.value=!1}}else p.value?u.value="":i.value="",$.value=!1,de.value=!1;le.value=!1,console.log("🚀🚀🚀 ~ file: swap.vue:1926 ~ getSuiAmount ~ isRoutrProgress.value:",le.value)},Te=d(!1),Co=async o=>{var s;try{let a;if(p.value){const S=new m(i.value).mul(Math.pow(10,n.value.decimals)).toString();a=new Ke(S)}else{const S=new m(u.value).mul(Math.pow(10,t.value.decimals)).toString();a=new Ke(S)}const g=Number(ee.value)/100,f=await((s=W==null?void 0:W.value)==null?void 0:s.getFindRouter(n,t,a.toString(),p.value,g,""));if(f){M.value=f,Ie.value=f.routes,R.value=!1,go.value=f.amountIn,fe.value=H(be(new m(i.value).div(new m(u.value).toString()),n.value.decimals)),pe.value=H(be(new m(u.value).div(i.value).toString(),t.value.decimals));const S=new m(f.amountOut).div(new m(Math.pow(10,t.value.decimals))).toString(),y=new m(f.amountIn).div(new m(Math.pow(10,n.value.decimals))).toString();p.value?u.value!==S&&(Te.value=!0,u.value=S):i.value!==y&&(Te.value=!0,i.value=y)}}catch(a){console.log("pre swap error3",a)}},la=async o=>{if(n.value&&t.value&&(i.value||u.value)){const s=n.value.address===b.value.coinA.address&&t.value.address===b.value.coinB.address?0:1;try{let a=await F.value.preSwap({pool:b.value,a2b:s==0,byAmountIn:p.value,amount:p.value?i.value:u.value});R.value=a==null?void 0:a.isExceed,uo.value=a==null?void 0:a.estimatedFeeAmount,p.value?(pe.value=(Number(a.estimatedAmountOut)/a.estimatedAmountIn).toString(),fe.value=(a.estimatedAmountIn/Number(a.estimatedAmountOut)).toString()):(pe.value=(Number(a.estimatedAmountOut)/Number(a.estimatedAmountIn)).toString(),fe.value=(Number(a.estimatedAmountIn)/Number(a.estimatedAmountOut)).toString()),p.value?u.value!==a.estimatedAmountOut&&(Te.value=!0,u.value=a.estimatedAmountOut):i.value!==a.estimatedAmountIn&&(Te.value=!0,i.value=a.estimatedAmountIn),Ye.value=h.value=="Aptos"?await ze(b.value):await ze(Me.value||b.value),$.value=!1,C.value=!1}catch(a){console.log("pre swap error4",a),$.value=!1,C.value=!1}}else $.value=!1,C.value=!1};let qe=d(null);_(()=>x.value,o=>{o?qe.value=setInterval(()=>{h.value=="Aptos"?la(p.value):Co(p.value)},3e3):(clearInterval(qe.value),window.clearInterval(qe.value))},{immediate:!0});const Oe=async o=>{h.value=="Aptos"?Do(o):eo()};_(()=>Ve.value,o=>{(Number(i.value)>0||Number(u.value)>0)&&Oe(p.value?i.value:u.value)},{immediate:!0});const ia=A(()=>wo),ho=A(()=>ia.value.isInitRouter);_(()=>ho.value,o=>{o||(w.value=0,Oe(p.value?i.value:u.value))},{immediate:!0});function Ge(o,s=500){let a=null;return function(...g){clearTimeout(a),a=setTimeout(()=>{o.call(this,...g)},s)}}_(()=>[n.value,t.value],([o,s])=>{if(console.log("🚀🚀🚀 ~ file: swap.vue:2181 ~ setup ~ fromCoin && toCoin:",o&&s),o&&s&&(w.value=0,Ge(Oe(p.value?i.value:u.value))),o||s){console.log("🚀🚀🚀 ~ file: swap.vue:1965 ~ setup ~ fromCoin:",o);const a=`/swap?from=${o==null?void 0:o.address}&to=${s==null?void 0:s.address}`;e.push(a)}},{immediate:!0,deep:!0});const ua=Ge(bo);function bo(){const o=n.value;n.value=t.value,t.value=o,te.value=!0,ge.value=="open"?p.value=!0:p.value=!p.value,p.value?(i.value=u.value,u.value=""):(u.value=i.value,i.value=""),setTimeout(()=>{te.value=!1},300)}const ra=()=>{Te.value=!1},da=()=>{x.value=!1,Te.value=!1},va=[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}],ca=d("Swap"),So=d(!1),oo=A(()=>{var o,s,a,g,f,S,y,O,v,I,L,B,P,V;try{if((o=n==null?void 0:n.value)!=null&&o.address&&((s=t==null?void 0:t.value)!=null&&s.address)&&(M!=null&&M.value)&&!Le(M==null?void 0:M.value)){const we=Ue((a=M==null?void 0:M.value)==null?void 0:a.amountIn).div(Math.pow(10,(g=n.value)==null?void 0:g.decimals)),Aa=Ue((f=M==null?void 0:M.value)==null?void 0:f.amountOut).div(Math.pow(10,(S=t.value)==null?void 0:S.decimals)),Ce=Ue(Aa).div(we);console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",Ce==null?void 0:Ce.toString());const ie=(v=(y=l==null?void 0:l.value)==null?void 0:y.RATES)==null?void 0:v[(O=n==null?void 0:n.value)==null?void 0:O.address];console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",ie);const ue=(B=(I=l==null?void 0:l.value)==null?void 0:I.RATES)==null?void 0:B[(L=t==null?void 0:t.value)==null?void 0:L.address];if(console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",ue),!(ie!=null&&ie.price)||!(ue!=null&&ue.price)||Ue(ie==null?void 0:ie.price).lte(0)||Ue(ue==null?void 0:ue.price).lte(0))throw Error("rate invalid");const Fe=Ue(ie==null?void 0:ie.price).div(ue==null?void 0:ue.price);if(console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",Fe==null?void 0:Fe.toString()),Ce.gt(Fe)){const G=Ce.minus(Fe).div(Ce).mul(100);return console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ result1:",G==null?void 0:G.toString()),No((P=G==null?void 0:G.negated())==null?void 0:P.toString(),2)}else{const G=Ce.minus(Fe).div(Ce).mul(100);return console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ result2:",G==null?void 0:G.toString()),No((V=G==null?void 0:G.abs())==null?void 0:V.toString(),2)}}return}catch(we){return console.log("🚀🚀🚀 ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",we),"Incalculable"}}),ma=A(()=>(h==null?void 0:h.value)==="Aptos"?Ye.value:oo==null?void 0:oo.value),ge=d(localStorage.getItem("plusChecked1"))||d("close"),fa=A(()=>q.liquiditySourceList),pa=o=>{console.log("🚀 ~ modalConfirm ~ result121:",o),o&&o.length>0?o.every(a=>a.name=="Cetus"?!0:a.status==="close")?ge.value="close":(ge.value="open",u.value=""):ge.value="close",So.value=!1},ga=A(()=>q.includeRoutes),Ao=o=>{ge.value=ge.value=="open"?"close":"open",localStorage.setItem("plusChecked1",ge.value);const s=ga.value,a=fa.value;a.forEach(g=>{o?g.status="open":g.name!=="Cetus"?g.status="close":g.status="open"}),console.log("🚀 ~ //clickCheckedresult ~ arr:",a,s),q.setAggregatorSetting(a,s)},ko=()=>{const o=window.innerWidth,s=window.innerHeight,a=document.getElementById("plusModeSwitch"),g=a==null?void 0:a.getBoundingClientRect(),f=g==null?void 0:g.left,S=g==null?void 0:g.top;console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ x:",f),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ y:",S),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportWidth:",o),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportHeight:",s);const y=2,O=We.shapeFromText({text:"🟢",scalar:y}),v=We.shapeFromText({text:"🔵",scalar:y}),I=We.shapeFromText({text:"💚",scalar:y}),L=We.shapeFromText({text:"💙",scalar:y});We({particleCount:40,spread:60,shapes:[O,v,I,L],scalar:y,origin:{x:f/o,y:S*1.2/s}})},wa=o=>{console.log("🚀🚀🚀 ~ file: swap.vue:2264 ~ handleSwitchPlusMode ~ value:",o),i.value="",u.value="",o&&ko(),Ao(o),setTimeout(()=>{eo()},500)},yo=d(!1),Ca=o=>{yo.value=o},Io=d(!1),ha=o=>{console.log("🚀 ~ file: swap-sui.vue:2341 ~ onInputToCoinLoading ~ status:",o),Io.value=o},ba=d(!0),Sa=d(!1);return{isAddCardTopPadding:ba,isAddCardBottomPadding:Sa,modalConfirm:pa,clickChecked:Ao,currentTradeTab:ca,plusChecked:ge,closeSwapConfirmModal:da,updateAccept:ra,clickExchange:bo,debounceClickExchange:ua,closeTokenWarning:po,isShowTokenWarning:xe,getTokenSource:_e,hasPool:vo,getPoolInfoSuccess:to,halfBtnSelect:Wo,formCoinId:Ko,toCoinId:Qo,formCoinMarket:Xo,toCoinMarket:Zo,fromCoinUrl:Jo,toCoinUrl:Go,t:Y,indicator:c,wallet:X,currentLpInfo:Yo,fixD:za,decimalFormat:Ja,impact:Ye,oneFromAmount:fe,oneToAmount:pe,importIcon:De,clickRefresh:He,refresh:z,change:te,isShowAddress:J,isShowSwapSetting:re,fromCoin:n,toCoin:t,slippage:ee,openCoinSelect:Lo,onCoinSelect:Eo,existingCoins:se,lastSelectCoin:ke,currentCoinKey:me,showCoinSelect:Re,fromCoinAmount:i,toCoinAmount:u,maxBtnSelect:qo,fixedFromCoin:p,swapBtnText:Uo,toSwap:ea,loading:ye,swaping:$,autoRefreshTime:j,countdown:w,marketTimer:D,rateChange:Q,isSwapConfirmMpdal:x,fromCoinBlance:Z,toCoinBlance:oe,poolInfo:b,chainName:h,swapRouterLoading:de,formatFee:Vo,calculating:C,currentRate:lo,currentRateReverse:io,getCoinIcon:oa,toAddLiquidiPoolInfo:Me,decimalUi:be,warningToCoin:Ze,warningFromCoin:Xe,isShowRouterModal:aa,toSwapLoading:na,insufficientLiquidity:R,routerPool:Ie,routerTotalAmounts:go,store:q,suiPreSwapdata:M,suiSwapFee:sa,suiSwapFeeUi:ta,addCommom:H,debounce:To,notFoundRouter:Pe,getSuiAmountAccept:Co,isShowAccept:Te,getSuiAmount:eo,tradeTabList:va,isInitSwapRouter:ho,isShowAggregatorModal:So,priceImpact:ma,triggerConfettiAnimation:ko,handleSwitchPlusMode:wa,assetLoading:yo,onInputLoading:Ca,onInputToCoinLoading:ha,assetToCoinLoading:Io}}});const no=e=>(Po("data-v-f00a2634"),e=e(),Fo(),e),Vn={class:"swap-container"},_n={class:"sui-title"},xn={class:"right title-right"},et={key:0,class:Se("icon-bg plus-switch")},ot=no(()=>r("p",null,[r("span",null,"Plus Mode")],-1)),at={class:"setting-right"},nt={class:"swap-card"},tt=Wa('<div class="exchange-new" data-v-f00a2634><svg class="icon icon-down" aria-hidden="true" data-v-f00a2634><use xlink:href="#icon-icon_swap1" data-v-f00a2634></use></svg><svg class="icon icon-swap" aria-hidden="true" data-v-f00a2634><use xlink:href="#icon-tx_swap1" data-v-f00a2634></use></svg></div>',1),st=[tt],lt={class:"btn-info"},it={key:0,class:"icon","aria-hidden":"true"},ut=no(()=>r("use",{"xlink:href":"#icon-icon-swap"},null,-1)),rt=[ut],dt={key:2,class:"token-info-container"},vt={class:"token-info-title"},ct=no(()=>r("span",{class:"coingecko"},"Price Reference",-1));function mt(e,c,Y,k,q,ne){var j;const l=ce("UnderlineTab"),te=Da,z=qa,J=ce("IconTooltip"),re=ce("IconSlippage"),Q=ka,x=ce("NewAssetsCard"),me=Mo,se=Ia,ke=Oa,Re=Na,p=$a,ye=Ta,$=Ra,C=ce("RouterModal"),i=ce("SuiSwapConfirm"),u=ce("AggregatorSettingModal");return T(),U("div",Vn,[r("div",_n,[K(l,{"tab-list":e.tradeTabList,"current-tab":"swap",onClickTab:c[0]||(c[0]=w=>e.$router.push(w.link))},null,8,["tab-list"]),r("div",xn,[K(z,{"overlay-class-name":"ant-tooltip-text-color"},{title:Ne(()=>[ve(" The Plus Mode will aggregate external liquidity sources ")]),default:Ne(()=>[e.chainName=="Sui"?(T(),U("div",et,[ot,K(te,{id:"plusModeSwitch",class:"liquidity-switch",checked:e.plusChecked=="open",onClick:c[1]||(c[1]=w=>{e.handleSwitchPlusMode(w)})},null,8,["checked"])])):E("",!0)]),_:1}),r("div",at,[e.chainName=="Sui"?(T(),U("div",{key:0,class:"aggregator-setting",onClick:c[2]||(c[2]=w=>e.isShowAggregatorModal=!0)},[K(J,{type:"setting","xlink-href":"#icon-icon_set","have-bg":!0})])):E("",!0),K(re),r("div",{class:Se(e.chainName=="Sui"?"icon-bg":"")},[K(Q,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])],2)])])]),r("div",nt,[r("div",{class:Se(["card-container",[e.plusChecked=="open"?"toInputBlockDisabled input-block-add-top":"",e.isAddCardTopPadding?"input-block-add-top":"",e.isAddCardBottomPadding&&e.plusChecked!=="open"?"input-block-add-bottom":""]])},[K(x,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":c[3]||(c[3]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From","swap-loading":!e.fixedFromCoin&&e.fromCoin&&(e.swapRouterLoading||e.assetToCoinLoading),title:"You pay",onOnInputLoading:e.onInputLoading,onOnMax:c[4]||(c[4]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:c[5]||(c[5]=w=>e.halfBtnSelect("fromCoin")),onOnInput:c[6]||(c[6]=w=>{e.fromCoinAmount=w}),onOnFocus:c[7]||(c[7]=()=>{e.fixedFromCoin=!0,e.isAddCardTopPadding=!0,e.isAddCardBottomPadding=!1}),onOnSelect:c[8]||(c[8]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","swap-loading","onOnInputLoading"]),K(x,{modelValue:e.toCoinAmount,"onUpdate:modelValue":c[9]||(c[9]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,title:"You receive","input-disabled":e.chainName!=="Aptos"&&e.plusChecked=="open","swap-loading":e.fixedFromCoin&&e.toCoin&&(e.swapRouterLoading||e.assetLoading),onOnInputLoading:e.onInputToCoinLoading,onOnInput:c[10]||(c[10]=w=>{e.toCoinAmount=w}),onOnFocus:c[11]||(c[11]=()=>{e.fixedFromCoin=!1,e.isAddCardTopPadding=!1,e.isAddCardBottomPadding=!0}),onOnSelect:c[12]||(c[12]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","input-disabled","swap-loading","onOnInputLoading"]),r("div",{class:"new-sui-exchange",onClick:c[13]||(c[13]=(...w)=>e.debounceClickExchange&&e.debounceClickExchange(...w))},st)],2)]),r("div",lt,[K(me,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((j=e.poolInfo)==null?void 0:j.is_pause)||e.swapRouterLoading:!1,class:"big-btn swap-btn",loading:e.swaping,onClick:c[14]||(c[14]=w=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[e.wallet.connected?(T(),U("svg",it,rt)):E("",!0),r("span",null,N(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),e.chainName=="Sui"&&!e.notFoundRouter&&e.fromCoin&&e.toCoin&&!e.insufficientLiquidity?(T(),ae(se,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"form-coin-market":e.formCoinMarket,"to-coin-market":e.toCoinMarket,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.priceImpact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","form-coin-market","to-coin-market","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):E("",!0)]),K(ke),e.showCoinSelect?(T(),ae(Re,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:c[15]||(c[15]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):E("",!0),e.isShowSwapSetting?(T(),ae(p,{key:1,onOnClose:c[16]||(c[16]=w=>e.isShowSwapSetting=!1)})):E("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(T(),U("div",dt,[r("div",vt,[ct,K(J,{type:"priceReference","xlink-href":"#icon-icon_tips"})]),e.fromCoin&&e.formCoinMarket?(T(),ae(ye,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):E("",!0),e.toCoin&&e.toCoinMarket?(T(),ae(ye,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):E("",!0)])):E("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(T(),ae($,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):E("",!0),e.isShowRouterModal?(T(),ae(C,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:c[17]||(c[17]=w=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):E("",!0),e.isSwapConfirmMpdal?(T(),ae(i,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.priceImpact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):E("",!0),e.isShowAggregatorModal?(T(),ae(u,{key:6,onClose:c[18]||(c[18]=w=>e.isShowAggregatorModal=!1),onModalConfirm:c[19]||(c[19]=w=>{e.modalConfirm(w)})})):E("",!0)])}const Qt=Ro(Zn,[["render",mt],["__scopeId","data-v-f00a2634"]]);export{Qt as default};
