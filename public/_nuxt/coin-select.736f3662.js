import{i as $}from"./import-icon.de3e6c66.js";import{f as ie,u as re,e as se,a as ce,p as ue,B as de}from"./pool.eb3e226c.js";import{a as pe,M as ve,a4 as be,l as _e,m as L,r as C,y as me,D,ab as fe,e as he,K as Z,q as ke,o as i,c as V,w as b,h as l,t as z,a2 as ge,f as r,x as U,F as X,s as Y,z as x,v,i as T,u as I,j as ee,L as Ce,ac as we,J as ye,p as Se,k as Le}from"./entry.07e73a81.js";/* empty css              *//* empty css              */import{u as oe}from"./index.81c50e20.js";import{_ as Te,a as Ie}from"./img-no-Positions_2x.e6d7f657.js";const $e=pe({components:{Modal:ve,LoadingOutlined:be},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(o,d){const{t:a,locale:te}=_e(),q=ie(),_=L(()=>q),y=re(),c=L(()=>y),B=oe(),m=L(()=>B),O=L(()=>{var t;return(t=m.value)==null?void 0:t.filterCreatePoolCoin}),M=C([a("tab.all"),a("tab.native"),a("tab.layerZero"),a("tab.wormhole"),a("tab.celer")]),u=C(a("tab.all")),n=C(a("tab.all")),S=oe(),A=L(()=>S.chainName),f=C([]);console.log(f,"===>tokenList");const N=C(null);me(()=>{});const j=C(!1);D(u,t=>{t!==a("tab.all")&&(j.value=!1),t==a("tab.all")?n.value=a("tab.all"):t==a("tab.layerZero")?n.value=a("tab.layerZero"):t==a("tab.wormhole")?n.value=a("tab.wormhole"):t==a("tab.celer")?n.value=a("tab.celer"):t==a("tab.native")&&(n.value=a("tab.native")),R(N.value)});const R=async t=>{var K,E,J,W,G,H,Q;let P=[],k=c.value.tokens;if(!(m.value.chainName&&k&&k[0]&&m.value.chainName.toLowerCase().includes((K=k[0])==null?void 0:K.chain))){f.value=[];return}let F=k;if(t&&t.split("::")&&t.split("::").length==3&&A.value=="Sui"){const s=ce("Sui");try{const e=c.value.tokensObj[t]||await s.getTokenBySymbol(c.value.tokens,t);e&&((E=k.filter(p=>(p==null?void 0:p.address)===(e==null?void 0:e.address)))==null?void 0:E.length)<1&&(y.setNewTokens({[t]:e}),F=k.concat(e))}catch(e){console.log("searchToken##err##",e)}}for(const s of Object.keys(F)){let e=fe(F[s]);const p=_.value.assets[e.address]&&_.value.assets[e.address].balance?ue(_.value.assets&&_.value.assets[e.address].balance,e.decimals):0;o.lastSelectCoin&&e&&e.address===o.lastSelectCoin?e.unusable=!0:e.unusable=!1;const ae=((J=c.value.tokensObj[e.address])==null?void 0:J.labels)&&((W=c.value.tokensObj[e.address])==null?void 0:W.labels[0]),le=c.value.tokensObj[e.address]?(G=c.value.tokensObj[e.address])==null?void 0:G.name:e.name;e={...e,balance:p,labels:ae,name:le,sort:(m.value.chainName==="Aptos"?e.symbol=="APT":e.symbol=="SUI")?1:-1},P.push(e)}let g;_.value.address?g=P.sort((s,e)=>e.balance-s.balance):g=P;let h=[];if(t){console.log(g,"sortResult=====>");const s=g.filter(e=>e.symbol.toLowerCase().indexOf(t.toLowerCase())!==-1||e.address.toLowerCase().indexOf(t.toLowerCase())!==-1||e.address.toLowerCase().indexOf(de(t).full_address.toLowerCase())!==-1||e.name.toLowerCase().indexOf(t.toLowerCase())!==-1);console.log(s,"===>result"),u.value!==a("tab.all")?h=s.filter(p=>u.value==a("tab.native")?!p.labels:p.labels&&p.labels.toLowerCase()==u.value.toLowerCase()):h=s}else console.log(u.value,"===>currentTab.value"),u.value!==a("tab.all")?h=g.filter(e=>u.value==a("tab.native")?!e.labels:e.labels&&e.labels.toLowerCase()==u.value.toLowerCase()):h=g;o.isCreatePoolToCoin?f.value=(H=h.filter(s=>O.value[s==null?void 0:s.address]))==null?void 0:H.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable):f.value=h.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable),o.isCreatePoolFromCoin&&(f.value=(Q=h.filter(s=>!O.value[s==null?void 0:s.address]))==null?void 0:Q.sort((s,e)=>e.sort-s.sort).sort((s,e)=>e.unusable-s.unusable)),console.log(f.value,"tokenList.value===>322")},ne=t=>{t.unusable||(d.emit("onSelect",t),d.emit("onClose"))};return D(()=>[N.value,j.value],([t,P])=>{console.log(t,"===>keyword"),R(t)},{immediate:!0}),D(()=>c.value.tokens,t=>{t&&(console.log(c.value.tokens,"===>pools.value.tokens"),R(N.value))},{immediate:!0}),{pools:c,t:a,chainName:A,tabList:M,currentTab:u,addCommom:se,tokenList:f,importIcon:$,keyword:N,wallet:_,toSelect:ne,store:m,isShowAll:j}}}),Oe=""+globalThis.__publicAssetsURL("image/warning@2x.png");const w=o=>(Se("data-v-22b4be38"),o=o(),Le(),o),Ae=w(()=>l("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ne={class:"coin-select-modal"},Pe={class:"search-input"},Be=["placeholder"],Me=w(()=>l("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),je=[Me],Re={key:0,class:"tab-list"},Fe=["onClick"],De={class:"item"},Ze=w(()=>l("div",{class:"line"},null,-1)),ze={class:"coin-list-box"},Ue={key:0,class:"coin-list"},qe=["onClick"],Ke={class:"left"},Ee={key:0},Je={key:1,alt:""},We={class:"name-box"},Ge=w(()=>l("img",{src:Oe,alt:""},null,-1)),He={class:"balance-box"},Qe={class:"balance"},Ve={key:0},Xe={key:1},Ye={key:2},xe={key:3},eo=w(()=>l("p",null,null,-1)),oo={key:1,class:"no-data"},so={key:0,class:"token-loading"},to={key:1,class:"no-data-content"},no={key:0,src:Te},ao={key:1,src:Ie},lo=w(()=>l("svg",{class:"icon","aria-hidden":"true"},[l("use",{"xlink:href":"#icon-icon-information"})],-1));function io(o,d,a,te,q,_){const y=Ce,c=Z("loading-outlined"),B=we,m=ye,O=Z("vue-scroll"),M=Z("Modal"),u=ke("image");return i(),V(M,{title:o.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=n=>o.$emit("onClose"))},{closeIcon:b(()=>[Ae]),default:b(()=>[l("div",Ne,[l("div",Pe,[z(l("input",{"onUpdate:modelValue":d[0]||(d[0]=n=>o.keyword=n),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:o.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Be),[[ge,o.keyword]]),o.keyword?(i(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=n=>o.keyword="")},je)):U("",!0)]),o.chainName!=="Sui"?(i(),r("div",Re,[(i(!0),r(X,null,Y(o.tabList,(n,S)=>(i(),r("div",{key:S,class:x(["item-container",o.currentTab==n?"item-container-active item-container":"item-container"]),onClick:A=>o.currentTab=n},[l("div",De,v(n),1)],10,Fe))),128))])):U("",!0),Ze,l("div",ze,[T(O,null,{default:b(()=>[o.tokenList&&o.tokenList.length>0?(i(),r("ul",Ue,[(i(!0),r(X,null,Y(o.tokenList,(n,S)=>(i(),r("li",{key:S,class:x(n.unusable?"unusable":""),onClick:A=>o.toSelect(n)},[l("div",Ke,[n.isChinaToken?z((i(),r("img",Je,null,512)),[[u,o.store.theme=="default"?("importIcon"in o?o.importIcon:I($))("/image/coins/unknown.png"):("importIcon"in o?o.importIcon:I($))("/image/coins/sui-unknown.png")]]):z((i(),r("img",Ee,null,512)),[[u,n.icon||n.logo_url||(o.store.theme=="default"?("importIcon"in o?o.importIcon:I($))("/image/coins/unknown.png"):("importIcon"in o?o.importIcon:I($))("/image/coins/sui-unknown.png"))]]),l("div",We,[l("span",null,[ee(v(n.symbol)+" ",1),n.isSelfBuilt?(i(),V(y,{key:0,placement:"right","arrow-point-at-center":""},{title:b(()=>[l("span",null,v(o.t("newAdd.notCetusTokenList")),1)]),default:b(()=>[Ge]),_:1})):U("",!0)]),l("p",null,v(n.name)+" "+v(n.labels?`(${n.labels})`:""),1)])]),l("div",He,[l("div",Qe,[o.wallet.loading?(i(),r("div",Ve,[T(B,null,{default:b(()=>[T(c)]),_:1})])):n.balance&&o.wallet.connected?(i(),r("div",Xe,v(("addCommom"in o?o.addCommom:I(se))(n.balance,n.decimals)),1)):!n.balance&&o.wallet.connected?(i(),r("div",Ye,"0")):(i(),r("div",xe))]),eo])],10,qe))),128))])):(i(),r("div",oo,[o.pools.isTokenLoading?(i(),r("div",so,[T(m)])):(i(),r("div",to,[o.store.theme=="default"?(i(),r("img",no)):(i(),r("img",ao)),l("p",null,v(o.t("newAdd.noTokensFound")),1),l("div",null,[ee(v(o.t("newAdd.enterCoinType"))+" ",1),T(y,{placement:"bottom","arrow-point-at-center":""},{title:b(()=>[l("span",null,v(o.t("newAdd.uniqueIdOfCoin")),1)]),default:b(()=>[lo]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const mo=he($e,[["render",io],["__scopeId","data-v-22b4be38"]]);export{mo as _};
