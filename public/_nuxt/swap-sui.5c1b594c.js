import{_ as ca}from"./refresh-icon.81dce340.js";import{_ as pa}from"./assets-card.919aedce.js";import{A as fa,R as ga,c as Ue,_ as wa,a as Ca,b as ha,d as ba}from"./confetti.module.6c5c50d2.js";import{C as Sa}from"./coin-select.be4a0dc8.js";import{_ as Aa}from"./swap-setting.c4f28ce9.js";import{_ as ka}from"./token-warning-modal.7da1bcff.js";import{u as ya,n as oo,w as Ia,b as le,g as B,k as _e,i as Fe,c as ce,m as De,d as Se,a4 as yo}from"./index.67c45b5d.js";import{a as Na,b as Ta,U as Oa,V as Ma,l as Ra,m as y,r as v,y as Ua,E as Fa,G as _,a5 as Io,e as $a,M as xe,q as La,o as h,f as R,h as m,c as L,F as No,j as Ae,v as F,i as x,w as ne,x as U,z as K,t as We,u as se,Q as Ba,S as Pa,B as ja,p as Ea,k as qa,a2 as Da,Y as Wa}from"./entry.69b7b6a8.js";import"./index.0d2b4586.js";/* empty css              *//* empty css              *//* empty css              */import{i as eo}from"./import-icon.de3e6c66.js";import{b as Ha,u as za,i as Ja,c as Ga,p as To}from"./pool.c995c591.js";import{D as p}from"./decimal.0bdeb344.js";import{u as Ka}from"./useSuiAggregator.f747be46.js";import{T as Qa}from"./trade-menu-tab.e5f8ce91.js";import{_ as Ya}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.95c12982.js";/* empty css              */import"./useDebounceFunction.43b9074c.js";import"./coin-img.3c3fe7a8.js";import"./token-warning_2x.c9867f84.js";import"./img-no-Positions_2x.c7331978.js";import"./img-no-Positions_2x.34c0bd02.js";import"./icon-warning_2x.d0f12071.js";import"./icon-error_2x.6eca6b9d.js";import"./icon-selected_3x.09e9a6f0.js";import"./vesrion-beta.b0171c91.js";const Xa=Na({components:{AggregatorSettingModal:fa,RouterModal:ga,TradeMenuTab:Qa},setup(){const e=Ta(),g=Oa(Ma,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:Q,locale:Oo}=Ra(),D=Ha(),ke=za(),t=y(()=>ke);let ye=v(!1),J=v(!0),He=v(!1),$e=v(!1),ze=v(!1),ee=v(!1);const te=v("fromCoin"),Ie=v(""),Ne=v(""),Le=v(!1),c=v(!0),Te=v(!1),N=v(!1),Y=v(!1),u=v(""),i=v(""),ue=v(20),j=v(0),pe=v(null),w=v(!1),Oe=y(()=>D.slippage),S=y(()=>D.chainName),E=y(()=>S.value?Ga(S.value):{}),oe=y(()=>Ka()),n=v(),s=v(),Je=y(()=>ce&&ce[S.value]&&ce[S.value].hasRouter),ao=y(()=>ke.getPoolInfoSuccess),Mo=y(()=>{var o;return C.value&&((o=C.value)!=null&&o.is_pause)?"Pool Closed":!n.value||!s.value?Q("modal.selectTokenModalTitle"):!Number(u.value)&&!Number(i.value)?Q("button.enterAmount"):!Je.value&&!C.value&&ao.value?"Pool Not Found":Je.value&&he.value?"No Available Route":w.value?Q("button.insufficientLiquidity"):Number(u.value)>Number(H.value)?Q("button.insufficientBalance",{name:n.value.symbol}):Q("button.swap")}),Ro=o=>{var l,a,f,d;te.value=o,o==="fromCoin"?(Ie.value=((l=s.value)==null?void 0:l.address)||"",Ne.value=((a=n.value)==null?void 0:a.address)||""):(Ie.value=((f=n.value)==null?void 0:f.address)||"",Ne.value=((d=s.value)==null?void 0:d.address)||""),Le.value=!0},Ge=v({}),Ke=v({}),Uo=o=>{te.value==="fromCoin"?(Ge.value=o,Ye(o)):(Ke.value=o,Ye(o))},Fo=o=>{o==="fromCoin"?(c.value=!0,S.value==="Aptos"?u.value=H.value>0?n.value.symbol=="APT"?new p(Number(H.value)).sub(new p(.1)).lt(new p(0))?"0":new p(Number(H.value)).sub(new p(.1)).toString():String(H.value):"":u.value=H.value>0?n.value.symbol=="SUI"?new p(Number(H.value)).sub(new p(.05)).lt(new p(0))?"0":new p(Number(H.value)).sub(new p(.05)).toString():String(H.value):""):(c.value=!1,S.value==="Aptos"?i.value=G.value>0?s.value.symbol=="APT"?new p(Number(G.value)).sub(new p(.1)).lt(new p(0))?"0":new p(Number(G.value)).sub(new p(.1)).toString():String(G.value):"":i.value=G.value>0?s.value.symbol=="SUI"?new p(Number(G.value)).sub(new p(.05)).lt(new p(0))?"0":new p(Number(G.value)).sub(new p(.05)).toString():String(G.value):"")},$o=o=>{o==="fromCoin"?(c.value=!0,u.value=H.value>0?_e(new p(Number(H.value)).div(2).toString(),n.value.decimals).toString():""):(c.value=!1,i.value=G.value>0?_e(new p(Number(G.value)).div(2).toString(),s.value.decimals).toString():"")},Qe=v(!1);Ua(()=>{console.log("æ‰§è¡Œæ¬¡æ•°"),no(),window.addEventListener("updateSwapParams",o=>{Qe.value=!Qe.value})}),Fa(()=>{clearInterval(pe.value)}),y(()=>D);const Be=()=>{var o,l,a,f,d;console.log("ðŸš€ ~ file: swap-sui.vue:785 ~ clickRefresh ~:"),!J.value&&(!C.value&&!Je.value||(clearInterval(pe.value),j.value=0,J.value=!0,X.value||we(c.value?u.value:i.value),W.value.address&&E.value.getAccount(W.value.address),setTimeout(()=>{J.value=!1,no()},1e3),console.log("ðŸš€ ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES11111:",(o=t==null?void 0:t.value)==null?void 0:o.RATES),(!((l=t==null?void 0:t.value)!=null&&l.RATES)||Fe((a=t==null?void 0:t.value)==null?void 0:a.RATES))&&(console.log("ðŸš€ ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES2222:",(f=t==null?void 0:t.value)==null?void 0:f.RATES),(d=t==null?void 0:t.value)==null||d.setRates("Sui"))))};console.log("ðŸš€ ~ file: swap-sui.vue:811 ~ clickRefresh ~ clickRefresh:",Be);const no=()=>{pe.value=setInterval(()=>{J.value=!1,Te.value||j.value<ue.value&&(j.value+=1,j.value===ue.value&&(S.value=="Aptos"?(C.value&&C.value.poolAddress&&ke.updateCurrentPools(C.value.poolAddress,S.value),Be()):ee.value||Be(),j.value=0,J.value=!0))},1e3)};_(c,Io((o,l)=>{c.value=o},500));const ae=v(!1);_(u,(o,l)=>{o&&o!==0&&c.value&&(j.value=0,qe(we(o),800)),o==""&&c.value&&(i.value="")}),_(i,(o,l)=>{o&&o!==0&&!c.value&&(j.value=0,qe(we(o),800)),o==""&&!c.value&&(u.value="")});const Pe=v(1e-4),je=async o=>{let l=o;if(S.value==="Aptos"&&!l.current_sqrt_price&&u.value&&i.value){const a=await E.value.getPools([l.address]);a&&a[0]&&(l={...o,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(l.current_sqrt_price&&u.value&&i.value){const f=(n.value.address===l.coinA.address&&s.value.address===l.coinB.address?0:1)==0,d=new p(u.value),b=new p(i.value),A=d.sub(d.mul(new p(l.fee))),I=b.div(A);return E.value.getPriceImpactPct(l,I.toString(),f)}return"--"},so=v(0),lo=v(0),to=v(),Ce=v({}),Lo=async o=>{if(C.value&&(X.value=!0,!(c.value&&Number(u.value)==0)&&!(!c.value&&Number(i.value)==0))){if(n.value&&s.value&&(u.value||i.value)){N.value=!0,Y.value=!0,w.value=!1;const l=n.value.address===C.value.coinA.address&&s.value.address===C.value.coinB.address?0:1;try{let a=await E.value.preSwap({pool:C.value,a2b:l==0,byAmountIn:c.value,amount:c.value?u.value:i.value});w.value=a==null?void 0:a.isExceed,to.value=a==null?void 0:a.estimatedFeeAmount,c.value?(i.value=a.estimatedAmountOut,re.value=(Number(a.estimatedAmountOut)/o).toString(),ie.value=(o/Number(a.estimatedAmountOut)).toString()):(u.value=a.estimatedAmountIn,re.value=(o/Number(a.estimatedAmountIn)).toString(),ie.value=(Number(a.estimatedAmountIn)/o).toString()),so.value=new p(i.value).div(u.value).toString(),lo.value=new p(u.value).div(i.value).toString(),Pe.value=S.value=="Aptos"?await je(C.value):await je(Ce.value||C.value),N.value=!1,Y.value=!1}catch(a){console.log("pre swap error1",a),N.value=!1,Y.value=!1}}else c.value?i.value="":u.value="",N.value=!1,Y.value=!1;X.value=!1}},Bo=ya(),W=y(()=>Bo),Po=v({}),ie=v(""),re=v(""),H=y(()=>W.value.assets&&n.value&&W.value.assets[n.value.address]?To(W.value.assets[n.value.address].balance,n.value.decimals):0),G=y(()=>W.value.assets&&s.value&&W.value.assets[s.value.address]?To(W.value.assets[s.value.address].balance,s.value.decimals):0);_(()=>t.value.tokensObj,async o=>{if(o&&!Fe(o)){const l=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?n.value=o[a]||await E.value.getTokenBySymbol(o,a):!a&&!n.value&&(n.value=o[ce[S.value].swapDefaultPair.fromCoin]),l?s.value=o[l]||await E.value.getTokenBySymbol(o,l):!l&&!s.value&&(s.value=o[ce[S.value].swapDefaultPair.toCoin],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ newValue:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",ce[S.value].swapDefaultPair.toCoin)),!a&&l&&(n.value="")}},{immediate:!0});const C=y(()=>{var o,l,a,f,d;if(n.value&&s.value){let b=null,A={};if(Object.values(t.value.poolConfigList).forEach(r=>{var k,$,M,O;(r.coinA.address.toUpperCase()===((k=n.value.address)==null?void 0:k.toUpperCase())&&r.coinB.address.toUpperCase()===(($=s.value.address)==null?void 0:$.toUpperCase())||r.coinB.address.toUpperCase()===((M=n.value.address)==null?void 0:M.toUpperCase())&&r.coinA.address.toUpperCase()===((O=s.value.address)==null?void 0:O.toUpperCase()))&&(A[r.address]={...r})}),S.value=="Aptos"&&t.value.poolsObj&&!Fe(t.value.poolsObj))for(const r in t.value.poolsObj){const k=t.value.poolsObj[r];(k.token_a.address.toUpperCase()===((o=n.value.address)==null?void 0:o.toUpperCase())&&k.token_b.address.toUpperCase()===((l=s.value.address)==null?void 0:l.toUpperCase())||k.token_b.address.toUpperCase()===((a=n.value.address)==null?void 0:a.toUpperCase())&&k.token_a.address.toUpperCase()===((f=s.value.address)==null?void 0:f.toUpperCase()))&&(A[k.address]={...k})}const I=Object.values(A).sort((r,k)=>r.fee-k.fee);for(let r=0;r<I.length;r++)if(!((d=I[r])!=null&&d.is_pause)){b=I[r];break}return b&&!Fe(b)?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1094 ~ poolInfo ~ info:",b),b):null}return null}),uo=v(!0),io=v(!1),jo=async o=>{o&&S.value=="Aptos"&&(we(c.value?u.value:i.value),io.value=!0,o.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&o.coinB.symbol.toLowerCase()===s.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,w.value=!1)};_(()=>C.value,(o,l)=>{o&&(!l||o.address!==l.address||o.current_sqrt_price!==l.current_sqrt_price)&&jo(o)},{immediate:!0,deep:!0});const Eo=y(()=>t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].logoURI),qo=y(()=>t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].logoURI),Do=y(()=>S.value==="Aptos"?t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].coingecko_id||null:t.value.tokensObj&&n.value&&n.value.address||null),Wo=y(()=>S.value==="Aptos"?t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].coingecko_id||null:t.value.tokensObj&&s.value&&s.value.address||null),Ho=y(()=>{var o,l,a,f,d,b,A,I,r,k,$,M,O;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1222 ~ formCoinMarket ~ pools?.value?.tokensObj:",(o=t==null?void 0:t.value)==null?void 0:o.tokensObj),(f=(a=t==null?void 0:t.value)==null?void 0:a.tokensObj[(l=n==null?void 0:n.value)==null?void 0:l.address])!=null&&f.pyth_id&&((A=(b=t==null?void 0:t.value)==null?void 0:b.tokensObj[(d=n==null?void 0:n.value)==null?void 0:d.address])==null?void 0:A.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(k=(r=t==null?void 0:t.value)==null?void 0:r.tokensObj[(I=n==null?void 0:n.value)==null?void 0:I.address])!=null&&k.coingecko_id?"coingecko":(O=(M=t==null?void 0:t.value)==null?void 0:M.tokensObj[($=n==null?void 0:n.value)==null?void 0:$.address])!=null&&O.birdeyeid?"birdeye":null}),zo=y(()=>{var o,l,a,f,d,b,A,I,r,k,$,M;return(a=(l=t==null?void 0:t.value)==null?void 0:l.tokensObj[(o=s==null?void 0:s.value)==null?void 0:o.address])!=null&&a.pyth_id&&((b=(d=t==null?void 0:t.value)==null?void 0:d.tokensObj[(f=s==null?void 0:s.value)==null?void 0:f.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(r=(I=t==null?void 0:t.value)==null?void 0:I.tokensObj[(A=s==null?void 0:s.value)==null?void 0:A.address])!=null&&r.coingecko_id?"coingecko":(M=($=t==null?void 0:t.value)==null?void 0:$.tokensObj[(k=s==null?void 0:s.value)==null?void 0:k.address])!=null&&M.birdeyeid?"birdeye":null}),Jo=y(()=>{var f,d;const o=new p(u.value),l=new p(S.value=="Aptos"?(f=C==null?void 0:C.value)==null?void 0:f.fee:(d=Ce==null?void 0:Ce.value)==null?void 0:d.fee),a=o.mul(l).toString();return Number(a)<1/Math.pow(10,n.value.decimals)?`<${new p(1).div(new p(Math.pow(10,n.value.decimals))).toString()}`:_e(a,n.value.decimals)}),{setIsShowSuccess:Go,setIsShowRejected:ro,setIsShowWaiting:Me,setTransactionDesc:Ko,setTransactionTxid:vo}=D,Qo=async()=>{var l,a,f,d,b,A,I,r,k,$;ee.value=!1,N.value=!0,clearInterval(Re),window.clearInterval(Re),vo(""),Ko(Q("tips.swapping",{from:`${B(u.value)} ${(l=n.value)==null?void 0:l.symbol}`,to:`${B(i.value)} ${(a=s.value)==null?void 0:a.symbol}`})),Me(!0);let o;S.value=="Aptos"&&(o=n.value.address===C.value.token_a.address&&s.value.address===C.value.token_b.address?0:1);try{let M;if(S.value=="Aptos")M=await E.value.getSwapTransactionPayload({pool:C.value,a2b:o==0,byAmountIn:c.value,amount:c.value?u.value:i.value,slippage:Number(Oe.value)/100});else{const z=c.value,de=Number(Oe.value)/100;M=await((f=oe==null?void 0:oe.value)==null?void 0:f.getRouterSwapPayload(T.value,z,de,n,s))}console.log("0221####swap###swapPayload###",M);let O;if(S.value==="Aptos")O=await W.value.currentWallet.signAndSubmitTransaction(M);else{const z=await E.value.signAndExecuteTransactionBlock(W.value.currentWallet,M,{action:"AggregatorSwap"});if(z==="errorIsReturned"){N.value=!1,Me(!1);return}console.log("0221###sui swap res###",z),O=E.value.handleTx(z),console.log("0221###swap###sui##tx###",O)}if(O&&O.hash){vo(O.hash),Me(!1),Go(!0);const z={title:Q("tips.swap"),desc:Q("tips.swapSuccessText",{from:`${B(u.value)} ${(d=n.value)==null?void 0:d.symbol}`,to:`${B(i.value)} ${(b=s.value)==null?void 0:b.symbol}`}),hash:O.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:n.value.address==ce[S.value].currentChainTokenAddress||s.value.address==ce[S.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(A=n.value)==null?void 0:A.address}`,numa:`- ${u.value}`,logoa:t.value.tokensObj&&n.value&&n.value.address&&t.value.tokensObj[n.value.address]&&t.value.tokensObj[n.value.address].logoURI,tokenb:`${(I=s.value)==null?void 0:I.address}`,numb:`+ ${i.value}`,logob:t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].logoURI},text:`Pay ${u.value} ${(r=n.value)==null?void 0:r.symbol} to receive ${i.value} ${(k=s.value)==null?void 0:k.symbol}`,excecuteTime:($=O==null?void 0:O.res)==null?void 0:$.excecuteTime};S.value!=="Aptos"&&(z.res=O.res),E.value.showTransitionPending(z);const de=await E.value.watchTransaction(z);console.log("0221###swap###transitionStatus####",de),de&&setTimeout(()=>{S.value=="Aptos"&&ke.updateCurrentPools(C.value.poolAddress,S.value),E.value.getAccount(W.value.address)},1e3)}else Me(!1),ro(!0);u.value="",i.value="",N.value=!1}catch(M){u.value="",i.value="",console.log("Swap Error###",M),N.value=!1,Me(!1),ro(!0)}},Yo=o=>{var l;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((l=t.value.tokensObj[o==null?void 0:o.address])==null?void 0:l.logo_url)||(D.theme==="default"?eo("/image/coins/unknown.png"):eo("/image/coins/sui-unknown.png"))},mo=v([]);_(()=>[n.value,s.value,t.value.poolConfigList],([o,l,a])=>{if(a&&a.length>0&&o&&l){const f=[];a.forEach(d=>{var b,A,I,r;(d.coinA.address.toUpperCase()===((b=o.address)==null?void 0:b.toUpperCase())&&d.coinB.address.toUpperCase()===((A=l.address)==null?void 0:A.toUpperCase())||d.coinB.address.toUpperCase()===((I=o.address)==null?void 0:I.toUpperCase())&&d.coinA.address.toUpperCase()===((r=l.address)==null?void 0:r.toUpperCase()))&&(d!=null&&d.is_pause||f.push(d.address))}),mo.value=f}},{immediate:!0});const Ye=o=>{console.log("ðŸš€ ~ getTokenSource ~ token:",o);const l=D.importTokenListObj;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(l!=null&&l.hasOwnProperty(o==null?void 0:o.address))),o!=null&&o.isSelfBuilt&&!(l!=null&&l.hasOwnProperty(o==null?void 0:o.address))?Xe.value=!0:(te.value==="fromCoin"?(s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null),n.value=o,u.value=u.value>0?le(u.value,o==null?void 0:o.decimals):""):(n.value&&o.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null),s.value=o,i.value=i.value>0?le(i.value,o==null?void 0:o.decimals):""),co())},Xe=v(!1),co=()=>{Ke.value={},Ge.value={},Xe.value=!1},Xo=y(()=>D.isShowRouterModal),fe=v([]),po=v(""),Zo=v(!1),fo=Ja();y(()=>fo);const he=v(!1),T=v({}),Vo=v(""),_o=v(),X=v(!1),Ee=v(0),Ze=async o=>{var l,a;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),X.value=!0,w.value=!1,n.value&&s.value&&(Number(u.value)>0&&c.value||Number(i.value)>0&&!c.value)){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!u.value&&i.value||u.value&&!i.value)&&(N.value=!0),ie.value="",re.value="",ae.value=!0,he.value=!1;let f;C.value&&(f=n.value.address===C.value.coinA.address&&s.value.address===C.value.coinB.address?0:1);try{let d;if(c.value){const k=new p(u.value).mul(Math.pow(10,n.value.decimals)).toString();d=new De(k)}else{const k=new p(i.value).mul(Math.pow(10,s.value.decimals)).toString();d=new De(k)}const b=Number(Oe.value)/100,A=C.value?{poolAddresses:mo.value,coinTypeA:C.value.coin_a_address,coinTypeB:C.value.coin_b_address,decimalsA:C.value.coinA.decimals,decimalsB:C.value.coinB.decimals,a2b:f==0,byAmountIn:c.value,amount:d.toString()}:"";console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fromCoin:",n),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ toCoin:",s),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ coinAmount:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",c.value);const I=Ee.value+1;Ee.value=I;const r=await((l=oe==null?void 0:oe.value)==null?void 0:l.getFindRouter(n,s,d.toString(),c.value,b,C.value?A:"",I));if(console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter:",r),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter JSON:",JSON.stringify(r,null,2)),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ suiAmountId.value:",Ee.value),console.log("ðŸš€ ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter.id:",r==null?void 0:r.id),Ee.value!==(r==null?void 0:r.id)){ae.value=!1,X.value=!1,N.value=!1,T.value={},fe.value=[],c.value?i.value="":u.value="";return}if(r!=null&&r.insufficientLiquidity){w.value=!0,ae.value=!1,X.value=!1,N.value=!1,T.value={},fe.value=[],c.value?i.value="":u.value="";return}if(!r||!(r!=null&&r.routes)||((a=r==null?void 0:r.routes)==null?void 0:a.length)==0){N.value=!1,he.value=!0,ae.value=!1,X.value=!1,T.value={},fe.value=[],u.value?i.value="":u.value="";return}if(r.fromCoinAddress!==n.value.address||r.toCoinAddress!==s.value.address){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1861 ~ getSuiAmount ~",r.fromCoinAddress!==n.value.address||r.toCoinAddress!==s.value.address),T.value={},fe.value=[];return}r?(T.value=r,fe.value=r.routes,w.value=!1,c.value?u.value&&(i.value=new p(r.amountOut).div(new p(Math.pow(10,s.value.decimals))).toString()):i.value&&(u.value=new p(r.amountIn).div(new p(Math.pow(10,n.value.decimals))).toString()),console.log(i.value,"###toCoinAmount.value"),ie.value=B(le(new p(u.value).div(new p(i.value).toString()),n.value.decimals)),re.value=B(le(new p(i.value).div(u.value).toString(),s.value.decimals)),N.value=!1,he.value=!1,ae.value=!1):(N.value=!1,he.value=!0,ae.value=!1)}catch(d){console.log("pre swap error2",d),N.value=!1,ae.value=!1,X.value=!1}}else c.value?i.value="":u.value="",N.value=!1,ae.value=!1;X.value=!1,console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1926 ~ getSuiAmount ~ isRoutrProgress.value:",X.value)},ge=v(!1),go=async o=>{var l;try{let a;if(c.value){const b=new p(u.value).mul(Math.pow(10,n.value.decimals)).toString();a=new De(b)}else{const b=new p(i.value).mul(Math.pow(10,s.value.decimals)).toString();a=new De(b)}const f=Number(Oe.value)/100,d=await((l=oe==null?void 0:oe.value)==null?void 0:l.getFindRouter(n,s,a.toString(),c.value,f,""));if(d){T.value=d,fe.value=d.routes,w.value=!1,po.value=d.amountIn,ie.value=B(le(new p(u.value).div(new p(i.value).toString()),n.value.decimals)),re.value=B(le(new p(i.value).div(u.value).toString(),s.value.decimals));const b=new p(d.amountOut).div(new p(Math.pow(10,s.value.decimals))).toString(),A=new p(d.amountIn).div(new p(Math.pow(10,n.value.decimals))).toString();c.value?i.value!==b&&(ge.value=!0,i.value=b):u.value!==A&&(ge.value=!0,u.value=A)}}catch(a){console.log("pre swap error3",a)}},xo=async o=>{if(n.value&&s.value&&(u.value||i.value)){const l=n.value.address===C.value.coinA.address&&s.value.address===C.value.coinB.address?0:1;try{let a=await E.value.preSwap({pool:C.value,a2b:l==0,byAmountIn:c.value,amount:c.value?u.value:i.value});w.value=a==null?void 0:a.isExceed,to.value=a==null?void 0:a.estimatedFeeAmount,c.value?(re.value=(Number(a.estimatedAmountOut)/a.estimatedAmountIn).toString(),ie.value=(a.estimatedAmountIn/Number(a.estimatedAmountOut)).toString()):(re.value=(Number(a.estimatedAmountOut)/Number(a.estimatedAmountIn)).toString(),ie.value=(Number(a.estimatedAmountIn)/Number(a.estimatedAmountOut)).toString()),c.value?i.value!==a.estimatedAmountOut&&(ge.value=!0,i.value=a.estimatedAmountOut):u.value!==a.estimatedAmountIn&&(ge.value=!0,u.value=a.estimatedAmountIn),Pe.value=S.value=="Aptos"?await je(C.value):await je(Ce.value||C.value),N.value=!1,Y.value=!1}catch(a){console.log("pre swap error4",a),N.value=!1,Y.value=!1}}else N.value=!1,Y.value=!1};let Re=v(null);_(()=>ee.value,o=>{o?Re.value=setInterval(()=>{S.value=="Aptos"?xo(c.value):go(c.value)},3e3):(clearInterval(Re.value),window.clearInterval(Re.value))},{immediate:!0});const we=async o=>{S.value=="Aptos"?Lo(o):Ze()};_(()=>Qe.value,o=>{(Number(u.value)>0||Number(i.value)>0)&&we(c.value?u.value:i.value)},{immediate:!0});const ea=y(()=>fo),wo=y(()=>ea.value.isInitRouter);_(()=>wo.value,o=>{o||(j.value=0,we(c.value?u.value:i.value))},{immediate:!0});function qe(o,l=500){let a=null;return function(...f){clearTimeout(a),a=setTimeout(()=>{o.call(this,...f)},l)}}_(()=>[n.value,s.value],([o,l])=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2181 ~ setup ~ fromCoin && toCoin:",o&&l),o&&l&&(j.value=0,qe(we(c.value?u.value:i.value))),o||l){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1965 ~ setup ~ fromCoin:",o);const a=`/swap?from=${o==null?void 0:o.address}&to=${l==null?void 0:l.address}`;e.push(a)}},{immediate:!0,deep:!0});const oa=qe(Co);function Co(){const o=n.value;n.value=s.value,s.value=o,ye.value=!0,ve.value=="open"?c.value=!0:c.value=!c.value,c.value?(u.value=i.value,i.value=""):(i.value=u.value,u.value=""),setTimeout(()=>{ye.value=!1},300)}const aa=()=>{ge.value=!1},na=()=>{ee.value=!1,ge.value=!1},sa=[{label:"Swap",link:"/swap"},{label:"Limit",link:"/limit"},{label:"DCA",link:"/dca",hasBeta:!0}],la=v("Swap"),ho=v(!1),Ve=y(()=>{var o,l,a,f,d,b,A,I,r,k,$,M,O,z;try{if((o=n==null?void 0:n.value)!=null&&o.address&&((l=s==null?void 0:s.value)!=null&&l.address)&&(T!=null&&T.value)&&!Fe(T==null?void 0:T.value)){const de=Se((a=T==null?void 0:T.value)==null?void 0:a.amountIn).div(Math.pow(10,(f=n.value)==null?void 0:f.decimals)),ma=Se((d=T==null?void 0:T.value)==null?void 0:d.amountOut).div(Math.pow(10,(b=s.value)==null?void 0:b.decimals)),me=Se(ma).div(de);console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",me==null?void 0:me.toString());const Z=(r=(A=t==null?void 0:t.value)==null?void 0:A.RATES)==null?void 0:r[(I=n==null?void 0:n.value)==null?void 0:I.address];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",Z);const V=(M=(k=t==null?void 0:t.value)==null?void 0:k.RATES)==null?void 0:M[($=s==null?void 0:s.value)==null?void 0:$.address];if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",V),!(Z!=null&&Z.price)||!(V!=null&&V.price)||Se(Z==null?void 0:Z.price).lte(0)||Se(V==null?void 0:V.price).lte(0))throw Error("rate invalid");const be=Se(Z==null?void 0:Z.price).div(V==null?void 0:V.price);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",be==null?void 0:be.toString()),me.gt(be)){const q=me.minus(be).div(me).mul(100);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ result1:",q==null?void 0:q.toString()),yo((O=q==null?void 0:q.negated())==null?void 0:O.toString(),2)}else{const q=me.minus(be).div(me).mul(100);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ result2:",q==null?void 0:q.toString()),yo((z=q==null?void 0:q.abs())==null?void 0:z.toString(),2)}}return}catch(de){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",de),"Incalculable"}}),ta=y(()=>(S==null?void 0:S.value)==="Aptos"?Pe.value:Ve==null?void 0:Ve.value),ve=v(localStorage.getItem("plusChecked1"))||v("close"),ua=y(()=>D.liquiditySourceList),ia=o=>{console.log("ðŸš€ ~ modalConfirm ~ result121:",o),o&&o.length>0?o.every(a=>a.name=="Cetus"?!0:a.status==="close")?ve.value="close":(ve.value="open",i.value=""):ve.value="close",ho.value=!1},ra=y(()=>D.includeRoutes),bo=o=>{ve.value=ve.value=="open"?"close":"open",localStorage.setItem("plusChecked1",ve.value);const l=ra.value,a=ua.value;a.forEach(f=>{o?f.status="open":f.name!=="Cetus"?f.status="close":f.status="open"}),console.log("ðŸš€ ~ //clickCheckedresult ~ arr:",a,l),D.setAggregatorSetting(a,l)},So=()=>{const o=window.innerWidth,l=window.innerHeight,a=document.getElementById("plusModeSwitch"),f=a==null?void 0:a.getBoundingClientRect(),d=f==null?void 0:f.left,b=f==null?void 0:f.top;console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ x:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ y:",b),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportWidth:",o),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportHeight:",l);const A=2,I=Ue.shapeFromText({text:"ðŸŸ¢",scalar:A}),r=Ue.shapeFromText({text:"ðŸ”µ",scalar:A}),k=Ue.shapeFromText({text:"ðŸ’š",scalar:A}),$=Ue.shapeFromText({text:"ðŸ’™",scalar:A});Ue({particleCount:40,spread:60,shapes:[I,r,k,$],scalar:A,origin:{x:d/o,y:b*1.2/l}})},va=o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2264 ~ handleSwitchPlusMode ~ value:",o),u.value="",i.value="",o&&So(),bo(o),setTimeout(()=>{Ze()},500)},Ao=v(!1),da=o=>{Ao.value=o},ko=v(!1);return{modalConfirm:ia,clickChecked:bo,currentTradeTab:la,plusChecked:ve,closeSwapConfirmModal:na,updateAccept:aa,clickExchange:Co,debounceClickExchange:oa,closeTokenWarning:co,isShowTokenWarning:Xe,getTokenSource:Ye,hasPool:io,getPoolInfoSuccess:ao,halfBtnSelect:$o,formCoinId:Do,toCoinId:Wo,formCoinMarket:Ho,toCoinMarket:zo,fromCoinUrl:Eo,toCoinUrl:qo,t:Q,indicator:g,wallet:W,currentLpInfo:Po,fixD:oo,decimalFormat:Ia,impact:Pe,oneFromAmount:ie,oneToAmount:re,importIcon:eo,clickRefresh:Be,refresh:J,change:ye,isShowAddress:He,isShowSwapSetting:$e,fromCoin:n,toCoin:s,slippage:Oe,openCoinSelect:Ro,onCoinSelect:Uo,existingCoins:Ie,lastSelectCoin:Ne,currentCoinKey:te,showCoinSelect:Le,fromCoinAmount:u,toCoinAmount:i,maxBtnSelect:Fo,fixedFromCoin:c,swapBtnText:Mo,toSwap:Qo,loading:Te,swaping:N,autoRefreshTime:ue,countdown:j,marketTimer:pe,rateChange:ze,isSwapConfirmMpdal:ee,fromCoinBlance:H,toCoinBlance:G,poolInfo:C,chainName:S,swapRouterLoading:ae,formatFee:Jo,calculating:Y,currentRate:so,currentRateReverse:lo,getCoinIcon:Yo,toAddLiquidiPoolInfo:Ce,decimalUi:le,warningToCoin:Ke,warningFromCoin:Ge,isShowRouterModal:Xo,toSwapLoading:Zo,insufficientLiquidity:w,routerPool:fe,routerTotalAmounts:po,store:D,suiPreSwapdata:T,suiSwapFee:_o,suiSwapFeeUi:Vo,addCommom:B,debounce:Io,notFoundRouter:he,getSuiAmountAccept:go,isShowAccept:ge,getSuiAmount:Ze,tradeTabList:sa,isInitSwapRouter:wo,isShowAggregatorModal:ho,priceImpact:ta,triggerConfettiAnimation:So,handleSwitchPlusMode:va,assetLoading:Ao,onInputLoading:da,onInputToCoinLoading:o=>{console.log("ðŸš€ ~ file: swap-sui.vue:2341 ~ onInputToCoinLoading ~ status:",o),ko.value=o},assetToCoinLoading:ko}}});const P=e=>(Ea("data-v-94a2df14"),e=e(),qa(),e),Za={class:"swap-container"},Va={class:"left"},_a={class:"right title-right"},xa=P(()=>m("div",{class:"price-reference-text"}," The Plus Mode will aggregate external liquidity sources ",-1)),en={key:0,class:K("icon-bg plus-switch")},on=P(()=>m("p",null,[m("span",null,"Plus Mode")],-1)),an={class:"setting-right"},nn=P(()=>m("div",{class:"new-style-tooltip-text"},"Swap Settings",-1)),sn=P(()=>m("svg",{"aria-hidden":"true",class:"icon"},[m("use",{"xlink:href":"#icon-icon_set"})],-1)),ln=[sn],tn=P(()=>m("div",{class:"new-style-tooltip-text"},"Slippage Settings",-1)),un=P(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),rn={class:"swap-card"},vn={class:"card-container"},dn=P(()=>m("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),mn=[dn],cn={key:1,class:"induction"},pn={key:0,class:"exchange-rate-btn"},fn={key:0},gn={key:0},wn={key:0},Cn={key:1},hn={key:0},bn=P(()=>m("div",null,[m("svg",{class:"icon icon-up","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Sn=P(()=>m("div",null,[m("svg",{class:"icon icon-down","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),An=[bn,Sn],kn={class:"item"},yn={class:"induction-text"},In={key:0,class:"icon","aria-hidden":"true"},Nn=P(()=>m("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Tn=[Nn],On={class:"item"},Mn={class:"induction-text"},Rn={key:0,class:"induction-value"},Un={class:"item"},Fn={class:"induction-text"},$n={key:0,class:"induction-value"},Ln={key:0,class:"icon","aria-hidden":"true"},Bn=P(()=>m("use",{"xlink:href":"#icon-icon-swap"},null,-1)),Pn=[Bn],jn={key:2,class:"token-info-container"},En={class:"token-info-title"},qn=P(()=>m("span",{class:"coingecko"},"Price Reference",-1)),Dn=P(()=>m("div",{class:"price-reference-text"}," The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ",-1)),Wn=P(()=>m("svg",{class:"icon","aria-hidden":"true"},[m("use",{"xlink:href":"#icon-icon_tips"})],-1));function Hn(e,g,Q,Oo,D,ke){var j,pe;const t=xe("TradeMenuTab"),ye=Da,J=Ba,He=ca,$e=pa,ze=wa,ee=Pa,te=Wa,Ie=ja,Ne=Ca,Le=Sa,c=Aa,Te=ha,N=ka,Y=xe("RouterModal"),u=ba,i=xe("AggregatorSettingModal"),ue=La("image");return h(),R("div",Za,[m("div",{class:K(e.chainName=="Sui"?"sui-title swap-title":"swap-title")},[m("div",Va,[e.chainName=="Sui"?(h(),L(t,{key:0,"trade-tab-list":e.tradeTabList,"current-trade-tab":e.currentTradeTab},null,8,["trade-tab-list","current-trade-tab"])):(h(),R(No,{key:1},[Ae(F(e.$t("menu.swap")),1)],64))]),m("div",_a,[x(J,{"overlay-class-name":"price-impact-tooltip"},{title:ne(()=>[xa]),default:ne(()=>[e.chainName=="Sui"?(h(),R("div",en,[on,x(ye,{id:"plusModeSwitch",class:"liquidity-switch",checked:e.plusChecked=="open",onClick:g[0]||(g[0]=w=>{e.handleSwitchPlusMode(w)})},null,8,["checked"])])):U("",!0)]),_:1}),m("div",an,[e.chainName=="Sui"?(h(),R("div",{key:0,class:"aggregator-setting",onClick:g[1]||(g[1]=w=>e.isShowAggregatorModal=!0)},[x(J,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[nn]),default:ne(()=>[m("div",{class:K(e.chainName=="Sui"?"icon-bg":"")},ln,2)]),_:1})])):U("",!0),x(J,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[tn]),default:ne(()=>[m("div",{class:"slippage-icon",onClick:g[2]||(g[2]=w=>e.isShowSwapSetting=!0)},[m("div",{class:K(e.chainName=="Sui"?"icon-bg":"")},[un,m("span",null,F(e.slippage)+"%",1)],2)])]),_:1}),m("div",{class:K(e.chainName=="Sui"?"icon-bg":"")},[x(He,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])],2)])])],2),m("div",rn,[m("div",vn,[m("div",{class:K(["card-item",!e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[x($e,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":g[3]||(g[3]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From","swap-loading":!e.fixedFromCoin&&e.fromCoin&&(e.swapRouterLoading||e.assetToCoinLoading),title:"Sell",onOnInputLoading:e.onInputLoading,onOnMax:g[4]||(g[4]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:g[5]||(g[5]=w=>e.halfBtnSelect("fromCoin")),onOnInput:g[6]||(g[6]=w=>{e.fromCoinAmount=w}),onOnFocus:g[7]||(g[7]=()=>{e.fixedFromCoin=!0}),onOnSelect:g[8]||(g[8]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","swap-loading","onOnInputLoading"])],2),m("div",{class:K(["card-item",e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[x($e,{modelValue:e.toCoinAmount,"onUpdate:modelValue":g[9]||(g[9]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,title:"Buy","input-disabled":e.chainName!=="Aptos"&&e.plusChecked=="open","swap-loading":e.fixedFromCoin&&e.toCoin&&(e.swapRouterLoading||e.assetLoading),onOnInputLoading:e.onInputToCoinLoading,onOnInput:g[10]||(g[10]=w=>{e.toCoinAmount=w}),onOnFocus:g[11]||(g[11]=()=>{e.fixedFromCoin=!1}),onOnSelect:g[12]||(g[12]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","input-disabled","swap-loading","onOnInputLoading"])],2),m("img",{class:K(e.change?"gang animationex":"gang"),src:Ya,alt:""},null,2),m("div",{class:K(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:g[13]||(g[13]=(...w)=>e.debounceClickExchange&&e.debounceClickExchange(...w))},[(h(),R("svg",{class:K(e.change?"icon animationex":"icon"),"aria-hidden":"true"},mn,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter&&e.fromCoin&&e.toCoin&&!e.insufficientLiquidity?(h(),L(ze,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"form-coin-market":e.formCoinMarket,"to-coin-market":e.toCoinMarket,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.priceImpact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","form-coin-market","to-coin-market","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(h(),R("div",cn,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(h(),R("div",pn,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(h(),R("span",Cn,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(h(),R("span",hn,[We(m("img",null,null,512),[[ue,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),Ae(" 1 "+F(e.toCoin.symbol)+" â‰ˆ ",1),We(m("img",null,null,512),[[ue,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),m("span",null,F(("addCommom"in e?e.addCommom:se(B))(("decimalUi"in e?e.decimalUi:se(le))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),Ae(" Â "+F(e.fromCoin.symbol),1)])):(h(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"]))])):U("",!0):(h(),R("span",fn,[We(m("img",null,null,512),[[ue,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),Ae(" 1 "+F(e.fromCoin.symbol)+" â‰ˆ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(h(),R("span",gn,[We(m("img",null,null,512),[[ue,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?U("",!0):(h(),R("span",wn,F(("addCommom"in e?e.addCommom:se(B))(("decimalUi"in e?e.decimalUi:se(le))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(h(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"])):U("",!0),Ae(" Â "+F(e.toCoin.symbol),1)])):(h(),L(ee,{key:1,indicator:e.indicator},null,8,["indicator"]))])),m("div",{class:"icon-change",onClick:g[14]||(g[14]=w=>e.rateChange=!e.rateChange)},An)])):U("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(h(),R(No,{key:1},[m("div",kn,[m("div",yn,F(e.$t("common.priceImpact")),1),e.swaping?(h(),L(te,{key:1,paragraph:!1,active:""})):(h(),R("div",{key:0,class:K(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[Ae(F(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(h(),R("svg",In,Tn)):U("",!0)],2))]),m("div",On,[m("div",Mn,F(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(h(),L(te,{key:1,paragraph:!1,active:""})):(h(),R("div",Rn,F(e.fixedFromCoin?("addCommom"in e?e.addCommom:se(B))(("fixD"in e?e.fixD:se(oo))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:se(B))(("fixD"in e?e.fixD:se(oo))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+F(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),m("div",Un,[m("div",Fn,F(e.$t("common.fee")),1),e.swaping?(h(),L(te,{key:1,paragraph:!1,active:""})):(h(),R("div",$n,F(("addCommom"in e?e.addCommom:se(B))(e.formatFee,e.fromCoin.decimals))+" "+F(e.fromCoin.symbol)+" ("+F(e.chainName=="Aptos"?e.poolInfo.fee*100:((j=e.toAddLiquidiPoolInfo)==null?void 0:j.fee)*100)+"%) ",1))])],64)):U("",!0)])):U("",!0)]),x(Ie,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((pe=e.poolInfo)==null?void 0:pe.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.swaping,onClick:g[15]||(g[15]=w=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ne(()=>[e.wallet.connected?(h(),R("svg",Ln,Pn)):U("",!0),m("span",null,F(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),x(Ne),e.showCoinSelect?(h(),L(Le,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:g[16]||(g[16]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):U("",!0),e.isShowSwapSetting?(h(),L(c,{key:1,onOnClose:g[17]||(g[17]=w=>e.isShowSwapSetting=!1)})):U("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(h(),R("div",jn,[m("div",En,[qn,x(J,{"overlay-class-name":"price-impact-tooltip",placement:"top","arrow-point-at-center":""},{title:ne(()=>[Dn]),default:ne(()=>[Wn]),_:1})]),e.fromCoin&&e.formCoinMarket?(h(),L(Te,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):U("",!0),e.toCoin&&e.toCoinMarket?(h(),L(Te,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):U("",!0)])):U("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(h(),L(N,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):U("",!0),e.isShowRouterModal?(h(),L(Y,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:g[18]||(g[18]=w=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):U("",!0),e.isSwapConfirmMpdal?(h(),L(u,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.priceImpact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):U("",!0),e.isShowAggregatorModal?(h(),L(i,{key:6,onClose:g[19]||(g[19]=w=>e.isShowAggregatorModal=!1),onModalConfirm:g[20]||(g[20]=w=>{e.modalConfirm(w)})})):U("",!0)])}const bs=$a(Xa,[["render",Hn],["__scopeId","data-v-94a2df14"]]);export{bs as default};
