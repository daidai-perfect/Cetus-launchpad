import{a as Ce,f as Q,d as pe,c as re,N as fo,u as Re,k as Te,O as po,s as Ae,b as ho,F as go,p as wo,l as je,x as So,y as He}from"./pool.2587b8e2.js";import{a as le,r as U,e as ce,M as ae,o as c,f as T,h as n,c as K,x as W,j as me,v as N,p as ve,k as fe,a6 as Uo,m as o,D as se,y as eo,w as ne,L as Ke,i as Y,F as De,s as qe,z as we,S as Ye,u as te,K as Eo,Y as jo,B as oo,C as Do,W as qo,l as to,a5 as Wo,I as Vo,a2 as zo,b as Co,a8 as Ho}from"./entry.a4db0d61.js";import"./index.b10985b1.js";import{C as no}from"./coin-img.a6207125.js";import{u as ko,a as so}from"./useToken.31e8d532.js";import{u as bo,R as Go,e as Ko,c as Ee,A as Yo,a as Jo,_ as Xo,b as Qo,d as Zo}from"./confetti.module.05dc57aa.js";import"./decimal.a2826370.js";import{b as Ge,u as Je,c as ge}from"./index.6288ac24.js";import{D as M}from"./decimal.765d8738.js";/* empty css              */import{_ as xo}from"./refresh-icon.3c373177.js";import{_ as et}from"./swap-setting.e196717e.js";/* empty css              */import{_ as ot}from"./coin-select.f0a208bf.js";import{_ as tt}from"./token-warning-modal.6eb06878.js";/* empty css              */import{_ as _o}from"./token-warning.aafe8d13.js";import{u as nt}from"./useDebounceFunction.2335f32c.js";import{C as st}from"./coin-single.c37f36b0.js";import{i as at}from"./install.036e16d3.js";import{_ as it}from"./limit-beta.2cca2c73.js";import"./useSDK.96ba4be6.js";/* empty css              */import"./icon-error_2x.e432e260.js";import"./import-icon.de3e6c66.js";/* empty css              */import"./token-warning_2x.9203e937.js";import"./img-no-Positions_2x.03349b71.js";import"./img-no-Positions_2x.dac445b1.js";import"./icon-selected_3x.09e9a6f0.js";const rt=le({components:{CoinImg:no},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},oneToAmount:{type:String,default:()=>""},oneFromAmount:{type:String,default:()=>""}},setup(e){return{rateChange:U(!1)}}});const yo=e=>(ve("data-v-bf80ed04"),e=e(),fe(),e),ut={class:"swap-rate"},lt={key:0},ct={class:"after-amount"},dt={key:1},mt={class:"after-amount"},pt=yo(()=>n("svg",{class:"icon icon-up","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-exchange_up1"})],-1)),vt=yo(()=>n("svg",{class:"icon icon-down","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-exchange_down1"})],-1)),ft=[pt,vt];function ht(e,t,v,s,m,w){var u,r,i,S,g,l,$,b,_,I,P,A;const a=ae("CoinImg");return c(),T("div",ut,[e.rateChange?(c(),T("span",dt,[n("span",mt,[($=e.toCoin)!=null&&$.address?(c(),K(a,{key:0,url:(b=e.toCoin)==null?void 0:b.logoURI,size:"16px"},null,8,["url"])):W("",!0),me(" 1 "+N((_=e.toCoin)==null?void 0:_.symbol)+" â‰ˆ "+N(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+N((I=e.fromCoin)==null?void 0:I.symbol)+"Â  ",1),(P=e.fromCoin)!=null&&P.address?(c(),K(a,{key:1,url:(A=e.fromCoin)==null?void 0:A.logoURI,size:"16px"},null,8,["url"])):W("",!0)])])):(c(),T("span",lt,[n("span",ct,[(u=e.fromCoin)!=null&&u.address?(c(),K(a,{key:0,url:(r=e.fromCoin)==null?void 0:r.logoURI,size:"16px"},null,8,["url"])):W("",!0),me("Â 1 "+N((i=e.fromCoin)==null?void 0:i.symbol)+" â‰ˆ "+N(e.oneToAmount==1/0?0:e.oneToAmount)+" "+N((S=e.toCoin)==null?void 0:S.symbol)+"Â  ",1),(g=e.toCoin)!=null&&g.address?(c(),K(a,{key:1,url:(l=e.toCoin)==null?void 0:l.logoURI,size:"16px"},null,8,["url"])):W("",!0)])])),n("div",{class:"right",onClick:t[0]||(t[0]=j=>e.rateChange=!e.rateChange)},ft)])}const ao=ce(rt,[["render",ht],["__scopeId","data-v-bf80ed04"]]),de=Uo("useSuiSwapStore",{state:()=>({fromCoin:{},toCoin:{},fromCoinAmount:"",toCoinAmount:"",fixedFromCoin:!0,oneFromAmount:"",oneToAmount:"",minimumReceived:"",maximumSold:"",isSwapping:!1,swapPoolInfo:{},suiPreSwapData:{},swapRouterLoading:!1,notFoundRouter:!1,isRouterProgress:!1,refresh:!0,routerPool:[],routerSwap:[],insufficientLiquidity:!1,countdown:0,isSwapConfirmModal:!1,plusChecked:localStorage.getItem("plusChecked")||"close"}),actions:{setFromCoin(e){this.fromCoin=e},setFromCoinAmount(e){console.log("ðŸš€ ~ setFromCoinAmount ~ data:",e),this.fromCoinAmount=e},setToCoin(e){this.toCoin=e},setToCoinAmount(e){this.toCoinAmount=e},setFixedFromCoin(e){this.fixedFromCoin=e},setPlusChecked(e){this.plusChecked=e},setOneFromAmount(e){this.oneFromAmount=e},setOneToAmount(e){this.oneToAmount=e},setIsSwapping(e){this.isSwapping=e},setSwapPoolInfo(e){this.swapPoolInfo=e},setSuiPreSwapData(e){this.suiPreSwapData=e},setSwapRouterLoading(e){this.swapRouterLoading=e},setNotFoundRouter(e){this.notFoundRouter=e},setIsRouterProgress(e){this.isRouterProgress=e},setRouterPool(e){this.routerPool=e},setRouterSwap(e){this.routerSwap=e},setInsufficientLiquidity(e){this.insufficientLiquidity=e},setCountdown(e){this.countdown=e},setRefresh(e){this.refresh=e},setIsSwapConfirmModal(e){this.isSwapConfirmModal=e},setMinimumReceived(e){this.minimumReceived=e},setMaximumSold(e){this.maximumSold=e}}});function xe(e,t=500){let v=null;return function(...s){clearTimeout(v),v=setTimeout(()=>{e.call(this,...s)},t)}}function $o(){const e=Ce(),t=o(()=>e);console.log(1313);const v=de(),s=o(()=>v),{setIsRouterProgress:m,setInsufficientLiquidity:w,setIsSwapping:a,setOneFromAmount:u,setOneToAmount:r,setSwapRouterLoading:i,setNotFoundRouter:S,setSuiPreSwapData:g,setRouterPool:l,setFromCoinAmount:$,setToCoinAmount:b,setCountdown:_,setMinimumReceived:I,setMaximumSold:P}=v,A=o(()=>s.value.swapPoolInfo),j=o(()=>s.value.fromCoin),h=o(()=>s.value.toCoin),d=o(()=>s.value.fromCoinAmount),k=o(()=>s.value.toCoinAmount),C=o(()=>s.value.fixedFromCoin),O=o(()=>s.value.isRouterProgress),f=o(()=>s.value.routerSwap),B=o(()=>t.value.slippage),D=o(()=>bo()),L=U(0),q=async p=>{var y,F;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),m(!0),w(!1),j.value&&h.value&&(Number(d.value)>0&&C.value||Number(k.value)>0&&!C.value)){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!d.value&&k.value||d.value&&!k.value)&&a(!0),u(""),r(""),i(!0),S(!1);let E;A.value&&(E=j.value.address===A.value.coinA.address&&h.value.address===A.value.coinB.address?0:1);try{let R;if(C.value){const Se=new M(d.value).mul(Math.pow(10,j.value.decimals)).toString();R=new Ge(Se)}else{const Se=new M(k.value).mul(Math.pow(10,h.value.decimals)).toString();R=new Ge(Se)}const V=Number(B.value)/100,J=A.value?{poolAddresses:f.value,coinTypeA:A.value.coin_a_address,coinTypeB:A.value.coin_b_address,decimalsA:A.value.coinA.decimals,decimalsB:A.value.coinB.decimals,a2b:E==0,byAmountIn:C.value,amount:R.toString()}:"";console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fromCoin:",j),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ toCoin:",h),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ coinAmount:",R),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",C.value);const H=L.value+1;L.value=H;const z=await((y=D==null?void 0:D.value)==null?void 0:y.getFindRouter(j,h,R.toString(),C.value,V,A.value?J:"",H));if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ swapRouter:",z),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ swapRouter JSON:",JSON.stringify(z,null,2)),L.value!==(z==null?void 0:z.id)){i(!1),m(!1),a(!1),g({}),l([]),C.value?b(""):$("");return}if(z!=null&&z.insufficientLiquidity){w(!0),i(!1),m(!1),a(!1),g({}),l([]),C.value?b(""):$("");return}if(!z||!(z!=null&&z.routes)||((F=z==null?void 0:z.routes)==null?void 0:F.length)==0){a(!1),S(!0),i(!1),m(!1),g({}),l([]),d.value?b(""):$("");return}if(z.fromCoinAddress!==j.value.address||z.toCoinAddress!==h.value.address){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1861 ~ getSuiAmount ~",z.fromCoinAddress!==j.value.address||z.toCoinAddress!==h.value.address),g({}),l([]);return}if(z){if(g(z),l(z.routes),w(!1),C.value){if(d.value){const $e=new M(z.amountOut).div(new M(Math.pow(10,h.value.decimals))).toString();b($e)}}else if(k.value){const $e=new M(z.amountIn).div(new M(Math.pow(10,j.value.decimals))).toString();$($e)}console.log(k.value,"###toCoinAmount.value");const Se=Q(pe(new M(d.value).div(new M(k.value).toString()),j.value.decimals));u(Se);const ke=Q(pe(new M(k.value).div(d.value).toString(),h.value.decimals));r(ke),a(!1),S(!1),i(!1)}else a(!1),S(!0),i(!1)}catch(R){console.log("pre swap error2",R),a(!1),i(!1),m(!1)}}else C.value?b(""):$(""),a(!1),i(!1);m(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1926 ~ getSuiAmount ~ isRouterProgress.value:",O.value)};return se(d,(p,y)=>{console.log("ðŸš€ ~ newVal123131:",p),p&&Number(p)!==0&&C.value&&(_(0),xe(q(),800)),p==""&&C.value&&b("")}),se(k,(p,y)=>{p&&Number(p)!==0&&!C.value&&(_(0),xe(q(),800)),p==""&&!C.value&&$("")}),se(()=>[j.value,h.value],([p,y])=>{!re(p)&&!re(y)&&(_(0),xe(q(C.value?d.value:k.value)))},{immediate:!0,deep:!0}),se(()=>[d.value,k.value,j.value,h.value,C.value,B.value],([p,y,F,E,R,V])=>{if(p&&y&&F&&E&&V)if(R){const J=new M(y).mul(new M(V/100));I(new M(y).sub(J).toString())}else{const J=new M(p).mul(new M(V/100));P(new M(p).add(J).toString())}},{immediate:!0}),{getSuiAmount:q}}function gt(){const e=de(),{getToken:t}=ko(),{getSuiAmount:v}=$o(),{setCountdown:s}=e,m=U(0),w=U([]),a=o(()=>e),u=o(()=>a.value.fixedFromCoin),r=o(()=>a.value.fromCoinAmount),i=o(()=>a.value.toCoinAmount),S=o(()=>a.value.fromCoin),g=o(()=>a.value.toCoin),l=o(()=>a.value.suiPreSwapData),$=Ce(),b=U(!1),_=fo(),I=o(()=>_),P=o(()=>$.isShowRouterModal),A=o(()=>I.value.isInitRouter);eo(()=>{window.addEventListener("updateSwapParams",d=>{b.value=!b.value})});const j=U(""),h=async d=>{var k,C,O,f,B,D;if(((k=d==null?void 0:d.routes)==null?void 0:k.length)===1)if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:462 ~ getOnlyOneRouteText ~ suiPreSwapData?.routes:",d==null?void 0:d.routes),((f=(O=(C=d==null?void 0:d.routes)==null?void 0:C[0])==null?void 0:O.path)==null?void 0:f.length)>1){const L=[S==null?void 0:S.value.symbol],q=(D=(B=d==null?void 0:d.routes)==null?void 0:B[0])==null?void 0:D.path;for(let p=0;p<q.length;p++){const y=q[p];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:467 ~ getOnlyOneRouteText ~ path[i]:",q[p]);const F=await t(y==null?void 0:y.target);L.push(F==null?void 0:F.symbol)}j.value=L==null?void 0:L.join(" > ")}else j.value=`${S==null?void 0:S.value.symbol} > ${g==null?void 0:g.value.symbol}`};return se(()=>l.value,async d=>{var k;if(d&&!re(d)){const C=[];(k=d==null?void 0:d.routes)==null||k.forEach(O=>{O==null||O.path.forEach(async f=>{C.push(f.provider)})}),w.value=Array.from(new Set(C)),m.value=w.value.length,h(d)}},{immediate:!0}),se(()=>b.value,d=>{(Number(r.value)>0||Number(i.value)>0)&&v(u.value?r.value:i.value)},{immediate:!0}),se(()=>A.value,d=>{d||(s(0),v(u.value?r.value:i.value))},{immediate:!0}),{onlyOneRouteText:j,sourcesArr:w,refreshSwapRouter:b,isShowRouterModal:P}}const Xe=e=>(ve("data-v-26ab6b7a"),e=e(),fe(),e),wt={class:"price-impact-tips"},St=Xe(()=>n("div",{class:"text"}," The difference between the market price and estimated price due to trade size. ",-1)),Ct={class:"market-price-rate"},kt=Xe(()=>n("div",null,"Market Price Rate",-1)),bt={key:0},_t={key:1,class:"price-unknown"},yt={key:0,class:"market-price-sources"},$t=Xe(()=>n("span",null,"Market price sources:",-1)),At=Xe(()=>n("svg",{class:"icon tips-icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_tips"})],-1)),It=le({__name:"swap-price-impact-tooltip",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},marketPriceSource:{type:Object,default:()=>({})},marketPriceA2B:{type:Object,default:()=>({})},marketPriceA2BReverse:{type:Object,default:()=>({})},impact:{type:String,defualt:"",requires:!0}},setup(e){return(t,v)=>{const s=Ke;return c(),K(s,{"overlay-class-name":"price-impact-tooltip","open(v-model)":!0},{title:ne(()=>[n("div",wt,[St,n("div",Ct,[kt,e.impact!=="Incalculable"?(c(),T("div",bt,[Y(ao,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.marketPriceA2B,"one-from-amount":e.marketPriceA2BReverse},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"])])):(c(),T("div",_t,"Price is unknown"))]),e.marketPriceSource&&e.marketPriceSource.length>0&&e.impact!=="Incalculable"?(c(),T("div",yt,[$t,(c(!0),T(De,null,qe(e.marketPriceSource,m=>(c(),T("span",{key:m==null?void 0:m.name},N(m==null?void 0:m.name),1))),128))])):W("",!0)])]),default:ne(()=>[At]),_:1})}}});const Tt=ce(It,[["__scopeId","data-v-26ab6b7a"]]);function Ao(){const e=Re(),t=o(()=>e),v=U([]),s=U(),m=U(),w=_=>{switch(_){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},a=de(),u=o(()=>a),r=o(()=>u.value.fromCoin),i=o(()=>u.value.toCoin),S=o(()=>u.value.fromCoin),g=o(()=>u.value.toCoin),l=o(()=>u.value.suiPreSwapData),$=o(()=>{var _,I,P,A,j,h,d,k,C,O,f,B,D,L;try{if((_=r==null?void 0:r.value)!=null&&_.address&&((I=i==null?void 0:i.value)!=null&&I.address)&&(l!=null&&l.value)&&!re(l==null?void 0:l.value)){const q=Te((P=l==null?void 0:l.value)==null?void 0:P.amountIn).div(Math.pow(10,(A=r.value)==null?void 0:A.decimals)),p=Te((j=l==null?void 0:l.value)==null?void 0:j.amountOut).div(Math.pow(10,(h=i.value)==null?void 0:h.decimals)),y=Te(p).div(q);console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",y==null?void 0:y.toString());const F=(C=(d=t==null?void 0:t.value)==null?void 0:d.RATES)==null?void 0:C[(k=r==null?void 0:r.value)==null?void 0:k.address];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",F);const E=(B=(O=t==null?void 0:t.value)==null?void 0:O.RATES)==null?void 0:B[(f=i==null?void 0:i.value)==null?void 0:f.address];if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",E),!(F!=null&&F.price)||!(E!=null&&E.price)||Te(F==null?void 0:F.price).lte(0)||Te(E==null?void 0:E.price).lte(0))throw Error("rate invalid");const R=Te(F==null?void 0:F.price).div(E==null?void 0:E.price);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",R==null?void 0:R.toString()),y.gt(R)){const V=y.minus(R).div(y).mul(100);return po((D=V==null?void 0:V.negated())==null?void 0:D.toString(),2)}else{const V=y.minus(R).div(y).mul(100);return po((L=V==null?void 0:V.abs())==null?void 0:L.toString(),2)}}return}catch(q){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",q),"Incalculable"}}),b=_=>{var h,d,k,C;const I=((h=_[r==null?void 0:r.value.address])==null?void 0:h.price)||0,P=((d=_[i==null?void 0:i.value.address])==null?void 0:d.price)||0,A=(k=_[r==null?void 0:r.value.address])==null?void 0:k.market,j=(C=_[i==null?void 0:i.value.address])==null?void 0:C.market;s.value=pe(new M(I).div(new M(P)).toString(),i==null?void 0:i.value.decimals),m.value=pe(new M(P).div(new M(I)).toString(),r==null?void 0:r.value.decimals),v.value=A==j?[w(A)]:[w(A),w(j)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",s.value,m.value,v.value)};return se(()=>[t.value.RATES,S.value,g.value,r.value,i.value],([_])=>{_&&!re(_)&&b(_)},{immediate:!0}),{getTokenMarketPrice:b,marketPriceSource:v,marketPriceA2B:s,marketPriceA2BReverse:m,suiPriceImpact:$}}const Rt=le({components:{PriceImpactTooltip:Tt},setup(){const{suiPriceImpact:e,marketPriceSource:t,marketPriceA2B:v,marketPriceA2BReverse:s}=Ao(),m=de(),w=o(()=>m),a=o(()=>w.value.fromCoin),u=o(()=>w.value.toCoin),r=o(()=>w.value.swapRouterLoading),i=o(()=>{var S;return Number(e.value)>0&&Number(e.value)<.01?"<0.01":Number(e.value)>100?">100":Number(e.value)>0?`-${e.value}`:`+${(S=e.value)==null?void 0:S.replace("-","")}`});return{marketPriceA2B:v,marketPriceA2BReverse:s,showImpact:i,impact:e,marketPriceSource:t,fromCoin:a,toCoin:u,swapRouterLoading:r}}});const Pt=e=>(ve("data-v-a9619c4b"),e=e(),fe(),e),Ft={class:"swap-show-info-impact"},Mt={class:"label"},Nt=Pt(()=>n("span",null,"Price Impact",-1)),Bt={key:0,class:"text impact-w"},Ot=["src"];function Lt(e,t,v,s,m,w){const a=ae("PriceImpactTooltip"),u=Ye;return c(),T("div",Ft,[n("div",Mt,[Nt,Y(a,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"market-price-source":e.marketPriceSource,"market-price-a2-b":e.marketPriceA2B,"market-price-a2-b-reverse":e.marketPriceA2BReverse,impact:e.impact},null,8,["from-coin","to-coin","market-price-source","market-price-a2-b","market-price-a2-b-reverse","impact"])]),!e.swapRouterLoading&&e.impact==="Incalculable"?(c(),T("div",Bt,N(e.impact),1)):e.swapRouterLoading?(c(),K(u,{key:2,paragraph:!1,active:""})):(c(),T("div",{key:1,class:we(["text",e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[me(N(e.showImpact)+"% ",1),(c(!0),T(De,null,qe(e.marketPriceSource,r=>(c(),T("img",{key:r,src:r==null?void 0:r.logo},null,8,Ot))),128))],2))])}const Io=ce(Rt,[["render",Lt],["__scopeId","data-v-a9619c4b"]]),Ut=le({components:{CurrentPrice:ao,RouterModal:Go,ShowInfoImpact:Io},setup(){const e=U(!1),{sourcesArr:t,onlyOneRouteText:v}=gt(),s=Ce(),m=o(()=>s),w=de(),a=o(()=>w),u=o(()=>a.value.fromCoin),r=o(()=>a.value.toCoin),i=o(()=>a.value.fromCoinAmount),S=o(()=>a.value.toCoinAmount),g=o(()=>a.value.oneToAmount),l=o(()=>a.value.oneFromAmount),$=o(()=>a.value.fixedFromCoin),b=o(()=>a.value.swapRouterLoading),_=o(()=>a.value.insufficientLiquidity),I=o(()=>a.value.suiPreSwapData),P=o(()=>m.value.isShowRouterModal),A=o(()=>a.value.minimumReceived),j=o(()=>a.value.maximumSold),h=o(()=>m.value.liquiditySourceObj);return{store:s,onlyOneRouteText:v,liquiditySourceObj:h,sourcesArr:t,minimumReceived:A,maximumSold:j,toCoinAmount:S,fromCoinAmount:i,suiPreSwapData:I,isShowRouterModal:P,indexStore:m,insufficientLiquidity:_,fixedFromCoin:$,isOpen:e,fromCoin:u,toCoin:r,oneToAmount:g,oneFromAmount:l,swapRouterLoading:b}}});const io=e=>(ve("data-v-65c993d3"),e=e(),fe(),e),Et={key:0,class:"show-info"},jt={class:"price-box"},Dt={class:"price"},qt=io(()=>n("use",{"xlink:href":"#icon-icon_on"},null,-1)),Wt=[qt],Vt={key:0,class:"impact"},zt={class:"trade-block"},Ht={class:"label"},Gt={key:0,class:"text"},Kt={key:0,class:"trade-block"},Yt=io(()=>n("div",{class:"label"},"Auto Router",-1)),Jt={key:0,class:"text text-box"},Xt=["src","alt"],Qt={key:1,class:"text text-box"},Zt=["src","alt"],xt=io(()=>n("svg",{class:"icon route-icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_expand"})],-1));function en(e,t,v,s,m,w){var S,g;const a=ae("CurrentPrice"),u=ae("ShowInfoImpact"),r=Ye,i=ae("RouterModal");return e.fromCoin&&e.toCoin&&e.fromCoinAmount&&e.toCoinAmount?(c(),T("div",Et,[n("div",jt,[n("div",Dt,[Y(a,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"]),(c(),T("svg",{"aria-hidden":"true",class:we(["dropdown-icon",{open:e.isOpen}]),onClick:t[0]||(t[0]=l=>e.isOpen=!e.isOpen)},Wt,2))]),e.isOpen?(c(),T("div",Vt,[Y(u)])):W("",!0)]),n("div",zt,[n("div",Ht,N(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(c(),K(r,{key:1,paragraph:!1,active:""})):(c(),T("div",Gt,N(e.fixedFromCoin?("addCommom"in e?e.addCommom:te(Q))(("sFixD"in e?e.sFixD:te(Ae))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:te(Q))(("sFixD"in e?e.sFixD:te(Ae))(e.maximumSold,e.fromCoin.decimals)))+" "+N(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),e.insufficientLiquidity?W("",!0):(c(),T("div",Kt,[Yt,e.swapRouterLoading?(c(),K(r,{key:1,paragraph:!1,active:""})):(c(),T("div",{key:0,class:"text text-bg",onClick:t[1]||(t[1]=Eo(l=>e.store.setIsShowRouterModal(!e.isShowRouterModal),["stop"]))},[!e.swapRouterLoading&&e.suiPreSwapData&&e.suiPreSwapData.routes&&e.suiPreSwapData.routes.length==1?(c(),T("div",Jt,[n("span",null,N(e.onlyOneRouteText),1),(c(!0),T(De,null,qe(e.sourcesArr,l=>{var $,b;return c(),T("img",{key:l,src:(b=($=e.liquiditySourceObj)==null?void 0:$[l])==null?void 0:b.logo,alt:l},null,8,Xt)}),128))])):e.swapRouterLoading?W("",!0):(c(),T("div",Qt,[me(N((g=(S=e.suiPreSwapData)==null?void 0:S.routes)==null?void 0:g.length)+" Streams ",1),(c(!0),T(De,null,qe(e.sourcesArr,l=>{var $,b;return c(),T("img",{key:l,src:(b=($=e.liquiditySourceObj)==null?void 0:$[l])==null?void 0:b.logo,alt:l},null,8,Zt)}),128))])),xt]))])),e.isShowRouterModal?(c(),K(i,{key:1,"sui-pre-swapdata":e.suiPreSwapData,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:t[2]||(t[2]=l=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):W("",!0)])):W("",!0)}const To=ce(Ut,[["render",en],["__scopeId","data-v-65c993d3"]]),on=le({components:{Modal:jo,CoinImg:no,CurrentPrice:ao,ShowInfoImpact:Io},props:{isShowAccept:{type:Boolean,default:!1}},setup(e,t){const v=Re(),s=o(()=>v),m=Ce(),w=o(()=>m),a=U(!1),u=o(()=>w.value.chainName),r=async()=>{t.emit("to-swap")},i=U(0),{suiPriceImpact:S}=Ao(),g=de(),l=o(()=>g),$=o(()=>w.value.slippage),b=o(()=>l.value.minimumReceived),_=o(()=>l.value.maximumSold),I=o(()=>l.value.fromCoin),P=o(()=>l.value.toCoin),A=o(()=>l.value.fromCoinAmount),j=o(()=>l.value.toCoinAmount),h=o(()=>l.value.oneFromAmount),d=o(()=>l.value.oneToAmount),k=o(()=>l.value.fixedFromCoin),C=o(()=>l.value.swapRouterLoading),O=U(""),f=o(()=>{var p,y,F,E,R,V,J,H;return(y=(p=s==null?void 0:s.value)==null?void 0:p.tokensObj[I==null?void 0:I.value.address])!=null&&y.pyth_id&&((E=(F=s==null?void 0:s.value)==null?void 0:F.tokensObj[I==null?void 0:I.value.address])==null?void 0:E.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(V=(R=s==null?void 0:s.value)==null?void 0:R.tokensObj[I==null?void 0:I.value.address])!=null&&V.coingecko_id?"coingecko":(H=(J=s==null?void 0:s.value)==null?void 0:J.tokensObj[I==null?void 0:I.value.address])!=null&&H.birdeyeid?"birdeye":null}),B=o(()=>{var p,y,F,E,R,V,J,H;return(y=(p=s==null?void 0:s.value)==null?void 0:p.tokensObj[P==null?void 0:P.value.address])!=null&&y.pyth_id&&((E=(F=s==null?void 0:s.value)==null?void 0:F.tokensObj[P==null?void 0:P.value.address])==null?void 0:E.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(V=(R=s==null?void 0:s.value)==null?void 0:R.tokensObj[P==null?void 0:P.value.address])!=null&&V.coingecko_id?"coingecko":(H=(J=s==null?void 0:s.value)==null?void 0:J.tokensObj[P==null?void 0:P.value.address])!=null&&H.birdeyeid?"birdeye":null}),D=async()=>{var F;const p=s.value.tokenExternalPriceObj[I==null?void 0:I.value.address],y=s.value.tokenExternalPriceObj[(F=P.value)==null?void 0:F.valaddress];if(p&&y){const E=new M(p).div(new M(y)),R=new M(d.value.replace(new RegExp(/,/g),"")).sub(E).div(E).mul(100);let V=Math.abs(Ae(R,2));E.toNumber()<Number(d.value.replace(new RegExp(/,/g),""))?O.value="":O.value=R>0&&R<=.01?"0.01":V}else O.value=""},L=p=>{if(p<5)return"color-s";if(p>=5&&p<10)return"color-w";if(p>=10)return"color-e"};se(()=>[d.value,s.value.tokenExternalPriceObj,u.value],([p,y,F])=>{p&&y&&!re(y)&&D()},{immediate:!0,deep:!0});const q=U(!1);return{impact:S,fromCoin:I,toCoin:P,fromCoinAmount:A,toCoinAmount:j,oneFromAmount:h,oneToAmount:d,slippage:$,fixedFromCoin:k,swapRouterLoading:C,addCommom:Q,sFixD:Ae,rateChange:a,chainName:u,clickNextBtn:r,pathLength:i,maximumSold:_,minimumReceived:b,decimalUi:pe,getTextColor:L,priceExangeRate:O,formCoinMarket:f,toCoinMarket:B,readWithin:q}}});const Pe=e=>(ve("data-v-ad16b751"),e=e(),fe(),e),tn=Pe(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),nn={class:"new-swap-contnet"},sn={class:"coin-info"},an={class:"from-coin-info"},rn={class:"left"},un={class:"coin-amount"},ln={class:"coin-symbol"},cn={class:"right"},dn={class:"to-coin-info"},mn={class:"left"},pn={class:"coin-amount"},vn={class:"coin-symbol"},fn={class:"right"},hn=Pe(()=>n("div",{class:"to-swap-logo"},null,-1)),gn={class:"coin-rate"},wn={key:0,class:"price-impact"},Sn=Pe(()=>n("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Cn=[Sn],kn=Pe(()=>n("br",null,null,-1)),bn={class:"bottom"},_n={class:"induction"},yn={class:"item"},$n={class:"induction-text"},An={class:"induction-value"},In={class:"item"},Tn={class:"induction-text"},Rn={class:"induction-value"},Pn={class:"item"},Fn={key:0,class:"within-desc"},Mn=Pe(()=>n("div",{class:"within-top"},[n("img",{src:Ko,alt:""}),n("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Nn={class:"within-bottom"},Bn={key:0,class:"price-updated"},On=Pe(()=>n("span",null,"Price updated",-1));function Ln(e,t,v,s,m,w){const a=ae("CoinImg"),u=ae("CurrentPrice"),r=ae("ShowInfoImpact"),i=oo,S=ae("Modal");return c(),K(S,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:t[4]||(t[4]=g=>e.$emit("on-close"))},{closeIcon:ne(()=>[tn]),default:ne(()=>{var g,l,$,b;return[n("div",nn,[n("div",sn,[n("div",an,[n("div",rn,[n("div",un,N(e.fromCoinAmount&&("addCommom"in e?e.addCommom:te(Q))(e.fromCoinAmount)),1),n("div",ln,N(e.fromCoin&&e.fromCoin.symbol),1)]),n("div",cn,[(g=e.fromCoin)!=null&&g.address?(c(),K(a,{key:0,url:(l=e.fromCoin)==null?void 0:l.logoURI,size:"28px"},null,8,["url"])):W("",!0)])]),n("div",dn,[n("div",mn,[n("div",pn,N(e.toCoinAmount&&("addCommom"in e?e.addCommom:te(Q))(e.toCoinAmount)),1),n("div",vn,N(e.toCoin&&e.toCoin.symbol),1)]),n("div",fn,[($=e.toCoin)!=null&&$.address?(c(),K(a,{key:0,url:(b=e.toCoin)==null?void 0:b.logoURI,size:"28px"},null,8,["url"])):W("",!0)]),hn]),n("div",gn,[Y(u,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"]),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(c(),T("div",wn,[(c(),T("svg",{class:we(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},Cn,2)),n("span",{class:we(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),n("span",{class:we(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[me("Price Impact Alert."),kn,me(" Be cautious before submitting your order.")],2)])):W("",!0)])]),n("div",bn,[n("div",_n,[n("div",yn,[n("div",$n,N(e.$t("modal.slippageTolerance")),1),n("div",An,N(e.slippage)+"%",1)]),n("div",In,[n("div",Tn,N(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),n("div",Rn,N(e.fixedFromCoin?("addCommom"in e?e.addCommom:te(Q))(("sFixD"in e?e.sFixD:te(Ae))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:te(Q))(("sFixD"in e?e.sFixD:te(Ae))(e.maximumSold,e.fromCoin.decimals)))+" "+N(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),n("div",Pn,[Y(r)])])]),e.priceExangeRate&&Number(e.priceExangeRate)>10?(c(),T("div",Fn,[Mn,n("div",Nn,[n("div",{class:we(["within-btn",e.readWithin?"within-btn-active":""]),onClick:t[0]||(t[0]=_=>e.readWithin=!0)}," Yes, please continue. ",2),n("div",{class:"within-btn",onClick:t[1]||(t[1]=_=>e.$emit("on-close"))},"No, cancel it.")])])):W("",!0)]),e.isShowAccept?(c(),T("div",Bn,[On,Y(i,{class:"accept-btn",loading:e.swapLoading,onClick:t[2]||(t[2]=_=>e.$emit("accept"))},{default:ne(()=>[me("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(c(),K(i,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:t[3]||(t[3]=_=>e.clickNextBtn())},{default:ne(()=>[me(N(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):W("",!0)]}),_:1},8,["title"])}const Ro=ce(on,[["render",Ln],["__scopeId","data-v-ad16b751"]]);function Un(){const e=de(),t=o(()=>e),v=Je(),s=o(()=>v),m=Re(),w=o(()=>m),a=o(()=>f.chainName),{getSuiAmount:u}=$o(),{setToCoinAmount:r,setFromCoinAmount:i}=e,{setCountdown:S,setRefresh:g}=e,l=U(20),$=U(null),b=o(()=>t.value.countdown),_=o(()=>t.value.refresh),I=o(()=>t.value.isRouterProgress),P=o(()=>ge&&ge[a.value]&&ge[a.value].hasRouter),A=o(()=>t.value.swapPoolInfo),j=o(()=>t.value.fixedFromCoin),h=o(()=>t.value.fromCoinAmount),d=o(()=>t.value.toCoinAmount),k=o(()=>t.value.isSwapConfirmModal),C=U(!1),O=o(()=>f.includeRoutes),f=Ce(),B=o(()=>f.liquiditySourceList),D=o(()=>a.value?ho(a.value):{}),L=R=>{R&&R.length>0?R.every(J=>J.name=="Cetus"?!0:J.status==="close")?e.setPlusChecked("close"):e.setPlusChecked("open"):e.setPlusChecked("close"),C.value=!1},q=R=>{e.setPlusChecked(e.plusChecked=="open"?"close":"open"),localStorage.setItem("plusChecked",e.plusChecked);const V=O.value,J=B.value;J.forEach(H=>{R?H.status="open":H.name!=="Cetus"?H.status="close":H.status="open"}),f.setAggregatorSetting(J,V)},p=()=>{const R=window.innerWidth,V=window.innerHeight,J=document.getElementById("plusModeSwitch"),H=J==null?void 0:J.getBoundingClientRect(),z=H==null?void 0:H.left,Se=H==null?void 0:H.top,ke=2,$e=Ee.shapeFromText({text:"ðŸŸ¢",scalar:ke}),We=Ee.shapeFromText({text:"ðŸ”µ",scalar:ke}),Qe=Ee.shapeFromText({text:"ðŸ’š",scalar:ke}),be=Ee.shapeFromText({text:"ðŸ’™",scalar:ke});Ee({particleCount:40,spread:60,shapes:[$e,We,Qe,be],scalar:ke,origin:{x:z/R,y:Se*1.2/V}})},y=R=>{i(""),r(""),R&&p(),q(R),setTimeout(()=>{u()},500)},F=()=>{var R,V,J;_.value||!A.value&&!P.value||(clearInterval($.value),S(0),g(!0),I.value||u(j.value?h.value:d.value),s.value.address&&D.value.getAccount(s.value.address),setTimeout(()=>{g(!1),E()},1e3),(!((R=w==null?void 0:w.value)!=null&&R.RATES)||re((V=w==null?void 0:w.value)==null?void 0:V.RATES))&&((J=w==null?void 0:w.value)==null||J.setRates("Sui")))},E=()=>{$.value=setInterval(()=>{if(g(!1),b.value<l.value){const R=b.value+1;S(R),b.value===l.value&&(k.value||F(),S(0),g(!0))}},1e3)};return{setMarketTimer:E,clickRefresh:F,marketTimer:$,autoRefreshTime:l,isShowAggregatorModal:C,clickChecked:q,modalConfirm:L,handleSwitchPlusMode:y}}const En=le({components:{AggregatorSettingModal:Yo},setup(){const e=Ce(),t=de(),v=o(()=>t),{isShowAggregatorModal:s,handleSwitchPlusMode:m,setMarketTimer:w,autoRefreshTime:a,clickRefresh:u,marketTimer:r}=Un(),i=o(()=>v.value.countdown),S=o(()=>v.value.refresh),g=o(()=>e.slippage);let l=U(!1);return eo(()=>{w()}),Do(()=>{clearInterval(r.value)}),{slippage:g,countdown:i,refresh:S,isShowAggregatorModal:s,handleSwitchPlusMode:m,suiSwapStore:t,clickRefresh:u,isShowSwapSetting:l,autoRefreshTime:a,marketTimer:r}}});const Fe=e=>(ve("data-v-1cdd8a36"),e=e(),fe(),e),jn={class:"plus-setting-container"},Dn={class:"plus-setting"},qn=Fe(()=>n("div",{class:"price-reference-text"}," The Plus Mode will aggregate external liquidity sources ",-1)),Wn={class:we("icon-bg plus-switch")},Vn=Fe(()=>n("p",null,[n("span",null,"Plus Mode")],-1)),zn={class:"sui-setting-box"},Hn=Fe(()=>n("div",{class:"new-style-tooltip-text"},"Swap Settings",-1)),Gn=Fe(()=>n("div",{class:"icon-bg"},[n("svg",{"aria-hidden":"true",class:"icon"},[n("use",{"xlink:href":"#icon-icon_set"})])],-1)),Kn=Fe(()=>n("div",{class:"new-style-tooltip-text"},"Slippage Settings",-1)),Yn={class:"icon-bg"},Jn=Fe(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),Xn={class:"icon-bg"};function Qn(e,t,v,s,m,w){const a=qo,u=Ke,r=xo,i=et,S=ae("AggregatorSettingModal");return c(),T("div",jn,[n("div",Dn,[Y(u,{"overlay-class-name":"price-impact-tooltip"},{title:ne(()=>[qn]),default:ne(()=>[n("div",Wn,[Vn,Y(a,{id:"plusModeSwitch",checked:e.suiSwapStore.plusChecked=="open",onClick:t[0]||(t[0]=g=>{e.handleSwitchPlusMode(g)})},null,8,["checked"])])]),_:1}),n("div",zn,[n("div",{class:"aggregator-setting",onClick:t[1]||(t[1]=g=>e.isShowAggregatorModal=!0)},[Y(u,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[Hn]),default:ne(()=>[Gn]),_:1})]),Y(u,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[Kn]),default:ne(()=>[n("div",{class:"slippage-icon",onClick:t[2]||(t[2]=g=>e.isShowSwapSetting=!0)},[n("div",Yn,[Jn,n("span",null,N(e.slippage)+"%",1)])])]),_:1}),n("div",Xn,[Y(r,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])])]),e.isShowSwapSetting?(c(),K(i,{key:0,onOnClose:t[3]||(t[3]=g=>e.isShowSwapSetting=!1)})):W("",!0),e.isShowAggregatorModal?(c(),K(S,{key:1,onClose:t[4]||(t[4]=g=>e.isShowAggregatorModal=!1),onModalConfirm:t[5]||(t[5]=g=>{e.modalConfirm(g)})})):W("",!0)])}const Zn=ce(En,[["render",Qn],["__scopeId","data-v-1cdd8a36"]]),xn=le({components:{TokenWarning:_o,CoinImg:no},props:{tokenInfo:{type:Object,default:null},hasArrow:{type:Boolean,default:!0},hasOpcity:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},setup(e,t){const{t:v,locale:s}=to(),m=o(()=>{var u,r;return((u=e.tokenInfo)==null?void 0:u.labels)&&((r=e.tokenInfo)==null?void 0:r.labels[0])||""}),w=o(()=>{var u;return(u=e.tokenInfo)==null?void 0:u.decimals});return{currentIcon:o(()=>{var u,r;return((u=e.tokenInfo)==null?void 0:u.logo_url)||((r=e.tokenInfo)==null?void 0:r.logoURI)||""}),coinLabels:m,t:v,coinDecimals:w}}});const es=e=>(ve("data-v-f4070956"),e=e(),fe(),e),os={key:0,class:"show-token"},ts={class:"name-labels"},ns={class:"name"},ss={key:0,class:"labels"},as={key:1,class:"loading-token"},is={key:2,class:"icon","aria-hidden":"true"},rs=es(()=>n("use",{"xlink:href":"#icon-icon_on"},null,-1)),us=[rs];function ls(e,t,v,s,m,w){var S,g,l;const a=ae("CoinImg"),u=_o,r=Wo,i=Ye;return c(),T("div",{class:we(["token-dropdown-select",[e.hasArrow?"":"nohands",e.hasOpcity&&!e.isLoading?"left-opcity":""].join(" ")]),onClick:t[0]||(t[0]=$=>e.hasArrow&&!e.isLoading?e.$emit("onSelect"):"")},[e.isLoading?(c(),T("div",as,[Y(r,{size:"small",paragraph:!1}),Y(i,{loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})])):(c(),T("div",os,[(S=e.tokenInfo)!=null&&S.address?(c(),K(a,{key:0,url:e.currentIcon,size:"28px"},null,8,["url"])):W("",!0),Y(u,{address:(g=e.tokenInfo)==null?void 0:g.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),n("div",ts,[n("p",ns,N(e.tokenInfo?(l=e.tokenInfo)==null?void 0:l.symbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(c(),T("p",ss,N(e.coinLabels),1)):W("",!0)])])),e.hasArrow?(c(),T("svg",is,us)):W("",!0)],2)}const cs=ce(xn,[["render",ls],["__scopeId","data-v-f4070956"]]);function vo(e){const t=[];let v=e.indexOf(",");for(;v!==-1;)t.push(v),v=e.indexOf(",",v+1);return t}const ds=le({components:{TokenDropdownSelect:cs},props:{titleText:{type:String,default:""},inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},tokenInfo:{type:Object,default:null},havemax:{type:Boolean,default:!0},havehalf:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},importPage:{type:String,default:""},isShowAmountPrice:{type:Boolean,default:!0},assetsLoading:{type:Boolean,default:!1},inputLoading:{type:Boolean,default:!1}},setup(e,t){const{t:v,locale:s}=to(),m=o(()=>{var h,d,k;return $.value.assets&&e.tokenInfo&&$.value.assets[(h=e.tokenInfo)==null?void 0:h.address]?wo($.value.assets[(d=e.tokenInfo)==null?void 0:d.address].balance,(k=e.tokenInfo)==null?void 0:k.decimals):0}),w=o(()=>new M(Number(m.value)).div(2)),a=U(""),u=()=>{var h;if(m.value){const d=Number(m.value)>0?((h=e.tokenInfo)==null?void 0:h.symbol)=="SUI"?new M(Number(m.value)).sub(new M(.05)).lt(new M(0))?"0":new M(Number(m.value)).sub(new M(.05)).toString():String(m.value):"";a.value=d,i(d)}},r=()=>{var h;if(m.value){const d=Number(m.value)>0?Ae(new M(Number(m.value)).div(2).toString(),(h=e.tokenInfo)==null?void 0:h.decimals).toString():"";a.value=d,i(d)}},i=nt(h=>{t.emit("onInput",h),t.emit("onInputLoading",!1)},500),S=h=>{const d=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(A==null?void 0:A.value)&&(A==null?void 0:A.value)}})?).*$`),k=h.target.value.replace(/,/g,"").replace(d,"$1");k>0&&t.emit("onInputLoading",!0),i(k)},g=h=>{var q;const d=h.target.selectionStart,k=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(A==null?void 0:A.value)&&(A==null?void 0:A.value)}})?).*$`);console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.target.value:",h.target.value);let C=h.target.value.replace(/,/g,"").replace(k,"$1");console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ value:",C),console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.inputType:",h.inputType);let O=C.includes(".")&&String(Q(C))==="0"?C:String(Q(C));const f=vo(h.target.value),B=vo(O),D=B.length-f.length;let L=d+D;if((q=h==null?void 0:h.inputType)!=null&&q.includes("delete")&&D>0&&d===B[B.length-1]){const p=h.target.value.slice(0,d-1)+h.target.value.slice(d);O=String(Q(p.replace(/,/g,""))),L=L-2}console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ fValue:",O),a.value=O||"",setTimeout(()=>{try{h.target.setSelectionRange(L<0?0:L,L<0?0:L)}catch(p){console.log("ðŸš€ ~ file: assets-card.vue:307 ~ setTimeout ~ error:",p)}},0)};se(()=>e.inputValue,h=>{const d=String(Q(h));d!==a.value&&(a.value=d)},{immediate:!0});const l=Je(),$=o(()=>l),b=Re(),_=o(()=>b);let I={};se(()=>_.value.RATES,h=>{h&&(I=h)},{immediate:!0});const P=o(()=>{var k,C;const h=I&&I[(k=e.tokenInfo)==null?void 0:k.address]&&I[(C=e.tokenInfo)==null?void 0:C.address].price||0,d=new M(e.inputValue||0).mul(h).toNumber();return h<=0?0:d>0&&d<.01?"<$0.01":je(d,2)}),A=o(()=>{var h;return(h=e.tokenInfo)==null?void 0:h.decimals}),j=o(()=>_.value.isTokenLoading);return{balance:m,isTokenLoading:j,halfBalance:w,t:v,addCommom:Q,wallet:$,inputChange:S,amountPirce:P,coinDecimals:A,formatNumber:go,formattedValue:a,handleInput:g,maxBtnSelect:u,halfBtnSelect:r}}});const ms=e=>(ve("data-v-d0260a6b"),e=e(),fe(),e),ps={class:"token-input-block"},vs={class:"title"},fs={class:"card-top"},hs={class:"card-bottom"},gs={class:"left"},ws={key:0,class:"amount-price"},Ss={key:1},Cs={class:"right"},ks={class:"balance"},bs=ms(()=>n("svg",{class:"icon icon-down","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_wallet"})],-1)),_s={key:1};function ys(e,t,v,s,m,w){var S,g;const a=Vo,u=Ye,r=ae("TokenDropdownSelect"),i=oo;return c(),T("div",ps,[n("div",vs,N(e.titleText),1),n("div",fs,[e.inputLoading?(c(),K(u,{key:1,class:"input-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):(c(),K(a,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.formattedValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:e.handleInput,onFocus:t[0]||(t[0]=l=>e.$emit("onFocus"))},null,8,["value","disabled","onChange","onInput"])),Y(r,{"token-info":e.tokenInfo,"has-opcity":!0,"is-loading":e.isTokenLoading,onOnSelect:t[1]||(t[1]=l=>e.$emit("onSelect"))},null,8,["token-info","is-loading"])]),n("div",hs,[n("div",gs,[e.inputValue&&e.amountPirce!="--"&&(Number(e.amountPirce)>0||e.amountPirce=="<$0.01")&&e.isShowAmountPrice&&!e.inputLoading?(c(),T("div",ws,N(e.amountPirce!=="<$0.01"?`$${("formatNumber"in e?e.formatNumber:te(go))(e.amountPirce)}`:`${e.amountPirce}`),1)):(c(),T("div",Ss,[e.inputLoading?(c(),K(u,{key:0,class:"rate-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):W("",!0)]))]),n("div",Cs,[n("span",ks,[bs,e.assetsLoading?(c(),K(u,{key:0,class:"token-loading-skeleton",loading:!0,active:"",paragraph:!1})):(c(),T("span",_s,N(e.wallet.connected?("addCommom"in e?e.addCommom:te(Q))(e.balance,e.coinDecimals):"0"),1))]),e.havehalf&&e.wallet.connected?(c(),K(i,{key:0,disabled:!((S=e.tokenInfo)!=null&&S.name)||("addCommom"in e?e.addCommom:te(Q))(e.halfBalance,e.coinDecimals)==0,class:"max-btn half-btn",onClick:t[2]||(t[2]=l=>e.halfBtnSelect())},{default:ne(()=>[me("HALF")]),_:1},8,["disabled"])):W("",!0),e.havemax&&e.wallet.connected?(c(),K(i,{key:1,disabled:!((g=e.tokenInfo)!=null&&g.name)||("addCommom"in e?e.addCommom:te(Q))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:t[3]||(t[3]=l=>e.maxBtnSelect())},{default:ne(()=>[me("MAX")]),_:1},8,["disabled"])):W("",!0)])])])}const $s=ce(ds,[["render",ys],["__scopeId","data-v-d0260a6b"]]),As=le({components:{TokenInputBlock:$s},setup(){const e=U(!0),t=U(!1),v=de(),s=o(()=>v),m=Ce();o(()=>m);const{setFromCoin:w,setToCoin:a,setFixedFromCoin:u,setFromCoinAmount:r,setToCoinAmount:i}=s.value,S=U("fromCoin"),g=U(""),l=U(""),$=U(!1),b=o(()=>s.value.fromCoin),_=o(()=>s.value.toCoin),I=o(()=>s.value.fromCoinAmount),P=o(()=>s.value.toCoinAmount),A=o(()=>s.value.fixedFromCoin),j=o(()=>s.value.swapRouterLoading),h=o(()=>s.value.plusChecked);let d=U(!1);function k(){const p=b.value;w(_.value),a(p),d.value=!0,h.value=="open"?u(!0):u(!A.value),A.value?(r(P.value),i("")):(i(I.value),r("")),setTimeout(()=>{d.value=!1},300)}const C=p=>{var y,F,E,R;S.value=p,p==="fromCoin"?(g.value=((y=_.value)==null?void 0:y.address)||"",l.value=((F=b.value)==null?void 0:F.address)||""):(g.value=((E=b.value)==null?void 0:E.address)||"",l.value=((R=_.value)==null?void 0:R.address)||""),$.value=!0},O=U({}),f=U({}),B=p=>{S.value==="fromCoin"?(O.value=p,q(p)):(f.value=p,q(p))},D=U(!1),L=()=>{f.value={},O.value={},D.value=!1},q=p=>{const y=m.importTokenListObj;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(y!=null&&y.hasOwnProperty(p==null?void 0:p.address))),p!=null&&p.isSelfBuilt&&!(y!=null&&y.hasOwnProperty(p==null?void 0:p.address)))D.value=!0;else{if(S.value==="fromCoin"){_.value&&p.address.toLowerCase()===(_==null?void 0:_.value.address.toLowerCase())&&a(null),w(p);const F=Number(I.value)>0?pe(I.value,p==null?void 0:p.decimals):"";r(F)}else{b.value&&p.address.toLowerCase()===(b==null?void 0:b.value.address.toLowerCase())&&w(null),a(p);const F=Number(P.value)>0?pe(P.value,p==null?void 0:p.decimals):"";i(F)}L()}};return{fixedFromCoin:A,swapRouterLoading:j,onCoinSelect:B,existingCoins:g,lastSelectCoin:l,currentCoinKey:S,showCoinSelect:$,openCoinSelect:C,warningToCoin:f,warningFromCoin:O,isAddCardTopPadding:e,isAddCardBottomPadding:t,suiSwapStore:v,clickExchange:k,closeTokenWarning:L,isShowTokenWarning:D,getTokenSource:q,change:d,fromCoin:b,toCoin:_,fromCoinAmount:I,toCoinAmount:P}}});const Po=e=>(ve("data-v-ce82e847"),e=e(),fe(),e),Is={class:"input-block-container"},Ts=Po(()=>n("svg",{class:"icon icon-down","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_swap1"})],-1)),Rs=Po(()=>n("svg",{class:"icon icon-swap","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-tx_swap1"})],-1)),Ps=[Ts,Rs];function Fs(e,t,v,s,m,w){const a=ae("TokenInputBlock"),u=ot,r=tt;return c(),T("div",Is,[n("div",{class:we(["asset-card-box",[e.suiSwapStore.plusChecked=="open"?"toInputBlockDisabled input-block-add-top":"",e.isAddCardTopPadding?"input-block-add-top":"",e.isAddCardBottomPadding&&e.suiSwapStore.plusChecked!=="open"?"input-block-add-bottom":""]])},[Y(a,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[0]||(t[0]=i=>e.fromCoinAmount=i),"title-text":"You pay","input-value":e.fromCoinAmount,"token-info":e.fromCoin||null,"input-loading":!e.fixedFromCoin&&e.swapRouterLoading,onOnInput:t[1]||(t[1]=i=>{e.suiSwapStore.setFromCoinAmount(i),e.suiSwapStore.setFixedFromCoin(!0)}),onOnFocus:t[2]||(t[2]=()=>{e.suiSwapStore.setFixedFromCoin(!0),e.isAddCardTopPadding=!0,e.isAddCardBottomPadding=!1}),onOnSelect:t[3]||(t[3]=i=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","token-info","input-loading"]),Y(a,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=i=>e.toCoinAmount=i),"title-text":"You receive","input-value":e.toCoinAmount,"token-info":e.toCoin||null,"input-disabled":e.suiSwapStore.plusChecked=="open",havemax:!1,havehalf:!1,"input-loading":!e.fixedFromCoin&&e.swapRouterLoading,onOnInput:t[5]||(t[5]=i=>{e.suiSwapStore.setToCoinAmount(i),e.suiSwapStore.setFixedFromCoin(!1)}),onOnFocus:t[6]||(t[6]=()=>{e.suiSwapStore.setFixedFromCoin(!1),e.isAddCardTopPadding=!1,e.isAddCardBottomPadding=!0}),onOnSelect:t[7]||(t[7]=i=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","token-info","input-disabled","input-loading"]),n("div",{class:"exchange",onClick:t[8]||(t[8]=(...i)=>e.clickExchange&&e.clickExchange(...i))},Ps)],2),e.showCoinSelect?(c(),K(u,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:t[9]||(t[9]=i=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):W("",!0),e.isShowTokenWarning?(c(),K(r,{key:1,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):W("",!0)])}const Ms=ce(As,[["render",Fs],["__scopeId","data-v-ce82e847"]]);function Ns(){const e=de(),t=o(()=>e),v=o(()=>t.value.fromCoin),s=o(()=>t.value.toCoin),{allTokensObj:m}=so(),w=o(()=>v.value.logoURI),a=o(()=>s.value.logoURI),u=o(()=>v.value&&v.value.address||null),r=o(()=>s.value&&s.value.address||null),i=o(()=>{var g,l,$,b,_,I,P,A;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1222 ~ formCoinMarket ~ allTokensObj:",m),(l=m[(g=v==null?void 0:v.value)==null?void 0:g.address])!=null&&l.pyth_id&&((b=m[($=v==null?void 0:v.value)==null?void 0:$.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(I=m[(_=v==null?void 0:v.value)==null?void 0:_.address])!=null&&I.coingecko_id?"coingecko":(A=m[(P=v==null?void 0:v.value)==null?void 0:P.address])!=null&&A.birdeyeid?"birdeye":null}),S=o(()=>{var g,l,$,b,_,I,P,A;return(l=m[(g=s==null?void 0:s.value)==null?void 0:g.address])!=null&&l.pyth_id&&((b=m[($=s==null?void 0:s.value)==null?void 0:$.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(I=m[(_=s==null?void 0:s.value)==null?void 0:_.address])!=null&&I.coingecko_id?"coingecko":(A=m[(P=s==null?void 0:s.value)==null?void 0:P.address])!=null&&A.birdeyeid?"birdeye":null});return{formCoinId:u,toCoinId:r,formCoinMarket:i,toCoinMarket:S,fromCoinUrl:w,toCoinUrl:a}}const Bs=le({components:{CoinSingle:st},props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e){const t=o(()=>r.value.currentExplorer),{$echarts:v}=zo(),s=fo();let m=null,w;const a=U(!0),u=Ce(),r=o(()=>u),i=o(()=>r.value.chainName),S=o(()=>ge[i.value]),g=Re();o(()=>g);const{allTokensObj:l}=so(),$=(k,C,O)=>{w={xAxis:{type:"category",boundaryGap:!1,show:!1,data:C},yAxis:{type:"value",show:!1,min:function(f){return f.min-f.min*.1},max:function(f){return f.max+f.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:r.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(f){return`<div class="chart-tip">
              <div>${f&&f[0]&&f[0].name}</div>
              <div>$${pe(f&&f[0]&&f[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:r.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:r.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:k,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:r.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},w&&m.clear(),w&&m.setOption(w,!0),m.resize(),a.value=!1},b=U(""),_=U(""),I=async k=>{var q,p,y;const C=[],O=[],{price:f,daily_rate:B}=await Jo(k,e.market);g.setTokenExternalPrice(e.coin.address,(q=f[f.length-1])==null?void 0:q.price),b.value=B;const D=f&&f.length>=1&&f[f.length-1].price;_.value=D,s.setCurrentCoinPairRate({[k]:D}),i.value==="Aptos"?f.forEach(F=>{C.push(F.price);const E=He(Number(F.timestamp),"MD"),R=He(Number(F.timestamp),"HM");O.push(E+" "+R)}):f.forEach(F=>{C.push(F.price);const E=He(new M(F.timestamp).mul(1e3).toNumber(),"MD"),R=He(new M(F.timestamp).mul(1e3).toNumber(),"HM");O.push(E+" "+R)});let L=document.getElementById(`main${(p=e.coin)==null?void 0:p.name}`);m=v.init(L),v.use([at]),$(C,O,(y=e.coin)==null?void 0:y.name)};se(()=>e.id,(k,C)=>{k&&(b.value="",_.value="",setTimeout(()=>{I(k)},1e3))},{immediate:!0});const P=U(""),A=U(""),j=U(""),h=U("");se(()=>[l,e.coin],([k,C])=>{var O,f;k&&C&&k[C.address]&&(A.value=((O=k[C.address])==null?void 0:O.labels)&&((f=k[C.address])==null?void 0:f.labels[0]),P.value=k[C.address].name,j.value=k[C.address].symbol,h.value=k[C.address].address)},{immediate:!0,deep:!0}),se(()=>e.refresh,k=>{k&&I(e.id)});const d=o(()=>r.value.theme);return{currentExplorer:t,getExplorerUrl:So,theme:d,store:u,fixD:je,config:S,price_rate_24h:b,nowPrice:_,coinName:P,coinLabels:A,coinSymbol:j,address:h,decimalUi:pe,addCommom:Q}}});const Fo=e=>(ve("data-v-ef936e22"),e=e(),fe(),e),Os={class:"price-token-chart"},Ls={class:"top"},Us={class:"right"},Es={class:"price-info"},js={key:0,src:Xo,alt:""},Ds={key:1,src:Qo,alt:""},qs={key:2,src:Zo,alt:""},Ws={class:"bottom"},Vs={class:"left"},zs={class:"address"},Hs={key:0,class:"pc-address"},Gs={key:1,class:"pc-address"},Ks={class:"h5-address"},Ys=Fo(()=>n("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),Js=[Ys],Xs=["href"],Qs=Fo(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_link"})],-1)),Zs=[Qs],xs={class:"right"},ea=["id"];function oa(e,t,v,s,m,w){var r;const a=ae("CoinSingle"),u=Ke;return c(),T("div",Os,[n("div",Ls,[Y(a,{"token-info":e.coin},null,8,["token-info"]),n("div",Us,[Y(u,{placement:"top","arrow-point-at-center":""},{title:ne(()=>[me(N(e.market==="pyth"?"Data source: Pyth Network":e.market==="coingecko"?"Data source: CoinGecko":"Data source: Birdeye"),1)]),default:ne(()=>[n("div",Es,[e.market==="pyth"?(c(),T("img",js)):e.market==="coingecko"?(c(),T("img",Ds)):e.market==="birdeye"?(c(),T("img",qs)):W("",!0),n("span",null,"$"+N(e.nowPrice?Number(e.nowPrice)<1?("decimalUi"in e?e.decimalUi:te(pe))(e.nowPrice,4):("addCommom"in e?e.addCommom:te(Q))(("fixD"in e?e.fixD:te(je))(e.nowPrice,2)):"--"),1),e.price_rate_24h?(c(),T("i",{key:3,class:we(e.price_rate_24h>0?"up":e.price_rate_24h<0?"down":"up")},N(e.price_rate_24h<0?+`${("fixD"in e?e.fixD:te(je))(e.price_rate_24h,2)}`:`+ ${("fixD"in e?e.fixD:te(je))(e.price_rate_24h,2)}`)+"%",3)):W("",!0)])]),_:1})])]),n("div",Ws,[n("div",Vs,[n("div",zs,[e.coin&&e.address!=="0x2::sui::SUI"?(c(),T("span",Hs,N(e.coin&&e.coin.address.substr(0,8))+" ... "+N(e.coin&&e.coin.address.substr(e.coin.address.length-8,8)),1)):(c(),T("span",Gs,N(e.coin&&e.coin.address),1)),n("span",Ks,N(e.coin&&e.coin.address.substr(0,4))+" ... "+N(e.coin&&e.coin.address.substr(e.coin.address.length-4,4)),1),(c(),T("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=i=>e.store.copy(e.coin&&e.coin.address))},Js)),n("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:te(So))(e.currentExplorer,"coin",e.coin&&e.coin.address),target:"_blank"},Zs,8,Xs)])]),n("div",xs,[n("div",{id:`main${(r=e.coin)==null?void 0:r.name}`,class:"main"},null,8,ea)])])])}const ta=ce(Bs,[["render",oa],["__scopeId","data-v-ef936e22"]]),na=le({components:{PriceTokenChart:ta},setup(){const{formCoinId:e,toCoinId:t,formCoinMarket:v,toCoinMarket:s,fromCoinUrl:m,toCoinUrl:w}=Ns(),a=de(),u=o(()=>a),r=o(()=>u.value.fromCoin),i=o(()=>u.value.toCoin);return{refresh:o(()=>u.value.refresh),fromCoin:r,toCoin:i,formCoinId:e,toCoinId:t,formCoinMarket:v,toCoinMarket:s,fromCoinUrl:m,toCoinUrl:w}}});const ro=e=>(ve("data-v-e3fbe02e"),e=e(),fe(),e),sa={class:"price-reference-container"},aa={class:"info-title"},ia=ro(()=>n("span",{class:"coingecko"},"Price Reference",-1)),ra=ro(()=>n("div",{class:"price-reference-text"}," The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ",-1)),ua=ro(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_tips"})],-1));function la(e,t,v,s,m,w){const a=Ke,u=ae("PriceTokenChart");return c(),T("div",sa,[n("div",aa,[ia,Y(a,{"overlay-class-name":"price-impact-tooltip",placement:"top","arrow-point-at-center":""},{title:ne(()=>[ra]),default:ne(()=>[ua]),_:1})]),e.fromCoin&&e.formCoinMarket?(c(),K(u,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):W("",!0),e.toCoin&&e.toCoinMarket?(c(),K(u,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):W("",!0)])}const ca=ce(na,[["render",la],["__scopeId","data-v-e3fbe02e"]]),da=le({props:{tabList:{type:Object,default:()=>null},currentTab:{type:String,default:()=>""},numValue:{type:Number,default:()=>null}},setup(){return{}}});const ma={class:"underline-tab"},pa=["onClick"],va={key:0,src:it,class:"beta",alt:""},fa={key:1,class:"text"};function ha(e,t,v,s,m,w){return c(),T("div",ma,[(c(!0),T(De,null,qe(e.tabList,a=>(c(),T("div",{key:a.link,class:we(e.currentTab==a.value?"tab-active tab":"tab"),onClick:u=>e.$emit("clickTab",a)},[me(N(a.label)+" ",1),a!=null&&a.isHaveBeta?(c(),T("img",va)):W("",!0),a!=null&&a.numValue?(c(),T("div",fa,N(a==null?void 0:a.numValue),1)):W("",!0)],10,pa))),128))])}const ga=ce(da,[["render",ha],["__scopeId","data-v-ca79569c"]]);function wa(){const{getToken:e,getTokenList:t}=ko(),v=Co(),{t:s,locale:m}=to(),w=Ce(),a=o(()=>bo()),{allTokensObj:u}=so(),r=de(),i=o(()=>(console.log(r,"#suiSwapStore"),r)),{setIsSwapping:S,setIsSwapConfirmModal:g,setFromCoinAmount:l,setToCoinAmount:$,setOneFromAmount:b,setOneToAmount:_,setInsufficientLiquidity:I,setRouterPool:P,setSuiPreSwapData:A,setCountdown:j,setFromCoin:h,setToCoin:d,setFixedFromCoin:k,setRouterSwap:C,setSwapPoolInfo:O}=r;eo(()=>{t()});const f=o(()=>i.value.fromCoin),B=o(()=>i.value.toCoin),D=o(()=>i.value.fromCoinAmount),L=o(()=>i.value.toCoinAmount),q=o(()=>i.value.fixedFromCoin),p=o(()=>i.value.isSwapping),y=o(()=>i.value.swapPoolInfo),F=o(()=>i.value.swapRouterLoading),E=o(()=>i.value.notFoundRouter),R=o(()=>i.value.insufficientLiquidity),V=o(()=>i.value.isSwapConfirmModal),J=o(()=>i.value.suiPreSwapData),H=o(()=>w.chainName),z=o(()=>w.slippage),Se=o(()=>ge&&ge[H.value]&&ge[H.value].hasRouter),ke=o(()=>$e.getPoolInfoSuccess),$e=Re(),We=o(()=>$e),Qe=Je(),be=o(()=>Qe),Me=o(()=>H.value?ho(H.value):{}),uo=o(()=>be.value.assets&&f.value&&be.value.assets[f.value.address]?wo(be.value.assets[f.value.address].balance,f.value.decimals):0),Ze=o(()=>{var G;return be.value.connected?y.value&&((G=y.value)!=null&&G.is_pause)?"Pool Closed":!f.value||!B.value?s("modal.selectTokenModalTitle"):!Number(D.value)&&!Number(L.value)?s("button.enterAmount"):!Se.value&&!y.value&&ke.value?"Pool Not Found":Se.value&&E.value?"No Available Route":R.value?s("button.insufficientLiquidity"):Number(D.value)>Number(uo.value)?s("button.insufficientBalance",{name:f.value.symbol}):s("button.swap"):s("button.connectWallet")}),Mo=o(()=>{var G;return be.value.connected?!!(p.value||!f.value||!B.value||!Number(D.value)||!Number(L.value)||Number(D.value)>Number(uo.value)||Ze.value==s("button.poolNotFound")||Ze.value!==s("button.swap")||(G=y==null?void 0:y.value)!=null&&G.is_pause||F.value):!1});se(()=>u,async G=>{if(G&&!re(G)){const X=v?v.currentRoute.value.query.to:"",Z=v?v.currentRoute.value.query.from:"";if(console.log(Z,re(f.value),"!routerCoinFrom && checkNullObj(fromCoin)"),Z&&Z!=="undefined"){console.log("ðŸš€ ~ routerCoinFrom:",Z);const ie=await e(Z);h(ie)}else if(!Z&&re(f.value)){const ie=ge[H.value].swapDefaultPair.fromCoin,x=await e(ie);console.log(x,ie,"#coin"),h(x)}if(X&&X!=="undefined"){const ie=await e(X);d(ie)}else if(!X&&re(B.value)){const ie=ge[H.value].swapDefaultPair.toCoin,x=await e(ie);d(x)}!Z&&X&&h("")}},{immediate:!0}),se(()=>[f.value,B.value,We.value.poolConfigList],([G,X,Z])=>{var ie;if(!re(G)&&!re(X)){console.log("ðŸš€ ~ fromCoin:",X,G);let x=null;const oe={};Object.values(We.value.poolConfigList).forEach(ee=>{var ue,_e,ze,Oe,Le,ye,Ie,Ue;(ee.coinA.address.toUpperCase()===((_e=(ue=G.value)==null?void 0:ue.address)==null?void 0:_e.toUpperCase())&&ee.coinB.address.toUpperCase()===((Oe=(ze=X.value)==null?void 0:ze.address)==null?void 0:Oe.toUpperCase())||ee.coinB.address.toUpperCase()===((ye=(Le=G.value)==null?void 0:Le.address)==null?void 0:ye.toUpperCase())&&ee.coinA.address.toUpperCase()===((Ue=(Ie=X.value)==null?void 0:Ie.address)==null?void 0:Ue.toUpperCase()))&&(oe[ee.address]={...ee})});const he=Object.values(oe).sort((ee,ue)=>ee.fee-ue.fee);for(let ee=0;ee<he.length;ee++)if(!((ie=he[ee])!=null&&ie.is_pause)){x=he[ee];break}x&&!re(x)&&(console.log("ðŸš€ ~ info:",x),O(x)),O(null)}if(O(null),Z&&Z.length>0&&G&&X){const x=[];Z.forEach(oe=>{var he,ee,ue,_e;(oe.coinA.address.toUpperCase()===((he=G.address)==null?void 0:he.toUpperCase())&&oe.coinB.address.toUpperCase()===((ee=X.address)==null?void 0:ee.toUpperCase())||oe.coinB.address.toUpperCase()===((ue=G.address)==null?void 0:ue.toUpperCase())&&oe.coinA.address.toUpperCase()===((_e=X.address)==null?void 0:_e.toUpperCase()))&&(oe!=null&&oe.is_pause||x.push(oe.address))}),C(x)}},{immediate:!0}),se(q,Ho((G,X)=>{k(G)},500),{immediate:!0}),se(()=>[f.value,B.value],([G,X])=>{if(!re(G)||!re(X)){const Z=`/swap?from=${G==null?void 0:G.address}&to=${X==null?void 0:X.address}`;v.push(Z)}},{immediate:!0,deep:!0});const Ne=U(!1),lo=async G=>{var X;try{let Z;if(q.value){const oe=new M(D.value).mul(Math.pow(10,f.value.decimals)).toString();Z=new Ge(oe)}else{const oe=new M(L.value).mul(Math.pow(10,B.value.decimals)).toString();Z=new Ge(oe)}const ie=Number(z.value)/100,x=await((X=a==null?void 0:a.value)==null?void 0:X.getFindRouter(f,B,Z.toString(),q.value,ie,""));if(x){A(x),P(x.routes),I(!1);const oe=Q(pe(new M(D.value).div(new M(L.value).toString()),f.value.decimals));b(oe);const he=Q(pe(new M(L.value).div(D.value).toString(),B.value.decimals));_(he);const ee=new M(x.amountOut).div(new M(Math.pow(10,B.value.decimals))).toString(),ue=new M(x.amountIn).div(new M(Math.pow(10,f.value.decimals))).toString();q.value?L.value!==ee&&(Ne.value=!0,$(ee)):D.value!==ue&&(Ne.value=!0,l(ue))}}catch(Z){console.log("pre swap error3",Z)}},Be=U(null);se(()=>V.value,G=>{G?Be.value=setInterval(()=>{lo(q.value)},3e3):(clearInterval(Be.value),window.clearInterval(Be.value))},{immediate:!0});const No=()=>{Ne.value=!1},Bo=()=>{g(!1),Ne.value=!1},{setIsShowSuccess:Oo,setIsShowRejected:co,setIsShowWaiting:Ve,setTransactionDesc:Lo,setTransactionTxid:mo}=w;return{isShowAccept:Ne,toSwap:async()=>{var G,X,Z,ie,x,oe,he,ee,ue;g(!1),S(!0),clearInterval(Be),window.clearInterval(Be),mo(""),Lo(s("tips.swapping",{from:`${Q(D.value)} ${(G=f.value)==null?void 0:G.symbol}`,to:`${Q(L.value)} ${(X=B.value)==null?void 0:X.symbol}`})),Ve(!0);try{const _e=q.value,ze=Number(z.value)/100,Oe=await((Z=a==null?void 0:a.value)==null?void 0:Z.getRouterSwapPayload(J.value,_e,ze,f,B));console.log("0221####swap###swapPayload###",Oe);const Le=await Me.value.signAndExecuteTransactionBlock(be.value.currentWallet,Oe);console.log("0221###sui swap res###",Le);const ye=Me.value.handleTx(Le);if(console.log("0221###swap###sui##tx###",ye),ye&&ye.hash){mo(ye.hash),Ve(!1),Oo(!0);const Ie={title:s("tips.swap"),desc:s("tips.swapSuccessText",{from:`${Q(D.value)} ${(ie=f.value)==null?void 0:ie.symbol}`,to:`${Q(L.value)} ${(x=B.value)==null?void 0:x.symbol}`}),hash:ye.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:f.value.address==ge[H.value].currentChainTokenAddress||B.value.address==ge[H.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(oe=f.value)==null?void 0:oe.address}`,numa:`- ${D.value}`,logoa:u&&f.value&&f.value.address&&u[f.value.address]&&u[f.value.address].logoURI,tokenb:`${(he=B.value)==null?void 0:he.address}`,numb:`+ ${L.value}`,logob:u&&B.value&&B.value.address&&u[B.value.address]&&u[B.value.address].logoURI},text:`Pay ${D.value} ${(ee=f.value)==null?void 0:ee.symbol} to receive ${L.value} ${(ue=B.value)==null?void 0:ue.symbol}`};Ie.res=ye.res,Me.value.showTransitionPending(Ie);const Ue=await Me.value.watchTransaction(Ie);console.log("0221###swap###transitionStatus####",Ue),Ue&&setTimeout(()=>{Me.value.getAccount(be.value.address)},1e3)}else Ve(!1),co(!0);l(""),$(""),S(!1)}catch(_e){l(""),$(""),S(!1),console.log("Swap Error###",_e),Ve(!1),co(!0)}},updateAccept:No,getSuiAmountAccept:lo,closeSwapConfirmModal:Bo,slippage:z,swapBtnText:Ze,isSwapBtnDisabled:Mo}}const Sa=le({components:{SwapShowInfo:To,UnderlineTab:ga,PlusSetting:Zn,TokenInputBox:Ms,PriceReference:ca,SwapSuiConfirm:Ro},setup(){const{closeSwapConfirmModal:e,isShowAccept:t,updateAccept:v,toSwap:s,swapBtnText:m,isSwapBtnDisabled:w}=wa(),a=de(),u=o(()=>a),r=Ce(),i=o(()=>r.slippage),S=o(()=>u.value.isSwapping),g=o(()=>u.value.isSwapConfirmModal),{setIsSwapConfirmModal:l}=u.value,$=Co(),b=Je(),_=o(()=>b);return{isShowAccept:t,slippage:i,updateAccept:v,closeSwapConfirmModal:e,toSwap:s,isSwapping:S,swapBtnText:m,isSwapBtnDisabled:w,isSwapConfirmModal:g,clickSwapBtn:()=>{_.value.connected?l(!0):_.value.setIsShowWalletModal(!0)},router:$,tradeTabList:[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}]}}});const Ca=e=>(ve("data-v-db6681ae"),e=e(),fe(),e),ka={class:"swap-sui-container"},ba=Ca(()=>n("div",{class:"bg"},null,-1));function _a(e,t,v,s,m,w){const a=ae("UnderlineTab"),u=ae("PlusSetting"),r=ae("TokenInputBox"),i=oo,S=To,g=ae("PriceReference"),l=Ro;return c(),T("div",ka,[ba,Y(a,{"tab-list":e.tradeTabList,"current-tab":"swap",onClickTab:t[0]||(t[0]=$=>e.$router.push($.link))},null,8,["tab-list"]),Y(u),Y(r),Y(i,{disabled:e.isSwapBtnDisabled,class:"big-btn new-big-btn",loading:e.isSwapping,onClick:t[1]||(t[1]=$=>e.clickSwapBtn())},{default:ne(()=>[n("span",null,N(e.swapBtnText),1)]),_:1},8,["disabled","loading"]),Y(S),Y(g),e.isSwapConfirmModal?(c(),K(l,{key:0,"is-show-accept":e.isShowAccept,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["is-show-accept","onOnClose","onToSwap","onAccept"])):W("",!0)])}const oi=ce(Sa,[["render",_a],["__scopeId","data-v-db6681ae"]]);export{oi as default};
