import{_ as Oe}from"./pool-position-tab.1e727b3b.js";import{_ as Le}from"./upgrade-select-input.f6332eb9.js";import{a as Y,e as Z,o as a,f as i,h as o,F as X,E as ee,c as ue,G as U,i as h,a4 as Te,S as $e,p as oe,k as se,m as f,x as r,r as R,A as q,u,D as M,l as x,w as F,y as re,P as we,z as ye,b as Ce,q as Re,C as je,a0 as De,I as te,t as Be,V as Fe,B as Ee,j as ke}from"./entry.c4f565bb.js";import"./index.083526b9.js";import{u as fe,a as Pe,b as He}from"./index.c16364fc.js";import{u as Ge}from"./notifi.8f5258e0.js";import{a as I,d as C,o as me,b as he,c as de,i as Me,g as qe,e as ze,B as Se}from"./common.bd99f06c.js";import{u as Ve,c as We}from"./index.4eaea48a.js";import{i as le}from"./import-icon.de3e6c66.js";import{T as Je}from"./total-position.1c656cab.js";import{C as be}from"./coin-img.9a7da991.js";import{T as Ie}from"./token-warning-new.ea96d818.js";/* empty css              */import"./decimal.a2826370.js";import{u as Ke}from"./farms.2333dc61.js";import{D as ie}from"./decimal.765d8738.js";import{_ as Ue}from"./icon_farms_2x.7771a0ef.js";import{_ as Qe}from"./icon_rewards_2x.f09b9c8d.js";import{_ as Xe}from"./img-no-Positions_2x.41705010.js";import{_ as Ye}from"./img-no-Positions_2x.5f55e30e.js";import{_ as Ze}from"./img-connect-wallet_2x.14147606.js";import{_ as xe}from"./img-connect-wallet_2x.0b0d8b57.js";import"./pool.6e9a9e1f.js";import"./select-tab.a4bce648.js";import"./coin-select.ba023a92.js";/* empty css              */import"./icon-tooltip.e5a8c1d7.js";import"./token-warning_2x.73ca4d7b.js";import"./useWhale.979d6628.js";/* empty css              *//* empty css              */import"./icon-selected_3x.873560ed.js";import"./coin-pair-name.f005626e.js";import"./token-warning.1158b13d.js";import"./no-data.d5d95483.js";import"./token.00c04f67.js";const eo=Y({props:{loading:{type:Boolean,required:!0},source:{type:String,default:""}},setup(e){return{positionList:[{},{},{}]}}});const oo=e=>(oe("data-v-121ff3b6"),e=e(),se(),e),so={class:"new-pool-position-list"},no={class:"position-list"},ao={class:"name-price"},to={class:"symbol-name"},io={class:"avatar-box"},ro={class:"name-box"},lo={class:"price-other-info"},uo={class:"new-my-position-item"},mo={class:"card-content"},co={class:"pos-name"},po={class:"bottom-info"},vo={class:"pos-valid-range"},go={class:"info-block"},fo={class:"info-block"},ho={class:"info-block"},_o=oo(()=>o("div",{class:"info-block"},null,-1));function ko(e,t,w,b,y,_){const c=Te,n=$e;return a(),i("div",so,[o("div",no,[(a(!0),i(X,null,ee(e.positionList,(v,m)=>(a(),i("div",{key:m,class:"item-box pageHaveRadiusSkeleton"},[o("div",ao,[o("div",to,[o("div",io,[e.loading?(a(),ue(c,{key:0,active:"",size:"large",paragraph:!1,class:"upgrade-avatar-skeleton"})):U("",!0),e.loading?(a(),ue(c,{key:1,active:"",size:"large",paragraph:!1,class:"upgrade-avatar-skeleton"})):U("",!0)]),o("div",ro,[h(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),h(n,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])])]),o("div",lo,[o("span",null,[h(n,{class:"upgrade-long-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])])])]),o("div",uo,[o("div",mo,[o("div",co,[h(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",po,[o("div",vo,[h(n,{class:"upgrade-long-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",go,[h(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),h(n,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",fo,[h(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),h(n,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",ho,[h(n,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),h(n,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),_o])])])]))),128))])])}const Ae=Z(eo,[["render",ko],["__scopeId","data-v-121ff3b6"]]),bo={class:"pool-symbol-name-block"},Io={class:"coin-info-fee"},$o={class:"coin-logo"},wo={class:"logo-token-warning"},yo={class:"logo-token-warning"},Co={class:"symbol-label"},Ro={class:"pool-name"},Po={class:"pool-fee"},So={class:"name"},Uo=Y({__name:"pool-symbol-name-block",props:{poolInfo:{type:Object,default:()=>({})}},setup(e){const t=e,w=f(()=>{var y,_,c,n;return console.log("ðŸš€ ~ tokenA ~ props.poolInfo?.is_forward:props.poolInfoprops.poolInfo",(y=t.poolInfo)==null?void 0:y.is_forward),(_=t.poolInfo)!=null&&_.is_forward?(c=t.poolInfo)==null?void 0:c.token_a:(n=t.poolInfo)==null?void 0:n.token_b}),b=f(()=>{var y,_,c,n;return console.log("ðŸš€ ~ tokenA ~ props.poolInfo?.is_forward:props.poolInfoprops.poolInfo",(y=t.poolInfo)==null?void 0:y.is_forward),(_=t.poolInfo)!=null&&_.is_forward?(n=t.poolInfo)==null?void 0:n.token_b:(c=t.poolInfo)==null?void 0:c.token_a});return console.log(w.value,b.value,t.poolInfo,"props.poolInfoprops.poolInfo"),(y,_)=>{var c,n,v,m,k,O;return a(),i("div",bo,[o("div",Io,[o("div",$o,[o("div",wo,[h(be,{url:(c=w.value)==null?void 0:c.logo_url,size:"36px"},null,8,["url"]),h(Ie,{token:w.value,"style-params":{width:"16px",height:"16px"}},null,8,["token"])]),o("div",yo,[h(be,{url:(n=b.value)==null?void 0:n.logo_url,size:"36px"},null,8,["url"]),h(Ie,{token:b.value,"style-params":{width:"16px",height:"16px"}},null,8,["token"])]),o("div",Co,[o("div",Ro,[o("span",null,r((v=w.value)==null?void 0:v.symbol)+"Â -Â ",1),o("span",null,r((m=b.value)==null?void 0:m.symbol),1),o("div",Po,r(e.poolInfo.fee*100)+"%",1)]),o("div",So,[o("span",null,r((k=w.value)==null?void 0:k.name)+"Â -Â ",1),o("span",null,r((O=b.value)==null?void 0:O.name),1)])])])])])}}});const Ao=Z(Uo,[["__scopeId","data-v-1c79b357"]]),No=Y({props:{poolInfo:{type:Object,default:()=>null}},setup(e){const t=R(),w=R(),b=f(()=>{var m;return(m=e.poolInfo)==null?void 0:m.needReverse}),y=fe(),_=f(()=>y),c=f(()=>_.value.currentExplorer),n=f(()=>_.value.theme),v=R(!0);return q(()=>[e.poolInfo],([m])=>{m&&(t.value=m.token_a,w.value=m.token_b)},{immediate:!0}),{needReverse:b,theme:n,indexStore:y,direct:v,addCommom:I,decimalUi:C,fromCoin:t,toCoin:w,getExplorerUrl:me,currentExplorer:c}}});const Ne=e=>(oe("data-v-453d5c59"),e=e(),se(),e),Oo={class:"pos-current-price"},Lo={class:"left"},To=Ne(()=>o("span",{class:"tit"},"Current Price",-1)),jo={key:0},Do={class:"value"},Bo={class:"text"},Fo={key:1},Eo={class:"value"},Ho={class:"text"},Go={class:"coin-rate"},Mo=Ne(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),qo=[Mo];function zo(e,t,w,b,y,_){var c,n,v,m;return a(),i("div",Oo,[o("div",Lo,[To,(e.needReverse?!e.direct:e.direct)?(a(),i("div",jo,[o("span",Do,r(("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.poolInfo.currentPrice,6))),1),o("span",Bo,r((c=e.toCoin)==null?void 0:c.symbol)+" per "+r((n=e.fromCoin)==null?void 0:n.symbol),1)])):(a(),i("div",Fo,[o("span",Eo,r(("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.poolInfo.currentPriceReverse,6))),1),o("span",Ho,r((v=e.fromCoin)==null?void 0:v.symbol)+" per "+r((m=e.toCoin)==null?void 0:m.symbol),1)]))]),o("div",Go,[o("div",{onClick:t[0]||(t[0]=k=>e.direct=!e.direct)},qo)])])}const Vo=Z(No,[["render",zo],["__scopeId","data-v-453d5c59"]]),Wo=Y({props:{poolInfo:{type:Object,default:()=>({})},usePropsDirect:{type:Boolean,require:!1,default:!1},propDirect:{type:Boolean,require:!1,default:!1}},setup(e,t){const w=R(!0),b=R(e.usePropsDirect),y=R(e.propDirect);q(()=>e.propDirect,v=>{y.value=v},{immediate:!0});const _=R(),c=R();return q(()=>e.poolInfo,v=>{v&&!de(v)&&(v.maxPrice!=="âˆž"&&(_.value=new ie(1).div(new ie(v.maxPrice)).toString()),v.minPrice>0&&(c.value=new ie(1).div(new ie(v.minPrice)).toString()))},{immediate:!0}),{sFixD:he,direct:w,isUsepropsDirect:b,propsDirect:y,clickChange:()=>{w.value=!w.value,b.value&&t.emit("clickChange")},minPriceResever:_,maxPriceResever:c,decimalUi:C,addCommom:I}}});const Jo=e=>(oe("data-v-a48f2308"),e=e(),se(),e),Ko={class:"new-range"},Qo={class:"left"},Xo={key:0},Yo={class:"num"},Zo={class:"num"},xo={class:"per"},es={key:1},os={class:"num"},ss={class:"num"},ns={class:"per"},as=Jo(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_swap_change"})],-1)),ts=[as];function is(e,t,w,b,y,_){var c,n,v,m;return a(),i("div",Ko,[o("div",Qo,[(e.isUsepropsDirect?e.propsDirect:e.direct)?(a(),i("p",Xo,[o("span",Yo,r(("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.poolInfo.minPrice,6)))+"Â -Â ",1),o("span",Zo,r(("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.poolInfo.maxPrice,6)))+"Â ",1),o("span",xo,r((c=e.poolInfo.coinB)==null?void 0:c.symbol)+" per "+r((n=e.poolInfo.coinA)==null?void 0:n.symbol),1)])):(a(),i("p",es,[o("span",os,r(e.poolInfo.maxPrice!=="âˆž"?("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.minPriceResever,6)):"0")+"Â -Â ",1),o("span",ss,r(e.poolInfo.minPrice>0?("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.maxPriceResever,6)):"âˆž")+"Â ",1),o("span",ns,r((v=e.poolInfo.coinA)==null?void 0:v.symbol)+" per "+r((m=e.poolInfo.coinB)==null?void 0:m.symbol),1)]))]),o("div",{class:"icon-change",onClick:t[0]||(t[0]=M(()=>e.clickChange(),["stop"]))},ts)])}const rs=Z(Wo,[["render",is],["__scopeId","data-v-a48f2308"]]),ls=Y({components:{NewFarmsRange:rs},props:{poolInfo:{type:Object,default:()=>({})}},setup(){const e=R(!0);return{sFixD:he,direct:e}}});const ds=e=>(oe("data-v-28df8dbb"),e=e(),se(),e),us={class:"status-box"},ms=["src"],cs={class:"status-text"},ps={class:"right"},vs=ds(()=>o("div",{class:"title"},"Price Range",-1));function gs(e,t,w,b,y,_){var v;const c=we,n=x("NewFarmsRange");return a(),i("div",{class:re(["pos-valid-range",((v=e.poolInfo)==null?void 0:v.currentStatus)=="Active"?"active-pos-valid-range":"inactive-pos-valid-range"])},[h(c,{placement:"top","arrow-point-at-center":"","overlay-class-name":"new-tooltip-border-radius-color"},{title:F(()=>{var m;return[o("span",null,r(e.$t("tips.statusblocktips",{word:((m=e.poolInfo)==null?void 0:m.currentStatus)==="Active"?"within":"out of"})),1)]}),default:F(()=>{var m,k,O;return[o("div",us,[(m=e.poolInfo)!=null&&m.currentStatus?(a(),i("img",{key:0,src:((k=e.poolInfo)==null?void 0:k.currentStatus)=="Active"?"/sui-image/icon_pos_active@2x.png":"/sui-image/img_inactive@2x.png",alt:""},null,8,ms)):U("",!0),o("span",cs,r((O=e.poolInfo)==null?void 0:O.currentStatus),1)])]}),_:1}),o("div",ps,[vs,h(n,{"pool-info":e.poolInfo},null,8,["pool-info"])])],2)}const fs=Z(ls,[["render",gs],["__scopeId","data-v-28df8dbb"]]),hs=Y({components:{PosValidRange:fs},props:{pItem:{type:Object,required:!0}},setup(e){const t=f(()=>{var s,d;return((s=e.pItem)==null?void 0:s.nftHash)||((d=e.pItem)==null?void 0:d.id)}),{t:w}=ye(),b=Ce(),y=fe(),_=f(()=>y);f(()=>_.value.chainName?He(_.value.chainName):{});const c=Pe(),n=f(()=>c),v=()=>{c.setPositionDetailCurrentTab("increase"),_.value.chainName==="Aptos"?b.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):e.pItem.positionSource=="clmm"?b.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`):b.push(`/new-position-detail?position_nft_id=${e.pItem.id}&positionSource=farming`)},m=f(()=>n.value.allTokenObj&&e.pItem.token_a.address&&n.value.allTokenObj[e.pItem.token_a.address]&&n.value.allTokenObj[e.pItem.token_a.address].logo_url),k=f(()=>n.value.allTokenObj&&e.pItem.token_b.address&&n.value.allTokenObj[e.pItem.token_b.address]&&n.value.allTokenObj[e.pItem.token_b.address].logo_url),O=f(()=>n.value.feeOwedObj[e.pItem.tokenName]&&n.value.feeOwedObj[e.pItem.tokenName].feeOwed),N=f(()=>n.value.feeOwedObj[e.pItem.tokenName]&&n.value.feeOwedObj[e.pItem.tokenName].feesResult),z=f(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarder||0),P=f(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarderView||0),p=f(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),L=f(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].farmingRewardList),j=R(0),D=R();q(()=>n.value.RATES,s=>{s&&(D.value=s)},{immediate:!0});const ne=s=>{var d;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((d=n.value.tokensObj[s==null?void 0:s.address])==null?void 0:d.logo_url)||(_.value.theme==="default"?le("/image/coins/unknown.png"):le("/image/coins/sui-unknown.png"))},pe=f(()=>n.value.tokensObj);Re(()=>{ve(e.pItem.minPrice,e.pItem.maxPrice)});const ae=R("--"),ve=(s,d)=>{s!=="0"&&d!=="âˆž"?ae.value=he(1/(1-Number((s/d)**.25)),2)+"x":ae.value="1x"};R(30);const A=R(null),E=f(()=>{var s,d,g,$,S,T,B,W,J,K,Q,_e;return A.value?A.value.is_display_rewarder?(s=A.value)!=null&&s.aprPercentageTotal?((d=A.value)==null?void 0:d.aprPercentageTotal)>1e4?">10,000":((g=A.value)==null?void 0:g.aprPercentageTotal)<.01&&(($=A.value)==null?void 0:$.aprPercentageTotal)>0?"<0.01":I((S=A.value)==null?void 0:S.aprPercentageTotal,2):(T=A.value)!=null&&T.rewardAprList?"0":"--":(B=A.value)!=null&&B.aprFee?((W=A.value)==null?void 0:W.aprFee)>1e4?">10,000":((J=A.value)==null?void 0:J.aprFee)<.01&&((K=A.value)==null?void 0:K.aprFee)>0?"<0.01":I((Q=A.value)==null?void 0:Q.aprFee,2):(_e=A.value)!=null&&_e.rewardAprList?"0":"--":"--"}),H=Ke(),G=f(()=>H),ge=f(()=>G.value.farmsPoolObj),l=f(()=>_.value.currentExplorer);return{nftHash:t,currentExplorer:l,getExplorerUrl:me,aprNum:E,lever:ae,tokensObj:pe,showNum:Me,fromCoinUrl:m,toCoinUrl:k,decimalFormat:qe,clickDetails:v,t:w,addCommom:I,importIcon:le,router:b,store:_,pendingRewarder:z,pendingFees:O,pendingRewarderArr:p,pendingFeesArr:N,checkNullObj:de,fixD:ze,decimalUi:C,pendingRewarderView:P,aprAmount:j,getCoinIcon:ne,Decimal:ie,farmsPoolObj:ge,farmingRewardList:L,formatCurrency:Se}}});const V=e=>(oe("data-v-0bc674c6"),e=e(),se(),e),_s={class:"card-content"},ks={class:"pos-name"},bs={class:"pos"},Is=V(()=>o("span",{class:"tit"},"NFT ID",-1)),$s={class:"val"},ws={class:"address"},ys={key:0,class:"tit"},Cs=["href"],Rs=V(()=>o("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),Ps=[Rs],Ss=["href"],Us=V(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_link"})],-1)),As=[Us],Ns={class:"bottom-info"},Os={class:"info-block-container"},Ls={class:"range-box"},Ts={class:"label"},js={class:"text"},Ds={key:0,class:"hover-rewarder"},Bs={class:"rewarder-info"},Fs={class:"left-rewarder"},Es={alt:""},Hs={class:"right-rewarder"},Gs={class:"amount"},Ms={key:0,class:"amount-usd"},qs={key:1,class:"amount-usd"},zs={class:"rewarder-info"},Vs={class:"left-rewarder"},Ws={alt:""},Js={class:"right-rewarder"},Ks={class:"amount"},Qs={key:0,class:"amount-usd"},Xs={key:1,class:"amount-usd"},Ys={class:"label"},Zs={key:0,class:"text"},xs={key:1,class:"text"},en={class:"hover-rewarder"},on={class:"left-rewarder"},sn={alt:""},nn={class:"right-rewarder"},an={class:"amount"},tn={class:"amount-usd"},rn={key:2,class:"text"},ln={class:"label-box"},dn={key:0,class:"text"},un={class:"img-text"},mn={key:0,class:"label"},cn=V(()=>o("img",{class:"img-default",src:Ue,alt:""},null,-1)),pn=[cn],vn={key:1,class:"label"},gn=V(()=>o("img",{class:"img-default",src:Qe,alt:""},null,-1)),fn=[gn],hn={class:"hover-rewarder"},_n=V(()=>o("div",{class:"title"},"Mining Rewards",-1)),kn={class:"left-rewarder"},bn={alt:""},In={class:"right-rewarder"},$n={class:"amount"},wn={class:"amount-usd"},yn=V(()=>o("div",{class:"title"},"Farming Rewards",-1)),Cn={class:"left-rewarder"},Rn={alt:""},Pn={class:"right-rewarder"},Sn={class:"amount"},Un={class:"amount-usd"},An={key:1,class:"text"},Nn=V(()=>o("div",{class:"more-box"},[o("div",{class:"more"},[o("span",null,"Manage"),o("svg",{class:"arrow-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_arrow"})])])],-1));function On(e,t,w,b,y,_){var k,O,N,z,P;const c=x("PosValidRange"),n=we,v=$e,m=je("image");return a(),i("div",{class:"new-my-position-item",onClick:t[7]||(t[7]=(...p)=>e.clickDetails&&e.clickDetails(...p))},[o("div",_s,[o("div",ks,[o("div",bs,[Is,o("span",$s,r(e.pItem.tokenName.split("|")[1]),1)]),o("div",ws,[e.nftHash?(a(),i("span",ys,"Address")):U("",!0),e.nftHash?(a(),i("a",{key:1,class:"val",target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:u(me))(e.currentExplorer,"nftAddress",e.nftHash),onClick:t[0]||(t[0]=M(()=>{},["stop"]))}," Â "+r((k=e.nftHash)==null?void 0:k.substr(0,4))+" ... "+r((N=e.nftHash)==null?void 0:N.substr(((O=e.nftHash)==null?void 0:O.length)-4,4))+"Â  ",9,Cs)):U("",!0),e.nftHash?(a(),i("svg",{key:2,class:"icon","aria-hidden":"true",onClick:t[1]||(t[1]=M(p=>e.store.copy(e.nftHash),["stop"]))},Ps)):U("",!0),o("a",{class:"h5-link-icon",href:("getExplorerUrl"in e?e.getExplorerUrl:u(me))(e.currentExplorer,"nftAddress",e.nftHash),target:"_blank",onClick:t[2]||(t[2]=M(()=>{},["stop"]))},As,8,Ss)])]),o("div",Ns,[o("div",Os,[o("div",{class:"info-block",onClick:t[3]||(t[3]=M(()=>{},["stop"]))},[o("div",Ls,[h(c,{"pool-info":{...e.pItem,minPrice:e.pItem.needReverse?e.pItem.maxPrice==="âˆž"?"0":("decimalUi"in e?e.decimalUi:u(C))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6):("decimalUi"in e?e.decimalUi:u(C))(e.pItem.minPrice,6),maxPrice:(e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="âˆž")?"âˆž":e.pItem.needReverse?("decimalUi"in e?e.decimalUi:u(C))(1/e.pItem.minPrice,6):("decimalUi"in e?e.decimalUi:u(C))(e.pItem.maxPrice,6)}},null,8,["pool-info"])])]),o("div",{class:re(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""]),onClick:t[4]||(t[4]=M(()=>{},["stop"]))},[o("div",Ts,r(e.$t("common.liquidity")),1),o("div",js,[h(n,{"overlay-class-name":"position-tooltip"},{title:F(()=>[e.pItem.amountUSD>0?(a(),i("div",Ds,[o("div",Bs,[o("div",Fs,[te(o("img",Es,null,512),[[m,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),o("span",null,r(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),o("div",Hs,[o("div",Gs,r(e.pItem.needReverse?("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(a(),i("div",qs,r(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:u(I))(e.pItem.tokenBRates,2):"<$0.01"),1)):(a(),i("div",Ms,r(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:u(I))(e.pItem.tokenARates,2):"<$0.01"),1))])]),o("div",zs,[o("div",Vs,[te(o("img",Ws,null,512),[[m,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),o("span",null,r(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),o("div",Js,[o("div",Ks,r(e.pItem.needReverse?("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(a(),i("div",Xs,r(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.pItem.tokenARates,2)):"<$0.01"),1)):(a(),i("div",Qs,r(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):U("",!0)]),default:F(()=>[o("span",null," $"+r(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:u(I))(e.pItem.amountUSD,2)),1)]),_:1})])],2),o("div",{class:re(["info-block cursor-block",e.pendingFees==0?"block-none":""]),onClick:t[5]||(t[5]=M(()=>{},["stop"]))},[o("div",Ys,r(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(a(),i("div",Zs,"$ --")):isNaN(e.pendingFees)?(a(),i("div",rn,[h(v,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(a(),i("div",xs,[h(n,{"overlay-class-name":"position-tooltip"},{title:F(()=>[o("div",en,[(a(!0),i(X,null,ee(e.pendingFeesArr,p=>(a(),i("div",{key:p,class:"rewarder-info"},[o("div",on,[te(o("img",sn,null,512),[[m,e.getCoinIcon(p)]]),o("span",null,r(p.symbol),1)]),o("div",nn,[o("div",an,r(Number(p.amount)==0?0:("formatCurrency"in e?e.formatCurrency:u(Se))(p.amount,p.decimals,!0,!1,!1)),1),o("div",tn,r(Number(p.amountUSD)==0?"$0":Number(p.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:u(I))(p.amountUSD,2):"<$0.01"),1)])]))),128))])]),default:F(()=>[o("span",null,r(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:u(I))(e.pendingFees,2)),1)]),_:1})]))],2),e.pItem.is_display_rewarder&&((z=e.pItem)!=null&&z.rewarder_infos)&&!("checkNullObj"in e?e.checkNullObj:u(de))((P=e.pItem)==null?void 0:P.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0||e.pItem.rewards&&e.pItem.rewards.length>0?(a(),i("div",{key:0,class:re(["info-block cursor-block",[e.pendingRewarder==0&&e.pItem.rewards&&e.pItem.rewards.length==0?"block-none ":"",Number(e.pendingRewarder)==0?" block-none-reward":""].join(",")]),onClick:t[6]||(t[6]=M(()=>{},["stop"]))},[o("div",ln,[o("span",null,r(e.$t("newAdd.pendingRewards")),1)]),e.pendingRewarder||e.pendingRewarder==0||e.pItem.farmingRewardTotalUsd?(a(),i("div",dn,[h(n,{"overlay-class-name":"position-tooltip"},De({default:F(()=>{var p,L;return[o("div",un,[e.pItem.rewards&&e.pItem.rewards.length>0?(a(),i("div",mn,pn)):U("",!0),e.pItem.is_display_rewarder&&((p=e.pItem)!=null&&p.rewarder_infos)&&!("checkNullObj"in e?e.checkNullObj:u(de))((L=e.pItem)==null?void 0:L.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(a(),i("div",vn,fn)):U("",!0),o("span",null,r(e.pendingRewarder+e.pItem.farmingRewardTotalUsd>0&&e.pendingRewarder+e.pItem.farmingRewardTotalUsd>.01?`$${("addCommom"in e?e.addCommom:u(I))(e.pendingRewarder+e.pItem.farmingRewardTotalUsd,2)}`:e.pendingRewarder+e.pItem.farmingRewardTotalUsd>0&&e.pendingRewarder+e.pItem.farmingRewardTotalUsd<=.01?"<$0.01":"$0"),1)])]}),_:2},[e.pendingRewarder>0?{name:"title",fn:F(()=>[o("div",hn,[_n,(a(!0),i(X,null,ee(e.pendingRewarderArr,p=>(a(),i("div",{key:p,class:"rewarder-info"},[o("div",kn,[te(o("img",bn,null,512),[[m,e.getCoinIcon(p)]]),o("span",null,r(p.symbol),1)]),o("div",In,[o("div",$n,r(("addCommom"in e?e.addCommom:u(I))(("decimalUi"in e?e.decimalUi:u(C))(p.amount,p.decimals))),1),o("div",wn,r(Number(p.amountUSD)==0?"$0":Number(p.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:u(I))(p.amountUSD,2):"<$0.01"),1)])]))),128)),e.pItem.rewards&&e.pItem.rewards.length>0?(a(),i(X,{key:0},[yn,(a(!0),i(X,null,ee(e.pItem.rewards,p=>(a(),i("div",{key:p,class:"rewarder-info"},[o("div",Cn,[te(o("img",Rn,null,512),[[m,e.getCoinIcon(p)]]),o("span",null,r(p.symbol),1)]),o("div",Pn,[o("div",Sn,r(("decimalUi"in e?e.decimalUi:u(C))(p.amount,p.decimals)),1),o("div",Un,r(Number(p.rewarderAmountUsd)==0?"$0":Number(p.rewarderAmountUsd)>.01?"$"+("addCommom"in e?e.addCommom:u(I))(p.rewarderAmountUsd,2):"<$0.01"),1)])]))),128))],64)):U("",!0)])]),key:"0"}:void 0]),1024)])):(a(),i("div",An,[h(v,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})]))],2)):U("",!0)])])]),Nn])}const Ln=Z(hs,[["render",On],["__scopeId","data-v-0bc674c6"]]),Tn=Y({components:{TotalPosition:Je,PoolSymbolNameBlock:Ao,PositionLoading:Ae,NewMyPositionItem:Ln,PosCurrentPrice:Vo},setup(){const e=R(!1),{t}=ye(),w=R(["position"]),b=Ce(),y=R(""),_=fe(),c=f(()=>_),n=f(()=>c.value.chainName?We[c.value.chainName]:{});let v=R([]);const m=Pe(),k=f(()=>m),O=Ve(),N=f(()=>O);R(!0);const z=R("TVL"),P=()=>{e.value=!0,v.value=[],N.value.address&&(m.setPools(ne.value.poolConfigList,c.value.chainName),m.getMyPositons(N.value.address,k.value.poolsObj,c.value.chainName)),setTimeout(()=>{e.value=!1},1e3)},p=f(()=>{const l=Array.from(new Set(k.value.poolConfigList.flatMap(s=>!(s!=null&&s.category)||(s==null?void 0:s.category)==""?"All":s==null?void 0:s.category)));return console.log(l,"newArr"),l.length<=1?[]:l});q(()=>c.value.isRefresh,l=>{var s,d,g,$;l&&(($=(g=(d=(s=b==null?void 0:b.currentRoute)==null?void 0:s.value)==null?void 0:d.name)==null?void 0:g.split("-"))==null?void 0:$[1])=="position"&&P()}),Re(()=>{v.value=[],m.setMyPositionsLoading(!0)}),Be(()=>{N.value.connected||(v.value=[])});const L=()=>{e.value=!0;let l=[];k.value.myPositions.forEach(d=>{var W,J,K,Q;let g=d.positionSource=="farming",$,S;const T=d.amountA*((W=k.value.RATES[d.token_a.address])==null?void 0:W.price),B=d.amountB*((J=k.value.RATES[d.token_b.address])==null?void 0:J.price);(K=k.value.RATES[d.token_a.address])!=null&&K.price&&((Q=k.value.RATES[d.token_b.address])!=null&&Q.price)?($=T+B,S=T+B):($=" --",S=0),console.log(k.value.currentPoolTab,"##pools.value.currentPoolTab"),l.push({...d,amountUSD:$,amountUSDOrigin:S,tokenARates:T,tokenBRates:B,isStableFarming:g})});const s={};l.forEach(d=>{s[d.address]?s[d.address].positionList.push(d):(s[d.address]={},s[d.address].poolInfo=d,s[d.address].positionList=[d])}),v.value=Object.values(s)||[],console.log(v.value,"list.value========>")};q(()=>[k.value.myPositions,k.value.RATES],([l,s])=>{l&&s&&(console.log("0605==>updateLpList9099999"),L())},{immediate:!0}),q(()=>[N.value.address,k.value.poolConfigList,k.value.poolsObj,c.value.chainName],([l,s,d,g])=>{var $,S,T;l&&s&&s.length>0&&g&&(g!=null&&g.toLowerCase().includes(($=s[0])==null?void 0:$.chain))&&!de(d)&&(g==="Aptos"?s.length===Object.values(d).length:(T=(S=Object.values(d)[0])==null?void 0:S.chain)!=null&&T.includes("sui"))&&(console.log(d,s,"0605==>getMyPositons9099999"),m.getMyPositons(N.value.address,d,g))},{immediate:!0,deep:!0}),q(()=>N.value.address,l=>{l||m.setMyPositions()},{immediate:!0});const j=Ge(),D=f(()=>j),ne=f(()=>m),pe=async l=>{await j.getSourceGroups();const s=D.value.sourceGroups&&D.value.sourceGroups.length>0&&D.value.sourceGroups[0]&&D.value.sourceGroups[0].sources||[];console.log(s,"####source"),console.log(l,"###myPositions");for(let d=0;d<s.length;d++){const{pool_address:g,position_index:$}=JSON.parse(s[d].blockchainAddress);let S=!1,T;for(let B=0;B<l.length;B++){const{poolAddress:W,index:J,positionSource:K,name:Q}=l[B];g==W&&Number(K=="clmm"?J:Q.split("-")[1])==Number($)&&(S=!0),T={pool_address:g,position_index:$}}S||await j.subscribePosition(T,"",!1,!1)}},ae=async()=>{await j.getSourceGroups();const l=D.value.sourceGroups&&D.value.sourceGroups.length>0&&D.value.sourceGroups[0]&&D.value.sourceGroups[0].sources||[];for(let s=0;s<l.length;s++){const{pool_address:d,position_index:g}=JSON.parse(l[s].blockchainAddress),{name:$}=l[s],S={pool_address:d,position_index:g};await j.subscribePosition(S,$,!1,!1)}},ve=f(()=>ne.value.myPositionsLoading);q(()=>ne.value.myPositions,(l,s)=>{n.value.hasNotifi&&(l&&l.length>0&&s&&s.length!==l.length?pe(l):l&&l.length==0&&!ve.value&&ae())},{immediate:!0});const A=l=>{var s;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((s=k.value.tokensObj[l==null?void 0:l.address])==null?void 0:s.logo_url)||(c.value.theme==="default"?le("/image/coins/unknown.png"):le("/image/coins/sui-unknown.png"))},E=R(null),H=f(()=>E.value&&E.value.firstToken?E.value.firstToken:null),G=f(()=>E.value&&E.value.lastToken?E.value.lastToken:null),ge=f(()=>{let l=[];l=v.value;const s=l.filter((g,$)=>H.value&&G.value?g.poolInfo.coinA.symbol==H.value.symbol&&g.poolInfo.coinB.symbol==G.value.symbol||g.poolInfo.coinA.symbol==G.value.symbol&&g.poolInfo.coinB.symbol==H.value.symbol:H.value?g.poolInfo.coinA.symbol.toLowerCase().includes(H.value.symbol.toLowerCase())||g.poolInfo.coinB.symbol.toLowerCase().includes(H.value.symbol.toLowerCase()):G.value?g.poolInfo.coinA.symbol.toLowerCase().includes(G.value.symbol.toLowerCase())||g.poolInfo.coinB.symbol.toLowerCase().includes(G.value.symbol.toLowerCase()):l);if(!k.value.myPositionsLoading){const g=s.map($=>$==null?void 0:$.positionList).flat();console.log("ðŸš€ ~ showList ~ arr:",g),_.setPositiomAmount(g.length),m.setPositionShowList(g)}return s.filter((g,$)=>{var S;return((S=g.positionList)==null?void 0:S.length)>0})});return Fe(()=>{_.setPositiomAmount("--"),m.setPositionShowList([])}),{tabArr:p,showList:ge,childTokenSelectRef:E,firstToken:H,lastToken:G,getCoinIcon:A,selectValue:z,t,pools:k,store:c,wallet:N,list:v,clickRefresh:P,refresh:e,current:w,router:b,searchKey:y}}});const ce=e=>(oe("data-v-de6abb6b"),e=e(),se(),e),jn={class:"new-position-list-container pageHaveRadiusSkeleton"},Dn={class:"filter-refresh"},Bn={class:"icon-box"},Fn=ce(()=>o("use",{"xlink:href":"#icon-icon_refresh"},null,-1)),En=[Fn],Hn={class:"position-card-top"},Gn={key:0,class:"upgrade-loading"},Mn={key:1,class:"position-list"},qn={class:"name-price"},zn={class:"price-other-info"},Vn={class:"farm-create"},Wn=ce(()=>o("img",{class:"img-default",src:Ue,alt:""},null,-1)),Jn=ce(()=>o("span",null,"Farm",-1)),Kn=ce(()=>o("svg",{class:"arrow-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Qn=[Wn,Jn,Kn],Xn={key:2,class:"no-data"},Yn={key:0,src:Xe,alt:""},Zn={key:1,src:Ye,alt:""},xn={key:3,class:"no-data"},ea={key:0,src:Ze,alt:""},oa={key:1,src:xe,alt:""};function sa(e,t,w,b,y,_){const c=Oe,n=Le,v=x("TotalPosition"),m=Ae,k=x("PoolSymbolNameBlock"),O=x("PosCurrentPrice"),N=Ee,z=x("NewMyPositionItem");return a(),i("div",jn,[h(c,{"current-tab":"Positions"}),o("div",Dn,[h(n,{ref:"childTokenSelectRef"},null,512),o("div",{class:"refresh-icon",onClick:t[0]||(t[0]=(...P)=>e.clickRefresh&&e.clickRefresh(...P))},[o("div",Bn,[(a(),i("svg",{class:re(["icon",{refresh:e.isRefresh}]),"aria-hidden":"true"},En,2))])])]),o("div",Hn,[e.wallet&&e.wallet.address?(a(),ue(v,{key:0})):U("",!0)]),e.pools.myPositionsLoading&&e.wallet.connected?(a(),i("div",Gn,[h(m,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):U("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(a(),i("div",Mn,[(a(!0),i(X,null,ee(e.showList,P=>{var p;return a(),i("div",{key:(p=P.poolInfo)==null?void 0:p.address,class:"item-box"},[o("div",qn,[h(k,{"pool-info":P.poolInfo},null,8,["pool-info"]),o("div",zn,[h(O,{"pool-info":P.poolInfo},null,8,["pool-info"]),o("div",Vn,[P.poolInfo.isStableFarming?(a(),i("div",{key:0,class:"farming-logo",onClick:t[1]||(t[1]=M(L=>e.$router.push("/farms"),["stop"]))},Qn)):U("",!0),h(N,{class:"ghost-btn create",onClick:L=>{var j;return e.$router.push(`/liquidity/deposit?poolAddress=${(j=P.poolInfo)==null?void 0:j.poolAddress}`)}},{default:F(()=>[ke("Create new position")]),_:2},1032,["onClick"])])])]),(a(!0),i(X,null,ee(P.positionList,L=>(a(),ue(z,{key:L==null?void 0:L.name,"p-item":L},null,8,["p-item"]))),128))])}),128))])):U("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(a(),i("div",Xn,[e.store.theme=="default"?(a(),i("img",Yn)):(a(),i("img",Zn)),o("span",null,r(e.$t("common.noLiquidityPositions")),1)])):U("",!0),e.wallet.connected?U("",!0):(a(),i("div",xn,[e.store.theme=="default"?(a(),i("img",ea)):(a(),i("img",oa)),h(N,{class:"connect-wallet",onClick:t[2]||(t[2]=P=>e.wallet.setIsShowWalletModal(!0))},{default:F(()=>[ke(r(e.$t("button.connectWallet")),1)]),_:1})]))])}const Ea=Z(Tn,[["render",sa],["__scopeId","data-v-de6abb6b"]]);export{Ea as default};
