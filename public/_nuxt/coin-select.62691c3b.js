import{i as z}from"./import-icon.de3e6c66.js";import{m as Te,b as U,A as ge,p as Re}from"./index.dbdd6761.js";import{a as Ke,Y as ze,a3 as Ze,l as qe,m as I,r as y,y as Je,D as W,ag as We,e as Ye,M as Y,q as Ge,o as a,c as G,w as g,z as N,h as n,t as le,a9 as He,f as r,x as C,F as H,s as Q,u as $,v as f,K as V,i as M,j as te,L as Qe,ah as Ve,B as Xe,J as xe,p as eo,k as oo}from"./entry.2580d766.js";/* empty css              *//* empty css              */import{u as so,m as lo}from"./index.75f6af80.js";import{u as to,a as we,b as no}from"./pool.37bda3ae.js";import{I as ao}from"./icon-tooltip.bf685fd5.js";import{_ as ro}from"./token-warning_2x.be0b9191.js";import{_ as io}from"./img-no-Positions_2x.348ab173.js";import{_ as co}from"./img-no-Positions_2x.ecbddd18.js";const uo=Ke({components:{Modal:ze,LoadingOutlined:Ze,IconTooltip:ao},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},haveImportBtn:{type:Boolean,default:!1},isAllowBan:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,h){const{t:u,locale:Le}=qe(),ne=so(),D=I(()=>ne),F=to(),v=I(()=>F),X=we(),p=I(()=>X),E=y(!1),R=I(()=>{var o;return(o=p.value)==null?void 0:o.filterCreatePoolCoin}),T=y("Default"),x=I(()=>{const o=[u("tab.all"),u("tab.native")],i=Array.from(new Set(v.value.tokens.flatMap(c=>c.labels?c.labels:null)));return p.value.theme=="default"?o.concat(i):[u("tab.all"),u("tab.native"),u("tab.wormhole"),u("tab.celer")]}),S=y(u("tab.all")),L=y(u("tab.all")),Z=we(),s=I(()=>Z.chainName),b=y([]),A=I(()=>p.value.importTokenList),m=y(null);Je(()=>{});const ee=y(!1);W(S,o=>{o!==u("tab.all")&&(ee.value=!1),o==u("tab.all")?L.value=u("tab.all"):o==u("tab.layerZero")?L.value=u("tab.layerZero"):o==u("tab.wormhole")?L.value=u("tab.wormhole"):o==u("tab.celer")?L.value=u("tab.celer"):o==u("tab.native")&&(L.value=u("tab.native")),K(m.value)});const oe=y(!1),K=async o=>{var ie,ce,de,ue,ve,pe,ke,fe,be;o||(oe.value=!1),console.log("ðŸš€ ~ updateTokenList ~ updateTokenList:");let i=[];const c=Object.fromEntries((ie=v.value.tokens)==null?void 0:ie.map(t=>[t.address,t]));let d=T.value=="Default"?v.value.tokens:A.value;if(console.log("ðŸš€ ~ updateTokenList ~ tokens:",d),T.value=="Default"&&!(p.value.chainName&&d&&d[0]&&p.value.chainName.toLowerCase().includes((ce=d[0])==null?void 0:ce.chain))){b.value=[];return}let B=d;if(console.log("ðŸš€ ~ updateTokenList ~ allTokenList:",B),console.log("ðŸš€ ~ updateTokenList ~ keyword:",o),o&&o.split("::")&&o.split("::").length==3&&!(c!=null&&c.hasOwnProperty(o))){if(s.value=="Sui"){const t=no("Sui");try{let l=v.value.tokensObj[ge(o)]||v.value.notTrustedObj[ge(o)]||await t.getTokenBySymbol(v.value.tokens,o);l&&((de=d.filter(k=>(k==null?void 0:k.address)===(l==null?void 0:l.address)))==null?void 0:de.length)<1&&((ue=p.value.importTokenListObj)!=null&&ue.hasOwnProperty(l==null?void 0:l.address)?(T.value="Imported",E.value=!0):e.haveImportBtn&&(oe.value=!0),l={...l,address:(l==null?void 0:l.address.toLowerCase())=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::sui"?"0x2::sui::SUI":l==null?void 0:l.address},B=d.concat(l),console.log("ðŸš€ ~ updateTokenList ~ allTokenList:",B))}catch(l){console.log("searchToken##err##",l)}}}else E.value=!1;console.log("ðŸš€ ~ updateTokenList ~ showDefaultTip.value:",E.value);for(const t of Object.keys(B)){let l=We(B[t]);const k=D.value.assets[l.address]&&D.value.assets[l.address].balance?Re(D.value.assets&&D.value.assets[l.address].balance,l.decimals):0;e.lastSelectCoin&&l&&l.address===e.lastSelectCoin?l.unusable=!0:l.unusable=!1;const P=((ve=v.value.tokensObj[l.address])==null?void 0:ve.labels)&&((pe=v.value.tokensObj[l.address])==null?void 0:pe.labels[0]),J=v.value.tokensObj[l.address]?(ke=v.value.tokensObj[l.address])==null?void 0:ke.name:l.name;l={...l,balance:k,labels:P,name:J,sort:(p.value.chainName==="Aptos"?l.symbol=="APT":l.symbol=="SUI")?1:-1},i.push(l)}let _;D.value.address?_=i.sort((t,l)=>l.balance-t.balance):_=i;let j=[];if(o){const t=o.toLowerCase();console.log("ðŸš€ ~ file: coin-select.vue:548 ~ updateTokenList ~ keyword:",o);const l=_.filter(k=>k.symbol.toLowerCase().indexOf(t)!==-1||k.address.toLowerCase().indexOf(t)!==-1||k.address.toLowerCase().indexOf(lo(o).full_address.toLowerCase())!==-1||k.name.toLowerCase().indexOf(t)!==-1);console.log("ðŸš€ ~ file: coin-select.vue:556 ~ updateTokenList ~ result:",l),j=l}else S.value!==u("tab.all")?j=_.filter(l=>S.value==u("tab.native")?!l.labels||l.labels=="Native":l.labels&&l.labels.toLowerCase()==S.value.toLowerCase()):j=_;if(console.log("ðŸš€ ~ file: coin-select.vue:556 ~ updateTokenList ~ props.isCreatePoolToCoin:",e.isCreatePoolToCoin),console.log("ðŸš€ ~ file: coin-select.vue:556 ~ updateTokenList ~ props.isCreatePoolFromCoin:",e.isCreatePoolFromCoin),e.isCreatePoolToCoin?b.value=(fe=j.filter(t=>R.value[t==null?void 0:t.address]))==null?void 0:fe.sort((t,l)=>l.sort-t.sort).sort((t,l)=>l.unusable-t.unusable):b.value=j.sort((t,l)=>l.sort-t.sort).sort((t,l)=>l.unusable-t.unusable),e.isCreatePoolFromCoin&&(b.value=(be=j.filter(t=>!R.value[t==null?void 0:t.address]))==null?void 0:be.sort((t,l)=>l.sort-t.sort).sort((t,l)=>l.unusable-t.unusable)),console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:575 ~ updateTokenList ~  tokenList.value:",b.value),o){const t=o.toLowerCase(),l=j.sort((k,P)=>{const J=k.symbol.toLowerCase()===t,je=P.symbol.toLowerCase()===t,he=k.name.toLowerCase()===t,Ne=P.name.toLowerCase()===t,me=k.address.toLowerCase()===t,Ee=P.address.toLowerCase()===t,Ce=k.symbol.toLowerCase().includes(t),Me=P.symbol.toLowerCase().includes(t),_e=k.name.toLowerCase().includes(t),Ue=P.name.toLowerCase().includes(t),ye=k.address.toLowerCase().includes(t),Fe=P.address.toLowerCase().includes(t);return J!==je?J?-1:1:he!==Ne?he?-1:1:me!==Ee?me?-1:1:Ce!==Me?Ce?-1:1:_e!==Ue?_e?-1:1:ye!==Fe?ye?-1:1:0});b.value=l}},Ie=o=>{e.isAllowBan&&o.unusable||(o.unusable&&!m.value&&h.emit("onClose"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:589 ~ toSelect ~ props.isAllowBan:",e.isAllowBan,o),h.emit("onSelect",o),h.emit("onClose"))};W(()=>[m.value,ee.value,T.value],([o,i,c])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:601 ~ setup ~ currentTokenTab:",c),K(o)});const q=I(()=>s.value=="Aptos"?p.value.collectTokenListAptos:(console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:610 ~ collectList ~ store.value.collectTokenListSui:",p.value.collectTokenListSui),p.value.collectTokenListSui)),ae=y([]),O=y({}),se=y(!0);W(()=>[v.value.tokens,A.value,se.value],([o,i,c])=>{if(o&&o.length>0&&i&&i.length>0&&c){const d=Se(i,o);p.value.setImportTokenList(d),se.value=!1,console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:614 ~ watch ~ isUpdateImportList:",se)}},{immediate:!0}),W(()=>[v.value.tokens,s.value,q.value],([o,i,c])=>{o&&o[0]&&o[0].chain!==(i==null?void 0:i.toLowerCase())||(o&&o.length>0&&(K(m.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:632 ~ watch ~ updateTokenList:")),c&&c.length>0?(ae.value=c.filter(d=>R.value[d==null?void 0:d.address]),O.value=Object.fromEntries(c==null?void 0:c.map(d=>[d.address,d]))):O.value={})},{immediate:!0});function Se(o,i){return o.filter(c=>!i.some(d=>c.address===d.address))}function Ae(o,i){const c=new Set(i==null?void 0:i.map(d=>d.address));return o==null?void 0:o.filter(d=>c.has(d.address))}const re=o=>{let i=q.value;const c=o.address;let d;console.log("ðŸš€ðŸš€ðŸš€ ~ file: coin-select.vue:716 ~ clickCollectIcon ~ collectListObj:",O),O!=null&&O.value.hasOwnProperty(c)?d=i.filter(_=>(_==null?void 0:_.address)!==c):(i.push(o),d=i),console.log("ðŸš€ ~ clickCollectIcon ~ list:",d),p.value.setCollectTokenList(d,s.value)},Oe=o=>{let i=A.value;const c=o.address,B=i.filter(_=>(_==null?void 0:_.address)!==c);p.value.setImportTokenList(B),O.value[o.address]&&re(o),T.value!=="Default"&&K(m.value)},Be=()=>{p.value.setImportTokenList([]);const o=Ae(q.value,v.value.tokens);p.value.setCollectTokenList(o,s.value),T.value!=="Default"&&K(m.value)},Pe=o=>{var i;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((i=v.value.tokensObj[o==null?void 0:o.address])==null?void 0:i.logo_url)||(p.value.theme==="default"?z("/image/coins/unknown.png"):z("/image/coins/sui-unknown.png"))},$e=o=>{var i,c;return v.value.tokensObj&&o.address&&v.value.tokensObj[o.address]&&((i=v.value.tokensObj[o.address])==null?void 0:i.labels)&&((c=v.value.tokensObj[o.address])==null?void 0:c.labels[0])},De=I(()=>p.value.currentExplorer);return{getExplorerUrl:Te,currentExplorer:De,showDefaultTip:E,isCreatePoolToCoinCollectList:ae,showImportBtn:oe,deleteImportToken:Oe,clearAllImportToken:Be,importList:A,currentTokenTab:T,coinLabels:$e,collectListObj:O,clickCollectIcon:re,getCoinIcon:Pe,collectList:q,pools:v,t:u,chainName:s,tabList:x,currentTab:S,addCommom:U,tokenList:b,importIcon:z,keyword:m,wallet:D,toSelect:Ie,store:p,isShowAll:ee}}});const w=e=>(eo("data-v-18b57229"),e=e(),oo(),e),vo=w(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),po={class:"coin-select-modal"},ko={class:"search-input"},fo=["placeholder"],bo=w(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),ho=[bo],mo={key:0,class:"popular"},Co=["onClick"],_o={class:"name-symbol"},yo=["onClick"],go=w(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_cancelled"})],-1)),wo=[go],To={key:1,class:"tab-list"},Lo=["onClick"],Io={key:0,class:"item"},So=w(()=>n("span",null," No tokens found ",-1)),Ao=w(()=>n("div",null,"Default",-1)),Oo={key:1},Bo=w(()=>n("div",{class:"line"},null,-1)),Po={key:2,class:"type-list"},$o=["onClick"],Do={key:0,class:"type"},jo={key:3,class:"type-list import-type"},No={class:"type-container"},Eo={class:"type"},Mo=w(()=>n("div",{class:"type"},f("Clear All"),-1)),Uo=[Mo],Fo={class:"coin-list-box"},Ro={key:0,class:"coin-list"},Ko=["onClick"],zo={class:"left"},Zo={class:"token-icon",alt:""},qo={key:0,class:"token-waring",src:ro,alt:""},Jo={class:"name-box"},Wo={class:"symbol"},Yo={key:0,class:"label"},Go={class:"copy-text"},Ho=["href"],Qo=["onClick"],Vo=w(()=>n("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),Xo=[Vo],xo={class:"balance-box"},es={class:"balance"},os={key:0},ss={key:1},ls={key:1,class:"balance-num"},ts={key:2,class:"balance-num"},ns={key:3},as=w(()=>n("p",null,null,-1)),rs=["onClick"],is=w(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_del"})],-1)),cs=[is],ds=["onClick"],us=w(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_filled_sel"})],-1)),vs=[us],ps={key:1,class:"no-data"},ks={key:0,class:"token-loading"},fs={key:1,class:"no-data-content"},bs={key:0,src:io},hs={key:1,src:co},ms={key:2},Cs={key:3},_s={key:4};function ys(e,h,u,Le,ne,D){const F=Qe,v=Y("loading-outlined"),X=Ve,p=Xe,E=xe,R=Y("IconTooltip"),T=Y("vue-scroll"),x=Y("Modal"),S=Ge("image");return a(),G(x,{title:e.$t("modal.selectTokenModalTitle"),class:N(["select-mod",e.store.theme=="default"?"":"new-modal-have-radius"]),width:460,centered:"",visible:!0,footer:null,onCancel:h[4]||(h[4]=L=>e.$emit("onClose"))},{closeIcon:g(()=>[vo]),default:g(()=>{var L,Z;return[n("div",po,[n("div",ko,[le(n("input",{"onUpdate:modelValue":h[0]||(h[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^[a-zA-Z0-9\\s]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,fo),[[He,e.keyword]]),e.keyword?(a(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:h[1]||(h[1]=s=>e.keyword="")},ho)):C("",!0)]),e.collectList&&e.collectList.length>0?(a(),r("div",mo,[(a(!0),r(H,null,Q(e.isCreatePoolToCoin?e.isCreatePoolToCoinCollectList:e.collectList,s=>(a(),r("div",{key:s.address,class:N(["img-box",s.address===e.lastSelectCoin&&e.isAllowBan?"img-box-unusable":"img-box-usable"]),onClick:b=>e.toSelect(s)},[le(n("img",null,null,512),[[S,s.icon||s.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:$(z))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:$(z))("/image/coins/sui-unknown.png"))]]),n("div",_o,[n("span",null,f(s.symbol),1),n("p",null,f((s==null?void 0:s.address)=="0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN"||(s==null?void 0:s.address)=="0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN"?"Portal from Ethereum":e.coinLabels(s)),1)]),n("div",{class:"delete-collect-icon",onClick:V(b=>e.clickCollectIcon(s),["stop"])},wo,8,yo)],10,Co))),128))])):C("",!0),(!e.haveImportBtn&&e.keyword?e.store.importTokenListObj.hasOwnProperty(e.keyword):!e.showImportBtn||!e.keyword)?(a(),r("div",To,[(a(),r(H,null,Q(["Default","Imported"],(s,b)=>n("div",{key:b,class:N(["item-container",e.currentTokenTab==s?"item-container-active item-container":"item-container"]),onClick:()=>{e.currentTab=e.t("tab.all"),e.currentTokenTab=s}},[e.chainName=="Sui"||e.chainName=="Aptos"&&s!=="Imported"?(a(),r("div",Io,[e.showDefaultTip&&s=="Default"&&e.currentTokenTab=="Imported"?(a(),G(F,{key:0,placement:"top","arrow-point-at-center":""},{title:g(()=>[So]),default:g(()=>[Ao]),_:1})):(a(),r("div",Oo,f(s),1))])):C("",!0)],10,Lo)),64))])):C("",!0),Bo,e.currentTokenTab=="Default"&&!e.keyword?(a(),r("div",Po,[(a(!0),r(H,null,Q(e.tabList,(s,b)=>(a(),r("div",{key:b,class:N(["type-container",e.currentTab==s?"type-container-active type-container":"type-container"]),onClick:A=>e.currentTab=s},[s!==null&&s!=="test"?(a(),r("div",Do,f(s),1)):C("",!0)],10,$o))),128))])):C("",!0),((L=e.tokenList)==null?void 0:L.length)>0&&e.currentTokenTab!=="Default"&&!e.keyword?(a(),r("div",jo,[n("div",No,[n("div",Eo,f(((Z=e.tokenList)==null?void 0:Z.length)+" Custom Tokens"),1)]),n("div",{class:"type-container type-clear",onClick:h[2]||(h[2]=s=>e.clearAllImportToken())},Uo)])):C("",!0),n("div",Fo,[M(T,null,{default:g(()=>[e.tokenList&&e.tokenList.length>0?(a(),r("ul",Ro,[(a(!0),r(H,null,Q(e.tokenList,s=>{var b,A;return a(),r("li",{key:s.address,class:N(s.unusable&&e.isAllowBan?"unusable":""),onClick:m=>e.toSelect(s)},[n("div",zo,[le(n("img",Zo,null,512),[[S,e.getCoinIcon(s)]]),s.isSelfBuilt?(a(),G(F,{key:0,placement:"right","arrow-point-at-center":""},{title:g(()=>[n("span",null,f(e.t("newAdd.notCetusTokenList")),1)]),default:g(()=>[e.showImportBtn?(a(),r("img",qo)):C("",!0)]),_:1})):C("",!0),n("div",Jo,[n("div",null,[n("div",Wo,f(s.symbol),1)]),n("p",null,[te(f(s.name)+" ",1),e.chainName!=="Sui"?(a(),r("span",Yo,f(s.labels?`(${s.labels})`:""),1)):C("",!0)]),n("p",Go,[n("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:$(Te))(e.currentExplorer,"coin",s.address),target:"_blank"},[n("span",null,f(s.address&&s.address.substr(0,4))+" ... "+f(s.address&&s.address.substr(s.address.length-4,4)),1)],8,Ho),(a(),r("svg",{class:"icon","aria-hidden":"true",onClick:V(m=>e.store.copy(s&&s.address),["stop"])},Xo,8,Qo))])])]),n("div",xo,[n("div",es,[e.wallet.loading?(a(),r("div",os,[M(X,null,{default:g(()=>[M(v)]),_:1})])):s.balance&&e.wallet.connected?(a(),r("div",ss,[((b=("addCommom"in e?e.addCommom:$(U))(s.balance,s.decimals))==null?void 0:b.length)>20?(a(),G(F,{key:0,placement:"top","arrow-point-at-center":""},{title:g(()=>[n("span",null,f(("addCommom"in e?e.addCommom:$(U))(s.balance,s.decimals)),1)]),default:g(()=>{var m;return[n("div",{class:N(["balance-num",((m=("addCommom"in e?e.addCommom:$(U))(s.balance,s.decimals))==null?void 0:m.length)>20?"balance-length":""])},f(("addCommom"in e?e.addCommom:$(U))(s.balance,s.decimals)),3)]}),_:2},1024)):(a(),r("div",ls,f(("addCommom"in e?e.addCommom:$(U))(s.balance,s.decimals)),1))])):!s.balance&&e.wallet.connected?(a(),r("div",ts,"0")):(a(),r("div",ns))]),as,!e.keyword&&e.currentTokenTab!=="Default"?(a(),r("div",{key:0,class:"delete-icon",onClick:V(m=>e.deleteImportToken(s),["stop"])},cs,8,rs)):C("",!0),!e.keyword||!e.showImportBtn?(a(),r("div",{key:1,class:N(["collect-icon",(A=e.collectListObj)!=null&&A.hasOwnProperty(s.address)?"collect-icon-active":""]),onClick:V(m=>e.clickCollectIcon(s),["stop"])},vs,10,ds)):C("",!0)])],10,Ko)}),128)),e.showImportBtn?(a(),r("div",{key:0,class:"import-btn",onClick:h[3]||(h[3]=s=>e.toSelect(e.tokenList&&e.tokenList[0]))},[M(p,null,{default:g(()=>[te("Import")]),_:1})])):C("",!0)])):(a(),r("div",ps,[e.pools.isContractTokenLoaing?(a(),r("div",ks,[M(E)])):(a(),r("div",fs,[e.store.theme=="default"?(a(),r("img",bs)):(a(),r("img",hs)),e.currentTokenTab=="Default"||e.keyword?(a(),r("p",ms,f(e.t("newAdd.noTokensFound")),1)):(a(),r("p",Cs,"No Imported Tokens")),e.currentTokenTab=="Default"?(a(),r("div",_s,[te(f(e.t("newAdd.enterCoinType"))+" ",1),M(R,{type:"uniqueIdOfCoin","xlink-href":"#icon-icon_tips"})])):C("",!0)]))]))]),_:1})])])]}),_:1},8,["title","class"])}const Ds=Ye(uo,[["render",ys],["__scopeId","data-v-18b57229"]]);export{Ds as _};
