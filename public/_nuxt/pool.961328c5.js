import{aa as jh,ab as Tl,ac as Wh,a5 as lc,a1 as gr,a2 as Ve,a6 as $n,ad as Jw,ae as to,m as yr,N as Gh}from"./entry.c708ef7e.js";import{r as Kh,e as U,E as gf,G as Yw,F as yf,H as Zw,I as Vh,g as ge,J as Qw,c as La,u as xl,i as Kt,a as ii,v as Ss,K as Xh,L as Vi,T as Fn,M as eb,y as tb,x as nb,N as un,d as Sr,f as kr,O as Cn,A as Ys,P as sb,C as Zs,Q as rb,R as ib,S as ob,U as ab,V as Jh,W as cb}from"./index.df8ba82f.js";import{D as we}from"./decimal.0bdeb344.js";var Us={},ub={get exports(){return Us},set exports(e){Us=e}};(function(e){(function(t){var n=function(p){var y,m=new Float64Array(16);if(p)for(y=0;y<p.length;y++)m[y]=p[y];return m},s=function(){throw new Error("no PRNG")},r=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=n(),a=n([1]),c=n([56129,1]),u=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),g=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(p,y,m,d){p[y]=m>>24&255,p[y+1]=m>>16&255,p[y+2]=m>>8&255,p[y+3]=m&255,p[y+4]=d>>24&255,p[y+5]=d>>16&255,p[y+6]=d>>8&255,p[y+7]=d&255}function b(p,y,m,d,_){var I,$=0;for(I=0;I<_;I++)$|=p[y+I]^m[d+I];return(1&$-1>>>8)-1}function T(p,y,m,d){return b(p,y,m,d,16)}function R(p,y,m,d){return b(p,y,m,d,32)}function A(p,y,m,d){for(var _=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,I=m[0]&255|(m[1]&255)<<8|(m[2]&255)<<16|(m[3]&255)<<24,$=m[4]&255|(m[5]&255)<<8|(m[6]&255)<<16|(m[7]&255)<<24,V=m[8]&255|(m[9]&255)<<8|(m[10]&255)<<16|(m[11]&255)<<24,re=m[12]&255|(m[13]&255)<<8|(m[14]&255)<<16|(m[15]&255)<<24,fe=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,ae=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,nt=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,Ae=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,Je=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Qe=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,ct=m[16]&255|(m[17]&255)<<8|(m[18]&255)<<16|(m[19]&255)<<24,at=m[20]&255|(m[21]&255)<<8|(m[22]&255)<<16|(m[23]&255)<<24,et=m[24]&255|(m[25]&255)<<8|(m[26]&255)<<16|(m[27]&255)<<24,st=m[28]&255|(m[29]&255)<<8|(m[30]&255)<<16|(m[31]&255)<<24,tt=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Le=_,He=I,Re=$,qe=V,Ne=re,Ee=fe,W=ae,G=nt,ie=Ae,ee=Je,te=Qe,ue=ct,Ke=at,ut=et,pt=st,lt=tt,B,mt=0;mt<20;mt+=2)B=Le+Ke|0,Ne^=B<<7|B>>>32-7,B=Ne+Le|0,ie^=B<<9|B>>>32-9,B=ie+Ne|0,Ke^=B<<13|B>>>32-13,B=Ke+ie|0,Le^=B<<18|B>>>32-18,B=Ee+He|0,ee^=B<<7|B>>>32-7,B=ee+Ee|0,ut^=B<<9|B>>>32-9,B=ut+ee|0,He^=B<<13|B>>>32-13,B=He+ut|0,Ee^=B<<18|B>>>32-18,B=te+W|0,pt^=B<<7|B>>>32-7,B=pt+te|0,Re^=B<<9|B>>>32-9,B=Re+pt|0,W^=B<<13|B>>>32-13,B=W+Re|0,te^=B<<18|B>>>32-18,B=lt+ue|0,qe^=B<<7|B>>>32-7,B=qe+lt|0,G^=B<<9|B>>>32-9,B=G+qe|0,ue^=B<<13|B>>>32-13,B=ue+G|0,lt^=B<<18|B>>>32-18,B=Le+qe|0,He^=B<<7|B>>>32-7,B=He+Le|0,Re^=B<<9|B>>>32-9,B=Re+He|0,qe^=B<<13|B>>>32-13,B=qe+Re|0,Le^=B<<18|B>>>32-18,B=Ee+Ne|0,W^=B<<7|B>>>32-7,B=W+Ee|0,G^=B<<9|B>>>32-9,B=G+W|0,Ne^=B<<13|B>>>32-13,B=Ne+G|0,Ee^=B<<18|B>>>32-18,B=te+ee|0,ue^=B<<7|B>>>32-7,B=ue+te|0,ie^=B<<9|B>>>32-9,B=ie+ue|0,ee^=B<<13|B>>>32-13,B=ee+ie|0,te^=B<<18|B>>>32-18,B=lt+pt|0,Ke^=B<<7|B>>>32-7,B=Ke+lt|0,ut^=B<<9|B>>>32-9,B=ut+Ke|0,pt^=B<<13|B>>>32-13,B=pt+ut|0,lt^=B<<18|B>>>32-18;Le=Le+_|0,He=He+I|0,Re=Re+$|0,qe=qe+V|0,Ne=Ne+re|0,Ee=Ee+fe|0,W=W+ae|0,G=G+nt|0,ie=ie+Ae|0,ee=ee+Je|0,te=te+Qe|0,ue=ue+ct|0,Ke=Ke+at|0,ut=ut+et|0,pt=pt+st|0,lt=lt+tt|0,p[0]=Le>>>0&255,p[1]=Le>>>8&255,p[2]=Le>>>16&255,p[3]=Le>>>24&255,p[4]=He>>>0&255,p[5]=He>>>8&255,p[6]=He>>>16&255,p[7]=He>>>24&255,p[8]=Re>>>0&255,p[9]=Re>>>8&255,p[10]=Re>>>16&255,p[11]=Re>>>24&255,p[12]=qe>>>0&255,p[13]=qe>>>8&255,p[14]=qe>>>16&255,p[15]=qe>>>24&255,p[16]=Ne>>>0&255,p[17]=Ne>>>8&255,p[18]=Ne>>>16&255,p[19]=Ne>>>24&255,p[20]=Ee>>>0&255,p[21]=Ee>>>8&255,p[22]=Ee>>>16&255,p[23]=Ee>>>24&255,p[24]=W>>>0&255,p[25]=W>>>8&255,p[26]=W>>>16&255,p[27]=W>>>24&255,p[28]=G>>>0&255,p[29]=G>>>8&255,p[30]=G>>>16&255,p[31]=G>>>24&255,p[32]=ie>>>0&255,p[33]=ie>>>8&255,p[34]=ie>>>16&255,p[35]=ie>>>24&255,p[36]=ee>>>0&255,p[37]=ee>>>8&255,p[38]=ee>>>16&255,p[39]=ee>>>24&255,p[40]=te>>>0&255,p[41]=te>>>8&255,p[42]=te>>>16&255,p[43]=te>>>24&255,p[44]=ue>>>0&255,p[45]=ue>>>8&255,p[46]=ue>>>16&255,p[47]=ue>>>24&255,p[48]=Ke>>>0&255,p[49]=Ke>>>8&255,p[50]=Ke>>>16&255,p[51]=Ke>>>24&255,p[52]=ut>>>0&255,p[53]=ut>>>8&255,p[54]=ut>>>16&255,p[55]=ut>>>24&255,p[56]=pt>>>0&255,p[57]=pt>>>8&255,p[58]=pt>>>16&255,p[59]=pt>>>24&255,p[60]=lt>>>0&255,p[61]=lt>>>8&255,p[62]=lt>>>16&255,p[63]=lt>>>24&255}function x(p,y,m,d){for(var _=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,I=m[0]&255|(m[1]&255)<<8|(m[2]&255)<<16|(m[3]&255)<<24,$=m[4]&255|(m[5]&255)<<8|(m[6]&255)<<16|(m[7]&255)<<24,V=m[8]&255|(m[9]&255)<<8|(m[10]&255)<<16|(m[11]&255)<<24,re=m[12]&255|(m[13]&255)<<8|(m[14]&255)<<16|(m[15]&255)<<24,fe=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,ae=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,nt=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,Ae=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,Je=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Qe=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,ct=m[16]&255|(m[17]&255)<<8|(m[18]&255)<<16|(m[19]&255)<<24,at=m[20]&255|(m[21]&255)<<8|(m[22]&255)<<16|(m[23]&255)<<24,et=m[24]&255|(m[25]&255)<<8|(m[26]&255)<<16|(m[27]&255)<<24,st=m[28]&255|(m[29]&255)<<8|(m[30]&255)<<16|(m[31]&255)<<24,tt=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Le=_,He=I,Re=$,qe=V,Ne=re,Ee=fe,W=ae,G=nt,ie=Ae,ee=Je,te=Qe,ue=ct,Ke=at,ut=et,pt=st,lt=tt,B,mt=0;mt<20;mt+=2)B=Le+Ke|0,Ne^=B<<7|B>>>32-7,B=Ne+Le|0,ie^=B<<9|B>>>32-9,B=ie+Ne|0,Ke^=B<<13|B>>>32-13,B=Ke+ie|0,Le^=B<<18|B>>>32-18,B=Ee+He|0,ee^=B<<7|B>>>32-7,B=ee+Ee|0,ut^=B<<9|B>>>32-9,B=ut+ee|0,He^=B<<13|B>>>32-13,B=He+ut|0,Ee^=B<<18|B>>>32-18,B=te+W|0,pt^=B<<7|B>>>32-7,B=pt+te|0,Re^=B<<9|B>>>32-9,B=Re+pt|0,W^=B<<13|B>>>32-13,B=W+Re|0,te^=B<<18|B>>>32-18,B=lt+ue|0,qe^=B<<7|B>>>32-7,B=qe+lt|0,G^=B<<9|B>>>32-9,B=G+qe|0,ue^=B<<13|B>>>32-13,B=ue+G|0,lt^=B<<18|B>>>32-18,B=Le+qe|0,He^=B<<7|B>>>32-7,B=He+Le|0,Re^=B<<9|B>>>32-9,B=Re+He|0,qe^=B<<13|B>>>32-13,B=qe+Re|0,Le^=B<<18|B>>>32-18,B=Ee+Ne|0,W^=B<<7|B>>>32-7,B=W+Ee|0,G^=B<<9|B>>>32-9,B=G+W|0,Ne^=B<<13|B>>>32-13,B=Ne+G|0,Ee^=B<<18|B>>>32-18,B=te+ee|0,ue^=B<<7|B>>>32-7,B=ue+te|0,ie^=B<<9|B>>>32-9,B=ie+ue|0,ee^=B<<13|B>>>32-13,B=ee+ie|0,te^=B<<18|B>>>32-18,B=lt+pt|0,Ke^=B<<7|B>>>32-7,B=Ke+lt|0,ut^=B<<9|B>>>32-9,B=ut+Ke|0,pt^=B<<13|B>>>32-13,B=pt+ut|0,lt^=B<<18|B>>>32-18;p[0]=Le>>>0&255,p[1]=Le>>>8&255,p[2]=Le>>>16&255,p[3]=Le>>>24&255,p[4]=Ee>>>0&255,p[5]=Ee>>>8&255,p[6]=Ee>>>16&255,p[7]=Ee>>>24&255,p[8]=te>>>0&255,p[9]=te>>>8&255,p[10]=te>>>16&255,p[11]=te>>>24&255,p[12]=lt>>>0&255,p[13]=lt>>>8&255,p[14]=lt>>>16&255,p[15]=lt>>>24&255,p[16]=W>>>0&255,p[17]=W>>>8&255,p[18]=W>>>16&255,p[19]=W>>>24&255,p[20]=G>>>0&255,p[21]=G>>>8&255,p[22]=G>>>16&255,p[23]=G>>>24&255,p[24]=ie>>>0&255,p[25]=ie>>>8&255,p[26]=ie>>>16&255,p[27]=ie>>>24&255,p[28]=ee>>>0&255,p[29]=ee>>>8&255,p[30]=ee>>>16&255,p[31]=ee>>>24&255}function E(p,y,m,d){A(p,y,m,d)}function S(p,y,m,d){x(p,y,m,d)}var q=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function O(p,y,m,d,_,I,$){var V=new Uint8Array(16),re=new Uint8Array(64),fe,ae;for(ae=0;ae<16;ae++)V[ae]=0;for(ae=0;ae<8;ae++)V[ae]=I[ae];for(;_>=64;){for(E(re,V,$,q),ae=0;ae<64;ae++)p[y+ae]=m[d+ae]^re[ae];for(fe=1,ae=8;ae<16;ae++)fe=fe+(V[ae]&255)|0,V[ae]=fe&255,fe>>>=8;_-=64,y+=64,d+=64}if(_>0)for(E(re,V,$,q),ae=0;ae<_;ae++)p[y+ae]=m[d+ae]^re[ae];return 0}function F(p,y,m,d,_){var I=new Uint8Array(16),$=new Uint8Array(64),V,re;for(re=0;re<16;re++)I[re]=0;for(re=0;re<8;re++)I[re]=d[re];for(;m>=64;){for(E($,I,_,q),re=0;re<64;re++)p[y+re]=$[re];for(V=1,re=8;re<16;re++)V=V+(I[re]&255)|0,I[re]=V&255,V>>>=8;m-=64,y+=64}if(m>0)for(E($,I,_,q),re=0;re<m;re++)p[y+re]=$[re];return 0}function Y(p,y,m,d,_){var I=new Uint8Array(32);S(I,d,_,q);for(var $=new Uint8Array(8),V=0;V<8;V++)$[V]=d[V+16];return F(p,y,m,$,I)}function Se(p,y,m,d,_,I,$){var V=new Uint8Array(32);S(V,I,$,q);for(var re=new Uint8Array(8),fe=0;fe<8;fe++)re[fe]=I[fe+16];return O(p,y,m,d,_,re,V)}var Oe=function(p){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var y,m,d,_,I,$,V,re;y=p[0]&255|(p[1]&255)<<8,this.r[0]=y&8191,m=p[2]&255|(p[3]&255)<<8,this.r[1]=(y>>>13|m<<3)&8191,d=p[4]&255|(p[5]&255)<<8,this.r[2]=(m>>>10|d<<6)&7939,_=p[6]&255|(p[7]&255)<<8,this.r[3]=(d>>>7|_<<9)&8191,I=p[8]&255|(p[9]&255)<<8,this.r[4]=(_>>>4|I<<12)&255,this.r[5]=I>>>1&8190,$=p[10]&255|(p[11]&255)<<8,this.r[6]=(I>>>14|$<<2)&8191,V=p[12]&255|(p[13]&255)<<8,this.r[7]=($>>>11|V<<5)&8065,re=p[14]&255|(p[15]&255)<<8,this.r[8]=(V>>>8|re<<8)&8191,this.r[9]=re>>>5&127,this.pad[0]=p[16]&255|(p[17]&255)<<8,this.pad[1]=p[18]&255|(p[19]&255)<<8,this.pad[2]=p[20]&255|(p[21]&255)<<8,this.pad[3]=p[22]&255|(p[23]&255)<<8,this.pad[4]=p[24]&255|(p[25]&255)<<8,this.pad[5]=p[26]&255|(p[27]&255)<<8,this.pad[6]=p[28]&255|(p[29]&255)<<8,this.pad[7]=p[30]&255|(p[31]&255)<<8};Oe.prototype.blocks=function(p,y,m){for(var d=this.fin?0:2048,_,I,$,V,re,fe,ae,nt,Ae,Je,Qe,ct,at,et,st,tt,Le,He,Re,qe=this.h[0],Ne=this.h[1],Ee=this.h[2],W=this.h[3],G=this.h[4],ie=this.h[5],ee=this.h[6],te=this.h[7],ue=this.h[8],Ke=this.h[9],ut=this.r[0],pt=this.r[1],lt=this.r[2],B=this.r[3],mt=this.r[4],Bt=this.r[5],Pt=this.r[6],gt=this.r[7],At=this.r[8],Et=this.r[9];m>=16;)_=p[y+0]&255|(p[y+1]&255)<<8,qe+=_&8191,I=p[y+2]&255|(p[y+3]&255)<<8,Ne+=(_>>>13|I<<3)&8191,$=p[y+4]&255|(p[y+5]&255)<<8,Ee+=(I>>>10|$<<6)&8191,V=p[y+6]&255|(p[y+7]&255)<<8,W+=($>>>7|V<<9)&8191,re=p[y+8]&255|(p[y+9]&255)<<8,G+=(V>>>4|re<<12)&8191,ie+=re>>>1&8191,fe=p[y+10]&255|(p[y+11]&255)<<8,ee+=(re>>>14|fe<<2)&8191,ae=p[y+12]&255|(p[y+13]&255)<<8,te+=(fe>>>11|ae<<5)&8191,nt=p[y+14]&255|(p[y+15]&255)<<8,ue+=(ae>>>8|nt<<8)&8191,Ke+=nt>>>5|d,Ae=0,Je=Ae,Je+=qe*ut,Je+=Ne*(5*Et),Je+=Ee*(5*At),Je+=W*(5*gt),Je+=G*(5*Pt),Ae=Je>>>13,Je&=8191,Je+=ie*(5*Bt),Je+=ee*(5*mt),Je+=te*(5*B),Je+=ue*(5*lt),Je+=Ke*(5*pt),Ae+=Je>>>13,Je&=8191,Qe=Ae,Qe+=qe*pt,Qe+=Ne*ut,Qe+=Ee*(5*Et),Qe+=W*(5*At),Qe+=G*(5*gt),Ae=Qe>>>13,Qe&=8191,Qe+=ie*(5*Pt),Qe+=ee*(5*Bt),Qe+=te*(5*mt),Qe+=ue*(5*B),Qe+=Ke*(5*lt),Ae+=Qe>>>13,Qe&=8191,ct=Ae,ct+=qe*lt,ct+=Ne*pt,ct+=Ee*ut,ct+=W*(5*Et),ct+=G*(5*At),Ae=ct>>>13,ct&=8191,ct+=ie*(5*gt),ct+=ee*(5*Pt),ct+=te*(5*Bt),ct+=ue*(5*mt),ct+=Ke*(5*B),Ae+=ct>>>13,ct&=8191,at=Ae,at+=qe*B,at+=Ne*lt,at+=Ee*pt,at+=W*ut,at+=G*(5*Et),Ae=at>>>13,at&=8191,at+=ie*(5*At),at+=ee*(5*gt),at+=te*(5*Pt),at+=ue*(5*Bt),at+=Ke*(5*mt),Ae+=at>>>13,at&=8191,et=Ae,et+=qe*mt,et+=Ne*B,et+=Ee*lt,et+=W*pt,et+=G*ut,Ae=et>>>13,et&=8191,et+=ie*(5*Et),et+=ee*(5*At),et+=te*(5*gt),et+=ue*(5*Pt),et+=Ke*(5*Bt),Ae+=et>>>13,et&=8191,st=Ae,st+=qe*Bt,st+=Ne*mt,st+=Ee*B,st+=W*lt,st+=G*pt,Ae=st>>>13,st&=8191,st+=ie*ut,st+=ee*(5*Et),st+=te*(5*At),st+=ue*(5*gt),st+=Ke*(5*Pt),Ae+=st>>>13,st&=8191,tt=Ae,tt+=qe*Pt,tt+=Ne*Bt,tt+=Ee*mt,tt+=W*B,tt+=G*lt,Ae=tt>>>13,tt&=8191,tt+=ie*pt,tt+=ee*ut,tt+=te*(5*Et),tt+=ue*(5*At),tt+=Ke*(5*gt),Ae+=tt>>>13,tt&=8191,Le=Ae,Le+=qe*gt,Le+=Ne*Pt,Le+=Ee*Bt,Le+=W*mt,Le+=G*B,Ae=Le>>>13,Le&=8191,Le+=ie*lt,Le+=ee*pt,Le+=te*ut,Le+=ue*(5*Et),Le+=Ke*(5*At),Ae+=Le>>>13,Le&=8191,He=Ae,He+=qe*At,He+=Ne*gt,He+=Ee*Pt,He+=W*Bt,He+=G*mt,Ae=He>>>13,He&=8191,He+=ie*B,He+=ee*lt,He+=te*pt,He+=ue*ut,He+=Ke*(5*Et),Ae+=He>>>13,He&=8191,Re=Ae,Re+=qe*Et,Re+=Ne*At,Re+=Ee*gt,Re+=W*Pt,Re+=G*Bt,Ae=Re>>>13,Re&=8191,Re+=ie*mt,Re+=ee*B,Re+=te*lt,Re+=ue*pt,Re+=Ke*ut,Ae+=Re>>>13,Re&=8191,Ae=(Ae<<2)+Ae|0,Ae=Ae+Je|0,Je=Ae&8191,Ae=Ae>>>13,Qe+=Ae,qe=Je,Ne=Qe,Ee=ct,W=at,G=et,ie=st,ee=tt,te=Le,ue=He,Ke=Re,y+=16,m-=16;this.h[0]=qe,this.h[1]=Ne,this.h[2]=Ee,this.h[3]=W,this.h[4]=G,this.h[5]=ie,this.h[6]=ee,this.h[7]=te,this.h[8]=ue,this.h[9]=Ke},Oe.prototype.finish=function(p,y){var m=new Uint16Array(10),d,_,I,$;if(this.leftover){for($=this.leftover,this.buffer[$++]=1;$<16;$++)this.buffer[$]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(d=this.h[1]>>>13,this.h[1]&=8191,$=2;$<10;$++)this.h[$]+=d,d=this.h[$]>>>13,this.h[$]&=8191;for(this.h[0]+=d*5,d=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=d,d=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=d,m[0]=this.h[0]+5,d=m[0]>>>13,m[0]&=8191,$=1;$<10;$++)m[$]=this.h[$]+d,d=m[$]>>>13,m[$]&=8191;for(m[9]-=8192,_=(d^1)-1,$=0;$<10;$++)m[$]&=_;for(_=~_,$=0;$<10;$++)this.h[$]=this.h[$]&_|m[$];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,I=this.h[0]+this.pad[0],this.h[0]=I&65535,$=1;$<8;$++)I=(this.h[$]+this.pad[$]|0)+(I>>>16)|0,this.h[$]=I&65535;p[y+0]=this.h[0]>>>0&255,p[y+1]=this.h[0]>>>8&255,p[y+2]=this.h[1]>>>0&255,p[y+3]=this.h[1]>>>8&255,p[y+4]=this.h[2]>>>0&255,p[y+5]=this.h[2]>>>8&255,p[y+6]=this.h[3]>>>0&255,p[y+7]=this.h[3]>>>8&255,p[y+8]=this.h[4]>>>0&255,p[y+9]=this.h[4]>>>8&255,p[y+10]=this.h[5]>>>0&255,p[y+11]=this.h[5]>>>8&255,p[y+12]=this.h[6]>>>0&255,p[y+13]=this.h[6]>>>8&255,p[y+14]=this.h[7]>>>0&255,p[y+15]=this.h[7]>>>8&255},Oe.prototype.update=function(p,y,m){var d,_;if(this.leftover){for(_=16-this.leftover,_>m&&(_=m),d=0;d<_;d++)this.buffer[this.leftover+d]=p[y+d];if(m-=_,y+=_,this.leftover+=_,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(m>=16&&(_=m-m%16,this.blocks(p,y,_),y+=_,m-=_),m){for(d=0;d<m;d++)this.buffer[this.leftover+d]=p[y+d];this.leftover+=m}};function N(p,y,m,d,_,I){var $=new Oe(I);return $.update(m,d,_),$.finish(p,y),0}function D(p,y,m,d,_,I){var $=new Uint8Array(16);return N($,0,m,d,_,I),T(p,y,$,0)}function M(p,y,m,d,_){var I;if(m<32)return-1;for(Se(p,0,y,0,m,d,_),N(p,16,p,32,m-32,p),I=0;I<16;I++)p[I]=0;return 0}function oe(p,y,m,d,_){var I,$=new Uint8Array(32);if(m<32||(Y($,0,32,d,_),D(y,16,y,32,m-32,$)!==0))return-1;for(Se(p,0,y,0,m,d,_),I=0;I<32;I++)p[I]=0;return 0}function Te(p,y){var m;for(m=0;m<16;m++)p[m]=y[m]|0}function ve(p){var y,m,d=1;for(y=0;y<16;y++)m=p[y]+d+65535,d=Math.floor(m/65536),p[y]=m-d*65536;p[0]+=d-1+37*(d-1)}function ke(p,y,m){for(var d,_=~(m-1),I=0;I<16;I++)d=_&(p[I]^y[I]),p[I]^=d,y[I]^=d}function Ce(p,y){var m,d,_,I=n(),$=n();for(m=0;m<16;m++)$[m]=y[m];for(ve($),ve($),ve($),d=0;d<2;d++){for(I[0]=$[0]-65517,m=1;m<15;m++)I[m]=$[m]-65535-(I[m-1]>>16&1),I[m-1]&=65535;I[15]=$[15]-32767-(I[14]>>16&1),_=I[15]>>16&1,I[14]&=65535,ke($,I,1-_)}for(m=0;m<16;m++)p[2*m]=$[m]&255,p[2*m+1]=$[m]>>8}function Ie(p,y){var m=new Uint8Array(32),d=new Uint8Array(32);return Ce(m,p),Ce(d,y),R(m,0,d,0)}function Me(p){var y=new Uint8Array(32);return Ce(y,p),y[0]&1}function Be(p,y){var m;for(m=0;m<16;m++)p[m]=y[2*m]+(y[2*m+1]<<8);p[15]&=32767}function De(p,y,m){for(var d=0;d<16;d++)p[d]=y[d]+m[d]}function me(p,y,m){for(var d=0;d<16;d++)p[d]=y[d]-m[d]}function le(p,y,m){var d,_,I=0,$=0,V=0,re=0,fe=0,ae=0,nt=0,Ae=0,Je=0,Qe=0,ct=0,at=0,et=0,st=0,tt=0,Le=0,He=0,Re=0,qe=0,Ne=0,Ee=0,W=0,G=0,ie=0,ee=0,te=0,ue=0,Ke=0,ut=0,pt=0,lt=0,B=m[0],mt=m[1],Bt=m[2],Pt=m[3],gt=m[4],At=m[5],Et=m[6],an=m[7],Lt=m[8],Qt=m[9],en=m[10],tn=m[11],hn=m[12],kn=m[13],Bn=m[14],Pn=m[15];d=y[0],I+=d*B,$+=d*mt,V+=d*Bt,re+=d*Pt,fe+=d*gt,ae+=d*At,nt+=d*Et,Ae+=d*an,Je+=d*Lt,Qe+=d*Qt,ct+=d*en,at+=d*tn,et+=d*hn,st+=d*kn,tt+=d*Bn,Le+=d*Pn,d=y[1],$+=d*B,V+=d*mt,re+=d*Bt,fe+=d*Pt,ae+=d*gt,nt+=d*At,Ae+=d*Et,Je+=d*an,Qe+=d*Lt,ct+=d*Qt,at+=d*en,et+=d*tn,st+=d*hn,tt+=d*kn,Le+=d*Bn,He+=d*Pn,d=y[2],V+=d*B,re+=d*mt,fe+=d*Bt,ae+=d*Pt,nt+=d*gt,Ae+=d*At,Je+=d*Et,Qe+=d*an,ct+=d*Lt,at+=d*Qt,et+=d*en,st+=d*tn,tt+=d*hn,Le+=d*kn,He+=d*Bn,Re+=d*Pn,d=y[3],re+=d*B,fe+=d*mt,ae+=d*Bt,nt+=d*Pt,Ae+=d*gt,Je+=d*At,Qe+=d*Et,ct+=d*an,at+=d*Lt,et+=d*Qt,st+=d*en,tt+=d*tn,Le+=d*hn,He+=d*kn,Re+=d*Bn,qe+=d*Pn,d=y[4],fe+=d*B,ae+=d*mt,nt+=d*Bt,Ae+=d*Pt,Je+=d*gt,Qe+=d*At,ct+=d*Et,at+=d*an,et+=d*Lt,st+=d*Qt,tt+=d*en,Le+=d*tn,He+=d*hn,Re+=d*kn,qe+=d*Bn,Ne+=d*Pn,d=y[5],ae+=d*B,nt+=d*mt,Ae+=d*Bt,Je+=d*Pt,Qe+=d*gt,ct+=d*At,at+=d*Et,et+=d*an,st+=d*Lt,tt+=d*Qt,Le+=d*en,He+=d*tn,Re+=d*hn,qe+=d*kn,Ne+=d*Bn,Ee+=d*Pn,d=y[6],nt+=d*B,Ae+=d*mt,Je+=d*Bt,Qe+=d*Pt,ct+=d*gt,at+=d*At,et+=d*Et,st+=d*an,tt+=d*Lt,Le+=d*Qt,He+=d*en,Re+=d*tn,qe+=d*hn,Ne+=d*kn,Ee+=d*Bn,W+=d*Pn,d=y[7],Ae+=d*B,Je+=d*mt,Qe+=d*Bt,ct+=d*Pt,at+=d*gt,et+=d*At,st+=d*Et,tt+=d*an,Le+=d*Lt,He+=d*Qt,Re+=d*en,qe+=d*tn,Ne+=d*hn,Ee+=d*kn,W+=d*Bn,G+=d*Pn,d=y[8],Je+=d*B,Qe+=d*mt,ct+=d*Bt,at+=d*Pt,et+=d*gt,st+=d*At,tt+=d*Et,Le+=d*an,He+=d*Lt,Re+=d*Qt,qe+=d*en,Ne+=d*tn,Ee+=d*hn,W+=d*kn,G+=d*Bn,ie+=d*Pn,d=y[9],Qe+=d*B,ct+=d*mt,at+=d*Bt,et+=d*Pt,st+=d*gt,tt+=d*At,Le+=d*Et,He+=d*an,Re+=d*Lt,qe+=d*Qt,Ne+=d*en,Ee+=d*tn,W+=d*hn,G+=d*kn,ie+=d*Bn,ee+=d*Pn,d=y[10],ct+=d*B,at+=d*mt,et+=d*Bt,st+=d*Pt,tt+=d*gt,Le+=d*At,He+=d*Et,Re+=d*an,qe+=d*Lt,Ne+=d*Qt,Ee+=d*en,W+=d*tn,G+=d*hn,ie+=d*kn,ee+=d*Bn,te+=d*Pn,d=y[11],at+=d*B,et+=d*mt,st+=d*Bt,tt+=d*Pt,Le+=d*gt,He+=d*At,Re+=d*Et,qe+=d*an,Ne+=d*Lt,Ee+=d*Qt,W+=d*en,G+=d*tn,ie+=d*hn,ee+=d*kn,te+=d*Bn,ue+=d*Pn,d=y[12],et+=d*B,st+=d*mt,tt+=d*Bt,Le+=d*Pt,He+=d*gt,Re+=d*At,qe+=d*Et,Ne+=d*an,Ee+=d*Lt,W+=d*Qt,G+=d*en,ie+=d*tn,ee+=d*hn,te+=d*kn,ue+=d*Bn,Ke+=d*Pn,d=y[13],st+=d*B,tt+=d*mt,Le+=d*Bt,He+=d*Pt,Re+=d*gt,qe+=d*At,Ne+=d*Et,Ee+=d*an,W+=d*Lt,G+=d*Qt,ie+=d*en,ee+=d*tn,te+=d*hn,ue+=d*kn,Ke+=d*Bn,ut+=d*Pn,d=y[14],tt+=d*B,Le+=d*mt,He+=d*Bt,Re+=d*Pt,qe+=d*gt,Ne+=d*At,Ee+=d*Et,W+=d*an,G+=d*Lt,ie+=d*Qt,ee+=d*en,te+=d*tn,ue+=d*hn,Ke+=d*kn,ut+=d*Bn,pt+=d*Pn,d=y[15],Le+=d*B,He+=d*mt,Re+=d*Bt,qe+=d*Pt,Ne+=d*gt,Ee+=d*At,W+=d*Et,G+=d*an,ie+=d*Lt,ee+=d*Qt,te+=d*en,ue+=d*tn,Ke+=d*hn,ut+=d*kn,pt+=d*Bn,lt+=d*Pn,I+=38*He,$+=38*Re,V+=38*qe,re+=38*Ne,fe+=38*Ee,ae+=38*W,nt+=38*G,Ae+=38*ie,Je+=38*ee,Qe+=38*te,ct+=38*ue,at+=38*Ke,et+=38*ut,st+=38*pt,tt+=38*lt,_=1,d=I+_+65535,_=Math.floor(d/65536),I=d-_*65536,d=$+_+65535,_=Math.floor(d/65536),$=d-_*65536,d=V+_+65535,_=Math.floor(d/65536),V=d-_*65536,d=re+_+65535,_=Math.floor(d/65536),re=d-_*65536,d=fe+_+65535,_=Math.floor(d/65536),fe=d-_*65536,d=ae+_+65535,_=Math.floor(d/65536),ae=d-_*65536,d=nt+_+65535,_=Math.floor(d/65536),nt=d-_*65536,d=Ae+_+65535,_=Math.floor(d/65536),Ae=d-_*65536,d=Je+_+65535,_=Math.floor(d/65536),Je=d-_*65536,d=Qe+_+65535,_=Math.floor(d/65536),Qe=d-_*65536,d=ct+_+65535,_=Math.floor(d/65536),ct=d-_*65536,d=at+_+65535,_=Math.floor(d/65536),at=d-_*65536,d=et+_+65535,_=Math.floor(d/65536),et=d-_*65536,d=st+_+65535,_=Math.floor(d/65536),st=d-_*65536,d=tt+_+65535,_=Math.floor(d/65536),tt=d-_*65536,d=Le+_+65535,_=Math.floor(d/65536),Le=d-_*65536,I+=_-1+37*(_-1),_=1,d=I+_+65535,_=Math.floor(d/65536),I=d-_*65536,d=$+_+65535,_=Math.floor(d/65536),$=d-_*65536,d=V+_+65535,_=Math.floor(d/65536),V=d-_*65536,d=re+_+65535,_=Math.floor(d/65536),re=d-_*65536,d=fe+_+65535,_=Math.floor(d/65536),fe=d-_*65536,d=ae+_+65535,_=Math.floor(d/65536),ae=d-_*65536,d=nt+_+65535,_=Math.floor(d/65536),nt=d-_*65536,d=Ae+_+65535,_=Math.floor(d/65536),Ae=d-_*65536,d=Je+_+65535,_=Math.floor(d/65536),Je=d-_*65536,d=Qe+_+65535,_=Math.floor(d/65536),Qe=d-_*65536,d=ct+_+65535,_=Math.floor(d/65536),ct=d-_*65536,d=at+_+65535,_=Math.floor(d/65536),at=d-_*65536,d=et+_+65535,_=Math.floor(d/65536),et=d-_*65536,d=st+_+65535,_=Math.floor(d/65536),st=d-_*65536,d=tt+_+65535,_=Math.floor(d/65536),tt=d-_*65536,d=Le+_+65535,_=Math.floor(d/65536),Le=d-_*65536,I+=_-1+37*(_-1),p[0]=I,p[1]=$,p[2]=V,p[3]=re,p[4]=fe,p[5]=ae,p[6]=nt,p[7]=Ae,p[8]=Je,p[9]=Qe,p[10]=ct,p[11]=at,p[12]=et,p[13]=st,p[14]=tt,p[15]=Le}function je(p,y){le(p,y,y)}function xt(p,y){var m=n(),d;for(d=0;d<16;d++)m[d]=y[d];for(d=253;d>=0;d--)je(m,m),d!==2&&d!==4&&le(m,m,y);for(d=0;d<16;d++)p[d]=m[d]}function Rt(p,y){var m=n(),d;for(d=0;d<16;d++)m[d]=y[d];for(d=250;d>=0;d--)je(m,m),d!==1&&le(m,m,y);for(d=0;d<16;d++)p[d]=m[d]}function ze(p,y,m){var d=new Uint8Array(32),_=new Float64Array(80),I,$,V=n(),re=n(),fe=n(),ae=n(),nt=n(),Ae=n();for($=0;$<31;$++)d[$]=y[$];for(d[31]=y[31]&127|64,d[0]&=248,Be(_,m),$=0;$<16;$++)re[$]=_[$],ae[$]=V[$]=fe[$]=0;for(V[0]=ae[0]=1,$=254;$>=0;--$)I=d[$>>>3]>>>($&7)&1,ke(V,re,I),ke(fe,ae,I),De(nt,V,fe),me(V,V,fe),De(fe,re,ae),me(re,re,ae),je(ae,nt),je(Ae,V),le(V,fe,V),le(fe,re,nt),De(nt,V,fe),me(V,V,fe),je(re,V),me(fe,ae,Ae),le(V,fe,c),De(V,V,ae),le(fe,fe,V),le(V,ae,Ae),le(ae,re,_),je(re,nt),ke(V,re,I),ke(fe,ae,I);for($=0;$<16;$++)_[$+16]=V[$],_[$+32]=fe[$],_[$+48]=re[$],_[$+64]=ae[$];var Je=_.subarray(32),Qe=_.subarray(16);return xt(Je,Je),le(Qe,Qe,Je),Ce(p,Qe),0}function ft(p,y){return ze(p,y,i)}function qt(p,y){return s(y,32),ft(p,y)}function En(p,y,m){var d=new Uint8Array(32);return ze(d,m,y),S(p,r,d,q)}var on=M,X=oe;function ne(p,y,m,d,_,I){var $=new Uint8Array(32);return En($,_,I),on(p,y,m,d,$)}function ye(p,y,m,d,_,I){var $=new Uint8Array(32);return En($,_,I),X(p,y,m,d,$)}var be=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Pe(p,y,m,d){for(var _=new Int32Array(16),I=new Int32Array(16),$,V,re,fe,ae,nt,Ae,Je,Qe,ct,at,et,st,tt,Le,He,Re,qe,Ne,Ee,W,G,ie,ee,te,ue,Ke=p[0],ut=p[1],pt=p[2],lt=p[3],B=p[4],mt=p[5],Bt=p[6],Pt=p[7],gt=y[0],At=y[1],Et=y[2],an=y[3],Lt=y[4],Qt=y[5],en=y[6],tn=y[7],hn=0;d>=128;){for(Ne=0;Ne<16;Ne++)Ee=8*Ne+hn,_[Ne]=m[Ee+0]<<24|m[Ee+1]<<16|m[Ee+2]<<8|m[Ee+3],I[Ne]=m[Ee+4]<<24|m[Ee+5]<<16|m[Ee+6]<<8|m[Ee+7];for(Ne=0;Ne<80;Ne++)if($=Ke,V=ut,re=pt,fe=lt,ae=B,nt=mt,Ae=Bt,Je=Pt,Qe=gt,ct=At,at=Et,et=an,st=Lt,tt=Qt,Le=en,He=tn,W=Pt,G=tn,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=(B>>>14|Lt<<32-14)^(B>>>18|Lt<<32-18)^(Lt>>>41-32|B<<32-(41-32)),G=(Lt>>>14|B<<32-14)^(Lt>>>18|B<<32-18)^(B>>>41-32|Lt<<32-(41-32)),ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,W=B&mt^~B&Bt,G=Lt&Qt^~Lt&en,ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,W=be[Ne*2],G=be[Ne*2+1],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,W=_[Ne%16],G=I[Ne%16],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,Re=te&65535|ue<<16,qe=ie&65535|ee<<16,W=Re,G=qe,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=(Ke>>>28|gt<<32-28)^(gt>>>34-32|Ke<<32-(34-32))^(gt>>>39-32|Ke<<32-(39-32)),G=(gt>>>28|Ke<<32-28)^(Ke>>>34-32|gt<<32-(34-32))^(Ke>>>39-32|gt<<32-(39-32)),ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,W=Ke&ut^Ke&pt^ut&pt,G=gt&At^gt&Et^At&Et,ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,Je=te&65535|ue<<16,He=ie&65535|ee<<16,W=fe,G=et,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=Re,G=qe,ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,fe=te&65535|ue<<16,et=ie&65535|ee<<16,ut=$,pt=V,lt=re,B=fe,mt=ae,Bt=nt,Pt=Ae,Ke=Je,At=Qe,Et=ct,an=at,Lt=et,Qt=st,en=tt,tn=Le,gt=He,Ne%16===15)for(Ee=0;Ee<16;Ee++)W=_[Ee],G=I[Ee],ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=_[(Ee+9)%16],G=I[(Ee+9)%16],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,Re=_[(Ee+1)%16],qe=I[(Ee+1)%16],W=(Re>>>1|qe<<32-1)^(Re>>>8|qe<<32-8)^Re>>>7,G=(qe>>>1|Re<<32-1)^(qe>>>8|Re<<32-8)^(qe>>>7|Re<<32-7),ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,Re=_[(Ee+14)%16],qe=I[(Ee+14)%16],W=(Re>>>19|qe<<32-19)^(qe>>>61-32|Re<<32-(61-32))^Re>>>6,G=(qe>>>19|Re<<32-19)^(Re>>>61-32|qe<<32-(61-32))^(qe>>>6|Re<<32-6),ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,_[Ee]=te&65535|ue<<16,I[Ee]=ie&65535|ee<<16;W=Ke,G=gt,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=p[0],G=y[0],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,p[0]=Ke=te&65535|ue<<16,y[0]=gt=ie&65535|ee<<16,W=ut,G=At,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=p[1],G=y[1],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,p[1]=ut=te&65535|ue<<16,y[1]=At=ie&65535|ee<<16,W=pt,G=Et,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=p[2],G=y[2],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,p[2]=pt=te&65535|ue<<16,y[2]=Et=ie&65535|ee<<16,W=lt,G=an,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=p[3],G=y[3],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,p[3]=lt=te&65535|ue<<16,y[3]=an=ie&65535|ee<<16,W=B,G=Lt,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=p[4],G=y[4],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,p[4]=B=te&65535|ue<<16,y[4]=Lt=ie&65535|ee<<16,W=mt,G=Qt,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=p[5],G=y[5],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,p[5]=mt=te&65535|ue<<16,y[5]=Qt=ie&65535|ee<<16,W=Bt,G=en,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=p[6],G=y[6],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,p[6]=Bt=te&65535|ue<<16,y[6]=en=ie&65535|ee<<16,W=Pt,G=tn,ie=G&65535,ee=G>>>16,te=W&65535,ue=W>>>16,W=p[7],G=y[7],ie+=G&65535,ee+=G>>>16,te+=W&65535,ue+=W>>>16,ee+=ie>>>16,te+=ee>>>16,ue+=te>>>16,p[7]=Pt=te&65535|ue<<16,y[7]=tn=ie&65535|ee<<16,hn+=128,d-=128}return d}function Fe(p,y,m){var d=new Int32Array(8),_=new Int32Array(8),I=new Uint8Array(256),$,V=m;for(d[0]=1779033703,d[1]=3144134277,d[2]=1013904242,d[3]=2773480762,d[4]=1359893119,d[5]=2600822924,d[6]=528734635,d[7]=1541459225,_[0]=4089235720,_[1]=2227873595,_[2]=4271175723,_[3]=1595750129,_[4]=2917565137,_[5]=725511199,_[6]=4215389547,_[7]=327033209,Pe(d,_,y,m),m%=128,$=0;$<m;$++)I[$]=y[V-m+$];for(I[m]=128,m=256-128*(m<112?1:0),I[m-9]=0,w(I,m-8,V/536870912|0,V<<3),Pe(d,_,I,m),$=0;$<8;$++)w(p,8*$,d[$],_[$]);return 0}function Xe(p,y){var m=n(),d=n(),_=n(),I=n(),$=n(),V=n(),re=n(),fe=n(),ae=n();me(m,p[1],p[0]),me(ae,y[1],y[0]),le(m,m,ae),De(d,p[0],p[1]),De(ae,y[0],y[1]),le(d,d,ae),le(_,p[3],y[3]),le(_,_,l),le(I,p[2],y[2]),De(I,I,I),me($,d,m),me(V,I,_),De(re,I,_),De(fe,d,m),le(p[0],$,V),le(p[1],fe,re),le(p[2],re,V),le(p[3],$,fe)}function ht(p,y,m){var d;for(d=0;d<4;d++)ke(p[d],y[d],m)}function vt(p,y){var m=n(),d=n(),_=n();xt(_,y[2]),le(m,y[0],_),le(d,y[1],_),Ce(p,d),p[31]^=Me(m)<<7}function St(p,y,m){var d,_;for(Te(p[0],o),Te(p[1],a),Te(p[2],a),Te(p[3],o),_=255;_>=0;--_)d=m[_/8|0]>>(_&7)&1,ht(p,y,d),Xe(y,p),Xe(p,p),ht(p,y,d)}function bt(p,y){var m=[n(),n(),n(),n()];Te(m[0],f),Te(m[1],h),Te(m[2],a),le(m[3],f,h),St(p,m,y)}function _t(p,y,m){var d=new Uint8Array(64),_=[n(),n(),n(),n()],I;for(m||s(y,32),Fe(d,y,32),d[0]&=248,d[31]&=127,d[31]|=64,bt(_,d),vt(p,_),I=0;I<32;I++)y[I+32]=p[I];return 0}var Mt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Ft(p,y){var m,d,_,I;for(d=63;d>=32;--d){for(m=0,_=d-32,I=d-12;_<I;++_)y[_]+=m-16*y[d]*Mt[_-(d-32)],m=Math.floor((y[_]+128)/256),y[_]-=m*256;y[_]+=m,y[d]=0}for(m=0,_=0;_<32;_++)y[_]+=m-(y[31]>>4)*Mt[_],m=y[_]>>8,y[_]&=255;for(_=0;_<32;_++)y[_]-=m*Mt[_];for(d=0;d<32;d++)y[d+1]+=y[d]>>8,p[d]=y[d]&255}function Jt(p){var y=new Float64Array(64),m;for(m=0;m<64;m++)y[m]=p[m];for(m=0;m<64;m++)p[m]=0;Ft(p,y)}function Zt(p,y,m,d){var _=new Uint8Array(64),I=new Uint8Array(64),$=new Uint8Array(64),V,re,fe=new Float64Array(64),ae=[n(),n(),n(),n()];Fe(_,d,32),_[0]&=248,_[31]&=127,_[31]|=64;var nt=m+64;for(V=0;V<m;V++)p[64+V]=y[V];for(V=0;V<32;V++)p[32+V]=_[32+V];for(Fe($,p.subarray(32),m+32),Jt($),bt(ae,$),vt(p,ae),V=32;V<64;V++)p[V]=d[V];for(Fe(I,p,m+64),Jt(I),V=0;V<64;V++)fe[V]=0;for(V=0;V<32;V++)fe[V]=$[V];for(V=0;V<32;V++)for(re=0;re<32;re++)fe[V+re]+=I[V]*_[re];return Ft(p.subarray(32),fe),nt}function Yn(p,y){var m=n(),d=n(),_=n(),I=n(),$=n(),V=n(),re=n();return Te(p[2],a),Be(p[1],y),je(_,p[1]),le(I,_,u),me(_,_,p[2]),De(I,p[2],I),je($,I),je(V,$),le(re,V,$),le(m,re,_),le(m,m,I),Rt(m,m),le(m,m,_),le(m,m,I),le(m,m,I),le(p[0],m,I),je(d,p[0]),le(d,d,I),Ie(d,_)&&le(p[0],p[0],g),je(d,p[0]),le(d,d,I),Ie(d,_)?-1:(Me(p[0])===y[31]>>7&&me(p[0],o,p[0]),le(p[3],p[0],p[1]),0)}function zn(p,y,m,d){var _,I=new Uint8Array(32),$=new Uint8Array(64),V=[n(),n(),n(),n()],re=[n(),n(),n(),n()];if(m<64||Yn(re,d))return-1;for(_=0;_<m;_++)p[_]=y[_];for(_=0;_<32;_++)p[_+32]=d[_];if(Fe($,p,m),Jt($),St(V,re,$),bt(re,y.subarray(32)),Xe(V,re),vt(I,V),m-=64,R(y,0,I,0)){for(_=0;_<m;_++)p[_]=0;return-1}for(_=0;_<m;_++)p[_]=y[_+64];return m}var Zn=32,Qn=24,_n=32,Ls=16,Js=32,v=32,P=32,L=32,z=32,C=Qn,j=_n,Z=Ls,ce=64,he=32,se=64,J=32,_e=64;t.lowlevel={crypto_core_hsalsa20:S,crypto_stream_xor:Se,crypto_stream:Y,crypto_stream_salsa20_xor:O,crypto_stream_salsa20:F,crypto_onetimeauth:N,crypto_onetimeauth_verify:D,crypto_verify_16:T,crypto_verify_32:R,crypto_secretbox:M,crypto_secretbox_open:oe,crypto_scalarmult:ze,crypto_scalarmult_base:ft,crypto_box_beforenm:En,crypto_box_afternm:on,crypto_box:ne,crypto_box_open:ye,crypto_box_keypair:qt,crypto_hash:Fe,crypto_sign:Zt,crypto_sign_keypair:_t,crypto_sign_open:zn,crypto_secretbox_KEYBYTES:Zn,crypto_secretbox_NONCEBYTES:Qn,crypto_secretbox_ZEROBYTES:_n,crypto_secretbox_BOXZEROBYTES:Ls,crypto_scalarmult_BYTES:Js,crypto_scalarmult_SCALARBYTES:v,crypto_box_PUBLICKEYBYTES:P,crypto_box_SECRETKEYBYTES:L,crypto_box_BEFORENMBYTES:z,crypto_box_NONCEBYTES:C,crypto_box_ZEROBYTES:j,crypto_box_BOXZEROBYTES:Z,crypto_sign_BYTES:ce,crypto_sign_PUBLICKEYBYTES:he,crypto_sign_SECRETKEYBYTES:se,crypto_sign_SEEDBYTES:J,crypto_hash_BYTES:_e,gf:n,D:u,L:Mt,pack25519:Ce,unpack25519:Be,M:le,A:De,S:je,Z:me,pow2523:Rt,add:Xe,set25519:Te,modL:Ft,scalarmult:St,scalarbase:bt};function Ue(p,y){if(p.length!==Zn)throw new Error("bad key size");if(y.length!==Qn)throw new Error("bad nonce size")}function pe(p,y){if(p.length!==P)throw new Error("bad public key size");if(y.length!==L)throw new Error("bad secret key size")}function $e(){for(var p=0;p<arguments.length;p++)if(!(arguments[p]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function We(p){for(var y=0;y<p.length;y++)p[y]=0}t.randomBytes=function(p){var y=new Uint8Array(p);return s(y,p),y},t.secretbox=function(p,y,m){$e(p,y,m),Ue(m,y);for(var d=new Uint8Array(_n+p.length),_=new Uint8Array(d.length),I=0;I<p.length;I++)d[I+_n]=p[I];return M(_,d,d.length,y,m),_.subarray(Ls)},t.secretbox.open=function(p,y,m){$e(p,y,m),Ue(m,y);for(var d=new Uint8Array(Ls+p.length),_=new Uint8Array(d.length),I=0;I<p.length;I++)d[I+Ls]=p[I];return d.length<32||oe(_,d,d.length,y,m)!==0?null:_.subarray(_n)},t.secretbox.keyLength=Zn,t.secretbox.nonceLength=Qn,t.secretbox.overheadLength=Ls,t.scalarMult=function(p,y){if($e(p,y),p.length!==v)throw new Error("bad n size");if(y.length!==Js)throw new Error("bad p size");var m=new Uint8Array(Js);return ze(m,p,y),m},t.scalarMult.base=function(p){if($e(p),p.length!==v)throw new Error("bad n size");var y=new Uint8Array(Js);return ft(y,p),y},t.scalarMult.scalarLength=v,t.scalarMult.groupElementLength=Js,t.box=function(p,y,m,d){var _=t.box.before(m,d);return t.secretbox(p,y,_)},t.box.before=function(p,y){$e(p,y),pe(p,y);var m=new Uint8Array(z);return En(m,p,y),m},t.box.after=t.secretbox,t.box.open=function(p,y,m,d){var _=t.box.before(m,d);return t.secretbox.open(p,y,_)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var p=new Uint8Array(P),y=new Uint8Array(L);return qt(p,y),{publicKey:p,secretKey:y}},t.box.keyPair.fromSecretKey=function(p){if($e(p),p.length!==L)throw new Error("bad secret key size");var y=new Uint8Array(P);return ft(y,p),{publicKey:y,secretKey:new Uint8Array(p)}},t.box.publicKeyLength=P,t.box.secretKeyLength=L,t.box.sharedKeyLength=z,t.box.nonceLength=C,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(p,y){if($e(p,y),y.length!==se)throw new Error("bad secret key size");var m=new Uint8Array(ce+p.length);return Zt(m,p,p.length,y),m},t.sign.open=function(p,y){if($e(p,y),y.length!==he)throw new Error("bad public key size");var m=new Uint8Array(p.length),d=zn(m,p,p.length,y);if(d<0)return null;for(var _=new Uint8Array(d),I=0;I<_.length;I++)_[I]=m[I];return _},t.sign.detached=function(p,y){for(var m=t.sign(p,y),d=new Uint8Array(ce),_=0;_<d.length;_++)d[_]=m[_];return d},t.sign.detached.verify=function(p,y,m){if($e(p,y,m),y.length!==ce)throw new Error("bad signature size");if(m.length!==he)throw new Error("bad public key size");var d=new Uint8Array(ce+p.length),_=new Uint8Array(ce+p.length),I;for(I=0;I<ce;I++)d[I]=y[I];for(I=0;I<p.length;I++)d[I+ce]=p[I];return zn(_,d,d.length,m)>=0},t.sign.keyPair=function(){var p=new Uint8Array(he),y=new Uint8Array(se);return _t(p,y),{publicKey:p,secretKey:y}},t.sign.keyPair.fromSecretKey=function(p){if($e(p),p.length!==se)throw new Error("bad secret key size");for(var y=new Uint8Array(he),m=0;m<y.length;m++)y[m]=p[32+m];return{publicKey:y,secretKey:new Uint8Array(p)}},t.sign.keyPair.fromSeed=function(p){if($e(p),p.length!==J)throw new Error("bad seed size");for(var y=new Uint8Array(he),m=new Uint8Array(se),d=0;d<32;d++)m[d]=p[d];return _t(y,m,!0),{publicKey:y,secretKey:m}},t.sign.publicKeyLength=he,t.sign.secretKeyLength=se,t.sign.seedLength=J,t.sign.signatureLength=ce,t.hash=function(p){$e(p);var y=new Uint8Array(_e);return Fe(y,p,p.length),y},t.hash.hashLength=_e,t.verify=function(p,y){return $e(p,y),p.length===0||y.length===0||p.length!==y.length?!1:b(p,0,y,0,p.length)===0},t.setPRNG=function(p){s=p},function(){var p=typeof self<"u"?self.crypto||self.msCrypto:null;if(p&&p.getRandomValues){var y=65536;t.setPRNG(function(m,d){var _,I=new Uint8Array(d);for(_=0;_<d;_+=y)p.getRandomValues(I.subarray(_,_+Math.min(d-_,y)));for(_=0;_<d;_++)m[_]=I[_];We(I)})}else typeof jh<"u"&&(p=Kh,p&&p.randomBytes&&t.setPRNG(function(m,d){var _,I=p.randomBytes(d);for(_=0;_<d;_++)m[_]=I[_];We(I)}))}()})(e.exports?e.exports:self.nacl=self.nacl||{})})(ub);function Or(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function lb(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function vl(e,...t){if(!lb(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Yh(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Or(e.outputLen),Or(e.blockLen)}function gi(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Zh(e,t){vl(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const db=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));function Qh(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const la=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),As=(e,t)=>e<<32-t|e>>>t,fb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!fb)throw new Error("Non little-endian hardware is not supported");const hb=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function e0(e){if(!Qh(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=hb[e[n]];return t}const qs={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function mf(e){if(e>=qs._0&&e<=qs._9)return e-qs._0;if(e>=qs._A&&e<=qs._F)return e-(qs._A-10);if(e>=qs._a&&e<=qs._f)return e-(qs._a-10)}function t0(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(n);for(let r=0,i=0;r<n;r++,i+=2){const o=mf(e.charCodeAt(i)),a=mf(e.charCodeAt(i+1));if(o===void 0||a===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}s[r]=o*16+a}return s}function pb(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function yi(e){if(typeof e=="string"&&(e=pb(e)),!Qh(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}let Sl=class{clone(){return this._cloneInto()}};const gb={}.toString;function yb(e,t){if(t!==void 0&&gb.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function Al(e){const t=s=>e().update(yi(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}let n0=class extends Sl{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Yh(t);const s=yi(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?t.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return gi(this),this.iHash.update(t),this}digestInto(t){gi(this),vl(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const dc=(e,t,n)=>new n0(e,t).update(n).digest();dc.create=(e,t)=>new n0(e,t);function mb(e,t,n,s){Yh(e);const r=yb({dkLen:32,asyncTick:10},s),{c:i,dkLen:o,asyncTick:a}=r;if(Or(i),Or(o),Or(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=yi(t),u=yi(n),l=new Uint8Array(o),f=dc.create(e,c),h=f._cloneInto().update(u);return{c:i,dkLen:o,asyncTick:a,DK:l,PRF:f,PRFSalt:h}}function wb(e,t,n,s,r){return e.destroy(),t.destroy(),s&&s.destroy(),r.fill(0),n}function bb(e,t,n,s){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:c}=mb(e,t,n,s);let u;const l=new Uint8Array(4),f=la(l),h=new Uint8Array(a.outputLen);for(let g=1,w=0;w<i;g++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);f.setInt32(0,g,!1),(u=c._cloneInto(u)).update(l).digestInto(h),b.set(h.subarray(0,b.length));for(let T=1;T<r;T++){a._cloneInto(u).update(h).digestInto(h);for(let R=0;R<b.length;R++)b[R]^=h[R]}}return wb(a,c,o,u,h)}function _b(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),c=s?4:0,u=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+u,a,s)}let s0=class extends Sl{constructor(t,n,s,r){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=la(this.buffer)}update(t){gi(this);const{view:n,buffer:s,blockLen:r}=this;t=yi(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const c=la(t);for(;r<=i-o;o+=r)this.process(c,o);continue}s.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){gi(this),Zh(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let f=o;f<r;f++)n[f]=0;_b(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=la(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=o,r%n&&t.buffer.set(s),t}};const Tb=(e,t,n)=>e&t^~e&n,xb=(e,t,n)=>e&t^e&n^t&n,vb=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),er=new Uint32Array(64);let Sb=class extends s0{constructor(){super(64,32,8,!1),this.A=Qs[0]|0,this.B=Qs[1]|0,this.C=Qs[2]|0,this.D=Qs[3]|0,this.E=Qs[4]|0,this.F=Qs[5]|0,this.G=Qs[6]|0,this.H=Qs[7]|0}get(){const{A:t,B:n,C:s,D:r,E:i,F:o,G:a,H:c}=this;return[t,n,s,r,i,o,a,c]}set(t,n,s,r,i,o,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)er[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const h=er[f-15],g=er[f-2],w=As(h,7)^As(h,18)^h>>>3,b=As(g,17)^As(g,19)^g>>>10;er[f]=b+er[f-7]+w+er[f-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const h=As(a,6)^As(a,11)^As(a,25),g=l+h+Tb(a,c,u)+vb[f]+er[f]|0,b=(As(s,2)^As(s,13)^As(s,22))+xb(s,r,i)|0;l=u,u=c,c=a,a=o+g|0,o=i,i=r,r=s,s=g+b|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(s,r,i,o,a,c,u,l)}roundClean(){er.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ab=Al(()=>new Sb),Jo=BigInt(2**32-1),Du=BigInt(32);function r0(e,t=!1){return t?{h:Number(e&Jo),l:Number(e>>Du&Jo)}:{h:Number(e>>Du&Jo)|0,l:Number(e&Jo)|0}}function i0(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:o}=r0(e[r],t);[n[r],s[r]]=[i,o]}return[n,s]}const Eb=(e,t)=>BigInt(e>>>0)<<Du|BigInt(t>>>0),kb=(e,t,n)=>e>>>n,Bb=(e,t,n)=>e<<32-n|t>>>n,Pb=(e,t,n)=>e>>>n|t<<32-n,Ub=(e,t,n)=>e<<32-n|t>>>n,Rb=(e,t,n)=>e<<64-n|t>>>n-32,Ob=(e,t,n)=>e>>>n-32|t<<64-n,Ib=(e,t)=>t,$b=(e,t)=>e,o0=(e,t,n)=>e<<n|t>>>32-n,a0=(e,t,n)=>t<<n|e>>>32-n,c0=(e,t,n)=>t<<n-32|e>>>64-n,u0=(e,t,n)=>e<<n-32|t>>>64-n;function Lb(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:r|0}}const qb=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Nb=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,Db=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Mb=(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,zb=(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0),Fb=(e,t,n,s,r,i)=>t+n+s+r+i+(e/2**32|0)|0,Cb={fromBig:r0,split:i0,toBig:Eb,shrSH:kb,shrSL:Bb,rotrSH:Pb,rotrSL:Ub,rotrBH:Rb,rotrBL:Ob,rotr32H:Ib,rotr32L:$b,rotlSH:o0,rotlSL:a0,rotlBH:c0,rotlBL:u0,add:Lb,add3L:qb,add3H:Nb,add4L:Db,add4H:Mb,add5H:Fb,add5L:zb},yt=Cb,[Hb,jb]=(()=>yt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),tr=new Uint32Array(80),nr=new Uint32Array(80);let Wb=class extends s0{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:f,Fl:h,Gh:g,Gl:w,Hh:b,Hl:T}=this;return[t,n,s,r,i,o,a,c,u,l,f,h,g,w,b,T]}set(t,n,s,r,i,o,a,c,u,l,f,h,g,w,b,T){this.Ah=t|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=f|0,this.Fl=h|0,this.Gh=g|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(t,n){for(let x=0;x<16;x++,n+=4)tr[x]=t.getUint32(n),nr[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const E=tr[x-15]|0,S=nr[x-15]|0,q=yt.rotrSH(E,S,1)^yt.rotrSH(E,S,8)^yt.shrSH(E,S,7),O=yt.rotrSL(E,S,1)^yt.rotrSL(E,S,8)^yt.shrSL(E,S,7),F=tr[x-2]|0,Y=nr[x-2]|0,Se=yt.rotrSH(F,Y,19)^yt.rotrBH(F,Y,61)^yt.shrSH(F,Y,6),Oe=yt.rotrSL(F,Y,19)^yt.rotrBL(F,Y,61)^yt.shrSL(F,Y,6),N=yt.add4L(O,Oe,nr[x-7],nr[x-16]),D=yt.add4H(N,q,Se,tr[x-7],tr[x-16]);tr[x]=D|0,nr[x]=N|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:f,El:h,Fh:g,Fl:w,Gh:b,Gl:T,Hh:R,Hl:A}=this;for(let x=0;x<80;x++){const E=yt.rotrSH(f,h,14)^yt.rotrSH(f,h,18)^yt.rotrBH(f,h,41),S=yt.rotrSL(f,h,14)^yt.rotrSL(f,h,18)^yt.rotrBL(f,h,41),q=f&g^~f&b,O=h&w^~h&T,F=yt.add5L(A,S,O,jb[x],nr[x]),Y=yt.add5H(F,R,E,q,Hb[x],tr[x]),Se=F|0,Oe=yt.rotrSH(s,r,28)^yt.rotrBH(s,r,34)^yt.rotrBH(s,r,39),N=yt.rotrSL(s,r,28)^yt.rotrBL(s,r,34)^yt.rotrBL(s,r,39),D=s&i^s&a^i&a,M=r&o^r&c^o&c;R=b|0,A=T|0,b=g|0,T=w|0,g=f|0,w=h|0,{h:f,l:h}=yt.add(u|0,l|0,Y|0,Se|0),u=a|0,l=c|0,a=i|0,c=o|0,i=s|0,o=r|0;const oe=yt.add3L(Se,N,M);s=yt.add3H(oe,Y,Oe,D),r=oe|0}({h:s,l:r}=yt.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=yt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=yt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=yt.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:f,l:h}=yt.add(this.Eh|0,this.El|0,f|0,h|0),{h:g,l:w}=yt.add(this.Fh|0,this.Fl|0,g|0,w|0),{h:b,l:T}=yt.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:R,l:A}=yt.add(this.Hh|0,this.Hl|0,R|0,A|0),this.set(s,r,i,o,a,c,u,l,f,h,g,w,b,T,R,A)}roundClean(){tr.fill(0),nr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const El=Al(()=>new Wb);var l0={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.createBase58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64nopad=e.base64=e.base32crockford=e.base32hexnopad=e.base32hex=e.base32nopad=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(N){if(!Number.isSafeInteger(N))throw new Error(`Wrong integer: ${N}`)}e.assertNumber=t;function n(N){return N instanceof Uint8Array||N!=null&&typeof N=="object"&&N.constructor.name==="Uint8Array"}function s(...N){const D=ve=>ve,M=(ve,ke)=>Ce=>ve(ke(Ce)),oe=N.map(ve=>ve.encode).reduceRight(M,D),Te=N.map(ve=>ve.decode).reduce(M,D);return{encode:oe,decode:Te}}function r(N){return{encode:D=>{if(!Array.isArray(D)||D.length&&typeof D[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return D.map(M=>{if(M<0||M>=N.length)throw new Error(`Digit index outside alphabet: ${M} (alphabet: ${N.length})`);return N[M]})},decode:D=>{if(!Array.isArray(D)||D.length&&typeof D[0]!="string")throw new Error("alphabet.decode input should be array of strings");return D.map(M=>{if(typeof M!="string")throw new Error(`alphabet.decode: not string element=${M}`);const oe=N.indexOf(M);if(oe===-1)throw new Error(`Unknown letter: "${M}". Allowed: ${N}`);return oe})}}}function i(N=""){if(typeof N!="string")throw new Error("join separator should be string");return{encode:D=>{if(!Array.isArray(D)||D.length&&typeof D[0]!="string")throw new Error("join.encode input should be array of strings");for(let M of D)if(typeof M!="string")throw new Error(`join.encode: non-string input=${M}`);return D.join(N)},decode:D=>{if(typeof D!="string")throw new Error("join.decode input should be string");return D.split(N)}}}function o(N,D="="){if(typeof D!="string")throw new Error("padding chr should be string");return{encode(M){if(!Array.isArray(M)||M.length&&typeof M[0]!="string")throw new Error("padding.encode input should be array of strings");for(let oe of M)if(typeof oe!="string")throw new Error(`padding.encode: non-string input=${oe}`);for(;M.length*N%8;)M.push(D);return M},decode(M){if(!Array.isArray(M)||M.length&&typeof M[0]!="string")throw new Error("padding.encode input should be array of strings");for(let Te of M)if(typeof Te!="string")throw new Error(`padding.decode: non-string input=${Te}`);let oe=M.length;if(oe*N%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;oe>0&&M[oe-1]===D;oe--)if(!((oe-1)*N%8))throw new Error("Invalid padding: string has too much padding");return M.slice(0,oe)}}}function a(N){if(typeof N!="function")throw new Error("normalize fn should be function");return{encode:D=>D,decode:D=>N(D)}}function c(N,D,M){if(D<2)throw new Error(`convertRadix: wrong from=${D}, base cannot be less than 2`);if(M<2)throw new Error(`convertRadix: wrong to=${M}, base cannot be less than 2`);if(!Array.isArray(N))throw new Error("convertRadix: data should be array");if(!N.length)return[];let oe=0;const Te=[],ve=Array.from(N);for(ve.forEach(ke=>{if(ke<0||ke>=D)throw new Error(`Wrong integer: ${ke}`)});;){let ke=0,Ce=!0;for(let Ie=oe;Ie<ve.length;Ie++){const Me=ve[Ie],Be=D*ke+Me;if(!Number.isSafeInteger(Be)||D*ke/D!==ke||Be-Me!==D*ke)throw new Error("convertRadix: carry overflow");ke=Be%M;const De=Math.floor(Be/M);if(ve[Ie]=De,!Number.isSafeInteger(De)||De*M+ke!==Be)throw new Error("convertRadix: carry overflow");if(Ce)De?Ce=!1:oe=Ie;else continue}if(Te.push(ke),Ce)break}for(let ke=0;ke<N.length-1&&N[ke]===0;ke++)Te.push(0);return Te.reverse()}const u=(N,D)=>D?u(D,N%D):N,l=(N,D)=>N+(D-u(N,D));function f(N,D,M,oe){if(!Array.isArray(N))throw new Error("convertRadix2: data should be array");if(D<=0||D>32)throw new Error(`convertRadix2: wrong from=${D}`);if(M<=0||M>32)throw new Error(`convertRadix2: wrong to=${M}`);if(l(D,M)>32)throw new Error(`convertRadix2: carry overflow from=${D} to=${M} carryBits=${l(D,M)}`);let Te=0,ve=0;const ke=2**M-1,Ce=[];for(const Ie of N){if(Ie>=2**D)throw new Error(`convertRadix2: invalid data word=${Ie} from=${D}`);if(Te=Te<<D|Ie,ve+D>32)throw new Error(`convertRadix2: carry overflow pos=${ve} from=${D}`);for(ve+=D;ve>=M;ve-=M)Ce.push((Te>>ve-M&ke)>>>0);Te&=2**ve-1}if(Te=Te<<M-ve&ke,!oe&&ve>=D)throw new Error("Excess padding");if(!oe&&Te)throw new Error(`Non-zero padding: ${Te}`);return oe&&ve>0&&Ce.push(Te>>>0),Ce}function h(N){return{encode:D=>{if(!n(D))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(D),2**8,N)},decode:D=>{if(!Array.isArray(D)||D.length&&typeof D[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(c(D,N,2**8))}}}function g(N,D=!1){if(N<=0||N>32)throw new Error("radix2: bits should be in (0..32]");if(l(8,N)>32||l(N,8)>32)throw new Error("radix2: carry overflow");return{encode:M=>{if(!n(M))throw new Error("radix2.encode input should be Uint8Array");return f(Array.from(M),8,N,!D)},decode:M=>{if(!Array.isArray(M)||M.length&&typeof M[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(f(M,N,8,D))}}}function w(N){if(typeof N!="function")throw new Error("unsafeWrapper fn should be function");return function(...D){try{return N.apply(null,D)}catch{}}}function b(N,D){if(typeof D!="function")throw new Error("checksum fn should be function");return{encode(M){if(!n(M))throw new Error("checksum.encode: input should be Uint8Array");const oe=D(M).slice(0,N),Te=new Uint8Array(M.length+N);return Te.set(M),Te.set(oe,M.length),Te},decode(M){if(!n(M))throw new Error("checksum.decode: input should be Uint8Array");const oe=M.slice(0,-N),Te=D(oe).slice(0,N),ve=M.slice(-N);for(let ke=0;ke<N;ke++)if(Te[ke]!==ve[ke])throw new Error("Invalid checksum");return oe}}}e.utils={alphabet:r,chain:s,checksum:b,convertRadix:c,convertRadix2:f,radix:h,radix2:g,join:i,padding:o},e.base16=s(g(4),r("0123456789ABCDEF"),i("")),e.base32=s(g(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o(5),i("")),e.base32nopad=s(g(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),i("")),e.base32hex=s(g(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o(5),i("")),e.base32hexnopad=s(g(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),i("")),e.base32crockford=s(g(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),a(N=>N.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=s(g(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o(6),i("")),e.base64nopad=s(g(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i("")),e.base64url=s(g(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(6),i("")),e.base64urlnopad=s(g(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(""));const T=N=>s(h(58),r(N),i(""));e.base58=T("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=T("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=T("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const R=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(N){let D="";for(let M=0;M<N.length;M+=8){const oe=N.subarray(M,M+8);D+=e.base58.encode(oe).padStart(R[oe.length],"1")}return D},decode(N){let D=[];for(let M=0;M<N.length;M+=11){const oe=N.slice(M,M+11),Te=R.indexOf(oe.length),ve=e.base58.decode(oe);for(let ke=0;ke<ve.length-Te;ke++)if(ve[ke]!==0)throw new Error("base58xmr: wrong padding");D=D.concat(Array.from(ve.slice(ve.length-Te)))}return Uint8Array.from(D)}};const A=N=>s(b(4,D=>N(N(D))),e.base58);e.createBase58check=A,e.base58check=e.createBase58check;const x=s(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),E=[996825010,642813549,513874426,1027748829,705979059];function S(N){const D=N>>25;let M=(N&33554431)<<5;for(let oe=0;oe<E.length;oe++)(D>>oe&1)===1&&(M^=E[oe]);return M}function q(N,D,M=1){const oe=N.length;let Te=1;for(let ve=0;ve<oe;ve++){const ke=N.charCodeAt(ve);if(ke<33||ke>126)throw new Error(`Invalid prefix (${N})`);Te=S(Te)^ke>>5}Te=S(Te);for(let ve=0;ve<oe;ve++)Te=S(Te)^N.charCodeAt(ve)&31;for(let ve of D)Te=S(Te)^ve;for(let ve=0;ve<6;ve++)Te=S(Te);return Te^=M,x.encode(f([Te%2**30],30,5,!1))}function O(N){const D=N==="bech32"?1:734539939,M=g(5),oe=M.decode,Te=M.encode,ve=w(oe);function ke(Be,De,me=90){if(typeof Be!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof Be}`);if(!Array.isArray(De)||De.length&&typeof De[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof De}`);if(Be.length===0)throw new TypeError(`Invalid prefix length ${Be.length}`);const le=Be.length+7+De.length;if(me!==!1&&le>me)throw new TypeError(`Length ${le} exceeds limit ${me}`);const je=Be.toLowerCase(),xt=q(je,De,D);return`${je}1${x.encode(De)}${xt}`}function Ce(Be,De=90){if(typeof Be!="string")throw new Error(`bech32.decode input should be string, not ${typeof Be}`);if(Be.length<8||De!==!1&&Be.length>De)throw new TypeError(`Wrong string length: ${Be.length} (${Be}). Expected (8..${De})`);const me=Be.toLowerCase();if(Be!==me&&Be!==Be.toUpperCase())throw new Error("String must be lowercase or uppercase");const le=me.lastIndexOf("1");if(le===0||le===-1)throw new Error('Letter "1" must be present between prefix and data only');const je=me.slice(0,le),xt=me.slice(le+1);if(xt.length<6)throw new Error("Data must be at least 6 characters long");const Rt=x.decode(xt).slice(0,-6),ze=q(je,Rt,D);if(!xt.endsWith(ze))throw new Error(`Invalid checksum in ${Be}: expected "${ze}"`);return{prefix:je,words:Rt}}const Ie=w(Ce);function Me(Be){const{prefix:De,words:me}=Ce(Be,!1);return{prefix:De,words:me,bytes:oe(me)}}return{encode:ke,decode:Ce,decodeToBytes:Me,decodeUnsafe:Ie,fromWords:oe,fromWordsUnsafe:ve,toWords:Te}}e.bech32=O("bech32"),e.bech32m=O("bech32m"),e.utf8={encode:N=>new TextDecoder().decode(N),decode:N=>new TextEncoder().encode(N)},e.hex=s(g(4),r("0123456789abcdef"),i(""),a(N=>{if(typeof N!="string"||N.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof N} with length ${N.length}`);return N.toLowerCase()}));const F={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},Y="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",Se=(N,D)=>{if(typeof N!="string"||!F.hasOwnProperty(N))throw new TypeError(Y);if(!n(D))throw new TypeError("bytesToString() expects Uint8Array");return F[N].encode(D)};e.bytesToString=Se,e.str=e.bytesToString;const Oe=(N,D)=>{if(!F.hasOwnProperty(N))throw new TypeError(Y);if(typeof D!="string")throw new TypeError("stringToBytes() expects string");return F[N].decode(D)};e.stringToBytes=Oe,e.bytes=e.stringToBytes})(l0);function d0(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function Gb(e){const t=d0(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}const Kb=e=>d0(`mnemonic${e}`);function Vb(e,t=""){return bb(El,Gb(e).nfkd,Kb(t),{c:2048,dkLen:64})}const[f0,h0,p0]=[[],[],[]],Xb=BigInt(0),Xi=BigInt(1),Jb=BigInt(2),Yb=BigInt(7),Zb=BigInt(256),Qb=BigInt(113);for(let e=0,t=Xi,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],f0.push(2*(5*s+n)),h0.push((e+1)*(e+2)/2%64);let r=Xb;for(let i=0;i<7;i++)t=(t<<Xi^(t>>Yb)*Qb)%Zb,t&Jb&&(r^=Xi<<(Xi<<BigInt(i))-Xi);p0.push(r)}const[e1,t1]=i0(p0,!0),wf=(e,t,n)=>n>32?c0(e,t,n):o0(e,t,n),bf=(e,t,n)=>n>32?u0(e,t,n):a0(e,t,n);function n1(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],f=wf(u,l,1)^n[a],h=bf(u,l,1)^n[a+1];for(let g=0;g<50;g+=10)e[o+g]^=f,e[o+g+1]^=h}let r=e[2],i=e[3];for(let o=0;o<24;o++){const a=h0[o],c=wf(r,i,a),u=bf(r,i,a),l=f0[o];r=e[l],i=e[l+1],e[l]=c,e[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=e1[s],e[1]^=t1[s]}n.fill(0)}let s1=class g0 extends Sl{constructor(t,n,s,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Or(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=db(this.state)}keccak(){n1(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){gi(this);const{blockLen:n,state:s}=this;t=yi(t);const r=t.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:s,blockLen:r}=this;t[s]^=n,n&128&&s===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){gi(this,!1),vl(t),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=t.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);t.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Or(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Zh(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return t||(t=new g0(n,s,r,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=s,t.outputLen=r,t.enableXOF=o,t.destroyed=this.destroyed,t}};const r1=(e,t,n)=>Al(()=>new s1(t,e,n)),mi=r1(6,136,256/8);function y0(e,t){return function(){return e.apply(t,arguments)}}const{toString:i1}=Object.prototype,{getPrototypeOf:kl}=Object,fc=(e=>t=>{const n=i1.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ts=e=>(e=e.toLowerCase(),t=>fc(t)===e),hc=e=>t=>typeof t===e,{isArray:Ui}=Array,yo=hc("undefined");function o1(e){return e!==null&&!yo(e)&&e.constructor!==null&&!yo(e.constructor)&&Vn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const m0=Ts("ArrayBuffer");function a1(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&m0(e.buffer),t}const c1=hc("string"),Vn=hc("function"),w0=hc("number"),pc=e=>e!==null&&typeof e=="object",u1=e=>e===!0||e===!1,da=e=>{if(fc(e)!=="object")return!1;const t=kl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},l1=Ts("Date"),d1=Ts("File"),f1=Ts("Blob"),h1=Ts("FileList"),p1=e=>pc(e)&&Vn(e.pipe),g1=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Vn(e.append)&&((t=fc(e))==="formdata"||t==="object"&&Vn(e.toString)&&e.toString()==="[object FormData]"))},y1=Ts("URLSearchParams"),[m1,w1,b1,_1]=["ReadableStream","Request","Response","Headers"].map(Ts),T1=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Po(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Ui(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(s=0;s<o;s++)a=i[s],t.call(null,e[a],a,e)}}function b0(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Br=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),_0=e=>!yo(e)&&e!==Br;function Mu(){const{caseless:e}=_0(this)&&this||{},t={},n=(s,r)=>{const i=e&&b0(t,r)||r;da(t[i])&&da(s)?t[i]=Mu(t[i],s):da(s)?t[i]=Mu({},s):Ui(s)?t[i]=s.slice():t[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Po(arguments[s],n);return t}const x1=(e,t,n,{allOwnKeys:s}={})=>(Po(t,(r,i)=>{n&&Vn(r)?e[i]=y0(r,n):e[i]=r},{allOwnKeys:s}),e),v1=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),S1=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},A1=(e,t,n,s)=>{let r,i,o;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&kl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},E1=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},k1=e=>{if(!e)return null;if(Ui(e))return e;let t=e.length;if(!w0(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},B1=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&kl(Uint8Array)),P1=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},U1=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},R1=Ts("HTMLFormElement"),O1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),_f=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),I1=Ts("RegExp"),T0=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Po(n,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},$1=e=>{T0(e,(t,n)=>{if(Vn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Vn(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},L1=(e,t)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return Ui(e)?s(e):s(String(e).split(t)),n},q1=()=>{},N1=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,uu="abcdefghijklmnopqrstuvwxyz",Tf="0123456789",x0={DIGIT:Tf,ALPHA:uu,ALPHA_DIGIT:uu+uu.toUpperCase()+Tf},D1=(e=16,t=x0.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function M1(e){return!!(e&&Vn(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const z1=e=>{const t=new Array(10),n=(s,r)=>{if(pc(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const i=Ui(s)?[]:{};return Po(s,(o,a)=>{const c=n(o,r+1);!yo(c)&&(i[a]=c)}),t[r]=void 0,i}}return s};return n(e,0)},F1=Ts("AsyncFunction"),C1=e=>e&&(pc(e)||Vn(e))&&Vn(e.then)&&Vn(e.catch),v0=((e,t)=>e?setImmediate:t?((n,s)=>(Br.addEventListener("message",({source:r,data:i})=>{r===Br&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Br.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Vn(Br.postMessage)),H1=typeof queueMicrotask<"u"?queueMicrotask.bind(Br):typeof process<"u"&&process.nextTick||v0,K={isArray:Ui,isArrayBuffer:m0,isBuffer:o1,isFormData:g1,isArrayBufferView:a1,isString:c1,isNumber:w0,isBoolean:u1,isObject:pc,isPlainObject:da,isReadableStream:m1,isRequest:w1,isResponse:b1,isHeaders:_1,isUndefined:yo,isDate:l1,isFile:d1,isBlob:f1,isRegExp:I1,isFunction:Vn,isStream:p1,isURLSearchParams:y1,isTypedArray:B1,isFileList:h1,forEach:Po,merge:Mu,extend:x1,trim:T1,stripBOM:v1,inherits:S1,toFlatObject:A1,kindOf:fc,kindOfTest:Ts,endsWith:E1,toArray:k1,forEachEntry:P1,matchAll:U1,isHTMLForm:R1,hasOwnProperty:_f,hasOwnProp:_f,reduceDescriptors:T0,freezeMethods:$1,toObjectSet:L1,toCamelCase:O1,noop:q1,toFiniteNumber:N1,findKey:b0,global:Br,isContextDefined:_0,ALPHABET:x0,generateString:D1,isSpecCompliantForm:M1,toJSONObject:z1,isAsyncFn:F1,isThenable:C1,setImmediate:v0,asap:H1};function dt(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r)}K.inherits(dt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const S0=dt.prototype,A0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{A0[e]={value:e}});Object.defineProperties(dt,A0);Object.defineProperty(S0,"isAxiosError",{value:!0});dt.from=(e,t,n,s,r,i)=>{const o=Object.create(S0);return K.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),dt.call(o,e.message,t,n,s,r),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const j1=null;function zu(e){return K.isPlainObject(e)||K.isArray(e)}function E0(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function xf(e,t,n){return e?e.concat(t).map(function(r,i){return r=E0(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function W1(e){return K.isArray(e)&&!e.some(zu)}const G1=K.toFlatObject(K,{},null,function(t){return/^is[A-Z]/.test(t)});function gc(e,t,n){if(!K.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=K.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,T){return!K.isUndefined(T[b])});const s=n.metaTokens,r=n.visitor||l,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(r))throw new TypeError("visitor must be a function");function u(w){if(w===null)return"";if(K.isDate(w))return w.toISOString();if(!c&&K.isBlob(w))throw new dt("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(w)||K.isTypedArray(w)?c&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function l(w,b,T){let R=w;if(w&&!T&&typeof w=="object"){if(K.endsWith(b,"{}"))b=s?b:b.slice(0,-2),w=JSON.stringify(w);else if(K.isArray(w)&&W1(w)||(K.isFileList(w)||K.endsWith(b,"[]"))&&(R=K.toArray(w)))return b=E0(b),R.forEach(function(x,E){!(K.isUndefined(x)||x===null)&&t.append(o===!0?xf([b],E,i):o===null?b:b+"[]",u(x))}),!1}return zu(w)?!0:(t.append(xf(T,b,i),u(w)),!1)}const f=[],h=Object.assign(G1,{defaultVisitor:l,convertValue:u,isVisitable:zu});function g(w,b){if(!K.isUndefined(w)){if(f.indexOf(w)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(w),K.forEach(w,function(R,A){(!(K.isUndefined(R)||R===null)&&r.call(t,R,K.isString(A)?A.trim():A,b,h))===!0&&g(R,b?b.concat(A):[A])}),f.pop()}}if(!K.isObject(e))throw new TypeError("data must be an object");return g(e),t}function vf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Bl(e,t){this._pairs=[],e&&gc(e,this,t)}const k0=Bl.prototype;k0.append=function(t,n){this._pairs.push([t,n])};k0.toString=function(t){const n=t?function(s){return t.call(this,s,vf)}:vf;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function K1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function B0(e,t,n){if(!t)return e;const s=n&&n.encode||K1,r=n&&n.serialize;let i;if(r?i=r(t,n):i=K.isURLSearchParams(t)?t.toString():new Bl(t,n).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}let V1=class{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){K.forEach(this.handlers,function(s){s!==null&&t(s)})}};const Sf=V1,P0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},X1=typeof URLSearchParams<"u"?URLSearchParams:Bl,J1=typeof FormData<"u"?FormData:null,Y1=typeof Blob<"u"?Blob:null,Z1={isBrowser:!0,classes:{URLSearchParams:X1,FormData:J1,Blob:Y1},protocols:["http","https","file","blob","url","data"]},Pl=typeof window<"u"&&typeof document<"u",Q1=(e=>Pl&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),e_=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),t_=Pl&&window.location.href||"http://localhost",n_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pl,hasStandardBrowserEnv:Q1,hasStandardBrowserWebWorkerEnv:e_,origin:t_},Symbol.toStringTag,{value:"Module"})),ys={...n_,...Z1};function s_(e,t){return gc(e,new ys.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,i){return ys.isNode&&K.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function r_(e){return K.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function i_(e){const t={},n=Object.keys(e);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],t[i]=e[i];return t}function U0(e){function t(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=n.length;return o=!o&&K.isArray(r)?r.length:o,c?(K.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!a):((!r[o]||!K.isObject(r[o]))&&(r[o]=[]),t(n,s,r[o],i)&&K.isArray(r[o])&&(r[o]=i_(r[o])),!a)}if(K.isFormData(e)&&K.isFunction(e.entries)){const n={};return K.forEachEntry(e,(s,r)=>{t(r_(s),r,n,0)}),n}return null}function o_(e,t,n){if(K.isString(e))try{return(t||JSON.parse)(e),K.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Ul={transitional:P0,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=K.isObject(t);if(i&&K.isHTMLForm(t)&&(t=new FormData(t)),K.isFormData(t))return r?JSON.stringify(U0(t)):t;if(K.isArrayBuffer(t)||K.isBuffer(t)||K.isStream(t)||K.isFile(t)||K.isBlob(t)||K.isReadableStream(t))return t;if(K.isArrayBufferView(t))return t.buffer;if(K.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return s_(t,this.formSerializer).toString();if((a=K.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return gc(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),o_(t)):t}],transformResponse:[function(t){const n=this.transitional||Ul.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(K.isResponse(t)||K.isReadableStream(t))return t;if(t&&K.isString(t)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?dt.from(a,dt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ys.classes.FormData,Blob:ys.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],e=>{Ul.headers[e]={}});const Rl=Ul,a_=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c_=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||t[n]&&a_[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},Af=Symbol("internals");function Ji(e){return e&&String(e).trim().toLowerCase()}function fa(e){return e===!1||e==null?e:K.isArray(e)?e.map(fa):String(e)}function u_(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const l_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function lu(e,t,n,s,r){if(K.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!K.isString(t)){if(K.isString(s))return t.indexOf(s)!==-1;if(K.isRegExp(s))return s.test(t)}}function d_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function f_(e,t){const n=K.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}class yc{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function i(a,c,u){const l=Ji(c);if(!l)throw new Error("header name must be a non-empty string");const f=K.findKey(r,l);(!f||r[f]===void 0||u===!0||u===void 0&&r[f]!==!1)&&(r[f||c]=fa(a))}const o=(a,c)=>K.forEach(a,(u,l)=>i(u,l,c));if(K.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(K.isString(t)&&(t=t.trim())&&!l_(t))o(c_(t),n);else if(K.isHeaders(t))for(const[a,c]of t.entries())i(c,a,s);else t!=null&&i(n,t,s);return this}get(t,n){if(t=Ji(t),t){const s=K.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return u_(r);if(K.isFunction(n))return n.call(this,r,s);if(K.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ji(t),t){const s=K.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||lu(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function i(o){if(o=Ji(o),o){const a=K.findKey(s,o);a&&(!n||lu(s,s[a],a,n))&&(delete s[a],r=!0)}}return K.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!t||lu(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,s={};return K.forEach(this,(r,i)=>{const o=K.findKey(s,i);if(o){n[o]=fa(r),delete n[i];return}const a=t?d_(i):String(i).trim();a!==i&&delete n[i],n[a]=fa(r),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return K.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&K.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[Af]=this[Af]={accessors:{}}).accessors,r=this.prototype;function i(o){const a=Ji(o);s[a]||(f_(r,o),s[a]=!0)}return K.isArray(t)?t.forEach(i):i(t),this}}yc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(yc.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});K.freezeMethods(yc);const ms=yc;function du(e,t){const n=this||Rl,s=t||n,r=ms.from(s.headers);let i=s.data;return K.forEach(e,function(a){i=a.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function R0(e){return!!(e&&e.__CANCEL__)}function Ri(e,t,n){dt.call(this,e??"canceled",dt.ERR_CANCELED,t,n),this.name="CanceledError"}K.inherits(Ri,dt,{__CANCEL__:!0});function O0(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new dt("Request failed with status code "+n.status,[dt.ERR_BAD_REQUEST,dt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function h_(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function p_(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=s[i];o||(o=u),n[r]=c,s[r]=u;let f=i,h=0;for(;f!==r;)h+=n[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),u-o<t)return;const g=l&&u-l;return g?Math.round(h*1e3/g):void 0}}function g_(e,t){let n=0,s=1e3/t,r,i;const o=(u,l=Date.now())=>{n=l,r=null,i&&(clearTimeout(i),i=null),e.apply(null,u)};return[(...u)=>{const l=Date.now(),f=l-n;f>=s?o(u,l):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-f)))},()=>r&&o(r)]}const qa=(e,t,n=3)=>{let s=0;const r=p_(50,250);return g_(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),l=o<=a;s=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&l?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},Ef=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},kf=e=>(...t)=>K.asap(()=>e(...t)),y_=ys.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function r(i){let o=i;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=r(window.location.href),function(o){const a=K.isString(o)?r(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}(),m_=ys.hasStandardBrowserEnv?{write(e,t,n,s,r,i){const o=[e+"="+encodeURIComponent(t)];K.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),K.isString(s)&&o.push("path="+s),K.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function w_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function b_(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function I0(e,t){return e&&!w_(t)?b_(e,t):t}const Bf=e=>e instanceof ms?{...e}:e;function Nr(e,t){t=t||{};const n={};function s(u,l,f){return K.isPlainObject(u)&&K.isPlainObject(l)?K.merge.call({caseless:f},u,l):K.isPlainObject(l)?K.merge({},l):K.isArray(l)?l.slice():l}function r(u,l,f){if(K.isUndefined(l)){if(!K.isUndefined(u))return s(void 0,u,f)}else return s(u,l,f)}function i(u,l){if(!K.isUndefined(l))return s(void 0,l)}function o(u,l){if(K.isUndefined(l)){if(!K.isUndefined(u))return s(void 0,u)}else return s(void 0,l)}function a(u,l,f){if(f in t)return s(u,l);if(f in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l)=>r(Bf(u),Bf(l),!0)};return K.forEach(Object.keys(Object.assign({},e,t)),function(l){const f=c[l]||r,h=f(e[l],t[l],l);K.isUndefined(h)&&f!==a||(n[l]=h)}),n}const $0=e=>{const t=Nr({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:a}=t;t.headers=o=ms.from(o),t.url=B0(I0(t.baseURL,t.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(K.isFormData(n)){if(ys.hasStandardBrowserEnv||ys.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...l]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...l].join("; "))}}if(ys.hasStandardBrowserEnv&&(s&&K.isFunction(s)&&(s=s(t)),s||s!==!1&&y_(t.url))){const u=r&&i&&m_.read(i);u&&o.set(r,u)}return t},__=typeof XMLHttpRequest<"u",T_=__&&function(e){return new Promise(function(n,s){const r=$0(e);let i=r.data;const o=ms.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=r,l,f,h,g,w;function b(){g&&g(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let T=new XMLHttpRequest;T.open(r.method.toUpperCase(),r.url,!0),T.timeout=r.timeout;function R(){if(!T)return;const x=ms.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:x,config:e,request:T};O0(function(O){n(O),b()},function(O){s(O),b()},S),T=null}"onloadend"in T?T.onloadend=R:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(R)},T.onabort=function(){T&&(s(new dt("Request aborted",dt.ECONNABORTED,e,T)),T=null)},T.onerror=function(){s(new dt("Network Error",dt.ERR_NETWORK,e,T)),T=null},T.ontimeout=function(){let E=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const S=r.transitional||P0;r.timeoutErrorMessage&&(E=r.timeoutErrorMessage),s(new dt(E,S.clarifyTimeoutError?dt.ETIMEDOUT:dt.ECONNABORTED,e,T)),T=null},i===void 0&&o.setContentType(null),"setRequestHeader"in T&&K.forEach(o.toJSON(),function(E,S){T.setRequestHeader(S,E)}),K.isUndefined(r.withCredentials)||(T.withCredentials=!!r.withCredentials),a&&a!=="json"&&(T.responseType=r.responseType),u&&([h,w]=qa(u,!0),T.addEventListener("progress",h)),c&&T.upload&&([f,g]=qa(c),T.upload.addEventListener("progress",f),T.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(l=x=>{T&&(s(!x||x.type?new Ri(null,e,T):x),T.abort(),T=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const A=h_(r.url);if(A&&ys.protocols.indexOf(A)===-1){s(new dt("Unsupported protocol "+A+":",dt.ERR_BAD_REQUEST,e));return}T.send(i||null)})},x_=(e,t)=>{let n=new AbortController,s;const r=function(c){if(!s){s=!0,o();const u=c instanceof Error?c:this.reason;n.abort(u instanceof dt?u:new Ri(u instanceof Error?u.message:u))}};let i=t&&setTimeout(()=>{r(new dt(`timeout ${t} of ms exceeded`,dt.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",r):c.unsubscribe(r))}),e=null)};e.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",r));const{signal:a}=n;return a.unsubscribe=o,[a,()=>{i&&clearTimeout(i),i=null}]},v_=x_,S_=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},A_=async function*(e,t,n){for await(const s of e)yield*S_(ArrayBuffer.isView(s)?s:await n(String(s)),t)},Pf=(e,t,n,s,r)=>{const i=A_(e,t,r);let o=0,a,c=u=>{a||(a=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:l,value:f}=await i.next();if(l){c(),u.close();return}let h=f.byteLength;if(n){let g=o+=h;n(g)}u.enqueue(new Uint8Array(f))}catch(l){throw c(l),l}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},mc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",L0=mc&&typeof ReadableStream=="function",Fu=mc&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),q0=(e,...t)=>{try{return!!e(...t)}catch{return!1}},E_=L0&&q0(()=>{let e=!1;const t=new Request(ys.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Uf=64*1024,Cu=L0&&q0(()=>K.isReadableStream(new Response("").body)),Na={stream:Cu&&(e=>e.body)};mc&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Na[t]&&(Na[t]=K.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new dt(`Response type '${t}' is not supported`,dt.ERR_NOT_SUPPORT,s)})})})(new Response);const k_=async e=>{if(e==null)return 0;if(K.isBlob(e))return e.size;if(K.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(K.isArrayBufferView(e)||K.isArrayBuffer(e))return e.byteLength;if(K.isURLSearchParams(e)&&(e=e+""),K.isString(e))return(await Fu(e)).byteLength},B_=async(e,t)=>{const n=K.toFiniteNumber(e.getContentLength());return n??k_(t)},P_=mc&&(async e=>{let{url:t,method:n,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:l,withCredentials:f="same-origin",fetchOptions:h}=$0(e);u=u?(u+"").toLowerCase():"text";let[g,w]=r||i||o?v_([r,i],o):[],b,T;const R=()=>{!b&&setTimeout(()=>{g&&g.unsubscribe()}),b=!0};let A;try{if(c&&E_&&n!=="get"&&n!=="head"&&(A=await B_(l,s))!==0){let q=new Request(t,{method:"POST",body:s,duplex:"half"}),O;if(K.isFormData(s)&&(O=q.headers.get("content-type"))&&l.setContentType(O),q.body){const[F,Y]=Ef(A,qa(kf(c)));s=Pf(q.body,Uf,F,Y,Fu)}}K.isString(f)||(f=f?"include":"omit"),T=new Request(t,{...h,signal:g,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:s,duplex:"half",credentials:f});let x=await fetch(T);const E=Cu&&(u==="stream"||u==="response");if(Cu&&(a||E)){const q={};["status","statusText","headers"].forEach(Se=>{q[Se]=x[Se]});const O=K.toFiniteNumber(x.headers.get("content-length")),[F,Y]=a&&Ef(O,qa(kf(a),!0))||[];x=new Response(Pf(x.body,Uf,F,()=>{Y&&Y(),E&&R()},Fu),q)}u=u||"text";let S=await Na[K.findKey(Na,u)||"text"](x,e);return!E&&R(),w&&w(),await new Promise((q,O)=>{O0(q,O,{data:S,headers:ms.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:T})})}catch(x){throw R(),x&&x.name==="TypeError"&&/fetch/i.test(x.message)?Object.assign(new dt("Network Error",dt.ERR_NETWORK,e,T),{cause:x.cause||x}):dt.from(x,x&&x.code,e,T)}}),Hu={http:j1,xhr:T_,fetch:P_};K.forEach(Hu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Rf=e=>`- ${e}`,U_=e=>K.isFunction(e)||e===null||e===!1,N0={getAdapter:e=>{e=K.isArray(e)?e:[e];const{length:t}=e;let n,s;const r={};for(let i=0;i<t;i++){n=e[i];let o;if(s=n,!U_(n)&&(s=Hu[(o=String(n)).toLowerCase()],s===void 0))throw new dt(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(Rf).join(`
`):" "+Rf(i[0]):"as no adapter specified";throw new dt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Hu};function fu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ri(null,e)}function Of(e){return fu(e),e.headers=ms.from(e.headers),e.data=du.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),N0.getAdapter(e.adapter||Rl.adapter)(e).then(function(s){return fu(e),s.data=du.call(e,e.transformResponse,s),s.headers=ms.from(s.headers),s},function(s){return R0(s)||(fu(e),s&&s.response&&(s.response.data=du.call(e,e.transformResponse,s.response),s.response.headers=ms.from(s.response.headers))),Promise.reject(s)})}const D0="1.7.4",Ol={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ol[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const If={};Ol.transitional=function(t,n,s){function r(i,o){return"[Axios v"+D0+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,a)=>{if(t===!1)throw new dt(r(o," has been removed"+(n?" in "+n:"")),dt.ERR_DEPRECATED);return n&&!If[o]&&(If[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,a):!0}};function R_(e,t,n){if(typeof e!="object")throw new dt("options must be an object",dt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const a=e[i],c=a===void 0||o(a,i,e);if(c!==!0)throw new dt("option "+i+" must be "+c,dt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new dt("Unknown option "+i,dt.ERR_BAD_OPTION)}}const ju={assertOptions:R_,validators:Ol},sr=ju.validators;let Da=class{constructor(t){this.defaults=t,this.interceptors={request:new Sf,response:new Sf}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Nr(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&ju.assertOptions(s,{silentJSONParsing:sr.transitional(sr.boolean),forcedJSONParsing:sr.transitional(sr.boolean),clarifyTimeoutError:sr.transitional(sr.boolean)},!1),r!=null&&(K.isFunction(r)?n.paramsSerializer={serialize:r}:ju.assertOptions(r,{encode:sr.function,serialize:sr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&K.merge(i.common,i[n.method]);i&&K.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),n.headers=ms.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let l,f=0,h;if(!c){const w=[Of.bind(this),void 0];for(w.unshift.apply(w,a),w.push.apply(w,u),h=w.length,l=Promise.resolve(n);f<h;)l=l.then(w[f++],w[f++]);return l}h=a.length;let g=n;for(f=0;f<h;){const w=a[f++],b=a[f++];try{g=w(g)}catch(T){b.call(this,T);break}}try{l=Of.call(this,g)}catch(w){return Promise.reject(w)}for(f=0,h=u.length;f<h;)l=l.then(u[f++],u[f++]);return l}getUri(t){t=Nr(this.defaults,t);const n=I0(t.baseURL,t.url);return B0(n,t.params,t.paramsSerializer)}};K.forEach(["delete","get","head","options"],function(t){Da.prototype[t]=function(n,s){return this.request(Nr(s||{},{method:t,url:n,data:(s||{}).data}))}});K.forEach(["post","put","patch"],function(t){function n(s){return function(i,o,a){return this.request(Nr(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Da.prototype[t]=n(),Da.prototype[t+"Form"]=n(!0)});const ha=Da;class Il{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(a=>{s.subscribe(a),i=a}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,a){s.reason||(s.reason=new Ri(i,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Il(function(r){t=r}),cancel:t}}}const O_=Il;function I_(e){return function(n){return e.apply(null,n)}}function $_(e){return K.isObject(e)&&e.isAxiosError===!0}const Wu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wu).forEach(([e,t])=>{Wu[t]=e});const L_=Wu;function M0(e){const t=new ha(e),n=y0(ha.prototype.request,t);return K.extend(n,ha.prototype,t,{allOwnKeys:!0}),K.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return M0(Nr(e,r))},n}const ln=M0(Rl);ln.Axios=ha;ln.CanceledError=Ri;ln.CancelToken=O_;ln.isCancel=R0;ln.VERSION=D0;ln.toFormData=gc;ln.AxiosError=dt;ln.Cancel=ln.CanceledError;ln.all=function(t){return Promise.all(t)};ln.spread=I_;ln.isAxiosError=$_;ln.mergeConfig=Nr;ln.AxiosHeaders=ms;ln.formToJSON=e=>U0(K.isHTMLForm(e)?new FormData(e):e);ln.getAdapter=N0.getAdapter;ln.HttpStatusCode=L_;ln.default=ln;const q_=ln;async function N_(e){var t;const{params:n,method:s,url:r,headers:i,body:o,overrides:a}=e,c={headers:i,method:s,url:r,params:n,data:o,withCredentials:(t=a==null?void 0:a.WITH_CREDENTIALS)!=null?t:!0};try{const u=await q_(c);return{status:u.status,statusText:u.statusText,data:u.data,headers:u.headers,config:u.config}}catch(u){const l=u;if(l.response)return l.response;throw u}}var Gu={},D_={get exports(){return Gu},set exports(e){Gu=e}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,f,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var g=new r(l,f||c,h),w=n?n+u:u;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],g]:c._events[w].push(g):(c._events[w]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new s:delete c._events[u]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,f;if(this._eventsCount===0)return u;for(f in l=this._events)t.call(l,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=n?n+u:u,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,w=new Array(g);h<g;h++)w[h]=f[h].fn;return w},a.prototype.listenerCount=function(u){var l=n?n+u:u,f=this._events[l];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,l,f,h,g,w){var b=n?n+u:u;if(!this._events[b])return!1;var T=this._events[b],R=arguments.length,A,x;if(T.fn){switch(T.once&&this.removeListener(u,T.fn,void 0,!0),R){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,l),!0;case 3:return T.fn.call(T.context,l,f),!0;case 4:return T.fn.call(T.context,l,f,h),!0;case 5:return T.fn.call(T.context,l,f,h,g),!0;case 6:return T.fn.call(T.context,l,f,h,g,w),!0}for(x=1,A=new Array(R-1);x<R;x++)A[x-1]=arguments[x];T.fn.apply(T.context,A)}else{var E=T.length,S;for(x=0;x<E;x++)switch(T[x].once&&this.removeListener(u,T[x].fn,void 0,!0),R){case 1:T[x].fn.call(T[x].context);break;case 2:T[x].fn.call(T[x].context,l);break;case 3:T[x].fn.call(T[x].context,l,f);break;case 4:T[x].fn.call(T[x].context,l,f,h);break;default:if(!A)for(S=1,A=new Array(R-1);S<R;S++)A[S-1]=arguments[S];T[x].fn.apply(T[x].context,A)}}return!0},a.prototype.on=function(u,l,f){return i(this,u,l,f,!1)},a.prototype.once=function(u,l,f){return i(this,u,l,f,!0)},a.prototype.removeListener=function(u,l,f,h){var g=n?n+u:u;if(!this._events[g])return this;if(!l)return o(this,g),this;var w=this._events[g];if(w.fn)w.fn===l&&(!h||w.once)&&(!f||w.context===f)&&o(this,g);else{for(var b=0,T=[],R=w.length;b<R;b++)(w[b].fn!==l||h&&!w[b].once||f&&w[b].context!==f)&&T.push(w[b]);T.length?this._events[g]=T.length===1?T[0]:T:o(this,g)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=n?n+u:u,this._events[l]&&o(this,l)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(D_);var z0=Object.defineProperty,M_=Object.getOwnPropertyDescriptor,wc=(e,t)=>{for(var n in t)z0(e,n,{get:t[n],enumerable:!0})},It=(e,t,n,s)=>{for(var r=s>1?void 0:s?M_(t,n):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(s?o(t,n,r):o(r))||r);return s&&r&&z0(t,n,r),r},z_=/^m(\/[0-9]+')+$/,F0=e=>e.replace("'",""),F_="ed25519 seed",C_=2147483648,C0=e=>{const n=dc.create(El,F_).update(t0(e)).digest(),s=n.slice(0,32),r=n.slice(32);return{key:s,chainCode:r}},H0=({key:e,chainCode:t},n)=>{const s=new ArrayBuffer(4);new DataView(s).setUint32(0,n);const r=new Uint8Array(s),i=new Uint8Array([0]),o=new Uint8Array([...i,...e,...r]),a=dc.create(El,t).update(o).digest(),c=a.slice(0,32),u=a.slice(32);return{key:c,chainCode:u}},H_=(e,t=!0)=>{const s=Us.sign.keyPair.fromSeed(e).secretKey.subarray(32),r=new Uint8Array([0]);return t?new Uint8Array([...r,...s]):s},j0=e=>z_.test(e)?!e.split("/").slice(1).map(F0).some(Number.isNaN):!1,W0=(e,t,n=C_)=>{if(!j0(e))throw new Error("Invalid derivation path");const{key:s,chainCode:r}=C0(t);return e.split("/").slice(1).map(F0).map(o=>parseInt(o,10)).reduce((o,a)=>H0(o,a+n),{key:s,chainCode:r})},j_="1.21.0";async function no(e){return new Promise(t=>{setTimeout(t,e)})}var $f="/v1";function W_(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith($f)||(t=`${t}${$f}`),t}var G0=2e5,K0=20,V0=20,Ma="0x1::aptos_coin::AptosCoin";function bc(e){let t,n,s;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,s=e.tags):t=e,(r,i,o)=>{if(o.value!=null)o.value=Lf(o.value,t,n,s);else if(o.get!=null)o.get=Lf(o.get,t,n,s);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function X0(e,t){return bc({ttlMs:e,hashFunction:t})}var pa=new Map;function G_(e){const t=new Set;for(const n of e){const s=pa.get(n);if(s)for(const r of s)t.has(r)||(r.clear(),t.add(r))}return t.size}function Lf(e,t,n=0,s){const r=Symbol("__memoized_map__");return function(...i){let o;const a=this;a.hasOwnProperty(r)||Object.defineProperty(a,r,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[r];if(Array.isArray(s))for(const u of s)pa.has(u)?pa.get(u).push(c):pa.set(u,[c]);if(t||i.length>0||n>0){let u;t===!0?u=i.map(h=>h.toString()).join("!"):t?u=t.apply(a,i):u=i[0];const l=`${u}__timestamp`;let f=!1;if(n>0)if(!c.has(l))f=!0;else{const h=c.get(l);f=Date.now()-h>n}c.has(u)&&!f?o=c.get(u):(o=e.apply(a,i),c.set(u,o),n>0&&c.set(l,Date.now()))}else{const u=a;c.has(u)?o=c.get(u):(o=e.apply(a,i),c.set(u,o))}return o}}var $l=class extends Error{constructor(e,t,n){super(n),this.name="AptosApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.data=t.data,this.request=e}},K_={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function V_(e,t,n,s,r,i){const o={...i==null?void 0:i.HEADERS,"x-aptos-client":`aptos-ts-sdk/${j_}`,"content-type":s??"application/json"};return i!=null&&i.TOKEN&&(o.Authorization=`Bearer ${i==null?void 0:i.TOKEN}`),await N_({url:e,method:t,body:n,params:r,headers:o,overrides:i})}async function Ll(e){const{url:t,endpoint:n,method:s,body:r,contentType:i,params:o,overrides:a}=e,c=`${t}/${n??""}`,u=await V_(c,s,r,i,o,a),l={status:u.status,statusText:u.statusText,data:u.data,headers:u.headers,config:u.config,url:c};if(l.status>=200&&l.status<300)return l;const f=K_[l.status];throw new $l(e,l,f??"Generic Error")}async function On(e){return await Ll({...e,method:"GET"})}async function Pr(e){return await Ll({...e,method:"POST"})}async function qf(e){const t=[];let n;const s=e.params;for(;;){s.start=n;const r=await On({url:e.url,endpoint:e.endpoint,params:s,originMethod:e.originMethod,overrides:e.overrides});if(n=r.headers["x-aptos-cursor"],delete r.headers,t.push(...r.data),n==null)break}return t}var za={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},J0={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},Ku={"https://fullnode.mainnet.aptoslabs.com/v1":"mainnet","https://fullnode.testnet.aptoslabs.com/v1":"testnet","https://fullnode.devnet.aptoslabs.com/v1":"devnet","http://127.0.0.1:8080/v1":"local"},Y0=(e=>(e.MAINNET="mainnet",e.TESTNET="testnet",e.DEVNET="devnet",e.LOCAL="local",e))(Y0||{}),xe=class ga{static fromBuffer(t){return ga.fromUint8Array(t)}static fromUint8Array(t){return new ga(e0(t))}static ensure(t){return typeof t=="string"?new ga(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(t0(this.noPrefix()))}},Ge={};wc(Ge,{AccountAddress:()=>Ut,AccountAuthenticator:()=>mr,AccountAuthenticatorEd25519:()=>lp,AccountAuthenticatorMultiEd25519:()=>fp,ArgumentABI:()=>Sc,AuthenticationKey:()=>Zu,ChainId:()=>Kl,ChangeSet:()=>hT,Ed25519PublicKey:()=>ls,Ed25519Signature:()=>Ms,EntryFunction:()=>Tc,EntryFunctionABI:()=>bo,FeePayerRawTransaction:()=>jl,Identifier:()=>Rn,Module:()=>fT,ModuleId:()=>wo,MultiAgentRawTransaction:()=>Hl,MultiEd25519PublicKey:()=>_c,MultiEd25519Signature:()=>Nl,MultiSig:()=>Ip,MultiSigTransactionPayload:()=>Rp,RawTransaction:()=>Di,RawTransactionWithData:()=>Cl,RotationProofChallenge:()=>gT,Script:()=>Fl,ScriptABI:()=>Ac,SignedTransaction:()=>xc,StructTag:()=>qi,Transaction:()=>Qp,TransactionArgument:()=>xs,TransactionArgumentAddress:()=>ed,TransactionArgumentBool:()=>nd,TransactionArgumentU128:()=>Zl,TransactionArgumentU16:()=>Xl,TransactionArgumentU256:()=>Ql,TransactionArgumentU32:()=>Jl,TransactionArgumentU64:()=>Yl,TransactionArgumentU8:()=>Vl,TransactionArgumentU8Vector:()=>td,TransactionAuthenticator:()=>Oi,TransactionAuthenticatorEd25519:()=>Dl,TransactionAuthenticatorFeePayer:()=>cp,TransactionAuthenticatorMultiAgent:()=>op,TransactionAuthenticatorMultiEd25519:()=>Ml,TransactionPayload:()=>$o,TransactionPayloadEntryFunction:()=>Gl,TransactionPayloadMultisig:()=>Fp,TransactionPayloadScript:()=>Wl,TransactionScriptABI:()=>sd,TypeArgumentABI:()=>vc,TypeTag:()=>vn,TypeTagAddress:()=>Dr,TypeTagBool:()=>Ii,TypeTagParser:()=>Ni,TypeTagParserError:()=>Bp,TypeTagSigner:()=>vp,TypeTagStruct:()=>Mr,TypeTagU128:()=>Li,TypeTagU16:()=>Uo,TypeTagU256:()=>Oo,TypeTagU32:()=>Ro,TypeTagU64:()=>$i,TypeTagU8:()=>wr,TypeTagVector:()=>Io,UserTransaction:()=>eg,WriteSet:()=>pT,objectStructTag:()=>cT,optionStructTag:()=>aT,stringStructTag:()=>zl});var Z0={};wc(Z0,{Deserializer:()=>ql,Serializer:()=>Wt,bcsSerializeBool:()=>rT,bcsSerializeBytes:()=>lr,bcsSerializeFixedBytes:()=>oT,bcsSerializeStr:()=>iT,bcsSerializeU128:()=>nT,bcsSerializeU16:()=>eT,bcsSerializeU256:()=>sT,bcsSerializeU32:()=>tT,bcsSerializeU8:()=>Vu,bcsSerializeUint64:()=>Q_,bcsToBytes:()=>bs,deserializeVector:()=>Nn,serializeVector:()=>xn,serializeVectorWithFunc:()=>Z_});var X_=2**8-1,J_=2**16-1,mo=2**32-1,ui=BigInt(2**64)-BigInt(1),Q0=BigInt(2**128)-BigInt(1),Y_=BigInt(2**256)-BigInt(1),Wt=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(t){for(;this.buffer.byteLength<this.offset+t;){const n=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(n).set(new Uint8Array(this.buffer)),this.buffer=n}}serialize(t){this.ensureBufferWillHandleSize(t.length),new Uint8Array(this.buffer,this.offset).set(t),this.offset+=t.length}serializeWithFunction(t,n,s){this.ensureBufferWillHandleSize(n);const r=new DataView(this.buffer,this.offset);t.apply(r,[0,s,!0]),this.offset+=n}serializeStr(t){const n=new TextEncoder;this.serializeBytes(n.encode(t))}serializeBytes(t){this.serializeU32AsUleb128(t.length),this.serialize(t)}serializeFixedBytes(t){this.serialize(t)}serializeBool(t){if(typeof t!="boolean")throw new Error("Value needs to be a boolean");const n=t?1:0;this.serialize(new Uint8Array([n]))}serializeU8(t){this.serialize(new Uint8Array([t]))}serializeU16(t){this.serializeWithFunction(DataView.prototype.setUint16,2,t)}serializeU32(t){this.serializeWithFunction(DataView.prototype.setUint32,4,t)}serializeU64(t){const n=BigInt(t.toString())&BigInt(mo),s=BigInt(t.toString())>>BigInt(32);this.serializeU32(Number(n)),this.serializeU32(Number(s))}serializeU128(t){const n=BigInt(t.toString())&ui,s=BigInt(t.toString())>>BigInt(64);this.serializeU64(n),this.serializeU64(s)}serializeU256(t){const n=BigInt(t.toString())&Q0,s=BigInt(t.toString())>>BigInt(128);this.serializeU128(n),this.serializeU128(s)}serializeU32AsUleb128(t){let n=t;const s=[];for(;n>>>7;)s.push(n&127|128),n>>>=7;s.push(n),this.serialize(new Uint8Array(s))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};It([Hr(0,X_)],Wt.prototype,"serializeU8",1);It([Hr(0,J_)],Wt.prototype,"serializeU16",1);It([Hr(0,mo)],Wt.prototype,"serializeU32",1);It([Hr(BigInt(0),ui)],Wt.prototype,"serializeU64",1);It([Hr(BigInt(0),Q0)],Wt.prototype,"serializeU128",1);It([Hr(BigInt(0),Y_)],Wt.prototype,"serializeU256",1);It([Hr(0,mo)],Wt.prototype,"serializeU32AsUleb128",1);function Hr(e,t,n){return(s,r,i)=>{const o=i.value;return i.value=function(c){const u=BigInt(c.toString());if(u>BigInt(t.toString())||u<BigInt(e.toString()))throw new Error(n||"Value is out of range");o.apply(this,[c])},i}}var ql=class{constructor(t){this.buffer=new ArrayBuffer(t.length),new Uint8Array(this.buffer).set(t,0),this.offset=0}read(t){if(this.offset+t>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const n=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,n}deserializeStr(){const t=this.deserializeBytes();return new TextDecoder().decode(t)}deserializeBytes(){const t=this.deserializeUleb128AsU32();return new Uint8Array(this.read(t))}deserializeFixedBytes(t){return new Uint8Array(this.read(t))}deserializeBool(){const t=new Uint8Array(this.read(1))[0];if(t!==1&&t!==0)throw new Error("Invalid boolean value");return t===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const t=this.deserializeU32(),n=this.deserializeU32();return BigInt(BigInt(n)<<BigInt(32)|BigInt(t))}deserializeU128(){const t=this.deserializeU64(),n=this.deserializeU64();return BigInt(n<<BigInt(64)|t)}deserializeU256(){const t=this.deserializeU128(),n=this.deserializeU128();return BigInt(n<<BigInt(128)|t)}deserializeUleb128AsU32(){let t=BigInt(0),n=0;for(;t<mo;){const s=this.deserializeU8();if(t|=BigInt(s&127)<<BigInt(n),!(s&128))break;n+=7}if(t>mo)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(t)}};function xn(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function Z_(e,t){const n=new Wt;n.serializeU32AsUleb128(e.length);const s=n[t];return e.forEach(r=>{s.call(n,r)}),n.getBytes()}function Nn(e,t){const n=e.deserializeUleb128AsU32(),s=[];for(let r=0;r<n;r+=1)s.push(t.deserialize(e));return s}function bs(e){const t=new Wt;return e.serialize(t),t.getBytes()}function Q_(e){const t=new Wt;return t.serializeU64(e),t.getBytes()}function Vu(e){const t=new Wt;return t.serializeU8(e),t.getBytes()}function eT(e){const t=new Wt;return t.serializeU16(e),t.getBytes()}function tT(e){const t=new Wt;return t.serializeU32(e),t.getBytes()}function nT(e){const t=new Wt;return t.serializeU128(e),t.getBytes()}function sT(e){const t=new Wt;return t.serializeU256(e),t.getBytes()}function rT(e){const t=new Wt;return t.serializeBool(e),t.getBytes()}function iT(e){const t=new Wt;return t.serializeStr(e),t.getBytes()}function lr(e){const t=new Wt;return t.serializeBytes(e),t.getBytes()}function oT(e){const t=new Wt;return t.serializeFixedBytes(e),t.getBytes()}var Fa=class os{constructor(t){if(t.length!==os.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let n=xe.ensure(t);n.noPrefix().length%2!==0&&(n=new xe(`0${n.noPrefix()}`));const s=n.toUint8Array();if(s.length>os.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(s.length===os.LENGTH)return new os(s);const r=new Uint8Array(os.LENGTH);return r.set(s,os.LENGTH-s.length),new os(r)}static isValid(t){if(t==="")return!1;let n=xe.ensure(t);return n.noPrefix().length%2!==0&&(n=new xe(`0${n.noPrefix()}`)),n.toUint8Array().length<=os.LENGTH}toHexString(){return xe.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new os(t.deserializeFixedBytes(os.LENGTH))}static standardizeAddress(t){const n=t.toLowerCase();return`0x${(n.startsWith("0x")?n.slice(2):n).padStart(64,"0")}`}};Fa.LENGTH=32;Fa.CORE_CODE_ADDRESS=Fa.fromHex("0x1");var Ut=Fa,ep=class ya{constructor(t){if(t.length!==ya.LENGTH)throw new Error(`Ed25519PublicKey length should be ${ya.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new ya(n)}};ep.LENGTH=32;var ls=ep,tp=class ma{constructor(t){if(this.value=t,t.length!==ma.LENGTH)throw new Error(`Ed25519Signature length should be ${ma.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new ma(n)}};tp.LENGTH=64;var Ms=tp,Xu=32,_c=class np{constructor(t,n){if(this.public_keys=t,this.threshold=n,n>Xu)throw new Error(`"threshold" cannot be larger than ${Xu}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*ls.LENGTH+1);return this.public_keys.forEach((n,s)=>{t.set(n.value,s*ls.LENGTH)}),t[this.public_keys.length*ls.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),s=n[n.length-1],r=[];for(let i=0;i<n.length-1;i+=ls.LENGTH){const o=i;r.push(new ls(n.subarray(o,o+ls.LENGTH)))}return new np(r,s)}},sp=class so{constructor(t,n){if(this.signatures=t,this.bitmap=n,n.length!==so.BITMAP_LEN)throw new Error(`"bitmap" length should be ${so.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*Ms.LENGTH+so.BITMAP_LEN);return this.signatures.forEach((n,s)=>{t.set(n.value,s*Ms.LENGTH)}),t.set(this.bitmap,this.signatures.length*Ms.LENGTH),t}static createBitmap(t){const s=new Uint8Array([0,0,0,0]),r=new Set;return t.forEach(i=>{if(i>=Xu)throw new Error(`Invalid bit value ${i}.`);if(r.has(i))throw new Error("Duplicated bits detected.");r.add(i);const o=Math.floor(i/8);let a=s[o];a|=128>>i%8,s[o]=a}),s}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),s=n.subarray(n.length-4),r=[];for(let i=0;i<n.length-s.length;i+=Ms.LENGTH){const o=i;r.push(new Ms(n.subarray(o,o+Ms.LENGTH)))}return new so(r,s)}};sp.BITMAP_LEN=4;var Nl=sp,Oi=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Dl.load(t);case 1:return Ml.load(t);case 2:return op.load(t);case 3:return cp.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${n}`)}}},Dl=class rp extends Oi{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=ls.deserialize(t),s=Ms.deserialize(t);return new rp(n,s)}},Ml=class ip extends Oi{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=_c.deserialize(t),s=Nl.deserialize(t);return new ip(n,s)}},op=class ap extends Oi{constructor(t,n,s){super(),this.sender=t,this.secondary_signer_addresses=n,this.secondary_signers=s}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),xn(this.secondary_signer_addresses,t),xn(this.secondary_signers,t)}static load(t){const n=mr.deserialize(t),s=Nn(t,Ut),r=Nn(t,mr);return new ap(n,s,r)}},cp=class up extends Oi{constructor(t,n,s,r){super(),this.sender=t,this.secondary_signer_addresses=n,this.secondary_signers=s,this.fee_payer=r}serialize(t){t.serializeU32AsUleb128(3),this.sender.serialize(t),xn(this.secondary_signer_addresses,t),xn(this.secondary_signers,t),this.fee_payer.address.serialize(t),this.fee_payer.authenticator.serialize(t)}static load(t){const n=mr.deserialize(t),s=Nn(t,Ut),r=Nn(t,mr),i=Ut.deserialize(t),o=mr.deserialize(t),a={address:i,authenticator:o};return new up(n,s,r,a)}},mr=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return lp.load(t);case 1:return fp.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${n}`)}}},lp=class dp extends mr{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=ls.deserialize(t),s=Ms.deserialize(t);return new dp(n,s)}},fp=class hp extends mr{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=_c.deserialize(t),s=Nl.deserialize(t);return new hp(n,s)}},Rn=class pp{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const n=t.deserializeStr();return new pp(n)}},vn=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Ii.load(t);case 1:return wr.load(t);case 2:return $i.load(t);case 3:return Li.load(t);case 4:return Dr.load(t);case 5:return vp.load(t);case 6:return Io.load(t);case 7:return Mr.load(t);case 8:return Uo.load(t);case 9:return Ro.load(t);case 10:return Oo.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}},Ii=class gp extends vn{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new gp}},wr=class yp extends vn{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new yp}},Uo=class mp extends vn{serialize(t){t.serializeU32AsUleb128(8)}static load(t){return new mp}},Ro=class wp extends vn{serialize(t){t.serializeU32AsUleb128(9)}static load(t){return new wp}},$i=class bp extends vn{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new bp}},Li=class _p extends vn{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new _p}},Oo=class Tp extends vn{serialize(t){t.serializeU32AsUleb128(10)}static load(t){return new Tp}},Dr=class xp extends vn{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new xp}},vp=class Sp extends vn{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new Sp}},Io=class Ap extends vn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const n=vn.deserialize(t);return new Ap(n)}},Mr=class Ep extends vn{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const n=qi.deserialize(t);return new Ep(n)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===Ut.CORE_CODE_ADDRESS.toHexString()}},qi=class Ju{constructor(t,n,s,r){this.address=t,this.module_name=n,this.name=s,this.type_args=r}static fromString(t){const n=new Ni(t).parseTypeTag();return new Ju(n.value.address,n.value.module_name,n.value.name,n.value.type_args)}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),xn(this.type_args,t)}static deserialize(t){const n=Ut.deserialize(t),s=Rn.deserialize(t),r=Rn.deserialize(t),i=Nn(t,vn);return new Ju(n,s,r,i)}},zl=new qi(Ut.fromHex("0x1"),new Rn("string"),new Rn("String"),[]);function aT(e){return new qi(Ut.fromHex("0x1"),new Rn("option"),new Rn("Option"),[e])}function cT(e){return new qi(Ut.fromHex("0x1"),new Rn("object"),new Rn("Object"),[e])}function dr(e){throw new Bp(e)}function Nf(e){return!!e.match(/\s/)}function Df(e){return!!e.match(/[_A-Za-z0-9]/g)}function uT(e){return!!e.match(/T\d+/g)}function lT(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];dr("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(Nf(n)){let s="";for(let r=t;r<e.length;r+=1){const i=e[r];if(Nf(i))s=`${s}${i}`;else break}return[["SPACE",s],s.length]}else if(Df(n)){let s="";for(let r=t;r<e.length;r+=1){const i=e[r];if(Df(i))s=`${s}${i}`;else break}return uT(s)?[["GENERIC",s],s.length]:[["IDENT",s],s.length]}}throw new Error("Unrecognized token.")}function dT(e){let t=0;const n=[];for(;t<e.length;){const[s,r]=lT(e,t);s[0]!=="SPACE"&&n.push(s),t+=r}return n}var Ni=class kp{constructor(t,n){this.typeTags=[],this.tokens=dT(t),this.typeTags=n||[]}consume(t){const n=this.tokens.shift();(!n||n[1]!==t)&&dr("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(t,n){const s=[];for(this.tokens.length<=0&&dr("Invalid type tag.");this.tokens[0][1]!==t&&(s.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&n)));)this.tokens.length<=0&&dr("Invalid type tag.");return s}parseTypeTag(){this.tokens.length===0&&dr("Invalid type tag.");const[t,n]=this.tokens.shift();if(n==="u8")return new wr;if(n==="u16")return new Uo;if(n==="u32")return new Ro;if(n==="u64")return new $i;if(n==="u128")return new Li;if(n==="u256")return new Oo;if(n==="bool")return new Ii;if(n==="address")return new Dr;if(n==="vector"){this.consume("<");const s=this.parseTypeTag();return this.consume(">"),new Io(s)}if(n==="string")return new Mr(zl);if(t==="IDENT"&&(n.startsWith("0x")||n.startsWith("0X"))){const s=Ut.fromHex(n);this.consume("::");const[r,i]=this.tokens.shift();r!=="IDENT"&&dr("Invalid type tag."),this.consume("::");const[o,a]=this.tokens.shift();if(o!=="IDENT"&&dr("Invalid type tag."),Ut.CORE_CODE_ADDRESS.toHexString()===s.toHexString()&&i==="object"&&a==="Object")return this.consumeWholeGeneric(),new Dr;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));const u=new qi(s,new Rn(i),new Rn(a),c);return new Mr(u)}if(t==="GENERIC"){this.typeTags.length===0&&dr("Can't convert generic type since no typeTags were specified.");const s=parseInt(n.substring(1),10);return new kp(this.typeTags[s]).parseTypeTag()}throw new Error("Invalid type tag.")}},Bp=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}},Di=class Pp{constructor(t,n,s,r,i,o,a){this.sender=t,this.sequence_number=n,this.payload=s,this.max_gas_amount=r,this.gas_unit_price=i,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const n=Ut.deserialize(t),s=t.deserializeU64(),r=$o.deserialize(t),i=t.deserializeU64(),o=t.deserializeU64(),a=t.deserializeU64(),c=Kl.deserialize(t);return new Pp(n,s,r,i,o,a,c)}},Fl=class Up{constructor(t,n,s){this.code=t,this.ty_args=n,this.args=s}serialize(t){t.serializeBytes(this.code),xn(this.ty_args,t),xn(this.args,t)}static deserialize(t){const n=t.deserializeBytes(),s=Nn(t,vn),r=Nn(t,xs);return new Up(n,s,r)}},Tc=class wa{constructor(t,n,s,r){this.module_name=t,this.function_name=n,this.ty_args=s,this.args=r}static natural(t,n,s,r){return new wa(wo.fromStr(t),new Rn(n),s,r)}static natual(t,n,s,r){return wa.natural(t,n,s,r)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),xn(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{t.serializeBytes(n)})}static deserialize(t){const n=wo.deserialize(t),s=Rn.deserialize(t),r=Nn(t,vn),i=t.deserializeUleb128AsU32(),o=[];for(let c=0;c<i;c+=1)o.push(t.deserializeBytes());const a=o;return new wa(n,s,r,a)}},Rp=class Op{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new Op(Tc.deserialize(t))}},Ip=class $p{constructor(t,n){this.multisig_address=t,this.transaction_payload=n}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const n=Ut.deserialize(t),s=t.deserializeBool();let r;return s&&(r=Rp.deserialize(t)),new $p(n,r)}},fT=class Lp{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const n=t.deserializeBytes();return new Lp(n)}},wo=class Yu{constructor(t,n){this.address=t,this.name=n}static fromStr(t){const n=t.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new Yu(Ut.fromHex(new xe(n[0])),new Rn(n[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const n=Ut.deserialize(t),s=Rn.deserialize(t);return new Yu(n,s)}},hT=class{serialize(t){throw new Error("Not implemented.")}static deserialize(t){throw new Error("Not implemented.")}},pT=class{serialize(t){throw new Error("Not implmented.")}static deserialize(t){throw new Error("Not implmented.")}},xc=class qp{constructor(t,n){this.raw_txn=t,this.authenticator=n}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const n=Di.deserialize(t),s=Oi.deserialize(t);return new qp(n,s)}},Cl=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Hl.load(t);case 1:return jl.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${n}`)}}},Hl=class Np extends Cl{constructor(t,n){super(),this.raw_txn=t,this.secondary_signer_addresses=n}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),xn(this.secondary_signer_addresses,t)}static load(t){const n=Di.deserialize(t),s=Nn(t,Ut);return new Np(n,s)}},jl=class Dp extends Cl{constructor(t,n,s){super(),this.raw_txn=t,this.secondary_signer_addresses=n,this.fee_payer_address=s}serialize(t){t.serializeU32AsUleb128(1),this.raw_txn.serialize(t),xn(this.secondary_signer_addresses,t),this.fee_payer_address.serialize(t)}static load(t){const n=Di.deserialize(t),s=Nn(t,Ut),r=Ut.deserialize(t);return new Dp(n,s,r)}},$o=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Wl.load(t);case 2:return Gl.load(t);case 3:return Fp.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}},Wl=class Mp extends $o{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const n=Fl.deserialize(t);return new Mp(n)}},Gl=class zp extends $o{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const n=Tc.deserialize(t);return new zp(n)}},Fp=class Cp extends $o{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=Ip.deserialize(t);return new Cp(n)}},Kl=class Hp{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const n=t.deserializeU8();return new Hp(n)}},xs=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Vl.load(t);case 1:return Yl.load(t);case 2:return Zl.load(t);case 3:return ed.load(t);case 4:return td.load(t);case 5:return nd.load(t);case 6:return Xl.load(t);case 7:return Jl.load(t);case 8:return Ql.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},Vl=class jp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const n=t.deserializeU8();return new jp(n)}},Xl=class Wp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const n=t.deserializeU16();return new Wp(n)}},Jl=class Gp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const n=t.deserializeU32();return new Gp(n)}},Yl=class Kp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const n=t.deserializeU64();return new Kp(n)}},Zl=class Vp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const n=t.deserializeU128();return new Vp(n)}},Ql=class Xp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const n=t.deserializeU256();return new Xp(n)}},ed=class Jp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=Ut.deserialize(t);return new Jp(n)}},td=class Yp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const n=t.deserializeBytes();return new Yp(n)}},nd=class Zp extends xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const n=t.deserializeBool();return new Zp(n)}},Qp=class{getHashSalt(){const t=mi.create();return t.update("APTOS::Transaction"),t.digest()}static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return eg.load(t);default:throw new Error(`Unknown variant index for Transaction: ${n}`)}}},eg=class tg extends Qp{constructor(t){super(),this.value=t}hash(){const t=mi.create();return t.update(this.getHashSalt()),t.update(bs(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new tg(xc.deserialize(t))}},vc=class ng{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const n=t.deserializeStr();return new ng(n)}},Sc=class sg{constructor(t,n){this.name=t,this.type_tag=n}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const n=t.deserializeStr(),s=vn.deserialize(t);return new sg(n,s)}},Ac=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return sd.load(t);case 1:return bo.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${n}`)}}},sd=class rg extends Ac{constructor(t,n,s,r,i){super(),this.name=t,this.doc=n,this.code=s,this.ty_args=r,this.args=i}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),xn(this.ty_args,t),xn(this.args,t)}static load(t){const n=t.deserializeStr(),s=t.deserializeStr(),r=t.deserializeBytes(),i=Nn(t,vc),o=Nn(t,Sc);return new rg(n,s,r,i,o)}},bo=class ig extends Ac{constructor(t,n,s,r,i){super(),this.name=t,this.module_name=n,this.doc=s,this.ty_args=r,this.args=i}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),xn(this.ty_args,t),xn(this.args,t)}static load(t){const n=t.deserializeStr(),s=wo.deserialize(t),r=t.deserializeStr(),i=Nn(t,vc),o=Nn(t,Sc);return new ig(n,s,r,i,o)}},Lo=class ei{constructor(t){if(t.length!==ei.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const n=t.toBytes(),s=new Uint8Array(n.length+1);s.set(n),s.set([ei.MULTI_ED25519_SCHEME],n.length);const r=mi.create();return r.update(s),new ei(r.digest())}static fromEd25519PublicKey(t){const n=t.value,s=new Uint8Array(n.length+1);s.set(n),s.set([ei.ED25519_SCHEME],n.length);const r=mi.create();return r.update(s),new ei(r.digest())}derivedAddress(){return xe.fromUint8Array(this.bytes)}};Lo.LENGTH=32;Lo.MULTI_ED25519_SCHEME=1;Lo.ED25519_SCHEME=0;Lo.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var Zu=Lo,gT=class{constructor(t,n,s,r,i,o,a){this.accountAddress=t,this.moduleName=n,this.structName=s,this.sequenceNumber=r,this.originator=i,this.currentAuthKey=o,this.newPublicKey=a}serialize(t){this.accountAddress.serialize(t),t.serializeStr(this.moduleName),t.serializeStr(this.structName),t.serializeU64(this.sequenceNumber),this.originator.serialize(t),this.currentAuthKey.serialize(t),t.serializeBytes(this.newPublicKey)}},og=class ba{static fromAptosAccountObject(t){return new ba(xe.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(t){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(t)}static fromDerivePath(t,n){if(!ba.isValidPath(t))throw new Error("Invalid derivation path");const s=n.trim().split(/\s+/).map(i=>i.toLowerCase()).join(" "),{key:r}=W0(t,e0(Vb(s)));return new ba(r)}constructor(t,n){t?this.signingKey=Us.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=Us.sign.keyPair(),this.accountAddress=xe.ensure(n||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new ls(this.signingKey.publicKey);return Zu.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,n){const s=bs(Ut.fromHex(t)),r=new Uint8Array([...s,...n,Zu.DERIVE_RESOURCE_ACCOUNT_SCHEME]),i=mi.create();return i.update(r),xe.fromUint8Array(i.digest())}static getCollectionID(t,n){const s=new TextEncoder().encode(`${t}::${n}`),r=Ab.create();return r.update(s),xe.fromUint8Array(r.digest())}pubKey(){return xe.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const n=Us.sign.detached(t,this.signingKey.secretKey);return xe.fromUint8Array(n)}signHexString(t){const n=xe.ensure(t).toUint8Array();return this.signBuffer(n)}verifySignature(t,n){const s=xe.ensure(t).toUint8Array(),r=xe.ensure(n).toUint8Array();return Us.sign.detached.verify(s,r,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:xe.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};It([bc()],og.prototype,"authKey",1);var Ca=og;function ds(e){return e instanceof Ca?e.address():xe.ensure(e)}var qo=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,yT=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,mT=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,ag=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,wT=`
    query getAccountCoinsDataCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,bT=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,_T=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${yT}
${mT}`,TT=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,xT=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,vT=`
    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {
  account_transactions(
    where: $where_condition
    order_by: $order_by
    limit: $limit
    offset: $offset
  ) {
    token_activities_v2 {
      ...TokenActivitiesFields
    }
    transaction_version
    account_address
  }
}
    ${ag}`,ST=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {
  current_collections_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,AT=`
    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,ET=`
    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,kT=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,BT=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,PT=`
    query getNumberOfDelegators($poolAddress: String) {
  num_active_delegator_per_pool(
    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: "0"}}
    distinct_on: pool_address
  ) {
    num_active_delegator
    pool_address
  }
}
    `,UT=`
    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${qo}`,RT=`
    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${qo}`,OT=`
    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${ag}`,IT=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,$T=`
    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${qo}`,LT=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,qT=`
    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${qo}`,NT=`
    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${qo}`,DT=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,MT=`
    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {
  user_transactions(
    order_by: $order_by
    where: $where_condition
    limit: $limit
    offset: $offset
  ) {
    version
  }
}
    `;function Ec(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function rd(e){if(Ec(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function Ir(e){if(Ec(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function $r(e){return Ec(e,["number","bigint","string"]),BigInt(e)}function kc(e,t,n){id(e,t,n)}function id(e,t,n,s){if(t instanceof Ii)n.serializeBool(rd(e));else if(t instanceof wr)n.serializeU8(Ir(e));else if(t instanceof Uo)n.serializeU16(Ir(e));else if(t instanceof Ro)n.serializeU32(Ir(e));else if(t instanceof $i)n.serializeU64($r(e));else if(t instanceof Li)n.serializeU128($r(e));else if(t instanceof Oo)n.serializeU256($r(e));else if(t instanceof Dr)cg(e,n);else if(t instanceof Io)zT(e,t,n);else if(t instanceof Mr)FT(e,t,n);else throw new Error("Unsupported arg type.")}function cg(e,t){let n;if(typeof e=="string"||e instanceof xe)n=Ut.fromHex(e);else if(e instanceof Ut)n=e;else throw new Error("Invalid account address.");n.serialize(t)}function zT(e,t,n,s){if(t.value instanceof wr){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(e instanceof xe){n.serializeBytes(e.toUint8Array());return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(r=>id(r,t.value,n))}function FT(e,t,n,s){const{address:r,module_name:i,name:o,type_args:a}=t.value,c=`${xe.fromUint8Array(r.address).toShortString()}::${i.value}::${o.value}`;if(c==="0x1::string::String")Ec(e,["string"]),n.serializeStr(e);else if(c==="0x1::object::Object")cg(e,n);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);CT(e,a[0],n)}else throw new Error("Unsupported struct type in function argument")}function CT(e,t,n,s){e==null?n.serializeU32AsUleb128(0):(n.serializeU32AsUleb128(1),id(e,t,n))}function ug(e,t){if(t instanceof Ii)return new nd(rd(e));if(t instanceof wr)return new Vl(Ir(e));if(t instanceof Uo)return new Xl(Ir(e));if(t instanceof Ro)return new Jl(Ir(e));if(t instanceof $i)return new Yl($r(e));if(t instanceof Li)return new Zl($r(e));if(t instanceof Oo)return new Ql($r(e));if(t instanceof Dr){let n;if(typeof e=="string"||e instanceof xe)n=Ut.fromHex(e);else if(e instanceof Ut)n=e;else throw new Error("Invalid account address.");return new ed(n)}if(t instanceof Io&&t.value instanceof wr){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new td(e)}throw new Error("Unknown type for TransactionArgument.")}var HT="APTOS::RawTransaction",Mf="APTOS::RawTransactionWithData",ps=class{constructor(t,n){this.rawTxnBuilder=n,this.signingFunction=t}build(t,n,s){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(t,n,s)}static getSigningMessage(t){const n=mi.create();if(t instanceof Di)n.update(HT);else if(t instanceof Hl)n.update(Mf);else if(t instanceof jl)n.update(Mf);else throw new Error("Unknown transaction type.");const s=n.digest(),r=bs(t),i=new Uint8Array(s.length+r.length);return i.set(s),i.set(r,s.length),i}},_a=class extends ps{constructor(t,n,s){super(t,s),this.publicKey=n}rawToSigned(t){const n=ps.getSigningMessage(t),s=this.signingFunction(n),r=new Dl(new ls(this.publicKey),s);return new xc(t,r)}sign(t){return bs(this.rawToSigned(t))}},lg=class extends ps{constructor(t,n){super(t),this.publicKey=n}rawToSigned(t){const n=ps.getSigningMessage(t),s=this.signingFunction(n),r=new Ml(this.publicKey,s);return new xc(t,r)}sign(t){return bs(this.rawToSigned(t))}},dg=class Qu{constructor(t,n){this.abiMap=new Map,t.forEach(s=>{const r=new ql(s),i=Ac.deserialize(r);let o;if(i instanceof bo){const a=i,{address:c,name:u}=a.module_name;o=`${xe.fromUint8Array(c.address).toShortString()}::${u.value}::${a.name}`}else o=i.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,i)}),this.builderConfig={maxGasAmount:BigInt(G0),expSecFromNow:K0,...n}}static toBCSArgs(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((s,r)=>{const i=new Wt;return kc(s,t[r].type_tag,i),i.getBytes()})}static toTransactionArguments(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((s,r)=>ug(s,t[r].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,n,s){const r=n.map(a=>new Ni(a).parseTypeTag());let i;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const o=this.abiMap.get(t);if(o instanceof bo){const a=o,c=Qu.toBCSArgs(a.args,s);i=new Gl(new Tc(a.module_name,new Rn(a.name),r,c))}else if(o instanceof sd){const a=o,c=Qu.toTransactionArguments(a.args,s);i=new Wl(new Fl(a.code,r,c))}else throw new Error("Unknown ABI format.");return i}build(t,n,s){const{sender:r,sequenceNumber:i,gasUnitPrice:o,maxGasAmount:a,expSecFromNow:c,chainId:u}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");const l=r instanceof Ut?r:Ut.fromHex(r),f=BigInt(Math.floor(Date.now()/1e3)+Number(c)),h=this.buildTransactionPayload(t,n,s);if(h)return new Di(l,BigInt(i),h,BigInt(a),BigInt(o),f,new Kl(Number(u)));throw new Error("Invalid ABI.")}},Ct=class{constructor(t,n){this.aptosClient=t,this.builderConfig=n}async fetchABI(t){const s=(await this.aptosClient.getAccountModules(t)).map(i=>i.abi).flatMap(i=>i.exposed_functions.filter(o=>o.is_entry).map(o=>({fullName:`${i.address}::${i.name}::${o.name}`,...o}))),r=new Map;return s.forEach(i=>{r.set(i.fullName,i)}),r}async build(t,n,s){if(t=(E=>E.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");const[o,a]=t.split("::"),c=await this.fetchABI(o);if(!c.has(t))throw new Error(`${t} doesn't exist.`);const u=c.get(t),f=u.params.filter(E=>E!=="signer"&&E!=="&signer").map((E,S)=>new Sc(`var${S}`,new Ni(E,n).parseTypeTag())),h=new bo(u.name,wo.fromStr(`${o}::${a}`),"",u.generic_type_params.map((E,S)=>new vc(`${S}`)),f),{sender:g,...w}=this.builderConfig,b=g instanceof Ut?xe.fromUint8Array(g.address):g,[{sequence_number:T},R,{gas_estimate:A}]=await Promise.all([w!=null&&w.sequenceNumber?Promise.resolve({sequence_number:w==null?void 0:w.sequenceNumber}):this.aptosClient.getAccount(b),w!=null&&w.chainId?Promise.resolve(w==null?void 0:w.chainId):this.aptosClient.getChainId(),w!=null&&w.gasUnitPrice?Promise.resolve({gas_estimate:w==null?void 0:w.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new dg([bs(h)],{sender:g,sequenceNumber:T,chainId:R,gasUnitPrice:BigInt(A),...w}).build(t,n,s)}};It([X0(10*60*1e3)],Ct.prototype,"fetchABI",1);var sn=class ti{constructor(t,n,s=!1){if(!t)throw new Error("Node URL cannot be empty.");s?this.nodeUrl=t:this.nodeUrl=W_(t),this.config=n==null?{}:{...n}}async getAccount(t){const{data:n}=await On({url:this.nodeUrl,endpoint:`accounts/${xe.ensure(t).hex()}`,originMethod:"getAccount",overrides:{...this.config}});return n}async getAccountTransactions(t,n){const{data:s}=await On({url:this.nodeUrl,endpoint:`accounts/${xe.ensure(t).hex()}/transactions`,originMethod:"getAccountTransactions",params:{start:n==null?void 0:n.start,limit:n==null?void 0:n.limit},overrides:{...this.config}});return s}async getAccountModules(t,n){return await qf({url:this.nodeUrl,endpoint:`accounts/${t}/modules`,params:{ledger_version:n==null?void 0:n.ledgerVersion,limit:1e3},originMethod:"getAccountModules",overrides:{...this.config}})}async getAccountModule(t,n,s){const{data:r}=await On({url:this.nodeUrl,endpoint:`accounts/${xe.ensure(t).hex()}/module/${n}`,originMethod:"getAccountModule",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return r}async getAccountResources(t,n){return await qf({url:this.nodeUrl,endpoint:`accounts/${t}/resources`,params:{ledger_version:n==null?void 0:n.ledgerVersion,limit:9999},originMethod:"getAccountResources",overrides:{...this.config}})}async getAccountResource(t,n,s){const{data:r}=await On({url:this.nodeUrl,endpoint:`accounts/${xe.ensure(t).hex()}/resource/${n}`,originMethod:"getAccountResource",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return r}static generateBCSTransaction(t,n){return new _a(r=>{const i=t.signBuffer(r);return new Ge.Ed25519Signature(i.toUint8Array())},t.pubKey().toUint8Array()).sign(n)}static generateBCSSimulation(t,n){return new _a(r=>{const i=new Uint8Array(64);return new Ge.Ed25519Signature(i)},t.pubKey().toUint8Array()).sign(n)}async generateTransaction(t,n,s){const r={sender:t};if(s!=null&&s.sequence_number&&(r.sequenceNumber=s.sequence_number),s!=null&&s.gas_unit_price&&(r.gasUnitPrice=s.gas_unit_price),s!=null&&s.max_gas_amount&&(r.maxGasAmount=s.max_gas_amount),s!=null&&s.expiration_timestamp_secs){const o=Number.parseInt(s.expiration_timestamp_secs,10);r.expSecFromNow=o-Math.floor(Date.now()/1e3)}return new Ct(this,r).build(n.function,n.type_arguments,n.arguments)}async generateFeePayerTransaction(t,n,s,r=[],i){const o=await this.generateTransaction(t,n,i),a=r.map(u=>Ut.fromHex(u));return new Ge.FeePayerRawTransaction(o,a,Ut.fromHex(s))}async submitFeePayerTransaction(t,n,s,r=[]){const i=new Ge.TransactionAuthenticatorFeePayer(n,t.secondary_signer_addresses,r,{address:t.fee_payer_address,authenticator:s}),o=bs(new Ge.SignedTransaction(t.raw_txn,i));return await this.submitSignedBCSTransaction(o)}async signMultiTransaction(t,n){const s=new Ge.Ed25519Signature(t.signBuffer(ps.getSigningMessage(n)).toUint8Array()),r=new Ge.AccountAuthenticatorEd25519(new Ge.Ed25519PublicKey(t.signingKey.publicKey),s);return Promise.resolve(r)}async signTransaction(t,n){return Promise.resolve(ti.generateBCSTransaction(t,n))}async getEventsByCreationNumber(t,n,s){const{data:r}=await On({url:this.nodeUrl,endpoint:`accounts/${xe.ensure(t).hex()}/events/${n}`,originMethod:"getEventsByCreationNumber",params:{start:s==null?void 0:s.start,limit:s==null?void 0:s.limit},overrides:{...this.config}});return r}async getEventsByEventHandle(t,n,s,r){const{data:i}=await On({url:this.nodeUrl,endpoint:`accounts/${xe.ensure(t).hex()}/events/${n}/${s}`,originMethod:"getEventsByEventHandle",params:{start:r==null?void 0:r.start,limit:r==null?void 0:r.limit},overrides:{...this.config}});return i}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,n,s){let r;return t instanceof Ca?r=ti.generateBCSSimulation(t,n):t instanceof _c?r=new lg(()=>{const{threshold:o}=t,a=[],c=[];for(let l=0;l<o;l+=1)a.push(l),c.push(new Ge.Ed25519Signature(new Uint8Array(64)));const u=Ge.MultiEd25519Signature.createBitmap(a);return new Ge.MultiEd25519Signature(c,u)},t).sign(n):r=new _a(()=>{const o=new Uint8Array(64);return new Ge.Ed25519Signature(o)},t.toBytes()).sign(n),this.submitBCSSimulation(r,s)}async submitSignedBCSTransaction(t){const{data:n}=await Pr({url:this.nodeUrl,body:t,endpoint:"transactions",originMethod:"submitSignedBCSTransaction",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return n}async submitBCSSimulation(t,n){var s,r,i;const o={estimate_gas_unit_price:(s=n==null?void 0:n.estimateGasUnitPrice)!=null?s:!1,estimate_max_gas_amount:(r=n==null?void 0:n.estimateMaxGasAmount)!=null?r:!1,estimate_prioritized_gas_unit_price:(i=n==null?void 0:n.estimatePrioritizedGasUnitPrice)!=null?i:!1},{data:a}=await Pr({url:this.nodeUrl,body:t,endpoint:"transactions/simulate",params:o,originMethod:"submitBCSSimulation",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return a}async getTransactions(t){var n;const{data:s}=await On({url:this.nodeUrl,endpoint:"transactions",originMethod:"getTransactions",params:{start:(n=t==null?void 0:t.start)==null?void 0:n.toString(),limit:t==null?void 0:t.limit},overrides:{...this.config}});return s}async getTransactionByHash(t){const{data:n}=await On({url:this.nodeUrl,endpoint:`transactions/by_hash/${t}`,originMethod:"getTransactionByHash",overrides:{...this.config}});return n}async getTransactionByVersion(t){const{data:n}=await On({url:this.nodeUrl,endpoint:`transactions/by_version/${t}`,originMethod:"getTransactionByVersion",overrides:{...this.config}});return n}async transactionPending(t){try{return(await this.getTransactionByHash(t)).type==="pending_transaction"}catch(n){if((n==null?void 0:n.status)===404)return!0;throw n}}async waitForTransactionWithResult(t,n){var s,r;const i=(s=n==null?void 0:n.timeoutSecs)!=null?s:V0,o=(r=n==null?void 0:n.checkSuccess)!=null?r:!1;let a=!0,c=0,u;for(;a&&!(c>=i);){try{if(u=await this.getTransactionByHash(t),a=u.type==="pending_transaction",!a)break}catch(l){const f=l instanceof Dn,h=f&&l.status!==404&&l.status>=400&&l.status<500;if(!f||h)throw l}await no(1e3),c+=1}if(u===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new fg(`Waiting for transaction ${t} timed out after ${i} seconds`,u);if(!o)return u;if(!(u!=null&&u.success))throw new hg(`Transaction ${t} failed with an error: ${u.vm_status}`,u);return u}async waitForTransaction(t,n){await this.waitForTransactionWithResult(t,n)}async getLedgerInfo(){const{data:t}=await On({url:this.nodeUrl,originMethod:"getLedgerInfo",overrides:{...this.config}});return t}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,n,s){var r;return(await Pr({url:this.nodeUrl,body:n,endpoint:`tables/${t}/item`,originMethod:"getTableItem",params:{ledger_version:(r=s==null?void 0:s.ledgerVersion)==null?void 0:r.toString()},overrides:{...this.config}})).data}async generateRawTransaction(t,n,s){const[{sequence_number:r},i,{gas_estimate:o}]=await Promise.all([s!=null&&s.providedSequenceNumber?Promise.resolve({sequence_number:s.providedSequenceNumber}):this.getAccount(t),this.getChainId(),s!=null&&s.gasUnitPrice?Promise.resolve({gas_estimate:s.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:c,expireTimestamp:u}={maxGasAmount:BigInt(G0),gasUnitPrice:BigInt(o),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+K0),...s};return new Ge.RawTransaction(Ge.AccountAddress.fromHex(t),BigInt(r),n,a,c,u,new Ge.ChainId(i))}async generateSignSubmitTransaction(t,n,s){const r=await this.generateRawTransaction(t.address(),n,s),i=ti.generateBCSTransaction(t,r);return(await this.submitSignedBCSTransaction(i)).hash}async signAndSubmitTransaction(t,n){const s=ti.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(t,n,s,r){const i=new Wt;xn(s,i);const o=new Ge.TransactionPayloadEntryFunction(Ge.EntryFunction.natural("0x1::code","publish_package_txn",[],[lr(n),i.getBytes()]));return this.generateSignSubmitTransaction(t,o,r)}async createResourceAccountAndPublishPackage(t,n,s,r,i){const o=new Wt;xn(r,o);const a=new Ge.TransactionPayloadEntryFunction(Ge.EntryFunction.natural("0x1::resource_account","create_resource_account_and_publish_package",[],[lr(n),lr(s),o.getBytes()]));return this.generateSignSubmitTransaction(t,a,i)}async generateSignSubmitWaitForTransaction(t,n,s){const r=await this.generateSignSubmitTransaction(t,n,s);return this.waitForTransactionWithResult(r,s)}async estimateGasPrice(){const{data:t}=await On({url:this.nodeUrl,endpoint:"estimate_gas_price",originMethod:"estimateGasPrice",overrides:{...this.config}});return t}async estimateMaxGasAmount(t){const n=`0x1::coin::CoinStore<${Ma}>`,[{gas_estimate:s},r]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),i=r.find(a=>a.type===n);return BigInt(i.data.coin.value)/BigInt(s)}async rotateAuthKeyEd25519(t,n,s){const{sequence_number:r,authentication_key:i}=await this.getAccount(t.address()),o=new Ca(n),a=new Ge.RotationProofChallenge(Ge.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(r),Ge.AccountAddress.fromHex(t.address()),new Ge.AccountAddress(new xe(i).toUint8Array()),o.pubKey().toUint8Array()),c=xe.fromUint8Array(bs(a)),u=t.signHexString(c),l=o.signHexString(c),f=new Ge.TransactionPayloadEntryFunction(Ge.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[Vu(0),lr(t.pubKey().toUint8Array()),Vu(0),lr(o.pubKey().toUint8Array()),lr(u.toUint8Array()),lr(l.toUint8Array())])),h=await this.generateRawTransaction(t.address(),f,s),g=ti.generateBCSTransaction(t,h);return this.submitSignedBCSTransaction(g)}async lookupOriginalAddress(t){const n=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:s}}=n.data,r=await this.getTableItem(s,{key_type:"address",value_type:"address",key:xe.ensure(t).hex()});return new xe(r)}async getBlockByHeight(t,n){const{data:s}=await On({url:this.nodeUrl,endpoint:`blocks/by_height/${t}`,originMethod:"getBlockByHeight",params:{with_transactions:n},overrides:{...this.config}});return s}async getBlockByVersion(t,n){const{data:s}=await On({url:this.nodeUrl,endpoint:`blocks/by_version/${t}`,originMethod:"getBlockByVersion",params:{with_transactions:n},overrides:{...this.config}});return s}async view(t,n){const{data:s}=await Pr({url:this.nodeUrl,body:t,endpoint:"view",originMethod:"getTableItem",params:{ledger_version:n},overrides:{...this.config}});return s}clearCache(t){G_(t)}};It([dn],sn.prototype,"getAccount",1);It([dn],sn.prototype,"getAccountTransactions",1);It([dn,X0(10*60*1e3)],sn.prototype,"getAccountModules",1);It([dn],sn.prototype,"getAccountModule",1);It([dn],sn.prototype,"getAccountResources",1);It([dn],sn.prototype,"getAccountResource",1);It([dn],sn.prototype,"getEventsByCreationNumber",1);It([dn],sn.prototype,"getEventsByEventHandle",1);It([dn],sn.prototype,"submitSignedBCSTransaction",1);It([dn],sn.prototype,"submitBCSSimulation",1);It([dn],sn.prototype,"getTransactions",1);It([dn],sn.prototype,"getTransactionByHash",1);It([dn],sn.prototype,"getTransactionByVersion",1);It([dn],sn.prototype,"getLedgerInfo",1);It([bc()],sn.prototype,"getChainId",1);It([dn],sn.prototype,"getTableItem",1);It([dn,bc({ttlMs:5*60*1e3,tags:["gas_estimates"]})],sn.prototype,"estimateGasPrice",1);It([dn],sn.prototype,"estimateMaxGasAmount",1);It([dn],sn.prototype,"getBlockByHeight",1);It([dn],sn.prototype,"getBlockByVersion",1);It([dn],sn.prototype,"view",1);var Vt=sn,fg=class extends Error{constructor(t,n){super(t),this.lastSubmittedTransaction=n}},hg=class extends Error{constructor(t,n){super(t),this.transaction=n}},Dn=class extends Error{constructor(t,n,s,r){super(n),this.status=t,this.message=n,this.errorCode=s,this.vmErrorCode=r}};function dn(e,t,n){const s=n.value;return n.value=async function(...i){var o,a;try{return await s.apply(this,[...i])}catch(c){throw c instanceof $l?new Dn(c.status,JSON.stringify({message:c.message,...c.data}),(o=c.data)==null?void 0:o.error_code,(a=c.data)==null?void 0:a.vm_error_code):c}},n}var od=class cn{constructor(t,n){this.endpoint=t,this.config=n}static validateAddress(t){if(t.length<66)throw new Error(`${t} is less than 66 chars long.`)}async queryIndexer(t){const n=await Pr({url:this.endpoint,body:t,overrides:{WITH_CREDENTIALS:!1,...this.config}});if(n.data.errors)throw new Dn(n.data.errors[0].extensions.code,JSON.stringify({message:n.data.errors[0].message,error_code:n.data.errors[0].extensions.code}));return n.data.data}async getIndexerLedgerInfo(){const t={query:BT};return this.queryIndexer(t)}async getAccountNFTs(t,n){const s=xe.ensure(t).hex();cn.validateAddress(s);const r={query:_T,variables:{address:s,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(r)}async getTokenActivities(t,n){var s,r;const i=xe.ensure(t).hex();cn.validateAddress(i);const o={token_data_id:{_eq:i}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:OT,variables:{where_condition:o,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenActivitiesCount(t){const n={query:IT,variables:{token_id:t}};return this.queryIndexer(n)}async getAccountTokensCount(t,n){var s,r;const i={owner_address:{_eq:t},amount:{_gt:"0"}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const o=xe.ensure(t).hex();cn.validateAddress(o);const a={query:TT,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit}};return this.queryIndexer(a)}async getTokenData(t,n){var s,r;const i=xe.ensure(t).hex();cn.validateAddress(i);const o={token_data_id:{_eq:i}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:LT,variables:{where_condition:o,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenOwnersData(t,n,s){var r,i;const o=xe.ensure(t).hex();cn.validateAddress(o);const a={token_data_id:{_eq:o},amount:{_gt:"0"}};n&&(a.property_version_v1={_eq:n}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:NT,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(i=s==null?void 0:s.options)==null?void 0:i.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getTokenCurrentOwnerData(t,n,s){var r,i;const o=xe.ensure(t).hex();cn.validateAddress(o);const a={token_data_id:{_eq:o},amount:{_gt:"0"}};n&&(a.property_version_v1={_eq:n}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:$T,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(i=s==null?void 0:s.options)==null?void 0:i.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getOwnedTokens(t,n){var s,r;const i=xe.ensure(t).hex();cn.validateAddress(i);const o={owner_address:{_eq:i},amount:{_gt:0}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:UT,variables:{where_condition:o,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getOwnedTokensByTokenData(t,n){var s,r;const i=xe.ensure(t).hex();cn.validateAddress(i);const o={token_data_id:{_eq:i},amount:{_gt:0}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:RT,variables:{where_condition:o,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenOwnedFromCollectionAddress(t,n,s){var r,i;const o=xe.ensure(t).hex();cn.validateAddress(o);const a=xe.ensure(n).hex();cn.validateAddress(a);const c={owner_address:{_eq:o},current_token_data:{collection_id:{_eq:a}},amount:{_gt:0}};s!=null&&s.tokenStandard&&(c.token_standard={_eq:s==null?void 0:s.tokenStandard});const u={query:qT,variables:{where_condition:c,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(i=s==null?void 0:s.options)==null?void 0:i.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(u)}async getTokenOwnedFromCollectionNameAndCreatorAddress(t,n,s,r){const i=await this.getCollectionAddress(s,n,r);return await this.getTokenOwnedFromCollectionAddress(t,i,r)}async getCollectionData(t,n,s){var r,i;const o=xe.ensure(t).hex();cn.validateAddress(o);const a={collection_name:{_eq:n},creator_address:{_eq:o}};s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:ST,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(i=s==null?void 0:s.options)==null?void 0:i.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getCollectionAddress(t,n,s){return(await this.getCollectionData(t,n,s)).current_collections_v2[0].collection_id}async getCollectionsWithOwnedTokens(t,n){var s,r;const i=xe.ensure(t).hex();cn.validateAddress(i);const o={owner_address:{_eq:i}};n!=null&&n.tokenStandard&&(o.current_collection={token_standard:{_eq:n==null?void 0:n.tokenStandard}});const a={query:AT,variables:{where_condition:o,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountTransactionsCount(t){const n=xe.ensure(t).hex();cn.validateAddress(n);const s={query:xT,variables:{address:n}};return this.queryIndexer(s)}async getAccountTransactionsData(t,n){var s,r;const i=xe.ensure(t).hex();cn.validateAddress(i);const a={query:vT,variables:{where_condition:{account_address:{_eq:i}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTopUserTransactions(t){const n={query:DT,variables:{limit:t}};return this.queryIndexer(n)}async getUserTransactions(t){var n,s;const r={version:{_lte:t==null?void 0:t.startVersion}},i={query:MT,variables:{where_condition:r,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(i)}async getDelegatedStakingActivities(t,n){const s=xe.ensure(t).hex(),r=xe.ensure(n).hex();cn.validateAddress(s),cn.validateAddress(r);const i={query:kT,variables:{delegatorAddress:s,poolAddress:r}};return this.queryIndexer(i)}async getNumberOfDelegators(t){const n=xe.ensure(t).hex();cn.validateAddress(n);const s={query:PT,variables:{poolAddress:n}};return this.queryIndexer(s)}async getAccountCoinsData(t,n){var s,r;const i=xe.ensure(t).hex();cn.validateAddress(i);const a={query:bT,variables:{where_condition:{owner_address:{_eq:i}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountCoinsDataCount(t){const n=xe.ensure(t).hex();cn.validateAddress(n);const s={query:wT,variables:{address:n}};return this.queryIndexer(s)}async getAccountOwnedObjects(t,n){var s,r;const i=xe.ensure(t).hex();cn.validateAddress(i);const a={query:ET,variables:{where_condition:{owner_address:{_eq:i}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}},_o=class{constructor(t,n,s=!1){let r=null,i=null;if(typeof t=="object"&&jT(t)?(r=t.fullnodeUrl,i=t.indexerUrl,this.network="CUSTOM"):(r=J0[t],i=za[t],this.network=t),this.network==="CUSTOM"&&!r)throw new Error("fullnode url is not provided");i&&(this.indexerClient=new od(i,n)),this.aptosClient=new Vt(r,n,s)}};function pg(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(s=>{const r=Object.getOwnPropertyDescriptor(t.prototype,s);r&&(r.value=function(...i){return this[n][s](...i)},Object.defineProperty(e.prototype,s,r))}),Object.getOwnPropertyNames(t).forEach(s=>{const r=Object.getOwnPropertyDescriptor(t,s);r&&(r.value=function(...i){return this[n][s](...i)},!e.hasOwnProperty.call(e,s)&&Object.defineProperty(e,s,r))})}pg(_o,Vt,"aptosClient");pg(_o,od,"indexerClient");function jT(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"}var ad=class{constructor(t,n){this.type=t,this.value=n}},Bc=class{constructor(){this.data={}}setProperty(t,n){this.data[t]=n}};function Pc(e){let t;return e==="string"||e==="String"?t=new Mr(zl):t=new Ni(e).parseTypeTag(),t}function Ha(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((s,r)=>{try{const i=Pc(s),o=new Wt;kc(e[r],i,o),n.push(o.getBytes())}catch{n.push(new TextEncoder().encode(e[r]))}}),n}function el(e,t){if(!e||!t)throw new Error("value or type can not be empty");try{const n=Pc(t),s=new Wt;return kc(e,n,s),s.getBytes()}catch{return new TextEncoder().encode(e)}}function cd(e){const t=e.map.data,n=new Bc;return t.forEach(s=>{const{key:r}=s,i=s.value.value,o=s.value.type,a=Pc(o),c=gg(a,i),u=new ad(o,c);n.setProperty(r,u)}),n}function gg(e,t){const n=new ql(new xe(t).toUint8Array());let s="";return e instanceof wr?s=n.deserializeU8().toString():e instanceof $i?s=n.deserializeU64().toString():e instanceof Li?s=n.deserializeU128().toString():e instanceof Ii?s=n.deserializeBool()?"true":"false":e instanceof Dr?s=xe.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Mr&&e.isStringTypeTag()?s=n.deserializeStr():s=t,s}var yg={};wc(yg,{PropertyMap:()=>Bc,PropertyValue:()=>ad,Token:()=>wg,TokenData:()=>mg});var mg=class{constructor(t,n,s,r,i,o,a,c){this.collection=t,this.description=n,this.name=s,this.maximum=r,this.supply=i,this.uri=o,this.default_properties=cd(a),this.mutability_config=c}},wg=class{constructor(t,n,s){this.id=t,this.amount=n,this.token_properties=cd(s)}},WT=class{constructor(t){this.aptosClient=t}async createCollection(t,n,s,r,i=ui,o){const c=await new Ct(this.aptosClient,{sender:t.address(),...o}).build("0x3::token::create_collection_script",[],[n,s,r,i,[!1,!1,!1]]),u=Vt.generateBCSTransaction(t,c);return(await this.aptosClient.submitSignedBCSTransaction(u)).hash}async createToken(t,n,s,r,i,o,a=ui,c=t.address(),u=0,l=0,f=[],h=[],g=[],w){const T=await new Ct(this.aptosClient,{sender:t.address(),...w}).build("0x3::token::create_token_script",[],[n,s,r,i,a,o,c,u,l,[!1,!1,!1,!1,!1],f,Ha(h,g),g]),R=Vt.generateBCSTransaction(t,T);return(await this.aptosClient.submitSignedBCSTransaction(R)).hash}async createTokenWithMutabilityConfig(t,n,s,r,i,o,a=ui,c=t.address(),u=0,l=0,f=[],h=[],g=[],w=[!1,!1,!1,!1,!1],b){const R=await new Ct(this.aptosClient,{sender:t.address(),...b}).build("0x3::token::create_token_script",[],[n,s,r,i,a,o,c,u,l,w,f,h,g]),A=Vt.generateBCSTransaction(t,R);return(await this.aptosClient.submitSignedBCSTransaction(A)).hash}async offerToken(t,n,s,r,i,o,a=0,c){const l=await new Ct(this.aptosClient,{sender:t.address(),...c}).build("0x3::token_transfers::offer_script",[],[n,s,r,i,a,o]),f=Vt.generateBCSTransaction(t,l);return(await this.aptosClient.submitSignedBCSTransaction(f)).hash}async claimToken(t,n,s,r,i,o=0,a){const u=await new Ct(this.aptosClient,{sender:t.address(),...a}).build("0x3::token_transfers::claim_script",[],[n,s,r,i,o]),l=Vt.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async cancelTokenOffer(t,n,s,r,i,o=0,a){const u=await new Ct(this.aptosClient,{sender:t.address(),...a}).build("0x3::token_transfers::cancel_offer_script",[],[n,s,r,i,o]),l=Vt.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async directTransferToken(t,n,s,r,i,o,a=0,c){const l=await new Ct(this.aptosClient,{sender:t.address(),...c}).build("0x3::token::direct_transfer_script",[],[s,r,i,a,o]),f=new Ge.MultiAgentRawTransaction(l,[Ge.AccountAddress.fromHex(n.address())]),h=new Ge.Ed25519Signature(t.signBuffer(ps.getSigningMessage(f)).toUint8Array()),g=new Ge.AccountAuthenticatorEd25519(new Ge.Ed25519PublicKey(t.signingKey.publicKey),h),w=new Ge.Ed25519Signature(n.signBuffer(ps.getSigningMessage(f)).toUint8Array()),b=new Ge.AccountAuthenticatorEd25519(new Ge.Ed25519PublicKey(n.signingKey.publicKey),w),T=new Ge.TransactionAuthenticatorMultiAgent(g,[Ge.AccountAddress.fromHex(n.address())],[b]),R=bs(new Ge.SignedTransaction(l,T));return(await this.aptosClient.submitSignedBCSTransaction(R)).hash}async directTransferTokenWithFeePayer(t,n,s,r,i,o,a,c=0,u){const f=await new Ct(this.aptosClient,{sender:t.address(),...u}).build("0x3::token::direct_transfer_script",[],[s,r,i,c,o]),h=new Ge.FeePayerRawTransaction(f,[Ge.AccountAddress.fromHex(n.address())],Ge.AccountAddress.fromHex(a.address())),g=new Ge.Ed25519Signature(t.signBuffer(ps.getSigningMessage(h)).toUint8Array()),w=new Ge.AccountAuthenticatorEd25519(new Ge.Ed25519PublicKey(t.signingKey.publicKey),g),b=new Ge.Ed25519Signature(n.signBuffer(ps.getSigningMessage(h)).toUint8Array()),T=new Ge.AccountAuthenticatorEd25519(new Ge.Ed25519PublicKey(n.signingKey.publicKey),b),R=new Ge.Ed25519Signature(a.signBuffer(ps.getSigningMessage(h)).toUint8Array()),A=new Ge.AccountAuthenticatorEd25519(new Ge.Ed25519PublicKey(a.signingKey.publicKey),R),x=new Ge.TransactionAuthenticatorFeePayer(w,[Ge.AccountAddress.fromHex(n.address())],[T],{address:Ge.AccountAddress.fromHex(a.address()),authenticator:A}),E=bs(new Ge.SignedTransaction(f,x));return(await this.aptosClient.submitSignedBCSTransaction(E)).hash}async optInTokenTransfer(t,n,s){const i=await new Ct(this.aptosClient,{sender:t.address(),...s}).build("0x3::token::opt_in_direct_transfer",[],[n]),o=Vt.generateBCSTransaction(t,i);return(await this.aptosClient.submitSignedBCSTransaction(o)).hash}async transferWithOptIn(t,n,s,r,i,o,a,c){const l=await new Ct(this.aptosClient,{sender:t.address(),...c}).build("0x3::token::transfer_with_opt_in",[],[n,s,r,i,o,a]),f=Vt.generateBCSTransaction(t,l);return(await this.aptosClient.submitSignedBCSTransaction(f)).hash}async burnByCreator(t,n,s,r,i,o,a){const u=await new Ct(this.aptosClient,{sender:t.address(),...a}).build("0x3::token::burn_by_creator",[],[n,s,r,i,o]),l=Vt.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async burnByOwner(t,n,s,r,i,o,a){const u=await new Ct(this.aptosClient,{sender:t.address(),...a}).build("0x3::token::burn",[],[n,s,r,i,o]),l=Vt.generateBCSTransaction(t,u);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async mutateTokenProperties(t,n,s,r,i,o,a,c,u,l,f){const g=await new Ct(this.aptosClient,{sender:t.address(),...f}).build("0x3::token::mutate_token_properties",[],[n,s,r,i,o,a,c,u,l]),w=Vt.generateBCSTransaction(t,g);return(await this.aptosClient.submitSignedBCSTransaction(w)).hash}async getCollectionData(t,n){const r=(await this.aptosClient.getAccountResources(t)).find(c=>c.type==="0x3::token::Collections"),{handle:i}=r.data.collection_data,o={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:n};return await this.aptosClient.getTableItem(i,o)}async getTokenData(t,n,s){const r=t instanceof xe?t.hex():t,i=await this.aptosClient.getAccountResource(r,"0x3::token::Collections"),{handle:o}=i.data.token_data,c={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:r,collection:n,name:s}},u=await this.aptosClient.getTableItem(o,c);return new mg(u.collection,u.description,u.name,u.maximum,u.supply,u.uri,u.default_properties,u.mutability_config)}async getToken(t,n,s,r="0"){const i={creator:t instanceof xe?t.hex():t,collection:n,name:s};return this.getTokenForAccount(t,{token_data_id:i,property_version:r})}async getTokenForAccount(t,n){const s=await this.aptosClient.getAccountResource(t instanceof xe?t.hex():t,"0x3::token::TokenStore"),{handle:r}=s.data.tokens,i={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:n};try{const o=await this.aptosClient.getTableItem(r,i);return new wg(o.id,o.amount,o.token_properties)}catch(o){return(o==null?void 0:o.status)===404?{id:n,amount:"0",token_properties:new Bc}:o}}},ja=class{constructor(e){this.assetType="0x1::fungible_asset::Metadata",this.provider=e}async transfer(e,t,n,s,r){const i=await this.generateTransfer(e,t,n,s,r);return await this.provider.signAndSubmitTransaction(e,i)}async getPrimaryBalance(e,t){const n={function:"0x1::primary_fungible_store::balance",type_arguments:[this.assetType],arguments:[xe.ensure(e).hex(),xe.ensure(t).hex()]},s=await this.provider.view(n);return BigInt(s[0])}async generateTransfer(e,t,n,s,r){return await new Ct(this.provider,{sender:e.address(),...r}).build("0x1::primary_fungible_store::transfer",[this.assetType],[xe.ensure(t).hex(),xe.ensure(n).hex(),s])}},Yr={BOOLEAN:"bool",U8:"u8",U16:"u16",U32:"u32",U64:"u64",U128:"u128",U256:"u256",ADDRESS:"address",VECTOR:"vector<u8>",STRING:"string"},GT=class{constructor(e){this.tokenType="0x4::token::Token",this.provider=e}async submitTransaction(e,t,n,s,r){const o=await new Ct(this.provider,{sender:e.address(),...r}).build(`0x4::aptos_token::${t}`,n,s),a=Vt.generateBCSTransaction(e,o);return(await this.provider.submitSignedBCSTransaction(a)).hash}async createCollection(e,t,n,s,r=ui,i,o){var a,c,u,l,f,h,g,w,b,T,R;return this.submitTransaction(e,"create_collection",[],[t,r,n,s,(a=i==null?void 0:i.mutableDescription)!=null?a:!0,(c=i==null?void 0:i.mutableRoyalty)!=null?c:!0,(u=i==null?void 0:i.mutableURI)!=null?u:!0,(l=i==null?void 0:i.mutableTokenDescription)!=null?l:!0,(f=i==null?void 0:i.mutableTokenName)!=null?f:!0,(h=i==null?void 0:i.mutableTokenProperties)!=null?h:!0,(g=i==null?void 0:i.mutableTokenURI)!=null?g:!0,(w=i==null?void 0:i.tokensBurnableByCreator)!=null?w:!0,(b=i==null?void 0:i.tokensFreezableByCreator)!=null?b:!0,(T=i==null?void 0:i.royaltyNumerator)!=null?T:0,(R=i==null?void 0:i.royaltyDenominator)!=null?R:1],o)}async mint(e,t,n,s,r,i=[],o=[],a=[],c){return this.submitTransaction(e,"mint",[],[t,n,s,r,i,o,Ha(a,o)],c)}async mintSoulBound(e,t,n,s,r,i,o=[],a=[],c=[],u){return this.submitTransaction(e,"mint_soul_bound",[],[t,n,s,r,o,a,Ha(c,a),i.address().hex()],u)}async burnToken(e,t,n,s){return this.submitTransaction(e,"burn",[n||this.tokenType],[xe.ensure(t).hex()],s)}async freezeTokenTransafer(e,t,n,s){return this.submitTransaction(e,"freeze_transfer",[n||this.tokenType],[xe.ensure(t).hex()],s)}async unfreezeTokenTransafer(e,t,n,s){return this.submitTransaction(e,"unfreeze_transfer",[n||this.tokenType],[xe.ensure(t).hex()],s)}async setTokenDescription(e,t,n,s,r){return this.submitTransaction(e,"set_description",[s||this.tokenType],[xe.ensure(t).hex(),n],r)}async setTokenName(e,t,n,s,r){return this.submitTransaction(e,"set_name",[s||this.tokenType],[xe.ensure(t).hex(),n],r)}async setTokenURI(e,t,n,s,r){return this.submitTransaction(e,"set_uri",[s||this.tokenType],[xe.ensure(t).hex(),n],r)}async addTokenProperty(e,t,n,s,r,i,o){return this.submitTransaction(e,"add_property",[i||this.tokenType],[xe.ensure(t).hex(),n,Yr[s],el(r,Yr[s])],o)}async removeTokenProperty(e,t,n,s,r){return this.submitTransaction(e,"remove_property",[s||this.tokenType],[xe.ensure(t).hex(),n],r)}async updateTokenProperty(e,t,n,s,r,i,o){return this.submitTransaction(e,"update_property",[i||this.tokenType],[xe.ensure(t).hex(),n,Yr[s],el(r,Yr[s])],o)}async addTypedProperty(e,t,n,s,r,i,o){return this.submitTransaction(e,"add_typed_property",[i||this.tokenType,Yr[s]],[xe.ensure(t).hex(),n,r],o)}async updateTypedProperty(e,t,n,s,r,i,o){return this.submitTransaction(e,"update_typed_property",[i||this.tokenType,Yr[s]],[xe.ensure(t).hex(),n,r],o)}async transferTokenOwnership(e,t,n,s,r){const o=await new Ct(this.provider,{sender:e.address(),...r}).build("0x1::object::transfer",[s||this.tokenType],[xe.ensure(t).hex(),xe.ensure(n).hex()]),a=Vt.generateBCSTransaction(e,o);return(await this.provider.submitSignedBCSTransaction(a)).hash}async transfer(e,t){let n=t;if(n==null&&(n=(await this.provider.getTokenData(xe.ensure(e.tokenAddress).hex())).current_token_datas_v2[0].is_fungible_v2),n){const i=e;return await new ja(this.provider).transfer(i.owner,i.tokenAddress,i.recipient,i.amount,i.extraArgs)}const s=e;return await this.transferTokenOwnership(s.owner,s.tokenAddress,s.recipient,s.tokenType,s.extraArgs)}async burnObject(e,t,n,s){const i=await new Ct(this.provider,{sender:e.address(),...s}).build("0x1::object::burn",[n||"0x1::object::ObjectCore"],[xe.ensure(t).hex()]),o=Vt.generateBCSTransaction(e,i);return(await this.provider.submitSignedBCSTransaction(o)).hash}},tl="0x1::aptos_account::transfer_coins",bg="0x1::coin::transfer",KT=class{constructor(e){this.aptosClient=e}async transfer(e,t,n,s){var r,i,o;const a=((r=s==null?void 0:s.coinType)!=null?r:"").toString().includes("::");if(s!=null&&s.coinType&&!a&&Ut.isValid(s.coinType)){console.warn("to transfer a fungible asset, use `FungibleAssetClient()` class for better support");const b=new _o({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(i=za[Ku[this.aptosClient.nodeUrl]])!=null?i:this.aptosClient.nodeUrl});return await new ja(b).transfer(e,s==null?void 0:s.coinType,ds(t),n)}const c=(o=s==null?void 0:s.coinType)!=null?o:Ma;let u;(s==null?void 0:s.createReceiverIfMissing)===void 0?u=tl:u=s!=null&&s.createReceiverIfMissing?tl:bg;const l=ds(t),h=await new Ct(this.aptosClient,{sender:e.address(),...s}).build(u,[c],[l,n]),g=Vt.generateBCSTransaction(e,h);return(await this.aptosClient.submitSignedBCSTransaction(g)).hash}async checkBalance(e,t){var n,s,r;const i=((n=t==null?void 0:t.coinType)!=null?n:"").toString().includes("::");if(t!=null&&t.coinType&&!i&&Ut.isValid(t.coinType)){console.warn("to check balance of a fungible asset, use `FungibleAssetClient()` class for better support");const l=new _o({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(s=za[Ku[this.aptosClient.nodeUrl]])!=null?s:this.aptosClient.nodeUrl});return await new ja(l).getPrimaryBalance(ds(e),t==null?void 0:t.coinType)}const a=`0x1::coin::CoinStore<${(r=t==null?void 0:t.coinType)!=null?r:Ma}>`,c=ds(e),u=await this.aptosClient.getAccountResource(c,a);return BigInt(u.data.coin.value)}},VT=class extends Vt{constructor(e,t,n){if(super(e,n),!t)throw new Error("Faucet URL cannot be empty.");this.faucetUrl=t,this.config=n}async fundAccount(e,t,n=V0){const{data:s}=await Pr({url:this.faucetUrl,endpoint:"mint",body:null,params:{address:xe.ensure(e).noPrefix(),amount:t},overrides:{...this.config},originMethod:"fundAccount"}),r=[];for(let i=0;i<s.length;i+=1){const o=s[i];r.push(this.waitForTransaction(o,{timeoutSecs:n}))}return await Promise.all(r),s}},nl={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c"},Ds=/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/,_g=new RegExp("^(?:(?<subdomain>[^.]+)\\.(?!apt$))?(?<domain>[^.]+)(?:\\.apt)?$"),XT=class{constructor(e,t){var n;if(this.provider=e,!nl[this.provider.network]&&!t)throw new Error("Error: For custom providers, you must pass in a contract address");this.contractAddress=(n=nl[this.provider.network])!=null?n:t}async getPrimaryNameByAddress(e){const n=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::ReverseLookupRegistryV1`)).data,{handle:s}=n.registry,r={key_type:"address",value_type:`${this.contractAddress}::domains::NameRecordKeyV1`,key:e};try{const i=await this.provider.getTableItem(s,r);return i.subdomain_name.vec[0]?`${i.subdomain_name.vec[0]}.${i.domain_name}`:i.domain_name}catch(i){if(i.status===404)return null;throw new Error(i)}}async getAddressByName(e){var t,n;const{domain:s,subdomain:r}=(n=(t=e.match(_g))==null?void 0:t.groups)!=null?n:{};if(!s)return null;const i=r?await this.getRegistrationForSubdomainName(s,r):await this.getRegistrationForDomainName(s);return i===null?null:i.target}async mintAptosName(e,t,n=1,s){if(t.match(Ds)===null)throw new Dn(400,`Name ${t} is not valid`);const r=await this.getRegistrationForDomainName(t);if(r&&Math.ceil(Date.now()/1e3)<r.expirationTimestampSeconds)throw new Dn(400,`Name ${t} is not available`);const o=await new Ct(this.provider.aptosClient,{sender:e.address(),...s}).build(`${this.contractAddress}::domains::register_domain`,[],[t,n]),a=Vt.generateBCSTransaction(e,o);return(await this.provider.submitSignedBCSTransaction(a)).hash}async mintAptosSubdomain(e,t,n,s,r){if(n.match(Ds)===null)throw new Dn(400,`Domain name ${n} is not valid`);if(t.match(Ds)===null)throw new Dn(400,`Subdomain name ${t} is not valid`);const i=await this.getRegistrationForSubdomainName(n,t);if(i&&Math.ceil(Date.now()/1e3)<i.expirationTimestampSeconds)throw new Dn(400,`Name ${t}.${n} is not available`);const o=await this.getRegistrationForDomainName(n);if(o===null)throw new Dn(400,`Domain name ${n} does not exist`);const a=Math.ceil(Date.now()/1e3);if(o.expirationTimestampSeconds<a)throw new Dn(400,`Domain name ${n} expired`);const c=s||o.expirationTimestampSeconds;if(c<a)throw new Dn(400,`Expiration for ${t}.${n} is before now`);const l=await new Ct(this.provider.aptosClient,{sender:e.address(),...r}).build(`${this.contractAddress}::domains::register_subdomain`,[],[t,n,c]),f=Vt.generateBCSTransaction(e,l);return(await this.provider.submitSignedBCSTransaction(f)).hash}async setSubdomainAddress(e,t,n,s,r){const i=Ut.standardizeAddress(s);if(n.match(Ds)===null)throw new Dn(400,`Name ${n} is not valid`);if(t.match(Ds)===null)throw new Dn(400,`Name ${t} is not valid`);const a=await new Ct(this.provider.aptosClient,{sender:e.address(),...r}).build(`${this.contractAddress}::domains::set_subdomain_address`,[],[t,n,i]),c=Vt.generateBCSTransaction(e,a);return(await this.provider.submitSignedBCSTransaction(c)).hash}async initReverseLookupRegistry(e,t){const s=await new Ct(this.provider.aptosClient,{sender:e.address(),...t}).build(`${this.contractAddress}::domains::init_reverse_lookup_registry_v1`,[],[]),r=Vt.generateBCSTransaction(e,s);return(await this.provider.submitSignedBCSTransaction(r)).hash}async getRegistrationForDomainName(e){if(e.match(Ds)===null)return null;const n=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::NameRegistryV1`)).data,{handle:s}=n.registry,r={key_type:`${this.contractAddress}::domains::NameRecordKeyV1`,value_type:`${this.contractAddress}::domains::NameRecordV1`,key:{subdomain_name:{vec:[]},domain_name:e}};try{const i=await this.provider.getTableItem(s,r);return{target:i.target_address.vec.length===1?i.target_address.vec[0]:null,expirationTimestampSeconds:i.expiration_time_sec}}catch(i){if(i.status===404)return null;throw new Error(i)}}async getRegistrationForSubdomainName(e,t){if(e.match(Ds)===null||t.match(Ds)===null)return null;const s=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::NameRegistryV1`)).data,{handle:r}=s.registry,i={key_type:`${this.contractAddress}::domains::NameRecordKeyV1`,value_type:`${this.contractAddress}::domains::NameRecordV1`,key:{subdomain_name:{vec:[t]},domain_name:e}};try{const o=await this.provider.getTableItem(r,i);return{target:o.target_address.vec.length===1?o.target_address.vec[0]:null,expirationTimestampSeconds:o.expiration_time_sec}}catch(o){if(o.status===404)return null;throw new Error(o)}}},Yo=()=>Math.floor(Date.now()/1e3),Tg=class{constructor(e,t,n,s,r){this.lastUncommintedNumber=null,this.currentNumber=null,this.lock=!1,this.provider=e,this.account=t,this.maxWaitTime=n,this.maximumInFlight=s,this.sleepTime=r}async nextSequenceNumber(){for(;this.lock;)await no(this.sleepTime);this.lock=!0;let e=BigInt(0);try{if((this.lastUncommintedNumber===null||this.currentNumber===null)&&await this.initialize(),this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight){await this.update();const t=Yo();for(;this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight;)await no(this.sleepTime),Yo()-t>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`),await this.initialize()):await this.update()}e=this.currentNumber,this.currentNumber+=BigInt(1)}catch(t){console.error("error in getting next sequence number for this account",t)}finally{this.lock=!1}return e}async initialize(){const{sequence_number:e}=await this.provider.getAccount(this.account.address());this.currentNumber=BigInt(e),this.lastUncommintedNumber=BigInt(e)}async update(){const{sequence_number:e}=await this.provider.getAccount(this.account.address());return this.lastUncommintedNumber=BigInt(e),this.lastUncommintedNumber}async synchronize(){if(this.lastUncommintedNumber!==this.currentNumber){for(;this.lock;)await no(this.sleepTime);this.lock=!0;try{await this.update();const e=Yo();for(;this.lastUncommintedNumber!==this.currentNumber;)Yo()-e>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`),await this.initialize()):(await no(this.sleepTime),await this.update())}catch(e){console.error("error in synchronizing this account sequence number with the one on chain",e)}finally{this.lock=!1}}}},hu=class{constructor(){this.queue=[],this.pendingDequeue=[],this.cancelled=!1}enqueue(e){if(this.cancelled=!1,this.pendingDequeue.length>0){const t=this.pendingDequeue.shift();t==null||t.resolve(e);return}this.queue.push(e)}async dequeue(){return this.queue.length>0?Promise.resolve(this.queue.shift()):new Promise((e,t)=>{this.pendingDequeue.push({resolve:e,reject:t})})}isEmpty(){return this.queue.length===0}cancel(){this.cancelled=!0,this.pendingDequeue.forEach(async({reject:e})=>{e(new sl("Task cancelled"))}),this.pendingDequeue=[],this.queue.length=0}isCancelled(){return this.cancelled}pendingDequeueLength(){return this.pendingDequeue.length}},sl=class extends Error{},zf="fulfilled",xg=(e=>(e.TransactionSent="transactionSent",e.TransactionSendFailed="transactionsendFailed",e.TransactionExecuted="transactionExecuted",e.TransactionExecutionFailed="transactionexecutionFailed",e))(xg||{}),JT=class extends Gu{constructor(e,t,n=30,s=100,r=10){super(),this.taskQueue=new hu,this.transactionsQueue=new hu,this.outstandingTransactions=new hu,this.sentTransactions=[],this.executedTransactions=[],this.provider=e,this.account=t,this.started=!1,this.accountSequnceNumber=new Tg(e,t,n,s,r)}async submitNextTransaction(){try{for(;;){if(this.transactionsQueue.isEmpty())return;const e=await this.accountSequnceNumber.nextSequenceNumber();if(e===null)return;const t=await this.generateNextTransaction(this.account,e);if(!t)return;const n=this.provider.submitSignedBCSTransaction(t);await this.outstandingTransactions.enqueue([n,e])}}catch(e){if(e instanceof sl)return;console.log(e)}}async processTransactions(){try{for(;;){const e=[],t=[];let[n,s]=await this.outstandingTransactions.dequeue();for(e.push(n),t.push(s);!this.outstandingTransactions.isEmpty();)[n,s]=await this.outstandingTransactions.dequeue(),e.push(n),t.push(s);const r=await Promise.allSettled(e);for(let i=0;i<r.length&&i<t.length;i+=1){const o=r[i];s=t[i],o.status===zf?(this.sentTransactions.push([o.value.hash,s,null]),this.emit("transactionSent",[this.sentTransactions.length,o.value.hash]),await this.checkTransaction(o,s)):(this.sentTransactions.push([o.status,s,o.reason]),this.emit("transactionsendFailed",[this.sentTransactions.length,o.reason]))}}}catch(e){if(e instanceof sl)return;console.log(e)}}async checkTransaction(e,t){const n=[];n.push(this.provider.waitForTransactionWithResult(e.value.hash,{checkSuccess:!0}));const s=await Promise.allSettled(n);for(let r=0;r<s.length;r+=1){const i=s[r];i.status===zf?(this.executedTransactions.push([i.value.hash,t,null]),this.emit("transactionExecuted",[this.executedTransactions.length,i.value.hash])):(this.executedTransactions.push([i.status,t,i.reason]),this.emit("transactionexecutionFailed",[this.executedTransactions.length,i.reason]))}}async push(e){await this.transactionsQueue.enqueue(e)}async generateNextTransaction(e,t){if(this.transactionsQueue.isEmpty())return;const n=await this.transactionsQueue.dequeue(),s=await this.provider.generateRawTransaction(e.address(),n,{providedSequenceNumber:t});return Vt.generateBCSTransaction(e,s)}async run(){try{for(;!this.taskQueue.isCancelled();)await(await this.taskQueue.dequeue())()}catch(e){throw new Error(e)}}start(){if(this.started)throw new Error("worker has already started");this.started=!0,this.taskQueue.enqueue(()=>this.submitNextTransaction()),this.taskQueue.enqueue(()=>this.processTransactions()),this.run()}stop(){if(this.taskQueue.isCancelled())throw new Error("worker has already stopped");this.started=!1,this.taskQueue.cancel()}},vg={};wc(vg,{AptosErrorCode:()=>Sg,MoveFunctionVisibility:()=>Ag,RoleType:()=>Eg});var Sg=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.STATE_VALUE_NOT_FOUND="state_value_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(Sg||{}),Ag=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(Ag||{}),Eg=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(Eg||{}),kg=(e=>(e.AccountAddress="account_address",e.TransactionVersion="transaction_version",e))(kg||{}),Bg=(e=>(e.AccountAddress="account_address",e.MinBlockHeight="min_block_height",e.NumDistinctVersions="num_distinct_versions",e))(Bg||{}),Pg=(e=>(e.AccountAddress="account_address",e.TransactionVersion="transaction_version",e))(Pg||{}),Ug=(e=>(e.Address="address",e.TransactionVersion="transaction_version",e))(Ug||{}),Rg=(e=>(e.BlockHeight="block_height",e.Epoch="epoch",e.FailedProposerIndices="failed_proposer_indices",e.Id="id",e.PreviousBlockVotesBitvec="previous_block_votes_bitvec",e.Proposer="proposer",e.Round="round",e.Timestamp="timestamp",e.Version="version",e))(Rg||{}),Og=(e=>(e.ActivityType="activity_type",e.Amount="amount",e.BlockHeight="block_height",e.CoinType="coin_type",e.EntryFunctionIdStr="entry_function_id_str",e.EventAccountAddress="event_account_address",e.EventCreationNumber="event_creation_number",e.EventIndex="event_index",e.EventSequenceNumber="event_sequence_number",e.IsGasFee="is_gas_fee",e.IsTransactionSuccess="is_transaction_success",e.OwnerAddress="owner_address",e.StorageRefundAmount="storage_refund_amount",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Og||{}),Ig=(e=>(e.Amount="amount",e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.OwnerAddress="owner_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Ig||{}),$g=(e=>(e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.CreatorAddress="creator_address",e.Decimals="decimals",e.Name="name",e.SupplyAggregatorTableHandle="supply_aggregator_table_handle",e.SupplyAggregatorTableKey="supply_aggregator_table_key",e.Symbol="symbol",e.TransactionCreatedTimestamp="transaction_created_timestamp",e.TransactionVersionCreated="transaction_version_created",e))($g||{}),Lg=(e=>(e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.Supply="supply",e.TransactionEpoch="transaction_epoch",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Lg||{}),qg=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Description="description",e.DescriptionMutable="description_mutable",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Supply="supply",e.TableHandle="table_handle",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.UriMutable="uri_mutable",e))(qg||{}),Ng=(e=>(e.Domain="domain",e.ExpirationTimestamp="expiration_timestamp",e.IsDeleted="is_deleted",e.LastTransactionVersion="last_transaction_version",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e))(Ng||{}),Dg=(e=>(e.Domain="domain",e.ExpirationTimestamp="expiration_timestamp",e.IsDeleted="is_deleted",e.LastTransactionVersion="last_transaction_version",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e.TokenStandard="token_standard",e))(Dg||{}),Mg=(e=>(e.Domain="domain",e.DomainWithSuffix="domain_with_suffix",e.ExpirationTimestamp="expiration_timestamp",e.IsActive="is_active",e.IsPrimary="is_primary",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e.TokenStandard="token_standard",e))(Mg||{}),zg=(e=>(e.Amount="amount",e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e))(zg||{}),Fg=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Description="description",e.DescriptionMutable="description_mutable",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Supply="supply",e.TableHandle="table_handle",e.UriMutable="uri_mutable",e))(Fg||{}),Cg=(e=>(e.CollectionId="collection_id",e.CollectionName="collection_name",e.CollectionUri="collection_uri",e.CreatorAddress="creator_address",e.DistinctTokens="distinct_tokens",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.SingleTokenUri="single_token_uri",e))(Cg||{}),Hg=(e=>(e.CollectionId="collection_id",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.CurrentSupply="current_supply",e.Description="description",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.MaxSupply="max_supply",e.MutableDescription="mutable_description",e.MutableUri="mutable_uri",e.TableHandleV1="table_handle_v1",e.TokenStandard="token_standard",e.TotalMintedV2="total_minted_v2",e.Uri="uri",e))(Hg||{}),jg=(e=>(e.ActiveTableHandle="active_table_handle",e.InactiveTableHandle="inactive_table_handle",e.LastTransactionVersion="last_transaction_version",e.OperatorCommissionPercentage="operator_commission_percentage",e.StakingPoolAddress="staking_pool_address",e.TotalCoins="total_coins",e.TotalShares="total_shares",e))(jg||{}),Wg=(e=>(e.DelegationPoolAddress="delegation_pool_address",e.DelegatorAddress="delegator_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.PendingVoter="pending_voter",e.TableHandle="table_handle",e.Voter="voter",e))(Wg||{}),Gg=(e=>(e.DelegatorAddress="delegator_address",e.LastTransactionVersion="last_transaction_version",e.ParentTableHandle="parent_table_handle",e.PoolAddress="pool_address",e.PoolType="pool_type",e.Shares="shares",e.TableHandle="table_handle",e))(Gg||{}),Kg=(e=>(e.Amount="amount",e.AssetType="asset_type",e.IsFrozen="is_frozen",e.IsPrimary="is_primary",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.StorageId="storage_id",e.TokenStandard="token_standard",e))(Kg||{}),Vg=(e=>(e.AllowUngatedTransfer="allow_ungated_transfer",e.IsDeleted="is_deleted",e.LastGuidCreationNum="last_guid_creation_num",e.LastTransactionVersion="last_transaction_version",e.ObjectAddress="object_address",e.OwnerAddress="owner_address",e.StateKeyHash="state_key_hash",e))(Vg||{}),Xg=(e=>(e.LastTransactionVersion="last_transaction_version",e.OperatorAddress="operator_address",e.StakingPoolAddress="staking_pool_address",e.VoterAddress="voter_address",e))(Xg||{}),Jg=(e=>(e.DecodedKey="decoded_key",e.DecodedValue="decoded_value",e.IsDeleted="is_deleted",e.Key="key",e.KeyHash="key_hash",e.LastTransactionVersion="last_transaction_version",e.TableHandle="table_handle",e))(Jg||{}),Yg=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.DefaultProperties="default_properties",e.Description="description",e.DescriptionMutable="description_mutable",e.LargestPropertyVersion="largest_property_version",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Name="name",e.PayeeAddress="payee_address",e.PropertiesMutable="properties_mutable",e.RoyaltyMutable="royalty_mutable",e.RoyaltyPointsDenominator="royalty_points_denominator",e.RoyaltyPointsNumerator="royalty_points_numerator",e.Supply="supply",e.TokenDataIdHash="token_data_id_hash",e.UriMutable="uri_mutable",e))(Yg||{}),Zg=(e=>(e.CollectionId="collection_id",e.Description="description",e.IsFungibleV2="is_fungible_v2",e.LargestPropertyVersionV1="largest_property_version_v1",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.Supply="supply",e.TokenDataId="token_data_id",e.TokenName="token_name",e.TokenProperties="token_properties",e.TokenStandard="token_standard",e.TokenUri="token_uri",e))(Zg||{}),Qg=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.OwnerAddress="owner_address",e.PropertyVersion="property_version",e.TableType="table_type",e.TokenDataIdHash="token_data_id_hash",e.TokenProperties="token_properties",e))(Qg||{}),ey=(e=>(e.Amount="amount",e.IsFungibleV2="is_fungible_v2",e.IsSoulboundV2="is_soulbound_v2",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.PropertyVersionV1="property_version_v1",e.StorageId="storage_id",e.TableTypeV1="table_type_v1",e.TokenDataId="token_data_id",e.TokenPropertiesMutatedV1="token_properties_mutated_v1",e.TokenStandard="token_standard",e))(ey||{}),ty=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionId="collection_id",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.FromAddress="from_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.PropertyVersion="property_version",e.TableHandle="table_handle",e.ToAddress="to_address",e.TokenDataId="token_data_id",e.TokenDataIdHash="token_data_id_hash",e))(ty||{}),ny=(e=>(e.Asc="ASC",e.Desc="DESC",e))(ny||{}),sy=(e=>(e.Amount="amount",e.DelegatorAddress="delegator_address",e.EventIndex="event_index",e.EventType="event_type",e.PoolAddress="pool_address",e.TransactionVersion="transaction_version",e))(sy||{}),ry=(e=>(e.FirstTransactionVersion="first_transaction_version",e.StakingPoolAddress="staking_pool_address",e))(ry||{}),iy=(e=>(e.DelegatorAddress="delegator_address",e.PoolAddress="pool_address",e))(iy||{}),oy=(e=>(e.AccountAddress="account_address",e.CreationNumber="creation_number",e.Data="data",e.EventIndex="event_index",e.IndexedType="indexed_type",e.SequenceNumber="sequence_number",e.TransactionBlockHeight="transaction_block_height",e.TransactionVersion="transaction_version",e.Type="type",e))(oy||{}),ay=(e=>(e.Amount="amount",e.AssetType="asset_type",e.BlockHeight="block_height",e.EntryFunctionIdStr="entry_function_id_str",e.EventIndex="event_index",e.GasFeePayerAddress="gas_fee_payer_address",e.IsFrozen="is_frozen",e.IsGasFee="is_gas_fee",e.IsTransactionSuccess="is_transaction_success",e.OwnerAddress="owner_address",e.StorageId="storage_id",e.StorageRefundAmount="storage_refund_amount",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.Type="type",e))(ay||{}),cy=(e=>(e.AssetType="asset_type",e.CreatorAddress="creator_address",e.Decimals="decimals",e.IconUri="icon_uri",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.ProjectUri="project_uri",e.SupplyAggregatorTableHandleV1="supply_aggregator_table_handle_v1",e.SupplyAggregatorTableKeyV1="supply_aggregator_table_key_v1",e.Symbol="symbol",e.TokenStandard="token_standard",e))(cy||{}),uy=(e=>(e.Db="db",e.IsIndexerUp="is_indexer_up",e))(uy||{}),ly=(e=>(e.ChainId="chain_id",e))(ly||{}),dy=(e=>(e.Address="address",e.TransactionVersion="transaction_version",e))(dy||{}),fy=(e=>(e.BuyItNowPrice="buy_it_now_price",e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.CurrentBidPrice="current_bid_price",e.CurrentBidder="current_bidder",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.ListingId="listing_id",e.Marketplace="marketplace",e.Seller="seller",e.StartingBidPrice="starting_bid_price",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(fy||{}),hy=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.CollectionOfferId="collection_offer_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.ItemPrice="item_price",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Marketplace="marketplace",e.RemainingTokenAmount="remaining_token_amount",e.TokenStandard="token_standard",e))(hy||{}),py=(e=>(e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.ListingId="listing_id",e.Marketplace="marketplace",e.Price="price",e.Seller="seller",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(py||{}),gy=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Marketplace="marketplace",e.OfferId="offer_id",e.Price="price",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(gy||{}),yy=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.CollectionName="collection_name",e.ContractAddress="contract_address",e.CreatorAddress="creator_address",e.EntryFunctionIdStr="entry_function_id_str",e.EventIndex="event_index",e.EventType="event_type",e.FeeScheduleId="fee_schedule_id",e.Marketplace="marketplace",e.OfferOrListingId="offer_or_listing_id",e.Price="price",e.PropertyVersion="property_version",e.Seller="seller",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenName="token_name",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(yy||{}),my=(e=>(e.AnimationOptimizerRetryCount="animation_optimizer_retry_count",e.AssetUri="asset_uri",e.CdnAnimationUri="cdn_animation_uri",e.CdnImageUri="cdn_image_uri",e.CdnJsonUri="cdn_json_uri",e.ImageOptimizerRetryCount="image_optimizer_retry_count",e.JsonParserRetryCount="json_parser_retry_count",e.RawAnimationUri="raw_animation_uri",e.RawImageUri="raw_image_uri",e))(my||{}),wy=(e=>(e.NumActiveDelegator="num_active_delegator",e.PoolAddress="pool_address",e))(wy||{}),by=(e=>(e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last",e))(by||{}),_y=(e=>(e.LastSuccessVersion="last_success_version",e.LastUpdated="last_updated",e.Processor="processor",e))(_y||{}),Ty=(e=>(e.NumVotes="num_votes",e.ProposalId="proposal_id",e.ShouldPass="should_pass",e.StakingPoolAddress="staking_pool_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.VoterAddress="voter_address",e))(Ty||{}),xy=(e=>(e.DecodedKey="decoded_key",e.DecodedValue="decoded_value",e.Key="key",e.TableHandle="table_handle",e.TransactionVersion="transaction_version",e.WriteSetChangeIndex="write_set_change_index",e))(xy||{}),vy=(e=>(e.Handle="handle",e.KeyType="key_type",e.ValueType="value_type",e))(vy||{}),Sy=(e=>(e.CoinAmount="coin_amount",e.CoinType="coin_type",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.EventAccountAddress="event_account_address",e.EventCreationNumber="event_creation_number",e.EventIndex="event_index",e.EventSequenceNumber="event_sequence_number",e.FromAddress="from_address",e.Name="name",e.PropertyVersion="property_version",e.ToAddress="to_address",e.TokenAmount="token_amount",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.TransferType="transfer_type",e))(Sy||{}),Ay=(e=>(e.AfterValue="after_value",e.BeforeValue="before_value",e.EntryFunctionIdStr="entry_function_id_str",e.EventAccountAddress="event_account_address",e.EventIndex="event_index",e.FromAddress="from_address",e.IsFungibleV2="is_fungible_v2",e.PropertyVersionV1="property_version_v1",e.ToAddress="to_address",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.Type="type",e))(Ay||{}),Ey=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.DefaultProperties="default_properties",e.Description="description",e.DescriptionMutable="description_mutable",e.LargestPropertyVersion="largest_property_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Name="name",e.PayeeAddress="payee_address",e.PropertiesMutable="properties_mutable",e.RoyaltyMutable="royalty_mutable",e.RoyaltyPointsDenominator="royalty_points_denominator",e.RoyaltyPointsNumerator="royalty_points_numerator",e.Supply="supply",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.UriMutable="uri_mutable",e))(Ey||{}),ky=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Name="name",e.OwnerAddress="owner_address",e.PropertyVersion="property_version",e.TableHandle="table_handle",e.TableType="table_type",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(ky||{}),By=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Name="name",e.PropertyVersion="property_version",e.TokenDataIdHash="token_data_id_hash",e.TokenProperties="token_properties",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(By||{}),Py=(e=>(e.BlockHeight="block_height",e.EntryFunctionIdStr="entry_function_id_str",e.Epoch="epoch",e.ExpirationTimestampSecs="expiration_timestamp_secs",e.GasUnitPrice="gas_unit_price",e.MaxGasAmount="max_gas_amount",e.ParentSignatureType="parent_signature_type",e.Sender="sender",e.SequenceNumber="sequence_number",e.Timestamp="timestamp",e.Version="version",e))(Py||{});const y5=Object.freeze(Object.defineProperty({__proto__:null,APTOS_COIN:Ma,AccountSequenceNumber:Tg,Account_Transactions_Select_Column:kg,Address_Events_Summary_Select_Column:Bg,Address_Version_From_Events_Select_Column:Pg,Address_Version_From_Move_Resources_Select_Column:Ug,AnsClient:XT,ApiError:Dn,AptosAccount:Ca,AptosApiError:$l,AptosClient:Vt,AptosToken:GT,BCS:Z0,Block_Metadata_Transactions_Select_Column:Rg,CKDPriv:H0,COIN_TRANSFER:bg,CoinClient:KT,Coin_Activities_Select_Column:Og,Coin_Balances_Select_Column:Ig,Coin_Infos_Select_Column:$g,Coin_Supply_Select_Column:Lg,Collection_Datas_Select_Column:qg,Current_Ans_Lookup_Select_Column:Ng,Current_Ans_Lookup_V2_Select_Column:Dg,Current_Aptos_Names_Select_Column:Mg,Current_Coin_Balances_Select_Column:zg,Current_Collection_Datas_Select_Column:Fg,Current_Collection_Ownership_V2_View_Select_Column:Cg,Current_Collections_V2_Select_Column:Hg,Current_Delegated_Staking_Pool_Balances_Select_Column:jg,Current_Delegated_Voter_Select_Column:Wg,Current_Delegator_Balances_Select_Column:Gg,Current_Fungible_Asset_Balances_Select_Column:Kg,Current_Objects_Select_Column:Vg,Current_Staking_Pool_Voter_Select_Column:Xg,Current_Table_Items_Select_Column:Jg,Current_Token_Datas_Select_Column:Yg,Current_Token_Datas_V2_Select_Column:Zg,Current_Token_Ownerships_Select_Column:Qg,Current_Token_Ownerships_V2_Select_Column:ey,Current_Token_Pending_Claims_Select_Column:ty,Cursor_Ordering:ny,Delegated_Staking_Activities_Select_Column:sy,Delegated_Staking_Pools_Select_Column:ry,Delegator_Distinct_Pool_Select_Column:iy,Events_Select_Column:oy,FailedTransactionError:hg,FaucetClient:VT,FungibleAssetClient:ja,Fungible_Asset_Activities_Select_Column:ay,Fungible_Asset_Metadata_Select_Column:cy,HexString:xe,IndexerClient:od,Indexer_Status_Select_Column:uy,Ledger_Infos_Select_Column:ly,Move_Resources_Select_Column:dy,Network:Y0,NetworkToIndexerAPI:za,NetworkToNodeAPI:J0,Nft_Marketplace_V2_Current_Nft_Marketplace_Auctions_Select_Column:fy,Nft_Marketplace_V2_Current_Nft_Marketplace_Collection_Offers_Select_Column:hy,Nft_Marketplace_V2_Current_Nft_Marketplace_Listings_Select_Column:py,Nft_Marketplace_V2_Current_Nft_Marketplace_Token_Offers_Select_Column:gy,Nft_Marketplace_V2_Nft_Marketplace_Activities_Select_Column:yy,Nft_Metadata_Crawler_Parsed_Asset_Uris_Select_Column:my,NodeAPIToNetwork:Ku,Num_Active_Delegator_Per_Pool_Select_Column:wy,Order_By:by,Processor_Status_Select_Column:_y,PropertyMap:Bc,PropertyValue:ad,Proposal_Votes_Select_Column:Ty,Provider:_o,TRANSFER_COINS:tl,Table_Items_Select_Column:xy,Table_Metadatas_Select_Column:vy,TokenClient:WT,TokenTypes:yg,Token_Activities_Select_Column:Sy,Token_Activities_V2_Select_Column:Ay,Token_Datas_Select_Column:Ey,Token_Ownerships_Select_Column:ky,Tokens_Select_Column:By,TransactionBuilder:ps,TransactionBuilderABI:dg,TransactionBuilderEd25519:_a,TransactionBuilderMultiEd25519:lg,TransactionBuilderRemoteABI:Ct,TransactionWorker:JT,TransactionWorkerEvents:xg,TxnBuilderTypes:Ge,TypeTagParser:Ni,Types:vg,User_Transactions_Select_Column:Py,WaitForTransactionError:fg,ansContractsMap:nl,aptosRequest:Ll,argToTransactionArgument:ug,derivePath:W0,deserializePropertyMap:cd,deserializeValueBasedOnTypeTag:gg,ensureBigInt:$r,ensureBoolean:rd,ensureNumber:Ir,get:On,getAddressFromAccountOrAddress:ds,getMasterKeyFromSeed:C0,getPropertyType:Pc,getPropertyValueRaw:Ha,getPublicKey:H_,getSinglePropertyValueRaw:el,isValidPath:j0,nameComponentPattern:Ds,namePattern:_g,post:Pr,serializeArg:kc},Symbol.toStringTag,{value:"Module"}));var Wn={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.output=bn.exists=bn.hash=bn.bytes=bn.bool=bn.number=void 0;function Wa(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}bn.number=Wa;function Uy(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}bn.bool=Uy;function ud(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}bn.bytes=ud;function Ry(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wa(e.outputLen),Wa(e.blockLen)}bn.hash=Ry;function Oy(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}bn.exists=Oy;function Iy(e,t){ud(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}bn.output=Iy;const YT={number:Wa,bool:Uy,bytes:ud,hash:Ry,exists:Oy,output:Iy};bn.default=YT;var wi={},$y={},No={};const ro={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},ZT=Object.freeze(Object.defineProperty({__proto__:null,crypto:ro},Symbol.toStringTag,{value:"Module"})),QT=Tl(ZT);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=QT,n=E=>new Uint8Array(E.buffer,E.byteOffset,E.byteLength);e.u8=n;const s=E=>new Uint32Array(E.buffer,E.byteOffset,Math.floor(E.byteLength/4));e.u32=s;const r=E=>new DataView(E.buffer,E.byteOffset,E.byteLength);e.createView=r;const i=(E,S)=>E<<32-S|E>>>S;if(e.rotr=i,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(E,S)=>S.toString(16).padStart(2,"0"));function a(E){if(!(E instanceof Uint8Array))throw new Error("Uint8Array expected");let S="";for(let q=0;q<E.length;q++)S+=o[E[q]];return S}e.bytesToHex=a;function c(E){if(typeof E!="string")throw new TypeError("hexToBytes: expected string, got "+typeof E);if(E.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const S=new Uint8Array(E.length/2);for(let q=0;q<S.length;q++){const O=q*2,F=E.slice(O,O+2),Y=Number.parseInt(F,16);if(Number.isNaN(Y)||Y<0)throw new Error("Invalid byte sequence");S[q]=Y}return S}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function l(E,S,q){let O=Date.now();for(let F=0;F<E;F++){q(F);const Y=Date.now()-O;Y>=0&&Y<S||(await(0,e.nextTick)(),O+=Y)}}e.asyncLoop=l;function f(E){if(typeof E!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof E}`);return new TextEncoder().encode(E)}e.utf8ToBytes=f;function h(E){if(typeof E=="string"&&(E=f(E)),!(E instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof E})`);return E}e.toBytes=h;function g(...E){if(!E.every(O=>O instanceof Uint8Array))throw new Error("Uint8Array list expected");if(E.length===1)return E[0];const S=E.reduce((O,F)=>O+F.length,0),q=new Uint8Array(S);for(let O=0,F=0;O<E.length;O++){const Y=E[O];q.set(Y,F),F+=Y.length}return q}e.concatBytes=g;class w{clone(){return this._cloneInto()}}e.Hash=w;const b=E=>Object.prototype.toString.call(E)==="[object Object]"&&E.constructor===Object;function T(E,S){if(S!==void 0&&(typeof S!="object"||!b(S)))throw new TypeError("Options should be object or undefined");return Object.assign(E,S)}e.checkOpts=T;function R(E){const S=O=>E().update(h(O)).digest(),q=E();return S.outputLen=q.outputLen,S.blockLen=q.blockLen,S.create=()=>E(),S}e.wrapConstructor=R;function A(E){const S=(O,F)=>E(F).update(h(O)).digest(),q=E({});return S.outputLen=q.outputLen,S.blockLen=q.blockLen,S.create=O=>E(O),S}e.wrapConstructorWithOpts=A;function x(E=32){if(t.crypto.web)return t.crypto.web.getRandomValues(new Uint8Array(E));if(t.crypto.node)return new Uint8Array(t.crypto.node.randomBytes(E).buffer);throw new Error("The environment doesn't have randomBytes function")}e.randomBytes=x})(No);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=bn,n=No;class s extends n.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(o);const c=(0,n.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,l=new Uint8Array(u);l.set(c.length>u?o.create().update(c).digest():c);for(let f=0;f<l.length;f++)l[f]^=54;this.iHash.update(l),this.oHash=o.create();for(let f=0;f<l.length;f++)l[f]^=106;this.oHash.update(l),l.fill(0)}update(o){return t.default.exists(this),this.iHash.update(o),this}digestInto(o){t.default.exists(this),t.default.bytes(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:u,destroyed:l,blockLen:f,outputLen:h}=this;return o=o,o.finished=u,o.destroyed=l,o.blockLen=f,o.outputLen=h,o.oHash=a._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const r=(i,o,a)=>new s(i,o).update(a).digest();e.hmac=r,e.hmac.create=(i,o)=>new s(i,o)})($y);Object.defineProperty(wi,"__esModule",{value:!0});wi.pbkdf2Async=wi.pbkdf2=void 0;const Zo=bn,ex=$y,li=No;function Ly(e,t,n,s){Zo.default.hash(e);const r=(0,li.checkOpts)({dkLen:32,asyncTick:10},s),{c:i,dkLen:o,asyncTick:a}=r;if(Zo.default.number(i),Zo.default.number(o),Zo.default.number(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,li.toBytes)(t),u=(0,li.toBytes)(n),l=new Uint8Array(o),f=ex.hmac.create(e,c),h=f._cloneInto().update(u);return{c:i,dkLen:o,asyncTick:a,DK:l,PRF:f,PRFSalt:h}}function qy(e,t,n,s,r){return e.destroy(),t.destroy(),s&&s.destroy(),r.fill(0),n}function tx(e,t,n,s){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:c}=Ly(e,t,n,s);let u;const l=new Uint8Array(4),f=(0,li.createView)(l),h=new Uint8Array(a.outputLen);for(let g=1,w=0;w<i;g++,w+=a.outputLen){const b=o.subarray(w,w+a.outputLen);f.setInt32(0,g,!1),(u=c._cloneInto(u)).update(l).digestInto(h),b.set(h.subarray(0,b.length));for(let T=1;T<r;T++){a._cloneInto(u).update(h).digestInto(h);for(let R=0;R<b.length;R++)b[R]^=h[R]}}return qy(a,c,o,u,h)}wi.pbkdf2=tx;async function nx(e,t,n,s){const{c:r,dkLen:i,asyncTick:o,DK:a,PRF:c,PRFSalt:u}=Ly(e,t,n,s);let l;const f=new Uint8Array(4),h=(0,li.createView)(f),g=new Uint8Array(c.outputLen);for(let w=1,b=0;b<i;w++,b+=c.outputLen){const T=a.subarray(b,b+c.outputLen);h.setInt32(0,w,!1),(l=u._cloneInto(l)).update(f).digestInto(g),T.set(g.subarray(0,T.length)),await(0,li.asyncLoop)(r-1,o,R=>{c._cloneInto(l).update(g).digestInto(g);for(let A=0;A<T.length;A++)T[A]^=g[A]})}return qy(c,u,a,l,g)}wi.pbkdf2Async=nx;var Uc={},Rc={};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.SHA2=void 0;const pu=bn,Yi=No;function sx(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),c=s?4:0,u=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+u,a,s)}let rx=class extends Yi.Hash{constructor(t,n,s,r){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Yi.createView)(this.buffer)}update(t){pu.default.exists(this);const{view:n,buffer:s,blockLen:r}=this;t=(0,Yi.toBytes)(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const c=(0,Yi.createView)(t);for(;r<=i-o;o+=r)this.process(c,o);continue}s.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){pu.default.exists(this),pu.default.output(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let c=o;c<r;c++)n[c]=0;sx(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=(0,Yi.createView)(t);this.get().forEach((c,u)=>a.setUint32(4*u,c,i))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=o,r%n&&t.buffer.set(s),t}};Rc.SHA2=rx;Object.defineProperty(Uc,"__esModule",{value:!0});Uc.sha256=void 0;const ix=Rc,as=No,ox=(e,t,n)=>e&t^~e&n,ax=(e,t,n)=>e&t^e&n^t&n,cx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ir=new Uint32Array(64);class ux extends ix.SHA2{constructor(){super(64,32,8,!1),this.A=rr[0]|0,this.B=rr[1]|0,this.C=rr[2]|0,this.D=rr[3]|0,this.E=rr[4]|0,this.F=rr[5]|0,this.G=rr[6]|0,this.H=rr[7]|0}get(){const{A:t,B:n,C:s,D:r,E:i,F:o,G:a,H:c}=this;return[t,n,s,r,i,o,a,c]}set(t,n,s,r,i,o,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)ir[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const h=ir[f-15],g=ir[f-2],w=(0,as.rotr)(h,7)^(0,as.rotr)(h,18)^h>>>3,b=(0,as.rotr)(g,17)^(0,as.rotr)(g,19)^g>>>10;ir[f]=b+ir[f-7]+w+ir[f-16]|0}let{A:s,B:r,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const h=(0,as.rotr)(a,6)^(0,as.rotr)(a,11)^(0,as.rotr)(a,25),g=l+h+ox(a,c,u)+cx[f]+ir[f]|0,b=((0,as.rotr)(s,2)^(0,as.rotr)(s,13)^(0,as.rotr)(s,22))+ax(s,r,i)|0;l=u,u=c,c=a,a=o+g|0,o=i,i=r,r=s,s=g+b|0}s=s+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(s,r,i,o,a,c,u,l)}roundClean(){ir.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}Uc.sha256=(0,as.wrapConstructor)(()=>new ux);function rl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function lx(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Ny(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function dx(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");rl(e.outputLen),rl(e.blockLen)}function fx(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function hx(e,t){Ny(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Gn={number:rl,bool:lx,bytes:Ny,hash:dx,exists:fx,output:hx};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const px=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Dy=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Ta=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),gx=(e,t)=>e<<32-t|e>>>t,My=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!My)throw new Error("Non little-endian hardware is not supported");const yx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ld(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=yx[e[n]];return t}function dd(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const s=n*2,r=e.slice(s,s+2),i=Number.parseInt(r,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}const zy=async()=>{};async function mx(e,t,n){let s=Date.now();for(let r=0;r<e;r++){n(r);const i=Date.now()-s;i>=0&&i<t||(await zy(),s+=i)}}function Fy(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Mi(e){if(typeof e=="string"&&(e=Fy(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function wx(...e){if(!e.every(s=>s instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const t=e.reduce((s,r)=>s+r.length,0),n=new Uint8Array(t);for(let s=0,r=0;s<e.length;s++){const i=e[s];n.set(i,r),r+=i.length}return n}class Oc{clone(){return this._cloneInto()}}const bx=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function _x(e,t){if(t!==void 0&&(typeof t!="object"||!bx(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function Do(e){const t=s=>e().update(Mi(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Cy(e){const t=(s,r)=>e(r).update(Mi(s)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=s=>e(s),t}function Tx(e=32){if(ro.web)return ro.web.getRandomValues(new Uint8Array(e));if(ro.node)return new Uint8Array(ro.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}const xx=Object.freeze(Object.defineProperty({__proto__:null,Hash:Oc,asyncLoop:mx,bytesToHex:ld,checkOpts:_x,concatBytes:wx,createView:Ta,hexToBytes:dd,isLE:My,nextTick:zy,randomBytes:Tx,rotr:gx,toBytes:Mi,u32:Dy,u8:px,utf8ToBytes:Fy,wrapConstructor:Do,wrapConstructorWithOpts:Cy},Symbol.toStringTag,{value:"Module"}));function vx(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),c=s?4:0,u=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+u,a,s)}class Sx extends Oc{constructor(t,n,s,r){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ta(this.buffer)}update(t){Gn.exists(this);const{view:n,buffer:s,blockLen:r}=this;t=Mi(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const c=Ta(t);for(;r<=i-o;o+=r)this.process(c,o);continue}s.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Gn.exists(this),Gn.output(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(s,0),o=0);for(let c=o;c<r;c++)n[c]=0;vx(s,r-8,BigInt(this.length*8),i),this.process(s,0);const a=Ta(t);this.get().forEach((c,u)=>a.setUint32(4*u,c,i))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:i,destroyed:o,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=o,r%n&&t.buffer.set(s),t}}const Qo=BigInt(2**32-1),il=BigInt(32);function Hy(e,t=!1){return t?{h:Number(e&Qo),l:Number(e>>il&Qo)}:{h:Number(e>>il&Qo)|0,l:Number(e&Qo)|0}}function Ax(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:o}=Hy(e[r],t);[n[r],s[r]]=[i,o]}return[n,s]}const Ex=(e,t)=>BigInt(e>>>0)<<il|BigInt(t>>>0),kx=(e,t,n)=>e>>>n,Bx=(e,t,n)=>e<<32-n|t>>>n,Px=(e,t,n)=>e>>>n|t<<32-n,Ux=(e,t,n)=>e<<32-n|t>>>n,Rx=(e,t,n)=>e<<64-n|t>>>n-32,Ox=(e,t,n)=>e>>>n-32|t<<64-n,Ix=(e,t)=>t,$x=(e,t)=>e,Lx=(e,t,n)=>e<<n|t>>>32-n,qx=(e,t,n)=>t<<n|e>>>32-n,Nx=(e,t,n)=>t<<n-32|e>>>64-n,Dx=(e,t,n)=>e<<n-32|t>>>64-n;function Mx(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:r|0}}const zx=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Fx=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,Cx=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Hx=(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,jx=(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0),Wx=(e,t,n,s,r,i)=>t+n+s+r+i+(e/2**32|0)|0,rt={fromBig:Hy,split:Ax,toBig:Ex,shrSH:kx,shrSL:Bx,rotrSH:Px,rotrSL:Ux,rotrBH:Rx,rotrBL:Ox,rotr32H:Ix,rotr32L:$x,rotlSH:Lx,rotlSL:qx,rotlBH:Nx,rotlBL:Dx,add:Mx,add3L:zx,add3H:Fx,add4L:Cx,add4H:Hx,add5H:Wx,add5L:jx},[Gx,Kx]=rt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),or=new Uint32Array(80),ar=new Uint32Array(80);class Ic extends Sx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:s,Bl:r,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:f,Fl:h,Gh:g,Gl:w,Hh:b,Hl:T}=this;return[t,n,s,r,i,o,a,c,u,l,f,h,g,w,b,T]}set(t,n,s,r,i,o,a,c,u,l,f,h,g,w,b,T){this.Ah=t|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=f|0,this.Fl=h|0,this.Gh=g|0,this.Gl=w|0,this.Hh=b|0,this.Hl=T|0}process(t,n){for(let x=0;x<16;x++,n+=4)or[x]=t.getUint32(n),ar[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const E=or[x-15]|0,S=ar[x-15]|0,q=rt.rotrSH(E,S,1)^rt.rotrSH(E,S,8)^rt.shrSH(E,S,7),O=rt.rotrSL(E,S,1)^rt.rotrSL(E,S,8)^rt.shrSL(E,S,7),F=or[x-2]|0,Y=ar[x-2]|0,Se=rt.rotrSH(F,Y,19)^rt.rotrBH(F,Y,61)^rt.shrSH(F,Y,6),Oe=rt.rotrSL(F,Y,19)^rt.rotrBL(F,Y,61)^rt.shrSL(F,Y,6),N=rt.add4L(O,Oe,ar[x-7],ar[x-16]),D=rt.add4H(N,q,Se,or[x-7],or[x-16]);or[x]=D|0,ar[x]=N|0}let{Ah:s,Al:r,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:f,El:h,Fh:g,Fl:w,Gh:b,Gl:T,Hh:R,Hl:A}=this;for(let x=0;x<80;x++){const E=rt.rotrSH(f,h,14)^rt.rotrSH(f,h,18)^rt.rotrBH(f,h,41),S=rt.rotrSL(f,h,14)^rt.rotrSL(f,h,18)^rt.rotrBL(f,h,41),q=f&g^~f&b,O=h&w^~h&T,F=rt.add5L(A,S,O,Kx[x],ar[x]),Y=rt.add5H(F,R,E,q,Gx[x],or[x]),Se=F|0,Oe=rt.rotrSH(s,r,28)^rt.rotrBH(s,r,34)^rt.rotrBH(s,r,39),N=rt.rotrSL(s,r,28)^rt.rotrBL(s,r,34)^rt.rotrBL(s,r,39),D=s&i^s&a^i&a,M=r&o^r&c^o&c;R=b|0,A=T|0,b=g|0,T=w|0,g=f|0,w=h|0,{h:f,l:h}=rt.add(u|0,l|0,Y|0,Se|0),u=a|0,l=c|0,a=i|0,c=o|0,i=s|0,o=r|0;const oe=rt.add3L(Se,N,M);s=rt.add3H(oe,Y,Oe,D),r=oe|0}({h:s,l:r}=rt.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:i,l:o}=rt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=rt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=rt.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:f,l:h}=rt.add(this.Eh|0,this.El|0,f|0,h|0),{h:g,l:w}=rt.add(this.Fh|0,this.Fl|0,g|0,w|0),{h:b,l:T}=rt.add(this.Gh|0,this.Gl|0,b|0,T|0),{h:R,l:A}=rt.add(this.Hh|0,this.Hl|0,R|0,A|0),this.set(s,r,i,o,a,c,u,l,f,h,g,w,b,T,R,A)}roundClean(){or.fill(0),ar.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Vx extends Ic{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Xx extends Ic{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const fd=Do(()=>new Ic),Jx=Do(()=>new Vx),Yx=Do(()=>new Xx),Zx=Object.freeze(Object.defineProperty({__proto__:null,SHA512:Ic,sha384:Yx,sha512:fd,sha512_256:Jx},Symbol.toStringTag,{value:"Module"})),Qx=Tl(Zx),ev=Tl(xx);Object.defineProperty(Wn,"__esModule",{value:!0});var jy=Wn.mnemonicToSeedSync=Wn.mnemonicToSeed=Wn.validateMnemonic=Wn.entropyToMnemonic=Wn.mnemonicToEntropy=Wn.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Wy=bn,Gy=wi,tv=Uc,Ky=Qx,nv=ev,ea=l0,sv=e=>e[0]==="あいこくしん";function Vy(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function hd(e){const t=Vy(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function Xy(e){Wy.default.bytes(e,16,20,24,28,32)}function rv(e,t=128){if(Wy.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return Zy((0,nv.randomBytes)(t/8),e)}Wn.generateMnemonic=rv;const iv=e=>{const t=8-e.length/4;return new Uint8Array([(0,tv.sha256)(e)[0]>>t<<t])};function Jy(e){if(!Array.isArray(e)||e.length!==2**11||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),ea.utils.chain(ea.utils.checksum(1,iv),ea.utils.radix2(11,!0),ea.utils.alphabet(e))}function Yy(e,t){const{words:n}=hd(e),s=Jy(t).decode(n);return Xy(s),s}Wn.mnemonicToEntropy=Yy;function Zy(e,t){return Xy(e),Jy(t).encode(e).join(sv(t)?"　":" ")}Wn.entropyToMnemonic=Zy;function ov(e,t){try{Yy(e,t)}catch{return!1}return!0}Wn.validateMnemonic=ov;const Qy=e=>Vy(`mnemonic${e}`);function av(e,t=""){return(0,Gy.pbkdf2Async)(Ky.sha512,hd(e).nfkd,Qy(t),{c:2048,dkLen:64})}Wn.mnemonicToSeed=av;function cv(e,t=""){return(0,Gy.pbkdf2)(Ky.sha512,hd(e).nfkd,Qy(t),{c:2048,dkLen:64})}jy=Wn.mnemonicToSeedSync=cv;const[em,tm,nm]=[[],[],[]],uv=BigInt(0),Zi=BigInt(1),lv=BigInt(2),dv=BigInt(7),fv=BigInt(256),hv=BigInt(113);for(let e=0,t=Zi,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],em.push(2*(5*s+n)),tm.push((e+1)*(e+2)/2%64);let r=uv;for(let i=0;i<7;i++)t=(t<<Zi^(t>>dv)*hv)%fv,t&lv&&(r^=Zi<<(Zi<<BigInt(i))-Zi);nm.push(r)}const[pv,gv]=rt.split(nm,!0),Ff=(e,t,n)=>n>32?rt.rotlBH(e,t,n):rt.rotlSH(e,t,n),Cf=(e,t,n)=>n>32?rt.rotlBL(e,t,n):rt.rotlSL(e,t,n);function yv(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],f=Ff(u,l,1)^n[a],h=Cf(u,l,1)^n[a+1];for(let g=0;g<50;g+=10)e[o+g]^=f,e[o+g+1]^=h}let r=e[2],i=e[3];for(let o=0;o<24;o++){const a=tm[o],c=Ff(r,i,a),u=Cf(r,i,a),l=em[o];r=e[l],i=e[l+1],e[l]=c,e[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=pv[s],e[1]^=gv[s]}n.fill(0)}class $c extends Oc{constructor(t,n,s,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Gn.number(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Dy(this.state)}keccak(){yv(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Gn.exists(this);const{blockLen:n,state:s}=this;t=Mi(t);const r=t.length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);for(let a=0;a<o;a++)s[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:s,blockLen:r}=this;t[s]^=n,n&128&&s===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){Gn.exists(this,!1),Gn.bytes(t),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,i=t.length;r<i;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,i-r);t.set(n.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Gn.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Gn.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:s,outputLen:r,rounds:i,enableXOF:o}=this;return t||(t=new $c(n,s,r,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=s,t.outputLen=r,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Tr=(e,t,n)=>Do(()=>new $c(t,e,n));Tr(6,144,224/8);const bi=Tr(6,136,256/8);Tr(6,104,384/8);Tr(6,72,512/8);Tr(1,144,224/8);Tr(1,136,256/8);Tr(1,104,384/8);Tr(1,72,512/8);const sm=(e,t,n)=>Cy((s={})=>new $c(t,e,s.dkLen===void 0?n:s.dkLen,!0));sm(31,168,128/8);sm(31,136,256/8);class rm extends Oc{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Gn.hash(t);const s=Mi(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(s.length>r?t.create().update(s).digest():s);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Gn.exists(this),this.iHash.update(t),this}digestInto(t){Gn.exists(this),Gn.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const pd=(e,t,n)=>new rm(e,t).update(n).digest();pd.create=(e,t)=>new rm(e,t);var ol={},mv={get exports(){return ol},set exports(e){ol=e}},Ga={},wv={get exports(){return Ga},set exports(e){Ga=e}},im=function(t,n){return function(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return t.apply(n,r)}},bv=im,gd=Object.prototype.toString,yd=function(e){return function(t){var n=gd.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function jr(e){return e=e.toLowerCase(),function(n){return yd(n)===e}}function md(e){return Array.isArray(e)}function Ka(e){return typeof e>"u"}function _v(e){return e!==null&&!Ka(e)&&e.constructor!==null&&!Ka(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var om=jr("ArrayBuffer");function Tv(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&om(e.buffer),t}function xv(e){return typeof e=="string"}function vv(e){return typeof e=="number"}function am(e){return e!==null&&typeof e=="object"}function xa(e){if(yd(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var Sv=jr("Date"),Av=jr("File"),Ev=jr("Blob"),kv=jr("FileList");function wd(e){return gd.call(e)==="[object Function]"}function Bv(e){return am(e)&&wd(e.pipe)}function Pv(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||gd.call(e)===t||wd(e.toString)&&e.toString()===t)}var Uv=jr("URLSearchParams");function Rv(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Ov(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function bd(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),md(e))for(var n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function al(){var e={};function t(r,i){xa(e[i])&&xa(r)?e[i]=al(e[i],r):xa(r)?e[i]=al({},r):md(r)?e[i]=r.slice():e[i]=r}for(var n=0,s=arguments.length;n<s;n++)bd(arguments[n],t);return e}function Iv(e,t,n){return bd(t,function(r,i){n&&typeof r=="function"?e[i]=bv(r,n):e[i]=r}),e}function $v(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function Lv(e,t,n,s){e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function qv(e,t,n){var s,r,i,o={};t=t||{};do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)i=s[r],o[i]||(t[i]=e[i],o[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function Nv(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var s=e.indexOf(t,n);return s!==-1&&s===n}function Dv(e){if(!e)return null;var t=e.length;if(Ka(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var Mv=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),An={isArray:md,isArrayBuffer:om,isBuffer:_v,isFormData:Pv,isArrayBufferView:Tv,isString:xv,isNumber:vv,isObject:am,isPlainObject:xa,isUndefined:Ka,isDate:Sv,isFile:Av,isBlob:Ev,isFunction:wd,isStream:Bv,isURLSearchParams:Uv,isStandardBrowserEnv:Ov,forEach:bd,merge:al,extend:Iv,trim:Rv,stripBOM:$v,inherits:Lv,toFlatObject:qv,kindOf:yd,kindOfTest:jr,endsWith:Nv,toArray:Dv,isTypedArray:Mv,isFileList:kv},Zr=An;function Hf(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var cm=function(t,n,s){if(!n)return t;var r;if(s)r=s(n);else if(Zr.isURLSearchParams(n))r=n.toString();else{var i=[];Zr.forEach(n,function(c,u){c===null||typeof c>"u"||(Zr.isArray(c)?u=u+"[]":c=[c],Zr.forEach(c,function(f){Zr.isDate(f)?f=f.toISOString():Zr.isObject(f)&&(f=JSON.stringify(f)),i.push(Hf(u)+"="+Hf(f))}))}),r=i.join("&")}if(r){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t},zv=An;function Lc(){this.handlers=[]}Lc.prototype.use=function(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};Lc.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Lc.prototype.forEach=function(t){zv.forEach(this.handlers,function(s){s!==null&&t(s)})};var Fv=Lc,Cv=An,Hv=function(t,n){Cv.forEach(t,function(r,i){i!==n&&i.toUpperCase()===n.toUpperCase()&&(t[n]=r,delete t[i])})},um=An;function _i(e,t,n,s,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r)}um.inherits(_i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var lm=_i.prototype,dm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){dm[e]={value:e}});Object.defineProperties(_i,dm);Object.defineProperty(lm,"isAxiosError",{value:!0});_i.from=function(e,t,n,s,r,i){var o=Object.create(lm);return um.toFlatObject(e,o,function(c){return c!==Error.prototype}),_i.call(o,e.message,t,n,s,r),o.name=e.name,i&&Object.assign(o,i),o};var zi=_i,fm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},is=An;function jv(e,t){t=t||new FormData;var n=[];function s(i){return i===null?"":is.isDate(i)?i.toISOString():is.isArrayBuffer(i)||is.isTypedArray(i)?typeof Blob=="function"?new Blob([i]):Buffer.from(i):i}function r(i,o){if(is.isPlainObject(i)||is.isArray(i)){if(n.indexOf(i)!==-1)throw Error("Circular reference detected in "+o);n.push(i),is.forEach(i,function(c,u){if(!is.isUndefined(c)){var l=o?o+"."+u:u,f;if(c&&!o&&typeof c=="object"){if(is.endsWith(u,"{}"))c=JSON.stringify(c);else if(is.endsWith(u,"[]")&&(f=is.toArray(c))){f.forEach(function(h){!is.isUndefined(h)&&t.append(l,s(h))});return}}r(c,l)}}),n.pop()}else t.append(o,s(i))}return r(e),t}var hm=jv,gu,jf;function Wv(){if(jf)return gu;jf=1;var e=zi;return gu=function(n,s,r){var i=r.config.validateStatus;!r.status||!i||i(r.status)?n(r):s(new e("Request failed with status code "+r.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},gu}var yu,Wf;function Gv(){if(Wf)return yu;Wf=1;var e=An;return yu=e.isStandardBrowserEnv()?function(){return{write:function(s,r,i,o,a,c){var u=[];u.push(s+"="+encodeURIComponent(r)),e.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),e.isString(o)&&u.push("path="+o),e.isString(a)&&u.push("domain="+a),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(s){var r=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),yu}var Kv=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},Vv=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},Xv=Kv,Jv=Vv,pm=function(t,n){return t&&!Xv(n)?Jv(t,n):n},mu,Gf;function Yv(){if(Gf)return mu;Gf=1;var e=An,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return mu=function(s){var r={},i,o,a;return s&&e.forEach(s.split(`
`),function(u){if(a=u.indexOf(":"),i=e.trim(u.substr(0,a)).toLowerCase(),o=e.trim(u.substr(a+1)),i){if(r[i]&&t.indexOf(i)>=0)return;i==="set-cookie"?r[i]=(r[i]?r[i]:[]).concat([o]):r[i]=r[i]?r[i]+", "+o:o}}),r},mu}var wu,Kf;function Zv(){if(Kf)return wu;Kf=1;var e=An;return wu=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),r;function i(o){var a=o;return n&&(s.setAttribute("href",a),a=s.href),s.setAttribute("href",a),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return r=i(window.location.href),function(a){var c=e.isString(a)?i(a):a;return c.protocol===r.protocol&&c.host===r.host}}():function(){return function(){return!0}}(),wu}var bu,Vf;function qc(){if(Vf)return bu;Vf=1;var e=zi,t=An;function n(s){e.call(this,s??"canceled",e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(n,e,{__CANCEL__:!0}),bu=n,bu}var _u,Xf;function Qv(){return Xf||(Xf=1,_u=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}),_u}var Tu,Jf;function Yf(){if(Jf)return Tu;Jf=1;var e=An,t=Wv(),n=Gv(),s=cm,r=pm,i=Yv(),o=Zv(),a=fm,c=zi,u=qc(),l=Qv();return Tu=function(h){return new Promise(function(w,b){var T=h.data,R=h.headers,A=h.responseType,x;function E(){h.cancelToken&&h.cancelToken.unsubscribe(x),h.signal&&h.signal.removeEventListener("abort",x)}e.isFormData(T)&&e.isStandardBrowserEnv()&&delete R["Content-Type"];var S=new XMLHttpRequest;if(h.auth){var q=h.auth.username||"",O=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";R.Authorization="Basic "+btoa(q+":"+O)}var F=r(h.baseURL,h.url);S.open(h.method.toUpperCase(),s(F,h.params,h.paramsSerializer),!0),S.timeout=h.timeout;function Y(){if(S){var N="getAllResponseHeaders"in S?i(S.getAllResponseHeaders()):null,D=!A||A==="text"||A==="json"?S.responseText:S.response,M={data:D,status:S.status,statusText:S.statusText,headers:N,config:h,request:S};t(function(Te){w(Te),E()},function(Te){b(Te),E()},M),S=null}}if("onloadend"in S?S.onloadend=Y:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(Y)},S.onabort=function(){S&&(b(new c("Request aborted",c.ECONNABORTED,h,S)),S=null)},S.onerror=function(){b(new c("Network Error",c.ERR_NETWORK,h,S,S)),S=null},S.ontimeout=function(){var D=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",M=h.transitional||a;h.timeoutErrorMessage&&(D=h.timeoutErrorMessage),b(new c(D,M.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,h,S)),S=null},e.isStandardBrowserEnv()){var Se=(h.withCredentials||o(F))&&h.xsrfCookieName?n.read(h.xsrfCookieName):void 0;Se&&(R[h.xsrfHeaderName]=Se)}"setRequestHeader"in S&&e.forEach(R,function(D,M){typeof T>"u"&&M.toLowerCase()==="content-type"?delete R[M]:S.setRequestHeader(M,D)}),e.isUndefined(h.withCredentials)||(S.withCredentials=!!h.withCredentials),A&&A!=="json"&&(S.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&S.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(x=function(N){S&&(b(!N||N&&N.type?new u:N),S.abort(),S=null)},h.cancelToken&&h.cancelToken.subscribe(x),h.signal&&(h.signal.aborted?x():h.signal.addEventListener("abort",x))),T||(T=null);var Oe=l(F);if(Oe&&["http","https","file"].indexOf(Oe)===-1){b(new c("Unsupported protocol "+Oe+":",c.ERR_BAD_REQUEST,h));return}S.send(T)})},Tu}var xu,Zf;function e6(){return Zf||(Zf=1,xu=null),xu}var gn=An,Qf=Hv,eh=zi,t6=fm,n6=hm,s6={"Content-Type":"application/x-www-form-urlencoded"};function th(e,t){!gn.isUndefined(e)&&gn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function r6(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Yf()),e}function i6(e,t,n){if(gn.isString(e))try{return(t||JSON.parse)(e),gn.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}var Nc={transitional:t6,adapter:r6(),transformRequest:[function(t,n){if(Qf(n,"Accept"),Qf(n,"Content-Type"),gn.isFormData(t)||gn.isArrayBuffer(t)||gn.isBuffer(t)||gn.isStream(t)||gn.isFile(t)||gn.isBlob(t))return t;if(gn.isArrayBufferView(t))return t.buffer;if(gn.isURLSearchParams(t))return th(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var s=gn.isObject(t),r=n&&n["Content-Type"],i;if((i=gn.isFileList(t))||s&&r==="multipart/form-data"){var o=this.env&&this.env.FormData;return n6(i?{"files[]":t}:t,o&&new o)}else if(s||r==="application/json")return th(n,"application/json"),i6(t);return t}],transformResponse:[function(t){var n=this.transitional||Nc.transitional,s=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,i=!s&&this.responseType==="json";if(i||r&&gn.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(i)throw o.name==="SyntaxError"?eh.from(o,eh.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:e6()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};gn.forEach(["delete","get","head"],function(t){Nc.headers[t]={}});gn.forEach(["post","put","patch"],function(t){Nc.headers[t]=gn.merge(s6)});var _d=Nc,o6=An,a6=_d,c6=function(t,n,s){var r=this||a6;return o6.forEach(s,function(o){t=o.call(r,t,n)}),t},vu,nh;function gm(){return nh||(nh=1,vu=function(t){return!!(t&&t.__CANCEL__)}),vu}var sh=An,Su=c6,u6=gm(),l6=_d,d6=qc();function Au(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new d6}var f6=function(t){Au(t),t.headers=t.headers||{},t.data=Su.call(t,t.data,t.headers,t.transformRequest),t.headers=sh.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),sh.forEach(["delete","get","head","post","put","patch","common"],function(r){delete t.headers[r]});var n=t.adapter||l6.adapter;return n(t).then(function(r){return Au(t),r.data=Su.call(t,r.data,r.headers,t.transformResponse),r},function(r){return u6(r)||(Au(t),r&&r.response&&(r.response.data=Su.call(t,r.response.data,r.response.headers,t.transformResponse))),Promise.reject(r)})},Hn=An,ym=function(t,n){n=n||{};var s={};function r(l,f){return Hn.isPlainObject(l)&&Hn.isPlainObject(f)?Hn.merge(l,f):Hn.isPlainObject(f)?Hn.merge({},f):Hn.isArray(f)?f.slice():f}function i(l){if(Hn.isUndefined(n[l])){if(!Hn.isUndefined(t[l]))return r(void 0,t[l])}else return r(t[l],n[l])}function o(l){if(!Hn.isUndefined(n[l]))return r(void 0,n[l])}function a(l){if(Hn.isUndefined(n[l])){if(!Hn.isUndefined(t[l]))return r(void 0,t[l])}else return r(void 0,n[l])}function c(l){if(l in n)return r(t[l],n[l]);if(l in t)return r(void 0,t[l])}var u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Hn.forEach(Object.keys(t).concat(Object.keys(n)),function(f){var h=u[f]||i,g=h(f);Hn.isUndefined(g)&&h!==c||(s[f]=g)}),s},Eu,rh;function mm(){return rh||(rh=1,Eu={version:"0.27.2"}),Eu}var h6=mm().version,hr=zi,Td={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Td[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});var ih={};Td.transitional=function(t,n,s){function r(i,o){return"[Axios v"+h6+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return function(i,o,a){if(t===!1)throw new hr(r(o," has been removed"+(n?" in "+n:"")),hr.ERR_DEPRECATED);return n&&!ih[o]&&(ih[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,a):!0}};function p6(e,t,n){if(typeof e!="object")throw new hr("options must be an object",hr.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(e),r=s.length;r-- >0;){var i=s[r],o=t[i];if(o){var a=e[i],c=a===void 0||o(a,i,e);if(c!==!0)throw new hr("option "+i+" must be "+c,hr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new hr("Unknown option "+i,hr.ERR_BAD_OPTION)}}var g6={assertOptions:p6,validators:Td},wm=An,y6=cm,oh=Fv,ah=f6,Dc=ym,m6=pm,bm=g6,Qr=bm.validators;function Ti(e){this.defaults=e,this.interceptors={request:new oh,response:new oh}}Ti.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Dc(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var s=n.transitional;s!==void 0&&bm.assertOptions(s,{silentJSONParsing:Qr.transitional(Qr.boolean),forcedJSONParsing:Qr.transitional(Qr.boolean),clarifyTimeoutError:Qr.transitional(Qr.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(i=i&&g.synchronous,r.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var a;if(!i){var c=[ah,void 0];for(Array.prototype.unshift.apply(c,r),c=c.concat(o),a=Promise.resolve(n);c.length;)a=a.then(c.shift(),c.shift());return a}for(var u=n;r.length;){var l=r.shift(),f=r.shift();try{u=l(u)}catch(h){f(h);break}}try{a=ah(u)}catch(h){return Promise.reject(h)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Ti.prototype.getUri=function(t){t=Dc(this.defaults,t);var n=m6(t.baseURL,t.url);return y6(n,t.params,t.paramsSerializer)};wm.forEach(["delete","get","head","options"],function(t){Ti.prototype[t]=function(n,s){return this.request(Dc(s||{},{method:t,url:n,data:(s||{}).data}))}});wm.forEach(["post","put","patch"],function(t){function n(s){return function(i,o,a){return this.request(Dc(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ti.prototype[t]=n(),Ti.prototype[t+"Form"]=n(!0)});var w6=Ti,ku,ch;function b6(){if(ch)return ku;ch=1;var e=qc();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(o){s=o});var r=this;this.promise.then(function(i){if(r._listeners){var o,a=r._listeners.length;for(o=0;o<a;o++)r._listeners[o](i);r._listeners=null}}),this.promise.then=function(i){var o,a=new Promise(function(c){r.subscribe(c),o=c}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},n(function(o){r.reason||(r.reason=new e(o),s(r.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]},t.prototype.unsubscribe=function(s){if(this._listeners){var r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}},t.source=function(){var s,r=new t(function(o){s=o});return{token:r,cancel:s}},ku=t,ku}var Bu,uh;function _6(){return uh||(uh=1,Bu=function(t){return function(s){return t.apply(null,s)}}),Bu}var Pu,lh;function T6(){if(lh)return Pu;lh=1;var e=An;return Pu=function(n){return e.isObject(n)&&n.isAxiosError===!0},Pu}var dh=An,x6=im,va=w6,v6=ym,S6=_d;function _m(e){var t=new va(e),n=x6(va.prototype.request,t);return dh.extend(n,va.prototype,t),dh.extend(n,t),n.create=function(r){return _m(v6(e,r))},n}var Mn=_m(S6);Mn.Axios=va;Mn.CanceledError=qc();Mn.CancelToken=b6();Mn.isCancel=gm();Mn.VERSION=mm().version;Mn.toFormData=hm;Mn.AxiosError=zi;Mn.Cancel=Mn.CanceledError;Mn.all=function(t){return Promise.all(t)};Mn.spread=_6();Mn.isAxiosError=T6();wv.exports=Mn;Ga.default=Mn;(function(e){e.exports=Ga})(mv);const xi=Wh(ol);var Tm=typeof self=="object"?self.FormData:window.FormData,xm=Object.defineProperty,A6=Object.getOwnPropertyDescriptor,Mc=(e,t)=>{for(var n in t)xm(e,n,{get:t[n],enumerable:!0})},$t=(e,t,n,s)=>{for(var r=s>1?void 0:s?A6(t,n):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(s?o(t,n,r):o(r))||r);return s&&r&&xm(t,n,r),r},E6=/^m(\/[0-9]+')+$/,vm=e=>e.replace("'",""),k6="ed25519 seed",B6=2147483648,P6=e=>{const n=pd.create(fd,k6).update(dd(e)).digest(),s=n.slice(0,32),r=n.slice(32);return{key:s,chainCode:r}},U6=({key:e,chainCode:t},n)=>{const s=new ArrayBuffer(4);new DataView(s).setUint32(0,n);const r=new Uint8Array(s),i=new Uint8Array([0]),o=new Uint8Array([...i,...e,...r]),a=pd.create(fd,t).update(o).digest(),c=a.slice(0,32),u=a.slice(32);return{key:c,chainCode:u}},R6=e=>E6.test(e)?!e.split("/").slice(1).map(vm).some(Number.isNaN):!1,O6=(e,t,n=B6)=>{if(!R6(e))throw new Error("Invalid derivation path");const{key:s,chainCode:r}=P6(t);return e.split("/").slice(1).map(vm).map(o=>parseInt(o,10)).reduce((o,a)=>U6(o,a+n),{key:s,chainCode:r})},ot=class{static fromBuffer(e){return ot.fromUint8Array(e)}static fromUint8Array(e){return new ot(ld(e))}static ensure(e){return typeof e=="string"?new ot(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(dd(this.noPrefix()))}};async function I6(e){return new Promise(t=>{setTimeout(t,e)})}var fh="/v1";function $6(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(fh)||(t=`${t}${fh}`),t}var Sm=2e5,Am=20,L6=20,q6="0x1::aptos_coin::AptosCoin";function zc(e){let t,n,s;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,s=e.tags):t=e,(r,i,o)=>{if(o.value!=null)o.value=hh(o.value,t,n,s);else if(o.get!=null)o.get=hh(o.get,t,n,s);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function N6(e,t){return zc({ttlMs:e,hashFunction:t})}var Sa=new Map;function D6(e){const t=new Set;for(const n of e){const s=Sa.get(n);if(s)for(const r of s)t.has(r)||(r.clear(),t.add(r))}return t.size}function hh(e,t,n=0,s){const r=Symbol("__memoized_map__");return function(...i){let o;const a=this;a.hasOwnProperty(r)||Object.defineProperty(a,r,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[r];if(Array.isArray(s))for(const u of s)Sa.has(u)?Sa.get(u).push(c):Sa.set(u,[c]);if(t||i.length>0||n>0){let u;t===!0?u=i.map(h=>h.toString()).join("!"):t?u=t.apply(a,i):u=i[0];const l=`${u}__timestamp`;let f=!1;if(n>0)if(!c.has(l))f=!0;else{const h=c.get(l);f=Date.now()-h>n}c.has(u)&&!f?o=c.get(u):(o=e.apply(a,i),c.set(u,o),n>0&&c.set(l,Date.now()))}else{const u=a;c.has(u)?o=c.get(u):(o=e.apply(a,i),c.set(u,o))}return o}}async function ph(e,t,n,s){var r;const i=[];let o;for(;;){const a=await e(ot.ensure(t).hex(),(r=s==null?void 0:s.ledgerVersion)==null?void 0:r.toString(),o,n);if(o=a.__headers["x-aptos-cursor"],delete a.__headers,i.push(...a),o==null)break}return i}var M6={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},z6={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},k={};Mc(k,{AccountAddress:()=>Yt,AccountAuthenticator:()=>xo,AccountAuthenticatorEd25519:()=>Sd,AccountAuthenticatorMultiEd25519:()=>Ad,ArgumentABI:()=>Go,AuthenticationKey:()=>Fr,ChainId:()=>Gc,ChangeSet:()=>Z6,Ed25519PublicKey:()=>ns,Ed25519Signature:()=>Bs,EntryFunction:()=>Lr,EntryFunctionABI:()=>ki,Identifier:()=>qn,Module:()=>km,ModuleId:()=>zr,MultiAgentRawTransaction:()=>jc,MultiEd25519PublicKey:()=>Mo,MultiEd25519Signature:()=>Fc,MultiSig:()=>Bd,MultiSigTransactionPayload:()=>kd,RawTransaction:()=>Wi,RawTransactionWithData:()=>Bm,RotationProofChallenge:()=>eS,Script:()=>Fo,ScriptABI:()=>Qc,SignedTransaction:()=>Co,StructTag:()=>vi,Transaction:()=>Pm,TransactionArgument:()=>vs,TransactionArgumentAddress:()=>Ai,TransactionArgumentBool:()=>Zc,TransactionArgumentU128:()=>Jc,TransactionArgumentU16:()=>Vc,TransactionArgumentU256:()=>Yc,TransactionArgumentU32:()=>Xc,TransactionArgumentU64:()=>Si,TransactionArgumentU8:()=>Kc,TransactionArgumentU8Vector:()=>Ei,TransactionAuthenticator:()=>zo,TransactionAuthenticatorEd25519:()=>Cc,TransactionAuthenticatorMultiAgent:()=>vd,TransactionAuthenticatorMultiEd25519:()=>Hc,TransactionPayload:()=>Ho,TransactionPayloadEntryFunction:()=>Wc,TransactionPayloadMultisig:()=>Pd,TransactionPayloadScript:()=>jo,TransactionScriptABI:()=>eu,TypeArgumentABI:()=>Wo,TypeTag:()=>Sn,TypeTagAddress:()=>Xr,TypeTagBool:()=>Gr,TypeTagSigner:()=>Ed,TypeTagStruct:()=>Jr,TypeTagU128:()=>Vr,TypeTagU16:()=>Fi,TypeTagU256:()=>Hi,TypeTagU32:()=>Ci,TypeTagU64:()=>Kr,TypeTagU8:()=>Gs,TypeTagVector:()=>ji,UserTransaction:()=>Ud,WriteSet:()=>Q6});var H={};Mc(H,{Deserializer:()=>xd,Serializer:()=>rn,bcsSerializeBool:()=>X6,bcsSerializeBytes:()=>ni,bcsSerializeFixedBytes:()=>Y6,bcsSerializeStr:()=>J6,bcsSerializeU128:()=>V6,bcsSerializeU16:()=>G6,bcsSerializeU32:()=>K6,bcsSerializeU8:()=>cl,bcsSerializeUint64:()=>W6,bcsToBytes:()=>Xs,deserializeVector:()=>rs,serializeVector:()=>Jn,serializeVectorWithFunc:()=>j6});var F6=2**8-1,C6=2**16-1,To=2**32-1,ho=BigInt(2**64)-BigInt(1),Em=BigInt(2**128)-BigInt(1),H6=BigInt(2**256)-BigInt(1),rn=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){const t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,n){this.ensureBufferWillHandleSize(t);const s=new DataView(this.buffer,this.offset);e.apply(s,[0,n,!0]),this.offset+=t}serializeStr(e){const t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");const t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){const t=BigInt(e.toString())&BigInt(To),n=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(n))}serializeU128(e){const t=BigInt(e.toString())&ho,n=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(n)}serializeU256(e){const t=BigInt(e.toString())&Em,n=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(n)}serializeU32AsUleb128(e){let t=e;const n=[];for(;t>>>7;)n.push(t&127|128),t>>>=7;n.push(t),this.serialize(new Uint8Array(n))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};$t([Wr(0,F6)],rn.prototype,"serializeU8",1);$t([Wr(0,C6)],rn.prototype,"serializeU16",1);$t([Wr(0,To)],rn.prototype,"serializeU32",1);$t([Wr(BigInt(0),ho)],rn.prototype,"serializeU64",1);$t([Wr(BigInt(0),Em)],rn.prototype,"serializeU128",1);$t([Wr(BigInt(0),H6)],rn.prototype,"serializeU256",1);$t([Wr(0,To)],rn.prototype,"serializeU32AsUleb128",1);function Wr(e,t,n){return(s,r,i)=>{const o=i.value;return i.value=function(c){const u=BigInt(c.toString());if(u>BigInt(t.toString())||u<BigInt(e.toString()))throw new Error(n||"Value is out of range");o.apply(this,[c])},i}}var xd=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){const e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){const e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){const e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){const e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){const e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<To;){const n=this.deserializeU8();if(e|=BigInt(n&127)<<BigInt(t),!(n&128))break;t+=7}if(e>To)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};function Jn(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function j6(e,t){const n=new rn;n.serializeU32AsUleb128(e.length);const s=n[t];return e.forEach(r=>{s.call(n,r)}),n.getBytes()}function rs(e,t){const n=e.deserializeUleb128AsU32(),s=[];for(let r=0;r<n;r+=1)s.push(t.deserialize(e));return s}function Xs(e){const t=new rn;return e.serialize(t),t.getBytes()}function W6(e){const t=new rn;return t.serializeU64(e),t.getBytes()}function cl(e){const t=new rn;return t.serializeU8(e),t.getBytes()}function G6(e){const t=new rn;return t.serializeU16(e),t.getBytes()}function K6(e){const t=new rn;return t.serializeU32(e),t.getBytes()}function V6(e){const t=new rn;return t.serializeU128(e),t.getBytes()}function X6(e){const t=new rn;return t.serializeBool(e),t.getBytes()}function J6(e){const t=new rn;return t.serializeStr(e),t.getBytes()}function ni(e){const t=new rn;return t.serializeBytes(e),t.getBytes()}function Y6(e){const t=new rn;return t.serializeFixedBytes(e),t.getBytes()}var es=class{constructor(e){if(e.length!==es.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=ot.ensure(e);t.noPrefix().length%2!==0&&(t=new ot(`0${t.noPrefix()}`));const n=t.toUint8Array();if(n.length>es.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(n.length===es.LENGTH)return new es(n);const s=new Uint8Array(es.LENGTH);return s.set(n,es.LENGTH-n.length),new es(s)}static isValid(e){if(e==="")return!1;let t=ot.ensure(e);return t.noPrefix().length%2!==0&&(t=new ot(`0${t.noPrefix()}`)),t.toUint8Array().length<=es.LENGTH}toHexString(){return ot.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new es(e.deserializeFixedBytes(es.LENGTH))}},Yt=es;Yt.LENGTH=32;Yt.CORE_CODE_ADDRESS=es.fromHex("0x1");var Aa=class{constructor(e){if(e.length!==Aa.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Aa.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Aa(t)}},ns=Aa;ns.LENGTH=32;var Ea=class{constructor(e){if(this.value=e,e.length!==Ea.LENGTH)throw new Error(`Ed25519Signature length should be ${Ea.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new Ea(t)}},Bs=Ea;Bs.LENGTH=64;var ul=32,Mo=class{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>ul)throw new Error(`"threshold" cannot be larger than ${ul}`)}toBytes(){const e=new Uint8Array(this.public_keys.length*ns.LENGTH+1);return this.public_keys.forEach((t,n)=>{e.set(t.value,n*ns.LENGTH)}),e[this.public_keys.length*ns.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t[t.length-1],s=[];for(let r=0;r<t.length-1;r+=ns.LENGTH){const i=r;s.push(new ns(t.subarray(i,i+ns.LENGTH)))}return new Mo(s,n)}},io=class{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==io.BITMAP_LEN)throw new Error(`"bitmap" length should be ${io.BITMAP_LEN}`)}toBytes(){const e=new Uint8Array(this.signatures.length*Bs.LENGTH+io.BITMAP_LEN);return this.signatures.forEach((t,n)=>{e.set(t.value,n*Bs.LENGTH)}),e.set(this.bitmap,this.signatures.length*Bs.LENGTH),e}static createBitmap(e){const n=new Uint8Array([0,0,0,0]),s=new Set;return e.forEach(r=>{if(r>=ul)throw new Error(`Invalid bit value ${r}.`);if(s.has(r))throw new Error("Duplicated bits detected.");s.add(r);const i=Math.floor(r/8);let o=n[i];o|=128>>r%8,n[i]=o}),n}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t.subarray(t.length-4),s=[];for(let r=0;r<t.length-n.length;r+=Bs.LENGTH){const i=r;s.push(new Bs(t.subarray(i,i+Bs.LENGTH)))}return new io(s,n)}},Fc=io;Fc.BITMAP_LEN=4;var zo=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Cc.load(e);case 1:return Hc.load(e);case 2:return vd.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}},Cc=class extends zo{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=ns.deserialize(e),n=Bs.deserialize(e);return new Cc(t,n)}},Hc=class extends zo{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Mo.deserialize(e),n=Fc.deserialize(e);return new Hc(t,n)}},vd=class extends zo{constructor(e,t,n){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),Jn(this.secondary_signer_addresses,e),Jn(this.secondary_signers,e)}static load(e){const t=xo.deserialize(e),n=rs(e,Yt),s=rs(e,xo);return new vd(t,n,s)}},xo=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Sd.load(e);case 1:return Ad.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}},Sd=class extends xo{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=ns.deserialize(e),n=Bs.deserialize(e);return new Sd(t,n)}},Ad=class extends xo{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=Mo.deserialize(e),n=Fc.deserialize(e);return new Ad(t,n)}},qn=class{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){const t=e.deserializeStr();return new qn(t)}},Sn=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Gr.load(t);case 1:return Gs.load(t);case 2:return Kr.load(t);case 3:return Vr.load(t);case 4:return Xr.load(t);case 5:return Ed.load(t);case 6:return ji.load(t);case 7:return Jr.load(t);case 8:return Fi.load(t);case 9:return Ci.load(t);case 10:return Hi.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}},Gr=class extends Sn{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new Gr}},Gs=class extends Sn{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Gs}},Fi=class extends Sn{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Fi}},Ci=class extends Sn{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Ci}},Kr=class extends Sn{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new Kr}},Vr=class extends Sn{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new Vr}},Hi=class extends Sn{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new Hi}},Xr=class extends Sn{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new Xr}},Ed=class extends Sn{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new Ed}},ji=class extends Sn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){const t=Sn.deserialize(e);return new ji(t)}},Jr=class extends Sn{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){const t=vi.deserialize(e);return new Jr(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===Yt.fromHex("0x1").toHexString()}},vi=class{constructor(t,n,s,r){this.address=t,this.module_name=n,this.name=s,this.type_args=r}static fromString(t){if(t.includes("<"))throw new Error("Not implemented");const n=t.split("::");if(n.length!==3)throw new Error("Invalid struct tag string literal.");return new vi(Yt.fromHex(n[0]),new qn(n[1]),new qn(n[2]),[])}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),Jn(this.type_args,t)}static deserialize(t){const n=Yt.deserialize(t),s=qn.deserialize(t),r=qn.deserialize(t),i=rs(t,Sn);return new vi(n,s,r,i)}},Wi=class{constructor(e,t,n,s,r,i,o){this.sender=e,this.sequence_number=t,this.payload=n,this.max_gas_amount=s,this.gas_unit_price=r,this.expiration_timestamp_secs=i,this.chain_id=o}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){const t=Yt.deserialize(e),n=e.deserializeU64(),s=Ho.deserialize(e),r=e.deserializeU64(),i=e.deserializeU64(),o=e.deserializeU64(),a=Gc.deserialize(e);return new Wi(t,n,s,r,i,o,a)}},Fo=class{constructor(e,t,n){this.code=e,this.ty_args=t,this.args=n}serialize(e){e.serializeBytes(this.code),Jn(this.ty_args,e),Jn(this.args,e)}static deserialize(e){const t=e.deserializeBytes(),n=rs(e,Sn),s=rs(e,vs);return new Fo(t,n,s)}},Lr=class{constructor(e,t,n,s){this.module_name=e,this.function_name=t,this.ty_args=n,this.args=s}static natural(e,t,n,s){return new Lr(zr.fromStr(e),new qn(t),n,s)}static natual(e,t,n,s){return Lr.natural(e,t,n,s)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),Jn(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){const t=zr.deserialize(e),n=qn.deserialize(e),s=rs(e,Sn),r=e.deserializeUleb128AsU32(),i=[];for(let a=0;a<r;a+=1)i.push(e.deserializeBytes());const o=i;return new Lr(t,n,s,o)}},kd=class{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return new kd(Lr.deserialize(e))}},Bd=class{constructor(t,n){this.multisig_address=t,this.transaction_payload=n}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const n=Yt.deserialize(t),s=t.deserializeBool();let r;return s&&(r=kd.deserialize(t)),new Bd(n,r)}},km=class{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){const t=e.deserializeBytes();return new km(t)}},zr=class{constructor(e,t){this.address=e,this.name=t}static fromStr(e){const t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new zr(Yt.fromHex(new ot(t[0])),new qn(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){const t=Yt.deserialize(e),n=qn.deserialize(e);return new zr(t,n)}},Z6=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}},Q6=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}},Co=class{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){const t=Wi.deserialize(e),n=zo.deserialize(e);return new Co(t,n)}},Bm=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return jc.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},jc=class extends Bm{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),Jn(this.secondary_signer_addresses,e)}static load(e){const t=Wi.deserialize(e),n=rs(e,Yt);return new jc(t,n)}},Ho=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return jo.load(e);case 2:return Wc.load(e);case 3:return Pd.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},jo=class extends Ho{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){const t=Fo.deserialize(e);return new jo(t)}},Wc=class extends Ho{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){const t=Lr.deserialize(e);return new Wc(t)}},Pd=class extends Ho{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=Bd.deserialize(e);return new Pd(t)}},Gc=class{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){const t=e.deserializeU8();return new Gc(t)}},vs=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Kc.load(t);case 1:return Si.load(t);case 2:return Jc.load(t);case 3:return Ai.load(t);case 4:return Ei.load(t);case 5:return Zc.load(t);case 6:return Vc.load(t);case 7:return Xc.load(t);case 8:return Yc.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},Kc=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){const t=e.deserializeU8();return new Kc(t)}},Vc=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){const t=e.deserializeU16();return new Vc(t)}},Xc=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){const t=e.deserializeU32();return new Xc(t)}},Si=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){const t=e.deserializeU64();return new Si(t)}},Jc=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){const t=e.deserializeU128();return new Jc(t)}},Yc=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){const t=e.deserializeU256();return new Yc(t)}},Ai=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=Yt.deserialize(e);return new Ai(t)}},Ei=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){const t=e.deserializeBytes();return new Ei(t)}},Zc=class extends vs{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){const t=e.deserializeBool();return new Zc(t)}},Pm=class{getHashSalt(){const t=bi.create();return t.update("APTOS::Transaction"),t.digest()}static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Ud.load(t);default:throw new Error(`Unknown variant index for Transaction: ${n}`)}}},Ud=class extends Pm{constructor(e){super(),this.value=e}hash(){const e=bi.create();return e.update(this.getHashSalt()),e.update(Xs(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new Ud(Co.deserialize(e))}},Wo=class{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){const t=e.deserializeStr();return new Wo(t)}},Go=class{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){const t=e.deserializeStr(),n=Sn.deserialize(e);return new Go(t,n)}},Qc=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return eu.load(e);case 1:return ki.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},eu=class extends Qc{constructor(e,t,n,s,r){super(),this.name=e,this.doc=t,this.code=n,this.ty_args=s,this.args=r}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),Jn(this.ty_args,e),Jn(this.args,e)}static load(e){const t=e.deserializeStr(),n=e.deserializeStr(),s=e.deserializeBytes(),r=rs(e,Wo),i=rs(e,Go);return new eu(t,n,s,r,i)}},ki=class extends Qc{constructor(e,t,n,s,r){super(),this.name=e,this.module_name=t,this.doc=n,this.ty_args=s,this.args=r}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),Jn(this.ty_args,e),Jn(this.args,e)}static load(e){const t=e.deserializeStr(),n=zr.deserialize(e),s=e.deserializeStr(),r=rs(e,Wo),i=rs(e,Go);return new ki(t,n,s,r,i)}},si=class{constructor(e){if(e.length!==si.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){const t=e.toBytes(),n=new Uint8Array(t.length+1);n.set(t),n.set([si.MULTI_ED25519_SCHEME],t.length);const s=bi.create();return s.update(n),new si(s.digest())}static fromEd25519PublicKey(e){const t=e.value,n=new Uint8Array(t.length+1);n.set(t),n.set([si.ED25519_SCHEME],t.length);const s=bi.create();return s.update(n),new si(s.digest())}derivedAddress(){return ot.fromUint8Array(this.bytes)}},Fr=si;Fr.LENGTH=32;Fr.MULTI_ED25519_SCHEME=1;Fr.ED25519_SCHEME=0;Fr.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var eS=class{constructor(e,t,n,s,r,i,o){this.accountAddress=e,this.moduleName=t,this.structName=n,this.sequenceNumber=s,this.originator=r,this.currentAuthKey=i,this.newPublicKey=o}serialize(e){this.accountAddress.serialize(e),e.serializeStr(this.moduleName),e.serializeStr(this.structName),e.serializeU64(this.sequenceNumber),this.originator.serialize(e),this.currentAuthKey.serialize(e),e.serializeBytes(this.newPublicKey)}},ka=class{static fromAptosAccountObject(e){return new ka(ot.ensure(e.privateKeyHex).toUint8Array(),e.address)}static fromDerivePath(e,t){if(!ka.isValidPath(e))throw new Error("Invalid derivation path");const n=t.trim().split(/\s+/).map(r=>r.toLowerCase()).join(" "),{key:s}=O6(e,ld(jy(n)));return new ka(s)}constructor(e,t){e?this.signingKey=Us.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=Us.sign.keyPair(),this.accountAddress=ot.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){const e=new ns(this.signingKey.publicKey);return Fr.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){const n=Xs(Yt.fromHex(e)),s=new Uint8Array([...n,...t,Fr.DERIVE_RESOURCE_ACCOUNT_SCHEME]),r=bi.create();return r.update(s),ot.fromUint8Array(r.digest())}pubKey(){return ot.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){const t=Us.sign(e,this.signingKey.secretKey);return ot.fromUint8Array(t.slice(0,64))}signHexString(e){const t=ot.ensure(e).toUint8Array();return this.signBuffer(t)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:ot.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},vo=ka;vo.isValidPath=e=>!!/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e);$t([zc()],vo.prototype,"authKey",1);function Bi(e){return e instanceof vo?e.address():ot.ensure(e)}var tS=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,nS=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,sS=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${tS}
${nS}`,rS=`
    query getTokenActivities($idHash: String!) {
  token_activities(where: {token_data_id_hash: {_eq: $idHash}}) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,Um=class{constructor(e){this.endpoint=e}async queryIndexer(e){const{data:t}=await xi.post(this.endpoint,e);if(t.errors)throw new Error(`Indexer data error ${t.errors}`);return t.data}async getAccountNFTs(e,t){const n={query:sS,variables:{address:e,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(n)}async getTokenActivities(e){const t={query:rS,variables:{idHash:e}};return this.queryIndexer(t)}},iS={};Mc(iS,{$AccountData:()=>TS,$AccountSignature:()=>xS,$AccountSignature_Ed25519Signature:()=>vS,$AccountSignature_MultiEd25519Signature:()=>SS,$Address:()=>AS,$AptosError:()=>ES,$AptosErrorCode:()=>kS,$Block:()=>BS,$BlockMetadataTransaction:()=>PS,$DecodedTableData:()=>US,$DeleteModule:()=>OS,$DeleteResource:()=>IS,$DeleteTableItem:()=>$S,$DeletedTableData:()=>RS,$DirectWriteSet:()=>LS,$Ed25519Signature:()=>qS,$EncodeSubmissionRequest:()=>NS,$EntryFunctionId:()=>DS,$EntryFunctionPayload:()=>MS,$Event:()=>zS,$EventGuid:()=>FS,$GasEstimation:()=>CS,$GenesisPayload:()=>HS,$GenesisPayload_WriteSetPayload:()=>jS,$GenesisTransaction:()=>WS,$HashValue:()=>GS,$HealthCheckSuccess:()=>KS,$HexEncodedBytes:()=>VS,$IdentifierWrapper:()=>XS,$IndexResponse:()=>JS,$ModuleBundlePayload:()=>YS,$MoveAbility:()=>ZS,$MoveFunction:()=>QS,$MoveFunctionGenericTypeParam:()=>eA,$MoveFunctionVisibility:()=>tA,$MoveModule:()=>nA,$MoveModuleBytecode:()=>sA,$MoveModuleId:()=>rA,$MoveResource:()=>iA,$MoveScriptBytecode:()=>oA,$MoveStruct:()=>aA,$MoveStructField:()=>cA,$MoveStructGenericTypeParam:()=>uA,$MoveStructTag:()=>lA,$MoveStructValue:()=>dA,$MoveType:()=>fA,$MoveValue:()=>hA,$MultiAgentSignature:()=>pA,$MultiEd25519Signature:()=>gA,$MultisigPayload:()=>yA,$MultisigTransactionPayload:()=>mA,$PendingTransaction:()=>wA,$RawTableItemRequest:()=>bA,$RoleType:()=>_A,$ScriptPayload:()=>TA,$ScriptWriteSet:()=>xA,$StateCheckpointTransaction:()=>vA,$StateKeyWrapper:()=>SA,$SubmitTransactionRequest:()=>AA,$TableItemRequest:()=>EA,$Transaction:()=>kA,$TransactionPayload:()=>IA,$TransactionPayload_EntryFunctionPayload:()=>$A,$TransactionPayload_ModuleBundlePayload:()=>LA,$TransactionPayload_MultisigPayload:()=>qA,$TransactionPayload_ScriptPayload:()=>NA,$TransactionSignature:()=>zA,$TransactionSignature_Ed25519Signature:()=>FA,$TransactionSignature_MultiAgentSignature:()=>CA,$TransactionSignature_MultiEd25519Signature:()=>HA,$Transaction_BlockMetadataTransaction:()=>BA,$Transaction_GenesisTransaction:()=>PA,$Transaction_PendingTransaction:()=>UA,$Transaction_StateCheckpointTransaction:()=>RA,$Transaction_UserTransaction:()=>OA,$TransactionsBatchSingleSubmissionFailure:()=>DA,$TransactionsBatchSubmissionResult:()=>MA,$U128:()=>jA,$U256:()=>WA,$U64:()=>GA,$UserTransaction:()=>KA,$VersionedEvent:()=>VA,$ViewRequest:()=>XA,$WriteModule:()=>JA,$WriteResource:()=>YA,$WriteSet:()=>ZA,$WriteSetChange:()=>t2,$WriteSetChange_DeleteModule:()=>n2,$WriteSetChange_DeleteResource:()=>s2,$WriteSetChange_DeleteTableItem:()=>r2,$WriteSetChange_WriteModule:()=>i2,$WriteSetChange_WriteResource:()=>o2,$WriteSetChange_WriteTableItem:()=>a2,$WriteSetPayload:()=>c2,$WriteSet_DirectWriteSet:()=>QA,$WriteSet_ScriptWriteSet:()=>e2,$WriteTableItem:()=>u2,AccountsService:()=>Nm,ApiError:()=>So,AptosErrorCode:()=>Wm,AptosGeneratedClient:()=>jm,BaseHttpRequest:()=>Rm,BlocksService:()=>Dm,CancelError:()=>Om,CancelablePromise:()=>Im,EventsService:()=>Mm,GeneralService:()=>zm,MoveFunctionVisibility:()=>Gm,OpenAPI:()=>_S,RoleType:()=>Km,TablesService:()=>Fm,TransactionsService:()=>Cm,ViewService:()=>Hm});var Rm=class{constructor(e){this.config=e}},So=class extends Error{constructor(e,t,n){super(n),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}},Om=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}},Im=class{constructor(e){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((t,n)=>{this._resolve=t,this._reject=n;const s=o=>{var a;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(a=this._resolve)==null||a.call(this,o))},r=o=>{var a;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(a=this._reject)==null||a.call(this,o))},i=o=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(o)};return Object.defineProperty(i,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(i,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(i,"isCancelled",{get:()=>this._isCancelled}),e(s,r,i)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(){var e;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const t of this._cancelHandlers)t()}catch(t){console.warn("Cancellation threw an error",t);return}this._cancelHandlers.length=0,(e=this._reject)==null||e.call(this,new Om("Request aborted"))}}get isCancelled(){return this._isCancelled}},$m=class{constructor(e=new Map){this.jar=e}setCookie(e,t){var n;const s=e.origin.toLowerCase();this.jar.has(s)||this.jar.set(s,[]);const r=$m.parse(t);this.jar.set(s,[...((n=this.jar.get(s))==null?void 0:n.filter(i=>i.name!==r.name))||[],r])}getCookies(e){var t;const n=e.origin.toLowerCase();return this.jar.get(n)?((t=this.jar.get(n))==null?void 0:t.filter(s=>!s.expires||s.expires>new Date))||[]:[]}static parse(e){if(typeof e!="string")throw new Error("argument str must be a string");const t=e.split(";").map(s=>s.trim());let n;if(t.length>0){const[s,r]=t[0].split("=");if(!s||!r)throw new Error("Invalid cookie");n={name:s,value:r}}else throw new Error("Invalid cookie");return t.slice(1).forEach(s=>{const[r,i]=s.split("=");if(!r.trim())throw new Error("Invalid cookie");const o=r.toLowerCase(),a=(i==null?void 0:i.charAt(0))==="'"||(i==null?void 0:i.charAt(0))==='"'?i==null?void 0:i.slice(1,-1):i;if(o==="expires"&&(n.expires=new Date(a)),o==="path"&&(n.path=a),o==="samesite"){if(a!=="Lax"&&a!=="None"&&a!=="Strict")throw new Error("Invalid cookie SameSite value");n.sameSite=a}o==="secure"&&(n.secure=!0)}),n}},Lm=new $m;xi.interceptors.response.use(e=>(Array.isArray(e.headers["set-cookie"])&&e.headers["set-cookie"].forEach(t=>{Lm.setCookie(new URL(e.config.url),t)}),e));xi.interceptors.request.use(function(e){const t=Lm.getCookies(new URL(e.url));return(t==null?void 0:t.length)>0&&e.headers&&(e.headers.cookie=t.map(n=>`${n.name}=${n.value}`).join("; ")),e});var Rd=e=>e!=null,tu=e=>typeof e=="string",Uu=e=>tu(e)&&e!=="",qm=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),oS=e=>e instanceof Tm,aS=e=>e>=200&&e<300,cS=e=>btoa(e),uS=e=>{const t=[],n=(r,i)=>{t.push(`${encodeURIComponent(r)}=${encodeURIComponent(String(i))}`)},s=(r,i)=>{Rd(i)&&(Array.isArray(i)?i.forEach(o=>{s(r,o)}):typeof i=="object"?Object.entries(i).forEach(([o,a])=>{s(`${r}[${o}]`,a)}):n(r,i))};return Object.entries(e).forEach(([r,i])=>{s(r,i)}),t.length>0?`?${t.join("&")}`:""},lS=(e,t)=>{const n=e.ENCODE_PATH||encodeURI,s=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(i,o)=>{var a;return(a=t.path)!=null&&a.hasOwnProperty(o)?n(String(t.path[o])):i}),r=`${e.BASE}${s}`;return t.query?`${r}${uS(t.query)}`:r},dS=e=>{if(e.formData){const t=new Tm,n=(s,r)=>{tu(r)||qm(r)?t.append(s,r):t.append(s,JSON.stringify(r))};return Object.entries(e.formData).filter(([s,r])=>Rd(r)).forEach(([s,r])=>{Array.isArray(r)?r.forEach(i=>n(s,i)):n(s,r)}),t}},ta=async(e,t)=>typeof t=="function"?t(e):t,fS=async(e,t,n)=>{const s=await ta(t,e.TOKEN),r=await ta(t,e.USERNAME),i=await ta(t,e.PASSWORD),o=await ta(t,e.HEADERS),a=typeof(n==null?void 0:n.getHeaders)=="function"&&(n==null?void 0:n.getHeaders())||{},c=Object.entries({Accept:"application/json",...o,...t.headers,...a}).filter(([u,l])=>Rd(l)).reduce((u,[l,f])=>({...u,[l]:String(f)}),{});if(Uu(s)&&(c.Authorization=`Bearer ${s}`),Uu(r)&&Uu(i)){const u=cS(`${r}:${i}`);c.Authorization=`Basic ${u}`}return t.body&&(t.mediaType?c["Content-Type"]=t.mediaType:qm(t.body)?c["Content-Type"]=t.body.type||"application/octet-stream":tu(t.body)?c["Content-Type"]="text/plain":oS(t.body)||(c["Content-Type"]="application/json")),c},hS=e=>{if(e.body)return e.body},pS=async(e,t,n,s,r,i,o)=>{const a=xi.CancelToken.source(),c={url:n,headers:i,data:s??r,method:t.method,withCredentials:e.WITH_CREDENTIALS,cancelToken:a.token};Object.keys(e.HEADERS||{}).filter(l=>l.toLowerCase()==="accept").map(l=>e.HEADERS[l]).includes("application/x-bcs")&&(c.responseType="arraybuffer"),o(()=>a.cancel("The user aborted a request."));try{return await xi.request(c)}catch(l){const f=l;if(f.response)return f.response;throw l}},gS=(e,t)=>{if(t){const n=e.headers[t];if(tu(n))return n}},yS=e=>{if(e.status!==204)return e.data},mS=(e,t)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[t.status];if(s)throw new So(e,t,s);if(!t.ok)throw new So(e,t,"Generic Error")},wS=(e,t)=>new Im(async(n,s,r)=>{try{const i=lS(e,t),o=dS(t),a=hS(t),c=await fS(e,t,o);if(!r.isCancelled){const u=await pS(e,t,i,a,o,c,r),l=yS(u),f=gS(u,t.responseHeader),h={url:i,ok:aS(u.status),status:u.status,statusText:u.statusText,body:f??l};mS(t,h);const g=h.body;try{g.__headers=u.headers}catch{}n(g)}}catch(i){s(i)}}),bS=class extends Rm{constructor(e){super(e)}request(e){return wS(this.config,e)}},Nm=class{constructor(e){this.httpRequest=e}getAccount(e,t){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:e},query:{ledger_version:t}})}getAccountResources(e,t,n,s){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:e},query:{ledger_version:t,start:n,limit:s}})}getAccountModules(e,t,n,s){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:e},query:{ledger_version:t,start:n,limit:s}})}getAccountResource(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:e,resource_type:t},query:{ledger_version:n}})}getAccountModule(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:e,module_name:t},query:{ledger_version:n}})}},Dm=class{constructor(e){this.httpRequest=e}getBlockByHeight(e,t){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:e},query:{with_transactions:t}})}getBlockByVersion(e,t){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:e},query:{with_transactions:t}})}},Mm=class{constructor(e){this.httpRequest=e}getEventsByCreationNumber(e,t,n,s){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:e,creation_number:t},query:{start:n,limit:s}})}getEventsByEventHandle(e,t,n,s,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:e,event_handle:t,field_name:n},query:{start:s,limit:r}})}},zm=class{constructor(e){this.httpRequest=e}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(e){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:e}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},Fm=class{constructor(e){this.httpRequest=e}getTableItem(e,t,n){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:e},query:{ledger_version:n},body:t,mediaType:"application/json"})}getRawTableItem(e,t,n){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:e},query:{ledger_version:n},body:t,mediaType:"application/json"})}},Cm=class{constructor(e){this.httpRequest=e}getTransactions(e,t){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:e,limit:t}})}submitTransaction(e){return this.httpRequest.request({method:"POST",url:"/transactions",body:e,mediaType:"application/json"})}getTransactionByHash(e){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:e}})}getTransactionByVersion(e){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:e}})}getAccountTransactions(e,t,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:e},query:{start:t,limit:n}})}submitBatchTransactions(e){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:e,mediaType:"application/json"})}simulateTransaction(e,t,n,s){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:t,estimate_gas_unit_price:n,estimate_prioritized_gas_unit_price:s},body:e,mediaType:"application/json"})}encodeSubmission(e){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:e,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},Hm=class{constructor(e){this.httpRequest=e}view(e,t){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:t},body:e,mediaType:"application/json"})}},jm=class{constructor(e,t=bS){var n,s,r,i;this.request=new t({BASE:(n=e==null?void 0:e.BASE)!=null?n:"/v1",VERSION:(s=e==null?void 0:e.VERSION)!=null?s:"1.2.0",WITH_CREDENTIALS:(r=e==null?void 0:e.WITH_CREDENTIALS)!=null?r:!1,CREDENTIALS:(i=e==null?void 0:e.CREDENTIALS)!=null?i:"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.accounts=new Nm(this.request),this.blocks=new Dm(this.request),this.events=new Mm(this.request),this.general=new zm(this.request),this.tables=new Fm(this.request),this.transactions=new Cm(this.request),this.view=new Hm(this.request)}},_S={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},Wm=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(Wm||{}),Gm=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(Gm||{}),Km=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(Km||{}),TS={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},xS={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},vS={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},SS={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},AS={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},ES={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},kS={type:"Enum"},BS={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},PS={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},US={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},RS={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},OS={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},IS={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},$S={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},LS={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},qS={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},NS={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},DS={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},MS={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},zS={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},FS={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},CS={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},HS={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},jS={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},WS={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},GS={type:"string"},KS={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},VS={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},XS={type:"string"},JS={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},YS={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},ZS={type:"string"},QS={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},eA={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},tA={type:"Enum"},nA={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},sA={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},rA={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},iA={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},oA={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},aA={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},cA={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},uA={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},lA={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},dA={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},fA={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},hA={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},pA={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},gA={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},yA={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},mA={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},wA={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},bA={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},_A={type:"Enum"},TA={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},xA={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},vA={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},SA={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},AA={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},EA={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},kA={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},BA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},PA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},UA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},RA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},OA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},IA={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},$A={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},LA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},qA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},NA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},DA={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},MA={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},zA={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},FA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},CA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},HA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},jA={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},WA={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},GA={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},KA={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},VA={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},XA={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},JA={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},YA={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},ZA={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},QA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},e2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},t2={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},n2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},s2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},r2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},i2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},o2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},a2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},c2={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},u2={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}},l2=new vi(Yt.fromHex("0x1"),new qn("string"),new qn("String"),[]);function nu(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function Ar(e){throw new Error(e)}function gh(e){return!!e.match(/\s/)}function yh(e){return!!e.match(/[_A-Za-z0-9]/g)}function d2(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];Ar("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(gh(n)){let s="";for(let r=t;r<e.length;r+=1){const i=e[r];if(gh(i))s=`${s}${i}`;else break}return[["SPACE",s],s.length]}else if(yh(n)){let s="";for(let r=t;r<e.length;r+=1){const i=e[r];if(yh(i))s=`${s}${i}`;else break}return[["IDENT",s],s.length]}}throw new Error("Unrecognized token.")}function f2(e){let t=0;const n=[];for(;t<e.length;){const[s,r]=d2(e,t);s[0]!=="SPACE"&&n.push(s),t+=r}return n}var su=class{constructor(e){this.tokens=f2(e)}consume(e){const t=this.tokens.shift();(!t||t[1]!==e)&&Ar("Invalid type tag.")}parseCommaList(e,t){const n=[];for(this.tokens.length<=0&&Ar("Invalid type tag.");this.tokens[0][1]!==e&&(n.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&Ar("Invalid type tag.");return n}parseTypeTag(){this.tokens.length===0&&Ar("Invalid type tag.");const[e,t]=this.tokens.shift();if(t==="u8")return new Gs;if(t==="u16")return new Fi;if(t==="u32")return new Ci;if(t==="u64")return new Kr;if(t==="u128")return new Vr;if(t==="u256")return new Hi;if(t==="bool")return new Gr;if(t==="address")return new Xr;if(t==="vector"){this.consume("<");const n=this.parseTypeTag();return this.consume(">"),new ji(n)}if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){const n=t;this.consume("::");const[s,r]=this.tokens.shift();s!=="IDENT"&&Ar("Invalid type tag."),this.consume("::");const[i,o]=this.tokens.shift();i!=="IDENT"&&Ar("Invalid type tag.");let a=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),a=this.parseCommaList(">",!0),this.consume(">"));const c=new vi(Yt.fromHex(n),new qn(r),new qn(o),a);return new Jr(c)}throw new Error("Invalid type tag.")}};function Vm(e){if(nu(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function di(e){if(nu(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function fi(e){return nu(e,["number","bigint","string"]),BigInt(e)}function Od(e,t,n){if(t instanceof Gr){n.serializeBool(Vm(e));return}if(t instanceof Gs){n.serializeU8(di(e));return}if(t instanceof Fi){n.serializeU16(di(e));return}if(t instanceof Ci){n.serializeU32(di(e));return}if(t instanceof Kr){n.serializeU64(fi(e));return}if(t instanceof Vr){n.serializeU128(fi(e));return}if(t instanceof Hi){n.serializeU256(fi(e));return}if(t instanceof Xr){let s;if(typeof e=="string"||e instanceof ot)s=Yt.fromHex(e);else if(e instanceof Yt)s=e;else throw new Error("Invalid account address.");s.serialize(n);return}if(t instanceof ji){if(t.value instanceof Gs){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(s=>Od(s,t.value,n));return}if(t instanceof Jr){const{address:s,module_name:r,name:i}=t.value;if(`${ot.fromUint8Array(s.address).toShortString()}::${r.value}::${i.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");nu(e,["string"]),n.serializeStr(e);return}throw new Error("Unsupported arg type.")}function h2(e,t){if(t instanceof Gr)return new Zc(Vm(e));if(t instanceof Gs)return new Kc(di(e));if(t instanceof Fi)return new Vc(di(e));if(t instanceof Ci)return new Xc(di(e));if(t instanceof Kr)return new Si(fi(e));if(t instanceof Vr)return new Jc(fi(e));if(t instanceof Hi)return new Yc(fi(e));if(t instanceof Xr){let n;if(typeof e=="string"||e instanceof ot)n=Yt.fromHex(e);else if(e instanceof Yt)n=e;else throw new Error("Invalid account address.");return new Ai(n)}if(t instanceof ji&&t.value instanceof Gs){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new Ei(e)}throw new Error("Unknown type for TransactionArgument.")}var p2="APTOS::RawTransaction",g2="APTOS::RawTransactionWithData",Pi=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,n){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,n)}static getSigningMessage(e){const t=bi.create();if(e instanceof Wi)t.update(p2);else if(e instanceof jc)t.update(g2);else throw new Error("Unknown transaction type.");const n=t.digest(),s=Xs(e),r=new Uint8Array(n.length+s.length);return r.set(n),r.set(s,n.length),r}},Ba=class extends Pi{constructor(e,t,n){super(e,n),this.publicKey=t}rawToSigned(e){const t=Pi.getSigningMessage(e),n=this.signingFunction(t),s=new Cc(new ns(this.publicKey),n);return new Co(e,s)}sign(e){return Xs(this.rawToSigned(e))}},y2=class extends Pi{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){const t=Pi.getSigningMessage(e),n=this.signingFunction(t),s=new Hc(this.publicKey,n);return new Co(e,s)}sign(e){return Xs(this.rawToSigned(e))}},Va=class{constructor(e,t){this.abiMap=new Map,e.forEach(n=>{const s=new xd(n),r=Qc.deserialize(s);let i;if(r instanceof ki){const o=r,{address:a,name:c}=o.module_name;i=`${ot.fromUint8Array(a.address).toShortString()}::${c.value}::${o.name}`}else i=r.name;if(this.abiMap.has(i))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(i,r)}),this.builderConfig={maxGasAmount:BigInt(Sm),expSecFromNow:Am,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,s)=>{const r=new rn;return Od(n,e[s].type_tag,r),r.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,s)=>h2(n,e[s].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,n){const s=t.map(o=>new su(o).parseTypeTag());let r;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);const i=this.abiMap.get(e);if(i instanceof ki){const o=i,a=Va.toBCSArgs(o.args,n);r=new Wc(new Lr(o.module_name,new qn(o.name),s,a))}else if(i instanceof eu){const o=i,a=Va.toTransactionArguments(o.args,n);r=new jo(new Fo(o.code,s,a))}else throw new Error("Unknown ABI format.");return r}build(e,t,n){const{sender:s,sequenceNumber:r,gasUnitPrice:i,maxGasAmount:o,expSecFromNow:a,chainId:c}=this.builderConfig;if(!i)throw new Error("No gasUnitPrice provided.");const u=s instanceof Yt?s:Yt.fromHex(s),l=BigInt(Math.floor(Date.now()/1e3)+Number(a)),f=this.buildTransactionPayload(e,t,n);if(f)return new Wi(u,BigInt(r),f,BigInt(o),BigInt(i),l,new Gc(Number(c)));throw new Error("Invalid ABI.")}},Xm=class{constructor(e,t){this.aptosClient=e,this.builderConfig=t}async fetchABI(e){const n=(await this.aptosClient.getAccountModules(e)).map(r=>r.abi).flatMap(r=>r.exposed_functions.filter(i=>i.is_entry).map(i=>({fullName:`${r.address}::${r.name}::${i.name}`,...i}))),s=new Map;return n.forEach(r=>{s.set(r.fullName,r)}),s}async build(e,t,n){if(e=(x=>x.replace(/^0[xX]0*/g,"0x"))(e),e.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[i,o]=e.split("::"),a=await this.fetchABI(i);if(!a.has(e))throw new Error(`${e} doesn't exist.`);const c=a.get(e),l=c.params.filter(x=>x!=="signer"&&x!=="&signer").map((x,E)=>new Go(`var${E}`,new su(x).parseTypeTag())),f=new ki(c.name,zr.fromStr(`${i}::${o}`),"",c.generic_type_params.map((x,E)=>new Wo(`${E}`)),l),{sender:h,...g}=this.builderConfig,w=h instanceof Yt?ot.fromUint8Array(h.address):h,[{sequence_number:b},T,{gas_estimate:R}]=await Promise.all([g!=null&&g.sequenceNumber?Promise.resolve({sequence_number:g==null?void 0:g.sequenceNumber}):this.aptosClient.getAccount(w),g!=null&&g.chainId?Promise.resolve(g==null?void 0:g.chainId):this.aptosClient.getChainId(),g!=null&&g.gasUnitPrice?Promise.resolve({gas_estimate:g==null?void 0:g.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new Va([Xs(f)],{sender:h,sequenceNumber:b,chainId:T,gasUnitPrice:BigInt(R),...g}).build(e,t,n)}};$t([N6(10*60*1e3)],Xm.prototype,"fetchABI",1);var oo=class{constructor(e,t,n=!1){if(!e)throw new Error("Node URL cannot be empty.");const s=t==null?{}:{...t};n?this.nodeUrl=e:this.nodeUrl=$6(e),s.BASE=this.nodeUrl,(t==null?void 0:t.WITH_CREDENTIALS)===!1?s.WITH_CREDENTIALS=!1:s.WITH_CREDENTIALS=!0,this.client=new jm(s)}async getAccount(e){return this.client.accounts.getAccount(ot.ensure(e).hex())}async getAccountTransactions(e,t){var n;return this.client.transactions.getAccountTransactions(ot.ensure(e).hex(),(n=t==null?void 0:t.start)==null?void 0:n.toString(),t==null?void 0:t.limit)}async getAccountModules(e,t){const n=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await ph(n,e,1e3,t)}async getAccountModule(e,t,n){var s;return this.client.accounts.getAccountModule(ot.ensure(e).hex(),t,(s=n==null?void 0:n.ledgerVersion)==null?void 0:s.toString())}async getAccountResources(e,t){const n=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await ph(n,e,9999,t)}async getAccountResource(e,t,n){var s;return this.client.accounts.getAccountResource(ot.ensure(e).hex(),t,(s=n==null?void 0:n.ledgerVersion)==null?void 0:s.toString())}static generateBCSTransaction(e,t){return new Ba(s=>{const r=e.signBuffer(s);return new k.Ed25519Signature(r.toUint8Array())},e.pubKey().toUint8Array()).sign(t)}static generateBCSSimulation(e,t){return new Ba(s=>{const r=new Uint8Array(64);return new k.Ed25519Signature(r)},e.pubKey().toUint8Array()).sign(t)}async generateTransaction(e,t,n){const s={sender:e};if(n!=null&&n.sequence_number&&(s.sequenceNumber=n.sequence_number),n!=null&&n.gas_unit_price&&(s.gasUnitPrice=n.gas_unit_price),n!=null&&n.max_gas_amount&&(s.maxGasAmount=n.max_gas_amount),n!=null&&n.expiration_timestamp_secs){const i=Number.parseInt(n.expiration_timestamp_secs,10);s.expSecFromNow=i-Math.floor(Date.now()/1e3)}return new Xm(this,s).build(t.function,t.type_arguments,t.arguments)}async signTransaction(e,t){return Promise.resolve(oo.generateBCSTransaction(e,t))}async getEventsByCreationNumber(e,t,n){var s;return this.client.events.getEventsByCreationNumber(ot.ensure(e).hex(),t.toString(),(s=n==null?void 0:n.start)==null?void 0:s.toString(),n==null?void 0:n.limit)}async getEventsByEventHandle(e,t,n,s){var r;return this.client.events.getEventsByEventHandle(ot.ensure(e).hex(),t,n,(r=s==null?void 0:s.start)==null?void 0:r.toString(),s==null?void 0:s.limit)}async submitTransaction(e){return this.submitSignedBCSTransaction(e)}async simulateTransaction(e,t,n){let s;return e instanceof vo?s=oo.generateBCSSimulation(e,t):e instanceof Mo?s=new y2(()=>{const{threshold:i}=e,o=[],a=[];for(let u=0;u<i;u+=1)o.push(u),a.push(new k.Ed25519Signature(new Uint8Array(64)));const c=k.MultiEd25519Signature.createBitmap(o);return new k.MultiEd25519Signature(a,c)},e).sign(t):s=new Ba(()=>{const i=new Uint8Array(64);return new k.Ed25519Signature(i)},e.toBytes()).sign(t),this.submitBCSSimulation(s,n)}async submitSignedBCSTransaction(e){return this.client.request.request({url:"/transactions",method:"POST",body:e,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(e,t){var n,s,r;const i={estimate_gas_unit_price:(n=t==null?void 0:t.estimateGasUnitPrice)!=null?n:!1,estimate_max_gas_amount:(s=t==null?void 0:t.estimateMaxGasAmount)!=null?s:!1,estimate_prioritized_gas_unit_price:(r=t==null?void 0:t.estimatePrioritizedGasUnitPrice)!=null?r:!1};return this.client.request.request({url:"/transactions/simulate",query:i,method:"POST",body:e,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(e){var t;return this.client.transactions.getTransactions((t=e==null?void 0:e.start)==null?void 0:t.toString(),e==null?void 0:e.limit)}async getTransactionByHash(e){return this.client.transactions.getTransactionByHash(e)}async getTransactionByVersion(e){return this.client.transactions.getTransactionByVersion(e.toString())}async transactionPending(e){try{return(await this.client.transactions.getTransactionByHash(e)).type==="pending_transaction"}catch(t){if((t==null?void 0:t.status)===404)return!0;throw t}}async waitForTransactionWithResult(e,t){var n,s;const r=(n=t==null?void 0:t.timeoutSecs)!=null?n:L6,i=(s=t==null?void 0:t.checkSuccess)!=null?s:!1;let o=!0,a=0,c;for(;o&&!(a>=r);){try{if(c=await this.client.transactions.getTransactionByHash(e),o=c.type==="pending_transaction",!o)break}catch(u){const l=u instanceof So,f=l&&u.status!==404&&u.status>=400&&u.status<500;if(!l||f)throw u}await I6(1e3),a+=1}if(c===void 0)throw new Error(`Waiting for transaction ${e} failed`);if(o)throw new w2(`Waiting for transaction ${e} timed out after ${r} seconds`,c);if(!i)return c;if(!(c!=null&&c.success))throw new b2(`Transaction ${e} committed to the blockchain but execution failed`,c);return c}async waitForTransaction(e,t){await this.waitForTransactionWithResult(e,t)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(e,t,n){var s;return await this.client.tables.getTableItem(e,t,(s=n==null?void 0:n.ledgerVersion)==null?void 0:s.toString())}async generateRawTransaction(e,t,n){const[{sequence_number:s},r,{gas_estimate:i}]=await Promise.all([this.getAccount(e),this.getChainId(),n!=null&&n.gasUnitPrice?Promise.resolve({gas_estimate:n.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:o,gasUnitPrice:a,expireTimestamp:c}={maxGasAmount:BigInt(Sm),gasUnitPrice:BigInt(i),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+Am),...n};return new k.RawTransaction(k.AccountAddress.fromHex(e),BigInt(s),t,o,a,c,new k.ChainId(r))}async generateSignSubmitTransaction(e,t,n){const s=await this.generateRawTransaction(e.address(),t,n),r=oo.generateBCSTransaction(e,s);return(await this.submitSignedBCSTransaction(r)).hash}async publishPackage(e,t,n,s){const r=new rn;Jn(n,r);const i=new k.TransactionPayloadEntryFunction(k.EntryFunction.natural("0x1::code","publish_package_txn",[],[ni(t),r.getBytes()]));return this.generateSignSubmitTransaction(e,i,s)}async generateSignSubmitWaitForTransaction(e,t,n){const s=await this.generateSignSubmitTransaction(e,t,n);return this.waitForTransactionWithResult(s,n)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(e){const t=`0x1::coin::CoinStore<${q6}>`,[{gas_estimate:n},s]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(e)]),r=s.find(o=>o.type===t);return BigInt(r.data.coin.value)/BigInt(n)}async rotateAuthKeyEd25519(e,t,n){const{sequence_number:s,authentication_key:r}=await this.getAccount(e.address()),i=new vo(t),o=new k.RotationProofChallenge(k.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(s),k.AccountAddress.fromHex(e.address()),new k.AccountAddress(new ot(r).toUint8Array()),i.pubKey().toUint8Array()),a=ot.fromUint8Array(Xs(o)),c=e.signHexString(a),u=i.signHexString(a),l=new k.TransactionPayloadEntryFunction(k.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[cl(0),ni(e.pubKey().toUint8Array()),cl(0),ni(i.pubKey().toUint8Array()),ni(c.toUint8Array()),ni(u.toUint8Array())])),f=await this.generateRawTransaction(e.address(),l,n),h=oo.generateBCSTransaction(e,f);return this.submitSignedBCSTransaction(h)}async lookupOriginalAddress(e){const t=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:n}}=t.data,s=await this.getTableItem(n,{key_type:"address",value_type:"address",key:ot.ensure(e).hex()});return new ot(s)}async getBlockByHeight(e,t){return this.client.blocks.getBlockByHeight(e,t)}async getBlockByVersion(e,t){return this.client.blocks.getBlockByVersion(e,t)}async view(e,t){return this.client.view.view(e,t)}clearCache(e){D6(e)}},Ot=oo;$t([fn],Ot.prototype,"getAccount",1);$t([fn],Ot.prototype,"getAccountTransactions",1);$t([fn],Ot.prototype,"getAccountModules",1);$t([fn],Ot.prototype,"getAccountModule",1);$t([fn],Ot.prototype,"getAccountResources",1);$t([fn],Ot.prototype,"getAccountResource",1);$t([fn],Ot.prototype,"getEventsByCreationNumber",1);$t([fn],Ot.prototype,"getEventsByEventHandle",1);$t([fn],Ot.prototype,"submitSignedBCSTransaction",1);$t([fn],Ot.prototype,"submitBCSSimulation",1);$t([fn],Ot.prototype,"getTransactions",1);$t([fn],Ot.prototype,"getTransactionByHash",1);$t([fn],Ot.prototype,"getTransactionByVersion",1);$t([fn],Ot.prototype,"getLedgerInfo",1);$t([zc()],Ot.prototype,"getChainId",1);$t([fn],Ot.prototype,"getTableItem",1);$t([fn,zc({ttlMs:5*60*1e3,tags:["gas_estimates"]})],Ot.prototype,"estimateGasPrice",1);$t([fn],Ot.prototype,"estimateMaxGasAmount",1);$t([fn],Ot.prototype,"getBlockByHeight",1);$t([fn],Ot.prototype,"getBlockByVersion",1);$t([fn],Ot.prototype,"view",1);var m2=class extends Error{constructor(e,t,n,s){super(t),this.status=e,this.message=t,this.errorCode=n,this.vmErrorCode=s}},w2=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},b2=class extends Error{constructor(e,t){super(e),this.transaction=t}};function fn(e,t,n){const s=n.value;return n.value=async function(...i){var o,a;try{return await s.apply(this,[...i])}catch(c){throw c instanceof So?new m2(c.status,JSON.stringify({message:c.message,...c.body}),(o=c.body)==null?void 0:o.error_code,(a=c.body)==null?void 0:a.vm_error_code):c}},n}var Jm=class{constructor(e,t,n=!1){let s=null,r=null;if(typeof e=="object"&&_2(e)?(s=e.fullnodeUrl,r=e.indexerUrl):(s=z6[e],r=M6[e]),!s||!r)throw new Error("network is not provided");this.aptosClient=new Ot(s,t,n),this.indexerClient=new Um(r)}};function Ym(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(s=>{const r=Object.getOwnPropertyDescriptor(t.prototype,s);r&&(r.value=function(...i){return this[n][s](...i)},Object.defineProperty(e.prototype,s,r))})}Ym(Jm,Ot,"aptosClient");Ym(Jm,Um,"indexerClient");function _2(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"&&e.indexerUrl!==void 0&&typeof e.indexerUrl=="string"}var T2="a11ceb0b0500000006010004020408030c0a05161d073339086c400000010100020700010307000104030100010504020007060c0508000800030503010801000405080008000304060c0801050306737472696e6705746f6b656e06537472696e6707546f6b656e4964136372656174655f746f6b656e5f69645f726177087472616e73666572000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030000010c0b010b020b030b0411000c070b000b070b050b06110102",x2=["01186372656174655F636F6C6C656374696F6E5F736372697074000000000000000000000000000000000000000000000000000000000000000305746F6B656E3020637265617465206120656D70747920746F6B656E20636F6C6C656374696F6E207769746820706172616D65746572730005046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000B6465736372697074696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000375726907000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700076D6178696D756D020E6D75746174655F73657474696E670600","01136372656174655F746F6B656E5F736372697074000000000000000000000000000000000000000000000000000000000000000305746F6B656E1D2063726561746520746F6B656E20776974682072617720696E70757473000D0A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000B6465736372697074696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000762616C616E636502076D6178696D756D020375726907000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E670015726F79616C74795F70617965655F61646472657373041A726F79616C74795F706F696E74735F64656E6F6D696E61746F720218726F79616C74795F706F696E74735F6E756D657261746F72020E6D75746174655F73657474696E6706000D70726F70657274795F6B6579730607000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67000F70726F70657274795F76616C7565730606010E70726F70657274795F74797065730607000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700","01166469726563745f7472616e736665725f736372697074000000000000000000000000000000000000000000000000000000000000000305746f6b656e0000051063726561746f72735f61646472657373040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402","010C6F666665725F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E7366657273000006087265636569766572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E0206616D6F756E7402","010C636C61696D5F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E73666572730000050673656E646572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E02","011363616E63656C5F6F666665725F73637269707400000000000000000000000000000000000000000000000000000000000000030F746F6B656E5F7472616E7366657273000005087265636569766572040763726561746F72040A636F6C6C656374696F6E07000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E6700046E616D6507000000000000000000000000000000000000000000000000000000000000000106737472696E6706537472696E67001070726F70657274795F76657273696F6E02","01176d75746174655f746f6b656e5f70726f70657274696573000000000000000000000000000000000000000000000000000000000000000305746f6b656eba02206d75746174652074686520746f6b656e2070726f706572747920616e64207361766520746865206e65772070726f706572747920696e20546f6b656e53746f72650a2069662074686520746f6b656e2070726f70657274795f76657273696f6e20697320302c2077652077696c6c206372656174652061206e65772070726f70657274795f76657273696f6e2070657220746f6b656e20746f2067656e65726174652061206e657720746f6b656e5f69642070657220746f6b656e0a2069662074686520746f6b656e2070726f70657274795f76657273696f6e206973206e6f7420302c2077652077696c6c206a75737420757064617465207468652070726f70657274794d617020616e642075736520746865206578697374696e6720746f6b656e5f6964202870726f70657274795f76657273696f6e2900090b746f6b656e5f6f776e6572040763726561746f72040f636f6c6c656374696f6e5f6e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67000a746f6b656e5f6e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e670016746f6b656e5f70726f70657274795f76657273696f6e0206616d6f756e7402046b6579730607000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67000676616c7565730606010574797065730607000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700","01166f70745f696e5f6469726563745f7472616e73666572000000000000000000000000000000000000000000000000000000000000000305746f6b656e000001066f70745f696e00","01046275726e000000000000000000000000000000000000000000000000000000000000000305746f6b656e20204275726e206120746f6b656e2062792074686520746f6b656e206f776e657200051063726561746f72735f61646472657373040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402","010f6275726e5f62795f63726561746f72000000000000000000000000000000000000000000000000000000000000000305746f6b656e6a204275726e206120746f6b656e2062792063726561746f72207768656e2074686520746f6b656e2773204255524e41424c455f42595f43524541544f5220697320747275650a2054686520746f6b656e206973206f776e65642061742061646472657373206f776e65720005056f776e6572040a636f6c6c656374696f6e07000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e6700046e616d6507000000000000000000000000000000000000000000000000000000000000000106737472696e6706537472696e67001070726f70657274795f76657273696f6e0206616d6f756e7402"],Zm=class{constructor(e,t){this.type=e,this.value=t}},Id=class{constructor(){this.data={}}setProperty(e,t){this.data[e]=t}};function Qm(e){let t;return e==="string"||e==="String"?t=new Jr(l2):t=new su(e).parseTypeTag(),t}function v2(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((s,r)=>{try{const i=Qm(s),o=new rn;Od(e[r],i,o),n.push(o.getBytes())}catch{n.push(new TextEncoder().encode(e[r]))}}),n}function ew(e){const t=e.map.data,n=new Id;return t.forEach(s=>{const{key:r}=s,i=s.value.value,o=s.value.type,a=Qm(o),c=S2(a,i),u=new Zm(o,c);n.setProperty(r,u)}),n}function S2(e,t){const n=new xd(new ot(t).toUint8Array());let s="";return e instanceof Gs?s=n.deserializeU8().toString():e instanceof Kr?s=n.deserializeU64().toString():e instanceof Vr?s=n.deserializeU128().toString():e instanceof Gr?s=n.deserializeBool()?"true":"false":e instanceof Xr?s=ot.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Jr&&e.isStringTypeTag()?s=n.deserializeStr():s=t,s}var A2={};Mc(A2,{PropertyMap:()=>Id,PropertyValue:()=>Zm,Token:()=>nw,TokenData:()=>tw});var tw=class{constructor(e,t,n,s,r,i,o,a){this.collection=e,this.description=t,this.name=n,this.maximum=s,this.supply=r,this.uri=i,this.default_properties=ew(o),this.mutability_config=a}},nw=class{constructor(e,t,n){this.id=e,this.amount=t,this.token_properties=ew(n)}},E2=class{constructor(e){this.aptosClient=e,this.transactionBuilder=new Va(x2.map(t=>new ot(t).toUint8Array()))}async createCollection(e,t,n,s,r=ho,i){const o=this.transactionBuilder.buildTransactionPayload("0x3::token::create_collection_script",[],[t,n,s,r,[!1,!1,!1]]);return this.aptosClient.generateSignSubmitTransaction(e,o,i)}async createToken(e,t,n,s,r,i,o=ho,a=e.address(),c=0,u=0,l=[],f=[],h=[],g){const w=this.transactionBuilder.buildTransactionPayload("0x3::token::create_token_script",[],[t,n,s,r,o,i,a,c,u,[!1,!1,!1,!1,!1],l,v2(f,h),h]);return this.aptosClient.generateSignSubmitTransaction(e,w,g)}async createTokenWithMutabilityConfig(e,t,n,s,r,i,o=ho,a=e.address(),c=0,u=0,l=[],f=[],h=[],g=[!1,!1,!1,!1,!1],w){const b=this.transactionBuilder.buildTransactionPayload("0x3::token::create_token_script",[],[t,n,s,r,o,i,a,c,u,g,l,f,h]);return this.aptosClient.generateSignSubmitTransaction(e,b,w)}async offerToken(e,t,n,s,r,i,o=0,a){const c=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::offer_script",[],[t,n,s,r,o,i]);return this.aptosClient.generateSignSubmitTransaction(e,c,a)}async claimToken(e,t,n,s,r,i=0,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::claim_script",[],[t,n,s,r,i]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async cancelTokenOffer(e,t,n,s,r,i=0,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token_transfers::cancel_offer_script",[],[t,n,s,r,i]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async directTransferToken(e,t,n,s,r,i,o=0,a){const c=this.transactionBuilder.buildTransactionPayload("0x3::token::direct_transfer_script",[],[n,s,r,o,i]),u=await this.aptosClient.generateRawTransaction(e.address(),c,a),l=new k.MultiAgentRawTransaction(u,[k.AccountAddress.fromHex(t.address())]),f=new k.Ed25519Signature(e.signBuffer(Pi.getSigningMessage(l)).toUint8Array()),h=new k.AccountAuthenticatorEd25519(new k.Ed25519PublicKey(e.signingKey.publicKey),f),g=new k.Ed25519Signature(t.signBuffer(Pi.getSigningMessage(l)).toUint8Array()),w=new k.AccountAuthenticatorEd25519(new k.Ed25519PublicKey(t.signingKey.publicKey),g),b=new k.TransactionAuthenticatorMultiAgent(h,[k.AccountAddress.fromHex(t.address())],[w]),T=Xs(new k.SignedTransaction(u,b));return(await this.aptosClient.submitSignedBCSTransaction(T)).hash}async optInTokenTransfer(e,t,n){const s=this.transactionBuilder.buildTransactionPayload("0x3::token::opt_in_direct_transfer",[],[t]);return this.aptosClient.generateSignSubmitTransaction(e,s,n)}async transferWithOptIn(e,t,n,s,r,i,o,a){const c=new jo(new Fo(new ot(T2).toUint8Array(),[],[new Ai(k.AccountAddress.fromHex(t)),new Ei(new TextEncoder().encode(n)),new Ei(new TextEncoder().encode(s)),new Si(BigInt(r)),new Ai(k.AccountAddress.fromHex(i)),new Si(BigInt(o))]));return this.aptosClient.generateSignSubmitTransaction(e,c,a)}async burnByCreator(e,t,n,s,r,i,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token::burn_by_creator",[],[t,n,s,r,i]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async burnByOwner(e,t,n,s,r,i,o){const a=this.transactionBuilder.buildTransactionPayload("0x3::token::burn",[],[t,n,s,r,i]);return this.aptosClient.generateSignSubmitTransaction(e,a,o)}async mutateTokenProperties(e,t,n,s,r,i,o,a,c,u,l){const f=this.transactionBuilder.buildTransactionPayload("0x3::token::mutate_token_properties",[],[t,n,s,r,i,o,a,c,u]);return this.aptosClient.generateSignSubmitTransaction(e,f,l)}async getCollectionData(e,t){const s=(await this.aptosClient.getAccountResources(e)).find(a=>a.type==="0x3::token::Collections"),{handle:r}=s.data.collection_data,i={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:t};return await this.aptosClient.getTableItem(r,i)}async getTokenData(e,t,n){const s=e instanceof ot?e.hex():e,r=await this.aptosClient.getAccountResource(s,"0x3::token::Collections"),{handle:i}=r.data.token_data,a={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:s,collection:t,name:n}},c=await this.aptosClient.getTableItem(i,a);return new tw(c.collection,c.description,c.name,c.maximum,c.supply,c.uri,c.default_properties,c.mutability_config)}async getToken(e,t,n,s="0"){const r={creator:e instanceof ot?e.hex():e,collection:t,name:n};return this.getTokenForAccount(e,{token_data_id:r,property_version:s})}async getTokenForAccount(e,t){const n=await this.aptosClient.getAccountResource(e instanceof ot?e.hex():e,"0x3::token::TokenStore"),{handle:s}=n.data.tokens,r={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:t};try{const i=await this.aptosClient.getTableItem(s,r);return new nw(i.id,i.amount,i.token_properties)}catch(i){return(i==null?void 0:i.status)===404?{id:t,amount:"0",token_properties:new Id}:i}}},k2="Invariant failed";function B2(e,t){if(!e)throw new Error(k2)}we.config({precision:64,rounding:we.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var Ln=we,Tn=class extends Error{constructor(e,t){super(e),this.message=e,this.errorCode=t}static isClmmpoolsErrorCode(e,t){return e instanceof Tn&&e.errorCode===t}},de=new U(0),qr=new U(1),ru=new U(2);ru.pow(new U(128));var Xa=ru.pow(new U(64)).sub(qr),P2=ru.pow(new U(128)).sub(qr),Ze=class{static toX64_BN(e){return e.mul(new U(2).pow(new U(64)))}static toX64_Decimal(e){return e.mul(Ln.pow(2,64))}static toX64(e){return new U(e.mul(Ln.pow(2,64)).floor().toFixed())}static fromX64(e){return new Ln(e.toString()).mul(Ln.pow(2,-64))}static fromX64_Decimal(e){return e.mul(Ln.pow(2,-64))}static fromX64_BN(e){return e.div(new U(2).pow(new U(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(Xa).gt(de)&&(t=t.add(qr)),t}static divRoundUp(e,t){return e.mod(t).eq(de)?e.div(t):e.div(t).add(new U(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(P2):e.sub(t)}static checkUnsignedSub(e,t){const n=e.sub(t);if(n.isNeg())throw new Tn("Unsigned integer sub overflow","UnsignedIntegerOverflow");return n}static checkMul(e,t,n){const s=e.mul(t);if(this.isOverflow(s,n))throw new Tn("Multiplication overflow","MultiplicationOverflow");return s}static checkMulDivFloor(e,t,n,s){if(n.eq(de))throw new Tn("Devide by zero","DivideByZero");const r=e.mul(t).div(n);if(this.isOverflow(r,s))throw new Tn("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivCeil(e,t,n,s){if(n.eq(de))throw new Tn("Devide by zero","DivideByZero");const r=e.mul(t).add(n.sub(qr)).div(n);if(this.isOverflow(r,s))throw new Tn("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivRound(e,t,n,s){if(n.eq(de))throw new Tn("Devide by zero","DivideByZero");const r=e.mul(t.add(n.shrn(1))).div(n);if(this.isOverflow(r,s))throw new Tn("Multiplication div overflow","MulDivOverflow");return r}static checkMulShiftRight(e,t,n,s){const r=e.mul(t).div(new U(2).pow(new U(n)));if(this.isOverflow(r,s))throw new Tn("Multiplication shift right overflow","MulShiftRightOverflow");return r}static checkMulShiftRight64RoundUpIf(e,t,n,s){const r=e.mul(t),o=s&&r.and(Xa).gt(de)?r.shrn(64).add(qr):r.shrn(64);if(this.isOverflow(o,n))throw new Tn("Multiplication shift right overflow","MulShiftRightOverflow");return o}static checkMulShiftLeft(e,t,n,s){const r=e.mul(t).shln(n);if(this.isOverflow(r,s))throw new Tn("Multiplication shift left overflow","MulShiftLeftOverflow");return r}static checkDivRoundUpIf(e,t,n){if(t.eq(de))throw new Tn("Devide by zero","DivideByZero");return n?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(ru.pow(new U(t)))}};function sw(e){return{coinA:e.coinTypeA.toString(),coinB:e.coinTypeB.toString(),currentSqrtPrice:new U(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new U(e.fee_growth_global_a),feeGrowthGlobalB:new U(e.fee_growth_global_b),feeProtocolCoinA:new U(e.fee_protocol_coin_a),feeProtocolCoinB:new U(e.fee_protocol_coin_b),feeRate:e.fee_rate,liquidity:new U(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:e.collectionName}}function U2(e){const t=new U(e);return t.lt(de)?{bits:t.neg().xor(new U(2).pow(new U(64)).sub(new U(1))).add(new U(1)).toString()}:{bits:t.toString()}}var rw="0x1::coin::CoinInfo",iw="0x1::coin::CoinStore",mh="0x3::token::TokenStore",R2="0x3::token::WithdrawEvent",O2="PoolLiquidityCoin",Ur="clmm_router",ow="factory",aw="Pools",I2="pool",$2="Pool",L2="crowdsale",q2="CrowdsalePool",N2="fairlaunch",D2="FairlaunchPool",Es="cetus_script",cw="cscoin",uw="liquidity",ll="scripts";function M2(e){return e.startsWith("0x")?`${e.slice(2)}`:e}function Ps(e){let t="";const n=M2(e),s=n.length/2;for(let r=0;r<s;r++)t+=String.fromCharCode(parseInt(n.substr(r*2,2),16));return z2(t)}function z2(e){let t,n,s,r,i,o;for(t="",s=e.length,n=0;n<s;)switch(r=e.charCodeAt(n++),r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:i=e.charCodeAt(n++),t+=String.fromCharCode((r&31)<<6|i&63);break;case 14:i=e.charCodeAt(n++),o=e.charCodeAt(n++),t+=String.fromCharCode((r&15)<<12|(i&63)<<6|(o&63)<<0);break}return t}var F2=/^0x1::coin::CoinStore<(.+)>$/;function it(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let r=[e,...t].filter(Boolean).join("::");return n&&n.length&&(r+=`<${n.join(", ")}>`),r}function wh(e){return it(ot.fromUint8Array(e.value.address.address).hex(),e.value.module_name.value,e.value.name.value,[])}function C2(e){const t=e.value.type_args[0],n=e.value.type_args[1],s=wh(t),r=wh(n),i=it(ot.fromUint8Array(e.value.address.address).hex(),e.value.module_name.value,e.value.name.value,[s,r]);return{coinA:s,coinB:r,lpAddress:i}}function $d(e){var t;let n=e.replace(/\s/g,"");const s=n.match(/(<.+>)$/),r=(t=s==null?void 0:s[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r)return n=n.slice(0,n.indexOf("<")),{...$d(n),type_arguments:[...r]};const i=n.split("::");return{full_address:n,address:i[0],module:i[1],name:i[2],type_arguments:[]}}function bh(e){const t=e.match(F2);return t?t[1]:""}function H2(e){return`${iw}<${e}>`}function j2(e){return`${rw}<${e}>`}var iu=class{constructor(e,t=0){this.overdueTime=t,this.value=e}getCacheData(){return this.value===null?null:this.overdueTime===0?this.value:Date.parse(new Date().toString())>this.overdueTime?(this.value=null,null):this.value}},_h=443636,Th=-443636,ou="79226673515401279992447579055",au="4295048016",oi=new U(1e6),Ja=class{static getDefaultSqrtPriceLimit(e){return new U(e?au:ou)}static getDefaultOtherAmountThreshold(e){return e?de:Xa}},Ya=class{constructor(e,t){this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return Ya.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const n=typeof e=="number"?new U(e.toString()):e,s=typeof t=="number"?new U(t.toString()):t;return new Ya(n,s)}},W2=14,G2="59543866431248",K2="184467440737095516",V2="15793534762490258745";function X2(e,t,n){const s=e.toTwos(n).shln(t);return s.imaskn(n+1),s.fromTwos(n)}function wt(e,t,n){const s=e.toTwos(n).shrn(t);return s.imaskn(n-t+1),s.fromTwos(n-t)}function J2(e){let t;return e&1?t=new U("79232123823359799118286999567"):t=new U("79228162514264337593543950336"),e&2&&(t=wt(t.mul(new U("79236085330515764027303304731")),96,256)),e&4&&(t=wt(t.mul(new U("79244008939048815603706035061")),96,256)),e&8&&(t=wt(t.mul(new U("79259858533276714757314932305")),96,256)),e&16&&(t=wt(t.mul(new U("79291567232598584799939703904")),96,256)),e&32&&(t=wt(t.mul(new U("79355022692464371645785046466")),96,256)),e&64&&(t=wt(t.mul(new U("79482085999252804386437311141")),96,256)),e&128&&(t=wt(t.mul(new U("79736823300114093921829183326")),96,256)),e&256&&(t=wt(t.mul(new U("80248749790819932309965073892")),96,256)),e&512&&(t=wt(t.mul(new U("81282483887344747381513967011")),96,256)),e&1024&&(t=wt(t.mul(new U("83390072131320151908154831281")),96,256)),e&2048&&(t=wt(t.mul(new U("87770609709833776024991924138")),96,256)),e&4096&&(t=wt(t.mul(new U("97234110755111693312479820773")),96,256)),e&8192&&(t=wt(t.mul(new U("119332217159966728226237229890")),96,256)),e&16384&&(t=wt(t.mul(new U("179736315981702064433883588727")),96,256)),e&32768&&(t=wt(t.mul(new U("407748233172238350107850275304")),96,256)),e&65536&&(t=wt(t.mul(new U("2098478828474011932436660412517")),96,256)),e&131072&&(t=wt(t.mul(new U("55581415166113811149459800483533")),96,256)),e&262144&&(t=wt(t.mul(new U("38992368544603139932233054999993551")),96,256)),wt(t,32,256)}function Y2(e){const t=Math.abs(e);let n;return t&1?n=new U("18445821805675392311"):n=new U("18446744073709551616"),t&2&&(n=wt(n.mul(new U("18444899583751176498")),64,256)),t&4&&(n=wt(n.mul(new U("18443055278223354162")),64,256)),t&8&&(n=wt(n.mul(new U("18439367220385604838")),64,256)),t&16&&(n=wt(n.mul(new U("18431993317065449817")),64,256)),t&32&&(n=wt(n.mul(new U("18417254355718160513")),64,256)),t&64&&(n=wt(n.mul(new U("18387811781193591352")),64,256)),t&128&&(n=wt(n.mul(new U("18329067761203520168")),64,256)),t&256&&(n=wt(n.mul(new U("18212142134806087854")),64,256)),t&512&&(n=wt(n.mul(new U("17980523815641551639")),64,256)),t&1024&&(n=wt(n.mul(new U("17526086738831147013")),64,256)),t&2048&&(n=wt(n.mul(new U("16651378430235024244")),64,256)),t&4096&&(n=wt(n.mul(new U("15030750278693429944")),64,256)),t&8192&&(n=wt(n.mul(new U("12247334978882834399")),64,256)),t&16384&&(n=wt(n.mul(new U("8131365268884726200")),64,256)),t&32768&&(n=wt(n.mul(new U("3584323654723342297")),64,256)),t&65536&&(n=wt(n.mul(new U("696457651847595233")),64,256)),t&131072&&(n=wt(n.mul(new U("26294789957452057")),64,256)),t&262144&&(n=wt(n.mul(new U("37481735321082")),64,256)),n}var Tt=class{static priceToSqrtPriceX64(e,t,n){return Ze.toX64(e.mul(Ln.pow(10,n-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,n){return Ze.fromX64(e).pow(2).mul(Ln.pow(10,t-n))}static tickIndexToSqrtPriceX64(e){return e>0?new U(J2(e)):new U(Y2(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new U(ou))||e.lt(new U(au)))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const t=e.bitLength()-1,n=new U(t-64),s=X2(n,32,128);let r=new U("8000000000000000","hex"),i=0,o=new U(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;r.gt(new U(0))&&i<W2;){a=a.mul(a);const w=a.shrn(127);a=a.shrn(63+w.toNumber()),o=o.add(r.mul(w)),r=r.shrn(1),i+=1}const c=o.shrn(32),l=s.add(c).mul(new U(G2)),f=wt(l.sub(new U(K2)),64,128).toNumber(),h=wt(l.add(new U(V2)),64,128).toNumber();return f===h?f:Tt.tickIndexToSqrtPriceX64(h).lte(e)?h:f}static tickIndexToPrice(e,t,n){return Tt.sqrtPriceX64ToPrice(Tt.tickIndexToSqrtPriceX64(e),t,n)}static priceToTickIndex(e,t,n){return Tt.sqrtPriceX64ToTickIndex(Tt.priceToSqrtPriceX64(e,t,n))}static priceToInitializableTickIndex(e,t,n,s){return Tt.getInitializableTickIndex(Tt.priceToTickIndex(e,t,n),s)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return Tt.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return Tt.getInitializableTickIndex(e,t)-t}};function lw(e){const t=[];for(const n of e){const s={index:Number(BigInt.asIntN(64,BigInt(n.index.bits)).toString()),sqrtPrice:new U(n.sqrt_price),liquidityNet:new U(BigInt.asIntN(64,BigInt(n.liquidity_net.bits)).toString()),liquidityGross:new U(n.liquidity_gross),feeGrowthOutsideA:new U(n.fee_growth_outside_a),feeGrowthOutsideB:new U(n.fee_growth_outside_b),rewardersGrowthOutside:[new U(n.rewarders_growth_outside[0]),new U(n.rewarders_growth_outside[1]),new U(n.rewarders_growth_outside[2])]};t.push(s)}return t}function xh(e){return e.isAxiosError,e}function Ye(e){return Ln.isDecimal(e)?e:new Ln(e===void 0?0:e)}function Ld(e){return Ye(10).pow(Ye(e).abs())}function Z2(e){return e!=null&&e!==""&&!isNaN(Number(e.toString()))}new U(365);new U(24);new U(3600);new U(.5);function Q2(e,t,n,s,r,i){const o=new we(e.toString()).div(new we(10**n)),a=new we(t.toString()).div(new we(10**s));return o.mul(r).add(a.mul(i))}function eE(e,t,n,s,r,i,o,a,c,u,l,f,h,g,w,b,T,R,A,x,E,S,q,O){const F=new we(f),Y=new we(h),Se=new we(b),Oe=new we(T),N=new we(R),D=new we(A),M=new we(x),oe=new we(E),Te=new we(S),ve=new we(q),ke=new we(O),Ce=Tt.tickIndexToSqrtPriceX64(t),Ie=Tt.tickIndexToSqrtPriceX64(n),Me=Ze.toX64_Decimal(Ze.fromX64(Ce)).round(),Be=Ze.toX64_Decimal(Ze.fromX64(Ie)).round(),De=Ze.toX64_Decimal(Ze.fromX64(s)).round();let me;const le=F.mul(new we(10**i)).mul(Be.mul(Me)).div(Be.sub(Me)).round(),je=Y.mul(new we(10**o)).div(Be.sub(Me)).round();e<t?me=le:e>n?me=je:me=we.min(le,je);const xt=me.mul(De.sub(Me)),ze=me.mul(Be.sub(De)).div(De.mul(Be)).div(new we(10**i)).mul(M).add(xt.div(new we(10**o).mul(oe))),ft=Q2(g,w,i,o,M,oe),qt=ze.div(ft),En=me.eq(new we(0))?new we(0):new we(l/1e4).mul(Se).mul(new we(me.toString()).div(new we(r.toString()).add(new we(me.toString())))).div(ze),on=qt.eq(new we(0))?new we(0):qt.mul(new we(36500/7)).div(ze),X=Oe.div(new we(10**a)).mul(Te).mul(on),ne=N.div(new we(10**c)).mul(ve).mul(on),ye=D.div(new we(10**u)).mul(ke).mul(on);return{feeAPR:En,posRewarder0APR:X,posRewarder1APR:ne,posRewarder2APR:ye}}function tE(e,t,n,s){const r=Math.max(e,n),o=Math.min(t,s)-r,a=t-e,c=s-n,u=new we(a.toString()),l=new we(c.toString()),f=new we(o.toString());let h=new we("0");return o<0?h=new we("0"):a===o?h=l.div(f):c===o?h=f.div(u):h=f.mul(f).div(l).div(u),h}function nE(e){const{clmmpool:t,position:n,tickLower:s,tickUpper:r}=e,{current_tick_index:i,fee_growth_global_a:o,fee_growth_global_b:a}=t;console.log({currentTickIndex:i,feeGrowthGlobalAX64:o,feeGrowthGlobalBX64:a});const{tick_lower_index:c,tick_upper_index:u,liquidity:l,fee_owed_a:f,fee_owed_b:h,fee_growth_inside_a:g,fee_growth_inside_b:w}=n,{feeGrowthOutsideA:b,feeGrowthOutsideB:T}=s,{feeGrowthOutsideA:R,feeGrowthOutsideB:A}=r;let x=null,E=null;i<Number(c)?(x=Ze.subUnderflowU128(new U(o),new U(b)),E=Ze.subUnderflowU128(new U(a),new U(T))):(x=b,E=T);let S=null,q=null;i<Number(u)?(S=R,q=A):(S=Ze.subUnderflowU128(new U(o),new U(R)),q=Ze.subUnderflowU128(new U(a),new U(A)));const O=Ze.subUnderflowU128(Ze.subUnderflowU128(new U(o),new U(x)),new U(S)),F=Ze.subUnderflowU128(Ze.subUnderflowU128(new U(a),new U(E)),new U(q)),Y=Ze.subUnderflowU128(new U(O),new U(g)).mul(new U(l)).shrn(64),Se=Ze.subUnderflowU128(new U(F),new U(w)).mul(new U(l)).shrn(64),Oe=new U(Ye(f).add(Ye(Y.toString())).toString()),N=new U(Ye(h).add(Ye(Se.toString())).toString());return{feeOwedA:Oe,feeOwedB:N}}var cr=1e9,sE=5*60*1e3,na=24*60*60*1e3;function vh(e){return Date.parse(new Date().toString())+e}var rE=class{constructor(e){this._cache={},this._sdk=e}get sdk(){return this._sdk}async getPoolImmutablesResource(e=!1){const t=this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,n=`${t}_getMmutablesPools`,s=this.getCacheData(n);let r;if(!e&&s!=null)r=s;else{const i=it(t,ow,aw),o=await this._sdk.Resources.fetchAccountResource(t,i);r=JSON.parse(JSON.stringify(o==null?void 0:o.data)),this.updateCache(n,r,na)}return r}async getLaunchpadPools(e=[],t=0,n=100,s=null,r=!1){const i=this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,o=[],c=(await this.getPoolImmutablesResource(r)).data.data,u=e.length>0;for(let l=0;l<c.length;l+=1){const f=c[l],{pool_address:h,creater_address:g,pool_type:w}=f.value;if(s==="fixed_price"&&w!==0||s==="fair_launch"&&w===0||u&&!e.includes(h))continue;if(!u){const O=Number(l);if(O<t||O>=t+n)continue}const b=f.key,T=it(b.coin_raise.account_address,Ps(b.coin_raise.module_name),Ps(b.coin_raise.struct_name)),R=it(b.coin_sale.account_address,Ps(b.coin_sale.module_name),Ps(b.coin_sale.struct_name)),A=cs.buildLaunchpadPoolType(w===0,i,R,T),x={coin_type_sale:R,coin_type_raise:T,pool_type:A,pool_address:h,creator:g,pool_mode:w===0?"fixed_price":"fair_launch"},E=await this.getLaunchpadPoolState(x.pool_address,x.pool_type,x.pool_mode),S={...x,...E};await this.calculateLaunchpadPoolField(S),o.push(S);const q=`${h}_pool`;this.updateCache(q,S,na)}return o}async getLaunchpadPool(e,t=!0){const n=`${e}_pool`,s=this.getCacheData(n);let r;if(s!==null&&!t&&(r=s),r==null)return(await this.getLaunchpadPools([e]))[0];const i=await this.getLaunchpadPoolState(e,r.pool_type,r.pool_mode),o={...r,...i};return await this.calculateLaunchpadPoolField(o),this.updateCache(n,o,na),o}async getSpecifyCoinDecimals(e){const t={};(await this._sdk.Token.getSpecifyTokenListByCache(e)).forEach(i=>{t[i.address]=i.decimals});const s=e.filter(i=>t[i]===void 0);return(await this._sdk.Resources.getSpecifyCoinInfos(s)).forEach(i=>{t[i.coinAddress]=Number(i.decimals)}),t}async calculateLaunchpadPoolField(e){const t=await this.getSpecifyCoinDecimals([e.coin_type_sale,e.coin_type_raise]),n=Number(t[e.coin_type_sale]),s=Number(t[e.coin_type_raise]);if(e.initialize_price=cs.priceFixToReal(e.initialize_price,n,s),cs.isFixedPricePool(e))e.raise_total=cs.raiseTotalAmount(e,n,s);else{e.raise_total=cs.raiseTotalAmount(e,n,s);const i=Ye(e.raise_coin_amount).div(Ye(10).pow(Ye(s))),o=Ye(e.sale_total).div(Ye(10).pow(Ye(n)));o.toNumber()>0?e.price=i.div(o).toNumber():e.price=0}return cs.updatePoolStaus(e),!0}async getLaunchpadPoolState(e,t,n,s=!0){const r=`${e}_${t}_getLaunchpadPoolState`;if(!s){const c=this.getCacheData(r);if(c!==null)return c}const i=await this._sdk.Resources.fetchAccountResource(e,t),o=JSON.parse(JSON.stringify(i==null?void 0:i.data)),a=cs.buildLaunchpadFixedPoolState(n,o);return this.updateCache(r,a,na),a}async getOwnerLaunchpadCoins(e){const t=await this._sdk.Resources.getCoinStores(e),n=[];return t.forEach(s=>{const r=$d(s.coinAddress);r.module===cw&&n.push({coin_type_sale:r.type_arguments[0],coin_type_raise:r.type_arguments[1],coin_address:s.coinAddress,balance:Number(s.coin.value)})}),n}async getSimplePosition(e){const t=await this._sdk.Resources.fetchAccountResource(e,it(this._sdk.sdkOptions.networkOptions.launchpad.cetusLaunchpad,"clmmProxy","LockedPosition")),n=JSON.parse(JSON.stringify(t==null?void 0:t.data));return{position_name:n.token_id.token_data_id.name,collection:n.token_id.token_data_id.collection,creator:n.token_id.token_data_id.creator,unlock_time:n.unlock_time,is_redeem:n.is_redeem}}async hasPoolWhitelist(e){const{launchpad:t}=this._sdk.sdkOptions.networkOptions,n={handle:"",exist:!1};try{const s=await this._sdk.Resources.fetchAccountResource(e,it(t.cetusLaunchpad,"whitelist","Whitelist")),r=JSON.parse(JSON.stringify(s==null?void 0:s.data));return n.exist=Number(r.users.length)>0,n.handle=r.users.inner.handle,n}catch(s){console.log(s)}return n}async inPoolWhitelist(e,t){if(!t.exist)return!1;try{return await this._sdk.client.getTableItem(t.handle,{key_type:"address",value_type:"u8",key:e}),!0}catch(n){console.log(n)}return!1}buildLaunchpadCoinType(e,t){return it(this._sdk.sdkOptions.networkOptions.launchpad.crowdCoin,"cscoin","CS",[e,t])}creatPoolTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s="is_admin"in e,r=`${n.cetusLaunchpad}::${Es}`,i=s?e.is_admin?"create_crowdsale_pool_authority":"create_crowdsale_pool":"create_fairlaunch_pool",o=cs.priceRealToFix(e.initialize_price,e.sale_decimals,e.raise_decimals);console.log("fixPrice:",o);const a=Tt.priceToSqrtPriceX64(Ye(e.initialize_price),e.sale_decimals,e.raise_decimals).toString();return s?cs.buildCreatCrowdsalePoolPayload(e,a,o,r,i,t):cs.buildCreatFairlaunchPoolPayload(e,a,o,r,i,t)}updatePoolTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r="update_pool";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_addr)),H.bcsSerializeUint64(e.start_time),H.bcsSerializeUint64(e.liquidity_rate*100),H.bcsSerializeUint64(e.activity_duration),H.bcsSerializeUint64(e.calmdown_duraction),H.bcsSerializeUint64(e.settle_duration),H.bcsSerializeUint64(e.locked_duration)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coin_type_sale,e.coin_type_raise],a=[e.pool_addr,e.start_time,e.liquidity_rate*100,e.activity_duration,e.calmdown_duraction,e.settle_duration,e.locked_duration];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}purchaseTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r="purchase";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_addr)),H.bcsSerializeUint64(e.raise_amount_in)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coin_type_sale,e.coin_type_raise],a=[e.pool_addr,e.raise_amount_in];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}revokeTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r="revoke";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_addr)),H.bcsSerializeUint64(e.cs_coin_amount)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coin_type_sale,e.coin_type_raise],a=[e.pool_addr,e.cs_coin_amount];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}settleTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r=e.pool_mode==="fixed_price",i=r?"crowd_sale_settle":"fair_launch_settle";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))];return r?new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,i,c,[])):new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,i,c,[H.bcsSerializeU128(BigInt(e.initialize_sqrt_price))]))}const o=it(s,i),a=[e.coin_type_sale,e.coin_type_raise];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:r?[]:[e.initialize_sqrt_price]}}claimTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r="claim";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_addr)),H.bcsSerializeUint64(e.cs_coin_amount)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coin_type_sale,e.coin_type_raise],a=[e.pool_addr,e.cs_coin_amount];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}claimFeeTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r="claim_fee";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_addr))];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coin_type_sale,e.coin_type_raise],a=[e.pool_addr];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}withdrawTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r=e.is_withdraw_sale?"withdraw_sale":"withdraw_raise";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_addr))];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coin_type_sale,e.coin_type_raise],a=[e.pool_addr];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}redeemPositionTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r="redeem_position";if(t){const a=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,a,[]))}const i=it(s,r),o=[e.coin_type_sale,e.coin_type_raise];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:[]}}userToWhitelistTransactionPayload(e,t=!1){const{launchpad:n}=this.sdk.sdkOptions.networkOptions,s=`${n.cetusLaunchpad}::${Es}`,r=e.isAdd?"add_user_to_whitelist":"remove_user_from_whitelist";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.user_addr))];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coin_type_sale,e.coin_type_raise],a=[e.user_addr];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}updateCache(e,t,n=sE){let s=this._cache[e];s?(s.overdueTime=vh(n),s.value=t):s=new iu(t,vh(n)),this._cache[e]=s}getCacheData(e){const t=this._cache[e];return t!==void 0&&t.getCacheData()?t.value:null}};function iE(e,t,n,s){const r=e.shln(64),i=n.sub(t);return s?Ze.divRoundUp(r,i):r.div(i)}var cs=class{static minSettlePurchaseAmount(e){return Ye(e.sale_total).mul(e.initialize_price).mul(e.least_raise_rate).toNumber()}static get_sale_liquidity_amount(e,t,n,s,r,i){const o=dl.getMinIndex(e),a=dl.getMaxIndex(e),c=this.priceRealToFix(s,r,i),u=new U(t*c*n),l=new U(Tt.priceToSqrtPriceX64(Ye(c),0,0).toString()),f=iE(u,Tt.tickIndexToSqrtPriceX64(o),l,!1);return mE(l,Tt.tickIndexToSqrtPriceX64(a),f,!0).toString()}static raiseTotalAmount(e,t,n){const s=Ye(t-n).abs().toNumber();return t>n?Number(Ye(e.sale_total).mul(e.initialize_price).div(Ye(10).pow(Ye(s))).toString()):Number(Ye(e.sale_total).mul(e.initialize_price).mul(Ye(10).pow(Ye(s))).toString())}static priceRealToFix(e,t,n){const s=Ye(t-n).toNumber();return Number(Ye(e).div(Ye(10).pow(Ye(s))).toString())}static priceFixToReal(e,t,n){const s=Ye(t-n).toNumber();return Number(Ye(e).mul(Ye(10).pow(Ye(s))).toString())}static buildLaunchpadPoolType(e,t,n,s){return e?it(it(t,L2,q2),[n,s]):it(it(t,N2,D2),[n,s])}static isFixedPricePool(e){return e.pool_mode==="fixed_price"}static getFairLaunchSettleSqrtPrice(e,t,n){if(e.pool_status!=="Settle")throw new Error("The pool is not in settle ");const s=Tt.priceToSqrtPriceX64(Ye(e.price),t,n).toString();return console.log("sqrtPrice: ",s.toString()),s.toString()}static async updatePoolStaus(e){const t=cs.isFixedPricePool(e),n=Number(Ye(Date.now()/1e3).toFixed(0));if(e.end_activity_time=Number(e.start_activity_time)+Number(e.activity_duration),t)if(e.end_settle_time=Number(e.end_activity_time)+Number(e.settle_duration),e.is_settle)e.pool_status="Ended";else if(n<Number(e.start_activity_time))e.pool_status="Upcoming";else if(n>=e.start_activity_time&&n<e.end_activity_time)e.pool_status="Live";else if(n>=e.end_activity_time&&n<e.end_settle_time){const s=e.raise_coin_amount,r=Ye(e.raise_total).mul(Ye(e.least_raise_rate)).toNumber();s<r?e.pool_status="Failed":e.pool_status="Settle"}else e.pool_status="Failed";else if(e.end_calm_down_time=Number(e.end_activity_time)+Number(e.calmdown_duration),e.end_settle_time=Number(e.end_calm_down_time)+Number(e.settle_duration),e.is_settle)e.pool_status="Ended";else if(n<Number(e.start_activity_time))e.pool_status="Upcoming";else if(n>=e.start_activity_time&&n<e.end_activity_time)e.pool_status="Live";else if(n>=e.end_activity_time&&n<e.end_calm_down_time)e.pool_status="Calmdown";else if(n>=e.end_calm_down_time&&n<e.end_settle_time){const s=e.raise_coin_amount,r=Ye(e.raise_total).mul(Ye(e.least_raise_rate)).toNumber();s<r?e.pool_status="Failed":e.pool_status="Settle"}else e.pool_status="Failed";return!0}static buildLaunchpadFixedPoolState(e,t){return e==="fixed_price"?{sale_coin_amount:t.sale_coin.value,raise_coin_amount:t.raise_coin.value,activity_duration:t.activity_duration,clmm_pool_address:t.clmm_pool_address,cs_burn_cap:t.cs_burn_cap.dummy_field,cs_mint_cap:t.cs_mint_cap.dummy_field,fee_amount:t.fee_amount,fee_rate:t.fee_rate,initialize_price:Number(t.initialize_price)/cr,initialize_sqrt_price:BigInt(t.initialize_sqrt_price),is_settle:t.is_settle,least_raise_rate:Number(t.least_raise_rate)/100,liquidity_rate:Number(t.liquidity_rate)/100,locked_duration:t.locked_duration,sale_total:t.sale_total,raise_total:0,settle_duration:t.settle_duration,start_activity_time:t.start_time,unused_raise:t.unused_raise,unused_sale:t.unused_sale,has_whiteList:t.has_white_list,pool_status:"Upcoming",end_activity_time:0,end_settle_time:0}:{price:0,sale_coin_amount:0,raise_coin_amount:t.raise_coin.value,sale_total:t.sale_coin.value,raise_total:0,calmdown_duration:t.calmdown_duration,initialize_price:Number(t.price)/cr,activity_duration:t.activity_duration,clmm_pool_address:t.clmm_pool_address,cs_burn_cap:t.cs_burn_cap.dummy_field,cs_mint_cap:t.cs_mint_cap.dummy_field,fee_amount:t.fee_amount,fee_rate:t.fee_rate,is_settle:t.is_settle,least_raise_rate:Number(t.least_raise_amount)/100,liquidity_rate:Number(t.liquidity_rate)/100,locked_duration:t.locked_duration,settle_duration:t.settle_duration,start_activity_time:t.start_time,has_whiteList:t.has_white_list,pool_status:"Upcoming",end_activity_time:0,end_calm_down_time:0,end_settle_time:0}}static buildCreatCrowdsalePoolPayload(e,t,n,s,r,i=!1){if(i){const u=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],l=e.is_admin?[H.bcsSerializeU128(n*cr),H.bcsSerializeU128(BigInt(t)),H.bcsSerializeUint64(e.tick_spacing),H.bcsSerializeUint64(e.sale_total),H.bcsSerializeUint64(e.start_time),H.bcsSerializeUint64(e.least_raise_rate*100),H.bcsSerializeUint64(e.activity_duration),H.bcsSerializeUint64(e.settle_duration),H.bcsSerializeUint64(e.locked_duration),H.bcsSerializeU8(0)]:[H.bcsSerializeU128(n*cr),H.bcsSerializeU128(BigInt(t)),H.bcsSerializeUint64(e.tick_spacing),H.bcsSerializeUint64(e.sale_total),H.bcsSerializeUint64(e.start_time),H.bcsSerializeUint64(e.least_raise_rate*100),H.bcsSerializeUint64(e.liquidity_rate*100),H.bcsSerializeUint64(e.activity_duration),H.bcsSerializeUint64(e.settle_duration),H.bcsSerializeUint64(e.locked_duration),H.bcsSerializeU8(0)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,u,l))}const o=it(s,r),a=[e.coin_type_sale,e.coin_type_raise],c=e.is_admin?[n*cr,t,e.tick_spacing,e.sale_total,e.start_time,e.least_raise_rate*100,e.activity_duration,e.settle_duration,e.locked_duration,0]:[n*cr,t,e.tick_spacing,e.sale_total,e.start_time,e.least_raise_rate*100,e.liquidity_rate*100,e.activity_duration,e.settle_duration,e.locked_duration,0];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}static buildCreatFairlaunchPoolPayload(e,t,n,s,r,i=!1){if(i){const u=[new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_sale)),new k.TypeTagStruct(k.StructTag.fromString(e.coin_type_raise))],l=[H.bcsSerializeU128(n*cr),H.bcsSerializeU128(BigInt(t)),H.bcsSerializeUint64(e.tick_spacing),H.bcsSerializeUint64(e.sale_total),H.bcsSerializeUint64(e.start_time),H.bcsSerializeUint64(e.least_raise_rate*100),H.bcsSerializeUint64(e.liquidity_rate*100),H.bcsSerializeUint64(e.activity_duration),H.bcsSerializeUint64(e.calmdown_duraction),H.bcsSerializeUint64(e.settle_duration),H.bcsSerializeUint64(e.locked_duration)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,u,l))}const o=it(s,r),a=[e.coin_type_sale,e.coin_type_raise],c=[n*cr,t,e.tick_spacing,e.sale_total,e.start_time,e.liquidity_rate*100,H.bcsSerializeUint64(e.least_raise_rate*100),e.activity_duration,e.calmdown_duraction,e.settle_duration,e.locked_duration];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}};function oE(e){let t;switch(e){case 5:t=5;break;case 10:t=10;break;case 20:t=20;break;case 25:t=25;break;case 50:t=50;break;case 100:t=100;break;default:t=1}const n=100/t+1,s=new Array(n);for(let r=0;r<n;r+=1)s[r]=r*t;return s}function Pa(e,t){const n=oE(t),s=new Array(n.length);for(let r=0;r<n.length;r+=1)s[r]=e.muln(n[r]).divn(100);return s}function aE(e,t,n,s){for(let r=t;r<e;r+=1)n.amountInArray[r]=n.amountInArray[r].add(s.amountIn),n.amountOutArray[r]=n.amountOutArray[r].add(s.amountOut),n.feeAmountArray[r]=n.feeAmountArray[r].add(s.feeAmount);return n}function cE(e,t,n,s,r){let i=new U(s.liquidity),{currentSqrtPrice:o}=s,a={amountInArray:[],amountOutArray:[],feeAmountArray:[],nextSqrtPriceArray:[],isExceed:[]};n.forEach(()=>{a.amountInArray.push(de),a.amountOutArray.push(de),a.feeAmountArray.push(de),a.nextSqrtPriceArray.push(de)});let c,u;const l=Ja.getDefaultSqrtPriceLimit(e),f=n.length;let h=n[1],g=1,w;e?w=r.sort((b,T)=>T.index-b.index):w=r.sort((b,T)=>b.index-T.index);for(const b of w){if(e){if(s.currentTickIndex<b.index)continue}else if(s.currentTickIndex>b.index)continue;if(b===null)continue;e&&l.gt(b.sqrtPrice)||!e&&l.lt(b.sqrtPrice)?c=l:c=b.sqrtPrice;let T={amountIn:de,amountOut:de,nextSqrtPrice:de,feeAmount:de};const R=o,A=i;let x=h,E=g;for(let S=g;S<f;S+=1){const q=hw(o,c,i,h,new U(s.feeRate),t);if(T=q,q.amountIn.eq(de)||(h=t?h.sub(q.amountIn.add(q.feeAmount)):h.sub(q.amountOut)),h.eq(de))a.amountInArray[S]=a.amountInArray[S].add(q.amountIn),a.amountOutArray[S]=a.amountOutArray[S].add(q.amountOut),a.feeAmountArray[S]=a.feeAmountArray[S].add(q.feeAmount),q.nextSqrtPrice.eq(b.sqrtPrice)?(u=e?b.liquidityNet.mul(new U(-1)):b.liquidityNet,i=u.gt(de)?i.add(u):i.sub(u.abs()),o=b.sqrtPrice):o=q.nextSqrtPrice,a.amountInArray[S]=a.amountInArray[S].add(a.feeAmountArray[S]),a.nextSqrtPriceArray[S]=o,i=A,o=R,S!==f-1&&(h=x.add(n[S+1].sub(n[E]))),g+=1;else{a=aE(f,S,a,q),x=h,E=g;break}}if(g===f)break;T.nextSqrtPrice.eq(b.sqrtPrice)?(u=e?b.liquidityNet.mul(new U(-1)):b.liquidityNet,i=u.gt(de)?i.add(u):i.sub(u.abs()),o=b.sqrtPrice):o=T.nextSqrtPrice}return t?n.forEach((b,T)=>{a.isExceed.push(a.amountInArray[T].lt(b))}):n.forEach((b,T)=>{a.isExceed.push(a.amountOutArray[T].lt(b))}),a}var uE=class{constructor(e,t,n,s,r,i){this.minSplitUnit=t,this.a2b=s,this.byAmountIn=r,this.clmmpool=n,this.ticks=i,this.amountArray=[],this.createSplitSwapParams=this.createSplitSwapParams.bind(this),this.createSplitSwapParams(e,t),this.splitSwapResult={amountInArray:[],amountOutArray:[],feeAmountArray:[],nextSqrtPriceArray:[],isExceed:[]},this.computeSwap=this.computeSwap.bind(this)}createSplitSwapParams(e,t){const n=Pa(e,t);this.amountArray=n}computeSwap(){const e=sw(this.clmmpool);return this.splitSwapResult=cE(this.a2b,this.byAmountIn,this.amountArray,e,this.ticks),this.splitSwapResult}},dl=class{static getMinIndex(e){return Th+Math.abs(Th)%e}static getMaxIndex(e){return _h-_h%e}};function lE(e,t,n,s,r,i){const o=e.rewarder_infos,a=[];for(let c=0;c<o.length;c+=1){let u=i[c];t!==null&&(e.current_tick_index<s?u=i[c].sub(new U(t.rewardersGrowthOutside[c])):u=t.rewardersGrowthOutside[c]);let l=new U(0);n!==null&&(e.current_tick_index>=r?l=i[c].sub(new U(n.rewardersGrowthOutside[c])):l=n.rewardersGrowthOutside[c]);const f=Ze.subUnderflowU128(Ze.subUnderflowU128(new U(i[c]),new U(u)),new U(l));a.push(f)}return a}function dE(e){if(e){const t={};return e.maxGasAmount&&(t.maxGasAmount=BigInt(e.maxGasAmount)),e.gasUnitPrice&&(t.gasUnitPrice=BigInt(e.gasUnitPrice)),e.expireTimestamp&&(t.expireTimestamp=BigInt(e.expireTimestamp)),t}}function fE(e,t){return new Ba(s=>{const r=new Uint8Array(64);return new k.Ed25519Signature(r)},e.toUint8Array()).sign(t)}function hE(e){if(e){const t={};return e.maxGasAmount&&(t.max_gas_amount=e.maxGasAmount.toString()),e.gasUnitPrice&&(t.gas_unit_price=e.gasUnitPrice.toString()),e.expireTimestamp&&(t.expiration_timestamp_secs=e.expireTimestamp.toString()),t}}async function pE(e,t,n,s,r=!0){if(n instanceof k.TransactionPayload){const l=await e.generateRawTransaction(t.address,n,dE(s)),f=fE(t.pubkey,l),h=await e.submitBCSSimulation(f);return r&&console.log(h[0]),h[0]}const i=n,o=await e.generateTransaction(t.address,i,hE(s)),a={type:"ed25519_signature",public_key:t.pubkey.hex(),signature:ot.fromUint8Array(new Uint8Array(64)).hex()},c={sender:t.address.hex(),sequence_number:o.sequence_number.toString(),max_gas_amount:o.max_gas_amount.toString(),gas_unit_price:o.gas_unit_price.toString(),expiration_timestamp_secs:o.expiration_timestamp_secs.toString(),payload:i,signature:a},u=await e.client.transactions.simulateTransaction(c);return r&&console.log(u[0]),u[0]}async function sa(e,t,n,s){return pE(e,t,n,s,!1)}function Sh(e,t){const n=new H.Serializer;n.serializeU32AsUleb128(e.length);const s=n[t];return e.forEach(r=>{n.serializeU32AsUleb128(r.length),r.forEach(i=>{s.call(n,i)})}),n.getBytes()}function gE(e){const t=new H.Serializer;return t.serializeU32AsUleb128(e.length),e.forEach(n=>{t.serializeU32AsUleb128(n.length),n.forEach(s=>{s.serialize(t)})}),t.getBytes()}function yE(e){const t=new H.Serializer;return t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)}),t.getBytes()}function mE(e,t,n,s){const r=e.gt(t)?e.sub(t):t.sub(e),i=n.mul(r).shln(64),o=e.mul(t),a=i.div(o),c=i.mod(o);return s&&!c.eq(de)?a.add(new U(1)):a}function dw(e,t,n,s){if(n.eq(de))return e;const r=Ze.checkMulShiftLeft(e,t,64,256),i=t.shln(64),o=Ze.checkMul(e,n,256);if(!s&&i.lte(o))throw new Tn("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=s?Ze.checkDivRoundUpIf(r,i.add(o),!0):Ze.checkDivRoundUpIf(r,i.sub(o),!0);if(a.lt(new U(au)))throw new Tn("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new U(ou)))throw new Tn("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function fw(e,t,n,s){const r=Ze.checkDivRoundUpIf(n.shln(64),t,!s),i=s?e.add(r):e.sub(r);if(i.lt(new U(au))||i.gt(new U(ou)))throw new Tn("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return i}function wE(e,t,n,s){return s?dw(e,t,n,!0):fw(e,t,n,!0)}function bE(e,t,n,s){return s?fw(e,t,n,!1):dw(e,t,n,!1)}function Ah(e,t,n,s){const r=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(de)||r.eq(de))return de;let i;if(s){const o=new U(n).mul(new U(r)).shln(64),a=t.mul(e),c=o.div(a);i=o.mod(a).eq(de)?c:c.add(qr)}else{const o=new U(n).mul(new U(r));i=o.and(Xa).gt(de)?o.shrn(64).add(qr):o.shrn(64)}return i}function Eh(e,t,n,s){const r=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(de)||r.eq(de))return de;let i;if(s)i=n.mul(r).shrn(64);else{const o=n.mul(r).shln(64),a=t.mul(e);i=o.div(a)}return i}function hw(e,t,n,s,r,i){if(n===de)return{amountIn:de,amountOut:de,nextSqrtPrice:t,feeAmount:de};const o=e.gte(t);let a,c,u,l;if(i){const f=Ze.checkMulDivFloor(s,Ze.checkUnsignedSub(oi,r),oi,64),h=Ah(e,t,n,o);h.gt(f)?(a=f,l=Ze.checkUnsignedSub(s,f),u=wE(e,n,f,o)):(a=h,l=Ze.checkMulDivCeil(a,r,oi.sub(r),64),u=t),c=Eh(e,u,n,o)}else{const f=Eh(e,t,n,o);f.gt(s)?(c=s,u=bE(e,n,s,o)):(c=f,u=t),a=Ah(e,u,n,o),l=Ze.checkMulDivCeil(a,r,oi.sub(r),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:u,feeAmount:l}}function _E(e,t,n,s,r){let i=n,o=s.liquidity,{currentSqrtPrice:a}=s;const c={amountIn:de,amountOut:de,feeAmount:de,refAmount:de,nextSqrtPrice:de,crossTickNum:0};let u,l;const f=Ja.getDefaultSqrtPriceLimit(e);for(const h of r){if(e){if(s.currentTickIndex<h.index)continue}else if(s.currentTickIndex>h.index)continue;if(h===null)continue;e&&f.gt(h.sqrtPrice)||!e&&f.lt(h.sqrtPrice)?u=f:u=h.sqrtPrice;const g=hw(a,u,o,i,new U(s.feeRate),t);if(g.amountIn.eq(de)||(i=t?i.sub(g.amountIn.add(g.feeAmount)):i.sub(g.amountOut)),c.amountIn=c.amountIn.add(g.amountIn),c.amountOut=c.amountOut.add(g.amountOut),c.feeAmount=c.feeAmount.add(g.feeAmount),g.nextSqrtPrice.eq(h.sqrtPrice)?(l=e?h.liquidityNet.mul(new U(-1)):h.liquidityNet,o=l.gt(de)?o.add(l):o.sub(l.abs()),a=h.sqrtPrice):a=g.nextSqrtPrice,c.crossTickNum+=1,i.eq(de))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function ai(e,t,n){const s=U.min(e,t),r=U.max(e,t),i=Ze.fromX64_BN(n.mul(r).mul(s)),o=r.sub(s);return i.div(o)}function ci(e,t,n){const s=U.min(e,t),i=U.max(e,t).sub(s);return n.shln(64).div(i)}var ts=class{constructor(){}static getFeeRate(e){return Ya.fromFraction(e,1e6)}static updateFeeRate(e,t,n,s,r){const i=Ze.checkMulDivCeil(t,new U(s),oi,64),o=n===0?de:Ze.checkMulDivFloor(t,new U(n),oi,64),a=t.mul(i).mul(o);if(r?e.feeProtocolCoinA=e.feeProtocolCoinA.add(i):e.feeProtocolCoinB=e.feeProtocolCoinB.add(i),a.eq(de)||e.liquidity.eq(de))return{refFee:o,clmm:e};const c=a.shln(64).div(e.liquidity);return r?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:o,clmm:e}}static getProtocolFeeRate(e){return Ya.fromFraction(e,1e4)}static getCoinAmountFromLiquidity(e,t,n,s,r){const i=new Ln(e.toString()),o=new Ln(t.toString()),a=new Ln(n.toString()),c=new Ln(s.toString());let u,l;return t.lt(n)?(u=Ze.toX64_Decimal(i).mul(c.sub(a)).div(a.mul(c)),l=new Ln(0)):t.lt(s)?(u=Ze.toX64_Decimal(i).mul(c.sub(o)).div(o.mul(c)),l=Ze.fromX64_Decimal(i.mul(o.sub(a)))):(u=new Ln(0),l=Ze.fromX64_Decimal(i.mul(c.sub(a)))),r?{coinA:new U(u.ceil().toString()),coinB:new U(l.ceil().toString())}:{coinA:new U(u.floor().toString()),coinB:new U(l.floor().toString())}}static estimateLiquidityFromcoinAmounts(e,t,n,s){if(t>n)throw new Error("lower tick cannot be greater than lower tick");const r=Tt.sqrtPriceX64ToTickIndex(e),i=Tt.tickIndexToSqrtPriceX64(t),o=Tt.tickIndexToSqrtPriceX64(n);if(r<t)return ai(i,o,s.coinA);if(r>=n)return ci(o,i,s.coinB);const a=ai(e,o,s.coinA),c=ci(e,i,s.coinB);return U.min(a,c)}static estLiquidityAndcoinAmountFromOneAmounts(e,t,n,s,r,i,o){const a=Tt.sqrtPriceX64ToTickIndex(o),c=Tt.tickIndexToSqrtPriceX64(e),u=Tt.tickIndexToSqrtPriceX64(t);let l;if(a<e){if(!s)throw new Error("lower tick cannot calculate liquidity by coinB");l=ai(c,u,n)}else if(a>t){if(s)throw new Error("upper tick cannot calculate liquidity by coinA");l=ci(u,c,n)}else s?l=ai(o,u,n):l=ci(o,c,n);const f=ts.getCoinAmountFromLiquidity(l,o,c,u,r),h=f.coinA.mul(new U(1+i)),g=f.coinB.mul(new U(1+i));return{tokenMaxA:h,tokenMaxB:g,liquidityAmount:l}}static estCoinAmountsFromTotalAmount(e,t,n,s,r,i){const{ratioA:o,ratioB:a}=ts.calculateDepositRatioFixTokenA(e,t,n);console.log({ratioA:o,ratioB:a});const c=Ye(s).mul(o).div(r),u=Ye(s).mul(a).div(i);return{amountA:c,amountB:u}}static calculateDepositRatioFixTokenA(e,t,n){const s=new U(1),{tokenMaxB:r}=ts.estLiquidityAndcoinAmountFromOneAmounts(e,t,s,!0,!0,0,n),i=Tt.sqrtPriceX64ToPrice(n,0,0),o=Ye(s.toString()).mul(i),a=o.add(r.toString()),c=o.div(a),u=Ye(r.toString()).div(a);return{ratioA:c,ratioB:u}}},TE=class{constructor(e){this._cache={},this._sdk=e}get sdk(){return this._sdk}async fetchAccountResource(e,t,n=0){let s=this._cache[e+t];if(s!=null&&s.getCacheData())return s.value;const r=await this.sdk.Resources.fetchAccountResource(e,t);return s=new iu(r,n),this._cache[e+t]=s,r}calculateRates(e){const{currentPool:t}=e,n=sw(t);let s;e.a2b?s=e.swapTicks.sort((f,h)=>h.index-f.index):s=e.swapTicks.sort((f,h)=>f.index-h.index);const r=_E(e.a2b,e.byAmountIn,e.amount,n,s);let i=!1;e.byAmountIn?i=r.amountIn.lt(e.amount):i=r.amountOut.lt(e.amount);const o=Ja.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&r.nextSqrtPrice.lt(o)&&(i=!0),!e.a2b&&r.nextSqrtPrice.gt(o)&&(i=!0);let a=0;r.crossTickNum>6&&r.crossTickNum<40&&(a=22e3*(r.crossTickNum-6)),r.crossTickNum>40&&(i=!0);const c=Tt.sqrtPriceX64ToPrice(n.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),u=Tt.sqrtPriceX64ToPrice(r.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),l=Math.abs(c-u)/c*100;return{estimatedAmountIn:r.amountIn,estimatedAmountOut:r.amountOut,estimatedEndSqrtPrice:r.nextSqrtPrice,estimatedFeeAmount:r.feeAmount,isExceed:i,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:l}}transformSwapData(e){const{modules:t}=this._sdk.sdkOptions.networkOptions,n=e.filter(i=>i.type!=="write_resource"?!1:i.data.type===`${t.ClmmIntegrate}::calculator::CalculatedSwapResult`);return n.length===0?[]:n[0].data.data.data||[]}async preswap(e){const{modules:t,simulationAccount:n}=this.sdk.sdkOptions.networkOptions,s=new Ot(this.sdk.sdkOptions.rpcUrl),r=`${t.ClmmIntegrate}::scripts`,i="calculate_swap_result",o=[new k.TypeTagStruct(k.StructTag.fromString(e.pool.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.pool.coinTypeB))],a=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool.poolAddress)),H.bcsSerializeBool(e.a2b),H.bcsSerializeBool(e.by_amount_in),H.bcsSerializeUint64(BigInt(e.amount))],c=new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i,o,a)),u=Bi(n.address),l=await s.generateRawTransaction(u,c),f=Bi(n.pubkey),h=new k.Ed25519PublicKey(f.toUint8Array()),g=await s.simulateTransaction(h,l),w=this.transformSwapData(g[0].changes),b=Tt.sqrtPriceX64ToPrice(new U(e.pool.current_sqrt_price),e.decimalsA,e.decimalsB).toNumber(),T=Tt.sqrtPriceX64ToPrice(new U(w.after_sqrt_price),e.decimalsA,e.decimalsB).toNumber(),R=Math.abs(b-T)/b*100;return{estimatedAmountIn:w.amount_in&&w.fee_amount?new U(w.amount_in).add(new U(w.fee_amount)).toString():"",estimatedAmountOut:w.amount_out,estimatedEndSqrtPrice:w.after_sqrt_price,estimatedFeeAmount:w.fee_amount,isExceed:w.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.by_amount_in,priceImpactPct:R}}createSwapTransactionPayload(e,t=!1){const{modules:n}=this.sdk.sdkOptions.networkOptions,s=`${n.LiquidswapDeployer}::${Ur}`,r="swap",i=Ja.getDefaultSqrtPriceLimit(e.a_to_b);if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_addr)),H.bcsSerializeBool(e.a_to_b),H.bcsSerializeBool(e.by_amount_in),H.bcsSerializeUint64(BigInt(e.amount)),H.bcsSerializeUint64(BigInt(e.amount_limit)),H.bcsSerializeU128(BigInt(i.toString())),H.bcsSerializeStr(e.partner)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const o=[e.pool_addr,e.a_to_b,e.by_amount_in,e.amount,e.amount_limit,i.toString(),e.partner],a=[e.coinTypeA,e.coinTypeB];return{type:"entry_function_payload",function:it(s,r),type_arguments:a,arguments:o}}},xE=class{constructor(e){this._sdk=e}get sdk(){return this._sdk}createAddLiquidityTransactionPayload(e,t=!1){const{modules:n}=this.sdk.sdkOptions.networkOptions,s=!("delta_liquidity"in e),r=`${n.LiquidswapDeployer}::${Ur}`,i=s?"add_liquidity_fix_token":"add_liquidity";if(t){const l=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB))],f=s?[H.bcsToBytes(k.AccountAddress.fromHex(e.pool)),H.bcsSerializeUint64(Number(e.amount_a)),H.bcsSerializeUint64(Number(e.amount_b)),H.bcsSerializeBool(e.fix_amount_a),H.bcsSerializeUint64(BigInt.asUintN(64,BigInt(e.tick_lower))),H.bcsSerializeUint64(BigInt.asUintN(64,BigInt(e.tick_upper))),H.bcsSerializeBool(e.is_open),H.bcsSerializeUint64(e.index)]:[H.bcsToBytes(k.AccountAddress.fromHex(e.pool)),H.bcsSerializeU128(e.delta_liquidity.toNumber()),H.bcsSerializeUint64(Number(e.max_amount_a)),H.bcsSerializeUint64(Number(e.max_amount_b)),H.bcsSerializeUint64(BigInt.asUintN(64,BigInt(e.tick_lower))),H.bcsSerializeUint64(BigInt.asUintN(64,BigInt(e.tick_upper))),H.bcsSerializeBool(e.is_open),H.bcsSerializeUint64(e.index)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i,l,f))}const o=BigInt.asUintN(64,BigInt(e.tick_lower)).toString(),a=BigInt.asUintN(64,BigInt(e.tick_upper)).toString(),c=s?[e.pool,e.amount_a,e.amount_b,e.fix_amount_a,o,a,e.is_open,e.index]:[e.pool,e.delta_liquidity.toString(),String(e.max_amount_a),String(e.max_amount_b),o,a,e.is_open,e.index],u=[e.coinTypeA,e.coinTypeB];return{type:"entry_function_payload",function:it(r,i),type_arguments:u,arguments:c}}removeLiquidityTransactionPayload(e,t=!1){B2(e.delta_liquidity.gtn(0));const{modules:n}=this.sdk.sdkOptions.networkOptions,s=`${n.LiquidswapDeployer}::${Ur}`,r=`${n.ClmmIntegrate}::${uw}`,i=["remove_liquidity","remove_all_liquidity","remove_all_liquidity_for_two","remove_all_liquidity_for_three"];let o,a,c=[];if(e.rewards_num===0){if(t){const u=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB))],l=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool)),H.bcsSerializeU128(e.delta_liquidity.toNumber()),H.bcsSerializeUint64(e.min_amount_a),H.bcsSerializeUint64(e.min_amount_b),H.bcsSerializeUint64(e.pos_index),H.bcsSerializeBool(e.is_close)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,i[0],u,l))}o=it(s,i[0]),a=[e.coinTypeA,e.coinTypeB],c=[e.pool,e.delta_liquidity.toNumber(),e.min_amount_a,e.min_amount_b,e.pos_index,e.is_close]}else if(e.rewards_num===1){if(t){const u=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeC))],l=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool)),H.bcsSerializeU128(e.delta_liquidity.toNumber()),H.bcsSerializeUint64(e.min_amount_a),H.bcsSerializeUint64(e.min_amount_b),H.bcsSerializeUint64(e.pos_index),H.bcsSerializeBool(e.is_close)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i[1],u,l))}o=it(r,i[1]),a=[e.coinTypeA,e.coinTypeB,e.coinTypeC],c=[e.pool,e.delta_liquidity.toNumber(),e.min_amount_a,e.min_amount_b,e.pos_index,e.is_close]}else if(e.rewards_num===2){if(t){const u=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeC)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeD))],l=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool)),H.bcsSerializeU128(e.delta_liquidity.toNumber()),H.bcsSerializeUint64(e.min_amount_a),H.bcsSerializeUint64(e.min_amount_b),H.bcsSerializeUint64(e.pos_index),H.bcsSerializeBool(e.is_close)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i[2],u,l))}o=it(r,i[2]),a=[e.coinTypeA,e.coinTypeB,e.coinTypeC,e.coinTypeD],c=[e.pool,e.delta_liquidity.toNumber(),e.min_amount_a,e.min_amount_b,e.pos_index,e.is_close]}else{if(t){const u=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeC)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeD)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeE))],l=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool)),H.bcsSerializeU128(e.delta_liquidity.toNumber()),H.bcsSerializeUint64(e.min_amount_a),H.bcsSerializeUint64(e.min_amount_b),H.bcsSerializeUint64(e.pos_index),H.bcsSerializeBool(e.is_close)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i[3],u,l))}o=it(r,i[3]),a=[e.coinTypeA,e.coinTypeB,e.coinTypeC,e.coinTypeD,e.coinTypeE],c=[e.pool,e.delta_liquidity.toNumber(),e.min_amount_a,e.min_amount_b,e.pos_index,e.is_close]}return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}closePositionTransactionPayload(e,t=!1){const{modules:n}=this.sdk.sdkOptions.networkOptions,s=`${n.LiquidswapDeployer}::${Ur}`,r="close_position";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_address)),H.bcsSerializeUint64(e.pos_index)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coinTypeA,e.coinTypeB],a=[e.pool_address,e.pos_index];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}collectFeeTransactionPayload(e,t=!1){const{modules:n}=this.sdk.sdkOptions.networkOptions,s=`${n.LiquidswapDeployer}::${Ur}`,r="collect_fee";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool)),H.bcsSerializeUint64(e.pos_index)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coinTypeA,e.coinTypeB],a=[e.pool,e.pos_index];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}};function vE(e){let t="";const s=new su(e).parseTypeTag().value.type_args;if(s.length>0){const r=s[0];r.value.name.value===O2||r.value.name.value===cw?t=C2(r).lpAddress:t=it(ot.fromUint8Array(r.value.address.address).toShortString(),r.value.module_name.value,r.value.name.value,[])}return t}var SE=5*60*1e3,ks=24*60*60*1e3;function kh(e){return Date.parse(new Date().toString())+e}var AE=class{constructor(e){this._cache={},this._sdk=e}get sdk(){return this._sdk}async getPoolImmutablesResource(e=!1){const t=this._sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer,n=`${t}_getMmutablesPools`,s=this.getCacheData(n);let r;if(!e&&s!=null)r=s;else{const o=it(t,ow,aw),a=await this.fetchAccountResource(t,o);r=JSON.parse(JSON.stringify(a==null?void 0:a.data.data)),this.updateCache(n,r,ks)}return r.data}buildPoolImmutables(e,t,n){const s=n.key,r=it(s.coin_type_a.account_address,Ps(s.coin_type_a.module_name),Ps(s.coin_type_a.struct_name)),i=it(s.coin_type_b.account_address,Ps(s.coin_type_b.module_name),Ps(s.coin_type_b.struct_name)),o=it(it(t,I2,$2),[r,i]);return{coinTypeA:r,coinTypeB:i,poolType:o,poolAddress:e,tickSpacing:s.tick_spacing}}async getPoolImmutables(e=[],t=0,n=100,s=!0){const r=this._sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer,i=[],o=await this.getPoolImmutablesResource(s),a=e.length>0;for(let c=0;c<o.length;c+=1){const u=o[c],l=u.value;if(!(a&&!e.includes(l))){if(!a){const f=Number(c);if(f<t||f>=t+n)continue}i.push(this.buildPoolImmutables(l,r,u))}}return i}async getPools(e=[],t=0,n=100){const s=[],r=(await this.sdk.getGlobalConfig()).is_pause,i=await this.getPoolImmutables(e,t,n,!1);for(let o=0;o<i.length;o+=1){const a=i[o],c=await this.getPoolState(a.poolAddress,a.poolType,r),u={...a,...c};s.push(u);const l=`${a.poolAddress}_pool`;this.updateCache(l,u,ks)}return s}async getPool(e,t=!0){const n=`${e}_pool`,s=this.getCacheData(n);let r;if(s!==null&&!t&&(r=s),r==null)return(await this.getPools([e]))[0];const i=(await this.sdk.getGlobalConfig(!0)).is_pause,o=await this.getPoolState(e,r.poolType,i),a={...r,...o};return this.updateCache(n,a,ks),a}async getPoolState(e,t,n,s=!0){const r=`${e}_${t}getPool`;if(!s){const l=this.getCacheData(r);if(l!==null)return l}const i=await this.fetchAccountResource(e,t),o=JSON.parse(JSON.stringify(i==null?void 0:i.data)),a=o.rewarder_infos,c=[];a.forEach(l=>{const f=it(l.coin_type.account_address,Ps(l.coin_type.module_name),Ps(l.coin_type.struct_name)),h=Ze.fromX64(new U(l.emissions_per_second)),g=Math.floor(h.toNumber()*60*60*24);c.push({...l,coinAddress:f,emissionsEveryDay:g})});const u={coinAmountA:o.coin_a.value,coinAmountB:o.coin_b.value,current_sqrt_price:o.current_sqrt_price,current_tick_index:Number(BigInt.asIntN(64,BigInt(o.current_tick_index.bits)).toString()),fee_growth_global_a:o.fee_growth_global_a,fee_growth_global_b:o.fee_growth_global_b,fee_protocol_coin_a:o.fee_protocol_coin_a,fee_protocol_coin_b:o.fee_protocol_coin_b,fee_rate:o.fee_rate,liquidity:o.liquidity,index:o.index,positionIndex:o.position_index,tick_indexes_handle:o.tick_indexes.handle,ticks_handle:o.ticks.handle,positions_handle:o.positions.handle,collectionName:o.collection_name,uri:o.uri,is_pause:n||o.is_pause,rewarder_infos:c,rewarder_last_updated_time:o.rewarder_last_updated_time};return this.updateCache(r,u,ks),u}async getTickDataByIndex(e,t){const n=await this._sdk.client.getTableItem(e,{key_type:`${this.sdk.sdkOptions.networkOptions.modules.IntegerMate}::i64::I64`,value_type:`${this.sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer}::pool::Tick`,key:U2(t)}),s=JSON.parse(JSON.stringify(n));return{index:s.index,sqrtPrice:s.sqrt_price,liquidityGross:s.liquidity_gross,liquidityNet:s.liquidity_net,feeGrowthOutsideA:s.fee_growth_outside_a,feeGrowthOutsideB:s.fee_growth_outside_b,rewardersGrowthOutside:s.rewarders_growth_outside}}async getPoolLowerAndUpperTicks(e,t){const n=[],s=[],r=t.ticks_handle,i=await this.sdk.Resources.getPositionList(e,[t]);for(const o of i){const a=await this.sdk.Resources.getTickDataByIndex(r,o.tick_lower_index),c=await this.sdk.Resources.getTickDataByIndex(r,o.tick_upper_index);n.push(a),s.push(c)}return[n,s]}async getPositionInfoByIndex(e,t){const n=await this._sdk.client.getTableItem(e,{key_type:"u64",value_type:`${this.sdk.sdkOptions.networkOptions.modules.LiquidswapDeployer}::pool::Position`,key:t.toString()}),s=JSON.parse(JSON.stringify(n));return{name:"",pool:s.pool,liquidity:s.liquidity,tick_lower_index:BigInt.asIntN(64,BigInt(s.tick_lower_index.bits)).toString(),tick_upper_index:BigInt.asIntN(64,BigInt(s.tick_upper_index.bits)).toString(),fee_growth_inside_a:s.fee_growth_inside_a,fee_growth_inside_b:s.fee_growth_inside_b,fee_owed_a:s.fee_owed_a,fee_owed_b:s.fee_owed_b,reward_amount_owed_0:s.rewarder_infos[0].amount_owed,reward_amount_owed_1:s.rewarder_infos[1].amount_owed,reward_amount_owed_2:s.rewarder_infos[2].amount_owed,reward_growth_inside_0:s.rewarder_infos[0].growth_inside,reward_growth_inside_1:s.rewarder_infos[1].growth_inside,reward_growth_inside_2:s.rewarder_infos[2].growth_inside,index:t}}createPositionName(e,t){return`Cetus LP | Pool${e}-${t}`}async getPositionInfo(e,t,n=!0){if(Z2(t)){const s=await this.getPositionInfoByIndex(e.positions_handle,Number(t));return s.name=this.createPositionName(e.index,s.index),s}return this.getPositionInfoByTokenName(e.poolAddress,e.positions_handle,e.collectionName,t,n)}async getPositionIndex(e,t,n,s=!1){const r=`${e}_${t}_${n}_getPositionIndex`;if(!s){const a=this.getCacheData(r);if(a!==null)return a}const i=await this._sdk.tokenClient.getTokenData(e,t,n),o=JSON.parse(JSON.stringify(i)).default_properties.data.index.value;return this.updateCache(r,o,ks),o}async getPositionInfoByTokenName(e,t,n,s,r=!0){const i=`${e}_${n}_${s}_getPositionInfo`;if(!r){const c=this.getCacheData(i);if(c!==null)return c}const o=await this.getPositionIndex(e,n,s,!1),a=await this.getPositionInfoByIndex(t,o);return a.name=s,this.updateCache(i,a,ks),a}async getGlobalConfig(e,t=!0){const n=`${e}_getGlobalConfig`;if(!t){const o=this.getCacheData(n);if(o!==null)return o}const s=await this.fetchAccountResource(e,it(e,"config","GlobalConfig")),r=JSON.parse(JSON.stringify(s)).data,i={protocol_fee_rate:r.protocol_fee_rate,is_pause:r.is_pause};return this.updateCache(n,i,ks),i}async getSpecifyCoinInfos(e){const t=[];for(const n of e){const s=`${n}_getCoinInfos`,r=this.getCacheData(s);if(r!==null)t.push(r);else{const i=$d(n).address,o=await this._sdk.Resources.fetchAccountResource(i,j2(n));if(o!=null){const a={coinAddress:n,...o.data};t.push(a),this.updateCache(s,a,ks)}}}return t}async getCoinInfos(e,t=!0){const n=`${e}_getCoinInfos`;if(!t){const i=this.getCacheData(n);if(i!==null)return i}const s=await this.fetchAccountResources(e),r=[];return s==null||s.forEach(i=>{if(i.type.startsWith(rw)){const o=vE(i.type);o.length>0&&r.push({coinAddress:o,...i.data})}}),this.updateCache(n,r,ks),r}async getCoinStores(e,t=!0){const n=`${e}_getCoinStores`;if(!t){const i=this.getCacheData(n);if(i!==null)return i}const s=await this.fetchAccountResources(e),r=[];return s==null||s.forEach(i=>{if(i.type.startsWith(iw)){const o=bh(i.type);o.length>0&&r.push({coinAddress:o,...i.data})}}),this.updateCache(n,r,ks),r}async getCoinStore(e,t){const n=await this.fetchAccountResource(e,H2(t));if(n){const s=bh(n.type);if(s.length>0)return{coinAddress:s,...n.data}}return null}async getPositionList(e,t){const n=[];if(t.length===0)return[];const s=await this.getFilterTokenEvent(e);for(let r=0;r<s.length;r++){const i=s[r];try{for(const o of t)if(i.creator===o.poolAddress){const a=await this.getPositionInfoByTokenName(i.creator,o.positions_handle,i.collection,i.name);a.pool.length>0&&n.push({...i,...a})}}catch(o){console.log(o)}}return n}async getCollectionList(e){return await this.getFilterTokenEvent(e)}async getFilterTokenEvent(e){const t=[],n=[];let s=[];try{s=await this._sdk.client.getEventsByEventHandle(e,mh,"deposit_events")}catch(i){console.log(i)}s.forEach(i=>{t.push({key:`${i.data.id.token_data_id.creator}_${i.data.id.token_data_id.name}`,creator:i.data.id.token_data_id.creator,name:i.data.id.token_data_id.name,collection:i.data.id.token_data_id.collection,count:0})});let r=[];try{r=await this._sdk.client.getEventsByEventHandle(e,mh,"withdraw_events")}catch(i){console.log(i)}return r.forEach(i=>{if(i.type===R2){for(const o of t)if(o.count===0&&o.key===`${i.data.id.token_data_id.creator}_${i.data.id.token_data_id.name}`){o.count-=1;break}}}),t.forEach(i=>{i.count===0&&n.push({...i})}),n}async fetchAccountResource(e,t){var n;try{return await this._sdk.client.getAccountResource(e,t)}catch(s){if(xh(s)&&((n=s.response)==null?void 0:n.status)===404)return null;throw s}}async fetchAccountResources(e){var t;try{return await this._sdk.client.getAccountResources(e)}catch(n){if(xh(n)&&((t=n.response)==null?void 0:t.status)===404)return null;throw n}}updateCache(e,t,n=SE){let s=this._cache[e];s?(s.overdueTime=kh(n),s.value=t):s=new iu(t,kh(n)),this._cache[e]=s}getCacheData(e){const t=this._cache[e];return t!==void 0&&t.getCacheData()?t.value:null}},EE=class{constructor(e){this._sdk=e}get sdk(){return this._sdk}creatPoolTransactionPayload(e,t=!1){const{modules:n}=this.sdk.sdkOptions.networkOptions,s=e.delta_liquidity.gt(de),r=s?`${n.LiquidswapDeployer}::${uw}`:`${n.LiquidswapDeployer}::${Ur}`,i=s?"create_and_add_liquidity":"create_pool";if(t){const u=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB))],l=s?[H.bcsSerializeUint64(e.tick_spacing),H.bcsSerializeU128(BigInt(e.initialize_sqrt_price.toString())),H.bcsSerializeStr(e.uri),H.bcsSerializeU128(BigInt(e.delta_liquidity.toString())),H.bcsSerializeUint64(BigInt(e.max_amount_a.toString())),H.bcsSerializeUint64(BigInt(e.max_amount_b.toString())),H.bcsSerializeUint64(BigInt.asUintN(64,BigInt(e.tick_lower))),H.bcsSerializeUint64(BigInt.asUintN(64,BigInt(e.tick_upper)))]:[H.bcsSerializeUint64(e.tick_spacing),H.bcsSerializeU128(BigInt(e.initialize_sqrt_price.toString())),H.bcsSerializeStr(e.uri)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i,u,l))}const o=it(r,i),a=[e.coinTypeA,e.coinTypeB],c=s?[e.tick_spacing.toString(),e.initialize_sqrt_price.toString(),e.uri.toString(),e.delta_liquidity.toString(),e.max_amount_a.toString(),e.max_amount_b.toString(),BigInt.asUintN(64,BigInt(e.tick_lower)).toString(),BigInt.asUintN(64,BigInt(e.tick_upper)).toString()]:[e.tick_spacing.toString(),e.initialize_sqrt_price.toString(),e.uri.toString()];return{type:"entry_function_payload",function:o,type_arguments:a,arguments:c}}},kE=class{constructor(e){this._sdk=e,this.growthGlobal=[de,de,de]}get sdk(){return this._sdk}async listRewarderInfosFromClmmpool(e){const t=await this.sdk.Resources.getPool(e),n=[];for(const s of t.rewarder_infos)n.push(s);return n}async emissionsEveryDay(e){const t=await this.listRewarderInfosFromClmmpool(e);if(!t)return null;const n=[];for(const s of t){const r=Ze.fromX64(new U(s.emissions_per_second));n.push({emissions:Math.floor(r.toNumber()*60*60*24),coin_address:s.coinAddress})}return n}async collectRewarderAmount(e,t){const n=await this.sdk.Resources.getPositionInfo(e,t);return n?{reward_amount_owed_0:n.reward_amount_owed_0,reward_amount_owed_1:n.reward_amount_owed_1,reward_amount_owed_2:n.reward_amount_owed_2}:null}async updatePoolRewarder(e,t){const n=await this.sdk.Resources.getPool(e),s=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=t,n.liquidity===0||t.eq(s))return n;const r=t.div(new U(1e3)).sub(new U(s)).add(new U(15)),i=n.rewarder_infos;for(let o=0;o<i.length;o+=1){const a=i[o],c=Ze.checkMulDivFloor(r,new U(a.emissions_per_second),new U(n.liquidity),128);this.growthGlobal[o]=new U(a.growth_global).add(new U(c))}return n}async posRewardersAmount(e,t,n,s){const r=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(e,new U(r)),o=await this.sdk.Resources.getPositionInfo(i,t),a=parseInt(o.tick_lower_index,10),c=parseInt(o.tick_upper_index,10),u=lE(i,n,s,a,c,this.growthGlobal),l=[],f=[];if(u.length>0){const h=Ze.subUnderflowU128(u[0],new U(o.reward_growth_inside_0)),g=Ze.checkMulShiftRight(new U(o.liquidity),h,64,256);l.push(u[0]),f.push({amount_owed:new U(o.reward_amount_owed_0).add(g),coin_address:i.rewarder_infos[0].coinAddress})}if(u.length>1){const h=Ze.subUnderflowU128(u[1],new U(o.reward_growth_inside_1)),g=Ze.checkMulShiftRight(new U(o.liquidity),h,64,256);l.push(u[1]),f.push({amount_owed:new U(o.reward_amount_owed_1).add(g),coin_address:i.rewarder_infos[1].coinAddress})}if(u.length>2){const h=Ze.subUnderflowU128(u[2],new U(o.reward_growth_inside_2)),g=Ze.checkMulShiftRight(new U(o.liquidity),h,64,256);l.push(u[2]),f.push({amount_owed:new U(o.reward_amount_owed_2).add(g),coin_address:i.rewarder_infos[2].coinAddress})}return f}async poolRewardersAmount(e,t,n,s){const r=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(t,new U(r)),o=await this.sdk.Resources.getPositionList(e,[i]),a=[de,de,de];for(let c=0;c<o.length;c+=1){const u=await this.posRewardersAmount(t,o[c],n[c],s[c]);for(let l=0;l<3;l+=1)a[l]=a[l].add(u[l].amount_owed)}return a}collectPosRewarderTransactionPayload(e,t=!1){const{modules:n}=this.sdk.sdkOptions.networkOptions,s=`${n.LiquidswapDeployer}::${Ur}`,r="collect_rewarder";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeC))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_address)),H.bcsSerializeU8(e.index),H.bcsSerializeUint64(e.pos_index)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coinTypeA,e.coinTypeB,e.coinTypeC],a=[e.pool_address,e.index,e.pos_index];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}collectPoolRewarderTransactionPayload(e,t=!1){if(e.rewarder_nums===1){const r={pool_address:e.pool_address,index:0,pos_index:e.pos_index,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,coinTypeC:e.coinTypeC};return this.collectPosRewarderTransactionPayload(r,t)}const{modules:n}=this.sdk.sdkOptions.networkOptions,s=`${n.ClmmIntegrate}::${ll}`;if(e.rewarder_nums===2){const r="collect_rewarder_for_two";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeC)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeD))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_address)),H.bcsSerializeUint64(e.pos_index)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coinTypeA,e.coinTypeB,e.coinTypeC,e.coinTypeD],a=[e.pool_address,e.pos_index];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}if(e.rewarder_nums===3){const r="collect_rewarder_for_three";if(t){const c=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeC)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeD)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeE))],u=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool_address)),H.bcsSerializeUint64(e.pos_index)];return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(s,r,c,u))}const i=it(s,r),o=[e.coinTypeA,e.coinTypeB,e.coinTypeC,e.coinTypeD,e.coinTypeE],a=[e.pool_address,e.pos_index];return{type:"entry_function_payload",function:i,type_arguments:o,arguments:a}}}},BE=5*60*1e3,ra=24*60*60*1e3;function Bh(e){return Date.parse(new Date().toString())+e}var PE=class{constructor(e){this._cache={},this._sdk=e}get sdk(){return this._sdk}async getOwnerTokenList(e,t,n=!1){const s="getAllRegisteredTokenList";if(!n){const l=this.getCacheData(s);if(l!==null)return l}const{modules:r}=this._sdk.sdkOptions.networkOptions,i=`${r.TokenDeployer}::coin_list`,o="fetch_full_list",a=new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(i,o,[],[H.bcsToBytes(k.AccountAddress.fromHex(t))])),c=await sa(new Ot(this.sdk.sdkOptions.rpcUrl),e,a),u=this.transformTokenData(c.changes);return this.updateCache(s,u,ra),u}async getTokenListByCoinType(e,t=0,n=20){const{fraphQLUrl:s}=this._sdk.sdkOptions;if(!s)throw Error("The fraphQLUrl is not configured in the SDK");const r={query:`query MyQuery {
  coin_infos(
  limit: ${n}, offset: ${t},  order_by: {name: desc}, where: {  coin_type: {_regex: "${e}"}}
  ) {
    coin_type
    symbol
    name
    decimals
    creator_address
    coin_type_hash
  }
}
`,variables:null,operationName:"MyQuery"},i=await xi.post(s,r),o=[];return i.data.data.coin_infos.forEach(a=>{o.push({address:a.coin_type,symbol:a.symbol,official_symbol:a.symbol,decimals:a.decimals,name:a.name,coingecko_id:"",project_url:"",logo_url:""})}),o}async getSpecifyTokenListByCache(e){const t="getAllRegisteredTokenList",n=this.getCacheData(t),s=[];if(n!==null){const r=n;for(const i of e)for(const o of r)if(i===o.address){s.push(o);continue}}return s}async getAllRegisteredTokenList(e,t=!1){const n="getAllRegisteredTokenList";if(!t){const l=this.getCacheData(n);if(l!==null)return l}const{modules:s}=this._sdk.sdkOptions.networkOptions,r=`${s.TokenDeployer}::coin_list`,i="fetch_all_registered_coin_info",o=new Ot(this.sdk.sdkOptions.rpcUrl),a=new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i,[],[])),c=await sa(o,e,a),u=this.transformTokenData(c.changes);return this.updateCache(n,u,ra),u}transformTokenData(e){const t=[],{modules:n}=this._sdk.sdkOptions.networkOptions,s=e.filter(o=>o.type!=="write_resource"?!1:o.data.type===`${n.TokenDeployer}::coin_list::CoinList<${n.TokenDeployer}::coin_list::CoinInfo>`);if(s.length===0)return t;const i=s[0].data.data;return"full_list"in i&&i.full_list.value_list.forEach(o=>{const a={...o},c=o.extensions.data;for(const u of c){if(u.key==="labels")try{u.value=JSON.parse(decodeURIComponent(gf.decode(u.value)))}catch{}a[u.key]=u.value}t.push(a)}),t}async getAllRegisteredPoolList(e,t=!1){const n="getAllRegisteredPoolList";if(!t){const l=this.getCacheData(n);if(l!==null)return l}const{modules:s}=this._sdk.sdkOptions.networkOptions,r=`${s.TokenDeployer}::lp_list`,i="fetch_all_registered_coin_info",o=new Ot(this.sdk.sdkOptions.rpcUrl),a=new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i,[],[])),c=await sa(o,e,a),u=this.transformPoolData(c.changes);return this.updateCache(n,u,ra),u}async getOwnerPoolList(e,t,n=!1){const s="getAllRegisteredPoolList";if(!n){const l=this.getCacheData(s);if(l!==null)return l}const{modules:r}=this._sdk.sdkOptions.networkOptions,i=`${r.TokenDeployer}::lp_list`,o="fetch_full_list",a=new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(i,o,[],[H.bcsToBytes(k.AccountAddress.fromHex(t))])),c=await sa(new Ot(this.sdk.sdkOptions.rpcUrl),e,a),u=this.transformPoolData(c.changes);return this.updateCache(s,u,ra),u}transformPoolData(e){const t=[],{modules:n}=this._sdk.sdkOptions.networkOptions,s=e.filter(o=>o.type!=="write_resource"?!1:o.data.type===`${n.TokenDeployer}::lp_list::PoolList<${n.TokenDeployer}::lp_list::PoolInfo>`);if(s.length===0)return t;const i=s[0].data.data;return"full_list"in i&&i.full_list.value_list.forEach(o=>{const a={...o},c=o.extensions.data;for(const u of c){if(u.key==="labels")try{u.value=JSON.parse(decodeURIComponent(gf.decode(u.value)))}catch{}a[u.key]=u.value}t.push(a)}),t}async getOwnerWarpPoolList(e,t,n=!1){const s=await this.getOwnerTokenList(t,e,n),r=await this.getOwnerPoolList(t,e,n),i=[];for(const o of r){for(const a of s)a.address===o.coin_a_address&&(o.coinA=a),a.address===o.coin_b_address&&(o.coinB=a);i.push(o)}return i}async getWarpPoolList(e,t=!1){const n=await this.getAllRegisteredTokenList(e,t),s=await this.getAllRegisteredPoolList(e,t),r=[];for(const i of s){for(const o of n)o.address===i.coin_a_address&&(i.coinA=o),o.address===i.coin_b_address&&(i.coinB=o);r.push(i)}return r}updateCache(e,t,n=BE){let s=this._cache[e];s?(s.overdueTime=Bh(n),s.value=t):s=new iu(t,Bh(n)),this._cache[e]=s}getCacheData(e){const t=this._cache[e];return t!==void 0&&t.getCacheData()?t.value:null}},UE=3e4,Gt={maxAmountOut:de,isExceed:!1,path:[]};function Ph(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}function RE(e,t,n,s){const r=e.length;if(!e.length)throw new Error("routerTable is empty");if(r!==t.length)throw new Error("routerTable length not equal to feeRateArray length");let i=s?de:new U(2).pow(new U(64)),o=[];const a=100/(e[0].length-1);switch(r){case 1:{i=e[0][e[0].length-1],n[0][n[0].length-1]||o.push({feeRate:t[0],percent:100});break}case 2:{for(let c=0;c<e[0].length;c+=1){const u=e[0].length-c-1,l=e[0][c].add(e[1][u]);if(l.gt(i)&&s||l.lt(i)&&!s)if(!n[0][c]&&!n[1][u])o=[],i=l,c>0&&o.push({feeRate:t[0],percent:c*a}),u>0&&o.push({feeRate:t[1],percent:u*a});else continue}break}case 3:{for(let c=0;c<e[0].length;c+=1)for(let u=0;u<e[0].length-c;u+=1){const l=e[0].length-c-u-1,f=e[0][c].add(e[1][u]).add(e[2][l]);if(f.gt(i)&&s||f.lt(i)&&!s){if(n[0][c]||n[1][u]||n[2][l])continue;o=[],i=f,c>0&&o.push({feeRate:t[0],percent:a*c}),u>0&&o.push({feeRate:t[1],percent:u*a}),l>0&&o.push({feeRate:t[2],percent:l*a})}}break}case 4:{for(let c=0;c<e[0].length;c+=1)for(let u=0;u<e[0].length-c;u+=1)for(let l=0;l<e[0].length-c-u;l+=1){const f=e[0].length-c-u-l-1,h=e[0][c].add(e[1][u]).add(e[2][l]).add(e[3][f]);if(h.gt(i)&&s||h.lt(i)&&!s){if(n[0][c]||n[1][u]||n[2][l]||n[3][f])continue;o=[],i=h,c>0&&o.push({feeRate:t[0],percent:a*c}),u>0&&o.push({feeRate:t[1],percent:u*a}),l>0&&o.push({feeRate:t[2],percent:l*a}),f>0&&o.push({feeRate:t[3],percent:f*a})}}break}}return o.length===0||i.eq(de)?{maxAmountOut:de,path:[],isExceed:!0}:{maxAmountOut:i,path:o,isExceed:!1}}var OE=class{constructor(e){this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new Yw,this._coinSymbolMap=new Map,this._coinAddressMap=new Map,this.poolAddressMap=new Map,this.poolMap=new Map,this.ticksMap=new Map,this._sdk=e,this.leastRefreshTime=Date.now(),this.createTxParams={partitionQuantities:[],swapDirects:[],poolAddresses:[],percents:[],totalAmounts:[],partner:"",amountLimit:"0",amountOut:"0",coinTypes:[]},this.splitUnit=50,this.poolDirectionMap=new Map,this.isInited=!1,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.splitSwap=this.splitSwap.bind(this),this.splitSwapForRouter=this.splitSwapForRouter.bind(this),this.splitSwapForRouters=this.splitSwapForRouters.bind(this),this.refreshPoolofSwapRouter=this.refreshPoolofSwapRouter.bind(this),this.getBestSplitResultInOnePair=this.getBestSplitResultInOnePair.bind(this),this.findBestSplitPriceWithOneSkip=this.findBestSplitPriceWithOneSkip.bind(this),this.findBestSplitPriceWithTwoSkip=this.findBestSplitPriceWithTwoSkip.bind(this),this.findBestSplitPriceWithThreeSkip=this.findBestSplitPriceWithThreeSkip.bind(this),this.findBestSplitPrice=this.findBestSplitPrice.bind(this),this.price=this.price.bind(this),this.routerSwap=this.routerSwap.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:n,reversePair:s}=Ph(e,t);let r=this.poolAddressMap.get(n);if(r!=null)return{addressMap:r,direction:!0};if(r=this.poolAddressMap.get(s),r!=null)return{addressMap:r,direction:!1}}async setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinSymbolMap.set(e.symbol,e),this._coinAddressMap.set(e.address,e)})}loadGraph(){return this.pathProviders.forEach(e=>{const{paths:t}=e;t.forEach(n=>{var s,r;const i=(s=this.graph.getVertexByKey(n.base))!=null?s:new yf(n.base),o=(r=this.graph.getVertexByKey(n.quote))!=null?r:new yf(n.quote);this.graph.addEdge(new Zw(i,o));const a=this._coinSymbolMap.get(n.base),c=this._coinSymbolMap.get(n.quote);if(a!=null&&c!=null){const u=Ph(n.base,n.quote).pair;this.poolAddressMap.set(u,n.addressMap)}})}),this}addPathProvider(e){return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.has(e)?this._coinAddressMap.get(e):this._coinSymbolMap.get(e)}getCreateTxParams(){return this.createTxParams}isPoolDirectionSet(e){return this.poolDirectionMap.get(e)!=null}getPoolDirection(e){if(this.isPoolDirectionSet(e))return this.poolDirectionMap.get(e)}setPoolDirection(e,t){this.poolDirectionMap.set(e,t)}getBestSplitResultInOnePair(e,t,n,s,r,i){if(s.eq(de))return{maxAmountOut:de,path:[],isExceed:!1};console.log(s.toString());const o=[],a=[],c=[],u=this.getPoolAddressMapAndDirection(t,n),l=u==null?void 0:u.addressMap;if(l)for(const[f,h]of l.entries()){const g=this.poolMap.get(h),w=this.poolDirectionMap.get(h),b=r===w,T=this.ticksMap.get(h),A=new uE(s,e,g,b,i,T).computeSwap();i?o.push(A.amountOutArray):o.push(A.amountInArray),c.push(A.isExceed),a.push(f)}return RE(o.slice(0,4),a.slice(0,4),c.slice(0,4),i)}findBestSplitPriceWithOneSkip(e,t,n,s,r){const i={maxAmountOut:new U(0),path:[],poolAddresses:[],totalAmounts:[],percents:[],isExceed:!1},o=[],a=[],c=[],u=[];if(!r){let h=Gt,g=Gt;if(s){if(h=this.getBestSplitResultInOnePair(50,e[0][0],e[0][1],t,n[0][0],s),h.isExceed||(g=this.getBestSplitResultInOnePair(5,e[0][2],e[0][3],h.maxAmountOut,n[0][1],s),g.isExceed))return i.isExceed=!0,i;i.maxAmountOut=g.maxAmountOut}else{if(g=this.getBestSplitResultInOnePair(5,e[0][2],e[0][3],t,n[0][1],s),g.isExceed||(h=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],g.maxAmountOut,n[0][0],s),h.isExceed))return i.isExceed=!0,i;i.maxAmountOut=h.maxAmountOut}o.push(h.path),o.push([]),o.push(g.path);const w=[],b=[],T=[];h.path.forEach(q=>{var O;s?w.push(t.muln(q.percent).divn(100)):w.push(g.maxAmountOut.muln(q.percent).divn(100)),T.push(q.percent);const F=(O=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:O.addressMap.get(q.feeRate);b.push(F)});const R=[],A=[],x=[];g.path.forEach(q=>{var O;s?R.push(h.maxAmountOut.muln(q.percent).divn(100)):R.push(t.muln(q.percent).divn(100)),x.push(q.percent);const F=(O=this.getPoolAddressMapAndDirection(e[0][2],e[0][3]))==null?void 0:O.addressMap.get(q.feeRate);A.push(F)});let E=de;w.forEach(q=>{E=E.add(q)});const S=de;return R.forEach(q=>{S.add(q)}),a.push(E.toString()),a.push(de.toString()),c.push(T),c.push([]),c.push(x),u.push(b),u.push([]),u.push(A),i.totalAmounts=a,i.path=o,i.percents=c,i.poolAddresses=u,s?i.maxAmountOut=g.maxAmountOut:i.maxAmountOut=h.maxAmountOut,i.path.length||(i.isExceed=!0),i}let l=de;s||(l=new U(2).pow(new U(64)));const f=Pa(t,this.splitUnit);for(let h=0;h<f.length;h+=1){const g=this.getBestSplitResultInOnePair(50,e[0][0],e[0][1],f[h],n[0][0],s);if(g.isExceed)continue;let w=Gt,b=Gt;if(s){if(w=this.getBestSplitResultInOnePair(50,e[1][0],e[1][1],f[f.length-h-1],n[1][0],s),w.isExceed||(b=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],w.maxAmountOut,n[1][1],s),b.isExceed))continue}else if(b=this.getBestSplitResultInOnePair(50,e[1][2],e[1][3],f[f.length-h-1],n[1][1],s),b.isExceed||(w=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],b.maxAmountOut,n[1][0],s),w.isExceed))continue;const T=[],R=[],A=[];g.path.forEach(N=>{var D;T.push(t.muln(h*this.splitUnit).divn(100).muln(N.percent).divn(100)),A.push(N.percent);const M=(D=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:D.addressMap.get(N.feeRate);R.push(M)});const x=[],E=[],S=[];w.path.forEach(N=>{var D;s?x.push(t.muln((f.length-h-1)*this.splitUnit).divn(100).muln(N.percent).divn(100)):x.push(b.maxAmountOut.muln(N.percent).divn(100)),S.push(N.percent);const M=(D=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:D.addressMap.get(N.feeRate);E.push(M)});const q=[],O=[],F=[];b.path.forEach(N=>{var D;s?q.push(w.maxAmountOut.muln(N.percent).divn(100)):q.push(t.muln((f.length-h-1)*this.splitUnit).divn(100).muln(N.percent).divn(100)),F.push(N.percent);const M=(D=this.getPoolAddressMapAndDirection(e[1][2],e[1][3]))==null?void 0:D.addressMap.get(N.feeRate);O.push(M)});const Y=[],Se=[],Oe=[];if(b.maxAmountOut.add(g.maxAmountOut).gt(l)||w.maxAmountOut.add(g.maxAmountOut).lt(l)){s?l=b.maxAmountOut.add(g.maxAmountOut):l=w.maxAmountOut.add(g.maxAmountOut);let N=de;T.forEach(M=>{N=N.add(M)});const D=de;x.forEach(M=>{D.add(M)}),Y.push(w.path),Y.push(g.path),Y.push(b.path),Se.push(D.toString()),Se.push(N.toString()),c.push(S),c.push(A),c.push(F),Oe.push(E),Oe.push(R),Oe.push(O),i.maxAmountOut=l,i.path=Y,i.totalAmounts=Se,i.percents=c,i.poolAddresses=Oe,i.path.length||(i.isExceed=!0)}}return i}findBestSplitPriceWithTwoSkip(e,t,n,s,r){const i={maxAmountOut:de,path:[],totalAmounts:[],percents:[],poolAddresses:[],isExceed:!1},o=Pa(t,this.splitUnit);let a=de;if(s||(a=new U(2).pow(new U(64))),!r){for(let c=0;c<o.length;c+=1){let u=Gt,l=Gt,f=Gt,h=Gt;if(s){if(u=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],o[c],n[1][0],s),u.isExceed||(l=this.getBestSplitResultInOnePair(5,e[0][2],e[0][3],u.maxAmountOut,n[1][1],s),l.isExceed)||(f=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],o[o.length-c-1],n[1][0],s),f.isExceed)||(h=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],f.maxAmountOut,n[1][1],s),h.isExceed))continue}else if(l=this.getBestSplitResultInOnePair(5,e[0][2],e[0][3],o[c],n[1][1],s),l.isExceed||(u=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],l.maxAmountOut,n[1][0],s),u.isExceed)||(h=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],o[o.length-c-1],n[1][1],s),h.isExceed)||(f=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],h.maxAmountOut,n[1][0],s),f.isExceed))continue;const g=[],w=[],b=[];u.path.forEach(D=>{var M;s?g.push(t.muln(c*this.splitUnit).divn(100).muln(D.percent).divn(100)):g.push(l.maxAmountOut.muln(D.percent).divn(100)),b.push(D.percent);const oe=(M=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:M.addressMap.get(D.feeRate);w.push(oe)});const T=[],R=[],A=[];l.path.forEach(D=>{var M;s?T.push(u.maxAmountOut.muln(D.percent).divn(100)):T.push(t.muln(c*this.splitUnit).divn(100).muln(D.percent).divn(100)),A.push(D.percent);const oe=(M=this.getPoolAddressMapAndDirection(e[0][2],e[0][3]))==null?void 0:M.addressMap.get(D.feeRate);R.push(oe)});const x=[],E=[],S=[];f.path.forEach(D=>{var M;s?x.push(t.muln((o.length-c-1)*this.splitUnit).divn(100).muln(D.percent).divn(100)):x.push(h.maxAmountOut.muln(D.percent).divn(100)),S.push(D.percent);const oe=(M=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:M.addressMap.get(D.feeRate);E.push(oe)});const q=[],O=[],F=[];h.path.forEach(D=>{var M;s?q.push(f.maxAmountOut.muln(D.percent).divn(100)):q.push(t.muln((o.length-c-1)*this.splitUnit).divn(100).muln(D.percent).divn(100)),F.push(D.percent);const oe=(M=this.getPoolAddressMapAndDirection(e[1][1],e[1][2]))==null?void 0:M.addressMap.get(D.feeRate);O.push(oe)});const Y=[],Se=[],Oe=[],N=[];if(l.maxAmountOut.add(h.maxAmountOut).gt(a)&&s||!s&&u.maxAmountOut.add(f.maxAmountOut).lt(a)){s?a=l.maxAmountOut.add(h.maxAmountOut):a=u.maxAmountOut.add(f.maxAmountOut);let D=de;g.forEach(oe=>{D=D.add(oe)});let M=de;x.forEach(oe=>{M=M.add(oe)}),Y.push(u.path),Y.push(l.path),Y.push([]),Y.push(f.path),Y.push(h.path),Se.push(D.toString()),Se.push(M.toString()),Se.push(de.toString()),N.push(b),N.push(S),N.push([]),N.push(A),N.push(F),Oe.push(w),Oe.push(E),Oe.push([]),Oe.push(R),Oe.push(O),i.maxAmountOut=a,i.percents=N,i.totalAmounts=Se,i.path=Y,i.poolAddresses=Oe}}return i.path.length||(i.isExceed=!0),i}for(let c=0;c<o.length;c+=1)for(let u=0;u<o.length-c-1;u+=1){const l=o.length-c-u-1,f=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],o[l],n[0][0],s);if(f.isExceed)continue;let h=Gt,g=Gt,w=Gt,b=Gt;if(s){if(h=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],o[u],n[1][0],s),h.isExceed||(g=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],h.maxAmountOut,n[1][1],s),g.isExceed)||(w=this.getBestSplitResultInOnePair(5,e[2][0],e[2][1],o[c],n[2][0],s),w.isExceed)||(b=this.getBestSplitResultInOnePair(5,e[2][2],e[2][3],w.maxAmountOut,n[2][1],s),b.isExceed))continue}else if(g=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],o[u],n[1][1],s),g.isExceed||(h=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],g.maxAmountOut,n[1][0],s),h.isExceed)||(b=this.getBestSplitResultInOnePair(5,e[2][2],e[2][3],o[c],n[2][1],s),b.isExceed)||(w=this.getBestSplitResultInOnePair(5,e[2][0],e[2][1],b.maxAmountOut,n[2][0],s),w.isExceed))continue;const T=[],R=[],A=[];h.path.forEach(Ie=>{var Me;s?T.push(t.muln(u*this.splitUnit).divn(100).muln(Ie.percent).divn(100)):T.push(g.maxAmountOut.muln(Ie.percent).divn(100)),A.push(Ie.percent);const Be=(Me=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:Me.addressMap.get(Ie.feeRate);R.push(Be)});const x=[],E=[],S=[];g.path.forEach(Ie=>{var Me;s?x.push(h.maxAmountOut.muln(Ie.percent).divn(100)):x.push(t.muln(u*this.splitUnit).divn(100).muln(Ie.percent).divn(100)),S.push(Ie.percent);const Be=(Me=this.getPoolAddressMapAndDirection(e[1][2],e[1][3]))==null?void 0:Me.addressMap.get(Ie.feeRate);E.push(Be)});const q=[],O=[],F=[];w.path.forEach(Ie=>{var Me;s?q.push(t.muln(c*this.splitUnit).divn(100).muln(Ie.percent).divn(100)):q.push(b.maxAmountOut.muln(Ie.percent).divn(100)),F.push(Ie.percent);const Be=(Me=this.getPoolAddressMapAndDirection(e[2][0],e[2][1]))==null?void 0:Me.addressMap.get(Ie.feeRate);O.push(Be)});const Y=[],Se=[],Oe=[];b.path.forEach(Ie=>{var Me;s?Y.push(w.maxAmountOut.muln(Ie.percent).divn(100)):Y.push(t.muln(c*this.splitUnit).divn(100).muln(Ie.percent).divn(100)),Oe.push(Ie.percent);const Be=(Me=this.getPoolAddressMapAndDirection(e[2][2],e[2][3]))==null?void 0:Me.addressMap.get(Ie.feeRate);Se.push(Be)});const N=[],D=[],M=[];f.path.forEach(Ie=>{var Me;N.push(t.muln(l*this.splitUnit).divn(100).muln(Ie.percent).divn(100)),M.push(Ie.percent);const Be=(Me=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:Me.addressMap.get(Ie.feeRate);D.push(Be)});let oe=de;s?oe=f.maxAmountOut.add(g.maxAmountOut).add(b.maxAmountOut):oe=f.maxAmountOut.add(h.maxAmountOut).add(w.maxAmountOut);const Te=[],ve=[],ke=[],Ce=[];if(oe.gt(a)&&s||oe.lt(a)&&!s){let Ie=de;T.forEach(De=>{Ie=Ie.add(De)});let Me=de;q.forEach(De=>{Me=Me.add(De)});let Be=de;N.forEach(De=>{Be=Be.add(De)}),a=oe,Te.push(h.path),Te.push(w.path),Te.push(f.path),Te.push(g.path),Te.push(b.path),ve.push(Ie.toString()),ve.push(Me.toString()),ve.push(Be.toString()),ke.push(A),ke.push(F),ke.push(M),ke.push(S),ke.push(Oe),Ce.push(R),Ce.push(O),Ce.push(D),Ce.push(E),Ce.push(Se),i.maxAmountOut=oe,i.path=Te,i.totalAmounts=ve,i.poolAddresses=Ce,i.percents=ke}}return i.path.length||(i.isExceed=!0),i}findBestSplitPriceWithThreeSkip(e,t,n,s,r){const i={maxAmountOut:new U(0),path:[],totalAmounts:[],percents:[],poolAddresses:[],isExceed:!1};let o=de;s||(o=new U(2).pow(new U(64)));const a=Pa(t,this.splitUnit);for(let c=0;c<a.length;c+=1)for(let u=0;u<a.length-c-1;u+=1)if(r)for(let l=0;l<a.length-c-u-1;l+=1){const f=a.length-c-u-l-1,h=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],a[l],n[0][0],s);let g=Gt,w=Gt,b=Gt,T=Gt,R=Gt,A=Gt;if(s){if(g=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],a[u],n[1][0],s),g.isExceed||(w=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],g.maxAmountOut,n[1][1],s),w.isExceed)||(b=this.getBestSplitResultInOnePair(5,e[2][0],e[2][1],a[c],n[2][0],s),b.isExceed)||(T=this.getBestSplitResultInOnePair(5,e[2][2],e[2][3],b.maxAmountOut,n[2][1],s),T.isExceed)||(R=this.getBestSplitResultInOnePair(5,e[3][0],e[3][1],a[f],n[3][0],s),R.isExceed)||(A=this.getBestSplitResultInOnePair(5,e[3][2],e[3][3],R.maxAmountOut,n[3][1],s),A.isExceed))continue}else if(w=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],a[u],n[1][1],s),w.isExceed||(g=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],w.maxAmountOut,n[1][0],s),g.isExceed)||(T=this.getBestSplitResultInOnePair(5,e[2][2],e[2][3],a[c],n[2][1],s),T.isExceed)||(b=this.getBestSplitResultInOnePair(5,e[2][0],e[2][1],T.maxAmountOut,n[2][0],s),b.isExceed)||(A=this.getBestSplitResultInOnePair(5,e[3][2],e[3][3],a[f],n[3][1],s),A.isExceed)||(R=this.getBestSplitResultInOnePair(5,e[3][0],e[3][1],A.maxAmountOut,n[3][0],s),R.isExceed))continue;const x=[],E=[],S=[];g.path.forEach(ze=>{var ft;s?x.push(t.muln(u*this.splitUnit).divn(100).muln(ze.percent).divn(100)):x.push(w.maxAmountOut.muln(ze.percent).divn(100)),S.push(ze.percent);const qt=(ft=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:ft.addressMap.get(ze.feeRate);E.push(qt)});const q=[],O=[],F=[];w.path.forEach(ze=>{var ft;s?q.push(g.maxAmountOut.muln(ze.percent).divn(100)):q.push(t.muln(u*this.splitUnit).divn(100).muln(ze.percent).divn(100)),F.push(ze.percent);const qt=(ft=this.getPoolAddressMapAndDirection(e[1][2],e[1][3]))==null?void 0:ft.addressMap.get(ze.feeRate);O.push(qt)});const Y=[],Se=[],Oe=[];b.path.forEach(ze=>{var ft;s?Y.push(t.muln(c*this.splitUnit).divn(100).muln(ze.percent).divn(100)):Y.push(T.maxAmountOut.muln(ze.percent).divn(100)),Oe.push(ze.percent);const qt=(ft=this.getPoolAddressMapAndDirection(e[2][0],e[2][1]))==null?void 0:ft.addressMap.get(ze.feeRate);Se.push(qt)});const N=[],D=[],M=[];T.path.forEach(ze=>{var ft;s?N.push(b.maxAmountOut.muln(ze.percent).divn(100)):N.push(t.muln(c*this.splitUnit).divn(100).muln(ze.percent).divn(100)),M.push(ze.percent);const qt=(ft=this.getPoolAddressMapAndDirection(e[2][2],e[2][3]))==null?void 0:ft.addressMap.get(ze.feeRate);D.push(qt)});const oe=[],Te=[],ve=[];R.path.forEach(ze=>{var ft;s?oe.push(t.muln(f*this.splitUnit).divn(100).muln(ze.percent).divn(100)):oe.push(A.maxAmountOut.muln(ze.percent).divn(100)),ve.push(ze.percent);const qt=(ft=this.getPoolAddressMapAndDirection(e[3][0],e[3][1]))==null?void 0:ft.addressMap.get(ze.feeRate);Te.push(qt)});const ke=[],Ce=[],Ie=[];A.path.forEach(ze=>{var ft;s?ke.push(R.maxAmountOut.muln(ze.percent).divn(100)):ke.push(t.muln(f*this.splitUnit).divn(100).muln(ze.percent).divn(100)),Ie.push(ze.percent);const qt=(ft=this.getPoolAddressMapAndDirection(e[3][2],e[3][3]))==null?void 0:ft.addressMap.get(ze.feeRate);Ce.push(qt)});const Me=[],Be=[],De=[];h.path.forEach(ze=>{var ft;Me.push(t.muln(l*this.splitUnit).divn(100).muln(ze.percent).divn(100)),De.push(ze.percent);const qt=(ft=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:ft.addressMap.get(ze.feeRate);Be.push(qt)});let me=de;s?me=h.maxAmountOut.add(w.maxAmountOut).add(T.maxAmountOut).add(A.maxAmountOut):me=h.maxAmountOut.add(g.maxAmountOut).add(b.maxAmountOut).add(R.maxAmountOut);const le=[],je=[],xt=[],Rt=[];if(me.gt(o)&&s||!s&&me.lt(o)){let ze=de;x.forEach(on=>{ze=ze.add(on)});let ft=de;Y.forEach(on=>{ft=ft.add(on)});let qt=de;oe.forEach(on=>{qt=qt.add(on)});let En=de;Me.forEach(on=>{En=En.add(on)}),o=me,le.push(g.path),le.push(b.path),le.push(R.path),le.push(h.path),le.push(w.path),le.push(T.path),le.push(A.path),je.push(ze.toString()),je.push(ft.toString()),je.push(qt.toString()),je.push(En.toString()),xt.push(S),xt.push(Oe),xt.push(ve),xt.push(De),xt.push(F),xt.push(M),xt.push(Ie),Rt.push(E),Rt.push(Se),Rt.push(Te),Rt.push(Be),Rt.push(O),Rt.push(D),Rt.push(Ce),i.maxAmountOut=me,i.path=le,i.totalAmounts=je,i.percents=xt,i.poolAddresses=Rt}}else{const l=a.length-c-u-1;let f=Gt,h=Gt,g=Gt,w=Gt,b=Gt,T=Gt;if(s){if(f=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],a[u],n[0][0],s),f.isExceed||(h=this.getBestSplitResultInOnePair(5,e[0][2],e[0][3],f.maxAmountOut,n[0][1],s),h.isExceed)||(g=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],a[c],n[1][0],s),g.isExceed)||(w=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],g.maxAmountOut,n[1][1],s),w.isExceed)||(b=this.getBestSplitResultInOnePair(5,e[2][0],e[2][1],a[l],n[2][0],s),b.isExceed)||(T=this.getBestSplitResultInOnePair(5,e[2][2],e[2][3],g.maxAmountOut,n[2][1],s),T.isExceed))continue}else if(h=this.getBestSplitResultInOnePair(5,e[0][2],e[0][3],a[u],n[0][1],s),h.isExceed||(f=this.getBestSplitResultInOnePair(5,e[0][0],e[0][1],h.maxAmountOut,n[0][0],s),f.isExceed)||(w=this.getBestSplitResultInOnePair(5,e[1][2],e[1][3],a[c],n[1][1],s),w.isExceed)||(g=this.getBestSplitResultInOnePair(5,e[1][0],e[1][1],w.maxAmountOut,n[1][0],s),g.isExceed)||(T=this.getBestSplitResultInOnePair(5,e[2][2],e[2][3],a[l],n[2][1],s),T.isExceed)||(b=this.getBestSplitResultInOnePair(5,e[2][0],e[2][1],w.maxAmountOut,n[2][0],s),b.isExceed))continue;const R=[],A=[],x=[];f.path.forEach(me=>{var le;s?R.push(t.muln(u*this.splitUnit).divn(100).muln(me.percent).divn(100)):R.push(h.maxAmountOut.muln(me.percent).divn(100)),x.push(me.percent);const je=(le=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:le.addressMap.get(me.feeRate);A.push(je)});const E=[],S=[],q=[];h.path.forEach(me=>{var le;s?E.push(f.maxAmountOut.muln(me.percent).divn(100)):E.push(t.muln(u*this.splitUnit).divn(100).muln(me.percent).divn(100)),q.push(me.percent);const je=(le=this.getPoolAddressMapAndDirection(e[0][2],e[0][3]))==null?void 0:le.addressMap.get(me.feeRate);S.push(je)});const O=[],F=[],Y=[];g.path.forEach(me=>{var le;s?O.push(t.muln(c*this.splitUnit).divn(100).muln(me.percent).divn(100)):O.push(w.maxAmountOut.muln(me.percent).divn(100)),Y.push(me.percent);const je=(le=this.getPoolAddressMapAndDirection(e[1][0],e[1][1]))==null?void 0:le.addressMap.get(me.feeRate);F.push(je)});const Se=[],Oe=[],N=[];w.path.forEach(me=>{var le;s?Se.push(g.maxAmountOut.muln(me.percent).divn(100)):Se.push(t.muln(c*this.splitUnit).divn(100).muln(me.percent).divn(100)),N.push(me.percent);const je=(le=this.getPoolAddressMapAndDirection(e[1][2],e[1][3]))==null?void 0:le.addressMap.get(me.feeRate);Oe.push(je)});const D=[],M=[],oe=[];b.path.forEach(me=>{var le;s?D.push(t.muln(l*this.splitUnit).divn(100).muln(me.percent).divn(100)):D.push(T.maxAmountOut.muln(me.percent).divn(100)),oe.push(me.percent);const je=(le=this.getPoolAddressMapAndDirection(e[2][0],e[2][1]))==null?void 0:le.addressMap.get(me.feeRate);M.push(je)});const Te=[],ve=[],ke=[];T.path.forEach(me=>{var le;s?Te.push(b.maxAmountOut.muln(me.percent).divn(100)):Te.push(t.muln(l*this.splitUnit).divn(100).muln(me.percent).divn(100)),ke.push(me.percent);const je=(le=this.getPoolAddressMapAndDirection(e[2][2],e[2][3]))==null?void 0:le.addressMap.get(me.feeRate);ve.push(je)});const Ce=[],Ie=[],Me=[],Be=[];let De=de;if(s?De=h.maxAmountOut.add(w.maxAmountOut).add(T.maxAmountOut):De=f.maxAmountOut.add(g.maxAmountOut).add(b.maxAmountOut),De.gt(o)&&s||De.lt(o)&&!s){let me=de;R.forEach(xt=>{me=me.add(xt)});let le=de;O.forEach(xt=>{le=le.add(xt)});let je=de;D.forEach(xt=>{je=je.add(xt)}),o=De,Ce.push(f.path),Ce.push(g.path),Ce.push(b.path),Ce.push([]),Ce.push(h.path),Ce.push(w.path),Ce.push(T.path),Ie.push(me.toString()),Ie.push(le.toString()),Ie.push(je.toString()),Ie.push(de.toString()),Me.push(x),Me.push(Y),Me.push(oe),Me.push([]),Me.push(q),Me.push(N),Me.push(ke),Be.push(A),Be.push(F),Be.push(M),Be.push([]),Be.push(S),Be.push(Oe),Be.push(ve),i.maxAmountOut=De,i.path=Ce,i.percents=Me,i.totalAmounts=Ie,i.poolAddresses=Be}}return i.path.length||(i.isExceed=!0),i}findBestSplitPrice(e,t,n,s,r,i){var o,a,c,u;let l=e.length,f=!1;e[0].length===2&&(f=!0,l-=1);let h={maxAmountOut:de,path:[],poolAddresses:[],totalAmounts:[],percents:[],isExceed:!1},g={maxAmountOut:de,path:[],isExceed:!1};const w=[],b=[];let T=de;const R=[];switch(console.log(l,"skipNumber"),l){case 0:g=this.getBestSplitResultInOnePair(50,e[0][0],e[0][1],t,n[0][0],s),h.maxAmountOut=g.maxAmountOut,h.path.push(g.path),g.path.forEach(O=>{var F;const Y=(F=this.getPoolAddressMapAndDirection(e[0][0],e[0][1]))==null?void 0:F.addressMap.get(O.feeRate);w.push(Y);const Se=t.muln(O.percent).divn(100);b.push(Se),R.push(O.percent)}),b.forEach(O=>{T=T.add(O)}),h.percents.push(R),h.totalAmounts.push(T.toString()),h.poolAddresses.push(w);break;case 1:h=this.findBestSplitPriceWithOneSkip(e,t,n,s,f);break;case 2:h=this.findBestSplitPriceWithTwoSkip(e,t,n,s,f);break;case 3:h=this.findBestSplitPriceWithThreeSkip(e,t,n,s,f);break}if(h.isExceed)return h;const A=[];for(let O=0;O<h.path.length;O+=1){const{length:F}=h.path[O];A.push(F)}const x=[];if(l!==0)if(f){for(let F=1;F<1+l;F+=1){const Y=[];if(A[F-1]>0)for(let Se=0;Se<A[F-1];Se+=1)Y.push(n[F][0]);x.push(Y)}const O=[];for(let F=0;F<A[l];F+=1)if(A[l]>0)for(let Y=0;Y<A[l];Y+=1)O.push(n[0][0]);x.push(O);for(let F=1;F<1+l;F+=1){const Y=[];if(A[F+l]>0)for(let Se=0;Se<A[F+l];Se+=1)Y.push(n[F][1]);x.push(Y)}}else{for(let O=0;O<l;O+=1){const F=[];if(A[O]>0)for(let Y=0;Y<A[O];Y+=1)F.push(n[O][0]);x.push(F)}x.push([]);for(let O=0;O<l;O+=1){const F=[];if(A[O+l+1]>0)for(let Y=0;Y<A[O+l+1];Y+=1)F.push(n[O][1]);x.push(F)}}else x.push([n[0][0]]);for(let O=0;O<h.poolAddresses.length;O+=1)for(let F=0;F<h.poolAddresses[O].length;F+=1){const Y=this.getPoolDirection(h.poolAddresses[O][F]);Y&&(x[O][F]=x[O][F]&&Y)}const E=[],S=(o=this._coinSymbolMap.get(e[0][0]))==null?void 0:o.address;E.push(S);for(let O=0;O<e.length;O+=1)if(e[O].length!==2){const F=(a=this._coinSymbolMap.get(e[O][1]))==null?void 0:a.address;E.push(F)}if(e[0].length===2){const O=(c=this._coinSymbolMap.get(e[0][1]))==null?void 0:c.address;E.push(O)}else{const O=(u=this._coinSymbolMap.get(e[0][e[0].length-1]))==null?void 0:u.address;E.push(O)}const q=s?h.maxAmountOut.muln((1-r)*1e5).divn(1e5).toString():h.maxAmountOut.muln((1+r)*1e5).divn(1e5).toString();return this.createTxParams={partitionQuantities:A,swapDirects:x,poolAddresses:h.poolAddresses,totalAmounts:h.totalAmounts,percents:h.percents,amountLimit:q,amountOut:t.toString(),partner:i,coinTypes:E},h}async price(e,t,n,s,r,i){var o,a;const c=this.tokenInfo(e),u=this.tokenInfo(t);if(c===void 0||u===void 0)return;const l=this.graph.getVertexByKey(c.symbol),f=this.graph.getVertexByKey(u.symbol),h=this.graph.findAllPath(l,f),g=Array.from(h),w=[],b=[],T=[];for(let R=0;R<g.length;R+=1){const A=g[R];if(A.length>3)continue;const x=[],E=[];for(let S=0;S<A.length-1;S+=1){const q=A[S].value.toString(),O=A[S+1].value.toString(),F=(o=this.getPoolAddressMapAndDirection(q,O))==null?void 0:o.addressMap,Y=(a=this.getPoolAddressMapAndDirection(q,O))==null?void 0:a.direction;F!==void 0&&Y!==void 0&&(E.push(Y),x.push(q),x.push(O),F.forEach(Se=>{w.push(Se)}))}if(T.push(E),b.push(x),x.length===2&&b.length>1){const S=b[0].slice();b[0]=x,b[b.length-1]=S;const q=T[0].slice();T[0]=E,T[b.length-1]=q}}return await this.refreshPoolofSwapRouter(w),this.findBestSplitPrice(b,n,T,s,r,i)}async routerSwap(e,t,n,s,r,i){const o=await this.price(e,t,n,s,r,i),a=this.getCreateTxParams();if(o.isExceed)return{maxAmountOut:o.maxAmountOut,path:o.path,poolAddresses:o.poolAddresses,percents:o.percents,totalAmounts:o.totalAmounts,isExceed:o.isExceed,totalPercents:[],showRouters:[],gasFee:0};const c=this.splitSwapForRouters(a,s,!0),{simulationAccount:u}=this.sdk.sdkOptions.networkOptions,l=new Ot(this.sdk.sdkOptions.rpcUrl),f=Bi(u.address),h=await l.generateRawTransaction(f,c),g=Bi(u.pubkey),w=new k.Ed25519PublicKey(g.toUint8Array()),b=await l.simulateTransaction(w,h),T=b[0].gas_used,R=b[0].gas_unit_price,A=parseInt(T,10)*parseInt(R,10),x=[];let E=de;o.totalAmounts.forEach(q=>{E=E.add(new U(q))}),o.totalAmounts.forEach(q=>{let O;E.isZero()?O=0:O=Number(q)/Number(E.toString())*100,x.push(O)});const S=[];for(let q=0;q<o.totalAmounts.length;q+=1){const O={amount:o.totalAmounts[q],poolAddress:[]};q===Math.floor(o.poolAddresses.length/2)?o.poolAddresses[q].length>0&&(O.poolAddress.push(o.poolAddresses[q]),S.unshift(O)):o.poolAddresses[q].length>0&&(O.poolAddress.push(o.poolAddresses[q],o.poolAddresses[q+Math.floor(o.poolAddresses.length/2)+1]),S.push(O))}return{maxAmountOut:o.maxAmountOut,path:o.path,poolAddresses:o.poolAddresses,percents:o.percents,totalAmounts:o.totalAmounts,isExceed:o.isExceed,totalPercents:x,showRouters:S,gasFee:A}}splitSwap(e,t,n=!1){const{modules:s}=this.sdk.sdkOptions.networkOptions,r=`${s.ClmmIntegrate}::${ll}`,i=t?"exact_input_split_swap":"exact_output_split_swap",o=[];e.poolAddresses.forEach(f=>{const h=[];f.forEach(g=>{h.push(k.AccountAddress.fromHex(g))}),o.push(h)});const a=[H.bcsSerializeUint64(e.partitionQuantities[0]),H.serializeVectorWithFunc(e.swapDirects[0],"serializeBool"),yE(o[0]),H.serializeVectorWithFunc(e.percents[0],"serializeU64"),H.bcsSerializeUint64(parseInt(e.totalAmounts[0],10)),H.bcsSerializeUint64(parseInt(e.amountLimit,10)),H.bcsSerializeStr(e.partner)];if(n){const f=[];for(const h of e.coinTypes){const g=new k.TypeTagStruct(k.StructTag.fromString(h));f.push(g)}return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i,f,a))}const c=it(r,i),u=e.coinTypes,l=[e.partitionQuantities[0],e.swapDirects[0],e.poolAddresses[0],e.percents[0],e.totalAmounts[0],e.amountLimit,e.partner];return{type:"entry_function_payload",function:c,type_arguments:u,arguments:l}}splitSwapForRouter(e,t,n,s=!1){const{modules:r}=this.sdk.sdkOptions.networkOptions,i=`${r.ClmmIntegrate}::${ll}`,o=[];e.poolAddresses.forEach(f=>{const h=[];f.forEach(g=>{h.push(k.AccountAddress.fromHex(g))}),o.push(h)});const a=[H.serializeVectorWithFunc(e.partitionQuantities,"serializeU64"),Sh(e.swapDirects,"serializeBool"),gE(o),Sh(e.percents,"serializeU64"),H.serializeVectorWithFunc(e.totalAmounts,"serializeU64"),H.bcsSerializeUint64(parseInt(e.amountLimit,10)),H.bcsSerializeStr(e.partner)];if(s){const f=[];for(const h of e.coinTypes){const g=new k.TypeTagStruct(k.StructTag.fromString(h));f.push(g)}return new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(i,n,f,a))}const c=[e.partitionQuantities,e.swapDirects,e.poolAddresses,e.percents,e.totalAmounts,e.amountLimit,e.partner],u=it(i,n),l=e.coinTypes;return{type:"entry_function_payload",function:u,type_arguments:l,arguments:c}}splitSwapForRouters(e,t,n=!1){const{length:s}=e.partitionQuantities;let r;switch(s){case 3:t?r="exact_input_split_swap_for_router_three":r="exact_output_split_swap_for_router_three";break;case 5:t?r="exact_input_split_swap_for_router_four":r="exact_output_split_swap_for_router_four";break;case 7:t?r="exact_input_split_swap_for_router_five":r="exact_output_split_swap_for_router_five";break;default:return this.splitSwap(e,t,n)}return this.splitSwapForRouter(e,t,r,n)}findUnFetchPools(e){const t=[];for(const n of e)this.poolMap.get(n)==null&&t.push(n);return t}async refreshPoolofSwapRouter(e){var t,n,s;const r=Date.now();if(this.isInited){const o=this.findUnFetchPools(e);if(r-this.leastRefreshTime<UE&&o.length===0)return}else this.isInited=!0;const i=await this._sdk.Resources.getPools(e);for(let o=0;o<e.length;o+=1)if(this.poolMap.set(i[o].poolAddress,i[o]),this.getPoolDirection(i[o].poolAddress)==null){const a=(t=this._coinAddressMap.get(i[o].coinTypeA))==null?void 0:t.symbol,c=(n=this._coinAddressMap.get(i[o].coinTypeB))==null?void 0:n.symbol,u=(s=this.getPoolAddressMapAndDirection(a,c))==null?void 0:s.direction;this.poolDirectionMap.set(i[o].poolAddress,u);const l=await this._sdk.Fetcher.fetchTicks({pool:i[o].poolAddress,coinTypeA:i[o].coinTypeA,coinTypeB:i[o].coinTypeB}),f=lw(l);this.ticksMap.set(i[o].poolAddress,f)}this.leastRefreshTime=r}},IE=class{constructor(e){this._sdk=e}get sdk(){return this._sdk}transformTickData(e){const t=[],{modules:n}=this._sdk.sdkOptions.networkOptions,s=e.filter(o=>o.type!=="write_resource"?!1:o.data.type===`${n.FetcherDeployer}::fetcher::FetchTicksResult`);if(s.length===0)return{ticks:t,index:0,offset:0};const i=s[0].data.data;return{ticks:i.ticks||[],index:Number(i.index),offset:Number(i.offset)}}async getTicks(e){const{modules:t,simulationAccount:n}=this.sdk.sdkOptions.networkOptions,s=new Ot(this.sdk.sdkOptions.rpcUrl),r=`${t.FetcherDeployer}::scripts`,i="fetch_ticks",o=[new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeA)),new k.TypeTagStruct(k.StructTag.fromString(e.coinTypeB))],a=[H.bcsToBytes(k.AccountAddress.fromHex(e.pool)),H.bcsSerializeUint64(e.index),H.bcsSerializeUint64(e.offset),H.bcsSerializeUint64(e.limit)],c=new k.TransactionPayloadEntryFunction(k.EntryFunction.natural(r,i,o,a)),u=Bi(n.address),l=await s.generateRawTransaction(u,c),f=Bi(n.pubkey),h=new k.Ed25519PublicKey(f.toUint8Array()),g=await s.simulateTransaction(h,l);return this.transformTickData(g[0].changes)}async fetchTicks(e){let t=[],n=0,s=0;const r=512;for(;;){const i=await this.getTicks({pool:e.pool,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,index:n,offset:s,limit:r});if(t=[...t,...i.ticks],i.ticks.length<r)break;i.offset<999?(s=i.offset+1,n=i.index):(n=i.index+1,s=0)}return t}},$E=class{constructor(e){this.globalConfig={protocol_fee_rate:"",is_pause:!1},this._sdkOptions=e,this._client=new Ot(e.rpcUrl),this._tokenClient=new E2(this._client),this._swap=new TE(this),this._position=new xE(this),this._resources=new AE(this),this._pool=new EE(this),this._rewarder=new kE(this),this._router=new OE(this),this._token=new PE(this),this._fetcher=new IE(this),this._launchpad=new rE(this),this.globalConfig.protocol_fee_rate=""}async getGlobalConfig(e=!1){return(this.globalConfig.protocol_fee_rate.length===0||e)&&(this.globalConfig=await this._resources.getGlobalConfig(this._sdkOptions.networkOptions.modules.LiquidswapDeployer)),this.globalConfig}get client(){return this._client}get tokenClient(){return this._tokenClient}get Swap(){return this._swap}get Position(){return this._position}get Pool(){return this._pool}get Resources(){return this._resources}get Rewarder(){return this._rewarder}get Token(){return this._token}get Router(){return this._router}get Fetcher(){return this._fetcher}get Launchpad(){return this._launchpad}get sdkOptions(){return this._sdkOptions}};const LE={pro:{Aptos:[{name:"Default",link:"https://explorer.aptoslabs.com"}],Sui:[{name:"SuiVision",link:"https://suivision.xyz"},{name:"Suiscan",link:"https://suiscan.xyz"}]},pre:{Aptos:[{name:"Default",link:"https://explorer.aptoslabs.com"}],Sui:[{name:"SuiVision",link:"https://suivision.xyz"},{name:"Suiscan",link:"https://suiscan.xyz"}]},preRoute:{Aptos:[{name:"Default",link:"https://explorer.aptoslabs.com"}],Sui:[{name:"SuiVision",link:"https://suivision.xyz"},{name:"Suiscan",link:"https://suiscan.xyz"}]},test:{Aptos:[{name:"Default",link:"https://explorer.aptoslabs.com"}],Sui:[{name:"SuiVision",link:"https://testnet.suivision.xyz"},{name:"Suiscan",link:"https://suiscan.xyz"}]}},Za={...LE[Vh]};function zt(e,t){const n=Ld(t);return Ye(e).div(n).toString()}function yn(e,t){const n=Ld(t);return Ye(e).mul(n)}function qE(e){const t=e.split("x");let n=e;return t[1][0]==="0"&&(n=t[0]+"x"+t[1].slice(1)),n}const v5=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Uh=e=>{switch(e){case"account":return"account";case"token":return"";case"nftAddress":return"token";case"tx":return"txn";case"poolAddress":return"account"}},NE=e=>{switch(e){case"account":return"address";case"token":return"object";case"tx":return"txblock";case"poolAddress":return"object";case"nftAddress":return"object";case"coin":return"object"}},pw=e=>{switch(e){case"account":return"address";case"token":return"object";case"tx":return"tx";case"poolAddress":return"object";case"nftAddress":return"object";case"coin":return"coin"}},Rh=e=>{switch(e){case"account":return"account";case"token":return"object";case"tx":return"txblock";case"poolAddress":return"object";case"nftAddress":return"object";case"coin":return"coin"}};function S5(){const t=(localStorage.getItem("theme")||"sui")=="sui"?"Sui":"Aptos";return localStorage.getItem(`${t}-currentExplorerName`)||Za[t][0].name}function Qa(e,t,n){const s=localStorage.getItem("theme")||"sui",r=s=="sui"?"Sui":"Aptos";console.log(e,"url###111");const i=e.indexOf("suivision")>-1?"SuiVision":e.indexOf("suiscan")>-1?"Suiscan":"";console.log(e,i,"url##");const o=ge[r].network;let a;return r=="Aptos"?t=="nftAddress"?a=`${e}/${Uh(t)}/${n}/0?network=${o}`:a=`${e}/${Uh(t)}/${n}?network=${o}`:i=="SuiVision"?a=`${e}/${Rh(t)}/${n}`:i=="Suiscan"?a=`${e}/${o}/${pw(t)}/${n}`:a=`${e}/${NE(t)}/${n}?network=${o}`,console.log("href, chain, chainName, url, urlName, network==>",t,Rh(t),a,s,r,e,i,o),a}function A5(e,t){const n="Sui",s=Za[n][2].link,r=Za[n][2].name,i=ge[n].network;let o;return r=="Suiscan"&&(o=`${s}/${i}/${pw(e)}/${t}`),o}function ec(e,t){const n=Ld(Ye(t));return Number(Ye(e).mul(n))}function E5(e){const t=e.toString(),n=t.indexOf(".");if(n!==-1){for(let s=n+1;s<t.length;s++)if(t[s]!=="0")return s-n-1}return-1}function k5(e,t){let n=e,s=t;if(e.includes("sui::SUI")&&e.includes("sui::SUI")){if(e.slice(-10)===t.slice(-10))return!0}else return e[2]=="0"&&(n=e.slice(0,2)+e.slice(3)),t[2]=="0"&&(s=t.slice(0,2)+t.slice(3)),(n==null?void 0:n.toLowerCase())==(s==null?void 0:s.toLowerCase());return!1}function B5(e){const t=[];let n=e.indexOf(",");for(;n!==-1;)t.push(n),n=e.indexOf(",",n+1);return t}const Oh="aggregatorLocal",Qi=[{name:"Cetus",logo:"/source-image/cetus.png",status:"open",type:"dex"},{name:"DeepBook",logo:"https://res.cetus.zone/icon/deepbook.png",status:"close",type:"dex"},{name:"Kriya V2",logo:"https://res.cetus.zone/icon/kriya.png",status:"close",type:"dex"},{name:"Kriya V3",logo:"https://res.cetus.zone/icon/kriya.png",status:"close",type:"dex"},{name:"FlowX V2",logo:"https://res.cetus.zone/icon/flowx.png",status:"close",type:"dex"},{name:"FlowX V3",logo:"https://res.cetus.zone/icon/flowx.png",status:"close",type:"dex"},{name:"Aftermath",logo:"/source-image/aftermath.png",status:"close",type:"dex"},{name:"Turbos",logo:"/source-image/turbos.png",status:"close",type:"dex"},{name:"Haedal",logo:"/source-image/haedal.png",status:"close",type:"other"},{name:"Volo",logo:"/source-image/volo.png",status:"close",type:"other"},{name:"Aftermath LSD",logo:"/source-image/aftermath.png",status:"close",type:"other"}],P5={CETUS:"/source-image/cetus.png",DEEPBOOK:"https://res.cetus.zone/icon/deepbook.png",KRIYA:"https://res.cetus.zone/icon/kriya.png",FLOWX:"https://res.cetus.zone/icon/flowx.png",AFTERMATH:"/source-image/aftermath.png",TURBOS:"/source-image/turbos.png",HAEDAL:"/source-image/haedal.png",VOLO:"/source-image/volo.png",AFSUI:"/source-image/aftermath.png"},Ru=e=>{try{const t=localStorage.getItem(e);return t&&JSON.parse(t)}catch(t){return console.log("🚀🚀🚀 ~ file: localStorage.ts:6 ~ getLocalStorage ~ error:",t),null}},eo=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.log("🚀🚀🚀 ~ file: localStorage.ts:14 ~ setLocalStorage ~ error:",n)}},DE={pro:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},pre:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},preRoute:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},test:{Aptos:[{name:"Default",link:"https://fullnode.testnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.testnet.sui.io"},{name:"Suiscan",link:"https://rpc-testnet.suiscan.xyz:443"},{name:"Artifact",link:"https://testnet.artifact.systems/sui"},{name:"Custom",link:""}]}},U5={...DE[Vh]},ME="0.54.1",zE="1.25.0",FE={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class gw extends Error{}class yw extends gw{constructor(t,n){super(t),this.code=n,this.type=FE[n]??"ServerError"}}class CE extends gw{constructor(t,n,s){super(t),this.status=n,this.statusText=s}}var qd=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},nn=(e,t,n)=>(qd(e,t,"read from private field"),n?n.call(e):t.get(e)),ur=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},hi=(e,t,n,s)=>(qd(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),HE=(e,t,n,s)=>({set _(r){hi(e,t,r,n)},get _(){return nn(e,t,s)}}),mw=(e,t,n)=>(qd(e,t,"access private method"),n),Er,po,zs,Rr,Ao,pi,fl,ww,Nd,bw;function jE(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const WE={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class GE{constructor(t,n={}){if(ur(this,fl),ur(this,Nd),ur(this,Er,0),ur(this,po,0),ur(this,zs,null),ur(this,Rr,null),ur(this,Ao,new Set),ur(this,pi,new Map),this.endpoint=t,this.options={...WE,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=jE(this.endpoint))}async makeRequest(t,n){const s=await mw(this,fl,ww).call(this);return new Promise((r,i)=>{hi(this,Er,nn(this,Er)+1),nn(this,pi).set(nn(this,Er),{resolve:r,reject:i,timeout:setTimeout(()=>{nn(this,pi).delete(nn(this,Er)),i(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),s.send(JSON.stringify({jsonrpc:"2.0",id:nn(this,Er),method:t,params:n}))}).then(({error:r,result:i})=>{if(r)throw new yw(r.message,r.code);return i})}async subscribe(t){const n=new KE(t);return nn(this,Ao).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}Er=new WeakMap;po=new WeakMap;zs=new WeakMap;Rr=new WeakMap;Ao=new WeakMap;pi=new WeakMap;fl=new WeakSet;ww=function(){return nn(this,Rr)?nn(this,Rr):(hi(this,Rr,new Promise(e=>{var t;(t=nn(this,zs))==null||t.close(),hi(this,zs,new this.options.WebSocketConstructor(this.endpoint)),nn(this,zs).addEventListener("open",()=>{hi(this,po,0),e(nn(this,zs))}),nn(this,zs).addEventListener("close",()=>{HE(this,po)._++,nn(this,po)<=this.options.maxReconnects&&setTimeout(()=>{mw(this,Nd,bw).call(this)},this.options.reconnectTimeout)}),nn(this,zs).addEventListener("message",({data:n})=>{let s;try{s=JSON.parse(n)}catch(r){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:r}));return}if("id"in s&&s.id!=null&&nn(this,pi).has(s.id)){const{resolve:r,timeout:i}=nn(this,pi).get(s.id);clearTimeout(i),r(s)}else if("params"in s){const{params:r}=s;nn(this,Ao).forEach(i=>{i.subscriptionId===r.subscription&&r.subscription===i.subscriptionId&&i.onMessage(r.result)})}})})),nn(this,Rr))};Nd=new WeakSet;bw=async function(){var e;return(e=nn(this,zs))==null||e.close(),hi(this,Rr,null),Promise.allSettled([...nn(this,Ao)].map(t=>t.subscribe(this)))};class KE{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[n]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const n=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=n)}}var Dd=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ss=(e,t,n)=>(Dd(e,t,"read from private field"),n?n.call(e):t.get(e)),ia=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},hl=(e,t,n,s)=>(Dd(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),VE=(e,t,n)=>(Dd(e,t,"access private method"),n),ao,fs,go,pl,_w;class XE{constructor(t){ia(this,pl),ia(this,ao,0),ia(this,fs,void 0),ia(this,go,void 0),hl(this,fs,t)}fetch(t,n){const s=ss(this,fs).fetch??globalThis.fetch;if(!s)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return s(t,n)}async request(t){var r,i;hl(this,ao,ss(this,ao)+1);const n=await this.fetch(((r=ss(this,fs).rpc)==null?void 0:r.url)??ss(this,fs).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":ME,"Client-Target-Api-Version":zE,...(i=ss(this,fs).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:ss(this,ao),method:t.method,params:t.params})});if(!n.ok)throw new CE(`Unexpected status code: ${n.status}`,n.status,n.statusText);const s=await n.json();if("error"in s&&s.error!=null)throw new yw(s.error.message,s.error.code);return s.result}async subscribe(t){const n=await VE(this,pl,_w).call(this).subscribe(t);return async()=>!!await n()}}ao=new WeakMap;fs=new WeakMap;go=new WeakMap;pl=new WeakSet;_w=function(){var e;if(!ss(this,go)){const t=ss(this,fs).WebSocketConstructor??globalThis.WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");hl(this,go,new GE(((e=ss(this,fs).websocket)==null?void 0:e.url)??ss(this,fs).url,{WebSocketConstructor:t,...ss(this,fs).websocket}))}return ss(this,go)};function JE(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<e.length;s++){var r=e.charAt(s),i=r.charCodeAt(0);if(t[i]!==255)throw new TypeError(r+" is ambiguous");t[i]=s}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function l(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,b=0,T=0,R=g.length;T!==R&&g[T]===0;)T++,w++;for(var A=(R-T)*u+1>>>0,x=new Uint8Array(A);T!==R;){for(var E=g[T],S=0,q=A-1;(E!==0||S<b)&&q!==-1;q--,S++)E+=256*x[q]>>>0,x[q]=E%o>>>0,E=E/o>>>0;if(E!==0)throw new Error("Non-zero carry");b=S,T++}for(var O=A-b;O!==A&&x[O]===0;)O++;for(var F=a.repeat(w);O<A;++O)F+=e.charAt(x[O]);return F}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var w=0,b=0,T=0;g[w]===a;)b++,w++;for(var R=(g.length-w)*c+1>>>0,A=new Uint8Array(R);g[w];){var x=t[g.charCodeAt(w)];if(x===255)return;for(var E=0,S=R-1;(x!==0||E<T)&&S!==-1;S--,E++)x+=o*A[S]>>>0,A[S]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");T=E,w++}for(var q=R-T;q!==R&&A[q]===0;)q++;for(var O=new Uint8Array(b+(R-q)),F=b;q!==R;)O[F++]=A[q++];return O}function h(g){var w=f(g);if(w)return w;throw new Error("Non-base"+o+" character")}return{encode:l,decodeUnsafe:f,decode:h}}var YE=JE;const ZE=YE,QE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Tw=ZE(QE);const Ko=e=>Tw.encode(e),Vo=e=>Tw.decode(e);function br(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const Ou=8192;function Cs(e){if(e.length<Ou)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=Ou){const s=e.slice(n,n+Ou);t+=String.fromCharCode(...s)}return btoa(t)}function cu(e){var r;const t=e.startsWith("0x")?e.slice(2):e,s=((r=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:r.map(i=>parseInt(i,16)))??[];return Uint8Array.from(s)}function Gi(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function Md(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function ek(e){let t=0,n=0,s=0;for(;;){let r=e[s];if(s+=1,t|=(r&127)<<n,!(r&128))break;n+=7}return{value:t,length:s}}class xw{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),s=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+s).toString(10)}read128(){let t=BigInt(this.read64()),s=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+s).toString(10)}read256(){let t=BigInt(this.read128()),s=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+s).toString(10)}readBytes(t){let n=this.bytePosition+this.dataView.byteOffset,s=new Uint8Array(this.dataView.buffer,n,t);return this.shift(t),s}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t),{value:s,length:r}=ek(n);return this.shift(r),s}readVec(t){let n=this.readULEB(),s=[];for(let r=0;r<n;r++)s.push(t(this,r,n));return s}}function tk(e,t){switch(t){case"base58":return Ko(e);case"base64":return Cs(e);case"hex":return Gi(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function nk(e,t){switch(t){case"base58":return Vo(e);case"base64":return br(e);case"hex":return cu(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function zd(e,t=["<",">"]){const[n,s]=t,r=[];let i="",o=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===n&&o++,c===s&&o--,o===0&&c===","){r.push(i.trim()),i="";continue}i+=c}return r.push(i.trim()),r}class vw{constructor({size:t=1024,maxSize:n,allocateSize:s=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=n||t,this.allocateSize=s,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const n=this.bytePosition+t;if(n>this.size){const s=Math.min(this.maxSize,this.size+this.allocateSize);if(n>s)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=s;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return Iu(BigInt(t),8).forEach(n=>this.write8(n)),this}write128(t){return Iu(BigInt(t),16).forEach(n=>this.write8(n)),this}write256(t){return Iu(BigInt(t),32).forEach(n=>this.write8(n)),this}writeULEB(t){return Md(t).forEach(n=>this.write8(n)),this}writeVec(t,n){return this.writeULEB(t.length),Array.from(t).forEach((s,r)=>n(this,s,r,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return tk(this.toBytes(),t)}}function Iu(e,t){let n=new Uint8Array(t),s=0;for(;e>0;)n[s]=Number(e%BigInt(256)),e=e/BigInt(256),s+=1;return n}var Sw=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},hs=(e,t,n)=>(Sw(e,t,"read from private field"),n?n.call(e):t.get(e)),tc=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},nc=(e,t,n,s)=>(Sw(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ri,co,Ua,fr;const Aw=class{constructor(e){tc(this,ri,void 0),tc(this,co,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),nc(this,ri,e.write),nc(this,co,e.serialize??((t,n)=>{const s=new vw({size:this.serializedSize(t)??void 0,...n});return hs(this,ri).call(this,t,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),hs(this,ri).call(this,e,t)}serialize(e,t){return this.validate(e),new sk(this,hs(this,co).call(this,e,t))}parse(e){const t=new xw(e);return this.read(t)}transform({name:e,input:t,output:n}){return new Aw({name:e??this.name,read:s=>n(this.read(s)),write:(s,r)=>hs(this,ri).call(this,t(s),r),serializedSize:s=>this.serializedSize(t(s)),serialize:(s,r)=>hs(this,co).call(this,t(s),r),validate:s=>this.validate(t(s))})}};let gs=Aw;ri=new WeakMap;co=new WeakMap;const Ew=Symbol.for("@mysten/serialized-bcs");function Fd(e){return!!e&&typeof e=="object"&&e[Ew]===!0}class sk{constructor(t,n){tc(this,Ua,void 0),tc(this,fr,void 0),nc(this,Ua,t),nc(this,fr,n)}get[Ew](){return!0}toBytes(){return hs(this,fr)}toHex(){return Gi(hs(this,fr))}toBase64(){return Cs(hs(this,fr))}toBase58(){return Ko(hs(this,fr))}parse(){return hs(this,Ua).parse(hs(this,fr))}}Ua=new WeakMap;fr=new WeakMap;function sc({size:e,...t}){return new gs({...t,serializedSize:()=>e})}function $u({readMethod:e,writeMethod:t,...n}){return sc({...n,read:s=>s[e](),write:(s,r)=>r[t](s),validate:s=>{var r;if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);(r=n.validate)==null||r.call(n,s)}})}function Lu({readMethod:e,writeMethod:t,...n}){return sc({...n,read:s=>s[e](),write:(s,r)=>r[t](BigInt(s)),validate:s=>{var i;const r=BigInt(s);if(r<0||r>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${r}. Expected value in range 0-${n.maxValue}`);(i=n.validate)==null||i.call(n,r)}})}function rk({serialize:e,...t}){const n=new gs({...t,serialize:e,write:(s,r)=>{for(const i of n.serialize(s).toBytes())r.write8(i)}});return n}function ik({toBytes:e,fromBytes:t,...n}){return new gs({...n,read:s=>{const r=s.readULEB(),i=s.readBytes(r);return t(i)},write:(s,r)=>{const i=e(s);r.writeULEB(i.length);for(let o=0;o<i.length;o++)r.write8(i[o])},serialize:s=>{const r=e(s),i=Md(r.length),o=new Uint8Array(i.length+r.length);return o.set(i,0),o.set(r,i.length),o},validate:s=>{var r;if(typeof s!="string")throw new TypeError(`Invalid ${n.name} value: ${s}. Expected string`);(r=n.validate)==null||r.call(n,s)}})}function ok(e){let t=null;function n(){return t||(t=e()),t}return new gs({name:"lazy",read:s=>n().read(s),serializedSize:s=>n().serializedSize(s),write:(s,r)=>n().write(s,r),serialize:(s,r)=>n().serialize(s,r).toBytes()})}const Q={u8(e){return $u({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return $u({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return $u({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return Lu({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return Lu({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return Lu({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return sc({name:"bool",size:1,read:t=>t.read8()===1,write:(t,n)=>n.write8(t?1:0),...e,validate:t=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return rk({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(Md(t)),...e})},bytes(e,t){return sc({name:`bytes[${e}]`,size:e,read:n=>n.readBytes(e),write:(n,s)=>{for(let r=0;r<e;r++)s.write8(n[r]??0)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},string(e){return ik({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,n){return new gs({name:`${t.name}[${e}]`,read:s=>{const r=new Array(e);for(let i=0;i<e;i++)r[i]=t.read(s);return r},write:(s,r)=>{for(const i of s)t.write(i,r)},...n,validate:s=>{var r;if((r=n==null?void 0:n.validate)==null||r.call(n,s),!("length"in s))throw new TypeError(`Expected array, found ${typeof s}`);if(s.length!==e)throw new TypeError(`Expected array of length ${e}, found ${s.length}`)}})},option(e){return Q.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>"Some"in t?t.Some:null})},vector(e,t){return new gs({name:`vector<${e.name}>`,read:n=>{const s=n.readULEB(),r=new Array(s);for(let i=0;i<s;i++)r[i]=e.read(n);return r},write:(n,s)=>{s.writeULEB(n.length);for(const r of n)e.write(r,s)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(e,t){return new gs({name:`(${e.map(n=>n.name).join(", ")})`,serializedSize:n=>{let s=0;for(let r=0;r<e.length;r++){const i=e[r].serializedSize(n[r]);if(i==null)return null;s+=i}return s},read:n=>{const s=[];for(const r of e)s.push(r.read(n));return s},write:(n,s)=>{for(let r=0;r<e.length;r++)e[r].write(n[r],s)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}})},struct(e,t,n){const s=Object.entries(t);return new gs({name:e,serializedSize:r=>{let i=0;for(const[o,a]of s){const c=a.serializedSize(r[o]);if(c==null)return null;i+=c}return i},read:r=>{const i={};for(const[o,a]of s)i[o]=a.read(r);return i},write:(r,i)=>{for(const[o,a]of s)a.write(r[o],i)},...n,validate:r=>{var i;if((i=n==null?void 0:n.validate)==null||i.call(n,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`)}})},enum(e,t,n){const s=Object.entries(t);return new gs({name:e,read:r=>{const i=r.readULEB(),[o,a]=s[i];return{[o]:(a==null?void 0:a.read(r))??!0}},write:(r,i)=>{const[o,a]=Object.entries(r)[0];for(let c=0;c<s.length;c++){const[u,l]=s[c];if(u===o){i.writeULEB(c),l==null||l.write(a,i);return}}},...n,validate:r=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`);const i=Object.keys(r);if(i.length!==1)throw new TypeError(`Expected object with one key, found ${i.length}`);const[o]=i;if(!Object.hasOwn(t,o))throw new TypeError(`Invalid enum variant ${o}`)}})},map(e,t){return Q.vector(Q.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:n=>[...n.entries()],output:n=>{const s=new Map;for(const[r,i]of n)s.set(r,i);return s}})},generic(e,t){return(...n)=>t(...n).transform({name:`${t.name}<${n.map(s=>s.name).join(", ")}>`,input:s=>s,output:s=>s})},lazy(e){return ok(e)}},ak=32,uo=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof uo){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(uo.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);e.withPrimitives!==!1&&ck(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,n){if(typeof e=="string"||Array.isArray(e)){const{name:s,params:r}=this.parseTypeName(e);return this.getTypeInterface(s).encode(this,t,n,r)}if(typeof e=="object"){const s=this.tempKey();return new uo(this).registerStructType(s,e).ser(s,t,n)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,n){if(typeof t=="string")if(n)t=nk(t,n);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:s,params:r}=this.parseTypeName(e);return this.getTypeInterface(s).decode(this,t,r)}if(typeof e=="object"){const s=new uo(this),r=this.tempKey();return s.registerStructType(r,e).de(r,t,n)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,n,s=()=>!0){const{name:r,params:i}=this.parseTypeName(e);return this.types.set(r,{encode(o,a,c,u){const l=i.reduce((f,h,g)=>Object.assign(f,{[h]:u[g]}),{});return this._encodeRaw.call(o,new vw(c),a,u,l)},decode(o,a,c){const u=i.reduce((l,f,h)=>Object.assign(l,{[f]:c[h]}),{});return this._decodeRaw.call(o,new xw(a),c,u)},_encodeRaw(o,a,c,u){if(s(a))return t.call(this,o,a,c,u);throw new Error(`Validation failed for type ${r}, data: ${a}`)},_decodeRaw(o,a,c){return n.call(this,o,a,c)}}),this}registerBcsType(e,t){return this.registerType(e,(n,s,r)=>{const i=r.map(o=>new gs({name:String(o),write:(a,c)=>{const{name:u,params:l}=this.parseTypeName(o),f=this.getTypeInterface(u),h=l.reduce((g,w,b)=>Object.assign(g,{[w]:r[b]}),{});return f._encodeRaw.call(this,c,a,l,h)},read:()=>{throw new Error("Not implemented")}}));return t(...i).write(s,n),n},(n,s)=>{const r=s.map(i=>new gs({name:String(i),write:(o,a)=>{throw new Error("Not implemented")},read:o=>{const{name:a,params:c}=this.parseTypeName(i),u=this.getTypeInterface(a),l=c.reduce((f,h,g)=>Object.assign(f,{[h]:s[g]}),{});return u._decodeRaw.call(this,o,c,l)}}));return t(...r).read(n)}),this}registerAddressType(e,t,n="hex"){switch(n){case"base64":return this.registerType(e,function(r,i){return br(i).reduce((o,a)=>o.write8(a),r)},function(r){return Cs(r.readBytes(t))});case"hex":return this.registerType(e,function(r,i){return cu(i).reduce((o,a)=>o.write8(a),r)},function(r){return Gi(r.readBytes(t))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:n}=this.parseTypeName(e);if(n.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(r,i,o,a){return r.writeVec(i,(c,u)=>{let l=o[0];if(!l)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:f,params:h}=this.parseTypeName(l);if(this.hasType(f))return this.getTypeInterface(f)._encodeRaw.call(this,c,u,h,a);if(!(f in a))throw new Error(`Unable to find a matching type definition for ${f} in vector; make sure you passed a generic`);let{name:g,params:w}=this.parseTypeName(a[f]);return this.getTypeInterface(g)._encodeRaw.call(this,c,u,w,a)})},function(r,i,o){return r.readVec(a=>{let c=i[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:u,params:l}=this.parseTypeName(c);if(this.hasType(u))return this.getTypeInterface(u)._decodeRaw.call(this,a,l,o);if(!(u in o))throw new Error(`Unable to find a matching type definition for ${u} in vector; make sure you passed a generic`);let{name:f,params:h}=this.parseTypeName(o[u]);return this.getTypeInterface(f)._decodeRaw.call(this,a,h,o)})})}registerStructType(e,t){for(let o in t){let a=this.tempKey(),c=t[o];!Array.isArray(c)&&typeof c!="string"&&(t[o]=a,this.registerStructType(a,c))}let n=Object.freeze(t),s=Object.keys(n),{name:r,params:i}=this.parseTypeName(e);return this.registerType(e,function(a,c,u,l){if(!c||c.constructor!==Object)throw new Error(`Expected ${r} to be an Object, got: ${c}`);if(u.length!==i.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${i.length}, got: ${u.length}`);for(let f of s){if(!(f in c))throw new Error(`Struct ${r} requires field ${f}:${n[f]}`);const{name:h,params:g}=this.parseTypeName(n[f]);if(!i.includes(h))this.getTypeInterface(h)._encodeRaw.call(this,a,c[f],g,l);else{const w=i.indexOf(h);let{name:b,params:T}=this.parseTypeName(u[w]);if(this.hasType(b)){this.getTypeInterface(b)._encodeRaw.call(this,a,c[f],T,l);continue}if(!(b in l))throw new Error(`Unable to find a matching type definition for ${b} in ${r}; make sure you passed a generic`);let{name:R,params:A}=this.parseTypeName(l[b]);this.getTypeInterface(R)._encodeRaw.call(this,a,c[f],A,l)}}return a},function(a,c,u){if(c.length!==i.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${i.length}, got: ${c.length}`);let l={};for(let f of s){const{name:h,params:g}=this.parseTypeName(n[f]);if(!i.includes(h))l[f]=this.getTypeInterface(h)._decodeRaw.call(this,a,g,u);else{const w=i.indexOf(h);let{name:b,params:T}=this.parseTypeName(c[w]);if(this.hasType(b)){l[f]=this.getTypeInterface(b)._decodeRaw.call(this,a,T,u);continue}if(!(b in u))throw new Error(`Unable to find a matching type definition for ${b} in ${r}; make sure you passed a generic`);let{name:R,params:A}=this.parseTypeName(u[b]);l[f]=this.getTypeInterface(R)._decodeRaw.call(this,a,A,u)}}return l})}registerEnumType(e,t){for(let o in t){let a=this.tempKey(),c=t[o];c!==null&&!Array.isArray(c)&&typeof c!="string"&&(t[o]=a,this.registerStructType(a,c))}let n=Object.freeze(t),s=Object.keys(n),{name:r,params:i}=this.parseTypeName(e);return this.registerType(e,function(a,c,u,l){if(!c)throw new Error(`Unable to write enum "${r}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${r}", expected object with properties: "${s.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let f=Object.keys(c)[0];if(f===void 0)throw new Error(`Empty object passed as invariant of the enum "${r}"`);let h=s.indexOf(f);if(h===-1)throw new Error(`Unknown invariant of the enum "${r}", allowed values: "${s.join(" | ")}"; received "${f}"`);let g=s[h],w=n[g];if(a.write8(h),w===null)return a;let b=i.indexOf(w),T=b===-1?w:u[b];{let{name:R,params:A}=this.parseTypeName(T);return this.getTypeInterface(R)._encodeRaw.call(this,a,c[f],A,l)}},function(a,c,u){let l=a.readULEB(),f=s[l],h=n[f];if(l===-1)throw new Error(`Decoding type mismatch, expected enum "${r}" invariant index, received "${l}"`);if(h===null)return{[f]:!0};let g=i.indexOf(h),w=g===-1?h:c[g];{let{name:b,params:T}=this.parseTypeName(w);return{[f]:this.getTypeInterface(b)._decodeRaw.call(this,a,T,u)}}})}getTypeInterface(e){let t=this.types.get(e);if(typeof t=="string"){let n=[];for(;typeof t=="string";){if(n.includes(t))throw new Error(`Recursive definition found: ${n.join(" -> ")} -> ${t}`);n.push(t),t=this.types.get(t)}}if(t===void 0)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[a,...c]=e;return{name:a,params:c}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,n]=this.schema.genericSeparators||["<",">"],s=e.indexOf(t),r=Array.from(e).reverse().indexOf(n);if(s===-1&&r===-1)return{name:e,params:[]};if(s===-1||r===-1)throw new Error(`Unclosed generic in name '${e}'`);let i=e.slice(0,s),o=zd(e.slice(s+1,e.length-r-1),this.schema.genericSeparators);return{name:i,params:o}}};let Ht=uo;Ht.U8="u8";Ht.U16="u16";Ht.U32="u32";Ht.U64="u64";Ht.U128="u128";Ht.U256="u256";Ht.BOOL="bool";Ht.VECTOR="vector";Ht.ADDRESS="address";Ht.STRING="string";Ht.HEX="hex-string";Ht.BASE58="base58-string";Ht.BASE64="base64-string";function ck(e){e.registerType(Ht.U8,function(t,n){return t.write8(n)},function(t){return t.read8()},t=>t<256),e.registerType(Ht.U16,function(t,n){return t.write16(n)},function(t){return t.read16()},t=>t<65536),e.registerType(Ht.U32,function(t,n){return t.write32(n)},function(t){return t.read32()},t=>t<=4294967296n),e.registerType(Ht.U64,function(t,n){return t.write64(n)},function(t){return t.read64()}),e.registerType(Ht.U128,function(t,n){return t.write128(n)},function(t){return t.read128()}),e.registerType(Ht.U256,function(t,n){return t.write256(n)},function(t){return t.read256()}),e.registerType(Ht.BOOL,function(t,n){return t.write8(n)},function(t){return t.read8().toString(10)==="1"}),e.registerType(Ht.STRING,function(t,n){return t.writeVec(Array.from(n),(s,r)=>s.write8(r.charCodeAt(0)))},function(t){return t.readVec(n=>n.read8()).map(n=>String.fromCharCode(Number(n))).join("")},t=>!0),e.registerType(Ht.HEX,function(t,n){return t.writeVec(Array.from(cu(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return Gi(new Uint8Array(n))}),e.registerType(Ht.BASE58,function(t,n){return t.writeVec(Array.from(Vo(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return Ko(new Uint8Array(n))}),e.registerType(Ht.BASE64,function(t,n){return t.writeVec(Array.from(br(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return Cs(new Uint8Array(n))})}function uk(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:ak,addressEncoding:"hex"}}class lk extends TypeError{constructor(t,n){let s;const{message:r,explanation:i,...o}=t,{path:a}=t,c=a.length===0?r:`At path: ${a.join(".")} -- ${r}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>s??(s=[t,...n()])}}function dk(e){return Ws(e)&&typeof e[Symbol.iterator]=="function"}function Ws(e){return typeof e=="object"&&e!=null}function Is(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function fk(e){const{done:t,value:n}=e.next();return t?void 0:n}function hk(e,t,n,s){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:r,branch:i}=t,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Is(s)}\``}=e;return{value:s,type:o,refinement:a,key:r[r.length-1],path:r,branch:i,...e,message:c}}function*Ih(e,t,n,s){dk(e)||(e=[e]);for(const r of e){const i=hk(r,t,n,s);i&&(yield i)}}function*Cd(e,t,n={}){const{path:s=[],branch:r=[e],coerce:i=!1,mask:o=!1}=n,a={path:s,branch:r};if(i&&(e=t.coercer(e,a),o&&t.type!=="type"&&Ws(t.schema)&&Ws(e)&&!Array.isArray(e)))for(const u in e)t.schema[u]===void 0&&delete e[u];let c="valid";for(const u of t.validator(e,a))u.explanation=n.message,c="not_valid",yield[u,void 0];for(let[u,l,f]of t.entries(e,a)){const h=Cd(l,f,{path:u===void 0?s:[...s,u],branch:u===void 0?r:[...r,l],coerce:i,mask:o,message:n.message});for(const g of h)g[0]?(c=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):i&&(l=g[1],u===void 0?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):Ws(e)&&(l!==void 0||u in e)&&(e[u]=l))}if(c!=="not_valid")for(const u of t.refiner(e,a))u.explanation=n.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,e])}class xr{constructor(t){const{type:n,schema:s,validator:r,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=s,this.entries=a,this.coercer=o,r?this.validator=(c,u)=>{const l=r(c,u);return Ih(l,u,this,c)}:this.validator=()=>[],i?this.refiner=(c,u)=>{const l=i(c,u);return Ih(l,u,this,c)}:this.refiner=()=>[]}assert(t,n){return gl(t,this,n)}create(t,n){return kw(t,this,n)}is(t){return Ks(t,this)}mask(t,n){return Bw(t,this,n)}validate(t,n={}){return Xo(t,this,n)}}function gl(e,t,n){const s=Xo(e,t,{message:n});if(s[0])throw s[0]}function kw(e,t,n){const s=Xo(e,t,{coerce:!0,message:n});if(s[0])throw s[0];return s[1]}function Bw(e,t,n){const s=Xo(e,t,{coerce:!0,mask:!0,message:n});if(s[0])throw s[0];return s[1]}function Ks(e,t){return!Xo(e,t)[0]}function Xo(e,t,n={}){const s=Cd(e,t,n),r=fk(s);return r[0]?[new lk(r[0],function*(){for(const o of s)o[0]&&(yield o[0])}),void 0]:[void 0,r[1]]}function $s(e,t){return new xr({type:e,schema:null,validator:t})}function $h(){return $s("any",()=>!0)}function Un(e){return new xr({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,s]of t.entries())yield[n,s,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Is(t)}`}})}function pk(){return $s("bigint",e=>typeof e=="bigint")}function gk(){return $s("boolean",e=>typeof e=="boolean")}function Os(){return $s("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${Is(e)}`)}function pn(e){const t=Is(e),n=typeof e;return new xr({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator(s){return s===e||`Expected the literal \`${t}\`, but received: ${Is(s)}`}})}function yk(){return $s("never",()=>!1)}function mk(e){return new xr({...e,validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)})}function wk(){return $s("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${Is(e)}`)}function jt(e){const t=e?Object.keys(e):[],n=yk();return new xr({type:"object",schema:e||null,*entries(s){if(e&&Ws(s)){const r=new Set(Object.keys(s));for(const i of t)r.delete(i),yield[i,s[i],e[i]];for(const i of r)yield[i,s[i],n]}},validator(s){return Ws(s)||`Expected an object, but received: ${Is(s)}`},coercer(s){return Ws(s)?{...s}:s}})}function Rs(e){return new xr({...e,validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)})}function bk(e,t){return new xr({type:"record",schema:null,*entries(n){if(Ws(n))for(const s in n){const r=n[s];yield[s,s,e],yield[s,r,t]}},validator(n){return Ws(n)||`Expected an object, but received: ${Is(n)}`}})}function Xn(){return $s("string",e=>typeof e=="string"||`Expected a string, but received: ${Is(e)}`)}function _s(e){const t=e.map(n=>n.type).join(" | ");return new xr({type:"union",schema:null,coercer(n){for(const s of e){const[r,i]=s.validate(n,{coerce:!0});if(!r)return i}return n},validator(n,s){const r=[];for(const i of e){const[...o]=Cd(n,i,s),[a]=o;if(a[0])for(const[c]of o)c&&r.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Is(n)}`,...r]}})}function _k(){return $s("unknown",()=>!0)}const Tk=32;function Lh(e){try{return Vo(e).length===Tk}catch{return!1}}const Hd=32;function pr(e){return Sk(e)&&Ak(e)===Hd}function oa(e){return pr(e)}function xk(e){return e.includes("::")?Pw(e):e}function Pw(e){const[t,n]=e.split("::"),s=e.slice(t.length+n.length+4),r=s.includes("<")?s.slice(0,s.indexOf("<")):s,i=s.includes("<")?zd(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(o=>xk(o.trim())):[];return{address:Xt(t),module:n,name:r,typeParams:i}}function vk(e){const{address:t,module:n,name:s,typeParams:r}=typeof e=="string"?Pw(e):e,i=(r==null?void 0:r.length)>0?`<${r.map(o=>typeof o=="string"?o:vk(o)).join(",")}>`:"";return`${t}::${n}::${s}${i}`}function Xt(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(Hd*2,"0")}`}function Hs(e,t=!1){return Xt(e,t)}function Sk(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function Ak(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const Ek=/^vector<(.+)>$/,kk=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Fs{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const s=t.match(Ek);if(s)return{vector:Fs.parseFromStr(s[1],n)};const r=t.match(kk);if(r)return{struct:{address:n?Xt(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:Fs.parseStructTypeArgs(r[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return zd(t).map(s=>Fs.parseFromStr(s,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${Fs.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,s=n.typeParams.map(Fs.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${s?`<${s}>`:""}`}throw new Error("Invalid TypeTag")}}const Dt=new Ht({...uk(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function Uw(e){return Q.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function Bk(e){return Q.enum("Option",{None:null,Some:e})}function jd(e){return e.transform({input:t=>({[t.kind]:t}),output:t=>{const n=Object.keys(t)[0];return{kind:n,...t[n]}}})}const ws=Q.bytes(Hd).transform({input:e=>typeof e=="string"?cu(Xt(e)):e,output:e=>Xt(Gi(e))}),Wd=Q.vector(Q.u8()).transform({name:"ObjectDigest",input:e=>Vo(e),output:e=>Ko(new Uint8Array(e))}),Eo=Q.struct("SuiObjectRef",{objectId:ws,version:Q.u64(),digest:Wd}),Gd=Q.struct("SharedObjectRef",{objectId:ws,initialSharedVersion:Q.u64(),mutable:Q.bool()}),rc=Q.enum("ObjectArg",{ImmOrOwned:Eo,Shared:Gd,Receiving:Eo}),Kd=Q.enum("CallArg",{Pure:Q.vector(Q.u8()),Object:rc,ObjVec:Q.vector(rc)}),Ki=Q.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:Q.lazy(()=>Ki),struct:Q.lazy(()=>Qd),u16:null,u32:null,u256:null}),us=jd(Q.enum("Argument",{GasCoin:null,Input:Q.struct("Input",{index:Q.u16()}),Result:Q.struct("Result",{index:Q.u16()}),NestedResult:Q.struct("NestedResult",{index:Q.u16(),resultIndex:Q.u16()})})),Vd=Q.struct("ProgrammableMoveCall",{package:ws,module:Q.string(),function:Q.string(),type_arguments:Q.vector(Ki),arguments:Q.vector(us)}).transform({input:e=>{const[t,n,s]=e.target.split("::"),r=e.typeArguments.map(i=>Fs.parseFromStr(i,!0));return{package:Xt(t),module:n,function:s,type_arguments:r,arguments:e.arguments}},output:e=>({target:[e.package,e.module,e.function].join("::"),arguments:e.arguments,typeArguments:e.type_arguments.map(Fs.tagToString)})}),Xd=jd(Q.enum("Transaction",{MoveCall:Vd,TransferObjects:Q.struct("TransferObjects",{objects:Q.vector(us),address:us}),SplitCoins:Q.struct("SplitCoins",{coin:us,amounts:Q.vector(us)}),MergeCoins:Q.struct("MergeCoins",{destination:us,sources:Q.vector(us)}),Publish:Q.struct("Publish",{modules:Q.vector(Q.vector(Q.u8())),dependencies:Q.vector(ws)}),MakeMoveVec:Q.struct("MakeMoveVec",{type:Bk(Ki),objects:Q.vector(us)}),Upgrade:Q.struct("Upgrade",{modules:Q.vector(Q.vector(Q.u8())),dependencies:Q.vector(ws),packageId:ws,ticket:us})})),Jd=Q.struct("ProgrammableTransaction",{inputs:Q.vector(Kd),transactions:Q.vector(Xd)}),Yd=Q.enum("TransactionKind",{ProgrammableTransaction:Jd,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Zd=Q.enum("TransactionExpiration",{None:null,Epoch:Uw()}),Qd=Q.struct("StructTag",{address:ws,module:Q.string(),name:Q.string(),typeParams:Q.vector(Ki)}),ef=Q.struct("GasData",{payment:Q.vector(Eo),owner:ws,price:Q.u64(),budget:Q.u64()}),tf=Q.struct("TransactionDataV1",{kind:Yd,sender:ws,gasData:ef,expiration:Zd}),nf=Q.enum("TransactionData",{V1:tf}),Pk=Q.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Uk=Q.enum("IntentVersion",{V0:null}),Rk=Q.enum("AppId",{Sui:null}),Ok=Q.struct("Intent",{scope:Pk,version:Uk,appId:Rk}),Ik=Q.generic(["T"],e=>Q.struct("IntentMessage<T>",{intent:Ok,value:e})),sf=Q.enum("CompressedSignature",{ED25519:Q.fixedArray(64,Q.u8()),Secp256k1:Q.fixedArray(64,Q.u8()),Secp256r1:Q.fixedArray(64,Q.u8()),ZkLogin:Q.vector(Q.u8())}),rf=Q.enum("PublicKey",{ED25519:Q.fixedArray(32,Q.u8()),Secp256k1:Q.fixedArray(33,Q.u8()),Secp256r1:Q.fixedArray(33,Q.u8()),ZkLogin:Q.vector(Q.u8())}),of=Q.struct("MultiSigPkMap",{pubKey:rf,weight:Q.u8()}),af=Q.struct("MultiSigPublicKey",{pk_map:Q.vector(of),threshold:Q.u16()}),Rw=Q.struct("MultiSig",{sigs:Q.vector(sf),bitmap:Q.u16(),multisig_pk:af}),$k=Q.vector(Q.u8()).transform({input:e=>typeof e=="string"?br(e):e,output:e=>Cs(new Uint8Array(e))}),Ow=Q.struct("SenderSignedTransaction",{intentMessage:Ik(nf),txSignatures:Q.vector($k)}),Iw=Q.vector(Ow,{name:"SenderSignedData"}),mn={...Q,U8:Q.u8(),U16:Q.u16(),U32:Q.u32(),U64:Q.u64(),U128:Q.u128(),U256:Q.u256(),ULEB128:Q.uleb128(),Bool:Q.bool(),String:Q.string(),Address:ws,Argument:us,CallArg:Kd,CompressedSignature:sf,GasData:ef,MultiSig:Rw,MultiSigPkMap:of,MultiSigPublicKey:af,ObjectArg:rc,ObjectDigest:Wd,ProgrammableMoveCall:Vd,ProgrammableTransaction:Jd,PublicKey:rf,SenderSignedData:Iw,SenderSignedTransaction:Ow,SharedObjectRef:Gd,StructTag:Qd,SuiObjectRef:Eo,Transaction:Xd,TransactionData:nf,TransactionDataV1:tf,TransactionExpiration:Zd,TransactionKind:Yd,TypeTag:Ki,ser:Dt.ser.bind(Dt),de:Dt.de.bind(Dt),getTypeInterface:Dt.getTypeInterface.bind(Dt),hasType:Dt.hasType.bind(Dt),parseTypeName:Dt.parseTypeName.bind(Dt),registerAddressType:Dt.registerAddressType.bind(Dt),registerAlias:Dt.registerAlias.bind(Dt),registerBcsType:Dt.registerBcsType.bind(Dt),registerEnumType:Dt.registerEnumType.bind(Dt),registerStructType:Dt.registerStructType.bind(Dt),registerType:Dt.registerType.bind(Dt),types:Dt.types};Dt.registerBcsType("utf8string",()=>Q.string({name:"utf8string"}));Dt.registerBcsType("unsafe_u64",()=>Uw());Dt.registerBcsType("enumKind",e=>jd(e));[ws,us,Kd,sf,ef,Rw,of,af,rc,Wd,Vd,Jd,rf,Iw,Gd,Qd,Eo,Xd,nf,tf,Zd,Yd,Ki].forEach(e=>{Dt.registerBcsType(e.name,()=>e)});const Lk=/^(?:[a-z0-9][a-z0-9-]{0,62}(?:\.[a-z0-9][a-z0-9-]{0,62})*)?@[a-z0-9][a-z0-9-]{0,62}$/i,qk=/^(?:[a-z0-9][a-z0-9-]{0,62}\.)+sui$/i;function Nk(e,t="at"){const n=e.toLowerCase();let s;if(n.includes("@")){if(!Lk.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[r,i]=n.split("@");s=[...r?r.split("."):[],i]}else{if(!qk.test(n))throw new Error(`Invalid SuiNS name ${e}`);s=n.split(".").slice(0,-1)}return t==="dot"?`${s.join(".")}.sui`:`${s.slice(0,-1).join(".")}@${s[s.length-1]}`}BigInt(1e9);const cf="0x1",$w="0x2",R5=Hs("0x6"),Dk=`${$w}::sui::SUI`;Hs("0x5");const ic=jt({digest:Xn(),objectId:Xn(),version:_s([wk(),Xn(),pk()])}),Mk=_s([jt({ImmOrOwned:ic}),jt({Shared:jt({objectId:Xn(),initialSharedVersion:_s([Os(),Xn()]),mutable:gk()})}),jt({Receiving:ic})]),oc=jt({Pure:Un(Os())}),yl=jt({Object:Mk}),ac=_s([oc,yl]);function zk(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:Fd(e)?e.toBytes():mn.ser(t,e,{maxSize:1/0}).toBytes())}}const Kn={Pure:zk,ObjectRef({objectId:e,digest:t,version:n}){return{Object:{ImmOrOwned:{digest:t,version:n,objectId:Xt(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{Object:{Shared:{mutable:t,initialSharedVersion:n,objectId:Xt(e)}}}},ReceivingRef({objectId:e,digest:t,version:n}){return{Object:{Receiving:{digest:t,version:n,objectId:Xt(e)}}}}};function qh(e){return typeof e=="string"?Xt(e):"ImmOrOwned"in e.Object?Xt(e.Object.ImmOrOwned.objectId):"Receiving"in e.Object?Xt(e.Object.Receiving.objectId):Xt(e.Object.Shared.objectId)}function Fk(e){return typeof e=="object"&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}function Ck(e){var t;return((t=Fk(e))==null?void 0:t.mutable)??!1}function Hk(e){function t(n,s){return e(n,s)}return t.u8=n=>e(mn.U8.serialize(n)),t.u16=n=>e(mn.U16.serialize(n)),t.u32=n=>e(mn.U32.serialize(n)),t.u64=n=>e(mn.U64.serialize(n)),t.u128=n=>e(mn.U128.serialize(n)),t.u256=n=>e(mn.U256.serialize(n)),t.bool=n=>e(mn.Bool.serialize(n)),t.string=n=>e(mn.String.serialize(n)),t.address=n=>e(mn.Address.serialize(n)),t.id=t.address,t}function jn(e,t){return kw(e,t)}function ml(e){return typeof e=="object"&&"MutableReference"in e?e.MutableReference:void 0}function Lw(e){return typeof e=="object"&&"Reference"in e?e.Reference:void 0}function uf(e){if(typeof e=="object"&&"Struct"in e)return e;const t=Lw(e),n=ml(e);if(typeof t=="object"&&"Struct"in t)return t;if(typeof n=="object"&&"Struct"in n)return n}const jk="object",Wk="ID",Gk="ascii",Kk="String",Vk="string",Xk="String",Jk="option",Yk="Option",Zk={address:$w,module:jk,name:Wk},Qk={address:cf,module:Gk,name:Kk},e3={address:cf,module:Vk,name:Xk},t3={address:cf,module:Jk,name:Yk},aa=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function n3(e){var n;const t=(n=uf(e))==null?void 0:n.Struct;return(t==null?void 0:t.address)==="0x2"&&(t==null?void 0:t.module)==="tx_context"&&(t==null?void 0:t.name)==="TxContext"}function qu(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}const s3=["Address","Bool","U8","U16","U32","U64","U128","U256"];function wl(e,t){if(typeof e=="string"&&s3.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])qu("number",t);else if(e==="Bool")qu("boolean",t);else if(e==="Address"&&(qu("string",t),t&&!pr(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}else if(typeof e=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((t===void 0||typeof t=="string")&&e.Vector==="U8")return"string";if(t!==void 0&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const n=wl(e.Vector,t?t[0]:void 0);return n===void 0?void 0:`vector<${n}>`}if("Struct"in e){if(aa(e.Struct,Qk))return"string";if(aa(e.Struct,e3))return"utf8string";if(aa(e.Struct,Zk))return"address";if(aa(e.Struct,t3)){const n={Vector:e.Struct.typeArguments[0]};return wl(n,t)}}}function r3(e,t){const n=Array.from(`${e}::`).map(r=>r.charCodeAt(0)),s=new Uint8Array(n.length+t.length);return s.set(n),s.set(t,n.length),Qw(s,{dkLen:32})}const i3=e=>_s([jt({None:_s([pn(!0),pn(null)])}),jt({Some:e})]),ko=_s([jt({kind:pn("Input"),index:Os(),value:Rs($h()),type:Rs(pn("object"))}),jt({kind:pn("Input"),index:Os(),value:Rs($h()),type:pn("pure")})]),o3=[ko,jt({kind:pn("GasCoin")}),jt({kind:pn("Result"),index:Os()}),jt({kind:pn("NestedResult"),index:Os(),resultIndex:Os()})],Vs=_s([...o3]),qw=jt({kind:pn("MoveCall"),target:$s("target",Xn().validator),typeArguments:Un(Xn()),arguments:Un(Vs)}),Nw=jt({kind:pn("TransferObjects"),objects:Un(Vs),address:Vs}),Dw=jt({kind:pn("SplitCoins"),coin:Vs,amounts:Un(Vs)}),Mw=jt({kind:pn("MergeCoins"),destination:Vs,sources:Un(Vs)}),zw=jt({kind:pn("MakeMoveVec"),type:Rs(i3(bk(Xn(),_k()))),objects:Un(Vs)}),Fw=jt({kind:pn("Publish"),modules:Un(Un(Os())),dependencies:Un(Xn())}),Cw=jt({kind:pn("Upgrade"),modules:Un(Un(Os())),dependencies:Un(Xn()),packageId:Xn(),ticket:Vs}),a3=[qw,Nw,Dw,Mw,Fw,Cw,zw],c3=_s([...a3]),vr={MoveCall(e){return jn({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},qw)},TransferObjects(e,t){return t.kind==="Input"&&t.type==="pure"&&typeof t.value!="object"&&(t.value=Kn.Pure(mn.Address.serialize(t.value))),jn({kind:"TransferObjects",objects:e,address:t},Nw)},SplitCoins(e,t){return t.forEach(n=>{n.kind==="Input"&&n.type==="pure"&&typeof n.value!="object"&&(n.value=Kn.Pure(mn.U64.serialize(n.value)))}),jn({kind:"SplitCoins",coin:e,amounts:t},Dw)},MergeCoins(e,t){return jn({kind:"MergeCoins",destination:e,sources:t},Mw)},Publish({modules:e,dependencies:t}){return jn({kind:"Publish",modules:e.map(n=>typeof n=="string"?Array.from(br(n)):n),dependencies:t.map(n=>Hs(n))},Fw)},Upgrade({modules:e,dependencies:t,packageId:n,ticket:s}){return jn({kind:"Upgrade",modules:e.map(r=>typeof r=="string"?Array.from(br(r)):r),dependencies:t.map(r=>Hs(r)),packageId:n,ticket:s},Cw)},MakeMoveVec({type:e,objects:t}){return jn({kind:"MakeMoveVec",type:e?{Some:Fs.parseFromStr(e)}:{None:null},objects:t},zw)}},u3=Rs(mk(_s([jt({Epoch:Os()}),jt({None:_s([pn(!0),pn(null)])})]))),Nh=$s("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),l3=jt({budget:Rs(Nh),price:Rs(Nh),payment:Rs(Un(ic)),owner:Rs(Xn())}),ca=jt({version:pn(1),sender:Rs(Xn()),expiration:u3,gasConfig:l3,inputs:Un(ko),transactions:Un(c3)});function Dh(e){return Xt(e).replace("0x","")}class js{constructor(t){this.version=1,this.sender=t==null?void 0:t.sender,this.expiration=t==null?void 0:t.expiration,this.gasConfig=(t==null?void 0:t.gasConfig)??{},this.inputs=(t==null?void 0:t.inputs)??[],this.transactions=(t==null?void 0:t.transactions)??[]}static fromKindBytes(t){const n=mn.TransactionKind.parse(t),s="ProgrammableTransaction"in n?n.ProgrammableTransaction:null;if(!s)throw new Error("Unable to deserialize from bytes.");const r=jn({version:1,gasConfig:{},inputs:s.inputs.map((i,o)=>jn({kind:"Input",value:i,index:o,type:Ks(i,oc)?"pure":"object"},ko)),transactions:s.transactions},ca);return js.restore(r)}static fromBytes(t){var o;const n=mn.TransactionData.parse(t),s=n==null?void 0:n.V1,r="ProgrammableTransaction"in s.kind?(o=s==null?void 0:s.kind)==null?void 0:o.ProgrammableTransaction:null;if(!s||!r)throw new Error("Unable to deserialize from bytes.");const i=jn({version:1,sender:s.sender,expiration:s.expiration,gasConfig:s.gasData,inputs:r.inputs.map((a,c)=>jn({kind:"Input",value:a,index:c,type:Ks(a,oc)?"pure":"object"},ko)),transactions:r.transactions},ca);return js.restore(i)}static restore(t){gl(t,ca);const n=new js;return Object.assign(n,t),n}static getDigestFromBytes(t){const n=r3("TransactionData",t);return Ko(n)}build({maxSizeBytes:t=1/0,overrides:n,onlyTransactionKind:s}={}){const r=this.inputs.map(l=>(gl(l.value,ac),l.value)),i={ProgrammableTransaction:{inputs:r,transactions:this.transactions}};if(s)return mn.TransactionKind.serialize(i,{maxSize:t}).toBytes();const o=(n==null?void 0:n.expiration)??this.expiration,a=(n==null?void 0:n.sender)??this.sender,c={...this.gasConfig,...n==null?void 0:n.gasConfig};if(!a)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const u={sender:Dh(a),expiration:o||{None:!0},gasData:{payment:c.payment,owner:Dh(this.gasConfig.owner??a),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:r,transactions:this.transactions}}};return mn.TransactionData.serialize({V1:u},{maxSize:t}).toBytes()}getDigest(){const t=this.build({onlyTransactionKind:!1});return js.getDigestFromBytes(t)}snapshot(){return jn(this,ca)}}var lf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Nt=(e,t,n)=>(lf(e,t,"read from private field"),n?n.call(e):t.get(e)),Ns=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ua=(e,t,n,s)=>(lf(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),wn=(e,t,n)=>(lf(e,t,"access private method"),n),kt,lo,Ra,fo,Oa,_r,Cr,df,Hw,ff,jw,hf,Ww,pf,Gw,Ia,bl;const d3={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function f3(e){const t={kind:"Result",index:e},n=[],s=r=>n[r]??(n[r]={kind:"NestedResult",index:e,resultIndex:r});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(r,i){if(i in r)return Reflect.get(r,i);if(i===Symbol.iterator)return function*(){let a=0;for(;;)yield s(a),a++};if(typeof i=="symbol")return;const o=parseInt(i,10);if(!(Number.isNaN(o)||o<0))return s(o)}})}function h3(e){const t=uf(e);return t?t.Struct.address==="0x2"&&t.Struct.module==="transfer"&&t.Struct.name==="Receiving":!1}function Bo(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}const Kw=Symbol.for("@mysten/transaction"),Nu={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},p3=1000n,g3=50,y3=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(n,s)=>e.slice(s*t,s*t+t));function m3(e){return!!e&&typeof e=="object"&&e[Kw]===!0}const _l=class{constructor(e){Ns(this,lo),Ns(this,fo),Ns(this,_r),Ns(this,df),Ns(this,ff),Ns(this,hf),Ns(this,pf),Ns(this,Ia),Ns(this,kt,void 0),ua(this,kt,new js(e?e.blockData:void 0))}static fromKind(e){const t=new _l;return ua(t,kt,js.fromKindBytes(typeof e=="string"?br(e):e)),t}static from(e){const t=new _l;return typeof e!="string"||!e.startsWith("{")?ua(t,kt,js.fromBytes(typeof e=="string"?br(e):e)):ua(t,kt,js.restore(JSON.parse(e))),t}setSender(e){Nt(this,kt).sender=e}setSenderIfNotSet(e){Nt(this,kt).sender||(Nt(this,kt).sender=e)}setExpiration(e){Nt(this,kt).expiration=e}setGasPrice(e){Nt(this,kt).gasConfig.price=String(e)}setGasBudget(e){Nt(this,kt).gasConfig.budget=String(e)}setGasOwner(e){Nt(this,kt).gasConfig.owner=e}setGasPayment(e){Nt(this,kt).gasConfig.payment=e.map(t=>Bw(t,ic))}get blockData(){return Nt(this,kt).snapshot()}get[Kw](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Hk((e,t)=>Fd(e)?wn(this,lo,Ra).call(this,"pure",{Pure:Array.from(e.toBytes())}):wn(this,lo,Ra).call(this,"pure",e instanceof Uint8Array?Kn.Pure(e):t?Kn.Pure(e,t):e))}),this.pure}get gas(){return{kind:"GasCoin"}}object(e){if(typeof e=="object"&&"kind"in e)return e;const t=qh(e),n=Nt(this,kt).inputs.find(s=>s.type==="object"&&t===qh(s.value));return n&&Ks(n.value,yl)&&"Shared"in n.value.Object&&Ks(e,yl)&&"Shared"in e.Object&&(n.value.Object.Shared.mutable=n.value.Object.Shared.mutable||e.Object.Shared.mutable),n??wn(this,lo,Ra).call(this,"object",typeof e=="string"?Xt(e):e)}objectRef(...e){return this.object(Kn.ObjectRef(...e))}receivingRef(...e){return this.object(Kn.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Kn.SharedObjectRef(...e))}add(e){const t=Nt(this,kt).transactions.push(e);return f3(t-1)}splitCoins(e,t){return this.add(vr.SplitCoins(typeof e=="string"?this.object(e):e,t.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):wn(this,fo,Oa).call(this,n))))}mergeCoins(e,t){return this.add(vr.MergeCoins(typeof e=="string"?this.object(e):e,t.map(n=>typeof n=="string"?this.object(n):n)))}publish({modules:e,dependencies:t}){return this.add(vr.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,packageId:n,ticket:s}){return this.add(vr.Upgrade({modules:e,dependencies:t,packageId:n,ticket:typeof s=="string"?this.object(s):s}))}moveCall({arguments:e,typeArguments:t,target:n}){return this.add(vr.MoveCall({arguments:e==null?void 0:e.map(s=>wn(this,fo,Oa).call(this,s)),typeArguments:t,target:n}))}transferObjects(e,t){return this.add(vr.TransferObjects(e.map(n=>typeof n=="string"?this.object(n):n),typeof t=="string"?this.pure.address(t):wn(this,fo,Oa).call(this,t)))}makeMoveVec({type:e,objects:t}){return this.add(vr.MakeMoveVec({type:e,objects:t.map(n=>typeof n=="string"?this.object(n):n)}))}serialize(){return JSON.stringify(Nt(this,kt).snapshot())}async sign(e){const{signer:t,...n}=e,s=await this.build(n);return t.signTransactionBlock(s)}async build(e={}){return await wn(this,Ia,bl).call(this,e),Nt(this,kt).build({maxSizeBytes:wn(this,_r,Cr).call(this,"maxTxSizeBytes",e),onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await wn(this,Ia,bl).call(this,e),Nt(this,kt).getDigest()}};let Mh=_l;kt=new WeakMap;lo=new WeakSet;Ra=function(e,t){const n=Nt(this,kt).inputs.length,s=jn({kind:"Input",value:typeof t=="bigint"?String(t):t,index:n,type:e},ko);return Nt(this,kt).inputs.push(s),s};fo=new WeakSet;Oa=function(e){return Fd(e)?this.pure(e):e};_r=new WeakSet;Cr=function(e,{protocolConfig:t,limits:n}){if(n&&typeof n[e]=="number")return n[e];if(!t)return d3[e];const s=t==null?void 0:t.attributes[Nu[e]];if(!s)throw new Error(`Missing expected protocol config: "${Nu[e]}"`);const r="u64"in s?s.u64:"u32"in s?s.u32:s.f64;if(!r)throw new Error(`Unexpected protocol config value found for: "${Nu[e]}"`);return Number(r)};df=new WeakSet;Hw=function(e){const t=wn(this,_r,Cr).call(this,"maxPureArgumentSize",e);Nt(this,kt).inputs.forEach((n,s)=>{if(Ks(n.value,oc)&&n.value.Pure.length>t)throw new Error(`Input at index ${s} is too large, max pure input size is ${t} bytes, got ${n.value.Pure.length} bytes`)})};ff=new WeakSet;jw=async function(e){if(Nt(this,kt).gasConfig.payment){const r=wn(this,_r,Cr).call(this,"maxGasObjects",e);if(Nt(this,kt).gasConfig.payment.length>r)throw new Error(`Payment objects exceed maximum amount: ${r}`)}if(e.onlyTransactionKind||Nt(this,kt).gasConfig.payment)return;const t=Nt(this,kt).gasConfig.owner??Nt(this,kt).sender,s=(await Bo(e).getCoins({owner:t,coinType:Dk})).data.filter(r=>!Nt(this,kt).inputs.find(o=>Ks(o.value,ac)&&"Object"in o.value&&"ImmOrOwned"in o.value.Object?r.coinObjectId===o.value.Object.ImmOrOwned.objectId:!1)).slice(0,wn(this,_r,Cr).call(this,"maxGasObjects",e)-1).map(r=>({objectId:r.coinObjectId,digest:r.digest,version:r.version}));if(!s.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(s)};hf=new WeakSet;Ww=async function(e){e.onlyTransactionKind||Nt(this,kt).gasConfig.price||this.setGasPrice(await Bo(e).getReferenceGasPrice())};pf=new WeakSet;Gw=async function(e){const{inputs:t,transactions:n}=Nt(this,kt),s=[],r=[];if(t.forEach(i=>{if(i.type==="object"&&typeof i.value=="string"){r.push({id:Xt(i.value),input:i});return}}),n.forEach(i=>{if(i.kind==="MoveCall"&&i.arguments.some(a=>a.kind==="Input"&&!Ks(t[a.index].value,ac))&&s.push(i),i.kind==="SplitCoins"&&i.amounts.forEach(o=>{if(o.kind==="Input"){const a=t[o.index];typeof a.value!="object"&&(a.value=Kn.Pure(mn.U64.serialize(a.value)))}}),i.kind==="TransferObjects"&&i.address.kind==="Input"){const o=t[i.address.index];typeof o.value!="object"&&(o.value=Kn.Pure(mn.Address.serialize(o.value)))}}),s.length&&await Promise.all(s.map(async i=>{const[o,a,c]=i.target.split("::"),u=await Bo(e).getNormalizedMoveFunction({package:Hs(o),module:a,function:c}),f=u.parameters.length>0&&n3(u.parameters.at(-1))?u.parameters.slice(0,u.parameters.length-1):u.parameters;if(f.length!==i.arguments.length)throw new Error("Incorrect number of arguments.");f.forEach((h,g)=>{const w=i.arguments[g];if(w.kind!=="Input")return;const b=t[w.index];if(Ks(b.value,ac))return;const T=b.value,R=wl(h,T);if(R){b.value=Kn.Pure(T,R);return}if(uf(h)!=null||typeof h=="object"&&"TypeParameter"in h){if(typeof T!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(T,null,2)}`);r.push({id:T,input:b,normalizedType:h});return}throw new Error(`Unknown call arg type ${JSON.stringify(h,null,2)} for value ${JSON.stringify(T,null,2)}`)})})),r.length){const i=[...new Set(r.map(({id:l})=>l))],o=y3(i,g3),a=(await Promise.all(o.map(l=>Bo(e).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat();let c=new Map(i.map((l,f)=>[l,a[f]]));const u=Array.from(c).filter(([l,f])=>f.error).map(([l,f])=>l);if(u.length)throw new Error(`The following input objects are invalid: ${u.join(", ")}`);r.forEach(({id:l,input:f,normalizedType:h})=>{var T;const g=c.get(l),w=(T=g.data)==null?void 0:T.owner,b=w&&typeof w=="object"&&"Shared"in w?w.Shared.initial_shared_version:void 0;if(b){const R=h!=null&&ml(h)==null&&Lw(h)==null,A=Ck(f.value)||R||h!=null&&ml(h)!=null;f.value=Kn.SharedObjectRef({objectId:l,initialSharedVersion:b,mutable:A})}else h&&h3(h)?f.value=Kn.ReceivingRef(g.data):f.value=Kn.ObjectRef(g.data)})}};Ia=new WeakSet;bl=async function(e){if(!e.onlyTransactionKind&&!Nt(this,kt).sender)throw new Error("Missing transaction sender");if(!e.protocolConfig&&!e.limits&&e.client&&(e.protocolConfig=await e.client.getProtocolConfig()),await Promise.all([wn(this,hf,Ww).call(this,e),wn(this,pf,Gw).call(this,e)]),!e.onlyTransactionKind&&(await wn(this,ff,jw).call(this,e),!Nt(this,kt).gasConfig.budget)){const t=await Bo(e).dryRunTransactionBlock({transactionBlock:Nt(this,kt).build({maxSizeBytes:wn(this,_r,Cr).call(this,"maxTxSizeBytes",e),overrides:{gasConfig:{budget:String(wn(this,_r,Cr).call(this,"maxTxGas",e)),payment:[]}}})});if(t.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const n=p3*BigInt(this.blockData.gasConfig.price||1n),s=BigInt(t.effects.gasUsed.computationCost)+n,r=s+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);this.setGasBudget(r>s?r:s)}wn(this,df,Hw).call(this,e)};const w3=Symbol.for("@mysten/SuiClient");class b3{get[w3](){return!0}constructor(t){this.transport=t.transport??new XE({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!pr(Xt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!pr(Xt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!pr(Xt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!pr(Xt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,n){return await this.transport.request({method:t,params:n})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!pr(Xt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!oa(Hs(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(s=>{if(!s||!oa(Hs(s)))throw new Error(`Invalid Sui Object id ${s}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!Lh(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(s=>{if(!Lh(s))throw new Error(`Invalid Transaction digest ${s}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock(t){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Cs(t.transactionBlock),Array.isArray(t.signature)?t.signature:[t.signature],t.options,t.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:t,signer:n,...s}){let r;t instanceof Uint8Array?r=t:(t.setSenderIfNotSet(n.toSuiAddress()),r=await t.build({client:this}));const{signature:i,bytes:o}=await n.signTransactionBlock(r);return this.executeTransactionBlock({transactionBlock:o,signature:i,...s})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!pr(Xt(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(n=>{if(!n||!oa(Hs(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var s;let n;if(m3(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=Cs(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")n=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)n=Cs(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,(s=t.gasPrice)==null?void 0:s.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Cs(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!oa(Hs(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),n=Vo(t.digest);return Gi(n.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...n}){const{nextCursor:s,hasNextPage:r,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:r,nextCursor:s,data:i.map(o=>Nk(o,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransactionBlock({signal:t,timeout:n=60*1e3,pollInterval:s=2*1e3,...r}){const i=AbortSignal.timeout(n),o=new Promise((a,c)=>{i.addEventListener("abort",()=>c(i.reason))});for(o.catch(()=>{});!i.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(r)}catch{await Promise.race([new Promise(c=>setTimeout(c,s)),o])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}const _3=async e=>new Promise(async(t,n)=>{try{if(e.link.includes("cetus")&&window.location.host!=="app.cetus.zone")throw new Error("403");const s=new b3({url:e.link}),r=new Date().getTime();if(await s.getRpcApiVersion()){const o=new Date().getTime();t({[e.name]:parseInt(String((o-r)/2))})}else n({[e.name]:0})}catch(s){console.log("0726###testRpc###err###",s),n({[e.name]:0})}}),zh=new Jw,Vw=lc("index",{state:()=>({slippage:localStorage.getItem("cetus-slippage")||"0.5",isShowSuccess:!1,isShowRejected:!1,isShowWaiting:!1,isNotSupportMsafeError:!1,currentTransactionDesc:"",currentTransactionDescText:"",currentTransactionTxid:"",next_timestamp_ms:"",theme:"",chainName:"",positionNum:0,positionAmount:"",poolAmount:"",isRefresh:0,statsData:{},topPoolsList:[],topPoolsObj:{},newTopPoolsObj:{},topTokensList:[],topTokenObj:{},newtopTokenObj:{},lang:zh.get("lang")||"en",addressLpTokens:{},addressHistTokens:{},transactionList:JSON.parse(localStorage.getItem("transactionList")||"[]")||[],newtransactionList:JSON.parse(localStorage.getItem("newtransactionList")||"[]")||[],newAddtransactionList:[],liquiditytransactionList:null,isSelect:"",openMore:!1,openSwitchChain:!1,openSwitchLang:!1,openExplorer:!1,openH5Icon:!1,isShowMore:!1,isShowNotifi:!1,isShowSetting:!1,isShowSettingH5:!1,isIdoOpenTerm:!1,isShowRouterModal:!1,isShowRpcH5:!1,isShowExplorerH5:!1,isShowHeaderMore:!1,isShowHeaderEarn:!1,isShowBuyCrypto:!1,isShowBuyCryptoConfirm:!1,isShowBuyCryptoSelect:!1,isShowLoadMore:!0,aptosRpcs:[],suiRpcs:[],filterCoinsObj:null,filterCreatePoolCoin:{"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS":"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0x2::sui::SUI":"0x2::sui::SUI","0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS"},suiRpcTimeDelayObj:null,currentCrypto:"",currentExplorer:"",isShowBuyCryptoKODO:!1,isShowHeaderTrade:!1,getStatsError:!1,liquiditySourceList:[],liquiditySourceObj:{},includeRoutes:"",supportDepth3:"",collectTokenListSui:[],collectTokenListAptos:[],importTokenList:[],importTokenListObj:{}}),actions:{copy(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const n=document.createElement("input");n.readOnly=!0,document.body.appendChild(n),n.value=e,n.select(),document.execCommand("Copy"),document.body.removeChild(n)}const{$notify:t}=gr();t.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:$n.global.t("tips.copySuccess")},null)]),class:"ant-notification-copy"})},setImportTokenList(e){this.importTokenList=e,this.importTokenListObj=Object.fromEntries(e==null?void 0:e.map(t=>[t.address,t])),localStorage.setItem("importTokenList",JSON.stringify(e))},setOpenMore(e){this.openMore=e},setIsShowHeaderMore(e){this.isShowHeaderMore=e},setIsShowHeaderEarn(e){this.isShowHeaderEarn=e},setOpenSwitchChain(e){this.openSwitchChain=e},setOpenSwitchLang(e){this.openSwitchLang=e},setOpenH5Icon(e){this.openH5Icon=e},setIsShowMore(e){this.isShowMore=e},setSlippage(e){console.log(e,"slippage##"),this.slippage=e,localStorage.setItem("cetus-slippage",e)},setPositiomNum(){this.positionNum=this.positionNum+1},setTheme(e){console.log(e,"theme##"),this.theme=e,e=="default"?(this.chainName="Aptos",localStorage.setItem("chainName","Aptos")):e=="sui"?(this.chainName="Sui",localStorage.setItem("chainName","Sui")):e=="sui2"&&(this.chainName="Sui2",localStorage.setItem("chainName","Sui2"));const t=e=="default"?"Aptos":"Sui";this.currentExplorer=localStorage.getItem(`${t}-currentExplorerUrl`)||Za[t][0].link},setIsShowSuccess(e){this.isShowSuccess=e},setIsNotSupportMsafeError(e){this.isNotSupportMsafeError=e},setIsShowRejected(e){this.isShowRejected=e},setIsShowWaiting(e){this.isShowWaiting=e},setTransactionDesc(e){this.currentTransactionDesc=e},setTransactionDescText(e){console.log(e,"====>status"),this.currentTransactionDescText=e},setTransactionTxid(e){this.currentTransactionTxid=e},async getStatsData(e,t){var n,s;try{let r=[],i=[];console.log("0216###getStatsData###this.chainName####",e);const{data:o}=e=="Aptos"?await fetch(`${ge[e||"Aptos"].api}/v2/swap/count`).then(h=>h.json()):await fetch(`${ge[e||"Sui"].api}/v2/sui/swap/count/v3`).then(h=>h.json()),a=e=="Aptos"?await fetch(`${ge[e||"Aptos"].api}/v2/contract/price`).then(h=>h.json()):await fetch(`${ge[e||"Sui"].api}/v2/sui/contract/price`).then(h=>h.json());i=Object.fromEntries(a.data.list.map(h=>[h.swap_account,h])),this.addressHistTokens=i,this.statsData=o||{};const c=[];let u=!1,l,f={};if(e=="Sui"&&(f=In("Sui").getSuiTokenObj()),o&&o.pools){for(let h=0;h<o.pools.length;h++){u=!1;const g=o.pools[h],w=g.rewarder_apr[0]?Number(g.rewarder_apr[0].substring(0,g.rewarder_apr[0].length-1)):0,b=g.rewarder_apr[1]?Number(g.rewarder_apr[1].substring(0,g.rewarder_apr[1].length-1)):0,T=g.rewarder_apr[2]?Number(g.rewarder_apr[2].substring(0,g.rewarder_apr[2].length-1)):0,R=w+b+T;g.stable_farming&&g.stable_farming.stable_rewarder.map(A=>{A.amount_second>0&&(u=!0)}),l=g.stable_farming&&g.stable_farming.apr*100,c.push({...g,pure_tvl_in_usd:e=="Aptos"?(g==null?void 0:g.pure_tvl_in_usd)||g.tvl_in_usd:g==null?void 0:g.pure_tvl_in_usd,aprNum:g?e=="Aptos"?String(Number(g.apr_7day.substring(0,g.apr_7day.length-1))+R):String(Number(g.apr_24h.substring(0,g.apr_24h.length-1))+R):"0",token_a_address:g.token_a_reserves=="SUI"?"0x2::sui::SUI":g.token_a_address,token_b_address:g.token_b_reserves=="SUI"?"0x2::sui::SUI":g.token_b_address,apr_7day:e=="Aptos"?g.apr_7day:g.apr_24h,fee_24_h:g.fee_24_h?g.fee_24_h:"",isStableFarming:u,stableFarmingApr:l,coin_a:{...f[g.token_a_address],logo_url:(n=f[g.token_a_address])==null?void 0:n.icon_url},coin_b:{...f[g.token_b_address],logo_url:(s=f[g.token_b_address])==null?void 0:s.icon_url}})}this.topPoolsList=c,console.log("🚀🚀🚀 ~ file: index.ts:245 ~ getStatsData ~ this.topPoolsList:",this.topPoolsList),r=Object.fromEntries(o.pools.map(h=>[h.swap_account,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}])),this.topPoolsObj=Object.fromEntries(o.pools.map(h=>[h.name,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}])),this.newTopPoolsObj=Object.fromEntries(o.pools.map(h=>[h.swap_account,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}]))}if(o&&o.tokens){const g=o.tokens.filter(w=>!t||!t[w.address]).map(w=>({...w,pure_tvl_in_usd:e==="Aptos"?(w==null?void 0:w.pure_tvl_in_usd)||(w==null?void 0:w.tvl_in_usd):w==null?void 0:w.pure_tvl_in_usd}));this.topTokensList=g,this.addressLpTokens=r,this.topTokenObj=Object.fromEntries(g.map(w=>[w.name,w])),this.newtopTokenObj=Object.fromEntries(g.map(w=>[w.address,w]))}this.getStatsError=!1}catch(r){console.log("🚀🚀🚀 ~ file: index.ts:245 ~ getStatsData ~ error:",r),this.getStatsError=!0}},setLang(e){zh.set("lang",e),this.lang=e},setTransactionList(e){console.log(this.newAddtransactionList,"====>newAddtransactionLists")},clearTransactionList(){const e=this.newAddtransactionList.filter(t=>t.chainName!==this.chainName);this.newAddtransactionList=e,localStorage.setItem("newAddtransactionList",e.length>0?JSON.stringify(e):"")},setIsSelect(e){console.log(e,"status===>"),this.isSelect=e},setIsShowNotifi(e){this.isShowNotifi=e},setIsShowSetting(e){this.isShowSetting=e},setIsShowSettingH5(e){this.isShowSettingH5=e},setIsIdoOpenTerm(e){this.isIdoOpenTerm=e},setIsShowRouterModal(e){this.isShowRouterModal=e},setIsOpenExplorer(e){this.openExplorer=e},setIsShowExplorerH5(e){this.isShowExplorerH5=e},setIsShowRpcH5(e){this.isShowRpcH5=e},setPositiomAmount(e){this.positionAmount=e},setPoolAmount(e){this.poolAmount=e},setisRefresh(){this.isRefresh=this.isRefresh+1},async getFrontConfig(){var e;this.getAggregatorSetting();try{let t;const n=localStorage.getItem("SuiFrontConfig"),s=new Date().getTime(),r=n?JSON.parse(n):null;if(r&&Number(r==null?void 0:r.expiration)>s&&(r!=null&&r.data)&&!La(r==null?void 0:r.data))t=r==null?void 0:r.data;else{const i=await fetch(`${ge.Sui.api}/v2/sui/front_config`).then(o=>o.json());if((i==null?void 0:i.code)===200){t=i==null?void 0:i.data;try{const o={expiration:new Date().getTime()+3e5,data:i==null?void 0:i.data};localStorage.setItem("SuiFrontConfig",JSON.stringify(o))}catch(o){console.log("getFrontConfig localStorage setItem Error: ",o)}}}if(t){this.aptosRpcs=(t==null?void 0:t.aptos_nodes)||[],this.suiRpcs=(t==null?void 0:t.sui_nodes)||[];const i=(t==null?void 0:t.filter_coins)||[],o=Object.fromEntries(i.map(a=>[a,a]));this.filterCoinsObj=o,((e=t==null?void 0:t.sui_nodes)==null?void 0:e.length)>0&&this.setRpcTimedelay(t==null?void 0:t.sui_nodes)}}catch(t){console.log("getFrontConfig###error###",t),this.filterCoinsObj={}}},async getTransactionList(e,t,n){this.isShowLoadMore=!0;let s;n==0?s=new Date().getTime():s=this.next_timestamp_ms,console.log(s,this.next_timestamp_ms,"this.next_timestamp_ms");try{const r=e=="Aptos"?await fetch(`${ge[e||"Aptos"].api}/v2/aptos/pool/history?limit=10&offset=${n}&timestamp_ms=${s}&address=${t}`).then(i=>i.json()):await fetch(`${ge[e||"Sui"].api}/v2/sui/pool/history?limit=10&offset=${n}&timestamp_ms=${s}&address=${t}`).then(i=>i.json());r!=null&&r.data?(r.data.list.length<10&&(this.isShowLoadMore=!1),n==0?(this.liquiditytransactionList=r.data.list,this.next_timestamp_ms=r.data.next_timestamp_ms):(this.next_timestamp_ms=r.data.next_timestamp_ms,this.liquiditytransactionList=this.liquiditytransactionList.concat(r.data.list))):(this.isShowLoadMore=!1,n==0&&(this.liquiditytransactionList=[])),console.log(r,this.isShowLoadMore,"2132131")}catch(r){this.isShowLoadMore=!1,this.liquiditytransactionList=[],console.log("getFrontConfig###error###",r)}},setClearLiquiditytransactionList(){this.liquiditytransactionList=null},async setRpcTimedelay(e){try{console.log("setRpcTimedelay###rpcList###",e);const t=[];e.forEach(s=>{s.name!=="Custom"&&t.push(_3(s))});const n=await Promise.allSettled(t);if(console.log("0726###setRpcTimedelay###res###",n),(n==null?void 0:n.length)>0){let s={};n.forEach(r=>{s={...s,...r==null?void 0:r.value}}),console.log("suiRpcTimeDelayObj###",s),this.suiRpcTimeDelayObj=s}}catch(t){console.log("setRpcTimedelay###err###",t)}},setIsShowBuyCrypto(e){this.isShowBuyCrypto=e},setIsShowBuyCryptoConfirm(e){this.isShowBuyCryptoConfirm=e},setIsShowBuyCryptoSelect(e){this.isShowBuyCryptoSelect=e},setIsShowBuyCryptoKODO(e){this.isShowBuyCryptoKODO=e},setCurrentCrypto(e){this.currentCrypto=e},setCurrentExplorer(e){this.currentExplorer=e,console.log(e,"value360##")},setIsShowHeaderTrade(e){this.isShowHeaderTrade=e},getAggregatorSetting(){var r;const e=Ru(Oh);if(console.log("🚀 ~ file: index.ts:469 ~ getAggregatorSetting ~ aggregatorLocal:",e),e&&e.length===Qi.length&&((r=e[0])!=null&&r.type))this.liquiditySourceList=e;else{const i=Qi.map(o=>{var u,l,f;const a=e&&(e==null?void 0:e.filter(h=>o.name.indexOf(h.name)>-1));let c;return a&&(a!=null&&a[0])?o.name.indexOf("Kriya")>-1?c={...o,status:(u=a==null?void 0:a[0])==null?void 0:u.status}:o.name==="Aftermath LSD"&&((l=a==null?void 0:a[0])==null?void 0:l.name)==="Aftermath"?c={...o}:o.name.indexOf("FlowX")>-1?c={...o,status:(f=a==null?void 0:a[0])==null?void 0:f.status}:c={...o,...a==null?void 0:a[0]}:c={...o},c});this.liquiditySourceList=i}const t=Object.fromEntries(Qi==null?void 0:Qi.map(i=>[i.name.toUpperCase(),i]));this.liquiditySourceObj={...t,CETUS:{name:"CETUS",logo:"/sui-image/logo_cetus@2x.png"}};let n,s;try{n=Ru("includeRoutes")||"open",s=Ru("supportDepth3")||""}catch{n="open",s=""}this.includeRoutes=n,this.supportDepth3=s},setAggregatorSetting(e,t,n){this.liquiditySourceList=e,this.includeRoutes=t,eo(Oh,e),eo("includeRoutes",t),n!==void 0&&(this.supportDepth3=n,eo("supportDepth3",n))},setSupportDepth3(e){this.supportDepth3=e},setCollectTokenList(e,t){t=="Aptos"?(this.collectTokenListAptos=JSON.parse(JSON.stringify(e)),eo("collectTokenListAptos",e)):(this.collectTokenListSui=JSON.parse(JSON.stringify(e)),eo("collectTokenListSui",e))}}});var cc={},T3={get exports(){return cc},set exports(e){cc=e}},uc={},x3={get exports(){return uc},set exports(e){uc=e}},Fh;function v3(){return Fh||(Fh=1,function(e,t){(function(n,s){e.exports=s()})(to,function(){var n=n||function(s,r){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof to<"u"&&to.crypto&&(i=to.crypto),!i&&typeof jh=="function")try{i=Kh}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function A(){}return function(x){var E;return A.prototype=x,E=new A,A.prototype=null,E}}(),c={},u=c.lib={},l=u.Base=function(){return{extend:function(A){var x=a(this);return A&&x.mixIn(A),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var A=this.extend();return A.init.apply(A,arguments),A},init:function(){},mixIn:function(A){for(var x in A)A.hasOwnProperty(x)&&(this[x]=A[x]);A.hasOwnProperty("toString")&&(this.toString=A.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=u.WordArray=l.extend({init:function(A,x){A=this.words=A||[],x!=r?this.sigBytes=x:this.sigBytes=A.length*4},toString:function(A){return(A||g).stringify(this)},concat:function(A){var x=this.words,E=A.words,S=this.sigBytes,q=A.sigBytes;if(this.clamp(),S%4)for(var O=0;O<q;O++){var F=E[O>>>2]>>>24-O%4*8&255;x[S+O>>>2]|=F<<24-(S+O)%4*8}else for(var Y=0;Y<q;Y+=4)x[S+Y>>>2]=E[Y>>>2];return this.sigBytes+=q,this},clamp:function(){var A=this.words,x=this.sigBytes;A[x>>>2]&=4294967295<<32-x%4*8,A.length=s.ceil(x/4)},clone:function(){var A=l.clone.call(this);return A.words=this.words.slice(0),A},random:function(A){for(var x=[],E=0;E<A;E+=4)x.push(o());return new f.init(x,A)}}),h=c.enc={},g=h.Hex={stringify:function(A){for(var x=A.words,E=A.sigBytes,S=[],q=0;q<E;q++){var O=x[q>>>2]>>>24-q%4*8&255;S.push((O>>>4).toString(16)),S.push((O&15).toString(16))}return S.join("")},parse:function(A){for(var x=A.length,E=[],S=0;S<x;S+=2)E[S>>>3]|=parseInt(A.substr(S,2),16)<<24-S%8*4;return new f.init(E,x/2)}},w=h.Latin1={stringify:function(A){for(var x=A.words,E=A.sigBytes,S=[],q=0;q<E;q++){var O=x[q>>>2]>>>24-q%4*8&255;S.push(String.fromCharCode(O))}return S.join("")},parse:function(A){for(var x=A.length,E=[],S=0;S<x;S++)E[S>>>2]|=(A.charCodeAt(S)&255)<<24-S%4*8;return new f.init(E,x)}},b=h.Utf8={stringify:function(A){try{return decodeURIComponent(escape(w.stringify(A)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(A){return w.parse(unescape(encodeURIComponent(A)))}},T=u.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(A){typeof A=="string"&&(A=b.parse(A)),this._data.concat(A),this._nDataBytes+=A.sigBytes},_process:function(A){var x,E=this._data,S=E.words,q=E.sigBytes,O=this.blockSize,F=O*4,Y=q/F;A?Y=s.ceil(Y):Y=s.max((Y|0)-this._minBufferSize,0);var Se=Y*O,Oe=s.min(Se*4,q);if(Se){for(var N=0;N<Se;N+=O)this._doProcessBlock(S,N);x=S.splice(0,Se),E.sigBytes-=Oe}return new f.init(x,Oe)},clone:function(){var A=l.clone.call(this);return A._data=this._data.clone(),A},_minBufferSize:0});u.Hasher=T.extend({cfg:l.extend(),init:function(A){this.cfg=this.cfg.extend(A),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(A){return this._append(A),this._process(),this},finalize:function(A){A&&this._append(A);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(A){return function(x,E){return new A.init(E).finalize(x)}},_createHmacHelper:function(A){return function(x,E){return new R.HMAC.init(A,E).finalize(x)}}});var R=c.algo={};return c}(Math);return n})}(x3)),uc}var Ch;function S3(){return Ch||(Ch=1,function(e,t){(function(n,s){e.exports=s(v3())})(to,function(n){return function(s){var r=n,i=r.lib,o=i.WordArray,a=i.Hasher,c=r.algo,u=[],l=[];(function(){function g(R){for(var A=s.sqrt(R),x=2;x<=A;x++)if(!(R%x))return!1;return!0}function w(R){return(R-(R|0))*4294967296|0}for(var b=2,T=0;T<64;)g(b)&&(T<8&&(u[T]=w(s.pow(b,1/2))),l[T]=w(s.pow(b,1/3)),T++),b++})();var f=[],h=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(g,w){for(var b=this._hash.words,T=b[0],R=b[1],A=b[2],x=b[3],E=b[4],S=b[5],q=b[6],O=b[7],F=0;F<64;F++){if(F<16)f[F]=g[w+F]|0;else{var Y=f[F-15],Se=(Y<<25|Y>>>7)^(Y<<14|Y>>>18)^Y>>>3,Oe=f[F-2],N=(Oe<<15|Oe>>>17)^(Oe<<13|Oe>>>19)^Oe>>>10;f[F]=Se+f[F-7]+N+f[F-16]}var D=E&S^~E&q,M=T&R^T&A^R&A,oe=(T<<30|T>>>2)^(T<<19|T>>>13)^(T<<10|T>>>22),Te=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),ve=O+Te+D+l[F]+f[F],ke=oe+M;O=q,q=S,S=E,E=x+ve|0,x=A,A=R,R=T,T=ve+ke|0}b[0]=b[0]+T|0,b[1]=b[1]+R|0,b[2]=b[2]+A|0,b[3]=b[3]+x|0,b[4]=b[4]+E|0,b[5]=b[5]+S|0,b[6]=b[6]+q|0,b[7]=b[7]+O|0},_doFinalize:function(){var g=this._data,w=g.words,b=this._nDataBytes*8,T=g.sigBytes*8;return w[T>>>5]|=128<<24-T%32,w[(T+64>>>9<<4)+14]=s.floor(b/4294967296),w[(T+64>>>9<<4)+15]=b,g.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var g=a.clone.call(this);return g._hash=this._hash.clone(),g}});r.SHA256=a._createHelper(h),r.HmacSHA256=a._createHmacHelper(h)}(Math),n.SHA256})}(T3)),cc}var A3=S3();const E3=Wh(A3),k3=-443636;function O5(e,t){const n=B3(e),s=(n-k3)%t;return s>t/2?n-s+t:n-s}const Xw=new we("1.0001");function B3(e){return e.log(Xw).toDP(0,we.ROUND_HALF_UP).toNumber()}function I5(e){return Xw.pow(e)}function $a(e,t,n){const s=Math.abs(e)%t;return e>0?s>t/2||n&&t<=2?e+t-s:e-s:s>t/2?e-t+s:e+s}function P3(){const e=ge.Aptos.liquidswapDeployer,t={rpcUrl:localStorage.getItem("Aptos-currentRpclocal4")||ge.Aptos.rpcUrl,fraphQLUrl:ge.Aptos.fraphQLUrl,networkOptions:{nativeToken:"0x1::aptos_coin::AptosCoin",launchpad:{cetusLaunchpad:ge.Aptos.Launchpad,crowdCoin:ge.Aptos.LaunchpadCrowdCoin},simulationAccount:{pubkey:ge.Aptos.accountPublicKey,address:ge.Aptos.accountAddress},modules:{LiquidswapDeployer:e,ClmmIntegrate:ge.Aptos.clmmIntegrate,FetcherDeployer:ge.Aptos.fetcher,TokenDeployer:ge.Aptos.TokenDeployer,IntegerMate:ge.Aptos.IntegerMate}}},n=new $E(t),s=xl(),r=Vw(),i=yr(()=>r),o=yr(()=>i.value.currentExplorer),{$notify:a}=gr(),c=X=>{const{$notify:ne}=gr();ne.success({key:X.hash+"loading",icon:Ve("img",{class:{"notify-icon":!0,"loading-animate":!0},src:i.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:X.title},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:$n.global.t("newAdd.confirmingTransaction")},null),Ve("a",{href:Qa(o.value,"tx",X.hash),target:"_blank",innerHTML:$n.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},u=X=>{a.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:`${X.title} `+$n.global.t("newAdd.success")},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:X.desc},null),Ve("a",{href:Qa(o.value,"tx",X.hash),target:"_blank",innerHTML:$n.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},l=X=>{a.error({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:`${X} `+$n.global.t("newAdd.failed")},null)]),description:$n.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},f=async(X,ne=!1)=>{const ye=await n.client.waitForTransactionWithResult(X.hash);if(console.log("watchTransaction###res###",ye),ye&&ye.success){a.close(X.hash+"loading"),console.log("watchTransaction#####success"),u(X);const be={walletAddress:s.address,chainName:"Aptos",...X,...ye,date:new Date().getTime()+6048e5};return r.setTransactionList(be),ne?{status:!0,nftInfo:ye.events.filter(Xe=>Xe.type.includes("CreateTokenDataEvent"))}:!0}else{if(ye&&!ye.success)return a.close(X.hash+"loading"),console.log("watchTransaction#####error"),l(X.title),!1;console.log("watchTransaction#####one more"),setTimeout(()=>f(X,ne),3e3)}},h=async(X,ne=!1)=>{const ye=await n.client.waitForTransactionWithResult(X.hash);if(console.log("watchTransaction###res###",ye),ye&&ye.success){console.log("watchTransaction#####success");const be={walletAddress:s.address,chainName:"Aptos",...X,...ye,date:new Date().getTime()+6048e5};r.setTransactionList(be)}},g=async X=>{try{const ne=await n.Resources.getCoinStores(X),ye=[];return ne.forEach(be=>{let Pe="";be.coinAddress.includes("0x0000000000000000000000000000000000000000000000000000000000000001")?Pe=be.coinAddress.replace(/0x0000000000000000000000000000000000000000000000000000000000000001/,"0x1"):Pe=be.coinAddress,ye.push({...be,coinAddress:Pe})}),ye}catch{return[]}},w=async X=>{try{s.setLoading(!0);const ne=await g(X),ye={};ne.forEach(be=>{const Pe=be?be.coin.value:"0";ye[be.coinAddress]={...be,balance:Pe}}),console.log("1212###assets####",ye),s.setAssets(ye),s.setLoading(!1)}catch(ne){console.log("getAccount##error###",ne),s.setLoading(!1),s.setAssets({})}},b=async()=>{const X={pubkey:ds(ge.Aptos.accountPublicKey),address:ds(ge.Aptos.accountAddress)},ne=await n.Token.getAllRegisteredTokenList(X);return console.log("0215####tokenList####",ne),ne},T=async(X,ne,ye)=>n.Resources.getPoolState(X,ne,ye),R=async X=>{const ne={pubkey:ds(ge.Aptos.accountPublicKey),address:ds(ge.Aptos.accountAddress)};return await n.Token.getOwnerWarpPoolList(ge.Aptos.TokenDeployer,ne)},A=async X=>await n.Resources.getPool(X);return{setTransations:h,showTransitionPending:c,showTransitionSuccess:u,showTransitionError:l,watchTransaction:f,getAccount:w,getPoolState:T,getPools:async X=>await n.Resources.getPools(X),getPool:A,registerCoin:X=>({function:"0x1::managed_coin::register",type_arguments:[X],arguments:[],type:"entry_function_payload"}),estLiquidityAndcoinAmountFromOneAmounts:X=>{console.log("estLiquidityAndcoinAmountFromOneAmounts###params####",X);const{tokenA:ne,tokenB:ye,lowerTick:be,upperTick:Pe,coinAmount:Fe,iscoinA:Xe,roundUp:ht,slippage:vt,curSqrtPrice:St}=X,bt=ts.estLiquidityAndcoinAmountFromOneAmounts(be,Pe,Fe,Xe,ht,vt,St),_t=ne.decimals,Mt=ye.decimals,{tokenMaxA:Ft,tokenMaxB:Jt,liquidityAmount:Zt}=bt;return{tokenMaxAOrigin:Ft.toString(),tokenMaxBOrigin:Jt.toString(),tokenMaxA:zt(Ft.toString(),_t),tokenMaxB:zt(Jt.toString(),Mt),liquidityAmount:Zt}},getCoinAmountFromLiquidity:X=>{const{pool:ne,position:ye,roundUp:be}=X,Pe=Number(ye.tick_lower_index),Fe=Number(ye.tick_upper_index),Xe=Tt.tickIndexToSqrtPriceX64(Pe),ht=Tt.tickIndexToSqrtPriceX64(Fe),vt=ts.getCoinAmountFromLiquidity(new U(ye.liquidity),new U(ne.current_sqrt_price),Xe,ht,be),St=zt(vt.coinA.toString(),ne.coinA.decimals),bt=zt(vt.coinB.toString(),ne.coinB.decimals);return{coinaAmount:St,coinbAmount:bt}},getAddLiquidityTransactionPayload:async X=>{const{pool:ne,amount:ye,fix_amount_a:be,roundUp:Pe,tick_lower:Fe,tick_upper:Xe,index:ht,slippage:vt}=X;console.log(X,"===>params411");const St=await A(ne.poolAddress),bt=be?yn(ye,ne.token_a.decimals):yn(ye,ne.token_b.decimals),_t=Tt.sqrtPriceX64ToTickIndex(new U(St.current_sqrt_price));let Mt,Ft;if(_t>=Fe&&_t<=Xe){const Zt=ts.estLiquidityAndcoinAmountFromOneAmounts(Fe,Xe,new U(bt.toString()),be,Pe,vt,new U(St.current_sqrt_price));Mt=be?bt.toNumber():Zt.tokenMaxA.toNumber(),Ft=be?Zt.tokenMaxB.toNumber():bt.toNumber()}else _t>Xe?(Mt=0,Ft=bt.toNumber()):_t<Fe&&(Mt=bt.toNumber(),Ft=0);return n.Position.createAddLiquidityTransactionPayload({pool:ne.poolAddress,coinTypeA:ne.token_a.address,coinTypeB:ne.token_b.address,amount_a:Mt,amount_b:Ft,fix_amount_a:be,tick_lower:Fe,tick_upper:Xe,is_open:!ht,index:ht})},getRemoveLiquidityTransactionPayload:async X=>{const{pool:ne,coinTypeA:ye,coinTypeB:be,coinTypeC:Pe,coinTypeD:Fe,coinTypeE:Xe,position:ht,delta_liquidity:vt,rewards_num:St}=X;console.log("getRemoveLiquidityTransactionPayload####delta_liquidity#####",vt.toString());const bt=await A(ne.poolAddress),_t={...ne,...bt},Mt=Number(ht.tick_lower_index),Ft=Number(ht.tick_upper_index),Jt=Tt.tickIndexToSqrtPriceX64(Mt),Zt=Tt.tickIndexToSqrtPriceX64(Ft),Yn=ts.getCoinAmountFromLiquidity(vt,new U(_t.current_sqrt_price),Jt,Zt,!0),zn=Ye(Yn.coinA.toString()).mul(Ye(1-X.slippage/100)),Zn=Ye(Yn.coinB.toString()).mul(Ye(1-X.slippage/100));return await n.Position.removeLiquidityTransactionPayload({pool:ne.poolAddress,coinTypeA:ye,coinTypeB:be,coinTypeC:Pe,coinTypeD:Fe,coinTypeE:Xe,delta_liquidity:vt,min_amount_a:Number(Kt(zn.toString(),0)),min_amount_b:Number(Kt(Zn.toString(),0)),pos_index:X.position.index,is_close:!1,rewards_num:St})},getCollectFeeTransactionPayload:async X=>{console.log("1130###getCollectFeeTransactionPayload###params",{pool:X.pool.poolAddress,coinTypeA:X.pool.token_a.address,coinTypeB:X.pool.token_b.address,pos_index:X.position.index});const ne=await n.Position.collectFeeTransactionPayload({pool:X.pool.poolAddress,coinTypeA:X.pool.token_a.address,coinTypeB:X.pool.token_b.address,pos_index:X.position.index});return console.log("1130###getCollectFeeTransactionPayload###result##",ne),ne},getPositionList:async(X,ne)=>{let ye=0;if(ge.Aptos.network==="mainnet"){let be,Pe=[];do{const Xe={operationName:"AccountTokensData",variables:{owner_address:X,limit:100,offset:ye},query:`query AccountTokensData($owner_address: String, $limit: Int, $offset: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
    limit: $limit
    offset: $offset
  ) {
    token_data_id_hash
 creator_address
 name
    collection_name
  table_type
    property_version
    amount
    __typename
  }
}`},ht=await $fetch("https://indexer.mainnet.aptoslabs.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});be=ht&&ht.data&&ht.data.current_token_ownerships||[],Pe=[...Pe,...be],ye+=be.length,console.log("🚀🚀🚀 ~ file: useAptos.ts:413 ~ getPositionList ~ current_token_ownerships:",be.length)}while(be&&be.length==100);console.log("###list",Pe);const Fe=[];for(let Xe=0;Xe<Pe.length;Xe++){const ht=Pe[Xe],vt=ne[qE(ht.creator_address)];if(console.log(vt,"##pool"),vt){const St=ht.name.split("-")[1],bt=vt.positions_handle;console.log("🚀🚀🚀 ~ file: useAptos.ts:424 ~ getPositionList ~ positionsHandle:",bt),console.log("🚀🚀🚀 ~ file: useAptos.ts:425 ~ getPositionList ~ positinIndex:",St);const _t=await n.Resources.getPositionInfoByIndex(bt,St);Fe.push({..._t,tokenName:ht.name})}}return console.log("0221###aptos###getPositionList###",Fe),Fe}else{const be=Object.values(ne);console.log(be,"###poolList");const Pe=await n.Resources.getPositionList(X,be);return console.log("0221###aptos###getPositionList###list###",Pe),Pe}},getPositionInfo:async(X,ne,ye,be="")=>({...await n.Resources.getPositionInfo(X,ye),tokenName:ye,collectionName:ne}),getSwapTransactionPayload:async X=>{const{pool:ne,a2b:ye,byAmountIn:be,amount:Pe,slippage:Fe}=X,Xe=ne.poolAddress||ne.address,ht=ne.token_a.decimals,vt=ne.token_b.decimals,St=await A(ne.address);let bt;ye&&be||!ye&&!be?bt=yn(Pe,ht):bt=yn(Pe,vt);const _t=await n.Swap.preswap({pool:St,decimalsA:ht,decimalsB:vt,a2b:ye,by_amount_in:be,amount:bt.toString()});console.log("1130###getSwapTransactionPayload###preSwapRes###",_t),console.log("1130###getSwapTransactionPayload###preSwapRes.estimatedAmountOut###",_t.estimatedAmountOut.toString()),console.log("1130###getSwapTransactionPayload###preSwapRes.estimatedAmountIn###",_t.estimatedAmountIn.toString());const Mt=Ye(_t.estimatedAmountOut.toString()),Ft=Ye(_t.estimatedAmountIn.toString()),Jt=be?Mt.sub(Mt.mul(Fe)):Ft.add(Ft.mul(Fe));console.log("1130###amountLimit####",Jt.toString()),console.log("1130###swap##params###",{pool_addr:Xe,coinTypeA:ne.token_a.address,coinTypeB:ne.token_b.address,a_to_b:_t.aToB,by_amount_in:_t.byAmountIn,amount:_t.amount.toString(),amount_limit:Kt(Jt.toString(),0)||""});const Zt=n.Swap.createSwapTransactionPayload({pool_addr:Xe,coinTypeA:ne.token_a.address,coinTypeB:ne.token_b.address,a_to_b:_t.aToB,by_amount_in:_t.byAmountIn,amount:_t.amount.toString(),amount_limit:Kt(Jt.toString(),0)||"",partner:""});return console.log("1130###swap##result###",Zt),Zt},getCoin:X=>({type:"entry_function_payload",function:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet",arguments:[],type_arguments:[]}),preSwap:async X=>{const{pool:ne,a2b:ye,byAmountIn:be,amount:Pe}=X;console.log(X,"===>params");const Fe=ne.coinA.decimals,Xe=ne.coinB.decimals;let ht=ne;ne.coinTypeA||(ht={...ne,poolAddress:ne.address,coinTypeA:ne.coinA.address,coinTypeB:ne.coinB.address});let vt;ye&&be||!ye&&!be?vt=yn(Pe,Fe):vt=yn(Pe,Xe);const St=await n.Swap.preswap({pool:ht,decimalsA:Fe,decimalsB:Xe,a2b:ye,by_amount_in:be,amount:vt.toString()});return{...St,estimatedAmountIn:ii(zt(St.estimatedAmountIn.toString(),ye?Fe:Xe),ye?Fe:Xe),estimatedAmountOut:ii(zt(St.estimatedAmountOut.toString(),ye?Xe:Fe),ye?Xe:Fe),priceImpactPct:Kt(St.priceImpactPct,2)}},getTicks:async X=>{try{return{list:await n.Fetcher.fetchTicks({pool:X.poolAddress,coinTypeA:X.coinTypeA,coinTypeB:X.coinTypeB}),address:X.poolAddress}}catch(ne){console.log("getTicks Error###",ne)}},TickMath:Tt,TickUtil:dl,ClmmPoolUtil:ts,getNearestTickByTick:$a,getTickDataFromUrlData:lw,getCollectFeesQuote:async X=>{console.log(X,"params====>");const{pool:ne,position:ye,tickLowerData:be,tickUpperData:Pe}=X,Fe=nE({clmmpool:ne,position:ye,tickLower:be,tickUpper:Pe}),Xe=zt(Fe.feeOwedA.toString(),ne.token_a.decimals),ht=zt(Fe.feeOwedB.toString(),ne.token_b.decimals);return console.log("0118###useApots###result.feeOwedA.toString()###",Fe.feeOwedA.toString()),console.log("0118###useApots###result.feeOwedB.toString()###",Fe.feeOwedB.toString()),console.log("0118###useApots###feeOwedA###",Xe),console.log("0118###useApots###feeOwedB###",ht),{feeOwedA:Number(Xe)>99999999999||Number(Xe)<0?"0":Xe,feeOwedB:Number(ht)>99999999999||Number(ht)<0?"0":ht}},mintCoin:X=>({function:`${ge.Aptos.faucetObjectId}::coin::mint`,type_arguments:[`${ge.Aptos.faucetObjectId}::coin::${X.name}`],arguments:[X.amount],type:"entry_function_payload"}),getNftHash:X=>{const ne=`${X.creator}::${X.collection}::${X.name}`;return E3(ne).toString()},getCollectRewarderTransactionPayload:X=>n.Rewarder.collectPoolRewarderTransactionPayload(X),getPosRewardersAmount:async X=>{console.log(JSON.stringify(X),"=====>params792");const{poolAddress:ne,positionName:ye,tickLowerData:be,tickUpperData:Pe}=X;return await n.Rewarder.posRewardersAmount(ne,ye,be,Pe)},getTokenList:b,getTickDataByIndex:async(X,ne)=>(console.log(X,ne,"getTickDataByIndex"),await n.Resources.getTickDataByIndex(X,ne)),initSwapRouter:async X=>{n.Router.addPathProvider(X),await n.Router.setCoinList({pubkey:ds(ge.Aptos.accountPublicKey),address:ds(ge.Aptos.accountAddress)}),await n.Router.loadGraph()},getSwapRouter:async(X,ne)=>await n.Router.price(X,ne),getEstPositionAPRWithDelta:async(X,ne,ye,be,Pe,Fe,Xe,ht,vt,St,bt,_t,Mt,Ft,Jt,Zt,Yn,zn,Zn,Qn,_n,Ls,Js,v)=>await eE(X,ne,ye,be,Pe,Fe,Xe,ht,vt,St,bt,_t,Mt,Ft,Jt,Zt,Yn,zn,Zn,Qn,_n,Ls,Js,v),getPriceImpactPct:(X,ne,ye)=>{const be=Tt.sqrtPriceX64ToPrice(new U(X.current_sqrt_price),X.coinA.decimals,X.coinB.decimals).toNumber(),Pe=ye?be:1/be,Fe=Math.abs(Pe-Number(ne))/Number(Pe)*100;return Number(Kt(Fe,2))},getLpList:R,getEstPositionAPRWithMulti:async(X,ne,ye,be)=>await tE(X,ne,ye,be),getCreatPoolTransactionPayload:async X=>{const{coinTypeA:ne,coinTypeB:ye,tick_lower:be,tick_upper:Pe,tick_spacing:Fe,initialize_sqrt_price:Xe,max_amount_a:ht,max_amount_b:vt,slippage:St,fix_amount_a:bt,decimalsA:_t,decimalsB:Mt,liquidityInput:Ft}=X;console.log(X,"params===>");const Jt=bt?yn(ht,_t):yn(vt,Mt);console.log(Jt,"===>coinAmount");const Zt=Tt.sqrtPriceX64ToTickIndex(new U(Xe));let Yn,zn;const Zn=Tt.tickIndexToSqrtPriceX64(be),Qn=Tt.tickIndexToSqrtPriceX64(Pe);console.log(Zn,"===>minPriceX64"),console.log(Qn,"===>maxPriceX64");let _n;return Zt>be&&Zt<Pe?(_n=ts.estLiquidityAndcoinAmountFromOneAmounts(be,Pe,new U(Jt.toString()),bt,!0,St,new U(Xe)),Yn=bt?Jt.toNumber():_n.tokenMaxA.toNumber(),zn=bt?_n.tokenMaxB.toNumber():Jt.toNumber()):Zt>=Pe?(_n=ci(Zn,Qn,new U(Jt.toString())),Yn=new U(Ft.tokenMaxA*Math.pow(10,_t)),zn=new U(Ft.tokenMaxB*Math.pow(10,Mt))):Zt<=be&&(_n=ai(Zn,Qn,new U(Jt.toString())),Yn=new U(Ft.tokenMaxA*Math.pow(10,_t)),zn=new U(Ft.tokenMaxB*Math.pow(10,Mt))),console.log(_n,"===>preAddResult"),await n.Pool.creatPoolTransactionPayload({coinTypeA:ne,coinTypeB:ye,tick_spacing:Fe,initialize_sqrt_price:new U(Xe),uri:"",delta_liquidity:Zt>be&&Zt<Pe?_n.liquidityAmount:_n,max_amount_a:Yn,max_amount_b:zn,tick_lower:be,tick_upper:Pe},!0)},getTokenListByCoinType:async()=>await n.Token.getTokenListByCoinType("",0,99999),getPoolImmutables:async()=>await n.Resources.getPoolImmutables(),estimateLiquidityForCoinA:ai,estimateLiquidityForCoinB:ci,getTokenBySymbol:async(X,ne)=>{if(!ne)return null;let ye=null;for(const be in X){const Pe=X[be];if(Pe.address.toUpperCase()===ne.toUpperCase()){ye=Pe;break}}return ye},estCoinAmountsFromTotalAmount:X=>{const{lowerTick:ne,upperTick:ye,decimalsA:be,decimalsB:Pe,curSqrtPrice:Fe,totalAmount:Xe,tokenPriceA:ht,tokenPriceB:vt}=X;console.log(JSON.stringify({...X,curSqrtPrice:Fe.toString()}),"params===>");const St=ts.estCoinAmountsFromTotalAmount(ne,ye,Fe,Xe,ht,vt);console.log("coinAmounts: ",St);const bt=ec(St.amountA.toFixed(be,we.ROUND_UP).toString(),be),_t=ec(St.amountB.toFixed(Pe,we.ROUND_UP).toString(),Pe),Mt={coinA:new U(bt),coinB:new U(_t)};return{amountA:zt(bt.toString(),be),amountB:zt(_t.toString(),Pe),tokenAmountsInfo:Mt}},getCreateAddLiquidityPayload:async X=>{const{curSqrtPrice:ne,tickLower:ye,tickUpper:be,tokenAmounts:Pe,pool:Fe,slippage:Xe}=X;console.log(JSON.stringify(X),"####getCreateAddLiquidityPayload 1593");const ht=ts.estimateLiquidityFromcoinAmounts(ne,ye,be,Pe),vt=new we(Pe.coinA.toString()).mul(1+Xe),St=new we(Pe.coinB.toString()).mul(1+Xe),bt={coinTypeA:Fe.coinTypeA,coinTypeB:Fe.coinTypeB,tick_lower:ye,tick_upper:be,pool:Fe.address,delta_liquidity:ht,max_amount_a:we.ceil(vt).toString(),max_amount_b:we.ceil(St).toString(),is_open:!0,index:0};return console.log(JSON.stringify(bt),"==>addLiquidityPayloadParams"),await n.Position.createAddLiquidityTransactionPayload(bt)},calculateDepositRatioFixTokenA:(X,ne,ye)=>ts.calculateDepositRatioFixTokenA(X,ne,ye)}}const U3=lc("swapRouter",{state:()=>({swapRouterContract:{},isInitRouter:!0,poolListGroupByTokenAB:[],currentCoinPairRate:{}}),actions:{initSwapRouter(e,t,n){this.swapRouterContract=In(e),this.swapRouterContract.initSwapRouter(t,n),this.isInitRouter=!1,console.log(this.swapRouterContract,"===>this.swapRouterContract")},setPoolListGroupByTokenAB(e){this.poolListGroupByTokenAB=e},setCurrentCoinPairRate(e){e&&(this.currentCoinPairRate={...this.currentCoinPairRate,...e})}}}),R3=lc("SuiCommonStore",{state:()=>({tokensObj:{}}),actions:{setTokensObj(e){console.log("🚀🚀🚀 ~ file: common.ts:11 ~ setTokensObj ~ data:",e),e&&(this.tokensObj={...this.tokensObj,...e})}}});function O3(e){const t={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal4`)||ge[e||"Sui"].fullRpcUrl,simulationAccount:ge[e||"Sui"].simulationAccount,cetus_config:ge[e||"Sui"].cetus_config,clmm_pool:ge[e||"Sui"].clmm_pool,integrate:ge[e||"Sui"].integrate,deepbook:ge[e||"Sui"].deepbook,deepbook_endpoint_v2:ge[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:ge[e||"Sui"].aggregatorUrl,swapCountUrl:ge[e||"Sui"].swapCountUrl},n={launchpad:ge[e||"Sui"].launchpad,ido:ge[e||"Sui"].ido,xcetus:ge[e||"Sui"].xcetus,xcetus_dividends:ge[e||"Sui"].xcetus_dividends,cetus_faucet:ge[e||"Sui"].cetus_faucet,xtoken:ge[e||"Sui"].xtoken,xtoken_dividends:ge[e||"Sui"].xtoken_dividends,token_faucet:ge[e||"Sui"].token_faucet,booster:ge[e||"Sui"].booster,maker_bonus:ge[e||"Sui"].maker_bonus,liquidity_stratefy:ge[e||"Sui"].liquidity_stratefy,vaults:ge[e||"Sui"].vaults,frams:ge[e||"Sui"].frams};let s=new Ss(t);const r=new Xh(n,s),i=xl(),o=yr(()=>i),a=Vw(),c=yr(()=>a),u=I3();yr(()=>u);const l=R3();Gh(()=>{o.value.address&&(s.senderAddress=o.value.address)});const f=yr(()=>o.value.walletName),{$notify:h}=gr(),g=v=>{const{$notify:P}=gr();P.success({key:v.hash+"loading",icon:Ve("img",{class:{"notify-icon":!0,"loading-animate":!0},src:c.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:v.title},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:$n.global.t("newAdd.confirmingTransaction")},null),Ve("a",{href:Qa(c.value.currentExplorer,"tx",window.encodeURIComponent(v.hash)),target:"_blank",innerHTML:$n.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},w=v=>{console.log("🚀🚀🚀 ~ file: useSui.ts:133 ~ showTransitionSuccess ~ params:",v);let P;if(v!=null&&v.excecuteTime){const z=Number(Sr((v==null?void 0:v.excecuteTime)/1e3,2));P=z>1?"":`Txn finalized in ${z}s! `}else P="";const{$notify:L}=gr();L.success({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-icon-change1"})]),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:`${v.title} `+$n.global.t("newAdd.success")},null)]),description:Ve("div",{class:"notification-title"},[Ve("div",{class:"notification-text",innerHTML:v.desc},null),Ve("div",{class:"notification-text"},[Ve("span",{innerHTML:P},null),Ve("a",{href:Qa(c.value.currentExplorer,"tx",window.encodeURIComponent(v.hash)),target:"_blank",innerHTML:$n.global.t("common.viewTransaction")},null)])]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},b=v=>{const{$notify:P}=gr();P.error({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:`${v} `+$n.global.t("newAdd.failed")},null)]),description:$n.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},T=async(v,P=!1)=>{var z,C,j,Z,ce,he;const{$notify:L}=gr();try{let se={};if(console.log("watchTransaction params: ",v),!v.res||!((z=v==null?void 0:v.res)!=null&&z.digest)||!((C=v==null?void 0:v.res)!=null&&C.effects)||P&&!((j=v==null?void 0:v.res)!=null&&j.events)){const J=await kr(2e3);se=await s.Pool.getSuiTransactionResponse(v.hash),console.log("0503###watchTransaction###res###",se)}else se=v.res;if(console.log("0411###watchTransaction###res###",se),console.log(v,"====>params"),((ce=(Z=se==null?void 0:se.effects)==null?void 0:Z.status)==null?void 0:ce.status)==="success"){L.close(v.hash+"loading"),v.isOnlyToken?se.balanceChanges.forEach(_e=>{var Ue,pe,$e;_e.coinType==((Ue=v==null?void 0:v.isOnlyTokenInfo)==null?void 0:Ue.address)&&w({...v,desc:`Deposit ${new we(_e.amount.replace("-","")).div(new we(Math.pow(10,(pe=v==null?void 0:v.isOnlyTokenInfo)==null?void 0:pe.decimals)))} ${($e=v==null?void 0:v.isOnlyTokenInfo)==null?void 0:$e.symbol}`})}):w(v);const J={walletAddress:i.address,chainName:"Sui",...v,...se,date:new Date().getTime()+6048e5};if(P)if(console.log("0222###watchTransaction###isGetNftInfo true###res####",se),se.events){const Ue=se.events.filter(pe=>pe.type.includes("OpenPositionEvent"));return{status:!0,nftInfo:Ue[0]&&((he=Ue[0])==null?void 0:he.parsedJson),res:se}}else return{status:!0,nftInfo:se.effects.events,res:se};return!0}else{if(se&&se.effects&&se.effects.status&&se.effects.status.status!=="success")return L.close(v.hash+"loading"),b(v.title),!1;setTimeout(()=>T(v),3e3)}}catch(se){return console.log("watchTransaction###error###",se),L.close(v.hash+"loading"),L.error({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:`${v.title} Failed`},null)]),duration:4.5,description:"Something went wrong",class:"ant-notification-copy ant-notification-error"}),!0}},R=async v=>{var z,C,j,Z,ce,he;v.setSenderIfNotSet(o.value.address);const P=await v.build({client:s.fullClient}),L=await s.fullClient.dryRunTransactionBlock({transactionBlock:P});if(console.log("0503###simulate###simulateRes###",L),((C=(z=L==null?void 0:L.effects)==null?void 0:z.status)==null?void 0:C.status)==="failure"){console.log("0424###simulateRes###error###",(Z=(j=L==null?void 0:L.effects)==null?void 0:j.status)==null?void 0:Z.error);const se=(he=(ce=L==null?void 0:L.effects)==null?void 0:ce.status)==null?void 0:he.error,J=/\("(.+?)"\)/g,_e=se.match(J),Ue=_e&&_e[0]&&_e[0].match(/\w+/g)||"",pe=_e&&_e[1]&&_e[1].match(/\w+/g)||"",$e=se.substr(se.lastIndexOf("}, ")+3),We=$e&&$e.split(")"),p=We&&We[0]||"";throw Ue&&Ue[0]==="factory"&&pe&&pe[0]=="create_pool_internal"&&p==="1"?(h.error({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"Transaction "+$n.global.t("newAdd.failed")},null)]),description:"Pool is existed",duration:4.5,class:"ant-notification-copy ant-notification-error"}),new Error("pool is existed")):(h.error({icon:Ve("svg",{class:{icon:!0},"aria-hidden":!0},[Ve("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Ve("div",{class:"notification-title"},[Ve("span",{innerHTML:"Transaction "+$n.global.t("newAdd.failed")},null)]),description:se,duration:4.5,class:"ant-notification-copy ant-notification-error"}),new Error(se))}else return L},A=v=>({transactionBlock:v,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),x=async(v,P=!1)=>{var z,C;await kr(2e3);const L=await s.Pool.getSuiTransactionResponse(v.hash);if(((C=(z=L==null?void 0:L.effects)==null?void 0:z.status)==null?void 0:C.status)==="success"){h.close(v.hash+"loading"),w(v);const j={walletAddress:i.address,chainName:"Sui",...v,...L,date:new Date().getTime()+6048e5};a.setTransactionList(j)}},E=async(v,P)=>{try{i.setLoading(!0),P&&i.setFirstGetAssetLoading(!0);const L=await s.getOwnerCoinBalances(v);console.log("🚀 ~ file: useSui.ts:383 ~ getAccount ~ ownerCoinBalance:",L);const z=Object.fromEntries(L.map(C=>[Cn(C.coinType).full_address,{coinType:Cn(C.coinType).full_address,balance:C.totalBalance}]));return console.log("🚀 ~ file: useSui.ts:390 ~ getAccount ~ assets:",z),i.setAssets(z),i.setLoading(!1),i.setFirstGetAssetLoading(!1),z}catch(L){console.log("🚀🚀🚀 ~ file: useSui.ts:373 ~ getAccount ~ error:",L),i.setLoading(!1),i.setFirstGetAssetLoading(!1)}},S=async()=>{try{console.log("getTokenList sdk: ",s);const v=await s.CetusConfig.getCoinConfigs();console.log("0907###tokenList###",v);let P=[],L=[],z=[];return v.forEach(C=>{let j=C;if(C.address.includes("::sui::SUI")){const Z=Cn(C.address).full_address;j={...j,address:Z}}j.coin_priority?L.push(j):z.push({...j,coin_priority:"0"})}),L=L.sort((C,j)=>Number(C==null?void 0:C.coin_priority)<Number(j==null?void 0:j.coin_priority)?1:-1),z=z.sort((C,j)=>C.symbol.charCodeAt(0)-j.symbol.charCodeAt(0)),P=[...L,...z],console.log("0517###haveCoinPriority###",L),console.log("0517###notHaveCoinPriority###",z),console.log("0517###tokenList###",P),P}catch(v){return console.log("0517###getTokenList###error###",v),[]}},q=async()=>{var v,P,L,z;try{const C=await $fetch("/data/coins_info.json");if((v=C==null?void 0:C.data)!=null&&v.list&&((L=(P=C==null?void 0:C.data)==null?void 0:P.list)==null?void 0:L.length)>0){const j=Object.fromEntries((z=C==null?void 0:C.data)==null?void 0:z.list.map((Z,ce)=>[Z.coin_type,{...Z,address:Z.coin_type,isSelfBuilt:!Z.is_trusted,logoURI:Z.logo_url}]));return j["0x2::sui::SUI"]={...j["0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],address:"0x2::sui::SUI"},console.log("🚀 ~ file: useSui.ts:437 ~ getHardcodeTokenList ~ tokenObj:",j),j}}catch(C){console.log("🚀 ~ file: useSui.ts:440 ~ getHardcodeTokenList ~ e:",C);const j=await S();return Object.fromEntries(j.map((ce,he)=>[ce.address,ce]))}},O=async v=>{var L,z,C,j;if(console.log("🚀🚀🚀 ~ file: useSui.ts:419 ~ getSuiTokenObj ~ isForcerefresh:",v),!v){console.log("🚀🚀🚀 ~ file: useSui.ts:419 ~ getSuiTokenObj ~ 没进来吗");let Z;try{if(Z=JSON.parse(localStorage.getItem("SuiTokenObj")||"{}"),console.log("🚀🚀🚀 ~ file: useSui.ts:425 ~ getSuiTokenObj ~ getLocalTokenObj:",Z),Z&&!La(Z)){const ce=await q()||{};return Object.values(Z).length>=Object.values(ce).length?Z:ce}}catch(ce){console.log("🚀🚀🚀 ~ file: useSui.ts:2225 ~ getSuiTokenObj ~ error:",ce)}}let P={};try{const Z=await $fetch(`${ge.Sui.api}/v2/sui/coins_info`);(L=Z==null?void 0:Z.data)!=null&&L.list&&((C=(z=Z==null?void 0:Z.data)==null?void 0:z.list)==null?void 0:C.length)>0&&(P=Object.fromEntries((j=Z==null?void 0:Z.data)==null?void 0:j.list.map((ce,he)=>[ce.coin_type,{...ce,address:ce.coin_type,isSelfBuilt:!ce.is_trusted,logoURI:ce.logo_url}])),P["0x2::sui::SUI"]={...P["0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],address:"0x2::sui::SUI"},console.log("🚀🚀🚀 ~ file: useSui.ts:437 ~ getLpList ~ tokenObj:",P),F(P))}catch{P=await q()||{},console.log("🚀 ~ file: useSui.ts:496 ~ getSuiTokenObj ~ tokenObj:",P)}return P},F=v=>{try{console.log("🚀🚀🚀 ~ file: useSui.ts:612 ~ //lpList.forEach ~ tokenObj:",v),l.setTokensObj(v),localStorage.setItem("SuiTokenObj",JSON.stringify(v))}catch(P){console.log("🚀🚀🚀 ~ file: useSui.ts:602 ~ //lpList.forEach ~ error:",P)}},Y=async(v,P=!1)=>{var z;const L=[];e=="Sui"&&(t.fullRpcUrl=ge.Sui.officialRpcUrl,s=new Ss(t));try{const C=await s.Pool.getPools([],0,9999);console.log("🚀🚀🚀 ~ file: useSui.ts:497 ~ getLpListFromContract ~ poolImmutables:",C);let j=await O();if(console.log("🚀 ~ file: useSui.ts:498 ~ getLpListFromContract ~ tokenObj:",j),La(j)){const se=await S();j={},se.forEach(J=>{j[J.address]=J})}const Z=await s.CetusConfig.getClmmPoolConfigs();console.log("🚀🚀🚀 ~ file: useSui.ts:508 ~ getLpListFromContract ~ lpList:",Z);const ce={};Z.forEach(se=>{ce[se.pool_address]=se,console.log("🚀🚀🚀 ~ file: useSui.ts:511 ~ lpList.forEach ~ lpObj:",ce)});let he={};try{const J=(e=="Aptos"?await fetch(`${ge.Aptos.api}/v2/sui/swap/count`).then(_e=>_e.json()):await fetch(`${ge.Sui.api}/v2/sui/swap/count/v3`).then(_e=>_e.json())).data;he=Object.fromEntries(J.pools.map(_e=>[_e.swap_account,{..._e,apr_7day:e=="Aptos"?_e.apr_7day:_e.apr_24h}]))}catch{}for(let se=0;se<C.length;se++){const J=C[se];if(ce[J.poolAddress]||!ce[J.poolAddress]){let _e=j[J.coinTypeA],Ue=j[J.coinTypeB];_e||(_e=(await s.CetusConfig.getTokenListByCoinTypes([J.coinTypeA]))[J.coinTypeA]),Ue||(Ue=(await s.CetusConfig.getTokenListByCoinTypes([J.coinTypeB]))[J.coinTypeB]);let pe=!1;ye(_e.address,Ue.address)&&(pe=!0);const $e=he[J.poolAddress]?((z=he[J.poolAddress])==null?void 0:z.is_forward)===!1:pe;let We={};We={...We,...ce[J.poolAddress],address:J.poolAddress,coinA:_e,coinB:Ue,coin_a_address:J.coinTypeA,coin_b_address:J.coinTypeB,decimals:6,fee:Number(J.fee_rate)/1e6,tickSpacing:J.tickSpacing,symbol:`${_e==null?void 0:_e.symbol}-${Ue==null?void 0:Ue.symbol}`,name:`${_e==null?void 0:_e.symbol}-${Ue==null?void 0:Ue.symbol}`,needReverse:$e,is_pause:J.is_pause,isPoolsInfoError:!0,current_sqrt_price:J.current_sqrt_price,liquidity:J.liquidity,poolAddress:J.poolAddress,current_tick_index:J.current_tick_index},(!v||!v[J.coinTypeA]&&!v[J.coinTypeB])&&L.push(We)}}return console.log("0426###getLpListFromContract###result###",L),L}catch(C){console.log("getLpListFromContract###err##",C)}},Se=async v=>{var Z,ce,he,se,J,_e;let P=await O();const L=[],z=await fetch("/data/pools_info.json").then(Ue=>(console.log("🚀🚀🚀 ~ file: useSui.ts:604 ~ constres:any=awaitfetch ~ rsp:",Ue),Ue.json()));if(console.log("🚀 ~ file: useSui.ts:595 ~ constres:any=awaitfetch ~ res:",z),!((Z=z==null?void 0:z.data)!=null&&Z.lp_list)){const Ue=await Y(v);if(Ue)return Ue}console.log(v,"===>newFilterCoinsObj");const C=((ce=z==null?void 0:z.data)==null?void 0:ce.lp_list)||[];console.log("0420getLpList###lpList###",C),console.log("0420getLpList###res###",z);let j=!1;for(let Ue=0;Ue<C.length;Ue++){const pe=C[Ue],$e=(pe==null?void 0:pe.is_forward)===!1,We=[];if(pe.is_display_rewarder){const m=(J=(se=(he=pe==null?void 0:pe.object)==null?void 0:he.rewarder_manager)==null?void 0:se.fields)==null?void 0:J.rewarders;m&&m.forEach(d=>{var I,$,V,re,fe,ae;const _=new we((I=d==null?void 0:d.fields)==null?void 0:I.emissions_per_second).mul(we.pow(2,-64));We.push({coinAddress:Cn((re=(V=($=d==null?void 0:d.fields)==null?void 0:$.reward_coin)==null?void 0:V.fields)==null?void 0:re.name).source_address,emissionsEveryDay:Math.floor(_.toNumber()*60*60*24),emissions_per_second:(fe=d==null?void 0:d.fields)==null?void 0:fe.emissions_per_second,growth_global:(ae=d==null?void 0:d.fields)==null?void 0:ae.growth_global})})}let p=P[pe.coin_a_address];p||(p=(await s.CetusConfig.getTokenListByCoinTypes([pe.coin_a_address]))[pe.coin_a_address],P={...P,[pe.coin_a_address]:p},j=!0);let y=P[pe.coin_b_address];y||(y=(await s.CetusConfig.getTokenListByCoinTypes([pe.coin_b_address]))[pe.coin_b_address],P={...P,[pe.coin_b_address]:y},j=!0),(!v||!v[pe.coin_a_address]&&!v[pe.coin_b_address]&&!v[Cn(pe.coin_a_address).full_address]&&!v[Cn(pe.coin_b_address).full_address])&&L.push({...pe,coinA:{...p,address:Ys(p.address)},coinB:{...y,address:Ys(y.address)},token_a:{...p,address:Ys(p.address)},token_b:{...y,address:Ys(y.address)},rewarderInfo:We,needReverse:$e,is_pause:(_e=pe==null?void 0:pe.object)==null?void 0:_e.is_pause,poolAddress:pe.address,tickSpacing:pe.object.tick_spacing})}return j&&F(P),console.log("0420getLpList result:",L),L},Oe=async(v,P)=>{var L,z,C,j,Z,ce,he,se;try{if(!P){const We=localStorage.getItem("SuiLpList"),p=new Date().getTime(),y=We?JSON.parse(We):null;if(y&&Number(y==null?void 0:y.expiration)>p&&(y!=null&&y.data)&&((L=y==null?void 0:y.data)==null?void 0:L.length)>0)return y==null?void 0:y.data}let J=await O();const _e=[],Ue=await fetch(`${ge[e||"Sui"].api}/v2/sui/pools_info/v3`).then(We=>(console.log("🚀🚀🚀 ~ file: useSui.ts:604 ~ constres:any=awaitfetch ~ rsp:",We),We.json()));if(!((z=Ue==null?void 0:Ue.data)!=null&&z.lp_list)){const We=await Se(v);if(We)return We}console.log(v,"===>newFilterCoinsObj");const pe=((C=Ue==null?void 0:Ue.data)==null?void 0:C.lp_list)||[];console.log("0420getLpList###lpList###",pe),console.log("0420getLpList###res###",Ue);let $e=!1;for(let We=0;We<pe.length;We++){const p=pe[We],y=(p==null?void 0:p.is_forward)===!1,m=[];if(p.is_display_rewarder){const I=(ce=(Z=(j=p==null?void 0:p.object)==null?void 0:j.rewarder_manager)==null?void 0:Z.fields)==null?void 0:ce.rewarders;I&&I.forEach($=>{var re,fe,ae,nt,Ae,Je;const V=new we((re=$==null?void 0:$.fields)==null?void 0:re.emissions_per_second).mul(we.pow(2,-64));m.push({coinAddress:Cn((nt=(ae=(fe=$==null?void 0:$.fields)==null?void 0:fe.reward_coin)==null?void 0:ae.fields)==null?void 0:nt.name).source_address,emissionsEveryDay:Math.floor(V.toNumber()*60*60*24),emissions_per_second:(Ae=$==null?void 0:$.fields)==null?void 0:Ae.emissions_per_second,growth_global:(Je=$==null?void 0:$.fields)==null?void 0:Je.growth_global})})}let d=J[p.coin_a_address];d||(d=(await s.CetusConfig.getTokenListByCoinTypes([p.coin_a_address]))[p.coin_a_address],J={...J,[p.coin_a_address]:d},$e=!0);let _=J[p.coin_b_address];_||(_=(await s.CetusConfig.getTokenListByCoinTypes([p.coin_b_address]))[p.coin_b_address],J={...J,[p.coin_b_address]:_},$e=!0),(!v||!v[p.coin_a_address]&&!v[p.coin_b_address]&&!v[Cn(p.coin_a_address).full_address]&&!v[Cn(p.coin_b_address).full_address])&&_e.push({...p,coinA:{...d,address:Ys(d.address)},coinB:{..._,address:Ys(_.address)},token_a:{...d,address:Ys(d.address)},token_b:{..._,address:Ys(_.address)},rewarderInfo:m,needReverse:y,is_pause:(he=p==null?void 0:p.object)==null?void 0:he.is_pause,poolAddress:p.address,tickSpacing:p.object.tick_spacing})}$e&&F(J),console.log("0420getLpList result: ",_e);try{const We={expiration:new Date().getTime()+3e5,data:_e};localStorage.setItem("SuiLpList",JSON.stringify(We))}catch(We){console.log("0420getLpList localStorage setItem Error: ",We)}return console.log("0420getLpList return result: ",_e),_e}catch(J){console.log("0420getLpList Error: ",J);try{const Ue=localStorage.getItem("SuiLpList"),pe=Ue?JSON.parse(Ue):null;if(pe&&(pe!=null&&pe.data)&&((se=pe==null?void 0:pe.data)==null?void 0:se.length)>0)return pe==null?void 0:pe.data}catch(Ue){console.log("🚀🚀🚀 ~ file: useSui.ts:676 ~ getLpList ~ err get local data error:",Ue)}const _e=await Se(v);if(console.log(_e,"result===>"),_e)return _e}},N=async(v=[])=>{const L=await new Ss(t).Pool.getPools(v,0,1e3);if(v.length===0){const z={};return L.forEach(C=>{z[C.poolAddress]={...C,rate:un(C.fee_rate).div(Math.pow(10,6)).toString()}}),z}else return L},D=async(v=[])=>{console.log(v,"getPoolslist##");const L=await new Ss(t).Pool.getPools(v,0,1e3);console.log("0330###getPools###pools###",L);const z={};return L.forEach(C=>{z[C.poolAddress]={...C,rate:un(C.fee_rate).div(Math.pow(10,6)).toString()}}),z},M=async v=>await new Ss(t).Pool.getPool(v),oe=v=>{const P=new Mh;return P.moveCall({target:`${ge[e||"Sui"].faucet.faucet_display}::${v.transactionModule}::faucet`,typeArguments:[],arguments:[P.pure(v.suplyID)]}),A(P)},Te=v=>{var L,z,C,j,Z;let P;return v!=null&&v.digest?P={hash:v==null?void 0:v.digest,status:(z=(L=v==null?void 0:v.effects)==null?void 0:L.status)==null?void 0:z.status,res:v}:v!=null&&v.effects&&(P={hash:(C=v==null?void 0:v.effects)==null?void 0:C.transactionDigest,status:(Z=(j=v==null?void 0:v.effects)==null?void 0:j.status)==null?void 0:Z.status,res:v}),P},ve=async v=>{try{const{data:P}=await fetch(`${ge.Sui.api}/v2/sui/ticks?address=${v.poolAddress}&limit=512&orderBy=index`).then(L=>L.json());if(P&&P.list&&P.list.length>0)return{list:P.list.map(z=>({objectId:z.object_id,index:z.index,sqrtPrice:new U(z.sqrt_price),liquidityNet:new U(z.liquidity_net),liquidityGross:new U(z.liquidity_gross),feeGrowthOutsideA:new U(z.fee_growth_outside_a),feeGrowthOutsideB:new U(z.fee_growth_outside_b),rewardersGrowthOutside:z.rewards_growth_outside})),address:P.address};{const L=await s.Pool.fetchTicks({pool_id:v.poolAddress,coinTypeA:v.coinTypeA,coinTypeB:v.coinTypeB});return console.log("0330###getTicks####sui####",L),{list:L,address:v.poolAddress}}}catch(P){console.log("0330###getTicks Error###",P);const L=await s.Pool.fetchTicks({pool_id:v.poolAddress,coinTypeA:v.coinTypeA,coinTypeB:v.coinTypeB});return console.log("0330###getTicks####sui####",L),{list:L,address:v.poolAddress}}},ke=async(v,P,L,z)=>await sb(v,P,L,z),Ce=v=>{var _e,Ue;const{pool:P,position:L,roundUp:z}=v,C=Number(L.tick_lower_index),j=Number(L.tick_upper_index),Z=Fn.tickIndexToSqrtPriceX64(C),ce=Fn.tickIndexToSqrtPriceX64(j),he=Zs.getCoinAmountFromLiquidity(new U(L.liquidity),new U(P.current_sqrt_price),Z,ce,z),se=zt(he.coinA.toString(),(_e=P==null?void 0:P.coinA)==null?void 0:_e.decimals),J=zt(he.coinB.toString(),(Ue=P==null?void 0:P.coinB)==null?void 0:Ue.decimals);return{coinaAmount:se,coinbAmount:J}},Ie=v=>{const{tokenA:P,tokenB:L,lowerTick:z,upperTick:C,coinAmount:j,iscoinA:Z,roundUp:ce,slippage:he,curSqrtPrice:se}=v;console.log(se.toString(),v,"==>params");const J=Zs.estLiquidityAndcoinAmountFromOneAmounts(z,C,j,Z,ce,he,se),_e=P.decimals,Ue=L.decimals,{tokenMaxA:pe,tokenMaxB:$e,liquidityAmount:We,coinAmountA:p,coinAmountB:y}=J;return console.log(pe.toString(),"===>tokenMaxA.toString()"),console.log($e.toString(),"===>tokenMaxB.toString()"),console.log(p.toString(),"===>coinAmountA.toString()"),console.log(y.toString(),"===>coinAmountB.toString()"),console.log(J,"result===>"),console.log(J.liquidityAmount.toString(),"liquidityAmount===>"),console.log(_e,"===>coinaDecimals"),{tokenMaxAOrigin:pe.toString(),tokenMaxBOrigin:$e.toString(),tokenMaxA:zt(p.toString(),_e),tokenMaxB:zt(y.toString(),Ue),liquidityAmount:We}},Me=async v=>{var $,V,re,fe;const{pool:P,amount:L,fix_amount_a:z,roundUp:C,tick_lower:j,tick_upper:Z,index:ce,slippage:he,coinTypeC:se,coinTypeD:J,coinTypeE:_e,curSqrtPrice:Ue,positionInfo:pe,farmPoolInfo:$e}=v,We=await M(P.poolAddress);console.log(v.curSqrtPrice.toString(),"###getAddLiquidityTransactionPayload 732 params"),console.log(We,"###newPool");const p=z?yn(L,P.token_a.decimals):yn(L,P.token_b.decimals),y=Fn.sqrtPriceX64ToTickIndex(new U(We.current_sqrt_price));console.log(We.current_sqrt_price.toString(),v.curSqrtPrice.toString(),"curSqrtPrice##610");let m,d;if(y>=j&&y<=Z){const ae=Zs.estLiquidityAndcoinAmountFromOneAmounts(j,Z,new U(p.toString()),z,C,he,new U(We.current_sqrt_price));console.log(ae,ae.tokenMaxA.toNumber(),ae.tokenMaxB.toNumber(),"===>preAddResult.coinAmountA.toNumber()"),m=z?p.toNumber():ae.tokenMaxA.toNumber(),d=z?ae.tokenMaxB.toNumber():p.toNumber()}else y>Z?(m=0,d=p.toNumber()):y<j&&(m=p.toNumber(),d=0);console.log(v,"===>params742"),console.log("0330###createAddLiquidityTransactionPayload###params###",{coinTypeA:P.token_a.address,coinTypeB:P.token_b.address,pool_id:P.poolAddress,tick_lower:j<-443636?-443636:j,tick_upper:Z>443636?443636:Z,fix_amount_a:z,amount_a:m,amount_b:d,is_open:!ce,pos_id:ce});let _,I;if((($=pe==null?void 0:pe.value)==null?void 0:$.positionSource)==="farming"){console.log("0103 getAddLiquidityTransactionPayload positionInfo: ",pe);const ae=[];se&&ae.push(se),J&&ae.push(J),_e&&ae.push(_e);const nt={pool_id:(V=pe==null?void 0:pe.value)==null?void 0:V.pool_id,coinTypeA:P.token_a.address,coinTypeB:P.token_b.address,position_nft_id:(re=pe==null?void 0:pe.value)==null?void 0:re.id,clmm_pool_id:(fe=pe==null?void 0:pe.value)==null?void 0:fe.clmm_pool_id,amount_a:m,amount_b:d,collect_fee:!0,collect_rewarder:!1,fix_amount_a:z,clmm_rewarder_types:ae};_=await r.Farms.addLiquidityFixCoinPayload(nt),I={action:"FarmingIncreaseLiquidity",txbParams:nt}}else if(ce){const ae=[];se&&ae.push(se),J&&ae.push(J),_e&&ae.push(_e);const nt={coinTypeA:P.token_a.address,coinTypeB:P.token_b.address,pool_id:P.poolAddress,tick_lower:j<-443636?-443636:j,tick_upper:Z>443636?443636:Z,fix_amount_a:z,amount_a:m,amount_b:d,is_open:!ce,pos_id:ce,collect_fee:v.collect_fee,rewarder_coin_types:[...ae],slippage:he},Ae={slippage:he,curSqrtPrice:Ue};_=await s.Position.createAddLiquidityFixTokenPayload(nt,Ae),I={action:"IncreaseLiquidity",txbParams:{parameter:nt,gasEstimateArg:Ae}}}else if(console.log($e,"farmPoolInfo##"),$e){const ae={pool_id:$e.id,coinTypeA:P.token_a.address,coinTypeB:P.token_b.address,clmm_pool_id:$e.clmm_pool_id,amount_a:m.toString(),amount_b:d.toString(),fix_amount_a:z,tick_lower:j,tick_upper:Z};_=await r.Farms.openPositionAddLiquidityStakePaylod(ae),I={action:"FarmingOpenAndAddLiquidity",txbParams:ae}}else{const ae={coinTypeA:P.token_a.address,coinTypeB:P.token_b.address,pool_id:P.poolAddress,tick_lower:j<-443636?-443636:j,tick_upper:Z>443636?443636:Z,fix_amount_a:z,amount_a:m,amount_b:d,is_open:!ce,pos_id:"",collect_fee:!1,rewarder_coin_types:[],slippage:he},nt={slippage:he,curSqrtPrice:Ue};_=await s.Position.createAddLiquidityFixTokenPayload(ae,nt),I={action:"OpenAndAddLiquidity",txbParams:{parameter:ae,gasEstimateArg:nt}}}return console.log("0330###sui##getAddLiquidityTransactionPayload###",_),{txb:A(_),payloadParams:I}},Be=(v,P,L)=>{const z=Fn.sqrtPriceX64ToPrice(new U(v.current_sqrt_price),v.coinA.decimals,v.coinB.decimals).toNumber(),C=L?z:1/z,j=un(C).minus(un(P)).div(un(C)).mul(100);return j.gt(100)?100:(console.log(j.toString(),"1143"),Number(Kt(j.abs().toString(),2)))},De=async v=>{const{pool:P,a2b:L,byAmountIn:z,amount:C}=v;console.log("0221###sui###preSwap###",v);const j=P.coinA.decimals,Z=P.coinB.decimals,ce=P!=null&&P.current_sqrt_price?P:await M(P.address);let he;L&&z||!L&&!z?he=yn(C,j):he=yn(C,Z);const se=await s.Swap.preswap({pool:ce,current_sqrt_price:ce.current_sqrt_price,coinTypeA:ce.coinTypeA,coinTypeB:ce.coinTypeB,decimalsA:j,decimalsB:Z,a2b:L,byAmountIn:z,amount:he.toString()});return console.log("0221###sui###preSwap###result###",se),{...se,estimatedAmountIn:ii(zt(se.estimatedAmountIn.toString(),L?j:Z),L?j:Z),estimatedAmountOut:ii(zt(se.estimatedAmountOut.toString(),L?Z:j),L?Z:j),priceImpactPct:Kt(se.priceImpactPct,2)}},me=async v=>{console.log("0412###getSwapTransactionPayload###params###",v);const{pool:P,a2b:L,byAmountIn:z,amount:C,slippage:j}=v,Z=P.poolAddress,ce=P.token_a.decimals,he=P.token_b.decimals;let se;L&&z||!L&&!z?se=yn(C,ce):se=yn(C,he);const J=await s.Swap.preswap({pool:P,current_sqrt_price:P.current_sqrt_price,coinTypeA:P.coinTypeA,coinTypeB:P.coinTypeB,decimalsA:ce,decimalsB:he,a2b:L,by_amount_in:z,amount:se.toString()}),_e=un(J.estimatedAmountOut.toString()),Ue=un(J.estimatedAmountIn.toString()),pe=z?_e.sub(_e.mul(j)):Ue.add(Ue.mul(j));console.log("0221###sui###swap##params123456###",{pool_id:Z,a2b:J.aToB,by_amount_in:J.byAmountIn,amount:J.amount.toString(),amount_limit:Kt(pe.toString(),0)||"",coinTypeA:P.token_a.address,coinTypeB:P.token_b.address});const $e=await s.Swap.createSwapTransactionPayload({pool_id:Z,a2b:J.aToB,by_amount_in:J.byAmountIn,amount:J.amount.toString(),amount_limit:Kt(pe.toString(),0)||"",coinTypeA:P.token_a.address,coinTypeB:P.token_b.address});return console.log("0221###sui###swap##tx###",$e),A($e)},le=async(v,P)=>{const L=new Ss(t);console.log(P,"pools982");const z=Object.values(P).map(j=>(j==null?void 0:j.address)||(j==null?void 0:j.poolAddress));return console.log(z,"#poolList"),await L.Position.getPositionList(v,z)},je=async(v,P,L,z="")=>{var j;console.log("🚀🚀🚀 ~ file: useSui.ts:1141 ~ getPositionInfo ~ pool:",v);let C;try{return C=await new Ss(t).Position.getPosition((j=v==null?void 0:v.position_manager)==null?void 0:j.positions_handle,z),{...C,tokenName:L,collectionName:P}}catch(Z){String(Z).indexOf("Position not exists. Get Position error")>-1&&setTimeout(()=>{console.log("🚀🚀🚀 ~ file: useSui.ts:1158 ~ setTimeout ~ pool:",v),je(v,P,L,z)},5e3)}},xt=async v=>{const L=await new Ss(t).Position.getPositionById(v);return console.log("0503###getPositionById###result###",L),L},Rt=async(v,P)=>(console.log(v,P,"getTickDataByIndex"),await s.Pool.getTickDataByIndex(v,P)),ze=async(v,P)=>{const{pool:L,position:z,tickLowerData:C,tickUpperData:j}=v,Z=P||await M(L.poolAddress),ce=rb({clmmpool:Z,position:z,tickLower:C,tickUpper:j}),he=zt(ce.feeOwedA.toString(),L.token_a.decimals),se=zt(ce.feeOwedB.toString(),L.token_b.decimals);return{feeOwedA:Number(he)>99999999999||Number(he)<0?"0":he,feeOwedB:Number(se)>99999999999||Number(se)<0?"0":se}},ft=async v=>{const{poolAddress:P,pos:L,positionHandle:z}=v;return await s.Rewarder.posRewardersAmount(P,z,L)},qt=v=>v.pos_object_id,En=async v=>{const{pool:P,coinTypeA:L,coinTypeB:z,coinTypeC:C,coinTypeD:j,coinTypeE:Z,position:ce,delta_liquidity:he,rewards_num:se,positionInfo:J}=v;console.log("getRemoveLiquidityTransactionPayload params##",v);const _e=await M(P.poolAddress),Ue={...P,..._e},pe=Number(ce.tick_lower_index),$e=Number(ce.tick_upper_index),We=Fn.tickIndexToSqrtPriceX64(pe),p=Fn.tickIndexToSqrtPriceX64($e),y=Zs.getCoinAmountFromLiquidity(he,new U(Ue.current_sqrt_price),We,p,!0),m=un(y.coinA.toString()).mul(un(1-v.slippage)),d=un(y.coinB.toString()).mul(un(1-v.slippage)),I=[L,z,C,j,Z].filter(fe=>!!fe);let $;console.log("0331###remove###params###",{coin_types:I,min_amount_a:Kt(m.toString(),0),min_amount_b:Kt(d.toString(),0),pool_id:P.poolAddress,pos_id:v.position.pos_object_id}),console.log("0331###delta_liquidity.toString()###",he.toString()),console.log("0331###position.liquidity###",ce.liquidity);const V=[];C&&V.push(C),j&&V.push(j),Z&&V.push(Z);let re;if((J==null?void 0:J.positionSource)==="farming")if(he.toString()===ce.liquidity){const fe={pool_id:J==null?void 0:J.pool_id,coinTypeA:L,coinTypeB:z,position_nft_id:J==null?void 0:J.id,clmm_pool_id:J==null?void 0:J.clmm_pool_id,min_amount_a:Kt(m.toString(),0)||"",min_amount_b:Kt(d.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:[...V],delta_liquidity:J==null?void 0:J.liquidity,unstake:!0,close_position:!0,clmm_position_id:v.position.clmm_position_id};console.log("getRemoveLiquidityTransactionPayload FarmingRemoveLiquidity parameter: ",fe),$=await r.Farms.removeLiquidityPayload(fe),re={action:"FarmingRemoveLiquidity",txbParams:fe},console.log("getRemoveLiquidityTransactionPayload FarmingRemoveLiquidity result: ",$)}else{const fe={pool_id:J==null?void 0:J.pool_id,coinTypeA:L,coinTypeB:z,position_nft_id:J==null?void 0:J.id,clmm_pool_id:J==null?void 0:J.clmm_pool_id,min_amount_a:Kt(m.toString(),0)||"",min_amount_b:Kt(d.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:[...V],delta_liquidity:he.toString(),unstake:!1,close_position:!1};console.log("getRemoveLiquidityTransactionPayload FarmingDecreaseLiquidity parameter: ",fe),$=await r.Farms.removeLiquidityPayload(fe),re={action:"FarmingDecreaseLiquidity",txbParams:fe},console.log("getRemoveLiquidityTransactionPayload FarmingDecreaseLiquidity result: ",$)}else if(he.toString()===ce.liquidity){const fe={coinTypeA:L,coinTypeB:z,min_amount_a:Kt(m.toString(),0)||"",min_amount_b:Kt(d.toString(),0)||"",rewarder_coin_types:[...V],pool_id:P.poolAddress,pos_id:v.position.pos_object_id,collect_fee:!0};console.log("getRemoveLiquidityTransactionPayload RemoveLiquidity parameter: ",fe),$=await s.Position.closePositionTransactionPayload(fe),re={action:"RemoveLiquidity",txbParams:fe},console.log("getRemoveLiquidityTransactionPayload RemoveLiquidity result: ",$)}else{console.log(V,"==>rewarder_coin_types");const fe={coinTypeA:L,coinTypeB:z,delta_liquidity:he.toString(),min_amount_a:Kt(m.toString(),0)||"",min_amount_b:Kt(d.toString(),0)||"",pool_id:P.poolAddress,pos_id:v.position.pos_object_id,collect_fee:!0,rewarder_coin_types:[...V]};console.log("getRemoveLiquidityTransactionPayload DecreaseLiquidity parameter: ",fe),$=await s.Position.removeLiquidityTransactionPayload(fe),re={action:"DecreaseLiquidity",txbParams:fe},console.log("getRemoveLiquidityTransactionPayload DecreaseLiquidity result: ",$)}return console.log("0331###remove###result####",$),{txb:A($),payloadParams:re}},on=async(v,P)=>{const L=[];v.coinTypeC&&L.push(v.coinTypeC),v.coinTypeD&&L.push(v.coinTypeD),v.coinTypeE&&L.push(v.coinTypeE),console.log("0423###getCollectRewarderTransactionPayload###params###",{pool_id:v.pool_address,pos_id:v.pos_index,rewarder_coin_types:[...L],coinTypeA:v.coinTypeA,coinTypeB:v.coinTypeB,collect_fee:!1}),console.log(P,"##getCollectRewarderTransactionPayload");let z,C;if(P.positionSource=="farming"){const j={coinTypeA:P.coinTypeA,coinTypeB:P.coinTypeB,clmm_pool_id:P.clmm_pool_id,position_nft_id:P.id,clmm_rewarder_types:L,collect_fee:!0};z=await r.Farms.claimFeeAndClmmReward(j),C={action:"FarmingClaimFeeAndReward",txbParams:j}}else{const j={pool_id:v.pool_address,pos_id:v.pos_index,rewarder_coin_types:[...L],coinTypeA:v.coinTypeA,coinTypeB:v.coinTypeB,collect_fee:v.collect_fee};z=await s.Rewarder.collectRewarderTransactionPayload(j),C={action:"ClaimFeeAndMining",txbParams:j}}return{txb:A(z),payloadParams:C}},X=async v=>{console.log("1130###getCollectFeeTransactionPayload###params",{pool:v.pool.poolAddress,coinTypeA:v.pool.token_a.address,coinTypeB:v.pool.token_b.address,pos_index:v.position.index});const P=await s.Position.collectFeeTransactionPayload({coinTypeA:v.pool.token_a.address,coinTypeB:v.pool.token_b.address,pool_id:v.pool.poolAddress,pos_id:v.position.pos_object_id});return console.log("1130###getCollectFeeTransactionPayload###result##",P),A(P)},ne=async()=>await s.Pool.getPoolImmutables(),ye=(v,P)=>!!ib(Xt(v),Xt(P)),be=async v=>{const{coinTypeA:P,coinTypeB:L,decimalsA:z,decimalsB:C,amountA:j,amountB:Z,minPrice:ce,maxPrice:he,fix_amount_a:se,tick_spacing:J,slippage:_e,price:Ue}=v;console.log(v,"###getCreatPoolTransactionPayload 1201");const pe=Fn.priceToSqrtPriceX64(un(Ue),z,C);console.log("0407###getCreatPoolTransactionPayload###currentSqrtPrice###",pe);const $e=Fn.priceToTickIndex(un(Ue),z,C);console.log("0407###getCreatPoolTransactionPayload###currentTickIndex###",$e);let We,p;if(ce==="0"&&he==="∞")We=Vi.getMinIndex(Number(J)),p=Vi.getMaxIndex(Number(J));else{const V=Number(ce)==0?-443636:Fn.priceToTickIndex(un(ce),z,C),re=Fn.priceToTickIndex(un(he),z,C);We=$a(V,Number(J)),p=$a(re,Number(J))}console.log("0407###getCreatPoolTransactionPayload###tick_lower###",We),console.log("0407###getCreatPoolTransactionPayload###tick_upper###",p);const y=se?yn(j,z):yn(Z,C);let m,d;Fn.tickIndexToSqrtPriceX64(We),Fn.tickIndexToSqrtPriceX64(p);let _;$e>=We&&$e<=p?(_=Zs.estLiquidityAndcoinAmountFromOneAmounts(We,p,new U(y.toString()),se,!0,_e,pe),m=se?y.toString():_.tokenMaxA.toString(),d=se?_.tokenMaxB.toString():y.toString()):$e>p?(m="0",d=un(Z).mul(un(Math.pow(10,C))).toString()):$e<We&&(m=un(j).mul(un(Math.pow(10,z))).toString(),d="0"),We<-443636&&(We=Vi.getMinIndex(Number(J))),p>443636&&(p=We=Vi.getMaxIndex(Number(J))),console.log("0407####create pool params###",JSON.stringify({tick_spacing:J,initialize_sqrt_price:pe.toString(),uri:"",fix_amount_a:se,amount_a:m,amount_b:d,tick_lower:We,tick_upper:p,coinTypeA:P,coinTypeB:L}));const I=await s.Pool.creatPoolTransactionPayload({tick_spacing:J,initialize_sqrt_price:pe.toString(),uri:"",fix_amount_a:se,amount_a:m,amount_b:d,slippage:_e,tick_lower:We,tick_upper:p,coinTypeA:P,coinTypeB:L});console.log("0412####result###",I);const $=await R(I);return console.log("0412####simulateRes###",$),A(I)},Pe=v=>{const P=v.split("0x");return"0x"+(P[1][0]==="0"?P[1].substring(1):P[1])},Fe=async v=>{try{const P=localStorage.getItem("coinMatedataLocal"),L=P?JSON.parse(P):{};let z=[];const C=[];if(v&&typeof v=="string"){if(L[Pe(v)])return[L[Pe(v)]];z=[Pe(v)]}else{const he=[];if(v.forEach(se=>{L[Pe(se)]?C.push(L[Pe(se)]):he.push(Pe(se))}),he.length===0)return C;z=[...he]}const j=await s.CetusConfig.getTokenListByCoinTypes(z),Z=[],ce={};return Object.values(j).forEach(he=>{const se={...he,address:Cn(he.address).full_address};Z.push(se),ce[he.address]=se}),console.log("0714###getTokenListByCoinType###formatResult###",Z),localStorage.setItem("coinMatedataLocal",JSON.stringify({...L,...ce})),[...Z,...C]}catch{return[]}},Xe=async(v,P)=>{if(!P||P=="undefined")return null;let L=null;console.log("getTokenBySymbol###tokensObj###",v,P);for(const z in v){const C=v[z];console.log("🚀🚀🚀 ~ file: useSui.ts:1714 ~ getTokenBySymbol ~ tokensObj:",v),console.log("🚀🚀🚀 ~ file: useSui.ts:1713 ~ getTokenBySymbol ~ item:",C),console.log("🚀🚀🚀 ~ file: useSui.ts:1714 ~ getTokenBySymbol ~ key:",z),((C==null?void 0:C.address)||(C==null?void 0:C.coin_type)).toUpperCase()===String(Cn(P).full_address).toUpperCase()&&(L=C);break}if(!L){const z=P.split("0x");console.log("🚀 ~ getTokenBySymbol ~ address:",P);const C="0x"+(z[1][0]==="0"?z[1].substring(1):z[1]),j=await s.CetusConfig.getTokenListByCoinTypes([C]);j&&j[C]&&(L={...j[C],isSelfBuilt:!0,address:Cn(P).full_address})}return L},ht=async v=>{const{a2b:P,byAmountIn:L,amount:z,decimalsA:C,decimalsB:j}=v;let Z;P&&L||!P&&!L?Z=yn(z,C):Z=yn(z,j);const ce=await s.Swap.preSwapWithMultiPool({poolAddresses:v.poolAddresses,coinTypeA:v.coinTypeA,coinTypeB:v.coinTypeB,a2b:P,byAmountIn:L,amount:Z});return{...ce,estimatedAmountIn:ii(zt(ce.estimatedAmountIn.toString(),P?C:j),P?C:j),estimatedAmountOut:ii(zt(ce.estimatedAmountOut.toString(),P?j:C),P?j:C)}},vt=async(v,P)=>{console.log(v,"===>paths"),console.log(P,"===>coins"),s.Router.loadGraph(P,v),console.log(s,"sdk===>1826")},St=async(v,P)=>{const L=new Ss(t);L.senderAddress=o.value.address,console.log(v,"===>createTxParams");const z=await L.getOwnerCoinAssets((L==null?void 0:L.senderAddress)||o.value.address);console.log(z,"===>allCoinAsset");const C=await ob.buildAggregatorSwapTransaction(L,v,z,"",P),j={action:"Swap",txbParams:{createTxParams:v,slippage:P}};return{txb:A(C),payloadParams:j}},bt=async v=>{const P=await s.Rewarder.fetchPosRewardersAmount([v]),L=P&&P[0];return L&&L.rewarderAmountOwed},_t=async v=>(console.log("batchFetchPosRewardersAmount运行"),await s.Rewarder.fetchPosRewardersAmount(v)),Mt=U3(),Ft=yr(()=>Mt);return{setTransations:x,showTransitionPending:g,showTransitionSuccess:w,showTransitionError:b,watchTransaction:T,getAccount:E,getTokenList:S,getLpList:Oe,getPools:N,getPool:M,mintCoin:oe,handleTx:Te,TickUtil:Vi,TickMath:Fn,getNearestTickByTick:$a,getTicks:ve,getEstPositionAPRWithMulti:ke,getCoinAmountFromLiquidity:Ce,estLiquidityAndcoinAmountFromOneAmounts:Ie,getAddLiquidityTransactionPayload:Me,getTickDataFromUrlData:eb,getPriceImpactPct:Be,preSwap:De,getSwapTransactionPayload:me,getPositionList:le,getTickDataByIndex:Rt,getCollectFeesQuote:ze,getPosRewardersAmount:ft,getNftHash:qt,getPositionInfo:je,getRemoveLiquidityTransactionPayload:En,getCollectRewarderTransactionPayload:on,getCollectFeeTransactionPayload:X,getPoolImmutables:ne,estimateLiquidityForCoinA:tb,estimateLiquidityForCoinB:nb,getCreatPoolTransactionPayload:be,getTokenListByCoinType:Fe,getIsSortedSymbols:ye,getPositionById:xt,d:un,getTokenBySymbol:Xe,preSwapWithMultiPool:ht,initSwapRouter:vt,getSwapRouter:async(v,P,L,z,C,j="",Z,ce)=>{const he=v.value.decimals;console.log("🚀🚀🚀 ~ file: useSui.ts:1847 ~ getSwapRouter ~ fromCoin:",v.value.decimals);const se=P.value.decimals,J=localStorage.getItem("swapOrderSplit"),_e=localStorage.getItem("includeRoutes"),Ue=J=="open"||!J,pe=_e=="open";let $e;console.log(JSON.stringify({fromCoin:v.value.adress,toCoin:P.value.adress,amount:L,senderAddress:s.senderAddress,orderSplit:Ue,externalRouter:pe,lpChanges:ce}),"#########🚀🚀🚀 ~ file: useSui.ts:1906");try{if($e=await s.RouterV2.getBestRouterByServer(v.value.address,P.value.address,L,z,s.senderAddress,Ue,pe,ce),console.log("🚀🚀🚀 ~ file: useSui.ts:1878 ~ getSwapRouter ~ res:",$e.isTimeout),$e!=null&&$e.isTimeout)throw console.log("🚀🚀🚀 ~ file: useSui.ts:1881 ~ getSwapRouter ~ res?.isTimeout:",$e==null?void 0:$e.isTimeout),new Error("router timeout")}catch(We){console.log("🚀🚀🚀 ~ file: useSui.ts:1885 ~ getSwapRouter ~ error:",We);try{console.log("🚀🚀🚀 ~ file: useSui.ts:2014 ~ getSwapRouter ~ byAmountIn:",z),console.log("🚀🚀🚀 ~ file: useSui.ts:2014 ~ getSwapRouter ~ amount:",L),console.log("🚀🚀🚀 ~ file: useSui.ts:2014 ~ getSwapRouter ~ toCoin:",P),console.log("🚀🚀🚀 ~ file: useSui.ts:2014 ~ getSwapRouter ~ fromCoin:",v),console.log("🚀🚀🚀 ~ file: useSui.ts:2018 ~ getTokenList ~ swapWithMultiPool:",Z),$e=await Ft.value.swapRouterContract.getBestRouterByRpc(v,P,L,z,C,j,Z),console.log("🚀🚀🚀 ~ file: useSui.ts:2014 ~ getSwapRouter ~ res:",$e)}catch(p){console.log("🚀🚀🚀 ~ file: useSui.ts:1864 ~ getSwapRouter ~ error:",p)}}return{amountIn:zt($e.inputAmount.toString(),he),amountOut:zt($e.outputAmount.toString(),se),...$e}},getSwapRouterPayload:St,fetchPosRewardersAmount:bt,estCoinAmountsFromTotalAmount:v=>{const{lowerTick:P,upperTick:L,decimalsA:z,decimalsB:C,curSqrtPrice:j,totalAmount:Z,tokenPriceA:ce,tokenPriceB:he}=v;console.log(JSON.stringify({...v,curSqrtPrice:j.toString()}),"params===>");const se=Zs.estCoinAmountsFromTotalAmount(P,L,j,Z,ce,he);console.log("coinAmounts: ",se);const J=ec(se.amountA.toFixed(z,we.ROUND_UP).toString(),z),_e=ec(se.amountB.toFixed(C,we.ROUND_UP).toString(),C),Ue={coinA:new U(J),coinB:new U(_e)};return{amountA:zt(J.toString(),z),amountB:zt(_e.toString(),C),tokenAmountsInfo:Ue}},getCreateAddLiquidityPayload:async v=>{const{curSqrtPrice:P,tickLower:L,tickUpper:z,tokenAmounts:C,pool:j,slippage:Z}=v;console.log(JSON.stringify(v),"####getCreateAddLiquidityPayload 1593");const ce=Zs.estimateLiquidityFromcoinAmounts(P,L,z,C),he=new we(C.coinA.toString()).mul(1+Z),se=new we(C.coinB.toString()).mul(1+Z),J={coinTypeA:j.coinTypeA,coinTypeB:j.coinTypeB,pool_id:j.address,tick_lower:L,tick_upper:z,delta_liquidity:ce.toString(),max_amount_a:we.ceil(he).toString(),max_amount_b:we.ceil(se).toString(),pos_id:"",rewarder_coin_types:[],collect_fee:!1};console.log(JSON.stringify(J),"==>addLiquidityPayloadParams");const _e=await s.Position.createAddLiquidityPayload(J);return A(_e)},calculateDepositRatioFixTokenA:(v,P,L)=>Zs.calculateDepositRatioFixTokenA(v,P,L),signAndExecuteTransactionBlock:async(v,P,L)=>{var C;if(((v==null?void 0:v.name)==="MSafe Wallet"||f.value==="MSafe Wallet")&&!L)throw a.setIsNotSupportMsafeError(!0),Error("The current operation does not support msafe wallet");a.setIsNotSupportMsafeError(!1),console.log("0319 signAndExecuteTransactionBlock###wallet###",v),console.log("0327 signAndExecuteTransactionBlock###payload###",P),console.log("0327 signAndExecuteTransactionBlock###payloadParams###",L),console.log("0319 signAndExecuteTransactionBlock###sdk.senderAddress###",s.senderAddress);let z;try{P.transactionBlock.setSender(s.senderAddress),console.log("0321 signAndExecuteTransactionBlock start build: ",new Date().getTime());const Z=await P.transactionBlock.build({client:s.fullClient});console.log("0321 signAndExecuteTransactionBlock buildTxb: ",Z),z=Mh.from(Z),console.log("0321 signAndExecuteTransactionBlock start end: ",new Date().getTime()),console.log("0327 signAndExecuteTransactionBlock###newTxb###",z)}catch(j){console.log("0319 signAndExecuteTransactionBlock error: ",j)}if(console.log("signAndExecuteTransactionBlock wallet?.name: ",v==null?void 0:v.name),console.log("signAndExecuteTransactionBlock currentWalletName.value: ",f.value),(v==null?void 0:v.name)==="MSafe Wallet"||f.value==="MSafe Wallet"){console.log("signAndExecuteTransactionBlock MSafe Wallet Start");const j=(C=v.getState())==null?void 0:C.currentAccount;console.log("signAndExecuteTransactionBlock MSafe Wallet account: ",j);const Z=P.transactionBlock;return Z.setSender(s.senderAddress),console.log("signAndExecuteTransactionBlock MSafe Wallet txb: ",Z),await v.signAndExecuteTransactionBlock({transactionBlock:Z,account:j,chain:"sui:mainnet",action:L==null?void 0:L.action,txbParams:L==null?void 0:L.txbParams})}else{if(f.value==="Fox")return await v.signAndExecuteTransactionBlock(P);if(f.value==="Fewcha")return await v.signAndExecuteTransactionBlock(P);const{transactionBlockBytes:j,signature:Z}=await v.signTransactionBlock({transactionBlock:z});if((L==null?void 0:L.action)==="AggregatorSwap"){const ce=new Date().getTime(),he=await s.fullClient.executeTransactionBlock({transactionBlock:j,signature:Z,options:P.options}),se=new Date().getTime();let J=0,_e={};try{_e=await s.fullClient.getTransactionBlock({digest:he==null?void 0:he.digest,options:P.options}),J=_e==null?void 0:_e.timestampMs}catch(pe){console.log("🚀 ~ file: useSui.ts:2402 ~ signAndExecuteTransactionBlock ~ error:",pe)}const Ue=J?Math.min(se,Number(J)):se;return{...he,..._e,excecuteTime:Ue-ce}}else return await s.fullClient.executeTransactionBlock({transactionBlock:j,signature:Z,options:P.options})}},getAllPosition:async(v,P=[])=>{const L=await s.fullClient.getOwnedObjectsByPage(v,{options:{showType:!0,showContent:!0,showOwner:!0,showDisplay:!0},filter:{MatchAny:[{Package:s.sdkOptions.clmm_pool.package_id},{StructType:`${ge[e||"Sui"].frams.package_id}::pool::WrappedPositionNFT`}]}});console.log(L,"ownerRes:");const z=()=>`${s.sdkOptions.clmm_pool.package_id}::position::Position`,C=()=>`${ge[e||"Sui"].frams.package_id}::pool::WrappedPositionNFT`,j=[],Z=[],ce=P.length>0;for(const he of L.data){const se=Cn(he.data.type);if(se.full_address===z()){const J=ab(he);ce?P.includes(J.pool)&&j.push(J):j.push(J)}if(se.full_address===C()){const J=Jh.buildFramsPositionNFT(he);ce?P.includes(J.clmm_pool_id)&&Z.push(J):Z.push(J)}}return console.log("farmsPosition：",Z),console.log("clmmPosition:",JSON.stringify(j)),{clmmPosition:j,farmsPosition:Z}},getFullClient:()=>{const v=new Ss(t);return console.log("getFullClient defaultNetworkOptions: ",t),console.log("getFullClient sdk: ",v),v.fullClient},getPoolsObj:D,getBestRouterByServer:async(v,P,L,z,C,j="",Z,ce)=>{const he=v.value.decimals,se=P.value.decimals,J=localStorage.getItem("swapOrderSplit"),_e=localStorage.getItem("includeRoutes"),Ue=J=="open"||!J,pe=_e=="open";let $e;try{return $e=await s.RouterV2.getBestRouterByServer(v.value.address,P.value.address,L,z,s.senderAddress,Ue,pe,ce),console.log("🚀🚀🚀 ~ file: useSui.ts:1947 ~ getLpListFromContract ~ res:",$e),{...$e,amountIn:zt($e.inputAmount.toString(),he),amountOut:zt($e.outputAmount.toString(),se)}}catch(We){console.log("🚀🚀🚀 ~ file: useSui.ts:1960 ~ getLpListFromContract ~ e:",We)}},getBestRouterByRpc:async(v,P,L,z,C,j="",Z,ce)=>{let he;try{return he=await s.RouterV2.getBestRouterByRpc(v.value.address,P.value.address,L,z,C,j,Z),he}catch(se){console.log(se)}},getSuiTokenObj:O,batchFetchPosRewardersAmount:_t}}function In(e){let t={};return!e||e==="Aptos"?t=P3():t=O3(e),{...t}}function Hh(e){const t={launchpad:ge[e||"Sui"].launchpad,ido:ge[e||"Sui"].ido,xcetus:ge[e||"Sui"].xcetus,xcetus_dividends:ge[e||"Sui"].xcetus_dividends,cetus_faucet:ge[e||"Sui"].cetus_faucet,xtoken:ge[e||"Sui"].xtoken,xtoken_dividends:ge[e||"Sui"].xtoken_dividends,token_faucet:ge[e||"Sui"].token_faucet,booster:ge[e||"Sui"].booster,maker_bonus:ge[e||"Sui"].maker_bonus,liquidity_stratefy:ge[e||"Sui"].liquidity_stratefy,vaults:ge[e||"Sui"].vaults,frams:ge[e||"Sui"].frams},n={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal4`)||ge[e||"Sui"].fullRpcUrl,simulationAccount:ge[e||"Sui"].simulationAccount,cetus_config:ge[e||"Sui"].cetus_config,clmm_pool:ge[e||"Sui"].clmm_pool,integrate:ge[e||"Sui"].integrate,deepbook:ge[e||"Sui"].deepbook,deepbook_endpoint_v2:ge[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:ge[e||"Sui"].aggregatorUrl},s=new cb(n),r=new Xh(t,s),i=xl(),o=yr(()=>i);Gh(()=>{o.value.address&&(s.senderAddress=o.value.address)});const a=x=>({transactionBlock:x,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),c=async()=>{try{return(await r.Farms.getFramsPoolList()).data}catch(x){console.log("🚀🚀🚀 ~ file: useFarms.ts:70 ~ getFramsPoolList ~ error:",x)}},u=async(x,E)=>{const S=await r.Farms.getOwnedFramsPositionNFTList(r.ClmmSDK.senderAddress,x,E);return S&&!La(S)?S.data?S.data:Object.values(S)[0]:[]},l=async(x,E)=>{const S={pool_id:E,clmm_position_id:x.clmm_position_id},q=await r.Farms.depositPayload(S),O={action:"FarmingStake",txbParams:S};return{txb:a(q),payloadParams:O}},f=async(x,E)=>{const S={pool_id:x,position_nft_id:E},q=await r.Farms.withdrawPayload(S),O={action:"FarmingUnstake",txbParams:S};return{txb:a(q),payloadParams:O}},h=async x=>await r.Farms.calculateFarmingRewards(x,!0),g=async x=>{const E=await r.Farms.harvestPayload(x),S={action:"FarmingHarvest",txbParams:x};return{txb:a(E),payloadParams:S}},w=async x=>{const E=await r.Farms.batchHarvestPayload(x),S={action:"FarmingBatchHarvest",txbParams:x};return{txb:a(E),payloadParams:S}},b=(x,E,S)=>{const q=x.tick_lower_index,O=x.tick_upper_index,{liquidity:F}=x,{price:Y,effective_tick_lower:Se,effective_tick_upper:Oe,total_wrapped_amount:N}=E,D=Jh.calculatePositionShare(q,O,F,Y,Se,Oe,S);return new we(D).div(new we(N)).mul(100).toString()},T=async x=>(await s.Position.fetchPosFeeAmount(x)).map((q,O)=>({positionId:x[O].positionId,feeOwedA:new we(q.feeOwedA.toString()).div(Math.pow(10,x[O].decimalA)).toString(),feeOwedB:new we(q.feeOwedB.toString()).div(Math.pow(10,x[O].decimalB)).toString()})),R=async x=>{const E=await r.Farms.getFramsPositionNFT(x,!0);if(E===void 0)setTimeout(()=>{R(x)},5e3);else return E};return{getFramsPoolList:c,getOwnedFramsPositionNFTList:u,farmsDeposit:l,farmsWithdraw:f,calculateFarmingRewards:h,harvestFarms:g,batchHarvest:w,calculatePositionShare:b,fetchPosFeeAmount:T,getFramsPositionNFT:R,batchHarvestAndClmmFee:async(x,E)=>{const S={action:"batchHarvestAndClmmFee",txbParams:{framsListParams:x,clmmListParams:E}},q=await r.Farms.batchHarvestAndClmmFeePayload(x,E);return{txb:a(q),payloadParams:S}}}}const I3=lc("pool",{state:()=>({tokens:[],tokensObj:{},pools:[],poolsObj:{},myPositions:[],addressLpTokens:{},addressTokens:{},currentPositionLoading:!1,myPositionsLoading:!0,poolsLoading:!0,RATES:{},currentPositionInfo:{},poolConfigList:[],feeOwedObj:{},rewarderObj:{},chinaTokens:[],chinaTokensObj:{},getPoolInfoSuccess:!1,recommendRangesObj:{},allTokenObj:{},isTokenLoading:!0,poolPriceConfigObj:{},defaultPoolInfo:{},poolConfigObj:{},openPool:[],routerPoolConfigObj:{},tokensWarningObj:{},currentChain:"",liquidityCurrentPoolInfo:{},positionDetailCurrentTab:"increase",positionActionAmount:{fromCoinAmount:"",toCoinAmount:""},currentPoolTab:"All",currentPoolMoreInfo:{},poolPositions:[],autoPoolNum:"--",tokenExternalPriceObj:{},positionShowList:[],getPendingFeeSuccess:!1,getRewardSuccess:!1,coinMetaData:JSON.parse(localStorage.getItem("SuiTokenObj")||"{}"),notTrustedObj:{},poolListPageSize:20,poolListLoading:!1,isContractTokenLoaing:!0}),actions:{async setPageSize(e){this.poolListLoading=!0,await kr(1e3),this.poolListPageSize=e,this.poolListLoading=!1},async setLiquidityCurrentPoolInfo(e){this.liquidityCurrentPoolInfo=e},async setPoolPositions(e){this.poolPositions=e},async setCurrentPoolMoreInfo(e){this.currentPoolMoreInfo=e},async setChainPoolConfigList(e){this.poolConfigList=e,this.pools=e},async setCurrentPoolTab(e){this.currentPoolTab=e},async setPoolConfigList(e,t,n=!0){const r=await In(e).getLpList(t,n);console.log("🚀🚀🚀 ~ file: pool.ts:77 ~ setPoolConfigList ~ res:",r);const i=[],o=[],a=[];r.forEach(u=>{var f,h,g;const l={...u,token_a:{...u==null?void 0:u.coinA,logoURI:(f=u==null?void 0:u.coinA)==null?void 0:f.logo_url},token_b:{...u==null?void 0:u.coinB,logoURI:(h=u==null?void 0:u.coinB)==null?void 0:h.logo_url},isFarming:u.is_display_rewarder&&(u.rewarder_display1||u.rewarder_display2||u.rewarder_display3),chain:e==="Aptos"?"aptos":"sui",fee_rate:u.fee*1e4,routerSymbol:[u.coin_a_address,u.coin_b_address].sort(function(w,b){return b.localeCompare(w)}).join("-")};u.is_closed||i.push(l),e=="Sui"&&(!((g=u.object)!=null&&g.is_pause)||!u.is_pause)&&o.push(l),a.push(l)}),console.log("0509###setPoolConfigList###",o),this.poolConfigList=e=="Aptos"?i:o,console.log("🚀🚀🚀 ~ file: pool.ts:108 ~ setPoolConfigList ~ list:",i),this.poolConfigObj=e=="Aptos"?Object.fromEntries(i.map((u,l)=>[u.address,u])):Object.fromEntries(o.map((u,l)=>[u.address,u]));const c=a.filter(u=>!u.is_pause);this.openPool=c,this.routerPoolConfigObj=Object.fromEntries(c.map((u,l)=>[u.address,u]))},async getRecommendRanges(e){var t;try{let n=null;if(e&&e.includes("Sui")?n=await $fetch(`${ge[e].api}/v2/sui/liquidity/recommend_ranges`):n=await $fetch(`${ge.Aptos.api}/v2/liquidity/recommend_ranges`),(t=n==null?void 0:n.data)!=null&&t.list){const s=Object.fromEntries(n.data.list.map((r,i)=>[r.address,r]));this.recommendRangesObj=s,this.poolPriceConfigObj=s}else this.recommendRangesObj={},this.poolPriceConfigObj={}}catch(n){console.info("🚀🚀🚀 ~ file: pool.ts:134 ~ getRecommendRanges ~ error:",n),this.recommendRangesObj={},this.poolPriceConfigObj={}}},async setPools(e,t){this.poolsLoading=!0,this.getPoolInfoSuccess=!1,this.currentChain=t;const n=In(t);if((t==null?void 0:t.toLowerCase())==="aptos"){if(e&&e.length>0){for(let s=0;s<e.length&&t===this.currentChain;s++){const r=e[s],i=await n.getPools([r.address]);this.defaultPoolInfo[i[0].poolAddress]=i[0],this.poolsObj[i[0].poolAddress]={...r,...i[0],fee:Number(i[0].fee_rate)/1e6},this.addressLpTokens=this.poolsObj,this.poolsLoading=!1,await kr(500)}this.getPoolInfoSuccess=!0}}else if(e&&e.length>0){e.map(r=>r.address);const s={};for(let r=0;r<e.length;r++){const i=e[r];s[i.address]={...i}}console.log("0605###setPools###result###",s),this.poolsObj=s,this.addressLpTokens=s,this.poolsLoading=!1,this.getPoolInfoSuccess=!0}},async setSinglePool(e,t,n){const r=await In(n).getPool(e.address);console.log(t,"recommendRangesInfo");const i={...e,...r,fee:r.fee_rate/1e6,type:(t==null?void 0:t.type)||""};console.log("0506###setSinglePool###result###",i),this.poolsObj[e.address]=i,console.log(this.poolsObj,"===>173"),this.addressLpTokens[e.address]=i},async updateCurrentPools(e,t){const n=In(t),s=this.poolsObj[e];if(console.log(s,"===>currentPool"),s){let r={};t&&t.includes("Sui")?r=await n.getPool((s==null?void 0:s.poolAddress)||(s==null?void 0:s.address)):r=await n.getPoolState(s.poolAddress,s.poolType,!1),console.log("0411###debug###newInfo####",r);const i={...this.poolsObj},o={...i[e],...r};console.log("0411###debug###newCurrentInfo####",o),i[e]={...o},console.log("0411###debug###newPoolsObj####",i),this.poolsObj=i}},async setTokens(e){this.isContractTokenLoaing=!0;const t=[];console.log("0613###setTokens####111111###",e);const n=In(e);console.log("0613###setTokens####22222###contract###",n);const s=await n.getTokenList();console.log("0613###setTokens####22222###res###",s),s.forEach(r=>{t.push({...r,logoURI:r.logo_url,chain:e.toLowerCase()})}),this.tokens=t,this.isContractTokenLoaing=!1},setCurrentPositionLoading(e){this.currentPositionLoading=e},setMyPositionsLoading(e){this.myPositionsLoading=e},async setRates(e){var r;let t={};if(e&&e.includes("Sui"))try{t=await $fetch(`${ge.Sui.api}/v2/sui/market_price`)}catch(i){console.log("sui pric api error ###",i),t={}}else t=await $fetch(`${ge.Aptos.api}/v2/price`);const n=((r=t==null?void 0:t.data)==null?void 0:r.prices)||[],s=[];n.forEach(i=>{i.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?s.push({...i},{...i,base_symbol:"0x2::sui::SUI"}):s.push(i)}),this.RATES=Object.fromEntries(s.map(i=>[i.base_symbol,i]))},async getMyPositons(e,t,n){console.log("0507###getMyPositons###start###",t),this.setMyPositionsLoading(!0);const s=In(n);let r=[],i=[];this.getRewardSuccess=!1,this.getPendingFeeSuccess=!1;let o={};if(n=="Sui"){const{clmmPosition:f,farmsPosition:h}=await s.getAllPosition(e,t);r=f,i=h;const g=r==null?void 0:r.map(T=>T==null?void 0:T.pool),w=i==null?void 0:i.map(T=>T==null?void 0:T.clmm_pool_id),b=[...new Set([...g,...w])];if(b&&b.length>0){const T=await(s==null?void 0:s.getPools(b));o=Object.fromEntries(T==null?void 0:T.map(R=>[R==null?void 0:R.poolAddress,R]))}}else r=await s.getPositionList(e,t)||[],console.log("🚀 ~ file: pool.ts:343 ~ getMyPositons ~ positionList:",r);let a=[];n=="Sui"&&(a=i.map(f=>{const h=[];let g=new we(0);return f.rewards.forEach(w=>{var E;const b=w.rewarder_type,T=this.tokensObj[b],R=((E=this.RATES[b])==null?void 0:E.price)||0,A=new we(w.rewarder_amount).div(new we(Math.pow(10,T.decimals))),x=A.mul(new we(R));g=g.add(x),A.toNumber()>0&&h.push({...w,amount:A,rewarderAmountUsd:x.toString(),address:b,symbol:T.symbol})}),{...f,rewards:h,farmingRewardTotalUsd:g.toNumber(),positionSource:"farming"}}),console.log("farmingPositionList:",a)),console.log("0507###getMyPositons###positionList###",r),r.length<1&&(this.setMyPositionsLoading(!1),this.getRewardSuccess=!0,this.getPendingFeeSuccess=!0);const c=a.concat(r);console.log(c,"##allPositionList");const u=[];c.forEach(f=>{var q,O,F,Y,Se,Oe,N,D,M,oe,Te,ve,ke,Ce,Ie,Me,Be,De;const h={...t[f.pool||f.clmm_pool_id],...o[f.pool||f.clmm_pool_id]};let g,w,b,T,R="",A,x,E,S;if(console.log("allPositionList item:",f),f.liquidity&&f.liquidity!=="0"&&h){const me={creator:f.creator,collection:f.collection,name:f.name};n==="Aptos"?S=s.getNftHash(me):S=s.getNftHash(f);const le=(q=h.token_a)==null?void 0:q.decimals,je=(O=h.token_b)==null?void 0:O.decimals;console.log(h,"poolInf=====>"),h!=null&&h.current_sqrt_price&&(b=s.TickMath.sqrtPriceX64ToPrice(h==null?void 0:h.current_sqrt_price,le,je).toString(),T=new we(1).div(s.TickMath.sqrtPriceX64ToPrice(h==null?void 0:h.current_sqrt_price,le,je)).toString()),f.tick_lower_index==s.TickUtil.getMinIndex(Number(h.tickSpacing))?g="0":g=s.TickMath.tickIndexToPrice(Number(f.tick_lower_index),le,je).toString(),f.tick_upper_index==s.TickUtil.getMaxIndex(Number(h.tickSpacing))?w="∞":(w=s.TickMath.tickIndexToPrice(Number(f.tick_upper_index),le,je).toString(),console.log("0523###maxPrice###2222###",w));let xt,Rt;w!=="∞"?Rt=new we(1).div(new we(w)).toString():Rt="∞",g!==0?xt=new we(1).div(new we(g)).toString():xt="0";const ze=h.needReverse?((Oe=this.tokensObj[(Se=h==null?void 0:h.coinB)==null?void 0:Se.address])==null?void 0:Oe.labels)||[]:((Y=this.tokensObj[(F=h==null?void 0:h.coinA)==null?void 0:F.address])==null?void 0:Y.labels)||[],ft=h.needReverse?((D=this.tokensObj[(N=h==null?void 0:h.coinA)==null?void 0:N.address])==null?void 0:D.labels)||[]:((oe=this.tokensObj[(M=h==null?void 0:h.coinB)==null?void 0:M.address])==null?void 0:oe.labels)||[],qt=[...new Set(ze.concat(ft))],En=s.getCoinAmountFromLiquidity({pool:h,position:f,roundUp:n!="Sui"}),on=En.coinaAmount,X=En.coinbAmount;console.log(b,"===>currentPrice");const ne=Number(X)+Number(on)*Number(b);let ye=(Number(on)*Number(b)/ne*100).toFixed(0),be=(X/ne*100).toFixed(0);g=="0"&&w=="∞"&&(ye="50",be="50"),h.isPause?R="Closed":Number(b)>=Number(g)&&(w==="∞"||Number(b)<=Number(w))?R="Active":(Number(b)>Number(w)||Number(b)<Number(g))&&(R="Inactive"),console.log("0323###this.tokensObj####",this.tokensObj),console.log("0323###this.tokensObj[poolInfo.token_a.address]####",this.tokensObj[(Te=h==null?void 0:h.token_a)==null?void 0:Te.address]),console.log("0323###poolInfo.token_a.address####",(ve=h==null?void 0:h.token_a)==null?void 0:ve.address),console.log("0323###poolInfo.token_b.address####",(ke=h==null?void 0:h.token_b)==null?void 0:ke.address);let Pe={},Fe={};n==="Aptos"?(Pe={...h.token_a,...this.tokensObj[(Ce=h==null?void 0:h.token_a)==null?void 0:Ce.address],logoURI:(Me=this.tokensObj[(Ie=h==null?void 0:h.token_a)==null?void 0:Ie.address])==null?void 0:Me.logo_url},Fe={...h.token_b,...this.tokensObj[(Be=h==null?void 0:h.token_b)==null?void 0:Be.address],logoURI:this.tokensObj[(De=h==null?void 0:h.token_b)==null?void 0:De.address].logo_url}):(Pe=h==null?void 0:h.token_a,Fe=h==null?void 0:h.token_b),u.push({poolInfoOrigin:o[f.pool||f.clmm_pool_id],...h,...f,labels:qt,totalAmount:ne,token_a:Pe,token_b:Fe,tokenARates:A,tokenBRates:x,amountA:on,amountB:X,fromPercent:ye,toPercent:be,amountUSD:E,tokenName:f.tokenName||f.name,currentStatus:R,positionLiquidity:f.liquidity,nftHash:S,currentPrice:b,currentPriceReverse:T,minPrice:Sr(g,12),maxPrice:Sr(w,12),positionSource:f.id?"farming":"clmm",farmingRewardTotalUsd:f.id?f.farmingRewardTotalUsd:0,minPriceResever:xt,maxPriceResever:Rt})}});const l=u.sort((f,h)=>h.amountUSD-f.amountUSD);this.myPositions=l,this.setMyPositionsLoading(!1),this.getPendingFees(l,n),this.getRewarderV2(l,n),console.log(l,"===>this.myPositions")},setMyPositions(){this.myPositions=[],this.feeOwedObj={},this.rewarderObj={}},async setCurrentPositionInfo(e,t,n,s,r="",i=""){var g,w,b,T,R,A;const o=In(s);let a;s=="Sui"&&(a=Hh(s));let c=null,u=null,l=null,f=null,h=null;if(e&&r||s==="Aptos"?(c=this.addressLpTokens&&this.addressLpTokens[e],u=await o.getPool(e),h=this.poolConfigObj[e],console.log(h,"===>poolConfig"),l={...c,...u,...h},console.log(l,"423"),f=await o.getPositionInfo(l,t,n,r)):s!=="Aptos"&&(console.log("0414###setCurrentPositionInfo###",r),f=i=="farming"?await a.getFramsPositionNFT(r):await o.getPositionById(r),console.log("🚀🚀🚀 ~ file: pool.ts:562 ~ setCurrentPositionInfo ~ positionInfo:",f),console.log(f,"setCurrentPositionInfo:positionInfo"),u=i=="farming"?await o.getPool(f.clmm_pool_id):await o.getPool(f.pool),c=this.addressLpTokens&&this.addressLpTokens[f.pool||this.addressLpTokens.poolAddress],h=this.poolConfigObj[f.clmm_pool_id||f.pool],console.log(this.poolConfigObj[f.clmm_pool_id],"##this.poolConfigObj[poolAddress]"),l={...c,...u,...h},console.log("poolInfoNew:",c,u),console.log("0414###setCurrentPositionInfo###positionInfo###",f),console.log("0414###setCurrentPositionInfo###poolInfo###",l)),console.log("setCurrentPositionInfo:",l),f&&l){let x,E,S,q,O="",F,Y,Se,Oe,N,D=0,M=0,oe;const Te={creator:f.pool,collection:f.collectionName,name:f.name};s==="Aptos"?oe=o.getNftHash(Te):oe=o.getNftHash(f),console.log("0329###setCurrentPositionInfo###poolInfo###",l),console.log("0329###setCurrentPositionInfo###positionInfo###",f);let ve=0,ke=0;if(l!=null&&l.token_a&&(l!=null&&l.token_b))ve=(g=l==null?void 0:l.token_a)==null?void 0:g.decimals,ke=(w=l==null?void 0:l.token_b)==null?void 0:w.decimals;else{const Ce=(await o.getTokenListByCoinType(l==null?void 0:l.coinTypeA))[0],Ie=(await o.getTokenListByCoinType(l==null?void 0:l.coinTypeB))[0];ve=Ce==null?void 0:Ce.decimals,ke=Ie==null?void 0:Ie.decimals,l.coinA=Ce,l.coinB=Ie,l.token_a=Ce,l.token_b=Ie}if(l){try{let Rt;if(i!=="farming"){const ze=await o.getTickDataByIndex(l.ticks_handle,Number(f.tick_lower_index)),ft=await o.getTickDataByIndex(l.ticks_handle,Number(f.tick_upper_index));Rt=await o.getCollectFeesQuote({pool:l,position:f,tickLowerData:ze,tickUpperData:ft},u)}else{console.log(l,l.token_a,"setCurrentPositionInfo:poolInfo");const ze=[{poolAddress:l.poolAddress,positionId:f.clmm_position_id,coinTypeA:l.coinTypeA,coinTypeB:l.coinTypeB,decimalA:l.token_a.decimals,decimalB:l.token_b.decimals}];console.log(ze,"params###");const ft=await a.fetchPosFeeAmount(ze);console.log(ft,"##farmingPositionFee"),Rt=ft[0]}console.log(Rt,"setCurrentPositionInfo feeOwn:"),Rt&&(D=Number(Rt.feeOwedA),M=Number(Rt.feeOwedB))}catch(Rt){console.log("0314###getCollectFeesQuote###error####",Rt)}console.log("0413####setCurrentPositionInfo###poolInfo###",l),S=o.TickMath.sqrtPriceX64ToPrice(l.current_sqrt_price,ve,ke).toString(),q=new we(1).div(o.TickMath.sqrtPriceX64ToPrice(l==null?void 0:l.current_sqrt_price,ve,ke)).toString(),f.tick_lower_index==o.TickUtil.getMinIndex(Number(l.tickSpacing))?x="0":x=o.TickMath.tickIndexToPrice(Number(f.tick_lower_index),ve,ke).toString(),f.tick_upper_index==o.TickUtil.getMaxIndex(Number(l.tickSpacing))?E="∞":E=o.TickMath.tickIndexToPrice(Number(f.tick_upper_index),ve,ke).toString();let Ce,Ie;E!=="∞"?Ie=new we(1).div(new we(E)).toString():Ie="∞",x!==0?Ce=new we(1).div(new we(x)).toString():Ce="0",F=f.tick_lower_index,Y=f.tick_upper_index;const Me=o.getCoinAmountFromLiquidity({pool:l,position:f,roundUp:s!="Sui"});let Be,De,me;console.log(S,"===>currentPrice522"),S&&S>0&&(Oe=Me==null?void 0:Me.coinaAmount,N=Me==null?void 0:Me.coinbAmount,console.log(Me,"===>amountInfo"),console.log(S,"===>currentPrice"),me=Number(N)+Number(Oe)*Number(S),console.log(me,"===>totalAmount"),Be=(Number(Oe)*Number(S)/me*100).toFixed(0),console.log(Be,"===>fromPercent"),De=(Number(N/Number(me))*100).toFixed(0),console.log(De,"==>toPercent"));let le;const je=Me.coinaAmount*((b=this.RATES[l==null?void 0:l.token_a.address])==null?void 0:b.price),xt=Me.coinbAmount*((T=this.RATES[l==null?void 0:l.token_b.address])==null?void 0:T.price);(R=this.RATES[l==null?void 0:l.token_a.address])!=null&&R.price&&((A=this.RATES[l==null?void 0:l.token_b.address])!=null&&A.price)&&(le=je+xt),console.log(le,"==>totalAmountUSD"),l.isPause?O="Closed":Number(S)>=Number(x)&&(E==="∞"||Number(S)<=Number(E))?O="Active":(Number(S)>Number(E)||Number(S)<Number(x))&&(O="Inactive"),this.currentPositionInfo={...f,poolInfo:l,token_a:{...l.token_a,...this.tokensObj[l.token_a.address]},token_b:{...l.token_b,...this.tokensObj[l.token_b.address]},current_tick_index:l.current_tick_index,current_sqrt_price:l.current_sqrt_price,tickSpacing:l.tickSpacing,fee:l.fee,poolAddress:l.poolAddress,address:l.address,is_display_rewarder:l.is_display_rewarder,nftHash:oe,feeOwedA:D,feeOwedB:M,currentStatus:O,amountA:Oe,amountB:N,tokenARates:je,tokenBRates:xt,amountUSD:Se,totalAmount:me,totalAmountUSD:le,currentPrice:S,currentPriceReverse:q,minPrice:Sr(x,12),minTick:F,maxTick:Y,maxPrice:Sr(E,12),fromPercent:Be||"--",toPercent:De||"--",tokenName:f.tokenName||f.name,positionSource:f.id?"farming":"clmm",minPriceResever:Ce,maxPriceResever:Ie},this.currentPositionLoading=!1,console.log("positionInfo.value",this.currentPositionInfo)}}},async getPendingFees(e,t){var o,a;const n=this.RATES,s=In(t);let r,i=[];if(t=="Sui"){r=Hh("Sui");const c=e.filter(u=>u.positionSource==="farming").map(u=>({poolAddress:u.poolAddress,positionId:u.clmm_position_id,coinTypeA:u.coinTypeA,coinTypeB:u.coinTypeB,decimalA:u.token_a.decimals,decimalB:u.token_b.decimals}));c.length>0&&(console.log("🚀 ~ file: pool.ts:860 ~ getPendingFees ~ farmsPosFeeParams:",c),i=await r.fetchPosFeeAmount(c),console.log("🚀 ~ file: pool.ts:860 ~ getPendingFees ~ farmingPositionFeeList:",i))}console.log("0302###getPendingFees####result###",e);for(let c=0;c<e.length;c++){const u=e[c];let l=e[c].poolInfoOrigin;l||(l=await s.getPool(u.poolAddress));const f={...l,token_a:(u==null?void 0:u.token_a)||this.tokensObj&&this.tokensObj[l.coinTypeA]||this.chinaTokensObj&&this.chinaTokensObj[l.coinTypeA],token_b:(u==null?void 0:u.token_b)||this.tokensObj&&this.tokensObj[l.coinTypeB]||this.chinaTokensObj&&this.chinaTokensObj[l.coinTypeB]};let h;if(e[c].positionSource=="farming"){console.log("result[i]:",e[c]);let E;try{E=i.filter(S=>S.positionId===u.clmm_position_id),console.log(E,"##farmingPositionFee"),h=E[0]}catch(S){console.log("🚀🚀🚀 ~ file: pool.ts:831 ~ getPendingFees ~ error:",S)}}else if(l){const E=await s.getTickDataByIndex(l.ticks_handle,Number(u.tick_lower_index)),S=await s.getTickDataByIndex(l.ticks_handle,Number(u.tick_upper_index));console.log("0323####getPendingFees###pool###",l),console.log("0323####getPendingFees###positionItem.collection###",u.collection),console.log("0323####getPendingFees###positionItem.tokenName###",u.tokenName),console.log("0323####getPendingFees###positionItem###",u);const q=t==="Aptos"?"":u.pos_object_id,O=await s.getPositionInfo(l,u.collection,u.tokenName,q);console.log("0302###positionInfo",O),console.log("0302###resultPool###",f),console.log(l,"pool====>654");try{h=await s.getCollectFeesQuote({pool:f,position:O,tickLowerData:E,tickUpperData:S},l)}catch(F){console.log("🚀🚀🚀 ~ file: pool.ts:852 ~ getPendingFees ~ error:",F)}}console.log("0330###getPendingFees###feeOwn###",h);const g=[],w=Number(h==null?void 0:h.feeOwedA),b=Number(h==null?void 0:h.feeOwedB);let T,R,A;n&&n[f.token_a.address]&&n[f.token_b.address]?(R=w*((o=n[f.token_a.address])==null?void 0:o.price),A=b*((a=n[f.token_b.address])==null?void 0:a.price),T=R+A):T="--",g.push({amount:w,amountUSD:R,...f.token_a,logoURI:f.token_a.logo_url},{amount:b,amountUSD:A,...f.token_b,logoURI:f.token_b.logo_url});const x=this.poolConfigObj&&this.poolConfigObj[l==null?void 0:l.poolAddress];console.log(x,"poolConfigInfo===>710"),this.feeOwedObj[u.tokenName]={feesResult:x!=null&&x.needReverse?g.reverse():g,feeOwed:T},console.log(this.feeOwedObj,"===>this.feeOwedObj"),await kr(1e3)}this.getPendingFeeSuccess=!0},async getRewarder(e,t){const n=In(t),s=this;console.log(e,"===>results");for(let r=0;r<e.length;r++)if(e[r].rewarder_infos&&e[r].rewarder_infos.length>0){const i=e[r];console.log(r,"i===>"),console.log(i,"===>positionItem"),console.log(i.ticks_handle,"===>positionItem.ticks_handle"),console.log(i.tick_lower_index,"===>positionItem.tick_lower_index"),console.log(i.tick_upper_index,"===>positionItem.tick_upper_index");const o=await n.getTickDataByIndex(i.ticks_handle,Number(i.tick_lower_index)),a=await n.getTickDataByIndex(i.ticks_handle,Number(i.tick_upper_index));let c=[];t==="Aptos"?c=await n.getPosRewardersAmount({poolAddress:i.poolAddress,positionName:i.tokenName,tickLowerData:o,tickUpperData:a}):c=await n.getPosRewardersAmount({poolAddress:i.poolAddress,pos:i.pos_object_id,positionHandle:i.position_manager.positions_handle}),console.log(c,"rewarderInfo===>");const u=[];let l=0;c.forEach((f,h)=>{var T;const g=s.tokensObj[f.coin_address].decimals,w=f.amount_owed.toString(),b=Kt(new we(w).div(Math.pow(10,g)).toString(),g);if(i[`rewarder_display${h+1}`]||Number(b)>0){const R=s.tokensObj[f.coin_address];console.log(f.amount_owed.toString(),"===>element.amount_owed.toString()");const A=(T=s.RATES[f.coin_address])==null?void 0:T.price;console.log(A,"price===>"),console.log(b,"==>amount");const x=Number(b)*A;l+=x,u.push({...f,...R,amount:b,amountUSD:x,amount_owed:f.amount_owed.toString()}),s.rewarderObj[i.tokenName]={pendingRewarderArr:u,pendingRewarderView:Number(Kt(l,2)),pendingRewarder:l}}}),console.log(s.rewarderObj,"===>_this.rewarderObj"),await kr(1e3)}},async getRewarderV2(e,t){var o,a;const n=In(t),s=this;console.log(e,"===>results");let r=[];t!=="Aptos"&&(r=e==null?void 0:e.map(c=>({poolAddress:c.poolAddress,positionId:c.positionSource=="clmm"?c.pos_object_id:c.clmm_position_id,coinTypeA:c.coinTypeA,coinTypeB:c.coinTypeB,rewarderInfo:c.rewarder_infos})));const i=await n.batchFetchPosRewardersAmount(r);console.log("🚀 ~ file: pool.ts:1074 ~ getRewarderV2 ~ batchFetchPosRewardersAmountRes:",i);for(let c=0;c<e.length;c++){const u=e[c];if(e[c].rewarder_infos&&e[c].rewarder_infos.length>0){console.log(u,"===>positionItem");let l=[];if(t==="Aptos"){const g=await n.getTickDataByIndex(u.ticks_handle,Number(u.tick_lower_index)),w=await n.getTickDataByIndex(u.ticks_handle,Number(u.tick_upper_index));l=await n.getPosRewardersAmount({poolAddress:u.poolAddress,positionName:u.tokenName,tickLowerData:g,tickUpperData:w})}else{const g=u.positionSource=="clmm"?u.pos_object_id:u.clmm_position_id;l=((a=(o=i.filter(w=>w.positionId===g))==null?void 0:o[0])==null?void 0:a.rewarderAmountOwed)||{}}const f=[];let h=0;l.forEach((g,w)=>{var A;const b=s.tokensObj[g.coin_address].decimals,T=g.amount_owed.toString(),R=Kt(new we(T).div(Math.pow(10,b)).toString(),b);if(u[`rewarder_display${w+1}`]||Number(R)>0){const x=s.tokensObj[g.coin_address],E=((A=s.RATES[g.coin_address])==null?void 0:A.price)||0;console.log(E,"price===>"),console.log(R,"==>amount");const S=Number(R)*E;h+=S,f.push({...g,...x,amount:R,amountUSD:S,amount_owed:g.amount_owed.toString()}),s.rewarderObj[u.tokenName]={pendingRewarderArr:f,pendingRewarderView:Number(Kt(h,2)),pendingRewarder:h}}}),await kr(1e3)}console.log(s.rewarderObj,"===>_this.rewarderObj")}this.getRewardSuccess=!0},setAllTokenObj(e){console.log(e,"===>allTokenObj"),this.allTokenObj=e},async getTokensObj(e,t){if(this.isTokenLoading=!0,console.log("🚀🚀🚀 ~ file: pool.ts:1130 ~ getTokensObj ~ pools, chainName:",e,t),t=="Sui")this.getCoinMetaData(!0);else{const n=In("Aptos"),s=await n.getTokenList(),r=[];s.forEach(c=>{r.push({...c,logoURI:c.logo_url,chain:t.toLowerCase()})});const i=Object.fromEntries(r.map((c,u)=>[c.address,c]));console.log("🚀🚀🚀 ~ file: pool.ts:1145 ~ getTokensObj ~ aptosTokensObj:",i);const o={};e.forEach(c=>{!i[c.coinA.address]&&!o[c.coinA.address]&&(o[c.coinA.address]=c),!i[c.coinB.address]&&!o[c.coinB.address]&&(o[c.coinB.address]=c)});const a=Object.keys(o);if(console.log("🚀🚀🚀 ~ file: pool.ts:1158 ~ getTokensObj ~ params:",a),a.length>0){const c=await n.getTokenListByCoinType(a),u={};c.forEach(l=>{u[l.address]={...l,isSelfBuilt:!0}}),this.tokensObj={...this.tokensObj,...u}}else this.tokensObj=i;this.isTokenLoading=!1}console.log("🚀🚀🚀 ~ file: pool.ts:1167 ~ getTokensObj ~ this.tokensObj :",this.tokensObj)},setNewTokens(e){this.tokensObj={...this.tokensObj,...e},console.log("setNewTokens###this.tokensObj####",this.tokensObj)},setPositionDetailCurrentTab(e){e!=this.positionDetailCurrentTab&&(this.positionActionAmount={},this.positionDetailCurrentTab=e)},setPositionActionAmount(e){this.positionActionAmount=e},async getMyPositonsByPool(e,t,n){console.log("0507###getMyPositons###start###",t),this.myPositionsLoading=!0;let s={};const r=In(n);if(!t.current_sqrt_price){const h=await r.getPool(t.address)||{};s={...t,...h}}let i=[],o=[],a=[],c=[];if(n=="Sui"){const{clmmPosition:h,farmsPosition:g}=await r.getAllPosition(e,[t.address]);a=h,c=g,o=c.filter(w=>{if(w.clmm_pool_id==s.address)return w}),i=o.map(w=>{const b=[];let T=new we(0);return w.rewards.forEach(R=>{var O;const A=R.rewarder_type,x=this.tokensObj[A],E=((O=this.RATES[A])==null?void 0:O.price)||0,S=new we(R.rewarder_amount).div(new we(Math.pow(10,x.decimals))),q=S.mul(new we(E));T=T.add(q),S.toNumber()>0&&b.push({...R,amount:S,rewarderAmountUsd:q.toString(),address:A,symbol:x.symbol})}),{...w,rewards:b,farmingRewardTotalUsd:T.toNumber()}}),console.log("farmingPositionList:",i)}else a=await r.getPositionList(e,{[t.address]:s})||[];console.log(i,"###farmingPositionList"),console.log("0507###getMyPositons###positionList###",a),console.log("###poolInfo",s),a.length<1&&this.setMyPositionsLoading(!1);const u=i.concat(a);console.log("allPositionList:",u);const l=[];u.forEach(h=>{let g,w,b,T="",R,A,x,E;if(h.liquidity&&h.liquidity!=="0"&&s){const S={creator:h.creator,collection:h.collection,name:h.name};n==="Aptos"?E=r.getNftHash(S):E=r.getNftHash(h);const q=s.token_a.decimals,O=s.token_b.decimals;console.log(s,"poolInf=====>"),b=r.TickMath.sqrtPriceX64ToPrice(s.current_sqrt_price,q,O).toString(),h.tick_lower_index==r.TickUtil.getMinIndex(Number(s.tickSpacing))?g="0":g=r.TickMath.tickIndexToPrice(Number(h.tick_lower_index),q,O).toString(),h.tick_upper_index==r.TickUtil.getMaxIndex(Number(s.tickSpacing))?w="∞":(w=r.TickMath.tickIndexToPrice(Number(h.tick_upper_index),q,O).toString(),console.log("0523###maxPrice###2222###",w));const F=r.getCoinAmountFromLiquidity({pool:s,position:h,roundUp:n!="Sui"}),Y=F.coinaAmount,Se=F.coinbAmount;console.log(b,"===>currentPrice");const Oe=Number(Se)+Number(Y)*Number(b);let N=(Number(Y)*Number(b)/Oe*100).toFixed(0),D=(Se/Oe*100).toFixed(0);g=="0"&&w=="∞"&&(N="50",D="50"),s.isPause?T="Closed":Number(b)>=Number(g)&&(w==="∞"||Number(b)<=Number(w))?T="Active":(Number(b)>Number(w)||Number(b)<Number(g))&&(T="Inactive"),console.log("0323###this.tokensObj####",this.tokensObj),console.log("0323###this.tokensObj[poolInfo.token_a.address]####",this.tokensObj[s.token_a.address]),console.log("0323###poolInfo.token_a.address####",s.token_a.address),console.log("0323###poolInfo.token_b.address####",s.token_b.address);let M={},oe={};n==="Aptos"?(M={...s.token_a,...this.tokensObj[s.token_a.address],logoURI:this.tokensObj[s.token_a.address].logo_url},oe={...s.token_b,...this.tokensObj[s.token_b.address],logoURI:this.tokensObj[s.token_b.address].logo_url}):(M=s==null?void 0:s.token_a,oe=s==null?void 0:s.token_b),l.push({poolInfoOrigin:s,...s,...h,totalAmount:Oe,token_a:M,token_b:oe,tokenARates:R,tokenBRates:A,amountA:Y,amountB:Se,fromPercent:N,toPercent:D,amountUSD:x,tokenName:h.tokenName||h.name,currentStatus:T,positionLiquidity:h.liquidity,nftHash:E,currentPrice:b,minPrice:Sr(g,12),maxPrice:Sr(w,12),positionSource:h.id?"farming":"clmm",farmingRewardTotalUsd:h.id?h.farmingRewardTotalUsd:0})}});const f=l.sort((h,g)=>g.liquidity-h.liquidity);console.log(f,"==>myPositionsByPool"),this.poolPositions=f,this.setMyPositionsLoading(!1),this.getPendingFees(f,n),this.getRewarderV2(f,n),console.log(f,"===>this.myPositions")},setAutoPoolNum(e){this.autoPoolNum=e},setTokenExternalPrice(e,t){this.tokenExternalPriceObj[e]=t},clearCurrentPositionInfo(){this.currentPositionInfo={}},setPositionShowList(e){this.positionShowList=e},async getCoinMetaData(e){const n=await In("Sui").getSuiTokenObj(e),s=[],r=[],i=JSON.parse(JSON.stringify(Object.values(n)));for(let o=0;o<i.length;o++){const a=i[o];a.is_trusted?s.push({...a,chain:"sui",isSelfBuilt:!1,logo_url:a.icon_url||a.icon_url,logoURI:a.icon_url||a.icon_url}):r.push({...a,chain:"sui",isSelfBuilt:!0,logo_url:a.icon_url||a.icon_url,logoURI:a.icon_url||a.icon_url})}console.log("🚀🚀🚀 ~ file: pool.ts:1437 ~ getCoinMetaData ~ trustedList:",s),console.log("🚀🚀🚀 ~ file: pool.ts:1437 ~ getCoinMetaData ~ this.tokens:",this.tokens),this.tokensObj=n,console.log("🚀🚀🚀 ~ file: pool.ts:1454 ~ getCoinMetaData ~ this.tokensObj:",this.tokensObj),this.notTrustedObj=Object.fromEntries(r.map((o,a)=>[o.address,o])),console.log("🚀🚀🚀 ~ file: pool.ts:1464 ~ getCoinMetaData ~ notTrustedObj:",this.notTrustedObj),this.isTokenLoading=!1},setPoolsLoading(e){this.poolsLoading=e}}});export{b3 as $,P5 as A,y5 as B,ts as C,jt as D,Xn as E,Un as F,Rs as G,xe as H,gk as I,_s as J,pn as K,U5 as L,Za as M,LE as N,Cs as O,mn as P,Q,br as R,Hd as S,Tt as T,Gi as U,cu as V,Us as W,Mh as X,vk as Y,Hs as Z,oa as _,Vw as a,Kn as a0,R5 as a1,Dk as a2,vr as a3,Pw as a4,In as b,Hh as c,ai as d,ci as e,P3 as f,O5 as g,Ye as h,yn as i,Qa as j,S5 as k,A5 as l,B5 as m,v5 as n,U3 as o,zt as p,R3 as q,Xt as r,k5 as s,I5 as t,I3 as u,E5 as v,v3 as w,S3 as x,Ru as y,l0 as z};
