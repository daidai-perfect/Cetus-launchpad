import{a as q,C as _e,o as i,f as n,F as J,E as Q,G as A,h as e,I as oe,x as m,u as v,e as z,p as X,k as Z,m as w,r as p,A as he,c as E,w as O,i as k,y as ge,j as H,D as ye,$ as me,Y as we,K as Ce,P as be,B as le,N as ke,S as $e}from"./entry.82d9c46a.js";import"./index.840463b0.js";import{u as ie}from"./pool.28ddfb2e.js";import{s as ne}from"./formatter.b7f6d9f7.js";import{V as $,h as b,a as Se}from"./common.9fb5840b.js";import{_ as Pe}from"./coin-pair-name.53e6e9be.js";import{_ as Le}from"./no-data.521e5e65.js";/* empty css              *//* empty css              *//* empty css              */import{u as Ye,c as xe,b as Ae}from"./index.fd3ccf30.js";import{u as Ue}from"./index.e949074f.js";import{a as De,b as Te,c as Ie,u as Re}from"./usePositionList.b5b33239.js";const Fe={key:0,class:"claim-list"},Oe={class:"left"},Ne={alt:""},Be={class:"right"},je=q({__name:"claim-list",props:{myClaimList:{type:Object,default:()=>[]}},setup(s){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: claim-list.vue:25 ~ myClaimList:",s.myClaimList),(h,S)=>{const g=_e("image");return s.myClaimList&&s.myClaimList.length>0?(i(),n("div",Fe,[(i(!0),n(J,null,Q(s.myClaimList,l=>(i(),n("div",{key:l,class:"claim-item"},[e("div",Oe,[oe(e("img",Ne,null,512),[[g,l.tokenInfo.logo_url]]),e("span",null,m(l.tokenInfo.symbol),1)]),e("div",Be,[e("span",null,m(v($)(l.amount,l.decimals,!0,!1,!1)),1),e("span",null,m(v($)(l.amountUSD,2,!1,!1)),1)])]))),128))])):A("",!0)}}});const ve=z(je,[["__scopeId","data-v-ec8774e2"]]),fe=s=>(X("data-v-237b921c"),s=s(),Z(),s),Ee={class:"fees-and-reward"},He={key:0,class:"fees"},qe={class:"fees-title"},ze=fe(()=>e("div",null,"Fees",-1)),Me={alt:""},Ve={class:"symbol"},We={class:"amount"},Ke={class:"amount-usd"},Ge={key:1,class:"fees"},Je={class:"fees-title"},Qe=fe(()=>e("div",null,"Mining rewards",-1)),Xe={alt:""},Ze={class:"symbol"},es={class:"amount"},ss={class:"amount-usd"},ts=q({__name:"fees-and-reward",props:{pendingRewarderList:{type:Object,default:()=>[]},pendingFeesList:{type:Object,default:()=>[]},rewarderUsd:{type:String,default:""},feeOwedUsd:{type:String,default:""}},setup(s){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: fees-and-reward.vue:63 ~ props:",s),(h,S)=>{const g=_e("image");return i(),n("div",Ee,[s.feeOwedUsd&&s.feeOwedUsd>0?(i(),n("div",He,[e("div",qe,[ze,e("div",null,m(v($)(s.feeOwedUsd,2,!1,!1)),1)]),(i(!0),n(J,null,Q(s.pendingFeesList,l=>(i(),n("div",{key:l,class:"fees-details"},[e("div",null,[oe(e("img",Me,null,512),[[g,l.tokenInfo.logo_url]]),e("span",Ve,m(l.tokenInfo.symbol),1)]),e("div",null,[e("span",We,m(v($)(l.amount,l.tokenInfo.decimals,!0,!1,!1)),1),e("span",Ke,"("+m(v($)(l.amountUSD,2,!1,!1))+")",1)])]))),128))])):A("",!0),s.rewarderUsd&&s.rewarderUsd>0?(i(),n("div",Ge,[e("div",Je,[Qe,e("div",null,m(v($)(s.rewarderUsd,2,!1,!1)),1)]),(i(!0),n(J,null,Q(s.pendingRewarderList,l=>(i(),n("div",{key:l,class:"fees-details"},[e("div",null,[oe(e("img",Xe,null,512),[[g,l.tokenInfo.logo_url]]),e("span",Ze,m(l.tokenInfo.symbol),1)]),e("div",null,[e("span",es,m(v($)(l.amount,l.tokenInfo.decimals,!0,!1,!1)),1),e("span",ss,"("+m(v($)(l.amountUSD,2,!1,!1))+")",1)])]))),128))])):A("",!0)])}}});const os=z(ts,[["__scopeId","data-v-237b921c"]]),T=s=>(X("data-v-ad64f4da"),s=s(),Z(),s),ls={class:"yield-details-box"},is={class:"yield-details"},as={class:"total-claim"},ns=T(()=>e("div",null,"Pending Yield",-1)),ds={class:"total-claim-usd"},cs={class:"position-detail"},us={class:"position-detail-top"},rs=T(()=>e("div",{class:"left"},"Position",-1)),_s={class:"right plus-switch plus-liquidity-switch"},ms=T(()=>e("span",null,"Hide yield < ",-1)),vs={class:"position-detail-bottom"},fs={class:"item-top"},ps={class:"left"},hs={class:"bottom"},gs={class:"right"},ys=["onClick"],ws={key:0,"aria-hidden":"true"},Cs=T(()=>e("use",{"xlink:href":"#icon-icon_sel"},null,-1)),bs=[Cs],ks={class:"item-bottom"},$s=T(()=>e("div",{class:"left"}," Pending Yield ",-1)),Ss={class:"right"},Ps={key:0,class:"yield-amount"},Ls={key:1,class:"yield-amount-zero"},Ys={class:"select"},xs={class:"all"},As=T(()=>e("use",{"xlink:href":"#icon-icon_sel"},null,-1)),Us=[As],Ds=T(()=>e("span",null,"Select all",-1)),Ts={class:"amount-selected"},Is=T(()=>e("div",null,"Amount selected",-1)),Rs=q({__name:"yield-details",props:{pendingYieldPositionList:{type:Object,default:()=>[]},isShowYiedlDetails:{type:Boolean,default:!1}},emits:["showClaimYield","close"],setup(s,{emit:d}){const h=d,S=s,g=ie(),l=w(()=>g.positionPendingFees),a=w(()=>g.positionPendingRewards),y=p([]),U=p({}),M=p(),Y=p(!0),j=t=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:364 ~ watchPositionList ~ list:",t);const o=[];let u=b(0);for(let _=0;_<t.length;_++){const f=t[_],I=l==null?void 0:l.value[f==null?void 0:f.positionId],R=a==null?void 0:a.value[f==null?void 0:f.positionId],te=(I==null?void 0:I.feesAmountUSD)||b(0),r=(R==null?void 0:R.rewardsAmount)||b(0),F=te.add(r).toString();x.value&&F>L.value?o.push({totalRewardUsd:F,...f,positionPendingFees:I,positionPendingRewards:R,positionName:`Cetus LP | ${f==null?void 0:f.positionName}`}):x.value||o.push({totalRewardUsd:F,...f,positionPendingFees:I,positionPendingRewards:R,positionName:`Cetus LP | ${f==null?void 0:f.positionName}`}),u=u.add(F)}y.value=o.sort((_,f)=>f.totalRewardUsd-_.totalRewardUsd),U.value=Object.fromEntries(o.map(_=>[_==null?void 0:_.positionId,_])),M.value=u,(Y.value||P.value=="all")&&(c.value=y.value.map(_=>_.positionId),Y.value=!1)},c=p([]),P=p("all"),N=t=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:414 ~ selectPosition ~ selectList.value:",c.value);const o=c.value.indexOf(t);P.value=="all"&&c.value.length==0?y.value.forEach(u=>{u.positionId!==t&&c.value.push(t)}):o>-1?c.value.splice(o,1):c.value.push(t),c.value.length!==y.value.length?P.value="":P.value="all",console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:429 ~ selectPosition ~ selectList:",c.value)},x=p(!0),L=p(.01),V=t=>{const o=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");t.target.value=t.target.value.replace(o,"$1"),L.value=t.target.value},se=()=>{(!L.value||L.value<.01)&&(L.value=.01)};he(()=>[S.pendingYieldPositionList,x.value,L.value],([t])=>{t&&t.length>0&&j(t)},{immediate:!0});const B=w(()=>{let t=b(0);return c.value.forEach(o=>{var _;const u=((_=U.value[o])==null?void 0:_.totalRewardUsd)||0;t=t.add(u)}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:447 ~ amountSelected ~ selectedTotalAmount.toString():",t.toString()),t.toString()}),C=()=>{P.value="all",y.value.forEach(t=>{c.value.includes(t.positionId)||c.value.push(t.positionId)})},D=()=>{const t=[];y.value.forEach(o=>{c.value.includes(o.positionId)&&t.push(o)}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:494 ~ showClaimYield ~ result:",t),h("showClaimYield",t)};return(t,o)=>{const u=we,_=Ce,f=Pe,I=be,R=Le,te=le;return i(),E(v(me),{title:"Details",footer:null,visible:s.isShowYiedlDetails,width:"440px","wrap-class-name":"details-modal",class:"new-modal-have-btn",onCancel:o[2]||(o[2]=r=>t.$emit("close"))},{default:O(()=>[e("div",ls,[e("div",is,[e("div",as,[ns,e("div",ds,[e("span",null,m(v($)(M.value,2,!1,!1)),1)])]),e("div",cs,[e("div",us,[rs,e("div",_s,[k(u,{class:"range-alerts-switch",checked:x.value,onClick:o[0]||(o[0]=()=>{x.value=!x.value,Y.value=!1})},null,8,["checked"]),ms,k(_,{value:`$${L.value}`,onChange:V,onBlur:se},null,8,["value"])])]),e("div",vs,[y.value&&y.value.length>0?(i(!0),n(J,{key:0},Q(y.value,r=>{var F;return i(),n("div",{key:r,class:"position-item"},[e("div",fs,[e("div",ps,[k(f,{"from-coin":r.coinA,"to-coin":r.coinB,"fee-tier":(F=r.feeRate)==null?void 0:F.replace("%","")},null,8,["from-coin","to-coin","fee-tier"]),e("div",hs,m(r.positionName),1)]),e("div",gs,[e("div",{class:ge(["radio",r.totalRewardUsd<=0?"radio-disable":""]),onClick:ht=>r.totalRewardUsd>0?N(r.positionId):""},[(P.value=="all"||c.value.includes(r.positionId))&&r.totalRewardUsd>0?(i(),n("svg",ws,bs)):A("",!0)],10,ys)])]),e("div",ks,[$s,e("div",Ss,[r.totalRewardUsd>0?(i(),n("div",Ps,[k(I,{placement:"bottomRight","overlay-class-name":"yield-amount-tooltip"},{title:O(()=>[k(os,{"pending-fees-list":r.positionPendingFees.feesList,"pending-rewarder-list":r.positionPendingRewards.rewarderAmountOwed,"rewarder-usd":r.positionPendingRewards.rewardsAmount,"fee-owed-usd":r.positionPendingFees.feesAmountUSD},null,8,["pending-fees-list","pending-rewarder-list","rewarder-usd","fee-owed-usd"])]),default:O(()=>[H(m(v($)(r.totalRewardUsd,2,!1,!1))+" ",1)]),_:2},1024)])):(i(),n("div",Ls,m(v($)(r.totalRewardUsd,2,!1,!1)),1))])])])}),128)):(i(),E(R,{key:1,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found"}))])])]),e("div",Ys,[e("div",xs,[e("div",{class:"radio",onClick:C},[P.value=="all"?(i(),n("svg",{key:0,"aria-hidden":"true",onClick:o[1]||(o[1]=ye(()=>{c.value=[],P.value=""},["stop"]))},Us)):A("",!0)]),Ds]),e("div",Ts,[Is,e("div",null,m(v($)(B.value,2,!1,!1)),1)])]),k(te,{class:"claim-yield-btn modal-bottom-btn",disabled:B.value=="0",onClick:D},{default:O(()=>[H("Claim Yield")]),_:1},8,["disabled"])])]),_:1},8,["visible"])}}});const Fs=z(Rs,[["__scopeId","data-v-ad64f4da"]]),de=p(!1),G=p(!1),pe=Ye(),{setIsShowSuccess:Os,setIsShowRejected:ce,setIsShowWaiting:W,setTransactionDesc:Ns,setTransactionTxid:ue}=pe,Bs=xe("Sui"),K=Ae("Sui"),js=Ue(),re=w(()=>js),Es=ie(),Hs=w(()=>Es.poolsObj);w(()=>pe);De();Te();Ie();const{getPositionList:qs}=Re(),zs=async s=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:32 ~ batchHarvestAndClmmFee ~ positionList:",s),G.value=!0;try{const d=[],h=[];s.forEach(a=>{const y=Hs.value[a.pool].miningRewardList.filter(U=>U.emissionsEveryDay>0).map(U=>U.coinType);console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:66 ~ batchHarvestAndClmmFee ~ position:",a),a.positionSource=="clmm"?d.push({pool_id:a.pool,pos_id:a.positionId,collect_fee:!0,rewarder_coin_types:y,coinTypeA:a.defaultCoinaAddress,coinTypeB:a.defaultCoinbAddress}):h.push({pool_id:a.farm_pool_id,position_nft_id:a.farmPositionId,clmm_pool_id:a.pool,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:y,coinTypeA:a.defaultCoinaAddress,coinTypeB:a.defaultCoinbAddress})}),ue(""),Ns("Claim Yield"),W(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:71 ~ batchHarvestAndClmmFee ~ clmmPositionList:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:71 ~ batchHarvestAndClmmFee ~ framsPositionList:",h);const S=await Bs.batchHarvestAndClmmFee(h,d),g=await K.signAndExecuteTransactionBlock(re.value.currentWallet,S.txb,S.payloadParams),l=K.handleTx(g);if(l&&l.hash){ue(l.hash),W(!1),Os(!0);const a={title:"Claim",desc:"Claim Yield",hash:l.hash};a.res=l.res,K.showTransitionPending(a),await K.watchTransaction(a)&&setTimeout(()=>{qs(re.value.address)},1e3)}else W(!1),ce(!0);G.value=!1,de.value=!1}catch(d){G.value=!1,W(!1),ce(!0),de.value=!1,console.log("batchHarvestAndClmmFee error:",d)}},ae=s=>(X("data-v-c84b105c"),s=s(),Z(),s),Ms={class:"claim-yield-content"},Vs={class:"total-claim"},Ws=ae(()=>e("div",null,"Total Claim",-1)),Ks={class:"total-claim-usd"},Gs=ae(()=>e("svg",{"aria-hidden":"true",class:"back-icon"},[e("use",{"xlink:href":"#icon-icon-back"})],-1)),Js=ae(()=>e("span",null,"Back",-1)),Qs=[Gs,Js],Xs=q({__name:"claim-yield",props:{pendingYield:{type:Number,default:0},myClaimList:{type:Object,default:()=>[]},myClaimPositionList:{type:Object,default:()=>[]}},setup(s){return(d,h)=>{const S=le;return i(),E(v(me),{class:"new-modal-have-btn",title:"Claim Yield",visible:!0,footer:null,width:"440px",onCancel:h[2]||(h[2]=g=>d.$emit("close"))},{default:O(()=>[e("div",Ms,[e("div",Vs,[Ws,e("div",Ks,m(s.pendingYield>0&&s.pendingYield<.01?"<$0.01":`$${v(Se)(s.pendingYield,2)}`),1)]),k(ve,{"my-claim-list":s.myClaimList},null,8,["my-claim-list"]),e("div",{class:"choose-amount",onClick:h[0]||(h[0]=g=>d.$emit("chooseAmount"))},Qs),k(S,{class:"confirm-btn modal-bottom-btn",loading:v(G),onClick:h[1]||(h[1]=g=>v(zs)(s.myClaimPositionList))},{default:O(()=>[H("Confirm")]),_:1},8,["loading"])])]),_:1})}}});const Zs=z(Xs,[["__scopeId","data-v-c84b105c"]]),ee=s=>(X("data-v-8d7b7375"),s=s(),Z(),s),et={class:"total-info"},st={class:"total-liquidity"},tt=ee(()=>e("span",{class:"total-liquidity-text"},"Total Liquidity",-1)),ot={key:0,class:"skeleton-box"},lt={key:1,class:"total-liquidity-usd"},it={class:"pending-yield"},at=ee(()=>e("div",{class:"pending-yield-text"},"Pending Yield",-1)),nt={key:0,class:"skeleton-box"},dt={key:1,class:"pending-yield-show-value"},ct={class:"pending-yield-value-box"},ut={key:0,class:"claim-list-box"},rt={class:"claim-list-content"},_t=ee(()=>e("use",{"xlink:href":"#icon-icon_expand"},null,-1)),mt=[_t],vt=ee(()=>e("use",{"xlink:href":"#icon-icon_expand"},null,-1)),ft=[vt],pt=q({__name:"total-position",setup(s){const d=ie(),h=w(()=>d.isPositionLoading),S=w(()=>d.positionTotalPrice),g=w(()=>d.positionTotalPendingFees),l=w(()=>d.positionTotalPendingRewards),a=w(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:64 ~ pendingYield ~ positionTotalPendingFees.value:",g.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:65 ~ pendingYield ~ positionTotalPendingRewards.value:",l.value),g.value==="--"||l.value==="--"?0:b(g.value||0).add(l.value||0).toNumber())),y=w(()=>d.pendingYieldLoading),U=w(()=>d.pendingYieldTokenList),M=p(!1),Y=p(!1),j=p(1),c=()=>{a.value>0&&(Y.value=!0,j.value=j.value==1?2:1)},P=w(()=>d.pendingYieldPositionList),N=p(!1),x=p(),L=p(),V=p(),se=B=>{Y.value=!1,N.value=!0;let C=b(0);const D=[],t={};B.forEach(o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:352 ~ showClaimYield ~ ele:",o);const u=o.positionPendingRewards.rewardsAmount||0,_=o.positionPendingFees.feesAmountUSD||0;C=C.add(b(u)).add(b(_)),D.push(...o.positionPendingFees.feesList),D.push(...o.positionPendingRewards.rewarderAmountOwed)}),D.forEach(o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:369 ~ showClaimYield ~ claimItem:",o);const u=o.tokenInfo.address;t[u]?t[u]={...o,amountUSD:b(t[u].amountUSD).add(o.amountUSD).toString(),amount:b(t[u].amount).add(o.amount).toString()}:(t[u]={},t[u]={...o,amountUSD:b(0).add(o.amountUSD).toString(),amount:b(0).add(o.amount).toString()})}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:362 ~ showClaimYield ~ claimObj:",t),x.value=C.toNumber(),V.value=Object.values(t).filter(o=>o.amount>0).sort((o,u)=>u.amountUSD-o.amountUSD),L.value=B};return(B,C)=>{const D=$e,t=le;return i(),n("div",et,[e("div",st,[tt,h.value?(i(),n("div",ot,[k(D,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(i(),n("span",lt,m(v(ne)(S.value||0)),1))]),e("div",it,[at,y.value?(i(),n("div",nt,[k(D,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(i(),n("div",dt,[e("div",ct,[e("span",{class:"pending-yield-usd",style:ke(a.value<=0?{border:"none"}:{}),onClick:c},[H(m(v(ne)(a.value||0))+" ",1),a.value>0?(i(),n("div",ut,[e("div",rt,[k(ve,{"my-claim-list":U.value},null,8,["my-claim-list"])])])):A("",!0)],4),a.value>0?(i(),n("svg",{key:0,class:"icon route-icon pc-icon","aria-hidden":"true",onClick:c},mt)):A("",!0),k(t,{class:"claim-all-btn",disabled:a.value<=0,loading:M.value,onClick:c},{default:O(()=>[H("Claim All")]),_:1},8,["disabled","loading"])]),a.value>0?(i(),n("svg",{key:0,class:"icon route-icon h5-icon","aria-hidden":"true",onClick:c},ft)):A("",!0)]))]),N.value?(i(),E(Zs,{key:0,"pending-yield":x.value,"my-claim-list":V.value,"my-claim-position-list":L.value,onClose:C[0]||(C[0]=o=>N.value=!1),onChooseAmount:C[1]||(C[1]=()=>{N.value=!1,Y.value=!0})},null,8,["pending-yield","my-claim-list","my-claim-position-list"])):A("",!0),(i(),E(Fs,{key:j.value,"pending-yield-position-list":P.value,"is-show-yiedl-details":Y.value,onClose:C[2]||(C[2]=()=>Y.value=!1),onShowClaimYield:se},null,8,["pending-yield-position-list","is-show-yiedl-details"]))])}}});const Ut=z(pt,[["__scopeId","data-v-8d7b7375"]]);export{Ut as T};
