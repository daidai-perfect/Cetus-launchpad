import{aa as Ns,a7 as Vh,a9 as Xh,m as jn,a1 as Dn,a2 as Y,a6 as ft,t as Oc,ab as ho,ac as Qh}from"./entry.c44b21e1.js";import{A as zs,S as Zh,T as Wt,B as Yh,C as an,D as ef,k as Wa,j as Ka,o as Mr,E as tf,p as _e,m as Ze,l as cs,e as Ue,g as ps,F as nf,G as sf,H as rf,I as Cr,c as Gr,s as Vn,d as Wn,J as Sn,K as of}from"./common.2e5eaeac.js";import{r as af,c as j,u as Si,b as de,s as cf,h as Rc,A as Lc,i as Kt,j as $s,T as wt,k as df,l as lf,m as uf,n as ze,o as bt,p as hf,C as xn,q as ff,t as pf,v as gf,w as yf,f as mf}from"./index.556eb1a4.js";import"./decimal.a2826370.js";import{D as se}from"./decimal.765d8738.js";function Yn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function wf(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function xi(e,...t){if(!wf(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function $c(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yn(e.outputLen),Yn(e.blockLen)}function bs(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function qc(e,t){xi(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bf=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));function jc(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const Er=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Jt=(e,t)=>e<<32-t|e>>>t,Tf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Tf)throw new Error("Non little-endian hardware is not supported");const vf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Dc(e){if(!jc(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=vf[e[n]];return t}const cn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ja(e){if(e>=cn._0&&e<=cn._9)return e-cn._0;if(e>=cn._A&&e<=cn._F)return e-(cn._A-10);if(e>=cn._a&&e<=cn._f)return e-(cn._a-10)}function Fc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(n);for(let r=0,o=0;r<n;r++,o+=2){const i=Ja(e.charCodeAt(o)),a=Ja(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}s[r]=i*16+a}return s}function Af(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ts(e){if(typeof e=="string"&&(e=Af(e)),!jc(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}let ki=class{clone(){return this._cloneInto()}};const Sf={}.toString;function xf(e,t){if(t!==void 0&&Sf.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function _i(e){const t=s=>e().update(Ts(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class Nc extends ki{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,$c(t);const s=Ts(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(s.length>r?t.create().update(s).digest():s);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(t){return bs(this),this.iHash.update(t),this}digestInto(t){bs(this),xi(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fo=(e,t,n)=>new Nc(e,t).update(n).digest();fo.create=(e,t)=>new Nc(e,t);function kf(e,t,n,s){$c(e);const r=xf({dkLen:32,asyncTick:10},s),{c:o,dkLen:i,asyncTick:a}=r;if(Yn(o),Yn(i),Yn(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Ts(t),d=Ts(n),l=new Uint8Array(i),u=fo.create(e,c),h=u._cloneInto().update(d);return{c:o,dkLen:i,asyncTick:a,DK:l,PRF:u,PRFSalt:h}}function _f(e,t,n,s,r){return e.destroy(),t.destroy(),s&&s.destroy(),r.fill(0),n}function Ef(e,t,n,s){const{c:r,dkLen:o,DK:i,PRF:a,PRFSalt:c}=kf(e,t,n,s);let d;const l=new Uint8Array(4),u=Er(l),h=new Uint8Array(a.outputLen);for(let p=1,g=0;g<o;p++,g+=a.outputLen){const m=i.subarray(g,g+a.outputLen);u.setInt32(0,p,!1),(d=c._cloneInto(d)).update(l).digestInto(h),m.set(h.subarray(0,m.length));for(let y=1;y<r;y++){a._cloneInto(d).update(h).digestInto(h);for(let E=0;E<m.length;E++)m[E]^=h[E]}}return _f(a,c,i,d,h)}function Bf(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const r=BigInt(32),o=BigInt(4294967295),i=Number(n>>r&o),a=Number(n&o),c=s?4:0,d=s?0:4;e.setUint32(t+c,i,s),e.setUint32(t+d,a,s)}class zc extends ki{constructor(t,n,s,r){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Er(this.buffer)}update(t){bs(this);const{view:n,buffer:s,blockLen:r}=this;t=Ts(t);const o=t.length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);if(a===r){const c=Er(t);for(;r<=o-i;i+=r)this.process(c,i);continue}s.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){bs(this),qc(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(s,0),i=0);for(let u=i;u<r;u++)n[u]=0;Bf(s,r-8,BigInt(this.length*8),o),this.process(s,0);const a=Er(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<d;u++)a.setUint32(4*u,l[u],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:o,destroyed:i,pos:a}=this;return t.length=r,t.pos=a,t.finished=o,t.destroyed=i,r%n&&t.buffer.set(s),t}}const Pf=(e,t,n)=>e&t^~e&n,If=(e,t,n)=>e&t^e&n^t&n,Uf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_n=new Uint32Array(64);class Of extends zc{constructor(){super(64,32,8,!1),this.A=kn[0]|0,this.B=kn[1]|0,this.C=kn[2]|0,this.D=kn[3]|0,this.E=kn[4]|0,this.F=kn[5]|0,this.G=kn[6]|0,this.H=kn[7]|0}get(){const{A:t,B:n,C:s,D:r,E:o,F:i,G:a,H:c}=this;return[t,n,s,r,o,i,a,c]}set(t,n,s,r,o,i,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let u=0;u<16;u++,n+=4)_n[u]=t.getUint32(n,!1);for(let u=16;u<64;u++){const h=_n[u-15],p=_n[u-2],g=Jt(h,7)^Jt(h,18)^h>>>3,m=Jt(p,17)^Jt(p,19)^p>>>10;_n[u]=m+_n[u-7]+g+_n[u-16]|0}let{A:s,B:r,C:o,D:i,E:a,F:c,G:d,H:l}=this;for(let u=0;u<64;u++){const h=Jt(a,6)^Jt(a,11)^Jt(a,25),p=l+h+Pf(a,c,d)+Uf[u]+_n[u]|0,m=(Jt(s,2)^Jt(s,13)^Jt(s,22))+If(s,r,o)|0;l=d,d=c,c=a,a=i+p|0,i=o,o=r,r=s,s=p+m|0}s=s+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(s,r,o,i,a,c,d,l)}roundClean(){_n.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Rf=_i(()=>new Of),br=BigInt(2**32-1),Ko=BigInt(32);function Hc(e,t=!1){return t?{h:Number(e&br),l:Number(e>>Ko&br)}:{h:Number(e>>Ko&br)|0,l:Number(e&br)|0}}function Mc(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:o,l:i}=Hc(e[r],t);[n[r],s[r]]=[o,i]}return[n,s]}const Lf=(e,t)=>BigInt(e>>>0)<<Ko|BigInt(t>>>0),$f=(e,t,n)=>e>>>n,qf=(e,t,n)=>e<<32-n|t>>>n,jf=(e,t,n)=>e>>>n|t<<32-n,Df=(e,t,n)=>e<<32-n|t>>>n,Ff=(e,t,n)=>e<<64-n|t>>>n-32,Nf=(e,t,n)=>e>>>n-32|t<<64-n,zf=(e,t)=>t,Hf=(e,t)=>e,Cc=(e,t,n)=>e<<n|t>>>32-n,Gc=(e,t,n)=>t<<n|e>>>32-n,Wc=(e,t,n)=>t<<n-32|e>>>64-n,Kc=(e,t,n)=>e<<n-32|t>>>64-n;function Mf(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:r|0}}const Cf=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Gf=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,Wf=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Kf=(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,Jf=(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0),Vf=(e,t,n,s,r,o)=>t+n+s+r+o+(e/2**32|0)|0,Xf={fromBig:Hc,split:Mc,toBig:Lf,shrSH:$f,shrSL:qf,rotrSH:jf,rotrSL:Df,rotrBH:Ff,rotrBL:Nf,rotr32H:zf,rotr32L:Hf,rotlSH:Cc,rotlSL:Gc,rotlBH:Wc,rotlBL:Kc,add:Mf,add3L:Cf,add3H:Gf,add4L:Wf,add4H:Kf,add5H:Vf,add5L:Jf},ie=Xf,[Qf,Zf]=(()=>ie.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),En=new Uint32Array(80),Bn=new Uint32Array(80);class Yf extends zc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:s,Bl:r,Ch:o,Cl:i,Dh:a,Dl:c,Eh:d,El:l,Fh:u,Fl:h,Gh:p,Gl:g,Hh:m,Hl:y}=this;return[t,n,s,r,o,i,a,c,d,l,u,h,p,g,m,y]}set(t,n,s,r,o,i,a,c,d,l,u,h,p,g,m,y){this.Ah=t|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=l|0,this.Fh=u|0,this.Fl=h|0,this.Gh=p|0,this.Gl=g|0,this.Hh=m|0,this.Hl=y|0}process(t,n){for(let w=0;w<16;w++,n+=4)En[w]=t.getUint32(n),Bn[w]=t.getUint32(n+=4);for(let w=16;w<80;w++){const _=En[w-15]|0,I=Bn[w-15]|0,M=ie.rotrSH(_,I,1)^ie.rotrSH(_,I,8)^ie.shrSH(_,I,7),F=ie.rotrSL(_,I,1)^ie.rotrSL(_,I,8)^ie.shrSL(_,I,7),X=En[w-2]|0,te=Bn[w-2]|0,we=ie.rotrSH(X,te,19)^ie.rotrBH(X,te,61)^ie.shrSH(X,te,6),be=ie.rotrSL(X,te,19)^ie.rotrBL(X,te,61)^ie.shrSL(X,te,6),xe=ie.add4L(F,be,Bn[w-7],Bn[w-16]),Ce=ie.add4H(xe,M,we,En[w-7],En[w-16]);En[w]=Ce|0,Bn[w]=xe|0}let{Ah:s,Al:r,Bh:o,Bl:i,Ch:a,Cl:c,Dh:d,Dl:l,Eh:u,El:h,Fh:p,Fl:g,Gh:m,Gl:y,Hh:E,Hl:v}=this;for(let w=0;w<80;w++){const _=ie.rotrSH(u,h,14)^ie.rotrSH(u,h,18)^ie.rotrBH(u,h,41),I=ie.rotrSL(u,h,14)^ie.rotrSL(u,h,18)^ie.rotrBL(u,h,41),M=u&p^~u&m,F=h&g^~h&y,X=ie.add5L(v,I,F,Zf[w],Bn[w]),te=ie.add5H(X,E,_,M,Qf[w],En[w]),we=X|0,be=ie.rotrSH(s,r,28)^ie.rotrBH(s,r,34)^ie.rotrBH(s,r,39),xe=ie.rotrSL(s,r,28)^ie.rotrBL(s,r,34)^ie.rotrBL(s,r,39),Ce=s&o^s&a^o&a,Ne=r&i^r&c^i&c;E=m|0,v=y|0,m=p|0,y=g|0,p=u|0,g=h|0,{h:u,l:h}=ie.add(d|0,l|0,te|0,we|0),d=a|0,l=c|0,a=o|0,c=i|0,o=s|0,i=r|0;const Xe=ie.add3L(we,xe,Ne);s=ie.add3H(Xe,te,be,Ce),r=Xe|0}({h:s,l:r}=ie.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:o,l:i}=ie.add(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:c}=ie.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l}=ie.add(this.Dh|0,this.Dl|0,d|0,l|0),{h:u,l:h}=ie.add(this.Eh|0,this.El|0,u|0,h|0),{h:p,l:g}=ie.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:m,l:y}=ie.add(this.Gh|0,this.Gl|0,m|0,y|0),{h:E,l:v}=ie.add(this.Hh|0,this.Hl|0,E|0,v|0),this.set(s,r,o,i,a,c,d,l,u,h,p,g,m,y,E,v)}roundClean(){En.fill(0),Bn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ei=_i(()=>new Yf);function Jc(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function ep(e){const t=Jc(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}const tp=e=>Jc(`mnemonic${e}`);function np(e,t=""){return Ef(Ei,ep(e).nfkd,tp(t),{c:2048,dkLen:64})}const[Vc,Xc,Qc]=[[],[],[]],sp=BigInt(0),qs=BigInt(1),rp=BigInt(2),op=BigInt(7),ip=BigInt(256),ap=BigInt(113);for(let e=0,t=qs,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],Vc.push(2*(5*s+n)),Xc.push((e+1)*(e+2)/2%64);let r=sp;for(let o=0;o<7;o++)t=(t<<qs^(t>>op)*ap)%ip,t&rp&&(r^=qs<<(qs<<BigInt(o))-qs);Qc.push(r)}const[cp,dp]=Mc(Qc,!0),Va=(e,t,n)=>n>32?Wc(e,t,n):Cc(e,t,n),Xa=(e,t,n)=>n>32?Kc(e,t,n):Gc(e,t,n);function lp(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,d=n[c],l=n[c+1],u=Va(d,l,1)^n[a],h=Xa(d,l,1)^n[a+1];for(let p=0;p<50;p+=10)e[i+p]^=u,e[i+p+1]^=h}let r=e[2],o=e[3];for(let i=0;i<24;i++){const a=Xc[i],c=Va(r,o,a),d=Xa(r,o,a),l=Vc[i];r=e[l],o=e[l+1],e[l]=c,e[l+1]=d}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=cp[s],e[1]^=dp[s]}n.fill(0)}class Bi extends ki{constructor(t,n,s,r=!1,o=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Yn(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=bf(this.state)}keccak(){lp(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){bs(this);const{blockLen:n,state:s}=this;t=Ts(t);const r=t.length;for(let o=0;o<r;){const i=Math.min(n-this.pos,r-o);for(let a=0;a<i;a++)s[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:s,blockLen:r}=this;t[s]^=n,n&128&&s===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){bs(this,!1),xi(t),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,o=t.length;r<o;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,o-r);t.set(n.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Yn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(qc(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:s,outputLen:r,rounds:o,enableXOF:i}=this;return t||(t=new Bi(n,s,r,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=s,t.outputLen=r,t.enableXOF=i,t.destroyed=this.destroyed,t}}const up=(e,t,n)=>_i(()=>new Bi(t,e,n)),vs=up(6,136,256/8);function Zc(e,t){return function(){return e.apply(t,arguments)}}const{toString:hp}=Object.prototype,{getPrototypeOf:Pi}=Object,po=(e=>t=>{const n=hp.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ht=e=>(e=e.toLowerCase(),t=>po(t)===e),go=e=>t=>typeof t===e,{isArray:As}=Array,Zs=go("undefined");function fp(e){return e!==null&&!Zs(e)&&e.constructor!==null&&!Zs(e.constructor)&&At(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Yc=Ht("ArrayBuffer");function pp(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Yc(e.buffer),t}const gp=go("string"),At=go("function"),ed=go("number"),yo=e=>e!==null&&typeof e=="object",yp=e=>e===!0||e===!1,Br=e=>{if(po(e)!=="object")return!1;const t=Pi(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mp=Ht("Date"),wp=Ht("File"),bp=Ht("Blob"),Tp=Ht("FileList"),vp=e=>yo(e)&&At(e.pipe),Ap=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||At(e.append)&&((t=po(e))==="formdata"||t==="object"&&At(e.toString)&&e.toString()==="[object FormData]"))},Sp=Ht("URLSearchParams"),[xp,kp,_p,Ep]=["ReadableStream","Request","Response","Headers"].map(Ht),Bp=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ar(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),As(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(s=0;s<i;s++)a=o[s],t.call(null,e[a],a,e)}}function td(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Xn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),nd=e=>!Zs(e)&&e!==Xn;function Jo(){const{caseless:e}=nd(this)&&this||{},t={},n=(s,r)=>{const o=e&&td(t,r)||r;Br(t[o])&&Br(s)?t[o]=Jo(t[o],s):Br(s)?t[o]=Jo({},s):As(s)?t[o]=s.slice():t[o]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&ar(arguments[s],n);return t}const Pp=(e,t,n,{allOwnKeys:s}={})=>(ar(t,(r,o)=>{n&&At(r)?e[o]=Zc(r,n):e[o]=r},{allOwnKeys:s}),e),Ip=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Up=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Op=(e,t,n,s)=>{let r,o,i;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)i=r[o],(!s||s(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&Pi(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Rp=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},Lp=e=>{if(!e)return null;if(As(e))return e;let t=e.length;if(!ed(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},$p=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Pi(Uint8Array)),qp=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=s.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},jp=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Dp=Ht("HTMLFormElement"),Fp=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),Qa=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Np=Ht("RegExp"),sd=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};ar(n,(r,o)=>{let i;(i=t(r,o,e))!==!1&&(s[o]=i||r)}),Object.defineProperties(e,s)},zp=e=>{sd(e,(t,n)=>{if(At(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(At(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Hp=(e,t)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return As(e)?s(e):s(String(e).split(t)),n},Mp=()=>{},Cp=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Lo="abcdefghijklmnopqrstuvwxyz",Za="0123456789",rd={DIGIT:Za,ALPHA:Lo,ALPHA_DIGIT:Lo+Lo.toUpperCase()+Za},Gp=(e=16,t=rd.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function Wp(e){return!!(e&&At(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Kp=e=>{const t=new Array(10),n=(s,r)=>{if(yo(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const o=As(s)?[]:{};return ar(s,(i,a)=>{const c=n(i,r+1);!Zs(c)&&(o[a]=c)}),t[r]=void 0,o}}return s};return n(e,0)},Jp=Ht("AsyncFunction"),Vp=e=>e&&(yo(e)||At(e))&&At(e.then)&&At(e.catch),od=((e,t)=>e?setImmediate:t?((n,s)=>(Xn.addEventListener("message",({source:r,data:o})=>{r===Xn&&o===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Xn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",At(Xn.postMessage)),Xp=typeof queueMicrotask<"u"?queueMicrotask.bind(Xn):typeof process<"u"&&process.nextTick||od,k={isArray:As,isArrayBuffer:Yc,isBuffer:fp,isFormData:Ap,isArrayBufferView:pp,isString:gp,isNumber:ed,isBoolean:yp,isObject:yo,isPlainObject:Br,isReadableStream:xp,isRequest:kp,isResponse:_p,isHeaders:Ep,isUndefined:Zs,isDate:mp,isFile:wp,isBlob:bp,isRegExp:Np,isFunction:At,isStream:vp,isURLSearchParams:Sp,isTypedArray:$p,isFileList:Tp,forEach:ar,merge:Jo,extend:Pp,trim:Bp,stripBOM:Ip,inherits:Up,toFlatObject:Op,kindOf:po,kindOfTest:Ht,endsWith:Rp,toArray:Lp,forEachEntry:qp,matchAll:jp,isHTMLForm:Dp,hasOwnProperty:Qa,hasOwnProp:Qa,reduceDescriptors:sd,freezeMethods:zp,toObjectSet:Hp,toCamelCase:Fp,noop:Mp,toFiniteNumber:Cp,findKey:td,global:Xn,isContextDefined:nd,ALPHABET:rd,generateString:Gp,isSpecCompliantForm:Wp,toJSONObject:Kp,isAsyncFn:Jp,isThenable:Vp,setImmediate:od,asap:Xp};function re(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r)}k.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const id=re.prototype,ad={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ad[e]={value:e}});Object.defineProperties(re,ad);Object.defineProperty(id,"isAxiosError",{value:!0});re.from=(e,t,n,s,r,o)=>{const i=Object.create(id);return k.toFlatObject(e,i,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),re.call(i,e.message,t,n,s,r),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const Qp=null;function Vo(e){return k.isPlainObject(e)||k.isArray(e)}function cd(e){return k.endsWith(e,"[]")?e.slice(0,-2):e}function Ya(e,t,n){return e?e.concat(t).map(function(r,o){return r=cd(r),!n&&o?"["+r+"]":r}).join(n?".":""):t}function Zp(e){return k.isArray(e)&&!e.some(Vo)}const Yp=k.toFlatObject(k,{},null,function(t){return/^is[A-Z]/.test(t)});function mo(e,t,n){if(!k.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!k.isUndefined(y[m])});const s=n.metaTokens,r=n.visitor||l,o=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(t);if(!k.isFunction(r))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(k.isDate(g))return g.toISOString();if(!c&&k.isBlob(g))throw new re("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(g)||k.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function l(g,m,y){let E=g;if(g&&!y&&typeof g=="object"){if(k.endsWith(m,"{}"))m=s?m:m.slice(0,-2),g=JSON.stringify(g);else if(k.isArray(g)&&Zp(g)||(k.isFileList(g)||k.endsWith(m,"[]"))&&(E=k.toArray(g)))return m=cd(m),E.forEach(function(w,_){!(k.isUndefined(w)||w===null)&&t.append(i===!0?Ya([m],_,o):i===null?m:m+"[]",d(w))}),!1}return Vo(g)?!0:(t.append(Ya(y,m,o),d(g)),!1)}const u=[],h=Object.assign(Yp,{defaultVisitor:l,convertValue:d,isVisitable:Vo});function p(g,m){if(!k.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(g),k.forEach(g,function(E,v){(!(k.isUndefined(E)||E===null)&&r.call(t,E,k.isString(v)?v.trim():v,m,h))===!0&&p(E,m?m.concat(v):[v])}),u.pop()}}if(!k.isObject(e))throw new TypeError("data must be an object");return p(e),t}function ec(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ii(e,t){this._pairs=[],e&&mo(e,this,t)}const dd=Ii.prototype;dd.append=function(t,n){this._pairs.push([t,n])};dd.toString=function(t){const n=t?function(s){return t.call(this,s,ec)}:ec;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function eg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ld(e,t,n){if(!t)return e;const s=n&&n.encode||eg,r=n&&n.serialize;let o;if(r?o=r(t,n):o=k.isURLSearchParams(t)?t.toString():new Ii(t,n).toString(s),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class tg{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){k.forEach(this.handlers,function(s){s!==null&&t(s)})}}const tc=tg,ud={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ng=typeof URLSearchParams<"u"?URLSearchParams:Ii,sg=typeof FormData<"u"?FormData:null,rg=typeof Blob<"u"?Blob:null,og={isBrowser:!0,classes:{URLSearchParams:ng,FormData:sg,Blob:rg},protocols:["http","https","file","blob","url","data"]},Ui=typeof window<"u"&&typeof document<"u",ig=(e=>Ui&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),ag=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),cg=Ui&&window.location.href||"http://localhost",dg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ui,hasStandardBrowserEnv:ig,hasStandardBrowserWebWorkerEnv:ag,origin:cg},Symbol.toStringTag,{value:"Module"})),jt={...dg,...og};function lg(e,t){return mo(e,new jt.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,o){return jt.isNode&&k.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function ug(e){return k.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function hg(e){const t={},n=Object.keys(e);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],t[o]=e[o];return t}function hd(e){function t(n,s,r,o){let i=n[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),c=o>=n.length;return i=!i&&k.isArray(r)?r.length:i,c?(k.hasOwnProp(r,i)?r[i]=[r[i],s]:r[i]=s,!a):((!r[i]||!k.isObject(r[i]))&&(r[i]=[]),t(n,s,r[i],o)&&k.isArray(r[i])&&(r[i]=hg(r[i])),!a)}if(k.isFormData(e)&&k.isFunction(e.entries)){const n={};return k.forEachEntry(e,(s,r)=>{t(ug(s),r,n,0)}),n}return null}function fg(e,t,n){if(k.isString(e))try{return(t||JSON.parse)(e),k.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Oi={transitional:ud,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=k.isObject(t);if(o&&k.isHTMLForm(t)&&(t=new FormData(t)),k.isFormData(t))return r?JSON.stringify(hd(t)):t;if(k.isArrayBuffer(t)||k.isBuffer(t)||k.isStream(t)||k.isFile(t)||k.isBlob(t)||k.isReadableStream(t))return t;if(k.isArrayBufferView(t))return t.buffer;if(k.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return lg(t,this.formSerializer).toString();if((a=k.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return mo(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),fg(t)):t}],transformResponse:[function(t){const n=this.transitional||Oi.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(k.isResponse(t)||k.isReadableStream(t))return t;if(t&&k.isString(t)&&(s&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?re.from(a,re.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],e=>{Oi.headers[e]={}});const Ri=Oi,pg=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gg=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),s=i.substring(r+1).trim(),!(!n||t[n]&&pg[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},nc=Symbol("internals");function js(e){return e&&String(e).trim().toLowerCase()}function Pr(e){return e===!1||e==null?e:k.isArray(e)?e.map(Pr):String(e)}function yg(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const mg=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function $o(e,t,n,s,r){if(k.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!k.isString(t)){if(k.isString(s))return t.indexOf(s)!==-1;if(k.isRegExp(s))return s.test(t)}}function wg(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function bg(e,t){const n=k.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,o,i){return this[s].call(this,t,r,o,i)},configurable:!0})})}class wo{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function o(a,c,d){const l=js(c);if(!l)throw new Error("header name must be a non-empty string");const u=k.findKey(r,l);(!u||r[u]===void 0||d===!0||d===void 0&&r[u]!==!1)&&(r[u||c]=Pr(a))}const i=(a,c)=>k.forEach(a,(d,l)=>o(d,l,c));if(k.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(k.isString(t)&&(t=t.trim())&&!mg(t))i(gg(t),n);else if(k.isHeaders(t))for(const[a,c]of t.entries())o(c,a,s);else t!=null&&o(n,t,s);return this}get(t,n){if(t=js(t),t){const s=k.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return yg(r);if(k.isFunction(n))return n.call(this,r,s);if(k.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=js(t),t){const s=k.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||$o(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function o(i){if(i=js(i),i){const a=k.findKey(s,i);a&&(!n||$o(s,s[a],a,n))&&(delete s[a],r=!0)}}return k.isArray(t)?t.forEach(o):o(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!t||$o(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const n=this,s={};return k.forEach(this,(r,o)=>{const i=k.findKey(s,o);if(i){n[i]=Pr(r),delete n[o];return}const a=t?wg(o):String(o).trim();a!==o&&delete n[o],n[a]=Pr(r),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return k.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&k.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[nc]=this[nc]={accessors:{}}).accessors,r=this.prototype;function o(i){const a=js(i);s[a]||(bg(r,i),s[a]=!0)}return k.isArray(t)?t.forEach(o):o(t),this}}wo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(wo.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});k.freezeMethods(wo);const Dt=wo;function qo(e,t){const n=this||Ri,s=t||n,r=Dt.from(s.headers);let o=s.data;return k.forEach(e,function(a){o=a.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function fd(e){return!!(e&&e.__CANCEL__)}function Ss(e,t,n){re.call(this,e??"canceled",re.ERR_CANCELED,t,n),this.name="CanceledError"}k.inherits(Ss,re,{__CANCEL__:!0});function pd(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new re("Request failed with status code "+n.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Tg(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function vg(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,o=0,i;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),l=s[o];i||(i=d),n[r]=c,s[r]=d;let u=o,h=0;for(;u!==r;)h+=n[u++],u=u%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),d-i<t)return;const p=l&&d-l;return p?Math.round(h*1e3/p):void 0}}function Ag(e,t){let n=0,s=1e3/t,r,o;const i=(d,l=Date.now())=>{n=l,r=null,o&&(clearTimeout(o),o=null),e.apply(null,d)};return[(...d)=>{const l=Date.now(),u=l-n;u>=s?i(d,l):(r=d,o||(o=setTimeout(()=>{o=null,i(r)},s-u)))},()=>r&&i(r)]}const Wr=(e,t,n=3)=>{let s=0;const r=vg(50,250);return Ag(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,c=i-s,d=r(c),l=i<=a;s=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&l?(a-i)/d:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(u)},n)},sc=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},rc=e=>(...t)=>k.asap(()=>e(...t)),Sg=jt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function r(o){let i=o;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=r(window.location.href),function(i){const a=k.isString(i)?r(i):i;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}(),xg=jt.hasStandardBrowserEnv?{write(e,t,n,s,r,o){const i=[e+"="+encodeURIComponent(t)];k.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),k.isString(s)&&i.push("path="+s),k.isString(r)&&i.push("domain="+r),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kg(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _g(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function gd(e,t){return e&&!kg(t)?_g(e,t):t}const oc=e=>e instanceof Dt?{...e}:e;function ns(e,t){t=t||{};const n={};function s(d,l,u){return k.isPlainObject(d)&&k.isPlainObject(l)?k.merge.call({caseless:u},d,l):k.isPlainObject(l)?k.merge({},l):k.isArray(l)?l.slice():l}function r(d,l,u){if(k.isUndefined(l)){if(!k.isUndefined(d))return s(void 0,d,u)}else return s(d,l,u)}function o(d,l){if(!k.isUndefined(l))return s(void 0,l)}function i(d,l){if(k.isUndefined(l)){if(!k.isUndefined(d))return s(void 0,d)}else return s(void 0,l)}function a(d,l,u){if(u in t)return s(d,l);if(u in e)return s(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,l)=>r(oc(d),oc(l),!0)};return k.forEach(Object.keys(Object.assign({},e,t)),function(l){const u=c[l]||r,h=u(e[l],t[l],l);k.isUndefined(h)&&u!==a||(n[l]=h)}),n}const yd=e=>{const t=ns({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:i,auth:a}=t;t.headers=i=Dt.from(i),t.url=ld(gd(t.baseURL,t.url),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(k.isFormData(n)){if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...l]=c?c.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...l].join("; "))}}if(jt.hasStandardBrowserEnv&&(s&&k.isFunction(s)&&(s=s(t)),s||s!==!1&&Sg(t.url))){const d=r&&o&&xg.read(o);d&&i.set(r,d)}return t},Eg=typeof XMLHttpRequest<"u",Bg=Eg&&function(e){return new Promise(function(n,s){const r=yd(e);let o=r.data;const i=Dt.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=r,l,u,h,p,g;function m(){p&&p(),g&&g(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function E(){if(!y)return;const w=Dt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),I={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:w,config:e,request:y};pd(function(F){n(F),m()},function(F){s(F),m()},I),y=null}"onloadend"in y?y.onloadend=E:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(E)},y.onabort=function(){y&&(s(new re("Request aborted",re.ECONNABORTED,e,y)),y=null)},y.onerror=function(){s(new re("Network Error",re.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let _=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const I=r.transitional||ud;r.timeoutErrorMessage&&(_=r.timeoutErrorMessage),s(new re(_,I.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,e,y)),y=null},o===void 0&&i.setContentType(null),"setRequestHeader"in y&&k.forEach(i.toJSON(),function(_,I){y.setRequestHeader(I,_)}),k.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),a&&a!=="json"&&(y.responseType=r.responseType),d&&([h,g]=Wr(d,!0),y.addEventListener("progress",h)),c&&y.upload&&([u,p]=Wr(c),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",p)),(r.cancelToken||r.signal)&&(l=w=>{y&&(s(!w||w.type?new Ss(null,e,y):w),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const v=Tg(r.url);if(v&&jt.protocols.indexOf(v)===-1){s(new re("Unsupported protocol "+v+":",re.ERR_BAD_REQUEST,e));return}y.send(o||null)})},Pg=(e,t)=>{let n=new AbortController,s;const r=function(c){if(!s){s=!0,i();const d=c instanceof Error?c:this.reason;n.abort(d instanceof re?d:new Ss(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{r(new re(`timeout ${t} of ms exceeded`,re.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",r):c.unsubscribe(r))}),e=null)};e.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",r));const{signal:a}=n;return a.unsubscribe=i,[a,()=>{o&&clearTimeout(o),o=null}]},Ig=Pg,Ug=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Og=async function*(e,t,n){for await(const s of e)yield*Ug(ArrayBuffer.isView(s)?s:await n(String(s)),t)},ic=(e,t,n,s,r)=>{const o=Og(e,t,r);let i=0,a,c=d=>{a||(a=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:l,value:u}=await o.next();if(l){c(),d.close();return}let h=u.byteLength;if(n){let p=i+=h;n(p)}d.enqueue(new Uint8Array(u))}catch(l){throw c(l),l}},cancel(d){return c(d),o.return()}},{highWaterMark:2})},bo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",md=bo&&typeof ReadableStream=="function",Xo=bo&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),wd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Rg=md&&wd(()=>{let e=!1;const t=new Request(jt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ac=64*1024,Qo=md&&wd(()=>k.isReadableStream(new Response("").body)),Kr={stream:Qo&&(e=>e.body)};bo&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Kr[t]&&(Kr[t]=k.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new re(`Response type '${t}' is not supported`,re.ERR_NOT_SUPPORT,s)})})})(new Response);const Lg=async e=>{if(e==null)return 0;if(k.isBlob(e))return e.size;if(k.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(k.isArrayBufferView(e)||k.isArrayBuffer(e))return e.byteLength;if(k.isURLSearchParams(e)&&(e=e+""),k.isString(e))return(await Xo(e)).byteLength},$g=async(e,t)=>{const n=k.toFiniteNumber(e.getContentLength());return n??Lg(t)},qg=bo&&(async e=>{let{url:t,method:n,data:s,signal:r,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:c,responseType:d,headers:l,withCredentials:u="same-origin",fetchOptions:h}=yd(e);d=d?(d+"").toLowerCase():"text";let[p,g]=r||o||i?Ig([r,o],i):[],m,y;const E=()=>{!m&&setTimeout(()=>{p&&p.unsubscribe()}),m=!0};let v;try{if(c&&Rg&&n!=="get"&&n!=="head"&&(v=await $g(l,s))!==0){let M=new Request(t,{method:"POST",body:s,duplex:"half"}),F;if(k.isFormData(s)&&(F=M.headers.get("content-type"))&&l.setContentType(F),M.body){const[X,te]=sc(v,Wr(rc(c)));s=ic(M.body,ac,X,te,Xo)}}k.isString(u)||(u=u?"include":"omit"),y=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:s,duplex:"half",credentials:u});let w=await fetch(y);const _=Qo&&(d==="stream"||d==="response");if(Qo&&(a||_)){const M={};["status","statusText","headers"].forEach(we=>{M[we]=w[we]});const F=k.toFiniteNumber(w.headers.get("content-length")),[X,te]=a&&sc(F,Wr(rc(a),!0))||[];w=new Response(ic(w.body,ac,X,()=>{te&&te(),_&&E()},Xo),M)}d=d||"text";let I=await Kr[k.findKey(Kr,d)||"text"](w,e);return!_&&E(),g&&g(),await new Promise((M,F)=>{pd(M,F,{data:I,headers:Dt.from(w.headers),status:w.status,statusText:w.statusText,config:e,request:y})})}catch(w){throw E(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new re("Network Error",re.ERR_NETWORK,e,y),{cause:w.cause||w}):re.from(w,w&&w.code,e,y)}}),Zo={http:Qp,xhr:Bg,fetch:qg};k.forEach(Zo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const cc=e=>`- ${e}`,jg=e=>k.isFunction(e)||e===null||e===!1,bd={getAdapter:e=>{e=k.isArray(e)?e:[e];const{length:t}=e;let n,s;const r={};for(let o=0;o<t;o++){n=e[o];let i;if(s=n,!jg(n)&&(s=Zo[(i=String(n)).toLowerCase()],s===void 0))throw new re(`Unknown adapter '${i}'`);if(s)break;r[i||"#"+o]=s}if(!s){const o=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(cc).join(`
`):" "+cc(o[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:Zo};function jo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ss(null,e)}function dc(e){return jo(e),e.headers=Dt.from(e.headers),e.data=qo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bd.getAdapter(e.adapter||Ri.adapter)(e).then(function(s){return jo(e),s.data=qo.call(e,e.transformResponse,s),s.headers=Dt.from(s.headers),s},function(s){return fd(s)||(jo(e),s&&s.response&&(s.response.data=qo.call(e,e.transformResponse,s.response),s.response.headers=Dt.from(s.response.headers))),Promise.reject(s)})}const Td="1.7.4",Li={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Li[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const lc={};Li.transitional=function(t,n,s){function r(o,i){return"[Axios v"+Td+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,a)=>{if(t===!1)throw new re(r(i," has been removed"+(n?" in "+n:"")),re.ERR_DEPRECATED);return n&&!lc[i]&&(lc[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,a):!0}};function Dg(e,t,n){if(typeof e!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const o=s[r],i=t[o];if(i){const a=e[o],c=a===void 0||i(a,o,e);if(c!==!0)throw new re("option "+o+" must be "+c,re.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new re("Unknown option "+o,re.ERR_BAD_OPTION)}}const Yo={assertOptions:Dg,validators:Li},Pn=Yo.validators;class Jr{constructor(t){this.defaults=t,this.interceptors={request:new tc,response:new tc}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ns(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&Yo.assertOptions(s,{silentJSONParsing:Pn.transitional(Pn.boolean),forcedJSONParsing:Pn.transitional(Pn.boolean),clarifyTimeoutError:Pn.transitional(Pn.boolean)},!1),r!=null&&(k.isFunction(r)?n.paramsSerializer={serialize:r}:Yo.assertOptions(r,{encode:Pn.function,serialize:Pn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&k.merge(o.common,o[n.method]);o&&k.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),n.headers=Dt.concat(i,o);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let l,u=0,h;if(!c){const g=[dc.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,d),h=g.length,l=Promise.resolve(n);u<h;)l=l.then(g[u++],g[u++]);return l}h=a.length;let p=n;for(u=0;u<h;){const g=a[u++],m=a[u++];try{p=g(p)}catch(y){m.call(this,y);break}}try{l=dc.call(this,p)}catch(g){return Promise.reject(g)}for(u=0,h=d.length;u<h;)l=l.then(d[u++],d[u++]);return l}getUri(t){t=ns(this.defaults,t);const n=gd(t.baseURL,t.url);return ld(n,t.params,t.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(t){Jr.prototype[t]=function(n,s){return this.request(ns(s||{},{method:t,url:n,data:(s||{}).data}))}});k.forEach(["post","put","patch"],function(t){function n(s){return function(o,i,a){return this.request(ns(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Jr.prototype[t]=n(),Jr.prototype[t+"Form"]=n(!0)});const Ir=Jr;class $i{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const i=new Promise(a=>{s.subscribe(a),o=a}).then(r);return i.cancel=function(){s.unsubscribe(o)},i},t(function(o,i,a){s.reason||(s.reason=new Ss(o,i,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new $i(function(r){t=r}),cancel:t}}}const Fg=$i;function Ng(e){return function(n){return e.apply(null,n)}}function zg(e){return k.isObject(e)&&e.isAxiosError===!0}const ei={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ei).forEach(([e,t])=>{ei[t]=e});const Hg=ei;function vd(e){const t=new Ir(e),n=Zc(Ir.prototype.request,t);return k.extend(n,Ir.prototype,t,{allOwnKeys:!0}),k.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return vd(ns(e,r))},n}const He=vd(Ri);He.Axios=Ir;He.CanceledError=Ss;He.CancelToken=Fg;He.isCancel=fd;He.VERSION=Td;He.toFormData=mo;He.AxiosError=re;He.Cancel=He.CanceledError;He.all=function(t){return Promise.all(t)};He.spread=Ng;He.isAxiosError=zg;He.mergeConfig=ns;He.AxiosHeaders=Dt;He.formToJSON=e=>hd(k.isHTMLForm(e)?new FormData(e):e);He.getAdapter=bd.getAdapter;He.HttpStatusCode=Hg;He.default=He;const Mg=He;async function Cg(e){var t;const{params:n,method:s,url:r,headers:o,body:i,overrides:a}=e,c={headers:o,method:s,url:r,params:n,data:i,withCredentials:(t=a==null?void 0:a.WITH_CREDENTIALS)!=null?t:!0};try{const d=await Mg(c);return{status:d.status,statusText:d.statusText,data:d.data,headers:d.headers,config:d.config}}catch(d){const l=d;if(l.response)return l.response;throw d}}var ti={},Gg={get exports(){return ti},set exports(e){ti=e}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(c,d,l){this.fn=c,this.context=d,this.once=l||!1}function o(c,d,l,u,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new r(l,u||c,h),g=n?n+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function i(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],l,u;if(this._eventsCount===0)return d;for(u in l=this._events)t.call(l,u)&&d.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(l)):d},a.prototype.listeners=function(d){var l=n?n+d:d,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,p=u.length,g=new Array(p);h<p;h++)g[h]=u[h].fn;return g},a.prototype.listenerCount=function(d){var l=n?n+d:d,u=this._events[l];return u?u.fn?1:u.length:0},a.prototype.emit=function(d,l,u,h,p,g){var m=n?n+d:d;if(!this._events[m])return!1;var y=this._events[m],E=arguments.length,v,w;if(y.fn){switch(y.once&&this.removeListener(d,y.fn,void 0,!0),E){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,u),!0;case 4:return y.fn.call(y.context,l,u,h),!0;case 5:return y.fn.call(y.context,l,u,h,p),!0;case 6:return y.fn.call(y.context,l,u,h,p,g),!0}for(w=1,v=new Array(E-1);w<E;w++)v[w-1]=arguments[w];y.fn.apply(y.context,v)}else{var _=y.length,I;for(w=0;w<_;w++)switch(y[w].once&&this.removeListener(d,y[w].fn,void 0,!0),E){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,l);break;case 3:y[w].fn.call(y[w].context,l,u);break;case 4:y[w].fn.call(y[w].context,l,u,h);break;default:if(!v)for(I=1,v=new Array(E-1);I<E;I++)v[I-1]=arguments[I];y[w].fn.apply(y[w].context,v)}}return!0},a.prototype.on=function(d,l,u){return o(this,d,l,u,!1)},a.prototype.once=function(d,l,u){return o(this,d,l,u,!0)},a.prototype.removeListener=function(d,l,u,h){var p=n?n+d:d;if(!this._events[p])return this;if(!l)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===l&&(!h||g.once)&&(!u||g.context===u)&&i(this,p);else{for(var m=0,y=[],E=g.length;m<E;m++)(g[m].fn!==l||h&&!g[m].once||u&&g[m].context!==u)&&y.push(g[m]);y.length?this._events[p]=y.length===1?y[0]:y:i(this,p)}return this},a.prototype.removeAllListeners=function(d){var l;return d?(l=n?n+d:d,this._events[l]&&i(this,l)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(Gg);var Ad=Object.defineProperty,Wg=Object.getOwnPropertyDescriptor,To=(e,t)=>{for(var n in t)Ad(e,n,{get:t[n],enumerable:!0})},me=(e,t,n,s)=>{for(var r=s>1?void 0:s?Wg(t,n):t,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(s?i(t,n,r):i(r))||r);return s&&r&&Ad(t,n,r),r},Kg=/^m(\/[0-9]+')+$/,Sd=e=>e.replace("'",""),Jg="ed25519 seed",Vg=2147483648,xd=e=>{const n=fo.create(Ei,Jg).update(Fc(e)).digest(),s=n.slice(0,32),r=n.slice(32);return{key:s,chainCode:r}},kd=({key:e,chainCode:t},n)=>{const s=new ArrayBuffer(4);new DataView(s).setUint32(0,n);const r=new Uint8Array(s),o=new Uint8Array([0]),i=new Uint8Array([...o,...e,...r]),a=fo.create(Ei,t).update(i).digest(),c=a.slice(0,32),d=a.slice(32);return{key:c,chainCode:d}},Xg=(e,t=!0)=>{const s=zs.sign.keyPair.fromSeed(e).secretKey.subarray(32),r=new Uint8Array([0]);return t?new Uint8Array([...r,...s]):s},_d=e=>Kg.test(e)?!e.split("/").slice(1).map(Sd).some(Number.isNaN):!1,Ed=(e,t,n=Vg)=>{if(!_d(e))throw new Error("Invalid derivation path");const{key:s,chainCode:r}=xd(t);return e.split("/").slice(1).map(Sd).map(i=>parseInt(i,10)).reduce((i,a)=>kd(i,a+n),{key:s,chainCode:r})},Qg="1.21.0";async function Hs(e){return new Promise(t=>{setTimeout(t,e)})}var uc="/v1";function Zg(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(uc)||(t=`${t}${uc}`),t}var Bd=2e5,Pd=20,Id=20,Vr="0x1::aptos_coin::AptosCoin";function vo(e){let t,n,s;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,s=e.tags):t=e,(r,o,i)=>{if(i.value!=null)i.value=hc(i.value,t,n,s);else if(i.get!=null)i.get=hc(i.get,t,n,s);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function Ud(e,t){return vo({ttlMs:e,hashFunction:t})}var Ur=new Map;function Yg(e){const t=new Set;for(const n of e){const s=Ur.get(n);if(s)for(const r of s)t.has(r)||(r.clear(),t.add(r))}return t.size}function hc(e,t,n=0,s){const r=Symbol("__memoized_map__");return function(...o){let i;const a=this;a.hasOwnProperty(r)||Object.defineProperty(a,r,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[r];if(Array.isArray(s))for(const d of s)Ur.has(d)?Ur.get(d).push(c):Ur.set(d,[c]);if(t||o.length>0||n>0){let d;t===!0?d=o.map(h=>h.toString()).join("!"):t?d=t.apply(a,o):d=o[0];const l=`${d}__timestamp`;let u=!1;if(n>0)if(!c.has(l))u=!0;else{const h=c.get(l);u=Date.now()-h>n}c.has(d)&&!u?i=c.get(d):(i=e.apply(a,o),c.set(d,i),n>0&&c.set(l,Date.now()))}else{const d=a;c.has(d)?i=c.get(d):(i=e.apply(a,o),c.set(d,i))}return i}}var qi=class extends Error{constructor(e,t,n){super(n),this.name="AptosApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.data=t.data,this.request=e}},ey={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function ty(e,t,n,s,r,o){const i={...o==null?void 0:o.HEADERS,"x-aptos-client":`aptos-ts-sdk/${Qg}`,"content-type":s??"application/json"};return o!=null&&o.TOKEN&&(i.Authorization=`Bearer ${o==null?void 0:o.TOKEN}`),await Cg({url:e,method:t,body:n,params:r,headers:i,overrides:o})}async function ji(e){const{url:t,endpoint:n,method:s,body:r,contentType:o,params:i,overrides:a}=e,c=`${t}/${n??""}`,d=await ty(c,s,r,o,i,a),l={status:d.status,statusText:d.statusText,data:d.data,headers:d.headers,config:d.config,url:c};if(l.status>=200&&l.status<300)return l;const u=ey[l.status];throw new qi(e,l,u??"Generic Error")}async function ut(e){return await ji({...e,method:"GET"})}async function Qn(e){return await ji({...e,method:"POST"})}async function fc(e){const t=[];let n;const s=e.params;for(;;){s.start=n;const r=await ut({url:e.url,endpoint:e.endpoint,params:s,originMethod:e.originMethod,overrides:e.overrides});if(n=r.headers["x-aptos-cursor"],delete r.headers,t.push(...r.data),n==null)break}return t}var Xr={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},Od={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},ni={"https://fullnode.mainnet.aptoslabs.com/v1":"mainnet","https://fullnode.testnet.aptoslabs.com/v1":"testnet","https://fullnode.devnet.aptoslabs.com/v1":"devnet","http://127.0.0.1:8080/v1":"local"},Rd=(e=>(e.MAINNET="mainnet",e.TESTNET="testnet",e.DEVNET="devnet",e.LOCAL="local",e))(Rd||{}),N=class Or{static fromBuffer(t){return Or.fromUint8Array(t)}static fromUint8Array(t){return new Or(Dc(t))}static ensure(t){return typeof t=="string"?new Or(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(Fc(this.noPrefix()))}},V={};To(V,{AccountAddress:()=>fe,AccountAuthenticator:()=>Fn,AccountAuthenticatorEd25519:()=>Wd,AccountAuthenticatorMultiEd25519:()=>Jd,ArgumentABI:()=>_o,AuthenticationKey:()=>ai,ChainId:()=>Vi,ChangeSet:()=>Ty,Ed25519PublicKey:()=>Ut,Ed25519Signature:()=>fn,EntryFunction:()=>So,EntryFunctionABI:()=>tr,FeePayerRawTransaction:()=>Wi,Identifier:()=>ot,Module:()=>by,ModuleId:()=>er,MultiAgentRawTransaction:()=>Gi,MultiEd25519PublicKey:()=>Ao,MultiEd25519Signature:()=>Fi,MultiSig:()=>gl,MultiSigTransactionPayload:()=>fl,RawTransaction:()=>Is,RawTransactionWithData:()=>Ci,RotationProofChallenge:()=>Ay,Script:()=>Mi,ScriptABI:()=>Eo,SignedTransaction:()=>xo,StructTag:()=>Bs,Transaction:()=>$l,TransactionArgument:()=>Mt,TransactionArgumentAddress:()=>na,TransactionArgumentBool:()=>ra,TransactionArgumentU128:()=>ea,TransactionArgumentU16:()=>Qi,TransactionArgumentU256:()=>ta,TransactionArgumentU32:()=>Zi,TransactionArgumentU64:()=>Yi,TransactionArgumentU8:()=>Xi,TransactionArgumentU8Vector:()=>sa,TransactionAuthenticator:()=>xs,TransactionAuthenticatorEd25519:()=>Ni,TransactionAuthenticatorFeePayer:()=>Cd,TransactionAuthenticatorMultiAgent:()=>Hd,TransactionAuthenticatorMultiEd25519:()=>zi,TransactionPayload:()=>hr,TransactionPayloadEntryFunction:()=>Ji,TransactionPayloadMultisig:()=>Sl,TransactionPayloadScript:()=>Ki,TransactionScriptABI:()=>oa,TypeArgumentABI:()=>ko,TypeTag:()=>nt,TypeTagAddress:()=>ss,TypeTagBool:()=>ks,TypeTagParser:()=>Ps,TypeTagParserError:()=>ll,TypeTagSigner:()=>ol,TypeTagStruct:()=>rs,TypeTagU128:()=>Es,TypeTagU16:()=>cr,TypeTagU256:()=>lr,TypeTagU32:()=>dr,TypeTagU64:()=>_s,TypeTagU8:()=>Nn,TypeTagVector:()=>ur,UserTransaction:()=>ql,WriteSet:()=>vy,objectStructTag:()=>gy,optionStructTag:()=>py,stringStructTag:()=>Hi});var Ld={};To(Ld,{Deserializer:()=>Di,Serializer:()=>Ie,bcsSerializeBool:()=>uy,bcsSerializeBytes:()=>Rn,bcsSerializeFixedBytes:()=>fy,bcsSerializeStr:()=>hy,bcsSerializeU128:()=>dy,bcsSerializeU16:()=>ay,bcsSerializeU256:()=>ly,bcsSerializeU32:()=>cy,bcsSerializeU8:()=>si,bcsSerializeUint64:()=>iy,bcsToBytes:()=>Nt,deserializeVector:()=>gt,serializeVector:()=>tt,serializeVectorWithFunc:()=>oy});var ny=2**8-1,sy=2**16-1,Ys=2**32-1,gs=BigInt(2**64)-BigInt(1),$d=BigInt(2**128)-BigInt(1),ry=BigInt(2**256)-BigInt(1),Ie=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){const t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,n){this.ensureBufferWillHandleSize(t);const s=new DataView(this.buffer,this.offset);e.apply(s,[0,n,!0]),this.offset+=t}serializeStr(e){const t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");const t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){const t=BigInt(e.toString())&BigInt(Ys),n=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(n))}serializeU128(e){const t=BigInt(e.toString())&gs,n=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(n)}serializeU256(e){const t=BigInt(e.toString())&$d,n=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(n)}serializeU32AsUleb128(e){let t=e;const n=[];for(;t>>>7;)n.push(t&127|128),t>>>=7;n.push(t),this.serialize(new Uint8Array(n))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};me([is(0,ny)],Ie.prototype,"serializeU8",1);me([is(0,sy)],Ie.prototype,"serializeU16",1);me([is(0,Ys)],Ie.prototype,"serializeU32",1);me([is(BigInt(0),gs)],Ie.prototype,"serializeU64",1);me([is(BigInt(0),$d)],Ie.prototype,"serializeU128",1);me([is(BigInt(0),ry)],Ie.prototype,"serializeU256",1);me([is(0,Ys)],Ie.prototype,"serializeU32AsUleb128",1);function is(e,t,n){return(s,r,o)=>{const i=o.value;return o.value=function(c){const d=BigInt(c.toString());if(d>BigInt(t.toString())||d<BigInt(e.toString()))throw new Error(n||"Value is out of range");i.apply(this,[c])},o}}var Di=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){const e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){const e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){const e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){const e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){const e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<Ys;){const n=this.deserializeU8();if(e|=BigInt(n&127)<<BigInt(t),!(n&128))break;t+=7}if(e>Ys)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};function tt(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function oy(e,t){const n=new Ie;n.serializeU32AsUleb128(e.length);const s=n[t];return e.forEach(r=>{s.call(n,r)}),n.getBytes()}function gt(e,t){const n=e.deserializeUleb128AsU32(),s=[];for(let r=0;r<n;r+=1)s.push(t.deserialize(e));return s}function Nt(e){const t=new Ie;return e.serialize(t),t.getBytes()}function iy(e){const t=new Ie;return t.serializeU64(e),t.getBytes()}function si(e){const t=new Ie;return t.serializeU8(e),t.getBytes()}function ay(e){const t=new Ie;return t.serializeU16(e),t.getBytes()}function cy(e){const t=new Ie;return t.serializeU32(e),t.getBytes()}function dy(e){const t=new Ie;return t.serializeU128(e),t.getBytes()}function ly(e){const t=new Ie;return t.serializeU256(e),t.getBytes()}function uy(e){const t=new Ie;return t.serializeBool(e),t.getBytes()}function hy(e){const t=new Ie;return t.serializeStr(e),t.getBytes()}function Rn(e){const t=new Ie;return t.serializeBytes(e),t.getBytes()}function fy(e){const t=new Ie;return t.serializeFixedBytes(e),t.getBytes()}var Qr=class Pt{constructor(t){if(t.length!==Pt.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let n=N.ensure(t);n.noPrefix().length%2!==0&&(n=new N(`0${n.noPrefix()}`));const s=n.toUint8Array();if(s.length>Pt.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(s.length===Pt.LENGTH)return new Pt(s);const r=new Uint8Array(Pt.LENGTH);return r.set(s,Pt.LENGTH-s.length),new Pt(r)}static isValid(t){if(t==="")return!1;let n=N.ensure(t);return n.noPrefix().length%2!==0&&(n=new N(`0${n.noPrefix()}`)),n.toUint8Array().length<=Pt.LENGTH}toHexString(){return N.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new Pt(t.deserializeFixedBytes(Pt.LENGTH))}static standardizeAddress(t){const n=t.toLowerCase();return`0x${(n.startsWith("0x")?n.slice(2):n).padStart(64,"0")}`}};Qr.LENGTH=32;Qr.CORE_CODE_ADDRESS=Qr.fromHex("0x1");var fe=Qr,qd=class Rr{constructor(t){if(t.length!==Rr.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Rr.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new Rr(n)}};qd.LENGTH=32;var Ut=qd,jd=class Lr{constructor(t){if(this.value=t,t.length!==Lr.LENGTH)throw new Error(`Ed25519Signature length should be ${Lr.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new Lr(n)}};jd.LENGTH=64;var fn=jd,ri=32,Ao=class Dd{constructor(t,n){if(this.public_keys=t,this.threshold=n,n>ri)throw new Error(`"threshold" cannot be larger than ${ri}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*Ut.LENGTH+1);return this.public_keys.forEach((n,s)=>{t.set(n.value,s*Ut.LENGTH)}),t[this.public_keys.length*Ut.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),s=n[n.length-1],r=[];for(let o=0;o<n.length-1;o+=Ut.LENGTH){const i=o;r.push(new Ut(n.subarray(i,i+Ut.LENGTH)))}return new Dd(r,s)}},Fd=class Ms{constructor(t,n){if(this.signatures=t,this.bitmap=n,n.length!==Ms.BITMAP_LEN)throw new Error(`"bitmap" length should be ${Ms.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*fn.LENGTH+Ms.BITMAP_LEN);return this.signatures.forEach((n,s)=>{t.set(n.value,s*fn.LENGTH)}),t.set(this.bitmap,this.signatures.length*fn.LENGTH),t}static createBitmap(t){const s=new Uint8Array([0,0,0,0]),r=new Set;return t.forEach(o=>{if(o>=ri)throw new Error(`Invalid bit value ${o}.`);if(r.has(o))throw new Error("Duplicated bits detected.");r.add(o);const i=Math.floor(o/8);let a=s[i];a|=128>>o%8,s[i]=a}),s}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),s=n.subarray(n.length-4),r=[];for(let o=0;o<n.length-s.length;o+=fn.LENGTH){const i=o;r.push(new fn(n.subarray(i,i+fn.LENGTH)))}return new Ms(r,s)}};Fd.BITMAP_LEN=4;var Fi=Fd,xs=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Ni.load(e);case 1:return zi.load(e);case 2:return Hd.load(e);case 3:return Cd.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}},Ni=class Nd extends xs{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Ut.deserialize(t),s=fn.deserialize(t);return new Nd(n,s)}},zi=class zd extends xs{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Ao.deserialize(t),s=Fi.deserialize(t);return new zd(n,s)}},Hd=class Md extends xs{constructor(t,n,s){super(),this.sender=t,this.secondary_signer_addresses=n,this.secondary_signers=s}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),tt(this.secondary_signer_addresses,t),tt(this.secondary_signers,t)}static load(t){const n=Fn.deserialize(t),s=gt(t,fe),r=gt(t,Fn);return new Md(n,s,r)}},Cd=class Gd extends xs{constructor(t,n,s,r){super(),this.sender=t,this.secondary_signer_addresses=n,this.secondary_signers=s,this.fee_payer=r}serialize(t){t.serializeU32AsUleb128(3),this.sender.serialize(t),tt(this.secondary_signer_addresses,t),tt(this.secondary_signers,t),this.fee_payer.address.serialize(t),this.fee_payer.authenticator.serialize(t)}static load(t){const n=Fn.deserialize(t),s=gt(t,fe),r=gt(t,Fn),o=fe.deserialize(t),i=Fn.deserialize(t),a={address:o,authenticator:i};return new Gd(n,s,r,a)}},Fn=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Wd.load(e);case 1:return Jd.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}},Wd=class Kd extends Fn{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Ut.deserialize(t),s=fn.deserialize(t);return new Kd(n,s)}},Jd=class Vd extends Fn{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Ao.deserialize(t),s=Fi.deserialize(t);return new Vd(n,s)}},ot=class Xd{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const n=t.deserializeStr();return new Xd(n)}},nt=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return ks.load(t);case 1:return Nn.load(t);case 2:return _s.load(t);case 3:return Es.load(t);case 4:return ss.load(t);case 5:return ol.load(t);case 6:return ur.load(t);case 7:return rs.load(t);case 8:return cr.load(t);case 9:return dr.load(t);case 10:return lr.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}},ks=class Qd extends nt{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new Qd}},Nn=class Zd extends nt{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Zd}},cr=class Yd extends nt{serialize(t){t.serializeU32AsUleb128(8)}static load(t){return new Yd}},dr=class el extends nt{serialize(t){t.serializeU32AsUleb128(9)}static load(t){return new el}},_s=class tl extends nt{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new tl}},Es=class nl extends nt{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new nl}},lr=class sl extends nt{serialize(t){t.serializeU32AsUleb128(10)}static load(t){return new sl}},ss=class rl extends nt{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new rl}},ol=class il extends nt{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new il}},ur=class al extends nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const n=nt.deserialize(t);return new al(n)}},rs=class cl extends nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const n=Bs.deserialize(t);return new cl(n)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===fe.CORE_CODE_ADDRESS.toHexString()}},Bs=class oi{constructor(t,n,s,r){this.address=t,this.module_name=n,this.name=s,this.type_args=r}static fromString(t){const n=new Ps(t).parseTypeTag();return new oi(n.value.address,n.value.module_name,n.value.name,n.value.type_args)}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),tt(this.type_args,t)}static deserialize(t){const n=fe.deserialize(t),s=ot.deserialize(t),r=ot.deserialize(t),o=gt(t,nt);return new oi(n,s,r,o)}},Hi=new Bs(fe.fromHex("0x1"),new ot("string"),new ot("String"),[]);function py(e){return new Bs(fe.fromHex("0x1"),new ot("option"),new ot("Option"),[e])}function gy(e){return new Bs(fe.fromHex("0x1"),new ot("object"),new ot("Object"),[e])}function Ln(e){throw new ll(e)}function pc(e){return!!e.match(/\s/)}function gc(e){return!!e.match(/[_A-Za-z0-9]/g)}function yy(e){return!!e.match(/T\d+/g)}function my(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];Ln("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(pc(n)){let s="";for(let r=t;r<e.length;r+=1){const o=e[r];if(pc(o))s=`${s}${o}`;else break}return[["SPACE",s],s.length]}else if(gc(n)){let s="";for(let r=t;r<e.length;r+=1){const o=e[r];if(gc(o))s=`${s}${o}`;else break}return yy(s)?[["GENERIC",s],s.length]:[["IDENT",s],s.length]}}throw new Error("Unrecognized token.")}function wy(e){let t=0;const n=[];for(;t<e.length;){const[s,r]=my(e,t);s[0]!=="SPACE"&&n.push(s),t+=r}return n}var Ps=class dl{constructor(t,n){this.typeTags=[],this.tokens=wy(t),this.typeTags=n||[]}consume(t){const n=this.tokens.shift();(!n||n[1]!==t)&&Ln("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(t,n){const s=[];for(this.tokens.length<=0&&Ln("Invalid type tag.");this.tokens[0][1]!==t&&(s.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&n)));)this.tokens.length<=0&&Ln("Invalid type tag.");return s}parseTypeTag(){this.tokens.length===0&&Ln("Invalid type tag.");const[t,n]=this.tokens.shift();if(n==="u8")return new Nn;if(n==="u16")return new cr;if(n==="u32")return new dr;if(n==="u64")return new _s;if(n==="u128")return new Es;if(n==="u256")return new lr;if(n==="bool")return new ks;if(n==="address")return new ss;if(n==="vector"){this.consume("<");const s=this.parseTypeTag();return this.consume(">"),new ur(s)}if(n==="string")return new rs(Hi);if(t==="IDENT"&&(n.startsWith("0x")||n.startsWith("0X"))){const s=fe.fromHex(n);this.consume("::");const[r,o]=this.tokens.shift();r!=="IDENT"&&Ln("Invalid type tag."),this.consume("::");const[i,a]=this.tokens.shift();if(i!=="IDENT"&&Ln("Invalid type tag."),fe.CORE_CODE_ADDRESS.toHexString()===s.toHexString()&&o==="object"&&a==="Object")return this.consumeWholeGeneric(),new ss;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));const d=new Bs(s,new ot(o),new ot(a),c);return new rs(d)}if(t==="GENERIC"){this.typeTags.length===0&&Ln("Can't convert generic type since no typeTags were specified.");const s=parseInt(n.substring(1),10);return new dl(this.typeTags[s]).parseTypeTag()}throw new Error("Invalid type tag.")}},ll=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}},Is=class ul{constructor(t,n,s,r,o,i,a){this.sender=t,this.sequence_number=n,this.payload=s,this.max_gas_amount=r,this.gas_unit_price=o,this.expiration_timestamp_secs=i,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const n=fe.deserialize(t),s=t.deserializeU64(),r=hr.deserialize(t),o=t.deserializeU64(),i=t.deserializeU64(),a=t.deserializeU64(),c=Vi.deserialize(t);return new ul(n,s,r,o,i,a,c)}},Mi=class hl{constructor(t,n,s){this.code=t,this.ty_args=n,this.args=s}serialize(t){t.serializeBytes(this.code),tt(this.ty_args,t),tt(this.args,t)}static deserialize(t){const n=t.deserializeBytes(),s=gt(t,nt),r=gt(t,Mt);return new hl(n,s,r)}},So=class $r{constructor(t,n,s,r){this.module_name=t,this.function_name=n,this.ty_args=s,this.args=r}static natural(t,n,s,r){return new $r(er.fromStr(t),new ot(n),s,r)}static natual(t,n,s,r){return $r.natural(t,n,s,r)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),tt(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{t.serializeBytes(n)})}static deserialize(t){const n=er.deserialize(t),s=ot.deserialize(t),r=gt(t,nt),o=t.deserializeUleb128AsU32(),i=[];for(let c=0;c<o;c+=1)i.push(t.deserializeBytes());const a=i;return new $r(n,s,r,a)}},fl=class pl{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new pl(So.deserialize(t))}},gl=class yl{constructor(t,n){this.multisig_address=t,this.transaction_payload=n}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const n=fe.deserialize(t),s=t.deserializeBool();let r;return s&&(r=fl.deserialize(t)),new yl(n,r)}},by=class ml{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const n=t.deserializeBytes();return new ml(n)}},er=class ii{constructor(t,n){this.address=t,this.name=n}static fromStr(t){const n=t.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new ii(fe.fromHex(new N(n[0])),new ot(n[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const n=fe.deserialize(t),s=ot.deserialize(t);return new ii(n,s)}},Ty=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}},vy=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}},xo=class wl{constructor(t,n){this.raw_txn=t,this.authenticator=n}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const n=Is.deserialize(t),s=xs.deserialize(t);return new wl(n,s)}},Ci=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Gi.load(e);case 1:return Wi.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},Gi=class bl extends Ci{constructor(t,n){super(),this.raw_txn=t,this.secondary_signer_addresses=n}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),tt(this.secondary_signer_addresses,t)}static load(t){const n=Is.deserialize(t),s=gt(t,fe);return new bl(n,s)}},Wi=class Tl extends Ci{constructor(t,n,s){super(),this.raw_txn=t,this.secondary_signer_addresses=n,this.fee_payer_address=s}serialize(t){t.serializeU32AsUleb128(1),this.raw_txn.serialize(t),tt(this.secondary_signer_addresses,t),this.fee_payer_address.serialize(t)}static load(t){const n=Is.deserialize(t),s=gt(t,fe),r=fe.deserialize(t);return new Tl(n,s,r)}},hr=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Ki.load(e);case 2:return Ji.load(e);case 3:return Sl.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},Ki=class vl extends hr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const n=Mi.deserialize(t);return new vl(n)}},Ji=class Al extends hr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const n=So.deserialize(t);return new Al(n)}},Sl=class xl extends hr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=gl.deserialize(t);return new xl(n)}},Vi=class kl{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const n=t.deserializeU8();return new kl(n)}},Mt=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Xi.load(t);case 1:return Yi.load(t);case 2:return ea.load(t);case 3:return na.load(t);case 4:return sa.load(t);case 5:return ra.load(t);case 6:return Qi.load(t);case 7:return Zi.load(t);case 8:return ta.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},Xi=class _l extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const n=t.deserializeU8();return new _l(n)}},Qi=class El extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const n=t.deserializeU16();return new El(n)}},Zi=class Bl extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const n=t.deserializeU32();return new Bl(n)}},Yi=class Pl extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const n=t.deserializeU64();return new Pl(n)}},ea=class Il extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const n=t.deserializeU128();return new Il(n)}},ta=class Ul extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const n=t.deserializeU256();return new Ul(n)}},na=class Ol extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=fe.deserialize(t);return new Ol(n)}},sa=class Rl extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const n=t.deserializeBytes();return new Rl(n)}},ra=class Ll extends Mt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const n=t.deserializeBool();return new Ll(n)}},$l=class{getHashSalt(){const t=vs.create();return t.update("APTOS::Transaction"),t.digest()}static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return ql.load(t);default:throw new Error(`Unknown variant index for Transaction: ${n}`)}}},ql=class jl extends $l{constructor(t){super(),this.value=t}hash(){const t=vs.create();return t.update(this.getHashSalt()),t.update(Nt(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new jl(xo.deserialize(t))}},ko=class Dl{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const n=t.deserializeStr();return new Dl(n)}},_o=class Fl{constructor(t,n){this.name=t,this.type_tag=n}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const n=t.deserializeStr(),s=nt.deserialize(t);return new Fl(n,s)}},Eo=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return oa.load(e);case 1:return tr.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},oa=class Nl extends Eo{constructor(t,n,s,r,o){super(),this.name=t,this.doc=n,this.code=s,this.ty_args=r,this.args=o}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),tt(this.ty_args,t),tt(this.args,t)}static load(t){const n=t.deserializeStr(),s=t.deserializeStr(),r=t.deserializeBytes(),o=gt(t,ko),i=gt(t,_o);return new Nl(n,s,r,o,i)}},tr=class zl extends Eo{constructor(t,n,s,r,o){super(),this.name=t,this.module_name=n,this.doc=s,this.ty_args=r,this.args=o}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),tt(this.ty_args,t),tt(this.args,t)}static load(t){const n=t.deserializeStr(),s=er.deserialize(t),r=t.deserializeStr(),o=gt(t,ko),i=gt(t,_o);return new zl(n,s,r,o,i)}},fr=class us{constructor(t){if(t.length!==us.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const n=t.toBytes(),s=new Uint8Array(n.length+1);s.set(n),s.set([us.MULTI_ED25519_SCHEME],n.length);const r=vs.create();return r.update(s),new us(r.digest())}static fromEd25519PublicKey(t){const n=t.value,s=new Uint8Array(n.length+1);s.set(n),s.set([us.ED25519_SCHEME],n.length);const r=vs.create();return r.update(s),new us(r.digest())}derivedAddress(){return N.fromUint8Array(this.bytes)}};fr.LENGTH=32;fr.MULTI_ED25519_SCHEME=1;fr.ED25519_SCHEME=0;fr.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var ai=fr,Ay=class{constructor(e,t,n,s,r,o,i){this.accountAddress=e,this.moduleName=t,this.structName=n,this.sequenceNumber=s,this.originator=r,this.currentAuthKey=o,this.newPublicKey=i}serialize(e){this.accountAddress.serialize(e),e.serializeStr(this.moduleName),e.serializeStr(this.structName),e.serializeU64(this.sequenceNumber),this.originator.serialize(e),this.currentAuthKey.serialize(e),e.serializeBytes(this.newPublicKey)}},Hl=class qr{static fromAptosAccountObject(t){return new qr(N.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(t){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(t)}static fromDerivePath(t,n){if(!qr.isValidPath(t))throw new Error("Invalid derivation path");const s=n.trim().split(/\s+/).map(o=>o.toLowerCase()).join(" "),{key:r}=Ed(t,Dc(np(s)));return new qr(r)}constructor(t,n){t?this.signingKey=zs.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=zs.sign.keyPair(),this.accountAddress=N.ensure(n||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new Ut(this.signingKey.publicKey);return ai.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,n){const s=Nt(fe.fromHex(t)),r=new Uint8Array([...s,...n,ai.DERIVE_RESOURCE_ACCOUNT_SCHEME]),o=vs.create();return o.update(r),N.fromUint8Array(o.digest())}static getCollectionID(t,n){const s=new TextEncoder().encode(`${t}::${n}`),r=Rf.create();return r.update(s),N.fromUint8Array(r.digest())}pubKey(){return N.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const n=zs.sign.detached(t,this.signingKey.secretKey);return N.fromUint8Array(n)}signHexString(t){const n=N.ensure(t).toUint8Array();return this.signBuffer(n)}verifySignature(t,n){const s=N.ensure(t).toUint8Array(),r=N.ensure(n).toUint8Array();return zs.sign.detached.verify(s,r,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:N.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};me([vo()],Hl.prototype,"authKey",1);var Zr=Hl;function Ot(e){return e instanceof Zr?e.address():N.ensure(e)}var pr=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Sy=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,xy=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,Ml=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,ky=`
    query getAccountCoinsDataCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,_y=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,Ey=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${Sy}
${xy}`,By=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,Py=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,Iy=`
    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {
  account_transactions(
    where: $where_condition
    order_by: $order_by
    limit: $limit
    offset: $offset
  ) {
    token_activities_v2 {
      ...TokenActivitiesFields
    }
    transaction_version
    account_address
  }
}
    ${Ml}`,Uy=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {
  current_collections_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,Oy=`
    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,Ry=`
    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,Ly=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,$y=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,qy=`
    query getNumberOfDelegators($poolAddress: String) {
  num_active_delegator_per_pool(
    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: "0"}}
    distinct_on: pool_address
  ) {
    num_active_delegator
    pool_address
  }
}
    `,jy=`
    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${pr}`,Dy=`
    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${pr}`,Fy=`
    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${Ml}`,Ny=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,zy=`
    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${pr}`,Hy=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,My=`
    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${pr}`,Cy=`
    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${pr}`,Gy=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,Wy=`
    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {
  user_transactions(
    order_by: $order_by
    where: $where_condition
    limit: $limit
    offset: $offset
  ) {
    version
  }
}
    `;function Bo(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function ia(e){if(Bo(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function es(e){if(Bo(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function ts(e){return Bo(e,["number","bigint","string"]),BigInt(e)}function Po(e,t,n){aa(e,t,n)}function aa(e,t,n,s){if(t instanceof ks)n.serializeBool(ia(e));else if(t instanceof Nn)n.serializeU8(es(e));else if(t instanceof cr)n.serializeU16(es(e));else if(t instanceof dr)n.serializeU32(es(e));else if(t instanceof _s)n.serializeU64(ts(e));else if(t instanceof Es)n.serializeU128(ts(e));else if(t instanceof lr)n.serializeU256(ts(e));else if(t instanceof ss)Cl(e,n);else if(t instanceof ur)Ky(e,t,n);else if(t instanceof rs)Jy(e,t,n);else throw new Error("Unsupported arg type.")}function Cl(e,t){let n;if(typeof e=="string"||e instanceof N)n=fe.fromHex(e);else if(e instanceof fe)n=e;else throw new Error("Invalid account address.");n.serialize(t)}function Ky(e,t,n,s){if(t.value instanceof Nn){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(e instanceof N){n.serializeBytes(e.toUint8Array());return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(r=>aa(r,t.value,n))}function Jy(e,t,n,s){const{address:r,module_name:o,name:i,type_args:a}=t.value,c=`${N.fromUint8Array(r.address).toShortString()}::${o.value}::${i.value}`;if(c==="0x1::string::String")Bo(e,["string"]),n.serializeStr(e);else if(c==="0x1::object::Object")Cl(e,n);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);Vy(e,a[0],n)}else throw new Error("Unsupported struct type in function argument")}function Vy(e,t,n,s){e==null?n.serializeU32AsUleb128(0):(n.serializeU32AsUleb128(1),aa(e,t,n))}function Gl(e,t){if(t instanceof ks)return new ra(ia(e));if(t instanceof Nn)return new Xi(es(e));if(t instanceof cr)return new Qi(es(e));if(t instanceof dr)return new Zi(es(e));if(t instanceof _s)return new Yi(ts(e));if(t instanceof Es)return new ea(ts(e));if(t instanceof lr)return new ta(ts(e));if(t instanceof ss){let n;if(typeof e=="string"||e instanceof N)n=fe.fromHex(e);else if(e instanceof fe)n=e;else throw new Error("Invalid account address.");return new na(n)}if(t instanceof ur&&t.value instanceof Nn){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new sa(e)}throw new Error("Unknown type for TransactionArgument.")}var Xy="APTOS::RawTransaction",yc="APTOS::RawTransactionWithData",$t=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,n){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,n)}static getSigningMessage(e){const t=vs.create();if(e instanceof Is)t.update(Xy);else if(e instanceof Gi)t.update(yc);else if(e instanceof Wi)t.update(yc);else throw new Error("Unknown transaction type.");const n=t.digest(),s=Nt(e),r=new Uint8Array(n.length+s.length);return r.set(n),r.set(s,n.length),r}},jr=class extends $t{constructor(e,t,n){super(e,n),this.publicKey=t}rawToSigned(e){const t=$t.getSigningMessage(e),n=this.signingFunction(t),s=new Ni(new Ut(this.publicKey),n);return new xo(e,s)}sign(e){return Nt(this.rawToSigned(e))}},Wl=class extends $t{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){const t=$t.getSigningMessage(e),n=this.signingFunction(t),s=new zi(this.publicKey,n);return new xo(e,s)}sign(e){return Nt(this.rawToSigned(e))}},Kl=class ci{constructor(t,n){this.abiMap=new Map,t.forEach(s=>{const r=new Di(s),o=Eo.deserialize(r);let i;if(o instanceof tr){const a=o,{address:c,name:d}=a.module_name;i=`${N.fromUint8Array(c.address).toShortString()}::${d.value}::${a.name}`}else i=o.name;if(this.abiMap.has(i))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(i,o)}),this.builderConfig={maxGasAmount:BigInt(Bd),expSecFromNow:Pd,...n}}static toBCSArgs(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((s,r)=>{const o=new Ie;return Po(s,t[r].type_tag,o),o.getBytes()})}static toTransactionArguments(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((s,r)=>Gl(s,t[r].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,n,s){const r=n.map(a=>new Ps(a).parseTypeTag());let o;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const i=this.abiMap.get(t);if(i instanceof tr){const a=i,c=ci.toBCSArgs(a.args,s);o=new Ji(new So(a.module_name,new ot(a.name),r,c))}else if(i instanceof oa){const a=i,c=ci.toTransactionArguments(a.args,s);o=new Ki(new Mi(a.code,r,c))}else throw new Error("Unknown ABI format.");return o}build(t,n,s){const{sender:r,sequenceNumber:o,gasUnitPrice:i,maxGasAmount:a,expSecFromNow:c,chainId:d}=this.builderConfig;if(!i)throw new Error("No gasUnitPrice provided.");const l=r instanceof fe?r:fe.fromHex(r),u=BigInt(Math.floor(Date.now()/1e3)+Number(c)),h=this.buildTransactionPayload(t,n,s);if(h)return new Is(l,BigInt(o),h,BigInt(a),BigInt(i),u,new Vi(Number(d)));throw new Error("Invalid ABI.")}},Ee=class{constructor(e,t){this.aptosClient=e,this.builderConfig=t}async fetchABI(e){const n=(await this.aptosClient.getAccountModules(e)).map(r=>r.abi).flatMap(r=>r.exposed_functions.filter(o=>o.is_entry).map(o=>({fullName:`${r.address}::${r.name}::${o.name}`,...o}))),s=new Map;return n.forEach(r=>{s.set(r.fullName,r)}),s}async build(e,t,n){if(e=(w=>w.replace(/^0[xX]0*/g,"0x"))(e),e.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");const[o,i]=e.split("::"),a=await this.fetchABI(o);if(!a.has(e))throw new Error(`${e} doesn't exist.`);const c=a.get(e),l=c.params.filter(w=>w!=="signer"&&w!=="&signer").map((w,_)=>new _o(`var${_}`,new Ps(w,t).parseTypeTag())),u=new tr(c.name,er.fromStr(`${o}::${i}`),"",c.generic_type_params.map((w,_)=>new ko(`${_}`)),l),{sender:h,...p}=this.builderConfig,g=h instanceof fe?N.fromUint8Array(h.address):h,[{sequence_number:m},y,{gas_estimate:E}]=await Promise.all([p!=null&&p.sequenceNumber?Promise.resolve({sequence_number:p==null?void 0:p.sequenceNumber}):this.aptosClient.getAccount(g),p!=null&&p.chainId?Promise.resolve(p==null?void 0:p.chainId):this.aptosClient.getChainId(),p!=null&&p.gasUnitPrice?Promise.resolve({gas_estimate:p==null?void 0:p.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new Kl([Nt(u)],{sender:h,sequenceNumber:m,chainId:y,gasUnitPrice:BigInt(E),...p}).build(e,t,n)}};me([Ud(10*60*1e3)],Ee.prototype,"fetchABI",1);var $e=class hs{constructor(t,n,s=!1){if(!t)throw new Error("Node URL cannot be empty.");s?this.nodeUrl=t:this.nodeUrl=Zg(t),this.config=n==null?{}:{...n}}async getAccount(t){const{data:n}=await ut({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}`,originMethod:"getAccount",overrides:{...this.config}});return n}async getAccountTransactions(t,n){const{data:s}=await ut({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/transactions`,originMethod:"getAccountTransactions",params:{start:n==null?void 0:n.start,limit:n==null?void 0:n.limit},overrides:{...this.config}});return s}async getAccountModules(t,n){return await fc({url:this.nodeUrl,endpoint:`accounts/${t}/modules`,params:{ledger_version:n==null?void 0:n.ledgerVersion,limit:1e3},originMethod:"getAccountModules",overrides:{...this.config}})}async getAccountModule(t,n,s){const{data:r}=await ut({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/module/${n}`,originMethod:"getAccountModule",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return r}async getAccountResources(t,n){return await fc({url:this.nodeUrl,endpoint:`accounts/${t}/resources`,params:{ledger_version:n==null?void 0:n.ledgerVersion,limit:9999},originMethod:"getAccountResources",overrides:{...this.config}})}async getAccountResource(t,n,s){const{data:r}=await ut({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/resource/${n}`,originMethod:"getAccountResource",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return r}static generateBCSTransaction(t,n){return new jr(r=>{const o=t.signBuffer(r);return new V.Ed25519Signature(o.toUint8Array())},t.pubKey().toUint8Array()).sign(n)}static generateBCSSimulation(t,n){return new jr(r=>{const o=new Uint8Array(64);return new V.Ed25519Signature(o)},t.pubKey().toUint8Array()).sign(n)}async generateTransaction(t,n,s){const r={sender:t};if(s!=null&&s.sequence_number&&(r.sequenceNumber=s.sequence_number),s!=null&&s.gas_unit_price&&(r.gasUnitPrice=s.gas_unit_price),s!=null&&s.max_gas_amount&&(r.maxGasAmount=s.max_gas_amount),s!=null&&s.expiration_timestamp_secs){const i=Number.parseInt(s.expiration_timestamp_secs,10);r.expSecFromNow=i-Math.floor(Date.now()/1e3)}return new Ee(this,r).build(n.function,n.type_arguments,n.arguments)}async generateFeePayerTransaction(t,n,s,r=[],o){const i=await this.generateTransaction(t,n,o),a=r.map(d=>fe.fromHex(d));return new V.FeePayerRawTransaction(i,a,fe.fromHex(s))}async submitFeePayerTransaction(t,n,s,r=[]){const o=new V.TransactionAuthenticatorFeePayer(n,t.secondary_signer_addresses,r,{address:t.fee_payer_address,authenticator:s}),i=Nt(new V.SignedTransaction(t.raw_txn,o));return await this.submitSignedBCSTransaction(i)}async signMultiTransaction(t,n){const s=new V.Ed25519Signature(t.signBuffer($t.getSigningMessage(n)).toUint8Array()),r=new V.AccountAuthenticatorEd25519(new V.Ed25519PublicKey(t.signingKey.publicKey),s);return Promise.resolve(r)}async signTransaction(t,n){return Promise.resolve(hs.generateBCSTransaction(t,n))}async getEventsByCreationNumber(t,n,s){const{data:r}=await ut({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/events/${n}`,originMethod:"getEventsByCreationNumber",params:{start:s==null?void 0:s.start,limit:s==null?void 0:s.limit},overrides:{...this.config}});return r}async getEventsByEventHandle(t,n,s,r){const{data:o}=await ut({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/events/${n}/${s}`,originMethod:"getEventsByEventHandle",params:{start:r==null?void 0:r.start,limit:r==null?void 0:r.limit},overrides:{...this.config}});return o}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,n,s){let r;return t instanceof Zr?r=hs.generateBCSSimulation(t,n):t instanceof Ao?r=new Wl(()=>{const{threshold:i}=t,a=[],c=[];for(let l=0;l<i;l+=1)a.push(l),c.push(new V.Ed25519Signature(new Uint8Array(64)));const d=V.MultiEd25519Signature.createBitmap(a);return new V.MultiEd25519Signature(c,d)},t).sign(n):r=new jr(()=>{const i=new Uint8Array(64);return new V.Ed25519Signature(i)},t.toBytes()).sign(n),this.submitBCSSimulation(r,s)}async submitSignedBCSTransaction(t){const{data:n}=await Qn({url:this.nodeUrl,body:t,endpoint:"transactions",originMethod:"submitSignedBCSTransaction",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return n}async submitBCSSimulation(t,n){var s,r,o;const i={estimate_gas_unit_price:(s=n==null?void 0:n.estimateGasUnitPrice)!=null?s:!1,estimate_max_gas_amount:(r=n==null?void 0:n.estimateMaxGasAmount)!=null?r:!1,estimate_prioritized_gas_unit_price:(o=n==null?void 0:n.estimatePrioritizedGasUnitPrice)!=null?o:!1},{data:a}=await Qn({url:this.nodeUrl,body:t,endpoint:"transactions/simulate",params:i,originMethod:"submitBCSSimulation",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return a}async getTransactions(t){var n;const{data:s}=await ut({url:this.nodeUrl,endpoint:"transactions",originMethod:"getTransactions",params:{start:(n=t==null?void 0:t.start)==null?void 0:n.toString(),limit:t==null?void 0:t.limit},overrides:{...this.config}});return s}async getTransactionByHash(t){const{data:n}=await ut({url:this.nodeUrl,endpoint:`transactions/by_hash/${t}`,originMethod:"getTransactionByHash",overrides:{...this.config}});return n}async getTransactionByVersion(t){const{data:n}=await ut({url:this.nodeUrl,endpoint:`transactions/by_version/${t}`,originMethod:"getTransactionByVersion",overrides:{...this.config}});return n}async transactionPending(t){try{return(await this.getTransactionByHash(t)).type==="pending_transaction"}catch(n){if((n==null?void 0:n.status)===404)return!0;throw n}}async waitForTransactionWithResult(t,n){var s,r;const o=(s=n==null?void 0:n.timeoutSecs)!=null?s:Id,i=(r=n==null?void 0:n.checkSuccess)!=null?r:!1;let a=!0,c=0,d;for(;a&&!(c>=o);){try{if(d=await this.getTransactionByHash(t),a=d.type==="pending_transaction",!a)break}catch(l){const u=l instanceof mt,h=u&&l.status!==404&&l.status>=400&&l.status<500;if(!u||h)throw l}await Hs(1e3),c+=1}if(d===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new Jl(`Waiting for transaction ${t} timed out after ${o} seconds`,d);if(!i)return d;if(!(d!=null&&d.success))throw new Vl(`Transaction ${t} failed with an error: ${d.vm_status}`,d);return d}async waitForTransaction(t,n){await this.waitForTransactionWithResult(t,n)}async getLedgerInfo(){const{data:t}=await ut({url:this.nodeUrl,originMethod:"getLedgerInfo",overrides:{...this.config}});return t}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,n,s){var r;return(await Qn({url:this.nodeUrl,body:n,endpoint:`tables/${t}/item`,originMethod:"getTableItem",params:{ledger_version:(r=s==null?void 0:s.ledgerVersion)==null?void 0:r.toString()},overrides:{...this.config}})).data}async generateRawTransaction(t,n,s){const[{sequence_number:r},o,{gas_estimate:i}]=await Promise.all([s!=null&&s.providedSequenceNumber?Promise.resolve({sequence_number:s.providedSequenceNumber}):this.getAccount(t),this.getChainId(),s!=null&&s.gasUnitPrice?Promise.resolve({gas_estimate:s.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:c,expireTimestamp:d}={maxGasAmount:BigInt(Bd),gasUnitPrice:BigInt(i),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+Pd),...s};return new V.RawTransaction(V.AccountAddress.fromHex(t),BigInt(r),n,a,c,d,new V.ChainId(o))}async generateSignSubmitTransaction(t,n,s){const r=await this.generateRawTransaction(t.address(),n,s),o=hs.generateBCSTransaction(t,r);return(await this.submitSignedBCSTransaction(o)).hash}async signAndSubmitTransaction(t,n){const s=hs.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(t,n,s,r){const o=new Ie;tt(s,o);const i=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural("0x1::code","publish_package_txn",[],[Rn(n),o.getBytes()]));return this.generateSignSubmitTransaction(t,i,r)}async createResourceAccountAndPublishPackage(t,n,s,r,o){const i=new Ie;tt(r,i);const a=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural("0x1::resource_account","create_resource_account_and_publish_package",[],[Rn(n),Rn(s),i.getBytes()]));return this.generateSignSubmitTransaction(t,a,o)}async generateSignSubmitWaitForTransaction(t,n,s){const r=await this.generateSignSubmitTransaction(t,n,s);return this.waitForTransactionWithResult(r,s)}async estimateGasPrice(){const{data:t}=await ut({url:this.nodeUrl,endpoint:"estimate_gas_price",originMethod:"estimateGasPrice",overrides:{...this.config}});return t}async estimateMaxGasAmount(t){const n=`0x1::coin::CoinStore<${Vr}>`,[{gas_estimate:s},r]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),o=r.find(a=>a.type===n);return BigInt(o.data.coin.value)/BigInt(s)}async rotateAuthKeyEd25519(t,n,s){const{sequence_number:r,authentication_key:o}=await this.getAccount(t.address()),i=new Zr(n),a=new V.RotationProofChallenge(V.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(r),V.AccountAddress.fromHex(t.address()),new V.AccountAddress(new N(o).toUint8Array()),i.pubKey().toUint8Array()),c=N.fromUint8Array(Nt(a)),d=t.signHexString(c),l=i.signHexString(c),u=new V.TransactionPayloadEntryFunction(V.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[si(0),Rn(t.pubKey().toUint8Array()),si(0),Rn(i.pubKey().toUint8Array()),Rn(d.toUint8Array()),Rn(l.toUint8Array())])),h=await this.generateRawTransaction(t.address(),u,s),p=hs.generateBCSTransaction(t,h);return this.submitSignedBCSTransaction(p)}async lookupOriginalAddress(t){const n=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:s}}=n.data,r=await this.getTableItem(s,{key_type:"address",value_type:"address",key:N.ensure(t).hex()});return new N(r)}async getBlockByHeight(t,n){const{data:s}=await ut({url:this.nodeUrl,endpoint:`blocks/by_height/${t}`,originMethod:"getBlockByHeight",params:{with_transactions:n},overrides:{...this.config}});return s}async getBlockByVersion(t,n){const{data:s}=await ut({url:this.nodeUrl,endpoint:`blocks/by_version/${t}`,originMethod:"getBlockByVersion",params:{with_transactions:n},overrides:{...this.config}});return s}async view(t,n){const{data:s}=await Qn({url:this.nodeUrl,body:t,endpoint:"view",originMethod:"getTableItem",params:{ledger_version:n},overrides:{...this.config}});return s}clearCache(t){Yg(t)}};me([Me],$e.prototype,"getAccount",1);me([Me],$e.prototype,"getAccountTransactions",1);me([Me,Ud(10*60*1e3)],$e.prototype,"getAccountModules",1);me([Me],$e.prototype,"getAccountModule",1);me([Me],$e.prototype,"getAccountResources",1);me([Me],$e.prototype,"getAccountResource",1);me([Me],$e.prototype,"getEventsByCreationNumber",1);me([Me],$e.prototype,"getEventsByEventHandle",1);me([Me],$e.prototype,"submitSignedBCSTransaction",1);me([Me],$e.prototype,"submitBCSSimulation",1);me([Me],$e.prototype,"getTransactions",1);me([Me],$e.prototype,"getTransactionByHash",1);me([Me],$e.prototype,"getTransactionByVersion",1);me([Me],$e.prototype,"getLedgerInfo",1);me([vo()],$e.prototype,"getChainId",1);me([Me],$e.prototype,"getTableItem",1);me([Me,vo({ttlMs:5*60*1e3,tags:["gas_estimates"]})],$e.prototype,"estimateGasPrice",1);me([Me],$e.prototype,"estimateMaxGasAmount",1);me([Me],$e.prototype,"getBlockByHeight",1);me([Me],$e.prototype,"getBlockByVersion",1);me([Me],$e.prototype,"view",1);var Oe=$e,Jl=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},Vl=class extends Error{constructor(e,t){super(e),this.transaction=t}},mt=class extends Error{constructor(e,t,n,s){super(t),this.status=e,this.message=t,this.errorCode=n,this.vmErrorCode=s}};function Me(e,t,n){const s=n.value;return n.value=async function(...o){var i,a;try{return await s.apply(this,[...o])}catch(c){throw c instanceof qi?new mt(c.status,JSON.stringify({message:c.message,...c.data}),(i=c.data)==null?void 0:i.error_code,(a=c.data)==null?void 0:a.vm_error_code):c}},n}var ca=class Fe{constructor(t,n){this.endpoint=t,this.config=n}static validateAddress(t){if(t.length<66)throw new Error(`${t} is less than 66 chars long.`)}async queryIndexer(t){const n=await Qn({url:this.endpoint,body:t,overrides:{WITH_CREDENTIALS:!1,...this.config}});if(n.data.errors)throw new mt(n.data.errors[0].extensions.code,JSON.stringify({message:n.data.errors[0].message,error_code:n.data.errors[0].extensions.code}));return n.data.data}async getIndexerLedgerInfo(){const t={query:$y};return this.queryIndexer(t)}async getAccountNFTs(t,n){const s=N.ensure(t).hex();Fe.validateAddress(s);const r={query:Ey,variables:{address:s,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(r)}async getTokenActivities(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={token_data_id:{_eq:o}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Fy,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenActivitiesCount(t){const n={query:Ny,variables:{token_id:t}};return this.queryIndexer(n)}async getAccountTokensCount(t,n){var s,r;const o={owner_address:{_eq:t},amount:{_gt:"0"}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const i=N.ensure(t).hex();Fe.validateAddress(i);const a={query:By,variables:{where_condition:o,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit}};return this.queryIndexer(a)}async getTokenData(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={token_data_id:{_eq:o}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Hy,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenOwnersData(t,n,s){var r,o;const i=N.ensure(t).hex();Fe.validateAddress(i);const a={token_data_id:{_eq:i},amount:{_gt:"0"}};n&&(a.property_version_v1={_eq:n}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:Cy,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(o=s==null?void 0:s.options)==null?void 0:o.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getTokenCurrentOwnerData(t,n,s){var r,o;const i=N.ensure(t).hex();Fe.validateAddress(i);const a={token_data_id:{_eq:i},amount:{_gt:"0"}};n&&(a.property_version_v1={_eq:n}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:zy,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(o=s==null?void 0:s.options)==null?void 0:o.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getOwnedTokens(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={owner_address:{_eq:o},amount:{_gt:0}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:jy,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getOwnedTokensByTokenData(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={token_data_id:{_eq:o},amount:{_gt:0}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Dy,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenOwnedFromCollectionAddress(t,n,s){var r,o;const i=N.ensure(t).hex();Fe.validateAddress(i);const a=N.ensure(n).hex();Fe.validateAddress(a);const c={owner_address:{_eq:i},current_token_data:{collection_id:{_eq:a}},amount:{_gt:0}};s!=null&&s.tokenStandard&&(c.token_standard={_eq:s==null?void 0:s.tokenStandard});const d={query:My,variables:{where_condition:c,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(o=s==null?void 0:s.options)==null?void 0:o.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(d)}async getTokenOwnedFromCollectionNameAndCreatorAddress(t,n,s,r){const o=await this.getCollectionAddress(s,n,r);return await this.getTokenOwnedFromCollectionAddress(t,o,r)}async getCollectionData(t,n,s){var r,o;const i=N.ensure(t).hex();Fe.validateAddress(i);const a={collection_name:{_eq:n},creator_address:{_eq:i}};s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:Uy,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(o=s==null?void 0:s.options)==null?void 0:o.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getCollectionAddress(t,n,s){return(await this.getCollectionData(t,n,s)).current_collections_v2[0].collection_id}async getCollectionsWithOwnedTokens(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={owner_address:{_eq:o}};n!=null&&n.tokenStandard&&(i.current_collection={token_standard:{_eq:n==null?void 0:n.tokenStandard}});const a={query:Oy,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountTransactionsCount(t){const n=N.ensure(t).hex();Fe.validateAddress(n);const s={query:Py,variables:{address:n}};return this.queryIndexer(s)}async getAccountTransactionsData(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const a={query:Iy,variables:{where_condition:{account_address:{_eq:o}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTopUserTransactions(t){const n={query:Gy,variables:{limit:t}};return this.queryIndexer(n)}async getUserTransactions(t){var n,s;const r={version:{_lte:t==null?void 0:t.startVersion}},o={query:Wy,variables:{where_condition:r,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(o)}async getDelegatedStakingActivities(t,n){const s=N.ensure(t).hex(),r=N.ensure(n).hex();Fe.validateAddress(s),Fe.validateAddress(r);const o={query:Ly,variables:{delegatorAddress:s,poolAddress:r}};return this.queryIndexer(o)}async getNumberOfDelegators(t){const n=N.ensure(t).hex();Fe.validateAddress(n);const s={query:qy,variables:{poolAddress:n}};return this.queryIndexer(s)}async getAccountCoinsData(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const a={query:_y,variables:{where_condition:{owner_address:{_eq:o}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountCoinsDataCount(t){const n=N.ensure(t).hex();Fe.validateAddress(n);const s={query:ky,variables:{address:n}};return this.queryIndexer(s)}async getAccountOwnedObjects(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const a={query:Ry,variables:{where_condition:{owner_address:{_eq:o}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}},nr=class{constructor(e,t,n=!1){let s=null,r=null;if(typeof e=="object"&&Qy(e)?(s=e.fullnodeUrl,r=e.indexerUrl,this.network="CUSTOM"):(s=Od[e],r=Xr[e],this.network=e),this.network==="CUSTOM"&&!s)throw new Error("fullnode url is not provided");r&&(this.indexerClient=new ca(r,t)),this.aptosClient=new Oe(s,t,n)}};function Xl(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(s=>{const r=Object.getOwnPropertyDescriptor(t.prototype,s);r&&(r.value=function(...o){return this[n][s](...o)},Object.defineProperty(e.prototype,s,r))}),Object.getOwnPropertyNames(t).forEach(s=>{const r=Object.getOwnPropertyDescriptor(t,s);r&&(r.value=function(...o){return this[n][s](...o)},!e.hasOwnProperty.call(e,s)&&Object.defineProperty(e,s,r))})}Xl(nr,Oe,"aptosClient");Xl(nr,ca,"indexerClient");function Qy(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"}var da=class{constructor(e,t){this.type=e,this.value=t}},Io=class{constructor(){this.data={}}setProperty(e,t){this.data[e]=t}};function Uo(e){let t;return e==="string"||e==="String"?t=new rs(Hi):t=new Ps(e).parseTypeTag(),t}function Yr(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((s,r)=>{try{const o=Uo(s),i=new Ie;Po(e[r],o,i),n.push(i.getBytes())}catch{n.push(new TextEncoder().encode(e[r]))}}),n}function di(e,t){if(!e||!t)throw new Error("value or type can not be empty");try{const n=Uo(t),s=new Ie;return Po(e,n,s),s.getBytes()}catch{return new TextEncoder().encode(e)}}function la(e){const t=e.map.data,n=new Io;return t.forEach(s=>{const{key:r}=s,o=s.value.value,i=s.value.type,a=Uo(i),c=Ql(a,o),d=new da(i,c);n.setProperty(r,d)}),n}function Ql(e,t){const n=new Di(new N(t).toUint8Array());let s="";return e instanceof Nn?s=n.deserializeU8().toString():e instanceof _s?s=n.deserializeU64().toString():e instanceof Es?s=n.deserializeU128().toString():e instanceof ks?s=n.deserializeBool()?"true":"false":e instanceof ss?s=N.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof rs&&e.isStringTypeTag()?s=n.deserializeStr():s=t,s}var Zl={};To(Zl,{PropertyMap:()=>Io,PropertyValue:()=>da,Token:()=>eu,TokenData:()=>Yl});var Yl=class{constructor(e,t,n,s,r,o,i,a){this.collection=e,this.description=t,this.name=n,this.maximum=s,this.supply=r,this.uri=o,this.default_properties=la(i),this.mutability_config=a}},eu=class{constructor(e,t,n){this.id=e,this.amount=t,this.token_properties=la(n)}},Zy=class{constructor(e){this.aptosClient=e}async createCollection(e,t,n,s,r=gs,o){const a=await new Ee(this.aptosClient,{sender:e.address(),...o}).build("0x3::token::create_collection_script",[],[t,n,s,r,[!1,!1,!1]]),c=Oe.generateBCSTransaction(e,a);return(await this.aptosClient.submitSignedBCSTransaction(c)).hash}async createToken(e,t,n,s,r,o,i=gs,a=e.address(),c=0,d=0,l=[],u=[],h=[],p){const m=await new Ee(this.aptosClient,{sender:e.address(),...p}).build("0x3::token::create_token_script",[],[t,n,s,r,i,o,a,c,d,[!1,!1,!1,!1,!1],l,Yr(u,h),h]),y=Oe.generateBCSTransaction(e,m);return(await this.aptosClient.submitSignedBCSTransaction(y)).hash}async createTokenWithMutabilityConfig(e,t,n,s,r,o,i=gs,a=e.address(),c=0,d=0,l=[],u=[],h=[],p=[!1,!1,!1,!1,!1],g){const y=await new Ee(this.aptosClient,{sender:e.address(),...g}).build("0x3::token::create_token_script",[],[t,n,s,r,i,o,a,c,d,p,l,u,h]),E=Oe.generateBCSTransaction(e,y);return(await this.aptosClient.submitSignedBCSTransaction(E)).hash}async offerToken(e,t,n,s,r,o,i=0,a){const d=await new Ee(this.aptosClient,{sender:e.address(),...a}).build("0x3::token_transfers::offer_script",[],[t,n,s,r,i,o]),l=Oe.generateBCSTransaction(e,d);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async claimToken(e,t,n,s,r,o=0,i){const c=await new Ee(this.aptosClient,{sender:e.address(),...i}).build("0x3::token_transfers::claim_script",[],[t,n,s,r,o]),d=Oe.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async cancelTokenOffer(e,t,n,s,r,o=0,i){const c=await new Ee(this.aptosClient,{sender:e.address(),...i}).build("0x3::token_transfers::cancel_offer_script",[],[t,n,s,r,o]),d=Oe.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async directTransferToken(e,t,n,s,r,o,i=0,a){const d=await new Ee(this.aptosClient,{sender:e.address(),...a}).build("0x3::token::direct_transfer_script",[],[n,s,r,i,o]),l=new V.MultiAgentRawTransaction(d,[V.AccountAddress.fromHex(t.address())]),u=new V.Ed25519Signature(e.signBuffer($t.getSigningMessage(l)).toUint8Array()),h=new V.AccountAuthenticatorEd25519(new V.Ed25519PublicKey(e.signingKey.publicKey),u),p=new V.Ed25519Signature(t.signBuffer($t.getSigningMessage(l)).toUint8Array()),g=new V.AccountAuthenticatorEd25519(new V.Ed25519PublicKey(t.signingKey.publicKey),p),m=new V.TransactionAuthenticatorMultiAgent(h,[V.AccountAddress.fromHex(t.address())],[g]),y=Nt(new V.SignedTransaction(d,m));return(await this.aptosClient.submitSignedBCSTransaction(y)).hash}async directTransferTokenWithFeePayer(e,t,n,s,r,o,i,a=0,c){const l=await new Ee(this.aptosClient,{sender:e.address(),...c}).build("0x3::token::direct_transfer_script",[],[n,s,r,a,o]),u=new V.FeePayerRawTransaction(l,[V.AccountAddress.fromHex(t.address())],V.AccountAddress.fromHex(i.address())),h=new V.Ed25519Signature(e.signBuffer($t.getSigningMessage(u)).toUint8Array()),p=new V.AccountAuthenticatorEd25519(new V.Ed25519PublicKey(e.signingKey.publicKey),h),g=new V.Ed25519Signature(t.signBuffer($t.getSigningMessage(u)).toUint8Array()),m=new V.AccountAuthenticatorEd25519(new V.Ed25519PublicKey(t.signingKey.publicKey),g),y=new V.Ed25519Signature(i.signBuffer($t.getSigningMessage(u)).toUint8Array()),E=new V.AccountAuthenticatorEd25519(new V.Ed25519PublicKey(i.signingKey.publicKey),y),v=new V.TransactionAuthenticatorFeePayer(p,[V.AccountAddress.fromHex(t.address())],[m],{address:V.AccountAddress.fromHex(i.address()),authenticator:E}),w=Nt(new V.SignedTransaction(l,v));return(await this.aptosClient.submitSignedBCSTransaction(w)).hash}async optInTokenTransfer(e,t,n){const r=await new Ee(this.aptosClient,{sender:e.address(),...n}).build("0x3::token::opt_in_direct_transfer",[],[t]),o=Oe.generateBCSTransaction(e,r);return(await this.aptosClient.submitSignedBCSTransaction(o)).hash}async transferWithOptIn(e,t,n,s,r,o,i,a){const d=await new Ee(this.aptosClient,{sender:e.address(),...a}).build("0x3::token::transfer_with_opt_in",[],[t,n,s,r,o,i]),l=Oe.generateBCSTransaction(e,d);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async burnByCreator(e,t,n,s,r,o,i){const c=await new Ee(this.aptosClient,{sender:e.address(),...i}).build("0x3::token::burn_by_creator",[],[t,n,s,r,o]),d=Oe.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async burnByOwner(e,t,n,s,r,o,i){const c=await new Ee(this.aptosClient,{sender:e.address(),...i}).build("0x3::token::burn",[],[t,n,s,r,o]),d=Oe.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async mutateTokenProperties(e,t,n,s,r,o,i,a,c,d,l){const h=await new Ee(this.aptosClient,{sender:e.address(),...l}).build("0x3::token::mutate_token_properties",[],[t,n,s,r,o,i,a,c,d]),p=Oe.generateBCSTransaction(e,h);return(await this.aptosClient.submitSignedBCSTransaction(p)).hash}async getCollectionData(e,t){const s=(await this.aptosClient.getAccountResources(e)).find(a=>a.type==="0x3::token::Collections"),{handle:r}=s.data.collection_data,o={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:t};return await this.aptosClient.getTableItem(r,o)}async getTokenData(e,t,n){const s=e instanceof N?e.hex():e,r=await this.aptosClient.getAccountResource(s,"0x3::token::Collections"),{handle:o}=r.data.token_data,a={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:s,collection:t,name:n}},c=await this.aptosClient.getTableItem(o,a);return new Yl(c.collection,c.description,c.name,c.maximum,c.supply,c.uri,c.default_properties,c.mutability_config)}async getToken(e,t,n,s="0"){const r={creator:e instanceof N?e.hex():e,collection:t,name:n};return this.getTokenForAccount(e,{token_data_id:r,property_version:s})}async getTokenForAccount(e,t){const n=await this.aptosClient.getAccountResource(e instanceof N?e.hex():e,"0x3::token::TokenStore"),{handle:s}=n.data.tokens,r={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:t};try{const o=await this.aptosClient.getTableItem(s,r);return new eu(o.id,o.amount,o.token_properties)}catch(o){return(o==null?void 0:o.status)===404?{id:t,amount:"0",token_properties:new Io}:o}}},eo=class{constructor(e){this.assetType="0x1::fungible_asset::Metadata",this.provider=e}async transfer(e,t,n,s,r){const o=await this.generateTransfer(e,t,n,s,r);return await this.provider.signAndSubmitTransaction(e,o)}async getPrimaryBalance(e,t){const n={function:"0x1::primary_fungible_store::balance",type_arguments:[this.assetType],arguments:[N.ensure(e).hex(),N.ensure(t).hex()]},s=await this.provider.view(n);return BigInt(s[0])}async generateTransfer(e,t,n,s,r){return await new Ee(this.provider,{sender:e.address(),...r}).build("0x1::primary_fungible_store::transfer",[this.assetType],[N.ensure(t).hex(),N.ensure(n).hex(),s])}},ds={BOOLEAN:"bool",U8:"u8",U16:"u16",U32:"u32",U64:"u64",U128:"u128",U256:"u256",ADDRESS:"address",VECTOR:"vector<u8>",STRING:"string"},Yy=class{constructor(e){this.tokenType="0x4::token::Token",this.provider=e}async submitTransaction(e,t,n,s,r){const i=await new Ee(this.provider,{sender:e.address(),...r}).build(`0x4::aptos_token::${t}`,n,s),a=Oe.generateBCSTransaction(e,i);return(await this.provider.submitSignedBCSTransaction(a)).hash}async createCollection(e,t,n,s,r=gs,o,i){var a,c,d,l,u,h,p,g,m,y,E;return this.submitTransaction(e,"create_collection",[],[t,r,n,s,(a=o==null?void 0:o.mutableDescription)!=null?a:!0,(c=o==null?void 0:o.mutableRoyalty)!=null?c:!0,(d=o==null?void 0:o.mutableURI)!=null?d:!0,(l=o==null?void 0:o.mutableTokenDescription)!=null?l:!0,(u=o==null?void 0:o.mutableTokenName)!=null?u:!0,(h=o==null?void 0:o.mutableTokenProperties)!=null?h:!0,(p=o==null?void 0:o.mutableTokenURI)!=null?p:!0,(g=o==null?void 0:o.tokensBurnableByCreator)!=null?g:!0,(m=o==null?void 0:o.tokensFreezableByCreator)!=null?m:!0,(y=o==null?void 0:o.royaltyNumerator)!=null?y:0,(E=o==null?void 0:o.royaltyDenominator)!=null?E:1],i)}async mint(e,t,n,s,r,o=[],i=[],a=[],c){return this.submitTransaction(e,"mint",[],[t,n,s,r,o,i,Yr(a,i)],c)}async mintSoulBound(e,t,n,s,r,o,i=[],a=[],c=[],d){return this.submitTransaction(e,"mint_soul_bound",[],[t,n,s,r,i,a,Yr(c,a),o.address().hex()],d)}async burnToken(e,t,n,s){return this.submitTransaction(e,"burn",[n||this.tokenType],[N.ensure(t).hex()],s)}async freezeTokenTransafer(e,t,n,s){return this.submitTransaction(e,"freeze_transfer",[n||this.tokenType],[N.ensure(t).hex()],s)}async unfreezeTokenTransafer(e,t,n,s){return this.submitTransaction(e,"unfreeze_transfer",[n||this.tokenType],[N.ensure(t).hex()],s)}async setTokenDescription(e,t,n,s,r){return this.submitTransaction(e,"set_description",[s||this.tokenType],[N.ensure(t).hex(),n],r)}async setTokenName(e,t,n,s,r){return this.submitTransaction(e,"set_name",[s||this.tokenType],[N.ensure(t).hex(),n],r)}async setTokenURI(e,t,n,s,r){return this.submitTransaction(e,"set_uri",[s||this.tokenType],[N.ensure(t).hex(),n],r)}async addTokenProperty(e,t,n,s,r,o,i){return this.submitTransaction(e,"add_property",[o||this.tokenType],[N.ensure(t).hex(),n,ds[s],di(r,ds[s])],i)}async removeTokenProperty(e,t,n,s,r){return this.submitTransaction(e,"remove_property",[s||this.tokenType],[N.ensure(t).hex(),n],r)}async updateTokenProperty(e,t,n,s,r,o,i){return this.submitTransaction(e,"update_property",[o||this.tokenType],[N.ensure(t).hex(),n,ds[s],di(r,ds[s])],i)}async addTypedProperty(e,t,n,s,r,o,i){return this.submitTransaction(e,"add_typed_property",[o||this.tokenType,ds[s]],[N.ensure(t).hex(),n,r],i)}async updateTypedProperty(e,t,n,s,r,o,i){return this.submitTransaction(e,"update_typed_property",[o||this.tokenType,ds[s]],[N.ensure(t).hex(),n,r],i)}async transferTokenOwnership(e,t,n,s,r){const i=await new Ee(this.provider,{sender:e.address(),...r}).build("0x1::object::transfer",[s||this.tokenType],[N.ensure(t).hex(),N.ensure(n).hex()]),a=Oe.generateBCSTransaction(e,i);return(await this.provider.submitSignedBCSTransaction(a)).hash}async transfer(e,t){let n=t;if(n==null&&(n=(await this.provider.getTokenData(N.ensure(e.tokenAddress).hex())).current_token_datas_v2[0].is_fungible_v2),n){const o=e;return await new eo(this.provider).transfer(o.owner,o.tokenAddress,o.recipient,o.amount,o.extraArgs)}const s=e;return await this.transferTokenOwnership(s.owner,s.tokenAddress,s.recipient,s.tokenType,s.extraArgs)}async burnObject(e,t,n,s){const o=await new Ee(this.provider,{sender:e.address(),...s}).build("0x1::object::burn",[n||"0x1::object::ObjectCore"],[N.ensure(t).hex()]),i=Oe.generateBCSTransaction(e,o);return(await this.provider.submitSignedBCSTransaction(i)).hash}},li="0x1::aptos_account::transfer_coins",tu="0x1::coin::transfer",em=class{constructor(e){this.aptosClient=e}async transfer(e,t,n,s){var r,o,i;const a=((r=s==null?void 0:s.coinType)!=null?r:"").toString().includes("::");if(s!=null&&s.coinType&&!a&&fe.isValid(s.coinType)){console.warn("to transfer a fungible asset, use `FungibleAssetClient()` class for better support");const m=new nr({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(o=Xr[ni[this.aptosClient.nodeUrl]])!=null?o:this.aptosClient.nodeUrl});return await new eo(m).transfer(e,s==null?void 0:s.coinType,Ot(t),n)}const c=(i=s==null?void 0:s.coinType)!=null?i:Vr;let d;(s==null?void 0:s.createReceiverIfMissing)===void 0?d=li:d=s!=null&&s.createReceiverIfMissing?li:tu;const l=Ot(t),h=await new Ee(this.aptosClient,{sender:e.address(),...s}).build(d,[c],[l,n]),p=Oe.generateBCSTransaction(e,h);return(await this.aptosClient.submitSignedBCSTransaction(p)).hash}async checkBalance(e,t){var n,s,r;const o=((n=t==null?void 0:t.coinType)!=null?n:"").toString().includes("::");if(t!=null&&t.coinType&&!o&&fe.isValid(t.coinType)){console.warn("to check balance of a fungible asset, use `FungibleAssetClient()` class for better support");const l=new nr({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(s=Xr[ni[this.aptosClient.nodeUrl]])!=null?s:this.aptosClient.nodeUrl});return await new eo(l).getPrimaryBalance(Ot(e),t==null?void 0:t.coinType)}const a=`0x1::coin::CoinStore<${(r=t==null?void 0:t.coinType)!=null?r:Vr}>`,c=Ot(e),d=await this.aptosClient.getAccountResource(c,a);return BigInt(d.data.coin.value)}},tm=class extends Oe{constructor(e,t,n){if(super(e,n),!t)throw new Error("Faucet URL cannot be empty.");this.faucetUrl=t,this.config=n}async fundAccount(e,t,n=Id){const{data:s}=await Qn({url:this.faucetUrl,endpoint:"mint",body:null,params:{address:N.ensure(e).noPrefix(),amount:t},overrides:{...this.config},originMethod:"fundAccount"}),r=[];for(let o=0;o<s.length;o+=1){const i=s[o];r.push(this.waitForTransaction(i,{timeoutSecs:n}))}return await Promise.all(r),s}},ui={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c"},un=/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/,nu=new RegExp("^(?:(?<subdomain>[^.]+)\\.(?!apt$))?(?<domain>[^.]+)(?:\\.apt)?$"),nm=class{constructor(e,t){var n;if(this.provider=e,!ui[this.provider.network]&&!t)throw new Error("Error: For custom providers, you must pass in a contract address");this.contractAddress=(n=ui[this.provider.network])!=null?n:t}async getPrimaryNameByAddress(e){const n=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::ReverseLookupRegistryV1`)).data,{handle:s}=n.registry,r={key_type:"address",value_type:`${this.contractAddress}::domains::NameRecordKeyV1`,key:e};try{const o=await this.provider.getTableItem(s,r);return o.subdomain_name.vec[0]?`${o.subdomain_name.vec[0]}.${o.domain_name}`:o.domain_name}catch(o){if(o.status===404)return null;throw new Error(o)}}async getAddressByName(e){var t,n;const{domain:s,subdomain:r}=(n=(t=e.match(nu))==null?void 0:t.groups)!=null?n:{};if(!s)return null;const o=r?await this.getRegistrationForSubdomainName(s,r):await this.getRegistrationForDomainName(s);return o===null?null:o.target}async mintAptosName(e,t,n=1,s){if(t.match(un)===null)throw new mt(400,`Name ${t} is not valid`);const r=await this.getRegistrationForDomainName(t);if(r&&Math.ceil(Date.now()/1e3)<r.expirationTimestampSeconds)throw new mt(400,`Name ${t} is not available`);const i=await new Ee(this.provider.aptosClient,{sender:e.address(),...s}).build(`${this.contractAddress}::domains::register_domain`,[],[t,n]),a=Oe.generateBCSTransaction(e,i);return(await this.provider.submitSignedBCSTransaction(a)).hash}async mintAptosSubdomain(e,t,n,s,r){if(n.match(un)===null)throw new mt(400,`Domain name ${n} is not valid`);if(t.match(un)===null)throw new mt(400,`Subdomain name ${t} is not valid`);const o=await this.getRegistrationForSubdomainName(n,t);if(o&&Math.ceil(Date.now()/1e3)<o.expirationTimestampSeconds)throw new mt(400,`Name ${t}.${n} is not available`);const i=await this.getRegistrationForDomainName(n);if(i===null)throw new mt(400,`Domain name ${n} does not exist`);const a=Math.ceil(Date.now()/1e3);if(i.expirationTimestampSeconds<a)throw new mt(400,`Domain name ${n} expired`);const c=s||i.expirationTimestampSeconds;if(c<a)throw new mt(400,`Expiration for ${t}.${n} is before now`);const l=await new Ee(this.provider.aptosClient,{sender:e.address(),...r}).build(`${this.contractAddress}::domains::register_subdomain`,[],[t,n,c]),u=Oe.generateBCSTransaction(e,l);return(await this.provider.submitSignedBCSTransaction(u)).hash}async setSubdomainAddress(e,t,n,s,r){const o=fe.standardizeAddress(s);if(n.match(un)===null)throw new mt(400,`Name ${n} is not valid`);if(t.match(un)===null)throw new mt(400,`Name ${t} is not valid`);const a=await new Ee(this.provider.aptosClient,{sender:e.address(),...r}).build(`${this.contractAddress}::domains::set_subdomain_address`,[],[t,n,o]),c=Oe.generateBCSTransaction(e,a);return(await this.provider.submitSignedBCSTransaction(c)).hash}async initReverseLookupRegistry(e,t){const s=await new Ee(this.provider.aptosClient,{sender:e.address(),...t}).build(`${this.contractAddress}::domains::init_reverse_lookup_registry_v1`,[],[]),r=Oe.generateBCSTransaction(e,s);return(await this.provider.submitSignedBCSTransaction(r)).hash}async getRegistrationForDomainName(e){if(e.match(un)===null)return null;const n=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::NameRegistryV1`)).data,{handle:s}=n.registry,r={key_type:`${this.contractAddress}::domains::NameRecordKeyV1`,value_type:`${this.contractAddress}::domains::NameRecordV1`,key:{subdomain_name:{vec:[]},domain_name:e}};try{const o=await this.provider.getTableItem(s,r);return{target:o.target_address.vec.length===1?o.target_address.vec[0]:null,expirationTimestampSeconds:o.expiration_time_sec}}catch(o){if(o.status===404)return null;throw new Error(o)}}async getRegistrationForSubdomainName(e,t){if(e.match(un)===null||t.match(un)===null)return null;const s=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::NameRegistryV1`)).data,{handle:r}=s.registry,o={key_type:`${this.contractAddress}::domains::NameRecordKeyV1`,value_type:`${this.contractAddress}::domains::NameRecordV1`,key:{subdomain_name:{vec:[t]},domain_name:e}};try{const i=await this.provider.getTableItem(r,o);return{target:i.target_address.vec.length===1?i.target_address.vec[0]:null,expirationTimestampSeconds:i.expiration_time_sec}}catch(i){if(i.status===404)return null;throw new Error(i)}}},Tr=()=>Math.floor(Date.now()/1e3),su=class{constructor(e,t,n,s,r){this.lastUncommintedNumber=null,this.currentNumber=null,this.lock=!1,this.provider=e,this.account=t,this.maxWaitTime=n,this.maximumInFlight=s,this.sleepTime=r}async nextSequenceNumber(){for(;this.lock;)await Hs(this.sleepTime);this.lock=!0;let e=BigInt(0);try{if((this.lastUncommintedNumber===null||this.currentNumber===null)&&await this.initialize(),this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight){await this.update();const t=Tr();for(;this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight;)await Hs(this.sleepTime),Tr()-t>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`),await this.initialize()):await this.update()}e=this.currentNumber,this.currentNumber+=BigInt(1)}catch(t){console.error("error in getting next sequence number for this account",t)}finally{this.lock=!1}return e}async initialize(){const{sequence_number:e}=await this.provider.getAccount(this.account.address());this.currentNumber=BigInt(e),this.lastUncommintedNumber=BigInt(e)}async update(){const{sequence_number:e}=await this.provider.getAccount(this.account.address());return this.lastUncommintedNumber=BigInt(e),this.lastUncommintedNumber}async synchronize(){if(this.lastUncommintedNumber!==this.currentNumber){for(;this.lock;)await Hs(this.sleepTime);this.lock=!0;try{await this.update();const e=Tr();for(;this.lastUncommintedNumber!==this.currentNumber;)Tr()-e>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`),await this.initialize()):(await Hs(this.sleepTime),await this.update())}catch(e){console.error("error in synchronizing this account sequence number with the one on chain",e)}finally{this.lock=!1}}}},Do=class{constructor(){this.queue=[],this.pendingDequeue=[],this.cancelled=!1}enqueue(e){if(this.cancelled=!1,this.pendingDequeue.length>0){const t=this.pendingDequeue.shift();t==null||t.resolve(e);return}this.queue.push(e)}async dequeue(){return this.queue.length>0?Promise.resolve(this.queue.shift()):new Promise((e,t)=>{this.pendingDequeue.push({resolve:e,reject:t})})}isEmpty(){return this.queue.length===0}cancel(){this.cancelled=!0,this.pendingDequeue.forEach(async({reject:e})=>{e(new hi("Task cancelled"))}),this.pendingDequeue=[],this.queue.length=0}isCancelled(){return this.cancelled}pendingDequeueLength(){return this.pendingDequeue.length}},hi=class extends Error{},mc="fulfilled",ru=(e=>(e.TransactionSent="transactionSent",e.TransactionSendFailed="transactionsendFailed",e.TransactionExecuted="transactionExecuted",e.TransactionExecutionFailed="transactionexecutionFailed",e))(ru||{}),sm=class extends ti{constructor(e,t,n=30,s=100,r=10){super(),this.taskQueue=new Do,this.transactionsQueue=new Do,this.outstandingTransactions=new Do,this.sentTransactions=[],this.executedTransactions=[],this.provider=e,this.account=t,this.started=!1,this.accountSequnceNumber=new su(e,t,n,s,r)}async submitNextTransaction(){try{for(;;){if(this.transactionsQueue.isEmpty())return;const e=await this.accountSequnceNumber.nextSequenceNumber();if(e===null)return;const t=await this.generateNextTransaction(this.account,e);if(!t)return;const n=this.provider.submitSignedBCSTransaction(t);await this.outstandingTransactions.enqueue([n,e])}}catch(e){if(e instanceof hi)return;console.log(e)}}async processTransactions(){try{for(;;){const e=[],t=[];let[n,s]=await this.outstandingTransactions.dequeue();for(e.push(n),t.push(s);!this.outstandingTransactions.isEmpty();)[n,s]=await this.outstandingTransactions.dequeue(),e.push(n),t.push(s);const r=await Promise.allSettled(e);for(let o=0;o<r.length&&o<t.length;o+=1){const i=r[o];s=t[o],i.status===mc?(this.sentTransactions.push([i.value.hash,s,null]),this.emit("transactionSent",[this.sentTransactions.length,i.value.hash]),await this.checkTransaction(i,s)):(this.sentTransactions.push([i.status,s,i.reason]),this.emit("transactionsendFailed",[this.sentTransactions.length,i.reason]))}}}catch(e){if(e instanceof hi)return;console.log(e)}}async checkTransaction(e,t){const n=[];n.push(this.provider.waitForTransactionWithResult(e.value.hash,{checkSuccess:!0}));const s=await Promise.allSettled(n);for(let r=0;r<s.length;r+=1){const o=s[r];o.status===mc?(this.executedTransactions.push([o.value.hash,t,null]),this.emit("transactionExecuted",[this.executedTransactions.length,o.value.hash])):(this.executedTransactions.push([o.status,t,o.reason]),this.emit("transactionexecutionFailed",[this.executedTransactions.length,o.reason]))}}async push(e){await this.transactionsQueue.enqueue(e)}async generateNextTransaction(e,t){if(this.transactionsQueue.isEmpty())return;const n=await this.transactionsQueue.dequeue(),s=await this.provider.generateRawTransaction(e.address(),n,{providedSequenceNumber:t});return Oe.generateBCSTransaction(e,s)}async run(){try{for(;!this.taskQueue.isCancelled();)await(await this.taskQueue.dequeue())()}catch(e){throw new Error(e)}}start(){if(this.started)throw new Error("worker has already started");this.started=!0,this.taskQueue.enqueue(()=>this.submitNextTransaction()),this.taskQueue.enqueue(()=>this.processTransactions()),this.run()}stop(){if(this.taskQueue.isCancelled())throw new Error("worker has already stopped");this.started=!1,this.taskQueue.cancel()}},ou={};To(ou,{AptosErrorCode:()=>iu,MoveFunctionVisibility:()=>au,RoleType:()=>cu});var iu=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.STATE_VALUE_NOT_FOUND="state_value_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(iu||{}),au=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(au||{}),cu=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(cu||{}),du=(e=>(e.AccountAddress="account_address",e.TransactionVersion="transaction_version",e))(du||{}),lu=(e=>(e.AccountAddress="account_address",e.MinBlockHeight="min_block_height",e.NumDistinctVersions="num_distinct_versions",e))(lu||{}),uu=(e=>(e.AccountAddress="account_address",e.TransactionVersion="transaction_version",e))(uu||{}),hu=(e=>(e.Address="address",e.TransactionVersion="transaction_version",e))(hu||{}),fu=(e=>(e.BlockHeight="block_height",e.Epoch="epoch",e.FailedProposerIndices="failed_proposer_indices",e.Id="id",e.PreviousBlockVotesBitvec="previous_block_votes_bitvec",e.Proposer="proposer",e.Round="round",e.Timestamp="timestamp",e.Version="version",e))(fu||{}),pu=(e=>(e.ActivityType="activity_type",e.Amount="amount",e.BlockHeight="block_height",e.CoinType="coin_type",e.EntryFunctionIdStr="entry_function_id_str",e.EventAccountAddress="event_account_address",e.EventCreationNumber="event_creation_number",e.EventIndex="event_index",e.EventSequenceNumber="event_sequence_number",e.IsGasFee="is_gas_fee",e.IsTransactionSuccess="is_transaction_success",e.OwnerAddress="owner_address",e.StorageRefundAmount="storage_refund_amount",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(pu||{}),gu=(e=>(e.Amount="amount",e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.OwnerAddress="owner_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(gu||{}),yu=(e=>(e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.CreatorAddress="creator_address",e.Decimals="decimals",e.Name="name",e.SupplyAggregatorTableHandle="supply_aggregator_table_handle",e.SupplyAggregatorTableKey="supply_aggregator_table_key",e.Symbol="symbol",e.TransactionCreatedTimestamp="transaction_created_timestamp",e.TransactionVersionCreated="transaction_version_created",e))(yu||{}),mu=(e=>(e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.Supply="supply",e.TransactionEpoch="transaction_epoch",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(mu||{}),wu=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Description="description",e.DescriptionMutable="description_mutable",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Supply="supply",e.TableHandle="table_handle",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.UriMutable="uri_mutable",e))(wu||{}),bu=(e=>(e.Domain="domain",e.ExpirationTimestamp="expiration_timestamp",e.IsDeleted="is_deleted",e.LastTransactionVersion="last_transaction_version",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e))(bu||{}),Tu=(e=>(e.Domain="domain",e.ExpirationTimestamp="expiration_timestamp",e.IsDeleted="is_deleted",e.LastTransactionVersion="last_transaction_version",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e.TokenStandard="token_standard",e))(Tu||{}),vu=(e=>(e.Domain="domain",e.DomainWithSuffix="domain_with_suffix",e.ExpirationTimestamp="expiration_timestamp",e.IsActive="is_active",e.IsPrimary="is_primary",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e.TokenStandard="token_standard",e))(vu||{}),Au=(e=>(e.Amount="amount",e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e))(Au||{}),Su=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Description="description",e.DescriptionMutable="description_mutable",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Supply="supply",e.TableHandle="table_handle",e.UriMutable="uri_mutable",e))(Su||{}),xu=(e=>(e.CollectionId="collection_id",e.CollectionName="collection_name",e.CollectionUri="collection_uri",e.CreatorAddress="creator_address",e.DistinctTokens="distinct_tokens",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.SingleTokenUri="single_token_uri",e))(xu||{}),ku=(e=>(e.CollectionId="collection_id",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.CurrentSupply="current_supply",e.Description="description",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.MaxSupply="max_supply",e.MutableDescription="mutable_description",e.MutableUri="mutable_uri",e.TableHandleV1="table_handle_v1",e.TokenStandard="token_standard",e.TotalMintedV2="total_minted_v2",e.Uri="uri",e))(ku||{}),_u=(e=>(e.ActiveTableHandle="active_table_handle",e.InactiveTableHandle="inactive_table_handle",e.LastTransactionVersion="last_transaction_version",e.OperatorCommissionPercentage="operator_commission_percentage",e.StakingPoolAddress="staking_pool_address",e.TotalCoins="total_coins",e.TotalShares="total_shares",e))(_u||{}),Eu=(e=>(e.DelegationPoolAddress="delegation_pool_address",e.DelegatorAddress="delegator_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.PendingVoter="pending_voter",e.TableHandle="table_handle",e.Voter="voter",e))(Eu||{}),Bu=(e=>(e.DelegatorAddress="delegator_address",e.LastTransactionVersion="last_transaction_version",e.ParentTableHandle="parent_table_handle",e.PoolAddress="pool_address",e.PoolType="pool_type",e.Shares="shares",e.TableHandle="table_handle",e))(Bu||{}),Pu=(e=>(e.Amount="amount",e.AssetType="asset_type",e.IsFrozen="is_frozen",e.IsPrimary="is_primary",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.StorageId="storage_id",e.TokenStandard="token_standard",e))(Pu||{}),Iu=(e=>(e.AllowUngatedTransfer="allow_ungated_transfer",e.IsDeleted="is_deleted",e.LastGuidCreationNum="last_guid_creation_num",e.LastTransactionVersion="last_transaction_version",e.ObjectAddress="object_address",e.OwnerAddress="owner_address",e.StateKeyHash="state_key_hash",e))(Iu||{}),Uu=(e=>(e.LastTransactionVersion="last_transaction_version",e.OperatorAddress="operator_address",e.StakingPoolAddress="staking_pool_address",e.VoterAddress="voter_address",e))(Uu||{}),Ou=(e=>(e.DecodedKey="decoded_key",e.DecodedValue="decoded_value",e.IsDeleted="is_deleted",e.Key="key",e.KeyHash="key_hash",e.LastTransactionVersion="last_transaction_version",e.TableHandle="table_handle",e))(Ou||{}),Ru=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.DefaultProperties="default_properties",e.Description="description",e.DescriptionMutable="description_mutable",e.LargestPropertyVersion="largest_property_version",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Name="name",e.PayeeAddress="payee_address",e.PropertiesMutable="properties_mutable",e.RoyaltyMutable="royalty_mutable",e.RoyaltyPointsDenominator="royalty_points_denominator",e.RoyaltyPointsNumerator="royalty_points_numerator",e.Supply="supply",e.TokenDataIdHash="token_data_id_hash",e.UriMutable="uri_mutable",e))(Ru||{}),Lu=(e=>(e.CollectionId="collection_id",e.Description="description",e.IsFungibleV2="is_fungible_v2",e.LargestPropertyVersionV1="largest_property_version_v1",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.Supply="supply",e.TokenDataId="token_data_id",e.TokenName="token_name",e.TokenProperties="token_properties",e.TokenStandard="token_standard",e.TokenUri="token_uri",e))(Lu||{}),$u=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.OwnerAddress="owner_address",e.PropertyVersion="property_version",e.TableType="table_type",e.TokenDataIdHash="token_data_id_hash",e.TokenProperties="token_properties",e))($u||{}),qu=(e=>(e.Amount="amount",e.IsFungibleV2="is_fungible_v2",e.IsSoulboundV2="is_soulbound_v2",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.PropertyVersionV1="property_version_v1",e.StorageId="storage_id",e.TableTypeV1="table_type_v1",e.TokenDataId="token_data_id",e.TokenPropertiesMutatedV1="token_properties_mutated_v1",e.TokenStandard="token_standard",e))(qu||{}),ju=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionId="collection_id",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.FromAddress="from_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.PropertyVersion="property_version",e.TableHandle="table_handle",e.ToAddress="to_address",e.TokenDataId="token_data_id",e.TokenDataIdHash="token_data_id_hash",e))(ju||{}),Du=(e=>(e.Asc="ASC",e.Desc="DESC",e))(Du||{}),Fu=(e=>(e.Amount="amount",e.DelegatorAddress="delegator_address",e.EventIndex="event_index",e.EventType="event_type",e.PoolAddress="pool_address",e.TransactionVersion="transaction_version",e))(Fu||{}),Nu=(e=>(e.FirstTransactionVersion="first_transaction_version",e.StakingPoolAddress="staking_pool_address",e))(Nu||{}),zu=(e=>(e.DelegatorAddress="delegator_address",e.PoolAddress="pool_address",e))(zu||{}),Hu=(e=>(e.AccountAddress="account_address",e.CreationNumber="creation_number",e.Data="data",e.EventIndex="event_index",e.IndexedType="indexed_type",e.SequenceNumber="sequence_number",e.TransactionBlockHeight="transaction_block_height",e.TransactionVersion="transaction_version",e.Type="type",e))(Hu||{}),Mu=(e=>(e.Amount="amount",e.AssetType="asset_type",e.BlockHeight="block_height",e.EntryFunctionIdStr="entry_function_id_str",e.EventIndex="event_index",e.GasFeePayerAddress="gas_fee_payer_address",e.IsFrozen="is_frozen",e.IsGasFee="is_gas_fee",e.IsTransactionSuccess="is_transaction_success",e.OwnerAddress="owner_address",e.StorageId="storage_id",e.StorageRefundAmount="storage_refund_amount",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.Type="type",e))(Mu||{}),Cu=(e=>(e.AssetType="asset_type",e.CreatorAddress="creator_address",e.Decimals="decimals",e.IconUri="icon_uri",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.ProjectUri="project_uri",e.SupplyAggregatorTableHandleV1="supply_aggregator_table_handle_v1",e.SupplyAggregatorTableKeyV1="supply_aggregator_table_key_v1",e.Symbol="symbol",e.TokenStandard="token_standard",e))(Cu||{}),Gu=(e=>(e.Db="db",e.IsIndexerUp="is_indexer_up",e))(Gu||{}),Wu=(e=>(e.ChainId="chain_id",e))(Wu||{}),Ku=(e=>(e.Address="address",e.TransactionVersion="transaction_version",e))(Ku||{}),Ju=(e=>(e.BuyItNowPrice="buy_it_now_price",e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.CurrentBidPrice="current_bid_price",e.CurrentBidder="current_bidder",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.ListingId="listing_id",e.Marketplace="marketplace",e.Seller="seller",e.StartingBidPrice="starting_bid_price",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(Ju||{}),Vu=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.CollectionOfferId="collection_offer_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.ItemPrice="item_price",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Marketplace="marketplace",e.RemainingTokenAmount="remaining_token_amount",e.TokenStandard="token_standard",e))(Vu||{}),Xu=(e=>(e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.ListingId="listing_id",e.Marketplace="marketplace",e.Price="price",e.Seller="seller",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(Xu||{}),Qu=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Marketplace="marketplace",e.OfferId="offer_id",e.Price="price",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(Qu||{}),Zu=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.CollectionName="collection_name",e.ContractAddress="contract_address",e.CreatorAddress="creator_address",e.EntryFunctionIdStr="entry_function_id_str",e.EventIndex="event_index",e.EventType="event_type",e.FeeScheduleId="fee_schedule_id",e.Marketplace="marketplace",e.OfferOrListingId="offer_or_listing_id",e.Price="price",e.PropertyVersion="property_version",e.Seller="seller",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenName="token_name",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Zu||{}),Yu=(e=>(e.AnimationOptimizerRetryCount="animation_optimizer_retry_count",e.AssetUri="asset_uri",e.CdnAnimationUri="cdn_animation_uri",e.CdnImageUri="cdn_image_uri",e.CdnJsonUri="cdn_json_uri",e.ImageOptimizerRetryCount="image_optimizer_retry_count",e.JsonParserRetryCount="json_parser_retry_count",e.RawAnimationUri="raw_animation_uri",e.RawImageUri="raw_image_uri",e))(Yu||{}),eh=(e=>(e.NumActiveDelegator="num_active_delegator",e.PoolAddress="pool_address",e))(eh||{}),th=(e=>(e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last",e))(th||{}),nh=(e=>(e.LastSuccessVersion="last_success_version",e.LastUpdated="last_updated",e.Processor="processor",e))(nh||{}),sh=(e=>(e.NumVotes="num_votes",e.ProposalId="proposal_id",e.ShouldPass="should_pass",e.StakingPoolAddress="staking_pool_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.VoterAddress="voter_address",e))(sh||{}),rh=(e=>(e.DecodedKey="decoded_key",e.DecodedValue="decoded_value",e.Key="key",e.TableHandle="table_handle",e.TransactionVersion="transaction_version",e.WriteSetChangeIndex="write_set_change_index",e))(rh||{}),oh=(e=>(e.Handle="handle",e.KeyType="key_type",e.ValueType="value_type",e))(oh||{}),ih=(e=>(e.CoinAmount="coin_amount",e.CoinType="coin_type",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.EventAccountAddress="event_account_address",e.EventCreationNumber="event_creation_number",e.EventIndex="event_index",e.EventSequenceNumber="event_sequence_number",e.FromAddress="from_address",e.Name="name",e.PropertyVersion="property_version",e.ToAddress="to_address",e.TokenAmount="token_amount",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.TransferType="transfer_type",e))(ih||{}),ah=(e=>(e.AfterValue="after_value",e.BeforeValue="before_value",e.EntryFunctionIdStr="entry_function_id_str",e.EventAccountAddress="event_account_address",e.EventIndex="event_index",e.FromAddress="from_address",e.IsFungibleV2="is_fungible_v2",e.PropertyVersionV1="property_version_v1",e.ToAddress="to_address",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.Type="type",e))(ah||{}),ch=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.DefaultProperties="default_properties",e.Description="description",e.DescriptionMutable="description_mutable",e.LargestPropertyVersion="largest_property_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Name="name",e.PayeeAddress="payee_address",e.PropertiesMutable="properties_mutable",e.RoyaltyMutable="royalty_mutable",e.RoyaltyPointsDenominator="royalty_points_denominator",e.RoyaltyPointsNumerator="royalty_points_numerator",e.Supply="supply",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.UriMutable="uri_mutable",e))(ch||{}),dh=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Name="name",e.OwnerAddress="owner_address",e.PropertyVersion="property_version",e.TableHandle="table_handle",e.TableType="table_type",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(dh||{}),lh=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Name="name",e.PropertyVersion="property_version",e.TokenDataIdHash="token_data_id_hash",e.TokenProperties="token_properties",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(lh||{}),uh=(e=>(e.BlockHeight="block_height",e.EntryFunctionIdStr="entry_function_id_str",e.Epoch="epoch",e.ExpirationTimestampSecs="expiration_timestamp_secs",e.GasUnitPrice="gas_unit_price",e.MaxGasAmount="max_gas_amount",e.ParentSignatureType="parent_signature_type",e.Sender="sender",e.SequenceNumber="sequence_number",e.Timestamp="timestamp",e.Version="version",e))(uh||{});const Hb=Object.freeze(Object.defineProperty({__proto__:null,APTOS_COIN:Vr,AccountSequenceNumber:su,Account_Transactions_Select_Column:du,Address_Events_Summary_Select_Column:lu,Address_Version_From_Events_Select_Column:uu,Address_Version_From_Move_Resources_Select_Column:hu,AnsClient:nm,ApiError:mt,AptosAccount:Zr,AptosApiError:qi,AptosClient:Oe,AptosToken:Yy,BCS:Ld,Block_Metadata_Transactions_Select_Column:fu,CKDPriv:kd,COIN_TRANSFER:tu,CoinClient:em,Coin_Activities_Select_Column:pu,Coin_Balances_Select_Column:gu,Coin_Infos_Select_Column:yu,Coin_Supply_Select_Column:mu,Collection_Datas_Select_Column:wu,Current_Ans_Lookup_Select_Column:bu,Current_Ans_Lookup_V2_Select_Column:Tu,Current_Aptos_Names_Select_Column:vu,Current_Coin_Balances_Select_Column:Au,Current_Collection_Datas_Select_Column:Su,Current_Collection_Ownership_V2_View_Select_Column:xu,Current_Collections_V2_Select_Column:ku,Current_Delegated_Staking_Pool_Balances_Select_Column:_u,Current_Delegated_Voter_Select_Column:Eu,Current_Delegator_Balances_Select_Column:Bu,Current_Fungible_Asset_Balances_Select_Column:Pu,Current_Objects_Select_Column:Iu,Current_Staking_Pool_Voter_Select_Column:Uu,Current_Table_Items_Select_Column:Ou,Current_Token_Datas_Select_Column:Ru,Current_Token_Datas_V2_Select_Column:Lu,Current_Token_Ownerships_Select_Column:$u,Current_Token_Ownerships_V2_Select_Column:qu,Current_Token_Pending_Claims_Select_Column:ju,Cursor_Ordering:Du,Delegated_Staking_Activities_Select_Column:Fu,Delegated_Staking_Pools_Select_Column:Nu,Delegator_Distinct_Pool_Select_Column:zu,Events_Select_Column:Hu,FailedTransactionError:Vl,FaucetClient:tm,FungibleAssetClient:eo,Fungible_Asset_Activities_Select_Column:Mu,Fungible_Asset_Metadata_Select_Column:Cu,HexString:N,IndexerClient:ca,Indexer_Status_Select_Column:Gu,Ledger_Infos_Select_Column:Wu,Move_Resources_Select_Column:Ku,Network:Rd,NetworkToIndexerAPI:Xr,NetworkToNodeAPI:Od,Nft_Marketplace_V2_Current_Nft_Marketplace_Auctions_Select_Column:Ju,Nft_Marketplace_V2_Current_Nft_Marketplace_Collection_Offers_Select_Column:Vu,Nft_Marketplace_V2_Current_Nft_Marketplace_Listings_Select_Column:Xu,Nft_Marketplace_V2_Current_Nft_Marketplace_Token_Offers_Select_Column:Qu,Nft_Marketplace_V2_Nft_Marketplace_Activities_Select_Column:Zu,Nft_Metadata_Crawler_Parsed_Asset_Uris_Select_Column:Yu,NodeAPIToNetwork:ni,Num_Active_Delegator_Per_Pool_Select_Column:eh,Order_By:th,Processor_Status_Select_Column:nh,PropertyMap:Io,PropertyValue:da,Proposal_Votes_Select_Column:sh,Provider:nr,TRANSFER_COINS:li,Table_Items_Select_Column:rh,Table_Metadatas_Select_Column:oh,TokenClient:Zy,TokenTypes:Zl,Token_Activities_Select_Column:ih,Token_Activities_V2_Select_Column:ah,Token_Datas_Select_Column:ch,Token_Ownerships_Select_Column:dh,Tokens_Select_Column:lh,TransactionBuilder:$t,TransactionBuilderABI:Kl,TransactionBuilderEd25519:jr,TransactionBuilderMultiEd25519:Wl,TransactionBuilderRemoteABI:Ee,TransactionWorker:sm,TransactionWorkerEvents:ru,TxnBuilderTypes:V,TypeTagParser:Ps,Types:ou,User_Transactions_Select_Column:uh,WaitForTransactionError:Jl,ansContractsMap:ui,aptosRequest:ji,argToTransactionArgument:Gl,derivePath:Ed,deserializePropertyMap:la,deserializeValueBasedOnTypeTag:Ql,ensureBigInt:ts,ensureBoolean:ia,ensureNumber:es,get:ut,getAddressFromAccountOrAddress:Ot,getMasterKeyFromSeed:xd,getPropertyType:Uo,getPropertyValueRaw:Yr,getPublicKey:Xg,getSinglePropertyValueRaw:di,isValidPath:_d,nameComponentPattern:un,namePattern:nu,post:Qn,serializeArg:Po},Symbol.toStringTag,{value:"Module"}));var to={},rm={get exports(){return to},set exports(e){to=e}},no={},om={get exports(){return no},set exports(e){no=e}},wc;function im(){return wc||(wc=1,function(e,t){(function(n,s){e.exports=s()})(Ns,function(){var n=n||function(s,r){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof Ns<"u"&&Ns.crypto&&(o=Ns.crypto),!o&&typeof Vh=="function")try{o=af}catch{}var i=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(w){var _;return v.prototype=w,_=new v,v.prototype=null,_}}(),c={},d=c.lib={},l=d.Base=function(){return{extend:function(v){var w=a(this);return v&&w.mixIn(v),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var w in v)v.hasOwnProperty(w)&&(this[w]=v[w]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=d.WordArray=l.extend({init:function(v,w){v=this.words=v||[],w!=r?this.sigBytes=w:this.sigBytes=v.length*4},toString:function(v){return(v||p).stringify(this)},concat:function(v){var w=this.words,_=v.words,I=this.sigBytes,M=v.sigBytes;if(this.clamp(),I%4)for(var F=0;F<M;F++){var X=_[F>>>2]>>>24-F%4*8&255;w[I+F>>>2]|=X<<24-(I+F)%4*8}else for(var te=0;te<M;te+=4)w[I+te>>>2]=_[te>>>2];return this.sigBytes+=M,this},clamp:function(){var v=this.words,w=this.sigBytes;v[w>>>2]&=4294967295<<32-w%4*8,v.length=s.ceil(w/4)},clone:function(){var v=l.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var w=[],_=0;_<v;_+=4)w.push(i());return new u.init(w,v)}}),h=c.enc={},p=h.Hex={stringify:function(v){for(var w=v.words,_=v.sigBytes,I=[],M=0;M<_;M++){var F=w[M>>>2]>>>24-M%4*8&255;I.push((F>>>4).toString(16)),I.push((F&15).toString(16))}return I.join("")},parse:function(v){for(var w=v.length,_=[],I=0;I<w;I+=2)_[I>>>3]|=parseInt(v.substr(I,2),16)<<24-I%8*4;return new u.init(_,w/2)}},g=h.Latin1={stringify:function(v){for(var w=v.words,_=v.sigBytes,I=[],M=0;M<_;M++){var F=w[M>>>2]>>>24-M%4*8&255;I.push(String.fromCharCode(F))}return I.join("")},parse:function(v){for(var w=v.length,_=[],I=0;I<w;I++)_[I>>>2]|=(v.charCodeAt(I)&255)<<24-I%4*8;return new u.init(_,w)}},m=h.Utf8={stringify:function(v){try{return decodeURIComponent(escape(g.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return g.parse(unescape(encodeURIComponent(v)))}},y=d.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var w,_=this._data,I=_.words,M=_.sigBytes,F=this.blockSize,X=F*4,te=M/X;v?te=s.ceil(te):te=s.max((te|0)-this._minBufferSize,0);var we=te*F,be=s.min(we*4,M);if(we){for(var xe=0;xe<we;xe+=F)this._doProcessBlock(I,xe);w=I.splice(0,we),_.sigBytes-=be}return new u.init(w,be)},clone:function(){var v=l.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});d.Hasher=y.extend({cfg:l.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(v){return function(w,_){return new v.init(_).finalize(w)}},_createHmacHelper:function(v){return function(w,_){return new E.HMAC.init(v,_).finalize(w)}}});var E=c.algo={};return c}(Math);return n})}(om)),no}var bc;function am(){return bc||(bc=1,function(e,t){(function(n,s){e.exports=s(im())})(Ns,function(n){return function(s){var r=n,o=r.lib,i=o.WordArray,a=o.Hasher,c=r.algo,d=[],l=[];(function(){function p(E){for(var v=s.sqrt(E),w=2;w<=v;w++)if(!(E%w))return!1;return!0}function g(E){return(E-(E|0))*4294967296|0}for(var m=2,y=0;y<64;)p(m)&&(y<8&&(d[y]=g(s.pow(m,1/2))),l[y]=g(s.pow(m,1/3)),y++),m++})();var u=[],h=c.SHA256=a.extend({_doReset:function(){this._hash=new i.init(d.slice(0))},_doProcessBlock:function(p,g){for(var m=this._hash.words,y=m[0],E=m[1],v=m[2],w=m[3],_=m[4],I=m[5],M=m[6],F=m[7],X=0;X<64;X++){if(X<16)u[X]=p[g+X]|0;else{var te=u[X-15],we=(te<<25|te>>>7)^(te<<14|te>>>18)^te>>>3,be=u[X-2],xe=(be<<15|be>>>17)^(be<<13|be>>>19)^be>>>10;u[X]=we+u[X-7]+xe+u[X-16]}var Ce=_&I^~_&M,Ne=y&E^y&v^E&v,Xe=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),Yt=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),it=F+Yt+Ce+l[X]+u[X],yt=Xe+Ne;F=M,M=I,I=_,_=w+it|0,w=v,v=E,E=y,y=it+yt|0}m[0]=m[0]+y|0,m[1]=m[1]+E|0,m[2]=m[2]+v|0,m[3]=m[3]+w|0,m[4]=m[4]+_|0,m[5]=m[5]+I|0,m[6]=m[6]+M|0,m[7]=m[7]+F|0},_doFinalize:function(){var p=this._data,g=p.words,m=this._nDataBytes*8,y=p.sigBytes*8;return g[y>>>5]|=128<<24-y%32,g[(y+64>>>9<<4)+14]=s.floor(m/4294967296),g[(y+64>>>9<<4)+15]=m,p.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});r.SHA256=a._createHelper(h),r.HmacSHA256=a._createHmacHelper(h)}(Math),n.SHA256})}(rm)),to}var cm=am();const dm=Xh(cm),lm=-443636;function Mb(e,t){const n=um(e),s=(n-lm)%t;return s>t/2?n-s+t:n-s}const hh=new se("1.0001");function um(e){return e.log(hh).toDP(0,se.ROUND_HALF_UP).toNumber()}function Cb(e){return hh.pow(e)}function Dr(e,t,n){const s=Math.abs(e)%t;return e>0?s>t/2||n&&t<=2?e+t-s:e-s:s>t/2?e-t+s:e+s}function hm(){const e=j.Aptos.liquidswapDeployer,t={rpcUrl:localStorage.getItem("Aptos-currentRpclocal4")||j.Aptos.rpcUrl,fraphQLUrl:j.Aptos.fraphQLUrl,networkOptions:{nativeToken:"0x1::aptos_coin::AptosCoin",launchpad:{cetusLaunchpad:j.Aptos.Launchpad,crowdCoin:j.Aptos.LaunchpadCrowdCoin},simulationAccount:{pubkey:j.Aptos.accountPublicKey,address:j.Aptos.accountAddress},modules:{LiquidswapDeployer:e,ClmmIntegrate:j.Aptos.clmmIntegrate,FetcherDeployer:j.Aptos.fetcher,TokenDeployer:j.Aptos.TokenDeployer,IntegerMate:j.Aptos.IntegerMate}}},n=new Zh(t),s=Si(),r=Jh(),o=jn(()=>r),i=jn(()=>o.value.currentExplorer),{$notify:a}=Dn(),c=B=>{const{$notify:R}=Dn();R.success({key:B.hash+"loading",icon:Y("img",{class:{"notify-icon":!0,"loading-animate":!0},src:o.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:B.title},null)]),description:Y("div",{class:"notification-title"},[Y("div",{class:"notification-text",innerHTML:ft.global.t("newAdd.confirmingTransaction")},null),Y("a",{href:Mr(i.value,"tx",B.hash),target:"_blank",innerHTML:ft.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},d=B=>{a.success({icon:Y("svg",{class:{icon:!0},"aria-hidden":!0},[Y("use",{"xlink:href":"#icon-icon-change1"})]),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:`${B.title} `+ft.global.t("newAdd.success")},null)]),description:Y("div",{class:"notification-title"},[Y("div",{class:"notification-text",innerHTML:B.desc},null),Y("a",{href:Mr(i.value,"tx",B.hash),target:"_blank",innerHTML:ft.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},l=B=>{a.error({icon:Y("svg",{class:{icon:!0},"aria-hidden":!0},[Y("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:`${B} `+ft.global.t("newAdd.failed")},null)]),description:ft.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},u=async(B,R=!1)=>{const D=await n.client.waitForTransactionWithResult(B.hash);if(console.log("watchTransaction###res###",D),D&&D.success){a.close(B.hash+"loading"),console.log("watchTransaction#####success"),d(B);const z={walletAddress:s.address,chainName:"Aptos",...B,...D,date:new Date().getTime()+6048e5};return r.setTransactionList(z),R?{status:!0,nftInfo:D.events.filter(ne=>ne.type.includes("CreateTokenDataEvent"))}:!0}else{if(D&&!D.success)return a.close(B.hash+"loading"),console.log("watchTransaction#####error"),l(B.title),!1;console.log("watchTransaction#####one more"),setTimeout(()=>u(B,R),3e3)}},h=async(B,R=!1)=>{const D=await n.client.waitForTransactionWithResult(B.hash);if(console.log("watchTransaction###res###",D),D&&D.success){console.log("watchTransaction#####success");const z={walletAddress:s.address,chainName:"Aptos",...B,...D,date:new Date().getTime()+6048e5};r.setTransactionList(z)}},p=async B=>{try{const R=await n.Resources.getCoinStores(B),D=[];return R.forEach(z=>{let W="";z.coinAddress.includes("0x0000000000000000000000000000000000000000000000000000000000000001")?W=z.coinAddress.replace(/0x0000000000000000000000000000000000000000000000000000000000000001/,"0x1"):W=z.coinAddress,D.push({...z,coinAddress:W})}),D}catch{return[]}},g=async B=>{try{s.setLoading(!0);const R=await p(B),D={};R.forEach(z=>{const W=z?z.coin.value:"0";D[z.coinAddress]={...z,balance:W}}),console.log("1212###assets####",D),s.setAssets(D),s.setLoading(!1)}catch(R){console.log("getAccount##error###",R),s.setLoading(!1),s.setAssets({})}},m=async()=>{const B={pubkey:Ot(j.Aptos.accountPublicKey),address:Ot(j.Aptos.accountAddress)},R=await n.Token.getAllRegisteredTokenList(B);return console.log("0215####tokenList####",R),R},y=async(B,R,D)=>n.Resources.getPoolState(B,R,D),E=async B=>{const R={pubkey:Ot(j.Aptos.accountPublicKey),address:Ot(j.Aptos.accountAddress)};return await n.Token.getOwnerWarpPoolList(j.Aptos.TokenDeployer,R)},v=async B=>await n.Resources.getPool(B);return{setTransations:h,showTransitionPending:c,showTransitionSuccess:d,showTransitionError:l,watchTransaction:u,getAccount:g,getPoolState:y,getPools:async B=>await n.Resources.getPools(B),getPool:v,registerCoin:B=>({function:"0x1::managed_coin::register",type_arguments:[B],arguments:[],type:"entry_function_payload"}),estLiquidityAndcoinAmountFromOneAmounts:B=>{console.log("estLiquidityAndcoinAmountFromOneAmounts###params####",B);const{tokenA:R,tokenB:D,lowerTick:z,upperTick:W,coinAmount:ee,iscoinA:ne,roundUp:ae,slippage:pe,curSqrtPrice:ye}=B,ue=an.estLiquidityAndcoinAmountFromOneAmounts(z,W,ee,ne,ae,pe,ye),he=R.decimals,qe=D.decimals,{tokenMaxA:je,tokenMaxB:Ge,liquidityAmount:We}=ue;return{tokenMaxAOrigin:je.toString(),tokenMaxBOrigin:Ge.toString(),tokenMaxA:_e(je.toString(),he),tokenMaxB:_e(Ge.toString(),qe),liquidityAmount:We}},getCoinAmountFromLiquidity:B=>{const{pool:R,position:D,roundUp:z}=B,W=Number(D.tick_lower_index),ee=Number(D.tick_upper_index),ne=Wt.tickIndexToSqrtPriceX64(W),ae=Wt.tickIndexToSqrtPriceX64(ee),pe=an.getCoinAmountFromLiquidity(new de(D.liquidity),new de(R.current_sqrt_price),ne,ae,z),ye=_e(pe.coinA.toString(),R.coinA.decimals),ue=_e(pe.coinB.toString(),R.coinB.decimals);return{coinaAmount:ye,coinbAmount:ue}},getAddLiquidityTransactionPayload:async B=>{const{pool:R,amount:D,fix_amount_a:z,roundUp:W,tick_lower:ee,tick_upper:ne,index:ae,slippage:pe}=B;console.log(B,"===>params411");const ye=await v(R.poolAddress),ue=z?Ze(D,R.token_a.decimals):Ze(D,R.token_b.decimals),he=Wt.sqrtPriceX64ToTickIndex(new de(ye.current_sqrt_price));let qe,je;if(he>=ee&&he<=ne){const We=an.estLiquidityAndcoinAmountFromOneAmounts(ee,ne,new de(ue.toString()),z,W,pe,new de(ye.current_sqrt_price));qe=z?ue.toNumber():We.tokenMaxA.toNumber(),je=z?We.tokenMaxB.toNumber():ue.toNumber()}else he>ne?(qe=0,je=ue.toNumber()):he<ee&&(qe=ue.toNumber(),je=0);return n.Position.createAddLiquidityTransactionPayload({pool:R.poolAddress,coinTypeA:R.token_a.address,coinTypeB:R.token_b.address,amount_a:qe,amount_b:je,fix_amount_a:z,tick_lower:ee,tick_upper:ne,is_open:!ae,index:ae})},getRemoveLiquidityTransactionPayload:async B=>{const{pool:R,coinTypeA:D,coinTypeB:z,coinTypeC:W,coinTypeD:ee,coinTypeE:ne,position:ae,delta_liquidity:pe,rewards_num:ye}=B;console.log("getRemoveLiquidityTransactionPayload####delta_liquidity#####",pe.toString());const ue=await v(R.poolAddress),he={...R,...ue},qe=Number(ae.tick_lower_index),je=Number(ae.tick_upper_index),Ge=Wt.tickIndexToSqrtPriceX64(qe),We=Wt.tickIndexToSqrtPriceX64(je),Gt=an.getCoinAmountFromLiquidity(pe,new de(he.current_sqrt_price),Ge,We,!0),on=cs(Gt.coinA.toString()).mul(cs(1-B.slippage/100)),An=cs(Gt.coinB.toString()).mul(cs(1-B.slippage/100));return await n.Position.removeLiquidityTransactionPayload({pool:R.poolAddress,coinTypeA:D,coinTypeB:z,coinTypeC:W,coinTypeD:ee,coinTypeE:ne,delta_liquidity:pe,min_amount_a:Number(Ue(on.toString(),0)),min_amount_b:Number(Ue(An.toString(),0)),pos_index:B.position.index,is_close:!1,rewards_num:ye})},getCollectFeeTransactionPayload:async B=>{console.log("1130###getCollectFeeTransactionPayload###params",{pool:B.pool.poolAddress,coinTypeA:B.pool.token_a.address,coinTypeB:B.pool.token_b.address,pos_index:B.position.index});const R=await n.Position.collectFeeTransactionPayload({pool:B.pool.poolAddress,coinTypeA:B.pool.token_a.address,coinTypeB:B.pool.token_b.address,pos_index:B.position.index});return console.log("1130###getCollectFeeTransactionPayload###result##",R),R},getPositionList:async(B,R)=>{let D=0;if(j.Aptos.network==="mainnet"){let z,W=[];do{const ne={operationName:"AccountTokensData",variables:{owner_address:B,limit:100,offset:D},query:`query AccountTokensData($owner_address: String, $limit: Int, $offset: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
    limit: $limit
    offset: $offset
  ) {
    token_data_id_hash
 creator_address
 name
    collection_name
  table_type
    property_version
    amount
    __typename
  }
}`},ae=await $fetch("https://indexer.mainnet.aptoslabs.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)});z=ae&&ae.data&&ae.data.current_token_ownerships||[],W=[...W,...z],D+=z.length,console.log(" ~ file: useAptos.ts:413 ~ getPositionList ~ current_token_ownerships:",z.length)}while(z&&z.length==100);console.log("###list",W);const ee=[];for(let ne=0;ne<W.length;ne++){const ae=W[ne],pe=R[tf(ae.creator_address)];if(console.log(pe,"##pool"),pe){const ye=ae.name.split("-")[1],ue=pe.positions_handle;console.log(" ~ file: useAptos.ts:424 ~ getPositionList ~ positionsHandle:",ue),console.log(" ~ file: useAptos.ts:425 ~ getPositionList ~ positinIndex:",ye);const he=await n.Resources.getPositionInfoByIndex(ue,ye);ee.push({...he,tokenName:ae.name})}}return console.log("0221###aptos###getPositionList###",ee),ee}else{const z=Object.values(R);console.log(z,"###poolList");const W=await n.Resources.getPositionList(B,z);return console.log("0221###aptos###getPositionList###list###",W),W}},getPositionInfo:async(B,R,D,z="")=>({...await n.Resources.getPositionInfo(B,D),tokenName:D,collectionName:R}),getSwapTransactionPayload:async B=>{const{pool:R,a2b:D,byAmountIn:z,amount:W,slippage:ee}=B,ne=R.poolAddress||R.address,ae=R.token_a.decimals,pe=R.token_b.decimals,ye=await v(R.address);let ue;D&&z||!D&&!z?ue=Ze(W,ae):ue=Ze(W,pe);const he=await n.Swap.preswap({pool:ye,decimalsA:ae,decimalsB:pe,a2b:D,by_amount_in:z,amount:ue.toString()});console.log("1130###getSwapTransactionPayload###preSwapRes###",he),console.log("1130###getSwapTransactionPayload###preSwapRes.estimatedAmountOut###",he.estimatedAmountOut.toString()),console.log("1130###getSwapTransactionPayload###preSwapRes.estimatedAmountIn###",he.estimatedAmountIn.toString());const qe=cs(he.estimatedAmountOut.toString()),je=cs(he.estimatedAmountIn.toString()),Ge=z?qe.sub(qe.mul(ee)):je.add(je.mul(ee));console.log("1130###amountLimit####",Ge.toString()),console.log("1130###swap##params###",{pool_addr:ne,coinTypeA:R.token_a.address,coinTypeB:R.token_b.address,a_to_b:he.aToB,by_amount_in:he.byAmountIn,amount:he.amount.toString(),amount_limit:Ue(Ge.toString(),0)||""});const We=n.Swap.createSwapTransactionPayload({pool_addr:ne,coinTypeA:R.token_a.address,coinTypeB:R.token_b.address,a_to_b:he.aToB,by_amount_in:he.byAmountIn,amount:he.amount.toString(),amount_limit:Ue(Ge.toString(),0)||"",partner:""});return console.log("1130###swap##result###",We),We},getCoin:B=>({type:"entry_function_payload",function:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet",arguments:[],type_arguments:[]}),preSwap:async B=>{const{pool:R,a2b:D,byAmountIn:z,amount:W}=B;console.log(B,"===>params");const ee=R.coinA.decimals,ne=R.coinB.decimals;let ae=R;R.coinTypeA||(ae={...R,poolAddress:R.address,coinTypeA:R.coinA.address,coinTypeB:R.coinB.address});let pe;D&&z||!D&&!z?pe=Ze(W,ee):pe=Ze(W,ne);const ye=await n.Swap.preswap({pool:ae,decimalsA:ee,decimalsB:ne,a2b:D,by_amount_in:z,amount:pe.toString()});return{...ye,estimatedAmountIn:ps(_e(ye.estimatedAmountIn.toString(),D?ee:ne),D?ee:ne),estimatedAmountOut:ps(_e(ye.estimatedAmountOut.toString(),D?ne:ee),D?ne:ee),priceImpactPct:Ue(ye.priceImpactPct,2)}},getTicks:async B=>{try{return{list:await n.Fetcher.fetchTicks({pool:B.poolAddress,coinTypeA:B.coinTypeA,coinTypeB:B.coinTypeB}),address:B.poolAddress}}catch(R){console.log("getTicks Error###",R)}},TickMath:Wt,TickUtil:Yh,ClmmPoolUtil:an,getNearestTickByTick:Dr,getTickDataFromUrlData:ef,getCollectFeesQuote:async B=>{console.log(B,"params====>");const{pool:R,position:D,tickLowerData:z,tickUpperData:W}=B,ee=nf({clmmpool:R,position:D,tickLower:z,tickUpper:W}),ne=_e(ee.feeOwedA.toString(),R.token_a.decimals),ae=_e(ee.feeOwedB.toString(),R.token_b.decimals);return console.log("0118###useApots###result.feeOwedA.toString()###",ee.feeOwedA.toString()),console.log("0118###useApots###result.feeOwedB.toString()###",ee.feeOwedB.toString()),console.log("0118###useApots###feeOwedA###",ne),console.log("0118###useApots###feeOwedB###",ae),{feeOwedA:Number(ne)>99999999999||Number(ne)<0?"0":ne,feeOwedB:Number(ae)>99999999999||Number(ae)<0?"0":ae}},mintCoin:B=>({function:`${j.Aptos.faucetObjectId}::coin::mint`,type_arguments:[`${j.Aptos.faucetObjectId}::coin::${B.name}`],arguments:[B.amount],type:"entry_function_payload"}),getNftHash:B=>{const R=`${B.creator}::${B.collection}::${B.name}`;return dm(R).toString()},getCollectRewarderTransactionPayload:B=>n.Rewarder.collectPoolRewarderTransactionPayload(B),getPosRewardersAmount:async B=>{console.log(JSON.stringify(B),"=====>params792");const{poolAddress:R,positionName:D,tickLowerData:z,tickUpperData:W}=B;return await n.Rewarder.posRewardersAmount(R,D,z,W)},getTokenList:m,getTickDataByIndex:async(B,R)=>(console.log(B,R,"getTickDataByIndex"),await n.Resources.getTickDataByIndex(B,R)),initSwapRouter:async B=>{n.Router.addPathProvider(B),await n.Router.setCoinList({pubkey:Ot(j.Aptos.accountPublicKey),address:Ot(j.Aptos.accountAddress)}),await n.Router.loadGraph()},getSwapRouter:async(B,R)=>await n.Router.price(B,R),getEstPositionAPRWithDelta:async(B,R,D,z,W,ee,ne,ae,pe,ye,ue,he,qe,je,Ge,We,Gt,on,An,Cn,Et,Ma,Ca,f)=>await sf(B,R,D,z,W,ee,ne,ae,pe,ye,ue,he,qe,je,Ge,We,Gt,on,An,Cn,Et,Ma,Ca,f),getPriceImpactPct:(B,R,D)=>{const z=Wt.sqrtPriceX64ToPrice(new de(B.current_sqrt_price),B.coinA.decimals,B.coinB.decimals).toNumber(),W=D?z:1/z,ee=Math.abs(W-Number(R))/Number(W)*100;return Number(Ue(ee,2))},getLpList:E,getEstPositionAPRWithMulti:async(B,R,D,z)=>await rf(B,R,D,z),getCreatPoolTransactionPayload:async B=>{const{coinTypeA:R,coinTypeB:D,tick_lower:z,tick_upper:W,tick_spacing:ee,initialize_sqrt_price:ne,max_amount_a:ae,max_amount_b:pe,slippage:ye,fix_amount_a:ue,decimalsA:he,decimalsB:qe,liquidityInput:je}=B;console.log(B,"params===>");const Ge=ue?Ze(ae,he):Ze(pe,qe);console.log(Ge,"===>coinAmount");const We=Wt.sqrtPriceX64ToTickIndex(new de(ne));let Gt,on;const An=Wt.tickIndexToSqrtPriceX64(z),Cn=Wt.tickIndexToSqrtPriceX64(W);console.log(An,"===>minPriceX64"),console.log(Cn,"===>maxPriceX64");let Et;return We>z&&We<W?(Et=an.estLiquidityAndcoinAmountFromOneAmounts(z,W,new de(Ge.toString()),ue,!0,ye,new de(ne)),Gt=ue?Ge.toNumber():Et.tokenMaxA.toNumber(),on=ue?Et.tokenMaxB.toNumber():Ge.toNumber()):We>=W?(Et=Ka(An,Cn,new de(Ge.toString())),Gt=new de(je.tokenMaxA*Math.pow(10,he)),on=new de(je.tokenMaxB*Math.pow(10,qe))):We<=z&&(Et=Wa(An,Cn,new de(Ge.toString())),Gt=new de(je.tokenMaxA*Math.pow(10,he)),on=new de(je.tokenMaxB*Math.pow(10,qe))),console.log(Et,"===>preAddResult"),await n.Pool.creatPoolTransactionPayload({coinTypeA:R,coinTypeB:D,tick_spacing:ee,initialize_sqrt_price:new de(ne),uri:"",delta_liquidity:We>z&&We<W?Et.liquidityAmount:Et,max_amount_a:Gt,max_amount_b:on,tick_lower:z,tick_upper:W},!0)},getTokenListByCoinType:async()=>await n.Token.getTokenListByCoinType("",0,99999),getPoolImmutables:async()=>await n.Resources.getPoolImmutables(),estimateLiquidityForCoinA:Wa,estimateLiquidityForCoinB:Ka,getTokenBySymbol:async(B,R)=>{if(!R)return null;let D=null;for(const z in B){const W=B[z];if(W.address.toUpperCase()===R.toUpperCase()){D=W;break}}return D},estCoinAmountsFromTotalAmount:B=>{const{lowerTick:R,upperTick:D,decimalsA:z,decimalsB:W,curSqrtPrice:ee,totalAmount:ne,tokenPriceA:ae,tokenPriceB:pe}=B;console.log(JSON.stringify({...B,curSqrtPrice:ee.toString()}),"params===>");const ye=an.estCoinAmountsFromTotalAmount(R,D,ee,ne,ae,pe);console.log("coinAmounts: ",ye);const ue=Cr(ye.amountA.toFixed(z,se.ROUND_UP).toString(),z),he=Cr(ye.amountB.toFixed(W,se.ROUND_UP).toString(),W),qe={coinA:new de(ue),coinB:new de(he)};return{amountA:_e(ue.toString(),z),amountB:_e(he.toString(),W),tokenAmountsInfo:qe}},getCreateAddLiquidityPayload:async B=>{const{curSqrtPrice:R,tickLower:D,tickUpper:z,tokenAmounts:W,pool:ee,slippage:ne}=B;console.log(JSON.stringify(B),"####getCreateAddLiquidityPayload 1593");const ae=an.estimateLiquidityFromcoinAmounts(R,D,z,W),pe=new se(W.coinA.toString()).mul(1+ne),ye=new se(W.coinB.toString()).mul(1+ne),ue={coinTypeA:ee.coinTypeA,coinTypeB:ee.coinTypeB,tick_lower:D,tick_upper:z,pool:ee.address,delta_liquidity:ae,max_amount_a:se.ceil(pe).toString(),max_amount_b:se.ceil(ye).toString(),is_open:!0,index:0};return console.log(JSON.stringify(ue),"==>addLiquidityPayloadParams"),await n.Position.createAddLiquidityTransactionPayload(ue)},calculateDepositRatioFixTokenA:(B,R,D)=>an.calculateDepositRatioFixTokenA(B,R,D)}}function fm(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<e.length;s++){var r=e.charAt(s),o=r.charCodeAt(0);if(t[o]!==255)throw new TypeError(r+" is ambiguous");t[o]=s}var i=e.length,a=e.charAt(0),c=Math.log(i)/Math.log(256),d=Math.log(256)/Math.log(i);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,E=p.length;y!==E&&p[y]===0;)y++,g++;for(var v=(E-y)*d+1>>>0,w=new Uint8Array(v);y!==E;){for(var _=p[y],I=0,M=v-1;(_!==0||I<m)&&M!==-1;M--,I++)_+=256*w[M]>>>0,w[M]=_%i>>>0,_=_/i>>>0;if(_!==0)throw new Error("Non-zero carry");m=I,y++}for(var F=v-m;F!==v&&w[F]===0;)F++;for(var X=a.repeat(g);F<v;++F)X+=e.charAt(w[F]);return X}function u(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;for(var g=0,m=0,y=0;p[g]===a;)m++,g++;for(var E=(p.length-g)*c+1>>>0,v=new Uint8Array(E);p[g];){var w=t[p.charCodeAt(g)];if(w===255)return;for(var _=0,I=E-1;(w!==0||_<y)&&I!==-1;I--,_++)w+=i*v[I]>>>0,v[I]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");y=_,g++}for(var M=E-y;M!==E&&v[M]===0;)M++;for(var F=new Uint8Array(m+(E-M)),X=m;M!==E;)F[X++]=v[M++];return F}function h(p){var g=u(p);if(g)return g;throw new Error("Non-base"+i+" character")}return{encode:l,decodeUnsafe:u,decode:h}}var pm=fm;const gm=pm,ym="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var fh=gm(ym);const gr=e=>fh.encode(e),yr=e=>fh.decode(e);function zn(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const Fo=8192;function yn(e){if(e.length<Fo)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=Fo){const s=e.slice(n,n+Fo);t+=String.fromCharCode(...s)}return btoa(t)}function Oo(e){var r;const t=e.startsWith("0x")?e.slice(2):e,s=((r=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:r.map(o=>parseInt(o,16)))??[];return Uint8Array.from(s)}function Us(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function ua(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function mm(e){let t=0,n=0,s=0;for(;;){let r=e[s];if(s+=1,t|=(r&127)<<n,!(r&128))break;n+=7}return{value:t,length:s}}class ph{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),s=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+s).toString(10)}read128(){let t=BigInt(this.read64()),s=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+s).toString(10)}read256(){let t=BigInt(this.read128()),s=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+s).toString(10)}readBytes(t){let n=this.bytePosition+this.dataView.byteOffset,s=new Uint8Array(this.dataView.buffer,n,t);return this.shift(t),s}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t),{value:s,length:r}=mm(n);return this.shift(r),s}readVec(t){let n=this.readULEB(),s=[];for(let r=0;r<n;r++)s.push(t(this,r,n));return s}}function wm(e,t){switch(t){case"base58":return gr(e);case"base64":return yn(e);case"hex":return Us(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function bm(e,t){switch(t){case"base58":return yr(e);case"base64":return zn(e);case"hex":return Oo(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function ha(e,t=["<",">"]){const[n,s]=t,r=[];let o="",i=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===n&&i++,c===s&&i--,i===0&&c===","){r.push(o.trim()),o="";continue}o+=c}return r.push(o.trim()),r}class gh{constructor({size:t=1024,maxSize:n,allocateSize:s=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=n||t,this.allocateSize=s,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const n=this.bytePosition+t;if(n>this.size){const s=Math.min(this.maxSize,this.size+this.allocateSize);if(n>s)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=s;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return No(BigInt(t),8).forEach(n=>this.write8(n)),this}write128(t){return No(BigInt(t),16).forEach(n=>this.write8(n)),this}write256(t){return No(BigInt(t),32).forEach(n=>this.write8(n)),this}writeULEB(t){return ua(t).forEach(n=>this.write8(n)),this}writeVec(t,n){return this.writeULEB(t.length),Array.from(t).forEach((s,r)=>n(this,s,r,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return wm(this.toBytes(),t)}}function No(e,t){let n=new Uint8Array(t),s=0;for(;e>0;)n[s]=Number(e%BigInt(256)),e=e/BigInt(256),s+=1;return n}var yh=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Rt=(e,t,n)=>(yh(e,t,"read from private field"),n?n.call(e):t.get(e)),so=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ro=(e,t,n,s)=>(yh(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),fs,Cs,Fr,$n;const mh=class{constructor(e){so(this,fs,void 0),so(this,Cs,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),ro(this,fs,e.write),ro(this,Cs,e.serialize??((t,n)=>{const s=new gh({size:this.serializedSize(t)??void 0,...n});return Rt(this,fs).call(this,t,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),Rt(this,fs).call(this,e,t)}serialize(e,t){return this.validate(e),new Tm(this,Rt(this,Cs).call(this,e,t))}parse(e){const t=new ph(e);return this.read(t)}transform({name:e,input:t,output:n}){return new mh({name:e??this.name,read:s=>n(this.read(s)),write:(s,r)=>Rt(this,fs).call(this,t(s),r),serializedSize:s=>this.serializedSize(t(s)),serialize:(s,r)=>Rt(this,Cs).call(this,t(s),r),validate:s=>this.validate(t(s))})}};let qt=mh;fs=new WeakMap;Cs=new WeakMap;const wh=Symbol.for("@mysten/serialized-bcs");function fa(e){return!!e&&typeof e=="object"&&e[wh]===!0}class Tm{constructor(t,n){so(this,Fr,void 0),so(this,$n,void 0),ro(this,Fr,t),ro(this,$n,n)}get[wh](){return!0}toBytes(){return Rt(this,$n)}toHex(){return Us(Rt(this,$n))}toBase64(){return yn(Rt(this,$n))}toBase58(){return gr(Rt(this,$n))}parse(){return Rt(this,Fr).parse(Rt(this,$n))}}Fr=new WeakMap;$n=new WeakMap;function oo({size:e,...t}){return new qt({...t,serializedSize:()=>e})}function zo({readMethod:e,writeMethod:t,...n}){return oo({...n,read:s=>s[e](),write:(s,r)=>r[t](s),validate:s=>{var r;if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);(r=n.validate)==null||r.call(n,s)}})}function Ho({readMethod:e,writeMethod:t,...n}){return oo({...n,read:s=>s[e](),write:(s,r)=>r[t](BigInt(s)),validate:s=>{var o;const r=BigInt(s);if(r<0||r>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${r}. Expected value in range 0-${n.maxValue}`);(o=n.validate)==null||o.call(n,r)}})}function vm({serialize:e,...t}){const n=new qt({...t,serialize:e,write:(s,r)=>{for(const o of n.serialize(s).toBytes())r.write8(o)}});return n}function Am({toBytes:e,fromBytes:t,...n}){return new qt({...n,read:s=>{const r=s.readULEB(),o=s.readBytes(r);return t(o)},write:(s,r)=>{const o=e(s);r.writeULEB(o.length);for(let i=0;i<o.length;i++)r.write8(o[i])},serialize:s=>{const r=e(s),o=ua(r.length),i=new Uint8Array(o.length+r.length);return i.set(o,0),i.set(r,o.length),i},validate:s=>{var r;if(typeof s!="string")throw new TypeError(`Invalid ${n.name} value: ${s}. Expected string`);(r=n.validate)==null||r.call(n,s)}})}function Sm(e){let t=null;function n(){return t||(t=e()),t}return new qt({name:"lazy",read:s=>n().read(s),serializedSize:s=>n().serializedSize(s),write:(s,r)=>n().write(s,r),serialize:(s,r)=>n().serialize(s,r).toBytes()})}const U={u8(e){return zo({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return zo({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return zo({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return Ho({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return Ho({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return Ho({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return oo({name:"bool",size:1,read:t=>t.read8()===1,write:(t,n)=>n.write8(t?1:0),...e,validate:t=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return vm({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(ua(t)),...e})},bytes(e,t){return oo({name:`bytes[${e}]`,size:e,read:n=>n.readBytes(e),write:(n,s)=>{for(let r=0;r<e;r++)s.write8(n[r]??0)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},string(e){return Am({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,n){return new qt({name:`${t.name}[${e}]`,read:s=>{const r=new Array(e);for(let o=0;o<e;o++)r[o]=t.read(s);return r},write:(s,r)=>{for(const o of s)t.write(o,r)},...n,validate:s=>{var r;if((r=n==null?void 0:n.validate)==null||r.call(n,s),!("length"in s))throw new TypeError(`Expected array, found ${typeof s}`);if(s.length!==e)throw new TypeError(`Expected array of length ${e}, found ${s.length}`)}})},option(e){return U.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>"Some"in t?t.Some:null})},vector(e,t){return new qt({name:`vector<${e.name}>`,read:n=>{const s=n.readULEB(),r=new Array(s);for(let o=0;o<s;o++)r[o]=e.read(n);return r},write:(n,s)=>{s.writeULEB(n.length);for(const r of n)e.write(r,s)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(e,t){return new qt({name:`(${e.map(n=>n.name).join(", ")})`,serializedSize:n=>{let s=0;for(let r=0;r<e.length;r++){const o=e[r].serializedSize(n[r]);if(o==null)return null;s+=o}return s},read:n=>{const s=[];for(const r of e)s.push(r.read(n));return s},write:(n,s)=>{for(let r=0;r<e.length;r++)e[r].write(n[r],s)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}})},struct(e,t,n){const s=Object.entries(t);return new qt({name:e,serializedSize:r=>{let o=0;for(const[i,a]of s){const c=a.serializedSize(r[i]);if(c==null)return null;o+=c}return o},read:r=>{const o={};for(const[i,a]of s)o[i]=a.read(r);return o},write:(r,o)=>{for(const[i,a]of s)a.write(r[i],o)},...n,validate:r=>{var o;if((o=n==null?void 0:n.validate)==null||o.call(n,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`)}})},enum(e,t,n){const s=Object.entries(t);return new qt({name:e,read:r=>{const o=r.readULEB(),[i,a]=s[o];return{[i]:(a==null?void 0:a.read(r))??!0}},write:(r,o)=>{const[i,a]=Object.entries(r)[0];for(let c=0;c<s.length;c++){const[d,l]=s[c];if(d===i){o.writeULEB(c),l==null||l.write(a,o);return}}},...n,validate:r=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`);const o=Object.keys(r);if(o.length!==1)throw new TypeError(`Expected object with one key, found ${o.length}`);const[i]=o;if(!Object.hasOwn(t,i))throw new TypeError(`Invalid enum variant ${i}`)}})},map(e,t){return U.vector(U.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:n=>[...n.entries()],output:n=>{const s=new Map;for(const[r,o]of n)s.set(r,o);return s}})},generic(e,t){return(...n)=>t(...n).transform({name:`${t.name}<${n.map(s=>s.name).join(", ")}>`,input:s=>s,output:s=>s})},lazy(e){return Sm(e)}},xm=32,Gs=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof Gs){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(Gs.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);e.withPrimitives!==!1&&km(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,n){if(typeof e=="string"||Array.isArray(e)){const{name:s,params:r}=this.parseTypeName(e);return this.getTypeInterface(s).encode(this,t,n,r)}if(typeof e=="object"){const s=this.tempKey();return new Gs(this).registerStructType(s,e).ser(s,t,n)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,n){if(typeof t=="string")if(n)t=bm(t,n);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:s,params:r}=this.parseTypeName(e);return this.getTypeInterface(s).decode(this,t,r)}if(typeof e=="object"){const s=new Gs(this),r=this.tempKey();return s.registerStructType(r,e).de(r,t,n)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,n,s=()=>!0){const{name:r,params:o}=this.parseTypeName(e);return this.types.set(r,{encode(i,a,c,d){const l=o.reduce((u,h,p)=>Object.assign(u,{[h]:d[p]}),{});return this._encodeRaw.call(i,new gh(c),a,d,l)},decode(i,a,c){const d=o.reduce((l,u,h)=>Object.assign(l,{[u]:c[h]}),{});return this._decodeRaw.call(i,new ph(a),c,d)},_encodeRaw(i,a,c,d){if(s(a))return t.call(this,i,a,c,d);throw new Error(`Validation failed for type ${r}, data: ${a}`)},_decodeRaw(i,a,c){return n.call(this,i,a,c)}}),this}registerBcsType(e,t){return this.registerType(e,(n,s,r)=>{const o=r.map(i=>new qt({name:String(i),write:(a,c)=>{const{name:d,params:l}=this.parseTypeName(i),u=this.getTypeInterface(d),h=l.reduce((p,g,m)=>Object.assign(p,{[g]:r[m]}),{});return u._encodeRaw.call(this,c,a,l,h)},read:()=>{throw new Error("Not implemented")}}));return t(...o).write(s,n),n},(n,s)=>{const r=s.map(o=>new qt({name:String(o),write:(i,a)=>{throw new Error("Not implemented")},read:i=>{const{name:a,params:c}=this.parseTypeName(o),d=this.getTypeInterface(a),l=c.reduce((u,h,p)=>Object.assign(u,{[h]:s[p]}),{});return d._decodeRaw.call(this,i,c,l)}}));return t(...r).read(n)}),this}registerAddressType(e,t,n="hex"){switch(n){case"base64":return this.registerType(e,function(r,o){return zn(o).reduce((i,a)=>i.write8(a),r)},function(r){return yn(r.readBytes(t))});case"hex":return this.registerType(e,function(r,o){return Oo(o).reduce((i,a)=>i.write8(a),r)},function(r){return Us(r.readBytes(t))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:n}=this.parseTypeName(e);if(n.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(r,o,i,a){return r.writeVec(o,(c,d)=>{let l=i[0];if(!l)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:u,params:h}=this.parseTypeName(l);if(this.hasType(u))return this.getTypeInterface(u)._encodeRaw.call(this,c,d,h,a);if(!(u in a))throw new Error(`Unable to find a matching type definition for ${u} in vector; make sure you passed a generic`);let{name:p,params:g}=this.parseTypeName(a[u]);return this.getTypeInterface(p)._encodeRaw.call(this,c,d,g,a)})},function(r,o,i){return r.readVec(a=>{let c=o[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:d,params:l}=this.parseTypeName(c);if(this.hasType(d))return this.getTypeInterface(d)._decodeRaw.call(this,a,l,i);if(!(d in i))throw new Error(`Unable to find a matching type definition for ${d} in vector; make sure you passed a generic`);let{name:u,params:h}=this.parseTypeName(i[d]);return this.getTypeInterface(u)._decodeRaw.call(this,a,h,i)})})}registerStructType(e,t){for(let i in t){let a=this.tempKey(),c=t[i];!Array.isArray(c)&&typeof c!="string"&&(t[i]=a,this.registerStructType(a,c))}let n=Object.freeze(t),s=Object.keys(n),{name:r,params:o}=this.parseTypeName(e);return this.registerType(e,function(a,c,d,l){if(!c||c.constructor!==Object)throw new Error(`Expected ${r} to be an Object, got: ${c}`);if(d.length!==o.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${o.length}, got: ${d.length}`);for(let u of s){if(!(u in c))throw new Error(`Struct ${r} requires field ${u}:${n[u]}`);const{name:h,params:p}=this.parseTypeName(n[u]);if(!o.includes(h))this.getTypeInterface(h)._encodeRaw.call(this,a,c[u],p,l);else{const g=o.indexOf(h);let{name:m,params:y}=this.parseTypeName(d[g]);if(this.hasType(m)){this.getTypeInterface(m)._encodeRaw.call(this,a,c[u],y,l);continue}if(!(m in l))throw new Error(`Unable to find a matching type definition for ${m} in ${r}; make sure you passed a generic`);let{name:E,params:v}=this.parseTypeName(l[m]);this.getTypeInterface(E)._encodeRaw.call(this,a,c[u],v,l)}}return a},function(a,c,d){if(c.length!==o.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${o.length}, got: ${c.length}`);let l={};for(let u of s){const{name:h,params:p}=this.parseTypeName(n[u]);if(!o.includes(h))l[u]=this.getTypeInterface(h)._decodeRaw.call(this,a,p,d);else{const g=o.indexOf(h);let{name:m,params:y}=this.parseTypeName(c[g]);if(this.hasType(m)){l[u]=this.getTypeInterface(m)._decodeRaw.call(this,a,y,d);continue}if(!(m in d))throw new Error(`Unable to find a matching type definition for ${m} in ${r}; make sure you passed a generic`);let{name:E,params:v}=this.parseTypeName(d[m]);l[u]=this.getTypeInterface(E)._decodeRaw.call(this,a,v,d)}}return l})}registerEnumType(e,t){for(let i in t){let a=this.tempKey(),c=t[i];c!==null&&!Array.isArray(c)&&typeof c!="string"&&(t[i]=a,this.registerStructType(a,c))}let n=Object.freeze(t),s=Object.keys(n),{name:r,params:o}=this.parseTypeName(e);return this.registerType(e,function(a,c,d,l){if(!c)throw new Error(`Unable to write enum "${r}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${r}", expected object with properties: "${s.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let u=Object.keys(c)[0];if(u===void 0)throw new Error(`Empty object passed as invariant of the enum "${r}"`);let h=s.indexOf(u);if(h===-1)throw new Error(`Unknown invariant of the enum "${r}", allowed values: "${s.join(" | ")}"; received "${u}"`);let p=s[h],g=n[p];if(a.write8(h),g===null)return a;let m=o.indexOf(g),y=m===-1?g:d[m];{let{name:E,params:v}=this.parseTypeName(y);return this.getTypeInterface(E)._encodeRaw.call(this,a,c[u],v,l)}},function(a,c,d){let l=a.readULEB(),u=s[l],h=n[u];if(l===-1)throw new Error(`Decoding type mismatch, expected enum "${r}" invariant index, received "${l}"`);if(h===null)return{[u]:!0};let p=o.indexOf(h),g=p===-1?h:c[p];{let{name:m,params:y}=this.parseTypeName(g);return{[u]:this.getTypeInterface(m)._decodeRaw.call(this,a,y,d)}}})}getTypeInterface(e){let t=this.types.get(e);if(typeof t=="string"){let n=[];for(;typeof t=="string";){if(n.includes(t))throw new Error(`Recursive definition found: ${n.join(" -> ")} -> ${t}`);n.push(t),t=this.types.get(t)}}if(t===void 0)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[a,...c]=e;return{name:a,params:c}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,n]=this.schema.genericSeparators||["<",">"],s=e.indexOf(t),r=Array.from(e).reverse().indexOf(n);if(s===-1&&r===-1)return{name:e,params:[]};if(s===-1||r===-1)throw new Error(`Unclosed generic in name '${e}'`);let o=e.slice(0,s),i=ha(e.slice(s+1,e.length-r-1),this.schema.genericSeparators);return{name:o,params:i}}};let Be=Gs;Be.U8="u8";Be.U16="u16";Be.U32="u32";Be.U64="u64";Be.U128="u128";Be.U256="u256";Be.BOOL="bool";Be.VECTOR="vector";Be.ADDRESS="address";Be.STRING="string";Be.HEX="hex-string";Be.BASE58="base58-string";Be.BASE64="base64-string";function km(e){e.registerType(Be.U8,function(t,n){return t.write8(n)},function(t){return t.read8()},t=>t<256),e.registerType(Be.U16,function(t,n){return t.write16(n)},function(t){return t.read16()},t=>t<65536),e.registerType(Be.U32,function(t,n){return t.write32(n)},function(t){return t.read32()},t=>t<=4294967296n),e.registerType(Be.U64,function(t,n){return t.write64(n)},function(t){return t.read64()}),e.registerType(Be.U128,function(t,n){return t.write128(n)},function(t){return t.read128()}),e.registerType(Be.U256,function(t,n){return t.write256(n)},function(t){return t.read256()}),e.registerType(Be.BOOL,function(t,n){return t.write8(n)},function(t){return t.read8().toString(10)==="1"}),e.registerType(Be.STRING,function(t,n){return t.writeVec(Array.from(n),(s,r)=>s.write8(r.charCodeAt(0)))},function(t){return t.readVec(n=>n.read8()).map(n=>String.fromCharCode(Number(n))).join("")},t=>!0),e.registerType(Be.HEX,function(t,n){return t.writeVec(Array.from(Oo(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return Us(new Uint8Array(n))}),e.registerType(Be.BASE58,function(t,n){return t.writeVec(Array.from(yr(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return gr(new Uint8Array(n))}),e.registerType(Be.BASE64,function(t,n){return t.writeVec(Array.from(zn(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return yn(new Uint8Array(n))})}function _m(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:xm,addressEncoding:"hex"}}const Em=32;function Tc(e){try{return yr(e).length===Em}catch{return!1}}const pa=32;function qn(e){return Im(e)&&Um(e)===pa}function vr(e){return qn(e)}function Bm(e){return e.includes("::")?bh(e):e}function bh(e){const[t,n]=e.split("::"),s=e.slice(t.length+n.length+4),r=s.includes("<")?s.slice(0,s.indexOf("<")):s,o=s.includes("<")?ha(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(i=>Bm(i.trim())):[];return{address:Re(t),module:n,name:r,typeParams:o}}function Pm(e){const{address:t,module:n,name:s,typeParams:r}=typeof e=="string"?bh(e):e,o=(r==null?void 0:r.length)>0?`<${r.map(i=>typeof i=="string"?i:Pm(i)).join(",")}>`:"";return`${t}::${n}::${s}${o}`}function Re(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(pa*2,"0")}`}function mn(e,t=!1){return Re(e,t)}function Im(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function Um(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}class Om extends TypeError{constructor(t,n){let s;const{message:r,explanation:o,...i}=t,{path:a}=t,c=a.length===0?r:`At path: ${a.join(".")} -- ${r}`;super(o??c),o!=null&&(this.cause=c),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>s??(s=[t,...n()])}}function Rm(e){return bn(e)&&typeof e[Symbol.iterator]=="function"}function bn(e){return typeof e=="object"&&e!=null}function Qt(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function Lm(e){const{done:t,value:n}=e.next();return t?void 0:n}function $m(e,t,n,s){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:r,branch:o}=t,{type:i}=n,{refinement:a,message:c=`Expected a value of type \`${i}\`${a?` with refinement \`${a}\``:""}, but received: \`${Qt(s)}\``}=e;return{value:s,type:i,refinement:a,key:r[r.length-1],path:r,branch:o,...e,message:c}}function*vc(e,t,n,s){Rm(e)||(e=[e]);for(const r of e){const o=$m(r,t,n,s);o&&(yield o)}}function*ga(e,t,n={}){const{path:s=[],branch:r=[e],coerce:o=!1,mask:i=!1}=n,a={path:s,branch:r};if(o&&(e=t.coercer(e,a),i&&t.type!=="type"&&bn(t.schema)&&bn(e)&&!Array.isArray(e)))for(const d in e)t.schema[d]===void 0&&delete e[d];let c="valid";for(const d of t.validator(e,a))d.explanation=n.message,c="not_valid",yield[d,void 0];for(let[d,l,u]of t.entries(e,a)){const h=ga(l,u,{path:d===void 0?s:[...s,d],branch:d===void 0?r:[...r,l],coerce:o,mask:i,message:n.message});for(const p of h)p[0]?(c=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):o&&(l=p[1],d===void 0?e=l:e instanceof Map?e.set(d,l):e instanceof Set?e.add(l):bn(e)&&(l!==void 0||d in e)&&(e[d]=l))}if(c!=="not_valid")for(const d of t.refiner(e,a))d.explanation=n.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,e])}class Mn{constructor(t){const{type:n,schema:s,validator:r,refiner:o,coercer:i=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=s,this.entries=a,this.coercer=i,r?this.validator=(c,d)=>{const l=r(c,d);return vc(l,d,this,c)}:this.validator=()=>[],o?this.refiner=(c,d)=>{const l=o(c,d);return vc(l,d,this,c)}:this.refiner=()=>[]}assert(t,n){return fi(t,this,n)}create(t,n){return Th(t,this,n)}is(t){return Tn(t,this)}mask(t,n){return vh(t,this,n)}validate(t,n={}){return mr(t,this,n)}}function fi(e,t,n){const s=mr(e,t,{message:n});if(s[0])throw s[0]}function Th(e,t,n){const s=mr(e,t,{coerce:!0,message:n});if(s[0])throw s[0];return s[1]}function vh(e,t,n){const s=mr(e,t,{coerce:!0,mask:!0,message:n});if(s[0])throw s[0];return s[1]}function Tn(e,t){return!mr(e,t)[0]}function mr(e,t,n={}){const s=ga(e,t,n),r=Lm(s);return r[0]?[new Om(r[0],function*(){for(const i of s)i[0]&&(yield i[0])}),void 0]:[void 0,r[1]]}function Zt(e,t){return new Mn({type:e,schema:null,validator:t})}function Ac(){return Zt("any",()=>!0)}function rt(e){return new Mn({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,s]of t.entries())yield[n,s,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Qt(t)}`}})}function qm(){return Zt("bigint",e=>typeof e=="bigint")}function jm(){return Zt("boolean",e=>typeof e=="boolean")}function Xt(){return Zt("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${Qt(e)}`)}function Ve(e){const t=Qt(e),n=typeof e;return new Mn({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator(s){return s===e||`Expected the literal \`${t}\`, but received: ${Qt(s)}`}})}function Dm(){return Zt("never",()=>!1)}function Fm(e){return new Mn({...e,validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)})}function Nm(){return Zt("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${Qt(e)}`)}function Pe(e){const t=e?Object.keys(e):[],n=Dm();return new Mn({type:"object",schema:e||null,*entries(s){if(e&&bn(s)){const r=new Set(Object.keys(s));for(const o of t)r.delete(o),yield[o,s[o],e[o]];for(const o of r)yield[o,s[o],n]}},validator(s){return bn(s)||`Expected an object, but received: ${Qt(s)}`},coercer(s){return bn(s)?{...s}:s}})}function Vt(e){return new Mn({...e,validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)})}function zm(e,t){return new Mn({type:"record",schema:null,*entries(n){if(bn(n))for(const s in n){const r=n[s];yield[s,s,e],yield[s,r,t]}},validator(n){return bn(n)||`Expected an object, but received: ${Qt(n)}`}})}function St(){return Zt("string",e=>typeof e=="string"||`Expected a string, but received: ${Qt(e)}`)}function zt(e){const t=e.map(n=>n.type).join(" | ");return new Mn({type:"union",schema:null,coercer(n){for(const s of e){const[r,o]=s.validate(n,{coerce:!0});if(!r)return o}return n},validator(n,s){const r=[];for(const o of e){const[...i]=ga(n,o,s),[a]=i;if(a[0])for(const[c]of i)c&&r.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Qt(n)}`,...r]}})}function Hm(){return Zt("unknown",()=>!0)}const Mm=/^(?:[a-z0-9][a-z0-9-]{0,62}(?:\.[a-z0-9][a-z0-9-]{0,62})*)?@[a-z0-9][a-z0-9-]{0,62}$/i,Cm=/^(?:[a-z0-9][a-z0-9-]{0,62}\.)+sui$/i;function Gm(e,t="at"){const n=e.toLowerCase();let s;if(n.includes("@")){if(!Mm.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[r,o]=n.split("@");s=[...r?r.split("."):[],o]}else{if(!Cm.test(n))throw new Error(`Invalid SuiNS name ${e}`);s=n.split(".").slice(0,-1)}return t==="dot"?`${s.join(".")}.sui`:`${s.slice(0,-1).join(".")}@${s[s.length-1]}`}BigInt(1e9);const ya="0x1",Ah="0x2",Gb=mn("0x6"),Wm=`${Ah}::sui::SUI`;mn("0x5");function Tt(e,t){return Th(e,t)}function pi(e){return typeof e=="object"&&"MutableReference"in e?e.MutableReference:void 0}function Sh(e){return typeof e=="object"&&"Reference"in e?e.Reference:void 0}function ma(e){if(typeof e=="object"&&"Struct"in e)return e;const t=Sh(e),n=pi(e);if(typeof t=="object"&&"Struct"in t)return t;if(typeof n=="object"&&"Struct"in n)return n}const Km="object",Jm="ID",Vm="ascii",Xm="String",Qm="string",Zm="String",Ym="option",ew="Option",tw={address:Ah,module:Km,name:Jm},nw={address:ya,module:Vm,name:Xm},sw={address:ya,module:Qm,name:Zm},rw={address:ya,module:Ym,name:ew},Ar=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function ow(e){var n;const t=(n=ma(e))==null?void 0:n.Struct;return(t==null?void 0:t.address)==="0x2"&&(t==null?void 0:t.module)==="tx_context"&&(t==null?void 0:t.name)==="TxContext"}function Mo(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}const iw=["Address","Bool","U8","U16","U32","U64","U128","U256"];function gi(e,t){if(typeof e=="string"&&iw.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])Mo("number",t);else if(e==="Bool")Mo("boolean",t);else if(e==="Address"&&(Mo("string",t),t&&!qn(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}else if(typeof e=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((t===void 0||typeof t=="string")&&e.Vector==="U8")return"string";if(t!==void 0&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const n=gi(e.Vector,t?t[0]:void 0);return n===void 0?void 0:`vector<${n}>`}if("Struct"in e){if(Ar(e.Struct,nw))return"string";if(Ar(e.Struct,sw))return"utf8string";if(Ar(e.Struct,tw))return"address";if(Ar(e.Struct,rw)){const n={Vector:e.Struct.typeArguments[0]};return gi(n,t)}}}const aw=/^vector<(.+)>$/,cw=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class gn{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const s=t.match(aw);if(s)return{vector:gn.parseFromStr(s[1],n)};const r=t.match(cw);if(r)return{struct:{address:n?Re(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:gn.parseStructTypeArgs(r[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return ha(t).map(s=>gn.parseFromStr(s,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${gn.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,s=n.typeParams.map(gn.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${s?`<${s}>`:""}`}throw new Error("Invalid TypeTag")}}const Se=new Be({..._m(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function xh(e){return U.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function dw(e){return U.enum("Option",{None:null,Some:e})}function wa(e){return e.transform({input:t=>({[t.kind]:t}),output:t=>{const n=Object.keys(t)[0];return{kind:n,...t[n]}}})}const Ft=U.bytes(pa).transform({input:e=>typeof e=="string"?Oo(Re(e)):e,output:e=>Re(Us(e))}),ba=U.vector(U.u8()).transform({name:"ObjectDigest",input:e=>yr(e),output:e=>gr(new Uint8Array(e))}),sr=U.struct("SuiObjectRef",{objectId:Ft,version:U.u64(),digest:ba}),Ta=U.struct("SharedObjectRef",{objectId:Ft,initialSharedVersion:U.u64(),mutable:U.bool()}),io=U.enum("ObjectArg",{ImmOrOwned:sr,Shared:Ta,Receiving:sr}),va=U.enum("CallArg",{Pure:U.vector(U.u8()),Object:io,ObjVec:U.vector(io)}),Os=U.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:U.lazy(()=>Os),struct:U.lazy(()=>Ea),u16:null,u32:null,u256:null}),It=wa(U.enum("Argument",{GasCoin:null,Input:U.struct("Input",{index:U.u16()}),Result:U.struct("Result",{index:U.u16()}),NestedResult:U.struct("NestedResult",{index:U.u16(),resultIndex:U.u16()})})),Aa=U.struct("ProgrammableMoveCall",{package:Ft,module:U.string(),function:U.string(),type_arguments:U.vector(Os),arguments:U.vector(It)}).transform({input:e=>{const[t,n,s]=e.target.split("::"),r=e.typeArguments.map(o=>gn.parseFromStr(o,!0));return{package:Re(t),module:n,function:s,type_arguments:r,arguments:e.arguments}},output:e=>({target:[e.package,e.module,e.function].join("::"),arguments:e.arguments,typeArguments:e.type_arguments.map(gn.tagToString)})}),Sa=wa(U.enum("Transaction",{MoveCall:Aa,TransferObjects:U.struct("TransferObjects",{objects:U.vector(It),address:It}),SplitCoins:U.struct("SplitCoins",{coin:It,amounts:U.vector(It)}),MergeCoins:U.struct("MergeCoins",{destination:It,sources:U.vector(It)}),Publish:U.struct("Publish",{modules:U.vector(U.vector(U.u8())),dependencies:U.vector(Ft)}),MakeMoveVec:U.struct("MakeMoveVec",{type:dw(Os),objects:U.vector(It)}),Upgrade:U.struct("Upgrade",{modules:U.vector(U.vector(U.u8())),dependencies:U.vector(Ft),packageId:Ft,ticket:It})})),xa=U.struct("ProgrammableTransaction",{inputs:U.vector(va),transactions:U.vector(Sa)}),ka=U.enum("TransactionKind",{ProgrammableTransaction:xa,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),_a=U.enum("TransactionExpiration",{None:null,Epoch:xh()}),Ea=U.struct("StructTag",{address:Ft,module:U.string(),name:U.string(),typeParams:U.vector(Os)}),Ba=U.struct("GasData",{payment:U.vector(sr),owner:Ft,price:U.u64(),budget:U.u64()}),Pa=U.struct("TransactionDataV1",{kind:ka,sender:Ft,gasData:Ba,expiration:_a}),Ia=U.enum("TransactionData",{V1:Pa}),lw=U.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),uw=U.enum("IntentVersion",{V0:null}),hw=U.enum("AppId",{Sui:null}),fw=U.struct("Intent",{scope:lw,version:uw,appId:hw}),pw=U.generic(["T"],e=>U.struct("IntentMessage<T>",{intent:fw,value:e})),Ua=U.enum("CompressedSignature",{ED25519:U.fixedArray(64,U.u8()),Secp256k1:U.fixedArray(64,U.u8()),Secp256r1:U.fixedArray(64,U.u8()),ZkLogin:U.vector(U.u8())}),Oa=U.enum("PublicKey",{ED25519:U.fixedArray(32,U.u8()),Secp256k1:U.fixedArray(33,U.u8()),Secp256r1:U.fixedArray(33,U.u8()),ZkLogin:U.vector(U.u8())}),Ra=U.struct("MultiSigPkMap",{pubKey:Oa,weight:U.u8()}),La=U.struct("MultiSigPublicKey",{pk_map:U.vector(Ra),threshold:U.u16()}),kh=U.struct("MultiSig",{sigs:U.vector(Ua),bitmap:U.u16(),multisig_pk:La}),gw=U.vector(U.u8()).transform({input:e=>typeof e=="string"?zn(e):e,output:e=>yn(new Uint8Array(e))}),_h=U.struct("SenderSignedTransaction",{intentMessage:pw(Ia),txSignatures:U.vector(gw)}),Eh=U.vector(_h,{name:"SenderSignedData"}),Ye={...U,U8:U.u8(),U16:U.u16(),U32:U.u32(),U64:U.u64(),U128:U.u128(),U256:U.u256(),ULEB128:U.uleb128(),Bool:U.bool(),String:U.string(),Address:Ft,Argument:It,CallArg:va,CompressedSignature:Ua,GasData:Ba,MultiSig:kh,MultiSigPkMap:Ra,MultiSigPublicKey:La,ObjectArg:io,ObjectDigest:ba,ProgrammableMoveCall:Aa,ProgrammableTransaction:xa,PublicKey:Oa,SenderSignedData:Eh,SenderSignedTransaction:_h,SharedObjectRef:Ta,StructTag:Ea,SuiObjectRef:sr,Transaction:Sa,TransactionData:Ia,TransactionDataV1:Pa,TransactionExpiration:_a,TransactionKind:ka,TypeTag:Os,ser:Se.ser.bind(Se),de:Se.de.bind(Se),getTypeInterface:Se.getTypeInterface.bind(Se),hasType:Se.hasType.bind(Se),parseTypeName:Se.parseTypeName.bind(Se),registerAddressType:Se.registerAddressType.bind(Se),registerAlias:Se.registerAlias.bind(Se),registerBcsType:Se.registerBcsType.bind(Se),registerEnumType:Se.registerEnumType.bind(Se),registerStructType:Se.registerStructType.bind(Se),registerType:Se.registerType.bind(Se),types:Se.types};Se.registerBcsType("utf8string",()=>U.string({name:"utf8string"}));Se.registerBcsType("unsafe_u64",()=>xh());Se.registerBcsType("enumKind",e=>wa(e));[Ft,It,va,Ua,Ba,kh,Ra,La,io,ba,Aa,xa,Oa,Eh,Ta,Ea,sr,Sa,Ia,Pa,_a,ka,Os].forEach(e=>{Se.registerBcsType(e.name,()=>e)});const ao=Pe({digest:St(),objectId:St(),version:zt([Nm(),St(),qm()])}),yw=zt([Pe({ImmOrOwned:ao}),Pe({Shared:Pe({objectId:St(),initialSharedVersion:zt([Xt(),St()]),mutable:jm()})}),Pe({Receiving:ao})]),co=Pe({Pure:rt(Xt())}),yi=Pe({Object:yw}),lo=zt([co,yi]);function mw(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:fa(e)?e.toBytes():Ye.ser(t,e,{maxSize:1/0}).toBytes())}}const vt={Pure:mw,ObjectRef({objectId:e,digest:t,version:n}){return{Object:{ImmOrOwned:{digest:t,version:n,objectId:Re(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{Object:{Shared:{mutable:t,initialSharedVersion:n,objectId:Re(e)}}}},ReceivingRef({objectId:e,digest:t,version:n}){return{Object:{Receiving:{digest:t,version:n,objectId:Re(e)}}}}};function Sc(e){return typeof e=="string"?Re(e):"ImmOrOwned"in e.Object?Re(e.Object.ImmOrOwned.objectId):"Receiving"in e.Object?Re(e.Object.Receiving.objectId):Re(e.Object.Shared.objectId)}function ww(e){return typeof e=="object"&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}function bw(e){var t;return((t=ww(e))==null?void 0:t.mutable)??!1}const Tw=e=>zt([Pe({None:zt([Ve(!0),Ve(null)])}),Pe({Some:e})]),rr=zt([Pe({kind:Ve("Input"),index:Xt(),value:Vt(Ac()),type:Vt(Ve("object"))}),Pe({kind:Ve("Input"),index:Xt(),value:Vt(Ac()),type:Ve("pure")})]),vw=[rr,Pe({kind:Ve("GasCoin")}),Pe({kind:Ve("Result"),index:Xt()}),Pe({kind:Ve("NestedResult"),index:Xt(),resultIndex:Xt()})],vn=zt([...vw]),Bh=Pe({kind:Ve("MoveCall"),target:Zt("target",St().validator),typeArguments:rt(St()),arguments:rt(vn)}),Ph=Pe({kind:Ve("TransferObjects"),objects:rt(vn),address:vn}),Ih=Pe({kind:Ve("SplitCoins"),coin:vn,amounts:rt(vn)}),Uh=Pe({kind:Ve("MergeCoins"),destination:vn,sources:rt(vn)}),Oh=Pe({kind:Ve("MakeMoveVec"),type:Vt(Tw(zm(St(),Hm()))),objects:rt(vn)}),Rh=Pe({kind:Ve("Publish"),modules:rt(rt(Xt())),dependencies:rt(St())}),Lh=Pe({kind:Ve("Upgrade"),modules:rt(rt(Xt())),dependencies:rt(St()),packageId:St(),ticket:vn}),Aw=[Bh,Ph,Ih,Uh,Rh,Lh,Oh],Sw=zt([...Aw]),Gn={MoveCall(e){return Tt({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},Bh)},TransferObjects(e,t){return t.kind==="Input"&&t.type==="pure"&&typeof t.value!="object"&&(t.value=vt.Pure(Ye.Address.serialize(t.value))),Tt({kind:"TransferObjects",objects:e,address:t},Ph)},SplitCoins(e,t){return t.forEach(n=>{n.kind==="Input"&&n.type==="pure"&&typeof n.value!="object"&&(n.value=vt.Pure(Ye.U64.serialize(n.value)))}),Tt({kind:"SplitCoins",coin:e,amounts:t},Ih)},MergeCoins(e,t){return Tt({kind:"MergeCoins",destination:e,sources:t},Uh)},Publish({modules:e,dependencies:t}){return Tt({kind:"Publish",modules:e.map(n=>typeof n=="string"?Array.from(zn(n)):n),dependencies:t.map(n=>mn(n))},Rh)},Upgrade({modules:e,dependencies:t,packageId:n,ticket:s}){return Tt({kind:"Upgrade",modules:e.map(r=>typeof r=="string"?Array.from(zn(r)):r),dependencies:t.map(r=>mn(r)),packageId:n,ticket:s},Lh)},MakeMoveVec({type:e,objects:t}){return Tt({kind:"MakeMoveVec",type:e?{Some:gn.parseFromStr(e)}:{None:null},objects:t},Oh)}};function xw(e){function t(n,s){return e(n,s)}return t.u8=n=>e(Ye.U8.serialize(n)),t.u16=n=>e(Ye.U16.serialize(n)),t.u32=n=>e(Ye.U32.serialize(n)),t.u64=n=>e(Ye.U64.serialize(n)),t.u128=n=>e(Ye.U128.serialize(n)),t.u256=n=>e(Ye.U256.serialize(n)),t.bool=n=>e(Ye.Bool.serialize(n)),t.string=n=>e(Ye.String.serialize(n)),t.address=n=>e(Ye.Address.serialize(n)),t.id=t.address,t}function Vs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function kw(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ro(e,...t){if(!kw(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Wb(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Vs(e.outputLen),Vs(e.blockLen)}function xc(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function _w(e,t){Ro(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Co=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uo=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Kb=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Jb=(e,t)=>e<<32-t|e>>>t,Kn=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,$h=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,hn=Kn?e=>e:e=>$h(e);function ls(e){for(let t=0;t<e.length;t++)e[t]=$h(e[t])}const Ew=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Vb(e){Ro(e);let t="";for(let n=0;n<e.length;n++)t+=Ew[e[n]];return t}const dn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function kc(e){if(e>=dn._0&&e<=dn._9)return e-dn._0;if(e>=dn._A&&e<=dn._F)return e-(dn._A-10);if(e>=dn._a&&e<=dn._f)return e-(dn._a-10)}function Xb(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(n);for(let r=0,o=0;r<n;r++,o+=2){const i=kc(e.charCodeAt(o)),a=kc(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}s[r]=i*16+a}return s}function Bw(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ys(e){return typeof e=="string"&&(e=Bw(e)),Ro(e),e}function Qb(...e){let t=0;for(let s=0;s<e.length;s++){const r=e[s];Ro(r),t+=r.length}const n=new Uint8Array(t);for(let s=0,r=0;s<e.length;s++){const o=e[s];n.set(o,r),r+=o.length}return n}class Pw{clone(){return this._cloneInto()}}const Iw={}.toString;function Zb(e,t){if(t!==void 0&&Iw.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function Yb(e){const t=s=>e().update(ys(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Uw(e){const t=(s,r)=>e(r).update(ys(s)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=s=>e(s),t}function e0(e=32){if(Co&&typeof Co.getRandomValues=="function")return Co.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Ow=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class Rw extends Pw{constructor(t,n,s={},r,o,i){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Vs(t),Vs(n),Vs(r),n<0||n>r)throw new Error("outputLen bigger than keyLen");if(s.key!==void 0&&(s.key.length<1||s.key.length>r))throw new Error(`key must be up 1..${r} byte long or undefined`);if(s.salt!==void 0&&s.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(s.personalization!==void 0&&s.personalization.length!==i)throw new Error(`personalization must be ${i} byte long or undefined`);this.buffer32=uo(this.buffer=new Uint8Array(t))}update(t){xc(this);const{blockLen:n,buffer:s,buffer32:r}=this;t=ys(t);const o=t.length,i=t.byteOffset,a=t.buffer;for(let c=0;c<o;){this.pos===n&&(Kn||ls(r),this.compress(r,0,!1),Kn||ls(r),this.pos=0);const d=Math.min(n-this.pos,o-c),l=i+c;if(d===n&&!(l%4)&&c+d<o){const u=new Uint32Array(a,l,Math.floor((o-c)/4));Kn||ls(u);for(let h=0;c+n<o;h+=r.length,c+=n)this.length+=n,this.compress(u,h,!1);Kn||ls(u);continue}s.set(t.subarray(c,c+d),this.pos),this.pos+=d,this.length+=d,c+=d}return this}digestInto(t){xc(this),_w(t,this);const{pos:n,buffer32:s}=this;this.finished=!0,this.buffer.subarray(n).fill(0),Kn||ls(s),this.compress(s,0,!0),Kn||ls(s);const r=uo(t);this.get().forEach((o,i)=>r[i]=hn(o))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){const{buffer:n,length:s,finished:r,destroyed:o,outputLen:i,pos:a}=this;return t||(t=new this.constructor({dkLen:i})),t.set(...this.get()),t.length=s,t.finished=r,t.destroyed=o,t.outputLen=i,t.buffer.set(n),t.pos=a,t}}const Sr=BigInt(2**32-1),mi=BigInt(32);function qh(e,t=!1){return t?{h:Number(e&Sr),l:Number(e>>mi&Sr)}:{h:Number(e>>mi&Sr)|0,l:Number(e&Sr)|0}}function Lw(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:o,l:i}=qh(e[r],t);[n[r],s[r]]=[o,i]}return[n,s]}const $w=(e,t)=>BigInt(e>>>0)<<mi|BigInt(t>>>0),qw=(e,t,n)=>e>>>n,jw=(e,t,n)=>e<<32-n|t>>>n,Dw=(e,t,n)=>e>>>n|t<<32-n,Fw=(e,t,n)=>e<<32-n|t>>>n,Nw=(e,t,n)=>e<<64-n|t>>>n-32,zw=(e,t,n)=>e>>>n-32|t<<64-n,Hw=(e,t)=>t,Mw=(e,t)=>e,Cw=(e,t,n)=>e<<n|t>>>32-n,Gw=(e,t,n)=>t<<n|e>>>32-n,Ww=(e,t,n)=>t<<n-32|e>>>64-n,Kw=(e,t,n)=>e<<n-32|t>>>64-n;function Jw(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:r|0}}const Vw=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Xw=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,Qw=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Zw=(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,Yw=(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0),eb=(e,t,n,s,r,o)=>t+n+s+r+o+(e/2**32|0)|0,tb={fromBig:qh,split:Lw,toBig:$w,shrSH:qw,shrSL:jw,rotrSH:Dw,rotrSL:Fw,rotrBH:Nw,rotrBL:zw,rotr32H:Hw,rotr32L:Mw,rotlSH:Cw,rotlSL:Gw,rotlBH:Ww,rotlBL:Kw,add:Jw,add3L:Vw,add3H:Xw,add4L:Qw,add4H:Zw,add5H:eb,add5L:Yw},pt=tb,Je=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),G=new Uint32Array(32);function In(e,t,n,s,r,o){const i=r[o],a=r[o+1];let c=G[2*e],d=G[2*e+1],l=G[2*t],u=G[2*t+1],h=G[2*n],p=G[2*n+1],g=G[2*s],m=G[2*s+1],y=pt.add3L(c,l,i);d=pt.add3H(y,d,u,a),c=y|0,{Dh:m,Dl:g}={Dh:m^d,Dl:g^c},{Dh:m,Dl:g}={Dh:pt.rotr32H(m,g),Dl:pt.rotr32L(m,g)},{h:p,l:h}=pt.add(p,h,m,g),{Bh:u,Bl:l}={Bh:u^p,Bl:l^h},{Bh:u,Bl:l}={Bh:pt.rotrSH(u,l,24),Bl:pt.rotrSL(u,l,24)},G[2*e]=c,G[2*e+1]=d,G[2*t]=l,G[2*t+1]=u,G[2*n]=h,G[2*n+1]=p,G[2*s]=g,G[2*s+1]=m}function Un(e,t,n,s,r,o){const i=r[o],a=r[o+1];let c=G[2*e],d=G[2*e+1],l=G[2*t],u=G[2*t+1],h=G[2*n],p=G[2*n+1],g=G[2*s],m=G[2*s+1],y=pt.add3L(c,l,i);d=pt.add3H(y,d,u,a),c=y|0,{Dh:m,Dl:g}={Dh:m^d,Dl:g^c},{Dh:m,Dl:g}={Dh:pt.rotrSH(m,g,16),Dl:pt.rotrSL(m,g,16)},{h:p,l:h}=pt.add(p,h,m,g),{Bh:u,Bl:l}={Bh:u^p,Bl:l^h},{Bh:u,Bl:l}={Bh:pt.rotrBH(u,l,63),Bl:pt.rotrBL(u,l,63)},G[2*e]=c,G[2*e+1]=d,G[2*t]=l,G[2*t+1]=u,G[2*n]=h,G[2*n+1]=p,G[2*s]=g,G[2*s+1]=m}class nb extends Rw{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Je[0]|0,this.v0h=Je[1]|0,this.v1l=Je[2]|0,this.v1h=Je[3]|0,this.v2l=Je[4]|0,this.v2h=Je[5]|0,this.v3l=Je[6]|0,this.v3h=Je[7]|0,this.v4l=Je[8]|0,this.v4h=Je[9]|0,this.v5l=Je[10]|0,this.v5h=Je[11]|0,this.v6l=Je[12]|0,this.v6h=Je[13]|0,this.v7l=Je[14]|0,this.v7h=Je[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|65536|1<<24,t.salt){const s=uo(ys(t.salt));this.v4l^=hn(s[0]),this.v4h^=hn(s[1]),this.v5l^=hn(s[2]),this.v5h^=hn(s[3])}if(t.personalization){const s=uo(ys(t.personalization));this.v6l^=hn(s[0]),this.v6h^=hn(s[1]),this.v7l^=hn(s[2]),this.v7h^=hn(s[3])}if(t.key){const s=new Uint8Array(this.blockLen);s.set(ys(t.key)),this.update(s)}}get(){let{v0l:t,v0h:n,v1l:s,v1h:r,v2l:o,v2h:i,v3l:a,v3h:c,v4l:d,v4h:l,v5l:u,v5h:h,v6l:p,v6h:g,v7l:m,v7h:y}=this;return[t,n,s,r,o,i,a,c,d,l,u,h,p,g,m,y]}set(t,n,s,r,o,i,a,c,d,l,u,h,p,g,m,y){this.v0l=t|0,this.v0h=n|0,this.v1l=s|0,this.v1h=r|0,this.v2l=o|0,this.v2h=i|0,this.v3l=a|0,this.v3h=c|0,this.v4l=d|0,this.v4h=l|0,this.v5l=u|0,this.v5h=h|0,this.v6l=p|0,this.v6h=g|0,this.v7l=m|0,this.v7h=y|0}compress(t,n,s){this.get().forEach((c,d)=>G[d]=c),G.set(Je,16);let{h:r,l:o}=pt.fromBig(BigInt(this.length));G[24]=Je[8]^o,G[25]=Je[9]^r,s&&(G[28]=~G[28],G[29]=~G[29]);let i=0;const a=Ow;for(let c=0;c<12;c++)In(0,4,8,12,t,n+2*a[i++]),Un(0,4,8,12,t,n+2*a[i++]),In(1,5,9,13,t,n+2*a[i++]),Un(1,5,9,13,t,n+2*a[i++]),In(2,6,10,14,t,n+2*a[i++]),Un(2,6,10,14,t,n+2*a[i++]),In(3,7,11,15,t,n+2*a[i++]),Un(3,7,11,15,t,n+2*a[i++]),In(0,5,10,15,t,n+2*a[i++]),Un(0,5,10,15,t,n+2*a[i++]),In(1,6,11,12,t,n+2*a[i++]),Un(1,6,11,12,t,n+2*a[i++]),In(2,7,8,13,t,n+2*a[i++]),Un(2,7,8,13,t,n+2*a[i++]),In(3,4,9,14,t,n+2*a[i++]),Un(3,4,9,14,t,n+2*a[i++]);this.v0l^=G[0]^G[16],this.v0h^=G[1]^G[17],this.v1l^=G[2]^G[18],this.v1h^=G[3]^G[19],this.v2l^=G[4]^G[20],this.v2h^=G[5]^G[21],this.v3l^=G[6]^G[22],this.v3h^=G[7]^G[23],this.v4l^=G[8]^G[24],this.v4h^=G[9]^G[25],this.v5l^=G[10]^G[26],this.v5h^=G[11]^G[27],this.v6l^=G[12]^G[28],this.v6h^=G[13]^G[29],this.v7l^=G[14]^G[30],this.v7h^=G[15]^G[31],G.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sb=Uw(e=>new nb(e));function rb(e,t){const n=Array.from(`${e}::`).map(r=>r.charCodeAt(0)),s=new Uint8Array(n.length+t.length);return s.set(n),s.set(t,n.length),sb(s,{dkLen:32})}const ob=Vt(Fm(zt([Pe({Epoch:Xt()}),Pe({None:zt([Ve(!0),Ve(null)])})]))),_c=Zt("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),ib=Pe({budget:Vt(_c),price:Vt(_c),payment:Vt(rt(ao)),owner:Vt(St())}),xr=Pe({version:Ve(1),sender:Vt(St()),expiration:ob,gasConfig:ib,inputs:rt(rr),transactions:rt(Sw)});function Ec(e){return Re(e).replace("0x","")}class wn{constructor(t){this.version=1,this.sender=t==null?void 0:t.sender,this.expiration=t==null?void 0:t.expiration,this.gasConfig=(t==null?void 0:t.gasConfig)??{},this.inputs=(t==null?void 0:t.inputs)??[],this.transactions=(t==null?void 0:t.transactions)??[]}static fromKindBytes(t){const n=Ye.TransactionKind.parse(t),s="ProgrammableTransaction"in n?n.ProgrammableTransaction:null;if(!s)throw new Error("Unable to deserialize from bytes.");const r=Tt({version:1,gasConfig:{},inputs:s.inputs.map((o,i)=>Tt({kind:"Input",value:o,index:i,type:Tn(o,co)?"pure":"object"},rr)),transactions:s.transactions},xr);return wn.restore(r)}static fromBytes(t){var i;const n=Ye.TransactionData.parse(t),s=n==null?void 0:n.V1,r="ProgrammableTransaction"in s.kind?(i=s==null?void 0:s.kind)==null?void 0:i.ProgrammableTransaction:null;if(!s||!r)throw new Error("Unable to deserialize from bytes.");const o=Tt({version:1,sender:s.sender,expiration:s.expiration,gasConfig:s.gasData,inputs:r.inputs.map((a,c)=>Tt({kind:"Input",value:a,index:c,type:Tn(a,co)?"pure":"object"},rr)),transactions:r.transactions},xr);return wn.restore(o)}static restore(t){fi(t,xr);const n=new wn;return Object.assign(n,t),n}static getDigestFromBytes(t){const n=rb("TransactionData",t);return gr(n)}build({maxSizeBytes:t=1/0,overrides:n,onlyTransactionKind:s}={}){const r=this.inputs.map(l=>(fi(l.value,lo),l.value)),o={ProgrammableTransaction:{inputs:r,transactions:this.transactions}};if(s)return Ye.TransactionKind.serialize(o,{maxSize:t}).toBytes();const i=(n==null?void 0:n.expiration)??this.expiration,a=(n==null?void 0:n.sender)??this.sender,c={...this.gasConfig,...n==null?void 0:n.gasConfig};if(!a)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const d={sender:Ec(a),expiration:i||{None:!0},gasData:{payment:c.payment,owner:Ec(this.gasConfig.owner??a),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:r,transactions:this.transactions}}};return Ye.TransactionData.serialize({V1:d},{maxSize:t}).toBytes()}getDigest(){const t=this.build({onlyTransactionKind:!1});return wn.getDigestFromBytes(t)}snapshot(){return Tt(this,xr)}}var $a=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ve=(e,t,n)=>($a(e,t,"read from private field"),n?n.call(e):t.get(e)),ln=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},kr=(e,t,n,s)=>($a(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),et=(e,t,n)=>($a(e,t,"access private method"),n),le,Ws,Nr,Ks,zr,Hn,os,qa,jh,ja,Dh,Da,Fh,Fa,Nh,Hr,wi;const ab={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function cb(e){const t={kind:"Result",index:e},n=[],s=r=>n[r]??(n[r]={kind:"NestedResult",index:e,resultIndex:r});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(r,o){if(o in r)return Reflect.get(r,o);if(o===Symbol.iterator)return function*(){let a=0;for(;;)yield s(a),a++};if(typeof o=="symbol")return;const i=parseInt(o,10);if(!(Number.isNaN(i)||i<0))return s(i)}})}function db(e){const t=ma(e);return t?t.Struct.address==="0x2"&&t.Struct.module==="transfer"&&t.Struct.name==="Receiving":!1}function or(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}const zh=Symbol.for("@mysten/transaction"),Go={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},lb=1000n,ub=50,hb=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(n,s)=>e.slice(s*t,s*t+t));function fb(e){return!!e&&typeof e=="object"&&e[zh]===!0}const bi=class{constructor(e){ln(this,Ws),ln(this,Ks),ln(this,Hn),ln(this,qa),ln(this,ja),ln(this,Da),ln(this,Fa),ln(this,Hr),ln(this,le,void 0),kr(this,le,new wn(e?e.blockData:void 0))}static fromKind(e){const t=new bi;return kr(t,le,wn.fromKindBytes(typeof e=="string"?zn(e):e)),t}static from(e){const t=new bi;return typeof e!="string"||!e.startsWith("{")?kr(t,le,wn.fromBytes(typeof e=="string"?zn(e):e)):kr(t,le,wn.restore(JSON.parse(e))),t}setSender(e){ve(this,le).sender=e}setSenderIfNotSet(e){ve(this,le).sender||(ve(this,le).sender=e)}setExpiration(e){ve(this,le).expiration=e}setGasPrice(e){ve(this,le).gasConfig.price=String(e)}setGasBudget(e){ve(this,le).gasConfig.budget=String(e)}setGasOwner(e){ve(this,le).gasConfig.owner=e}setGasPayment(e){ve(this,le).gasConfig.payment=e.map(t=>vh(t,ao))}get blockData(){return ve(this,le).snapshot()}get[zh](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:xw((e,t)=>fa(e)?et(this,Ws,Nr).call(this,"pure",{Pure:Array.from(e.toBytes())}):et(this,Ws,Nr).call(this,"pure",e instanceof Uint8Array?vt.Pure(e):t?vt.Pure(e,t):e))}),this.pure}get gas(){return{kind:"GasCoin"}}object(e){if(typeof e=="object"&&"kind"in e)return e;const t=Sc(e),n=ve(this,le).inputs.find(s=>s.type==="object"&&t===Sc(s.value));return n&&Tn(n.value,yi)&&"Shared"in n.value.Object&&Tn(e,yi)&&"Shared"in e.Object&&(n.value.Object.Shared.mutable=n.value.Object.Shared.mutable||e.Object.Shared.mutable),n??et(this,Ws,Nr).call(this,"object",typeof e=="string"?Re(e):e)}objectRef(...e){return this.object(vt.ObjectRef(...e))}receivingRef(...e){return this.object(vt.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(vt.SharedObjectRef(...e))}add(e){const t=ve(this,le).transactions.push(e);return cb(t-1)}splitCoins(e,t){return this.add(Gn.SplitCoins(typeof e=="string"?this.object(e):e,t.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):et(this,Ks,zr).call(this,n))))}mergeCoins(e,t){return this.add(Gn.MergeCoins(typeof e=="string"?this.object(e):e,t.map(n=>typeof n=="string"?this.object(n):n)))}publish({modules:e,dependencies:t}){return this.add(Gn.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,packageId:n,ticket:s}){return this.add(Gn.Upgrade({modules:e,dependencies:t,packageId:n,ticket:typeof s=="string"?this.object(s):s}))}moveCall({arguments:e,typeArguments:t,target:n}){return this.add(Gn.MoveCall({arguments:e==null?void 0:e.map(s=>et(this,Ks,zr).call(this,s)),typeArguments:t,target:n}))}transferObjects(e,t){return this.add(Gn.TransferObjects(e.map(n=>typeof n=="string"?this.object(n):n),typeof t=="string"?this.pure.address(t):et(this,Ks,zr).call(this,t)))}makeMoveVec({type:e,objects:t}){return this.add(Gn.MakeMoveVec({type:e,objects:t.map(n=>typeof n=="string"?this.object(n):n)}))}serialize(){return JSON.stringify(ve(this,le).snapshot())}async sign(e){const{signer:t,...n}=e,s=await this.build(n);return t.signTransactionBlock(s)}async build(e={}){return await et(this,Hr,wi).call(this,e),ve(this,le).build({maxSizeBytes:et(this,Hn,os).call(this,"maxTxSizeBytes",e),onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await et(this,Hr,wi).call(this,e),ve(this,le).getDigest()}};let Bc=bi;le=new WeakMap;Ws=new WeakSet;Nr=function(e,t){const n=ve(this,le).inputs.length,s=Tt({kind:"Input",value:typeof t=="bigint"?String(t):t,index:n,type:e},rr);return ve(this,le).inputs.push(s),s};Ks=new WeakSet;zr=function(e){return fa(e)?this.pure(e):e};Hn=new WeakSet;os=function(e,{protocolConfig:t,limits:n}){if(n&&typeof n[e]=="number")return n[e];if(!t)return ab[e];const s=t==null?void 0:t.attributes[Go[e]];if(!s)throw new Error(`Missing expected protocol config: "${Go[e]}"`);const r="u64"in s?s.u64:"u32"in s?s.u32:s.f64;if(!r)throw new Error(`Unexpected protocol config value found for: "${Go[e]}"`);return Number(r)};qa=new WeakSet;jh=function(e){const t=et(this,Hn,os).call(this,"maxPureArgumentSize",e);ve(this,le).inputs.forEach((n,s)=>{if(Tn(n.value,co)&&n.value.Pure.length>t)throw new Error(`Input at index ${s} is too large, max pure input size is ${t} bytes, got ${n.value.Pure.length} bytes`)})};ja=new WeakSet;Dh=async function(e){if(ve(this,le).gasConfig.payment){const r=et(this,Hn,os).call(this,"maxGasObjects",e);if(ve(this,le).gasConfig.payment.length>r)throw new Error(`Payment objects exceed maximum amount: ${r}`)}if(e.onlyTransactionKind||ve(this,le).gasConfig.payment)return;const t=ve(this,le).gasConfig.owner??ve(this,le).sender,s=(await or(e).getCoins({owner:t,coinType:Wm})).data.filter(r=>!ve(this,le).inputs.find(i=>Tn(i.value,lo)&&"Object"in i.value&&"ImmOrOwned"in i.value.Object?r.coinObjectId===i.value.Object.ImmOrOwned.objectId:!1)).slice(0,et(this,Hn,os).call(this,"maxGasObjects",e)-1).map(r=>({objectId:r.coinObjectId,digest:r.digest,version:r.version}));if(!s.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(s)};Da=new WeakSet;Fh=async function(e){e.onlyTransactionKind||ve(this,le).gasConfig.price||this.setGasPrice(await or(e).getReferenceGasPrice())};Fa=new WeakSet;Nh=async function(e){const{inputs:t,transactions:n}=ve(this,le),s=[],r=[];if(t.forEach(o=>{if(o.type==="object"&&typeof o.value=="string"){r.push({id:Re(o.value),input:o});return}}),n.forEach(o=>{if(o.kind==="MoveCall"&&o.arguments.some(a=>a.kind==="Input"&&!Tn(t[a.index].value,lo))&&s.push(o),o.kind==="SplitCoins"&&o.amounts.forEach(i=>{if(i.kind==="Input"){const a=t[i.index];typeof a.value!="object"&&(a.value=vt.Pure(Ye.U64.serialize(a.value)))}}),o.kind==="TransferObjects"&&o.address.kind==="Input"){const i=t[o.address.index];typeof i.value!="object"&&(i.value=vt.Pure(Ye.Address.serialize(i.value)))}}),s.length&&await Promise.all(s.map(async o=>{const[i,a,c]=o.target.split("::"),d=await or(e).getNormalizedMoveFunction({package:mn(i),module:a,function:c}),u=d.parameters.length>0&&ow(d.parameters.at(-1))?d.parameters.slice(0,d.parameters.length-1):d.parameters;if(u.length!==o.arguments.length)throw new Error("Incorrect number of arguments.");u.forEach((h,p)=>{const g=o.arguments[p];if(g.kind!=="Input")return;const m=t[g.index];if(Tn(m.value,lo))return;const y=m.value,E=gi(h,y);if(E){m.value=vt.Pure(y,E);return}if(ma(h)!=null||typeof h=="object"&&"TypeParameter"in h){if(typeof y!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(y,null,2)}`);r.push({id:y,input:m,normalizedType:h});return}throw new Error(`Unknown call arg type ${JSON.stringify(h,null,2)} for value ${JSON.stringify(y,null,2)}`)})})),r.length){const o=[...new Set(r.map(({id:l})=>l))],i=hb(o,ub),a=(await Promise.all(i.map(l=>or(e).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat();let c=new Map(o.map((l,u)=>[l,a[u]]));const d=Array.from(c).filter(([l,u])=>u.error).map(([l,u])=>l);if(d.length)throw new Error(`The following input objects are invalid: ${d.join(", ")}`);r.forEach(({id:l,input:u,normalizedType:h})=>{var y;const p=c.get(l),g=(y=p.data)==null?void 0:y.owner,m=g&&typeof g=="object"&&"Shared"in g?g.Shared.initial_shared_version:void 0;if(m){const E=h!=null&&pi(h)==null&&Sh(h)==null,v=bw(u.value)||E||h!=null&&pi(h)!=null;u.value=vt.SharedObjectRef({objectId:l,initialSharedVersion:m,mutable:v})}else h&&db(h)?u.value=vt.ReceivingRef(p.data):u.value=vt.ObjectRef(p.data)})}};Hr=new WeakSet;wi=async function(e){if(!e.onlyTransactionKind&&!ve(this,le).sender)throw new Error("Missing transaction sender");if(!e.protocolConfig&&!e.limits&&e.client&&(e.protocolConfig=await e.client.getProtocolConfig()),await Promise.all([et(this,Da,Fh).call(this,e),et(this,Fa,Nh).call(this,e)]),!e.onlyTransactionKind&&(await et(this,ja,Dh).call(this,e),!ve(this,le).gasConfig.budget)){const t=await or(e).dryRunTransactionBlock({transactionBlock:ve(this,le).build({maxSizeBytes:et(this,Hn,os).call(this,"maxTxSizeBytes",e),overrides:{gasConfig:{budget:String(et(this,Hn,os).call(this,"maxTxGas",e)),payment:[]}}})});if(t.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const n=lb*BigInt(this.blockData.gasConfig.price||1n),s=BigInt(t.effects.gasUsed.computationCost)+n,r=s+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);this.setGasBudget(r>s?r:s)}et(this,qa,jh).call(this,e)};function Pc(e){const t={launchpad:j[e||"Sui"].launchpad,ido:j[e||"Sui"].ido,xcetus:j[e||"Sui"].xcetus,xcetus_dividends:j[e||"Sui"].xcetus_dividends,cetus_faucet:j[e||"Sui"].cetus_faucet,xtoken:j[e||"Sui"].xtoken,xtoken_dividends:j[e||"Sui"].xtoken_dividends,token_faucet:j[e||"Sui"].token_faucet,booster:j[e||"Sui"].booster,maker_bonus:j[e||"Sui"].maker_bonus,liquidity_stratefy:j[e||"Sui"].liquidity_stratefy,vaults:j[e||"Sui"].vaults,frams:j[e||"Sui"].frams},n={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal4`)||j[e||"Sui"].fullRpcUrl,simulationAccount:j[e||"Sui"].simulationAccount,cetus_config:j[e||"Sui"].cetus_config,clmm_pool:j[e||"Sui"].clmm_pool,integrate:j[e||"Sui"].integrate,deepbook:j[e||"Sui"].deepbook,deepbook_endpoint_v2:j[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:j[e||"Sui"].aggregatorUrl},s=new cf(n),r=new Rc(t,s),o=Si(),i=jn(()=>o);Oc(()=>{i.value.address&&(s.senderAddress=i.value.address)});const a=w=>({transactionBlock:w,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),c=async()=>{try{return(await r.Farms.getFramsPoolList()).data}catch(w){console.log(" ~ file: useFarms.ts:70 ~ getFramsPoolList ~ error:",w)}},d=async(w,_)=>{const I=await r.Farms.getOwnedFramsPositionNFTList(r.ClmmSDK.senderAddress,w,_);return I&&!Gr(I)?I.data?I.data:Object.values(I)[0]:[]},l=async(w,_)=>{const I={pool_id:_,clmm_position_id:w.clmm_position_id},M=await r.Farms.depositPayload(I),F={action:"FarmingStake",txbParams:I};return{txb:a(M),payloadParams:F}},u=async(w,_)=>{const I={pool_id:w,position_nft_id:_},M=await r.Farms.withdrawPayload(I),F={action:"FarmingUnstake",txbParams:I};return{txb:a(M),payloadParams:F}},h=async w=>await r.Farms.calculateFarmingRewards(w,!0),p=async w=>{const _=await r.Farms.harvestPayload(w),I={action:"FarmingHarvest",txbParams:w};return{txb:a(_),payloadParams:I}},g=async w=>{const _=await r.Farms.batchHarvestPayload(w),I={action:"FarmingBatchHarvest",txbParams:w};return{txb:a(_),payloadParams:I}},m=(w,_,I)=>{const M=w.tick_lower_index,F=w.tick_upper_index,{liquidity:X}=w,{price:te,effective_tick_lower:we,effective_tick_upper:be,total_wrapped_amount:xe}=_,Ce=Lc.calculatePositionShare(M,F,X,te,we,be,I);return new se(Ce).div(new se(xe)).mul(100).toString()},y=async w=>(await s.Position.fetchPosFeeAmount(w)).map((M,F)=>({positionId:w[F].positionId,pool:w[F].poolAddress,feeOwedA:new se(M.feeOwedA.toString()).div(Math.pow(10,w[F].decimalA)).toString(),feeOwedB:new se(M.feeOwedB.toString()).div(Math.pow(10,w[F].decimalB)).toString()})),E=async w=>{const _=await r.Farms.getFramsPositionNFT(w,!0);if(_===void 0)setTimeout(()=>{E(w)},5e3);else return _};return{getFramsPoolList:c,getOwnedFramsPositionNFTList:d,farmsDeposit:l,farmsWithdraw:u,calculateFarmingRewards:h,harvestFarms:p,batchHarvest:g,calculatePositionShare:m,fetchPosFeeAmount:y,getFramsPositionNFT:E,batchHarvestAndClmmFee:async(w,_)=>{const I={action:"batchHarvestAndClmmFee",txbParams:{framsListParams:w,clmmListParams:_}},M=await r.Farms.batchHarvestAndClmmFeePayload(w,_);return{txb:a(M),payloadParams:I}}}}const pb=ho("pool",{state:()=>({tokens:[],tokensObj:{},pools:[],poolsObj:{},myPositions:[],addressLpTokens:{},addressTokens:{},currentPositionLoading:!1,myPositionsLoading:!0,poolsLoading:!0,RATES:{},currentPositionInfo:{},poolConfigList:[],feeOwedObj:{},rewarderObj:{},chinaTokens:[],chinaTokensObj:{},getPoolInfoSuccess:!1,recommendRangesObj:{},allTokenObj:{},isTokenLoading:!0,poolPriceConfigObj:{},defaultPoolInfo:{},poolConfigObj:{},openPool:[],routerPoolConfigObj:{},tokensWarningObj:{},currentChain:"",liquidityCurrentPoolInfo:{},positionDetailCurrentTab:"increase",positionActionAmount:{fromCoinAmount:"",toCoinAmount:""},currentPoolTab:"All",currentPoolMoreInfo:{},poolPositions:[],autoPoolNum:"--",tokenExternalPriceObj:{},positionShowList:[],getPendingFeeSuccess:!1,getRewardSuccess:!1,coinMetaData:JSON.parse(localStorage.getItem("SuiTokenObj")||"{}"),notTrustedObj:{},poolListPageSize:20,poolListLoading:!1,isContractTokenLoaing:!0}),actions:{async setPageSize(e){this.poolListLoading=!0,await Vn(1e3),this.poolListPageSize=e,this.poolListLoading=!1},async setLiquidityCurrentPoolInfo(e){this.liquidityCurrentPoolInfo=e},async setPoolPositions(e){this.poolPositions=e},async setCurrentPoolMoreInfo(e){this.currentPoolMoreInfo=e},async setChainPoolConfigList(e){this.poolConfigList=e,this.pools=e},async setCurrentPoolTab(e){this.currentPoolTab=e},async setPoolConfigList(e,t,n=!0){const r=await ht(e).getLpList(t,n);console.log(" ~ file: pool.ts:77 ~ setPoolConfigList ~ res:",r);const o=[],i=[],a=[];r.forEach(d=>{var u,h,p;const l={...d,token_a:{...d==null?void 0:d.coinA,logoURI:(u=d==null?void 0:d.coinA)==null?void 0:u.logo_url},token_b:{...d==null?void 0:d.coinB,logoURI:(h=d==null?void 0:d.coinB)==null?void 0:h.logo_url},isFarming:d.is_display_rewarder&&(d.rewarder_display1||d.rewarder_display2||d.rewarder_display3),chain:e==="Aptos"?"aptos":"sui",fee_rate:d.fee*1e4,routerSymbol:[d.coin_a_address,d.coin_b_address].sort(function(g,m){return m.localeCompare(g)}).join("-")};d.is_closed||o.push(l),e=="Sui"&&(!((p=d.object)!=null&&p.is_pause)||!d.is_pause)&&i.push(l),a.push(l)}),console.log("0509###setPoolConfigList###",i),this.poolConfigList=e=="Aptos"?o:i,console.log(" ~ file: pool.ts:108 ~ setPoolConfigList ~ list:",o),this.poolConfigObj=e=="Aptos"?Object.fromEntries(o.map((d,l)=>[d.address,d])):Object.fromEntries(i.map((d,l)=>[d.address,d]));const c=a.filter(d=>!d.is_pause);this.openPool=c,this.routerPoolConfigObj=Object.fromEntries(c.map((d,l)=>[d.address,d]))},async getRecommendRanges(e){var t;try{let n=null;if(e&&e.includes("Sui")?n=await $fetch(`${j[e].api}/v2/sui/liquidity/recommend_ranges`):n=await $fetch(`${j.Aptos.api}/v2/liquidity/recommend_ranges`),(t=n==null?void 0:n.data)!=null&&t.list){const s=Object.fromEntries(n.data.list.map((r,o)=>[r.address,r]));this.recommendRangesObj=s,this.poolPriceConfigObj=s}else this.recommendRangesObj={},this.poolPriceConfigObj={}}catch(n){console.info(" ~ file: pool.ts:134 ~ getRecommendRanges ~ error:",n),this.recommendRangesObj={},this.poolPriceConfigObj={}}},async setPools(e,t){this.poolsLoading=!0,this.getPoolInfoSuccess=!1,this.currentChain=t;const n=ht(t);if((t==null?void 0:t.toLowerCase())==="aptos"){if(e&&e.length>0){for(let s=0;s<e.length&&t===this.currentChain;s++){const r=e[s],o=await n.getPools([r.address]);this.defaultPoolInfo[o[0].poolAddress]=o[0],this.poolsObj[o[0].poolAddress]={...r,...o[0],fee:Number(o[0].fee_rate)/1e6},this.addressLpTokens=this.poolsObj,this.poolsLoading=!1,await Vn(500)}this.getPoolInfoSuccess=!0}}else if(e&&e.length>0){e.map(r=>r.address);const s={};for(let r=0;r<e.length;r++){const o=e[r];s[o.address]={...o}}console.log("0605###setPools###result###",s),this.poolsObj=s,this.addressLpTokens=s,this.poolsLoading=!1,this.getPoolInfoSuccess=!0}},async setSinglePool(e,t,n){const r=await ht(n).getPool(e.address);console.log(t,"recommendRangesInfo");const o={...e,...r,fee:r.fee_rate/1e6,type:(t==null?void 0:t.type)||""};console.log("0506###setSinglePool###result###",o),this.poolsObj[e.address]=o,console.log(this.poolsObj,"===>173"),this.addressLpTokens[e.address]=o},async updateCurrentPools(e,t){const n=ht(t),s=this.poolsObj[e];if(console.log(s,"===>currentPool"),s){let r={};t&&t.includes("Sui")?r=await n.getPool((s==null?void 0:s.poolAddress)||(s==null?void 0:s.address)):r=await n.getPoolState(s.poolAddress,s.poolType,!1),console.log("0411###debug###newInfo####",r);const o={...this.poolsObj},i={...o[e],...r};console.log("0411###debug###newCurrentInfo####",i),o[e]={...i},console.log("0411###debug###newPoolsObj####",o),this.poolsObj=o}},async setTokens(e){this.isContractTokenLoaing=!0;const t=[];console.log("0613###setTokens####111111###",e);const n=ht(e);console.log("0613###setTokens####22222###contract###",n);const s=await n.getTokenList();console.log("0613###setTokens####22222###res###",s),s.forEach(r=>{t.push({...r,logoURI:r.logo_url,chain:e.toLowerCase()})}),this.tokens=t,this.isContractTokenLoaing=!1},setCurrentPositionLoading(e){this.currentPositionLoading=e},setMyPositionsLoading(e){this.myPositionsLoading=e},async setRates(e){var r;let t={};if(e&&e.includes("Sui"))try{t=await $fetch(`${j.Sui.api}/v2/sui/market_price`)}catch(o){console.log("sui pric api error ###",o),t={}}else t=await $fetch(`${j.Aptos.api}/v2/price`);const n=((r=t==null?void 0:t.data)==null?void 0:r.prices)||[],s=[];n.forEach(o=>{o.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?s.push({...o},{...o,base_symbol:"0x2::sui::SUI"}):s.push(o)}),this.RATES=Object.fromEntries(s.map(o=>[o.base_symbol,o]))},async getMyPositons(e,t,n){console.log("0507###getMyPositons###start###",t),this.setMyPositionsLoading(!0);const s=ht(n);let r=[],o=[];this.getRewardSuccess=!1,this.getPendingFeeSuccess=!1;let i={};if(n=="Sui"){const{clmmPosition:u,farmsPosition:h}=await s.getAllPosition(e,t);r=u,o=h;const p=r==null?void 0:r.map(y=>y==null?void 0:y.pool),g=o==null?void 0:o.map(y=>y==null?void 0:y.clmm_pool_id),m=[...new Set([...p,...g])];if(m&&m.length>0){const y=await(s==null?void 0:s.getPools(m));i=Object.fromEntries(y==null?void 0:y.map(E=>[E==null?void 0:E.poolAddress,E]))}}else r=await s.getPositionList(e,t)||[],console.log(" ~ file: pool.ts:343 ~ getMyPositons ~ positionList:",r);let a=[];n=="Sui"&&(a=o.map(u=>{const h=[];let p=new se(0);return u.rewards.forEach(g=>{var _;const m=g.rewarder_type,y=this.tokensObj[m],E=((_=this.RATES[m])==null?void 0:_.price)||0,v=new se(g.rewarder_amount).div(new se(Math.pow(10,y.decimals))),w=v.mul(new se(E));p=p.add(w),v.toNumber()>0&&h.push({...g,amount:v,rewarderAmountUsd:w.toString(),address:m,symbol:y.symbol})}),{...u,rewards:h,farmingRewardTotalUsd:p.toNumber(),positionSource:"farming"}}),console.log("farmingPositionList:",a)),console.log("0507###getMyPositons###positionList###",r),r.length<1&&(this.setMyPositionsLoading(!1),this.getRewardSuccess=!0,this.getPendingFeeSuccess=!0);const c=a.concat(r);console.log(c,"##allPositionList");const d=[];c.forEach(u=>{var M,F,X,te,we,be,xe,Ce,Ne,Xe,Yt,it,yt,at,ct,dt,en,tn;const h={...t[u.pool||u.clmm_pool_id],...i[u.pool||u.clmm_pool_id]};let p,g,m,y,E="",v,w,_,I;if(console.log("allPositionList item:",u),u.liquidity&&u.liquidity!=="0"&&h){const Ct={creator:u.creator,collection:u.collection,name:u.name};n==="Aptos"?I=s.getNftHash(Ct):I=s.getNftHash(u);const kt=(M=h.token_a)==null?void 0:M.decimals,_t=(F=h.token_b)==null?void 0:F.decimals;console.log(h,"poolInf=====>"),h!=null&&h.current_sqrt_price&&(m=s.TickMath.sqrtPriceX64ToPrice(h==null?void 0:h.current_sqrt_price,kt,_t).toString(),y=new se(1).div(s.TickMath.sqrtPriceX64ToPrice(h==null?void 0:h.current_sqrt_price,kt,_t)).toString()),u.tick_lower_index==s.TickUtil.getMinIndex(Number(h.tickSpacing))?p="0":p=s.TickMath.tickIndexToPrice(Number(u.tick_lower_index),kt,_t).toString(),u.tick_upper_index==s.TickUtil.getMaxIndex(Number(h.tickSpacing))?g="":(g=s.TickMath.tickIndexToPrice(Number(u.tick_upper_index),kt,_t).toString(),console.log("0523###maxPrice###2222###",g));let nn,lt;g!==""?lt=new se(1).div(new se(g)).toString():lt="",p!==0?nn=new se(1).div(new se(p)).toString():nn="0";const sn=h.needReverse?((be=this.tokensObj[(we=h==null?void 0:h.coinB)==null?void 0:we.address])==null?void 0:be.labels)||[]:((te=this.tokensObj[(X=h==null?void 0:h.coinA)==null?void 0:X.address])==null?void 0:te.labels)||[],rn=h.needReverse?((Ce=this.tokensObj[(xe=h==null?void 0:h.coinA)==null?void 0:xe.address])==null?void 0:Ce.labels)||[]:((Xe=this.tokensObj[(Ne=h==null?void 0:h.coinB)==null?void 0:Ne.address])==null?void 0:Xe.labels)||[],wr=[...new Set(sn.concat(rn))],Rs=s.getCoinAmountFromLiquidity({pool:h,position:u,roundUp:n!="Sui"}),as=Rs.coinaAmount,B=Rs.coinbAmount;console.log(m,"===>currentPrice");const R=Number(B)+Number(as)*Number(m);let D=(Number(as)*Number(m)/R*100).toFixed(0),z=(B/R*100).toFixed(0);p=="0"&&g==""&&(D="50",z="50"),h.isPause?E="Closed":Number(m)>=Number(p)&&(g===""||Number(m)<=Number(g))?E="Active":(Number(m)>Number(g)||Number(m)<Number(p))&&(E="Inactive"),console.log("0323###this.tokensObj####",this.tokensObj),console.log("0323###this.tokensObj[poolInfo.token_a.address]####",this.tokensObj[(Yt=h==null?void 0:h.token_a)==null?void 0:Yt.address]),console.log("0323###poolInfo.token_a.address####",(it=h==null?void 0:h.token_a)==null?void 0:it.address),console.log("0323###poolInfo.token_b.address####",(yt=h==null?void 0:h.token_b)==null?void 0:yt.address);let W={},ee={};n==="Aptos"?(W={...h.token_a,...this.tokensObj[(at=h==null?void 0:h.token_a)==null?void 0:at.address],logoURI:(dt=this.tokensObj[(ct=h==null?void 0:h.token_a)==null?void 0:ct.address])==null?void 0:dt.logo_url},ee={...h.token_b,...this.tokensObj[(en=h==null?void 0:h.token_b)==null?void 0:en.address],logoURI:this.tokensObj[(tn=h==null?void 0:h.token_b)==null?void 0:tn.address].logo_url}):(W=h==null?void 0:h.token_a,ee=h==null?void 0:h.token_b),d.push({poolInfoOrigin:i[u.pool||u.clmm_pool_id],...h,...u,labels:wr,totalAmount:R,token_a:W,token_b:ee,tokenARates:v,tokenBRates:w,amountA:as,amountB:B,fromPercent:D,toPercent:z,amountUSD:_,tokenName:u.tokenName||u.name,currentStatus:E,positionLiquidity:u.liquidity,nftHash:I,currentPrice:m,currentPriceReverse:y,minPrice:Wn(p,12),maxPrice:Wn(g,12),positionSource:u.id?"farming":"clmm",farmingRewardTotalUsd:u.id?u.farmingRewardTotalUsd:0,minPriceResever:nn,maxPriceResever:lt})}});const l=d.sort((u,h)=>h.amountUSD-u.amountUSD);this.myPositions=l,this.setMyPositionsLoading(!1),this.getPendingFees(l,n),this.getRewarderV2(l,n),console.log(l,"===>this.myPositions")},setMyPositions(){this.myPositions=[],this.feeOwedObj={},this.rewarderObj={}},async setCurrentPositionInfo(e,t,n,s,r="",o=""){var p,g,m,y,E,v;const i=ht(s);let a;s=="Sui"&&(a=Pc(s));let c=null,d=null,l=null,u=null,h=null;if(e&&r||s==="Aptos"?(c=this.addressLpTokens&&this.addressLpTokens[e],d=await i.getPool(e),h=this.poolConfigObj[e],console.log(h,"===>poolConfig"),l={...c,...d,...h},console.log(l,"423"),u=await i.getPositionInfo(l,t,n,r)):s!=="Aptos"&&(console.log("0414###setCurrentPositionInfo###",r),u=o=="farming"?await a.getFramsPositionNFT(r):await i.getPositionById(r),console.log(" ~ file: pool.ts:562 ~ setCurrentPositionInfo ~ positionInfo:",u),console.log(u,"setCurrentPositionInfo:positionInfo"),d=o=="farming"?await i.getPool(u.clmm_pool_id):await i.getPool(u.pool),c=this.addressLpTokens&&this.addressLpTokens[u.pool||this.addressLpTokens.poolAddress],h=this.poolConfigObj[u.clmm_pool_id||u.pool],console.log(this.poolConfigObj[u.clmm_pool_id],"##this.poolConfigObj[poolAddress]"),l={...c,...d,...h},console.log("poolInfoNew:",c,d),console.log("0414###setCurrentPositionInfo###positionInfo###",u),console.log("0414###setCurrentPositionInfo###poolInfo###",l)),console.log("setCurrentPositionInfo:",l),u&&l){let w,_,I,M,F="",X,te,we,be,xe,Ce=0,Ne=0,Xe;const Yt={creator:u.pool,collection:u.collectionName,name:u.name};s==="Aptos"?Xe=i.getNftHash(Yt):Xe=i.getNftHash(u),console.log("0329###setCurrentPositionInfo###poolInfo###",l),console.log("0329###setCurrentPositionInfo###positionInfo###",u);let it=0,yt=0;if(l!=null&&l.token_a&&(l!=null&&l.token_b))it=(p=l==null?void 0:l.token_a)==null?void 0:p.decimals,yt=(g=l==null?void 0:l.token_b)==null?void 0:g.decimals;else{const at=(await i.getTokenListByCoinType(l==null?void 0:l.coinTypeA))[0],ct=(await i.getTokenListByCoinType(l==null?void 0:l.coinTypeB))[0];it=at==null?void 0:at.decimals,yt=ct==null?void 0:ct.decimals,l.coinA=at,l.coinB=ct,l.token_a=at,l.token_b=ct}if(l){try{let lt;if(o!=="farming"){const sn=await i.getTickDataByIndex(l.ticks_handle,Number(u.tick_lower_index)),rn=await i.getTickDataByIndex(l.ticks_handle,Number(u.tick_upper_index));lt=await i.getCollectFeesQuote({pool:l,position:u,tickLowerData:sn,tickUpperData:rn},d)}else{console.log(l,l.token_a,"setCurrentPositionInfo:poolInfo");const sn=[{poolAddress:l.poolAddress,positionId:u.clmm_position_id,coinTypeA:l.coinTypeA,coinTypeB:l.coinTypeB,decimalA:l.token_a.decimals,decimalB:l.token_b.decimals}];console.log(sn,"params###");const rn=await a.fetchPosFeeAmount(sn);console.log(rn,"##farmingPositionFee"),lt=rn[0]}console.log(lt,"setCurrentPositionInfo feeOwn:"),lt&&(Ce=Number(lt.feeOwedA),Ne=Number(lt.feeOwedB))}catch(lt){console.log("0314###getCollectFeesQuote###error####",lt)}console.log("0413####setCurrentPositionInfo###poolInfo###",l),I=i.TickMath.sqrtPriceX64ToPrice(l.current_sqrt_price,it,yt).toString(),M=new se(1).div(i.TickMath.sqrtPriceX64ToPrice(l==null?void 0:l.current_sqrt_price,it,yt)).toString(),u.tick_lower_index==i.TickUtil.getMinIndex(Number(l.tickSpacing))?w="0":w=i.TickMath.tickIndexToPrice(Number(u.tick_lower_index),it,yt).toString(),u.tick_upper_index==i.TickUtil.getMaxIndex(Number(l.tickSpacing))?_="":_=i.TickMath.tickIndexToPrice(Number(u.tick_upper_index),it,yt).toString();let at,ct;_!==""?ct=new se(1).div(new se(_)).toString():ct="",w!==0?at=new se(1).div(new se(w)).toString():at="0",X=u.tick_lower_index,te=u.tick_upper_index;const dt=i.getCoinAmountFromLiquidity({pool:l,position:u,roundUp:s!="Sui"});let en,tn,Ct;console.log(I,"===>currentPrice522"),I&&I>0&&(be=dt==null?void 0:dt.coinaAmount,xe=dt==null?void 0:dt.coinbAmount,console.log(dt,"===>amountInfo"),console.log(I,"===>currentPrice"),Ct=Number(xe)+Number(be)*Number(I),console.log(Ct,"===>totalAmount"),en=(Number(be)*Number(I)/Ct*100).toFixed(0),console.log(en,"===>fromPercent"),tn=(Number(xe/Number(Ct))*100).toFixed(0),console.log(tn,"==>toPercent"));let kt;const _t=dt.coinaAmount*((m=this.RATES[l==null?void 0:l.token_a.address])==null?void 0:m.price),nn=dt.coinbAmount*((y=this.RATES[l==null?void 0:l.token_b.address])==null?void 0:y.price);(E=this.RATES[l==null?void 0:l.token_a.address])!=null&&E.price&&((v=this.RATES[l==null?void 0:l.token_b.address])!=null&&v.price)&&(kt=_t+nn),console.log(kt,"==>totalAmountUSD"),l.isPause?F="Closed":Number(I)>=Number(w)&&(_===""||Number(I)<=Number(_))?F="Active":(Number(I)>Number(_)||Number(I)<Number(w))&&(F="Inactive"),this.currentPositionInfo={...u,poolInfo:l,token_a:{...l.token_a,...this.tokensObj[l.token_a.address]},token_b:{...l.token_b,...this.tokensObj[l.token_b.address]},current_tick_index:l.current_tick_index,current_sqrt_price:l.current_sqrt_price,tickSpacing:l.tickSpacing,fee:l.fee,poolAddress:l.poolAddress,address:l.address,is_display_rewarder:l.is_display_rewarder,nftHash:Xe,feeOwedA:Ce,feeOwedB:Ne,currentStatus:F,amountA:be,amountB:xe,tokenARates:_t,tokenBRates:nn,amountUSD:we,totalAmount:Ct,totalAmountUSD:kt,currentPrice:I,currentPriceReverse:M,minPrice:Wn(w,12),minTick:X,maxTick:te,maxPrice:Wn(_,12),fromPercent:en||"--",toPercent:tn||"--",tokenName:u.tokenName||u.name,positionSource:u.id?"farming":"clmm",minPriceResever:at,maxPriceResever:ct},this.currentPositionLoading=!1,console.log("positionInfo.value",this.currentPositionInfo)}}},async getPendingFees(e,t){var i,a;const n=this.RATES,s=ht(t);let r,o=[];if(t=="Sui"){r=Pc("Sui");const c=e.filter(d=>d.positionSource==="farming").map(d=>({poolAddress:d.poolAddress,positionId:d.clmm_position_id,coinTypeA:d.coinTypeA,coinTypeB:d.coinTypeB,decimalA:d.token_a.decimals,decimalB:d.token_b.decimals}));c.length>0&&(console.log(" ~ file: pool.ts:860 ~ getPendingFees ~ farmsPosFeeParams:",c),o=await r.fetchPosFeeAmount(c),console.log(" ~ file: pool.ts:860 ~ getPendingFees ~ farmingPositionFeeList:",o))}console.log("0302###getPendingFees####result###",e);for(let c=0;c<e.length;c++){const d=e[c];let l=e[c].poolInfoOrigin;l||(l=await s.getPool(d.poolAddress));const u={...l,token_a:(d==null?void 0:d.token_a)||this.tokensObj&&this.tokensObj[l.coinTypeA]||this.chinaTokensObj&&this.chinaTokensObj[l.coinTypeA],token_b:(d==null?void 0:d.token_b)||this.tokensObj&&this.tokensObj[l.coinTypeB]||this.chinaTokensObj&&this.chinaTokensObj[l.coinTypeB]};let h;if(e[c].positionSource=="farming"){console.log("result[i]:",e[c]);let _;try{_=o.filter(I=>I.positionId===d.clmm_position_id),console.log(_,"##farmingPositionFee"),h=_[0]}catch(I){console.log(" ~ file: pool.ts:831 ~ getPendingFees ~ error:",I)}}else if(l){const _=await s.getTickDataByIndex(l.ticks_handle,Number(d.tick_lower_index)),I=await s.getTickDataByIndex(l.ticks_handle,Number(d.tick_upper_index));console.log("0323####getPendingFees###pool###",l),console.log("0323####getPendingFees###positionItem.collection###",d.collection),console.log("0323####getPendingFees###positionItem.tokenName###",d.tokenName),console.log("0323####getPendingFees###positionItem###",d);const M=t==="Aptos"?"":d.pos_object_id,F=await s.getPositionInfo(l,d.collection,d.tokenName,M);console.log("0302###positionInfo",F),console.log("0302###resultPool###",u),console.log(l,"pool====>654");try{h=await s.getCollectFeesQuote({pool:u,position:F,tickLowerData:_,tickUpperData:I},l)}catch(X){console.log(" ~ file: pool.ts:852 ~ getPendingFees ~ error:",X)}}console.log("0330###getPendingFees###feeOwn###",h);const p=[],g=Number(h==null?void 0:h.feeOwedA),m=Number(h==null?void 0:h.feeOwedB);let y,E,v;n&&n[u.token_a.address]&&n[u.token_b.address]?(E=g*((i=n[u.token_a.address])==null?void 0:i.price),v=m*((a=n[u.token_b.address])==null?void 0:a.price),y=E+v):y="--",p.push({amount:g,amountUSD:E,...u.token_a,logoURI:u.token_a.logo_url},{amount:m,amountUSD:v,...u.token_b,logoURI:u.token_b.logo_url});const w=this.poolConfigObj&&this.poolConfigObj[l==null?void 0:l.poolAddress];console.log(w,"poolConfigInfo===>710"),this.feeOwedObj[d.tokenName]={feesResult:w!=null&&w.needReverse?p.reverse():p,feeOwed:y},console.log(this.feeOwedObj,"===>this.feeOwedObj"),await Vn(1e3)}this.getPendingFeeSuccess=!0},async getRewarder(e,t){const n=ht(t),s=this;console.log(e,"===>results");for(let r=0;r<e.length;r++)if(e[r].rewarder_infos&&e[r].rewarder_infos.length>0){const o=e[r];console.log(r,"i===>"),console.log(o,"===>positionItem"),console.log(o.ticks_handle,"===>positionItem.ticks_handle"),console.log(o.tick_lower_index,"===>positionItem.tick_lower_index"),console.log(o.tick_upper_index,"===>positionItem.tick_upper_index");const i=await n.getTickDataByIndex(o.ticks_handle,Number(o.tick_lower_index)),a=await n.getTickDataByIndex(o.ticks_handle,Number(o.tick_upper_index));let c=[];t==="Aptos"?c=await n.getPosRewardersAmount({poolAddress:o.poolAddress,positionName:o.tokenName,tickLowerData:i,tickUpperData:a}):c=await n.getPosRewardersAmount({poolAddress:o.poolAddress,pos:o.pos_object_id,positionHandle:o.position_manager.positions_handle}),console.log(c,"rewarderInfo===>");const d=[];let l=0;c.forEach((u,h)=>{var y;const p=s.tokensObj[u.coin_address].decimals,g=u.amount_owed.toString(),m=Ue(new se(g).div(Math.pow(10,p)).toString(),p);if(o[`rewarder_display${h+1}`]||Number(m)>0){const E=s.tokensObj[u.coin_address];console.log(u.amount_owed.toString(),"===>element.amount_owed.toString()");const v=(y=s.RATES[u.coin_address])==null?void 0:y.price;console.log(v,"price===>"),console.log(m,"==>amount");const w=Number(m)*v;l+=w,d.push({...u,...E,amount:m,amountUSD:w,amount_owed:u.amount_owed.toString()}),s.rewarderObj[o.tokenName]={pendingRewarderArr:d,pendingRewarderView:Number(Ue(l,2)),pendingRewarder:l}}}),console.log(s.rewarderObj,"===>_this.rewarderObj"),await Vn(1e3)}},async getRewarderV2(e,t){var i,a;const n=ht(t),s=this;console.log(e,"===>results");let r=[];t!=="Aptos"&&(r=e==null?void 0:e.map(c=>({poolAddress:c.poolAddress,positionId:c.positionSource=="clmm"?c.pos_object_id:c.clmm_position_id,coinTypeA:c.coinTypeA,coinTypeB:c.coinTypeB,rewarderInfo:c.rewarder_infos})));const o=await n.batchFetchPosRewardersAmount(r);console.log(" ~ file: pool.ts:1074 ~ getRewarderV2 ~ batchFetchPosRewardersAmountRes:",o);for(let c=0;c<e.length;c++){const d=e[c];if(e[c].rewarder_infos&&e[c].rewarder_infos.length>0){console.log(d,"===>positionItem");let l=[];if(t==="Aptos"){const p=await n.getTickDataByIndex(d.ticks_handle,Number(d.tick_lower_index)),g=await n.getTickDataByIndex(d.ticks_handle,Number(d.tick_upper_index));l=await n.getPosRewardersAmount({poolAddress:d.poolAddress,positionName:d.tokenName,tickLowerData:p,tickUpperData:g})}else{const p=d.positionSource=="clmm"?d.pos_object_id:d.clmm_position_id;l=((a=(i=o.filter(g=>g.positionId===p))==null?void 0:i[0])==null?void 0:a.rewarderAmountOwed)||{}}const u=[];let h=0;l.forEach((p,g)=>{var v;const m=s.tokensObj[p.coin_address].decimals,y=p.amount_owed.toString(),E=Ue(new se(y).div(Math.pow(10,m)).toString(),m);if(d[`rewarder_display${g+1}`]||Number(E)>0){const w=s.tokensObj[p.coin_address],_=((v=s.RATES[p.coin_address])==null?void 0:v.price)||0;console.log(_,"price===>"),console.log(E,"==>amount");const I=Number(E)*_;h+=I,u.push({...p,...w,amount:E,amountUSD:I,amount_owed:p.amount_owed.toString()}),s.rewarderObj[d.tokenName]={pendingRewarderArr:u,pendingRewarderView:Number(Ue(h,2)),pendingRewarder:h}}}),await Vn(1e3)}console.log(s.rewarderObj,"===>_this.rewarderObj")}this.getRewardSuccess=!0},setAllTokenObj(e){console.log(e,"===>allTokenObj"),this.allTokenObj=e},async getTokensObj(e,t){if(this.isTokenLoading=!0,console.log(" ~ file: pool.ts:1130 ~ getTokensObj ~ pools, chainName:",e,t),t=="Sui")this.getCoinMetaData(!0);else{const n=ht("Aptos"),s=await n.getTokenList(),r=[];s.forEach(c=>{r.push({...c,logoURI:c.logo_url,chain:t.toLowerCase()})});const o=Object.fromEntries(r.map((c,d)=>[c.address,c]));console.log(" ~ file: pool.ts:1145 ~ getTokensObj ~ aptosTokensObj:",o);const i={};e.forEach(c=>{!o[c.coinA.address]&&!i[c.coinA.address]&&(i[c.coinA.address]=c),!o[c.coinB.address]&&!i[c.coinB.address]&&(i[c.coinB.address]=c)});const a=Object.keys(i);if(console.log(" ~ file: pool.ts:1158 ~ getTokensObj ~ params:",a),a.length>0){const c=await n.getTokenListByCoinType(a),d={};c.forEach(l=>{d[l.address]={...l,isSelfBuilt:!0}}),this.tokensObj={...this.tokensObj,...d}}else this.tokensObj=o;this.isTokenLoading=!1}console.log(" ~ file: pool.ts:1167 ~ getTokensObj ~ this.tokensObj :",this.tokensObj)},setNewTokens(e){this.tokensObj={...this.tokensObj,...e},console.log("setNewTokens###this.tokensObj####",this.tokensObj)},setPositionDetailCurrentTab(e){e!=this.positionDetailCurrentTab&&(this.positionActionAmount={},this.positionDetailCurrentTab=e)},setPositionActionAmount(e){this.positionActionAmount=e},async getMyPositonsByPool(e,t,n){console.log("0507###getMyPositons###start###",t),this.myPositionsLoading=!0;let s={};const r=ht(n);if(!t.current_sqrt_price){const h=await r.getPool(t.address)||{};s={...t,...h}}let o=[],i=[],a=[],c=[];if(n=="Sui"){const{clmmPosition:h,farmsPosition:p}=await r.getAllPosition(e,[t.address]);a=h,c=p,i=c.filter(g=>{if(g.clmm_pool_id==s.address)return g}),o=i.map(g=>{const m=[];let y=new se(0);return g.rewards.forEach(E=>{var F;const v=E.rewarder_type,w=this.tokensObj[v],_=((F=this.RATES[v])==null?void 0:F.price)||0,I=new se(E.rewarder_amount).div(new se(Math.pow(10,w.decimals))),M=I.mul(new se(_));y=y.add(M),I.toNumber()>0&&m.push({...E,amount:I,rewarderAmountUsd:M.toString(),address:v,symbol:w.symbol})}),{...g,rewards:m,farmingRewardTotalUsd:y.toNumber()}}),console.log("farmingPositionList:",o)}else a=await r.getPositionList(e,{[t.address]:s})||[];console.log(o,"###farmingPositionList"),console.log("0507###getMyPositons###positionList###",a),console.log("###poolInfo",s),a.length<1&&this.setMyPositionsLoading(!1);const d=o.concat(a);console.log("allPositionList:",d);const l=[];d.forEach(h=>{let p,g,m,y="",E,v,w,_;if(h.liquidity&&h.liquidity!=="0"&&s){const I={creator:h.creator,collection:h.collection,name:h.name};n==="Aptos"?_=r.getNftHash(I):_=r.getNftHash(h);const M=s.token_a.decimals,F=s.token_b.decimals;console.log(s,"poolInf=====>"),m=r.TickMath.sqrtPriceX64ToPrice(s.current_sqrt_price,M,F).toString(),h.tick_lower_index==r.TickUtil.getMinIndex(Number(s.tickSpacing))?p="0":p=r.TickMath.tickIndexToPrice(Number(h.tick_lower_index),M,F).toString(),h.tick_upper_index==r.TickUtil.getMaxIndex(Number(s.tickSpacing))?g="":(g=r.TickMath.tickIndexToPrice(Number(h.tick_upper_index),M,F).toString(),console.log("0523###maxPrice###2222###",g));const X=r.getCoinAmountFromLiquidity({pool:s,position:h,roundUp:n!="Sui"}),te=X.coinaAmount,we=X.coinbAmount;console.log(m,"===>currentPrice");const be=Number(we)+Number(te)*Number(m);let xe=(Number(te)*Number(m)/be*100).toFixed(0),Ce=(we/be*100).toFixed(0);p=="0"&&g==""&&(xe="50",Ce="50"),s.isPause?y="Closed":Number(m)>=Number(p)&&(g===""||Number(m)<=Number(g))?y="Active":(Number(m)>Number(g)||Number(m)<Number(p))&&(y="Inactive"),console.log("0323###this.tokensObj####",this.tokensObj),console.log("0323###this.tokensObj[poolInfo.token_a.address]####",this.tokensObj[s.token_a.address]),console.log("0323###poolInfo.token_a.address####",s.token_a.address),console.log("0323###poolInfo.token_b.address####",s.token_b.address);let Ne={},Xe={};n==="Aptos"?(Ne={...s.token_a,...this.tokensObj[s.token_a.address],logoURI:this.tokensObj[s.token_a.address].logo_url},Xe={...s.token_b,...this.tokensObj[s.token_b.address],logoURI:this.tokensObj[s.token_b.address].logo_url}):(Ne=s==null?void 0:s.token_a,Xe=s==null?void 0:s.token_b),l.push({poolInfoOrigin:s,...s,...h,totalAmount:be,token_a:Ne,token_b:Xe,tokenARates:E,tokenBRates:v,amountA:te,amountB:we,fromPercent:xe,toPercent:Ce,amountUSD:w,tokenName:h.tokenName||h.name,currentStatus:y,positionLiquidity:h.liquidity,nftHash:_,currentPrice:m,minPrice:Wn(p,12),maxPrice:Wn(g,12),positionSource:h.id?"farming":"clmm",farmingRewardTotalUsd:h.id?h.farmingRewardTotalUsd:0})}});const u=l.sort((h,p)=>p.liquidity-h.liquidity);console.log(u,"==>myPositionsByPool"),this.poolPositions=u,this.setMyPositionsLoading(!1),this.getPendingFees(u,n),this.getRewarderV2(u,n),console.log(u,"===>this.myPositions")},setAutoPoolNum(e){this.autoPoolNum=e},setTokenExternalPrice(e,t){this.tokenExternalPriceObj[e]=t},clearCurrentPositionInfo(){this.currentPositionInfo={}},setPositionShowList(e){this.positionShowList=e},async getCoinMetaData(e){const n=await ht("Sui").getSuiTokenObj(e),s=[],r=[],o=JSON.parse(JSON.stringify(Object.values(n)));for(let i=0;i<o.length;i++){const a=o[i];a.is_trusted?s.push({...a,chain:"sui",isSelfBuilt:!1,logo_url:a.icon_url||a.icon_url,logoURI:a.icon_url||a.icon_url}):r.push({...a,chain:"sui",isSelfBuilt:!0,logo_url:a.icon_url||a.icon_url,logoURI:a.icon_url||a.icon_url})}console.log(" ~ file: pool.ts:1437 ~ getCoinMetaData ~ trustedList:",s),console.log(" ~ file: pool.ts:1437 ~ getCoinMetaData ~ this.tokens:",this.tokens),this.tokensObj=n,console.log(" ~ file: pool.ts:1454 ~ getCoinMetaData ~ this.tokensObj:",this.tokensObj),this.notTrustedObj=Object.fromEntries(r.map((i,a)=>[i.address,i])),console.log(" ~ file: pool.ts:1464 ~ getCoinMetaData ~ notTrustedObj:",this.notTrustedObj),this.isTokenLoading=!1},setPoolsLoading(e){this.poolsLoading=e}}}),gb=ho("swapRouter",{state:()=>({swapRouterContract:{},isInitRouter:!0,poolListGroupByTokenAB:[],currentCoinPairRate:{}}),actions:{initSwapRouter(e,t,n){this.swapRouterContract=ht(e),this.swapRouterContract.initSwapRouter(t,n),this.isInitRouter=!1,console.log(this.swapRouterContract,"===>this.swapRouterContract")},setPoolListGroupByTokenAB(e){this.poolListGroupByTokenAB=e},setCurrentCoinPairRate(e){e&&(this.currentCoinPairRate={...this.currentCoinPairRate,...e})}}}),yb=ho("SuiCommonStore",{state:()=>({tokensObj:{}}),actions:{setTokensObj(e){console.log(" ~ file: common.ts:11 ~ setTokensObj ~ data:",e),e&&(this.tokensObj={...this.tokensObj,...e})}}});function mb(e){const t={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal4`)||j[e||"Sui"].fullRpcUrl,simulationAccount:j[e||"Sui"].simulationAccount,cetus_config:j[e||"Sui"].cetus_config,clmm_pool:j[e||"Sui"].clmm_pool,integrate:j[e||"Sui"].integrate,deepbook:j[e||"Sui"].deepbook,deepbook_endpoint_v2:j[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:j[e||"Sui"].aggregatorUrl,swapCountUrl:j[e||"Sui"].swapCountUrl},n={launchpad:j[e||"Sui"].launchpad,ido:j[e||"Sui"].ido,xcetus:j[e||"Sui"].xcetus,xcetus_dividends:j[e||"Sui"].xcetus_dividends,cetus_faucet:j[e||"Sui"].cetus_faucet,xtoken:j[e||"Sui"].xtoken,xtoken_dividends:j[e||"Sui"].xtoken_dividends,token_faucet:j[e||"Sui"].token_faucet,booster:j[e||"Sui"].booster,maker_bonus:j[e||"Sui"].maker_bonus,liquidity_stratefy:j[e||"Sui"].liquidity_stratefy,vaults:j[e||"Sui"].vaults,frams:j[e||"Sui"].frams};let s=new Kt(t);const r=new Rc(n,s),o=Si(),i=jn(()=>o),a=Jh(),c=jn(()=>a),d=pb();jn(()=>d);const l=yb();Oc(()=>{i.value.address&&(s.senderAddress=i.value.address)});const u=jn(()=>i.value.walletName),{$notify:h}=Dn(),p=f=>{const{$notify:b}=Dn();b.success({key:f.hash+"loading",icon:Y("img",{class:{"notify-icon":!0,"loading-animate":!0},src:c.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:f.title},null)]),description:Y("div",{class:"notification-title"},[Y("div",{class:"notification-text",innerHTML:ft.global.t("newAdd.confirmingTransaction")},null),Y("a",{href:Mr(c.value.currentExplorer,"tx",window.encodeURIComponent(f.hash)),target:"_blank",innerHTML:ft.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},g=f=>{console.log(" ~ file: useSui.ts:133 ~ showTransitionSuccess ~ params:",f);let b;if(f!=null&&f.excecuteTime){const A=Number(Wn((f==null?void 0:f.excecuteTime)/1e3,2));b=A>1?"":`Txn finalized in ${A}s! `}else b="";const{$notify:T}=Dn();T.success({icon:Y("svg",{class:{icon:!0},"aria-hidden":!0},[Y("use",{"xlink:href":"#icon-icon-change1"})]),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:`${f.title} `+ft.global.t("newAdd.success")},null)]),description:Y("div",{class:"notification-title"},[Y("div",{class:"notification-text",innerHTML:f.desc},null),Y("div",{class:"notification-text"},[Y("span",{innerHTML:b},null),Y("a",{href:Mr(c.value.currentExplorer,"tx",window.encodeURIComponent(f.hash)),target:"_blank",innerHTML:ft.global.t("common.viewTransaction")},null)])]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},m=(f,b)=>{const{$notify:T}=Dn();T.error({icon:Y("svg",{class:{icon:!0},"aria-hidden":!0},[Y("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:`${f} `+ft.global.t("newAdd.failed")},null)]),description:b||ft.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},y=async(f,b=!1)=>{var A,S,x,O,$,H;const{$notify:T}=Dn();try{let L={};if(console.log("watchTransaction params: ",f),!f.res||!((A=f==null?void 0:f.res)!=null&&A.digest)||!((S=f==null?void 0:f.res)!=null&&S.effects)||b&&!((x=f==null?void 0:f.res)!=null&&x.events)){const P=await Vn(2e3);L=await s.Pool.getSuiTransactionResponse(f.hash),console.log("0503###watchTransaction###res###",L)}else L=f.res;if(console.log("0411###watchTransaction###res###",L),console.log(f,"====>params"),(($=(O=L==null?void 0:L.effects)==null?void 0:O.status)==null?void 0:$.status)==="success"){T.close(f.hash+"loading"),f.isOnlyToken?L.balanceChanges.forEach(C=>{var K,q,Q;C.coinType==((K=f==null?void 0:f.isOnlyTokenInfo)==null?void 0:K.address)&&g({...f,desc:`Deposit ${new se(C.amount.replace("-","")).div(new se(Math.pow(10,(q=f==null?void 0:f.isOnlyTokenInfo)==null?void 0:q.decimals)))} ${(Q=f==null?void 0:f.isOnlyTokenInfo)==null?void 0:Q.symbol}`})}):g(f);const P={walletAddress:o.address,chainName:"Sui",...f,...L,date:new Date().getTime()+6048e5};if(b)if(console.log("0222###watchTransaction###isGetNftInfo true###res####",L),L.events){const K=L.events.filter(q=>q.type.includes("OpenPositionEvent"));return{status:!0,nftInfo:K[0]&&((H=K[0])==null?void 0:H.parsedJson),res:L}}else return{status:!0,nftInfo:L.effects.events,res:L};return!0}else{if(L&&L.effects&&L.effects.status&&L.effects.status.status!=="success")return T.close(f.hash+"loading"),m(f.title),!1;setTimeout(()=>y(f),3e3)}}catch(L){return console.log("watchTransaction###error###",L),T.close(f.hash+"loading"),T.error({icon:Y("svg",{class:{icon:!0},"aria-hidden":!0},[Y("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:`${f.title} Failed`},null)]),duration:4.5,description:"Something went wrong",class:"ant-notification-copy ant-notification-error"}),!0}},E=async f=>{var A,S,x,O,$,H;f.setSenderIfNotSet(i.value.address);const b=await f.build({client:s.fullClient}),T=await s.fullClient.dryRunTransactionBlock({transactionBlock:b});if(console.log("0503###simulate###simulateRes###",T),((S=(A=T==null?void 0:T.effects)==null?void 0:A.status)==null?void 0:S.status)==="failure"){console.log("0424###simulateRes###error###",(O=(x=T==null?void 0:T.effects)==null?void 0:x.status)==null?void 0:O.error);const L=(H=($=T==null?void 0:T.effects)==null?void 0:$.status)==null?void 0:H.error,P=/\("(.+?)"\)/g,C=L.match(P),K=C&&C[0]&&C[0].match(/\w+/g)||"",q=C&&C[1]&&C[1].match(/\w+/g)||"",Q=L.substr(L.lastIndexOf("}, ")+3),Z=Q&&Q.split(")"),J=Z&&Z[0]||"";throw K&&K[0]==="factory"&&q&&q[0]=="create_pool_internal"&&J==="1"?(h.error({icon:Y("svg",{class:{icon:!0},"aria-hidden":!0},[Y("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:"Transaction "+ft.global.t("newAdd.failed")},null)]),description:"Pool is existed",duration:4.5,class:"ant-notification-copy ant-notification-error"}),new Error("pool is existed")):(h.error({icon:Y("svg",{class:{icon:!0},"aria-hidden":!0},[Y("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:"Transaction "+ft.global.t("newAdd.failed")},null)]),description:L,duration:4.5,class:"ant-notification-copy ant-notification-error"}),new Error(L))}else return T},v=f=>({transactionBlock:f,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),w=async(f,b=!1)=>{var A,S;await Vn(2e3);const T=await s.Pool.getSuiTransactionResponse(f.hash);if(((S=(A=T==null?void 0:T.effects)==null?void 0:A.status)==null?void 0:S.status)==="success"){h.close(f.hash+"loading"),g(f);const x={walletAddress:o.address,chainName:"Sui",...f,...T,date:new Date().getTime()+6048e5};a.setTransactionList(x)}},_=async(f,b)=>{try{o.setLoading(!0),b&&o.setFirstGetAssetLoading(!0);const T=await s.getOwnerCoinBalances(f);console.log(" ~ file: useSui.ts:383 ~ getAccount ~ ownerCoinBalance:",T);const A=Object.fromEntries(T.map(S=>[bt(S.coinType).full_address,{coinType:bt(S.coinType).full_address,balance:S.totalBalance}]));return console.log(" ~ file: useSui.ts:390 ~ getAccount ~ assets:",A),o.setAssets(A),o.setLoading(!1),o.setFirstGetAssetLoading(!1),A}catch(T){console.log(" ~ file: useSui.ts:373 ~ getAccount ~ error:",T),o.setLoading(!1),o.setFirstGetAssetLoading(!1)}},I=async()=>{try{console.log("getTokenList sdk: ",s);const f=await s.CetusConfig.getCoinConfigs();console.log("0907###tokenList###",f);let b=[],T=[],A=[];return f.forEach(S=>{let x=S;if(S.address.includes("::sui::SUI")){const O=bt(S.address).full_address;x={...x,address:O}}x.coin_priority?T.push(x):A.push({...x,coin_priority:"0"})}),T=T.sort((S,x)=>Number(S==null?void 0:S.coin_priority)<Number(x==null?void 0:x.coin_priority)?1:-1),A=A.sort((S,x)=>S.symbol.charCodeAt(0)-x.symbol.charCodeAt(0)),b=[...T,...A],console.log("0517###haveCoinPriority###",T),console.log("0517###notHaveCoinPriority###",A),console.log("0517###tokenList###",b),b}catch(f){return console.log("0517###getTokenList###error###",f),[]}},M=async()=>{var f,b,T,A;try{const S=await $fetch("/data/coins_info.json");if((f=S==null?void 0:S.data)!=null&&f.list&&((T=(b=S==null?void 0:S.data)==null?void 0:b.list)==null?void 0:T.length)>0){const x=Object.fromEntries((A=S==null?void 0:S.data)==null?void 0:A.list.map((O,$)=>[O.coin_type,{...O,address:O.coin_type,isSelfBuilt:!O.is_trusted,logoURI:O.logo_url}]));return x["0x2::sui::SUI"]={...x["0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],address:"0x2::sui::SUI"},console.log(" ~ file: useSui.ts:437 ~ getHardcodeTokenList ~ tokenObj:",x),x}}catch(S){console.log(" ~ file: useSui.ts:440 ~ getHardcodeTokenList ~ e:",S);const x=await I();return Object.fromEntries(x.map(($,H)=>[$.address,$]))}},F=async f=>{var T,A,S,x;if(console.log(" ~ file: useSui.ts:419 ~ getSuiTokenObj ~ isForcerefresh:",f),!f){console.log(" ~ file: useSui.ts:419 ~ getSuiTokenObj ~ ");let O;try{if(O=JSON.parse(localStorage.getItem("SuiTokenObj")||"{}"),console.log(" ~ file: useSui.ts:425 ~ getSuiTokenObj ~ getLocalTokenObj:",O),O&&!Gr(O)){const $=await M()||{};return Object.values(O).length>=Object.values($).length?O:$}}catch($){console.log(" ~ file: useSui.ts:2225 ~ getSuiTokenObj ~ error:",$)}}let b={};try{const O=await $fetch(`${j.Sui.api}/v2/sui/coins_info`);(T=O==null?void 0:O.data)!=null&&T.list&&((S=(A=O==null?void 0:O.data)==null?void 0:A.list)==null?void 0:S.length)>0&&(b=Object.fromEntries((x=O==null?void 0:O.data)==null?void 0:x.list.map(($,H)=>[$.coin_type,{...$,address:$.coin_type,isSelfBuilt:!$.is_trusted,logoURI:$.logo_url}])),b["0x2::sui::SUI"]={...b["0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],address:"0x2::sui::SUI"},console.log(" ~ file: useSui.ts:437 ~ getLpList ~ tokenObj:",b),X(b))}catch{b=await M()||{},console.log(" ~ file: useSui.ts:496 ~ getSuiTokenObj ~ tokenObj:",b)}return b},X=f=>{try{console.log(" ~ file: useSui.ts:612 ~ //lpList.forEach ~ tokenObj:",f),l.setTokensObj(f),localStorage.setItem("SuiTokenObj",JSON.stringify(f))}catch(b){console.log(" ~ file: useSui.ts:602 ~ //lpList.forEach ~ error:",b)}},te=async(f,b=!1)=>{var A;const T=[];e=="Sui"&&(t.fullRpcUrl=j.Sui.officialRpcUrl,s=new Kt(t));try{const S=await s.Pool.getPools([],0,9999);console.log(" ~ file: useSui.ts:497 ~ getLpListFromContract ~ poolImmutables:",S);let x=await F();if(console.log(" ~ file: useSui.ts:498 ~ getLpListFromContract ~ tokenObj:",x),Gr(x)){const L=await I();x={},L.forEach(P=>{x[P.address]=P})}const O=await s.CetusConfig.getClmmPoolConfigs();console.log(" ~ file: useSui.ts:508 ~ getLpListFromContract ~ lpList:",O);const $={};O.forEach(L=>{$[L.pool_address]=L,console.log(" ~ file: useSui.ts:511 ~ lpList.forEach ~ lpObj:",$)});let H={};try{const P=(e=="Aptos"?await fetch(`${j.Aptos.api}/v2/sui/swap/count`).then(C=>C.json()):await fetch(`${j.Sui.api}/v2/sui/swap/count/v3`).then(C=>C.json())).data;H=Object.fromEntries(P.pools.map(C=>[C.swap_account,{...C,apr_7day:e=="Aptos"?C.apr_7day:C.apr_24h}]))}catch{}for(let L=0;L<S.length;L++){const P=S[L];if($[P.poolAddress]||!$[P.poolAddress]){let C=x[P.coinTypeA],K=x[P.coinTypeB];C||(C=(await s.CetusConfig.getTokenListByCoinTypes([P.coinTypeA]))[P.coinTypeA]),K||(K=(await s.CetusConfig.getTokenListByCoinTypes([P.coinTypeB]))[P.coinTypeB]);let q=!1;D(C.address,K.address)&&(q=!0);const Q=H[P.poolAddress]?((A=H[P.poolAddress])==null?void 0:A.is_forward)===!1:q;let Z={};Z={...Z,...$[P.poolAddress],address:P.poolAddress,coinA:C,coinB:K,coin_a_address:P.coinTypeA,coin_b_address:P.coinTypeB,decimals:6,fee:Number(P.fee_rate)/1e6,tickSpacing:P.tickSpacing,symbol:`${C==null?void 0:C.symbol}-${K==null?void 0:K.symbol}`,name:`${C==null?void 0:C.symbol}-${K==null?void 0:K.symbol}`,needReverse:Q,is_pause:P.is_pause,isPoolsInfoError:!0,current_sqrt_price:P.current_sqrt_price,liquidity:P.liquidity,poolAddress:P.poolAddress,current_tick_index:P.current_tick_index},(!f||!f[P.coinTypeA]&&!f[P.coinTypeB])&&T.push(Z)}}return console.log("0426###getLpListFromContract###result###",T),T}catch(S){console.log("getLpListFromContract###err##",S)}},we=async f=>{var O,$,H,L,P,C;let b=await F();const T=[],A=await fetch("/data/pools_info.json").then(K=>(console.log(" ~ file: useSui.ts:604 ~ constres:any=awaitfetch ~ rsp:",K),K.json()));if(console.log(" ~ file: useSui.ts:595 ~ constres:any=awaitfetch ~ res:",A),!((O=A==null?void 0:A.data)!=null&&O.lp_list)){const K=await te(f);if(K)return K}console.log(f,"===>newFilterCoinsObj");const S=(($=A==null?void 0:A.data)==null?void 0:$.lp_list)||[];console.log("0420getLpList###lpList###",S),console.log("0420getLpList###res###",A);let x=!1;for(let K=0;K<S.length;K++){const q=S[K],Q=(q==null?void 0:q.is_forward)===!1,Z=[];if(q.is_display_rewarder){const Te=(P=(L=(H=q==null?void 0:q.object)==null?void 0:H.rewarder_manager)==null?void 0:L.fields)==null?void 0:P.rewarders;Te&&Te.forEach(oe=>{var Ke,ge,Qe,st,ke,Ae;const De=new se((Ke=oe==null?void 0:oe.fields)==null?void 0:Ke.emissions_per_second).mul(se.pow(2,-64));Z.push({coinAddress:bt((st=(Qe=(ge=oe==null?void 0:oe.fields)==null?void 0:ge.reward_coin)==null?void 0:Qe.fields)==null?void 0:st.name).source_address,emissionsEveryDay:Math.floor(De.toNumber()*60*60*24),emissions_per_second:(ke=oe==null?void 0:oe.fields)==null?void 0:ke.emissions_per_second,growth_global:(Ae=oe==null?void 0:oe.fields)==null?void 0:Ae.growth_global})})}let J=b[q.coin_a_address];J||(J=(await s.CetusConfig.getTokenListByCoinTypes([q.coin_a_address]))[q.coin_a_address],b={...b,[q.coin_a_address]:J},x=!0);let ce=b[q.coin_b_address];ce||(ce=(await s.CetusConfig.getTokenListByCoinTypes([q.coin_b_address]))[q.coin_b_address],b={...b,[q.coin_b_address]:ce},x=!0),(!f||!f[q.coin_a_address]&&!f[q.coin_b_address]&&!f[bt(q.coin_a_address).full_address]&&!f[bt(q.coin_b_address).full_address])&&T.push({...q,coinA:{...J,address:Sn(J.address)},coinB:{...ce,address:Sn(ce.address)},token_a:{...J,address:Sn(J.address)},token_b:{...ce,address:Sn(ce.address)},rewarderInfo:Z,needReverse:Q,is_pause:(C=q==null?void 0:q.object)==null?void 0:C.is_pause,poolAddress:q.address,tickSpacing:q.object.tick_spacing})}return x&&X(b),console.log("0420getLpList result:",T),T},be=async(f,b)=>{var T,A,S,x,O,$,H,L;try{if(!b){const Z=localStorage.getItem("SuiLpList"),J=new Date().getTime(),ce=Z?JSON.parse(Z):null;if(ce&&Number(ce==null?void 0:ce.expiration)>J&&(ce!=null&&ce.data)&&((T=ce==null?void 0:ce.data)==null?void 0:T.length)>0)return ce==null?void 0:ce.data}let P=await F();const C=[],K=await fetch(`${j[e||"Sui"].api}/v2/sui/pools_info/v3`).then(Z=>(console.log(" ~ file: useSui.ts:604 ~ constres:any=awaitfetch ~ rsp:",Z),Z.json()));if(!((A=K==null?void 0:K.data)!=null&&A.lp_list)){const Z=await we(f);if(Z)return Z}console.log(f,"===>newFilterCoinsObj");const q=((S=K==null?void 0:K.data)==null?void 0:S.lp_list)||[];console.log("0420getLpList###lpList###",q),console.log("0420getLpList###res###",K);let Q=!1;for(let Z=0;Z<q.length;Z++){const J=q[Z],ce=(J==null?void 0:J.is_forward)===!1,Te=[];if(J.is_display_rewarder){const Ke=($=(O=(x=J==null?void 0:J.object)==null?void 0:x.rewarder_manager)==null?void 0:O.fields)==null?void 0:$.rewarders;Ke&&Ke.forEach(ge=>{var st,ke,Ae,Bt,Ls,Ga;const Qe=new se((st=ge==null?void 0:ge.fields)==null?void 0:st.emissions_per_second).mul(se.pow(2,-64));Te.push({coinAddress:bt((Bt=(Ae=(ke=ge==null?void 0:ge.fields)==null?void 0:ke.reward_coin)==null?void 0:Ae.fields)==null?void 0:Bt.name).source_address,emissionsEveryDay:Math.floor(Qe.toNumber()*60*60*24),emissions_per_second:(Ls=ge==null?void 0:ge.fields)==null?void 0:Ls.emissions_per_second,growth_global:(Ga=ge==null?void 0:ge.fields)==null?void 0:Ga.growth_global})})}let oe=P[J.coin_a_address];oe||(oe=(await s.CetusConfig.getTokenListByCoinTypes([J.coin_a_address]))[J.coin_a_address],P={...P,[J.coin_a_address]:oe},Q=!0);let De=P[J.coin_b_address];De||(De=(await s.CetusConfig.getTokenListByCoinTypes([J.coin_b_address]))[J.coin_b_address],P={...P,[J.coin_b_address]:De},Q=!0),(!f||!f[J.coin_a_address]&&!f[J.coin_b_address]&&!f[bt(J.coin_a_address).full_address]&&!f[bt(J.coin_b_address).full_address])&&C.push({...J,coinA:{...oe,address:Sn(oe.address)},coinB:{...De,address:Sn(De.address)},token_a:{...oe,address:Sn(oe.address)},token_b:{...De,address:Sn(De.address)},rewarderInfo:Te,needReverse:ce,is_pause:(H=J==null?void 0:J.object)==null?void 0:H.is_pause,poolAddress:J.address,tickSpacing:J.object.tick_spacing})}Q&&X(P),console.log("0420getLpList result: ",C);try{const Z={expiration:new Date().getTime()+3e5,data:C};localStorage.setItem("SuiLpList",JSON.stringify(Z))}catch(Z){console.log("0420getLpList localStorage setItem Error: ",Z)}return console.log("0420getLpList return result: ",C),C}catch(P){console.log("0420getLpList Error: ",P);try{const K=localStorage.getItem("SuiLpList"),q=K?JSON.parse(K):null;if(q&&(q!=null&&q.data)&&((L=q==null?void 0:q.data)==null?void 0:L.length)>0)return q==null?void 0:q.data}catch(K){console.log(" ~ file: useSui.ts:676 ~ getLpList ~ err get local data error:",K)}const C=await we(f);if(console.log(C,"result===>"),C)return C}},xe=async(f=[])=>{const T=await new Kt(t).Pool.getPools(f,0,1e3);if(f.length===0){const A={};return T.forEach(S=>{A[S.poolAddress]={...S,rate:ze(S.fee_rate).div(Math.pow(10,6)).toString()}}),A}else return T},Ce=async(f=[])=>{console.log(f,"getPoolslist##");const T=await new Kt(t).Pool.getPools(f,0,1e3);console.log("0330###getPools###pools###",T);const A={};return T.forEach(S=>{A[S.poolAddress]={...S,rate:ze(S.fee_rate).div(Math.pow(10,6)).toString()}}),A},Ne=async f=>await new Kt(t).Pool.getPool(f),Xe=f=>{const b=new Bc;return b.moveCall({target:`${j[e||"Sui"].faucet.faucet_display}::${f.transactionModule}::faucet`,typeArguments:[],arguments:[b.pure(f.suplyID)]}),v(b)},Yt=f=>{var T,A,S,x,O;let b;return f!=null&&f.digest?b={hash:f==null?void 0:f.digest,status:(A=(T=f==null?void 0:f.effects)==null?void 0:T.status)==null?void 0:A.status,res:f}:f!=null&&f.effects&&(b={hash:(S=f==null?void 0:f.effects)==null?void 0:S.transactionDigest,status:(O=(x=f==null?void 0:f.effects)==null?void 0:x.status)==null?void 0:O.status,res:f}),b},it=async f=>{try{const{data:b}=await fetch(`${j.Sui.api}/v2/sui/ticks?address=${f.poolAddress}&limit=512&orderBy=index`).then(T=>T.json());if(b&&b.list&&b.list.length>0)return{list:b.list.map(A=>({objectId:A.object_id,index:A.index,sqrtPrice:new de(A.sqrt_price),liquidityNet:new de(A.liquidity_net),liquidityGross:new de(A.liquidity_gross),feeGrowthOutsideA:new de(A.fee_growth_outside_a),feeGrowthOutsideB:new de(A.fee_growth_outside_b),rewardersGrowthOutside:A.rewards_growth_outside})),address:b.address};{const T=await s.Pool.fetchTicks({pool_id:f.poolAddress,coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB});return console.log("0330###getTicks####sui####",T),{list:T,address:f.poolAddress}}}catch(b){console.log("0330###getTicks Error###",b);const T=await s.Pool.fetchTicks({pool_id:f.poolAddress,coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB});return console.log("0330###getTicks####sui####",T),{list:T,address:f.poolAddress}}},yt=async(f,b,T,A)=>await hf(f,b,T,A),at=f=>{var C,K;const{pool:b,position:T,roundUp:A}=f,S=Number(T.tick_lower_index),x=Number(T.tick_upper_index),O=wt.tickIndexToSqrtPriceX64(S),$=wt.tickIndexToSqrtPriceX64(x),H=xn.getCoinAmountFromLiquidity(new de(T.liquidity),new de(b.current_sqrt_price),O,$,A),L=_e(H.coinA.toString(),(C=b==null?void 0:b.coinA)==null?void 0:C.decimals),P=_e(H.coinB.toString(),(K=b==null?void 0:b.coinB)==null?void 0:K.decimals);return{coinaAmount:L,coinbAmount:P}},ct=f=>{const{tokenA:b,tokenB:T,lowerTick:A,upperTick:S,coinAmount:x,iscoinA:O,roundUp:$,slippage:H,curSqrtPrice:L}=f;console.log(L.toString(),f,"==>params");const P=xn.estLiquidityAndcoinAmountFromOneAmounts(A,S,x,O,$,H,L),C=b.decimals,K=T.decimals,{tokenMaxA:q,tokenMaxB:Q,liquidityAmount:Z,coinAmountA:J,coinAmountB:ce}=P;return console.log(q.toString(),"===>tokenMaxA.toString()"),console.log(Q.toString(),"===>tokenMaxB.toString()"),console.log(J.toString(),"===>coinAmountA.toString()"),console.log(ce.toString(),"===>coinAmountB.toString()"),console.log(P,"result===>"),console.log(P.liquidityAmount.toString(),"liquidityAmount===>"),console.log(C,"===>coinaDecimals"),{tokenMaxAOrigin:q.toString(),tokenMaxBOrigin:Q.toString(),tokenMaxA:_e(J.toString(),C),tokenMaxB:_e(ce.toString(),K),liquidityAmount:Z}},dt=async f=>{var ge,Qe,st,ke;const{pool:b,amount:T,fix_amount_a:A,roundUp:S,tick_lower:x,tick_upper:O,index:$,slippage:H,coinTypeC:L,coinTypeD:P,coinTypeE:C,curSqrtPrice:K,positionInfo:q,farmPoolInfo:Q}=f,Z=await Ne(b.poolAddress);console.log(f.curSqrtPrice.toString(),"###getAddLiquidityTransactionPayload 732 params"),console.log(Z,"###newPool");const J=A?Ze(T,b.token_a.decimals):Ze(T,b.token_b.decimals),ce=wt.sqrtPriceX64ToTickIndex(new de(Z.current_sqrt_price));console.log(Z.current_sqrt_price.toString(),f.curSqrtPrice.toString(),"curSqrtPrice##610");let Te,oe;if(ce>=x&&ce<=O){const Ae=xn.estLiquidityAndcoinAmountFromOneAmounts(x,O,new de(J.toString()),A,S,H,new de(Z.current_sqrt_price));console.log(Ae,Ae.tokenMaxA.toNumber(),Ae.tokenMaxB.toNumber(),"===>preAddResult.coinAmountA.toNumber()"),Te=A?J.toNumber():Ae.tokenMaxA.toNumber(),oe=A?Ae.tokenMaxB.toNumber():J.toNumber()}else ce>O?(Te=0,oe=J.toNumber()):ce<x&&(Te=J.toNumber(),oe=0);console.log(f,"===>params742"),console.log("0330###createAddLiquidityTransactionPayload###params###",{coinTypeA:b.token_a.address,coinTypeB:b.token_b.address,pool_id:b.poolAddress,tick_lower:x<-443636?-443636:x,tick_upper:O>443636?443636:O,fix_amount_a:A,amount_a:Te,amount_b:oe,is_open:!$,pos_id:$});let De,Ke;if(((ge=q==null?void 0:q.value)==null?void 0:ge.positionSource)==="farming"){console.log("0103 getAddLiquidityTransactionPayload positionInfo: ",q);const Ae=[];L&&Ae.push(L),P&&Ae.push(P),C&&Ae.push(C);const Bt={coinTypeA:b.token_a.address,coinTypeB:b.token_b.address,amount_a:Te,amount_b:oe,pool_id:(Qe=q==null?void 0:q.value)==null?void 0:Qe.pool_id,fix_amount_a:A,position_nft_id:(st=q==null?void 0:q.value)==null?void 0:st.id,clmm_pool_id:(ke=q==null?void 0:q.value)==null?void 0:ke.clmm_pool_id,collect_fee:!0,collect_rewarder:!1,clmm_rewarder_types:Ae};De=await r.Farms.addLiquidityFixCoinPayload(Bt),Ke={action:"FarmingIncreaseLiquidity",txbParams:Bt}}else if($){const Ae=[];L&&Ae.push(L),P&&Ae.push(P),C&&Ae.push(C);const Bt={coinTypeA:b.token_a.address,coinTypeB:b.token_b.address,pool_id:b.poolAddress,tick_lower:x<-443636?-443636:x,tick_upper:O>443636?443636:O,fix_amount_a:A,amount_a:Te,amount_b:oe,is_open:!$,pos_id:$,collect_fee:f.collect_fee,rewarder_coin_types:[...Ae],slippage:H},Ls={slippage:H,curSqrtPrice:K};De=await s.Position.createAddLiquidityFixTokenPayload(Bt,Ls),Ke={action:"IncreaseLiquidity",txbParams:{parameter:Bt,gasEstimateArg:Ls}}}else if(console.log(Q,"farmPoolInfo##"),Q){const Ae={pool_id:Q.id,coinTypeA:b.token_a.address,coinTypeB:b.token_b.address,clmm_pool_id:Q.clmm_pool_id,amount_a:Te.toString(),amount_b:oe.toString(),fix_amount_a:A,tick_lower:x,tick_upper:O};De=await r.Farms.openPositionAddLiquidityStakePaylod(Ae),Ke={action:"FarmingOpenAndAddLiquidity",txbParams:Ae}}else{const Ae={coinTypeA:b.token_a.address,coinTypeB:b.token_b.address,pool_id:b.poolAddress,tick_lower:x<-443636?-443636:x,tick_upper:O>443636?443636:O,fix_amount_a:A,amount_a:Te,amount_b:oe,is_open:!$,pos_id:"",collect_fee:!1,rewarder_coin_types:[],slippage:H},Bt={slippage:H,curSqrtPrice:K};De=await s.Position.createAddLiquidityFixTokenPayload(Ae,Bt),Ke={action:"OpenAndAddLiquidity",txbParams:{parameter:Ae,gasEstimateArg:Bt}}}return console.log("0330###sui##getAddLiquidityTransactionPayload###",De),{txb:v(De),payloadParams:Ke}},en=(f,b,T)=>{const A=wt.sqrtPriceX64ToPrice(new de(f.current_sqrt_price),f.coinA.decimals,f.coinB.decimals).toNumber(),S=T?A:1/A,x=ze(S).minus(ze(b)).div(ze(S)).mul(100);return x.gt(100)?100:(console.log(x.toString(),"1143"),Number(Ue(x.abs().toString(),2)))},tn=async f=>{const{pool:b,a2b:T,byAmountIn:A,amount:S}=f;console.log("0221###sui###preSwap###",f);const x=b.coinA.decimals,O=b.coinB.decimals,$=b!=null&&b.current_sqrt_price?b:await Ne(b.address);let H;T&&A||!T&&!A?H=Ze(S,x):H=Ze(S,O);const L=await s.Swap.preswap({pool:$,current_sqrt_price:$.current_sqrt_price,coinTypeA:$.coinTypeA,coinTypeB:$.coinTypeB,decimalsA:x,decimalsB:O,a2b:T,byAmountIn:A,amount:H.toString()});return console.log("0221###sui###preSwap###result###",L),{...L,estimatedAmountIn:ps(_e(L.estimatedAmountIn.toString(),T?x:O),T?x:O),estimatedAmountOut:ps(_e(L.estimatedAmountOut.toString(),T?O:x),T?O:x),priceImpactPct:Ue(L.priceImpactPct,2)}},Ct=async f=>{console.log("0412###getSwapTransactionPayload###params###",f);const{pool:b,a2b:T,byAmountIn:A,amount:S,slippage:x}=f,O=b.poolAddress,$=b.token_a.decimals,H=b.token_b.decimals;let L;T&&A||!T&&!A?L=Ze(S,$):L=Ze(S,H);const P=await s.Swap.preswap({pool:b,current_sqrt_price:b.current_sqrt_price,coinTypeA:b.coinTypeA,coinTypeB:b.coinTypeB,decimalsA:$,decimalsB:H,a2b:T,by_amount_in:A,amount:L.toString()}),C=ze(P.estimatedAmountOut.toString()),K=ze(P.estimatedAmountIn.toString()),q=A?C.sub(C.mul(x)):K.add(K.mul(x));console.log("0221###sui###swap##params123456###",{pool_id:O,a2b:P.aToB,by_amount_in:P.byAmountIn,amount:P.amount.toString(),amount_limit:Ue(q.toString(),0)||"",coinTypeA:b.token_a.address,coinTypeB:b.token_b.address});const Q=await s.Swap.createSwapTransactionPayload({pool_id:O,a2b:P.aToB,by_amount_in:P.byAmountIn,amount:P.amount.toString(),amount_limit:Ue(q.toString(),0)||"",coinTypeA:b.token_a.address,coinTypeB:b.token_b.address});return console.log("0221###sui###swap##tx###",Q),v(Q)},kt=async(f,b)=>{const T=new Kt(t);console.log(b,"pools982");const A=Object.values(b).map(x=>(x==null?void 0:x.address)||(x==null?void 0:x.poolAddress));return console.log(A,"#poolList"),await T.Position.getPositionList(f,A)},_t=async(f,b,T,A="")=>{var x;console.log(" ~ file: useSui.ts:1141 ~ getPositionInfo ~ pool:",f);let S;try{return S=await new Kt(t).Position.getPosition((x=f==null?void 0:f.position_manager)==null?void 0:x.positions_handle,A),{...S,tokenName:T,collectionName:b}}catch(O){String(O).indexOf("Position not exists. Get Position error")>-1&&setTimeout(()=>{console.log(" ~ file: useSui.ts:1158 ~ setTimeout ~ pool:",f),_t(f,b,T,A)},5e3)}},nn=async f=>{const T=await new Kt(t).Position.getPositionById(f);return console.log("0503###getPositionById###result###",T),T},lt=async(f,b)=>(console.log(f,b,"getTickDataByIndex"),await s.Pool.getTickDataByIndex(f,b)),sn=async(f,b)=>{const{pool:T,position:A,tickLowerData:S,tickUpperData:x}=f,O=b||await Ne(T.poolAddress),$=ff({clmmpool:O,position:A,tickLower:S,tickUpper:x}),H=_e($.feeOwedA.toString(),T.token_a.decimals),L=_e($.feeOwedB.toString(),T.token_b.decimals);return{feeOwedA:Number(H)>99999999999||Number(H)<0?"0":H,feeOwedB:Number(L)>99999999999||Number(L)<0?"0":L}},rn=async f=>{const{poolAddress:b,pos:T,positionHandle:A}=f;return await s.Rewarder.posRewardersAmount(b,A,T)},wr=f=>f.pos_object_id,Rs=async f=>{const{pool:b,coinTypeA:T,coinTypeB:A,coinTypeC:S,coinTypeD:x,coinTypeE:O,position:$,delta_liquidity:H,rewards_num:L,positionInfo:P}=f;console.log("getRemoveLiquidityTransactionPayload params##",f);const C=await Ne(b.poolAddress),K={...b,...C},q=Number($.tick_lower_index),Q=Number($.tick_upper_index),Z=wt.tickIndexToSqrtPriceX64(q),J=wt.tickIndexToSqrtPriceX64(Q),ce=xn.getCoinAmountFromLiquidity(H,new de(K.current_sqrt_price),Z,J,!0),Te=ze(ce.coinA.toString()).mul(ze(1-f.slippage)),oe=ze(ce.coinB.toString()).mul(ze(1-f.slippage)),Ke=[T,A,S,x,O].filter(ke=>!!ke);let ge;console.log("0331###remove###params###",{coin_types:Ke,min_amount_a:Ue(Te.toString(),0),min_amount_b:Ue(oe.toString(),0),pool_id:b.poolAddress,pos_id:f.position.pos_object_id}),console.log("0331###delta_liquidity.toString()###",H.toString()),console.log("0331###position.liquidity###",$.liquidity);const Qe=[];S&&Qe.push(S),x&&Qe.push(x),O&&Qe.push(O);let st;if((P==null?void 0:P.positionSource)==="farming")if(H.toString()===$.liquidity){const ke={pool_id:P==null?void 0:P.pool_id,coinTypeA:T,coinTypeB:A,position_nft_id:P==null?void 0:P.id,clmm_pool_id:P==null?void 0:P.clmm_pool_id,min_amount_a:Ue(Te.toString(),0)||"",min_amount_b:Ue(oe.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:[...Qe],delta_liquidity:P==null?void 0:P.liquidity,unstake:!0,close_position:!0,clmm_position_id:f.position.clmm_position_id};console.log("getRemoveLiquidityTransactionPayload FarmingRemoveLiquidity parameter: ",ke),ge=await r.Farms.removeLiquidityPayload(ke),st={action:"FarmingRemoveLiquidity",txbParams:ke},console.log("getRemoveLiquidityTransactionPayload FarmingRemoveLiquidity result: ",ge)}else{const ke={pool_id:P==null?void 0:P.pool_id,coinTypeA:T,coinTypeB:A,position_nft_id:P==null?void 0:P.id,clmm_pool_id:P==null?void 0:P.clmm_pool_id,min_amount_a:Ue(Te.toString(),0)||"",min_amount_b:Ue(oe.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:[...Qe],delta_liquidity:H.toString(),unstake:!1,close_position:!1};console.log("getRemoveLiquidityTransactionPayload FarmingDecreaseLiquidity parameter: ",ke),ge=await r.Farms.removeLiquidityPayload(ke),st={action:"FarmingDecreaseLiquidity",txbParams:ke},console.log("getRemoveLiquidityTransactionPayload FarmingDecreaseLiquidity result: ",ge)}else if(H.toString()===$.liquidity){const ke={coinTypeA:T,coinTypeB:A,min_amount_a:Ue(Te.toString(),0)||"",min_amount_b:Ue(oe.toString(),0)||"",rewarder_coin_types:[...Qe],pool_id:b.poolAddress,pos_id:f.position.pos_object_id,collect_fee:!0};console.log("getRemoveLiquidityTransactionPayload RemoveLiquidity parameter: ",ke),ge=await s.Position.closePositionTransactionPayload(ke),st={action:"RemoveLiquidity",txbParams:ke},console.log("getRemoveLiquidityTransactionPayload RemoveLiquidity result: ",ge)}else{console.log(Qe,"==>rewarder_coin_types");const ke={coinTypeA:T,coinTypeB:A,delta_liquidity:H.toString(),min_amount_a:Ue(Te.toString(),0)||"",min_amount_b:Ue(oe.toString(),0)||"",pool_id:b.poolAddress,pos_id:f.position.pos_object_id,collect_fee:!0,rewarder_coin_types:[...Qe]};console.log("getRemoveLiquidityTransactionPayload DecreaseLiquidity parameter: ",ke),ge=await s.Position.removeLiquidityTransactionPayload(ke),st={action:"DecreaseLiquidity",txbParams:ke},console.log("getRemoveLiquidityTransactionPayload DecreaseLiquidity result: ",ge)}return console.log("0331###remove###result####",ge),{txb:v(ge),payloadParams:st}},as=async(f,b)=>{const T=[];f.coinTypeC&&T.push(f.coinTypeC),f.coinTypeD&&T.push(f.coinTypeD),f.coinTypeE&&T.push(f.coinTypeE),console.log("0423###getCollectRewarderTransactionPayload###params###",{pool_id:f.pool_address,pos_id:f.pos_index,rewarder_coin_types:[...T],coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB,collect_fee:!1}),console.log(b,"##getCollectRewarderTransactionPayload");let A,S;if(b.positionSource=="farming"){const x={coinTypeA:b.coinTypeA,coinTypeB:b.coinTypeB,clmm_pool_id:b.clmm_pool_id,position_nft_id:b.id,clmm_rewarder_types:T,collect_fee:!0};A=await r.Farms.claimFeeAndClmmReward(x),S={action:"FarmingClaimFeeAndReward",txbParams:x}}else{const x={pool_id:f.pool_address,pos_id:f.pos_index,rewarder_coin_types:[...T],coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB,collect_fee:f.collect_fee};A=await s.Rewarder.collectRewarderTransactionPayload(x),S={action:"ClaimFeeAndMining",txbParams:x}}return{txb:v(A),payloadParams:S}},B=async f=>{console.log("1130###getCollectFeeTransactionPayload###params",{pool:f.pool.poolAddress,coinTypeA:f.pool.token_a.address,coinTypeB:f.pool.token_b.address,pos_index:f.position.index});const b=await s.Position.collectFeeTransactionPayload({coinTypeA:f.pool.token_a.address,coinTypeB:f.pool.token_b.address,pool_id:f.pool.poolAddress,pos_id:f.position.pos_object_id});return console.log("1130###getCollectFeeTransactionPayload###result##",b),v(b)},R=async()=>await s.Pool.getPoolImmutables(),D=(f,b)=>!!pf(Re(f),Re(b)),z=async f=>{const{coinTypeA:b,coinTypeB:T,decimalsA:A,decimalsB:S,amountA:x,amountB:O,minPrice:$,maxPrice:H,fix_amount_a:L,tick_spacing:P,slippage:C,price:K}=f;console.log(f,"###getCreatPoolTransactionPayload 1201");const q=wt.priceToSqrtPriceX64(ze(K),A,S);console.log("0407###getCreatPoolTransactionPayload###currentSqrtPrice###",q);const Q=wt.priceToTickIndex(ze(K),A,S);console.log("0407###getCreatPoolTransactionPayload###currentTickIndex###",Q);let Z,J;if($==="0"&&H==="")Z=$s.getMinIndex(Number(P)),J=$s.getMaxIndex(Number(P));else{const Qe=Number($)==0?-443636:wt.priceToTickIndex(ze($),A,S),st=wt.priceToTickIndex(ze(H),A,S);Z=Dr(Qe,Number(P)),J=Dr(st,Number(P))}console.log("0407###getCreatPoolTransactionPayload###tick_lower###",Z),console.log("0407###getCreatPoolTransactionPayload###tick_upper###",J);const ce=L?Ze(x,A):Ze(O,S);let Te,oe;wt.tickIndexToSqrtPriceX64(Z),wt.tickIndexToSqrtPriceX64(J);let De;Q>=Z&&Q<=J?(De=xn.estLiquidityAndcoinAmountFromOneAmounts(Z,J,new de(ce.toString()),L,!0,C,q),Te=L?ce.toString():De.tokenMaxA.toString(),oe=L?De.tokenMaxB.toString():ce.toString()):Q>J?(Te="0",oe=ze(O).mul(ze(Math.pow(10,S))).toString()):Q<Z&&(Te=ze(x).mul(ze(Math.pow(10,A))).toString(),oe="0"),Z<-443636&&(Z=$s.getMinIndex(Number(P))),J>443636&&(J=Z=$s.getMaxIndex(Number(P))),console.log("0407####create pool params###",JSON.stringify({tick_spacing:P,initialize_sqrt_price:q.toString(),uri:"",fix_amount_a:L,amount_a:Te,amount_b:oe,tick_lower:Z,tick_upper:J,coinTypeA:b,coinTypeB:T}));const Ke=await s.Pool.creatPoolTransactionPayload({tick_spacing:P,initialize_sqrt_price:q.toString(),uri:"",fix_amount_a:L,amount_a:Te,amount_b:oe,slippage:C,tick_lower:Z,tick_upper:J,coinTypeA:b,coinTypeB:T});console.log("0412####result###",Ke);const ge=await E(Ke);return console.log("0412####simulateRes###",ge),v(Ke)},W=f=>{const b=f.split("0x");return"0x"+(b[1][0]==="0"?b[1].substring(1):b[1])},ee=async f=>{try{const b=localStorage.getItem("coinMatedataLocal"),T=b?JSON.parse(b):{};let A=[];const S=[];if(f&&typeof f=="string"){if(T[W(f)])return[T[W(f)]];A=[W(f)]}else{const H=[];if(f.forEach(L=>{T[W(L)]?S.push(T[W(L)]):H.push(W(L))}),H.length===0)return S;A=[...H]}const x=await s.CetusConfig.getTokenListByCoinTypes(A),O=[],$={};return Object.values(x).forEach(H=>{const L={...H,address:bt(H.address).full_address};O.push(L),$[H.address]=L}),console.log("0714###getTokenListByCoinType###formatResult###",O),localStorage.setItem("coinMatedataLocal",JSON.stringify({...T,...$})),[...O,...S]}catch{return[]}},ne=async(f,b)=>{if(!b||b=="undefined")return null;let T=null;console.log("getTokenBySymbol###tokensObj###",f,b);for(const A in f){const S=f[A];console.log(" ~ file: useSui.ts:1714 ~ getTokenBySymbol ~ tokensObj:",f),console.log(" ~ file: useSui.ts:1713 ~ getTokenBySymbol ~ item:",S),console.log(" ~ file: useSui.ts:1714 ~ getTokenBySymbol ~ key:",A),((S==null?void 0:S.address)||(S==null?void 0:S.coin_type)).toUpperCase()===String(bt(b).full_address).toUpperCase()&&(T=S);break}if(!T){const A=b.split("0x");console.log(" ~ getTokenBySymbol ~ address:",b);const S="0x"+(A[1][0]==="0"?A[1].substring(1):A[1]),x=await s.CetusConfig.getTokenListByCoinTypes([S]);x&&x[S]&&(T={...x[S],isSelfBuilt:!0,address:bt(b).full_address})}return T},ae=async f=>{const{a2b:b,byAmountIn:T,amount:A,decimalsA:S,decimalsB:x}=f;let O;b&&T||!b&&!T?O=Ze(A,S):O=Ze(A,x);const $=await s.Swap.preSwapWithMultiPool({poolAddresses:f.poolAddresses,coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB,a2b:b,byAmountIn:T,amount:O});return{...$,estimatedAmountIn:ps(_e($.estimatedAmountIn.toString(),b?S:x),b?S:x),estimatedAmountOut:ps(_e($.estimatedAmountOut.toString(),b?x:S),b?x:S)}},pe=async(f,b)=>{console.log(f,"===>paths"),console.log(b,"===>coins"),s.Router.loadGraph(b,f),console.log(s,"sdk===>1826")},ye=async(f,b)=>{const T=new Kt(t);T.senderAddress=i.value.address,console.log(f,"===>createTxParams");const A=await T.getOwnerCoinAssets((T==null?void 0:T.senderAddress)||i.value.address);console.log(A,"===>allCoinAsset");const S=await gf.buildAggregatorSwapTransaction(T,f,A,"",b),x={action:"Swap",txbParams:{createTxParams:f,slippage:b}};return{txb:v(S),payloadParams:x}},ue=async f=>{const b=await s.Rewarder.fetchPosRewardersAmount([f]),T=b&&b[0];return T&&T.rewarderAmountOwed},he=async f=>(console.log("batchFetchPosRewardersAmount"),await s.Rewarder.fetchPosRewardersAmount(f)),qe=gb(),je=jn(()=>qe);return{setTransations:w,showTransitionPending:p,showTransitionSuccess:g,showTransitionError:m,watchTransaction:y,getAccount:_,getTokenList:I,getLpList:be,getPools:xe,getPool:Ne,mintCoin:Xe,handleTx:Yt,TickUtil:$s,TickMath:wt,getNearestTickByTick:Dr,getTicks:it,getEstPositionAPRWithMulti:yt,getCoinAmountFromLiquidity:at,estLiquidityAndcoinAmountFromOneAmounts:ct,getAddLiquidityTransactionPayload:dt,getTickDataFromUrlData:df,getPriceImpactPct:en,preSwap:tn,getSwapTransactionPayload:Ct,getPositionList:kt,getTickDataByIndex:lt,getCollectFeesQuote:sn,getPosRewardersAmount:rn,getNftHash:wr,getPositionInfo:_t,getRemoveLiquidityTransactionPayload:Rs,getCollectRewarderTransactionPayload:as,getCollectFeeTransactionPayload:B,getPoolImmutables:R,estimateLiquidityForCoinA:lf,estimateLiquidityForCoinB:uf,getCreatPoolTransactionPayload:z,getTokenListByCoinType:ee,getIsSortedSymbols:D,getPositionById:nn,d:ze,getTokenBySymbol:ne,preSwapWithMultiPool:ae,initSwapRouter:pe,getSwapRouter:async(f,b,T,A,S,x="",O,$)=>{const H=f.value.decimals;console.log(" ~ file: useSui.ts:1847 ~ getSwapRouter ~ fromCoin:",f.value.decimals);const L=b.value.decimals,P=localStorage.getItem("swapOrderSplit"),C=localStorage.getItem("includeRoutes"),K=P=="open"||!P,q=C=="open";let Q;console.log(JSON.stringify({fromCoin:f.value.adress,toCoin:b.value.adress,amount:T,senderAddress:s.senderAddress,orderSplit:K,externalRouter:q,lpChanges:$}),"######### ~ file: useSui.ts:1906");try{if(Q=await s.RouterV2.getBestRouterByServer(f.value.address,b.value.address,T,A,s.senderAddress,K,q,$),console.log(" ~ file: useSui.ts:1878 ~ getSwapRouter ~ res:",Q.isTimeout),Q!=null&&Q.isTimeout)throw console.log(" ~ file: useSui.ts:1881 ~ getSwapRouter ~ res?.isTimeout:",Q==null?void 0:Q.isTimeout),new Error("router timeout")}catch(Z){console.log(" ~ file: useSui.ts:1885 ~ getSwapRouter ~ error:",Z);try{console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ byAmountIn:",A),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ amount:",T),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ toCoin:",b),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ fromCoin:",f),console.log(" ~ file: useSui.ts:2018 ~ getTokenList ~ swapWithMultiPool:",O),Q=await je.value.swapRouterContract.getBestRouterByRpc(f,b,T,A,S,x,O),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ res:",Q)}catch(J){console.log(" ~ file: useSui.ts:1864 ~ getSwapRouter ~ error:",J)}}return{amountIn:_e(Q.inputAmount.toString(),H),amountOut:_e(Q.outputAmount.toString(),L),...Q}},getSwapRouterPayload:ye,fetchPosRewardersAmount:ue,estCoinAmountsFromTotalAmount:f=>{const{lowerTick:b,upperTick:T,decimalsA:A,decimalsB:S,curSqrtPrice:x,totalAmount:O,tokenPriceA:$,tokenPriceB:H}=f;console.log(JSON.stringify({...f,curSqrtPrice:x.toString()}),"params===>");const L=xn.estCoinAmountsFromTotalAmount(b,T,x,O,$,H);console.log("coinAmounts: ",L);const P=Cr(L.amountA.toFixed(A,se.ROUND_UP).toString(),A),C=Cr(L.amountB.toFixed(S,se.ROUND_UP).toString(),S),K={coinA:new de(P),coinB:new de(C)};return{amountA:_e(P.toString(),A),amountB:_e(C.toString(),S),tokenAmountsInfo:K}},getCreateAddLiquidityPayload:async f=>{const{curSqrtPrice:b,tickLower:T,tickUpper:A,tokenAmounts:S,pool:x,slippage:O}=f;console.log(JSON.stringify(f),"####getCreateAddLiquidityPayload 1593");const $=xn.estimateLiquidityFromcoinAmounts(b,T,A,S),H=new se(S.coinA.toString()).mul(1+O),L=new se(S.coinB.toString()).mul(1+O),P={coinTypeA:x.coinTypeA,coinTypeB:x.coinTypeB,pool_id:x.address,tick_lower:T,tick_upper:A,delta_liquidity:$.toString(),max_amount_a:se.ceil(H).toString(),max_amount_b:se.ceil(L).toString(),pos_id:"",rewarder_coin_types:[],collect_fee:!1};console.log(JSON.stringify(P),"==>addLiquidityPayloadParams");const C=await s.Position.createAddLiquidityPayload(P);return v(C)},calculateDepositRatioFixTokenA:(f,b,T)=>xn.calculateDepositRatioFixTokenA(f,b,T),signAndExecuteTransactionBlock:async(f,b,T)=>{var S;if(((f==null?void 0:f.name)==="MSafe Wallet"||u.value==="MSafe Wallet")&&!T)throw a.setIsNotSupportMsafeError(!0),Error("The current operation does not support msafe wallet");a.setIsNotSupportMsafeError(!1),console.log("0319 signAndExecuteTransactionBlock###wallet###",f),console.log("0327 signAndExecuteTransactionBlock###payload###",b),console.log("0327 signAndExecuteTransactionBlock###payloadParams###",T),console.log("0319 signAndExecuteTransactionBlock###sdk.senderAddress###",s.senderAddress);let A;try{b.transactionBlock.setSender(s.senderAddress),console.log("0321 signAndExecuteTransactionBlock start build: ",new Date().getTime());const O=await b.transactionBlock.build({client:s.fullClient});console.log("0321 signAndExecuteTransactionBlock buildTxb: ",O),A=Bc.from(O),console.log("0321 signAndExecuteTransactionBlock start end: ",new Date().getTime()),console.log("0327 signAndExecuteTransactionBlock###newTxb###",A)}catch(x){if(console.log("0319 signAndExecuteTransactionBlock error: ",x),(T==null?void 0:T.action)==="AggregatorSwap"&&(String(x).indexOf("check_coin_threshold")||String(x).indexOf('Identifier("balance")')))return m("Transaction","Exceeded price slippage."),"errorIsReturned"}if(console.log("signAndExecuteTransactionBlock wallet?.name: ",f==null?void 0:f.name),console.log("signAndExecuteTransactionBlock currentWalletName.value: ",u.value),(f==null?void 0:f.name)==="MSafe Wallet"||u.value==="MSafe Wallet"){console.log("signAndExecuteTransactionBlock MSafe Wallet Start");const x=(S=f.getState())==null?void 0:S.currentAccount;console.log("signAndExecuteTransactionBlock MSafe Wallet account: ",x);const O=b.transactionBlock;return O.setSender(s.senderAddress),console.log("signAndExecuteTransactionBlock MSafe Wallet txb: ",O),await f.signAndExecuteTransactionBlock({transactionBlock:O,account:x,chain:"sui:mainnet",action:T==null?void 0:T.action,txbParams:T==null?void 0:T.txbParams})}else{if(u.value==="Fox")return await f.signAndExecuteTransactionBlock(b);if(u.value==="Fewcha")return await f.signAndExecuteTransactionBlock(b);const{transactionBlockBytes:x,signature:O}=await f.signTransactionBlock({transactionBlock:A||b.transactionBlock});if((T==null?void 0:T.action)==="AggregatorSwap"){const $=new Date().getTime(),H=await s.fullClient.executeTransactionBlock({transactionBlock:x,signature:O,options:b.options}),L=new Date().getTime();let P=0,C={};try{C=await s.fullClient.getTransactionBlock({digest:H==null?void 0:H.digest,options:b.options}),P=C==null?void 0:C.timestampMs}catch(q){console.log(" ~ file: useSui.ts:2402 ~ signAndExecuteTransactionBlock ~ error:",q)}const K=P?Math.min(L,Number(P)):L;return{...H,...C,excecuteTime:K-$}}else return await s.fullClient.executeTransactionBlock({transactionBlock:x,signature:O,options:b.options})}},getAllPosition:async(f,b=[])=>{const T=await s.fullClient.getOwnedObjectsByPage(f,{options:{showType:!0,showContent:!0,showOwner:!0,showDisplay:!0},filter:{MatchAny:[{Package:s.sdkOptions.clmm_pool.package_id},{StructType:`${j[e||"Sui"].frams.package_id}::pool::WrappedPositionNFT`}]}});console.log(T,"ownerRes:");const A=()=>`${s.sdkOptions.clmm_pool.package_id}::position::Position`,S=()=>`${j[e||"Sui"].frams.package_id}::pool::WrappedPositionNFT`,x=[],O=[],$=b.length>0;for(const H of T.data){const L=bt(H.data.type);if(L.full_address===A()){const P=yf(H);$?b.includes(P.pool)&&x.push(P):x.push(P)}if(L.full_address===S()){const P=Lc.buildFramsPositionNFT(H);$?b.includes(P.clmm_pool_id)&&O.push(P):O.push(P)}}return console.log("farmsPosition",O),console.log("clmmPosition:",JSON.stringify(x)),{clmmPosition:x,farmsPosition:O}},getFullClient:()=>{const f=new Kt(t);return console.log("getFullClient defaultNetworkOptions: ",t),console.log("getFullClient sdk: ",f),f.fullClient},getPoolsObj:Ce,getBestRouterByServer:async(f,b,T,A,S,x="",O,$)=>{const H=f.value.decimals,L=b.value.decimals,P=localStorage.getItem("swapOrderSplit"),C=localStorage.getItem("includeRoutes"),K=P=="open"||!P,q=C=="open";let Q;try{return Q=await s.RouterV2.getBestRouterByServer(f.value.address,b.value.address,T,A,s.senderAddress,K,q,$),console.log(" ~ file: useSui.ts:1947 ~ getLpListFromContract ~ res:",Q),{...Q,amountIn:_e(Q.inputAmount.toString(),H),amountOut:_e(Q.outputAmount.toString(),L)}}catch(Z){console.log(" ~ file: useSui.ts:1960 ~ getLpListFromContract ~ e:",Z)}},getBestRouterByRpc:async(f,b,T,A,S,x="",O,$)=>{let H;try{return H=await s.RouterV2.getBestRouterByRpc(f.value.address,b.value.address,T,A,S,x,O),H}catch(L){console.log(L)}},getSuiTokenObj:F,batchFetchPosRewardersAmount:he,getTransactionBlock:v}}function ht(e){let t={};return!e||e==="Aptos"?t=hm():t=mb(e),{...t}}const Ic="aggregatorLocal",Ds=[{name:"Cetus",logo:"/source-image/cetus.png",status:"open",type:"dex"},{name:"DeepBook",logo:"https://res.cetus.zone/icon/deepbook.png",status:"close",type:"dex"},{name:"Kriya V2",logo:"https://res.cetus.zone/icon/kriya.png",status:"close",type:"dex"},{name:"Kriya V3",logo:"https://res.cetus.zone/icon/kriya.png",status:"close",type:"dex"},{name:"FlowX V2",logo:"https://res.cetus.zone/icon/flowx.png",status:"close",type:"dex"},{name:"FlowX V3",logo:"https://res.cetus.zone/icon/flowx.png",status:"close",type:"dex"},{name:"Aftermath",logo:"/source-image/aftermath.png",status:"close",type:"dex"},{name:"Turbos",logo:"/source-image/turbos.png",status:"close",type:"dex"},{name:"Haedal",logo:"/source-image/haedal.png",status:"close",type:"other"},{name:"Volo",logo:"/source-image/volo.png",status:"close",type:"other"},{name:"Aftermath LSD",logo:"/source-image/aftermath.png",status:"close",type:"other"}],t0={CETUS:"/source-image/cetus.png",DEEPBOOK:"https://res.cetus.zone/icon/deepbook.png",KRIYA:"https://res.cetus.zone/icon/kriya.png",FLOWX:"https://res.cetus.zone/icon/flowx.png",AFTERMATH:"/source-image/aftermath.png",TURBOS:"/source-image/turbos.png",HAEDAL:"/source-image/haedal.png",VOLO:"/source-image/volo.png",AFSUI:"/source-image/aftermath.png"},Wo=e=>{try{const t=localStorage.getItem(e);return t&&JSON.parse(t)}catch(t){return console.log(" ~ file: localStorage.ts:6 ~ getLocalStorage ~ error:",t),null}},Fs=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.log(" ~ file: localStorage.ts:14 ~ setLocalStorage ~ error:",n)}},wb={pro:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},pre:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},preRoute:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},test:{Aptos:[{name:"Default",link:"https://fullnode.testnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.testnet.sui.io"},{name:"Suiscan",link:"https://rpc-testnet.suiscan.xyz:443"},{name:"Artifact",link:"https://testnet.artifact.systems/sui"},{name:"Custom",link:""}]}},n0={...wb[mf]},bb="0.54.1",Tb="1.25.0",vb={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class Hh extends Error{}class Mh extends Hh{constructor(t,n){super(t),this.code=n,this.type=vb[n]??"ServerError"}}class Ab extends Hh{constructor(t,n,s){super(t),this.status=n,this.statusText=s}}var Na=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Le=(e,t,n)=>(Na(e,t,"read from private field"),n?n.call(e):t.get(e)),On=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ms=(e,t,n,s)=>(Na(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Sb=(e,t,n,s)=>({set _(r){ms(e,t,r,n)},get _(){return Le(e,t,s)}}),Ch=(e,t,n)=>(Na(e,t,"access private method"),n),Jn,Xs,pn,Zn,ir,ws,Ti,Gh,za,Wh;function xb(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const kb={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class _b{constructor(t,n={}){if(On(this,Ti),On(this,za),On(this,Jn,0),On(this,Xs,0),On(this,pn,null),On(this,Zn,null),On(this,ir,new Set),On(this,ws,new Map),this.endpoint=t,this.options={...kb,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=xb(this.endpoint))}async makeRequest(t,n){const s=await Ch(this,Ti,Gh).call(this);return new Promise((r,o)=>{ms(this,Jn,Le(this,Jn)+1),Le(this,ws).set(Le(this,Jn),{resolve:r,reject:o,timeout:setTimeout(()=>{Le(this,ws).delete(Le(this,Jn)),o(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),s.send(JSON.stringify({jsonrpc:"2.0",id:Le(this,Jn),method:t,params:n}))}).then(({error:r,result:o})=>{if(r)throw new Mh(r.message,r.code);return o})}async subscribe(t){const n=new Eb(t);return Le(this,ir).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}Jn=new WeakMap;Xs=new WeakMap;pn=new WeakMap;Zn=new WeakMap;ir=new WeakMap;ws=new WeakMap;Ti=new WeakSet;Gh=function(){return Le(this,Zn)?Le(this,Zn):(ms(this,Zn,new Promise(e=>{var t;(t=Le(this,pn))==null||t.close(),ms(this,pn,new this.options.WebSocketConstructor(this.endpoint)),Le(this,pn).addEventListener("open",()=>{ms(this,Xs,0),e(Le(this,pn))}),Le(this,pn).addEventListener("close",()=>{Sb(this,Xs)._++,Le(this,Xs)<=this.options.maxReconnects&&setTimeout(()=>{Ch(this,za,Wh).call(this)},this.options.reconnectTimeout)}),Le(this,pn).addEventListener("message",({data:n})=>{let s;try{s=JSON.parse(n)}catch(r){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:r}));return}if("id"in s&&s.id!=null&&Le(this,ws).has(s.id)){const{resolve:r,timeout:o}=Le(this,ws).get(s.id);clearTimeout(o),r(s)}else if("params"in s){const{params:r}=s;Le(this,ir).forEach(o=>{o.subscriptionId===r.subscription&&r.subscription===o.subscriptionId&&o.onMessage(r.result)})}})})),Le(this,Zn))};za=new WeakSet;Wh=async function(){var e;return(e=Le(this,pn))==null||e.close(),ms(this,Zn,null),Promise.allSettled([...Le(this,ir)].map(t=>t.subscribe(this)))};class Eb{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[n]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const n=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=n)}}var Ha=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xt=(e,t,n)=>(Ha(e,t,"read from private field"),n?n.call(e):t.get(e)),_r=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},vi=(e,t,n,s)=>(Ha(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Bb=(e,t,n)=>(Ha(e,t,"access private method"),n),Js,Lt,Qs,Ai,Kh;class Pb{constructor(t){_r(this,Ai),_r(this,Js,0),_r(this,Lt,void 0),_r(this,Qs,void 0),vi(this,Lt,t)}fetch(t,n){const s=xt(this,Lt).fetch??globalThis.fetch;if(!s)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return s(t,n)}async request(t){var r,o;vi(this,Js,xt(this,Js)+1);const n=await this.fetch(((r=xt(this,Lt).rpc)==null?void 0:r.url)??xt(this,Lt).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":bb,"Client-Target-Api-Version":Tb,...(o=xt(this,Lt).rpc)==null?void 0:o.headers},body:JSON.stringify({jsonrpc:"2.0",id:xt(this,Js),method:t.method,params:t.params})});if(!n.ok)throw new Ab(`Unexpected status code: ${n.status}`,n.status,n.statusText);const s=await n.json();if("error"in s&&s.error!=null)throw new Mh(s.error.message,s.error.code);return s.result}async subscribe(t){const n=await Bb(this,Ai,Kh).call(this).subscribe(t);return async()=>!!await n()}}Js=new WeakMap;Lt=new WeakMap;Qs=new WeakMap;Ai=new WeakSet;Kh=function(){var e;if(!xt(this,Qs)){const t=xt(this,Lt).WebSocketConstructor??globalThis.WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");vi(this,Qs,new _b(((e=xt(this,Lt).websocket)==null?void 0:e.url)??xt(this,Lt).url,{WebSocketConstructor:t,...xt(this,Lt).websocket}))}return xt(this,Qs)};const Ib=Symbol.for("@mysten/SuiClient");class Ub{get[Ib](){return!0}constructor(t){this.transport=t.transport??new Pb({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!qn(Re(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!qn(Re(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!qn(Re(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!qn(Re(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,n){return await this.transport.request({method:t,params:n})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!qn(Re(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!vr(mn(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(s=>{if(!s||!vr(mn(s)))throw new Error(`Invalid Sui Object id ${s}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!Tc(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(s=>{if(!Tc(s))throw new Error(`Invalid Transaction digest ${s}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock(t){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:yn(t.transactionBlock),Array.isArray(t.signature)?t.signature:[t.signature],t.options,t.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:t,signer:n,...s}){let r;t instanceof Uint8Array?r=t:(t.setSenderIfNotSet(n.toSuiAddress()),r=await t.build({client:this}));const{signature:o,bytes:i}=await n.signTransactionBlock(r);return this.executeTransactionBlock({transactionBlock:i,signature:o,...s})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!qn(Re(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(n=>{if(!n||!vr(mn(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var s;let n;if(fb(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=yn(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")n=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)n=yn(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,(s=t.gasPrice)==null?void 0:s.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:yn(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!vr(mn(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),n=yr(t.digest);return Us(n.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...n}){const{nextCursor:s,hasNextPage:r,data:o}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:r,nextCursor:s,data:o.map(i=>Gm(i,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransactionBlock({signal:t,timeout:n=60*1e3,pollInterval:s=2*1e3,...r}){const o=AbortSignal.timeout(n),i=new Promise((a,c)=>{o.addEventListener("abort",()=>c(o.reason))});for(i.catch(()=>{});!o.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(r)}catch{await Promise.race([new Promise(c=>setTimeout(c,s)),i])}}throw o.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}const Ob=async e=>new Promise(async(t,n)=>{try{if(e.link.includes("cetus")&&window.location.host!=="app.cetus.zone")throw new Error("403");const s=new Ub({url:e.link}),r=new Date().getTime();if(await s.getRpcApiVersion()){const i=new Date().getTime();t({[e.name]:parseInt(String((i-r)/2))})}else n({[e.name]:0})}catch(s){console.log("0726###testRpc###err###",s),n({[e.name]:0})}}),Uc=new Qh,Jh=ho("index",{state:()=>({slippage:localStorage.getItem("cetus-slippage")||"0.5",isShowSuccess:!1,isShowRejected:!1,isShowWaiting:!1,isNotSupportMsafeError:!1,currentTransactionDesc:"",currentTransactionDescText:"",currentTransactionTxid:"",next_timestamp_ms:"",theme:"",chainName:"",positionNum:0,positionAmount:"",poolAmount:"",isRefresh:0,statsData:{},topPoolsList:[],topPoolsObj:{},newTopPoolsObj:{},topTokensList:[],topTokenObj:{},newtopTokenObj:{},lang:Uc.get("lang")||"en",addressLpTokens:{},addressHistTokens:{},transactionList:JSON.parse(localStorage.getItem("transactionList")||"[]")||[],newtransactionList:JSON.parse(localStorage.getItem("newtransactionList")||"[]")||[],newAddtransactionList:[],liquiditytransactionList:null,isSelect:"",openMore:!1,openSwitchChain:!1,openSwitchLang:!1,openExplorer:!1,openH5Icon:!1,isShowMore:!1,isShowNotifi:!1,isShowSetting:!1,isShowSettingH5:!1,isIdoOpenTerm:!1,isShowRouterModal:!1,isShowRpcH5:!1,isShowExplorerH5:!1,isShowHeaderMore:!1,isShowHeaderEarn:!1,isShowBuyCrypto:!1,isShowBuyCryptoConfirm:!1,isShowBuyCryptoSelect:!1,isShowLoadMore:!0,aptosRpcs:[],suiRpcs:[],filterCoinsObj:null,filterCreatePoolCoin:{"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS":"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0x2::sui::SUI":"0x2::sui::SUI","0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS"},suiRpcTimeDelayObj:null,currentCrypto:"",currentExplorer:"",isShowBuyCryptoKODO:!1,isShowHeaderTrade:!1,getStatsError:!1,liquiditySourceList:[],liquiditySourceObj:{},includeRoutes:"",supportDepth3:"",collectTokenListSui:[],collectTokenListAptos:[],importTokenList:[],importTokenListObj:{}}),actions:{copy(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const n=document.createElement("input");n.readOnly=!0,document.body.appendChild(n),n.value=e,n.select(),document.execCommand("Copy"),document.body.removeChild(n)}const{$notify:t}=Dn();t.success({icon:Y("svg",{class:{icon:!0},"aria-hidden":!0},[Y("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Y("div",{class:"notification-title"},[Y("span",{innerHTML:ft.global.t("tips.copySuccess")},null)]),class:"ant-notification-copy"})},setImportTokenList(e){this.importTokenList=e,this.importTokenListObj=Object.fromEntries(e==null?void 0:e.map(t=>[t.address,t])),localStorage.setItem("importTokenList",JSON.stringify(e))},setOpenMore(e){this.openMore=e},setIsShowHeaderMore(e){this.isShowHeaderMore=e},setIsShowHeaderEarn(e){this.isShowHeaderEarn=e},setOpenSwitchChain(e){this.openSwitchChain=e},setOpenSwitchLang(e){this.openSwitchLang=e},setOpenH5Icon(e){this.openH5Icon=e},setIsShowMore(e){this.isShowMore=e},setSlippage(e){console.log(e,"slippage##"),this.slippage=e,localStorage.setItem("cetus-slippage",e)},setPositiomNum(){this.positionNum=this.positionNum+1},setTheme(e){console.log(e,"theme##"),this.theme=e,e=="default"?(this.chainName="Aptos",localStorage.setItem("chainName","Aptos")):e=="sui"?(this.chainName="Sui",localStorage.setItem("chainName","Sui")):e=="sui2"&&(this.chainName="Sui2",localStorage.setItem("chainName","Sui2"));const t=e=="default"?"Aptos":"Sui";this.currentExplorer=localStorage.getItem(`${t}-currentExplorerUrl`)||of[t][0].link},setIsShowSuccess(e){this.isShowSuccess=e},setIsNotSupportMsafeError(e){this.isNotSupportMsafeError=e},setIsShowRejected(e){this.isShowRejected=e},setIsShowWaiting(e){this.isShowWaiting=e},setTransactionDesc(e){this.currentTransactionDesc=e},setTransactionDescText(e){console.log(e,"====>status"),this.currentTransactionDescText=e},setTransactionTxid(e){this.currentTransactionTxid=e},async getStatsData(e,t){var n,s;try{let r=[],o=[];console.log("0216###getStatsData###this.chainName####",e);const{data:i}=e=="Aptos"?await fetch(`${j[e||"Aptos"].api}/v2/swap/count`).then(h=>h.json()):await fetch(`${j[e||"Sui"].api}/v2/sui/swap/count/v3`).then(h=>h.json()),a=e=="Aptos"?await fetch(`${j[e||"Aptos"].api}/v2/contract/price`).then(h=>h.json()):await fetch(`${j[e||"Sui"].api}/v2/sui/contract/price`).then(h=>h.json());o=Object.fromEntries(a.data.list.map(h=>[h.swap_account,h])),this.addressHistTokens=o,this.statsData=i||{};const c=[];let d=!1,l,u={};if(e=="Sui"&&(u=ht("Sui").getSuiTokenObj()),i&&i.pools){for(let h=0;h<i.pools.length;h++){d=!1;const p=i.pools[h],g=p.rewarder_apr[0]?Number(p.rewarder_apr[0].substring(0,p.rewarder_apr[0].length-1)):0,m=p.rewarder_apr[1]?Number(p.rewarder_apr[1].substring(0,p.rewarder_apr[1].length-1)):0,y=p.rewarder_apr[2]?Number(p.rewarder_apr[2].substring(0,p.rewarder_apr[2].length-1)):0,E=g+m+y;p.stable_farming&&p.stable_farming.stable_rewarder.map(v=>{v.amount_second>0&&(d=!0)}),l=p.stable_farming&&p.stable_farming.apr*100,c.push({...p,pure_tvl_in_usd:e=="Aptos"?(p==null?void 0:p.pure_tvl_in_usd)||p.tvl_in_usd:p==null?void 0:p.pure_tvl_in_usd,aprNum:p?e=="Aptos"?String(Number(p.apr_7day.substring(0,p.apr_7day.length-1))+E):String(Number(p.apr_24h.substring(0,p.apr_24h.length-1))+E):"0",token_a_address:p.token_a_reserves=="SUI"?"0x2::sui::SUI":p.token_a_address,token_b_address:p.token_b_reserves=="SUI"?"0x2::sui::SUI":p.token_b_address,apr_7day:e=="Aptos"?p.apr_7day:p.apr_24h,fee_24_h:p.fee_24_h?p.fee_24_h:"",isStableFarming:d,stableFarmingApr:l,coin_a:{...u[p.token_a_address],logo_url:(n=u[p.token_a_address])==null?void 0:n.icon_url},coin_b:{...u[p.token_b_address],logo_url:(s=u[p.token_b_address])==null?void 0:s.icon_url}})}this.topPoolsList=c,console.log(" ~ file: index.ts:245 ~ getStatsData ~ this.topPoolsList:",this.topPoolsList),r=Object.fromEntries(i.pools.map(h=>[h.swap_account,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}])),this.topPoolsObj=Object.fromEntries(i.pools.map(h=>[h.name,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}])),this.newTopPoolsObj=Object.fromEntries(i.pools.map(h=>[h.swap_account,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}]))}if(i&&i.tokens){const p=i.tokens.filter(g=>!t||!t[g.address]).map(g=>({...g,pure_tvl_in_usd:e==="Aptos"?(g==null?void 0:g.pure_tvl_in_usd)||(g==null?void 0:g.tvl_in_usd):g==null?void 0:g.pure_tvl_in_usd}));this.topTokensList=p,this.addressLpTokens=r,this.topTokenObj=Object.fromEntries(p.map(g=>[g.name,g])),this.newtopTokenObj=Object.fromEntries(p.map(g=>[g.address,g]))}this.getStatsError=!1}catch(r){console.log(" ~ file: index.ts:245 ~ getStatsData ~ error:",r),this.getStatsError=!0}},setLang(e){Uc.set("lang",e),this.lang=e},setTransactionList(e){console.log(this.newAddtransactionList,"====>newAddtransactionLists")},clearTransactionList(){const e=this.newAddtransactionList.filter(t=>t.chainName!==this.chainName);this.newAddtransactionList=e,localStorage.setItem("newAddtransactionList",e.length>0?JSON.stringify(e):"")},setIsSelect(e){console.log(e,"status===>"),this.isSelect=e},setIsShowNotifi(e){this.isShowNotifi=e},setIsShowSetting(e){this.isShowSetting=e},setIsShowSettingH5(e){this.isShowSettingH5=e},setIsIdoOpenTerm(e){this.isIdoOpenTerm=e},setIsShowRouterModal(e){this.isShowRouterModal=e},setIsOpenExplorer(e){this.openExplorer=e},setIsShowExplorerH5(e){this.isShowExplorerH5=e},setIsShowRpcH5(e){this.isShowRpcH5=e},setPositiomAmount(e){this.positionAmount=e},setPoolAmount(e){this.poolAmount=e},setisRefresh(){this.isRefresh=this.isRefresh+1},async getFrontConfig(){var e;this.getAggregatorSetting();try{let t;const n=localStorage.getItem("SuiFrontConfig"),s=new Date().getTime(),r=n?JSON.parse(n):null;if(r&&Number(r==null?void 0:r.expiration)>s&&(r!=null&&r.data)&&!Gr(r==null?void 0:r.data))t=r==null?void 0:r.data;else{const o=await fetch(`${j.Sui.api}/v2/sui/front_config`).then(i=>i.json());if((o==null?void 0:o.code)===200){t=o==null?void 0:o.data;try{const i={expiration:new Date().getTime()+3e5,data:o==null?void 0:o.data};localStorage.setItem("SuiFrontConfig",JSON.stringify(i))}catch(i){console.log("getFrontConfig localStorage setItem Error: ",i)}}}if(t){this.aptosRpcs=(t==null?void 0:t.aptos_nodes)||[],this.suiRpcs=(t==null?void 0:t.sui_nodes)||[];const o=(t==null?void 0:t.filter_coins)||[],i=Object.fromEntries(o.map(a=>[a,a]));this.filterCoinsObj=i,((e=t==null?void 0:t.sui_nodes)==null?void 0:e.length)>0&&this.setRpcTimedelay(t==null?void 0:t.sui_nodes)}}catch(t){console.log("getFrontConfig###error###",t),this.filterCoinsObj={}}},async getTransactionList(e,t,n){this.isShowLoadMore=!0;let s;n==0?s=new Date().getTime():s=this.next_timestamp_ms,console.log(s,this.next_timestamp_ms,"this.next_timestamp_ms");try{const r=e=="Aptos"?await fetch(`${j[e||"Aptos"].api}/v2/aptos/pool/history?limit=10&offset=${n}&timestamp_ms=${s}&address=${t}`).then(o=>o.json()):await fetch(`${j[e||"Sui"].api}/v2/sui/pool/history?limit=10&offset=${n}&timestamp_ms=${s}&address=${t}`).then(o=>o.json());r!=null&&r.data?(r.data.list.length<10&&(this.isShowLoadMore=!1),n==0?(this.liquiditytransactionList=r.data.list,this.next_timestamp_ms=r.data.next_timestamp_ms):(this.next_timestamp_ms=r.data.next_timestamp_ms,this.liquiditytransactionList=this.liquiditytransactionList.concat(r.data.list))):(this.isShowLoadMore=!1,n==0&&(this.liquiditytransactionList=[])),console.log(r,this.isShowLoadMore,"2132131")}catch(r){this.isShowLoadMore=!1,this.liquiditytransactionList=[],console.log("getFrontConfig###error###",r)}},setClearLiquiditytransactionList(){this.liquiditytransactionList=null},async setRpcTimedelay(e){try{console.log("setRpcTimedelay###rpcList###",e);const t=[];e.forEach(s=>{s.name!=="Custom"&&t.push(Ob(s))});const n=await Promise.allSettled(t);if(console.log("0726###setRpcTimedelay###res###",n),(n==null?void 0:n.length)>0){let s={};n.forEach(r=>{s={...s,...r==null?void 0:r.value}}),console.log("suiRpcTimeDelayObj###",s),this.suiRpcTimeDelayObj=s}}catch(t){console.log("setRpcTimedelay###err###",t)}},setIsShowBuyCrypto(e){this.isShowBuyCrypto=e},setIsShowBuyCryptoConfirm(e){this.isShowBuyCryptoConfirm=e},setIsShowBuyCryptoSelect(e){this.isShowBuyCryptoSelect=e},setIsShowBuyCryptoKODO(e){this.isShowBuyCryptoKODO=e},setCurrentCrypto(e){this.currentCrypto=e},setCurrentExplorer(e){this.currentExplorer=e,console.log(e,"value360##")},setIsShowHeaderTrade(e){this.isShowHeaderTrade=e},getAggregatorSetting(){var r;const e=Wo(Ic);if(console.log(" ~ file: index.ts:469 ~ getAggregatorSetting ~ aggregatorLocal:",e),e&&e.length===Ds.length&&((r=e[0])!=null&&r.type))this.liquiditySourceList=e;else{const o=Ds.map(i=>{var d,l,u;const a=e&&(e==null?void 0:e.filter(h=>i.name.indexOf(h.name)>-1));let c;return a&&(a!=null&&a[0])?i.name.indexOf("Kriya")>-1?c={...i,status:(d=a==null?void 0:a[0])==null?void 0:d.status}:i.name==="Aftermath LSD"&&((l=a==null?void 0:a[0])==null?void 0:l.name)==="Aftermath"?c={...i}:i.name.indexOf("FlowX")>-1?c={...i,status:(u=a==null?void 0:a[0])==null?void 0:u.status}:c={...i,...a==null?void 0:a[0]}:c={...i},c});this.liquiditySourceList=o}const t=Object.fromEntries(Ds==null?void 0:Ds.map(o=>[o.name.toUpperCase(),o]));this.liquiditySourceObj={...t,CETUS:{name:"CETUS",logo:"/sui-image/logo_cetus@2x.png"}};let n,s;try{n=Wo("includeRoutes")||"open",s=Wo("supportDepth3")||""}catch{n="open",s=""}this.includeRoutes=n,this.supportDepth3=s},setAggregatorSetting(e,t,n){this.liquiditySourceList=e,this.includeRoutes=t,Fs(Ic,e),Fs("includeRoutes",t),n!==void 0&&(this.supportDepth3=n,Fs("supportDepth3",n))},setSupportDepth3(e){this.supportDepth3=e},setCollectTokenList(e,t){t=="Aptos"?(this.collectTokenListAptos=JSON.parse(JSON.stringify(e)),Fs("collectTokenListAptos",e)):(this.collectTokenListSui=JSON.parse(JSON.stringify(e)),Fs("collectTokenListSui",e))}}});export{Ub as $,t0 as A,N as B,sb as C,Zb as D,Vs as E,Pe as F,St as G,Pw as H,rt as I,Vt as J,jm as K,zt as L,Ve as M,n0 as N,yn as O,Ye as P,Vb as Q,U as R,pa as S,zn as T,Xb as U,Us as V,Oo as W,Bc as X,Pm as Y,mn as Z,vr as _,pb as a,vt as a0,Gb as a1,Wm as a2,Gn as a3,bh as a4,ht as b,Pc as c,hm as d,gb as e,yb as f,Mb as g,mb as h,am as i,Wo as j,Hb as k,Kb as l,xc as m,Re as n,ys as o,_w as p,pt as q,im as r,e0 as s,Cb as t,Jh as u,Jb as v,Yb as w,Wb as x,Ro as y,Qb as z};
