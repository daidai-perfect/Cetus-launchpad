var Sf=Object.defineProperty;var Tf=(e,t,i)=>t in e?Sf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var G=(e,t,i)=>(Tf(e,typeof t!="symbol"?t+"":t,i),i);import{a8 as sc,aa as Mf,ah as Of,ab as If,a7 as hr}from"./entry.66997069.js";import{D as Q}from"./decimal.765d8738.js";const Pf={},jf=Object.freeze(Object.defineProperty({__proto__:null,default:Pf},Symbol.toStringTag,{value:"Module"})),Ef=sc(jf);var A={},Bf={get exports(){return A},set exports(e){A=e}};(function(e){(function(t,i){function n(O,f){if(!O)throw new Error(f||"Assertion failed")}function r(O,f){O.super_=f;var l=function(){};l.prototype=f.prototype,O.prototype=new l,O.prototype.constructor=O}function o(O,f,l){if(o.isBN(O))return O;this.negative=0,this.words=null,this.length=0,this.red=null,O!==null&&((f==="le"||f==="be")&&(l=f,f=10),this._init(O||0,f||10,l||"be"))}typeof t=="object"?t.exports=o:i.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Ef.Buffer}catch{}o.isBN=function(f){return f instanceof o?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===o.wordSize&&Array.isArray(f.words)},o.max=function(f,l){return f.cmp(l)>0?f:l},o.min=function(f,l){return f.cmp(l)<0?f:l},o.prototype._init=function(f,l,h){if(typeof f=="number")return this._initNumber(f,l,h);if(typeof f=="object")return this._initArray(f,l,h);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),f=f.toString().replace(/\s+/g,"");var b=0;f[0]==="-"&&(b++,this.negative=1),b<f.length&&(l===16?this._parseHex(f,b,h):(this._parseBase(f,l,b),h==="le"&&this._initArray(this.toArray(),l,h)))},o.prototype._initNumber=function(f,l,h){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(n(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),l,h)},o.prototype._initArray=function(f,l,h){if(n(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var w,y,C=0;if(h==="be")for(b=f.length-1,w=0;b>=0;b-=3)y=f[b]|f[b-1]<<8|f[b-2]<<16,this.words[w]|=y<<C&67108863,this.words[w+1]=y>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);else if(h==="le")for(b=0,w=0;b<f.length;b+=3)y=f[b]|f[b+1]<<8|f[b+2]<<16,this.words[w]|=y<<C&67108863,this.words[w+1]=y>>>26-C&67108863,C+=24,C>=26&&(C-=26,w++);return this._strip()};function a(O,f){var l=O.charCodeAt(f);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;n(!1,"Invalid character in "+O)}function c(O,f,l){var h=a(O,l);return l-1>=f&&(h|=a(O,l-1)<<4),h}o.prototype._parseHex=function(f,l,h){this.length=Math.ceil((f.length-l)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var w=0,y=0,C;if(h==="be")for(b=f.length-1;b>=l;b-=2)C=c(f,l,b)<<w,this.words[y]|=C&67108863,w>=18?(w-=18,y+=1,this.words[y]|=C>>>26):w+=8;else{var v=f.length-l;for(b=v%2===0?l+1:l;b<f.length;b+=2)C=c(f,l,b)<<w,this.words[y]|=C&67108863,w>=18?(w-=18,y+=1,this.words[y]|=C>>>26):w+=8}this._strip()};function d(O,f,l,h){for(var b=0,w=0,y=Math.min(O.length,l),C=f;C<y;C++){var v=O.charCodeAt(C)-48;b*=h,v>=49?w=v-49+10:v>=17?w=v-17+10:w=v,n(v>=0&&w<h,"Invalid character"),b+=w}return b}o.prototype._parseBase=function(f,l,h){this.words=[0],this.length=1;for(var b=0,w=1;w<=67108863;w*=l)b++;b--,w=w/l|0;for(var y=f.length-h,C=y%b,v=Math.min(y,y-C)+h,p=0,_=h;_<v;_+=b)p=d(f,_,_+b,l),this.imuln(w),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p);if(C!==0){var S=1;for(p=d(f,_,f.length,l),_=0;_<C;_++)S*=l;this.imuln(S),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p)}this._strip()},o.prototype.copy=function(f){f.words=new Array(this.length);for(var l=0;l<this.length;l++)f.words[l]=this.words[l];f.length=this.length,f.negative=this.negative,f.red=this.red};function u(O,f){O.words=f.words,O.length=f.length,O.negative=f.negative,O.red=f.red}if(o.prototype._move=function(f){u(f,this)},o.prototype.clone=function(){var f=new o(null);return this.copy(f),f},o.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{o.prototype.inspect=m}else o.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(f,l){f=f||10,l=l|0||1;var h;if(f===16||f==="hex"){h="";for(var b=0,w=0,y=0;y<this.length;y++){var C=this.words[y],v=((C<<b|w)&16777215).toString(16);w=C>>>24-b&16777215,b+=2,b>=26&&(b-=26,y--),w!==0||y!==this.length-1?h=g[6-v.length]+v+h:h=v+h}for(w!==0&&(h=w.toString(16)+h);h.length%l!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(f===(f|0)&&f>=2&&f<=36){var p=k[f],_=x[f];h="";var S=this.clone();for(S.negative=0;!S.isZero();){var U=S.modrn(_).toString(f);S=S.idivn(_),S.isZero()?h=U+h:h=g[p-U.length]+U+h}for(this.isZero()&&(h="0"+h);h.length%l!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(f,l){return this.toArrayLike(s,f,l)}),o.prototype.toArray=function(f,l){return this.toArrayLike(Array,f,l)};var M=function(f,l){return f.allocUnsafe?f.allocUnsafe(l):new f(l)};o.prototype.toArrayLike=function(f,l,h){this._strip();var b=this.byteLength(),w=h||Math.max(1,b);n(b<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var y=M(f,w),C=l==="le"?"LE":"BE";return this["_toArrayLike"+C](y,b),y},o.prototype._toArrayLikeLE=function(f,l){for(var h=0,b=0,w=0,y=0;w<this.length;w++){var C=this.words[w]<<y|b;f[h++]=C&255,h<f.length&&(f[h++]=C>>8&255),h<f.length&&(f[h++]=C>>16&255),y===6?(h<f.length&&(f[h++]=C>>24&255),b=0,y=0):(b=C>>>24,y+=2)}if(h<f.length)for(f[h++]=b;h<f.length;)f[h++]=0},o.prototype._toArrayLikeBE=function(f,l){for(var h=f.length-1,b=0,w=0,y=0;w<this.length;w++){var C=this.words[w]<<y|b;f[h--]=C&255,h>=0&&(f[h--]=C>>8&255),h>=0&&(f[h--]=C>>16&255),y===6?(h>=0&&(f[h--]=C>>24&255),b=0,y=0):(b=C>>>24,y+=2)}if(h>=0)for(f[h--]=b;h>=0;)f[h--]=0},Math.clz32?o.prototype._countBits=function(f){return 32-Math.clz32(f)}:o.prototype._countBits=function(f){var l=f,h=0;return l>=4096&&(h+=13,l>>>=13),l>=64&&(h+=7,l>>>=7),l>=8&&(h+=4,l>>>=4),l>=2&&(h+=2,l>>>=2),h+l},o.prototype._zeroBits=function(f){if(f===0)return 26;var l=f,h=0;return l&8191||(h+=13,l>>>=13),l&127||(h+=7,l>>>=7),l&15||(h+=4,l>>>=4),l&3||(h+=2,l>>>=2),l&1||h++,h},o.prototype.bitLength=function(){var f=this.words[this.length-1],l=this._countBits(f);return(this.length-1)*26+l};function I(O){for(var f=new Array(O.bitLength()),l=0;l<f.length;l++){var h=l/26|0,b=l%26;f[l]=O.words[h]>>>b&1}return f}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,l=0;l<this.length;l++){var h=this._zeroBits(this.words[l]);if(f+=h,h!==26)break}return f},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},o.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]|f.words[l];return this._strip()},o.prototype.ior=function(f){return n((this.negative|f.negative)===0),this.iuor(f)},o.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},o.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},o.prototype.iuand=function(f){var l;this.length>f.length?l=f:l=this;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]&f.words[h];return this.length=l.length,this._strip()},o.prototype.iand=function(f){return n((this.negative|f.negative)===0),this.iuand(f)},o.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},o.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},o.prototype.iuxor=function(f){var l,h;this.length>f.length?(l=this,h=f):(l=f,h=this);for(var b=0;b<h.length;b++)this.words[b]=l.words[b]^h.words[b];if(this!==l)for(;b<l.length;b++)this.words[b]=l.words[b];return this.length=l.length,this._strip()},o.prototype.ixor=function(f){return n((this.negative|f.negative)===0),this.iuxor(f)},o.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},o.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},o.prototype.inotn=function(f){n(typeof f=="number"&&f>=0);var l=Math.ceil(f/26)|0,h=f%26;this._expand(l),h>0&&l--;for(var b=0;b<l;b++)this.words[b]=~this.words[b]&67108863;return h>0&&(this.words[b]=~this.words[b]&67108863>>26-h),this._strip()},o.prototype.notn=function(f){return this.clone().inotn(f)},o.prototype.setn=function(f,l){n(typeof f=="number"&&f>=0);var h=f/26|0,b=f%26;return this._expand(h+1),l?this.words[h]=this.words[h]|1<<b:this.words[h]=this.words[h]&~(1<<b),this._strip()},o.prototype.iadd=function(f){var l;if(this.negative!==0&&f.negative===0)return this.negative=0,l=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,l=this.isub(f),f.negative=1,l._normSign();var h,b;this.length>f.length?(h=this,b=f):(h=f,b=this);for(var w=0,y=0;y<b.length;y++)l=(h.words[y]|0)+(b.words[y]|0)+w,this.words[y]=l&67108863,w=l>>>26;for(;w!==0&&y<h.length;y++)l=(h.words[y]|0)+w,this.words[y]=l&67108863,w=l>>>26;if(this.length=h.length,w!==0)this.words[this.length]=w,this.length++;else if(h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this},o.prototype.add=function(f){var l;return f.negative!==0&&this.negative===0?(f.negative=0,l=this.sub(f),f.negative^=1,l):f.negative===0&&this.negative!==0?(this.negative=0,l=f.sub(this),this.negative=1,l):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},o.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var l=this.iadd(f);return f.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var h=this.cmp(f);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,w;h>0?(b=this,w=f):(b=f,w=this);for(var y=0,C=0;C<w.length;C++)l=(b.words[C]|0)-(w.words[C]|0)+y,y=l>>26,this.words[C]=l&67108863;for(;y!==0&&C<b.length;C++)l=(b.words[C]|0)+y,y=l>>26,this.words[C]=l&67108863;if(y===0&&C<b.length&&b!==this)for(;C<b.length;C++)this.words[C]=b.words[C];return this.length=Math.max(this.length,C),b!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(f){return this.clone().isub(f)};function E(O,f,l){l.negative=f.negative^O.negative;var h=O.length+f.length|0;l.length=h,h=h-1|0;var b=O.words[0]|0,w=f.words[0]|0,y=b*w,C=y&67108863,v=y/67108864|0;l.words[0]=C;for(var p=1;p<h;p++){for(var _=v>>>26,S=v&67108863,U=Math.min(p,f.length-1),V=Math.max(0,p-O.length+1);V<=U;V++){var ne=p-V|0;b=O.words[ne]|0,w=f.words[V]|0,y=b*w+S,_+=y/67108864|0,S=y&67108863}l.words[p]=S|0,v=_|0}return v!==0?l.words[p]=v|0:l.length--,l._strip()}var B=function(f,l,h){var b=f.words,w=l.words,y=h.words,C=0,v,p,_,S=b[0]|0,U=S&8191,V=S>>>13,ne=b[1]|0,we=ne&8191,fe=ne>>>13,Ze=b[2]|0,et=Ze&8191,ke=Ze>>>13,tt=b[3]|0,it=tt&8191,Ce=tt>>>13,nt=b[4]|0,rt=nt&8191,Ae=nt>>>13,ot=b[5]|0,st=ot&8191,xe=ot>>>13,at=b[6]|0,ct=at&8191,Se=at>>>13,lt=b[7]|0,dt=lt&8191,Te=lt>>>13,ut=b[8]|0,ft=ut&8191,Me=ut>>>13,ht=b[9]|0,pt=ht&8191,Oe=ht>>>13,_t=w[0]|0,mt=_t&8191,Ie=_t>>>13,gt=w[1]|0,bt=gt&8191,Pe=gt>>>13,wt=w[2]|0,yt=wt&8191,je=wt>>>13,vt=w[3]|0,kt=vt&8191,Ee=vt>>>13,Ct=w[4]|0,At=Ct&8191,Be=Ct>>>13,xt=w[5]|0,St=xt&8191,Ne=xt>>>13,Tt=w[6]|0,Mt=Tt&8191,Re=Tt>>>13,Ot=w[7]|0,It=Ot&8191,De=Ot>>>13,Pt=w[8]|0,jt=Pt&8191,$e=Pt>>>13,Et=w[9]|0,Bt=Et&8191,qe=Et>>>13;h.negative=f.negative^l.negative,h.length=19,v=Math.imul(U,mt),p=Math.imul(U,Ie),p=p+Math.imul(V,mt)|0,_=Math.imul(V,Ie);var Qe=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,v=Math.imul(we,mt),p=Math.imul(we,Ie),p=p+Math.imul(fe,mt)|0,_=Math.imul(fe,Ie),v=v+Math.imul(U,bt)|0,p=p+Math.imul(U,Pe)|0,p=p+Math.imul(V,bt)|0,_=_+Math.imul(V,Pe)|0;var In=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(In>>>26)|0,In&=67108863,v=Math.imul(et,mt),p=Math.imul(et,Ie),p=p+Math.imul(ke,mt)|0,_=Math.imul(ke,Ie),v=v+Math.imul(we,bt)|0,p=p+Math.imul(we,Pe)|0,p=p+Math.imul(fe,bt)|0,_=_+Math.imul(fe,Pe)|0,v=v+Math.imul(U,yt)|0,p=p+Math.imul(U,je)|0,p=p+Math.imul(V,yt)|0,_=_+Math.imul(V,je)|0;var Pn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,v=Math.imul(it,mt),p=Math.imul(it,Ie),p=p+Math.imul(Ce,mt)|0,_=Math.imul(Ce,Ie),v=v+Math.imul(et,bt)|0,p=p+Math.imul(et,Pe)|0,p=p+Math.imul(ke,bt)|0,_=_+Math.imul(ke,Pe)|0,v=v+Math.imul(we,yt)|0,p=p+Math.imul(we,je)|0,p=p+Math.imul(fe,yt)|0,_=_+Math.imul(fe,je)|0,v=v+Math.imul(U,kt)|0,p=p+Math.imul(U,Ee)|0,p=p+Math.imul(V,kt)|0,_=_+Math.imul(V,Ee)|0;var jn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(jn>>>26)|0,jn&=67108863,v=Math.imul(rt,mt),p=Math.imul(rt,Ie),p=p+Math.imul(Ae,mt)|0,_=Math.imul(Ae,Ie),v=v+Math.imul(it,bt)|0,p=p+Math.imul(it,Pe)|0,p=p+Math.imul(Ce,bt)|0,_=_+Math.imul(Ce,Pe)|0,v=v+Math.imul(et,yt)|0,p=p+Math.imul(et,je)|0,p=p+Math.imul(ke,yt)|0,_=_+Math.imul(ke,je)|0,v=v+Math.imul(we,kt)|0,p=p+Math.imul(we,Ee)|0,p=p+Math.imul(fe,kt)|0,_=_+Math.imul(fe,Ee)|0,v=v+Math.imul(U,At)|0,p=p+Math.imul(U,Be)|0,p=p+Math.imul(V,At)|0,_=_+Math.imul(V,Be)|0;var En=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(En>>>26)|0,En&=67108863,v=Math.imul(st,mt),p=Math.imul(st,Ie),p=p+Math.imul(xe,mt)|0,_=Math.imul(xe,Ie),v=v+Math.imul(rt,bt)|0,p=p+Math.imul(rt,Pe)|0,p=p+Math.imul(Ae,bt)|0,_=_+Math.imul(Ae,Pe)|0,v=v+Math.imul(it,yt)|0,p=p+Math.imul(it,je)|0,p=p+Math.imul(Ce,yt)|0,_=_+Math.imul(Ce,je)|0,v=v+Math.imul(et,kt)|0,p=p+Math.imul(et,Ee)|0,p=p+Math.imul(ke,kt)|0,_=_+Math.imul(ke,Ee)|0,v=v+Math.imul(we,At)|0,p=p+Math.imul(we,Be)|0,p=p+Math.imul(fe,At)|0,_=_+Math.imul(fe,Be)|0,v=v+Math.imul(U,St)|0,p=p+Math.imul(U,Ne)|0,p=p+Math.imul(V,St)|0,_=_+Math.imul(V,Ne)|0;var Bn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,v=Math.imul(ct,mt),p=Math.imul(ct,Ie),p=p+Math.imul(Se,mt)|0,_=Math.imul(Se,Ie),v=v+Math.imul(st,bt)|0,p=p+Math.imul(st,Pe)|0,p=p+Math.imul(xe,bt)|0,_=_+Math.imul(xe,Pe)|0,v=v+Math.imul(rt,yt)|0,p=p+Math.imul(rt,je)|0,p=p+Math.imul(Ae,yt)|0,_=_+Math.imul(Ae,je)|0,v=v+Math.imul(it,kt)|0,p=p+Math.imul(it,Ee)|0,p=p+Math.imul(Ce,kt)|0,_=_+Math.imul(Ce,Ee)|0,v=v+Math.imul(et,At)|0,p=p+Math.imul(et,Be)|0,p=p+Math.imul(ke,At)|0,_=_+Math.imul(ke,Be)|0,v=v+Math.imul(we,St)|0,p=p+Math.imul(we,Ne)|0,p=p+Math.imul(fe,St)|0,_=_+Math.imul(fe,Ne)|0,v=v+Math.imul(U,Mt)|0,p=p+Math.imul(U,Re)|0,p=p+Math.imul(V,Mt)|0,_=_+Math.imul(V,Re)|0;var Nn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,v=Math.imul(dt,mt),p=Math.imul(dt,Ie),p=p+Math.imul(Te,mt)|0,_=Math.imul(Te,Ie),v=v+Math.imul(ct,bt)|0,p=p+Math.imul(ct,Pe)|0,p=p+Math.imul(Se,bt)|0,_=_+Math.imul(Se,Pe)|0,v=v+Math.imul(st,yt)|0,p=p+Math.imul(st,je)|0,p=p+Math.imul(xe,yt)|0,_=_+Math.imul(xe,je)|0,v=v+Math.imul(rt,kt)|0,p=p+Math.imul(rt,Ee)|0,p=p+Math.imul(Ae,kt)|0,_=_+Math.imul(Ae,Ee)|0,v=v+Math.imul(it,At)|0,p=p+Math.imul(it,Be)|0,p=p+Math.imul(Ce,At)|0,_=_+Math.imul(Ce,Be)|0,v=v+Math.imul(et,St)|0,p=p+Math.imul(et,Ne)|0,p=p+Math.imul(ke,St)|0,_=_+Math.imul(ke,Ne)|0,v=v+Math.imul(we,Mt)|0,p=p+Math.imul(we,Re)|0,p=p+Math.imul(fe,Mt)|0,_=_+Math.imul(fe,Re)|0,v=v+Math.imul(U,It)|0,p=p+Math.imul(U,De)|0,p=p+Math.imul(V,It)|0,_=_+Math.imul(V,De)|0;var Rn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,v=Math.imul(ft,mt),p=Math.imul(ft,Ie),p=p+Math.imul(Me,mt)|0,_=Math.imul(Me,Ie),v=v+Math.imul(dt,bt)|0,p=p+Math.imul(dt,Pe)|0,p=p+Math.imul(Te,bt)|0,_=_+Math.imul(Te,Pe)|0,v=v+Math.imul(ct,yt)|0,p=p+Math.imul(ct,je)|0,p=p+Math.imul(Se,yt)|0,_=_+Math.imul(Se,je)|0,v=v+Math.imul(st,kt)|0,p=p+Math.imul(st,Ee)|0,p=p+Math.imul(xe,kt)|0,_=_+Math.imul(xe,Ee)|0,v=v+Math.imul(rt,At)|0,p=p+Math.imul(rt,Be)|0,p=p+Math.imul(Ae,At)|0,_=_+Math.imul(Ae,Be)|0,v=v+Math.imul(it,St)|0,p=p+Math.imul(it,Ne)|0,p=p+Math.imul(Ce,St)|0,_=_+Math.imul(Ce,Ne)|0,v=v+Math.imul(et,Mt)|0,p=p+Math.imul(et,Re)|0,p=p+Math.imul(ke,Mt)|0,_=_+Math.imul(ke,Re)|0,v=v+Math.imul(we,It)|0,p=p+Math.imul(we,De)|0,p=p+Math.imul(fe,It)|0,_=_+Math.imul(fe,De)|0,v=v+Math.imul(U,jt)|0,p=p+Math.imul(U,$e)|0,p=p+Math.imul(V,jt)|0,_=_+Math.imul(V,$e)|0;var Dn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,v=Math.imul(pt,mt),p=Math.imul(pt,Ie),p=p+Math.imul(Oe,mt)|0,_=Math.imul(Oe,Ie),v=v+Math.imul(ft,bt)|0,p=p+Math.imul(ft,Pe)|0,p=p+Math.imul(Me,bt)|0,_=_+Math.imul(Me,Pe)|0,v=v+Math.imul(dt,yt)|0,p=p+Math.imul(dt,je)|0,p=p+Math.imul(Te,yt)|0,_=_+Math.imul(Te,je)|0,v=v+Math.imul(ct,kt)|0,p=p+Math.imul(ct,Ee)|0,p=p+Math.imul(Se,kt)|0,_=_+Math.imul(Se,Ee)|0,v=v+Math.imul(st,At)|0,p=p+Math.imul(st,Be)|0,p=p+Math.imul(xe,At)|0,_=_+Math.imul(xe,Be)|0,v=v+Math.imul(rt,St)|0,p=p+Math.imul(rt,Ne)|0,p=p+Math.imul(Ae,St)|0,_=_+Math.imul(Ae,Ne)|0,v=v+Math.imul(it,Mt)|0,p=p+Math.imul(it,Re)|0,p=p+Math.imul(Ce,Mt)|0,_=_+Math.imul(Ce,Re)|0,v=v+Math.imul(et,It)|0,p=p+Math.imul(et,De)|0,p=p+Math.imul(ke,It)|0,_=_+Math.imul(ke,De)|0,v=v+Math.imul(we,jt)|0,p=p+Math.imul(we,$e)|0,p=p+Math.imul(fe,jt)|0,_=_+Math.imul(fe,$e)|0,v=v+Math.imul(U,Bt)|0,p=p+Math.imul(U,qe)|0,p=p+Math.imul(V,Bt)|0,_=_+Math.imul(V,qe)|0;var $n=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+($n>>>26)|0,$n&=67108863,v=Math.imul(pt,bt),p=Math.imul(pt,Pe),p=p+Math.imul(Oe,bt)|0,_=Math.imul(Oe,Pe),v=v+Math.imul(ft,yt)|0,p=p+Math.imul(ft,je)|0,p=p+Math.imul(Me,yt)|0,_=_+Math.imul(Me,je)|0,v=v+Math.imul(dt,kt)|0,p=p+Math.imul(dt,Ee)|0,p=p+Math.imul(Te,kt)|0,_=_+Math.imul(Te,Ee)|0,v=v+Math.imul(ct,At)|0,p=p+Math.imul(ct,Be)|0,p=p+Math.imul(Se,At)|0,_=_+Math.imul(Se,Be)|0,v=v+Math.imul(st,St)|0,p=p+Math.imul(st,Ne)|0,p=p+Math.imul(xe,St)|0,_=_+Math.imul(xe,Ne)|0,v=v+Math.imul(rt,Mt)|0,p=p+Math.imul(rt,Re)|0,p=p+Math.imul(Ae,Mt)|0,_=_+Math.imul(Ae,Re)|0,v=v+Math.imul(it,It)|0,p=p+Math.imul(it,De)|0,p=p+Math.imul(Ce,It)|0,_=_+Math.imul(Ce,De)|0,v=v+Math.imul(et,jt)|0,p=p+Math.imul(et,$e)|0,p=p+Math.imul(ke,jt)|0,_=_+Math.imul(ke,$e)|0,v=v+Math.imul(we,Bt)|0,p=p+Math.imul(we,qe)|0,p=p+Math.imul(fe,Bt)|0,_=_+Math.imul(fe,qe)|0;var qn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(qn>>>26)|0,qn&=67108863,v=Math.imul(pt,yt),p=Math.imul(pt,je),p=p+Math.imul(Oe,yt)|0,_=Math.imul(Oe,je),v=v+Math.imul(ft,kt)|0,p=p+Math.imul(ft,Ee)|0,p=p+Math.imul(Me,kt)|0,_=_+Math.imul(Me,Ee)|0,v=v+Math.imul(dt,At)|0,p=p+Math.imul(dt,Be)|0,p=p+Math.imul(Te,At)|0,_=_+Math.imul(Te,Be)|0,v=v+Math.imul(ct,St)|0,p=p+Math.imul(ct,Ne)|0,p=p+Math.imul(Se,St)|0,_=_+Math.imul(Se,Ne)|0,v=v+Math.imul(st,Mt)|0,p=p+Math.imul(st,Re)|0,p=p+Math.imul(xe,Mt)|0,_=_+Math.imul(xe,Re)|0,v=v+Math.imul(rt,It)|0,p=p+Math.imul(rt,De)|0,p=p+Math.imul(Ae,It)|0,_=_+Math.imul(Ae,De)|0,v=v+Math.imul(it,jt)|0,p=p+Math.imul(it,$e)|0,p=p+Math.imul(Ce,jt)|0,_=_+Math.imul(Ce,$e)|0,v=v+Math.imul(et,Bt)|0,p=p+Math.imul(et,qe)|0,p=p+Math.imul(ke,Bt)|0,_=_+Math.imul(ke,qe)|0;var Ln=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,v=Math.imul(pt,kt),p=Math.imul(pt,Ee),p=p+Math.imul(Oe,kt)|0,_=Math.imul(Oe,Ee),v=v+Math.imul(ft,At)|0,p=p+Math.imul(ft,Be)|0,p=p+Math.imul(Me,At)|0,_=_+Math.imul(Me,Be)|0,v=v+Math.imul(dt,St)|0,p=p+Math.imul(dt,Ne)|0,p=p+Math.imul(Te,St)|0,_=_+Math.imul(Te,Ne)|0,v=v+Math.imul(ct,Mt)|0,p=p+Math.imul(ct,Re)|0,p=p+Math.imul(Se,Mt)|0,_=_+Math.imul(Se,Re)|0,v=v+Math.imul(st,It)|0,p=p+Math.imul(st,De)|0,p=p+Math.imul(xe,It)|0,_=_+Math.imul(xe,De)|0,v=v+Math.imul(rt,jt)|0,p=p+Math.imul(rt,$e)|0,p=p+Math.imul(Ae,jt)|0,_=_+Math.imul(Ae,$e)|0,v=v+Math.imul(it,Bt)|0,p=p+Math.imul(it,qe)|0,p=p+Math.imul(Ce,Bt)|0,_=_+Math.imul(Ce,qe)|0;var Fn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,v=Math.imul(pt,At),p=Math.imul(pt,Be),p=p+Math.imul(Oe,At)|0,_=Math.imul(Oe,Be),v=v+Math.imul(ft,St)|0,p=p+Math.imul(ft,Ne)|0,p=p+Math.imul(Me,St)|0,_=_+Math.imul(Me,Ne)|0,v=v+Math.imul(dt,Mt)|0,p=p+Math.imul(dt,Re)|0,p=p+Math.imul(Te,Mt)|0,_=_+Math.imul(Te,Re)|0,v=v+Math.imul(ct,It)|0,p=p+Math.imul(ct,De)|0,p=p+Math.imul(Se,It)|0,_=_+Math.imul(Se,De)|0,v=v+Math.imul(st,jt)|0,p=p+Math.imul(st,$e)|0,p=p+Math.imul(xe,jt)|0,_=_+Math.imul(xe,$e)|0,v=v+Math.imul(rt,Bt)|0,p=p+Math.imul(rt,qe)|0,p=p+Math.imul(Ae,Bt)|0,_=_+Math.imul(Ae,qe)|0;var Un=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Un>>>26)|0,Un&=67108863,v=Math.imul(pt,St),p=Math.imul(pt,Ne),p=p+Math.imul(Oe,St)|0,_=Math.imul(Oe,Ne),v=v+Math.imul(ft,Mt)|0,p=p+Math.imul(ft,Re)|0,p=p+Math.imul(Me,Mt)|0,_=_+Math.imul(Me,Re)|0,v=v+Math.imul(dt,It)|0,p=p+Math.imul(dt,De)|0,p=p+Math.imul(Te,It)|0,_=_+Math.imul(Te,De)|0,v=v+Math.imul(ct,jt)|0,p=p+Math.imul(ct,$e)|0,p=p+Math.imul(Se,jt)|0,_=_+Math.imul(Se,$e)|0,v=v+Math.imul(st,Bt)|0,p=p+Math.imul(st,qe)|0,p=p+Math.imul(xe,Bt)|0,_=_+Math.imul(xe,qe)|0;var Kn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,v=Math.imul(pt,Mt),p=Math.imul(pt,Re),p=p+Math.imul(Oe,Mt)|0,_=Math.imul(Oe,Re),v=v+Math.imul(ft,It)|0,p=p+Math.imul(ft,De)|0,p=p+Math.imul(Me,It)|0,_=_+Math.imul(Me,De)|0,v=v+Math.imul(dt,jt)|0,p=p+Math.imul(dt,$e)|0,p=p+Math.imul(Te,jt)|0,_=_+Math.imul(Te,$e)|0,v=v+Math.imul(ct,Bt)|0,p=p+Math.imul(ct,qe)|0,p=p+Math.imul(Se,Bt)|0,_=_+Math.imul(Se,qe)|0;var Vn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,v=Math.imul(pt,It),p=Math.imul(pt,De),p=p+Math.imul(Oe,It)|0,_=Math.imul(Oe,De),v=v+Math.imul(ft,jt)|0,p=p+Math.imul(ft,$e)|0,p=p+Math.imul(Me,jt)|0,_=_+Math.imul(Me,$e)|0,v=v+Math.imul(dt,Bt)|0,p=p+Math.imul(dt,qe)|0,p=p+Math.imul(Te,Bt)|0,_=_+Math.imul(Te,qe)|0;var zn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(zn>>>26)|0,zn&=67108863,v=Math.imul(pt,jt),p=Math.imul(pt,$e),p=p+Math.imul(Oe,jt)|0,_=Math.imul(Oe,$e),v=v+Math.imul(ft,Bt)|0,p=p+Math.imul(ft,qe)|0,p=p+Math.imul(Me,Bt)|0,_=_+Math.imul(Me,qe)|0;var Wn=(C+v|0)+((p&8191)<<13)|0;C=(_+(p>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,v=Math.imul(pt,Bt),p=Math.imul(pt,qe),p=p+Math.imul(Oe,Bt)|0,_=Math.imul(Oe,qe);var Gn=(C+v|0)+((p&8191)<<13)|0;return C=(_+(p>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,y[0]=Qe,y[1]=In,y[2]=Pn,y[3]=jn,y[4]=En,y[5]=Bn,y[6]=Nn,y[7]=Rn,y[8]=Dn,y[9]=$n,y[10]=qn,y[11]=Ln,y[12]=Fn,y[13]=Un,y[14]=Kn,y[15]=Vn,y[16]=zn,y[17]=Wn,y[18]=Gn,C!==0&&(y[19]=C,h.length++),h};Math.imul||(B=E);function N(O,f,l){l.negative=f.negative^O.negative,l.length=O.length+f.length;for(var h=0,b=0,w=0;w<l.length-1;w++){var y=b;b=0;for(var C=h&67108863,v=Math.min(w,f.length-1),p=Math.max(0,w-O.length+1);p<=v;p++){var _=w-p,S=O.words[_]|0,U=f.words[p]|0,V=S*U,ne=V&67108863;y=y+(V/67108864|0)|0,ne=ne+C|0,C=ne&67108863,y=y+(ne>>>26)|0,b+=y>>>26,y&=67108863}l.words[w]=C,h=y,y=b}return h!==0?l.words[w]=h:l.length--,l._strip()}function L(O,f,l){return N(O,f,l)}o.prototype.mulTo=function(f,l){var h,b=this.length+f.length;return this.length===10&&f.length===10?h=B(this,f,l):b<63?h=E(this,f,l):b<1024?h=N(this,f,l):h=L(this,f,l),h},o.prototype.mul=function(f){var l=new o(null);return l.words=new Array(this.length+f.length),this.mulTo(f,l)},o.prototype.mulf=function(f){var l=new o(null);return l.words=new Array(this.length+f.length),L(this,f,l)},o.prototype.imul=function(f){return this.clone().mulTo(f,this)},o.prototype.imuln=function(f){var l=f<0;l&&(f=-f),n(typeof f=="number"),n(f<67108864);for(var h=0,b=0;b<this.length;b++){var w=(this.words[b]|0)*f,y=(w&67108863)+(h&67108863);h>>=26,h+=w/67108864|0,h+=y>>>26,this.words[b]=y&67108863}return h!==0&&(this.words[b]=h,this.length++),l?this.ineg():this},o.prototype.muln=function(f){return this.clone().imuln(f)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(f){var l=I(f);if(l.length===0)return new o(1);for(var h=this,b=0;b<l.length&&l[b]===0;b++,h=h.sqr());if(++b<l.length)for(var w=h.sqr();b<l.length;b++,w=w.sqr())l[b]!==0&&(h=h.mul(w));return h},o.prototype.iushln=function(f){n(typeof f=="number"&&f>=0);var l=f%26,h=(f-l)/26,b=67108863>>>26-l<<26-l,w;if(l!==0){var y=0;for(w=0;w<this.length;w++){var C=this.words[w]&b,v=(this.words[w]|0)-C<<l;this.words[w]=v|y,y=C>>>26-l}y&&(this.words[w]=y,this.length++)}if(h!==0){for(w=this.length-1;w>=0;w--)this.words[w+h]=this.words[w];for(w=0;w<h;w++)this.words[w]=0;this.length+=h}return this._strip()},o.prototype.ishln=function(f){return n(this.negative===0),this.iushln(f)},o.prototype.iushrn=function(f,l,h){n(typeof f=="number"&&f>=0);var b;l?b=(l-l%26)/26:b=0;var w=f%26,y=Math.min((f-w)/26,this.length),C=67108863^67108863>>>w<<w,v=h;if(b-=y,b=Math.max(0,b),v){for(var p=0;p<y;p++)v.words[p]=this.words[p];v.length=y}if(y!==0)if(this.length>y)for(this.length-=y,p=0;p<this.length;p++)this.words[p]=this.words[p+y];else this.words[0]=0,this.length=1;var _=0;for(p=this.length-1;p>=0&&(_!==0||p>=b);p--){var S=this.words[p]|0;this.words[p]=_<<26-w|S>>>w,_=S&C}return v&&_!==0&&(v.words[v.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(f,l,h){return n(this.negative===0),this.iushrn(f,l,h)},o.prototype.shln=function(f){return this.clone().ishln(f)},o.prototype.ushln=function(f){return this.clone().iushln(f)},o.prototype.shrn=function(f){return this.clone().ishrn(f)},o.prototype.ushrn=function(f){return this.clone().iushrn(f)},o.prototype.testn=function(f){n(typeof f=="number"&&f>=0);var l=f%26,h=(f-l)/26,b=1<<l;if(this.length<=h)return!1;var w=this.words[h];return!!(w&b)},o.prototype.imaskn=function(f){n(typeof f=="number"&&f>=0);var l=f%26,h=(f-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(l!==0&&h++,this.length=Math.min(h,this.length),l!==0){var b=67108863^67108863>>>l<<l;this.words[this.length-1]&=b}return this._strip()},o.prototype.maskn=function(f){return this.clone().imaskn(f)},o.prototype.iaddn=function(f){return n(typeof f=="number"),n(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},o.prototype._iaddn=function(f){this.words[0]+=f;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},o.prototype.isubn=function(f){if(n(typeof f=="number"),n(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},o.prototype.addn=function(f){return this.clone().iaddn(f)},o.prototype.subn=function(f){return this.clone().isubn(f)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(f,l,h){var b=f.length+h,w;this._expand(b);var y,C=0;for(w=0;w<f.length;w++){y=(this.words[w+h]|0)+C;var v=(f.words[w]|0)*l;y-=v&67108863,C=(y>>26)-(v/67108864|0),this.words[w+h]=y&67108863}for(;w<this.length-h;w++)y=(this.words[w+h]|0)+C,C=y>>26,this.words[w+h]=y&67108863;if(C===0)return this._strip();for(n(C===-1),C=0,w=0;w<this.length;w++)y=-(this.words[w]|0)+C,C=y>>26,this.words[w]=y&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(f,l){var h=this.length-f.length,b=this.clone(),w=f,y=w.words[w.length-1]|0,C=this._countBits(y);h=26-C,h!==0&&(w=w.ushln(h),b.iushln(h),y=w.words[w.length-1]|0);var v=b.length-w.length,p;if(l!=="mod"){p=new o(null),p.length=v+1,p.words=new Array(p.length);for(var _=0;_<p.length;_++)p.words[_]=0}var S=b.clone()._ishlnsubmul(w,1,v);S.negative===0&&(b=S,p&&(p.words[v]=1));for(var U=v-1;U>=0;U--){var V=(b.words[w.length+U]|0)*67108864+(b.words[w.length+U-1]|0);for(V=Math.min(V/y|0,67108863),b._ishlnsubmul(w,V,U);b.negative!==0;)V--,b.negative=0,b._ishlnsubmul(w,1,U),b.isZero()||(b.negative^=1);p&&(p.words[U]=V)}return p&&p._strip(),b._strip(),l!=="div"&&h!==0&&b.iushrn(h),{div:p||null,mod:b}},o.prototype.divmod=function(f,l,h){if(n(!f.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var b,w,y;return this.negative!==0&&f.negative===0?(y=this.neg().divmod(f,l),l!=="mod"&&(b=y.div.neg()),l!=="div"&&(w=y.mod.neg(),h&&w.negative!==0&&w.iadd(f)),{div:b,mod:w}):this.negative===0&&f.negative!==0?(y=this.divmod(f.neg(),l),l!=="mod"&&(b=y.div.neg()),{div:b,mod:y.mod}):this.negative&f.negative?(y=this.neg().divmod(f.neg(),l),l!=="div"&&(w=y.mod.neg(),h&&w.negative!==0&&w.isub(f)),{div:y.div,mod:w}):f.length>this.length||this.cmp(f)<0?{div:new o(0),mod:this}:f.length===1?l==="div"?{div:this.divn(f.words[0]),mod:null}:l==="mod"?{div:null,mod:new o(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new o(this.modrn(f.words[0]))}:this._wordDiv(f,l)},o.prototype.div=function(f){return this.divmod(f,"div",!1).div},o.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},o.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},o.prototype.divRound=function(f){var l=this.divmod(f);if(l.mod.isZero())return l.div;var h=l.div.negative!==0?l.mod.isub(f):l.mod,b=f.ushrn(1),w=f.andln(1),y=h.cmp(b);return y<0||w===1&&y===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},o.prototype.modrn=function(f){var l=f<0;l&&(f=-f),n(f<=67108863);for(var h=(1<<26)%f,b=0,w=this.length-1;w>=0;w--)b=(h*b+(this.words[w]|0))%f;return l?-b:b},o.prototype.modn=function(f){return this.modrn(f)},o.prototype.idivn=function(f){var l=f<0;l&&(f=-f),n(f<=67108863);for(var h=0,b=this.length-1;b>=0;b--){var w=(this.words[b]|0)+h*67108864;this.words[b]=w/f|0,h=w%f}return this._strip(),l?this.ineg():this},o.prototype.divn=function(f){return this.clone().idivn(f)},o.prototype.egcd=function(f){n(f.negative===0),n(!f.isZero());var l=this,h=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var b=new o(1),w=new o(0),y=new o(0),C=new o(1),v=0;l.isEven()&&h.isEven();)l.iushrn(1),h.iushrn(1),++v;for(var p=h.clone(),_=l.clone();!l.isZero();){for(var S=0,U=1;!(l.words[0]&U)&&S<26;++S,U<<=1);if(S>0)for(l.iushrn(S);S-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(p),w.isub(_)),b.iushrn(1),w.iushrn(1);for(var V=0,ne=1;!(h.words[0]&ne)&&V<26;++V,ne<<=1);if(V>0)for(h.iushrn(V);V-- >0;)(y.isOdd()||C.isOdd())&&(y.iadd(p),C.isub(_)),y.iushrn(1),C.iushrn(1);l.cmp(h)>=0?(l.isub(h),b.isub(y),w.isub(C)):(h.isub(l),y.isub(b),C.isub(w))}return{a:y,b:C,gcd:h.iushln(v)}},o.prototype._invmp=function(f){n(f.negative===0),n(!f.isZero());var l=this,h=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var b=new o(1),w=new o(0),y=h.clone();l.cmpn(1)>0&&h.cmpn(1)>0;){for(var C=0,v=1;!(l.words[0]&v)&&C<26;++C,v<<=1);if(C>0)for(l.iushrn(C);C-- >0;)b.isOdd()&&b.iadd(y),b.iushrn(1);for(var p=0,_=1;!(h.words[0]&_)&&p<26;++p,_<<=1);if(p>0)for(h.iushrn(p);p-- >0;)w.isOdd()&&w.iadd(y),w.iushrn(1);l.cmp(h)>=0?(l.isub(h),b.isub(w)):(h.isub(l),w.isub(b))}var S;return l.cmpn(1)===0?S=b:S=w,S.cmpn(0)<0&&S.iadd(f),S},o.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var l=this.clone(),h=f.clone();l.negative=0,h.negative=0;for(var b=0;l.isEven()&&h.isEven();b++)l.iushrn(1),h.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;h.isEven();)h.iushrn(1);var w=l.cmp(h);if(w<0){var y=l;l=h,h=y}else if(w===0||h.cmpn(1)===0)break;l.isub(h)}while(!0);return h.iushln(b)},o.prototype.invm=function(f){return this.egcd(f).a.umod(f)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(f){return this.words[0]&f},o.prototype.bincn=function(f){n(typeof f=="number");var l=f%26,h=(f-l)/26,b=1<<l;if(this.length<=h)return this._expand(h+1),this.words[h]|=b,this;for(var w=b,y=h;w!==0&&y<this.length;y++){var C=this.words[y]|0;C+=w,w=C>>>26,C&=67108863,this.words[y]=C}return w!==0&&(this.words[y]=w,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(f){var l=f<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var h;if(this.length>1)h=1;else{l&&(f=-f),n(f<=67108863,"Number is too big");var b=this.words[0]|0;h=b===f?0:b<f?-1:1}return this.negative!==0?-h|0:h},o.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var l=this.ucmp(f);return this.negative!==0?-l|0:l},o.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var l=0,h=this.length-1;h>=0;h--){var b=this.words[h]|0,w=f.words[h]|0;if(b!==w){b<w?l=-1:b>w&&(l=1);break}}return l},o.prototype.gtn=function(f){return this.cmpn(f)===1},o.prototype.gt=function(f){return this.cmp(f)===1},o.prototype.gten=function(f){return this.cmpn(f)>=0},o.prototype.gte=function(f){return this.cmp(f)>=0},o.prototype.ltn=function(f){return this.cmpn(f)===-1},o.prototype.lt=function(f){return this.cmp(f)===-1},o.prototype.lten=function(f){return this.cmpn(f)<=0},o.prototype.lte=function(f){return this.cmp(f)<=0},o.prototype.eqn=function(f){return this.cmpn(f)===0},o.prototype.eq=function(f){return this.cmp(f)===0},o.red=function(f){return new z(f)},o.prototype.toRed=function(f){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(f){return this.red=f,this},o.prototype.forceRed=function(f){return n(!this.red,"Already a number in reduction context"),this._forceRed(f)},o.prototype.redAdd=function(f){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},o.prototype.redIAdd=function(f){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},o.prototype.redSub=function(f){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},o.prototype.redISub=function(f){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},o.prototype.redShl=function(f){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},o.prototype.redMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},o.prototype.redIMul=function(f){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(f){return n(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var X={k256:null,p224:null,p192:null,p25519:null};function K(O,f){this.name=O,this.p=new o(f,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var f=new o(null);return f.words=new Array(Math.ceil(this.n/13)),f},K.prototype.ireduce=function(f){var l=f,h;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),h=l.bitLength();while(h>this.n);var b=h<this.n?-1:l.ucmp(this.p);return b===0?(l.words[0]=0,l.length=1):b>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},K.prototype.split=function(f,l){f.iushrn(this.n,0,l)},K.prototype.imulK=function(f){return f.imul(this.k)};function ee(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(ee,K),ee.prototype.split=function(f,l){for(var h=4194303,b=Math.min(f.length,9),w=0;w<b;w++)l.words[w]=f.words[w];if(l.length=b,f.length<=9){f.words[0]=0,f.length=1;return}var y=f.words[9];for(l.words[l.length++]=y&h,w=10;w<f.length;w++){var C=f.words[w]|0;f.words[w-10]=(C&h)<<4|y>>>22,y=C}y>>>=22,f.words[w-10]=y,y===0&&f.length>10?f.length-=10:f.length-=9},ee.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var l=0,h=0;h<f.length;h++){var b=f.words[h]|0;l+=b*977,f.words[h]=l&67108863,l=b*64+(l/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function me(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(me,K);function be(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(be,K);function ie(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(ie,K),ie.prototype.imulK=function(f){for(var l=0,h=0;h<f.length;h++){var b=(f.words[h]|0)*19+l,w=b&67108863;b>>>=26,f.words[h]=w,l=b}return l!==0&&(f.words[f.length++]=l),f},o._prime=function(f){if(X[f])return X[f];var l;if(f==="k256")l=new ee;else if(f==="p224")l=new me;else if(f==="p192")l=new be;else if(f==="p25519")l=new ie;else throw new Error("Unknown prime "+f);return X[f]=l,l};function z(O){if(typeof O=="string"){var f=o._prime(O);this.m=f.p,this.prime=f}else n(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}z.prototype._verify1=function(f){n(f.negative===0,"red works only with positives"),n(f.red,"red works only with red numbers")},z.prototype._verify2=function(f,l){n((f.negative|l.negative)===0,"red works only with positives"),n(f.red&&f.red===l.red,"red works only with red numbers")},z.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(u(f,f.umod(this.m)._forceRed(this)),f)},z.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},z.prototype.add=function(f,l){this._verify2(f,l);var h=f.add(l);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},z.prototype.iadd=function(f,l){this._verify2(f,l);var h=f.iadd(l);return h.cmp(this.m)>=0&&h.isub(this.m),h},z.prototype.sub=function(f,l){this._verify2(f,l);var h=f.sub(l);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},z.prototype.isub=function(f,l){this._verify2(f,l);var h=f.isub(l);return h.cmpn(0)<0&&h.iadd(this.m),h},z.prototype.shl=function(f,l){return this._verify1(f),this.imod(f.ushln(l))},z.prototype.imul=function(f,l){return this._verify2(f,l),this.imod(f.imul(l))},z.prototype.mul=function(f,l){return this._verify2(f,l),this.imod(f.mul(l))},z.prototype.isqr=function(f){return this.imul(f,f.clone())},z.prototype.sqr=function(f){return this.mul(f,f)},z.prototype.sqrt=function(f){if(f.isZero())return f.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var h=this.m.add(new o(1)).iushrn(2);return this.pow(f,h)}for(var b=this.m.subn(1),w=0;!b.isZero()&&b.andln(1)===0;)w++,b.iushrn(1);n(!b.isZero());var y=new o(1).toRed(this),C=y.redNeg(),v=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new o(2*p*p).toRed(this);this.pow(p,v).cmp(C)!==0;)p.redIAdd(C);for(var _=this.pow(p,b),S=this.pow(f,b.addn(1).iushrn(1)),U=this.pow(f,b),V=w;U.cmp(y)!==0;){for(var ne=U,we=0;ne.cmp(y)!==0;we++)ne=ne.redSqr();n(we<V);var fe=this.pow(_,new o(1).iushln(V-we-1));S=S.redMul(fe),_=fe.redSqr(),U=U.redMul(_),V=we}return S},z.prototype.invm=function(f){var l=f._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},z.prototype.pow=function(f,l){if(l.isZero())return new o(1).toRed(this);if(l.cmpn(1)===0)return f.clone();var h=4,b=new Array(1<<h);b[0]=new o(1).toRed(this),b[1]=f;for(var w=2;w<b.length;w++)b[w]=this.mul(b[w-1],f);var y=b[0],C=0,v=0,p=l.bitLength()%26;for(p===0&&(p=26),w=l.length-1;w>=0;w--){for(var _=l.words[w],S=p-1;S>=0;S--){var U=_>>S&1;if(y!==b[0]&&(y=this.sqr(y)),U===0&&C===0){v=0;continue}C<<=1,C|=U,v++,!(v!==h&&(w!==0||S!==0))&&(y=this.mul(y,b[C]),v=0,C=0)}p=26}return y},z.prototype.convertTo=function(f){var l=f.umod(this.m);return l===f?l.clone():l},z.prototype.convertFrom=function(f){var l=f.clone();return l.red=null,l},o.mont=function(f){return new te(f)};function te(O){z.call(this,O),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(te,z),te.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},te.prototype.convertFrom=function(f){var l=this.imod(f.mul(this.rinv));return l.red=null,l},te.prototype.imul=function(f,l){if(f.isZero()||l.isZero())return f.words[0]=0,f.length=1,f;var h=f.imul(l),b=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=h.isub(b).iushrn(this.shift),y=w;return w.cmp(this.m)>=0?y=w.isub(this.m):w.cmpn(0)<0&&(y=w.iadd(this.m)),y._forceRed(this)},te.prototype.mul=function(f,l){if(f.isZero()||l.isZero())return new o(0)._forceRed(this);var h=f.mul(l),b=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=h.isub(b).iushrn(this.shift),y=w;return w.cmp(this.m)>=0?y=w.isub(this.m):w.cmpn(0)<0&&(y=w.iadd(this.m)),y._forceRed(this)},te.prototype.invm=function(f){var l=this.imod(f._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(e,Mf)})(Bf);const zl="3.7.7",Nf=zl,Kr=typeof Buffer=="function",qc=typeof TextDecoder=="function"?new TextDecoder:void 0,Lc=typeof TextEncoder=="function"?new TextEncoder:void 0,Rf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ro=Array.prototype.slice.call(Rf),$o=(e=>{let t={};return e.forEach((i,n)=>t[i]=n),t})(ro),Df=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ti=String.fromCharCode.bind(String),Fc=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Wl=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Gl=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Hl=e=>{let t,i,n,r,o="";const s=e.length%3;for(let a=0;a<e.length;){if((i=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=i<<16|n<<8|r,o+=ro[t>>18&63]+ro[t>>12&63]+ro[t>>6&63]+ro[t&63]}return s?o.slice(0,s-3)+"===".substring(s):o},ac=typeof btoa=="function"?e=>btoa(e):Kr?e=>Buffer.from(e,"binary").toString("base64"):Hl,Sa=Kr?e=>Buffer.from(e).toString("base64"):e=>{let i=[];for(let n=0,r=e.length;n<r;n+=4096)i.push(ti.apply(null,e.subarray(n,n+4096)));return ac(i.join(""))},Jo=(e,t=!1)=>t?Wl(Sa(e)):Sa(e),$f=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?ti(192|t>>>6)+ti(128|t&63):ti(224|t>>>12&15)+ti(128|t>>>6&63)+ti(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return ti(240|t>>>18&7)+ti(128|t>>>12&63)+ti(128|t>>>6&63)+ti(128|t&63)}},qf=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Xl=e=>e.replace(qf,$f),Uc=Kr?e=>Buffer.from(e,"utf8").toString("base64"):Lc?e=>Sa(Lc.encode(e)):e=>ac(Xl(e)),Pr=(e,t=!1)=>t?Wl(Uc(e)):Uc(e),Kc=e=>Pr(e,!0),Lf=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ff=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return ti((i>>>10)+55296)+ti((i&1023)+56320);case 3:return ti((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return ti((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Jl=e=>e.replace(Lf,Ff),Zl=e=>{if(e=e.replace(/\s+/g,""),!Df.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",n,r;for(let o=0;o<e.length;)t=$o[e.charAt(o++)]<<18|$o[e.charAt(o++)]<<12|(n=$o[e.charAt(o++)])<<6|(r=$o[e.charAt(o++)]),i+=n===64?ti(t>>16&255):r===64?ti(t>>16&255,t>>8&255):ti(t>>16&255,t>>8&255,t&255);return i},cc=typeof atob=="function"?e=>atob(Gl(e)):Kr?e=>Buffer.from(e,"base64").toString("binary"):Zl,Ql=Kr?e=>Fc(Buffer.from(e,"base64")):e=>Fc(cc(e).split("").map(t=>t.charCodeAt(0))),Yl=e=>Ql(ed(e)),Uf=Kr?e=>Buffer.from(e,"base64").toString("utf8"):qc?e=>qc.decode(Ql(e)):e=>Jl(cc(e)),ed=e=>Gl(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Ta=e=>Uf(ed(e)),Kf=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},td=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),id=function(){const e=(t,i)=>Object.defineProperty(String.prototype,t,td(i));e("fromBase64",function(){return Ta(this)}),e("toBase64",function(t){return Pr(this,t)}),e("toBase64URI",function(){return Pr(this,!0)}),e("toBase64URL",function(){return Pr(this,!0)}),e("toUint8Array",function(){return Yl(this)})},nd=function(){const e=(t,i)=>Object.defineProperty(Uint8Array.prototype,t,td(i));e("toBase64",function(t){return Jo(this,t)}),e("toBase64URI",function(){return Jo(this,!0)}),e("toBase64URL",function(){return Jo(this,!0)})},Vf=()=>{id(),nd()},Zo={version:zl,VERSION:Nf,atob:cc,atobPolyfill:Zl,btoa:ac,btoaPolyfill:Hl,fromBase64:Ta,toBase64:Pr,encode:Pr,encodeURI:Kc,encodeURL:Kc,utob:Xl,btou:Jl,decode:Ta,isValid:Kf,fromUint8Array:Jo,toUint8Array:Yl,extendString:id,extendUint8Array:nd,extendBuiltins:Vf};function Ys(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(i=0)),i;)try{if(n=1,r&&(o=d[0]&2?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(u){d=[6,u],r=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var yn;(function(e){e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS"})(yn||(yn={}));var zf=function(){function e(t){this.compare=t||e.defaultCompareFunction}return e.defaultCompareFunction=function(t,i){return t===i?yn.EQUAL:t<i?yn.LESS:yn.GREATER},e.prototype.equal=function(t,i){return this.compare(t,i)===yn.EQUAL},e.prototype.lessThan=function(t,i){return this.compare(t,i)===yn.LESS},e.prototype.greaterThan=function(t,i){return this.compare(t,i)===yn.GREATER},e.prototype.lessThanOrEqual=function(t,i){return this.lessThan(t,i)||this.equal(t,i)},e.prototype.greaterThanOrEqual=function(t,i){return this.greaterThan(t,i)||this.equal(t,i)},e.prototype.reverse=function(){var t=this.compare;this.compare=function(i,n){return t(n,i)}},e}(),Vc=function(){function e(t){this.value=t,this.next=null}return e}(),zc=function(){function e(t){this.value=t,this.next=null,this.prev=null}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ma=function(e,t){return Ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},Ma(e,t)};function Vr(e,t){Ma(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function bo(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=d[0]&2?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(u){d=[6,u],r=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Wf(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function Ki(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Wf(arguments[t]));return e}var Gf="obfuse error occur";function us(e,t){if(!e)throw new Error("[linked-list] "+(t||Gf))}var Hf=-1,rd=function(){function e(){for(var t=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];this._head=null,this._tail=null,this._length=0,this.compare=new zf,i.length>0&&i.forEach(function(r){t.append(r)})}return Object.defineProperty(e.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopLength",{get:function(){var t=!1,i=1;if(!this._head)return 0;for(var n=this._head,r=this._head;r.next&&r.next.next;)if(r=r.next.next,n=n.next,n===r){t=!0;break}if(t){for(r=r.next;n!==r;)i++,r=r.next;return i}else return 0},enumerable:!0,configurable:!0}),e.prototype.getNode=function(t){var i=this._length;us(i>0&&t>=0&&t<i,"[linked-list] index "+t+" out of scope of list, which length is "+i);for(var n=this._head,r=0;r<t;)n=n.next,r++;return n},e.prototype.get=function(t){var i=this.getNode(t);return i?i.value:null},e.prototype.find=function(t){var i=t.value,n=t.callback;if(!this._head)return null;for(var r=this._head;r;){if(n&&n(r.value)||i!==void 0&&this.compare.equal(r.value,i))return r;r=r.next}return null},e.prototype.indexOf=function(t){if(!this._head)return Hf;for(var i=this._head,n=-1;i.next;){if(n++,this.compare.equal(i.value,t))return n;i=i.next}return i===this._tail&&this.compare.equal(i.value,t)&&(n+=1),n},e.prototype.first=function(t){us(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var i=this.iterator(),n=[],r=Math.min(t,this.length),o=0;o<r;o++){var s=i.next();n.push(s.value)}return n},e.prototype.toArray=function(){return Ki(this)},e.prototype.isEmpty=function(){return this._head===null},e.prototype.iterator=function(){var t;return bo(this,function(i){switch(i.label){case 0:t=this._head,i.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return i.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e}(),wo=function(e){Vr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.apply(this,Ki(i))||this}return t.prototype.append=function(i){var n=new Vc(i);return this._tail?(this._tail.next=n,this._tail=n):this._head=this._tail=n,this._length++,!0},t.prototype.prepend=function(i){var n=new Vc(i);return this._head?(n.next=this._head,this._head=n):this._head=this._tail=n,this._length++,!0},t.prototype.remove=function(i){var n=this._head;if(n){if(this.compare.equal(n.value,i))return n.next?(this._head=n.next,n.next=null):this._head=this._tail=null,this._length--,i;for(var r=n;;){if(this.compare.equal(n.value,i))return n.next?r.next=n.next:(this._tail=r,this._tail.next=null),n.next=null,this._length--,i;if(n.next)r=n,n=n.next;else return}}},t.prototype.removeHead=function(){var i=this._head;if(i)return this._head.next?(this._head=i.next,i.next=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.removeTail=function(){var i=this._tail;if(i){if(!this._head.next)this._head=null,this._tail=null;else{for(var n=this._head;n.next!==i;)n=n.next;n.next=null,this._tail=n}return this._length--,i.value}},t.prototype.reverse=function(){if(this._head){var i=this._head,n=null,r;for(this._tail=this._head;i!==null;)r=i.next,i.next=n,n=i,i=r;this._head=n}},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Ki([void 0],i)))},t}(rd),Xf=function(e){Vr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Ki(i))||this;return r.cyclization(),r}return t.prototype.iterator=function(){var i;return bo(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,i===this._head&&(i=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var i;return bo(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.breakCircle();var o=e.prototype[i].apply(this,n);return this.cyclization(),o},t.prototype.getNode=function(i){return this.mapToNormalListFn("getNode",i)},t.prototype.append=function(i){return this.mapToNormalListFn("append",i)},t.prototype.prepend=function(i){return this.mapToNormalListFn("prepend",i)},t.prototype.find=function(i){return this.mapToNormalListFn("find",i)},t.prototype.indexOf=function(i){return this.mapToNormalListFn("indexOf",i)},t.prototype.remove=function(i){return this.mapToNormalListFn("remove",i)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(i){us(i>=0,"[linked-list] param 'num' ("+i+") should not less than 0");for(var n=this.circleIterator(),r=[],o=0;o<i;o++){var s=n.next();r.push(s.value)}return r},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(wo);(function(e){Vr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Ki(i))||this;return r.cyclization(),r}return t.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},t.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Ki([void 0],i)))},t})(Xf);var Jf=function(e){Vr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.apply(this,Ki(i))||this}return t.prototype.append=function(i){var n=new zc(i);return this._tail?(this._tail.next=n,n.prev=this._tail,this._tail=n):this._head=this._tail=n,this._length++,!0},t.prototype.prepend=function(i){var n=new zc(i);return this._head?(n.next=this._head,this._head.prev=n,this._head=n):this._head=this._tail=n,this._length++,!0},t.prototype.remove=function(i){var n=this._head;if(n){if(this.compare.equal(n.value,i))return n.next?(this._head=n.next,this._head.prev=null,n.next=n.prev=null):this._head=this._tail=null,this._length--,i;for(;;){if(this.compare.equal(n.value,i))return n.next?(n.prev.next=n.next,n.next.prev=n.prev,n.next=n.prev=null):(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null),this._length--,n.value;if(n.next)n=n.next;else return}}},t.prototype.removeHead=function(){var i=this._head;if(i)return this._head.next?(i.next.prev=null,this._head=i.next,i.next=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.removeTail=function(){var i=this._tail;if(i)return this._head.next?(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null):(this._head=null,this._tail=null),this._length--,i.value},t.prototype.reverse=function(){if(this._head){var i=this._head,n=null,r;for(this._tail=this._head;i!==null;)r=i.next,i.next=n,i.prev=r,n=i,i=r;this._head=n}},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Ki([void 0],i)))},t}(rd),Zf=function(e){Vr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Ki(i))||this;return r.cyclization(),r}return t.prototype.iterator=function(){var i;return bo(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,i===this._head&&(i=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var i;return bo(this,function(n){switch(n.label){case 0:i=this._head,n.label=1;case 1:return i?[4,i.value]:[3,3];case 2:return n.sent(),i=i.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.breakCircle();var o=e.prototype[i].apply(this,n);return this.cyclization(),o},t.prototype.getNode=function(i){return this.mapToNormalListFn("getNode",i)},t.prototype.append=function(i){return this.mapToNormalListFn("append",i)},t.prototype.prepend=function(i){return this.mapToNormalListFn("prepend",i)},t.prototype.find=function(i){return this.mapToNormalListFn("find",i)},t.prototype.indexOf=function(i){return this.mapToNormalListFn("indexOf",i)},t.prototype.remove=function(i){return this.mapToNormalListFn("remove",i)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(i){us(i>=0,"[linked-list] param 'num' ("+i+") should not less than 0");for(var n=this.circleIterator(),r=[],o=0;o<i;o++){var s=n.next();r.push(s.value)}return r},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(Jf);(function(e){Vr(t,e);function t(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,Ki(i))||this;return r.cyclization(),r}return t.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},t.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},t.prototype.clone=function(){var i=this.toArray();return new(t.bind.apply(t,Ki([void 0],i)))},t})(Zf);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Qf(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function Yf(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Qf(arguments[t]));return e}var eh=function(){function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.queue=new(wo.bind.apply(wo,Yf([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.queue.isEmpty()},e.prototype.enqueue=function(t){return this.queue.append(t)},e.prototype.dequeue=function(){var t=this.queue.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.queue.toArray()},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function th(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,o=[],s;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function ih(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(th(arguments[t]));return e}var ea=function(){function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.stack=new(wo.bind.apply(wo,ih([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.stack.isEmpty()},e.prototype.push=function(t){return this.stack.append(t)},e.prototype.pop=function(){var t=this.stack.removeTail();return typeof t<"u"?t:void 0},e.prototype.popBottom=function(){var t=this.stack.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.stack.toArray()},e}(),nh=function(){function e(t,i,n){n===void 0&&(n=0),this.startVertex=t,this.endVertex=i,this.weight=n}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),i=this.endVertex.getKey();return t+"_"+i},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function Oa(e,t,i){if(i===void 0&&(i="cc-graph"),!e)throw new Error((i?"["+i+"]":"")+" Invariant failed: "+t)}function rh(e,t){t===void 0&&(t=!0);var i=typeof e<"u"&&e!==null;return t?i&&e!=="undefined"&&e!=="null":i}var Wc=function(){function e(t){Oa(rh(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,i=this.getEdges(),n=function(r){return r.startVertex===t?r.endVertex:r.startVertex};return i.map(n)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var i=this.getEdges().find(function(n){return n===t});return!!i},e.prototype.hasNeighbor=function(t){var i=this.getEdges().find(function(n){return n.startVertex===t||n.endVertex===t});return!!i},e.prototype.findEdge=function(t){var i=function(r){return r.startVertex===t||r.endVertex===t},n=this.getEdges().find(i);return n||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(i){return t.deleteEdge(i)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();function Gc(e,t,i,n){if(e){t.push(e),n.set(e.getKey(),!0);var r=e.getNeighbors().filter(function(o){return!n.get(o.getKey())});i.push(r)}}function Hc(e,t,i){var n=e.pop();n&&i.set(n.getKey(),!1),t.pop()}var oh=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,i){if(i===void 0&&(i=!1),this.edges[t.getKey()]){if(i)return this;Oa(!1,"Edge has already been added before")}var n=this.getVertexByKey(t.startVertex.getKey()),r=this.getVertexByKey(t.endVertex.getKey());if(n||(this.addVertex(t.startVertex),n=this.getVertexByKey(t.startVertex.getKey())),r||(this.addVertex(t.endVertex),r=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)n.addEdge(t);else{n.addEdge(t);var o=t.clone();r.addEdge(o.reverse())}return this},e.prototype.deleteEdge=function(t,i){if(i===void 0&&(i=!1),!this.edges[t.getKey()]){if(i)return this;Oa(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var n=this.getVertexByKey(t.startVertex.getKey()),r=this.getVertexByKey(t.endVertex.getKey());return n.deleteEdge(t),r.deleteEdge(t),this},e.prototype.findEdge=function(t,i){var n=this.getVertexByKey(t.getKey());return n?n.findEdge(i):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,i){return t+i.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(i){t.deleteEdge(i),i.reverse(),t.addEdge(i)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(i,n){t[i.getKey()]=n}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,i=this.getAllVertices(),n=this.getVerticesIndices(),r=Array(i.length).fill(null).map(function(){return Array(i.length).fill(1/0)});return i.forEach(function(o,s){o.getNeighbors().forEach(function(a){var c=n[a.getKey()],d=t.findEdge(o,a);d&&(r[s][c]=d.weight)})}),r},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var i,n,r;return Ys(this,function(o){switch(o.label){case 0:i=new Map,n=new eh,n.enqueue(t),o.label=1;case 1:return n.isEmpty()?[3,4]:(r=n.dequeue(),r&&!i.has(r.getKey())?[4,r]:[3,3]);case 2:o.sent(),i.set(r.getKey(),r),r.getNeighbors().forEach(function(s){return n.enqueue(s)}),o.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var i,n,r;return Ys(this,function(o){switch(o.label){case 0:i=new Map,n=new ea,n.push(t),o.label=1;case 1:return n.isEmpty()?[3,4]:(r=n.pop(),r&&!i.has(r.getKey())?[4,r]:[3,3]);case 2:o.sent(),i.set(r.getKey(),r),r.getNeighbors().forEach(function(s){return n.push(s)}),o.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,i){var n,r,o,s,a,c,d;return Ys(this,function(u){switch(u.label){case 0:return n=[],t!==i?[3,2]:(n.push(t),[4,n]);case 1:return u.sent(),[2];case 2:r=new Map,o=new ea,s=new ea,Gc(t,o,s,r),u.label=3;case 3:if(o.isEmpty())return[3,6];if(a=s.pop(),a&&a.length)c=a.shift(),s.push(a),c&&Gc(c,o,s,r);else return s.push(a),Hc(o,s,r),[3,3];return d=o.peek,d!==i?[3,5]:[4,o.toArray()];case 4:u.sent(),Hc(o,s,r),u.label=5;case 5:return[3,3];case 6:return[2]}})},e}();const sh=Of(),od=sh.public.appEnv;console.log("config env: ",od);const ah={pro:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0x4fb259302630bf727f1b489e0597131fe4d8ccba12074bb7fedba3886c008945",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://alpha.cetus.zone",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui.cetus.zone/router_v2/find_routes",aggregatorV2:{package_id:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302",published_at:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},pre:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui-cloudfront.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui-cloudfront.cetus.zone/router_v2/find_routes",aggregatorV2:{package_id:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302",published_at:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!1,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},preRoute:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xfa36bcb799278bddaf295991b2d3ce039013b1dd60dfd7183dee135fdadbc4be",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7",published_at:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7"},aggregatorUrl:"https://api-sui.cetus.zone/router1",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x7cc8461d20ad82d3851123a64bed22883199b465763ee53b1b529fba1f4e15cc",published_at:"0x9f63e8926719bcb45df55fb60b4444f4d50309bff2e85cccc1fdb91c3e4653a2",config:{pools_id:"0x68b4b6bd15aa086df8f8d94f62fb5b38817a02cc288802d1637e1febae46f545",admin_cap_id:"0x5a304d63a5421a3fbc190b3d124f7ea3cdf56b1cb8fd3e0bf4855d129075caef",package_version_id:"0xceab2289e0968f0e7172ce702af8f28a678570afa6b139e97bc344f0290672d6"}},xcetus:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"}}},test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.testnet.sui.io",fullRpcUrl:"https://fullnode.testnet.sui.io",faucetURL:"",explorerUrl:"https://explorer.sui.io/",explorerUrl1:"https://testnet.suivision.xyz",network:"testnet",networkTip:"Testnet",api:"https://api-sui.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count/v3",faucet:{faucet_display:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",faucet_router:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc"},simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x084dbc14f8f6b50e4e1d6828ebf1f93fd1b1d2502b121bc787937893793417b0",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699"}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xe26cb89a7c3bb9a00b396e278f4f1f90aae02d0da37cd4b0c4b4977ca95568ef"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",aggregatorv2Url:"https://api-sui.devcetus.com/router_v2",aggregatorV2:{package_id:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0",published_at:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0"},launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetusTokenAddress:"0x04792c459e2c20d1d48c85ab2eed98ef115d5b3e36ccf6ce8d0d3c79ca548c91::xtoken::XTOKEN",xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x4061e279415a3c45cfd31554d38c5b3bb0e06c65833811a98a66f469e04c69c3",published_at:"0xfeda040996e722ba532ab2203d13333484024456ca38bf4adeb526ce1457332d",config:{dividend_manager_id:"0x9d1be1a6b1146b30448a266bc87127466c0bae1585750c42adffce3e25e1ab6d",dividend_admin_id:"0x36d63c1a588bd93775aff8f47538a0063960564f0a171d100a9f49526a872b92",dividend_settle_id:"0x9eb78595419560b1dcaa9fb0ca307921ab1664a5f63c877c6887ab696344b400",venft_dividends_id:"0xc31a85fa5a77fc1def0dc5b2aadc5317a9d744ffda24b472e56a646711770676",venft_dividends_id_v2:"0x53b24031120730f6e4a733526147917650b1ecd3c56b43164b69eaa74f9b9ff7"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"0xb58a7b66d3d007d9977940598187104084951bd8fdabb74f03f68151a3e27710",published_at:"0x72eefdfad9c79ef4c69748f9fcaf47874779704475d9ce35a29cc0ff1b9ce29f",config:{xtoken_manager_id:"0x51c6f72ecbc819aeee851b5e2d79cf6100e8e2b44e7ca55b06bd81bd163f677f",lock_manager_id:"0x92cb9f128ae2f823401c2104136a96cde6c201d6a133a1c7b5c67f4400711a10",lock_handle_id:"0x5cc82e84cf911a2d904997c7ef3e2e98eb3fea0bc43308f7b8c52bf0aff478b9"}},xtoken_dividends:{package_id:"0xdc899c0b05327036990f08cd70b99ef92c4288b784cbb82088c099d109a30226",published_at:"0x4677c8990eab6036d7059be96ad82173efd88775be36e277f4543155da4cbb9e",config:{dividend_manager_id:"0xaf17350657fb26a972d088bfb9db4491d11bf5533b7a5272ab6aa4a1badee749",dividend_admin_id:"0x8c0993c6ea9574cf6a3743698a0d6a46c7bbc4bab668d28b51aa947ad34edfc2",dividend_settle_id:"0xd938930b4ad7ef0cd85d8ae640d6ed7fd5cfcb64101994b69b88aa240dba1cb0"}},token_faucet:{package_id:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5",published_at:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5"},booster:{package_id:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",published_at:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",config:{booster_config_id:"0xeba41bf99086b0140713d7dd102e1374281a608bf524cc38f62c1d2bd792715c",booster_pool_handle:"0x01f9ba86234f661157366b8393eaeba82c8b78bf40fd9728604c3cc142811629"}},liquidity_stratefy:{package_id:"0x9b894cff0422a6acc41dadab3c8e2f52da7b5f0b366821a80d62eaf650565c3f",published_at:"0xc76c30d0a7b3e0a4372b6e7f24d73ef4d7740eaf920789e658795502c2fd252a",config:{master_manger_id:"0x562f2c9a90ffc3cdbe492b8cedb2e911954c81e8d20b47c4d2b0b2782bd7cad2",master_liquidity_handle:"0x323179fcd8fc2c01f146a902aaec56221e791fb0f1965907c97b25cba5eac515"}},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0xe1fb9fc8542a9e7768b0a701bf0c11b595201fb2492791a03eb9c0bb319297f3",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a",haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",version:1,config:{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:"::cert::CERT"}},aftermath:{package_id:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",published_at:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",version:1,config:{staked_sui_vault:"0xe498a8c07ec62200c519a0092eda233abdab879e8f332c11bdc1819eb7b12fbb",referral_vault:"0x8d357115058f22976cd01c5415116d9aca806d1ded37eecd75d87978f404e927",safe:"0x38710a6e0bd885c158e52ec7a42c8a9a1826c6696b626b4a5e2d1dcb15cfd9b7",validator_address:"0x9336c4c9d891e263cfac99adc397853a7392e5cf84cbd5df92207a57c7fbdadc",coin_type:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4::afsui::AFSUI"}}}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC",toCoin:"0x2::sui::SUI"},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xc4c250fa155fb27668650fd96aeaade6a3e7c669395f147b05747a5d9eb35795",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",config:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"}},cetus_integrate2:{package_id:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c",published_at:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c"}}},pre_test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},token:{token_display:"0x481fb627bf18bc93c02c41ada3cc8b574744ef23c9d5e3136637ae3076e71562",config:{coin_registry_id:"0xe0b8cb7e56d465965cac5c5fe26cba558de35d88b9ec712c40f131f72c600151",pool_registry_id:"0xab40481f926e686455edf819b4c6485fbbf147a42cf3b95f72ed88c94577e67a",coin_list_owner:"0x1f6510ee7d8e2b39261bad012f0be0adbecfd75199450b7cbf28efab42dad083",pool_list_owner:"0x6de133b609ea815e1f6a4d50785b798b134f567ec1f4ee113ae73f6900b4012d"}},clmm:{clmm_display:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",clmm_router:"0x780e590a9354f5bcb429af4578c742aaa0ee20ab942bb2bbd161fbde4b64b08c",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},launchpad:{ido_display:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",ido_router:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",config_display:"0xc9b958492e4be73e0af4daa48101bc7ab2a7ab7c67585938ea3535929fc193fa",config:{pools_id:"0x7b96aea4d695996635265e2cc41d5c5f5c4cd70f36763e41b2abf2fa1eff866f",admin_cap_id:"0x342f4b272ff5abcaacc770a5972728b154a5e74835fa36b2340ad94895184acb",config_cap_id:"0xef2a813b8c1bbaf9470fff7df0fd0febebdc6e2bbd3d7bf9a917734af7893428",config_pools_id:"0x04b6e8de80f325bdf5963dc54f324c3319b471f2f93163ebc982bee0d9b38336"}},xcetus:{xcetus_display:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",xcetus_router:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",dividends_display:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",dividends_router:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",cetus_faucet:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49",dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5"}},hasCreatePool:!1,hasNotifi:!1}},testnet_external:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0xc7c40602f81eee198f472e14c87cb9c7186496064adba06cef1768c8b1785512",config:{coin_registry_id:"0xde9a5123749136ca9fe05b88777e322f2161fe4aa71e9c575d5e27a31b815d40",pool_registry_id:"0x7b7b399344838363ec96611f133c77b98042404559e326fd289885b88848a3c5",coin_list_owner:"0xc93e168a9361b5443fef27dbbb95a023337c6bfd082fdd920d658f4f9147d801",pool_list_owner:"0x36d796de9529007373fd2e34311511a8ca4eaef2bf7ea65f65ab68a1bc1de092"}},clmm:{clmm_display:"0x837dddad95c6741474cde3e414a2eebccbeae81d0b378f193d00381bdaf0da62",clmm_router:"0x32ba8c0298964e26161b3b44375ac39eeab6b29207e00c5f44368426096eb902",config:{pools_id:"0xc8407fc5dfec8d7b7014ee4d244dbe4eb456bfa6a7878e88c9d4bc947b2c2d87",global_config_id:"0x43e2925f7c5bed04b612cc66c53a850e280a46704ce12cd2f25420b537e23f9d",global_vault_id:"0x435c9725c4026206002a5a4004762316a53891f21a10c695311074482e52757e"}},launchpad:{ido_display:"",ido_router:"",lock_display:"",lock_router:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:"",lock_manager_id:""}},xcetus:{xcetus_display:"",xcetus_router:"",dividends_display:"",dividends_router:"",cetus_faucet:"",config:{xcetus_manager_id:"",lock_manager_id:"",dividend_manager_id:""}},hasCreatePool:!0,hasNotifi:!1}},local:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"http://192.168.1.41:9000",faucetURL:"http://192.168.1.41:9123/gas",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x61353a797a3d7f9c5522641bf824d730272260bcf66c7fcaf36a50243418caca",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"",config:{coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""}},clmm:{clmm_display:"0x33e0056fdbd9444c20302ce4141eaf5ec66fe864b62d8c0e3ee3bb1d138ee445",clmm_router:"0x306efa18b1a70af5007aaccd3b228e4f97f5596bf20c3a2d7b6321dfe8e30765",config:{pools_id:"0xae24565ffac1eb9f2fcb03b1dc21c21d1ce2a992d13a1a58e51d28293249d21c",global_config_id:"0xb8bd0870a43a75c55690a8ffbc13682ae7e0a8254348524963657474342c20b4",global_vault_id:"0x639c2d2d068df99602a9ef014b000df26b0312c07cb06065992cac911e1c376d"}},launchpad:{ido_display:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",ido_router:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",lock_display:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",lock_router:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",config:{pools_id:"0x1b3a62d143ac08dee37670eea58e714ab7cd501a396060bd2caf7a77fee88dfa",admin_cap_id:"0x0cb7daf2484c38e4a183813b8ad51b6ed664d135b7897e72be095768c90df911",config_cap_id:"0x40f0cee72c6e86d5a7b0e013a18cad8bf567bb70075b4a0f1c63eab8953a3dfd",lock_manager_id:"0x23954bf7d5c7880b50a369ee439a11ab771b7e0079a042645c4920d5e618b898"}},xwhale:{xwhale_display:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",xwhale_router:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",dividends_display:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",dividends_router:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",booster_display:"",booster_router:"",whale_faucet:"0xb0845bcf2f985e6ea5b401218598212e11f915a0c4d7afd1ed6e04b83e7d6310",config:{xwhale_manager_id:"0x46b2a60ee784180534ea2a6568ca510b488ea190f822cab8a9d38fb01b8e6421",lock_manager_id:"0x253e34da0542134e39b3c5dade1f5437d1b6ef6e90adfaa014186b456b6d7ffd",dividend_manager_id:"0xced885ada26d894f30efc236303caa500c994a25db5b18ee01e7664729cb983c"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},dev:{Aptos:{liquidswapDeployer:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37",faucetObjectId:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29",fetcher:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",clmmIntegrate:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",TokenDeployer:"0xc50b243a7180dfad9afd7dff8451c7b16cf27a92b6816f521b1f3c6d0c5397e3",IntegerMate:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.devnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"devnet",networkTip:"Devnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{liquidswapDeployer:"0x2b8f54bf724fa62789299569210d6c94758dd636",globalPauseStatusObjectId:"0x877cd08c02a2faa110a020f4f203304b114d76d2",faucetObjectId:"0x61df0e8caaf7b241d137fdc97906e3ca6bd68cca",rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",ammSite:"https://cetus-pre.netlify.app",api:"https://api.devcetus.zone",currentChainTokenAddress:"0x2::sui::SUI",hasCreatePool:!0,hasNotifi:!1}}},rw={...ah[od]},Xc=5,ow=If("wallet",{state:()=>({loading:!1,autoRefreshTime:Xc,countdown:0,connected:!1,aptosConnected:!1,suiConnected:!1,address:"",aptosAddress:"",suiAddress:"",platform:"",isShowWalletModal:!1,walletName:"",aptosWalletName:"",suiWalletName:"",currentWallet:null,aptosCurrentWallet:null,suiCurrentWallet:null,walletIcon:"",aptosWalletIcon:"",suiWalletIcon:"",switchWallet:!1,assets:{},walletIconName:"",aptosWalletIconName:"",suiWalletIconName:"",walletNetwork:"",isShowWalletCard:"",accountObj:null,firstGetAssetLoading:!1}),actions:{setLoading(e){e&&(this.countdown=Xc),this.loading=e,e||(this.countdown=0)},setCountdown(e){this.countdown=e},setWalletStatus(){this.connected=!0},setSwitchWallet(e){this.switchWallet=e},setIsShowWalletModal(e){this.isShowWalletModal=e},setWalletInfo(e,t){this.connected=e,this.platform=t},setCurrentWallet(e){e.wallet?(this.currentWallet=e.wallet,this.connected=e.isConnected,this.address=e.account,this.walletIcon=e.icon,this.walletName=e.wallet.name,e.platform==="Sui"?(this.suiCurrentWallet=e.wallet,this.suiConnected=e.isConnected,this.suiAddress=e.account,this.suiWalletIcon=e.icon,this.suiWalletName=e.wallet.name,this.walletName=e.walletName,this.accountObj=e.accountObj):(this.aptosCurrentWallet=e.wallet,this.aptosConnected=e.isConnected,this.aptosAddress=e.account,this.aptosWalletIcon=e.icon,this.aptosWalletName=e.wallet.name)):(this.currentWallet=null,this.connected=!1,this.address="",this.walletIcon="",this.walletName="",e.platform==="Sui"?(this.suiCurrentWallet=null,this.suiConnected=!1,this.suiAddress="",this.suiWalletIcon="",this.suiWalletName="",this.accountObj=null):(this.aptosCurrentWallet=null,this.aptosConnected=!1,this.aptosAddress="",this.aptosWalletIcon="",this.aptosWalletName=""))},setAssets(e){this.assets=e},setWalletIconName(e){this.walletIconName=e,localStorage.setItem("walletIconName",e)},setNetwork(e){this.walletNetwork=e,console.log(this.walletNetwork,"====>this.walletNetwork")},setIsShowWalletCard(e){this.isShowWalletCard=e},setFirstGetAssetLoading(e){this.firstGetAssetLoading=e}}}),sd="…";function ch(e){if(e.length<=6)return e;const t=e.startsWith("0x")?2:0;return`0x${e.slice(t,t+4)}${sd}${e.slice(-4)}`}function lh(e){return`${e.slice(0,10)}${sd}`}function dh(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let d=0;d<t.length;d++)t[d]=255;for(let d=0;d<e.length;d++){const u=e.charAt(d),m=u.charCodeAt(0);if(t[m]!==255)throw new TypeError(u+" is ambiguous");t[m]=d}const i=e.length,n=e.charAt(0),r=Math.log(i)/Math.log(256),o=Math.log(256)/Math.log(i);function s(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let u=0,m=0,g=0;const k=d.length;for(;g!==k&&d[g]===0;)g++,u++;const x=(k-g)*o+1>>>0,M=new Uint8Array(x);for(;g!==k;){let B=d[g],N=0;for(let L=x-1;(B!==0||N<m)&&L!==-1;L--,N++)B+=256*M[L]>>>0,M[L]=B%i>>>0,B=B/i>>>0;if(B!==0)throw new Error("Non-zero carry");m=N,g++}let I=x-m;for(;I!==x&&M[I]===0;)I++;let E=n.repeat(u);for(;I<x;++I)E+=e.charAt(M[I]);return E}function a(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let u=0,m=0,g=0;for(;d[u]===n;)m++,u++;const k=(d.length-u)*r+1>>>0,x=new Uint8Array(k);for(;d[u];){let B=t[d.charCodeAt(u)];if(B===255)return;let N=0;for(let L=k-1;(B!==0||N<g)&&L!==-1;L--,N++)B+=i*x[L]>>>0,x[L]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");g=N,u++}let M=k-g;for(;M!==k&&x[M]===0;)M++;const I=new Uint8Array(m+(k-M));let E=m;for(;M!==k;)I[E++]=x[M++];return I}function c(d){const u=a(d);if(u)return u;throw new Error("Non-base"+i+" character")}return{encode:s,decodeUnsafe:a,decode:c}}var uh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const ad=dh(uh),Es=e=>ad.encode(e),yo=e=>ad.decode(e);function qi(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const ta=8192;function Ht(e){if(e.length<ta)return btoa(String.fromCharCode(...e));let t="";for(var i=0;i<e.length;i+=ta){const n=e.slice(i,i+ta);t+=String.fromCharCode(...n)}return btoa(t)}function lc(e){var r;const t=e.startsWith("0x")?e.slice(2):e,n=((r=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:r.map(o=>parseInt(o,16)))??[];return Uint8Array.from(n)}function Dr(e){return e.reduce((t,i)=>t+i.toString(16).padStart(2,"0"),"")}function dc(e){let t=[],i=0;if(e===0)return[0];for(;e>0;)t[i]=e&127,(e>>=7)&&(t[i]|=128),i+=1;return t}function fh(e){let t=0,i=0,n=0;for(;;){let r=e[n];if(n+=1,t|=(r&127)<<i,!(r&128))break;i+=7}return{value:t,length:n}}class hh{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),n=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let t=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let t=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(t){let i=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,i,t);return this.shift(t),n}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,t),{value:n,length:r}=fh(i);return this.shift(r),n}readVec(t){let i=this.readULEB(),n=[];for(let r=0;r<i;r++)n.push(t(this,r,i));return n}}function ph(e,t){switch(t){case"base58":return Es(e);case"base64":return Ht(e);case"hex":return Dr(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function cd(e,t=["<",">"]){const[i,n]=t,r=[];let o="",s=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===i&&s++,c===n&&s--,s===0&&c===","){r.push(o.trim()),o="";continue}o+=c}return r.push(o.trim()),r}class _h{constructor({initialSize:t=1024,maxSize:i=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=i,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const i=this.bytePosition+t;if(i>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(i>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${i}`);this.size=n;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return ia(BigInt(t),8).forEach(i=>this.write8(i)),this}write128(t){return ia(BigInt(t),16).forEach(i=>this.write8(i)),this}write256(t){return ia(BigInt(t),32).forEach(i=>this.write8(i)),this}writeULEB(t){return dc(t).forEach(i=>this.write8(i)),this}writeVec(t,i){return this.writeULEB(t.length),Array.from(t).forEach((n,r)=>i(this,n,r,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return ph(this.toBytes(),t)}}function ia(e,t){let i=new Uint8Array(t),n=0;for(;e>0;)i[n]=Number(e%BigInt(256)),e=e/BigInt(256),n+=1;return i}var ld=e=>{throw TypeError(e)},dd=(e,t,i)=>t.has(e)||ld("Cannot "+i),Ei=(e,t,i)=>(dd(e,t,"read from private field"),i?i.call(e):t.get(e)),fs=(e,t,i)=>t.has(e)?ld("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),hs=(e,t,i,n)=>(dd(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),yr,oo,Qo,gn;const mh=class ud{constructor(t){fs(this,yr),fs(this,oo),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),hs(this,yr,t.write),hs(this,oo,t.serialize??((i,n)=>{const r=new _h({initialSize:this.serializedSize(i)??void 0,...n});return Ei(this,yr).call(this,i,r),r.toBytes()})),this.validate=t.validate??(()=>{})}write(t,i){this.validate(t),Ei(this,yr).call(this,t,i)}serialize(t,i){return this.validate(t),new gh(this,Ei(this,oo).call(this,t,i))}parse(t){const i=new hh(t);return this.read(i)}fromHex(t){return this.parse(lc(t))}fromBase58(t){return this.parse(yo(t))}fromBase64(t){return this.parse(qi(t))}transform({name:t,input:i,output:n,validate:r}){return new ud({name:t??this.name,read:o=>n(this.read(o)),write:(o,s)=>Ei(this,yr).call(this,i(o),s),serializedSize:o=>this.serializedSize(i(o)),serialize:(o,s)=>Ei(this,oo).call(this,i(o),s),validate:o=>{r==null||r(o),this.validate(i(o))}})}};yr=new WeakMap;oo=new WeakMap;let cn=mh;const fd=Symbol.for("@mysten/serialized-bcs");function uc(e){return!!e&&typeof e=="object"&&e[fd]===!0}class gh{constructor(t,i){fs(this,Qo),fs(this,gn),hs(this,Qo,t),hs(this,gn,i)}get[fd](){return!0}toBytes(){return Ei(this,gn)}toHex(){return Dr(Ei(this,gn))}toBase64(){return Ht(Ei(this,gn))}toBase58(){return Es(Ei(this,gn))}parse(){return Ei(this,Qo).parse(Ei(this,gn))}}Qo=new WeakMap;gn=new WeakMap;function ps({size:e,...t}){return new cn({...t,serializedSize:()=>e})}function na({readMethod:e,writeMethod:t,...i}){return ps({...i,read:n=>n[e](),write:(n,r)=>r[t](n),validate:n=>{var r;if(n<0||n>i.maxValue)throw new TypeError(`Invalid ${i.name} value: ${n}. Expected value in range 0-${i.maxValue}`);(r=i.validate)==null||r.call(i,n)}})}function ra({readMethod:e,writeMethod:t,...i}){return ps({...i,read:n=>n[e](),write:(n,r)=>r[t](BigInt(n)),validate:n=>{var o;const r=BigInt(n);if(r<0||r>i.maxValue)throw new TypeError(`Invalid ${i.name} value: ${r}. Expected value in range 0-${i.maxValue}`);(o=i.validate)==null||o.call(i,r)}})}function bh({serialize:e,...t}){const i=new cn({...t,serialize:e,write:(n,r)=>{for(const o of i.serialize(n).toBytes())r.write8(o)}});return i}function wh({toBytes:e,fromBytes:t,...i}){return new cn({...i,read:n=>{const r=n.readULEB(),o=n.readBytes(r);return t(o)},write:(n,r)=>{const o=e(n);r.writeULEB(o.length);for(let s=0;s<o.length;s++)r.write8(o[s])},serialize:n=>{const r=e(n),o=dc(r.length),s=new Uint8Array(o.length+r.length);return s.set(o,0),s.set(r,o.length),s},validate:n=>{var r;if(typeof n!="string")throw new TypeError(`Invalid ${i.name} value: ${n}. Expected string`);(r=i.validate)==null||r.call(i,n)}})}function yh(e){let t=null;function i(){return t||(t=e()),t}return new cn({name:"lazy",read:n=>i().read(n),serializedSize:n=>i().serializedSize(n),write:(n,r)=>i().write(n,r),serialize:(n,r)=>i().serialize(n,r).toBytes()})}const P={u8(e){return na({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return na({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return na({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return ra({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return ra({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return ra({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return ps({name:"bool",size:1,read:t=>t.read8()===1,write:(t,i)=>i.write8(t?1:0),...e,validate:t=>{var i;if((i=e==null?void 0:e.validate)==null||i.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return bh({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(dc(t)),...e})},bytes(e,t){return ps({name:`bytes[${e}]`,size:e,read:i=>i.readBytes(e),write:(i,n)=>{for(let r=0;r<e;r++)n.write8(i[r]??0)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e)throw new TypeError(`Expected array of length ${e}, found ${i.length}`)}})},string(e){return wh({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,i){return new cn({name:`${t.name}[${e}]`,read:n=>{const r=new Array(e);for(let o=0;o<e;o++)r[o]=t.read(n);return r},write:(n,r)=>{for(const o of n)t.write(o,r)},...i,validate:n=>{var r;if((r=i==null?void 0:i.validate)==null||r.call(i,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},option(e){return P.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>t.$kind==="Some"?t.Some:null})},vector(e,t){return new cn({name:`vector<${e.name}>`,read:i=>{const n=i.readULEB(),r=new Array(n);for(let o=0;o<n;o++)r[o]=e.read(i);return r},write:(i,n)=>{n.writeULEB(i.length);for(const r of i)e.write(r,n)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`)}})},tuple(e,t){return new cn({name:`(${e.map(i=>i.name).join(", ")})`,serializedSize:i=>{let n=0;for(let r=0;r<e.length;r++){const o=e[r].serializedSize(i[r]);if(o==null)return null;n+=o}return n},read:i=>{const n=[];for(const r of e)n.push(r.read(i));return n},write:(i,n)=>{for(let r=0;r<e.length;r++)e[r].write(i[r],n)},...t,validate:i=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,i),!Array.isArray(i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${i.length}`)}})},struct(e,t,i){const n=Object.entries(t);return new cn({name:e,serializedSize:r=>{let o=0;for(const[s,a]of n){const c=a.serializedSize(r[s]);if(c==null)return null;o+=c}return o},read:r=>{const o={};for(const[s,a]of n)o[s]=a.read(r);return o},write:(r,o)=>{for(const[s,a]of n)a.write(r[s],o)},...i,validate:r=>{var o;if((o=i==null?void 0:i.validate)==null||o.call(i,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`)}})},enum(e,t,i){const n=Object.entries(t);return new cn({name:e,read:r=>{const o=r.readULEB(),s=n[o];if(!s)throw new TypeError(`Unknown value ${o} for enum ${e}`);const[a,c]=s;return{[a]:(c==null?void 0:c.read(r))??!0,$kind:a}},write:(r,o)=>{const[s,a]=Object.entries(r).filter(([c])=>Object.hasOwn(t,c))[0];for(let c=0;c<n.length;c++){const[d,u]=n[c];if(d===s){o.writeULEB(c),u==null||u.write(a,o);return}}},...i,validate:r=>{var a;if((a=i==null?void 0:i.validate)==null||a.call(i,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`);const o=Object.keys(r).filter(c=>r[c]!==void 0&&Object.hasOwn(t,c));if(o.length!==1)throw new TypeError(`Expected object with one key, but found ${o.length} for type ${e}}`);const[s]=o;if(!Object.hasOwn(t,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map(e,t){return P.vector(P.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:i=>[...i.entries()],output:i=>{const n=new Map;for(const[r,o]of i)n.set(r,o);return n}})},lazy(e){return yh(e)}},vh=32;function Ia(e){try{return yo(e).length===vh}catch{return!1}}const Bs=32;function Bi(e){return Ch(e)&&Ah(e)===Bs}function Ar(e){return Bi(e)}function kh(e){return e.includes("::")?fc(e):e}function fc(e){const[t,i]=e.split("::"),n=e.slice(t.length+i.length+4),r=n.includes("<")?n.slice(0,n.indexOf("<")):n,o=n.includes("<")?cd(n.slice(n.indexOf("<")+1,n.lastIndexOf(">"))).map(s=>kh(s.trim())):[];return{address:pe(t),module:i,name:r,typeParams:o}}function Ns(e){const{address:t,module:i,name:n,typeParams:r}=typeof e=="string"?fc(e):e,o=(r==null?void 0:r.length)>0?`<${r.map(s=>typeof s=="string"?s:Ns(s)).join(",")}>`:"";return`${t}::${i}::${n}${o}`}function pe(e,t=!1){let i=e.toLowerCase();return!t&&i.startsWith("0x")&&(i=i.slice(2)),`0x${i.padStart(Bs*2,"0")}`}function ze(e,t=!1){return pe(e,t)}function Ch(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function Ah(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const hd=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,pd=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,xh=235;function Sh(e){return e.length>xh?!1:e.includes("@")?hd.test(e):pd.test(e)}function _d(e,t="at"){const i=e.toLowerCase();let n;if(i.includes("@")){if(!hd.test(i))throw new Error(`Invalid SuiNS name ${e}`);const[r,o]=i.split("@");n=[...r?r.split("."):[],o]}else{if(!pd.test(i))throw new Error(`Invalid SuiNS name ${e}`);n=i.split(".").slice(0,-1)}return t==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}const Th=9,Mh=BigInt(1e9),md="0x1",hc="0x2",Oh="0x3",Ih=ze("0x6"),Ph="sui_system",gd=`${hc}::sui::SUI`,jh=ze("0x5"),Eh=Object.freeze(Object.defineProperty({__proto__:null,MIST_PER_SUI:Mh,MOVE_STDLIB_ADDRESS:md,SUI_ADDRESS_LENGTH:Bs,SUI_CLOCK_OBJECT_ID:Ih,SUI_DECIMALS:Th,SUI_FRAMEWORK_ADDRESS:hc,SUI_SYSTEM_ADDRESS:Oh,SUI_SYSTEM_MODULE_NAME:Ph,SUI_SYSTEM_STATE_OBJECT_ID:jh,SUI_TYPE_ARG:gd,formatAddress:ch,formatDigest:lh,fromB64:qi,fromHEX:lc,isValidSuiAddress:Bi,isValidSuiNSName:Sh,isValidSuiObjectId:Ar,isValidTransactionDigest:Ia,normalizeStructTag:Ns,normalizeSuiAddress:pe,normalizeSuiNSName:_d,normalizeSuiObjectId:ze,parseStructTag:fc,toB64:Ht,toHEX:Dr},Symbol.toStringTag,{value:"Module"})),Bh=/^vector<(.+)>$/,Nh=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Xi{static parseFromStr(t,i=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const n=t.match(Bh);if(n)return{vector:Xi.parseFromStr(n[1],i)};const r=t.match(Nh);if(r)return{struct:{address:i?pe(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:Xi.parseStructTypeArgs(r[5],i)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,i=!1){return cd(t).map(n=>Xi.parseFromStr(n,i))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${Xi.tagToString(t.vector)}>`;if("struct"in t){const i=t.struct,n=i.typeParams.map(Xi.tagToString).join(", ");return`${i.address}::${i.module}::${i.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}function Rh(e){return P.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function Dh(e){return P.enum("Option",{None:null,Some:e})}const Ft=P.bytes(Bs).transform({validate:e=>{const t=typeof e=="string"?e:Dr(e);if(!t||!Bi(pe(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?lc(pe(e)):e,output:e=>pe(Dr(e))}),Di=P.vector(P.u8()).transform({name:"ObjectDigest",input:e=>yo(e),output:e=>Es(new Uint8Array(e)),validate:e=>{if(yo(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ai=P.struct("SuiObjectRef",{objectId:Ft,version:P.u64(),digest:Di}),bd=P.struct("SharedObjectRef",{objectId:Ft,initialSharedVersion:P.u64(),mutable:P.bool()}),wd=P.enum("ObjectArg",{ImmOrOwnedObject:Ai,SharedObject:bd,Receiving:Ai}),yd=P.enum("CallArg",{Pure:P.struct("Pure",{bytes:P.vector(P.u8()).transform({input:e=>typeof e=="string"?qi(e):e,output:e=>Ht(new Uint8Array(e))})}),Object:wd}),pc=P.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:P.lazy(()=>pc),struct:P.lazy(()=>Sd),u16:null,u32:null,u256:null}),_c=pc.transform({input:e=>typeof e=="string"?Xi.parseFromStr(e,!0):e,output:e=>Xi.tagToString(e)}),Gi=P.enum("Argument",{GasCoin:null,Input:P.u16(),Result:P.u16(),NestedResult:P.tuple([P.u16(),P.u16()])}),vd=P.struct("ProgrammableMoveCall",{package:Ft,module:P.string(),function:P.string(),typeArguments:P.vector(_c),arguments:P.vector(Gi)}),kd=P.enum("Command",{MoveCall:vd,TransferObjects:P.struct("TransferObjects",{objects:P.vector(Gi),address:Gi}),SplitCoins:P.struct("SplitCoins",{coin:Gi,amounts:P.vector(Gi)}),MergeCoins:P.struct("MergeCoins",{destination:Gi,sources:P.vector(Gi)}),Publish:P.struct("Publish",{modules:P.vector(P.vector(P.u8()).transform({input:e=>typeof e=="string"?qi(e):e,output:e=>Ht(new Uint8Array(e))})),dependencies:P.vector(Ft)}),MakeMoveVec:P.struct("MakeMoveVec",{type:Dh(_c).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:P.vector(Gi)}),Upgrade:P.struct("Upgrade",{modules:P.vector(P.vector(P.u8()).transform({input:e=>typeof e=="string"?qi(e):e,output:e=>Ht(new Uint8Array(e))})),dependencies:P.vector(Ft),package:Ft,ticket:Gi})}),Cd=P.struct("ProgrammableTransaction",{inputs:P.vector(yd),commands:P.vector(kd)}),Ad=P.enum("TransactionKind",{ProgrammableTransaction:Cd,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),xd=P.enum("TransactionExpiration",{None:null,Epoch:Rh()}),Sd=P.struct("StructTag",{address:Ft,module:P.string(),name:P.string(),typeParams:P.vector(pc)}),Td=P.struct("GasData",{payment:P.vector(Ai),owner:Ft,price:P.u64(),budget:P.u64()}),Md=P.struct("TransactionDataV1",{kind:Ad,sender:Ft,gasData:Td,expiration:xd}),Od=P.enum("TransactionData",{V1:Md}),Id=P.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Pd=P.enum("IntentVersion",{V0:null}),jd=P.enum("AppId",{Sui:null}),Ed=P.struct("Intent",{scope:Id,version:Pd,appId:jd});function Bd(e){return P.struct(`IntentMessage<${e.name}>`,{intent:Ed,value:e})}const Nd=P.enum("CompressedSignature",{ED25519:P.fixedArray(64,P.u8()),Secp256k1:P.fixedArray(64,P.u8()),Secp256r1:P.fixedArray(64,P.u8()),ZkLogin:P.vector(P.u8())}),Rd=P.enum("PublicKey",{ED25519:P.fixedArray(32,P.u8()),Secp256k1:P.fixedArray(33,P.u8()),Secp256r1:P.fixedArray(33,P.u8()),ZkLogin:P.vector(P.u8())}),Dd=P.struct("MultiSigPkMap",{pubKey:Rd,weight:P.u8()}),$d=P.struct("MultiSigPublicKey",{pk_map:P.vector(Dd),threshold:P.u16()}),$h=P.struct("MultiSig",{sigs:P.vector(Nd),bitmap:P.u16(),multisig_pk:$d}),qh=P.vector(P.u8()).transform({input:e=>typeof e=="string"?qi(e):e,output:e=>Ht(new Uint8Array(e))}),qd=P.struct("SenderSignedTransaction",{intentMessage:Bd(Od),txSignatures:P.vector(qh)}),Lh=P.vector(qd,{name:"SenderSignedData"}),Fh=P.enum("PackageUpgradeError",{UnableToFetchPackage:P.struct("UnableToFetchPackage",{packageId:Ft}),NotAPackage:P.struct("NotAPackage",{objectId:Ft}),IncompatibleUpgrade:null,DigestDoesNotMatch:P.struct("DigestDoesNotMatch",{digest:P.vector(P.u8())}),UnknownUpgradePolicy:P.struct("UnknownUpgradePolicy",{policy:P.u8()}),PackageIDDoesNotMatch:P.struct("PackageIDDoesNotMatch",{packageId:Ft,ticketId:Ft})}),Uh=P.struct("ModuleId",{address:Ft,name:P.string()}),Jc=P.struct("MoveLocation",{module:Uh,function:P.u16(),instruction:P.u16(),functionName:P.option(P.string())}),Kh=P.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:P.struct("IndexOutOfBounds",{idx:P.u16()}),SecondaryIndexOutOfBounds:P.struct("SecondaryIndexOutOfBounds",{resultIdx:P.u16(),secondaryIdx:P.u16()}),InvalidResultArity:P.struct("InvalidResultArity",{resultIdx:P.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Vh=P.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),zh=P.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:P.struct("MoveObjectTooBig",{objectSize:P.u64(),maxObjectSize:P.u64()}),MovePackageTooBig:P.struct("MovePackageTooBig",{objectSize:P.u64(),maxObjectSize:P.u64()}),CircularObjectOwnership:P.struct("CircularObjectOwnership",{object:Ft}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:P.option(Jc),MoveAbort:P.tuple([Jc,P.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:P.struct("CommandArgumentError",{argIdx:P.u16(),kind:Kh}),TypeArgumentError:P.struct("TypeArgumentError",{argumentIdx:P.u16(),kind:Vh}),UnusedValueWithoutDrop:P.struct("UnusedValueWithoutDrop",{resultIdx:P.u16(),secondaryIdx:P.u16()}),InvalidPublicFunctionReturnType:P.struct("InvalidPublicFunctionReturnType",{idx:P.u16()}),InvalidTransferObject:null,EffectsTooLarge:P.struct("EffectsTooLarge",{currentSize:P.u64(),maxSize:P.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:P.struct("PackageUpgradeError",{upgradeError:Fh}),WrittenObjectsTooLarge:P.struct("WrittenObjectsTooLarge",{currentSize:P.u64(),maxSize:P.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),Ld=P.enum("ExecutionStatus",{Success:null,Failed:P.struct("ExecutionFailed",{error:zh,command:P.option(P.u64())})}),Fd=P.struct("GasCostSummary",{computationCost:P.u64(),storageCost:P.u64(),storageRebate:P.u64(),nonRefundableStorageFee:P.u64()}),xr=P.enum("Owner",{AddressOwner:Ft,ObjectOwner:Ft,Shared:P.struct("Shared",{initialSharedVersion:P.u64()}),Immutable:null}),Wh=P.struct("TransactionEffectsV1",{status:Ld,executedEpoch:P.u64(),gasUsed:Fd,modifiedAtVersions:P.vector(P.tuple([Ft,P.u64()])),sharedObjects:P.vector(Ai),transactionDigest:Di,created:P.vector(P.tuple([Ai,xr])),mutated:P.vector(P.tuple([Ai,xr])),unwrapped:P.vector(P.tuple([Ai,xr])),deleted:P.vector(Ai),unwrappedThenDeleted:P.vector(Ai),wrapped:P.vector(Ai),gasObject:P.tuple([Ai,xr]),eventsDigest:P.option(Di),dependencies:P.vector(Di)}),mc=P.tuple([P.u64(),Di]),Gh=P.enum("ObjectIn",{NotExist:null,Exist:P.tuple([mc,xr])}),Hh=P.enum("ObjectOut",{NotExist:null,ObjectWrite:P.tuple([Di,xr]),PackageWrite:mc}),Xh=P.enum("IDOperation",{None:null,Created:null,Deleted:null}),Jh=P.struct("EffectsObjectChange",{inputState:Gh,outputState:Hh,idOperation:Xh}),Zh=P.enum("UnchangedSharedKind",{ReadOnlyRoot:mc,MutateDeleted:P.u64(),ReadDeleted:P.u64(),Cancelled:P.u64(),PerEpochConfig:null}),Qh=P.struct("TransactionEffectsV2",{status:Ld,executedEpoch:P.u64(),gasUsed:Fd,transactionDigest:Di,gasObjectIndex:P.option(P.u32()),eventsDigest:P.option(Di),dependencies:P.vector(Di),lamportVersion:P.u64(),changedObjects:P.vector(P.tuple([Ft,Jh])),unchangedSharedObjects:P.vector(P.tuple([Ft,Zh])),auxDataDigest:P.option(Di)}),Yh=P.enum("TransactionEffects",{V1:Wh,V2:Qh}),de={...P,U8:P.u8(),U16:P.u16(),U32:P.u32(),U64:P.u64(),U128:P.u128(),U256:P.u256(),ULEB128:P.uleb128(),Bool:P.bool(),String:P.string(),Address:Ft,AppId:jd,Argument:Gi,CallArg:yd,CompressedSignature:Nd,GasData:Td,Intent:Ed,IntentMessage:Bd,IntentScope:Id,IntentVersion:Pd,MultiSig:$h,MultiSigPkMap:Dd,MultiSigPublicKey:$d,ObjectArg:wd,ObjectDigest:Di,ProgrammableMoveCall:vd,ProgrammableTransaction:Cd,PublicKey:Rd,SenderSignedData:Lh,SenderSignedTransaction:qd,SharedObjectRef:bd,StructTag:Sd,SuiObjectRef:Ai,Command:kd,TransactionData:Od,TransactionDataV1:Md,TransactionExpiration:xd,TransactionKind:Ad,TypeTag:_c,TransactionEffects:Yh},e0="object",t0="ID",i0="ascii",n0="String",r0="string",o0="String",s0="option",a0="Option";function c0(e){const t=typeof e.body=="object"&&"datatype"in e.body?e.body.datatype:null;return!!t&&pe(t.package)===pe("0x2")&&t.module==="tx_context"&&t.type==="TxContext"}function _s(e){if(typeof e=="string")switch(e){case"address":return de.Address;case"bool":return de.Bool;case"u8":return de.U8;case"u16":return de.U16;case"u32":return de.U32;case"u64":return de.U64;case"u128":return de.U128;case"u256":return de.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if(e.vector==="u8")return de.vector(de.U8).transform({input:i=>typeof i=="string"?new TextEncoder().encode(i):i,output:i=>i});const t=_s(e.vector);return t?de.vector(t):null}if("datatype"in e){const t=pe(e.datatype.package);if(t===pe(md)){if(e.datatype.module===i0&&e.datatype.type===n0||e.datatype.module===r0&&e.datatype.type===o0)return de.String;if(e.datatype.module===s0&&e.datatype.type===a0){const i=_s(e.datatype.typeParameters[0]);return i?de.vector(i):null}}if(t===pe(hc)&&e.datatype.module===e0&&e.datatype.type===t0)return de.Address}return null}function Ud(e){return typeof e=="object"&&"Reference"in e?{ref:"&",body:co(e.Reference)}:typeof e=="object"&&"MutableReference"in e?{ref:"&mut",body:co(e.MutableReference)}:{ref:null,body:co(e)}}function co(e){if(typeof e=="string")switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:co(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(co)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}function l0(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?Ht(e):e.toBase64()}}}const Mi={Pure:l0,ObjectRef({objectId:e,digest:t,version:i}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:i,objectId:pe(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:i}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:i,objectId:pe(e)}}}},ReceivingRef({objectId:e,digest:t,version:i}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:i,objectId:pe(e)}}}}};var Yi;function d0(e){return{lang:(e==null?void 0:e.lang)??(Yi==null?void 0:Yi.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(Yi==null?void 0:Yi.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(Yi==null?void 0:Yi.abortPipeEarly)}}var oa;function u0(e){return oa==null?void 0:oa.get(e)}var sa;function f0(e){return sa==null?void 0:sa.get(e)}var aa;function h0(e,t){var i;return(i=aa==null?void 0:aa.get(e))==null?void 0:i.get(t)}function Kd(e){var i,n;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((n=(i=Object.getPrototypeOf(e))==null?void 0:i.constructor)==null?void 0:n.name))??"null":t}function vi(e,t,i,n,r){const o=r&&"input"in r?r.input:i.value,s=(r==null?void 0:r.expected)??e.expects??null,a=(r==null?void 0:r.received)??Kd(o),c={kind:e.kind,type:e.type,input:o,expected:s,received:a,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:r==null?void 0:r.path,issues:r==null?void 0:r.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},d=e.kind==="schema",u=(r==null?void 0:r.message)??e.message??h0(e.reference,c.lang)??(d?f0(c.lang):null)??n.message??u0(c.lang);u&&(c.message=typeof u=="function"?u(c):u),d&&(i.typed=!1),i.issues?i.issues.push(c):i.issues=[c]}function p0(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var _0=class extends Error{constructor(t){super(t[0].message);G(this,"issues");this.name="ValiError",this.issues=t}};function Io(e,t){return{kind:"validation",type:"check",reference:Io,async:!1,expects:null,requirement:e,message:t,_run(i,n){return i.typed&&!this.requirement(i.value)&&vi(this,"input",i,n),i}}}function Lt(e){return{kind:"validation",type:"integer",reference:Lt,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(t,i){return t.typed&&!this.requirement(t.value)&&vi(this,"integer",t,i),t}}}function Rs(e){return{kind:"transformation",type:"transform",reference:Rs,async:!1,operation:e,_run(t){return t.value=this.operation(t.value),t}}}function gc(e,t,i){return typeof e.default=="function"?e.default(t,i):e.default}function Pa(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function he(e,t){return{kind:"schema",type:"array",reference:he,expects:"Array",async:!1,item:e,message:t,_run(i,n){var o;const r=i.value;if(Array.isArray(r)){i.typed=!0,i.value=[];for(let s=0;s<r.length;s++){const a=r[s],c=this.item._run({typed:!1,value:a},n);if(c.issues){const d={type:"array",origin:"value",input:r,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(d):u.path=[d],(o=i.issues)==null||o.push(u);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),i.value.push(c.value)}}else vi(this,"type",i,n);return i}}}function Ds(e){return{kind:"schema",type:"bigint",reference:Ds,expects:"bigint",async:!1,message:e,_run(t,i){return typeof t.value=="bigint"?t.typed=!0:vi(this,"type",t,i),t}}}function $s(e){return{kind:"schema",type:"boolean",reference:$s,expects:"boolean",async:!1,message:e,_run(t,i){return typeof t.value=="boolean"?t.typed=!0:vi(this,"type",t,i),t}}}function vo(e){return{kind:"schema",type:"lazy",reference:vo,expects:"unknown",async:!1,getter:e,_run(t,i){return this.getter(t.value)._run(t,i)}}}function ge(e,t){return{kind:"schema",type:"literal",reference:ge,expects:Kd(e),async:!1,literal:e,message:t,_run(i,n){return i.value===this.literal?i.typed=!0:vi(this,"type",i,n),i}}}function Ge(e,...t){const i={kind:"schema",type:"nullable",reference:Ge,expects:`${e.expects} | null`,async:!1,wrapped:e,_run(n,r){return n.value===null&&("default"in this&&(n.value=gc(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function $r(e,...t){const i={kind:"schema",type:"nullish",reference:$r,expects:`${e.expects} | null | undefined`,async:!1,wrapped:e,_run(n,r){return(n.value===null||n.value===void 0)&&("default"in this&&(n.value=gc(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function Dt(e){return{kind:"schema",type:"number",reference:Dt,expects:"number",async:!1,message:e,_run(t,i){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:vi(this,"type",t,i),t}}}function H(e,t){return{kind:"schema",type:"object",reference:H,expects:"Object",async:!1,entries:e,message:t,_run(i,n){var o;const r=i.value;if(r&&typeof r=="object"){i.typed=!0,i.value={};for(const s in this.entries){const a=r[s],c=this.entries[s]._run({typed:!1,value:a},n);if(c.issues){const d={type:"object",origin:"value",input:r,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(d):u.path=[d],(o=i.issues)==null||o.push(u);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),(c.value!==void 0||s in r)&&(i.value[s]=c.value)}}else vi(this,"type",i,n);return i}}}function ai(e,...t){const i={kind:"schema",type:"optional",reference:ai,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(n,r){return n.value===void 0&&("default"in this&&(n.value=gc(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,r)}};return 0 in t&&(i.default=t[0]),i}function ko(e,t,i){return{kind:"schema",type:"record",reference:ko,expects:"Object",async:!1,key:e,value:t,message:i,_run(n,r){var s,a;const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const c in o)if(p0(o,c)){const d=o[c],u=this.key._run({typed:!1,value:c},r);if(u.issues){const g={type:"object",origin:"key",input:o,key:c,value:d};for(const k of u.issues)k.path=[g],(s=n.issues)==null||s.push(k);if(n.issues||(n.issues=u.issues),r.abortEarly){n.typed=!1;break}}const m=this.value._run({typed:!1,value:d},r);if(m.issues){const g={type:"object",origin:"value",input:o,key:c,value:d};for(const k of m.issues)k.path?k.path.unshift(g):k.path=[g],(a=n.issues)==null||a.push(k);if(n.issues||(n.issues=m.issues),r.abortEarly){n.typed=!1;break}}(!u.typed||!m.typed)&&(n.typed=!1),u.typed&&(n.value[u.value]=m.value)}}else vi(this,"type",n,r);return n}}}function Fe(e){return{kind:"schema",type:"string",reference:Fe,expects:"string",async:!1,message:e,_run(t,i){return typeof t.value=="string"?t.typed=!0:vi(this,"type",t,i),t}}}function bc(e,t){return{kind:"schema",type:"tuple",reference:bc,expects:"Array",async:!1,items:e,message:t,_run(i,n){var o;const r=i.value;if(Array.isArray(r)){i.typed=!0,i.value=[];for(let s=0;s<this.items.length;s++){const a=r[s],c=this.items[s]._run({typed:!1,value:a},n);if(c.issues){const d={type:"array",origin:"value",input:r,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(d):u.path=[d],(o=i.issues)==null||o.push(u);if(i.issues||(i.issues=c.issues),n.abortEarly){i.typed=!1;break}}c.typed||(i.typed=!1),i.value.push(c.value)}}else vi(this,"type",i,n);return i}}}function Zc(e){let t;if(e)for(const i of e)t?t.push(...i.issues):t=i.issues;return t}function ri(e,t){return{kind:"schema",type:"union",reference:ri,expects:[...new Set(e.map(i=>i.expects))].join(" | ")||"never",async:!1,options:e,message:t,_run(i,n){let r,o,s;for(const a of this.options){const c=a._run({typed:!1,value:i.value},n);if(c.typed)if(c.issues)o?o.push(c):o=[c];else{r=c;break}else s?s.push(c):s=[c]}if(r)return r;if(o){if(o.length===1)return o[0];vi(this,"type",i,n,{issues:Zc(o)}),i.typed=!0}else{if((s==null?void 0:s.length)===1)return s[0];vi(this,"type",i,n,{issues:Zc(s)})}return i}}}function cr(){return{kind:"schema",type:"unknown",reference:cr,expects:"unknown",async:!1,_run(e){return e.typed=!0,e}}}function Nt(e,t,i){const n=e._run({typed:!1,value:t},d0(i));if(n.issues)throw new _0(n.issues);return n.value}function Xe(...e){return{...e[0],pipe:e,_run(t,i){for(let n=0;n<e.length;n++){if(t.issues&&(e[n].kind==="schema"||e[n].kind==="transformation")){t.typed=!1;break}(!t.issues||!i.abortEarly&&!i.abortPipeEarly)&&(t=e[n]._run(t,i))}return t}}}function fr(e){const t=Object.entries(e).map(([i,n])=>H({[i]:n}));return Xe(ri(t),Rs(i=>({...i,$kind:Object.keys(i)[0]})))}const zr=Xe(Fe(),Rs(e=>pe(e)),Io(Bi)),bi=zr,lr=Fe(),pi=Xe(ri([Fe(),Xe(Dt(),Lt())]),Io(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Sn=H({objectId:zr,version:pi,digest:Fe()}),Ye=Xe(ri([H({GasCoin:ge(!0)}),H({Input:Xe(Dt(),Lt()),type:ai(ge("pure"))}),H({Input:Xe(Dt(),Lt()),type:ai(ge("object"))}),H({Result:Xe(Dt(),Lt())}),H({NestedResult:bc([Xe(Dt(),Lt()),Xe(Dt(),Lt())])})]),Rs(e=>({...e,$kind:Object.keys(e)[0]}))),m0=H({budget:Ge(pi),price:Ge(pi),owner:Ge(zr),payment:Ge(he(Sn))}),ja=ri([ge("address"),ge("bool"),ge("u8"),ge("u16"),ge("u32"),ge("u64"),ge("u128"),ge("u256"),H({vector:vo(()=>ja)}),H({datatype:H({package:Fe(),module:Fe(),type:Fe(),typeParameters:he(vo(()=>ja))})}),H({typeParameter:Xe(Dt(),Lt())})]),g0=H({ref:Ge(ri([ge("&"),ge("&mut")])),body:ja}),b0=H({package:bi,module:Fe(),function:Fe(),typeArguments:he(Fe()),arguments:he(Ye),_argumentTypes:ai(Ge(he(g0)))}),w0=H({name:Fe(),inputs:ko(Fe(),ri([Ye,he(Ye)])),data:ko(Fe(),cr())}),y0=fr({MoveCall:b0,TransferObjects:H({objects:he(Ye),address:Ye}),SplitCoins:H({coin:Ye,amounts:he(Ye)}),MergeCoins:H({destination:Ye,sources:he(Ye)}),Publish:H({modules:he(lr),dependencies:he(bi)}),MakeMoveVec:H({type:Ge(Fe()),elements:he(Ye)}),Upgrade:H({modules:he(lr),dependencies:he(bi),package:bi,ticket:Ye}),$Intent:w0}),Vd=fr({ImmOrOwnedObject:Sn,SharedObject:H({objectId:bi,initialSharedVersion:pi,mutable:$s()}),Receiving:Sn}),v0=fr({Object:Vd,Pure:H({bytes:lr}),UnresolvedPure:H({value:cr()}),UnresolvedObject:H({objectId:bi,version:ai(Ge(pi)),digest:ai(Ge(Fe())),initialSharedVersion:ai(Ge(pi))})}),Qc=fr({Object:Vd,Pure:H({bytes:lr})}),zd=fr({None:ge(!0),Epoch:pi}),Yo=H({version:ge(2),sender:$r(zr),expiration:$r(zd),gasData:m0,inputs:he(v0),commands:he(y0)});var Wd=(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(Wd||{});const ji={MoveCall(e){const[t,i="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:i,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects(e,t){return{$kind:"TransferObjects",TransferObjects:{objects:e.map(i=>Nt(Ye,i)),address:Nt(Ye,t)}}},SplitCoins(e,t){return{$kind:"SplitCoins",SplitCoins:{coin:Nt(Ye,e),amounts:t.map(i=>Nt(Ye,i))}}},MergeCoins(e,t){return{$kind:"MergeCoins",MergeCoins:{destination:Nt(Ye,e),sources:t.map(i=>Nt(Ye,i))}}},Publish({modules:e,dependencies:t}){return{$kind:"Publish",Publish:{modules:e.map(i=>typeof i=="string"?i:Ht(new Uint8Array(i))),dependencies:t.map(i=>ze(i))}}},Upgrade({modules:e,dependencies:t,package:i,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:e.map(r=>typeof r=="string"?r:Ht(new Uint8Array(r))),dependencies:t.map(r=>ze(r)),package:i,ticket:Nt(Ye,n)}}},MakeMoveVec({type:e,elements:t}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(i=>Nt(Ye,i))}}},Intent({name:e,inputs:t={},data:i={}}){return{$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Array.isArray(r)?r.map(o=>Nt(Ye,o)):Nt(Ye,r)])),data:i}}}},Ea=H({digest:Fe(),objectId:Fe(),version:ri([Xe(Dt(),Lt()),Fe(),Ds()])}),k0=fr({ImmOrOwned:Ea,Shared:H({objectId:bi,initialSharedVersion:pi,mutable:$s()}),Receiving:Ea}),Yc=fr({Object:k0,Pure:he(Xe(Dt(),Lt()))}),Gd=ri([H({kind:ge("Input"),index:Xe(Dt(),Lt()),value:cr(),type:ai(ge("object"))}),H({kind:ge("Input"),index:Xe(Dt(),Lt()),value:cr(),type:ge("pure")})]),C0=ri([H({Epoch:Xe(Dt(),Lt())}),H({None:Ge(ge(!0))})]),el=Xe(ri([Dt(),Fe(),Ds()]),Io(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),wc=ri([H({bool:Ge(ge(!0))}),H({u8:Ge(ge(!0))}),H({u64:Ge(ge(!0))}),H({u128:Ge(ge(!0))}),H({address:Ge(ge(!0))}),H({signer:Ge(ge(!0))}),H({vector:vo(()=>wc)}),H({struct:vo(()=>A0)}),H({u16:Ge(ge(!0))}),H({u32:Ge(ge(!0))}),H({u256:Ge(ge(!0))})]),A0=H({address:Fe(),module:Fe(),name:Fe(),typeParams:he(wc)}),x0=H({budget:ai(el),price:ai(el),payment:ai(he(Ea)),owner:ai(Fe())}),S0=[Gd,H({kind:ge("GasCoin")}),H({kind:ge("Result"),index:Xe(Dt(),Lt())}),H({kind:ge("NestedResult"),index:Xe(Dt(),Lt()),resultIndex:Xe(Dt(),Lt())})],un=ri([...S0]),T0=H({kind:ge("MoveCall"),target:Xe(Fe(),Io(e=>e.split("::").length===3)),typeArguments:he(Fe()),arguments:he(un)}),M0=H({kind:ge("TransferObjects"),objects:he(un),address:un}),O0=H({kind:ge("SplitCoins"),coin:un,amounts:he(un)}),I0=H({kind:ge("MergeCoins"),destination:un,sources:he(un)}),P0=H({kind:ge("MakeMoveVec"),type:ri([H({Some:wc}),H({None:Ge(ge(!0))})]),objects:he(un)}),j0=H({kind:ge("Publish"),modules:he(he(Xe(Dt(),Lt()))),dependencies:he(Fe())}),E0=H({kind:ge("Upgrade"),modules:he(he(Xe(Dt(),Lt()))),dependencies:he(Fe()),packageId:Fe(),ticket:un}),B0=[T0,M0,O0,I0,j0,E0,P0],N0=ri([...B0]);H({version:ge(1),sender:ai(Fe()),expiration:$r(C0),gasConfig:x0,inputs:he(Gd),transactions:he(N0)});function tl(e){var i;const t=e.inputs.map((n,r)=>{if(n.Object)return{kind:"Input",index:r,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:r,value:{Pure:Array.from(qi(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:r,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:r,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:((i=e.expiration)==null?void 0:i.$kind)==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:Xi.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(r=>en(r,t))};if(n.MergeCoins)return{kind:"MergeCoins",destination:en(n.MergeCoins.destination,t),sources:n.MergeCoins.sources.map(r=>en(r,t))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(r=>en(r,t))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(r=>Array.from(qi(r))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:en(n.SplitCoins.coin,t),amounts:n.SplitCoins.amounts.map(r=>en(r,t))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(r=>en(r,t)),address:en(n.TransferObjects.address,t)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(r=>Array.from(qi(r))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:en(n.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function en(e,t){if(e.$kind==="GasCoin")return{kind:"GasCoin"};if(e.$kind==="Result")return{kind:"Result",index:e.Result};if(e.$kind==="NestedResult")return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if(e.$kind==="Input")return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function R0(e){var t,i,n;return Nt(Yo,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:((t=e.gasConfig.budget)==null?void 0:t.toString())??null,price:((i=e.gasConfig.price)==null?void 0:i.toString())??null,payment:((n=e.gasConfig.payment)==null?void 0:n.map(r=>({digest:r.digest,objectId:r.objectId,version:r.version.toString()})))??null},inputs:e.inputs.map(r=>{if(r.kind==="Input"){if(Pa(Yc,r.value)){const o=Nt(Yc,r.value);if(o.Object){if(o.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:o.Object.ImmOrOwned.objectId,version:String(o.Object.ImmOrOwned.version),digest:o.Object.ImmOrOwned.digest}}};if(o.Object.Shared)return{Object:{SharedObject:{mutable:o.Object.Shared.mutable??null,initialSharedVersion:o.Object.Shared.initialSharedVersion,objectId:o.Object.Shared.objectId}}};if(o.Object.Receiving)return{Object:{Receiving:{digest:o.Object.Receiving.digest,version:String(o.Object.Receiving.version),objectId:o.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Ht(new Uint8Array(o.Pure))}}}return r.type==="object"?{UnresolvedObject:{objectId:r.value}}:{UnresolvedPure:{value:r.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(r=>{switch(r.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in r.type?Xi.tagToString(r.type.Some):null,elements:r.objects.map(o=>tn(o))}};case"MergeCoins":return{MergeCoins:{destination:tn(r.destination),sources:r.sources.map(o=>tn(o))}};case"MoveCall":{const[o,s,a]=r.target.split("::");return{MoveCall:{package:o,module:s,function:a,typeArguments:r.typeArguments,arguments:r.arguments.map(c=>tn(c))}}}case"Publish":return{Publish:{modules:r.modules.map(o=>Ht(Uint8Array.from(o))),dependencies:r.dependencies}};case"SplitCoins":return{SplitCoins:{coin:tn(r.coin),amounts:r.amounts.map(o=>tn(o))}};case"TransferObjects":return{TransferObjects:{objects:r.objects.map(o=>tn(o)),address:tn(r.address)}};case"Upgrade":return{Upgrade:{modules:r.modules.map(o=>Ht(Uint8Array.from(o))),dependencies:r.dependencies,package:r.packageId,ticket:tn(r.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(r)}`)})})}function tn(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function Po(e){return ri(Object.entries(e).map(([t,i])=>H({[t]:i})))}const Ii=Po({GasCoin:ge(!0),Input:Xe(Dt(),Lt()),Result:Xe(Dt(),Lt()),NestedResult:bc([Xe(Dt(),Lt()),Xe(Dt(),Lt())])}),D0=H({budget:Ge(pi),price:Ge(pi),owner:Ge(zr),payment:Ge(he(Sn))}),$0=H({package:bi,module:Fe(),function:Fe(),typeArguments:he(Fe()),arguments:he(Ii)}),q0=H({name:Fe(),inputs:ko(Fe(),ri([Ii,he(Ii)])),data:ko(Fe(),cr())}),L0=Po({MoveCall:$0,TransferObjects:H({objects:he(Ii),address:Ii}),SplitCoins:H({coin:Ii,amounts:he(Ii)}),MergeCoins:H({destination:Ii,sources:he(Ii)}),Publish:H({modules:he(lr),dependencies:he(bi)}),MakeMoveVec:H({type:Ge(Fe()),elements:he(Ii)}),Upgrade:H({modules:he(lr),dependencies:he(bi),package:bi,ticket:Ii}),$Intent:q0}),F0=Po({ImmOrOwnedObject:Sn,SharedObject:H({objectId:bi,initialSharedVersion:pi,mutable:$s()}),Receiving:Sn}),U0=Po({Object:F0,Pure:H({bytes:lr}),UnresolvedPure:H({value:cr()}),UnresolvedObject:H({objectId:bi,version:ai(Ge(pi)),digest:ai(Ge(Fe())),initialSharedVersion:ai(Ge(pi))})}),K0=Po({None:ge(!0),Epoch:pi}),V0=H({version:ge(2),sender:$r(zr),expiration:$r(K0),gasData:D0,inputs:he(U0),commands:he(L0)}),z0=50,W0=1000n,G0=5e10;async function H0(e,t,i){return await Y0(e,t),await Q0(e,t),t.onlyTransactionKind||(await X0(e,t),await J0(e,t),await Z0(e,t)),await ep(e),await i()}async function X0(e,t){e.gasConfig.price||(e.gasConfig.price=String(await Wr(t).getReferenceGasPrice()))}async function J0(e,t){if(e.gasConfig.budget)return;const i=await Wr(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(G0),payment:[]}}})});if(i.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${i.effects.status.error}`,{cause:i});const n=W0*BigInt(e.gasConfig.price||1n),r=BigInt(i.effects.gasUsed.computationCost)+n,o=r+BigInt(i.effects.gasUsed.storageCost)-BigInt(i.effects.gasUsed.storageRebate);e.gasConfig.budget=String(o>r?o:r)}async function Z0(e,t){if(!e.gasConfig.payment){const n=(await Wr(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:gd})).data.filter(r=>!e.inputs.find(s=>{var a;return(a=s.Object)!=null&&a.ImmOrOwnedObject?r.coinObjectId===s.Object.ImmOrOwnedObject.objectId:!1})).map(r=>({objectId:r.coinObjectId,digest:r.digest,version:r.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=n.map(r=>Nt(Sn,r))}}async function Q0(e,t){const i=e.inputs.filter(u=>{var m;return u.UnresolvedObject&&!(u.UnresolvedObject.version||(m=u.UnresolvedObject)!=null&&m.initialSharedVersion)}),n=[...new Set(i.map(u=>ze(u.UnresolvedObject.objectId)))],r=n.length?rp(n,z0):[],o=(await Promise.all(r.map(u=>Wr(t).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat(),s=new Map(n.map((u,m)=>[u,o[m]])),a=Array.from(s).filter(([u,m])=>m.error).map(([u,m])=>JSON.stringify(m.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=o.map(u=>{if(u.error||!u.data)throw new Error(`Failed to fetch object: ${u.error}`);const m=u.data.owner,g=m&&typeof m=="object"&&"Shared"in m?m.Shared.initial_shared_version:null;return{objectId:u.data.objectId,digest:u.data.digest,version:u.data.version,initialSharedVersion:g}}),d=new Map(n.map((u,m)=>[u,c[m]]));for(const[u,m]of e.inputs.entries()){if(!m.UnresolvedObject)continue;let g;const k=pe(m.UnresolvedObject.objectId),x=d.get(k);m.UnresolvedObject.initialSharedVersion??(x==null?void 0:x.initialSharedVersion)?g=Mi.SharedObjectRef({objectId:k,initialSharedVersion:m.UnresolvedObject.initialSharedVersion||(x==null?void 0:x.initialSharedVersion),mutable:tp(e,u)}):ip(e,u)&&(g=Mi.ReceivingRef({objectId:k,digest:m.UnresolvedObject.digest??(x==null?void 0:x.digest),version:m.UnresolvedObject.version??(x==null?void 0:x.version)})),e.inputs[e.inputs.indexOf(m)]=g??Mi.ObjectRef({objectId:k,digest:m.UnresolvedObject.digest??(x==null?void 0:x.digest),version:m.UnresolvedObject.version??(x==null?void 0:x.version)})}}async function Y0(e,t){const{inputs:i,commands:n}=e,r=[],o=new Set;n.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(u=>u.$kind==="Input"?e.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;o.add(u),r.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(c=>{il(c,de.U64,e)});break;case"TransferObjects":il(a.TransferObjects.address,de.Address,e);break}});const s=new Map;if(o.size>0){const a=Wr(t);await Promise.all([...o].map(async c=>{const[d,u,m]=c.split("::"),g=await a.getNormalizedMoveFunction({package:d,module:u,function:m});s.set(c,g.parameters.map(k=>Ud(k)))}))}r.length&&await Promise.all(r.map(async a=>{const c=s.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const u=c.length>0&&c0(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=u})),n.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,d=`${c.package}::${c.module}::${c.function}`,u=c._argumentTypes;if(u){if(u.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${d}`);u.forEach((m,g)=>{var B,N;const k=c.arguments[g];if(k.$kind!=="Input")return;const x=i[k.Input];if(!x.UnresolvedPure&&!x.UnresolvedObject)return;const M=((B=x.UnresolvedPure)==null?void 0:B.value)??((N=x.UnresolvedObject)==null?void 0:N.objectId),I=_s(m.body);if(I){k.type="pure",i[i.indexOf(x)]=Mi.Pure(I.serialize(M));return}if(typeof M!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(M,null,2)}`);k.type="object";const E=x.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:M}}:x;i[k.Input]=E})}})}function ep(e){e.inputs.forEach((t,i)=>{if(t.$kind!=="Object"&&t.$kind!=="Pure")throw new Error(`Input at index ${i} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(t)}`)})}function il(e,t,i){if(e.$kind!=="Input")return;const n=i.inputs[e.Input];n.$kind==="UnresolvedPure"&&(i.inputs[e.Input]=Mi.Pure(t.serialize(n.UnresolvedPure.value)))}function tp(e,t){let i=!1;return e.getInputUses(t,(n,r)=>{if(r.MoveCall&&r.MoveCall._argumentTypes){const o=r.MoveCall.arguments.indexOf(n);i=r.MoveCall._argumentTypes[o].ref!=="&"||i}(r.$kind==="MakeMoveVec"||r.$kind==="MergeCoins"||r.$kind==="SplitCoins")&&(i=!0)}),i}function ip(e,t){let i=!1;return e.getInputUses(t,(n,r)=>{if(r.MoveCall&&r.MoveCall._argumentTypes){const o=r.MoveCall.arguments.indexOf(n);i=np(r.MoveCall._argumentTypes[o])||i}}),i}function np(e){return typeof e.body!="object"||!("datatype"in e.body)?!1:e.body.datatype.package==="0x2"&&e.body.datatype.module==="transfer"&&e.body.datatype.type==="Receiving"}function Wr(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function rp(e,t){return Array.from({length:Math.ceil(e.length/t)},(i,n)=>e.slice(n*t,n*t+t))}function Hd(e){function t(i,n){if(typeof i=="string")return e(lo(i).serialize(n));if(i instanceof Uint8Array||uc(i))return e(i);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=i=>e(de.U8.serialize(i)),t.u16=i=>e(de.U16.serialize(i)),t.u32=i=>e(de.U32.serialize(i)),t.u64=i=>e(de.U64.serialize(i)),t.u128=i=>e(de.U128.serialize(i)),t.u256=i=>e(de.U256.serialize(i)),t.bool=i=>e(de.Bool.serialize(i)),t.string=i=>e(de.String.serialize(i)),t.address=i=>e(de.Address.serialize(i)),t.id=t.address,t.vector=(i,n)=>e(de.vector(lo(i)).serialize(n)),t.option=(i,n)=>e(de.option(lo(i)).serialize(n)),t}function lo(e){switch(e){case"u8":return de.u8();case"u16":return de.u16();case"u32":return de.u32();case"u64":return de.u64();case"u128":return de.u128();case"u256":return de.u256();case"bool":return de.bool();case"string":return de.string();case"id":case"address":return de.Address}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[i,n]=t.slice(1);return i==="vector"?de.vector(lo(n)):de.option(lo(n))}throw new Error(`Invalid Pure type name: ${e}`)}function ca(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function op(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Xd(e,...t){if(!op(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function nl(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function sp(e,t){Xd(e);const i=t.outputLen;if(e.length<i)throw new Error(`digestInto() expects output buffer of length at least ${i}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ms=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Xn=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Jd=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,nn=Xn?e=>e:e=>Jd(e);function pr(e){for(let t=0;t<e.length;t++)e[t]=Jd(e[t])}function ap(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function uo(e){return typeof e=="string"&&(e=ap(e)),Xd(e),e}class cp{clone(){return this._cloneInto()}}function lp(e){const t=(n,r)=>e(r).update(uo(n)).digest(),i=e({});return t.outputLen=i.outputLen,t.blockLen=i.blockLen,t.create=n=>e(n),t}const dp=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class up extends cp{constructor(t,i,n={},r,o,s){if(super(),this.blockLen=t,this.outputLen=i,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,ca(t),ca(i),ca(r),i<0||i>r)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>r))throw new Error(`key must be up 1..${r} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==s)throw new Error(`personalization must be ${s} byte long or undefined`);this.buffer32=ms(this.buffer=new Uint8Array(t))}update(t){nl(this);const{blockLen:i,buffer:n,buffer32:r}=this;t=uo(t);const o=t.length,s=t.byteOffset,a=t.buffer;for(let c=0;c<o;){this.pos===i&&(Xn||pr(r),this.compress(r,0,!1),Xn||pr(r),this.pos=0);const d=Math.min(i-this.pos,o-c),u=s+c;if(d===i&&!(u%4)&&c+d<o){const m=new Uint32Array(a,u,Math.floor((o-c)/4));Xn||pr(m);for(let g=0;c+i<o;g+=r.length,c+=i)this.length+=i,this.compress(m,g,!1);Xn||pr(m);continue}n.set(t.subarray(c,c+d),this.pos),this.pos+=d,this.length+=d,c+=d}return this}digestInto(t){nl(this),sp(t,this);const{pos:i,buffer32:n}=this;this.finished=!0,this.buffer.subarray(i).fill(0),Xn||pr(n),this.compress(n,0,!0),Xn||pr(n);const r=ms(t);this.get().forEach((o,s)=>r[s]=nn(o))}digest(){const{buffer:t,outputLen:i}=this;this.digestInto(t);const n=t.slice(0,i);return this.destroy(),n}_cloneInto(t){const{buffer:i,length:n,finished:r,destroyed:o,outputLen:s,pos:a}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=n,t.finished=r,t.destroyed=o,t.outputLen=s,t.buffer.set(i),t.pos=a,t}}const qo=BigInt(2**32-1),Ba=BigInt(32);function Zd(e,t=!1){return t?{h:Number(e&qo),l:Number(e>>Ba&qo)}:{h:Number(e>>Ba&qo)|0,l:Number(e&qo)|0}}function fp(e,t=!1){let i=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:o,l:s}=Zd(e[r],t);[i[r],n[r]]=[o,s]}return[i,n]}const hp=(e,t)=>BigInt(e>>>0)<<Ba|BigInt(t>>>0),pp=(e,t,i)=>e>>>i,_p=(e,t,i)=>e<<32-i|t>>>i,mp=(e,t,i)=>e>>>i|t<<32-i,gp=(e,t,i)=>e<<32-i|t>>>i,bp=(e,t,i)=>e<<64-i|t>>>i-32,wp=(e,t,i)=>e>>>i-32|t<<64-i,yp=(e,t)=>t,vp=(e,t)=>e,kp=(e,t,i)=>e<<i|t>>>32-i,Cp=(e,t,i)=>t<<i|e>>>32-i,Ap=(e,t,i)=>t<<i-32|e>>>64-i,xp=(e,t,i)=>e<<i-32|t>>>64-i;function Sp(e,t,i,n){const r=(t>>>0)+(n>>>0);return{h:e+i+(r/2**32|0)|0,l:r|0}}const Tp=(e,t,i)=>(e>>>0)+(t>>>0)+(i>>>0),Mp=(e,t,i,n)=>t+i+n+(e/2**32|0)|0,Op=(e,t,i,n)=>(e>>>0)+(t>>>0)+(i>>>0)+(n>>>0),Ip=(e,t,i,n,r)=>t+i+n+r+(e/2**32|0)|0,Pp=(e,t,i,n,r)=>(e>>>0)+(t>>>0)+(i>>>0)+(n>>>0)+(r>>>0),jp=(e,t,i,n,r,o)=>t+i+n+r+o+(e/2**32|0)|0,Ep={fromBig:Zd,split:fp,toBig:hp,shrSH:pp,shrSL:_p,rotrSH:mp,rotrSL:gp,rotrBH:bp,rotrBL:wp,rotr32H:yp,rotr32L:vp,rotlSH:kp,rotlSL:Cp,rotlBH:Ap,rotlBL:xp,add:Sp,add3L:Tp,add3H:Mp,add4L:Op,add4H:Ip,add5H:jp,add5L:Pp},di=Ep,Vt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),J=new Uint32Array(32);function fn(e,t,i,n,r,o){const s=r[o],a=r[o+1];let c=J[2*e],d=J[2*e+1],u=J[2*t],m=J[2*t+1],g=J[2*i],k=J[2*i+1],x=J[2*n],M=J[2*n+1],I=di.add3L(c,u,s);d=di.add3H(I,d,m,a),c=I|0,{Dh:M,Dl:x}={Dh:M^d,Dl:x^c},{Dh:M,Dl:x}={Dh:di.rotr32H(M,x),Dl:di.rotr32L(M,x)},{h:k,l:g}=di.add(k,g,M,x),{Bh:m,Bl:u}={Bh:m^k,Bl:u^g},{Bh:m,Bl:u}={Bh:di.rotrSH(m,u,24),Bl:di.rotrSL(m,u,24)},J[2*e]=c,J[2*e+1]=d,J[2*t]=u,J[2*t+1]=m,J[2*i]=g,J[2*i+1]=k,J[2*n]=x,J[2*n+1]=M}function hn(e,t,i,n,r,o){const s=r[o],a=r[o+1];let c=J[2*e],d=J[2*e+1],u=J[2*t],m=J[2*t+1],g=J[2*i],k=J[2*i+1],x=J[2*n],M=J[2*n+1],I=di.add3L(c,u,s);d=di.add3H(I,d,m,a),c=I|0,{Dh:M,Dl:x}={Dh:M^d,Dl:x^c},{Dh:M,Dl:x}={Dh:di.rotrSH(M,x,16),Dl:di.rotrSL(M,x,16)},{h:k,l:g}=di.add(k,g,M,x),{Bh:m,Bl:u}={Bh:m^k,Bl:u^g},{Bh:m,Bl:u}={Bh:di.rotrBH(m,u,63),Bl:di.rotrBL(m,u,63)},J[2*e]=c,J[2*e+1]=d,J[2*t]=u,J[2*t+1]=m,J[2*i]=g,J[2*i+1]=k,J[2*n]=x,J[2*n+1]=M}class Bp extends up{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Vt[0]|0,this.v0h=Vt[1]|0,this.v1l=Vt[2]|0,this.v1h=Vt[3]|0,this.v2l=Vt[4]|0,this.v2h=Vt[5]|0,this.v3l=Vt[6]|0,this.v3h=Vt[7]|0,this.v4l=Vt[8]|0,this.v4h=Vt[9]|0,this.v5l=Vt[10]|0,this.v5h=Vt[11]|0,this.v6l=Vt[12]|0,this.v6h=Vt[13]|0,this.v7l=Vt[14]|0,this.v7h=Vt[15]|0;const i=t.key?t.key.length:0;if(this.v0l^=this.outputLen|i<<8|65536|1<<24,t.salt){const n=ms(uo(t.salt));this.v4l^=nn(n[0]),this.v4h^=nn(n[1]),this.v5l^=nn(n[2]),this.v5h^=nn(n[3])}if(t.personalization){const n=ms(uo(t.personalization));this.v6l^=nn(n[0]),this.v6h^=nn(n[1]),this.v7l^=nn(n[2]),this.v7h^=nn(n[3])}if(t.key){const n=new Uint8Array(this.blockLen);n.set(uo(t.key)),this.update(n)}}get(){let{v0l:t,v0h:i,v1l:n,v1h:r,v2l:o,v2h:s,v3l:a,v3h:c,v4l:d,v4h:u,v5l:m,v5h:g,v6l:k,v6h:x,v7l:M,v7h:I}=this;return[t,i,n,r,o,s,a,c,d,u,m,g,k,x,M,I]}set(t,i,n,r,o,s,a,c,d,u,m,g,k,x,M,I){this.v0l=t|0,this.v0h=i|0,this.v1l=n|0,this.v1h=r|0,this.v2l=o|0,this.v2h=s|0,this.v3l=a|0,this.v3h=c|0,this.v4l=d|0,this.v4h=u|0,this.v5l=m|0,this.v5h=g|0,this.v6l=k|0,this.v6h=x|0,this.v7l=M|0,this.v7h=I|0}compress(t,i,n){this.get().forEach((c,d)=>J[d]=c),J.set(Vt,16);let{h:r,l:o}=di.fromBig(BigInt(this.length));J[24]=Vt[8]^o,J[25]=Vt[9]^r,n&&(J[28]=~J[28],J[29]=~J[29]);let s=0;const a=dp;for(let c=0;c<12;c++)fn(0,4,8,12,t,i+2*a[s++]),hn(0,4,8,12,t,i+2*a[s++]),fn(1,5,9,13,t,i+2*a[s++]),hn(1,5,9,13,t,i+2*a[s++]),fn(2,6,10,14,t,i+2*a[s++]),hn(2,6,10,14,t,i+2*a[s++]),fn(3,7,11,15,t,i+2*a[s++]),hn(3,7,11,15,t,i+2*a[s++]),fn(0,5,10,15,t,i+2*a[s++]),hn(0,5,10,15,t,i+2*a[s++]),fn(1,6,11,12,t,i+2*a[s++]),hn(1,6,11,12,t,i+2*a[s++]),fn(2,7,8,13,t,i+2*a[s++]),hn(2,7,8,13,t,i+2*a[s++]),fn(3,4,9,14,t,i+2*a[s++]),hn(3,4,9,14,t,i+2*a[s++]);this.v0l^=J[0]^J[16],this.v0h^=J[1]^J[17],this.v1l^=J[2]^J[18],this.v1h^=J[3]^J[19],this.v2l^=J[4]^J[20],this.v2h^=J[5]^J[21],this.v3l^=J[6]^J[22],this.v3h^=J[7]^J[23],this.v4l^=J[8]^J[24],this.v4h^=J[9]^J[25],this.v5l^=J[10]^J[26],this.v5h^=J[11]^J[27],this.v6l^=J[12]^J[28],this.v6h^=J[13]^J[29],this.v7l^=J[14]^J[30],this.v7h^=J[15]^J[31],J.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Np=lp(e=>new Bp(e));function Rp(e,t){const i=Array.from(`${e}::`).map(r=>r.charCodeAt(0)),n=new Uint8Array(i.length+t.length);return n.set(i),n.set(t,i.length),Np(n,{dkLen:32})}function rl(e){return pe(e).replace("0x","")}class gi{constructor(t){this.version=2,this.sender=(t==null?void 0:t.sender)??null,this.expiration=(t==null?void 0:t.expiration)??null,this.inputs=(t==null?void 0:t.inputs)??[],this.commands=(t==null?void 0:t.commands)??[],this.gasData=(t==null?void 0:t.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(t){const n=de.TransactionKind.parse(t).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return gi.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(t){const i=de.TransactionData.parse(t),n=i==null?void 0:i.V1,r=n.kind.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");return gi.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:r.inputs,commands:r.commands})}static restore(t){return t.version===2?new gi(Nt(Yo,t)):new gi(Nt(Yo,R0(t)))}static getDigestFromBytes(t){const i=Rp("TransactionData",t);return Es(i)}get gasConfig(){return this.gasData}set gasConfig(t){this.gasData=t}build({maxSizeBytes:t=1/0,overrides:i,onlyTransactionKind:n}={}){const r=this.inputs,o=this.commands,s={ProgrammableTransaction:{inputs:r,commands:o}};if(n)return de.TransactionKind.serialize(s,{maxSize:t}).toBytes();const a=(i==null?void 0:i.expiration)??this.expiration,c=(i==null?void 0:i.sender)??this.sender,d={...this.gasData,...i==null?void 0:i.gasConfig,...i==null?void 0:i.gasData};if(!c)throw new Error("Missing transaction sender");if(!d.budget)throw new Error("Missing gas budget");if(!d.payment)throw new Error("Missing gas payment");if(!d.price)throw new Error("Missing gas price");const u={sender:rl(c),expiration:a||{None:!0},gasData:{payment:d.payment,owner:rl(this.gasData.owner??c),price:BigInt(d.price),budget:BigInt(d.budget)},kind:{ProgrammableTransaction:{inputs:r,commands:o}}};return de.TransactionData.serialize({V1:u},{maxSize:t}).toBytes()}addInput(t,i){const n=this.inputs.length;return this.inputs.push(i),{Input:n,type:t,$kind:"Input"}}getInputUses(t,i){this.mapArguments((n,r)=>(n.$kind==="Input"&&n.Input===t&&i(n,r),n))}mapArguments(t){for(const i of this.commands)switch(i.$kind){case"MoveCall":i.MoveCall.arguments=i.MoveCall.arguments.map(r=>t(r,i));break;case"TransferObjects":i.TransferObjects.objects=i.TransferObjects.objects.map(r=>t(r,i)),i.TransferObjects.address=t(i.TransferObjects.address,i);break;case"SplitCoins":i.SplitCoins.coin=t(i.SplitCoins.coin,i),i.SplitCoins.amounts=i.SplitCoins.amounts.map(r=>t(r,i));break;case"MergeCoins":i.MergeCoins.destination=t(i.MergeCoins.destination,i),i.MergeCoins.sources=i.MergeCoins.sources.map(r=>t(r,i));break;case"MakeMoveVec":i.MakeMoveVec.elements=i.MakeMoveVec.elements.map(r=>t(r,i));break;case"Upgrade":i.Upgrade.ticket=t(i.Upgrade.ticket,i);break;case"$Intent":const n=i.$Intent.inputs;i.$Intent.inputs={};for(const[r,o]of Object.entries(n))i.$Intent.inputs[r]=Array.isArray(o)?o.map(s=>t(s,i)):t(o,i);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${i.$kind}`)}}replaceCommand(t,i){if(!Array.isArray(i)){this.commands[t]=i;return}const n=i.length-1;this.commands.splice(t,1,...i),n!==0&&this.mapArguments(r=>{switch(r.$kind){case"Result":r.Result>t&&(r.Result+=n);break;case"NestedResult":r.NestedResult[0]>t&&(r.NestedResult[0]+=n);break}return r})}getDigest(){const t=this.build({onlyTransactionKind:!1});return gi.getDigestFromBytes(t)}snapshot(){return Nt(Yo,this)}}function ol(e){if(typeof e=="string")return pe(e);if(e.Object)return e.Object.ImmOrOwnedObject?pe(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?pe(e.Object.Receiving.objectId):pe(e.Object.SharedObject.objectId);if(e.UnresolvedObject)return pe(e.UnresolvedObject.objectId)}var Qd=e=>{throw TypeError(e)},yc=(e,t,i)=>t.has(e)||Qd("Cannot "+i),Ke=(e,t,i)=>(yc(e,t,"read from private field"),i?i.call(e):t.get(e)),Zr=(e,t,i)=>t.has(e)?Qd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Qr=(e,t,i,n)=>(yc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),rn=(e,t,i)=>(yc(e,t,"access private method"),i),es,gs,Jn,We,Pi,ts,vc,Na,kc;function Dp(e){const t={$kind:"Result",Result:e},i=[],n=r=>i[r]??(i[r]={$kind:"NestedResult",NestedResult:[e,r]});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(r,o){if(o in r)return Reflect.get(r,o);if(o===Symbol.iterator)return function*(){let a=0;for(;;)yield n(a),a++};if(typeof o=="symbol")return;const s=parseInt(o,10);if(!(Number.isNaN(s)||s<0))return n(s)}})}const Yd=Symbol.for("@mysten/transaction");function jo(e){return!!e&&typeof e=="object"&&e[Yd]===!0}const $p=class Ra{constructor(){Zr(this,Pi),Zr(this,es,[]),Zr(this,gs,[]),Zr(this,Jn,new Map),Zr(this,We),Qr(this,We,new gi)}static fromKind(t){const i=new Ra;return Qr(i,We,gi.fromKindBytes(typeof t=="string"?qi(t):t)),i}static from(t){const i=new Ra;return jo(t)?Qr(i,We,new gi(t.getData())):typeof t!="string"||!t.startsWith("{")?Qr(i,We,gi.fromBytes(typeof t=="string"?qi(t):t)):Qr(i,We,gi.restore(JSON.parse(t))),i}addSerializationPlugin(t){Ke(this,es).push(t)}addBuildPlugin(t){Ke(this,gs).push(t)}addIntentResolver(t,i){if(Ke(this,Jn).has(t)&&Ke(this,Jn).get(t)!==i)throw new Error(`Intent resolver for ${t} already exists`);Ke(this,Jn).set(t,i)}setSender(t){Ke(this,We).sender=t}setSenderIfNotSet(t){Ke(this,We).sender||(Ke(this,We).sender=t)}setExpiration(t){Ke(this,We).expiration=t?Nt(zd,t):null}setGasPrice(t){Ke(this,We).gasConfig.price=String(t)}setGasBudget(t){Ke(this,We).gasConfig.budget=String(t)}setGasBudgetIfNotSet(t){Ke(this,We).gasData.budget==null&&(Ke(this,We).gasConfig.budget=String(t))}setGasOwner(t){Ke(this,We).gasConfig.owner=t}setGasPayment(t){Ke(this,We).gasConfig.payment=t.map(i=>Nt(Sn,i))}get blockData(){return tl(Ke(this,We).snapshot())}getData(){return Ke(this,We).snapshot()}get[Yd](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Hd(t=>uc(t)?Ke(this,We).addInput("pure",{$kind:"Pure",Pure:{bytes:t.toBase64()}}):Ke(this,We).addInput("pure",Pa(Qc,t)?Nt(Qc,t):t instanceof Uint8Array?Mi.Pure(t):{$kind:"UnresolvedPure",UnresolvedPure:{value:t}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}object(t){var r,o;if(typeof t=="function")return this.object(t(this));if(typeof t=="object"&&Pa(Ye,t))return t;const i=ol(t),n=Ke(this,We).inputs.find(s=>i===ol(s));return(r=n==null?void 0:n.Object)!=null&&r.SharedObject&&typeof t=="object"&&((o=t.Object)!=null&&o.SharedObject)&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||t.Object.SharedObject.mutable),n?{$kind:"Input",Input:Ke(this,We).inputs.indexOf(n),type:"object"}:Ke(this,We).addInput("object",typeof t=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:pe(t)}}:t)}objectRef(...t){return this.object(Mi.ObjectRef(...t))}receivingRef(...t){return this.object(Mi.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(Mi.SharedObjectRef(...t))}add(t){if(typeof t=="function")return t(this);const i=Ke(this,We).commands.push(t);return Dp(i-1)}splitCoins(t,i){return this.add(ji.SplitCoins(typeof t=="string"?this.object(t):rn(this,Pi,vc).call(this,t),i.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):rn(this,Pi,ts).call(this,n))))}mergeCoins(t,i){return this.add(ji.MergeCoins(this.object(t),i.map(n=>this.object(n))))}publish({modules:t,dependencies:i}){return this.add(ji.Publish({modules:t,dependencies:i}))}upgrade({modules:t,dependencies:i,package:n,ticket:r}){return this.add(ji.Upgrade({modules:t,dependencies:i,package:n,ticket:this.object(r)}))}moveCall({arguments:t,...i}){return this.add(ji.MoveCall({...i,arguments:t==null?void 0:t.map(n=>rn(this,Pi,ts).call(this,n))}))}transferObjects(t,i){return this.add(ji.TransferObjects(t.map(n=>this.object(n)),typeof i=="string"?this.pure.address(i):rn(this,Pi,ts).call(this,i)))}makeMoveVec({type:t,elements:i}){return this.add(ji.MakeMoveVec({type:t,elements:i.map(n=>this.object(n))}))}serialize(){return JSON.stringify(tl(Ke(this,We).snapshot()))}async toJSON(t={}){return await this.prepareForSerialization(t),JSON.stringify(Nt(V0,Ke(this,We).snapshot()),(i,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(t){const{signer:i,...n}=t,r=await this.build(n);return i.signTransaction(r)}async build(t={}){return await this.prepareForSerialization(t),await rn(this,Pi,Na).call(this,t),Ke(this,We).build({onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await rn(this,Pi,Na).call(this,t),Ke(this,We).getDigest()}async prepareForSerialization(t){var r;const i=new Set;for(const o of Ke(this,We).commands)o.$Intent&&i.add(o.$Intent.name);const n=[...Ke(this,es)];for(const o of i)if(!((r=t.supportedIntents)!=null&&r.includes(o))){if(!Ke(this,Jn).has(o))throw new Error(`Missing intent resolver for ${o}`);n.push(Ke(this,Jn).get(o))}await rn(this,Pi,kc).call(this,n,t)}};es=new WeakMap;gs=new WeakMap;Jn=new WeakMap;We=new WeakMap;Pi=new WeakSet;ts=function(e){return uc(e)?this.pure(e):rn(this,Pi,vc).call(this,e)};vc=function(e){return typeof e=="function"?Nt(Ye,e(this)):Nt(Ye,e)};Na=async function(e){if(!e.onlyTransactionKind&&!Ke(this,We).sender)throw new Error("Missing transaction sender");await rn(this,Pi,kc).call(this,[...Ke(this,gs),H0],e)};kc=async function(e,t){const i=n=>{if(n>=e.length)return()=>{};const r=e[n];return async()=>{const o=i(n+1);let s=!1,a=!1;if(await r(Ke(this,We),t,async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await o(),a=!0}),!s)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await i(0)()};let $=$p;var eu=e=>{throw TypeError(e)},tu=(e,t,i)=>t.has(e)||eu("Cannot "+i),Wt=(e,t,i)=>(tu(e,t,"read from private field"),i?i.call(e):t.get(e)),iu=(e,t,i)=>t.has(e)?eu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),qp=(e,t,i,n)=>(tu(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Zn,Qt;class nu{async getObject(t){const[i,n]=await Promise.all([this.get("OwnedObject",t),this.get("SharedOrImmutableObject",t)]);return i??n??null}async getObjects(t){return Promise.all([...t.map(i=>this.getObject(i))])}async addObject(t){return t.owner?await this.set("OwnedObject",t.objectId,t):await this.set("SharedOrImmutableObject",t.objectId,t),t}async addObjects(t){await Promise.all(t.map(async i=>this.addObject(i)))}async deleteObject(t){await Promise.all([this.delete("OwnedObject",t),this.delete("SharedOrImmutableObject",t)])}async deleteObjects(t){await Promise.all(t.map(i=>this.deleteObject(i)))}async getMoveFunctionDefinition(t){const i=`${pe(t.package)}::${t.module}::${t.function}`;return this.get("MoveFunction",i)}async addMoveFunctionDefinition(t){const i=pe(t.package),n=`${i}::${t.module}::${t.function}`,r={...t,package:i};return await this.set("MoveFunction",n,r),r}async deleteMoveFunctionDefinition(t){const i=`${pe(t.package)}::${t.module}::${t.function}`;await this.delete("MoveFunction",i)}async getCustom(t){return this.get("Custom",t)}async setCustom(t,i){return this.set("Custom",t,i)}async deleteCustom(t){return this.delete("Custom",t)}}class Lp extends nu{constructor(){super(...arguments),iu(this,Zn,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(t,i){return Wt(this,Zn)[t].get(i)??null}async set(t,i,n){Wt(this,Zn)[t].set(i,n)}async delete(t,i){Wt(this,Zn)[t].delete(i)}async clear(t){if(t)Wt(this,Zn)[t].clear();else for(const i of Object.values(Wt(this,Zn)))i.clear()}}Zn=new WeakMap;class ru{constructor({cache:t=new Lp}){iu(this,Qt),qp(this,Qt,t)}asPlugin(){return async(t,i,n)=>{const r=t.inputs.filter(a=>a.UnresolvedObject).map(a=>a.UnresolvedObject.objectId),o=(await Wt(this,Qt).getObjects(r)).filter(a=>a!==null),s=new Map(o.map(a=>[a.objectId,a]));for(const a of t.inputs){if(!a.UnresolvedObject)continue;const c=s.get(a.UnresolvedObject.objectId);c&&(c.initialSharedVersion&&!a.UnresolvedObject.initialSharedVersion?a.UnresolvedObject.initialSharedVersion=c.initialSharedVersion:(c.version&&!a.UnresolvedObject.version&&(a.UnresolvedObject.version=c.version),c.digest&&!a.UnresolvedObject.digest&&(a.UnresolvedObject.digest=c.digest)))}await Promise.all(t.commands.map(async a=>{if(a.MoveCall){const c=await this.getMoveFunctionDefinition({package:a.MoveCall.package,module:a.MoveCall.module,function:a.MoveCall.function});c&&(a.MoveCall._argumentTypes=c.parameters)}})),await n(),await Promise.all(t.commands.map(async a=>{var c;(c=a.MoveCall)!=null&&c._argumentTypes&&await Wt(this,Qt).addMoveFunctionDefinition({package:a.MoveCall.package,module:a.MoveCall.module,function:a.MoveCall.function,parameters:a.MoveCall._argumentTypes})}))}}async clear(){await Wt(this,Qt).clear()}async getMoveFunctionDefinition(t){return Wt(this,Qt).getMoveFunctionDefinition(t)}async getObjects(t){return Wt(this,Qt).getObjects(t)}async deleteObjects(t){return Wt(this,Qt).deleteObjects(t)}async clearOwnedObjects(){await Wt(this,Qt).clear("OwnedObject")}async clearCustom(){await Wt(this,Qt).clear("Custom")}async getCustom(t){return Wt(this,Qt).getCustom(t)}async setCustom(t,i){return Wt(this,Qt).setCustom(t,i)}async deleteCustom(t){return Wt(this,Qt).deleteCustom(t)}async applyEffects(t){if(!t.V2)throw new Error(`Unsupported transaction effects version ${t.$kind}`);const{lamportVersion:i,changedObjects:n}=t.V2,r=[],o=[];n.map(async([s,a])=>{var c;if(a.outputState.NotExist)await Wt(this,Qt).deleteObject(s);else if(a.outputState.ObjectWrite){const[d,u]=a.outputState.ObjectWrite;o.push({objectId:s,digest:d,version:i,owner:u.AddressOwner??u.ObjectOwner??null,initialSharedVersion:((c=u.Shared)==null?void 0:c.initialSharedVersion)??null})}}),await Promise.all([Wt(this,Qt).addObjects(o),Wt(this,Qt).deleteObjects(r)])}}Qt=new WeakMap;var ou=e=>{throw TypeError(e)},su=(e,t,i)=>t.has(e)||ou("Cannot "+i),Yr=(e,t,i)=>(su(e,t,"read from private field"),i?i.call(e):t.get(e)),sl=(e,t,i)=>t.has(e)?ou("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),la=(e,t,i,n)=>(su(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),vr,kr;class au{constructor({client:t,...i}){sl(this,vr),sl(this,kr,null),la(this,vr,t),this.cache=new ru(i)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:t,...i}){return t.addBuildPlugin(this.cache.asPlugin()),t.build({client:Yr(this,vr),...i})}async executeTransaction({transaction:t,options:i,...n}){const r=jo(t)?await this.buildTransaction({transaction:t}):t,o=await Yr(this,vr).executeTransactionBlock({...n,transactionBlock:r,options:{...i,showRawEffects:!0}});if(o.rawEffects){const s=de.TransactionEffects.parse(Uint8Array.from(o.rawEffects));await this.applyEffects(s)}return o}async signAndExecuteTransaction({options:t,transaction:i,...n}){i.setSenderIfNotSet(n.signer.toSuiAddress());const r=await this.buildTransaction({transaction:i}),{signature:o}=await n.signer.signTransaction(r);return await this.executeTransaction({transaction:r,signature:o,options:t})}async applyEffects(t){var i;la(this,kr,((i=t.V2)==null?void 0:i.transactionDigest)??null),await this.cache.applyEffects(t)}async waitForLastTransaction(){Yr(this,kr)&&(await Yr(this,vr).waitForTransaction({digest:Yr(this,kr)}),la(this,kr,null))}}vr=new WeakMap;kr=new WeakMap;var cu=e=>{throw TypeError(e)},Fp=(e,t,i)=>t.has(e)||cu("Cannot "+i),Ni=(e,t,i)=>(Fp(e,t,"read from private field"),i?i.call(e):t.get(e)),lu=(e,t,i)=>t.has(e)?cu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),bn,Qn;class du{constructor(){lu(this,bn,[])}async runTask(t){return new Promise((i,n)=>{Ni(this,bn).push(()=>{t().finally(()=>{Ni(this,bn).shift(),Ni(this,bn).length>0&&Ni(this,bn)[0]()}).then(i,n)}),Ni(this,bn).length===1&&Ni(this,bn)[0]()})}}bn=new WeakMap;class Up{constructor(t){lu(this,Qn,[]),this.activeTasks=0,this.maxTasks=t}runTask(t){return new Promise((i,n)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,t().finally(()=>{Ni(this,Qn).length>0?Ni(this,Qn).shift()():this.activeTasks--}).then(i,n)):Ni(this,Qn).push(()=>{t().finally(()=>{Ni(this,Qn).length>0?Ni(this,Qn).shift()():this.activeTasks--}).then(i,n)})})}}Qn=new WeakMap;var uu=e=>{throw TypeError(e)},fu=(e,t,i)=>t.has(e)||uu("Cannot "+i),li=(e,t,i)=>(fu(e,t,"read from private field"),i?i.call(e):t.get(e)),eo=(e,t,i)=>t.has(e)?uu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),al=(e,t,i,n)=>(fu(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),is,so,Oi,Da,ns;class Kp{constructor({signer:t,...i}){eo(this,is,new du),eo(this,so),eo(this,Oi),eo(this,Da,async n=>{if(!n.V2)return;const r=Cc(n).ref;r?li(this,Oi).cache.setCustom("gasCoin",r):li(this,Oi).cache.deleteCustom("gasCoin")}),eo(this,ns,async n=>{const r=await li(this,Oi).cache.getCustom("gasCoin"),o=$.from(n);return r&&o.setGasPayment([r]),o.setSenderIfNotSet(li(this,so).toSuiAddress()),li(this,Oi).buildTransaction({transaction:o})}),al(this,so,t),al(this,Oi,new au({client:i.client,cache:i.cache}))}async applyEffects(t){return Promise.all([li(this,Da).call(this,t),li(this,Oi).cache.applyEffects(t)])}async buildTransaction(t){return li(this,is).runTask(()=>li(this,ns).call(this,t))}resetCache(){return li(this,Oi).reset()}waitForLastTransaction(){return li(this,Oi).waitForLastTransaction()}executeTransaction(t){return li(this,is).runTask(async()=>{const i=jo(t)?await li(this,ns).call(this,t):t,{signature:n}=await li(this,so).signTransaction(i),r=await li(this,Oi).executeTransaction({signature:n,transaction:i}).catch(async a=>{throw await this.resetCache(),a}),o=Uint8Array.from(r.rawEffects),s=de.TransactionEffects.parse(o);return await this.applyEffects(s),{digest:r.digest,effects:Ht(o)}})}}is=new WeakMap;so=new WeakMap;Oi=new WeakMap;Da=new WeakMap;ns=new WeakMap;function Cc(e){if(!e.V2)throw new Error("Unexpected effects version");const t=e.V2.changedObjects[e.V2.gasObjectIndex];if(!t)throw new Error("Gas object not found in effects");const[i,{outputState:n}]=t;if(!n.ObjectWrite)throw new Error("Unexpected gas object state");const[r,o]=n.ObjectWrite;return{ref:{objectId:i,digest:r,version:e.V2.lamportVersion},owner:o.AddressOwner||o.ObjectOwner}}var hu=e=>{throw TypeError(e)},Ac=(e,t,i)=>t.has(e)||hu("Cannot "+i),oe=(e,t,i)=>(Ac(e,t,"read from private field"),i?i.call(e):t.get(e)),zt=(e,t,i)=>t.has(e)?hu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),$t=(e,t,i,n)=>(Ac(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Ti=(e,t,i)=>(Ac(e,t,"access private method"),i),cl=(e,t,i,n)=>({set _(r){$t(e,t,r,i)},get _(){return oe(e,t,n)}}),Cn,Ji,bs,Co,fo,Ao,ws,jr,ui,An,ar,nr,xc,rs,xo,Sr,qr,sn,hi,pu,_u,So,Sc,mu,$a,gu;const to={coinBatchSize:20,initialCoinBalance:200000000n,minimumCoinBalance:50000000n,maxPoolSize:50,epochBoundaryWindow:1e3};class Vp{constructor(t){zt(this,hi),zt(this,Cn),zt(this,Ji),zt(this,bs),zt(this,Co),zt(this,fo),zt(this,Ao),zt(this,ws),zt(this,jr),zt(this,ui),zt(this,An,[]),zt(this,ar),zt(this,nr,new Map),zt(this,xc,new du),zt(this,rs),zt(this,xo,null),zt(this,Sr,null),zt(this,qr,0),zt(this,sn,null),$t(this,Cn,t.signer),$t(this,Ji,t.client),$t(this,bs,t.coinBatchSize??to.coinBatchSize),$t(this,Co,t.initialCoinBalance??to.initialCoinBalance),$t(this,fo,t.minimumCoinBalance??to.minimumCoinBalance),$t(this,ws,t.defaultGasBudget??oe(this,fo)),$t(this,Ao,t.epochBoundaryWindow??to.epochBoundaryWindow),$t(this,jr,t.maxPoolSize??to.maxPoolSize),$t(this,ar,new au({client:t.client,cache:t.cache})),$t(this,rs,new Up(oe(this,jr))),$t(this,ui,t.sourceCoins?new Map(t.sourceCoins.map(i=>[i,null])):null)}resetCache(){return $t(this,sn,null),Ti(this,hi,So).call(this,()=>oe(this,ar).reset())}async waitForLastTransaction(){await Ti(this,hi,So).call(this,()=>Ti(this,hi,Sc).call(this))}async executeTransaction(t){const{promise:i,resolve:n,reject:r}=zp(),o=await Ti(this,hi,pu).call(this,t),s=()=>{oe(this,rs).runTask(()=>Ti(this,hi,_u).call(this,t,o).then(n,r))},a=new Set;return o.forEach(c=>{oe(this,nr).get(c)?(a.add(c),oe(this,nr).get(c).push(()=>{a.delete(c),a.size===0&&s()})):oe(this,nr).set(c,[])}),a.size===0&&s(),i}}Cn=new WeakMap;Ji=new WeakMap;bs=new WeakMap;Co=new WeakMap;fo=new WeakMap;Ao=new WeakMap;ws=new WeakMap;jr=new WeakMap;ui=new WeakMap;An=new WeakMap;ar=new WeakMap;nr=new WeakMap;xc=new WeakMap;rs=new WeakMap;xo=new WeakMap;Sr=new WeakMap;qr=new WeakMap;sn=new WeakMap;hi=new WeakSet;pu=async function(e){const t=new Set;let i=!1;return e.addSerializationPlugin(async(n,r,o)=>{await o(),!i&&(i=!0,n.inputs.forEach(s=>{var a,c,d,u,m;(c=(a=s.Object)==null?void 0:a.ImmOrOwnedObject)!=null&&c.objectId?t.add(s.Object.ImmOrOwnedObject.objectId):(u=(d=s.Object)==null?void 0:d.Receiving)!=null&&u.objectId?t.add(s.Object.Receiving.objectId):(m=s.UnresolvedObject)!=null&&m.objectId&&!s.UnresolvedObject.initialSharedVersion&&t.add(s.UnresolvedObject.objectId)}))}),await e.prepareForSerialization({client:oe(this,Ji)}),t};_u=async function(e,t){var n;let i;try{e.setSenderIfNotSet(oe(this,Cn).toSuiAddress()),await oe(this,xc).runTask(async()=>{const m=e.getData();m.gasData.price||e.setGasPrice(await Ti(this,hi,$a).call(this)),m.gasData.budget||e.setGasBudget(oe(this,ws)),await Ti(this,hi,So).call(this),i=await Ti(this,hi,mu).call(this),cl(this,qr)._++,e.setGasPayment([{objectId:i.id,version:i.version,digest:i.digest}]),await oe(this,ar).buildTransaction({transaction:e,onlyTransactionKind:!0})});const r=await e.build({client:oe(this,Ji)}),{signature:o}=await oe(this,Cn).signTransaction(r),s=await oe(this,ar).executeTransaction({transaction:r,signature:o,options:{showEffects:!0}}),a=Uint8Array.from(s.rawEffects),c=de.TransactionEffects.parse(a),d=Cc(c),u=(n=c.V2)==null?void 0:n.gasUsed;if(i&&u&&d.owner===oe(this,Cn).toSuiAddress()){const m=BigInt(u.computationCost)+BigInt(u.storageCost)+BigInt(u.storageCost)-BigInt(u.storageRebate);let g=!1;new gi(e.getData()).mapArguments(k=>(k.$kind==="GasCoin"&&(g=!0),k)),!g&&i.balance>=oe(this,fo)?oe(this,An).push({id:d.ref.objectId,version:d.ref.version,digest:d.ref.digest,balance:i.balance-m}):(oe(this,ui)||$t(this,ui,new Map),oe(this,ui).set(d.ref.objectId,d.ref))}return $t(this,xo,s.digest),{digest:s.digest,effects:Ht(a)}}catch(r){throw i&&(oe(this,ui)||$t(this,ui,new Map),oe(this,ui).set(i.id,null)),await Ti(this,hi,So).call(this,async()=>{await Promise.all([oe(this,ar).cache.deleteObjects([...t]),Ti(this,hi,Sc).call(this)])}),r}finally{t.forEach(r=>{const o=oe(this,nr).get(r);o&&o.length>0?o.shift()():o&&oe(this,nr).delete(r)}),cl(this,qr)._--}};So=async function(e){oe(this,Sr)&&await oe(this,Sr),$t(this,Sr,(e==null?void 0:e().then(()=>{$t(this,Sr,null)},()=>{}))??null)};Sc=async function(){const e=oe(this,xo);e&&($t(this,xo,null),await oe(this,Ji).waitForTransaction({digest:e}))};mu=async function(){if(oe(this,An).length===0&&oe(this,qr)<=oe(this,jr)&&await Ti(this,hi,gu).call(this),oe(this,An).length===0)throw new Error("No coins available");return oe(this,An).shift()};$a=async function(){if((oe(this,sn)?oe(this,sn).expiration-oe(this,Ao)-Date.now():0)>0)return oe(this,sn).price;if(oe(this,sn)){const i=Math.max(oe(this,sn).expiration+oe(this,Ao)-Date.now(),1e3);await new Promise(n=>setTimeout(n,i))}const t=await oe(this,Ji).getLatestSuiSystemState();return $t(this,sn,{price:BigInt(t.referenceGasPrice),expiration:Number.parseInt(t.epochStartTimestampMs,10)+Number.parseInt(t.epochDurationMs,10)}),Ti(this,hi,$a).call(this)};gu=async function(){var d;const e=Math.min(oe(this,bs),oe(this,jr)-(oe(this,An).length+oe(this,qr))+1);if(e===0)return;const t=new $,i=oe(this,Cn).toSuiAddress();if(t.setSender(i),oe(this,ui)){const u=[],m=[];for(const[g,k]of oe(this,ui))k?u.push(k):m.push(g);if(m.length>0){const g=await oe(this,Ji).multiGetObjects({ids:m});u.push(...g.filter(k=>k.data!==null).map(({data:k})=>({objectId:k.objectId,version:k.version,digest:k.digest})))}t.setGasPayment(u),$t(this,ui,new Map)}const n=new Array(e).fill(oe(this,Co)),r=t.splitCoins(t.gas,n),o=[];for(let u=0;u<n.length;u++)o.push(r[u]);t.transferObjects(o,i),await this.waitForLastTransaction();const s=await oe(this,Ji).signAndExecuteTransaction({transaction:t,signer:oe(this,Cn),options:{showRawEffects:!0}}),a=de.TransactionEffects.parse(Uint8Array.from(s.rawEffects));(d=a.V2)==null||d.changedObjects.forEach(([u,{outputState:m}],g)=>{var k;g===((k=a.V2)==null?void 0:k.gasObjectIndex)||!m.ObjectWrite||oe(this,An).push({id:u,version:a.V2.lamportVersion,digest:m.ObjectWrite[0],balance:BigInt(oe(this,Co))})}),oe(this,ui)||$t(this,ui,new Map);const c=Cc(a).ref;oe(this,ui).set(c.objectId,c),await oe(this,Ji).waitForTransaction({digest:s.digest})};function zp(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}const ys="CoinWithBalance",ll=Ns("0x2::sui::SUI");function Wp({type:e=ll,balance:t,useGasCoin:i=!0}){return n=>{n.addIntentResolver(ys,Hp);const r=e==="gas"?e:Ns(e);return n.add(ji.Intent({name:ys,inputs:{},data:{type:r===ll&&i?"gas":r,balance:BigInt(t)}}))}}const Gp=H({type:Fe(),balance:Ds()});async function Hp(e,t,i){var d,u;const n=new Set,r=new Map;if(!e.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const m of e.commands)if(m.$kind==="$Intent"&&m.$Intent.name===ys){const{type:g,balance:k}=Nt(Gp,m.$Intent.data);g!=="gas"&&n.add(g),r.set(g,(r.get(g)??0n)+k)}const o=new Set;for(const m of e.inputs)(d=m.Object)!=null&&d.ImmOrOwnedObject&&o.add(m.Object.ImmOrOwnedObject.objectId),(u=m.UnresolvedObject)!=null&&u.objectId&&o.add(m.UnresolvedObject.objectId);const s=new Map,a=Wr(t);await Promise.all([...n].map(async m=>{s.set(m,await Xp({coinType:m,balance:r.get(m),client:a,owner:e.sender,usedIds:o}))}));const c=new Map;c.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[m,g]of e.commands.entries()){if(g.$kind!=="$Intent"||g.$Intent.name!==ys)continue;const{type:k,balance:x}=g.$Intent.data,M=[];if(!c.has(k)){const[I,...E]=s.get(k).map(B=>e.addInput("object",Mi.ObjectRef({objectId:B.coinObjectId,digest:B.digest,version:B.version})));E.length>0&&M.push(ji.MergeCoins(I,E)),c.set(k,I)}M.push(ji.SplitCoins(c.get(k),[e.addInput("pure",Mi.Pure(de.u64().serialize(x)))])),e.replaceCommand(m,M),e.mapArguments(I=>I.$kind==="Result"&&I.Result===m?{$kind:"NestedResult",NestedResult:[m+M.length-1,0]}:I)}return i()}async function Xp({coinType:e,balance:t,client:i,owner:n,usedIds:r}){let o=t;const s=[];return a();async function a(c=null){const{data:d,hasNextPage:u,nextCursor:m}=await i.getCoins({owner:n,coinType:e,cursor:c}),g=d.sort((k,x)=>Number(BigInt(x.balance)-BigInt(k.balance)));for(const k of g){if(r.has(k.coinObjectId))continue;const x=BigInt(k.balance);if(s.push(k),o-=x,o<=0)return s}if(u)return a(m);throw new Error(`Not enough coins of type ${e} to satisfy requested balance`)}}const Jp={pure:Hd(e=>t=>t.pure(e)),object:e=>t=>t.object(e),sharedObjectRef:(...e)=>t=>t.sharedObjectRef(...e),objectRef:(...e)=>t=>t.objectRef(...e),receivingRef:(...e)=>t=>t.receivingRef(...e)},Zp=Object.freeze(Object.defineProperty({__proto__:null,Arguments:Jp,AsyncCache:nu,Commands:ji,Inputs:Mi,ObjectCache:ru,ParallelTransactionExecutor:Vp,SerialTransactionExecutor:Kp,Transaction:$,TransactionDataBuilder:gi,UpgradePolicy:Wd,coinWithBalance:Wp,getPureBcsSchema:_s,isTransaction:jo,normalizedTypeToMoveTypeSignature:Ud},Symbol.toStringTag,{value:"Module"}));let Lo;const Qp=new Uint8Array(16);function Yp(){if(!Lo&&(Lo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Lo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lo(Qp)}const Yt=[];for(let e=0;e<256;++e)Yt.push((e+256).toString(16).slice(1));function e_(e,t=0){return Yt[e[t+0]]+Yt[e[t+1]]+Yt[e[t+2]]+Yt[e[t+3]]+"-"+Yt[e[t+4]]+Yt[e[t+5]]+"-"+Yt[e[t+6]]+Yt[e[t+7]]+"-"+Yt[e[t+8]]+Yt[e[t+9]]+"-"+Yt[e[t+10]]+Yt[e[t+11]]+Yt[e[t+12]]+Yt[e[t+13]]+Yt[e[t+14]]+Yt[e[t+15]]}const t_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),dl={randomUUID:t_};function Fo(e,t,i){if(dl.randomUUID&&!t&&!e)return dl.randomUUID();e=e||{};const n=e.random||(e.rng||Yp)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){i=i||0;for(let r=0;r<16;++r)t[i+r]=n[r];return t}return e_(n)}function bu(e,t){return function(){return e.apply(t,arguments)}}const{toString:i_}=Object.prototype,{getPrototypeOf:Tc}=Object,qs=(e=>t=>{const i=i_.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Wi=e=>(e=e.toLowerCase(),t=>qs(t)===e),Ls=e=>t=>typeof t===e,{isArray:Gr}=Array,To=Ls("undefined");function n_(e){return e!==null&&!To(e)&&e.constructor!==null&&!To(e.constructor)&&wi(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const wu=Wi("ArrayBuffer");function r_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&wu(e.buffer),t}const o_=Ls("string"),wi=Ls("function"),yu=Ls("number"),Fs=e=>e!==null&&typeof e=="object",s_=e=>e===!0||e===!1,os=e=>{if(qs(e)!=="object")return!1;const t=Tc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},a_=Wi("Date"),c_=Wi("File"),l_=Wi("Blob"),d_=Wi("FileList"),u_=e=>Fs(e)&&wi(e.pipe),f_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||wi(e.append)&&((t=qs(e))==="formdata"||t==="object"&&wi(e.toString)&&e.toString()==="[object FormData]"))},h_=Wi("URLSearchParams"),[p_,__,m_,g_]=["ReadableStream","Request","Response","Headers"].map(Wi),b_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Eo(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let n,r;if(typeof e!="object"&&(e=[e]),Gr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const o=i?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let a;for(n=0;n<s;n++)a=o[n],t.call(null,e[a],a,e)}}function vu(e,t){t=t.toLowerCase();const i=Object.keys(e);let n=i.length,r;for(;n-- >0;)if(r=i[n],t===r.toLowerCase())return r;return null}const rr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ku=e=>!To(e)&&e!==rr;function qa(){const{caseless:e}=ku(this)&&this||{},t={},i=(n,r)=>{const o=e&&vu(t,r)||r;os(t[o])&&os(n)?t[o]=qa(t[o],n):os(n)?t[o]=qa({},n):Gr(n)?t[o]=n.slice():t[o]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Eo(arguments[n],i);return t}const w_=(e,t,i,{allOwnKeys:n}={})=>(Eo(t,(r,o)=>{i&&wi(r)?e[o]=bu(r,i):e[o]=r},{allOwnKeys:n}),e),y_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),v_=(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},k_=(e,t,i,n)=>{let r,o,s;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)s=r[o],(!n||n(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=i!==!1&&Tc(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},C_=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return n!==-1&&n===i},A_=e=>{if(!e)return null;if(Gr(e))return e;let t=e.length;if(!yu(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},x_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Tc(Uint8Array)),S_=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},T_=(e,t)=>{let i;const n=[];for(;(i=e.exec(t))!==null;)n.push(i);return n},M_=Wi("HTMLFormElement"),O_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,r){return n.toUpperCase()+r}),ul=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),I_=Wi("RegExp"),Cu=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};Eo(i,(r,o)=>{let s;(s=t(r,o,e))!==!1&&(n[o]=s||r)}),Object.defineProperties(e,n)},P_=e=>{Cu(e,(t,i)=>{if(wi(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=e[i];if(wi(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},j_=(e,t)=>{const i={},n=r=>{r.forEach(o=>{i[o]=!0})};return Gr(e)?n(e):n(String(e).split(t)),i},E_=()=>{},B_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,da="abcdefghijklmnopqrstuvwxyz",fl="0123456789",Au={DIGIT:fl,ALPHA:da,ALPHA_DIGIT:da+da.toUpperCase()+fl},N_=(e=16,t=Au.ALPHA_DIGIT)=>{let i="";const{length:n}=t;for(;e--;)i+=t[Math.random()*n|0];return i};function R_(e){return!!(e&&wi(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const D_=e=>{const t=new Array(10),i=(n,r)=>{if(Fs(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;const o=Gr(n)?[]:{};return Eo(n,(s,a)=>{const c=i(s,r+1);!To(c)&&(o[a]=c)}),t[r]=void 0,o}}return n};return i(e,0)},$_=Wi("AsyncFunction"),q_=e=>e&&(Fs(e)||wi(e))&&wi(e.then)&&wi(e.catch),xu=((e,t)=>e?setImmediate:t?((i,n)=>(rr.addEventListener("message",({source:r,data:o})=>{r===rr&&o===i&&n.length&&n.shift()()},!1),r=>{n.push(r),rr.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",wi(rr.postMessage)),L_=typeof queueMicrotask<"u"?queueMicrotask.bind(rr):typeof process<"u"&&process.nextTick||xu,R={isArray:Gr,isArrayBuffer:wu,isBuffer:n_,isFormData:f_,isArrayBufferView:r_,isString:o_,isNumber:yu,isBoolean:s_,isObject:Fs,isPlainObject:os,isReadableStream:p_,isRequest:__,isResponse:m_,isHeaders:g_,isUndefined:To,isDate:a_,isFile:c_,isBlob:l_,isRegExp:I_,isFunction:wi,isStream:u_,isURLSearchParams:h_,isTypedArray:x_,isFileList:d_,forEach:Eo,merge:qa,extend:w_,trim:b_,stripBOM:y_,inherits:v_,toFlatObject:k_,kindOf:qs,kindOfTest:Wi,endsWith:C_,toArray:A_,forEachEntry:S_,matchAll:T_,isHTMLForm:M_,hasOwnProperty:ul,hasOwnProp:ul,reduceDescriptors:Cu,freezeMethods:P_,toObjectSet:j_,toCamelCase:O_,noop:E_,toFiniteNumber:B_,findKey:vu,global:rr,isContextDefined:ku,ALPHABET:Au,generateString:N_,isSpecCompliantForm:R_,toJSONObject:D_,isAsyncFn:$_,isThenable:q_,setImmediate:xu,asap:L_};function ye(e,t,i,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}R.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const Su=ye.prototype,Tu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Tu[e]={value:e}});Object.defineProperties(ye,Tu);Object.defineProperty(Su,"isAxiosError",{value:!0});ye.from=(e,t,i,n,r,o)=>{const s=Object.create(Su);return R.toFlatObject(e,s,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ye.call(s,e.message,t,i,n,r),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const F_=null;function La(e){return R.isPlainObject(e)||R.isArray(e)}function Mu(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function hl(e,t,i){return e?e.concat(t).map(function(r,o){return r=Mu(r),!i&&o?"["+r+"]":r}).join(i?".":""):t}function U_(e){return R.isArray(e)&&!e.some(La)}const K_=R.toFlatObject(R,{},null,function(t){return/^is[A-Z]/.test(t)});function Us(e,t,i){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=R.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,I){return!R.isUndefined(I[M])});const n=i.metaTokens,r=i.visitor||u,o=i.dots,s=i.indexes,c=(i.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(t);if(!R.isFunction(r))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(R.isDate(x))return x.toISOString();if(!c&&R.isBlob(x))throw new ye("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(x)||R.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,M,I){let E=x;if(x&&!I&&typeof x=="object"){if(R.endsWith(M,"{}"))M=n?M:M.slice(0,-2),x=JSON.stringify(x);else if(R.isArray(x)&&U_(x)||(R.isFileList(x)||R.endsWith(M,"[]"))&&(E=R.toArray(x)))return M=Mu(M),E.forEach(function(N,L){!(R.isUndefined(N)||N===null)&&t.append(s===!0?hl([M],L,o):s===null?M:M+"[]",d(N))}),!1}return La(x)?!0:(t.append(hl(I,M,o),d(x)),!1)}const m=[],g=Object.assign(K_,{defaultVisitor:u,convertValue:d,isVisitable:La});function k(x,M){if(!R.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+M.join("."));m.push(x),R.forEach(x,function(E,B){(!(R.isUndefined(E)||E===null)&&r.call(t,E,R.isString(B)?B.trim():B,M,g))===!0&&k(E,M?M.concat(B):[B])}),m.pop()}}if(!R.isObject(e))throw new TypeError("data must be an object");return k(e),t}function pl(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Mc(e,t){this._pairs=[],e&&Us(e,this,t)}const Ou=Mc.prototype;Ou.append=function(t,i){this._pairs.push([t,i])};Ou.toString=function(t){const i=t?function(n){return t.call(this,n,pl)}:pl;return this._pairs.map(function(r){return i(r[0])+"="+i(r[1])},"").join("&")};function V_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Iu(e,t,i){if(!t)return e;const n=i&&i.encode||V_,r=i&&i.serialize;let o;if(r?o=r(t,i):o=R.isURLSearchParams(t)?t.toString():new Mc(t,i).toString(n),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class z_{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){R.forEach(this.handlers,function(n){n!==null&&t(n)})}}const _l=z_,Pu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},W_=typeof URLSearchParams<"u"?URLSearchParams:Mc,G_=typeof FormData<"u"?FormData:null,H_=typeof Blob<"u"?Blob:null,X_={isBrowser:!0,classes:{URLSearchParams:W_,FormData:G_,Blob:H_},protocols:["http","https","file","blob","url","data"]},Oc=typeof window<"u"&&typeof document<"u",Fa=typeof navigator=="object"&&navigator||void 0,J_=Oc&&(!Fa||["ReactNative","NativeScript","NS"].indexOf(Fa.product)<0),Z_=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Q_=Oc&&window.location.href||"http://localhost",Y_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Oc,hasStandardBrowserEnv:J_,hasStandardBrowserWebWorkerEnv:Z_,navigator:Fa,origin:Q_},Symbol.toStringTag,{value:"Module"})),yi={...Y_,...X_};function em(e,t){return Us(e,new yi.classes.URLSearchParams,Object.assign({visitor:function(i,n,r,o){return yi.isNode&&R.isBuffer(i)?(this.append(n,i.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function tm(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function im(e){const t={},i=Object.keys(e);let n;const r=i.length;let o;for(n=0;n<r;n++)o=i[n],t[o]=e[o];return t}function ju(e){function t(i,n,r,o){let s=i[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),c=o>=i.length;return s=!s&&R.isArray(r)?r.length:s,c?(R.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!a):((!r[s]||!R.isObject(r[s]))&&(r[s]=[]),t(i,n,r[s],o)&&R.isArray(r[s])&&(r[s]=im(r[s])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const i={};return R.forEachEntry(e,(n,r)=>{t(tm(n),r,i,0)}),i}return null}function nm(e,t,i){if(R.isString(e))try{return(t||JSON.parse)(e),R.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(e)}const Ic={transitional:Pu,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const n=i.getContentType()||"",r=n.indexOf("application/json")>-1,o=R.isObject(t);if(o&&R.isHTMLForm(t)&&(t=new FormData(t)),R.isFormData(t))return r?JSON.stringify(ju(t)):t;if(R.isArrayBuffer(t)||R.isBuffer(t)||R.isStream(t)||R.isFile(t)||R.isBlob(t)||R.isReadableStream(t))return t;if(R.isArrayBufferView(t))return t.buffer;if(R.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return em(t,this.formSerializer).toString();if((a=R.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Us(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||r?(i.setContentType("application/json",!1),nm(t)):t}],transformResponse:[function(t){const i=this.transitional||Ic.transitional,n=i&&i.forcedJSONParsing,r=this.responseType==="json";if(R.isResponse(t)||R.isReadableStream(t))return t;if(t&&R.isString(t)&&(n&&!this.responseType||r)){const s=!(i&&i.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?ye.from(a,ye.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yi.classes.FormData,Blob:yi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],e=>{Ic.headers[e]={}});const Pc=Ic,rm=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),om=e=>{const t={};let i,n,r;return e&&e.split(`
`).forEach(function(s){r=s.indexOf(":"),i=s.substring(0,r).trim().toLowerCase(),n=s.substring(r+1).trim(),!(!i||t[i]&&rm[i])&&(i==="set-cookie"?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)}),t},ml=Symbol("internals");function io(e){return e&&String(e).trim().toLowerCase()}function ss(e){return e===!1||e==null?e:R.isArray(e)?e.map(ss):String(e)}function sm(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}const am=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ua(e,t,i,n,r){if(R.isFunction(n))return n.call(this,t,i);if(r&&(t=i),!!R.isString(t)){if(R.isString(n))return t.indexOf(n)!==-1;if(R.isRegExp(n))return n.test(t)}}function cm(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n)}function lm(e,t){const i=R.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+i,{value:function(r,o,s){return this[n].call(this,t,r,o,s)},configurable:!0})})}class Ks{constructor(t){t&&this.set(t)}set(t,i,n){const r=this;function o(a,c,d){const u=io(c);if(!u)throw new Error("header name must be a non-empty string");const m=R.findKey(r,u);(!m||r[m]===void 0||d===!0||d===void 0&&r[m]!==!1)&&(r[m||c]=ss(a))}const s=(a,c)=>R.forEach(a,(d,u)=>o(d,u,c));if(R.isPlainObject(t)||t instanceof this.constructor)s(t,i);else if(R.isString(t)&&(t=t.trim())&&!am(t))s(om(t),i);else if(R.isHeaders(t))for(const[a,c]of t.entries())o(c,a,n);else t!=null&&o(i,t,n);return this}get(t,i){if(t=io(t),t){const n=R.findKey(this,t);if(n){const r=this[n];if(!i)return r;if(i===!0)return sm(r);if(R.isFunction(i))return i.call(this,r,n);if(R.isRegExp(i))return i.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=io(t),t){const n=R.findKey(this,t);return!!(n&&this[n]!==void 0&&(!i||ua(this,this[n],n,i)))}return!1}delete(t,i){const n=this;let r=!1;function o(s){if(s=io(s),s){const a=R.findKey(n,s);a&&(!i||ua(n,n[a],a,i))&&(delete n[a],r=!0)}}return R.isArray(t)?t.forEach(o):o(t),r}clear(t){const i=Object.keys(this);let n=i.length,r=!1;for(;n--;){const o=i[n];(!t||ua(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const i=this,n={};return R.forEach(this,(r,o)=>{const s=R.findKey(n,o);if(s){i[s]=ss(r),delete i[o];return}const a=t?cm(o):String(o).trim();a!==o&&delete i[o],i[a]=ss(r),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return R.forEach(this,(n,r)=>{n!=null&&n!==!1&&(i[r]=t&&R.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const n=new this(t);return i.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[ml]=this[ml]={accessors:{}}).accessors,r=this.prototype;function o(s){const a=io(s);n[a]||(lm(r,s),n[a]=!0)}return R.isArray(t)?t.forEach(o):o(t),this}}Ks.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(Ks.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[i]=n}}});R.freezeMethods(Ks);const Li=Ks;function fa(e,t){const i=this||Pc,n=t||i,r=Li.from(n.headers);let o=n.data;return R.forEach(e,function(a){o=a.call(i,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function Eu(e){return!!(e&&e.__CANCEL__)}function Hr(e,t,i){ye.call(this,e??"canceled",ye.ERR_CANCELED,t,i),this.name="CanceledError"}R.inherits(Hr,ye,{__CANCEL__:!0});function Bu(e,t,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(new ye("Request failed with status code "+i.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function dm(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function um(e,t){e=e||10;const i=new Array(e),n=new Array(e);let r=0,o=0,s;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[o];s||(s=d),i[r]=c,n[r]=d;let m=o,g=0;for(;m!==r;)g+=i[m++],m=m%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),d-s<t)return;const k=u&&d-u;return k?Math.round(g*1e3/k):void 0}}function fm(e,t){let i=0,n=1e3/t,r,o;const s=(d,u=Date.now())=>{i=u,r=null,o&&(clearTimeout(o),o=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),m=u-i;m>=n?s(d,u):(r=d,o||(o=setTimeout(()=>{o=null,s(r)},n-m)))},()=>r&&s(r)]}const vs=(e,t,i=3)=>{let n=0;const r=um(50,250);return fm(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,c=s-n,d=r(c),u=s<=a;n=s;const m={loaded:s,total:a,progress:a?s/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&u?(a-s)/d:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(m)},i)},gl=(e,t)=>{const i=e!=null;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},bl=e=>(...t)=>R.asap(()=>e(...t)),hm=yi.hasStandardBrowserEnv?function(){const t=yi.navigator&&/(msie|trident)/i.test(yi.navigator.userAgent),i=document.createElement("a");let n;function r(o){let s=o;return t&&(i.setAttribute("href",s),s=i.href),i.setAttribute("href",s),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=r(window.location.href),function(s){const a=R.isString(s)?r(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}(),pm=yi.hasStandardBrowserEnv?{write(e,t,i,n,r,o){const s=[e+"="+encodeURIComponent(t)];R.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),R.isString(n)&&s.push("path="+n),R.isString(r)&&s.push("domain="+r),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _m(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function mm(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Nu(e,t){return e&&!_m(t)?mm(e,t):t}const wl=e=>e instanceof Li?{...e}:e;function dr(e,t){t=t||{};const i={};function n(d,u,m){return R.isPlainObject(d)&&R.isPlainObject(u)?R.merge.call({caseless:m},d,u):R.isPlainObject(u)?R.merge({},u):R.isArray(u)?u.slice():u}function r(d,u,m){if(R.isUndefined(u)){if(!R.isUndefined(d))return n(void 0,d,m)}else return n(d,u,m)}function o(d,u){if(!R.isUndefined(u))return n(void 0,u)}function s(d,u){if(R.isUndefined(u)){if(!R.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function a(d,u,m){if(m in t)return n(d,u);if(m in e)return n(void 0,d)}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(d,u)=>r(wl(d),wl(u),!0)};return R.forEach(Object.keys(Object.assign({},e,t)),function(u){const m=c[u]||r,g=m(e[u],t[u],u);R.isUndefined(g)&&m!==a||(i[u]=g)}),i}const Ru=e=>{const t=dr({},e);let{data:i,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:o,headers:s,auth:a}=t;t.headers=s=Li.from(s),t.url=Iu(Nu(t.baseURL,t.url),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(R.isFormData(i)){if(yi.hasStandardBrowserEnv||yi.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...u].join("; "))}}if(yi.hasStandardBrowserEnv&&(n&&R.isFunction(n)&&(n=n(t)),n||n!==!1&&hm(t.url))){const d=r&&o&&pm.read(o);d&&s.set(r,d)}return t},gm=typeof XMLHttpRequest<"u",bm=gm&&function(e){return new Promise(function(i,n){const r=Ru(e);let o=r.data;const s=Li.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=r,u,m,g,k,x;function M(){k&&k(),x&&x(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let I=new XMLHttpRequest;I.open(r.method.toUpperCase(),r.url,!0),I.timeout=r.timeout;function E(){if(!I)return;const N=Li.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),X={data:!a||a==="text"||a==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:N,config:e,request:I};Bu(function(ee){i(ee),M()},function(ee){n(ee),M()},X),I=null}"onloadend"in I?I.onloadend=E:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(E)},I.onabort=function(){I&&(n(new ye("Request aborted",ye.ECONNABORTED,e,I)),I=null)},I.onerror=function(){n(new ye("Network Error",ye.ERR_NETWORK,e,I)),I=null},I.ontimeout=function(){let L=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const X=r.transitional||Pu;r.timeoutErrorMessage&&(L=r.timeoutErrorMessage),n(new ye(L,X.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,e,I)),I=null},o===void 0&&s.setContentType(null),"setRequestHeader"in I&&R.forEach(s.toJSON(),function(L,X){I.setRequestHeader(X,L)}),R.isUndefined(r.withCredentials)||(I.withCredentials=!!r.withCredentials),a&&a!=="json"&&(I.responseType=r.responseType),d&&([g,x]=vs(d,!0),I.addEventListener("progress",g)),c&&I.upload&&([m,k]=vs(c),I.upload.addEventListener("progress",m),I.upload.addEventListener("loadend",k)),(r.cancelToken||r.signal)&&(u=N=>{I&&(n(!N||N.type?new Hr(null,e,I):N),I.abort(),I=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const B=dm(r.url);if(B&&yi.protocols.indexOf(B)===-1){n(new ye("Unsupported protocol "+B+":",ye.ERR_BAD_REQUEST,e));return}I.send(o||null)})},wm=(e,t)=>{let i=new AbortController,n;const r=function(c){if(!n){n=!0,s();const d=c instanceof Error?c:this.reason;i.abort(d instanceof ye?d:new Hr(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{r(new ye(`timeout ${t} of ms exceeded`,ye.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",r):c.unsubscribe(r))}),e=null)};e.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",r));const{signal:a}=i;return a.unsubscribe=s,[a,()=>{o&&clearTimeout(o),o=null}]},ym=wm,vm=function*(e,t){let i=e.byteLength;if(!t||i<t){yield e;return}let n=0,r;for(;n<i;)r=n+t,yield e.slice(n,r),n=r},km=async function*(e,t,i){for await(const n of e)yield*vm(ArrayBuffer.isView(n)?n:await i(String(n)),t)},yl=(e,t,i,n,r)=>{const o=km(e,t,r);let s=0,a,c=d=>{a||(a=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:u,value:m}=await o.next();if(u){c(),d.close();return}let g=m.byteLength;if(i){let k=s+=g;i(k)}d.enqueue(new Uint8Array(m))}catch(u){throw c(u),u}},cancel(d){return c(d),o.return()}},{highWaterMark:2})},Vs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Du=Vs&&typeof ReadableStream=="function",Ua=Vs&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),$u=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Cm=Du&&$u(()=>{let e=!1;const t=new Request(yi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),vl=64*1024,Ka=Du&&$u(()=>R.isReadableStream(new Response("").body)),ks={stream:Ka&&(e=>e.body)};Vs&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ks[t]&&(ks[t]=R.isFunction(e[t])?i=>i[t]():(i,n)=>{throw new ye(`Response type '${t}' is not supported`,ye.ERR_NOT_SUPPORT,n)})})})(new Response);const Am=async e=>{if(e==null)return 0;if(R.isBlob(e))return e.size;if(R.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(R.isArrayBufferView(e)||R.isArrayBuffer(e))return e.byteLength;if(R.isURLSearchParams(e)&&(e=e+""),R.isString(e))return(await Ua(e)).byteLength},xm=async(e,t)=>{const i=R.toFiniteNumber(e.getContentLength());return i??Am(t)},Sm=Vs&&(async e=>{let{url:t,method:i,data:n,signal:r,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:g}=Ru(e);d=d?(d+"").toLowerCase():"text";let[k,x]=r||o||s?ym([r,o],s):[],M,I;const E=()=>{!M&&setTimeout(()=>{k&&k.unsubscribe()}),M=!0};let B;try{if(c&&Cm&&i!=="get"&&i!=="head"&&(B=await xm(u,n))!==0){let ee=new Request(t,{method:"POST",body:n,duplex:"half"}),me;if(R.isFormData(n)&&(me=ee.headers.get("content-type"))&&u.setContentType(me),ee.body){const[be,ie]=gl(B,vs(bl(c)));n=yl(ee.body,vl,be,ie,Ua)}}R.isString(m)||(m=m?"include":"omit");const N="credentials"in Request.prototype;I=new Request(t,{...g,signal:k,method:i.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:N?m:void 0});let L=await fetch(I);const X=Ka&&(d==="stream"||d==="response");if(Ka&&(a||X)){const ee={};["status","statusText","headers"].forEach(z=>{ee[z]=L[z]});const me=R.toFiniteNumber(L.headers.get("content-length")),[be,ie]=a&&gl(me,vs(bl(a),!0))||[];L=new Response(yl(L.body,vl,be,()=>{ie&&ie(),X&&E()},Ua),ee)}d=d||"text";let K=await ks[R.findKey(ks,d)||"text"](L,e);return!X&&E(),x&&x(),await new Promise((ee,me)=>{Bu(ee,me,{data:K,headers:Li.from(L.headers),status:L.status,statusText:L.statusText,config:e,request:I})})}catch(N){throw E(),N&&N.name==="TypeError"&&/fetch/i.test(N.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,e,I),{cause:N.cause||N}):ye.from(N,N&&N.code,e,I)}}),Va={http:F_,xhr:bm,fetch:Sm};R.forEach(Va,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const kl=e=>`- ${e}`,Tm=e=>R.isFunction(e)||e===null||e===!1,qu={getAdapter:e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let i,n;const r={};for(let o=0;o<t;o++){i=e[o];let s;if(n=i,!Tm(i)&&(n=Va[(s=String(i)).toLowerCase()],n===void 0))throw new ye(`Unknown adapter '${s}'`);if(n)break;r[s||"#"+o]=n}if(!n){const o=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?`since :
`+o.map(kl).join(`
`):" "+kl(o[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:Va};function ha(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Hr(null,e)}function Cl(e){return ha(e),e.headers=Li.from(e.headers),e.data=fa.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),qu.getAdapter(e.adapter||Pc.adapter)(e).then(function(n){return ha(e),n.data=fa.call(e,e.transformResponse,n),n.headers=Li.from(n.headers),n},function(n){return Eu(n)||(ha(e),n&&n.response&&(n.response.data=fa.call(e,e.transformResponse,n.response),n.response.headers=Li.from(n.response.headers))),Promise.reject(n)})}const Lu="1.7.5",jc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{jc[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Al={};jc.transitional=function(t,i,n){function r(o,s){return"[Axios v"+Lu+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return(o,s,a)=>{if(t===!1)throw new ye(r(s," has been removed"+(i?" in "+i:"")),ye.ERR_DEPRECATED);return i&&!Al[s]&&(Al[s]=!0,console.warn(r(s," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(o,s,a):!0}};function Mm(e,t,i){if(typeof e!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const o=n[r],s=t[o];if(s){const a=e[o],c=a===void 0||s(a,o,e);if(c!==!0)throw new ye("option "+o+" must be "+c,ye.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ye("Unknown option "+o,ye.ERR_BAD_OPTION)}}const za={assertOptions:Mm,validators:jc},pn=za.validators;class Cs{constructor(t){this.defaults=t,this.interceptors={request:new _l,response:new _l}}async request(t,i){try{return await this._request(t,i)}catch(n){if(n instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=dr(this.defaults,i);const{transitional:n,paramsSerializer:r,headers:o}=i;n!==void 0&&za.assertOptions(n,{silentJSONParsing:pn.transitional(pn.boolean),forcedJSONParsing:pn.transitional(pn.boolean),clarifyTimeoutError:pn.transitional(pn.boolean)},!1),r!=null&&(R.isFunction(r)?i.paramsSerializer={serialize:r}:za.assertOptions(r,{encode:pn.function,serialize:pn.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let s=o&&R.merge(o.common,o[i.method]);o&&R.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),i.headers=Li.concat(s,o);const a=[];let c=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(i)===!1||(c=c&&M.synchronous,a.unshift(M.fulfilled,M.rejected))});const d=[];this.interceptors.response.forEach(function(M){d.push(M.fulfilled,M.rejected)});let u,m=0,g;if(!c){const x=[Cl.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,d),g=x.length,u=Promise.resolve(i);m<g;)u=u.then(x[m++],x[m++]);return u}g=a.length;let k=i;for(m=0;m<g;){const x=a[m++],M=a[m++];try{k=x(k)}catch(I){M.call(this,I);break}}try{u=Cl.call(this,k)}catch(x){return Promise.reject(x)}for(m=0,g=d.length;m<g;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=dr(this.defaults,t);const i=Nu(t.baseURL,t.url);return Iu(i,t.params,t.paramsSerializer)}}R.forEach(["delete","get","head","options"],function(t){Cs.prototype[t]=function(i,n){return this.request(dr(n||{},{method:t,url:i,data:(n||{}).data}))}});R.forEach(["post","put","patch"],function(t){function i(n){return function(o,s,a){return this.request(dr(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Cs.prototype[t]=i(),Cs.prototype[t+"Form"]=i(!0)});const as=Cs;class Ec{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(o){i=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const s=new Promise(a=>{n.subscribe(a),o=a}).then(r);return s.cancel=function(){n.unsubscribe(o)},s},t(function(o,s,a){n.reason||(n.reason=new Hr(o,s,a),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new Ec(function(r){t=r}),cancel:t}}}const Om=Ec;function Im(e){return function(i){return e.apply(null,i)}}function Pm(e){return R.isObject(e)&&e.isAxiosError===!0}const Wa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wa).forEach(([e,t])=>{Wa[t]=e});const jm=Wa;function Fu(e){const t=new as(e),i=bu(as.prototype.request,t);return R.extend(i,as.prototype,t,{allOwnKeys:!0}),R.extend(i,t,null,{allOwnKeys:!0}),i.create=function(r){return Fu(dr(e,r))},i}const Kt=Fu(Pc);Kt.Axios=as;Kt.CanceledError=Hr;Kt.CancelToken=Om;Kt.isCancel=Eu;Kt.VERSION=Lu;Kt.toFormData=Us;Kt.AxiosError=ye;Kt.Cancel=Kt.CanceledError;Kt.all=function(t){return Promise.all(t)};Kt.spread=Im;Kt.isAxiosError=Pm;Kt.mergeConfig=dr;Kt.AxiosHeaders=Li;Kt.formToJSON=e=>ju(R.isHTMLForm(e)?new FormData(e):e);Kt.getAdapter=qu.getAdapter;Kt.HttpStatusCode=jm;Kt.default=Kt;const Em=Kt,Bm="1.6.0",Nm="1.32.0",Rm={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class Uu extends Error{}class Ku extends Uu{constructor(t,i){super(t),this.code=i,this.type=Rm[i]??"ServerError"}}class Dm extends Uu{constructor(t,i,n){super(t),this.status=i,this.statusText=n}}var Vu=e=>{throw TypeError(e)},Bc=(e,t,i)=>t.has(e)||Vu("Cannot "+i),qt=(e,t,i)=>(Bc(e,t,"read from private field"),i?i.call(e):t.get(e)),Hn=(e,t,i)=>t.has(e)?Vu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Er=(e,t,i,n)=>(Bc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),zu=(e,t,i)=>(Bc(e,t,"access private method"),i),$m=(e,t,i,n)=>({set _(r){Er(e,t,r,i)},get _(){return qt(e,t,n)}}),Yn,ho,an,or,Mo,Br,As,Wu,Gu;function qm(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const Lm={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Fm{constructor(t,i={}){if(Hn(this,As),Hn(this,Yn,0),Hn(this,ho,0),Hn(this,an,null),Hn(this,or,null),Hn(this,Mo,new Set),Hn(this,Br,new Map),this.endpoint=t,this.options={...Lm,...i},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=qm(this.endpoint))}async makeRequest(t,i){const n=await zu(this,As,Wu).call(this);return new Promise((r,o)=>{Er(this,Yn,qt(this,Yn)+1),qt(this,Br).set(qt(this,Yn),{resolve:r,reject:o,timeout:setTimeout(()=>{qt(this,Br).delete(qt(this,Yn)),o(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:qt(this,Yn),method:t,params:i}))}).then(({error:r,result:o})=>{if(r)throw new Ku(r.message,r.code);return o})}async subscribe(t){const i=new Um(t);return qt(this,Mo).add(i),await i.subscribe(this),()=>i.unsubscribe(this)}}Yn=new WeakMap;ho=new WeakMap;an=new WeakMap;or=new WeakMap;Mo=new WeakMap;Br=new WeakMap;As=new WeakSet;Wu=function(){return qt(this,or)?qt(this,or):(Er(this,or,new Promise(e=>{var t;(t=qt(this,an))==null||t.close(),Er(this,an,new this.options.WebSocketConstructor(this.endpoint)),qt(this,an).addEventListener("open",()=>{Er(this,ho,0),e(qt(this,an))}),qt(this,an).addEventListener("close",()=>{$m(this,ho)._++,qt(this,ho)<=this.options.maxReconnects&&setTimeout(()=>{zu(this,As,Gu).call(this)},this.options.reconnectTimeout)}),qt(this,an).addEventListener("message",({data:i})=>{let n;try{n=JSON.parse(i)}catch(r){console.error(new Error(`Failed to parse RPC message: ${i}`,{cause:r}));return}if("id"in n&&n.id!=null&&qt(this,Br).has(n.id)){const{resolve:r,timeout:o}=qt(this,Br).get(n.id);clearTimeout(o),r(n)}else if("params"in n){const{params:r}=n;qt(this,Mo).forEach(o=>{o.subscriptionId===r.subscription&&r.subscription===o.subscriptionId&&o.onMessage(r.result)})}})})),qt(this,or))};Gu=async function(){var e;return(e=qt(this,an))==null||e.close(),Er(this,or,null),Promise.allSettled([...qt(this,Mo)].map(t=>t.subscribe(this)))};class Um{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:i}=this;return this.subscribed=!1,i==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[i]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const i=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=i)}}var Hu=e=>{throw TypeError(e)},Nc=(e,t,i)=>t.has(e)||Hu("Cannot "+i),xi=(e,t,i)=>(Nc(e,t,"read from private field"),i?i.call(e):t.get(e)),Uo=(e,t,i)=>t.has(e)?Hu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Ga=(e,t,i,n)=>(Nc(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Km=(e,t,i)=>(Nc(e,t,"access private method"),i),ao,Ri,po,Ha,Xu;class Vm{constructor(t){Uo(this,Ha),Uo(this,ao,0),Uo(this,Ri),Uo(this,po),Ga(this,Ri,t)}fetch(t,i){const n=xi(this,Ri).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(t,i)}async request(t){var r,o;Ga(this,ao,xi(this,ao)+1);const i=await this.fetch(((r=xi(this,Ri).rpc)==null?void 0:r.url)??xi(this,Ri).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Bm,"Client-Target-Api-Version":Nm,...(o=xi(this,Ri).rpc)==null?void 0:o.headers},body:JSON.stringify({jsonrpc:"2.0",id:xi(this,ao),method:t.method,params:t.params})});if(!i.ok)throw new Dm(`Unexpected status code: ${i.status}`,i.status,i.statusText);const n=await i.json();if("error"in n&&n.error!=null)throw new Ku(n.error.message,n.error.code);return n.result}async subscribe(t){const i=await Km(this,Ha,Xu).call(this).subscribe(t);return async()=>!!await i()}}ao=new WeakMap;Ri=new WeakMap;po=new WeakMap;Ha=new WeakSet;Xu=function(){var e;if(!xi(this,po)){const t=xi(this,Ri).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Ga(this,po,new Fm(((e=xi(this,Ri).websocket)==null?void 0:e.url)??xi(this,Ri).url,{WebSocketConstructor:t,...xi(this,Ri).websocket}))}return xi(this,po)};const zm=Symbol.for("@mysten/SuiClient");class cs{get[zm](){return!0}constructor(t){this.transport=t.transport??new Vm({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,i){return await this.transport.request({method:t,params:i})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!Ar(ze(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(n=>{if(!n||!Ar(ze(n)))throw new Error(`Invalid Sui Object id ${n}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!Ia(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(n=>{if(!Ia(n))throw new Error(`Invalid Transaction digest ${n}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock({transactionBlock:t,signature:i,options:n,requestType:r}){const o=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t=="string"?t:Ht(t),Array.isArray(i)?i:[i],n]});if(r==="WaitForLocalExecution")try{await this.waitForTransaction({digest:o.digest})}catch{}return o}async signAndExecuteTransaction({transaction:t,signer:i,...n}){let r;t instanceof Uint8Array?r=t:(t.setSenderIfNotSet(i.toSuiAddress()),r=await t.build({client:this}));const{signature:o,bytes:s}=await i.signTransaction(r);return this.executeTransactionBlock({transactionBlock:s,signature:o,...n})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!Bi(pe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(i=>{if(!i||!Ar(ze(i)))throw new Error(`Invalid Sui Stake id ${i}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var n;let i;if(jo(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),i=Ht(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")i=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)i=Ht(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,i,(n=t.gasPrice)==null?void 0:n.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:Ht(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!Ar(ze(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),i=yo(t.digest);return Dr(i.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...i}){const{nextCursor:n,hasNextPage:r,data:o}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[i.address,i.cursor,i.limit]});return{hasNextPage:r,nextCursor:n,data:o.map(s=>_d(s,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransaction({signal:t,timeout:i=60*1e3,pollInterval:n=2*1e3,...r}){const o=AbortSignal.timeout(i),s=new Promise((a,c)=>{o.addEventListener("abort",()=>c(o.reason))});for(s.catch(()=>{});!o.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(r)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),s])}}throw o.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}var Wm=Object.defineProperty,Gm=(e,t,i)=>t in e?Wm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Hm=(e,t,i)=>(Gm(e,typeof t!="symbol"?t+"":t,i),i),ki=5*60*1e3,Z=24*60*60*1e3;function Ve(e){return Date.parse(new Date().toString())+e}var oi=class{constructor(e,t=0){G(this,"overdueTime");G(this,"value");this.overdueTime=t,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};Q.config({precision:64,rounding:Q.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var ei=Q,W=class extends Error{constructor(t,i){super(t);G(this,"message");G(this,"errorCode");this.message=t,this.errorCode=i}static isClmmpoolsErrorCode(t,i){return t instanceof W&&t.errorCode===i}},se=new A(0),Zi=new A(1),zs=new A(2);zs.pow(new A(128));var Lr=zs.pow(new A(64)).sub(Zi),Xm=zs.pow(new A(128)).sub(Zi),ve=class{static toX64_BN(e){return e.mul(new A(2).pow(new A(64)))}static toX64_Decimal(e){return e.mul(ei.pow(2,64))}static toX64(e){return new A(e.mul(ei.pow(2,64)).floor().toFixed())}static fromX64(e){return new ei(e.toString()).mul(ei.pow(2,-64))}static fromX64_Decimal(e){return e.mul(ei.pow(2,-64))}static fromX64_BN(e){return e.div(new A(2).pow(new A(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(Lr).gt(se)&&(t=t.add(Zi)),t}static divRoundUp(e,t){return e.mod(t).eq(se)?e.div(t):e.div(t).add(new A(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(Xm):e.sub(t)}static checkUnsignedSub(e,t){const i=e.sub(t);if(i.isNeg())throw new W("Unsigned integer sub overflow","UnsignedIntegerOverflow");return i}static checkMul(e,t,i){const n=e.mul(t);if(this.isOverflow(n,i))throw new W("Multiplication overflow","MultiplicationOverflow");return n}static checkMulDivFloor(e,t,i,n){if(i.eq(se))throw new W("Devide by zero","DivideByZero");const r=e.mul(t).div(i);if(this.isOverflow(r,n))throw new W("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivCeil(e,t,i,n){if(i.eq(se))throw new W("Devide by zero","DivideByZero");const r=e.mul(t).add(i.sub(Zi)).div(i);if(this.isOverflow(r,n))throw new W("Multiplication div overflow","MulDivOverflow");return r}static checkMulDivRound(e,t,i,n){if(i.eq(se))throw new W("Devide by zero","DivideByZero");const r=e.mul(t.add(i.shrn(1))).div(i);if(this.isOverflow(r,n))throw new W("Multiplication div overflow","MulDivOverflow");return r}static checkMulShiftRight(e,t,i,n){const r=e.mul(t).div(new A(2).pow(new A(i)));if(this.isOverflow(r,n))throw new W("Multiplication shift right overflow","MulShiftRightOverflow");return r}static checkMulShiftRight64RoundUpIf(e,t,i,n){const r=e.mul(t),s=n&&r.and(Lr).gt(se)?r.shrn(64).add(Zi):r.shrn(64);if(this.isOverflow(s,i))throw new W("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftLeft(e,t,i,n){const r=e.mul(t).shln(i);if(this.isOverflow(r,n))throw new W("Multiplication shift left overflow","MulShiftLeftOverflow");return r}static checkDivRoundUpIf(e,t,i){if(t.eq(se))throw new W("Devide by zero","DivideByZero");return i?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(zs.pow(new A(t)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(se)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new A("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new A(1)))}static neg_from(e){return e.eq(se)?e:this.u128_neg(e).add(new A(1)).or(new A(1).shln(127))}};function Jm(e){return{coinA:e.coinTypeA,coinB:e.coinTypeB,currentSqrtPrice:new A(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new A(e.fee_growth_global_a),feeGrowthGlobalB:new A(e.fee_growth_global_b),feeProtocolCoinA:new A(e.fee_protocol_coin_a),feeProtocolCoinB:new A(e.fee_protocol_coin_b),feeRate:new A(e.fee_rate),liquidity:new A(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:""}}var Xa=443636,Ja=-443636,Ws="79226673515401279992447579055",Gs="4295048016",Tr=new A(1e6),F="0x0000000000000000000000000000000000000000000000000000000000000006",Zm="partner",_o="pool_script",xn="pool_script_v2",Ju="pool_script_v3",sr="router",pa="router_with_partner",Vi="fetcher_script",Qm="expect_swap",xl="utils",_a="custodian_v2",Ym="clob_v2",eg="endpoints_v2",Zu=(e=>(e.Deleted="Deleted",e.Exists="Exists",e.NotExists="NotExists",e))(Zu||{});function j(e){if(e.config===void 0)throw new W(`package: ${e.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return e.config}var tg=14,ig="59543866431248",ng="184467440737095516",rg="15793534762490258745",og=443636;function sg(e,t,i){const n=e.toTwos(i).shln(t);return n.imaskn(i+1),n.fromTwos(i)}function Le(e,t,i){const n=e.toTwos(i).shrn(t);return n.imaskn(i-t+1),n.fromTwos(i-t)}function ag(e){let t;return e&1?t=new A("79232123823359799118286999567"):t=new A("79228162514264337593543950336"),e&2&&(t=Le(t.mul(new A("79236085330515764027303304731")),96,256)),e&4&&(t=Le(t.mul(new A("79244008939048815603706035061")),96,256)),e&8&&(t=Le(t.mul(new A("79259858533276714757314932305")),96,256)),e&16&&(t=Le(t.mul(new A("79291567232598584799939703904")),96,256)),e&32&&(t=Le(t.mul(new A("79355022692464371645785046466")),96,256)),e&64&&(t=Le(t.mul(new A("79482085999252804386437311141")),96,256)),e&128&&(t=Le(t.mul(new A("79736823300114093921829183326")),96,256)),e&256&&(t=Le(t.mul(new A("80248749790819932309965073892")),96,256)),e&512&&(t=Le(t.mul(new A("81282483887344747381513967011")),96,256)),e&1024&&(t=Le(t.mul(new A("83390072131320151908154831281")),96,256)),e&2048&&(t=Le(t.mul(new A("87770609709833776024991924138")),96,256)),e&4096&&(t=Le(t.mul(new A("97234110755111693312479820773")),96,256)),e&8192&&(t=Le(t.mul(new A("119332217159966728226237229890")),96,256)),e&16384&&(t=Le(t.mul(new A("179736315981702064433883588727")),96,256)),e&32768&&(t=Le(t.mul(new A("407748233172238350107850275304")),96,256)),e&65536&&(t=Le(t.mul(new A("2098478828474011932436660412517")),96,256)),e&131072&&(t=Le(t.mul(new A("55581415166113811149459800483533")),96,256)),e&262144&&(t=Le(t.mul(new A("38992368544603139932233054999993551")),96,256)),Le(t,32,256)}function cg(e){const t=Math.abs(e);let i;return t&1?i=new A("18445821805675392311"):i=new A("18446744073709551616"),t&2&&(i=Le(i.mul(new A("18444899583751176498")),64,256)),t&4&&(i=Le(i.mul(new A("18443055278223354162")),64,256)),t&8&&(i=Le(i.mul(new A("18439367220385604838")),64,256)),t&16&&(i=Le(i.mul(new A("18431993317065449817")),64,256)),t&32&&(i=Le(i.mul(new A("18417254355718160513")),64,256)),t&64&&(i=Le(i.mul(new A("18387811781193591352")),64,256)),t&128&&(i=Le(i.mul(new A("18329067761203520168")),64,256)),t&256&&(i=Le(i.mul(new A("18212142134806087854")),64,256)),t&512&&(i=Le(i.mul(new A("17980523815641551639")),64,256)),t&1024&&(i=Le(i.mul(new A("17526086738831147013")),64,256)),t&2048&&(i=Le(i.mul(new A("16651378430235024244")),64,256)),t&4096&&(i=Le(i.mul(new A("15030750278693429944")),64,256)),t&8192&&(i=Le(i.mul(new A("12247334978882834399")),64,256)),t&16384&&(i=Le(i.mul(new A("8131365268884726200")),64,256)),t&32768&&(i=Le(i.mul(new A("3584323654723342297")),64,256)),t&65536&&(i=Le(i.mul(new A("696457651847595233")),64,256)),t&131072&&(i=Le(i.mul(new A("26294789957452057")),64,256)),t&262144&&(i=Le(i.mul(new A("37481735321082")),64,256)),i}var Y=class{static priceToSqrtPriceX64(e,t,i){return ve.toX64(e.mul(ei.pow(10,i-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,i){return ve.fromX64(e).pow(2).mul(ei.pow(10,t-i))}static tickIndexToSqrtPriceX64(e){return e>0?new A(ag(e)):new A(cg(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new A(Ws))||e.lt(new A(Gs)))throw new W("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const t=e.bitLength()-1,i=new A(t-64),n=sg(i,32,128);let r=new A("8000000000000000","hex"),o=0,s=new A(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;r.gt(new A(0))&&o<tg;){a=a.mul(a);const x=a.shrn(127);a=a.shrn(63+x.toNumber()),s=s.add(r.mul(x)),r=r.shrn(1),o+=1}const c=s.shrn(32),u=n.add(c).mul(new A(ig)),m=Le(u.sub(new A(ng)),64,128).toNumber(),g=Le(u.add(new A(rg)),64,128).toNumber();return m===g?m:Y.tickIndexToSqrtPriceX64(g).lte(e)?g:m}static tickIndexToPrice(e,t,i){return Y.sqrtPriceX64ToPrice(Y.tickIndexToSqrtPriceX64(e),t,i)}static priceToTickIndex(e,t,i){return Y.sqrtPriceX64ToTickIndex(Y.priceToSqrtPriceX64(e,t,i))}static priceToInitializableTickIndex(e,t,i,n){return Y.getInitializableTickIndex(Y.priceToTickIndex(e,t,i),n)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return Y.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return Y.getInitializableTickIndex(e,t)-t}};function sw(e){const t=[];for(const i of e){const n={objectId:i.objectId,index:Number(Ut(BigInt(i.index)).toString()),sqrtPrice:i.sqrtPrice,liquidityNet:new A(BigInt.asIntN(128,BigInt(BigInt(i.liquidityNet.toString()))).toString()),liquidityGross:i.liquidityGross,feeGrowthOutsideA:i.feeGrowthOutsideA,feeGrowthOutsideB:i.feeGrowthOutsideB,rewardersGrowthOutside:[new A(i.rewardersGrowthOutside[0]),new A(i.rewardersGrowthOutside[1]),new A(i.rewardersGrowthOutside[2])]};t.push(n)}return t}function lg(e){return T(e).add(T(og))}new A(365);new A(24);new A(3600);new A(.5);function aw(e,t,i,n){const r=Math.max(e,i),s=Math.min(t,n)-r,a=t-e,c=n-i,d=new Q(a.toString()),u=new Q(c.toString()),m=new Q(s.toString());let g=new Q("0");return s<0?g=new Q("0"):a===s?g=u.div(m):c===s?g=m.div(d):g=m.mul(m).div(u).div(d),g}var Hi=class{static getDefaultSqrtPriceLimit(e){return new A(e?Gs:Ws)}static getDefaultOtherAmountThreshold(e){return e?se:Lr}};function Qu(e,t,i,n){if(i.eq(se))return e;const r=ve.checkMulShiftLeft(e,t,64,256),o=t.shln(64),s=ve.checkMul(e,i,256);if(!n&&o.lte(s))throw new W("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=n?ve.checkDivRoundUpIf(r,o.add(s),!0):ve.checkDivRoundUpIf(r,o.sub(s),!0);if(a.lt(new A(Gs)))throw new W("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new A(Ws)))throw new W("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function Yu(e,t,i,n){const r=ve.checkDivRoundUpIf(i.shln(64),t,!n),o=n?e.add(r):e.sub(r);if(o.lt(new A(Gs))||o.gt(new A(Ws)))throw new W("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return o}function dg(e,t,i,n){return n?Qu(e,t,i,!0):Yu(e,t,i,!0)}function ug(e,t,i,n){return n?Yu(e,t,i,!1):Qu(e,t,i,!1)}function Sl(e,t,i,n){const r=e.gt(t)?e.sub(t):t.sub(e);if(i.lte(se)||r.eq(se))return se;let o;if(n){const s=new A(i).mul(new A(r)).shln(64),a=t.mul(e),c=s.div(a);o=s.mod(a).eq(se)?c:c.add(Zi)}else{const s=new A(i).mul(new A(r));o=s.and(Lr).gt(se)?s.shrn(64).add(Zi):s.shrn(64)}return o}function Tl(e,t,i,n){const r=e.gt(t)?e.sub(t):t.sub(e);if(i.lte(se)||r.eq(se))return se;let o;if(n)o=i.mul(r).shrn(64);else{const s=i.mul(r).shln(64),a=t.mul(e);o=s.div(a)}return o}function fg(e,t,i,n,r,o){if(i===se)return{amountIn:se,amountOut:se,nextSqrtPrice:t,feeAmount:se};const s=e.gte(t);let a,c,d,u;if(o){const m=ve.checkMulDivFloor(n,ve.checkUnsignedSub(Tr,r),Tr,64),g=Sl(e,t,i,s);g.gt(m)?(a=m,u=ve.checkUnsignedSub(n,m),d=dg(e,i,m,s)):(a=g,u=ve.checkMulDivCeil(a,r,Tr.sub(r),64),d=t),c=Tl(e,d,i,s)}else{const m=Tl(e,t,i,s);m.gt(n)?(c=n,d=ug(e,i,n,s)):(c=m,d=t),a=Sl(e,d,i,s),u=ve.checkMulDivCeil(a,r,Tr.sub(r),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:d,feeAmount:u}}function hg(e,t,i,n,r){let o=i,s=n.liquidity,{currentSqrtPrice:a}=n;const c={amountIn:se,amountOut:se,feeAmount:se,refAmount:se,nextSqrtPrice:se,crossTickNum:0};let d,u;const m=Hi.getDefaultSqrtPriceLimit(e);for(const g of r){if(e&&n.currentTickIndex<g.index||!e&&n.currentTickIndex>=g.index||g===null)continue;e&&m.gt(g.sqrtPrice)||!e&&m.lt(g.sqrtPrice)?d=m:d=g.sqrtPrice;const k=fg(a,d,s,o,n.feeRate,t);if(k.amountIn.eq(se)||(o=t?o.sub(k.amountIn.add(k.feeAmount)):o.sub(k.amountOut)),c.amountIn=c.amountIn.add(k.amountIn),c.amountOut=c.amountOut.add(k.amountOut),c.feeAmount=c.feeAmount.add(k.feeAmount),k.nextSqrtPrice.eq(g.sqrtPrice)?(u=g.liquidityNet.mul(new A(-1)),e?ve.is_neg(u)?s=s.add(new A(ii(BigInt(u.toString()),128))):s=s.add(u):ve.is_neg(u)?s=s.sub(new A(ii(BigInt(u.toString()),128))):s=s.sub(u),a=g.sqrtPrice):a=k.nextSqrtPrice,c.crossTickNum+=1,o.eq(se))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function Ko(e,t,i){const n=A.min(e,t),r=A.max(e,t),o=ve.fromX64_BN(i.mul(r).mul(n)),s=r.sub(n);return o.div(s)}function Vo(e,t,i){const n=A.min(e,t),o=A.max(e,t).sub(n);return i.shln(64).div(o)}var Zt=class{static updateFeeRate(e,t,i,n,r){const o=ve.checkMulDivCeil(t,new A(n),Tr,64),s=i===0?se:ve.checkMulDivFloor(t,new A(i),Tr,64),a=t.mul(o).mul(s);if(r?e.feeProtocolCoinA=e.feeProtocolCoinA.add(o):e.feeProtocolCoinB=e.feeProtocolCoinB.add(o),a.eq(se)||e.liquidity.eq(se))return{refFee:s,clmm:e};const c=a.shln(64).div(e.liquidity);return r?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:s,clmm:e}}static getCoinAmountFromLiquidity(e,t,i,n,r){const o=new ei(e.toString()),s=new ei(t.toString()),a=new ei(i.toString()),c=new ei(n.toString());let d,u;return t.lt(i)?(d=ve.toX64_Decimal(o).mul(c.sub(a)).div(a.mul(c)),u=new ei(0)):t.lt(n)?(d=ve.toX64_Decimal(o).mul(c.sub(s)).div(s.mul(c)),u=ve.fromX64_Decimal(o.mul(s.sub(a)))):(d=new ei(0),u=ve.fromX64_Decimal(o.mul(c.sub(a)))),r?{coinA:new A(d.ceil().toString()),coinB:new A(u.ceil().toString())}:{coinA:new A(d.floor().toString()),coinB:new A(u.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,t,i,n,r,o,s){const a=Y.sqrtPriceX64ToTickIndex(s),c=Y.tickIndexToSqrtPriceX64(e),d=Y.tickIndexToSqrtPriceX64(t);let u;if(a<e){if(!n)throw new W("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");u=Ko(c,d,i)}else if(a>t){if(n)throw new W("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");u=Vo(d,c,i)}else n?u=Ko(s,d,i):u=Vo(s,c,i);const m=Zt.getCoinAmountFromLiquidity(u,s,c,d,r),g=r?T(m.coinA.toString()).mul(1+o).toString():T(m.coinA.toString()).mul(1-o).toString(),k=r?T(m.coinB.toString()).mul(1+o).toString():T(m.coinB.toString()).mul(1-o).toString();return{coinAmountA:m.coinA,coinAmountB:m.coinB,tokenMaxA:r?new A(ei.ceil(g).toString()):new A(ei.floor(g).toString()),tokenMaxB:r?new A(ei.ceil(k).toString()):new A(ei.floor(k).toString()),liquidityAmount:u,fix_amount_a:n}}static estimateLiquidityFromcoinAmounts(e,t,i,n){if(t>i)throw new W("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const r=Y.sqrtPriceX64ToTickIndex(e),o=Y.tickIndexToSqrtPriceX64(t),s=Y.tickIndexToSqrtPriceX64(i);if(r<t)return Ko(o,s,n.coinA);if(r>=i)return Vo(s,o,n.coinB);const a=Ko(e,s,n.coinA),c=Vo(e,o,n.coinB);return A.min(a,c)}static estCoinAmountsFromTotalAmount(e,t,i,n,r,o){const{ratioA:s,ratioB:a}=Zt.calculateDepositRatioFixTokenA(e,t,i),c=T(n).mul(s).div(r),d=T(n).mul(a).div(o);return{amountA:c,amountB:d}}static calculateDepositRatioFixTokenA(e,t,i){const n=new A(1e8),{coinAmountB:r}=Zt.estLiquidityAndcoinAmountFromOneAmounts(e,t,n,!0,!0,0,i),o=Y.sqrtPriceX64ToPrice(i,0,0),s=T(n.toString()).mul(o),a=s.add(r.toString()),c=s.div(a),d=T(r.toString()).div(a);return{ratioA:c,ratioB:d}}};function ef(e){return e.startsWith("0x")?`${e.slice(2)}`:e}var pg=0,tf=1,_g=2;function Ml(e,t){return e===t?pg:e<t?tf:_g}function mg(e,t){let i=0;const n=e.length<=t.length?e.length:t.length,r=Ml(e.length,t.length);for(;i<n;){const o=Ml(e.charCodeAt(i),t.charCodeAt(i));if(i+=1,o!==0)return o}return r}function Za(e,t){return mg(e,t)===tf}function xs(e,...t){const i=Array.isArray(t[t.length-1])?t.pop():[];let r=[e,...t].filter(Boolean).join("::");return i&&i.length&&(r+=`<${i.join(", ")}>`),r}function D(e){var t;try{let i=e.replace(/\s/g,"");const n=i.match(/(<.+>)$/),r=(t=n==null?void 0:n[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r){i=i.slice(0,i.indexOf("<"));const d={...D(i),type_arguments:r.map(u=>D(u).source_address)};return d.type_arguments=d.type_arguments.map(u=>Ue.isSuiCoin(u)?u:D(u).source_address),d.source_address=xs(d.full_address,d.type_arguments),d}const o=i.split("::"),a={full_address:i,address:i===Ss||i===vg?"0x2":ze(o[0]),module:o[1],name:o[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=xs(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function Rt(e){return D(e).source_address}function gg(e){return e.toLowerCase().startsWith("0x")?ze(e):e}var bg=(e,t=!0)=>{const i=e.split("::"),n=i.shift();let r=ze(n);return t&&(r=ef(r)),`${r}::${i.join("::")}`};function Rc(e){for(const t in e){const i=typeof e[t];if(i==="object")Rc(e[t]);else if(i==="string"){const n=e[t];n&&!n.includes("::")&&(e[t]=gg(n))}}}var wg="0x2::coin::Coin",yg=/^0x2::coin::Coin<(.+)>$/,Ss="0x2::sui::SUI",vg="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Ue=class{static getCoinTypeArg(e){const t=e.type.match(yg);return t?t[1]:null}static isSUI(e){const t=Ue.getCoinTypeArg(e);return t?Ue.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let i=BigInt(0);return e.forEach(n=>{t===n.coinAddress&&(i+=BigInt(n.balance))}),i}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${wg}<${e}>`}static getFaucetCoins(e){const{events:t}=e,i=[];return t==null||t.forEach(n=>{const{type:r}=n;if(D(r).name==="InitEvent"){const o=n.parsedJson;i.push({transactionModule:n.transactionModule,suplyID:o.suplyID,decimals:o.decimals})}}),i}static getCoinAssets(e,t){const i=[];return t.forEach(n=>{Rt(n.coinAddress)===Rt(e)&&i.push(n)}),i}static isSuiCoin(e){return D(e).full_address===Ss}static selectCoinObjectIdGreaterThanOrEqual(e,t,i=[]){const n=Ue.selectCoinAssetGreaterThanOrEqual(e,t,i),r=n.selectedCoins.map(a=>a.coinObjectId),o=n.remainingCoins,s=n.selectedCoins.map(a=>a.balance.toString());return{objectArray:r,remainCoins:o,amountArray:s}}static selectCoinAssetGreaterThanOrEqual(e,t,i=[]){const n=Ue.sortByBalance(e.filter(c=>!i.includes(c.coinObjectId))),r=Ue.calculateTotalBalance(n);if(r<t)return{selectedCoins:[],remainingCoins:n};if(r===t)return{selectedCoins:n,remainingCoins:[]};let o=BigInt(0);const s=[],a=[...n];for(;o<r;){const c=t-o,d=a.findIndex(m=>m.balance>=c);if(d!==-1){s.push(a[d]),a.splice(d,1);break}const u=a.pop();u.balance>0&&(s.push(u),o+=u.balance)}return{selectedCoins:Ue.sortByBalance(s),remainingCoins:Ue.sortByBalance(a)}}static sortByBalance(e){return e.sort((t,i)=>t.balance<i.balance?-1:t.balance>i.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,i)=>t.balance>i.balance?-1:t.balance<i.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,i)=>t+i.balance,BigInt(0))}};function kg(e,t,i){let n=new A(0),r=new A(0);e.current_tick_index<t.index?(n=ve.subUnderflowU128(new A(e.fee_growth_global_a),new A(t.feeGrowthOutsideA)),r=ve.subUnderflowU128(new A(e.fee_growth_global_b),new A(t.feeGrowthOutsideB))):(n=new A(t.feeGrowthOutsideA),r=new A(t.feeGrowthOutsideB));let o=new A(0),s=new A(0);e.current_tick_index<i.index?(o=new A(i.feeGrowthOutsideA),s=new A(i.feeGrowthOutsideB)):(o=ve.subUnderflowU128(new A(e.fee_growth_global_a),new A(i.feeGrowthOutsideA)),s=ve.subUnderflowU128(new A(e.fee_growth_global_b),new A(i.feeGrowthOutsideB)));const a=ve.subUnderflowU128(ve.subUnderflowU128(new A(e.fee_growth_global_a),n),o),c=ve.subUnderflowU128(ve.subUnderflowU128(new A(e.fee_growth_global_b),r),s);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function Cg(e,t,i){const n=ve.subUnderflowU128(t,new A(e.fee_growth_inside_a)),r=new A(e.liquidity).mul(n).shrn(64),o=ve.subUnderflowU128(i,new A(e.fee_growth_inside_b)),s=new A(e.liquidity).mul(o).shrn(64),a=new A(e.fee_owed_a).add(r),c=new A(e.fee_owed_b).add(s);return{position_id:e.pos_object_id,feeOwedA:a,feeOwedB:c}}function cw(e){const{fee_growth_inside_a:t,fee_growth_inside_b:i}=kg(e.clmmpool,e.tickLower,e.tickUpper);return Cg(e.position,t,i)}var mo=class{constructor(e,t){G(this,"numerator");G(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return mo.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const i=typeof e=="number"?new A(e.toString()):e,n=typeof t=="number"?new A(t.toString()):t;return new mo(i,n)}};function Qa(e,{numerator:t,denominator:i},n){return n?e.mul(i.add(t)).div(i):e.mul(i).div(i.add(t))}function ma(e,t,i){return{tokenMaxA:Qa(e.coinA,t,i),tokenMaxB:Qa(e.coinB,t,i)}}function T(e){return Q.isDecimal(e)?e:new Q(e===void 0?0:e)}function Ag(e){return T(10).pow(T(e).abs())}function Bo(e){return e.data}function nf(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const{error:t}=e;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function rf(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function xg(e){if("reference"in e)return e.reference;const t=Bo(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:nf(e)}function Fi(e){var t;return"objectId"in e?e.objectId:((t=xg(e))==null?void 0:t.objectId)??rf(e)}function Sg(e){return e.data!==void 0}function Tg(e){return e.content!==void 0}function of(e){const t="data"in e?Bo(e):e;if(!(!t||!Tg(t)||t.content.dataType!=="moveObject"))return t.content}function zi(e){var t;return(t=of(e))==null?void 0:t.type}function ur(e){var i;const t=Sg(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((i=t==null?void 0:t.content)==null?void 0:i.dataType)==="package"?"package":zi(e):t==null?void 0:t.type}function No(e){var t;return(t=Bo(e))==null?void 0:t.previousTransaction}function Ts(e){var t;return(t=Bo(e))==null?void 0:t.owner}function Mg(e){var i;const t=(i=Bo(e))==null?void 0:i.display;return t||{data:null,error:null}}function le(e){var i;const t=(i=of(e))==null?void 0:i.fields;if(t)return"fields"in t?t.fields:t}function Og(e,t){const i=Ag(T(t));return Number(T(e).mul(i))}function ii(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function Ut(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function Ig(e,t,i){const n=D(e).name,r=D(t).name;return`${n}-${r}[${i}]`}function ga(e){const t=zi(e),i=D(t),n=le(e);if(n==null)throw new W(`Pool id ${Fi(e)} not exists.`,"InvalidPoolObject");const r=[];n.rewarder_manager.fields.rewarders.forEach(s=>{const{emissions_per_second:a}=s.fields,c=ve.fromX64(new A(a)),d=Math.floor(c.toNumber()*60*60*24);r.push({emissions_per_second:a,coinAddress:D(s.fields.reward_coin.fields.name).source_address,growth_global:s.fields.growth_global,emissionsEveryDay:d})});const o={poolAddress:Fi(e),poolType:t,coinTypeA:i.type_arguments[0],coinTypeB:i.type_arguments[1],coinAmountA:n.coin_a,coinAmountB:n.coin_b,current_sqrt_price:n.current_sqrt_price,current_tick_index:Ut(BigInt(n.current_tick_index.fields.bits)),fee_growth_global_a:n.fee_growth_global_a,fee_growth_global_b:n.fee_growth_global_b,fee_protocol_coin_a:n.fee_protocol_coin_a,fee_protocol_coin_b:n.fee_protocol_coin_b,fee_rate:n.fee_rate,is_pause:n.is_pause,liquidity:n.liquidity,position_manager:{positions_handle:n.position_manager.fields.positions.fields.id.id,size:n.position_manager.fields.positions.fields.size},rewarder_infos:r,rewarder_last_updated_time:n.rewarder_manager.fields.last_updated_time,tickSpacing:n.tick_spacing,ticks_handle:n.tick_manager.fields.ticks.fields.id.id,uri:n.url,index:Number(n.index),name:""};return o.name=Ig(o.coinTypeA,o.coinTypeB,o.tickSpacing),o}function Hs(e){const t=Mg(e).data,i={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(i.creator=t.creator,i.description=t.description,i.image_url=t.image_url,i.link=t.link,i.name=t.name,i.project_url=t.project_url),i}function Nr(e){var s,a;if(e.error!=null||((a=(s=e.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`Position not exists. Get Position error:${e.error}`,"InvalidPositionObject");let t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},i={...t,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},n=le(e);if(n){const c=zi(e),d=Ts(e);"nft"in n?(n=n.nft.fields,t.description=n.description,t.name=n.name,t.link=n.url):t=Hs(e),i={...t,pos_object_id:n.id.id,owner:d.AddressOwner,type:c,liquidity:n.liquidity,coin_type_a:n.coin_type_a.fields.name,coin_type_b:n.coin_type_b.fields.name,tick_lower_index:Ut(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:Ut(BigInt(n.tick_upper_index.fields.bits)),index:n.index,pool:n.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const r=nf(e);r&&(i.pos_object_id=r.objectId,i.position_status="Deleted");const o=rf(e);return o&&(i.pos_object_id=o,i.position_status="NotExists"),i}function sf(e){const t={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};e="fields"in e?e.fields:e,e.rewards.forEach((o,s)=>{const{amount_owned:a,growth_inside:c}="fields"in o?o.fields:o;s===0?(t.reward_amount_owed_0=a,t.reward_growth_inside_0=c):s===1?(t.reward_amount_owed_1=a,t.reward_growth_inside_1=c):s===2&&(t.reward_amount_owed_2=a,t.reward_growth_inside_2=c)});const i="fields"in e.tick_lower_index?e.tick_lower_index.fields.bits:e.tick_lower_index.bits,n="fields"in e.tick_upper_index?e.tick_upper_index.fields.bits:e.tick_upper_index.bits;return{liquidity:e.liquidity,tick_lower_index:Ut(BigInt(i)),tick_upper_index:Ut(BigInt(n)),...t,fee_growth_inside_a:e.fee_growth_inside_a,fee_owed_a:e.fee_owned_a,fee_growth_inside_b:e.fee_growth_inside_b,fee_owed_b:e.fee_owned_b,pos_object_id:e.position_id}}function ba(e){var r,o;if(e.error!=null||((o=(r=e.data)==null?void 0:r.content)==null?void 0:o.dataType)!=="moveObject")throw new W(`Tick not exists. Get tick data error:${e.error}`,"InvalidTickObject");const i=le(e).value.fields.value.fields;return{objectId:Fi(e),index:Ut(BigInt(i.index.fields.bits)),sqrtPrice:new A(i.sqrt_price),liquidityNet:new A(i.liquidity_net.fields.bits),liquidityGross:new A(i.liquidity_gross),feeGrowthOutsideA:new A(i.fee_growth_outside_a),feeGrowthOutsideB:new A(i.fee_growth_outside_b),rewardersGrowthOutside:i.rewards_growth_outside}}function Pg(e){if(!e||!e.index||!e.sqrt_price||!e.liquidity_net||!e.liquidity_gross||!e.fee_growth_outside_a||!e.fee_growth_outside_b)throw new W("Invalid tick fields.","InvalidTickFields");const t=Ut(BigInt(e.index.bits)),i=new A(e.sqrt_price),n=new A(e.liquidity_net.bits),r=new A(e.liquidity_gross),o=new A(e.fee_growth_outside_a),s=new A(e.fee_growth_outside_b),a=e.rewards_growth_outside||[];return{objectId:"",index:t,sqrtPrice:i,liquidityNet:n,liquidityGross:r,feeGrowthOutsideA:o,feeGrowthOutsideB:s,rewardersGrowthOutside:a}}var lw=class{static getMinIndex(e){return Ja+Math.abs(Ja)%e}static getMaxIndex(e){return Xa-Xa%e}};function dw(e,t){const i=Math.abs(e)%t;return e>0?i>t/2?e+t-i:e-i:i>t/2?e-t+i:e+i}function jg(e,t,i,n,r,o){const s=e.rewarder_infos,a=[];for(let c=0;c<s.length;c+=1){let d=o[c];t!==null&&(e.current_tick_index<n?d=o[c].sub(new A(t.rewardersGrowthOutside[c])):d=t.rewardersGrowthOutside[c]);let u=new A(0);i!==null&&(e.current_tick_index>=r?u=o[c].sub(new A(i.rewardersGrowthOutside[c])):u=i.rewardersGrowthOutside[c]);const m=ve.subUnderflowU128(ve.subUnderflowU128(new A(o[c]),new A(d)),new A(u));a.push(m)}return a}function Ms(e){const t=Ue.isSuiCoin(e.coinTypeA),i=Ue.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:i}}function Eg(e,t){return Q.ceil(T(e).div(1+t)).toString()}var ce=class{static createCollectRewarderAndFeeParams(e,t,i,n,r,o){r===void 0&&(r=[...n]),o===void 0&&(o=[...n]);const s=Rt(i.coinTypeA),a=Rt(i.coinTypeB);if(i.collect_fee){const d=ce.buildCoinForAmount(t,r,BigInt(0),s,!1);r=d.remainCoins;const u=ce.buildCoinForAmount(t,o,BigInt(0),a,!1);o=u.remainCoins,t=e.Position.createCollectFeePaylod({pool_id:i.pool_id,pos_id:i.pos_id,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB},t,d.targetCoin,u.targetCoin)}const c=[];return i.rewarder_coin_types.forEach(d=>{switch(Rt(d)){case s:c.push(ce.buildCoinForAmount(t,r,BigInt(0),d,!1).targetCoin);break;case a:c.push(ce.buildCoinForAmount(t,o,BigInt(0),d,!1).targetCoin);break;default:c.push(ce.buildCoinForAmount(t,n,BigInt(0),d,!1).targetCoin);break}}),t=e.Rewarder.createCollectRewarderPaylod(i,t,c),t}static async adjustTransactionForGas(e,t,i,n){n.setSender(e.senderAddress);const r=Ue.selectCoinAssetGreaterThanOrEqual(t,i).selectedCoins;if(r.length===0)throw new W("Insufficient balance","InsufficientBalance");const o=Ue.calculateTotalBalance(t);if(o-i>1e9)return{fixAmount:i};const s=await e.fullClient.calculationTxGas(n);if(Ue.selectCoinAssetGreaterThanOrEqual(t,BigInt(s),r.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(s)+BigInt(500);if(o-i<c){if(i-=c,i<0)throw new W("gas Insufficient balance","InsufficientBalance");const d=new $;return{fixAmount:i,newTx:d}}}return{fixAmount:i}}static async buildAddLiquidityFixTokenForGas(e,t,i,n,r,o,s){r=await ce.buildAddLiquidityFixToken(e,t,i,r,o,s);const{isAdjustCoinA:a}=Ms(i),c=a?i.amount_a:i.amount_b,d=await ce.adjustTransactionForGas(e,Ue.getCoinAssets(a?i.coinTypeA:i.coinTypeB,t),BigInt(c),r),{fixAmount:u}=d,{newTx:m}=d;if(m!=null){let g,k;if(a)i.amount_a=Number(u),g=ce.buildAddLiquidityFixTokenCoinInput(m,!i.fix_amount_a,u.toString(),i.slippage,i.coinTypeA,t,!1),k=ce.buildAddLiquidityFixTokenCoinInput(m,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,t,!1);else return i.amount_b=Number(u),g=ce.buildAddLiquidityFixTokenCoinInput(m,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,t,!1),k=ce.buildAddLiquidityFixTokenCoinInput(m,i.fix_amount_a,u.toString(),i.slippage,i.coinTypeB,t,!1),i=ce.fixAddLiquidityFixTokenParams(i,n.slippage,n.curSqrtPrice),r=await ce.buildAddLiquidityFixTokenArgs(m,e,t,i,g,k),r}return r}static async buildAddLiquidityFixToken(e,t,i,n,r,o){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");n=n||new $;let s,a;return r==null||o==null?(s=ce.buildAddLiquidityFixTokenCoinInput(n,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,t,!1),a=ce.buildAddLiquidityFixTokenCoinInput(n,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,t,!1)):(s={targetCoin:r,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a={targetCoin:o,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),n=ce.buildAddLiquidityFixTokenArgs(n,e,t,i,s,a),n}static buildAddLiquidityFixTokenCoinInput(e,t,i,n,r,o,s=!0){return t?ce.buildCoinForAmountInterval(e,o,{amountSecond:BigInt(Eg(i,n)),amountFirst:BigInt(i)},r,s):ce.buildCoinForAmount(e,o,BigInt(i),r,s)}static fixAddLiquidityFixTokenParams(e,t,i){const n=e.fix_amount_a?e.amount_a:e.amount_b,r=Zt.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new A(n),e.fix_amount_a,!0,t,i);return e.amount_a=e.fix_amount_a?e.amount_a:r.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?r.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,i,n,r,o){const s=[n.coinTypeA,n.coinTypeB],a=n.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:d}=t.sdkOptions;n.is_open||(e=ce.createCollectRewarderAndFeeParams(t,e,n,i,r.remainCoins,o.remainCoins));const u=j(c),m=n.is_open?[e.object(u.global_config_id),e.object(n.pool_id),e.pure.u32(Number(ii(BigInt(n.tick_lower)).toString())),e.pure.u32(Number(ii(BigInt(n.tick_upper)).toString())),r.targetCoin,o.targetCoin,e.pure.u64(n.amount_a),e.pure.u64(n.amount_b),e.pure.bool(n.fix_amount_a),e.object(F)]:[e.object(u.global_config_id),e.object(n.pool_id),e.object(n.pos_id),r.targetCoin,o.targetCoin,e.pure.u64(n.amount_a),e.pure.u64(n.amount_b),e.pure.bool(n.fix_amount_a),e.object(F)];return e.moveCall({target:`${d.published_at}::${xn}::${a}`,typeArguments:s,arguments:m}),e}static async buildSwapTransactionForGas(e,t,i,n){let r=ce.buildSwapTransaction(e,t,i);r.setSender(e.senderAddress);const o=await ce.adjustTransactionForGas(e,Ue.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,i),BigInt(t.by_amount_in?t.amount:t.amount_limit),r),{fixAmount:s,newTx:a}=o;if(a!==void 0){a.setSender(e.senderAddress),t.by_amount_in?t.amount=s.toString():t.amount_limit=s.toString(),t=await ce.fixSwapParams(e,t,n);const c=ce.buildCoinForAmount(r,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA),d=ce.buildCoinForAmount(r,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB);r=ce.buildSwapTransactionArgs(a,t,e.sdkOptions,c,d)}return r}static buildSwapTransaction(e,t,i){let n=new $;n.setSender(e.senderAddress);const r=ce.buildCoinForAmount(n,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1),o=ce.buildCoinForAmount(n,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1);return n=ce.buildSwapTransactionArgs(n,t,e.sdkOptions,r,o),n}static buildSwapTransactionArgs(e,t,i,n,r){const{clmm_pool:o,integrate:s}=i,a=Hi.getDefaultSqrtPriceLimit(t.a2b),c=[t.coinTypeA,t.coinTypeB],{global_config_id:d}=j(o);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const u=t.swap_partner!==void 0,m=u?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",g=u?[e.object(d),e.object(t.pool_id),e.object(t.swap_partner),n.targetCoin,r.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(F)]:[e.object(d),e.object(t.pool_id),n.targetCoin,r.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(F)];return e.moveCall({target:`${s.published_at}::${xn}::${m}`,typeArguments:c,arguments:g}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,t,i,n){let{tx:r,coinABs:o}=ce.buildSwapTransactionWithoutTransferCoins(e,t,i);r.setSender(e.senderAddress);const s=await ce.adjustTransactionForGas(e,Ue.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,i),BigInt(t.by_amount_in?t.amount:t.amount_limit),r),{fixAmount:a,newTx:c}=s;if(c!==void 0){c.setSender(e.senderAddress),t.by_amount_in?t.amount=a.toString():t.amount_limit=a.toString(),t=await ce.fixSwapParams(e,t,n);const d=ce.buildCoinForAmount(r,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),u=ce.buildCoinForAmount(r,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),m=ce.buildSwapTransactionWithoutTransferCoinArgs(e,c,t,e.sdkOptions,d,u);r=m.tx,o=m.txRes}return{tx:r,coinABs:o}}static buildSwapTransactionWithoutTransferCoins(e,t,i){const n=new $;n.setSender(e.senderAddress);const r=ce.buildCoinForAmount(n,i,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),o=ce.buildCoinForAmount(n,i,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),s=ce.buildSwapTransactionWithoutTransferCoinArgs(e,n,t,e.sdkOptions,r,o);return{tx:s.tx,coinABs:s.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,t,i,n,r,o){const{clmm_pool:s,integrate:a}=n,c=Hi.getDefaultSqrtPriceLimit(i.a2b),{global_config_id:d}=j(s);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const u=i.swap_partner!==void 0,m=u?"swap_with_partner":"swap",g=u?pa:sr,k=u?[t.object(d),t.object(i.pool_id),t.object(i.swap_partner),r.targetCoin,o.targetCoin,t.pure.bool(i.a2b),t.pure.bool(i.by_amount_in),t.pure.u64(i.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(F)]:[t.object(d),t.object(i.pool_id),r.targetCoin,o.targetCoin,t.pure.bool(i.a2b),t.pure.bool(i.by_amount_in),t.pure.u64(i.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(F)],x=[i.coinTypeA,i.coinTypeB],M=t.moveCall({target:`${a.published_at}::${g}::${m}`,typeArguments:x,arguments:k});if(i.by_amount_in){const I=i.a2b?i.coinTypeB:i.coinTypeA,E=i.a2b?M[1]:M[0],B=Number(i.amount_limit);this.checkCoinThreshold(e,i.by_amount_in,t,E,B,I)}return{tx:t,txRes:M}}static async fixSwapParams(e,t,i){const{currentPool:n}=i;try{const r=await e.Swap.preswap({decimalsA:i.decimalsA,decimalsB:i.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:t.amount,pool:n,currentSqrtPrice:n.current_sqrt_price,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB}),o=i.byAmountIn?r.estimatedAmountOut:r.estimatedAmountIn,s=Qa(o,i.slippage,!i.byAmountIn);t.amount_limit=s.toString()}catch(r){console.log("fixSwapParams",r)}return t}static async syncBuildCoinInputForAmount(e,t,i,n,r=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const o=await e.getOwnerCoinAssets(e.senderAddress,n);return ce.buildCoinForAmount(t,o,i,n,r).targetCoin}static buildCoinForAmount(e,t,i,n,r=!0,o=!1){const s=Ue.getCoinAssets(n,t);if(i===BigInt(0)&&s.length===0)return ce.buildZeroValueCoin(t,e,n,r);const a=Ue.calculateTotalBalance(s);if(a<i)throw new W(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `,"InsufficientBalance");return ce.buildCoin(e,t,s,i,n,r,o)}static buildCoin(e,t,i,n,r,o=!0,s=!1){if(Ue.isSuiCoin(r)){if(o){const B=e.splitCoins(e.gas,[e.pure.u64(n)]);return{targetCoin:e.makeMoveVec({elements:[B]}),remainCoins:t,tragetCoinAmount:n.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}if(n===0n&&i.length>1){const B=Ue.selectCoinObjectIdGreaterThanOrEqual(i,n);return{targetCoin:e.object(B.objectArray[0]),remainCoins:B.remainCoins,tragetCoinAmount:B.amountArray[0],isMintZeroCoin:!1}}const I=Ue.selectCoinObjectIdGreaterThanOrEqual(i,n);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(n)]),remainCoins:I.remainCoins,tragetCoinAmount:n.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const a=Ue.selectCoinObjectIdGreaterThanOrEqual(i,n),c=a.amountArray.reduce((I,E)=>Number(I)+Number(E),0).toString(),d=a.objectArray;if(o)return{targetCoin:e.makeMoveVec({elements:d.map(I=>e.object(I))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((I,E)=>Number(I)+Number(E),0).toString(),isMintZeroCoin:!1};const[u,...m]=d,g=e.object(u);let k=g,x=a.amountArray.reduce((I,E)=>Number(I)+Number(E),0).toString(),M;return m.length>0&&e.mergeCoins(g,m.map(I=>e.object(I))),s&&Number(c)>Number(n)&&(k=e.splitCoins(g,[e.pure.u64(n)]),x=n.toString(),M=g),{targetCoin:k,remainCoins:a.remainCoins,originalSplitedCoin:M,tragetCoinAmount:x,isMintZeroCoin:!1}}static buildZeroValueCoin(e,t,i,n=!0){const r=ce.callMintZeroValueCoin(t,i);let o;return n?o=t.makeMoveVec({elements:[r]}):o=r,{targetCoin:o,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,t,i,n,r=!0){const o=Ue.getCoinAssets(n,t);if(i.amountFirst===BigInt(0))return o.length>0?ce.buildCoin(e,[...t],[...o],i.amountFirst,n,r):ce.buildZeroValueCoin(t,e,n,r);const s=Ue.calculateTotalBalance(o);if(s>=i.amountFirst)return ce.buildCoin(e,[...t],[...o],i.amountFirst,n,r);if(s<i.amountSecond)throw new W(`The amount(${s}) is Insufficient balance for ${n} , expect ${i.amountSecond} `,"InsufficientBalance");return ce.buildCoin(e,[...t],[...o],i.amountSecond,n,r)}static async buildRouterSwapTransaction(e,t,i,n,r){let o=new $;return t.paths.length>1&&(t.partner=""),o=await this.buildRouterBasePathTx(e,t,i,n,o,r),o}static async buildRouterBasePathTx(e,t,i,n,r,o){const s=t.paths.filter(N=>N&&N.poolAddress),a=Number(s.reduce((N,L)=>N.add(L.amountIn),se).toString()),c=Number(s.reduce((N,L)=>N.add(L.amountOut),se).toString()),d=Math.round(i?Number(c.toString())*(1-t.priceSlippagePoint):Number(a.toString())*(1+t.priceSlippagePoint)),u=t.paths[0].coinType[0],m=t.paths[0].coinType[t.paths[0].coinType.length-1],g=ce.buildCoinForAmount(r,n,BigInt(i?a:d),u,!1,!0),k=g.originalSplitedCoin!==void 0,x=ce.buildCoinForAmount(r,n,0n,m,!1),M=await this.buildRouterBasePathReturnCoins(e,t,i,g,x,r),I=[],{toCoin:E,fromCoin:B}=M;if(r=M.tx,x.isMintZeroCoin?I.push({coinType:m,coin:E}):x.originalSplitedCoin!==void 0?r.mergeCoins(x.originalSplitedCoin,[E]):r.mergeCoins(x.targetCoin,[E]),k){const N=g==null?void 0:g.originalSplitedCoin;r.mergeCoins(N,[B])}else I.push({coinType:u,coin:B});for(let N=0;N<I.length;N++)this.buildTransferCoin(e,r,I[N].coin,I[N].coinType,o);return r}static async buildRouterBasePathReturnCoins(e,t,i,n,r,o){const{clmm_pool:s,integrate:a}=e.sdkOptions,c=j(s).global_config_id,d=t.paths.filter(N=>N&&N.poolAddress),u=Number(d.reduce((N,L)=>N.add(L.amountIn),se).toString()),m=Number(d.reduce((N,L)=>N.add(L.amountOut),se).toString()),g=Math.round(i?Number(m.toString())*(1-t.priceSlippagePoint):Number(u.toString())*(1+t.priceSlippagePoint)),k=t.paths[0].coinType[0],x=t.paths[0].coinType[t.paths[0].coinType.length-1];let M=n.targetCoin,I;r.isMintZeroCoin||r.originalSplitedCoin!==void 0?I=r.targetCoin:I=ce.callMintZeroValueCoin(o,x);const E=t.partner==="",B=E?sr:pa;for(const N of d)if(N.poolAddress.length===1){const L=N.a2b[0],X={amount:Number(N.amountIn.toString()),amountLimit:g,poolCoinA:N.a2b[0]?k:x,poolCoinB:N.a2b[0]?x:k},K=E?"swap":"swap_with_partner",ee=L?M:I,me=L?I:M,be=i?N.amountIn.toString():N.amountOut.toString(),ie=Hi.getDefaultSqrtPriceLimit(L).toString(),z=E?[o.object(c),o.object(N.poolAddress[0]),ee,me,o.pure.bool(L),o.pure.bool(i),o.pure.u64(be),o.pure.u128(ie),o.pure.bool(!1),o.object(F)]:[o.object(c),o.object(N.poolAddress[0]),o.object(t.partner),ee,me,o.pure.bool(L),o.pure.bool(i),o.pure.u64(be),o.pure.u128(ie),o.pure.bool(!1),o.object(F)],te=[X.poolCoinA,X.poolCoinB],O=o.moveCall({target:`${e.sdkOptions.integrate.published_at}::${B}::${K}`,typeArguments:te,arguments:z});M=L?O[0]:O[1],I=L?O[1]:O[0]}else{const L=i?N.amountIn:N.rawAmountLimit[0],X=i?0:N.amountOut;let K="";N.a2b[0]?N.a2b[1]?K="swap_ab_bc":K="swap_ab_cb":N.a2b[1]?K="swap_ba_bc":K="swap_ba_cb",E||(K=`${K}_with_partner`);const ee=Hi.getDefaultSqrtPriceLimit(N.a2b[0]),me=Hi.getDefaultSqrtPriceLimit(N.a2b[1]),be=E?[o.object(c),o.object(N.poolAddress[0]),o.object(N.poolAddress[1]),M,I,o.pure.bool(i),o.pure.u64(L.toString()),o.pure.u64(X.toString()),o.pure.u128(ee.toString()),o.pure.u128(me.toString()),o.object(F)]:[o.object(c),o.object(N.poolAddress[0]),o.object(N.poolAddress[1]),o.object(t.partner),M,I,o.pure.bool(i),o.pure.u64(L.toString()),o.pure.u64(X.toString()),o.pure.u128(ee.toString()),o.pure.u128(me.toString()),o.object(F)],ie=[N.coinType[0],N.coinType[1],N.coinType[2]],z=o.moveCall({target:`${a.published_at}::${B}::${K}`,typeArguments:ie,arguments:be});M=z[0],I=z[1]}return this.checkCoinThreshold(e,i,o,I,g,x),{fromCoin:M,toCoin:I,tx:o}}static async buildAggregatorSwapReturnCoins(e,t,i,n,r,o,s,a){if(a==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=e.senderAddress}t.splitPaths.length>1&&(r="");let c,d;const u=t.splitPaths.some(m=>m.basePaths.some(g=>g.label==="Deepbook"));if((!t.byAmountIn||t.splitPaths.length===1)&&!u){const m=[];for(const x of t.splitPaths){const M=[],I=[],E=[],B=[];for(let L=0;L<x.basePaths.length;L+=1){const X=x.basePaths[L];M.push(X.direction),I.push(X.poolAddress),E.push(new A(X.inputAmount.toString())),L===0?B.push(X.fromCoin,X.toCoin):B.push(X.toCoin)}const N={amountIn:new A(x.inputAmount.toString()),amountOut:new A(x.outputAmount.toString()),poolAddress:I,a2b:M,rawAmountLimit:E,isExceed:!1,coinType:B};m.push(N)}const g={paths:m,partner:r,priceSlippagePoint:o},k=await this.buildRouterBasePathReturnCoins(e,g,t.byAmountIn,i,n,s);c=k.fromCoin,d=k.toCoin,s=k.tx}else{const m=Math.round(t.outputAmount*(1-o));c=i.targetCoin,n.isMintZeroCoin||n.originalSplitedCoin!==void 0?d=n.targetCoin:d=ce.callMintZeroValueCoin(s,t.toCoin);let g=!1,k;if(u){const[x,M]=Ol.createAccountCap(a,e.sdkOptions,s);s=M,k=x,g=!0}for(let x=0;x<t.splitPaths.length;x+=1){const M=t.splitPaths[x];let I;for(let E=0;E<M.basePaths.length;E+=1){const B=M.basePaths[E];if(B.label==="Deepbook")if(E===0)if(M.basePaths.length===1){const N=this.buildDeepbookBasePathTx(e,B,s,k,c,d,!1);c=N.from,d=N.to}else{I=ce.callMintZeroValueCoin(s,B.toCoin);const N=this.buildDeepbookBasePathTx(e,B,s,k,c,I,!1);c=N.from,I=N.to}else{const N=this.buildDeepbookBasePathTx(e,B,s,k,I,d,!0);I=N.from,d=N.to}if(B.label==="Cetus")if(E===0)if(M.basePaths.length===1){const N=this.buildClmmBasePathTx(e,B,s,t.byAmountIn,c,d,!1,r);c=N.from,d=N.to}else{I=ce.callMintZeroValueCoin(s,B.toCoin);const N=this.buildClmmBasePathTx(e,B,s,t.byAmountIn,c,I,!1,r);c=N.from,I=N.to}else{const N=this.buildClmmBasePathTx(e,B,s,t.byAmountIn,I,d,!0,r);I=N.from,d=N.to,s.moveCall({target:`${e.sdkOptions.integrate.published_at}::${xl}::send_coin`,typeArguments:[B.fromCoin],arguments:[I,s.pure.address(a)]})}}}this.checkCoinThreshold(e,t.byAmountIn,s,d,m,t.toCoin),g&&(s=Ol.deleteAccountCapByObject(k,e.sdkOptions,s))}return{fromCoin:c,toCoin:d,tx:s}}static async buildAggregatorSwapTransaction(e,t,i,n,r,o){let s=new $;const a=t.byAmountIn?Math.round(t.outputAmount*(1-r)):Math.round(t.inputAmount*(1+r)),c=ce.buildCoinForAmount(s,i,t.byAmountIn?BigInt(t.inputAmount):BigInt(a),t.fromCoin,!1,!0),d=c.originalSplitedCoin!=null,u=ce.buildCoinForAmount(s,i,0n,t.toCoin,!1),m=await this.buildAggregatorSwapReturnCoins(e,t,c,u,n,r,s,o),{fromCoin:g,toCoin:k}=m;s=m.tx;const x=[];if(u.isMintZeroCoin?x.push({coinType:t.toCoin,coin:k}):u.originalSplitedCoin!=null?s.mergeCoins(u.originalSplitedCoin,[k]):s.mergeCoins(u.targetCoin,[k]),d){const M=c.originalSplitedCoin;s.mergeCoins(M,[g])}else x.push({coinType:t.fromCoin,coin:g});for(let M=0;M<x.length;M++)this.buildTransferCoin(e,s,x[M].coin,x[M].coinType,o);return s}static checkCoinThreshold(e,t,i,n,r,o){t&&i.moveCall({target:`${e.sdkOptions.integrate.published_at}::${sr}::check_coin_threshold`,typeArguments:[o],arguments:[n,i.pure.u64(r)]})}static buildDeepbookBasePathTx(e,t,i,n,r,o,s){const a=t.direction?r:o,c=t.direction?o:r,d=[i.object(t.poolAddress),n,i.pure.u64(t.inputAmount),i.pure.u64(0),i.pure.bool(t.direction),a,c,i.pure.bool(s),i.object(F)],u=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],m=i.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:u,arguments:d});return r=t.direction?m[0]:m[1],o=t.direction?m[1]:m[0],{from:r,to:o,tx:i}}static buildClmmBasePathTx(e,t,i,n,r,o,s,a){const{clmm_pool:c,integrate:d}=e.sdkOptions,u=j(c).global_config_id;let m=t.direction?r:o,g=t.direction?o:r;const k=a==="",x=k?sr:pa,M=k?"swap":"swap_with_partner",I=n?t.inputAmount.toString():t.outputAmount.toString(),E=Hi.getDefaultSqrtPriceLimit(t.direction),B=k?[i.object(u),i.object(t.poolAddress),m,g,i.pure.bool(t.direction),i.pure.bool(n),i.pure.u64(I),i.pure.u128(E.toString()),i.pure.bool(s),i.object(F)]:[i.object(u),i.object(t.poolAddress),i.object(a),m,g,i.pure.bool(t.direction),i.pure.bool(n),i.pure.u64(I),i.pure.u128(E.toString()),i.pure.bool(s),i.object(F)],N=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],L=i.moveCall({target:`${d.published_at}::${x}::${M}`,typeArguments:N,arguments:B});return m=L[0],g=L[1],r=t.direction?m:g,o=t.direction?g:m,{from:r,to:o,tx:i}}static buildCoinTypePair(e,t){const i=[];if(e.length===2){const n=[];n.push(e[0],e[1]),i.push(n)}else{const n=[];n.push(e[0],e[e.length-1]),i.push(n);for(let r=1;r<e.length-1;r+=1){if(t[r-1]===0)continue;const o=[];o.push(e[0],e[r],e[e.length-1]),i.push(o)}}return i}static buildTransferCoinToSender(e,t,i,n){t.moveCall({target:`${e.sdkOptions.integrate.published_at}::${xl}::transfer_coin_to_sender`,typeArguments:[n],arguments:[i]})}static buildTransferCoin(e,t,i,n,r){r!=null?t.transferObjects([i],t.pure.address(r)):ce.buildTransferCoinToSender(e,t,i,n)}},re=ce;Hm(re,"callMintZeroValueCoin",(e,t)=>e.moveCall({target:"0x2::coin::zero",typeArguments:[t]}));function Jt(e){return!(!e.startsWith("0x")||e.length!==66)}var _r=new A(1e9),Ol=class{static createAccountCap(e,t,i,n=!1){if(e.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:r}=t,[o]=i.moveCall({target:`${r.published_at}::${Ym}::create_account`,typeArguments:[],arguments:[]});return n&&i.transferObjects([o],i.pure.address(e)),[o,i]}static deleteAccountCap(e,t,i){const{deepbook:n}=t,r=[i.object(e)];return i.moveCall({target:`${n.published_at}::${_a}::delete_account_cap`,typeArguments:[],arguments:r}),i}static deleteAccountCapByObject(e,t,i){const{deepbook:n}=t,r=[e];return i.moveCall({target:`${n.published_at}::${_a}::delete_account_cap`,typeArguments:[],arguments:r}),i}static async getAccountCap(e,t=!0){const i=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:t,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:_a}}});return i.data.length===0?"":i.data[0].data.objectId}static async getPools(e){const t=e.sdkOptions.deepbook.package_id,i=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${t}::clob_v2::PoolCreated`})).data.forEach(r=>{const o=r.parsedJson;o&&i.push({poolID:o.pool_id,tickSize:Number(o.tick_size),lotSize:Number(o.lot_size),takerFeeRate:Number(o.taker_fee_rate),makerRebateRate:Number(o.maker_rebate_rate),baseAsset:o.base_asset.name,quoteAsset:o.quote_asset.name})})}catch(n){console.log("getPoolImmutables",n)}return i}static async getPoolAsks(e,t,i,n){var g;const{simulationAccount:r}=e.sdkOptions,{deepbook_endpoint_v2:o}=e.sdkOptions,s=new $,a=[],c=[i,n],d=[s.object(t),s.pure.u64("0"),s.pure.u64("999999999999"),s.object(F)];s.moveCall({target:`${o.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:d,typeArguments:c});const m=(g=(await e.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:r.address})).events)==null?void 0:g.filter(k=>D(k.type).name==="BookStatus");if(m.length===0)return a;for(let k=0;k<m[0].parsedJson.depths.length;k++){const x=m[0].parsedJson.price[k],M=m[0].parsedJson.depths[k],I={price:parseInt(x,10),quantity:parseInt(M,10)};a.push(I)}return a}static async getPoolBids(e,t,i,n){var g;const{simulationAccount:r}=e.sdkOptions,{deepbook_endpoint_v2:o}=e.sdkOptions,s=new $,a=[],c=[i,n],d=[s.object(t),s.pure.u64("0"),s.pure.u64("999999999999"),s.object(F)];s.moveCall({target:`${o.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:d,typeArguments:c});const m=(g=(await e.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:r.address})).events)==null?void 0:g.filter(k=>D(k.type).name==="BookStatus");if(m.length===0)return a;for(let k=0;k<m[0].parsedJson.depths.length;k++){const x=m[0].parsedJson.price[k],M=m[0].parsedJson.depths[k],I={price:parseInt(x,10),quantity:parseInt(M,10)};a.push(I)}return a}static async preSwap(e,t,i,n){let r=!1,o=se,s=new A(n),a=se;const c=new A(n);if(i){let d=await this.getPoolBids(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(r=!0),d=d.sort((u,m)=>m.price-u.price);for(let u=0;u<d.length;u+=1){const m=new A(d[u].quantity),g=new A(d[u].price),k=m.mul(new A(g)).mul(new A(t.takerFeeRate)).div(_r).div(_r);if(s.gt(m))s=s.sub(m),o=o.add(m.mul(g).div(_r).sub(k)),a=a.add(k);else{const x=s.mul(new A(d[u].price)).div(_r),M=x.mul(new A(t.takerFeeRate)).div(_r);o=o.add(x.sub(M)),s=s.sub(s),a=a.add(M)}if(s.eq(se))break}}else{const d=await this.getPoolAsks(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(r=!0);for(let u=0;u<d.length;u+=1){const m=new A(d[u].price).mul(new A(d[u].quantity)).div(new A(1e9)),g=m.mul(new A(t.takerFeeRate)).div(_r),k=m.add(g);if(s.gt(m))o=o.add(new A(d[u].quantity)),s=s.sub(k),a=a.add(g);else{const x=new A(d[u].quantity).div(new A(t.lotSize)),M=k.div(x),I=s.div(M);o=o.add(I.muln(t.lotSize)),s=s.sub(I.mul(M)),a=a.add(I.div(x).mul(g))}if(s.eq(se))break}}return{poolAddress:t.poolID,estimatedAmountIn:c.sub(s).toNumber(),estimatedAmountOut:o.toNumber(),estimatedFeeAmount:a,isExceed:r,amount:Number(n),aToB:i,byAmountIn:!0}}static async simulateSwap(e,t,i,n,r,o){var X;const{deepbook_endpoint_v2:s}=e.sdkOptions;let a=new $;const c=await this.getAccountCap(e);let d;if(c===""){const K=this.createAccountCap(e.senderAddress,e.sdkOptions,a),ee=K[0];a=K[1],d=ee}else d=a.object(c);const u=await e.getOwnerCoinAssets(e.senderAddress),m=re.buildCoinForAmount(a,u,BigInt(o),i,!1),g=m==null?void 0:m.targetCoin,k=re.buildCoinForAmount(a,u,BigInt(o),n,!1),x=k==null?void 0:k.targetCoin,M=[i,n],I=[a.object(t),d,a.pure.u64(o),a.pure.u64(0),a.pure.bool(r),g,x,a.object(F)];a.moveCall({target:`${s.published_at}::${eg}::swap`,arguments:I,typeArguments:M});const{simulationAccount:E}=e.sdkOptions,N=(X=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:E.address})).events)==null?void 0:X.filter(K=>D(K.type).name==="DeepbookSwapEvent");if(N.length===0)return null;const L=N[0].parsedJson;return{poolAddress:L.pool,estimatedAmountIn:L.amount_in,estimatedAmountOut:L.amount_out,aToB:L.atob}}},Bg=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPositionList(e,t="all"){const i={data:[],hasNextPage:!0},n=await this._sdk.fullClient.getDynamicFieldsByPage(e,t);i.hasNextPage=n.hasNextPage,i.nextCursor=n.nextCursor;const r=n.data.map(s=>{if(s.error!=null)throw new W(`when getPositionList get position objects error: ${s.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return s.name.value}),o=await this._sdk.Position.getSipmlePositionList(r);return i.data=o,i}async getPoolImmutables(e=[],t=0,i=100,n=!1){const{package_id:r}=this._sdk.sdkOptions.clmm_pool,o=`${r}_getInitPoolEvent`,s=this.getCache(o,n),a=[],c=[];if(s!==void 0&&a.push(...s),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`})).data.forEach(m=>{const g=m.parsedJson;g&&a.push({poolAddress:g.pool_id,tickSpacing:g.tick_spacing,coinTypeA:D(g.coin_type_a).full_address,coinTypeB:D(g.coin_type_b).full_address})}),this.updateCache(o,a,Z)}catch(u){console.log("getPoolImmutables",u)}const d=e.length>0;for(let u=0;u<a.length;u+=1){const m=a[u];d&&!e.includes(m.poolAddress)||!d&&(u<t||u>=t+i)||c.push(m)}return c}async getPools(e=[],t=0,i=100){var s,a,c;const n=[];let r=[];e.length>0?r=[...e]:(await this.getPoolImmutables([],t,i,!1)).forEach(u=>r.push(u.poolAddress));const o=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0,showType:!0});for(const d of o){if(d.error!=null||((a=(s=d.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`getPools error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=ga(d);n.push(u);const m=`${u.poolAddress}_getPoolObject`;this.updateCache(m,u,Z)}return n}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:i}=this._sdk.sdkOptions.clmm_pool,n=[],r={data:[],hasNextPage:!1},o=e==="all",s=`${i}_getPoolImmutables`;if(o){const a=this.getCache(s,t);a&&n.push(...a)}if(n.length===0)try{const a=`${i}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},e);r.hasNextPage=c.hasNextPage,r.nextCursor=c.nextCursor,c.data.forEach(d=>{const u=d.parsedJson;if(u){const m={poolAddress:u.pool_id,tickSpacing:u.tick_spacing,coinTypeA:D(u.coin_type_a).full_address,coinTypeB:D(u.coin_type_b).full_address};n.push(m)}})}catch(a){console.log("getPoolImmutables",a)}return r.data=n,o&&this.updateCache(`${i}_getPoolImmutables`,n,Z),r}async getPoolsWithPage(e=[],t="all",i=!1){var s,a,c;const n=[];let r=[];e.length>0?r=[...e]:(await this.getPoolImmutablesWithPage(t,i)).data.forEach(u=>r.push(u.poolAddress));const o=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0,showType:!0});for(const d of o){if(d.error!=null||((a=(s=d.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`getPoolWithPages error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const u=ga(d);n.push(u);const m=`${u.poolAddress}_getPoolObject`;this.updateCache(m,u,Z)}return n}async getPool(e,t=!0){var s,a,c;const i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if(r.error!=null||((a=(s=r.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`getPool error code: ${((c=r.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const o=ga(r);return this.updateCache(i,o),o}async getPoolByCoins(e,t){if(e.length===0)return[];const i=this._sdk.sdkOptions.swapCountUrl,n=await fetch(i);let r;try{r=await n.json()}catch{throw new W(`Failed tp [arse response from ${i}].`,"InvalidSwapCountUrl")}const o=r.data.lp_list;if(!o||o.length===0)throw new W(`Failed tp [arse response from ${i}].`,"PoolsNotFound");const s=[];for(const a of o)e.includes(a.coin_a_address)&&e.includes(a.coin_b_address)&&(t!=null?a.object.feeRate===t&&s.push(a.address):s.push(a.address));return s.length>0?await this.getPools(s):[]}async creatPoolsTransactionPayload(e){for(const i of e)if(Za(pe(i.coinTypeA),pe(i.coinTypeB))){const n=i.coinTypeB;i.coinTypeB=i.coinTypeA,i.coinTypeA=n}return await this.creatPool(e)}async creatPoolTransactionPayload(e){if(Za(pe(e.coinTypeA),pe(e.coinTypeB))){const t=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=t}return"fix_amount_a"in e?await this.creatPoolAndAddLiquidity(e):await this.creatPool([e])}async getClmmConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.clmm_pool,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=No(r),s=(await this._sdk.fullClient.queryEventsByPage({Transaction:o})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return s.length>0&&(s.forEach(c=>{const d=c.parsedJson;if(c.type)switch(D(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=d.global_config_id,a.admin_cap_id=d.admin_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=d.pools_id;break;case`${t}::rewarder::RewarderInitEvent`:a.global_vault_id=d.global_vault_id;break;case`${t}::partner::InitPartnerEvent`:a.partners_id=d.partners_id;break}}),this.updateCache(i,a,Z)),a}async getSuiTransactionResponse(e,t=!1){const i=`${e}_getSuiTransactionResponse`,n=this.getCache(i,t);if(n!==void 0)return n;let r;try{r=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{r=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(i,r,Z),r}async creatPool(e){const t=new $,{integrate:i,clmm_pool:n}=this.sdk.sdkOptions,r=j(n),o=r.global_config_id,s=r.pools_id;return e.forEach(a=>{const c=[t.object(o),t.object(s),t.pure.u32(a.tick_spacing),t.pure.u128(a.initialize_sqrt_price),t.pure.string(a.uri),t.object(F)];t.moveCall({target:`${i.published_at}::${_o}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),t}async creatPoolAndAddLiquidity(e){if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const t=new $,{integrate:i,clmm_pool:n}=this.sdk.sdkOptions,r=j(n),o=r.global_config_id,s=r.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=re.buildAddLiquidityFixTokenCoinInput(t,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,a,!1),d=re.buildAddLiquidityFixTokenCoinInput(t,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,a,!1),u=[t.object(o),t.object(s),t.pure.u32(e.tick_spacing),t.pure.u128(e.initialize_sqrt_price),t.pure.string(e.uri),c.targetCoin,d.targetCoin,t.pure.u32(Number(ii(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(ii(BigInt(e.tick_upper)).toString())),t.pure.u64(e.amount_a),t.pure.u64(e.amount_b),t.pure.bool(e.fix_amount_a),t.object(F)];return t.moveCall({target:`${i.published_at}::${xn}::create_pool_with_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:u}),t}async fetchTicks(e){let t=[],i=[];for(;;){const r=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:i,limit:512});if(t=[...t,...r],r.length<512)break;i=[r[r.length-1].index]}return t}async getTicks(e){var d;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=[],r=[e.coinTypeA,e.coinTypeB],o=new $,s=o.makeMoveVec({elements:e.start.map(u=>o.pure.u32(u)),type:"u32"}),a=[o.object(e.pool_id),s,o.pure.u64(e.limit.toString())];if(o.moveCall({target:`${t.published_at}::${Vi}::fetch_ticks`,arguments:a,typeArguments:r}),!Jt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const c=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(c.error!=null)throw new W(`getTicks error code: ${c.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(d=c.events)==null||d.forEach(u=>{D(u.type).name==="FetchTicksResultEvent"&&u.parsedJson.ticks.forEach(m=>{n.push(Pg(m))})}),n}async fetchPositionRewardList(e){var s;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=[];let r=[];const o=512;for(;;){const a=[e.coinTypeA,e.coinTypeB],c=new $,d=c.makeMoveVec({elements:r.map(k=>c.pure.address(k)),type:void 0}),u=[c.object(e.pool_id),d,c.pure.u64(o)];if(c.moveCall({target:`${t.published_at}::${Vi}::fetch_positions`,arguments:u,typeArguments:a}),!Jt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const m=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:i.address});if(m.error!=null)throw new W(`fetch position reward error code: ${m.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const g=[];if((s=m==null?void 0:m.events)==null||s.forEach(k=>{D(k.type).name==="FetchPositionsEvent"&&k.parsedJson.positions.forEach(x=>{const M=sf(x);g.push(M)})}),n.push(...g),g.length<o)break;r=[g[g.length-1].pos_object_id]}return n}async fetchTicksByRpc(e){let t=[],i=null;const n=512;for(;;){const r=[],o=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:i,limit:n});if(i=o.nextCursor,o.data.forEach(s=>{D(s.objectType).module==="skip_list"&&r.push(s.objectId)}),t=[...t,...await this.getTicksByRpc(r)],i===null||o.data.length<n)break}return t}async getTicksByRpc(e){var n,r,o;const t=[],i=await this.sdk.fullClient.batchGetObjects(e,{showContent:!0,showType:!0});for(const s of i){if(s.error!=null||((r=(n=s.data)==null?void 0:n.content)==null?void 0:r.dataType)!=="moveObject")throw new W(`getTicksByRpc error code: ${((o=s.error)==null?void 0:o.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=ba(s);a!=null&&t.push(a)}return t}async getTickDataByIndex(e,t){var r,o;const i={type:"u64",value:ii(BigInt(lg(t).toString())).toString()},n=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:i});if(n.error!=null||((o=(r=n.data)==null?void 0:r.content)==null?void 0:o.dataType)!=="moveObject")throw new W(`get tick by index: ${t} error: ${n.error}`,"InvalidTickIndex");return ba(n)}async getTickDataByObjectId(e){var i,n,r;const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});if(t.error!=null||((n=(i=t.data)==null?void 0:i.content)==null?void 0:n.dataType)!=="moveObject")throw new W(`getTicksByRpc error code: ${((r=t.error)==null?void 0:r.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return ba(t)}async getPartnerRefFeeAmount(e,t=!0){var c,d;const i=await this._sdk.fullClient.batchGetObjects([e],{showOwner:!0,showContent:!0,showDisplay:t,showType:!0});if(i[0].error!=null||((d=(c=i[0].data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new W(`get partner by object id: ${e} error: ${i[0].error}`,"NotFoundPartnerObject");const n=i[0].data.content.fields.balances,r=await this._sdk.fullClient.getDynamicFieldsByPage(n.fields.id.id),o=[];r.data.forEach(u=>{var m,g;if(u.error!=null||((g=(m=u.data)==null?void 0:m.content)==null?void 0:g.dataType)!=="moveObject")throw new W(`when getPartnerRefFeeAmount get partner object error: ${u.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");o.push(u.objectId)});const s=[];return(await this._sdk.fullClient.batchGetObjects(o,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(u=>{var g,k;if(u.error!=null||((k=(g=u.data)==null?void 0:g.content)==null?void 0:k.dataType)!=="moveObject")throw new W(`get coin by object id: ${u.data.objectId} error: ${u.error}`,"InvalidParnterRefFeeFields");const m={coinAddress:u.data.content.fields.name,coinObjectId:u.data.objectId,balance:BigInt(u.data.content.fields.value)};s.push(m)}),s}async claimPartnerRefFeePayload(e,t,i){const n=new $,{clmm_pool:r}=this.sdk.sdkOptions,{global_config_id:o}=j(r),s=[i],a=[n.object(o),n.object(e),n.object(t)];return n.moveCall({target:`${r.published_at}::${Zm}::claim_ref_fee`,arguments:a,typeArguments:s}),n}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},Ng=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(e,t=[],i=!0){const n=[],r=await this._sdk.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:i,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),o=t.length>0;for(const s of r.data)if(D(s.data.type).full_address===this.buildPositionType()){const c=Nr(s),d=`${c.pos_object_id}_getPositionList`;this.updateCache(d,c,Z),o?t.includes(c.pool)&&n.push(c):n.push(c)}return n}async getPosition(e,t,i=!0,n=!0){let r=await this.getSimplePosition(t,n);return i&&(r=await this.updatePositionRewarders(e,r)),r}async getPositionById(e,t=!0,i=!0){const n=await this.getSimplePosition(e,i);if(t){const r=await this._sdk.Pool.getPool(n.pool,!1);return await this.updatePositionRewarders(r.position_manager.positions_handle,n)}return n}async getSimplePosition(e,t=!0){const i=`${e}_getPositionList`;let n=this.getSimplePositionByCache(e);if(n===void 0){const r=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0,showDisplay:t,showOwner:!0}});n=Nr(r),this.updateCache(i,n,Z)}return n}getSimplePositionByCache(e){const t=`${e}_getPositionList`;return this.getCache(t)}async getSipmlePositionList(e,t=!0){const i=[],n=[];return e.forEach(r=>{const o=this.getSimplePositionByCache(r);o?i.push(o):n.push(r)}),n.length>0&&(await this._sdk.fullClient.batchGetObjects(n,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(o=>{if(o.error==null){const s=Nr(o);i.push(s);const a=`${s.pos_object_id}_getPositionList`;this.updateCache(a,s,Z)}}),i}async updatePositionRewarders(e,t){const i=await this.getPositionRewarders(e,t.pos_object_id);return{...t,...i}}async getPositionRewarders(e,t){try{const i=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),r=le(i.data).value.fields.value;return sf(r)}catch(i){console.log(i);return}}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new $;for(const d of e){const u=[d.coinTypeA,d.coinTypeB],m=[r.object(j(t).global_config_id),r.object(d.poolAddress),r.pure.address(d.positionId)];r.moveCall({target:`${i.published_at}::${Vi}::fetch_position_fees`,arguments:m,typeArguments:u})}if(!Jt(n.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address});if(o.error!=null)throw new W(`fetch position fee error code: ${o.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const s=(c=o.events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionFeesEvent");if(s.length===0)return[];const a=[];for(let d=0;d<s.length;d+=1){const{parsedJson:u}=s[d],m={feeOwedA:new A(u.fee_owned_a),feeOwedB:new A(u.fee_owned_b),position_id:u.position_id};a.push(m)}return a}async batchFetchPositionFees(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB})}const i={};if(t.length>0){const n=await this.fetchPosFeeAmount(t);for(const r of n)i[r.position_id]=r;return i}return i}async createAddLiquidityFixTokenPayload(e,t,i,n,r){if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:s,isAdjustCoinB:a}=Ms(e);if(e=e,e.fix_amount_a&&s||!e.fix_amount_a&&a)return i=await re.buildAddLiquidityFixTokenForGas(this._sdk,o,e,t,i,n,r),i}return re.buildAddLiquidityFixToken(this._sdk,o,e,i,n,r)}async createAddLiquidityPayload(e,t,i,n){const{integrate:r,clmm_pool:o}=this._sdk.sdkOptions;if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const s=ii(BigInt(e.tick_lower)).toString(),a=ii(BigInt(e.tick_upper)).toString(),c=[e.coinTypeA,e.coinTypeB];t=t||new $;const d=!Ar(e.pos_id),u=BigInt(e.max_amount_a),m=BigInt(e.max_amount_b);let g,k;if(i==null||n==null){const x=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);g=re.buildCoinForAmount(t,x,u,e.coinTypeA,!1),k=re.buildCoinForAmount(t,x,m,e.coinTypeB,!1)}else g={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},k={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"};if(d)t.moveCall({target:`${r.published_at}::${xn}::open_position_with_liquidity`,typeArguments:c,arguments:[t.object(j(o).global_config_id),t.object(e.pool_id),t.pure.u32(Number(s)),t.pure.u32(Number(a)),g.targetCoin,k.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object(F)]});else{const x=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=re.createCollectRewarderAndFeeParams(this._sdk,t,e,x,g.remainCoins,k.remainCoins),t.moveCall({target:`${r.published_at}::${xn}::add_liquidity`,typeArguments:c,arguments:[t.object(j(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),g.targetCoin,k.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object(F)]})}return t}async removeLiquidityTransactionPayload(e,t){if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions,r="remove_liquidity";t=t||new $;const o=[e.coinTypeA,e.coinTypeB],s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=re.createCollectRewarderAndFeeParams(this._sdk,t,e,s);const a=[t.object(j(i).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(F)];return t.moveCall({target:`${n.published_at}::${_o}::${r}`,typeArguments:o,arguments:a}),t}async closePositionTransactionPayload(e,t){if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions;t=t||new $;const r=[e.coinTypeA,e.coinTypeB],o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return t=re.createCollectRewarderAndFeeParams(this._sdk,t,e,o),t.moveCall({target:`${n.published_at}::${_o}::close_position`,typeArguments:r,arguments:[t.object(j(i).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(F)]}),t}openPositionTransactionPayload(e,t){const{clmm_pool:i,integrate:n}=this.sdk.sdkOptions;t=t||new $;const r=[e.coinTypeA,e.coinTypeB],o=ii(BigInt(e.tick_lower)).toString(),s=ii(BigInt(e.tick_upper)).toString(),a=[t.object(j(i).global_config_id),t.object(e.pool_id),t.pure.u32(Number(o)),t.pure.u32(Number(s))];return t.moveCall({target:`${n.published_at}::${_o}::open_position`,typeArguments:r,arguments:a}),t}async collectFeeTransactionPayload(e,t,i,n){if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0);t=t||new $;const o=re.buildCoinForAmount(t,r,BigInt(0),e.coinTypeA,!1),s=re.buildCoinForAmount(t,r,BigInt(0),e.coinTypeB,!1),a=i??o.targetCoin,c=n??s.targetCoin;return this.createCollectFeePaylod(e,t,a,c),t}createCollectFeePaylod(e,t,i,n){const{clmm_pool:r,integrate:o}=this.sdk.sdkOptions,s=[e.coinTypeA,e.coinTypeB],a=[t.object(j(r).global_config_id),t.object(e.pool_id),t.object(e.pos_id),i,n];return t.moveCall({target:`${o.published_at}::${xn}::collect_fee`,typeArguments:s,arguments:a}),t}createCollectFeeNoSendPaylod(e,t,i,n){const{clmm_pool:r,integrate:o}=this.sdk.sdkOptions,s=[e.coinTypeA,e.coinTypeB],a=[t.object(j(r).global_config_id),t.object(e.pool_id),t.object(e.pos_id),i,n];return t.moveCall({target:`${o.published_at}::${Ju}::collect_fee`,typeArguments:s,arguments:a}),t}async calculateFee(e){const t=await this.collectFeeTransactionPayload(e);if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const i=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:t,sender:this._sdk.senderAddress});for(const n of i.events)if(D(n.type).name==="CollectFeeEvent"){const r=n.parsedJson;return{feeOwedA:r.amount_a,feeOwedB:r.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},Rg=class{constructor(e){G(this,"_sdk");G(this,"growthGlobal");this._sdk=e,this.growthGlobal=[se,se,se]}get sdk(){return this._sdk}async emissionsEveryDay(e){const i=(await this.sdk.Pool.getPool(e)).rewarder_infos;if(!i)return null;const n=[];for(const r of i){const o=ve.fromX64(new A(r.emissions_per_second));n.push({emissions:Math.floor(o.toNumber()*60*60*24),coin_address:r.coinAddress})}return n}async updatePoolRewarder(e,t){const i=await this.sdk.Pool.getPool(e),n=i.rewarder_last_updated_time;if(i.rewarder_last_updated_time=t.toString(),Number(i.liquidity)===0||t.eq(new A(n)))return i;const r=t.div(new A(1e3)).sub(new A(n)).add(new A(15)),o=i.rewarder_infos;for(let s=0;s<o.length;s+=1){const a=o[s],c=ve.checkMulDivFloor(r,new A(a.emissions_per_second),new A(i.liquidity),128);this.growthGlobal[s]=new A(a.growth_global).add(new A(c))}return i}async posRewardersAmount(e,t,i){const n=Date.parse(new Date().toString()),r=await this.updatePoolRewarder(e,new A(n)),o=await this.sdk.Position.getPositionRewarders(t,i);if(o===void 0)return[];const s=r.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(s,o.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(s,o.tick_upper_index);return this.posRewardersAmountInternal(r,o,a,c)}async poolRewardersAmount(e,t){const i=Date.parse(new Date().toString()),n=await this.updatePoolRewarder(t,new A(i)),r=await this.sdk.Position.getPositionList(e,[t]),o=await this.getPoolLowerAndUpperTicks(n.ticks_handle,r),s=[se,se,se];for(let a=0;a<r.length;a+=1){const c=await this.posRewardersAmountInternal(n,r[a],o[0][a],o[1][a]);for(let d=0;d<3;d+=1)s[d]=s[d].add(c[d].amount_owed)}return s}posRewardersAmountInternal(e,t,i,n){const r=t.tick_lower_index,o=t.tick_upper_index,s=jg(e,i,n,r,o,this.growthGlobal),a=[],c=[];if(s.length>0){let d=ve.subUnderflowU128(s[0],new A(t.reward_growth_inside_0));d.gt(new A("3402823669209384634633745948738404"))&&(d=Zi);const u=ve.checkMulShiftRight(new A(t.liquidity),d,64,128);a.push(s[0]),c.push({amount_owed:new A(t.reward_amount_owed_0).add(u),coin_address:e.rewarder_infos[0].coinAddress})}if(s.length>1){let d=ve.subUnderflowU128(s[1],new A(t.reward_growth_inside_1));d.gt(new A("3402823669209384634633745948738404"))&&(d=Zi);const u=ve.checkMulShiftRight(new A(t.liquidity),d,64,128);a.push(s[1]),c.push({amount_owed:new A(t.reward_amount_owed_1).add(u),coin_address:e.rewarder_infos[1].coinAddress})}if(s.length>2){let d=ve.subUnderflowU128(s[2],new A(t.reward_growth_inside_2));d.gt(new A("3402823669209384634633745948738404"))&&(d=Zi);const u=ve.checkMulShiftRight(new A(t.liquidity),d,64,128);a.push(s[2]),c.push({amount_owed:new A(t.reward_amount_owed_2).add(u),coin_address:e.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB,rewarderInfo:o.rewarder_infos})}const i={};if(t.length>0){const n=await this.fetchPosRewardersAmount(t);for(const r of n)i[r.positionId]=r.rewarderAmountOwed;return i}return i}async fetchPositionRewarders(e,t){const i={poolAddress:e.poolAddress,positionId:t,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,rewarderInfo:e.rewarder_infos};return(await this.fetchPosRewardersAmount([i]))[0].rewarderAmountOwed}async batchFetchPositionFees(e){const t=[];for(const n of e){const r=await this._sdk.Position.getPositionById(n,!1),o=await this._sdk.Pool.getPool(r.pool,!1);t.push({poolAddress:o.poolAddress,positionId:r.pos_object_id,coinTypeA:o.coinTypeA,coinTypeB:o.coinTypeB})}const i={};if(t.length>0){const n=await this.fetchPosFeeAmount(t);for(const r of n)i[r.position_id]=r;return i}return i}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new $;for(const d of e){const u=[d.coinTypeA,d.coinTypeB],m=[r.object(j(t).global_config_id),r.object(d.poolAddress),r.pure.address(d.positionId)];r.moveCall({target:`${i.published_at}::${Vi}::fetch_position_fees`,arguments:m,typeArguments:u})}const s=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address})).events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionFeesEvent");if(s.length===0)return[];const a=[];for(let d=0;d<s.length;d+=1){const{parsedJson:u}=s[d],m={feeOwedA:new A(u.fee_owned_a),feeOwedB:new A(u.fee_owned_b),position_id:u.position_id};a.push(m)}return a}async fetchPosRewardersAmount(e){var c;const{clmm_pool:t,integrate:i,simulationAccount:n}=this.sdk.sdkOptions,r=new $;for(const d of e){const u=[d.coinTypeA,d.coinTypeB],m=[r.object(j(t).global_config_id),r.object(d.poolAddress),r.pure.address(d.positionId),r.object(F)];r.moveCall({target:`${i.published_at}::${Vi}::fetch_position_rewards`,arguments:m,typeArguments:u})}if(!Jt(n.address))throw new W(`this config simulationAccount: ${n.address} is not set right`,"InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:n.address});if(o.error!=null)throw new W(`fetch position rewards error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const s=(c=o.events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionRewardsEvent");if(s.length===0)return[];if(s.length!==e.length)throw new W("valueData.length !== params.pools.length");const a=[];for(let d=0;d<s.length;d+=1){const u={poolAddress:e[d].poolAddress,positionId:e[d].positionId,rewarderAmountOwed:[]};for(let m=0;m<e[d].rewarderInfo.length;m+=1)u.rewarderAmountOwed.push({amount_owed:new A(s[d].parsedJson.data[m]),coin_address:e[d].rewarderInfo[m].coinAddress});a.push(u)}return a}async fetchPoolRewardersAmount(e,t){const i=await this.sdk.Pool.getPool(t),n=await this.sdk.Position.getPositionList(e,[t]),r=[];for(const a of n)r.push({poolAddress:i.poolAddress,positionId:a.pos_object_id,rewarderInfo:i.rewarder_infos,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB});const o=await this.fetchPosRewardersAmount(r),s=[se,se,se];if(o!=null)for(const a of o)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)s[c]=s[c].add(a.rewarderAmountOwed[c].amount_owed);return s}async getPoolLowerAndUpperTicks(e,t){const i=[],n=[];for(const r of t){const o=await this.sdk.Pool.getTickDataByIndex(e,r.tick_lower_index),s=await this.sdk.Pool.getTickDataByIndex(e,r.tick_upper_index);i.push(o),n.push(s)}return[i,n]}async collectRewarderTransactionPayload(e){if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let i=new $;return i=re.createCollectRewarderAndFeeParams(this._sdk,i,e,t),i}async batchCollectRewardePayload(e,t,i,n){if(!Jt(this._sdk.senderAddress))throw new W("this config sdk senderAddress is not set right","InvalidSendAddress");const r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);t=t||new $;const o={};return e.forEach(s=>{const a=Rt(s.coinTypeA),c=Rt(s.coinTypeB);if(s.collect_fee){let u=o[a];u==null&&(i==null?u=re.buildCoinForAmount(t,r,BigInt(0),a,!1):u={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},o[a]=u);let m=o[c];m==null&&(n==null?m=re.buildCoinForAmount(t,r,BigInt(0),c,!1):m={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},o[c]=m),t=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:s.pool_id,pos_id:s.pos_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB},t,u.targetCoin,m.targetCoin)}const d=[];s.rewarder_coin_types.forEach(u=>{const m=Rt(u);let g=o[u];g===void 0&&(g=re.buildCoinForAmount(t,r,BigInt(0),m,!1),o[m]=g),d.push(g.targetCoin)}),t=this.createCollectRewarderNoSendPaylod(s,t,d)}),Object.keys(o).forEach(s=>{const a=o[s];a.isMintZeroCoin&&re.buildTransferCoin(this._sdk,t,a.targetCoin,s,this._sdk.senderAddress)}),t}createCollectRewarderPaylod(e,t,i){const{clmm_pool:n,integrate:r}=this.sdk.sdkOptions,o=j(n),s=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${r.published_at}::${xn}::collect_reward`,typeArguments:[...s,a],arguments:[t.object(o.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(o.global_vault_id),i[c],t.object(F)]})}),t}createCollectRewarderNoSendPaylod(e,t,i){const{clmm_pool:n,integrate:r}=this.sdk.sdkOptions,o=j(n),s=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${r.published_at}::${Ju}::collect_reward`,typeArguments:[...s,a],arguments:[t.object(o.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(o.global_vault_id),i[c],t.object(F)]})}),t}};function zo(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}var Dg=class{constructor(e){G(this,"graph");G(this,"pathProviders");G(this,"coinProviders");G(this,"_coinAddressMap");G(this,"poolAddressMap");G(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new oh(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=e,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:i,reversePair:n}=zo(e,t);let r=this.poolAddressMap.get(i);if(r!=null)return{addressMap:r,direction:!0};if(r=this.poolAddressMap.get(n),r!=null)return{addressMap:r,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinAddressMap.set(e.address,e)})}loadGraph(e,t){this.addCoinProvider(e),this.addPathProvider(t),this.setCoinList(),this.pathProviders.forEach(i=>{const{paths:n}=i;n.forEach(r=>{const o=this.graph.getVertexByKey(r.base)??new Wc(r.base),s=this.graph.getVertexByKey(r.quote)??new Wc(r.quote);this.graph.addEdge(new nh(o,s));const a=this._coinAddressMap.get(r.base),c=this._coinAddressMap.get(r.quote);if(a!=null&&c!=null){const d=zo(r.base,r.quote).pair;this.poolAddressMap.set(d,r.addressMap)}})})}addPathProvider(e){for(let t=0;t<e.paths.length;t+=1){const{base:i,quote:n}=e.paths[t];i.localeCompare(n)<0&&(e.paths[t].base=n,e.paths[t].quote=i),i==="0x2::sui::SUI"&&(e.paths[t].base=n,e.paths[t].quote=i),n==="0x2::sui::SUI"&&(e.paths[t].base=i,e.paths[t].quote=n)}return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.get(e)}getFeeRate(e,t,i){const n=zo(e,t).pair,r=this.poolAddressMap.get(n);if(r!=null){for(const[a,c]of r.entries())if(c===i)return a*100}const o=zo(e,t).reversePair,s=this.poolAddressMap.get(o);if(s!=null){for(const[a,c]of s.entries())if(c===i)return a*100}return 0}async price(e,t,i,n,r,o,s){const a=this.tokenInfo(e),c=this.tokenInfo(t);if(a===void 0||c===void 0)throw new W("From/To coin is undefined","InvalidCoin");const d=this.graph.getVertexByKey(a.address),u=this.graph.getVertexByKey(c.address),m=this.graph.findAllPath(d,u),g=Array.from(m);if(g.length===0)throw new W("No find valid path in coin graph","NotFoundPath");let k=[];for(let ie=0;ie<g.length;ie+=1){const z=g[ie];if(z.length>3)continue;const te=[],O=[],f=[],l=[];for(let h=0;h<z.length-1;h+=1){const b=z[h].value.toString(),w=z[h+1].value.toString(),y=this.getPoolAddressMapAndDirection(b,w),C=y==null?void 0:y.addressMap,v=y==null?void 0:y.direction;C!=null&&v!=null&&(O.push(v),te.push(b),te.push(w),C.forEach(p=>{h===0?f.push(p):l.push(p)}))}for(const h of f)if(l.length>0)for(const b of l){const w={stepNums:2,poolAB:h,poolBC:b,a2b:O[0],b2c:O[1],amount:i,byAmountIn:n,coinTypeA:te[0],coinTypeB:te[1],coinTypeC:te[3]};k.push(w)}else{const b={stepNums:1,poolAB:h,poolBC:void 0,a2b:O[0],b2c:void 0,amount:i,byAmountIn:n,coinTypeA:te[0],coinTypeB:te[1],coinTypeC:void 0};k.push(b)}}const x=k.filter(ie=>ie.stepNums===1),M=k.filter(ie=>ie.stepNums!==1);let I=[];try{I=await this.getPoolWithTVL()}catch{I=[]}if(I.length>0){const ie=new Map(I.map(z=>[z.poolAddress,z]));M.sort((z,te)=>{let O=0,f=0;if(ie.has(z.poolAB)&&ie.has(z.poolBC)){const l=ie.get(z.poolAB),h=ie.get(z.poolBC);O=Math.min(l.tvl,h.tvl)}if(ie.has(te.poolAB)&&ie.has(te.poolBC)){const l=ie.get(te.poolAB),h=ie.get(te.poolBC);f=Math.min(l.tvl,h.tvl)}return f-O})}if(k=[...x,...M],k.length===0){if(s!=null){const ie=await this.sdk.Swap.preSwapWithMultiPool(s),z={amountIn:new A(ie.estimatedAmountIn),amountOut:new A(ie.estimatedAmountOut),poolAddress:[ie.poolAddress],a2b:[ie.aToB],rawAmountLimit:n?[ie.estimatedAmountOut]:[ie.estimatedAmountIn],isExceed:ie.isExceed,coinType:[e,t]},te={paths:[z],partner:o,priceSlippagePoint:r};return{amountIn:new A(ie.estimatedAmountIn),amountOut:new A(ie.estimatedAmountOut),paths:[z],a2b:ie.aToB,b2c:void 0,byAmountIn:n,isExceed:ie.isExceed,targetSqrtPrice:[ie.estimatedEndSqrtPrice],currentSqrtPrice:[ie.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:te}}throw new W("No parameters available for service downgrade","NoDowngradeNeedParams")}const E=await this.preRouterSwapA2B2C(k.slice(0,16));if(E==null){if(s!=null){const z=await this.sdk.Swap.preSwapWithMultiPool(s),te={amountIn:new A(z.estimatedAmountIn),amountOut:new A(z.estimatedAmountOut),poolAddress:[z.poolAddress],a2b:[z.aToB],rawAmountLimit:n?[z.estimatedAmountOut]:[z.estimatedAmountIn],isExceed:z.isExceed,coinType:[e,t]},O={paths:[te],partner:o,priceSlippagePoint:r};return{amountIn:new A(z.estimatedAmountIn),amountOut:new A(z.estimatedAmountOut),paths:[te],a2b:z.aToB,b2c:void 0,byAmountIn:n,isExceed:z.isExceed,targetSqrtPrice:[z.estimatedEndSqrtPrice],currentSqrtPrice:[z.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:O}}return{amountIn:se,amountOut:se,paths:[],a2b:!1,b2c:!1,byAmountIn:n,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const B=E.index,N=k[B].poolBC!=null?[k[B].poolAB,k[B].poolBC]:[k[B].poolAB],L=n?[E.amountMedium,E.amountOut]:[E.amountIn,E.amountMedium],X=[];X.push(k[B].a2b),E.stepNum>1&&X.push(k[B].b2c);const K=[];K.push(k[B].coinTypeA),K.push(k[B].coinTypeB),E.stepNum>1&&K.push(k[B].coinTypeC);const ee={amountIn:E.amountIn,amountOut:E.amountOut,poolAddress:N,a2b:X,rawAmountLimit:L,isExceed:E.isExceed,coinType:K},me={paths:[ee],partner:o,priceSlippagePoint:r};return{amountIn:E.amountIn,amountOut:E.amountOut,paths:[ee],a2b:k[B].a2b,b2c:E.stepNum>1?k[B].b2c:void 0,byAmountIn:n,isExceed:E.isExceed,targetSqrtPrice:E.targetSqrtPrice,currentSqrtPrice:E.currentSqrtPrice,coinTypeA:k[B].coinTypeA,coinTypeB:k[B].coinTypeB,coinTypeC:E.stepNum>1?k[B].coinTypeC:void 0,createTxParams:me}}async priceUseV1(e,t,i,n,r,o,s){if(s!=null){const a=await this.sdk.Swap.preSwapWithMultiPool(s),c={amountIn:new A(a.estimatedAmountIn),amountOut:new A(a.estimatedAmountOut),poolAddress:[a.poolAddress],a2b:[a.aToB],rawAmountLimit:n?[a.estimatedAmountOut]:[a.estimatedAmountIn],isExceed:a.isExceed,coinType:[e,t]},d={paths:[c],partner:o,priceSlippagePoint:r};return{amountIn:new A(a.estimatedAmountIn),amountOut:new A(a.estimatedAmountOut),paths:[c],a2b:a.aToB,b2c:void 0,byAmountIn:n,isExceed:a.isExceed,targetSqrtPrice:[a.estimatedEndSqrtPrice],currentSqrtPrice:[a.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:d}}throw new W("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(e){var m;if(e.length===0)return null;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new $;for(const g of e)if(g.stepNums>1){const k=[n.object(g.poolAB),n.object(g.poolBC),n.pure.bool(g.a2b),n.pure.bool(g.b2c),n.pure.bool(g.byAmountIn),n.pure.u64(g.amount.toString())],x=[];g.a2b?x.push(g.coinTypeA,g.coinTypeB):x.push(g.coinTypeB,g.coinTypeA),g.b2c?x.push(g.coinTypeB,g.coinTypeC):x.push(g.coinTypeC,g.coinTypeB),n.moveCall({target:`${t.published_at}::${sr}::calculate_router_swap_result`,typeArguments:x,arguments:k})}else{const k=[n.object(g.poolAB),n.pure.bool(g.a2b),n.pure.bool(g.byAmountIn),n.pure.u64(g.amount.toString())],x=g.a2b?[g.coinTypeA,g.coinTypeB]:[g.coinTypeB,g.coinTypeA];n.moveCall({target:`${t.published_at}::${Qm}::get_expect_swap_result`,arguments:k,typeArguments:x})}if(!Jt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const o=(m=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address})).events)==null?void 0:m.filter(g=>D(g.type).name==="CalculatedRouterSwapResultEvent"||D(g.type).name==="ExpectSwapResultEvent");if(o.length===0)return null;let s=e[0].byAmountIn?se:Lr,a=0;for(let g=0;g<o.length;g+=1)if(!o[g].parsedJson.data.is_exceed)if(e[0].byAmountIn){const k=new A(o[g].parsedJson.data.amount_out);k.gt(s)&&(a=g,s=k)}else{const k=e[g].stepNums>1?new A(o[g].parsedJson.data.amount_in):new A(o[g].parsedJson.data.amount_in).add(new A(o[g].parsedJson.data.fee_amount));k.lt(s)&&(a=g,s=k)}const c=[],d=[];return e[a].stepNums>1?(d.push(o[a].parsedJson.data.target_sqrt_price_ab,o[a].parsedJson.data.target_sqrt_price_cd),c.push(o[a].parsedJson.data.current_sqrt_price_ab,o[a].parsedJson.data.current_sqrt_price_cd)):(d.push(o[a].parsedJson.data.after_sqrt_price),c.push(o[a].parsedJson.current_sqrt_price)),{index:a,amountIn:e[0].byAmountIn?e[a].amount:s,amountMedium:o[a].parsedJson.data.amount_medium,amountOut:e[0].byAmountIn?s:e[a].amount,targetSqrtPrice:d,currentSqrtPrice:c,isExceed:o[a].parsedJson.data.is_exceed,stepNum:e[a].stepNums}}async getPoolWithTVL(){const e=[],{swapCountUrl:t}=this._sdk.sdkOptions;if(!t)return e;let i;try{i=await fetch(t)}catch{throw new W(`Failed to get pool list with liquidity from ${t}.`,"InvalidSwapCountUrl")}let n;try{n=await i.json()}catch{throw new W(`Failed tp [arse response from ${t}].`,"InvalidSwapCountUrl")}if(n.code!==200)throw new W(`Failed to get pool list from ${t}. Statu code is ${n.code}.`,"InvalidSwapCountUrl");const{pools:r}=n.data;for(const o of r)e.push({poolAddress:o.swap_account,tvl:Number(o.tvl_in_usd)});return e}},$g=class{constructor(e){G(this,"_sdk");G(this,"calculateSingleImpact",(e,t)=>t.minus(e).div(t).mul(100));this._sdk=e}get sdk(){return this._sdk}calculateSwapFee(e){let t=T(0);return e.forEach(i=>{const n=i.basePaths.length;if(n>0){const r=i.basePaths[0],o=r.label==="Cetus"?new Q(r.feeRate).div(10**6):new Q(r.feeRate).div(10**9),s=T(r.inputAmount).div(10**r.fromDecimal).mul(o);if(t=t.add(s),n>1){const a=i.basePaths[1],c=r.direction?r.currentPrice:new Q(1).div(r.currentPrice),d=a.direction?a.currentPrice:new Q(1).div(a.currentPrice),u=a.label==="Cetus"?new Q(a.feeRate).div(10**6):new Q(a.feeRate).div(10**9),g=T(a.outputAmount).div(10**a.toDecimal).mul(u).div(c.mul(d));t=t.add(g)}}}),t.toString()}calculateSwapPriceImpact(e){let t=T(0);return e.forEach(i=>{const n=i.basePaths.length;if(n===1){const r=i.basePaths[0],o=T(r.outputAmount).div(10**r.toDecimal),s=T(r.inputAmount).div(10**r.fromDecimal),a=o.div(s),c=r.direction?new Q(r.currentPrice):new Q(1).div(r.currentPrice);t=t.add(this.calculateSingleImpact(a,c))}if(n===2){const r=i.basePaths[0],o=i.basePaths[1],s=r.direction?new Q(r.currentPrice):new Q(1).div(r.currentPrice),a=o.direction?new Q(o.currentPrice):new Q(1).div(o.currentPrice),c=s.mul(a),d=new Q(o.outputAmount).div(10**o.toDecimal),u=new Q(r.inputAmount).div(10**r.fromDecimal),m=d.div(u);t=t.add(this.calculateSingleImpact(m,c))}}),t.toString()}async preSwapWithMultiPool(e){var d;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new $,r=[e.coinTypeA,e.coinTypeB];for(let u=0;u<e.poolAddresses.length;u+=1){const m=[n.object(e.poolAddresses[u]),n.pure.bool(e.a2b),n.pure.bool(e.byAmountIn),n.pure.u64(e.amount)];n.moveCall({target:`${t.published_at}::${Vi}::calculate_swap_result`,arguments:m,typeArguments:r})}if(!Jt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const o=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address});if(o.error!=null)throw new W(`pre swap with multi pools error code: ${o.error??"unknown error"}, please check config and params`,"InvalidConfig");const s=(d=o.events)==null?void 0:d.filter(u=>D(u.type).name==="CalculatedSwapResultEvent");if(s.length===0)return null;if(s.length!==e.poolAddresses.length)throw new W("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=e.byAmountIn?se:Lr,c=0;for(let u=0;u<s.length;u+=1)if(!s[u].parsedJson.data.is_exceed)if(e.byAmountIn){const m=new A(s[u].parsedJson.data.amount_out);m.gt(a)&&(c=u,a=m)}else{const m=new A(s[u].parsedJson.data.amount_out);m.lt(a)&&(c=u,a=m)}return this.transformSwapWithMultiPoolData({poolAddress:e.poolAddresses[c],a2b:e.a2b,byAmountIn:e.byAmountIn,amount:e.amount,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},s[c].parsedJson)}async preswap(e){var c;const{integrate:t,simulationAccount:i}=this.sdk.sdkOptions,n=new $,r=[e.coinTypeA,e.coinTypeB],o=[n.object(e.pool.poolAddress),n.pure.bool(e.a2b),n.pure.bool(e.byAmountIn),n.pure.u64(e.amount)];if(n.moveCall({target:`${t.published_at}::${Vi}::calculate_swap_result`,arguments:o,typeArguments:r}),!Jt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address});if(s.error!=null)throw new W(`preswap error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=s.events)==null?void 0:c.filter(d=>D(d.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const i=t.amount_in&&t.fee_amount?new A(t.amount_in).add(new A(t.fee_amount)).toString():"";return{poolAddress:e.pool.poolAddress,currentSqrtPrice:e.currentSqrtPrice,estimatedAmountIn:i,estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}transformSwapWithMultiPoolData(e,t){const{data:i}=t;console.log("json data. ",i);const n=i.amount_in&&i.fee_amount?new A(i.amount_in).add(new A(i.fee_amount)).toString():"";return{poolAddress:e.poolAddress,estimatedAmountIn:n,estimatedAmountOut:i.amount_out,estimatedEndSqrtPrice:i.after_sqrt_price,estimatedStartSqrtPrice:i.step_results[0].current_sqrt_price,estimatedFeeAmount:i.fee_amount,isExceed:i.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}calculateRates(e){const{currentPool:t}=e,i=Jm(t);let n;e.a2b?n=e.swapTicks.sort((m,g)=>g.index-m.index):n=e.swapTicks.sort((m,g)=>m.index-g.index);const r=hg(e.a2b,e.byAmountIn,e.amount,i,n);let o=!1;e.byAmountIn?o=r.amountIn.lt(e.amount):o=r.amountOut.lt(e.amount);const s=Hi.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&r.nextSqrtPrice.lt(s)&&(o=!0),!e.a2b&&r.nextSqrtPrice.gt(s)&&(o=!0);let a=0;r.crossTickNum>6&&r.crossTickNum<40&&(a=22e3*(r.crossTickNum-6)),r.crossTickNum>40&&(o=!0);const c=Y.sqrtPriceX64ToPrice(i.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),d=Y.sqrtPriceX64ToPrice(r.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),u=Math.abs(c-d)/c*100;return{estimatedAmountIn:r.amountIn,estimatedAmountOut:r.amountOut,estimatedEndSqrtPrice:r.nextSqrtPrice,estimatedFeeAmount:r.feeAmount,isExceed:o,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:u}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:n,isAdjustCoinB:r}=Ms(e);if(e.a2b&&n||!e.a2b&&r)return await re.buildSwapTransactionForGas(this._sdk,e,i,t)}return re.buildSwapTransaction(this.sdk,e,i)}async createSwapTransactionWithoutTransferCoinsPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:n,isAdjustCoinB:r}=Ms(e);if(e.a2b&&n||!e.a2b&&r)return await re.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,e,i,t)}return re.buildSwapTransactionWithoutTransferCoins(this.sdk,e,i)}},qg=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",i=!1){return await this.factchWarpPoolList(e,t,i)}async getTokenListByCoinTypes(e){const t={},i="getAllRegisteredTokenList",n=this.getCache(i);if(n!==void 0){const o=n;for(const s of e)for(const a of o)if(Rt(s)===Rt(a.address)){t[s]=a;continue}}const r=e.filter(o=>t[o]===void 0);for(const o of r){const s=`${o}_metadata`,a=this.getCache(s);if(a!==void 0)t[o]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:o});if(c){const d={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:o};t[o]=d,this.updateCache(s,d,Z)}}}return t}async factchTokenList(e="",t=!1){var m;const{simulationAccount:i,token:n}=this.sdk.sdkOptions,r="getAllRegisteredTokenList",o=this.getCache(r,t);if(o!==void 0)return o;const s=e.length>0,a=512;let c=0,d=[];if(n===void 0)throw Error("please config token ofsdkOptions");const u=j(n);for(;;){const g=new $;g.moveCall({target:`${n.published_at}::coin_list::${s?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:s?[g.pure.address(u.coin_registry_id),g.pure.address(e),g.pure.u64(c),g.pure.u64(a)]:[g.pure.address(u.coin_registry_id),g.pure.u64(c),g.pure.u64(a)]});const k=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:g,sender:i.address}),x=[];if((m=k.events)==null||m.forEach(M=>{D(M.type).full_address===`${n.published_at}::coin_list::FetchCoinListEvent`&&M.parsedJson.full_list.value_list.forEach(E=>{x.push(this.transformData(E,!1))})}),d=[...d,...x],x.length<a)break;c=d.length}return d}async factchPoolList(e="",t=!1){var m;const{simulationAccount:i,token:n}=this.sdk.sdkOptions,r="getAllRegisteredPoolList",o=this.getCache(r,t);if(o!==void 0)return o;let s=[];const a=512;let c=0;const d=e.length>0;if(n===void 0)throw Error("please config token ofsdkOptions");const u=j(n);for(;;){const g=new $;if(g.moveCall({target:`${n.published_at}::lp_list::${d?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:d?[g.pure.address(u.pool_registry_id),g.pure.address(e),g.pure.u64(c),g.pure.u64(a)]:[g.pure.address(u.pool_registry_id),g.pure.u64(c),g.pure.u64(a)]}),!Jt(i.address))throw new W("this config simulationAccount is not set right","InvalidSimulateAccount");const k=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:g,sender:i.address}),x=[];if((m=k.events)==null||m.forEach(M=>{D(M.type).full_address===`${n.published_at}::lp_list::FetchPoolListEvent`&&M.parsedJson.full_list.value_list.forEach(E=>{x.push(this.transformData(E,!0))})}),s=[...s,...x],x.length<a)break;c=s.length}return s}async factchWarpPoolList(e="",t="",i=!1){const n=await this.factchPoolList(e,i);if(n.length===0)return[];const r=await this.factchTokenList(t,i),o=[];for(const s of n){for(const a of r)a.address===s.coin_a_address&&(s.coinA=a),a.address===s.coin_b_address&&(s.coinB=a);o.push(s)}return o}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.token.package_id,i=`${t}_getTokenConfigEvent`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=No(r),s=await this._sdk.fullClient.queryEventsByPage({Transaction:o}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return s.data.length>0&&s.data.forEach(c=>{const d=D(c.type);if(c.transactionModule==="coin_list")switch(d.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(d.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(i,a,Z),a}transformData(e,t){const i={...e};if(t)try{i.coin_a_address=D(i.coin_a_address).full_address,i.coin_b_address=D(i.coin_b_address).full_address}catch{}else i.address=D(i.address).full_address;if(e.extensions){const n=e.extensions.contents;for(const r of n){const{key:o}=r;let{value:s}=r;if(o==="labels")try{s=JSON.parse(decodeURIComponent(Zo.decode(s)))}catch{}o==="pyth_id"&&(s=ze(s)),i[o]=s}delete i.extensions}return i}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},Lg=class{constructor(e){G(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}calculatePrice(e,t,i,n,r){const o=n?t:i,s=n?i:t;return r==="Cetus"?Y.sqrtPriceX64ToPrice(e,o,s):new Q(e.toString()).div(new Q(10).pow(new Q(s+9-o)))}parseJsonResult(e){return{isExceed:e.is_exceed,isTimeout:e.is_timeout,inputAmount:e.input_amount,outputAmount:e.output_amount,fromCoin:e.from_coin,toCoin:e.to_coin,byAmountIn:e.by_amount_in,splitPaths:e.split_paths.map(i=>({pathIndex:i.path_index,lastQuoteOutput:i.last_quote_output,percent:i.percent,basePaths:i.best_path.map(r=>({direction:r.direction,label:r.label,poolAddress:r.provider,fromCoin:r.from_coin,toCoin:r.to_coin,outputAmount:r.output_amount,inputAmount:r.input_amount,feeRate:r.fee_rate,currentSqrtPrice:new A(r.current_sqrt_price.toString()),afterSqrtPrice:r.label==="Cetus"?new A(r.after_sqrt_price.toString()):se,fromDecimal:r.from_decimal,toDecimal:r.to_decimal,currentPrice:this.calculatePrice(new A(r.current_sqrt_price.toString()),r.from_decimal,r.to_decimal,r.direction,r.label)})),inputAmount:i.input_amount,outputAmount:i.output_amount}))}}async fetchDataWithAxios(e,t,i){try{const n={...t,timeout:i},r=await Em(e,n);return r.status===200?this.parseJsonResult(r.data):null}catch(n){return console.error(n),null}}async getBestRouter(e,t,i,n,r,o,s,a,c=!1,d=!1,u=[]){let m=null,g="v2",k={},x=this.sdk.sdkOptions.aggregatorUrl;if(u.length>0){const M=new URL(x);x=`${M.protocol}//${M.hostname}/router_with_lp_changes`,k={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:i,by_amount_in:n,order_split:c,external_router:d,sender_address:"None",request_id:encodeURIComponent(Fo()),lp_changes:u})}}else x=`
      ${x}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(i)}&by_amount_in=${encodeURIComponent(n)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(d)}&sender_address=''&request_id=${encodeURIComponent(Fo())}
      `;if(m=await this.fetchDataWithAxios(x,k,6e3),m==null){const M=await this.sdk.Router.priceUseV1(e,t,new A(i),n,r,o,a),I=[];for(const B of M.paths){const N=[];if(B.poolAddress.length>1){const X=this.sdk.Router.tokenInfo(B.coinType[0]).decimals,K=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ee=B.a2b[0]?Y.sqrtPriceX64ToPrice(new A(M.currentSqrtPrice[0]),X,K):Y.sqrtPriceX64ToPrice(new A(M.currentSqrtPrice[0]),K,X),me={direction:B.a2b[0],label:"Cetus",poolAddress:B.poolAddress[0],fromCoin:B.coinType[0],toCoin:B.coinType[1],feeRate:this.sdk.Router.getFeeRate(B.coinType[0],B.coinType[1],B.poolAddress[0]),outputAmount:M.byAmountIn?B.rawAmountLimit[0].toString():B.rawAmountLimit[1].toString(),inputAmount:B.amountIn.toString(),currentSqrtPrice:M.currentSqrtPrice[0],currentPrice:ee,fromDecimal:X,toDecimal:K},be=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ie=this.sdk.Router.tokenInfo(B.coinType[2]).decimals,z=B.a2b[1]?Y.sqrtPriceX64ToPrice(new A(M.currentSqrtPrice[1]),be,ie):Y.sqrtPriceX64ToPrice(new A(M.currentSqrtPrice[1]),ie,be),te={direction:B.a2b[1],label:"Cetus",poolAddress:B.poolAddress[1],fromCoin:B.coinType[1],toCoin:B.coinType[2],feeRate:this.sdk.Router.getFeeRate(B.coinType[1],B.coinType[2],B.poolAddress[1]),outputAmount:B.amountOut.toString(),inputAmount:M.byAmountIn?B.rawAmountLimit[0].toString():B.rawAmountLimit[1].toString(),currentSqrtPrice:M.currentSqrtPrice[1],currentPrice:z,fromDecimal:be,toDecimal:ie};N.push(me,te)}else{const X=this.sdk.Router.tokenInfo(B.coinType[0]).decimals,K=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ee=B.a2b[0]?Y.sqrtPriceX64ToPrice(new A(M.currentSqrtPrice[0]),X,K):Y.sqrtPriceX64ToPrice(new A(M.currentSqrtPrice[0]),K,X),me={direction:B.a2b[0],label:"Cetus",poolAddress:B.poolAddress[0],fromCoin:B.coinType[0],toCoin:B.coinType[1],feeRate:this.sdk.Router.getFeeRate(B.coinType[0],B.coinType[1],B.poolAddress[0]),outputAmount:B.amountOut.toString(),inputAmount:B.amountIn.toString(),currentSqrtPrice:M.currentSqrtPrice[0],currentPrice:ee,fromDecimal:X,toDecimal:K};N.push(me)}const L={percent:Number(B.amountIn)/Number(M.amountIn)*100,inputAmount:Number(B.amountIn.toString()),outputAmount:Number(B.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:N};I.push(L)}const E={isExceed:M.isExceed,isTimeout:!0,inputAmount:Number(M.amountIn.toString()),outputAmount:Number(M.amountOut.toString()),fromCoin:M.coinTypeA,toCoin:M.coinTypeC!=null?M.coinTypeC:M.coinTypeB,byAmountIn:M.byAmountIn,splitPaths:I};g="v1",m=E}return{result:m,version:g}}async getBestRouterByServer(e,t,i,n,r,o=!1,s=!1,a=[]){let c=null,d={},u=this.sdk.sdkOptions.aggregatorUrl;if(a.length>0){const m=new URL(u);u=`${m.protocol}//${m.hostname}/router_with_lp_changes`,d={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:i,by_amount_in:n,order_split:o,external_router:s,sender_address:"None",request_id:encodeURIComponent(Fo()),lp_changes:a})}}else u=`
      ${u}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(i)}&by_amount_in=${encodeURIComponent(n)}&order_split=${encodeURIComponent(o)}&external_router=${encodeURIComponent(s)}&sender_address=''&request_id=${encodeURIComponent(Fo())}
      `;if(c=await this.fetchDataWithAxios(u,d,6e3),c==null)throw new W("Invalid server response","InvalidServerResponse");return c}async getBestRouterByRpc(e,t,i,n,r,o,s){const a=await this.sdk.Router.priceUseV1(e,t,new A(i),n,r,o,s),c=[];for(const u of a.paths){const m=[];if(u.poolAddress.length>1){const k=this.sdk.Router.tokenInfo(u.coinType[0]).decimals,x=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,M=u.a2b[0]?Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[0]),k,x):Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[0]),x,k),I={direction:u.a2b[0],label:"Cetus",poolAddress:u.poolAddress[0],fromCoin:u.coinType[0],toCoin:u.coinType[1],feeRate:this.sdk.Router.getFeeRate(u.coinType[0],u.coinType[1],u.poolAddress[0]),outputAmount:a.byAmountIn?u.rawAmountLimit[0].toString():u.rawAmountLimit[1].toString(),inputAmount:u.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:M,fromDecimal:k,toDecimal:x},E=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,B=this.sdk.Router.tokenInfo(u.coinType[2]).decimals,N=u.a2b[1]?Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[1]),E,B):Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[1]),B,E),L={direction:u.a2b[1],label:"Cetus",poolAddress:u.poolAddress[1],fromCoin:u.coinType[1],toCoin:u.coinType[2],feeRate:this.sdk.Router.getFeeRate(u.coinType[1],u.coinType[2],u.poolAddress[1]),outputAmount:u.amountOut.toString(),inputAmount:a.byAmountIn?u.rawAmountLimit[0].toString():u.rawAmountLimit[1].toString(),currentSqrtPrice:a.currentSqrtPrice[1],currentPrice:N,fromDecimal:E,toDecimal:B};m.push(I,L)}else{const k=this.sdk.Router.tokenInfo(u.coinType[0]).decimals,x=this.sdk.Router.tokenInfo(u.coinType[1]).decimals,M=u.a2b[0]?Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[0]),k,x):Y.sqrtPriceX64ToPrice(new A(a.currentSqrtPrice[0]),x,k),I={direction:u.a2b[0],label:"Cetus",poolAddress:u.poolAddress[0],fromCoin:u.coinType[0],toCoin:u.coinType[1],feeRate:this.sdk.Router.getFeeRate(u.coinType[0],u.coinType[1],u.poolAddress[0]),outputAmount:u.amountOut.toString(),inputAmount:u.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:M,fromDecimal:k,toDecimal:x};m.push(I)}const g={percent:Number(u.amountIn)/Number(a.amountIn)*100,inputAmount:Number(u.amountIn.toString()),outputAmount:Number(u.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:m};c.push(g)}return{isExceed:a.isExceed,isTimeout:!0,inputAmount:Number(a.amountIn.toString()),outputAmount:Number(a.amountOut.toString()),fromCoin:a.coinTypeA,toCoin:a.coinTypeC!=null?a.coinTypeC:a.coinTypeB,byAmountIn:a.byAmountIn,splitPaths:c}}},Fg=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}setTokenListCache(e){const{coin_list_handle:t}=j(this.sdk.sdkOptions.cetus_config),i=`${t}_getCoinConfigs`,n=this.getCache(i),r=n?[...n,...e]:e;this.updateCache(i,r,Z)}async getTokenListByCoinTypes(e){const t={},{coin_list_handle:i}=j(this.sdk.sdkOptions.cetus_config),n=`${i}_getCoinConfigs`,r=this.getCache(n);if(r!==void 0){const s=r;for(const a of e)for(const c of s)if(Rt(a)===Rt(c.address)){t[a]=c;continue}}const o=e.filter(s=>t[s]===void 0);for(const s of o){const a=`${s}_metadata`,c=this.getCache(a);if(c!==void 0)t[s]=c;else{const d=await this._sdk.fullClient.getCoinMetadata({coinType:s});if(d){const u={id:d.id,pyth_id:"",name:d.name,symbol:d.symbol,official_symbol:d.symbol,coingecko_id:"",decimals:d.decimals,project_url:"",logo_url:d.iconUrl,address:s};t[s]=u,this.updateCache(a,u,Z)}else console.log(`not found ${s}`)}}return t}async getCoinConfigs(e=!1,t=!0){const{coin_list_handle:i}=j(this.sdk.sdkOptions.cetus_config),n=`${i}_getCoinConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(d=>{var m,g;if(d.error!=null||((g=(m=d.data)==null?void 0:m.content)==null?void 0:g.dataType)!=="moveObject")throw new W(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildCoinConfig(d,t);this.updateCache(`${i}_${u.address}_getCoinConfig`,u,Z),c.push({...u})}),this.updateCache(n,c,Z),c}async getCoinConfig(e,t=!1,i=!0){var c,d;const{coin_list_handle:n}=j(this.sdk.sdkOptions.cetus_config),r=`${n}_${e}_getCoinConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x1::type_name::TypeName",value:{name:bg(e)}}});if(s.error!=null||((d=(c=s.data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new W(`when getCoinConfig get object error: ${s.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(s,i);return this.updateCache(r,a,Z),a}buildCoinConfig(e,t=!0){let i=le(e);i=i.value.fields;const n={...i};return n.id=Fi(e),n.address=D(i.coin_type.fields.name).full_address,i.pyth_id&&(n.pyth_id=ze(i.pyth_id)),this.transformExtensions(n,i.extension_fields.fields.contents,t),delete n.coin_type,n}async getClmmPoolConfigs(e=!1,t=!0){const{clmm_pools_handle:i}=j(this.sdk.sdkOptions.cetus_config),n=`${i}_getClmmPoolConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(d=>{var m,g;if(d.error!=null||((g=(m=d.data)==null?void 0:m.content)==null?void 0:g.dataType)!=="moveObject")throw new W(`when getClmmPoolsConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildClmmPoolConfig(d,t);this.updateCache(`${u.pool_address}_getClmmPoolConfig`,u,Z),c.push({...u})}),this.updateCache(n,c,Z),c}async getClmmPoolConfig(e,t=!1,i=!0){const{clmm_pools_handle:n}=j(this.sdk.sdkOptions.cetus_config),r=`${e}_getClmmPoolConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}}),a=this.buildClmmPoolConfig(s,i);return this.updateCache(r,a,Z),a}buildClmmPoolConfig(e,t=!0){let i=le(e);i=i.value.fields;const n={...i};return n.id=Fi(e),n.pool_address=ze(i.pool_address),this.transformExtensions(n,i.extension_fields.fields.contents,t),n}async getLaunchpadPoolConfigs(e=!1,t=!0){const{launchpad_pools_handle:i}=j(this.sdk.sdkOptions.cetus_config),n=`${i}_getLaunchpadPoolConfigs`,r=this.getCache(n,e);if(r)return r;const s=(await this._sdk.fullClient.getDynamicFieldsByPage(i)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0}),c=[];return a.forEach(d=>{var m,g;if(d.error!=null||((g=(m=d.data)==null?void 0:m.content)==null?void 0:g.dataType)!=="moveObject")throw new W(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const u=this.buildLaunchpadPoolConfig(d,t);this.updateCache(`${u.pool_address}_getLaunchpadPoolConfig`,u,Z),c.push({...u})}),this.updateCache(n,c,Z),c}async getLaunchpadPoolConfig(e,t=!1,i=!0){const{launchpad_pools_handle:n}=j(this.sdk.sdkOptions.cetus_config),r=`${e}_getLaunchpadPoolConfig`,o=this.getCache(r,t);if(o)return o;const s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}}),a=this.buildLaunchpadPoolConfig(s,i);return this.updateCache(r,a,Z),a}buildLaunchpadPoolConfig(e,t=!0){let i=le(e);i=i.value.fields;const n={...i};n.id=Fi(e),n.pool_address=ze(i.pool_address),this.transformExtensions(n,i.extension_fields.fields.contents,t);const r=[];i.social_media.fields.contents.forEach(o=>{r.push({name:o.fields.value.fields.name,link:o.fields.value.fields.link})}),n.social_media=r;try{n.regulation=decodeURIComponent(Zo.decode(n.regulation).replace(/%/g,"%25"))}catch{n.regulation=Zo.decode(n.regulation)}return n}transformExtensions(e,t,i=!0){const n=[];for(const r of t){const{key:o}=r.fields;let{value:s}=r.fields;if(o==="labels")try{const a=decodeURIComponent(Zo.decode(s));try{s=JSON.parse(a)}catch{s=a}}catch{}i&&(e[o]=s),n.push({key:o,value:s})}delete e.extension_fields,i||(e.extensions=n)}async getCetusConfig(e=!1){const t=this._sdk.sdkOptions.cetus_config.package_id,i=`${t}_getCetusConfig`,n=this.getCache(i,e);if(n!==void 0)return n;const r=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=No(r),s=await this._sdk.fullClient.queryEventsByPage({Transaction:o});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(s.data.length>0)for(const c of s.data)switch(D(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(i,a,Z),a}async getCetusConfigHandle(e){const t=[e.clmm_pools_id,e.coin_list_id,e.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:t,options:{showContent:!0}})).forEach(n=>{var s,a;if(n.error!=null||((a=(s=n.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new W(`when getCetusConfigHandle get objects error: ${n.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const r=le(n),o=ur(n);switch(D(o).name){case"ClmmPools":e.clmm_pools_handle=r.pools.fields.id.id;break;case"CoinList":e.coin_list_handle=r.coins.fields.id.id;break;case"LaunchpadPools":e.launchpad_pools_handle=r.pools.fields.id.id;break}}),e}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){try{const i=this._cache[e];if(!i)return;if(t||!i.isValid()){delete this._cache[e];return}return i.value}catch(i){console.error(`Error accessing cache for key ${e}:`,i);return}}},Ug=class extends cs{async queryEventsByPage(e,t="all"){let i=[],n=!0;const r=t==="all";let o=r?null:t.cursor;do{const s=await this.queryEvents({query:e,cursor:o,limit:r?null:t.limit});s.data?(i=[...i,...s.data],n=s.hasNextPage,o=s.nextCursor):n=!1}while(r&&n);return{data:i,nextCursor:o,hasNextPage:n}}async getOwnedObjectsByPage(e,t,i="all"){let n=[],r=!0;const o=i==="all";let s=o?null:i.cursor;do{const a=await this.getOwnedObjects({owner:e,...t,cursor:s,limit:o?null:i.limit});a.data?(n=[...n,...a.data],r=a.hasNextPage,s=a.nextCursor):r=!1}while(o&&r);return{data:n,nextCursor:s,hasNextPage:r}}async getDynamicFieldsByPage(e,t="all"){let i=[],n=!0;const r=t==="all";let o=r?null:t.cursor;do{const s=await this.getDynamicFields({parentId:e,cursor:o,limit:r?null:t.limit});s.data?(i=[...i,...s.data],n=s.hasNextPage,o=s.nextCursor):n=!1}while(r&&n);return{data:i,nextCursor:o,hasNextPage:n}}async batchGetObjects(e,t,i=50){let n=[];try{for(let r=0;r<Math.ceil(e.length/i);r++){const o=await this.multiGetObjects({ids:e.slice(r*i,i*(r+1)),options:t});n=[...n,...o]}}catch(r){console.log(r)}return n}async calculationTxGas(e){const{sender:t}=e.blockData;if(t===void 0)throw Error("sdk sender is empty");const i=await this.devInspectTransactionBlock({transactionBlock:e,sender:t}),{gasUsed:n}=i.effects;return Number(n.computationCost)+Number(n.storageCost)-Number(n.storageRebate)}async sendTransaction(e,t){try{return await this.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(i){console.log("error: ",i)}}async sendSimulationTransaction(e,t,i=!0){try{if(i)return await this.devInspectTransactionBlock({transactionBlock:e,sender:t})}catch(n){console.log("devInspectTransactionBlock error",n)}}},Kg=class{constructor(e){G(this,"_cache",{});G(this,"_rpcModule");G(this,"_pool");G(this,"_position");G(this,"_swap");G(this,"_rewarder");G(this,"_router");G(this,"_router_v2");G(this,"_token");G(this,"_config");G(this,"_sdkOptions");G(this,"_senderAddress","");this._sdkOptions=e,this._rpcModule=new Ug({url:e.fullRpcUrl}),this._swap=new $g(this),this._pool=new Bg(this),this._position=new Ng(this),this._rewarder=new Rg(this),this._router=new Dg(this),this._router_v2=new Lg(this),this._token=new qg(this),this._config=new Fg(this),Rc(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(e,t,i=!0){const n=[];let r=null;const o=`${this.sdkOptions.fullRpcUrl}_${e}_${t}_getOwnerCoinAssets`,s=this.getCache(o,i);if(s)return s;for(;;){const a=await(t?this.fullClient.getCoins({owner:e,coinType:t,cursor:r}):this.fullClient.getAllCoins({owner:e,cursor:r}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&n.push({coinAddress:D(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),r=a.nextCursor,!a.hasNextPage)break}return this.updateCache(o,n,30*1e3),n}async getOwnerCoinBalances(e,t){let i=[];return t?i=[await this.fullClient.getBalance({owner:e,coinType:t})]:i=[...await this.fullClient.getAllBalances({owner:e})],i}updateCache(e,t,i=Z){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},uw=Kg;const Vg=sc(Eh),zg=sc(Zp);var Ya=Vg,Wg=zg,Gg=Object.create,Dc=Object.defineProperty,Hg=Object.defineProperties,Xg=Object.getOwnPropertyDescriptor,Jg=Object.getOwnPropertyDescriptors,af=Object.getOwnPropertyNames,Il=Object.getOwnPropertySymbols,Zg=Object.getPrototypeOf,cf=Object.prototype.hasOwnProperty,Qg=Object.prototype.propertyIsEnumerable,Pl=(e,t,i)=>t in e?Dc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Yg=(e,t)=>{for(var i in t||(t={}))cf.call(t,i)&&Pl(e,i,t[i]);if(Il)for(var i of Il(t))Qg.call(t,i)&&Pl(e,i,t[i]);return e},eb=(e,t)=>Hg(e,Jg(t)),tb=(e=>typeof hr<"u"?hr:typeof Proxy<"u"?new Proxy(e,{get:(t,i)=>(typeof hr<"u"?hr:t)[i]}):e)(function(e){if(typeof hr<"u")return hr.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),ib=(e,t)=>function(){return t||(0,e[af(e)[0]])((t={exports:{}}).exports,t),t.exports},nb=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of af(t))!cf.call(e,r)&&r!==i&&Dc(e,r,{get:()=>t[r],enumerable:!(n=Xg(t,r))||n.enumerable});return e},Xr=(e,t,i)=>(i=e!=null?Gg(Zg(e)):{},nb(!e||!e.__esModule?Dc(i,"default",{value:e,enumerable:!0}):i,e)),He=(e,t,i)=>new Promise((n,r)=>{var o=c=>{try{a(i.next(c))}catch(d){r(d)}},s=c=>{try{a(i.throw(c))}catch(d){r(d)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,s);a((i=i.apply(e,t)).next())}),Jr=ib({"node_modules/bn.js/lib/bn.js"(e,t){(function(i,n){function r(f,l){if(!f)throw new Error(l||"Assertion failed")}function o(f,l){f.super_=l;var h=function(){};h.prototype=l.prototype,f.prototype=new h,f.prototype.constructor=f}function s(f,l,h){if(s.isBN(f))return f;this.negative=0,this.words=null,this.length=0,this.red=null,f!==null&&((l==="le"||l==="be")&&(h=l,l=10),this._init(f||0,l||10,h||"be"))}typeof i=="object"?i.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=tb("buffer").Buffer}catch{}s.isBN=function(l){return l instanceof s?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,h){return l.cmp(h)>0?l:h},s.min=function(l,h){return l.cmp(h)<0?l:h},s.prototype._init=function(l,h,b){if(typeof l=="number")return this._initNumber(l,h,b);if(typeof l=="object")return this._initArray(l,h,b);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),l=l.toString().replace(/\s+/g,"");var w=0;l[0]==="-"&&(w++,this.negative=1),w<l.length&&(h===16?this._parseHex(l,w,b):(this._parseBase(l,h,w),b==="le"&&this._initArray(this.toArray(),h,b)))},s.prototype._initNumber=function(l,h,b){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),h,b)},s.prototype._initArray=function(l,h,b){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var y,C,v=0;if(b==="be")for(w=l.length-1,y=0;w>=0;w-=3)C=l[w]|l[w-1]<<8|l[w-2]<<16,this.words[y]|=C<<v&67108863,this.words[y+1]=C>>>26-v&67108863,v+=24,v>=26&&(v-=26,y++);else if(b==="le")for(w=0,y=0;w<l.length;w+=3)C=l[w]|l[w+1]<<8|l[w+2]<<16,this.words[y]|=C<<v&67108863,this.words[y+1]=C>>>26-v&67108863,v+=24,v>=26&&(v-=26,y++);return this._strip()};function c(f,l){var h=f.charCodeAt(l);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+f)}function d(f,l,h){var b=c(f,h);return h-1>=l&&(b|=c(f,h-1)<<4),b}s.prototype._parseHex=function(l,h,b){this.length=Math.ceil((l.length-h)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var y=0,C=0,v;if(b==="be")for(w=l.length-1;w>=h;w-=2)v=d(l,h,w)<<y,this.words[C]|=v&67108863,y>=18?(y-=18,C+=1,this.words[C]|=v>>>26):y+=8;else{var p=l.length-h;for(w=p%2===0?h+1:h;w<l.length;w+=2)v=d(l,h,w)<<y,this.words[C]|=v&67108863,y>=18?(y-=18,C+=1,this.words[C]|=v>>>26):y+=8}this._strip()};function u(f,l,h,b){for(var w=0,y=0,C=Math.min(f.length,h),v=l;v<C;v++){var p=f.charCodeAt(v)-48;w*=b,p>=49?y=p-49+10:p>=17?y=p-17+10:y=p,r(p>=0&&y<b,"Invalid character"),w+=y}return w}s.prototype._parseBase=function(l,h,b){this.words=[0],this.length=1;for(var w=0,y=1;y<=67108863;y*=h)w++;w--,y=y/h|0;for(var C=l.length-b,v=C%w,p=Math.min(C,C-v)+b,_=0,S=b;S<p;S+=w)_=u(l,S,S+w,h),this.imuln(y),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(v!==0){var U=1;for(_=u(l,S,l.length,h),S=0;S<v;S++)U*=h;this.imuln(U),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},s.prototype.copy=function(l){l.words=new Array(this.length);for(var h=0;h<this.length;h++)l.words[h]=this.words[h];l.length=this.length,l.negative=this.negative,l.red=this.red};function m(f,l){f.words=l.words,f.length=l.length,f.negative=l.negative,f.red=l.red}if(s.prototype._move=function(l){m(l,this)},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{s.prototype.inspect=g}else s.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(l,h){l=l||10,h=h|0||1;var b;if(l===16||l==="hex"){b="";for(var w=0,y=0,C=0;C<this.length;C++){var v=this.words[C],p=((v<<w|y)&16777215).toString(16);y=v>>>24-w&16777215,w+=2,w>=26&&(w-=26,C--),y!==0||C!==this.length-1?b=k[6-p.length]+p+b:b=p+b}for(y!==0&&(b=y.toString(16)+b);b.length%h!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(l===(l|0)&&l>=2&&l<=36){var _=x[l],S=M[l];b="";var U=this.clone();for(U.negative=0;!U.isZero();){var V=U.modrn(S).toString(l);U=U.idivn(S),U.isZero()?b=V+b:b=k[_-V.length]+V+b}for(this.isZero()&&(b="0"+b);b.length%h!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(l,h){return this.toArrayLike(a,l,h)}),s.prototype.toArray=function(l,h){return this.toArrayLike(Array,l,h)};var I=function(l,h){return l.allocUnsafe?l.allocUnsafe(h):new l(h)};s.prototype.toArrayLike=function(l,h,b){this._strip();var w=this.byteLength(),y=b||Math.max(1,w);r(w<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0");var C=I(l,y),v=h==="le"?"LE":"BE";return this["_toArrayLike"+v](C,w),C},s.prototype._toArrayLikeLE=function(l,h){for(var b=0,w=0,y=0,C=0;y<this.length;y++){var v=this.words[y]<<C|w;l[b++]=v&255,b<l.length&&(l[b++]=v>>8&255),b<l.length&&(l[b++]=v>>16&255),C===6?(b<l.length&&(l[b++]=v>>24&255),w=0,C=0):(w=v>>>24,C+=2)}if(b<l.length)for(l[b++]=w;b<l.length;)l[b++]=0},s.prototype._toArrayLikeBE=function(l,h){for(var b=l.length-1,w=0,y=0,C=0;y<this.length;y++){var v=this.words[y]<<C|w;l[b--]=v&255,b>=0&&(l[b--]=v>>8&255),b>=0&&(l[b--]=v>>16&255),C===6?(b>=0&&(l[b--]=v>>24&255),w=0,C=0):(w=v>>>24,C+=2)}if(b>=0)for(l[b--]=w;b>=0;)l[b--]=0},Math.clz32?s.prototype._countBits=function(l){return 32-Math.clz32(l)}:s.prototype._countBits=function(l){var h=l,b=0;return h>=4096&&(b+=13,h>>>=13),h>=64&&(b+=7,h>>>=7),h>=8&&(b+=4,h>>>=4),h>=2&&(b+=2,h>>>=2),b+h},s.prototype._zeroBits=function(l){if(l===0)return 26;var h=l,b=0;return h&8191||(b+=13,h>>>=13),h&127||(b+=7,h>>>=7),h&15||(b+=4,h>>>=4),h&3||(b+=2,h>>>=2),h&1||b++,b},s.prototype.bitLength=function(){var l=this.words[this.length-1],h=this._countBits(l);return(this.length-1)*26+h};function E(f){for(var l=new Array(f.bitLength()),h=0;h<l.length;h++){var b=h/26|0,w=h%26;l[h]=f.words[b]>>>w&1}return l}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,h=0;h<this.length;h++){var b=this._zeroBits(this.words[h]);if(l+=b,b!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]|l.words[h];return this._strip()},s.prototype.ior=function(l){return r((this.negative|l.negative)===0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var h;this.length>l.length?h=l:h=this;for(var b=0;b<h.length;b++)this.words[b]=this.words[b]&l.words[b];return this.length=h.length,this._strip()},s.prototype.iand=function(l){return r((this.negative|l.negative)===0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var h,b;this.length>l.length?(h=this,b=l):(h=l,b=this);for(var w=0;w<b.length;w++)this.words[w]=h.words[w]^b.words[w];if(this!==h)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=h.length,this._strip()},s.prototype.ixor=function(l){return r((this.negative|l.negative)===0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var h=Math.ceil(l/26)|0,b=l%26;this._expand(h),b>0&&h--;for(var w=0;w<h;w++)this.words[w]=~this.words[w]&67108863;return b>0&&(this.words[w]=~this.words[w]&67108863>>26-b),this._strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,h){r(typeof l=="number"&&l>=0);var b=l/26|0,w=l%26;return this._expand(b+1),h?this.words[b]=this.words[b]|1<<w:this.words[b]=this.words[b]&~(1<<w),this._strip()},s.prototype.iadd=function(l){var h;if(this.negative!==0&&l.negative===0)return this.negative=0,h=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,h=this.isub(l),l.negative=1,h._normSign();var b,w;this.length>l.length?(b=this,w=l):(b=l,w=this);for(var y=0,C=0;C<w.length;C++)h=(b.words[C]|0)+(w.words[C]|0)+y,this.words[C]=h&67108863,y=h>>>26;for(;y!==0&&C<b.length;C++)h=(b.words[C]|0)+y,this.words[C]=h&67108863,y=h>>>26;if(this.length=b.length,y!==0)this.words[this.length]=y,this.length++;else if(b!==this)for(;C<b.length;C++)this.words[C]=b.words[C];return this},s.prototype.add=function(l){var h;return l.negative!==0&&this.negative===0?(l.negative=0,h=this.sub(l),l.negative^=1,h):l.negative===0&&this.negative!==0?(this.negative=0,h=l.sub(this),this.negative=1,h):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var h=this.iadd(l);return l.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var b=this.cmp(l);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,y;b>0?(w=this,y=l):(w=l,y=this);for(var C=0,v=0;v<y.length;v++)h=(w.words[v]|0)-(y.words[v]|0)+C,C=h>>26,this.words[v]=h&67108863;for(;C!==0&&v<w.length;v++)h=(w.words[v]|0)+C,C=h>>26,this.words[v]=h&67108863;if(C===0&&v<w.length&&w!==this)for(;v<w.length;v++)this.words[v]=w.words[v];return this.length=Math.max(this.length,v),w!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(l){return this.clone().isub(l)};function B(f,l,h){h.negative=l.negative^f.negative;var b=f.length+l.length|0;h.length=b,b=b-1|0;var w=f.words[0]|0,y=l.words[0]|0,C=w*y,v=C&67108863,p=C/67108864|0;h.words[0]=v;for(var _=1;_<b;_++){for(var S=p>>>26,U=p&67108863,V=Math.min(_,l.length-1),ne=Math.max(0,_-f.length+1);ne<=V;ne++){var we=_-ne|0;w=f.words[we]|0,y=l.words[ne]|0,C=w*y+U,S+=C/67108864|0,U=C&67108863}h.words[_]=U|0,p=S|0}return p!==0?h.words[_]=p|0:h.length--,h._strip()}var N=function(l,h,b){var w=l.words,y=h.words,C=b.words,v=0,p,_,S,U=w[0]|0,V=U&8191,ne=U>>>13,we=w[1]|0,fe=we&8191,Ze=we>>>13,et=w[2]|0,ke=et&8191,tt=et>>>13,it=w[3]|0,Ce=it&8191,nt=it>>>13,rt=w[4]|0,Ae=rt&8191,ot=rt>>>13,st=w[5]|0,xe=st&8191,at=st>>>13,ct=w[6]|0,Se=ct&8191,lt=ct>>>13,dt=w[7]|0,Te=dt&8191,ut=dt>>>13,ft=w[8]|0,Me=ft&8191,ht=ft>>>13,pt=w[9]|0,Oe=pt&8191,_t=pt>>>13,mt=y[0]|0,Ie=mt&8191,gt=mt>>>13,bt=y[1]|0,Pe=bt&8191,wt=bt>>>13,yt=y[2]|0,je=yt&8191,vt=yt>>>13,kt=y[3]|0,Ee=kt&8191,Ct=kt>>>13,At=y[4]|0,Be=At&8191,xt=At>>>13,St=y[5]|0,Ne=St&8191,Tt=St>>>13,Mt=y[6]|0,Re=Mt&8191,Ot=Mt>>>13,It=y[7]|0,De=It&8191,Pt=It>>>13,jt=y[8]|0,$e=jt&8191,Et=jt>>>13,Bt=y[9]|0,qe=Bt&8191,Qe=Bt>>>13;b.negative=l.negative^h.negative,b.length=19,p=Math.imul(V,Ie),_=Math.imul(V,gt),_=_+Math.imul(ne,Ie)|0,S=Math.imul(ne,gt);var In=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(In>>>26)|0,In&=67108863,p=Math.imul(fe,Ie),_=Math.imul(fe,gt),_=_+Math.imul(Ze,Ie)|0,S=Math.imul(Ze,gt),p=p+Math.imul(V,Pe)|0,_=_+Math.imul(V,wt)|0,_=_+Math.imul(ne,Pe)|0,S=S+Math.imul(ne,wt)|0;var Pn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,p=Math.imul(ke,Ie),_=Math.imul(ke,gt),_=_+Math.imul(tt,Ie)|0,S=Math.imul(tt,gt),p=p+Math.imul(fe,Pe)|0,_=_+Math.imul(fe,wt)|0,_=_+Math.imul(Ze,Pe)|0,S=S+Math.imul(Ze,wt)|0,p=p+Math.imul(V,je)|0,_=_+Math.imul(V,vt)|0,_=_+Math.imul(ne,je)|0,S=S+Math.imul(ne,vt)|0;var jn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(jn>>>26)|0,jn&=67108863,p=Math.imul(Ce,Ie),_=Math.imul(Ce,gt),_=_+Math.imul(nt,Ie)|0,S=Math.imul(nt,gt),p=p+Math.imul(ke,Pe)|0,_=_+Math.imul(ke,wt)|0,_=_+Math.imul(tt,Pe)|0,S=S+Math.imul(tt,wt)|0,p=p+Math.imul(fe,je)|0,_=_+Math.imul(fe,vt)|0,_=_+Math.imul(Ze,je)|0,S=S+Math.imul(Ze,vt)|0,p=p+Math.imul(V,Ee)|0,_=_+Math.imul(V,Ct)|0,_=_+Math.imul(ne,Ee)|0,S=S+Math.imul(ne,Ct)|0;var En=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(En>>>26)|0,En&=67108863,p=Math.imul(Ae,Ie),_=Math.imul(Ae,gt),_=_+Math.imul(ot,Ie)|0,S=Math.imul(ot,gt),p=p+Math.imul(Ce,Pe)|0,_=_+Math.imul(Ce,wt)|0,_=_+Math.imul(nt,Pe)|0,S=S+Math.imul(nt,wt)|0,p=p+Math.imul(ke,je)|0,_=_+Math.imul(ke,vt)|0,_=_+Math.imul(tt,je)|0,S=S+Math.imul(tt,vt)|0,p=p+Math.imul(fe,Ee)|0,_=_+Math.imul(fe,Ct)|0,_=_+Math.imul(Ze,Ee)|0,S=S+Math.imul(Ze,Ct)|0,p=p+Math.imul(V,Be)|0,_=_+Math.imul(V,xt)|0,_=_+Math.imul(ne,Be)|0,S=S+Math.imul(ne,xt)|0;var Bn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,p=Math.imul(xe,Ie),_=Math.imul(xe,gt),_=_+Math.imul(at,Ie)|0,S=Math.imul(at,gt),p=p+Math.imul(Ae,Pe)|0,_=_+Math.imul(Ae,wt)|0,_=_+Math.imul(ot,Pe)|0,S=S+Math.imul(ot,wt)|0,p=p+Math.imul(Ce,je)|0,_=_+Math.imul(Ce,vt)|0,_=_+Math.imul(nt,je)|0,S=S+Math.imul(nt,vt)|0,p=p+Math.imul(ke,Ee)|0,_=_+Math.imul(ke,Ct)|0,_=_+Math.imul(tt,Ee)|0,S=S+Math.imul(tt,Ct)|0,p=p+Math.imul(fe,Be)|0,_=_+Math.imul(fe,xt)|0,_=_+Math.imul(Ze,Be)|0,S=S+Math.imul(Ze,xt)|0,p=p+Math.imul(V,Ne)|0,_=_+Math.imul(V,Tt)|0,_=_+Math.imul(ne,Ne)|0,S=S+Math.imul(ne,Tt)|0;var Nn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,p=Math.imul(Se,Ie),_=Math.imul(Se,gt),_=_+Math.imul(lt,Ie)|0,S=Math.imul(lt,gt),p=p+Math.imul(xe,Pe)|0,_=_+Math.imul(xe,wt)|0,_=_+Math.imul(at,Pe)|0,S=S+Math.imul(at,wt)|0,p=p+Math.imul(Ae,je)|0,_=_+Math.imul(Ae,vt)|0,_=_+Math.imul(ot,je)|0,S=S+Math.imul(ot,vt)|0,p=p+Math.imul(Ce,Ee)|0,_=_+Math.imul(Ce,Ct)|0,_=_+Math.imul(nt,Ee)|0,S=S+Math.imul(nt,Ct)|0,p=p+Math.imul(ke,Be)|0,_=_+Math.imul(ke,xt)|0,_=_+Math.imul(tt,Be)|0,S=S+Math.imul(tt,xt)|0,p=p+Math.imul(fe,Ne)|0,_=_+Math.imul(fe,Tt)|0,_=_+Math.imul(Ze,Ne)|0,S=S+Math.imul(Ze,Tt)|0,p=p+Math.imul(V,Re)|0,_=_+Math.imul(V,Ot)|0,_=_+Math.imul(ne,Re)|0,S=S+Math.imul(ne,Ot)|0;var Rn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,p=Math.imul(Te,Ie),_=Math.imul(Te,gt),_=_+Math.imul(ut,Ie)|0,S=Math.imul(ut,gt),p=p+Math.imul(Se,Pe)|0,_=_+Math.imul(Se,wt)|0,_=_+Math.imul(lt,Pe)|0,S=S+Math.imul(lt,wt)|0,p=p+Math.imul(xe,je)|0,_=_+Math.imul(xe,vt)|0,_=_+Math.imul(at,je)|0,S=S+Math.imul(at,vt)|0,p=p+Math.imul(Ae,Ee)|0,_=_+Math.imul(Ae,Ct)|0,_=_+Math.imul(ot,Ee)|0,S=S+Math.imul(ot,Ct)|0,p=p+Math.imul(Ce,Be)|0,_=_+Math.imul(Ce,xt)|0,_=_+Math.imul(nt,Be)|0,S=S+Math.imul(nt,xt)|0,p=p+Math.imul(ke,Ne)|0,_=_+Math.imul(ke,Tt)|0,_=_+Math.imul(tt,Ne)|0,S=S+Math.imul(tt,Tt)|0,p=p+Math.imul(fe,Re)|0,_=_+Math.imul(fe,Ot)|0,_=_+Math.imul(Ze,Re)|0,S=S+Math.imul(Ze,Ot)|0,p=p+Math.imul(V,De)|0,_=_+Math.imul(V,Pt)|0,_=_+Math.imul(ne,De)|0,S=S+Math.imul(ne,Pt)|0;var Dn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,p=Math.imul(Me,Ie),_=Math.imul(Me,gt),_=_+Math.imul(ht,Ie)|0,S=Math.imul(ht,gt),p=p+Math.imul(Te,Pe)|0,_=_+Math.imul(Te,wt)|0,_=_+Math.imul(ut,Pe)|0,S=S+Math.imul(ut,wt)|0,p=p+Math.imul(Se,je)|0,_=_+Math.imul(Se,vt)|0,_=_+Math.imul(lt,je)|0,S=S+Math.imul(lt,vt)|0,p=p+Math.imul(xe,Ee)|0,_=_+Math.imul(xe,Ct)|0,_=_+Math.imul(at,Ee)|0,S=S+Math.imul(at,Ct)|0,p=p+Math.imul(Ae,Be)|0,_=_+Math.imul(Ae,xt)|0,_=_+Math.imul(ot,Be)|0,S=S+Math.imul(ot,xt)|0,p=p+Math.imul(Ce,Ne)|0,_=_+Math.imul(Ce,Tt)|0,_=_+Math.imul(nt,Ne)|0,S=S+Math.imul(nt,Tt)|0,p=p+Math.imul(ke,Re)|0,_=_+Math.imul(ke,Ot)|0,_=_+Math.imul(tt,Re)|0,S=S+Math.imul(tt,Ot)|0,p=p+Math.imul(fe,De)|0,_=_+Math.imul(fe,Pt)|0,_=_+Math.imul(Ze,De)|0,S=S+Math.imul(Ze,Pt)|0,p=p+Math.imul(V,$e)|0,_=_+Math.imul(V,Et)|0,_=_+Math.imul(ne,$e)|0,S=S+Math.imul(ne,Et)|0;var $n=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+($n>>>26)|0,$n&=67108863,p=Math.imul(Oe,Ie),_=Math.imul(Oe,gt),_=_+Math.imul(_t,Ie)|0,S=Math.imul(_t,gt),p=p+Math.imul(Me,Pe)|0,_=_+Math.imul(Me,wt)|0,_=_+Math.imul(ht,Pe)|0,S=S+Math.imul(ht,wt)|0,p=p+Math.imul(Te,je)|0,_=_+Math.imul(Te,vt)|0,_=_+Math.imul(ut,je)|0,S=S+Math.imul(ut,vt)|0,p=p+Math.imul(Se,Ee)|0,_=_+Math.imul(Se,Ct)|0,_=_+Math.imul(lt,Ee)|0,S=S+Math.imul(lt,Ct)|0,p=p+Math.imul(xe,Be)|0,_=_+Math.imul(xe,xt)|0,_=_+Math.imul(at,Be)|0,S=S+Math.imul(at,xt)|0,p=p+Math.imul(Ae,Ne)|0,_=_+Math.imul(Ae,Tt)|0,_=_+Math.imul(ot,Ne)|0,S=S+Math.imul(ot,Tt)|0,p=p+Math.imul(Ce,Re)|0,_=_+Math.imul(Ce,Ot)|0,_=_+Math.imul(nt,Re)|0,S=S+Math.imul(nt,Ot)|0,p=p+Math.imul(ke,De)|0,_=_+Math.imul(ke,Pt)|0,_=_+Math.imul(tt,De)|0,S=S+Math.imul(tt,Pt)|0,p=p+Math.imul(fe,$e)|0,_=_+Math.imul(fe,Et)|0,_=_+Math.imul(Ze,$e)|0,S=S+Math.imul(Ze,Et)|0,p=p+Math.imul(V,qe)|0,_=_+Math.imul(V,Qe)|0,_=_+Math.imul(ne,qe)|0,S=S+Math.imul(ne,Qe)|0;var qn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(qn>>>26)|0,qn&=67108863,p=Math.imul(Oe,Pe),_=Math.imul(Oe,wt),_=_+Math.imul(_t,Pe)|0,S=Math.imul(_t,wt),p=p+Math.imul(Me,je)|0,_=_+Math.imul(Me,vt)|0,_=_+Math.imul(ht,je)|0,S=S+Math.imul(ht,vt)|0,p=p+Math.imul(Te,Ee)|0,_=_+Math.imul(Te,Ct)|0,_=_+Math.imul(ut,Ee)|0,S=S+Math.imul(ut,Ct)|0,p=p+Math.imul(Se,Be)|0,_=_+Math.imul(Se,xt)|0,_=_+Math.imul(lt,Be)|0,S=S+Math.imul(lt,xt)|0,p=p+Math.imul(xe,Ne)|0,_=_+Math.imul(xe,Tt)|0,_=_+Math.imul(at,Ne)|0,S=S+Math.imul(at,Tt)|0,p=p+Math.imul(Ae,Re)|0,_=_+Math.imul(Ae,Ot)|0,_=_+Math.imul(ot,Re)|0,S=S+Math.imul(ot,Ot)|0,p=p+Math.imul(Ce,De)|0,_=_+Math.imul(Ce,Pt)|0,_=_+Math.imul(nt,De)|0,S=S+Math.imul(nt,Pt)|0,p=p+Math.imul(ke,$e)|0,_=_+Math.imul(ke,Et)|0,_=_+Math.imul(tt,$e)|0,S=S+Math.imul(tt,Et)|0,p=p+Math.imul(fe,qe)|0,_=_+Math.imul(fe,Qe)|0,_=_+Math.imul(Ze,qe)|0,S=S+Math.imul(Ze,Qe)|0;var Ln=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,p=Math.imul(Oe,je),_=Math.imul(Oe,vt),_=_+Math.imul(_t,je)|0,S=Math.imul(_t,vt),p=p+Math.imul(Me,Ee)|0,_=_+Math.imul(Me,Ct)|0,_=_+Math.imul(ht,Ee)|0,S=S+Math.imul(ht,Ct)|0,p=p+Math.imul(Te,Be)|0,_=_+Math.imul(Te,xt)|0,_=_+Math.imul(ut,Be)|0,S=S+Math.imul(ut,xt)|0,p=p+Math.imul(Se,Ne)|0,_=_+Math.imul(Se,Tt)|0,_=_+Math.imul(lt,Ne)|0,S=S+Math.imul(lt,Tt)|0,p=p+Math.imul(xe,Re)|0,_=_+Math.imul(xe,Ot)|0,_=_+Math.imul(at,Re)|0,S=S+Math.imul(at,Ot)|0,p=p+Math.imul(Ae,De)|0,_=_+Math.imul(Ae,Pt)|0,_=_+Math.imul(ot,De)|0,S=S+Math.imul(ot,Pt)|0,p=p+Math.imul(Ce,$e)|0,_=_+Math.imul(Ce,Et)|0,_=_+Math.imul(nt,$e)|0,S=S+Math.imul(nt,Et)|0,p=p+Math.imul(ke,qe)|0,_=_+Math.imul(ke,Qe)|0,_=_+Math.imul(tt,qe)|0,S=S+Math.imul(tt,Qe)|0;var Fn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,p=Math.imul(Oe,Ee),_=Math.imul(Oe,Ct),_=_+Math.imul(_t,Ee)|0,S=Math.imul(_t,Ct),p=p+Math.imul(Me,Be)|0,_=_+Math.imul(Me,xt)|0,_=_+Math.imul(ht,Be)|0,S=S+Math.imul(ht,xt)|0,p=p+Math.imul(Te,Ne)|0,_=_+Math.imul(Te,Tt)|0,_=_+Math.imul(ut,Ne)|0,S=S+Math.imul(ut,Tt)|0,p=p+Math.imul(Se,Re)|0,_=_+Math.imul(Se,Ot)|0,_=_+Math.imul(lt,Re)|0,S=S+Math.imul(lt,Ot)|0,p=p+Math.imul(xe,De)|0,_=_+Math.imul(xe,Pt)|0,_=_+Math.imul(at,De)|0,S=S+Math.imul(at,Pt)|0,p=p+Math.imul(Ae,$e)|0,_=_+Math.imul(Ae,Et)|0,_=_+Math.imul(ot,$e)|0,S=S+Math.imul(ot,Et)|0,p=p+Math.imul(Ce,qe)|0,_=_+Math.imul(Ce,Qe)|0,_=_+Math.imul(nt,qe)|0,S=S+Math.imul(nt,Qe)|0;var Un=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,p=Math.imul(Oe,Be),_=Math.imul(Oe,xt),_=_+Math.imul(_t,Be)|0,S=Math.imul(_t,xt),p=p+Math.imul(Me,Ne)|0,_=_+Math.imul(Me,Tt)|0,_=_+Math.imul(ht,Ne)|0,S=S+Math.imul(ht,Tt)|0,p=p+Math.imul(Te,Re)|0,_=_+Math.imul(Te,Ot)|0,_=_+Math.imul(ut,Re)|0,S=S+Math.imul(ut,Ot)|0,p=p+Math.imul(Se,De)|0,_=_+Math.imul(Se,Pt)|0,_=_+Math.imul(lt,De)|0,S=S+Math.imul(lt,Pt)|0,p=p+Math.imul(xe,$e)|0,_=_+Math.imul(xe,Et)|0,_=_+Math.imul(at,$e)|0,S=S+Math.imul(at,Et)|0,p=p+Math.imul(Ae,qe)|0,_=_+Math.imul(Ae,Qe)|0,_=_+Math.imul(ot,qe)|0,S=S+Math.imul(ot,Qe)|0;var Kn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,p=Math.imul(Oe,Ne),_=Math.imul(Oe,Tt),_=_+Math.imul(_t,Ne)|0,S=Math.imul(_t,Tt),p=p+Math.imul(Me,Re)|0,_=_+Math.imul(Me,Ot)|0,_=_+Math.imul(ht,Re)|0,S=S+Math.imul(ht,Ot)|0,p=p+Math.imul(Te,De)|0,_=_+Math.imul(Te,Pt)|0,_=_+Math.imul(ut,De)|0,S=S+Math.imul(ut,Pt)|0,p=p+Math.imul(Se,$e)|0,_=_+Math.imul(Se,Et)|0,_=_+Math.imul(lt,$e)|0,S=S+Math.imul(lt,Et)|0,p=p+Math.imul(xe,qe)|0,_=_+Math.imul(xe,Qe)|0,_=_+Math.imul(at,qe)|0,S=S+Math.imul(at,Qe)|0;var Vn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,p=Math.imul(Oe,Re),_=Math.imul(Oe,Ot),_=_+Math.imul(_t,Re)|0,S=Math.imul(_t,Ot),p=p+Math.imul(Me,De)|0,_=_+Math.imul(Me,Pt)|0,_=_+Math.imul(ht,De)|0,S=S+Math.imul(ht,Pt)|0,p=p+Math.imul(Te,$e)|0,_=_+Math.imul(Te,Et)|0,_=_+Math.imul(ut,$e)|0,S=S+Math.imul(ut,Et)|0,p=p+Math.imul(Se,qe)|0,_=_+Math.imul(Se,Qe)|0,_=_+Math.imul(lt,qe)|0,S=S+Math.imul(lt,Qe)|0;var zn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(zn>>>26)|0,zn&=67108863,p=Math.imul(Oe,De),_=Math.imul(Oe,Pt),_=_+Math.imul(_t,De)|0,S=Math.imul(_t,Pt),p=p+Math.imul(Me,$e)|0,_=_+Math.imul(Me,Et)|0,_=_+Math.imul(ht,$e)|0,S=S+Math.imul(ht,Et)|0,p=p+Math.imul(Te,qe)|0,_=_+Math.imul(Te,Qe)|0,_=_+Math.imul(ut,qe)|0,S=S+Math.imul(ut,Qe)|0;var Wn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,p=Math.imul(Oe,$e),_=Math.imul(Oe,Et),_=_+Math.imul(_t,$e)|0,S=Math.imul(_t,Et),p=p+Math.imul(Me,qe)|0,_=_+Math.imul(Me,Qe)|0,_=_+Math.imul(ht,qe)|0,S=S+Math.imul(ht,Qe)|0;var Gn=(v+p|0)+((_&8191)<<13)|0;v=(S+(_>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,p=Math.imul(Oe,qe),_=Math.imul(Oe,Qe),_=_+Math.imul(_t,qe)|0,S=Math.imul(_t,Qe);var Qs=(v+p|0)+((_&8191)<<13)|0;return v=(S+(_>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,C[0]=In,C[1]=Pn,C[2]=jn,C[3]=En,C[4]=Bn,C[5]=Nn,C[6]=Rn,C[7]=Dn,C[8]=$n,C[9]=qn,C[10]=Ln,C[11]=Fn,C[12]=Un,C[13]=Kn,C[14]=Vn,C[15]=zn,C[16]=Wn,C[17]=Gn,C[18]=Qs,v!==0&&(C[19]=v,b.length++),b};Math.imul||(N=B);function L(f,l,h){h.negative=l.negative^f.negative,h.length=f.length+l.length;for(var b=0,w=0,y=0;y<h.length-1;y++){var C=w;w=0;for(var v=b&67108863,p=Math.min(y,l.length-1),_=Math.max(0,y-f.length+1);_<=p;_++){var S=y-_,U=f.words[S]|0,V=l.words[_]|0,ne=U*V,we=ne&67108863;C=C+(ne/67108864|0)|0,we=we+v|0,v=we&67108863,C=C+(we>>>26)|0,w+=C>>>26,C&=67108863}h.words[y]=v,b=C,C=w}return b!==0?h.words[y]=b:h.length--,h._strip()}function X(f,l,h){return L(f,l,h)}s.prototype.mulTo=function(l,h){var b,w=this.length+l.length;return this.length===10&&l.length===10?b=N(this,l,h):w<63?b=B(this,l,h):w<1024?b=L(this,l,h):b=X(this,l,h),b},s.prototype.mul=function(l){var h=new s(null);return h.words=new Array(this.length+l.length),this.mulTo(l,h)},s.prototype.mulf=function(l){var h=new s(null);return h.words=new Array(this.length+l.length),X(this,l,h)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){var h=l<0;h&&(l=-l),r(typeof l=="number"),r(l<67108864);for(var b=0,w=0;w<this.length;w++){var y=(this.words[w]|0)*l,C=(y&67108863)+(b&67108863);b>>=26,b+=y/67108864|0,b+=C>>>26,this.words[w]=C&67108863}return b!==0&&(this.words[w]=b,this.length++),h?this.ineg():this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var h=E(l);if(h.length===0)return new s(1);for(var b=this,w=0;w<h.length&&h[w]===0;w++,b=b.sqr());if(++w<h.length)for(var y=b.sqr();w<h.length;w++,y=y.sqr())h[w]!==0&&(b=b.mul(y));return b},s.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var h=l%26,b=(l-h)/26,w=67108863>>>26-h<<26-h,y;if(h!==0){var C=0;for(y=0;y<this.length;y++){var v=this.words[y]&w,p=(this.words[y]|0)-v<<h;this.words[y]=p|C,C=v>>>26-h}C&&(this.words[y]=C,this.length++)}if(b!==0){for(y=this.length-1;y>=0;y--)this.words[y+b]=this.words[y];for(y=0;y<b;y++)this.words[y]=0;this.length+=b}return this._strip()},s.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,h,b){r(typeof l=="number"&&l>=0);var w;h?w=(h-h%26)/26:w=0;var y=l%26,C=Math.min((l-y)/26,this.length),v=67108863^67108863>>>y<<y,p=b;if(w-=C,w=Math.max(0,w),p){for(var _=0;_<C;_++)p.words[_]=this.words[_];p.length=C}if(C!==0)if(this.length>C)for(this.length-=C,_=0;_<this.length;_++)this.words[_]=this.words[_+C];else this.words[0]=0,this.length=1;var S=0;for(_=this.length-1;_>=0&&(S!==0||_>=w);_--){var U=this.words[_]|0;this.words[_]=S<<26-y|U>>>y,S=U&v}return p&&S!==0&&(p.words[p.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(l,h,b){return r(this.negative===0),this.iushrn(l,h,b)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var h=l%26,b=(l-h)/26,w=1<<h;if(this.length<=b)return!1;var y=this.words[b];return!!(y&w)},s.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var h=l%26,b=(l-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(h!==0&&b++,this.length=Math.min(b,this.length),h!==0){var w=67108863^67108863>>>h<<h;this.words[this.length-1]&=w}return this._strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,h,b){var w=l.length+b,y;this._expand(w);var C,v=0;for(y=0;y<l.length;y++){C=(this.words[y+b]|0)+v;var p=(l.words[y]|0)*h;C-=p&67108863,v=(C>>26)-(p/67108864|0),this.words[y+b]=C&67108863}for(;y<this.length-b;y++)C=(this.words[y+b]|0)+v,v=C>>26,this.words[y+b]=C&67108863;if(v===0)return this._strip();for(r(v===-1),v=0,y=0;y<this.length;y++)C=-(this.words[y]|0)+v,v=C>>26,this.words[y]=C&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(l,h){var b=this.length-l.length,w=this.clone(),y=l,C=y.words[y.length-1]|0,v=this._countBits(C);b=26-v,b!==0&&(y=y.ushln(b),w.iushln(b),C=y.words[y.length-1]|0);var p=w.length-y.length,_;if(h!=="mod"){_=new s(null),_.length=p+1,_.words=new Array(_.length);for(var S=0;S<_.length;S++)_.words[S]=0}var U=w.clone()._ishlnsubmul(y,1,p);U.negative===0&&(w=U,_&&(_.words[p]=1));for(var V=p-1;V>=0;V--){var ne=(w.words[y.length+V]|0)*67108864+(w.words[y.length+V-1]|0);for(ne=Math.min(ne/C|0,67108863),w._ishlnsubmul(y,ne,V);w.negative!==0;)ne--,w.negative=0,w._ishlnsubmul(y,1,V),w.isZero()||(w.negative^=1);_&&(_.words[V]=ne)}return _&&_._strip(),w._strip(),h!=="div"&&b!==0&&w.iushrn(b),{div:_||null,mod:w}},s.prototype.divmod=function(l,h,b){if(r(!l.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,y,C;return this.negative!==0&&l.negative===0?(C=this.neg().divmod(l,h),h!=="mod"&&(w=C.div.neg()),h!=="div"&&(y=C.mod.neg(),b&&y.negative!==0&&y.iadd(l)),{div:w,mod:y}):this.negative===0&&l.negative!==0?(C=this.divmod(l.neg(),h),h!=="mod"&&(w=C.div.neg()),{div:w,mod:C.mod}):this.negative&l.negative?(C=this.neg().divmod(l.neg(),h),h!=="div"&&(y=C.mod.neg(),b&&y.negative!==0&&y.isub(l)),{div:C.div,mod:y}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?h==="div"?{div:this.divn(l.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modrn(l.words[0]))}:this._wordDiv(l,h)},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var h=this.divmod(l);if(h.mod.isZero())return h.div;var b=h.div.negative!==0?h.mod.isub(l):h.mod,w=l.ushrn(1),y=l.andln(1),C=b.cmp(w);return C<0||y===1&&C===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modrn=function(l){var h=l<0;h&&(l=-l),r(l<=67108863);for(var b=(1<<26)%l,w=0,y=this.length-1;y>=0;y--)w=(b*w+(this.words[y]|0))%l;return h?-w:w},s.prototype.modn=function(l){return this.modrn(l)},s.prototype.idivn=function(l){var h=l<0;h&&(l=-l),r(l<=67108863);for(var b=0,w=this.length-1;w>=0;w--){var y=(this.words[w]|0)+b*67108864;this.words[w]=y/l|0,b=y%l}return this._strip(),h?this.ineg():this},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var h=this,b=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var w=new s(1),y=new s(0),C=new s(0),v=new s(1),p=0;h.isEven()&&b.isEven();)h.iushrn(1),b.iushrn(1),++p;for(var _=b.clone(),S=h.clone();!h.isZero();){for(var U=0,V=1;!(h.words[0]&V)&&U<26;++U,V<<=1);if(U>0)for(h.iushrn(U);U-- >0;)(w.isOdd()||y.isOdd())&&(w.iadd(_),y.isub(S)),w.iushrn(1),y.iushrn(1);for(var ne=0,we=1;!(b.words[0]&we)&&ne<26;++ne,we<<=1);if(ne>0)for(b.iushrn(ne);ne-- >0;)(C.isOdd()||v.isOdd())&&(C.iadd(_),v.isub(S)),C.iushrn(1),v.iushrn(1);h.cmp(b)>=0?(h.isub(b),w.isub(C),y.isub(v)):(b.isub(h),C.isub(w),v.isub(y))}return{a:C,b:v,gcd:b.iushln(p)}},s.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var h=this,b=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var w=new s(1),y=new s(0),C=b.clone();h.cmpn(1)>0&&b.cmpn(1)>0;){for(var v=0,p=1;!(h.words[0]&p)&&v<26;++v,p<<=1);if(v>0)for(h.iushrn(v);v-- >0;)w.isOdd()&&w.iadd(C),w.iushrn(1);for(var _=0,S=1;!(b.words[0]&S)&&_<26;++_,S<<=1);if(_>0)for(b.iushrn(_);_-- >0;)y.isOdd()&&y.iadd(C),y.iushrn(1);h.cmp(b)>=0?(h.isub(b),w.isub(y)):(b.isub(h),y.isub(w))}var U;return h.cmpn(1)===0?U=w:U=y,U.cmpn(0)<0&&U.iadd(l),U},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var h=this.clone(),b=l.clone();h.negative=0,b.negative=0;for(var w=0;h.isEven()&&b.isEven();w++)h.iushrn(1),b.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;b.isEven();)b.iushrn(1);var y=h.cmp(b);if(y<0){var C=h;h=b,b=C}else if(y===0||b.cmpn(1)===0)break;h.isub(b)}while(!0);return b.iushln(w)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){r(typeof l=="number");var h=l%26,b=(l-h)/26,w=1<<h;if(this.length<=b)return this._expand(b+1),this.words[b]|=w,this;for(var y=w,C=b;y!==0&&C<this.length;C++){var v=this.words[C]|0;v+=y,y=v>>>26,v&=67108863,this.words[C]=v}return y!==0&&(this.words[C]=y,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var h=l<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var b;if(this.length>1)b=1;else{h&&(l=-l),r(l<=67108863,"Number is too big");var w=this.words[0]|0;b=w===l?0:w<l?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var h=this.ucmp(l);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var h=0,b=this.length-1;b>=0;b--){var w=this.words[b]|0,y=l.words[b]|0;if(w!==y){w<y?h=-1:w>y&&(h=1);break}}return h},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new te(l)},s.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var K={k256:null,p224:null,p192:null,p25519:null};function ee(f,l){this.name=f,this.p=new s(l,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ee.prototype._tmp=function(){var l=new s(null);return l.words=new Array(Math.ceil(this.n/13)),l},ee.prototype.ireduce=function(l){var h=l,b;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),b=h.bitLength();while(b>this.n);var w=b<this.n?-1:h.ucmp(this.p);return w===0?(h.words[0]=0,h.length=1):w>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},ee.prototype.split=function(l,h){l.iushrn(this.n,0,h)},ee.prototype.imulK=function(l){return l.imul(this.k)};function me(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(me,ee),me.prototype.split=function(l,h){for(var b=4194303,w=Math.min(l.length,9),y=0;y<w;y++)h.words[y]=l.words[y];if(h.length=w,l.length<=9){l.words[0]=0,l.length=1;return}var C=l.words[9];for(h.words[h.length++]=C&b,y=10;y<l.length;y++){var v=l.words[y]|0;l.words[y-10]=(v&b)<<4|C>>>22,C=v}C>>>=22,l.words[y-10]=C,C===0&&l.length>10?l.length-=10:l.length-=9},me.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var h=0,b=0;b<l.length;b++){var w=l.words[b]|0;h+=w*977,l.words[b]=h&67108863,h=w*64+(h/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function be(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(be,ee);function ie(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(ie,ee);function z(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(z,ee),z.prototype.imulK=function(l){for(var h=0,b=0;b<l.length;b++){var w=(l.words[b]|0)*19+h,y=w&67108863;w>>>=26,l.words[b]=y,h=w}return h!==0&&(l.words[l.length++]=h),l},s._prime=function(l){if(K[l])return K[l];var h;if(l==="k256")h=new me;else if(l==="p224")h=new be;else if(l==="p192")h=new ie;else if(l==="p25519")h=new z;else throw new Error("Unknown prime "+l);return K[l]=h,h};function te(f){if(typeof f=="string"){var l=s._prime(f);this.m=l.p,this.prime=l}else r(f.gtn(1),"modulus must be greater than 1"),this.m=f,this.prime=null}te.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},te.prototype._verify2=function(l,h){r((l.negative|h.negative)===0,"red works only with positives"),r(l.red&&l.red===h.red,"red works only with red numbers")},te.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(m(l,l.umod(this.m)._forceRed(this)),l)},te.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},te.prototype.add=function(l,h){this._verify2(l,h);var b=l.add(h);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},te.prototype.iadd=function(l,h){this._verify2(l,h);var b=l.iadd(h);return b.cmp(this.m)>=0&&b.isub(this.m),b},te.prototype.sub=function(l,h){this._verify2(l,h);var b=l.sub(h);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},te.prototype.isub=function(l,h){this._verify2(l,h);var b=l.isub(h);return b.cmpn(0)<0&&b.iadd(this.m),b},te.prototype.shl=function(l,h){return this._verify1(l),this.imod(l.ushln(h))},te.prototype.imul=function(l,h){return this._verify2(l,h),this.imod(l.imul(h))},te.prototype.mul=function(l,h){return this._verify2(l,h),this.imod(l.mul(h))},te.prototype.isqr=function(l){return this.imul(l,l.clone())},te.prototype.sqr=function(l){return this.mul(l,l)},te.prototype.sqrt=function(l){if(l.isZero())return l.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(l,b)}for(var w=this.m.subn(1),y=0;!w.isZero()&&w.andln(1)===0;)y++,w.iushrn(1);r(!w.isZero());var C=new s(1).toRed(this),v=C.redNeg(),p=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new s(2*_*_).toRed(this);this.pow(_,p).cmp(v)!==0;)_.redIAdd(v);for(var S=this.pow(_,w),U=this.pow(l,w.addn(1).iushrn(1)),V=this.pow(l,w),ne=y;V.cmp(C)!==0;){for(var we=V,fe=0;we.cmp(C)!==0;fe++)we=we.redSqr();r(fe<ne);var Ze=this.pow(S,new s(1).iushln(ne-fe-1));U=U.redMul(Ze),S=Ze.redSqr(),V=V.redMul(S),ne=fe}return U},te.prototype.invm=function(l){var h=l._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},te.prototype.pow=function(l,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return l.clone();var b=4,w=new Array(1<<b);w[0]=new s(1).toRed(this),w[1]=l;for(var y=2;y<w.length;y++)w[y]=this.mul(w[y-1],l);var C=w[0],v=0,p=0,_=h.bitLength()%26;for(_===0&&(_=26),y=h.length-1;y>=0;y--){for(var S=h.words[y],U=_-1;U>=0;U--){var V=S>>U&1;if(C!==w[0]&&(C=this.sqr(C)),V===0&&v===0){p=0;continue}v<<=1,v|=V,p++,!(p!==b&&(y!==0||U!==0))&&(C=this.mul(C,w[v]),p=0,v=0)}_=26}return C},te.prototype.convertTo=function(l){var h=l.umod(this.m);return h===l?h.clone():h},te.prototype.convertFrom=function(l){var h=l.clone();return h.red=null,h},s.mont=function(l){return new O(l)};function O(f){te.call(this,f),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(O,te),O.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},O.prototype.convertFrom=function(l){var h=this.imod(l.mul(this.rinv));return h.red=null,h},O.prototype.imul=function(l,h){if(l.isZero()||h.isZero())return l.words[0]=0,l.length=1,l;var b=l.imul(h),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=b.isub(w).iushrn(this.shift),C=y;return y.cmp(this.m)>=0?C=y.isub(this.m):y.cmpn(0)<0&&(C=y.iadd(this.m)),C._forceRed(this)},O.prototype.mul=function(l,h){if(l.isZero()||h.isZero())return new s(0)._forceRed(this);var b=l.mul(h),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=b.isub(w).iushrn(this.shift),C=y;return y.cmp(this.m)>=0?C=y.isub(this.m):y.cmpn(0)<0&&(C=y.iadd(this.m)),C._forceRed(this)},O.prototype.invm=function(l){var h=this.imod(l._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(typeof t>"u"||t,e)}}),Mr=9e15,On=1e9,ec="0123456789abcdef",Os="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Is="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",tc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Mr,maxE:Mr,crypto:!1},lf,dn,_e=!0,Xs="[DecimalError] ",Tn=Xs+"Invalid argument: ",df=Xs+"Precision limit exceeded",uf=Xs+"crypto unavailable",ff="[object Decimal]",ci=Math.floor,Gt=Math.pow,rb=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ob=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,sb=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,hf=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui=1e7,ue=7,ab=9007199254740991,cb=Os.length-1,ic=Is.length-1,q={toStringTag:ff};q.absoluteValue=q.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),ae(e)};q.ceil=function(){return ae(new this.constructor(this),this.e+1,2)};q.clampedTo=q.clamp=function(e,t){var i,n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(Tn+t);return i=n.cmp(e),i<0?e:n.cmp(t)>0?t:new r(n)};q.comparedTo=q.cmp=function(e){var t,i,n,r,o=this,s=o.d,a=(e=new o.constructor(e)).d,c=o.s,d=e.s;if(!s||!a)return!c||!d?NaN:c!==d?c:s===a?0:!s^c<0?1:-1;if(!s[0]||!a[0])return s[0]?c:a[0]?-d:0;if(c!==d)return c;if(o.e!==e.e)return o.e>e.e^c<0?1:-1;for(n=s.length,r=a.length,t=0,i=n<r?n:r;t<i;++t)if(s[t]!==a[t])return s[t]>a[t]^c<0?1:-1;return n===r?0:n>r^c<0?1:-1};q.cosine=q.cos=function(){var e,t,i=this,n=i.constructor;return i.d?i.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+ue,n.rounding=1,i=lb(n,bf(n,i)),n.precision=e,n.rounding=t,ae(dn==2||dn==3?i.neg():i,e,t,!0)):new n(1):new n(NaN)};q.cubeRoot=q.cbrt=function(){var e,t,i,n,r,o,s,a,c,d,u=this,m=u.constructor;if(!u.isFinite()||u.isZero())return new m(u);for(_e=!1,o=u.s*Gt(u.s*u,1/3),!o||Math.abs(o)==1/0?(i=ni(u.d),e=u.e,(o=(e-i.length+1)%3)&&(i+=o==1||o==-2?"0":"00"),o=Gt(i,1/3),e=ci((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?i="5e"+e:(i=o.toExponential(),i=i.slice(0,i.indexOf("e")+1)+e),n=new m(i),n.s=u.s):n=new m(o.toString()),s=(e=m.precision)+3;;)if(a=n,c=a.times(a).times(a),d=c.plus(u),n=Je(d.plus(u).times(a),d.plus(c),s+2,1),ni(a.d).slice(0,s)===(i=ni(n.d)).slice(0,s))if(i=i.slice(s-3,s+1),i=="9999"||!r&&i=="4999"){if(!r&&(ae(a,e+1,0),a.times(a).times(a).eq(u))){n=a;break}s+=4,r=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(ae(n,e+1,1),t=!n.times(n).times(n).eq(u));break}return _e=!0,ae(n,e,m.rounding,t)};q.decimalPlaces=q.dp=function(){var e,t=this.d,i=NaN;if(t){if(e=t.length-1,i=(e-ci(this.e/ue))*ue,e=t[e],e)for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i};q.dividedBy=q.div=function(e){return Je(this,new this.constructor(e))};q.dividedToIntegerBy=q.divToInt=function(e){var t=this,i=t.constructor;return ae(Je(t,new i(e),0,1,1),i.precision,i.rounding)};q.equals=q.eq=function(e){return this.cmp(e)===0};q.floor=function(){return ae(new this.constructor(this),this.e+1,3)};q.greaterThan=q.gt=function(e){return this.cmp(e)>0};q.greaterThanOrEqualTo=q.gte=function(e){var t=this.cmp(e);return t==1||t===0};q.hyperbolicCosine=q.cosh=function(){var e,t,i,n,r,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;i=s.precision,n=s.rounding,s.precision=i+Math.max(o.e,o.sd())+4,s.rounding=1,r=o.d.length,r<32?(e=Math.ceil(r/3),t=(1/Zs(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=Fr(s,1,o.times(t),new s(1),!0);for(var c,d=e,u=new s(8);d--;)c=o.times(o),o=a.minus(c.times(u.minus(c.times(u))));return ae(o,s.precision=i,s.rounding=n,!0)};q.hyperbolicSine=q.sinh=function(){var e,t,i,n,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(t=o.precision,i=o.rounding,o.precision=t+Math.max(r.e,r.sd())+4,o.rounding=1,n=r.d.length,n<3)r=Fr(o,2,r,r,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,r=r.times(1/Zs(5,e)),r=Fr(o,2,r,r,!0);for(var s,a=new o(5),c=new o(16),d=new o(20);e--;)s=r.times(r),r=r.times(a.plus(s.times(c.times(s).plus(d))))}return o.precision=t,o.rounding=i,ae(r,t,i,!0)};q.hyperbolicTangent=q.tanh=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,Je(i.sinh(),i.cosh(),n.precision=e,n.rounding=t)):new n(i.s)};q.inverseCosine=q.acos=function(){var e,t=this,i=t.constructor,n=t.abs().cmp(1),r=i.precision,o=i.rounding;return n!==-1?n===0?t.isNeg()?$i(i,r,o):new i(0):new i(NaN):t.isZero()?$i(i,r+4,o).times(.5):(i.precision=r+6,i.rounding=1,t=t.asin(),e=$i(i,r+4,o).times(.5),i.precision=r,i.rounding=o,e.minus(t))};q.inverseHyperbolicCosine=q.acosh=function(){var e,t,i=this,n=i.constructor;return i.lte(1)?new n(i.eq(1)?0:NaN):i.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(i.e),i.sd())+4,n.rounding=1,_e=!1,i=i.times(i).minus(1).sqrt().plus(i),_e=!0,n.precision=e,n.rounding=t,i.ln()):new n(i)};q.inverseHyperbolicSine=q.asinh=function(){var e,t,i=this,n=i.constructor;return!i.isFinite()||i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,n.rounding=1,_e=!1,i=i.times(i).plus(1).sqrt().plus(i),_e=!0,n.precision=e,n.rounding=t,i.ln())};q.inverseHyperbolicTangent=q.atanh=function(){var e,t,i,n,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=o.precision,t=o.rounding,n=r.sd(),Math.max(n,e)<2*-r.e-1?ae(new o(r),e,t,!0):(o.precision=i=n-r.e,r=Je(r.plus(1),new o(1).minus(r),i+e,1),o.precision=e+4,o.rounding=1,r=r.ln(),o.precision=e,o.rounding=t,r.times(.5))):new o(NaN)};q.inverseSine=q.asin=function(){var e,t,i,n,r=this,o=r.constructor;return r.isZero()?new o(r):(t=r.abs().cmp(1),i=o.precision,n=o.rounding,t!==-1?t===0?(e=$i(o,i+4,n).times(.5),e.s=r.s,e):new o(NaN):(o.precision=i+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=i,o.rounding=n,r.times(2)))};q.inverseTangent=q.atan=function(){var e,t,i,n,r,o,s,a,c,d=this,u=d.constructor,m=u.precision,g=u.rounding;if(d.isFinite()){if(d.isZero())return new u(d);if(d.abs().eq(1)&&m+4<=ic)return s=$i(u,m+4,g).times(.25),s.s=d.s,s}else{if(!d.s)return new u(NaN);if(m+4<=ic)return s=$i(u,m+4,g).times(.5),s.s=d.s,s}for(u.precision=a=m+10,u.rounding=1,i=Math.min(28,a/ue+2|0),e=i;e;--e)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(_e=!1,t=Math.ceil(a/ue),n=1,c=d.times(d),s=new u(d),r=d;e!==-1;)if(r=r.times(c),o=s.minus(r.div(n+=2)),r=r.times(c),s=o.plus(r.div(n+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return i&&(s=s.times(2<<i-1)),_e=!0,ae(s,u.precision=m,u.rounding=g,!0)};q.isFinite=function(){return!!this.d};q.isInteger=q.isInt=function(){return!!this.d&&ci(this.e/ue)>this.d.length-2};q.isNaN=function(){return!this.s};q.isNegative=q.isNeg=function(){return this.s<0};q.isPositive=q.isPos=function(){return this.s>0};q.isZero=function(){return!!this.d&&this.d[0]===0};q.lessThan=q.lt=function(e){return this.cmp(e)<0};q.lessThanOrEqualTo=q.lte=function(e){return this.cmp(e)<1};q.logarithm=q.log=function(e){var t,i,n,r,o,s,a,c,d=this,u=d.constructor,m=u.precision,g=u.rounding,k=5;if(e==null)e=new u(10),t=!0;else{if(e=new u(e),i=e.d,e.s<0||!i||!i[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(i=d.d,d.s<0||!i||!i[0]||d.eq(1))return new u(i&&!i[0]?-1/0:d.s!=1?NaN:i?0:1/0);if(t)if(i.length>1)o=!0;else{for(r=i[0];r%10===0;)r/=10;o=r!==1}if(_e=!1,a=m+k,s=kn(d,a),n=t?Ps(u,a+10):kn(e,a),c=Je(s,n,a,1),Oo(c.d,r=m,g))do if(a+=10,s=kn(d,a),n=t?Ps(u,a+10):kn(e,a),c=Je(s,n,a,1),!o){+ni(c.d).slice(r+1,r+15)+1==1e14&&(c=ae(c,m+1,0));break}while(Oo(c.d,r+=10,g));return _e=!0,ae(c,m,g)};q.minus=q.sub=function(e){var t,i,n,r,o,s,a,c,d,u,m,g,k=this,x=k.constructor;if(e=new x(e),!k.d||!e.d)return!k.s||!e.s?e=new x(NaN):k.d?e.s=-e.s:e=new x(e.d||k.s!==e.s?k:NaN),e;if(k.s!=e.s)return e.s=-e.s,k.plus(e);if(d=k.d,g=e.d,a=x.precision,c=x.rounding,!d[0]||!g[0]){if(g[0])e.s=-e.s;else if(d[0])e=new x(k);else return new x(c===3?-0:0);return _e?ae(e,a,c):e}if(i=ci(e.e/ue),u=ci(k.e/ue),d=d.slice(),o=u-i,o){for(m=o<0,m?(t=d,o=-o,s=g.length):(t=g,i=u,s=d.length),n=Math.max(Math.ceil(a/ue),s)+2,o>n&&(o=n,t.length=1),t.reverse(),n=o;n--;)t.push(0);t.reverse()}else{for(n=d.length,s=g.length,m=n<s,m&&(s=n),n=0;n<s;n++)if(d[n]!=g[n]){m=d[n]<g[n];break}o=0}for(m&&(t=d,d=g,g=t,e.s=-e.s),s=d.length,n=g.length-s;n>0;--n)d[s++]=0;for(n=g.length;n>o;){if(d[--n]<g[n]){for(r=n;r&&d[--r]===0;)d[r]=Ui-1;--d[r],d[n]+=Ui}d[n]-=g[n]}for(;d[--s]===0;)d.pop();for(;d[0]===0;d.shift())--i;return d[0]?(e.d=d,e.e=Js(d,i),_e?ae(e,a,c):e):new x(c===3?-0:0)};q.modulo=q.mod=function(e){var t,i=this,n=i.constructor;return e=new n(e),!i.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||i.d&&!i.d[0]?ae(new n(i),n.precision,n.rounding):(_e=!1,n.modulo==9?(t=Je(i,e.abs(),0,3,1),t.s*=e.s):t=Je(i,e,0,n.modulo,1),t=t.times(e),_e=!0,i.minus(t))};q.naturalExponential=q.exp=function(){return nc(this)};q.naturalLogarithm=q.ln=function(){return kn(this)};q.negated=q.neg=function(){var e=new this.constructor(this);return e.s=-e.s,ae(e)};q.plus=q.add=function(e){var t,i,n,r,o,s,a,c,d,u,m=this,g=m.constructor;if(e=new g(e),!m.d||!e.d)return!m.s||!e.s?e=new g(NaN):m.d||(e=new g(e.d||m.s===e.s?m:NaN)),e;if(m.s!=e.s)return e.s=-e.s,m.minus(e);if(d=m.d,u=e.d,a=g.precision,c=g.rounding,!d[0]||!u[0])return u[0]||(e=new g(m)),_e?ae(e,a,c):e;if(o=ci(m.e/ue),n=ci(e.e/ue),d=d.slice(),r=o-n,r){for(r<0?(i=d,r=-r,s=u.length):(i=u,n=o,s=d.length),o=Math.ceil(a/ue),s=o>s?o+1:s+1,r>s&&(r=s,i.length=1),i.reverse();r--;)i.push(0);i.reverse()}for(s=d.length,r=u.length,s-r<0&&(r=s,i=u,u=d,d=i),t=0;r;)t=(d[--r]=d[r]+u[r]+t)/Ui|0,d[r]%=Ui;for(t&&(d.unshift(t),++n),s=d.length;d[--s]==0;)d.pop();return e.d=d,e.e=Js(d,n),_e?ae(e,a,c):e};q.precision=q.sd=function(e){var t,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Tn+e);return i.d?(t=pf(i.d),e&&i.e+1>t&&(t=i.e+1)):t=NaN,t};q.round=function(){var e=this,t=e.constructor;return ae(new t(e),e.e+1,t.rounding)};q.sine=q.sin=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+ue,n.rounding=1,i=ub(n,bf(n,i)),n.precision=e,n.rounding=t,ae(dn>2?i.neg():i,e,t,!0)):new n(NaN)};q.squareRoot=q.sqrt=function(){var e,t,i,n,r,o,s=this,a=s.d,c=s.e,d=s.s,u=s.constructor;if(d!==1||!a||!a[0])return new u(!d||d<0&&(!a||a[0])?NaN:a?s:1/0);for(_e=!1,d=Math.sqrt(+s),d==0||d==1/0?(t=ni(a),(t.length+c)%2==0&&(t+="0"),d=Math.sqrt(t),c=ci((c+1)/2)-(c<0||c%2),d==1/0?t="5e"+c:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),n=new u(t)):n=new u(d.toString()),i=(c=u.precision)+3;;)if(o=n,n=o.plus(Je(s,o,i+2,1)).times(.5),ni(o.d).slice(0,i)===(t=ni(n.d)).slice(0,i))if(t=t.slice(i-3,i+1),t=="9999"||!r&&t=="4999"){if(!r&&(ae(o,c+1,0),o.times(o).eq(s))){n=o;break}i+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ae(n,c+1,1),e=!n.times(n).eq(s));break}return _e=!0,ae(n,c,u.rounding,e)};q.tangent=q.tan=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,i=i.sin(),i.s=1,i=Je(i,new n(1).minus(i.times(i)).sqrt(),e+10,0),n.precision=e,n.rounding=t,ae(dn==2||dn==4?i.neg():i,e,t,!0)):new n(NaN)};q.times=q.mul=function(e){var t,i,n,r,o,s,a,c,d,u=this,m=u.constructor,g=u.d,k=(e=new m(e)).d;if(e.s*=u.s,!g||!g[0]||!k||!k[0])return new m(!e.s||g&&!g[0]&&!k||k&&!k[0]&&!g?NaN:!g||!k?e.s/0:e.s*0);for(i=ci(u.e/ue)+ci(e.e/ue),c=g.length,d=k.length,c<d&&(o=g,g=k,k=o,s=c,c=d,d=s),o=[],s=c+d,n=s;n--;)o.push(0);for(n=d;--n>=0;){for(t=0,r=c+n;r>n;)a=o[r]+k[n]*g[r-n-1]+t,o[r--]=a%Ui|0,t=a/Ui|0;o[r]=(o[r]+t)%Ui|0}for(;!o[--s];)o.pop();return t?++i:o.shift(),e.d=o,e.e=Js(o,i),_e?ae(e,m.precision,m.rounding):e};q.toBinary=function(e,t){return $c(this,2,e,t)};q.toDecimalPlaces=q.toDP=function(e,t){var i=this,n=i.constructor;return i=new n(i),e===void 0?i:(_i(e,0,On),t===void 0?t=n.rounding:_i(t,0,8),ae(i,e+i.e+1,t))};q.toExponential=function(e,t){var i,n=this,r=n.constructor;return e===void 0?i=Qi(n,!0):(_i(e,0,On),t===void 0?t=r.rounding:_i(t,0,8),n=ae(new r(n),e+1,t),i=Qi(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+i:i};q.toFixed=function(e,t){var i,n,r=this,o=r.constructor;return e===void 0?i=Qi(r):(_i(e,0,On),t===void 0?t=o.rounding:_i(t,0,8),n=ae(new o(r),e+r.e+1,t),i=Qi(n,!1,e+n.e+1)),r.isNeg()&&!r.isZero()?"-"+i:i};q.toFraction=function(e){var t,i,n,r,o,s,a,c,d,u,m,g,k=this,x=k.d,M=k.constructor;if(!x)return new M(k);if(d=i=new M(1),n=c=new M(0),t=new M(n),o=t.e=pf(x)-k.e-1,s=o%ue,t.d[0]=Gt(10,s<0?ue+s:s),e==null)e=o>0?t:d;else{if(a=new M(e),!a.isInt()||a.lt(d))throw Error(Tn+a);e=a.gt(t)?o>0?t:d:a}for(_e=!1,a=new M(ni(x)),u=M.precision,M.precision=o=x.length*ue*2;m=Je(a,t,0,1,1),r=i.plus(m.times(n)),r.cmp(e)!=1;)i=n,n=r,r=d,d=c.plus(m.times(r)),c=r,r=t,t=a.minus(m.times(r)),a=r;return r=Je(e.minus(i),n,0,1,1),c=c.plus(r.times(d)),i=i.plus(r.times(n)),c.s=d.s=k.s,g=Je(d,n,o,1).minus(k).abs().cmp(Je(c,i,o,1).minus(k).abs())<1?[d,n]:[c,i],M.precision=u,_e=!0,g};q.toHexadecimal=q.toHex=function(e,t){return $c(this,16,e,t)};q.toNearest=function(e,t){var i=this,n=i.constructor;if(i=new n(i),e==null){if(!i.d)return i;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:_i(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(_e=!1,i=Je(i,e,0,t,1).times(e),_e=!0,ae(i)):(e.s=i.s,i=e),i};q.toNumber=function(){return+this};q.toOctal=function(e,t){return $c(this,8,e,t)};q.toPower=q.pow=function(e){var t,i,n,r,o,s,a=this,c=a.constructor,d=+(e=new c(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new c(Gt(+a,d));if(a=new c(a),a.eq(1))return a;if(n=c.precision,o=c.rounding,e.eq(1))return ae(a,n,o);if(t=ci(e.e/ue),t>=e.d.length-1&&(i=d<0?-d:d)<=ab)return r=_f(c,a,i,n),e.s<0?new c(1).div(r):ae(r,n,o);if(s=a.s,s<0){if(t<e.d.length-1)return new c(NaN);if(e.d[t]&1||(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return i=Gt(+a,d),t=i==0||!isFinite(i)?ci(d*(Math.log("0."+ni(a.d))/Math.LN10+a.e+1)):new c(i+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?s/0:0):(_e=!1,c.rounding=a.s=1,i=Math.min(12,(t+"").length),r=nc(e.times(kn(a,n+i)),n),r.d&&(r=ae(r,n+5,1),Oo(r.d,n,o)&&(t=n+10,r=ae(nc(e.times(kn(a,t+i)),t),t+5,1),+ni(r.d).slice(n+1,n+15)+1==1e14&&(r=ae(r,n+1,0)))),r.s=s,_e=!0,c.rounding=o,ae(r,n,o))};q.toPrecision=function(e,t){var i,n=this,r=n.constructor;return e===void 0?i=Qi(n,n.e<=r.toExpNeg||n.e>=r.toExpPos):(_i(e,1,On),t===void 0?t=r.rounding:_i(t,0,8),n=ae(new r(n),e,t),i=Qi(n,e<=n.e||n.e<=r.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+i:i};q.toSignificantDigits=q.toSD=function(e,t){var i=this,n=i.constructor;return e===void 0?(e=n.precision,t=n.rounding):(_i(e,1,On),t===void 0?t=n.rounding:_i(t,0,8)),ae(new n(i),e,t)};q.toString=function(){var e=this,t=e.constructor,i=Qi(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i};q.truncated=q.trunc=function(){return ae(new this.constructor(this),this.e+1,1)};q.valueOf=q.toJSON=function(){var e=this,t=e.constructor,i=Qi(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+i:i};function ni(e){var t,i,n,r=e.length-1,o="",s=e[0];if(r>0){for(o+=s,t=1;t<r;t++)n=e[t]+"",i=ue-n.length,i&&(o+=vn(i)),o+=n;s=e[t],n=s+"",i=ue-n.length,i&&(o+=vn(i))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function _i(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Tn+e)}function Oo(e,t,i,n){var r,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=ue,r=0):(r=Math.ceil((t+1)/ue),t%=ue),o=Gt(10,ue-t),a=e[r]%o|0,n==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),s=i<4&&a==99999||i>3&&a==49999||a==5e4||a==0):s=(i<4&&a+1==o||i>3&&a+1==o/2)&&(e[r+1]/o/100|0)==Gt(10,t-2)-1||(a==o/2||a==0)&&(e[r+1]/o/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),s=(n||i<4)&&a==9999||!n&&i>3&&a==4999):s=((n||i<4)&&a+1==o||!n&&i>3&&a+1==o/2)&&(e[r+1]/o/1e3|0)==Gt(10,t-3)-1,s}function ls(e,t,i){for(var n,r=[0],o,s=0,a=e.length;s<a;){for(o=r.length;o--;)r[o]*=t;for(r[0]+=ec.indexOf(e.charAt(s++)),n=0;n<r.length;n++)r[n]>i-1&&(r[n+1]===void 0&&(r[n+1]=0),r[n+1]+=r[n]/i|0,r[n]%=i)}return r.reverse()}function lb(e,t){var i,n,r;if(t.isZero())return t;n=t.d.length,n<32?(i=Math.ceil(n/3),r=(1/Zs(4,i)).toString()):(i=16,r="2.3283064365386962890625e-10"),e.precision+=i,t=Fr(e,1,t.times(r),new e(1));for(var o=i;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=i,t}var Je=function(){function e(n,r,o){var s,a=0,c=n.length;for(n=n.slice();c--;)s=n[c]*r+a,n[c]=s%o|0,a=s/o|0;return a&&n.unshift(a),n}function t(n,r,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(n[a]!=r[a]){c=n[a]>r[a]?1:-1;break}return c}function i(n,r,o,s){for(var a=0;o--;)n[o]-=a,a=n[o]<r[o]?1:0,n[o]=a*s+n[o]-r[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,r,o,s,a,c){var d,u,m,g,k,x,M,I,E,B,N,L,X,K,ee,me,be,ie,z,te,O=n.constructor,f=n.s==r.s?1:-1,l=n.d,h=r.d;if(!l||!l[0]||!h||!h[0])return new O(!n.s||!r.s||(l?h&&l[0]==h[0]:!h)?NaN:l&&l[0]==0||!h?f*0:f/0);for(c?(k=1,u=n.e-r.e):(c=Ui,k=ue,u=ci(n.e/k)-ci(r.e/k)),z=h.length,be=l.length,E=new O(f),B=E.d=[],m=0;h[m]==(l[m]||0);m++);if(h[m]>(l[m]||0)&&u--,o==null?(K=o=O.precision,s=O.rounding):a?K=o+(n.e-r.e)+1:K=o,K<0)B.push(1),x=!0;else{if(K=K/k+2|0,m=0,z==1){for(g=0,h=h[0],K++;(m<be||g)&&K--;m++)ee=g*c+(l[m]||0),B[m]=ee/h|0,g=ee%h|0;x=g||m<be}else{for(g=c/(h[0]+1)|0,g>1&&(h=e(h,g,c),l=e(l,g,c),z=h.length,be=l.length),me=z,N=l.slice(0,z),L=N.length;L<z;)N[L++]=0;te=h.slice(),te.unshift(0),ie=h[0],h[1]>=c/2&&++ie;do g=0,d=t(h,N,z,L),d<0?(X=N[0],z!=L&&(X=X*c+(N[1]||0)),g=X/ie|0,g>1?(g>=c&&(g=c-1),M=e(h,g,c),I=M.length,L=N.length,d=t(M,N,I,L),d==1&&(g--,i(M,z<I?te:h,I,c))):(g==0&&(d=g=1),M=h.slice()),I=M.length,I<L&&M.unshift(0),i(N,M,L,c),d==-1&&(L=N.length,d=t(h,N,z,L),d<1&&(g++,i(N,z<L?te:h,L,c))),L=N.length):d===0&&(g++,N=[0]),B[m++]=g,d&&N[0]?N[L++]=l[me]||0:(N=[l[me]],L=1);while((me++<be||N[0]!==void 0)&&K--);x=N[0]!==void 0}B[0]||B.shift()}if(k==1)E.e=u,lf=x;else{for(m=1,g=B[0];g>=10;g/=10)m++;E.e=m+u*k-1,ae(E,a?o+E.e+1:o,s,x)}return E}}();function ae(e,t,i,n){var r,o,s,a,c,d,u,m,g,k=e.constructor;e:if(t!=null){if(m=e.d,!m)return e;for(r=1,a=m[0];a>=10;a/=10)r++;if(o=t-r,o<0)o+=ue,s=t,u=m[g=0],c=u/Gt(10,r-s-1)%10|0;else if(g=Math.ceil((o+1)/ue),a=m.length,g>=a)if(n){for(;a++<=g;)m.push(0);u=c=0,r=1,o%=ue,s=o-ue+1}else break e;else{for(u=a=m[g],r=1;a>=10;a/=10)r++;o%=ue,s=o-ue+r,c=s<0?0:u/Gt(10,r-s-1)%10|0}if(n=n||t<0||m[g+1]!==void 0||(s<0?u:u%Gt(10,r-s-1)),d=i<4?(c||n)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||n||i==6&&(o>0?s>0?u/Gt(10,r-s):0:m[g-1])%10&1||i==(e.s<0?8:7)),t<1||!m[0])return m.length=0,d?(t-=e.e+1,m[0]=Gt(10,(ue-t%ue)%ue),e.e=-t||0):m[0]=e.e=0,e;if(o==0?(m.length=g,a=1,g--):(m.length=g+1,a=Gt(10,ue-o),m[g]=s>0?(u/Gt(10,r-s)%Gt(10,s)|0)*a:0),d)for(;;)if(g==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,m[0]==Ui&&(m[0]=1));break}else{if(m[g]+=a,m[g]!=Ui)break;m[g--]=0,a=1}for(o=m.length;m[--o]===0;)m.pop()}return _e&&(e.e>k.maxE?(e.d=null,e.e=NaN):e.e<k.minE&&(e.e=0,e.d=[0])),e}function Qi(e,t,i){if(!e.isFinite())return gf(e);var n,r=e.e,o=ni(e.d),s=o.length;return t?(i&&(n=i-s)>0?o=o.charAt(0)+"."+o.slice(1)+vn(n):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):r<0?(o="0."+vn(-r-1)+o,i&&(n=i-s)>0&&(o+=vn(n))):r>=s?(o+=vn(r+1-s),i&&(n=i-r-1)>0&&(o=o+"."+vn(n))):((n=r+1)<s&&(o=o.slice(0,n)+"."+o.slice(n)),i&&(n=i-s)>0&&(r+1===s&&(o+="."),o+=vn(n))),o}function Js(e,t){var i=e[0];for(t*=ue;i>=10;i/=10)t++;return t}function Ps(e,t,i){if(t>cb)throw _e=!0,i&&(e.precision=i),Error(df);return ae(new e(Os),t,1,!0)}function $i(e,t,i){if(t>ic)throw Error(df);return ae(new e(Is),t,i,!0)}function pf(e){var t=e.length-1,i=t*ue+1;if(t=e[t],t){for(;t%10==0;t/=10)i--;for(t=e[0];t>=10;t/=10)i++}return i}function vn(e){for(var t="";e--;)t+="0";return t}function _f(e,t,i,n){var r,o=new e(1),s=Math.ceil(n/ue+4);for(_e=!1;;){if(i%2&&(o=o.times(t),El(o.d,s)&&(r=!0)),i=ci(i/2),i===0){i=o.d.length-1,r&&o.d[i]===0&&++o.d[i];break}t=t.times(t),El(t.d,s)}return _e=!0,o}function jl(e){return e.d[e.d.length-1]&1}function mf(e,t,i){for(var n,r=new e(t[0]),o=0;++o<t.length;)if(n=new e(t[o]),n.s)r[i](n)&&(r=n);else{r=n;break}return r}function nc(e,t){var i,n,r,o,s,a,c,d=0,u=0,m=0,g=e.constructor,k=g.rounding,x=g.precision;if(!e.d||!e.d[0]||e.e>17)return new g(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(_e=!1,c=x):c=t,a=new g(.03125);e.e>-2;)e=e.times(a),m+=5;for(n=Math.log(Gt(2,m))/Math.LN10*2+5|0,c+=n,i=o=s=new g(1),g.precision=c;;){if(o=ae(o.times(e),c,1),i=i.times(++u),a=s.plus(Je(o,i,c,1)),ni(a.d).slice(0,c)===ni(s.d).slice(0,c)){for(r=m;r--;)s=ae(s.times(s),c,1);if(t==null)if(d<3&&Oo(s.d,c-n,k,d))g.precision=c+=10,i=o=a=new g(1),u=0,d++;else return ae(s,g.precision=x,k,_e=!0);else return g.precision=x,s}s=a}}function kn(e,t){var i,n,r,o,s,a,c,d,u,m,g,k=1,x=10,M=e,I=M.d,E=M.constructor,B=E.rounding,N=E.precision;if(M.s<0||!I||!I[0]||!M.e&&I[0]==1&&I.length==1)return new E(I&&!I[0]?-1/0:M.s!=1?NaN:I?0:M);if(t==null?(_e=!1,u=N):u=t,E.precision=u+=x,i=ni(I),n=i.charAt(0),Math.abs(o=M.e)<15e14){for(;n<7&&n!=1||n==1&&i.charAt(1)>3;)M=M.times(e),i=ni(M.d),n=i.charAt(0),k++;o=M.e,n>1?(M=new E("0."+i),o++):M=new E(n+"."+i.slice(1))}else return d=Ps(E,u+2,N).times(o+""),M=kn(new E(n+"."+i.slice(1)),u-x).plus(d),E.precision=N,t==null?ae(M,N,B,_e=!0):M;for(m=M,c=s=M=Je(M.minus(1),M.plus(1),u,1),g=ae(M.times(M),u,1),r=3;;){if(s=ae(s.times(g),u,1),d=c.plus(Je(s,new E(r),u,1)),ni(d.d).slice(0,u)===ni(c.d).slice(0,u))if(c=c.times(2),o!==0&&(c=c.plus(Ps(E,u+2,N).times(o+""))),c=Je(c,new E(k),u,1),t==null)if(Oo(c.d,u-x,B,a))E.precision=u+=x,d=s=M=Je(m.minus(1),m.plus(1),u,1),g=ae(M.times(M),u,1),r=a=1;else return ae(c,E.precision=N,B,_e=!0);else return E.precision=N,c;c=d,r+=2}}function gf(e){return String(e.s*e.s/0)}function rc(e,t){var i,n,r;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length),n=0;t.charCodeAt(n)===48;n++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(n,r),t){if(r-=n,e.e=i=i-n-1,e.d=[],n=(i+1)%ue,i<0&&(n+=ue),n<r){for(n&&e.d.push(+t.slice(0,n)),r-=ue;n<r;)e.d.push(+t.slice(n,n+=ue));t=t.slice(n),n=ue-t.length}else n-=r;for(;n--;)t+="0";e.d.push(+t),_e&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function db(e,t){var i,n,r,o,s,a,c,d,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),hf.test(t))return rc(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(ob.test(t))i=16,t=t.toLowerCase();else if(rb.test(t))i=2;else if(sb.test(t))i=8;else throw Error(Tn+t);for(o=t.search(/p/i),o>0?(c=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,n=e.constructor,s&&(t=t.replace(".",""),a=t.length,o=a-o,r=_f(n,new n(i),o,o*2)),d=ls(t,i,Ui),u=d.length-1,o=u;d[o]===0;--o)d.pop();return o<0?new n(e.s*0):(e.e=Js(d,u),e.d=d,_e=!1,s&&(e=Je(e,r,a*4)),c&&(e=e.times(Math.abs(c)<54?Gt(2,c):Ro.pow(2,c))),_e=!0,e)}function ub(e,t){var i,n=t.d.length;if(n<3)return t.isZero()?t:Fr(e,2,t,t);i=1.4*Math.sqrt(n),i=i>16?16:i|0,t=t.times(1/Zs(5,i)),t=Fr(e,2,t,t);for(var r,o=new e(5),s=new e(16),a=new e(20);i--;)r=t.times(t),t=t.times(o.plus(r.times(s.times(r).minus(a))));return t}function Fr(e,t,i,n,r){var o,s,a,c,d=e.precision,u=Math.ceil(d/ue);for(_e=!1,c=i.times(i),a=new e(n);;){if(s=Je(a.times(c),new e(t++*t++),d,1),a=r?n.plus(s):n.minus(s),n=Je(s.times(c),new e(t++*t++),d,1),s=a.plus(n),s.d[u]!==void 0){for(o=u;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=n,n=s,s=o}return _e=!0,s.d.length=u+1,s}function Zs(e,t){for(var i=e;--t;)i*=e;return i}function bf(e,t){var i,n=t.s<0,r=$i(e,e.precision,1),o=r.times(.5);if(t=t.abs(),t.lte(o))return dn=n?4:1,t;if(i=t.divToInt(r),i.isZero())dn=n?3:2;else{if(t=t.minus(i.times(r)),t.lte(o))return dn=jl(i)?n?2:3:n?4:1,t;dn=jl(i)?n?1:4:n?3:2}return t.minus(r).abs()}function $c(e,t,i,n){var r,o,s,a,c,d,u,m,g,k=e.constructor,x=i!==void 0;if(x?(_i(i,1,On),n===void 0?n=k.rounding:_i(n,0,8)):(i=k.precision,n=k.rounding),!e.isFinite())u=gf(e);else{for(u=Qi(e),s=u.indexOf("."),x?(r=2,t==16?i=i*4-3:t==8&&(i=i*3-2)):r=t,s>=0&&(u=u.replace(".",""),g=new k(1),g.e=u.length-s,g.d=ls(Qi(g),10,r),g.e=g.d.length),m=ls(u,10,r),o=c=m.length;m[--c]==0;)m.pop();if(!m[0])u=x?"0p+0":"0";else{if(s<0?o--:(e=new k(e),e.d=m,e.e=o,e=Je(e,g,i,n,0,r),m=e.d,o=e.e,d=lf),s=m[i],a=r/2,d=d||m[i+1]!==void 0,d=n<4?(s!==void 0||d)&&(n===0||n===(e.s<0?3:2)):s>a||s===a&&(n===4||d||n===6&&m[i-1]&1||n===(e.s<0?8:7)),m.length=i,d)for(;++m[--i]>r-1;)m[i]=0,i||(++o,m.unshift(1));for(c=m.length;!m[c-1];--c);for(s=0,u="";s<c;s++)u+=ec.charAt(m[s]);if(x){if(c>1)if(t==16||t==8){for(s=t==16?4:3,--c;c%s;c++)u+="0";for(m=ls(u,r,t),c=m.length;!m[c-1];--c);for(s=1,u="1.";s<c;s++)u+=ec.charAt(m[s])}else u=u.charAt(0)+"."+u.slice(1);u=u+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)u="0"+u;u="0."+u}else if(++o>c)for(o-=c;o--;)u+="0";else o<c&&(u=u.slice(0,o)+"."+u.slice(o))}u=(t==16?"0x":t==2?"0b":t==8?"0o":"")+u}return e.s<0?"-"+u:u}function El(e,t){if(e.length>t)return e.length=t,!0}function fb(e){return new this(e).abs()}function hb(e){return new this(e).acos()}function pb(e){return new this(e).acosh()}function _b(e,t){return new this(e).plus(t)}function mb(e){return new this(e).asin()}function gb(e){return new this(e).asinh()}function bb(e){return new this(e).atan()}function wb(e){return new this(e).atanh()}function yb(e,t){e=new this(e),t=new this(t);var i,n=this.precision,r=this.rounding,o=n+4;return!e.s||!t.s?i=new this(NaN):!e.d&&!t.d?(i=$i(this,o,1).times(t.s>0?.25:.75),i.s=e.s):!t.d||e.isZero()?(i=t.s<0?$i(this,n,r):new this(0),i.s=e.s):!e.d||t.isZero()?(i=$i(this,o,1).times(.5),i.s=e.s):t.s<0?(this.precision=o,this.rounding=1,i=this.atan(Je(e,t,o,1)),t=$i(this,o,1),this.precision=n,this.rounding=r,i=e.s<0?i.minus(t):i.plus(t)):i=this.atan(Je(e,t,o,1)),i}function vb(e){return new this(e).cbrt()}function kb(e){return ae(e=new this(e),e.e+1,2)}function Cb(e,t,i){return new this(e).clamp(t,i)}function Ab(e){if(!e||typeof e!="object")throw Error(Xs+"Object expected");var t,i,n,r=e.defaults===!0,o=["precision",1,On,"rounding",0,8,"toExpNeg",-Mr,0,"toExpPos",0,Mr,"maxE",0,Mr,"minE",-Mr,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(i=o[t],r&&(this[i]=tc[i]),(n=e[i])!==void 0)if(ci(n)===n&&n>=o[t+1]&&n<=o[t+2])this[i]=n;else throw Error(Tn+i+": "+n);if(i="crypto",r&&(this[i]=tc[i]),(n=e[i])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[i]=!0;else throw Error(uf);else this[i]=!1;else throw Error(Tn+i+": "+n);return this}function xb(e){return new this(e).cos()}function Sb(e){return new this(e).cosh()}function wf(e){var t,i,n;function r(o){var s,a,c,d=this;if(!(d instanceof r))return new r(o);if(d.constructor=r,Bl(o)){d.s=o.s,_e?!o.d||o.e>r.maxE?(d.e=NaN,d.d=null):o.e<r.minE?(d.e=0,d.d=[0]):(d.e=o.e,d.d=o.d.slice()):(d.e=o.e,d.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){d.s=1/o<0?-1:1,d.e=0,d.d=[0];return}if(o<0?(o=-o,d.s=-1):d.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;_e?s>r.maxE?(d.e=NaN,d.d=null):s<r.minE?(d.e=0,d.d=[0]):(d.e=s,d.d=[o]):(d.e=s,d.d=[o]);return}else if(o*0!==0){o||(d.s=NaN),d.e=NaN,d.d=null;return}return rc(d,o.toString())}else if(c!=="string")throw Error(Tn+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),d.s=-1):(a===43&&(o=o.slice(1)),d.s=1),hf.test(o)?rc(d,o):db(d,o)}if(r.prototype=q,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=Ab,r.clone=wf,r.isDecimal=Bl,r.abs=fb,r.acos=hb,r.acosh=pb,r.add=_b,r.asin=mb,r.asinh=gb,r.atan=bb,r.atanh=wb,r.atan2=yb,r.cbrt=vb,r.ceil=kb,r.clamp=Cb,r.cos=xb,r.cosh=Sb,r.div=Tb,r.exp=Mb,r.floor=Ob,r.hypot=Ib,r.ln=Pb,r.log=jb,r.log10=Bb,r.log2=Eb,r.max=Nb,r.min=Rb,r.mod=Db,r.mul=$b,r.pow=qb,r.random=Lb,r.round=Fb,r.sign=Ub,r.sin=Kb,r.sinh=Vb,r.sqrt=zb,r.sub=Wb,r.sum=Gb,r.tan=Hb,r.tanh=Xb,r.trunc=Jb,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(i=n[t++])||(e[i]=this[i]);return r.config(e),r}function Tb(e,t){return new this(e).div(t)}function Mb(e){return new this(e).exp()}function Ob(e){return ae(e=new this(e),e.e+1,3)}function Ib(){var e,t,i=new this(0);for(_e=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)i.d&&(i=i.plus(t.times(t)));else{if(t.s)return _e=!0,new this(1/0);i=t}return _e=!0,i.sqrt()}function Bl(e){return e instanceof Ro||e&&e.toStringTag===ff||!1}function Pb(e){return new this(e).ln()}function jb(e,t){return new this(e).log(t)}function Eb(e){return new this(e).log(2)}function Bb(e){return new this(e).log(10)}function Nb(){return mf(this,arguments,"lt")}function Rb(){return mf(this,arguments,"gt")}function Db(e,t){return new this(e).mod(t)}function $b(e,t){return new this(e).mul(t)}function qb(e,t){return new this(e).pow(t)}function Lb(e){var t,i,n,r,o=0,s=new this(1),a=[];if(e===void 0?e=this.precision:_i(e,1,On),n=Math.ceil(e/ue),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));o<n;)r=t[o],r>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);o<n;)r=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(r%1e7),o+=4);o=n/4}else throw Error(uf);else for(;o<n;)a[o++]=Math.random()*1e7|0;for(n=a[--o],e%=ue,n&&e&&(r=Gt(10,ue-e),a[o]=(n/r|0)*r);a[o]===0;o--)a.pop();if(o<0)i=0,a=[0];else{for(i=-1;a[0]===0;i-=ue)a.shift();for(n=1,r=a[0];r>=10;r/=10)n++;n<ue&&(i-=ue-n)}return s.e=i,s.d=a,s}function Fb(e){return ae(e=new this(e),e.e+1,this.rounding)}function Ub(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Kb(e){return new this(e).sin()}function Vb(e){return new this(e).sinh()}function zb(e){return new this(e).sqrt()}function Wb(e,t){return new this(e).sub(t)}function Gb(){var e=0,t=arguments,i=new this(t[e]);for(_e=!1;i.s&&++e<t.length;)i=i.plus(t[e]);return _e=!0,ae(i,this.precision,this.rounding)}function Hb(e){return new this(e).tan()}function Xb(e){return new this(e).tanh()}function Jb(e){return ae(e=new this(e),e.e+1,1)}q[Symbol.for("nodejs.util.inspect.custom")]=q.toString;q[Symbol.toStringTag]="Decimal";var Ro=q.constructor=wf(tc);Os=new Ro(Os);Is=new Ro(Is);var ds=Ro,ln=Xr(Jr()),wa=Xr(Jr()),Zb=class{constructor(e){if(e!==0)throw new Error("Aftermath only supported on mainnet");this.slippage="900000000000000000",this.poolRegistry="0xfcc774493db2c45c79f688f88d28023a3e7d98e4ee9f48bbf5c7990f651577ae",this.protocolFeeVault="0xf194d9b1bcad972e45a7dd67dd49b3ee1e3357a00a50850c52cd51bb450e13b4",this.treasury="0x28e499dff5e864a2eafe476269a4f5035f1c16f338da7be18b103499abf271ce",this.insuranceFund="0xf0c40d67b078000e18032334c3325c47b9ec9f3d9ae4128be820d54663d14e3b",this.referrealVault="0x35d35b0e5b177593d8c3a801462485572fc30861e6ce96a55af6dc4730709278"}amountLimit(e){return Number(new wa.default(e).mul(new wa.default(this.slippage)).div(new wa.default("1000000000000000000")).toString())}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["swap_a2b",o,s]:["swap_b2a",s,o];if(i.extendedDetails==null)throw new Error("Extended details not supported");if(i.extendedDetails.aftermathLpSupplyType==null)throw new Error("LP supply type not supported");const u=[t.object(i.id),t.object(this.poolRegistry),t.object(this.protocolFeeVault),t.object(this.treasury),t.object(this.insuranceFund),t.object(this.referrealVault),t.pure.u64(this.amountLimit(i.amountOut)),t.pure.u64(this.slippage),n];return t.moveCall({target:`${e.publishedAt()}::aftermath::${a}`,typeArguments:[c,d,i.extendedDetails.aftermathLpSupplyType],arguments:u})})}},Nl="0x000000000000000000000000000000000000000000000000000000000000dee9",Qb=class{constructor(e){if(e!==0)throw new Error("Aftermath only supported on mainnet")}getAccountCap(e,t){return He(this,null,function*(){let i=50,n=null;for(;;){const r=e.getOwnedObjects({owner:t,cursor:n,limit:i,filter:{MoveModule:{package:Nl,module:"custodian_v2"}}});if(r!=null&&r.data!=null){if(r.data.length!==0)return r.data[0].data.objectId;if(r.data.length<50)break}else break}return null})}getOrCreateAccountCap(e,t,i){return He(this,null,function*(){let n=yield this.getAccountCap(t,i);return n!==null?{accountCap:e.object(n),isCreate:!1}:{accountCap:e.moveCall({target:`${Nl}::clob_v2::create_account`,typeArguments:[],arguments:[]}),isCreate:!0}})}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=yield this.getOrCreateAccountCap(t,e.client,e.signer),m=[t.object(i.id),n,u.accountCap,t.object(Ur)],g=t.moveCall({target:`${e.publishedAt()}::deepbook::${a}`,typeArguments:[c,d],arguments:m});return u.isCreate&&t.transferObjects([u.accountCap],e.signer),g})}},Yb=class{constructor(e){if(e!==0)throw new Error("Kriya amm only supported on mainnet")}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(i.id),n];return t.moveCall({target:`${e.publishedAt()}::kriya_amm::${a}`,typeArguments:[c,d],arguments:u})})}},e1=class{constructor(e){if(e!==0)throw new Error("Flowx only supported on mainnet");this.container="0xb65dcbf63fd3ad5d0ebfbf334780dc9f785eff38a4459e37ab08fa79576ee511"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(this.container),n];return t.moveCall({target:`${e.publishedAt()}::flowx_amm::${a}`,typeArguments:[c,d],arguments:u})})}},t1=class{constructor(e){if(e!==0)throw new Error("Turbos only supported on mainnet");this.versioned="0xf1cf0e81048df168ebeb1b8030fad24b3e0b53ae827c25053fff0779c1445b6f"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["swap_a2b",o,s]:["swap_b2a",s,o];if(i.extendedDetails==null)throw new Error("Extended details not supported");if(i.extendedDetails.turbosFeeType==null)throw new Error("Turbos fee type not supported");const u=[t.object(i.id),n,t.object(Ur),t.object(this.versioned)];return t.moveCall({target:`${e.publishedAt()}::turbos::${a}`,typeArguments:[c,d,i.extendedDetails.turbosFeeType],arguments:u})})}},Rl=class{constructor(e,t){this.globalConfig=e===0?"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f":"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",this.partner=t??e===0?"0x639b5e433da31739e800cd085f356e64cae222966d0f1b11bd9dc76b322ff58b":"0x8e0b7668a79592f70fbfb1ae0aebaf9e2019a7049783b9a4b6fe7c6ae038b528"}flash_swap(e,t,i,n){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["flash_swap_a2b",o,s]:["flash_swap_b2a",s,o];let u=n?i.amountIn:i.amountOut;const m=[t.object(this.globalConfig),t.object(i.id),t.object(this.partner),t.pure.u64(u),t.pure.bool(n),t.object(Ur)],g=t.moveCall({target:`${e.publishedAt()}::cetus::${a}`,typeArguments:[c,d],arguments:m});return{targetCoin:g[0],flashReceipt:g[1],payAmount:g[2]}}repay_flash_swap(e,t,i,n,r){const{direction:o,from:s,target:a}=i,[c,d,u]=o?["repay_flash_swap_a2b",s,a]:["repay_flash_swap_b2a",a,s],m=[t.object(this.globalConfig),t.object(i.id),t.object(this.partner),n,r];return t.moveCall({target:`${e.publishedAt()}::cetus::${c}`,typeArguments:[d,u],arguments:m})[0]}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(this.globalConfig),t.object(i.id),t.object(this.partner),n,t.object(Ur)];return t.moveCall({target:`${e.publishedAt()}::cetus::${a}`,typeArguments:[c,d],arguments:u})})}};function Dl(e,...t){const i=Array.isArray(t[t.length-1])?t.pop():[];let r=[e,...t].filter(Boolean).join("::");return i&&i.length&&(r+=`<${i.join(", ")}>`),r}function Rr(e){var t;try{let i=e.replace(/\s/g,"");const n=i.match(/(<.+>)$/),r=(t=n==null?void 0:n[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(r){i=i.slice(0,i.indexOf("<"));const c=Rr(i),d=eb(Yg({},c),{type_arguments:r.map(u=>Rr(u).source_address)});return d.type_arguments=d.type_arguments.map(u=>er.isSuiCoin(u)?u:Rr(u).source_address),d.source_address=Dl(d.full_address,d.type_arguments),d}const o=i.split("::"),a={full_address:i,address:i===yf||i===r1?"0x2":Ya.normalizeSuiObjectId(o[0]),module:o[1],name:o[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=Dl(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function $l(e){return Rr(e).source_address}var i1="0x2::coin::Coin",n1=/^0x2::coin::Coin<(.+)>$/,yf="0x2::sui::SUI",r1="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",er=class wn{static getCoinTypeArg(t){const i=t.type.match(n1);return i?i[1]:null}static isSUI(t){const i=wn.getCoinTypeArg(t);return i?wn.getCoinSymbol(i)==="SUI":!1}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getBalance(t){return BigInt(t.fields.balance)}static totalBalance(t,i){let n=BigInt(0);return t.forEach(r=>{i===r.coinAddress&&(n+=BigInt(r.balance))}),n}static getID(t){return t.fields.id.id}static getCoinTypeFromArg(t){return`${i1}<${t}>`}static getCoinAssets(t,i){const n=[];return i.forEach(r=>{$l(r.coinAddress)===$l(t)&&n.push(r)}),n}static isSuiCoin(t){return Rr(t).full_address===yf}static selectCoinObjectIdGreaterThanOrEqual(t,i,n=[]){const r=wn.selectCoinAssetGreaterThanOrEqual(t,i,n),o=r.selectedCoins.map(c=>c.coinObjectId),s=r.remainingCoins,a=r.selectedCoins.map(c=>c.balance.toString());return{objectArray:o,remainCoins:s,amountArray:a}}static selectCoinAssetGreaterThanOrEqual(t,i,n=[]){const r=wn.sortByBalance(t.filter(d=>!n.includes(d.coinObjectId))),o=wn.calculateTotalBalance(r);if(o<i)return{selectedCoins:[],remainingCoins:r};if(o===i)return{selectedCoins:r,remainingCoins:[]};let s=BigInt(0);const a=[],c=[...r];for(;s<o;){const d=i-s,u=c.findIndex(g=>g.balance>=d);if(u!==-1){a.push(c[u]),c.splice(u,1);break}const m=c.pop();m.balance>0&&(a.push(m),s+=m.balance)}return{selectedCoins:wn.sortByBalance(a),remainingCoins:wn.sortByBalance(c)}}static sortByBalance(t){return t.sort((i,n)=>i.balance<n.balance?-1:i.balance>n.balance?1:0)}static sortByBalanceDes(t){return t.sort((i,n)=>i.balance>n.balance?-1:i.balance<n.balance?0:1)}static calculateTotalBalance(t){return t.reduce((i,n)=>i+n.balance,BigInt(0))}};function ql(e){switch(e){case 1e4:return"Calculate error";case 10001:return"Input number too large can not fit in target type";case 10002:return"No router";case 10003:return"Insufficient Liquidity";default:return"Unknown error"}}function Mn(e){const t=e.indexOf("::");if(t===-1)return e;const i=e.substring(0,t),n=e.substring(t);if(!i.startsWith("0x"))return e;const r=i.substring(2);return r.length>64?e:`0x${r.padStart(64,"0")}${n}`}function o1(e,t){e=Mn(e),t=Mn(t);const i=Math.min(e.length,t.length);for(let n=0;n<i;n++){if(e[n]>t[n])return!0;if(e[n]<t[n])return!1}return!0}function s1(e,t){return e.moveCall({target:"0x2::coin::zero",typeArguments:[t]})}function Ll(e,t,i,n){const r=er.getCoinAssets(n,t);if(i===BigInt(0)&&r.length===0)return{targetCoin:s1(e,n),isMintZeroCoin:!0,targetCoinAmount:0};if(er.calculateTotalBalance(r)<i)throw new AggregateError("Insufficient balance when build merge coin","InsufficientBalance");if(er.isSuiCoin(n))return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(i.toString())]),isMintZeroCoin:!0,targetCoinAmount:Number(i.toString())};let s=er.sortByBalance(r);s.slice(0,3).reduce((m,g)=>m+g.balance,BigInt(0))<BigInt(i)&&(s=er.sortByBalanceDes(r));let c=er.selectCoinObjectIdGreaterThanOrEqual(s,i);const[d,...u]=c.objectArray;return u.length>0&&e.mergeCoins(d,u.map(m=>e.object(m))),{targetCoin:e.object(d),isMintZeroCoin:!1,targetCoinAmount:Number(i.toString())}}function a1(e){return!(!e.startsWith("0x")||e.length!==66)}var mr=Xr(Jr()),Wo=Xr(Jr()),Do=Xr(Jr()),Or=new Do.default(0);new Do.default(1);var c1=new Do.default(2);c1.pow(new Do.default(128));var l1=new Do.default("18446744073709551615"),gr=1e9;function Fl(e,t,i){let n=Or;return t?n=e.mul(new Wo.default(gr-i*gr)).div(new Wo.default(gr)):n=e.mul(new Wo.default(gr+i*gr)).div(new Wo.default(gr)),Number(n.toString())}function d1(e,t,i){return new ds(e).mul(ds.pow(2,-64)).pow(2).mul(ds.pow(10,t-i))}function u1(e,t,i){return He(this,null,function*(){var n,r,o,s,a;const{from:c,target:d,amount:u,byAmountIn:m,pools:g}=t,k=Mn(c),x=Mn(d),M=new Wg.Transaction,I=o1(k,x),E="0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee",B=I?k:x,N=I?x:k,L=[B,N];for(let h=0;h<g.length;h++){const b=[M.object(g[h]),M.pure.bool(I),M.pure.bool(m),M.pure.u64(u.toString())];M.moveCall({target:`${E}::fetcher_script::calculate_swap_result`,arguments:b,typeArguments:L})}if(!a1(i))throw new AggregateError("Aggregator package not set","InvalidWallet");const X=yield e.devInspectTransactionBlock({transactionBlock:M,sender:i});if(X.error!=null)throw new AggregateError("Aggregator package not set","SimulateError");const K=(n=X.events)==null?void 0:n.filter(h=>h.type.includes("CalculatedSwapResultEvent"));if(K.length===0||K.length!==g.length)throw new AggregateError("Simulate event result error","simulateEventError");let ee=m?Or:l1,me=0;for(let h=0;h<K.length;h+=1)if(!K[h].parsedJson.data.is_exceed)if(t.byAmountIn){const b=new mr.BN(K[h].parsedJson.data.amount_out);b.gt(ee)&&(me=h,ee=b)}else{const b=new mr.BN(K[h].parsedJson.data.amount_out);b.lt(ee)&&(me=h,ee=b)}const be=K[me].parsedJson.data;console.log("event",JSON.stringify(be,null,2));const ie=be.step_results[0].current_sqrt_price,[z,te]=yield Promise.all([e.getCoinMetadata({coinType:B}).then(h=>h==null?void 0:h.decimals),e.getCoinMetadata({coinType:N}).then(h=>h==null?void 0:h.decimals)]);if(z==null||te==null)throw new AggregateError("Simulate event result error","CannotGetDecimals");const O=d1(ie,z,te),f={amountIn:new mr.BN((r=be.amount_in)!=null?r:0),amountOut:new mr.BN((o=be.amount_out)!=null?o:0),routes:[{path:[{id:g[me],direction:I,provider:"CETUS",from:k,target:x,feeRate:be.fee_rate,amountIn:be.amount_in,amountOut:be.amount_out,extendedDetails:{afterSqrtPrice:be.after_sqrt_price}}],amountIn:new mr.BN((s=be.amount_in)!=null?s:0),amountOut:new mr.BN((a=be.amount_out)!=null?a:0),initialPrice:O}],insufficientLiquidity:!1};return{isExceed:be.is_exceed,routeData:f}})}var f1=class{constructor(e){if(e!==0)throw new Error("Kriya clmm only supported on mainnet");this.version="0xf5145a7ac345ca8736cf8c76047d00d6d378f30e81be6f6eb557184d9de93c78"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(i.id),n,t.object(this.version),t.object(Ur)];return t.moveCall({target:`${e.publishedAt()}::kriya_clmm::${a}`,typeArguments:[c,d],arguments:u})})}},h1=class{constructor(e){if(e!==0)throw new Error("Haedal only supported on mainnet")}swap(e,t,i,n){return He(this,null,function*(){const{direction:r}=i;if(!r)throw new Error("Haedal not support b2a swap");const o="swap_a2b",s=[t.object(i.id),t.object("0x5"),n];return t.moveCall({target:`${e.publishedAt()}::haedal::${o}`,typeArguments:[],arguments:s})})}},p1=class{constructor(e){if(e!==0)throw new Error("Afsui only supported on mainnet");this.stakedSuiVault="0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",this.safe="0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",this.referVault="0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",this.validator="0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r}=i;if(!r)throw new Error("Afsui not support b2a swap");const o="swap_a2b",s=[t.object(this.stakedSuiVault),t.object(this.safe),t.object("0x5"),t.object(this.referVault),t.object(this.validator),n];return t.moveCall({target:`${e.publishedAt()}::afsui::${o}`,typeArguments:[],arguments:s})})}},_1=class{constructor(e){if(e!==0)throw new Error("Volo only supported on mainnet");this.nativePool="0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",this.metadata="0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r}=i;if(!r)throw new Error("Volo not support b2a swap");const o="swap_a2b",s=[t.object(this.nativePool),t.object(this.metadata),t.object("0x5"),n];return t.moveCall({target:`${e.publishedAt()}::volo::${o}`,typeArguments:[],arguments:s})})}},m1=class{constructor(e){if(e!==0)throw new Error("Flowx clmm only supported on mainnet");this.versioned="0x67624a1533b5aff5d0dfcf5e598684350efd38134d2d245f475524c03a64e656",this.poolRegistry="0x27565d24a4cd51127ac90e4074a841bbe356cca7bf5759ddc14a975be1632abc"}swap(e,t,i,n){return He(this,null,function*(){const{direction:r,from:o,target:s}=i,[a,c,d]=r?["swap_a2b",o,s]:["swap_b2a",s,o],u=[t.object(this.poolRegistry),t.pure.u64(i.feeRate*1e6),n,t.object(this.versioned),t.object(Ur)];return t.moveCall({target:`${e.publishedAt()}::flowx_clmm::${a}`,typeArguments:[c,d],arguments:u})})}},vf="CETUS",g1="DEEPBOOK",b1="KRIYA",w1="FLOWX",y1="FLOWXV3",v1="KRIYAV3",kf="TURBOS",oc="AFTERMATH",k1="HAEDAL",C1="VOLO",A1="AFSUI",x1=class{constructor(e,t,i,n){this.endpoint=e,this.client=i,this.signer=t,this.env=n,this.allCoins=[]}getAllCoins(){return He(this,null,function*(){let e=null,t=50;const i=[];for(;;){const n=yield this.client.getAllCoins({owner:this.signer,cursor:e,limit:t});for(const r of n.data)i.push({coinAddress:Rr(r.coinType).source_address,coinObjectId:r.coinObjectId,balance:BigInt(r.balance)});if(n.data.length<t)break;e=n.data[t-1].coinObjectId}return i})}findRouters(e){return He(this,null,function*(){return T1(this.endpoint,e)})}expectInputSwap(e,t,i,n,r){return He(this,null,function*(){if(i.length===0)throw new Error("No router found");const o=i.map(m=>m.amountIn.toString()),s=i[0].path[0].from,a=i[0].path[i[0].path.length-1].target,c=e.splitCoins(t,o),d=[];for(let m=0;m<i.length;m++){if(i[m].path.length===0)throw new Error("Empty path");let g=c[m];for(const k of i[m].path)g=yield this.newDex(k.provider,r).swap(this,e,k,g);d.push(g)}return this.transferOrDestoryCoin(e,t,s),this.checkCoinThresholdAndMergeCoin(e,d,a,n)})}expectOutputSwap(e,t,i,n){return He(this,null,function*(){const r=[],o=[],s=[],a=new Rl(this.env,n);for(let d=0;d<i.length;d++){const u=i[d];for(let g=u.path.length-1;g>=0;g--){const k=u.path[g],x=a.flash_swap(this,e,k,!1);r.unshift(x.targetCoin),o.unshift(x.flashReceipt)}let m=t;for(let g=0;g<u.path.length;g++){const k=u.path[g],x=a.repay_flash_swap(this,e,k,m,o[g]);m=r[g],g===0?t=x:this.transferOrDestoryCoin(e,x,k.from),g===u.path.length-1&&s.push(m)}}const c=i[0].path[0].from;if(this.transferOrDestoryCoin(e,t,c),s.length>1){const d=e.makeMoveVec({elements:s.slice(1)});e.moveCall({target:`${Ya.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[i[0].path[i[0].path.length-1].target],arguments:[s[0],d]})}return s[0]})}swapInPools(e){return He(this,null,function*(){let t;try{t=yield u1(this.client,e,this.signer)}catch(i){return console.error("swapInPools error:",i),null}return t})}routerSwap(e){return He(this,null,function*(){const{routers:t,inputCoin:i,slippage:n,byAmountIn:r,txb:o,partner:s}=e,a=t.reduce((g,k)=>g.add(k.amountIn),new ln.default(0)),c=t.reduce((g,k)=>g.add(k.amountOut),new ln.default(0)),d=Fl(r?c:a,r,n);if(r)return yield this.expectInputSwap(o,i,t,new ln.default(d),s);const u=o.splitCoins(i,[d.toString()]);return this.transferOrDestoryCoin(o,i,t[0].path[0].from),yield this.expectOutputSwap(o,u[0],t,s)})}fastRouterSwap(e){return He(this,null,function*(){const{routers:t,byAmountIn:i,slippage:n,txb:r,partner:o,isMergeTragetCoin:s,refreshAllCoins:a}=e;(a||this.allCoins.length===0)&&(this.allCoins=yield this.getAllCoins());const c=t[0].path[0].from,d=t[0].path[t[0].path.length-1].target,u=t.reduce((I,E)=>I.add(E.amountIn),new ln.default(0)),m=t.reduce((I,E)=>I.add(E.amountOut),new ln.default(0)),g=Fl(i?m:u,i,n),k=i?u:g,x=Ll(r,this.allCoins,BigInt(k.toString()),c),M=yield this.routerSwap({routers:t,inputCoin:x.targetCoin,slippage:n,byAmountIn:i,txb:r,partner:o});if(s){const I=Ll(r,this.allCoins,BigInt(0),d);r.mergeCoins(I.targetCoin,[M]),I.isMintZeroCoin&&this.transferOrDestoryCoin(r,I.targetCoin,d)}else this.transferOrDestoryCoin(r,M,d)})}publishedAt(){return this.env===0?"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302":"0x6cbaa3e9fbe902d90191b12f315932bc58079cba422bafbd4b4369f80e61f595"}transferOrDestoryCoin(e,t,i){e.moveCall({target:`${this.publishedAt()}::utils::transfer_or_destroy_coin`,typeArguments:[i],arguments:[t]})}checkCoinThresholdAndMergeCoin(e,t,i,n){let r=t[0];if(t.length>1){let o=e.makeMoveVec({elements:t.slice(1)});e.moveCall({target:`${Ya.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[i],arguments:[t[0],o]}),r=t[0]}return e.moveCall({target:`${this.publishedAt()}::utils::check_coin_threshold`,typeArguments:[i],arguments:[r,e.pure.u64(n.toString())]}),r}newDex(e,t){switch(e){case vf:return new Rl(this.env,t);case g1:return new Qb(this.env);case b1:return new Yb(this.env);case v1:return new f1(this.env);case w1:return new e1(this.env);case y1:return new m1(this.env);case kf:return new t1(this.env);case oc:return new Zb(this.env);case k1:return new h1(this.env);case A1:return new p1(this.env);case C1:return new _1(this.env);default:throw new Error(`Unsupported dex ${e}`)}}signAndExecuteTransaction(e,t){return He(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:t,options:{showEffects:!0,showEvents:!0,showInput:!0,showBalanceChanges:!0}})})}devInspectTransactionBlock(e){return He(this,null,function*(){return yield this.client.devInspectTransactionBlock({transactionBlock:e,sender:this.signer})})}sendTransaction(e,t){return He(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:t})})}};function S1(e){return{amountIn:new ln.default(e.amount_in.toString()),amountOut:new ln.default(e.amount_out.toString()),insufficientLiquidity:!1,routes:e.routes.map(t=>({path:t.path.map(i=>{var n,r,o;let s;i.provider===oc&&(s=i.extended_details.aftermath_pool_flatness===0?"v2":"v3");let a;return(i.provider===kf||i.provider===oc||i.provider===vf)&&(a={aftermathLpSupplyType:(n=i.extended_details)==null?void 0:n.aftermath_lp_supply_type,turbosFeeType:(r=i.extended_details)==null?void 0:r.turbos_fee_type,afterSqrtPrice:(o=i.extended_details)==null?void 0:o.after_sqrt_price}),{id:i.id,direction:i.direction,provider:i.provider,from:i.from,target:i.target,feeRate:i.fee_rate,amountIn:i.amount_in,amountOut:i.amount_out,extendedDetails:a,version:s}}),amountIn:new ln.default(t.amount_in.toString()),amountOut:new ln.default(t.amount_out.toString()),initialPrice:new ds(t.initial_price.toString())}))}}var Ur="0x0000000000000000000000000000000000000000000000000000000000000006";Xr(Jr());function T1(e,t){return He(this,null,function*(){let i;if(t.liquidityChanges&&t.liquidityChanges.length>0?i=yield O1(e,t):i=yield M1(e,t),!i)return null;if(!i.ok)return{amountIn:Or,amountOut:Or,routes:[],insufficientLiquidity:!1,error:{code:10001,msg:ql(10001)}};const n=yield i.json();if(n.data!=null)return S1(n.data);const r=n.msg==="liquidity is not enough";return{amountIn:Or,amountOut:Or,routes:[],insufficientLiquidity:r,error:{code:10003,msg:ql(10003)}}})}function M1(e,t){return He(this,null,function*(){try{const{from:i,target:n,amount:r,byAmountIn:o,depth:s,splitAlgorithm:a,splitFactor:c,splitCount:d,providers:u}=t,m=Mn(i),g=Mn(n);let k=`${e}?from=${m}&target=${g}&amount=${r.toString()}&by_amount_in=${o}`;return s&&(k+=`&depth=${s}`),a&&(k+=`&split_algorithm=${a}`),c&&(k+=`&split_factor=${c}`),d&&(k+=`&split_count=${d}`),u&&u.length>0&&(k+=`&providers=${u.join(",")}`),yield fetch(k)}catch(i){return console.error(i),null}})}function O1(e,t){return He(this,null,function*(){const{from:i,target:n,amount:r,byAmountIn:o,depth:s,splitAlgorithm:a,splitFactor:c,splitCount:d,providers:u,liquidityChanges:m}=t,g=Mn(i),k=Mn(n),x=`${e}`,M=u==null?void 0:u.join(","),I={from:g,target:k,amount:Number(r.toString()),by_amount_in:o,depth:s,split_algorithm:a,split_factor:c,split_count:d,providers:M,liquidity_changes:m.map(E=>({pool:E.poolID,tick_lower:E.ticklower,tick_upper:E.tickUpper,delta_liquidity:E.deltaLiquidity}))};console.log("requestData",JSON.stringify(I,null,2));try{return yield fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})}catch(E){return console.error("Error:",E),null}})}var Cf=(e=>(e[e.Mainnet=0]="Mainnet",e[e.Testnet=1]="Testnet",e))(Cf||{}),ya=x1,fw=Cf,va="router",Ir=1e4,_n=class{static buildPoolImmutables(e){let{fields:t}=e.value.fields.value;return{clmm_pool_id:D(t.clmm_pool_id).address,booster_type:D(t.booster_type.fields.name).source_address,pool_id:D(t.pool_id).address,coinTypeA:D(t.coin_type_a.fields.name).source_address,coinTypeB:D(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){let t=le(e),i=[];return t.config.fields.contents.forEach(n=>{i.push({lock_day:Number(n.fields.key),multiplier:Number(T(n.fields.value).div(Ir))})}),{basic_percent:Number(T(t.basic_percent).div(Ir)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:i,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:Fi(e)}}static buildLockNFT(e){let t=D(Fi(e)).address;return{lock_clmm_position:Nr(e),locked_nft_id:t}}static buildLockPositionInfo(e){let t=le(e),{value:i}=t.value.fields;return{type:i.type,position_id:i.fields.position_id,start_time:Number(i.fields.start_time),lock_period:Number(i.fields.lock_period),end_time:Number(i.fields.end_time),growth_rewarder:i.fields.growth_rewarder,rewarder_owned:i.fields.rewarder_owned,is_settled:i.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},I1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;let{booster:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i,e),r=[];if(n!==void 0)r.push(...n);else{let s=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(j(t).booster_pool_handle)).data)==null||o.forEach(c=>{s.push(c.objectId)});let a=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showContent:!0});for(let c of a){let d=le(c);if(d){let u=_n.buildPoolImmutables(d);this.updateCache(`${u.pool_id}_getPoolImmutable`,u,Z),r.push(u)}}}return this.updateCache(i,r,Z),r}async getPoolImmutable(e){let{booster:t}=this._sdk.sdkOptions,i=`${e}_getPoolImmutable`,n=this.getCache(i);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:j(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=le(r),s=_n.buildPoolImmutables(o);return this.updateCache(i,s,Z),s}async getPools(){let e=[],t=(await this.getPoolImmutables()).map(n=>n.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(t,{showType:!0,showContent:!0});for(let n of i){let r=_n.buildPoolState(n);if(r){let o={...await this.getPoolImmutable(r.pool_id),...r};e.push(o);let s=`${o.pool_id}_getPoolObject`;this.updateCache(s,o,Z)}}return e}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t),r=await this.getPoolImmutable(e);if(n!==void 0)return{...r,...n};let o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=_n.buildPoolState(o),a={...r,...s};return this.updateCache(i,a,Z),a}async getPoolHandleId(e){let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=le(t);return i?i.list.fields.id.id:""}async getBoosterInitConfigs(){var n;let{package_id:e}=this.sdk.sdkOptions.booster,t=(n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:n.data,i={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(r=>{let o=r.parsedJson;o&&(i.booster_config_id=o.config_id)}),i.booster_pool_handle=await this.getPoolHandleId(i.booster_config_id),i}async getOwnerBoosterPositions(e,t,i){let{booster:n}=this.sdk.sdkOptions,r=[],o=[],s=`${n.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:s}});for(let d of a.data)if(D(zi(d)).source_address===s&&d.data){let u=_n.buildLockNFT(d);this.updateCache(`${u.locked_nft_id}_getBoosterPositionById`,u,Z),u&&(t===void 0||t===u.lock_clmm_position.pool)&&r.push(u)}let c=await this.getLockPositionInfos(i,r.map(d=>d.locked_nft_id));for(let d of r)for(let u of c)if(d.lock_clmm_position.pos_object_id===u.position_id){o.push({...d,...u});break}return o}async getBoosterPosition(e,t){let i=`${t}_getBoosterPositionById`,n=this.getCache(i),r;if(n!==void 0)r=n;else{let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});r=_n.buildLockNFT(s),this.updateCache(i,r,Z)}let o=await this.getLockPositionInfo(e,t);return{...r,...o}}async getLockPositionInfos(e,t=[]){var o;let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),n=[],r=[];return(o=i.data)==null||o.forEach(s=>{t.length>0?t.includes(s.name.value)&&n.push(s.objectId):n.push(s.objectId)}),n.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showContent:!0})).forEach(s=>{let a=_n.buildLockPositionInfo(s);a&&r.push(a)}),r}async getLockPositionInfo(e,t){let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return _n.buildLockPositionInfo(i)}calculateXCetusRewarder(e,t,i){let n=t.basic_percent,r="0";e.forEach(s=>{s.coin_address===t.booster_type&&(r=s.amount_owed.toString())}),i.is_settled||t.config.forEach(s=>{s.lock_day===i.lock_period&&(n=s.multiplier)});let o=T(r).sub(i.growth_rewarder).mul(n);return T(i.rewarder_owned).add(o).toString()}lockPositionPayload(e){let{booster:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,n=new $;return n.moveCall({target:`${t.published_at}::${va}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[n.object(j(t).booster_config_id),n.object(j(i).global_config_id),n.object(e.booster_pool_id),n.object(e.clmm_pool_id),n.object(e.clmm_position_id),n.pure.u16(e.lock_day),n.object(F)]}),n}canceLockPositionPayload(e){let{booster:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${va}::cancel_lock`,typeArguments:[e.booster_type],arguments:[i.object(j(t).booster_config_id),i.object(e.booster_pool_id),i.object(e.lock_nft_id),i.object(F)]}),i}redeemPayload(e){let{booster:t,xcetus:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,r=new $,o=j(i);return r.moveCall({target:`${t.published_at}::${va}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[r.object(j(t).booster_config_id),r.object(j(n).global_config_id),r.object(e.booster_pool_id),r.object(e.lock_nft_id),r.object(e.clmm_pool_id),r.object(o.lock_manager_id),r.object(o.xcetus_manager_id),r.object(e.ve_nft_id),r.object(F)]}),r}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},fi="router",Af=1e9,P1=(e=>(e.Upcoming="Upcoming",e.Live="Live",e.Settle="Settle",e.Ended="Ended",e.Failed="Failed",e.Canceled="Canceled",e))(P1||{}),si=class{static priceRealToFix(e,t,i){let n=T(t-i).toNumber();return Number(T(e).div(T(10).pow(T(n))).toString())}static priceFixToReal(e,t,i){let n=T(t-i).toNumber();return Number(T(e).mul(T(10).pow(T(n))).toString())}static raiseTotalAmount(e,t,i){let n=T(t-i).abs().toNumber();return t>i?Number(T(e.total_supply).mul(e.current_price).div(T(10).pow(T(n))).toString()):Number(T(e.total_supply).mul(e.current_price).mul(T(10).pow(T(n))).toString())}static buildLaunchPadPool(e){let t=zi(e),i=D(t),n=le(e),r={coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],pool_address:ze(Fi(e)),is_settle:n.is_settle,current_price:T(n.initialize_price).div(T(Af)).toString(),price:n.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:n.sale_coin,raise_coin_amount:n.raise_coin,total_purchase_amount:n.reality_raise_total,total_supply:n.sale_total,min_purchase:n.min_purchase,max_purchase:n.max_purchase,complete_raise_limit:n.least_raise_amount,softcap:n.softcap,max_raise_amount:n.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(n.liquidity_rate)/1e4,is_cancel:n.is_cancel,duration_summary:{start_time:Number(n.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(n.duration_manager.fields.activity_duration),settle_duration:Number(n.duration_manager.fields.settle_duration),lock_up_duration:Number(n.duration_manager.fields.locked_duration)},white_summary:{white_handle:n.white_list.fields.users.fields.id.id,protection_hard_cap:n.white_list.fields.hard_cap_total,protection_limit_used:n.white_list.fields.purchase_total,size:Number(n.white_list.fields.users.fields.size)},unused_sale:n.unused_sale,harvest_raise:n.harvest_raise,tick_spacing:Number(n.tick_spacing),owner:n.recipient,purchase_summary:{purchase_handle:n.purchase_list.fields.id.id,size:Number(n.purchase_list.fields.size)},pool_status:"Failed"};return si.updatePoolStatus(r),r}static updatePoolStatus(e){let t=Number(T(Date.now()/1e3).toFixed(0)),{duration_summary:i}=e,n=i.start_time+i.purchase_duration,r=n+i.settle_duration;if(i.end_time=n,i.settle_end_time=r,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<i.start_time)e.pool_status="Upcoming";else if(t>i.start_time&&t<n)e.pool_status="Live";else if(t>n&&t<r){let o=e.raise_coin_amount;Number(o)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,t){let i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),n=i[t.coin_type_sale].decimals,r=i[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(T(t.softcap).div(T(t.total_supply))),n,r).toString(),t.max_price=this.priceFixToReal(Number(T(t.max_raise_amount).div(T(t.total_supply))),n,r).toString(),t.current_price=this.priceFixToReal(Number(t.current_price),n,r).toString(),t.sale_decimals=n,t.raise_decimals=r}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(T(t.harvest_raise).equals(T(0))){let n=await e.Launchpad.getSettleEvent(t.pool_address);n&&(t.harvest_raise=n.unused_raise)}let i=A.min(new A(t.total_purchase_amount),new A(t.max_raise_amount));return T(i.toString()).mul(1-t.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){let i=await e.Launchpad.getSettleEvent(t.pool_address);return i&&(t.unused_sale=i.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){let i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(i.length>0){let n=i[0].purchased_raise_amount,r=(await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:o}=t.white_summary;return T(n).sub(r).div(T(t.total_purchase_amount).sub(o)).mul(T(t.total_purchase_amount).sub(t.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,t){let i=await si.getOverrecruitReverseAmount(e,t),n=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(n){let r=n[0].purchased_raise_amount;T(r).sub(i).div(t.current_price)}return"0"}},j1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,i=100,n=!1){var u;let{package_id:r}=this._sdk.sdkOptions.launchpad;if(r===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");let o=`${r}_getPoolImmutables`,s=this.getCache(o,n),a=[],c=[];if(s!==void 0&&a.push(...s),a.length===0)try{((u=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${r}::factory::CreatePoolEvent`}))==null?void 0:u.data).forEach(m=>{let g=m.parsedJson;g&&a.push({pool_address:g.pool_id,coin_type_sale:D(g.sale_coin.name).full_address,coin_type_raise:D(g.raise_coin.name).full_address})}),this.updateCache(o,a,Z)}catch(m){console.log("getPoolImmutables",m)}let d=e.length>0;for(let m=0;m<a.length;m+=1){let g=a[m];if(!(d&&!e.includes(g.pool_address))){if(!d){let k=m;if(k<t||k>=t+i)continue}c.push(g)}}return c}async getPoolImmutablesWithPage(e="all",t=!1){let{package_id:i}=this._sdk.sdkOptions.launchpad,n=`${i}_getPoolImmutables`,r=[],o={data:[],hasNextPage:!1},s=e==="all";if(s){let a=this.getCache(n,t);a&&r.push(...a)}if(r.length===0)try{let a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::factory::CreatePoolEvent`},e);o.hasNextPage=a.hasNextPage,o.nextCursor=a.nextCursor,a.data.forEach(c=>{let d=c.parsedJson;d&&r.push({pool_address:d.pool_id,coin_type_sale:D(d.sale_coin.name).full_address,coin_type_raise:D(d.raise_coin.name).full_address})})}catch(a){console.log("getPoolImmutables",a)}return o.data=r,s&&this.updateCache(n,r,Z),o}async getPools(e=[],t=0,i=100){let n=[],r=[];e.length>0?r=[...e]:(await this.getPoolImmutables([],t,i,!1)).forEach(s=>{r.push(s.pool_address)});let o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0});for(let s of o){let a=si.buildLaunchPadPool(s);await si.calculatePoolPrice(this._sdk,a),n.push(a);let c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,Z)}return n}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0){let s=n;return si.updatePoolStatus(s),s}let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=si.buildLaunchPadPool(r);return await si.calculatePoolPrice(this._sdk,o),this.updateCache(i,o),o}async getInitConfig(e=!1){var c;let t=this._sdk.sdkOptions.launchpad.package_id,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=No(r),s=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return s.length>0&&(s.forEach(d=>{let u=d.parsedJson;if(u)switch(D(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.config_cap_id=u.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(i,a,Z)),a}async getLockNFT(e,t=!1){let i=`${e}_getLockNFT`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!r.error)return Nr(r)}async getLockNFTList(e){var r;let{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:i}=this._sdk,n=[];try{let o=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:r.data;for(let s of o){let a=s.parsedJson;if(a){let c={locked_time:Number(a.locked_time),end_lock_time:Number(a.end_lock_time),nft_type:a.nft_type_name.name,lock_nft_id:a.lock_nft_id,recipient:a.recipient};if(e===c.recipient&&`${t}`===D(c.nft_type).address){let d=await this.getLockNFT(c.lock_nft_id);if(d){let u=D(d.coin_type_a).full_address,m=D(d.coin_type_b).full_address;n.push({...d,coin_type_a:u,coin_type_b:m,...c})}}}}return n}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPoolTransactionPayload(e){let{launchpad:t}=this.sdk.sdkOptions,i=j(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let n=si.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),r=new $,o=T(e.total_supply).add(T(e.total_supply).mul(T(e.liquidity_rate))).toNumber(),s=await re.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,r,BigInt(o),e.coin_type_sale),a=[r.object(i.admin_cap_id),r.object(i.config_cap_id),r.object(i.pools_id),r.object(pe(e.recipient)),r.pure.u128((n*Af).toString()),s,r.pure.u64(e.total_supply.toString()),r.pure.u64(e.min_purchase.toString()),r.pure.u64(e.max_purchase.toString()),r.pure.u64(e.least_raise_amount.toString()),r.pure.u64(e.hardcap.toString()),r.pure.u64((e.liquidity_rate*1e3).toString()),r.pure.u64(e.start_time.toString()),r.pure.u64(e.activity_duration.toString()),r.pure.u64(e.settle_duration.toString()),r.pure.u64(e.locked_duration.toString()),r.pure.u32(e.tick_spacing),r.object(F)],c=[e.coin_type_sale,e.coin_type_raise];return r.moveCall({target:`${t.published_at}::${fi}::create_launch_pool`,typeArguments:c,arguments:a}),r}async creatPurchasePayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=new $,n=await re.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.purchase_amount),e.coin_type_raise),r=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],o=[e.coin_type_sale,e.coin_type_raise],s;return r?s=[i.object(e.pool_address),i.object(j(t).config_cap_id),i.object(r.id),n,i.pure.u64(e.purchase_amount.toString()),i.object(F)]:s=[i.object(e.pool_address),i.object(j(t).config_cap_id),n,i.pure.u64(e.purchase_amount.toString()),i.object(F)],i.moveCall({target:`${t.published_at}::${fi}::${r===void 0?"create_and_purchase":"purchase"}`,typeArguments:o,arguments:s}),i}async creatClaimPayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],n=new $,r=[e.coin_type_sale,e.coin_type_raise],o=[n.object(e.pool_address),n.object(j(t).config_cap_id),n.object(i==null?void 0:i.id),n.object(F)];return n.moveCall({target:`${t.published_at}::${fi}::claim`,typeArguments:r,arguments:o}),n}async creatSettlePayload(e){let{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();let n=j(i),{clmm_args:r}=e,o=new $;o.setSender(this.sdk.ClmmSDK.senderAddress);let s=[e.coin_type_sale,e.coin_type_raise];if(r){let a=r.opposite?Y.priceToSqrtPriceX64(T(1).div(r.current_price),r.raise_decimals,r.sale_decimals).toString():Y.priceToSqrtPriceX64(T(r.current_price),r.sale_decimals,r.raise_decimals).toString(),c=BigInt(a)<BigInt(r.clmm_sqrt_price),d=r.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,u=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,d),m=Ue.calculateTotalBalance(u);Ue.isSuiCoin(d)&&(m-=BigInt(2e8));let g=re.buildCoinForAmount(o,u,m,d).targetCoin,k=r.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",x=[o.object(e.pool_address),o.object(j(t).config_cap_id),o.object(r.clmm_pool_address),o.object(n.global_config_id),o.pure.u128(a),g,o.object(F)];o.moveCall({target:`${t.published_at}::${fi}::${k}`,typeArguments:s,arguments:x})}else o.moveCall({target:`${t.published_at}::${fi}::settle`,typeArguments:s,arguments:[o.object(e.pool_address),o.object(j(t).config_cap_id),o.object(F)]});return o}creatWithdrawPayload(e){let{launchpad:t}=this.sdk.sdkOptions,i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(e.pool_address),i.object(j(t).config_cap_id),i.object(F)];return e.sale_amount>BigInt(0)&&i.moveCall({target:`${t.published_at}::${fi}::withdraw_sale`,typeArguments:n,arguments:r}),e.raise_amount>BigInt(0)&&i.moveCall({target:`${t.published_at}::${fi}::withdraw_raise`,typeArguments:n,arguments:r}),i}addUserToWhitelisPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(r=>{let o=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.object(r),i.pure.u64(e.safe_limit_amount),i.object(F)];i.moveCall({target:`${t.published_at}::${fi}::add_user_to_whitelist`,typeArguments:n,arguments:o})}),i}updateWhitelistCapPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&i.moveCall({target:`${t.published_at}::${fi}::update_whitelist_member_safe_limit_amount`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.pure.address(e.white_list_member),i.pure.u64(e.safe_limit_amount),i.object(F)]}),e.hard_cap_total>0&&i.moveCall({target:`${t.published_at}::${fi}::update_whitelist_hard_cap_total`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.pure.u64(e.hard_cap_total),i.object(F)]}),i}creatRemoveWhitelistPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(r=>{let o=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.object(r),i.object(F)];i.moveCall({target:`${t.published_at}::${fi}::remove_user_from_whitelist`,typeArguments:n,arguments:o})}),i}creatCancelPoolPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.object(F)];return i.moveCall({target:`${t.published_at}::${fi}::cancel`,typeArguments:n,arguments:r}),i}updateRecipientPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.object(e.new_recipient),i.object(F)];return i.moveCall({target:`${t.published_at}::${fi}::update_recipient_address`,typeArguments:n,arguments:r}),i}updatePoolDuractionPayload(e){let{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).admin_cap_id),i.object(j(t).config_cap_id),i.object(e.pool_address),i.pure.u64(e.activity_duration),i.pure.u64(e.settle_duration),i.pure.u64(e.lock_duration),i.object(F)];return i.moveCall({target:`${t.published_at}::${fi}::update_pool_duration`,typeArguments:n,arguments:r}),i}creatUnlockNftPayload(e){let{launchpad:t}=this.sdk.sdkOptions;if(j(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");let i=new $,n=[e.nft_type],r=[i.object(e.lock_nft),i.object(F)];return i.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:n,arguments:r}),i}async isAdminCap(e){let{launchpad:t}=this._sdk.sdkOptions;if(j(t)===void 0)throw Error("launchpad config is empty");let i=`${e}_isAdminCap`,n=this.getCache(i);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:j(t).admin_cap_id,options:{showType:!0,showOwner:!0}}),o=ur(r),s=Ts(r),a=!1;return s&&o&&D(o).source_address===`${t.package_id}::config::AdminCap`&&(a=pe(s.AddressOwner)===pe(e)),this.updateCache(i,a,Z),a}async isWhiteListUser(e,t){let i={type:"address",value:t};try{let n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i});return!!(n&&n.data)}catch{return!1}}async getPurchaseAmount(e,t){var n;let i={type:"address",value:t};try{let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),o=le(r);if(o)return(n=o==null?void 0:o.value)==null?void 0:n.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],i=!0){let{launchpad:n}=this._sdk.sdkOptions,r=`${t}_getPurchaseMark`,o=this.getCache(r,i);if(!i&&o!==void 0)return o;let s=null,a=[];for(;;){let c=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:s});for(let d of c.data){let{fields:u}=d.data.content;if(D(zi(d)).source_address===`${n.package_id}::pool::PurchaseMark`){console.log("fields: ",u);let m={id:u.id.id,pool_id:D(u.pool_id).address,purchased_raise_amount:u.purchase_total,obtain_sale_amount:u.obtain_sale_amount,used_raise_amount:u.used_raise_amount};t.length>0?t.includes(m.pool_id)&&a.push(m):a.push(m)}}if(c.hasNextPage)s=c.nextCursor;else break}return this.updateCache(r,a,Z),a}async getSettleEvent(e){let{launchpad:t}=this._sdk.sdkOptions,i=`${e}_getPurchaseMark`,n=this.getCache(i);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(let o of r.data){let s=o.parsedJson;if(e===ze(s.pool_id)){let a={pool_id:s.pool_id,settle_price:s.settle_price,unused_sale:s.unused_sale,unused_raise:s.unused_raise,white_purchase_total:s.white_purchase_total};return this.updateCache(i,a,Z),a}}}buildLaunchpadCoinType(e,t){return xs(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,t])}assertLuanchpadConfig(){let{launchpad:e}=this.sdk.sdkOptions;if(j(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},mn=class{static buildPoolImmutables(e){let{fields:t}=e.value.fields.value;return{clmm_pool_id:D(t.clmm_pool_id).address,bonus_type:D(t.bonus_type.fields.name).source_address,pool_id:D(t.pool_id).address,coinTypeA:D(t.coin_type_a.fields.name).source_address,coinTypeB:D(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){let t=le(e),i=[];return t.config.fields.contents.forEach(n=>{i.push({rate:Number(T(n.fields.key).div(Ir)),multiplier:Number(T(n.fields.value).div(Ir))})}),{balance:t.balance,config:i,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(T(t.minimum_percent_to_reward).div(Ir)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){let{contents:t}=e.value.fields.value.fields,i=[],n=e.id.id;return t.forEach(r=>{let{key:o,value:s}=r.fields,a={id:o,period_id:n,bonus_num:s.fields.bonus_num,point:s.fields.point,is_burn:s.fields.is_burn,point_after_multiplier:s.fields.point_after_multiplier,percent:Number(T(s.fields.percent).div(Ir)),fee_share_rate:0,is_redeemed:s.fields.is_redeemed};i.push(a)}),i}static buildPoolBonusInfo(e){let{fields:t,type:i}=e.value.fields.value;return{type:i,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let i=0;for(let n of e)t>=n.rate&&n.rate>i&&(i=n.multiplier);return i}},Ul="router",E1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;let{maker_bonus:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i,e),r=[];if(n!==void 0)r.push(...n);else{let s=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(j(t).maker_pool_handle)).data)==null||o.forEach(c=>{s.push(c.objectId)});let a=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showContent:!0});for(let c of a){let d=le(c);d&&r.push(mn.buildPoolImmutables(d))}}return r}async getPoolImmutable(e){let{maker_bonus:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i);if(n!==void 0){let s=n.filter(a=>e===a.pool_id);if(s.length>0)return s[0]}let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:j(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=le(r);return mn.buildPoolImmutables(o)}async getPools(){let e=[],t=await this.getPoolImmutables(),i=t.map(o=>o.pool_id),n=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0}),r=0;for(let o of n){let s=mn.buildPoolState(o);if(s){let a={...t[r],...s};e.push(a);let c=`${a.pool_id}_getPoolObject`;this.updateCache(c,a,Z)}r+=1}return e}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t),r=await this.getPoolImmutable(e);if(n!==void 0)return n;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=mn.buildPoolState(o),a={...r,...s};return this.updateCache(i,a,Z),a}async getPoolHandleId(e){let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=le(t);return i?i.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){let i=[],n=`${e.pool_id}_getMakerPoolPeriods`,r=this.getCache(n,t);return r!==void 0?r:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(o=>{let s={id:o.objectId,start_time:0,end_time:0,period:Number(o.name.value)};s.start_time=Number(T(e.start_time).add(T(e.interval_day).mul(24*3600).mul(s.period)).toFixed(0,Q.ROUND_DOWN)),s.end_time=Number(T(s.start_time).add(T(e.interval_day).mul(24*3600)).toFixed(0,Q.ROUND_DOWN)),i.push(s)}),this.updateCache(n,i,Z),i)}async getMakerBonusInitConfigs(){var n;let{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:n.data,i={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(r=>{let o=r.parsedJson;o&&(i.maker_config_id=o.config_id)}),i.maker_pool_handle=await this.getPoolHandleId(i.maker_config_id),i}async getPoolMarkerPositionList(e,t,i=!1){let n={},r=[];i||t.forEach(o=>{let s=`${e}_${o.period}_getPoolMarkerPositionList`,a=this.getCache(s);a!==void 0?n[o.period]=a:(n[o.period]=[],r.push(o))});try{r.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(r.map(s=>s.id),{showContent:!0})).forEach(s=>{let a=le(s),c=mn.buildMarkerPositions(a);if(c.length>0){let{period_id:d}=c[0],u=t.filter(m=>m.id===d)[0];n[u.period]=c}});let o=[];for(let s in n)n[s].forEach(a=>{o.push(a)});if(o.length>0){let s=await this._sdk.ClmmSDK.Position.getSipmlePositionList(o.map(a=>a.id));for(let a of o)for(let c of s)if(a.id===c.pos_object_id){a.clmm_position=c;break}}}catch(o){console.log(o)}for(let o in n){let s=`${e}_${o}_getPoolMarkerPositionList`;this.updateCache(s,n[o],Z)}return n}async updateXCetusRewarderAndFee(e,t,i){let n=await this.calculateTotalPointsAfterMultiper(e,i);for(let r of t)await this.calculateXCetusRewarder(e,r,i.period,n);return t}async calculateXCetusRewarder(e,t,i,n){let r=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,i),{fee_share_rate:o}=this.calculateFeeShareRate(e,t,n),s=T(o).mul(r.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=s.toString(),t.bonus_num}calculateFeeShareRate(e,t,i){let n=mn.getBonusPercent(e.config,t.percent),r=T(t.point).mul(n),o=T(r).div(i);return t.point_after_multiplier=r.toString(),t.fee_share_rate=Number(o),{fee_share_rate:Number(o),points_after_multiper:r.toString()}}async calculateTotalPointsAfterMultiper(e,t){let i=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]),n=T(0),r=i[t.period];for(let o of r){let s=mn.getBonusPercent(e.config,o.percent),a=T(o.point).mul(s);n=n.add(a)}return n.toString()}async calculateAllXCetusRewarder(e){let t=this._sdk.ClmmSDK.senderAddress,i=T(0),n=[];for(let r of e){let o=await this._sdk.MakerModule.getMakerPoolPeriods(r),s=await this._sdk.MakerModule.getPoolMarkerPositionList(r.whale_nfts.whale_nfts_handle,o),a=[];for(let c of o){let d=s[c.period].filter(u=>{var m;return t.length===0?!1:((m=u.clmm_position)==null?void 0:m.owner)===t});d.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(r,d,c),d.forEach(u=>{var m;((m=u.clmm_position)==null?void 0:m.position_status)===Zu.Exists&&T(u.bonus_num).greaterThan(0)&&(i=i.add(u.bonus_num),a.includes(u.clmm_position.pos_object_id)||a.push(u.clmm_position.pos_object_id))}))}n.push({bonus_type:r.bonus_type,pool_id:r.pool_id,nft_ids:a})}return{claimtotal:i,claimRecord:n}}async getPoolBonusInfo(e,t,i=!1){let n=`${e}_${t}_getPoolBonusInfo`,r=this.getCache(n,i);if(r!==void 0)return r;let o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),s=le(o),a=mn.buildPoolBonusInfo(s);return this.updateCache(n,a,ki),a}claimPayload(e){let{maker_bonus:t,xcetus:i}=this.sdk.sdkOptions,n=new $;return n.moveCall({target:`${t.published_at}::${Ul}::claim`,typeArguments:[e.bonus_type],arguments:[n.object(j(t).maker_config_id),n.object(e.market_pool_id),n.object(e.position_nft_id),n.pure.u8(e.phase),n.object(j(i).lock_manager_id),n.object(j(i).xcetus_manager_id),n.object(e.ve_nft_id)]}),n}claimAllPayload(e){let{maker_bonus:t,xcetus:i}=this.sdk.sdkOptions,n=new $;return e.whale_nfts.forEach(r=>{r.nft_ids.forEach(o=>{n.moveCall({target:`${t.published_at}::${Ul}::claim_all`,typeArguments:[r.bonus_type],arguments:[n.object(j(t).maker_config_id),n.object(r.pool_id),n.object(o),n.object(j(i).lock_manager_id),n.object(j(i).xcetus_manager_id),n.object(e.ve_nft_id)]})})}),n}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},br="router",Go="router",go=24*3600,js=1e3,Si=1e11,tr=class{static buildVeNFTDividendInfo(e){let t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{let n=[];i.fields.value.fields.contents.forEach(r=>{n.push({coin_type:D(r.fields.key.fields.name).source_address,amount:r.fields.value})}),t.rewards.push({period:Number(i.fields.key),rewards:n,vesrion:"v1"})}),t}static buildDividendManager(e){let t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{t.bonus_types.push(D(i.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:Rt(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){let t=e.fields,i={id:t.id.id,type:D(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/go,i}static getAvailableXCetus(e,t){let i=T(0);return t.forEach(n=>{i=i.add(n.xcetus_amount)}),T(e.xcetus_balance).sub(i).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!tr.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>tr.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e,t){let i=new Set;return e==null||e.forEach(n=>{n.rewards.forEach(r=>{i.add(r.coin_type)})}),t==null||t.forEach(n=>{n.rewards.forEach(r=>{i.add(r.coin_type)})}),Array.from(i)}static buildDividendRewardTypeListV2(e){let t={};return e==null||e.forEach(i=>{i.vesrion==="v2"&&i.rewards.forEach(n=>{t[n.coin_type]||(t[n.coin_type]=[]),t[n.coin_type].push(i.period)})}),t}static getNextStartTime(e){let t=Date.now()/1e3,{start_time:i,interval_day:n}=e,r=Math.ceil((t-i)/(n*go));return i+r*n*go}},B1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){let{xcetus:i}=this.sdk.sdkOptions,n=`${e}_getLockUpManagerEvent`,r=this.getCache(n,t);if(r!==void 0)return r;let o,s=`${i.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:s}})).data.forEach(a=>{let c=D(zi(a)).source_address;if(c===s&&a.data&&a.data.content){let{fields:d}=a.data.content;o={...Hs(a),id:d.id.id,index:d.index,type:c,xcetus_balance:d.xcetus_balance},this.updateCache(n,o,Z)}}),o}async getOwnerLockCetuss(e){let{xcetus:t}=this.sdk.sdkOptions,i=[],n=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:n}});for(let o of r.data)if(D(zi(o)).source_address===n&&o.data){let s=tr.buildLockCetus(o.data.content);s.xcetus_amount=await this.getXCetusAmount(s.id),i.push(s)}return i}async getLockCetus(e){var i;let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=t.data)!=null&&i.content){let n=tr.buildLockCetus(t.data.content);return n.xcetus_amount=await this.getXCetusAmount(n.id),n}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){let{xcetus:e}=this.sdk.sdkOptions,t=new $;return t.moveCall({target:`${e.published_at}::${br}::mint_venft`,typeArguments:[],arguments:[t.object(j(e).xcetus_manager_id)]}),t}async convertPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new $,n=this.buileCetusCoinType(),r=await re.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.amount),n);return e.venft_id===void 0?i.moveCall({target:`${t.published_at}::${br}::mint_and_convert`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),r,i.pure.u64(e.amount)]}):i.moveCall({target:`${t.published_at}::${br}::convert`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),r,i.pure.u64(e.amount),i.object(e.venft_id)]}),i}redeemLockPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${br}::redeem_lock`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),i.object(e.venft_id),i.pure.u64(e.amount),i.pure.u64(e.lock_day),i.object(F)]}),i}redeemPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${br}::redeem`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(F)]}),i}redeemDividendPayload(e,t){let{xcetus:i,xcetus_dividends:n}=this.sdk.sdkOptions,r=new $;return t.forEach(o=>{r.moveCall({target:`${i.published_at}::${Go}::redeem`,typeArguments:[o],arguments:[r.object(j(n).dividend_manager_id),r.object(e)]})}),r}redeemDividendV2Payload(e,t,i){let{xcetus_dividends:n}=this.sdk.sdkOptions,r=new $;return t.filter(o=>i.includes(o)).length>0&&(r=this.redeemDividendXTokenPayload(e,r)),t.forEach(o=>{i.includes(o)||r.moveCall({target:`${n.published_at}::${Go}::redeem_v2`,typeArguments:[o],arguments:[r.object(j(n).dividend_manager_id),r.object(e),r.object(F)]})}),r}redeemDividendV3Payload(e,t,i,n,r){let{xcetus_dividends:o}=this.sdk.sdkOptions,s=new $;return i.filter(a=>r.includes(a)).length>0&&(s=this.redeemDividendXTokenPayload(t,s)),i.forEach(a=>{s.moveCall({target:`${o.published_at}::${Go}::redeem_v3`,typeArguments:[a],arguments:[s.object(j(o).dividend_manager_id),s.object(j(o).venft_dividends_id),s.makeMoveVec({elements:n[a].map(c=>s.pure.u64(c)),type:"u64"}),s.object(t),s.object(F)]})}),s}redeemDividendXTokenPayload(e,t){let{xcetus_dividends:i,xcetus:n}=this.sdk.sdkOptions,{xcetus_manager_id:r,lock_manager_id:o}=j(n),{dividend_manager_id:s}=j(i);return t=t===void 0?new $:t,t.moveCall({target:`${i.published_at}::${Go}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(r),t.object(s),t.object(e),t.object(F)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",i="XCETUS"){return`${e}::${t}::${i}`}cancelRedeemPayload(e){let{xcetus:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${br}::cancel_redeem_lock`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xcetus_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(F)]}),i}async getInitConfigs(){var s,a;let{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:s.data,r={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};n.length>0&&n.forEach(c=>{let d=c.parsedJson;d&&(r.xcetus_manager_id=d.xcetus_manager)});let o=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return o.length>0&&o.forEach(c=>{let d=c.parsedJson;d&&(r.lock_manager_id=d.lock_manager)}),r.lock_manager_id.length>0&&(r.lock_handle_id=(await this.getLockUpManager(r.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(t,r,Z),r}async getLockUpManager(e=j(this.sdk.sdkOptions.xcetus).lock_manager_id,t=!1){let i=`${e}_getLockUpManager`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=tr.buildLockUpManager(le(r));return this.updateCache(i,o,Z),o}async getDividendConfigs(){var d,u,m;let{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,{dividend_manager_id:t,venft_dividends_id:i}=j(this._sdk.sdkOptions.xcetus_dividends),n=`${e}_getDividendManagerEvent`,r=this.getCache(n);if(r!==void 0)return r;let o=(d=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:d.data,s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x1::string::String",value:"VeNFTDividends"}}),a={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:"",venft_dividends_id:"",venft_dividends_id_v2:""};o.length>0&&o.forEach(g=>{let k=g.parsedJson;k&&(a.dividend_manager_id=k.manager_id,a.dividend_admin_id=k.admin_id,a.dividend_settle_id=k.settle_id,this.updateCache(n,a,Z))}),s&&s.data&&s.data.content&&(a.venft_dividends_id=(m=(u=s.data.content)==null?void 0:u.fields)==null?void 0:m.value,this.updateCache(n,a,Z));let c=await this._sdk.ClmmSDK.fullClient.getObject({id:i,options:{showContent:!0}});return a.venft_dividends_id_v2=c.data.content.fields.venft_dividends.fields.id.id,a}async getDividendManager(e=!1){let{dividend_manager_id:t}=j(this._sdk.sdkOptions.xcetus_dividends),i=`${t}_getDividendManager`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=le(r),s=tr.buildDividendManager(o);return this.updateCache(i,s,Z),s}async getXcetusManager(e=!0){let{xcetus_manager_id:t}=j(this._sdk.sdkOptions.xcetus),i=`${t}_getXcetusManager`,n=this.getCache(i,e);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=le(r),s={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(i,s),s}async getVeNFTDividendInfo(e,t,i){let n,r={id:"",ve_nft_id:i,rewards:[]};try{n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:i}});let s=le(n);r=tr.buildVeNFTDividendInfo(s)}catch{n=void 0}let o=[];try{let s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:i}}),a=le(s).value.fields.value.fields.dividends.fields.id.id,c=null,d=50,u=[];for(;;){let m=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:a,cursor:c,limit:d});if(m.data.forEach(g=>{u.push(g.objectId)}),c=m.nextCursor,c===null||m.data.length<d)break}console.log("🚀🚀🚀 ~ file: xcetusModule.ts:662 ~ XCetusModule ~ tableIdList:",u),(await this._sdk.ClmmSDK.fullClient.batchGetObjects(u,{showType:!0,showContent:!0})).forEach(m=>{o.push({period:Number(m.data.content.fields.name),vesrion:"v2",rewards:m.data.content.fields.value.fields.contents.map(g=>({coin_type:D(g.fields.key.fields.name).source_address,amount:g.fields.value}))})}),console.log("🚀🚀🚀 ~ file: xcetusModule.ts:680 ~ XCetusModule ~ objects.forEach ~ rewards:",o)}catch(s){console.log("🚀🚀🚀 ~ file: xcetusModule.ts:637 ~ XCetusModule ~ error:",s)}return{...r,rewards:[...r.rewards,...o]}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(j(this._sdk.sdkOptions.xcetus).lock_manager_id),n=T(Si).mul(T(i.max_lock_day).sub(T(t))).mul(T(i.max_percent_numerator).sub(T(i.min_percent_numerator))).div(T(i.max_lock_day).sub(T(i.min_lock_day))),r=T(Si).mul(T(i.max_percent_numerator)).sub(n).div(T(js)).div(Si);return{amountOut:T(r).mul(T(e)).round().toString(),percent:r.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(j(this._sdk.sdkOptions.xcetus).lock_manager_id),n=T(Si).mul(T(i.max_lock_day).sub(T(t))).mul(T(i.max_percent_numerator).sub(T(i.min_percent_numerator))).div(T(i.max_lock_day).sub(T(i.min_lock_day))),r=T(Si).mul(T(i.max_percent_numerator)).sub(n).div(T(js)).div(Si);return{amountOut:T(e).div(r).toFixed(0,Q.ROUND_UP),percent:r.toString()}}async getXCetusAmount(e){let{lock_handle_id:t}=j(this._sdk.sdkOptions.xcetus),i=`${e}_getXCetusAmount`,n=this.getCache(i);if(n!==void 0)return n;try{let r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=le(r);if(o){let{xcetus_amount:s}=o.value.fields.value.fields;return this.updateCache(i,s,Z),s}}catch{}return"0"}async getVeNftAmount(e,t){try{let i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=le(i);if(n){let{lock_amount:r,xcetus_amount:o}=n.value.fields.value.fields;return{lock_amount:r,xcetus_amount:o}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){let i=(await this.getDividendManager()).dividends.id,n=`${i}_${e}_getPhaseDividendInfo`,r=this._sdk.getCache(n,t);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),s=le(o),a=s.value.fields.value.fields,c=a.redeemed_num.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),d=a.bonus_types.map(g=>g.fields.name),u=a.bonus.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),m={id:Fi(o),phase:s.name,settled_num:a.settled_num,register_time:a.register_time,redeemed_num:c,is_settled:a.is_settled,bonus_types:d,bonus:u,phase_end_time:""};return this.updateCache(n,m),m}catch{}}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},N1="factory",Ci="oversubscribe_pool",xf=1e6,Cr=1e18,R1=(e=>(e.Upcoming="Upcoming",e.Live="Live",e.Ended="Ended",e.Failed="Failed",e.Canceled="Canceled",e))(R1||{}),wr="router",ka="router",Ho="router",D1=(e=>(e.BOTH="both",e.LEFT="left",e.Right="right",e))(D1||{}),$1=(e=>(e[e.CURVE=3]="CURVE",e[e.BID_ASK=4]="BID_ASK",e))($1||{}),Kl={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function q1(e){return"master_address"in e}var L1="router",F1="vaults",U1=1e4,K1=(e=>(e.STATUS_RUNNING="STATUS_RUNNING",e.STATUS_REBALANCING="STATUS_REBALANCING",e))(K1||{}),V1=(e=>(e.Haedal="Haedal",e.Volo="Volo",e.Aftermath="aftermath",e))(V1||{}),z1=(e=>(e.Running="Running",e.PartialCompleted="PartialCompleted",e.Completed="Completed",e.Cancelled="Cancelled",e))(z1||{}),Xt=class{static buildIdoPoolImmutables(e){return{pool_address:ze(e.pool_id),coin_type_sale:D(e.sale_coin_type.name).full_address,coin_type_raise:D(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){let t=zi(e),i=D(t),n=le(e),r={pool_address:ze(n.id.id),coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],tick_spacing:Number(n.tick_spacing),total_supply:n.total_supply,min_purchase:n.min_purchase_amount,max_purchase:n.max_purchase_amount},o={start_time:Number(n.duration_manager.fields.start_time),lock_up_duration:Number(n.duration_manager.fields.lock_up_duration),purchase_duration:Number(n.duration_manager.fields.purchase_duration),end_time:0};o.end_time=o.start_time+o.purchase_duration;let s={complete_raise_limit:n.complete_raise_limit,liquidity_injection_ratio:T(n.liquidity_injection_ratio).div(xf).toNumber(),current_sqrt_price_min:n.current_sqrt_price_min,current_sqrt_price_max:n.current_sqrt_price_max,owner:n.owner,sale_coin_amount:n.sale_coin,raise_coin_amount:n.raise_coin,price:n.price,current_price:n.price,duration_summary:o,is_cancelled:n.is_cancelled,is_liquidity_injected:n.is_liquidity_injected,liquidity_used_raise_amount:n.liquidity_used_raise_amount,liquidity_used_sale_amount:n.liquidity_used_sale_amount,purchase_summary:{size:Number(n.purchase_manager.fields.purchases.fields.size),purchase_handle:n.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:n.total_purchase_amount,white_summary:{white_list_id:n.white_list.fields.id.id,protection_limit_used:n.white_list.fields.protection_limit_used,protection_hard_cap:n.white_list.fields.protection_hard_cap,white_handle:n.white_list.fields.addresses.fields.id.id,size:Number(n.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:n.is_withdrawn};return Xt.updatePoolStatus(s),{...r,...s}}static is_init_period(e){return Number(T(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){let t=Number(T(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){let t=Number(T(Date.now()/1e3).toFixed(0)),i=e.start_time+e.purchase_duration;return t>i}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&Xt.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:Xt.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&Xt.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||Xt.is_claim_period(e.duration_summary)&&T(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let i,n;if(Xt.is_sale_failed(e))i="0",n="0";else if(t.is_redeemed)i=t.obtained_sale_amount,n=t.used_raise_amount;else if(T(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))i=T(t.purchased_raise_amount).mul(Cr).div(e.price).toString(),n=t.purchased_raise_amount;else{let o=Xt.redeemForSaleOversubcribeV2(e,t);i=o.user_obtained_sale_amount,n=o.user_used_raise_amount_ceil}i=Q.floor(i);let r=Q.floor(T(t.purchased_raise_amount).sub(n).toString());return{obtained_sale_amount:i,refunded_raise_amount:r}}static calculateWithdrawAmount(e){let t,i,n=T(e.total_supply).mul(e.liquidity_injection_ratio);if(Xt.is_sale_failed(e))t="0",i=T(n).add(e.total_supply);else{let{max_raise_amount:r}=e;T(e.total_purchase_amount).greaterThanOrEqualTo(r)?(t=T(r).sub(e.liquidity_used_raise_amount).toString(),i="0"):(t=T(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),i=T(e.total_supply).add(n).sub(e.liquidity_used_sale_amount).sub(Xt.get_sold_amount(e)))}return{obtained_raise_amount:Q.floor(t).toString(),refunded_sale_amount:Q.ceil(i).toString()}}static get_sold_amount(e){return T(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:T(e.total_purchase_amount).mul(Cr).div(e.price)}static redeemForSaleOversubcribe(e,t){let i=t.protection_raise_amount,n=T(t.purchased_raise_amount).sub(i),r=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,s=T(r).sub(o),a=T(e.total_purchase_amount).sub(o),c=Q.ceil(n.mul(s).div(a).add(i)),d=Q.floor(n.mul(s).div(a).add(i));return{user_obtained_sale_amount:Q.floor(T(e.total_supply).mul(d).div(r)),user_used_raise_amount_ceil:c}}static redeemForSaleOversubcribeV2(e,t){let i=t.protection_raise_amount,n=T(t.purchased_raise_amount).sub(i),r=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,s=T(r).sub(o),a=T(e.total_purchase_amount).sub(o),c=T(i).mul(a).add(T(n).mul(s)).mul(Cr).div(T(a).mul(e.price)),d=Q.ceil(c.mul(e.price).div(Cr));return{user_obtained_sale_amount:c,user_used_raise_amount_ceil:d}}static raiseTotalAmount(e){let t=T(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?T(e.total_supply).mul(e.current_price).div(T(10).pow(T(t))).toString():T(e.total_supply).mul(e.current_price).mul(T(10).pow(T(t))).toString()}static updatePoolStatus(e){let t=Number(T(Date.now()/1e3).toFixed(0)),i=e.duration_summary,n=i.start_time+i.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<i.start_time?e.pool_status="Upcoming":t>i.start_time&&t<n?e.pool_status="Live":T(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){let i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),n=i[t.coin_type_sale].decimals,r=i[t.coin_type_raise].decimals;t.current_price=si.priceFixToReal(Number(T(t.price).div(T(Cr)).toString()),n,r).toString(),t.sale_decimals=n,t.raise_decimals=r,t.max_raise_amount=this.raiseTotalAmount(t)}},W1=(e=>(e.V1="1",e.V2="2",e))(W1||{}),hw=class{constructor(e){G(this,"_sdk");this._sdk=e}async getPools(e=[],t=!1){let i=[];if(e.length>0){if(e.filter(n=>{let r=`${n}_getPool`,o=this._sdk.getCache(r,t);return o?(i.push(o),!1):!0}).length>0){let n=await this._sdk.ClmmSDK.fullClient.batchGetObjects(e,{showType:!0,showContent:!0});for(let r of n){let o=await this.buildIdoWarpPool(r);o&&i.push(o)}}}else(await this._sdk.Ido.getPools()).forEach(n=>{i.push({...n,version:"2"})});return i.forEach(n=>{let r=`${n.pool_address}_getPool`;this._sdk.updateCache(r,n)}),i}async getPool(e,t=!0){let i=`${e}_getPool`,n=this._sdk.getCache(i,t);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=await this.buildIdoWarpPool(r);return this._sdk.updateCache(i,o),o}async getJoinPools(e,t){let i=[],n=t.filter(o=>o.version==="1"),r=t.filter(o=>o.version==="2");if(n.length>0){let o=await this._sdk.Launchpad.getPurchaseMarks(e,n.map(s=>s.pool_address),!1);n.forEach(s=>{for(let a of o)if(a.pool_id===s.pool_address){i.push(s);break}})}for(let o of r)await this._sdk.Ido.getPurchaseInfo(o.purchase_summary.purchase_handle,e,!1)&&i.push(o);return i}async getOwnerPools(e,t){return t.filter(i=>i.owner===pe(e))}async creatPurchasePayload(e,t){return e.version==="1"?await this._sdk.Launchpad.creatPurchasePayload({pool_address:e.pool_address,purchase_amount:t,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.creatPurchasePayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle,raise_amount:t.toString()})}async creatRedeemPayload(e){return e.version==="1"?await this._sdk.Launchpad.creatClaimPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.redeemPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle})}async creatWithdrawPayload(e){if(e.version==="1"){let t=await si.getWithdrawSale(e),i=await si.getWithdrawRaise(e);return this._sdk.Launchpad.creatWithdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,sale_amount:BigInt(t),raise_amount:BigInt(i)})}return this._sdk.Ido.withdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise})}unlockNftPayload(e,t){return e.version==="1"?this._sdk.Launchpad.creatUnlockNftPayload(t):this._sdk.Ido.unlockNftPayload({lock_nft_id:t.lock_nft,nft_type:t.nft_type})}async getLockNFTList(e){let t=[];return e.version==="1"&&(t=await this._sdk.Launchpad.getLockNFTList(e.owner)),t=await this._sdk.Ido.getLockNFTList(e.owner),t.filter(i=>{let n=D(i.coin_type_a).full_address,r=D(i.coin_type_b).full_address,o=D(e.coin_type_sale).full_address,s=D(e.coin_type_raise).full_address;return n===o&&r===s||n===s&&r===o})}async isWhiteListUser(e,t){return t.version==="1"?await this._sdk.Launchpad.isWhiteListUser(t.white_summary.white_handle,e):!!await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e)}async getPurchaseInfo(e,t){if(t.version==="1"){let i=await this._sdk.Launchpad.getPurchaseMarks(e,[t.pool_address]);return i.length>0?i[0]:void 0}return await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e)}async getwhiteProtectionInfo(e,t,i=!1){if(t.version==="1")return await this._sdk.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e);let n=await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e,i);if(n)return{safe_limit_amount:n.protection_raise_limit,safe_purchased_amount:n.protection_raise_amount};let r=await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e,!1);return r?{safe_limit_amount:r,safe_purchased_amount:"0"}:{safe_limit_amount:"0",safe_purchased_amount:"0"}}async calculateWithdrawAmount(e){if(e.version==="1"){let t=await si.getHistoryWithdrawRaise(this._sdk,e),i=await si.getHistoryWithdrawSale(this._sdk,e);return{obtained_raise_amount:t,refunded_sale_amount:i}}return Xt.calculateWithdrawAmount(e)}async buildIdoWarpPool(e){let t=ur(e);if(D(t).address===this._sdk.sdkOptions.ido.package_id){let i=Xt.buildIdoPool(e);return await Xt.calculatePoolUiPrice(this._sdk,i),{...i,version:"2"}}if(D(t).address===this._sdk.sdkOptions.launchpad.package_id){let i=si.buildLaunchPadPool(e);return await si.calculatePoolPrice(this._sdk,i),{...i,version:"1"}}}},ir=class{static buildVeNFTDividendInfo(e){let t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{let n=[];i.fields.value.fields.contents.forEach(r=>{n.push({coin_type:D(r.fields.key.fields.name).source_address,amount:r.fields.value})}),t.rewards.push({period:Number(i.fields.key),rewards:n})}),t}static buildDividendManager(e){let t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{t.bonus_types.push(D(i.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:Rt(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){let t=e.fields,i={id:t.id.id,type:D(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/go,i}static getAvailableXToken(e,t){let i=T(0);return t.forEach(n=>{i=i.add(n.xtoken_amount)}),T(e.xtoken_balance).sub(i).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!ir.isLocked(t))}static getLockingTokens(e){return e.filter(t=>ir.isLocked(t))}static buildDividendRewardTypeList(e){let t=new Set;return e.forEach(i=>{i.rewards.forEach(n=>{t.add(n.coin_type)})}),Array.from(t)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=go){let i=Date.now()/1e3,{start_time:n,interval_day:r}=e,o=Math.ceil((i-n)/(r*t));return n+o*r*t}},on=class{static getDefaultStrategyConfig(e){let t;switch(e){case 4:t=Kl.bidAsk;break;default:t=Kl.curve;break}return t}static geTickIndexRange(e,t,i,n){let r,o;switch(e=Y.getInitializableTickIndex(e,t),n){case"left":e>0?(o=T(e).sub(t).toNumber(),r=T(e).mul(T(1).add(i)).toDecimalPlaces(0).toNumber()):(o=T(e).sub(t).toNumber(),r=T(e).mul(T(1).sub(i)).toDecimalPlaces(0).toNumber());break;case"right":e>0?(o=T(e).mul(T(1).add(i)).toDecimalPlaces(0).toNumber(),r=T(e).add(t).toNumber()):(o=T(e).mul(T(1).sub(i)).toDecimalPlaces(0).toNumber(),r=T(e).add(t).toNumber());break;default:e>0?(r=T(e).mul(T(1).sub(i)).toDecimalPlaces(0).toNumber(),o=T(e).mul(T(1).add(i)).toDecimalPlaces(0).toNumber()):(r=T(e).mul(T(1).add(i)).toDecimalPlaces(0).toNumber(),o=T(e).mul(T(1).sub(i)).toDecimalPlaces(0).toNumber());break}if(r=Y.getInitializableTickIndex(r,t),o=Y.getInitializableTickIndex(o,t),r<Ja)throw Error("Tick lower value is below the minimum allowed value.");if(o>Xa)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:r,tick_upper:o}}static getCreateLiquidityBins(e,t){let i=[];switch(t){case 4:i=on.getCreateBidAskLiquidityBins(e);break;default:i=on.getCreateCurveLiquidityBins(e);break}return i}static getCreateBidAskLiquidityBins(e){let t=T(Math.floor(T(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),i=[],n=e.ratios,r,o;for(let s=0;s<n.length;s++){let a,c;e.tick_upper<=e.curr_tick?(c=T(e.tick_upper).sub(t.mul(s)).toNumber(),a=T(c).sub(t).toNumber()):e.tick_lower>=e.curr_tick?(a=T(e.tick_lower).add(t.mul(s)).toNumber(),c=T(e.tick_lower).add(t.mul(s+1)).toNumber()):s===4?(a=T(e.tick_lower).add(t.mul(s)).toNumber(),c=T(a).add(t.mul(2)).toNumber()):s>4?(a=T(e.tick_lower).add(t.mul(s+1)).toNumber(),c=T(a).add(t).toNumber()):(a=T(e.tick_lower).add(t.mul(s)).toNumber(),c=T(a).add(t).toNumber()),r=Y.getInitializableTickIndex(a,e.tick_spacing),o=Y.getInitializableTickIndex(c,e.tick_spacing),i.push({tick_lower:r,tick_upper:o,ratio:n[s],liquidity:"0"})}return i}static getCreateCurveLiquidityBins(e){let t=T(Math.floor(T(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),i=[],n=e.ratios;for(let r=0;r<n.length;r++){let o,s;e.tick_upper<=e.curr_tick?(s=e.tick_upper,o=T(e.tick_upper).sub(t.mul(r+1)).toNumber()):e.tick_lower>=e.curr_tick?(o=e.tick_lower,s=T(o).add(t.mul(r+1)).toNumber()):(o=T(e.curr_tick).sub(t.mul(r+1)).toNumber(),s=T(e.curr_tick).add(t.mul(r+1)).toNumber()),i.push({tick_lower:Y.getInitializableTickIndex(o,e.tick_spacing),tick_upper:Y.getInitializableTickIndex(s,e.tick_spacing),ratio:n[r],liquidity:"0"})}return i}static calculateAddLiquidityInputs(e){let t=new A(Y.tickIndexToSqrtPriceX64(e.curr_tick)),i=on.calculateCoinRatios(e.curr_tick,e.liquidity_bins),n=e.liquidity_bins.map((r,o)=>{let s=i[o],a=T(e.coin_amount).mul(e.fix_amount_a?s.coinRatioA:s.coinRatioB).toFixed(0).toString();try{return{...Zt.estLiquidityAndcoinAmountFromOneAmounts(r.tick_lower,r.tick_upper,new A(a),e.fix_amount_a,!0,e.slippage,t),...r}}catch{return{coinAmountA:new A(0),coinAmountB:new A(0),tokenMaxA:new A(0),tokenMaxB:new A(0),liquidityAmount:new A(0),fix_amount_a:!e.fix_amount_a,...r}}});return on.fixLiquidityInputs(t,e.slippage,n,!0)}static fixLiquidityInputs(e,t,i,n){let r=i.filter(s=>s.liquidityAmount.gt(se));if(r.length===0)return[];let o=r[0];return i.map(s=>{if(s.liquidityAmount.eq(se)){let a=T(o.liquidityAmount.toString()).mul(s.ratio).div(o.ratio).toFixed(0),c=Y.tickIndexToSqrtPriceX64(s.tick_lower),d=Y.tickIndexToSqrtPriceX64(s.tick_upper),u=Zt.getCoinAmountFromLiquidity(new A(a.toString()),e,c,d,!1);return{coinAmountA:u.coinA,coinAmountB:u.coinB,liquidityAmount:new A(a.toString()),fix_amount_a:s.fix_amount_a,...ma(u,mo.fromDecimal(T(t).mul(100)),n)}}return s})}static calculateCoinRatios(e,t){let i=new A(Y.tickIndexToSqrtPriceX64(e)),n=[],r=T(0),o=T(0),s=t.map(d=>{let u=T(Og(100,6).toString()).mul(d.ratio).toFixed(0).toString(),m=Y.tickIndexToSqrtPriceX64(d.tick_lower),g=Y.tickIndexToSqrtPriceX64(d.tick_upper),k=Zt.getCoinAmountFromLiquidity(new A(u),i,m,g,!0);return r=r.add(k.coinA.toString()),o=o.add(k.coinB.toString()),{...k,liquidity:u}}),a=[],c=[];return s.forEach((d,u)=>{let m={coinRatioA:r.eq(T(0))?0:T(d.coinA.toString()).div(r).toNumber(),coinRatioB:o.eq(T(0))?0:T(d.coinB.toString()).div(o).toNumber(),liquiditys:d.liquidity,tick_lower:t[u].tick_lower,tick_upper:t[u].tick_upper};n.push(m),a.push(r.eq(T(0))?0:T(d.coinA.toString()).div(r).toNumber()),c.push(o.eq(T(0))?0:T(d.coinB.toString()).div(o).toNumber())}),n}static calculateCloseMasterLiquidityInputs(e){let t=new A(Y.tickIndexToSqrtPriceX64(e.curr_tick));return e.positions.map(i=>{let n=new A(i.liquidity),r=Y.tickIndexToSqrtPriceX64(i.tick_lower_index),o=Y.tickIndexToSqrtPriceX64(i.tick_upper_index),s=Zt.getCoinAmountFromLiquidity(n,t,r,o,!1),a=mo.fromDecimal(T(e.slippage).mul(100)),{tokenMaxA:c,tokenMaxB:d}=ma(s,a,!1);return{coinAmountA:s.coinA,coinAmountB:s.coinB,tokenMaxA:c,tokenMaxB:d,liquidityAmount:n,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(e){let t=new A(Y.tickIndexToSqrtPriceX64(e.curr_tick)),{fix_token:i}=e;if(i){let n=e.positions.map((s,a)=>({tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,ratio:e.ratios[a]})),r=on.calculateCoinRatios(e.curr_tick,n),o=e.positions.map((s,a)=>{let c=r[a],d=T(i.coin_amount).mul(i.fix_amount_a?c.coinRatioA:c.coinRatioB).toFixed(0).toString();try{let u=Zt.estLiquidityAndcoinAmountFromOneAmounts(s.tick_lower_index,s.tick_upper_index,new A(d),i.fix_amount_a,!1,e.slippage,t);return{...u,tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,liquidity:u.liquidityAmount.toString(),ratio:e.ratios[a]}}catch{return{coinAmountA:new A(0),coinAmountB:new A(0),tokenMaxA:new A(0),tokenMaxB:new A(0),liquidityAmount:new A(0),fix_amount_a:!i.fix_amount_a,tick_lower:s.tick_lower_index,tick_upper:s.tick_upper_index,liquidity:"0",ratio:e.ratios[a]}}});return on.fixLiquidityInputs(t,e.slippage,o,!1)}return e.positions.map((n,r)=>{let o=e.ratios[r],s=T(e.liquidity).mul(o).toFixed(0);T(s).greaterThan(n.liquidity)&&(s=n.liquidity);let a=Y.tickIndexToSqrtPriceX64(n.tick_lower_index),c=Y.tickIndexToSqrtPriceX64(n.tick_upper_index),d=Zt.getCoinAmountFromLiquidity(new A(s),t,a,c,!1),u=mo.fromDecimal(T(e.slippage).mul(100)),{tokenMaxA:m,tokenMaxB:g}=ma(d,u,!1);return{coinAmountA:d.coinA,coinAmountB:d.coinB,tokenMaxA:m,tokenMaxB:g,liquidityAmount:new A(s),fix_amount_a:!1}})}static buildMasterPosition(e){return{coin_type_a:D(e.coin_type_a.fields.name).full_address,coin_type_b:D(e.coin_type_b.fields.name).full_address,description:e.description,id:e.id.id,index:e.index,liquidity:e.liquidity,name:e.name,pool:e.pool,tick_lower_index:Ut(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:Ut(BigInt(e.tick_upper_index.fields.bits)),url:e.url}}static buildMasterNFT(e){let t=le(e);if(t){let i={id:t.id.id,pool_id:t.pool_id,index:Number(t.index),strategy:Number(t.strategy),tick_lower_index:Ut(BigInt(t.tick_lower_index)),tick_upper_index:Ut(BigInt(t.tick_upper_index)),positions:[],...Hs(e)};return i.positions=t.positions.map(n=>on.buildMasterPosition(n.fields)),i}}},mi=class{static generateNextTickRange(e,t,i){let n=e-t/2,r=e+t/2;return{new_tick_lower:mi.getValidTickIndex(n,i),new_tick_upper:mi.getValidTickIndex(r,i)}}static calculateDepositRatio(e,t,i){let n=Y.sqrtPriceX64ToTickIndex(i);if(n<e)return{ratioA:new Q(1),ratioB:new Q(0)};if(n>t)return{ratioA:new Q(0),ratioB:new Q(1)};let r=new A(1e8),{coinAmountB:o}=Zt.estLiquidityAndcoinAmountFromOneAmounts(e,t,r,!0,!0,0,i),s=Y.sqrtPriceX64ToPrice(i,0,0),a=T(r.toString()).mul(s),c=a.add(o.toString()),d=a.div(c),u=T(o.toString()).div(c);return{ratioA:d,ratioB:u}}static getValidTickIndex(e,t){if(e%t===0)return e;let i;if(e>0?i=e-e%t+t:e<0?i=e+Math.abs(e)%t-t:i=e,i%t!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(i)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return i}static get_lp_amount_by_liquidity(e,t){return e.total_supply==="0"?"0":T(e.total_supply).mul(t).div(e.liquidity).toFixed(0,Q.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,t){return e.total_supply==="0"?"0":T(t).mul(e.liquidity).div(e.total_supply).toFixed(0,Q.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,t){return T(t).mul(e.protocol_fee_rate).div(U1).toFixed(0,Q.ROUND_CEIL)}static buildFramsPositionNFT(e){let t=e.clmm_postion.fields;return{id:e.id.id,url:t.url,pool_id:e.pool_id,coinTypeA:D(t.coin_type_a.fields.name).full_address,coinTypeB:D(t.coin_type_b.fields.name).full_address,description:t.description,name:t.name,liquidity:t.liquidity,clmm_position_id:t.id.id,clmm_pool_id:t.pool,tick_lower_index:Ut(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:Ut(BigInt(t.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){let t=le(e),i=ur(e),{positions:n}=t;if(t&&n.length>0){let r=mi.buildFramsPositionNFT(n[0].fields);return{id:t.id.id,pool_id:t.pool,protocol_fee_rate:t.protocol_fee_rate,is_pause:t.is_pause,harvest_assets:{harvest_assets_handle:t.harvest_assets.fields.id.id,size:Number(t.harvest_assets.fields.size)},lp_token_type:D(i).type_arguments[0],total_supply:t.lp_token_treasury.fields.total_supply.fields.value,liquidity:t.liquidity,max_quota:t.max_quota,status:t.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:t.quota_based_type.fields.name,position:r}}}static async getSuiCoin(e,t,i){let n=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),Ss);i=i||new $;let r;if(t>95e10){let[o,...s]=n;s.length>0&&i.mergeCoins(i.object(o.coinObjectId),s.map(a=>i.object(a.coinObjectId))),r=i.splitCoins(i.object(o.coinObjectId),[t])}else r=re.buildCoinForAmount(i,n,BigInt(t),Ss,!1,!0).targetCoin;return r}},Xo=class{static calculatePositionShare(e,t,i,n,r,o,s){if(t<=r||e>=o)return"0";let a=0;e<r?a=r:a=e;let c=0;t<o?c=t:c=o;let d=Y.tickIndexToSqrtPriceX64(a),u=Y.tickIndexToSqrtPriceX64(c),{coinA:m,coinB:g}=Zt.getCoinAmountFromLiquidity(new A(i),new A(s),d,u,!0);return T(m.toString()).mul(n).div(1e12).add(g.toString()).toString()}static buildFramsPool(e){let t=le(e);if(t)try{let i=[];return t.rewarders.forEach(n=>{i.push({reward_coin:D(n.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:t.id.id,clmm_pool_id:t.clmm_pool_id,effective_tick_lower:Ut(BigInt(t.effective_tick_lower.fields.bits)),effective_tick_upper:Ut(BigInt(t.effective_tick_upper.fields.bits)),total_share:t.total_share,rewarders:i,positions:{positions_handle:t.positions.fields.id.id,size:t.positions.fields.size},sqrt_price:t.sqrt_price}}catch(i){console.log(i)}}static buildFramsPositionNFT(e){let t=le(e);if(t){let i=t.clmm_postion.fields;return{id:t.id.id,url:i.url,pool_id:t.pool_id,coinTypeA:D(i.coin_type_a.fields.name).full_address,coinTypeB:D(i.coin_type_b.fields.name).full_address,description:i.description,name:i.name,liquidity:i.liquidity,clmm_position_id:i.id.id,clmm_pool_id:i.pool,tick_lower_index:Ut(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:Ut(BigInt(i.tick_upper_index.fields.bits)),rewards:[]}}}},no=class{static buildOrderLimitEvent(e,t){let{events:i}=e,n=[];return i&&i.forEach(r=>{let o=D(r.type).name;if(t.includes(o)){let s={digest:e.digest,type:o,timestampMs:e.timestampMs,parsedJson:r.parsedJson};n.push(s)}}),n}static buildLimitOrderInfo(e){let t=le(e),i=ur(e);if(t&&i)try{let n=D(i),r={pay_coin_type:n.type_arguments[0],target_coin_type:n.type_arguments[1],canceled_ts:t.canceled_ts==="18446744073709551615"?0:Number(t.canceled_ts),id:t.id.id,obtained_amount:t.obtained_amount,owner:t.owner,rate:t.rate,rate_order_indexer_id:t.rate_order_indexer_id,expire_ts:Number(t.expire_ts),total_pay_amount:t.total_pay_amount,pay_balance:t.pay_balance,target_balance:t.target_balance,claimed_amount:t.claimed_amount,status:"Running",created_ts:Number(t.created_ts)};return r.canceled_ts===0?(r.status="Running",T(r.pay_balance).eq(0)?r.status="Completed":T(r.pay_balance).lessThan(r.total_pay_amount)&&(r.status="PartialCompleted")):r.status="Cancelled",r}catch(n){console.log(n)}}static rateToPrice(e,t,i){let n=18+t-i;return T(10**n).div(e).toString()}static priceToRate(e,t,i){let n=18+t-i;return T(10).pow(n).div(T(e)).toFixed(0).toString()}},Ca=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{haedal:r}=j(n);if(r===void 0)throw Error("the haedal config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{staking_id:s}=j(r);try{let a=new $;t?await this.requestStake(e,i||1e9,a):a.moveCall({target:`${r.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[a.object(s)]});let c=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let u=c.events.find(k=>k.type.includes("UserStaked")),{sui_amount:m,st_amount:g}=u.parsedJson;return T(m).div(g).toString()}let d=c.results[0].returnValues[0][0];return T(de.u64().parse(Uint8Array.from(d))).div(1e6).toString()}catch(a){console.log("getExchangeRateForHaedal",a)}return"0"}static async requestStake(e,t,i){var o,s;let{vaults:n}=e.sdkOptions;i=i||new $;let r=await mi.getSuiCoin(e,t,i);return i.moveCall({target:`${(s=(o=n.config)==null?void 0:o.haedal)==null?void 0:s.published_at}::interface::request_stake`,typeArguments:[],arguments:[i.object(ze("0x5")),i.object(n.config.haedal.config.staking_id),r,i.pure.address(ze("0x0"))]}),i}static requestStakeCoin(e,t,i){let{haedal:n}=e.sdkOptions.vaults.config;return t.moveCall({target:`${n.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[t.object(ze("0x5")),t.object(n.config.staking_id),i,t.pure.address(ze("0x0"))]})}},Aa=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=j(n);if(r===void 0)throw Error("the volo config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{native_pool:s,vsui_metadata:a}=j(r);try{let c=new $;t?await this.requestStake(e,i||1e9,c):c.moveCall({target:`${r.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[c.object(s),c.object(a)]});let d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let g=d.events.find(M=>M.type.includes("StakedEvent")),{cert_amount:k,sui_amount:x}=g.parsedJson;return T(x).div(k).toString()}let u=d.results[0].returnValues[0][0],m=T(de.u256().parse(Uint8Array.from(u))).div("1000000000000000000").toNumber();return T(1).div(m).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=j(n);if(r===void 0)throw Error("the volo config is undefined");i=i||new $;let{native_pool:o,vsui_metadata:s}=j(r),a=await mi.getSuiCoin(e,t,i);return i.moveCall({target:`${r.published_at}::native_pool::stake`,typeArguments:[],arguments:[i.object(o),i.object(s),i.object(ze("0x5")),a]}),i}static requestStakeCoin(e,t,i){let{vaults:n}=e.sdkOptions,{volo:r}=j(n);if(r===void 0)throw Error("the volo config is undefined");t=t||new $;let{native_pool:o,vsui_metadata:s}=j(r);return t.moveCall({target:`${r.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[t.object(o),t.object(s),t.object(ze("0x5")),i]})}},xa=class{static async getExchangeRateForStake(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=j(n);if(r===void 0)throw Error("the aftermath config is undefined");let{simulationAccount:o}=e.ClmmSDK.sdkOptions,{staked_sui_vault:s,safe:a}=j(r);try{let c=new $;t?await this.requestStake(e,i||1e9,c):c.moveCall({target:`${r.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[c.object(s),c.object(a)]});let d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:o.address});if(t){let m=d.events.find(x=>x.type.includes("StakedEvent")),{afsui_amount:g,sui_amount:k}=m.parsedJson;return T(k).div(g).toString()}let u=d.results[0].returnValues[0][0];return T(de.u128().parse(Uint8Array.from(u))).div(1e18).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=j(n);if(r===void 0)throw Error("the aftermath config is undefined");i=i||new $;let{staked_sui_vault:o,referral_vault:s,safe:a,validator_address:c}=j(r),d=await mi.getSuiCoin(e,t,i);return i.moveCall({target:`${r.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[i.object(o),i.object(a),i.object(ze("0x5")),i.object(s),d,i.pure.address(ze(c))]}),i}static requestStakeCoin(e,t,i){let{vaults:n}=e.sdkOptions,{aftermath:r}=j(n);if(r===void 0)throw Error("the aftermath config is undefined");t=t||new $;let{staked_sui_vault:o,referral_vault:s,safe:a,validator_address:c}=j(r);return t.moveCall({target:`${r.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[t.object(o),t.object(a),t.object(ze("0x5")),t.object(s),i,t.pure.address(ze(c))]})}},G1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){let{package_id:i}=this._sdk.sdkOptions.ido,n=`${i}_getPoolImmutables`,r=this.getCache(n,t),o={data:[],hasNextPage:!1},s=[];if(r!==void 0&&s.push(...r),s.length===0)try{let a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::oversubscribe_pool::CreatePoolEvent`},e);a.data.forEach(c=>{let d=c.parsedJson;if(d){let u=Xt.buildIdoPoolImmutables(d);s.push(u)}}),o.hasNextPage=a.hasNextPage,o.nextCursor=a.nextCursor,this.updateCache(n,s,Z)}catch(a){console.log("getPoolImmutables",a)}return o.data=s,o}async getPools(e=[],t=!1){let i=[],n=[];e.length>0?n=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(o=>{n.push(o.pool_address)});let r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(let o of r){let s=Xt.buildIdoPool(o);await Xt.calculatePoolUiPrice(this._sdk,s),i.push(s);let a=`${s.pool_address}_getPoolObject`;this.updateCache(a,s,Z)}return i}async getPool(e,t=!0){let i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=Xt.buildIdoPool(r);return await Xt.calculatePoolUiPrice(this._sdk,o),this.updateCache(i,o),o}async getIdoConfigs(e=!1){var c;let{package_id:t}=this._sdk.sdkOptions.ido,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=No(r),s=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",package_version_id:""};return s.length>0&&(s.forEach(d=>{let u=d.parsedJson;if(u)switch(D(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=u.admin_cap_id,a.package_version_id=u.package_version_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=u.pools_id;break}}),this.updateCache(i,a,Z)),a}async getPurchaseInfo(e,t,i=!0){let n=`${e}_${t}_getPurchaseInfo`,r=this.getCache(n,i);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),s=Xt.buildPurchaseInfo(le(o));return this.updateCache(n,s,ki),s}catch{return}}async getLockNFT(e,t=!1){let i=`${e}_getLockNFT`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!r.error)return Nr(r)}async getLockNFTList(e){var r;let{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:i}=this._sdk.sdkOptions,n=[];try{let o=(r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${i.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:r.data;for(let s of o){let a=le(s);if(a){let c=a.nft.fields,d={locked_at:Number(a.locked_at),lock_duration:Number(a.lock_duration),lock_nft_id:a.id.id,type:a.nft.type,...c};d.end_lock_time=d.locked_at+d.lock_duration,d.coin_type_a=D(c.coin_type_a.fields.name).full_address,d.coin_type_b=D(c.coin_type_b.fields.name).full_address,d.id=c.id.id,d.tick_lower_index=Ut(BigInt(c.tick_lower_index.fields.bits)),d.tick_upper_index=Ut(BigInt(c.tick_upper_index.fields.bits)),n.push(d)}}return n}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPool(e){let{ido:t}=this.sdk.sdkOptions;Za(pe(e.coin_type_sale),pe(e.coin_type_raise))&&(e.price_min=T(1).div(e.price_max).toNumber(),e.price_max=T(1).div(e.price_min).toNumber());let i=si.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),n=Y.priceToSqrtPriceX64(T(e.price_min),e.sale_decimals,e.raise_decimals).toString(),r=Y.priceToSqrtPriceX64(T(e.price_max),e.sale_decimals,e.raise_decimals).toString(),o=new $,s=T(e.total_supply).add(T(e.total_supply).mul(T(e.liquidity_injection_ratio))).toNumber(),a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),c=re.buildCoinForAmount(o,a,BigInt(s),e.coin_type_sale,!1),d=[o.object(j(t).admin_cap_id),o.object(j(t).package_version_id),o.object(j(t).pools_id),o.object(pe(e.owner)),o.pure.u128(T(i).mul(Cr).toString()),o.pure.u64(e.total_supply),o.pure.u64(e.complete_raise_limit),o.pure.u64(e.min_purchase_amount),o.pure.u64(e.max_purchase_amount),o.pure.u64(e.start_time),o.pure.u64(e.purchase_duration),o.pure.u64(e.lock_up_duration),o.pure.u64((e.liquidity_injection_ratio*xf).toString()),o.pure.u128(n),o.pure.u128(r),o.pure.u32(e.tick_spacing),c.targetCoin,o.pure.u64(e.protection_hard_cap.toString()),o.object(F)],u=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.published_at}::${N1}::create_oversubscribe_pool`,typeArguments:u,arguments:d}),o}async creatPurchasePayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),o=re.buildCoinForAmount(i,r,BigInt(e.raise_amount),e.coin_type_raise,!1),s=[e.coin_type_sale,e.coin_type_raise],a,c;return n?(c="purchase",a=[i.object(j(t).package_version_id),i.object(e.pool_address),i.object(n.purchase_certificate_id),i.pure.u64(e.raise_amount.toString()),o.targetCoin,i.object(F)]):(c="create_certificate_and_purchase",a=[i.object(j(t).package_version_id),i.object(e.pool_address),i.pure.u64(e.raise_amount.toString()),o.targetCoin,i.object(F)]),i.moveCall({target:`${t.published_at}::${Ci}::${c}`,typeArguments:s,arguments:a}),i}async redeemPayload(e){let{ido:t}=this.sdk.sdkOptions,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(i===void 0)throw Error("get purchase certificate fail");let n=new $,r=[e.coin_type_sale,e.coin_type_raise],o=[n.object(j(t).package_version_id),n.object(e.pool_address),n.object(i.purchase_certificate_id),n.object(F)];return n.moveCall({target:`${t.published_at}::${Ci}::redeem`,typeArguments:r,arguments:o}),n}injectLiquidityPayload(e){let{ido:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,n=new $,r=[e.coin_type_sale,e.coin_type_raise],o=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",s=[n.object(j(t).package_version_id),n.object(e.pool_address),n.object(j(i).global_config_id),n.object(e.clmm_pool_address),n.object(F)];return n.moveCall({target:`${t.published_at}::${Ci}::${o}`,typeArguments:r,arguments:s}),n}unPauseInjectLiquidity(e){let{ido:t}=this.sdk.sdkOptions,{integrate:i,clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,r=new $;r.moveCall({target:`${i.published_at}::${_o}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[r.object(j(n).global_config_id),r.object(e.clmm_pool_address)]});let o=[e.coin_type_sale,e.coin_type_raise],s=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[r.object(j(t).package_version_id),r.object(e.pool_address),r.object(j(n).global_config_id),r.object(e.clmm_pool_address),r.object(F)];return r.moveCall({target:`${t.published_at}::${Ci}::${s}`,typeArguments:o,arguments:a}),r}async findClmmPoolForLiquidity(e){let t=null,i=!1,n=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(let r of n){if(r.coinTypeA===e.coin_type_sale&&r.coinTypeB===e.coin_type_raise&&Number(r.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(r.poolAddress);break}if(r.coinTypeA===e.coin_type_raise&&r.coinTypeB===e.coin_type_sale&&Number(r.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(r.poolAddress),i=!0;break}}return t&&(T(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||T(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?{is_reverse:i,clmmPool:null}:{is_reverse:i,clmmPool:t}}withdrawPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).package_version_id),i.object(e.pool_address),i.object(F)];return i.moveCall({target:`${t.published_at}::${Ci}::withdraw`,typeArguments:n,arguments:r}),i}updateWhitelistCapPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&i.moveCall({target:`${t.published_at}::${Ci}::add_white_listed_addresses`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(r=>i.pure.address(ze(r)))}),i.pure.u64(e.add_whites.protection_limit),i.object(F)]}),e.remove_whites&&e.remove_whites.length>0&&i.moveCall({target:`${t.published_at}::${Ci}::remove_white_listed_addresses`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",elements:e.remove_whites.map(r=>i.pure.address(ze(r)))}),i.object(F)]}),e.update_whites&&e.update_whites.forEach(r=>{i.moveCall({target:`${t.published_at}::${Ci}::update_white_listed_address`,typeArguments:n,arguments:[i.object(j(t).admin_cap_id),i.object(j(t).package_version_id),i.object(e.pool_address),i.object(r.address),i.pure.u64(r.protection_limit),i.object(F)]})}),i}creatCancelPoolPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=[e.coin_type_sale,e.coin_type_raise],r=[i.object(j(t).admin_cap_id),i.object(j(t).package_version_id),i.object(e.pool_address),i.object(F)];return i.moveCall({target:`${t.published_at}::${Ci}::cancel`,typeArguments:n,arguments:r}),i}updatePoolOwnerPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new $:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(j(i).admin_cap_id),t.object(j(i).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object(F)];return t.moveCall({target:`${i.published_at}::${Ci}::update_pool_owner`,typeArguments:n,arguments:r}),t}updatePoolDuractionPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new $:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(j(i).admin_cap_id),t.object(j(i).package_version_id),t.object(e.pool_address),t.pure.u64(e.start_time),t.pure.u64(e.purchase_duration),t.pure.u64(e.lock_duration),t.object(F)];return t.moveCall({target:`${i.published_at}::${Ci}::update_pool_duration`,typeArguments:n,arguments:r}),t}updateProtectionHardCapPayload(e,t){let{ido:i}=this.sdk.sdkOptions;t=t===void 0?new $:t;let n=[e.coin_type_sale,e.coin_type_raise],r=[t.object(j(i).admin_cap_id),t.object(j(i).package_version_id),t.object(e.pool_address),t.pure.u64(e.protection_hard_cap),t.object(F)];return t.moveCall({target:`${i.published_at}::${Ci}::update_protection_hard_cap`,typeArguments:n,arguments:r}),t}unlockNftPayload(e){let{ido:t}=this.sdk.sdkOptions,i=new $,n=[e.nft_type],r=[i.object(e.lock_nft_id),i.object(F)];return i.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:n,arguments:r}),i}async isAdminCap(e){let{ido:t}=this._sdk.sdkOptions,i=`${t.package_id}_${e}_isAdminCap`,n=this.getCache(i);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:j(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(r);let o=ur(r),s=Ts(r),a=!1;return s&&o&&D(o).source_address===`${t.package_id}::config::AdminCap`&&(a=pe(s.AddressOwner)===pe(e)),this.updateCache(i,a,Z),a}async getWhiteProtectionLimit(e,t,i=!0){let n=`${e}_${t}_getWhiteProtectionLimit`,r=this._sdk.getCache(n,i);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(o&&o.data){let s=le(o);return this._sdk.updateCache(n,s.value),s.value}return}catch{return}}async getWhiteList(e,t){var n;let i={type:"address",value:t};try{let r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),o=le(r);if(console.log(o),o)return(n=o==null?void 0:o.value)==null?void 0:n.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){let{ido:e}=this._sdk.sdkOptions,t=`${j(e).admin_cap_id}_getAdminAddress`,i=this.getCache(t);if(i)return i;let n=await this._sdk.ClmmSDK.fullClient.getObject({id:j(e).admin_cap_id,options:{showType:!0,showOwner:!0}}),r=ur(n),o=Ts(n);if(o&&r&&D(r).source_address===`${e.package_id}::config::AdminCap`){let s=pe(o.AddressOwner);return this.updateCache(t,s,Z),s}return""}updateCache(e,t,i=Z){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},H1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){let{xtoken:i}=this.sdk.sdkOptions,n=`${e}_getLockUpManagerEvent`,r=this.getCache(n,t);if(r!==void 0)return r;let o,s=`${i.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:s}})).data.forEach(a=>{let c=D(zi(a)).source_address;if(c===s&&a.data&&a.data.content){let{fields:d}=a.data.content;o={...Hs(a),id:d.id.id,index:d.index,type:c,xtoken_balance:d.xtoken_balance},this.updateCache(n,o,Z)}}),o}async getOwnerLockTokens(e){let{xtoken:t}=this.sdk.sdkOptions,i=[],n=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:n}});for(let o of r.data)if(D(zi(o)).source_address===n&&o.data){let s=ir.buildLockToken(o.data.content),a=await this.getLockXToken(s.id);a&&(s.xtoken_amount=a.xtoken_amount),i.push(s)}return i}async getLockToken(e){var i;let t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=t.data)!=null&&i.content){let n=ir.buildLockToken(t.data.content),r=await this.getLockXToken(n.id);return r&&(n.xtoken_amount=r.xtoken_amount),n}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){let{xtoken:e}=this.sdk.sdkOptions,t=new $;return t.moveCall({target:`${e.published_at}::${wr}::mint_venft`,typeArguments:[],arguments:[t.object(j(e).xtoken_manager_id)]}),t}async convertPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new $,n=this.buileTokenCoinType(),r=await re.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.amount),n);return e.venft_id===void 0?i.moveCall({target:`${t.published_at}::${wr}::mint_and_convert`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),r,i.pure.u64(e.amount)]}):i.moveCall({target:`${t.published_at}::${wr}::convert`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),r,i.pure.u64(e.amount),i.object(e.venft_id)]}),i}redeemLockPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${wr}::redeem_lock`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),i.object(e.venft_id),i.pure.u64(e.amount),i.pure.u64(e.lock_day),i.object(F)]}),i}redeemPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${wr}::redeem`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(F)]}),i}redeemDividendPayload(e,t){let{xtoken_dividends:i}=this.sdk.sdkOptions,n=new $;return t.forEach(r=>{n.moveCall({target:`${i.published_at}::${ka}::redeem`,typeArguments:[r],arguments:[n.object(j(i).dividend_manager_id),n.object(e)]})}),n}redeemDividendV2Payload(e,t,i){let{xtoken_dividends:n}=this.sdk.sdkOptions,r=new $;return t.filter(o=>i.includes(o)).length>0&&(r=this.redeemDividendXTokenPayload(e,r)),t.forEach(o=>{i.includes(o)||r.moveCall({target:`${n.published_at}::${ka}::redeem_v2`,typeArguments:[o],arguments:[r.object(j(n).dividend_manager_id),r.object(e),r.object(F)]})}),r}redeemDividendXTokenPayload(e,t){let{xtoken_dividends:i,xtoken:n}=this.sdk.sdkOptions,{xtoken_manager_id:r,lock_manager_id:o}=j(n),{dividend_manager_id:s}=j(i);return t=t===void 0?new $:t,t.moveCall({target:`${i.published_at}::${ka}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(r),t.object(s),t.object(e),t.object(F)]}),t}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,t="xtoken",i="XTOKEN"){return`${e}::${t}::${i}`}cancelRedeemPayload(e){let{xtoken:t}=this.sdk.sdkOptions,i=new $;return i.moveCall({target:`${t.published_at}::${wr}::cancel_redeem_lock`,typeArguments:[],arguments:[i.object(j(t).lock_manager_id),i.object(j(t).xtoken_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(F)]}),i}async getInitConfigs(){var s,a;let{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:s.data,r={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};n.length>0&&n.forEach(c=>{let d=c.parsedJson;d&&(r.xtoken_manager_id=d.xtoken_manager)});let o=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return o.length>0&&o.forEach(c=>{let d=c.parsedJson;d&&(r.lock_manager_id=d.lock_manager)}),r.lock_handle_id=(await this.getLockUpManager(r.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(t,r,Z),r}async getLockUpManager(e=j(this.sdk.sdkOptions.xtoken).lock_manager_id,t=!1){let i=`${e}_getLockUpManagerEvent`,n=this.getCache(i,t);if(n!==void 0)return n;let r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=ir.buildLockUpManager(le(r));return this.updateCache(i,o,Z),o}async getLockInfoHandle(e){let t=`${e}_getLockInfoHandle`,i=this.getCache(t);if(i!==void 0)return i;let n="",r=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=le(r);return o&&(n=o.lock_infos.fields.id.id,this.updateCache(t,n,Z)),n}async getDividendConfigs(){var o;let{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,i=this.getCache(t);if(i!==void 0)return i;let n=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:o.data,r={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return n.length>0&&n.forEach(s=>{let a=s.parsedJson;a&&(r.dividend_manager_id=a.manager_id,r.dividend_admin_id=a.admin_id,r.dividend_settle_id=a.settle_id,this.updateCache(t,r,Z))}),r}async getDividendManager(e=!1){let{dividend_manager_id:t}=j(this.sdk.sdkOptions.xtoken_dividends),i=`${t}_getDividendManager`,n=this.getCache(i,e);if(n!==void 0)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=le(r),s=ir.buildDividendManager(o);return this.updateCache(i,s,Z),s}async getXcetusManager(e=!0){let{xtoken_manager_id:t}=j(this.sdk.sdkOptions.xtoken),i=`${t}_getXcetusManager`,n=this.getCache(i,e);if(n)return n;let r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=le(r),s={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(i,s),s}async getVeNFTDividendInfo(e,t){try{let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=le(i);return ir.buildVeNFTDividendInfo(n)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(),n=T(Si).mul(T(i.max_lock_day).sub(T(t))).mul(T(i.max_percent_numerator).sub(T(i.min_percent_numerator))).div(T(i.max_lock_day).sub(T(i.min_lock_day))),r=T(Si).mul(T(i.max_percent_numerator)).sub(n).div(T(js)).div(Si);return{amountOut:T(r).mul(T(e)).round().toString(),percent:r.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(),n=T(Si).mul(T(i.max_lock_day).sub(T(t))).mul(T(i.max_percent_numerator).sub(T(i.min_percent_numerator))).div(T(i.max_lock_day).sub(T(i.min_lock_day))),r=T(Si).mul(T(i.max_percent_numerator)).sub(n).div(T(js)).div(Si);return{amountOut:T(e).div(r).toFixed(0,Q.ROUND_UP),percent:r.toString()}}async getLockXToken(e){let{lock_handle_id:t}=j(this._sdk.sdkOptions.xtoken),i=`${e}_getXTokenAmount`,n=this.getCache(i);if(n)return n;try{let r=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=le(r);if(o){let s=o.value.fields.value.fields;return this.updateCache(i,s,Z),s}}catch{}}async getVeNftAmount(e,t){try{let i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=le(i);if(n){let{lock_amount:r,xtoken_amount:o}=n.value.fields.value.fields;return{lock_amount:r,xtoken_amount:o}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){let i=(await this.getDividendManager()).dividends.id,n=`${i}_${e}_getPhaseDividendInfo`,r=this._sdk.getCache(n,t);if(r)return r;try{let o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),s=le(o),a=s.value.fields.value.fields,c=a.redeemed_num.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),d=a.bonus_types.map(g=>g.fields.name),u=a.bonus.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),m={id:Fi(o),phase:s.name,settled_num:a.settled_num,register_time:a.register_time,redeemed_num:c,is_settled:a.is_settled,bonus_types:d,bonus:u,phase_end_time:""};return this.updateCache(n,m),m}catch{}}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},X1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async addMasterLiquidity(e){var M,I;let{liquidity_stratefy:t}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,n=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),r=T(0),o=T(0),s=[],a=[],c=[],d=[],u=[];e.liquidity_bins.forEach((E,B)=>{let N=e.amounts_a[B],L=e.amounts_b[B],X=e.bins_fix_amount_a[B];r=r.add(N),o=o.add(L),s.push(N),a.push(L),c.push(ii(BigInt(E.tick_lower)).toString()),d.push(ii(BigInt(E.tick_upper)).toString()),u.push(X)});let m=[e.coinTypeA,e.coinTypeB],g=new $,k=(M=re.buildAddLiquidityFixTokenCoinInput(g,!e.fix_amount_a,r.toString(),e.slippage,e.coinTypeA,n,!1))==null?void 0:M.targetCoin,x=(I=re.buildAddLiquidityFixTokenCoinInput(g,e.fix_amount_a,o.toString(),e.slippage,e.coinTypeB,n,!1))==null?void 0:I.targetCoin;return q1(e)?g.moveCall({target:`${t.published_at}::router::increase_liquidity`,typeArguments:m,arguments:[g.object(j(t).master_manger_id),g.object(e.master_address),g.object(j(i).global_config_id),g.object(e.pool_address),k,x,g.makeMoveVec({elements:s.map(E=>g.pure.u64(E))}),g.makeMoveVec({elements:a.map(E=>g.pure.u64(E))}),g.makeMoveVec({elements:u.map(E=>g.pure.bool(E))}),g.object(F)]}):g.moveCall({target:`${t.published_at}::router::create_master_liquidity`,typeArguments:m,arguments:[g.object(j(t).master_manger_id),g.object(j(i).global_config_id),g.object(e.pool_address),k,x,g.makeMoveVec({elements:c.map(E=>g.pure.u32(Number(E)))}),g.makeMoveVec({elements:d.map(E=>g.pure.u32(Number(E)))}),g.makeMoveVec({elements:s.map(E=>g.pure.u64(E))}),g.makeMoveVec({elements:a.map(E=>g.pure.u64(E))}),g.makeMoveVec({elements:u.map(E=>g.pure.bool(E))}),g.pure.u8(e.strategy),g.pure.u32(Number(ii(BigInt(e.tick_lower)).toString())),g.pure.u32(Number(ii(BigInt(e.tick_upper)).toString())),g.object(F)]}),g}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(e,t=[]){let i=[],n=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),r=t.length>0;for(let o of n.data)if(D(o.data.type).full_address===this.buildMasterNFTType()){let s=on.buildMasterNFT(o);if(s){let a=`${s.id}_masterNFT`;this.updateCache(a,s,Z),r?t.includes(s.pool_id)&&i.push(s):i.push(s)}}return i}async getMasterNFT(e,t=!1){let i="$masterId}_masterNFT",n=this.getCache(i,t);if(n)return n;try{let r=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(D(r.data.type).full_address===this.buildMasterNFTType()){let o=on.buildMasterNFT(r);return o&&this.updateCache(i,o,Z),o}}catch(r){console.log(r)}}async fetchMasterPositionInfos(e){var s;let t={},{clmm_pool:i,integrate:n,simulationAccount:r}=this.sdk.ClmmSDK.sdkOptions,o=new $;return e.forEach(a=>{a.position_ids.forEach(c=>{let d=[a.coinTypeA,a.coinTypeB],u=[o.object(j(i).global_config_id),o.object(a.pool_id),o.object(c)];o.moveCall({target:`${n.published_at}::${Vi}::fetch_position_fees`,arguments:u,typeArguments:d}),o.moveCall({target:`${n.published_at}::${Vi}::fetch_position_rewards`,arguments:[...u,o.object(F)],typeArguments:d})})}),(s=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:r.address})).events)==null||s.forEach(a=>{let{parsedJson:c}=a,{position_id:d}=c,u=t[d];switch(u===void 0&&(u={position_id:d,feeOwedA:"0",feeOwedB:"0",rewarders:[]},t[d]=u),D(a.type).name){case"FetchPositionFeesEvent":u.feeOwedA=c.fee_owned_a,u.feeOwedB=c.fee_owned_b;break;case"FetchPositionRewardsEvent":u.rewarders=c.data;break}}),t}async getLiquidityStrategyConfigs(e=!1){let{package_id:t}=this._sdk.sdkOptions.liquidity_stratefy,i=`${t}_getLiquidityStrategyConfigst`,n=this.getCache(i,e);if(n!==void 0)return n;let r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,o={master_manger_id:"",master_liquidity_handle:""};if(r.length>0){for(let s of r){let a=s.parsedJson;o.master_manger_id=a.id;let c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),d=le(c);o.master_liquidity_handle=d.position_maps.fields.id.id;break}this.updateCache(i,o,Z)}return o}removeMasterLiquidity(e){let{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions,n=new $,r=[e.coinTypeA,e.coinTypeB];this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},n);let o=[n.object(j(i).master_manger_id),n.object(e.pool_address),n.object(e.master_address),n.object(j(t).global_config_id),n.makeMoveVec({elements:e.delta_liquidities.map(s=>n.pure.u128(s))}),n.makeMoveVec({elements:e.min_amounts_a.map(s=>n.pure.u64(s))}),n.makeMoveVec({elements:e.min_amounts_a.map(s=>n.pure.u64(s))}),n.object(F)];return n.moveCall({target:`${i.published_at}::${Ho}::remove_liquidity`,typeArguments:r,arguments:o}),n}closeMasterLiquidity(e){let{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions,n=new $,r=[e.coinTypeA,e.coinTypeB];return this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},n),n.moveCall({target:`${i.published_at}::${Ho}::close_master_liquidity`,typeArguments:r,arguments:[n.object(j(i).master_manger_id),n.object(e.master_address),n.object(j(t).global_config_id),n.object(e.pool_address),n.makeMoveVec({elements:e.min_amounts_a.map(o=>n.pure.u64(o))}),n.makeMoveVec({elements:e.min_amounts_a.map(o=>n.pure.u64(o))}),n.object(F)]}),n}collectFee(e,t){let{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions;t=t===void 0?new $:t;let r=[e.coinTypeA,e.coinTypeB],o=[t.object(j(n).master_manger_id),t.object(e.master_address),t.object(j(i).global_config_id),t.object(e.pool_address)];return t.moveCall({target:`${n.published_at}::${Ho}::collect_fee`,typeArguments:r,arguments:o}),t}collectReward(e,t){let{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions;return t=t===void 0?new $:t,e.collect_fee&&this.collectFee({...e},t),e.rewarder_coin_types.forEach(r=>{let o=[e.coinTypeA,e.coinTypeB,r];if(t){let s=[t.object(j(n).master_manger_id),t.object(e.master_address),t.object(j(i).global_config_id),t.object(e.pool_address),t.object(j(i).global_vault_id),t.object(F)];t.moveCall({target:`${n.published_at}::${Ho}::collect_reward`,typeArguments:o,arguments:s})}}),t}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},J1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildCoinInput(e,t,i,n,r){let{selectedCoins:o,remainingCoins:s}=Ue.selectCoinAssetGreaterThanOrEqual(t,BigInt(n)),a=Ue.calculateTotalBalance(o);if(a<BigInt(n))throw new Error(`The amount(${a}) is Insufficient balance for ${i} , expect ${n} `);let c=a-BigInt(n),d;if(Ue.isSuiCoin(i))d=e.splitCoins(e.gas,[e.pure.u64(n)]);else{let[u,...m]=o.map(g=>g.coinObjectId);d=e.object(u),m.length>0?r?e.mergeCoins(d,[...m.map(g=>e.object(g)),r]):e.mergeCoins(d,[...m.map(g=>e.object(g))]):r&&e.mergeCoins(d,[r])}return{selectedUnusedAmount:c,coinInput:d,remainingCoins:s}}async deposit(e){var m,g;let{vaults:t,frams:i}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),o=new $,s,a;if(e.swapParams){let k=await this.handleDepositSwap(e,o,r);s=k.primaryCoinAInputs,a=k.primaryCoinBInputs}else s=(m=re.buildAddLiquidityFixTokenCoinInput(o,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,r,!1))==null?void 0:m.targetCoin,a=(g=re.buildAddLiquidityFixTokenCoinInput(o,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,r,!1))==null?void 0:g.targetCoin;let c=j(t),d=j(i),u=j(n);return o.moveCall({target:`${t.published_at}::${L1}::deposit`,typeArguments:[e.coinTypeA,e.coinTypeB,e.lp_token_type],arguments:[o.object(c.vaults_manager_id),o.object(e.vault_id),o.object(d.rewarder_manager_id),o.object(d.global_config_id),o.object(e.farming_pool),o.object(u.global_config_id),o.object(e.clmm_pool),s,a,o.pure.u64(e.amount_a),o.pure.u64(e.amount_b),o.pure.bool(e.fix_amount_a),o.object(F)]}),o}async handleDepositSwap(e,t,i){let{clmm_pool:n,integrate:r}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:o,a2b:s,route_obj:a,stakeProtocol:c}=e.swapParams,d=s?e.coinTypeA:e.coinTypeB,u=re.buildCoinForAmount(t,i,BigInt(o),d,!1),m=BigInt(u.tragetCoinAmount)-BigInt(o),g=[];if(c){let E=this.requestStakeCoin(c,t,u.targetCoin),B=re.buildCoinForAmount(t,u.remainCoins,BigInt(0),d,!1).targetCoin;g=s?[B,E]:[E,B]}else if(a){let E=re.buildCoinForAmount(t,i,BigInt(o),s?e.coinTypeA:e.coinTypeB,!1,!0),B={routers:a.routes,byAmountIn:!0,txb:t,slippage:e.slippage,inputCoin:E.targetCoin},N=`${e.aggregatorConfig.walletAddress}_getAggregatorClient`,L=this.getCache(N,!1),X;if(L!==void 0)X=L;else{let ee=new cs({url:this.sdk.ClmmSDK.sdkOptions.fullRpcUrl});X=new ya(e.aggregatorConfig.endPoint,e.aggregatorConfig.walletAddress,ee,e.aggregatorConfig.env)}let K=await X.routerSwap(B);g=s?[E.originalSplitedCoin,K]:[K,E.originalSplitedCoin]}else{let E=re.buildCoinForAmount(t,i,0n,s?e.coinTypeB:e.coinTypeA,!1),B=Hi.getDefaultSqrtPriceLimit(s).toString();g=t.moveCall({target:`${r.published_at}::${sr}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(j(n).global_config_id),t.object(e.clmm_pool),s?u.targetCoin:E.targetCoin,s?E.targetCoin:u.targetCoin,t.pure.bool(s),t.pure.bool(!0),t.pure.u64(o),t.pure.u128(B),t.pure.bool(!1),t.object(F)]})}let k,x,M=g[0],I=g[1];if(s){let E=BigInt(e.amount_a)-m;Ue.isSuiCoin(d)?(a||t.transferObjects([M],t.pure.address(this._sdk.getVerifySenderAddress())),k=t.splitCoins(t.gas,[t.pure.u64(e.amount_a)])):E>0n?k=this.buildCoinInput(t,u.remainCoins,d,E,u.targetCoin).coinInput:k=M,x=I}else{k=M;let E=BigInt(e.amount_b)-m;Ue.isSuiCoin(d)?(a||t.transferObjects([I],t.pure.address(this._sdk.getVerifySenderAddress())),x=t.splitCoins(t.gas,[t.pure.u64(e.amount_b)])):E>0n?x=this.buildCoinInput(t,u.remainCoins,d,E,u.targetCoin).coinInput:x=I}return{primaryCoinAInputs:k,primaryCoinBInputs:x}}async remove(e){let{vaults:t,frams:i}=this.sdk.sdkOptions,{clmm_pool:n,integrate:r}=this._sdk.ClmmSDK.sdkOptions,o=new $,s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),e.lp_token_type),a=re.buildCoinForAmount(o,s,BigInt(e.lp_token_amount),e.lp_token_type,!1).targetCoin,c=j(t),d=j(i),u=j(n),m=[e.coinTypeA,e.coinTypeB,e.lp_token_type],g=o.moveCall({target:`${t.published_at}::${F1}::remove`,typeArguments:m,arguments:[o.object(c.vaults_manager_id),o.object(e.vault_id),o.object(d.rewarder_manager_id),o.object(d.global_config_id),o.object(e.farming_pool),o.object(u.global_config_id),o.object(e.clmm_pool),a,o.pure.u64(e.lp_token_amount),o.pure.u64(e.min_amount_a),o.pure.u64(e.min_amount_b),o.object(F)]}),k=g[0],x=g[1];if(e.swapParams){let{a2b:M,swap_amount:I,route_obj:E}=e.swapParams;if(E){let B={targetCoin:M?k:x,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},N={routers:E.routes,byAmountIn:!0,txb:o,slippage:e.slippage,inputCoin:B.targetCoin},L=`${e.aggregatorConfig.walletAddress}_getAggregatorClient`,X=this.getCache(L,!1),K;if(X!==void 0)K=X;else{let be=new cs({url:this.sdk.ClmmSDK.sdkOptions.fullRpcUrl});K=new ya(e.aggregatorConfig.endPoint,e.aggregatorConfig.walletAddress,be,e.aggregatorConfig.env)}let ee=await K.routerSwap(N),me=M?[B.targetCoin,ee]:[ee,B.targetCoin];M?o.mergeCoins(me[1],[x]):o.mergeCoins(me[0],[k]),o.transferObjects([ee],o.pure.address(this._sdk.getVerifySenderAddress()))}else{let B=Hi.getDefaultSqrtPriceLimit(M).toString(),N=o.moveCall({target:`${r.published_at}::${sr}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[o.object(j(n).global_config_id),o.object(e.clmm_pool),k,x,o.pure.bool(M),o.pure.bool(!0),o.pure.u64(I),o.pure.u128(B),o.pure.bool(!0),o.object(F)]});o.transferObjects([N[0],N[1]],o.pure.address(this._sdk.getVerifySenderAddress()))}}else o.transferObjects([k,x],o.pure.address(this._sdk.getVerifySenderAddress()));return o}async getVaultList(e="all"){let{vaults:t}=this._sdk.sdkOptions,i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::vaults::CreateEvent`},e),n=i.data.map(s=>s.parsedJson.id),r=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),o=[];return r.forEach(s=>{let a=mi.buildPool(s);a&&(a.stake_protocol=this.findStakeProtocol(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),o.push(a))}),i.data=o,i}findStakeProtocol(e,t){let{haedal:i,volo:n,aftermath:r}=j(this._sdk.sdkOptions.vaults),o=D(e).full_address,s=D(t).full_address;if(Ue.isSuiCoin(o)||Ue.isSuiCoin(s)){if(i){let a=D(j(i).coin_type).full_address;if(o===a||s===a)return"Haedal"}if(n){let a=D(j(n).coin_type).full_address;if(o===a||s===a)return"Volo"}if(r){let a=D(j(r).coin_type).full_address;if(o===a||s===a)return"aftermath"}}}savePoolToCache(e){let t=`${e.id}_mirrorPool`;this.updateCache(t,e,Z)}readPoolFromCache(e,t=!1){let i=`${e}_mirrorPool`;return this.getCache(i,t)}async calculateMaxAvailable(e){var x;let{integrate:t,simulationAccount:i}=this.sdk.ClmmSDK.sdkOptions,n=new $,r=Y.tickIndexToSqrtPriceX64(e.lowerTick),o=Y.tickIndexToSqrtPriceX64(e.upperTick),s=new A(e.curSqrtPrice),a=Zt.getCoinAmountFromLiquidity(new A(e.input_amount),s,r,o,!1),c=[e.coinTypeA,e.coinTypeB];n.moveCall({target:`${t.published_at}::${Vi}::calculate_swap_result`,arguments:[n.object(e.clmm_pool),n.pure.bool(!0),n.pure.bool(!0),n.pure.u64(a.coinA.toString())],typeArguments:c}),n.moveCall({target:`${t.published_at}::${Vi}::calculate_swap_result`,arguments:[n.object(e.clmm_pool),n.pure.bool(!1),n.pure.bool(!0),n.pure.u64(a.coinB.toString())],typeArguments:c});let d=(x=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:i.address})).events)==null?void 0:x.filter(M=>D(M.type).name==="CalculatedSwapResultEvent");if(d.length===0)return null;let u=d[0].parsedJson.data,m=d[1].parsedJson.data,g=T(a.coinB.toString()).add(u.amount_out),k=T(a.coinA.toString()).add(m.amount_out);return{maxAmountB:g,maxAmountA:k}}async calculateRemoveSwapAmount(e,t){let i=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(e.curSqrtPrice)),n=e.fix_amount_a?i.ratioA:i.ratioB,r=T(e.receive_amount).mul(n),o,s;if(e.removeLiquidity){let M=Y.tickIndexToSqrtPriceX64(e.lowerTick),I=Y.tickIndexToSqrtPriceX64(e.upperTick),E=Zt.getCoinAmountFromLiquidity(new A(e.removeLiquidity),new A(e.curSqrtPrice),M,I,!1);s=e.removeLiquidity,o=e.fix_amount_a?E.coinB.toString():E.coinA.toString(),r=e.fix_amount_a?T(E.coinA.toString()):T(E.coinB.toString())}else{let M=Zt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new A(r.toFixed(0)),e.fix_amount_a,!1,.2,new A(e.curSqrtPrice));s=M.liquidityAmount.toString(),o=e.fix_amount_a?M.coinAmountB.toString():M.coinAmountA.toString()}let a=!e.fix_amount_a,c=await this.findRouters(e.clmm_pool,e.curSqrtPrice,e.fix_amount_a?e.coinTypeB:e.coinTypeA,e.fix_amount_a?e.coinTypeA:e.coinTypeB,T(o),!0,e.aggregatorConfig,e.pools,{poolID:e.clmm_pool,ticklower:e.lowerTick,tickUpper:e.upperTick,deltaLiquidity:Number(s)}),d=r.add(c.amount_out),u=T(e.receive_amount),m=u.sub(d);if((!e.removeLiquidity||e.removeLiquidity&&t)&&m.abs().greaterThan(u.mul(.01))){let M=d.lessThan(u),I,E;t?M?(I=T(s),E=t.right):(I=t.left,E=T(s)):(I=T(M?s:0),E=T(M?e.maxLiquidity:s));let B=T(I).add(E).div(2).toFixed(0);if(!t||t&&t.count<15&&I<E)return await this.calculateRemoveSwapAmount({...e,removeLiquidity:B},{left:I,right:E,count:t?t.count+1:0})}let g=c.amount_in&&c.fee_amount?new A(c.amount_in).add(new A(c.fee_amount)).toString():c.amount_in,k=c.amount_out,{is_exceed:x}=c;return{swapInAmount:g,swapOutAmount:k,liquidity:s,is_exceed:x,routeObj:c.route_obj,request_id:e.request_id,a2b:a,byamountIn:c.byAmountIn}}async calculateStakeDepositFixSui(e){let t=e.inputSuiAmount.mul(e.remainRate),i=e.inputSuiAmount.sub(e.swapSuiAmount),n=e.exchangeRate?e.exchangeRate:await this.getExchangeRateForStake(e.stakeProtocol,e.shouldRequestStake,Number(e.swapSuiAmount.toFixed(0))),r=e.swapSuiAmount.div(n).toFixed(0),o=Zt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new A(r.toString()),!e.fixCoinA,!0,0,new A(e.curSqrtPrice)),s=e.fixCoinA?o.coinAmountA.toString():o.coinAmountB.toString(),a=T(i).sub(s);return a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(t)||e.rebalanceCount>12||e.leftSuiAmount.greaterThanOrEqualTo(e.rightSuiAmount)?{swapInAmount:e.swapSuiAmount.toFixed(0),swapOutAmount:r,afterSqrtPrice:e.curSqrtPrice,fixAmountA:!e.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:e.stakeProtocol}:a.lessThan(0)?await this.calculateStakeDepositFixSui({...e,rightSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.leftSuiAmount).div(2),exchangeRate:n,rebalanceCount:e.rebalanceCount+1}):a.greaterThan(t)?await this.calculateStakeDepositFixSui({...e,leftSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.rightSuiAmount).div(2),exchangeRate:n,rebalanceCount:e.rebalanceCount+1}):null}async calculateDepositSwapAmount(e,t=!1){let i=Y.sqrtPriceX64ToTickIndex(new A(e.curSqrtPrice)),{ratioA:n,ratioB:r}=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(e.curSqrtPrice)),o=T(e.input_amount).mul(e.fix_amount_a?n:r),s=T(e.input_amount).sub(o),a=e.fix_amount_a;if(s.toFixed(0)==="0")return null;if(e.stakeProtocol){if(Ue.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||Ue.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){let X=await this.calculateStakeDepositFixSui({inputSuiAmount:T(e.input_amount),swapSuiAmount:s,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:a?new Q(s.toFixed(0)):new Q(0),rightSuiAmount:a?new Q(e.input_amount):new Q(s.toFixed(0)),stakeProtocol:e.stakeProtocol});return X?{...X,request_id:e.request_id}:null}throw Error("Only support fix sui")}let c=i<e.lowerTick||i>e.upperTick,d={clmm_pool:e.clmm_pool,curSqrtPrice:e.curSqrtPrice,a2b:a,amount_a:a?new Q(e.input_amount):new Q(0),amount_b:a?new Q(0):new Q(e.input_amount),amount_left:a?new Q(s.toFixed(0)):new Q(0),amount_right:a?new Q(e.input_amount):new Q(s.toFixed(0)),lowerTick:e.lowerTick,upperTick:e.upperTick,tick_spacing:2,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,useRoute:e.use_route,remainRate:e.remainRate?e.remainRate:.01,priceSplitPoint:e.priceSplitPoint,aggregatorConfig:e.aggregatorConfig,pools:e.pools},u=t&&i<=e.upperTick,m=u?await this.calculateRebalance(d):await this.findRouters(e.clmm_pool,e.curSqrtPrice,e.coinTypeA,e.coinTypeB,s,a,e.aggregatorConfig,e.pools),g=m.after_sqrt_price,k=Y.sqrtPriceX64ToTickIndex(new A(g)),x=k<e.lowerTick||k>e.upperTick;if(c!==x&&!u&&k<=e.upperTick){let{ratioA:X,ratioB:K}=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(g));s=T(e.input_amount).sub(T(e.input_amount).mul(e.fix_amount_a?X:K)),d.amount_left=a?new Q(s.toFixed(0)):new Q(0),d.amount_right=a?new Q(e.input_amount):new Q(s.toFixed(0)),m=await this.calculateRebalance(d),g=m.after_sqrt_price,k=Y.sqrtPriceX64ToTickIndex(new A(g))}let{ratioA:M,ratioB:I}=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(g)),E=I.div(M).sub(r.div(n)).greaterThan("0"),B=m.amount_in&&m.fee_amount?new A(m.amount_in).add(new A(m.fee_amount)).toString():m.amount_in,N=m.amount_out,{is_exceed:L}=m;if(k<e.lowerTick)E=!0;else if(k>e.upperTick)E=!1;else{let X=E===a?new A(T(e.input_amount).sub(B).toString()):new A(N),K=Zt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,X,E,!0,0,new A(g)),ee=K.coinAmountA,me=K.coinAmountB;T(e.fix_amount_a?ee.toString():me.toString()).add(B).greaterThanOrEqualTo(e.input_amount)&&(E=!E)}return{swapInAmount:B,swapOutAmount:N,afterSqrtPrice:g,is_exceed:L,fixAmountA:E,routeObj:m.route_obj,request_id:e.request_id,use_Haedal_stake:!1}}async calculateHaedalDepositSwapAmount(e){Y.sqrtPriceX64ToTickIndex(new A(e.curSqrtPrice));let{ratioA:t,ratioB:i}=mi.calculateDepositRatio(e.lowerTick,e.upperTick,new A(e.curSqrtPrice)),n=T(e.input_amount).mul(e.fix_amount_a?t:i),r=T(e.input_amount).sub(n),o=e.fix_amount_a;if(r.toFixed(0)==="0")return null;if(e.stakeProtocol){if(Ue.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||Ue.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){let s=await this.calculateStakeDepositFixSui({inputSuiAmount:T(e.input_amount),swapSuiAmount:r,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:o?new Q(r.toFixed(0)):new Q(0),rightSuiAmount:o?new Q(e.input_amount):new Q(r.toFixed(0)),stakeProtocol:e.stakeProtocol});return s?{...s,request_id:e.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(e){let{clmm_pool:t,a2b:i,curSqrtPrice:n,amount_a:r,amount_b:o,lowerTick:s,upperTick:a,amount_left:c,amount_right:d,coinTypeA:u,coinTypeB:m,useRoute:g,priceSplitPoint:k,remainRate:x,aggregatorConfig:M,pools:I}=e,E=async(B,N,L)=>{let X=B.plus(N).div(2),K=await this.findRouters(t,n,u,m,X,i,M,I);if(K.amount_out==="0")return K;if(K.after_sqrt_price||(K.after_sqrt_price=e.curSqrtPrice),K.is_exceed)return N=X,E(B,N);let ee=i?r.sub(K.amount_in):r.add(K.amount_out),me=i?o.add(K.amount_out):o.sub(K.amount_in);Y.sqrtPriceX64ToTickIndex(new A(K.after_sqrt_price));let be=Zt.estLiquidityAndcoinAmountFromOneAmounts(s,a,new A(ee.toString()),!0,!0,1,new A(K.after_sqrt_price)),ie=new Q(be.coinAmountA.toString()),z=new Q(be.coinAmountB.toString());if(ie.toString()!==ee.toString())throw new Error("usedA does not match afterA");if(me.lessThan(z))i?B=X:N=X;else{i?N=X:B=X;let te=me.sub(z);if(me.mul(x).sub(te).greaterThanOrEqualTo(0))return{...K,remainingB:te}}return B.greaterThan(N)||N.sub(B).lessThan(10)?K:E(B,N)};return c.greaterThanOrEqualTo(d)?E(new Q(0),c):E(c,d)}async findRouters(e,t,i,n,r,o,s,a,c,d=!1){var k,x;let u=`${s.walletAddress}_getAggregatorClient`,m=this.getCache(u,d),g;if(m!==void 0)g=m;else{let M=new cs({url:this.sdk.ClmmSDK.sdkOptions.fullRpcUrl});g=new ya(s.endPoint,s.walletAddress,M,s.env)}try{let M={from:i,target:n,amount:new A(r.toFixed(0).toString()),byAmountIn:o,depth:3,providers:s.providers,liquidityChanges:c},I=await g.findRouters(M);if(((k=I==null?void 0:I.error)==null?void 0:k.code)===10001)return{...I,is_exceed:I.insufficientLiquidity};if(I!=null&&I.insufficientLiquidity)return{...I,is_exceed:I.insufficientLiquidity};if(!(I!=null&&I.routes)||((x=I==null?void 0:I.routes)==null?void 0:x.length)===0)throw Error("Aggregator no router");let E=t;return I.routes.forEach(B=>{let N=B.path.find(L=>L.id.toLowerCase()===e.toLowerCase());N&&(E=String(N.extendedDetails.afterSqrtPrice))}),{amount_in:I.amountIn.toString(),amount_out:I.amountOut.toString(),is_exceed:I.insufficientLiquidity,after_sqrt_price:E,route_obj:I,byAmountIn:!0,liquidity:c==null?void 0:c.deltaLiquidity}}catch{try{if(a){let M=await g.swapInPools({from:i,target:n,amount:new A(r.toFixed(0).toString()),byAmountIn:o,pools:a});if(M){let I=t;return M.routeData.routes.forEach(E=>{let B=E.path.find(N=>N.id.toLowerCase()===e.toLowerCase());B&&(I=String(B.extendedDetails.afterSqrtPrice))}),{amount_in:M.routeData.amountIn.toString(),amount_out:M.routeData.amountOut.toString(),is_exceed:M.isExceed,after_sqrt_price:I,route_obj:M.routeData,byAmountIn:!0,liquidity:c==null?void 0:c.deltaLiquidity}}return null}return null}catch{return null}}}async getVault(e,t=!1){let i=this.readPoolFromCache(e,t);if(i)return i;try{let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),r=mi.buildPool(n);if(r)return r.stake_protocol=this.findStakeProtocol(r.position.coinTypeA,r.position.coinTypeB),this.savePoolToCache(r),r}catch(n){console.log(n)}}async getVaultsConfigs(e=!1){let{package_id:t}=this._sdk.sdkOptions.vaults,i=`${t}_getMirrorPoolConfigs`,n=this.getCache(i,e);if(n!==void 0)return n;let r=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::vaults::InitEvent`})).data,o={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(r.length>0){for(let s of r){let a=s.parsedJson;o.admin_cap_id=a.admin_cap_id,o.vaults_manager_id=a.manager_id;let c=await this._sdk.ClmmSDK.fullClient.getObject({id:o.vaults_manager_id,options:{showContent:!0}}),d=le(c);o.vaults_pool_handle=d.vault_to_pool_maps.fields.id.id;break}this.updateCache(i,o,Z)}return o}async getExchangeRateForStake(e,t,i){return e==="Haedal"?await Ca.getExchangeRateForStake(this._sdk,t,i):e==="Volo"?await Aa.getExchangeRateForStake(this._sdk,t,i):e==="aftermath"?await xa.getExchangeRateForStake(this._sdk,t,i):"0"}requestStakeCoin(e,t,i){if(e==="Haedal")return Ca.requestStakeCoin(this._sdk,t,i);if(e==="Volo")return Aa.requestStakeCoin(this._sdk,t,i);if(e==="aftermath")return xa.requestStakeCoin(this._sdk,t,i)}async requestStake(e,t,i){if(e==="Haedal")return await Ca.requestStake(this._sdk,t,i);if(e==="Volo")return await Aa.requestStake(this._sdk,t,i);if(e==="aftermath")return await xa.requestStake(this._sdk,t,i)}updateCache(e,t,i=ki){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},Z1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getLimitOrderTokenList(){let{limit_order:e}=this._sdk.sdkOptions,{token_list_handle:t}=j(e),{fullClient:i}=this._sdk.ClmmSDK,n=(await i.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await i.batchGetObjects(n,{showContent:!0})).map(r=>{let{fields:o}=r.data.content;return{coin_type:D(o.name.fields.name).full_address,min_trade_amount:Number(o.value)}})}async getLimitOrderPoolList(){let{limit_order:e}=this._sdk.sdkOptions,{rate_orders_indexer_handle:t}=j(e),{fullClient:i}=this._sdk.ClmmSDK,n=(await i.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await i.batchGetObjects(n,{showContent:!0})).map(r=>{let{fields:o}=r.data.content.fields.value,s={pay_coin_type:D(o.pay_coin.fields.name).full_address,target_coin_type:D(o.target_coin.fields.name).full_address,indexer_id:o.indexer_id};return this._sdk.updateCache(`${s.pay_coin_type}_${s.target_coin_type}`,s.indexer_id),s})}async getPoolIndexerId(e,t){let i=this._sdk.getCache(`${e}_${t}`);try{if(i===void 0){let n=(await this.getLimitOrderPoolList()).filter(r=>D(r.pay_coin_type).full_address===D(e).full_address&&D(r.target_coin_type).full_address===D(t).full_address);if(n.length>0)return n[0].indexer_id}}catch{}return i}async getOwnerLimitOrderList(e,t){let{fullClient:i}=this._sdk.ClmmSDK,n={data:[],hasNextPage:!1};try{let r=await this.getUserIndexerHandle(e);if(!r)return n;let o=await i.getDynamicFieldsByPage(r,t);n.hasNextPage=o.hasNextPage,n.nextCursor=o.nextCursor;let s=o.data.map(c=>c.name.value),a=(await i.batchGetObjects(s,{showContent:!0})).map(c=>no.buildLimitOrderInfo(c)).filter(c=>c!==void 0);n.data=a}catch(r){console.log("Error in getOwnerLimitOrderList:",r)}return n}async getLimitOrderConfigs(){let{package_id:e}=this._sdk.sdkOptions.limit_order,t={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::limit_order::InitEvent`})).data;if(i.length>0){let r=i[0].parsedJson;t.rate_orders_indexer_id=r.rate_orders_indexer_id,t.user_orders_indexer_id=r.user_orders_indexer_id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rate_orders_indexer_id,options:{showContent:!0}});t.rate_orders_indexer_handle=le(o).list.fields.id.id;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.user_orders_indexer_id,options:{showContent:!0}});t.user_orders_indexer_handle=le(s).indexer.fields.id.id}let n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitFactoryEvent`})).data;if(n.length>0){let r=n[0].parsedJson;t.global_config_id=r.global_config_id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showContent:!0}}),s=le(o);t.token_list_handle=s.token_white_list.fields.id.id}return t}async getLimitOrder(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.getObject({id:e,options:{showContent:!0}});return no.buildLimitOrderInfo(i)}catch(i){console.log("Error in getLimitOrder:",i);return}}async getLimitOrderLogs(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),n=[];return i.data.forEach(r=>{n.push(...no.buildOrderLimitEvent(r,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),n}catch(i){return console.log("Error in getLimitOrderLogs:",i),[]}}async getLimitOrderClaimLogs(e){let{fullClient:t}=this._sdk.ClmmSDK;try{let i=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),n=[];return i.data.forEach(r=>{n.push(...no.buildOrderLimitEvent(r,["ClaimTargetCoinEvent"]))}),n}catch(i){return console.log("Error in getLimitOrderLogs:",i),[]}}buildRateOrdersIndexerType(e){let{limit_order:t}=this._sdk.sdkOptions;return xs(`${t.package_id}::limit_order::RateOrdersIndexer`,[e.pay_coin_type,e.target_coin_type])}async placeLimitOrder(e){let{limit_order:t}=this._sdk.sdkOptions,{user_orders_indexer_id:i,global_config_id:n,rate_orders_indexer_id:r}=j(t),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.pay_coin_type),s=new $,a=await this.getPoolIndexerId(e.pay_coin_type,e.target_coin_type),c=re.buildCoinForAmount(s,o,BigInt(e.pay_coin_amount),e.pay_coin_type,!1,!0);return s.moveCall({target:`${t.published_at}::limit_order::${a===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[s.object(n),a===void 0?s.object(r):s.object(a),s.object(i),c.targetCoin,s.pure.u128(no.priceToRate(e.price,e.pay_decimal,e.target_decimal)),s.pure.u64(e.expired_ts),s.object(F)]}),s}async claimTargetCoin(e){let{limit_order:t}=this._sdk.sdkOptions,{global_config_id:i}=j(t),n=new $;return n.moveCall({target:`${t.published_at}::limit_order::claim_target_coin`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[n.object(i),n.object(e.order_id)]}),n}async cancelOrdersByOwner(e){let{limit_order:t}=this._sdk.sdkOptions,{global_config_id:i}=j(t),n=new $,r={};for(let o=0;o<e.length;o++){let s=e[o],a=await this.getPoolIndexerId(s.pay_coin_type,s.target_coin_type);if(a===void 0)throw Error("not found indexerId");r[s.order_id]=a}return e.forEach(o=>{n.moveCall({target:`${t.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[o.pay_coin_type,o.target_coin_type],arguments:[n.object(i),n.object(r[o.order_id]),n.object(o.order_id),n.object(F)]})}),n}async getUserIndexerHandle(e){let{fullClient:t}=this._sdk.ClmmSDK,{limit_order:i}=this._sdk.sdkOptions,n=this.getUserIndexerHandleByCache(e);if(n===void 0){let r=new $;r.moveCall({target:`${i.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[r.pure.address(e),r.object(j(i).user_orders_indexer_id)]}),n=(await t.devInspectTransactionBlock({transactionBlock:r,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,n&&this.saveUserIndexerHandleByCache(e,n)}return n}getUserIndexerHandleByCache(e){let t=`getUserIndexerHandleByCache_${e}`;return this.getCache(t)}saveUserIndexerHandleByCache(e,t){let i=`getUserIndexerHandleByCache_${e}`;return this.updateCache(i,t)}updateCache(e,t,i=Z){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},Q1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){let{package_id:t}=this._sdk.sdkOptions.frams,i={data:[],hasNextPage:!1};try{let n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::pool::CreatePoolEvent`},e),r=n.data.map(o=>o.parsedJson.pool_id);if(i.hasNextPage=n.hasNextPage,i.nextCursor=n.nextCursor,r.length>0){let o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showType:!0,showContent:!0});for(let s of o){let a=Xo.buildFramsPool(s);a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(c=>c.reward_coin)),i.data.push(a),this.updateCache(a.id,a))}}}catch(n){console.log("getFramsPoolList error ",n)}return i}async getFramsPool(e,t=!1){let i=this.getCache(e,t);if(i)return i;let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),r=Xo.buildFramsPool(n.data);return r&&(r.rewarders=await this.getFramsRewarderConfig(r.clmm_pool_id,r.rewarders.map(o=>o.reward_coin)),this.updateCache(r.id,r)),r}async getFramsRewarderConfig(e,t,i=!1){let{frams:n}=this._sdk.sdkOptions,r=[];for(let o of t){let s=`getFramsRewarderConfig_${o}_${e}`,a=this.getCache(s,i);if(a)r.push(a);else try{let c=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:j(n).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:ef(o)}}),{fields:d}=c.data.content.fields.value.fields.value,u={reward_coin:o,last_reward_time:d.last_reward_time,emission_per_second:d.emission_per_second,total_allocate_point:d.total_allocate_point,allocate_point:""},m=d.pools.fields.id.id,g=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:m,name:{type:"0x2::object::ID",value:e}}),{allocate_point:k}=g.data.content.fields.value.fields.value.fields;u.allocate_point=k,this.updateCache(s,u),r.push(u)}catch(c){console.log(c)}}return r}async getOwnedFramsPositionNFTList(e,t=[],i=!1,n="all"){let{package_id:r}=this._sdk.sdkOptions.frams,o={data:[],hasNextPage:!1},s={},a=[],c=t.length>0,d=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${r}::pool::WrappedPositionNFT`},options:{showContent:!0}},n);o.hasNextPage=d.hasNextPage,o.nextCursor=d.nextCursor;for(let u of d.data){let m=Xo.buildFramsPositionNFT(u);if(m)if(c){if(t.includes(m.pool_id)){a.push(m);let g=s[m.pool_id];g?g.push(m):g=[m],s[m.pool_id]=g}}else a.push(m)}if(i&&a.length>0){let u=await this.calculateFarmingRewards(a.map(m=>({pool_id:m.pool_id,position_nft_id:m.id,clmm_pool_id:m.clmm_pool_id})));c?(s={},a.forEach(m=>{u[m.id]&&(m.rewards=u[m.id]);let g=s[m.pool_id];g?g.push(m):g=[m],s[m.pool_id]=g})):a.forEach(m=>{u[m.id]&&(m.rewards=u[m.id])})}return c?s:(o.data=a,o)}async getFramsPositionNFT(e,t=!0){let i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),n=Xo.buildFramsPositionNFT(i);if(t&&n){let r=await this.calculateFarmingRewards([{pool_id:n.pool_id,position_nft_id:n.id}]);r[n.id]&&(n.rewards=r[n.id])}return n}async calculateFarmingRewards(e){var s,a;let{frams:t}=this._sdk.sdkOptions,i=new $,{rewarder_manager_id:n,global_config_id:r}=j(t);e.forEach(c=>{i.moveCall({target:`${t.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[i.object(r),i.object(n),i.object(c.pool_id),i.pure.address(c.position_nft_id),i.object(F)]})});let o={};try{let c=(a=(s=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:this.sdk.ClmmSDK.senderAddress}))==null?void 0:s.events)==null?void 0:a.filter(d=>D(d.type).name==="AccumulatedPositionRewardsEvent");if(c&&c.length>0)for(let d=0;d<c.length;d+=1){let{parsedJson:u}=c[d],m=[];u.rewards.contents.forEach(g=>{m.push({rewarder_type:D(g.key.name).full_address,rewarder_amount:g.value})}),o[u.wrapped_position_id]=m}}catch(c){console.log(c)}return o}depositPayload(e,t){let{frams:i}=this.sdk.sdkOptions;t=t||new $;let{global_config_id:n,rewarder_manager_id:r}=j(i);return t.moveCall({target:`${i.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(n),t.object(r),t.object(e.pool_id),t.object(e.clmm_position_id),t.object(F)]}),t}async withdrawPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{global_config_id:n,rewarder_manager_id:r}=j(i);return t=t||new $,t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},t),t.moveCall({target:`${i.published_at}::router::withdraw`,typeArguments:[],arguments:[t.object(n),t.object(r),t.object(e.pool_id),t.object(e.position_nft_id),t.object(F)]}),t}async batchHarvestPayload(e,t){t=t||new $;for(let i of e)await this.harvestPayload(i,t);return t}async batchHarvestAndClmmFeePayload(e,t){if(!Jt(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");let i=new $,n={},r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(let c of t)this.collectClmmFeeInternal(c,n,i,r),this.collectClmmRewardInternal(c,n,i,r);let{frams:o}=this.sdk.sdkOptions,{global_config_id:s,rewarder_manager_id:a}=j(o);for(let c of e){let d=await this.getFramsPool(c.pool_id,!1);if(d===void 0)throw Error(`not found ${c.pool_id}`);c.collect_fee&&this.collectFeeInternal(c,n,i,r),c.clmm_rewarder_types.length>0&&await this.collectRewardInternal(c,n,i,r),c.collect_frams_rewarder&&d.rewarders.forEach(u=>{i&&i.moveCall({target:`${o.published_at}::router::harvest`,typeArguments:[u.reward_coin],arguments:[i.object(s),i.object(a),i.object(c.pool_id),i.object(c.position_nft_id),i.object(F)]})})}return Object.keys(n).forEach(c=>{let d=n[c],{originalSplitedCoin:u}=d;(d.isMintZeroCoin||u&&(u==null?void 0:u.$kind)==="GasCoin")&&re.buildTransferCoin(this._sdk.ClmmSDK,i,d.targetCoin,c,this._sdk.ClmmSDK.senderAddress)}),i}async collectRewardInternal(e,t,i,n){let r=[];e.clmm_rewarder_types.forEach(o=>{let s=Rt(o),a=t[o];a===void 0&&(a=re.buildCoinForAmount(i,n,BigInt(0),s,!1),t[s]=a),r.push(a.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,i)}collectFeeInternal(e,t,i,n){let{frams:r}=this.sdk.sdkOptions,{global_config_id:o}=j(r),{clmm_pool:s,integrate:a}=this.sdk.ClmmSDK.sdkOptions,c=j(s),d=Rt(e.coinTypeA),u=Rt(e.coinTypeB),m=t[d];m===void 0&&(m=re.buildCoinForAmount(i,n,BigInt(0),d,!1),t[d]=m);let g=t[u];g===void 0&&(g=re.buildCoinForAmount(i,n,BigInt(0),u,!1),t[u]=g),i.moveCall({target:`${a.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[i.object(o),i.object(c.global_config_id),i.object(e.clmm_pool_id),i.object(e.position_nft_id),m.targetCoin,g.targetCoin]})}collectClmmRewardInternal(e,t,i,n){let r=[];e.rewarder_coin_types.forEach(o=>{let s=Rt(o),a=t[o];a===void 0&&(a=re.buildCoinForAmount(i,n,BigInt(0),s,!1),t[s]=a),r.push(a.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,i,r)}collectClmmFeeInternal(e,t,i,n){if(e.collect_fee){let r=Rt(e.coinTypeA),o=Rt(e.coinTypeB),s=t[r];s===void 0&&(s=re.buildCoinForAmount(i,n,BigInt(0),r,!1),t[r]=s);let a=t[o];a===void 0&&(a=re.buildCoinForAmount(i,n,BigInt(0),o,!1),t[o]=a),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},i,s.targetCoin,a.targetCoin)}}async harvestPayload(e,t){let{frams:i}=this.sdk.sdkOptions;t=t||new $;let n=await this.getFramsPool(e.pool_id,!1);if(n===void 0)throw Error(`not found ${e.pool_id}`);let{global_config_id:r,rewarder_manager_id:o}=j(i);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){let s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,s)}return n.rewarders.forEach(s=>{t&&t.moveCall({target:`${i.published_at}::router::harvest`,typeArguments:[s.reward_coin],arguments:[t.object(r),t.object(o),t.object(e.pool_id),t.object(e.position_nft_id),t.object(F)]})}),t}async claimFeeAndClmmReward(e){let t=new $,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,i),t}async openPositionAddLiquidityStakePaylod(e){let t=new $,{clmm_pool:i,integrate:n}=this._sdk.ClmmSDK.sdkOptions,r=j(i),o=t.moveCall({target:`${i.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(e.clmm_pool_id),t.pure.u32(Number(ii(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(ii(BigInt(e.tick_upper)).toString()))]}),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=re.buildCoinForAmount(t,s,BigInt(e.amount_a),e.coinTypeA,!1),c=re.buildCoinForAmount(t,s,BigInt(e.amount_b),e.coinTypeB,!1);t.moveCall({target:`${n.published_at}::${xn}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(e.clmm_pool_id),o,a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(F)]});let{frams:d}=this.sdk.sdkOptions,{global_config_id:u,rewarder_manager_id:m}=j(d);return t.moveCall({target:`${d.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(u),t.object(m),t.object(e.pool_id),o,t.object(F)]}),t}async addLiquidityPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=j(i),o=j(n),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=re.buildCoinForAmount(t,s,BigInt(e.amount_limit_a),e.coinTypeA,!1),c=re.buildCoinForAmount(t,s,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){let d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${i.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_limit_a),t.pure.u64(e.amount_limit_b),t.pure.u128(e.delta_liquidity),t.object(F)]}),t}async addLiquidityFixCoinPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=j(i),o=j(n),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=re.buildCoinForAmount(t,s,BigInt(e.amount_a),e.coinTypeA,!1),c=re.buildCoinForAmount(t,s,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){let d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${i.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(F)]}),t}async removeLiquidityPayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=j(i),o=j(n);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.clmm_rewarder_types.length>0){let s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},t,s)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");t.moveCall({target:`${i.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(F)]})}else t.moveCall({target:`${i.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(r.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(F)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return t}async buildCollectRewarderAndFeeParams(e,t,i,n,r){n===void 0&&(n=[...i]),r===void 0&&(r=[...i]);let o=Rt(e.coinTypeA),s=Rt(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},t);let a=[];return e.clmm_rewarder_types.forEach(c=>{switch(Rt(c)){case o:a.push(re.buildCoinForAmount(t,n,BigInt(0),c,!1).targetCoin);break;case s:a.push(re.buildCoinForAmount(t,r,BigInt(0),c,!1).targetCoin);break;default:a.push(re.buildCoinForAmount(t,i,BigInt(0),c,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:a},t),t}collectFeePayload(e,t){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=j(i),o=j(n);return t.moveCall({target:`${i.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(o.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id)]}),t}async collectClmmRewardPayload(e,t){var a;let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;t=t||new $;let r=e.reward_coins;if(e.clmm_rewarder_types.length>0&&r===void 0){r=[];let c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(d=>{r.push(re.buildCoinForAmount(t,c,BigInt(0),d,!1).targetCoin)})}let o=j(i),s=j(n);return(a=e.clmm_rewarder_types)==null||a.forEach((c,d)=>{t&&t.moveCall({target:`${i.published_at}::router::collect_clmm_reward`,typeArguments:[c,e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(s.global_vault_id),r[d],t.object(F)]})}),t}async collectClmmRewardNoSendPayload(e,t){var c;let{frams:i}=this.sdk.sdkOptions,{clmm_pool:n,integrate:r}=this.sdk.ClmmSDK.sdkOptions,o=e.reward_coins;if(e.clmm_rewarder_types.length>0&&o===void 0){o=[];let d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(u=>{o.push(re.buildCoinForAmount(t,d,BigInt(0),u,!1).targetCoin)})}let s=j(i),a=j(n);return(c=e.clmm_rewarder_types)==null||c.forEach((d,u)=>{t&&t.moveCall({target:`${r.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[d,e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(a.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(a.global_vault_id),o[u],t.object(F)]})}),t}async getFrarmsConfigs(){let{package_id:e}=this._sdk.sdkOptions.frams,t={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(i.length>0){let r=i[0].parsedJson;t.global_config_id=r.global_config_id,t.admin_cap_id=r.admin_cap_id}let n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(n.length>0){let r=n[0].parsedJson;t.rewarder_manager_id=r.id;let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rewarder_manager_id,options:{showContent:!0}});t.rewarder_manager_handle=o.data.content.fields.rewarders.fields.id.id}return t}updateCache(e,t,i=Z){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Vl=class{static buildDcaOrderList(e){let{parsedJson:t}=e;if(t&&t.order_id)return{created_at:t.created_at,cycle_count:t.cycle_count,cycle_frequency:t.cycle_frequency,in_coin:D(t.in_coin.name).full_address,in_deposited:t.in_deposited,order_id:t.order_id,out_coin:D(t.out_coin.name).full_address,per_cycle_in_amount_limit:t.per_cycle_in_amount_limit,per_cycle_max_out_amount:t.per_cycle_max_out_amount,per_cycle_min_out_amount:t.per_cycle_min_out_amount}}static buildDcaGlobalConfig(e){if(e&&e.id.id)return{min_cycle_count:e.min_cycle_count,min_cycle_frequency:e.min_cycle_frequency,whitelist_mode:e.whitelist_mode}}static buildOrderHistoryList(e,t){let{events:i}=e,n=[];return i&&i.forEach(r=>{let o=D(r.type).name;if(t.includes(o)){let s={digest:e.digest,type:o,timestampMs:e.timestampMs,parsedJson:r.parsedJson};n.push(s)}}),n}},Y1=class{constructor(e){G(this,"_sdk");G(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async dcaOpenOrderPayload(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i,indexer_id:n}=j(t),r=new $,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.in_coin_type),s=re.buildCoinForAmount(r,o,BigInt(e.in_coin_amount),e.in_coin_type,!1,!0);return r.moveCall({target:`${t.published_at}::order::open_order`,typeArguments:[e.in_coin_type,e.out_coin_type],arguments:[r.object(i),s.targetCoin,r.pure.u64(e.cycle_frequency),r.pure.u64(e.cycle_count),r.pure.u64(e.per_cycle_min_out_amount),r.pure.u64(e.per_cycle_max_out_amount),r.pure.u64(e.per_cycle_in_amount_limit),r.pure.u64(e.fee_rate),r.pure.u64(e.timestamp),r.pure.string(e.signature),r.object(F),r.object(n)]}),r}dcaCloseOrderPayload(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i,indexer_id:n}=j(t),r=new $;return e.forEach(o=>{let s=r.moveCall({target:`${t.published_at}::order::cancle_order`,typeArguments:[o.in_coin_type,o.out_coin_type],arguments:[r.object(i),r.object(o.order_id),r.object(n),r.object(F)]});r.transferObjects([s[0],s[1]],r.pure.address(this._sdk.getVerifySenderAddress()))}),r}async getDcaOrders(e){let t={data:[],hasNextPage:!1},{dca:i}=this._sdk.sdkOptions,{user_indexer_id:n}=j(i);try{let r,o=this.getCache(`${e}_dca_table_id`);if(o)r=o;else{let u=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"address",value:e}});r=le(u).value.fields.id.id,this.updateCache(`${e}_dca_table_id`,r)}let s=null,a=50,c=[];for(;;){let u=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:r,cursor:s,limit:a});if(u.data.forEach(m=>{c.push(m.name.value)}),s=u.nextCursor,s===null||u.data.length<a)break}let d=[];for(let u=0;u<c.length;u++){let m=await this._sdk.ClmmSDK.fullClient.getObject({id:c[u],options:{showType:!0,showContent:!0}}),g=D(m.data.type),k=g.type_arguments[0],x=g.type_arguments[1];d.push({in_coin_type:k,out_coin_type:x,...m.data.content.fields,id:m.data.content.fields.id.id,version:m.data.version})}return t.data=d,t}catch{return t}}async withdraw(e){let{dca:t}=this._sdk.sdkOptions,{global_config_id:i}=j(t),n=new $,r=n.moveCall({target:`${t.published_at}::order::withdraw`,typeArguments:[e.in_coin_type,e.out_coin_type],arguments:[n.object(i),n.object(e.order_id),n.object(F)]});return n.transferObjects([r[0]],n.pure.address(this._sdk.getVerifySenderAddress())),n}async getDcaOrdersMakeDeal(e){let t=this.getCache(`${e}_tx`),i=[],n=null,r=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.queryTransactionBlocks({filter:{ChangedObject:e},limit:r});if(a.data.forEach(c=>{i.push(c.digest)}),n=a.nextCursor,n===null||a.data.length<r)break}if(this.updateCache(`${e}_tx`,i),t&&t.length===i.length)return this.getCache(`${e}_history_list`);let o=await this._sdk.ClmmSDK.fullClient.multiGetTransactionBlocks({digests:i,options:{showInput:!0,showEffects:!0,showEvents:!0}}),s=[];return o.forEach(a=>{s.push(...Vl.buildOrderHistoryList(a,["MakeDealEvent"]))}),this.updateCache(`${e}_history_list`,s),s}async getDcaCoinWhiteList(e){let{in_coin_whitelist_id:t,out_coin_whitelist_id:i}=j(this._sdk.sdkOptions.dca),n=[],r=[];if(e===1||e===3){let o=null,s=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:t,cursor:o,limit:s});if(a.data.forEach(c=>{n.push(D(c.name.value.name).full_address)}),o=a.nextCursor,o===null||a.data.length<s)break}}if(e===2||e===3){let o=null,s=50;for(;;){let a=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:i,cursor:o,limit:s});if(a.data.forEach(c=>{r.push(D(c.name.value.name).full_address)}),o=a.nextCursor,o===null||a.data.length<s)break}}return{inCoinList:n,outCoinList:r}}async getDcaGlobalConfig(){let{global_config_id:e}=j(this._sdk.sdkOptions.dca),t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});return Vl.buildDcaGlobalConfig(t.data.content.fields)}async getDcaConfigs(){var r;let{package_id:e}=this._sdk.sdkOptions.dca,t={admin_cap_id:"",global_config_id:"",indexer_id:"",user_indexer_id:"",in_coin_whitelist_id:"",out_coin_whitelist_id:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`})).data,n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::order::InitEvent`})).data;if(i&&i.length>0){let{parsedJson:o}=i[0];t.admin_cap_id=o.admin_cap_id,t.global_config_id=o.global_config_id}if(n&&n.length>0){let{parsedJson:o}=n[0];t.indexer_id=o.indexer_id;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:o.indexer_id,options:{showType:!0,showContent:!0}});t.user_indexer_id=(r=s.data)==null?void 0:r.content.fields.user_orders.fields.id.id}if(t.global_config_id){let o=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showType:!0,showContent:!0}});t.in_coin_whitelist_id=o.data.content.fields.in_coin_whitelist.fields.id.id,t.out_coin_whitelist_id=o.data.content.fields.out_coin_whitelist.fields.id.id}return t}updateCache(e,t,i=Z){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e],n=i==null?void 0:i.isValid();if(!t&&n)return i.value;n||delete this._cache[e]}},ew=class{constructor(e,t){G(this,"_cache",{});G(this,"_sdkOptions");G(this,"_launchpad");G(this,"_ido");G(this,"_xcetusModule");G(this,"_xtokenModule");G(this,"_boosterModule");G(this,"_makerModule");G(this,"_clmmSDK");G(this,"_liquidityStrategy");G(this,"_vaults");G(this,"_limitOrder");G(this,"_farmsModule");G(this,"_dcaModule");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new j1(this),this._ido=new G1(this),this._xcetusModule=new B1(this),this._xtokenModule=new H1(this),this._boosterModule=new I1(this),this._makerModule=new E1(this),this._vaults=new J1(this),this._limitOrder=new Z1(this),this._farmsModule=new Q1(this),this._dcaModule=new Y1(this),this._liquidityStrategy=new X1(this),Rc(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}get Dca(){return this._dcaModule}getVerifySenderAddress(){let{senderAddress:e}=this.ClmmSDK;if(e.length===0||!Bi(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,t,i=Z){let n=this._cache[e];n?(n.overdueTime=Ve(i),n.value=t):n=new oi(t,Ve(i)),this._cache[e]=n}getCache(e,t=!1){let i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},pw=ew;export{Xo as A,Rt as B,Zt as C,ya as D,fw as E,ew as F,oh as G,Xt as H,bg as I,no as J,hw as K,ze as L,Bi as M,pe as N,de as O,Fo as P,mi as R,cs as S,Y as T,Zo as a,A as b,rw as c,Wc as d,nh as e,od as f,dw as g,pw as h,Kg as i,lw as j,sw as k,Ko as l,Vo as m,T as n,D as o,aw as p,cw as q,Ef as r,uw as s,Za as t,ow as u,re as v,Nr as w,tr as x,j as y,$ as z};
