import{a as B,r as f,m as w,D as j,y as E,C as xt,o as p,f as S,h as l,v as C,F as at,s as nt,i as u,x as Q,a1 as Pt,d7 as At,J as Nt,z as lt,e as Y,u as Rt,c as M,S as Ht,M as P,w as q,p as rt,k as it,b as Ut}from"./entry.a4db0d61.js";/* empty css              */import"./index.97db82ac.js";import{a as ct,y as z,c as Z}from"./pool.2587b8e2.js";import{c as st}from"./index.6288ac24.js";import{l as Wt}from"./lodash.9ecde681.js";import{u as G}from"./stats.d9e5968f.js";import{f as zt}from"./formatter.eb225502.js";import{i as Bt}from"./import-icon.de3e6c66.js";import"./index.b10985b1.js";import{_ as ut}from"./no-data.92ee1583.js";import{R as pt,A as Yt,P as Ft}from"./apr-tips.f03c5c69.js";import{u as tt}from"./useToken.31e8d532.js";import{T as dt,N as mt}from"./no-data.d7ce3ac1.js";import{C as Mt}from"./coin-single.c37f36b0.js";import{S as Et}from"./select-tab.1eda41c8.js";import{u as Jt}from"./useStatsData.a76cccba.js";import"./install.036e16d3.js";import"./decimal.765d8738.js";import"./decimal.a2826370.js";import"./coin-img.a6207125.js";import"./icon_autopools_2x.e198b988.js";import"./token-warning_2x.9203e937.js";/* empty css              */import"./nuxt-link.5f3bcca1.js";import"./icon_farms_2x.ee5d6380.js";import"./farms.e6aa98f0.js";import"./icon_autopools_2x.662dc271.js";import"./icon_fee_2x.2835f470.js";import"./icon_rewards_2x.5f9847a6.js";import"./useSDK.96ba4be6.js";import"./token-warning.aafe8d13.js";const Ot={class:"stats-chart-container"},jt={class:"chart-top"},qt={class:"trading-vol"},Gt={class:"title"},Kt={class:"text"},Qt=["innerHTML"],Xt={class:"time-list"},Zt=["onClick"],te={key:0,class:"loading-box"},ee={class:"chart-content"},oe=["id"];var X=(t=>(t.D="day",t.W="wek",t.M="mon",t))(X||{}),vt=(t=>(t[t.D=40]="D",t[t.W=30]="W",t[t.M=20]="M",t))(vt||{}),U=(t=>(t[t.Jan=1]="Jan",t[t.Feb=2]="Feb",t[t.Mar=3]="Mar",t[t.Apr=4]="Apr",t[t.May=5]="May",t[t.Jun=6]="Jun",t[t.Jul=7]="Jul",t[t.Aug=8]="Aug",t[t.Sep=9]="Sep",t[t.Oct=10]="Oct",t[t.Nov=11]="Nov",t[t.Dec=12]="Dec",t))(U||{}),_t=(t=>(t[t.D=1]="D",t[t.W=4]="W",t[t.M=12]="M",t))(_t||{}),ft=(t=>(t[t.D=1]="D",t[t.W=2]="W",t[t.M=4]="M",t))(ft||{});const se=B({__name:"stats-sui-chart",props:{chartType:{type:String,default:"tvl"}},setup(t){const i=t,a=f("D"),y=["D","W","M"],_=f(""),T=f("24H"),d=ct();w(()=>d);const m=f(),s=f(),h=f(""),L=f(!1),D=G(),n=w(()=>D),I=w(()=>n.value.overallStatistics);j(()=>[I.value,i.chartType,h.value],([r,b,V])=>{!Z(r)&&!V&&(h.value=b=="tvl"?r.totalValueLockedDisplay:r.volInUsd24h)},{immediate:!0});const c=async()=>{L.value=!0;try{const r=vt[a.value],{data:b}=i.chartType=="tvl"?await fetch(`${st.Sui.api}/v2/sui/histogram/all?date_type=${X[a.value]}&typ=pure_tvl`).then(v=>v.json()):await fetch(`${st.Sui.api}/v2/sui/histogram/all?date_type=${X[a.value]}&typ=vol`).then(v=>v.json());console.log("ðŸš€ ~ getHistogram ~ data:",b);const V=b.list.map(v=>v.num),$=b.list.map(v=>v.date);m.value=V,s.value=$,e(V,$,r),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:70 ~ getHistogram ~ data:",b)}catch(r){console.info("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:50 ~ getHistogram ~ error:",r)}},g=f(),e=(r,b,V)=>{const $=document.getElementById(`stats-chart-${i.chartType}`),v=Pt($);g.value=v;let R={tooltip:{trigger:"axis",position:function(A,F,H,W,J){return[A[0]-50,"10%"]},backgroundColor:"#28353F",borderColor:"transparent",formatter:function(A){N(A)},padding:0,axisPointer:{type:"line",lineStyle:{width:a.value=="D"?1:a.value=="W"?2:4,type:"solid",color:"#456D89"}}},xAxis:{type:"category",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},splitArea:{show:!1},data:b.reverse(),inverse:!0,axisLabel:{interval:parseInt(Number(r.length)/6),formatter:(A,F)=>{const H=z(Date.parse(A)-288e5,"YMD")||"";let W,J=H.slice(5,7),K=U[Number(J)];return a.value=="M"?W=K:W=H.slice(8,10),`${W}`}}},yAxis:{show:!1,max:function(A){return A.max}},series:[{data:r.reverse(),inverse:!0,type:i.chartType=="tvl"?"line":"bar",symbol:"none",itemStyle:{normal:{barBorderRadius:1,color:"#72C1F7"}},areaStyle:{color:new At(0,0,0,1,[{offset:0,color:"rgba(0, 128, 255, 0.3)"},{offset:1,color:"rgba(0, 128, 255, 0)"}])},barWidth:o.value?_t[a.value]:ft[a.value]}],grid:{left:0,top:0,bottom:24,right:20}};L.value=!1,R&&v.setOption(R),v&&v.resize(),v.on("globalout",A=>{h.value=i.chartType=="tvl"?I.value.totalValueLockedDisplay:I.value.volInUsd24h,T.value="24H",x()})};j(()=>a.value,(r,b)=>{(!b||r!==b)&&c()},{immediate:!0});const o=f(!0),k=Wt.debounce(()=>{document.body.clientWidth>750?o.value=!0:o.value=!1,!m.value&&!s.value?c():g.value&&g.value.resize()},300);E(()=>{window.addEventListener("resize",k),x()}),xt(()=>{window.removeEventListener("resize",k)});const x=()=>{const r=z(Date.parse(new Date().toUTCString()),"YMD")||"";let b=r.slice(5,7),V=U[Number(b)];const $=r.slice(8,10),v=V,R=r.slice(0,4);_.value=v+"&nbsp;"+$+",&nbsp;"+R+"&nbsp;(UTC)"},N=r=>{h.value=zt(r[0].value,2),T.value=a.value=="D"?"24H":a.value=="W"?"7D":"30D";const b=Date.parse(r[0].axisValue),V=new Date(b);V.setDate(V.getDate()+7);const $=new Date(b);$.setDate($.getDate()+31);const v=V.toUTCString(),R=$.toUTCString(),A=z(Date.parse(R),"YMD")||"",F=z(Date.parse(new Date().toUTCString()),"YMD")||"",H=Date.parse(v)>Date.parse(new Date().toUTCString())?z(Date.parse(new Date().toUTCString()),"YMD")||"":z(Date.parse(v),"YMD")||"";let W=F.slice(5,7),J=U[Number(W)];const K=F.slice(8,10),St=J,yt=F.slice(0,4);let et=r[0].axisValue.slice(5,7),Tt=U[Number(et)];const ot=r[0].axisValue.slice(8,10),O=Tt,kt=r[0].axisValue.slice(0,4);let Dt=H.slice(5,7),$t=U[Number(Dt)];const wt=H.slice(8,10),Ct=$t,Lt=H.slice(0,4),It=U[Number(et)+1],Vt=A.slice(0,4);a.value=="D"?_.value=O+"&nbsp;"+ot+",&nbsp;"+kt+"&nbsp;(UTC)":a.value=="W"?_.value=ot+"&nbsp;"+O+"-"+wt+"&nbsp;"+Ct+"&nbsp;,&nbsp;"+Lt+"&nbsp;(UTC)":_.value=Date.parse(R)>=Date.parse(new Date().toUTCString())?O+"&nbsp;01-"+St+"&nbsp;"+K+",&nbsp;"+yt+"&nbsp;(UTC)":O+"&nbsp;01-"+It+"&nbsp;01,&nbsp;"+Vt+"&nbsp;(UTC)"};return(r,b)=>{const V=Nt;return p(),S("div",Ot,[l("div",jt,[l("div",qt,[l("div",Gt,"Trading Volume ("+C(T.value)+")",1),l("div",Kt," $"+C(h.value===""?"--":Number(h.value)==0?0:h.value),1),l("span",{innerHTML:_.value},null,8,Qt)]),l("div",Xt,[(p(),S(at,null,nt(y,$=>l("div",{key:$,class:lt(["time-item",$==a.value?"time-item-active":""]),onClick:v=>a.value=$},C($),11,Zt)),64))])]),L.value?(p(),S("div",te,[u(V)])):Q("",!0),l("div",ee,[l("div",{id:`stats-chart-${t.chartType}`,class:"stats-chart"},null,8,oe)])])}}});const ht=Y(se,[["__scopeId","data-v-f34130f5"]]),ae=B({setup(){const t=G(),i=w(()=>t),a=w(()=>i.value.overallStatistics),y=w(()=>[{img_url:"/sui-image/icon_cumulativevolume@2x.png",label:"Cumulative Volume",value:a.value.cumulativeVolumeDisplay},{img_url:"/sui-image/icon_totalvaluelocked@2x.png",label:"Total Value Locked",value:a.value.totalValueLockedDisplay},{img_url:"/sui-image/icon_cumulativetransactions@2x.png",label:"Cumulative Transactions",value:a.value.cumulativeTransactionsDisplay},{img_url:"/sui-image/icon_accounts@2x.png",label:"Total Accounts",value:a.value.totalAccountsDisplay}]);return{checkNullObj:Z,overallStatistics:a,statisticsList:y}}});const ne={class:"stats-sui-statistics"},le=["src"],re={class:"label"},ie={key:1,class:"value"};function ce(t,i,a,y,_,T){const d=Ht;return p(),S("div",ne,[(p(!0),S(at,null,nt(t.statisticsList,m=>(p(),S("div",{key:m.label,class:"item"},[l("img",{src:m.img_url},null,8,le),l("div",re,C(m.label),1),("checkNullObj"in t?t.checkNullObj:Rt(Z))(t.overallStatistics)?(p(),M(d,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(p(),S("div",ie,"$"+C(m.value),1))]))),128))])}const ue=Y(ae,[["render",ce],["__scopeId","data-v-d5900a88"]]),pe=B({components:{RankIcon:pt,StatsAprTips:Yt,TableLoading:dt,NoData:mt},setup(){const{getToken:t}=tt(),i=G(),a=w(()=>i),y=w(()=>a.value.poolsStatsList),_=f(!0),T=f(null);E(()=>{window.scroller=T.value});const d=f([]),m=w(()=>d.value.map(I=>Object.assign({},{random:Math.random()},I))),s=f({label:"Volume (24H)",sort:"desc"}),h=n=>{s.value=n,L(y.value)},L=async n=>{let I=[];for(let e=0;e<n.length;e++){const o=n[e],k=await t(n[e].displayTokenAAddress),x=await t(n[e].displayTokenBAddress),N=[];k!=null&&k.labels&&N.push(...k.labels),x!=null&&x.labels&&N.push(...x.labels);const r={...o,tokenA:k,tokenB:x,labels:[...new Set(N)]};I.push(r)}let c=I,g=[];s.value.label=="Volume (24H)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.volume24-e.volume24):c.sort((e,o)=>e.volume24-o.volume24)),s.value.label=="Volume (7D)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.volume7d-e.volume7d):c.sort((e,o)=>e.volume7d-o.volume7d)),s.value.label=="Liquidity"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.tvl-e.tvl):c.sort((e,o)=>e.tvl-o.tvl)),s.value.label=="Fees (24H)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.fees24-e.fees24):c.sort((e,o)=>e.fees24-o.fees24)),s.value.label=="APR (24H)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.totalApr-e.totalApr):c.sort((e,o)=>e.totalApr-o.totalApr)),d.value=g,console.log("ðŸš€ ~ buildPoolList ~ pageList:",d.value,g),_.value=!1};return j(()=>y.value,n=>{n&&n.length>0&&L(n)},{immediate:!0}),{pageList:d,tableColumns:[{title:"Pools",hasSort:!1,tdWidth:"330px"},{title:"Liquidity",hasSort:!0,tdWidth:"200px"},{title:"Volume (24H)",hasSort:!0,tdWidth:"200px"},{title:"Volume (7D)",hasSort:!0,tdWidth:"200px"},{title:"Fees (24H)",hasSort:!0,tdWidth:"175px"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"175px"}],scroller:T,list:m,isPoolLoading:_,sortInfo:s,changeSort:h}}});const de=t=>(rt("data-v-a06d1547"),t=t(),it(),t),me={class:"stats-sui-pools-table"},ve={key:2,class:"virtual-table"},_e=de(()=>l("th",null,"Pool",-1));function fe(t,i,a,y,_,T){const d=P("TableLoading"),m=ut,s=P("RankIcon"),h=Ft,L=P("StatsAprTips"),D=P("RecycleScroller");return p(),S("div",me,[t.isPoolLoading?(p(),M(d,{key:0,columns:t.tableColumns,"data-source-length":10},null,8,["columns"])):t.pageList&&t.pageList.length==0?(p(),M(m,{key:1,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):(p(),S("table",ve,[u(D,{ref:"scroller",class:"scroller",items:t.list,"item-size":80,"page-mode":"","key-field":"poolAddress"},{before:q(()=>[l("thead",null,[_e,u(s,{label:"Liquidity","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Volume (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Volume (7D)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Fees (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"])])]),default:q(({item:n})=>[(p(),S("tr",{key:n==null?void 0:n.poolAddress},[l("td",null,[u(h,{"pool-info":n},null,8,["pool-info"])]),l("td",null,C(n.tvlDisplay||"--"),1),l("td",null,C(n.volume24Display||"--"),1),l("td",null,C(n.volume7dDisplay||"--"),1),l("td",null,C(n.fees24Display||"--"),1),l("td",null,[u(L,{"pool-info":n},null,8,["pool-info"])])]))]),_:1},8,["items"])]))])}const gt=Y(pe,[["render",fe],["__scopeId","data-v-a06d1547"]]),he=B({components:{TokenBlock:Mt,RankIcon:pt,TableLoading:dt,NoData:mt},setup(){const{getToken:t}=tt(),i=G(),a=w(()=>i),y=w(()=>a.value.tokensStatsList),_=f(!0),T=f(null);E(()=>{window.scroller=T.value});const d=f([]),m=w(()=>d.value.map(I=>Object.assign({},{random:Math.random()},I))),s=f({label:"Volume (24H)",sort:"desc"}),h=n=>{s.value=n,L(y.value)},L=async n=>{let I=[];for(let e=0;e<n.length;e++){const o=n[e],k=await t(o==null?void 0:o.address),x=[];k!=null&&k.labels&&x.push(...k.labels);const N={...o,logoURI:k==null?void 0:k.logo_url,labels:[...new Set(x)]};I.push(N)}let c=I,g=[];s.value.label=="Price"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.price-e.price):c.sort((e,o)=>e.price-o.price)),s.value.label=="Price Change"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.priceChange-e.priceChange):c.sort((e,o)=>e.priceChange-o.priceChange)),s.value.label=="Volume (24H)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.volume24-e.volume24):c.sort((e,o)=>e.volume24-o.volume24)),s.value.label=="TVL)"&&(g=s.value.sort=="desc"?c.sort((e,o)=>o.tvl-e.tvl):c.sort((e,o)=>e.tvl-o.tvl)),d.value=g,_.value=!1};return j(()=>y.value,n=>{n&&n.length>0&&L(n)},{immediate:!0}),{pageList:d,tableColumns:[{title:"Token",hasSort:!1,tdWidth:"370px"},{title:"Price",hasSort:!0,tdWidth:"240px"},{title:"Price Change",hasSort:!0,tdWidth:"215px"},{title:"Volume (24H)",hasSort:!0,tdWidth:"240px"},{title:"TVL",hasSort:!0,tdWidth:"215px"}],scroller:T,list:m,isTokenLoading:_,sortInfo:s,changeSort:h}}});const ge=t=>(rt("data-v-d6ce64e3"),t=t(),it(),t),be={class:"stats-sui-pools-table"},Se={key:2,class:"virtual-table"},ye=ge(()=>l("th",null,"Token",-1));function Te(t,i,a,y,_,T){const d=P("TableLoading"),m=ut,s=P("RankIcon"),h=P("TokenBlock"),L=P("RecycleScroller");return p(),S("div",be,[t.isTokenLoading?(p(),M(d,{key:0,columns:t.tableColumns,"data-source-length":10},null,8,["columns"])):t.pageList&&t.pageList.length==0?(p(),M(m,{key:1,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):(p(),S("table",Se,[u(L,{ref:"scroller",class:"scroller",items:t.list,"item-size":80,"page-mode":"","key-field":"address"},{before:q(()=>[l("thead",null,[ye,u(s,{label:"Price","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Price Change","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"Volume (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(s,{label:"TVL","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"])])]),default:q(({item:D})=>[(p(),S("tr",{key:D==null?void 0:D.address},[l("td",null,[u(h,{"token-info":D,"justify-content":"flex-start","is-have-label":!0},null,8,["token-info"])]),l("td",null,"$"+C(D.priceDisplay||"--"),1),l("td",null,[l("p",{class:lt(D.priceChangeDisplay.includes("-")?"redecue-change-price":"add-change-price")},C(D.priceChangeDisplay||"--"),3)]),l("td",null,C(D.volume24Display||"--"),1),l("td",null,C(D.tvlDisplay||"--"),1)]))]),_:1},8,["items"])]))])}const bt=Y(he,[["render",Te],["__scopeId","data-v-d6ce64e3"]]),ke=B({components:{StatsTab:Et,StatsPoolsTable:gt,StatsTokensTable:bt},setup(){const{getTokenList:t}=tt(),i=[{name:"Pools",logo:"/sui-image/icon_pools@2x.png"},{name:"Tokens",logo:"/sui-image/icon_tokens@2x.png"}],a=f("Pools");return E(()=>{t()}),{currentTab:a,tabList:i}}});const De={class:"stats-su-statistics"},$e={class:"tab-box"},we={key:0,class:"table-box"},Ce={key:1,class:"table-box"};function Le(t,i,a,y,_,T){const d=P("StatsTab"),m=gt,s=bt;return p(),S("div",De,[l("div",$e,[u(d,{"tab-list":t.tabList,"current-tab":t.currentTab,onOnClick:i[0]||(i[0]=h=>{t.currentTab=h.name})},null,8,["tab-list","current-tab"])]),t.currentTab=="Pools"?(p(),S("div",we,[u(m)])):Q("",!0),t.currentTab=="Tokens"?(p(),S("div",Ce,[u(s)])):Q("",!0)])}const Ie=Y(ke,[["render",Le],["__scopeId","data-v-96a853fb"]]),Ve=B({components:{StatsSuiChart:ht,StatsSuiStatistics:ue,PoolsTokensTransitions:Ie},setup(){const t=ct(),i=w(()=>t),a=Ut(),y=w(()=>i.value.chainName),{getStatusData:_}=Jt();E(async()=>{_()});const T=w(()=>i.value.theme);return{chainName:y,theme:T,store:i,importIcon:Bt,router:a}}});const xe={class:"stats-sui-container"},Pe={class:"title"},Ae={class:"chart-box"};function Ne(t,i,a,y,_,T){const d=ht,m=P("StatsSuiStatistics"),s=P("PoolsTokensTransitions");return p(),S("div",xe,[l("div",Pe,C(t.$t("menu.stats")),1),l("div",Ae,[u(d,{"chart-type":"tvl"}),u(d,{"chart-type":"vol"})]),u(m),u(s)])}const _o=Y(Ve,[["render",Ne],["__scopeId","data-v-f3bf30bb"]]);export{_o as default};
