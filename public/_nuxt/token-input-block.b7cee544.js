import{a as m,p as H,h as Z,z as q,b as x,e as ee}from"./common.2e62af64.js";import{a as M,m as c,e as O,o as d,f as _,i as D,w as G,u as B,B as K,j as W,z as ne,r as te,A as E,l as P,h as g,x as L,c as I,G as A,K as oe,p as ae,k as se,S as le}from"./entry.f6e83616.js";import"./index.21e51e7c.js";/* empty css              */import{u as R}from"./index.632d620c.js";import{a as ue}from"./index.230ef5b5.js";import{D as b}from"./decimal.765d8738.js";import{T as re}from"./token-dropdown-select.0bb26092.js";import{u as ie}from"./useDebounceFunction.91d06610.js";const de=M({props:{tokenInfo:{type:Object,default:()=>null}},setup(e){const o=R(),a=c(()=>o),k=c(()=>{var l,r,u;return a.value.assets&&e.tokenInfo&&a.value.assets[(l=e.tokenInfo)==null?void 0:l.address]?H(a.value.assets[(r=e.tokenInfo)==null?void 0:r.address].balance,(u=e.tokenInfo)==null?void 0:u.decimals):0}),s=c(()=>Z(Number(k.value)).div(2));return{wallet:a,addCommom:m,halfBalance:s}}});const ce={class:"btn-half-box"};function fe(e,o,a,k,s,l){var u;const r=K;return d(),_("div",ce,[D(r,{disabled:!((u=e.tokenInfo)!=null&&u.address)||("addCommom"in e?e.addCommom:B(m))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:o[0]||(o[0]=p=>e.$emit("onHalf"))},{default:G(()=>[W("HALF")]),_:1},8,["disabled"])])}const me=O(de,[["render",fe],["__scopeId","data-v-36adf21a"]]),pe=M({props:{tokenInfo:{type:Object,default:()=>null}},setup(e){const o=R(),a=c(()=>o),k=c(()=>{var s,l,r;return a.value.assets&&e.tokenInfo&&a.value.assets[(s=e.tokenInfo)==null?void 0:s.address]?H(a.value.assets[(l=e.tokenInfo)==null?void 0:l.address].balance,(r=e.tokenInfo)==null?void 0:r.decimals):0});return{addCommom:m,wallet:a,balance:k}}});const ve={class:"btn-max-box"};function ge(e,o,a,k,s,l){var u;const r=K;return d(),_("div",ve,[D(r,{disabled:!((u=e.tokenInfo)!=null&&u.address)||("addCommom"in e?e.addCommom:B(m))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:o[0]||(o[0]=p=>e.$emit("onMax"))},{default:G(()=>[W("MAX")]),_:1},8,["disabled"])])}const ke=O(pe,[["render",ge],["__scopeId","data-v-1484d97f"]]);function U(e){const o=[];let a=e.indexOf(",");for(;a!==-1;)o.push(a),a=e.indexOf(",",a+1);return o}const be=M({components:{TokenDropdownSelect:re,BtnHalf:me,BtnMax:ke},props:{titleText:{type:String,default:""},inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},tokenInfo:{type:Object,default:null},haveMax:{type:Boolean,default:!0},haveHalf:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},importPage:{type:String,default:""},isShowAmountPrice:{type:Boolean,default:!0},assetsLoading:{type:Boolean,default:!1},inputLoading:{type:Boolean,default:!1},isRemove:{type:Boolean,default:!1},removeBalance:{type:String,default:""}},setup(e,o){const{t:a,locale:k}=ne(),s=c(()=>{var n,t,f;return e.isRemove?e.removeBalance:y.value.assets&&e.tokenInfo&&y.value.assets[(n=e.tokenInfo)==null?void 0:n.address]?H(y.value.assets[(t=e.tokenInfo)==null?void 0:t.address].balance,(f=e.tokenInfo)==null?void 0:f.decimals):0}),l=te(""),r=()=>{var n;if(e.isRemove){const t=Number(s.value)>0?s.value:"";return l.value=t,p(t),!1}if(s.value){const t=Number(s.value)>0?((n=e.tokenInfo)==null?void 0:n.symbol)=="SUI"?new b(Number(s.value)).sub(new b(.05)).lt(new b(0))?"0":new b(Number(s.value)).sub(new b(.05)).toString():String(s.value):"";l.value=t,p(t)}},u=()=>{var n;if(s.value){const t=Number(s.value)>0?x(new b(Number(s.value)).div(2).toString(),(n=e.tokenInfo)==null?void 0:n.decimals).toString():"";l.value=t,p(t)}},p=ie(n=>{o.emit("onInput",n),o.emit("onInputLoading",!1)},500),C=n=>{const t=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(i==null?void 0:i.value)&&(i==null?void 0:i.value)}})?).*$`),f=n.target.value.replace(/,/g,"").replace(t,"$1");f>0&&o.emit("onInputLoading",!0),p(f)},T=n=>{var z;const t=n.target.selectionStart,f=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(i==null?void 0:i.value)&&(i==null?void 0:i.value)}})?).*$`);console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.target.value:",n.target.value);let v=n.target.value.replace(/,/g,"").replace(f,"$1");console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ value:",v),console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.inputType:",n.inputType);let w=v.includes(".")&&String(m(v))==="0"?v:String(m(v));const Y=U(n.target.value),V=U(w),j=V.length-Y.length;let h=t+j;if((z=n==null?void 0:n.inputType)!=null&&z.includes("delete")&&j>0&&t===V[V.length-1]){const N=n.target.value.slice(0,t-1)+n.target.value.slice(t);w=String(m(N.replace(/,/g,""))),h=h-2}console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ fValue:",w),l.value=w||"",setTimeout(()=>{try{n.target.setSelectionRange(h<0?0:h,h<0?0:h)}catch(N){console.log("ðŸš€ ~ file: assets-card.vue:307 ~ setTimeout ~ error:",N)}},0)};E(()=>e.inputValue,n=>{const t=String(m(n));t!==l.value&&(l.value=t)},{immediate:!0});const $=R(),y=c(()=>$),X=ue(),F=c(()=>X);let S={};E(()=>F.value.RATES,n=>{n&&(S=n)},{immediate:!0});const J=c(()=>{var f,v;const n=S&&S[(f=e.tokenInfo)==null?void 0:f.address]&&S[(v=e.tokenInfo)==null?void 0:v.address].price||0,t=new b(e.inputValue||0).mul(n).toNumber();return n<=0?0:t>0&&t<.01?"<$0.01":ee(t,2)}),i=c(()=>{var n;return(n=e.tokenInfo)==null?void 0:n.decimals}),Q=c(()=>F.value.isTokenLoading);return{balance:s,isTokenLoading:Q,t:a,addCommom:m,wallet:y,inputChange:C,amountPirce:J,coinDecimals:i,formatNumber:q,formattedValue:l,handleInput:T,maxBtnSelect:r,halfBtnSelect:u}}});const he=e=>(ae("data-v-6b5871b1"),e=e(),se(),e),Ie={class:"token-input-block card"},_e={class:"title"},$e={class:"card-top"},ye={class:"card-bottom"},Se={class:"left"},we={key:0,class:"amount-price"},Be={key:1},Ce={class:"right"},Te={class:"balance"},Ve=he(()=>g("svg",{class:"icon icon-down","aria-hidden":"true"},[g("use",{"xlink:href":"#icon-icon_wallet1"})],-1)),Ne={key:1};function Pe(e,o,a,k,s,l){const r=oe,u=le,p=P("TokenDropdownSelect"),C=P("BtnHalf"),T=P("BtnMax");return d(),_("div",Ie,[g("div",_e,L(e.titleText),1),g("div",$e,[e.inputLoading?(d(),I(u,{key:1,class:"input-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):(d(),I(r,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.formattedValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:e.handleInput,onFocus:o[0]||(o[0]=$=>e.$emit("onFocus")),onBlur:o[1]||(o[1]=$=>e.$emit("onBlur"))},null,8,["value","disabled","onChange","onInput"])),D(p,{"has-arrow":e.hasArrow,"token-info":e.tokenInfo,"is-loading":e.isTokenLoading,onOnSelect:o[2]||(o[2]=$=>e.$emit("onSelect"))},null,8,["has-arrow","token-info","is-loading"])]),g("div",ye,[g("div",Se,[e.inputValue&&e.amountPirce!="--"&&(Number(e.amountPirce)>0||e.amountPirce=="<$0.01")&&e.isShowAmountPrice&&!e.inputLoading?(d(),_("div",we,L(e.amountPirce!=="<$0.01"?`$${("formatNumber"in e?e.formatNumber:B(q))(e.amountPirce)}`:`${e.amountPirce}`),1)):(d(),_("div",Be,[e.inputLoading?(d(),I(u,{key:0,class:"rate-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):A("",!0)]))]),g("div",Ce,[g("span",Te,[Ve,e.assetsLoading?(d(),I(u,{key:0,class:"token-loading-skeleton",loading:!0,active:"",paragraph:!1})):(d(),_("span",Ne,L(e.wallet.connected?("addCommom"in e?e.addCommom:B(m))(e.balance,e.coinDecimals):"0"),1))]),e.haveHalf&&e.wallet.connected?(d(),I(C,{key:0,"token-info":e.tokenInfo,onOnHalf:e.halfBtnSelect},null,8,["token-info","onOnHalf"])):A("",!0),e.haveMax&&e.wallet.connected?(d(),I(T,{key:1,"token-info":e.tokenInfo,onOnMax:e.maxBtnSelect},null,8,["token-info","onOnMax"])):A("",!0)])])])}const ze=O(be,[["render",Pe],["__scopeId","data-v-6b5871b1"]]);export{ze as T};
