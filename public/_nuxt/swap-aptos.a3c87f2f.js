import{_ as ga}from"./refresh-icon.8f303374.js";import{_ as wa}from"./assets-card.cdacb0e3.js";import{P as Ca,_ as ha,a as ba}from"./token-info.2160eea7.js";import{_ as Sa}from"./network-tips.16006507.js";import{_ as ka}from"./coin-select.3a099459.js";import{_ as ya}from"./swap-setting.7691c3a4.js";import{_ as Aa}from"./token-warning-modal.8ed9cb24.js";import{a as L,b as Ie,d as be,c as Ee,e as no,g as $a,p as Ao,h as Fe,M as Ia}from"./common.669f604e.js";import{a as Io,$ as Na,m as $,r as m,A as te,e as No,l as Ge,C as Oo,o as c,c as D,w as X,h as a,x as C,u as K,I as me,f as I,y as H,j as z,G as R,i as se,F as Pe,B as To,p as Ro,k as Mo,b as Oa,a2 as Ta,a3 as Ra,z as Ma,q as Fa,s as Pa,fg as $o,E as Ua,P as ja,O as Ba,Y as La,S as Ea}from"./entry.9ddfbff1.js";import{a as Fo,u as Po,e as qa,b as Da}from"./index.5370856a.js";import{i as qe}from"./import-icon.de3e6c66.js";import"./decimal.a2826370.js";import{D as v}from"./decimal.765d8738.js";import{_ as Wa}from"./within-error.d4038b33.js";import"./index.944397c1.js";/* empty css              *//* empty css              *//* empty css              */import{u as Ha,c as he,b as Ye}from"./index.5794af6a.js";import{A as za,R as Ja,c as Le,u as Ya}from"./confetti.module.60ee66a6.js";import{_ as Ga}from"./limit-beta.fad6a716.js";import{_ as Ka}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./token-warning.6c259fca.js";/* empty css              */import"./useDebounceFunction.96470e20.js";import"./current-price.3d354b9d.js";import"./coin-img.2ffa972e.js";import"./install.dbdc5148.js";import"./icon-tooltip.97152a6c.js";import"./token-warning_2x.8c8fc12d.js";import"./img-no-Positions_2x.3a69d882.js";import"./img-no-Positions_2x.6342285e.js";import"./icon-error_2x.033a6c87.js";import"./check-box.04084d9a.js";const Qa=Io({components:{Modal:Na,PriceImpactTooltip:Ca},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,default:0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,d){const V=Fo(),N=$(()=>V),J=Po(),ee=$(()=>J),r=S=>{var l;return(S==null?void 0:S.logoURI)||(S==null?void 0:S.logo_url)||((l=N.value.tokensObj[S==null?void 0:S.address])==null?void 0:l.logo_url)||(ee.value.theme==="default"?qe("/image/coins/unknown.png"):qe("/image/coins/sui-unknown.png"))},Q=m(!1),_=$(()=>ee.value.chainName),x=async()=>{d.emit("to-swap")};m([]);const ce=m(0),Y=m(""),oe=m(""),fe=$(()=>ee.value.slippage);te(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,fe.value],([S,l,u,E,M,g])=>{if(S&&l&&u&&E&&g)if(M){const j=new v(l).mul(new v(g/100));oe.value=new v(l).sub(j).toString()}else{const j=new v(S).mul(new v(g/100));Y.value=new v(S).add(j).toString()}},{immediate:!0});const ue=m(""),Se=$(()=>{var S,l,u,E,M,g,j,ie,h,B,G,n;return(u=(l=N==null?void 0:N.value)==null?void 0:l.tokensObj[(S=e==null?void 0:e.fromCoin)==null?void 0:S.address])!=null&&u.pyth_id&&((g=(M=N==null?void 0:N.value)==null?void 0:M.tokensObj[(E=e==null?void 0:e.fromCoin)==null?void 0:E.address])==null?void 0:g.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(h=(ie=N==null?void 0:N.value)==null?void 0:ie.tokensObj[(j=e==null?void 0:e.fromCoin)==null?void 0:j.address])!=null&&h.coingecko_id?"coingecko":(n=(G=N==null?void 0:N.value)==null?void 0:G.tokensObj[(B=e==null?void 0:e.fromCoin)==null?void 0:B.address])!=null&&n.birdeyeid?"birdeye":null}),Ne=$(()=>{var S,l,u,E,M,g,j,ie,h,B,G,n;return(u=(l=N==null?void 0:N.value)==null?void 0:l.tokensObj[(S=e==null?void 0:e.toCoin)==null?void 0:S.address])!=null&&u.pyth_id&&((g=(M=N==null?void 0:N.value)==null?void 0:M.tokensObj[(E=e==null?void 0:e.toCoin)==null?void 0:E.address])==null?void 0:g.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(h=(ie=N==null?void 0:N.value)==null?void 0:ie.tokensObj[(j=e==null?void 0:e.toCoin)==null?void 0:j.address])!=null&&h.coingecko_id?"coingecko":(n=(G=N==null?void 0:N.value)==null?void 0:G.tokensObj[(B=e==null?void 0:e.toCoin)==null?void 0:B.address])!=null&&n.birdeyeid?"birdeye":null}),f=async()=>{const S=N.value.tokenExternalPriceObj[e.fromCoin.address],l=N.value.tokenExternalPriceObj[e.toCoin.address];if(S&&l){const u=new v(S).div(new v(l)),E=new v(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(u).div(u).mul(100);let M=Math.abs(Ie(E,2));u.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?ue.value="":ue.value=E>0&&E<=.01?"0.01":M}else ue.value=""},Oe=S=>{if(S<5)return"color-s";if(S>=5&&S<10)return"color-w";if(S>=10)return"color-e"};te(()=>[e.oneToAmount,N.value.tokenExternalPriceObj,_.value],([S,l,u])=>{S&&l&&!Ee(l)&&u!=="Aptos"&&f()},{immediate:!0,deep:!0});const F=m(!1);return{getCoinIcon:r,addCommom:L,sFixD:Ie,rateChange:Q,chainName:_,clickNextBtn:x,pathLength:ce,maximumSold:Y,minimumReceived:oe,decimalUi:be,getTextColor:Oe,priceExangeRate:ue,formCoinMarket:Se,toCoinMarket:Ne,readWithin:F}}});const ve=e=>(Ro("data-v-0661d092"),e=e(),Mo(),e),Xa=ve(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Za={class:"new-swap-contnet"},Va={class:"coin-info"},_a={class:"from-coin-info"},xa={class:"left"},en={class:"coin-amount"},on={class:"coin-symbol"},an={class:"right"},nn={class:"to-coin-info"},tn={class:"left"},sn={class:"coin-amount"},ln={class:"coin-symbol"},un={class:"right"},rn=ve(()=>a("div",{class:"to-swap-logo"},null,-1)),dn={class:"coin-rate"},mn={key:0,class:"coin-rate-box"},vn={class:"left"},cn=ve(()=>a("div",null,[a("svg",{class:"icon icon-up","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),fn=ve(()=>a("div",null,[a("svg",{class:"icon icon-down","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),pn=[cn,fn],gn={key:1,class:"coin-rate-box"},wn={class:"left"},Cn=ve(()=>a("div",null,[a("svg",{class:"icon icon-up","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),hn=ve(()=>a("div",null,[a("svg",{class:"icon icon-down","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),bn=[Cn,hn],Sn={key:2,class:"price-impact"},kn=ve(()=>a("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),yn=[kn],An=ve(()=>a("br",null,null,-1)),$n={class:"bottom"},In={class:"induction"},Nn={class:"item"},On={class:"induction-text"},Tn={class:"induction-value"},Rn={class:"item"},Mn={class:"induction-text"},Fn={class:"induction-value"},Pn={class:"item"},Un={class:"induction-text"},jn={key:0,class:"item"},Bn={class:"induction-text"},Ln={key:0,class:"induction-value"},En={key:1,class:"induction-value"},qn={key:0,class:"within-desc"},Dn=ve(()=>a("div",{class:"within-top"},[a("img",{src:Wa,alt:""}),a("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Wn={class:"within-bottom"},Hn={key:0,class:"price-updated"},zn=ve(()=>a("span",null,"Price updated",-1));function Jn(e,d,V,N,J,ee){const r=Ge("PriceImpactTooltip"),Q=To,_=Ge("Modal"),x=Oo("image");return c(),D(_,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:d[7]||(d[7]=ce=>e.$emit("on-close"))},{closeIcon:X(()=>[Xa]),default:X(()=>{var ce;return[a("div",Za,[a("div",Va,[a("div",_a,[a("div",xa,[a("div",en,C(e.fromCoinAmount&&("addCommom"in e?e.addCommom:K(L))(e.fromCoinAmount)),1),a("div",on,C(e.fromCoin&&e.fromCoin.symbol),1)]),a("div",an,[me(a("img",null,null,512),[[x,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),a("div",nn,[a("div",tn,[a("div",sn,C(e.toCoinAmount&&("addCommom"in e?e.addCommom:K(L))(e.toCoinAmount)),1),a("div",ln,C(e.toCoin&&e.toCoin.symbol),1)]),a("div",un,[me(a("img",null,null,512),[[x,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),rn]),a("div",dn,[e.rateChange?(c(),I("div",gn,[a("div",wn,[me(a("img",null,null,512),[[x,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),a("span",null,"1 "+C(e.toCoin&&e.toCoin.symbol)+" ≈",1),me(a("img",null,null,512),[[x,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),a("span",null,C(e.oneFromAmount)+" "+C(e.fromCoin.symbol),1)]),a("div",{class:"right",onClick:d[1]||(d[1]=Y=>e.rateChange=!e.rateChange)},bn)])):(c(),I("div",mn,[a("div",vn,[me(a("img",null,null,512),[[x,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),a("span",null,"1 "+C(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),me(a("img",null,null,512),[[x,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),a("span",null,C(e.oneToAmount)+" "+C(e.toCoin.symbol),1)]),a("div",{class:"right",onClick:d[0]||(d[0]=Y=>e.rateChange=!e.rateChange)},pn)])),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(c(),I("div",Sn,[(c(),I("svg",{class:H(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},yn,2)),a("span",{class:H(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),a("span",{class:H(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[z("Price Impact Alert."),An,z(" Be cautious before submitting your order.")],2)])):R("",!0)])]),a("div",$n,[a("div",In,[a("div",Nn,[a("div",On,C(e.$t("modal.slippageTolerance")),1),a("div",Tn,C(e.slippage)+"%",1)]),a("div",Rn,[a("div",Mn,C(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),a("div",Fn,C(e.fixedFromCoin?("addCommom"in e?e.addCommom:K(L))(("sFixD"in e?e.sFixD:K(Ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:K(L))(("sFixD"in e?e.sFixD:K(Ie))(e.maximumSold,e.fromCoin.decimals)))+" "+C(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),a("div",Pn,[a("div",Un,[z(" Price Impact "),se(r,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),a("div",{class:H(["induction-value",String(e.impact)==="Incalculable"?"impact-w":e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[e.chainName=="Aptos"?(c(),I(Pe,{key:0},[z(C(e.impact<.01?"<0.01":e.impact>100?">100":e.impact)+"% ",1)],64)):String(e.impact)=="Incalculable"?(c(),I(Pe,{key:1},[z(" Incalculable ")],64)):(c(),I(Pe,{key:2},[z(C(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(ce=String(e.impact))==null?void 0:ce.replace("-","")}`)+"% ",1)],64))],2)]),e.chainName=="Aptos"?(c(),I("div",jn,[a("div",Bn,C(e.$t("common.fee")),1),e.chainName=="Aptos"?(c(),I("div",Ln,C(e.formatFee)+" "+C(e.fromCoin.symbol)+" ("+C(e.fee*100)+"%) ",1)):(c(),I("div",En,C(e.fee)+" "+C(e.fromCoin.symbol),1))])):R("",!0)])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(c(),I("div",qn,[Dn,a("div",Wn,[a("div",{class:H(["within-btn",e.readWithin?"within-btn-active":""]),onClick:d[2]||(d[2]=Y=>e.readWithin=!0)}," Yes, please continue. ",2),a("div",{class:"within-btn",onClick:d[3]||(d[3]=Y=>e.$emit("on-close"))},"No, cancel it.")])])):R("",!0)]),e.isShowAccept?(c(),I("div",Hn,[zn,se(Q,{class:"accept-btn",loading:e.swapLoading,onClick:d[4]||(d[4]=Y=>e.$emit("accept"))},{default:X(()=>[z("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(c(),D(Q,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:d[5]||(d[5]=Y=>e.clickNextBtn())},{default:X(()=>[z(C(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):e.chainName=="Aptos"?(c(),D(Q,{key:2,class:"big-btn swap-confirm-btn",onClick:d[6]||(d[6]=Y=>e.clickNextBtn())},{default:X(()=>[z(C(e.$t("button.confirmSwap")),1)]),_:1})):R("",!0)]}),_:1},8,["title"])}const Yn=No(Qa,[["render",Jn],["__scopeId","data-v-0661d092"]]),Gn=Io({components:{AggregatorSettingModal:za,RouterModal:Ja},setup(){const e=Oa(),d=Ta(Ra,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:V,locale:N}=Ma(),J=Po(),ee=Fo(),r=$(()=>ee);let Q=m(!1),_=m(!0),x=m(!1),ce=m(!1),Y=m(!1),oe=m(!1);const fe=m("fromCoin"),ue=m(""),Se=m(""),Ne=m(!1),f=m(!0),Oe=m(!1),F=m(!1),S=m(!1),l=m(""),u=m(""),E=m(20),M=m(0),g=m(null),j=m(!1),ie=$(()=>J.slippage),h=$(()=>J.chainName),B=$(()=>h.value?Da(h.value):{}),G=$(()=>Ya()),n=m(),s=m(),Ke=$(()=>he&&he[h.value]&&he[h.value].hasRouter),to=$(()=>ee.getPoolInfoSuccess),Uo=$(()=>{var o;return k.value&&((o=k.value)!=null&&o.is_pause)?"Pool Closed":!n.value||!s.value?V("modal.selectTokenModalTitle"):!Number(l.value)&&!Number(u.value)?V("button.enterAmount"):!Ke.value&&!k.value&&to.value?"Pool Not Found":Ke.value&&Re.value?"No Available Route":j.value?V("button.insufficientLiquidity"):Number(l.value)>Number(ne.value)?V("button.insufficientBalance",{name:n.value.symbol}):V("button.swap")}),jo=o=>{var i,t,w,p;fe.value=o,o==="fromCoin"?(ue.value=((i=s.value)==null?void 0:i.address)||"",Se.value=((t=n.value)==null?void 0:t.address)||""):(ue.value=((w=n.value)==null?void 0:w.address)||"",Se.value=((p=s.value)==null?void 0:p.address)||""),Ne.value=!0},Qe=m({}),Xe=m({}),Bo=o=>{fe.value==="fromCoin"?(Qe.value=o,xe(o)):(Xe.value=o,xe(o))},Lo=o=>{o==="fromCoin"?(f.value=!0,h.value==="Aptos"?l.value=ne.value>0?n.value.symbol=="APT"?new v(Number(ne.value)).sub(new v(.1)).lt(new v(0))?"0":new v(Number(ne.value)).sub(new v(.1)).toString():String(ne.value):"":l.value=ne.value>0?n.value.symbol=="SUI"?new v(Number(ne.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(ne.value)).sub(new v(.05)).toString():String(ne.value):""):(f.value=!1,h.value==="Aptos"?u.value=le.value>0?s.value.symbol=="APT"?new v(Number(le.value)).sub(new v(.1)).lt(new v(0))?"0":new v(Number(le.value)).sub(new v(.1)).toString():String(le.value):"":u.value=le.value>0?s.value.symbol=="SUI"?new v(Number(le.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(le.value)).sub(new v(.05)).toString():String(le.value):"")},Eo=o=>{o==="fromCoin"?(f.value=!0,l.value=ne.value>0?Ie(new v(Number(ne.value)).div(2).toString(),n.value.decimals).toString():""):(f.value=!1,u.value=le.value>0?Ie(new v(Number(le.value)).div(2).toString(),s.value.decimals).toString():"")},Ze=m(!1);Fa(()=>{so(),window.addEventListener("updateSwapParams",o=>{Ze.value=!Ze.value})}),Pa(()=>{clearInterval(g.value)});const Ve=$(()=>J),ke=async o=>{h.value=="Aptos"?qo(o):oo()},pe=m(!1),_e=()=>{_.value||!k.value&&!Ke.value||(clearInterval(g.value),ee.setPoolConfigList(Ve.value.chainName,Ve.value.filterCoinsObj),M.value=0,_.value=!0,k.value&&ee.updateCurrentPools(k.value.poolAddress,h.value),pe.value||ke(f.value?l.value:u.value),ae.value.address&&B.value.getAccount(ae.value.address),J.getStatsData(h.value,Ve.value.filterCoinsObj),setTimeout(()=>{_.value=!1,so()},1e3))},so=()=>{g.value=setInterval(()=>{_.value=!1,Oe.value||M.value<E.value&&(M.value+=1,M.value===E.value&&(h.value=="Aptos"?(k.value&&k.value.poolAddress&&ee.updateCurrentPools(k.value.poolAddress,h.value),_e()):oe.value||_e(),M.value=0,_.value=!0))},1e3)};te(f,$o((o,i)=>{f.value=o},500));const ye=m(!1);te(l,(o,i)=>{o&&o!==0&&f.value&&(M.value=0,ze(ke(o),800)),o==""&&f.value&&(u.value="")}),te(u,(o,i)=>{o&&o!==0&&!f.value&&(M.value=0,ze(ke(o),800)),o==""&&!f.value&&(l.value="")});const De=m(1e-4),We=async o=>{let i=o;if(h.value==="Aptos"&&!i.current_sqrt_price&&l.value&&u.value){const t=await B.value.getPools([i.address]);t&&t[0]&&(i={...o,...t[0],fee:Number(t[0].fee_rate)/1e6})}if(i.current_sqrt_price&&l.value&&u.value){const w=(n.value.address===i.coinA.address&&s.value.address===i.coinB.address?0:1)==0,p=new v(l.value),A=new v(u.value),O=p.sub(p.mul(new v(i.fee))),b=A.div(O);return B.value.getPriceImpactPct(i,b.toString(),w)}return"--"},io=m(0),lo=m(0),uo=m(),Te=m({}),qo=async o=>{if(k.value&&(pe.value=!0,!(f.value&&Number(l.value)==0)&&!(!f.value&&Number(u.value)==0))){if(n.value&&s.value&&(l.value||u.value)){F.value=!0,S.value=!0,j.value=!1;const i=n.value.address===k.value.coinA.address&&s.value.address===k.value.coinB.address?0:1;try{let t=await B.value.preSwap({pool:k.value,a2b:i==0,byAmountIn:f.value,amount:f.value?l.value:u.value});j.value=t==null?void 0:t.isExceed,uo.value=t==null?void 0:t.estimatedFeeAmount,f.value?(u.value=t.estimatedAmountOut,we.value=(Number(t.estimatedAmountOut)/o).toString(),ge.value=(o/Number(t.estimatedAmountOut)).toString()):(l.value=t.estimatedAmountIn,we.value=(o/Number(t.estimatedAmountIn)).toString(),ge.value=(Number(t.estimatedAmountIn)/o).toString()),io.value=new v(u.value).div(l.value).toString(),lo.value=new v(l.value).div(u.value).toString(),De.value=h.value=="Aptos"?await We(k.value):await We(Te.value||k.value),F.value=!1,S.value=!1}catch(t){console.log("pre swap error1",t),F.value=!1,S.value=!1}}else f.value?u.value="":l.value="",F.value=!1,S.value=!1;pe.value=!1}},Do=Ha(),ae=$(()=>Do),Wo=m({}),ge=m(""),we=m(""),ne=$(()=>ae.value.assets&&n.value&&ae.value.assets[n.value.address]?Ao(ae.value.assets[n.value.address].balance,n.value.decimals):0),le=$(()=>ae.value.assets&&s.value&&ae.value.assets[s.value.address]?Ao(ae.value.assets[s.value.address].balance,s.value.decimals):0);te(()=>r.value.tokensObj,async o=>{if(o&&!Ee(o)){const i=e?e.currentRoute.value.query.to:"",t=e?e.currentRoute.value.query.from:"";t?n.value=o[t]||await B.value.getTokenBySymbol(o,t):!t&&!n.value&&(n.value=o[he[h.value].swapDefaultPair.fromCoin]),i?s.value=o[i]||await B.value.getTokenBySymbol(o,i):!i&&!s.value&&(s.value=o[he[h.value].swapDefaultPair.toCoin],console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ newValue:",o),console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",he[h.value].swapDefaultPair.toCoin)),!t&&i&&(n.value="")}},{immediate:!0});const k=$(()=>{var o,i,t,w,p;if(n.value&&s.value){let A=null,O={};if(Object.values(r.value.poolConfigList).forEach(y=>{var T,P,U,W;(y.coinA.address.toUpperCase()===((T=n.value.address)==null?void 0:T.toUpperCase())&&y.coinB.address.toUpperCase()===((P=s.value.address)==null?void 0:P.toUpperCase())||y.coinB.address.toUpperCase()===((U=n.value.address)==null?void 0:U.toUpperCase())&&y.coinA.address.toUpperCase()===((W=s.value.address)==null?void 0:W.toUpperCase()))&&(O[y.address]={...y})}),h.value=="Aptos"&&r.value.poolsObj&&!Ee(r.value.poolsObj))for(const y in r.value.poolsObj){const T=r.value.poolsObj[y];(T.token_a.address.toUpperCase()===((o=n.value.address)==null?void 0:o.toUpperCase())&&T.token_b.address.toUpperCase()===((i=s.value.address)==null?void 0:i.toUpperCase())||T.token_b.address.toUpperCase()===((t=n.value.address)==null?void 0:t.toUpperCase())&&T.token_a.address.toUpperCase()===((w=s.value.address)==null?void 0:w.toUpperCase()))&&(O[T.address]={...T})}const b=Object.values(O).sort((y,T)=>y.fee-T.fee);for(let y=0;y<b.length;y++)if(!((p=b[y])!=null&&p.is_pause)){A=b[y];break}return A&&!Ee(A)?(console.log("🚀🚀🚀 ~ file: swap.vue:1094 ~ poolInfo ~ info:",A),A):null}return null}),ro=m(!0),mo=m(!1),Ho=async o=>{o&&h.value=="Aptos"&&(ke(f.value?l.value:u.value),mo.value=!0,o.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&o.coinB.symbol.toLowerCase()===s.value.symbol.toLowerCase()?ro.value=!0:ro.value=!1,j.value=!1)};te(()=>k.value,(o,i)=>{o&&(!i||o.address!==i.address||o.current_sqrt_price!==i.current_sqrt_price)&&Ho(o)},{immediate:!0,deep:!0});const zo=$(()=>r.value.tokensObj&&n.value&&n.value.address&&r.value.tokensObj[n.value.address]&&r.value.tokensObj[n.value.address].logoURI),Jo=$(()=>r.value.tokensObj&&s.value&&s.value.address&&r.value.tokensObj[s.value.address]&&r.value.tokensObj[s.value.address].logoURI),Yo=$(()=>h.value==="Aptos"?r.value.tokensObj&&n.value&&n.value.address&&r.value.tokensObj[n.value.address]&&r.value.tokensObj[n.value.address].coingecko_id||null:r.value.tokensObj&&n.value&&n.value.address||null),Go=$(()=>h.value==="Aptos"?r.value.tokensObj&&s.value&&s.value.address&&r.value.tokensObj[s.value.address]&&r.value.tokensObj[s.value.address].coingecko_id||null:r.value.tokensObj&&s.value&&s.value.address||null),Ko=$(()=>{var o,i,t,w,p,A,O,b,y,T,P,U,W;return console.log("🚀🚀🚀 ~ file: swap.vue:1222 ~ formCoinMarket ~ pools?.value?.tokensObj:",(o=r==null?void 0:r.value)==null?void 0:o.tokensObj),(w=(t=r==null?void 0:r.value)==null?void 0:t.tokensObj[(i=n==null?void 0:n.value)==null?void 0:i.address])!=null&&w.pyth_id&&((O=(A=r==null?void 0:r.value)==null?void 0:A.tokensObj[(p=n==null?void 0:n.value)==null?void 0:p.address])==null?void 0:O.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(T=(y=r==null?void 0:r.value)==null?void 0:y.tokensObj[(b=n==null?void 0:n.value)==null?void 0:b.address])!=null&&T.coingecko_id?"coingecko":(W=(U=r==null?void 0:r.value)==null?void 0:U.tokensObj[(P=n==null?void 0:n.value)==null?void 0:P.address])!=null&&W.birdeyeid?"birdeye":null}),Qo=$(()=>{var o,i,t,w,p,A,O,b,y,T,P,U;return(t=(i=r==null?void 0:r.value)==null?void 0:i.tokensObj[(o=s==null?void 0:s.value)==null?void 0:o.address])!=null&&t.pyth_id&&((A=(p=r==null?void 0:r.value)==null?void 0:p.tokensObj[(w=s==null?void 0:s.value)==null?void 0:w.address])==null?void 0:A.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(y=(b=r==null?void 0:r.value)==null?void 0:b.tokensObj[(O=s==null?void 0:s.value)==null?void 0:O.address])!=null&&y.coingecko_id?"coingecko":(U=(P=r==null?void 0:r.value)==null?void 0:P.tokensObj[(T=s==null?void 0:s.value)==null?void 0:T.address])!=null&&U.birdeyeid?"birdeye":null}),Xo=$(()=>{var w,p;const o=new v(l.value),i=new v(h.value=="Aptos"?(w=k==null?void 0:k.value)==null?void 0:w.fee:(p=Te==null?void 0:Te.value)==null?void 0:p.fee),t=o.mul(i).toString();return Number(t)<1/Math.pow(10,n.value.decimals)?`<${new v(1).div(new v(Math.pow(10,n.value.decimals))).toString()}`:Ie(t,n.value.decimals)}),{setIsShowSuccess:Zo,setIsShowRejected:vo,setIsShowWaiting:He,setTransactionDesc:Vo,setTransactionTxid:co}=J,_o=async()=>{var i,t,w,p,A,O,b,y,T;oe.value=!1,F.value=!0,clearInterval(je),window.clearInterval(je),co(""),Vo(V("tips.swapping",{from:`${L(l.value)} ${(i=n.value)==null?void 0:i.symbol}`,to:`${L(u.value)} ${(t=s.value)==null?void 0:t.symbol}`})),He(!0);let o;h.value=="Aptos"&&(o=n.value.address===k.value.token_a.address&&s.value.address===k.value.token_b.address?0:1);try{let P;if(h.value=="Aptos")P=await B.value.getSwapTransactionPayload({pool:k.value,a2b:o==0,byAmountIn:f.value,amount:f.value?l.value:u.value,slippage:Number(ie.value)/100});else{const W=f.value,Ce=Number(ie.value)/100;P=await((w=G==null?void 0:G.value)==null?void 0:w.getRouterSwapPayload(q.value,W,Ce,n,s))}console.log("0221####swap###swapPayload###",P);let U;if(h.value==="Aptos")U=await ae.value.currentWallet.signAndSubmitTransaction(P);else{const W=await B.value.signAndExecuteTransactionBlock(ae.value.currentWallet,P);console.log("0221###sui swap res###",W),U=B.value.handleTx(W),console.log("0221###swap###sui##tx###",U)}if(U&&U.hash){co(U.hash),He(!1),Zo(!0);const W={title:V("tips.swap"),desc:V("tips.swapSuccessText",{from:`${L(l.value)} ${(p=n.value)==null?void 0:p.symbol}`,to:`${L(u.value)} ${(A=s.value)==null?void 0:A.symbol}`}),hash:U.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:n.value.address==he[h.value].currentChainTokenAddress||s.value.address==he[h.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(O=n.value)==null?void 0:O.address}`,numa:`- ${l.value}`,logoa:r.value.tokensObj&&n.value&&n.value.address&&r.value.tokensObj[n.value.address]&&r.value.tokensObj[n.value.address].logoURI,tokenb:`${(b=s.value)==null?void 0:b.address}`,numb:`+ ${u.value}`,logob:r.value.tokensObj&&s.value&&s.value.address&&r.value.tokensObj[s.value.address]&&r.value.tokensObj[s.value.address].logoURI},text:`Pay ${l.value} ${(y=n.value)==null?void 0:y.symbol} to receive ${u.value} ${(T=s.value)==null?void 0:T.symbol}`};h.value!=="Aptos"&&(W.res=U.res),B.value.showTransitionPending(W);const Ce=await B.value.watchTransaction(W);console.log("0221###swap###transitionStatus####",Ce),Ce&&setTimeout(()=>{h.value=="Aptos"&&ee.updateCurrentPools(k.value.poolAddress,h.value),B.value.getAccount(ae.value.address)},1e3)}else He(!1),vo(!0);l.value="",u.value="",F.value=!1}catch(P){l.value="",u.value="",console.log("Swap Error###",P),F.value=!1,He(!1),vo(!0)}},xo=o=>{var i;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((i=r.value.tokensObj[o==null?void 0:o.address])==null?void 0:i.logo_url)||(J.theme==="default"?qe("/image/coins/unknown.png"):qe("/image/coins/sui-unknown.png"))},fo=m([]);te(()=>[n.value,s.value,r.value.poolConfigList],([o,i,t])=>{if(t&&t.length>0&&o&&i){const w=[];t.forEach(p=>{var A,O,b,y;(p.coinA.address.toUpperCase()===((A=o.address)==null?void 0:A.toUpperCase())&&p.coinB.address.toUpperCase()===((O=i.address)==null?void 0:O.toUpperCase())||p.coinB.address.toUpperCase()===((b=o.address)==null?void 0:b.toUpperCase())&&p.coinA.address.toUpperCase()===((y=i.address)==null?void 0:y.toUpperCase()))&&(p!=null&&p.is_pause||w.push(p.address))}),fo.value=w}},{immediate:!0});const xe=o=>{console.log("🚀 ~ getTokenSource ~ token:",o);const i=J.importTokenListObj;console.log("🚀🚀🚀 ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(i!=null&&i.hasOwnProperty(o==null?void 0:o.address))),o!=null&&o.isSelfBuilt&&!(i!=null&&i.hasOwnProperty(o==null?void 0:o.address))?eo.value=!0:(fe.value==="fromCoin"?(l.value="",s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null),n.value=o):(n.value&&(u.value="",o.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null)),s.value=o),po())},eo=m(!1),po=()=>{Xe.value={},Qe.value={},eo.value=!1},ea=$(()=>J.isShowRouterModal),Ue=m([]),go=m(""),oa=m(!1),wo=qa();$(()=>wo);const Re=m(!1),q=m({}),aa=m(""),na=m(),oo=async o=>{var i,t;if(console.log("🚀🚀🚀 ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),pe.value=!0,n.value&&s.value&&(Number(l.value)>0&&f.value||Number(u.value)>0&&!f.value)){console.log("🚀🚀🚀 ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!l.value&&u.value||l.value&&!u.value)&&(F.value=!0),ge.value="",we.value="",ye.value=!0,Re.value=!1;let w;k.value&&(w=n.value.address===k.value.coinA.address&&s.value.address===k.value.coinB.address?0:1);try{let p;if(f.value){const y=new v(l.value).mul(Math.pow(10,n.value.decimals)).toString();p=new Ye(y)}else{const y=new v(u.value).mul(Math.pow(10,s.value.decimals)).toString();p=new Ye(y)}const A=Number(ie.value)/100,O=k.value?{poolAddresses:fo.value,coinTypeA:k.value.coin_a_address,coinTypeB:k.value.coin_b_address,decimalsA:k.value.coinA.decimals,decimalsB:k.value.coinB.decimals,a2b:w==0,byAmountIn:f.value,amount:p.toString()}:"";console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ fromCoin:",n),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ toCoin:",s),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ coinAmount:",p),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",f.value);const b=await((i=G==null?void 0:G.value)==null?void 0:i.getFindRouter(n,s,p.toString(),f.value,A,k.value?O:""));if(console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ swapRouter:",b),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ swapRouter JSON:",JSON.stringify(b,null,2)),!b||!(b!=null&&b.routes)||((t=b==null?void 0:b.routes)==null?void 0:t.length)==0){F.value=!1,Re.value=!0,ye.value=!1,pe.value=!1,q.value={},Ue.value=[],l.value?u.value="":l.value="";return}if(b.fromCoinAddress!==n.value.address||b.toCoinAddress!==s.value.address){console.log("🚀🚀🚀 ~ file: swap.vue:1861 ~ getSuiAmount ~",b.fromCoinAddress!==n.value.address||b.toCoinAddress!==s.value.address),q.value={},Ue.value=[];return}b?(q.value=b,Ue.value=b.routes,j.value=!1,f.value?l.value&&(u.value=new v(b.amountOut).div(new v(Math.pow(10,s.value.decimals))).toString()):u.value&&(l.value=new v(b.amountIn).div(new v(Math.pow(10,n.value.decimals))).toString()),console.log(u.value,"###toCoinAmount.value"),ge.value=L(be(new v(l.value).div(new v(u.value).toString()),n.value.decimals)),we.value=L(be(new v(u.value).div(l.value).toString(),s.value.decimals)),F.value=!1,Re.value=!1,ye.value=!1):(F.value=!1,Re.value=!0,ye.value=!1)}catch(p){console.log("pre swap error2",p),F.value=!1,ye.value=!1,pe.value=!1}}else f.value?u.value="":l.value="",F.value=!1,ye.value=!1;pe.value=!1,console.log("🚀🚀🚀 ~ file: swap.vue:1926 ~ getSuiAmount ~ isRoutrProgress.value:",pe.value)},Ae=m(!1),Co=async o=>{var i;try{let t;if(f.value){const A=new v(l.value).mul(Math.pow(10,n.value.decimals)).toString();t=new Ye(A)}else{const A=new v(u.value).mul(Math.pow(10,s.value.decimals)).toString();t=new Ye(A)}const w=Number(ie.value)/100,p=await((i=G==null?void 0:G.value)==null?void 0:i.getFindRouter(n,s,t.toString(),f.value,w,""));if(p){q.value=p,Ue.value=p.routes,j.value=!1,go.value=p.amountIn,ge.value=L(be(new v(l.value).div(new v(u.value).toString()),n.value.decimals)),we.value=L(be(new v(u.value).div(l.value).toString(),s.value.decimals));const A=new v(p.amountOut).div(new v(Math.pow(10,s.value.decimals))).toString(),O=new v(p.amountIn).div(new v(Math.pow(10,n.value.decimals))).toString();f.value?u.value!==A&&(Ae.value=!0,u.value=A):l.value!==O&&(Ae.value=!0,l.value=O)}}catch(t){console.log("pre swap error3",t)}},ta=async o=>{if(n.value&&s.value&&(l.value||u.value)){const i=n.value.address===k.value.coinA.address&&s.value.address===k.value.coinB.address?0:1;try{let t=await B.value.preSwap({pool:k.value,a2b:i==0,byAmountIn:f.value,amount:f.value?l.value:u.value});j.value=t==null?void 0:t.isExceed,uo.value=t==null?void 0:t.estimatedFeeAmount,f.value?(we.value=(Number(t.estimatedAmountOut)/t.estimatedAmountIn).toString(),ge.value=(t.estimatedAmountIn/Number(t.estimatedAmountOut)).toString()):(we.value=(Number(t.estimatedAmountOut)/Number(t.estimatedAmountIn)).toString(),ge.value=(Number(t.estimatedAmountIn)/Number(t.estimatedAmountOut)).toString()),f.value?u.value!==t.estimatedAmountOut&&(Ae.value=!0,u.value=t.estimatedAmountOut):l.value!==t.estimatedAmountIn&&(Ae.value=!0,l.value=t.estimatedAmountIn),De.value=h.value=="Aptos"?await We(k.value):await We(Te.value||k.value),F.value=!1,S.value=!1}catch(t){console.log("pre swap error4",t),F.value=!1,S.value=!1}}else F.value=!1,S.value=!1};let je=m(null);te(()=>oe.value,o=>{o?je.value=setInterval(()=>{h.value=="Aptos"?ta(f.value):Co(f.value)},3e3):(clearInterval(je.value),window.clearInterval(je.value))},{immediate:!0}),te(()=>Ze.value,o=>{(Number(l.value)>0||Number(u.value)>0)&&ke(f.value?l.value:u.value)},{immediate:!0});const sa=$(()=>wo),ho=$(()=>sa.value.isInitRouter);te(()=>ho.value,o=>{o||(M.value=0,ke(f.value?l.value:u.value))},{immediate:!0});function ze(o,i=500){let t=null;return function(...w){clearTimeout(t),t=setTimeout(()=>{o.call(this,...w)},i)}}te(()=>[n.value,s.value],([o,i])=>{if(console.log("🚀🚀🚀 ~ file: swap.vue:2181 ~ setup ~ fromCoin && toCoin:",o&&i),o&&i&&(M.value=0,ze(ke(f.value?l.value:u.value))),o||i){console.log("🚀🚀🚀 ~ file: swap.vue:1965 ~ setup ~ fromCoin:",o);const t=`/swap?from=${o==null?void 0:o.address}&to=${i==null?void 0:i.address}`;e.push(t)}},{immediate:!0,deep:!0});const ia=ze(bo);function bo(){const o=n.value;n.value=s.value,s.value=o,Q.value=!0,$e.value?f.value=!0:f.value=!f.value,f.value?(l.value=u.value,u.value=""):(u.value=l.value,l.value=""),setTimeout(()=>{Q.value=!1},300)}const la=()=>{Ae.value=!1},ua=()=>{oe.value=!1,Ae.value=!1},ra=[{label:"Swap",link:"/swap"},{label:"Limit",link:"/limit"}],da=m("Swap"),So=m(!1),ao=$(()=>{var o,i,t,w,p,A,O,b,y,T,P,U,W;try{if((o=n==null?void 0:n.value)!=null&&o.address&&((i=s==null?void 0:s.value)!=null&&i.address)&&(q!=null&&q.value)&&!Ee(q==null?void 0:q.value)){const Ce=Fe((t=q==null?void 0:q.value)==null?void 0:t.amountIn).div(Math.pow(10,(w=n.value)==null?void 0:w.decimals)),pa=Fe((p=q==null?void 0:q.value)==null?void 0:p.amountOut).div(Math.pow(10,(A=s.value)==null?void 0:A.decimals)),Be=Fe(pa).div(Ce);console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",Be==null?void 0:Be.toString());const re=(y=(O=r==null?void 0:r.value)==null?void 0:O.RATES)==null?void 0:y[(b=n==null?void 0:n.value)==null?void 0:b.address];console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",re);const de=(U=(T=r==null?void 0:r.value)==null?void 0:T.RATES)==null?void 0:U[(P=s==null?void 0:s.value)==null?void 0:P.address];if(console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",de),!(re!=null&&re.price)||!(de!=null&&de.price)||Fe(re==null?void 0:re.price).lte(0)||Fe(de==null?void 0:de.price).lte(0))throw Error("rate invalid");const Je=Fe(re==null?void 0:re.price).div(de==null?void 0:de.price);console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",Je==null?void 0:Je.toString());const Me=Be.minus(Je).div(Be).mul(100);return console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ result:",Me==null?void 0:Me.toString()),Ia((W=Me==null?void 0:Me.abs())==null?void 0:W.toString(),2)}return}catch(Ce){return console.log("🚀🚀🚀 ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",Ce),"Incalculable"}}),ma=$(()=>(h==null?void 0:h.value)==="Aptos"?De.value:ao==null?void 0:ao.value),$e=m(!0),va=$(()=>J.liquiditySourceList),ca=o=>{console.log("🚀 ~ modalConfirm ~ result121:",o),o&&o.length>0?o.every(t=>t.name=="Cetus"?!0:t.status==="close")?$e.value=!1:$e.value=!0:$e.value=!1,So.value=!1},fa=$(()=>J.includeRoutes),ko=o=>{$e.value=!$e.value,console.log("🚀 ~ clickChecked ~ checked:",o);const i=fa.value,t=va.value;t.forEach(w=>{o?w.status="open":w.name!=="Cetus"?w.status="close":w.status="open"}),console.log("🚀 ~ //clickCheckedresult ~ arr:",t,i),J.setAggregatorSetting(t,i)},yo=()=>{const o=window.innerWidth,i=window.innerHeight,t=document.getElementById("plusModeSwitch"),w=t==null?void 0:t.getBoundingClientRect(),p=w==null?void 0:w.left,A=w==null?void 0:w.top;console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ x:",p),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ y:",A),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportWidth:",o),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportHeight:",i);const O=2,b=Le.shapeFromText({text:"🟢",scalar:O}),y=Le.shapeFromText({text:"🔵",scalar:O}),T=Le.shapeFromText({text:"💚",scalar:O}),P=Le.shapeFromText({text:"💙",scalar:O});Le({particleCount:40,spread:60,shapes:[b,y,T,P],scalar:O,origin:{x:p/o,y:A*1.2/i}})};return{modalConfirm:ca,clickChecked:ko,currentTradeTab:da,plusChecked:$e,closeSwapConfirmModal:ua,updateAccept:la,clickExchange:bo,debounceClickExchange:ia,closeTokenWarning:po,isShowTokenWarning:eo,getTokenSource:xe,hasPool:mo,getPoolInfoSuccess:to,halfBtnSelect:Eo,formCoinId:Yo,toCoinId:Go,formCoinMarket:Ko,toCoinMarket:Qo,fromCoinUrl:zo,toCoinUrl:Jo,t:V,indicator:d,wallet:ae,currentLpInfo:Wo,fixD:no,decimalFormat:$a,impact:De,oneFromAmount:ge,oneToAmount:we,importIcon:qe,clickRefresh:_e,refresh:_,change:Q,isShowAddress:x,isShowSwapSetting:ce,fromCoin:n,toCoin:s,slippage:ie,openCoinSelect:jo,onCoinSelect:Bo,existingCoins:ue,lastSelectCoin:Se,currentCoinKey:fe,showCoinSelect:Ne,fromCoinAmount:l,toCoinAmount:u,maxBtnSelect:Lo,fixedFromCoin:f,swapBtnText:Uo,toSwap:_o,loading:Oe,swaping:F,autoRefreshTime:E,countdown:M,marketTimer:g,rateChange:Y,isSwapConfirmMpdal:oe,fromCoinBlance:ne,toCoinBlance:le,poolInfo:k,chainName:h,swapRouterLoading:ye,formatFee:Xo,calculating:S,currentRate:io,currentRateReverse:lo,getCoinIcon:xo,toAddLiquidiPoolInfo:Te,decimalUi:be,warningToCoin:Xe,warningFromCoin:Qe,isShowRouterModal:ea,toSwapLoading:oa,insufficientLiquidity:j,routerPool:Ue,routerTotalAmounts:go,store:J,suiPreSwapdata:q,suiSwapFee:na,suiSwapFeeUi:aa,addCommom:L,debounce:$o,notFoundRouter:Re,getSuiAmountAccept:Co,isShowAccept:Ae,getSuiAmount:oo,tradeTabList:ra,isInitSwapRouter:ho,isShowAggregatorModal:So,priceImpact:ma,triggerConfettiAnimation:yo,handleSwitchPlusMode:o=>{console.log("🚀🚀🚀 ~ file: swap.vue:2264 ~ handleSwitchPlusMode ~ value:",o),l.value="",u.value="",o&&yo(),ko(o),setTimeout(()=>{oo()},500)}}}});const Z=e=>(Ro("data-v-4c6a9974"),e=e(),Mo(),e),Kn={class:"swap-container"},Qn={class:"left"},Xn=["onClick"],Zn={key:0,src:Ga,class:"beta",alt:""},Vn={class:"right title-right"},_n=Z(()=>a("div",{class:"price-reference-text"}," The Plus Mode will aggregate external liquidity sources ",-1)),xn={key:0,class:H("icon-bg plus-switch")},et=Z(()=>a("p",null,[a("span",null,"Plus Mode"),z(" 🔥")],-1)),ot={class:"setting-right"},at=Z(()=>a("div",{class:"new-style-tooltip-text"},"Swap Settings",-1)),nt=Z(()=>a("svg",{"aria-hidden":"true",class:"icon"},[a("use",{"xlink:href":"#icon-icon_set"})],-1)),tt=[nt],st=Z(()=>a("div",{class:"new-style-tooltip-text"},"Slippage Settings",-1)),it=Z(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),lt={class:"swap-card"},ut={class:"card-container"},rt=Z(()=>a("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),dt=[rt],mt={key:1,class:"induction"},vt={key:0,class:"exchange-rate-btn"},ct={key:0},ft={key:0},pt={key:0},gt={key:1},wt={key:0},Ct=Z(()=>a("div",null,[a("svg",{class:"icon icon-up","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ht=Z(()=>a("div",null,[a("svg",{class:"icon icon-down","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),bt=[Ct,ht],St={class:"item"},kt={class:"induction-text"},yt={key:0,class:"icon","aria-hidden":"true"},At=Z(()=>a("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),$t=[At],It={class:"item"},Nt={class:"induction-text"},Ot={key:0,class:"induction-value"},Tt={class:"item"},Rt={class:"induction-text"},Mt={key:0,class:"induction-value"},Ft={key:0,class:"icon","aria-hidden":"true"},Pt=Z(()=>a("use",{"xlink:href":"#icon-icon-swap"},null,-1)),Ut=[Pt],jt={key:2,class:"token-info-container"},Bt={class:"token-info-title"},Lt=Z(()=>a("span",{class:"coingecko"},"Price Reference",-1)),Et=Z(()=>a("div",{class:"price-reference-text"}," The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ",-1)),qt=Z(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon_tips"})],-1));function Dt(e,d,V,N,J,ee){var E,M;const r=La,Q=ja,_=ga,x=wa,ce=ha,Y=Ba,oe=Ea,fe=To,ue=Sa,Se=ka,Ne=ya,f=ba,Oe=Aa,F=Ge("RouterModal"),S=Yn,l=Ge("AggregatorSettingModal"),u=Oo("image");return c(),I("div",Kn,[a("div",{class:H(e.chainName=="Sui"?"sui-title swap-title":"swap-title")},[a("div",Qn,[e.chainName=="Sui"?(c(!0),I(Pe,{key:0},Ua(e.tradeTabList,g=>(c(),I("div",{key:g,class:H(["trade-tab",e.currentTradeTab==g.label?"trade-tab-active":""]),onClick:j=>e.$router.push(g.link)},[z(C(g.label)+" ",1),g.label=="Limit"?(c(),I("img",Zn)):R("",!0)],10,Xn))),128)):(c(),I(Pe,{key:1},[z(C(e.$t("menu.swap")),1)],64))]),a("div",Vn,[se(Q,{"overlay-class-name":"price-impact-tooltip"},{title:X(()=>[_n]),default:X(()=>[e.chainName=="Sui"?(c(),I("div",xn,[et,se(r,{id:"plusModeSwitch",class:"liquidity-switch",checked:e.plusChecked,onClick:d[0]||(d[0]=g=>{e.handleSwitchPlusMode(g)})},null,8,["checked"])])):R("",!0)]),_:1}),a("div",ot,[e.chainName=="Sui"?(c(),I("div",{key:0,class:"aggregator-setting",onClick:d[1]||(d[1]=g=>e.isShowAggregatorModal=!0)},[se(Q,{"overlay-class-name":"new-style-tooltip"},{title:X(()=>[at]),default:X(()=>[a("div",{class:H(e.chainName=="Sui"?"icon-bg":"")},tt,2)]),_:1})])):R("",!0),se(Q,{"overlay-class-name":"new-style-tooltip"},{title:X(()=>[st]),default:X(()=>[a("div",{class:"slippage-icon",onClick:d[2]||(d[2]=g=>e.isShowSwapSetting=!0)},[a("div",{class:H(e.chainName=="Sui"?"icon-bg":"")},[it,a("span",null,C(e.slippage)+"%",1)],2)])]),_:1}),a("div",{class:H(e.chainName=="Sui"?"icon-bg":"")},[se(_,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])],2)])])],2),a("div",lt,[a("div",ut,[a("div",{class:H(["card-item",!e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[se(x,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":d[3]||(d[3]=g=>e.fromCoinAmount=g),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From","swap-loading":!e.fixedFromCoin&&e.swapRouterLoading,onOnMax:d[4]||(d[4]=g=>e.maxBtnSelect("fromCoin")),onOnHalf:d[5]||(d[5]=g=>e.halfBtnSelect("fromCoin")),onOnInput:d[6]||(d[6]=g=>{e.fromCoinAmount=g,e.fixedFromCoin=!0}),onOnSelect:d[7]||(d[7]=g=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","swap-loading"])],2),a("div",{class:H(["card-item",e.fixedFromCoin&&e.swapRouterLoading?"card-item-mask":""])},[se(x,{modelValue:e.toCoinAmount,"onUpdate:modelValue":d[8]||(d[8]=g=>e.toCoinAmount=g),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,"input-disabled":e.chainName!=="Aptos"&&e.plusChecked,"swap-loading":e.fixedFromCoin&&e.swapRouterLoading,onOnInput:d[9]||(d[9]=g=>{e.toCoinAmount=g,e.fixedFromCoin=!1}),onOnSelect:d[10]||(d[10]=g=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","input-disabled","swap-loading"])],2),a("img",{class:H(e.change?"gang animationex":"gang"),src:Ka,alt:""},null,2),a("div",{class:H(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:d[11]||(d[11]=(...g)=>e.debounceClickExchange&&e.debounceClickExchange(...g))},[(c(),I("svg",{class:H(e.change?"icon animationex":"icon"),"aria-hidden":"true"},dt,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter&&e.fromCoin&&e.toCoin?(c(),D(ce,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"form-coin-market":e.formCoinMarket,"to-coin-market":e.toCoinMarket,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.priceImpact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","form-coin-market","to-coin-market","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(c(),I("div",mt,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(c(),I("div",vt,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(c(),I("span",gt,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(c(),I("span",wt,[me(a("img",null,null,512),[[u,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),z(" 1 "+C(e.toCoin.symbol)+" ≈ ",1),me(a("img",null,null,512),[[u,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),a("span",null,C(("addCommom"in e?e.addCommom:K(L))(("decimalUi"in e?e.decimalUi:K(be))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),z("  "+C(e.fromCoin.symbol),1)])):(c(),D(Y,{key:1,indicator:e.indicator},null,8,["indicator"]))])):R("",!0):(c(),I("span",ct,[me(a("img",null,null,512),[[u,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),z(" 1 "+C(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(c(),I("span",ft,[me(a("img",null,null,512),[[u,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?R("",!0):(c(),I("span",pt,C(("addCommom"in e?e.addCommom:K(L))(("decimalUi"in e?e.decimalUi:K(be))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(c(),D(Y,{key:1,indicator:e.indicator},null,8,["indicator"])):R("",!0),z("  "+C(e.toCoin.symbol),1)])):(c(),D(Y,{key:1,indicator:e.indicator},null,8,["indicator"]))])),a("div",{class:"icon-change",onClick:d[12]||(d[12]=g=>e.rateChange=!e.rateChange)},bt)])):R("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(c(),I(Pe,{key:1},[a("div",St,[a("div",kt,C(e.$t("common.priceImpact")),1),e.swaping?(c(),D(oe,{key:1,paragraph:!1,active:""})):(c(),I("div",{key:0,class:H(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[z(C(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(c(),I("svg",yt,$t)):R("",!0)],2))]),a("div",It,[a("div",Nt,C(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(c(),D(oe,{key:1,paragraph:!1,active:""})):(c(),I("div",Ot,C(e.fixedFromCoin?("addCommom"in e?e.addCommom:K(L))(("fixD"in e?e.fixD:K(no))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:K(L))(("fixD"in e?e.fixD:K(no))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+C(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),a("div",Tt,[a("div",Rt,C(e.$t("common.fee")),1),e.swaping?(c(),D(oe,{key:1,paragraph:!1,active:""})):(c(),I("div",Mt,C(("addCommom"in e?e.addCommom:K(L))(e.formatFee,e.fromCoin.decimals))+" "+C(e.fromCoin.symbol)+" ("+C(e.chainName=="Aptos"?e.poolInfo.fee*100:((E=e.toAddLiquidiPoolInfo)==null?void 0:E.fee)*100)+"%) ",1))])],64)):R("",!0)])):R("",!0)]),se(fe,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((M=e.poolInfo)==null?void 0:M.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.swaping,onClick:d[13]||(d[13]=g=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:X(()=>[e.wallet.connected?(c(),I("svg",Ft,Ut)):R("",!0),a("span",null,C(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),se(ue),e.showCoinSelect?(c(),D(Se,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:d[14]||(d[14]=g=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):R("",!0),e.isShowSwapSetting?(c(),D(Ne,{key:1,onOnClose:d[15]||(d[15]=g=>e.isShowSwapSetting=!1)})):R("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(c(),I("div",jt,[a("div",Bt,[Lt,se(Q,{"overlay-class-name":"price-impact-tooltip",placement:"top","arrow-point-at-center":""},{title:X(()=>[Et]),default:X(()=>[qt]),_:1})]),e.fromCoin&&e.formCoinMarket?(c(),D(f,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):R("",!0),e.toCoin&&e.toCoinMarket?(c(),D(f,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):R("",!0)])):R("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(c(),D(Oe,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):R("",!0),e.isShowRouterModal?(c(),D(F,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:d[16]||(d[16]=g=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):R("",!0),e.isSwapConfirmMpdal?(c(),D(S,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.priceImpact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):R("",!0),e.isShowAggregatorModal?(c(),D(l,{key:6,onClose:d[17]||(d[17]=g=>e.isShowAggregatorModal=!1),onModalConfirm:d[18]||(d[18]=g=>{e.modalConfirm(g)})})):R("",!0)])}const ys=No(Gn,[["render",Dt],["__scopeId","data-v-4c6a9974"]]);export{ys as default};
