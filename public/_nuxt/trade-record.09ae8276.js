import{_ as ga}from"./token-warning.7014f9c6.js";import{m as y,C as Ha,D as Ua,r as f,W as Da,G as ae,a as _e,q as jt,o as u,f as g,h as e,t as se,i as E,v as i,x as F,u as a,H as ot,z as q,S as St,p as Te,k as Ie,e as me,c as B,w as z,j as P,P as Qt,Z as Zt,B as ut,U as Fa,V as ja,l as Ba,y as za,E as Wa,a5 as qt,b as Ja,a0 as Dt,O as wt,a3 as Ya,J as Vt,F as V,s as Le,Q as Xt,L as ya}from"./entry.1afe32c4.js";/* empty css              */import{_ as qa}from"./img-no-data_2x.0e488b28.js";import{D as h}from"./decimal.0bdeb344.js";import{c as U,s as Va,a as Ka,u as Ue,aI as Ga,i as Ae,j as ra,aJ as ve,k as Ve,h as A,aK as ua,t as Ge,aL as It}from"./index.c41a185a.js";import{u as kt,b as ft,c as Bt,p as ca,g as ea}from"./pool.83f6439f.js";import{_ as Qa}from"./token-warning-modal.08fbfc75.js";/* empty css              *//* empty css              */import{_ as Za}from"./img-leverage_2x.1c577303.js";import{_ as Xa}from"./refresh-icon.b25f9e4c.js";import{_ as da}from"./assets-card.63e9b367.js";import{C as es}from"./coin-select.1f300d63.js";import{T as ts}from"./trade-menu-tab.71e41ab0.js";import{u as as}from"./useSuiAggregator.7adf1542.js";/* empty css              */import{_ as ss}from"./img-no-Positions_2x.51b74fe4.js";import{_ as ns}from"./img-connect-wallet_2x.6e648e87.js";import{S as ls}from"./data.712deea2.js";function He(t){const c={fullRpcUrl:localStorage.getItem(`${t}-currentRpclocal6`)||U[t||"Sui"].fullRpcUrl,simulationAccount:U[t||"Sui"].simulationAccount,cetus_config:U[t||"Sui"].cetus_config,clmm_pool:U[t||"Sui"].clmm_pool,integrate:U[t||"Sui"].integrate,deepbook:U[t||"Sui"].deepbook,deepbook_endpoint_v2:U[t||"Sui"].deepbook_endpoint_v2,aggregatorUrl:U[t||"Sui"].aggregatorUrl,swapCountUrl:U[t||"Sui"].swapCountUrl},o={launchpad:U[t||"Sui"].launchpad,ido:U[t||"Sui"].ido,xcetus:U[t||"Sui"].xcetus,xcetus_dividends:U[t||"Sui"].xcetus_dividends,cetus_faucet:U[t||"Sui"].cetus_faucet,xtoken:U[t||"Sui"].xtoken,xtoken_dividends:U[t||"Sui"].xtoken_dividends,token_faucet:U[t||"Sui"].token_faucet,booster:U[t||"Sui"].booster,maker_bonus:U[t||"Sui"].maker_bonus,liquidity_stratefy:U[t||"Sui"].liquidity_stratefy,vaults:U[t||"Sui"].vaults,frams:U[t||"Sui"].frams,limit_order:U[t||"Sui"].limit_order};console.log("defaultNetworkOptions####",c);const _=new Va(c),p=new Ka(o,_),k=Ue(),m=y(()=>k);Ha(()=>{m.value.address&&(_.senderAddress=m.value.address)});const d=async()=>await p.LimitOrder.getLimitOrderTokenList(),n=async()=>await p.LimitOrder.getLimitOrderPoolList(),x=async()=>{try{return await p.LimitOrder.getOwnerLimitOrderList(p.ClmmSDK.senderAddress,"all")}catch($){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useLimitOrder.ts:71 ~ getOwnerLimitOrderList ~ error:",$)}},S=$=>({transactionBlock:$,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),s=async $=>{const{pay_coin_amount:O,price:L,expired_ts:W,pay_coin_type:j,target_coin_type:C,pay_decimal:ne,target_decimal:pe}=$,re=new h(O).mul(Math.pow(10,ne)).toNumber();console.log("useLimitOrder placeLimitOrder params##",$);const le=await p.LimitOrder.placeLimitOrder({pay_coin_amount:re,price:L,expired_ts:W,pay_coin_type:j=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":j,target_coin_type:C=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":C,pay_decimal:ne,target_decimal:pe});return console.log("useLimitOrder placeLimitOrder payload##",le),S(le)},T=async $=>{console.log("cancelOrdersByOwner params",$);const O=await p.LimitOrder.cancelOrdersByOwner($);return S(O)},M=async $=>await p.LimitOrder.getLimitOrderLogs($),I=async $=>{const O=await p.LimitOrder.claimTargetCoin({order_id:$.order_id,pay_coin_type:$.pay_coin_type,target_coin_type:$.target_coin_type});return S(O)},r=async $=>await p.LimitOrder.getLimitOrderClaimLogs($);return{getLimitOrderTokenList:d,getLimitOrderPoolList:n,getOwnerLimitOrderList:x,placeLimitOrder:s,rateToPrice:Ga.rateToPrice,cancelOrdersByOwner:T,getLimitOrderLogs:M,claimTargetCoin:I,getLimitOrderClaimLogs:r}}const Mt="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Me=Ua("LimitOrder",{state:()=>({limitTokenList:[],limitTokenObj:{},limitOrderPoolList:[],limitOrderList:[],orderNum:0,orderListLoading:!1,limitTokenMinAmountObj:{},limitOrderHistoryList:[],historyNum:0,orderHistoryObj:{},cancelOrderId:"",orderHistoryLoading:!1,currentOrderClaimHistory:[],claimHistoryLoading:!0,RATES:{},marketPriceLoading:!0,haveMarket:!0,isShowChart:JSON.parse(localStorage.getItem("isShowChart"))||!1}),actions:{async getTokenMinAmount(){const c=await He("Sui").getLimitOrderTokenList();this.limitTokenMinAmountObj=Object.fromEntries(c.map((o,_)=>[o.coin_type==Mt?"0x2::sui::SUI":o.coin_type,o])),console.log(c,"store limitorder getLimitgetTokenMinAmount###")},async getPoolList(){const c=await He("Sui").getLimitOrderPoolList();this.limitOrderPoolList=c.map(o=>({indexer_id:o.indexer_id,pay_coin_type:o.pay_coin_type==Mt?"0x2::sui::SUI":o.pay_coin_type,target_coin_type:o.target_coin_type==Mt?"0x2::sui::SUI":o.target_coin_type})),console.log(c,"store limitorder getLimitOrderPoolList###")},async getOrderList(){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:42 ~ getOrderList ~ getOrderList:");const t=He("Sui");this.orderListLoading=!0;try{const c=await t.getOwnerLimitOrderList();console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:46 ~ getOrderList ~ result:",c);const o=c.data.filter(_=>_.status=="PartialCompleted"||_.status=="Running")||[];this.limitOrderList=o.sort((_,p)=>p.created_ts-_.created_ts),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:52 ~ getOrderList ~ this.limitOrderList:",this.limitOrderList),this.orderListLoading=!1,this.cancelOrderId=""}catch(c){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:53 ~ getOrderList ~ e:",c),this.orderListLoading=!1,this.cancelOrderId=""}},async getTokenList(){const c=(await fetch(`${U.Sui.api}/v2/sui/coin_metadata`,{method:"POST",body:JSON.stringify({})}).then(o=>o.json())).data.list||[];this.limitTokenList=c,this.limitTokenObj=Object.fromEntries(c.map((o,_)=>[o.coin_type==Mt?"0x2::sui::SUI":o.coin_type,o])),console.log(c,"store limitorder getLimitOrderTokenList###")},async getLimitOrderLogs(){},async getLimitOrderHistory(t){this.orderHistoryLoading=!0;const{data:c}=await fetch(`${U.Sui.api}/v2/sui/limit_order?wallet_address=${t}`).then(_=>_.json()),o=c.list||[];this.limitOrderHistoryList=o||[],this.orderHistoryLoading=!1},async getLimitOrderClaimHistory(t){this.currentOrderClaimHistory=[],this.claimHistoryLoading=!0;const o=await He("Sui").getLimitOrderClaimLogs(t.id);this.currentOrderClaimHistory=o.map(_=>{const p=new h(_.parsedJson.claimed_amount).div(Math.pow(10,t.target_coin_info.decimals));return{..._,..._.parsedJson,claimed_amount:p}}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:105 ~ getLimitOrderClaimHistory ~ currentOrderClaimHistory:",this.currentOrderClaimHistory),this.claimHistoryLoading=!1},setOrderNum(t){this.orderNum=t},setHistoryNum(t){this.historyNum=t},setLimitOrderLoading(t){this.cancelOrderId=t},async setRates(t){this.marketPriceLoading=!0;let c={};if(t&&t.includes("Sui"))try{c=await $fetch(`${U.Sui.api}/v2/sui/price`)}catch(p){console.log("sui pric api error ###",p),c={data:{prices:ls}}}else c=await $fetch(`${U.Aptos.api}/v2/price`);const o=c.data.prices||[],_=[];o.forEach(p=>{p.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?_.push({...p},{...p,base_symbol:"0x2::sui::SUI"}):_.push(p)}),this.RATES=Object.fromEntries(_.map(p=>[p.base_symbol,p])),this.marketPriceLoading=!1},setHaveMarket(t){this.haveMarket=t},setIsShowChart(t){localStorage.setItem("isShowChart",JSON.stringify(t)),this.isShowChart=t},limitOrderLogOut(){this.limitOrderHistoryList=[],this.limitOrderList=[]}}}),b=f(),w=f(),is=kt(),ba=y(()=>is),wa=ft(),os=y(()=>wa),va=y(()=>os.value.chainName),Oe=Bt("Sui"),rs=Da(),$a=f(!0);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:53 ~ route:",rs);ae(()=>[ba.value.tokensObj,$a.value],async([t,c])=>{if(!Ae(t)){const o=ra("from"),_=ra("to");console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:61 ~ routerCoinTo:",o,_),o&&_?b.value=t[o]||await Oe.getTokenBySymbol(t,o):!o&&!b.value&&(b.value=t[U[va.value].swapDefaultPair.fromCoin]),o&&_?w.value=t[_]||await Oe.getTokenBySymbol(t,_):!_&&!w.value&&(w.value=t[U[va.value].swapDefaultPair.toCoin])}},{});const{setTransactionTxid:us,setIsShowWaiting:Et,setIsShowSuccess:cs,setIsShowRejected:_a,setTransactionDesc:ds}=wa,ma=f(!1),lt=Me(),ta=y(()=>lt),vs=y(()=>ta.value.limitOrderList),_s=Ue(),Gt=y(()=>_s),aa=async(t,c=!1)=>{const o=He("Sui");try{ds("Canceling order"),Et(!0);const p=c?vs.value.map(n=>({order_id:n.id,pay_coin_type:n.pay_coin_type,target_coin_type:n.target_coin_type})):[{order_id:t.id,pay_coin_type:t.pay_coin_type,target_coin_type:t.target_coin_type}];lt.setLimitOrderLoading(c?"all":t.id),console.log("cacelLimitOrder parmas",p);const k=await o.cancelOrdersByOwner(p),m=await Oe.signAndExecuteTransactionBlock(Gt.value.currentWallet,k),d=Oe.handleTx(m);if(d&&d.hash){us(d.hash),Et(!1),cs(!0),ma.value=!1;const n={title:"Transaction",desc:"Order cancelled successfully",hash:d.hash,icon:"icon-icon-Increased"};n.res=d.res,Oe.showTransitionPending(n),await Oe.watchTransaction(n)&&setTimeout(()=>{Oe.getAccount(Gt.value.address),lt.getOrderList()},2e3)}else Et(!1),_a(!0),lt.setLimitOrderLoading("")}catch(_){Et(!1),_a(!0),ma.value=!1,lt.setLimitOrderLoading(""),console.log("trade-data.ts cancel error##",_)}},Ft=f(!1),J=f(!0),R=f(),N=f();function pa(){Ft.value=!0;const t=b.value;b.value=w.value,w.value=t,J.value=!J.value;const c=R.value,o=N.value;J.value?(R.value=N.value,N.value=c):(N.value=R.value,R.value=o),setTimeout(()=>{Ft.value=!1},300)}ae(()=>$a.value,()=>{R.value="",N.value=""},{immediate:!0});const vt=f("orders"),it=f(1),Nt=f(10),Q=f([]),$t=f([]),ms=f(1),_t=f(),bt=y(()=>ta.value.limitOrderList),Pt=y(()=>ba.value.tokensObj),ps=He("Sui"),mt=f(),hs=t=>{mt.value={...mt.value,[t.id]:t}},Kt=f(!1),ha=y(()=>ta.value.cancelOrderId),fs=async()=>{const t=Nt.value*it.value-Nt.value;let c=it.value*Nt.value;c=c>bt.value.length?bt.value.length:c;const o=bt.value;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:147 ~ updateOrderList ~ ordersList.value:",bt.value),console.log("trade-card updateOrderList tokenObj",Pt.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:257 ~ updateOrderList ~ orderDirectObj.value:",mt.value),o.length>0){const _=[],p=o.filter((m,d)=>d>=t&&d<c);for(let m=0;m<p.length;m++){const d=p[m];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:176 ~ updateOrderList ~ order.pay_coin_type:",await Oe.getTokenListByCoinType[d.pay_coin_type]);const n=Pt.value[d.pay_coin_type]||(await Oe.getTokenListByCoinType([d.pay_coin_type]))[0],x=Pt.value[d.target_coin_type]||(await Oe.getTokenListByCoinType([d.target_coin_type]))[0];console.log(d,"order###"),console.log(n.decimals,"##pay_coin_info.decimals");const S=ve(ps.rateToPrice(d.rate,n.decimals,x.decimals).toString(),n.decimals),s=new h(d.total_pay_amount).div(Math.pow(10,n.decimals)).toString(),T=new h(d.total_pay_amount).mul(new h(Math.pow(10,18))).div(new h(d.rate)).ceil().div(new h(Math.pow(10,x.decimals))).toString(),M=new h(d.total_pay_amount).mul(new h(S)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:166 ~ updateOrderList ~ totalBuyNum:",T,M);const I=new h(d.obtained_amount).div(Math.pow(10,x.decimals)).toString(),r=Ve(new h(I).div(new h(T)).mul(100).toString(),2),$=new h(d.target_balance).div(Math.pow(10,x.decimals)).toString(),O=ve(new h(1).div(new h(S)).toString());console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:217 ~ updateOrderList ~ new Decimal(1).div(new Decimal(rate)).toString():",new h(1).div(new h(S)).toString()),_.push({...d,pay_coin_info:n,target_coin_info:x,total_pay_amount:s,rate:S,totalBuyNum:T,obtained_amount:I,obtainedRatio:r,target_balance:$,reseverRate:O,direction:mt.value&&mt.value[d.id]&&mt.value[d.id].direction||!1})}Q.value=_,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:255 ~ updateOrderList ~ pageList.value:",Q.value),ms.value==1;const k=_.filter(m=>{var d;return m.id==((d=_t==null?void 0:_t.value)==null?void 0:d.id)});_t.value=k&&k.length>0?k[0]:""}$t.value=o,lt.setOrderNum(o.length),console.log("allList",$t.value),console.log("pageList",Q.value)};ae(()=>[bt.value,it.value,Pt.value,Gt.value.address],([t,c,o,_])=>{t&&t.length>0&&o&&!Ae(o)&&_?fs():(Q.value=[],$t.value=[],lt.setOrderNum(0))},{immediate:!0});const gs=t=>(Te("data-v-49c8994a"),t=t(),Ie(),t),ys={class:"switch-direction"},bs={class:"left"},ws={key:0,class:"token-info"},$s={key:0},xs={key:1,class:"token-info"},Ss={alt:""},ks={alt:""},Cs={key:0,class:"chart-no-data"},Os=gs(()=>e("img",{src:qa,alt:""},null,-1)),Ls=["src","onload"],Ts=_e({__name:"trade-chart",setup(t){const c=f(!0);f(!0),f(),f(),f();const o=Me(),_=y(()=>o);y(()=>_.value.RATES),y(()=>_.value.marketPriceLoading);const p=y(()=>_.value.haveMarket);f(),f();const k=ft(),m=y(()=>k),d=y(()=>m.value.addressLpTokens),n=kt(),x=y(()=>n),S=y(()=>x.value.openPool),s=f(),T=()=>{var I;const M=[];if((I=S==null?void 0:S.value)==null||I.forEach(r=>{var $,O,L,W,j,C,ne,pe;if(r.coinA.address.toUpperCase()===((O=($=b==null?void 0:b.value)==null?void 0:$.address)==null?void 0:O.toUpperCase())&&r.coinB.address.toUpperCase()===((W=(L=w==null?void 0:w.value)==null?void 0:L.address)==null?void 0:W.toUpperCase())||r.coinB.address.toUpperCase()===((C=(j=b==null?void 0:b.value)==null?void 0:j.address)==null?void 0:C.toUpperCase())&&r.coinA.address.toUpperCase()===((pe=(ne=w==null?void 0:w.value)==null?void 0:ne.address)==null?void 0:pe.toUpperCase())){const re=(d==null?void 0:d.value[r.address])||{};re&&!Ae(re)&&M.push({...r,pure_tvl_in_usd:re.pure_tvl_in_usd})}}),M&&M.length>0){const r=M.sort(($,O)=>$.pure_tvl_in_usd-O.pure_tvl_in_usd)[0];return s.value=r,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-chart.vue:327 ~ poolInfo ~ result:",r),!1}s.value=null};return ae(()=>[S.value,d.value,b.value,w.value],([M,I])=>{M&&M.length>0&&I&&!Ae(I)&&T()},{immediate:!0}),(M,I)=>{var L,W,j,C,ne,pe,re,le,Fe,he,Z,X,ye,$e,be,Ee,ue,fe,xe,et,ce,tt,je,at,Se,st,Be,nt,Re,Y,ze,ee,ie,de,We,te,ge,Je,Ne;const r=ga,$=St,O=jt("image");return u(),g("div",{class:q(["trade-chart",!c.value&&!s.value?"trade-chart-no-pool":""])},[e("div",ys,[e("div",bs,[s.value?(u(),g("div",ws,[e("div",null,[se(e("img",null,null,512),[[O,(L=s.value)!=null&&L.needReverse?(j=(W=s.value)==null?void 0:W.token_b)==null?void 0:j.logo_url:(ne=(C=s.value)==null?void 0:C.token_a)==null?void 0:ne.logo_url]]),E(r,{address:(pe=s.value)!=null&&pe.needReverse?(le=(re=s.value)==null?void 0:re.token_b)==null?void 0:le.address:(he=(Fe=s.value)==null?void 0:Fe.token_a)==null?void 0:he.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[se(e("img",null,null,512),[[O,(Z=s.value)!=null&&Z.needReverse?(ye=(X=s.value)==null?void 0:X.token_a)==null?void 0:ye.logo_url:(be=($e=s.value)==null?void 0:$e.token_b)==null?void 0:be.logo_url]]),E(r,{address:(Ee=s.value)!=null&&Ee.needReverse?(fe=(ue=s.value)==null?void 0:ue.token_a)==null?void 0:fe.address:(et=(xe=s.value)==null?void 0:xe.token_b)==null?void 0:et.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),s.value?(u(),g("span",$s,i((ce=s.value)!=null&&ce.needReverse?(je=(tt=s.value)==null?void 0:tt.token_b)==null?void 0:je.symbol:(Se=(at=s.value)==null?void 0:at.token_a)==null?void 0:Se.symbol)+" / "+i((st=s.value)!=null&&st.needReverse?(nt=(Be=s.value)==null?void 0:Be.token_a)==null?void 0:nt.symbol:(Y=(Re=s.value)==null?void 0:Re.token_b)==null?void 0:Y.symbol),1)):F("",!0)])):a(b)&&a(w)?(u(),g("div",xs,[e("div",null,[se(e("img",Ss,null,512),[[O,(ze=a(b))==null?void 0:ze.logo_url]]),E(r,{address:(ee=a(b))==null?void 0:ee.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[se(e("img",ks,null,512),[[O,(ie=a(w))==null?void 0:ie.logo_url]]),E(r,{address:(de=a(w))==null?void 0:de.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,i((We=a(b))==null?void 0:We.symbol)+" / "+i((te=a(w))==null?void 0:te.symbol),1)])):F("",!0)])]),!c.value&&!s.value?(u(),g("div",Cs,[Os,e("span",null,i(p.value?"Price chart is currently not available for this pair, but you can still place your limit orders.":"No data avaliable"),1)])):F("",!0),se(e("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",src:`https://birdeye.so/tv-widget/${(Je=(ge=s.value)==null?void 0:ge.token_a)==null?void 0:Je.address}/${(Ne=s.value)==null?void 0:Ne.address}?chain=sui`,onload:()=>{c.value=!1}},null,8,Ls),[[ot,!c.value&&s.value]]),se(E($,null,null,512),[[ot,c.value]])],2)}}});const Qo=me(Ts,[["__scopeId","data-v-49c8994a"]]),xa=t=>(Te("data-v-2c8f9476"),t=t(),Ie(),t),Is={class:"custom-expiry"},Ms={class:"input-box"},Es=xa(()=>e("div",{class:"minutes"},"Hours",-1)),Rs={class:"input-box"},Ns=xa(()=>e("div",{class:"minutes"},"Minutes",-1)),Ps=_e({__name:"custom-expires-modal",setup(t){const c=f(),o=f(),_=f({}),p=(n,x)=>{const S=(n||0)*60+Number(x||0),s=Math.floor(S/(60*24)),T=Math.floor(S%(60*24)/60),M=S%60;let I="";s>0&&(I+=s+"d "),T>0&&(I+=T+"h "),M>0&&(I+=M+"m "),_.value={timeText:I.trim()||"0 m",time:S*60*1e3}};ae(()=>[c.value,o.value],([n,x])=>{p(n,x)},{immediate:!0});const k=n=>{const x=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");n.target.value=n.target.value.replace(x,"$1"),c.value=n.target.value,console.log(c.value,"##inputChange")},m=n=>{const x=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");n.target.value=n.target.value.replace(x,"$1"),o.value=n.target.value},d=y(()=>!c.value&&!o.value||Number(c.value)==0&&!o.value||Number(o.value)==0&&!c.value||Number(c.value)==0&&Number(o.value)==0);return(n,x)=>{const S=Zt,s=ut;return u(),B(a(Qt),{title:"Custom Expiry Period",visible:!0,width:"440px",footer:null,onCancel:x[3]||(x[3]=T=>n.$emit("closeModal"))},{default:z(()=>[e("div",Is,[e("div",Ms,[E(S,{value:c.value,"onUpdate:value":x[0]||(x[0]=T=>c.value=T),placeholder:"0",onChange:k},null,8,["value"]),Es]),e("div",Rs,[E(S,{value:o.value,"onUpdate:value":x[1]||(x[1]=T=>o.value=T),placeholder:"0",onChange:m},null,8,["value"]),Ns]),E(s,{class:"set-period",disabled:d.value,onClick:x[2]||(x[2]=T=>n.$emit("sendTime",_.value))},{default:z(()=>[P("Set Period")]),_:1},8,["disabled"])])]),_:1})}}});const As=me(Ps,[["__scopeId","data-v-2c8f9476"]]),Qe=t=>(Te("data-v-8d8c006a"),t=t(),Ie(),t),Hs=Qe(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Us=[Hs],Ds={class:"trade-cofirm-content"},Fs={class:"coin-info"},js={class:"from-coin-info"},Bs={class:"left"},zs={class:"coin-amount"},Ws={class:"coin-symbol"},Js={class:"right"},Ys={class:"to-coin-info"},qs={class:"left"},Vs={class:"coin-amount"},Ks={class:"coin-symbol"},Gs={class:"right"},Qs=Qe(()=>e("div",{class:"to-swap-logo"},null,-1)),Zs={class:"trade-info"},Xs={class:"price"},en=Qe(()=>e("div",{class:"label"},"Pirce",-1)),tn={class:"text"},an={key:0},sn={key:1},nn=Qe(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),ln=Qe(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),on=[nn,ln],rn={class:"expires-in"},un=Qe(()=>e("div",{class:"label"},"Expires in",-1)),cn={class:"text"},dn=Qe(()=>e("div",{class:"trade-tips1"}," You will receive exactly what you have specified if your order is fully filled in the end. ",-1)),vn=Qe(()=>e("div",{class:"trade-tips2"}," Please note that your order may not be filled immediately after the price is triggered, depending on pending sequence and liquidity depth. ",-1)),_n=_e({__name:"trade-confirm",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},direction:{type:Boolean,default:!1},price:{type:String,default:""},currentExpires:{type:String,default:""}},emits:["to-trade","close"],setup(t,{emit:c}){const o=t,_=c,p=f(!1),k=y(()=>new h(1).div(new h(o.price)).toString()),m=async()=>{_("to-trade")};return(d,n)=>{const x=ut,S=jt("image");return u(),B(a(Qt),{title:"Review your order",width:"440px",footer:null,visible:!0,class:"trade-confirm-modal"},{closeIcon:z(()=>[(u(),g("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:n[0]||(n[0]=s=>_("close"))},Us))]),default:z(()=>{var s,T,M,I,r,$,O,L;return[e("div",Ds,[e("div",Fs,[e("div",js,[e("div",Bs,[e("div",zs,i(t.fromCoinAmount&&a(A)(t.fromCoinAmount)),1),e("div",Ws,i(t.fromCoin&&t.fromCoin.symbol),1)]),e("div",Js,[se(e("img",null,null,512),[[S,t.fromCoin&&t.fromCoin.logo_url]])])]),e("div",Ys,[e("div",qs,[e("div",Vs,i(t.toCoinAmount&&a(A)(t.toCoinAmount)),1),e("div",Ks,i(t.toCoin&&t.toCoin.symbol),1)]),e("div",Gs,[se(e("img",null,null,512),[[S,t.toCoin&&t.toCoin.logo_url]])]),Qs])]),e("div",Zs,[e("div",Xs,[en,e("div",tn,[t.direction?(u(),g("span",sn,i(a(A)(a(ve)(p.value?k.value:t.price,9)))+" "+i(p.value?($=t.fromCoin)==null?void 0:$.symbol:(r=t.toCoin)==null?void 0:r.symbol)+" per "+i(p.value?(L=t.toCoin)==null?void 0:L.symbol:(O=t.fromCoin)==null?void 0:O.symbol),1)):(u(),g("span",an,i(a(A)(a(ve)(p.value?k.value:t.price,9)))+" "+i(p.value?(T=t.toCoin)==null?void 0:T.symbol:(s=t.fromCoin)==null?void 0:s.symbol)+" per "+i(p.value?(I=t.fromCoin)==null?void 0:I.symbol:(M=t.toCoin)==null?void 0:M.symbol),1)),e("div",{class:"right",onClick:n[1]||(n[1]=W=>p.value=!p.value)},on)])]),e("div",rn,[un,e("div",cn,i(t.currentExpires),1)])]),dn,vn]),E(x,{class:"big-btn trade-confirm-btn",onClick:n[2]||(n[2]=W=>m())},{default:z(()=>[P(" Place Order ")]),_:1})]}),_:1})}}});const mn=me(_n,[["__scopeId","data-v-8d8c006a"]]),ct=t=>(Te("data-v-3bc7f496"),t=t(),Ie(),t),pn={class:"trade-card"},hn={class:"trade-content"},fn={class:"trade-card-title"},gn={class:"new-style-tooltip-text"},yn={class:"icon-bg"},bn=ct(()=>e("use",{"xlink:href":"#icon-icon_kline"},null,-1)),wn=[bn],$n={class:"icon-bg"},xn={class:"trade-card-content"},Sn={class:"card-item"},kn={class:"card-item"},Cn=ct(()=>e("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),On=[Cn],Ln={class:"sell-setting"},Tn={class:"sell-rate"},In={class:"top"},Mn={key:0,class:"direction-text"},En={key:1,class:"direction-text"},Rn={class:"bottom"},Nn={class:"coin-symbol"},Pn=ct(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),An=ct(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Hn=[Pn,An],Un={class:"top"},Dn=ct(()=>e("span",null,"Expiry in",-1)),Fn=ct(()=>e("use",{"xlink:href":"#icon-icon-tips2"},null,-1)),jn=[Fn],Bn={class:"bottom"},zn=ct(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Wn=[zn],Jn=["onClick"],Yn={class:"market-price-tips"},qn=_e({__name:"trade-card",setup(t){const c=Fa(ja,{style:{fontSize:"14px",marginLeft:"4px",color:"#75c8ff"},spin:!0}),{t:o}=Ba(),_=[{label:"Swap",link:"/swap"},{label:"Limit",link:"/limit"},{label:"DCA",link:"/dca",hasBeta:!0}],p=f("Limit"),k=Ue(),m=y(()=>k),d=y(()=>m.value.assets&&b.value&&m.value.assets[b.value.address]?ca(m.value.assets[b.value.address].balance,b.value.decimals):0),n=y(()=>m.value.assets&&w.value&&m.value.assets[w.value.address]?ca(m.value.assets[w.value.address].balance,w.value.decimals):0),x=v=>{v==="fromCoin"?(J.value=!0,R.value=d.value>0?b.value.symbol=="SUI"?new h(Number(d.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(d.value)).sub(new h(.05)).toString():String(d.value):""):(J.value=!1,N.value=n.value>0?w.value.symbol=="SUI"?new h(Number(n.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(n.value)).sub(new h(.05)).toString():String(n.value):"")},S=v=>{v==="fromCoin"?(J.value=!0,R.value=d.value>0?Ve(new h(Number(d.value)).div(2).toString(),b.value.decimals).toString():""):(J.value=!1,N.value=n.value>0?Ve(new h(Number(n.value)).div(2).toString(),w.value.decimals).toString():"")},s=f(""),T=f(""),M=f(""),I=f(!1),r=v=>{var l,D,K,oe;s.value=v,v==="fromCoin"?(T.value=((l=w.value)==null?void 0:l.address)||"",M.value=((D=b.value)==null?void 0:D.address)||""):(T.value=((K=b.value)==null?void 0:K.address)||"",M.value=((oe=w.value)==null?void 0:oe.address)||""),I.value=!0},$=["5 Minutes","10 Minutes","30 Minutes","1 Hour","1 Day","3 Days","7 Days","1 Month","Custom"],O=v=>{switch(v){case"5 Minutes":return 3e5;case"10 Minutes":return 6e5;case"30 Minutes":return 18e5;case"1 Hour":return 36e5;case"1 Day":return 864e5;case"3 Days":return 2592e5;case"7 Days":return 6048e5;case"1 Month":return 2592e6;default:return 0}},L=f(!1),W=f("7 Days"),j=f(!1),C=f(),ne=f(0),pe=v=>{W.value=v.timeText,ne.value=v.time,j.value=!1},re=f(),le=v=>{re.value=s.value==="fromCoin"?b.value:w.value;let l=!1;s.value==="fromCoin"?(R.value="",w.value&&v.address.toLowerCase()===(w==null?void 0:w.value.address.toLowerCase())&&(w.value=b.value,l=!0),b.value=v):(b.value&&(N.value="",v.address.toLowerCase()===(b==null?void 0:b.value.address.toLowerCase())&&(b.value=w.value,l=!0)),w.value=v),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:416 ~ onCoinSelect ~ toCoin.value:",w.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:453 ~ onCoinSelect ~ fromCoin.value:",b.value),l||(ee.value=!1),I.value=!1},Fe=f(20),he=f(0),Z=f(null),X=f(!1),ye=()=>{X.value||(clearInterval(Z.value),m.value.address&&(ce.getOrderList(),Y.getAccount(m.value.address)),de.value||te.value?Jt():Ot(!1),he.value=0,X.value=!0,setTimeout(()=>{X.value=!1,$e()},1e3))},$e=()=>{Z.value=setInterval(()=>{X.value=!1,he.value<Fe.value&&(he.value+=1,he.value===Fe.value&&ye())},1e3)};za(()=>{$e(),window.addEventListener("click",()=>{L.value=!1})}),Wa(()=>{clearInterval(Z.value)});const be=()=>{if(J.value&&(!R.value||R.value==0)||!J.value&&(!N.value||N.value==0))return!1;if(C.value<=0&&dt.value)return J.value?N.value="":R.value="",!1;if(Number(R.value)<=0&&Number(N.value)<=0)return!1;if(C.value<=0&&!dt.value&&R.value>0&&N.value>0)return console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:480 ~ updateAmounts ~ fromCoinAmount.value&&toCoinAmount.value:",R.value>0&&N.value>0),C.value=ee.value?ve(new h(N.value||0).div(new h(R.value||0)).toString()):ve(new h(R.value||0).div(new h(N.value||0)).toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:497 ~ updateAmounts ~ fixedFromCoin.value :",J.value),!1;if(C.value<=0&&!dt.value)return!1;J.value?ee.value?N.value=Ve(new h(R.value).mul(new h(C.value||0)).toString(),w.value.decimals):N.value=Ve(new h(R.value).div(new h(C.value||0)).toString(),w.value.decimals):ee.value?R.value=Ve(new h(N.value).div(new h(C.value||0)).toString(),b.value.decimals):R.value=Ve(new h(N.value).mul(new h(C.value||0)).toString(),b.value.decimals)};ae(R,qt((v,l)=>{v&&v!==0&&J.value&&be(),v==""&&J.value&&(N.value="")},100)),ae(C,qt((v,l)=>{v&&v!==0&&be(),v==""&&J.value&&(N.value="")},100)),ae(N,qt((v,l)=>{v&&v!==0&&!J.value&&be(),v==""&&!J.value&&(R.value="")},100));const Ee=kt(),ue=y(()=>Ee),fe=y(()=>{var K;const l=(K=ue.value.RATES[b.value.address])==null?void 0:K.price,D=new h(l||0).mul(R.value||0).toNumber();if(l){if(D<5&&l)return!0}else return!1;return!1}),xe=y(()=>!b.value||!w.value?o("modal.selectTokenModalTitle"):Ne.value?!Number(R.value)||!Number(N.value)?o("button.enterAmount"):fe.value?"Order size should be higher than $5":Number(R.value)>Number(d.value)?o("button.insufficientBalance",{name:b.value.symbol}):"Place Limit Order":"No Available Route"),et=y(()=>!!(!b.value||!w.value||!C.value||fe.value||!Number(R.value)&&!Number(N.value)||Number(R.value)>Number(d.value)||Number(R.value)==0||Number(N.value)==0||!Ne.value)),ce=Me(),tt=y(()=>ce),je=ft(),{setTransactionTxid:at,setIsShowWaiting:Se,setIsShowSuccess:st,setIsShowRejected:Be,setTransactionDesc:nt}=je,Re=f(!1),Y=Bt("Sui"),ze=async()=>{Tt.value=!1;const v=He("Sui"),l=Date.parse(new Date().toString())+(O(W.value)||ne.value);try{nt("Creating order"),Se(!0);const K={pay_coin_amount:R.value,price:ee.value?C.value:new h(1).div(new h(C.value)).toString(),expired_ts:l,pay_coin_type:b.value.address,target_coin_type:w.value.address,pay_decimal:b.value.decimals,target_decimal:w.value.decimals};console.log("placeLimitOrder parmas",K);const oe=await v.placeLimitOrder(K),yt=await Y.signAndExecuteTransactionBlock(m.value.currentWallet,oe),ke=Y.handleTx(yt);if(ke&&ke.hash){at(ke.hash),Se(!1),st(!0),Re.value=!1;const Pe={title:"Transaction",desc:"Order placed successfully",hash:ke.hash,icon:"icon-icon-Increased"};Pe.res=ke.res,Y.showTransitionPending(Pe),await Y.watchTransaction(Pe)&&setTimeout(()=>{Y.getAccount(m.value.address),ce.getOrderList()},1e3)}else Se(!1),Be(!0)}catch(D){Se(!1),Be(!0),Re.value=!1,console.log("trade-card openOrder error##",D)}},ee=f(!1),ie=f(),de=f(""),We=f(),te=f("0"),ge=f(""),Je=f(),Ne=f(!0),Ta=y(()=>as()),Ia=async()=>{var D,K;let v;J.value?v=new h(1).mul(Math.pow(10,(D=b==null?void 0:b.value)==null?void 0:D.decimals)).toString():v=new h(1).mul(Math.pow(10,(K=w==null?void 0:w.value)==null?void 0:K.decimals)).toString();const l=await Ta.value.getFindRouter(b,w,v,J.value);l&&l.routes&&l.routes.length>0?(Ne.value=!0,ce.setHaveMarket(!0)):(Ne.value=!1,ce.setHaveMarket(!1))},Ma=async()=>{var ke,Pe;const l=(await $fetch(`${U.Sui.api}/v2/sui/market_price?base_symbol_address_pair=${ua(b.value.address)},${ua(w.value.address)}`)).data.prices||[],D=[];l.forEach(Ce=>{Ce.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?D.push({...Ce,base_symbol:"0x2::sui::SUI"}):D.push(Ce)});const K=Object.fromEntries(D.map(Ce=>[Ce.base_symbol,Ce]));console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:872 ~ setMarketPriceFromRate ~ RATES:",K);const oe=new h((ke=K[w.value.address])==null?void 0:ke.price),yt=new h((Pe=K[b.value.address])==null?void 0:Pe.price);return{inputAmount:oe,outputAmount:yt}},zt=f(!1),Ot=async v=>{v||(zt.value=!0);let l;try{l=await Ma()}catch(D){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:787 ~ setMarketPrice ~ error:",D)}if(te.value="",console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:794 ~ setMarketPrice ~ res:",l),!l||l.outputAmount.toNumber()<=0&&l.inputAmount.toNumber()<=0)return Je.value=!1,ge.value="",de.value="",te.value="",!1;Je.value=!0,v?ie.value=ee.value?ve(l.outputAmount.div(l.inputAmount).toString()):ve(l.inputAmount.div(l.outputAmount).toString()):C.value=ee.value?ve(l.outputAmount.div(l.inputAmount).toString()):ve(l.inputAmount.div(l.outputAmount).toString()),setTimeout(()=>{zt.value=!1},1e3)},Wt=f(!1),Jt=async()=>{Wt.value=!0,await Ot(!0),ge.value="",de.value="",te.value="";const v=new h(C.value).sub(new h(ie.value)).div(new h(ie.value)).mul(100);te.value=v.toNumber().toFixed(2);const l=Math.abs(v.toNumber()).toFixed(2);de.value=`Limit order price is ${l}% ${te.value>0?"higher":"lower"} than the market.`,ee.value?C.value>ie.value?(ge.value="",We.value="#68FFD8"):ie.value>C.value&&(ge.value=`Your limit order price is ${l}% ${te.value>0?"higher":"lower"} than market. You are selling at a much higher rate. We recommend you to use`,We.value="#ffb62d"):C.value>ie.value?(ge.value=`Your limit order price is ${l}% ${te.value>0?"higher":"lower"} than market. You are buying at a much lower rate. We recommend you to use`,We.value="#ffb62d"):ie.value>C.value&&(ge.value="",We.value="#68FFD8"),Wt.value=!1};ae(()=>[b.value,w.value],([v,l])=>{v&&l&&(C.value="",Ot(!1))},{immediate:!0});const dt=f(!1),Ea=v=>{const l=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,18})?).*$");v.target.value=v.target.value.replace(l,"$1"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1002 ~ priceChange ~ e.target.value:",v.target.value),C.value=v.target.value,ge.value="",de.value="",te.value="",dt.value=!0,C.value&&C.value>0&&Ne.value&&Jt()},Ra=()=>{ee.value=!ee.value,C.value=ve(new h(1).div(new h(C.value)).toString()),C.value>0&&Ne.value&&Jt()},Ye=f(),qe=f(),Lt=f(!1),la=(v,l)=>{var K,oe;const D=je.importTokenListObj;v&&!Ae(v)&&v!=null&&v.isSelfBuilt&&!(D!=null&&D.hasOwnProperty(v==null?void 0:v.address))&&(s.value="fromCoin",Ye.value=v),l&&!Ae(l)&&l!=null&&l.isSelfBuilt&&!(D!=null&&D.hasOwnProperty(l==null?void 0:l.address))&&(s.value="toCoin",qe.value=l),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1034 ~ getTokenSource ~ warningFromCoin.value:",Ye.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1046 ~ getTokenSource ~ warningToCoin.value:",qe.value),((K=Ye==null?void 0:Ye.value)!=null&&K.address||(oe=qe==null?void 0:qe.value)!=null&&oe.address)&&(Lt.value=!0)};ae(()=>[b.value,w.value],([v,l])=>{v&&!Ae(v)&&la(v,{}),l&&!Ae(l)&&la({},l)},{immediate:!0});const Na=()=>{s.value==="fromCoin"?b.value=re.value:w.value=re.value,Lt.value=!1,Ye.value="",qe.value=""},Pa=y(()=>{var v,l;return`/swap?from=${(v=b==null?void 0:b.value)==null?void 0:v.address}&to=${(l=w==null?void 0:w.value)==null?void 0:l.address}`}),Aa=Ja();ae(()=>[b.value,w.value],([v,l])=>{if(v&&l){if(Ia(),be(),v||l){const D=`/limit/${v==null?void 0:v.address}-${l==null?void 0:l.address}`;Aa.push(D)}}else ce.setHaveMarket(!1)},{immediate:!0});const Tt=f(!1),Yt=y(()=>tt.value.isShowChart);return(v,l)=>{var Pe,Ce,ia,oa;const D=Xt,K=St,oe=ut,yt=Zt,ke=Qa;return u(),g("div",pn,[e("div",hn,[e("div",fn,[E(ts,{"trade-tab-list":_,"current-trade-tab":p.value},null,8,["current-trade-tab"]),e("div",null,[E(D,{"overlay-class-name":"new-style-tooltip"},{title:z(()=>[e("div",gn,i(Yt.value?"Hide reference price":"View reference price"),1)]),default:z(()=>[e("div",yn,[(u(),g("svg",{class:q(["chart-icon",Yt.value?"active-chart-icon":""]),"aria-hidden":"true",onClick:l[0]||(l[0]=H=>a(ce).setIsShowChart(!Yt.value))},wn,2))])]),_:1}),e("div",$n,[E(Xa,{loading:X.value,"auto-refresh-time":Fe.value,countdown:he.value,"tooltip-placement":"left",onClickRefresh:ye},null,8,["loading","auto-refresh-time","countdown"])])])]),e("div",xn,[e("div",Sn,[E(da,{modelValue:a(R),"onUpdate:modelValue":l[1]||(l[1]=H=>Dt(R)?R.value=H:null),"input-value":a(R),"coin-symbol":a(b)?a(b).symbol:null,"coin-name":a(b)?a(b).name:null,balance:d.value,"coin-icon":a(b)?a(b).logo_url:"",address:a(b)?a(b).address:"","swap-direction":"From",title:"Sell",onOnMax:l[2]||(l[2]=H=>x("fromCoin")),onOnHalf:l[3]||(l[3]=H=>S("fromCoin")),onOnInput:l[4]||(l[4]=H=>{R.value=H,J.value=!0,dt.value=!1}),onOnSelect:l[5]||(l[5]=H=>r("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("div",kn,[E(da,{modelValue:a(N),"onUpdate:modelValue":l[6]||(l[6]=H=>Dt(N)?N.value=H:null),"input-value":a(N),havemax:!1,"coin-symbol":a(w)?a(w).symbol:null,"coin-name":a(w)?a(w).name:null,balance:n.value,"swap-direction":"To","coin-icon":a(w)?a(w).logo_url:"",address:a(w)?a(w).address:"",havehalf:!1,title:"Buy",onOnInput:l[7]||(l[7]=H=>{N.value=H,J.value=!1,dt.value=!1}),onOnSelect:l[8]||(l[8]=H=>r("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("img",{class:q(a(Ft)?"gang animationex":"gang"),src:Za,alt:""},null,2),e("div",{class:"exchange sui-exchange",onClick:l[9]||(l[9]=wt((...H)=>a(pa)&&a(pa)(...H),["stop"]))},[(u(),g("svg",{class:q(a(Ft)?"icon animationex":"icon"),"aria-hidden":"true"},On,2))])]),e("div",Ln,[e("div",Tn,[e("div",In,[e("div",null,[ee.value?(u(),g("div",Mn," Sell "+i((Pe=a(b))==null?void 0:Pe.symbol)+" at rate ",1)):(u(),g("div",En," Buy "+i((Ce=a(w))==null?void 0:Ce.symbol)+" at rate ",1)),Wt.value?(u(),B(K,{key:2,indicator:a(c)},null,8,["indicator"])):(u(),B(D,{key:3},Ya({default:z(()=>[C.value&&ie.value&&Je.value&&Number(te.value)!==0?(u(),g("div",{key:0,class:"rate",style:Vt({color:We.value})},i(Number(te.value)>0&&Number(te.value)<1e4?`+${te.value}`:Number(te.value)>1e4?">10000":te.value)+"% ",5)):F("",!0)]),_:2},[de.value?{name:"title",fn:z(()=>[P(i(de.value),1)]),key:"0"}:void 0]),1024))]),Je.value?(u(),B(oe,{key:0,loading:zt.value,class:"set-market max-btn",onClick:l[10]||(l[10]=H=>Ot(!1))},{default:z(()=>[P("Market")]),_:1},8,["loading"])):F("",!0)]),e("div",Rn,[E(yt,{value:C.value,"onUpdate:value":l[11]||(l[11]=H=>C.value=H),placeholder:"0.0",onOnInput:l[12]||(l[12]=()=>{J.value=!0}),onChange:Ea},null,8,["value"]),e("div",Nn,[e("span",null,i(ee.value?(ia=a(w))==null?void 0:ia.symbol:(oa=a(b))==null?void 0:oa.symbol),1),e("div",{class:"right",onClick:Ra},Hn)])])]),e("div",{class:"sell-expires",onClick:l[14]||(l[14]=wt(H=>L.value=!L.value,["stop"]))},[e("div",Un,[Dn,E(D,{"overlay-class-name":"expiry-tooltip",placement:"left"},{title:z(()=>[P("No extra cancellation fee will be charged for order expiry or cancellation. Gas will be consumed upon manual cancellation.")]),default:z(()=>[(u(),g("svg",{class:"icon","aria-hidden":"true",onClick:l[13]||(l[13]=wt(()=>{},["stop"]))},jn))]),_:1})]),e("div",Bn,[e("span",null,i(W.value),1),(u(),g("svg",{class:"icon","aria-hidden":"true",style:Vt(L.value?{transform:"rotate(180deg)"}:{})},Wn,4))]),e("div",{class:"expires-list",style:Vt(L.value?{display:"block"}:{})},[(u(),g(V,null,Le($,H=>e("div",{key:H,class:q(["expirer-item",H==W.value?"expirer-item-active":""]),onClick:Io=>H=="Custom"?j.value=!0:W.value=H},i(H),11,Jn)),64))],4)])]),se(e("div",Yn,[P(i(ge.value)+" ",1),e("span",{onClick:l[15]||(l[15]=H=>v.$router.push(Pa.value))},"Cetus Swap"),P(" instead. ")],512),[[ot,C.value&&ie.value&&Number(te.value)!==0&&ge.value&&Je.value]])]),m.value&&m.value.address?(u(),B(oe,{key:0,disabled:et.value,class:q(["place-order-btn",xe.value&&xe.value.length>40?"place-order-btn-size":""]),loading:Re.value,onClick:l[16]||(l[16]=H=>Tt.value=!0)},{default:z(()=>[P(i(xe.value),1)]),_:1},8,["disabled","class","loading"])):(u(),B(oe,{key:1,class:"place-order-btn",onClick:l[17]||(l[17]=H=>m.value.setIsShowWalletModal(!0))},{default:z(()=>[P("Connect wallet")]),_:1})),j.value?(u(),B(As,{key:2,onCloseModal:l[18]||(l[18]=H=>j.value=!1),onSendTime:pe})):F("",!0),I.value?(u(),B(es,{key:3,"existing-coins":T.value,"last-select-coin":M.value,"have-import-btn":!0,onOnSelect:le,onOnClose:l[19]||(l[19]=H=>I.value=!1)},null,8,["existing-coins","last-select-coin"])):F("",!0),Lt.value?(u(),B(ke,{key:4,"from-coin":Ye.value,"to-coin":qe.value,"is-import-modal":!0,onClose:Na,onClickContinue:l[20]||(l[20]=()=>{Lt.value=!1,Ye.value="",qe.value=""})},null,8,["from-coin","to-coin"])):F("",!0),Tt.value?(u(),B(mn,{key:5,"from-coin":a(b),"to-coin":a(w),"from-coin-amount":a(R),"to-coin-amount":a(N),direction:ee.value,price:C.value,"current-expires":W.value,onClose:l[21]||(l[21]=H=>Tt.value=!1),onToTrade:ze},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","direction","price","current-expires"])):F("",!0)])}}});const Zo=me(qn,[["__scopeId","data-v-3bc7f496"]]),Sa=t=>(Te("data-v-5890ec9c"),t=t(),Ie(),t),Vn={key:0,class:"no-data"},Kn=Sa(()=>e("img",{src:ss,alt:""},null,-1)),Gn={key:1,class:"no-data"},Qn=Sa(()=>e("img",{src:ns,alt:""},null,-1)),Zn=_e({__name:"trade-no-data",props:{platform:{type:String,default:"platform"}},setup(t){const c=Ue(),o=p=>{switch(p){case"orders":return"You don't have any open orders yet.";case"history":return"You don't have any order history.";case"claim":return"No History."}},_=y(()=>c);return(p,k)=>{const m=ut;return _.value&&_.value.address?(u(),g("div",Vn,[Kn,e("span",null,i(o(t.platform)),1)])):(u(),g("div",Gn,[Qn,E(m,{class:"connect-wallet",onClick:k[0]||(k[0]=d=>_.value.setIsShowWalletModal(!0))},{default:z(()=>[P("Connect Wallet")]),_:1})]))}}});const sa=me(Zn,[["__scopeId","data-v-5890ec9c"]]),Xn={class:"trade-info"},el={alt:""},tl={alt:""},al=_e({__name:"trade-info",props:{order:{type:Object,default:()=>({})}},setup(t){return(c,o)=>{var k,m,d,n,x,S,s,T,M,I,r,$,O,L;const _=ga,p=jt("image");return u(),g("div",Xn,[e("div",null,[se(e("img",el,null,512),[[p,(m=(k=t.order)==null?void 0:k.pay_coin_info)==null?void 0:m.logo_url]]),E(_,{address:(n=(d=t.order)==null?void 0:d.pay_coin_info)==null?void 0:n.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[se(e("img",tl,null,512),[[p,(S=(x=t.order)==null?void 0:x.target_coin_info)==null?void 0:S.logo_url]]),E(_,{address:(T=(s=t.order)==null?void 0:s.target_coin_info)==null?void 0:T.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,i(a(A)((M=t.order)==null?void 0:M.total_pay_amount))+" "+i((r=(I=t.order)==null?void 0:I.pay_coin_info)==null?void 0:r.symbol)+" â†’ "+i(a(A)(($=t.order)==null?void 0:$.totalBuyNum))+" "+i((L=(O=t.order)==null?void 0:O.target_coin_info)==null?void 0:L.symbol),1)])}}});const Ct=me(al,[["__scopeId","data-v-bb33266f"]]),Ze=t=>(Te("data-v-34840059"),t=t(),Ie(),t),sl={class:"claim-modal-content"},nl=Ze(()=>e("div",{class:"desc"}," For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ",-1)),ll={class:"order-info-detail"},il={class:"order-info"},ol=Ze(()=>e("div",{class:"label"},"Price",-1)),rl={class:"text"},ul=Ze(()=>e("div",{class:"label"},"Filled size",-1)),cl={class:"text"},dl=Ze(()=>e("div",{class:"label"},"Expiry",-1)),vl={class:"text"},_l={class:"tab"},ml=["onClick"],pl={key:0,class:"claim-content"},hl={class:"inp-box"},fl=Ze(()=>e("div",{class:"top"},[e("div",{class:"avalibale-claim"},"Avalibale to claim")],-1)),gl={class:"bottom"},yl={class:"token-info"},bl={alt:""},wl={key:1,class:"history-list"},$l={class:"amount"},xl=Ze(()=>e("div",{class:"label"},"Amount",-1)),Sl={class:"text"},kl={alt:""},Cl={class:"time"},Ol=Ze(()=>e("div",{class:"label"},"Time",-1)),Ll={class:"text"},Tl=["href"],Il=Ze(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),Ml=[Il],El={key:2,class:"loading-box"},Rl=_e({__name:"trade-claim-modal",props:{order:{type:Object,default:()=>({})}},emits:["closeModal"],setup(t,{emit:c}){const o=t,_=["Claim","History"],p=f("Claim"),k=f(),m=Z=>{const X=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.order.target_coin_info.decimals}})?).*$`);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ props.order.target_coin_info.decimals:",o.order.target_coin_info.decimals),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ reg:",X),k.value=Z.target.value.replace(X,"$1")},d=f(!0);ae(()=>o.order.target_balance,Z=>{Z&&Z>0&&d.value?(k.value=Z,d.value=!1):k.value=0},{immediate:!0});const n=y(()=>!!(k.value>o.order.target_balance||C.value||!k.value||o.order.target_balance==0)),x=y(()=>k.value>o.order.target_balance?"Maximum amount that can be withdrawn":k.value?"Confirm Claim":"Claim"),S=ft(),s=y(()=>S),T=Ue(),M=y(()=>T),I=He("Sui"),{setTransactionTxid:r,setIsShowWaiting:$,setIsShowSuccess:O,setIsShowRejected:L,setTransactionDesc:W}=S,j=Bt("Sui"),C=f(!1),ne=Me(),pe=y(()=>ne),re=async()=>{var Z,X;C.value=!0;try{const ye=`Claim ${A(k.value)} ${(X=(Z=o.order)==null?void 0:Z.target_coin_info)==null?void 0:X.symbol}`;W(ye),$(!0);const $e={order_id:o.order.id,pay_coin_type:o.order.pay_coin_type,target_coin_type:o.order.target_coin_type};console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:194 ~ confirmClaim ~ params:",$e);const be=await I.claimTargetCoin($e),Ee=await j.signAndExecuteTransactionBlock(M.value.currentWallet,be),ue=j.handleTx(Ee);if(ue&&ue.hash){r(ue.hash),$(!1),O(!0);const fe={title:"Transaction",desc:"Claim successfully",hash:ue.hash,icon:"icon-icon-Increased"};fe.res=ue.res,j.showTransitionPending(fe),await j.watchTransaction(fe)&&(setTimeout(()=>{j.getAccount(M.value.address),ne.getOrderList()},2e3),setTimeout(()=>{k.value=0,C.value=!1},4e3))}else $(!1),L(!0)}catch(ye){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:222 ~ confirmClaim ~ error:",ye),$(!1),L(!0),C.value=!1}};ae(()=>p.value,Z=>{Z=="History"&&ne.getLimitOrderClaimHistory(o.order)},{immediate:!0});const le=y(()=>pe.value.currentOrderClaimHistory),Fe=y(()=>s.value.currentExplorer),he=y(()=>pe.value.claimHistoryLoading);return(Z,X)=>{const ye=Zt,$e=ut,be=St,Ee=jt("image");return u(),B(a(Qt),{title:"Claim",visible:!0,width:"440px",footer:null,onCancel:X[1]||(X[1]=ue=>Z.$emit("closeModal"))},{default:z(()=>{var ue,fe,xe,et,ce,tt,je,at,Se,st,Be,nt,Re;return[e("div",sl,[nl,e("div",ll,[E(Ct,{order:t.order},null,8,["order"]),e("div",il,[e("div",null,[ol,e("div",rl,i(a(A)(t.order.reseverRate))+" "+i((fe=(ue=t.order)==null?void 0:ue.pay_coin_info)==null?void 0:fe.symbol)+" per "+i((et=(xe=t.order)==null?void 0:xe.target_coin_info)==null?void 0:et.symbol),1)]),e("div",null,[ul,e("div",cl,[P(i(a(A)((ce=t.order)==null?void 0:ce.obtained_amount))+"/"+i(a(A)((tt=t.order)==null?void 0:tt.totalBuyNum))+" "+i((at=(je=t.order)==null?void 0:je.target_coin_info)==null?void 0:at.symbol)+" ",1),e("span",null,"("+i((Se=t.order)==null?void 0:Se.obtainedRatio)+"%)",1)])]),e("div",null,[dl,e("div",vl,i(a(Ge)(t.order.expire_ts,""))+" (UTC) ",1)])])]),e("div",_l,[(u(),g(V,null,Le(_,Y=>e("div",{key:Y,class:q(["tab-item",p.value==Y?"tab-item-active":""]),onClick:ze=>p.value=Y},i(Y),11,ml)),64))]),p.value=="Claim"?(u(),g("div",pl,[e("div",hl,[fl,e("div",gl,[E(ye,{value:k.value,"onUpdate:value":X[0]||(X[0]=Y=>k.value=Y),disabled:"",onChange:m},null,8,["value"]),e("div",yl,[se(e("img",bl,null,512),[[Ee,(Be=(st=t.order)==null?void 0:st.target_coin_info)==null?void 0:Be.logo_url]]),e("span",null,i((Re=(nt=t.order)==null?void 0:nt.target_coin_info)==null?void 0:Re.symbol),1)])])]),E($e,{disabled:n.value,class:"claim-btn",loading:C.value,onClick:re},{default:z(()=>[P(i(x.value),1)]),_:1},8,["disabled","loading"])])):(u(),g("div",wl,[!he.value&&le.value&&le.value.length>0?(u(!0),g(V,{key:0},Le(le.value,Y=>{var ze,ee,ie,de;return u(),g("div",{key:Y.digest,class:"history-item"},[e("div",$l,[xl,e("div",Sl,[se(e("img",kl,null,512),[[Ee,(ee=(ze=t.order)==null?void 0:ze.target_coin_info)==null?void 0:ee.logo_url]]),e("span",null,i(a(A)(Y.claimed_amount))+" "+i((de=(ie=t.order)==null?void 0:ie.target_coin_info)==null?void 0:de.symbol),1)])]),e("div",Cl,[Ol,e("div",Ll,[e("span",null,i(a(Ge)(Number(Y.timestampMs),""))+" (UTC)",1),e("a",{target:"_blank",href:a(ea)(Fe.value,"tx",Y.digest)},Ml,8,Tl)])])])}),128)):!he.value&&le.value&&le.value.length==0?(u(),B(sa,{key:1,platform:"claim"})):he.value&&le.value&&le.value.length==0?(u(),g("div",El,[E(be)])):F("",!0)]))])]}),_:1})}}});const ka=me(Rl,[["__scopeId","data-v-34840059"]]),gt=t=>(Te("data-v-dfbe78bf"),t=t(),Ie(),t),Nl={class:"trade-order-card-list"},Pl={class:"order-info"},Al=gt(()=>e("div",{class:"label"},"Price",-1)),Hl={class:"text"},Ul=["onClick"],Dl=gt(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Fl=gt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),jl=[Dl,Fl],Bl=gt(()=>e("div",{class:"label"},"Filled size",-1)),zl={class:"text"},Wl=gt(()=>e("div",{class:"label"},"Expiry",-1)),Jl={class:"text"},Yl=gt(()=>e("div",{class:"trade-claim-btn trade-claim-btn-disabled"},"Claim",-1)),ql=_e({__name:"trade-order-card",props:{pageList:{type:Object,default:()=>({})}},setup(t){const c=f(),o=f(!1),_=Me(),p=y(()=>_),k=y(()=>p.value.cancelOrderId);return(m,d)=>{const n=Xt,x=ut,S=ka;return u(),g("div",Nl,[(u(!0),g(V,null,Le(t.pageList,s=>{var T,M,I,r,$;return u(),g("div",{key:s.id,class:"trade-order-card"},[E(Ct,{order:s},null,8,["order"]),e("div",Pl,[e("div",null,[Al,e("div",Hl,[s.direction?(u(),g(V,{key:0},[P(i(a(A)(s==null?void 0:s.rate))+" "+i((T=s==null?void 0:s.target_coin_info)==null?void 0:T.symbol)+" per "+i((M=s==null?void 0:s.pay_coin_info)==null?void 0:M.symbol),1)],64)):(u(),g(V,{key:1},[P(i(a(A)(s==null?void 0:s.reseverRate))+" "+i((I=s==null?void 0:s.pay_coin_info)==null?void 0:I.symbol)+" per "+i((r=s==null?void 0:s.target_coin_info)==null?void 0:r.symbol),1)],64)),e("div",{class:"right",onClick:O=>s.direction=!s.direction},jl,8,Ul)])]),e("div",null,[Bl,e("div",zl,[P(i(a(A)(s==null?void 0:s.obtained_amount))+"/"+i(a(A)(s==null?void 0:s.totalBuyNum))+" "+i(($=s==null?void 0:s.target_coin_info)==null?void 0:$.symbol)+" ",1),e("span",null,"("+i(s==null?void 0:s.obtainedRatio)+"%)",1)])]),e("div",null,[Wl,e("div",Jl,i(a(Ge)(s.created_ts,""))+" (UTC)",1)])]),s.target_balance==0&&s.obtained_amount==0?(u(),B(n,{key:0},{title:z(()=>[P(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:z(()=>[Yl]),_:1})):(u(),B(x,{key:1,class:"trade-claim-btn",onClick:()=>{c.value=s,o.value=!0}},{default:z(()=>[P("Claim")]),_:2},1032,["onClick"])),E(x,{class:"trade-cancel-btn",loading:k.value=="all"||k.value==s.id,onClick:O=>a(aa)(s)},{default:z(()=>[P("Cancel")]),_:2},1032,["loading","onClick"])])}),128)),o.value?(u(),B(S,{key:0,order:c.value,onCloseModal:d[0]||(d[0]=s=>o.value=!1)},null,8,["order"])):F("",!0)])}}});const Vl=me(ql,[["__scopeId","data-v-dfbe78bf"]]),na=t=>(Te("data-v-5dca8f09"),t=t(),Ie(),t),Kl={class:"trade-orders"},Gl={key:0},Ql=na(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Price"),e("th",null,"Filled size"),e("th",null,"Expiry"),e("th",null,"Action")])],-1)),Zl={class:"order-price"},Xl=["onClick"],ei=na(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),ti=na(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),ai=[ei,ti],si={class:"filled-size"},ni={class:"action"},li={key:4,class:"loading-box"},ii=_e({__name:"trade-orders",setup(t){const c=Ue(),o=y(()=>c),_=Me(),p=y(()=>_);y(()=>p.value.limitOrderList);const k=kt(),m=y(()=>k);y(()=>m.value.tokensObj),ae(()=>o.value.address,x=>{x&&_.getOrderList()},{immediate:!0});const d=y(()=>p.value.orderListLoading),n=(x,S)=>{console.log(x,"page"),it.value=x};return(x,S)=>{const s=ut,T=Xt,M=ya,I=St;return u(),g("div",Kl,[o.value&&o.value.address&&a(Q)&&a(Q).length>0?(u(),g("table",Gl,[Ql,e("tbody",null,[(u(!0),g(V,null,Le(a(Q),r=>{var $,O,L,W,j;return u(),g("tr",{key:r.id},[e("td",null,[E(Ct,{order:r},null,8,["order"])]),e("td",null,[e("div",Zl,[r.direction?(u(),g(V,{key:0},[P(i(a(A)(r==null?void 0:r.rate))+" "+i(($=r==null?void 0:r.target_coin_info)==null?void 0:$.symbol)+" per "+i((O=r==null?void 0:r.pay_coin_info)==null?void 0:O.symbol),1)],64)):(u(),g(V,{key:1},[P(i(a(A)(r==null?void 0:r.reseverRate))+" "+i((L=r==null?void 0:r.pay_coin_info)==null?void 0:L.symbol)+" per "+i((W=r==null?void 0:r.target_coin_info)==null?void 0:W.symbol),1)],64)),e("div",{class:"right",onClick:()=>{r.direction=!r.direction,a(hs)(r)}},ai,8,Xl)])]),e("td",null,[e("div",si,[P(i(a(A)(r==null?void 0:r.obtained_amount))+"/"+i(a(A)(r==null?void 0:r.totalBuyNum))+" "+i((j=r==null?void 0:r.target_coin_info)==null?void 0:j.symbol)+" ",1),e("span",null,"("+i(r==null?void 0:r.obtainedRatio)+"%)",1)])]),e("td",null,i(a(Ge)(r==null?void 0:r.expire_ts,""))+" (UTC)",1),e("td",null,[e("div",ni,[E(T,{"overlay-class-name":"expiry-tooltip"},{title:z(()=>[P(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:z(()=>[E(s,{class:"trade-claim-btn",disabled:r.target_balance==0&&r.obtained_amount==0,onClick:()=>{_t.value=r,Kt.value=!0}},{default:z(()=>[P("Claim")]),_:2},1032,["disabled","onClick"])]),_:2},1024),E(s,{class:"trade-cancel-btn",loading:a(ha)=="all"||a(ha)==r.id,onClick:C=>a(aa)(r)},{default:z(()=>[P("Cancel")]),_:2},1032,["loading","onClick"])])])])}),128))])])):F("",!0),o.value&&o.value.address&&a(Q)&&a(Q).length>0?(u(),B(Vl,{key:1,"page-list":a(Q)},null,8,["page-list"])):F("",!0),(a(Q)&&a(Q).length==0||!o.value.address)&&!d.value?(u(),B(sa,{key:2,platform:"orders"})):F("",!0),a(Q)&&a(Q).length>0?(u(),g("div",{key:3,class:q(["pagination",a(Q)&&a(Q).length>0&&d.value?"loading-pagination":""])},[E(M,{current:a(it),"onUpdate:current":S[0]||(S[0]=r=>Dt(it)?it.value=r:null),"page-size":a(Nt),simple:"",total:a($t)&&a($t).length,onChange:n},null,8,["current","page-size","total"])],2)):F("",!0),a(Q)&&a(Q).length==0&&d.value?(u(),g("div",li,[E(I)])):F("",!0),a(Q)&&a(Q).length>0&&d.value?(u(),B(I,{key:5,class:"order-spin"})):F("",!0),a(Kt)?(u(),B(ka,{key:6,order:a(_t),onCloseModal:S[1]||(S[1]=r=>Kt.value=!1)},null,8,["order"])):F("",!0)])}}});const oi=me(ii,[["__scopeId","data-v-5dca8f09"]]),pt=t=>{switch(t){case"Running":return{class:"order-running",path:"#icon-icon_completed"};case"Completed":return{class:"order-running",path:"#icon-icon_completed"};case"Cancelled":return{class:"order-cancelled",path:"#icon-icon_cancelled"};default:return{class:"",path:""}}},Ke=t=>{switch(t){case"OrderPlacedEvent":return{path:"#icon-tx_add1",class:"order-status-create",text:"Create"};case"OrderCanceledEvent":return{path:"#icon-icon_cancelled",class:"order-status-cancel",text:"Cancel"};case"FlashLoanEvent":return{path:"#icon-tx_swap1",class:"order-status-trade",text:"Trade"};default:return{path:"",class:"",text:""}}},ht=Me(),we=f({}),Ca=(t,c)=>{we.value[c]?we.value[c]=!1:(we.value[c]=!0,ht.getLimitOrderLogs()),console.log(we.value,"##isShowPosition.value")},ri=Ue(),Oa=y(()=>ri),ui=kt(),ci=y(()=>ui),At=y(()=>ci.value.tokensObj),La=y(()=>ht),Ht=y(()=>La.value.limitOrderHistoryList),fa=Bt("Sui"),di=He("Sui"),rt=f(1),Ut=f(10),G=f([]),xt=f([]),vi=async()=>{const t=Ut.value*rt.value-Ut.value;let c=rt.value*Ut.value;c=c>Ht.value.length?Ht.value.length:c;const o=Ht.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:174 ~ updateOrderList ~ result:",o),console.log("trade-card updateOrderList tokenObj",At.value);const _=[];if(o.length>0){const p=o.filter((k,m)=>m>=t&&m<c);for(let k=0;k<p.length;k++){const m=p[k];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:188 ~ updateOrderList ~ order:",m,m.order_id);const d=At.value[It(m.pay_coin,!1)]||await fa.getTokenBySymbol({},It(m.pay_coin,!1)),n=At.value[It(m.target_coin,!1)]||await fa.getTokenBySymbol({},It(m.target_coin,!1)),x=ve(di.rateToPrice(m.rate,d.decimals,n.decimals).toString(),d.decimals);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:211 ~ updateOrderList ~ rate:",x);const S=new h(m.total_pay_amount).div(Math.pow(10,d.decimals)).toString(),s=new h(m.remaining_amount).div(Math.pow(10,d.decimals)).toString(),T=new h(S).sub(new h(s)).toString(),M=new h(m.total_pay_amount).mul(new h(Math.pow(10,18))).div(new h(m.rate)).ceil().div(new h(Math.pow(10,n.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:226 ~ updateOrderList ~ order.rate:",m.rate);const I=ve(new h(1).div(new h(x)).toString()),r=m.events.map($=>{const O=$.event_type.split("::")[2];let L="";return O=="OrderPlacedEvent"?L=new h($.amount).div(Math.pow(10,d.decimals)).toString():O=="FlashLoanEvent"?L=new h($.amount).div(Math.pow(10,n.decimals)).toString():O=="OrderCanceledEvent"&&(L=new h($.amount).div(Math.pow(10,d.decimals)).toString()),{...$,amount:L,type:O}}).sort(($,O)=>O.block_time-$.block_time);_.push({...m,pay_coin_info:d,target_coin_info:n,total_pay_amount:S,rate:x,remaining_amount:s,transaction_ratio:Ve(new h(m.total_pay_amount).sub(new h(m.remaining_amount)).div(new h(m.total_pay_amount)).mul(100).toString(),2),transaction_volume:T,status:m.cancel_reason==0?"Completed":"Cancelled",events:r,totalBuyNum:M,reseverRate:I,direction:!0})}G.value=_}xt.value=o,ht.setHistoryNum(o.length),console.log("allList",xt.value),console.log("pageList",G.value)},_i=(t,c)=>{console.log(t,"page"),rt.value=t};ae(()=>[Ht.value,rt.value,At.value,Oa.value.address],([t,c,o,_])=>{t&&t.length>0&&o&&!Ae(o)&&_?vi():(G.value=[],xt.value=[],ht.setHistoryNum(0))},{immediate:!0});ae(()=>Oa.value.address,t=>{t&&(ht.getLimitOrderLogs(),ht.getLimitOrderHistory(t))},{immediate:!0});const Rt=y(()=>La.value.orderHistoryLoading),De=t=>(Te("data-v-c7971788"),t=t(),Ie(),t),mi={class:"history-card-list"},pi={class:"history-info"},hi=De(()=>e("div",{class:"label"},"Limit price",-1)),fi={class:"text"},gi=["onClick"],yi=De(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),bi=De(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),wi=[yi,bi],$i=De(()=>e("div",{class:"label"},"Expiry",-1)),xi={class:"text"},Si=De(()=>e("div",{class:"label"},"Filled size",-1)),ki={class:"text"},Ci=De(()=>e("div",{class:"label"},"Status",-1)),Oi={class:"text"},Li=["onClick"],Ti=["xlink:href"],Ii=De(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Mi=[Ii],Ei={class:"order-log-num"},Ri={class:"order-status"},Ni=["xlink:href"],Pi={class:"create-ts"},Ai={key:0},Hi={key:1},Ui={class:"view-trans"},Di=["href"],Fi=De(()=>e("span",null,"View Txn.",-1)),ji=De(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),Bi=[Fi,ji],zi=_e({__name:"trade-history-card",props:{pageList:{type:Object,default:()=>[]}},setup(t){const c=ft(),o=y(()=>c),_=y(()=>o.value.currentExplorer),p=Me(),k=y(()=>p);return y(()=>k.value.orderHistoryObj),(m,d)=>(u(),g("div",mi,[(u(!0),g(V,null,Le(t.pageList,(n,x)=>{var S,s,T,M,I;return u(),g("div",{key:n.expire_ts,class:"history-card-item"},[E(Ct,{order:n},null,8,["order"]),e("div",pi,[e("div",null,[hi,e("div",fi,[n.direction?(u(),g(V,{key:1},[P(i(a(A)(n==null?void 0:n.reseverRate))+" "+i((T=n==null?void 0:n.pay_coin_info)==null?void 0:T.symbol)+" per "+i((M=n==null?void 0:n.target_coin_info)==null?void 0:M.symbol),1)],64)):(u(),g(V,{key:0},[P(i(a(A)(n==null?void 0:n.rate))+" "+i((S=n==null?void 0:n.target_coin_info)==null?void 0:S.symbol)+" per "+i((s=n==null?void 0:n.pay_coin_info)==null?void 0:s.symbol),1)],64)),e("div",{class:"right",onClick:wt(r=>n.direction=!n.direction,["stop"])},wi,8,gi)])]),e("div",null,[$i,e("div",xi,i(a(Ge)(n==null?void 0:n.expire_ts,""))+" (UTC)",1)]),e("div",null,[Si,e("div",ki,[P(i(a(A)(n==null?void 0:n.transaction_volume))+"/"+i(a(A)(n==null?void 0:n.total_pay_amount))+" "+i((I=n==null?void 0:n.pay_coin_info)==null?void 0:I.symbol)+" ",1),e("span",null,"("+i(n==null?void 0:n.transaction_ratio)+"%)",1)])]),e("div",null,[Ci,e("div",Oi,[e("div",{class:"order-status",onClick:r=>a(Ca)(n,x)},[(u(),g("svg",{class:q(["order-status-icon",a(pt)(n.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(pt)(n.status).path},null,8,Ti)],2)),e("span",{class:q(a(pt)(n.status).class)},i(n.status),3),(u(),g("svg",{class:q(["arrow-icon",a(we)[x]?"open-arrow":""]),"aria-hidden":"true"},Mi,2))],8,Li)])])]),a(we)[x]?(u(!0),g(V,{key:0},Le(n.events,r=>{var $,O,L;return u(),g("div",{key:r,class:"order-log"},[e("div",Ei,[e("div",Ri,[e("div",null,[(u(),g("svg",{class:q(["status-icon",a(Ke)(r.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Ke)(r.type).path},null,8,Ni)],2)),e("span",{class:q(["text-status",a(Ke)(r.type).class])},i(a(Ke)(r.type).text),3)]),e("div",Pi,i(a(Ge)(Number(r.block_time),""))+" (UTC) ",1)]),e("div",null,[r.type=="FlashLoanEvent"?(u(),g("span",Ai,"+"+i(a(A)(r.amount))+" "+i(($=n==null?void 0:n.buy_coin_info)==null?void 0:$.symbol)+" "+i((O=n==null?void 0:n.target_coin_info)==null?void 0:O.symbol),1)):(u(),g("span",Hi,i(r.type=="OrderPlacedEvent"?"-":"+")+i(a(A)(r.amount))+" "+i((L=n==null?void 0:n.pay_coin_info)==null?void 0:L.symbol),1)),e("div",Ui,[e("a",{href:a(ea)(_.value,"tx",r.tx),target:"_blank"},Bi,8,Di)])])])])}),128)):F("",!0)])}),128))]))}});const Wi=me(zi,[["__scopeId","data-v-c7971788"]]),Xe=t=>(Te("data-v-4eca59f9"),t=t(),Ie(),t),Ji={class:"trade-history"},Yi={key:0},qi=Xe(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Limit price"),e("th",null,"Expiry"),e("th",null,"Filled size"),e("th",null,"Status")])],-1)),Vi=["onClick"],Ki={class:"order-price"},Gi=["onClick"],Qi=Xe(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Zi=Xe(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Xi=[Qi,Zi],eo={class:"order-status"},to=["xlink:href"],ao=Xe(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),so=[ao],no={class:"order-log"},lo={class:"order-log-num"},io=["xlink:href"],oo={key:0},ro={key:1},uo=Xe(()=>e("td",null,null,-1)),co=Xe(()=>e("td",null,null,-1)),vo={class:"create-ts"},_o={class:"view-trans"},mo=["href"],po=Xe(()=>e("span",null,"View Transaction",-1)),ho=Xe(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),fo=[po,ho],go={style:{height:"4px",background:"unset"}},yo={class:"tr-line",style:{height:"24px",background:"unset"}},bo={key:4,class:"loading-box"},wo=_e({__name:"trade-history",setup(t){const c=ft(),o=y(()=>c),_=y(()=>o.value.currentExplorer),p=Me();y(()=>p);const k=Ue(),m=y(()=>k);return ae(()=>m.value.address,d=>{d&&(p.getLimitOrderLogs(),p.getLimitOrderHistory(d))},{immediate:!0}),(d,n)=>{const x=ya,S=St;return u(),g("div",Ji,[m.value&&m.value.address&&a(G)&&a(G).length>0?(u(),g("table",Yi,[qi,e("tbody",null,[(u(!0),g(V,null,Le(a(G),(s,T)=>{var M,I,r,$,O;return u(),g(V,{key:s.id},[e("tr",{class:q(["order",T!==a(G).length-1?"order-border":""]),onClick:L=>a(Ca)(s,T)},[e("td",null,[E(Ct,{order:s},null,8,["order"])]),e("td",null,[e("div",Ki,[s.direction?(u(),g(V,{key:1},[P(i(a(A)(s==null?void 0:s.reseverRate))+" "+i((r=s==null?void 0:s.pay_coin_info)==null?void 0:r.symbol)+" per "+i(($=s==null?void 0:s.target_coin_info)==null?void 0:$.symbol),1)],64)):(u(),g(V,{key:0},[P(i(a(A)(s==null?void 0:s.rate))+" "+i((M=s==null?void 0:s.target_coin_info)==null?void 0:M.symbol)+" per "+i((I=s==null?void 0:s.pay_coin_info)==null?void 0:I.symbol),1)],64)),e("div",{class:"right",onClick:wt(L=>s.direction=!s.direction,["stop"])},Xi,8,Gi)])]),e("td",null,i(a(Ge)(s==null?void 0:s.expire_ts,""))+" (UTC)",1),e("td",null,[P(i(a(A)(s==null?void 0:s.transaction_volume))+"/"+i(a(A)(s==null?void 0:s.total_pay_amount))+" "+i((O=s==null?void 0:s.pay_coin_info)==null?void 0:O.symbol)+" ",1),e("span",null,"("+i(s==null?void 0:s.transaction_ratio)+"%)",1)]),e("td",null,[e("div",eo,[(u(),g("svg",{class:q(["order-status-icon",a(pt)(s.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(pt)(s.status).path},null,8,to)],2)),e("span",{class:q(a(pt)(s.status).class)},i(s.status),3),(u(),g("svg",{class:q(["arrow-icon",a(we)[T]?"open-arrow":""]),"aria-hidden":"true"},so,2))])])],10,Vi),a(we)[T]?(u(),g(V,{key:0},[(u(!0),g(V,null,Le(s.events,L=>{var W,j,C;return u(),g(V,{key:L},[se(e("tr",no,[e("td",null,[e("div",lo,[(u(),g("svg",{class:q(["status-icon",a(Ke)(L.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Ke)(L.type).path},null,8,io)],2)),e("span",{class:q(["text-status",a(Ke)(L.type).class])},i(a(Ke)(L.type).text),3),L.type=="FlashLoanEvent"?(u(),g("span",oo,"+"+i(a(A)(L.amount))+" "+i((W=s==null?void 0:s.buy_coin_info)==null?void 0:W.symbol)+" "+i((j=s==null?void 0:s.target_coin_info)==null?void 0:j.symbol),1)):(u(),g("span",ro,i(L.type=="OrderPlacedEvent"?"-":"+")+i(a(A)(L.amount))+" "+i((C=s==null?void 0:s.pay_coin_info)==null?void 0:C.symbol),1))])]),uo,co,e("td",null,[e("span",vo,i(a(Ge)(Number(L.block_time),""))+" (UTC)",1)]),e("td",null,[e("div",_o,[e("a",{href:a(ea)(_.value,"tx",L.tx),target:"_blank"},fo,8,mo)])])],512),[[ot,a(we)[T]]]),se(e("tr",go,null,512),[[ot,a(we)[T]]])],64)}),128)),se(e("tr",yo,null,512),[[ot,a(we)[T]]])],64)):F("",!0)],64)}),128))])])):F("",!0),m.value&&m.value.address&&a(G)&&a(G).length>0?(u(),B(Wi,{key:1,"page-list":a(G)},null,8,["page-list"])):F("",!0),a(G)&&a(G).length==0&&!a(Rt)?(u(),B(sa,{key:2,platform:"history"})):F("",!0),a(G)&&a(G).length>0?(u(),g("div",{key:3,class:q(["pagination",a(G)&&a(G).length>0&&a(Rt)?"loading-pagination":""])},[E(x,{current:a(rt),"onUpdate:current":n[0]||(n[0]=s=>Dt(rt)?rt.value=s:null),"page-size":a(Ut),simple:"",total:a(xt)&&a(xt).length,onChange:a(_i)},null,8,["current","page-size","total","onChange"])],2)):F("",!0),a(G)&&a(G).length==0&&a(Rt)?(u(),g("div",bo,[E(S)])):F("",!0),a(G)&&a(G).length>0&&a(Rt)?(u(),B(S,{key:5,class:"order-spin"})):F("",!0)])}}});const $o=me(wo,[["__scopeId","data-v-4eca59f9"]]),xo={class:"order-or-history"},So={class:"tab-list"},ko=["onClick"],Co=_e({__name:"trade-tab",setup(t){const c=Me(),o=y(()=>c),_=y(()=>o.value.orderNum),p=y(()=>o.value.historyNum),k=[{id:"orders",name:"Open Orders"},{id:"history",name:"Order History"}],m=Ue(),d=y(()=>m);return(n,x)=>(u(),g("div",xo,[e("div",So,[(u(),g(V,null,Le(k,S=>e("div",{key:S.id,class:q(["tab-item",a(vt)==S.id?"tab-item-active":""]),onClick:s=>vt.value=S.id},[P(i(S.name)+" ",1),se(e("div",{class:"tab-num"},i(a(vt)=="orders"?_.value:p.value),513),[[ot,a(vt)==S.id&&d.value&&d.value.address]])],10,ko)),64))]),a(vt)=="orders"&&d.value&&d.value.address&&_.value>0?(u(),g("div",{key:0,class:"clear-all",onClick:x[0]||(x[0]=S=>a(aa)({},!0))},"Cancel All")):F("",!0)]))}});const Oo=me(Co,[["__scopeId","data-v-5d493b03"]]),Lo={class:"trade-order"},To=_e({__name:"trade-record",setup(t){return(c,o)=>(u(),g("div",Lo,[E(Oo),a(vt)=="orders"?(u(),B(oi,{key:0})):(u(),B($o,{key:1}))]))}});const Xo=me(To,[["__scopeId","data-v-9eca8bf3"]]);export{Ct as T,Vl as _,ha as a,aa as b,_t as c,it as d,Nt as e,$t as f,sa as g,ka as h,Kt as i,G as j,Wi as k,rt as l,Ut as m,xt as n,Rt as o,Q as p,_i as q,Oo as r,vt as s,$a as t,Me as u,Zo as v,Oa as w,Qo as x,Xo as y};
