import{_ as ya}from"./token-warning.1ddbf7e4.js";import{m as b,N as Aa,a6 as Ba,r as g,E as Da,D as se,a as _e,q as jt,o as u,f as p,h as e,t as ne,i as R,v as i,x as D,u as a,G as ot,z as q,J as St,p as Te,k as Ie,e as me,c as F,w as z,j as U,Y as Xt,I as Zt,B as ut,a3 as ja,a4 as Fa,l as za,y as Wa,C as Ya,a8 as qt,b as Va,F as J,s as $e,a0 as Bt,K as wt,Z as qa,H as Jt,L as Qt,$ as ba}from"./entry.5ab2e052.js";/* empty css              */import{D as f}from"./decimal.0bdeb344.js";import{g as A,X as Ja,L as Ka,u as Ae,aM as Ga,c as Ue,aN as ra,aO as ve,s as Je,b as H,aP as ua,l as Ge,aL as It}from"./index.9a18b0fa.js";import{u as kt,a as ft,b as Ft,p as ca,j as ea}from"./pool.bfdb664c.js";import{_ as Xa}from"./token-warning-modal.11a2a197.js";/* empty css              *//* empty css              */import{_ as Za}from"./img-leverage_2x.1c577303.js";import{_ as Qa}from"./refresh-icon.127128b0.js";import{_ as da}from"./assets-card.2bf1c8c7.js";import{_ as es}from"./coin-select.de5083d6.js";import{V as ts,B as va}from"./bignumber.bdd9d0c6.js";/* empty css              */import{_ as as}from"./img-no-Positions_2x.f6278433.js";import{_ as ss}from"./img-connect-wallet_2x.47d3c17e.js";import{S as ns}from"./data.712deea2.js";const ls=""+globalThis.__publicAssetsURL("sui-image/img-no-data@2x.png");function He(t){const c={fullRpcUrl:localStorage.getItem(`${t}-currentRpclocal2`)||A[t||"Sui"].fullRpcUrl,simulationAccount:A[t||"Sui"].simulationAccount,cetus_config:A[t||"Sui"].cetus_config,clmm_pool:A[t||"Sui"].clmm_pool,integrate:A[t||"Sui"].integrate,deepbook:A[t||"Sui"].deepbook,deepbook_endpoint_v2:A[t||"Sui"].deepbook_endpoint_v2,aggregatorUrl:A[t||"Sui"].aggregatorUrl,swapCountUrl:A[t||"Sui"].swapCountUrl},o={launchpad:A[t||"Sui"].launchpad,ido:A[t||"Sui"].ido,xcetus:A[t||"Sui"].xcetus,xcetus_dividends:A[t||"Sui"].xcetus_dividends,cetus_faucet:A[t||"Sui"].cetus_faucet,xtoken:A[t||"Sui"].xtoken,xtoken_dividends:A[t||"Sui"].xtoken_dividends,token_faucet:A[t||"Sui"].token_faucet,booster:A[t||"Sui"].booster,maker_bonus:A[t||"Sui"].maker_bonus,liquidity_stratefy:A[t||"Sui"].liquidity_stratefy,vaults:A[t||"Sui"].vaults,frams:A[t||"Sui"].frams,limit_order:A[t||"Sui"].limit_order};console.log("defaultNetworkOptions####",c);const _=new Ja(c),h=new Ka(o,_),k=Ae(),m=b(()=>k);Aa(()=>{m.value.address&&(_.senderAddress=m.value.address)});const d=async()=>await h.LimitOrder.getLimitOrderTokenList(),n=async()=>await h.LimitOrder.getLimitOrderPoolList(),x=async()=>{try{return await h.LimitOrder.getOwnerLimitOrderList(h.ClmmSDK.senderAddress,"all")}catch($){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useLimitOrder.ts:71 ~ getOwnerLimitOrderList ~ error:",$)}},S=$=>({transactionBlock:$,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),s=async $=>{const{pay_coin_amount:O,price:L,expired_ts:W,pay_coin_type:j,target_coin_type:C,pay_decimal:le,target_decimal:pe}=$,re=new f(O).mul(Math.pow(10,le)).toNumber();console.log("useLimitOrder placeLimitOrder params##",$);const ie=await h.LimitOrder.placeLimitOrder({pay_coin_amount:re,price:L,expired_ts:W,pay_coin_type:j=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":j,target_coin_type:C=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":C,pay_decimal:le,target_decimal:pe});return console.log("useLimitOrder placeLimitOrder payload##",ie),S(ie)},T=async $=>{console.log("cancelOrdersByOwner params",$);const O=await h.LimitOrder.cancelOrdersByOwner($);return S(O)},M=async $=>await h.LimitOrder.getLimitOrderLogs($),I=async $=>{const O=await h.LimitOrder.claimTargetCoin({order_id:$.order_id,pay_coin_type:$.pay_coin_type,target_coin_type:$.target_coin_type});return S(O)},r=async $=>await h.LimitOrder.getLimitOrderClaimLogs($);return{getLimitOrderTokenList:d,getLimitOrderPoolList:n,getOwnerLimitOrderList:x,placeLimitOrder:s,rateToPrice:Ga.rateToPrice,cancelOrdersByOwner:T,getLimitOrderLogs:M,claimTargetCoin:I,getLimitOrderClaimLogs:r}}const Mt="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Me=Ba("LimitOrder",{state:()=>({limitTokenList:[],limitTokenObj:{},limitOrderPoolList:[],limitOrderList:[],orderNum:0,orderListLoading:!1,limitTokenMinAmountObj:{},limitOrderHistoryList:[],historyNum:0,orderHistoryObj:{},cancelOrderId:"",orderHistoryLoading:!1,currentOrderClaimHistory:[],claimHistoryLoading:!0,RATES:{},marketPriceLoading:!0,haveMarket:!0,isShowChart:JSON.parse(localStorage.getItem("isShowChart"))||!1}),actions:{async getTokenMinAmount(){const c=await He("Sui").getLimitOrderTokenList();this.limitTokenMinAmountObj=Object.fromEntries(c.map((o,_)=>[o.coin_type==Mt?"0x2::sui::SUI":o.coin_type,o])),console.log(c,"store limitorder getLimitgetTokenMinAmount###")},async getPoolList(){const c=await He("Sui").getLimitOrderPoolList();this.limitOrderPoolList=c.map(o=>({indexer_id:o.indexer_id,pay_coin_type:o.pay_coin_type==Mt?"0x2::sui::SUI":o.pay_coin_type,target_coin_type:o.target_coin_type==Mt?"0x2::sui::SUI":o.target_coin_type})),console.log(c,"store limitorder getLimitOrderPoolList###")},async getOrderList(){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:42 ~ getOrderList ~ getOrderList:");const t=He("Sui");this.orderListLoading=!0;try{const c=await t.getOwnerLimitOrderList();console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:46 ~ getOrderList ~ result:",c);const o=c.data.filter(_=>_.status=="PartialCompleted"||_.status=="Running")||[];this.limitOrderList=o.sort((_,h)=>h.created_ts-_.created_ts),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:52 ~ getOrderList ~ this.limitOrderList:",this.limitOrderList),this.orderListLoading=!1,this.cancelOrderId=""}catch(c){console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:53 ~ getOrderList ~ e:",c),this.orderListLoading=!1,this.cancelOrderId=""}},async getTokenList(){const c=(await fetch(`${A.Sui.api}/v2/sui/coin_metadata`,{method:"POST",body:JSON.stringify({})}).then(o=>o.json())).data.list||[];this.limitTokenList=c,this.limitTokenObj=Object.fromEntries(c.map((o,_)=>[o.coin_type==Mt?"0x2::sui::SUI":o.coin_type,o])),console.log(c,"store limitorder getLimitOrderTokenList###")},async getLimitOrderLogs(){},async getLimitOrderHistory(t){this.orderHistoryLoading=!0;const{data:c}=await fetch(`${A.Sui.api}/v2/sui/limit_order?wallet_address=${t}`).then(_=>_.json()),o=c.list||[];this.limitOrderHistoryList=o||[],this.orderHistoryLoading=!1},async getLimitOrderClaimHistory(t){this.currentOrderClaimHistory=[],this.claimHistoryLoading=!0;const o=await He("Sui").getLimitOrderClaimLogs(t.id);this.currentOrderClaimHistory=o.map(_=>{const h=new f(_.parsedJson.claimed_amount).div(Math.pow(10,t.target_coin_info.decimals));return{..._,..._.parsedJson,claimed_amount:h}}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: limitorder.ts:105 ~ getLimitOrderClaimHistory ~ currentOrderClaimHistory:",this.currentOrderClaimHistory),this.claimHistoryLoading=!1},setOrderNum(t){this.orderNum=t},setHistoryNum(t){this.historyNum=t},setLimitOrderLoading(t){this.cancelOrderId=t},async setRates(t){this.marketPriceLoading=!0;let c={};if(t&&t.includes("Sui"))try{c=await $fetch(`${A.Sui.api}/v2/sui/price`)}catch(h){console.log("sui pric api error ###",h),c={data:{prices:ns}}}else c=await $fetch(`${A.Aptos.api}/v2/price`);const o=c.data.prices||[],_=[];o.forEach(h=>{h.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?_.push({...h},{...h,base_symbol:"0x2::sui::SUI"}):_.push(h)}),this.RATES=Object.fromEntries(_.map(h=>[h.base_symbol,h])),this.marketPriceLoading=!1},setHaveMarket(t){this.haveMarket=t},setIsShowChart(t){localStorage.setItem("isShowChart",JSON.stringify(t)),this.isShowChart=t},limitOrderLogOut(){this.limitOrderHistoryList=[],this.limitOrderList=[]}}}),y=g(),w=g(),is=kt(),wa=b(()=>is),$a=ft(),os=b(()=>$a),_a=b(()=>os.value.chainName),Le=Ft("Sui"),rs=Da(),xa=g(!0);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:53 ~ route:",rs);se(()=>[wa.value.tokensObj,xa.value],async([t,c])=>{if(!Ue(t)){const o=ra("from"),_=ra("to");console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:61 ~ routerCoinTo:",o,_),o&&_?y.value=t[o]||await Le.getTokenBySymbol(t,o):!o&&!y.value&&(y.value=t[A[_a.value].swapDefaultPair.fromCoin]),o&&_?w.value=t[_]||await Le.getTokenBySymbol(t,_):!_&&!w.value&&(w.value=t[A[_a.value].swapDefaultPair.toCoin])}},{});const{setTransactionTxid:us,setIsShowWaiting:Et,setIsShowSuccess:cs,setIsShowRejected:ma,setTransactionDesc:ds}=$a,pa=g(!1),lt=Me(),ta=b(()=>lt),vs=b(()=>ta.value.limitOrderList),_s=Ae(),Gt=b(()=>_s),aa=async(t,c=!1)=>{const o=He("Sui");try{ds("Canceling order"),Et(!0);const h=c?vs.value.map(n=>({order_id:n.id,pay_coin_type:n.pay_coin_type,target_coin_type:n.target_coin_type})):[{order_id:t.id,pay_coin_type:t.pay_coin_type,target_coin_type:t.target_coin_type}];lt.setLimitOrderLoading(c?"all":t.id),console.log("cacelLimitOrder parmas",h);const k=await o.cancelOrdersByOwner(h),m=await Le.signAndExecuteTransactionBlock(Gt.value.currentWallet,k),d=Le.handleTx(m);if(d&&d.hash){us(d.hash),Et(!1),cs(!0),pa.value=!1;const n={title:"Transaction",desc:"Order cancelled successfully",hash:d.hash,icon:"icon-icon-Increased"};n.res=d.res,Le.showTransitionPending(n),await Le.watchTransaction(n)&&setTimeout(()=>{Le.getAccount(Gt.value.address),lt.getOrderList()},2e3)}else Et(!1),ma(!0),lt.setLimitOrderLoading("")}catch(_){Et(!1),ma(!0),pa.value=!1,lt.setLimitOrderLoading(""),console.log("trade-data.ts cancel error##",_)}},Dt=g(!1),V=g(!0),N=g(),P=g();function ha(){Dt.value=!0;const t=y.value;y.value=w.value,w.value=t,V.value=!V.value;const c=N.value,o=P.value;V.value?(N.value=P.value,P.value=c):(P.value=N.value,N.value=o),setTimeout(()=>{Dt.value=!1},300)}se(()=>xa.value,()=>{N.value="",P.value=""},{immediate:!0});const vt=g("orders"),it=g(1),Nt=g(10),X=g([]),$t=g([]),ms=g(1),_t=g(),bt=b(()=>ta.value.limitOrderList),Pt=b(()=>wa.value.tokensObj),ps=He("Sui"),mt=g(),hs=t=>{mt.value={...mt.value,[t.id]:t}},Kt=g(!1),fa=b(()=>ta.value.cancelOrderId),fs=async()=>{const t=Nt.value*it.value-Nt.value;let c=it.value*Nt.value;c=c>bt.value.length?bt.value.length:c;const o=bt.value;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:147 ~ updateOrderList ~ ordersList.value:",bt.value),console.log("trade-card updateOrderList tokenObj",Pt.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:257 ~ updateOrderList ~ orderDirectObj.value:",mt.value),o.length>0){const _=[],h=o.filter((m,d)=>d>=t&&d<c);for(let m=0;m<h.length;m++){const d=h[m];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:176 ~ updateOrderList ~ order.pay_coin_type:",await Le.getTokenListByCoinType[d.pay_coin_type]);const n=Pt.value[d.pay_coin_type]||(await Le.getTokenListByCoinType([d.pay_coin_type]))[0],x=Pt.value[d.target_coin_type]||(await Le.getTokenListByCoinType([d.target_coin_type]))[0];console.log(d,"order###"),console.log(n.decimals,"##pay_coin_info.decimals");const S=ve(ps.rateToPrice(d.rate,n.decimals,x.decimals).toString(),n.decimals),s=new f(d.total_pay_amount).div(Math.pow(10,n.decimals)).toString(),T=new f(d.total_pay_amount).mul(new f(Math.pow(10,18))).div(new f(d.rate)).ceil().div(new f(Math.pow(10,x.decimals))).toString(),M=new f(d.total_pay_amount).mul(new f(S)).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:166 ~ updateOrderList ~ totalBuyNum:",T,M);const I=new f(d.obtained_amount).div(Math.pow(10,x.decimals)).toString(),r=Je(new f(I).div(new f(T)).mul(100).toString(),2),$=new f(d.target_balance).div(Math.pow(10,x.decimals)).toString(),O=ve(new f(1).div(new f(S)).toString());console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-orders.vue:217 ~ updateOrderList ~ new Decimal(1).div(new Decimal(rate)).toString():",new f(1).div(new f(S)).toString()),_.push({...d,pay_coin_info:n,target_coin_info:x,total_pay_amount:s,rate:S,totalBuyNum:T,obtained_amount:I,obtainedRatio:r,target_balance:$,reseverRate:O,direction:mt.value&&mt.value[d.id]&&mt.value[d.id].direction||!1})}X.value=_,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-data.ts:255 ~ updateOrderList ~ pageList.value:",X.value),ms.value==1;const k=_.filter(m=>{var d;return m.id==((d=_t==null?void 0:_t.value)==null?void 0:d.id)});_t.value=k&&k.length>0?k[0]:""}$t.value=o,lt.setOrderNum(o.length),console.log("allList",$t.value),console.log("pageList",X.value)};se(()=>[bt.value,it.value,Pt.value,Gt.value.address],([t,c,o,_])=>{t&&t.length>0&&o&&!Ue(o)&&_?fs():(X.value=[],$t.value=[],lt.setOrderNum(0))},{immediate:!0});const gs=t=>(Te("data-v-49c8994a"),t=t(),Ie(),t),ys={class:"switch-direction"},bs={class:"left"},ws={key:0,class:"token-info"},$s={key:0},xs={key:1,class:"token-info"},Ss={alt:""},ks={alt:""},Cs={key:0,class:"chart-no-data"},Os=gs(()=>e("img",{src:ls,alt:""},null,-1)),Ls=["src","onload"],Ts=_e({__name:"trade-chart",setup(t){const c=g(!0);g(!0),g(),g(),g();const o=Me(),_=b(()=>o);b(()=>_.value.RATES),b(()=>_.value.marketPriceLoading);const h=b(()=>_.value.haveMarket);g(),g();const k=ft(),m=b(()=>k),d=b(()=>m.value.addressLpTokens),n=kt(),x=b(()=>n),S=b(()=>x.value.openPool),s=g(),T=()=>{var I;const M=[];if((I=S==null?void 0:S.value)==null||I.forEach(r=>{var $,O,L,W,j,C,le,pe;if(r.coinA.address.toUpperCase()===((O=($=y==null?void 0:y.value)==null?void 0:$.address)==null?void 0:O.toUpperCase())&&r.coinB.address.toUpperCase()===((W=(L=w==null?void 0:w.value)==null?void 0:L.address)==null?void 0:W.toUpperCase())||r.coinB.address.toUpperCase()===((C=(j=y==null?void 0:y.value)==null?void 0:j.address)==null?void 0:C.toUpperCase())&&r.coinA.address.toUpperCase()===((pe=(le=w==null?void 0:w.value)==null?void 0:le.address)==null?void 0:pe.toUpperCase())){const re=(d==null?void 0:d.value[r.address])||{};re&&!Ue(re)&&M.push({...r,pure_tvl_in_usd:re.pure_tvl_in_usd})}}),M&&M.length>0){const r=M.sort(($,O)=>$.pure_tvl_in_usd-O.pure_tvl_in_usd)[0];return s.value=r,console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-chart.vue:327 ~ poolInfo ~ result:",r),!1}s.value=null};return se(()=>[S.value,d.value,y.value,w.value],([M,I])=>{M&&M.length>0&&I&&!Ue(I)&&T()},{immediate:!0}),(M,I)=>{var L,W,j,C,le,pe,re,ie,De,he,Z,Q,ye,xe,be,Ee,ue,fe,Se,et,ce,tt,je,at,ke,st,Fe,nt,Re,Y,ze,ee,oe,de,We,te,ge,Ye,Ne;const r=ya,$=St,O=jt("image");return u(),p("div",{class:q(["trade-chart",!c.value&&!s.value?"trade-chart-no-pool":""])},[e("div",ys,[e("div",bs,[s.value?(u(),p("div",ws,[e("div",null,[ne(e("img",null,null,512),[[O,(L=s.value)!=null&&L.needReverse?(j=(W=s.value)==null?void 0:W.token_b)==null?void 0:j.logo_url:(le=(C=s.value)==null?void 0:C.token_a)==null?void 0:le.logo_url]]),R(r,{address:(pe=s.value)!=null&&pe.needReverse?(ie=(re=s.value)==null?void 0:re.token_b)==null?void 0:ie.address:(he=(De=s.value)==null?void 0:De.token_a)==null?void 0:he.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ne(e("img",null,null,512),[[O,(Z=s.value)!=null&&Z.needReverse?(ye=(Q=s.value)==null?void 0:Q.token_a)==null?void 0:ye.logo_url:(be=(xe=s.value)==null?void 0:xe.token_b)==null?void 0:be.logo_url]]),R(r,{address:(Ee=s.value)!=null&&Ee.needReverse?(fe=(ue=s.value)==null?void 0:ue.token_a)==null?void 0:fe.address:(et=(Se=s.value)==null?void 0:Se.token_b)==null?void 0:et.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),s.value?(u(),p("span",$s,i((ce=s.value)!=null&&ce.needReverse?(je=(tt=s.value)==null?void 0:tt.token_b)==null?void 0:je.symbol:(ke=(at=s.value)==null?void 0:at.token_a)==null?void 0:ke.symbol)+" / "+i((st=s.value)!=null&&st.needReverse?(nt=(Fe=s.value)==null?void 0:Fe.token_a)==null?void 0:nt.symbol:(Y=(Re=s.value)==null?void 0:Re.token_b)==null?void 0:Y.symbol),1)):D("",!0)])):a(y)&&a(w)?(u(),p("div",xs,[e("div",null,[ne(e("img",Ss,null,512),[[O,(ze=a(y))==null?void 0:ze.logo_url]]),R(r,{address:(ee=a(y))==null?void 0:ee.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ne(e("img",ks,null,512),[[O,(oe=a(w))==null?void 0:oe.logo_url]]),R(r,{address:(de=a(w))==null?void 0:de.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,i((We=a(y))==null?void 0:We.symbol)+" / "+i((te=a(w))==null?void 0:te.symbol),1)])):D("",!0)])]),!c.value&&!s.value?(u(),p("div",Cs,[Os,e("span",null,i(h.value?"Price chart is currently not available for this pair, but you can still place your limit orders.":"No data avaliable"),1)])):D("",!0),ne(e("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",src:`https://birdeye.so/tv-widget/${(Ye=(ge=s.value)==null?void 0:ge.token_a)==null?void 0:Ye.address}/${(Ne=s.value)==null?void 0:Ne.address}?chain=sui`,onload:()=>{c.value=!1}},null,8,Ls),[[ot,!c.value&&s.value]]),ne(R($,null,null,512),[[ot,c.value]])],2)}}});const Xo=me(Ts,[["__scopeId","data-v-49c8994a"]]),Sa=t=>(Te("data-v-2c8f9476"),t=t(),Ie(),t),Is={class:"custom-expiry"},Ms={class:"input-box"},Es=Sa(()=>e("div",{class:"minutes"},"Hours",-1)),Rs={class:"input-box"},Ns=Sa(()=>e("div",{class:"minutes"},"Minutes",-1)),Ps=_e({__name:"custom-expires-modal",setup(t){const c=g(),o=g(),_=g({}),h=(n,x)=>{const S=(n||0)*60+Number(x||0),s=Math.floor(S/(60*24)),T=Math.floor(S%(60*24)/60),M=S%60;let I="";s>0&&(I+=s+"d "),T>0&&(I+=T+"h "),M>0&&(I+=M+"m "),_.value={timeText:I.trim()||"0 m",time:S*60*1e3}};se(()=>[c.value,o.value],([n,x])=>{h(n,x)},{immediate:!0});const k=n=>{const x=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");n.target.value=n.target.value.replace(x,"$1"),c.value=n.target.value,console.log(c.value,"##inputChange")},m=n=>{const x=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");n.target.value=n.target.value.replace(x,"$1"),o.value=n.target.value},d=b(()=>!c.value&&!o.value||Number(c.value)==0&&!o.value||Number(o.value)==0&&!c.value||Number(c.value)==0&&Number(o.value)==0);return(n,x)=>{const S=Zt,s=ut;return u(),F(a(Xt),{title:"Custom Expiry Period",visible:!0,width:"440px",footer:null,onCancel:x[3]||(x[3]=T=>n.$emit("closeModal"))},{default:z(()=>[e("div",Is,[e("div",Ms,[R(S,{value:c.value,"onUpdate:value":x[0]||(x[0]=T=>c.value=T),placeholder:"0",onChange:k},null,8,["value"]),Es]),e("div",Rs,[R(S,{value:o.value,"onUpdate:value":x[1]||(x[1]=T=>o.value=T),placeholder:"0",onChange:m},null,8,["value"]),Ns]),R(s,{class:"set-period",disabled:d.value,onClick:x[2]||(x[2]=T=>n.$emit("sendTime",_.value))},{default:z(()=>[U("Set Period")]),_:1},8,["disabled"])])]),_:1})}}});const Us=me(Ps,[["__scopeId","data-v-2c8f9476"]]),Xe=t=>(Te("data-v-8d8c006a"),t=t(),Ie(),t),Hs=Xe(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),As=[Hs],Bs={class:"trade-cofirm-content"},Ds={class:"coin-info"},js={class:"from-coin-info"},Fs={class:"left"},zs={class:"coin-amount"},Ws={class:"coin-symbol"},Ys={class:"right"},Vs={class:"to-coin-info"},qs={class:"left"},Js={class:"coin-amount"},Ks={class:"coin-symbol"},Gs={class:"right"},Xs=Xe(()=>e("div",{class:"to-swap-logo"},null,-1)),Zs={class:"trade-info"},Qs={class:"price"},en=Xe(()=>e("div",{class:"label"},"Pirce",-1)),tn={class:"text"},an={key:0},sn={key:1},nn=Xe(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),ln=Xe(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),on=[nn,ln],rn={class:"expires-in"},un=Xe(()=>e("div",{class:"label"},"Expires in",-1)),cn={class:"text"},dn=Xe(()=>e("div",{class:"trade-tips1"}," You will receive exactly what you have specified if your order is fully filled in the end. ",-1)),vn=Xe(()=>e("div",{class:"trade-tips2"}," Please note that your order may not be filled immediately after the price is triggered, depending on pending sequence and liquidity depth. ",-1)),_n=_e({__name:"trade-confirm",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},direction:{type:Boolean,default:!1},price:{type:String,default:""},currentExpires:{type:String,default:""}},emits:["to-trade","close"],setup(t,{emit:c}){const o=t,_=c,h=g(!1),k=b(()=>new f(1).div(new f(o.price)).toString()),m=async()=>{_("to-trade")};return(d,n)=>{const x=ut,S=jt("image");return u(),F(a(Xt),{title:"Review your order",width:"440px",footer:null,visible:!0,class:"trade-confirm-modal"},{closeIcon:z(()=>[(u(),p("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:n[0]||(n[0]=s=>_("close"))},As))]),default:z(()=>{var s,T,M,I,r,$,O,L;return[e("div",Bs,[e("div",Ds,[e("div",js,[e("div",Fs,[e("div",zs,i(t.fromCoinAmount&&a(H)(t.fromCoinAmount)),1),e("div",Ws,i(t.fromCoin&&t.fromCoin.symbol),1)]),e("div",Ys,[ne(e("img",null,null,512),[[S,t.fromCoin&&t.fromCoin.logo_url]])])]),e("div",Vs,[e("div",qs,[e("div",Js,i(t.toCoinAmount&&a(H)(t.toCoinAmount)),1),e("div",Ks,i(t.toCoin&&t.toCoin.symbol),1)]),e("div",Gs,[ne(e("img",null,null,512),[[S,t.toCoin&&t.toCoin.logo_url]])]),Xs])]),e("div",Zs,[e("div",Qs,[en,e("div",tn,[t.direction?(u(),p("span",sn,i(a(H)(a(ve)(h.value?k.value:t.price,9)))+" "+i(h.value?($=t.fromCoin)==null?void 0:$.symbol:(r=t.toCoin)==null?void 0:r.symbol)+" per "+i(h.value?(L=t.toCoin)==null?void 0:L.symbol:(O=t.fromCoin)==null?void 0:O.symbol),1)):(u(),p("span",an,i(a(H)(a(ve)(h.value?k.value:t.price,9)))+" "+i(h.value?(T=t.toCoin)==null?void 0:T.symbol:(s=t.fromCoin)==null?void 0:s.symbol)+" per "+i(h.value?(I=t.fromCoin)==null?void 0:I.symbol:(M=t.toCoin)==null?void 0:M.symbol),1)),e("div",{class:"right",onClick:n[1]||(n[1]=W=>h.value=!h.value)},on)])]),e("div",rn,[un,e("div",cn,i(t.currentExpires),1)])]),dn,vn]),R(x,{class:"big-btn trade-confirm-btn",onClick:n[2]||(n[2]=W=>m())},{default:z(()=>[U(" Place Order ")]),_:1})]}),_:1})}}});const mn=me(_n,[["__scopeId","data-v-8d8c006a"]]),ct=t=>(Te("data-v-00c9758e"),t=t(),Ie(),t),pn={class:"trade-card"},hn={class:"trade-content"},fn={class:"trade-card-title"},gn={class:"trade-tab"},yn=["onClick"],bn={key:0},wn={class:"new-style-tooltip-text"},$n={class:"icon-bg"},xn=ct(()=>e("use",{"xlink:href":"#icon-icon_kline"},null,-1)),Sn=[xn],kn={class:"icon-bg"},Cn={class:"trade-card-content"},On={class:"card-item"},Ln={class:"card-item"},Tn=ct(()=>e("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),In=[Tn],Mn={class:"sell-setting"},En={class:"sell-rate"},Rn={class:"top"},Nn={key:0,class:"direction-text"},Pn={key:1,class:"direction-text"},Un={class:"bottom"},Hn={class:"coin-symbol"},An=ct(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),Bn=ct(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Dn=[An,Bn],jn={class:"top"},Fn=ct(()=>e("span",null,"Expiry in",-1)),zn=ct(()=>e("use",{"xlink:href":"#icon-icon-tips2"},null,-1)),Wn=[zn],Yn={class:"bottom"},Vn=ct(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),qn=[Vn],Jn=["onClick"],Kn={class:"market-price-tips"},Gn=_e({__name:"trade-card",setup(t){const c=ja(Fa,{style:{fontSize:"14px",marginLeft:"4px",color:"#75c8ff"},spin:!0}),{t:o}=za(),_=[{label:"Swap",link:"/swap"},{label:"Limit",link:"/limit"}],h=g("Limit"),k=Ae(),m=b(()=>k),d=b(()=>m.value.assets&&y.value&&m.value.assets[y.value.address]?ca(m.value.assets[y.value.address].balance,y.value.decimals):0),n=b(()=>m.value.assets&&w.value&&m.value.assets[w.value.address]?ca(m.value.assets[w.value.address].balance,w.value.decimals):0),x=v=>{v==="fromCoin"?(V.value=!0,N.value=d.value>0?y.value.symbol=="SUI"?new f(Number(d.value)).sub(new f(.05)).lt(new f(0))?"0":new f(Number(d.value)).sub(new f(.05)).toString():String(d.value):""):(V.value=!1,P.value=n.value>0?w.value.symbol=="SUI"?new f(Number(n.value)).sub(new f(.05)).lt(new f(0))?"0":new f(Number(n.value)).sub(new f(.05)).toString():String(n.value):"")},S=v=>{v==="fromCoin"?(V.value=!0,N.value=d.value>0?Je(new f(Number(d.value)).div(2).toString(),y.value.decimals).toString():""):(V.value=!1,P.value=n.value>0?Je(new f(Number(n.value)).div(2).toString(),w.value.decimals).toString():"")},s=g(""),T=g(""),M=g(""),I=g(!1),r=v=>{var l,B,K,ae;s.value=v,v==="fromCoin"?(T.value=((l=w.value)==null?void 0:l.address)||"",M.value=((B=y.value)==null?void 0:B.address)||""):(T.value=((K=y.value)==null?void 0:K.address)||"",M.value=((ae=w.value)==null?void 0:ae.address)||""),I.value=!0},$=["5 Minutes","10 Minutes","30 Minutes","1 Hour","1 Day","3 Days","7 Days","1 Month","Custom"],O=v=>{switch(v){case"5 Minutes":return 3e5;case"10 Minutes":return 6e5;case"30 Minutes":return 18e5;case"1 Hour":return 36e5;case"1 Day":return 864e5;case"7 Days":return 6048e5;case"1 Month":return 2592e6;default:return 0}},L=g(!1),W=g("7 Days"),j=g(!1),C=g(),le=g(0),pe=v=>{W.value=v.timeText,le.value=v.time,j.value=!1},re=g(),ie=v=>{re.value=s.value==="fromCoin"?y.value:w.value;let l=!1;s.value==="fromCoin"?(N.value="",w.value&&v.address.toLowerCase()===(w==null?void 0:w.value.address.toLowerCase())&&(w.value=y.value,l=!0),y.value=v):(y.value&&(P.value="",v.address.toLowerCase()===(y==null?void 0:y.value.address.toLowerCase())&&(y.value=w.value,l=!0)),w.value=v),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:416 ~ onCoinSelect ~ toCoin.value:",w.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:453 ~ onCoinSelect ~ fromCoin.value:",y.value),l||(ee.value=!1),I.value=!1},De=g(20),he=g(0),Z=g(null),Q=g(!1),ye=()=>{Q.value||(clearInterval(Z.value),m.value.address&&(ce.getOrderList(),Y.getAccount(m.value.address)),de.value||te.value?Yt():Ot(!1),he.value=0,Q.value=!0,setTimeout(()=>{Q.value=!1,xe()},1e3))},xe=()=>{Z.value=setInterval(()=>{Q.value=!1,he.value<De.value&&(he.value+=1,he.value===De.value&&ye())},1e3)};Wa(()=>{xe(),window.addEventListener("click",()=>{L.value=!1})}),Ya(()=>{clearInterval(Z.value)});const be=()=>{if(V.value&&(!N.value||N.value==0)||!V.value&&(!P.value||P.value==0))return!1;if(C.value<=0&&dt.value)return V.value?P.value="":N.value="",!1;if(Number(N.value)<=0&&Number(P.value)<=0)return!1;if(C.value<=0&&!dt.value&&N.value>0&&P.value>0)return console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:480 ~ updateAmounts ~ fromCoinAmount.value&&toCoinAmount.value:",N.value>0&&P.value>0),C.value=ee.value?ve(new f(P.value||0).div(new f(N.value||0)).toString()):ve(new f(N.value||0).div(new f(P.value||0)).toString()),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:497 ~ updateAmounts ~ fixedFromCoin.value :",V.value),!1;if(C.value<=0&&!dt.value)return!1;V.value?ee.value?P.value=Je(new f(N.value).mul(new f(C.value||0)).toString(),w.value.decimals):P.value=Je(new f(N.value).div(new f(C.value||0)).toString(),w.value.decimals):ee.value?N.value=Je(new f(P.value).div(new f(C.value||0)).toString(),y.value.decimals):N.value=Je(new f(P.value).mul(new f(C.value||0)).toString(),y.value.decimals)};se(N,qt((v,l)=>{v&&v!==0&&V.value&&be(),v==""&&V.value&&(P.value="")},100)),se(C,qt((v,l)=>{v&&v!==0&&be(),v==""&&V.value&&(P.value="")},100)),se(P,qt((v,l)=>{v&&v!==0&&!V.value&&be(),v==""&&!V.value&&(N.value="")},100));const Ee=kt(),ue=b(()=>Ee),fe=b(()=>{var K;const l=(K=ue.value.RATES[y.value.address])==null?void 0:K.price,B=new f(l||0).mul(N.value||0).toNumber();if(l){if(B<5&&l)return!0}else return!1;return!1}),Se=b(()=>!y.value||!w.value?o("modal.selectTokenModalTitle"):Ne.value?!Number(N.value)||!Number(P.value)?o("button.enterAmount"):fe.value?"Order size should be higher than $5":Number(N.value)>Number(d.value)?o("button.insufficientBalance",{name:y.value.symbol}):"Place Limit Order":"No Available Route"),et=b(()=>!!(!y.value||!w.value||!C.value||fe.value||!Number(N.value)&&!Number(P.value)||Number(N.value)>Number(d.value)||Number(N.value)==0||Number(P.value)==0||!Ne.value)),ce=Me(),tt=b(()=>ce),je=ft(),{setTransactionTxid:at,setIsShowWaiting:ke,setIsShowSuccess:st,setIsShowRejected:Fe,setTransactionDesc:nt}=je,Re=g(!1),Y=Ft("Sui"),ze=async()=>{Tt.value=!1;const v=He("Sui"),l=Date.parse(new Date().toString())+(O(W.value)||le.value);try{nt("Creating order"),ke(!0);const K={pay_coin_amount:N.value,price:ee.value?C.value:new f(1).div(new f(C.value)).toString(),expired_ts:l,pay_coin_type:y.value.address,target_coin_type:w.value.address,pay_decimal:y.value.decimals,target_decimal:w.value.decimals};console.log("placeLimitOrder parmas",K);const ae=await v.placeLimitOrder(K),yt=await Y.signAndExecuteTransactionBlock(m.value.currentWallet,ae),Ce=Y.handleTx(yt);if(Ce&&Ce.hash){at(Ce.hash),ke(!1),st(!0),Re.value=!1;const Pe={title:"Transaction",desc:"Order placed successfully",hash:Ce.hash,icon:"icon-icon-Increased"};Pe.res=Ce.res,Y.showTransitionPending(Pe),await Y.watchTransaction(Pe)&&setTimeout(()=>{Y.getAccount(m.value.address),ce.getOrderList()},1e3)}else ke(!1),Fe(!0)}catch(B){ke(!1),Fe(!0),Re.value=!1,console.log("trade-card openOrder error##",B)}},ee=g(!1),oe=g(),de=g(""),We=g(),te=g("0"),ge=g(""),Ye=g(),Ne=g(!0),Ia=async()=>{var B,K;let v;if(V.value){const ae=new f(1).mul(Math.pow(10,(B=y==null?void 0:y.value)==null?void 0:B.decimals)).toString();v=new va(ae)}else{const ae=new f(1).mul(Math.pow(10,(K=w==null?void 0:w.value)==null?void 0:K.decimals)).toString();v=new va(ae)}const l=await Y.getBestRouterByServer(y,w,v,V.value,m.value.address,!1,!1);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:805 ~ getTokenRouter ~ res:",l),l&&l.splitPaths&&l.splitPaths.length>0?(Ne.value=!0,ce.setHaveMarket(!0)):(Ne.value=!1,ce.setHaveMarket(!1))},Ma=async()=>{var Ce,Pe;const l=(await $fetch(`${A.Sui.api}/v2/sui/price?base_symbol_address_pair=${ua(y.value.address)},${ua(w.value.address)}`)).data.prices||[],B=[];l.forEach(Oe=>{Oe.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?B.push({...Oe,base_symbol:"0x2::sui::SUI"}):B.push(Oe)});const K=Object.fromEntries(B.map(Oe=>[Oe.base_symbol,Oe]));console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:872 ~ setMarketPriceFromRate ~ RATES:",K);const ae=new f((Ce=K[w.value.address])==null?void 0:Ce.price),yt=new f((Pe=K[y.value.address])==null?void 0:Pe.price);return{inputAmount:ae,outputAmount:yt}},zt=g(!1),Ot=async v=>{v||(zt.value=!0);let l;try{l=await Ma()}catch(B){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:787 ~ setMarketPrice ~ error:",B)}if(te.value="",console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:794 ~ setMarketPrice ~ res:",l),!l||l.outputAmount.toNumber()<=0&&l.inputAmount.toNumber()<=0)return Ye.value=!1,ge.value="",de.value="",te.value="",!1;Ye.value=!0,v?oe.value=ee.value?ve(l.outputAmount.div(l.inputAmount).toString()):ve(l.inputAmount.div(l.outputAmount).toString()):C.value=ee.value?ve(l.outputAmount.div(l.inputAmount).toString()):ve(l.inputAmount.div(l.outputAmount).toString()),setTimeout(()=>{zt.value=!1},1e3)},Wt=g(!1),Yt=async()=>{Wt.value=!0,await Ot(!0),ge.value="",de.value="",te.value="";const v=new f(C.value).sub(new f(oe.value)).div(new f(oe.value)).mul(100);te.value=v.toNumber().toFixed(2);const l=Math.abs(v.toNumber()).toFixed(2);de.value=`Limit order price is ${l}% ${te.value>0?"higher":"lower"} than the market.`,ee.value?C.value>oe.value?(ge.value="",We.value="#68FFD8"):oe.value>C.value&&(ge.value=`Your limit order price is ${l}% ${te.value>0?"higher":"lower"} than market. You are selling at a much higher rate. We recommend you to use`,We.value="#ffb62d"):C.value>oe.value?(ge.value=`Your limit order price is ${l}% ${te.value>0?"higher":"lower"} than market. You are buying at a much lower rate. We recommend you to use`,We.value="#ffb62d"):oe.value>C.value&&(ge.value="",We.value="#68FFD8"),Wt.value=!1};se(()=>[y.value,w.value],([v,l])=>{v&&l&&(C.value="",Ot(!1))},{immediate:!0});const dt=g(!1),Ea=v=>{const l=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,18})?).*$");v.target.value=v.target.value.replace(l,"$1"),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1002 ~ priceChange ~ e.target.value:",v.target.value),C.value=v.target.value,ge.value="",de.value="",te.value="",dt.value=!0,C.value&&C.value>0&&Ne.value&&Yt()},Ra=()=>{ee.value=!ee.value,C.value=ve(new f(1).div(new f(C.value)).toString()),C.value>0&&Ne.value&&Yt()},Ve=g(),qe=g(),Lt=g(!1),la=(v,l)=>{var K,ae;const B=je.importTokenListObj;v&&!Ue(v)&&v!=null&&v.isSelfBuilt&&!(B!=null&&B.hasOwnProperty(v==null?void 0:v.address))&&(s.value="fromCoin",Ve.value=v),l&&!Ue(l)&&l!=null&&l.isSelfBuilt&&!(B!=null&&B.hasOwnProperty(l==null?void 0:l.address))&&(s.value="toCoin",qe.value=l),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1034 ~ getTokenSource ~ warningFromCoin.value:",Ve.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-card.vue:1046 ~ getTokenSource ~ warningToCoin.value:",qe.value),((K=Ve==null?void 0:Ve.value)!=null&&K.address||(ae=qe==null?void 0:qe.value)!=null&&ae.address)&&(Lt.value=!0)};se(()=>[y.value,w.value],([v,l])=>{v&&!Ue(v)&&la(v,{}),l&&!Ue(l)&&la({},l)},{immediate:!0});const Na=()=>{s.value==="fromCoin"?y.value=re.value:w.value=re.value,Lt.value=!1,Ve.value="",qe.value=""},Pa=b(()=>{var v,l;return`/swap?from=${(v=y==null?void 0:y.value)==null?void 0:v.address}&to=${(l=w==null?void 0:w.value)==null?void 0:l.address}`}),Ua=Va();se(()=>[y.value,w.value],([v,l])=>{if(v&&l){if(Ia(),be(),v||l){const B=`/limit/${v==null?void 0:v.address}-${l==null?void 0:l.address}`;Ua.push(B)}}else ce.setHaveMarket(!1)},{immediate:!0});const Tt=g(!1),Vt=b(()=>tt.value.isShowChart);return(v,l)=>{var Pe,Oe,ia,oa;const B=Qt,K=St,ae=ut,yt=Zt,Ce=Xa;return u(),p("div",pn,[e("div",hn,[e("div",fn,[e("div",gn,[(u(),p(J,null,$e(_,E=>e("div",{key:E,class:q([h.value==E.label?"trade-tab-item-active":"","trade-tab-item"]),onClick:Ha=>v.$router.push(E.link)},[e("span",null,i(E.label),1),E.label=="Limit"?(u(),p("div",bn,[R(ts,{top:"15px"})])):D("",!0)],10,yn)),64))]),e("div",null,[R(B,{"overlay-class-name":"new-style-tooltip"},{title:z(()=>[e("div",wn,i(Vt.value?"Hide reference price":"View reference price"),1)]),default:z(()=>[e("div",$n,[(u(),p("svg",{class:q(["chart-icon",Vt.value?"active-chart-icon":""]),"aria-hidden":"true",onClick:l[0]||(l[0]=E=>a(ce).setIsShowChart(!Vt.value))},Sn,2))])]),_:1}),e("div",kn,[R(Qa,{loading:Q.value,"auto-refresh-time":De.value,countdown:he.value,"tooltip-placement":"left",onClickRefresh:ye},null,8,["loading","auto-refresh-time","countdown"])])])]),e("div",Cn,[e("div",On,[R(da,{modelValue:a(N),"onUpdate:modelValue":l[1]||(l[1]=E=>Bt(N)?N.value=E:null),"input-value":a(N),"coin-symbol":a(y)?a(y).symbol:null,"coin-name":a(y)?a(y).name:null,balance:d.value,"coin-icon":a(y)?a(y).logo_url:"",address:a(y)?a(y).address:"","swap-direction":"From",title:"Sell",onOnMax:l[2]||(l[2]=E=>x("fromCoin")),onOnHalf:l[3]||(l[3]=E=>S("fromCoin")),onOnInput:l[4]||(l[4]=E=>{N.value=E,V.value=!0,dt.value=!1}),onOnSelect:l[5]||(l[5]=E=>r("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("div",Ln,[R(da,{modelValue:a(P),"onUpdate:modelValue":l[6]||(l[6]=E=>Bt(P)?P.value=E:null),"input-value":a(P),havemax:!1,"coin-symbol":a(w)?a(w).symbol:null,"coin-name":a(w)?a(w).name:null,balance:n.value,"swap-direction":"To","coin-icon":a(w)?a(w).logo_url:"",address:a(w)?a(w).address:"",havehalf:!1,title:"Buy",onOnInput:l[7]||(l[7]=E=>{P.value=E,V.value=!1,dt.value=!1}),onOnSelect:l[8]||(l[8]=E=>r("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("img",{class:q(a(Dt)?"gang animationex":"gang"),src:Za,alt:""},null,2),e("div",{class:"exchange sui-exchange",onClick:l[9]||(l[9]=wt((...E)=>a(ha)&&a(ha)(...E),["stop"]))},[(u(),p("svg",{class:q(a(Dt)?"icon animationex":"icon"),"aria-hidden":"true"},In,2))])]),e("div",Mn,[e("div",En,[e("div",Rn,[e("div",null,[ee.value?(u(),p("div",Nn," Sell "+i((Pe=a(y))==null?void 0:Pe.symbol)+" at rate",1)):(u(),p("div",Pn,"Buy "+i((Oe=a(w))==null?void 0:Oe.symbol)+" at rate ",1)),Wt.value?(u(),F(K,{key:2,indicator:a(c)},null,8,["indicator"])):(u(),F(B,{key:3},qa({default:z(()=>[C.value&&oe.value&&Ye.value&&Number(te.value)!==0?(u(),p("div",{key:0,class:"rate",style:Jt({color:We.value})},i(Number(te.value)>0&&Number(te.value)<1e4?`+${te.value}`:Number(te.value)>1e4?">10000":te.value)+"% ",5)):D("",!0)]),_:2},[de.value?{name:"title",fn:z(()=>[U(i(de.value),1)]),key:"0"}:void 0]),1024))]),Ye.value?(u(),F(ae,{key:0,loading:zt.value,class:"set-market max-btn",onClick:l[10]||(l[10]=E=>Ot(!1))},{default:z(()=>[U("Market")]),_:1},8,["loading"])):D("",!0)]),e("div",Un,[R(yt,{value:C.value,"onUpdate:value":l[11]||(l[11]=E=>C.value=E),placeholder:"0.0",onOnInput:l[12]||(l[12]=()=>{V.value=!0}),onChange:Ea},null,8,["value"]),e("div",Hn,[e("span",null,i(ee.value?(ia=a(w))==null?void 0:ia.symbol:(oa=a(y))==null?void 0:oa.symbol),1),e("div",{class:"right",onClick:Ra},Dn)])])]),e("div",{class:"sell-expires",onClick:l[14]||(l[14]=wt(E=>L.value=!L.value,["stop"]))},[e("div",jn,[Fn,R(B,{"overlay-class-name":"expiry-tooltip",placement:"left"},{title:z(()=>[U("No extra cancellation fee will be charged for order expiry or cancellation. Gas will be consumed upon manual cancellation.")]),default:z(()=>[(u(),p("svg",{class:"icon","aria-hidden":"true",onClick:l[13]||(l[13]=wt(()=>{},["stop"]))},Wn))]),_:1})]),e("div",Yn,[e("span",null,i(W.value),1),(u(),p("svg",{class:"icon","aria-hidden":"true",style:Jt(L.value?{transform:"rotate(180deg)"}:{})},qn,4))]),e("div",{class:"expires-list",style:Jt(L.value?{display:"block"}:{})},[(u(),p(J,null,$e($,E=>e("div",{key:E,class:q(["expirer-item",E==W.value?"expirer-item-active":""]),onClick:Ha=>E=="Custom"?j.value=!0:W.value=E},i(E),11,Jn)),64))],4)])]),ne(e("div",Kn,[U(i(ge.value)+" ",1),e("span",{onClick:l[15]||(l[15]=E=>v.$router.push(Pa.value))},"Cetus Swap"),U(" instead. ")],512),[[ot,C.value&&oe.value&&Number(te.value)!==0&&ge.value&&Ye.value]])]),m.value&&m.value.address?(u(),F(ae,{key:0,disabled:et.value,class:q(["place-order-btn",Se.value&&Se.value.length>40?"place-order-btn-size":""]),loading:Re.value,onClick:l[16]||(l[16]=E=>Tt.value=!0)},{default:z(()=>[U(i(Se.value),1)]),_:1},8,["disabled","class","loading"])):(u(),F(ae,{key:1,class:"place-order-btn",onClick:l[17]||(l[17]=E=>m.value.setIsShowWalletModal(!0))},{default:z(()=>[U("Connect wallet")]),_:1})),j.value?(u(),F(Us,{key:2,onCloseModal:l[18]||(l[18]=E=>j.value=!1),onSendTime:pe})):D("",!0),I.value?(u(),F(es,{key:3,"existing-coins":T.value,"last-select-coin":M.value,"have-import-btn":!0,onOnSelect:ie,onOnClose:l[19]||(l[19]=E=>I.value=!1)},null,8,["existing-coins","last-select-coin"])):D("",!0),Lt.value?(u(),F(Ce,{key:4,"from-coin":Ve.value,"to-coin":qe.value,"is-import-modal":!0,onClose:Na,onClickContinue:l[20]||(l[20]=()=>{Lt.value=!1,Ve.value="",qe.value=""})},null,8,["from-coin","to-coin"])):D("",!0),Tt.value?(u(),F(mn,{key:5,"from-coin":a(y),"to-coin":a(w),"from-coin-amount":a(N),"to-coin-amount":a(P),direction:ee.value,price:C.value,"current-expires":W.value,onClose:l[21]||(l[21]=E=>Tt.value=!1),onToTrade:ze},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","direction","price","current-expires"])):D("",!0)])}}});const Zo=me(Gn,[["__scopeId","data-v-00c9758e"]]),ka=t=>(Te("data-v-5890ec9c"),t=t(),Ie(),t),Xn={key:0,class:"no-data"},Zn=ka(()=>e("img",{src:as,alt:""},null,-1)),Qn={key:1,class:"no-data"},el=ka(()=>e("img",{src:ss,alt:""},null,-1)),tl=_e({__name:"trade-no-data",props:{platform:{type:String,default:"platform"}},setup(t){const c=Ae(),o=h=>{switch(h){case"orders":return"You don't have any open orders yet.";case"history":return"You don't have any order history.";case"claim":return"No History."}},_=b(()=>c);return(h,k)=>{const m=ut;return _.value&&_.value.address?(u(),p("div",Xn,[Zn,e("span",null,i(o(t.platform)),1)])):(u(),p("div",Qn,[el,R(m,{class:"connect-wallet",onClick:k[0]||(k[0]=d=>_.value.setIsShowWalletModal(!0))},{default:z(()=>[U("Connect Wallet")]),_:1})]))}}});const sa=me(tl,[["__scopeId","data-v-5890ec9c"]]),al={class:"trade-info"},sl={alt:""},nl={alt:""},ll=_e({__name:"trade-info",props:{order:{type:Object,default:()=>({})}},setup(t){return(c,o)=>{var k,m,d,n,x,S,s,T,M,I,r,$,O,L;const _=ya,h=jt("image");return u(),p("div",al,[e("div",null,[ne(e("img",sl,null,512),[[h,(m=(k=t.order)==null?void 0:k.pay_coin_info)==null?void 0:m.logo_url]]),R(_,{address:(n=(d=t.order)==null?void 0:d.pay_coin_info)==null?void 0:n.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("div",null,[ne(e("img",nl,null,512),[[h,(S=(x=t.order)==null?void 0:x.target_coin_info)==null?void 0:S.logo_url]]),R(_,{address:(T=(s=t.order)==null?void 0:s.target_coin_info)==null?void 0:T.address,"style-params":{width:"12px",height:"12px",right:"0px",bottom:"0px",zIndex:"5"}},null,8,["address"])]),e("span",null,i(a(H)((M=t.order)==null?void 0:M.total_pay_amount))+" "+i((r=(I=t.order)==null?void 0:I.pay_coin_info)==null?void 0:r.symbol)+" â†’ "+i(a(H)(($=t.order)==null?void 0:$.totalBuyNum))+" "+i((L=(O=t.order)==null?void 0:O.target_coin_info)==null?void 0:L.symbol),1)])}}});const Ct=me(ll,[["__scopeId","data-v-bb33266f"]]),Ze=t=>(Te("data-v-34840059"),t=t(),Ie(),t),il={class:"claim-modal-content"},ol=Ze(()=>e("div",{class:"desc"}," For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ",-1)),rl={class:"order-info-detail"},ul={class:"order-info"},cl=Ze(()=>e("div",{class:"label"},"Price",-1)),dl={class:"text"},vl=Ze(()=>e("div",{class:"label"},"Filled size",-1)),_l={class:"text"},ml=Ze(()=>e("div",{class:"label"},"Expiry",-1)),pl={class:"text"},hl={class:"tab"},fl=["onClick"],gl={key:0,class:"claim-content"},yl={class:"inp-box"},bl=Ze(()=>e("div",{class:"top"},[e("div",{class:"avalibale-claim"},"Avalibale to claim")],-1)),wl={class:"bottom"},$l={class:"token-info"},xl={alt:""},Sl={key:1,class:"history-list"},kl={class:"amount"},Cl=Ze(()=>e("div",{class:"label"},"Amount",-1)),Ol={class:"text"},Ll={alt:""},Tl={class:"time"},Il=Ze(()=>e("div",{class:"label"},"Time",-1)),Ml={class:"text"},El=["href"],Rl=Ze(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),Nl=[Rl],Pl={key:2,class:"loading-box"},Ul=_e({__name:"trade-claim-modal",props:{order:{type:Object,default:()=>({})}},emits:["closeModal"],setup(t,{emit:c}){const o=t,_=["Claim","History"],h=g("Claim"),k=g(),m=Z=>{const Q=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.order.target_coin_info.decimals}})?).*$`);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ props.order.target_coin_info.decimals:",o.order.target_coin_info.decimals),console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:128 ~ reg:",Q),k.value=Z.target.value.replace(Q,"$1")},d=g(!0);se(()=>o.order.target_balance,Z=>{Z&&Z>0&&d.value?(k.value=Z,d.value=!1):k.value=0},{immediate:!0});const n=b(()=>!!(k.value>o.order.target_balance||C.value||!k.value||o.order.target_balance==0)),x=b(()=>k.value>o.order.target_balance?"Maximum amount that can be withdrawn":k.value?"Confirm Claim":"Claim"),S=ft(),s=b(()=>S),T=Ae(),M=b(()=>T),I=He("Sui"),{setTransactionTxid:r,setIsShowWaiting:$,setIsShowSuccess:O,setIsShowRejected:L,setTransactionDesc:W}=S,j=Ft("Sui"),C=g(!1),le=Me(),pe=b(()=>le),re=async()=>{var Z,Q;C.value=!0;try{const ye=`Claim ${H(k.value)} ${(Q=(Z=o.order)==null?void 0:Z.target_coin_info)==null?void 0:Q.symbol}`;W(ye),$(!0);const xe={order_id:o.order.id,pay_coin_type:o.order.pay_coin_type,target_coin_type:o.order.target_coin_type};console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:194 ~ confirmClaim ~ params:",xe);const be=await I.claimTargetCoin(xe),Ee=await j.signAndExecuteTransactionBlock(M.value.currentWallet,be),ue=j.handleTx(Ee);if(ue&&ue.hash){r(ue.hash),$(!1),O(!0);const fe={title:"Transaction",desc:"Claim successfully",hash:ue.hash,icon:"icon-icon-Increased"};fe.res=ue.res,j.showTransitionPending(fe),await j.watchTransaction(fe)&&(setTimeout(()=>{j.getAccount(M.value.address),le.getOrderList()},2e3),setTimeout(()=>{k.value=0,C.value=!1},4e3))}else $(!1),L(!0)}catch(ye){console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-claim-modal.vue:222 ~ confirmClaim ~ error:",ye),$(!1),L(!0),C.value=!1}};se(()=>h.value,Z=>{Z=="History"&&le.getLimitOrderClaimHistory(o.order)},{immediate:!0});const ie=b(()=>pe.value.currentOrderClaimHistory),De=b(()=>s.value.currentExplorer),he=b(()=>pe.value.claimHistoryLoading);return(Z,Q)=>{const ye=Zt,xe=ut,be=St,Ee=jt("image");return u(),F(a(Xt),{title:"Claim",visible:!0,width:"440px",footer:null,onCancel:Q[1]||(Q[1]=ue=>Z.$emit("closeModal"))},{default:z(()=>{var ue,fe,Se,et,ce,tt,je,at,ke,st,Fe,nt,Re;return[e("div",il,[ol,e("div",rl,[R(Ct,{order:t.order},null,8,["order"]),e("div",ul,[e("div",null,[cl,e("div",dl,i(a(H)(t.order.reseverRate))+" "+i((fe=(ue=t.order)==null?void 0:ue.pay_coin_info)==null?void 0:fe.symbol)+" per "+i((et=(Se=t.order)==null?void 0:Se.target_coin_info)==null?void 0:et.symbol),1)]),e("div",null,[vl,e("div",_l,[U(i(a(H)((ce=t.order)==null?void 0:ce.obtained_amount))+"/"+i(a(H)((tt=t.order)==null?void 0:tt.totalBuyNum))+" "+i((at=(je=t.order)==null?void 0:je.target_coin_info)==null?void 0:at.symbol)+" ",1),e("span",null,"("+i((ke=t.order)==null?void 0:ke.obtainedRatio)+"%)",1)])]),e("div",null,[ml,e("div",pl,i(a(Ge)(t.order.expire_ts,""))+" (UTC) ",1)])])]),e("div",hl,[(u(),p(J,null,$e(_,Y=>e("div",{key:Y,class:q(["tab-item",h.value==Y?"tab-item-active":""]),onClick:ze=>h.value=Y},i(Y),11,fl)),64))]),h.value=="Claim"?(u(),p("div",gl,[e("div",yl,[bl,e("div",wl,[R(ye,{value:k.value,"onUpdate:value":Q[0]||(Q[0]=Y=>k.value=Y),disabled:"",onChange:m},null,8,["value"]),e("div",$l,[ne(e("img",xl,null,512),[[Ee,(Fe=(st=t.order)==null?void 0:st.target_coin_info)==null?void 0:Fe.logo_url]]),e("span",null,i((Re=(nt=t.order)==null?void 0:nt.target_coin_info)==null?void 0:Re.symbol),1)])])]),R(xe,{disabled:n.value,class:"claim-btn",loading:C.value,onClick:re},{default:z(()=>[U(i(x.value),1)]),_:1},8,["disabled","loading"])])):(u(),p("div",Sl,[!he.value&&ie.value&&ie.value.length>0?(u(!0),p(J,{key:0},$e(ie.value,Y=>{var ze,ee,oe,de;return u(),p("div",{key:Y.digest,class:"history-item"},[e("div",kl,[Cl,e("div",Ol,[ne(e("img",Ll,null,512),[[Ee,(ee=(ze=t.order)==null?void 0:ze.target_coin_info)==null?void 0:ee.logo_url]]),e("span",null,i(a(H)(Y.claimed_amount))+" "+i((de=(oe=t.order)==null?void 0:oe.target_coin_info)==null?void 0:de.symbol),1)])]),e("div",Tl,[Il,e("div",Ml,[e("span",null,i(a(Ge)(Number(Y.timestampMs),""))+" (UTC)",1),e("a",{target:"_blank",href:a(ea)(De.value,"tx",Y.digest)},Nl,8,El)])])])}),128)):!he.value&&ie.value&&ie.value.length==0?(u(),F(sa,{key:1,platform:"claim"})):he.value&&ie.value&&ie.value.length==0?(u(),p("div",Pl,[R(be)])):D("",!0)]))])]}),_:1})}}});const Ca=me(Ul,[["__scopeId","data-v-34840059"]]),gt=t=>(Te("data-v-dfbe78bf"),t=t(),Ie(),t),Hl={class:"trade-order-card-list"},Al={class:"order-info"},Bl=gt(()=>e("div",{class:"label"},"Price",-1)),Dl={class:"text"},jl=["onClick"],Fl=gt(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),zl=gt(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Wl=[Fl,zl],Yl=gt(()=>e("div",{class:"label"},"Filled size",-1)),Vl={class:"text"},ql=gt(()=>e("div",{class:"label"},"Expiry",-1)),Jl={class:"text"},Kl=gt(()=>e("div",{class:"trade-claim-btn trade-claim-btn-disabled"},"Claim",-1)),Gl=_e({__name:"trade-order-card",props:{pageList:{type:Object,default:()=>({})}},setup(t){const c=g(),o=g(!1),_=Me(),h=b(()=>_),k=b(()=>h.value.cancelOrderId);return(m,d)=>{const n=Qt,x=ut,S=Ca;return u(),p("div",Hl,[(u(!0),p(J,null,$e(t.pageList,s=>{var T,M,I,r,$;return u(),p("div",{key:s.id,class:"trade-order-card"},[R(Ct,{order:s},null,8,["order"]),e("div",Al,[e("div",null,[Bl,e("div",Dl,[s.direction?(u(),p(J,{key:0},[U(i(a(H)(s==null?void 0:s.rate))+" "+i((T=s==null?void 0:s.target_coin_info)==null?void 0:T.symbol)+" per "+i((M=s==null?void 0:s.pay_coin_info)==null?void 0:M.symbol),1)],64)):(u(),p(J,{key:1},[U(i(a(H)(s==null?void 0:s.reseverRate))+" "+i((I=s==null?void 0:s.pay_coin_info)==null?void 0:I.symbol)+" per "+i((r=s==null?void 0:s.target_coin_info)==null?void 0:r.symbol),1)],64)),e("div",{class:"right",onClick:O=>s.direction=!s.direction},Wl,8,jl)])]),e("div",null,[Yl,e("div",Vl,[U(i(a(H)(s==null?void 0:s.obtained_amount))+"/"+i(a(H)(s==null?void 0:s.totalBuyNum))+" "+i(($=s==null?void 0:s.target_coin_info)==null?void 0:$.symbol)+" ",1),e("span",null,"("+i(s==null?void 0:s.obtainedRatio)+"%)",1)])]),e("div",null,[ql,e("div",Jl,i(a(Ge)(s.created_ts,""))+" (UTC)",1)])]),s.target_balance==0&&s.obtained_amount==0?(u(),F(n,{key:0},{title:z(()=>[U(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:z(()=>[Kl]),_:1})):(u(),F(x,{key:1,class:"trade-claim-btn",onClick:()=>{c.value=s,o.value=!0}},{default:z(()=>[U("Claim")]),_:2},1032,["onClick"])),R(x,{class:"trade-cancel-btn",loading:k.value=="all"||k.value==s.id,onClick:O=>a(aa)(s)},{default:z(()=>[U("Cancel")]),_:2},1032,["loading","onClick"])])}),128)),o.value?(u(),F(S,{key:0,order:c.value,onCloseModal:d[0]||(d[0]=s=>o.value=!1)},null,8,["order"])):D("",!0)])}}});const Xl=me(Gl,[["__scopeId","data-v-dfbe78bf"]]),na=t=>(Te("data-v-5dca8f09"),t=t(),Ie(),t),Zl={class:"trade-orders"},Ql={key:0},ei=na(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Price"),e("th",null,"Filled size"),e("th",null,"Expiry"),e("th",null,"Action")])],-1)),ti={class:"order-price"},ai=["onClick"],si=na(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),ni=na(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),li=[si,ni],ii={class:"filled-size"},oi={class:"action"},ri={key:4,class:"loading-box"},ui=_e({__name:"trade-orders",setup(t){const c=Ae(),o=b(()=>c),_=Me(),h=b(()=>_);b(()=>h.value.limitOrderList);const k=kt(),m=b(()=>k);b(()=>m.value.tokensObj),se(()=>o.value.address,x=>{x&&_.getOrderList()},{immediate:!0});const d=b(()=>h.value.orderListLoading),n=(x,S)=>{console.log(x,"page"),it.value=x};return(x,S)=>{const s=ut,T=Qt,M=ba,I=St;return u(),p("div",Zl,[o.value&&o.value.address&&a(X)&&a(X).length>0?(u(),p("table",Ql,[ei,e("tbody",null,[(u(!0),p(J,null,$e(a(X),r=>{var $,O,L,W,j;return u(),p("tr",{key:r.id},[e("td",null,[R(Ct,{order:r},null,8,["order"])]),e("td",null,[e("div",ti,[r.direction?(u(),p(J,{key:0},[U(i(a(H)(r==null?void 0:r.rate))+" "+i(($=r==null?void 0:r.target_coin_info)==null?void 0:$.symbol)+" per "+i((O=r==null?void 0:r.pay_coin_info)==null?void 0:O.symbol),1)],64)):(u(),p(J,{key:1},[U(i(a(H)(r==null?void 0:r.reseverRate))+" "+i((L=r==null?void 0:r.pay_coin_info)==null?void 0:L.symbol)+" per "+i((W=r==null?void 0:r.target_coin_info)==null?void 0:W.symbol),1)],64)),e("div",{class:"right",onClick:()=>{r.direction=!r.direction,a(hs)(r)}},li,8,ai)])]),e("td",null,[e("div",ii,[U(i(a(H)(r==null?void 0:r.obtained_amount))+"/"+i(a(H)(r==null?void 0:r.totalBuyNum))+" "+i((j=r==null?void 0:r.target_coin_info)==null?void 0:j.symbol)+" ",1),e("span",null,"("+i(r==null?void 0:r.obtainedRatio)+"%)",1)])]),e("td",null,i(a(Ge)(r==null?void 0:r.expire_ts,""))+" (UTC)",1),e("td",null,[e("div",oi,[R(T,{"overlay-class-name":"expiry-tooltip"},{title:z(()=>[U(" For a partially filled order, you can manually claim the filled amount if you want. Or you can wait for the auto distribution until your order is fully filled, expired or cancelled. ")]),default:z(()=>[R(s,{class:"trade-claim-btn",disabled:r.target_balance==0&&r.obtained_amount==0,onClick:()=>{_t.value=r,Kt.value=!0}},{default:z(()=>[U("Claim")]),_:2},1032,["disabled","onClick"])]),_:2},1024),R(s,{class:"trade-cancel-btn",loading:a(fa)=="all"||a(fa)==r.id,onClick:C=>a(aa)(r)},{default:z(()=>[U("Cancel")]),_:2},1032,["loading","onClick"])])])])}),128))])])):D("",!0),o.value&&o.value.address&&a(X)&&a(X).length>0?(u(),F(Xl,{key:1,"page-list":a(X)},null,8,["page-list"])):D("",!0),(a(X)&&a(X).length==0||!o.value.address)&&!d.value?(u(),F(sa,{key:2,platform:"orders"})):D("",!0),a(X)&&a(X).length>0?(u(),p("div",{key:3,class:q(["pagination",a(X)&&a(X).length>0&&d.value?"loading-pagination":""])},[R(M,{current:a(it),"onUpdate:current":S[0]||(S[0]=r=>Bt(it)?it.value=r:null),"page-size":a(Nt),simple:"",total:a($t)&&a($t).length,onChange:n},null,8,["current","page-size","total"])],2)):D("",!0),a(X)&&a(X).length==0&&d.value?(u(),p("div",ri,[R(I)])):D("",!0),a(X)&&a(X).length>0&&d.value?(u(),F(I,{key:5,class:"order-spin"})):D("",!0),a(Kt)?(u(),F(Ca,{key:6,order:a(_t),onCloseModal:S[1]||(S[1]=r=>Kt.value=!1)},null,8,["order"])):D("",!0)])}}});const ci=me(ui,[["__scopeId","data-v-5dca8f09"]]),pt=t=>{switch(t){case"Running":return{class:"order-running",path:"#icon-icon_completed"};case"Completed":return{class:"order-running",path:"#icon-icon_completed"};case"Cancelled":return{class:"order-cancelled",path:"#icon-icon_cancelled"};default:return{class:"",path:""}}},Ke=t=>{switch(t){case"OrderPlacedEvent":return{path:"#icon-tx_add1",class:"order-status-create",text:"Create"};case"OrderCanceledEvent":return{path:"#icon-icon_cancelled",class:"order-status-cancel",text:"Cancel"};case"FlashLoanEvent":return{path:"#icon-tx_swap1",class:"order-status-trade",text:"Trade"};default:return{path:"",class:"",text:""}}},ht=Me(),we=g({}),Oa=(t,c)=>{we.value[c]?we.value[c]=!1:(we.value[c]=!0,ht.getLimitOrderLogs()),console.log(we.value,"##isShowPosition.value")},di=Ae(),La=b(()=>di),vi=kt(),_i=b(()=>vi),Ut=b(()=>_i.value.tokensObj),Ta=b(()=>ht),Ht=b(()=>Ta.value.limitOrderHistoryList),ga=Ft("Sui"),mi=He("Sui"),rt=g(1),At=g(10),G=g([]),xt=g([]),pi=async()=>{const t=At.value*rt.value-At.value;let c=rt.value*At.value;c=c>Ht.value.length?Ht.value.length:c;const o=Ht.value;console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:174 ~ updateOrderList ~ result:",o),console.log("trade-card updateOrderList tokenObj",Ut.value);const _=[];if(o.length>0){const h=o.filter((k,m)=>m>=t&&m<c);for(let k=0;k<h.length;k++){const m=h[k];console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:188 ~ updateOrderList ~ order:",m,m.order_id);const d=Ut.value[It(m.pay_coin,!1)]||await ga.getTokenBySymbol({},It(m.pay_coin,!1)),n=Ut.value[It(m.target_coin,!1)]||await ga.getTokenBySymbol({},It(m.target_coin,!1)),x=ve(mi.rateToPrice(m.rate,d.decimals,n.decimals).toString(),d.decimals);console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:211 ~ updateOrderList ~ rate:",x);const S=new f(m.total_pay_amount).div(Math.pow(10,d.decimals)).toString(),s=new f(m.remaining_amount).div(Math.pow(10,d.decimals)).toString(),T=new f(S).sub(new f(s)).toString(),M=new f(m.total_pay_amount).mul(new f(Math.pow(10,18))).div(new f(m.rate)).ceil().div(new f(Math.pow(10,n.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: trade-history.vue:226 ~ updateOrderList ~ order.rate:",m.rate);const I=ve(new f(1).div(new f(x)).toString()),r=m.events.map($=>{const O=$.event_type.split("::")[2];let L="";return O=="OrderPlacedEvent"?L=new f($.amount).div(Math.pow(10,d.decimals)).toString():O=="FlashLoanEvent"?L=new f($.amount).div(Math.pow(10,n.decimals)).toString():O=="OrderCanceledEvent"&&(L=new f($.amount).div(Math.pow(10,d.decimals)).toString()),{...$,amount:L,type:O}}).sort(($,O)=>O.block_time-$.block_time);_.push({...m,pay_coin_info:d,target_coin_info:n,total_pay_amount:S,rate:x,remaining_amount:s,transaction_ratio:Je(new f(m.total_pay_amount).sub(new f(m.remaining_amount)).div(new f(m.total_pay_amount)).mul(100).toString(),2),transaction_volume:T,status:m.cancel_reason==0?"Completed":"Cancelled",events:r,totalBuyNum:M,reseverRate:I,direction:!0})}G.value=_}xt.value=o,ht.setHistoryNum(o.length),console.log("allList",xt.value),console.log("pageList",G.value)},hi=(t,c)=>{console.log(t,"page"),rt.value=t};se(()=>[Ht.value,rt.value,Ut.value,La.value.address],([t,c,o,_])=>{t&&t.length>0&&o&&!Ue(o)&&_?pi():(G.value=[],xt.value=[],ht.setHistoryNum(0))},{immediate:!0});se(()=>La.value.address,t=>{t&&(ht.getLimitOrderLogs(),ht.getLimitOrderHistory(t))},{immediate:!0});const Rt=b(()=>Ta.value.orderHistoryLoading),Be=t=>(Te("data-v-c7971788"),t=t(),Ie(),t),fi={class:"history-card-list"},gi={class:"history-info"},yi=Be(()=>e("div",{class:"label"},"Limit price",-1)),bi={class:"text"},wi=["onClick"],$i=Be(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),xi=Be(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),Si=[$i,xi],ki=Be(()=>e("div",{class:"label"},"Expiry",-1)),Ci={class:"text"},Oi=Be(()=>e("div",{class:"label"},"Filled size",-1)),Li={class:"text"},Ti=Be(()=>e("div",{class:"label"},"Status",-1)),Ii={class:"text"},Mi=["onClick"],Ei=["xlink:href"],Ri=Be(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Ni=[Ri],Pi={class:"order-log-num"},Ui={class:"order-status"},Hi=["xlink:href"],Ai={class:"create-ts"},Bi={key:0},Di={key:1},ji={class:"view-trans"},Fi=["href"],zi=Be(()=>e("span",null,"View Txn.",-1)),Wi=Be(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),Yi=[zi,Wi],Vi=_e({__name:"trade-history-card",props:{pageList:{type:Object,default:()=>[]}},setup(t){const c=ft(),o=b(()=>c),_=b(()=>o.value.currentExplorer),h=Me(),k=b(()=>h);return b(()=>k.value.orderHistoryObj),(m,d)=>(u(),p("div",fi,[(u(!0),p(J,null,$e(t.pageList,(n,x)=>{var S,s,T,M,I;return u(),p("div",{key:n.expire_ts,class:"history-card-item"},[R(Ct,{order:n},null,8,["order"]),e("div",gi,[e("div",null,[yi,e("div",bi,[n.direction?(u(),p(J,{key:1},[U(i(a(H)(n==null?void 0:n.reseverRate))+" "+i((T=n==null?void 0:n.pay_coin_info)==null?void 0:T.symbol)+" per "+i((M=n==null?void 0:n.target_coin_info)==null?void 0:M.symbol),1)],64)):(u(),p(J,{key:0},[U(i(a(H)(n==null?void 0:n.rate))+" "+i((S=n==null?void 0:n.target_coin_info)==null?void 0:S.symbol)+" per "+i((s=n==null?void 0:n.pay_coin_info)==null?void 0:s.symbol),1)],64)),e("div",{class:"right",onClick:wt(r=>n.direction=!n.direction,["stop"])},Si,8,wi)])]),e("div",null,[ki,e("div",Ci,i(a(Ge)(n==null?void 0:n.expire_ts,""))+" (UTC)",1)]),e("div",null,[Oi,e("div",Li,[U(i(a(H)(n==null?void 0:n.transaction_volume))+"/"+i(a(H)(n==null?void 0:n.total_pay_amount))+" "+i((I=n==null?void 0:n.pay_coin_info)==null?void 0:I.symbol)+" ",1),e("span",null,"("+i(n==null?void 0:n.transaction_ratio)+"%)",1)])]),e("div",null,[Ti,e("div",Ii,[e("div",{class:"order-status",onClick:r=>a(Oa)(n,x)},[(u(),p("svg",{class:q(["order-status-icon",a(pt)(n.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(pt)(n.status).path},null,8,Ei)],2)),e("span",{class:q(a(pt)(n.status).class)},i(n.status),3),(u(),p("svg",{class:q(["arrow-icon",a(we)[x]?"open-arrow":""]),"aria-hidden":"true"},Ni,2))],8,Mi)])])]),a(we)[x]?(u(!0),p(J,{key:0},$e(n.events,r=>{var $,O,L;return u(),p("div",{key:r,class:"order-log"},[e("div",Pi,[e("div",Ui,[e("div",null,[(u(),p("svg",{class:q(["status-icon",a(Ke)(r.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Ke)(r.type).path},null,8,Hi)],2)),e("span",{class:q(["text-status",a(Ke)(r.type).class])},i(a(Ke)(r.type).text),3)]),e("div",Ai,i(a(Ge)(Number(r.block_time),""))+" (UTC) ",1)]),e("div",null,[r.type=="FlashLoanEvent"?(u(),p("span",Bi,"+"+i(a(H)(r.amount))+" "+i(($=n==null?void 0:n.buy_coin_info)==null?void 0:$.symbol)+" "+i((O=n==null?void 0:n.target_coin_info)==null?void 0:O.symbol),1)):(u(),p("span",Di,i(r.type=="OrderPlacedEvent"?"-":"+")+i(a(H)(r.amount))+" "+i((L=n==null?void 0:n.pay_coin_info)==null?void 0:L.symbol),1)),e("div",ji,[e("a",{href:a(ea)(_.value,"tx",r.tx),target:"_blank"},Yi,8,Fi)])])])])}),128)):D("",!0)])}),128))]))}});const qi=me(Vi,[["__scopeId","data-v-c7971788"]]),Qe=t=>(Te("data-v-4eca59f9"),t=t(),Ie(),t),Ji={class:"trade-history"},Ki={key:0},Gi=Qe(()=>e("thead",null,[e("tr",null,[e("th",null,"Order info"),e("th",null,"Limit price"),e("th",null,"Expiry"),e("th",null,"Filled size"),e("th",null,"Status")])],-1)),Xi=["onClick"],Zi={class:"order-price"},Qi=["onClick"],eo=Qe(()=>e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})],-1)),to=Qe(()=>e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})],-1)),ao=[eo,to],so={class:"order-status"},no=["xlink:href"],lo=Qe(()=>e("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),io=[lo],oo={class:"order-log"},ro={class:"order-log-num"},uo=["xlink:href"],co={key:0},vo={key:1},_o=Qe(()=>e("td",null,null,-1)),mo=Qe(()=>e("td",null,null,-1)),po={class:"create-ts"},ho={class:"view-trans"},fo=["href"],go=Qe(()=>e("span",null,"View Transaction",-1)),yo=Qe(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link2"})],-1)),bo=[go,yo],wo={style:{height:"4px",background:"unset"}},$o={class:"tr-line",style:{height:"24px",background:"unset"}},xo={key:4,class:"loading-box"},So=_e({__name:"trade-history",setup(t){const c=ft(),o=b(()=>c),_=b(()=>o.value.currentExplorer),h=Me();b(()=>h);const k=Ae(),m=b(()=>k);return se(()=>m.value.address,d=>{d&&(h.getLimitOrderLogs(),h.getLimitOrderHistory(d))},{immediate:!0}),(d,n)=>{const x=ba,S=St;return u(),p("div",Ji,[m.value&&m.value.address&&a(G)&&a(G).length>0?(u(),p("table",Ki,[Gi,e("tbody",null,[(u(!0),p(J,null,$e(a(G),(s,T)=>{var M,I,r,$,O;return u(),p(J,{key:s.id},[e("tr",{class:q(["order",T!==a(G).length-1?"order-border":""]),onClick:L=>a(Oa)(s,T)},[e("td",null,[R(Ct,{order:s},null,8,["order"])]),e("td",null,[e("div",Zi,[s.direction?(u(),p(J,{key:1},[U(i(a(H)(s==null?void 0:s.reseverRate))+" "+i((r=s==null?void 0:s.pay_coin_info)==null?void 0:r.symbol)+" per "+i(($=s==null?void 0:s.target_coin_info)==null?void 0:$.symbol),1)],64)):(u(),p(J,{key:0},[U(i(a(H)(s==null?void 0:s.rate))+" "+i((M=s==null?void 0:s.target_coin_info)==null?void 0:M.symbol)+" per "+i((I=s==null?void 0:s.pay_coin_info)==null?void 0:I.symbol),1)],64)),e("div",{class:"right",onClick:wt(L=>s.direction=!s.direction,["stop"])},ao,8,Qi)])]),e("td",null,i(a(Ge)(s==null?void 0:s.expire_ts,""))+" (UTC)",1),e("td",null,[U(i(a(H)(s==null?void 0:s.transaction_volume))+"/"+i(a(H)(s==null?void 0:s.total_pay_amount))+" "+i((O=s==null?void 0:s.pay_coin_info)==null?void 0:O.symbol)+" ",1),e("span",null,"("+i(s==null?void 0:s.transaction_ratio)+"%)",1)]),e("td",null,[e("div",so,[(u(),p("svg",{class:q(["order-status-icon",a(pt)(s.status).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(pt)(s.status).path},null,8,no)],2)),e("span",{class:q(a(pt)(s.status).class)},i(s.status),3),(u(),p("svg",{class:q(["arrow-icon",a(we)[T]?"open-arrow":""]),"aria-hidden":"true"},io,2))])])],10,Xi),a(we)[T]?(u(),p(J,{key:0},[(u(!0),p(J,null,$e(s.events,L=>{var W,j,C;return u(),p(J,{key:L},[ne(e("tr",oo,[e("td",null,[e("div",ro,[(u(),p("svg",{class:q(["status-icon",a(Ke)(L.type).class]),"aria-hidden":"true"},[e("use",{"xlink:href":a(Ke)(L.type).path},null,8,uo)],2)),e("span",{class:q(["text-status",a(Ke)(L.type).class])},i(a(Ke)(L.type).text),3),L.type=="FlashLoanEvent"?(u(),p("span",co,"+"+i(a(H)(L.amount))+" "+i((W=s==null?void 0:s.buy_coin_info)==null?void 0:W.symbol)+" "+i((j=s==null?void 0:s.target_coin_info)==null?void 0:j.symbol),1)):(u(),p("span",vo,i(L.type=="OrderPlacedEvent"?"-":"+")+i(a(H)(L.amount))+" "+i((C=s==null?void 0:s.pay_coin_info)==null?void 0:C.symbol),1))])]),_o,mo,e("td",null,[e("span",po,i(a(Ge)(Number(L.block_time),""))+" (UTC)",1)]),e("td",null,[e("div",ho,[e("a",{href:a(ea)(_.value,"tx",L.tx),target:"_blank"},bo,8,fo)])])],512),[[ot,a(we)[T]]]),ne(e("tr",wo,null,512),[[ot,a(we)[T]]])],64)}),128)),ne(e("tr",$o,null,512),[[ot,a(we)[T]]])],64)):D("",!0)],64)}),128))])])):D("",!0),m.value&&m.value.address&&a(G)&&a(G).length>0?(u(),F(qi,{key:1,"page-list":a(G)},null,8,["page-list"])):D("",!0),a(G)&&a(G).length==0&&!a(Rt)?(u(),F(sa,{key:2,platform:"history"})):D("",!0),a(G)&&a(G).length>0?(u(),p("div",{key:3,class:q(["pagination",a(G)&&a(G).length>0&&a(Rt)?"loading-pagination":""])},[R(x,{current:a(rt),"onUpdate:current":n[0]||(n[0]=s=>Bt(rt)?rt.value=s:null),"page-size":a(At),simple:"",total:a(xt)&&a(xt).length,onChange:a(hi)},null,8,["current","page-size","total","onChange"])],2)):D("",!0),a(G)&&a(G).length==0&&a(Rt)?(u(),p("div",xo,[R(S)])):D("",!0),a(G)&&a(G).length>0&&a(Rt)?(u(),F(S,{key:5,class:"order-spin"})):D("",!0)])}}});const ko=me(So,[["__scopeId","data-v-4eca59f9"]]),Co={class:"order-or-history"},Oo={class:"tab-list"},Lo=["onClick"],To=_e({__name:"trade-tab",setup(t){const c=Me(),o=b(()=>c),_=b(()=>o.value.orderNum),h=b(()=>o.value.historyNum),k=[{id:"orders",name:"Open Orders"},{id:"history",name:"Order History"}],m=Ae(),d=b(()=>m);return(n,x)=>(u(),p("div",Co,[e("div",Oo,[(u(),p(J,null,$e(k,S=>e("div",{key:S.id,class:q(["tab-item",a(vt)==S.id?"tab-item-active":""]),onClick:s=>vt.value=S.id},[U(i(S.name)+" ",1),ne(e("div",{class:"tab-num"},i(a(vt)=="orders"?_.value:h.value),513),[[ot,a(vt)==S.id&&d.value&&d.value.address]])],10,Lo)),64))]),a(vt)=="orders"&&d.value&&d.value.address&&_.value>0?(u(),p("div",{key:0,class:"clear-all",onClick:x[0]||(x[0]=S=>a(aa)({},!0))},"Cancel All")):D("",!0)]))}});const Io=me(To,[["__scopeId","data-v-5d493b03"]]),Mo={class:"trade-order"},Eo=_e({__name:"trade-record",setup(t){return(c,o)=>(u(),p("div",Mo,[R(Io),a(vt)=="orders"?(u(),F(ci,{key:0})):(u(),F(ko,{key:1}))]))}});const Qo=me(Eo,[["__scopeId","data-v-9eca8bf3"]]);export{Ct as T,Xl as _,fa as a,aa as b,_t as c,it as d,Nt as e,$t as f,sa as g,Ca as h,Kt as i,G as j,qi as k,rt as l,At as m,xt as n,Rt as o,X as p,hi as q,Io as r,vt as s,xa as t,Me as u,Zo as v,La as w,Xo as x,Qo as y};
