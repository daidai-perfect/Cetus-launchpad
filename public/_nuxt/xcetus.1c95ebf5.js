import{_ as ot}from"./xwhale-header.646de3bd.js";import{r as h,V as Ve,D as H,e as Y,o as v,f as T,h as n,v as S,j as $,l as ie,q as lt,x as X,t as Fe,p as Q,k as z,m as c,i as R,c as M,w as W,B as re,K as He,u as Be,z as we,a as Ne,a3 as st,a4 as it,I as rt,S as ut,M as ct,y as dt,C as mt,F as Le,s as We,a2 as vt,a9 as gt}from"./entry.07e73a81.js";import{u as $e,a as De}from"./xcetus.c7206359.js";import{e as U,f as ue,s as Ce,a as xe,c as Xe,p as G,u as Ye,r as _e,D as Oe}from"./pool.eb3e226c.js";import{i as K}from"./import-icon.de3e6c66.js";import{u as ce}from"./index.81c50e20.js";import{_ as je}from"./xWHALE-icon.2df34cd4.js";import{_ as Ze}from"./WHALE-icon.28f954ba.js";import{_ as ft}from"./head-switch.95748046.js";/* empty css              *//* empty css              */import{_ as pt}from"./icon-selected_3x.350736e2.js";/* empty css              *//* empty css              */import{u as ht}from"./useTheme.3d2616c6.js";import{_ as _t}from"./img-leverage_2x.1c577303.js";const wt={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const i=h("--"),a=h("--"),w=h("--"),C=h("--");let d=null;Ve(()=>{window.clearInterval(d)});const b=()=>{const g=new Date().getTime()/1e3;Number(g)<=Number(e.startTime)&&p(e.startTime),Number(g)>Number(e.startTime)&&Number(g)<=Number(e.endTime)&&p(e.endTime)},p=g=>{clearInterval(d),window.clearInterval(d),d=setInterval(()=>{let f=new Date().getTime()/1e3;console.log(f,"nowTime===>");let u=g-parseInt(String(f));if(console.log(u,"times===>"),u==0){t.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else u<0&&(clearInterval(d),window.clearInterval(d),t.emit("countDown"),d=null);u--;let m=parseInt(String(u/60/60/24));m=(m<10,m);let l=parseInt(String(u/60/60%24));l=(l<10,l);let y=parseInt(String(u/60%60));y=(y<10,y);let D=parseInt(String(u%60));D=D<10?+D:D,i.value=m,a.value=l,w.value=y,C.value=D},1e3)};return H(()=>e.startTime,(g,f)=>{g!==f&&b()},{immediate:!0}),{day:i,hour:a,min:w,sec:C}}};const Ct={class:"count-time"};function bt(e,t,i,a,w,C){return v(),T("div",Ct,[n("p",null,S(a.day)+"d",1),$(" : "),n("p",null,S(a.hour)+"h",1),$(" : "),n("p",null,S(a.min)+"m",1),$(" : "),n("p",null,S(a.sec)+"s",1)])}const St=Y(wt,[["render",bt],["__scopeId","data-v-cfbf67a0"]]),yt={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t}=ie();return{t}}};const Tt=e=>(Q("data-v-77f61894"),e=e(),z(),e),At={class:"table-rewards"},kt={class:"text-top-all"},It={key:0,class:"icon-hover-box"},Bt=Tt(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1)),Nt={class:"tips-text-box"},$t={key:0,alt:""};function Dt(e,t,i,a,w,C){const d=lt("image");return v(),T("div",At,[n("div",kt,[n("p",null,S(i.titleText),1),i.tipsText?(v(),T("div",It,[Bt,n("div",Nt,S(i.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):X("",!0)]),n("span",null,[n("p",null,[i.imgIcon?Fe((v(),T("img",$t,null,512)),[[d,i.imgIcon]]):X("",!0),$(S(i.value),1)])])])}const xt=Y(yt,[["render",Dt],["__scopeId","data-v-77f61894"]]),Et={setup(e){const{t}=ie(),i=$e(),a=c(()=>i),w=c(()=>a.value.pendingAmount),C=c(()=>(console.log(a.value.nextStartTime,"===>xcetus.value.nextStartTime"),a.value.nextStartTime)),d=c(()=>1683094391),b=c(()=>a.value.xcetusShare&&U(a.value.xcetusShare,2)),p=ue(),g=c(()=>p),f=c(()=>a.value.cetusApr&&a.value.cetusApr>.01?U(Ce(a.value.cetusApr,2),2):U(a.value.cetusApr,2)),s=c(()=>a.value.pendingCoinInfo),u=h("");H(()=>s.value,x=>{x&&!Xe(x)?u.value=`Pending yield (${x.symbol})`:u.value="Pending yield"},{immediate:!0});const m=()=>{setTimeout(()=>{i.getDividendManager()},3e3)},l=c(()=>a.value.dividendManagerInfo),y=c(()=>{const x=parseInt(String(new Date().getTime()/1e3)),ee=l.value.interval_day,te=(x-Number(l.value.start_time))/(ee*60);return console.log(parseInt(String(te))>0,"====>(parseInt(String(time))) > 0"),parseInt(String(te))>0}),D=ce(),me=c(()=>D),{setIsShowSuccess:ye,setIsShowRejected:ve,setIsShowWaiting:J,setTransactionDesc:j,setTransactionTxid:ge}=D,Z=De("Sui"),q=h(!1),Te=c(()=>a.value.venft_id),A=c(()=>me.value.chainName?xe(me.value.chainName):{});return{t,pendingAmount:w,nextStartTime:C,wallet:g,myShare:b,importIcon:K,nextEndTime:d,pendingYieldText:u,cetusApr:f,pendingCoinInfo:s,getNextEpoch:m,canClaim:y,claimPendingYield:async()=>{q.value=!0,J(!0),ge(""),j(`${t("tips.claimingPendingYield")} ${w.value} ${s.value.symbol}`);try{let x;const ee=await Z.getRedeemDividendV2Payload(Te.value);console.log(ee,"payload==>");const te=await g.value.currentWallet.signAndExecuteTransactionBlock(ee);if(x=A.value.handleTx(te),x&&x.hash){ge(x.hash),J(!1),ye(!0);const k={title:"Claim",desc:`Claimed ${w.value} ${s.value.symbol} successfully.`,hash:x.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:s.value.symbol,numa:`+ ${w.value}`,logoa:s.value.logo_url}};A.value.showTransitionPending(k);const O=await A.value.watchTransaction(k);console.log("0221###swap###transitionStatus####",O),O&&setTimeout(()=>{i.getVeNFTDividendInfo(),q.value=!1},3e3),i.getOwnerLockCetuss(g.value.address)}else J(!1),ve(!0),q.value=!1}catch(x){J(!1),ve(!0),q.value=!1,console.log(x,"error===>")}},claimLoading:q,addCommom:U}}},Ut=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,Rt="data:image/png;base64,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";const be=e=>(Q("data-v-26a68a72"),e=e(),z(),e),Pt={class:"top-banner"},Mt=be(()=>n("img",{src:Ut,alt:""},null,-1)),Lt=be(()=>n("p",null,"Convert CETUS to xCETUS to start earning",-1)),Wt={class:"bot-count"},Ot=be(()=>n("span",null,"Reward distribution in ",-1)),Vt={class:"holder-rewards"},Ft={class:"title"},Ht=be(()=>n("div",{class:"left"},[n("img",{src:Rt,alt:""}),n("span",null,"xCETUS Staking Rewards")],-1)),Xt={class:"right"},Yt={class:"rewards-value"},jt={class:"claim-h5"};function Zt(e,t,i,a,w,C){var g;const d=St,b=re,p=xt;return v(),T("div",null,[n("div",Pt,[Mt,Lt,n("div",Wt,[Ot,R(d,{"start-time":a.nextStartTime,onCountDown:t[0]||(t[0]=f=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),n("div",Vt,[n("div",Ft,[Ht,n("div",Xt,[a.wallet&&a.wallet.address?(v(),M(b,{key:0,loading:a.claimLoading,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,onClick:a.claimPendingYield},{default:W(()=>[$(" Claim ")]),_:1},8,["loading","disabled","onClick"])):X("",!0)])]),n("div",Yt,[R(p,{"title-text":"est.APR","tips-text":"good",value:a.cetusApr+"%"},null,8,["title-text","value"]),R(p,{"title-text":"My share",value:a.myShare+"%"},null,8,["value"]),R(p,{"title-text":a.pendingYieldText,"img-icon":(g=a.pendingCoinInfo)==null?void 0:g.logo_url,value:a.addCommom(a.pendingAmount,6)},null,8,["title-text","img-icon","value"])]),n("div",jt,[a.wallet&&a.wallet.address?(v(),M(b,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:t[1]||(t[1]=f=>e.$emit("claimPendingYield"))},{default:W(()=>[$(" Claim ")]),_:1},8,["disabled","loading"])):X("",!0)])])])}const qt=Y(Et,[["render",Zt],["__scopeId","data-v-26a68a72"]]),Gt={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const i=h("--"),a=h("--"),w=h("--"),C=h("--");let d=null;Ve(()=>{window.clearInterval(d)});const b=()=>{const g=new Date().getTime()/1e3;Number(g)<=Number(e.startTime)&&p(e.startTime),Number(g)>Number(e.startTime)&&Number(g)<=Number(e.endTime)&&p(e.endTime)},p=g=>{d=setInterval(()=>{let f=new Date().getTime()/1e3,u=g-parseInt(String(f));if(u==0){t.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else u<0&&(clearInterval(d),window.clearInterval(d),t.emit("countDown"),d=null);u--;let m=parseInt(String(u/60/60/24));m=m<10?"0"+m:m;let l=parseInt(String(u/60/60%24));l=l<10?"0"+l:l;let y=parseInt(String(u/60%60));y=y<10?"0"+y:y;let D=parseInt(String(u%60));D=D<10?"0"+D:D,i.value=m,a.value=l,w.value=y,C.value=D},1e3)};return H(()=>e.startTime,(g,f)=>{g!==f&&b()},{immediate:!0}),{day:i,hour:a,min:w,sec:C}}};const Se=e=>(Q("data-v-131b3f4e"),e=e(),z(),e),Kt={class:"count-down"},Qt=Se(()=>n("span",null,"D : ",-1)),zt=Se(()=>n("span",null,"H : ",-1)),Jt=Se(()=>n("span",null,"M : ",-1)),en=Se(()=>n("span",null,"S",-1));function tn(e,t,i,a,w,C){return v(),T("div",Kt,[$(S(a.day)+" ",1),Qt,$(" "+S(a.hour)+" ",1),zt,$(" "+S(a.min)+" ",1),Jt,$(" "+S(a.sec)+" ",1),en])}const nn=Y(Gt,[["render",tn],["__scopeId","data-v-131b3f4e"]]),an={components:{WcountDown:nn},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,t){const{t:i}=ie();console.log(e.vItem,"vItem");const a=$e(),w=ce(),C=c(()=>w),d=m=>{t.emit("claim",m),a.setClaimLoading(m.id)},b=c(()=>a),p=c(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),g=m=>{t.emit("cancelRedeemPayload",m),a.setClaimLoading(m.id)};c(()=>C.value.chainName),De("Sui");const f=ue();return c(()=>f),c(()=>b.value.venft_id),c(()=>C.value.chainName?xe(C.value.chainName):{}),{t:i,prettyAmount:G,claimBoolean:p,toClaim:d,toCancel:g,claimWhale:m=>{t.emit("claimWhale",m)},cancelRedeemPayload:m=>{t.emit("cancelRedeemPayload",m)}}}};const Ee=e=>(Q("data-v-22a782cd"),e=e(),z(),e),on={class:"vesting-box"},ln={class:"left"},sn=Ee(()=>n("img",{src:je,alt:""},null,-1)),rn=Ee(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-swap2"})],-1)),un=Ee(()=>n("img",{src:Ze,alt:""},null,-1)),cn={class:"available-all"},dn={class:"available"},mn={key:0},vn={key:1};function gn(e,t,i,a,w,C){const d=He("WcountDown"),b=re;return v(),T("div",on,[n("div",ln,[n("p",null,[n("span",null,[sn,$(" "+S(("addCommom"in e?e.addCommom:Be(U))(a.prettyAmount(i.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),rn,n("span",null,[un,$(" "+S(("addCommom"in e?e.addCommom:Be(U))(a.prettyAmount(i.vItem.cetus_amount,9),9))+" CETUS ",1)])]),n("div",cn,[n("div",dn,[n("span",null,S(a.claimBoolean?"Available":"Available in"),1),a.claimBoolean?X("",!0):(v(),M(d,{key:0,"start-time":i.vItem.locked_start_time,"end-time":i.vItem.locked_until_time,onCountDown:t[0]||(t[0]=p=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),n("div",{class:we(a.claimBoolean?"highlight right-h5":"right-h5")},[a.claimBoolean?(v(),T("span",mn,"Claim")):(v(),T("span",vn,"Cancel"))],2)])]),a.claimBoolean?(v(),M(b,{key:0,disabled:!a.claimBoolean||i.loading,loading:i.loading,onClick:t[1]||(t[1]=p=>a.claimWhale(i.vItem))},{default:W(()=>[$(S(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(v(),M(b,{key:1,type:"text",class:"right",disabled:i.loading,loading:i.loading,onClick:t[2]||(t[2]=p=>a.cancelRedeemPayload(i.vItem))},{default:W(()=>[$(S(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const fn=Y(an,[["render",gn],["__scopeId","data-v-22a782cd"]]),pn=Ne({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,t){const{t:i,locale:a}=ie(),w=ce(),C=c(()=>w),d=st(it,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),b=ue(),p=c(()=>b),g=Ye(),f=c(()=>g),s=m=>{const y=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");m.target.value=m.target.value.replace(y,"$1")},u=c(()=>{var m;return f.value.tokensObj&&e.address&&f.value.tokensObj[e.address]&&((m=f.value.tokensObj[e.address])==null?void 0:m.decimals)});return H(()=>f.value.RATES,m=>{m&&console.log(m,"price====>")},{immediate:!0}),{pool:f,t:i,addCommom:U,store:C,wallet:p,indicator:d,inputChange:s,importIcon:K,coinDecimals:u}}});const hn=e=>(Q("data-v-83d9dead"),e=e(),z(),e),_n={class:"card"},wn={class:"top"},Cn={class:"left"},bn={class:"loading-token"},Sn={key:0,src:Ze,alt:""},yn={key:1,src:je,alt:""},Tn={class:"bottom"},An=hn(()=>n("div",null,null,-1)),kn={class:"top"},In={class:"right"},Bn={key:0,class:"balance"};function Nn(e,t,i,a,w,C){var g,f;const d=rt,b=ut,p=re;return v(),T("div",_n,[n("div",wn,[R(d,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:t[0]||(t[0]=s=>e.$emit("onInput",s.target.value)),onFocus:t[1]||(t[1]=s=>e.$emit("onFocus"))},null,8,["value","onChange"]),n("div",Cn,[n("div",bn,[e.coinSymbol=="CETUS"?(v(),T("img",Sn)):(v(),T("img",yn)),n("div",null,[n("p",null,S(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),n("div",Tn,[An,n("div",kn,[n("div",In,[n("span",null,S(e.$t("common.balance")),1),e.balance?(v(),T("span",Bn,S(e.balance>1?("addCommom"in e?e.addCommom:Be(U))(e.balance):e.balance),1)):(v(),M(b,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(v(),M(p,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((g=e.wallet)!=null&&g.address),onClick:t[2]||(t[2]=s=>e.$emit("halfBalanne"))},{default:W(()=>[$(S("Half"))]),_:1},8,["disabled"])):X("",!0),e.whaleDirection=="From"?(v(),M(p,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((f=e.wallet)!=null&&f.address),onClick:t[3]||(t[3]=s=>e.$emit("maxBalanne"))},{default:W(()=>[$(S(e.$t("button.max")),1)]),_:1},8,["disabled"])):X("",!0)])])])])}const $n=Y(pn,[["render",Nn],["__scopeId","data-v-83d9dead"]]);const Dn=Ne({components:{Modal:ct},setup(e,t){const i=ce(),a=h(!1);c(()=>i);const w=ue(),C=c(()=>w);return{store:i,isSelect:a,clickConvert:()=>{a.value&&localStorage.setItem(`notRemind${C.value.address}`,!0),t.emit("clickConvert")}}}}),Ue=e=>(Q("data-v-f05dc960"),e=e(),z(),e),xn=Ue(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),En=[xn],Un={class:"token-waring-conetnt"},Rn=Ue(()=>n("div",{class:"tips-text"},[$(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),n("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),Pn={class:"read-text"},Mn={key:0,src:pt},Ln=Ue(()=>n("span",null," Do not remind again. ",-1));function Wn(e,t,i,a,w,C){const d=re,b=He("Modal");return v(),M(b,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:t[3]||(t[3]=p=>e.$emit("close"))},{closeIcon:W(()=>[(v(),T("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:t[0]||(t[0]=p=>e.$emit("close"))},En))]),default:W(()=>[n("div",Un,[Rn,n("div",Pn,[n("div",{class:"radio",onClick:t[1]||(t[1]=p=>e.isSelect=!e.isSelect)},[e.isSelect?(v(),T("img",Mn)):X("",!0)]),Ln]),R(d,{class:"big-btn continue",onClick:t[2]||(t[2]=()=>e.clickConvert())},{default:W(()=>[$("Convert")]),_:1})])]),_:1})}const On=Y(Dn,[["render",Wn],["__scopeId","data-v-f05dc960"]]),Vn=Ne({setup(){const e=$e(),t=c(()=>e),i=c(()=>t.value.venft_id),a=c(()=>t.value.venftInfo),w=Ye(),C=c(()=>w),d=ce(),b=c(()=>d),p=ht();c(()=>C.value.tokensObj&&C.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const g=h("");let f=h(!1);const s=h(""),u=h(""),m=h(!1),l=h("convert"),{t:y}=ie(),D=h([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),me=h([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),ye=h([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),ve=h([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),J=window.setInterval(()=>{e.getXcetusApr(),_.value.address&&(e.getMyShare(_.value.address),e.getVeNFTDividendInfo())},6e4);dt(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),mt(()=>{window.clearInterval(J),document.removeEventListener("visibilitychange",()=>{console.log("移除监听")})}),H(()=>b.value.theme,o=>{o!=="sui"&&p.selectSuiTheme()},{immediate:!0});const j=c(()=>(console.log(t.value.whaleBalance,"==>xcetus.value.whaleBalance"),t.value.whaleBalance)),ge=c(()=>t.value.xWhaleBalance),Z=c(()=>t.value.availableXwhale),q=c(()=>t.value.redeemingXwhale),Te=c(()=>{if(l.value=="convert"){if(Number(s.value)>Number(j.value))return!0}else if(Number(s.value)>Number(Z.value))return!0;return!s.value||!u.value||Number(s.value)==0||Number(u.value)==0}),A=h("180"),ae=c(()=>(console.log(l.value=="convert","===>1212211"),l.value=="convert"&&Number(s.value)>Number(j.value)?y("button.insufficientBalance",{name:"CETUS"}):l.value!=="convert"&&Number(s.value)>Number(Z.value)?y("button.insufficientBalance",{name:"xCETUS"}):Number(A.value)<15?"Minimum vesting duration is 15 days":l.value=="convert"&&i?"Convert":l.value!=="convert"&&i?"Redeem":"Convert"));console.log(ae.value,"btnText.value===>");const x=o=>{s.value="",u.value="",l.value=o},ee=()=>{f.value=!0,setTimeout(()=>{f.value=!1},300)},te=o=>{A.value=o},k=h(!1),O=De("Sui"),Re=ue(),_=c(()=>Re),Pe=c(()=>t.value.ownerLocks);H(()=>_.value.address,o=>{console.log("触发",o),o?(e.getOwnerVeNFT(o),e.getAccountWhaleBalance(o),e.getOwnerLockCetuss(o),e.getMyShare(o)):e.loginOut()},{immediate:!0});const E=c(()=>b.value.chainName?xe(b.value.chainName):{}),oe=c(()=>b.value.chainName),{setIsShowSuccess:le,setIsShowRejected:V,setIsShowWaiting:B,setTransactionDesc:se,setTransactionTxid:F}=d,Ae=async()=>{k.value=!0,B(!0),F(""),se(y("tips.converting",{from:`${U(s.value,9)} CETUS`,and:"to",to:`${U(s.value,9)} xCETUS`}));try{let o;const r=_e(s.value,9);console.log(i.value,"===>venft_id.value");const I=await O.depositCetus(r,i.value);console.log(I,"payload==>");const P=await _.value.currentWallet.signAndExecuteTransactionBlock(I);if(o=E.value.handleTx(P),o&&o.hash){F(o.hash),B(!1),le(!0);const N={title:"Converted",desc:`Converted ${U(s.value,9)} xCETUS successfully`,hash:o.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${s.value}`,logoa:K("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${s.value}`,logob:K("/sui-image/xWHALE-icon.png")}};oe.value!=="Aptos"&&(N.res=o.res),E.value.showTransitionPending(N);const L=await E.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getAccountWhaleBalance(_.value.address),e.getOwnerVeNFT(_.value.address),e.getOwnerLockCetuss(_.value.address),e.getMyShare(_.value.address)},3e3),k.value=!1}else B(!1),V(!0),k.value=!1;s.value=""}catch(o){B(!1),V(!0),k.value=!1,s.value="",console.log(o,"error===>")}},ne=h(!0),ke=h("0"),qe=async()=>{const o=_e(s.value,9),r=await O.redeemNum(o,Number(A.value));u.value=G(r.amountOut,9),console.log("===>amount2222"),ke.value=r.percent},Ge=async()=>{const o=_e(u.value,9),r=await O.reverseRedeemNum(o,Number(A.value));console.log(r,"===>amount111"),s.value=G(r.amountOut,9),ke.value=r.percent};H(()=>[s.value,A.value,ne.value],([o,r,I])=>{console.log(o,"===>>>>>>>fromCoinAmount",typeof o),o&&r&&I&&Number(r)>=15&&qe(),!o&&I&&(u.value="")},{immediate:!0}),H(()=>[u.value,A.value,ne.value],([o,r,I])=>{o&&r&&!I&&Number(r)>=15&&(Ge(),console.log(o,"===>toCoinAmount")),!o&&!I&&(s.value="")},{immediate:!0}),H(()=>[A.value,ne.value],([o,r])=>{Number(o)>180?A.value="180":Number(o)<15?r?u.value="":s.value="":o||(r?s.value="":u.value="")},{immediate:!0});const Ke=()=>{ne.value=!0,s.value=Ce(new Oe(l.value!=="convert"?Z.value:j.value).div(new Oe(2)).toString(),9)},Qe=()=>{ne.value=!0,s.value=l.value!=="convert"?Ce(Z.value,9):Ce(j.value,9)},Me=async()=>{k.value=!0,B(!0),F(""),se(y("tips.redeeming",{from:`${U(s.value,9)} xCETUS`,to:`${U(u.value,9)} CETUS`}));try{let o;const r=_e(s.value,9);console.log(r.toString(),"538====>");const I=await O.getRedeemLockPayload(r,i.value,Number(A.value));console.log(I,"payload==>");const P=await _.value.currentWallet.signAndExecuteTransactionBlock(I);if(o=E.value.handleTx(P),o&&o.hash){F(o.hash),B(!1),le(!0);const N={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:o.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${s.value}`,logoa:K("/sui-image/xWHALE-icon.png")}};oe.value!=="Aptos"&&(N.res=o.res),E.value.showTransitionPending(N);const L=await E.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getAccountWhaleBalance(_.value.address),e.getOwnerVeNFT(_.value.address),e.getOwnerLockCetuss(_.value.address),e.getMyShare(_.value.address)},3e3),k.value=!1}else B(!1),V(!0),k.value=!1;s.value="",u.value=""}catch(o){B(!1),V(!0),k.value=!1,s.value="",u.value="",console.log(o,"error===>")}};H(()=>[i.value,Pe.value,a.value,_.value.address],([o,r,I,P])=>{P&&(o&&e.getVeNFTDividendInfo(),o&&!Xe(I)&&r&&r.length>0&&(console.log("执行了",r),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const ze=async o=>{k.value=!0,B(!0),F(""),se("");try{let r;console.log(o.id,"==>vItem.id");const I=await O.getCancelRedeemPayload(o.id,i.value);console.log(I,"payload==>");const P=await _.value.currentWallet.signAndExecuteTransactionBlock(I);if(r=E.value.handleTx(P),r&&r.hash){F(r.hash),B(!1),le(!0);const N={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:r.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${G(o.xcetus_amount,9)}`,logoa:K("/sui-image/xWHALE-icon.png")}};oe.value!=="Aptos"&&(N.res=r.res),E.value.showTransitionPending(N);const L=await E.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getOwnerVeNFT(_.value.address),e.getOwnerLockCetuss(_.value.address),k.value=!1},3e3)}else B(!1),V(!0),k.value=!1;s.value="",u.value=""}catch(r){B(!1),V(!0),k.value=!1,s.value="",u.value="",e.setClaimLoading(""),console.log(r,"error===>")}},Je=h({}),et=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(_.value.address)},tt=async o=>{console.log(o,"vItem===>"),k.value=!0,B(!0),F(""),se(`${y("tips.claimingPendingYield")} ${U(G(o.cetus_amount,9),9)} CETUS`);try{let r;const I=await O.getRedeemPayload(o.id,i.value);console.log(I,"payload==>");const P=await _.value.currentWallet.signAndExecuteTransactionBlock(I);if(r=E.value.handleTx(P),r&&r.hash){F(r.hash),B(!1),le(!0);const N={title:"Claimed",desc:`Claimed ${U(G(o.cetus_amount,9),9)} CETUS successfully.`,hash:r.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${G(o.cetus_amount,9)}`,logoa:K("/sui-image/WHALE-icon.png")}};oe.value!=="Aptos"&&(N.res=r.res),E.value.showTransitionPending(N);const L=await E.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getOwnerLockCetuss(_.value.address),e.getAccountWhaleBalance(_.value.address),e.getOwnerVeNFT(_.value.address),e.getMyShare(_.value.address),e.getAvailableXCetus(),k.value=!1},3e3)}else B(!1),V(!0),k.value=!1;s.value="",u.value=""}catch(r){B(!1),V(!0),k.value=!1,s.value="",u.value="",e.setClaimLoading(""),console.log(r,"error===>")}},Ie=h(!1),nt=()=>{!localStorage.getItem(`notRemind${_.value.address}`)&&ae.value=="Convert"?Ie.value=!0:ae.value=="Redeem"?Me():Ae()},at=()=>{Ie.value=!1,Ae()},fe=c(()=>t.value.pendingCoinInfo),pe=c(()=>t.value.pendingAmount),he=h(!1);return{clickModalConvert:at,openConfirmModal:Ie,validateInput:()=>{A.value&&(A.value=A.value.replace(/[^\d]/g,""),A.value.charAt(0)==="0"&&(A.value=A.value.slice(1)))},countDown:et,value:g,change:f,clickExchange:ee,fromCoinAmount:s,toCoinAmount:u,showCoinSelect:m,headSwitchValue:l,headSwitchChange:x,vestingDateList:D,vestingParameter:A,vestingTab:te,holderList:me,lockupList:ye,leaderboardList:ve,whaleBalance:j,depositCetus:Ae,btnText:ae,loading:k,redeemRatio:ke,halfBalanne:Ke,maxBalanne:Qe,xWhaleBalance:ge,availableXwhale:Z,redeemingXwhale:q,withdrawWhale:Me,ownerLocks:Pe,cancelRedeemPayload:ze,holderInfo:Je,btnDisabled:Te,fixedFromCoin:ne,walletStore:Re,claimWhale:tt,wallet:_,depositOrWithdraw:nt,pendingAmount:pe,claimPendingYield:async()=>{he.value=!0,B(!0),F(""),se(`${y("tips.claimingPendingYield")} ${pe.value} ${fe.value.symbol}`);try{let o;const r=await O.getRedeemDividendV2Payload(i.value);console.log(r,"payload==>");const I=await _.value.currentWallet.signAndExecuteTransactionBlock(r);if(o=E.value.handleTx(I),o&&o.hash){F(o.hash),B(!1),le(!0);const P={title:"Claim",desc:`Claimed ${pe.value} ${fe.value.symbol} successfully.`,hash:o.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:fe.value.symbol,numa:`+ ${pe.value}`,logoa:fe.value.logo_url}};oe.value!=="Aptos"&&(P.res=o.res),E.value.showTransitionPending(P);const N=await E.value.watchTransaction(P);console.log("0221###swap###transitionStatus####",N),N&&setTimeout(()=>{e.getVeNFTDividendInfo(),he.value=!1},3e3),e.getOwnerLockCetuss(_.value.address)}else B(!1),V(!0),he.value=!1,k.value=!1}catch(o){B(!1),V(!0),he.value=!1,console.log(o,"error===>")}},inputBlur:()=>{Number(A.value)<15&&(A.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const de=e=>(Q("data-v-924bb0a1"),e=e(),z(),e),Fn={class:"dashboard-all"},Hn={class:"dashboard-content"},Xn={class:"content-left"},Yn={key:0,class:"vesting"},jn=de(()=>n("p",null,"Vesting",-1)),Zn={class:"content-right"},qn={key:0,class:"card-container"},Gn={class:"card-item"},Kn={class:"card-item"},Qn={class:"exchange"},zn=de(()=>n("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Jn=[zn],ea={key:1,class:"card-redeem"},ta={class:"card-item"},na={class:"vesting-duration"},aa=de(()=>n("p",null,"Vesting duration",-1)),oa={class:"vesting-content"},la={class:"vesting-left"},sa={class:"value-days"},ia=de(()=>n("span",null,"days",-1)),ra={class:"vesting-right"},ua=["onClick"],ca={class:"card-item"},da={class:"redeem-ratio"},ma=de(()=>n("span",null,"Redeem ratio",-1));function va(e,t,i,a,w,C){const d=ot,b=qt,p=fn,g=ft,f=$n,s=gt,u=re,m=On;return v(),T("div",Fn,[R(d,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),n("div",Hn,[n("div",Xn,[R(b,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(v(),T("div",Yn,[jn,(v(!0),T(Le,null,We(e.ownerLocks,l=>(v(),M(p,{key:l,"v-item":l,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):X("",!0)]),n("div",Zn,[R(g,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:t[0]||(t[0]=l=>{e.headSwitchChange(l)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(v(),T("div",qn,[n("div",Gn,[R(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[2]||(t[2]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",Kn,[R(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:t[4]||(t[4]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),n("img",{class:we(e.change?"gang animationex":"gang"),src:_t,alt:""},null,2),n("div",Qn,[(v(),T("svg",{class:we(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Jn,2))])])):(v(),T("div",ea,[n("div",ta,[R(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[6]||(t[6]=l=>{e.fixedFromCoin=!0,e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",na,[aa,n("div",oa,[n("div",la,[n("div",sa,[Fe(n("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>e.vestingParameter=l),onInput:t[8]||(t[8]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:t[9]||(t[9]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[vt,e.vestingParameter]])]),ia]),n("div",ra,[(v(!0),T(Le,null,We(e.vestingDateList,l=>(v(),T("div",{key:l.time,class:we(["box-table",{"box-table-active":l.num===Number(e.vestingParameter)}]),onClick:y=>e.vestingTab(l.num)},S(l.time),11,ua))),128))])]),R(s,{value:e.vestingParameter,"onUpdate:value":t[10]||(t[10]=l=>e.vestingParameter=l),max:180,min:15},null,8,["value"])]),n("div",ca,[R(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[11]||(t[11]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:t[12]||(t[12]=l=>{e.fixedFromCoin=!1,e.toCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),n("div",da,[ma,n("p",null,S(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(v(),M(u,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:W(()=>[n("span",null,S(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(v(),M(u,{key:3,class:"big-btn",onClick:t[13]||(t[13]=l=>e.walletStore.setIsShowWalletModal(!0))},{default:W(()=>[n("span",null,S(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(v(),M(m,{key:0,onClickConvert:e.clickModalConvert,onClose:t[14]||(t[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):X("",!0)])}const Ua=Y(Vn,[["render",va],["__scopeId","data-v-924bb0a1"]]);export{Ua as default};
