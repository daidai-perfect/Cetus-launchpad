import{l as C,m as f,e as A,o as d,f as u,x as w,h as s,v as p,i as g,S as T,a5 as I,z as M,w as k,j as y,B as N,p as U,k as W}from"./entry.60f21e23.js";import"./index.3fe8d329.js";import{u as E,aj as D,c as L}from"./index.d6b37ace.js";import{u as R,b as P}from"./pool.4cb0c8ff.js";import{u as m}from"./useWhale.17f39121.js";import{p as v,R as q,s as O,b as V}from"./index.faaa0495.js";import"./decimal.a2826370.js";import{D as _}from"./decimal.765d8738.js";import{_ as B}from"./xWHALE-icon.2df34cd4.js";const j={props:{haveLoading:{type:Boolean,default:!1,require:!1},icon:{type:String,default:""},label:{type:String,default:""},value:{type:String,default:"--"},symbolName:{type:String,default:""}},setup(a){const{t:n}=C(),e=E(),t=f(()=>e);return{t:n,wallet:t}}},F=""+new URL("icon-My-total-xWHALE_2x.a8c79cfa.png",import.meta.url).href,H=""+new URL("icon-Available-xWHALE_2x.26264052.png",import.meta.url).href,z=""+new URL("icon-Redeeming-xWHALE_2x.12af0f21.png",import.meta.url).href;const G={class:"icon-text"},J={key:0,src:F,alt:""},K={key:1,src:H,alt:""},Q={key:2,src:z,alt:""},Y={class:"text"},Z={class:"label"},$={key:0,class:"text-loading"},ee={key:1};function te(a,n,e,t,l,h){const i=T;return d(),u("div",G,[e.label.includes("My total xCETUS")?(d(),u("img",J)):e.label.includes("Available")?(d(),u("img",K)):e.label.includes("Redeeming")?(d(),u("img",Q)):w("",!0),s("div",Y,[s("span",Z,p(e.label),1),e.value=="--"&&t.wallet.address?(d(),u("div",$,[g(i,{loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})])):(d(),u("p",ee,p(e.value?e.value:"")+" "+p(e.symbolName),1))])])}const ae=A(j,[["render",te],["__scopeId","data-v-2e07be2f"]]),ne=I("xcetus",{state:()=>({venft_id:"",xWhaleBalance:"--",venftInfo:{},pendingAmount:"--",newPendingAmount:"--",whaleBalance:"--",ownerLocks:[],availableXwhale:"--",redeemingXwhale:"--",nextStartTime:"",xcetusShare:"--",pendingCoinInfo:{},newPendingCoinInfo:{},cetusApr:"",claimLoading:"",dividendManagerInfo:{},rewardCoin:{},rewardCoinAmount:"--",xcetusRewardList:[]}),getters:{getPoolStore(){return R()}},actions:{async getOwnerVeNFT(a){const n=m("Sui");try{const e=await n.getOwnerVeNFT(a);console.log(e,"===>result"),e?(this.venft_id=e.id,this.xWhaleBalance=v(e.xcetus_balance,9),this.venftInfo={id:e.id,type:e.type,index:e.index,xcetus_balance:e.xcetus_balance},this.getVeNFTDividendInfo()):(this.xWhaleBalance="0",this.availableXwhale="0",this.redeemingXwhale="0",this.pendingAmount="0",this.newPendingAmount="0")}catch{this.xWhaleBalance="--",this.availableXwhale="--",this.redeemingXwhale="--",this.pendingAmount="--",this.newPendingAmount="--"}},async getVeNFTDividendInfo(){const a=m("Sui"),n=P("Sui");try{const e=await a.getVeNFTDividendInfo(this.venft_id,this.dividendManagerInfo),t=await a.getPeriod(this.dividendManagerInfo),l=await n.getTokenList();console.log(t,"===>period"),console.log(e,"===>result");const h=[];if(e&&e.rewards&&e.rewards.length>0){for(let i=0;i<e.rewards.length;i++)if(e.rewards[i].period<t){const o=e.rewards[i].rewards;for(let c=0;c<o.length;c++){const r=o[c];Number(r.amount)>0&&h.push({...r})}}if(h&&h.length>0){const i={};for(let c=0;c<h.length;c++){const r=h[c];if(i[r.coin_type])i[r.coin_type].amount=new _(i[r.coin_type].amount).add(new _(r.amount)).toString();else{let x=l.filter(S=>q(S.address,r.coin_type))[0];x||(x=(await n.getTokenListByCoinType([r.coin_type]))[0]),i[r.coin_type]={...r,...x}}}const o=Object.values(i).map(c=>({...c,amount:O(v(c.amount,c.decimals),6)}));this.xcetusRewardList=o,console.log(o,"===>rewardArr")}else this.xcetusRewardList=[]}else this.xcetusRewardList=[]}catch{this.xcetusRewardList=[]}},async getDividendManager(){const n=await m("Sui").getDividendManager();this.nextStartTime=n.nextStartTime,this.dividendManagerInfo=n,this.getVeNFTDividendInfo()},async getAccountWhaleBalance(a){const e=await m("Sui").getOwnerCetusCoins(a);if(console.log(e,"==>assets"),e&&e.length>0){let t=new _(0);e.forEach(l=>{console.log(v(l.balance.toString(),9),"===>prettyAmount(ele.balance.toString(), 9)"),t=t.add(v(l.balance.toString(),9))}),console.log(this.whaleBalance,"===>this.whaleBalance"),this.whaleBalance=t}else this.whaleBalance="0"},async getOwnerLockCetuss(a){const e=await m("Sui").getOwnerLockCetuss(a);console.log(e,"assets===>");const t=e.sort((l,h)=>l.locked_until_time-h.locked_until_time);this.ownerLocks=t,console.log(this.ownerLocks,"===>this.ownerLocks"),this.setClaimLoading(""),this.getAvailableXCetus()},async getAvailableXCetus(){const a=m("Sui");console.log(this.ownerLocks,"==>this.ownerLocks");const n=await a.getAvailableXCetus(this.venftInfo,this.ownerLocks);console.log(n,"==>result1111"),console.log(this.ownerLocks&&this.ownerLocks.length==0,this.venftInfo,"##this.ownerLocks&&this.ownerLocks.length== 0"),this.availableXwhale=this.ownerLocks&&this.ownerLocks.length==0?v(this.venftInfo.xcetus_balance,9):v(n,9),console.log(this.xWhaleBalance,"===>this.xWhaleBalance"),console.log(this.availableXwhale,"===>this.availableXwhale"),this.redeemingXwhale=this.xWhaleBalance!=="--"?new _(this.xWhaleBalance).sub(new _(this.availableXwhale)).toString():"0"},async getMyShare(a){const n=m("Sui");try{const e=await n.getMyShare(a);e?(this.xcetusShare=Number(e)>0&&Number(e)<.01?"<0.01":e,console.log(e,"result===>124")):this.xcetusShare="0"}catch(e){console.log(e,"e===>"),this.xcetusShare=""}},async getXcetusApr(){try{const a=m("Sui"),n=await a.getPhaseDividendInfo(this.dividendManagerInfo);if(n&&n.bonus&&n.bonus.length>0){const{tokensObj:e,RATES:t}=this.getPoolStore;let l=new _(0);console.log(n,"##phaseDividendInfo.bonus"),n.bonus.forEach(c=>{console.log(c,"##bonu");const r=c.name=="0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":D(c.name,!1);console.log(e,e[r],r,"##tokensObj[tokenAddress]");const x=e[r].decimals,S=t[r].price,X=new _(c.value).mul(new _(S)).div(new _(Math.pow(10,x)));l=l.add(X),console.log(l.toString(),"totalBonusAmount.toString()")});const{treasury:h}=await a.getXcetusManager(),i=t[L.Sui.xcetusTokenAddress].price,o=l.div(7).mul(365).div(new _(h).mul(i).div(Math.pow(10,9))).toNumber()*100;this.cetusApr=Number(o)>0&&Number(o)<.01?"<0.01":o,console.log("ðŸš€ðŸš€ðŸš€ ~ file: xcetus.ts:274 ~ getXcetusApr ~ this.cetusApr:",this.cetusApr)}}catch(a){console.log("getXcetusApr error",a);const{data:n}=await fetch(`${L.Sui.api}/v2/sui/storm/dividend_rewards`).then(t=>t.json()),e=n.apr&&n.apr.replace("%","");this.cetusApr=Number(e)>0&&Number(e)<.01?"<0.01":e}},loginOut(){this.venft_id="",this.xWhaleBalance="--",this.venftInfo={},this.pendingAmount="--",this.whaleBalance="--",this.ownerLocks=[],this.availableXwhale="--",this.redeemingXwhale="--",this.xcetusShare="--",this.xcetusRewardList=[]},setClaimLoading(a){this.claimLoading=a}}}),se={props:{title:{type:String,default:""}},setup(a){const{t:n}=C(),e=f(()=>a.title=="LP Leaderboard"?"50% of the platform fee dividend is used for bonus distribution":a.title=="Dashboard"?"Manage your CETUS and xCETUS":a.title=="Liquidity Lockup"?"Lock your position, boost liquidity mining yield up to 2.5x.":""),t=ne(),l=f(()=>t),h=f(()=>l.value.redeemingXwhale),i=f(()=>l.value.availableXwhale),o=f(()=>l.value.xWhaleBalance);return{t:n,headTitle:e,xWhaleBalance:o,availableXwhale:i,redeemingXwhale:h,addCommom:V}}},oe=""+new URL("img-H5banner-leaderboard.61effe4e.png",import.meta.url).href,ie=""+new URL("img-Liquidity-Lockup.48471df1.png",import.meta.url).href,le=""+new URL("banner-Dashboard-h5.8a7678c2.png",import.meta.url).href;const b=a=>(U("data-v-0eef48fa"),a=a(),W(),a),ce={class:"leaderboard-banner"},re={key:0,src:oe,alt:""},de={key:1,src:ie,alt:""},ue={key:2,src:le,alt:""},he={class:"navigation-top"},ge={class:"title-lage"},_e=["href"],me=b(()=>s("div",{class:"more"},"Learn more",-1)),we=b(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on1"})],-1)),ve=[me,we],fe={key:0,class:"leaderboard-bot"},be={class:"bot-left"},xe=b(()=>s("img",{src:B,alt:""},null,-1)),pe=b(()=>s("div",{class:"pending-bonus"},[s("p",null,"My pending bonus"),s("span",null,"55.431 xCETUS")],-1)),ye=b(()=>s("div",{class:"bot-right"},[s("p",null,"Next epoch"),s("div",{class:"epoch-time"},[s("span",null,"12"),y(" : "),s("span",null,"23"),y(" : "),s("span",null,"22"),y(" : "),s("span",null,"45")])],-1)),Se={key:1,class:"navigation-bot"},ke={key:2,class:"liquidity-bot"},Le={key:0,class:"navigation-bot-h5"},Ce={key:1,class:"eaderboard-bot-h5"},Ae=b(()=>s("div",null,[s("img",{src:B,alt:""}),s("div",{class:"pending-bonus"},[s("p",null,"My pending bonus"),s("span",null,"55.431 xCETUS")])],-1)),Be={key:2,class:"liquidity-bot-h5"};function Xe(a,n,e,t,l,h){const i=N,o=ae;return d(),u("div",null,[s("div",ce,[e.title.includes("Leaderboard")?(d(),u("img",re)):e.title.includes("Liquidity")?(d(),u("img",de)):(d(),u("img",ue)),s("div",{class:M(["navigation",e.title.includes("Leaderboard")?"leaderboard":e.title.includes("Liquidity")?"liquidity":e.title])},[s("div",he,[s("p",null,p(e.title),1),s("div",ge,p(t.headTitle),1),s("a",{href:e.title.includes("Dashboard")?"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus":"##",class:"link",target:"_blank"},ve,8,_e)]),e.title.includes("Leaderboard")?(d(),u("div",fe,[s("div",be,[xe,pe,g(i,{loading:!1},{default:k(()=>[y(" Claim All ")]),_:1})]),ye])):w("",!0),e.title.includes("Dashboard")?(d(),u("div",Se,[g(o,{label:"My total xCETUS",value:t.xWhaleBalance>0?t.addCommom(t.xWhaleBalance):t.xWhaleBalance},null,8,["value"]),g(o,{label:"Available xCETUS",value:t.availableXwhale>0?t.addCommom(t.availableXwhale):t.availableXwhale},null,8,["value"]),g(o,{label:"Redeeming xCETUS",value:t.redeemingXwhale>0?t.addCommom(t.redeemingXwhale):t.redeemingXwhale},null,8,["value"])])):w("",!0),e.title.includes("Liquidity")?(d(),u("div",ke,[g(o,{label:"My total locked",value:"$100.12"}),g(o,{label:"Pending rewards (xCETUS)",value:"55.431"})])):w("",!0)],2)]),e.title.includes("Dashboard")?(d(),u("div",Le,[g(o,{label:"My total xCETUS",value:t.xWhaleBalance},null,8,["value"]),g(o,{label:"Available xCETUS",value:t.availableXwhale},null,8,["value"]),g(o,{label:"Redeeming xCETUS",value:t.redeemingXwhale},null,8,["value"])])):w("",!0),e.title.includes("Leaderboard")?(d(),u("div",Ce,[Ae,g(i,{loading:!1},{default:k(()=>[y(" Claim All ")]),_:1})])):w("",!0),e.title.includes("Liquidity")?(d(),u("div",Be,[g(o,{label:"My total locked",value:"$100.12"}),g(o,{label:"Pending rewards (xCETUS)",value:"55.431"})])):w("",!0)])}const Pe=A(se,[["render",Xe],["__scopeId","data-v-0eef48fa"]]);export{Pe as _,ne as u};
