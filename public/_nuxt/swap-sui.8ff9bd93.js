import{_ as Sa}from"./refresh-icon.9ed451f2.js";import{P as Aa,_ as ka,a as ya}from"./token-info.7ab062d3.js";import{_ as Ia}from"./network-tips.e6db05f6.js";import{_ as Ta}from"./coin-select.3c71b024.js";import{_ as Oa}from"./swap-setting.befbdd76.js";import{_ as $a}from"./token-warning-modal.e6747d11.js";import{a as $o,$ as Ra,m as A,r as d,A as V,e as Ro,l as de,C as Na,o as T,c as ee,w as Te,h as r,x as $,u as Me,I as Pe,f as U,y as he,j as re,G as E,i as K,F as eo,B as No,p as Mo,k as Po,b as Ma,a2 as Pa,a3 as Fa,z as ja,q as Ba,s as Ua,fg as Io,P as La,J as Ea,Y as qa}from"./entry.4704f58e.js";/* empty css              *//* empty css              */import{i as Ee}from"./import-icon.de3e6c66.js";import{a as Fo,u as jo,e as Wa,b as Da}from"./index.55827d77.js";import{a as H,b as qe,d as Ce,c as je,e as Ha,g as Ya,p as To,h as Fe,M as Oo}from"./common.b5864f99.js";import{u as za,c as we,b as Je}from"./index.1b83cc3f.js";import"./decimal.a2826370.js";import{A as Ja,R as Ga,c as Le,u as Ka}from"./confetti.module.322fccac.js";import{U as Qa}from"./underline-tab.d80f589f.js";import{T as Xa}from"./token-input-block.8f89b200.js";import{I as Za}from"./icon-tooltip.d7656d2a.js";import{D as b}from"./decimal.765d8738.js";import{I as Va}from"./icon-slippage.2cc88851.js";/* empty css              */import"./index.e26dfffd.js";/* empty css              */import"./install.41594718.js";import"./token-warning_2x.879a5b90.js";import"./img-no-Positions_2x.83ab4f9e.js";import"./img-no-Positions_2x.c9a83710.js";/* empty css              */import"./icon-error_2x.048650ab.js";import"./check-box.86d74e04.js";import"./coin-img.f7c54220.js";import"./limit-beta.d9b74d9e.js";import"./token-dropdown-select.5bc6484f.js";import"./coin-img-warning.c9081ca1.js";import"./token.bcdd7e0b.js";import"./useDebounceFunction.fcb46106.js";const _a=$o({components:{Modal:Ra,PriceImpactTooltip:Aa},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,default:0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,c){const Y=Fo(),k=A(()=>Y),q=jo(),oe=A(()=>q),l=w=>{var i;return(w==null?void 0:w.logoURI)||(w==null?void 0:w.logo_url)||((i=k.value.tokensObj[w==null?void 0:w.address])==null?void 0:i.logo_url)||(oe.value.theme==="default"?Ee("/image/coins/unknown.png"):Ee("/image/coins/sui-unknown.png"))},ae=d(!1),z=A(()=>oe.value.chainName),J=async()=>{c.emit("to-swap")};d([]);const ie=d(0),Q=d(""),_=d(""),ve=A(()=>oe.value.slippage);V(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,ve.value],([w,i,u,B,g,D])=>{if(w&&i&&u&&B&&D)if(g){const N=new b(i).mul(new b(D/100));_.value=new b(i).sub(N).toString()}else{const N=new b(w).mul(new b(D/100));Q.value=new b(w).add(N).toString()}},{immediate:!0});const ne=d(""),Se=A(()=>{var w,i,u,B,g,D,N,x,C,F,W,n;return(u=(i=k==null?void 0:k.value)==null?void 0:i.tokensObj[(w=e==null?void 0:e.fromCoin)==null?void 0:w.address])!=null&&u.pyth_id&&((D=(g=k==null?void 0:k.value)==null?void 0:g.tokensObj[(B=e==null?void 0:e.fromCoin)==null?void 0:B.address])==null?void 0:D.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(C=(x=k==null?void 0:k.value)==null?void 0:x.tokensObj[(N=e==null?void 0:e.fromCoin)==null?void 0:N.address])!=null&&C.coingecko_id?"coingecko":(n=(W=k==null?void 0:k.value)==null?void 0:W.tokensObj[(F=e==null?void 0:e.fromCoin)==null?void 0:F.address])!=null&&n.birdeyeid?"birdeye":null}),Oe=A(()=>{var w,i,u,B,g,D,N,x,C,F,W,n;return(u=(i=k==null?void 0:k.value)==null?void 0:i.tokensObj[(w=e==null?void 0:e.toCoin)==null?void 0:w.address])!=null&&u.pyth_id&&((D=(g=k==null?void 0:k.value)==null?void 0:g.tokensObj[(B=e==null?void 0:e.toCoin)==null?void 0:B.address])==null?void 0:D.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(C=(x=k==null?void 0:k.value)==null?void 0:x.tokensObj[(N=e==null?void 0:e.toCoin)==null?void 0:N.address])!=null&&C.coingecko_id?"coingecko":(n=(W=k==null?void 0:k.value)==null?void 0:W.tokensObj[(F=e==null?void 0:e.toCoin)==null?void 0:F.address])!=null&&n.birdeyeid?"birdeye":null}),f=async()=>{const w=k.value.tokenExternalPriceObj[e.fromCoin.address],i=k.value.tokenExternalPriceObj[e.toCoin.address];if(w&&i){const u=new b(w).div(new b(i)),B=new b(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(u).div(u).mul(100);let g=Math.abs(qe(B,2));u.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?ne.value="":ne.value=B>0&&B<=.01?"0.01":g}else ne.value=""},Ae=w=>{if(w<5)return"color-s";if(w>=5&&w<10)return"color-w";if(w>=10)return"color-e"};V(()=>[e.oneToAmount,k.value.tokenExternalPriceObj,z.value],([w,i,u])=>{w&&i&&!je(i)&&u!=="Aptos"&&f()},{immediate:!0,deep:!0});const R=d(!1);return{getCoinIcon:l,addCommom:H,sFixD:qe,rateChange:ae,chainName:z,clickNextBtn:J,pathLength:ie,maximumSold:Q,minimumReceived:_,decimalUi:Ce,getTextColor:Ae,priceExangeRate:ne,formCoinMarket:Se,toCoinMarket:Oe,readWithin:R}}});const be=e=>(Mo("data-v-32f2300a"),e=e(),Po(),e),xa=be(()=>r("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),en={class:"new-swap-contnet"},on={class:"coin-info"},an={class:"from-coin-info"},nn={class:"left"},tn={class:"coin-amount"},sn={class:"coin-symbol"},ln={class:"right"},un={class:"to-coin-info"},rn={class:"left"},dn={class:"coin-amount"},vn={class:"coin-symbol"},cn={class:"right"},mn=be(()=>r("div",{class:"new-sui-exchange to-swap-logo"},[r("div",{class:"exchange-new"},[r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-icon_swap1"})])])],-1)),fn={class:"coin-rate"},pn={key:0,class:"coin-rate-box"},gn={class:"left"},wn=be(()=>r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-icon_swap2"})],-1)),Cn=[wn],hn={key:1,class:"coin-rate-box"},bn={class:"left"},Sn=be(()=>r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-icon_swap2"})],-1)),An=[Sn],kn={key:2,class:"price-impact"},yn=be(()=>r("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),In=[yn],Tn=be(()=>r("br",null,null,-1)),On={class:"bottom"},$n={class:"induction"},Rn={class:"item"},Nn={class:"induction-text"},Mn={class:"induction-value"},Pn={class:"item"},Fn={class:"induction-text"},jn={class:"induction-value"},Bn={class:"item"},Un={class:"induction-text"},Ln={key:0,class:"item"},En={class:"induction-text"},qn={key:0,class:"induction-value"},Wn={key:1,class:"induction-value"},Dn={key:0,class:"within-desc"},Hn=be(()=>r("div",{class:"within-top"},[r("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Yn={class:"within-bottom"},zn={key:0,class:"price-updated modal-bottom-btn"},Jn=be(()=>r("span",null,"Price updated",-1));function Gn(e,c,Y,k,q,oe){const l=de("PriceImpactTooltip"),ae=No,z=de("Modal"),J=Na("image");return T(),ee(z,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal new-modal-have-btn",onCancel:c[6]||(c[6]=ie=>e.$emit("on-close"))},{closeIcon:Te(()=>[xa]),default:Te(()=>{var ie;return[r("div",en,[r("div",on,[r("div",an,[r("div",nn,[r("div",tn,$(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Me(H))(e.fromCoinAmount)),1),r("div",sn,$(e.fromCoin&&e.fromCoin.symbol),1)]),r("div",ln,[Pe(r("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),r("div",un,[r("div",rn,[r("div",dn,$(e.toCoinAmount&&("addCommom"in e?e.addCommom:Me(H))(e.toCoinAmount)),1),r("div",vn,$(e.toCoin&&e.toCoin.symbol),1)]),r("div",cn,[Pe(r("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),mn])]),r("div",fn,[e.rateChange?(T(),U("div",hn,[r("div",bn,[Pe(r("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),r("span",null,"1 "+$(e.toCoin&&e.toCoin.symbol)+" ≈",1),Pe(r("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),r("span",null,$(e.oneFromAmount)+" "+$(e.fromCoin.symbol),1)]),r("div",{class:"right",onClick:c[1]||(c[1]=Q=>e.rateChange=!e.rateChange)},An)])):(T(),U("div",pn,[r("div",gn,[Pe(r("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),r("span",null,"1 "+$(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),Pe(r("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),r("span",null,$(e.oneToAmount)+" "+$(e.toCoin.symbol),1)]),r("div",{class:"right",onClick:c[0]||(c[0]=Q=>e.rateChange=!e.rateChange)},Cn)])),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(T(),U("div",kn,[(T(),U("svg",{class:he(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},In,2)),r("span",{class:he(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),r("span",{class:he(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[re("Price Impact Alert."),Tn,re(" Be cautious before submitting your order.")],2)])):E("",!0)]),r("div",On,[r("div",$n,[r("div",Rn,[r("div",Nn,$(e.$t("modal.slippageTolerance")),1),r("div",Mn,$(e.slippage)+"%",1)]),r("div",Pn,[r("div",Fn,$(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),r("div",jn,$(e.fixedFromCoin?("addCommom"in e?e.addCommom:Me(H))(("sFixD"in e?e.sFixD:Me(qe))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Me(H))(("sFixD"in e?e.sFixD:Me(qe))(e.maximumSold,e.fromCoin.decimals)))+" "+$(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),r("div",Bn,[r("div",Un,[re(" Price Impact "),K(l,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),r("div",{class:he(["induction-value",String(e.impact)==="Incalculable"?"impact-w":e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[e.chainName=="Aptos"?(T(),U(eo,{key:0},[re($(e.impact<.01?"<0.01":e.impact>100?">100":e.impact)+"% ",1)],64)):String(e.impact)=="Incalculable"?(T(),U(eo,{key:1},[re(" Incalculable ")],64)):(T(),U(eo,{key:2},[re($(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(ie=String(e.impact))==null?void 0:ie.replace("-","")}`)+"% ",1)],64))],2)]),e.chainName=="Aptos"?(T(),U("div",Ln,[r("div",En,$(e.$t("common.fee")),1),e.chainName=="Aptos"?(T(),U("div",qn,$(e.formatFee)+" "+$(e.fromCoin.symbol)+" ("+$(e.fee*100)+"%) ",1)):(T(),U("div",Wn,$(e.fee)+" "+$(e.fromCoin.symbol),1))])):E("",!0)])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(T(),U("div",Dn,[Hn,r("div",Yn,[r("div",{class:he(["within-btn cancel-btn",e.readWithin?"within-btn-active":""]),onClick:c[2]||(c[2]=Q=>e.readWithin=!0)}," Yes, please continue. ",2),r("div",{class:"within-btn cancel-btn",onClick:c[3]||(c[3]=Q=>e.$emit("on-close"))},"No, cancel it.")])])):E("",!0)]),e.isShowAccept?(T(),U("div",zn,[Jn,K(ae,{class:"accept-btn",loading:e.swapLoading,onClick:c[4]||(c[4]=Q=>e.$emit("accept"))},{default:Te(()=>[re("Accept")]),_:1},8,["loading"])])):(T(),ee(ae,{key:1,class:"big-btn swap-confirm-btn modal-bottom-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:c[5]||(c[5]=Q=>e.clickNextBtn())},{default:Te(()=>[re($(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"]))]}),_:1},8,["title"])}const Kn=Ro(_a,[["render",Gn],["__scopeId","data-v-32f2300a"]]),Qn=$o({components:{AggregatorSettingModal:Ja,RouterModal:Ga,UnderlineTab:Qa,TokenInputBlock:Xa,IconTooltip:Za,SuiSwapConfirm:Kn,IconSlippage:Va},setup(){const e=Ma(),c=Pa(Fa,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:Y,locale:k}=ja(),q=jo(),oe=Fo(),l=A(()=>oe);let ae=d(!1),z=d(!0),J=d(!1),ie=d(!1),Q=d(!1),_=d(!1);const ve=d("fromCoin"),ne=d(""),Se=d(""),Oe=d(!1),f=d(!0),Ae=d(!1),R=d(!1),w=d(!1),i=d(""),u=d(""),B=d(20),g=d(0),D=d(null),N=d(!1),x=A(()=>q.slippage),C=A(()=>q.chainName),F=A(()=>C.value?Da(C.value):{}),W=A(()=>Ka()),n=d(),t=d(),Ge=A(()=>we&&we[C.value]&&we[C.value].hasRouter),ao=A(()=>oe.getPoolInfoSuccess),Bo=A(()=>{var o;return h.value&&((o=h.value)!=null&&o.is_pause)?"Pool Closed":!n.value||!t.value?Y("modal.selectTokenModalTitle"):!Number(i.value)&&!Number(u.value)?Y("button.enterAmount"):!Ge.value&&!h.value&&ao.value?"Pool Not Found":Ge.value&&Re.value?"No Available Route":N.value?Y("button.insufficientLiquidity"):Number(i.value)>Number(io.value)?Y("button.insufficientBalance",{name:n.value.symbol}):Y("button.swap")}),Uo=o=>{var s,a,p,m;ve.value=o,o==="fromCoin"?(ne.value=((s=t.value)==null?void 0:s.address)||"",Se.value=((a=n.value)==null?void 0:a.address)||""):(ne.value=((p=n.value)==null?void 0:p.address)||"",Se.value=((m=t.value)==null?void 0:m.address)||""),Oe.value=!0},Ke=d({}),Qe=d({}),Lo=o=>{ve.value==="fromCoin"?(Ke.value=o,Ze(o)):(Qe.value=o,Ze(o))},Xe=d(!1);Ba(()=>{no(),window.addEventListener("updateSwapParams",o=>{Xe.value=!Xe.value})}),Ua(()=>{clearInterval(D.value)}),A(()=>q);const We=()=>{var o,s,a,p,m;console.log("🚀 ~ file: swap-sui.vue:785 ~ clickRefresh ~:"),!z.value&&(!h.value&&!Ge.value||(clearInterval(D.value),g.value=0,z.value=!0,te.value||Ie(f.value?i.value:u.value),X.value.address&&F.value.getAccount(X.value.address),setTimeout(()=>{z.value=!1,no()},1e3),console.log("🚀 ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES11111:",(o=l==null?void 0:l.value)==null?void 0:o.RATES),(!((s=l==null?void 0:l.value)!=null&&s.RATES)||je((a=l==null?void 0:l.value)==null?void 0:a.RATES))&&(console.log("🚀 ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES2222:",(p=l==null?void 0:l.value)==null?void 0:p.RATES),(m=l==null?void 0:l.value)==null||m.setRates("Sui"))))};console.log("🚀 ~ file: swap-sui.vue:811 ~ clickRefresh ~ clickRefresh:",We);const no=()=>{D.value=setInterval(()=>{z.value=!1,Ae.value||g.value<B.value&&(g.value+=1,g.value===B.value&&(C.value=="Aptos"?(h.value&&h.value.poolAddress&&oe.updateCurrentPools(h.value.poolAddress,C.value),We()):_.value||We(),g.value=0,z.value=!0))},1e3)};V(f,Io((o,s)=>{f.value=o},500));const ue=d(!1);V(i,(o,s)=>{o&&o!==0&&f.value&&(g.value=0,ze(Ie(o),800)),o==""&&f.value&&(u.value="")}),V(u,(o,s)=>{o&&o!==0&&!f.value&&(g.value=0,ze(Ie(o),800)),o==""&&!f.value&&(i.value="")});const De=d(1e-4),He=async o=>{let s=o;if(C.value==="Aptos"&&!s.current_sqrt_price&&i.value&&u.value){const a=await F.value.getPools([s.address]);a&&a[0]&&(s={...o,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(s.current_sqrt_price&&i.value&&u.value){const p=(n.value.address===s.coinA.address&&t.value.address===s.coinB.address?0:1)==0,m=new b(i.value),S=new b(u.value),y=m.sub(m.mul(new b(s.fee))),O=S.div(y);return F.value.getPriceImpactPct(s,O.toString(),p)}return"--"},to=d(0),so=d(0),lo=d(),$e=d({}),Eo=async o=>{if(h.value&&(te.value=!0,!(f.value&&Number(i.value)==0)&&!(!f.value&&Number(u.value)==0))){if(n.value&&t.value&&(i.value||u.value)){R.value=!0,w.value=!0,N.value=!1;const s=n.value.address===h.value.coinA.address&&t.value.address===h.value.coinB.address?0:1;try{let a=await F.value.preSwap({pool:h.value,a2b:s==0,byAmountIn:f.value,amount:f.value?i.value:u.value});N.value=a==null?void 0:a.isExceed,lo.value=a==null?void 0:a.estimatedFeeAmount,f.value?(u.value=a.estimatedAmountOut,me.value=(Number(a.estimatedAmountOut)/o).toString(),ce.value=(o/Number(a.estimatedAmountOut)).toString()):(i.value=a.estimatedAmountIn,me.value=(o/Number(a.estimatedAmountIn)).toString(),ce.value=(Number(a.estimatedAmountIn)/o).toString()),to.value=new b(u.value).div(i.value).toString(),so.value=new b(i.value).div(u.value).toString(),De.value=C.value=="Aptos"?await He(h.value):await He($e.value||h.value),R.value=!1,w.value=!1}catch(a){console.log("pre swap error1",a),R.value=!1,w.value=!1}}else f.value?u.value="":i.value="",R.value=!1,w.value=!1;te.value=!1}},qo=za(),X=A(()=>qo),Wo=d({}),ce=d(""),me=d(""),io=A(()=>X.value.assets&&n.value&&X.value.assets[n.value.address]?To(X.value.assets[n.value.address].balance,n.value.decimals):0),Do=A(()=>X.value.assets&&t.value&&X.value.assets[t.value.address]?To(X.value.assets[t.value.address].balance,t.value.decimals):0);V(()=>l.value.tokensObj,async o=>{if(o&&!je(o)){const s=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?n.value=o[a]||await F.value.getTokenBySymbol(o,a):!a&&!n.value&&(n.value=o[we[C.value].swapDefaultPair.fromCoin]),s?t.value=o[s]||await F.value.getTokenBySymbol(o,s):!s&&!t.value&&(t.value=o[we[C.value].swapDefaultPair.toCoin],console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ newValue:",o),console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",we[C.value].swapDefaultPair.toCoin)),!a&&s&&(n.value="")}},{immediate:!0});const h=A(()=>{var o,s,a,p,m;if(n.value&&t.value){let S=null,y={};if(Object.values(l.value.poolConfigList).forEach(v=>{var I,L,j,P;(v.coinA.address.toUpperCase()===((I=n.value.address)==null?void 0:I.toUpperCase())&&v.coinB.address.toUpperCase()===((L=t.value.address)==null?void 0:L.toUpperCase())||v.coinB.address.toUpperCase()===((j=n.value.address)==null?void 0:j.toUpperCase())&&v.coinA.address.toUpperCase()===((P=t.value.address)==null?void 0:P.toUpperCase()))&&(y[v.address]={...v})}),C.value=="Aptos"&&l.value.poolsObj&&!je(l.value.poolsObj))for(const v in l.value.poolsObj){const I=l.value.poolsObj[v];(I.token_a.address.toUpperCase()===((o=n.value.address)==null?void 0:o.toUpperCase())&&I.token_b.address.toUpperCase()===((s=t.value.address)==null?void 0:s.toUpperCase())||I.token_b.address.toUpperCase()===((a=n.value.address)==null?void 0:a.toUpperCase())&&I.token_a.address.toUpperCase()===((p=t.value.address)==null?void 0:p.toUpperCase()))&&(y[I.address]={...I})}const O=Object.values(y).sort((v,I)=>v.fee-I.fee);for(let v=0;v<O.length;v++)if(!((m=O[v])!=null&&m.is_pause)){S=O[v];break}return S&&!je(S)?(console.log("🚀🚀🚀 ~ file: swap.vue:1094 ~ poolInfo ~ info:",S),S):null}return null}),uo=d(!0),ro=d(!1),Ho=async o=>{o&&C.value=="Aptos"&&(Ie(f.value?i.value:u.value),ro.value=!0,o.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&o.coinB.symbol.toLowerCase()===t.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,N.value=!1)};V(()=>h.value,(o,s)=>{o&&(!s||o.address!==s.address||o.current_sqrt_price!==s.current_sqrt_price)&&Ho(o)},{immediate:!0,deep:!0});const Yo=A(()=>l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].logoURI),zo=A(()=>l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].logoURI),Jo=A(()=>C.value==="Aptos"?l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].coingecko_id||null:l.value.tokensObj&&n.value&&n.value.address||null),Go=A(()=>C.value==="Aptos"?l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].coingecko_id||null:l.value.tokensObj&&t.value&&t.value.address||null),Ko=A(()=>{var o,s,a,p,m,S,y,O,v,I,L,j,P;return console.log("🚀🚀🚀 ~ file: swap.vue:1222 ~ formCoinMarket ~ pools?.value?.tokensObj:",(o=l==null?void 0:l.value)==null?void 0:o.tokensObj),(p=(a=l==null?void 0:l.value)==null?void 0:a.tokensObj[(s=n==null?void 0:n.value)==null?void 0:s.address])!=null&&p.pyth_id&&((y=(S=l==null?void 0:l.value)==null?void 0:S.tokensObj[(m=n==null?void 0:n.value)==null?void 0:m.address])==null?void 0:y.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(I=(v=l==null?void 0:l.value)==null?void 0:v.tokensObj[(O=n==null?void 0:n.value)==null?void 0:O.address])!=null&&I.coingecko_id?"coingecko":(P=(j=l==null?void 0:l.value)==null?void 0:j.tokensObj[(L=n==null?void 0:n.value)==null?void 0:L.address])!=null&&P.birdeyeid?"birdeye":null}),Qo=A(()=>{var o,s,a,p,m,S,y,O,v,I,L,j;return(a=(s=l==null?void 0:l.value)==null?void 0:s.tokensObj[(o=t==null?void 0:t.value)==null?void 0:o.address])!=null&&a.pyth_id&&((S=(m=l==null?void 0:l.value)==null?void 0:m.tokensObj[(p=t==null?void 0:t.value)==null?void 0:p.address])==null?void 0:S.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(v=(O=l==null?void 0:l.value)==null?void 0:O.tokensObj[(y=t==null?void 0:t.value)==null?void 0:y.address])!=null&&v.coingecko_id?"coingecko":(j=(L=l==null?void 0:l.value)==null?void 0:L.tokensObj[(I=t==null?void 0:t.value)==null?void 0:I.address])!=null&&j.birdeyeid?"birdeye":null}),Xo=A(()=>{var p,m;const o=new b(i.value),s=new b(C.value=="Aptos"?(p=h==null?void 0:h.value)==null?void 0:p.fee:(m=$e==null?void 0:$e.value)==null?void 0:m.fee),a=o.mul(s).toString();return Number(a)<1/Math.pow(10,n.value.decimals)?`<${new b(1).div(new b(Math.pow(10,n.value.decimals))).toString()}`:qe(a,n.value.decimals)}),{setIsShowSuccess:Zo,setIsShowRejected:vo,setIsShowWaiting:Be,setTransactionDesc:Vo,setTransactionTxid:co}=q,_o=async()=>{var s,a,p,m,S,y,O,v,I,L;_.value=!1,R.value=!0,clearInterval(Ue),window.clearInterval(Ue),co(""),Vo(Y("tips.swapping",{from:`${H(i.value)} ${(s=n.value)==null?void 0:s.symbol}`,to:`${H(u.value)} ${(a=t.value)==null?void 0:a.symbol}`})),Be(!0);let o;C.value=="Aptos"&&(o=n.value.address===h.value.token_a.address&&t.value.address===h.value.token_b.address?0:1);try{let j;if(C.value=="Aptos")j=await F.value.getSwapTransactionPayload({pool:h.value,a2b:o==0,byAmountIn:f.value,amount:f.value?i.value:u.value,slippage:Number(x.value)/100});else{const Z=f.value,pe=Number(x.value)/100;j=await((p=W==null?void 0:W.value)==null?void 0:p.getRouterSwapPayload(M.value,Z,pe,n,t))}console.log("0221####swap###swapPayload###",j);let P;if(C.value==="Aptos")P=await X.value.currentWallet.signAndSubmitTransaction(j);else{const Z=await F.value.signAndExecuteTransactionBlock(X.value.currentWallet,j,{action:"AggregatorSwap"});if(Z==="errorIsReturned"){R.value=!1,Be(!1);return}console.log("0221###sui swap res###",Z),P=F.value.handleTx(Z),console.log("0221###swap###sui##tx###",P)}if(P&&P.hash){co(P.hash),Be(!1),Zo(!0);const Z={title:Y("tips.swap"),desc:Y("tips.swapSuccessText",{from:`${H(i.value)} ${(m=n.value)==null?void 0:m.symbol}`,to:`${H(u.value)} ${(S=t.value)==null?void 0:S.symbol}`}),hash:P.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:n.value.address==we[C.value].currentChainTokenAddress||t.value.address==we[C.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(y=n.value)==null?void 0:y.address}`,numa:`- ${i.value}`,logoa:l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].logoURI,tokenb:`${(O=t.value)==null?void 0:O.address}`,numb:`+ ${u.value}`,logob:l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].logoURI},text:`Pay ${i.value} ${(v=n.value)==null?void 0:v.symbol} to receive ${u.value} ${(I=t.value)==null?void 0:I.symbol}`,excecuteTime:(L=P==null?void 0:P.res)==null?void 0:L.excecuteTime};C.value!=="Aptos"&&(Z.res=P.res),F.value.showTransitionPending(Z);const pe=await F.value.watchTransaction(Z);console.log("0221###swap###transitionStatus####",pe),pe&&setTimeout(()=>{C.value=="Aptos"&&oe.updateCurrentPools(h.value.poolAddress,C.value),F.value.getAccount(X.value.address)},1e3)}else Be(!1),vo(!0);i.value="",u.value="",R.value=!1}catch(j){i.value="",u.value="",console.log("Swap Error###",j),R.value=!1,Be(!1),vo(!0)}},xo=o=>{var s;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((s=l.value.tokensObj[o==null?void 0:o.address])==null?void 0:s.logo_url)||(q.theme==="default"?Ee("/image/coins/unknown.png"):Ee("/image/coins/sui-unknown.png"))},mo=d([]);V(()=>[n.value,t.value,l.value.poolConfigList],([o,s,a])=>{if(a&&a.length>0&&o&&s){const p=[];a.forEach(m=>{var S,y,O,v;(m.coinA.address.toUpperCase()===((S=o.address)==null?void 0:S.toUpperCase())&&m.coinB.address.toUpperCase()===((y=s.address)==null?void 0:y.toUpperCase())||m.coinB.address.toUpperCase()===((O=o.address)==null?void 0:O.toUpperCase())&&m.coinA.address.toUpperCase()===((v=s.address)==null?void 0:v.toUpperCase()))&&(m!=null&&m.is_pause||p.push(m.address))}),mo.value=p}},{immediate:!0});const Ze=o=>{console.log("🚀 ~ getTokenSource ~ token:",o);const s=q.importTokenListObj;console.log("🚀🚀🚀 ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(s!=null&&s.hasOwnProperty(o==null?void 0:o.address))),o!=null&&o.isSelfBuilt&&!(s!=null&&s.hasOwnProperty(o==null?void 0:o.address))?Ve.value=!0:(ve.value==="fromCoin"?(t.value&&o.address.toLowerCase()===(t==null?void 0:t.value.address.toLowerCase())&&(t.value=null),n.value=o,i.value=i.value>0?Ce(i.value,o==null?void 0:o.decimals):""):(n.value&&o.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null),t.value=o,u.value=u.value>0?Ce(u.value,o==null?void 0:o.decimals):""),fo())},Ve=d(!1),fo=()=>{Qe.value={},Ke.value={},Ve.value=!1},ea=A(()=>q.isShowRouterModal),ke=d([]),po=d(""),oa=d(!1),go=Wa();A(()=>go);const Re=d(!1),M=d({}),aa=d(""),na=d(),te=d(!1),Ye=d(0),_e=async o=>{var s,a;if(console.log("🚀🚀🚀 ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),te.value=!0,N.value=!1,n.value&&t.value&&(Number(i.value)>0&&f.value||Number(u.value)>0&&!f.value)){console.log("🚀🚀🚀 ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!i.value&&u.value||i.value&&!u.value)&&(R.value=!0),ce.value="",me.value="",ue.value=!0,Re.value=!1;let p;h.value&&(p=n.value.address===h.value.coinA.address&&t.value.address===h.value.coinB.address?0:1);try{let m;if(f.value){const I=new b(i.value).mul(Math.pow(10,n.value.decimals)).toString();m=new Je(I)}else{const I=new b(u.value).mul(Math.pow(10,t.value.decimals)).toString();m=new Je(I)}const S=Number(x.value)/100,y=h.value?{poolAddresses:mo.value,coinTypeA:h.value.coin_a_address,coinTypeB:h.value.coin_b_address,decimalsA:h.value.coinA.decimals,decimalsB:h.value.coinB.decimals,a2b:p==0,byAmountIn:f.value,amount:m.toString()}:"";console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ fromCoin:",n),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ toCoin:",t),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ coinAmount:",m),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",f.value);const O=Ye.value+1;Ye.value=O;const v=await((s=W==null?void 0:W.value)==null?void 0:s.getFindRouter(n,t,m.toString(),f.value,S,h.value?y:"",O));if(console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter:",v),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter JSON:",JSON.stringify(v,null,2)),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ suiAmountId.value:",Ye.value),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter.id:",v==null?void 0:v.id),Ye.value!==(v==null?void 0:v.id)){ue.value=!1,te.value=!1,R.value=!1,M.value={},ke.value=[],f.value?u.value="":i.value="";return}if(v!=null&&v.insufficientLiquidity){N.value=!0,ue.value=!1,te.value=!1,R.value=!1,M.value={},ke.value=[],f.value?u.value="":i.value="";return}if(!v||!(v!=null&&v.routes)||((a=v==null?void 0:v.routes)==null?void 0:a.length)==0){R.value=!1,Re.value=!0,ue.value=!1,te.value=!1,M.value={},ke.value=[],i.value?u.value="":i.value="";return}if(v.fromCoinAddress!==n.value.address||v.toCoinAddress!==t.value.address){console.log("🚀🚀🚀 ~ file: swap.vue:1861 ~ getSuiAmount ~",v.fromCoinAddress!==n.value.address||v.toCoinAddress!==t.value.address),M.value={},ke.value=[];return}v?(M.value=v,ke.value=v.routes,N.value=!1,f.value?i.value&&(u.value=new b(v.amountOut).div(new b(Math.pow(10,t.value.decimals))).toString()):u.value&&(i.value=new b(v.amountIn).div(new b(Math.pow(10,n.value.decimals))).toString()),console.log(u.value,"###toCoinAmount.value"),ce.value=H(Ce(new b(i.value).div(new b(u.value).toString()),n.value.decimals)),me.value=H(Ce(new b(u.value).div(i.value).toString(),t.value.decimals)),R.value=!1,Re.value=!1,ue.value=!1):(R.value=!1,Re.value=!0,ue.value=!1)}catch(m){console.log("pre swap error2",m),R.value=!1,ue.value=!1,te.value=!1}}else f.value?u.value="":i.value="",R.value=!1,ue.value=!1;te.value=!1,console.log("🚀🚀🚀 ~ file: swap.vue:1926 ~ getSuiAmount ~ isRoutrProgress.value:",te.value)},ye=d(!1),wo=async o=>{var s;try{let a;if(f.value){const S=new b(i.value).mul(Math.pow(10,n.value.decimals)).toString();a=new Je(S)}else{const S=new b(u.value).mul(Math.pow(10,t.value.decimals)).toString();a=new Je(S)}const p=Number(x.value)/100,m=await((s=W==null?void 0:W.value)==null?void 0:s.getFindRouter(n,t,a.toString(),f.value,p,""));if(m){M.value=m,ke.value=m.routes,N.value=!1,po.value=m.amountIn,ce.value=H(Ce(new b(i.value).div(new b(u.value).toString()),n.value.decimals)),me.value=H(Ce(new b(u.value).div(i.value).toString(),t.value.decimals));const S=new b(m.amountOut).div(new b(Math.pow(10,t.value.decimals))).toString(),y=new b(m.amountIn).div(new b(Math.pow(10,n.value.decimals))).toString();f.value?u.value!==S&&(ye.value=!0,u.value=S):i.value!==y&&(ye.value=!0,i.value=y)}}catch(a){console.log("pre swap error3",a)}},ta=async o=>{if(n.value&&t.value&&(i.value||u.value)){const s=n.value.address===h.value.coinA.address&&t.value.address===h.value.coinB.address?0:1;try{let a=await F.value.preSwap({pool:h.value,a2b:s==0,byAmountIn:f.value,amount:f.value?i.value:u.value});N.value=a==null?void 0:a.isExceed,lo.value=a==null?void 0:a.estimatedFeeAmount,f.value?(me.value=(Number(a.estimatedAmountOut)/a.estimatedAmountIn).toString(),ce.value=(a.estimatedAmountIn/Number(a.estimatedAmountOut)).toString()):(me.value=(Number(a.estimatedAmountOut)/Number(a.estimatedAmountIn)).toString(),ce.value=(Number(a.estimatedAmountIn)/Number(a.estimatedAmountOut)).toString()),f.value?u.value!==a.estimatedAmountOut&&(ye.value=!0,u.value=a.estimatedAmountOut):i.value!==a.estimatedAmountIn&&(ye.value=!0,i.value=a.estimatedAmountIn),De.value=C.value=="Aptos"?await He(h.value):await He($e.value||h.value),R.value=!1,w.value=!1}catch(a){console.log("pre swap error4",a),R.value=!1,w.value=!1}}else R.value=!1,w.value=!1};let Ue=d(null);V(()=>_.value,o=>{o?Ue.value=setInterval(()=>{C.value=="Aptos"?ta(f.value):wo(f.value)},3e3):(clearInterval(Ue.value),window.clearInterval(Ue.value))},{immediate:!0});const Ie=async o=>{C.value=="Aptos"?Eo(o):_e()};V(()=>Xe.value,o=>{(Number(i.value)>0||Number(u.value)>0)&&Ie(f.value?i.value:u.value)},{immediate:!0});const sa=A(()=>go),Co=A(()=>sa.value.isInitRouter);V(()=>Co.value,o=>{o||(g.value=0,Ie(f.value?i.value:u.value))},{immediate:!0});function ze(o,s=500){let a=null;return function(...p){clearTimeout(a),a=setTimeout(()=>{o.call(this,...p)},s)}}V(()=>[n.value,t.value],([o,s])=>{if(console.log("🚀🚀🚀 ~ file: swap.vue:2181 ~ setup ~ fromCoin && toCoin:",o&&s),o&&s&&(g.value=0,ze(Ie(f.value?i.value:u.value))),o||s){console.log("🚀🚀🚀 ~ file: swap.vue:1965 ~ setup ~ fromCoin:",o);const a=`/swap?from=${o==null?void 0:o.address}&to=${s==null?void 0:s.address}`;e.push(a)}},{immediate:!0,deep:!0});const la=ze(ho);function ho(){const o=n.value;n.value=t.value,t.value=o,ae.value=!0,fe.value=="open"?f.value=!0:f.value=!f.value,f.value?(i.value=u.value,u.value=""):(u.value=i.value,i.value=""),setTimeout(()=>{ae.value=!1},300)}const ia=()=>{ye.value=!1},ua=()=>{_.value=!1,ye.value=!1},ra=[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}],da=d("Swap"),bo=d(!1),xe=A(()=>{var o,s,a,p,m,S,y,O,v,I,L,j,P,Z;try{if((o=n==null?void 0:n.value)!=null&&o.address&&((s=t==null?void 0:t.value)!=null&&s.address)&&(M!=null&&M.value)&&!je(M==null?void 0:M.value)){const pe=Fe((a=M==null?void 0:M.value)==null?void 0:a.amountIn).div(Math.pow(10,(p=n.value)==null?void 0:p.decimals)),ba=Fe((m=M==null?void 0:M.value)==null?void 0:m.amountOut).div(Math.pow(10,(S=t.value)==null?void 0:S.decimals)),ge=Fe(ba).div(pe);console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",ge==null?void 0:ge.toString());const se=(v=(y=l==null?void 0:l.value)==null?void 0:y.RATES)==null?void 0:v[(O=n==null?void 0:n.value)==null?void 0:O.address];console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",se);const le=(j=(I=l==null?void 0:l.value)==null?void 0:I.RATES)==null?void 0:j[(L=t==null?void 0:t.value)==null?void 0:L.address];if(console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",le),!(se!=null&&se.price)||!(le!=null&&le.price)||Fe(se==null?void 0:se.price).lte(0)||Fe(le==null?void 0:le.price).lte(0))throw Error("rate invalid");const Ne=Fe(se==null?void 0:se.price).div(le==null?void 0:le.price);if(console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",Ne==null?void 0:Ne.toString()),ge.gt(Ne)){const G=ge.minus(Ne).div(ge).mul(100);return console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ result1:",G==null?void 0:G.toString()),Oo((P=G==null?void 0:G.negated())==null?void 0:P.toString(),2)}else{const G=ge.minus(Ne).div(ge).mul(100);return console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ result2:",G==null?void 0:G.toString()),Oo((Z=G==null?void 0:G.abs())==null?void 0:Z.toString(),2)}}return}catch(pe){return console.log("🚀🚀🚀 ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",pe),"Incalculable"}}),va=A(()=>(C==null?void 0:C.value)==="Aptos"?De.value:xe==null?void 0:xe.value),fe=d(localStorage.getItem("plusChecked1"))||d("close"),ca=A(()=>q.liquiditySourceList),ma=o=>{console.log("🚀 ~ modalConfirm ~ result121:",o),o&&o.length>0?o.every(a=>a.name=="Cetus"?!0:a.status==="close")?fe.value="close":(fe.value="open",u.value=""):fe.value="close",bo.value=!1},fa=A(()=>q.includeRoutes),So=o=>{fe.value=fe.value=="open"?"close":"open",localStorage.setItem("plusChecked1",fe.value);const s=fa.value,a=ca.value;a.forEach(p=>{o?p.status="open":p.name!=="Cetus"?p.status="close":p.status="open"}),console.log("🚀 ~ //clickCheckedresult ~ arr:",a,s),q.setAggregatorSetting(a,s)},Ao=()=>{const o=window.innerWidth,s=window.innerHeight,a=document.getElementById("plusModeSwitch"),p=a==null?void 0:a.getBoundingClientRect(),m=p==null?void 0:p.left,S=p==null?void 0:p.top;console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ x:",m),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ y:",S),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportWidth:",o),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportHeight:",s);const y=2,O=Le.shapeFromText({text:"🟢",scalar:y}),v=Le.shapeFromText({text:"🔵",scalar:y}),I=Le.shapeFromText({text:"💚",scalar:y}),L=Le.shapeFromText({text:"💙",scalar:y});Le({particleCount:40,spread:60,shapes:[O,v,I,L],scalar:y,origin:{x:m/o,y:S*1.2/s}})},pa=o=>{console.log("🚀🚀🚀 ~ file: swap.vue:2264 ~ handleSwitchPlusMode ~ value:",o),i.value="",u.value="",o&&Ao(),So(o),setTimeout(()=>{_e()},500)},ko=d(!1),ga=o=>{ko.value=o},yo=d(!1),wa=o=>{console.log("🚀 ~ file: swap-sui.vue:2341 ~ onInputToCoinLoading ~ status:",o),yo.value=o},Ca=d(!0),ha=d(!1);return{isAddCardTopPadding:Ca,isAddCardBottomPadding:ha,modalConfirm:ma,clickChecked:So,currentTradeTab:da,plusChecked:fe,closeSwapConfirmModal:ua,updateAccept:ia,clickExchange:ho,debounceClickExchange:la,closeTokenWarning:fo,isShowTokenWarning:Ve,getTokenSource:Ze,hasPool:ro,getPoolInfoSuccess:ao,formCoinId:Jo,toCoinId:Go,formCoinMarket:Ko,toCoinMarket:Qo,fromCoinUrl:Yo,toCoinUrl:zo,t:Y,indicator:c,wallet:X,currentLpInfo:Wo,fixD:Ha,decimalFormat:Ya,impact:De,oneFromAmount:ce,oneToAmount:me,importIcon:Ee,clickRefresh:We,refresh:z,change:ae,isShowAddress:J,isShowSwapSetting:ie,fromCoin:n,toCoin:t,slippage:x,openCoinSelect:Uo,onCoinSelect:Lo,existingCoins:ne,lastSelectCoin:Se,currentCoinKey:ve,showCoinSelect:Oe,fromCoinAmount:i,toCoinAmount:u,fixedFromCoin:f,swapBtnText:Bo,toSwap:_o,loading:Ae,swaping:R,autoRefreshTime:B,countdown:g,marketTimer:D,rateChange:Q,isSwapConfirmMpdal:_,fromCoinBlance:io,toCoinBlance:Do,poolInfo:h,chainName:C,swapRouterLoading:ue,formatFee:Xo,calculating:w,currentRate:to,currentRateReverse:so,getCoinIcon:xo,toAddLiquidiPoolInfo:$e,decimalUi:Ce,warningToCoin:Qe,warningFromCoin:Ke,isShowRouterModal:ea,toSwapLoading:oa,insufficientLiquidity:N,routerPool:ke,routerTotalAmounts:po,store:q,suiPreSwapdata:M,suiSwapFee:na,suiSwapFeeUi:aa,addCommom:H,debounce:Io,notFoundRouter:Re,getSuiAmountAccept:wo,isShowAccept:ye,getSuiAmount:_e,tradeTabList:ra,isInitSwapRouter:Co,isShowAggregatorModal:bo,priceImpact:va,triggerConfettiAnimation:Ao,handleSwitchPlusMode:pa,assetLoading:ko,onInputLoading:ga,onInputToCoinLoading:wa,assetToCoinLoading:yo}}});const oo=e=>(Mo("data-v-1cb9fabc"),e=e(),Po(),e),Xn={class:"swap-container"},Zn={class:"sui-title"},Vn={class:"right title-right"},_n={key:0,class:he("icon-bg plus-switch")},xn=oo(()=>r("p",null,[r("span",null,"Plus Mode")],-1)),et={class:"setting-right"},ot={class:"swap-card"},at=Ea('<div class="exchange-new" data-v-1cb9fabc><svg class="icon icon-down" aria-hidden="true" data-v-1cb9fabc><use xlink:href="#icon-icon_swap1" data-v-1cb9fabc></use></svg><svg class="icon icon-swap" aria-hidden="true" data-v-1cb9fabc><use xlink:href="#icon-tx_swap1" data-v-1cb9fabc></use></svg></div>',1),nt=[at],tt={class:"btn-info"},st={key:0,class:"icon","aria-hidden":"true"},lt=oo(()=>r("use",{"xlink:href":"#icon-icon-swap"},null,-1)),it=[lt],ut={key:2,class:"token-info-container"},rt={class:"token-info-title"},dt=oo(()=>r("span",{class:"coingecko"},"Price Reference",-1));function vt(e,c,Y,k,q,oe){var B;const l=de("UnderlineTab"),ae=qa,z=La,J=de("IconTooltip"),ie=de("IconSlippage"),Q=Sa,_=de("TokenInputBlock"),ve=No,ne=ka,Se=Ia,Oe=Ta,f=Oa,Ae=ya,R=$a,w=de("RouterModal"),i=de("SuiSwapConfirm"),u=de("AggregatorSettingModal");return T(),U("div",Xn,[r("div",Zn,[K(l,{"tab-list":e.tradeTabList,"current-tab":"swap",onClickTab:c[0]||(c[0]=g=>e.$router.push(g.link))},null,8,["tab-list"]),r("div",Vn,[K(z,{"overlay-class-name":"ant-tooltip-text-color"},{title:Te(()=>[re(" The Plus Mode will aggregate external liquidity sources ")]),default:Te(()=>[e.chainName=="Sui"?(T(),U("div",_n,[xn,K(ae,{id:"plusModeSwitch",class:"liquidity-switch",checked:e.plusChecked=="open",onClick:c[1]||(c[1]=g=>{e.handleSwitchPlusMode(g)})},null,8,["checked"])])):E("",!0)]),_:1}),r("div",et,[e.chainName=="Sui"?(T(),U("div",{key:0,class:"aggregator-setting",onClick:c[2]||(c[2]=g=>e.isShowAggregatorModal=!0)},[K(J,{type:"setting","xlink-href":"#icon-icon_set","have-bg":!0})])):E("",!0),K(ie),r("div",{class:he(e.chainName=="Sui"?"icon-bg":"")},[K(Q,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])],2)])])]),r("div",ot,[r("div",{class:he(["card-container",[e.plusChecked=="open"?"toInputBlockDisabled input-block-add-top":"",e.isAddCardTopPadding?"input-block-add-top":"",e.isAddCardBottomPadding&&e.plusChecked!=="open"?"input-block-add-bottom":""]])},[K(_,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":c[3]||(c[3]=g=>e.fromCoinAmount=g),"input-value":e.fromCoinAmount,"token-info":e.fromCoin||null,"title-text":"You pay","input-loading":!e.fixedFromCoin&&e.fromCoin&&(e.swapRouterLoading||e.assetToCoinLoading),onOnInput:c[4]||(c[4]=g=>{e.fromCoinAmount=g}),onOnFocus:c[5]||(c[5]=()=>{e.fixedFromCoin=!0,e.isAddCardTopPadding=!0,e.isAddCardBottomPadding=!1}),onOnSelect:c[6]||(c[6]=g=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","token-info","input-loading"]),K(_,{modelValue:e.toCoinAmount,"onUpdate:modelValue":c[7]||(c[7]=g=>e.toCoinAmount=g),"title-text":"You receive","input-value":e.toCoinAmount,"token-info":e.toCoin||null,"input-disabled":e.plusChecked=="open","have-max":!1,"have-half":!1,"input-loading":e.fixedFromCoin&&e.toCoin&&(e.swapRouterLoading||e.assetLoading),onOnInput:c[8]||(c[8]=g=>{e.toCoinAmount=g}),onOnFocus:c[9]||(c[9]=()=>{e.fixedFromCoin=!1,e.isAddCardTopPadding=!1,e.isAddCardBottomPadding=!0}),onOnSelect:c[10]||(c[10]=g=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","token-info","input-disabled","input-loading"]),r("div",{class:"new-sui-exchange",onClick:c[11]||(c[11]=(...g)=>e.debounceClickExchange&&e.debounceClickExchange(...g))},nt)],2)]),r("div",tt,[K(ve,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((B=e.poolInfo)==null?void 0:B.is_pause)||e.swapRouterLoading:!1,class:"big-btn swap-btn",loading:e.swaping,onClick:c[12]||(c[12]=g=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Te(()=>[e.wallet.connected?(T(),U("svg",st,it)):E("",!0),r("span",null,$(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),e.chainName=="Sui"&&!e.notFoundRouter&&e.fromCoin&&e.toCoin&&!e.insufficientLiquidity?(T(),ee(ne,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"form-coin-market":e.formCoinMarket,"to-coin-market":e.toCoinMarket,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.priceImpact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","form-coin-market","to-coin-market","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):E("",!0)]),K(Se),e.showCoinSelect?(T(),ee(Oe,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:c[13]||(c[13]=g=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):E("",!0),e.isShowSwapSetting?(T(),ee(f,{key:1,onOnClose:c[14]||(c[14]=g=>e.isShowSwapSetting=!1)})):E("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(T(),U("div",ut,[r("div",rt,[dt,K(J,{type:"priceReference","xlink-href":"#icon-icon_tips"})]),e.fromCoin&&e.formCoinMarket?(T(),ee(Ae,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):E("",!0),e.toCoin&&e.toCoinMarket?(T(),ee(Ae,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):E("",!0)])):E("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(T(),ee(R,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):E("",!0),e.isShowRouterModal?(T(),ee(w,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:c[15]||(c[15]=g=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):E("",!0),e.isSwapConfirmMpdal?(T(),ee(i,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.priceImpact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):E("",!0),e.isShowAggregatorModal?(T(),ee(u,{key:6,onClose:c[16]||(c[16]=g=>e.isShowAggregatorModal=!1),onModalConfirm:c[17]||(c[17]=g=>{e.modalConfirm(g)})})):E("",!0)])}const Qt=Ro(Qn,[["render",vt],["__scopeId","data-v-1cb9fabc"]]);export{Qt as default};
