const M=Math.PI,v=2*M,p=1e-6,A=v-p;function y(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function C(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return y;const e=10**t;return function(i){this._+=i[0];for(let h=1,o=i.length;h<o;++h)this._+=Math.round(arguments[h]*e)/e+i[h]}}class k{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?y:C(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,h){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+h}`}bezierCurveTo(t,e,i,h,o,_){this._append`C${+t},${+e},${+i},${+h},${this._x1=+o},${this._y1=+_}`}arcTo(t,e,i,h,o){if(t=+t,e=+e,i=+i,h=+h,o=+o,o<0)throw new Error(`negative radius: ${o}`);let _=this._x1,u=this._y1,s=i-t,l=h-e,a=_-t,f=u-e,r=a*a+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(r>p)if(!(Math.abs(f*s-l*a)>p)||!o)this._append`L${this._x1=t},${this._y1=e}`;else{let c=i-_,$=h-u,m=s*s+l*l,S=c*c+$*$,x=Math.sqrt(m),E=Math.sqrt(r),T=o*Math.tan((M-Math.acos((m+r-S)/(2*x*E)))/2),g=T/E,b=T/x;Math.abs(g-1)>p&&this._append`L${t+g*a},${e+g*f}`,this._append`A${o},${o},0,0,${+(f*c>a*$)},${this._x1=t+b*s},${this._y1=e+b*l}`}}arc(t,e,i,h,o,_){if(t=+t,e=+e,i=+i,_=!!_,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(h),s=i*Math.sin(h),l=t+u,a=e+s,f=1^_,r=_?h-o:o-h;this._x1===null?this._append`M${l},${a}`:(Math.abs(this._x1-l)>p||Math.abs(this._y1-a)>p)&&this._append`L${l},${a}`,i&&(r<0&&(r=r%v+v),r>A?this._append`A${i},${i},0,1,${f},${t-u},${e-s}A${i},${i},0,1,${f},${this._x1=l},${this._y1=a}`:r>p&&this._append`A${i},${i},0,${+(r>=M)},${f},${this._x1=t+i*Math.cos(o)},${this._y1=e+i*Math.sin(o)}`)}rect(t,e,i,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+h}h${-i}Z`}toString(){return this._}}function d(n){return function(){return n}}function q(n){let t=3;return n.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);t=i}return n},()=>new k(t)}function N(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function L(n){this._context=n}L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:this._context.lineTo(n,t);break}}};function R(n){return new L(n)}function Z(n){return n[0]}function j(n){return n[1]}function z(n,t){var e=d(!0),i=null,h=R,o=null,_=q(u);n=typeof n=="function"?n:n===void 0?Z:d(n),t=typeof t=="function"?t:t===void 0?j:d(t);function u(s){var l,a=(s=N(s)).length,f,r=!1,c;for(i==null&&(o=h(c=_())),l=0;l<=a;++l)!(l<a&&e(f=s[l],l,s))===r&&((r=!r)?o.lineStart():o.lineEnd()),r&&o.point(+n(f,l,s),+t(f,l,s));if(c)return o=null,c+""||null}return u.x=function(s){return arguments.length?(n=typeof s=="function"?s:d(+s),u):n},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:d(+s),u):t},u.defined=function(s){return arguments.length?(e=typeof s=="function"?s:d(!!s),u):e},u.curve=function(s){return arguments.length?(h=s,i!=null&&(o=h(i)),u):h},u.context=function(s){return arguments.length?(s==null?i=o=null:o=h(i=s),u):i},u}function w(){}function P(n){this._context=n}P.prototype={areaStart:w,areaEnd:w,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,t){n=+n,t=+t,this._point?this._context.lineTo(n,t):(this._point=1,this._context.moveTo(n,t))}};function I(n){return new P(n)}export{I as a,z as l};
