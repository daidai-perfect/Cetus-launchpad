import{_ as Ne}from"./pool-position-tab.a979f0e6.js";import{_ as Le}from"./upgrade-select-input.52644265.js";import{a as X,e as Y,o as t,f as i,h as o,F as Q,s as se,c as me,x as A,i as _,a5 as Oe,S as we,p as ae,k as te,m as f,v as r,j as ne,r as C,D as q,u as l,K as ce,M as oe,z as le,l as $e,b as ye,y as Re,q as je,w as V,Z as Te,L as De,t as ie,N as Be,T as Fe,B as Ee}from"./entry.226b565b.js";import"./index.84b89f70.js";import{a as ge,j as fe,u as Ce,b as Ge}from"./pool.d8204619.js";import{u as Me}from"./notifi.a59f3098.js";import{b as I,d as R,s as he,c as ue,j as qe,a as He,i as ze,B as Pe,u as Ve,g as We}from"./index.51f0dc7f.js";import{i as de}from"./import-icon.de3e6c66.js";import{T as Je}from"./total-position.4e659272.js";import{C as Ie}from"./coin-img.69d47dfc.js";import{T as be}from"./token-warning-new.c6b4e3b1.js";/* empty css              */import{D as re}from"./decimal.0bdeb344.js";import{u as Ke}from"./farms.9a147d39.js";import{_ as Se}from"./icon_farms_2x.03f142d5.js";import{_ as Ze}from"./icon_rewards_2x.9bf4c4e5.js";import{_ as Qe}from"./img-no-Positions_2x.70343227.js";import{_ as Xe}from"./img-no-Positions_2x.2a337164.js";import{_ as Ye}from"./img-connect-wallet_2x.72a11b69.js";import{_ as xe}from"./img-connect-wallet_2x.be33559b.js";import"./pool.047dd2f9.js";import"./select-tab.7d603642.js";import"./coin-select.6a94254e.js";/* empty css              */import"./token-warning_2x.7a9876f7.js";import"./useWhale.0233ad92.js";/* empty css              *//* empty css              */import"./icon-selected_3x.09e9a6f0.js";import"./coin-pair-name.7ab2a15a.js";import"./token-warning.3ea7a234.js";import"./no-data.d0218d04.js";import"./token.adbea054.js";const eo=X({props:{loading:{type:Boolean,required:!0},source:{type:String,default:""}},setup(e){return{positionList:[{},{},{}]}}});const oo=e=>(ae("data-v-c9f4d8ad"),e=e(),te(),e),so={class:"new-pool-position-list"},no={class:"position-list"},ao={class:"name-price"},to={class:"symbol-name"},io={class:"avatar-box"},ro={class:"name-box"},lo={class:"price-other-info"},uo={class:"new-my-position-item"},mo={class:"card-content"},co={class:"pos-name"},po={class:"bottom-info"},vo={class:"pos-valid-range"},go={class:"info-block"},fo={class:"info-block"},ho={class:"info-block"},_o=oo(()=>o("div",{class:"info-block"},null,-1));function ko(e,u,b,$,k,w){const n=Oe,d=we;return t(),i("div",so,[o("div",no,[(t(!0),i(Q,null,se(e.positionList,(p,m)=>(t(),i("div",{key:m,class:"item-box"},[o("div",ao,[o("div",to,[o("div",io,[e.loading?(t(),me(n,{key:0,active:"",size:"large",paragraph:!1,class:"upgrade-avatar-skeleton"})):A("",!0),e.loading?(t(),me(n,{key:1,active:"",size:"large",paragraph:!1,class:"upgrade-avatar-skeleton"})):A("",!0)]),o("div",ro,[_(d,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),_(d,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])])]),o("div",lo,[o("span",null,[_(d,{class:"upgrade-long-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])])])]),o("div",uo,[o("div",mo,[o("div",co,[_(d,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",po,[o("div",vo,[_(d,{class:"upgrade-long-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",go,[_(d,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),_(d,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",fo,[_(d,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),_(d,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),o("div",ho,[_(d,{class:"upgrade-text-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"]),_(d,{class:"upgrade-title-skeleton",loading:e.loading,active:"",paragraph:!1},null,8,["loading"])]),_o])])])]))),128))])])}const Ue=Y(eo,[["render",ko],["__scopeId","data-v-c9f4d8ad"]]),Io={class:"pool-symbol-name-block"},bo={class:"coin-info-fee"},wo={class:"coin-logo"},$o={class:"logo-token-warning"},yo={class:"logo-token-warning"},Ro={class:"symbol-label"},Co={class:"pool-name"},Po={class:"pool-fee"},So={class:"name"},Uo=X({__name:"pool-symbol-name-block",props:{poolInfo:{type:Object,default:()=>({})}},setup(e){const u=e,b=f(()=>{var k,w,n,d;return console.log("ðŸš€ ~ tokenA ~ props.poolInfo?.is_forward:props.poolInfoprops.poolInfo",(k=u.poolInfo)==null?void 0:k.is_forward),(w=u.poolInfo)!=null&&w.is_forward?(n=u.poolInfo)==null?void 0:n.token_a:(d=u.poolInfo)==null?void 0:d.token_b}),$=f(()=>{var k,w,n,d;return console.log("ðŸš€ ~ tokenA ~ props.poolInfo?.is_forward:props.poolInfoprops.poolInfo",(k=u.poolInfo)==null?void 0:k.is_forward),(w=u.poolInfo)!=null&&w.is_forward?(d=u.poolInfo)==null?void 0:d.token_b:(n=u.poolInfo)==null?void 0:n.token_a});return console.log(b.value,$.value,u.poolInfo,"props.poolInfoprops.poolInfo"),(k,w)=>{var n,d,p,m,h,D;return t(),i("div",Io,[o("div",bo,[o("div",wo,[o("div",$o,[_(Ie,{url:(n=b.value)==null?void 0:n.logo_url,size:"36px"},null,8,["url"]),_(be,{token:b.value,"style-params":{width:"16px",height:"16px"}},null,8,["token"])]),o("div",yo,[_(Ie,{url:(d=$.value)==null?void 0:d.logo_url,size:"36px"},null,8,["url"]),_(be,{token:$.value,"style-params":{width:"16px",height:"16px"}},null,8,["token"])]),o("div",Ro,[o("div",Co,[o("span",null,r((p=b.value)==null?void 0:p.symbol),1),ne(" Â -Â  "),o("span",null,r((m=$.value)==null?void 0:m.symbol),1),o("div",Po,r(e.poolInfo.fee*100)+"%",1)]),o("div",So,[o("span",null,r((h=b.value)==null?void 0:h.name),1),ne(" Â -Â  "),o("span",null,r((D=$.value)==null?void 0:D.name),1)])])])])])}}});const Ao=Y(Uo,[["__scopeId","data-v-a6a9e521"]]),No=X({props:{poolInfo:{type:Object,default:()=>null}},setup(e){const u=C(),b=C(),$=f(()=>{var m;return(m=e.poolInfo)==null?void 0:m.needReverse}),k=ge(),w=f(()=>k),n=f(()=>w.value.currentExplorer),d=f(()=>w.value.theme),p=C(!0);return q(()=>[e.poolInfo],([m])=>{m&&(u.value=m.token_a,b.value=m.token_b)},{immediate:!0}),{needReverse:$,theme:d,indexStore:k,direct:p,addCommom:I,decimalUi:R,fromCoin:u,toCoin:b,getExplorerUrl:fe,currentExplorer:n}}});const _e=e=>(ae("data-v-324b926c"),e=e(),te(),e),Lo={class:"pos-current-price"},Oo=_e(()=>o("span",{class:"tit"},"Current Price",-1)),jo={key:0},To={class:"text"},Do={key:1},Bo={class:"text"},Fo={class:"coin-rate"},Eo=_e(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Go=_e(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Mo=[Eo,Go];function qo(e,u,b,$,k,w){var n,d,p,m;return t(),i("div",Lo,[Oo,(e.needReverse?!e.direct:e.direct)?(t(),i("div",jo,[ne(r(("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.poolInfo.currentPrice,6)))+" Â  ",1),o("span",To,r((n=e.toCoin)==null?void 0:n.symbol)+" per "+r((d=e.fromCoin)==null?void 0:d.symbol),1)])):(t(),i("div",Do,[ne(r(("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.poolInfo.currentPriceReverse,6)))+" Â  ",1),o("span",Bo,r((p=e.fromCoin)==null?void 0:p.symbol)+" per "+r((m=e.toCoin)==null?void 0:m.symbol),1)])),o("div",Fo,[o("div",{onClick:u[0]||(u[0]=h=>e.direct=!e.direct)},Mo)])])}const Ho=Y(No,[["render",qo],["__scopeId","data-v-324b926c"]]),zo=X({props:{poolInfo:{type:Object,default:()=>({})},usePropsDirect:{type:Boolean,require:!1,default:!1},propDirect:{type:Boolean,require:!1,default:!1}},setup(e,u){const b=C(!0),$=C(e.usePropsDirect),k=C(e.propDirect);q(()=>e.propDirect,p=>{k.value=p},{immediate:!0});const w=C(),n=C();return q(()=>e.poolInfo,p=>{p&&!ue(p)&&(p.maxPrice!=="âˆž"&&(w.value=new re(1).div(new re(p.maxPrice)).toString()),p.minPrice>0&&(n.value=new re(1).div(new re(p.minPrice)).toString()))},{immediate:!0}),{sFixD:he,direct:b,isUsepropsDirect:$,propsDirect:k,clickChange:()=>{b.value=!b.value,$.value&&u.emit("clickChange")},minPriceResever:w,maxPriceResever:n,decimalUi:R,addCommom:I}}});const Ae=e=>(ae("data-v-ddec89b6"),e=e(),te(),e),Vo={class:"new-range"},Wo={key:0},Jo={class:"num"},Ko={class:"num"},Zo={class:"per"},Qo={key:1},Xo={class:"num"},Yo={class:"num"},xo={class:"per"},es=Ae(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),os=Ae(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ss=[es,os];function ns(e,u,b,$,k,w){var n,d,p,m;return t(),i("div",Vo,[(e.isUsepropsDirect?e.propsDirect:e.direct)?(t(),i("p",Wo,[o("span",Jo,r(("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.poolInfo.minPrice,6)))+"Â -",1),o("span",Ko,"Â "+r(("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.poolInfo.maxPrice,6)))+"Â ",1),o("span",Zo,r((n=e.poolInfo.coinB)==null?void 0:n.symbol)+" per "+r((d=e.poolInfo.coinA)==null?void 0:d.symbol),1)])):(t(),i("p",Qo,[o("span",Xo,r(e.poolInfo.maxPrice!=="âˆž"?("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.minPriceResever,6)):"0")+"Â -",1),o("span",Yo,"Â "+r(e.poolInfo.minPrice>0?("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.maxPriceResever,6)):"âˆž")+"Â ",1),o("span",xo,r((p=e.poolInfo.coinA)==null?void 0:p.symbol)+" per "+r((m=e.poolInfo.coinB)==null?void 0:m.symbol),1)])),o("div",{class:"icon-change",onClick:u[0]||(u[0]=ce(()=>e.clickChange(),["stop"]))},ss)])}const as=Y(zo,[["render",ns],["__scopeId","data-v-ddec89b6"]]),ts=X({components:{NewFarmsRange:as},props:{poolInfo:{type:Object,default:()=>({})}},setup(){const e=C(!0);return{sFixD:he,direct:e}}});const is=e=>(ae("data-v-71c64b09"),e=e(),te(),e),rs={class:"pos-valid-range"},ls=["src"],ds={class:"status-text"},us={class:"right"},ms=is(()=>o("div",{class:"title"},"Price Range",-1));function cs(e,u,b,$,k,w){var d,p,m,h;const n=oe("NewFarmsRange");return t(),i("div",rs,[o("div",{class:le(["status-box",((d=e.poolInfo)==null?void 0:d.currentStatus)=="Active"?"active-box":"inactive-box"])},[(p=e.poolInfo)!=null&&p.currentStatus?(t(),i("img",{key:0,src:((m=e.poolInfo)==null?void 0:m.currentStatus)=="Active"?"/sui-image/icon_pos_active@2x.png":"/sui-image/img_inactive@2x.png",alt:""},null,8,ls)):A("",!0),o("span",ds,r((h=e.poolInfo)==null?void 0:h.currentStatus),1)],2),o("div",us,[ms,_(n,{"pool-info":e.poolInfo},null,8,["pool-info"])])])}const ps=Y(ts,[["render",cs],["__scopeId","data-v-71c64b09"]]),vs=X({components:{PosValidRange:ps},props:{pItem:{type:Object,required:!0}},setup(e){const{t:u}=$e(),b=ye(),$=ge(),k=f(()=>$);f(()=>k.value.chainName?Ge(k.value.chainName):{});const w=Ce(),n=f(()=>w),d=()=>{w.setPositionDetailCurrentTab("increase"),k.value.chainName==="Aptos"?b.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):e.pItem.positionSource=="clmm"?b.push(`/new-position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`):b.push(`/new-position-detail?position_nft_id=${e.pItem.id}&positionSource=farming`)},p=f(()=>n.value.allTokenObj&&e.pItem.token_a.address&&n.value.allTokenObj[e.pItem.token_a.address]&&n.value.allTokenObj[e.pItem.token_a.address].logo_url),m=f(()=>n.value.allTokenObj&&e.pItem.token_b.address&&n.value.allTokenObj[e.pItem.token_b.address]&&n.value.allTokenObj[e.pItem.token_b.address].logo_url),h=f(()=>n.value.feeOwedObj[e.pItem.tokenName]&&n.value.feeOwedObj[e.pItem.tokenName].feeOwed),D=f(()=>n.value.feeOwedObj[e.pItem.tokenName]&&n.value.feeOwedObj[e.pItem.tokenName].feesResult),N=f(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarder||0),H=f(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarderView||0),P=f(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),F=f(()=>n.value.rewarderObj[e.pItem.tokenName]&&n.value.rewarderObj[e.pItem.tokenName].farmingRewardList),L=C(0),O=C();q(()=>n.value.RATES,s=>{s&&(O.value=s)},{immediate:!0});const j=s=>{var a;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((a=n.value.tokensObj[s==null?void 0:s.address])==null?void 0:a.logo_url)||(k.value.theme==="default"?de("/image/coins/unknown.png"):de("/image/coins/sui-unknown.png"))},z=f(()=>n.value.tokensObj);Re(()=>{ee(e.pItem.minPrice,e.pItem.maxPrice)});const c=C("--"),ee=(s,a)=>{s!=="0"&&a!=="âˆž"?c.value=he(1/(1-Number((s/a)**.25)),2)+"x":c.value="1x"};C(30);const U=C(null),ve=f(()=>{var s,a,v,g,y,S,T,B,W,J,K,Z;return U.value?U.value.is_display_rewarder?(s=U.value)!=null&&s.aprPercentageTotal?((a=U.value)==null?void 0:a.aprPercentageTotal)>1e4?">10,000":((v=U.value)==null?void 0:v.aprPercentageTotal)<.01&&((g=U.value)==null?void 0:g.aprPercentageTotal)>0?"<0.01":I((y=U.value)==null?void 0:y.aprPercentageTotal,2):(S=U.value)!=null&&S.rewardAprList?"0":"--":(T=U.value)!=null&&T.aprFee?((B=U.value)==null?void 0:B.aprFee)>1e4?">10,000":((W=U.value)==null?void 0:W.aprFee)<.01&&((J=U.value)==null?void 0:J.aprFee)>0?"<0.01":I((K=U.value)==null?void 0:K.aprFee,2):(Z=U.value)!=null&&Z.rewardAprList?"0":"--":"--"}),E=Ke(),G=f(()=>E),M=f(()=>G.value.farmsPoolObj);return{currentExplorer:f(()=>k.value.currentExplorer),getExplorerUrl:fe,aprNum:ve,lever:c,tokensObj:z,showNum:qe,fromCoinUrl:p,toCoinUrl:m,decimalFormat:He,clickDetails:d,t:u,addCommom:I,importIcon:de,router:b,store:k,pendingRewarder:N,pendingFees:h,pendingRewarderArr:P,pendingFeesArr:D,checkNullObj:ue,fixD:ze,decimalUi:R,pendingRewarderView:H,aprAmount:L,getCoinIcon:j,Decimal:re,farmsPoolObj:M,farmingRewardList:F,formatCurrency:Pe}}});const x=e=>(ae("data-v-32d0c2c3"),e=e(),te(),e),gs={class:"card-content"},fs={class:"pos-name"},hs={class:"pos"},_s=x(()=>o("span",null,"Position NFT ",-1)),ks=["href"],Is=x(()=>o("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),bs=[Is],ws={class:"bottom-info"},$s={class:"bottom"},ys={class:"info-block-container"},Rs={class:"leabl"},Cs={class:"text"},Ps={key:0,class:"hover-rewarder"},Ss={class:"rewarder-info"},Us={class:"left-rewarder"},As={alt:""},Ns={class:"right-rewarder"},Ls={class:"amount"},Os={key:0,class:"amount-usd"},js={key:1,class:"amount-usd"},Ts={class:"rewarder-info"},Ds={class:"left-rewarder"},Bs={alt:""},Fs={class:"right-rewarder"},Es={class:"amount"},Gs={key:0,class:"amount-usd"},Ms={key:1,class:"amount-usd"},qs={class:"leabl"},Hs={key:0,class:"text"},zs={key:1,class:"text"},Vs={class:"hover-rewarder"},Ws={class:"left-rewarder"},Js={alt:""},Ks={class:"right-rewarder"},Zs={class:"amount"},Qs={class:"amount-usd"},Xs={key:2,class:"text"},Ys={class:"label-box"},xs={key:0,class:"text"},en={class:"img-text"},on={key:0,class:"leabl"},sn=x(()=>o("img",{class:"img-default",src:Se,alt:""},null,-1)),nn=[sn],an={key:1,class:"leabl"},tn=x(()=>o("img",{class:"img-default",src:Ze,alt:""},null,-1)),rn=[tn],ln={class:"hover-rewarder"},dn=x(()=>o("div",{class:"title"},"Mining Rewards",-1)),un={class:"left-rewarder"},mn={alt:""},cn={class:"right-rewarder"},pn={class:"amount"},vn={class:"amount-usd"},gn=x(()=>o("div",{class:"title"},"Farming Rewards",-1)),fn={class:"left-rewarder"},hn={alt:""},_n={class:"right-rewarder"},kn={class:"amount"},In={class:"amount-usd"},bn={key:1,class:"text"},wn=x(()=>o("div",{class:"more-box"},[o("div",{class:"more"},[o("svg",{class:"arrow-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_arrow"})])])],-1));function $n(e,u,b,$,k,w){var h,D,N,H,P,F,L,O,j,z;const n=oe("PosValidRange"),d=De,p=we,m=je("image");return t(),i("div",{class:"new-my-position-item",onClick:u[2]||(u[2]=(...c)=>e.clickDetails&&e.clickDetails(...c))},[o("div",gs,[o("div",fs,[o("div",hs,r(e.pItem.tokenName.split("|")[1]),1),_s,(h=e.pItem)!=null&&h.nftHash?(t(),i("a",{key:0,target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:l(fe))(e.currentExplorer,"nftAddress",e.pItem.nftHash)}," Â "+r((N=(D=e.pItem)==null?void 0:D.nftHash)==null?void 0:N.substr(0,4))+" ... "+r((L=(H=e.pItem)==null?void 0:H.nftHash)==null?void 0:L.substr(((F=(P=e.pItem)==null?void 0:P.nftHash)==null?void 0:F.length)-4,4))+"Â  ",9,ks)):A("",!0),(O=e.pItem)!=null&&O.nftHash?(t(),i("svg",{key:1,class:"icon","aria-hidden":"true",onClick:u[0]||(u[0]=ce(c=>e.store.copy(e.pItem.nftHash),["stop"]))},bs)):A("",!0)]),o("div",ws,[o("div",$s,[o("div",ys,[o("div",{class:"info-block",onClick:u[1]||(u[1]=ce(()=>{},["stop"]))},[_(n,{"pool-info":{...e.pItem,minPrice:e.pItem.needReverse?e.pItem.maxPrice==="âˆž"?"0":("decimalUi"in e?e.decimalUi:l(R))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6):("decimalUi"in e?e.decimalUi:l(R))(e.pItem.minPrice,6),maxPrice:(e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="âˆž")?"âˆž":e.pItem.needReverse?("decimalUi"in e?e.decimalUi:l(R))(1/e.pItem.minPrice,6):("decimalUi"in e?e.decimalUi:l(R))(e.pItem.maxPrice,6)}},null,8,["pool-info"])]),o("div",{class:le(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[o("div",Rs,r(e.$t("common.liquidity")),1),o("div",Cs,[_(d,{"overlay-class-name":"position-tooltip"},{title:V(()=>[e.pItem.amountUSD>0?(t(),i("div",Ps,[o("div",Ss,[o("div",Us,[ie(o("img",As,null,512),[[m,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),o("span",null,r(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),o("div",Ns,[o("div",Ls,r(e.pItem.needReverse?("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),i("div",js,r(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:l(I))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),i("div",Os,r(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:l(I))(e.pItem.tokenARates,2):"<$0.01"),1))])]),o("div",Ts,[o("div",Ds,[ie(o("img",Bs,null,512),[[m,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),o("span",null,r(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),o("div",Fs,[o("div",Es,r(e.pItem.needReverse?("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),i("div",Ms,r(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),i("div",Gs,r(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):A("",!0)]),default:V(()=>[o("span",null," $"+r(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:l(I))(e.pItem.amountUSD,2)),1)]),_:1})])],2),o("div",{class:le(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[o("div",qs,r(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(t(),i("div",Hs,"$ --")):isNaN(e.pendingFees)?(t(),i("div",Xs,[_(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),i("div",zs,[_(d,{"overlay-class-name":"position-tooltip"},{title:V(()=>[o("div",Vs,[(t(!0),i(Q,null,se(e.pendingFeesArr,c=>(t(),i("div",{key:c,class:"rewarder-info"},[o("div",Ws,[ie(o("img",Js,null,512),[[m,e.getCoinIcon(c)]]),o("span",null,r(c.symbol),1)]),o("div",Ks,[o("div",Zs,r(Number(c.amount)==0?0:("formatCurrency"in e?e.formatCurrency:l(Pe))(c.amount,c.decimals,!0,!1,!1)),1),o("div",Qs,r(Number(c.amountUSD)==0?"$0":Number(c.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:l(I))(c.amountUSD,2):"<$0.01"),1)])]))),128))])]),default:V(()=>[o("span",null,r(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:l(I))(e.pendingFees,2)),1)]),_:1})]))],2),e.pItem.is_display_rewarder&&((j=e.pItem)!=null&&j.rewarder_infos)&&!("checkNullObj"in e?e.checkNullObj:l(ue))((z=e.pItem)==null?void 0:z.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0||e.pItem.rewards&&e.pItem.rewards.length>0?(t(),i("div",{key:0,class:le(["info-block cursor-block",[e.pendingRewarder==0&&e.pItem.rewards&&e.pItem.rewards.length==0?"block-none ":"",Number(e.pendingRewarder)==0?" block-none-reward":""].join(",")])},[o("div",Ys,[o("span",null,r(e.$t("newAdd.pendingRewards")),1)]),e.pendingRewarder||e.pendingRewarder==0||e.pItem.farmingRewardTotalUsd?(t(),i("div",xs,[_(d,{"overlay-class-name":"position-tooltip"},Te({default:V(()=>{var c,ee;return[o("div",en,[e.pItem.rewards&&e.pItem.rewards.length>0?(t(),i("div",on,nn)):A("",!0),e.pItem.is_display_rewarder&&((c=e.pItem)!=null&&c.rewarder_infos)&&!("checkNullObj"in e?e.checkNullObj:l(ue))((ee=e.pItem)==null?void 0:ee.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),i("div",an,rn)):A("",!0),o("span",null,r(e.pendingRewarder+e.pItem.farmingRewardTotalUsd>0&&e.pendingRewarder+e.pItem.farmingRewardTotalUsd>.01?`$${("addCommom"in e?e.addCommom:l(I))(e.pendingRewarder+e.pItem.farmingRewardTotalUsd,2)}`:e.pendingRewarder+e.pItem.farmingRewardTotalUsd>0&&e.pendingRewarder+e.pItem.farmingRewardTotalUsd<=.01?"<$0.01":"$0"),1)])]}),_:2},[e.pendingRewarder>0?{name:"title",fn:V(()=>[o("div",ln,[dn,(t(!0),i(Q,null,se(e.pendingRewarderArr,c=>(t(),i("div",{key:c,class:"rewarder-info"},[o("div",un,[ie(o("img",mn,null,512),[[m,e.getCoinIcon(c)]]),o("span",null,r(c.symbol),1)]),o("div",cn,[o("div",pn,r(("addCommom"in e?e.addCommom:l(I))(("decimalUi"in e?e.decimalUi:l(R))(c.amount,c.decimals))),1),o("div",vn,r(Number(c.amountUSD)==0?"$0":Number(c.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:l(I))(c.amountUSD,2):"<$0.01"),1)])]))),128)),e.pItem.rewards&&e.pItem.rewards.length>0?(t(),i(Q,{key:0},[gn,(t(!0),i(Q,null,se(e.pItem.rewards,c=>(t(),i("div",{key:c,class:"rewarder-info"},[o("div",fn,[ie(o("img",hn,null,512),[[m,e.getCoinIcon(c)]]),o("span",null,r(c.symbol),1)]),o("div",_n,[o("div",kn,r(("decimalUi"in e?e.decimalUi:l(R))(c.amount,c.decimals)),1),o("div",In,r(Number(c.rewarderAmountUsd)==0?"$0":Number(c.rewarderAmountUsd)>.01?"$"+("addCommom"in e?e.addCommom:l(I))(c.rewarderAmountUsd,2):"<$0.01"),1)])]))),128))],64)):A("",!0)])]),key:"0"}:void 0]),1024)])):(t(),i("div",bn,[_(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})]))],2)):A("",!0)])])])]),wn])}const yn=Y(vs,[["render",$n],["__scopeId","data-v-32d0c2c3"]]),Rn=X({components:{TotalPosition:Je,PoolSymbolNameBlock:Ao,PositionLoading:Ue,NewMyPositionItem:yn,PosCurrentPrice:Ho},setup(){const e=C(!1),{t:u}=$e(),b=C(["position"]),$=ye(),k=C(""),w=ge(),n=f(()=>w),d=f(()=>n.value.chainName?We[n.value.chainName]:{});let p=C([]);const m=Ce(),h=f(()=>m),D=Ve(),N=f(()=>D);C(!0);const H=C("TVL"),P=()=>{e.value=!0,p.value=[],N.value.address&&(m.setPools(z.value.poolConfigList,n.value.chainName),m.getMyPositons(N.value.address,h.value.poolsObj,n.value.chainName)),setTimeout(()=>{e.value=!1},1e3)},F=f(()=>{const s=Array.from(new Set(h.value.poolConfigList.flatMap(a=>!(a!=null&&a.category)||(a==null?void 0:a.category)==""?"All":a==null?void 0:a.category)));return console.log(s,"newArr"),s.length<=1?[]:s});q(()=>n.value.isRefresh,s=>{var a,v,g,y;s&&((y=(g=(v=(a=$==null?void 0:$.currentRoute)==null?void 0:a.value)==null?void 0:v.name)==null?void 0:g.split("-"))==null?void 0:y[1])=="position"&&P()}),Re(()=>{p.value=[],m.setMyPositionsLoading(!0)}),Be(()=>{N.value.connected||(p.value=[])});const L=()=>{e.value=!0;let s=[];h.value.myPositions.forEach(v=>{var W,J,K,Z;let g=v.positionSource=="farming",y,S;const T=v.amountA*((W=h.value.RATES[v.token_a.address])==null?void 0:W.price),B=v.amountB*((J=h.value.RATES[v.token_b.address])==null?void 0:J.price);(K=h.value.RATES[v.token_a.address])!=null&&K.price&&((Z=h.value.RATES[v.token_b.address])!=null&&Z.price)?(y=T+B,S=T+B):(y=" --",S=0),console.log(h.value.currentPoolTab,"##pools.value.currentPoolTab"),s.push({...v,amountUSD:y,amountUSDOrigin:S,tokenARates:T,tokenBRates:B,isStableFarming:g})});const a={};s.forEach(v=>{a[v.address]?a[v.address].positionList.push(v):(a[v.address]={},a[v.address].poolInfo=v,a[v.address].positionList=[v])}),p.value=Object.values(a)||[],console.log(p.value,"list.value========>")};q(()=>[h.value.myPositions,h.value.RATES],([s,a])=>{s&&a&&(console.log("0605==>updateLpList9099999"),L())},{immediate:!0}),q(()=>[N.value.address,h.value.poolConfigList,h.value.poolsObj,n.value.chainName],([s,a,v,g])=>{var y,S,T;s&&a&&a.length>0&&g&&(g!=null&&g.toLowerCase().includes((y=a[0])==null?void 0:y.chain))&&!ue(v)&&(g==="Aptos"?a.length===Object.values(v).length:(T=(S=Object.values(v)[0])==null?void 0:S.chain)!=null&&T.includes("sui"))&&(console.log(v,a,"0605==>getMyPositons9099999"),m.getMyPositons(N.value.address,v,g))},{immediate:!0,deep:!0}),q(()=>N.value.address,s=>{s||m.setMyPositions()},{immediate:!0});const O=Me(),j=f(()=>O),z=f(()=>m),c=async s=>{await O.getSourceGroups();const a=j.value.sourceGroups&&j.value.sourceGroups.length>0&&j.value.sourceGroups[0]&&j.value.sourceGroups[0].sources||[];console.log(a,"####source"),console.log(s,"###myPositions");for(let v=0;v<a.length;v++){const{pool_address:g,position_index:y}=JSON.parse(a[v].blockchainAddress);let S=!1,T;for(let B=0;B<s.length;B++){const{poolAddress:W,index:J,positionSource:K,name:Z}=s[B];g==W&&Number(K=="clmm"?J:Z.split("-")[1])==Number(y)&&(S=!0),T={pool_address:g,position_index:y}}S||await O.subscribePosition(T,"",!1,!1)}},ee=async()=>{await O.getSourceGroups();const s=j.value.sourceGroups&&j.value.sourceGroups.length>0&&j.value.sourceGroups[0]&&j.value.sourceGroups[0].sources||[];for(let a=0;a<s.length;a++){const{pool_address:v,position_index:g}=JSON.parse(s[a].blockchainAddress),{name:y}=s[a],S={pool_address:v,position_index:g};await O.subscribePosition(S,y,!1,!1)}},U=f(()=>z.value.myPositionsLoading);q(()=>z.value.myPositions,(s,a)=>{d.value.hasNotifi&&(s&&s.length>0&&a&&a.length!==s.length?c(s):s&&s.length==0&&!U.value&&ee())},{immediate:!0});const ve=s=>{var a;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((a=h.value.tokensObj[s==null?void 0:s.address])==null?void 0:a.logo_url)||(n.value.theme==="default"?de("/image/coins/unknown.png"):de("/image/coins/sui-unknown.png"))},E=C(null),G=f(()=>E.value&&E.value.firstToken?E.value.firstToken:null),M=f(()=>E.value&&E.value.lastToken?E.value.lastToken:null),ke=f(()=>{let s=[];s=p.value;const a=s.filter((g,y)=>G.value&&M.value?g.poolInfo.coinA.symbol==G.value.symbol&&g.poolInfo.coinB.symbol==M.value.symbol||g.poolInfo.coinA.symbol==M.value.symbol&&g.poolInfo.coinB.symbol==G.value.symbol:G.value?g.poolInfo.coinA.symbol.toLowerCase().includes(G.value.symbol.toLowerCase())||g.poolInfo.coinB.symbol.toLowerCase().includes(G.value.symbol.toLowerCase()):M.value?g.poolInfo.coinA.symbol.toLowerCase().includes(M.value.symbol.toLowerCase())||g.poolInfo.coinB.symbol.toLowerCase().includes(M.value.symbol.toLowerCase()):s);if(!h.value.myPositionsLoading){const g=a.map(y=>y==null?void 0:y.positionList).flat();console.log("ðŸš€ ~ showList ~ arr:",g),w.setPositiomAmount(g.length),m.setPositionShowList(g)}return a.filter((g,y)=>{var S;return((S=g.positionList)==null?void 0:S.length)>0})});return Fe(()=>{w.setPositiomAmount("--"),m.setPositionShowList([])}),{tabArr:F,showList:ke,childTokenSelectRef:E,firstToken:G,lastToken:M,getCoinIcon:ve,selectValue:H,t:u,pools:h,store:n,wallet:N,list:p,clickRefresh:P,refresh:e,current:b,router:$,searchKey:k}}});const pe=e=>(ae("data-v-f6accd4a"),e=e(),te(),e),Cn={class:"new-position-list-container"},Pn={class:"filter-refresh"},Sn={class:"icon-box"},Un=pe(()=>o("use",{"xlink:href":"#icon-icon_refresh"},null,-1)),An=[Un],Nn={class:"position-card-top"},Ln={key:0,class:"upgrade-loading"},On={key:1,class:"position-list"},jn={class:"name-price"},Tn={class:"price-other-info"},Dn=pe(()=>o("img",{class:"img-default",src:Se,alt:""},null,-1)),Bn=pe(()=>o("span",null,"Farm",-1)),Fn=pe(()=>o("svg",{class:"arrow-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_arrow"})],-1)),En=[Dn,Bn,Fn],Gn={key:2,class:"no-data"},Mn={key:0,src:Qe,alt:""},qn={key:1,src:Xe,alt:""},Hn={key:3,class:"no-data"},zn={key:0,src:Ye,alt:""},Vn={key:1,src:xe,alt:""};function Wn(e,u,b,$,k,w){const n=Ne,d=Le,p=oe("TotalPosition"),m=Ue,h=oe("PoolSymbolNameBlock"),D=oe("PosCurrentPrice"),N=Ee,H=oe("NewMyPositionItem");return t(),i("div",Cn,[_(n,{"current-tab":"My Positions"}),o("div",Pn,[_(d,{ref:"childTokenSelectRef"},null,512),o("div",{class:"refresh-icon",onClick:u[0]||(u[0]=(...P)=>e.clickRefresh&&e.clickRefresh(...P))},[o("div",Sn,[(t(),i("svg",{class:le(["icon",{refresh:e.isRefresh}]),"aria-hidden":"true"},An,2))])])]),o("div",Nn,[e.wallet&&e.wallet.address?(t(),me(p,{key:0})):A("",!0)]),e.pools.myPositionsLoading&&e.wallet.connected?(t(),i("div",Ln,[_(m,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):A("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(t(),i("div",On,[(t(!0),i(Q,null,se(e.showList,P=>{var F;return t(),i("div",{key:(F=P.poolInfo)==null?void 0:F.address,class:"item-box"},[o("div",jn,[_(h,{"pool-info":P.poolInfo},null,8,["pool-info"]),o("div",Tn,[_(D,{"pool-info":P.poolInfo},null,8,["pool-info"]),P.poolInfo.isStableFarming?(t(),i("div",{key:0,class:"farming-logo",onClick:u[1]||(u[1]=ce(L=>e.$router.push("/farms"),["stop"]))},En)):A("",!0),_(N,{class:"ghost-btn create",onClick:L=>{var O;return e.$router.push(`/liquidity/deposit?poolAddress=${(O=P.poolInfo)==null?void 0:O.poolAddress}`)}},{default:V(()=>[ne("Create new position")]),_:2},1032,["onClick"])])]),(t(!0),i(Q,null,se(P.positionList,L=>(t(),me(H,{key:L==null?void 0:L.name,"p-item":L},null,8,["p-item"]))),128))])}),128))])):A("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(t(),i("div",Gn,[e.store.theme=="default"?(t(),i("img",Mn)):(t(),i("img",qn)),o("span",null,r(e.$t("common.noLiquidityPositions")),1)])):A("",!0),e.wallet.connected?A("",!0):(t(),i("div",Hn,[e.store.theme=="default"?(t(),i("img",zn)):(t(),i("img",Vn)),_(N,{class:"connect-wallet",onClick:u[2]||(u[2]=P=>e.wallet.setIsShowWalletModal(!0))},{default:V(()=>[ne(r(e.$t("button.connectWallet")),1)]),_:1})]))])}const Ca=Y(Rn,[["render",Wn],["__scopeId","data-v-f6accd4a"]]);export{Ca as default};
