import{_ as rn}from"./back.7583b5ce.js";import{_ as dn}from"./refresh-icon.ab011254.js";import{a as Je,$ as Vo,y as Co,r as _,ag as vn,e as je,Q as so,o as u,c as G,w as pe,h as o,i as V,j as We,v as m,f as w,F as to,E as Eo,A as Ne,x as W,ah as mn,I as cn,B as So,p as Xe,k as Ze,H as fo,K as Po,l as h,q as $e,b as To,m as oo,s as No,t as eo,u as C,G as Wo,O as Io,D as vo,C as pn,L as fn,z as jo,P as gn,M as zo,S as bn}from"./entry.d648dbe8.js";/* empty css              */import{a as yn,b as hn,_ as kn}from"./icon-error_2x.b39bdc53.js";import{u as Ye,a as Jo}from"./autoPool.ff84d3be.js";import{u as no,c as He,a as q,g as Ao,d as Me,s as T,T as ze,b as ve,p as Oo,e as Xo,f as _n,V as $o}from"./pool.536b5e88.js";import{_ as go}from"./token-warning.c62bcb87.js";import{_ as Zo}from"./auto-pool-apy-tips.341f1368.js";import{u as bo,a as Ro}from"./sha256.00f5695d.js";import{i as uo}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Qo}from"./assets-card.efaf5685.js";import{_ as Go}from"./coin-lock.f6d4186c.js";import{_ as Ho,a as Yo}from"./auto-pool-remove-modal.9b031576.js";/* empty css              *//* empty css              */import{D as a}from"./decimal.0bdeb344.js";/* empty css              */import{u as wn}from"./swapRouter.a2e6428e.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.b3051886.js";const In=Je({components:{Modal:Vo},setup(e,t){const{t:j,locale:z}=Co(),N=Ye(),S=["0.1","0.5","1"],c=_(N.slippage||.1),{setSlippage:P}=N,I=vn();console.log(c.value,"slippage.value");const l=_(!1);function s(n,v){l.value=!1,c.value=v}function B(){P(c.value),t.emit("onClose",!1)}return{settingArr:S,changeActiveIndex:s,confirm:B,emit:I,slippage:c,t:j,isInput:l,inputChange:n=>{const v=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(v,""),c.value=n.target.value}}}});const Ko=e=>(Xe("data-v-c5b99de4"),e=e(),Ze(),e),An=Ko(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),$n={class:"setting-container"},Cn={class:"title"},Sn=Ko(()=>o("img",{src:kn,alt:""},null,-1)),Pn={class:"tag-list"},Tn={key:0,src:yn,alt:""},Nn={key:1,src:hn,alt:""},Rn={class:"footer"};function qn(e,t,j,z,N,S){const c=mn,P=cn,I=So,l=so("Modal");return u(),G(l,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:t[3]||(t[3]=s=>e.$emit("onClose"))},{closeIcon:pe(()=>[An]),footer:pe(()=>[o("div",Rn,[V(I,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:t[2]||(t[2]=s=>e.$emit("onClose"))},{default:pe(()=>[We(m(e.$t("button.cancel")),1)]),_:1}),V(I,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:pe(()=>[We(m(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:pe(()=>[o("div",$n,[o("div",Cn,[Sn,o("span",null,m(e.$t("modal.slippageTolerance")),1)]),o("div",Pn,[(u(!0),w(to,null,Eo(e.settingArr,(s,B)=>(u(),G(c,{key:B,class:Ne(!e.isInput&&s==e.slippage?"tag-active":""),onClick:p=>e.changeActiveIndex(B,s)},{default:pe(()=>[We(m(s)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),V(c,{class:Ne(["input-tag",e.isInput?"tag-active":""]),onClick:t[1]||(t[1]=s=>e.isInput=!0)},{default:pe(()=>[V(P,{value:e.slippage,"onUpdate:value":t[0]||(t[0]=s=>e.slippage=s),placeholder:"",suffix:"%",class:Ne(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(u(),w("div",{key:0,class:Ne(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(u(),w("img",Tn)):W("",!0),Number(e.slippage)>1?(u(),w("img",Nn)):W("",!0),o("p",null,m(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):W("",!0)]),_:1})}const Bn=je(In,[["render",qn],["__scopeId","data-v-c5b99de4"]]),Dn=Je({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const j=_(!1),z=_(null),N=_(0);let S=_(!1);const c=_(20);no();const P=Ye(),I=_(!1);fo(()=>{}),Po(()=>{clearInterval(z.value)});const l=()=>{S.value=!1,z.value=setInterval(()=>{var r;I.value||N.value<c.value&&(N.value+=1,N.value===c.value&&((r=e==null?void 0:e.poolInfo)!=null&&r.address&&p(),N.value=0))},1e3)},s=h(()=>P.slippage),B=()=>{t.emit("clearAll")},p=()=>{S.value||(S.value=!0,N.value=0,t.emit("clickRefresh"),setTimeout(()=>{S.value=!1},1e3))};$e(()=>e.poolInfo,r=>{r&&!z.value&&l()},{immediate:!0});const n=To(),v=oo();return console.log(v,"route"),{refresh:S,clickRefresh:p,isShowSwapSetting:j,countdown:N,autoRefreshTime:c,slippage:s,clearAll:B,checkNullObj:He,router:n,route:v}}});const Ln=e=>(Xe("data-v-71491a33"),e=e(),Ze(),e),Un={class:"title"},Fn={class:"left"},Mn=Ln(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),On={key:0,class:"deposit-progress"};function Vn(e,t,j,z,N,S){const c=rn,P=dn,I=Bn;return u(),w("div",Un,[o("div",Fn,[V(c)]),o("div",{class:Ne(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:t[0]||(t[0]=l=>e.isShowSwapSetting=!0)},[Mn,o("span",null,m(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(u(),w("div",On,[V(P,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):W("",!0)],2),e.isShowSwapSetting?(u(),G(I,{key:0,onOnClose:t[1]||(t[1]=l=>e.isShowSwapSetting=!1)})):W("",!0)])}const En=je(Dn,[["render",Vn],["__scopeId","data-v-71491a33"]]),Wn=Je({components:{AutoPoolApyTips:Zo},setup(){const e=bo(),t=h(()=>e),j=no(),z=h(()=>j),N=Ye(),S=h(()=>N),c=h(()=>t.value.theme),P=oo(),I=_();$e(()=>[S.value.positionInfoObj,P.params.id],([v,r])=>{v&&!He(v)&&r&&(I.value=v[r],console.log(I.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const l=h(()=>{var v;return(v=I.value)==null?void 0:v.needReverse}),s=v=>{var r;return(v==null?void 0:v.logoURI)||(v==null?void 0:v.logo_url)||((r=z.value.tokensObj[v==null?void 0:v.address])==null?void 0:r.logo_url)||(c.value==="default"?uo("/image/coins/unknown.png"):uo("/image/coins/sui-unknown.png"))},B=h(()=>{var v,r;return console.log((v=I==null?void 0:I.value)==null?void 0:v.poolUSD,"##positionInfo?.value?.poolUSD"),(r=I==null?void 0:I.value)==null?void 0:r.poolUSD}),p=h(()=>{var v,r;return S.value.apyObj&&((r=S.value.apyObj[(v=I.value)==null?void 0:v.id])==null?void 0:r.apr)||"--"}),n=h(()=>t.value.currentExplorer);return{positionInfo:I,needReverse:l,getCoinIcon:s,tvl:B,apy:p,addCommom:q,getExplorerUrl:Ao,currentExplorer:n}}});const Qe=e=>(Xe("data-v-3d655e5e"),e=e(),Ze(),e),jn={class:"auto-pool-v2-info"},zn={class:"pool-info"},Jn={class:"left"},Xn={class:"coin-a"},Zn={alt:""},Qn={class:"coin-b"},Gn={alt:""},Hn={class:"position-name"},Yn={key:0,class:"pool-fee"},Kn=Qe(()=>o("span",null,"Fee tier",-1)),xn={class:"vault-address"},et=["href"],ot=Qe(()=>o("span",null,"Vault Address",-1)),nt=Qe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),tt=[ot,nt],st={class:"apy-and-tvl"},it={class:"apy"},lt=Qe(()=>o("div",{class:"apy-title"},"APY",-1)),at={class:"apy-text"},ut={class:"tvl"},rt=Qe(()=>o("div",{class:"tvl-title"},"TVL",-1)),dt={class:"tvl-text"},vt={class:"pool-info h5-pool-info"},mt={class:"left"},ct={class:"coin-a"},pt={alt:""},ft={class:"coin-b"},gt={alt:""},bt={class:"position-name"},yt={key:0,class:"pool-fee"},ht=Qe(()=>o("span",null,"Fee tier",-1)),kt={class:"left"},_t={class:"vault-address"},wt=["href"],It=Qe(()=>o("span",null,"Vault Address",-1)),At=Qe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),$t=[It,At],Ct={class:"apy-and-tvl"},St={class:"apy"},Pt=Qe(()=>o("div",{class:"apy-title"},"APY",-1)),Tt={class:"apy-text"},Nt={class:"tvl"},Rt=Qe(()=>o("div",{class:"tvl-title"},"TVL",-1)),qt={class:"tvl-text"};function Bt(e,t,j,z,N,S){var l,s,B,p,n,v,r,g,$,d,D,U,M,K,se,ne,b,f,H,ee,oe,ie,E,x,fe,ge,ae,L,X,ue,_e,be,k,Z,Re,he,De,Ce,Le,Ie,Oe,Ke,ro,me,Se,qe;const c=go,P=Zo,I=No("image");return u(),w("div",jn,[o("div",zn,[o("div",Jn,[o("div",Xn,[eo(o("img",Zn,null,512),[[I,e.needReverse?e.getCoinIcon((s=e.positionInfo)==null?void 0:s.token_b):e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_a)]]),V(c,{address:e.needReverse?(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address:(p=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:p.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Qn,[eo(o("img",Gn,null,512),[[I,e.needReverse?e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_a):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b)]]),V(c,{address:e.needReverse?(U=(D=e.positionInfo)==null?void 0:D.token_a)==null?void 0:U.address:(d=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:d.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Hn,m(e.needReverse?(K=(M=e.positionInfo)==null?void 0:M.token_b)==null?void 0:K.symbol:(ne=(se=e.positionInfo)==null?void 0:se.token_a)==null?void 0:ne.symbol)+" - "+m(e.needReverse?(f=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:f.symbol:(ee=(H=e.positionInfo)==null?void 0:H.token_b)==null?void 0:ee.symbol),1),(oe=e.positionInfo)!=null&&oe.fee?(u(),w("div",Yn,[Kn,We(" "+m(((ie=e.positionInfo)==null?void 0:ie.fee)*100)+"% ",1)])):W("",!0),o("div",xn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:C(Ao))(e.currentExplorer,"poolAddress",(E=e.positionInfo)==null?void 0:E.id),target:"_blank"},tt,8,et)])]),o("div",st,[o("div",it,[lt,o("div",at,[We(m(e.apy)+" ",1),V(P)])]),o("div",ut,[rt,o("div",dt,"$"+m(("addCommom"in e?e.addCommom:C(q))(e.tvl,2)),1)])])]),o("div",vt,[o("div",mt,[o("div",ct,[eo(o("img",pt,null,512),[[I,e.needReverse?e.getCoinIcon((fe=e.positionInfo)==null?void 0:fe.token_b):e.getCoinIcon((x=e.positionInfo)==null?void 0:x.token_a)]]),V(c,{address:e.needReverse?(X=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:X.address:(ae=(ge=e.positionInfo)==null?void 0:ge.token_a)==null?void 0:ae.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ft,[eo(o("img",gt,null,512),[[I,e.needReverse?e.getCoinIcon((_e=e.positionInfo)==null?void 0:_e.token_a):e.getCoinIcon((ue=e.positionInfo)==null?void 0:ue.token_b)]]),V(c,{address:e.needReverse?(Re=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:Re.address:(k=(be=e.positionInfo)==null?void 0:be.token_b)==null?void 0:k.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",bt,m(e.needReverse?(De=(he=e.positionInfo)==null?void 0:he.token_b)==null?void 0:De.symbol:(Le=(Ce=e.positionInfo)==null?void 0:Ce.token_a)==null?void 0:Le.symbol)+" - "+m(e.needReverse?(Oe=(Ie=e.positionInfo)==null?void 0:Ie.token_a)==null?void 0:Oe.symbol:(ro=(Ke=e.positionInfo)==null?void 0:Ke.token_b)==null?void 0:ro.symbol),1),(me=e.positionInfo)!=null&&me.fee?(u(),w("div",yt,[ht,We(" "+m(((Se=e.positionInfo)==null?void 0:Se.fee)*100)+"% ",1)])):W("",!0)]),o("div",kt,[o("div",_t,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:C(Ao))(e.currentExplorer,"poolAddress",(qe=e.positionInfo)==null?void 0:qe.id),target:"_blank"},$t,8,wt)])]),o("div",Ct,[o("div",St,[Pt,o("div",Tt,[We(m(e.apy)+" ",1),V(P)])]),o("div",Nt,[Rt,o("div",qt,"$"+m(("addCommom"in e?e.addCommom:C(q))(e.tvl,2)),1)])])])])}const xo=je(Wn,[["render",Bt],["__scopeId","data-v-3d655e5e"]]),Dt=Je({components:{Slider:Wo},setup(){const e=_(!0),t=no(),j=h(()=>t),z=Ye(),N=h(()=>z),S=oo(),c=_();$e(()=>[N.value.positionInfoObj,S.params.id],([p,n])=>{p&&!He(p)&&n&&(c.value=p[n],console.log(c.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const P=h(()=>{var p;return(p=c.value)==null?void 0:p.needReverse}),I=p=>{var n;return(p==null?void 0:p.logoURI)||(p==null?void 0:p.logo_url)||((n=j.value.tokensObj[p==null?void 0:p.address])==null?void 0:n.logo_url)||uo("/image/coins/sui-unknown.png")},l=h(()=>{var g,$,d,D,U,M,K;const p=e.value?((g=c.value)==null?void 0:g.minPrice)&&T(c==null?void 0:c.value.minPrice,6):(($=c.value)==null?void 0:$.maxPrice)&&T(1/(c==null?void 0:c.value.maxPrice),6),n=e.value?((d=c.value)==null?void 0:d.maxPrice)&&T((D=c.value)==null?void 0:D.maxPrice,6):((U=c.value)==null?void 0:U.minPrice)&&T(1/(c==null?void 0:c.value.minPrice),6),v=(P.value?!e.value:e.value)?T((M=c.value)==null?void 0:M.price,6):T(1/((K=c.value)==null?void 0:K.price),6);let r={};return r[p]={label:"Min Price"},r[n]={label:"Max Price"},v>p&&v<n?r[v]={label:"Current Price"}:v<p?r[Number(p)+1e-9]={label:"Current Price"}:v>n&&(r[Number(n)-1e-9]={label:"Current Price"}),console.log(r,"obj###"),r}),s=h(()=>{var n,v;const p=(P.value?!e.value:e.value)?Me((n=c.value)==null?void 0:n.price,6):Me(1/((v=c.value)==null?void 0:v.price),6);return console.log(p,"result##"),p}),B=h(()=>{var n,v;const p=(P.value?!e.value:e.value)?Me((n=c.value)==null?void 0:n.price,6):Me(1/((v=c.value)==null?void 0:v.price),6);return console.log(p,"result##111"),p});return{direct:e,positionInfo:c,needReverse:P,getCoinIcon:I,decimalUi:Me,addCommom:q,sFixD:T,marks:l,currentPrice:s,currentPriceResever:B}}});const yo=e=>(Xe("data-v-44da997b"),e=e(),Ze(),e),Lt={class:"v2-position-range"},Ut={class:"position-range-top"},Ft=yo(()=>o("div",null,"Position Range",-1)),Mt={class:"base-coin"},Ot={key:0},Vt={alt:""},Et={key:1},Wt={alt:""},jt={key:2},zt={key:3},Jt=yo(()=>o("p",null,"Base coin",-1)),Xt={class:"coin-rate"},Zt=yo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Qt=yo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Gt=[Zt,Qt],Ht={class:"position-range-bottom"},Yt={class:"price-range"},Kt={class:"price-range-bg"},xt={key:0,class:"min-price"},es={key:0},os={key:1},ns={key:1,class:"max-price"},ts={key:0},ss={key:1},is={key:0,class:"min-price"},ls={key:0},as={key:1},us={key:1,class:"max-price"},rs={key:0},ds={key:1};function vs(e,t,j,z,N,S){var l,s,B,p,n,v,r,g,$,d,D,U,M,K,se,ne,b,f,H,ee,oe,ie,E,x,fe,ge,ae,L;const c=go,P=so("Slider"),I=No("image");return u(),w("div",Lt,[o("div",Ut,[Ft,o("div",Mt,[e.needReverse?(u(),w("div",Et,[eo(o("img",Wt,null,512),[[I,e.direct?e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_b):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_a)]]),V(c,{address:e.direct?(U=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:U.address:(d=($=e.positionInfo)==null?void 0:$.token_a)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(u(),w("div",Ot,[eo(o("img",Vt,null,512),[[I,e.direct?e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_a):e.getCoinIcon((s=e.positionInfo)==null?void 0:s.token_b)]]),V(c,{address:e.direct?(p=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:p.address:(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(u(),w("span",zt,m(e.direct?(f=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:f.symbol:(ee=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:ee.symbol),1)):(u(),w("span",jt,m(e.direct?(K=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:K.symbol:(ne=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ne.symbol),1)),Jt,o("div",Xt,[o("div",{onClick:t[0]||(t[0]=X=>e.direct=!e.direct)},Gt)])])]),o("div",Ht,[o("div",Yt,[o("div",Kt,[e.direct?(u(),G(P,{key:0,value:e.currentPrice,class:Ne(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:C(T))((oe=e.positionInfo)==null?void 0:oe.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:C(T))((ie=e.positionInfo)==null?void 0:ie.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:C(Me))((E=e.positionInfo)==null?void 0:E.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:C(Me))((x=e.positionInfo)==null?void 0:x.maxPrice,6))},{mark:pe(({label:X})=>{var ue,_e,be,k,Z,Re,he,De,Ce,Le,Ie,Oe;return[X=="Min Price"?(u(),w("div",xt,[o("div",null,m(X),1),e.direct?(u(),w("div",es,m(((ue=e.positionInfo)==null?void 0:ue.minPrice)&&("sFixD"in e?e.sFixD:C(T))((_e=e.positionInfo)==null?void 0:_e.minPrice,6)),1)):(u(),w("div",os,m(((be=e.positionInfo)==null?void 0:be.maxPrice)&&("sFixD"in e?e.sFixD:C(T))(1/((k=e.positionInfo)==null?void 0:k.maxPrice),6)),1))])):W("",!0),X=="Max Price"?(u(),w("div",ns,[o("div",null,m(X),1),e.direct?(u(),w("div",ts,m(((Z=e.positionInfo)==null?void 0:Z.maxPrice)&&("sFixD"in e?e.sFixD:C(T))((Re=e.positionInfo)==null?void 0:Re.maxPrice,6)),1)):(u(),w("div",ss,m(((he=e.positionInfo)==null?void 0:he.minPrice)&&("sFixD"in e?e.sFixD:C(T))(1/((De=e.positionInfo)==null?void 0:De.minPrice),6)),1))])):W("",!0),X=="Current Price"?(u(),w("div",{key:2,class:Ne(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:C(T))((Ce=e.positionInfo)==null?void 0:Ce.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:C(T))((Le=e.positionInfo)==null?void 0:Le.maxPrice,6))?"current-price-right":""])},[o("div",null,m(X),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(u(),w(to,{key:0},[We(m(("addCommom"in e?e.addCommom:C(q))(("decimalUi"in e?e.decimalUi:C(Me))((Ie=e.positionInfo)==null?void 0:Ie.price,6))),1)],64)):(u(),w(to,{key:1},[We(m(("addCommom"in e?e.addCommom:C(q))(("decimalUi"in e?e.decimalUi:C(Me))(1/((Oe=e.positionInfo)==null?void 0:Oe.price),6))),1)],64))])],2)):W("",!0)]}),_:1},8,["value","class","marks","min","max"])):(u(),G(P,{key:1,value:e.currentPriceResever,class:Ne(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:C(T))(1/((fe=e.positionInfo)==null?void 0:fe.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:C(T))(1/((ge=e.positionInfo)==null?void 0:ge.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:C(Me))(1/((ae=e.positionInfo)==null?void 0:ae.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:C(Me))(1/((L=e.positionInfo)==null?void 0:L.minPrice),6)),marks:e.marks,disabled:!0},{mark:pe(({label:X})=>{var ue,_e,be,k,Z,Re,he,De,Ce,Le,Ie,Oe;return[X=="Min Price"?(u(),w("div",is,[o("div",null,m(X),1),e.direct?(u(),w("div",ls,m(((ue=e.positionInfo)==null?void 0:ue.minPrice)&&("sFixD"in e?e.sFixD:C(T))((_e=e.positionInfo)==null?void 0:_e.minPrice,6)),1)):(u(),w("div",as,m(((be=e.positionInfo)==null?void 0:be.maxPrice)&&("sFixD"in e?e.sFixD:C(T))(1/((k=e.positionInfo)==null?void 0:k.maxPrice),6)),1))])):W("",!0),X=="Max Price"?(u(),w("div",us,[o("div",null,m(X),1),e.direct?(u(),w("div",rs,m(((Z=e.positionInfo)==null?void 0:Z.maxPrice)&&("sFixD"in e?e.sFixD:C(T))((Re=e.positionInfo)==null?void 0:Re.maxPrice,6)),1)):(u(),w("div",ds,m(((he=e.positionInfo)==null?void 0:he.minPrice)&&("sFixD"in e?e.sFixD:C(T))(1/((De=e.positionInfo)==null?void 0:De.minPrice),6)),1))])):W("",!0),X=="Current Price"?(u(),w("div",{key:2,class:Ne(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:C(T))(1/((Ce=e.positionInfo)==null?void 0:Ce.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:C(T))(1/((Le=e.positionInfo)==null?void 0:Le.minPrice),6))?"current-price-right":""])},[o("div",null,m(X),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(u(),w(to,{key:0},[We(m(("addCommom"in e?e.addCommom:C(q))(("decimalUi"in e?e.decimalUi:C(Me))((Ie=e.positionInfo)==null?void 0:Ie.price,6))),1)],64)):(u(),w(to,{key:1},[We(m(("addCommom"in e?e.addCommom:C(q))(("decimalUi"in e?e.decimalUi:C(Me))(1/((Oe=e.positionInfo)==null?void 0:Oe.price),6))),1)],64))])],2)):W("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const en=je(Dt,[["render",vs],["__scopeId","data-v-44da997b"]]),ms=Je({components:{Modal:Vo},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const t=h(()=>{var z,N;const j=Math.ceil(((z=e.positionInfo)==null?void 0:z.poolUSD)/((N=e.positionInfo)==null?void 0:N.quoteUSD)*100);return console.log(j,"Pool Capacity Ratio"),Number(j)});return{sFixD:T,addCommom:q,ratio:t}}});const qo=e=>(Xe("data-v-78a51262"),e=e(),Ze(),e),cs=qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ps={class:"deposit-slider"},fs={class:"info-block"},gs=qo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),bs={class:"text"},ys={class:"info-block"},hs=qo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),ks={class:"text"};function _s(e,t,j,z,N,S){const c=so("Modal");return u(),G(c,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:t[0]||(t[0]=P=>e.$emit("onClose"))},{closeIcon:pe(()=>[cs]),default:pe(()=>{var P,I,l,s;return[o("div",ps,[o("div",{class:"current-deposit",style:Io({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",fs,[gs,o("div",bs,m(("addCommom"in e?e.addCommom:C(q))(("sFixD"in e?e.sFixD:C(T))((P=e.positionInfo)==null?void 0:P.currentDeposit,2)))+" "+m((I=e.positionInfo)==null?void 0:I.quoteCoinInfo.symbol),1)]),o("div",ys,[hs,o("div",ks,m(("addCommom"in e?e.addCommom:C(q))(("sFixD"in e?e.sFixD:C(T))((l=e.positionInfo)==null?void 0:l.quoteUSD,2)))+" "+m((s=e.positionInfo)==null?void 0:s.quoteCoinInfo.symbol),1)])]}),_:1})}const on=je(ms,[["render",_s],["__scopeId","data-v-78a51262"]]),ws=Je({components:{AutoPoolV2PoolCapacity:on},setup(){const e=no(),t=h(()=>e),j=Ye(),z=h(()=>j),N=oo(),S=_();$e(()=>[z.value.positionInfoObj,N.params.id],([l,s])=>{console.log(l,"##positionInfoObj"),l&&!He(l)&&s&&(S.value=l[s],console.log(S.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=h(()=>{var l;return(l=S.value)==null?void 0:l.needReverse}),P=l=>{var s;return console.log(l,"info##"),(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((s=t.value.tokensObj[l==null?void 0:l.address])==null?void 0:s.logo_url)||uo("/image/coins/sui-unknown.png")},I=_(!1);return{needReverse:c,positionInfo:S,getCoinIcon:P,addCommom:q,isShowModal:I}}});const Is=e=>(Xe("data-v-ad8a33e9"),e=e(),Ze(),e),As={class:"pool-composition"},$s={class:"pool-composition-top"},Cs=Is(()=>o("span",null,"Vault Composition",-1)),Ss={class:"pool-composition-bottom"},Ps={class:"token-ratio"},Ts={class:"before-coin"},Ns={alt:""},Rs={class:"after-coin"},qs={alt:""},Bs={class:"token-num"},Ds={class:"num-box"},Ls={class:"num-box"};function Us(e,t,j,z,N,S){var l,s,B,p,n,v,r,g,$,d,D,U,M,K,se,ne,b,f,H,ee,oe,ie,E,x,fe,ge,ae,L,X;const c=go,P=on,I=No("image");return u(),w("div",As,[o("div",$s,[Cs,Number((l=e.positionInfo)==null?void 0:l.quoteUSD)>0?(u(),w("div",{key:0,class:"pool-capacity",onClick:t[0]||(t[0]=ue=>e.isShowModal=!0)},"Vault Capacity")):W("",!0)]),o("div",Ss,[o("div",Ps,[o("div",Ts,[o("div",null,[V(c,{address:e.needReverse?(n=(p=e.positionInfo)==null?void 0:p.token_b)==null?void 0:n.address:(B=(s=e.positionInfo)==null?void 0:s.token_a)==null?void 0:B.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),eo(o("img",Ns,null,512),[[I,e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_a)]])]),o("span",null,m((g=e.positionInfo)==null?void 0:g.poolCoinARatio)+"%",1)]),o("div",Rs,[o("span",null,m(($=e.positionInfo)==null?void 0:$.poolCoinBRatio)+"%",1),o("div",null,[eo(o("img",qs,null,512),[[I,e.needReverse?e.getCoinIcon((D=e.positionInfo)==null?void 0:D.token_a):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b)]]),V(c,{address:e.needReverse?(se=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:se.address:(M=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:M.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Bs,[o("div",{class:"token-a-bg",style:Io({width:`${(ne=e.positionInfo)==null?void 0:ne.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:Io({width:`${(b=e.positionInfo)==null?void 0:b.poolCoinBRatio}%`})},null,4),o("div",Ds,[o("div",null,m(("addCommom"in e?e.addCommom:C(q))((f=e.positionInfo)==null?void 0:f.poolCoinANum))+" "+m(e.needReverse?(ie=(oe=e.positionInfo)==null?void 0:oe.token_b)==null?void 0:ie.symbol:(ee=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:ee.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:C(q))((E=e.positionInfo)==null?void 0:E.poolCoinAUSD)),1)]),o("div",Ls,[o("div",null,m(("addCommom"in e?e.addCommom:C(q))((x=e.positionInfo)==null?void 0:x.poolCoinBNum))+" "+m(e.needReverse?(L=(ae=e.positionInfo)==null?void 0:ae.token_a)==null?void 0:L.symbol:(ge=(fe=e.positionInfo)==null?void 0:fe.token_b)==null?void 0:ge.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:C(q))((X=e.positionInfo)==null?void 0:X.poolCoinBUSD)),1)])])]),e.isShowModal?(u(),G(P,{key:0,"position-info":e.positionInfo,onOnClose:t[1]||(t[1]=ue=>e.isShowModal=!1)},null,8,["position-info"])):W("",!0)])}const nn=je(ws,[["render",Us],["__scopeId","data-v-ad8a33e9"]]),Fs=Je({setup(){const e=no(),t=h(()=>e),j=Ye(),z=h(()=>j),N=oo(),S=_();$e(()=>[z.value.positionInfoObj,N.params.id],([s,B])=>{console.log(s,"##positionInfoObj"),s&&!He(s)&&B&&(S.value=s[B],console.log(S.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=h(()=>{var s;return(s=S.value)==null?void 0:s.needReverse}),P=s=>{var B;return console.log(s,"info##"),(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((B=t.value.tokensObj[s==null?void 0:s.address])==null?void 0:B.logo_url)||uo("/image/coins/sui-unknown.png")},I=Ro(),l=h(()=>I);return{needReverse:c,positionInfo:S,getCoinIcon:P,addCommom:q,wallet:l}}});const mo=e=>(Xe("data-v-61c3efe6"),e=e(),Ze(),e),Ms={class:"my-liquidity"},Os={class:"my-liquidity-top"},Vs=mo(()=>o("div",null,"My Liquidity",-1)),Es=mo(()=>o("p",null,"My share of pool",-1)),Ws={class:"my-liquidity-bottom"},js={class:"lp-token"},zs=mo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),Js={class:"lp-balance"},Xs={class:"token-num-content"},Zs={class:"token-num token-a-num"},Qs={class:"logo"},Gs=["src"],Hs={class:"text"},Ys={class:"lp-logo"},Ks=["src"],xs=mo(()=>o("div",null,"Pooled Assets",-1)),ei={class:"token-num"},oi={class:"logo"},ni=["src"],ti={class:"text"},si=mo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ii(e,t,j,z,N,S){var P,I,l,s,B,p,n,v,r,g,$,d,D,U,M,K,se,ne,b,f,H,ee,oe,ie,E,x,fe,ge,ae;const c=go;return u(),w("div",Ms,[o("div",Os,[Vs,o("div",null,[Es,o("p",null,m(e.wallet.connected?(P=e.positionInfo)==null?void 0:P.myShare:"--")+"%",1)])]),o("div",Ws,[o("div",js,[zs,o("div",null,[o("span",Js,m(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((I=e.positionInfo)==null?void 0:I.myLiquidity):"--")+" LP",1),o("span",null,m(e.wallet.connected?((l=e.positionInfo)==null?void 0:l.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:C(q))((s=e.positionInfo)==null?void 0:s.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",Xs,[o("div",Zs,[o("div",Qs,[o("img",{src:e.needReverse?e.getCoinIcon((p=e.positionInfo)==null?void 0:p.token_b):e.getCoinIcon((B=e.positionInfo)==null?void 0:B.token_a),alt:""},null,8,Gs),V(c,{address:e.needReverse?(g=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:g.address:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",Hs,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))(($=e.positionInfo)==null?void 0:$.amountA):"--")+" "+m(e.needReverse?(M=(U=e.positionInfo)==null?void 0:U.token_b)==null?void 0:M.symbol:(D=(d=e.positionInfo)==null?void 0:d.token_a)==null?void 0:D.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((K=e.positionInfo)==null?void 0:K.myAmountAUSD):"--"),1)])]),o("div",Ys,[o("img",{src:e.getCoinIcon((se=e.positionInfo)==null?void 0:se.lpInfo),alt:""},null,8,Ks),xs]),o("div",ei,[o("div",oi,[o("img",{src:e.needReverse?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_a):e.getCoinIcon((ne=e.positionInfo)==null?void 0:ne.token_b),alt:""},null,8,ni),V(c,{address:e.needReverse?(oe=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:oe.address:(H=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:H.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ti,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((ie=e.positionInfo)==null?void 0:ie.amountB):"--")+" "+m(e.needReverse?(ge=(fe=e.positionInfo)==null?void 0:fe.token_a)==null?void 0:ge.symbol:(x=(E=e.positionInfo)==null?void 0:E.token_b)==null?void 0:x.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:C(q))((ae=e.positionInfo)==null?void 0:ae.myAmountBUSD):"--"),1)])]),si])])])}const tn=je(Fs,[["render",ii],["__scopeId","data-v-61c3efe6"]]),li=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const ai={},sn=e=>(Xe("data-v-fcbc716b"),e=e(),Ze(),e),ui={class:"status"},ri=sn(()=>o("img",{src:li,alt:""},null,-1)),di=sn(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),vi=[ri,di];function mi(e,t){return u(),w("div",ui,vi)}const ln=je(ai,[["render",mi],["__scopeId","data-v-fcbc716b"]]),ci=Je({components:{AutoPoolAddModal:Ho,AutoPoolV2PoolStatus:ln},setup(){const e=Ro(),t=_(!1),j=bo(),z=h(()=>j),N=h(()=>z.value.chainName),S=h(()=>e),c=Ye(),P=h(()=>c),I=no(),l=h(()=>I),s=_(),B=oo(),p=_(!1),n=_(!1);$e(()=>[P.value.positionInfoObj,B.params.id],([A,F])=>{A&&!He(A)&&F&&(s.value=A[F],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const v=h(()=>{var A,F;return console.log((A=s.value)==null?void 0:A.needReverse,"##positionInfo.value?.needReverse"),(F=s.value)==null?void 0:F.needReverse}),r=_(),g=_(),$=_(),d=_(),D=_(!0),U=h(()=>S.value.assets&&r.value&&S.value.assets[r.value.address]?Oo(S.value.assets[r.value.address].balance,r.value.decimals):0),M=h(()=>S.value.assets&&g.value&&S.value.assets[g.value.address]?Oo(S.value.assets[g.value.address].balance,g.value.decimals):0),K=A=>{A==="fromCoin"?(D.value=!0,$.value=U.value>0?r.value.symbol=="SUI"?new a(Number(U.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(U.value)).sub(new a(.05)).toString():String(U.value):""):(D.value=!1,d.value=M.value>0?g.value.symbol=="SUI"?new a(Number(M.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(M.value)).sub(new a(.05)).toString():String(M.value):"")},se=A=>{A==="fromCoin"?(D.value=!0,$.value=U.value>0?T(new a(Number(U.value)).div(2).toString(),r.value.decimals).toString():""):(D.value=!1,d.value=M.value>0?T(new a(Number(M.value)).div(2).toString(),g.value.decimals).toString():"")},ne=h(()=>N.value?Xo(N.value):{}),b=h(()=>P.value.slippage),f=_("--"),H=_("--"),ee=A=>{const F=new a(s.value.autoPoolPositionInfo.liquidity),re=new a(A.toString());if(F.toNumber()>0&&re.toNumber()>0){const y=re.add(F);console.log("totalLiquidity:",re.div(y).mul(100).toString());const Pe=re.div(y).mul(100).toNumber(),ye=_n(Pe),ke=ye==-1?2:ye+2,we=T(re.div(y).mul(100).toNumber(),ke);console.log(s.value.decimals,"##positionInfo.value.decimal");const Te=new a(1).div(new a(Math.pow(10,s.value.lpInfo.decimals))).toString();console.log(we,Te,"###288"),Number(we)<Number(Te)?f.value=`<${Te}`:f.value=we}else re.toNumber()>0&&F.toNumber()<=0?f.value="100":f.value="--"},oe=A=>{const F=new a(A.toString()),re=new a(b.value).div(100);console.log(re.toString(),"#slippageNum");const y=$o.get_lp_amount_by_liquidity({liquidity:s.value.liquidity,total_supply:s.value.total_supply},A.toString()),Pe=new a(Math.pow(10,s.value.lpInfo.decimals)),ye=new a(y).div(Pe).toString(),ke=new a(ye).mul(re);console.log(y,ke.toString(),"###409");const we=new a(ye).sub(ke);console.log(we.toString(),"##minLp"),console.log(F.toString(),y,ye,"lpDecimalNum##"),H.value=T(we.toString(),s.value.decimals)},ie=_(!1),E=_(!1),x=_(""),fe=_(),ge=_(!1),ae=async()=>{if(console.log(s.value,"positionInfo.value###432"),!s.value)return;console.log($.value,d.value,"####updateAmounts"),n.value=!1,ge.value=!0;const A=s.value.autoPoolPositionInfo.tick_lower_index,F=s.value.autoPoolPositionInfo.tick_upper_index,re=ze.sqrtPriceX64ToTickIndex(new ve(s.value.current_sqrt_price));ze.tickIndexToSqrtPriceX64(A),ze.tickIndexToSqrtPriceX64(F),re<A&&(v.value?ie.value=!0:E.value=!0),re>F&&(v.value?E.value=!0:ie.value=!0);let y;if(console.log($.value||d.value,"#fromCoinAmount.value || toCoinAmount.value"),$.value||d.value){D.value?y=new a($.value).mul(Math.pow(10,r.value.decimals)).toString():y=new a(d.value).mul(Math.pow(10,g.value.decimals)).toString();let Pe,ye=D.value;if(console.log("执行##"),console.log(re,A,F,"###520"),me.value||Se.value){const R=new a(1);if(console.log(R.toString(),y,"decimalNum###"),new a(y).lte(R))return n.value=!0,!1;console.log(v.value?D.value:!D.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value"),console.log(y,"##coinAmount"),console.log("1106###needReverse.value####",v.value),console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:A,upperTick:F,curSqrtPrice:new ve(s.value.current_sqrt_price),fix_amount_a:ye,input_amount:y,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,clmm_pool:s.value.address,slippage:Number(b.value)/100,decimals:me.value?r.value.decimals:g.value.decimals});const J=await Ke.calculateDepositSwapAmount({lowerTick:A,upperTick:F,curSqrtPrice:new ve(s.value.current_sqrt_price),fix_amount_a:ye,input_amount:y,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,clmm_pool:s.value.address,slippage:Number(b.value)/100,decimals:me.value?r.value.decimals:g.value.decimals,request_id:y});if(console.log(J,"###swapResult"),console.log("1106###calculateDepositSwapAmount###result###",J),J){if(J.request_id!==y)return;p.value=J.is_exceed,Pe=new ve(J.afterSqrtPrice),y=J.fixAmountA===ye?new ve(new a(y).sub(J.swapInAmount).toString()):new ve(J.swapOutAmount),fe.value={swap_amount:J.swapInAmount,route_obj:J.route_obj,a2b:ye,input_amount:y},ye=J.fixAmountA;const le=s.value.token_a.decimals,Q=s.value.token_b.decimals,ce=new a(J.swapInAmount).div(new a(Math.pow(10,le))).toString(),de=T(new a(J.swapOutAmountLimit).div(new a(Math.pow(10,Q))).toString(),Q),Y=v.value?s.value.token_b.symbol:s.value.token_a.symbol,O=v.value?s.value.token_a.symbol:s.value.token_b.symbol;x.value=`To deposit ${q(me.value?$.value:d.value)} ${me.value?Y:O},
          ${q(ce)} ${me.value?Y:O}  will be traded for ${q(de)} ${me.value?O:Y} added to the pool.`}else Pe=s.value.current_sqrt_price,y=new ve(y)}else p.value=!1,Pe=s.value.current_sqrt_price,y=new ve(y),x.value="";console.log(fe,"##swapParams");let ke,we,Te;const i=ne.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:r.value,tokenB:g.value,lowerTick:A,upperTick:F,coinAmount:y,iscoinA:ye,roundUp:!0,slippage:Number(b.value)/100,curSqrtPrice:new ve(Pe)});console.log("amount#",i),ke=i.liquidityAmount,we=i.tokenMaxA,Te=i.tokenMaxB,!me.value&&!Se.value&&(D.value?d.value=Number(Te)>0?Te:"":$.value=Number(we)>0?we:""),console.log(ke.toString(),"liquidityAmount###"),ee(ke),oe(ke),ge.value=!1}};$e(()=>s.value,A=>{A&&!He(A)&&(r.value=A==null?void 0:A.token_a,g.value=A==null?void 0:A.token_b,ie.value=!1,E.value=!1,ae())},{immediate:!0});const L=h(()=>l.value.RATES),X=h(()=>{var A,F,re,y,Pe,ye,ke,we,Te,i;if((F=L.value[(A=r.value)==null?void 0:A.address])!=null&&F.price&&((y=L.value[(re=g.value)==null?void 0:re.address])!=null&&y.price)){console.log((ye=L.value[(Pe=r.value)==null?void 0:Pe.address])==null?void 0:ye.price,"RATES.value[fromCoin.value?.address]?.price");const R=new a($.value||0).mul(new a((we=L.value[(ke=r.value)==null?void 0:ke.address])==null?void 0:we.price)),J=new a(d.value||0).mul(new a((i=L.value[(Te=g.value)==null?void 0:Te.address])==null?void 0:i.price));return R.add(J).toNumber()}else return"--"});$e(()=>$.value,vo((A,F)=>{console.log(A,"##newVal"),A?ae():(f.value="--",d.value="",H.value="--")},500),{immediate:!0}),$e(()=>d.value,vo((A,F)=>{A?ae():($.value="",f.value="--",H.value="--")},500),{immediate:!0});const{t:ue,locale:_e}=Co(),be=h(()=>{var A,F;if(me.value||Se.value){const re=me.value?$.value:d.value,y=me.value?r.value:g.value;if((A=L.value[y==null?void 0:y.address])!=null&&A.price)return new a(re||0).mul(new a((F=L.value[y==null?void 0:y.address])==null?void 0:F.price)).toNumber()}return 0}),k=h(()=>{const A=Number($.value)>Number(U.value),F=Number(d.value)>Number(M.value);return!$.value&&!d.value?ue("button.enterAmount"):A?ue("button.insufficientBalance",{name:r.value.symbol}):F?ue("button.insufficientBalance",{name:g.value.symbol}):p.value?ue("button.insufficientLiquidity"):Number(s.value.remainingTokenUSD)!==0&&Number(s.value.quoteUSD)>0&&Number(X.value)>Number(s.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?ue("button.enterAmount"):(console.log(be.value),"Add Liquidity")}),Z=h(()=>{const A=Number($.value)>Number(U.value),F=Number(d.value)>Number(M.value);return!!(!$.value&&!d.value||A||F||$.value<=0&&d.value<=0||p.value||co.value!=="STATUS_RUNNING"||(console.log(X.value,s.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(s.value.remainingTokenUSD)!==0&&Number(s.value.quoteUSD)>0&&Number(X.value)>Number(s.value.remainingTokenUSD))||n.value||be.value>1e4)}),Re=_(!0),{setIsShowSuccess:he,setIsShowRejected:De,setIsShowWaiting:Ce,setTransactionDesc:Le,setTransactionTxid:Ie,setPositiomNum:Oe}=j,Ke=Jo("Sui"),ro=async()=>{var Te,i;t.value=!1,Re.value=!0,Ie("");const A=`${q($.value)} ${(Te=r.value)==null?void 0:Te.symbol}`,F=`${q(d.value)} ${(i=g.value)==null?void 0:i.symbol}`;Le(`Deposit ${$.value>0?A:""} ${d.value>0&&$.value>0?"and":""} ${d.value>0?F:""}`),Ce(!0);const re=D.value,y=s.value.autoPoolPositionInfo.tick_lower_index,Pe=s.value.autoPoolPositionInfo.tick_upper_index,ye=ze.sqrtPriceX64ToTickIndex(new ve(s.value.current_sqrt_price));let ke;D.value?ke=new a($.value).mul(Math.pow(10,r.value.decimals)).toString():ke=new a(d.value).mul(Math.pow(10,g.value.decimals)).toString();const we=s.value.rewarderInfo.map(R=>R.coinAddress);console.log("1109###deposit###positionInfo###",s);try{const R={lowerTick:y,upperTick:Pe,coinAmount:ke,fix_amount_a:re,slippage:Number(b.value)/100,curSqrtPrice:new ve(s.value.current_sqrt_price),id:s.value.id,clmm_pool:s.value.autoPoolPositionInfo.pool,lp_token_type:s.value.lp_token_type,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:we,swapParams:fe.value,isOnlyA:me.value,isOnlyB:Se.value,currentTickIndex:ye,decimal_b:s.value.coinB.decimals};console.log("1106###deposit###params###",R);const J=await Ke.deposit(R);console.log(J,"===>payloadAdd11111");const le=await S.value.currentWallet.signAndExecuteTransactionBlock(J);let Q=ne.value.handleTx(le);if(console.log("toAdd###tx###",Q),Q&&Q.hash){Ie(Q.hash),Ce(!1),he(!0),console.log(s,"===>positionInfo");const ce={title:"Supplied",desc:`Deposit ${$.value>0?A:""} ${d.value>0&&$.value>0?"and":""} ${d.value>0?F:""}`,hash:Q.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${$.value>0?A:""} ${d.value>0&&$.value>0?"and":""} ${d.value>0?F:""}`};N.value!=="Aptos"&&(ce.res=Q.res),ne.value.showTransitionPending(ce),await ne.value.watchTransaction(ce)&&setTimeout(()=>{c.updatePositionItem(s.value.id),ne.value.getAccount(S.value.address)},1e3),Oe()}else Ce(!1),De(!0);$.value="",d.value="",Re.value=!1}catch(R){$.value="",d.value="",console.log("addError###",R),Re.value=!1,Ce(!1),De(!0)}},me=_(!1),Se=_(!1),qe=A=>{$.value="",d.value="",x.value="",A=="only-a-b"?(me.value=!1,Se.value=!1):A=="only-a"?(me.value=!0,Se.value=!1):(Se.value=!0,me.value=!1)},co=h(()=>P.value.currentAutoPoolStatus),po=_(),ko=()=>{po.value=window.setInterval(()=>{($.value||d.value)&&ae()},2e4)};fo(()=>{ko()}),Po(()=>{window.clearInterval(po.value)});const _o=pn(fn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:co,wallet:S,positionInfo:s,isShowAddModal:t,needReverse:v,fromCoin:r,toCoin:g,fromCoinAmount:$,toCoinAmount:d,fromCoinBlance:U,toCoinBlance:M,fixedFromCoin:D,maxBtnSelect:K,halfBtnSelect:se,totalAmountUSD:X,addCommom:q,shareOfPool:f,minimumReceivedLP:H,addLiquidityBtnText:k,addLiquidityBtnDisabled:Z,toAdd:ro,showToCoinLock:E,showFromCoinLock:ie,isOnlyA:me,isOnlyB:Se,onlyToken:qe,onlyText:x,onlyTokenUSD:be,calculateLoading:ge,indicator:_o}}}),an="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAArpJREFUWEftmE2IjWEUx3//JGzkoywslBULNjaUlCyIFQmJfCaZbCzQZDEsJmFhI5J8RpJkVsRCSmpsbFiYnSxmoXxkMyQd93CmXtd77/u8753Fs5i3bk13zvOc3/2fj+c8r8j8UeZ8TAL2GqHGCprZVGApsBxYAMyJjzN9js8H4BXwRtLPJrC1Ac1sNrAdWA3MSHQ61rJ/DtyV9CVxzR+zZMBQbBuwEZhWcPLVFQI+hWr+L1dzbig8q2D7AxgC7qUqmgQYqp1oKbAonP0CngLPWmqOSLIyVczM9/c1a4C1wJSwGwEGU9SsBDSzhcBAKOL7DwPXJY3WCZWZzQf2AitinSt+UtL7bvt0BQzlzgecq3RT0oM6YO22ZrYZ2B3p5ZBHuinZETBy7nSEyOHOSHrZC9z4WjNbCRwPSA93f6ec7Aa4E/Ci8OdGr8p1UHJPfO9Fc7vsx5cCRmivRLUOSxqsUs7MDgPrwu6JpAsJa7zwPCe9ug+UhboTYF+rwa4HvFr7UgqiIaAXzsWo7seS/O9/nv8AI/fuRBMuXdShpdRW0Pcxs3ExvJnvaM/FMsBlreQ9FRBHJb2rClU4mgfMDNtvkj4mrlsMnAvbAUmvi+vKAA8BGwA/IXZ1asIpzlNsopnfAvzEeSTpUhWgt5YlwAtJZ1Oc9GpjZseAVcBbSf1VgJcBT94hSVdTnZuZDw/+w/xxRz4cJD1mtj/O+FFJB6sA7wPTWyPUNUkPkzz8TfZGRRL5uwnYB3yXtCVnwDFJW6sAm4a4FwVrhbhRkfQY4lpF0qjNNAVs0maaNupGITaz2o3aL0P5HnVt52N+w0IA+s0t33ErIPMdWAPQczHfkb8Q6jwvTePHTdbXzgKkF02eF/cCpOdknq8+itNFti+P2ufCbF+/pQ6wE2VX+fJoohw13WcSsKly4+t+A+qQnDjIFuc0AAAAAElFTkSuQmCC";const Ge=e=>(Xe("data-v-c311577c"),e=e(),Ze(),e),pi={class:"auto-pool-add"},fi={class:"auto-pool-add-content"},gi={class:"liquidity-action-tab"},bi=Ge(()=>o("div",{class:"increase tab-active"},"Add",-1)),yi={class:"only-token"},hi=Ge(()=>o("div",null,"Deposit Amounts",-1)),ki=Ge(()=>o("span",null," You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you. ",-1)),_i=Ge(()=>o("img",{src:an,alt:""},null,-1)),wi=Ge(()=>o("span",null," You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you. ",-1)),Ii=Ge(()=>o("img",{src:an,alt:""},null,-1)),Ai={key:0,class:"card-item"},$i={key:1,class:"card-item"},Ci=Ge(()=>o("span",null,"Pool Closed",-1)),Si={key:0,class:"add-info"},Pi={key:0,class:"only-text"},Ti={class:"total-amount"},Ni=Ge(()=>o("span",null,"Total Amount",-1)),Ri={key:0},qi={class:"total-amount"},Bi=Ge(()=>o("span",null,"Share of Pool",-1)),Di={key:0},Li={class:"total-amount"},Ui=Ge(()=>o("span",null,"Minimum Received LP",-1)),Fi={key:0};function Mi(e,t,j,z,N,S){var n,v,r,g,$,d,D,U,M,K,se,ne,b,f,H,ee,oe,ie,E,x,fe,ge,ae;const c=gn,P=Qo,I=Go,l=so("AutoPoolV2PoolStatus"),s=So,B=zo,p=Ho;return u(),w("div",pi,[o("div",fi,[o("div",gi,[bi,o("div",{class:"remove",onClick:t[0]||(t[0]=jo(L=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",yi,[hi,o("div",null,[o("div",{class:Ne(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:t[1]||(t[1]=L=>e.onlyToken("only-a-b"))},[o("span",null,m(e.needReverse?(g=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:g.symbol:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.symbol)+" + "+m(e.needReverse?(U=(D=e.positionInfo)==null?void 0:D.token_a)==null?void 0:U.symbol:(d=($=e.positionInfo)==null?void 0:$.token_b)==null?void 0:d.symbol),1)],2),o("div",{class:Ne(["only-a",e.isOnlyA?"active-only":""]),onClick:t[2]||(t[2]=L=>e.onlyToken("only-a"))},[o("span",null,m(e.needReverse?(ne=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ne.symbol:(K=(M=e.positionInfo)==null?void 0:M.token_a)==null?void 0:K.symbol)+" only",1),V(c,{placement:"bottom","arrow-point-at-center":""},{title:pe(()=>[ki]),default:pe(()=>[_i]),_:1})],2),o("div",{class:Ne(["only-b",e.isOnlyB?"active-only":""]),onClick:t[3]||(t[3]=L=>e.onlyToken("only-b"))},[o("span",null,m(e.needReverse?(ee=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:ee.symbol:(f=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:f.symbol)+" only",1),V(c,{placement:"bottom","arrow-point-at-center":""},{title:pe(()=>[wi]),default:pe(()=>[Ii]),_:1})],2)])]),o("div",{class:Ne(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(u(),w("div",Ai,[V(P,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=L=>e.fromCoinAmount=L),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[5]||(t[5]=L=>e.maxBtnSelect("fromCoin")),onOnHalf:t[6]||(t[6]=L=>e.halfBtnSelect("fromCoin")),onOnInput:t[7]||(t[7]=L=>{e.fromCoinAmount=L}),onOnFocus:t[8]||(t[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(u(),G(I,{key:0})):W("",!0)])):W("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(u(),w("div",$i,[V(P,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[9]||(t[9]=L=>e.toCoinAmount=L),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[10]||(t[10]=L=>e.maxBtnSelect("toCoin")),onOnHalf:t[11]||(t[11]=L=>e.halfBtnSelect("toCoin")),onOnInput:t[12]||(t[12]=L=>{e.toCoinAmount=L}),onOnFocus:t[13]||(t[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(u(),G(I,{key:0})):W("",!0)])):W("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(u(),G(l,{key:0})):W("",!0),(oe=e.positionInfo)!=null&&oe.is_pause?(u(),G(s,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:pe(()=>[Ci]),_:1})):e.wallet.connected?(u(),G(s,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:t[14]||(t[14]=L=>e.isShowAddModal=!0)},{default:pe(()=>[o("span",null,m(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(u(),G(s,{key:3,class:"big-btn liquidity-btn",onClick:t[15]||(t[15]=L=>e.wallet.setIsShowWalletModal(!0))},{default:pe(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),(((ie=e.positionInfo)==null?void 0:ie.quoteUSD)==0||Number((E=e.positionInfo)==null?void 0:E.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)&&!e.addLiquidityBtnDisabled?(u(),w(to,{key:4},[e.onlyTokenUSD<=1e4?(u(),w("div",Si,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(u(),w("div",Pi,m(e.onlyText),1)):W("",!0),o("div",Ti,[Ni,e.calculateLoading?(u(),G(B,{key:1,paragraph:!1,active:""})):(u(),w("span",Ri,m(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:C(q))(e.totalAmountUSD,2)}`),1))]),o("div",qi,[Bi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),w("span",Di,m(e.shareOfPool)+"%",1)):(u(),G(B,{key:1,paragraph:!1,active:""}))]),o("div",Li,[Ui,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),w("span",Fi,m(("addCommom"in e?e.addCommom:C(q))(e.minimumReceivedLP))+" "+m(e.needReverse?(x=e.toCoin)==null?void 0:x.symbol:(fe=e.fromCoin)==null?void 0:fe.symbol)+"-"+m(e.needReverse?(ge=e.fromCoin)==null?void 0:ge.symbol:(ae=e.toCoin)==null?void 0:ae.symbol),1)):(u(),G(B,{key:1,paragraph:!1,active:""}))])])):W("",!0)],64)):W("",!0),e.isShowAddModal?(u(),G(p,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:t[16]||(t[16]=L=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):W("",!0)])}const Oi=je(ci,[["render",Mi],["__scopeId","data-v-c311577c"]]),Vi=Je({components:{AutoPoolRemoveModal:Yo,AutoPoolV2PoolStatus:ln},setup(){const e=Ro(),t=h(()=>e),j=bo(),z=h(()=>j),N=h(()=>p.value.slippage),S=h(()=>z.value.chainName),c=wn(),P=h(()=>c),I=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],l=_(25),s=oo(),B=Ye(),p=h(()=>B),n=h(()=>(console.log(p.value.positionInfoObj[s.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),p.value.positionInfoObj[s.params.id])),v=h(()=>{var i;return(i=n.value)==null?void 0:i.needReverse}),r=_(),g=_(),$=_(!1),d=_(),D=h(()=>{var i;return(i=n.value)==null?void 0:i.myLiquidity}),U=_(!0),M=h(()=>S.value?Xo(S.value):{}),K=_(),se=_(),ne=Jo("Sui"),b=_(""),f=_(""),H=_("--"),ee=_(!1),oe=_(!1),ie=_(),E=_(!0),x=_(),fe=no(),ge=h(()=>fe),ae=h(()=>ge.value.RATES),L=_(!1),X=async()=>{if(U.value||!n.value)return;se.value=!1,L.value=!0;const i=n.value.autoPoolPositionInfo.tick_lower_index,R=n.value.autoPoolPositionInfo.tick_upper_index,J=ze.sqrtPriceX64ToTickIndex(new ve(n.value.current_sqrt_price));J<i&&(v.value?ee.value=!0:oe.value=!0),J>R&&(v.value?oe.value=!0:ee.value=!0);let le;if(console.log(b.value||f.value,"#fromCoinAmount.value || toCoinAmount.value"),b.value||f.value){E.value?le=new a(b.value).mul(Math.pow(10,r.value.decimals)).toString():le=new a(f.value).mul(Math.pow(10,g.value.decimals)).toString();let Q,ce=E.value;if(k.value||Z.value){k.value?Number(b.value)/Number(y.value):Number(f.value)/Number(y.value);const te=await ne.calculateRemoveSwapAmount({lowerTick:i,upperTick:R,curSqrtPrice:new ve(n.value.current_sqrt_price),fix_amount_a:ce,receiveAmount:le,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:k.value?r.value.decimals:g.value.decimals,liquidity:b.value==y.value||f.value==y.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:le});if(console.log(te,"###swapResult"),te){if(te.request_id!==le)return;K.value=te.is_exceed,le=new ve(te.swapOutAmount),Q=n.value.current_sqrt_price,ie.value={swap_amount:te.swapInAmount,liquidity:te.liquidity,a2b:!ce,route_obj:te.route_obj},ce=!ce;const Ee=n.value.token_a.decimals,Ve=n.value.token_b.decimals,Be=new a(te.swapInAmount).div(new a(Math.pow(10,Ee))).toString(),io=T(new a(te.swapOutAmountLimit).div(new a(Math.pow(10,Ve))).toString(),Ve),Ae=v.value?n.value.token_b.symbol:n.value.token_a.symbol,Ue=v.value?n.value.token_a.symbol:n.value.token_b.symbol;x.value=b.value==y.value||f.value==y.value?`To withdraw ${q(k.value?b.value:f.value)} ${k.value?Ae:Ue},
          ${q(k.value?n.value.amountB:n.value.amountA)} ${k.value?Ue:Ae} 
           in the pool will be traded for ${Be} ${k.value?Ae:Ue}`:`To withdraw ${q(k.value?b.value:f.value)} ${k.value?Ae:Ue},
          ${q(Be)} ${k.value?Ue:Ae}  in the pool will be traded for ${q(io)} ${k.value?Ae:Ue}`}else{se.value=!0,x.value="";return}}else K.value=!1,Q=n.value.current_sqrt_price,le=new ve(le);console.log(Q,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:de,tokenMaxA:Y,tokenMaxB:O}=M.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:r.value,tokenB:g.value,lowerTick:i,upperTick:R,coinAmount:le,iscoinA:ce,roundUp:!1,slippage:Number(N.value)/100,curSqrtPrice:new ve(Q)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(O.toString(),Y.toString(),n.value,"###323"),!k.value&&!Z.value&&(E.value?f.value=Number(O)>0?O:"":b.value=Number(Y)>0?Y:""),(k.value||Z.value)&&(Number(b.value)>=Number(y.value)||Number(f.value)>=Number(y.value))){console.log("执行这里了吗"),d.value=n.value.myLiquidity;const te=new a(100);H.value=new a(n.value.myLiquidity).mul(new a(Math.pow(10,n.value.lpInfo.decimals))).toString(),ue.value=de.toString(),l.value=te.toNumber()}else{console.log("执行这里了吗1");const te=$o.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},de.toString()),Ee=new a(te).div(new a(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log(Ee,D.value,de.toString(),n.value.liquidity,n.value.total_supply,"##lpBalance.value");const Ve=new a(Ee).div(new a(D.value)).mul(100);console.log(Ee,D.value,Ve.toNumber(),"lp##"),d.value=new a(D.value).mul(Ve.div(100)).toString(),H.value=te,ue.value=de.toString(),l.value=Ve.toNumber()}L.value=!1}},ue=_(),_e=h(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountA}),be=h(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountB}),k=_(!1),Z=_(!1),Re=h(()=>{var ce,de,Y,O;const i=(de=ae.value[(ce=r==null?void 0:r.value)==null?void 0:ce.address])==null?void 0:de.price,R=(O=ae.value[(Y=g==null?void 0:g.value)==null?void 0:Y.address])==null?void 0:O.price;console.log(i,R,b.value,f.value,"####totalWithdraw");let J=b.value!=="--"&&b.value!==""?b.value:0,le=f.value!=="--"&&f.value!==""?f.value:0,Q;return i&&R&&(k.value||Z.value?Q=new a(k.value?J:le).mul(new a(k.value?i:R)).toString():(Q=new a(J).mul(new a(i)).add(new a(le).mul(new a(R))).toString(),console.log(Q,"result##"))),Q>0&&Q<.01?"<$0.01":`$${q(T(Q,2))}`}),he=async i=>{var Ee,Ve,Be,io,Ae,Ue,wo,Bo,Do,Lo,Uo;if(!U.value)return;U.value=!0,se.value=!1,(Ve=(Ee=n.value)==null?void 0:Ee.token_a)==null||Ve.decimals,(io=(Be=n.value)==null?void 0:Be.token_b)==null||io.decimals;const R=(Ae=n.value)==null?void 0:Ae.tick_lower_index,J=(Ue=n.value)==null?void 0:Ue.tick_upper_index;ze.tickIndexToSqrtPriceX64(R),ze.tickIndexToSqrtPriceX64(J);const le=(Bo=(wo=n.value)==null?void 0:wo.autoPoolPositionInfo)==null?void 0:Bo.tick_lower_index,Q=(Lo=(Do=n.value)==null?void 0:Do.autoPoolPositionInfo)==null?void 0:Lo.tick_upper_index,ce=ze.sqrtPriceX64ToTickIndex(new ve((Uo=n==null?void 0:n.value)==null?void 0:Uo.current_sqrt_price));ce<le&&(v.value?ee.value=!0:oe.value=!0),ce>Q&&(v.value?oe.value=!0:ee.value=!0);let de="",Y,O;console.log(i.value,"##item.value"),console.log(O,"##coinAmount");let te=E.value;if(console.log("执行##"),k.value||Z.value&&!ee.value&&!oe.value){if(k.value){const xe=new a(y.value).mul(Math.pow(10,r.value.decimals)).mul(i.value).toString();console.log(xe,"##amount"),O=T(xe,0),b.value=T(new a(y.value).mul(i.value).toString(),r.value.decimals)}if(Z.value){const xe=new a(y.value).mul(i.value).mul(Math.pow(10,g.value.decimals)).toString();O=T(xe,0),f.value=T(new a(y.value).mul(i.value).toString(),g.value.decimals)}console.log(b.value,"##fromCoinAmount.value");const Fe=await ne.calculateRemoveSwapAmount({lowerTick:R,upperTick:J,curSqrtPrice:new ve(n.value.current_sqrt_price),fix_amount_a:te,receiveAmount:O,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:k.value?r.value.decimals:g.value.decimals,liquidity:i.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:O});if(console.log(Fe,"###swapResult536"),Fe){if(Fe.request_id!==O)return;K.value=Fe.is_exceed,O=new ve(Fe.swapOutAmount),n.value.current_sqrt_price,ie.value={swap_amount:Fe.swapInAmount,liquidity:Fe.liquidity,route_obj:Fe.route_obj,a2b:!te},te=!te;const xe=n.value.token_a.decimals,Fo=n.value.token_b.decimals,un=new a(Fe.swapInAmount).div(new a(Math.pow(10,xe))).toString(),Mo=T(new a(Fe.swapOutAmountLimit).div(new a(Math.pow(10,Fo))).toString(),Fo),lo=v.value?n.value.token_b.symbol:n.value.token_a.symbol,ao=v.value?n.value.token_a.symbol:n.value.token_b.symbol;x.value=i.value==1?`To withdraw ${q(k.value?b.value:f.value)} ${k.value?lo:ao},
          ${q(k.value?n.value.amountB:n.value.amountA)} ${k.value?ao:lo}  in the pool will be traded for ${q(Mo)} ${k.value?lo:ao}`:`To withdraw ${q(k.value?b.value:f.value)} ${k.value?lo:ao},
          ${q(un)} ${k.value?ao:lo}  in the pool will be traded for ${q(Mo)} ${k.value?lo:ao}`,de=Fe.liquidity}else n.value.current_sqrt_price,O=new ve(O),x.value="",se.value=!0;console.log(Y,"result###"),H.value=new a(n.value.myLiquidity).mul(new a(i.value)).toString(),console.log(n.value,n.value.liquidity,de,H.value,"###positionInfo.value.liquidity"),console.log(H.value,"##lpTokenAmount.value"),d.value=new a(H.value),ue.value=de}else{K.value=!1;const Fe=new a(_e.value).mul(Math.pow(10,r.value.decimals)).mul(i.value).toString();O=T(Fe,0),b.value=T(new a(_e.value).mul(i.value).toString(),r.value.decimals);const xe=new a(be.value).mul(i.value).mul(Math.pow(10,g.value.decimals)).toString();O=T(xe,0),f.value=T(new a(be.value).mul(i.value).toString(),g.value.decimals),n.value.current_sqrt_price,O=new ve(O),i.value!==1?Y=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(i.value).toString():Y=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),d.value=new a(Y).div(Math.pow(10,n.value.lpInfo.decimals)),de=$o.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},Y),H.value=T(Y,0),ue.value=T(de,0),console.log(de,"###newLiquidity525")}};$e(l,vo((i,R)=>{i!==R&&(Number(i)>100?l.value=100:i&&n.value?(console.log("687===>"),l.value=i,he({value:l.value/100})):(b.value="",f.value=""))},300)),$e(()=>b.value,vo((i,R)=>{i?X():!k.value&&!Z.value&&(f.value="",l.value=0)},500),{immediate:!0}),$e(()=>f.value,vo((i,R)=>{i?X():!k.value&&!Z.value&&(b.value="",l.value=0)},500),{immediate:!0});const De=To(),{setIsShowSuccess:Ce,setIsShowRejected:Le,setIsShowWaiting:Ie,setTransactionDesc:Oe,setTransactionTxid:Ke,setPositiomNum:ro,setTransactionDescText:me}=j,Se=_(!1),{t:qe}=Co(),co=async()=>{var Ee,Ve;Se.value=!0,Ke("");const i=Number(b.value)>0?`${q(b.value,r.value.decimals)} ${r.value.symbol}`:"",R=Number(f.value)>0?`${q(f.value,g.value.decimals)} ${g.value.symbol}`:"";console.log(i,R,"###transactionDescTo"),Oe(qe("tips.removeLiquidiyText",{from:v.value?R:i,and:Number(b.value)>0&&Number(f.value)>0?"and":"",to:v.value?i:R})),Ie(!0);const J=qe("modal.removeLiquidityText2");me(J);const le=n.value.autoPoolPositionInfo.tick_lower_index,Q=n.value.autoPoolPositionInfo.tick_upper_index,ce=ze.tickIndexToSqrtPriceX64(le),de=ze.tickIndexToSqrtPriceX64(Q),Y=n.value.rewarderInfo.map(Be=>Be.coinAddress);console.log(H.value,"##lpTokenAmount.value431");let O;E.value?O=new a(b.value).mul(Math.pow(10,r.value.decimals)).toString():O=new a(f.value).mul(Math.pow(10,g.value.decimals)).toString(),console.log();const te={lowerSqrtPrice:ce,upperSqrtPrice:de,lpTokenAmount:H.value,liquidity:ue.value,curSqrtPrice:new ve(n.value.object.current_sqrt_price),slippage:Number(N.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:Y,swapParams:ie.value,fix_amount_a:E.value,isOnlyA:!ee.value&&!oe.value?k.value:!1,isOnlyB:!oe.value&&!ee.value?Z.value:!1,lowerTick:le,upperTick:Q,receiveAmount:O,sliderVal:l.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity};try{const Be=await ne.remove(te);console.log(Be,"移除流动性payload");const io=await t.value.currentWallet.signAndExecuteTransactionBlock(Be);let Ae=M.value.handleTx(io);if(console.log("0331###remove###tx####",Ae),Ae&&Ae.hash){Ke(Ae.hash),Ie(!1),Ce(!0);const Ue={title:qe("common.removeLiquidity"),desc:"",hash:Ae.hash,descTransactions:`Remove ${i} ${Number(b.value)>0&&Number(f.value)>0?"and":""} ${R} from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${b.value} ${(Ee=r.value)==null?void 0:Ee.symbol} and ${f.value} ${(Ve=g.value)==null?void 0:Ve.symbol}`};Ue.res=Ae.res,M.value.showTransitionPending(Ue),await M.value.watchTransaction(Ue)&&(b.value="",f.value="",d.value="",l.value=0,setTimeout(()=>{B.updatePositionItem(n.value.id),M.value.getAccount(t.value.address)},1e3),Number(l.value)==100&&s.name=="auto-pool-detail"&&De.push("/vaults"))}else Ie(!1),Le(!0);Se.value=!1}catch(Be){console.log("Remove error",Be),Se.value=!1,Ie(!1),Le(!0)}};$e(()=>n.value,(i,R)=>{i&&!He(i)&&(r.value=i==null?void 0:i.token_a,g.value=i==null?void 0:i.token_b,console.log("触发###"),(!R||R&&R.address!==i.address)&&(l.value=l.value>0?l.value:25,he({value:l.value/100})),R&&R.current_sqrt_price!==i.current_sqrt_price&&(U.value?he({value:l.value/100}):X()))},{immediate:!0});const po=h(()=>{const i=Number(d.value)>Number(D.value);return!b.value&&!f.value||!d.value||d.value<=0||!b.value&&k.value||!f.value&&Z.value?qe("button.enterAmount"):i?"Invalid Amount":K.value?qe("button.insufficientLiquidity"):se.value?qe("button.enterAmount"):(console.log(b.value,y.value,f.value,"856##"),k.value&&Number(b.value)>Number(y.value)||Z.value&&Number(f.value)>Number(y.value)?"Invalid Amount":qe("button.remove"))}),ko=h(()=>{const i=Number(d.value)>Number(D.value);return!!(!b.value&&!f.value||Number(b.value)<=0&&k.value||Number(f.value)<=0&&Z.value||!d.value||d.value<=0||i||K.value||ke.value!=="STATUS_RUNNING"||se.value||k.value&&Number(b.value)>Number(y.value)||Z.value&&Number(f.value)>Number(y.value))}),_o=i=>(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||uo("/image/coins/sui-unknown.png"),A=i=>{b.value="",f.value="",U.value=!0,x.value="",i=="only-a"?(k.value=!k.value,Z.value=!1,E.value=!0):(Z.value=!Z.value,k.value=!1,E.value=!1)},F=i=>{U.value=!0,l.value=100,i==="fromCoin"?E.value=!0:E.value=!1},re=i=>{U.value=!0,l.value=50,i==="fromCoin"?E.value=!0:E.value=!1},y=_(),Pe=async()=>{const i=n.value.token_a.decimals,R=n.value.token_b.decimals,J=new a(_e.value).mul(new a(Math.pow(10,i))).toNumber(),le=new a(be.value).mul(new a(Math.pow(10,R))).toNumber(),Q=k.value?le:J,ce=k.value?g.value.address===n.value.token_a.address:r.value.address===n.value.token_a.address;try{const de=await P.value.swapRouterContract.getSwapRouter(k.value?g:r,k.value?r:g,Q,!0,Number(N.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),Y=new a(de.amountOut);y.value=Y.sub(Y.mul(Number(N.value)/100)).add(new a(k.value?_e.value:be.value)).toString()}catch{if(k.value||Z.value){console.log(Q,"##receiveAmount");let Y=await M.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:ce,byAmountIn:!0,amount:Q});console.log(Y,Y.estimatedAmountOut,i,R,"##preSwapRes");const O=new a(Y.estimatedAmountOut);y.value=O.sub(O.mul(Number(N.value)/100)).add(new a(k.value?_e.value:be.value)).toString(),console.log("转换之后数量:",Y.estimatedAmountOut),console.log("转换之后滑点数量:",O.mul(Number(N.value)/100).toNumber()),console.log("原有数量减滑点数量:",O.sub(O.mul(Number(N.value)/100)).toNumber()),console.log("fromCoin原有数量:",_e.value),console.log(y.value,"###onlyTokenBalance.value"),k.value?b.value=T(new a(y.value).mul(l.value/100).toString(),r.value.decimals):f.value=T(new a(y.value).mul(l.value/100).toString(),g.value.decimals),he({value:l.value/100})}}he({value:l.value/100})};$e(()=>[k.value,Z.value,_e.value,be.value],([i,R])=>{i||R?Pe():he({value:l.value/100})},{immediate:!0});const ye=i=>`${i}%`,ke=h(()=>p.value.currentAutoPoolStatus),we=_(),Te=()=>{we.value=window.setInterval(()=>{(b.value||f.value)&&!U.value?X():he({value:l.value/100})},2e4)};return fo(()=>{Te()}),Po(()=>{window.clearInterval(we.value)}),{removeLiquidityBtnText:po,removeLiquidityBtnDisabled:ko,wallet:t,ratioArr:I,positionInfo:n,isShowRemoveModal:$,needReverse:v,fromCoin:r,toCoin:g,lpAmount:d,lpBalance:D,sliderVal:l,sFixD:T,isSlider:U,fromCoinAmount:b,toCoinAmount:f,setPercent:he,toRemove:co,addCommom:q,getCoinIcon:_o,isOnlyA:k,isOnlyB:Z,onlyToken:A,fixedFromCoin:E,maxBtnSelect:F,halfBtnSelect:re,fromCoinBlance:_e,toCoinBlance:be,showFromCoinLock:ee,showToCoinLock:oe,removeText:x,onlyTokenBalance:y,totalWithdraw:Re,formatter:ye,currentAutoPoolStatus:ke,calculateLoading:L}}});const ho=e=>(Xe("data-v-86311965"),e=e(),Ze(),e),Ei={class:"auto-pool-add"},Wi={class:"auto-pool-add-content"},ji={class:"liquidity-action-tab"},zi=ho(()=>o("div",{class:"remove tab-active"},"Remove",-1)),Ji={key:0,class:"card-item"},Xi={key:1,class:"card-item"},Zi={class:"remove-ratio"},Qi={class:"remove-ratio-select"},Gi={key:0,class:"ratio"},Hi={key:1,class:"ratio"},Yi={class:"ratio-list"},Ki=["onClick"],xi=ho(()=>o("span",null,"Pool Closed",-1)),el={key:4,class:"remove-info"},ol={key:0,class:"remove-text total-amount"},nl={class:"total-amount"},tl=ho(()=>o("span",null,"Total Withdraw",-1)),sl={key:0},il={class:"total-amount"},ll=ho(()=>o("span",null,"LP Burn Amount",-1)),al={key:0};function ul(e,t,j,z,N,S){var n,v,r,g,$;const c=Qo,P=Go,I=Wo,l=so("AutoPoolV2PoolStatus"),s=So,B=zo,p=Yo;return u(),w("div",Ei,[o("div",Wi,[o("div",ji,[o("div",{class:"increase",onClick:t[0]||(t[0]=jo(d=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),zi]),o("div",{class:Ne(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(u(),w("div",Ji,[V(c,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=d=>e.fromCoinAmount=d),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[2]||(t[2]=d=>e.maxBtnSelect("fromCoin")),onOnHalf:t[3]||(t[3]=d=>e.halfBtnSelect("fromCoin")),onOnInput:t[4]||(t[4]=d=>{e.isSlider=!1,e.fromCoinAmount=d}),onOnFocus:t[5]||(t[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(u(),G(P,{key:0})):W("",!0)])):W("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(u(),w("div",Xi,[V(c,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=d=>e.toCoinAmount=d),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[7]||(t[7]=d=>e.maxBtnSelect("toCoin")),onOnHalf:t[8]||(t[8]=d=>e.halfBtnSelect("toCoin")),onOnInput:t[9]||(t[9]=d=>{e.isSlider=!1,e.toCoinAmount=d}),onOnFocus:t[10]||(t[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(u(),G(P,{key:0})):W("",!0)])):W("",!0)],2),o("div",Zi,[o("div",Qi,[Number(e.lpBalance)>=Number(e.lpAmount)?(u(),w("div",Gi,m(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:C(T))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:C(T))(e.sliderVal,2))+"% ",1)):(u(),w("div",Hi,"--")),o("div",Yi,[(u(!0),w(to,null,Eo(e.ratioArr,(d,D)=>(u(),w("div",{key:D,class:Ne(["ratio-item",e.sliderVal==d.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=d.value}},m(d.name),11,Ki))),128))])]),V(I,{value:e.sliderVal,"onUpdate:value":t[11]||(t[11]=d=>e.sliderVal=d),"tip-formatter":e.formatter,onChange:t[12]||(t[12]=d=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(u(),G(l,{key:0})):W("",!0),(n=e.positionInfo)!=null&&n.is_pause?(u(),G(s,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:pe(()=>[xi]),_:1})):e.wallet.connected?(u(),G(s,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:t[13]||(t[13]=d=>e.toRemove())},{default:pe(()=>[o("span",null,m(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(u(),G(s,{key:3,class:"big-btn liquidity-btn",onClick:t[14]||(t[14]=d=>e.wallet.setIsShowWalletModal(!0))},{default:pe(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?W("",!0):(u(),w("div",el,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(u(),w("div",ol,m(e.removeText),1)):W("",!0),o("div",nl,[tl,e.calculateLoading?(u(),G(B,{key:1,paragraph:!1,active:""})):(u(),w("span",sl,m(e.totalWithdraw),1))]),o("div",il,[ll,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),w("span",al,m(("addCommom"in e?e.addCommom:C(q))(("sFixD"in e?e.sFixD:C(T))(e.lpAmount,e.positionInfo.decimals)))+" "+m(e.needReverse?(v=e.toCoin)==null?void 0:v.symbol:(r=e.fromCoin)==null?void 0:r.symbol)+"-"+m(e.needReverse?(g=e.fromCoin)==null?void 0:g.symbol:($=e.toCoin)==null?void 0:$.symbol),1)):(u(),G(B,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(u(),G(p,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:t[15]||(t[15]=d=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):W("",!0)])}const rl=je(Vi,[["render",ul],["__scopeId","data-v-86311965"]]),dl=Je({components:{AutoPoolV2Info:xo,AutoPoolV2PositionRange:en,AutoPoolV2PoolComposition:nn,AutoPoolV2PoolLiquidity:tn,AutoPoolV2PoolAdd:Oi,AutoPoolV2PoolRemove:rl},setup(){const e=Ye();no();const t=bo(),j=h(()=>t),z=h(()=>e),N=oo(),S=_();$e(()=>[z.value.positionInfoObj,N.params.id],([l,s])=>{l&&!He(l)&&s&&(S.value=l[s],console.log(S.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=async()=>{console.log("重新获取数据"),e.getAutoPoolAPY(),e.getVault(N.params.id)},P=_();$e(()=>N.query.action,l=>{l&&(P.value=l)},{immediate:!0}),fo(()=>{e.getVault(N.params.id)}),h(()=>j.value.chainName),To();const I=h(()=>z.value.autoPoolLoading);return{clickRefresh:c,currentTab:P,positionInfo:S,autoPoolLoading:I}}});const vl={class:"auto-pool-detail-v2"},ml={class:"detail-top"},cl={class:"detail-bottom pc-detail"},pl={class:"detail-bottom-left"},fl={class:"detail-bottom-right"},gl={class:"h5-detail"},bl={key:0,class:"loading-global"};function yl(e,t,j,z,N,S){const c=En,P=xo,I=en,l=nn,s=tn,B=so("AutoPoolV2PoolAdd"),p=so("AutoPoolV2PoolRemove"),n=bn;return u(),w("div",vl,[o("div",ml,[V(c,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),V(P)]),o("div",cl,[o("div",pl,[V(I),V(l),V(s)]),o("div",fl,[e.currentTab=="deposit"?(u(),G(B,{key:0,onChangeCurrentTab:t[0]||(t[0]=v=>e.currentTab="remove")})):(u(),G(p,{key:1,onChangeCurrentTab:t[1]||(t[1]=v=>e.currentTab="deposit")}))])]),o("div",gl,[e.currentTab=="deposit"?(u(),G(B,{key:0,onChangeCurrentTab:t[2]||(t[2]=v=>e.currentTab="remove")})):(u(),G(p,{key:1,onChangeCurrentTab:t[3]||(t[3]=v=>e.currentTab="deposit")})),V(I),V(l),V(s)]),e.autoPoolLoading?(u(),w("div",bl,[V(n)])):W("",!0)])}const Wl=je(dl,[["render",yl],["__scopeId","data-v-3aa945f2"]]);export{Wl as default};
