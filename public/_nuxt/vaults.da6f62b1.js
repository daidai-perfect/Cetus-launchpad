import{s as As,a as q,u as rs,d as us,c as z}from"./pool.536b5e88.js";import{a as X,l as h,r as C,e as Z,o as t,f as n,h as o,i as p,v as m,u as I,S as Fs,p as ns,k as ls,j as D,F as M,E as as,M as Is,b as _s,s as Vs,w as is,t as W,B as hs,y as Os,z as cs,A as G,x as U,H as Ns,q as Q,K as Ws,Q as Es,c as zs}from"./entry.d648dbe8.js";/* empty css              */import{a as x,u as vs}from"./sha256.00f5695d.js";import{_ as Bs}from"./auto-pool-apy-tips.341f1368.js";/* empty css              */import{u as Hs}from"./farms.7178b263.js";import{_ as Js}from"./upgrade-loading.dad17989.js";import{_ as Ts}from"./token-warning.c62bcb87.js";import{i as ts}from"./import-icon.de3e6c66.js";import{u as ds}from"./autoPool.ff84d3be.js";import{_ as js}from"./img-connect-wallet_2x.aa76fd18.js";import{_ as Ks}from"./img-no-Positions_2x.6dc7e040.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Qs=X({props:{list:{type:Array,default:()=>[]},listLoading:{type:Boolean,default:!1},totalTVL:{type:Number,default:0}},setup(s){const l=x(),f=h(()=>l),g=C(!1);return{wallet:f,sFixD:As,loading:g,addCommom:q}}});const ps=s=>(ns("data-v-eb77f56f"),s=s(),ls(),s),Gs={class:"farms-banner-bg"},Xs={class:"vaults-banner"},Zs={class:"vaults-banner-center"},xs=ps(()=>o("div",{class:"title"},"Vaults",-1)),so=ps(()=>o("div",{class:"desc"},"Harvesting, compounding & rebalancing is automated.Stake your tokens to earn.",-1)),oo={class:"claim-rewards"},eo={class:"claim-title"},to=ps(()=>o("span",null,"Total Value Locked",-1)),no={key:0,class:"loading-spin"},lo={key:1};function ao(s,l,f,g,S,b){const r=Fs;return t(),n("div",Gs,[o("div",Xs,[o("div",Zs,[xs,so,o("div",oo,[o("div",eo,[to,s.listLoading?(t(),n("span",no,[p(r)])):(t(),n("span",lo,"$"+m(("addCommom"in s?s.addCommom:I(q))(("sFixD"in s?s.sFixD:I(As))(s.totalTVL||0,2))),1))])])])])])}const io=Z(Qs,[["render",ao],["__scopeId","data-v-eb77f56f"]]),co=X({setup(){const s=C(!1),l=x(),f=h(()=>l),g=Hs(),S=h(()=>g),b=h(()=>S.value.farmsPoolList);return{isShowMore:s,wallet:f,walletStore:l,farmsPoolList:b}}});const ss=s=>(ns("data-v-6c925870"),s=s(),ls(),s),ro={class:"vaults-table"},uo=ss(()=>o("th",null,"Vaults",-1)),_o=ss(()=>o("th",null,"TVL",-1)),ho=ss(()=>o("th",null,"Your Deposit",-1)),vo=ss(()=>o("th",null,"Actions",-1)),po=ss(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),go={class:"pool"},ko={class:"staked-tvl"},mo={class:"apr"},fo={class:"my-staked"},bo={class:"actions"},yo=ss(()=>o("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function $o(s,l,f,g,S,b){const r=Bs,_=Is;return t(),n("div",ro,[o("table",null,[o("thead",null,[o("tr",null,[uo,_o,o("th",null,[o("span",null,[D("APY "),p(r)])]),ho,vo]),po]),o("tbody",null,[(t(),n(M,null,as(4,(y,V)=>(t(),n(M,{key:V},[o("tr",null,[o("td",null,[o("div",go,[p(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),p(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",ko,[p(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",mo,[o("span",null,[p(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),o("td",null,[o("div",fo,[p(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",bo,[p(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),yo],64))),64))])])])}const wo=Z(co,[["render",$o],["__scopeId","data-v-6c925870"]]),So=X({props:{pItem:{type:Object,default:()=>({})}},setup(s){const l=vs(),f=h(()=>l),g=rs(),S=h(()=>g),b=d=>{var i;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((i=S.value.tokensObj[d==null?void 0:d.address])==null?void 0:i.logo_url)||(f.value.theme==="default"?ts("/image/coins/unknown.png"):ts("/image/coins/sui-unknown.png"))},r=C(!0),_=ds(),y=h(()=>_),V=h(()=>y.value.positionInfoObj[s.pItem.id]),P=_s(),v=(d,i)=>{P.push(`/vaults-detail/${d.id}?action=${i}`)},e=d=>{const i=d.needReverse,A=i?d.token_b.address:d.token_a.address,R=i?d.token_a.address:d.token_b.address;P.push(`/swap?from=${A}&to=${R}`)},$=x(),L=h(()=>$);return console.log(s.pItem,"pItem##"),{getCoinIcon:b,direct:r,decimalUi:us,addCommom:q,autoPool:y,positionInfo:V,toAutoPoolDetail:v,toSwap:e,wallet:L}}});const H=s=>(ns("data-v-12010e8f"),s=s(),ls(),s),Lo={class:"vaults-position-card"},Co={class:"auto-position-card-conetent"},Po={key:0,class:"no-vaults-data no-data"},Ao=H(()=>o("img",{src:js},null,-1)),Io={class:"item lp-tokens"},Vo={alt:""},Oo={class:"right"},No=H(()=>o("div",{class:"top"},"Your LP Tokens",-1)),Bo={class:"bottom"},To={key:0,class:"lp-num"},jo={key:1,class:"lp-num"},Ro={class:"item yourBanlance"},Do=H(()=>o("div",{class:"top"},"Pooled assets",-1)),qo={class:"bottom"},Uo={class:"token-info"},Mo={class:"token-num"},Yo={alt:""},Fo={key:0},Wo={key:1},Eo=H(()=>o("p",null,"--",-1)),zo=[Eo],Ho={class:"token-num"},Jo={alt:""},Ko={key:0},Qo={key:1},Go=H(()=>o("p",null,"--",-1)),Xo=[Go],Zo={class:"item share"},xo=H(()=>o("div",{class:"top"},"Share of pool",-1)),se={class:"bottom"},oe={key:0},ee={key:1},te=H(()=>o("div",{class:"action"},[o("div",null,[o("div",{class:"remove-btn"}," Details> ")])],-1));function ne(s,l,f,g,S,b){var y,V,P,v,e,$,L,d,i,A;const r=hs,_=Vs("image");return t(),n("div",Lo,[o("div",Co,[s.wallet.address?(t(),n("div",{key:1,class:"auto-position-card",onClick:l[1]||(l[1]=R=>s.toAutoPoolDetail(s.pItem,"deposit"))},[o("div",Io,[W(o("img",Vo,null,512),[[_,(V=(y=s.positionInfo)==null?void 0:y.lpInfo)==null?void 0:V.logo_url]]),o("div",Oo,[No,o("div",Bo,[(P=s.wallet)!=null&&P.connected?(t(),n("div",To,m(("addCommom"in s?s.addCommom:I(q))(("decimalUi"in s?s.decimalUi:I(us))((v=s.positionInfo)==null?void 0:v.myLiquidity),4))+" LP",1)):(t(),n("div",jo,"--"))])])]),o("div",Ro,[Do,o("div",qo,[o("div",Uo,[o("div",Mo,[W(o("img",Yo,null,512),[[_,s.pItem.needReverse?s.pItem.coinB.logo_url:s.pItem.coinA.logo_url]]),(e=s.wallet)!=null&&e.connected?(t(),n("div",Fo,[o("span",null,m(("addCommom"in s?s.addCommom:I(q))(($=s.positionInfo)==null?void 0:$.amountA)),1)])):(t(),n("div",Wo,zo))]),o("div",Ho,[W(o("img",Jo,null,512),[[_,s.pItem.needReverse?s.pItem.coinA.logo_url:s.pItem.coinB.logo_url]]),(L=s.wallet)!=null&&L.connected?(t(),n("div",Ko,[o("span",null,m(("addCommom"in s?s.addCommom:I(q))((d=s.positionInfo)==null?void 0:d.amountB)),1)])):(t(),n("div",Qo,Xo))])])])]),o("div",Zo,[xo,o("div",se,[(i=s.wallet)!=null&&i.connected?(t(),n("span",oe,m((A=s.positionInfo)==null?void 0:A.myShare)+"%",1)):(t(),n("span",ee,"--%"))])]),te])):(t(),n("div",Po,[Ao,p(r,{class:"add-liquidity-btn",onClick:l[0]||(l[0]=R=>s.wallet.setIsShowWalletModal(!0))},{default:is(()=>[D("Connect Wallet")]),_:1})]))])])}const le=Z(So,[["render",ne],["__scopeId","data-v-12010e8f"]]),ae=X({components:{TokenWarning:Ts},props:{list:{type:Array,default:()=>[]}},setup(){const{t:s}=Os(),l=vs(),f=h(()=>l),g=rs(),S=h(()=>g),b=a=>{var O;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((O=S.value.tokensObj[a==null?void 0:a.address])==null?void 0:O.logo_url)||(f.value.theme==="default"?ts("/image/coins/unknown.png"):ts("/image/coins/sui-unknown.png"))},r=h(()=>S.value.tokensObj),_=h(()=>f.value.statsData),y=h(()=>f.value.theme),V=ds(),P=h(()=>V),v=C({}),e=a=>{v.value[a]?v.value[a]=!1:v.value[a]=!0,console.log(v.value,"##isShowPosition.value")},$=h(()=>P.value.positionInfoObj),L=x(),d=h(()=>L),i=C(!1),A=_s(),R=(a,O)=>{A.push(`/vaults-detail/${a.id}?action=${O}`)},T=a=>{const O=a.needReverse,Y=O?a.token_b.address:a.token_a.address,F=O?a.token_a.address:a.token_b.address;A.push(`/swap?from=${Y}&to=${F}`)},j=C(!0);return{router:A,getCoinIcon:b,tokensObj:r,t:s,statsData:_,checkNullObj:z,addCommom:q,importIcon:ts,theme:y,isShowPosition:v,togglePosition:e,positionInfo:$,wallet:d,isShowDetail:i,toAutoPoolDetail:R,toSwap:T,direct:j}}});const B=s=>(ns("data-v-f5390988"),s=s(),ls(),s),ie={class:"vaults-table-contianer"},de={class:"table pc-pool-item"},ce={class:"table-header"},re={class:"table-tr"},ue=B(()=>o("th",null,"Vaults",-1)),_e=B(()=>o("th",null,"TVL",-1)),he=B(()=>o("th",null,"Your Deposit",-1)),ve=B(()=>o("th",null,"Actions",-1)),pe=B(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),ge={class:"table-body"},ke=["onClick"],me={class:"token"},fe={class:"img-box"},be={class:"img-box img-last-box"},ye={class:"name"},$e={class:"top"},we={class:"token-name"},Se={class:"tokena"},Le={class:"tokenb"},Ce={class:"fee-warning"},Pe={class:"fee-tier-top"},Ae={key:0},Ie={class:"skeleton-box"},Ve={key:1},Oe={key:2},Ne={class:"skeleton-box"},Be={key:3},Te={key:4},je={class:"skeleton-box"},Re={key:5},De={class:"show-position"},qe={class:"svg-icon"},Ue=B(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Me=[Ue],Ye={key:0,class:"table-tr view-table-tr"},Fe={colspan:"5"},We=B(()=>o("td",null,null,-1)),Ee=B(()=>o("tr",{style:{height:"8px",background:"unset"}},null,-1)),ze={class:"h5-pool-item"},He={class:"token"},Je={class:"img-box"},Ke={key:0,class:"pool-warning"},Qe={class:"img-box img-last-box"},Ge={key:0,class:"pool-warning"},Xe={class:"name"},Ze={class:"top"},xe={class:"token-name"},st={class:"tokena"},ot={class:"tokenb"},et={class:"fee-warning"},tt={class:"fee-tier-top"},nt={class:"bottom"},lt={class:"row"},at=B(()=>o("div",{class:"left"},"TVL",-1)),it={key:0,class:"right"},dt={key:1,class:"right"},ct={class:"row"},rt=B(()=>o("div",{class:"left"},"APY",-1)),ut={key:0,class:"right"},_t={key:1,class:"right theme-right"},ht={class:"row"},vt=B(()=>o("div",{class:"left"},"Your Deposit",-1)),pt={key:0,class:"right"},gt={key:1,class:"right"},kt=["onClick"],mt=B(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),ft=[mt],bt={key:0,class:"h5-auto-pool-details"},yt={class:"h5-item lp-tokens"},$t=B(()=>o("div",{class:"top"},"Your LP Tokens",-1)),wt={class:"bottom"},St={key:0,class:"lp-num"},Lt={key:1,class:"lp-num"},Ct={class:"h5-item share"},Pt=B(()=>o("div",{class:"top"},"Share",-1)),At={class:"bottom"},It={key:0},Vt={key:1},Ot={class:"h5-item yourBanlance"},Nt=B(()=>o("div",{class:"top"},"Your Balance",-1)),Bt={class:"bottom"},Tt={class:"token-info"},jt={class:"token-num"},Rt={alt:""},Dt={key:0},qt={key:1},Ut=B(()=>o("p",null,"--",-1)),Mt=[Ut],Yt={class:"token-num"},Ft={alt:""},Wt={key:0},Et={key:1},zt=B(()=>o("p",null,"--",-1)),Ht=[zt],Jt={class:"action"};function Kt(s,l,f,g,S,b){const r=Bs,_=Ts,y=Is,V=hs,P=le,v=Vs("image");return t(),n("div",ie,[o("table",de,[o("thead",ce,[o("tr",re,[ue,_e,o("th",null,[o("span",null,[D("APY "),p(r)])]),he,ve]),pe]),o("tbody",ge,[(t(!0),n(M,null,as(s.list,(e,$)=>{var L,d,i,A,R,T,j,a,O,Y,F;return t(),n(M,{key:$},[o("tr",{class:"table-tr",onClick:J=>s.togglePosition($)},[o("td",null,[o("div",me,[o("div",fe,[W(o("img",null,null,512),[[v,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),p(_,{address:e.needReverse?(d=e==null?void 0:e.coinB)==null?void 0:d.address:(L=e==null?void 0:e.coinA)==null?void 0:L.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",be,[W(o("img",null,null,512),[[v,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),p(_,{address:e.needReverse?(A=e.coinA)==null?void 0:A.address:(i=e==null?void 0:e.coinB)==null?void 0:i.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",ye,[o("div",$e,[o("p",we,[o("span",Se,m(e.needReverse?(T=e==null?void 0:e.coinB)==null?void 0:T.symbol:(R=e==null?void 0:e.coinA)==null?void 0:R.symbol),1),D(" - "),o("span",Le,m(e.needReverse?(j=e==null?void 0:e.coinA)==null?void 0:j.symbol:(a=e==null?void 0:e.coinB)==null?void 0:a.symbol),1)]),o("div",Ce,[o("div",Pe,m((e==null?void 0:e.fee)*100)+"%",1)])])])])]),("checkNullObj"in s?s.checkNullObj:I(z))(s.statsData)?(t(),n("td",Ae,[o("div",Ie,[p(y,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Ve," $"+m(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:I(q))(e.poolUSD,2)),1)),("checkNullObj"in s?s.checkNullObj:I(z))(s.statsData)?(t(),n("td",Oe,[o("div",Ne,[p(y,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Be,m(e.apy),1)),(O=s.wallet)!=null&&O.connected&&!s.positionInfo[e.id].myLiquidityUSD?(t(),n("td",Te,[o("div",je,[p(y,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Re,[s.wallet.connected?(t(),n(M,{key:0},[D(m(((Y=s.positionInfo[e.id])==null?void 0:Y.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:I(q))((F=s.positionInfo[e.id])==null?void 0:F.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[D("--")],64))])),o("td",null,[o("div",De,[p(V,{class:"add-liquidity-btn",onClick:cs(J=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:is(()=>[D("Deposit")]),_:2},1032,["onClick"]),o("div",qe,[(t(),n("svg",{"aria-hidden":"true",class:G(["icon",s.isShowPosition&&s.isShowPosition[$]?"icon-open":""])},Me,2))])])])],8,ke),s.isShowPosition&&s.isShowPosition[$]?(t(),n("tr",Ye,[o("td",Fe,[p(P,{"p-item":e},null,8,["p-item"])]),We])):U("",!0),Ee],64)}),128))])]),o("div",ze,[(t(!0),n(M,null,as(s.list,(e,$)=>{var L,d,i,A,R,T,j,a,O,Y,F,J;return t(),n("div",{key:e.address,class:"item"},[o("div",He,[o("div",Je,[W(o("img",null,null,512),[[v,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),(e.needReverse?(d=s.tokensObj[e.coinB.address])!=null&&d.isSelfBuilt:(L=s.tokensObj[e.coinA.address])!=null&&L.isSelfBuilt)?(t(),n("div",Ke)):U("",!0)]),o("div",Qe,[W(o("img",null,null,512),[[v,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),(e.needReverse?(i=s.tokensObj[e.coinA.address])!=null&&i.isSelfBuilt:(A=s.tokensObj[e.coinB.address])!=null&&A.isSelfBuilt)?(t(),n("div",Ge)):U("",!0)]),o("div",Xe,[o("div",Ze,[o("p",xe,[o("span",st,m(e.needReverse?e.coinB.symbol:e.coinA.symbol),1),D(" - "),o("span",ot,m(e.needReverse?e.coinA.symbol:e.coinB.symbol),1)]),o("div",et,[o("div",tt,m((e==null?void 0:e.fee)*100)+"%",1)])])])]),o("div",nt,[o("div",lt,[at,("checkNullObj"in s?s.checkNullObj:I(z))(s.statsData)?(t(),n("div",it,[p(y,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",dt," $"+m(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:I(q))(e.poolUSD,2)),1))]),o("div",ct,[rt,("checkNullObj"in s?s.checkNullObj:I(z))(s.statsData)?(t(),n("div",ut,[p(y,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",_t,[o("i",null,m(e.apy),1),p(r)]))]),o("div",ht,[vt,("checkNullObj"in s?s.checkNullObj:I(z))(s.positionInfo)&&((R=s.wallet)!=null&&R.connected)?(t(),n("div",pt,[p(y,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",gt,[(T=s.wallet)!=null&&T.connected?(t(),n(M,{key:0},[D(m(((j=s.positionInfo[e.id])==null?void 0:j.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:I(q))((a=s.positionInfo[e.id])==null?void 0:a.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[D("--")],64))]))])]),p(V,{class:"h5-add-liquidity-btn",onClick:cs(es=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:is(()=>[D("Deposit")]),_:2},1032,["onClick"]),o("div",{class:G(["details-btn",s.isShowPosition&&s.isShowPosition[$]?"details-btn-text-active":""]),onClick:es=>s.togglePosition($)},[(t(),n("svg",{"aria-hidden":"true",class:G(["icon",s.isShowPosition&&s.isShowPosition[$]?"icon-active":""])},ft,2))],10,kt),s.isShowPosition&&s.isShowPosition[$]?(t(),n("div",bt,[o("div",yt,[$t,o("div",wt,[(O=s.wallet)!=null&&O.connected?(t(),n("div",St,m(("addCommom"in s?s.addCommom:I(q))(("decimalUi"in s?s.decimalUi:I(us))(e==null?void 0:e.myLiquidity,4)))+" LP",1)):(t(),n("div",Lt,"--"))])]),o("div",Ct,[Pt,o("div",At,[(Y=s.wallet)!=null&&Y.connected?(t(),n("span",It,m(e==null?void 0:e.myShare)+"%",1)):(t(),n("span",Vt,"--%"))])]),o("div",Ot,[Nt,o("div",Bt,[o("div",Tt,[o("div",jt,[W(o("img",Rt,null,512),[[v,e.needReverse?e.coinB.logo_url:e.coinA.logo_url]]),(F=s.wallet)!=null&&F.connected?(t(),n("div",Dt,[o("span",null,m(("addCommom"in s?s.addCommom:I(q))(e==null?void 0:e.amountA)),1)])):(t(),n("div",qt,Mt))]),o("div",Yt,[W(o("img",Ft,null,512),[[v,e.needReverse?e.coinA.logo_url:e.coinB.logo_url]]),(J=s.wallet)!=null&&J.connected?(t(),n("div",Wt,[o("span",null,m(("addCommom"in s?s.addCommom:I(q))(e==null?void 0:e.amountB)),1)])):(t(),n("div",Et,Ht))])])])]),o("div",Jt,[o("div",null,[o("div",{class:"remove-btn",onClick:l[0]||(l[0]=es=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):U("",!0)])}),128))])])}const Qt=Z(ae,[["render",Kt],["__scopeId","data-v-f5390988"]]),Gt=X({props:{selectValue:{type:String,default:""},showList:{type:Object,default:()=>({})}},setup(s,l){const f=["All Vaults","My Vaults"],g=C("All Vaults"),S=C(s.selectValue),b=C(!1),r=C(!1),_=x(),y=h(()=>_),V=ds(),P=h(()=>V),v=h(()=>P.value.autoPoolList),e=()=>s.showList.length,$=()=>{l.emit("clickRefresh")},L=i=>{S.value=i,l.emit("changeSort",i)},d=i=>{g.value=i,console.log(i,"itemitem"),i=="My Vaults"?l.emit("changeTab",!0):l.emit("changeTab",!1)};return Ns(()=>{document.addEventListener("click",()=>{r.value=!1})}),{isOpenList:r,wallet:y,changeSort:L,tabList:f,currentTab:g,sortValue:S,clickRefresh:$,isRefresh:b,vaultsPoolList:v,getListNum:e,changeTab:d}}});const os=s=>(ns("data-v-1d1eae2e"),s=s(),ls(),s),Xt={class:"vaults-tab"},Zt={class:"tab-left"},xt=["onClick"],sn={key:0},on={class:"tab-right"},en={class:"sort-select"},tn=os(()=>o("div",null,"Sort by",-1)),nn={class:"showSort"},ln=os(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),an=os(()=>o("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),dn=[an],cn={key:0,class:"sort-list"},rn=os(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),un=os(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),_n={class:"refresh"},hn=os(()=>o("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),vn=[hn];function pn(s,l,f,g,S,b){return t(),n("div",Xt,[o("div",Zt,[(t(!0),n(M,null,as(s.tabList,r=>(t(),n("div",{key:r,class:G(["tab-item",s.currentTab==r?"tab-item-active":""]),onClick:_=>s.changeTab(r)},[o("span",null,m(r),1),s.currentTab==r&&s.getListNum()?(t(),n("p",sn,m(s.currentTab=="My Vaults"&&!s.wallet.address?0:s.getListNum()),1)):U("",!0)],10,xt))),128))]),o("div",on,[o("div",en,[o("div",{class:"sort-select-box",onClick:l[0]||(l[0]=cs(r=>s.isOpenList=!s.isOpenList,["stop"]))},[tn,o("div",nn,[o("span",null,m(s.sortValue),1),ln,(t(),n("svg",{class:G(["arrow-icon",s.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},dn,2))])]),s.isOpenList?(t(),n("div",cn,[o("div",{class:"sort-item",onClick:l[1]||(l[1]=r=>s.changeSort("APY"))},[D(" APY "),rn]),o("div",{class:"sort-item",onClick:l[2]||(l[2]=r=>s.changeSort("TVL"))},[D(" TVL "),un])])):U("",!0)]),o("div",_n,[(t(),n("svg",{"aria-hidden":"true",class:G(["refresh-icon",s.isRefresh?"refreshing":""]),onClick:l[3]||(l[3]=(...r)=>s.clickRefresh&&s.clickRefresh(...r))},vn,2))])])])}const gn=Z(Gt,[["render",pn],["__scopeId","data-v-1d1eae2e"]]),kn=X({components:{VaultsTabs:gn},setup(){Os();const s=vs(),l=h(()=>s),f=rs(),g=h(()=>f),S=ds(),b=h(()=>S),r=x(),_=h(()=>r),y=h(()=>b.value.positionInfoObj),V=h(()=>l.value.chainName),P=C(!1),v=C(!1),e=C("TVL"),$=C(["APY"]),L=C(!1),d=u=>{console.log(u,"w121");const N=[];N.push(e.value),$.value.forEach((w,c)=>{w!=u&&N.push(w)}),$.value=N,e.value=u,R(b.value.positionInfoList)};Ns(()=>{document.addEventListener("click",()=>{es("")})});const i=C([]),A=C(!0),R=u=>{console.log(u,e.value,"##poolListselectValue.valueselectValue.value");const N=[];u.filter(c=>!c.is_pause).forEach(c=>{var ks,ms,fs,bs,ys,$s,ws,Ss,Ls,Cs,Ps;const k=l.value.addressLpTokens[c.address],E=g.value.poolsObj[c.address];console.log(b.value.apyObj,"##autoPool.value.apyObj");const K=((ks=b.value.apyObj[c.id])==null?void 0:ks.apr)||"0%",Ds=((ms=b.value.apyObj[c.id])==null?void 0:ms.resultApr)||"0",qs=((fs=b.value.apyObj[c.id])==null?void 0:fs.tvl)||0;console.log(c.autoPoolPositionInfo.id,"###watchPools 246"),console.log(k,"##statsObj");const Us=c.needReverse?((ws=g.value.tokensObj[($s=c.coinB)==null?void 0:$s.address])==null?void 0:ws.labels)||[]:((ys=g.value.tokensObj[(bs=c.coinA)==null?void 0:bs.address])==null?void 0:ys.labels)||[],Ms=c.needReverse?((Ls=g.value.tokensObj[(Ss=c.coinA)==null?void 0:Ss.address])==null?void 0:Ls.labels)||[]:((Ps=g.value.tokensObj[(Cs=c.coinB)==null?void 0:Cs.address])==null?void 0:Ps.labels)||[],Ys=[...new Set(Us.concat(Ms))];N.push({...c,liqidity:qs,vol:k?k.vol_in_usd_24h:"0",fee:c.fee?c.fee:E!=null&&E.fee?E.fee:"--",labels:Ys,isFarming:c==null?void 0:c.isFarming,fee_24_h:k&&k.fee_24_h,apy:K,resultApr:Ds})});let w=[];e.value=="APY"?(console.log(e.value,"selectValue.valueselectValue.value"),w=N.sort((c,k)=>Number(k.resultApr)-Number(c.resultApr))):w=N.sort((c,k)=>Number(k.liqidity)-Number(c.liqidity)),i.value=w,A.value=!1,console.log(i.value.length,"##list.value.length"),f.setAutoPoolNum(i.value.length),console.log(i.value,"##list.value")};Q(()=>[b.value.positionInfoList,b.value.apyObj,g.value.poolConfigObj],([u,N,w])=>{console.log("执行次数###",w),u&&u.length>0&&w&&!z(w)&&(console.log(u,"###autoPoolList"),R(u))},{immediate:!0,deep:!0}),Q(()=>[_.value.address,b.value.autoPoolList,g.value.poolConfigObj],([u,N,w])=>{u&&N&&N.length>0&&w&&!z(w)&&S.getMyAutoPoolPosition()},{immediate:!0});const T=C(null),j=h(()=>T.value&&T.value.firstToken?T.value.firstToken:null),a=h(()=>T.value&&T.value.lastToken?T.value.lastToken:null),O=C(),Y=C(0),F=()=>{let u=[];u=i.value,console.log(u,"##pageList"),Y.value=u.reduce((k,E)=>Number(k)+Number(E.poolUSD),0);const N=u.filter((k,E)=>j.value&&a.value?k.coinA.address==j.value.address&&k.coinB.address==a.value.address||k.coinA.address==a.value.address&&k.coinB.address==j.value.address:j.value?k.coinA.address.toLowerCase().includes(j.value.address.toLowerCase())||k.coinB.address.toLowerCase().includes(j.value.address.toLowerCase()):a.value?k.coinA.address.toLowerCase().includes(a.value.address.toLowerCase())||k.coinB.address.toLowerCase().includes(a.value.address.toLowerCase()):u);let w=[],c=[];console.log(N,"##filterArr"),N.forEach((k,E)=>{console.log(k,"irem##");const K=y.value&&y.value[k.id];console.log(K,"##positionInfo"),P.value&&Number(K==null?void 0:K.myLiquidity)>0&&_.value.connected?c.push(k):w.push({...k})}),console.log(w,"121arrnewValnewValnewVal"),O.value=P.value&&_.value.connected?c:w,console.log(O.value,"##showList.value "),A.value||(P.value&&_.value.connected?f.setAutoPoolNum(c.length):f.setAutoPoolNum(w.length))};Q(()=>[j.value,a.value,i.value,P.value,_.value.address],([u,N,w,c])=>{(u||N||w||c)&&(console.log("newValnewValnewVal",u,N,w,JSON.stringify(w)),F())},{immediate:!0}),Ws(()=>{f.setAutoPoolNum("--")});const J=h(()=>g.value.autoPoolNum),es=u=>{u=="label"?(s.setIsSelect("pools"),L.value=!L.value,v.value=!1,l.value.setIsShowMore(!1)):u=="select"?(s.setIsSelect("pools"),v.value=!v.value,L.value=!1,l.value.setIsShowMore(!1)):(v.value=!1,L.value=!1)};Q(()=>l.value.isSelect,u=>{u!=="pools"&&es("")},{immediate:!0});const Rs=_s(),gs=()=>{A.value=!0,S.getAutoPoolList(),S.getAutoPoolAPY()};return Q(()=>l.value.isRefresh,u=>{gs()},{immediate:!0}),Q(()=>V.value,u=>{u=="Aptos"&&Rs.push("/pools")},{immediate:!0}),{totalTVL:Y,clickRefresh:gs,isMyLiquidity:P,chainName:V,store:l,select:v,selectValue:e,selectList:$,label:L,changeSort:d,list:i,listLoading:A,showList:O,childTokenSelectRef:T,wallet:_,autoPoolNum:J}}});const mn={class:"vaults-container-new"},fn={class:"vaults-container-center"},bn={class:"auto-pool"},yn={key:0,class:"no-vaults-data no-data"},$n=o("img",{src:js},null,-1),wn={key:0,class:"upgrade-loading pc-loading"},Sn={key:1,class:"upgrade-loading h5-loading"},Ln={key:3,class:"no-vaults-data"},Cn=o("img",{src:Ks},null,-1),Pn=o("span",{class:"no-vaults"},"No vaults found",-1),An=[Cn,Pn];function In(s,l,f,g,S,b){const r=io,_=Es("VaultsTabs"),y=hs,V=wo,P=Js,v=Qt;return t(),n("div",mn,[p(r,{list:s.showList,"total-t-v-l":s.totalTVL,"list-loading":s.listLoading},null,8,["list","total-t-v-l","list-loading"]),o("div",fn,[p(_,{"select-value":s.selectValue,"show-list":s.showList,onChangeSort:l[0]||(l[0]=e=>s.changeSort(e)),onChangeTab:l[1]||(l[1]=e=>{s.isMyLiquidity=e}),onClickRefresh:s.clickRefresh},null,8,["select-value","show-list","onClickRefresh"]),o("div",bn,[s.isMyLiquidity&&!s.wallet.address?(t(),n("div",yn,[$n,p(y,{class:"add-liquidity-btn",onClick:l[2]||(l[2]=e=>s.wallet.setIsShowWalletModal(!0))},{default:is(()=>[D("Connect Wallet")]),_:1})])):U("",!0),s.isMyLiquidity&&s.wallet.address&&s.listLoading||!s.isMyLiquidity&&s.listLoading?(t(),n(M,{key:1},[s.listLoading?(t(),n("div",wn,[p(V)])):U("",!0),s.listLoading?(t(),n("div",Sn,[p(P,{type:"poolsCard",loading:!0})])):U("",!0)],64)):U("",!0),s.isMyLiquidity&&s.wallet.address&&!s.listLoading||!s.isMyLiquidity&&!s.listLoading?(t(),zs(v,{key:2,list:s.showList},null,8,["list"])):U("",!0),s.autoPoolNum!=="--"&&Number(s.autoPoolNum)<=0&&!s.listLoading?(t(),n("div",Ln,An)):U("",!0)])])])}const Hn=Z(kn,[["render",In]]);export{Hn as default};
