import{s as Oo,a as P,u as Co,d as _o,c as J}from"./pool.6ba7e8d0.js";import{a as oo,l as h,r as B,e as so,o as n,f as t,h as e,i as f,v as a,u as g,S as Mo,p as po,k as ho,j as N,F as W,E as $o,M as Vo,b as mo,Q as To,s as Do,t as G,y as No,c as co,x as U,w as Fo,z as Eo,A as ro,B as Wo,H as zo,q as x,K as Ho}from"./entry.0f97a10d.js";/* empty css              */import{a as vo,u as Lo}from"./sha256.dd756687.js";import{_ as Uo}from"./auto-pool-apy-tips.9fb95c9e.js";/* empty css              */import{u as Jo}from"./farms.d42553d4.js";import{_ as Ko}from"./upgrade-loading.363f499d.js";import{_ as qo}from"./token-warning.45227ae9.js";import{_ as Qo}from"./coin-tips.91163564.js";import{i as uo}from"./import-icon.de3e6c66.js";import{u as wo}from"./autoPool.3445efb8.js";import{R as Go}from"./farms-range.ea661b1a.js";import{_ as Yo}from"./token-warning_2x.f88bc6cf.js";import{_ as Xo}from"./img-no-Positions_2x.f837d007.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Zo=oo({props:{list:{type:Array,default:()=>[]},listLoading:{type:Boolean,default:!1},totalTVL:{type:String,default:""}},setup(s){const l=vo(),b=h(()=>l),k=B(!1);return{wallet:b,sFixD:Oo,loading:k,addCommom:P}}});const Po=s=>(po("data-v-af25987f"),s=s(),ho(),s),xo={class:"vaults-banner"},os={class:"vaults-banner-center"},ss=Po(()=>e("div",{class:"title"},"Vaults",-1)),es=Po(()=>e("div",{class:"desc"},"Harvesting, compounding & rebalancing is automated.Stake your tokens to earn.",-1)),ns={class:"claim-rewards"},ts={class:"claim-title"},ls=Po(()=>e("span",null,"Total Value Locked",-1)),as={key:0,class:"loading-spin"},ds={key:1},is={key:2};function cs(s,l,b,k,m,$){const u=Mo;return n(),t("div",xo,[e("div",os,[ss,es,e("div",ns,[e("div",ts,[ls,s.listLoading?(n(),t("span",as,[f(u)])):s.wallet.address?(n(),t("span",ds,"$"+a(("addCommom"in s?s.addCommom:g(P))(("sFixD"in s?s.sFixD:g(Oo))(s.totalTVL||0,2))),1)):(n(),t("span",is,"--"))])])])])}const rs=so(Zo,[["render",cs],["__scopeId","data-v-af25987f"]]),us=oo({setup(){const s=B(!1),l=vo(),b=h(()=>l),k=Jo(),m=h(()=>k),$=h(()=>m.value.farmsPoolList);return{isShowMore:s,wallet:b,walletStore:l,farmsPoolList:$}}});const Ao=s=>(po("data-v-18590430"),s=s(),ho(),s),_s={class:"vaults-table"},ps=Ao(()=>e("th",null,"Vaults",-1)),hs=Ao(()=>e("th",null,"TVL",-1)),vs=Ao(()=>e("th",null,"Your Deposit",-1)),gs=Ao(()=>e("th",null,"Actions",-1)),ks={class:"pool"},ys={class:"staked-tvl"},fs={class:"apr"},bs={class:"my-staked"},$s={class:"actions"};function ws(s,l,b,k,m,$){const u=Uo,_=Vo;return n(),t("div",_s,[e("table",null,[e("thead",null,[e("tr",null,[ps,hs,e("th",null,[e("span",null,[N("APY "),f(u)])]),vs,gs])]),e("tbody",null,[(n(),t(W,null,$o(4,(L,C)=>e("tr",{key:C},[e("td",null,[e("div",ks,[f(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),f(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),e("td",null,[e("div",ys,[f(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),e("td",null,[e("div",fs,[e("span",null,[f(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),e("td",null,[e("div",bs,[f(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),e("td",null,[e("div",$s,[f(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])])),64))])])])}const As=so(us,[["render",ws],["__scopeId","data-v-18590430"]]),Ss=oo({components:{Range:Go},props:{pItem:{type:Object,default:()=>({})}},setup(s){const l=Lo(),b=h(()=>l),k=Co(),m=h(()=>k),$=r=>{var y;return(r==null?void 0:r.logoURI)||(r==null?void 0:r.logo_url)||((y=m.value.tokensObj[r==null?void 0:r.address])==null?void 0:y.logo_url)||(b.value.theme==="default"?uo("/image/coins/unknown.png"):uo("/image/coins/sui-unknown.png"))},u=B(!0),_=wo(),L=h(()=>_),C=h(()=>L.value.positionInfoObj[s.pItem.id]),R=mo(),w=(r,y)=>{R.push(`/vaults-detail/${r.id}?action=${y}`)},j=r=>{const y=r.needReverse,V=y?r.token_b.address:r.token_a.address,q=y?r.token_a.address:r.token_b.address;R.push(`/swap?from=${V}&to=${q}`)},o=vo(),A=h(()=>o);return console.log(s.pItem,"pItem##"),{getCoinIcon:$,direct:u,decimalUi:_o,addCommom:P,autoPool:L,positionInfo:C,toAutoPoolDetail:w,toSwap:j,wallet:A}}}),Cs=""+globalThis.__publicAssetsURL("sui-image/range-vaults.png");const X=s=>(po("data-v-a09ba9cb"),s=s(),ho(),s),ms={class:"vaults-position-card"},Ls={class:"auto-position-card-conetent"},Ps={class:"auto-position-card"},Bs={class:"position-range"},Is=X(()=>e("div",{class:"inrange"},[e("img",{src:Cs,alt:""}),e("span",null,"In range")],-1)),Rs={class:"right"},js={class:"top"},Os=X(()=>e("p",null,"Position Range",-1)),Vs={key:0},Ts={key:1},Ds={class:"item lp-tokens"},Ns=X(()=>e("div",{class:"top"},"Your LP Tokens",-1)),Us={class:"bottom"},qs={key:0,class:"lp-num"},Ys={key:1,class:"lp-num"},Ms={class:"item share"},Fs=X(()=>e("div",{class:"top"},"Share",-1)),Es={class:"bottom"},Ws={key:0},zs={key:1},Hs={class:"item yourBanlance"},Js=X(()=>e("div",{class:"top"},"Your Balance",-1)),Ks={class:"bottom"},Qs={class:"token-info"},Gs={class:"token-num"},Xs={alt:""},Zs={key:0},xs={key:1},oe=X(()=>e("p",null,"--",-1)),se={class:"token-num"},ee={alt:""},ne={key:0},te={key:1},le=X(()=>e("p",null,"--",-1)),ae={class:"action"};function de(s,l,b,k,m,$){var L,C,R,w,j,o,A,r;const u=To("Range"),_=Do("image");return n(),t("div",ms,[e("div",Ls,[e("div",Ps,[e("div",Bs,[Is,e("div",Rs,[e("div",js,[Os,s.direct?(n(),t("span",Vs,a(("addCommom"in s?s.addCommom:g(P))(("decimalUi"in s?s.decimalUi:g(_o))(s.pItem.price,6)))+" Current",1)):(n(),t("span",Ts,a(("addCommom"in s?s.addCommom:g(P))(("decimalUi"in s?s.decimalUi:g(_o))(1/s.pItem.price,6)))+" Current",1))]),f(u,{"pool-info":s.positionInfo,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:l[0]||(l[0]=y=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),e("div",Ds,[Ns,e("div",Us,[(L=s.wallet)!=null&&L.connected?(n(),t("div",qs,a(("addCommom"in s?s.addCommom:g(P))((C=s.positionInfo)==null?void 0:C.myLiquidity))+" LP",1)):(n(),t("div",Ys,"--"))])]),e("div",Ms,[Fs,e("div",Es,[(R=s.wallet)!=null&&R.connected?(n(),t("span",Ws,a((w=s.positionInfo)==null?void 0:w.myShare)+"%",1)):(n(),t("span",zs,"--%"))])]),e("div",Hs,[Js,e("div",Ks,[e("div",Qs,[e("div",Gs,[G(e("img",Xs,null,512),[[_,s.pItem.needReverse?s.pItem.coinB.logo_url:s.pItem.coinA.logo_url]]),(j=s.wallet)!=null&&j.connected?(n(),t("div",Zs,[e("span",null,a(("addCommom"in s?s.addCommom:g(P))((o=s.positionInfo)==null?void 0:o.amountA)),1)])):(n(),t("div",xs,[e("span",null,"0 "+a(s.pItem.needReverse?s.pItem.coinB.symbol:s.pItem.coinA.symbol),1),oe]))]),e("div",se,[G(e("img",ee,null,512),[[_,s.pItem.needReverse?s.pItem.coinA.logo_url:s.pItem.coinB.logo_url]]),(A=s.wallet)!=null&&A.connected?(n(),t("div",ne,[e("span",null,a(("addCommom"in s?s.addCommom:g(P))((r=s.positionInfo)==null?void 0:r.amountB)),1)])):(n(),t("div",te,[e("span",null,"0 "+a(s.pItem.needReverse?s.pItem.coinA.symbol:s.pItem.coinB.symbol),1),le]))])])])]),e("div",ae,[e("div",null,[e("div",{class:"remove-btn",onClick:l[1]||(l[1]=y=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])])])}const ie=so(Ss,[["render",de],["__scopeId","data-v-a09ba9cb"]]),ce=oo({components:{TokenWarning:qo},props:{list:{type:Array,default:()=>[]}},setup(){const{t:s}=No(),l=Lo(),b=h(()=>l),k=Co(),m=h(()=>k),$=d=>{var O;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((O=m.value.tokensObj[d==null?void 0:d.address])==null?void 0:O.logo_url)||(b.value.theme==="default"?uo("/image/coins/unknown.png"):uo("/image/coins/sui-unknown.png"))},u=h(()=>m.value.tokensObj),_=h(()=>b.value.statsData),L=h(()=>b.value.theme),C=wo(),R=h(()=>C),w=B({}),j=d=>{w.value[d]?w.value[d]=!1:w.value[d]=!0,console.log(w.value,"##isShowPosition.value")},o=h(()=>R.value.positionInfoObj),A=vo(),r=h(()=>A),y=B(!1),V=mo(),q=(d,O)=>{V.push(`/vaults-detail/${d.id}?action=${O}`)},T=d=>{const O=d.needReverse,M=O?d.token_b.address:d.token_a.address,F=O?d.token_a.address:d.token_b.address;V.push(`/swap?from=${M}&to=${F}`)},D=B(!0);return{router:V,getCoinIcon:$,tokensObj:u,t:s,statsData:_,checkNullObj:J,addCommom:P,importIcon:uo,theme:L,isShowPosition:w,togglePosition:j,positionInfo:o,wallet:r,isShowDetail:y,toAutoPoolDetail:q,toSwap:T,direct:D}}});const I=s=>(po("data-v-566705fc"),s=s(),ho(),s),re={class:"vaults-table-contianer"},ue={class:"table pc-pool-item"},_e={class:"table-header"},pe={class:"table-tr"},he=I(()=>e("th",null,"Vaults",-1)),ve=I(()=>e("th",null,"TVL",-1)),ge=I(()=>e("th",null,"Your Deposit",-1)),ke=I(()=>e("th",null,"Action",-1)),ye=I(()=>e("tr",{style:{height:"4px",background:"unset"}},null,-1)),fe={class:"table-body"},be=["onClick"],$e={class:"token"},we={class:"img-box"},Ae=["src"],Se={class:"img-box img-last-box"},Ce=["src"],me={class:"name"},Le={class:"top"},Pe={class:"token-name"},Be={class:"tokena"},Ie={class:"tokenb"},Re={class:"fee-warning"},je={class:"fee-tier-top"},Oe={key:0,class:"pool-warning"},Ve=I(()=>e("img",{src:Yo,alt:""},null,-1)),Te={class:"hover-text"},De={key:0},Ne={class:"skeleton-box"},Ue={key:1},qe={key:2},Ye={class:"skeleton-box"},Me={key:3},Fe={key:4},Ee={class:"skeleton-box"},We={key:5},ze={class:"show-position"},He={class:"svg-icon"},Je=I(()=>e("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ke=[Je],Qe={key:0,class:"table-tr view-table-tr"},Ge={colspan:"5"},Xe=I(()=>e("td",null,null,-1)),Ze=I(()=>e("tr",{style:{height:"8px",background:"unset"}},null,-1)),xe={class:"h5-pool-item"},on={class:"token"},sn={class:"img-box"},en={key:0,class:"pool-warning"},nn={class:"img-box img-last-box"},tn={key:0,class:"pool-warning"},ln={class:"name"},an={class:"top"},dn={class:"token-name"},cn={class:"tokena"},rn={class:"tokenb"},un={class:"fee-warning"},_n={class:"fee-tier-top"},pn={key:0,class:"pool-warning"},hn=I(()=>e("img",{src:Yo,alt:""},null,-1)),vn={class:"hover-text"},gn={class:"bottom"},kn={class:"row"},yn=I(()=>e("div",{class:"left"},"APY",-1)),fn={key:0,class:"right"},bn={key:1,class:"right theme-right"},$n={class:"row"},wn=I(()=>e("div",{class:"left"},"TVL",-1)),An={key:0,class:"right"},Sn={key:1,class:"right"},Cn={class:"row"},mn=I(()=>e("div",{class:"left"},"Your Deposit",-1)),Ln={key:0,class:"right"},Pn={key:1,class:"right"},Bn={class:"details-btn"},In=["onClick"],Rn=I(()=>e("use",{"xlink:href":"#icon-icon_on"},null,-1)),jn=[Rn],On={key:0,class:"h5-auto-pool-details"},Vn={class:"auto-pool-details-top"},Tn={class:"current-price"},Dn={class:"current-price-text"},Nn={key:0,class:"coin"},Un={key:1,class:"coin"},qn=I(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Yn=I(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Mn=[qn,Yn],Fn={class:"my-share"},En=I(()=>e("span",null,"My share of pool",-1)),Wn={key:0},zn={key:1},Hn={class:"current-lp"},Jn={class:"current-lp-info"},Kn={class:"lp-bg"},Qn={alt:""},Gn={class:"lp-num"},Xn=I(()=>e("div",{class:"title"},"Current LP",-1)),Zn={key:0},xn={key:1},ot={key:2},st={key:3},et={class:"pooled-assets"},nt={class:"assets-info"},tt={class:"token-num"},lt={alt:""},at=I(()=>e("div",{class:"title"},"Pooled Assets",-1)),dt={key:0},it={key:1},ct={key:2},rt={key:3},ut={class:"token-num"},_t={alt:""},pt={key:0},ht={key:1},vt={key:2},gt={key:3},kt={class:"action"},yt=["onClick"],ft={class:"remove-swap-btn"},bt=["onClick"];function $t(s,l,b,k,m,$){const u=Uo,_=qo,L=Qo,C=Vo,R=Wo,w=ie,j=Do("image");return n(),t("div",re,[e("table",ue,[e("thead",_e,[e("tr",pe,[he,ve,e("th",null,[e("span",null,[N("APY "),f(u)])]),ge,ke]),ye]),e("tbody",fe,[(n(!0),t(W,null,$o(s.list,(o,A)=>{var r,y,V,q,T,D,d,O,M,F,K,z,Q,H,i;return n(),t(W,{key:A},[e("tr",{class:"table-tr",onClick:S=>s.togglePosition(A)},[e("td",null,[e("div",$e,[e("div",we,[e("img",{src:s.getCoinIcon(o.needReverse?o.coinB:o.coinA)},null,8,Ae),f(_,{address:o.needReverse?(y=o==null?void 0:o.coinB)==null?void 0:y.address:(r=o==null?void 0:o.coinA)==null?void 0:r.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),e("div",Se,[e("img",{src:s.getCoinIcon(o.needReverse?o.coinA:o.coinB)},null,8,Ce),f(_,{address:o.needReverse?(q=o.coinA)==null?void 0:q.address:(V=o==null?void 0:o.coinB)==null?void 0:V.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),e("div",me,[e("div",Le,[e("p",Pe,[e("span",Be,[N(a(o.needReverse?(D=o==null?void 0:o.coinB)==null?void 0:D.symbol:(T=o==null?void 0:o.coinA)==null?void 0:T.symbol)+" ",1),o!=null&&o.coinB&&(o!=null&&o.coinA)?(n(),co(L,{key:0,"coin-info":o.needReverse?o==null?void 0:o.coinB:o==null?void 0:o.coinA},null,8,["coin-info"])):U("",!0)]),N(" - "),e("span",Ie,[N(a(o.needReverse?(d=o==null?void 0:o.coinA)==null?void 0:d.symbol:(O=o==null?void 0:o.coinB)==null?void 0:O.symbol)+" ",1),o!=null&&o.coinB&&(o!=null&&o.coinA)?(n(),co(L,{key:0,"coin-info":o.needReverse?o==null?void 0:o.coinA:o==null?void 0:o.coinB},null,8,["coin-info"])):U("",!0)])]),e("div",Re,[e("div",je,a((o==null?void 0:o.fee)*100)+"%",1),(F=s.tokensObj[(M=o.coinA)==null?void 0:M.address])!=null&&F.isSelfBuilt||(z=s.tokensObj[(K=o.coinB)==null?void 0:K.address])!=null&&z.isSelfBuilt?(n(),t("div",Oe,[Ve,e("div",Te,a(s.t("newAdd.poolWarning")),1)])):U("",!0)])])])])]),("checkNullObj"in s?s.checkNullObj:g(J))(s.statsData)?(n(),t("td",De,[e("div",Ne,[f(C,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(n(),t("td",Ue," $"+a(Number(o.poolUSD)!==0&&Number(o.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:g(P))(o.poolUSD,2)),1)),("checkNullObj"in s?s.checkNullObj:g(J))(s.statsData)?(n(),t("td",qe,[e("div",Ye,[f(C,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(n(),t("td",Me,a(o.apy),1)),(Q=s.wallet)!=null&&Q.connected&&!s.positionInfo[o.id].myLiquidityUSD?(n(),t("td",Fe,[e("div",Ee,[f(C,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(n(),t("td",We,[s.wallet.connected?(n(),t(W,{key:0},[N(a(((H=s.positionInfo[o.id])==null?void 0:H.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:g(P))((i=s.positionInfo[o.id])==null?void 0:i.myLiquidityUSD)}`:"<$0.01"),1)],64)):(n(),t(W,{key:1},[N("--")],64))])),e("td",null,[e("div",ze,[f(R,{class:"add-liquidity-btn",onClick:Eo(S=>s.router.push(`/vaults-detail/${o.id}?action=deposit`),["stop"])},{default:Fo(()=>[N("Deposit")]),_:2},1032,["onClick"]),e("div",He,[(n(),t("svg",{"aria-hidden":"true",class:ro(["icon",s.isShowPosition&&s.isShowPosition[A]?"icon-open":""])},Ke,2))])])])],8,be),s.isShowPosition&&s.isShowPosition[A]?(n(),t("tr",Qe,[e("td",Ge,[f(w,{"p-item":o},null,8,["p-item"])]),Xe])):U("",!0),Ze],64)}),128))])]),e("div",xe,[(n(!0),t(W,null,$o(s.list,(o,A)=>{var r,y,V,q,T,D,d,O,M,F,K,z,Q,H,i,S,v,c,p,Y,E,go,ko,yo,fo,bo,eo,no,to,lo,ao,io;return n(),t("div",{key:o.address,class:"item"},[e("div",on,[e("div",sn,[G(e("img",null,null,512),[[j,s.getCoinIcon(o.needReverse?o.coinB:o.coinA)]]),(o.needReverse?(y=s.tokensObj[o.coinB.address])!=null&&y.isSelfBuilt:(r=s.tokensObj[o.coinA.address])!=null&&r.isSelfBuilt)?(n(),t("div",en)):U("",!0)]),e("div",nn,[G(e("img",null,null,512),[[j,s.getCoinIcon(o.needReverse?o.coinA:o.coinB)]]),(o.needReverse?(V=s.tokensObj[o.coinA.address])!=null&&V.isSelfBuilt:(q=s.tokensObj[o.coinB.address])!=null&&q.isSelfBuilt)?(n(),t("div",tn)):U("",!0)]),e("div",ln,[e("div",an,[e("p",dn,[e("span",cn,[N(a(o.needReverse?o.coinB.symbol:o.coinA.symbol)+" ",1),o&&o.coinB&&o.coinA?(n(),co(L,{key:0,"coin-info":o.needReverse?o==null?void 0:o.coinB:o==null?void 0:o.coinA},null,8,["coin-info"])):U("",!0)]),N(" - "),e("span",rn,[N(a(o.needReverse?o.coinA.symbol:o.coinB.symbol)+" ",1),o&&o.coinB&&o.coinA?(n(),co(L,{key:0,"coin-info":o.needReverse?o==null?void 0:o.coinA:o==null?void 0:o.coinB},null,8,["coin-info"])):U("",!0)])]),e("div",un,[e("div",_n,a((o==null?void 0:o.fee)*100)+"%",1),(T=s.tokensObj[o.coinA.address])!=null&&T.isSelfBuilt||(D=s.tokensObj[o.coinB.address])!=null&&D.isSelfBuilt?(n(),t("div",pn,[hn,e("div",vn,a(s.t("newAdd.poolWarning")),1)])):U("",!0)])])])]),e("div",gn,[e("div",kn,[yn,("checkNullObj"in s?s.checkNullObj:g(J))(s.statsData)?(n(),t("div",fn,[f(C,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",bn,[e("i",null,a(o.apy),1),f(u)]))]),e("div",$n,[wn,("checkNullObj"in s?s.checkNullObj:g(J))(s.statsData)?(n(),t("div",An,[f(C,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",Sn," $"+a(Number(o.poolUSD)!==0&&Number(o.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:g(P))(o.poolUSD,2)),1))]),e("div",Cn,[mn,("checkNullObj"in s?s.checkNullObj:g(J))(s.positionInfo)&&((d=s.wallet)!=null&&d.connected)?(n(),t("div",Ln,[f(C,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",Pn,[(O=s.wallet)!=null&&O.connected?(n(),t(W,{key:0},[N(a(((M=s.positionInfo[o.id])==null?void 0:M.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:g(P))((F=s.positionInfo[o.id])==null?void 0:F.myLiquidityUSD)}`:"<$0.01"),1)],64)):(n(),t(W,{key:1},[N("--")],64))]))])]),e("div",Bn,[e("div",{class:ro(["details-btn-text",s.isShowPosition&&s.isShowPosition[A]?"details-btn-text-active":""]),onClick:Z=>s.togglePosition(A)},[(n(),t("svg",{"aria-hidden":"true",class:ro(["icon",s.isShowPosition&&s.isShowPosition[A]?"icon-active":""])},jn,2))],10,In),s.isShowPosition&&s.isShowPosition[A]?(n(),t("div",On,[e("div",Vn,[e("div",Tn,[N(" Current Price "),e("div",Dn,[(o!=null&&o.needReverse?!s.direct:s.direct)?(n(),t("div",Nn,a(("addCommom"in s?s.addCommom:g(P))(("decimalUi"in s?s.decimalUi:g(_o))(o.price,6)))+" "+a(o&&o.coinB&&o.coinB.symbol)+" per  "+a(o&&o.coinA&&o.coinA.symbol),1)):(n(),t("div",Un,a(("addCommom"in s?s.addCommom:g(P))(("decimalUi"in s?s.decimalUi:g(_o))(1/o.price,6)))+" "+a(o&&o.coinA&&o.coinA.symbol)+" per  "+a(o&&o.coinB&&o.coinB.symbol),1)),e("div",{class:"icon-change",onClick:l[0]||(l[0]=Z=>s.direct=!s.direct)},Mn)])]),e("div",Fn,[En,(K=s.wallet)!=null&&K.connected?(n(),t("span",Wn,a(o==null?void 0:o.myShare)+"%",1)):(n(),t("span",zn,"--%"))])]),e("div",Hn,[e("div",Jn,[e("div",Kn,[G(e("img",Qn,null,512),[[j,(z=o==null?void 0:o.lpInfo)==null?void 0:z.logo_url]])]),e("div",Gn,[Xn,(Q=s.wallet)!=null&&Q.connected?(n(),t("span",Zn,a(("addCommom"in s?s.addCommom:g(P))(o.myLiquidity))+" LP",1)):(n(),t("span",xn,"-- LP")),(H=s.wallet)!=null&&H.connected?(n(),t("span",ot,a(((i=s.positionInfo[o.id])==null?void 0:i.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:g(P))((S=s.positionInfo[o.id])==null?void 0:S.myLiquidityUSD)}`:"<$0.01"),1)):(n(),t("span",st,"--"))])])]),e("div",et,[e("div",nt,[e("div",tt,[G(e("img",lt,null,512),[[j,o.needReverse?(v=o==null?void 0:o.coinB)==null?void 0:v.logo_url:(c=o==null?void 0:o.coinA)==null?void 0:c.logo_url]]),e("div",null,[at,(p=s.wallet)!=null&&p.connected?(n(),t("span",dt,a(("addCommom"in s?s.addCommom:g(P))(o.amountA))+" "+a(o.needReverse?(Y=o==null?void 0:o.coinB)==null?void 0:Y.symbol:(E=o==null?void 0:o.coinA)==null?void 0:E.symbol),1)):(n(),t("span",it,"-- "+a(o.needReverse?(go=o==null?void 0:o.coinB)==null?void 0:go.symbol:(ko=o==null?void 0:o.coinA)==null?void 0:ko.symbol),1)),(yo=s.wallet)!=null&&yo.connected?(n(),t("span",ct,a(o.myAmountAUSD),1)):(n(),t("span",rt,"--"))])]),e("div",ut,[G(e("img",_t,null,512),[[j,o.needReverse?(fo=o==null?void 0:o.coinA)==null?void 0:fo.logo_url:(bo=o==null?void 0:o.coinB)==null?void 0:bo.logo_url]]),e("div",null,[(eo=s.wallet)!=null&&eo.connected?(n(),t("span",pt,a(("addCommom"in s?s.addCommom:g(P))(o.amountB))+" "+a(o.needReverse?(no=o==null?void 0:o.coinA)==null?void 0:no.symbol:(to=o==null?void 0:o.coinB)==null?void 0:to.symbol),1)):(n(),t("span",ht,"-- "+a(o.needReverse?(lo=o==null?void 0:o.coinA)==null?void 0:lo.symbol:(ao=o==null?void 0:o.coinB)==null?void 0:ao.symbol),1)),(io=s.wallet)!=null&&io.connected?(n(),t("span",vt,a(o.myAmountBUSD),1)):(n(),t("span",gt,"--"))])])])]),e("div",kt,[e("div",{class:"add-btn",onClick:Z=>s.toAutoPoolDetail(o,"deposit")}," Add Liquidity ",8,yt),e("div",ft,[e("div",{onClick:Z=>s.toAutoPoolDetail(o,"remove")}," Remove ",8,bt)])])])):U("",!0)])])}),128))])])}const wt=so(ce,[["render",$t],["__scopeId","data-v-566705fc"]]),At=oo({props:{selectValue:{type:String,default:""},showList:{type:Object,default:()=>({})}},setup(s,l){const b=["All Vaults","My Vaults"],k=B("All Vaults"),m=B(s.selectValue),$=B(!1),u=wo(),_=h(()=>u),L=h(()=>_.value.autoPoolList);return{changeSort:o=>{m.value=o,l.emit("changeSort",o)},tabList:b,currentTab:k,sortValue:m,clickRefresh:()=>{l.emit("clickRefresh")},isRefresh:$,vaultsPoolList:L,getListNum:()=>s.showList.length,changeTab:o=>{k.value=o,console.log(o,"itemitem"),o=="My Vaults"?l.emit("changeTab",!0):l.emit("changeTab",!1)}}}});const So=s=>(po("data-v-27500767"),s=s(),ho(),s),St={class:"vaults-tab"},Ct={class:"tab-left"},mt=["onClick"],Lt={key:0},Pt={class:"tab-right"},Bt={class:"sort-select"},It={class:"sort-select-box"},Rt=So(()=>e("div",null,"Sort by",-1)),jt=So(()=>e("svg",{class:"sort-icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Ot=So(()=>e("svg",{class:"arrow-icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Vt={class:"sort-list"},Tt={class:"refresh"},Dt=So(()=>e("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),Nt=[Dt];function Ut(s,l,b,k,m,$){return n(),t("div",St,[e("div",Ct,[(n(!0),t(W,null,$o(s.tabList,u=>(n(),t("div",{key:u,class:ro(["tab-item",s.currentTab==u?"tab-item-active":""]),onClick:_=>s.changeTab(u)},[e("span",null,a(u),1),s.currentTab==u&&s.getListNum()?(n(),t("p",Lt,a(s.getListNum()),1)):U("",!0)],10,mt))),128))]),e("div",Pt,[e("div",Bt,[e("div",It,[Rt,e("div",null,[e("span",null,a(s.sortValue),1),jt,Ot])]),e("div",Vt,[e("div",{class:"sort-item",onClick:l[0]||(l[0]=u=>s.changeSort("APY"))},"APY"),e("div",{class:"sort-item",onClick:l[1]||(l[1]=u=>s.changeSort("TVL"))},"TVL")])]),e("div",Tt,[(n(),t("svg",{"aria-hidden":"true",class:ro(["refresh-icon",s.isRefresh?"refreshing":""]),onClick:l[2]||(l[2]=(...u)=>s.clickRefresh&&s.clickRefresh(...u))},Nt,2))])])])}const qt=so(At,[["render",Ut],["__scopeId","data-v-27500767"]]),Yt=oo({components:{VaultsTabs:qt},setup(){No();const s=Lo(),l=h(()=>s),b=Co(),k=h(()=>b),m=wo(),$=h(()=>m),u=vo(),_=h(()=>u),L=h(()=>$.value.positionInfoObj),C=h(()=>l.value.chainName),R=B(!1),w=B(!1),j=B("TVL"),o=B(["APY"]),A=B(!1),r=i=>{console.log(i,"w121");const S=[];S.push(j.value),o.value.forEach((v,c)=>{v!=i&&S.push(v)}),o.value=S,j.value=i,q($.value.positionInfoList)};zo(()=>{document.addEventListener("click",()=>{z("")})});const y=B([]),V=B(!0),q=i=>{console.log(i,"##poolList");const S=[];i.filter(c=>!c.is_pause).forEach(c=>{var eo,no,to,lo,ao,io,Z,Bo,Io,Ro,jo;const p=l.value.addressLpTokens[c.address],Y=k.value.poolsObj[c.address];console.log($.value.apyObj,"##autoPool.value.apyObj");const E=((eo=$.value.apyObj[c.id])==null?void 0:eo.apr)||"0%",go=((no=$.value.apyObj[c.id])==null?void 0:no.resultApr)||"0",ko=((to=$.value.apyObj[c.id])==null?void 0:to.tvl)||0;console.log(c.autoPoolPositionInfo.id,"###watchPools 246"),console.log(p,"##statsObj");const yo=c.needReverse?((Z=k.value.tokensObj[(io=c.coinB)==null?void 0:io.address])==null?void 0:Z.labels)||[]:((ao=k.value.tokensObj[(lo=c.coinA)==null?void 0:lo.address])==null?void 0:ao.labels)||[],fo=c.needReverse?((Io=k.value.tokensObj[(Bo=c.coinA)==null?void 0:Bo.address])==null?void 0:Io.labels)||[]:((jo=k.value.tokensObj[(Ro=c.coinB)==null?void 0:Ro.address])==null?void 0:jo.labels)||[],bo=[...new Set(yo.concat(fo))];S.push({...c,liqidity:ko,vol:p?p.vol_in_usd_24h:"0",fee:c.fee?c.fee:Y!=null&&Y.fee?Y.fee:"--",labels:bo,isFarming:c==null?void 0:c.isFarming,fee_24_h:p&&p.fee_24_h,apy:E,resultApr:go})});let v=[];j.value=="APY"?v=S.sort((c,p)=>p.resultApr-c.resultApr):v=S.sort((c,p)=>p.liqidity-c.liqidity),y.value=v,V.value=!1,console.log(y.value.length,"##list.value.length"),b.setAutoPoolNum(y.value.length),console.log(y.value,"##list.value")};x(()=>[$.value.positionInfoList,$.value.apyObj,k.value.poolConfigObj],([i,S,v])=>{console.log("执行次数###",v),i&&i.length>0&&v&&!J(v)&&(console.log(i,"###autoPoolList"),q(i))},{immediate:!0,deep:!0}),x(()=>[_.value.address,$.value.autoPoolList,k.value.poolConfigObj],([i,S,v])=>{i&&S&&S.length>0&&v&&!J(v)&&m.getMyAutoPoolPosition()},{immediate:!0});const T=B(null),D=h(()=>T.value&&T.value.firstToken?T.value.firstToken:null),d=h(()=>T.value&&T.value.lastToken?T.value.lastToken:null),O=B(),M=B(""),F=()=>{let i=[];i=y.value,console.log(i,"##pageList");const S=i.filter((p,Y)=>D.value&&d.value?p.coinA.address==D.value.address&&p.coinB.address==d.value.address||p.coinA.address==d.value.address&&p.coinB.address==D.value.address:D.value?p.coinA.address.toLowerCase().includes(D.value.address.toLowerCase())||p.coinB.address.toLowerCase().includes(D.value.address.toLowerCase()):d.value?p.coinA.address.toLowerCase().includes(d.value.address.toLowerCase())||p.coinB.address.toLowerCase().includes(d.value.address.toLowerCase()):i);let v=[],c=[];console.log(S,"##filterArr"),S.forEach((p,Y)=>{console.log(p,"irem##");const E=L.value&&L.value[p.id];console.log(E,"##positionInfo"),R.value&&Number(E==null?void 0:E.myLiquidity)>0&&_.value.connected?c.push(p):v.push({...p})}),M.value=v.reduce((p,Y)=>p+Y.poolUSD,0),console.log(v,"121arrnewValnewValnewVal"),O.value=R.value&&_.value.connected?c:v,console.log(O.value,"##showList.value "),V.value||(R.value&&_.value.connected?b.setAutoPoolNum(c.length):b.setAutoPoolNum(v.length))};x(()=>[D.value,d.value,y.value,R.value,_.value.address],([i,S,v,c])=>{(i||S||v||c)&&(console.log("newValnewValnewVal",i,S,v,JSON.stringify(v)),F())},{immediate:!0}),Ho(()=>{b.setAutoPoolNum("--")});const K=h(()=>k.value.autoPoolNum),z=i=>{i=="label"?(s.setIsSelect("pools"),A.value=!A.value,w.value=!1,l.value.setIsShowMore(!1)):i=="select"?(s.setIsSelect("pools"),w.value=!w.value,A.value=!1,l.value.setIsShowMore(!1)):(w.value=!1,A.value=!1)};x(()=>l.value.isSelect,i=>{i!=="pools"&&z("")},{immediate:!0});const Q=mo(),H=()=>{V.value=!0,m.getAutoPoolList(),m.getAutoPoolAPY()};return x(()=>l.value.isRefresh,i=>{H()},{immediate:!0}),x(()=>C.value,i=>{i=="Aptos"&&Q.push("/pools")},{immediate:!0}),{totalTVL:M,clickRefresh:H,isMyLiquidity:R,chainName:C,store:l,select:w,selectValue:j,selectList:o,label:A,changeSort:r,list:y,listLoading:V,showList:O,childTokenSelectRef:T,wallet:_,autoPoolNum:K}}});const Mt={class:"vaults-container-new"},Ft={class:"vaults-container-center"},Et={class:"auto-pool"},Wt={key:0,class:"upgrade-loading pc-loading"},zt={key:1,class:"upgrade-loading h5-loading"},Ht={key:3,class:"no-data"},Jt=e("img",{src:Xo},null,-1),Kt=e("span",null,"No vaults found",-1),Qt=[Jt,Kt];function Gt(s,l,b,k,m,$){const u=rs,_=To("VaultsTabs"),L=As,C=Ko,R=wt;return n(),t("div",Mt,[f(u,{list:s.showList,"total-t-v-l":s.totalTVL,"list-loading":s.listLoading},null,8,["list","total-t-v-l","list-loading"]),e("div",Ft,[f(_,{"select-value":s.selectValue,"show-list":s.showList,onChangeSort:l[0]||(l[0]=w=>s.changeSort(w)),onChangeTab:l[1]||(l[1]=w=>{s.isMyLiquidity=w}),onClickRefresh:s.clickRefresh},null,8,["select-value","show-list","onClickRefresh"]),e("div",Et,[s.listLoading?(n(),t("div",Wt,[f(L)])):U("",!0),s.listLoading?(n(),t("div",zt,[f(C,{type:"poolsCard",loading:!0})])):(n(),co(R,{key:2,list:s.showList},null,8,["list"])),s.autoPoolNum!=="--"&&Number(s.autoPoolNum)<=0&&!s.listLoading?(n(),t("div",Ht,Qt)):U("",!0)])])])}const vl=so(Yt,[["render",Gt]]);export{vl as default};
