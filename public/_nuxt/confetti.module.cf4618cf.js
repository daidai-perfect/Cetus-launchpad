import{M as Qi,A as ts,S as es,B as rs,D as ns,E as is,H as ss,I as os,J as as,K as ls,L as us,N as cs,O as hs,P as fs,Q as ds,R as gs,U as bn,V as Mr,W as ps,Y as vs,Z as ms,_ as An,$ as ws,a0 as Sn,a1 as cr,a2 as Pr,a3 as ci,a4 as Ir,a5 as Ms,a6 as ys,a7 as hn,a8 as _s,a9 as bs,aa as As,ab as Ss,ac as Cs,ad as Is,ae as Os,c as me,u as Es,af as Ts,b as Wn,ag as Vn}from"./index.79763a93.js";import"./decimal.a2826370.js";import{D as hi}from"./decimal.765d8738.js";import{a8 as fi,a7 as Pe,m as St,ah as ks,a as jr,r as ce,A as We,C as Bs,o as bt,c as Or,w as tr,u as er,h as D,f as zt,i as _t,F as rr,E as nr,I as Zn,x as Gt,G as yr,j as $n,$ as di,Y as Ns,B as Rs,p as Lr,k as Fr,e as qr,z as Ps,a1 as js,a2 as pr,q as Ls,l as vr,y as Kn}from"./entry.72cf903d.js";/* empty css              */import{f as gi,u as Dr,e as Fs,b as qs,A as mr}from"./index.8e642dee.js";import{I as Ds}from"./icon-tooltip.e455d857.js";import{h as ie,b as Us,o as pi,a as fn,N as vi,O as xs}from"./common.f2e8d2dc.js";import{C as Ws}from"./coin-img.b1791ff9.js";const mi="â€¦";function Vs(t){if(t.length<=6)return t;const e=t.startsWith("0x")?2:0;return`0x${t.slice(e,e+4)}${mi}${t.slice(-4)}`}function Zs(t){return`${t.slice(0,10)}${mi}`}const $s=Object.freeze(Object.defineProperty({__proto__:null,MIST_PER_SUI:Qi,MOVE_STDLIB_ADDRESS:ts,SUI_ADDRESS_LENGTH:es,SUI_CLOCK_OBJECT_ID:rs,SUI_DECIMALS:ns,SUI_FRAMEWORK_ADDRESS:is,SUI_SYSTEM_ADDRESS:ss,SUI_SYSTEM_MODULE_NAME:os,SUI_SYSTEM_STATE_OBJECT_ID:as,SUI_TYPE_ARG:ls,formatAddress:Vs,formatDigest:Zs,fromB64:us,fromHEX:cs,isValidSuiAddress:hs,isValidSuiNSName:fs,isValidSuiObjectId:ds,isValidTransactionDigest:gs,normalizeStructTag:bn,normalizeSuiAddress:Mr,normalizeSuiNSName:ps,normalizeSuiObjectId:vs,parseStructTag:ms,toB64:An,toHEX:ws},Symbol.toStringTag,{value:"Module"}));var wi=t=>{throw TypeError(t)},Mi=(t,e,r)=>e.has(t)||wi("Cannot "+r),$t=(t,e,r)=>(Mi(t,e,"read from private field"),r?r.call(t):e.get(t)),yi=(t,e,r)=>e.has(t)?wi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ks=(t,e,r,i)=>(Mi(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),Te,Yt;class _i{async getObject(e){const[r,i]=await Promise.all([this.get("OwnedObject",e),this.get("SharedOrImmutableObject",e)]);return r??i??null}async getObjects(e){return Promise.all([...e.map(r=>this.getObject(r))])}async addObject(e){return e.owner?await this.set("OwnedObject",e.objectId,e):await this.set("SharedOrImmutableObject",e.objectId,e),e}async addObjects(e){await Promise.all(e.map(async r=>this.addObject(r)))}async deleteObject(e){await Promise.all([this.delete("OwnedObject",e),this.delete("SharedOrImmutableObject",e)])}async deleteObjects(e){await Promise.all(e.map(r=>this.deleteObject(r)))}async getMoveFunctionDefinition(e){const r=`${Mr(e.package)}::${e.module}::${e.function}`;return this.get("MoveFunction",r)}async addMoveFunctionDefinition(e){const r=Mr(e.package),i=`${r}::${e.module}::${e.function}`,s={...e,package:r};return await this.set("MoveFunction",i,s),s}async deleteMoveFunctionDefinition(e){const r=`${Mr(e.package)}::${e.module}::${e.function}`;await this.delete("MoveFunction",r)}async getCustom(e){return this.get("Custom",e)}async setCustom(e,r){return this.set("Custom",e,r)}async deleteCustom(e){return this.delete("Custom",e)}}class zs extends _i{constructor(){super(...arguments),yi(this,Te,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(e,r){return $t(this,Te)[e].get(r)??null}async set(e,r,i){$t(this,Te)[e].set(r,i)}async delete(e,r){$t(this,Te)[e].delete(r)}async clear(e){if(e)$t(this,Te)[e].clear();else for(const r of Object.values($t(this,Te)))r.clear()}}Te=new WeakMap;class bi{constructor({cache:e=new zs}){yi(this,Yt),Ks(this,Yt,e)}asPlugin(){return async(e,r,i)=>{const s=e.inputs.filter(c=>c.UnresolvedObject).map(c=>c.UnresolvedObject.objectId),l=(await $t(this,Yt).getObjects(s)).filter(c=>c!==null),a=new Map(l.map(c=>[c.objectId,c]));for(const c of e.inputs){if(!c.UnresolvedObject)continue;const p=a.get(c.UnresolvedObject.objectId);p&&(p.initialSharedVersion&&!c.UnresolvedObject.initialSharedVersion?c.UnresolvedObject.initialSharedVersion=p.initialSharedVersion:(p.version&&!c.UnresolvedObject.version&&(c.UnresolvedObject.version=p.version),p.digest&&!c.UnresolvedObject.digest&&(c.UnresolvedObject.digest=p.digest)))}await Promise.all(e.commands.map(async c=>{if(c.MoveCall){const p=await this.getMoveFunctionDefinition({package:c.MoveCall.package,module:c.MoveCall.module,function:c.MoveCall.function});p&&(c.MoveCall._argumentTypes=p.parameters)}})),await i(),await Promise.all(e.commands.map(async c=>{var p;(p=c.MoveCall)!=null&&p._argumentTypes&&await $t(this,Yt).addMoveFunctionDefinition({package:c.MoveCall.package,module:c.MoveCall.module,function:c.MoveCall.function,parameters:c.MoveCall._argumentTypes})}))}}async clear(){await $t(this,Yt).clear()}async getMoveFunctionDefinition(e){return $t(this,Yt).getMoveFunctionDefinition(e)}async getObjects(e){return $t(this,Yt).getObjects(e)}async deleteObjects(e){return $t(this,Yt).deleteObjects(e)}async clearOwnedObjects(){await $t(this,Yt).clear("OwnedObject")}async clearCustom(){await $t(this,Yt).clear("Custom")}async getCustom(e){return $t(this,Yt).getCustom(e)}async setCustom(e,r){return $t(this,Yt).setCustom(e,r)}async deleteCustom(e){return $t(this,Yt).deleteCustom(e)}async applyEffects(e){if(!e.V2)throw new Error(`Unsupported transaction effects version ${e.$kind}`);const{lamportVersion:r,changedObjects:i}=e.V2,s=[],l=[];i.map(async([a,c])=>{var p;if(c.outputState.NotExist)await $t(this,Yt).deleteObject(a);else if(c.outputState.ObjectWrite){const[v,y]=c.outputState.ObjectWrite;l.push({objectId:a,digest:v,version:r,owner:y.AddressOwner??y.ObjectOwner??null,initialSharedVersion:((p=y.Shared)==null?void 0:p.initialSharedVersion)??null})}}),await Promise.all([$t(this,Yt).addObjects(l),$t(this,Yt).deleteObjects(s)])}}Yt=new WeakMap;var Ai=t=>{throw TypeError(t)},Si=(t,e,r)=>e.has(t)||Ai("Cannot "+r),Je=(t,e,r)=>(Si(t,e,"read from private field"),r?r.call(t):e.get(t)),zn=(t,e,r)=>e.has(t)?Ai("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),un=(t,e,r,i)=>(Si(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),Fe,qe;class Ci{constructor({client:e,...r}){zn(this,Fe),zn(this,qe,null),un(this,Fe,e),this.cache=new bi(r)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:e,...r}){return e.addBuildPlugin(this.cache.asPlugin()),e.build({client:Je(this,Fe),...r})}async executeTransaction({transaction:e,options:r,...i}){const s=Sn(e)?await this.buildTransaction({transaction:e}):e,l=await Je(this,Fe).executeTransactionBlock({...i,transactionBlock:s,options:{...r,showRawEffects:!0}});if(l.rawEffects){const a=cr.TransactionEffects.parse(Uint8Array.from(l.rawEffects));await this.applyEffects(a)}return l}async signAndExecuteTransaction({options:e,transaction:r,...i}){r.setSenderIfNotSet(i.signer.toSuiAddress());const s=await this.buildTransaction({transaction:r}),{signature:l}=await i.signer.signTransaction(s);return await this.executeTransaction({transaction:s,signature:l,options:e})}async applyEffects(e){var r;un(this,qe,((r=e.V2)==null?void 0:r.transactionDigest)??null),await this.cache.applyEffects(e)}async waitForLastTransaction(){Je(this,qe)&&(await Je(this,Fe).waitForTransaction({digest:Je(this,qe)}),un(this,qe,null))}}Fe=new WeakMap;qe=new WeakMap;var Ii=t=>{throw TypeError(t)},Xs=(t,e,r)=>e.has(t)||Ii("Cannot "+r),ae=(t,e,r)=>(Xs(t,e,"read from private field"),r?r.call(t):e.get(t)),Oi=(t,e,r)=>e.has(t)?Ii("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),we,ke;class Ei{constructor(){Oi(this,we,[])}async runTask(e){return new Promise((r,i)=>{ae(this,we).push(()=>{e().finally(()=>{ae(this,we).shift(),ae(this,we).length>0&&ae(this,we)[0]()}).then(r,i)}),ae(this,we).length===1&&ae(this,we)[0]()})}}we=new WeakMap;class Ys{constructor(e){Oi(this,ke,[]),this.activeTasks=0,this.maxTasks=e}runTask(e){return new Promise((r,i)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,e().finally(()=>{ae(this,ke).length>0?ae(this,ke).shift()():this.activeTasks--}).then(r,i)):ae(this,ke).push(()=>{e().finally(()=>{ae(this,ke).length>0?ae(this,ke).shift()():this.activeTasks--}).then(r,i)})})}}ke=new WeakMap;var Ti=t=>{throw TypeError(t)},ki=(t,e,r)=>e.has(t)||Ti("Cannot "+r),te=(t,e,r)=>(ki(t,e,"read from private field"),r?r.call(t):e.get(t)),He=(t,e,r)=>e.has(t)?Ti("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Xn=(t,e,r,i)=>(ki(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),_r,Qe,oe,dn,br;class Js{constructor({signer:e,...r}){He(this,_r,new Ei),He(this,Qe),He(this,oe),He(this,dn,async i=>{if(!i.V2)return;const s=Cn(i).ref;s?te(this,oe).cache.setCustom("gasCoin",s):te(this,oe).cache.deleteCustom("gasCoin")}),He(this,br,async i=>{const s=await te(this,oe).cache.getCustom("gasCoin"),l=Pr.from(i);return s&&l.setGasPayment([s]),l.setSenderIfNotSet(te(this,Qe).toSuiAddress()),te(this,oe).buildTransaction({transaction:l})}),Xn(this,Qe,e),Xn(this,oe,new Ci({client:r.client,cache:r.cache}))}async applyEffects(e){return Promise.all([te(this,dn).call(this,e),te(this,oe).cache.applyEffects(e)])}async buildTransaction(e){return te(this,_r).runTask(()=>te(this,br).call(this,e))}resetCache(){return te(this,oe).reset()}waitForLastTransaction(){return te(this,oe).waitForLastTransaction()}executeTransaction(e){return te(this,_r).runTask(async()=>{const r=Sn(e)?await te(this,br).call(this,e):e,{signature:i}=await te(this,Qe).signTransaction(r),s=await te(this,oe).executeTransaction({signature:i,transaction:r}).catch(async c=>{throw await this.resetCache(),c}),l=Uint8Array.from(s.rawEffects),a=cr.TransactionEffects.parse(l);return await this.applyEffects(a),{digest:s.digest,effects:An(l)}})}}_r=new WeakMap;Qe=new WeakMap;oe=new WeakMap;dn=new WeakMap;br=new WeakMap;function Cn(t){if(!t.V2)throw new Error("Unexpected effects version");const e=t.V2.changedObjects[t.V2.gasObjectIndex];if(!e)throw new Error("Gas object not found in effects");const[r,{outputState:i}]=e;if(!i.ObjectWrite)throw new Error("Unexpected gas object state");const[s,l]=i.ObjectWrite;return{ref:{objectId:r,digest:s,version:t.V2.lamportVersion},owner:l.AddressOwner||l.ObjectOwner}}var Bi=t=>{throw TypeError(t)},In=(t,e,r)=>e.has(t)||Bi("Cannot "+r),V=(t,e,r)=>(In(t,e,"read from private field"),r?r.call(t):e.get(t)),Zt=(t,e,r)=>e.has(t)?Bi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),At=(t,e,r,i)=>(In(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),se=(t,e,r)=>(In(t,e,"access private method"),r),Yn=(t,e,r,i)=>({set _(s){At(t,e,s,r)},get _(){return V(t,e,i)}}),be,he,Er,sr,ir,or,Tr,Ve,ee,Ae,Re,Ne,On,Ar,ar,De,$e,de,re,Ni,Ri,lr,En,Pi,gn,ji;const Ge={coinBatchSize:20,initialCoinBalance:200000000n,minimumCoinBalance:50000000n,maxPoolSize:50,epochBoundaryWindow:1e3};class Hs{constructor(e){Zt(this,re),Zt(this,be),Zt(this,he),Zt(this,Er),Zt(this,sr),Zt(this,ir),Zt(this,or),Zt(this,Tr),Zt(this,Ve),Zt(this,ee),Zt(this,Ae,[]),Zt(this,Re),Zt(this,Ne,new Map),Zt(this,On,new Ei),Zt(this,Ar),Zt(this,ar,null),Zt(this,De,null),Zt(this,$e,0),Zt(this,de,null),At(this,be,e.signer),At(this,he,e.client),At(this,Er,e.coinBatchSize??Ge.coinBatchSize),At(this,sr,e.initialCoinBalance??Ge.initialCoinBalance),At(this,ir,e.minimumCoinBalance??Ge.minimumCoinBalance),At(this,Tr,e.defaultGasBudget??V(this,ir)),At(this,or,e.epochBoundaryWindow??Ge.epochBoundaryWindow),At(this,Ve,e.maxPoolSize??Ge.maxPoolSize),At(this,Re,new Ci({client:e.client,cache:e.cache})),At(this,Ar,new Ys(V(this,Ve))),At(this,ee,e.sourceCoins?new Map(e.sourceCoins.map(r=>[r,null])):null)}resetCache(){return At(this,de,null),se(this,re,lr).call(this,()=>V(this,Re).reset())}async waitForLastTransaction(){await se(this,re,lr).call(this,()=>se(this,re,En).call(this))}async executeTransaction(e){const{promise:r,resolve:i,reject:s}=Gs(),l=await se(this,re,Ni).call(this,e),a=()=>{V(this,Ar).runTask(()=>se(this,re,Ri).call(this,e,l).then(i,s))},c=new Set;return l.forEach(p=>{V(this,Ne).get(p)?(c.add(p),V(this,Ne).get(p).push(()=>{c.delete(p),c.size===0&&a()})):V(this,Ne).set(p,[])}),c.size===0&&a(),r}}be=new WeakMap;he=new WeakMap;Er=new WeakMap;sr=new WeakMap;ir=new WeakMap;or=new WeakMap;Tr=new WeakMap;Ve=new WeakMap;ee=new WeakMap;Ae=new WeakMap;Re=new WeakMap;Ne=new WeakMap;On=new WeakMap;Ar=new WeakMap;ar=new WeakMap;De=new WeakMap;$e=new WeakMap;de=new WeakMap;re=new WeakSet;Ni=async function(t){const e=new Set;let r=!1;return t.addSerializationPlugin(async(i,s,l)=>{await l(),!r&&(r=!0,i.inputs.forEach(a=>{var c,p,v,y,b;(p=(c=a.Object)==null?void 0:c.ImmOrOwnedObject)!=null&&p.objectId?e.add(a.Object.ImmOrOwnedObject.objectId):(y=(v=a.Object)==null?void 0:v.Receiving)!=null&&y.objectId?e.add(a.Object.Receiving.objectId):(b=a.UnresolvedObject)!=null&&b.objectId&&!a.UnresolvedObject.initialSharedVersion&&e.add(a.UnresolvedObject.objectId)}))}),await t.prepareForSerialization({client:V(this,he)}),e};Ri=async function(t,e){var i;let r;try{t.setSenderIfNotSet(V(this,be).toSuiAddress()),await V(this,On).runTask(async()=>{const b=t.getData();b.gasData.price||t.setGasPrice(await se(this,re,gn).call(this)),b.gasData.budget||t.setGasBudget(V(this,Tr)),await se(this,re,lr).call(this),r=await se(this,re,Pi).call(this),Yn(this,$e)._++,t.setGasPayment([{objectId:r.id,version:r.version,digest:r.digest}]),await V(this,Re).buildTransaction({transaction:t,onlyTransactionKind:!0})});const s=await t.build({client:V(this,he)}),{signature:l}=await V(this,be).signTransaction(s),a=await V(this,Re).executeTransaction({transaction:s,signature:l,options:{showEffects:!0}}),c=Uint8Array.from(a.rawEffects),p=cr.TransactionEffects.parse(c),v=Cn(p),y=(i=p.V2)==null?void 0:i.gasUsed;if(r&&y&&v.owner===V(this,be).toSuiAddress()){const b=BigInt(y.computationCost)+BigInt(y.storageCost)+BigInt(y.storageCost)-BigInt(y.storageRebate);let A=!1;new ci(t.getData()).mapArguments(C=>(C.$kind==="GasCoin"&&(A=!0),C)),!A&&r.balance>=V(this,ir)?V(this,Ae).push({id:v.ref.objectId,version:v.ref.version,digest:v.ref.digest,balance:r.balance-b}):(V(this,ee)||At(this,ee,new Map),V(this,ee).set(v.ref.objectId,v.ref))}return At(this,ar,a.digest),{digest:a.digest,effects:An(c)}}catch(s){throw r&&(V(this,ee)||At(this,ee,new Map),V(this,ee).set(r.id,null)),await se(this,re,lr).call(this,async()=>{await Promise.all([V(this,Re).cache.deleteObjects([...e]),se(this,re,En).call(this)])}),s}finally{e.forEach(s=>{const l=V(this,Ne).get(s);l&&l.length>0?l.shift()():l&&V(this,Ne).delete(s)}),Yn(this,$e)._--}};lr=async function(t){V(this,De)&&await V(this,De),At(this,De,(t==null?void 0:t().then(()=>{At(this,De,null)},()=>{}))??null)};En=async function(){const t=V(this,ar);t&&(At(this,ar,null),await V(this,he).waitForTransaction({digest:t}))};Pi=async function(){if(V(this,Ae).length===0&&V(this,$e)<=V(this,Ve)&&await se(this,re,ji).call(this),V(this,Ae).length===0)throw new Error("No coins available");return V(this,Ae).shift()};gn=async function(){if((V(this,de)?V(this,de).expiration-V(this,or)-Date.now():0)>0)return V(this,de).price;if(V(this,de)){const r=Math.max(V(this,de).expiration+V(this,or)-Date.now(),1e3);await new Promise(i=>setTimeout(i,r))}const e=await V(this,he).getLatestSuiSystemState();return At(this,de,{price:BigInt(e.referenceGasPrice),expiration:Number.parseInt(e.epochStartTimestampMs,10)+Number.parseInt(e.epochDurationMs,10)}),se(this,re,gn).call(this)};ji=async function(){var v;const t=Math.min(V(this,Er),V(this,Ve)-(V(this,Ae).length+V(this,$e))+1);if(t===0)return;const e=new Pr,r=V(this,be).toSuiAddress();if(e.setSender(r),V(this,ee)){const y=[],b=[];for(const[A,C]of V(this,ee))C?y.push(C):b.push(A);if(b.length>0){const A=await V(this,he).multiGetObjects({ids:b});y.push(...A.filter(C=>C.data!==null).map(({data:C})=>({objectId:C.objectId,version:C.version,digest:C.digest})))}e.setGasPayment(y),At(this,ee,new Map)}const i=new Array(t).fill(V(this,sr)),s=e.splitCoins(e.gas,i),l=[];for(let y=0;y<i.length;y++)l.push(s[y]);e.transferObjects(l,r),await this.waitForLastTransaction();const a=await V(this,he).signAndExecuteTransaction({transaction:e,signer:V(this,be),options:{showRawEffects:!0}}),c=cr.TransactionEffects.parse(Uint8Array.from(a.rawEffects));(v=c.V2)==null||v.changedObjects.forEach(([y,{outputState:b}],A)=>{var C;A===((C=c.V2)==null?void 0:C.gasObjectIndex)||!b.ObjectWrite||V(this,Ae).push({id:y,version:c.V2.lamportVersion,digest:b.ObjectWrite[0],balance:BigInt(V(this,sr))})}),V(this,ee)||At(this,ee,new Map);const p=Cn(c).ref;V(this,ee).set(p.objectId,p),await V(this,he).waitForTransaction({digest:a.digest})};function Gs(){let t,e;return{promise:new Promise((i,s)=>{t=i,e=s}),resolve:t,reject:e}}const kr="CoinWithBalance",Jn=bn("0x2::sui::SUI");function Qs({type:t=Jn,balance:e,useGasCoin:r=!0}){return i=>{i.addIntentResolver(kr,eo);const s=t==="gas"?t:bn(t);return i.add(Ir.Intent({name:kr,inputs:{},data:{type:s===Jn&&r?"gas":s,balance:BigInt(e)}}))}}const to=_s({type:bs(),balance:As()});async function eo(t,e,r){var v,y;const i=new Set,s=new Map;if(!t.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const b of t.commands)if(b.$kind==="$Intent"&&b.$Intent.name===kr){const{type:A,balance:C}=Ms(to,b.$Intent.data);A!=="gas"&&i.add(A),s.set(A,(s.get(A)??0n)+C)}const l=new Set;for(const b of t.inputs)(v=b.Object)!=null&&v.ImmOrOwnedObject&&l.add(b.Object.ImmOrOwnedObject.objectId),(y=b.UnresolvedObject)!=null&&y.objectId&&l.add(b.UnresolvedObject.objectId);const a=new Map,c=ys(e);await Promise.all([...i].map(async b=>{a.set(b,await ro({coinType:b,balance:s.get(b),client:c,owner:t.sender,usedIds:l}))}));const p=new Map;p.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[b,A]of t.commands.entries()){if(A.$kind!=="$Intent"||A.$Intent.name!==kr)continue;const{type:C,balance:q}=A.$Intent.data,j=[];if(!p.has(C)){const[P,...G]=a.get(C).map(L=>t.addInput("object",hn.ObjectRef({objectId:L.coinObjectId,digest:L.digest,version:L.version})));G.length>0&&j.push(Ir.MergeCoins(P,G)),p.set(C,P)}j.push(Ir.SplitCoins(p.get(C),[t.addInput("pure",hn.Pure(cr.u64().serialize(q)))])),t.replaceCommand(b,j),t.mapArguments(P=>P.$kind==="Result"&&P.Result===b?{$kind:"NestedResult",NestedResult:[b+j.length-1,0]}:P)}return r()}async function ro({coinType:t,balance:e,client:r,owner:i,usedIds:s}){let l=e;const a=[];return c();async function c(p=null){const{data:v,hasNextPage:y,nextCursor:b}=await r.getCoins({owner:i,coinType:t,cursor:p}),A=v.sort((C,q)=>Number(BigInt(q.balance)-BigInt(C.balance)));for(const C of A){if(s.has(C.coinObjectId))continue;const q=BigInt(C.balance);if(a.push(C),l-=q,l<=0)return a}if(y)return c(b);throw new Error(`Not enough coins of type ${t} to satisfy requested balance`)}}const no={pure:Ss(t=>e=>e.pure(t)),object:t=>e=>e.object(t),sharedObjectRef:(...t)=>e=>e.sharedObjectRef(...t),objectRef:(...t)=>e=>e.objectRef(...t),receivingRef:(...t)=>e=>e.receivingRef(...t)},io=Object.freeze(Object.defineProperty({__proto__:null,Arguments:no,AsyncCache:_i,Commands:Ir,Inputs:hn,ObjectCache:bi,ParallelTransactionExecutor:Hs,SerialTransactionExecutor:Js,Transaction:Pr,TransactionDataBuilder:ci,UpgradePolicy:Cs,coinWithBalance:Qs,getPureBcsSchema:Is,isTransaction:Sn,normalizedTypeToMoveTypeSignature:Os},Symbol.toStringTag,{value:"Module"}));async function ju(t,e){var s,l,a;const r=t==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":t,i=`${me.Sui.api}/v2/sui/coin/kline?coin_address=${r}&interval=day&market=${e}`;try{const c=await $fetch(i);return{price:((l=(s=c==null?void 0:c.data)==null?void 0:s.list)==null?void 0:l.reverse())||[],daily_rate:(a=c==null?void 0:c.data)==null?void 0:a.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}}async function Lu(t){try{const{prices:e}=await $fetch(`https://api.coingecko.com/api/v3/coins/${t}/market_chart?vs_currency=usd&id=${t}&days=7&interval=daily`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),i=(await $fetch(`https://api.coingecko.com/api/v3/coins/markets?ids=${t}&vs_currency=usd&price_change_percentage=24h`,{headers:{Connection:"keep-alive",Accept:"*/*"}}))[0].price_change_percentage_24h,s=[];return e.forEach(l=>{s.push({price:new hi(l[1]).toString(),timestamp:l[0]})}),{price:s,daily_rate:i}}catch{return{price:[],daily_rate:""}}}const so=fi($s),oo=fi(io);var pn=so,ao=oo,lo=Object.create,Tn=Object.defineProperty,uo=Object.defineProperties,co=Object.getOwnPropertyDescriptor,ho=Object.getOwnPropertyDescriptors,Li=Object.getOwnPropertyNames,Hn=Object.getOwnPropertySymbols,fo=Object.getPrototypeOf,Fi=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable,Gn=(t,e,r)=>e in t?Tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,po=(t,e)=>{for(var r in e||(e={}))Fi.call(e,r)&&Gn(t,r,e[r]);if(Hn)for(var r of Hn(e))go.call(e,r)&&Gn(t,r,e[r]);return t},vo=(t,e)=>uo(t,ho(e)),mo=(t=>typeof Pe<"u"?Pe:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof Pe<"u"?Pe:e)[r]}):t)(function(t){if(typeof Pe<"u")return Pe.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),wo=(t,e)=>function(){return e||(0,t[Li(t)[0]])((e={exports:{}}).exports,e),e.exports},Mo=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Li(e))!Fi.call(t,s)&&s!==r&&Tn(t,s,{get:()=>e[s],enumerable:!(i=co(e,s))||i.enumerable});return t},hr=(t,e,r)=>(r=t!=null?lo(fo(t)):{},Mo(!t||!t.__esModule?Tn(r,"default",{value:t,enumerable:!0}):r,t)),Mt=(t,e,r)=>new Promise((i,s)=>{var l=p=>{try{c(r.next(p))}catch(v){s(v)}},a=p=>{try{c(r.throw(p))}catch(v){s(v)}},c=p=>p.done?i(p.value):Promise.resolve(p.value).then(l,a);c((r=r.apply(t,e)).next())}),fr=wo({"node_modules/bn.js/lib/bn.js"(t,e){(function(r,i){function s(w,n){if(!w)throw new Error(n||"Assertion failed")}function l(w,n){w.super_=n;var u=function(){};u.prototype=n.prototype,w.prototype=new u,w.prototype.constructor=w}function a(w,n,u){if(a.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((n==="le"||n==="be")&&(u=n,n=10),this._init(w||0,n||10,u||"be"))}typeof r=="object"?r.exports=a:i.BN=a,a.BN=a,a.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=mo("buffer").Buffer}catch{}a.isBN=function(n){return n instanceof a?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===a.wordSize&&Array.isArray(n.words)},a.max=function(n,u){return n.cmp(u)>0?n:u},a.min=function(n,u){return n.cmp(u)<0?n:u},a.prototype._init=function(n,u,d){if(typeof n=="number")return this._initNumber(n,u,d);if(typeof n=="object")return this._initArray(n,u,d);u==="hex"&&(u=16),s(u===(u|0)&&u>=2&&u<=36),n=n.toString().replace(/\s+/g,"");var M=0;n[0]==="-"&&(M++,this.negative=1),M<n.length&&(u===16?this._parseHex(n,M,d):(this._parseBase(n,u,M),d==="le"&&this._initArray(this.toArray(),u,d)))},a.prototype._initNumber=function(n,u,d){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(s(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),u,d)},a.prototype._initArray=function(n,u,d){if(s(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var _,f,h=0;if(d==="be")for(M=n.length-1,_=0;M>=0;M-=3)f=n[M]|n[M-1]<<8|n[M-2]<<16,this.words[_]|=f<<h&67108863,this.words[_+1]=f>>>26-h&67108863,h+=24,h>=26&&(h-=26,_++);else if(d==="le")for(M=0,_=0;M<n.length;M+=3)f=n[M]|n[M+1]<<8|n[M+2]<<16,this.words[_]|=f<<h&67108863,this.words[_+1]=f>>>26-h&67108863,h+=24,h>=26&&(h-=26,_++);return this._strip()};function p(w,n){var u=w.charCodeAt(n);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;s(!1,"Invalid character in "+w)}function v(w,n,u){var d=p(w,u);return u-1>=n&&(d|=p(w,u-1)<<4),d}a.prototype._parseHex=function(n,u,d){this.length=Math.ceil((n.length-u)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var _=0,f=0,h;if(d==="be")for(M=n.length-1;M>=u;M-=2)h=v(n,u,M)<<_,this.words[f]|=h&67108863,_>=18?(_-=18,f+=1,this.words[f]|=h>>>26):_+=8;else{var g=n.length-u;for(M=g%2===0?u+1:u;M<n.length;M+=2)h=v(n,u,M)<<_,this.words[f]|=h&67108863,_>=18?(_-=18,f+=1,this.words[f]|=h>>>26):_+=8}this._strip()};function y(w,n,u,d){for(var M=0,_=0,f=Math.min(w.length,u),h=n;h<f;h++){var g=w.charCodeAt(h)-48;M*=d,g>=49?_=g-49+10:g>=17?_=g-17+10:_=g,s(g>=0&&_<d,"Invalid character"),M+=_}return M}a.prototype._parseBase=function(n,u,d){this.words=[0],this.length=1;for(var M=0,_=1;_<=67108863;_*=u)M++;M--,_=_/u|0;for(var f=n.length-d,h=f%M,g=Math.min(f,f-h)+d,o=0,m=d;m<g;m+=M)o=y(n,m,m+M,u),this.imuln(_),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(h!==0){var N=1;for(o=y(n,m,n.length,u),m=0;m<h;m++)N*=u;this.imuln(N),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},a.prototype.copy=function(n){n.words=new Array(this.length);for(var u=0;u<this.length;u++)n.words[u]=this.words[u];n.length=this.length,n.negative=this.negative,n.red=this.red};function b(w,n){w.words=n.words,w.length=n.length,w.negative=n.negative,w.red=n.red}if(a.prototype._move=function(n){b(n,this)},a.prototype.clone=function(){var n=new a(null);return this.copy(n),n},a.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{a.prototype.inspect=A}else a.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],q=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(n,u){n=n||10,u=u|0||1;var d;if(n===16||n==="hex"){d="";for(var M=0,_=0,f=0;f<this.length;f++){var h=this.words[f],g=((h<<M|_)&16777215).toString(16);_=h>>>24-M&16777215,M+=2,M>=26&&(M-=26,f--),_!==0||f!==this.length-1?d=C[6-g.length]+g+d:d=g+d}for(_!==0&&(d=_.toString(16)+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(n===(n|0)&&n>=2&&n<=36){var o=q[n],m=j[n];d="";var N=this.clone();for(N.negative=0;!N.isZero();){var R=N.modrn(m).toString(n);N=N.idivn(m),N.isZero()?d=R+d:d=C[o-R.length]+R+d}for(this.isZero()&&(d="0"+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},a.prototype.toJSON=function(){return this.toString(16,2)},c&&(a.prototype.toBuffer=function(n,u){return this.toArrayLike(c,n,u)}),a.prototype.toArray=function(n,u){return this.toArrayLike(Array,n,u)};var P=function(n,u){return n.allocUnsafe?n.allocUnsafe(u):new n(u)};a.prototype.toArrayLike=function(n,u,d){this._strip();var M=this.byteLength(),_=d||Math.max(1,M);s(M<=_,"byte array longer than desired length"),s(_>0,"Requested array length <= 0");var f=P(n,_),h=u==="le"?"LE":"BE";return this["_toArrayLike"+h](f,M),f},a.prototype._toArrayLikeLE=function(n,u){for(var d=0,M=0,_=0,f=0;_<this.length;_++){var h=this.words[_]<<f|M;n[d++]=h&255,d<n.length&&(n[d++]=h>>8&255),d<n.length&&(n[d++]=h>>16&255),f===6?(d<n.length&&(n[d++]=h>>24&255),M=0,f=0):(M=h>>>24,f+=2)}if(d<n.length)for(n[d++]=M;d<n.length;)n[d++]=0},a.prototype._toArrayLikeBE=function(n,u){for(var d=n.length-1,M=0,_=0,f=0;_<this.length;_++){var h=this.words[_]<<f|M;n[d--]=h&255,d>=0&&(n[d--]=h>>8&255),d>=0&&(n[d--]=h>>16&255),f===6?(d>=0&&(n[d--]=h>>24&255),M=0,f=0):(M=h>>>24,f+=2)}if(d>=0)for(n[d--]=M;d>=0;)n[d--]=0},Math.clz32?a.prototype._countBits=function(n){return 32-Math.clz32(n)}:a.prototype._countBits=function(n){var u=n,d=0;return u>=4096&&(d+=13,u>>>=13),u>=64&&(d+=7,u>>>=7),u>=8&&(d+=4,u>>>=4),u>=2&&(d+=2,u>>>=2),d+u},a.prototype._zeroBits=function(n){if(n===0)return 26;var u=n,d=0;return u&8191||(d+=13,u>>>=13),u&127||(d+=7,u>>>=7),u&15||(d+=4,u>>>=4),u&3||(d+=2,u>>>=2),u&1||d++,d},a.prototype.bitLength=function(){var n=this.words[this.length-1],u=this._countBits(n);return(this.length-1)*26+u};function G(w){for(var n=new Array(w.bitLength()),u=0;u<n.length;u++){var d=u/26|0,M=u%26;n[u]=w.words[d]>>>M&1}return n}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,u=0;u<this.length;u++){var d=this._zeroBits(this.words[u]);if(n+=d,d!==26)break}return n},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},a.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var u=0;u<n.length;u++)this.words[u]=this.words[u]|n.words[u];return this._strip()},a.prototype.ior=function(n){return s((this.negative|n.negative)===0),this.iuor(n)},a.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},a.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},a.prototype.iuand=function(n){var u;this.length>n.length?u=n:u=this;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]&n.words[d];return this.length=u.length,this._strip()},a.prototype.iand=function(n){return s((this.negative|n.negative)===0),this.iuand(n)},a.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},a.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},a.prototype.iuxor=function(n){var u,d;this.length>n.length?(u=this,d=n):(u=n,d=this);for(var M=0;M<d.length;M++)this.words[M]=u.words[M]^d.words[M];if(this!==u)for(;M<u.length;M++)this.words[M]=u.words[M];return this.length=u.length,this._strip()},a.prototype.ixor=function(n){return s((this.negative|n.negative)===0),this.iuxor(n)},a.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},a.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},a.prototype.inotn=function(n){s(typeof n=="number"&&n>=0);var u=Math.ceil(n/26)|0,d=n%26;this._expand(u),d>0&&u--;for(var M=0;M<u;M++)this.words[M]=~this.words[M]&67108863;return d>0&&(this.words[M]=~this.words[M]&67108863>>26-d),this._strip()},a.prototype.notn=function(n){return this.clone().inotn(n)},a.prototype.setn=function(n,u){s(typeof n=="number"&&n>=0);var d=n/26|0,M=n%26;return this._expand(d+1),u?this.words[d]=this.words[d]|1<<M:this.words[d]=this.words[d]&~(1<<M),this._strip()},a.prototype.iadd=function(n){var u;if(this.negative!==0&&n.negative===0)return this.negative=0,u=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,u=this.isub(n),n.negative=1,u._normSign();var d,M;this.length>n.length?(d=this,M=n):(d=n,M=this);for(var _=0,f=0;f<M.length;f++)u=(d.words[f]|0)+(M.words[f]|0)+_,this.words[f]=u&67108863,_=u>>>26;for(;_!==0&&f<d.length;f++)u=(d.words[f]|0)+_,this.words[f]=u&67108863,_=u>>>26;if(this.length=d.length,_!==0)this.words[this.length]=_,this.length++;else if(d!==this)for(;f<d.length;f++)this.words[f]=d.words[f];return this},a.prototype.add=function(n){var u;return n.negative!==0&&this.negative===0?(n.negative=0,u=this.sub(n),n.negative^=1,u):n.negative===0&&this.negative!==0?(this.negative=0,u=n.sub(this),this.negative=1,u):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},a.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var u=this.iadd(n);return n.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var d=this.cmp(n);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,_;d>0?(M=this,_=n):(M=n,_=this);for(var f=0,h=0;h<_.length;h++)u=(M.words[h]|0)-(_.words[h]|0)+f,f=u>>26,this.words[h]=u&67108863;for(;f!==0&&h<M.length;h++)u=(M.words[h]|0)+f,f=u>>26,this.words[h]=u&67108863;if(f===0&&h<M.length&&M!==this)for(;h<M.length;h++)this.words[h]=M.words[h];return this.length=Math.max(this.length,h),M!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(n){return this.clone().isub(n)};function L(w,n,u){u.negative=n.negative^w.negative;var d=w.length+n.length|0;u.length=d,d=d-1|0;var M=w.words[0]|0,_=n.words[0]|0,f=M*_,h=f&67108863,g=f/67108864|0;u.words[0]=h;for(var o=1;o<d;o++){for(var m=g>>>26,N=g&67108863,R=Math.min(o,n.length-1),T=Math.max(0,o-w.length+1);T<=R;T++){var Z=o-T|0;M=w.words[Z]|0,_=n.words[T]|0,f=M*_+N,m+=f/67108864|0,N=f&67108863}u.words[o]=N|0,g=m|0}return g!==0?u.words[o]=g|0:u.length--,u._strip()}var F=function(n,u,d){var M=n.words,_=u.words,f=d.words,h=0,g,o,m,N=M[0]|0,R=N&8191,T=N>>>13,Z=M[1]|0,K=Z&8191,H=Z>>>13,lt=M[2]|0,Q=lt&8191,rt=lt>>>13,nt=M[3]|0,it=nt&8191,st=nt>>>13,Xt=M[4]|0,ot=Xt&8191,ut=Xt>>>13,Ht=M[5]|0,vt=Ht&8191,mt=Ht>>>13,Oe=M[6]|0,gt=Oe&8191,wt=Oe>>>13,ve=M[7]|0,ht=ve&8191,at=ve>>>13,ft=M[8]|0,z=ft&8191,ct=ft>>>13,Ee=M[9]|0,X=Ee&8191,pt=Ee>>>13,Ye=_[0]|0,yt=Ye&8191,Ct=Ye>>>13,Rn=_[1]|0,It=Rn&8191,Ot=Rn>>>13,Pn=_[2]|0,Et=Pn&8191,Tt=Pn>>>13,jn=_[3]|0,kt=jn&8191,Bt=jn>>>13,Ln=_[4]|0,Nt=Ln&8191,Rt=Ln>>>13,Fn=_[5]|0,Pt=Fn&8191,jt=Fn>>>13,qn=_[6]|0,Lt=qn&8191,Ft=qn>>>13,Dn=_[7]|0,qt=Dn&8191,Dt=Dn>>>13,Un=_[8]|0,Ut=Un&8191,xt=Un>>>13,xn=_[9]|0,Wt=xn&8191,Vt=xn>>>13;d.negative=n.negative^u.negative,d.length=19,g=Math.imul(R,yt),o=Math.imul(R,Ct),o=o+Math.imul(T,yt)|0,m=Math.imul(T,Ct);var Vr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,g=Math.imul(K,yt),o=Math.imul(K,Ct),o=o+Math.imul(H,yt)|0,m=Math.imul(H,Ct),g=g+Math.imul(R,It)|0,o=o+Math.imul(R,Ot)|0,o=o+Math.imul(T,It)|0,m=m+Math.imul(T,Ot)|0;var Zr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,g=Math.imul(Q,yt),o=Math.imul(Q,Ct),o=o+Math.imul(rt,yt)|0,m=Math.imul(rt,Ct),g=g+Math.imul(K,It)|0,o=o+Math.imul(K,Ot)|0,o=o+Math.imul(H,It)|0,m=m+Math.imul(H,Ot)|0,g=g+Math.imul(R,Et)|0,o=o+Math.imul(R,Tt)|0,o=o+Math.imul(T,Et)|0,m=m+Math.imul(T,Tt)|0;var $r=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+($r>>>26)|0,$r&=67108863,g=Math.imul(it,yt),o=Math.imul(it,Ct),o=o+Math.imul(st,yt)|0,m=Math.imul(st,Ct),g=g+Math.imul(Q,It)|0,o=o+Math.imul(Q,Ot)|0,o=o+Math.imul(rt,It)|0,m=m+Math.imul(rt,Ot)|0,g=g+Math.imul(K,Et)|0,o=o+Math.imul(K,Tt)|0,o=o+Math.imul(H,Et)|0,m=m+Math.imul(H,Tt)|0,g=g+Math.imul(R,kt)|0,o=o+Math.imul(R,Bt)|0,o=o+Math.imul(T,kt)|0,m=m+Math.imul(T,Bt)|0;var Kr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(ot,yt),o=Math.imul(ot,Ct),o=o+Math.imul(ut,yt)|0,m=Math.imul(ut,Ct),g=g+Math.imul(it,It)|0,o=o+Math.imul(it,Ot)|0,o=o+Math.imul(st,It)|0,m=m+Math.imul(st,Ot)|0,g=g+Math.imul(Q,Et)|0,o=o+Math.imul(Q,Tt)|0,o=o+Math.imul(rt,Et)|0,m=m+Math.imul(rt,Tt)|0,g=g+Math.imul(K,kt)|0,o=o+Math.imul(K,Bt)|0,o=o+Math.imul(H,kt)|0,m=m+Math.imul(H,Bt)|0,g=g+Math.imul(R,Nt)|0,o=o+Math.imul(R,Rt)|0,o=o+Math.imul(T,Nt)|0,m=m+Math.imul(T,Rt)|0;var zr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(vt,yt),o=Math.imul(vt,Ct),o=o+Math.imul(mt,yt)|0,m=Math.imul(mt,Ct),g=g+Math.imul(ot,It)|0,o=o+Math.imul(ot,Ot)|0,o=o+Math.imul(ut,It)|0,m=m+Math.imul(ut,Ot)|0,g=g+Math.imul(it,Et)|0,o=o+Math.imul(it,Tt)|0,o=o+Math.imul(st,Et)|0,m=m+Math.imul(st,Tt)|0,g=g+Math.imul(Q,kt)|0,o=o+Math.imul(Q,Bt)|0,o=o+Math.imul(rt,kt)|0,m=m+Math.imul(rt,Bt)|0,g=g+Math.imul(K,Nt)|0,o=o+Math.imul(K,Rt)|0,o=o+Math.imul(H,Nt)|0,m=m+Math.imul(H,Rt)|0,g=g+Math.imul(R,Pt)|0,o=o+Math.imul(R,jt)|0,o=o+Math.imul(T,Pt)|0,m=m+Math.imul(T,jt)|0;var Xr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,g=Math.imul(gt,yt),o=Math.imul(gt,Ct),o=o+Math.imul(wt,yt)|0,m=Math.imul(wt,Ct),g=g+Math.imul(vt,It)|0,o=o+Math.imul(vt,Ot)|0,o=o+Math.imul(mt,It)|0,m=m+Math.imul(mt,Ot)|0,g=g+Math.imul(ot,Et)|0,o=o+Math.imul(ot,Tt)|0,o=o+Math.imul(ut,Et)|0,m=m+Math.imul(ut,Tt)|0,g=g+Math.imul(it,kt)|0,o=o+Math.imul(it,Bt)|0,o=o+Math.imul(st,kt)|0,m=m+Math.imul(st,Bt)|0,g=g+Math.imul(Q,Nt)|0,o=o+Math.imul(Q,Rt)|0,o=o+Math.imul(rt,Nt)|0,m=m+Math.imul(rt,Rt)|0,g=g+Math.imul(K,Pt)|0,o=o+Math.imul(K,jt)|0,o=o+Math.imul(H,Pt)|0,m=m+Math.imul(H,jt)|0,g=g+Math.imul(R,Lt)|0,o=o+Math.imul(R,Ft)|0,o=o+Math.imul(T,Lt)|0,m=m+Math.imul(T,Ft)|0;var Yr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,g=Math.imul(ht,yt),o=Math.imul(ht,Ct),o=o+Math.imul(at,yt)|0,m=Math.imul(at,Ct),g=g+Math.imul(gt,It)|0,o=o+Math.imul(gt,Ot)|0,o=o+Math.imul(wt,It)|0,m=m+Math.imul(wt,Ot)|0,g=g+Math.imul(vt,Et)|0,o=o+Math.imul(vt,Tt)|0,o=o+Math.imul(mt,Et)|0,m=m+Math.imul(mt,Tt)|0,g=g+Math.imul(ot,kt)|0,o=o+Math.imul(ot,Bt)|0,o=o+Math.imul(ut,kt)|0,m=m+Math.imul(ut,Bt)|0,g=g+Math.imul(it,Nt)|0,o=o+Math.imul(it,Rt)|0,o=o+Math.imul(st,Nt)|0,m=m+Math.imul(st,Rt)|0,g=g+Math.imul(Q,Pt)|0,o=o+Math.imul(Q,jt)|0,o=o+Math.imul(rt,Pt)|0,m=m+Math.imul(rt,jt)|0,g=g+Math.imul(K,Lt)|0,o=o+Math.imul(K,Ft)|0,o=o+Math.imul(H,Lt)|0,m=m+Math.imul(H,Ft)|0,g=g+Math.imul(R,qt)|0,o=o+Math.imul(R,Dt)|0,o=o+Math.imul(T,qt)|0,m=m+Math.imul(T,Dt)|0;var Jr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,g=Math.imul(z,yt),o=Math.imul(z,Ct),o=o+Math.imul(ct,yt)|0,m=Math.imul(ct,Ct),g=g+Math.imul(ht,It)|0,o=o+Math.imul(ht,Ot)|0,o=o+Math.imul(at,It)|0,m=m+Math.imul(at,Ot)|0,g=g+Math.imul(gt,Et)|0,o=o+Math.imul(gt,Tt)|0,o=o+Math.imul(wt,Et)|0,m=m+Math.imul(wt,Tt)|0,g=g+Math.imul(vt,kt)|0,o=o+Math.imul(vt,Bt)|0,o=o+Math.imul(mt,kt)|0,m=m+Math.imul(mt,Bt)|0,g=g+Math.imul(ot,Nt)|0,o=o+Math.imul(ot,Rt)|0,o=o+Math.imul(ut,Nt)|0,m=m+Math.imul(ut,Rt)|0,g=g+Math.imul(it,Pt)|0,o=o+Math.imul(it,jt)|0,o=o+Math.imul(st,Pt)|0,m=m+Math.imul(st,jt)|0,g=g+Math.imul(Q,Lt)|0,o=o+Math.imul(Q,Ft)|0,o=o+Math.imul(rt,Lt)|0,m=m+Math.imul(rt,Ft)|0,g=g+Math.imul(K,qt)|0,o=o+Math.imul(K,Dt)|0,o=o+Math.imul(H,qt)|0,m=m+Math.imul(H,Dt)|0,g=g+Math.imul(R,Ut)|0,o=o+Math.imul(R,xt)|0,o=o+Math.imul(T,Ut)|0,m=m+Math.imul(T,xt)|0;var Hr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,g=Math.imul(X,yt),o=Math.imul(X,Ct),o=o+Math.imul(pt,yt)|0,m=Math.imul(pt,Ct),g=g+Math.imul(z,It)|0,o=o+Math.imul(z,Ot)|0,o=o+Math.imul(ct,It)|0,m=m+Math.imul(ct,Ot)|0,g=g+Math.imul(ht,Et)|0,o=o+Math.imul(ht,Tt)|0,o=o+Math.imul(at,Et)|0,m=m+Math.imul(at,Tt)|0,g=g+Math.imul(gt,kt)|0,o=o+Math.imul(gt,Bt)|0,o=o+Math.imul(wt,kt)|0,m=m+Math.imul(wt,Bt)|0,g=g+Math.imul(vt,Nt)|0,o=o+Math.imul(vt,Rt)|0,o=o+Math.imul(mt,Nt)|0,m=m+Math.imul(mt,Rt)|0,g=g+Math.imul(ot,Pt)|0,o=o+Math.imul(ot,jt)|0,o=o+Math.imul(ut,Pt)|0,m=m+Math.imul(ut,jt)|0,g=g+Math.imul(it,Lt)|0,o=o+Math.imul(it,Ft)|0,o=o+Math.imul(st,Lt)|0,m=m+Math.imul(st,Ft)|0,g=g+Math.imul(Q,qt)|0,o=o+Math.imul(Q,Dt)|0,o=o+Math.imul(rt,qt)|0,m=m+Math.imul(rt,Dt)|0,g=g+Math.imul(K,Ut)|0,o=o+Math.imul(K,xt)|0,o=o+Math.imul(H,Ut)|0,m=m+Math.imul(H,xt)|0,g=g+Math.imul(R,Wt)|0,o=o+Math.imul(R,Vt)|0,o=o+Math.imul(T,Wt)|0,m=m+Math.imul(T,Vt)|0;var Gr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,g=Math.imul(X,It),o=Math.imul(X,Ot),o=o+Math.imul(pt,It)|0,m=Math.imul(pt,Ot),g=g+Math.imul(z,Et)|0,o=o+Math.imul(z,Tt)|0,o=o+Math.imul(ct,Et)|0,m=m+Math.imul(ct,Tt)|0,g=g+Math.imul(ht,kt)|0,o=o+Math.imul(ht,Bt)|0,o=o+Math.imul(at,kt)|0,m=m+Math.imul(at,Bt)|0,g=g+Math.imul(gt,Nt)|0,o=o+Math.imul(gt,Rt)|0,o=o+Math.imul(wt,Nt)|0,m=m+Math.imul(wt,Rt)|0,g=g+Math.imul(vt,Pt)|0,o=o+Math.imul(vt,jt)|0,o=o+Math.imul(mt,Pt)|0,m=m+Math.imul(mt,jt)|0,g=g+Math.imul(ot,Lt)|0,o=o+Math.imul(ot,Ft)|0,o=o+Math.imul(ut,Lt)|0,m=m+Math.imul(ut,Ft)|0,g=g+Math.imul(it,qt)|0,o=o+Math.imul(it,Dt)|0,o=o+Math.imul(st,qt)|0,m=m+Math.imul(st,Dt)|0,g=g+Math.imul(Q,Ut)|0,o=o+Math.imul(Q,xt)|0,o=o+Math.imul(rt,Ut)|0,m=m+Math.imul(rt,xt)|0,g=g+Math.imul(K,Wt)|0,o=o+Math.imul(K,Vt)|0,o=o+Math.imul(H,Wt)|0,m=m+Math.imul(H,Vt)|0;var Qr=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,g=Math.imul(X,Et),o=Math.imul(X,Tt),o=o+Math.imul(pt,Et)|0,m=Math.imul(pt,Tt),g=g+Math.imul(z,kt)|0,o=o+Math.imul(z,Bt)|0,o=o+Math.imul(ct,kt)|0,m=m+Math.imul(ct,Bt)|0,g=g+Math.imul(ht,Nt)|0,o=o+Math.imul(ht,Rt)|0,o=o+Math.imul(at,Nt)|0,m=m+Math.imul(at,Rt)|0,g=g+Math.imul(gt,Pt)|0,o=o+Math.imul(gt,jt)|0,o=o+Math.imul(wt,Pt)|0,m=m+Math.imul(wt,jt)|0,g=g+Math.imul(vt,Lt)|0,o=o+Math.imul(vt,Ft)|0,o=o+Math.imul(mt,Lt)|0,m=m+Math.imul(mt,Ft)|0,g=g+Math.imul(ot,qt)|0,o=o+Math.imul(ot,Dt)|0,o=o+Math.imul(ut,qt)|0,m=m+Math.imul(ut,Dt)|0,g=g+Math.imul(it,Ut)|0,o=o+Math.imul(it,xt)|0,o=o+Math.imul(st,Ut)|0,m=m+Math.imul(st,xt)|0,g=g+Math.imul(Q,Wt)|0,o=o+Math.imul(Q,Vt)|0,o=o+Math.imul(rt,Wt)|0,m=m+Math.imul(rt,Vt)|0;var tn=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(tn>>>26)|0,tn&=67108863,g=Math.imul(X,kt),o=Math.imul(X,Bt),o=o+Math.imul(pt,kt)|0,m=Math.imul(pt,Bt),g=g+Math.imul(z,Nt)|0,o=o+Math.imul(z,Rt)|0,o=o+Math.imul(ct,Nt)|0,m=m+Math.imul(ct,Rt)|0,g=g+Math.imul(ht,Pt)|0,o=o+Math.imul(ht,jt)|0,o=o+Math.imul(at,Pt)|0,m=m+Math.imul(at,jt)|0,g=g+Math.imul(gt,Lt)|0,o=o+Math.imul(gt,Ft)|0,o=o+Math.imul(wt,Lt)|0,m=m+Math.imul(wt,Ft)|0,g=g+Math.imul(vt,qt)|0,o=o+Math.imul(vt,Dt)|0,o=o+Math.imul(mt,qt)|0,m=m+Math.imul(mt,Dt)|0,g=g+Math.imul(ot,Ut)|0,o=o+Math.imul(ot,xt)|0,o=o+Math.imul(ut,Ut)|0,m=m+Math.imul(ut,xt)|0,g=g+Math.imul(it,Wt)|0,o=o+Math.imul(it,Vt)|0,o=o+Math.imul(st,Wt)|0,m=m+Math.imul(st,Vt)|0;var en=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(en>>>26)|0,en&=67108863,g=Math.imul(X,Nt),o=Math.imul(X,Rt),o=o+Math.imul(pt,Nt)|0,m=Math.imul(pt,Rt),g=g+Math.imul(z,Pt)|0,o=o+Math.imul(z,jt)|0,o=o+Math.imul(ct,Pt)|0,m=m+Math.imul(ct,jt)|0,g=g+Math.imul(ht,Lt)|0,o=o+Math.imul(ht,Ft)|0,o=o+Math.imul(at,Lt)|0,m=m+Math.imul(at,Ft)|0,g=g+Math.imul(gt,qt)|0,o=o+Math.imul(gt,Dt)|0,o=o+Math.imul(wt,qt)|0,m=m+Math.imul(wt,Dt)|0,g=g+Math.imul(vt,Ut)|0,o=o+Math.imul(vt,xt)|0,o=o+Math.imul(mt,Ut)|0,m=m+Math.imul(mt,xt)|0,g=g+Math.imul(ot,Wt)|0,o=o+Math.imul(ot,Vt)|0,o=o+Math.imul(ut,Wt)|0,m=m+Math.imul(ut,Vt)|0;var rn=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(rn>>>26)|0,rn&=67108863,g=Math.imul(X,Pt),o=Math.imul(X,jt),o=o+Math.imul(pt,Pt)|0,m=Math.imul(pt,jt),g=g+Math.imul(z,Lt)|0,o=o+Math.imul(z,Ft)|0,o=o+Math.imul(ct,Lt)|0,m=m+Math.imul(ct,Ft)|0,g=g+Math.imul(ht,qt)|0,o=o+Math.imul(ht,Dt)|0,o=o+Math.imul(at,qt)|0,m=m+Math.imul(at,Dt)|0,g=g+Math.imul(gt,Ut)|0,o=o+Math.imul(gt,xt)|0,o=o+Math.imul(wt,Ut)|0,m=m+Math.imul(wt,xt)|0,g=g+Math.imul(vt,Wt)|0,o=o+Math.imul(vt,Vt)|0,o=o+Math.imul(mt,Wt)|0,m=m+Math.imul(mt,Vt)|0;var nn=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(nn>>>26)|0,nn&=67108863,g=Math.imul(X,Lt),o=Math.imul(X,Ft),o=o+Math.imul(pt,Lt)|0,m=Math.imul(pt,Ft),g=g+Math.imul(z,qt)|0,o=o+Math.imul(z,Dt)|0,o=o+Math.imul(ct,qt)|0,m=m+Math.imul(ct,Dt)|0,g=g+Math.imul(ht,Ut)|0,o=o+Math.imul(ht,xt)|0,o=o+Math.imul(at,Ut)|0,m=m+Math.imul(at,xt)|0,g=g+Math.imul(gt,Wt)|0,o=o+Math.imul(gt,Vt)|0,o=o+Math.imul(wt,Wt)|0,m=m+Math.imul(wt,Vt)|0;var sn=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(sn>>>26)|0,sn&=67108863,g=Math.imul(X,qt),o=Math.imul(X,Dt),o=o+Math.imul(pt,qt)|0,m=Math.imul(pt,Dt),g=g+Math.imul(z,Ut)|0,o=o+Math.imul(z,xt)|0,o=o+Math.imul(ct,Ut)|0,m=m+Math.imul(ct,xt)|0,g=g+Math.imul(ht,Wt)|0,o=o+Math.imul(ht,Vt)|0,o=o+Math.imul(at,Wt)|0,m=m+Math.imul(at,Vt)|0;var on=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(on>>>26)|0,on&=67108863,g=Math.imul(X,Ut),o=Math.imul(X,xt),o=o+Math.imul(pt,Ut)|0,m=Math.imul(pt,xt),g=g+Math.imul(z,Wt)|0,o=o+Math.imul(z,Vt)|0,o=o+Math.imul(ct,Wt)|0,m=m+Math.imul(ct,Vt)|0;var an=(h+g|0)+((o&8191)<<13)|0;h=(m+(o>>>13)|0)+(an>>>26)|0,an&=67108863,g=Math.imul(X,Wt),o=Math.imul(X,Vt),o=o+Math.imul(pt,Wt)|0,m=Math.imul(pt,Vt);var ln=(h+g|0)+((o&8191)<<13)|0;return h=(m+(o>>>13)|0)+(ln>>>26)|0,ln&=67108863,f[0]=Vr,f[1]=Zr,f[2]=$r,f[3]=Kr,f[4]=zr,f[5]=Xr,f[6]=Yr,f[7]=Jr,f[8]=Hr,f[9]=Gr,f[10]=Qr,f[11]=tn,f[12]=en,f[13]=rn,f[14]=nn,f[15]=sn,f[16]=on,f[17]=an,f[18]=ln,h!==0&&(f[19]=h,d.length++),d};Math.imul||(F=L);function k(w,n,u){u.negative=n.negative^w.negative,u.length=w.length+n.length;for(var d=0,M=0,_=0;_<u.length-1;_++){var f=M;M=0;for(var h=d&67108863,g=Math.min(_,n.length-1),o=Math.max(0,_-w.length+1);o<=g;o++){var m=_-o,N=w.words[m]|0,R=n.words[o]|0,T=N*R,Z=T&67108863;f=f+(T/67108864|0)|0,Z=Z+h|0,h=Z&67108863,f=f+(Z>>>26)|0,M+=f>>>26,f&=67108863}u.words[_]=h,d=f,f=M}return d!==0?u.words[_]=d:u.length--,u._strip()}function et(w,n,u){return k(w,n,u)}a.prototype.mulTo=function(n,u){var d,M=this.length+n.length;return this.length===10&&n.length===10?d=F(this,n,u):M<63?d=L(this,n,u):M<1024?d=k(this,n,u):d=et(this,n,u),d},a.prototype.mul=function(n){var u=new a(null);return u.words=new Array(this.length+n.length),this.mulTo(n,u)},a.prototype.mulf=function(n){var u=new a(null);return u.words=new Array(this.length+n.length),et(this,n,u)},a.prototype.imul=function(n){return this.clone().mulTo(n,this)},a.prototype.imuln=function(n){var u=n<0;u&&(n=-n),s(typeof n=="number"),s(n<67108864);for(var d=0,M=0;M<this.length;M++){var _=(this.words[M]|0)*n,f=(_&67108863)+(d&67108863);d>>=26,d+=_/67108864|0,d+=f>>>26,this.words[M]=f&67108863}return d!==0&&(this.words[M]=d,this.length++),u?this.ineg():this},a.prototype.muln=function(n){return this.clone().imuln(n)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(n){var u=G(n);if(u.length===0)return new a(1);for(var d=this,M=0;M<u.length&&u[M]===0;M++,d=d.sqr());if(++M<u.length)for(var _=d.sqr();M<u.length;M++,_=_.sqr())u[M]!==0&&(d=d.mul(_));return d},a.prototype.iushln=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26,M=67108863>>>26-u<<26-u,_;if(u!==0){var f=0;for(_=0;_<this.length;_++){var h=this.words[_]&M,g=(this.words[_]|0)-h<<u;this.words[_]=g|f,f=h>>>26-u}f&&(this.words[_]=f,this.length++)}if(d!==0){for(_=this.length-1;_>=0;_--)this.words[_+d]=this.words[_];for(_=0;_<d;_++)this.words[_]=0;this.length+=d}return this._strip()},a.prototype.ishln=function(n){return s(this.negative===0),this.iushln(n)},a.prototype.iushrn=function(n,u,d){s(typeof n=="number"&&n>=0);var M;u?M=(u-u%26)/26:M=0;var _=n%26,f=Math.min((n-_)/26,this.length),h=67108863^67108863>>>_<<_,g=d;if(M-=f,M=Math.max(0,M),g){for(var o=0;o<f;o++)g.words[o]=this.words[o];g.length=f}if(f!==0)if(this.length>f)for(this.length-=f,o=0;o<this.length;o++)this.words[o]=this.words[o+f];else this.words[0]=0,this.length=1;var m=0;for(o=this.length-1;o>=0&&(m!==0||o>=M);o--){var N=this.words[o]|0;this.words[o]=m<<26-_|N>>>_,m=N&h}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(n,u,d){return s(this.negative===0),this.iushrn(n,u,d)},a.prototype.shln=function(n){return this.clone().ishln(n)},a.prototype.ushln=function(n){return this.clone().iushln(n)},a.prototype.shrn=function(n){return this.clone().ishrn(n)},a.prototype.ushrn=function(n){return this.clone().iushrn(n)},a.prototype.testn=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26,M=1<<u;if(this.length<=d)return!1;var _=this.words[d];return!!(_&M)},a.prototype.imaskn=function(n){s(typeof n=="number"&&n>=0);var u=n%26,d=(n-u)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(u!==0&&d++,this.length=Math.min(d,this.length),u!==0){var M=67108863^67108863>>>u<<u;this.words[this.length-1]&=M}return this._strip()},a.prototype.maskn=function(n){return this.clone().imaskn(n)},a.prototype.iaddn=function(n){return s(typeof n=="number"),s(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},a.prototype._iaddn=function(n){this.words[0]+=n;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},a.prototype.isubn=function(n){if(s(typeof n=="number"),s(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},a.prototype.addn=function(n){return this.clone().iaddn(n)},a.prototype.subn=function(n){return this.clone().isubn(n)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(n,u,d){var M=n.length+d,_;this._expand(M);var f,h=0;for(_=0;_<n.length;_++){f=(this.words[_+d]|0)+h;var g=(n.words[_]|0)*u;f-=g&67108863,h=(f>>26)-(g/67108864|0),this.words[_+d]=f&67108863}for(;_<this.length-d;_++)f=(this.words[_+d]|0)+h,h=f>>26,this.words[_+d]=f&67108863;if(h===0)return this._strip();for(s(h===-1),h=0,_=0;_<this.length;_++)f=-(this.words[_]|0)+h,h=f>>26,this.words[_]=f&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(n,u){var d=this.length-n.length,M=this.clone(),_=n,f=_.words[_.length-1]|0,h=this._countBits(f);d=26-h,d!==0&&(_=_.ushln(d),M.iushln(d),f=_.words[_.length-1]|0);var g=M.length-_.length,o;if(u!=="mod"){o=new a(null),o.length=g+1,o.words=new Array(o.length);for(var m=0;m<o.length;m++)o.words[m]=0}var N=M.clone()._ishlnsubmul(_,1,g);N.negative===0&&(M=N,o&&(o.words[g]=1));for(var R=g-1;R>=0;R--){var T=(M.words[_.length+R]|0)*67108864+(M.words[_.length+R-1]|0);for(T=Math.min(T/f|0,67108863),M._ishlnsubmul(_,T,R);M.negative!==0;)T--,M.negative=0,M._ishlnsubmul(_,1,R),M.isZero()||(M.negative^=1);o&&(o.words[R]=T)}return o&&o._strip(),M._strip(),u!=="div"&&d!==0&&M.iushrn(d),{div:o||null,mod:M}},a.prototype.divmod=function(n,u,d){if(s(!n.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var M,_,f;return this.negative!==0&&n.negative===0?(f=this.neg().divmod(n,u),u!=="mod"&&(M=f.div.neg()),u!=="div"&&(_=f.mod.neg(),d&&_.negative!==0&&_.iadd(n)),{div:M,mod:_}):this.negative===0&&n.negative!==0?(f=this.divmod(n.neg(),u),u!=="mod"&&(M=f.div.neg()),{div:M,mod:f.mod}):this.negative&n.negative?(f=this.neg().divmod(n.neg(),u),u!=="div"&&(_=f.mod.neg(),d&&_.negative!==0&&_.isub(n)),{div:f.div,mod:_}):n.length>this.length||this.cmp(n)<0?{div:new a(0),mod:this}:n.length===1?u==="div"?{div:this.divn(n.words[0]),mod:null}:u==="mod"?{div:null,mod:new a(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new a(this.modrn(n.words[0]))}:this._wordDiv(n,u)},a.prototype.div=function(n){return this.divmod(n,"div",!1).div},a.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},a.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},a.prototype.divRound=function(n){var u=this.divmod(n);if(u.mod.isZero())return u.div;var d=u.div.negative!==0?u.mod.isub(n):u.mod,M=n.ushrn(1),_=n.andln(1),f=d.cmp(M);return f<0||_===1&&f===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},a.prototype.modrn=function(n){var u=n<0;u&&(n=-n),s(n<=67108863);for(var d=(1<<26)%n,M=0,_=this.length-1;_>=0;_--)M=(d*M+(this.words[_]|0))%n;return u?-M:M},a.prototype.modn=function(n){return this.modrn(n)},a.prototype.idivn=function(n){var u=n<0;u&&(n=-n),s(n<=67108863);for(var d=0,M=this.length-1;M>=0;M--){var _=(this.words[M]|0)+d*67108864;this.words[M]=_/n|0,d=_%n}return this._strip(),u?this.ineg():this},a.prototype.divn=function(n){return this.clone().idivn(n)},a.prototype.egcd=function(n){s(n.negative===0),s(!n.isZero());var u=this,d=n.clone();u.negative!==0?u=u.umod(n):u=u.clone();for(var M=new a(1),_=new a(0),f=new a(0),h=new a(1),g=0;u.isEven()&&d.isEven();)u.iushrn(1),d.iushrn(1),++g;for(var o=d.clone(),m=u.clone();!u.isZero();){for(var N=0,R=1;!(u.words[0]&R)&&N<26;++N,R<<=1);if(N>0)for(u.iushrn(N);N-- >0;)(M.isOdd()||_.isOdd())&&(M.iadd(o),_.isub(m)),M.iushrn(1),_.iushrn(1);for(var T=0,Z=1;!(d.words[0]&Z)&&T<26;++T,Z<<=1);if(T>0)for(d.iushrn(T);T-- >0;)(f.isOdd()||h.isOdd())&&(f.iadd(o),h.isub(m)),f.iushrn(1),h.iushrn(1);u.cmp(d)>=0?(u.isub(d),M.isub(f),_.isub(h)):(d.isub(u),f.isub(M),h.isub(_))}return{a:f,b:h,gcd:d.iushln(g)}},a.prototype._invmp=function(n){s(n.negative===0),s(!n.isZero());var u=this,d=n.clone();u.negative!==0?u=u.umod(n):u=u.clone();for(var M=new a(1),_=new a(0),f=d.clone();u.cmpn(1)>0&&d.cmpn(1)>0;){for(var h=0,g=1;!(u.words[0]&g)&&h<26;++h,g<<=1);if(h>0)for(u.iushrn(h);h-- >0;)M.isOdd()&&M.iadd(f),M.iushrn(1);for(var o=0,m=1;!(d.words[0]&m)&&o<26;++o,m<<=1);if(o>0)for(d.iushrn(o);o-- >0;)_.isOdd()&&_.iadd(f),_.iushrn(1);u.cmp(d)>=0?(u.isub(d),M.isub(_)):(d.isub(u),_.isub(M))}var N;return u.cmpn(1)===0?N=M:N=_,N.cmpn(0)<0&&N.iadd(n),N},a.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var u=this.clone(),d=n.clone();u.negative=0,d.negative=0;for(var M=0;u.isEven()&&d.isEven();M++)u.iushrn(1),d.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;d.isEven();)d.iushrn(1);var _=u.cmp(d);if(_<0){var f=u;u=d,d=f}else if(_===0||d.cmpn(1)===0)break;u.isub(d)}while(!0);return d.iushln(M)},a.prototype.invm=function(n){return this.egcd(n).a.umod(n)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(n){return this.words[0]&n},a.prototype.bincn=function(n){s(typeof n=="number");var u=n%26,d=(n-u)/26,M=1<<u;if(this.length<=d)return this._expand(d+1),this.words[d]|=M,this;for(var _=M,f=d;_!==0&&f<this.length;f++){var h=this.words[f]|0;h+=_,_=h>>>26,h&=67108863,this.words[f]=h}return _!==0&&(this.words[f]=_,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(n){var u=n<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var d;if(this.length>1)d=1;else{u&&(n=-n),s(n<=67108863,"Number is too big");var M=this.words[0]|0;d=M===n?0:M<n?-1:1}return this.negative!==0?-d|0:d},a.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var u=this.ucmp(n);return this.negative!==0?-u|0:u},a.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var u=0,d=this.length-1;d>=0;d--){var M=this.words[d]|0,_=n.words[d]|0;if(M!==_){M<_?u=-1:M>_&&(u=1);break}}return u},a.prototype.gtn=function(n){return this.cmpn(n)===1},a.prototype.gt=function(n){return this.cmp(n)===1},a.prototype.gten=function(n){return this.cmpn(n)>=0},a.prototype.gte=function(n){return this.cmp(n)>=0},a.prototype.ltn=function(n){return this.cmpn(n)===-1},a.prototype.lt=function(n){return this.cmp(n)===-1},a.prototype.lten=function(n){return this.cmpn(n)<=0},a.prototype.lte=function(n){return this.cmp(n)<=0},a.prototype.eqn=function(n){return this.cmpn(n)===0},a.prototype.eq=function(n){return this.cmp(n)===0},a.red=function(n){return new U(n)},a.prototype.toRed=function(n){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(n){return this.red=n,this},a.prototype.forceRed=function(n){return s(!this.red,"Already a number in reduction context"),this._forceRed(n)},a.prototype.redAdd=function(n){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},a.prototype.redIAdd=function(n){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},a.prototype.redSub=function(n){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},a.prototype.redISub=function(n){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},a.prototype.redShl=function(n){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},a.prototype.redMul=function(n){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},a.prototype.redIMul=function(n){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(n){return s(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var W={k256:null,p224:null,p192:null,p25519:null};function E(w,n){this.name=w,this.p=new a(n,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var n=new a(null);return n.words=new Array(Math.ceil(this.n/13)),n},E.prototype.ireduce=function(n){var u=n,d;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),d=u.bitLength();while(d>this.n);var M=d<this.n?-1:u.ucmp(this.p);return M===0?(u.words[0]=0,u.length=1):M>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},E.prototype.split=function(n,u){n.iushrn(this.n,0,u)},E.prototype.imulK=function(n){return n.imul(this.k)};function S(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(S,E),S.prototype.split=function(n,u){for(var d=4194303,M=Math.min(n.length,9),_=0;_<M;_++)u.words[_]=n.words[_];if(u.length=M,n.length<=9){n.words[0]=0,n.length=1;return}var f=n.words[9];for(u.words[u.length++]=f&d,_=10;_<n.length;_++){var h=n.words[_]|0;n.words[_-10]=(h&d)<<4|f>>>22,f=h}f>>>=22,n.words[_-10]=f,f===0&&n.length>10?n.length-=10:n.length-=9},S.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var u=0,d=0;d<n.length;d++){var M=n.words[d]|0;u+=M*977,n.words[d]=u&67108863,u=M*64+(u/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function I(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(I,E);function B(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(B,E);function J(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(J,E),J.prototype.imulK=function(n){for(var u=0,d=0;d<n.length;d++){var M=(n.words[d]|0)*19+u,_=M&67108863;M>>>=26,n.words[d]=_,u=M}return u!==0&&(n.words[n.length++]=u),n},a._prime=function(n){if(W[n])return W[n];var u;if(n==="k256")u=new S;else if(n==="p224")u=new I;else if(n==="p192")u=new B;else if(n==="p25519")u=new J;else throw new Error("Unknown prime "+n);return W[n]=u,u};function U(w){if(typeof w=="string"){var n=a._prime(w);this.m=n.p,this.prime=n}else s(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}U.prototype._verify1=function(n){s(n.negative===0,"red works only with positives"),s(n.red,"red works only with red numbers")},U.prototype._verify2=function(n,u){s((n.negative|u.negative)===0,"red works only with positives"),s(n.red&&n.red===u.red,"red works only with red numbers")},U.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(b(n,n.umod(this.m)._forceRed(this)),n)},U.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},U.prototype.add=function(n,u){this._verify2(n,u);var d=n.add(u);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},U.prototype.iadd=function(n,u){this._verify2(n,u);var d=n.iadd(u);return d.cmp(this.m)>=0&&d.isub(this.m),d},U.prototype.sub=function(n,u){this._verify2(n,u);var d=n.sub(u);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},U.prototype.isub=function(n,u){this._verify2(n,u);var d=n.isub(u);return d.cmpn(0)<0&&d.iadd(this.m),d},U.prototype.shl=function(n,u){return this._verify1(n),this.imod(n.ushln(u))},U.prototype.imul=function(n,u){return this._verify2(n,u),this.imod(n.imul(u))},U.prototype.mul=function(n,u){return this._verify2(n,u),this.imod(n.mul(u))},U.prototype.isqr=function(n){return this.imul(n,n.clone())},U.prototype.sqr=function(n){return this.mul(n,n)},U.prototype.sqrt=function(n){if(n.isZero())return n.clone();var u=this.m.andln(3);if(s(u%2===1),u===3){var d=this.m.add(new a(1)).iushrn(2);return this.pow(n,d)}for(var M=this.m.subn(1),_=0;!M.isZero()&&M.andln(1)===0;)_++,M.iushrn(1);s(!M.isZero());var f=new a(1).toRed(this),h=f.redNeg(),g=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new a(2*o*o).toRed(this);this.pow(o,g).cmp(h)!==0;)o.redIAdd(h);for(var m=this.pow(o,M),N=this.pow(n,M.addn(1).iushrn(1)),R=this.pow(n,M),T=_;R.cmp(f)!==0;){for(var Z=R,K=0;Z.cmp(f)!==0;K++)Z=Z.redSqr();s(K<T);var H=this.pow(m,new a(1).iushln(T-K-1));N=N.redMul(H),m=H.redSqr(),R=R.redMul(m),T=K}return N},U.prototype.invm=function(n){var u=n._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},U.prototype.pow=function(n,u){if(u.isZero())return new a(1).toRed(this);if(u.cmpn(1)===0)return n.clone();var d=4,M=new Array(1<<d);M[0]=new a(1).toRed(this),M[1]=n;for(var _=2;_<M.length;_++)M[_]=this.mul(M[_-1],n);var f=M[0],h=0,g=0,o=u.bitLength()%26;for(o===0&&(o=26),_=u.length-1;_>=0;_--){for(var m=u.words[_],N=o-1;N>=0;N--){var R=m>>N&1;if(f!==M[0]&&(f=this.sqr(f)),R===0&&h===0){g=0;continue}h<<=1,h|=R,g++,!(g!==d&&(_!==0||N!==0))&&(f=this.mul(f,M[h]),g=0,h=0)}o=26}return f},U.prototype.convertTo=function(n){var u=n.umod(this.m);return u===n?u.clone():u},U.prototype.convertFrom=function(n){var u=n.clone();return u.red=null,u},a.mont=function(n){return new x(n)};function x(w){U.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(x,U),x.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function(n){var u=this.imod(n.mul(this.rinv));return u.red=null,u},x.prototype.imul=function(n,u){if(n.isZero()||u.isZero())return n.words[0]=0,n.length=1,n;var d=n.imul(u),M=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=d.isub(M).iushrn(this.shift),f=_;return _.cmp(this.m)>=0?f=_.isub(this.m):_.cmpn(0)<0&&(f=_.iadd(this.m)),f._forceRed(this)},x.prototype.mul=function(n,u){if(n.isZero()||u.isZero())return new a(0)._forceRed(this);var d=n.mul(u),M=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=d.isub(M).iushrn(this.shift),f=_;return _.cmp(this.m)>=0?f=_.isub(this.m):_.cmpn(0)<0&&(f=_.iadd(this.m)),f._forceRed(this)},x.prototype.invm=function(n){var u=this.imod(n._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof e>"u"||e,t)}}),Ue=9e15,Ce=1e9,vn="0123456789abcdef",Br="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Nr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",mn={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ue,maxE:Ue,crypto:!1},qi,pe,tt=!0,Ur="[DecimalError] ",Se=Ur+"Invalid argument: ",Di=Ur+"Precision limit exceeded",Ui=Ur+"crypto unavailable",xi="[object Decimal]",Qt=Math.floor,Kt=Math.pow,yo=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,_o=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,bo=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Wi=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ue=1e7,Y=7,Ao=9007199254740991,So=Br.length-1,wn=Nr.length-1,O={toStringTag:xi};O.absoluteValue=O.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),$(t)};O.ceil=function(){return $(new this.constructor(this),this.e+1,2)};O.clampedTo=O.clamp=function(t,e){var r,i=this,s=i.constructor;if(t=new s(t),e=new s(e),!t.s||!e.s)return new s(NaN);if(t.gt(e))throw Error(Se+e);return r=i.cmp(t),r<0?t:i.cmp(e)>0?e:new s(i)};O.comparedTo=O.cmp=function(t){var e,r,i,s,l=this,a=l.d,c=(t=new l.constructor(t)).d,p=l.s,v=t.s;if(!a||!c)return!p||!v?NaN:p!==v?p:a===c?0:!a^p<0?1:-1;if(!a[0]||!c[0])return a[0]?p:c[0]?-v:0;if(p!==v)return p;if(l.e!==t.e)return l.e>t.e^p<0?1:-1;for(i=a.length,s=c.length,e=0,r=i<s?i:s;e<r;++e)if(a[e]!==c[e])return a[e]>c[e]^p<0?1:-1;return i===s?0:i>s^p<0?1:-1};O.cosine=O.cos=function(){var t,e,r=this,i=r.constructor;return r.d?r.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(r.e,r.sd())+Y,i.rounding=1,r=Co(i,zi(i,r)),i.precision=t,i.rounding=e,$(pe==2||pe==3?r.neg():r,t,e,!0)):new i(1):new i(NaN)};O.cubeRoot=O.cbrt=function(){var t,e,r,i,s,l,a,c,p,v,y=this,b=y.constructor;if(!y.isFinite()||y.isZero())return new b(y);for(tt=!1,l=y.s*Kt(y.s*y,1/3),!l||Math.abs(l)==1/0?(r=Jt(y.d),t=y.e,(l=(t-r.length+1)%3)&&(r+=l==1||l==-2?"0":"00"),l=Kt(r,1/3),t=Qt((t+1)/3)-(t%3==(t<0?-1:2)),l==1/0?r="5e"+t:(r=l.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),i=new b(r),i.s=y.s):i=new b(l.toString()),a=(t=b.precision)+3;;)if(c=i,p=c.times(c).times(c),v=p.plus(y),i=dt(v.plus(y).times(c),v.plus(p),a+2,1),Jt(c.d).slice(0,a)===(r=Jt(i.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!s&&r=="4999"){if(!s&&($(c,t+1,0),c.times(c).times(c).eq(y))){i=c;break}a+=4,s=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&($(i,t+1,1),e=!i.times(i).times(i).eq(y));break}return tt=!0,$(i,t,b.rounding,e)};O.decimalPlaces=O.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Qt(this.e/Y))*Y,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};O.dividedBy=O.div=function(t){return dt(this,new this.constructor(t))};O.dividedToIntegerBy=O.divToInt=function(t){var e=this,r=e.constructor;return $(dt(e,new r(t),0,1,1),r.precision,r.rounding)};O.equals=O.eq=function(t){return this.cmp(t)===0};O.floor=function(){return $(new this.constructor(this),this.e+1,3)};O.greaterThan=O.gt=function(t){return this.cmp(t)>0};O.greaterThanOrEqualTo=O.gte=function(t){var e=this.cmp(t);return e==1||e===0};O.hyperbolicCosine=O.cosh=function(){var t,e,r,i,s,l=this,a=l.constructor,c=new a(1);if(!l.isFinite())return new a(l.s?1/0:NaN);if(l.isZero())return c;r=a.precision,i=a.rounding,a.precision=r+Math.max(l.e,l.sd())+4,a.rounding=1,s=l.d.length,s<32?(t=Math.ceil(s/3),e=(1/Wr(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),l=Ke(a,1,l.times(e),new a(1),!0);for(var p,v=t,y=new a(8);v--;)p=l.times(l),l=c.minus(p.times(y.minus(p.times(y))));return $(l,a.precision=r,a.rounding=i,!0)};O.hyperbolicSine=O.sinh=function(){var t,e,r,i,s=this,l=s.constructor;if(!s.isFinite()||s.isZero())return new l(s);if(e=l.precision,r=l.rounding,l.precision=e+Math.max(s.e,s.sd())+4,l.rounding=1,i=s.d.length,i<3)s=Ke(l,2,s,s,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,s=s.times(1/Wr(5,t)),s=Ke(l,2,s,s,!0);for(var a,c=new l(5),p=new l(16),v=new l(20);t--;)a=s.times(s),s=s.times(c.plus(a.times(p.times(a).plus(v))))}return l.precision=e,l.rounding=r,$(s,e,r,!0)};O.hyperbolicTangent=O.tanh=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,dt(r.sinh(),r.cosh(),i.precision=t,i.rounding=e)):new i(r.s)};O.inverseCosine=O.acos=function(){var t,e=this,r=e.constructor,i=e.abs().cmp(1),s=r.precision,l=r.rounding;return i!==-1?i===0?e.isNeg()?le(r,s,l):new r(0):new r(NaN):e.isZero()?le(r,s+4,l).times(.5):(r.precision=s+6,r.rounding=1,e=e.asin(),t=le(r,s+4,l).times(.5),r.precision=s,r.rounding=l,t.minus(e))};O.inverseHyperbolicCosine=O.acosh=function(){var t,e,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,tt=!1,r=r.times(r).minus(1).sqrt().plus(r),tt=!0,i.precision=t,i.rounding=e,r.ln()):new i(r)};O.inverseHyperbolicSine=O.asinh=function(){var t,e,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,tt=!1,r=r.times(r).plus(1).sqrt().plus(r),tt=!0,i.precision=t,i.rounding=e,r.ln())};O.inverseHyperbolicTangent=O.atanh=function(){var t,e,r,i,s=this,l=s.constructor;return s.isFinite()?s.e>=0?new l(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=l.precision,e=l.rounding,i=s.sd(),Math.max(i,t)<2*-s.e-1?$(new l(s),t,e,!0):(l.precision=r=i-s.e,s=dt(s.plus(1),new l(1).minus(s),r+t,1),l.precision=t+4,l.rounding=1,s=s.ln(),l.precision=t,l.rounding=e,s.times(.5))):new l(NaN)};O.inverseSine=O.asin=function(){var t,e,r,i,s=this,l=s.constructor;return s.isZero()?new l(s):(e=s.abs().cmp(1),r=l.precision,i=l.rounding,e!==-1?e===0?(t=le(l,r+4,i).times(.5),t.s=s.s,t):new l(NaN):(l.precision=r+6,l.rounding=1,s=s.div(new l(1).minus(s.times(s)).sqrt().plus(1)).atan(),l.precision=r,l.rounding=i,s.times(2)))};O.inverseTangent=O.atan=function(){var t,e,r,i,s,l,a,c,p,v=this,y=v.constructor,b=y.precision,A=y.rounding;if(v.isFinite()){if(v.isZero())return new y(v);if(v.abs().eq(1)&&b+4<=wn)return a=le(y,b+4,A).times(.25),a.s=v.s,a}else{if(!v.s)return new y(NaN);if(b+4<=wn)return a=le(y,b+4,A).times(.5),a.s=v.s,a}for(y.precision=c=b+10,y.rounding=1,r=Math.min(28,c/Y+2|0),t=r;t;--t)v=v.div(v.times(v).plus(1).sqrt().plus(1));for(tt=!1,e=Math.ceil(c/Y),i=1,p=v.times(v),a=new y(v),s=v;t!==-1;)if(s=s.times(p),l=a.minus(s.div(i+=2)),s=s.times(p),a=l.plus(s.div(i+=2)),a.d[e]!==void 0)for(t=e;a.d[t]===l.d[t]&&t--;);return r&&(a=a.times(2<<r-1)),tt=!0,$(a,y.precision=b,y.rounding=A,!0)};O.isFinite=function(){return!!this.d};O.isInteger=O.isInt=function(){return!!this.d&&Qt(this.e/Y)>this.d.length-2};O.isNaN=function(){return!this.s};O.isNegative=O.isNeg=function(){return this.s<0};O.isPositive=O.isPos=function(){return this.s>0};O.isZero=function(){return!!this.d&&this.d[0]===0};O.lessThan=O.lt=function(t){return this.cmp(t)<0};O.lessThanOrEqualTo=O.lte=function(t){return this.cmp(t)<1};O.logarithm=O.log=function(t){var e,r,i,s,l,a,c,p,v=this,y=v.constructor,b=y.precision,A=y.rounding,C=5;if(t==null)t=new y(10),e=!0;else{if(t=new y(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new y(NaN);e=t.eq(10)}if(r=v.d,v.s<0||!r||!r[0]||v.eq(1))return new y(r&&!r[0]?-1/0:v.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)l=!0;else{for(s=r[0];s%10===0;)s/=10;l=s!==1}if(tt=!1,c=b+C,a=_e(v,c),i=e?Rr(y,c+10):_e(t,c),p=dt(a,i,c,1),ur(p.d,s=b,A))do if(c+=10,a=_e(v,c),i=e?Rr(y,c+10):_e(t,c),p=dt(a,i,c,1),!l){+Jt(p.d).slice(s+1,s+15)+1==1e14&&(p=$(p,b+1,0));break}while(ur(p.d,s+=10,A));return tt=!0,$(p,b,A)};O.minus=O.sub=function(t){var e,r,i,s,l,a,c,p,v,y,b,A,C=this,q=C.constructor;if(t=new q(t),!C.d||!t.d)return!C.s||!t.s?t=new q(NaN):C.d?t.s=-t.s:t=new q(t.d||C.s!==t.s?C:NaN),t;if(C.s!=t.s)return t.s=-t.s,C.plus(t);if(v=C.d,A=t.d,c=q.precision,p=q.rounding,!v[0]||!A[0]){if(A[0])t.s=-t.s;else if(v[0])t=new q(C);else return new q(p===3?-0:0);return tt?$(t,c,p):t}if(r=Qt(t.e/Y),y=Qt(C.e/Y),v=v.slice(),l=y-r,l){for(b=l<0,b?(e=v,l=-l,a=A.length):(e=A,r=y,a=v.length),i=Math.max(Math.ceil(c/Y),a)+2,l>i&&(l=i,e.length=1),e.reverse(),i=l;i--;)e.push(0);e.reverse()}else{for(i=v.length,a=A.length,b=i<a,b&&(a=i),i=0;i<a;i++)if(v[i]!=A[i]){b=v[i]<A[i];break}l=0}for(b&&(e=v,v=A,A=e,t.s=-t.s),a=v.length,i=A.length-a;i>0;--i)v[a++]=0;for(i=A.length;i>l;){if(v[--i]<A[i]){for(s=i;s&&v[--s]===0;)v[s]=ue-1;--v[s],v[i]+=ue}v[i]-=A[i]}for(;v[--a]===0;)v.pop();for(;v[0]===0;v.shift())--r;return v[0]?(t.d=v,t.e=xr(v,r),tt?$(t,c,p):t):new q(p===3?-0:0)};O.modulo=O.mod=function(t){var e,r=this,i=r.constructor;return t=new i(t),!r.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||r.d&&!r.d[0]?$(new i(r),i.precision,i.rounding):(tt=!1,i.modulo==9?(e=dt(r,t.abs(),0,3,1),e.s*=t.s):e=dt(r,t,0,i.modulo,1),e=e.times(t),tt=!0,r.minus(e))};O.naturalExponential=O.exp=function(){return Mn(this)};O.naturalLogarithm=O.ln=function(){return _e(this)};O.negated=O.neg=function(){var t=new this.constructor(this);return t.s=-t.s,$(t)};O.plus=O.add=function(t){var e,r,i,s,l,a,c,p,v,y,b=this,A=b.constructor;if(t=new A(t),!b.d||!t.d)return!b.s||!t.s?t=new A(NaN):b.d||(t=new A(t.d||b.s===t.s?b:NaN)),t;if(b.s!=t.s)return t.s=-t.s,b.minus(t);if(v=b.d,y=t.d,c=A.precision,p=A.rounding,!v[0]||!y[0])return y[0]||(t=new A(b)),tt?$(t,c,p):t;if(l=Qt(b.e/Y),i=Qt(t.e/Y),v=v.slice(),s=l-i,s){for(s<0?(r=v,s=-s,a=y.length):(r=y,i=l,a=v.length),l=Math.ceil(c/Y),a=l>a?l+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=v.length,s=y.length,a-s<0&&(s=a,r=y,y=v,v=r),e=0;s;)e=(v[--s]=v[s]+y[s]+e)/ue|0,v[s]%=ue;for(e&&(v.unshift(e),++i),a=v.length;v[--a]==0;)v.pop();return t.d=v,t.e=xr(v,i),tt?$(t,c,p):t};O.precision=O.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Se+t);return r.d?(e=Vi(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};O.round=function(){var t=this,e=t.constructor;return $(new e(t),t.e+1,e.rounding)};O.sine=O.sin=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+Math.max(r.e,r.sd())+Y,i.rounding=1,r=Oo(i,zi(i,r)),i.precision=t,i.rounding=e,$(pe>2?r.neg():r,t,e,!0)):new i(NaN)};O.squareRoot=O.sqrt=function(){var t,e,r,i,s,l,a=this,c=a.d,p=a.e,v=a.s,y=a.constructor;if(v!==1||!c||!c[0])return new y(!v||v<0&&(!c||c[0])?NaN:c?a:1/0);for(tt=!1,v=Math.sqrt(+a),v==0||v==1/0?(e=Jt(c),(e.length+p)%2==0&&(e+="0"),v=Math.sqrt(e),p=Qt((p+1)/2)-(p<0||p%2),v==1/0?e="5e"+p:(e=v.toExponential(),e=e.slice(0,e.indexOf("e")+1)+p),i=new y(e)):i=new y(v.toString()),r=(p=y.precision)+3;;)if(l=i,i=l.plus(dt(a,l,r+2,1)).times(.5),Jt(l.d).slice(0,r)===(e=Jt(i.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!s&&e=="4999"){if(!s&&($(l,p+1,0),l.times(l).eq(a))){i=l;break}r+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&($(i,p+1,1),t=!i.times(i).eq(a));break}return tt=!0,$(i,p,y.rounding,t)};O.tangent=O.tan=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,r=r.sin(),r.s=1,r=dt(r,new i(1).minus(r.times(r)).sqrt(),t+10,0),i.precision=t,i.rounding=e,$(pe==2||pe==4?r.neg():r,t,e,!0)):new i(NaN)};O.times=O.mul=function(t){var e,r,i,s,l,a,c,p,v,y=this,b=y.constructor,A=y.d,C=(t=new b(t)).d;if(t.s*=y.s,!A||!A[0]||!C||!C[0])return new b(!t.s||A&&!A[0]&&!C||C&&!C[0]&&!A?NaN:!A||!C?t.s/0:t.s*0);for(r=Qt(y.e/Y)+Qt(t.e/Y),p=A.length,v=C.length,p<v&&(l=A,A=C,C=l,a=p,p=v,v=a),l=[],a=p+v,i=a;i--;)l.push(0);for(i=v;--i>=0;){for(e=0,s=p+i;s>i;)c=l[s]+C[i]*A[s-i-1]+e,l[s--]=c%ue|0,e=c/ue|0;l[s]=(l[s]+e)%ue|0}for(;!l[--a];)l.pop();return e?++r:l.shift(),t.d=l,t.e=xr(l,r),tt?$(t,b.precision,b.rounding):t};O.toBinary=function(t,e){return kn(this,2,t,e)};O.toDecimalPlaces=O.toDP=function(t,e){var r=this,i=r.constructor;return r=new i(r),t===void 0?r:(ne(t,0,Ce),e===void 0?e=i.rounding:ne(e,0,8),$(r,t+r.e+1,e))};O.toExponential=function(t,e){var r,i=this,s=i.constructor;return t===void 0?r=fe(i,!0):(ne(t,0,Ce),e===void 0?e=s.rounding:ne(e,0,8),i=$(new s(i),t+1,e),r=fe(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+r:r};O.toFixed=function(t,e){var r,i,s=this,l=s.constructor;return t===void 0?r=fe(s):(ne(t,0,Ce),e===void 0?e=l.rounding:ne(e,0,8),i=$(new l(s),t+s.e+1,e),r=fe(i,!1,t+i.e+1)),s.isNeg()&&!s.isZero()?"-"+r:r};O.toFraction=function(t){var e,r,i,s,l,a,c,p,v,y,b,A,C=this,q=C.d,j=C.constructor;if(!q)return new j(C);if(v=r=new j(1),i=p=new j(0),e=new j(i),l=e.e=Vi(q)-C.e-1,a=l%Y,e.d[0]=Kt(10,a<0?Y+a:a),t==null)t=l>0?e:v;else{if(c=new j(t),!c.isInt()||c.lt(v))throw Error(Se+c);t=c.gt(e)?l>0?e:v:c}for(tt=!1,c=new j(Jt(q)),y=j.precision,j.precision=l=q.length*Y*2;b=dt(c,e,0,1,1),s=r.plus(b.times(i)),s.cmp(t)!=1;)r=i,i=s,s=v,v=p.plus(b.times(s)),p=s,s=e,e=c.minus(b.times(s)),c=s;return s=dt(t.minus(r),i,0,1,1),p=p.plus(s.times(v)),r=r.plus(s.times(i)),p.s=v.s=C.s,A=dt(v,i,l,1).minus(C).abs().cmp(dt(p,r,l,1).minus(C).abs())<1?[v,i]:[p,r],j.precision=y,tt=!0,A};O.toHexadecimal=O.toHex=function(t,e){return kn(this,16,t,e)};O.toNearest=function(t,e){var r=this,i=r.constructor;if(r=new i(r),t==null){if(!r.d)return r;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:ne(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(tt=!1,r=dt(r,t,0,e,1).times(t),tt=!0,$(r)):(t.s=r.s,r=t),r};O.toNumber=function(){return+this};O.toOctal=function(t,e){return kn(this,8,t,e)};O.toPower=O.pow=function(t){var e,r,i,s,l,a,c=this,p=c.constructor,v=+(t=new p(t));if(!c.d||!t.d||!c.d[0]||!t.d[0])return new p(Kt(+c,v));if(c=new p(c),c.eq(1))return c;if(i=p.precision,l=p.rounding,t.eq(1))return $(c,i,l);if(e=Qt(t.e/Y),e>=t.d.length-1&&(r=v<0?-v:v)<=Ao)return s=Zi(p,c,r,i),t.s<0?new p(1).div(s):$(s,i,l);if(a=c.s,a<0){if(e<t.d.length-1)return new p(NaN);if(t.d[e]&1||(a=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=a,c}return r=Kt(+c,v),e=r==0||!isFinite(r)?Qt(v*(Math.log("0."+Jt(c.d))/Math.LN10+c.e+1)):new p(r+"").e,e>p.maxE+1||e<p.minE-1?new p(e>0?a/0:0):(tt=!1,p.rounding=c.s=1,r=Math.min(12,(e+"").length),s=Mn(t.times(_e(c,i+r)),i),s.d&&(s=$(s,i+5,1),ur(s.d,i,l)&&(e=i+10,s=$(Mn(t.times(_e(c,e+r)),e),e+5,1),+Jt(s.d).slice(i+1,i+15)+1==1e14&&(s=$(s,i+1,0)))),s.s=a,tt=!0,p.rounding=l,$(s,i,l))};O.toPrecision=function(t,e){var r,i=this,s=i.constructor;return t===void 0?r=fe(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(ne(t,1,Ce),e===void 0?e=s.rounding:ne(e,0,8),i=$(new s(i),t,e),r=fe(i,t<=i.e||i.e<=s.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+r:r};O.toSignificantDigits=O.toSD=function(t,e){var r=this,i=r.constructor;return t===void 0?(t=i.precision,e=i.rounding):(ne(t,1,Ce),e===void 0?e=i.rounding:ne(e,0,8)),$(new i(r),t,e)};O.toString=function(){var t=this,e=t.constructor,r=fe(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};O.truncated=O.trunc=function(){return $(new this.constructor(this),this.e+1,1)};O.valueOf=O.toJSON=function(){var t=this,e=t.constructor,r=fe(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Jt(t){var e,r,i,s=t.length-1,l="",a=t[0];if(s>0){for(l+=a,e=1;e<s;e++)i=t[e]+"",r=Y-i.length,r&&(l+=ye(r)),l+=i;a=t[e],i=a+"",r=Y-i.length,r&&(l+=ye(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return l+a}function ne(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Se+t)}function ur(t,e,r,i){var s,l,a,c;for(l=t[0];l>=10;l/=10)--e;return--e<0?(e+=Y,s=0):(s=Math.ceil((e+1)/Y),e%=Y),l=Kt(10,Y-e),c=t[s]%l|0,i==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),a=r<4&&c==99999||r>3&&c==49999||c==5e4||c==0):a=(r<4&&c+1==l||r>3&&c+1==l/2)&&(t[s+1]/l/100|0)==Kt(10,e-2)-1||(c==l/2||c==0)&&(t[s+1]/l/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),a=(i||r<4)&&c==9999||!i&&r>3&&c==4999):a=((i||r<4)&&c+1==l||!i&&r>3&&c+1==l/2)&&(t[s+1]/l/1e3|0)==Kt(10,e-3)-1,a}function Sr(t,e,r){for(var i,s=[0],l,a=0,c=t.length;a<c;){for(l=s.length;l--;)s[l]*=e;for(s[0]+=vn.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}function Co(t,e){var r,i,s;if(e.isZero())return e;i=e.d.length,i<32?(r=Math.ceil(i/3),s=(1/Wr(4,r)).toString()):(r=16,s="2.3283064365386962890625e-10"),t.precision+=r,e=Ke(t,1,e.times(s),new t(1));for(var l=r;l--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=r,e}var dt=function(){function t(i,s,l){var a,c=0,p=i.length;for(i=i.slice();p--;)a=i[p]*s+c,i[p]=a%l|0,c=a/l|0;return c&&i.unshift(c),i}function e(i,s,l,a){var c,p;if(l!=a)p=l>a?1:-1;else for(c=p=0;c<l;c++)if(i[c]!=s[c]){p=i[c]>s[c]?1:-1;break}return p}function r(i,s,l,a){for(var c=0;l--;)i[l]-=c,c=i[l]<s[l]?1:0,i[l]=c*a+i[l]-s[l];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,l,a,c,p){var v,y,b,A,C,q,j,P,G,L,F,k,et,W,E,S,I,B,J,U,x=i.constructor,w=i.s==s.s?1:-1,n=i.d,u=s.d;if(!n||!n[0]||!u||!u[0])return new x(!i.s||!s.s||(n?u&&n[0]==u[0]:!u)?NaN:n&&n[0]==0||!u?w*0:w/0);for(p?(C=1,y=i.e-s.e):(p=ue,C=Y,y=Qt(i.e/C)-Qt(s.e/C)),J=u.length,I=n.length,G=new x(w),L=G.d=[],b=0;u[b]==(n[b]||0);b++);if(u[b]>(n[b]||0)&&y--,l==null?(W=l=x.precision,a=x.rounding):c?W=l+(i.e-s.e)+1:W=l,W<0)L.push(1),q=!0;else{if(W=W/C+2|0,b=0,J==1){for(A=0,u=u[0],W++;(b<I||A)&&W--;b++)E=A*p+(n[b]||0),L[b]=E/u|0,A=E%u|0;q=A||b<I}else{for(A=p/(u[0]+1)|0,A>1&&(u=t(u,A,p),n=t(n,A,p),J=u.length,I=n.length),S=J,F=n.slice(0,J),k=F.length;k<J;)F[k++]=0;U=u.slice(),U.unshift(0),B=u[0],u[1]>=p/2&&++B;do A=0,v=e(u,F,J,k),v<0?(et=F[0],J!=k&&(et=et*p+(F[1]||0)),A=et/B|0,A>1?(A>=p&&(A=p-1),j=t(u,A,p),P=j.length,k=F.length,v=e(j,F,P,k),v==1&&(A--,r(j,J<P?U:u,P,p))):(A==0&&(v=A=1),j=u.slice()),P=j.length,P<k&&j.unshift(0),r(F,j,k,p),v==-1&&(k=F.length,v=e(u,F,J,k),v<1&&(A++,r(F,J<k?U:u,k,p))),k=F.length):v===0&&(A++,F=[0]),L[b++]=A,v&&F[0]?F[k++]=n[S]||0:(F=[n[S]],k=1);while((S++<I||F[0]!==void 0)&&W--);q=F[0]!==void 0}L[0]||L.shift()}if(C==1)G.e=y,qi=q;else{for(b=1,A=L[0];A>=10;A/=10)b++;G.e=b+y*C-1,$(G,c?l+G.e+1:l,a,q)}return G}}();function $(t,e,r,i){var s,l,a,c,p,v,y,b,A,C=t.constructor;t:if(e!=null){if(b=t.d,!b)return t;for(s=1,c=b[0];c>=10;c/=10)s++;if(l=e-s,l<0)l+=Y,a=e,y=b[A=0],p=y/Kt(10,s-a-1)%10|0;else if(A=Math.ceil((l+1)/Y),c=b.length,A>=c)if(i){for(;c++<=A;)b.push(0);y=p=0,s=1,l%=Y,a=l-Y+1}else break t;else{for(y=c=b[A],s=1;c>=10;c/=10)s++;l%=Y,a=l-Y+s,p=a<0?0:y/Kt(10,s-a-1)%10|0}if(i=i||e<0||b[A+1]!==void 0||(a<0?y:y%Kt(10,s-a-1)),v=r<4?(p||i)&&(r==0||r==(t.s<0?3:2)):p>5||p==5&&(r==4||i||r==6&&(l>0?a>0?y/Kt(10,s-a):0:b[A-1])%10&1||r==(t.s<0?8:7)),e<1||!b[0])return b.length=0,v?(e-=t.e+1,b[0]=Kt(10,(Y-e%Y)%Y),t.e=-e||0):b[0]=t.e=0,t;if(l==0?(b.length=A,c=1,A--):(b.length=A+1,c=Kt(10,Y-l),b[A]=a>0?(y/Kt(10,s-a)%Kt(10,a)|0)*c:0),v)for(;;)if(A==0){for(l=1,a=b[0];a>=10;a/=10)l++;for(a=b[0]+=c,c=1;a>=10;a/=10)c++;l!=c&&(t.e++,b[0]==ue&&(b[0]=1));break}else{if(b[A]+=c,b[A]!=ue)break;b[A--]=0,c=1}for(l=b.length;b[--l]===0;)b.pop()}return tt&&(t.e>C.maxE?(t.d=null,t.e=NaN):t.e<C.minE&&(t.e=0,t.d=[0])),t}function fe(t,e,r){if(!t.isFinite())return Ki(t);var i,s=t.e,l=Jt(t.d),a=l.length;return e?(r&&(i=r-a)>0?l=l.charAt(0)+"."+l.slice(1)+ye(i):a>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(t.e<0?"e":"e+")+t.e):s<0?(l="0."+ye(-s-1)+l,r&&(i=r-a)>0&&(l+=ye(i))):s>=a?(l+=ye(s+1-a),r&&(i=r-s-1)>0&&(l=l+"."+ye(i))):((i=s+1)<a&&(l=l.slice(0,i)+"."+l.slice(i)),r&&(i=r-a)>0&&(s+1===a&&(l+="."),l+=ye(i))),l}function xr(t,e){var r=t[0];for(e*=Y;r>=10;r/=10)e++;return e}function Rr(t,e,r){if(e>So)throw tt=!0,r&&(t.precision=r),Error(Di);return $(new t(Br),e,1,!0)}function le(t,e,r){if(e>wn)throw Error(Di);return $(new t(Nr),e,r,!0)}function Vi(t){var e=t.length-1,r=e*Y+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function ye(t){for(var e="";t--;)e+="0";return e}function Zi(t,e,r,i){var s,l=new t(1),a=Math.ceil(i/Y+4);for(tt=!1;;){if(r%2&&(l=l.times(e),ti(l.d,a)&&(s=!0)),r=Qt(r/2),r===0){r=l.d.length-1,s&&l.d[r]===0&&++l.d[r];break}e=e.times(e),ti(e.d,a)}return tt=!0,l}function Qn(t){return t.d[t.d.length-1]&1}function $i(t,e,r){for(var i,s=new t(e[0]),l=0;++l<e.length;)if(i=new t(e[l]),i.s)s[r](i)&&(s=i);else{s=i;break}return s}function Mn(t,e){var r,i,s,l,a,c,p,v=0,y=0,b=0,A=t.constructor,C=A.rounding,q=A.precision;if(!t.d||!t.d[0]||t.e>17)return new A(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(tt=!1,p=q):p=e,c=new A(.03125);t.e>-2;)t=t.times(c),b+=5;for(i=Math.log(Kt(2,b))/Math.LN10*2+5|0,p+=i,r=l=a=new A(1),A.precision=p;;){if(l=$(l.times(t),p,1),r=r.times(++y),c=a.plus(dt(l,r,p,1)),Jt(c.d).slice(0,p)===Jt(a.d).slice(0,p)){for(s=b;s--;)a=$(a.times(a),p,1);if(e==null)if(v<3&&ur(a.d,p-i,C,v))A.precision=p+=10,r=l=c=new A(1),y=0,v++;else return $(a,A.precision=q,C,tt=!0);else return A.precision=q,a}a=c}}function _e(t,e){var r,i,s,l,a,c,p,v,y,b,A,C=1,q=10,j=t,P=j.d,G=j.constructor,L=G.rounding,F=G.precision;if(j.s<0||!P||!P[0]||!j.e&&P[0]==1&&P.length==1)return new G(P&&!P[0]?-1/0:j.s!=1?NaN:P?0:j);if(e==null?(tt=!1,y=F):y=e,G.precision=y+=q,r=Jt(P),i=r.charAt(0),Math.abs(l=j.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)j=j.times(t),r=Jt(j.d),i=r.charAt(0),C++;l=j.e,i>1?(j=new G("0."+r),l++):j=new G(i+"."+r.slice(1))}else return v=Rr(G,y+2,F).times(l+""),j=_e(new G(i+"."+r.slice(1)),y-q).plus(v),G.precision=F,e==null?$(j,F,L,tt=!0):j;for(b=j,p=a=j=dt(j.minus(1),j.plus(1),y,1),A=$(j.times(j),y,1),s=3;;){if(a=$(a.times(A),y,1),v=p.plus(dt(a,new G(s),y,1)),Jt(v.d).slice(0,y)===Jt(p.d).slice(0,y))if(p=p.times(2),l!==0&&(p=p.plus(Rr(G,y+2,F).times(l+""))),p=dt(p,new G(C),y,1),e==null)if(ur(p.d,y-q,L,c))G.precision=y+=q,v=a=j=dt(b.minus(1),b.plus(1),y,1),A=$(j.times(j),y,1),s=c=1;else return $(p,G.precision=F,L,tt=!0);else return G.precision=F,p;p=v,s+=2}}function Ki(t){return String(t.s*t.s/0)}function yn(t,e){var r,i,s;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(r<0&&(r=i),r+=+e.slice(i+1),e=e.substring(0,i)):r<0&&(r=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,t.e=r=r-i-1,t.d=[],i=(r+1)%Y,r<0&&(i+=Y),i<s){for(i&&t.d.push(+e.slice(0,i)),s-=Y;i<s;)t.d.push(+e.slice(i,i+=Y));e=e.slice(i),i=Y-e.length}else i-=s;for(;i--;)e+="0";t.d.push(+e),tt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Io(t,e){var r,i,s,l,a,c,p,v,y;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Wi.test(e))return yn(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(_o.test(e))r=16,e=e.toLowerCase();else if(yo.test(e))r=2;else if(bo.test(e))r=8;else throw Error(Se+e);for(l=e.search(/p/i),l>0?(p=+e.slice(l+1),e=e.substring(2,l)):e=e.slice(2),l=e.indexOf("."),a=l>=0,i=t.constructor,a&&(e=e.replace(".",""),c=e.length,l=c-l,s=Zi(i,new i(r),l,l*2)),v=Sr(e,r,ue),y=v.length-1,l=y;v[l]===0;--l)v.pop();return l<0?new i(t.s*0):(t.e=xr(v,y),t.d=v,tt=!1,a&&(t=dt(t,s,c*4)),p&&(t=t.times(Math.abs(p)<54?Kt(2,p):dr.pow(2,p))),tt=!0,t)}function Oo(t,e){var r,i=e.d.length;if(i<3)return e.isZero()?e:Ke(t,2,e,e);r=1.4*Math.sqrt(i),r=r>16?16:r|0,e=e.times(1/Wr(5,r)),e=Ke(t,2,e,e);for(var s,l=new t(5),a=new t(16),c=new t(20);r--;)s=e.times(e),e=e.times(l.plus(s.times(a.times(s).minus(c))));return e}function Ke(t,e,r,i,s){var l,a,c,p,v=t.precision,y=Math.ceil(v/Y);for(tt=!1,p=r.times(r),c=new t(i);;){if(a=dt(c.times(p),new t(e++*e++),v,1),c=s?i.plus(a):i.minus(a),i=dt(a.times(p),new t(e++*e++),v,1),a=c.plus(i),a.d[y]!==void 0){for(l=y;a.d[l]===c.d[l]&&l--;);if(l==-1)break}l=c,c=i,i=a,a=l}return tt=!0,a.d.length=y+1,a}function Wr(t,e){for(var r=t;--e;)r*=t;return r}function zi(t,e){var r,i=e.s<0,s=le(t,t.precision,1),l=s.times(.5);if(e=e.abs(),e.lte(l))return pe=i?4:1,e;if(r=e.divToInt(s),r.isZero())pe=i?3:2;else{if(e=e.minus(r.times(s)),e.lte(l))return pe=Qn(r)?i?2:3:i?4:1,e;pe=Qn(r)?i?1:4:i?3:2}return e.minus(s).abs()}function kn(t,e,r,i){var s,l,a,c,p,v,y,b,A,C=t.constructor,q=r!==void 0;if(q?(ne(r,1,Ce),i===void 0?i=C.rounding:ne(i,0,8)):(r=C.precision,i=C.rounding),!t.isFinite())y=Ki(t);else{for(y=fe(t),a=y.indexOf("."),q?(s=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):s=e,a>=0&&(y=y.replace(".",""),A=new C(1),A.e=y.length-a,A.d=Sr(fe(A),10,s),A.e=A.d.length),b=Sr(y,10,s),l=p=b.length;b[--p]==0;)b.pop();if(!b[0])y=q?"0p+0":"0";else{if(a<0?l--:(t=new C(t),t.d=b,t.e=l,t=dt(t,A,r,i,0,s),b=t.d,l=t.e,v=qi),a=b[r],c=s/2,v=v||b[r+1]!==void 0,v=i<4?(a!==void 0||v)&&(i===0||i===(t.s<0?3:2)):a>c||a===c&&(i===4||v||i===6&&b[r-1]&1||i===(t.s<0?8:7)),b.length=r,v)for(;++b[--r]>s-1;)b[r]=0,r||(++l,b.unshift(1));for(p=b.length;!b[p-1];--p);for(a=0,y="";a<p;a++)y+=vn.charAt(b[a]);if(q){if(p>1)if(e==16||e==8){for(a=e==16?4:3,--p;p%a;p++)y+="0";for(b=Sr(y,s,e),p=b.length;!b[p-1];--p);for(a=1,y="1.";a<p;a++)y+=vn.charAt(b[a])}else y=y.charAt(0)+"."+y.slice(1);y=y+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)y="0"+y;y="0."+y}else if(++l>p)for(l-=p;l--;)y+="0";else l<p&&(y=y.slice(0,l)+"."+y.slice(l))}y=(e==16?"0x":e==2?"0b":e==8?"0o":"")+y}return t.s<0?"-"+y:y}function ti(t,e){if(t.length>e)return t.length=e,!0}function Eo(t){return new this(t).abs()}function To(t){return new this(t).acos()}function ko(t){return new this(t).acosh()}function Bo(t,e){return new this(t).plus(e)}function No(t){return new this(t).asin()}function Ro(t){return new this(t).asinh()}function Po(t){return new this(t).atan()}function jo(t){return new this(t).atanh()}function Lo(t,e){t=new this(t),e=new this(e);var r,i=this.precision,s=this.rounding,l=i+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=le(this,l,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?le(this,i,s):new this(0),r.s=t.s):!t.d||e.isZero()?(r=le(this,l,1).times(.5),r.s=t.s):e.s<0?(this.precision=l,this.rounding=1,r=this.atan(dt(t,e,l,1)),e=le(this,l,1),this.precision=i,this.rounding=s,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(dt(t,e,l,1)),r}function Fo(t){return new this(t).cbrt()}function qo(t){return $(t=new this(t),t.e+1,2)}function Do(t,e,r){return new this(t).clamp(e,r)}function Uo(t){if(!t||typeof t!="object")throw Error(Ur+"Object expected");var e,r,i,s=t.defaults===!0,l=["precision",1,Ce,"rounding",0,8,"toExpNeg",-Ue,0,"toExpPos",0,Ue,"maxE",0,Ue,"minE",-Ue,0,"modulo",0,9];for(e=0;e<l.length;e+=3)if(r=l[e],s&&(this[r]=mn[r]),(i=t[r])!==void 0)if(Qt(i)===i&&i>=l[e+1]&&i<=l[e+2])this[r]=i;else throw Error(Se+r+": "+i);if(r="crypto",s&&(this[r]=mn[r]),(i=t[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Ui);else this[r]=!1;else throw Error(Se+r+": "+i);return this}function xo(t){return new this(t).cos()}function Wo(t){return new this(t).cosh()}function Xi(t){var e,r,i;function s(l){var a,c,p,v=this;if(!(v instanceof s))return new s(l);if(v.constructor=s,ei(l)){v.s=l.s,tt?!l.d||l.e>s.maxE?(v.e=NaN,v.d=null):l.e<s.minE?(v.e=0,v.d=[0]):(v.e=l.e,v.d=l.d.slice()):(v.e=l.e,v.d=l.d?l.d.slice():l.d);return}if(p=typeof l,p==="number"){if(l===0){v.s=1/l<0?-1:1,v.e=0,v.d=[0];return}if(l<0?(l=-l,v.s=-1):v.s=1,l===~~l&&l<1e7){for(a=0,c=l;c>=10;c/=10)a++;tt?a>s.maxE?(v.e=NaN,v.d=null):a<s.minE?(v.e=0,v.d=[0]):(v.e=a,v.d=[l]):(v.e=a,v.d=[l]);return}else if(l*0!==0){l||(v.s=NaN),v.e=NaN,v.d=null;return}return yn(v,l.toString())}else if(p!=="string")throw Error(Se+l);return(c=l.charCodeAt(0))===45?(l=l.slice(1),v.s=-1):(c===43&&(l=l.slice(1)),v.s=1),Wi.test(l)?yn(v,l):Io(v,l)}if(s.prototype=O,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Uo,s.clone=Xi,s.isDecimal=ei,s.abs=Eo,s.acos=To,s.acosh=ko,s.add=Bo,s.asin=No,s.asinh=Ro,s.atan=Po,s.atanh=jo,s.atan2=Lo,s.cbrt=Fo,s.ceil=qo,s.clamp=Do,s.cos=xo,s.cosh=Wo,s.div=Vo,s.exp=Zo,s.floor=$o,s.hypot=Ko,s.ln=zo,s.log=Xo,s.log10=Jo,s.log2=Yo,s.max=Ho,s.min=Go,s.mod=Qo,s.mul=ta,s.pow=ea,s.random=ra,s.round=na,s.sign=ia,s.sin=sa,s.sinh=oa,s.sqrt=aa,s.sub=la,s.sum=ua,s.tan=ca,s.tanh=ha,s.trunc=fa,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(r=i[e++])||(t[r]=this[r]);return s.config(t),s}function Vo(t,e){return new this(t).div(e)}function Zo(t){return new this(t).exp()}function $o(t){return $(t=new this(t),t.e+1,3)}function Ko(){var t,e,r=new this(0);for(tt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return tt=!0,new this(1/0);r=e}return tt=!0,r.sqrt()}function ei(t){return t instanceof dr||t&&t.toStringTag===xi||!1}function zo(t){return new this(t).ln()}function Xo(t,e){return new this(t).log(e)}function Yo(t){return new this(t).log(2)}function Jo(t){return new this(t).log(10)}function Ho(){return $i(this,arguments,"lt")}function Go(){return $i(this,arguments,"gt")}function Qo(t,e){return new this(t).mod(e)}function ta(t,e){return new this(t).mul(e)}function ea(t,e){return new this(t).pow(e)}function ra(t){var e,r,i,s,l=0,a=new this(1),c=[];if(t===void 0?t=this.precision:ne(t,1,Ce),i=Math.ceil(t/Y),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));l<i;)s=e[l],s>=429e7?e[l]=crypto.getRandomValues(new Uint32Array(1))[0]:c[l++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);l<i;)s=e[l]+(e[l+1]<<8)+(e[l+2]<<16)+((e[l+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,l):(c.push(s%1e7),l+=4);l=i/4}else throw Error(Ui);else for(;l<i;)c[l++]=Math.random()*1e7|0;for(i=c[--l],t%=Y,i&&t&&(s=Kt(10,Y-t),c[l]=(i/s|0)*s);c[l]===0;l--)c.pop();if(l<0)r=0,c=[0];else{for(r=-1;c[0]===0;r-=Y)c.shift();for(i=1,s=c[0];s>=10;s/=10)i++;i<Y&&(r-=Y-i)}return a.e=r,a.d=c,a}function na(t){return $(t=new this(t),t.e+1,this.rounding)}function ia(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function sa(t){return new this(t).sin()}function oa(t){return new this(t).sinh()}function aa(t){return new this(t).sqrt()}function la(t,e){return new this(t).sub(e)}function ua(){var t=0,e=arguments,r=new this(e[t]);for(tt=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return tt=!0,$(r,this.precision,this.rounding)}function ca(t){return new this(t).tan()}function ha(t){return new this(t).tanh()}function fa(t){return $(t=new this(t),t.e+1,1)}O[Symbol.for("nodejs.util.inspect.custom")]=O.toString;O[Symbol.toStringTag]="Decimal";var dr=O.constructor=Xi(mn);Br=new dr(Br);Nr=new dr(Nr);var Cr=dr,ge=hr(fr()),cn=hr(fr()),da=class{constructor(t){if(t!==0)throw new Error("Aftermath only supported on mainnet");this.slippage="900000000000000000",this.poolRegistry="0xfcc774493db2c45c79f688f88d28023a3e7d98e4ee9f48bbf5c7990f651577ae",this.protocolFeeVault="0xf194d9b1bcad972e45a7dd67dd49b3ee1e3357a00a50850c52cd51bb450e13b4",this.treasury="0x28e499dff5e864a2eafe476269a4f5035f1c16f338da7be18b103499abf271ce",this.insuranceFund="0xf0c40d67b078000e18032334c3325c47b9ec9f3d9ae4128be820d54663d14e3b",this.referrealVault="0x35d35b0e5b177593d8c3a801462485572fc30861e6ce96a55af6dc4730709278"}amountLimit(t){return Number(new cn.default(t).mul(new cn.default(this.slippage)).div(new cn.default("1000000000000000000")).toString())}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l];if(r.extendedDetails==null)throw new Error("Extended details not supported");if(r.extendedDetails.aftermathLpSupplyType==null)throw new Error("LP supply type not supported");const y=[e.object(r.id),e.object(this.poolRegistry),e.object(this.protocolFeeVault),e.object(this.treasury),e.object(this.insuranceFund),e.object(this.referrealVault),e.pure.u64(this.amountLimit(r.amountOut)),e.pure.u64(this.slippage),i];return e.moveCall({target:`${t.publishedAt()}::aftermath::${c}`,typeArguments:[p,v,r.extendedDetails.aftermathLpSupplyType],arguments:y})})}},ri="0x000000000000000000000000000000000000000000000000000000000000dee9",ga=class{constructor(t){if(t!==0)throw new Error("Aftermath only supported on mainnet")}getAccountCap(t,e){return Mt(this,null,function*(){let r=50,i=null;for(;;){const s=t.getOwnedObjects({owner:e,cursor:i,limit:r,filter:{MoveModule:{package:ri,module:"custodian_v2"}}});if(s!=null&&s.data!=null){if(s.data.length!==0)return s.data[0].data.objectId;if(s.data.length<50)break}else break}return null})}getOrCreateAccountCap(t,e,r){return Mt(this,null,function*(){let i=yield this.getAccountCap(e,r);return i!==null?{accountCap:t.object(i),isCreate:!1}:{accountCap:t.moveCall({target:`${ri}::clob_v2::create_account`,typeArguments:[],arguments:[]}),isCreate:!0}})}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],y=yield this.getOrCreateAccountCap(e,t.client,t.signer),b=[e.object(r.id),i,y.accountCap,e.object(Xe)],A=e.moveCall({target:`${t.publishedAt()}::deepbook::${c}`,typeArguments:[p,v],arguments:b});return y.isCreate&&e.transferObjects([y.accountCap],t.signer),A})}},pa=class{constructor(t){if(t!==0)throw new Error("Kriya amm only supported on mainnet")}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],y=[e.object(r.id),i];return e.moveCall({target:`${t.publishedAt()}::kriya_amm::${c}`,typeArguments:[p,v],arguments:y})})}},va=class{constructor(t){if(t!==0)throw new Error("Flowx only supported on mainnet");this.container="0xb65dcbf63fd3ad5d0ebfbf334780dc9f785eff38a4459e37ab08fa79576ee511"}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],y=[e.object(this.container),i];return e.moveCall({target:`${t.publishedAt()}::flowx_amm::${c}`,typeArguments:[p,v],arguments:y})})}},ma=class{constructor(t){if(t!==0)throw new Error("Turbos only supported on mainnet");this.versioned="0xf1cf0e81048df168ebeb1b8030fad24b3e0b53ae827c25053fff0779c1445b6f"}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l];if(r.extendedDetails==null)throw new Error("Extended details not supported");if(r.extendedDetails.turbosFeeType==null)throw new Error("Turbos fee type not supported");const y=[e.object(r.id),i,e.object(Xe),e.object(this.versioned)];return e.moveCall({target:`${t.publishedAt()}::turbos::${c}`,typeArguments:[p,v,r.extendedDetails.turbosFeeType],arguments:y})})}},ni=class{constructor(t,e){this.globalConfig=t===0?"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f":"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",this.partner=e??"0x639b5e433da31739e800cd085f356e64cae222966d0f1b11bd9dc76b322ff58b"}flash_swap(t,e,r,i){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["flash_swap_a2b",l,a]:["flash_swap_b2a",a,l];let y=i?r.amountIn:r.amountOut;const b=[e.object(this.globalConfig),e.object(r.id),e.object(this.partner),e.pure.u64(y),e.pure.bool(i),e.object(Xe)],A=e.moveCall({target:`${t.publishedAt()}::cetus::${c}`,typeArguments:[p,v],arguments:b});return{targetCoin:A[0],flashReceipt:A[1],payAmount:A[2]}}repay_flash_swap(t,e,r,i,s){const{direction:l,from:a,target:c}=r,[p,v,y]=l?["repay_flash_swap_a2b",a,c]:["repay_flash_swap_b2a",c,a],b=[e.object(this.globalConfig),e.object(r.id),e.object(this.partner),i,s];return e.moveCall({target:`${t.publishedAt()}::cetus::${p}`,typeArguments:[v,y],arguments:b})[0]}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],y=[e.object(this.globalConfig),e.object(r.id),e.object(this.partner),i,e.object(Xe)];return e.moveCall({target:`${t.publishedAt()}::cetus::${c}`,typeArguments:[p,v],arguments:y})})}};function ii(t,...e){const r=Array.isArray(e[e.length-1])?e.pop():[];let s=[t,...e].filter(Boolean).join("::");return r&&r.length&&(s+=`<${r.join(", ")}>`),s}function Ze(t){var e;try{let r=t.replace(/\s/g,"");const i=r.match(/(<.+>)$/),s=(e=i==null?void 0:i[0])==null?void 0:e.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){r=r.slice(0,r.indexOf("<"));const p=Ze(r),v=vo(po({},p),{type_arguments:s.map(y=>Ze(y).source_address)});return v.type_arguments=v.type_arguments.map(y=>Be.isSuiCoin(y)?y:Ze(y).source_address),v.source_address=ii(v.full_address,v.type_arguments),v}const l=r.split("::"),c={full_address:r,address:r===Yi||r===ya?"0x2":pn.normalizeSuiObjectId(l[0]),module:l[1],name:l[2],type_arguments:[],source_address:""};return c.full_address=`${c.address}::${c.module}::${c.name}`,c.source_address=ii(c.full_address,c.type_arguments),c}catch{return{full_address:t,address:"",module:"",name:"",type_arguments:[],source_address:t}}}function si(t){return Ze(t).source_address}var wa="0x2::coin::Coin",Ma=/^0x2::coin::Coin<(.+)>$/,Yi="0x2::sui::SUI",ya="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",Be=class Me{static getCoinTypeArg(e){const r=e.type.match(Ma);return r?r[1]:null}static isSUI(e){const r=Me.getCoinTypeArg(e);return r?Me.getCoinSymbol(r)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,r){let i=BigInt(0);return e.forEach(s=>{r===s.coinAddress&&(i+=BigInt(s.balance))}),i}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${wa}<${e}>`}static getCoinAssets(e,r){const i=[];return r.forEach(s=>{si(s.coinAddress)===si(e)&&i.push(s)}),i}static isSuiCoin(e){return Ze(e).full_address===Yi}static selectCoinObjectIdGreaterThanOrEqual(e,r,i=[]){const s=Me.selectCoinAssetGreaterThanOrEqual(e,r,i),l=s.selectedCoins.map(p=>p.coinObjectId),a=s.remainingCoins,c=s.selectedCoins.map(p=>p.balance.toString());return{objectArray:l,remainCoins:a,amountArray:c}}static selectCoinAssetGreaterThanOrEqual(e,r,i=[]){const s=Me.sortByBalance(e.filter(v=>!i.includes(v.coinObjectId))),l=Me.calculateTotalBalance(s);if(l<r)return{selectedCoins:[],remainingCoins:s};if(l===r)return{selectedCoins:s,remainingCoins:[]};let a=BigInt(0);const c=[],p=[...s];for(;a<l;){const v=r-a,y=p.findIndex(A=>A.balance>=v);if(y!==-1){c.push(p[y]),p.splice(y,1);break}const b=p.pop();b.balance>0&&(c.push(b),a+=b.balance)}return{selectedCoins:Me.sortByBalance(c),remainingCoins:Me.sortByBalance(p)}}static sortByBalance(e){return e.sort((r,i)=>r.balance<i.balance?-1:r.balance>i.balance?1:0)}static sortByBalanceDes(e){return e.sort((r,i)=>r.balance>i.balance?-1:r.balance<i.balance?0:1)}static calculateTotalBalance(e){return e.reduce((r,i)=>r+i.balance,BigInt(0))}};function oi(t){switch(t){case 1e4:return"Calculate error";case 10001:return"Input number too large can not fit in target type";case 10002:return"No router";case 10003:return"Insufficient Liquidity";default:return"Unknown error"}}function ze(t){const e=t.indexOf("::");if(e===-1)return t;const r=t.substring(0,e),i=t.substring(e);if(!r.startsWith("0x"))return t;const s=r.substring(2);return s.length>64?t:`0x${s.padStart(64,"0")}${i}`}function _a(t,e){t=ze(t),e=ze(e);const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){if(t[i]>e[i])return!0;if(t[i]<e[i])return!1}return!0}function ba(t,e){return t.moveCall({target:"0x2::coin::zero",typeArguments:[e]})}function ai(t,e,r,i){const s=Be.getCoinAssets(i,e);if(r===BigInt(0)&&s.length===0)return{targetCoin:ba(t,i),isMintZeroCoin:!0,targetCoinAmount:0};if(Be.calculateTotalBalance(s)<r)throw new AggregateError("Insufficient balance when build merge coin","InsufficientBalance");if(Be.isSuiCoin(i))return{targetCoin:t.splitCoins(t.gas,[t.pure.u64(r.toString())]),isMintZeroCoin:!0,targetCoinAmount:Number(r.toString())};let a=Be.sortByBalance(s);a.slice(0,3).reduce((b,A)=>b+A.balance,BigInt(0))<BigInt(r)&&(a=Be.sortByBalanceDes(s));let p=Be.selectCoinObjectIdGreaterThanOrEqual(a,r);const[v,...y]=p.objectArray;return y.length>0&&t.mergeCoins(v,y.map(b=>t.object(b))),{targetCoin:t.object(v),isMintZeroCoin:!1,targetCoinAmount:Number(r.toString())}}function Aa(t){return!(!t.startsWith("0x")||t.length!==66)}var je=hr(fr()),wr=hr(fr()),gr=hr(fr()),xe=new gr.default(0);new gr.default(1);var Sa=new gr.default(2);Sa.pow(new gr.default(128));var Ca=new gr.default("18446744073709551615"),Le=1e9;function li(t,e,r){let i=xe;return e?i=t.mul(new wr.default(Le-r*Le)).div(new wr.default(Le)):i=t.mul(new wr.default(Le+r*Le)).div(new wr.default(Le)),Number(i.toString())}function Ia(t,e,r){return new Cr(t).mul(Cr.pow(2,-64)).pow(2).mul(Cr.pow(10,e-r))}function Oa(t,e,r){return Mt(this,null,function*(){var i,s,l,a,c;const{from:p,target:v,amount:y,byAmountIn:b,pools:A}=e,C=ze(p),q=ze(v),j=new ao.Transaction,P=_a(C,q),G="0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee",L=P?C:q,F=P?q:C,k=[L,F];for(let u=0;u<A.length;u++){const d=[j.object(A[u]),j.pure.bool(P),j.pure.bool(b),j.pure.u64(y.toString())];j.moveCall({target:`${G}::fetcher_script::calculate_swap_result`,arguments:d,typeArguments:k})}if(!Aa(r))throw new AggregateError("Aggregator package not set","InvalidWallet");const et=yield t.devInspectTransactionBlock({transactionBlock:j,sender:r});if(et.error!=null)throw new AggregateError("Aggregator package not set","SimulateError");const W=(i=et.events)==null?void 0:i.filter(u=>u.type.includes("CalculatedSwapResultEvent"));if(W.length===0||W.length!==A.length)throw new AggregateError("Simulate event result error","simulateEventError");let E=b?xe:Ca,S=0;for(let u=0;u<W.length;u+=1)if(!W[u].parsedJson.data.is_exceed)if(e.byAmountIn){const d=new je.BN(W[u].parsedJson.data.amount_out);d.gt(E)&&(S=u,E=d)}else{const d=new je.BN(W[u].parsedJson.data.amount_out);d.lt(E)&&(S=u,E=d)}const I=W[S].parsedJson.data;console.log("event",JSON.stringify(I,null,2));const B=I.step_results[0].current_sqrt_price,[J,U]=yield Promise.all([t.getCoinMetadata({coinType:L}).then(u=>u==null?void 0:u.decimals),t.getCoinMetadata({coinType:F}).then(u=>u==null?void 0:u.decimals)]);if(J==null||U==null)throw new AggregateError("Simulate event result error","CannotGetDecimals");const x=Ia(B,J,U),w={amountIn:new je.BN((s=I.amount_in)!=null?s:0),amountOut:new je.BN((l=I.amount_out)!=null?l:0),routes:[{path:[{id:A[S],direction:P,provider:"CETUS",from:C,target:q,feeRate:I.fee_rate,amountIn:I.amount_in,amountOut:I.amount_out}],amountIn:new je.BN((a=I.amount_in)!=null?a:0),amountOut:new je.BN((c=I.amount_out)!=null?c:0),initialPrice:x}],insufficientLiquidity:!1};return{isExceed:I.is_exceed,routeData:w}})}var Ea=class{constructor(t){if(t!==0)throw new Error("Kriya clmm only supported on mainnet");this.version="0xf5145a7ac345ca8736cf8c76047d00d6d378f30e81be6f6eb557184d9de93c78"}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],y=[e.object(r.id),i,e.object(this.version),e.object(Xe)];return e.moveCall({target:`${t.publishedAt()}::kriya_clmm::${c}`,typeArguments:[p,v],arguments:y})})}},Ta=class{constructor(t){if(t!==0)throw new Error("Haedal only supported on mainnet")}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Haedal not support b2a swap");const l="swap_a2b",a=[e.object(r.id),e.object("0x5"),i];return e.moveCall({target:`${t.publishedAt()}::haedal::${l}`,typeArguments:[],arguments:a})})}},ka=class{constructor(t){if(t!==0)throw new Error("Afsui only supported on mainnet");this.stakedSuiVault="0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",this.safe="0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",this.referVault="0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",this.validator="0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2"}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Afsui not support b2a swap");const l="swap_a2b",a=[e.object(this.stakedSuiVault),e.object(this.safe),e.object("0x5"),e.object(this.referVault),e.object(this.validator),i];return e.moveCall({target:`${t.publishedAt()}::afsui::${l}`,typeArguments:[],arguments:a})})}},Ba=class{constructor(t){if(t!==0)throw new Error("Volo only supported on mainnet");this.nativePool="0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",this.metadata="0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60"}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s}=r;if(!s)throw new Error("Volo not support b2a swap");const l="swap_a2b",a=[e.object(this.nativePool),e.object(this.metadata),e.object("0x5"),i];return e.moveCall({target:`${t.publishedAt()}::volo::${l}`,typeArguments:[],arguments:a})})}},Na=class{constructor(t){if(t!==0)throw new Error("Flowx clmm only supported on mainnet");this.versioned="0x67624a1533b5aff5d0dfcf5e598684350efd38134d2d245f475524c03a64e656",this.poolRegistry="0x27565d24a4cd51127ac90e4074a841bbe356cca7bf5759ddc14a975be1632abc"}swap(t,e,r,i){return Mt(this,null,function*(){const{direction:s,from:l,target:a}=r,[c,p,v]=s?["swap_a2b",l,a]:["swap_b2a",a,l],y=[e.object(this.poolRegistry),e.pure.u64(r.feeRate*1e6),i,e.object(this.versioned),e.object(Xe)];return e.moveCall({target:`${t.publishedAt()}::flowx_clmm::${c}`,typeArguments:[p,v],arguments:y})})}},Ra="CETUS",Pa="DEEPBOOK",ja="KRIYA",La="FLOWX",Fa="FLOWXV3",qa="KRIYAV3",Ji="TURBOS",_n="AFTERMATH",Da="HAEDAL",Ua="VOLO",xa="AFSUI",Wa=class{constructor(t,e,r,i){this.endpoint=t,this.client=r,this.signer=e,this.env=i,this.allCoins=[]}getAllCoins(){return Mt(this,null,function*(){let t=null,e=50;const r=[];for(;;){const i=yield this.client.getAllCoins({owner:this.signer,cursor:t,limit:e});for(const s of i.data)r.push({coinAddress:Ze(s.coinType).source_address,coinObjectId:s.coinObjectId,balance:BigInt(s.balance)});if(i.data.length<e)break;t=i.data[e-1].coinObjectId}return r})}findRouters(t){return Mt(this,null,function*(){return Za(this.endpoint,t)})}expectInputSwap(t,e,r,i,s){return Mt(this,null,function*(){if(r.length===0)throw new Error("No router found");const l=r.map(b=>b.amountIn.toString()),a=r[0].path[0].from,c=r[0].path[r[0].path.length-1].target,p=t.splitCoins(e,l),v=[];for(let b=0;b<r.length;b++){if(r[b].path.length===0)throw new Error("Empty path");let A=p[b];for(const C of r[b].path)A=yield this.newDex(C.provider,s).swap(this,t,C,A);v.push(A)}return this.transferOrDestoryCoin(t,e,a),this.checkCoinThresholdAndMergeCoin(t,v,c,i)})}expectOutputSwap(t,e,r,i){return Mt(this,null,function*(){const s=[],l=[],a=[],c=new ni(this.env,i);for(let v=0;v<r.length;v++){const y=r[v];for(let A=y.path.length-1;A>=0;A--){const C=y.path[A],q=c.flash_swap(this,t,C,!1);s.unshift(q.targetCoin),l.unshift(q.flashReceipt)}let b=e;for(let A=0;A<y.path.length;A++){const C=y.path[A],q=c.repay_flash_swap(this,t,C,b,l[A]);b=s[A],A===0?e=q:this.transferOrDestoryCoin(t,q,C.from),A===y.path.length-1&&a.push(b)}}const p=r[0].path[0].from;if(this.transferOrDestoryCoin(t,e,p),a.length>1){const v=t.makeMoveVec({elements:a.slice(1)});t.moveCall({target:`${pn.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[r[0].path[r[0].path.length-1].target],arguments:[a[0],v]})}return a[0]})}swapInPools(t){return Mt(this,null,function*(){let e;try{e=yield Oa(this.client,t,this.signer)}catch(r){return console.error("swapInPools error:",r),null}return e})}routerSwap(t){return Mt(this,null,function*(){const{routers:e,inputCoin:r,slippage:i,byAmountIn:s,txb:l,partner:a}=t,c=e.reduce((A,C)=>A.add(C.amountIn),new ge.default(0)),p=e.reduce((A,C)=>A.add(C.amountOut),new ge.default(0)),v=li(s?p:c,s,i);if(s)return yield this.expectInputSwap(l,r,e,new ge.default(v),a);const y=l.splitCoins(r,[v.toString()]);return this.transferOrDestoryCoin(l,r,e[0].path[0].from),yield this.expectOutputSwap(l,y[0],e,a)})}fastRouterSwap(t){return Mt(this,null,function*(){const{routers:e,byAmountIn:r,slippage:i,txb:s,partner:l,isMergeTragetCoin:a,refreshAllCoins:c}=t;(c||this.allCoins.length===0)&&(this.allCoins=yield this.getAllCoins());const p=e[0].path[0].from,v=e[0].path[e[0].path.length-1].target,y=e.reduce((P,G)=>P.add(G.amountIn),new ge.default(0)),b=e.reduce((P,G)=>P.add(G.amountOut),new ge.default(0)),A=li(r?b:y,r,i),C=r?y:A,q=ai(s,this.allCoins,BigInt(C.toString()),p),j=yield this.routerSwap({routers:e,inputCoin:q.targetCoin,slippage:i,byAmountIn:r,txb:s,partner:l});if(a){const P=ai(s,this.allCoins,BigInt(0),v);s.mergeCoins(P.targetCoin,[j]),P.isMintZeroCoin&&this.transferOrDestoryCoin(s,P.targetCoin,v)}else this.transferOrDestoryCoin(s,j,v)})}publishedAt(){return this.env===0?"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302":"0x0"}transferOrDestoryCoin(t,e,r){t.moveCall({target:`${this.publishedAt()}::utils::transfer_or_destroy_coin`,typeArguments:[r],arguments:[e]})}checkCoinThresholdAndMergeCoin(t,e,r,i){let s=e[0];if(e.length>1){let l=t.makeMoveVec({elements:e.slice(1)});t.moveCall({target:`${pn.SUI_FRAMEWORK_ADDRESS}::pay::join_vec`,typeArguments:[r],arguments:[e[0],l]}),s=e[0]}return t.moveCall({target:`${this.publishedAt()}::utils::check_coin_threshold`,typeArguments:[r],arguments:[s,t.pure.u64(i.toString())]}),s}newDex(t,e){switch(t){case Ra:return new ni(this.env,e);case Pa:return new ga(this.env);case ja:return new pa(this.env);case qa:return new Ea(this.env);case La:return new va(this.env);case Fa:return new Na(this.env);case Ji:return new ma(this.env);case _n:return new da(this.env);case Da:return new Ta(this.env);case xa:return new ka(this.env);case Ua:return new Ba(this.env);default:throw new Error(`Unsupported dex ${t}`)}}signAndExecuteTransaction(t,e){return Mt(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0,showInput:!0,showBalanceChanges:!0}})})}devInspectTransactionBlock(t){return Mt(this,null,function*(){return yield this.client.devInspectTransactionBlock({transactionBlock:t,sender:this.signer})})}sendTransaction(t,e){return Mt(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:t,signer:e})})}};function Va(t){return{amountIn:new ge.default(t.amount_in.toString()),amountOut:new ge.default(t.amount_out.toString()),insufficientLiquidity:!1,routes:t.routes.map(e=>({path:e.path.map(r=>{var i,s;let l;r.provider===_n&&(l=r.extended_details.aftermath_pool_flatness===0?"v2":"v3");let a;return(r.provider===Ji||r.provider===_n)&&(a={aftermathLpSupplyType:(i=r.extended_details)==null?void 0:i.aftermath_lp_supply_type,turbosFeeType:(s=r.extended_details)==null?void 0:s.turbos_fee_type}),{id:r.id,direction:r.direction,provider:r.provider,from:r.from,target:r.target,feeRate:r.fee_rate,amountIn:r.amount_in,amountOut:r.amount_out,extendedDetails:a,version:l}}),amountIn:new ge.default(e.amount_in.toString()),amountOut:new ge.default(e.amount_out.toString()),initialPrice:new Cr(e.initial_price.toString())}))}}var Xe="0x0000000000000000000000000000000000000000000000000000000000000006";function Za(t,e){return Mt(this,null,function*(){const{from:r,target:i,amount:s,byAmountIn:l,depth:a,splitAlgorithm:c,splitFactor:p,splitCount:v,providers:y}=e,b=ze(r),A=ze(i);let C=`${t}?from=${b}&target=${A}&amount=${s.toString()}&by_amount_in=${l}`;a&&(C+=`&depth=${a}`),c&&(C+=`&split_algorithm=${c}`),p&&(C+=`&split_factor=${p}`),v&&(C+=`&split_count=${v}`),y&&y.length>0&&(C+=`&providers=${y.join(",")}`);const q=yield fetch(C);if(!q.ok)return{amountIn:xe,amountOut:xe,routes:[],insufficientLiquidity:!1,error:{code:10001,msg:oi(10001)}};const j=yield q.json();if(j.data!=null)return Va(j.data);const P=j.msg==="liquidity is not enough";return{amountIn:xe,amountOut:xe,routes:[],insufficientLiquidity:P,error:{code:10003,msg:oi(10003)}}})}var Hi=(t=>(t[t.Mainnet=0]="Mainnet",t[t.Testnet=1]="Testnet",t))(Hi||{}),$a=Wa,ui=Hi;const Ka=ks(),Gi=Ka.public.appEnv;console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:14 ~ env:",Gi);function za(){const{tokensObj:t,setTokensObj:e}=gi(),r=Es(),i=St(()=>r),s=Dr(),l=St(()=>s),a=me.Sui.aggregatorv2Url,c=localStorage.getItem("Sui-currentRpclocal4")||me.Sui.fullRpcUrl,p=me.Sui.simulationAccount;me.Sui.aggregatorV2.package_id,me.Sui.aggregatorV2.published_at,me.Sui.integrate.package_id,me.Sui.integrate.published_at;const v=new Ts({url:c}),y=St(()=>new $a(a,i.value.address||p,v,Gi=="test"?ui.Testnet:ui.Mainnet)),b=Fs(),A=St(()=>b),C=E=>({transactionBlock:E,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),q=(E,S)=>S.minus(E).div(S).mul(100),j=(E,S,I)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:71 ~ getPriceImpact ~ routerData:",E);const{routes:B}=E;let J=ie(0);return B==null||B.forEach(U=>{const x=ie(U.amountOut).div(Math.pow(10,I)),w=ie(U.amountIn).div(Math.pow(10,S)),n=x.div(w),u=ie(U==null?void 0:U.amountIn).div(E==null?void 0:E.amountIn),d=q(n,ie(U.initialPrice.toString())).mul(new hi(u));J=J.add(d)}),Number(Us(J.toNumber(),2))},P=E=>Vn(E)==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":Vn(E),G=(E,S,I)=>{var J,U,x;const B=E.filter(w=>{const n=P(S),u=P(I),d=P(w==null?void 0:w.base),M=P(w==null?void 0:w.quote);return n===d&&u===M||u===d&&n===M});return(B==null?void 0:B.length)>0?(Object.values((J=B==null?void 0:B[0])==null?void 0:J.addressMap),Array.from((x=(U=B==null?void 0:B[0])==null?void 0:U.addressMap)==null?void 0:x.values())):null},L=E=>E==null?void 0:E.map(S=>{var I,B;return{...S,amountIn:(I=S==null?void 0:S.amountIn)==null?void 0:I.toString(),amountOut:(B=S==null?void 0:S.amountOut)==null?void 0:B.toString(),initialPrice:(S==null?void 0:S.initial_price)||(S==null?void 0:S.initialPrice)}}),F=async(E,S,I,B,J,U,x)=>{var w,n,u,d,M,_,f,h,g,o,m,N,R,T,Z,K,H,lt,Q,rt,nt,it,st,Xt,ot,ut,Ht,vt,mt,Oe,gt,wt,ve;console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:131 ~ getFindRouter ~ index?.value?.liquiditySourceList:",(w=l==null?void 0:l.value)==null?void 0:w.liquiditySourceList),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:131 ~ getFindRouter ~ index?.value?.includeRoutes:",(n=l==null?void 0:l.value)==null?void 0:n.includeRoutes);try{const ht=(d=(u=l==null?void 0:l.value)==null?void 0:u.liquiditySourceList)==null?void 0:d.filter(X=>(X==null?void 0:X.status)==="open");console.log("ðŸš€ ~ file: useSuiAggregator.ts:154 ~ function ~ liquiditySources:",ht);const at=(M=ht==null?void 0:ht.filter(X=>{var pt;return((pt=X==null?void 0:X.name)==null?void 0:pt.toUpperCase())!=="CETUS"}))==null?void 0:M.map(X=>{var pt,Ye,yt;if(((pt=X==null?void 0:X.name)==null?void 0:pt.indexOf("Kriya"))>-1){if((X==null?void 0:X.name)==="Kriya V2")return"KRIYA";if((X==null?void 0:X.name)==="Kriya V3")return"KRIYAV3"}else{if((X==null?void 0:X.name)==="Aftermath LSD")return"AFSUI";if(((Ye=X==null?void 0:X.name)==null?void 0:Ye.indexOf("FlowX"))>-1){if((X==null?void 0:X.name)==="FlowX V2")return"FLOWX";if((X==null?void 0:X.name)==="FlowX V3")return"FLOWXV3"}else return(yt=X==null?void 0:X.name)==null?void 0:yt.toUpperCase()}});console.log("ðŸš€ ~ file: useSuiAggregator.ts:155 ~ providers ~ providers:",at);const ft={from:P((_=E==null?void 0:E.value)==null?void 0:_.address),target:P((f=S==null?void 0:S.value)==null?void 0:f.address),amount:new Wn(I),byAmountIn:B,depth:3,providers:["CETUS",...at]};((h=l==null?void 0:l.value)==null?void 0:h.includeRoutes)!=="open"&&(ft.splitCount=1),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:145 ~ getFindRouter ~ findRouterParams:",ft);const z=await y.value.findRouters(ft);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:163 ~ function ~ res:",z),((g=z==null?void 0:z.error)==null?void 0:g.code)==10001)return{...z,id:x};if(z!=null&&z.insufficientLiquidity)return{...z,id:x};if(!(z!=null&&z.routes)||((o=z==null?void 0:z.routes)==null?void 0:o.length)===0)throw Error("Aggregator no router");console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:156 ~ getFindRouter ~ findRouter res Before formatting:",JSON.stringify(z,null,2));const ct={...z,amountIn:(m=z==null?void 0:z.amountIn)==null?void 0:m.toString(),amountOut:(N=z==null?void 0:z.amountOut)==null?void 0:N.toString(),routes:L(z==null?void 0:z.routes),originRes:z};console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:159 ~ getFindRouter ~ findRouter formatRes:",JSON.stringify(ct,null,2));const Ee=j(ct,(R=E==null?void 0:E.value)==null?void 0:R.decimals,(T=S==null?void 0:S.value)==null?void 0:T.decimals);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:170 ~ getFindRouter ~ priceImpact:",Ee),{...ct,priceImpact:Ee,fromCoinAddress:(Z=E==null?void 0:E.value)==null?void 0:Z.address,toCoinAddress:(K=S==null?void 0:S.value)==null?void 0:K.address,id:x}}catch(ht){try{console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ error:",ht),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ swapRouterStore?.value?.poolListGroupByTokenAB:",(H=A==null?void 0:A.value)==null?void 0:H.poolListGroupByTokenAB);const at=G((lt=A==null?void 0:A.value)==null?void 0:lt.poolListGroupByTokenAB,(Q=E==null?void 0:E.value)==null?void 0:Q.address,(rt=S==null?void 0:S.value)==null?void 0:rt.address);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ pools:",at),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ params:",{from:P((nt=E==null?void 0:E.value)==null?void 0:nt.address),target:P((it=S==null?void 0:S.value)==null?void 0:it.address),amount:I,byAmountIn:B,pools:at}),at){const ft=await y.value.swapInPools({from:P((st=E==null?void 0:E.value)==null?void 0:st.address),target:P((Xt=S==null?void 0:S.value)==null?void 0:Xt.address),amount:new Wn(I),byAmountIn:B,pools:at});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ res:",ft),ft){const z={isExceed:ft==null?void 0:ft.isExceed,amountIn:(ut=(ot=ft==null?void 0:ft.routeData)==null?void 0:ot.amountIn)==null?void 0:ut.toString(),amountOut:(vt=(Ht=ft==null?void 0:ft.routeData)==null?void 0:Ht.amountOut)==null?void 0:vt.toString(),routes:L((mt=ft==null?void 0:ft.routeData)==null?void 0:mt.routes)};console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ forMatRes:",z);const ct=j(z,(Oe=E==null?void 0:E.value)==null?void 0:Oe.decimals,(gt=S==null?void 0:S.value)==null?void 0:gt.decimals);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ priceImpact:",ct),{...z,priceImpact:ct,fromCoinAddress:(wt=E==null?void 0:E.value)==null?void 0:wt.address,toCoinAddress:(ve=S==null?void 0:S.value)==null?void 0:ve.address,id:x,originRes:ft==null?void 0:ft.routeData}}return null}return null}catch(at){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:179 ~ getFindRouter Error ~ e:",at),null}}},k=async(E,S,I,B,J)=>{try{console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:246 ~ getRouterSwapPayload ~ router:",E),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:246 ~ getRouterSwapPayload ~ router.originRes:",E.originRes);const U=new Pr,x={routers:E.originRes.routes,byAmountIn:S,txb:U,slippage:I,isMergeTragetCoin:!0,refreshAllCoins:!0};console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:258 ~ getRouterSwapPayload ~ routerParams:",JSON.stringify(x,null,2));const w=await y.value.fastRouterSwap(x);return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:122 ~ function ~ res:",U),C(U)}catch(U){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:49 ~ function ~ error:",U)}},{getTokenBySymbol:et}=qs("Sui");return{getFindRouter:F,getRouterSwapPayload:k,getTokenInfo:async E=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useSuiAggregator.ts:288 ~ getTokenInfo ~ address:",E),t[E])return t[E];{const S=await et(t,E),I={[E]:S},B={...t,...I};e(B);try{localStorage.setItem("SuiTokenObj",JSON.stringify(B))}catch(J){console.log("ðŸš€ ~ file: useSuiAggregator.ts:295 ~ getTokenInfo ~ err:",J)}return S}}}}const Fu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",qu="data:image/png;base64,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",Du="data:image/png;base64,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",Ie=t=>(Lr("data-v-14829d28"),t=t(),Fr(),t),Xa={class:"aggregator-setting-content"},Ya={key:0,class:"liquidity-source"},Ja={class:"liquidity-source-title"},Ha={class:"title-left"},Ga=Ie(()=>D("svg",{"aria-hidden":"true",class:"icon"},[D("use",{"xlink:href":"#icon-icon_liquiditysources2"})],-1)),Qa=Ie(()=>D("span",null,"Liquidity Sources",-1)),tl={class:"title-right plus-switch plus-liquidity-switch"},el=Ie(()=>D("span",null,"Select all",-1)),rl={class:"liquidity-source-content"},nl=Ie(()=>D("div",{class:"liquidity-source-text"},"Disable/Enable Liquidity Sources",-1)),il={class:"liquidity-source-list-box"},sl={class:"dex-source-box"},ol={class:"group-source-switch plus-switch plus-liquidity-switch"},al=Ie(()=>D("span",null,"DEX",-1)),ll={class:"liquidity-source-list"},ul={class:"left"},cl={alt:""},hl={class:"right plus-switch plus-liquidity-switch"},fl={key:1,class:"no-allowed"},dl={class:"other-source-box"},gl={class:"group-source-switch plus-switch plus-liquidity-switch"},pl=Ie(()=>D("span",null,"Other",-1)),vl={class:"liquidity-source-list"},ml={class:"left"},wl={alt:""},Ml={class:"right plus-switch plus-liquidity-switch"},yl={class:"routing-preference"},_l=Ie(()=>D("div",{class:"routing-preference-title"},[D("svg",{"aria-hidden":"true",class:"icon"},[D("use",{"xlink:href":"#icon-icon_routingpreference"})]),D("span",null,"Routing Preference")],-1)),bl={class:"routing-preference-content"},Al={class:"routing-preference-list"},Sl={class:"routing-preference-item plus-switch plus-liquidity-switch"},Cl=Ie(()=>D("span",null,"Support order split",-1)),Il={class:"action-btn"},Ol=jr({__name:"aggregator-setting-modal",emits:["close","modalConfirm"],setup(t,{emit:e}){const r=e,i=Dr(),s=St(()=>i),l=St(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: aggregator-setting-modal.vue:121 ~ constliquiditySourceList:any=computed ~ store.value.liquiditySourceList:",s.value.liquiditySourceList),s.value.liquiditySourceList)),a=St(()=>s.value.includeRoutes),c=St(()=>s.value.supportDepth3),p=ce([]),v=ce(),y=ce(),b=ce(),A=S=>{const I={};S.forEach(B=>{I[B.name]=B.status}),b.value=I};We(()=>[l.value,a.value],([S,I])=>{S&&S.length>0&&(p.value=S,console.log("ðŸš€ ~ file: aggregator-setting-modal.vue:144 ~ liquiditySourceList:",S),A(S)),I&&(v.value=I)},{immediate:!0,deep:!0});const C=St(()=>{var S;return(S=p.value)==null?void 0:S.filter(I=>(I==null?void 0:I.type)==="dex")}),q=St(()=>{var S;return(S=p.value)==null?void 0:S.filter(I=>(I==null?void 0:I.type)==="other")});We(()=>c.value,S=>{S&&(y.value=S)},{immediate:!0});const j=S=>{v.value=S},P=S=>{const I=b.value[S.name]=="open"?"close":"open";b.value[S.name]=I},G=()=>{const S=p.value.map(J=>({...J,status:b.value[J.name]}));console.log("ðŸš€ðŸš€ðŸš€ ~ file: aggregator-setting-modal.vue:192 ~ result ~ result:",S);const I=S.filter(J=>J.status=="open"||J.status=="Open");I&&I.length>1?localStorage.setItem("plusChecked1","open"):localStorage.setItem("plusChecked1","close"),i.setAggregatorSetting(S,v.value,y.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: aggregator-setting-modal.vue:195 ~ confirm ~ result:",S);const B=new Event("updateSwapParams");window.dispatchEvent(B),r("modalConfirm",S)},L=ce(!0),F=S=>{L.value=!L.value,p.value.forEach(I=>{const B=(I==null?void 0:I.name)=="Cetus"||S?"open":"close";b.value[I==null?void 0:I.name]=B})},k=ce(!0),et=ce(!0),W=S=>{k.value=!k.value,C.value.forEach(I=>{const B=(I==null?void 0:I.name)=="Cetus"||S?"open":"close";b.value[I==null?void 0:I.name]=B})},E=S=>{et.value=!et.value,q.value.forEach(I=>{const B=S?"open":"close";b.value[I==null?void 0:I.name]=B})};return We(b.value,S=>{var I,B;if(S)if(console.log("ðŸš€ ~ watch ~ newValue:",S),console.log("ðŸš€ ~ watch ~ sourceList:",p.value),console.log("ðŸš€ ~ watch ~ dexSourceList:",C.value),Object.keys(S).filter(U=>U!=="Cetus").every(U=>S[U]==="open"))L.value=!0,k.value=!0,et.value=!0;else{L.value=!1;const U=C.value.filter(w=>(S==null?void 0:S[w==null?void 0:w.name])==="open"),x=q.value.filter(w=>(S==null?void 0:S[w==null?void 0:w.name])==="open");(U==null?void 0:U.length)>0&&(U==null?void 0:U.length)===((I=C==null?void 0:C.value)==null?void 0:I.length)?k.value=!0:k.value=!1,(x==null?void 0:x.length)>0&&(x==null?void 0:x.length)===((B=q==null?void 0:q.value)==null?void 0:B.length)?et.value=!0:et.value=!1}},{immediate:!0}),(S,I)=>{const B=Ns,J=Rs,U=Bs("image");return bt(),Or(er(di),{title:"Customize Routing",class:"aggregator-setting-modal",footer:null,visible:!0,width:"460px",onCancel:I[5]||(I[5]=x=>S.$emit("close"))},{default:tr(()=>[D("div",Xa,[p.value&&p.value.length>0?(bt(),zt("div",Ya,[D("div",Ja,[D("div",Ha,[Ga,Qa,_t(Ds,{type:"liquiditySources","xlink-href":"#icon-icon_tips"})]),D("div",tl,[el,_t(B,{class:"liquidity-switch",checked:L.value,onClick:I[0]||(I[0]=x=>{F(x)})},null,8,["checked"])])]),D("div",rl,[nl,D("div",il,[D("div",sl,[D("div",ol,[al,_t(B,{class:"liquidity-switch",checked:k.value,onClick:I[1]||(I[1]=x=>{W(x)})},null,8,["checked"])]),D("div",ll,[(bt(!0),zt(rr,null,nr(C.value,x=>(bt(),zt("div",{key:x.name,class:"liquidity-source-item"},[D("div",ul,[Zn(D("img",cl,null,512),[[U,x.logo]]),D("span",null,Gt(x.name),1)]),D("div",hl,[x.name!=="Cetus"?(bt(),Or(B,{key:0,class:"liquidity-switch",checked:b.value[x.name]=="open",onClick:w=>P(x)},null,8,["checked","onClick"])):(bt(),zt("div",fl,[_t(B,{class:"liquidity-switch lock-switch",checked:!0})]))])]))),128))])]),D("div",dl,[D("div",gl,[pl,_t(B,{class:"liquidity-switch",checked:et.value,onClick:I[2]||(I[2]=x=>{E(x)})},null,8,["checked"])]),D("div",vl,[(bt(!0),zt(rr,null,nr(q.value,x=>(bt(),zt("div",{key:x.name,class:"liquidity-source-item"},[D("div",ml,[Zn(D("img",wl,null,512),[[U,x.logo]]),D("span",null,Gt(x.name),1)]),D("div",Ml,[_t(B,{class:"liquidity-switch",checked:b.value[x.name]=="open",onClick:w=>P(x)},null,8,["checked","onClick"])])]))),128))])])])])])):yr("",!0),D("div",yl,[_l,D("div",bl,[D("div",Al,[D("div",Sl,[Cl,_t(B,{checked:v.value=="open",onChange:I[3]||(I[3]=x=>j(v.value=="open"?"close":"open"))},null,8,["checked"])])])])]),D("div",Il,[_t(J,{class:"cancel-btn",onClick:I[4]||(I[4]=x=>S.$emit("close"))},{default:tr(()=>[$n("Cancel")]),_:1}),_t(J,{class:"confirm-btn",onClick:G},{default:tr(()=>[$n("Confirm")]),_:1})])])]),_:1})}}});const Uu=qr(Ol,[["__scopeId","data-v-14829d28"]]),El=jr({props:{text:{type:String,default:""}},setup(t){const{t:e}=Ps(),{$notify:r}=js();return{handleCopy:s=>{if(navigator.clipboard)navigator.clipboard.writeText(s);else{const l=document.createElement("input");l.readOnly=!0,document.body.appendChild(l),l.value=s,l.select(),document.execCommand("Copy"),document.body.removeChild(l)}r.success({icon:pr("svg",{class:{icon:!0},"aria-hidden":!0},[pr("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:pr("div",{class:"notification-title"},[pr("span",{innerHTML:e("tips.copySuccess")},null)]),class:"ant-notification-copy"})}}}});const Tl=t=>(Lr("data-v-58075ffa"),t=t(),Fr(),t),kl=Tl(()=>D("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),Bl=[kl];function Nl(t,e,r,i,s,l){return bt(),zt("svg",{class:"copy-icon","aria-hidden":"true",onClick:e[0]||(e[0]=a=>t.handleCopy(t.text))},Bl)}const Rl=qr(El,[["render",Nl],["__scopeId","data-v-58075ffa"]]),Pl=jr({props:{type:{type:String,default:""},value:{type:String,default:""}},setup(t){const e=Dr(),r=St(()=>e),i=St(()=>r.value.currentExplorer);return{getExplorerUrl:pi,currentExplorer:i}}});const jl=t=>(Lr("data-v-9f3037f6"),t=t(),Fr(),t),Ll=["href"],Fl=jl(()=>D("svg",{class:"icon icon-up","aria-hidden":"true"},[D("use",{"xlink:href":"#icon-icon_link"})],-1)),ql=[Fl];function Dl(t,e,r,i,s,l){return bt(),zt("a",{target:"_blank",class:"jump-icon",href:("getExplorerUrl"in t?t.getExplorerUrl:er(pi))(t.currentExplorer,t.type,t.value)},ql,8,Ll)}const Ul=qr(Pl,[["render",Dl],["__scopeId","data-v-9f3037f6"]]),xl={CETUS:"Cetus",DEEPBOOK:"DeepBook",KRIYA:"Kriya V2",KRIYAV3:"Kriya V3",FLOWX:"FlowX V2",FLOWXV3:"FlowX V3",TURBOS:"Turbos",AFTERMATH:"Aftermath",HAEDAL:"Haedal",VOLO:"Volo",AFSUI:"Aftermath LSD"},Wl=jr({components:{Modal:di,CoinImg:Ws,CopyBtn:Rl,ExplorerLink:Ul},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(t){const{getTokenInfo:e}=za(),r=gi(),i=St(()=>r==null?void 0:r.tokensObj),s=Dr(),l=St(()=>s==null?void 0:s.liquiditySourceObj),a=ce(!1);Ls(()=>{a.value=!0});const c=ce([]),p=ce({}),v=async L=>{for(let F=0;F<(L==null?void 0:L.length);F++){const k=L[F].path;for(let et=0;et<(k==null?void 0:k.length);et++){const W=k[et];console.log(W,"path##");const E=await e(W==null?void 0:W.from),S=await e(W==null?void 0:W.target),I=(E==null?void 0:E.logoURI)||(E==null?void 0:E.logo_url)||"",B=(S==null?void 0:S.logoURI)||(S==null?void 0:S.logo_url)||"";p.value[W==null?void 0:W.from]={...E,coinImg:I},p.value[W==null?void 0:W.target]={...S,coinImg:B},console.log(p.value,"##routerTokenMap.value")}}console.log("ðŸš€ðŸš€ðŸš€ ~ file: router-modal.vue:189 ~ setup ~ routerTokenMap:",p)};We(()=>{var L;return[a.value,(L=t==null?void 0:t.suiPreSwapdata)==null?void 0:L.routes]},([L,F])=>{L&&(y(F),v(F))},{immediate:!0,deep:!0});const y=async L=>{var k,et,W,E,S;const F=[];for(let I=0;I<(L==null?void 0:L.length);I++){const B=L[I],J=[];for(let x=0;x<((k=B==null?void 0:B.path)==null?void 0:k.length);x++){const w=B==null?void 0:B.path[x];console.log("ðŸš€ ~ file: router-modal.vue:241 ~ path ~ p:",w);const n=(w==null?void 0:w.feeRate)&&Number(w==null?void 0:w.feeRate)&&ie(w==null?void 0:w.feeRate).mul(100).toString()+"%"||void 0,u=n;J.push({poolAddress:w==null?void 0:w.id,fee:n,provider:xl[w==null?void 0:w.provider],providerImg:(E=(W=l==null?void 0:l.value)==null?void 0:W[(et=w==null?void 0:w.provider)==null?void 0:et.toUpperCase()])==null?void 0:E.logo,from:w==null?void 0:w.from,to:w==null?void 0:w.target,displayFeeOrVersion:u})}const U=xs(ie(B==null?void 0:B.amountIn).div((S=t==null?void 0:t.suiPreSwapdata)==null?void 0:S.amountIn).mul(100).toString(),1);F.push({path:J,proportion:U,amountOut:B==null?void 0:B.amountOut})}if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: router-modal.vue:182 ~ routerList ~ result:",F),(F==null?void 0:F.length)<2){c.value=F;return}c.value=F==null?void 0:F.sort((I,B)=>ie(I==null?void 0:I.amountOut).minus(B==null?void 0:B.amountOut).lt(0))};We(()=>[c.value],([L])=>{console.log("ðŸš€ ~ file: router-modal.vue:284 ~ watch ~ routerList:",L)});const b=St(()=>{var L,F;return((L=t==null?void 0:t.fromCoin)==null?void 0:L.logoURI)||((F=t==null?void 0:t.fromCoin)==null?void 0:F.logo_url)||""}),A=St(()=>{var L,F;return((L=t==null?void 0:t.toCoin)==null?void 0:L.logoURI)||((F=t==null?void 0:t.toCoin)==null?void 0:F.logo_url)||""}),C=St(()=>{var E;const L=[];let F=ie(0);(E=c==null?void 0:c.value)==null||E.forEach((S,I)=>{F=F.plus(S.proportion);const B=S.proportion.split(".");L.push({value:S.proportion,int:B[0],decimal:B[1],pathIndex:I})});let k=ie(100).minus(F).toNumber();const et=L.sort((S,I)=>Number(I.decimal)-Number(S.decimal));if(k)for(let S=0;S<et.length&&k;S++)et[S].value=ie(et[S].value).plus(.1).toString(),k=ie(k).minus(.1).toNumber();return console.log("ðŸš€ðŸš€ðŸš€ ~ file: router-modal.vue:182 ~ routerList ~ sortByDecimalPart:",et),Object.fromEntries(et.map(S=>[S.pathIndex,S]))}),q=St(()=>{var L;return((L=c==null?void 0:c.value)==null?void 0:L.length)===1}),j=St(()=>{var F;const L={};return(F=c==null?void 0:c.value)==null||F.forEach(k=>{var et;(et=k==null?void 0:k.path)==null||et.forEach(W=>{var E,S,I,B;console.log("ðŸš€ ~ file: router-modal.vue:343 ~ route?.path?.forEach ~ p:",W),((E=W==null?void 0:W.provider)==null?void 0:E.indexOf("Kriya"))>-1?L.Kriya=mr.KRIYA:((S=W==null?void 0:W.provider)==null?void 0:S.indexOf("Aftermath"))>-1?L.Aftermath=mr.AFTERMATH:((I=W==null?void 0:W.provider)==null?void 0:I.indexOf("FlowX"))>-1?L.FlowX=mr.FLOWX:L[W==null?void 0:W.provider]=mr[(B=W==null?void 0:W.provider)==null?void 0:B.toUpperCase()]})}),Object.values(L)});We(()=>j.value,L=>{console.log("providerList newValue: ",L)});const P=St(()=>{var L,F,k,et,W,E,S,I,B,J,U,x,w;if(((F=(L=t==null?void 0:t.suiPreSwapdata)==null?void 0:L.routes)==null?void 0:F.length)===1)if(((E=(W=(et=(k=t==null?void 0:t.suiPreSwapdata)==null?void 0:k.routes)==null?void 0:et[0])==null?void 0:W.path)==null?void 0:E.length)>1){const n=[(S=t==null?void 0:t.fromCoin)==null?void 0:S.symbol];return(U=(J=(B=(I=t==null?void 0:t.suiPreSwapdata)==null?void 0:I.routes)==null?void 0:B[0])==null?void 0:J.path)==null||U.forEach((u,d)=>{var M,_;n.push((_=(M=i==null?void 0:i.value)==null?void 0:M[u==null?void 0:u.target])==null?void 0:_.symbol)}),n==null?void 0:n.join(" > ")}else return`${(x=t==null?void 0:t.fromCoin)==null?void 0:x.symbol} > ${(w=t==null?void 0:t.toCoin)==null?void 0:w.symbol}`;return""}),G=St(()=>{var L;return(L=c==null?void 0:c.value)==null?void 0:L.length});return{fromCoinImg:b,toCoinImg:A,routerList:c,proportionObj:C,isSingleRoute:q,onlyOneRouteText:P,routeNum:G,providerList:j,addCommom:fn,addressAbridge:vi,routerTokenMap:p}}});const Bn=t=>(Lr("data-v-8707364a"),t=t(),Fr(),t),Vl=Bn(()=>D("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[D("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Zl={class:"swap-router-modal-content"},$l={class:"simple-path"},Kl={key:0},zl={key:1},Xl={class:"provider-img-list"},Yl=Bn(()=>D("div",null,null,-1)),Jl={class:"top"},Hl={class:"from-token"},Gl={class:"num"},Ql={class:"symbol"},tu={class:"to-token"},eu={class:"num"},ru={class:"symbol"},nu={class:"from-coin-img"},iu={class:"to-coin-img"},su={class:"router-box"},ou={class:"proportion"},au={class:"pools"},lu={class:"coin-pair"},uu={class:"name"},cu={key:0,class:"fee"},hu={key:0,class:"pool-info"},fu=Bn(()=>D("div",{class:"title"},"Pool Address",-1)),du={class:"right"},gu={class:"pool-address"},pu={class:"coin-info"},vu={class:"symbol-and-name"},mu={class:"symbol"},wu={class:"name"},Mu={class:"right"},yu={class:"coin-info"},_u={class:"symbol-and-name"},bu={class:"symbol"},Au={class:"name"},Su={class:"right"};function Cu(t,e,r,i,s,l){const a=vr("CoinImg"),c=vr("CopyBtn"),p=vr("ExplorerLink"),v=vr("Modal");return bt(),Or(v,{class:"swap-route-modal",title:"Route",width:"880px",visible:!0,footer:null,onCancel:e[0]||(e[0]=y=>t.$emit("onClose"))},{closeIcon:tr(()=>[Vl]),default:tr(()=>{var y,b,A,C,q,j;return[D("div",Zl,[D("div",$l,[t.routeNum===1?(bt(),zt("span",Kl,Gt(t.onlyOneRouteText),1)):(bt(),zt("span",zl,Gt(t.routeNum)+" Steams",1)),D("div",Xl,[(bt(!0),zt(rr,null,nr(t.providerList,P=>(bt(),Or(a,{key:P,url:P},null,8,["url"]))),128))]),Yl]),D("div",Jl,[D("div",Hl,[_t(a,{url:(y=t.fromCoin)==null?void 0:y.logo_url},null,8,["url"]),D("span",Gl,Gt(("addCommom"in t?t.addCommom:er(fn))(t.fromCoinAmount)),1),D("span",Ql,Gt((b=t.fromCoin)==null?void 0:b.symbol),1)]),D("div",tu,[D("span",eu,Gt(("addCommom"in t?t.addCommom:er(fn))(t.toCoinAmount)),1),D("span",ru,Gt((A=t.toCoin)==null?void 0:A.symbol),1),_t(a,{url:(C=t.toCoin)==null?void 0:C.logo_url},null,8,["url"])])]),D("div",{class:Kn(t.isSingleRoute?"router-content is-single":"router-content")},[D("div",nu,[_t(a,{url:(q=t.fromCoin)==null?void 0:q.logo_url},null,8,["url"])]),D("div",iu,[_t(a,{url:(j=t.toCoin)==null?void 0:j.logo_url},null,8,["url"])]),D("div",su,[(bt(!0),zt(rr,null,nr(t.routerList,(P,G)=>{var L,F;return bt(),zt("div",{key:`route-${G}`,class:"router"},[D("div",ou,Gt((F=(L=t.proportionObj)==null?void 0:L[G])==null?void 0:F.value)+"%",1),D("div",au,[(bt(!0),zt(rr,null,nr(P.path,(k,et)=>{var W,E,S,I,B,J,U,x,w,n,u,d;return bt(),zt("div",{key:`route-pool-${et}`,class:"pool-item"},[D("div",lu,[_t(a,{url:t.routerTokenMap&&((W=t.routerTokenMap[k.from])==null?void 0:W.coinImg)},null,8,["url"]),_t(a,{url:t.routerTokenMap&&((E=t.routerTokenMap[k.to])==null?void 0:E.coinImg)},null,8,["url"])]),D("span",uu,Gt(k==null?void 0:k.provider),1),k!=null&&k.displayFeeOrVersion?(bt(),zt("span",cu,Gt(k==null?void 0:k.displayFeeOrVersion),1)):yr("",!0),t.routerTokenMap&&t.routerTokenMap[k.from]&&t.routerTokenMap&&t.routerTokenMap[k.to]?(bt(),zt("div",{key:1,class:Kn((k==null?void 0:k.provider)==="FlowX V2"?"pool-detail-box no-pool":"pool-detail-box")},[(k==null?void 0:k.provider)!=="FlowX V2"?(bt(),zt("div",hu,[fu,D("div",du,[D("span",gu,Gt(("addressAbridge"in t?t.addressAbridge:er(vi))(k==null?void 0:k.poolAddress)),1),_t(c,{text:k==null?void 0:k.poolAddress},null,8,["text"]),_t(p,{type:"poolAddress",value:k==null?void 0:k.poolAddress},null,8,["value"])])])):yr("",!0),D("div",pu,[_t(a,{url:t.routerTokenMap&&((S=t.routerTokenMap[k.from])==null?void 0:S.coinImg)},null,8,["url"]),D("div",vu,[D("div",mu,Gt(t.routerTokenMap&&((I=t.routerTokenMap[k.from])==null?void 0:I.symbol)),1),D("div",wu,Gt(t.routerTokenMap&&((B=t.routerTokenMap[k.from])==null?void 0:B.name)),1)]),D("div",Mu,[_t(c,{text:t.routerTokenMap&&((J=t.routerTokenMap[k.from])==null?void 0:J.address)},null,8,["text"]),_t(p,{type:"coin",value:t.routerTokenMap&&((U=t.routerTokenMap[k.from])==null?void 0:U.address)},null,8,["value"])])]),D("div",yu,[_t(a,{url:t.routerTokenMap&&((x=t.routerTokenMap[k.to])==null?void 0:x.coinImg)},null,8,["url"]),D("div",_u,[D("div",bu,Gt(t.routerTokenMap&&((w=t.routerTokenMap[k.to])==null?void 0:w.symbol)),1),D("div",Au,Gt(t.routerTokenMap&&((n=t.routerTokenMap[k.to])==null?void 0:n.name)),1)]),D("div",Su,[_t(c,{text:t.routerTokenMap&&((u=t.routerTokenMap[k.to])==null?void 0:u.address)},null,8,["text"]),_t(p,{type:"coin",value:t.routerTokenMap&&((d=t.routerTokenMap[k.to])==null?void 0:d.address)},null,8,["value"])])])],2)):yr("",!0)])}),128))])])}),128))])],2)])]}),_:1})}const xu=qr(Wl,[["render",Cu],["__scopeId","data-v-8707364a"]]);var Nn={};(function t(e,r,i,s){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!e.OffscreenCanvas)return!1;var f=new OffscreenCanvas(1,1),h=f.getContext("2d");h.fillRect(0,0,1,1);var g=f.transferToImageBitmap();try{h.createPattern(g,"no-repeat")}catch{return!1}return!0}();function p(){}function v(f){var h=r.exports.Promise,g=h!==void 0?h:e.Promise;return typeof g=="function"?new g(f):(f(p,p),null)}var y=function(f,h){return{transform:function(g){if(f)return g;if(h.has(g))return h.get(g);var o=new OffscreenCanvas(g.width,g.height),m=o.getContext("2d");return m.drawImage(g,0,0),h.set(g,o),o},clear:function(){h.clear()}}}(c,new Map),b=function(){var f=Math.floor(16.666666666666668),h,g,o={},m=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(N){var R=Math.random();return o[R]=requestAnimationFrame(function T(Z){m===Z||m+f-1<Z?(m=Z,delete o[R],N()):o[R]=requestAnimationFrame(T)}),R},g=function(N){o[N]&&cancelAnimationFrame(o[N])}):(h=function(N){return setTimeout(N,f)},g=function(N){return clearTimeout(N)}),{frame:h,cancel:g}}(),A=function(){var f,h,g={};function o(m){function N(R,T){m.postMessage({options:R||{},callback:T})}m.init=function(T){var Z=T.transferControlToOffscreen();m.postMessage({canvas:Z},[Z])},m.fire=function(T,Z,K){if(h)return N(T,null),h;var H=Math.random().toString(36).slice(2);return h=v(function(lt){function Q(rt){rt.data.callback===H&&(delete g[H],m.removeEventListener("message",Q),h=null,y.clear(),K(),lt())}m.addEventListener("message",Q),N(T,H),g[H]=Q.bind(null,{data:{callback:H}})}),h},m.reset=function(){m.postMessage({reset:!0});for(var T in g)g[T](),delete g[T]}}return function(){if(f)return f;if(!i&&l){var m=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{f=new Worker(URL.createObjectURL(new Blob([m])))}catch(N){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",N),null}o(f)}return f}}(),C={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function q(f,h){return h?h(f):f}function j(f){return f!=null}function P(f,h,g){return q(f&&j(f[h])?f[h]:C[h],g)}function G(f){return f<0?0:Math.floor(f)}function L(f,h){return Math.floor(Math.random()*(h-f))+f}function F(f){return parseInt(f,16)}function k(f){return f.map(et)}function et(f){var h=String(f).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:F(h.substring(0,2)),g:F(h.substring(2,4)),b:F(h.substring(4,6))}}function W(f){var h=P(f,"origin",Object);return h.x=P(h,"x",Number),h.y=P(h,"y",Number),h}function E(f){f.width=document.documentElement.clientWidth,f.height=document.documentElement.clientHeight}function S(f){var h=f.getBoundingClientRect();f.width=h.width,f.height=h.height}function I(f){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=f,h}function B(f,h,g,o,m,N,R,T,Z){f.save(),f.translate(h,g),f.rotate(N),f.scale(o,m),f.arc(0,0,1,R,T,Z),f.restore()}function J(f){var h=f.angle*(Math.PI/180),g=f.spread*(Math.PI/180);return{x:f.x,y:f.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:f.startVelocity*.5+Math.random()*f.startVelocity,angle2D:-h+(.5*g-Math.random()*g),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:f.color,shape:f.shape,tick:0,totalTicks:f.ticks,decay:f.decay,drift:f.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:f.gravity*3,ovalScalar:.6,scalar:f.scalar,flat:f.flat}}function U(f,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var g=h.tick++/h.totalTicks,o=h.x+h.random*h.tiltCos,m=h.y+h.random*h.tiltSin,N=h.wobbleX+h.random*h.tiltCos,R=h.wobbleY+h.random*h.tiltSin;if(f.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-g)+")",f.beginPath(),a&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))f.fill(d(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(N-o)*.1,Math.abs(R-m)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var T=Math.PI/10*h.wobble,Z=Math.abs(N-o)*.1,K=Math.abs(R-m)*.1,H=h.shape.bitmap.width*h.scalar,lt=h.shape.bitmap.height*h.scalar,Q=new DOMMatrix([Math.cos(T)*Z,Math.sin(T)*Z,-Math.sin(T)*K,Math.cos(T)*K,h.x,h.y]);Q.multiplySelf(new DOMMatrix(h.shape.matrix));var rt=f.createPattern(y.transform(h.shape.bitmap),"no-repeat");rt.setTransform(Q),f.globalAlpha=1-g,f.fillStyle=rt,f.fillRect(h.x-H/2,h.y-lt/2,H,lt),f.globalAlpha=1}else if(h.shape==="circle")f.ellipse?f.ellipse(h.x,h.y,Math.abs(N-o)*h.ovalScalar,Math.abs(R-m)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):B(f,h.x,h.y,Math.abs(N-o)*h.ovalScalar,Math.abs(R-m)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var nt=Math.PI/2*3,it=4*h.scalar,st=8*h.scalar,Xt=h.x,ot=h.y,ut=5,Ht=Math.PI/ut;ut--;)Xt=h.x+Math.cos(nt)*st,ot=h.y+Math.sin(nt)*st,f.lineTo(Xt,ot),nt+=Ht,Xt=h.x+Math.cos(nt)*it,ot=h.y+Math.sin(nt)*it,f.lineTo(Xt,ot),nt+=Ht;else f.moveTo(Math.floor(h.x),Math.floor(h.y)),f.lineTo(Math.floor(h.wobbleX),Math.floor(m)),f.lineTo(Math.floor(N),Math.floor(R)),f.lineTo(Math.floor(o),Math.floor(h.wobbleY));return f.closePath(),f.fill(),h.tick<h.totalTicks}function x(f,h,g,o,m){var N=h.slice(),R=f.getContext("2d"),T,Z,K=v(function(H){function lt(){T=Z=null,R.clearRect(0,0,o.width,o.height),y.clear(),m(),H()}function Q(){i&&!(o.width===s.width&&o.height===s.height)&&(o.width=f.width=s.width,o.height=f.height=s.height),!o.width&&!o.height&&(g(f),o.width=f.width,o.height=f.height),R.clearRect(0,0,o.width,o.height),N=N.filter(function(rt){return U(R,rt)}),N.length?T=b.frame(Q):lt()}T=b.frame(Q),Z=lt});return{addFettis:function(H){return N=N.concat(H),K},canvas:f,promise:K,reset:function(){T&&b.cancel(T),Z&&Z()}}}function w(f,h){var g=!f,o=!!P(h||{},"resize"),m=!1,N=P(h,"disableForReducedMotion",Boolean),R=l&&!!P(h||{},"useWorker"),T=R?A():null,Z=g?E:S,K=f&&T?!!f.__confetti_initialized:!1,H=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,lt;function Q(nt,it,st){for(var Xt=P(nt,"particleCount",G),ot=P(nt,"angle",Number),ut=P(nt,"spread",Number),Ht=P(nt,"startVelocity",Number),vt=P(nt,"decay",Number),mt=P(nt,"gravity",Number),Oe=P(nt,"drift",Number),gt=P(nt,"colors",k),wt=P(nt,"ticks",Number),ve=P(nt,"shapes"),ht=P(nt,"scalar"),at=!!P(nt,"flat"),ft=W(nt),z=Xt,ct=[],Ee=f.width*ft.x,X=f.height*ft.y;z--;)ct.push(J({x:Ee,y:X,angle:ot,spread:ut,startVelocity:Ht,color:gt[z%gt.length],shape:ve[L(0,ve.length)],ticks:wt,decay:vt,gravity:mt,drift:Oe,scalar:ht,flat:at}));return lt?lt.addFettis(ct):(lt=x(f,ct,Z,it,st),lt.promise)}function rt(nt){var it=N||P(nt,"disableForReducedMotion",Boolean),st=P(nt,"zIndex",Number);if(it&&H)return v(function(Ht){Ht()});g&&lt?f=lt.canvas:g&&!f&&(f=I(st),document.body.appendChild(f)),o&&!K&&Z(f);var Xt={width:f.width,height:f.height};T&&!K&&T.init(f),K=!0,T&&(f.__confetti_initialized=!0);function ot(){if(T){var Ht={getBoundingClientRect:function(){if(!g)return f.getBoundingClientRect()}};Z(Ht),T.postMessage({resize:{width:Ht.width,height:Ht.height}});return}Xt.width=Xt.height=null}function ut(){lt=null,o&&(m=!1,e.removeEventListener("resize",ot)),g&&f&&(document.body.contains(f)&&document.body.removeChild(f),f=null,K=!1)}return o&&!m&&(m=!0,e.addEventListener("resize",ot,!1)),T?T.fire(nt,Xt,ut):Q(nt,Xt,ut)}return rt.reset=function(){T&&T.reset(),lt&&lt.reset()},rt}var n;function u(){return n||(n=w(null,{useWorker:!0,resize:!0})),n}function d(f,h,g,o,m,N,R){var T=new Path2D(f),Z=new Path2D;Z.addPath(T,new DOMMatrix(h));var K=new Path2D;return K.addPath(Z,new DOMMatrix([Math.cos(R)*m,Math.sin(R)*m,-Math.sin(R)*N,Math.cos(R)*N,g,o])),K}function M(f){if(!a)throw new Error("path confetti are not supported in this browser");var h,g;typeof f=="string"?h=f:(h=f.path,g=f.matrix);var o=new Path2D(h),m=document.createElement("canvas"),N=m.getContext("2d");if(!g){for(var R=1e3,T=R,Z=R,K=0,H=0,lt,Q,rt=0;rt<R;rt+=2)for(var nt=0;nt<R;nt+=2)N.isPointInPath(o,rt,nt,"nonzero")&&(T=Math.min(T,rt),Z=Math.min(Z,nt),K=Math.max(K,rt),H=Math.max(H,nt));lt=K-T,Q=H-Z;var it=10,st=Math.min(it/lt,it/Q);g=[st,0,0,st,-Math.round(lt/2+T)*st,-Math.round(Q/2+Z)*st]}return{type:"path",path:h,matrix:g}}function _(f){var h,g=1,o="#000000",m='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof f=="string"?h=f:(h=f.text,g="scalar"in f?f.scalar:g,m="fontFamily"in f?f.fontFamily:m,o="color"in f?f.color:o);var N=10*g,R=""+N+"px "+m,T=new OffscreenCanvas(N,N),Z=T.getContext("2d");Z.font=R;var K=Z.measureText(h),H=Math.ceil(K.actualBoundingBoxRight+K.actualBoundingBoxLeft),lt=Math.ceil(K.actualBoundingBoxAscent+K.actualBoundingBoxDescent),Q=2,rt=K.actualBoundingBoxLeft+Q,nt=K.actualBoundingBoxAscent+Q;H+=Q+Q,lt+=Q+Q,T=new OffscreenCanvas(H,lt),Z=T.getContext("2d"),Z.font=R,Z.fillStyle=o,Z.fillText(h,rt,nt);var it=1/g;return{type:"bitmap",bitmap:T.transferToImageBitmap(),matrix:[it,0,0,it,-H*it/2,-lt*it/2]}}r.exports=function(){return u().apply(this,arguments)},r.exports.reset=function(){u().reset()},r.exports.create=w,r.exports.shapeFromPath=M,r.exports.shapeFromText=_})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Nn,!1);const Wu=Nn.exports;Nn.exports.create;export{Uu as A,xu as R,Fu as _,ju as a,qu as b,Wu as c,Du as d,Lu as g,za as u};
