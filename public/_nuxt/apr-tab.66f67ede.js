import{a as Pe,u as be,k as oe,e as C,c as le,s as ve}from"./pool.9fdab3ba.js";import{a as _e,b as fe,r as h,m as re,y as ye,D as ae,a7 as we,e as Le,o as l,f as p,h as s,z as P,j as N,i as se,w as f,v as n,x as J,F as te,s as ie,H as ne,u as y,t as pe,G as ce,L as je,p as Oe,k as Ae}from"./entry.1a05a197.js";/* empty css              */import"./index.e0142ca4.js";import{u as Te}from"./index.85befd38.js";const Ne=_e({props:{aprRewardsDateList:{type:Array,default:()=>[]},aprRewardsParameter:{type:Number,default:30},aprTitle:{type:String,default:""},nameTab:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""}},setup(e,de){fe();const E=h(0),M=h(0),D=h(0),S=h(0),m=h(1e4),H=h("echartsBox"+Date.now()+Math.random()),K=Te(),d=re(()=>K),Q=re(()=>d.value.chainName?Pe(d.value.chainName):{}),v=h(!1),g=h({});ye(()=>{document.body.clientWidth<750?v.value=!1:v.value=!0,window.onresize=()=>{document.body.clientWidth<750?v.value=!1:v.value=!0,setTimeout(()=>{F()},500)}}),console.log(e,"props===>"),ae(()=>g.value,(r,t)=>{le(r)||(E.value=r==null?void 0:r.aprFee,M.value=r!=null&&r.rewardAprList[0].rewarder_display?r==null?void 0:r.rewardAprList[0].rewarder_apr:0,D.value=r!=null&&r.rewardAprList[1].rewarder_display?r==null?void 0:r.rewardAprList[1].rewarder_apr:0,S.value=r!=null&&r.rewardAprList[2].rewarder_display?r==null?void 0:r.rewardAprList[2].rewarder_apr:0,(r==null?void 0:r.aprPercentageTotal)==0||isNaN(r==null?void 0:r.aprPercentageTotal)||(r==null?void 0:r.aprPercentageTotal)==1/0?m.value=1e9:m.value=0,!r.is_display_rewarder&&E.value==0&&(m.value=1e9),r.is_display_rewarder||(M.value=0,D.value=0,S.value=0),setTimeout(()=>{F()},500))},{immediate:!0,deep:!0});const F=()=>{const r=document.getElementById(H.value);if(!r)return;const t=we(r);let c={tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow",axis:"auto",snap:!0},renderMode:"html",backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderWidth:0,padding:5,textStyle:{color:"#fff",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:14},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",confine:!1,formatter:function(o){return o[0].name+"的分数是:"+o[0].data}},title:{text:"",left:"center",top:"center"},series:[{type:"pie",silent:!0,data:[{value:E.value,name:"A"},{value:M.value,name:"B"},{value:D.value,name:"C"},{value:S.value,name:"D"},{value:m.value,name:"E"}],labelLine:{show:!1},itemStyle:{normal:{color:function(o){var u=d.value.theme=="default"?["#9EFFC3","#9E65FF","#6C65FF","#D3E97C","#8D8D8D"]:["#65C8FF","#9E65FF","#6C65FF","#D3E97C","#D3E97C"];return u[o.dataIndex]}}},radius:["74%","100%"]}]};c&&t.setOption(c,!0)},X=re(()=>{var t;let r=0;return g.value&&g.value.rewardAprList&&((t=g.value)==null?void 0:t.rewardAprList).forEach(o=>{o!=null&&o.rewarder_display&&r++}),r}),Z=be(),w=re(()=>Z),W=async r=>{var U,q,Y;console.log("0607###detail###getAprMethod###poolInfo###",r),console.log("0607###detail###getAprMethod###props.fromCoin###",e.fromCoin),console.log("0607###detail###getAprMethod###props.toCoin###",e.toCoin);let t;r.needReverse?t=!1:t=!0,console.log("0607###detail###getAprMethod###directs###",t);const c=t?Number(e.minPrice):e.maxPrice=="∞"?1/2**50:1/Number(e.maxPrice),o=isNaN(Number(e.maxPrice))||e.maxPrice=="∞"?2**50:t?Number(e.maxPrice):1/Number(e.minPrice);console.log("0607###detail###getAprMethod###lowerUserPrice###",c),console.log("0607###detail###getAprMethod###upperUserPrice###",o);let u=[];console.log(d.value.addressHistTokens,"===>index.value.addressHistTokens"),u=d.value&&d.value.addressHistTokens&&d.value.addressHistTokens[r.poolAddress]&&d.value.addressHistTokens[r.poolAddress].data&&d.value.addressHistTokens[r.poolAddress].data.length>0&&Object.fromEntries(d.value.addressHistTokens[r.poolAddress].data.map(A=>[A.key,A.value])),console.log(e.aprRewardsParameter,"=====>>>>>>>>>>aprRewardsParameteraprRewardsParameteraprRewardsParameter");const B=Number(Number(e.aprRewardsParameter==7?u.before_7_d_contract_price_lowest:e.aprRewardsParameter==24?u.before_24_h_contract_price_lowest:u.before_30_d_contract_price_lowest)),$=Number(Number(e.aprRewardsParameter==7?u.before_7_d_contract_price_highest:e.aprRewardsParameter==24?u.before_24_h_contract_price_highest:u.before_30_d_contract_price_highest)),k=w.value.tokensObj;console.log("getEstPositionAPRWithMulti###params###lowerUserPrice###",c),console.log("getEstPositionAPRWithMulti###params###upperUserPrice###",o),console.log("getEstPositionAPRWithMulti###params###lowerHistPrice###",B),console.log("getEstPositionAPRWithMulti###params###upperHistPrice###",$);const z=await Q.value.getEstPositionAPRWithMulti(c,o,B,$);console.log("getEstPositionAPRWithMulti###resMulti###",z.toString());const j=Number(z.toString()),i=d.value.newTopPoolsObj[r.poolAddress];let O;if(i){e.aprRewardsParameter==7?O=i.apr_7day?Number(i.apr_7day.substring(0,i.apr_7day.length-1)):0:e.aprRewardsParameter==24?O=i.apr_24h?Number(i.apr_24h.substring(0,i.apr_24h.length-1)):0:O=i.apr_30day?Number(i.apr_30day.substring(0,i.apr_30day.length-1)):0;const A=i.rewarder_apr[0]?Number(i.rewarder_apr[0].substring(0,i.rewarder_apr[0].length-1)):0,V=i.rewarder_apr[1]?Number(i.rewarder_apr[1].substring(0,i.rewarder_apr[1].length-1)):0,ee=i.rewarder_apr[2]?Number(i.rewarder_apr[2].substring(0,i.rewarder_apr[2].length-1)):0,_=Number(j*O),T=Number(j*A),a=Number(j*V),R=Number(j*ee),G=_+(r.rewarder_display1?T:0)+(r.rewarder_display2?a:0)+(r.rewarder_display3?R:0),ue=r.rewarder_infos[0]?(U=k[r.rewarder_infos[0].coinAddress])==null?void 0:U.symbol:"--",ge=r.rewarder_infos[1]?(q=k[r.rewarder_infos[1].coinAddress])==null?void 0:q.symbol:"--",me=r.rewarder_infos[2]?(Y=k[r.rewarder_infos[2].coinAddress])==null?void 0:Y.symbol:"--",he={aprFee:_==1/0||isNaN(_)?0:_,rewardAprList:[{rewarder_name:ue,rewarder_apr:T==1/0||isNaN(T)?0:T,styleName:"one",rewarder_display:r.rewarder_display1},{rewarder_name:ge,rewarder_apr:a==1/0||isNaN(a)?0:a,styleName:"two",rewarder_display:r.rewarder_display2},{rewarder_name:me,rewarder_apr:R==1/0||isNaN(R)?0:R,styleName:"three",rewarder_display:r.rewarder_display2}],aprPercentageTotal:G==1/0||isNaN(G)||G===0?0:G,aprPercentage:oe(_/G,2),is_display_rewarder:r.is_display_rewarder};g.value=he,console.log(g.value,"===>aprPercentageObj.value")}};ae(()=>[e.aprRewardsParameter],()=>{e.nameTab=="position"&&W(e.poolInfo)});const L=h("--"),I=(r,t)=>{r!=="0"&&t!=="∞"?L.value=ve(1/(1-Number((r/t)**.25)),2)+"x":L.value=1};ae(()=>[e.poolInfo,e.minPrice,e.maxPrice,d.value.addressHistTokens],([r,t,c,o])=>{r&&!le(r)&&o&&W(r),t&&c&&I(t,c)},{immediate:!0});const x=(r,t)=>{de.emit("aprTab",r)};return ae(()=>w.value.currentPositionLoading,r=>{w.value.currentPositionLoading&&(g.value={},L.value="--")},{immediate:!0}),{pools:w,initialize:F,aprOne:E,aprTwo:M,aprThree:D,aprFour:S,echartsBox:H,aprPercentageObjList:g,rewardLength:X,fixD:oe,addCommom:C,aprTab:x,lever:L,isPc:v}}});const b=e=>(Oe("data-v-ede37dff"),e=e(),Ae(),e),Ce={key:0,class:"apr-lever"},Fe={class:"top"},ke={key:0,class:"left"},Re=b(()=>s("span",null,"The concentration degree of your liquidity compared with allocating liquidity to full range like a constant product AMM pool. You would enjoy multiplied capital efficiency but with higher impermanent loss possibility accordingly.",-1)),Ee=b(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),Me={class:"lever-text"},De={class:"right"},Se={class:"top"},He={class:"apr-rewards"},We=b(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),Be={class:"apr-tab"},$e=["onClick"],ze={class:"tottom"},Ue={class:"fees-all"},qe={key:0,class:"right-box"},Ye=["id"],Ge=b(()=>s("div",{class:"ratio-bg"},null,-1)),Je={class:"progress-fees progress-all"},Ke=b(()=>s("div",{class:"light-hint"},null,-1)),Qe={key:1,class:"apr-lever-h5"},Xe={key:0,class:"top"},Ze={class:"leverage"},Ie={class:"leverage-title"},xe=b(()=>s("span",null,"The concentration degree of your liquidity compared with allocating liquidity to full range like a constant product AMM pool. You would enjoy multiplied capital efficiency but with higher impermanent loss possibility accordingly.",-1)),Ve=b(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),er={class:"leverage-text"},rr={class:"left"},ar=b(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),sr={class:"apr-tab"},tr=["onClick"],ir={class:"right"},or={key:0,class:"right-box"},nr=["id"],dr=b(()=>s("div",{class:"ratio-bg"},null,-1)),lr={class:"fees-all"},pr={class:"hover-fees-all"};function cr(e,de,E,M,D,S){var H,K,d,Q,v,g,F,X,Z,w,W,L,I,x,r,t,c,o,u,B,$,k,z,j,i,O,U,q,Y,A,V,ee,_,T;const m=je;return e.isPc?(l(),p("div",Ce,[s("div",Fe,[e.minPrice!=="0"&&e.maxPrice!=="∞"?(l(),p("div",ke,[s("div",{class:P(["lever-title apr-title",e.nameTab])},[N(" Leverage "),se(m,{placement:"bottom","arrow-point-at-center":""},{title:f(()=>[Re]),default:f(()=>[Ee]),_:1})],2),s("div",Me,n(e.lever),1)])):J("",!0),s("div",De,[s("div",Se,[s("div",He,[s("div",{class:P(["apr-title",e.nameTab])},[N(n(e.aprTitle)+" ",1),se(m,{placement:"bottom","arrow-point-at-center":""},{title:f(()=>[s("span",null," Estimated according to trading activity and farming bonus in the past "+n(e.aprRewardsParameter==7?"7 days":e.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:f(()=>[We]),_:1})],2),s("div",Be,[(l(!0),p(te,null,ie(e.aprRewardsDateList,a=>(l(),p("div",{key:a,class:P(["apr-item",{"apr-item-active":a.num===e.aprRewardsParameter}]),onClick:R=>e.aprTab(a)},n(a.time),11,$e))),128))])])]),s("div",ze,[s("div",{class:"lever-and-apr",style:ne({justifyContent:e.minPrice!=="0"&&e.maxPrice!=="∞"?"flex-start":"center"})},[s("div",{class:P(["trade-fees",e.rewardLength>0&&e.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[s("div",Ue,[s("span",null,n(e.pools.currentPositionLoading?"--":e.aprPercentageObjList.is_display_rewarder?(H=e.aprPercentageObjList)!=null&&H.aprPercentageTotal?((K=e.aprPercentageObjList)==null?void 0:K.aprPercentageTotal)>1e4?">10,000":((d=e.aprPercentageObjList)==null?void 0:d.aprPercentageTotal)<.01&&((Q=e.aprPercentageObjList)==null?void 0:Q.aprPercentageTotal)>0?"<0.01":("fixD"in e?e.fixD:y(oe))((v=e.aprPercentageObjList)==null?void 0:v.aprPercentageTotal,2):(g=e.aprPercentageObjList)!=null&&g.rewardAprList?"0":"--":(F=e.aprPercentageObjList)!=null&&F.aprFee?((X=e.aprPercentageObjList)==null?void 0:X.aprFee)>1e4?">10,000":((Z=e.aprPercentageObjList)==null?void 0:Z.aprFee)<.01&&((w=e.aprPercentageObjList)==null?void 0:w.aprFee)>0?"<0.01":("addCommom"in e?e.addCommom:y(C))((W=e.aprPercentageObjList)==null?void 0:W.aprFee,2):(L=e.aprPercentageObjList)!=null&&L.rewardAprList?"0":"--")+"% ",1),e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(l(),p("div",qe,[s("div",{id:e.echartsBox,class:"right"},null,8,Ye),Ge])):J("",!0)]),e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(l(),p("div",{key:0,class:P(["percentage-fee",e.nameTab])},[s("div",{class:"progress-all-in",style:ne({height:e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?"auto":"25px",lineHeight:e.$route.name=="position-detail"?"25px":""})},[s("div",Je,[Ke,N(" Fees  "+n(e.pools.currentPositionLoading?"--":(I=e.aprPercentageObjList)!=null&&I.aprFee?((x=e.aprPercentageObjList)==null?void 0:x.aprFee)>1e4?">10,000":((r=e.aprPercentageObjList)==null?void 0:r.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:y(C))((t=e.aprPercentageObjList)==null?void 0:t.aprFee,2):(c=e.aprPercentageObjList)!=null&&c.rewardAprList?"<0.01":"--")+"% ",1)]),(l(!0),p(te,null,ie((o=e.aprPercentageObjList)==null?void 0:o.rewardAprList,a=>pe((l(),p("div",{key:a,class:"progress-rewards progress-all"},[s("div",{class:P(["light-hint",a==null?void 0:a.styleName])},null,2),N(" "+n(a==null?void 0:a.rewarder_name)+" Bonus  "+n(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":("addCommom"in e?e.addCommom:y(C))(a==null?void 0:a.rewarder_apr,2):"0")+"% ",1)])),[[ce,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&e.aprPercentageObjList.is_display_rewarder&&!e.pools.currentPositionLoading]])),128))],4)],2)):J("",!0)],2)],4)])])])])):(l(),p("div",Qe,[e.minPrice!=="0"&&e.maxPrice!=="∞"?(l(),p("div",Xe,[s("div",Ze,[s("div",Ie,[N(" Leverage "),se(m,{placement:"bottom","arrow-point-at-center":""},{title:f(()=>[xe]),default:f(()=>[Ve]),_:1})]),s("div",er,n(e.lever),1)])])):J("",!0),s("div",{class:"bottom",style:ne(e.minPrice!=="0"&&e.maxPrice!=="∞"?{}:{border:"none"})},[s("div",rr,[s("div",{class:P(["apr-title",e.nameTab])},[N(n(e.aprTitle)+" ",1),se(m,{placement:"bottom","arrow-point-at-center":""},{title:f(()=>[s("span",null," Estimated according to trading activity and farming bonus in the past "+n(e.aprRewardsParameter==7?"7 days":e.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:f(()=>[ar]),_:1})],2),s("div",sr,[(l(!0),p(te,null,ie(e.aprRewardsDateList,a=>(l(),p("div",{key:a,class:P(["apr-item",{"apr-item-active":a.num===e.aprRewardsParameter}]),onClick:R=>e.aprTab(a)},n(a.time),11,tr))),128))])]),s("div",ir,[e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(l(),p("div",or,[s("div",{id:e.echartsBox,class:"right"},null,8,nr),dr])):J("",!0),s("div",{class:P(["trade-fees",e.rewardLength>0&&e.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[s("div",lr,[s("span",null,n(e.pools.currentPositionLoading?"--":e.aprPercentageObjList.is_display_rewarder?(u=e.aprPercentageObjList)!=null&&u.aprPercentageTotal?((B=e.aprPercentageObjList)==null?void 0:B.aprPercentageTotal)>1e4?">10,000":(($=e.aprPercentageObjList)==null?void 0:$.aprPercentageTotal)<.01?"<0.01":("fixD"in e?e.fixD:y(oe))((k=e.aprPercentageObjList)==null?void 0:k.aprPercentageTotal,2):(z=e.aprPercentageObjList)!=null&&z.rewardAprList?"0":"--":(j=e.aprPercentageObjList)!=null&&j.aprFee?((i=e.aprPercentageObjList)==null?void 0:i.aprFee)>1e4?">10,000":((O=e.aprPercentageObjList)==null?void 0:O.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:y(C))((U=e.aprPercentageObjList)==null?void 0:U.aprFee,2):(q=e.aprPercentageObjList)!=null&&q.rewardAprList?"0":"--")+"% ",1),s("div",pr,[N(" Fees  :  "),s("span",null,n(e.pools.currentPositionLoading?"--":(Y=e.aprPercentageObjList)!=null&&Y.aprFee?((A=e.aprPercentageObjList)==null?void 0:A.aprFee)>1e4?">10,000":((V=e.aprPercentageObjList)==null?void 0:V.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:y(C))((ee=e.aprPercentageObjList)==null?void 0:ee.aprFee,2):(_=e.aprPercentageObjList)!=null&&_.rewardAprList?"0":"--")+"% ",1),(l(!0),p(te,null,ie((T=e.aprPercentageObjList)==null?void 0:T.rewardAprList,a=>pe((l(),p("div",{key:a},n(a==null?void 0:a.rewarder_name)+" Bonus  :  "+n(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":("addCommom"in e?e.addCommom:y(C))(a==null?void 0:a.rewarder_apr,2):"<0.01")+"% ",1)),[[ce,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&e.aprPercentageObjList.is_display_rewarder&&!e.pools.currentPositionLoading]])),128))])])],2)])],4)]))}const br=Le(Ne,[["render",cr],["__scopeId","data-v-ede37dff"]]);export{br as _};
