import{a as D,F as L,z as N,w as U,N as q,v as I,R as d,fz as h,fA as R,b as v,o as B,e as W,f as E,l,m as r,B as F,y as u}from"./entry.4fed29de.js";const G=D({setup(){const n=L(),t=N(),P=()=>{const e={coinTypeA:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37::coina::USDT",coinTypeB:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37::coinb::APT",poolType:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8::pool::Pool<0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37::coina::USDT,0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37::coinb::APT>",poolAddress:"0xa24877930240eaa62e6349fb8a68a6d9e818d4e3239f5c68889603dc1e034d39",collectionName:"Cetus CLMM Position/USDT-APT-10",tickSpacing:"10",positionIndex:"9",uri:"https://uswb6tcbq7bcuah4n5o3b4dyb77pizckgoowufytg5bwpjm2sv6a.arweave.net/pKwfTEGHwioA_G9dsPB4D_70ZEoznWoXEzdDZ6WalXw",coinAmountA:"89198",coinAmountB:"111065",current_sqrt_price:"18456853422185132018",current_tick_index:"10",fee_growth_global_a:"0",fee_growth_global_b:"0",fee_protocol_coin_a:"0",fee_protocol_coin_b:"11",fee_rate:"1000",liquidity:"20063259",tick_indexes_handle:"0x8bf0807ce135400d8efca2ea54577ff2439b9a25538b8c1a14b7c7db79c072e1",ticks_handle:"0x6f9dd06c94763751e333448930329b1d645a66fba8857260aca575a846987067"},o={name:"CLMM/USDT-APT-10-2",pool:"0xa24877930240eaa62e6349fb8a68a6d9e818d4e3239f5c68889603dc1e034d39",liquidity:"171",tick_lower_index:"0",tick_upper_index:"1200",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0"},a=e,s=o,c=new d(a.current_sqrt_price),f=Number(s.tick_lower_index),p=Number(s.tick_upper_index),w=new d(100),_=!0,g=.1,k=t.estLiquidityAndcoinAmountFromOneAmounts({tokenA:h[0],tokenB:h[1],lowerTick:f,upperTick:p,coinAmount:w,iscoinA:_,roundUp:!0,slippage:g,curSqrtPrice:c});console.log("1122###testPreAddLiquidity###test####",k)},m=async()=>{n.getMyPositons("0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",n.poolsObj);const e=await t.getPositionInfo("0xc788f781c7c1d84c23dfd9b17699725b3f7f3da048845ae5b489dd6d73b35c66","Cetus Position | USDT-USDC_tick(5)","Cetus LP | Pool4-24");console.log("1129###position info###test###",e)};U(()=>n.myPositions,e=>{console.log("1129###myPosition###newValue####",e)});const y=q(),b=I(()=>y);return{testPreAddLiquidity:P,testGetMyPosition:m,testSwap:async()=>{const e={...R[0],poolAddress:"0xc788f781c7c1d84c23dfd9b17699725b3f7f3da048845ae5b489dd6d73b35c66",poolType:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37::pool::Pool<0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT,0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC>"},o=await t.preSwap({pool:e,a2b:!0,byAmountIn:!0,amount:"1"});console.log("1128###swap###preSwapRes####",o),console.log("1128###swap##params###",{pool:e,a2b:!0,byAmountIn:!0,amount:"0.0001",slippage:.01});const a=await t.getSwapTransactionPayload({pool:e,a2b:!0,byAmountIn:!0,amount:"0.0001",slippage:.01});let s;try{s=await b.value.currentWallet.signAndSubmitTransaction(a)}catch(c){console.log("1128###add##error###",c)}if(s&&s.hash){const c={title:"success",desc:"",hash:s.hash,sender:b.value.address,chainName:"Aptos"};await t.watchTransaction(c)&&alert("swap\u6210\u529F")}console.log("1128###swapPayload###",a)},testAddLiquidity:async()=>{const e=await t.getAddLiquidityTransactionPayload({pool:{poolAddress:"0xc788f781c7c1d84c23dfd9b17699725b3f7f3da048845ae5b489dd6d73b35c66",token_a:{address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT",decimals:6},token_b:{address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC",decimals:6}},amount:"0.0001",fix_amount_a:!0,tick_lower:32185,tick_upper:32195,index:0,slippage:.05,roundUp:!0});let o;try{o=await b.value.currentWallet.signAndSubmitTransaction(e)}catch(a){console.log("1128###add##error###",a)}if(o&&o.hash){const a={title:"success",desc:"",hash:o.hash,sender:b.value.address,chainName:"Aptos"};await t.watchTransaction(a)&&alert("\u6DFB\u52A0\u6210\u529F")}console.log(o,"tx===>")},testGetPoolList:async()=>{const e=await t.getPools();console.log("1130####poolList###",e);const o=await t.getPool("0xcbbbd6dada56fd265d80bc51c70ad3d925613204179bedda3f3557724f251623");console.log("1130###poolInfo####",o)},testGetCollectFeesQuote:async()=>{const e="0xb023816f70d5f37e5910f9037e20d076400b4c706800d2c145566fa41d9b4b1a",o="Cetus LP | Pool1-4",a=await t.getPool(e),s=a.ticks_handle,c=await t.getPositionInfo(a,"Cetus Position | USDT-USDC_tick(2)",o);console.log("1227###ticksHandle####",s),console.log("1227###position.tick_lower_index####",c.tick_lower_index);const f=await t.getTickDataByIndex(s,c.tick_lower_index),p=await t.getTickDataByIndex(s,c.tick_upper_index);console.log("1227###tickLowerData####",f),console.log("1227###tickUpperData####",p);const w=await t.getCollectFeesQuote({pool:{...a,token_a:{decimals:6},token_b:{decimals:6}},position:c,tickLowerData:f,tickUpperData:p});console.log("1227###testGetCollectFeesQuote###result###",w)},getNft:async()=>{console.log("wallet.value.currentWallet####",b.value.currentWallet),console.log("wallet.value.currentWallet.account####",b.value.currentWallet.account);try{const e=await window.martian.getAccountResources();console.log("getNft###test###",e)}catch(e){console.log("err###",e)}},getNftHash:()=>{const e={creator:"0xb023816f70d5f37e5910f9037e20d076400b4c706800d2c145566fa41d9b4b1a",collection:"Cetus Position | USDT-USDC_tick(2)",name:"Cetus LP | Pool1-5"},o=t.getNftHash(e);console.log("1214###getNftHash####",o)},testPosRewarder:async()=>{const e="0x4e9878bfcbde1be91e605dc85ae4b8340a6359846fd9f73580d1ad3abea98fb0",o="Cetus LP | Pool2-9",a=await t.getPool(e),s=a.ticks_handle,c=await t.getPositionInfo(a,"Cetus Position | APT-USDC_tick(60)",o),f=await t.getTickDataByIndex(s,c.tick_lower_index),p=await t.getTickDataByIndex(s,c.tick_upper_index),w=await t.getPosRewardersAmount({poolAddress:e,positionName:o,tickLowerData:f,tickUpperData:p});console.log("1227###testPosRewarder####test###",w)},getTokenList:async()=>{const e=await t.getTokenList();console.log("res###",e)},testEstPositionAPRWithDeltaMethod:async()=>{const e=await t.getPool("0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161"),o="Cetus LP | Pool1-3",a=await t.getPositionInfo(e,"Cetus Position | APT-USDC_tick(60)",o),s=e.current_tick_index;console.log(a,"===>position");const c=Number(a.tick_lower_index),f=Number(a.tick_upper_index),p=new d(e.current_sqrt_price),w=new d(e.liquidity),_=new d(e.fee_rate),g=new d(1e5),k=new d(5e5),C=new d(1);console.log(e,"===> pool.rewarder_info");const T=e.rewarder_infos[0]&&new d(e.rewarder_infos[0].emissionsEveryDay),A=e.rewarder_infos[1]&&new d(e.rewarder_infos[1].emissionsEveryDay),x=e.rewarder_infos[2]&&new d(e.rewarder_infos[2].emissionsEveryDay);console.log("1130###poolInfo####",e),console.log(c,"===>lowerTickIndex"),console.log(f,"===>upperTickIndex");const S=await t.getEstPositionAPRWithDelta(s,c,f,p,w,_,g,k,C,T,A,x);console.log(S,"=====res")}}}});function M(n,t,P,m,y,b){const i=F;return B(),W("div",null,[E("div",null,[l(i,{onClick:n.testPreAddLiquidity},{default:r(()=>[u("test pre add liquidity")]),_:1},8,["onClick"]),l(i,{onClick:n.testGetMyPosition},{default:r(()=>[u("get my position")]),_:1},8,["onClick"]),l(i,{onClick:n.testSwap},{default:r(()=>[u("test swap")]),_:1},8,["onClick"]),l(i,{onClick:n.testAddLiquidity},{default:r(()=>[u("test add")]),_:1},8,["onClick"]),l(i,{onClick:n.testGetPoolList},{default:r(()=>[u("get pool list")]),_:1},8,["onClick"]),l(i,{onClick:n.getNft},{default:r(()=>[u("get NFT")]),_:1},8,["onClick"]),l(i,{onClick:n.getNftHash},{default:r(()=>[u("get NFT hash")]),_:1},8,["onClick"]),l(i,{onClick:n.getTokenList},{default:r(()=>[u("get token list")]),_:1},8,["onClick"]),l(i,{onClick:n.testPosRewarder},{default:r(()=>[u("test pos rewarder")]),_:1},8,["onClick"]),l(i,{onClick:n.testGetCollectFeesQuote},{default:r(()=>[u("get collect fee quote")]),_:1},8,["onClick"]),l(i,{onClick:n.testEstPositionAPRWithDeltaMethod},{default:r(()=>[u("test EstPositionAPRWithDeltaMethod")]),_:1},8,["onClick"])])])}const Z=v(G,[["render",M]]);export{Z as default};
