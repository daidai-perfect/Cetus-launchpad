import{_ as Me}from"./upgrade-select-input.c74a1530.js";import{_ as Ve}from"./upgrade-loading.0a5a88f9.js";import{_ as He}from"./upgrade-position-item.a131b442.js";import{a as ae,s as Ae,o as n,f as d,F as X,E as I,x as E,h as s,t as ye,v as $,u as D,e as le,r as g,l as k,c as ee,w as K,i as B,j as se,a1 as Pe,B as ge,p as ue,k as de,q as x,A as be,z as ke,$ as We,I as xe,P as ze,O as Ke,M as Ze,y as Je,b as Qe,H as Xe,K as Ie,R as es,X as ss,Q as ts}from"./entry.a6654d09.js";import{q as G,u as Re,b as De,a as Se,h as os,c as as}from"./sha256.91c60824.js";import{u as ls}from"./notifi.4fdf219a.js";import{e as ns,a as is,u as we}from"./pool.58e56ed3.js";import{i as Le}from"./import-icon.de3e6c66.js";import"./index.43c7dce9.js";import{_ as rs}from"./route-view.14f5a204.js";/* empty css              *//* empty css              *//* empty css              */import{_ as Oe}from"./icon-selected_3x.09e9a6f0.js";import{_ as us}from"./coin-pair-name.d65fadc1.js";import{D as S}from"./decimal.0bdeb344.js";import{N as ds}from"./no-data.9a3a604d.js";import{_ as Te}from"./icon_on_2x.5e96733d.js";import{_ as cs}from"./img-no-Positions_2x.86cc28cc.js";import{_ as vs}from"./img-no-Positions_2x.6abca492.js";import{_ as ms}from"./img-connect-wallet_2x.6a99d89f.js";import{_ as _s}from"./img-connect-wallet_2x.a172a4d4.js";import"./coin-select.db18a5f7.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./status-block.1f7dc367.js";import"./farms-valid-range.667f38c7.js";import"./farms.0602fe26.js";import"./icon_farms_2x.0ba84f99.js";import"./icon_rewards_2x.90e463e8.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./farms.1f4e149f.js";import"./useWhale.bbbe018d.js";import"./token-warning.792e98a7.js";const ps={key:0,class:"claim-list"},fs={class:"left"},hs={alt:""},gs={class:"right"},ws=ae({__name:"claim-list",props:{myClaimList:{type:Object,default:()=>[]}},setup(e){return(h,L)=>{const N=Ae("image");return e.myClaimList&&e.myClaimList.length>0?(n(),d("div",ps,[(n(!0),d(X,null,I(e.myClaimList,m=>(n(),d("div",{key:m,class:"claim-item"},[s("div",fs,[ye(s("img",hs,null,512),[[N,m.logo_url]]),s("span",null,$(m.symbol),1)]),s("div",gs,[s("span",null,$(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",null,$(D(G)(m.amountUSD,2,!1,!1)),1)])]))),128))])):E("",!0)}}});const Ye=le(ws,[["__scopeId","data-v-c3e2798b"]]),oe=g(!1),re=g(!1),Ee=Re(),{setIsShowSuccess:ys,setIsShowRejected:Ne,setIsShowWaiting:fe,setTransactionDesc:bs,setTransactionTxid:Ue}=Ee,ks=ns("Sui"),he=is("Sui"),Ss=De(),Ce=k(()=>Ss),je=we(),$s=k(()=>je),Ls=k(()=>Ee),Ns=async e=>{re.value=!0;try{const h=[],L=[];e.forEach(v=>{const F=v.rewarderInfo.filter(b=>b.emissionsEveryDay>0).map(b=>b.coinAddress);v.positionSource=="clmm"?h.push({pool_id:v.pool,pos_id:v.pos_object_id,collect_fee:!0,rewarder_coin_types:F,coinTypeA:v.coin_type_a,coinTypeB:v.coin_type_b}):L.push({pool_id:v.pool_id,position_nft_id:v.id,clmm_pool_id:v.clmm_pool_id,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:F,coinTypeA:v.coinTypeA,coinTypeB:v.coinTypeB})}),Ue(""),bs("Claim Yield"),fe(!0);const N=await ks.batchHarvestAndClmmFee(L,h),m=await he.signAndExecuteTransactionBlock(Ce.value.currentWallet,N.txb,N.payloadParams),T=he.handleTx(m);if(T&&T.hash){Ue(T.hash),fe(!1),ys(!0);const v={title:"Claim",desc:"Claim Yield",hash:T.hash};v.res=T.res,he.showTransitionPending(v),await he.watchTransaction(v)&&setTimeout(()=>{je.getMyPositons(Ce.value.address,$s.value.poolsObj,Ls.value.chainName)},1e3)}else fe(!1),Ne(!0);re.value=!1,oe.value=!1}catch(h){re.value=!1,fe(!1),Ne(!0),oe.value=!1,console.log("batchHarvestAndClmmFee error:",h)}},$e=e=>(ue("data-v-8e7a4ef5"),e=e(),de(),e),Us={class:"claim-yield-content"},Cs={class:"total-claim"},As=$e(()=>s("div",null,"Total Claim",-1)),Ps={class:"total-claim-usd"},Rs=$e(()=>s("svg",{"aria-hidden":"true",class:"back-icon"},[s("use",{"xlink:href":"#icon-icon-back"})],-1)),Ds=$e(()=>s("span",null,"Back",-1)),Os=[Rs,Ds],Ts=ae({__name:"claim-yield",props:{pendingYield:{type:Number,default:0},myClaimList:{type:Object,default:()=>[]},myClaimPositionList:{type:Object,default:()=>[]}},setup(e){return(h,L)=>{const N=ge;return n(),ee(D(Pe),{title:"Claim Yield",visible:!0,footer:null,width:"440px",onCancel:L[2]||(L[2]=m=>h.$emit("close"))},{default:K(()=>[s("div",Us,[s("div",Cs,[As,s("div",Ps,$(e.pendingYield>0&&e.pendingYield<.01?"<$0.01":`$${D(Se)(e.pendingYield,2)}`),1)]),B(Ye,{"my-claim-list":e.myClaimList},null,8,["my-claim-list"]),s("div",{class:"choose-amount",onClick:L[0]||(L[0]=m=>h.$emit("chooseAmount"))},Os),B(N,{class:"confirm-btn",loading:D(re),onClick:L[1]||(L[1]=m=>D(Ns)(e.myClaimPositionList))},{default:K(()=>[se("Confirm")]),_:1},8,["loading"])])]),_:1})}}});const Ys=le(Ts,[["__scopeId","data-v-8e7a4ef5"]]),Be=e=>(ue("data-v-4237fa3c"),e=e(),de(),e),Es={class:"fees-and-reward"},js={key:0,class:"fees"},Bs={class:"fees-title"},Fs=Be(()=>s("div",null,"Fees",-1)),Gs={alt:""},qs={class:"symbol"},Ms={class:"amount"},Vs={class:"amount-usd"},Hs={key:1,class:"fees"},Ws={class:"fees-title"},xs=Be(()=>s("div",null,"Mining rewards",-1)),zs={alt:""},Ks={class:"symbol"},Zs={class:"amount"},Js={class:"amount-usd"},Qs=ae({__name:"fees-and-reward",props:{pendingRewarderList:{type:Object,default:()=>[]},pendingFeesList:{type:Object,default:()=>[]},rewarderUsd:{type:String,default:""},feeOwedUsd:{type:String,default:""}},setup(e){return(h,L)=>{const N=Ae("image");return n(),d("div",Es,[e.feeOwedUsd&&e.feeOwedUsd>0?(n(),d("div",js,[s("div",Bs,[Fs,s("div",null,$(D(G)(e.feeOwedUsd,2,!1,!1)),1)]),(n(!0),d(X,null,I(e.pendingFeesList,m=>(n(),d("div",{key:m,class:"fees-details"},[s("div",null,[ye(s("img",Gs,null,512),[[N,m.logo_url]]),s("span",qs,$(m.symbol),1)]),s("div",null,[s("span",Ms,$(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",Vs,"("+$(D(G)(m.amountUSD,2,!1,!1))+")",1)])]))),128))])):E("",!0),e.rewarderUsd&&e.rewarderUsd>0?(n(),d("div",Hs,[s("div",Ws,[xs,s("div",null,$(D(G)(e.rewarderUsd,2,!1,!1)),1)]),(n(!0),d(X,null,I(e.pendingRewarderList,m=>(n(),d("div",{key:m,class:"fees-details"},[s("div",null,[ye(s("img",zs,null,512),[[N,m.logo_url]]),s("span",Ks,$(m.symbol),1)]),s("div",null,[s("span",Zs,$(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",Js,"("+$(D(G)(m.amountUSD,2,!1,!1))+")",1)])]))),128))])):E("",!0)])}}});const Xs=le(Qs,[["__scopeId","data-v-4237fa3c"]]),ce=e=>(ue("data-v-5c834a7c"),e=e(),de(),e),Is={class:"yield-details-box"},et={class:"yield-details"},st={class:"total-claim"},tt=ce(()=>s("div",null,"Pending Yield",-1)),ot={class:"total-claim-usd"},at={class:"position-detail"},lt={class:"position-detail-top"},nt=ce(()=>s("div",{class:"left"},"Position",-1)),it={class:"right"},rt=ce(()=>s("span",null,"Hide yield < ",-1)),ut={class:"position-detail-bottom"},dt={class:"left"},ct={class:"top"},vt=["onClick"],mt={key:0,src:Oe},_t={class:"bottom"},pt={class:"right"},ft={key:0,class:"yield-amount"},ht={key:1,class:"yield-amount-zero"},gt={class:"select"},wt={class:"all"},yt=ce(()=>s("span",null,"Select all",-1)),bt={class:"amount-selected"},kt=ce(()=>s("div",null,"Amount selected",-1)),St=ae({__name:"yield-details",props:{positionShowList:{type:Object,default:()=>[]},isShowYiedlDetails:{type:Boolean,default:!1}},emits:["showClaimYiedl"],setup(e,{emit:h}){const L=g(!0),N=g(!0),m=h,T=e,v=g(.01),F=g(),b=g([]),j=we(),_=k(()=>j),w=k(()=>_.value.rewarderObj),P=k(()=>_.value.feeOwedObj),U=g([]),R=g("all"),V=g([]),H=r=>{const i=[];U.value=[];let a=new S(0);const l=[];r.forEach(f=>{var M,o,t,c,A,Y;const y=((M=w.value[f.tokenName])==null?void 0:M.pendingRewarder)||0,u=((o=P.value[f.tokenName])==null?void 0:o.feeOwed)||0,O=new S(isNaN(y)?0:y).add(new S(isNaN(u)?0:u)).toString();a=a.add(new S(isNaN(y)?0:y)).add(new S(isNaN(u)?0:u)),Number(O)>0&&l.push(f),L.value&&Number(O)>Number(v.value)&&i.push({...f,totalRewardUsd:O,pendingRewarderList:(t=w.value[f.tokenName])==null?void 0:t.pendingRewarderArr,pendingFeesList:(c=P.value[f.tokenName])==null?void 0:c.feesResult,rewarderUsd:y,feeOwedUsd:u}),L.value||i.push({...f,totalRewardUsd:O,pendingRewarderList:(A=w.value[f.tokenName])==null?void 0:A.pendingRewarderArr,pendingFeesList:(Y=P.value[f.tokenName])==null?void 0:Y.feesResult,rewarderUsd:y,feeOwedUsd:u})}),V.value=l,i.forEach(f=>{f.totalRewardUsd>0&&U.value.push(f.tokenName)}),L.value?U.value.length!==i.length?R.value="":R.value="all":U.value.length!==l.length?R.value="":R.value="all",N.value=!1,F.value=a,b.value=i.sort((f,y)=>y.totalRewardUsd-f.totalRewardUsd)},ne=k(()=>_.value.getPendingFeeSuccess),Z=k(()=>_.value.getRewardSuccess);x(()=>[T.positionShowList,v.value,ne.value,Z.value,L.value],([r,i,a,l])=>{r&&r.length>0&&a&&l&&H(r)},{immediate:!0});const te=r=>{const i=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");r.target.value=r.target.value.replace(i,"$1"),v.value=r.target.value},ie=()=>{(!v.value||v.value<.01)&&(v.value=.01)},z=r=>{const i=r.tokenName,a=U.value.indexOf(i);a>-1?U.value.splice(a,1):U.value.push(i),L.value?U.value.length!==b.value.length?R.value="":R.value="all":U.value.length!==V.value.length?R.value="":R.value="all"},J=()=>{R.value="all",b.value.forEach(r=>{!U.value.includes(r.tokenName)&&r.totalRewardUsd>0&&U.value.push(r.tokenName)})},C=k(()=>{let r=new S(0);return R.value=="all"?b.value.forEach(i=>{var f,y;const a=((f=w.value[i.tokenName])==null?void 0:f.pendingRewarder)||0,l=((y=P.value[i.tokenName])==null?void 0:y.feeOwed)||0;r=r.add(new S(isNaN(a)?0:a)).add(new S(isNaN(l)?0:l))}):U.value.forEach(i=>{var f,y;const a=((f=w.value[i])==null?void 0:f.pendingRewarder)||0,l=((y=P.value[i])==null?void 0:y.feeOwed)||0;r=r.add(new S(isNaN(a)?0:a)).add(new S(isNaN(l)?0:l))}),r.toString()}),p=()=>{const r=[];b.value.forEach(i=>{U.value.includes(i.tokenName)&&r.push(i)}),m("showClaimYiedl",r)};return(r,i)=>{const a=We,l=xe,f=ze,y=ge;return n(),ee(D(Pe),{title:"Details",footer:null,visible:e.isShowYiedlDetails,width:"440px","wrap-class-name":"details-modal",onCancel:i[2]||(i[2]=u=>r.$emit("close"))},{default:K(()=>[s("div",Is,[s("div",et,[s("div",st,[tt,s("div",ot,[s("span",null,$(D(G)(F.value,2,!1,!1)),1)])]),s("div",at,[s("div",lt,[nt,s("div",it,[B(a,{class:"range-alerts-switch",checked:L.value,onClick:i[0]||(i[0]=()=>{L.value=!L.value,N.value=!1})},null,8,["checked"]),rt,B(l,{value:`$${v.value}`,onChange:te,onBlur:ie},null,8,["value"])])]),s("div",ut,[b.value&&b.value.length>0?(n(!0),d(X,{key:0},I(b.value,u=>(n(),d("div",{key:u,class:"position-item"},[s("div",dt,[s("div",ct,[s("div",{class:be(["radio",u.totalRewardUsd<=0?"radio-disable":""]),onClick:O=>u.totalRewardUsd>0?z(u):""},[(R.value=="all"||U.value.includes(u.tokenName))&&u.totalRewardUsd>0?(n(),d("img",mt)):E("",!0)],10,vt),B(us,{"from-coin":u.needReverse?u.token_b:u.token_a,"to-coin":u.needReverse?u.token_a:u.token_b,"fee-tier":u.fee*1e3},null,8,["from-coin","to-coin","fee-tier"])]),s("div",_t,$(u.tokenName),1)]),s("div",pt,[u.totalRewardUsd>0?(n(),d("div",ft,[B(f,{placement:"bottomRight","overlay-class-name":"yield-amount-tooltip"},{title:K(()=>[B(Xs,{"pending-fees-list":u.pendingFeesList,"pending-rewarder-list":u.pendingRewarderList,"rewarder-usd":u.rewarderUsd,"fee-owed-usd":u.feeOwedUsd},null,8,["pending-fees-list","pending-rewarder-list","rewarder-usd","fee-owed-usd"])]),default:K(()=>[se($(D(G)(u.totalRewardUsd,2,!1,!1))+" ",1)]),_:2},1024)])):(n(),d("div",ht,$(D(G)(u.totalRewardUsd,2,!1,!1)),1))])]))),128)):(n(),ee(ds,{key:1,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found"}))])])]),s("div",gt,[s("div",wt,[s("div",{class:"radio",onClick:J},[R.value=="all"?(n(),d("img",{key:0,src:Oe,onClick:i[1]||(i[1]=ke(()=>{U.value=[],R.value=""},["stop"]))})):E("",!0)]),yt]),s("div",bt,[kt,s("div",null,$(D(G)(C.value,2,!1,!1)),1)])]),B(y,{class:"claim-yield-btn",disabled:C.value=="0",onClick:p},{default:K(()=>[se("Claim Yield")]),_:1},8,["disabled"])])]),_:1},8,["visible"])}}});const $t=le(St,[["__scopeId","data-v-5c834a7c"]]),Fe=e=>(ue("data-v-826d7f95"),e=e(),de(),e),Lt={class:"total-info"},Nt={class:"total-liquidity"},Ut=Fe(()=>s("span",null,"Total Liquidity",-1)),Ct={key:0,class:"skeleton-box"},At={key:1,class:"total-liquidity-usd"},Pt={class:"pending-yield"},Rt=Fe(()=>s("div",null,"Pending Yield",-1)),Dt={key:0,class:"skeleton-box"},Ot={key:1},Tt={key:0,class:"claim-list-box"},Yt={class:"claim-list-content"},Et=ae({__name:"total-position",setup(e){const h=g(!1),L=we(),N=k(()=>L),m=k(()=>N.value.rewarderObj),T=k(()=>N.value.feeOwedObj),v=k(()=>N.value.positionShowList),F=k(()=>N.value.myPositionsLoading),b=k(()=>N.value.getPendingFeeSuccess),j=k(()=>N.value.getRewardSuccess),_=g(0),w=g(0),P=g(!0),U=g([]),R=g([]),V=g([]),H=C=>{let p=new S(0);const r=[];C.forEach(i=>{p=p.add(new S(isNaN(i.amountUSD)?0:i.amountUSD)),r.push(i.tokenName)}),U.value=r,_.value=p.toNumber()},ne=(C,p)=>{let r=new S(0);const i=[];U.value.forEach(l=>{var u,O,M,o;const f=((u=C[l])==null?void 0:u.pendingRewarder)||0,y=((O=p[l])==null?void 0:O.feeOwed)||0;r=r.add(new S(isNaN(f)?0:f)).add(new S(isNaN(y)?0:y)),(M=C[l])!=null&&M.pendingRewarderArr&&i.push(...C[l].pendingRewarderArr),(o=p[l])!=null&&o.feesResult&&i.push(...p[l].feesResult)});const a={};i.forEach(l=>{a[l.address]?a[l.address]={...l,amountUSD:new S(a[l.address].amountUSD).add(isNaN(l.amountUSD)?0:l.amountUSD).toString(),amount:new S(a[l.address].amount).add(isNaN(l.amountUSD)?0:l.amountUSD).toString()}:(a[l.address]={},a[l.address]={...l,amountUSD:new S(0).add(isNaN(l.amountUSD)?0:l.amountUSD).toString(),amount:new S(0).add(l.amount).toString()})}),V.value=Object.values(a).filter(l=>l.amount>0).sort((l,f)=>f.amountUSD-l.amountUSD),w.value=r.toNumber(),P.value=!1};x(()=>v.value,C=>{C&&C.length>0?H(C):H([])},{immediate:!0}),x(()=>[b.value,j.value,U.value,m.value,T.value],([C,p,r,i,a])=>{C&&p?ne(i,a):P.value=!0},{immediate:!0,deep:!0});const Z=g(),te=g(),ie=C=>{h.value=!1,oe.value=!0;let p=new S(0);const r=[],i={};C.forEach(a=>{var u,O,M,o;const l=a.tokenName,f=((u=m.value[l])==null?void 0:u.pendingRewarder)||0,y=((O=T.value[l])==null?void 0:O.feeOwed)||0;p=p.add(new S(f)).add(new S(y)),(M=m.value[l])!=null&&M.pendingRewarderArr&&r.push(...m.value[l].pendingRewarderArr),(o=T.value[l])!=null&&o.feesResult&&r.push(...T.value[l].feesResult)}),r.forEach(a=>{i[a.address]?i[a.address]={...a,amountUSD:new S(i[a.address].amountUSD).add(isNaN(a.amountUSD)?0:a.amountUSD).toString(),amount:new S(i[a.address].amount).add(isNaN(a.amountUSD)?0:a.amountUSD).toString()}:(i[a.address]={},i[a.address]={...a,amountUSD:new S(0).add(isNaN(a.amountUSD)?0:a.amountUSD).toString(),amount:new S(0).add(a.amount).toString()})}),Z.value=p.toNumber(),R.value=Object.values(i).filter(a=>a.amount>0).sort((a,l)=>l.amountUSD-a.amountUSD),te.value=C},z=g(1),J=()=>{w.value>0&&(h.value=!0,z.value=z.value==1?2:1)};return(C,p)=>{const r=Ze,i=ge;return n(),d("div",Lt,[s("div",Nt,[Ut,!_.value&&F.value?(n(),d("div",Ct,[B(r,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(n(),d("span",At,$(_.value>0&&_.value<.01?"<$0.01":`$${D(Se)(_.value,2)}`),1))]),s("div",Pt,[Rt,P.value?(n(),d("div",Dt,[B(r,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(n(),d("div",Ot,[s("span",{class:"pending-yield-usd",style:Ke(w.value<=0?{border:"none"}:{}),onClick:J},[se($(w.value>0&&w.value<.01?"<$0.01":`$${D(Se)(w.value,2)}`)+" ",1),w.value>0?(n(),d("div",Tt,[s("div",Yt,[B(Ye,{"my-claim-list":V.value},null,8,["my-claim-list"])])])):E("",!0)],4),w.value>0?(n(),d("img",{key:0,src:rs,alt:"",onClick:J})):E("",!0),B(i,{class:"claim-all-btn",disabled:w.value<=0,loading:D(re),onClick:J},{default:K(()=>[se("Claim All")]),_:1},8,["disabled","loading"])]))]),D(oe)?(n(),ee(Ys,{key:0,"pending-yield":Z.value,"my-claim-list":R.value,"my-claim-position-list":te.value,onClose:p[0]||(p[0]=a=>oe.value=!1),onChooseAmount:p[1]||(p[1]=()=>{oe.value=!1,h.value=!0})},null,8,["pending-yield","my-claim-list","my-claim-position-list"])):E("",!0),(n(),ee($t,{key:z.value,"position-show-list":v.value,"is-show-yiedl-details":h.value,onClose:p[2]||(p[2]=()=>{h.value=!1}),onShowClaimYiedl:ie},null,8,["position-show-list","is-show-yiedl-details"]))])}}});const jt=le(Et,[["__scopeId","data-v-826d7f95"]]),Bt=ae({components:{TotalPosition:jt},setup(){const e=g(!1),{t:h}=Je(),L=g(["position"]),N=Qe(),m=g(""),T=Re(),v=k(()=>T),F=k(()=>v.value.chainName?os[v.value.chainName]:{});let b=g([]);const j=we(),_=k(()=>j),w=De(),P=k(()=>w),U=g(!1),R=g(h("tab.all")),V=g([h("tab.layerZero"),h("tab.wormhole"),h("tab.celer")]),H=g(!0),ne=g("TVL"),Z=()=>{e.value=!0,b.value=[],P.value.address&&(j.setPools(r.value.poolConfigList,v.value.chainName),j.getMyPositons(P.value.address,_.value.poolsObj,v.value.chainName)),setTimeout(()=>{e.value=!1},1e3)},te=k(()=>{const o=Array.from(new Set(_.value.poolConfigList.flatMap(t=>!(t!=null&&t.category)||(t==null?void 0:t.category)==""?"All":t==null?void 0:t.category)));return console.log(o,"newArr"),o.length<=1?[]:o}),ie=o=>{_.value.setCurrentPoolTab(o)};x(()=>v.value.isRefresh,o=>{var t,c,A,Y;o&&((Y=(A=(c=(t=N==null?void 0:N.currentRoute)==null?void 0:t.value)==null?void 0:c.name)==null?void 0:A.split("-"))==null?void 0:Y[1])=="position"&&Z()}),Xe(()=>{b.value=[],document.addEventListener("click",()=>{U.value=!1}),j.setMyPositionsLoading(!0)}),Ie(()=>{document.addEventListener("click",()=>{U.value=!1})}),es(()=>{P.value.connected||(b.value=[])});const z=()=>{e.value=!0;let o=[];_.value.myPositions.forEach(t=>{var ve,me,_e,pe;const c=v.value.addressLpTokens[t.address];let A;c!=null&&c.stable_farming&&c.stable_farming.stable_rewarder.map(qe=>{qe.amount_second>0&&(A=!0)});let Y,q;const W=t.amountA*((ve=_.value.RATES[t.token_a.address])==null?void 0:ve.price),Q=t.amountB*((me=_.value.RATES[t.token_b.address])==null?void 0:me.price);(_e=_.value.RATES[t.token_a.address])!=null&&_e.price&&((pe=_.value.RATES[t.token_b.address])!=null&&pe.price)?(Y=W+Q,q=W+Q):(Y=" --",q=0),console.log(_.value.currentPoolTab,"##pools.value.currentPoolTab"),(_.value.currentPoolTab=="All"||_.value.currentPoolTab!=="All"&&t.category==_.value.currentPoolTab)&&o.push({...t,amountUSD:Y,amountUSDOrigin:q,tokenARates:W,tokenBRates:Q,isStableFarming:A})}),R.value!="All"?H.value?(b.value=o.sort((t,c)=>Number(c.amountUSDOrigin)-Number(t.amountUSDOrigin)),e.value=!1):(b.value=o.sort((t,c)=>Number(t.amountUSDOrigin)-Number(c.amountUSDOrigin)),e.value=!1):H.value?(b.value=o.sort((t,c)=>c.amountUSDOrigin-t.amountUSDOrigin),e.value=!1):(b.value=o.sort((t,c)=>t.amountUSDOrigin-c.amountUSDOrigin),e.value=!1),console.log(b.value,"list.value========>")};x(()=>[_.value.myPositions,_.value.RATES],([o,t])=>{o&&t&&(console.log("0605==>updateLpList9099999"),z())},{immediate:!0}),x(()=>[P.value.address,_.value.poolConfigList,_.value.poolsObj,v.value.chainName],([o,t,c,A])=>{var Y,q,W;o&&t&&t.length>0&&A&&(A!=null&&A.toLowerCase().includes((Y=t[0])==null?void 0:Y.chain))&&!as(c)&&(A==="Aptos"?t.length===Object.values(c).length:(W=(q=Object.values(c)[0])==null?void 0:q.chain)!=null&&W.includes("sui"))&&(console.log(c,t,"0605==>getMyPositons9099999"),j.getMyPositons(P.value.address,c,A))},{immediate:!0,deep:!0}),x(()=>P.value.address,o=>{o||j.setMyPositions()},{immediate:!0}),x(()=>[R.value,H.value,_.value.currentPoolTab],([o])=>{z()});const J=o=>{const t=[];V.value.forEach((c,A)=>{c==o?t[A]=R.value:t[A]=c}),V.value=t,R.value=o},C=ls(),p=k(()=>C),r=k(()=>j),i=async o=>{await C.getSourceGroups();const t=p.value.sourceGroups&&p.value.sourceGroups.length>0&&p.value.sourceGroups[0]&&p.value.sourceGroups[0].sources||[];console.log(t,"####source"),console.log(o,"###myPositions");for(let c=0;c<t.length;c++){const{pool_address:A,position_index:Y}=JSON.parse(t[c].blockchainAddress);let q=!1,W;for(let Q=0;Q<o.length;Q++){const{poolAddress:ve,index:me,positionSource:_e,name:pe}=o[Q];A==ve&&Number(_e=="clmm"?me:pe.split("-")[1])==Number(Y)&&(q=!0),W={pool_address:A,position_index:Y}}q||await C.subscribePosition(W,"",!1,!1)}},a=async()=>{await C.getSourceGroups();const o=p.value.sourceGroups&&p.value.sourceGroups.length>0&&p.value.sourceGroups[0]&&p.value.sourceGroups[0].sources||[];for(let t=0;t<o.length;t++){const{pool_address:c,position_index:A}=JSON.parse(o[t].blockchainAddress),{name:Y}=o[t],q={pool_address:c,position_index:A};await C.subscribePosition(q,Y,!1,!1)}},l=k(()=>r.value.myPositionsLoading);x(()=>r.value.myPositions,(o,t)=>{F.value.hasNotifi&&(o&&o.length>0&&t&&t.length!==o.length?i(o):o&&o.length==0&&!l.value&&a())},{immediate:!0});const f=o=>{var t;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((t=_.value.tokensObj[o==null?void 0:o.address])==null?void 0:t.logo_url)||(v.value.theme==="default"?Le("/image/coins/unknown.png"):Le("/image/coins/sui-unknown.png"))},y=g(null),u=k(()=>y.value&&y.value.firstToken?y.value.firstToken:null),O=k(()=>y.value&&y.value.lastToken?y.value.lastToken:null),M=k(()=>{let o=[];o=b.value;const t=o.filter((c,A)=>u.value&&O.value?c.coinA.symbol==u.value.symbol&&c.coinB.symbol==O.value.symbol||c.coinA.symbol==O.value.symbol&&c.coinB.symbol==u.value.symbol:u.value?c.coinA.symbol.toLowerCase().includes(u.value.symbol.toLowerCase())||c.coinB.symbol.toLowerCase().includes(u.value.symbol.toLowerCase()):O.value?c.coinA.symbol.toLowerCase().includes(O.value.symbol.toLowerCase())||c.coinB.symbol.toLowerCase().includes(O.value.symbol.toLowerCase()):o);return _.value.myPositionsLoading||(T.setPositiomAmount(t.length),j.setPositionShowList(t)),t});return ss(()=>{T.setPositiomAmount("--"),j.setPositionShowList([])}),{tabArr:te,changeTab:ie,showList:M,childTokenSelectRef:y,firstToken:u,lastToken:O,getCoinIcon:f,changeSortLabel:J,label:U,labelList:V,labelValue:R,select:H,selectValue:ne,t:h,pools:_,store:v,wallet:P,list:b,clickRefresh:Z,refresh:e,current:L,router:N,searchKey:m}}});const Ge=e=>(ue("data-v-a6c8cdbf"),e=e(),de(),e),Ft={class:"upgrade-position-list-container"},Gt={class:"position-card-top"},qt={class:"content-top"},Mt={class:"content-top-left"},Vt={key:0,class:"tag-list"},Ht=["onClick"],Wt={class:"content-top-right"},xt={class:"value"},zt=Ge(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Kt=[zt],Zt={key:0,class:"select-item"},Jt=["onClick"],Qt={class:"search-select-box"},Xt=Ge(()=>s("span",null,"TVL",-1)),It={key:0,src:Te,alt:""},eo={key:1,class:"fan-img",src:Te,alt:""},so={key:0,class:"upgrade-loading"},to={key:1,class:"position-list"},oo={key:2,class:"no-data"},ao={key:0,src:cs,alt:""},lo={key:1,src:vs,alt:""},no={key:3,class:"no-data"},io={key:0,src:ms,alt:""},ro={key:1,src:_s,alt:""};function uo(e,h,L,N,m,T){const v=ts("TotalPosition"),F=Me,b=Ve,j=He,_=ge;return n(),d("div",Ft,[s("div",Gt,[e.wallet&&e.wallet.address?(n(),ee(v,{key:0})):E("",!0),s("div",qt,[s("div",Mt,[e.tabArr.length>1?(n(),d("div",Vt,[(n(!0),d(X,null,I(e.tabArr,(w,P)=>(n(),d("div",{key:P,class:be(["tag-item",w==e.pools.currentPoolTab?`tag-active tab-num-${e.tabArr.length}`:`tab-num-${e.tabArr.length}`]),onClick:U=>e.changeTab(w)},$(w),11,Ht))),128))])):E("",!0),B(F,{ref:"childTokenSelectRef"},null,512)]),s("div",Wt,[e.store.theme=="default"?(n(),d("div",{key:0,class:"search-label",onClick:h[0]||(h[0]=ke(w=>e.label=!e.label,["stop"]))},[s("span",null,$(e.$t("newAdd.label")),1),s("div",xt,$(e.labelValue),1),(n(),d("svg",{"aria-hidden":"true",class:be(e.label?"show-icon icon":"icon")},Kt,2)),e.label?(n(),d("div",Zt,[(n(!0),d(X,null,I(e.labelList,(w,P)=>(n(),d("div",{key:P,class:"select-menu-item",onClick:U=>e.changeSortLabel(w)},$(w),9,Jt))),128))])):E("",!0)])):E("",!0),s("div",Qt,[s("div",{class:"search-select",onClick:h[1]||(h[1]=ke(w=>e.select=!e.select,["stop"]))},[se($(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[Xt,e.select?(n(),d("img",It)):(n(),d("img",eo))])])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),d("div",so,[B(b,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):E("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),d("div",to,[(n(!0),d(X,null,I(e.showList,(w,P)=>(n(),ee(j,{key:P,"p-item":w},null,8,["p-item"]))),128))])):E("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),d("div",oo,[e.store.theme=="default"?(n(),d("img",ao)):(n(),d("img",lo)),s("span",null,$(e.$t("common.noLiquidityPositions")),1)])):E("",!0),e.wallet.connected?E("",!0):(n(),d("div",no,[e.store.theme=="default"?(n(),d("img",io)):(n(),d("img",ro)),B(_,{class:"connect-wallet",onClick:h[2]||(h[2]=w=>e.wallet.setIsShowWalletModal(!0))},{default:K(()=>[se($(e.$t("button.connectWallet")),1)]),_:1})]))])}const zo=le(Bt,[["render",uo],["__scopeId","data-v-a6c8cdbf"]]);export{zo as default};
