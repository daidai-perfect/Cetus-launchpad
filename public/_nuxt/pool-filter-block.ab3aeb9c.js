import{a as A,e as C,o as p,f as _,h as t,z as w,v as O,m as $,r as b,y as W,T as J,M as Z,ff as Q,K as N,F as E,s as X,i as L,p as P,k as I,H as ee,j as oe,x as z,D as q,u as F,a0 as se}from"./entry.245dc163.js";import{F as ne}from"./filter-pool-by-coin.b89ad9f8.js";import{I as le}from"./is-all-pool.b5a0c6c1.js";import{_ as ie}from"./icon-selected_3x.09e9a6f0.js";import{u as T}from"./pool.e26523d4.js";import{u as re,f as te}from"./fetchFun.b7d6300f.js";import{u as ce}from"./useToken.0a1dd6d5.js";import{g as ue,h as x,P as pe,aH as H,S as _e}from"./index.881efd6c.js";import{D as K}from"./decimal.0bdeb344.js";import{s as G}from"./pool.521bfdc1.js";const de=A({name:"Checkbox",props:{modelValue:{type:Boolean,default:!1},label:{type:String,default:""}},setup(o,r){return{toggleSelect:()=>{r.emit("update:modelValue",!o.modelValue)}}}});const fe={class:"checkbox-button"},ve={class:"label"};function ae(o,r,d,m,f,v){return p(),_("div",{class:"checkbox-container",onClick:r[0]||(r[0]=(...c)=>o.toggleSelect&&o.toggleSelect(...c))},[t("div",fe,[t("img",{class:w({show:o.modelValue}),src:ie},null,2)]),t("span",ve,O(o.label),1)])}const he=C(de,[["render",ae],["__scopeId","data-v-c6e355bc"]]),me=A({name:"Dropdown",components:{CheckBox:he},props:{options:{type:Array,required:!0},modelValue:{type:Array,required:!0},label:{type:String,default:""},iconUrl:{type:String,default:""},num:{type:[String,Number],default:""}},setup(o,r){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown-checkbox.vue:112 ~ setup ~ props.options:",o.options);const d=T(),m=$(()=>d),f=$(()=>m.value.isOpenSelectLabel),{setIsOpenSelectType:v,setIsOpenSelectLabel:c}=d,u=b(null);b(null);const g=()=>{v(!1),c(!f.value)},y=$(()=>{const s=o.modelValue;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown-checkbox.vue:65 ~ optionList ~ modelValueArr:",s),o.options.map(i=>({...i,value:s==null?void 0:s.includes(i.label)}))}),e=s=>{const i={};y.value.forEach(a=>{a.value&&(i[a.label]=!0)}),i[s.label]=s.value;const n=Object.keys(i).filter(a=>i[a]);console.log("ðŸš€ ~ file: dropdownCheckbox.vue:83 ~ selectOption ~ newValue:",n),r.emit("update:modelValue",n)},l=s=>{c(!1),v(!1)};return W(()=>{document.addEventListener("click",l)}),J(()=>{document.removeEventListener("click",l)}),{isOpen:f,selectedOption:u,selectOption:e,toggleDropdown:g,optionList:y}}});const ge=o=>(P("data-v-07de3997"),o=o(),I(),o),be={class:"current-info"},ye={class:"icon-box"},ke={class:"icon","aria-hidden":"true"},we=["xlink:href"],Se={class:"label"},$e=ge(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Le=[$e],Oe={key:1,class:"num"},Ve=["onClick"];function Ce(o,r,d,m,f,v){const c=Z("CheckBox");return p(),_("div",{class:w(["dropdown-container",{open:o.isOpen}])},[t("div",{class:"dropdown-toggle",onClick:r[0]||(r[0]=N((...u)=>o.toggleDropdown&&o.toggleDropdown(...u),["stop"]))},[Q(o.$slots,"toggle",{},()=>[t("div",be,[t("div",ye,[(p(),_("svg",ke,[t("use",{"xlink:href":o.iconUrl},null,8,we)]))]),t("span",Se,O(o.label),1)])],!0),o.num?(p(),_("div",Oe,O(o.num),1)):(p(),_("svg",{key:0,"aria-hidden":"true",class:w(["dropdown-icon",{open:o.isOpen}])},Le,2))]),t("ul",{class:w(["dropdown-list",{open:o.isOpen}])},[(p(!0),_(E,null,X(o.optionList,u=>(p(),_("li",{key:u.value,onClick:g=>o.selectOption(u)},[L(c,{modelValue:u.value,"onUpdate:modelValue":g=>u.value=g,label:u.label},null,8,["modelValue","onUpdate:modelValue","label"])],8,Ve))),128))],2)],2)}const Ae=C(me,[["render",Ce],["__scopeId","data-v-07de3997"]]),Pe=A({name:"Dropdown",props:{options:{type:Array,required:!0},modelValue:{type:[String,Number],default:null},label:{type:String,default:"Label"},hasIcon:{type:Boolean,default:!1},iconUrl:{type:String,default:""}},setup(o,r){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown.vue:55 ~ setup ~ props:",o);const d=T(),m=$(()=>d),f=$(()=>m.value.isOpenSelectType),{setIsOpenSelectType:v,setIsOpenSelectLabel:c}=d,u=b(null),g=()=>{v(!f.value),c(!1)},y=s=>{u.value=s,r.emit("update:modelValue",s.value),v(!1)},e=()=>{u.value=o.options.find(s=>s.value===o.modelValue)||{label:"",value:null}},l=s=>{v(!1),c(!1)};return W(()=>{document.addEventListener("click",l),e()}),J(()=>{document.removeEventListener("click",l)}),{isOpen:f,selectedOption:u,selectOption:y,toggleDropdown:g}}});const Y=o=>(P("data-v-cf76a60c"),o=o(),I(),o),Ie={class:"current-info"},Te={class:"icon-box"},Be={class:"icon","aria-hidden":"true"},De=["xlink:href"],Fe={class:"label"},xe={class:"value"},Ee=Y(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ne=[Ee],Me=["onClick"],Ue={key:0,"aria-hidden":"true",class:"icon"},Re=Y(()=>t("use",{"xlink:href":"#icon-icon_on-pool"},null,-1)),je=[Re];function ze(o,r,d,m,f,v){return p(),_("div",{class:w(["dropdown-container",{open:o.isOpen}])},[t("div",{class:"dropdown-toggle",onClick:r[0]||(r[0]=N((...c)=>o.toggleDropdown&&o.toggleDropdown(...c),["stop"]))},[Q(o.$slots,"toggle",{},()=>{var c;return[t("div",Ie,[t("div",Te,[(p(),_("svg",Be,[t("use",{"xlink:href":o.iconUrl},null,8,De)]))]),t("span",Fe,O(o.label),1),t("span",xe,O((c=o.selectedOption)==null?void 0:c.value),1)])]},!0),(p(),_("svg",{"aria-hidden":"true",class:w(["dropdown-icon",{open:o.isOpen}])},Ne,2))]),t("ul",{class:w(["dropdown-list",{open:o.isOpen}])},[(p(!0),_(E,null,X(o.options,c=>(p(),_(E,{key:c.value},[c.value!==o.modelValue?(p(),_("li",{key:0,style:ee({color:c.color}),onClick:u=>o.selectOption(c)},[oe(O(c.value)+" ",1),o.hasIcon?(p(),_("svg",Ue,je)):z("",!0)],12,Me)):z("",!0)],64))),128))],2)],2)}const qe=C(Pe,[["render",ze],["__scopeId","data-v-cf76a60c"]]);function He(){const o=re();ce();const{poolList:r,setPoolList:d,setPoolListLoading:m}=T(),f=(e,l)=>!!_e(G(e),G(l)),v=async e=>{var a,k,B;const l=(e==null?void 0:e.is_forward)===!1,s=(e==null?void 0:e.is_display_rewarder)&&((e==null?void 0:e.rewarder_display1)||(e==null?void 0:e.rewarder_display2)||(e==null?void 0:e.rewarder_display3)),i=[];if(s){const S=(B=(k=(a=e==null?void 0:e.object)==null?void 0:a.rewarder_manager)==null?void 0:k.fields)==null?void 0:B.rewarders;S==null||S.forEach((h,D)=>{var M,U,R,j;const V=x((M=h==null?void 0:h.fields)==null?void 0:M.emissions_per_second).mul(K.pow(2,-64));e!=null&&e[`rewarder_display${D+1}`]&&V.gt(0)&&i.push({coinType:pe((j=(R=(U=h==null?void 0:h.fields)==null?void 0:U.reward_coin)==null?void 0:R.fields)==null?void 0:j.name).source_address,emissionsEveryDay:H(V.mul(60*60*24).toString(),0)})})}return{...e,poolAddress:e==null?void 0:e.address,tokenAAddress:e==null?void 0:e.coin_a_address,tokenBAddress:e==null?void 0:e.coin_b_address,displayTokenAAddress:l?e==null?void 0:e.coin_b_address:e==null?void 0:e.coin_a_address,displayTokenBAddress:l?e==null?void 0:e.coin_a_address:e==null?void 0:e.coin_b_address,isReverse:l,tickSpacing:Number(e==null?void 0:e.tick_spacing),isClosed:e==null?void 0:e.is_closed,haveMining:s&&(i==null?void 0:i.length)>0,miningRewardList:i}},c=async(e,l)=>{const s=e==null?void 0:e.poolAddress,i=f(e==null?void 0:e.coinTypeA,e==null?void 0:e.coinTypeB),n=l[s],a=n&&(n==null?void 0:n.is_show_rewarder)&&((n==null?void 0:n.show_rewarder_1)||(n==null?void 0:n.show_rewarder_2)||(n==null?void 0:n.show_rewarder_3)),k=[];if(a){const S=e==null?void 0:e.rewarder_infos;S==null||S.forEach((h,D)=>{const V=x(h==null?void 0:h.emissions_per_second).mul(K.pow(2,-64));n!=null&&n[`show_rewarder_${D+1}`]&&V.gt(0)&&k.push({coinType:h==null?void 0:h.coinAddress,emissionsEveryDay:H(V.mul(60*60*24).toString(),0)})})}return{poolAddress:s,tokenAAddress:e==null?void 0:e.coinTypeA,tokenBAddress:e==null?void 0:e.coinTypeB,displayTokenAAddress:i?e==null?void 0:e.coinTypeB:e==null?void 0:e.coinTypeA,displayTokenBAddress:i?e==null?void 0:e.coinTypeA:e==null?void 0:e.coinTypeB,isReverse:i,tickSpacing:e.tickSpacing,isClosed:(n==null?void 0:n.is_closed)||!1,haveMining:a,miningRewardList:k,fee:x(e==null?void 0:e.fee_rate).div(Math.pow(10,6)).toString()}},u=async e=>{console.log("ðŸš€ ~ fetchPoolList ~ poolList:",r);try{if(!e&&r&&(r==null?void 0:r.length)>0)return r;const l=await te(`${ue.Sui.api}/v2/sui/pools_info/v3`);console.log("ðŸš€ ~ file: usePoolList.ts:10 ~ fetchPoolList ~ res:",l);const s=l==null?void 0:l.lp_list;if(s){const i=[];for(let n=0;n<(s==null?void 0:s.length);n++){const a=s[n];if(!s[n].object.is_pause&&!s[n].is_closed){const k=await v(a);i.push(k)}}return console.log("ðŸš€ ~ file: usePoolList.ts:61 ~ result ~ result:",i),i}}catch(l){if(console.error("ðŸš€ ~ file: usePoolList.ts:130 ~ fetchPoolList ~ error:",l),r)return r;try{return await g()||[]}catch(s){return console.error("ðŸš€ ~ file: usePoolList.ts:133 ~ fetchPoolList ~ e:",s),[]}}},g=async()=>{try{const e=await o.clmmSdk.CetusConfig.getClmmPoolConfigs()||[],l=Object.fromEntries(e.map(i=>[i==null?void 0:i.pool_address,i])),s=await o.clmmSdk.Pool.getPools([],0,9999);if(s){const i=[];for(let n=0;n<(s==null?void 0:s.length);n++){const a=s[n],k=await c(a,l);i.push(k)}return i}}catch(e){return console.error("ðŸš€ ~ file: usePoolList.ts:157 ~ getPoolListFromContract ~ error:",e),[]}};return{getPoolList:async()=>{m(!0);const e=await u();console.log("ðŸš€ ~ getPoolList ~ pools:",e),e&&d(e)}}}const Ke=o=>(P("data-v-e8cc00a3"),o=o(),I(),o),Ge={class:"icon-box"},We=Ke(()=>t("use",{"xlink:href":"#icon-icon_refresh"},null,-1)),Je=[We],Qe={__name:"pool-list-refresh-icon",setup(o){const{getPoolList:r}=He(),d=b(!1),m=()=>{d.value=!0,r(),setTimeout(()=>{d.value=!1},1e3)};return(f,v)=>(p(),_("div",{class:"pool-list-refresh-icon",onClick:m},[t("div",Ge,[(p(),_("svg",{class:w(["icon",{refresh:d.value}]),"aria-hidden":"true"},Je,2))])]))}},Xe=C(Qe,[["__scopeId","data-v-e8cc00a3"]]),Ye=o=>(P("data-v-d3cebdab"),o=o(),I(),o),Ze={class:"pool-filter-block"},eo={class:"filter-coin"},oo={class:"filter-right"},so={class:"h5-filter-icon"},no=Ye(()=>t("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),lo=[no],io=A({__name:"pool-filter-block",emits:["sort","filterPoolByCoin"],setup(o,{emit:r}){const d=b([{label:"Mining"},{label:"Farming"},{label:"No incentives"}]),m=b([{label:"Option 1",value:"All"},{label:"Option 2",value:"Wormhole",color:"#72C1F7"},{label:"Option 3",value:"Celer",color:"#6F86FF"}]);b([{label:"Option 1",value:"VOL"},{label:"Option 2",value:"APR"},{label:"Option 3",value:"TVL"}]);const f=T(),v=$(()=>f),c=$(()=>v.value.incentiveTypeList),u=c.value?b(c.value):b(["Mining","Farming","No incentives"]);q(()=>[u.value],([e])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-filter-block.vue:68 ~ newValue:",e),u.value=e,f.setIncentiveTypeList(e)},{immediate:!0});const g=b("All");q(()=>g.value,e=>{f.setLabel(e)});const y=b(!1);return(e,l)=>(p(),_("div",Ze,[t("div",eo,[L(ne,{"is-allow-ban":!0,"have-import-btn":!0})]),t("div",oo,[t("div",so,[(p(),_("svg",{class:"icon","aria-hidden":"true",onClick:l[0]||(l[0]=N(s=>y.value=!y.value,["stop"]))},lo))]),t("div",{class:w(["hover-box",y.value?"open-hover-box":""])},[L(le),L(Ae,{modelValue:F(u),"onUpdate:modelValue":l[1]||(l[1]=s=>se(u)?u.value=s:null),options:d.value,"icon-url":"#icon-icon_type_1",num:F(u)&&F(u).length,label:"Incentive types"},null,8,["modelValue","options","num"]),L(qe,{modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=s=>g.value=s),options:m.value,label:"Label","icon-url":"#icon-icon_label"},null,8,["modelValue","options"])],2),L(Xe)])]))}});const mo=C(io,[["__scopeId","data-v-d3cebdab"]]);export{mo as P,He as u};
