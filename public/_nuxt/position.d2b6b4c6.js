import{_ as Le,a as je}from"./upgrade-loading.bfcb262c.js";import{_ as Te}from"./position-status.13b4590a.js";import{a as Be,u as he,s as Fe,f as z,b,k as Ee,g as Ve,c as le,e as h,D as Ge,i as He}from"./pool.e0c10d34.js";import{a as ke,l as be,b as ge,m as k,r as U,D as M,y as Ie,e as we,q as qe,o as n,f as t,h as s,i as F,t as D,x as y,v as o,u as d,j as me,z as de,F as Z,s as Q,S as We,p as _e,k as fe,C as Me,N as ze,V as Je,T as ve,w as Ke,B as Ze,c as Qe}from"./entry.4c32ee27.js";/* empty css              */import{i as oe}from"./import-icon.de3e6c66.js";import{u as ye,_ as Xe}from"./index.7398ae13.js";import{_ as Re}from"./icon-arrow_2x.948aedb2.js";import{_ as $e}from"./icon-arrow_2x.4ffddb8e.js";import{u as Ye}from"./notifi.818a5728.js";import{_ as Ue}from"./icon_on_2x.5e96733d.js";import{_ as xe,a as es}from"./img-no-Positions_2x.68e0bcc7.js";import{_ as ss,a as as}from"./img-connect-wallet_2x.60749c9c.js";import"./coin-select.34cefc08.js";/* empty css              *//* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./status-block.6dd0ae74.js";const os=ke({props:{pItem:{type:Object,required:!0}},setup(e){const{t:g}=be(),E=ge(),B=ye(),f=k(()=>B),V=k(()=>f.value.chainName?Be(f.value.chainName):{}),N=he(),p=k(()=>N),v=()=>{f.value.chainName==="Aptos"?E.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):E.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},C=k(()=>p.value.allTokenObj&&e.pItem.token_a.address&&p.value.allTokenObj[e.pItem.token_a.address]&&p.value.allTokenObj[e.pItem.token_a.address].logo_url),a=k(()=>p.value.allTokenObj&&e.pItem.token_b.address&&p.value.allTokenObj[e.pItem.token_b.address]&&p.value.allTokenObj[e.pItem.token_b.address].logo_url),G=k(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feeOwed),L=k(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feesResult),X=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarder),H=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),Y=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),J=U(0),ue=U();M(()=>p.value.RATES,l=>{l&&(ue.value=l)},{immediate:!0});const ne=l=>{var $;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||(($=p.value.tokensObj[l==null?void 0:l.address])==null?void 0:$.logo_url)||(f.value.theme==="default"?oe("/image/coins/unknown.png"):oe("/image/coins/sui-unknown.png"))},x=k(()=>p.value.tokensObj);Ie(()=>{pe(e.pItem),q(e.pItem.minPrice,e.pItem.maxPrice)});const ee=U("--"),q=(l,$)=>{l!=="0"&&$!=="∞"?ee.value=Fe(1/(1-Number((l/$)**.25)),2)+"x":ee.value=1},R=U(30),w=U(null),pe=async l=>{var O,j,W;let $;e.pItem.needReverse?$=!1:$=!0;const S=$?Number(e.pItem.minPrice):e.pItem.maxPrice=="∞"?1/2**50:1/Number(e.pItem.maxPrice),A=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:$?Number(e.pItem.maxPrice):1/Number(e.pItem.minPrice);let _=[];_=f.value&&f.value.addressHistTokens&&f.value.addressHistTokens[l.poolAddress]&&f.value.addressHistTokens[l.poolAddress].data&&f.value.addressHistTokens[l.poolAddress].data.length>0&&Object.fromEntries(f.value.addressHistTokens[l.poolAddress].data.map(T=>[T.key,T.value]));const K=Number(Number(R.value==7?_.before_7_d_contract_price_lowest:R.value==24?_.before_24_h_contract_price_lowest:_.before_30_d_contract_price_lowest)),i=Number(Number(R.value==7?_.before_7_d_contract_price_highest:R.value==24?_.before_24_h_contract_price_highest:_.before_30_d_contract_price_highest)),r=p.value.tokensObj,m=await V.value.getEstPositionAPRWithMulti(S,A,K,i),c=Number(m.toString()),u=f.value.newTopPoolsObj[l.poolAddress];let I;if(u){R.value==7?I=u.apr_7day?Number(u.apr_7day.substring(0,u.apr_7day.length-1)):0:R.value==24?I=u.apr_24h?Number(u.apr_24h.substring(0,u.apr_24h.length-1)):0:I=u.apr_30day?Number(u.apr_30day.substring(0,u.apr_30day.length-1)):0;const T=u.rewarder_apr[0]?Number(u.rewarder_apr[0].substring(0,u.rewarder_apr[0].length-1)):0,Ce=u.rewarder_apr[1]?Number(u.rewarder_apr[1].substring(0,u.rewarder_apr[1].length-1)):0,Se=u.rewarder_apr[2]?Number(u.rewarder_apr[2].substring(0,u.rewarder_apr[2].length-1)):0,se=Number(c*I),te=Number(c*T),re=Number(c*Ce),ie=Number(c*Se),ae=se+(l.rewarder_display1?te:0)+(l.rewarder_display2?re:0)+(l.rewarder_display3?ie:0),Ae=l.rewarder_infos[0]?(O=r[l.rewarder_infos[0].coinAddress])==null?void 0:O.symbol:"--",Oe=l.rewarder_infos[1]?(j=r[l.rewarder_infos[1].coinAddress])==null?void 0:j.symbol:"--",Pe=l.rewarder_infos[2]?(W=r[l.rewarder_infos[2].coinAddress])==null?void 0:W.symbol:"--",De={aprFee:se==1/0||isNaN(se)?0:se,rewardAprList:[{rewarder_name:Ae,rewarder_apr:te==1/0||isNaN(te)?0:te,styleName:"one",rewarder_display:l.rewarder_display1},{rewarder_name:Oe,rewarder_apr:re==1/0||isNaN(re)?0:re,styleName:"two",rewarder_display:l.rewarder_display2},{rewarder_name:Pe,rewarder_apr:ie==1/0||isNaN(ie)?0:ie,styleName:"three",rewarder_display:l.rewarder_display2}],aprPercentageTotal:ae==1/0||isNaN(ae)||ae===0?0:ae,aprPercentage:z(se/ae,2),is_display_rewarder:l.is_display_rewarder};w.value=De}};return{aprNum:k(()=>{var l,$,S,A,_,K,i,r,m,c,u,I;return w.value?w.value.is_display_rewarder?(l=w.value)!=null&&l.aprPercentageTotal?(($=w.value)==null?void 0:$.aprPercentageTotal)>1e4?">10,000":((S=w.value)==null?void 0:S.aprPercentageTotal)<.01&&((A=w.value)==null?void 0:A.aprPercentageTotal)>0?"<0.01":z((_=w.value)==null?void 0:_.aprPercentageTotal,2):(K=w.value)!=null&&K.rewardAprList?"0":"--":(i=w.value)!=null&&i.aprFee?((r=w.value)==null?void 0:r.aprFee)>1e4?">10,000":((m=w.value)==null?void 0:m.aprFee)<.01&&((c=w.value)==null?void 0:c.aprFee)>0?"<0.01":b((u=w.value)==null?void 0:u.aprFee,2):(I=w.value)!=null&&I.rewardAprList?"0":"--":"--"}),lever:ee,tokensObj:x,showNum:Ee,fromCoinUrl:C,toCoinUrl:a,decimalFormat:Ve,clickDetails:v,t:g,addCommom:b,importIcon:oe,router:E,store:f,pendingRewarder:X,pendingFees:G,pendingRewarderArr:Y,pendingFeesArr:L,checkNullObj:le,fixD:z,decimalUi:h,pendingRewarderView:H,aprAmount:J,getCoinIcon:ne,Decimal:Ge}}});const P=e=>(_e("data-v-a84b3f07"),e=e(),fe(),e),ns={class:"upgrade-position-item"},ts={class:"card-content"},rs={class:"left"},is={class:"top card-header"},ds={class:"token-item"},ls={class:"item"},ms={key:0,class:"token-warning"},us={class:"item"},ps={key:0,class:"token-warning"},cs={class:"card-header-right"},vs={class:"item"},hs=P(()=>s("span",null,"Leverage",-1)),ks={class:"item"},bs=P(()=>s("span",null,"Estimated APR",-1)),gs=P(()=>s("div",{class:"more-img"},null,-1)),Is={class:"bottom"},ws={class:"info-block-container"},_s={class:"info-block"},fs=P(()=>s("div",{class:"leabl"},"Fee",-1)),ys={class:"text"},Rs={class:"info-block"},$s=P(()=>s("div",{class:"leabl"},"Price range",-1)),Us={class:"text"},Ns={class:"min-and-max"},Cs={class:"text"},Ss={key:0,src:Re,alt:""},As={key:1,src:$e,alt:""},Os={class:"text"},Ps={class:"leabl"},Ds={class:"text"},Ls={key:0,class:"hover-rewarder"},js={class:"rewarder-info"},Ts={class:"left-rewarder"},Bs={alt:""},Fs={class:"right-rewarder"},Es={class:"amount"},Vs={key:0,class:"amount-usd"},Gs={key:1,class:"amount-usd"},Hs={class:"rewarder-info"},qs={class:"left-rewarder"},Ws={alt:""},Ms={class:"right-rewarder"},zs={class:"amount"},Js={key:0,class:"amount-usd"},Ks={key:1,class:"amount-usd"},Zs={class:"leabl"},Qs={key:0,class:"text"},Xs={key:1,class:"text"},Ys={key:2,class:"text"},xs={key:3,class:"hover-rewarder"},ea={class:"left-rewarder"},sa={alt:""},aa={class:"right-rewarder"},oa={class:"amount"},na={class:"amount-usd"},ta={class:"leabl"},ra={key:0,class:"text"},ia={key:1,class:"text"},da={key:2,class:"hover-rewarder"},la={class:"left-rewarder"},ma={alt:""},ua={class:"right-rewarder"},pa={class:"amount"},ca={class:"amount-usd"},va={class:"h5-bottom"},ha={class:"item"},ka=P(()=>s("span",null,"Leverage",-1)),ba={class:"item"},ga=P(()=>s("span",null,"Estimated APR",-1)),Ia=P(()=>s("div",{class:"more-img"},null,-1)),wa={class:"info"},_a={class:"info-item"},fa=P(()=>s("div",{class:"left"},"Fee",-1)),ya={class:"right"},Ra={class:"info-item range-item"},$a={class:"left"},Ua={class:"right"},Na={class:"min-and-max"},Ca={class:"text"},Sa={key:0,src:Re,alt:""},Aa={key:1,src:$e,alt:""},Oa={class:"text"},Pa={class:"info-item"},Da=P(()=>s("div",{class:"left"},"Liquidity",-1)),La={class:"right"},ja={key:0,class:"hover-rewarder"},Ta={class:"rewarder-info"},Ba={class:"left-rewarder"},Fa={alt:""},Ea={class:"right-rewarder"},Va={class:"amount"},Ga={key:0,class:"amount-usd"},Ha={key:1,class:"amount-usd"},qa={class:"rewarder-info"},Wa={class:"left-rewarder"},Ma={alt:""},za={class:"right-rewarder"},Ja={class:"amount"},Ka={key:0,class:"amount-usd"},Za={key:1,class:"amount-usd"},Qa={class:"info-item"},Xa=P(()=>s("div",{class:"left"},"Pending Fees",-1)),Ya={key:0,class:"right"},xa={key:1,class:"right"},eo={key:2,class:"right"},so={key:3,class:"hover-rewarder"},ao={class:"left-rewarder"},oo={alt:""},no={class:"right-rewarder"},to={class:"amount"},ro={class:"amount-usd"},io={key:0,class:"info-item"},lo={class:"left"},mo={key:0,class:"right"},uo={key:1,class:"right"},po={key:2,class:"hover-rewarder"},co={class:"left-rewarder"},vo={alt:""},ho={class:"right-rewarder"},ko={class:"amount"},bo={class:"amount-usd"};function go(e,g,E,B,f,V){var C;const N=Te,p=We,v=qe("image");return n(),t("div",ns,[s("div",ts,[s("div",rs,[F(N,{"p-item":e.pItem,"current-status":((C=e.pItem)==null?void 0:C.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:g[0]||(g[0]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",is,[s("div",ds,[s("div",ls,[s("div",null,[D(s("img",null,null,512),[[v,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(n(),t("div",ms)):y("",!0),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,o(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+o(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)]),s("div",us,[s("div",null,[D(s("img",null,null,512),[[v,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(n(),t("div",ps)):y("",!0),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,o(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+o(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])]),s("div",cs,[s("div",vs,[s("p",null,o(e.lever),1),hs]),s("div",ks,[s("p",null,o(e.aprNum)+"%",1),bs]),gs])]),s("div",Is,[s("div",ws,[s("div",_s,[fs,s("div",ys,o(e.pItem.fee*100)+"%",1)]),s("div",Rs,[$s,s("div",Us,[s("div",Ns,[s("div",Cs,o(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(n(),t("img",Ss)):(n(),t("img",As)),s("div",Os,[me(o((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(e.pItem.maxPrice,6)))+" ",1),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])])]),s("div",{class:de(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",Ps,o(e.$t("common.liquidity")),1),s("div",Ds," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:d(b))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",Ls,[s("div",js,[s("div",Ts,[D(s("img",Bs,null,512),[[v,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",Fs,[s("div",Es,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:d(h))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:d(h))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",Gs,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:d(z))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",Vs,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:d(z))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",Hs,[s("div",qs,[D(s("img",Ws,null,512),[[v,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",Ms,[s("div",zs,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:d(h))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:d(h))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",Ks,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:d(h))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",Js,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:d(h))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):y("",!0)],2),s("div",{class:de(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",Zs,o(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(n(),t("div",Qs,"$ --")):isNaN(e.pendingFees)?(n(),t("div",Ys,[F(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",Xs,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:d(b))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",xs,[(n(!0),t(Z,null,Q(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",ea,[D(s("img",sa,null,512),[[v,e.getCoinIcon(a)]]),s("span",null,o(a.symbol),1)]),s("div",aa,[s("div",oa,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",na,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:d(b))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:d(le))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",{key:0,class:de(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",ta,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",ra," $"+o(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",ia,[F(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(n(),t("div",da,[(n(!0),t(Z,null,Q(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",la,[D(s("img",ma,null,512),[[v,a.logoURI]]),s("span",null,o(a.symbol),1)]),s("div",ua,[s("div",pa,o(("decimalUi"in e?e.decimalUi:d(h))(a.amount,a.decimals)),1),s("div",ca,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:d(b))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)],2)):y("",!0)])])])]),s("div",va,[s("div",{class:"card-header-right",onClick:g[1]||(g[1]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",ha,[s("p",null,o(e.lever),1),ka]),s("div",ba,[s("p",null,o(e.aprNum)+"%",1),ga]),Ia]),s("div",wa,[s("div",_a,[fa,s("div",ya,o(e.pItem.fee*100)+"%",1)]),s("div",Ra,[s("div",$a,[me("Price range ("),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",Ua,[s("div",Na,[s("div",Ca,o(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(n(),t("img",Sa)):(n(),t("img",Aa)),s("div",Oa,o((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(e.pItem.maxPrice,6))),1)])])]),s("div",Pa,[Da,s("div",La," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:d(b))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",ja,[s("div",Ta,[s("div",Ba,[D(s("img",Fa,null,512),[[v,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",Ea,[s("div",Va,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:d(h))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:d(h))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",Ha,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:d(z))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",Ga,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:d(z))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",qa,[s("div",Wa,[D(s("img",Ma,null,512),[[v,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",za,[s("div",Ja,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:d(h))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:d(h))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",Za,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:d(h))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",Ka,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:d(h))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):y("",!0)]),s("div",Qa,[Xa,e.pendingFees==="--"?(n(),t("div",Ya,"$ --")):isNaN(e.pendingFees)?(n(),t("div",eo,[F(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",xa,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:d(b))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",so,[(n(!0),t(Z,null,Q(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",ao,[D(s("img",oo,null,512),[[v,e.getCoinIcon(a)]]),s("span",null,o(a.symbol),1)]),s("div",no,[s("div",to,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:d(b))(("decimalUi"in e?e.decimalUi:d(h))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",ro,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:d(b))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:d(le))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",io,[s("div",lo,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",mo," $"+o(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",uo,[F(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(n(),t("div",po,[(n(!0),t(Z,null,Q(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",co,[D(s("img",vo,null,512),[[v,a.logoURI]]),s("span",null,o(a.symbol),1)]),s("div",ho,[s("div",ko,o(("decimalUi"in e?e.decimalUi:d(h))(a.amount,a.decimals)),1),s("div",bo,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:d(b))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)])):y("",!0)])])])}const Io=we(os,[["render",go],["__scopeId","data-v-a84b3f07"]]),wo=ke({setup(){const e=U(!1),{t:g}=be(),E=U(["position"]),B=ge(),f=U(""),V=ye(),N=k(()=>V),p=k(()=>N.value.chainName?Xe[N.value.chainName]:{});let v=U([]);const C=he(),a=k(()=>C),G=He(),L=k(()=>G),X=U(!1),H=U(g("tab.all")),Y=U([g("tab.layerZero"),g("tab.wormhole"),g("tab.celer")]),J=U(!0),ue=U("TVL"),ne=()=>{e.value=!0,v.value=[],L.value.address&&C.getMyPositons(L.value.address,a.value.poolsObj,N.value.chainName),setTimeout(()=>{e.value=!1},1e3)};M(()=>N.value.isRefresh,i=>{var r;i&&((r=B==null?void 0:B.currentRoute)==null?void 0:r.value.name.split("-")[1])=="position"&&ne()}),Ie(()=>{v.value=[],document.addEventListener("click",()=>{X.value=!1}),C.setMyPositionsLoading(!0)}),Me(()=>{document.addEventListener("click",()=>{X.value=!1})}),ze(()=>{L.value.connected||(v.value=[])});const x=()=>{e.value=!0;let i=[];a.value.myPositions.forEach(r=>{var O,j,W,T;let m,c;const u=r.amountA*((O=a.value.RATES[r.token_a.address])==null?void 0:O.price),I=r.amountB*((j=a.value.RATES[r.token_b.address])==null?void 0:j.price);(W=a.value.RATES[r.token_a.address])!=null&&W.price&&((T=a.value.RATES[r.token_b.address])!=null&&T.price)?(m=u+I,c=u+I):(m=" --",c=0),i.push({...r,amountUSD:m,amountUSDOrigin:c,tokenARates:u,tokenBRates:I})}),H.value!="All"?J.value?(v.value=i.sort((r,m)=>Number(m.amountUSDOrigin)-Number(r.amountUSDOrigin)),e.value=!1):(v.value=i.sort((r,m)=>Number(r.amountUSDOrigin)-Number(m.amountUSDOrigin)),e.value=!1):J.value?(v.value=i.sort((r,m)=>m.amountUSDOrigin-r.amountUSDOrigin),e.value=!1):(v.value=i.sort((r,m)=>r.amountUSDOrigin-m.amountUSDOrigin),e.value=!1),console.log(v.value,"list.value========>")};M(()=>[a.value.myPositions,a.value.RATES],([i,r])=>{i&&r&&x()},{immediate:!0}),M(()=>[L.value.address,a.value.poolConfigList,a.value.poolsObj,N.value.chainName],([i,r,m,c])=>{var u,I,O;i&&r&&r.length>0&&c&&(c!=null&&c.toLowerCase().includes((u=r[0])==null?void 0:u.chain))&&!le(m)&&(c==="Aptos"?r.length===Object.values(m).length:(O=(I=Object.values(m)[0])==null?void 0:I.chain)!=null&&O.includes("sui"))&&C.getMyPositons(L.value.address,m,c)},{immediate:!0,deep:!0}),M(()=>H.value,i=>{x()}),M(()=>J.value,i=>{x()});const ee=i=>{const r=[];Y.value.forEach((m,c)=>{m==i?r[c]=H.value:r[c]=m}),Y.value=r,H.value=i},q=Ye(),R=k(()=>q),w=k(()=>C),pe=async i=>{await q.getSourceGroups();const r=R.value.sourceGroups&&R.value.sourceGroups.length>0&&R.value.sourceGroups[0]&&R.value.sourceGroups[0].sources||[];for(let m=0;m<r.length;m++){const{pool_address:c,position_index:u}=JSON.parse(r[m].blockchainAddress);let I=!1,O;for(let j=0;j<i.length;j++){const{poolAddress:W,index:T}=i[j];c==W&&Number(T)==Number(u)&&(I=!0),O={pool_address:c,position_index:u}}I||await q.subscribePosition(O,"",!1,!1)}},ce=async()=>{await q.getSourceGroups();const i=R.value.sourceGroups&&R.value.sourceGroups.length>0&&R.value.sourceGroups[0]&&R.value.sourceGroups[0].sources||[];for(let r=0;r<i.length;r++){const{pool_address:m,position_index:c}=JSON.parse(i[r].blockchainAddress),{name:u}=i[r],I={pool_address:m,position_index:c};await q.subscribePosition(I,u,!1,!1)}},l=k(()=>w.value.myPositionsLoading);M(()=>w.value.myPositions,(i,r)=>{p.value.hasNotifi&&(i&&i.length>0&&r&&r.length!==i.length?pe(i):i&&i.length==0&&!l.value&&ce())},{immediate:!0});const $=i=>{var r;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((r=a.value.tokensObj[i==null?void 0:i.address])==null?void 0:r.logo_url)||(N.value.theme==="default"?oe("/image/coins/unknown.png"):oe("/image/coins/sui-unknown.png"))},S=U(null),A=k(()=>S.value&&S.value.firstToken?S.value.firstToken:null),_=k(()=>S.value&&S.value.lastToken?S.value.lastToken:null),K=k(()=>{let i=[];i=v.value;const r=i.filter((m,c)=>A.value&&_.value?m.coinA.symbol.toLowerCase().includes(A.value.symbol.toLowerCase())&&m.coinB.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())||m.coinA.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())&&m.coinB.symbol.toLowerCase().includes(A.value.symbol.toLowerCase()):A.value?m.coinA.symbol.toLowerCase().includes(A.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(A.value.symbol.toLowerCase()):_.value?m.coinA.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(_.value.symbol.toLowerCase()):i);return a.value.myPositionsLoading||V.setPositiomAmount(r.length),r});return Je(()=>{V.setPositiomAmount("--")}),{showList:K,childTokenSelectRef:S,firstToken:A,lastToken:_,getCoinIcon:$,changeSortLabel:ee,label:X,labelList:Y,labelValue:H,select:J,selectValue:ue,t:g,pools:a,store:N,wallet:L,list:v,clickRefresh:ne,refresh:e,current:E,router:B,searchKey:f}}});const Ne=e=>(_e("data-v-70871030"),e=e(),fe(),e),_o={class:"upgrade-position-list-container"},fo={class:"content-top"},yo={class:"content-top-left"},Ro={class:"content-top-right"},$o={class:"value"},Uo=Ne(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),No=[Uo],Co={key:0,class:"select-item"},So=["onClick"],Ao={class:"search-select-box"},Oo=Ne(()=>s("span",null,"TVL",-1)),Po={key:0,src:Ue,alt:""},Do={key:1,class:"fan-img",src:Ue,alt:""},Lo={key:0,class:"upgrade-loading"},jo={key:1,class:"position-list"},To={key:2,class:"no-data"},Bo={key:0,src:xe,alt:""},Fo={key:1,src:es,alt:""},Eo={key:3,class:"no-data"},Vo={key:0,src:ss,alt:""},Go={key:1,src:as,alt:""};function Ho(e,g,E,B,f,V){const N=Le,p=je,v=Io,C=Ze;return n(),t("div",_o,[s("div",fo,[s("div",yo,[F(N,{ref:"childTokenSelectRef"},null,512)]),s("div",Ro,[e.store.theme=="default"?(n(),t("div",{key:0,class:"search-label",onClick:g[0]||(g[0]=ve(a=>e.label=!e.label,["stop"]))},[s("span",null,o(e.$t("newAdd.label")),1),s("div",$o,o(e.labelValue),1),(n(),t("svg",{"aria-hidden":"true",class:de(e.label?"show-icon icon":"icon")},No,2)),e.label?(n(),t("div",Co,[(n(!0),t(Z,null,Q(e.labelList,(a,G)=>(n(),t("div",{key:G,class:"select-menu-item",onClick:L=>e.changeSortLabel(a)},o(a),9,So))),128))])):y("",!0)])):y("",!0),s("div",Ao,[s("div",{class:"search-select",onClick:g[1]||(g[1]=ve(a=>e.select=!e.select,["stop"]))},[me(o(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[Oo,e.select?(n(),t("img",Po)):(n(),t("img",Do))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",Lo,[F(p,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):y("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),t("div",jo,[(n(!0),t(Z,null,Q(e.showList,(a,G)=>(n(),Qe(v,{key:G,"p-item":a},null,8,["p-item"]))),128))])):y("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",To,[e.store.theme=="default"?(n(),t("img",Bo)):(n(),t("img",Fo)),s("span",null,o(e.$t("common.noLiquidityPositions")),1)])):y("",!0),e.wallet.connected?y("",!0):(n(),t("div",Eo,[e.store.theme=="default"?(n(),t("img",Vo)):(n(),t("img",Go)),F(C,{class:"connect-wallet",onClick:g[2]||(g[2]=a=>e.wallet.setIsShowWalletModal(!0))},{default:Ke(()=>[me(o(e.$t("button.connectWallet")),1)]),_:1})]))])}const ln=we(wo,[["render",Ho],["__scopeId","data-v-70871030"]]);export{ln as default};
