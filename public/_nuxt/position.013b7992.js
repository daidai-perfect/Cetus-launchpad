import{_ as Fe}from"./upgrade-select-input.883a3799.js";import{_ as Ve}from"./upgrade-loading.2610de6b.js";import{_ as He}from"./status-block.46d79101.js";import{g as me,a as Ge,u as ye,s as qe,k as z,e as b,j as Me,b as We,c as ue,d as c,D as ze,f as Je}from"./pool.5f6ba17c.js";import{a as he,l as ke,m as k,e as ge,o as n,f as t,h as s,i as V,u as r,v as o,c as Re,w as ve,x as y,j as te,z as ae,L as Ke,p as be,k as Ie,b as $e,r as N,D as W,y as Ue,q as Ze,t as T,F as Z,s as Q,S as Qe,C as Xe,N as Ye,V as xe,T as fe,B as es}from"./entry.1fc542fa.js";/* empty css              */import{u as we,_ as Ne}from"./index.7bcf0333.js";/* empty css              */import{i as ne}from"./import-icon.de3e6c66.js";import{_ as Se}from"./icon-arrow_2x.948aedb2.js";import{_ as Ce}from"./icon-arrow_2x.4ffddb8e.js";import{u as ss}from"./notifi.add6c457.js";import{_ as Pe}from"./icon_on_2x.5e96733d.js";import{_ as os,a as as}from"./img-no-Positions_2x.eeefe805.js";import{_ as ns,a as ts}from"./img-connect-wallet_2x.eba2aa91.js";import"./coin-select.f5ed7559.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const rs=he({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(e){const{t:g}=ke(),j=we(),S=k(()=>j),I=k(()=>S.value.chainName);console.log(e.pItem,"pItempItem121221");const L=k(()=>Ne[I.value]);return{getExplorerUrl:me,store:S,config:L,t:g}}});const Ae=e=>(be("data-v-4530e4e6"),e=e(),Ie(),e),is={class:"status-block-box"},ds={key:0,class:"owner-addres"},ls=["href"],ms=["href"],us={class:"copy-link"},ps=Ae(()=>s("use",{"xlink:href":"#icon-icon-copy"},null,-1)),cs=["href"],vs=Ae(()=>s("svg",{class:"icon","aria-hidden":"true"},[te(" > "),s("use",{"xlink:href":"#icon-icon-link"})],-1)),hs=[vs];function ks(e,g,j,S,I,L){const R=He,p=Ke;return n(),t("div",{class:ae(["upgrade-position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[s("div",is,[V(R,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"])]),e.pItem.tokenName?(n(),t("div",ds,[e.pItem.tokenName.length<=24?(n(),t("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:r(me))("nftAddress",e.pItem.nftHash),target:"_blank"},o(e.pItem.tokenName.split("|")[1]),9,ls)):(n(),Re(p,{key:1,placement:"bottom","arrow-point-at-center":""},{title:ve(()=>[s("span",null,o(e.pItem.tokenName),1)]),default:ve(()=>[s("a",{target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:r(me))("nftAddress",e.pItem.nftHash)},o(e.pItem.tokenName.substr(0,4))+" ... "+o(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,ms)]),_:1}))])):y("",!0),s("div",us,[(n(),t("svg",{class:"icon","aria-hidden":"true",onClick:g[0]||(g[0]=h=>e.store.copy(e.pItem.nftHash))},[te(" > "),ps])),e.pItem.tokenName.length<=24?(n(),t("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:r(me))("nftAddress",e.pItem.nftHash),target:"_blank"},hs,8,cs)):y("",!0)])],2)}const gs=ge(rs,[["render",ks],["__scopeId","data-v-4530e4e6"]]),bs=he({props:{pItem:{type:Object,required:!0}},setup(e){const{t:g}=ke(),j=$e(),S=we(),I=k(()=>S),L=k(()=>I.value.chainName?Ge(I.value.chainName):{}),R=ye(),p=k(()=>R),h=()=>{I.value.chainName==="Aptos"?j.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):j.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},C=k(()=>p.value.allTokenObj&&e.pItem.token_a.address&&p.value.allTokenObj[e.pItem.token_a.address]&&p.value.allTokenObj[e.pItem.token_a.address].logo_url),a=k(()=>p.value.allTokenObj&&e.pItem.token_b.address&&p.value.allTokenObj[e.pItem.token_b.address]&&p.value.allTokenObj[e.pItem.token_b.address].logo_url),H=k(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feeOwed),B=k(()=>p.value.feeOwedObj[e.pItem.tokenName]&&p.value.feeOwedObj[e.pItem.tokenName].feesResult),X=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarder),G=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),Y=k(()=>p.value.rewarderObj[e.pItem.tokenName]&&p.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),J=N(0),pe=N();W(()=>p.value.RATES,l=>{l&&(pe.value=l)},{immediate:!0});const re=l=>{var U;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((U=p.value.tokensObj[l==null?void 0:l.address])==null?void 0:U.logo_url)||(I.value.theme==="default"?ne("/image/coins/unknown.png"):ne("/image/coins/sui-unknown.png"))},x=k(()=>p.value.tokensObj);Ue(()=>{ce(e.pItem),q(e.pItem.minPrice,e.pItem.maxPrice)});const ee=N("--"),q=(l,U)=>{l!=="0"&&U!=="∞"?ee.value=qe(1/(1-Number((l/U)**.25)),2)+"x":ee.value=1},$=N(30),_=N(null),ce=async l=>{var O,E,M;let U;e.pItem.needReverse?U=!1:U=!0;const P=U?Number(e.pItem.minPrice):e.pItem.maxPrice=="∞"?1/2**50:1/Number(e.pItem.maxPrice),A=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:U?Number(e.pItem.maxPrice):1/Number(e.pItem.minPrice);let f=[];f=I.value&&I.value.addressHistTokens&&I.value.addressHistTokens[l.poolAddress]&&I.value.addressHistTokens[l.poolAddress].data&&I.value.addressHistTokens[l.poolAddress].data.length>0&&Object.fromEntries(I.value.addressHistTokens[l.poolAddress].data.map(F=>[F.key,F.value]));const K=Number(Number($.value==7?f.before_7_d_contract_price_lowest:$.value==24?f.before_24_h_contract_price_lowest:f.before_30_d_contract_price_lowest)),d=Number(Number($.value==7?f.before_7_d_contract_price_highest:$.value==24?f.before_24_h_contract_price_highest:f.before_30_d_contract_price_highest)),i=p.value.tokensObj,m=await L.value.getEstPositionAPRWithMulti(P,A,K,d),v=Number(m.toString()),u=I.value.newTopPoolsObj[l.poolAddress];let w;if(u){$.value==7?w=u.apr_7day?Number(u.apr_7day.substring(0,u.apr_7day.length-1)):0:$.value==24?w=u.apr_24h?Number(u.apr_24h.substring(0,u.apr_24h.length-1)):0:w=u.apr_30day?Number(u.apr_30day.substring(0,u.apr_30day.length-1)):0;const F=u.rewarder_apr[0]?Number(u.rewarder_apr[0].substring(0,u.rewarder_apr[0].length-1)):0,De=u.rewarder_apr[1]?Number(u.rewarder_apr[1].substring(0,u.rewarder_apr[1].length-1)):0,je=u.rewarder_apr[2]?Number(u.rewarder_apr[2].substring(0,u.rewarder_apr[2].length-1)):0,se=Number(v*w),ie=Number(v*F),de=Number(v*De),le=Number(v*je),oe=se+(l.rewarder_display1?ie:0)+(l.rewarder_display2?de:0)+(l.rewarder_display3?le:0),Le=l.rewarder_infos[0]?(O=i[l.rewarder_infos[0].coinAddress])==null?void 0:O.symbol:"--",Te=l.rewarder_infos[1]?(E=i[l.rewarder_infos[1].coinAddress])==null?void 0:E.symbol:"--",Be=l.rewarder_infos[2]?(M=i[l.rewarder_infos[2].coinAddress])==null?void 0:M.symbol:"--",Ee={aprFee:se==1/0||isNaN(se)?0:se,rewardAprList:[{rewarder_name:Le,rewarder_apr:ie==1/0||isNaN(ie)?0:ie,styleName:"one",rewarder_display:l.rewarder_display1},{rewarder_name:Te,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"two",rewarder_display:l.rewarder_display2},{rewarder_name:Be,rewarder_apr:le==1/0||isNaN(le)?0:le,styleName:"three",rewarder_display:l.rewarder_display2}],aprPercentageTotal:oe==1/0||isNaN(oe)||oe===0?0:oe,aprPercentage:z(se/oe,2),is_display_rewarder:l.is_display_rewarder};_.value=Ee}};return{aprNum:k(()=>{var l,U,P,A,f,K,d,i,m,v,u,w;return _.value?_.value.is_display_rewarder?(l=_.value)!=null&&l.aprPercentageTotal?((U=_.value)==null?void 0:U.aprPercentageTotal)>1e4?">10,000":((P=_.value)==null?void 0:P.aprPercentageTotal)<.01&&((A=_.value)==null?void 0:A.aprPercentageTotal)>0?"<0.01":z((f=_.value)==null?void 0:f.aprPercentageTotal,2):(K=_.value)!=null&&K.rewardAprList?"0":"--":(d=_.value)!=null&&d.aprFee?((i=_.value)==null?void 0:i.aprFee)>1e4?">10,000":((m=_.value)==null?void 0:m.aprFee)<.01&&((v=_.value)==null?void 0:v.aprFee)>0?"<0.01":b((u=_.value)==null?void 0:u.aprFee,2):(w=_.value)!=null&&w.rewardAprList?"0":"--":"--"}),lever:ee,tokensObj:x,showNum:Me,fromCoinUrl:C,toCoinUrl:a,decimalFormat:We,clickDetails:h,t:g,addCommom:b,importIcon:ne,router:j,store:I,pendingRewarder:X,pendingFees:H,pendingRewarderArr:Y,pendingFeesArr:B,checkNullObj:ue,fixD:z,decimalUi:c,pendingRewarderView:G,aprAmount:J,getCoinIcon:re,Decimal:ze}}});const D=e=>(be("data-v-9d8cce4d"),e=e(),Ie(),e),Is={class:"upgrade-position-item"},ws={class:"card-content"},_s={class:"left"},fs={class:"top card-header"},ys={class:"token-item"},Rs={class:"item"},$s={key:0,class:"token-warning"},Us={class:"item"},Ns={key:0,class:"token-warning"},Ss={class:"card-header-right"},Cs={class:"item"},Ps=D(()=>s("span",null,"Leverage",-1)),As={class:"item"},Os=D(()=>s("span",null,"Estimated APR",-1)),Ds=D(()=>s("div",{class:"more-img"},null,-1)),js={class:"bottom"},Ls={class:"info-block-container"},Ts={class:"info-block"},Bs=D(()=>s("div",{class:"leabl"},"Fee Tier",-1)),Es={class:"text"},Fs={class:"info-block"},Vs=D(()=>s("div",{class:"leabl"},"Price Range",-1)),Hs={class:"text"},Gs={class:"min-and-max"},qs={class:"left-text"},Ms={class:"text"},Ws={class:"hover-text"},zs={key:0,src:Se,alt:""},Js={key:1,src:Ce,alt:""},Ks={class:"right-text"},Zs={class:"text"},Qs={class:"hover-text"},Xs={class:"leabl"},Ys={class:"text"},xs={key:0,class:"hover-rewarder"},eo={class:"rewarder-info"},so={class:"left-rewarder"},oo={alt:""},ao={class:"right-rewarder"},no={class:"amount"},to={key:0,class:"amount-usd"},ro={key:1,class:"amount-usd"},io={class:"rewarder-info"},lo={class:"left-rewarder"},mo={alt:""},uo={class:"right-rewarder"},po={class:"amount"},co={key:0,class:"amount-usd"},vo={key:1,class:"amount-usd"},ho={class:"leabl"},ko={key:0,class:"text"},go={key:1,class:"text"},bo={key:2,class:"text"},Io={key:3,class:"hover-rewarder"},wo={class:"left-rewarder"},_o={alt:""},fo={class:"right-rewarder"},yo={class:"amount"},Ro={class:"amount-usd"},$o={class:"leabl"},Uo={key:0,class:"text"},No={key:1,class:"text"},So={key:2,class:"hover-rewarder"},Co={class:"left-rewarder"},Po={alt:""},Ao={class:"right-rewarder"},Oo={class:"amount"},Do={class:"amount-usd"},jo={class:"h5-bottom"},Lo={class:"item"},To=D(()=>s("span",null,"Leverage",-1)),Bo={class:"item"},Eo=D(()=>s("span",null,"Estimated APR",-1)),Fo=D(()=>s("div",{class:"more-img"},null,-1)),Vo={class:"info"},Ho={class:"info-item"},Go=D(()=>s("div",{class:"left"},"Fee Tier",-1)),qo={class:"right"},Mo={class:"info-item range-item"},Wo={class:"left"},zo={class:"right"},Jo={class:"min-and-max"},Ko={class:"text"},Zo={key:0,src:Se,alt:""},Qo={key:1,src:Ce,alt:""},Xo={class:"text"},Yo={class:"info-item"},xo=D(()=>s("div",{class:"left"},"Liquidity",-1)),ea={class:"right"},sa={key:0,class:"hover-rewarder"},oa={class:"rewarder-info"},aa={class:"left-rewarder"},na={alt:""},ta={class:"right-rewarder"},ra={class:"amount"},ia={key:0,class:"amount-usd"},da={key:1,class:"amount-usd"},la={class:"rewarder-info"},ma={class:"left-rewarder"},ua={alt:""},pa={class:"right-rewarder"},ca={class:"amount"},va={key:0,class:"amount-usd"},ha={key:1,class:"amount-usd"},ka={class:"info-item"},ga=D(()=>s("div",{class:"left"},"Pending Fees",-1)),ba={key:0,class:"right"},Ia={key:1,class:"right"},wa={key:2,class:"right"},_a={key:3,class:"hover-rewarder"},fa={class:"left-rewarder"},ya={alt:""},Ra={class:"right-rewarder"},$a={class:"amount"},Ua={class:"amount-usd"},Na={key:0,class:"info-item"},Sa={class:"left"},Ca={key:0,class:"right"},Pa={key:1,class:"right"},Aa={key:2,class:"hover-rewarder"},Oa={class:"left-rewarder"},Da={alt:""},ja={class:"right-rewarder"},La={class:"amount"},Ta={class:"amount-usd"};function Ba(e,g,j,S,I,L){var C;const R=gs,p=Qe,h=Ze("image");return n(),t("div",Is,[s("div",ws,[s("div",_s,[V(R,{"p-item":e.pItem,"current-status":((C=e.pItem)==null?void 0:C.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:g[0]||(g[0]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",fs,[s("div",ys,[s("div",Rs,[s("div",null,[T(s("img",null,null,512),[[h,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(n(),t("div",$s)):y("",!0),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,o(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+o(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)]),s("div",Us,[s("div",null,[T(s("img",null,null,512),[[h,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(n(),t("div",Ns)):y("",!0),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,o(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+o(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])]),s("div",Ss,[s("div",Cs,[s("p",null,o(e.lever),1),Ps]),s("div",As,[s("p",null,o(e.aprNum)+"%",1),Os]),Ds])]),s("div",js,[s("div",Ls,[s("div",Ts,[Bs,s("div",Es,o(e.pItem.fee*100)+"%",1)]),s("div",Fs,[Vs,s("div",Hs,[s("div",Gs,[s("div",qs,[s("div",Ms,o(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(e.pItem.minPrice,6))),1),s("div",Ws,o(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(e.pItem.minPrice,6))),1)]),e.store.theme=="default"?(n(),t("img",zs)):(n(),t("img",Js)),s("div",Ks,[s("div",Zs,o((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(e.pItem.maxPrice,6))),1),s("div",Qs,o((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(e.pItem.maxPrice,6))),1)]),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])]),s("div",{class:ae(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",Xs,o(e.$t("common.liquidity")),1),s("div",Ys," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:r(b))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",xs,[s("div",eo,[s("div",so,[T(s("img",oo,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ao,[s("div",no,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:r(c))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:r(c))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",ro,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:r(z))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",to,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:r(z))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",io,[s("div",lo,[T(s("img",mo,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",uo,[s("div",po,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:r(c))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:r(c))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",vo,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:r(c))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",co,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:r(c))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):y("",!0)],2),s("div",{class:ae(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",ho,o(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(n(),t("div",ko,"$ --")):isNaN(e.pendingFees)?(n(),t("div",bo,[V(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",go,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:r(b))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",Io,[(n(!0),t(Z,null,Q(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",wo,[T(s("img",_o,null,512),[[h,e.getCoinIcon(a)]]),s("span",null,o(a.symbol),1)]),s("div",fo,[s("div",yo,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",Ro,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:r(b))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:r(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",{key:0,class:ae(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",$o,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",Uo," $"+o(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",No,[V(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(n(),t("div",So,[(n(!0),t(Z,null,Q(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",Co,[T(s("img",Po,null,512),[[h,a.logoURI]]),s("span",null,o(a.symbol),1)]),s("div",Ao,[s("div",Oo,o(("decimalUi"in e?e.decimalUi:r(c))(a.amount,a.decimals)),1),s("div",Do,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:r(b))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)],2)):y("",!0)])])])]),s("div",jo,[s("div",{class:"card-header-right",onClick:g[1]||(g[1]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",Lo,[s("p",null,o(e.lever),1),To]),s("div",Bo,[s("p",null,o(e.aprNum)+"%",1),Eo]),Fo]),s("div",Vo,[s("div",Ho,[Go,s("div",qo,o(e.pItem.fee*100)+"%",1)]),s("div",Mo,[s("div",Wo,[te("Price Range ("),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",zo,[s("div",Jo,[s("div",Ko,o(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(n(),t("img",Zo)):(n(),t("img",Qo)),s("div",Xo,o((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(e.pItem.maxPrice,6))),1)])])]),s("div",Yo,[xo,s("div",ea," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:r(b))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",sa,[s("div",oa,[s("div",aa,[T(s("img",na,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ta,[s("div",ra,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:r(c))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:r(c))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",da,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:r(z))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",ia,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:r(z))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",la,[s("div",ma,[T(s("img",ua,null,512),[[h,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",pa,[s("div",ca,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:r(c))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:r(c))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",ha,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:r(c))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",va,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:r(c))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):y("",!0)]),s("div",ka,[ga,e.pendingFees==="--"?(n(),t("div",ba,"$ --")):isNaN(e.pendingFees)?(n(),t("div",wa,[V(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t("div",Ia,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:r(b))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",_a,[(n(!0),t(Z,null,Q(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",fa,[T(s("img",ya,null,512),[[h,e.getCoinIcon(a)]]),s("span",null,o(a.symbol),1)]),s("div",Ra,[s("div",$a,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:r(b))(("decimalUi"in e?e.decimalUi:r(c))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",Ua,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:r(b))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:r(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",Na,[s("div",Sa,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",Ca," $"+o(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",Pa,[V(p,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(n(),t("div",Aa,[(n(!0),t(Z,null,Q(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",Oa,[T(s("img",Da,null,512),[[h,a.logoURI]]),s("span",null,o(a.symbol),1)]),s("div",ja,[s("div",La,o(("decimalUi"in e?e.decimalUi:r(c))(a.amount,a.decimals)),1),s("div",Ta,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:r(b))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):y("",!0)])):y("",!0)])])])}const Ea=ge(bs,[["render",Ba],["__scopeId","data-v-9d8cce4d"]]),Fa=he({setup(){const e=N(!1),{t:g}=ke(),j=N(["position"]),S=$e(),I=N(""),L=we(),R=k(()=>L),p=k(()=>R.value.chainName?Ne[R.value.chainName]:{});let h=N([]);const C=ye(),a=k(()=>C),H=Je(),B=k(()=>H),X=N(!1),G=N(g("tab.all")),Y=N([g("tab.layerZero"),g("tab.wormhole"),g("tab.celer")]),J=N(!0),pe=N("TVL"),re=()=>{e.value=!0,h.value=[],B.value.address&&C.getMyPositons(B.value.address,a.value.poolsObj,R.value.chainName),setTimeout(()=>{e.value=!1},1e3)};W(()=>R.value.isRefresh,d=>{var i;d&&((i=S==null?void 0:S.currentRoute)==null?void 0:i.value.name.split("-")[1])=="position"&&re()}),Ue(()=>{h.value=[],document.addEventListener("click",()=>{X.value=!1}),C.setMyPositionsLoading(!0)}),Xe(()=>{document.addEventListener("click",()=>{X.value=!1})}),Ye(()=>{B.value.connected||(h.value=[])});const x=()=>{e.value=!0;let d=[];a.value.myPositions.forEach(i=>{var O,E,M,F;let m,v;const u=i.amountA*((O=a.value.RATES[i.token_a.address])==null?void 0:O.price),w=i.amountB*((E=a.value.RATES[i.token_b.address])==null?void 0:E.price);(M=a.value.RATES[i.token_a.address])!=null&&M.price&&((F=a.value.RATES[i.token_b.address])!=null&&F.price)?(m=u+w,v=u+w):(m=" --",v=0),d.push({...i,amountUSD:m,amountUSDOrigin:v,tokenARates:u,tokenBRates:w})}),G.value!="All"?J.value?(h.value=d.sort((i,m)=>Number(m.amountUSDOrigin)-Number(i.amountUSDOrigin)),e.value=!1):(h.value=d.sort((i,m)=>Number(i.amountUSDOrigin)-Number(m.amountUSDOrigin)),e.value=!1):J.value?(h.value=d.sort((i,m)=>m.amountUSDOrigin-i.amountUSDOrigin),e.value=!1):(h.value=d.sort((i,m)=>i.amountUSDOrigin-m.amountUSDOrigin),e.value=!1),console.log(h.value,"list.value========>")};W(()=>[a.value.myPositions,a.value.RATES],([d,i])=>{d&&i&&(console.log("0605==>updateLpList9099999"),x())},{immediate:!0}),W(()=>[B.value.address,a.value.poolConfigList,a.value.poolsObj,R.value.chainName],([d,i,m,v])=>{var u,w,O;d&&i&&i.length>0&&v&&(v!=null&&v.toLowerCase().includes((u=i[0])==null?void 0:u.chain))&&!ue(m)&&(v==="Aptos"?i.length===Object.values(m).length:(O=(w=Object.values(m)[0])==null?void 0:w.chain)!=null&&O.includes("sui"))&&(console.log("0605==>getMyPositons9099999"),C.getMyPositons(B.value.address,m,v))},{immediate:!0,deep:!0}),W(()=>G.value,d=>{x()}),W(()=>J.value,d=>{x()});const ee=d=>{const i=[];Y.value.forEach((m,v)=>{m==d?i[v]=G.value:i[v]=m}),Y.value=i,G.value=d},q=ss(),$=k(()=>q),_=k(()=>C),ce=async d=>{await q.getSourceGroups();const i=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let m=0;m<i.length;m++){const{pool_address:v,position_index:u}=JSON.parse(i[m].blockchainAddress);let w=!1,O;for(let E=0;E<d.length;E++){const{poolAddress:M,index:F}=d[E];v==M&&Number(F)==Number(u)&&(w=!0),O={pool_address:v,position_index:u}}w||await q.subscribePosition(O,"",!1,!1)}},_e=async()=>{await q.getSourceGroups();const d=$.value.sourceGroups&&$.value.sourceGroups.length>0&&$.value.sourceGroups[0]&&$.value.sourceGroups[0].sources||[];for(let i=0;i<d.length;i++){const{pool_address:m,position_index:v}=JSON.parse(d[i].blockchainAddress),{name:u}=d[i],w={pool_address:m,position_index:v};await q.subscribePosition(w,u,!1,!1)}},l=k(()=>_.value.myPositionsLoading);W(()=>_.value.myPositions,(d,i)=>{p.value.hasNotifi&&(d&&d.length>0&&i&&i.length!==d.length?ce(d):d&&d.length==0&&!l.value&&_e())},{immediate:!0});const U=d=>{var i;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((i=a.value.tokensObj[d==null?void 0:d.address])==null?void 0:i.logo_url)||(R.value.theme==="default"?ne("/image/coins/unknown.png"):ne("/image/coins/sui-unknown.png"))},P=N(null),A=k(()=>P.value&&P.value.firstToken?P.value.firstToken:null),f=k(()=>P.value&&P.value.lastToken?P.value.lastToken:null),K=k(()=>{let d=[];d=h.value;const i=d.filter((m,v)=>A.value&&f.value?m.coinA.symbol==A.value.symbol&&m.coinB.symbol==f.value.symbol||m.coinA.symbol==f.value.symbol&&m.coinB.symbol==A.value.symbol:A.value?m.coinA.symbol.toLowerCase().includes(A.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(A.value.symbol.toLowerCase()):f.value?m.coinA.symbol.toLowerCase().includes(f.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(f.value.symbol.toLowerCase()):d);return a.value.myPositionsLoading||L.setPositiomAmount(i.length),i});return xe(()=>{L.setPositiomAmount("--")}),{showList:K,childTokenSelectRef:P,firstToken:A,lastToken:f,getCoinIcon:U,changeSortLabel:ee,label:X,labelList:Y,labelValue:G,select:J,selectValue:pe,t:g,pools:a,store:R,wallet:B,list:h,clickRefresh:re,refresh:e,current:j,router:S,searchKey:I}}});const Oe=e=>(be("data-v-fcdc0535"),e=e(),Ie(),e),Va={class:"upgrade-position-list-container"},Ha={class:"content-top"},Ga={class:"content-top-left"},qa={class:"content-top-right"},Ma={class:"value"},Wa=Oe(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),za=[Wa],Ja={key:0,class:"select-item"},Ka=["onClick"],Za={class:"search-select-box"},Qa=Oe(()=>s("span",null,"TVL",-1)),Xa={key:0,src:Pe,alt:""},Ya={key:1,class:"fan-img",src:Pe,alt:""},xa={key:0,class:"upgrade-loading"},en={key:1,class:"position-list"},sn={key:2,class:"no-data"},on={key:0,src:os,alt:""},an={key:1,src:as,alt:""},nn={key:3,class:"no-data"},tn={key:0,src:ns,alt:""},rn={key:1,src:ts,alt:""};function dn(e,g,j,S,I,L){const R=Fe,p=Ve,h=Ea,C=es;return n(),t("div",Va,[s("div",Ha,[s("div",Ga,[V(R,{ref:"childTokenSelectRef"},null,512)]),s("div",qa,[e.store.theme=="default"?(n(),t("div",{key:0,class:"search-label",onClick:g[0]||(g[0]=fe(a=>e.label=!e.label,["stop"]))},[s("span",null,o(e.$t("newAdd.label")),1),s("div",Ma,o(e.labelValue),1),(n(),t("svg",{"aria-hidden":"true",class:ae(e.label?"show-icon icon":"icon")},za,2)),e.label?(n(),t("div",Ja,[(n(!0),t(Z,null,Q(e.labelList,(a,H)=>(n(),t("div",{key:H,class:"select-menu-item",onClick:B=>e.changeSortLabel(a)},o(a),9,Ka))),128))])):y("",!0)])):y("",!0),s("div",Za,[s("div",{class:"search-select",onClick:g[1]||(g[1]=fe(a=>e.select=!e.select,["stop"]))},[te(o(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[Qa,e.select?(n(),t("img",Xa)):(n(),t("img",Ya))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",xa,[V(p,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):y("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),t("div",en,[(n(!0),t(Z,null,Q(e.showList,(a,H)=>(n(),Re(h,{key:H,"p-item":a},null,8,["p-item"]))),128))])):y("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",sn,[e.store.theme=="default"?(n(),t("img",on)):(n(),t("img",an)),s("span",null,o(e.$t("common.noLiquidityPositions")),1)])):y("",!0),e.wallet.connected?y("",!0):(n(),t("div",nn,[e.store.theme=="default"?(n(),t("img",tn)):(n(),t("img",rn)),V(C,{class:"connect-wallet",onClick:g[2]||(g[2]=a=>e.wallet.setIsShowWalletModal(!0))},{default:ve(()=>[te(o(e.$t("button.connectWallet")),1)]),_:1})]))])}const Sn=ge(Fa,[["render",dn],["__scopeId","data-v-fcdc0535"]]);export{Sn as default};
