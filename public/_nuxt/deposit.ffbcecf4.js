import{g as ai,n as St,d as ce,a as Fe,c as se,b as Tt,s as oi,p as Bt}from"./common.831588b7.js";import{a as at,r as R,m as h,q as Ht,A as Ie,e as ot,o as M,f as Z,I as Et,M as ri,h as r,N as It,x as J,u as ae,G as Y,c as Ze,p as Lt,k as qt,O as Xt,i as Re,w as Ve,j as xe,P as Mt,z as Dt,L as $t,s as Wt,C as si,F as At,E as Ut,y as wt,Y as li,a0 as ui,b as ci,B as di}from"./entry.81366e87.js";/* empty css              */import{s as gt,m as mi,l as vi,b as fi,a as gi}from"./transform.c672907f.js";import"./decimal.a2826370.js";import{u as mt,b as Ft,a as Rt}from"./index.ab348efd.js";import{D as o}from"./decimal.765d8738.js";/* empty css              */import{a as Zt,_ as pi}from"./new-liquidity-price.33d35653.js";import{i as Nt}from"./import-icon.de3e6c66.js";/* empty css              */import{T as pt,g as bi,u as hi,b as ze}from"./index.3a5cc2eb.js";import{positionError as nt,fromCoin as _,toCoin as p,tickList as it,currentPrice as dt,currentPriceReverse as bt,direction as ye,currentPriceTab as W,defaultMinPrice as Ct,defaultMaxPrice as Pt,minPrice as q,maxPrice as b,toggle as Gt,isStableFarmingRange as Ue,isInputTotalAmount as Ee,priceConfigObj as Qe,fromCoinAmount as S,toCoinAmount as T,fixedFromCoin as Te,resetTickList as jt,resetData as ki}from"./data.549a6bbd.js";import{u as ht}from"./farms.27d4390e.js";import{_ as Jt}from"./icon_farms_2x.982166c0.js";import{_ as Kt,b as Yt,a as Qt}from"./new-liquidity-title.aa61684f.js";import{_ as yi}from"./coin-lock.32f742c6.js";import{_ as _i}from"./coin-select.b267728e.js";import{_ as wi}from"./viewDetail.e2b63460.js";import{_ as Ci}from"./new-add-or-create.c9d8a0ac.js";import{u as Pi}from"./notifi.06c83939.js";import{_ as Si,a as Ti}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./lock.35e1d915.js";import"./index.ca5a11a6.js";/* empty css              */import"./token-warning.f7842a11.js";import"./useDebounceFunction.838360ca.js";import"./swap-setting.ac3e2f84.js";import"./icon-error_2x.60df6f3d.js";import"./img-lock_2x.d3e454d6.js";import"./icon-tooltip.ffac3883.js";import"./token-warning_2x.693cfdde.js";import"./img-no-Positions_2x.1fae9d60.js";import"./img-no-Positions_2x.1a66920c.js";import"./status-block.8c47b717.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./deposit-ratio.748950b7.js";import"./useWhale.fdd57c64.js";function zt(e,l,de){const oe=new o(10).pow(l-de);return new o(1.0001).pow(e).mul(oe)}const Ii=at({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,l){const de=R(""),oe=R(""),$=h(()=>{var a,C,m,X,U,te;return(a=e.poolInfo)!=null&&a.current_sqrt_price&&((C=e.poolInfo)!=null&&C.coinA)&&((m=e.poolInfo)!=null&&m.coinB)?n.sqrtPriceX64ToPrice((X=e.poolInfo)==null?void 0:X.current_sqrt_price,(U=e.poolInfo)==null?void 0:U.coinA.decimals,(te=e.poolInfo)==null?void 0:te.coinB.decimals).toString():"0"}),le=h(()=>{let a=0;return e.direction?a=(Number(e.minPrice)/Number($.value)-1)*100:a=(Number(e.minPrice)/Number(1/Number($.value))-1)*100,a=a>0&&a<.1?.1:a,a=a<0&&a>-.1?-.1:a,a}),L=h(()=>{let a=0;return e.direction?a=(Number(e.maxPrice)/Number($.value)-1)*100:a=(Number(e.maxPrice)/Number(1/Number($.value))-1)*100,a=a>0&&a<.1?.1:a,a=a<0&&a>-.1?-.1:a,a}),B=mt(),I=h(()=>B),Q=h(()=>I.value.chainName?Ft(I.value.chainName):{}),{TickMath:n,getNearestTickByTick:A}=Q.value,E=(a=[])=>{let C=6;const m=Math.abs(Number(a[0])-Number(a[a.length-1]));return m>=6?C=0:m>=1?C=1:m>=.1?C=2:m>=.01?C=3:m>=.001?C=4:m>=1e-4?C=5:m>=1e-5?C=6:m>=1e-6?C=7:m>=1e-7&&(C=8),C},x=(a,C=1)=>{if(a&&a.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const m=Number(e.poolInfo.current_tick_index);let X=m+100*C,U=m-100*C,te,k;if(e.maxPrice==="âˆž")k=Q.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?k=n.priceToTickIndex(new o(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):k=n.priceToTickIndex(new o(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{k=443636}if(e.minPrice==="0")te=Q.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?te=n.priceToTickIndex(new o(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):te=n.priceToTickIndex(new o(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{te=-443636}let Ce=0;if(e.currentPriceTab!=="full range"){if(m>=te&&m<=k){const N=m-te,me=k-m;Ce=Math.max(Math.abs(N),Math.abs(me))}else m<te?Ce=Math.abs(k-m):Ce=Math.abs(m-te);X=m+Ce+100*C,U=m-Ce-100*C}else{const N=(Math.abs(m)>5e3,2e4);X=m+N*C,U=m-N*C}U<-443636&&(U=-443636),X>443636&&(X=443636);const f=new o(a.liquidity).div(Math.pow(10,8)).toString(),O=e.tickList,z=[],Pe=[];let w={};for(let N=0;N<O.length;N++){if(w=O[N],w.index<=m&&w.index>=U){if(z.length<1&&N!==0){const me=O[N-1];z.unshift({...me,index:U,source:"left"})}z.unshift(w)}else if(w.index>m&&w.index<=X&&(Pe.push(w),z.length<1&&N!==0)){const me=O[N-1];z.push({...me,index:U,source:"left"})}if(w.index>X){const me=O[N];if(Pe.push({...me,index:X,source:"right"}),z.length<1&&N!==0){const Je=O[N-1];z.push({...Je,index:U,source:"left"})}break}}let j="0";for(let N=z.length-1;N>=0;N--)j=new o(j).plus(new o(z[N].liquidityNet.toString()).div(Math.pow(10,8))).toString(),z[N].liquityAmount=j;let ie=f;for(let N=0;N<Pe.length;N++)ie=new o(ie).plus(new o(Pe[N].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Pe[N].liquityAmount=ie;let ue=[];const H=O&&O.length>0?{index:m,liquityAmount:Number(f)}:{index:m,liquityAmount:0};(z.length>0||Pe.length>0)&&(ue=[...z.reverse(),H,...Pe],e.direction||(ue=ue.reverse()));const He=[];O.forEach(N=>{He.push({...N,liquidityGross:N.liquidityGross.toString(),liquidityNet:N.liquidityNet.toString()})}),v(ue,U,X,te,k,m)}};let be=R(!1);const V=R(!1);Ht(()=>{const a=document.body.clientWidth;V.value=!0,a<750?be.value=!1:be.value=!0,window.onresize=()=>{document.body.clientWidth<750?be.value=!1:be.value=!0,x(e.poolInfo,e.zoom)}});const v=(a,C,m,X,U,te)=>{let k,Ce;e.direction?(k=Number(e.before7dContractPriceLowest)!==0?n.priceToTickIndex(new o(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",Ce=Number(e.before7dContractPriceHighest)!==0?n.priceToTickIndex(new o(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(k=Number(e.before7dContractPriceLowest)!==0?n.priceToTickIndex(new o(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",Ce=Number(e.before7dContractPriceHighest)!==0?n.priceToTickIndex(new o(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const f={top:30,right:35,bottom:20,left:80};let O,z;be.value?(O=460-f.left-f.right,z=205-f.top-f.bottom):(O=340-f.left-f.right,z=205-f.top-f.bottom);const Pe=m-C,w=parseInt(String(Pe/4));let j=[C+w/4,C+w,C+2*w,m-w,m-w/4];const ie=C,ue=m,H=O/(ue-ie);e.currentPriceTab==="full range"&&(j=[C,C+2*w,m]);const He=j.map(s=>e.direction?zt(s,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new o(1).div(zt(s,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),N=E(He);gt("#chart").selectAll("*").remove();const me=gt("#chart").attr("width",O+f.left+f.right).attr("height",z+f.top+f.bottom).append("g").attr("transform",`translate(${f.left},${f.right})`),Je=mi(a,function(s){return Number(Math.abs(s.liquityAmount))})||0,qe=vi().range([0,z]).domain([Je,0]);fi().rangeRound([0,O]).padding(.1);const et=me.append("g").attr("id","barsBox").selectAll("rect").data(a).enter().append("rect");I.value.theme=="default"?et.attr("x",function(s,d){return d===0?0:e.direction?Math.abs(s.index-ie)*H:Math.abs(ue-s.index)*H}).attr("y",function(s,d){return e.direction?d===a.length-1?0:qe(s.liquityAmount):d===a.length-1?0:qe(a[d+1].liquityAmount)}).attr("width",function(s,d){return d===0&&a.length===1&&s.liquityAmount>0?O:(e.direction,d!==a.length-1?Math.abs(a[d+1].index-s.index)*H:0)}).attr("height",function(s,d){return d===0&&a.length===1&&s.liquityAmount>0?z:e.direction?d===a.length-1?0:z-qe(s.liquityAmount):d===a.length-1?0:z-qe(a[d+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):et.attr("x",function(s,d){return d===0?0:e.direction?Math.abs(s.index-ie)*H:Math.abs(ue-s.index)*H}).attr("y",function(s,d){return e.direction?d===a.length-1?0:qe(Math.abs(s.liquityAmount)):d===a.length-1?0:qe(Math.abs(a[d+1].liquityAmount))}).attr("width",function(s,d){return d===0&&a.length===1&&s.liquityAmount>0?O:(e.direction,d!==a.length-1?Math.abs(a[d+1].index-s.index)*H:0)}).attr("height",function(s,d){if(d===0&&a.length===1&&s.liquityAmount>0)return z;if(e.direction)return d===a.length-1?0:Number(s.liquityAmount)?z-qe(Math.abs(s.liquityAmount)):0;{if(d===a.length-1)return 0;const Le=z-qe(Math.abs(a[d+1].liquityAmount));return Number(a[d+1].liquityAmount)?Le:0}}).attr("fill",function(s,d){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(s,d){return"#417494"});const Ke=me.append("g");Ke.append("line").attr("x1",0).attr("y1",155).attr("x2",O).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const Ye=Ke.append("g");let K=0;if(e.direction){for(let s=0;s<j.length;s++){const d=ce(He[s],N)||"0";He.push(d);const Le=Math.abs(j[s]-ie)*H;let G=0;for(let ee=0;ee<d.length;ee++)d[ee]==="1"?G+=4.02:d[ee]==="."?G+=2.64:d[ee]==="7"?G+=5.48:G+=6;Ye.append("text").text(d).attr("x",Le-G/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}K=Math.abs(te-ie)*H}else{for(let s=j.length-1;s>=0;s--){const d=ce(He[s],N)||0;He.push(d);const Le=Math.abs(j[s]-ue)*H;let G=0;for(let ee=0;ee<d.length;ee++)d[ee]==="1"?G+=4.02:d[ee]==="."?G+=2.64:d[ee]==="7"?G+=5.48:G+=6;Ye.append("text").text(d).attr("x",Le-G/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}K=Math.abs(te-ue)*H}(I.value.theme=="default"?me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+K+", 0)");let Ae,t,c,P;e.direction?(Ae=X<ie?-100:parseInt(String(Math.abs(X-ie)*H)),t=U<ie?-100:parseInt(String(Math.abs(U-ie)*H)),c=k<ie?-100:Math.abs(k-ie)*H,P=Ce<ie?-100:Math.abs(Ce-ie)*H):(t=X<ie?-100:Math.abs(ue-X)*H,Ae=U<ie?-100:Math.abs(ue-U)*H,P=k>ue?-100:Math.abs(ue-k)*H,c=Ce>ue?-100:Math.abs(ue-Ce)*H),e.minPrice==="0"&&(Ae=0),e.maxPrice==="âˆž"&&(t=O),be.value?de.value=O-Ae+94+"px":de.value=O-Ae+87+"px",oe.value=t+98+"px",k&&c<O&&me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+c+", 0)"),Ce&&P<O&&me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+P+", 0)");const y=me.append("g").attr("id","left-handle"),F=me.append("g").attr("id","right-handle");I.value.theme=="default"?(y.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),y.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#23252C").attr("stroke","#23252C").attr("transform","translate(-1, 20) rotate(180)"),y.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),y.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),F.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),F.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#23252C").attr("stroke","#23252C").attr("transform","translate(1, 0)"),F.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),F.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(y.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),y.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#23252C").attr("stroke","#23252C").attr("transform","translate(-1, 24) rotate(180)"),y.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),y.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),F.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),F.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#23252C").attr("stroke","#23252C").attr("transform","translate(1, 0)"),F.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),F.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),y.attr("transform","translate("+Ae+", 0)"),F.attr("transform","translate("+t+", 0)");const ve=gi().extent([[0,0],[O,z]]).handleSize(30).on("end",Ne);me.append("g").attr("class","brush").call(ve).call(ve.move,[Ae,t]);function Ne(s){if(!s.sourceEvent||!s.selection)return;y.attr("transform","translate("+s.selection[0]+", 0)"),F.attr("transform","translate("+s.selection[1]+", 0)"),be.value,de.value=O-s.selection[0]+87+"px",oe.value=s.selection[1]+74+"px";let d,Le,G=0,ee=0;e.direction?(G=A(parseInt(String(s.selection[0]/H+ie)),Number(e.poolInfo.tickSpacing)),d=n.tickIndexToPrice(G,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ee=A(parseInt(String(s.selection[1]/H+ie)),Number(e.poolInfo.tickSpacing)),Le=n.tickIndexToPrice(ee,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()):(ee=A(ue-s.selection[0]/H,Number(e.poolInfo.tickSpacing)),d=1/n.tickIndexToPrice(ee,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),G=A(ue-s.selection[1]/H,Number(e.poolInfo.tickSpacing)),Le=1/n.tickIndexToPrice(G,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),l.emit("onChangeMinPrice",String(ce(String(d),6))),l.emit("onChangeMaxPrice",String(ce(String(Le),6)))}I.value.theme=="default"?gt(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):gt(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};return R(""),Ie(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([a,C,m,X,U,te])=>{a&&C&&m&&(a!=null&&a.liquidity)&&x(a,U)},{immediate:!0}),{store:I,loading:V,rangeSizeLower:le,rangeSizeUpper:L,rangeSizeLowerPosition:de,rangeSizeUpperPosition:oe,decimalFormat:ai,numberformat:St}}});const Ai=e=>(Lt("data-v-85e63e79"),e=e(),qt(),e),Ni={class:"chart-box"},Li={class:"chart"},qi=Ai(()=>r("svg",{id:"chart"},null,-1));function Mi(e,l,de,oe,$,le){const L=Xt;return M(),Z("div",Ni,[Et(r("div",Li,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(M(),Z("div",{key:0,class:"range-size range-size-lower",style:It({right:e.rangeSizeLowerPosition})},J(("numberformat"in e?e.numberformat:ae(St))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):Y("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(M(),Z("div",{key:1,class:"range-size range-size-upper",style:It({left:e.rangeSizeUpperPosition})},J(("numberformat"in e?e.numberformat:ae(St))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):Y("",!0),qi],512),[[ri,!e.chartLoading]]),e.chartLoading?(M(),Ze(L,{key:0})):Y("",!0)])}const xt=ot(Ii,[["render",Mi],["__scopeId","data-v-85e63e79"]]),$i=at({props:{lever:{type:String,default:""}},setup(){return{}}});const Fi=e=>(Lt("data-v-f768fa23"),e=e(),qt(),e),Ri={class:"lever"},Oi=Fi(()=>r("div",{class:"lever-title"},[r("span",null,"Leverage"),r("svg",{"aria-hidden":"true",class:"icon"},[r("use",{"xlink:href":"#icon-icon-tips1"})])],-1)),Bi={class:"lever-text"};function Ui(e,l,de,oe,$,le){const L=Mt;return M(),Z("div",Ri,[Re(L,{"overlay-class-name":"lever-tooltip"},{title:Ve(()=>[xe("This parameter indicates the concentration rate of your liquidity relative to a full range position.")]),default:Ve(()=>[Oi]),_:1}),r("div",Bi,J(e.lever),1)])}const ji=ot($i,[["render",Ui],["__scopeId","data-v-f768fa23"]]),zi=at({components:{NewLiquidityD3Chart:xt,NewLiquidityPrice:Zt},setup(){const{t:e,locale:l}=Dt(),de=R("liquidity"),oe=mt(),$=h(()=>oe),le=h(()=>$.value.chainName),L=Rt(),B=h(()=>L),I=h(()=>$.value.chainName?Ft($.value.chainName):{});Ht(()=>{nt.value=!1});const Q=$t(),n=h(()=>{let t=null;for(let c=0;c<B.value.poolConfigList.length;c++){const P=B.value.poolConfigList[c];P.address==Q.query.poolAddress&&(t=P)}return t}),A=h(()=>{let t=null;console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-left.vue:481 ~ constpoolInfo:any=computed ~ pools.value.poolsObj:",B.value.poolsObj);for(const c in B.value.poolsObj){const P=B.value.poolsObj[c];P.address==Q.query.poolAddress&&(t=P)}return t}),E=R(),x=R(!0),be=async(t,c)=>{var P,y,F,ve,Ne,s,d,Le,G,ee,lt,ut;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-left.vue:497 ~ watchPoolInfo ~ pool:",t),t&&(_.value=t.needReverse?t.token_b:t.token_a,p.value=t.needReverse?t.token_a:t.token_b),c&&t.current_tick_index){x.value=!0,it.value=[],v.value=[],Ue.value=!1;const tt=t.token_a.decimals,ct=t.token_b.decimals;dt.value=pt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((P=t==null?void 0:t.object)==null?void 0:P.current_sqrt_price),tt,ct).toString(),bt.value=new o(1).div(pt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((y=t==null?void 0:t.object)==null?void 0:y.current_sqrt_price),tt,ct)).toString(),E.value=t.needReverse,((ve=(F=t==null?void 0:t.token_a)==null?void 0:F.address)==null?void 0:ve.toLowerCase())===((d=(s=(Ne=_)==null?void 0:Ne.value)==null?void 0:s.address)==null?void 0:d.toLowerCase())&&((G=(Le=t==null?void 0:t.token_b)==null?void 0:Le.address)==null?void 0:G.toLowerCase())===((ut=(lt=(ee=p)==null?void 0:ee.value)==null?void 0:lt.address)==null?void 0:ut.toLowerCase())?ye.value=!0:ye.value=!1;let kt={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const{list:vt,address:yt}=await I.value.getTicks(kt);it.value=vt&&yt==t.address?I.value.getTickDataFromUrlData(vt):[],t!=null&&t.current_tick_index&&(C(t),x.value=!1)}},V=t=>{var y,F;const c=t.token_a.decimals,P=t.token_b.decimals;dt.value=pt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((y=t==null?void 0:t.object)==null?void 0:y.current_sqrt_price),c,P).toString(),bt.value=new o(1).div(pt.sqrtPriceX64ToPrice((t==null?void 0:t.current_sqrt_price)||((F=t==null?void 0:t.object)==null?void 0:F.current_sqrt_price),c,P)).toString()},v=R([]),a=R(),C=async t=>{const c=t.token_a.decimals,P=t.token_b.decimals;let y=B.value.poolPriceConfigObj&&B.value.poolPriceConfigObj[t.address]&&B.value.poolPriceConfigObj[t.address].recommend_ranges||{};const F=B.value.poolPriceConfigObj&&B.value.poolPriceConfigObj[t.address]&&B.value.poolPriceConfigObj[t.address].type||"";let ve,Ne;const s=bi(t.current_tick_index,t.tickSpacing);a.value=t.current_tick_index,ve=s-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),Ne=s+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const d=I.value.TickMath.tickIndexToPrice(ve,c,P).toString(),Le=I.value.TickMath.tickIndexToPrice(Ne,c,P).toString();y["full range"]={lower:I.value.TickUtil.getMinIndex(Number(A.value.tickSpacing)),upper:I.value.TickUtil.getMaxIndex(Number(A.value.tickSpacing))},y.custom={lower:ve,upper:Ne,minPrice:d,maxPrice:Le};const G=[];for(let ee in y)y[ee]&&G.push({...y[ee],key:ee});F&&G&&G.length>2?t.isSelfBuilt?W.value="custom":F=="stable"?W.value="suggested":W.value="passive":W.value="custom",v.value=G||{},Qe.value=y,U({key:W.value,...y[W.value]})},m=R(""),X=R(""),U=t=>{W.value=t.key.toLowerCase();const c=A.value.token_a.decimals,P=A.value.token_b.decimals,{lower:y,upper:F}=t;Ee.value=!1;const ve=I.value.TickMath.tickIndexToPrice(y,c,P).toString(),Ne=I.value.TickMath.tickIndexToPrice(F,c,P).toString();if(t.key=="full range"){m.value=y,X.value=F,te();return}ye.value?(Ct.value=String(ve),q.value=String(ve),Pt.value=String(Ne),b.value=String(Ne),m.value=y,X.value=F):(Ct.value=new o(1).div(new o(Ne)).toString(),q.value=new o(1).div(new o(Ne)).toString(),Pt.value=new o(1).div(new o(ve)).toString(),b.value=new o(1).div(new o(ve)).toString(),m.value=I.value.TickMath.priceToTickIndex(new o(1/Number(Ne)),c,P),X.value=I.value.TickMath.priceToTickIndex(new o(1/Number(ve)),c,P))},te=t=>{q.value="0",b.value="âˆž"};Ie(()=>A.value,(t,c)=>{(!c&&t&&!se(t)||c&&t&&(!(c!=null&&c.current_tick_index)||(c==null?void 0:c.address)!==(t==null?void 0:t.address)))&&be(t,!c||!(c!=null&&c.current_tick_index)||(c==null?void 0:c.address)!==(t==null?void 0:t.address)),t&&!se(t)&&V(t),t||(it.value=[])},{immediate:!0}),Wt(()=>{_.value=R(),p.value=R(),it.value=[]}),Ie(()=>n.value,(t,c)=>{t&&L.setSinglePool(t,{},le.value)},{immediate:!0});const k=t=>{if(le.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},Ce=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},f=t=>{var P,y;const c=B.value.poolPriceConfigObj&&B.value.poolPriceConfigObj[(P=A.value)==null?void 0:P.address]&&B.value.poolPriceConfigObj[(y=A.value)==null?void 0:y.address].type||"";if(v.value.length>2)if(c=="unstable")switch(t){case"active":return{top:"38%"};case"passive":return{top:"13%"};case"full range":return{top:"63%"};case"custom":return{top:"87%"}}else switch(t){case"suggested":return{top:"25%"};case"full range":return{top:"49%"};case"custom":return{top:"75%"}}else if(c=="unstable")switch(t){case"active":return{top:"38%"};case"passive":return{top:"13%"};case"full range":return{top:"63%"};case"custom":return{top:"87%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},O=R(1),z=()=>{const t=O.value/2;O.value=t},Pe=()=>{const t=O.value*2;O.value=t},w=h(()=>{var t,c,P;return!A.value||se($.value.addressHistTokens)||!$.value.addressHistTokens[(t=A.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((P=$.value.addressHistTokens[(c=A.value)==null?void 0:c.poolAddress])==null?void 0:P.data.map(y=>[y.key,y.value]))}),j=R(30),ie=R("30D"),ue=h(()=>ye.value?w.value&&ce(j.value==7?w.value.before_7_d_contract_price_lowest:j.value==24?w.value.before_24_h_contract_price_lowest:w.value.before_30_d_contract_price_lowest,6)||0:w.value&&ce(new o(1).div(j.value==7?w.value.before_7_d_contract_price_highest:j.value==24?w.value.before_24_h_contract_price_highest:w.value.before_30_d_contract_price_highest).toString(),6)||0),H=h(()=>ye.value?w.value&&ce(j.value==7?w.value.before_7_d_contract_price_highest:j.value==24?w.value.before_24_h_contract_price_highest:w.value.before_30_d_contract_price_highest,6)||0:(w.value&&ce(1/Number(j.value==7?w.value.before_7_d_contract_price_lowest:j.value==24?w.value.before_24_h_contract_price_lowest:w.value.before_30_d_contract_price_lowest),6))==1/0?0:w.value&&ce(1/Number(j.value==7?w.value.before_7_d_contract_price_lowest:j.value==24?w.value.before_24_h_contract_price_lowest:w.value.before_30_d_contract_price_lowest),6)||0),He=h(()=>{const t=Number(q.value),c=Number(b.value);if(q.value=="0"&&b.value=="âˆž"||W.value=="full range")return"1x";if(q.value==b.value||W.value=="full range")return"--";if(q.value&&b.value&&q.value!=="0"&&b.value!=="âˆž"){const P=Tt(1/(1-Number((t/c)**.25)),2);return Number(P)>0?P+"x":"--"}else return 1}),N=h(()=>{var t,c,P,y,F,ve;return((t=_.value)==null?void 0:t.isSelfBuilt)||((c=p.value)==null?void 0:c.isSelfBuilt)||((y=B.value.tokensObj[(P=_.value)==null?void 0:P.address])==null?void 0:y.isSelfBuilt)||((ve=B.value.tokensObj[(F=p.value)==null?void 0:F.address])==null?void 0:ve.isSelfBuilt)}),me=(t,c)=>{t!==q.value&&W.value=="full range"?U({key:"custom",...v.value.custom}):W.value!=="full range"&&W.value!=="custom"?(W.value="custom",q.value=t):q.value=t,K.value&&(Ue.value?(ye.value&&q.value!==K.value.minPrice&&(Ue.value=!1),!ye.value&&Number(q.value)!==1/Number(K.value.maxPrice)&&(Ue.value=!1)):(ye.value&&q.value==K.value.minPrice&&b.value==K.value.maxPrice&&(Ue.value=!0),!ye.value&&Number(q.value)==1/Number(K.value.maxPrice)&&Number(b.value)==1/Number(K.value.minPrice)&&(Ue.value=!0)))},Je=(t,c)=>{t!==b.value&&W.value=="full range"?U({key:"custom",...v.value.custom}):W.value!=="full range"&&W.value!=="custom"?(W.value="custom",t=="0"?b.value="âˆž":b.value=t):t=="0"?b.value="âˆž":b.value=t,K.value&&(Ue.value?(ye.value&&b.value!==K.value.maxPrice&&(Ue.value=!1),!ye.value&&Number(b.value)!==1/Number(K.value.minPrice)&&(Ue.value=!1)):(ye.value&&q.value==K.value.minPrice&&b.value==K.value.maxPrice&&(Ue.value=!0),!ye.value&&Number(q.value)==1/Number(K.value.maxPrice)&&Number(b.value)==1/Number(K.value.minPrice)&&(Ue.value=!0)))},qe=t=>{var c;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-left.vue:1215 ~ getCoinIcon ~ info:",t),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((c=B.value.tokensObj[t==null?void 0:t.address])==null?void 0:c.logo_url)||($.value.theme==="default"?Nt("/image/coins/unknown.png"):Nt("/image/coins/sui-unknown.png"))},rt=t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},et=[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}],Ke=ht(),Ye=h(()=>Ke),K=h(()=>{var t;return Ye.value.farmsPoolObj[(t=A==null?void 0:A.value)==null?void 0:t.address]}),st=h(()=>B.value.poolPriceConfigObj);Ie(()=>[Ue.value,A.value,v.value,st.value,K.value,ye.value],(t,c)=>{var P,y;if(t[0]&&t[4]&&!se(t[4]))W.value="custom",q.value=t[5]?t[4].minPrice:String(1/t[4].maxPrice),b.value=t[5]?t[4].maxPrice:String(1/t[4].minPrice);else if(t[1]&&!se(t[1])&&t[2]&&!se(t[2])&&t[3]&&!se(t[3])&&t[4]&&!se(t[4])){t[3]&&t[3][(P=t[1])==null?void 0:P.address]&&t[3][(y=t[1])==null?void 0:y.address].type;const F=t[2].filter(ve=>ve.key===(t[2].length==4?"passive":"suggested"));F!=null&&F[0]&&(!c||c[0]!==t[0])&&U({...F[0]})}},{immediate:!0});const Ae=h(()=>B.value.poolsLoading);return{positionError:nt,getCoinIcon:qe,chainName:le,store:$,currentTab:de,currentPrice:dt,currentPriceReverse:bt,fromCoin:_,toCoin:p,direction:ye,needReverse:E,addCommom:Fe,decimalUi:ce,priceTablList:v,currentPriceTab:W,sliderStyle:f,poolInfo:A,tickList:it,getPriceTabImage:k,getPriceTabText:Ce,defaultMinPrice:Ct,defaultMaxPrice:Pt,minPrice:q,maxPrice:b,currentTick:a,chartLoading:x,zoomOut:z,zoomIn:Pe,zoom:O,priceTab:U,before7dContractPriceLowest:ue,before7dContractPriceHighest:H,aprRewardsTime:ie,lever:He,aprRewardsParameter:j,isSelfBuilt:N,priceRangeChangeMin:me,priceRangeChangeMax:Je,toggle:Gt,getPirceTabTips:rt,timeList:et,farmsPoolInfo:K,checkNullObj:se,isStableFarmingRange:Ue,poolsLoading:Ae}}});const Hi={class:"new-liquidity-left"},Ei=r("span",{class:"selectRange"},"Select Range",-1),Xi={class:"price-info"},Di={class:"left"},Wi={class:"base-coin"},Zi={class:"base-coin-title"},Gi=r("span",null,"Base coin",-1),Ji=r("svg",{class:"icon icon-up","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_up1"})],-1),Ki=r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_down1"})],-1),Yi=[Ji,Ki],Qi={class:"base-coin-bottom"},xi={alt:""},Vi={class:"current-price"},en=r("div",{class:"current-price-title"},"Current Price",-1),tn={key:0,class:"from-pre-to"},nn={class:"right"},an={class:"price-range"},on={class:"left"},rn={class:"price-slider"},sn={class:"slider"},ln=r("div",{class:"slider-ratio-content"},null,-1),un=[ln],cn={class:"price-tab-list"},dn=["onClick"],mn=["src"],vn={class:"right"},fn={class:"price-zoom"},gn={class:"current-price"},pn=r("div",{class:"current-price-title"},"Current Price",-1),bn={key:0,class:"from-pre-to"},hn={class:"price-zoom-right"},kn={class:"leverage"},yn=r("div",{class:"left"},null,-1),_n={class:"right"},wn={class:"right-time"},Cn={key:0,class:"day-7-price-range"},Pn=r("i",null,null,-1),Sn={class:"gray"},Tn={class:"time-list"},In=["onClick"],An={class:"right-price-h5"},Nn={class:"range pc-range"},Ln={key:0,class:"stable-farming-range pc-stable-farming-range"},qn=r("img",{src:Jt},null,-1),Mn={class:"check-box-active"},$n={key:1,class:"stable-farming-range h5-stable-farming-range"},Fn=r("span",null,[r("img",{src:Jt}),xe(" Farm rewards rangeï¼š ")],-1),Rn={class:"check-box-active"},On={key:2,class:"position-tips"},Bn=["src"],Un={class:"error"};function jn(e,l,de,oe,$,le){var E,x,be,V,v,a,C,m,X,U,te;const L=Mt,B=xt,I=ji,Q=li,n=Zt,A=si("image");return M(),Z("div",Hi,[Ei,r("div",Xi,[r("div",Di,[r("div",Wi,[r("div",Zi,[Gi,r("div",{class:"change-price",onClick:l[0]||(l[0]=(...k)=>e.toggle&&e.toggle(...k))},Yi)]),r("div",Qi,[Et(r("img",xi,null,512),[[A,e.getCoinIcon(e.fromCoin)]]),r("span",null,J((E=e.fromCoin)==null?void 0:E.symbol),1)])]),r("div",Vi,[en,r("div",null,[r("span",null,J(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(ce))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(ce))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(M(),Z("span",tn,J((x=e.toCoin)==null?void 0:x.symbol)+" per "+J((be=e.fromCoin)==null?void 0:be.symbol),1)):Y("",!0)])])]),r("div",nn,[e.currentTab=="liquidity"?(M(),Z("div",{key:0,class:"zoom-out",onClick:l[1]||(l[1]=(...k)=>e.zoomOut&&e.zoomOut(...k))}," + ")):Y("",!0),e.currentTab=="liquidity"?(M(),Z("div",{key:1,class:"zoom-in",onClick:l[2]||(l[2]=(...k)=>e.zoomIn&&e.zoomIn(...k))}," - ")):Y("",!0)])]),r("div",an,[r("div",on,[r("div",rn,[r("div",sn,[r("div",{class:"slider-ratio",style:It(e.sliderStyle(e.currentPriceTab))},un,4)])]),r("div",cn,[(M(!0),Z(At,null,Ut(e.priceTablList,k=>(M(),Z("div",{key:k.key,class:wt(["price-tab-item",e.currentPriceTab==k.key?"price-tab-item-active":""]),onClick:Ce=>e.priceTab(k)},[Re(L,{placement:"bottom","arrow-point-at-center":""},{title:Ve(()=>[xe(J(e.getPirceTabTips(k.key)),1)]),default:Ve(()=>[r("img",{src:e.getPriceTabImage(k.key),alt:""},null,8,mn),r("span",null,J(e.getPriceTabText(k.key)),1)]),_:2},1024)],10,dn))),128))])]),r("div",vn,[r("div",fn,[r("div",gn,[pn,r("div",null,[r("span",null,J(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(ce))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(ce))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(M(),Z("span",bn,J(e.direction&&!e.needReverse?`${(V=e.fromCoin)==null?void 0:V.symbol} per ${(v=e.toCoin)==null?void 0:v.symbol}`:`${(a=e.toCoin)==null?void 0:a.symbol} per ${(C=e.fromCoin)==null?void 0:C.symbol}`),1)):Y("",!0)])]),r("div",hn,[e.currentTab=="liquidity"?(M(),Z("div",{key:0,class:"zoom-out",onClick:l[3]||(l[3]=(...k)=>e.zoomOut&&e.zoomOut(...k))}," + ")):Y("",!0),e.currentTab=="liquidity"?(M(),Z("div",{key:1,class:"zoom-in",onClick:l[4]||(l[4]=(...k)=>e.zoomIn&&e.zoomIn(...k))}," - ")):Y("",!0)])]),e.poolInfo?(M(),Ze(B,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):Y("",!0)])]),r("div",kn,[yn,r("div",_n,[r("div",wn,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(M(),Z("div",Cn,[Pn,r("span",Sn,J(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),r("span",null,J(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(ce))(e.before7dContractPriceLowest,6)))+" - "+J(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(ce))(e.before7dContractPriceHighest,6))),1)])):Y("",!0),r("div",Tn,[(M(!0),Z(At,null,Ut(e.timeList,k=>(M(),Z("div",{key:k.value,class:wt(["time-item",k.value==e.aprRewardsParameter?"time-item-active":""]),onClick:Ce=>e.aprRewardsParameter=k.value},J(k.label),11,In))),128))])]),r("div",An,[r("span",null,J(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(ce))(e.before7dContractPriceLowest,6)))+" - "+J(("addCommom"in e?e.addCommom:ae(Fe))(("decimalUi"in e?e.decimalUi:ae(ce))(e.before7dContractPriceHighest,6))),1)])])]),r("div",{class:wt(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[Re(I,{lever:e.lever},null,8,["lever"]),r("div",Nn,[e.farmsPoolInfo&&!("checkNullObj"in e?e.checkNullObj:ae(se))(e.farmsPoolInfo)&&e.fromCoin&&e.toCoin?(M(),Z("div",Ln,[r("span",null,[qn,xe(" Farm rewards rangeï¼š"+J(("decimalUi"in e?e.decimalUi:ae(ce))(e.direction?e.farmsPoolInfo.minPrice:1/e.farmsPoolInfo.maxPrice,6))+" - "+J(("decimalUi"in e?e.decimalUi:ae(ce))(e.direction?e.farmsPoolInfo.maxPrice:1/e.farmsPoolInfo.minPrice,6))+" "+J((m=e.toCoin)==null?void 0:m.symbol)+" per "+J((X=e.fromCoin)==null?void 0:X.symbol),1)]),r("div",Mn,[Re(Q,{class:"range-alerts-switch",checked:e.isStableFarmingRange,onClick:l[5]||(l[5]=k=>e.isStableFarmingRange=!e.isStableFarmingRange)},null,8,["checked"])])])):Y("",!0),e.farmsPoolInfo&&!("checkNullObj"in e?e.checkNullObj:ae(se))(e.farmsPoolInfo)&&e.fromCoin&&e.toCoin?(M(),Z("div",$n,[Fn,r("div",Rn,[xe(J(("decimalUi"in e?e.decimalUi:ae(ce))(e.direction?e.farmsPoolInfo.minPrice:1/e.farmsPoolInfo.maxPrice,6))+" - "+J(("decimalUi"in e?e.decimalUi:ae(ce))(e.direction?e.farmsPoolInfo.maxPrice:1/e.farmsPoolInfo.minPrice,6))+" "+J((U=e.toCoin)==null?void 0:U.symbol)+" per "+J((te=e.fromCoin)==null?void 0:te.symbol)+" ",1),Re(Q,{class:"range-alerts-switch",checked:e.isStableFarmingRange,onClick:l[6]||(l[6]=k=>e.isStableFarmingRange=!e.isStableFarmingRange)},null,8,["checked"])])])):Y("",!0),Re(n,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(M(),Z("div",On,[r("img",{src:("importIcon"in e?e.importIcon:ae(Nt))("/image/icon-tips-error@2x.png"),alt:""},null,8,Bn),r("p",Un,J(e.$t("tips.positionError")),1)])):Y("",!0)])],2)])}const Vt=ot(zi,[["render",jn]]),zn=at({props:{poolInfo:{type:Object,default:()=>({})},isActive:{type:Boolean,default:!0}},setup(e,l){const de=ht(),oe=h(()=>de),$=R(!1),le=R(),L=R(!0),B=mt(),I=h(()=>B),Q=h(()=>I.value.newTopPoolsObj);h(()=>oe.value.farmsPoolList);const n=E=>{var V,v,a,C;const x=E[(V=e==null?void 0:e.poolInfo)==null?void 0:V.poolAddress]||{};let be=0;x&&!se(x)&&((a=(v=x==null?void 0:x.stable_farming)==null?void 0:v.stable_rewarder)==null||a.forEach(m=>{m.amount_second>0&&(be+=m.amount_second)}),be>0?($.value=!0,le.value={id:x.stable_farming.stable_farming_pool,clmm_pool_id:(C=e==null?void 0:e.poolInfo)==null?void 0:C.poolAddress},l.emit("sendFarmsPoolInfo",L.value&&e.isActive?le.value:"")):($.value=!1,l.emit("sendFarmsPoolInfo","")))};return Ie(()=>[Q.value,e.poolInfo],([E,x])=>{E&&!se(E)&&x&&!se(x)&&n(E)},{immediate:!0}),Ie(()=>[e.isActive,L.value,le.value],([E,x,be])=>{l.emit("sendFarmsPoolInfo",x&&e.isActive?be:"")},{immediate:!0}),{isShowAutoStake:$,changeIsOpen:()=>{L.value=!L.value,l.emit("sendFarmsPoolInfo",L.value&&e.isActive?le.value:"")},isOpen:L}}}),Hn=""+globalThis.__publicAssetsURL("sui-image/farming_huo.png"),En=""+globalThis.__publicAssetsURL("sui-image/icon_sel@2x.png");const Ot=e=>(Lt("data-v-20c0ad07"),e=e(),qt(),e),Xn={key:0,class:"farms-auto-stake"},Dn=Ot(()=>r("img",{class:"farms-icon",src:Hn,alt:""},null,-1)),Wn=Ot(()=>r("div",{class:"desc"},"Automatically stake your position into the farm to enjoy higher yield.",-1)),Zn={key:0,src:En,alt:""},Gn=Ot(()=>r("div",{class:"check-box"},null,-1));function Jn(e,l,de,oe,$,le){const L=Mt;return e.isShowAutoStake?(M(),Z("div",Xn,[Dn,Wn,e.isActive?(M(),Z("div",{key:0,class:"check-box-active",onClick:l[0]||(l[0]=(...B)=>e.changeIsOpen&&e.changeIsOpen(...B))},[e.isOpen?(M(),Z("img",Zn)):Y("",!0)])):(M(),Ze(L,{key:1,"overlay-style":{"min-width":"200px"}},ui({default:Ve(()=>[Gn]),_:2},[e.isActive?void 0:{name:"title",fn:Ve(()=>[xe("Farming rewards only available for active positions.")]),key:"0"}]),1024))])):Y("",!0)}const Kn=ot(zn,[["render",Jn],["__scopeId","data-v-20c0ad07"]]),Yn=at({components:{NewLiquidityTitle:Kt,NewLiquidityAssetsCard:Yt,NewLiquidityDepositRatio:Qt},setup(){const{t:e,locale:l}=Dt(),de=mt(),oe=h(()=>de),$=h(()=>oe.value.chainName),le=Rt(),L=h(()=>le),B=hi(),I=h(()=>B),Q=$t(),n=h(()=>{let i=null;for(const u in L.value.poolsObj){const g=L.value.poolsObj[u];g.address==Q.query.poolAddress&&(i=g)}return console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:272 ~ constpoolInfo:any=computed ~ info:",i),i}),A=R(!1),E=R(!1),x=h(()=>oe.value.theme),be=async(i,u)=>{_.value=i.needReverse?i.token_b:i.token_a,p.value=i.needReverse?i.token_a:i.token_b,S.value="",T.value=""},V=h(()=>I.value.assets&&_.value&&I.value.assets[_.value.address]?Bt(I.value.assets[_.value.address].balance,_.value.decimals):"0"),v=h(()=>I.value.assets&&p.value&&I.value.assets[p.value.address]?Bt(I.value.assets[p.value.address].balance,p.value.decimals):"0"),a=i=>{i==="fromCoin"?(Te.value=!0,$.value==="Aptos"?S.value=Number(V.value)>0?_.value.symbol=="APT"?new o(Number(V.value)).sub(new o(.1)).lt(new o(0))?"0":new o(Number(V.value)).sub(new o(.1)).toString():String(V.value):"":S.value=Number(V.value)>0?_.value.symbol=="SUI"?new o(Number(V.value)).sub(new o(.05)).lt(new o(0))?"0":new o(Number(V.value)).sub(new o(.05)).toString():String(V.value):""):(Te.value=!1,$.value==="Aptos"?T.value=Number(v.value)>0?p.value.symbol=="APT"?new o(Number(v.value)).sub(new o(.1)).lt(new o(0))?"0":new o(Number(v.value)).sub(new o(.1)).toString():String(v.value):"":T.value=Number(v.value)>0?p.value.symbol=="SUI"?new o(Number(v.value)).sub(new o(.05)).lt(new o(0))?"0":new o(Number(v.value)).sub(new o(.05)).toString():String(v.value):"")},C=i=>{i==="fromCoin"?(Te.value=!0,S.value=Number(V.value)>0?Tt(new o(Number(V.value)).div(2).toString(),_.value.decimals).toString():""):(Te.value=!1,T.value=Number(v.value)>0?Tt(new o(Number(v.value)).div(2).toString(),p.value.decimals).toString():"")},m=R(),X=R(),U=R(),te=R(!1),k=i=>{var u,g,fe,D;m.value=i,i==="fromCoin"?(X.value=((u=p.value)==null?void 0:u.address)||"",U.value=Q.query.actions=="new-position"?(g=_.value)==null?void 0:g.address:n.value.needReverse?n.value.token_b.address:n.value.token_a.address):(X.value=((fe=_.value)==null?void 0:fe.address)||"",U.value=Q.query.actions=="new-position"?(D=p.value)==null?void 0:D.address:n.value.needReverse?n.value.token_a.address:n.value.token_b.address),te.value=!0},Ce=i=>{var fe,D,_e,we,ge,he,ke,Se;const u=n.value.needReverse?n.value.token_b:n.value.token_a,g=n.value.needReverse?n.value.token_a:n.value.token_b;m.value==="fromCoin"?(((fe=_.value)==null?void 0:fe.address)===(u==null?void 0:u.address)||!((D=_.value)!=null&&D.address)?(p.value&&i.address.toLowerCase()===((_e=p)==null?void 0:_e.value.address.toLowerCase())&&(p.value=null),_.value=i):(_.value&&i.address.toLowerCase()===((we=_)==null?void 0:we.value.address.toLowerCase())&&(_.value=null),p.value=i),Q.query.action||(Q.query.fee="")):((ge=p.value)==null?void 0:ge.address)===(g==null?void 0:g.address)||!((he=p.value)!=null&&he.address)?(_.value&&i.address.toLowerCase()===((ke=_)==null?void 0:ke.value.address.toLowerCase())&&(_.value=null),p.value=i):(p.value&&i.address.toLowerCase()===((Se=p)==null?void 0:Se.value.address.toLowerCase())&&(p.value=null),_.value=i),te.value=!1},f=h(()=>oe.value.chainName?Ft(oe.value.chainName):{}),O=h(()=>oe.value.slippage),z=R(),Pe=async()=>{var je,$e,Oe,De;if(Ee.value||!q.value&&!b.value)return!1;if(!S.value&&!T.value&&!q.value&&!b.value)return;const i=n.value||{};if(se(i))return;const{TickUtil:u,TickMath:g,getNearestTickByTick:fe}=f.value,D=i==null?void 0:i.token_a.decimals,_e=i==null?void 0:i.token_b.decimals;let we,ge,he,ke,Se,Me,Xe,Ge,pe=i==null?void 0:i.current_tick_index;if(!pe)return;let ne;if(i.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&i.token_b.address.toLowerCase()===p.value.address.toLowerCase()?ne=!0:ne=!1,q.value==="0"&&b.value==="âˆž")he=u.getMinIndex(Number(i.tickSpacing)),ke=u.getMaxIndex(Number(i.tickSpacing)),Se=g.tickIndexToSqrtPriceX64(he),Me=g.tickIndexToSqrtPriceX64(ke);else if(W.value=="custom"){ne?(we=q.value,ge=b.value):(we=b.value!=="âˆž"?new o(1).div(b.value).toString():1/0,ge=new o(1).div(q.value).toString());try{Xe=new o(we).equals(new o(0))?-443636:g.priceToTickIndex(new o(we),D,_e)}catch{Xe=-443636}try{Ge=g.priceToTickIndex(new o(ge),D,_e)}catch{Ge=443636}he=fe(Xe,Number(i.tickSpacing),!0),ke=fe(Ge,Number(i.tickSpacing),!0);try{Se=g.priceToSqrtPriceX64(new o(we),D,_e)}catch{(ge===1/0||ge==="âˆž")&&(Se=g.tickIndexToSqrtPriceX64(u.getMinIndex(Number(i.tickSpacing))))}try{Me=g.priceToSqrtPriceX64(new o(ge),D,_e)}catch{(ge===1/0||ge==="âˆž")&&(Me=g.tickIndexToSqrtPriceX64(u.getMaxIndex(Number(i.tickSpacing))))}}else he=(je=Qe.value[W.value])==null?void 0:je.lower,ke=($e=Qe.value[W.value])==null?void 0:$e.upper,Se=g.tickIndexToSqrtPriceX64(he),Me=g.tickIndexToSqrtPriceX64(ke);if(b.value!=="âˆž"&&he>=ke){console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:639 ~ updateAmounts ~",b.value!=="âˆž"&&he>=ke),A.value=!0,S.value="",E.value=!0,T.value="";return}if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:708 ~ updateAmounts ~ currentTickIndex:",pe),b.value==="âˆž"||pe>=he&&pe<ke){A.value=!1,E.value=!1;let re;if(S.value||T.value){if(Te.value){const _t=new o(S.value).mul(Math.pow(10,_.value.decimals)).toString();re=new ze(_t)}else{const _t=new o(T.value).mul(Math.pow(10,p.value.decimals)).toString();re=new ze(_t)}g.tickIndexToSqrtPriceX64(n.value.current_tick_index);const{liquidityAmount:Be,tokenMaxA:We,tokenMaxB:ft,tokenMaxAOrigin:ii,tokenMaxBOrigin:ni}=f.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:i.token_a,tokenB:i.token_b,lowerTick:he,upperTick:ke,coinAmount:re,iscoinA:ne?Te.value:!Te.value,roundUp:!0,slippage:Number(O.value)/100,curSqrtPrice:new ze(n.value.current_sqrt_price)});z.value={liquidityAmount:Be,tokenMaxA:We,tokenMaxB:ft,tokenMaxAOrigin:ii,tokenMaxBOrigin:ni},ne?Te.value?T.value=Number(ft)>0?ft:"":S.value=Number(We)>0?We:"":Te.value?T.value=We:S.value=ft}}else if(pe>=ke){if(ne?S.value="":T.value="",A.value=ne,E.value=!ne,S.value||T.value){let re;if(ne){const Be=new o(T.value).mul(Math.pow(10,(Oe=p.value)==null?void 0:Oe.decimals)).toString();re=new ze(Be),z.value={liquidityAmount:f.value.estimateLiquidityForCoinB(Se,Me,re),tokenMaxA:0,tokenMaxB:T.value}}else{const Be=new o(S.value).mul(Math.pow(10,(De=_.value)==null?void 0:De.decimals)).toString();re=new ze(Be),z.value={liquidityAmount:f.value.estimateLiquidityForCoinB(Se,Me,re),tokenMaxA:0,tokenMaxB:S.value}}}}else if(pe<he){if(A.value=!ne,E.value=ne,ne?T.value="":S.value="",S.value||T.value){let re;if(ne){const Be=new o(S.value).mul(Math.pow(10,_.value.decimals)).toString();re=new ze(Be),z.value={liquidityAmount:f.value.estimateLiquidityForCoinA(Se,Me,re),tokenMaxA:S.value,tokenMaxB:0}}else{const Be=new o(T.value).mul(Math.pow(10,p.value.decimals)).toString();re=new ze(Be),z.value={liquidityAmount:f.value.estimateLiquidityForCoinA(Se,Me,re),tokenMaxA:T.value,tokenMaxB:0}}}}else A.value=!0,console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:783 ~ updateAmounts ~ showFromCoinLock.value:",A.value),S.value="",E.value=!0,T.value=""};Ie(()=>n.value,(i,u)=>{(!u&&i&&!se(i)||u&&i&&u.address!==i.address)&&be(i,!u||i.address!==u.address),i&&!se(i)&&Pe()},{immediate:!0}),Ie(S,(i,u)=>{i==""&&Te.value&&(T.value=""),i&&Te.value&&!Ee.value&&Pe()}),Ie(T,(i,u)=>{i==""&&!Te.value&&(S.value=""),i&&!Te.value&&!Ee.value&&Pe()}),Ie(()=>ye.value,(i,u)=>{Pe()}),Ie(()=>[_.value,p.value],([i,u])=>{i&&u&&(A.value=!1,E.value=!1)});const w=R("--"),j=h(()=>L.value.RATES),ie=()=>{const i=j.value&&j.value[_.value.address]&&j.value[_.value.address].price,u=j.value&&j.value[p.value.address]&&j.value[p.value.address].price;if(i&&u){const g=new o(S.value>0?S.value:0).mul(i),fe=new o(T.value>0?T.value:0).mul(u),D=g.add(fe).toNumber();w.value=D>0&&D<.01?"<$0.01":"$"+Fe(D,2)}else w.value="--"};Ie(()=>[S.value,T.value,Ee.value],([i,u,g])=>{(i||u)&&!g?ie():(!i||!u)&&!g&&(w.value="--")},{immediate:!0});const ue=R(),H=async()=>{var ne,je;if(!q.value&&!b.value)return!1;if(!S.value&&!T.value&&!q.value&&!b.value)return;const i=n.value;if(se(i))return;const{TickUtil:u,TickMath:g,getNearestTickByTick:fe}=f.value,D=i==null?void 0:i.token_a.decimals,_e=i==null?void 0:i.token_b.decimals;let we,ge,he,ke,Se,Me,Xe;if(i.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&i.token_b.address.toLowerCase()===p.value.address.toLowerCase()?Xe=!0:Xe=!1,q.value==="0"&&b.value==="âˆž")he=u.getMinIndex(Number(i.tickSpacing)),ke=u.getMaxIndex(Number(i.tickSpacing));else if(W.value=="custom"){Xe?(we=Number(q.value),ge=Number(b.value)):(we=new o(1).div(b.value).toString(),ge=new o(1).div(q.value).toString());try{Se=we==0?-443636:g.priceToTickIndex(new o(we),D,_e)}catch{Se=-443636}try{Me=g.priceToTickIndex(new o(ge),D,_e)}catch{Me=443636}he=fe(Se,Number(i.tickSpacing),!0),ke=fe(Me,Number(i.tickSpacing),!0)}else he=(ne=Qe.value[W.value])==null?void 0:ne.lower,ke=(je=Qe.value[W.value])==null?void 0:je.upper;const Ge=j.value[i==null?void 0:i.token_a.address].price,pe=j.value[i==null?void 0:i.token_b.address].price;ye.value?new ze(i.current_sqrt_price):new ze(1/i.current_sqrt_price);try{const{amountA:$e,amountB:Oe,tokenAmountsInfo:De}=await f.value.estCoinAmountsFromTotalAmount({lowerTick:he,upperTick:ke,decimalsA:D,decimalsB:_e,curSqrtPrice:new ze(i.current_sqrt_price),totalAmount:w.value.replace(/[^\d.]/g,""),tokenPriceA:Ge,tokenPriceB:pe});ue.value=De,i.needReverse?ye.value?(S.value=$e,T.value=Oe):(S.value=Oe,T.value=$e):(S.value=$e,T.value=Oe)}catch($e){console.log($e,"e===>")}};Ie([q,b],([i,u])=>{Ee.value?Ee.value&&H():Pe(),u!=="âˆž"&&Number(i)!==0&&Number(u)!==0&&Number(i)>=Number(u)?nt.value=!0:nt.value=!1,Number(i)==0&&Number(u)==0&&dt.value&&(nt.value=!0)},{deep:!0,immediate:!0});const He=i=>{const u=i.replace(/[^\d.]/g,""),g="$"+Fe(u);Ee.value=!0,w.value=g,u>0?H():(S.value="",T.value="")},N=R(!1),{setTransactionTxid:me,setTransactionDesc:Je,setIsShowWaiting:qe,setIsShowSuccess:rt,setPositiomNum:et,setIsShowRejected:Ke}=de,Ye=Pi(),K=h(()=>L.value.currentPositionInfo),st=R(!1),Ae=R(!0),t=ht(),c=h(()=>t),P=h(()=>c.value.farmsPoolObj);Ie(()=>[P.value,n.value],([i,u])=>{i&&!se(i)&&u&&!se(u)&&(i[u.address]||(Ae.value=!1))},{immediate:!0});const y=R(),F=R(),ve=i=>{y.value=i,i?Ae.value=!0:Ae.value=!1},Ne=async(i,u,g,fe)=>{try{u=="farming"?await L.value.setCurrentPositionInfo("","","","Sui",g,"farming"):await L.value.setCurrentPositionInfo(i,"","",$.value,fe),await oi(3e3),Ae.value?await Ye.subscribePosition({pool_address:K.value.clmm_pool_id,position_index:K.value.name.split("-")[1]},K.value.clmm_position_id):await Ye.subscribePosition({pool_address:K.value.poolAddress,position_index:K.value.index},K.value.nftHash)}catch(D){console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1151 ~ notifiSubscribePosition ~ error:",D)}},s=async i=>{var Se,Me,Xe,Ge;N.value=!1,L.value.currentPositionInfo={},me(""),Je(e("tips.increaseLiquiditySuccess",{from:A.value?"":`${Fe(S.value)} ${(Se=_.value)==null?void 0:Se.symbol}`,and:!A.value&&!E.value?"and":"",to:E.value?"":`${Fe(T.value)} ${(Me=p.value)==null?void 0:Me.symbol}`})),qe(!0);const u=ye.value?Te.value:!Te.value;let g,fe,D,_e,we,ge;const he=n.value.token_a.decimals,ke=n.value.token_b.decimals;if(q.value==="0"&&b.value==="âˆž")D=f.value.TickUtil.getMinIndex(Number(n.value.tickSpacing)),_e=f.value.TickUtil.getMaxIndex(Number(n.value.tickSpacing));else if(W.value=="custom"){ye.value?(g=q.value,fe=b.value):(g=new o(1).div(b.value).toString(),fe=new o(1).div(q.value).toString());try{we=g==0?f.value.TickUtil.getMinIndex(Number(n.value.tickSpacing)):f.value.TickMath.priceToTickIndex(new o(g),he,ke)}catch{we=f.value.TickUtil.getMinIndex(Number(n.value.tickSpacing))}try{ge=f.value.TickMath.priceToTickIndex(new o(fe),he,ke)}catch{ge=f.value.TickUtil.getMaxIndex(Number(n.value.tickSpacing))}D=f.value.getNearestTickByTick(we,Number(n.value.tickSpacing),!0),_e=f.value.getNearestTickByTick(ge,Number(n.value.tickSpacing),!0)}else D=Qe.value[W.value].lower,_e=Qe.value[W.value].upper;try{let pe;Ee.value?pe=await f.value.getCreateAddLiquidityPayload({pool:n.value,curSqrtPrice:new ze(n.value.current_sqrt_price),tickLower:D,tickUpper:_e,slippage:Number(O.value)/100,tokenAmounts:ue.value}):pe=await f.value.getAddLiquidityTransactionPayload({pool:{poolAddress:n.value.poolAddress,token_a:n.value.token_a,token_b:n.value.token_b},amount:Te.value?S.value:T.value,fix_amount_a:u,tick_lower:D,tick_upper:_e,index:0,slippage:Number(O.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new ze(n.value.current_sqrt_price),farmPoolInfo:y.value});let ne;if($.value==="Aptos")ne=await I.value.currentWallet.signAndSubmitTransaction(pe);else{const je=await f.value.signAndExecuteTransactionBlock(I.value.currentWallet,pe==null?void 0:pe.txb,pe==null?void 0:pe.payloadParams);ne=f.value.handleTx(je)}if(console.log("0410###tx###",ne),ne&&ne.hash){me(ne.hash),qe(!1),rt(!0);let je;n.value.needReverse?n.value.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&n.value.token_b.address.toLowerCase()===p.value.address.toLowerCase()?je=!1:je=!0:n.value.token_a.address.toLowerCase()===_.value.address.toLowerCase()&&n.value.token_b.address.toLowerCase()===p.value.address.toLowerCase()?je=!0:je=!1;const $e={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:A.value?"":`${Fe(S.value)} ${(Xe=_.value)==null?void 0:Xe.symbol}`,and:!A.value&&!E.value?"and":"",to:E.value?"":`${Fe(T.value)} ${(Ge=p.value)==null?void 0:Ge.symbol}`}),hash:ne.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};$.value!=="Aptos"&&($e.res=ne.res),f.value.showTransitionPending($e),console.log($e,"toAdd params###");const Oe=await f.value.watchTransaction($e,!0);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1295 ~ toAdd ~ watchInfo:",Oe),Oe.status){rt(!1),L.value.setCurrentPositionLoading(!0);let De,re;$.value==="Aptos"?F.value={token_a:n.value.token_a,token_b:n.value.token_b,minPrice:q.value,maxPrice:b.value,pool:n.value.address,collection:Oe.nftInfo[0].data.id.collection,tokenName:Oe.nftInfo[0].data.name}:(re=Oe.nftInfo,console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1319 ~ toAdd ~ nftInfo:",re),Ae.value?(Oe.res.events.forEach(We=>{We.type.indexOf("::pool::DepositEvent")>-1&&(De=We.parsedJson.wrapped_position_id)}),F.value={token_a:n.value.needReverse?n.value.token_b:n.value.token_a,token_b:n.value.needReverse?n.value.token_a:n.value.token_b,minPrice:q.value,maxPrice:b.value,id:De,clmm_pool_id:n.value.address,pool:n.value.address}):F.value={token_a:n.value.needReverse?n.value.token_b:n.value.token_a,token_b:n.value.needReverse?n.value.token_a:n.value.token_b,minPrice:q.value,maxPrice:b.value,pos_object_id:re.position,pool:n.value.address},console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1389 ~ toAdd ~ positionInfoDetail:",F.value)),st.value=!0;const Be=n.value.poolAddress;setTimeout(()=>{if(i){const We=De?"farming":"clmm";console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1400 ~ setTimeout ~ poolInfo.value.poolAddress:",Be),Ne(Be,We,De,re==null?void 0:re.position)}},3e3),setTimeout(()=>{le.updateCurrentPools(Be,$.value),f.value.getAccount(I.value.address)},3e3),setTimeout(async()=>{jt(f,n)},7e3)}et()}else qe(!1),Ke(!0);S.value="",T.value=""}catch(pe){S.value="",T.value="",console.log("0330###Add liquidity Error###",pe),qe(!1),Ke(!0)}},d=h(()=>!!(!S.value&&!T.value||Number(S.value)>Number(V.value)||Number(T.value)>Number(v.value)||G.value!==e("button.addLiquidity")&&G.value!==e("newAdd.preview")||n.value&&n.value&&n.value.is_pause||Number(S.value)<=0&&Number(T.value)<=0||!A.value&&Number(S.value)==0||!E.value&&Number(T.value)==0)),Le=h(()=>!_.value||!p.value),G=h(()=>n.value&&n.value.is_pause?"Pool Closed":!_.value||!p.value||Le.value?e("modal.selectTokenModalTitle"):Number(S.value)>Number(V.value)?e("button.insufficientBalance",{name:_.value.symbol}):Number(T.value)>Number(v.value)?e("button.insufficientBalance",{name:p.value.symbol}):!Number(S.value)&&!Number(T.value)?e("button.enterAmount"):b.value!=="âˆž"&&Number(q.value)>=Number(b.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),ee=R({}),lt=R({}),ut=R(!1),tt=(i,u)=>{const g=localStorage.getItem(i.address);console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-right.vue:1518 ~ getTokenSource ~ coinLocak:",g,i),i!=null&&i.isSelfBuilt&&!g&&(u=="fromCoin"&&(ee.value=i),u=="toCoin"&&(lt.value=i),ut.value=!0)};Ie(()=>[_.value,p.value],([i,u])=>{i&&!se(i)&&tt(i,"fromCoin"),u&&!se(u)&&tt(u,"toCoin")},{immediate:!0});const ct=ci(),kt=()=>{$.value!=="Aptos"?ct.push("/pool/list"):ct.push("/pools")},vt=i=>{Ee.value,s(i)},yt=()=>{Q.query.action!=="create-pool"&&Q.query.actions!=="new-position"&&(jt(f,n),Pe(),I.value.address&&f.value.getAccount(I.value.address),le.updateCurrentPools(n.value.poolAddress,$.value)),le.setPoolConfigList($.value,oe.value.filterCoinsObj)},ti=h(()=>{var g,fe,D,_e,we,ge;const i=(D=j.value[(fe=(g=_)==null?void 0:g.value)==null?void 0:fe.address])==null?void 0:D.price,u=(ge=j.value[(we=(_e=p)==null?void 0:_e.value)==null?void 0:we.address])==null?void 0:ge.price;return!!(i&&u)});return Ie(()=>[Q,L.value.tokensObj],([i,u])=>{var g;u&&!se(u)&&(p.value||(p.value=L.value.tokensObj[(g=i==null?void 0:i.query)==null?void 0:g.toCoin]))},{immediate:!0,deep:!0}),{positionError:nt,decimalUi:ce,poolInfo:n,fromCoinAmount:S,toCoinAmount:T,fromCoin:_,toCoin:p,theme:x,showFromCoinLock:A,showToCoinLock:E,fromCoinBlance:V,toCoinBlance:v,maxBtnSelect:a,halfBtnSelect:C,fixedFromCoin:Te,openCoinSelect:k,currentCoinKey:m,existingCoins:X,lastSelectCoin:U,showCoinSelect:te,onCoinSelect:Ce,liquidityTotalAmount:w,toggle:Gt,onInput:He,isInputTotalAmount:Ee,isViewDetail:st,addLiquidityBtnDisabled:d,addLiquidityBtnText:G,isShowTokenWarning:ut,chainName:$,closeTokenWarning:kt,warningFromCoin:ee,warningToCoin:lt,isShowLiquidityModal:N,currentPrice:dt,currentPriceReverse:bt,currentPriceTab:W,minPrice:q,maxPrice:b,toAdd:s,direction:ye,wallet:I,getAddLiquidityType:vt,clickRefresh:yt,isShowtotalAmount:ti,isAutoStakeFarming:Ae,farmPoolInfo:y,getFarmsPoolInfo:ve,positionInfoDetail:F,getTokenSource:tt}}});const Qn={class:"new-liquidity-right"},xn={class:"deposit-title"},Vn={class:"card-container"},ea={key:0,class:"lock"},ta={class:"card-item"},ia={class:"card-item"},na={key:0,class:"total-amount"},aa=r("span",null,"Total Amount",-1);function oa(e,l,de,oe,$,le){const L=Kt,B=pi,I=Yt,Q=yi,n=Qt,A=di,E=_i,x=wi,be=Ci,V=Kn;return M(),Z("div",Qn,[r("div",xn,[Re(L,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),r("div",Vn,[e.positionError?(M(),Z("div",ea,[Re(B)])):Y("",!0),r("div",ta,[Re(I,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":l[0]||(l[0]=v=>e.fromCoinAmount=v),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:l[1]||(l[1]=v=>e.maxBtnSelect("fromCoin")),onOnHalf:l[2]||(l[2]=v=>e.halfBtnSelect("fromCoin")),onOnInput:l[3]||(l[3]=v=>{e.fromCoinAmount=v,e.fixedFromCoin=!0,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(M(),Ze(Q,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):Y("",!0)]),r("div",ia,[Re(I,{modelValue:e.toCoinAmount,"onUpdate:modelValue":l[4]||(l[4]=v=>e.toCoinAmount=v),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:l[5]||(l[5]=v=>e.maxBtnSelect("toCoin")),onOnHalf:l[6]||(l[6]=v=>e.halfBtnSelect("toCoin")),onOnInput:l[7]||(l[7]=v=>{e.toCoinAmount=v,e.fixedFromCoin=!1,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(M(),Ze(Q,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):Y("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(M(),Z("img",{key:1,class:"add",src:Si,alt:"",onClick:l[8]||(l[8]=(...v)=>e.toggle&&e.toggle(...v))})):Y("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(M(),Z("img",{key:2,class:"add",src:Ti,alt:"",onClick:l[9]||(l[9]=(...v)=>e.toggle&&e.toggle(...v))})):Y("",!0)]),e.isShowtotalAmount?(M(),Z("div",na,[aa,r("span",null,J(e.liquidityTotalAmount),1)])):Y("",!0),Re(n,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),Re(A,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:l[10]||(l[10]=v=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Ve(()=>[xe(J(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(M(),Ze(E,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:l[11]||(l[11]=v=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):Y("",!0),e.isViewDetail?(M(),Ze(x,{key:2,"pool-info":e.poolInfo,"farm-pool-info":e.farmPoolInfo,"position-info":e.positionInfoDetail,"is-auto-stake-farming":e.isAutoStakeFarming,onOnClose:l[12]||(l[12]=v=>e.isViewDetail=!1)},null,8,["pool-info","farm-pool-info","position-info","is-auto-stake-farming"])):Y("",!0),e.isShowLiquidityModal?(M(),Ze(be,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:l[13]||(l[13]=v=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):Y("",!0),e.chainName=="Sui"?(M(),Ze(V,{key:4,"pool-info":e.poolInfo,"is-active":!e.showFromCoinLock&&!e.showToCoinLock,"is-auto-stake-farming":e.isAutoStakeFarming,onSendFarmsPoolInfo:e.getFarmsPoolInfo},null,8,["pool-info","is-active","is-auto-stake-farming","onSendFarmsPoolInfo"])):Y("",!0)])}const ei=ot(Yn,[["render",oa]]),ra=at({components:{NewLiquidityLeft:Vt,NewLiquidityRight:ei},setup(){const e=ht(),l=h(()=>e),de=h(()=>l.value.farmsPoolObj);Wt(()=>{ki(),le.setPoolsLoading(!0)}),Ie(()=>de.value,L=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: deposit.vue:41 ~ watch ~ newVal:",L),L&&se(L)&&e.getFarmsPoolList(!0)},{immediate:!0});const oe=$t(),$=mt();h(()=>$);const le=Rt();return{tickList:it,route:oe}}});const sa={key:0,class:"loading-spin-liquidity loading-global"},la={class:"privide-liquidity"};function ua(e,l,de,oe,$,le){var Q,n;const L=Xt,B=Vt,I=ei;return M(),Z(At,null,[!e.tickList&&((n=(Q=e.route)==null?void 0:Q.query)!=null&&n.poolAddress)?(M(),Z("div",sa,[Re(L)])):Y("",!0),r("div",la,[Re(B),Re(I)])],64)}const Ya=ot(ra,[["render",ua],["__scopeId","data-v-24e8414d"]]);export{Ya as default};
