import{_ as nn,a as an}from"./token-warning-modal.40f98e70.js";import{_ as sn}from"./assets-card.831ae5a3.js";import{u as Be,a as Ao,c as be,D as c,s as le,e as E,k as we,v as bo,p as ge,f as tn,b as ln,d as he,h as De}from"./pool.5f6ba17c.js";import{e as Oe,a as qe,a3 as So,a4 as ko,r as p,m as I,D as K,q as _e,o as r,f as C,h as o,c as M,x as j,t as H,j as V,v as i,z as ce,u as q,J as Io,S as $o,p as Fe,k as Re,a5 as un,M as To,K as No,w as ue,F as xe,s as wo,i as Ce,B as Po,b as yo,l as rn,y as dn,C as cn,a8 as Me,L as mn}from"./entry.1fc542fa.js";/* empty css              *//* empty css              */import{u as We,_ as Ee}from"./index.7bcf0333.js";import"./decimal.d0b7f38b.js";import{i as me}from"./import-icon.de3e6c66.js";import{a as vn,_ as pn}from"./network-tips.4669a4f1.js";import{_ as fn}from"./coin-select.f5ed7559.js";/* empty css              */import{u as gn}from"./swapRouter.0fa9bcd8.js";import{_ as Cn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.3745ca75.js";/* empty css              */import"./img-no-Positions_2x.eeefe805.js";const hn=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const bn=qe({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const m=So(ko,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),w=p(!1),y=We(),T=I(()=>y),U=I(()=>T.value.slippage),v=I(()=>T.isShowRouterModal);K(()=>e,S=>{console.log(S,"==>newValue")},{immediate:!0,deep:!0});const L=Be(),N=I(()=>L),F=Ao("Sui"),P=p({}),z=p({}),W=p({});K(()=>[e.suiPreSwapdata,N.value.tokensObj],async([S,f])=>{S&&!be(S)&&f&&!be(f)&&(S.coinTypeA&&(P.value=f[S.coinTypeA]||(await F.getTokenListByCoinType([S.coinTypeA]))[0]),S.coinTypeB&&(z.value=f[S.coinTypeB]||(await F.getTokenListByCoinType([S.coinTypeB]))[0]),S.coinTypeC&&(W.value=f[S.coinTypeC]||(await F.getTokenListByCoinType([S.coinTypeC]))[0]))},{immediate:!0});const X=p(0),Z=p(0);return K(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,U.value],([S,f,ie,Q,G,s])=>{if(S&&f&&ie&&Q&&s)if(G){const u=new c(f).mul(new c(s/100));Z.value=new c(f).sub(u).toString()}else{const u=new c(S).mul(new c(s/100));X.value=new c(S).sub(u).toString()}},{immediate:!0}),{sFixD:le,getCoinIcon:S=>{var f;return(S==null?void 0:S.logoURI)||(S==null?void 0:S.logo_url)||((f=N.value.tokensObj[S==null?void 0:S.address])==null?void 0:f.logo_url)||(T.theme==="default"?me("/image/coins/unknown.png"):me("/image/coins/sui-unknown.png"))},indicator:m,rateChange:w,slippage:U,isShowRouterModal:v,indexStore:y,coinTypeA:P,coinTypeB:z,coinTypeC:W,maximumSold:X,minimumReceived:Z,addCommom:E}}}),ye=e=>(Fe("data-v-fd74e509"),e=e(),Re(),e),wn={key:0,class:"swap-info"},yn={class:"loading-swap"},An={key:1,class:"swap-rate"},Sn={key:0},kn={key:0},In={key:1},$n={key:0},Tn=ye(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Nn=ye(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Pn=[Tn,Nn],Bn={key:2},On={class:"trade-info"},_n={class:"trade-block"},Fn=ye(()=>o("div",{class:"lebal"},"Price Impact",-1)),Rn={key:0,class:"icon","aria-hidden":"true"},Un=ye(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Ln=[Un],jn={class:"trade-block"},Dn={class:"lebal"},Mn={key:0,class:"text"},En={class:"trade-block"},qn=ye(()=>o("div",{class:"lebal"},"Fee",-1)),Wn={key:0,class:"text"},Xn={key:0,class:"trade-block"},Qn=ye(()=>o("div",{class:"lebal"},"Route",-1)),Jn={key:0,class:"text"},Zn={key:0},zn={key:1},Hn={key:2},Kn=ye(()=>o("img",{src:hn,alt:""},null,-1));function Yn(e,m,w,y,T,U){const v=Io,L=$o,N=_e("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(r(),C("div",wn,[o("div",yn,[e.swapLoading||e.swapRouterLoading?(r(),M(v,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):j("",!0),e.swapLoading?e.swapLoading?(r(),C("span",Bn,"Best route and price")):j("",!0):(r(),C("div",An,[e.rateChange?(r(),C("span",In,[e.fromCoinAmount&&e.toCoinAmount?(r(),C("span",$n,[H(o("img",null,null,512),[[N,e.getCoinIcon(e.toCoin)]]),V(" 1 "+i(e.toCoin.symbol)+" ≈ ",1),H(o("img",null,null,512),[[N,e.getCoinIcon(e.fromCoin)]]),V(i(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+i(e.fromCoin.symbol),1)])):(r(),M(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(r(),C("span",Sn,[H(o("img",null,null,512),[[N,e.getCoinIcon(e.fromCoin)]]),V(" 1 "+i(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(r(),C("span",kn,[H(o("img",null,null,512),[[N,e.getCoinIcon(e.toCoin)]]),V(i(e.oneToAmount==1/0?0:e.oneToAmount)+" "+i(e.toCoin.symbol),1)])):(r(),M(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:m[0]||(m[0]=F=>e.rateChange=!e.rateChange)},Pn)]))]),o("div",On,[o("div",_n,[Fn,e.swapRouterLoading?(r(),M(L,{key:1,paragraph:!1,active:""})):(r(),C("div",{key:0,class:ce(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[V(i(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),C("svg",Rn,Ln)):j("",!0)],2))]),o("div",jn,[o("div",Dn,i(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(r(),M(L,{key:1,paragraph:!1,active:""})):(r(),C("div",Mn,i(e.fixedFromCoin?("addCommom"in e?e.addCommom:q(E))(("sFixD"in e?e.sFixD:q(le))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:q(E))(("sFixD"in e?e.sFixD:q(le))(e.maximumSold,e.fromCoin.decimals)))+" "+i(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",En,[qn,e.swapRouterLoading?(r(),M(L,{key:1,paragraph:!1,active:""})):(r(),C("div",Wn,i(e.suiSwapFee),1))]),e.insufficientLiquidity?j("",!0):(r(),C("div",Xn,[Qn,e.swapRouterLoading?(r(),M(L,{key:1,paragraph:!1,active:""})):(r(),C("div",{key:0,class:"text",onClick:m[1]||(m[1]=F=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[e.swapRouterLoading?j("",!0):(r(),C("div",Jn,[e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeA?(r(),C("span",Zn,i(e.coinTypeA.symbol)+" "+i(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?"> ":""),1)):j("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?(r(),C("span",zn,i(e.coinTypeB.symbol)+" "+i(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?"> ":""),1)):j("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?(r(),C("span",Hn,i(e.coinTypeC.symbol),1)):j("",!0)])),Kn]))]))])])):j("",!0)}const Gn=Oe(bn,[["render",Yn],["__scopeId","data-v-fd74e509"]]);async function Vn(e){const{prices:m}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}});return m}const xn={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""}},setup(e,m){const{$echarts:w}=un();let y=null,T;const U=p(!0),v=(s,u,B)=>{T={xAxis:{type:"category",boundaryGap:!1,show:!1,data:u},yAxis:{type:"value",show:!1,min:function($){return $.min-$.min*.1},max:function($){return $.max+$.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:X.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function($){return`<div class="chart-tip">
              <div>${$&&$[0]&&$[0].name}</div>
              <div>$${we($&&$[0]&&$[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:X.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:X.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:s,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:X.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},T&&y.clear(),T&&y.setOption(T,!0),y.resize(),U.value=!1},L=Be(),N=I(()=>L),F=p(""),P=p(""),z=async s=>{var ee,fe;const u=[],B=[],$=await Vn(s);F.value=$&&$.length>1&&($[$.length-1][1]-$[0][1])/$[0][1]*100,P.value=$&&$.length>1&&$[$.length-1][1],$.forEach(R=>{u.push(R[1]);const J=bo(R[0],"MD"),t=bo(R[0],"HM");B.push(J+" "+t)});let Ae=document.getElementById(`main${(ee=e.coin)==null?void 0:ee.name}`);y=w.init(Ae),v(u,B,(fe=e.coin)==null?void 0:fe.name)},W=We(),X=I(()=>W),Z=I(()=>X.value.chainName),x=I(()=>Ee[Z.value]);K(()=>e.id,(s,u)=>{console.log(s,u,"===>oldValue"),console.log(!U.value,"!isFirst.value"),s&&(F.value="",P.value="",setTimeout(()=>{z(s)},1e3))},{immediate:!0});const S=p(""),f=p(""),ie=p(""),Q=p("");K(()=>[N.value.tokensObj,e.coin],([s,u])=>{var B,$;s&&u&&s[u.address]&&(console.log(s[u.address],"===>newValue[coin.address]"),f.value=((B=s[u.address])==null?void 0:B.labels)&&(($=s[u.address])==null?void 0:$.labels[0]),S.value=s[u.address].name,ie.value=s[u.address].symbol,Q.value=s[u.address].address)},{immediate:!0,deep:!0}),K(()=>e.refresh,s=>{s&&z(e.id)});const G=I(()=>X.value.theme);return console.log(e.coin.address=="0x2::sui::SUI","0x2::sui::SUI"),{theme:G,store:W,importIcon:me,fixD:we,config:x,price_rate_24h:F,nowPrice:P,coinName:S,coinLabels:f,coinSymbol:ie,address:Q}}};const ea=e=>(Fe("data-v-2d274d28"),e=e(),Re(),e),oa={class:"token-info"},na={class:"token-info-padding"},aa={class:"token-info-header"},sa={class:"left"},ta=["onerror"],la={class:"name"},ia={class:"desc"},ua={class:"right"},ra={class:"price"},da={class:"token-info-footer"},ca={class:"left"},ma={class:"address"},va={key:0,class:"pc-address"},pa={key:1,class:"pc-address"},fa={class:"h5-address"},ga=ea(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Ca=[ga],ha={class:"right"},ba=["id"];function wa(e,m,w,y,T,U){var L;const v=_e("image");return r(),C("div",oa,[o("div",na,[o("div",aa,[o("div",sa,[H(o("img",{onerror:y.theme=="default"?y.importIcon("/image/coins/unknown.png"):y.importIcon("/image/coins/sui-unknown.png")},null,8,ta),[[v,w.coin.logoURI||y.importIcon(`/image/coins/${w.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",la,i(y.coinSymbol),1),o("div",ia,[o("span",null,i(y.coinName)+" "+i(y.coinLabels?`(${y.coinLabels})`:""),1)])])]),o("div",ua,[o("div",ra,"$"+i(y.fixD(y.nowPrice,2)),1),y.price_rate_24h?(r(),C("div",{key:0,class:ce(y.price_rate_24h>0?"increase up":y.price_rate_24h<0?"increase down":"increase up")},i(y.price_rate_24h>0?`+ ${y.fixD(y.price_rate_24h,2)}`:y.price_rate_24h<0?+`${y.fixD(y.price_rate_24h,2)}`:`+${y.fixD(y.price_rate_24h,2)}`)+"% ",3)):j("",!0)])]),o("div",da,[o("div",ca,[o("div",ma,[w.coin&&y.address!=="0x2::sui::SUI"?(r(),C("span",va,i(w.coin&&w.coin.address.substr(0,13))+" ... "+i(w.coin&&w.coin.address.substr(w.coin.address.length-13,13)),1)):(r(),C("span",pa,i(w.coin&&w.coin.address),1)),o("span",fa,i(w.coin&&w.coin.address.substr(0,4))+" ... "+i(w.coin&&w.coin.address.substr(w.coin.address.length-4,4)),1),(r(),C("svg",{class:"icon","aria-hidden":"true",onClick:m[0]||(m[0]=N=>y.store.copy(w.coin&&w.coin.address))},Ca))])]),o("div",ha,[o("div",{id:`main${(L=w.coin)==null?void 0:L.name}`,class:"main"},null,8,ba)])])])])}const ya=Oe(xn,[["render",wa],["__scopeId","data-v-2d274d28"]]);const Aa=qe({components:{Modal:To},props:{routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},routerTotalAmounts:{type:String,default:""}},setup(e){const m=Be(),w=I(()=>m),y=p([]);return K(()=>[e.routerPool,w.value.routerPoolConfigObj,e.routerTotalAmounts,e.fromCoin,e.toCoin],([T,U,v,L,N])=>{if(console.log(e,"props=====>100"),T&&T.length>0&&U&&!be(U)&&v){const F=[];T.forEach(P=>{console.log(v,"===>routerTotalAmounts"),console.log(P,"ele.amountIn===>");const z="100",W=P.amountIn.toString(),X=ge(P.amountOut.toString(),N.decimals),Z=P.poolAddress.map((x,S)=>{const f=U&&U[x];return console.log(P,"ele===>118"),{...f}});F.push({percent:z,...P,amountIn:W,amountOut:X,poolAddress:Z})}),console.log(F,"result===>"),y.value=F}},{immediate:!0}),I(()=>{var T,U;return(U=(T=w.value)==null?void 0:T.poolInfo)==null?void 0:U.needReverse}),{addCommom:E,routerStep:y}}}),Xe=e=>(Fe("data-v-0c1c23b0"),e=e(),Re(),e),Sa=Xe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ka={class:"route-top"},Ia={class:"token-a"},$a={alt:""},Ta={class:"token-num"},Na={class:"token-symbol"},Pa={class:"token-b"},Ba={class:"token-num"},Oa={class:"token-symbol"},_a={alt:""},Fa={class:"route-bottom"},Ra=Xe(()=>o("div",{class:"left-round"},null,-1)),Ua=Xe(()=>o("div",{class:"right-round"},null,-1)),La={class:"percent"},ja={class:"pool-info"},Da={class:"token-a-img",alt:""},Ma={class:"token-b-img",alt:""},Ea={key:0,class:"icon","aria-hidden":"true"},qa=Xe(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Wa=[qa];function Xa(e,m,w,y,T,U){const v=No("Modal"),L=_e("image");return r(),M(v,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:m[0]||(m[0]=N=>e.$emit("onClose"))},{closeIcon:ue(()=>[Sa]),default:ue(()=>{var N,F,P,z;return[o("div",ka,[o("div",Ia,[H(o("img",$a,null,512),[[L,(N=e.fromCoin)==null?void 0:N.logo_url]]),o("span",Ta,i(("addCommom"in e?e.addCommom:q(E))(e.fromCoinAmount)),1),o("span",Na,i((F=e.fromCoin)==null?void 0:F.symbol),1)]),o("div",Pa,[o("span",Ba,i(("addCommom"in e?e.addCommom:q(E))(e.toCoinAmount)),1),o("span",Oa,i((P=e.toCoin)==null?void 0:P.symbol),1),H(o("img",_a,null,512),[[L,(z=e.toCoin)==null?void 0:z.logo_url]])])]),o("div",Fa,[Ra,Ua,(r(!0),C(xe,null,wo(e.routerStep,(W,X)=>(r(),C("div",{key:W,class:ce(["route-path",X!==0?"route-path-active":""])},[o("div",La,[o("span",null,i(W.percent)+"%",1),o("span",null,i(("addCommom"in e?e.addCommom:q(E))(W.amountOut))+" "+i(e.toCoin.symbol),1)]),(r(!0),C(xe,null,wo(W.poolAddress,(Z,x)=>(r(),C("div",{key:x,class:"pool-info-box"},[o("div",ja,[H(o("img",Da,null,512),[[L,Z.needReverse?Z.coinB.logo_url:Z.coinA.logo_url]]),H(o("img",Ma,null,512),[[L,Z.needReverse?Z.coinA.logo_url:Z.coinB.logo_url]]),o("span",null,i(Z.fee*100)+"%",1)]),x!==W.poolAddress.length-1?(r(),C("svg",Ea,Wa)):j("",!0)]))),128))],2))),128))])]}),_:1})}const Qa=Oe(Aa,[["render",Xa],["__scopeId","data-v-0c1c23b0"]]),Ja=qe({components:{Modal:To},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"998041.711793"},slippage:{type:String,default:""},impact:{type:Number,required:!0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!0},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!0},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""}},setup(e,m){const w=Be(),y=I(()=>w),T=We(),U=I(()=>T),v=P=>{var z;return(P==null?void 0:P.logoURI)||(P==null?void 0:P.logo_url)||((z=y.value.tokensObj[P==null?void 0:P.address])==null?void 0:z.logo_url)||(U.value.theme==="default"?me("/image/coins/unknown.png"):me("/image/coins/sui-unknown.png"))},L=p(!1),N=I(()=>U.value.chainName),F=async()=>{m.emit("to-swap")};return console.log(e,"swapLoading===>"),{getCoinIcon:v,addCommom:E,sFixD:le,rateChange:L,chainName:N,clickNextBtn:F}}});const ve=e=>(Fe("data-v-a8ec2ef8"),e=e(),Re(),e),Za=ve(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),za={class:"new-swap-contnet"},Ha={class:"coin-info"},Ka={class:"from-coin-info"},Ya={class:"left"},Ga={class:"coin-amount"},Va={class:"coin-symbol"},xa={class:"right"},es={class:"to-coin-info"},os={class:"left"},ns={class:"coin-amount"},as={class:"coin-symbol"},ss={class:"right"},ts=ve(()=>o("div",{class:"to-swap-logo"},null,-1)),ls={class:"coin-rate"},is={key:0},us={class:"left"},rs=ve(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ds=ve(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),cs=[rs,ds],ms={key:1},vs={class:"left"},ps=ve(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),fs=ve(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),gs=[ps,fs],Cs={class:"bottom"},hs={class:"induction"},bs={class:"item"},ws={class:"induction-text"},ys={class:"induction-value"},As={class:"item"},Ss={class:"induction-text"},ks={class:"induction-value"},Is={class:"item"},$s={class:"induction-text"},Ts={key:0,class:"icon","aria-hidden":"true"},Ns=ve(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Ps=[Ns],Bs={class:"item"},Os={class:"induction-text"},_s={key:0,class:"induction-value"},Fs={key:1,class:"induction-value"},Rs={key:0,class:"price-updated"},Us=ve(()=>o("span",null,"Price updated",-1));function Ls(e,m,w,y,T,U){const v=Po,L=No("Modal"),N=_e("image");return r(),M(L,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:m[4]||(m[4]=F=>e.$emit("on-close"))},{closeIcon:ue(()=>[Za]),default:ue(()=>[o("div",za,[o("div",Ha,[o("div",Ka,[o("div",Ya,[o("div",Ga,i(e.fromCoinAmount&&("addCommom"in e?e.addCommom:q(E))(e.fromCoinAmount)),1),o("div",Va,i(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",xa,[H(o("img",null,null,512),[[N,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",es,[o("div",os,[o("div",ns,i(e.toCoinAmount&&("addCommom"in e?e.addCommom:q(E))(e.toCoinAmount)),1),o("div",as,i(e.toCoin&&e.toCoin.symbol),1)]),o("div",ss,[H(o("img",null,null,512),[[N,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),ts]),o("div",ls,[e.rateChange?(r(),C("div",ms,[o("div",vs,[H(o("img",null,null,512),[[N,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+i(e.toCoin&&e.toCoin.symbol)+" ≈",1),H(o("img",null,null,512),[[N,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,i(e.oneFromAmount)+" "+i(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:m[1]||(m[1]=F=>e.rateChange=!e.rateChange)},gs)])):(r(),C("div",is,[o("div",us,[H(o("img",null,null,512),[[N,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+i(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),H(o("img",null,null,512),[[N,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,i(e.oneToAmount)+" "+i(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:m[0]||(m[0]=F=>e.rateChange=!e.rateChange)},cs)]))])]),o("div",Cs,[o("div",hs,[o("div",bs,[o("div",ws,i(e.$t("modal.slippageTolerance")),1),o("div",ys,i(e.slippage)+"%",1)]),o("div",As,[o("div",Ss,i(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",ks,i(e.fixedFromCoin?("addCommom"in e?e.addCommom:q(E))(("sFixD"in e?e.sFixD:q(le))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:q(E))(("sFixD"in e?e.sFixD:q(le))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+i(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",Is,[o("div",$s,i(e.$t("common.priceImpact")),1),o("div",{class:ce(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[V(i(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),C("svg",Ts,Ps)):j("",!0)],2)]),o("div",Bs,[o("div",Os,i(e.$t("common.fee")),1),e.chainName=="Aptos"?(r(),C("div",_s,i(e.formatFee)+" "+i(e.fromCoin.symbol)+" ("+i(e.fee*100)+"%) ",1)):(r(),C("div",Fs,i(e.fee),1))])])])]),e.isShowAccept?(r(),C("div",Rs,[Us,Ce(v,{class:"accept-btn",loading:e.swapLoading,onClick:m[2]||(m[2]=F=>e.$emit("accept"))},{default:ue(()=>[V("Accept")]),_:1},8,["loading"])])):(r(),M(v,{key:1,class:"big-btn swap-confirm-btn",onClick:m[3]||(m[3]=F=>e.clickNextBtn())},{default:ue(()=>[V(i(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const js=Oe(Ja,[["render",Ls],["__scopeId","data-v-a8ec2ef8"]]),Ds=qe({setup(){const e=yo(),m=So(ko,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:w,locale:y}=rn(),T=We(),U=Be(),v=I(()=>U);let L=p(!1),N=p(!1),F=p(!1),P=p(!1),z=p(!1),W=p(!1);const X=p("fromCoin"),Z=p(""),x=p(""),S=p(!1),f=p(!0),ie=p(!1),Q=p(!1),G=p(!1),s=p(""),u=p(""),B=p(20),$=p(0),Ae=p(null),ee=p(!1),fe=I(()=>T.slippage),R=I(()=>T.chainName),J=I(()=>R.value?Ao(R.value):{}),t=p(),d=p(),Qe=I(()=>Ee&&Ee[R.value]&&Ee[R.value].hasRouter),eo=I(()=>U.getPoolInfoSuccess),Bo=I(()=>{var n;return k.value&&((n=k.value)!=null&&n.is_pause)?"Pool Closed":!t.value||!d.value?w("modal.selectTokenModalTitle"):!Number(s.value)&&!Number(u.value)?w("button.enterAmount"):!Qe.value&&!k.value&&eo.value?"Pool Not Found":Qe.value&&Te.value?"No Available Route":(console.log(ee.value,"===>insufficientLiquidity.value"),ee.value?w("button.insufficientLiquidity"):Number(s.value)>Number(ae.value)?w("button.insufficientBalance",{name:t.value.symbol}):w("button.swap"))}),Oo=n=>{var l,a,g,h;X.value=n,n==="fromCoin"?(Z.value=((l=d.value)==null?void 0:l.address)||"",x.value=((a=t.value)==null?void 0:a.address)||""):(Z.value=((g=t.value)==null?void 0:g.address)||"",x.value=((h=d.value)==null?void 0:h.address)||""),S.value=!0},Je=p({}),Ze=p({}),_o=n=>{X.value==="fromCoin"?(Je.value=n,He(n)):(Ze.value=n,He(n))},Fo=n=>{n==="fromCoin"?(f.value=!0,R.value==="Aptos"?s.value=ae.value>0?t.value.symbol=="APT"?new c(Number(ae.value)).sub(new c(.1)).lt(new c(0))?"0":new c(Number(ae.value)).sub(new c(.1)).toString():String(ae.value):"":s.value=ae.value>0?t.value.symbol=="SUI"?new c(Number(ae.value)).sub(new c(.05)).lt(new c(0))?"0":new c(Number(ae.value)).sub(new c(.05)).toString():String(ae.value):""):(f.value=!1,R.value==="Aptos"?u.value=te.value>0?d.value.symbol=="APT"?new c(Number(te.value)).sub(new c(.1)).lt(new c(0))?"0":new c(Number(te.value)).sub(new c(.1)).toString():String(te.value):"":u.value=te.value>0?d.value.symbol=="SUI"?new c(Number(te.value)).sub(new c(.05)).lt(new c(0))?"0":new c(Number(te.value)).sub(new c(.05)).toString():String(te.value):"")},Ro=n=>{n==="fromCoin"?(f.value=!0,s.value=ae.value>0?le(new c(Number(ae.value)).div(2).toString(),t.value.decimals).toString():""):(f.value=!1,u.value=te.value>0?le(new c(Number(te.value)).div(2).toString(),d.value.decimals).toString():"")};dn(()=>{no()}),cn(()=>{clearInterval(Ae.value)});const ze=I(()=>T),oo=()=>{!k.value&&!Qe.value||(clearInterval(Ae.value),U.setPoolConfigList(ze.value.chainName,ze.value.filterCoinsObj),$.value=0,N.value=!0,k.value&&U.updateCurrentPools(k.value.poolAddress,R.value),ke(f.value?s.value:u.value),ne.value.address&&J.value.getAccount(ne.value.address),T.getStatsData(R.value,ze.value.filterCoinsObj),setTimeout(()=>{N.value=!1,no()},1e3))},no=()=>{Ae.value=setInterval(()=>{N.value=!1,ie.value||$.value<B.value&&($.value+=1,$.value===B.value&&(R.value=="Aptos"?k.value&&k.value.poolAddress&&U.updateCurrentPools(k.value.poolAddress,R.value):W.value||oo(),$.value=0,N.value=!0))},1e3)};K(f,Me((n,l)=>{f.value=n},500));const Se=p(!1);K(s,Me((n,l)=>{n&&n!==0&&f.value&&ke(n),n==""&&f.value&&(u.value="")},500)),K(u,Me((n,l)=>{n&&n!==0&&!f.value&&ke(n),n==""&&!f.value&&(s.value="")},500));const re=p(1e-4),ao=async n=>{let l=n;if(console.log(l,"poolInfo====>"),R.value==="Aptos"&&!l.current_sqrt_price&&s.value&&u.value){const a=await J.value.getPools([l.address]);a&&a[0]&&(l={...n,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(l.current_sqrt_price&&s.value&&u.value){const g=(t.value.address===l.coinA.address&&d.value.address===l.coinB.address?0:1)==0,h=new c(s.value),b=new c(u.value),O=h.sub(h.mul(new c(l.fee)));console.log("getImpact###poolInfo.fee####",l.fee),console.log("getImpact###fAmount####",h.toString()),console.log("getImpact###tAmount####",b.toString()),console.log("getImpact###f####",O.toString());const D=b.div(O);console.log("getImpact####rates####",D.toString());const A=J.value.getPriceImpactPct(l,D.toString(),g);return console.log(A,"t===>"),A}return"--"},so=p(0),to=p(0),Uo=p(),se=p({}),Lo=async n=>{if(k.value&&(console.log(Number(s.value)==0,"===>Number(fromCoinAmount.value)==0"),!(f.value&&Number(s.value)==0)&&!(!f.value&&Number(u.value)==0)))if(t.value&&d.value&&(s.value||u.value)){Q.value=!0,G.value=!0,ee.value=!1;const l=t.value.address===k.value.coinA.address&&d.value.address===k.value.coinB.address?0:1;console.log(k.value,"poolInfo=====>451"),console.log(f.value?s.value:u.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(l,"===>direct");try{let a=await J.value.preSwap({pool:k.value,a2b:l==0,byAmountIn:f.value,amount:f.value?s.value:u.value});console.log(a,"preSwapRespreSwapRes"),ee.value=a==null?void 0:a.isExceed,Uo.value=a==null?void 0:a.estimatedFeeAmount,f.value?(u.value=a.estimatedAmountOut,z.value?Ie.value=(n/Number(a.estimatedAmountOut)).toString():$e.value=(Number(a.estimatedAmountOut)/n).toString()):(s.value=a.estimatedAmountIn,z.value?Ie.value=(Number(a.estimatedAmountIn)/n).toString():$e.value=(n/Number(a.estimatedAmountIn)).toString()),so.value=new c(u.value).div(s.value).toString(),to.value=new c(s.value).div(u.value).toString(),console.log("0524###getAmount###toAddLiquidiPoolInfo.value ###",se.value),console.log("0524###getAmount###poolInfo.value ###",k.value),re.value=R.value=="Aptos"?await ao(k.value):await ao(se.value||k.value),Q.value=!1,G.value=!1}catch(a){console.log("pre swap error",a),Q.value=!1,G.value=!1}}else f.value?u.value="":s.value="",Q.value=!1,G.value=!1},jo=tn(),ne=I(()=>jo),Do=p({}),Ie=p(""),$e=p(""),ae=I(()=>ne.value.assets&&t.value&&ne.value.assets[t.value.address]?ge(ne.value.assets[t.value.address].balance,t.value.decimals):0),te=I(()=>ne.value.assets&&d.value&&ne.value.assets[d.value.address]?ge(ne.value.assets[d.value.address].balance,d.value.decimals):0),Mo=yo();K(()=>v.value.tokensObj,async n=>{if(!be(n)){console.log(n,"===>newValue626"),console.log(Mo,"===>route625");const l=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?t.value=await J.value.getTokenBySymbol(n,a):!a&&!t.value&&(t.value=await J.value.getTokenBySymbol(n,T.chainName==="Aptos"?"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC"),console.log(t.value,"===>fromCoin.value")),l?d.value=await J.value.getTokenBySymbol(n,l):!l&&!d.value&&(d.value=await J.value.getTokenBySymbol(n,T.chainName==="Aptos"?"0x1::aptos_coin::AptosCoin":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdt::USDT")),!a&&l&&(t.value="",console.log("我清空了fromCoin"))}},{immediate:!0});const k=I(()=>{var n,l,a,g,h;if(t.value&&d.value){let b=null,O={};if(console.log(d.value.address,"===>toCoin.value.address930"),Object.values(v.value.poolConfigList).forEach(A=>{var _,Y,oe,de;(A.coinA.address.toUpperCase()===((_=t.value.address)==null?void 0:_.toUpperCase())&&A.coinB.address.toUpperCase()===((Y=d.value.address)==null?void 0:Y.toUpperCase())||A.coinB.address.toUpperCase()===((oe=t.value.address)==null?void 0:oe.toUpperCase())&&A.coinA.address.toUpperCase()===((de=d.value.address)==null?void 0:de.toUpperCase()))&&(console.log(A,"p===>"),O[A.address]={...A})}),R.value=="Aptos"&&v.value.poolsObj&&!be(v.value.poolsObj))for(const A in v.value.poolsObj){const _=v.value.poolsObj[A];(_.token_a.address.toUpperCase()===((n=t.value.address)==null?void 0:n.toUpperCase())&&_.token_b.address.toUpperCase()===((l=d.value.address)==null?void 0:l.toUpperCase())||_.token_b.address.toUpperCase()===((a=t.value.address)==null?void 0:a.toUpperCase())&&_.token_a.address.toUpperCase()===((g=d.value.address)==null?void 0:g.toUpperCase()))&&(O[_.address]={..._})}console.log(O,"===>currentPoolsObj");const D=Object.values(O).sort((A,_)=>A.fee-_.fee);console.log("0507####swap###poolInfo###poolSortList###",D);for(let A=0;A<D.length;A++)if(!((h=D[A])!=null&&h.is_pause)){b=D[A];break}return b=Object.values(O).sort((A,_)=>A.fee-_.fee)[0],console.log(O,"currentPoolsObj===>"),console.log("0507####swap###poolInfo###info###",b),b&&!be(b)?b:null}return null}),lo=p(!0),io=p(!1),Eo=async n=>{n&&R.value=="Aptos"&&(ke(f.value?s.value:u.value),io.value=!0,n.coinA.symbol.toLowerCase()===t.value.symbol.toLowerCase()&&n.coinB.symbol.toLowerCase()===d.value.symbol.toLowerCase()?lo.value=!0:lo.value=!1,ee.value=!1)};K(()=>k.value,(n,l)=>{n&&(!l||n.address!==l.address||n.current_sqrt_price!==l.current_sqrt_price)&&Eo(n)},{immediate:!0,deep:!0});const qo=I(()=>v.value.tokensObj&&t.value&&t.value.address&&v.value.tokensObj[t.value.address]&&v.value.tokensObj[t.value.address].logoURI),Wo=I(()=>(console.log(v.value.tokensObj,"===>pools.value.tokensObj"),v.value.tokensObj&&d.value&&d.value.address&&v.value.tokensObj[d.value.address]&&v.value.tokensObj[d.value.address].logoURI)),Xo=I(()=>v.value.tokensObj&&t.value&&t.value.address&&v.value.tokensObj[t.value.address]&&v.value.tokensObj[t.value.address].coingecko_id||null),Qo=I(()=>v.value.tokensObj&&d.value&&d.value.address&&v.value.tokensObj[d.value.address]&&v.value.tokensObj[d.value.address].coingecko_id||null),Jo=I(()=>{var g,h,b;const n=new c(s.value);console.log(se.value,"===>toAddLiquidiPoolInfo"),console.log((g=se==null?void 0:se.value)==null?void 0:g.fee,"toAddLiquidiPoolInfo?.value?.fee");const l=new c(R.value=="Aptos"?(h=k==null?void 0:k.value)==null?void 0:h.fee:(b=se==null?void 0:se.value)==null?void 0:b.fee),a=n.mul(l).toString();return console.log(a,"===>fee"),Number(a)<1/Math.pow(10,t.value.decimals)?`<${new c(1).div(new c(Math.pow(10,t.value.decimals))).toString()}`:le(a,t.value.decimals)}),{setIsShowSuccess:Zo,setIsShowRejected:uo,setIsShowWaiting:Ue,setTransactionDesc:zo,setTransactionTxid:ro}=T,Ho=async()=>{var l,a,g,h,b,O,D,A;W.value=!1,Q.value=!0,clearInterval(Pe),window.clearInterval(Pe),ro(""),zo(w("tips.swapping",{from:`${s.value} ${(l=t.value)==null?void 0:l.symbol}`,to:`${u.value} ${(a=d.value)==null?void 0:a.symbol}`})),Ue(!0);let n;R.value=="Aptos"&&(n=t.value.address===k.value.token_a.address&&d.value.address===k.value.token_b.address?0:1);try{console.log("0221####swap start####",R.value,"###",J),console.log("0412###toSwap###poolInfo.value###",k.value);let _;R.value=="Aptos"?_=await J.value.getSwapTransactionPayload({pool:k.value,a2b:n==0,byAmountIn:f.value,amount:f.value?s.value:u.value,slippage:Number(fe.value)/100}):(console.log(se.value,"===>toAddLiquidiPoolInfo.value"),_=await Le.value.swapRouterContract.getSwapRouterPayload(f.value,je.value.createTxParams)),console.log("0221####swap###swapPayload###",_);let Y;if(R.value==="Aptos")Y=await ne.value.currentWallet.signAndSubmitTransaction(_);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",R.value,"###swapPayload###",_);const oe=await ne.value.currentWallet.signAndExecuteTransactionBlock(_);console.log("0221###sui swap res###",oe),Y=J.value.handleTx(oe),console.log("0221###swap###sui##tx###",Y)}if(Y&&Y.hash){ro(Y.hash),Ue(!1),Zo(!0);const oe={title:w("tips.swap"),desc:w("tips.swapSuccessText",{from:`${s.value} ${(g=t.value)==null?void 0:g.symbol}`,to:`${u.value} ${(h=d.value)==null?void 0:h.symbol}`}),hash:Y.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(b=t.value)==null?void 0:b.address}`,numa:`- ${s.value}`,logoa:v.value.tokensObj&&t.value&&t.value.address&&v.value.tokensObj[t.value.address]&&v.value.tokensObj[t.value.address].logoURI,tokenb:`${(O=d.value)==null?void 0:O.address}`,numb:`+ ${u.value}`,logob:v.value.tokensObj&&d.value&&d.value.address&&v.value.tokensObj[d.value.address]&&v.value.tokensObj[d.value.address].logoURI},text:`Pay ${s.value} ${(D=t.value)==null?void 0:D.symbol} to receive ${u.value} ${(A=d.value)==null?void 0:A.symbol}`};R.value!=="Aptos"&&(oe.res=Y.res),J.value.showTransitionPending(oe);const de=await J.value.watchTransaction(oe);console.log("0221###swap###transitionStatus####",de),de&&setTimeout(()=>{R.value=="Aptos"&&U.updateCurrentPools(k.value.poolAddress,R.value),J.value.getAccount(ne.value.address)},1e3)}else Ue(!1),uo(!0);s.value="",u.value="",Q.value=!1}catch(_){s.value="",u.value="",console.log("Swap Error###",_),Q.value=!1,Ue(!1),uo(!0)}},Ko=n=>{var l;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((l=v.value.tokensObj[n==null?void 0:n.address])==null?void 0:l.logo_url)||(T.theme==="default"?me("/image/coins/unknown.png"):me("/image/coins/sui-unknown.png"))},co=p([]);K(()=>[t.value,d.value,v.value.poolConfigList],([n,l,a])=>{if(a&&a.length>0&&n&&l){const g=[];a.forEach(h=>{var b,O,D,A;(h.coinA.address.toUpperCase()===((b=n.address)==null?void 0:b.toUpperCase())&&h.coinB.address.toUpperCase()===((O=l.address)==null?void 0:O.toUpperCase())||h.coinB.address.toUpperCase()===((D=n.address)==null?void 0:D.toUpperCase())&&h.coinA.address.toUpperCase()===((A=l.address)==null?void 0:A.toUpperCase()))&&(h!=null&&h.is_pause||g.push(h.address))}),console.log(g,"result===>"),co.value=g}},{immediate:!0});const He=n=>{console.log(X.value,"===>currentCoinKey.value"),console.log(n);const l=localStorage.getItem(n.address);console.log(v.value.tokensObj,"===>pools.value.tokensObj"),console.log(l,"===>coinLocak"),v.value.tokensObj&&v.value.tokensObj[n.address]&&v.value.tokensObj[n.address].isSelfBuilt&&!l?Ke.value=!0:(X.value==="fromCoin"?(s.value="",d.value&&n.address.toLowerCase()===(d==null?void 0:d.value.address.toLowerCase())&&(d.value=null),t.value=n):(t.value&&(u.value="",n.address.toLowerCase()===(t==null?void 0:t.value.address.toLowerCase())&&(t.value=null)),d.value=n),mo())},Ke=p(!1),mo=()=>{Ze.value={},Je.value={},Ke.value=!1},Yo=I(()=>T.isShowRouterModal),Ye=p([]),Ge=p(""),Go=p(!1),vo=gn(),Le=I(()=>vo),Te=p(!1),je=p({}),Ve=p(""),po=n=>{if(n&&n.paths&&n.paths.length>0){const l=n.paths[0];if(n.coinTypeA&&n.coinTypeB&&n.coinTypeC){console.log(v.value.routerPoolConfigObj,"===>pools.value.poolConfigObj");const a=v.value.routerPoolConfigObj[l.poolAddress[0]],g=v.value.routerPoolConfigObj[l.poolAddress[1]],h=ge(n.paths[0].amountIn.toString(),t.value.decimals)*a.fee;let b,O=g.token_a.address==d.value.address?g.token_b.decimals:g.token_a.decimals;f.value?b=ge(l.rawAmountLimit[0].toString(),O)*g.fee:b=ge(l.rawAmountLimit[1].toString(),O)*g.fee;let D;console.log(g.token_a.address,d.value.address,"===>toCoin.value.address"),a.token_a.address==t.value.address?D=!1:D=!0;let A;D?A=J.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.token_a.decimals,a.token_b.decimals).toString():A=1/J.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.token_a.decimals,a.token_b.decimals).toString(),console.log(a,"===>1398 poolA"),console.log(O,"===>1398feeBDecimals"),console.log(D,"a2b1398"),console.log(A,1/A,b,"===>1398");const _=h+b*A;a.fee*100+"",Ve.value=_>0&&_<1e-6?`<0.000001 ${t.value.symbol}`:E(le(_,t.value.decimals))+` ${t.value.symbol}`}else{const a=v.value.routerPoolConfigObj[l.poolAddress[0]];console.log(v.value.routerPoolConfigObj,"===>pools.value.poolConfigObj");const g=ge(n.paths[0].amountIn.toString(),t.value.decimals)*a.fee;Ve.value=g>0&&g<1e-6?`<0.000001 ${t.value.symbol} (${a.fee*100}%)`:E(le(g,t.value.decimals))+` ${t.value.symbol} (${a.fee*100}%)`}}},fo=async n=>{if(console.log(n,"==>swapRouter"),re.value=1e-5,n&&n.paths&&n.paths.length>0){console.log("这里执行了吗1");const l=n.paths[0];if(console.log(n.coinTypeA,"===>swapRouter.coinTypeA"),console.log(t.value.address,"===>fromCoin.value.address"),console.log(n.coinTypeC,"====>toCoin.value.address"),console.log(d.value.address,"===>toCoin.value.address"),n.coinTypeA&&n.coinTypeB&&n.coinTypeC&&n.coinTypeA==t.value.address&&n.coinTypeC==d.value.address){const a=v.value.routerPoolConfigObj[l.poolAddress[0]],g=J.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.coinA.decimals,a.coinB.decimals).toNumber(),h=v.value.routerPoolConfigObj[l.poolAddress[1]],b=J.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[1],h.coinA.decimals,h.coinB.decimals).toNumber();console.log(a,"poolA"),console.log(t.value.address,d.value.address,"===>1343"),console.log(a.token_a.address,a.token_b.address,"poolA1465"),console.log(h.token_a.address,h.token_b.address,"poolB1465");let O,D;a.token_a.address==t.value.address?O=!0:O=!1,h.token_b.address==d.value.address?D=!0:D=!1,console.log(O,D,"a2bb2c"),new c(s.value).div(u.value).toNumber();const A=new c(u.value).div(s.value).toNumber();console.log(g,b,"池子A当前价格 池子A交易后价格 池子B当前价格 池子B交易后价格");let _;const Y=O?new c(g):new c(1).div(new c(g)),oe=D?new c(b):new c(1).div(new c(b));console.log(Y.toString(),oe.toString(),A,"==>currentPriceDirectA");const de=new c(Y.mul(oe)).sub(A).div(new c(Y.mul(oe))).mul(new c(100)).toNumber();_=de,console.log(de,"==>priceImpact"),_>100&&(console.log("我大于100了"),re.value=100),re.value=Number(we(Math.abs(_),2))}else if(n&&n.currentSqrtPrice&&n.currentSqrtPrice.length==1&&l&&!be(l)){const a=v.value.routerPoolConfigObj[l.poolAddress[0]],g=J.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.coinA.decimals,a.coinB.decimals).toNumber();let h;a.token_a.address==t.value.address?h=!0:h=!1;const b=h?new c(g):new c(1).div(new c(g)),O=new c(u.value).div(s.value).toNumber(),D=new c(b).sub(O).div(new c(b)).mul(new c(100)).toNumber(),A=D;console.log(D,"==>priceImpact"),A>100&&(console.log("我大于100了"),re.value=100),re.value=Number(we(Math.abs(A),2)),console.log(D,"这里执行了吗"),console.log(a,"pool===>"),console.log(re.value,"==>impact.value")}}},go=async n=>{if(t.value&&d.value&&(Number(s.value)>0||Number(u.value)>0)){console.log(new Date().getTime(),"开始计算时间戳"),console.log("执行吧"),(!s.value&&u.value||s.value&&!u.value)&&(Q.value=!0),Se.value=!0,Te.value=!1,console.log(k.value,"==>poolInfo.value.");let l;k.value&&(l=t.value.address===k.value.coinA.address&&d.value.address===k.value.coinB.address?0:1);try{let a;if(f.value){const O=new c(s.value).mul(Math.pow(10,t.value.decimals)).toString();a=new De(O)}else{const O=new c(u.value).mul(Math.pow(10,d.value.decimals)).toString();a=new De(O)}console.log(a.toString(),"====>1498");const g=Number(fe.value)/100;console.log(Le.value,"===>swapRouterContract.value");const h=k.value?{poolAddresses:co.value,coinTypeA:k.value.coin_a_address,coinTypeB:k.value.coin_b_address,decimalsA:k.value.coinA.decimals,decimalsB:k.value.coinB.decimals,a2b:l==0,byAmountIn:f.value,amount:f.value?s.value:u.value}:"",b=await Le.value.swapRouterContract.getSwapRouter(t,d,a,f.value,g,"",k.value?h:"");console.log(new Date().getTime(),"计算完成时间戳"),console.log(b,"===> swapRouter1454"),b?(je.value=b,Ye.value=b.paths,ee.value=b.isExceed,console.log(b.isExceed,ee.value,"===>swapRouter.isExceed"),Ge.value=b.amountIn,po(b),f.value?s.value&&(u.value=b.amountOut):u.value&&(s.value=b.amountIn),Ie.value=E(he(new c(s.value).div(new c(u.value).toString()),t.value.decimals)),$e.value=E(he(new c(u.value).div(s.value).toString(),d.value.decimals)),fo(b),Q.value=!1,Te.value=!1,Se.value=!1):(Q.value=!1,Te.value=!0,Se.value=!1)}catch(a){console.log("pre swap error",a),Q.value=!1,Se.value=!1}}else f.value?u.value="":s.value="",Q.value=!1,Se.value=!1;console.log(Q.value,"====>routerSwaping")},Ne=p(!1),Co=async n=>{console.log("3s执行一次");try{let l;if(f.value){const h=new c(s.value).mul(Math.pow(10,t.value.decimals)).toString();l=new De(h)}else{const h=new c(u.value).mul(Math.pow(10,d.value.decimals)).toString();l=new De(h)}const a=Number(fe.value)/100,g=await Le.value.swapRouterContract.getSwapRouter(t,d,l,f.value,a,"");g&&(je.value=g,Ye.value=g.paths,ee.value=g.isExceed,console.log(g.isExceed,ee.value,"===>swapRouter.isExceed"),Ge.value=g.amountIn,po(g),Ie.value=E(he(new c(s.value).div(new c(u.value).toString()),t.value.decimals)),$e.value=E(he(new c(u.value).div(s.value).toString(),d.value.decimals)),fo(g),f.value?u.value!==g.amountOut&&(Ne.value=!0,u.value=g.amountOut):s.value!==g.amountIn&&(Ne.value=!0,s.value=g.amountIn))}catch(l){console.log("pre swap error",l)}};let Pe=p(null);K(()=>W.value,n=>{n?(console.log("我开启了"),Pe.value=setInterval(()=>{Co(f.value)},3e3)):(console.log("我关闭了"),clearInterval(Pe.value),window.clearInterval(Pe.value))},{immediate:!0});const ke=async n=>{R.value=="Aptos"?Lo(n):(console.log("调用sui"),go())},Vo=I(()=>vo),xo=I(()=>Vo.value.isInitRouter);K(()=>xo.value,n=>{n||ke(f.value?s.value:u.value)},{immediate:!0}),K(()=>[t.value,d.value],([n,l])=>{if(n&&l&&ke(f.value?s.value:u.value),n||l){const a=`/swap?from=${n==null?void 0:n.address}&to=${l==null?void 0:l.address}`;e.push(a)}},{immediate:!0});function en(n,l=500){let a=null;return function(...g){clearTimeout(a),a=setTimeout(()=>{n.call(this,...g)},l)}}const on=en(ho);function ho(){console.log("====>调用了几次");const n=t.value;t.value=d.value,d.value=n,L.value=!0,f.value=!f.value,f.value?(s.value=u.value,u.value=""):(u.value=s.value,s.value=""),setTimeout(()=>{L.value=!1},300)}return{closeSwapConfirmModal:()=>{W.value=!1,Ne.value=!1},updateAccept:()=>{Ne.value=!1},clickExchange:ho,debounceClickExchange:on,closeTokenWarning:mo,isShowTokenWarning:Ke,getTokenSource:He,hasPool:io,getPoolInfoSuccess:eo,halfBtnSelect:Ro,formCoinId:Xo,toCoinId:Qo,fromCoinUrl:qo,toCoinUrl:Wo,t:w,indicator:m,wallet:ne,currentLpInfo:Do,fixD:we,decimalFormat:ln,impact:re,oneFromAmount:Ie,oneToAmount:$e,importIcon:me,clickRefresh:oo,refresh:N,change:L,isShowAddress:F,isShowSwapSetting:P,fromCoin:t,toCoin:d,slippage:fe,openCoinSelect:Oo,onCoinSelect:_o,existingCoins:Z,lastSelectCoin:x,currentCoinKey:X,showCoinSelect:S,fromCoinAmount:s,toCoinAmount:u,maxBtnSelect:Fo,fixedFromCoin:f,swapBtnText:Bo,toSwap:Ho,loading:ie,swaping:Q,autoRefreshTime:B,countdown:$,marketTimer:Ae,rateChange:z,isSwapConfirmMpdal:W,fromCoinBlance:ae,toCoinBlance:te,poolInfo:k,chainName:R,swapRouterLoading:Se,formatFee:Jo,calculating:G,currentRate:so,currentRateReverse:to,getCoinIcon:Ko,toAddLiquidiPoolInfo:se,decimalUi:he,warningToCoin:Ze,warningFromCoin:Je,isShowRouterModal:Yo,toSwapLoading:Go,insufficientLiquidity:ee,routerPool:Ye,routerTotalAmounts:Ge,store:T,suiPreSwapdata:je,suiSwapFee:Ve,addCommom:E,debounce:Me,notFoundRouter:Te,getSuiAmountAccept:Co,isShowAccept:Ne,getSuiAmount:go}}}),Ms="data:image/png;base64,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";const pe=e=>(Fe("data-v-f51dd7cb"),e=e(),Re(),e),Es={class:"swap-container"},qs={class:"title"},Ws={class:"left"},Xs={class:"right title-right"},Qs=pe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Js={class:"swap-card"},Zs={class:"card-container"},zs={class:"card-item"},Hs={class:"card-item"},Ks=pe(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Ys=[Ks],Gs={key:1,class:"induction"},Vs={key:0,class:"exchange-rate-btn"},xs={key:0},et={key:0},ot={key:0},nt={key:1},at={key:0},st=pe(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),tt=[st],lt={class:"item"},it={class:"induction-text"},ut={key:0,class:"icon","aria-hidden":"true"},rt=pe(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),dt=[rt],ct={class:"item"},mt={class:"induction-text"},vt={key:0,class:"induction-value"},pt={class:"item"},ft={class:"induction-text"},gt={key:0,class:"induction-value"},Ct={key:0,class:"icon","aria-hidden":"true"},ht=pe(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),bt=[ht],wt={key:2,class:"token-info-container"},yt={class:"token-info-title"},At=pe(()=>o("span",{class:"coingecko"},"Ref. CoinGecko",-1)),St=pe(()=>o("img",{src:Ms,alt:""},null,-1)),kt=pe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function It(e,m,w,y,T,U){var s,u;const v=nn,L=sn,N=Gn,F=Io,P=$o,z=Po,W=vn,X=fn,Z=pn,x=mn,S=ya,f=an,ie=Qa,Q=js,G=_e("image");return r(),C("div",Es,[o("div",qs,[o("div",Ws,i(e.$t("menu.swap")),1),o("div",Xs,[o("div",{class:"slippage-icon",onClick:m[0]||(m[0]=B=>e.isShowSwapSetting=!0)},[Qs,o("span",null,i(e.slippage)+"%",1)]),Ce(v,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Js,[o("div",Zs,[o("div",zs,[Ce(L,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":m[1]||(m[1]=B=>e.fromCoinAmount=B),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:m[2]||(m[2]=B=>e.maxBtnSelect("fromCoin")),onOnHalf:m[3]||(m[3]=B=>e.halfBtnSelect("fromCoin")),onOnInput:m[4]||(m[4]=B=>{e.fromCoinAmount=B,e.fixedFromCoin=!0}),onOnSelect:m[5]||(m[5]=B=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",Hs,[Ce(L,{modelValue:e.toCoinAmount,"onUpdate:modelValue":m[6]||(m[6]=B=>e.toCoinAmount=B),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:m[7]||(m[7]=B=>{e.toCoinAmount=B,e.fixedFromCoin=!1}),onOnSelect:m[8]||(m[8]=B=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:ce(e.change?"gang animationex":"gang"),src:Cn,alt:""},null,2),o("div",{class:ce(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:m[9]||(m[9]=(...B)=>e.debounceClickExchange&&e.debounceClickExchange(...B))},[(r(),C("svg",{class:ce(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Ys,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(r(),M(N,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(r(),C("div",Gs,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(r(),C("div",Vs,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(r(),C("span",nt,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(r(),C("span",at,[H(o("img",null,null,512),[[G,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),V(" 1 "+i(e.toCoin.symbol)+" ≈ ",1),H(o("img",null,null,512),[[G,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,i(("addCommom"in e?e.addCommom:q(E))(("decimalUi"in e?e.decimalUi:q(he))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),V("  "+i(e.fromCoin.symbol),1)])):(r(),M(F,{key:1,indicator:e.indicator},null,8,["indicator"]))])):j("",!0):(r(),C("span",xs,[H(o("img",null,null,512),[[G,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),V(" 1 "+i(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(r(),C("span",et,[H(o("img",null,null,512),[[G,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?j("",!0):(r(),C("span",ot,i(("addCommom"in e?e.addCommom:q(E))(("decimalUi"in e?e.decimalUi:q(he))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(r(),M(F,{key:1,indicator:e.indicator},null,8,["indicator"])):j("",!0),V("  "+i(e.toCoin.symbol),1)])):(r(),M(F,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(r(),C("svg",{class:"icon-change","aria-hidden":"true",onClick:m[10]||(m[10]=B=>e.rateChange=!e.rateChange)},tt))])):j("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(r(),C(xe,{key:1},[o("div",lt,[o("div",it,i(e.$t("common.priceImpact")),1),e.swaping?(r(),M(P,{key:1,paragraph:!1,active:""})):(r(),C("div",{key:0,class:ce(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[V(i(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(r(),C("svg",ut,dt)):j("",!0)],2))]),o("div",ct,[o("div",mt,i(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(r(),M(P,{key:1,paragraph:!1,active:""})):(r(),C("div",vt,i(e.fixedFromCoin?("addCommom"in e?e.addCommom:q(E))(("fixD"in e?e.fixD:q(we))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:q(E))(("fixD"in e?e.fixD:q(we))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+i(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",pt,[o("div",ft,i(e.$t("common.fee")),1),e.swaping?(r(),M(P,{key:1,paragraph:!1,active:""})):(r(),C("div",gt,i(("addCommom"in e?e.addCommom:q(E))(e.formatFee,e.fromCoin.decimals))+" "+i(e.fromCoin.symbol)+" ("+i(e.chainName=="Aptos"?e.poolInfo.fee*100:((s=e.toAddLiquidiPoolInfo)==null?void 0:s.fee)*100)+"%) ",1))])],64)):j("",!0)])):j("",!0)]),Ce(z,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((u=e.poolInfo)==null?void 0:u.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:m[11]||(m[11]=B=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ue(()=>[e.wallet.connected?(r(),C("svg",Ct,bt)):j("",!0),o("span",null,i(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),Ce(W),e.showCoinSelect?(r(),M(X,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:m[12]||(m[12]=B=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):j("",!0),e.isShowSwapSetting?(r(),M(Z,{key:1,onOnClose:m[13]||(m[13]=B=>e.isShowSwapSetting=!1)})):j("",!0),e.chainName&&(e.formCoinId||e.toCoinId)?(r(),C("div",wt,[o("div",yt,[At,St,Ce(x,{placement:"top","arrow-point-at-center":""},{title:ue(()=>[V(" The following price is only an external reference from CoinGecko, which may not reflect actual data on Cetus. ")]),default:ue(()=>[kt]),_:1})]),e.fromCoin&&e.formCoinId?(r(),M(S,{key:0,id:e.formCoinId,coin:e.fromCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):j("",!0),e.toCoin&&e.toCoinId?(r(),M(S,{key:1,id:e.toCoinId,coin:e.toCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):j("",!0)])):j("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(r(),M(f,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):j("",!0),e.isShowRouterModal?(r(),M(ie,{key:4,"router-pool":e.routerPool,"routertotal-percents":e.routertotalPercents,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"router-total-amounts":e.routerTotalAmounts,onOnClose:m[14]||(m[14]=B=>e.store.setIsShowRouterModal(!1))},null,8,["router-pool","routertotal-percents","from-coin","to-coin","from-coin-amount","to-coin-amount","router-total-amounts"])):j("",!0),e.isSwapConfirmMpdal?(r(),M(Q,{key:5,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFee:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFee:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):j("",!0)])}const zt=Oe(Ds,[["render",It],["__scopeId","data-v-f51dd7cb"]]);export{zt as default};
